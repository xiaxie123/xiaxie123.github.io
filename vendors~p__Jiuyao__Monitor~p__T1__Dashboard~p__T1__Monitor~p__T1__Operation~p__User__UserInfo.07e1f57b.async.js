(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+DwW":function(Fn,Gt,_){"use strict";var rt=_("mrSG"),a=_("Mw2x"),E=function(e){Object(rt.b)(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.isGroup=function(){return!0},r.prototype.isEntityGroup=function(){return!1},r.prototype.clone=function(){for(var p=e.prototype.clone.call(this),b=this.getChildren(),S=0;S<b.length;S++){var l=b[S];p.add(l.clone())}return p},r}(a.a);Gt.a=E},"+Nd1":function(Fn,Gt,_){"use strict";var rt=_("DdT1"),a=_("FPPI");Gt.a=function(){var E=1,e=1,r=0,p=!1;function b(l){var A=l.height+1;return l.x0=l.y0=r,l.x1=E,l.y1=e/A,l.eachBefore(S(e,A)),p&&l.eachBefore(rt.a),l}function S(l,A){return function(j){j.children&&Object(a.a)(j,j.x0,l*(j.depth+1)/A,j.x1,l*(j.depth+2)/A);var y=j.x0,n=j.y0,s=j.x1-r,h=j.y1-r;s<y&&(y=s=(y+s)/2),h<n&&(n=h=(n+h)/2),j.x0=y,j.y0=n,j.x1=s,j.y1=h}}return b.round=function(l){return arguments.length?(p=!!l,b):p},b.size=function(l){return arguments.length?(E=+l[0],e=+l[1],b):[E,e]},b.padding=function(l){return arguments.length?(r=+l,b):r},b}},"+wVF":function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return h});var rt=_("mrSG"),a=_("zJSt"),E=_("YuPD"),e=_("iTfj"),r=_("n/J0"),p=_("w02o");function b(M){var O=M.chart,T=M.options,v=T.data,m=T.type,C=T.reflect,D=T.xField,Y=T.yField,Z=T.colorField,et=T.sizeField,dt=T.sizeRatio,ht=T.shape,St=T.color;O.data(v);var wt;m==="density"?wt=O.heatmap().position(D+"*"+Y):wt=O.polygon().position(D+"*"+Y),Z&&wt.color(Z,St||r.b.GRADIENT.CONTINUOUS),C&&O.coordinate().reflect(C);var xt=1;if((dt||dt===0)&&(!ht&&!et?console.warn("sizeRatio is not in effect: Must define shape or sizeField first"):dt<0||dt>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):xt=dt),ht&&(et||wt.shape("",function(){return[ht,1,xt]}),et)){var ft=v.map(function(Ot){return Ot[et]}),Bt=Math.min.apply(Math,ft),Rt=Math.max.apply(Math,ft);wt.shape(et,function(Ot){return[ht,(Ot-Bt)/(Rt-Bt),xt]})}return M}function S(M){var O,T=M.options,v=T.xAxis,m=T.yAxis,C=T.xField,D=T.yField;return Object(E.e)(Object(p.f)((O={},O[C]=v,O[D]=m,O)))(M)}function l(M){var O=M.chart,T=M.options,v=T.xAxis,m=T.yAxis,C=T.xField,D=T.yField;return v===!1?O.axis(C,!1):O.axis(C,v),m===!1?O.axis(D,!1):O.axis(D,m),M}function A(M){var O=M.chart,T=M.options,v=T.legend,m=T.colorField;return v?O.legend(m,v):O.legend(!1),M}function j(M){var O=M.chart,T=M.options,v=T.xField,m=T.yField,C=T.colorField,D=T.sizeField,Y=T.heatmapStyle,Z=O.geometries[0];return Y&&Z&&(Object(e.isFunction)(Y)?Z.style(v+"*"+m+"*"+C+"*"+D,Y):Object(e.isObject)(Y)&&Z.style(Y)),M}function y(M){var O=M.chart,T=M.options,v=T.label,m=T.colorField,C=T.type,D=Object(E.c)(O,C==="density"?"heatmap":"polygon");if(!v)D.label(!1);else if(m){var Y=v.callback,Z=Object(rt.c)(v,["callback"]);D.label({fields:[m],callback:Y,cfg:Object(E.o)(Z)})}return M}function n(M){return Object(E.e)(b,S,p.j,l,A,p.k,j,y,Object(p.b)(),p.c,p.a)(M)}var s=_("Ihc8");Object(s.registerShape)("polygon","circle",{draw:function(O,T){var v,m,C=O.x,D=O.y,Y=this.parsePoints(O.points),Z=Math.abs(Y[2].x-Y[1].x),et=Math.abs(Y[1].y-Y[0].y),dt=Math.min(Z,et)/2,ht=Number(O.shape[1]),St=Number(O.shape[2]),wt=Math.sqrt(St),xt=dt*wt*Math.sqrt(ht),ft=((v=O.style)===null||v===void 0?void 0:v.fill)||O.color||((m=O.defaultStyle)===null||m===void 0?void 0:m.fill),Bt=T.addShape("circle",{attrs:Object(rt.a)(Object(rt.a)(Object(rt.a)({x:C,y:D,r:xt},O.defaultStyle),O.style),{fill:ft})});return Bt}}),Object(s.registerShape)("polygon","square",{draw:function(O,T){var v,m,C=O.x,D=O.y,Y=this.parsePoints(O.points),Z=Math.abs(Y[2].x-Y[1].x),et=Math.abs(Y[1].y-Y[0].y),dt=Math.min(Z,et),ht=Number(O.shape[1]),St=Number(O.shape[2]),wt=Math.sqrt(St),xt=dt*wt*Math.sqrt(ht),ft=((v=O.style)===null||v===void 0?void 0:v.fill)||O.color||((m=O.defaultStyle)===null||m===void 0?void 0:m.fill),Bt=T.addShape("rect",{attrs:Object(rt.a)(Object(rt.a)(Object(rt.a)({x:C-xt/2,y:D-xt/2,width:xt,height:xt},O.defaultStyle),O.style),{fill:ft})});return Bt}});var h=function(M){Object(rt.b)(O,M);function O(){var T=M!==null&&M.apply(this,arguments)||this;return T.type="heatmap",T}return O.prototype.getSchemaAdaptor=function(){return n},O.prototype.getDefaultOptions=function(){return Object(E.b)({},M.prototype.getDefaultOptions.call(this),{type:"polygon",legend:!1,xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}})},O}(a.a)},"/+3i":function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return m});var rt=_("mrSG"),a=_("YuPD"),E=_("zJSt"),e=_("iTfj"),r=_("w02o"),p=_("n/J0"),b="$$stock-range$$",S="trend",l="up",A="down",j=["#ef5350","#26a69a"],y={showTitle:!1,showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0},itemTpl:'<li class="g2-tooltip-list-item" data-index={index}><span style="background-color:{color};" class="g2-tooltip-marker"></span>{name}{value}</li>'};function n(C,D){return Object(e.map)(C,function(Y){if(Object(e.isArray)(D)){var Z=D[0],et=D[1],dt=D[2],ht=D[3];Y[S]=Y[Z]<=Y[et]?l:A,Y[b]=[Y[Z],Y[et],Y[dt],Y[ht]]}return Y})}function s(C){var D=C.chart,Y=C.options,Z=Y.xField,et=Y.yField,dt=Y.data;D.data(n(dt,et));var ht=D.schema().position(Z+"*"+b).shape("candle");return ht.color(S,j),C}function h(C){var D,Y,Z=C.chart,et=C.options,dt=et.meta,ht=et.xAxis,St=et.yAxis,wt=et.xField,xt=(D={},D[wt]={type:"timeCat",tickCount:6},D[S]={values:[l,A]},D),ft=Object(a.b)(xt,dt,(Y={},Y[wt]=Object(a.k)(ht,p.a),Y[b]=Object(a.k)(St,p.a),Y));return Z.scale(ft),C}function M(C){var D=C.chart,Y=C.options,Z=Y.xAxis,et=Y.yAxis,dt=Y.xField;return Z===!1?D.axis(dt,!1):D.axis(dt,Z),et===!1?D.axis(b,!1):D.axis(b,et),C}function O(C){var D=C.chart,Y=C.options,Z=Y.xField,et=Y.yField,dt=Y.meta,ht=dt===void 0?{}:dt,St=Y.tooltip,wt=St===void 0?{}:St,xt=Object(a.c)(D,"schema"),ft=et[0],Bt=et[1],Rt=et[2],Ot=et[3],X=ht[ft]&&ht[ft].alias||ft,ut=ht[Bt]?ht[Bt].alias||ft:Bt,vt=ht[Rt]&&ht[Rt].alias||Rt,pt=ht[Ot]&&ht[Ot].alias||Ot,Et={fields:[Z,ft,Bt,Rt,Ot],callback:function(z,P,H,k,d){var g={name:z,value:`
          <br><span data-label="`+X+'" style="padding-left: 16px">'+X+"\uFF1A"+P+`</span>
          <br><span data-label="`+ut+'" style="padding-left: 16px">'+ut+"\uFF1A"+H+`</span>
          <br><span data-label="`+vt+'" style="padding-left: 16px">'+vt+"\uFF1A"+k+`</span>
          <br><span data-label="`+pt+'" style="padding-left: 16px">'+pt+"\uFF1A"+d+`</span>
        `};return g}},q={crosshairs:{text:function(z,P,H){var k={position:"end"};if(z==="x"){var d=H[0];k.content=d?d.data[Z]:P}else k.content=P;return k}}};if(wt){if(Object(e.isObject)(wt)){var st=Object(a.b)({},q,wt);D.tooltip(st),xt.tooltip(Et)}}else D.tooltip(!1);return C}function T(C){var D=C.chart,Y=C.options,Z=Y.legend;return Z?D.legend(S,Z):Z===!1&&D.legend(!1),C}function v(C){Object(a.e)(s,h,r.j,M,O,T,r.c,r.a)(C)}var m=function(C){Object(rt.b)(D,C);function D(){var Y=C!==null&&C.apply(this,arguments)||this;return Y.type="stock",Y}return D.prototype.getDefaultOptions=function(){return Object(a.b)({},C.prototype.getDefaultOptions.call(this),{tooltip:y,interactions:[{type:"tooltip"}],legend:{position:"top-left"}})},D.prototype.getSchemaAdaptor=function(){return v},D.prototype.changeData=function(Y){this.updateOption({data:Y});var Z=this.options.yField;this.chart.changeData(n(Y,Z))},D}(E.a)},"/3+T":function(Fn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"Line",function(){return A}),_.d(Gt,"Circle",function(){return y}),_.d(Gt,"Base",function(){return S}),_.d(Gt,"Html",function(){return C});var rt=_("mrSG"),a=_("5UbV"),E=_("iTfj"),e=_("MeYt"),r=_("jqgP"),p=_("L16w"),b=function(D){Object(rt.b)(Y,D);function Y(){return D!==null&&D.apply(this,arguments)||this}return Y.prototype.getDefaultCfg=function(){var Z=D.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},Z),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:p.a.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:p.a.textColor,textAlign:"center",textBaseline:"middle",fontFamily:p.a.fontFamily}},textBackground:{padding:5,style:{stroke:p.a.lineColor}}}})},Y.prototype.renderInner=function(Z){this.get("line")&&this.renderLine(Z),this.get("text")&&(this.renderText(Z),this.renderBackground(Z))},Y.prototype.renderText=function(Z){var et=this.get("text"),dt=et.style,ht=et.autoRotate,St=et.content;if(!Object(E.isNil)(St)){var wt=this.getTextPoint(),xt=null;if(ht){var ft=this.getRotateAngle();xt=Object(r.e)(wt,ft)}this.addShape(Z,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:Object(rt.a)(Object(rt.a)(Object(rt.a)({},wt),{text:St,matrix:xt}),dt)})}},Y.prototype.renderLine=function(Z){var et=this.getLinePath(),dt=this.get("line"),ht=dt.style;this.addShape(Z,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:Object(rt.a)({path:et},ht)})},Y.prototype.renderBackground=function(Z){var et=this.getElementId("text"),dt=Z.findById(et),ht=this.get("textBackground");if(ht&&dt){var St=dt.getBBox(),wt=Object(a.c)(ht.padding),xt=ht.style,ft=this.addShape(Z,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:Object(rt.a)({x:St.x-wt[3],y:St.y-wt[0],width:St.width+wt[1]+wt[3],height:St.height+wt[0]+wt[2],matrix:dt.attr("matrix")},xt)});ft.toBack()}},Y}(e.a),S=b,l=function(D){Object(rt.b)(Y,D);function Y(){return D!==null&&D.apply(this,arguments)||this}return Y.prototype.getDefaultCfg=function(){var Z=D.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},Z),{type:"line",locationType:"region",start:null,end:null})},Y.prototype.getRotateAngle=function(){var Z=this.getLocation(),et=Z.start,dt=Z.end,ht=this.get("text").position,St=Math.atan2(dt.y-et.y,dt.x-et.x),wt=ht==="start"?St-Math.PI/2:St+Math.PI/2;return wt},Y.prototype.getTextPoint=function(){var Z=this.getLocation(),et=Z.start,dt=Z.end,ht=this.get("text"),St=ht.position,wt=ht.offset;return Object(a.f)(et,dt,St,wt)},Y.prototype.getLinePath=function(){var Z=this.getLocation(),et=Z.start,dt=Z.end;return[["M",et.x,et.y],["L",dt.x,dt.y]]},Y}(S),A=l,j=function(D){Object(rt.b)(Y,D);function Y(){return D!==null&&D.apply(this,arguments)||this}return Y.prototype.getDefaultCfg=function(){var Z=D.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},Z),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},Y.prototype.getRotateAngle=function(){var Z=this.getLocation(),et=Z.startAngle,dt=Z.endAngle,ht=this.get("text").position,St=ht==="start"?et+Math.PI/2:dt-Math.PI/2;return St},Y.prototype.getTextPoint=function(){var Z=this.get("text"),et=Z.position,dt=Z.offset,ht=this.getLocation(),St=ht.center,wt=ht.radius,xt=ht.startAngle,ft=ht.endAngle,Bt=et==="start"?xt:ft,Rt=this.getRotateAngle()-Math.PI,Ot=Object(a.e)(St,wt,Bt),X=Math.cos(Rt)*dt,ut=Math.sin(Rt)*dt;return{x:Ot.x+X,y:Ot.y+ut}},Y.prototype.getLinePath=function(){var Z=this.getLocation(),et=Z.center,dt=Z.radius,ht=Z.startAngle,St=Z.endAngle,wt=null;if(St-ht==Math.PI*2){var xt=et.x,ft=et.y;wt=[["M",xt,ft-dt],["A",dt,dt,0,1,1,xt,ft+dt],["A",dt,dt,0,1,1,xt,ft-dt],["Z"]]}else{var Bt=Object(a.e)(et,dt,ht),Rt=Object(a.e)(et,dt,St),Ot=Math.abs(St-ht)>Math.PI?1:0,X=ht>St?0:1;wt=[["M",Bt.x,Bt.y],["A",dt,dt,0,Ot,X,Rt.x,Rt.y]]}return wt},Y}(S),y=j,n=_("fIp6"),s=_("de35"),h="g2-crosshair",M=h+"-line",O=h+"-text",T,v=(T={},T[""+h]={position:"relative"},T[""+M]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},T[""+O]={position:"absolute",color:p.a.textColor,fontFamily:p.a.fontFamily},T),m=function(D){Object(rt.b)(Y,D);function Y(){return D!==null&&D.apply(this,arguments)||this}return Y.prototype.getDefaultCfg=function(){var Z=D.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},Z),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+h+'"></div>',crosshairTpl:'<div class="'+M+'"></div>',textTpl:'<span class="'+O+'">{content}</span>',domStyles:null,containerClassName:h,defaultStyles:v,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},Y.prototype.render=function(){this.resetText(),this.resetPosition()},Y.prototype.initCrossHair=function(){var Z=this.getContainer(),et=this.get("crosshairTpl"),dt=Object(n.b)(et);Z.appendChild(dt),this.applyStyle(M,dt),this.set("crosshairEl",dt)},Y.prototype.getTextPoint=function(){var Z=this.getLocation(),et=Z.start,dt=Z.end,ht=this.get("text"),St=ht.position,wt=ht.offset;return Object(a.f)(et,dt,St,wt)},Y.prototype.resetText=function(){var Z=this.get("text"),et=this.get("textEl");if(Z){var dt=Z.content;if(!et){var ht=this.getContainer(),St=Object(E.substitute)(this.get("textTpl"),Z);et=Object(n.b)(St),ht.appendChild(et),this.applyStyle(O,et),this.set("textEl",et)}et.innerHTML=dt}else et&&et.remove()},Y.prototype.isVertical=function(Z,et){return Z.x===et.x},Y.prototype.resetPosition=function(){var Z=this.get("crosshairEl");Z||(this.initCrossHair(),Z=this.get("crosshairEl"));var et=this.get("start"),dt=this.get("end"),ht=Math.min(et.x,dt.x),St=Math.min(et.y,dt.y);this.isVertical(et,dt)?Object(n.e)(Z,{width:"1px",height:Object(a.l)(Math.abs(dt.y-et.y))}):Object(n.e)(Z,{height:"1px",width:Object(a.l)(Math.abs(dt.x-et.x))}),Object(n.e)(Z,{top:Object(a.l)(St),left:Object(a.l)(ht)}),this.alignText()},Y.prototype.alignText=function(){var Z=this.get("textEl");if(Z){var et=this.get("text").align,dt=Z.clientWidth,ht=this.getTextPoint();switch(et){case"center":ht.x=ht.x-dt/2;break;case"right":ht.x=ht.x-dt;case"left":break}Object(n.e)(Z,{top:Object(a.l)(ht.y),left:Object(a.l)(ht.x)})}},Y.prototype.updateInner=function(Z){Object(E.hasKey)(Z,"text")&&this.resetText(),D.prototype.updateInner.call(this,Z)},Y}(s.a),C=m},"/ezw":function(Fn,Gt,_){"use strict";var rt=_("rePB"),a=_("wx14"),E=_("U8pU"),e=_("q1tI"),r=_("TSYQ"),p=_.n(r),b=function(Rt){var Ot=Rt.prefixCls,X=Rt.className,ut=Rt.width,vt=Rt.style;return e.createElement("h3",{className:p()(Ot,X),style:Object(a.a)({width:ut},vt)})},S=b,l=_("KQm4"),A=function(Rt){var Ot=function(st){var it=Rt.width,z=Rt.rows,P=z===void 0?2:z;if(Array.isArray(it))return it[st];if(P-1===st)return it},X=Rt.prefixCls,ut=Rt.className,vt=Rt.style,pt=Rt.rows,Et=Object(l.a)(Array(pt)).map(function(q,st){return e.createElement("li",{key:st,style:{width:Ot(st)}})});return e.createElement("ul",{className:p()(X,ut),style:vt},Et)},j=A,y=_("H84U"),n=function(Rt){var Ot,X,ut=Rt.prefixCls,vt=Rt.className,pt=Rt.style,Et=Rt.size,q=Rt.shape,st=p()((Ot={},Object(rt.a)(Ot,"".concat(ut,"-lg"),Et==="large"),Object(rt.a)(Ot,"".concat(ut,"-sm"),Et==="small"),Ot)),it=p()((X={},Object(rt.a)(X,"".concat(ut,"-circle"),q==="circle"),Object(rt.a)(X,"".concat(ut,"-square"),q==="square"),Object(rt.a)(X,"".concat(ut,"-round"),q==="round"),X)),z=typeof Et=="number"?{width:Et,height:Et,lineHeight:"".concat(Et,"px")}:{};return e.createElement("span",{className:p()(ut,st,it,vt),style:Object(a.a)(Object(a.a)({},z),pt)})},s=n,h=_("bT9E"),M=function(Rt){var Ot=function(ut){var vt=ut.getPrefixCls,pt=Rt.prefixCls,Et=Rt.className,q=Rt.active,st=vt("skeleton",pt),it=Object(h.a)(Rt,["prefixCls"]),z=p()(st,"".concat(st,"-element"),Object(rt.a)({},"".concat(st,"-active"),q),Et);return e.createElement("div",{className:z},e.createElement(s,Object(a.a)({prefixCls:"".concat(st,"-avatar")},it)))};return e.createElement(y.a,null,Ot)};M.defaultProps={size:"default",shape:"circle"};var O=M,T=function(Rt){var Ot=function(ut){var vt=ut.getPrefixCls,pt=Rt.prefixCls,Et=Rt.className,q=Rt.active,st=vt("skeleton",pt),it=Object(h.a)(Rt,["prefixCls"]),z=p()(st,"".concat(st,"-element"),Object(rt.a)({},"".concat(st,"-active"),q),Et);return e.createElement("div",{className:z},e.createElement(s,Object(a.a)({prefixCls:"".concat(st,"-button")},it)))};return e.createElement(y.a,null,Ot)};T.defaultProps={size:"default"};var v=T,m=function(Rt){var Ot=function(ut){var vt=ut.getPrefixCls,pt=Rt.prefixCls,Et=Rt.className,q=Rt.active,st=vt("skeleton",pt),it=Object(h.a)(Rt,["prefixCls"]),z=p()(st,"".concat(st,"-element"),Object(rt.a)({},"".concat(st,"-active"),q),Et);return e.createElement("div",{className:z},e.createElement(s,Object(a.a)({prefixCls:"".concat(st,"-input")},it)))};return e.createElement(y.a,null,Ot)};m.defaultProps={size:"default"};var C=m,D="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",Y=function(Rt){var Ot=function(ut){var vt=ut.getPrefixCls,pt=Rt.prefixCls,Et=Rt.className,q=Rt.style,st=vt("skeleton",pt),it=p()(st,"".concat(st,"-element"),Et);return e.createElement("div",{className:it},e.createElement("div",{className:p()("".concat(st,"-image"),Et),style:q},e.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:"".concat(st,"-image-svg")},e.createElement("path",{d:D,className:"".concat(st,"-image-path")}))))};return e.createElement(y.a,null,Ot)},Z=Y;function et(Bt){return Bt&&Object(E.a)(Bt)==="object"?Bt:{}}function dt(Bt,Rt){return Bt&&!Rt?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function ht(Bt,Rt){return!Bt&&Rt?{width:"38%"}:Bt&&Rt?{width:"50%"}:{}}function St(Bt,Rt){var Ot={};return(!Bt||!Rt)&&(Ot.width="61%"),!Bt&&Rt?Ot.rows=3:Ot.rows=2,Ot}var wt=function(Rt){var Ot=function(ut){var vt=ut.getPrefixCls,pt=ut.direction,Et=Rt.prefixCls,q=Rt.loading,st=Rt.className,it=Rt.children,z=Rt.avatar,P=Rt.title,H=Rt.paragraph,k=Rt.active,d=Rt.round,g=vt("skeleton",Et);if(q||!("loading"in Rt)){var F,V=!!z,tt=!!P,ot=!!H,at;if(V){var At=Object(a.a)(Object(a.a)({prefixCls:"".concat(g,"-avatar")},dt(tt,ot)),et(z));at=e.createElement("div",{className:"".concat(g,"-header")},e.createElement(s,At))}var yt;if(tt||ot){var gt;if(tt){var bt=Object(a.a)(Object(a.a)({prefixCls:"".concat(g,"-title")},ht(V,ot)),et(P));gt=e.createElement(S,bt)}var Tt;if(ot){var Dt=Object(a.a)(Object(a.a)({prefixCls:"".concat(g,"-paragraph")},St(V,tt)),et(H));Tt=e.createElement(j,Dt)}yt=e.createElement("div",{className:"".concat(g,"-content")},gt,Tt)}var Ut=p()(g,(F={},Object(rt.a)(F,"".concat(g,"-with-avatar"),V),Object(rt.a)(F,"".concat(g,"-active"),k),Object(rt.a)(F,"".concat(g,"-rtl"),pt==="rtl"),Object(rt.a)(F,"".concat(g,"-round"),d),F),st);return e.createElement("div",{className:Ut},at,yt)}return it};return e.createElement(y.a,null,Ot)};wt.defaultProps={avatar:!1,title:!0,paragraph:!0},wt.Button=v,wt.Avatar=O,wt.Input=C,wt.Image=Z;var xt=wt,ft=Gt.a=xt},"027J":function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return n});var rt=_("mrSG"),a=_("zJSt"),E=_("lFe4"),e=_("w02o"),r=_("YuPD"),p=_("tKoa"),b=_("7cv3"),S=_("DyAw");function l(s){var h,M,O=s.chart,T=s.options,v=T.data,m=T.xAxis,C=T.yAxis,D=T.color,Y=T.columnStyle,Z=T.columnWidthRatio,et=Object(E.a)(v);O.data(et);var dt=Object(r.b)({},s,{options:{xField:b.b,yField:b.c,widthRatio:Z,interval:{style:Y,color:D}}});return Object(p.c)(dt),O.axis(!1),O.legend(!1),O.interaction("element-active"),Object(e.f)((h={},h[b.b]=m,h[b.c]=C,h),(M={},M[b.b]={type:"cat"},M[b.c]=Object(S.a)(et,b.c),M))(s),s}function A(s){return Object(r.e)(l,e.k,e.j,e.a,Object(e.b)())(s)}var j=_("iTfj"),y={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(h,M){return""+Object(j.get)(M,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}},n=function(s){Object(rt.b)(h,s);function h(){var M=s!==null&&s.apply(this,arguments)||this;return M.type="tiny-column",M}return h.prototype.changeData=function(M){this.updateOption({data:M}),this.chart.changeData(Object(E.a)(M))},h.prototype.getDefaultOptions=function(){return{appendPadding:2,tooltip:Object(rt.a)({},y),animation:!0}},h.prototype.getSchemaAdaptor=function(){return A},h}(a.a)},"05BJ":function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return j});var rt=_("mrSG"),a=_("zJSt"),E=_("7cv3"),e=_("lFe4"),r=_("w02o"),p=_("YuPD"),b=_("tKoa"),S=_("DyAw");function l(y){var n,s,h=y.chart,M=y.options,O=M.data,T=M.xAxis,v=M.yAxis,m=M.color,C=M.areaStyle,D=M.point,Y=M.line,Z=Object(e.a)(O);h.data(Z);var et=Object(p.b)({},y,{options:{xField:E.b,yField:E.c,area:{color:m,style:C},line:Y,point:D}}),dt=Object(p.b)({},et,{options:{tooltip:!1}});return Object(b.a)(et),Object(b.d)(dt),Object(b.e)(dt),h.axis(!1),h.legend(!1),Object(r.f)((n={},n[E.b]=T,n[E.c]=v,n),(s={},s[E.b]={type:"cat"},s[E.c]=Object(S.a)(Z,E.c),s))(y),y}function A(y){return Object(p.e)(l,r.k,r.j,r.a,Object(r.b)())(y)}var j=function(y){Object(rt.b)(n,y);function n(){var s=y!==null&&y.apply(this,arguments)||this;return s.type="tiny-area",s}return n.prototype.changeData=function(s){this.updateOption({data:s}),this.chart.changeData(Object(e.a)(s))},n.prototype.getDefaultOptions=function(){return{appendPadding:2,tooltip:Object(rt.a)({},E.a),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:!0}},n.prototype.getSchemaAdaptor=function(){return A},n}(a.a)},"06Lf":function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return ut}),_.d(Gt,"b",function(){return H}),_.d(Gt,"c",function(){return At}),_.d(Gt,"d",function(){return ye});var rt=_("q1tI"),a=_.n(rt),E=_("ma/q"),e=_("iTfj"),r=function(Yt,Se){var Wt={}.toString;return Wt.call(Yt)==="[object "+Se+"]"},p=function(Yt){if(!Yt)return Yt;var Se={};for(var Wt in Yt)Se[Wt]=Yt[Wt];return Se},b=function(Yt,Se){for(var Wt=Yt,ue=0;ue<Se.length;ue++)if(Wt==null?void 0:Wt[Se[ue]])Wt=Wt[Se[ue]];else{Wt=void 0;break}return Wt},S=function(Yt,Se,Wt){if(!Yt)return Yt;var ue=Yt;return Se.forEach(function(vn,Dn){Dn<Se.length-1?ue=ue[vn]:ue[vn]=Wt}),Yt},l=function(Yt,Se){!Yt||(Object(e.isFunction)(Yt)?Yt(Se):Yt.current=Se)},A={isType:r,clone:p,hasPath:b,setPath:S},j=_("i8i4"),y=_.n(j),n=function(Yt,Se){var Wt=document.createElement("div");return Se==="tooltip"&&(Wt.className="g2-tooltip"),y.a.render(Yt,Wt),Wt},s=n,h=function(){return h=Object.assign||function(zt){for(var Yt,Se=1,Wt=arguments.length;Se<Wt;Se++){Yt=arguments[Se];for(var ue in Yt)Object.prototype.hasOwnProperty.call(Yt,ue)&&(zt[ue]=Yt[ue])}return zt},h.apply(this,arguments)},M=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se};function O(zt,Yt){var Se=Object(rt.useRef)(),Wt=Object(rt.useRef)(),ue=Object(rt.useRef)(null),vn=Yt.onReady,Dn=Yt.onEvent,zn=function(mt,$t){var me;return mt===void 0&&(mt="image/png"),(me=Se.current)===null||me===void 0?void 0:me.chart.canvas.cfg.el.toDataURL(mt,$t)},_n=function(mt,$t,me){var Zt;mt===void 0&&(mt="download"),$t===void 0&&($t="image/png");var de=mt;mt.indexOf(".")===-1&&(de=mt+"."+$t.split("/")[1]);var he=(Zt=Se.current)===null||Zt===void 0?void 0:Zt.chart.canvas.cfg.el.toDataURL($t,me),ce=document.createElement("a");return ce.href=he,ce.download=de,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce),ce=null,de},Ze=function(mt,$t,me){var Zt=A.hasPath,de=A.setPath,he=Zt(mt,$t);de(mt,$t,function(){for(var ce=[],Me=0;Me<arguments.length;Me++)ce[Me]=arguments[Me];var ze=A.isType(he,"Function")?he.apply(void 0,ce):he;return A.isType(ze,"String")||A.isType(ze,"Number")||A.isType(ze,"HTMLDivElement")?ze:s(ze,me)})},Te=function(){var mt=A.hasPath;mt(Yt,["statistic","content","customHtml"])&&Ze(Yt,["statistic","content","customHtml"]),mt(Yt,["statistic","title","customHtml"])&&Ze(Yt,["statistic","title","customHtml"]),typeof Yt.tooltip=="object"&&(mt(Yt,["tooltip","container"])&&Ze(Yt,["tooltip","container"],"tooltip"),mt(Yt,["tooltip","customContent"])&&Ze(Yt,["tooltip","customContent"],"tooltip"))};return Object(rt.useEffect)(function(){if(Se.current&&!Object(e.isEqual)(Wt.current,Yt)){var N=!1;if(Wt.current){var mt=Wt.current,$t=mt.data,me=mt.value,Zt=mt.percent,de=M(mt,["data","value","percent"]),he=Yt.data,ce=Yt.value,Me=Yt.percent,ze=M(Yt,["data","value","percent"]);N=Object(e.isEqual)(de,ze)}if(N){var Ve="data",ke=["percent"],tn=Object.keys(Yt);ke.forEach(function(De){tn.includes(De)&&(Ve=De)}),Se.current.changeData((Yt==null?void 0:Yt[Ve])||[])}else Te(),Se.current.update(Yt);Wt.current=Yt}},[Yt]),Object(rt.useEffect)(function(){if(!ue.current)return function(){return null};Te();var N=new zt(ue.current,h({},Yt));N.__proto__.toDataURL=function($t,me){return zn($t,me)},N.__proto__.downloadImage=function($t,me,Zt){return _n($t,me,Zt)},N.render(),Wt.current||(Wt.current=Yt),Se.current=A.clone(N),vn&&vn(N);var mt=function(me){Dn&&Dn(N,me)};return N.on("*",mt),function(){Se.current&&(Se.current.destroy(),Se.current.off("*",mt),Se.current=void 0)}},[]),{chart:Se,container:ue}}var T=function(){var zt=function(Se,Wt){return zt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ue,vn){ue.__proto__=vn}||function(ue,vn){for(var Dn in vn)Object.prototype.hasOwnProperty.call(vn,Dn)&&(ue[Dn]=vn[Dn])},zt(Se,Wt)};return function(Yt,Se){zt(Yt,Se);function Wt(){this.constructor=Yt}Yt.prototype=Se===null?Object.create(Se):(Wt.prototype=Se.prototype,new Wt)}}(),v=function(zt){T(Yt,zt);function Yt(){var Se=zt!==null&&zt.apply(this,arguments)||this;return Se.state={hasError:!1},Se.renderError=function(Wt){var ue=Se.props.errorTemplate;switch(Wt){default:return ue&&typeof ue=="function"?ue(Wt):a.a.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",Wt.message)}},Se}return Yt.getDerivedStateFromError=function(Se){return{hasError:!0,error:Se}},Yt.getDerivedStateFromProps=function(Se,Wt){return Wt.children!==Se.children?{children:Se.children,hasError:!1,error:void 0}:null},Yt.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):a.a.createElement(rt.Fragment,null,this.props.children)},Yt}(a.a.Component),m=v;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var C=function(){return C=Object.assign||function(Se){for(var Wt,ue=1,vn=arguments.length;ue<vn;ue++){Wt=arguments[ue];for(var Dn in Wt)Object.prototype.hasOwnProperty.call(Wt,Dn)&&(Se[Dn]=Wt[Dn])}return Se},C.apply(this,arguments)};function D(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se}var Y=function(){return Math.random().toString(36).substring(6)},Z=function(Yt){var Se=Yt.animate,Wt=Yt.backgroundColor,ue=Yt.backgroundOpacity,vn=Yt.baseUrl,Dn=Yt.children,zn=Yt.foregroundColor,_n=Yt.foregroundOpacity,Ze=Yt.gradientRatio,Te=Yt.uniqueKey,N=Yt.interval,mt=Yt.rtl,$t=Yt.speed,me=Yt.style,Zt=Yt.title,de=D(Yt,["animate","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","interval","rtl","speed","style","title"]),he=Te||Y(),ce=he+"-diff",Me=he+"-animated-diff",ze=he+"-aria",Ve=mt?{transform:"scaleX(-1)"}:null,ke="0; "+N+"; 1",tn=$t+"s";return Object(rt.createElement)("svg",C({"aria-labelledby":ze,role:"img",style:C(C({},me),Ve)},de),Zt?Object(rt.createElement)("title",{id:ze},Zt):null,Object(rt.createElement)("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+vn+"#"+ce+")",style:{fill:"url("+vn+"#"+Me+")"}}),Object(rt.createElement)("defs",{role:"presentation"},Object(rt.createElement)("clipPath",{id:ce},Dn),Object(rt.createElement)("linearGradient",{id:Me},Object(rt.createElement)("stop",{offset:"0%",stopColor:Wt,stopOpacity:ue},Se&&Object(rt.createElement)("animate",{attributeName:"offset",values:-Ze+"; "+-Ze+"; 1",keyTimes:ke,dur:tn,repeatCount:"indefinite"})),Object(rt.createElement)("stop",{offset:"50%",stopColor:zn,stopOpacity:_n},Se&&Object(rt.createElement)("animate",{attributeName:"offset",values:-Ze/2+"; "+-Ze/2+"; "+(1+Ze/2),keyTimes:ke,dur:tn,repeatCount:"indefinite"})),Object(rt.createElement)("stop",{offset:"100%",stopColor:Wt,stopOpacity:ue},Se&&Object(rt.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+Ze),keyTimes:ke,dur:tn,repeatCount:"indefinite"})))))};Z.defaultProps={animate:!0,backgroundColor:"#f5f6f7",backgroundOpacity:1,baseUrl:"",foregroundColor:"#eee",foregroundOpacity:1,gradientRatio:2,id:null,interval:.25,rtl:!1,speed:1.2,style:{},title:"Loading..."};var et=function(Yt){return Yt.children?Object(rt.createElement)(Z,C({},Yt)):Object(rt.createElement)(dt,C({},Yt))},dt=function(Yt){return Object(rt.createElement)(et,C({viewBox:"0 0 476 124"},Yt),Object(rt.createElement)("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),Object(rt.createElement)("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),Object(rt.createElement)("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),Object(rt.createElement)("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),Object(rt.createElement)("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),Object(rt.createElement)("circle",{cx:"20",cy:"20",r:"20"}))},ht=function(Yt){return Object(rt.createElement)(et,C({viewBox:"0 0 400 460"},Yt),Object(rt.createElement)("circle",{cx:"31",cy:"31",r:"15"}),Object(rt.createElement)("rect",{x:"58",y:"18",rx:"2",ry:"2",width:"140",height:"10"}),Object(rt.createElement)("rect",{x:"58",y:"34",rx:"2",ry:"2",width:"140",height:"10"}),Object(rt.createElement)("rect",{x:"0",y:"60",rx:"2",ry:"2",width:"400",height:"400"}))},St=function(Yt){return Object(rt.createElement)(et,C({viewBox:"0 0 340 84"},Yt),Object(rt.createElement)("rect",{x:"0",y:"0",width:"67",height:"11",rx:"3"}),Object(rt.createElement)("rect",{x:"76",y:"0",width:"140",height:"11",rx:"3"}),Object(rt.createElement)("rect",{x:"127",y:"48",width:"53",height:"11",rx:"3"}),Object(rt.createElement)("rect",{x:"187",y:"48",width:"72",height:"11",rx:"3"}),Object(rt.createElement)("rect",{x:"18",y:"48",width:"100",height:"11",rx:"3"}),Object(rt.createElement)("rect",{x:"0",y:"71",width:"37",height:"11",rx:"3"}),Object(rt.createElement)("rect",{x:"18",y:"23",width:"140",height:"11",rx:"3"}),Object(rt.createElement)("rect",{x:"166",y:"23",width:"173",height:"11",rx:"3"}))},wt=function(Yt){return Object(rt.createElement)(et,C({viewBox:"0 0 400 110"},Yt),Object(rt.createElement)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"250",height:"10"}),Object(rt.createElement)("rect",{x:"20",y:"20",rx:"3",ry:"3",width:"220",height:"10"}),Object(rt.createElement)("rect",{x:"20",y:"40",rx:"3",ry:"3",width:"170",height:"10"}),Object(rt.createElement)("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"250",height:"10"}),Object(rt.createElement)("rect",{x:"20",y:"80",rx:"3",ry:"3",width:"200",height:"10"}),Object(rt.createElement)("rect",{x:"20",y:"100",rx:"3",ry:"3",width:"80",height:"10"}))},xt=function(Yt){return Object(rt.createElement)(et,C({viewBox:"0 0 245 125"},Yt),Object(rt.createElement)("circle",{cx:"10",cy:"20",r:"8"}),Object(rt.createElement)("rect",{x:"25",y:"15",rx:"5",ry:"5",width:"220",height:"10"}),Object(rt.createElement)("circle",{cx:"10",cy:"50",r:"8"}),Object(rt.createElement)("rect",{x:"25",y:"45",rx:"5",ry:"5",width:"220",height:"10"}),Object(rt.createElement)("circle",{cx:"10",cy:"80",r:"8"}),Object(rt.createElement)("rect",{x:"25",y:"75",rx:"5",ry:"5",width:"220",height:"10"}),Object(rt.createElement)("circle",{cx:"10",cy:"110",r:"8"}),Object(rt.createElement)("rect",{x:"25",y:"105",rx:"5",ry:"5",width:"220",height:"10"}))},ft=et,Bt=function(Yt){var Se=Yt.loadingTemplate,Wt=function(){return Se||a.a.createElement(ft,{viewBox:"0 0 400 180",width:200,height:90,speed:1},a.a.createElement("rect",{x:"20",y:"5",rx:"0",ry:"0",width:"1",height:"170"}),a.a.createElement("rect",{x:"20",y:"175",rx:"0",ry:"0",width:"360",height:"1"}),a.a.createElement("rect",{x:"40",y:"75",rx:"0",ry:"0",width:"35",height:"100"}),a.a.createElement("rect",{x:"80",y:"125",rx:"0",ry:"0",width:"35",height:"50"}),a.a.createElement("rect",{x:"120",y:"105",rx:"0",ry:"0",width:"35",height:"70"}),a.a.createElement("rect",{x:"160",y:"35",rx:"0",ry:"0",width:"35",height:"140"}),a.a.createElement("rect",{x:"200",y:"55",rx:"0",ry:"0",width:"35",height:"120"}),a.a.createElement("rect",{x:"240",y:"15",rx:"0",ry:"0",width:"35",height:"160"}),a.a.createElement("rect",{x:"280",y:"135",rx:"0",ry:"0",width:"35",height:"40"}),a.a.createElement("rect",{x:"320",y:"85",rx:"0",ry:"0",width:"35",height:"90"}))};return a.a.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:"#fff"}},Wt())},Rt=Bt,Ot=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},X=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=Ot(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.Area,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),ut=X,vt=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},pt=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=vt(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.Bar,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Et=pt,q=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},st=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=q(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.Bullet,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),it=st,z=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},P=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=z(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.Column,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),H=P,k=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},d=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=k(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.Funnel,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),g=d,F=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},V=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=F(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.Histogram,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),tt=V,ot=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},at=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=ot(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.Line,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),At=at,yt=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},gt=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=yt(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.Box,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),bt=gt,Tt=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},Dt=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=Tt(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.Liquid,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Ut=Dt,jt=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},Vt=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=jt(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.Heatmap,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Ht=Vt,re=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},pe=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=re(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.Pie,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),ye=pe,we=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},Re=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=we(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.Gauge,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),He=Re,pn=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},fn=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=pn(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.Progress,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Rn=fn,Cn=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},kn=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=Cn(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.Radar,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Mn=kn,Tn=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},Un=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=Tn(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.RingProgress,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Kn=Un,tr=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},or=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=tr(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.Rose,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),nr=or,er=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},Sr=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=er(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.Scatter,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Vr=Sr,ti=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},hi=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=ti(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.TinyArea,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Fi=hi,to=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},si=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=to(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.TinyColumn,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Ti=si,_i=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},Li=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=_i(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.DualAxes,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Vi=Li,ro=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},jr=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=ro(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.TinyLine,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Ji=jr,pr=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},Yr=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=pr(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.Waterfall,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Br=Yr,Nr=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},Xr=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=Nr(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.WordCloud,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Kr=Xr,ni=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},fi=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=ni(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.Sunburst,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),$r=fi,ci=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},Qr=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=ci(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.Stock,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),gi=Qr,Oi=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},bi=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=Oi(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.RadialBar,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),zi=bi,Qi=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},io=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=Qi(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.Sankey,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Wi=io,Zi=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},Pi=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=Zi(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.Treemap,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),no=Pi,Mo=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},ao=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=Mo(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.MultiView,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),uo=ao,xo=function(zt,Yt){var Se={};for(var Wt in zt)Object.prototype.hasOwnProperty.call(zt,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=zt[Wt]);if(zt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(zt);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(zt,Wt[ue])&&(Se[Wt[ue]]=zt[Wt[ue]]);return Se},oe=Object(rt.forwardRef)(function(zt,Yt){var Se=zt.chartRef,Wt=zt.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=zt.className,Dn=zt.loading,zn=zt.loadingTemplate,_n=zt.errorTemplate,Ze=xo(zt,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=O(E.BidirectionalBar,Ze),N=Te.chart,mt=Te.container;return Object(rt.useEffect)(function(){l(Se,N.current)},[N.current]),Object(rt.useImperativeHandle)(Yt,function(){return{getChart:function(){return N.current}}}),a.a.createElement(m,{errorTemplate:_n},Dn&&a.a.createElement(Rt,{loadingTemplate:zn}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Kt=oe,te=_("fD4D"),Oe=function(){return Oe=Object.assign||function(zt){for(var Yt,Se=1,Wt=arguments.length;Se<Wt;Se++){Yt=arguments[Se];for(var ue in Yt)Object.prototype.hasOwnProperty.call(Yt,ue)&&(zt[ue]=Yt[ue])}return zt},Oe.apply(this,arguments)};te.default.registerNode("card-node",{draw:function(Yt,Se){var Wt=Yt&&Yt.color?Yt.color:"#5B8FF9",ue=Yt&&Yt.size?Yt.size:[100,30];typeof ue=="number"&&(ue=[ue,ue]);var vn=Yt&&Yt.style?Yt.style:{};vn=Object.assign({radius:2,fill:"#fff"},vn),Wt=vn.stroke||"#5B8FF9";var Dn=vn.radius||0,zn=Se.addShape("rect",{attrs:Oe({x:-ue[0]/2,y:-ue[1]/2,width:ue[0],height:ue[1],stroke:Wt},vn),name:"main-box",draggable:!0}),_n=(Yt==null?void 0:Yt.title)||(Yt==null?void 0:Yt.label),Ze,Te=Yt&&Yt.labelCfg&&Yt.labelCfg.style?Yt.labelCfg.style:{};if(_n){var N=Object.assign({fill:"#fff"},Te);Ze=Se.addShape("text",{attrs:Oe(Oe({textBaseline:"top",x:-ue[0]/2+8,y:-ue[1]/2+2,text:_n},N),{fill:"#fff"}),name:"title"})}var mt=Ze?Ze.getBBox():{height:ue[1]/2},$t=Se.addShape("rect",{attrs:{x:-ue[0]/2,y:-ue[1]/2,width:ue[0],height:mt.height+4,fill:Wt,radius:[Dn,Dn,0,0]},name:"title-rect",draggable:!0});Ze&&Ze.toFront();var me;(Yt==null?void 0:Yt.children)&&(me=Se.addShape("marker",{attrs:{x:ue[0]/2,y:0,r:6,cursor:"pointer",symbol:Yt.collapsed?te.default.Marker.expand:te.default.Marker.collapse,stroke:Wt,lineWidth:1,fill:"#fff"},name:"collapse-icon"}));var Zt=Yt&&Yt.description?Yt.description:void 0,de=$t.getBBox(),he;if(Zt&&(he=Se.addShape("text",{attrs:Oe({textBaseline:"top",x:-ue[0]/2+8,y:-ue[1]/2+de.height+8,text:Zt},Te),name:"description"})),he){var ce=he.getBBox(),Me=de.height+16+ce.height,ze=ue[0]>ce.width+16?ue[0]:ce.width+16;zn.attr({width:ze,height:Me}),$t==null||$t.attr("width",ze),me==null||me.attr({x:ze-ue[0]/2,y:Me/2-ue[1]/2})}return zn},update:void 0},"single-node"),te.default.registerNode("round-rect",{drawShape:function(Yt,Se){var Wt=Yt&&Yt.color?Yt.color:"#5B8FF9",ue=Yt&&Yt.size?Yt.size:[100,30];typeof ue=="number"&&(ue=[ue,ue]);var vn=Yt&&Yt.style?Yt.style:{};vn.stroke&&(Wt=vn.stroke);var Dn=vn&&vn.fill?vn.fill:"#fff";vn=Object.assign({width:ue[0],height:ue[1],radius:ue[1]/2,fill:Dn,lineWidth:1.2,stroke:Wt},vn);var zn=Se.addShape("rect",{attrs:Oe({x:-ue[0]/2,y:-ue[1]/2},vn),name:"rect-shape"});return Se.addShape("circle",{attrs:{x:-ue[0]/2,y:0,r:3,fill:vn.stroke},name:"circle-shape"}),Se.addShape("circle",{attrs:{x:ue[0]/2,y:0,r:3,fill:vn.stroke},name:"circle-shape2"}),zn},getAnchorPoints:function(){return[[0,.5],[1,.5]]},update:function(Yt,Se){var Wt=Se.getContainer(),ue=Wt.get("children"),vn=ue[0],Dn=ue[1],zn=ue[2],_n=Yt.style&&Yt.style.stroke?Yt.style.stroke:"#5B8FF9";_n&&(vn.attr("stroke",_n),Dn.attr("fill",_n),zn.attr("fill",_n))}},"single-node");var Qe=function(Yt){te.default.registerNode("icon-node",{options:{size:[60,20],stroke:"#91d5ff",fill:"#91d5ff"},draw:function(Wt,ue){var vn=this.getShapeStyle(Wt),Dn=(Wt||{}).labelCfg,zn=Dn===void 0?{}:Dn,_n=ue.addShape("rect",{attrs:Oe(Oe({},vn),{x:0,y:0})}),Ze={fill:"#e6fffb"},Te="https://g.alicdn.com/cm-design/arms-trace/1.0.155/styles/armsTrace/images/TAIR.png";return(Wt==null?void 0:Wt.leftIcon)&&(Ze=Object.assign({},Ze,Wt.leftIcon.style),Te=Wt.leftIcon.img),ue.addShape("rect",{attrs:Oe({x:1,y:1,width:38,height:vn.height-2},Ze)}),ue.addShape("image",{attrs:{x:8,y:8,width:24,height:24,img:Te},name:"image-shape"}),Yt.enableEdit&&(ue.addShape("marker",{attrs:{x:vn.width/3,y:vn.height+6,r:6,stroke:"#73d13d",cursor:"pointer",symbol:te.default.Marker.expand},name:"add-item"}),ue.addShape("marker",{attrs:{x:vn.width*2/3,y:vn.height+6,r:6,stroke:"#ff4d4f",cursor:"pointer",symbol:te.default.Marker.collapse},name:"remove-item"})),(Wt==null?void 0:Wt.label)&&ue.addShape("text",{attrs:Oe(Oe({},zn.style),{text:Wt.label,x:vn.width/2,y:vn.height/1.5})}),_n}},"rect")};te.default.registerEdge("fund-polyline",{draw:function(Yt,Se){var Wt=Yt==null?void 0:Yt.startPoint,ue=Yt==null?void 0:Yt.endPoint,vn=ue.y-Wt.y,Dn=vn!==0?500/Math.abs(vn):0,zn=16,_n=vn<0?zn:-zn,Ze={x:Wt.x+Dn,y:ue.y+_n},Te={x:Ze.x+zn,y:ue.y},N={x:(Ze.x-Wt.x)*(ue.y-Wt.y)/(Ze.y-Wt.y)+Wt.x,y:ue.y},mt=[["M",Wt.x,Wt.y],["L",Ze.x,Ze.y],["Q",N.x,N.y,Te.x,Te.y],["L",ue.x,ue.y]];vn===0&&(mt=[["M",Wt.x,Wt.y],["L",ue.x,ue.y]]);var $t=(Yt||{}).style,me=Se.addShape("path",{attrs:{path:mt,stroke:$t.stroke||(Yt==null?void 0:Yt.colorMap)&&Yt.colorMap[Yt.dataType]?(Yt==null?void 0:Yt.colorMap)[Yt==null?void 0:Yt.dataType]:"#5B8FF9",lineWidth:$t.lineWidth||1.2,endArrow:!1},name:"path-shape"}),Zt=0,de=8,he;if((Yt==null?void 0:Yt.label)&&(he=Se.addShape("text",{attrs:{text:Yt.label,x:Te.x+Zt,y:ue.y-de-2,fontSize:14,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-label"})),Yt==null?void 0:Yt.dataType){var ce=he?he.getBBox():{height:0};Se.addShape("text",{attrs:{text:Yt.dataType,x:Te.x+Zt,y:ue.y-de-ce.height-2,fontSize:10,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-type"})}return(Yt==null?void 0:Yt.subLabel)&&Se.addShape("text",{attrs:{text:Yt.subLabel,x:Te.x+Zt,y:ue.y+de+4,fontSize:12,fontWeight:300,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-sub-label"}),me},update:void 0},"single-edge"),te.default.registerEdge("flow-line",{draw:function(Yt,Se){var Wt=Yt==null?void 0:Yt.startPoint,ue=Yt==null?void 0:Yt.endPoint,vn=(Yt||{}).style,Dn=vn===void 0?{}:vn,zn=Se.addShape("path",{attrs:{stroke:Dn.stroke,endArrow:Dn.endArrow,path:[["M",Wt.x,Wt.y],["L",Wt.x,(Wt.y+ue.y)/2],["L",ue.x,(Wt.y+ue.y)/2],["L",ue.x,ue.y]]}});return zn}});var On=function(){return On=Object.assign||function(zt){for(var Yt,Se=1,Wt=arguments.length;Se<Wt;Se++){Yt=arguments[Se];for(var ue in Yt)Object.prototype.hasOwnProperty.call(Yt,ue)&&(zt[ue]=Yt[ue])}return zt},On.apply(this,arguments)},Vn={show:!1,size:[150,100],type:"keyShape"},Xn=function(Yt,Se,Wt){var ue,vn;return Wt&&Wt.current&&(ue=Wt.current.offsetWidth,vn=Wt.current.offsetHeight||500),!Yt&&!ue||!Se&&!vn?(console.warn("\u8BF7\u4E3A Graph \u6307\u5B9A width \u4E0E height\uFF01\u5426\u5219\u5C06\u4F7F\u7528\u9ED8\u8BA4\u503C 500 * 500"),[500,500]):[Yt||ue||500,Se||vn||500]},$e=function(Yt,Se){if(!(!Se||Se.destroyed)&&Yt&&Yt.show){var Wt=Object.assign(Vn,Yt),ue=new te.default.Minimap(On({},Wt));return Se.addPlugin(ue),ue}};function rn(zt,Yt,Se){var Wt=Object(rt.useRef)(),ue=Yt.data,vn=Yt.nodeStyle,Dn=Yt.nodeAnchorPoints,zn=Yt.nodeType,_n=Yt.edgeType,Ze=Yt.edgeStyle,Te=Yt.width,N=Yt.height,mt=Yt.layout,$t=Yt.minimapCfg,me=Yt.behaviors,Zt=Yt.nodeLabelCfg,de=Yt.edgeLabelCfg,he;return Object(rt.useEffect)(function(){zt&&!zt.destroyed&&(zt.changeData(ue),zt.layout())},[ue]),Object(rt.useEffect)(function(){zt&&!zt.destroyed&&zt.getNodes().forEach(function(ce){zt.updateItem(ce,{type:zn,style:vn,anchorPoints:Dn,labelCfg:Zt})})},[vn,Dn,zn]),Object(rt.useEffect)(function(){zt&&!zt.destroyed&&zt.getEdges().forEach(function(ce){zt.updateItem(ce,{type:_n,style:Ze,labelCfg:de})})},[Ze,_n]),Object(rt.useEffect)(function(){if(zt&&!zt.destroyed){var ce=Xn(Te,N,Se);zt.changeSize(ce[0],ce[1])}},[Se,Te,N]),Object(rt.useEffect)(function(){zt&&!zt.destroyed&&zt.updateLayout(mt)},[mt]),Object(rt.useEffect)(function(){if(!(!$t||!zt||zt.destroyed))if($t.show)he=$e($t,zt),he&&he.updateCanvas();else{var ce=zt.get("plugins")[0];ce&&zt.removePlugin(ce)}},[$t]),Object(rt.useEffect)(function(){if(zt&&!zt.destroyed){var ce=zt.get("modes").default,Me=[];ce.forEach(function(ze){Object(e.isObject)(ze)?Me.push(ze.type):Object(e.isString)(ze)&&Me.push(ze)}),zt.removeBehaviors(Me,"default"),zt.addBehaviors(me,"default")}},[me]),Object(rt.useEffect)(function(){if(Wt.current=zt,zt&&!zt.destroyed)return function(){zt.destroy(),zt=void 0}},[]),{graphHook:Wt}}var on={hover:{stroke:"#1890ff",lineWidth:2}},$n={fill:"#91d5ff",stroke:"#40a9ff",radius:5},vr={stroke:"#91d5ff",endArrow:{path:"M 0,0 L 12, 6 L 9,0 L 12, -6 Z",fill:"#91d5ff",d:-20}},ar={type:"compactBox",direction:"TB",getId:function(Yt){return Yt.id},getHeight:function(){return 16},getWidth:function(){return 16},getVGap:function(){return 40},getHGap:function(){return 70}},rr={style:{fill:"#000",fontSize:12}},Fr=function(Yt){var Se=Yt.data,Wt=Yt.className,ue=Yt.style,vn=Yt.width,Dn=Yt.height,zn=Yt.nodeType,_n=zn===void 0?"rect":zn,Ze=Yt.edgeType,Te=Ze===void 0?"flow-line":Ze,N=Yt.collapseExpand,mt=N===void 0?!1:N,$t=Yt.nodeSize,me=$t===void 0?[120,40]:$t,Zt=Yt.nodeLabelCfg,de=Zt===void 0?rr:Zt,he=Yt.edgeLabelCfg,ce=he===void 0?rr:he,Me=Yt.layout,ze=Me===void 0?ar:Me,Ve=Yt.enableEdit,ke=Ve===void 0?!1:Ve,tn=Yt.minimapCfg,De=Yt.nodeStyle,cn=De===void 0?$n:De,hn=Yt.edgeStyle,nn=hn===void 0?vr:hn,dn=Yt.nodeStateStyles,Sn=dn===void 0?on:dn,Pe=Yt.edgeStateStyles,le=Pe===void 0?on:Pe,Le=Yt.handleNodeClick,Be=Yt.handleEdgeClick,en=Yt.handleNodeHover,sn=Yt.handleNodeUnHover,Ue=Yt.handleEdgeHover,ln=Yt.handleEdgeUnHover,mn=Yt.handleCanvasClick,Wn=Yt.graphRef,An,In={data:Se,className:Wt,style:ue,width:vn,height:Dn,nodeType:_n,edgeType:Te,collapseExpand:mt,nodeSize:me,nodeLabelCfg:de,edgeLabelCfg:ce,layout:ze,enableEdit:ke,minimapCfg:tn,nodeStyle:cn,edgeStyle:nn,nodeStateStyles:Sn,edgeStateStyles:le,handleNodeClick:Le,handleEdgeClick:Be,handleNodeHover:en,handleNodeUnHover:sn,handleEdgeHover:Ue,handleEdgeUnHover:ln,handleCanvasClick:mn,graphRef:Wn},lr=a.a.useRef(null);return rn(An,In,lr),Object(rt.useEffect)(function(){var Hr=Xn(vn,Dn,lr);return(!An||An.destroyed)&&(_n==="icon-node"&&Qe({enableEdit:ke}),An=new te.default.TreeGraph({container:lr.current,width:Hr[0],height:Hr[1],linkCenter:!0,modes:{default:["drag-canvas","zoom-canvas"]},defaultNode:{type:_n,size:me,style:cn,labelCfg:de},defaultEdge:{type:Te,style:nn,labelCfg:ce},nodeStateStyles:Sn,edgeStateStyles:le,layout:ze}),Wn&&(Wn.current=An)),$e(tn,An),An.data(Se),An.render(),An.fitView(),mt&&An.addBehaviors({type:"collapse-expand"},"default"),An.on("node:mouseenter",function(Gr){var Mr=Gr.item;An.setItemState(Mr,"hover",!0),en&&en(Mr,An)}),An.on("node:mouseleave",function(Gr){var Mr=Gr.item;An.setItemState(Mr,"hover",!1),sn&&sn(Mr,An)}),An.on("node:click",function(Gr){var Mr=Gr.item,oi=Gr.target,ai=oi.get("type"),Zr=oi.get("name");if(ai==="marker"){var Xi=Mr.getModel();if(Zr==="add-item"){Xi.children||(Xi.children=[]);var $i=Math.random().toString(36).slice(-8);Xi.children.push({id:$i,label:$i}),An.updateChild(Xi,Xi.id)}else Zr==="remove-item"&&An.removeChild(Xi.id)}Le&&Le(Mr,An)}),An.on("edge:mouseenter",function(Gr){var Mr=Gr.item;An.setItemState(Mr,"hover",!0),Ue&&Ue(Mr,An)}),An.on("edge:mouseleave",function(Gr){var Mr=Gr.item;An.setItemState(Mr,"hover",!1),ln&&ln(Mr,An)}),An.on("edge:click",function(Gr){var Mr=Gr.item;Be&&Be(Mr,An)}),An.on("canvas:click",function(Gr){mn&&mn(An)}),function(){return An.destroy()}},[]),a.a.createElement(m,null,a.a.createElement("div",{className:Wt,style:ue,ref:lr}))},Ar=Fr,wr={hover:{stroke:"#1890ff",lineWidth:2}},xr=[120,40],Er={stroke:"#40a9ff"},Ir=[[.5,0],[.5,1]],Lr={stroke:"#91d5ff",endArrow:{path:te.default.Arrow.vee(10,10),fill:"#91d5ff"}},Pr={type:"dagre",rankdir:"TB",nodesepFunc:function(Yt){return 0},ranksepFunc:function(Yt){return 0},controlPoints:!0},Dr={style:{fill:"#000",fontSize:12}},ri=function(Yt){var Se=Yt.data,Wt=Yt.className,ue=Yt.style,vn=Yt.width,Dn=Yt.height,zn=Yt.nodeType,_n=zn===void 0?"modelRect":zn,Ze=Yt.edgeType,Te=Ze===void 0?"polyline":Ze,N=Yt.behaviors,mt=N===void 0?["zoom-canvas","drag-canvas"]:N,$t=Yt.nodeSize,me=$t===void 0?xr:$t,Zt=Yt.nodeLabelCfg,de=Zt===void 0?Dr:Zt,he=Yt.edgeLabelCfg,ce=he===void 0?Dr:he,Me=Yt.nodeAnchorPoints,ze=Me===void 0?Ir:Me,Ve=Yt.layout,ke=Ve===void 0?Pr:Ve,tn=Yt.minimapCfg,De=Yt.nodeStyle,cn=De===void 0?Er:De,hn=Yt.edgeStyle,nn=hn===void 0?Lr:hn,dn=Yt.nodeStateStyles,Sn=dn===void 0?wr:dn,Pe=Yt.edgeStateStyles,le=Pe===void 0?wr:Pe,Le=Yt.handleEdgeClick,Be=Yt.handleEdgeHover,en=Yt.handleEdgeUnHover,sn=Yt.handleNodeClick,Ue=Yt.handleNodeHover,ln=Yt.handleNodeUnHover,mn=Yt.handleCanvasClick,Wn=Yt.graphRef,An,In={data:Se,className:Wt,style:ue,width:vn,height:Dn,nodeType:_n,edgeType:Te,behaviors:mt,nodeSize:me,nodeLabelCfg:de,edgeLabelCfg:ce,nodeAnchorPoints:ze,layout:ke,minimapCfg:tn,nodeStyle:cn,edgeStyle:nn,nodeStateStyles:Sn,edgeStateStyles:le,handleEdgeClick:Le,handleEdgeHover:Be,handleEdgeUnHover:en,handleNodeClick:sn,handleNodeHover:Ue,handleNodeUnHover:ln,handleCanvasClick:mn,graphRef:Wn},lr=a.a.useRef(null);return rn(An,In,lr),Object(rt.useEffect)(function(){var Hr=Xn(vn,Dn,lr);return(!An||An.destroyed)&&(An=new te.default.Graph({container:lr.current,width:Hr[0],height:Hr[1],modes:{default:mt},defaultNode:{type:_n,size:me,style:cn,anchorPoints:ze,labelCfg:de},defaultEdge:{type:Te,style:nn,labelCfg:ce},nodeStateStyles:Sn,edgeStateStyles:le,layout:ke}),Wn&&(Wn.current=An)),$e(tn,An),An.data(Se),An.render(),An.fitView(),An.on("edge:mouseenter",function(Gr){var Mr=Gr.item;An.setItemState(Mr,"hover",!0),Be&&Be(Mr,An)}),An.on("node:mouseenter",function(Gr){var Mr=Gr.item;An.setItemState(Mr,"hover",!1),Ue&&Ue(Mr,An)}),An.on("edge:mouseleave",function(Gr){var Mr=Gr.item;An.setItemState(Mr,"hover",!1),en&&en(Mr,An)}),An.on("node:mouseleave",function(Gr){var Mr=Gr.item;An.setItemState(Mr,"hover",!1),ln&&ln(Mr,An)}),An.on("edge:click",function(Gr){var Mr=Gr.item;Le&&Le(Mr,An)}),An.on("node:click",function(Gr){var Mr=Gr.item;sn&&sn(Mr,An)}),An.on("canvas:click",function(Gr){mn&&mn(An)}),function(){return An.destroy()}},[]),a.a.createElement(m,null,a.a.createElement("div",{className:Wt,style:ue,ref:lr}))},vi=ri,ii={hover:{stroke:"#1890ff",lineWidth:2}},Si=[150,30],Ui={stroke:"#72CC4A",fill:"#f00"},Yi=[[.5,0],[.5,1]],Bi={stroke:"#91d5ff",endArrow:{path:te.default.Arrow.vee(10,10),fill:"#91d5ff"}},Di={type:"dagre",rankdir:"LR",nodesep:30,ranksep:50},ve={style:{fill:"#000000A6",fontSize:10}},G=function(Yt){var Se=Yt.data,Wt=Yt.className,ue=Yt.style,vn=Yt.width,Dn=Yt.height,zn=Yt.nodeType,_n=zn===void 0?"round-rect":zn,Ze=Yt.edgeType,Te=Ze===void 0?"fund-polyline":Ze,N=Yt.behaviors,mt=N===void 0?["zoom-canvas","drag-canvas"]:N,$t=Yt.nodeSize,me=$t===void 0?Si:$t,Zt=Yt.nodeLabelCfg,de=Zt===void 0?ve:Zt,he=Yt.edgeLabelCfg,ce=he===void 0?ve:he,Me=Yt.nodeAnchorPoints,ze=Me===void 0?Yi:Me,Ve=Yt.layout,ke=Ve===void 0?Di:Ve,tn=Yt.minimapCfg,De=Yt.nodeStyle,cn=De===void 0?Ui:De,hn=Yt.edgeStyle,nn=hn===void 0?Bi:hn,dn=Yt.nodeStateStyles,Sn=dn===void 0?ii:dn,Pe=Yt.edgeStateStyles,le=Pe===void 0?ii:Pe,Le=Yt.colorMap,Be=Le===void 0?{}:Le,en=Yt.handleEdgeClick,sn=Yt.handleEdgeHover,Ue=Yt.handleEdgeUnHover,ln=Yt.handleNodeClick,mn=Yt.handleNodeHover,Wn=Yt.handleNodeUnHover,An=Yt.handleCanvasClick,In=Yt.graphRef,lr,Hr=a.a.useRef(null),Gr={data:Se,className:Wt,style:ue,width:vn,height:Dn,nodeType:_n,edgeType:Te,behaviors:mt,nodeSize:me,nodeLabelCfg:de,edgeLabelCfg:ce,nodeAnchorPoints:ze,layout:ke,minimapCfg:tn,nodeStyle:cn,edgeStyle:nn,nodeStateStyles:Sn,edgeStateStyles:le,colorMap:Be,handleEdgeClick:en,handleEdgeHover:sn,handleEdgeUnHover:Ue,handleNodeClick:ln,handleNodeHover:mn,handleNodeUnHover:Wn,handleCanvasClick:An,graphRef:In};return rn(lr,Gr,Hr),Object(rt.useEffect)(function(){var Mr=Xn(vn,Dn,Hr);(!lr||lr.destroyed)&&(lr=new te.default.Graph({container:Hr.current,width:Mr[0],height:Mr[1],modes:{default:mt},defaultNode:{type:_n,size:me,style:cn,anchorPoints:ze,labelCfg:de},defaultEdge:{type:Te,style:nn,colorMap:Be,labelCfg:ce},nodeStateStyles:Sn,edgeStateStyles:le,layout:ke}),In&&(In.current=lr)),$e(tn,lr),lr.data(Se),lr.render();var oi=lr.getEdges();return oi.forEach(function(ai){var Zr=ai.getKeyShape(),Xi=Zr.attr("stroke"),$i=ai.getTarget();$i.update({style:{stroke:Xi}})}),lr.fitView(),lr.on("edge:mouseenter",function(ai){var Zr=ai.item;lr.setItemState(Zr,"hover",!0),sn&&sn(Zr,lr)}),lr.on("edge:mouseleave",function(ai){var Zr=ai.item;lr.setItemState(Zr,"hover",!1),Ue&&Ue(Zr,lr)}),lr.on("edge:click",function(ai){var Zr=ai.item;en&&en(Zr,lr)}),lr.on("node:mouseenter",function(ai){var Zr=ai.item;lr.setItemState(Zr,"hover",!1),mn&&mn(Zr,lr)}),lr.on("node:mouseleave",function(ai){var Zr=ai.item;lr.setItemState(Zr,"hover",!1),Wn&&Wn(Zr,lr)}),lr.on("node:click",function(ai){var Zr=ai.item;ln&&ln(Zr,lr)}),lr.on("canvas:click",function(ai){An&&An(lr)}),function(){return lr.destroy()}},[]),a.a.createElement(m,null,a.a.createElement("div",{className:Wt,style:ue,ref:Hr}))},B=G,$={hover:{stroke:"#1890ff",lineWidth:2}},lt=[120,40],Ft={stroke:"#40a9ff"},Jt=[[0,.5],[1,.5]],ie={stroke:"#ccc",endArrow:{path:te.default.Arrow.vee(10,10),fill:"#ccc"}},se={type:"indented",direction:"LR",dropCap:!1,indent:250,getHeight:function(){return 60},getWidth:function(Yt){return 100}},Ce={style:{fill:"#000",fontSize:12}},Ee=function(Yt){var Se=Yt.data,Wt=Yt.className,ue=Yt.style,vn=Yt.width,Dn=Yt.height,zn=Yt.nodeType,_n=zn===void 0?"card-node":zn,Ze=Yt.edgeType,Te=Ze===void 0?"cubic-horizontal":Ze,N=Yt.behaviors,mt=N===void 0?["zoom-canvas","drag-canvas"]:N,$t=Yt.nodeSize,me=$t===void 0?lt:$t,Zt=Yt.nodeLabelCfg,de=Zt===void 0?Ce:Zt,he=Yt.nodeAnchorPoints,ce=he===void 0?Jt:he,Me=Yt.layout,ze=Me===void 0?se:Me,Ve=Yt.minimapCfg,ke=Yt.nodeStyle,tn=ke===void 0?Ft:ke,De=Yt.edgeStyle,cn=De===void 0?ie:De,hn=Yt.nodeStateStyles,nn=hn===void 0?$:hn,dn=Yt.edgeStateStyles,Sn=dn===void 0?$:dn,Pe=Yt.collapseExpand,le=Pe===void 0?!0:Pe,Le=Yt.handleEdgeClick,Be=Yt.handleEdgeHover,en=Yt.handleEdgeUnHover,sn=Yt.handleNodeClick,Ue=Yt.handleNodeHover,ln=Yt.handleNodeUnHover,mn=Yt.handleCanvasClick,Wn=Yt.graphRef,An,In=a.a.useRef(null),lr={data:Se,className:Wt,style:ue,width:vn,height:Dn,nodeType:_n,edgeType:Te,behaviors:mt,nodeSize:me,nodeLabelCfg:de,nodeAnchorPoints:ce,layout:ze,minimapCfg:Ve,nodeStyle:tn,edgeStyle:cn,nodeStateStyles:nn,edgeStateStyles:Sn,collapseExpand:le,handleEdgeClick:Le,handleEdgeHover:Be,handleEdgeUnHover:en,handleNodeClick:sn,handleNodeHover:Ue,handleNodeUnHover:ln,handleCanvasClick:mn,graphRef:Wn};return rn(An,lr,In),Object(rt.useEffect)(function(){var Hr=Xn(vn,Dn,In);if((!An||An.destroyed)&&(An=new te.default.TreeGraph({container:In.current,width:Hr[0],height:Hr[1],modes:{default:mt},defaultNode:{type:_n,size:me,style:tn,anchorPoints:ce,labelCfg:de},defaultEdge:{type:Te,style:cn},nodeStateStyles:nn,edgeStateStyles:Sn,layout:ze}),Wn&&(Wn.current=An)),$e(Ve,An),An.data(Se),An.render(),An.fitView(),le){var Gr=function(oi){var ai=oi.item;oi.target.get("name")==="collapse-icon"?(An.updateItem(ai,{collapsed:!ai.getModel().collapsed}),An.layout()):sn&&sn(ai,An)};An.on("node:click",function(Mr){Gr(Mr)}),An.on("node:touchstart",function(Mr){Gr(Mr)})}return An.on("edge:mouseenter",function(Mr){var oi=Mr.item;An.setItemState(oi,"hover",!0),Be&&Be(oi,An)}),An.on("edge:mouseleave",function(Mr){var oi=Mr.item;An.setItemState(oi,"hover",!1),en&&en(oi,An)}),An.on("edge:click",function(Mr){var oi=Mr.item;Le&&Le(oi,An)}),An.on("edge:touchstart",function(Mr){var oi=Mr.item;Le&&Le(oi,An)}),An.on("node:mouseenter",function(Mr){var oi=Mr.item;An.setItemState(oi,"hover",!1),Ue&&Ue(oi,An)}),An.on("node:mouseleave",function(Mr){var oi=Mr.item;An.setItemState(oi,"hover",!1),ln&&ln(oi,An)}),An.on("canvas:click",function(Mr){mn&&mn(An)}),An.on("canvas:touchstart",function(Mr){mn&&mn(An)}),function(){return An.destroy()}},[]),a.a.createElement(m,null,a.a.createElement("div",{className:Wt,style:ue,ref:In}))},un=Ee,xn={Area:ut,Bar:Et,Box:bt,Bullet:it,Column:H,Funnel:g,Histogram:tt,Line:At,Liquid:Ut,Heatmap:Ht,Pie:ye,Progress:Rn,Radar:Mn,RingProgress:Kn,Rose:nr,Scatter:Vr,TinyArea:Fi,TinyColumn:Ti,TinyLine:Ji,Waterfall:Br,WordCloud:Kr,Sunburst:$r,DualAxes:Vi,Stock:gi,RadialBar:zi,Gauge:He,Sankey:Wi,Treemap:no,MultiView:uo,BidirectionalBar:Kt,OrganizationTreeGraph:Ar,DagreGraph:vi,IndentedTree:un,DagreFundFlowGraph:B,G2:E.G2}},"0JQy":function(Fn,Gt){var _="\\ud800-\\udfff",rt="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",E="\\u20d0-\\u20ff",e=rt+a+E,r="\\ufe0e\\ufe0f",p="["+_+"]",b="["+e+"]",S="\\ud83c[\\udffb-\\udfff]",l="(?:"+b+"|"+S+")",A="[^"+_+"]",j="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",n="\\u200d",s=l+"?",h="["+r+"]?",M="(?:"+n+"(?:"+[A,j,y].join("|")+")"+h+s+")*",O=h+s+M,T="(?:"+[A+b+"?",b,j,y,p].join("|")+")",v=RegExp(S+"(?="+S+")|"+T+O,"g");function m(C){return C.match(v)||[]}Fn.exports=m},"0NbB":function(Fn,Gt,_){"use strict";var rt=_("q1tI"),a={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"outlined"},E=a,e=_("6VBw"),r=function(S,l){return rt.createElement(e.a,Object.assign({},S,{ref:l,icon:E}))};r.displayName="CaretDownOutlined";var p=Gt.a=rt.forwardRef(r)},"0Xep":function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return rt}),_.d(Gt,"d",function(){return a}),_.d(Gt,"b",function(){return E}),_.d(Gt,"c",function(){return e});var rt=0,a=1/2,E=1/2,e=.05},"1//c":function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return a});var rt=_("aFU3");function a(E,e,r){var p=new rt.Event(e,r);p.target=E,p.propagationPath.push(E),E.emitDelegation(e,p);for(var b=E.getParent();b;)b.emitDelegation(e,p),p.propagationPath.push(b),b=b.getParent()}},"14J3":function(Fn,Gt,_){"use strict";var rt=_("cIOH"),a=_.n(rt),E=_("1GLa")},"17Tr":function(Fn,Gt,_){"use strict";var rt=_("uCX8");_.d(Gt,"Annotation",function(){return rt});var a=_("fP0w");_.d(Gt,"Axis",function(){return a});var E=_("/3+T");_.d(Gt,"Crosshair",function(){return E});var e=_("x3EW");_.d(Gt,"Grid",function(){return e});var r=_("5bFI");_.d(Gt,"Legend",function(){return r});var p=_("Ch+T");_.d(Gt,"Tooltip",function(){return p});var b=_("NmWf"),S=_("MeYt"),l=_("de35"),A=_("fFDA");_.d(Gt,"Slider",function(){return A.a});var j=_("3u8d");_.d(Gt,"Scrollbar",function(){return j.a});var y=_("vk7d"),n=_.n(y),s=_("uzHj"),h=_.n(s),M=_("1//c");_.d(Gt,"propagationDelegate",function(){return M.a});var O=_("u60a");_.d(Gt,"TOOLTIP_CSS_CONST",function(){return O})},"1GLa":function(Fn,Gt,_){"use strict";var rt=_("cIOH"),a=_.n(rt),E=_("FIfw"),e=_.n(E)},"1MZV":function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return E});var rt=new Map;function a(m,C){rt.set(m,C)}function E(m){return rt.get(m)}var e=function(m){var C=m.attr(),D=C.x,Y=C.y,Z=C.width,et=C.height;return{x:D,y:Y,width:Z,height:et}},r=function(m){var C=m.attr(),D=C.x,Y=C.y,Z=C.r;return{x:D-Z,y:Y-Z,width:Z*2,height:Z*2}},p=_("EYNi");function b(m,C){return!m||!C?m||C:{minX:Math.min(m.minX,C.minX),minY:Math.min(m.minY,C.minY),maxX:Math.max(m.maxX,C.maxX),maxY:Math.max(m.maxY,C.maxY)}}function S(m,C){var D=m.get("startArrowShape"),Y=m.get("endArrowShape"),Z=null,et=null;return D&&(Z=D.getCanvasBBox(),C=b(C,Z)),Y&&(et=Y.getCanvasBBox(),C=b(C,et)),C}var l=function(m){for(var C=m.attr(),D=C.points,Y=[],Z=[],et=0;et<D.length;et++){var dt=D[et];Y.push(dt[0]),Z.push(dt[1])}var ht=p.f.getBBoxByArray(Y,Z),St=ht.x,wt=ht.y,xt=ht.width,ft=ht.height,Bt={minX:St,minY:wt,maxX:St+xt,maxY:wt+ft};return Bt=S(m,Bt),{x:Bt.minX,y:Bt.minY,width:Bt.maxX-Bt.minX,height:Bt.maxY-Bt.minY}},A=function(m){for(var C=m.attr(),D=C.points,Y=[],Z=[],et=0;et<D.length;et++){var dt=D[et];Y.push(dt[0]),Z.push(dt[1])}return p.f.getBBoxByArray(Y,Z)},j=_("vIgC"),y=function(m){var C=m.attr(),D=C.x,Y=C.y,Z=C.text,et=C.fontSize,dt=C.lineHeight,ht=C.font;ht||(ht=Object(j.a)(C));var St=Object(j.c)(Z,ht),wt;if(!St)wt={x:D,y:Y,width:0,height:0};else{var xt=C.textAlign,ft=C.textBaseline,Bt=Object(j.b)(Z,et,dt),Rt={x:D,y:Y-Bt};xt&&(xt==="end"||xt==="right"?Rt.x-=St:xt==="center"&&(Rt.x-=St/2)),ft&&(ft==="top"?Rt.y+=Bt:ft==="middle"&&(Rt.y+=Bt/2)),wt={x:Rt.x,y:Rt.y,width:St,height:Bt}}return wt},n=_("LvGN"),s=_("iTfj");function h(m,C){for(var D=[],Y=[],Z=[],et=0;et<m.length;et++){var dt=m[et],ht=dt.currentPoint,St=dt.params,wt=dt.prePoint,xt=void 0;switch(dt.command){case"Q":xt=p.e.box(wt[0],wt[1],St[1],St[2],St[3],St[4]);break;case"C":xt=p.b.box(wt[0],wt[1],St[1],St[2],St[3],St[4],St[5],St[6]);break;case"A":var ft=dt.arcParams;xt=p.a.box(ft.cx,ft.cy,ft.rx,ft.ry,ft.xRotation,ft.startAngle,ft.endAngle);break;default:D.push(ht[0]),Y.push(ht[1]);break}xt&&(dt.box=xt,D.push(xt.x,xt.x+xt.width),Y.push(xt.y,xt.y+xt.height)),C&&(dt.command==="L"||dt.command==="M")&&dt.prePoint&&dt.nextPoint&&Z.push(dt)}D=D.filter(function(vt){return!Number.isNaN(vt)}),Y=Y.filter(function(vt){return!Number.isNaN(vt)});var Bt=Math.min.apply(null,D),Rt=Math.min.apply(null,Y),Ot=Math.max.apply(null,D),X=Math.max.apply(null,Y);if(Z.length===0)return{x:Bt,y:Rt,width:Ot-Bt,height:X-Rt};for(var et=0;et<Z.length;et++){var dt=Z[et],ht=dt.currentPoint,ut=void 0;ht[0]===Bt?(ut=M(dt,C),Bt=Bt-ut.xExtra):ht[0]===Ot&&(ut=M(dt,C),Ot=Ot+ut.xExtra),ht[1]===Rt?(ut=M(dt,C),Rt=Rt-ut.yExtra):ht[1]===X&&(ut=M(dt,C),X=X+ut.yExtra)}return{x:Bt,y:Rt,width:Ot-Bt,height:X-Rt}}function M(m,C){var D=m.prePoint,Y=m.currentPoint,Z=m.nextPoint,et=Math.pow(Y[0]-D[0],2)+Math.pow(Y[1]-D[1],2),dt=Math.pow(Y[0]-Z[0],2)+Math.pow(Y[1]-Z[1],2),ht=Math.pow(D[0]-Z[0],2)+Math.pow(D[1]-Z[1],2),St=Math.acos((et+dt-ht)/(2*Math.sqrt(et)*Math.sqrt(dt)));if(!St||Math.sin(St)===0||Object(s.isNumberEqual)(St,0))return{xExtra:0,yExtra:0};var wt=Math.abs(Math.atan2(Z[1]-Y[1],Z[0]-Y[0])),xt=Math.abs(Math.atan2(Z[0]-Y[0],Z[1]-Y[1]));wt=wt>Math.PI/2?Math.PI-wt:wt,xt=xt>Math.PI/2?Math.PI-xt:xt;var ft={xExtra:Math.cos(St/2-wt)*(C/2*(1/Math.sin(St/2)))-C/2||0,yExtra:Math.cos(xt-St/2)*(C/2*(1/Math.sin(St/2)))-C/2||0};return ft}var O=function(m){var C=m.attr(),D=C.path,Y=C.stroke,Z=Y?C.lineWidth:0,et=m.get("segments")||Object(n.e)(D),dt=h(et,Z),ht=dt.x,St=dt.y,wt=dt.width,xt=dt.height,ft={minX:ht,minY:St,maxX:ht+wt,maxY:St+xt};return ft=S(m,ft),{x:ft.minX,y:ft.minY,width:ft.maxX-ft.minX,height:ft.maxY-ft.minY}},T=function(m){var C=m.attr(),D=C.x1,Y=C.y1,Z=C.x2,et=C.y2,dt=Math.min(D,Z),ht=Math.max(D,Z),St=Math.min(Y,et),wt=Math.max(Y,et),xt={minX:dt,maxX:ht,minY:St,maxY:wt};return xt=S(m,xt),{x:xt.minX,y:xt.minY,width:xt.maxX-xt.minX,height:xt.maxY-xt.minY}},v=function(m){var C=m.attr(),D=C.x,Y=C.y,Z=C.rx,et=C.ry;return{x:D-Z,y:Y-et,width:Z*2,height:et*2}};a("rect",e),a("image",e),a("circle",r),a("marker",r),a("polyline",l),a("polygon",A),a("text",y),a("path",O),a("line",T),a("ellipse",v)},"24YM":function(Fn,Gt,_){"use strict";Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.SensorTabIndex=Gt.SensorClassName=Gt.SizeSensorId=void 0;var rt="size-sensor-id";Gt.SizeSensorId=rt;var a="size-sensor-object";Gt.SensorClassName=a;var E="-1";Gt.SensorTabIndex=E},"3T7b":function(Fn,Gt){},"3u8d":function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return b});var rt=_("mrSG"),a=_("fIp6"),E=_("iTfj"),e=_("MeYt"),r={trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},p={default:r,hover:{thumbColor:"rgba(0,0,0,0.2)"}},b=function(S){Object(rt.b)(l,S);function l(){var A=S!==null&&S.apply(this,arguments)||this;return A.clearEvents=E.noop,A.onStartEvent=function(j){return function(y){A.isMobile=j,y.originalEvent.preventDefault();var n=j?Object(E.get)(y.originalEvent,"touches.0.clientX"):y.clientX,s=j?Object(E.get)(y.originalEvent,"touches.0.clientY"):y.clientY;A.startPos=A.cfg.isHorizontal?n:s,A.bindLaterEvent()}},A.bindLaterEvent=function(){var j=A.getContainerDOM(),y=[];A.isMobile?y=[Object(a.a)(j,"touchmove",A.onMouseMove),Object(a.a)(j,"touchend",A.onMouseUp),Object(a.a)(j,"touchcancel",A.onMouseUp)]:y=[Object(a.a)(j,"mousemove",A.onMouseMove),Object(a.a)(j,"mouseup",A.onMouseUp),Object(a.a)(j,"mouseleave",A.onMouseUp)],A.clearEvents=function(){y.forEach(function(n){n.remove()})}},A.onMouseMove=function(j){var y=A.cfg,n=y.isHorizontal,s=y.thumbOffset;j.preventDefault();var h=A.isMobile?Object(E.get)(j,"touches.0.clientX"):j.clientX,M=A.isMobile?Object(E.get)(j,"touches.0.clientY"):j.clientY,O=n?h:M,T=O-A.startPos;A.startPos=O,A.updateThumbOffset(s+T)},A.onMouseUp=function(j){j.preventDefault(),A.clearEvents()},A.onTrackClick=function(j){var y=A.cfg,n=y.isHorizontal,s=y.x,h=y.y,M=y.thumbLen,O=A.getContainerDOM(),T=O.getBoundingClientRect(),v=j.clientX,m=j.clientY,C=n?v-T.left-s-M/2:m-T.top-h-M/2,D=A.validateRange(C);A.updateThumbOffset(D)},A.onThumbMouseOver=function(){var j=A.cfg.theme.hover.thumbColor;A.getElementByLocalId("thumb").attr("stroke",j),A.draw()},A.onThumbMouseOut=function(){var j=A.cfg.theme.default.thumbColor;A.getElementByLocalId("thumb").attr("stroke",j),A.draw()},A}return l.prototype.setRange=function(A,j){this.set("minLimit",A),this.set("maxLimit",j);var y=this.getValue(),n=Object(E.clamp)(y,A,j);y!==n&&!this.get("isInit")&&this.setValue(n)},l.prototype.getRange=function(){var A=this.get("minLimit")||0,j=this.get("maxLimit")||1;return{min:A,max:j}},l.prototype.setValue=function(A){var j=this.getRange(),y=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*Object(E.clamp)(A,j.min,j.max)}),this.delegateEmit("valuechange",{originalValue:y,value:this.getValue()})},l.prototype.getValue=function(){return Object(E.clamp)(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},l.prototype.getDefaultCfg=function(){var A=S.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},A),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:p})},l.prototype.renderInner=function(A){this.renderTrackShape(A),this.renderThumbShape(A)},l.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},l.prototype.initEvent=function(){this.bindEvents()},l.prototype.renderTrackShape=function(A){var j=this.cfg,y=j.trackLen,n=j.theme,s=n===void 0?{default:{}}:n,h=s.default,M=h.lineCap,O=h.trackColor,T=h.size,v=this.get("isHorizontal")?{x1:0+T/2,y1:T/2,x2:y-T/2,y2:T/2,lineWidth:T,stroke:O,lineCap:M}:{x1:T/2,y1:0+T/2,x2:T/2,y2:y-T/2,lineWidth:T,stroke:O,lineCap:M};return this.addShape(A,{id:this.getElementId("track"),name:"track",type:"line",attrs:v})},l.prototype.renderThumbShape=function(A){var j=this.cfg,y=j.thumbOffset,n=j.thumbLen,s=j.theme,h=s===void 0?{default:{}}:s,M=h.default,O=M.size,T=M.lineCap,v=M.thumbColor,m=this.get("isHorizontal")?{x1:y+O/2,y1:O/2,x2:y+n-O/2,y2:O/2,lineWidth:O,stroke:v,lineCap:T,cursor:"default"}:{x1:O/2,y1:y+O/2,x2:O/2,y2:y+n-O/2,lineWidth:O,stroke:v,lineCap:T,cursor:"default"};return this.addShape(A,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:m})},l.prototype.bindEvents=function(){var A=this.get("group");A.on("mousedown",this.onStartEvent(!1)),A.on("mouseup",this.onMouseUp),A.on("touchstart",this.onStartEvent(!0)),A.on("touchend",this.onMouseUp);var j=A.findById(this.getElementId("track"));j.on("click",this.onTrackClick);var y=A.findById(this.getElementId("thumb"));y.on("mouseover",this.onThumbMouseOver),y.on("mouseout",this.onThumbMouseOut)},l.prototype.getContainerDOM=function(){var A=this.get("container"),j=A&&A.get("canvas");return j&&j.get("container")},l.prototype.validateRange=function(A){var j=this.cfg,y=j.thumbLen,n=j.trackLen,s=A;return A+y>n?s=n-y:A+y<y&&(s=0),s},l.prototype.draw=function(){var A=this.get("container"),j=A&&A.get("canvas");j&&j.draw()},l.prototype.updateThumbOffset=function(A){var j=this.cfg,y=j.thumbOffset,n=j.isHorizontal,s=j.thumbLen,h=j.size,M=this.validateRange(A);if(M!==y){var O=this.getElementByLocalId("thumb");n?O.attr({x1:M+h/2,x2:M+s-h/2}):O.attr({y1:M+h/2,y2:M+s-h/2}),this.emitOffsetChange(M)}},l.prototype.emitOffsetChange=function(A){var j=this.cfg,y=j.thumbOffset,n=j.trackLen,s=j.thumbLen;this.cfg.thumbOffset=A,this.emit("scrollchange",{thumbOffset:A,ratio:Object(E.clamp)(A/(n-s),0,1)}),this.delegateEmit("valuechange",{originalValue:y,value:A})},l}(e.a)},"46lQ":function(Fn,Gt,_){"use strict";var rt=_("QG4C"),a;(function(r){r.DEV="DEV",r.BETA="BETA",r.STABLE="STABLE"})(a||(a={}));function E(r,p){console.warn(r===a.DEV?"Plot '"+p+"' is in DEV stage, just give us issues.":r===a.BETA?"Plot '"+p+"' is in BETA stage, DO NOT use it in production env.":r===a.STABLE?"Plot '"+p+`' is in STABLE stage, import it by "import { `+p+` } from '@antv/g2plot'".`:"invalid Stage type.")}var e=function(){function r(){}return Object.defineProperty(r,"MultiView",{get:function(){return E(a.STABLE,"MultiView"),rt.a},enumerable:!1,configurable:!0}),r}()},"4Olw":function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return rt});function rt(a,E){return a.views.find(function(e){return e.id===E})}},"4cbP":function(Fn,Gt){},"5HRO":function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return a});var rt=_("iTfj");function a(E,e){if(E===!1)return{fields:!1};var r=Object(rt.get)(E,"fields"),p=Object(rt.get)(E,"formatter");return p&&!r&&(r=e),{fields:r,formatter:p}}},"5OoT":function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return a});var rt=_("iTfj");function a(E,e){return!Object(rt.isNumber)(E)||!Object(rt.isNumber)(e)?"-":E===e?"100%":E===0?"\u221E":e===0?"-\u221E":(100*e/E).toFixed(2)+"%"}},"5UbV":function(Fn,Gt,_){"use strict";_.d(Gt,"c",function(){return a}),_.d(Gt,"a",function(){return E}),_.d(Gt,"h",function(){return e}),_.d(Gt,"k",function(){return r}),_.d(Gt,"j",function(){return p}),_.d(Gt,"b",function(){return b}),_.d(Gt,"g",function(){return S}),_.d(Gt,"e",function(){return l}),_.d(Gt,"i",function(){return y}),_.d(Gt,"d",function(){return h}),_.d(Gt,"m",function(){return M}),_.d(Gt,"l",function(){return O}),_.d(Gt,"f",function(){return T});var rt=_("iTfj");function a(v){var m=0,C=0,D=0,Y=0;return Object(rt.isNumber)(v)?m=C=D=Y=v:Object(rt.isArray)(v)&&(m=v[0],D=Object(rt.isNil)(v[1])?v[0]:v[1],Y=Object(rt.isNil)(v[2])?v[0]:v[2],C=Object(rt.isNil)(v[3])?D:v[3]),[m,D,Y,C]}function E(v){for(var m=v.childNodes,C=m.length,D=C-1;D>=0;D--)v.removeChild(m[D])}function e(v,m){return!!v.className.match(new RegExp("(\\s|^)"+m+"(\\s|$)"))}function r(v){var m=v.start,C=v.end,D=Math.min(m.x,C.x),Y=Math.min(m.y,C.y),Z=Math.max(m.x,C.x),et=Math.max(m.y,C.y);return{x:D,y:Y,minX:D,minY:Y,maxX:Z,maxY:et,width:Z-D,height:et-Y}}function p(v){var m=v.map(function(dt){return dt.x}),C=v.map(function(dt){return dt.y}),D=Math.min.apply(Math,m),Y=Math.min.apply(Math,C),Z=Math.max.apply(Math,m),et=Math.max.apply(Math,C);return{x:D,y:Y,minX:D,minY:Y,maxX:Z,maxY:et,width:Z-D,height:et-Y}}function b(v,m,C,D){var Y=v+C,Z=m+D;return{x:v,y:m,width:C,height:D,minX:v,minY:m,maxX:isNaN(Y)?0:Y,maxY:isNaN(Z)?0:Z}}function S(v,m,C){return(1-C)*v+m*C}function l(v,m,C){return{x:v.x+Math.cos(C)*m,y:v.y+Math.sin(C)*m}}function A(v,m){var C=m.x-v.x,D=m.y-v.y;return Math.sqrt(C*C+D*D)}var j=function(m){return new Promise(function(C){setTimeout(C,m)})},y=function(m,C,D){return D===void 0&&(D=Math.pow(Number.EPSILON,.5)),[m,C].includes(Infinity)?Math.abs(m)===Math.abs(C):Math.abs(m-C)<D};function n(v,m){var C=Math.max(v.minX,m.minX),D=Math.max(v.minY,m.minY),Y=Math.min(v.maxX,m.maxX),Z=Math.min(v.maxY,m.maxY);return b(C,D,Y-C,Z-D)}function s(v,m){var C=Math.min(v.minX,m.minX),D=Math.min(v.minY,m.minY),Y=Math.max(v.maxX,m.maxX),Z=Math.max(v.maxY,m.maxY);return b(C,D,Y-C,Z-D)}function h(v){var m=v.getClip(),C=m&&m.getBBox(),D;if(!v.isGroup())D=v.getBBox();else{var Y=Infinity,Z=-Infinity,et=Infinity,dt=-Infinity,ht=v.getChildren();ht.length>0?Object(rt.each)(ht,function(St){if(St.get("visible")){if(St.isGroup()&&St.get("children").length===0)return!0;var wt=h(St),xt=St.applyToMatrix([wt.minX,wt.minY,1]),ft=St.applyToMatrix([wt.minX,wt.maxY,1]),Bt=St.applyToMatrix([wt.maxX,wt.minY,1]),Rt=St.applyToMatrix([wt.maxX,wt.maxY,1]),Ot=Math.min(xt[0],ft[0],Bt[0],Rt[0]),X=Math.max(xt[0],ft[0],Bt[0],Rt[0]),ut=Math.min(xt[1],ft[1],Bt[1],Rt[1]),vt=Math.max(xt[1],ft[1],Bt[1],Rt[1]);Ot<Y&&(Y=Ot),X>Z&&(Z=X),ut<et&&(et=ut),vt>dt&&(dt=vt)}}):(Y=0,Z=0,et=0,dt=0),D=b(Y,et,Z-Y,dt-et)}return C?n(D,C):D}function M(v,m){if(!(!v.getClip()&&!m.getClip())){var C=m.getClip();if(!C){v.setClip(null);return}var D={type:C.get("type"),attrs:C.attr()};v.setClip(D)}}function O(v){return v+"px"}function T(v,m,C,D){var Y=A(v,m),Z=D/Y,et=0;return C==="start"?et=0-Z:C==="end"&&(et=1+Z),{x:S(v.x,m.x,et),y:S(v.y,m.y,et)}}},"5bFI":function(Fn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"Category",function(){return y}),_.d(Gt,"Continuous",function(){return M}),_.d(Gt,"Base",function(){return A});var rt=_("mrSG"),a=_("iTfj"),E=_("BgvD"),e=_("jqgP"),r=_("l3hu"),p=_("L16w"),b=_("MeYt"),S=_("5UbV"),l=function(O){Object(rt.b)(T,O);function T(){return O!==null&&O.apply(this,arguments)||this}return T.prototype.getDefaultCfg=function(){var v=O.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},v),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},T.prototype.getLayoutBBox=function(){var v=O.prototype.getLayoutBBox.call(this),m=this.get("maxWidth"),C=this.get("maxHeight"),D=v.width,Y=v.height;return m&&(D=Math.min(D,m)),C&&(Y=Math.min(Y,C)),Object(S.b)(v.minX,v.minY,D,Y)},T.prototype.setLocation=function(v){this.set("x",v.x),this.set("y",v.y),this.resetLocation()},T.prototype.resetLocation=function(){var v=this.get("x"),m=this.get("y"),C=this.get("offsetX"),D=this.get("offsetY");this.moveElementTo(this.get("group"),{x:v+C,y:m+D})},T.prototype.applyOffset=function(){this.resetLocation()},T.prototype.getDrawPoint=function(){return this.get("currentPoint")},T.prototype.setDrawPoint=function(v){return this.set("currentPoint",v)},T.prototype.renderInner=function(v){this.resetDraw(),this.get("title")&&this.drawTitle(v),this.drawLegendContent(v),this.get("background")&&this.drawBackground(v)},T.prototype.drawBackground=function(v){var m=this.get("background"),C=v.getBBox(),D=Object(S.c)(m.padding),Y=Object(rt.a)({x:0,y:0,width:C.width+D[1]+D[3],height:C.height+D[0]+D[2]},m.style),Z=this.addShape(v,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:Y});Z.toBack()},T.prototype.drawTitle=function(v){var m=this.get("currentPoint"),C=this.get("title"),D=C.spacing,Y=C.style,Z=C.text,et=this.addShape(v,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:Object(rt.a)({text:Z,x:m.x,y:m.y},Y)}),dt=et.getBBox();this.set("currentPoint",{x:m.x,y:dt.maxY+D})},T.prototype.resetDraw=function(){var v=this.get("background"),m={x:0,y:0};if(v){var C=Object(S.c)(v.padding);m.x=C[3],m.y=C[0]}this.set("currentPoint",m)},T}(b.a),A=l,j=function(O){Object(rt.b)(T,O);function T(){var v=O!==null&&O.apply(this,arguments)||this;return v.currentPageIndex=1,v.totalPagesCnt=1,v.pageWidth=0,v.pageHeight=0,v.startX=0,v.startY=0,v.onNavigationBack=function(){var m=v.getElementByLocalId("item-group");if(v.currentPageIndex>1){v.currentPageIndex-=1,v.updateNavigation();var C=v.getCurrentNavigationMatrix();v.get("animate")?m.animate({matrix:C},100):m.attr({matrix:C})}},v.onNavigationAfter=function(){var m=v.getElementByLocalId("item-group");if(v.currentPageIndex<v.totalPagesCnt){v.currentPageIndex+=1,v.updateNavigation();var C=v.getCurrentNavigationMatrix();v.get("animate")?m.animate({matrix:C},100):m.attr({matrix:C})}},v}return T.prototype.getDefaultCfg=function(){var v=O.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},v),{name:"legend",type:"category",itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},items:[],itemStates:{},itemBackground:{},defaultCfg:{title:{spacing:5,style:{fill:p.a.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:p.a.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},itemName:{spacing:16,style:{fill:p.a.textColor,fontSize:12,textAlign:"start",textBaseline:"middle"}},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:{fill:p.a.textColor,fontSize:12,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:p.a.uncheckedColor},markerStyle:{fill:p.a.uncheckedColor,stroke:p.a.uncheckedColor}},inactive:{nameStyle:{fill:p.a.uncheckedColor},markerStyle:{opacity:.2}}}}})},T.prototype.isList=function(){return!0},T.prototype.getItems=function(){return this.get("items")},T.prototype.setItems=function(v){this.update({items:v})},T.prototype.updateItem=function(v,m){Object(a.mix)(v,m),this.clear(),this.render()},T.prototype.clearItems=function(){var v=this.getElementByLocalId("item-group");v&&v.clear()},T.prototype.setItemState=function(v,m,C){v[m]=C;var D=this.getElementByLocalId("item-"+v.id);if(D){var Y=this.getItems(),Z=Y.indexOf(v),et=this.createOffScreenGroup(),dt=this.drawItem(v,Z,this.getItemHeight(),et);this.updateElements(dt,D),this.clearUpdateStatus(D)}},T.prototype.hasState=function(v,m){return!!v[m]},T.prototype.getItemStates=function(v){var m=this.get("itemStates"),C=[];return Object(a.each)(m,function(D,Y){v[Y]&&C.push(Y)}),C},T.prototype.clearItemsState=function(v){var m=this,C=this.getItemsByState(v);Object(a.each)(C,function(D){m.setItemState(D,v,!1)})},T.prototype.getItemsByState=function(v){var m=this,C=this.getItems();return Object(a.filter)(C,function(D){return m.hasState(D,v)})},T.prototype.drawLegendContent=function(v){this.processItems(),this.drawItems(v)},T.prototype.processItems=function(){var v=this.get("items");Object(a.each)(v,function(m){m.id||(m.id=m.name)})},T.prototype.drawItems=function(v){var m=this,C=this.addGroup(v,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),D=this.addGroup(C,{id:this.getElementId("item-group"),name:"legend-item-group"}),Y=this.getItemHeight(),Z=this.get("itemWidth"),et=this.get("itemSpacing"),dt=this.get("itemMarginBottom"),ht=this.get("currentPoint"),St=ht.x,wt=ht.y,xt=this.get("layout"),ft=this.get("items"),Bt=!1,Rt=0,Ot=this.get("maxWidth"),X=this.get("maxHeight");Object(a.each)(ft,function(ut,vt){var pt=m.drawItem(ut,vt,Y,D),Et=pt.getBBox(),q=Z||Et.width;q>Rt&&(Rt=q),xt==="horizontal"?(Ot&&Ot<ht.x+q-St&&(Bt=!0,ht.x=St,ht.y+=Y+dt),m.moveElementTo(pt,ht),ht.x+=q+et):(X&&X<ht.y+Y+dt-wt&&(Bt=!0,ht.x+=Rt+et,ht.y=wt,Rt=0),m.moveElementTo(pt,ht),ht.y+=Y+dt)}),Bt&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=St,this.startY=wt,this.adjustNavigation(v,D))},T.prototype.getItemHeight=function(){var v=this.get("itemHeight");if(!v){var m=this.get("itemName");m&&(v=m.style.fontSize)}return v},T.prototype.drawMarker=function(v,m,C,D){var Y=Object(rt.a)(Object(rt.a)(Object(rt.a)({x:0,y:D/2},m.style),{symbol:Object(a.get)(C.marker,"symbol","circle")}),Object(a.get)(C.marker,"style",{})),Z=this.addShape(v,{type:"marker",id:this.getElementId("item-"+C.id+"-marker"),name:"legend-item-marker",attrs:Y}),et=Z.getBBox();Z.attr("x",et.width/2);var dt=Z.attr(),ht=dt.stroke,St=dt.fill;return ht&&Z.set("isStroke",!0),St&&Z.set("isFill",!0),Z},T.prototype.drawItemText=function(v,m,C,D,Y,Z,et){var dt=C.formatter,ht=Object(rt.a)({x:Z,y:Y/2,text:dt?dt(D[m],D,et):D[m]},C.style);return this.addShape(v,{type:"text",id:this.getElementId("item-"+D.id+"-"+m),name:"legend-item-"+m,attrs:ht})},T.prototype.drawItem=function(v,m,C,D){var Y="item-"+v.id,Z=this.addGroup(D,{name:"legend-item-container",id:this.getElementId("item-container-"+Y),delegateObject:{item:v,index:m}}),et=this.addGroup(Z,{name:"legend-item",id:this.getElementId(Y),delegateObject:{item:v,index:m}}),dt=this.get("marker"),ht=this.get("itemName"),St=this.get("itemValue"),wt=this.get("itemBackground"),xt=this.getLimitItemWidth(),ft=0;if(dt){var Bt=this.drawMarker(et,dt,v,C);ft=Bt.getBBox().maxX+dt.spacing}if(ht){var Rt=this.drawItemText(et,"name",ht,v,C,ft,m);xt&&Object(E.a)(!0,Rt,Object(a.clamp)(xt-ft,0,xt)),ft=Rt.getBBox().maxX+ht.spacing}if(St){var Ot=this.drawItemText(et,"value",St,v,C,ft,m);xt&&(St.alignRight?(Ot.attr({textAlign:"right",x:xt}),Object(E.a)(!0,Ot,Object(a.clamp)(xt-ft,0,xt),"head")):Object(E.a)(!0,Ot,Object(a.clamp)(xt-ft,0,xt)))}if(wt){var X=et.getBBox(),ut=this.addShape(et,{type:"rect",name:"legend-item-background",id:this.getElementId(Y+"-background"),attrs:Object(rt.a)({x:0,y:0,width:X.width,height:C},wt.style)});ut.toBack()}return this.applyItemStates(v,et),et},T.prototype.adjustNavigation=function(v,m){var C=this,D=this.startX,Y=this.startY,Z=this.get("layout"),et=m.findAll(function(q){return q.get("name")==="legend-item"}),dt=this.get("maxWidth"),ht=this.get("maxHeight"),St=this.get("itemWidth"),wt=this.get("itemSpacing"),xt=this.getItemHeight(),ft=this.drawNavigation(v,Z,"00/00",12),Bt=ft.getBBox(),Rt={x:D,y:Y},Ot=1,X=0,ut=0,vt=0;if(Z==="horizontal")this.pageHeight=xt,Object(a.each)(et,function(q){var st=q.getBBox(),it=St||st.width;(X&&X<Rt.x+it+wt||dt<Rt.x+it+wt+Bt.width)&&(Ot===1&&(X=Rt.x+wt,C.pageWidth=X,C.moveElementTo(ft,{x:dt-wt-Bt.width-Bt.minX,y:Rt.y+xt/2-Bt.height/2-Bt.minY})),Ot+=1,Rt.x=D,Rt.y+=xt),C.moveElementTo(q,Rt),q.getParent().setClip({type:"rect",attrs:{x:Rt.x,y:Rt.y,width:it+wt,height:xt}}),Rt.x+=it+wt});else{var pt=this.get("itemMarginBottom");Object(a.each)(et,function(q){var st=q.getBBox();st.width>ut&&(ut=st.width)}),vt=ut,ut+=wt,dt&&(ut=Math.min(dt,ut),vt=Math.min(dt,vt)),this.pageWidth=ut,this.pageHeight=ht-Math.max(Bt.height,xt+pt);var Et=Math.floor(this.pageHeight/(xt+pt));Object(a.each)(et,function(q,st){st!==0&&st%Et==0&&(Ot+=1,Rt.x+=ut,Rt.y=Y),C.moveElementTo(q,Rt),q.getParent().setClip({type:"rect",attrs:{x:Rt.x,y:Rt.y,width:ut,height:xt}}),Rt.y+=xt+pt}),this.totalPagesCnt=Ot,this.moveElementTo(ft,{x:D+vt/2-Bt.width/2-Bt.minX,y:ht-Bt.height-Bt.minY})}this.pageHeight&&this.pageWidth&&m.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),this.totalPagesCnt=Ot,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(ft),m.attr("matrix",this.getCurrentNavigationMatrix())},T.prototype.drawNavigation=function(v,m,C,D){var Y={x:0,y:0},Z=this.addGroup(v,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),et=this.drawArrow(Z,Y,"navigation-arrow-left",m==="horizontal"?"up":"left",D);et.on("click",this.onNavigationBack);var dt=et.getBBox();Y.x+=dt.width+2;var ht=this.addShape(Z,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:{x:Y.x,y:Y.y+D/2,text:C,fontSize:12,fill:"#ccc",textBaseline:"middle"}}),St=ht.getBBox();Y.x+=St.width+2;var wt=this.drawArrow(Z,Y,"navigation-arrow-right",m==="horizontal"?"down":"right",D);return wt.on("click",this.onNavigationAfter),Z},T.prototype.updateNavigation=function(v){var m=this.currentPageIndex+"/"+this.totalPagesCnt,C=v?v.getChildren()[1]:this.getElementByLocalId("navigation-text"),D=v?v.findById(this.getElementId("navigation-arrow-left")):this.getElementByLocalId("navigation-arrow-left"),Y=v?v.findById(this.getElementId("navigation-arrow-right")):this.getElementByLocalId("navigation-arrow-right"),Z=C.getBBox();C.attr("text",m);var et=C.getBBox();C.attr("x",C.attr("x")-(et.width-Z.width)/2),D.attr("opacity",this.currentPageIndex===1?.45:1),D.attr("cursor",this.currentPageIndex===1?"not-allowed":"pointer"),Y.attr("opacity",this.currentPageIndex===this.totalPagesCnt?.45:1),Y.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer")},T.prototype.drawArrow=function(v,m,C,D,Y){var Z=m.x,et=m.y,dt={right:90*Math.PI/180,left:(360-90)*Math.PI/180,up:0,down:180*Math.PI/180},ht=this.addShape(v,{type:"path",id:this.getElementId(C),name:C,attrs:{path:[["M",Z+Y/2,et],["L",Z,et+Y],["L",Z+Y,et+Y],["Z"]],fill:"#000",cursor:"pointer"}});return ht.attr("matrix",Object(e.e)({x:Z+Y/2,y:et+Y/2},dt[D])),ht},T.prototype.getCurrentNavigationMatrix=function(){var v=this,m=v.currentPageIndex,C=v.pageWidth,D=v.pageHeight,Y=this.get("layout"),Z=Y==="horizontal"?{x:0,y:D*(1-m)}:{x:C*(1-m),y:0};return Object(e.f)(Z)},T.prototype.applyItemStates=function(v,m){var C=this.getItemStates(v),D=C.length>0;if(D){var Y=m.getChildren(),Z=this.get("itemStates");Object(a.each)(Y,function(et){var dt=et.get("name"),ht=dt.split("-")[2],St=Object(r.a)(v,ht,Z);St&&(et.attr(St),ht==="marker"&&!(et.get("isStroke")&&et.get("isFill"))&&(et.get("isStroke")&&et.attr("fill",null),et.get("isFill")&&et.attr("stroke",null)))})}},T.prototype.getLimitItemWidth=function(){var v=this.get("itemWidth"),m=this.get("maxItemWidth");return m?v&&(m=v<=m?v:m):v&&(m=v),m},T}(A),y=j,n=1.4,s=.4,h=function(O){Object(rt.b)(T,O);function T(){return O!==null&&O.apply(this,arguments)||this}return T.prototype.getDefaultCfg=function(){var v=O.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},v),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:p.a.textColor,textBaseline:"middle",fontFamily:p.a.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:p.a.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},T.prototype.isSlider=function(){return!0},T.prototype.getValue=function(){return this.getCurrentValue()},T.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},T.prototype.setRange=function(v,m){this.update({min:v,max:m})},T.prototype.setValue=function(v){var m=this.getValue();this.set("value",v);var C=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(C),this.delegateEmit("valuechanged",{originValue:m,value:v})},T.prototype.initEvent=function(){var v=this.get("group");this.bindSliderEvent(v),this.bindRailEvent(v),this.bindTrackEvent(v)},T.prototype.drawLegendContent=function(v){this.drawRail(v),this.drawLabels(v),this.fixedElements(v),this.resetTrack(v),this.resetTrackClip(v),this.get("slidable")&&this.resetHandlers(v)},T.prototype.bindSliderEvent=function(v){this.bindHandlersEvent(v)},T.prototype.bindHandlersEvent=function(v){var m=this;v.on("legend-handler-min:drag",function(C){var D=m.getValueByCanvasPoint(C.x,C.y),Y=m.getCurrentValue(),Z=Y[1];Z<D&&(Z=D),m.setValue([D,Z])}),v.on("legend-handler-max:drag",function(C){var D=m.getValueByCanvasPoint(C.x,C.y),Y=m.getCurrentValue(),Z=Y[0];Z>D&&(Z=D),m.setValue([Z,D])})},T.prototype.bindRailEvent=function(v){},T.prototype.bindTrackEvent=function(v){var m=this,C=null;v.on("legend-track:dragstart",function(D){C={x:D.x,y:D.y}}),v.on("legend-track:drag",function(D){if(!!C){var Y=m.getValueByCanvasPoint(C.x,C.y),Z=m.getValueByCanvasPoint(D.x,D.y),et=m.getCurrentValue(),dt=et[1]-et[0],ht=m.getRange(),St=Z-Y;St<0?et[0]+St>ht.min?m.setValue([et[0]+St,et[1]+St]):m.setValue([ht.min,ht.min+dt]):St>0&&(St>0&&et[1]+St<ht.max?m.setValue([et[0]+St,et[1]+St]):m.setValue([ht.max-dt,ht.max])),C={x:D.x,y:D.y}}}),v.on("legend-track:dragend",function(D){C=null})},T.prototype.drawLabels=function(v){this.drawLabel("min",v),this.drawLabel("max",v)},T.prototype.drawLabel=function(v,m){var C=this.get("label"),D=C.style,Y=C.align,Z=this.get(v),et=this.getLabelAlignAttrs(v,Y),dt="label-"+v;this.addShape(m,{type:"text",id:this.getElementId(dt),name:"legend-label-"+v,attrs:Object(rt.a)(Object(rt.a)({x:0,y:0,text:Z},D),et)})},T.prototype.getLabelAlignAttrs=function(v,m){var C=this.isVertical(),D="center",Y="middle";return C?(D="start",m!=="rail"?v==="min"?Y="top":Y="bottom":Y="top"):m!=="rail"?(Y="top",v==="min"?D="start":D="end"):(D="start",Y="middle"),{textAlign:D,textBaseline:Y}},T.prototype.getRailPath=function(v,m,C,D){var Y=this.get("rail"),Z=Y.size,et=Y.defaultLength,dt=Y.type,ht=this.isVertical(),St=et,wt=C,xt=D;wt||(wt=ht?Z:St),xt||(xt=ht?St:Z);var ft=[];return dt==="color"?(ft.push(["M",v,m]),ft.push(["L",v+wt,m]),ft.push(["L",v+wt,m+xt]),ft.push(["L",v,m+xt]),ft.push(["Z"])):(ft.push(["M",v+wt,m]),ft.push(["L",v+wt,m+xt]),ft.push(["L",v,m+xt]),ft.push(["Z"])),ft},T.prototype.drawRail=function(v){var m=this.get("rail"),C=m.style;this.addShape(v,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:Object(rt.a)({path:this.getRailPath(0,0)},C)})},T.prototype.getTrackColor=function(v){var m=v.length;if(!m)return null;if(m===1)return v[0];var C;this.isVertical()?C="l(90)":C="l(0)";for(var D=0;D<m;D++){var Y=D/(m-1);C+=" "+Y+":"+v[D]}return C},T.prototype.getTrackPath=function(v){var m=this.getRailShape(v),C=m.attr("path");return Object(a.clone)(C)},T.prototype.getClipTrackAttrs=function(v){var m=this.getCurrentValue(),C=m[0],D=m[1],Y=this.getRailBBox(v),Z=this.getPointByValue(C,v),et=this.getPointByValue(D,v),dt=this.isVertical(),ht,St,wt,xt;return dt?(ht=Y.minX,St=Z.y,wt=Y.width,xt=et.y-Z.y):(ht=Z.x,St=Y.minY,wt=et.x-Z.x,xt=Y.height),{x:ht,y:St,width:wt,height:xt}},T.prototype.getTrackAttrs=function(v){var m=this.get("track"),C=this.get("colors"),D=this.getTrackPath(v);return Object(a.mix)({path:D,fill:this.getTrackColor(C)},m.style)},T.prototype.resetTrackClip=function(v){var m=v||this.get("group"),C=this.getElementId("track"),D=m.findById(C),Y=D.getClip(),Z=this.getClipTrackAttrs(v);Y?Y.attr(Z):D.setClip({type:"rect",attrs:Z})},T.prototype.resetTrack=function(v){var m=this.getElementId("track"),C=v.findById(m),D=this.getTrackAttrs(v);C?C.attr(D):this.addShape(v,{type:"path",id:m,draggable:this.get("slidable"),name:"legend-track",attrs:D})},T.prototype.getPointByValue=function(v,m){var C=this.getRange(),D=C.min,Y=C.max,Z=(v-D)/(Y-D),et=this.getRailBBox(m),dt=this.isVertical(),ht={x:0,y:0};return dt?(ht.x=et.minX+et.width/2,ht.y=Object(S.g)(et.minY,et.maxY,Z)):(ht.x=Object(S.g)(et.minX,et.maxX,Z),ht.y=et.minY+et.height/2),ht},T.prototype.getRailShape=function(v){var m=v||this.get("group");return m.findById(this.getElementId("rail"))},T.prototype.getRailBBox=function(v){var m=this.getRailShape(v),C=m.getBBox();return C},T.prototype.getRailCanvasBBox=function(){var v=this.get("group"),m=v.findById(this.getElementId("rail")),C=m.getCanvasBBox();return C},T.prototype.isVertical=function(){return this.get("layout")==="vertical"},T.prototype.getValueByCanvasPoint=function(v,m){var C=this.getRange(),D=C.min,Y=C.max,Z=this.getRailCanvasBBox(),et=this.isVertical(),dt=this.get("step"),ht;et?ht=(m-Z.minY)/Z.height:ht=(v-Z.minX)/Z.width;var St=Object(S.g)(D,Y,ht);if(dt){var wt=Math.round((St-D)/dt);St=D+wt*dt}return St>Y&&(St=Y),St<D&&(St=D),St},T.prototype.getCurrentValue=function(){var v=this.get("value");return v||(v=[this.get("min"),this.get("max")]),v},T.prototype.resetHandlers=function(v){var m=this.getCurrentValue(),C=m[0],D=m[1];this.resetHandler(v,"min",C),this.resetHandler(v,"max",D)},T.prototype.getHandlerPath=function(v,m){var C=this.isVertical(),D=[],Y=v.size,Z=m.x,et=m.y,dt=Y*n,ht=Y/2,St=Y/6;if(C){var wt=Z+dt*s;D.push(["M",Z,et]),D.push(["L",wt,et+ht]),D.push(["L",Z+dt,et+ht]),D.push(["L",Z+dt,et-ht]),D.push(["L",wt,et-ht]),D.push(["Z"]),D.push(["M",wt,et+St]),D.push(["L",Z+dt-2,et+St]),D.push(["M",wt,et-St]),D.push(["L",Z+dt-2,et-St])}else{var xt=et+dt*s;D.push(["M",Z,et]),D.push(["L",Z-ht,xt]),D.push(["L",Z-ht,et+dt]),D.push(["L",Z+ht,et+dt]),D.push(["L",Z+ht,xt]),D.push(["Z"]),D.push(["M",Z-St,xt]),D.push(["L",Z-St,et+dt-2]),D.push(["M",Z+St,xt]),D.push(["L",Z+St,et+dt-2])}return D},T.prototype.resetHandler=function(v,m,C){var D=this.getPointByValue(C,v),Y=this.get("handler"),Z=this.getHandlerPath(Y,D),et=this.getElementId("handler-"+m),dt=v.findById(et),ht=this.isVertical();dt?dt.attr("path",Z):this.addShape(v,{type:"path",name:"legend-handler-"+m,draggable:!0,id:et,attrs:Object(rt.a)(Object(rt.a)({path:Z},Y.style),{cursor:ht?"ns-resize":"ew-resize"})})},T.prototype.fixedElements=function(v){var m=v.findById(this.getElementId("rail")),C=v.findById(this.getElementId("label-min")),D=v.findById(this.getElementId("label-max")),Y=this.getDrawPoint();this.isVertical()?this.fixedVertail(C,D,m,Y):this.fixedHorizontal(C,D,m,Y)},T.prototype.fitRailLength=function(v,m,C,D){var Y=this.isVertical(),Z=Y?"height":"width",et=this.get("label"),dt=et.align,ht=et.spacing,St=this.get("max"+Object(a.upperFirst)(Z));if(St){var wt=dt==="rail"?C[Z]+v[Z]+m[Z]+ht*2:C[Z],xt=wt-St;xt>0&&this.changeRailLength(D,Z,C[Z]-xt)}},T.prototype.changeRailLength=function(v,m,C){var D=v.getBBox(),Y;m==="height"?Y=this.getRailPath(D.x,D.y,D.width,C):Y=this.getRailPath(D.x,D.y,C,D.height),v.attr("path",Y)},T.prototype.changeRailPosition=function(v,m,C){var D=v.getBBox(),Y=this.getRailPath(m,C,D.width,D.height);v.attr("path",Y)},T.prototype.fixedHorizontal=function(v,m,C,D){var Y=this.get("label"),Z=Y.align,et=Y.spacing,dt=C.getBBox(),ht=v.getBBox(),St=m.getBBox(),wt=dt.height;this.fitRailLength(ht,St,dt,C),dt=C.getBBox(),Z==="rail"?(v.attr({x:D.x,y:D.y+wt/2}),this.changeRailPosition(C,D.x+ht.width+et,D.y),m.attr({x:D.x+ht.width+dt.width+et*2,y:D.y+wt/2})):Z==="top"?(v.attr({x:D.x,y:D.y}),m.attr({x:D.x+dt.width,y:D.y}),this.changeRailPosition(C,D.x,D.y+ht.height+et)):(this.changeRailPosition(C,D.x,D.y),v.attr({x:D.x,y:D.y+dt.height+et}),m.attr({x:D.x+dt.width,y:D.y+dt.height+et}))},T.prototype.fixedVertail=function(v,m,C,D){var Y=this.get("label"),Z=Y.align,et=Y.spacing,dt=C.getBBox(),ht=v.getBBox(),St=m.getBBox();if(this.fitRailLength(ht,St,dt,C),dt=C.getBBox(),Z==="rail")v.attr({x:D.x,y:D.y}),this.changeRailPosition(C,D.x,D.y+ht.height+et),m.attr({x:D.x,y:D.y+ht.height+dt.height+et*2});else if(Z==="right")v.attr({x:D.x+dt.width+et,y:D.y}),this.changeRailPosition(C,D.x,D.y),m.attr({x:D.x+dt.width+et,y:D.y+dt.height});else{var wt=Math.max(ht.width,St.width);v.attr({x:D.x,y:D.y}),this.changeRailPosition(C,D.x+wt+et,D.y),m.attr({x:D.x,y:D.y+dt.height})}},T}(A),M=h},"5eLp":function(Fn,Gt,_){"use strict";var rt=function(){function a(E,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=E,this.name=E,this.originalEvent=e,this.timeStamp=e.timeStamp}return a.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},a.prototype.stopPropagation=function(){this.propagationStopped=!0},a.prototype.toString=function(){var E=this.type;return"[Event (type="+E+")]"},a.prototype.save=function(){},a.prototype.restore=function(){},a}();Gt.a=rt},"5kt6":function(Fn,Gt,_){"use strict";_.d(Gt,"f",function(){return rt}),_.d(Gt,"e",function(){return a}),_.d(Gt,"d",function(){return E}),_.d(Gt,"a",function(){return e}),_.d(Gt,"b",function(){return r}),_.d(Gt,"g",function(){return p}),_.d(Gt,"c",function(){return b});var rt="range",a="type",E="percent",e="#f0f0f0",r="indicator-view",p="range-view",b="range-mask-view"},"5z4m":function(Fn,Gt,_){"use strict";var rt=_("mrSG"),a=_("aFU3"),E=_("iTfj"),e=_("aN7R"),r=_("c0lT"),p=_("APlK"),b=_("IvmH"),S=_("c+wO"),l=function(A){Object(rt.b)(j,A);function j(){return A!==null&&A.apply(this,arguments)||this}return j.prototype.isEntityGroup=function(){return!0},j.prototype.createDom=function(){var y=Object(S.b)("g");this.set("el",y);var n=this.getParent();if(n){var s=n.get("el");s||(s=n.createDom(),n.set("el",s)),s.appendChild(y)}return y},j.prototype.afterAttrsChange=function(y){A.prototype.afterAttrsChange.call(this,y);var n=this.get("canvas");if(n&&n.get("autoDraw")){var s=n.get("context");this.createPath(s,y)}},j.prototype.onCanvasChange=function(y){Object(r.b)(this,y)},j.prototype.getShapeBase=function(){return e},j.prototype.getGroupBase=function(){return j},j.prototype.draw=function(y){var n=this.getChildren(),s=this.get("el");this.get("destroyed")?s&&s.parentNode.removeChild(s):(s||this.createDom(),Object(p.a)(this,y),this.createPath(y),n.length&&Object(r.a)(y,n))},j.prototype.createPath=function(y,n){var s=this.attr(),h=this.get("el");Object(E.each)(n||s,function(M,O){b.b[O]&&h.setAttribute(b.b[O],M)}),Object(p.c)(this)},j}(a.AbstractGroup);Gt.a=l},"6D9b":function(Fn,Gt,_){},"6JdA":function(Fn,Gt,_){"use strict";_.d(Gt,"b",function(){return rt}),_.d(Gt,"c",function(){return ut}),_.d(Gt,"d",function(){return vt}),_.d(Gt,"a",function(){return a});var rt={};_.r(rt),_.d(rt,"create",function(){return e}),_.d(rt,"fromMat4",function(){return r}),_.d(rt,"clone",function(){return p}),_.d(rt,"copy",function(){return b}),_.d(rt,"fromValues",function(){return S}),_.d(rt,"set",function(){return l}),_.d(rt,"identity",function(){return A}),_.d(rt,"transpose",function(){return j}),_.d(rt,"invert",function(){return y}),_.d(rt,"adjoint",function(){return n}),_.d(rt,"determinant",function(){return s}),_.d(rt,"multiply",function(){return h}),_.d(rt,"translate",function(){return M}),_.d(rt,"rotate",function(){return O}),_.d(rt,"scale",function(){return T}),_.d(rt,"fromTranslation",function(){return v}),_.d(rt,"fromRotation",function(){return m}),_.d(rt,"fromScaling",function(){return C}),_.d(rt,"fromMat2d",function(){return D}),_.d(rt,"fromQuat",function(){return Y}),_.d(rt,"normalFromMat4",function(){return Z}),_.d(rt,"projection",function(){return et}),_.d(rt,"str",function(){return dt}),_.d(rt,"frob",function(){return ht}),_.d(rt,"add",function(){return St}),_.d(rt,"subtract",function(){return wt}),_.d(rt,"multiplyScalar",function(){return xt}),_.d(rt,"multiplyScalarAndAdd",function(){return ft}),_.d(rt,"exactEquals",function(){return Bt}),_.d(rt,"equals",function(){return Rt}),_.d(rt,"mul",function(){return Ot}),_.d(rt,"sub",function(){return X});var a={};_.r(a),_.d(a,"leftTranslate",function(){return pt}),_.d(a,"leftRotate",function(){return Et}),_.d(a,"leftScale",function(){return q}),_.d(a,"transform",function(){return it}),_.d(a,"direction",function(){return z}),_.d(a,"angleTo",function(){return P}),_.d(a,"vertical",function(){return H});var E=_("yU0y");function e(){var k=new E.a(9);return E.a!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[5]=0,k[6]=0,k[7]=0),k[0]=1,k[4]=1,k[8]=1,k}function r(k,d){return k[0]=d[0],k[1]=d[1],k[2]=d[2],k[3]=d[4],k[4]=d[5],k[5]=d[6],k[6]=d[8],k[7]=d[9],k[8]=d[10],k}function p(k){var d=new E.a(9);return d[0]=k[0],d[1]=k[1],d[2]=k[2],d[3]=k[3],d[4]=k[4],d[5]=k[5],d[6]=k[6],d[7]=k[7],d[8]=k[8],d}function b(k,d){return k[0]=d[0],k[1]=d[1],k[2]=d[2],k[3]=d[3],k[4]=d[4],k[5]=d[5],k[6]=d[6],k[7]=d[7],k[8]=d[8],k}function S(k,d,g,F,V,tt,ot,at,At){var yt=new E.a(9);return yt[0]=k,yt[1]=d,yt[2]=g,yt[3]=F,yt[4]=V,yt[5]=tt,yt[6]=ot,yt[7]=at,yt[8]=At,yt}function l(k,d,g,F,V,tt,ot,at,At,yt){return k[0]=d,k[1]=g,k[2]=F,k[3]=V,k[4]=tt,k[5]=ot,k[6]=at,k[7]=At,k[8]=yt,k}function A(k){return k[0]=1,k[1]=0,k[2]=0,k[3]=0,k[4]=1,k[5]=0,k[6]=0,k[7]=0,k[8]=1,k}function j(k,d){if(k===d){var g=d[1],F=d[2],V=d[5];k[1]=d[3],k[2]=d[6],k[3]=g,k[5]=d[7],k[6]=F,k[7]=V}else k[0]=d[0],k[1]=d[3],k[2]=d[6],k[3]=d[1],k[4]=d[4],k[5]=d[7],k[6]=d[2],k[7]=d[5],k[8]=d[8];return k}function y(k,d){var g=d[0],F=d[1],V=d[2],tt=d[3],ot=d[4],at=d[5],At=d[6],yt=d[7],gt=d[8],bt=gt*ot-at*yt,Tt=-gt*tt+at*At,Dt=yt*tt-ot*At,Ut=g*bt+F*Tt+V*Dt;return Ut?(Ut=1/Ut,k[0]=bt*Ut,k[1]=(-gt*F+V*yt)*Ut,k[2]=(at*F-V*ot)*Ut,k[3]=Tt*Ut,k[4]=(gt*g-V*At)*Ut,k[5]=(-at*g+V*tt)*Ut,k[6]=Dt*Ut,k[7]=(-yt*g+F*At)*Ut,k[8]=(ot*g-F*tt)*Ut,k):null}function n(k,d){var g=d[0],F=d[1],V=d[2],tt=d[3],ot=d[4],at=d[5],At=d[6],yt=d[7],gt=d[8];return k[0]=ot*gt-at*yt,k[1]=V*yt-F*gt,k[2]=F*at-V*ot,k[3]=at*At-tt*gt,k[4]=g*gt-V*At,k[5]=V*tt-g*at,k[6]=tt*yt-ot*At,k[7]=F*At-g*yt,k[8]=g*ot-F*tt,k}function s(k){var d=k[0],g=k[1],F=k[2],V=k[3],tt=k[4],ot=k[5],at=k[6],At=k[7],yt=k[8];return d*(yt*tt-ot*At)+g*(-yt*V+ot*at)+F*(At*V-tt*at)}function h(k,d,g){var F=d[0],V=d[1],tt=d[2],ot=d[3],at=d[4],At=d[5],yt=d[6],gt=d[7],bt=d[8],Tt=g[0],Dt=g[1],Ut=g[2],jt=g[3],Vt=g[4],Ht=g[5],re=g[6],pe=g[7],ye=g[8];return k[0]=Tt*F+Dt*ot+Ut*yt,k[1]=Tt*V+Dt*at+Ut*gt,k[2]=Tt*tt+Dt*At+Ut*bt,k[3]=jt*F+Vt*ot+Ht*yt,k[4]=jt*V+Vt*at+Ht*gt,k[5]=jt*tt+Vt*At+Ht*bt,k[6]=re*F+pe*ot+ye*yt,k[7]=re*V+pe*at+ye*gt,k[8]=re*tt+pe*At+ye*bt,k}function M(k,d,g){var F=d[0],V=d[1],tt=d[2],ot=d[3],at=d[4],At=d[5],yt=d[6],gt=d[7],bt=d[8],Tt=g[0],Dt=g[1];return k[0]=F,k[1]=V,k[2]=tt,k[3]=ot,k[4]=at,k[5]=At,k[6]=Tt*F+Dt*ot+yt,k[7]=Tt*V+Dt*at+gt,k[8]=Tt*tt+Dt*At+bt,k}function O(k,d,g){var F=d[0],V=d[1],tt=d[2],ot=d[3],at=d[4],At=d[5],yt=d[6],gt=d[7],bt=d[8],Tt=Math.sin(g),Dt=Math.cos(g);return k[0]=Dt*F+Tt*ot,k[1]=Dt*V+Tt*at,k[2]=Dt*tt+Tt*At,k[3]=Dt*ot-Tt*F,k[4]=Dt*at-Tt*V,k[5]=Dt*At-Tt*tt,k[6]=yt,k[7]=gt,k[8]=bt,k}function T(k,d,g){var F=g[0],V=g[1];return k[0]=F*d[0],k[1]=F*d[1],k[2]=F*d[2],k[3]=V*d[3],k[4]=V*d[4],k[5]=V*d[5],k[6]=d[6],k[7]=d[7],k[8]=d[8],k}function v(k,d){return k[0]=1,k[1]=0,k[2]=0,k[3]=0,k[4]=1,k[5]=0,k[6]=d[0],k[7]=d[1],k[8]=1,k}function m(k,d){var g=Math.sin(d),F=Math.cos(d);return k[0]=F,k[1]=g,k[2]=0,k[3]=-g,k[4]=F,k[5]=0,k[6]=0,k[7]=0,k[8]=1,k}function C(k,d){return k[0]=d[0],k[1]=0,k[2]=0,k[3]=0,k[4]=d[1],k[5]=0,k[6]=0,k[7]=0,k[8]=1,k}function D(k,d){return k[0]=d[0],k[1]=d[1],k[2]=0,k[3]=d[2],k[4]=d[3],k[5]=0,k[6]=d[4],k[7]=d[5],k[8]=1,k}function Y(k,d){var g=d[0],F=d[1],V=d[2],tt=d[3],ot=g+g,at=F+F,At=V+V,yt=g*ot,gt=F*ot,bt=F*at,Tt=V*ot,Dt=V*at,Ut=V*At,jt=tt*ot,Vt=tt*at,Ht=tt*At;return k[0]=1-bt-Ut,k[3]=gt-Ht,k[6]=Tt+Vt,k[1]=gt+Ht,k[4]=1-yt-Ut,k[7]=Dt-jt,k[2]=Tt-Vt,k[5]=Dt+jt,k[8]=1-yt-bt,k}function Z(k,d){var g=d[0],F=d[1],V=d[2],tt=d[3],ot=d[4],at=d[5],At=d[6],yt=d[7],gt=d[8],bt=d[9],Tt=d[10],Dt=d[11],Ut=d[12],jt=d[13],Vt=d[14],Ht=d[15],re=g*at-F*ot,pe=g*At-V*ot,ye=g*yt-tt*ot,we=F*At-V*at,Re=F*yt-tt*at,He=V*yt-tt*At,pn=gt*jt-bt*Ut,fn=gt*Vt-Tt*Ut,Rn=gt*Ht-Dt*Ut,Cn=bt*Vt-Tt*jt,kn=bt*Ht-Dt*jt,Mn=Tt*Ht-Dt*Vt,Tn=re*Mn-pe*kn+ye*Cn+we*Rn-Re*fn+He*pn;return Tn?(Tn=1/Tn,k[0]=(at*Mn-At*kn+yt*Cn)*Tn,k[1]=(At*Rn-ot*Mn-yt*fn)*Tn,k[2]=(ot*kn-at*Rn+yt*pn)*Tn,k[3]=(V*kn-F*Mn-tt*Cn)*Tn,k[4]=(g*Mn-V*Rn+tt*fn)*Tn,k[5]=(F*Rn-g*kn-tt*pn)*Tn,k[6]=(jt*He-Vt*Re+Ht*we)*Tn,k[7]=(Vt*ye-Ut*He-Ht*pe)*Tn,k[8]=(Ut*Re-jt*ye+Ht*re)*Tn,k):null}function et(k,d,g){return k[0]=2/d,k[1]=0,k[2]=0,k[3]=0,k[4]=-2/g,k[5]=0,k[6]=-1,k[7]=1,k[8]=1,k}function dt(k){return"mat3("+k[0]+", "+k[1]+", "+k[2]+", "+k[3]+", "+k[4]+", "+k[5]+", "+k[6]+", "+k[7]+", "+k[8]+")"}function ht(k){return Math.hypot(k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],k[8])}function St(k,d,g){return k[0]=d[0]+g[0],k[1]=d[1]+g[1],k[2]=d[2]+g[2],k[3]=d[3]+g[3],k[4]=d[4]+g[4],k[5]=d[5]+g[5],k[6]=d[6]+g[6],k[7]=d[7]+g[7],k[8]=d[8]+g[8],k}function wt(k,d,g){return k[0]=d[0]-g[0],k[1]=d[1]-g[1],k[2]=d[2]-g[2],k[3]=d[3]-g[3],k[4]=d[4]-g[4],k[5]=d[5]-g[5],k[6]=d[6]-g[6],k[7]=d[7]-g[7],k[8]=d[8]-g[8],k}function xt(k,d,g){return k[0]=d[0]*g,k[1]=d[1]*g,k[2]=d[2]*g,k[3]=d[3]*g,k[4]=d[4]*g,k[5]=d[5]*g,k[6]=d[6]*g,k[7]=d[7]*g,k[8]=d[8]*g,k}function ft(k,d,g,F){return k[0]=d[0]+g[0]*F,k[1]=d[1]+g[1]*F,k[2]=d[2]+g[2]*F,k[3]=d[3]+g[3]*F,k[4]=d[4]+g[4]*F,k[5]=d[5]+g[5]*F,k[6]=d[6]+g[6]*F,k[7]=d[7]+g[7]*F,k[8]=d[8]+g[8]*F,k}function Bt(k,d){return k[0]===d[0]&&k[1]===d[1]&&k[2]===d[2]&&k[3]===d[3]&&k[4]===d[4]&&k[5]===d[5]&&k[6]===d[6]&&k[7]===d[7]&&k[8]===d[8]}function Rt(k,d){var g=k[0],F=k[1],V=k[2],tt=k[3],ot=k[4],at=k[5],At=k[6],yt=k[7],gt=k[8],bt=d[0],Tt=d[1],Dt=d[2],Ut=d[3],jt=d[4],Vt=d[5],Ht=d[6],re=d[7],pe=d[8];return Math.abs(g-bt)<=E.b*Math.max(1,Math.abs(g),Math.abs(bt))&&Math.abs(F-Tt)<=E.b*Math.max(1,Math.abs(F),Math.abs(Tt))&&Math.abs(V-Dt)<=E.b*Math.max(1,Math.abs(V),Math.abs(Dt))&&Math.abs(tt-Ut)<=E.b*Math.max(1,Math.abs(tt),Math.abs(Ut))&&Math.abs(ot-jt)<=E.b*Math.max(1,Math.abs(ot),Math.abs(jt))&&Math.abs(at-Vt)<=E.b*Math.max(1,Math.abs(at),Math.abs(Vt))&&Math.abs(At-Ht)<=E.b*Math.max(1,Math.abs(At),Math.abs(Ht))&&Math.abs(yt-re)<=E.b*Math.max(1,Math.abs(yt),Math.abs(re))&&Math.abs(gt-pe)<=E.b*Math.max(1,Math.abs(gt),Math.abs(pe))}var Ot=h,X=wt,ut=_("ZxFD"),vt=_("n+fv");function pt(k,d,g){var F=[0,0,0,0,0,0,0,0,0];return rt.fromTranslation(F,g),rt.multiply(k,F,d)}function Et(k,d,g){var F=[0,0,0,0,0,0,0,0,0];return rt.fromRotation(F,g),rt.multiply(k,F,d)}function q(k,d,g){var F=[0,0,0,0,0,0,0,0,0];return rt.fromScaling(F,g),rt.multiply(k,F,d)}function st(k,d,g){return rt.multiply(k,g,d)}function it(k,d){for(var g=k?[].concat(k):[1,0,0,0,1,0,0,0,1],F=0,V=d.length;F<V;F++){var tt=d[F];switch(tt[0]){case"t":pt(g,g,[tt[1],tt[2]]);break;case"s":q(g,g,[tt[1],tt[2]]);break;case"r":Et(g,g,tt[1]);break;case"m":st(g,g,tt[1]);break;default:break}}return g}function z(k,d){return k[0]*d[1]-d[0]*k[1]}function P(k,d,g){var F=ut.angle(k,d),V=z(k,d)>=0;return g?V?Math.PI*2-F:F:V?F:Math.PI*2-F}function H(k,d,g){return g?(k[0]=d[1],k[1]=-1*d[0]):(k[0]=-1*d[1],k[1]=d[0]),k}},"6UX8":function(Fn,Gt,_){"use strict";var rt=_("iTfj"),a=/rgba?\(([\s.,0-9]+)\)/,E=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,e=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,r=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,p=function(T){return/^[r,R,L,l]{1}[\s]*\(/.test(T)},b=function(){var T=document.createElement("i");return T.title="Web Colour Picker",T.style.display="none",document.body.appendChild(T),T},S=function(T,v,m,C){return T[C]+(v[C]-T[C])*m};function l(O){return"#"+j(O[0])+j(O[1])+j(O[2])}var A=function(T){return[parseInt(T.substr(1,2),16),parseInt(T.substr(3,2),16),parseInt(T.substr(5,2),16)]},j=function(T){var v=Math.round(T).toString(16);return v.length===1?"0"+v:v},y=function(T,v){var m=isNaN(Number(v))||v<0?0:v>1?1:Number(v),C=T.length-1,D=Math.floor(C*m),Y=C*m-D,Z=T[D],et=D===C?Z:T[D+1];return l([S(Z,et,Y,0),S(Z,et,Y,1),S(Z,et,Y,2)])},n,s=function(T){if(T[0]==="#"&&T.length===7)return T;n||(n=b()),n.style.color=T;var v=document.defaultView.getComputedStyle(n,"").getPropertyValue("color"),m=a.exec(v),C=m[1].split(/\s*,\s*/).map(function(D){return Number(D)});return v=l(C),v},h=function(T){var v=Object(rt.isString)(T)?T.split("-"):T,m=Object(rt.map)(v,function(C){return A(C.indexOf("#")===-1?s(C):C)});return function(C){return y(m,C)}},M=function(T){if(p(T)){var v,m=void 0;if(T[0]==="l"){var C=E.exec(T),D=+C[1]+90;m=C[2],v="linear-gradient("+D+"deg, "}else if(T[0]==="r"){v="radial-gradient(";var C=e.exec(T);m=C[4]}var Y=m.match(r);return Object(rt.each)(Y,function(Z,et){var dt=Z.split(":");v+=dt[1]+" "+dt[0]*100+"%",et!==Y.length-1&&(v+=", ")}),v+=")",v}return T};Gt.a={rgb2arr:A,gradient:h,toRGB:Object(rt.memoize)(s),toCSSGradient:M}},"7+4w":function(Fn,Gt,_){"use strict";var rt=_("mrSG"),a=_("YuPD"),E=_("zJSt"),e=function(r){Object(rt.b)(p,r);function p(b,S,l,A){var j=r.call(this,b,Object(a.b)({},A,S))||this;return j.type="g2-plot",j.defaultOptions=A,j.adaptor=l,j}return p.prototype.getDefaultOptions=function(){return this.defaultOptions},p.prototype.getSchemaAdaptor=function(){return this.adaptor},p}(E.a)},"711d":function(Fn,Gt){function _(rt){return function(a){return a==null?void 0:a[rt]}}Fn.exports=_},"7IPS":function(Fn,Gt,_){"use strict";Gt.a=function(rt,a,E,e,r){for(var p=rt.children,b,S=-1,l=p.length,A=rt.value&&(r-E)/rt.value;++S<l;)b=p[S],b.x0=a,b.x1=e,b.y0=E,b.y1=E+=b.value*A}},"7ZbV":function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return D});var rt=_("mrSG"),a=_("zJSt"),E=_("YuPD"),e=_("iTfj"),r=_("w02o"),p=_("tKoa"),b="first-axes-view",S="second-axes-view",l="series-field-key";function A(Y,Z,et,dt,ht){var St=[];Z.forEach(function(Ot){dt.forEach(function(X){var ut,vt=(ut={},ut[Y]=X[Y],ut[et]=Ot,ut[Ot]=X[Ot],ut);St.push(vt)})});var wt=Object.values(Object(e.groupBy)(St,et)),xt=wt[0],ft=xt===void 0?[]:xt,Bt=wt[1],Rt=Bt===void 0?[]:Bt;return ht?[ft.reverse(),Rt.reverse()]:[ft,Rt]}function j(Y){return Y!=="vertical"}function y(Y,Z,et){var dt=Z[0],ht=Z[1],St=dt.autoPadding,wt=ht.autoPadding,xt=Y.__axisPosition,ft=xt.layout,Bt=xt.position;if(j(ft)&&Bt==="top"&&(dt.autoPadding=et.instance(St.top,0,St.bottom,St.left),ht.autoPadding=et.instance(wt.top,St.left,wt.bottom,0)),j(ft)&&Bt==="bottom"&&(dt.autoPadding=et.instance(St.top,St.right/2+5,St.bottom,St.left),ht.autoPadding=et.instance(wt.top,wt.right,wt.bottom,St.right/2+5)),!j(ft)&&Bt==="bottom"){var Rt=St.left>=wt.left?St.left:wt.left;dt.autoPadding=et.instance(St.top,St.right,St.bottom/2+5,Rt),ht.autoPadding=et.instance(St.bottom/2+5,wt.right,wt.bottom,Rt)}if(!j(ft)&&Bt==="top"){var Rt=St.left>=wt.left?St.left:wt.left;dt.autoPadding=et.instance(St.top,St.right,0,Rt),ht.autoPadding=et.instance(0,wt.right,St.top,Rt)}}function n(Y){var Z=Y.chart,et=Y.options,dt=et.data,ht=et.xField,St=et.yField,wt=et.color,xt=et.barStyle,ft=et.widthRatio,Bt=et.legend,Rt=et.layout,Ot=A(ht,St,l,dt,j(Rt));Bt?Z.legend(l,Bt):Bt===!1&&Z.legend(!1);var X,ut,vt=Ot[0],pt=Ot[1];j(Rt)?(X=Z.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:b}),X.coordinate().transpose().reflect("x"),ut=Z.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:S}),ut.coordinate().transpose(),X.data(vt),ut.data(pt)):(X=Z.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:b}),ut=Z.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:S}),ut.coordinate().reflect("y").rotate(Math.PI*0),X.data(vt),ut.data(pt));var Et=Object(E.b)({},Y,{chart:X,options:{widthRatio:ft,xField:ht,yField:St[0],seriesField:l,interval:{color:wt,style:xt}}});Object(p.c)(Et);var q=Object(E.b)({},Y,{chart:ut,options:{xField:ht,yField:St[1],seriesField:l,widthRatio:ft,interval:{color:wt,style:xt}}});return Object(p.c)(q),Y}function s(Y){var Z,et,dt,ht=Y.options,St=Y.chart,wt=ht.xAxis,xt=ht.yAxis,ft=ht.xField,Bt=ht.yField,Rt=Object(E.d)(St,b),Ot=Object(E.d)(St,S),X={};return Object(e.keys)((ht==null?void 0:ht.meta)||{}).map(function(ut){Object(e.get)(ht==null?void 0:ht.meta,[ut,"alias"])&&(X[ut]=ht.meta[ut].alias)}),St.scale((Z={},Z[l]={sync:!0,formatter:function(vt){return Object(e.get)(X,vt,vt)}},Z)),Object(r.f)((et={},et[ft]=wt,et[Bt[0]]=xt[Bt[0]],et))(Object(E.b)({},Y,{chart:Rt})),Object(r.f)((dt={},dt[ft]=wt,dt[Bt[1]]=xt[Bt[1]],dt))(Object(E.b)({},Y,{chart:Ot})),Y}function h(Y){var Z=Y.chart,et=Y.options,dt=et.xAxis,ht=et.yAxis,St=et.xField,wt=et.yField,xt=et.layout,ft=Object(E.d)(Z,b),Bt=Object(E.d)(Z,S);return Bt.axis(St,!1),dt===!1?ft.axis(St,!1):ft.axis(St,Object(rt.a)({position:j(xt)?"top":"bottom"},dt)),ht===!1?(ft.axis(wt[0],!1),Bt.axis(wt[1],!1)):(ft.axis(wt[0],ht[wt[0]]),Bt.axis(wt[1],ht[wt[1]])),Z.__axisPosition={position:ft.getOptions().axes[St].position,layout:xt},Y}function M(Y){var Z=Y.chart;return Object(r.c)(Object(E.b)({},Y,{chart:Object(E.d)(Z,b)})),Object(r.c)(Object(E.b)({},Y,{chart:Object(E.d)(Z,S)})),Y}function O(Y){var Z=Y.chart,et=Y.options,dt=et.yField,ht=et.yAxis;return Object(r.e)(Object(E.b)({},Y,{chart:Object(E.d)(Z,b),options:{yAxis:ht[dt[0]]}})),Object(r.e)(Object(E.b)({},Y,{chart:Object(E.d)(Z,S),options:{yAxis:ht[dt[1]]}})),Y}function T(Y){var Z=Y.chart;return Object(r.j)(Object(E.b)({},Y,{chart:Object(E.d)(Z,b)})),Object(r.j)(Object(E.b)({},Y,{chart:Object(E.d)(Z,S)})),Y}function v(Y){var Z=Y.chart;return Object(r.a)(Object(E.b)({},Y,{chart:Object(E.d)(Z,b)})),Object(r.a)(Object(E.b)({},Y,{chart:Object(E.d)(Z,S)})),Y}function m(Y){var Z=Y.chart,et=Y.options,dt=et.label,ht=et.yField,St=Object(E.d)(Z,b),wt=Object(E.d)(Z,S),xt=Object(E.c)(St,"interval"),ft=Object(E.c)(wt,"interval");if(!dt)xt.label(!1),ft.label(!1);else{var Bt=dt.callback,Rt=Object(rt.c)(dt,["callback"]);xt.label({fields:[ht[0]],callback:Bt,cfg:Object(E.o)(Rt)}),ft.label({fields:[ht[1]],callback:Bt,cfg:Object(E.o)(Rt)})}return Y}function C(Y){return Object(E.e)(n,s,h,O,T,m,r.k,M,v)(Y)}var D=function(Y){Object(rt.b)(Z,Y);function Z(){var et=Y!==null&&Y.apply(this,arguments)||this;return et.type="bidirectional-bar",et}return Z.prototype.getDefaultOptions=function(){return Object(E.b)({},Y.prototype.getDefaultOptions.call(this),{syncViewPadding:y})},Z.prototype.getSchemaAdaptor=function(){return C},Z}(a.a)},"7cv3":function(Fn,Gt,_){"use strict";_.d(Gt,"b",function(){return a}),_.d(Gt,"c",function(){return E}),_.d(Gt,"a",function(){return e});var rt=_("iTfj"),a="x",E="y",e={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(p,b){return""+Object(rt.get)(b,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}}},"7s0d":function(Fn,Gt,_){"use strict";var rt=_("FH2j");_.d(Gt,"getAdjust",function(){return rt.getAdjust});var a=_("Qci9"),E=_("lOPJ"),e=_("KavR"),r=_("8FoI"),p=_("96lr"),b=_("WbAE"),S=_.n(b);Object(rt.registerAdjust)("Dodge",E.a),Object(rt.registerAdjust)("Jitter",e.a),Object(rt.registerAdjust)("Stack",r.a),Object(rt.registerAdjust)("Symmetric",p.a)},"8FoI":function(Fn,Gt,_){"use strict";var rt=_("AA7f"),a=_("iTfj"),E=_("Qci9"),e=a.Cache,r=function(p){Object(rt.b)(b,p);function b(S){var l=p.call(this,S)||this,A=S.adjustNames,j=A===void 0?["y"]:A,y=S.height,n=y===void 0?NaN:y,s=S.size,h=s===void 0?10:s,M=S.reverseOrder,O=M===void 0?!1:M;return l.adjustNames=j,l.height=n,l.size=h,l.reverseOrder=O,l}return b.prototype.process=function(S){var l=this,A=l.yField,j=l.reverseOrder,y=A?this.processStack(S):this.processOneDimStack(S);return j?this.reverse(y):y},b.prototype.reverse=function(S){return S.slice(0).reverse()},b.prototype.processStack=function(S){var l=this,A=l.xField,j=l.yField,y=l.reverseOrder,n=y?this.reverse(S):S,s=new e,h=new e;return n.map(function(M){return M.map(function(O){var T,v=a.get(O,A,0),m=a.get(O,[j]),C=v.toString();if(m=a.isArray(m)?m[1]:m,!a.isNil(m)){var D=m>=0?s:h;D.has(C)||D.set(C,0);var Y=D.get(C),Z=m+Y;return D.set(C,Z),Object(rt.a)(Object(rt.a)({},O),(T={},T[j]=[Y,Z],T))}return O})})},b.prototype.processOneDimStack=function(S){var l=this,A=this,j=A.xField,y=A.height,n=A.reverseOrder,s="y",h=n?this.reverse(S):S,M=new e;return h.map(function(O){return O.map(function(T){var v,m=l.size,C=T[j],D=m*2/y;M.has(C)||M.set(C,D/2);var Y=M.get(C);return M.set(C,Y+D),Object(rt.a)(Object(rt.a)({},T),(v={},v[s]=Y,v))})})},b}(E.a);Gt.a=r},"8vsG":function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return A}),_.d(Gt,"b",function(){return Ut}),_.d(Gt,"c",function(){return b}),_.d(Gt,"d",function(){return Mn});var rt={};_.r(rt),_.d(rt,"default",function(){return it}),_.d(rt,"assign",function(){return m}),_.d(rt,"format",function(){return Et}),_.d(rt,"parse",function(){return q}),_.d(rt,"defaultI18n",function(){return et}),_.d(rt,"setGlobalDateI18n",function(){return ht}),_.d(rt,"setGlobalDateMasks",function(){return pt});var a=_("iTfj"),E={};function e(oe){return E[oe]}function r(oe,Kt){E[oe]=Kt}var p=function(){function oe(Kt){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=Kt,this.initCfg(),this.init()}return oe.prototype.translate=function(Kt){return Kt},oe.prototype.change=function(Kt){Object(a.assign)(this.__cfg__,Kt),this.init()},oe.prototype.clone=function(){return this.constructor(this.__cfg__)},oe.prototype.getTicks=function(){var Kt=this;return Object(a.map)(this.ticks,function(te,Oe){return Object(a.isObject)(te)?te:{text:Kt.getText(te,Oe),tickValue:te,value:Kt.scale(te)}})},oe.prototype.getText=function(Kt,te){var Oe=this.formatter,Qe=Oe?Oe(Kt,te):Kt;return Object(a.isNil)(Qe)||!Object(a.isFunction)(Qe.toString)?"":Qe.toString()},oe.prototype.getConfig=function(Kt){return this.__cfg__[Kt]},oe.prototype.init=function(){Object(a.assign)(this,this.__cfg__),this.setDomain(),Object(a.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},oe.prototype.initCfg=function(){},oe.prototype.setDomain=function(){},oe.prototype.calculateTicks=function(){var Kt=this.tickMethod,te=[];if(Object(a.isString)(Kt)){var Oe=e(Kt);if(!Oe)throw new Error("There is no method to to calculate ticks!");te=Oe(this)}else Object(a.isFunction)(Kt)&&(te=Kt(this));return te},oe.prototype.rangeMin=function(){return Object(a.head)(this.range)},oe.prototype.rangeMax=function(){return Object(a.last)(this.range)},oe.prototype.calcPercent=function(Kt,te,Oe){return Object(a.isNumber)(Kt)?(Kt-te)/(Oe-te):NaN},oe.prototype.calcValue=function(Kt,te,Oe){return te+Kt*(Oe-te)},oe}(),b=p,S=_("mrSG"),l=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="cat",te.isCategory=!0,te.cache=new Map,te}return Kt.prototype.translate=function(te){if(this.cache.has(te))return this.cache.get(te);var Oe=Object(a.indexOf)(this.values,te);return Oe===-1&&(Oe=Object(a.isNumber)(te)?te:NaN),this.cache.set(te,Oe),Oe},Kt.prototype.scale=function(te){var Oe=this.translate(te),Qe=this.calcPercent(Oe,this.min,this.max);return this.calcValue(Qe,this.rangeMin(),this.rangeMax())},Kt.prototype.invert=function(te){var Oe=this.max-this.min,Qe=this.calcPercent(te,this.rangeMin(),this.rangeMax()),On=Math.round(Oe*Qe)+this.min;return On<this.min||On>this.max?NaN:this.values[On]},Kt.prototype.getText=function(te){for(var Oe=[],Qe=1;Qe<arguments.length;Qe++)Oe[Qe-1]=arguments[Qe];var On=te;return Object(a.isNumber)(te)&&!this.values.includes(te)&&(On=this.values[On]),oe.prototype.getText.apply(this,Object(S.d)([On],Oe))},Kt.prototype.initCfg=function(){this.tickMethod="cat"},Kt.prototype.setDomain=function(){if(Object(a.isNil)(this.getConfig("min"))&&(this.min=0),Object(a.isNil)(this.getConfig("max"))){var te=this.values.length;this.max=te>1?te-1:te}this.cache&&this.cache.clear()},Kt}(b),A=l,j=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,y="[1-9]\\d?",n="\\d\\d",s="\\d{3}",h="\\d{4}",M="[^\\s]+",O=/\[([^]*?)\]/gm;function T(oe,Kt){for(var te=[],Oe=0,Qe=oe.length;Oe<Qe;Oe++)te.push(oe[Oe].substr(0,Kt));return te}var v=function(Kt){return function(te,Oe){var Qe=Oe[Kt].map(function(Vn){return Vn.toLowerCase()}),On=Qe.indexOf(te.toLowerCase());return On>-1?On:null}};function m(oe){for(var Kt=[],te=1;te<arguments.length;te++)Kt[te-1]=arguments[te];for(var Oe=0,Qe=Kt;Oe<Qe.length;Oe++){var On=Qe[Oe];for(var Vn in On)oe[Vn]=On[Vn]}return oe}var C=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],D=["January","February","March","April","May","June","July","August","September","October","November","December"],Y=T(D,3),Z=T(C,3),et={dayNamesShort:Z,dayNames:C,monthNamesShort:Y,monthNames:D,amPm:["am","pm"],DoFn:function(Kt){return Kt+["th","st","nd","rd"][Kt%10>3?0:(Kt-Kt%10!=10?1:0)*Kt%10]}},dt=m({},et),ht=function(Kt){return dt=m(dt,Kt)},St=function(Kt){return Kt.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},wt=function(Kt,te){for(te===void 0&&(te=2),Kt=String(Kt);Kt.length<te;)Kt="0"+Kt;return Kt},xt={D:function(Kt){return String(Kt.getDate())},DD:function(Kt){return wt(Kt.getDate())},Do:function(Kt,te){return te.DoFn(Kt.getDate())},d:function(Kt){return String(Kt.getDay())},dd:function(Kt){return wt(Kt.getDay())},ddd:function(Kt,te){return te.dayNamesShort[Kt.getDay()]},dddd:function(Kt,te){return te.dayNames[Kt.getDay()]},M:function(Kt){return String(Kt.getMonth()+1)},MM:function(Kt){return wt(Kt.getMonth()+1)},MMM:function(Kt,te){return te.monthNamesShort[Kt.getMonth()]},MMMM:function(Kt,te){return te.monthNames[Kt.getMonth()]},YY:function(Kt){return wt(String(Kt.getFullYear()),4).substr(2)},YYYY:function(Kt){return wt(Kt.getFullYear(),4)},h:function(Kt){return String(Kt.getHours()%12||12)},hh:function(Kt){return wt(Kt.getHours()%12||12)},H:function(Kt){return String(Kt.getHours())},HH:function(Kt){return wt(Kt.getHours())},m:function(Kt){return String(Kt.getMinutes())},mm:function(Kt){return wt(Kt.getMinutes())},s:function(Kt){return String(Kt.getSeconds())},ss:function(Kt){return wt(Kt.getSeconds())},S:function(Kt){return String(Math.round(Kt.getMilliseconds()/100))},SS:function(Kt){return wt(Math.round(Kt.getMilliseconds()/10),2)},SSS:function(Kt){return wt(Kt.getMilliseconds(),3)},a:function(Kt,te){return Kt.getHours()<12?te.amPm[0]:te.amPm[1]},A:function(Kt,te){return Kt.getHours()<12?te.amPm[0].toUpperCase():te.amPm[1].toUpperCase()},ZZ:function(Kt){var te=Kt.getTimezoneOffset();return(te>0?"-":"+")+wt(Math.floor(Math.abs(te)/60)*100+Math.abs(te)%60,4)},Z:function(Kt){var te=Kt.getTimezoneOffset();return(te>0?"-":"+")+wt(Math.floor(Math.abs(te)/60),2)+":"+wt(Math.abs(te)%60,2)}},ft=function(Kt){return+Kt-1},Bt=[null,y],Rt=[null,M],Ot=["isPm",M,function(oe,Kt){var te=oe.toLowerCase();return te===Kt.amPm[0]?0:te===Kt.amPm[1]?1:null}],X=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(oe){var Kt=(oe+"").match(/([+-]|\d\d)/gi);if(Kt){var te=+Kt[1]*60+parseInt(Kt[2],10);return Kt[0]==="+"?te:-te}return 0}],ut={D:["day",y],DD:["day",n],Do:["day",y+M,function(oe){return parseInt(oe,10)}],M:["month",y,ft],MM:["month",n,ft],YY:["year",n,function(oe){var Kt=new Date,te=+(""+Kt.getFullYear()).substr(0,2);return+(""+(+oe>68?te-1:te)+oe)}],h:["hour",y,void 0,"isPm"],hh:["hour",n,void 0,"isPm"],H:["hour",y],HH:["hour",n],m:["minute",y],mm:["minute",n],s:["second",y],ss:["second",n],YYYY:["year",h],S:["millisecond","\\d",function(oe){return+oe*100}],SS:["millisecond",n,function(oe){return+oe*10}],SSS:["millisecond",s],d:Bt,dd:Bt,ddd:Rt,dddd:Rt,MMM:["month",M,v("monthNamesShort")],MMMM:["month",M,v("monthNames")],a:Ot,A:Ot,ZZ:X,Z:X},vt={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},pt=function(Kt){return m(vt,Kt)},Et=function(Kt,te,Oe){if(te===void 0&&(te=vt.default),Oe===void 0&&(Oe={}),typeof Kt=="number"&&(Kt=new Date(Kt)),Object.prototype.toString.call(Kt)!=="[object Date]"||isNaN(Kt.getTime()))throw new Error("Invalid Date pass to format");te=vt[te]||te;var Qe=[];te=te.replace(O,function(Vn,Xn){return Qe.push(Xn),"@@@"});var On=m(m({},dt),Oe);return te=te.replace(j,function(Vn){return xt[Vn](Kt,On)}),te.replace(/@@@/g,function(){return Qe.shift()})};function q(oe,Kt,te){if(te===void 0&&(te={}),typeof Kt!="string")throw new Error("Invalid format in fecha parse");if(Kt=vt[Kt]||Kt,oe.length>1e3)return null;var Oe=new Date,Qe={year:Oe.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},On=[],Vn=[],Xn=Kt.replace(O,function(Ir,Lr){return Vn.push(St(Lr)),"@@@"}),$e={},rn={};Xn=St(Xn).replace(j,function(Ir){var Lr=ut[Ir],Pr=Lr[0],Dr=Lr[1],ri=Lr[3];if($e[Pr])throw new Error("Invalid format. "+Pr+" specified twice in format");return $e[Pr]=!0,ri&&(rn[ri]=!0),On.push(Lr),"("+Dr+")"}),Object.keys(rn).forEach(function(Ir){if(!$e[Ir])throw new Error("Invalid format. "+Ir+" is required in specified format")}),Xn=Xn.replace(/@@@/g,function(){return Vn.shift()});var on=oe.match(new RegExp(Xn,"i"));if(!on)return null;for(var $n=m(m({},dt),te),vr=1;vr<on.length;vr++){var ar=On[vr-1],rr=ar[0],Fr=ar[2],Ar=Fr?Fr(on[vr],$n):+on[vr];if(Ar==null)return null;Qe[rr]=Ar}Qe.isPm===1&&Qe.hour!=null&&+Qe.hour!=12?Qe.hour=+Qe.hour+12:Qe.isPm===0&&+Qe.hour==12&&(Qe.hour=0);for(var wr=new Date(Qe.year,Qe.month,Qe.day,Qe.hour,Qe.minute,Qe.second,Qe.millisecond),xr=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],vr=0,Er=xr.length;vr<Er;vr++)if($e[xr[vr][0]]&&Qe[xr[vr][0]]!==wr[xr[vr][1]]())return null;return Qe.timezoneOffset==null?wr:new Date(Date.UTC(Qe.year,Qe.month,Qe.day,Qe.hour,Qe.minute-Qe.timezoneOffset,Qe.second,Qe.millisecond))}var st={format:Et,parse:q,defaultI18n:et,setGlobalDateI18n:ht,setGlobalDateMasks:pt},it=st,z=function(oe){return function(Kt,te,Oe,Qe){for(var On=Object(a.isNil)(Oe)?0:Oe,Vn=Object(a.isNil)(Qe)?Kt.length:Qe;On<Vn;){var Xn=On+Vn>>>1;oe(Kt[Xn])>te?Vn=Xn:On=Xn+1}return On}},P="format";function H(oe,Kt){var te=rt[P]||it[P];return te(oe,Kt)}function k(oe){return Object(a.isString)(oe)&&(oe.indexOf("T")>0?oe=new Date(oe).getTime():oe=new Date(oe.replace(/-/gi,"/")).getTime()),Object(a.isDate)(oe)&&(oe=oe.getTime()),oe}var d=1e3,g=60*d,F=60*g,V=24*F,tt=V*31,ot=V*365,at=[["HH:mm:ss",d],["HH:mm:ss",d*10],["HH:mm:ss",d*30],["HH:mm",g],["HH:mm",g*10],["HH:mm",g*30],["HH",F],["HH",F*6],["HH",F*12],["YYYY-MM-DD",V],["YYYY-MM-DD",V*4],["YYYY-WW",V*7],["YYYY-MM",tt],["YYYY-MM",tt*4],["YYYY-MM",tt*6],["YYYY",V*380]];function At(oe,Kt,te){var Oe=(Kt-oe)/te,Qe=z(function(Vn){return Vn[1]})(at,Oe)-1,On=at[Qe];return Qe<0?On=at[0]:Qe>=at.length&&(On=Object(a.last)(at)),On}var yt=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="timeCat",te}return Kt.prototype.translate=function(te){te=k(te);var Oe=this.values.indexOf(te);return Oe===-1&&(Object(a.isNumber)(te)&&te<this.values.length?Oe=te:Oe=NaN),Oe},Kt.prototype.getText=function(te,Oe){var Qe=this.translate(te);if(Qe>-1){var On=this.values[Qe],Vn=this.formatter;return On=Vn?Vn(On,Oe):H(On,this.mask),On}return te},Kt.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},Kt.prototype.setDomain=function(){var te=this.values;Object(a.each)(te,function(Oe,Qe){te[Qe]=k(Oe)}),te.sort(function(Oe,Qe){return Oe-Qe}),oe.prototype.setDomain.call(this)},Kt}(A),gt=yt,bt=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.isContinuous=!0,te}return Kt.prototype.scale=function(te){if(Object(a.isNil)(te))return NaN;var Oe=this.rangeMin(),Qe=this.rangeMax(),On=this.max,Vn=this.min;if(On===Vn)return Oe;var Xn=this.getScalePercent(te);return Oe+Xn*(Qe-Oe)},Kt.prototype.init=function(){oe.prototype.init.call(this);var te=this.ticks,Oe=Object(a.head)(te),Qe=Object(a.last)(te);Oe<this.min&&(this.min=Oe),Qe>this.max&&(this.max=Qe),Object(a.isNil)(this.minLimit)||(this.min=Oe),Object(a.isNil)(this.maxLimit)||(this.max=Qe)},Kt.prototype.setDomain=function(){var te=Object(a.getRange)(this.values),Oe=te.min,Qe=te.max;Object(a.isNil)(this.min)&&(this.min=Oe),Object(a.isNil)(this.max)&&(this.max=Qe),this.min>this.max&&(this.min=Oe,this.max=Qe)},Kt.prototype.calculateTicks=function(){var te=this,Oe=oe.prototype.calculateTicks.call(this);return this.nice||(Oe=Object(a.filter)(Oe,function(Qe){return Qe>=te.min&&Qe<=te.max})),Oe},Kt.prototype.getScalePercent=function(te){var Oe=this.max,Qe=this.min;return(te-Qe)/(Oe-Qe)},Kt.prototype.getInvertPercent=function(te){return(te-this.rangeMin())/(this.rangeMax()-this.rangeMin())},Kt}(b),Tt=bt,Dt=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="linear",te.isLinear=!0,te}return Kt.prototype.invert=function(te){var Oe=this.getInvertPercent(te);return this.min+Oe*(this.max-this.min)},Kt.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},Kt}(Tt),Ut=Dt;function jt(oe,Kt){var te=Math.E,Oe;return Kt>=0?Oe=Math.pow(te,Math.log(Kt)/oe):Oe=Math.pow(te,Math.log(-Kt)/oe)*-1,Oe}function Vt(oe,Kt){return oe===1?1:Math.log(Kt)/Math.log(oe)}function Ht(oe,Kt,te){Object(a.isNil)(te)&&(te=Math.max.apply(null,oe));var Oe=te;return Object(a.each)(oe,function(Qe){Qe>0&&Qe<Oe&&(Oe=Qe)}),Oe===te&&(Oe=te/Kt),Oe>1&&(Oe=1),Oe}var re=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="log",te}return Kt.prototype.invert=function(te){var Oe=this.base,Qe=Vt(Oe,this.max),On=this.rangeMin(),Vn=this.rangeMax()-On,Xn,$e=this.positiveMin;if($e){if(te===0)return 0;Xn=Vt(Oe,$e/Oe);var rn=1/(Qe-Xn)*Vn;if(te<rn)return te/rn*$e}else Xn=Vt(Oe,this.min);var on=(te-On)/Vn,$n=on*(Qe-Xn)+Xn;return Math.pow(Oe,$n)},Kt.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},Kt.prototype.setDomain=function(){oe.prototype.setDomain.call(this);var te=this.min;if(te<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");te===0&&(this.positiveMin=Ht(this.values,this.base,this.max))},Kt.prototype.getScalePercent=function(te){var Oe=this.max,Qe=this.min;if(Oe===Qe||te<=0)return 0;var On=this.base,Vn=this.positiveMin;Vn&&(Qe=Vn*1/On);var Xn;return te<Vn?Xn=te/Vn/(Vt(On,Oe)-Vt(On,Qe)):Xn=(Vt(On,te)-Vt(On,Qe))/(Vt(On,Oe)-Vt(On,Qe)),Xn},Kt}(Tt),pe=re,ye=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="pow",te}return Kt.prototype.invert=function(te){var Oe=this.getInvertPercent(te),Qe=this.exponent,On=jt(Qe,this.max),Vn=jt(Qe,this.min),Xn=Oe*(On-Vn)+Vn,$e=Xn>=0?1:-1;return Math.pow(Xn,Qe)*$e},Kt.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},Kt.prototype.getScalePercent=function(te){var Oe=this.max,Qe=this.min;if(Oe===Qe)return 0;var On=this.exponent,Vn=(jt(On,te)-jt(On,Qe))/(jt(On,Oe)-jt(On,Qe));return Vn},Kt}(Tt),we=ye,Re=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="time",te}return Kt.prototype.getText=function(te,Oe){var Qe=this.translate(te),On=this.formatter;return On?On(Qe,Oe):H(Qe,this.mask)},Kt.prototype.scale=function(te){var Oe=te;return(Object(a.isString)(Oe)||Object(a.isDate)(Oe))&&(Oe=this.translate(Oe)),oe.prototype.scale.call(this,Oe)},Kt.prototype.translate=function(te){return k(te)},Kt.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},Kt.prototype.setDomain=function(){var te=this.values,Oe=this.getConfig("min"),Qe=this.getConfig("max");if((!Object(a.isNil)(Oe)||!Object(a.isNumber)(Oe))&&(this.min=this.translate(this.min)),(!Object(a.isNil)(Qe)||!Object(a.isNumber)(Qe))&&(this.max=this.translate(this.max)),te&&te.length){var On=[],Vn=Infinity,Xn=Vn,$e=0;Object(a.each)(te,function(rn){var on=k(rn);if(isNaN(on))throw new TypeError("Invalid Time: "+rn+" in time scale!");Vn>on?(Xn=Vn,Vn=on):Xn>on&&(Xn=on),$e<on&&($e=on),On.push(on)}),te.length>1&&(this.minTickInterval=Xn-Vn),Object(a.isNil)(Oe)&&(this.min=Vn),Object(a.isNil)(Qe)&&(this.max=$e)}},Kt}(Ut),He=Re,pn=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="quantize",te}return Kt.prototype.invert=function(te){var Oe=this.ticks,Qe=Oe.length,On=this.getInvertPercent(te),Vn=Math.floor(On*(Qe-1));if(Vn>=Qe-1)return Object(a.last)(Oe);if(Vn<0)return Object(a.head)(Oe);var Xn=Oe[Vn],$e=Oe[Vn+1],rn=Vn/(Qe-1),on=(Vn+1)/(Qe-1);return Xn+(On-rn)/(on-rn)*($e-Xn)},Kt.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},Kt.prototype.calculateTicks=function(){var te=oe.prototype.calculateTicks.call(this);return this.nice||(Object(a.last)(te)!==this.max&&te.push(this.max),Object(a.head)(te)!==this.min&&te.unshift(this.min)),te},Kt.prototype.getScalePercent=function(te){var Oe=this.ticks;if(te<Object(a.head)(Oe))return 0;if(te>Object(a.last)(Oe))return 1;var Qe=0;return Object(a.each)(Oe,function(On,Vn){if(te>=On)Qe=Vn;else return!1}),Qe/(Oe.length-1)},Kt}(Tt),fn=pn,Rn=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="quantile",te}return Kt.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},Kt}(fn),Cn=Rn,kn={};function Mn(oe){return kn[oe]}function Tn(oe,Kt){if(Mn(oe))throw new Error("type '"+oe+"' existed.");kn[oe]=Kt}var Un=function(oe){Object(S.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="identity",te.isIdentity=!0,te}return Kt.prototype.calculateTicks=function(){return this.values},Kt.prototype.scale=function(te){return this.values[0]!==te&&Object(a.isNumber)(te)?te:this.range[0]},Kt.prototype.invert=function(te){var Oe=this.range;return te<Oe[0]||te>Oe[1]?NaN:this.values[0]},Kt}(b),Kn=Un,tr=[1,5,2,2.5,4,3],or=[1,5,2,2.5,4,3,1.5,7,6,8,9],nr=Number.EPSILON*100;function er(oe,Kt){return(oe%Kt+Kt)%Kt}function Sr(oe,Kt,te,Oe,Qe,On){var Vn=Object(a.size)(Kt),Xn=Object(a.indexOf)(Kt,oe),$e=0,rn=er(Oe,On);return(rn<nr||On-rn<nr)&&Oe<=0&&Qe>=0&&($e=1),1-Xn/(Vn-1)-te+$e}function Vr(oe,Kt,te){var Oe=Object(a.size)(Kt),Qe=Object(a.indexOf)(Kt,oe),On=1;return 1-Qe/(Oe-1)-te+On}function ti(oe,Kt,te,Oe,Qe,On){var Vn=(oe-1)/(On-Qe),Xn=(Kt-1)/(Math.max(On,Oe)-Math.min(te,Qe));return 2-Math.max(Vn/Xn,Xn/Vn)}function hi(oe,Kt){return oe>=Kt?2-(oe-1)/(Kt-1):1}function Fi(oe,Kt,te,Oe){var Qe=Kt-oe;return 1-.5*(Math.pow(Kt-Oe,2)+Math.pow(oe-te,2))/Math.pow(.1*Qe,2)}function to(oe,Kt,te){var Oe=Kt-oe;if(te>Oe){var Qe=(te-Oe)/2;return 1-Math.pow(Qe,2)/Math.pow(.1*Oe,2)}return 1}function si(){return 1}function Ti(oe,Kt,te,Oe,Qe,On){if(te===void 0&&(te=5),Oe===void 0&&(Oe=!0),Qe===void 0&&(Qe=tr),On===void 0&&(On=[.25,.2,.5,.05]),typeof oe!="number"||typeof Kt!="number")return{min:0,max:0,ticks:[]};if(oe===Kt||te===1)return{min:oe,max:Kt,ticks:[oe]};for(var Vn={score:-2,lmin:0,lmax:0,lstep:0},Xn=1;Xn<Infinity;){for(var $e=0,rn=Qe;$e<rn.length;$e++){var on=rn[$e],$n=Vr(on,Qe,Xn);if(Number.isNaN($n))throw new Error("NaN");if(On[0]*$n+On[1]+On[2]+On[3]<Vn.score){Xn=Infinity;break}for(var vr=2;vr<Infinity;){var ar=hi(vr,te);if(On[0]*$n+On[1]+On[2]*ar+On[3]<Vn.score)break;for(var rr=(Kt-oe)/(vr+1)/Xn/on,Fr=Math.ceil(Math.log10(rr));Fr<Infinity;){var Ar=Xn*on*Math.pow(10,Fr),wr=to(oe,Kt,Ar*(vr-1));if(On[0]*$n+On[1]*wr+On[2]*ar+On[3]<Vn.score)break;var xr=Math.floor(Kt/Ar)*Xn-(vr-1)*Xn,Er=Math.ceil(oe/Ar)*Xn;if(xr>Er){Fr=Fr+1;continue}for(var Ir=xr;Ir<=Er;Ir=Ir+1){var Lr=Ir*(Ar/Xn),Pr=Lr+Ar*(vr-1),Dr=Ar,ri=Sr(on,Qe,Xn,Lr,Pr,Dr),vi=Fi(oe,Kt,Lr,Pr),ii=ti(vr,te,oe,Kt,Lr,Pr),Si=si(),Ui=On[0]*ri+On[1]*vi+On[2]*ii+On[3]*Si;Ui>Vn.score&&(!Oe||Lr<=oe&&Pr>=Kt)&&(Vn.lmin=Lr,Vn.lmax=Pr,Vn.lstep=Dr,Vn.score=Ui)}Fr=Fr+1}vr=vr+1}}Xn=Xn+1}for(var Yi=Number.isInteger(Vn.lstep)?0:Math.ceil(Math.abs(Math.log10(Vn.lstep))),Bi=[],Di=Vn.lmin;Di<=Vn.lmax;Di+=Vn.lstep)Bi.push(Di);var ve=Yi?Object(a.map)(Bi,function(G){return Number.parseFloat(G.toFixed(Yi))}):Bi;return{min:Math.min(oe,Object(a.head)(ve)),max:Math.max(Kt,Object(a.last)(ve)),ticks:ve}}function _i(oe){var Kt=oe.values,te=oe.tickInterval,Oe=oe.tickCount,Qe=Kt;if(Object(a.isNumber)(te))return Object(a.filter)(Qe,function(rn,on){return on%te==0});var On=oe.min,Vn=oe.max;if(Object(a.isNil)(On)&&(On=0),Object(a.isNil)(Vn)&&(Vn=Kt.length-1),Object(a.isNumber)(Oe)&&Oe<Vn-On){var Xn=Ti(On,Vn,Oe,!1,[1,2,5,3,4,7,6,8,9]).ticks,$e=Object(a.filter)(Xn,function(rn){return rn>=On&&rn<=Vn});return $e.map(function(rn){return Kt[rn]})}return Kt.slice(On,Vn+1)}function Li(oe){var Kt=oe.min,te=oe.max,Oe=oe.nice,Qe=oe.tickCount,On=new pr;return On.domain([Kt,te]),Oe&&On.nice(Qe),On.ticks(Qe)}var Vi=5,ro=Math.sqrt(50),jr=Math.sqrt(10),Ji=Math.sqrt(2),pr=function(){function oe(){this._domain=[0,1]}return oe.prototype.domain=function(Kt){return Kt?(this._domain=Array.from(Kt,Number),this):this._domain.slice()},oe.prototype.nice=function(Kt){var te,Oe;Kt===void 0&&(Kt=Vi);var Qe=this._domain.slice(),On=0,Vn=this._domain.length-1,Xn=this._domain[On],$e=this._domain[Vn],rn;return $e<Xn&&(te=[$e,Xn],Xn=te[0],$e=te[1],Oe=[Vn,On],On=Oe[0],Vn=Oe[1]),rn=Br(Xn,$e,Kt),rn>0?(Xn=Math.floor(Xn/rn)*rn,$e=Math.ceil($e/rn)*rn,rn=Br(Xn,$e,Kt)):rn<0&&(Xn=Math.ceil(Xn*rn)/rn,$e=Math.floor($e*rn)/rn,rn=Br(Xn,$e,Kt)),rn>0?(Qe[On]=Math.floor(Xn/rn)*rn,Qe[Vn]=Math.ceil($e/rn)*rn,this.domain(Qe)):rn<0&&(Qe[On]=Math.ceil(Xn*rn)/rn,Qe[Vn]=Math.floor($e*rn)/rn,this.domain(Qe)),this},oe.prototype.ticks=function(Kt){return Kt===void 0&&(Kt=Vi),Yr(this._domain[0],this._domain[this._domain.length-1],Kt||Vi)},oe}();function Yr(oe,Kt,te){var Oe,Qe=-1,On,Vn,Xn;if(Kt=+Kt,oe=+oe,te=+te,oe===Kt&&te>0)return[oe];if((Oe=Kt<oe)&&(On=oe,oe=Kt,Kt=On),(Xn=Br(oe,Kt,te))===0||!isFinite(Xn))return[];if(Xn>0)for(oe=Math.ceil(oe/Xn),Kt=Math.floor(Kt/Xn),Vn=new Array(On=Math.ceil(Kt-oe+1));++Qe<On;)Vn[Qe]=(oe+Qe)*Xn;else for(oe=Math.floor(oe*Xn),Kt=Math.ceil(Kt*Xn),Vn=new Array(On=Math.ceil(oe-Kt+1));++Qe<On;)Vn[Qe]=(oe-Qe)/Xn;return Oe&&Vn.reverse(),Vn}function Br(oe,Kt,te){var Oe=(Kt-oe)/Math.max(0,te),Qe=Math.floor(Math.log(Oe)/Math.LN10),On=Oe/Math.pow(10,Qe);return Qe>=0?(On>=ro?10:On>=jr?5:On>=Ji?2:1)*Math.pow(10,Qe):-Math.pow(10,-Qe)/(On>=ro?10:On>=jr?5:On>=Ji?2:1)}function Nr(oe,Kt,te){var Oe;return te==="ceil"?Oe=Math.ceil(oe/Kt):te==="floor"?Oe=Math.floor(oe/Kt):Oe=Math.round(oe/Kt),Oe*Kt}function Xr(oe,Kt,te){var Oe=Nr(oe,te,"floor"),Qe=Nr(Kt,te,"ceil");Oe=Object(a.fixedBase)(Oe,te),Qe=Object(a.fixedBase)(Qe,te);for(var On=[],Vn=Oe;Vn<=Qe;Vn=Vn+te){var Xn=Object(a.fixedBase)(Vn,te);On.push(Xn)}return{min:Oe,max:Qe,ticks:On}}function Kr(oe,Kt,te){var Oe,Qe=oe.minLimit,On=oe.maxLimit,Vn=oe.min,Xn=oe.max,$e=oe.tickCount,rn=$e===void 0?5:$e,on=Object(a.isNil)(Qe)?Object(a.isNil)(Kt)?Vn:Kt:Qe,$n=Object(a.isNil)(On)?Object(a.isNil)(te)?Xn:te:On;if(on>$n&&(Oe=[on,$n],$n=Oe[0],on=Oe[1]),rn<=2)return[on,$n];for(var vr=($n-on)/(rn-1),ar=[],rr=0;rr<rn;rr++)ar.push(on+vr*rr);return ar}function ni(oe){var Kt=oe.min,te=oe.max,Oe=oe.tickInterval,Qe=oe.minLimit,On=oe.maxLimit,Vn=Li(oe);return!Object(a.isNil)(Qe)||!Object(a.isNil)(On)?Kr(oe,Object(a.head)(Vn),Object(a.last)(Vn)):Oe?Xr(Kt,te,Oe).ticks:Vn}function fi(oe){var Kt=oe.min,te=oe.max,Oe=oe.tickCount,Qe=oe.nice,On=oe.tickInterval,Vn=oe.minLimit,Xn=oe.maxLimit,$e=Ti(Kt,te,Oe,Qe).ticks;return!Object(a.isNil)(Vn)||!Object(a.isNil)(Xn)?Kr(oe,Object(a.head)($e),Object(a.last)($e)):On?Xr(Kt,te,On).ticks:$e}function $r(oe){var Kt=oe.base,te=oe.tickCount,Oe=oe.min,Qe=oe.max,On=oe.values,Vn,Xn=Vt(Kt,Qe);if(Oe>0)Vn=Math.floor(Vt(Kt,Oe));else{var $e=Ht(On,Kt,Qe);Vn=Math.floor(Vt(Kt,$e))}for(var rn=Xn-Vn,on=Math.ceil(rn/te),$n=[],vr=Vn;vr<Xn+on;vr=vr+on)$n.push(Math.pow(Kt,vr));return Oe<=0&&$n.unshift(0),$n}function ci(oe,Kt,te){te===void 0&&(te=5);var Oe={max:0,min:0,ticks:[]};if(oe===Kt)return{max:Kt,min:oe,ticks:[oe]};var Qe=1.5,On=.5+1.5*Qe,Vn=Kt-oe,Xn=Vn/te,$e=Math.pow(10,Math.floor(Math.log10(Xn))),rn=$e<1?Math.ceil(Math.abs(Math.log10($e))):0,on=$e;2*$e-Xn<Qe*(Xn-on)&&(on=2*$e,5*$e-Xn<On*(Xn-on)&&(on=5*$e,10*$e-Xn<Qe*(Xn-on)&&(on=10*$e)));var $n=Math.ceil(Kt/on),vr=Math.floor(oe/on);Oe.max=Math.max($n*on,Kt),Oe.min=Math.min(vr*on,oe);for(var ar=Number.parseFloat((vr*on).toFixed(rn));ar<Kt;)Oe.ticks.push(ar),ar+=on,rn&&(ar=Number.parseFloat(ar.toFixed(rn)));return Oe.ticks.push(ar),Oe}function Qr(oe){var Kt=oe.exponent,te=oe.tickCount,Oe=Math.ceil(jt(Kt,oe.max)),Qe=Math.floor(jt(Kt,oe.min)),On=ci(Qe,Oe,te).ticks;return On.map(function(Vn){var Xn=Vn>=0?1:-1;return Math.pow(Vn,Kt)*Xn})}function gi(oe,Kt){var te=oe.length*Kt;return Kt===1?oe[oe.length-1]:Kt===0?oe[0]:te%1!=0?oe[Math.ceil(te)-1]:oe.length%2==0?(oe[te-1]+oe[te])/2:oe[te]}function Oi(oe){var Kt=oe.tickCount,te=oe.values;if(!te||!te.length)return[];for(var Oe=te.slice().sort(function(Xn,$e){return Xn-$e}),Qe=[],On=0;On<Kt;On++){var Vn=On/(Kt-1);Qe.push(gi(Oe,Vn))}return Qe}function bi(oe){var Kt=oe.min,te=oe.max,Oe=oe.tickCount,Qe=oe.tickInterval,On=oe.minLimit,Vn=oe.maxLimit,Xn=ci(Kt,te,Oe).ticks;return!Object(a.isNil)(On)||!Object(a.isNil)(Vn)?Kr(oe,Object(a.head)(Xn),Object(a.last)(Xn)):Qe?Xr(Kt,te,Qe).ticks:Xn}function zi(oe){var Kt=oe.min,te=oe.max,Oe=oe.minTickInterval,Qe=oe.tickInterval,On=oe.tickCount;if(Qe)On=Math.ceil((te-Kt)/Qe);else{Qe=At(Kt,te,On)[1];var Vn=(te-Kt)/Qe,Xn=Vn/On;Xn>1&&(Qe=Qe*Math.ceil(Xn)),Oe&&Qe<Oe&&(Qe=Oe)}for(var $e=[],rn=Kt;rn<te+Qe;rn+=Qe)$e.push(rn);return $e}function Qi(oe){var Kt=_i(oe),te=Object(a.last)(oe.values);return te!==Object(a.last)(Kt)&&Kt.push(te),Kt}function io(oe){return new Date(oe).getFullYear()}function Wi(oe){return new Date(oe,0,1).getTime()}function Zi(oe){return new Date(oe).getMonth()}function Pi(oe,Kt){var te=io(oe),Oe=io(Kt),Qe=Zi(oe),On=Zi(Kt);return(Oe-te)*12+(On-Qe)%12}function no(oe,Kt){return new Date(oe,Kt,1).getTime()}function Mo(oe,Kt){return Math.ceil((Kt-oe)/V)}function ao(oe,Kt){return Math.ceil((Kt-oe)/F)}function uo(oe,Kt){return Math.ceil((Kt-oe)/(60*1e3))}function xo(oe){var Kt=oe.min,te=oe.max,Oe=oe.minTickInterval,Qe=oe.tickCount,On=oe.tickInterval,Vn=[];On||(On=(te-Kt)/Qe,Oe&&On<Oe&&(On=Oe));var Xn=io(Kt);if(On>ot)for(var $e=io(te),rn=Math.ceil(On/ot),on=Xn;on<=$e+rn;on=on+rn)Vn.push(Wi(on));else if(On>tt)for(var $n=Math.ceil(On/tt),vr=Zi(Kt),ar=Pi(Kt,te),on=0;on<=ar+$n;on=on+$n)Vn.push(no(Xn,on+vr));else if(On>V)for(var rr=new Date(Kt),Fr=rr.getFullYear(),Ar=rr.getMonth(),wr=rr.getDate(),xr=Math.ceil(On/V),Er=Mo(Kt,te),on=0;on<Er+xr;on=on+xr)Vn.push(new Date(Fr,Ar,wr+on).getTime());else if(On>F)for(var rr=new Date(Kt),Fr=rr.getFullYear(),Ar=rr.getMonth(),xr=rr.getDate(),Ir=rr.getHours(),Lr=Math.ceil(On/F),Pr=ao(Kt,te),on=0;on<=Pr+Lr;on=on+Lr)Vn.push(new Date(Fr,Ar,xr,Ir+on).getTime());else if(On>g)for(var Dr=uo(Kt,te),ri=Math.ceil(On/g),on=0;on<=Dr+ri;on=on+ri)Vn.push(Kt+on*g);else{var vi=On;vi<d&&(vi=d);for(var ii=Math.floor(Kt/d)*d,Si=Math.ceil((te-Kt)/d),Ui=Math.ceil(vi/d),on=0;on<Si+Ui;on=on+Ui)Vn.push(ii+on*d)}return Vn.length>=512&&console.warn("Notice: current ticks length("+Vn.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+On+") is too small, increase the value to solve the problem!"),Vn}r("cat",_i),r("time-cat",Qi),r("wilkinson-extended",fi),r("r-pretty",bi),r("time",zi),r("time-pretty",xo),r("log",$r),r("pow",Qr),r("quantile",Oi),r("d3-linear",ni),Tn("cat",A),Tn("category",A),Tn("identity",Kn),Tn("linear",Ut),Tn("log",pe),Tn("pow",we),Tn("time",He),Tn("timeCat",gt),Tn("quantize",fn),Tn("quantile",Cn)},"96lr":function(Fn,Gt,_){"use strict";var rt=_("AA7f"),a=_("iTfj"),E=_("Qci9"),e=function(r){Object(rt.b)(p,r);function p(){return r!==null&&r.apply(this,arguments)||this}return p.prototype.process=function(b){var S=a.flatten(b),l=this,A=l.xField,j=l.yField,y=this.getXValuesMaxMap(S),n=Math.max.apply(Math,Object.keys(y).map(function(s){return y[s]}));return a.map(b,function(s){return a.map(s,function(h){var M,O,T=h[j],v=h[A];if(a.isArray(T)){var m=(n-y[v])/2;return Object(rt.a)(Object(rt.a)({},h),(M={},M[j]=a.map(T,function(D){return m+D}),M))}var C=(n-T)/2;return Object(rt.a)(Object(rt.a)({},h),(O={},O[j]=[C,T+C],O))})})},p.prototype.getXValuesMaxMap=function(b){var S=this,l=this,A=l.xField,j=l.yField,y=a.groupBy(b,function(n){return n[A]});return a.mapValues(y,function(n){return S.getDimMaxValue(n,j)})},p.prototype.getDimMaxValue=function(b,S){var l=a.map(b,function(j){return a.get(j,S,[])}),A=a.flatten(l);return Math.max.apply(Math,A)},p}(E.a);Gt.a=e},"9eUa":function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return b}),_.d(Gt,"d",function(){return S}),_.d(Gt,"b",function(){return l}),_.d(Gt,"c",function(){return j}),_.d(Gt,"e",function(){return s}),_.d(Gt,"h",function(){return h}),_.d(Gt,"f",function(){return O}),_.d(Gt,"g",function(){return T});var rt=_("iTfj"),a=_("r0DC"),E=_("nCnq"),e=_("cyZq"),r=_("nycV"),p={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function b(v,m){var C=m.attr();for(var D in C){var Y=C[D],Z=p[D]?p[D]:D;Z==="matrix"&&Y?v.transform(Y[0],Y[1],Y[3],Y[4],Y[6],Y[7]):Z==="lineDash"&&v.setLineDash?Object(rt.isArray)(Y)&&v.setLineDash(Y):(Z==="strokeStyle"||Z==="fillStyle"?Y=Object(a.b)(v,m,Y):Z==="globalAlpha"&&(Y=Y*v.globalAlpha),v[Z]=Y)}}function S(v,m,C){for(var D=0;D<m.length;D++){var Y=m[D];Y.cfg.visible?Y.draw(v,C):Y.skipDraw()}}function l(v,m,C){var D=v.get("refreshElements");Object(rt.each)(D,function(Y){if(Y!==v)for(var Z=Y.cfg.parent;Z&&Z!==v&&!Z.cfg.refresh;)Z.cfg.refresh=!0,Z=Z.cfg.parent}),D[0]===v?y(m,C):A(m,C)}function A(v,m){for(var C=0;C<v.length;C++){var D=v[C];if(D.cfg.visible)if(D.cfg.hasChanged)D.cfg.refresh=!0,D.isGroup()&&y(D.cfg.children,m);else if(D.cfg.refresh)D.isGroup()&&A(D.cfg.children,m);else{var Y=n(D,m);D.cfg.refresh=Y,Y&&D.isGroup()&&A(D.cfg.children,m)}}}function j(v){for(var m=0;m<v.length;m++){var C=v[m];C.cfg.hasChanged=!1,C.isGroup()&&!C.destroyed&&j(C.cfg.children)}}function y(v,m){for(var C=0;C<v.length;C++){var D=v[C];D.cfg.refresh=!0,D.isGroup()&&y(D.get("children"),m)}}function n(v,m){var C=v.cfg.cacheCanvasBBox,D=v.cfg.isInView&&C&&Object(e.f)(C,m);return D}function s(v,m,C,D){var Y=C.path,Z=C.startArrow,et=C.endArrow;if(!!Y){var dt=[0,0],ht=[0,0],St={dx:0,dy:0};m.beginPath();for(var wt=0;wt<Y.length;wt++){var xt=Y[wt],ft=xt[0];if(wt===0&&Z&&Z.d){var Bt=v.getStartTangent();St=r.c(Bt[0][0],Bt[0][1],Bt[1][0],Bt[1][1],Z.d)}else if(wt===Y.length-2&&Y[wt+1][0]==="Z"&&et&&et.d){var Rt=Y[wt+1];if(Rt[0]==="Z"){var Bt=v.getEndTangent();St=r.c(Bt[0][0],Bt[0][1],Bt[1][0],Bt[1][1],et.d)}}else if(wt===Y.length-1&&et&&et.d&&Y[0]!=="Z"){var Bt=v.getEndTangent();St=r.c(Bt[0][0],Bt[0][1],Bt[1][0],Bt[1][1],et.d)}var Ot=St.dx,X=St.dy;switch(ft){case"M":m.moveTo(xt[1]-Ot,xt[2]-X),ht=[xt[1],xt[2]];break;case"L":m.lineTo(xt[1]-Ot,xt[2]-X);break;case"Q":m.quadraticCurveTo(xt[1],xt[2],xt[3]-Ot,xt[4]-X);break;case"C":m.bezierCurveTo(xt[1],xt[2],xt[3],xt[4],xt[5]-Ot,xt[6]-X);break;case"A":{var ut=void 0;D?(ut=D[wt],ut||(ut=Object(E.a)(dt,xt),D[wt]=ut)):ut=Object(E.a)(dt,xt);var vt=ut.cx,pt=ut.cy,Et=ut.rx,q=ut.ry,st=ut.startAngle,it=ut.endAngle,z=ut.xRotation,P=ut.sweepFlag;if(m.ellipse)m.ellipse(vt,pt,Et,q,z,st,it,1-P);else{var H=Et>q?Et:q,k=Et>q?1:Et/q,d=Et>q?q/Et:1;m.translate(vt,pt),m.rotate(z),m.scale(k,d),m.arc(0,0,H,st,it,1-P),m.scale(1/k,1/d),m.rotate(-z),m.translate(-vt,-pt)}break}case"Z":m.closePath();break;default:break}if(ft==="Z")dt=ht;else{var g=xt.length;dt=[xt[g-2],xt[g-1]]}}}}function h(v,m){var C=v.get("canvas");C&&(m==="remove"&&(v._cacheCanvasBBox=v.get("cacheCanvasBBox")),v.get("hasChanged")||(v.set("hasChanged",!0),v.cfg.parent&&v.cfg.parent.get("hasChanged")||(C.refreshElement(v,m,C),C.get("autoDraw")&&C.draw())))}function M(v){var m;if(v.destroyed)m=v._cacheCanvasBBox;else{var C=v.get("cacheCanvasBBox"),D=C&&!!(C.width&&C.height),Y=v.getCanvasBBox(),Z=Y&&!!(Y.width&&Y.height);D&&Z?m=Object(e.l)(C,Y):D?m=C:Z&&(m=Y)}return m}function O(v){if(!v.length)return null;var m=[],C=[],D=[],Y=[];return Object(rt.each)(v,function(Z){var et=M(Z);et&&(m.push(et.minX),C.push(et.minY),D.push(et.maxX),Y.push(et.maxY))}),{minX:Math.min.apply(null,m),minY:Math.min.apply(null,C),maxX:Math.max.apply(null,D),maxY:Math.max.apply(null,Y)}}function T(v,m){return!v||!m||!Object(e.f)(v,m)?null:{minX:Math.max(v.minX,m.minX),minY:Math.max(v.minY,m.minY),maxX:Math.min(v.maxX,m.maxX),maxY:Math.min(v.maxY,m.maxY)}}},AA7f:function(Fn,Gt,_){"use strict";_.d(Gt,"b",function(){return a}),_.d(Gt,"a",function(){return E});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var rt=function(dt,ht){return rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(St,wt){St.__proto__=wt}||function(St,wt){for(var xt in wt)wt.hasOwnProperty(xt)&&(St[xt]=wt[xt])},rt(dt,ht)};function a(et,dt){rt(et,dt);function ht(){this.constructor=et}et.prototype=dt===null?Object.create(dt):(ht.prototype=dt.prototype,new ht)}var E=function(){return E=Object.assign||function(ht){for(var St,wt=1,xt=arguments.length;wt<xt;wt++){St=arguments[wt];for(var ft in St)Object.prototype.hasOwnProperty.call(St,ft)&&(ht[ft]=St[ft])}return ht},E.apply(this,arguments)};function e(et,dt){var ht={};for(var St in et)Object.prototype.hasOwnProperty.call(et,St)&&dt.indexOf(St)<0&&(ht[St]=et[St]);if(et!=null&&typeof Object.getOwnPropertySymbols=="function")for(var wt=0,St=Object.getOwnPropertySymbols(et);wt<St.length;wt++)dt.indexOf(St[wt])<0&&Object.prototype.propertyIsEnumerable.call(et,St[wt])&&(ht[St[wt]]=et[St[wt]]);return ht}function r(et,dt,ht,St){var wt=arguments.length,xt=wt<3?dt:St===null?St=Object.getOwnPropertyDescriptor(dt,ht):St,ft;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")xt=Reflect.decorate(et,dt,ht,St);else for(var Bt=et.length-1;Bt>=0;Bt--)(ft=et[Bt])&&(xt=(wt<3?ft(xt):wt>3?ft(dt,ht,xt):ft(dt,ht))||xt);return wt>3&&xt&&Object.defineProperty(dt,ht,xt),xt}function p(et,dt){return function(ht,St){dt(ht,St,et)}}function b(et,dt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(et,dt)}function S(et,dt,ht,St){function wt(xt){return xt instanceof ht?xt:new ht(function(ft){ft(xt)})}return new(ht||(ht=Promise))(function(xt,ft){function Bt(X){try{Ot(St.next(X))}catch(ut){ft(ut)}}function Rt(X){try{Ot(St.throw(X))}catch(ut){ft(ut)}}function Ot(X){X.done?xt(X.value):wt(X.value).then(Bt,Rt)}Ot((St=St.apply(et,dt||[])).next())})}function l(et,dt){var ht={label:0,sent:function(){if(xt[0]&1)throw xt[1];return xt[1]},trys:[],ops:[]},St,wt,xt,ft;return ft={next:Bt(0),throw:Bt(1),return:Bt(2)},typeof Symbol=="function"&&(ft[Symbol.iterator]=function(){return this}),ft;function Bt(Ot){return function(X){return Rt([Ot,X])}}function Rt(Ot){if(St)throw new TypeError("Generator is already executing.");for(;ht;)try{if(St=1,wt&&(xt=Ot[0]&2?wt.return:Ot[0]?wt.throw||((xt=wt.return)&&xt.call(wt),0):wt.next)&&!(xt=xt.call(wt,Ot[1])).done)return xt;switch(wt=0,xt&&(Ot=[Ot[0]&2,xt.value]),Ot[0]){case 0:case 1:xt=Ot;break;case 4:return ht.label++,{value:Ot[1],done:!1};case 5:ht.label++,wt=Ot[1],Ot=[0];continue;case 7:Ot=ht.ops.pop(),ht.trys.pop();continue;default:if(xt=ht.trys,!(xt=xt.length>0&&xt[xt.length-1])&&(Ot[0]===6||Ot[0]===2)){ht=0;continue}if(Ot[0]===3&&(!xt||Ot[1]>xt[0]&&Ot[1]<xt[3])){ht.label=Ot[1];break}if(Ot[0]===6&&ht.label<xt[1]){ht.label=xt[1],xt=Ot;break}if(xt&&ht.label<xt[2]){ht.label=xt[2],ht.ops.push(Ot);break}xt[2]&&ht.ops.pop(),ht.trys.pop();continue}Ot=dt.call(et,ht)}catch(X){Ot=[6,X],wt=0}finally{St=xt=0}if(Ot[0]&5)throw Ot[1];return{value:Ot[0]?Ot[1]:void 0,done:!0}}}function A(et,dt,ht,St){St===void 0&&(St=ht),et[St]=dt[ht]}function j(et,dt){for(var ht in et)ht!=="default"&&!dt.hasOwnProperty(ht)&&(dt[ht]=et[ht])}function y(et){var dt=typeof Symbol=="function"&&Symbol.iterator,ht=dt&&et[dt],St=0;if(ht)return ht.call(et);if(et&&typeof et.length=="number")return{next:function(){return et&&St>=et.length&&(et=void 0),{value:et&&et[St++],done:!et}}};throw new TypeError(dt?"Object is not iterable.":"Symbol.iterator is not defined.")}function n(et,dt){var ht=typeof Symbol=="function"&&et[Symbol.iterator];if(!ht)return et;var St=ht.call(et),wt,xt=[],ft;try{for(;(dt===void 0||dt-- >0)&&!(wt=St.next()).done;)xt.push(wt.value)}catch(Bt){ft={error:Bt}}finally{try{wt&&!wt.done&&(ht=St.return)&&ht.call(St)}finally{if(ft)throw ft.error}}return xt}function s(){for(var et=[],dt=0;dt<arguments.length;dt++)et=et.concat(n(arguments[dt]));return et}function h(){for(var et=0,dt=0,ht=arguments.length;dt<ht;dt++)et+=arguments[dt].length;for(var St=Array(et),wt=0,dt=0;dt<ht;dt++)for(var xt=arguments[dt],ft=0,Bt=xt.length;ft<Bt;ft++,wt++)St[wt]=xt[ft];return St}function M(et){return this instanceof M?(this.v=et,this):new M(et)}function O(et,dt,ht){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var St=ht.apply(et,dt||[]),wt,xt=[];return wt={},ft("next"),ft("throw"),ft("return"),wt[Symbol.asyncIterator]=function(){return this},wt;function ft(vt){St[vt]&&(wt[vt]=function(pt){return new Promise(function(Et,q){xt.push([vt,pt,Et,q])>1||Bt(vt,pt)})})}function Bt(vt,pt){try{Rt(St[vt](pt))}catch(Et){ut(xt[0][3],Et)}}function Rt(vt){vt.value instanceof M?Promise.resolve(vt.value.v).then(Ot,X):ut(xt[0][2],vt)}function Ot(vt){Bt("next",vt)}function X(vt){Bt("throw",vt)}function ut(vt,pt){vt(pt),xt.shift(),xt.length&&Bt(xt[0][0],xt[0][1])}}function T(et){var dt,ht;return dt={},St("next"),St("throw",function(wt){throw wt}),St("return"),dt[Symbol.iterator]=function(){return this},dt;function St(wt,xt){dt[wt]=et[wt]?function(ft){return(ht=!ht)?{value:M(et[wt](ft)),done:wt==="return"}:xt?xt(ft):ft}:xt}}function v(et){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var dt=et[Symbol.asyncIterator],ht;return dt?dt.call(et):(et=typeof y=="function"?y(et):et[Symbol.iterator](),ht={},St("next"),St("throw"),St("return"),ht[Symbol.asyncIterator]=function(){return this},ht);function St(xt){ht[xt]=et[xt]&&function(ft){return new Promise(function(Bt,Rt){ft=et[xt](ft),wt(Bt,Rt,ft.done,ft.value)})}}function wt(xt,ft,Bt,Rt){Promise.resolve(Rt).then(function(Ot){xt({value:Ot,done:Bt})},ft)}}function m(et,dt){return Object.defineProperty?Object.defineProperty(et,"raw",{value:dt}):et.raw=dt,et}function C(et){if(et&&et.__esModule)return et;var dt={};if(et!=null)for(var ht in et)Object.hasOwnProperty.call(et,ht)&&(dt[ht]=et[ht]);return dt.default=et,dt}function D(et){return et&&et.__esModule?et:{default:et}}function Y(et,dt){if(!dt.has(et))throw new TypeError("attempted to get private field on non-instance");return dt.get(et)}function Z(et,dt,ht){if(!dt.has(et))throw new TypeError("attempted to set private field on non-instance");return dt.set(et,ht),ht}},APlK:function(Fn,Gt,_){"use strict";_.d(Gt,"b",function(){return a}),_.d(Gt,"c",function(){return E}),_.d(Gt,"a",function(){return e});var rt=_("c+wO");function a(r,p){var b=r.cfg.el,S=r.attr(),l={dx:S.shadowOffsetX,dy:S.shadowOffsetY,blur:S.shadowBlur,color:S.shadowColor};if(!l.dx&&!l.dy&&!l.blur&&!l.color)b.removeAttribute("filter");else{var A=p.find("filter",l);A||(A=p.addShadow(l)),b.setAttribute("filter","url(#"+A+")")}}function E(r){var p=r.attr().matrix;if(p){for(var b=r.cfg.el,S=[],l=0;l<9;l+=3)S.push(p[l]+","+p[l+1]);S=S.join(","),S.indexOf("NaN")===-1?b.setAttribute("transform","matrix("+S+")"):console.warn("invalid matrix:",p)}}function e(r,p){var b=r.getClip(),S=r.get("el");if(!b)S.removeAttribute("clip-path");else if(b&&!S.hasAttribute("clip-path")){Object(rt.a)(b),b.createPath(p);var l=p.addClip(b);S.setAttribute("clip-path","url(#"+l+")")}}},"B+CY":function(Fn,Gt){},B0vJ:function(Fn,Gt){},"B2d+":function(Fn,Gt){},B3DA:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return E});var rt=_("iTfj"),a=_("F/eT");function E(e){var r=Object(rt.clamp)(Object(a.a)(e)?e:0,0,1);return[{type:"current",percent:r},{type:"target",percent:1-r}]}},"B6l+":function(Fn,Gt,_){var rt=_("Sq3C"),a=_("Z1HP"),E=_("Sxd8"),e=_("dt0z");function r(p,b,S){p=e(p),b=E(b);var l=b?a(p):0;return b&&l<b?p+rt(b-l,S):p}Fn.exports=r},BMrR:function(Fn,Gt,_){"use strict";var rt=_("wx14"),a=_("rePB"),E=_("U8pU"),e=_("ODXe"),r=_("q1tI"),p=_("TSYQ"),b=_.n(p),S=_("H84U"),l=_("o/2+"),A=_("CWQg"),j=_("ACnJ"),y=function(T,v){var m={};for(var C in T)Object.prototype.hasOwnProperty.call(T,C)&&v.indexOf(C)<0&&(m[C]=T[C]);if(T!=null&&typeof Object.getOwnPropertySymbols=="function")for(var D=0,C=Object.getOwnPropertySymbols(T);D<C.length;D++)v.indexOf(C[D])<0&&Object.prototype.propertyIsEnumerable.call(T,C[D])&&(m[C[D]]=T[C[D]]);return m},n=Object(A.a)("top","middle","bottom","stretch"),s=Object(A.a)("start","end","center","space-around","space-between"),h=r.forwardRef(function(T,v){var m,C=T.prefixCls,D=T.justify,Y=T.align,Z=T.className,et=T.style,dt=T.children,ht=T.gutter,St=ht===void 0?0:ht,wt=T.wrap,xt=y(T,["prefixCls","justify","align","className","style","children","gutter","wrap"]),ft=r.useContext(S.b),Bt=ft.getPrefixCls,Rt=ft.direction,Ot=r.useState({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),X=Object(e.a)(Ot,2),ut=X[0],vt=X[1],pt=r.useRef(St);r.useEffect(function(){var P=j.a.subscribe(function(H){var k=pt.current||0;(!Array.isArray(k)&&Object(E.a)(k)==="object"||Array.isArray(k)&&(Object(E.a)(k[0])==="object"||Object(E.a)(k[1])==="object"))&&vt(H)});return function(){return j.a.unsubscribe(P)}},[]);var Et=function(){var H=[0,0],k=Array.isArray(St)?St:[St,0];return k.forEach(function(d,g){if(Object(E.a)(d)==="object")for(var F=0;F<j.b.length;F++){var V=j.b[F];if(ut[V]&&d[V]!==void 0){H[g]=d[V];break}}else H[g]=d||0}),H},q=Bt("row",C),st=Et(),it=b()(q,(m={},Object(a.a)(m,"".concat(q,"-no-wrap"),wt===!1),Object(a.a)(m,"".concat(q,"-").concat(D),D),Object(a.a)(m,"".concat(q,"-").concat(Y),Y),Object(a.a)(m,"".concat(q,"-rtl"),Rt==="rtl"),m),Z),z=Object(rt.a)(Object(rt.a)(Object(rt.a)({},st[0]>0?{marginLeft:st[0]/-2,marginRight:st[0]/-2}:{}),st[1]>0?{marginTop:st[1]/-2,marginBottom:st[1]/2}:{}),et);return r.createElement(l.a.Provider,{value:{gutter:st,wrap:wt}},r.createElement("div",Object(rt.a)({},xt,{className:it,style:z,ref:v}),dt))});h.displayName="Row";var M=h,O=Gt.a=M},BYeR:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return s});var rt=_("mrSG"),a=_("zJSt"),E=_("YuPD"),e=_("iTfj"),r=_("w02o"),p=_("tKoa");function b(h){var M=h.data,O=h.xField,T=h.measureField,v=h.rangeField,m=h.targetField,C=h.layout,D=[],Y=[];M.forEach(function(dt,ht){var St;dt[v].sort(function(wt,xt){return wt-xt}),dt[v].forEach(function(wt,xt){var ft,Bt=xt===0?wt:dt[v][xt]-dt[v][xt-1];D.push((ft={rKey:v+"_"+xt},ft[O]=O?dt[O]:String(ht),ft[v]=Bt,ft))}),dt[T].forEach(function(wt,xt){var ft;D.push((ft={mKey:dt[T].length>1?T+"_"+xt:""+T},ft[O]=O?dt[O]:String(ht),ft[T]=wt,ft))}),D.push((St={tKey:""+m},St[O]=O?dt[O]:String(ht),St[m]=dt[m],St)),Y.push(dt[v],dt[T],dt[m])});var Z=Math.min.apply(Math,Y.flat(Infinity)),et=Math.max.apply(Math,Y.flat(Infinity));return Z=Z>0?0:Z,C==="vertical"&&D.reverse(),{min:Z,max:et,ds:D}}function S(h){var M=h.chart,O=h.options,T=O.bulletStyle,v=O.targetField,m=O.rangeField,C=O.measureField,D=O.xField,Y=O.color,Z=O.layout,et=O.size,dt=O.label,ht=b(O),St=ht.min,wt=ht.max,xt=ht.ds;M.data(xt);var ft=Object(E.b)({},h,{options:{xField:D,yField:m,seriesField:"rKey",isStack:!0,label:Object(e.get)(dt,"range"),interval:{color:Object(e.get)(Y,"range"),style:Object(e.get)(T,"range"),size:Object(e.get)(et,"range")}}});Object(p.c)(ft),M.geometries[0].tooltip(!1);var Bt=Object(E.b)({},h,{options:{xField:D,yField:C,seriesField:"mKey",isStack:!0,label:Object(e.get)(dt,"measure"),interval:{color:Object(e.get)(Y,"measure"),style:Object(e.get)(T,"measure"),size:Object(e.get)(et,"measure")}}});Object(p.c)(Bt);var Rt=Object(E.b)({},h,{options:{xField:D,yField:v,seriesField:"tKey",label:Object(e.get)(dt,"target"),point:{color:Object(e.get)(Y,"target"),style:Object(e.get)(T,"target"),size:Object(e.get)(et,"target")/2,shape:Z==="horizontal"?"line":"hyphen"}}});return Object(p.e)(Rt),Z==="horizontal"&&M.coordinate().transpose(),Object(rt.a)(Object(rt.a)({},h),{ext:{data:{min:St,max:wt}}})}function l(h){var M,O,T=h.options,v=h.ext,m=T.xAxis,C=T.yAxis,D=T.targetField,Y=T.rangeField,Z=T.measureField,et=T.xField,dt=v.data;return Object(E.e)(Object(r.f)((M={},M[et]=m,M[Z]=C,M),(O={},O[Z]={min:dt==null?void 0:dt.min,max:dt==null?void 0:dt.max},O[D]={sync:""+Z},O[Y]={sync:""+Z},O)))(h)}function A(h){var M=h.chart,O=h.options,T=O.xAxis,v=O.yAxis,m=O.xField,C=O.measureField,D=O.rangeField,Y=O.targetField;return M.axis(""+D,!1),M.axis(""+Y,!1),T===!1?M.axis(""+m,!1):M.axis(""+m,T),v===!1?M.axis(""+C,!1):M.axis(""+C,v),h}function j(h){var M=h.chart,O=h.options,T=O.legend;return M.removeInteraction("legend-filter"),M.legend(T),M.legend("rKey",!1),M.legend("mKey",!1),M.legend("tKey",!1),h}function y(h){var M=h.chart,O=h.options,T=O.label,v=O.measureField,m=O.targetField,C=O.rangeField,D=M.geometries,Y=D[0],Z=D[1],et=D[2];return Object(e.get)(T,"range")?Y.label(""+C,Object(rt.a)({layout:[{type:"limit-in-plot"}]},Object(E.o)(T.range))):Y.label(!1),Object(e.get)(T,"measure")?Z.label(""+v,Object(rt.a)({layout:[{type:"limit-in-plot"}]},Object(E.o)(T.measure))):Z.label(!1),Object(e.get)(T,"target")?et.label(""+m,Object(rt.a)({layout:[{type:"limit-in-plot"}]},Object(E.o)(T.target))):et.label(!1),h}function n(h){Object(E.e)(S,l,A,j,r.j,y,r.k,r.c,r.a)(h)}var s=function(h){Object(rt.b)(M,h);function M(){var O=h!==null&&h.apply(this,arguments)||this;return O.type="bullet",O}return M.prototype.changeData=function(O){this.updateOption({data:O});var T=b(this.options),v=T.min,m=T.max,C=T.ds;l({options:this.options,ext:{data:{min:v,max:m}},chart:this.chart}),this.chart.changeData(C)},M.prototype.getSchemaAdaptor=function(){return n},M.prototype.getDefaultOptions=function(){return Object(E.b)({},h.prototype.getDefaultOptions.call(this),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}})},M}(a.a)},BgvD:function(Fn,Gt,_){"use strict";_.d(Gt,"b",function(){return A}),_.d(Gt,"a",function(){return n});var rt=_("iTfj"),a="\u2026";function E(s){for(var h=0,M=0;M<s.length;M++)h+=e(s,M);return h}function e(s,h){return s.charCodeAt(h)>0&&s.charCodeAt(h)<128?1:2}function r(s,h,M){M===void 0&&(M="tail");var O=s.length,T="";if(M==="tail"){for(var v=0,m=0;v<h;){var C=e(s,m);if(v+C<=h)T+=s[m],v+=e(s,m),m++;else break}T+=a}else if(M==="head"){for(var v=0,m=O-1;v<h;){var C=e(s,m);if(v+C<=h)T+=s[m],v+=e(s,m),m--;else break}T=a+T}else{for(var D="",Y="",v=0,Z=0,et=O-1;v<h;){var dt=e(s,Z),ht=!1;dt+v<=h&&(D+=s[Z],Z++,v+=dt,ht=!0);var St=e(s,et);if(St+v<=h&&(Y=s[et]+Y,v+=St,et--,ht=!0),!ht)break}T=D+a+Y}return T}var p="\u2026",b=2,S=400;function l(s){for(var h=s.map(function(D){var Y=D.attr("text");return Object(rt.isNil)(Y)?"":""+Y}),M=0,O=0,T=0;T<h.length;T+=1){for(var v=0,m=0;m<=h[T].length;m+=1){var C=h[T].charCodeAt(m);C>=19968&&C<=40869?v+=2:v+=1}v>M&&(M=v,O=T)}return s[O].getBBox().width}function A(s){if(s.length>S)return l(s);var h=0;return Object(rt.each)(s,function(M){var O=M.getBBox(),T=O.width;h<T&&(h=T)}),h}function j(s,h){var M=h.getCanvasBBox();return s?M.width:M.height}function y(s,h){return s.getBBox().width<h}function n(s,h,M,O){O===void 0&&(O="tail");var T=h.attr("text"),v=j(s,h),m=E(T),C=!1;if(M<v){var D=Math.floor(M/v*m)-b,Y=void 0;D>=0?Y=r(T,D,O):Y=p,Y&&(h.attr("text",Y),C=!0)}return C?h.set("tip",T):h.set("tip",null),C}},BwSJ:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return h});var rt=_("mrSG"),a=_("zJSt"),E=_("YuPD"),e=_("iTfj");function r(M,O){var T=Math.floor(M/O);return[O*T,O*(T+1)]}function p(M){return Math.ceil(Math.log(M.length)/Math.LN2)+1}function b(M,O,T,v,m){var C=Object(e.clone)(M);Object(e.sortBy)(C,O);var D=Object(e.valuesOfKey)(C,O),Y=Object(e.getRange)(D),Z=Y.max-Y.min,et=T;if(!T&&v&&(et=Z/v),!T&&!v){var dt=p(D);et=Z/dt}var ht={},St=Object(e.groupBy)(C,m);Object(e.isEmpty)(St)?Object(e.each)(C,function(xt){var ft=xt[O],Bt=r(ft,et),Rt=Bt[0]+"-"+Bt[1];Object(e.hasKey)(ht,Rt)||(ht[Rt]={range:Bt,count:0}),ht[Rt].count+=1}):Object.keys(St).forEach(function(xt){Object(e.each)(St[xt],function(ft){var Bt=ft[O],Rt=r(Bt,et),Ot=Rt[0]+"-"+Rt[1],X=Ot+"-"+xt;Object(e.hasKey)(ht,X)||(ht[X]={range:Rt,count:0},ht[X][m]=xt),ht[X].count+=1})});var wt=[];return Object(e.each)(ht,function(xt){wt.push(xt)}),wt}var S=_("w02o"),l=_("tKoa");function A(M){var O=M.chart,T=M.options,v=T.data,m=T.binField,C=T.binNumber,D=T.binWidth,Y=T.color,Z=T.stackField,et=T.legend,dt=T.columnStyle,ht=b(v,m,D,C,Z);O.data(ht);var St=Object(E.b)({},M,{options:{xField:"range",yField:"count",seriesField:Z,isStack:!0,interval:{color:Y,style:dt}}});return Object(l.c)(St),et&&Z&&O.legend(Z,et),M}function j(M){var O=M.options,T=O.xAxis,v=O.yAxis;return Object(E.e)(Object(S.f)({range:T,count:v}))(M)}function y(M){var O=M.chart,T=M.options,v=T.xAxis,m=T.yAxis;return v===!1?O.axis("range",!1):O.axis("range",v),m===!1?O.axis("count",!1):O.axis("count",m),M}function n(M){var O=M.chart,T=M.options,v=T.label,m=Object(E.c)(O,"interval");if(!v)m.label(!1);else{var C=v.callback,D=Object(rt.c)(v,["callback"]);m.label({fields:["count"],callback:C,cfg:Object(E.o)(D)})}return M}function s(M){return Object(E.e)(A,j,y,S.j,n,S.k,S.c,S.a)(M)}var h=function(M){Object(rt.b)(O,M);function O(){var T=M!==null&&M.apply(this,arguments)||this;return T.type="histogram",T}return O.prototype.changeData=function(T){this.updateOption({data:T});var v=this.options,m=v.binField,C=v.binNumber,D=v.binWidth,Y=v.stackField;this.chart.changeData(b(T,m,D,C,Y))},O.prototype.getDefaultOptions=function(){return Object(E.b)({},M.prototype.getDefaultOptions.call(this),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]})},O.prototype.getSchemaAdaptor=function(){return s},O}(a.a)},CBiR:function(Fn,Gt,_){"use strict";Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.getReplaceAttrs=Gt.getPolygonCentroid=Gt.getAngle=Gt.getArcPath=Gt.getSectorPath=Gt.polarToCartesian=void 0;var rt=_("iTfj");function a(l){if(rt.isEmpty(l))return null;var A=l[0].x,j=l[0].x,y=l[0].y,n=l[0].y;return rt.each(l,function(s){A=A>s.x?s.x:A,j=j<s.x?s.x:j,y=y>s.y?s.y:y,n=n<s.y?s.y:n}),{minX:A,maxX:j,minY:y,maxY:n,centerX:(A+j)/2,centerY:(y+n)/2}}function E(l,A,j,y){return{x:l+j*Math.cos(y),y:A+j*Math.sin(y)}}Gt.polarToCartesian=E;function e(l,A,j,y,n,s){s===void 0&&(s=0);var h=E(l,A,j,y),M=E(l,A,j,n),O=E(l,A,s,y),T=E(l,A,s,n);if(n-y==Math.PI*2){var v=E(l,A,j,y+Math.PI),m=E(l,A,s,y+Math.PI),C=[["M",h.x,h.y],["A",j,j,0,1,1,v.x,v.y],["A",j,j,0,1,1,M.x,M.y],["M",O.x,O.y]];return s&&(C.push(["A",s,s,0,1,0,m.x,m.y]),C.push(["A",s,s,0,1,0,T.x,T.y])),C.push(["M",h.x,h.y]),C.push(["Z"]),C}var D=n-y<=Math.PI?0:1,Y=[["M",h.x,h.y],["A",j,j,0,D,1,M.x,M.y],["L",T.x,T.y]];return s&&Y.push(["A",s,s,0,D,0,O.x,O.y]),Y.push(["L",h.x,h.y]),Y.push(["Z"]),Y}Gt.getSectorPath=e;function r(l,A,j,y,n){var s=E(l,A,j,y),h=E(l,A,j,n);if(rt.isNumberEqual(n-y,Math.PI*2)){var M=E(l,A,j,y+Math.PI);return[["M",s.x,s.y],["A",j,j,0,1,1,M.x,M.y],["A",j,j,0,1,1,s.x,s.y],["A",j,j,0,1,0,M.x,M.y],["A",j,j,0,1,0,s.x,s.y],["Z"]]}var O=n-y<=Math.PI?0:1;return[["M",s.x,s.y],["A",j,j,0,O,1,h.x,h.y]]}Gt.getArcPath=r;function p(l,A){var j=l.points,y=a(j),n,s,h=A.startAngle,M=A.endAngle,O=M-h;return A.isTransposed?(n=y.maxY*O,s=y.minY*O):(n=y.maxX*O,s=y.minX*O),n+=h,s+=h,{startAngle:s,endAngle:n}}Gt.getAngle=p;function b(l,A){if(rt.isNumber(l)&&rt.isNumber(A))return[l,A];for(var j=-1,y=0,n=0,s,h=l.length-1,M,O=0;++j<l.length;)s=h,h=j,O+=M=l[s]*A[h]-l[h]*A[s],y+=(l[s]+l[h])*M,n+=(A[s]+A[h])*M;return O*=3,[y/O,n/O]}Gt.getPolygonCentroid=b;function S(l,A){var j=l.attr(),y=A.attr();return rt.each(j,function(n,s){y[s]===void 0&&(y[s]=void 0)}),y}Gt.getReplaceAttrs=S},CSvP:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return rt});function rt(){return 0}Gt.b=function(a){return function(){return a}}},"Ch+T":function(Fn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"Html",function(){return M});var rt=_("mrSG"),a=_("6UX8"),E=_("fIp6"),e=_("iTfj"),r=_("de35"),p=_("5UbV"),b=_("u60a"),S=_("L16w"),l,A=(l={},l[""+b.CONTAINER_CLASS]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:S.a.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},l[""+b.TITLE_CLASS]={marginBottom:"4px"},l[""+b.LIST_CLASS]={margin:"0px",listStyleType:"none",padding:"0px"},l[""+b.LIST_ITEM_CLASS]={listStyleType:"none",marginBottom:"4px"},l[""+b.MARKER_CLASS]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},l[""+b.VALUE_CLASS]={display:"inline-block",float:"right",marginLeft:"30px"},l[""+b.CROSSHAIR_X]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},l[""+b.CROSSHAIR_Y]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},l);function j(O,T,v,m,C){var D={left:O<C.x,right:O+v>C.x+C.width,top:T<C.y,bottom:T+m>C.y+C.height};return D}function y(O,T,v,m,C,D){var Y=O,Z=T;switch(D){case"left":Y=O-m-v,Z=T-C/2;break;case"right":Y=O+v,Z=T-C/2;break;case"top":Y=O-m/2,Z=T-C-v;break;case"bottom":Y=O-m/2,Z=T+v;break;default:Y=O+v,Z=T-C-v;break}return{x:Y,y:Z}}function n(O,T,v,m,C,D,Y){var Z=y(O,T,v,m,C,D);if(Y){var et=j(Z.x,Z.y,m,C,Y);D==="auto"?(et.right&&(Z.x=Math.max(0,O-m-v)),et.top&&(Z.y=Math.max(0,T-C-v))):D==="top"||D==="bottom"?(et.left&&(Z.x=Y.x),et.right&&(Z.x=Y.x+Y.width-m),D==="top"&&et.top&&(Z.y=T+v),D==="bottom"&&et.bottom&&(Z.y=T-C-v)):(et.top&&(Z.y=Y.y),et.bottom&&(Z.y=Y.y+Y.height-C),D==="left"&&et.left&&(Z.x=O+v),D==="right"&&et.right&&(Z.x=O-m-v))}return Z}function s(O,T){var v=!1;return Object(e.each)(T,function(m){if(Object(e.hasKey)(O,m))return v=!0,!1}),v}var h=function(O){Object(rt.b)(T,O);function T(){return O!==null&&O.apply(this,arguments)||this}return T.prototype.getDefaultCfg=function(){var v=O.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},v),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+b.CONTAINER_CLASS+'"><div class="'+b.TITLE_CLASS+'"></div><ul class="'+b.LIST_CLASS+'"></ul></div>',itemTpl:'<li class="'+b.LIST_ITEM_CLASS+`" data-index={index}>
          <span class="`+b.MARKER_CLASS+`" style="background:{color}"></span>
          <span class="`+b.NAME_CLASS+`">{name}</span>:
          <span class="`+b.VALUE_CLASS+`">{value}</span>
        </li>`,xCrosshairTpl:'<div class="'+b.CROSSHAIR_X+'"></div>',yCrosshairTpl:'<div class="'+b.CROSSHAIR_Y+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:b.CONTAINER_CLASS,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:A})},T.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},T.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},T.prototype.show=function(){var v=this.getContainer();!v||this.destroyed||(this.set("visible",!0),Object(E.e)(v,{visibility:"visible"}),this.setCrossHairsVisible(!0))},T.prototype.hide=function(){var v=this.getContainer();!v||this.destroyed||(this.set("visible",!1),Object(E.e)(v,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},T.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},T.prototype.setLocation=function(v){this.set("x",v.x),this.set("y",v.y),this.resetPosition()},T.prototype.setCrossHairsVisible=function(v){var m=v?"":"none",C=this.get("xCrosshairDom"),D=this.get("yCrosshairDom");C&&Object(E.e)(C,{display:m}),D&&Object(E.e)(D,{display:m})},T.prototype.initContainer=function(){if(O.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var v=this.getHtmlContentNode();this.get("parent").appendChild(v),this.set("container",v),this.resetStyles(),this.applyStyles()}},T.prototype.updateInner=function(v){this.get("customContent")?this.renderCustomContent():(s(v,["title","showTitle"])&&this.resetTitle(),Object(e.hasKey)(v,"items")&&this.renderItems()),O.prototype.updateInner.call(this,v)},T.prototype.initDom=function(){this.cacheDoms()},T.prototype.removeDom=function(){O.prototype.removeDom.call(this),this.clearCrosshairs()},T.prototype.resetPosition=function(){var v=this.get("x"),m=this.get("y"),C=this.get("offset"),D=this.getOffset(),Y=D.offsetX,Z=D.offsetY,et=this.get("position"),dt=this.get("region"),ht=this.getContainer(),St=this.getBBox(),wt=St.width,xt=St.height,ft;dt&&(ft=Object(p.k)(dt));var Bt=n(v,m,C,wt,xt,et,ft);Object(E.e)(ht,{left:Object(p.l)(Bt.x+Y),top:Object(p.l)(Bt.y+Z)}),this.resetCrosshairs()},T.prototype.renderCustomContent=function(){var v=this.getHtmlContentNode(),m=this.get("parent"),C=this.get("container");C&&C.parentNode===m?m.replaceChild(v,C):m.appendChild(v),this.set("container",v),this.resetStyles(),this.applyStyles()},T.prototype.getHtmlContentNode=function(){var v,m=this.get("customContent");if(m){var C=m(this.get("title"),this.get("items"));Object(e.isElement)(C)?v=C:v=Object(E.b)(C)}return v},T.prototype.cacheDoms=function(){var v=this.getContainer(),m=v.getElementsByClassName(b.TITLE_CLASS)[0],C=v.getElementsByClassName(b.LIST_CLASS)[0];this.set("titleDom",m),this.set("listDom",C)},T.prototype.resetTitle=function(){var v=this.get("title"),m=this.get("showTitle");m&&v?this.setTitle(v):this.setTitle("")},T.prototype.setTitle=function(v){var m=this.get("titleDom");m&&(m.innerText=v)},T.prototype.resetCrosshairs=function(){var v=this.get("crosshairsRegion"),m=this.get("crosshairs");if(!v||!m)this.clearCrosshairs();else{var C=Object(p.k)(v),D=this.get("xCrosshairDom"),Y=this.get("yCrosshairDom");m==="x"?(this.resetCrosshair("x",C),Y&&(Y.remove(),this.set("yCrosshairDom",null))):m==="y"?(this.resetCrosshair("y",C),D&&(D.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",C),this.resetCrosshair("y",C)),this.setCrossHairsVisible(this.get("visible"))}},T.prototype.resetCrosshair=function(v,m){var C=this.checkCrosshair(v),D=this.get(v);v==="x"?Object(E.e)(C,{left:Object(p.l)(D),top:Object(p.l)(m.y),height:Object(p.l)(m.height)}):Object(E.e)(C,{top:Object(p.l)(D),left:Object(p.l)(m.x),width:Object(p.l)(m.width)})},T.prototype.checkCrosshair=function(v){var m=v+"CrosshairDom",C=v+"CrosshairTpl",D="CROSSHAIR_"+v.toUpperCase(),Y=b[D],Z=this.get(m),et=this.get("parent");return Z||(Z=Object(E.b)(this.get(C)),this.applyStyle(Y,Z),et.appendChild(Z),this.set(m,Z)),Z},T.prototype.renderItems=function(){this.clearItemDoms();var v=this.get("items"),m=this.get("itemTpl"),C=this.get("listDom");C&&(Object(e.each)(v,function(D){var Y=a.a.toCSSGradient(D.color),Z=Object(rt.a)(Object(rt.a)({},D),{color:Y}),et=Object(e.substitute)(m,Z),dt=Object(E.b)(et);C.appendChild(dt)}),this.applyChildrenStyles(C,this.get("domStyles")))},T.prototype.clearItemDoms=function(){this.get("listDom")&&Object(p.a)(this.get("listDom"))},T.prototype.clearCrosshairs=function(){var v=this.get("xCrosshairDom"),m=this.get("yCrosshairDom");v&&v.remove(),m&&m.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},T}(r.a),M=h},Cr25:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return Z});var rt=_("mrSG"),a=_("zJSt"),E=_("iTfj"),e=_("w02o"),r=_("tKoa"),p=_("YuPD"),b=Object(p.b)({},a.a.getDefaultOptions(),{legend:{position:"right"},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}});function S(et,dt){var ht=null;return Object(E.each)(et,function(St){typeof St[dt]=="number"&&(ht+=St[dt])}),ht}function l(et,dt){var ht;switch(et){case"inner":return ht="-30%",Object(E.isString)(dt)&&dt.endsWith("%")?parseFloat(dt)*.01>0?ht:dt:dt<0?dt:ht;case"outer":return ht=12,Object(E.isString)(dt)&&dt.endsWith("%")?parseFloat(dt)*.01<0?ht:dt:dt>0?dt:ht;default:return dt}}function A(et,dt){var ht=Object(E.filter)(et,function(St){var wt=St[dt];return typeof wt=="number"&&!isNaN(wt)||wt===null});return Object(p.j)(p.a.WARN,ht.length===et.length,"illegal data existed in chart data."),ht}function j(et,dt){return Object(E.every)(et,function(ht){return ht[dt]===0})}function y(et){var dt=et.chart,ht=et.options,St=ht.data,wt=ht.angleField,xt=ht.colorField,ft=ht.color,Bt=ht.pieStyle,Rt=A(St,wt);if(j(Rt,wt)){var Ot="$$percentage$$";Rt=Rt.map(function(ut){var vt;return Object(rt.a)(Object(rt.a)({},ut),(vt={},vt[Ot]=1/Rt.length,vt))}),dt.data(Rt);var X=Object(p.b)({},et,{options:{xField:"1",yField:Ot,seriesField:xt,isStack:!0,interval:{color:ft,style:Bt},args:{zIndexReversed:!0}}});Object(r.c)(X),dt.geometries[0].tooltip(xt+"*"+wt)}else{dt.data(Rt);var X=Object(p.b)({},et,{options:{xField:"1",yField:wt,seriesField:xt,isStack:!0,interval:{color:ft,style:Bt},args:{zIndexReversed:!0}}});Object(r.c)(X)}return et}function n(et){var dt,ht=et.chart,St=et.options,wt=St.meta,xt=St.colorField,ft=Object(p.b)({},wt);return ht.scale(ft,(dt={},dt[xt]={type:"cat"},dt)),et}function s(et){var dt=et.chart,ht=et.options,St=ht.radius,wt=ht.innerRadius,xt=ht.startAngle,ft=ht.endAngle;return dt.coordinate({type:"theta",cfg:{radius:St,innerRadius:wt,startAngle:xt,endAngle:ft}}),et}function h(et){var dt=et.chart,ht=et.options,St=ht.label,wt=ht.colorField,xt=ht.angleField,ft=dt.geometries[0];if(!St)ft.label(!1);else{var Bt=St.callback,Rt=Object(rt.c)(St,["callback"]),Ot=Object(p.o)(Rt);if(Ot.content){var X=Ot.content;Ot.content=function(Et,q,st){var it=Et[wt],z=Et[xt],P=dt.getScaleByField(xt),H=P==null?void 0:P.scale(z);return Object(E.isFunction)(X)?X(Object(rt.a)(Object(rt.a)({},Et),{percent:H}),q,st):Object(E.isString)(X)?Object(p.n)(X,{value:z,name:it,percentage:Object(E.isNumber)(H)&&!Object(E.isNil)(z)?(H*100).toFixed(2)+"%":null}):X}}var ut={inner:"",outer:"pie-outer",spider:"pie-spider"},vt=Ot.type?ut[Ot.type]:"pie-outer",pt=Ot.layout?Object(E.isArray)(Ot.layout)?Ot.layout:[Ot.layout]:[];Ot.layout=(vt?[{type:vt}]:[]).concat(pt),ft.label({fields:wt?[xt,wt]:[xt],callback:Bt,cfg:Object(rt.a)(Object(rt.a)({},Ot),{offset:l(Ot.type,Ot.offset),type:"pie"})})}return et}function M(et){var dt=et.chart,ht=et.options,St=ht.innerRadius,wt=ht.statistic,xt=ht.angleField,ft=ht.colorField,Bt=ht.meta;if(dt.getController("annotation").clear(!0),Object(p.e)(Object(e.b)())(et),St&&wt){var Rt=Object(p.b)({},b.statistic,wt),Ot=Rt.title,X=Rt.content;Ot!==!1&&(Ot=Object(p.b)({},{formatter:function(vt){return vt?vt[ft]:"\u603B\u8BA1"}},Ot)),X!==!1&&(X=Object(p.b)({},{formatter:function(vt,pt){var Et=Object(E.get)(Bt,[xt,"formatter"]),q=vt?vt[xt]:S(pt,xt);return Et?Et(q):q}},X)),Object(p.m)(dt,{statistic:{title:Ot,content:X},plotType:"pie"})}return et}function O(et){return Object(E.get)(et,["options","tooltip"])!==!1?Object(p.b)({},et,{options:{tooltip:{shared:!1}}}):et}function T(et){return Object(p.e)(y,n,e.j,s,e.d,function(dt){return Object(e.k)(O(dt))},h,e.i,M,e.c,e.a)(et)}var v=_("Ihc8"),m=_("qaDU"),C=function(et){Object(rt.b)(dt,et);function dt(){return et!==null&&et.apply(this,arguments)||this}return dt.prototype.getActiveElements=function(){var ht=v.Util.getDelegationObject(this.context);if(ht){var St=this.context.view,wt=ht.component,xt=ht.item,ft=wt.get("field");if(ft){var Bt=St.geometries[0].elements;return Bt.filter(function(Rt){return Rt.getModel().data[ft]===xt.value})}}return[]},dt.prototype.getActiveElementLabels=function(){var ht=this.context.view,St=this.getActiveElements(),wt=ht.geometries[0].labelsContainer.getChildren();return wt.filter(function(xt){return St.find(function(ft){return Object(E.isEqual)(ft.getData(),xt.get("data"))})})},dt.prototype.transfrom=function(ht){ht===void 0&&(ht=7.5);var St=this.getActiveElements(),wt=this.getActiveElementLabels();St.forEach(function(xt,ft){var Bt=wt[ft],Rt=xt.geometry.coordinate;if(Rt.isPolar&&Rt.isTransposed){var Ot=v.Util.getAngle(xt.getModel(),Rt),X=Ot.startAngle,ut=Ot.endAngle,vt=(X+ut)/2,pt=ht,Et=pt*Math.cos(vt),q=pt*Math.sin(vt);xt.shape.setMatrix(Object(m.a)([["t",Et,q]])),Bt.setMatrix(Object(m.a)([["t",Et,q]]))}})},dt.prototype.active=function(){this.transfrom()},dt.prototype.reset=function(){this.transfrom(0)},dt}(v.Action),D=_("mj6g"),Y=function(et){Object(rt.b)(dt,et);function dt(){return et!==null&&et.apply(this,arguments)||this}return dt.prototype.getAnnotations=function(ht){var St=ht||this.context.view;return St.getController("annotation").option},dt.prototype.getInitialAnnotation=function(){return this.initialAnnotation},dt.prototype.init=function(){var ht=this,St=this.context.view;St.removeInteraction("tooltip"),St.on("afterchangesize",function(){var wt=ht.getAnnotations(St);ht.initialAnnotation=wt})},dt.prototype.change=function(){var ht=this.context,St=ht.view,wt=ht.event,xt=this.getAnnotations();this.initialAnnotation||(this.initialAnnotation=xt);var ft=((wt==null?void 0:wt.data)||{}).data;if(wt.type.match("legend-item")){var Bt=v.Util.getDelegationObject(this.context),Rt=St.getGroupedFields()[0];if(Bt&&Rt){var Ot=Bt.item;ft=St.getData().find(function(H){return H[Rt]===Ot.value})}}if(ft){var X=St.getController("annotation");X.clear(!0);var ut=St.getScaleFields(),vt=ut[1],pt=ut[2],Et=St.getScaleByField(vt),q=St.getScaleByField(pt),st=xt.filter(function(H){return!Object(E.get)(H,"key","").match("statistic")}),it=xt.filter(function(H){return Object(E.get)(H,"key","").match("statistic")}),z=it.filter(function(H){return H.key==="top-statistic"}),P=it.filter(function(H){return H.key==="bottom-statistic"});Object(E.each)(it,function(H){var k,d;H.key==="top-statistic"?(k=q?q.getText(ft[pt]):null,d=P?"translate(-50%, -100%)":"translate(-50%, -50%)"):(k=Et?Et.getText(ft[vt]):ft[vt],d=z?"translate(-50%, 0)":"translate(-50%,-50%)"),st.push(Object(rt.a)(Object(rt.a)({},H),{html:function(F,V){var tt=V.getCoordinate(),ot=tt.getRadius()*tt.innerRadius*2,at=Object(E.isFunction)(H.style)?H.style():H.style;Object(D.d)(F,Object(rt.a)({width:ot+"px",transform:d},Object(D.a)(at)));var At=V.getData();return H.customHtml?H.customHtml(F,V,ft,At):(H.formatter&&(k=H.formatter(ft,At)),k?Object(E.isString)(k)?k:""+k:"<div></div>")}})),st.forEach(function(g){X.annotation(g)}),St.render(!0)})}},dt.prototype.reset=function(){var ht=this.context.view,St=ht.getController("annotation");St.clear(!0);var wt=this.getInitialAnnotation();Object(E.each)(wt,function(xt){ht.annotation()[xt.type](xt)}),ht.render(!0)},dt}(v.Action);Object(v.registerAction)("pie-statistic",Y),Object(v.registerInteraction)("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]}),Object(v.registerAction)("pie-legend",C),Object(v.registerInteraction)("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});var Z=function(et){Object(rt.b)(dt,et);function dt(){var ht=et!==null&&et.apply(this,arguments)||this;return ht.type="pie",ht}return dt.getDefaultOptions=function(){return b},dt.prototype.changeData=function(ht){var St=this.options,wt=this.options.angleField,xt=A(St.data,wt),ft=A(ht,wt);j(xt,wt)||j(ft,wt)?this.update({data:ht}):(this.updateOption({data:ht}),this.chart.data(ft),M({chart:this.chart,options:this.options}),this.chart.render(!0))},dt.prototype.getDefaultOptions=function(){return dt.getDefaultOptions()},dt.prototype.getSchemaAdaptor=function(){return T},dt}(a.a)},DMQx:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return Z});var rt=_("mrSG"),a=_("YuPD"),E=_("w02o"),e=_("iTfj"),r=_("Ihc8"),p=_("5OoT");function b(et,dt){return Object(a.b)({size:dt?32:80,spacing:dt?8:12,offset:dt?32:0,arrow:et.arrow!==!1&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:et.text!==!1&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:p.a}},et)}function S(et,dt){return Object(e.map)(dt.getModel().points,function(ht){return et.convertPoint(ht)})}function l(et,dt,ht){var St=et.view,wt=et.geometry,xt=et.group,ft=et.options,Bt=et.horizontal,Rt=ft.offset,Ot=ft.size,X=ft.arrow,ut=St.getCoordinate(),vt=S(ut,dt)[Bt?3:0],pt=S(ut,ht)[Bt?0:3],Et=pt.y-vt.y,q=pt.x-vt.x;if(typeof X!="boolean"){var st=X.headSize,it=ft.spacing,z;Bt?(q-st)/2<it?(it=Math.max(1,(q-st)/2),z=[[vt.x+it,vt.y-Rt],[vt.x+it,vt.y-Rt-Ot],[pt.x-it,pt.y-Rt-Ot/2]]):z=[[vt.x+it,vt.y-Rt],[vt.x+it,vt.y-Rt-Ot],[pt.x-it-st,pt.y-Rt-Ot],[pt.x-it,pt.y-Rt-Ot/2],[pt.x-it-st,pt.y-Rt]]:(Et-st)/2<it?(it=Math.max(1,(Et-st)/2),z=[[vt.x+Rt,vt.y+it],[vt.x+Rt+Ot,vt.y+it],[pt.x+Rt+Ot/2,pt.y-it]]):z=[[vt.x+Rt,vt.y+it],[vt.x+Rt+Ot,vt.y+it],[pt.x+Rt+Ot,pt.y-it-st],[pt.x+Rt+Ot/2,pt.y-it],[pt.x+Rt,pt.y-it-st]],xt.addShape("polygon",{id:St.id+"-conversion-tag-arrow-"+wt.getElementId(dt.getModel().mappingData),name:"conversion-tag-arrow",attrs:Object(rt.a)(Object(rt.a)({},X.style||{}),{points:z})})}}function A(et,dt,ht){var St,wt,xt,ft=et.view,Bt=et.geometry,Rt=et.group,Ot=et.options,X=et.field,ut=et.horizontal,vt=Ot.offset,pt=Ot.size;if(typeof Ot.text!="boolean"){var Et=ft.getCoordinate(),q=((St=Ot.text)===null||St===void 0?void 0:St.formatter)&&((wt=Ot.text)===null||wt===void 0?void 0:wt.formatter(dt.getData()[X],ht.getData()[X])),st=S(Et,dt)[ut?3:0],it=S(Et,ht)[ut?0:3],z=Rt.addShape("text",{id:ft.id+"-conversion-tag-text-"+Bt.getElementId(dt.getModel().mappingData),name:"conversion-tag-text",attrs:Object(rt.a)(Object(rt.a)({},((xt=Ot.text)===null||xt===void 0?void 0:xt.style)||{}),{text:q,x:ut?(st.x+it.x)/2:st.x+vt+pt/2,y:ut?st.y-vt-pt/2:(st.y+it.y)/2})});if(ut){var P=it.x-st.x,H=z.getBBox().width;if(H>P){var k=H/q.length,d=Math.max(1,Math.ceil(P/k)-1),g=q.slice(0,d)+"...";z.attr("text",g)}}}}function j(et,dt,ht){l(et,dt,ht),A(et,dt,ht)}function y(et,dt,ht){return dt===void 0&&(dt=!0),ht===void 0&&(ht=!1),function(St){var wt=St.options,xt=St.chart,ft=wt.conversionTag,Bt=wt.theme;return ft&&!ht&&(xt.theme(Object(a.b)({},Object(e.isObject)(Bt)?Bt:Object(r.getTheme)(Bt),{columnWidthRatio:1/3})),xt.annotation().shape({render:function(Ot,X){var ut=Ot.addGroup({id:xt.id+"-conversion-tag-group",name:"conversion-tag-group"}),vt=Object(e.find)(xt.geometries,function(q){return q.type==="interval"}),pt={view:X,geometry:vt,group:ut,field:et,horizontal:dt,options:b(ft,dt)},Et=dt?vt.elements:vt.elements.slice().reverse();Object(e.each)(Et,function(q,st){st>0&&j(pt,Et[st-1],q)})}})),St}}var n={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"};Object(r.registerInteraction)(n.hover,{start:[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"]}],end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]}),Object(r.registerInteraction)(n.click,{start:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"]}],end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});function s(et){return et===void 0&&(et=!1),function(dt){var ht=dt.chart,St=dt.options,wt=St.connectedArea,xt=function(){ht.removeInteraction(n.hover),ht.removeInteraction(n.click)};if(!et&&wt){var ft=wt.trigger||"hover";xt(),ht.interaction(n[ft])}else xt();return dt}}var h=_("tKoa"),M=_("sqD9"),O=_("DyAw");function T(et){var dt=et.options,ht=dt.legend,St=dt.seriesField,wt=dt.isStack;return St?ht!==!1&&(ht=Object(rt.a)({position:wt?"right-top":"top-left"},ht)):ht=!1,et.options.legend=ht,et}function v(et){var dt=et.chart,ht=et.options,St=ht.data,wt=ht.columnStyle,xt=ht.color,ft=ht.columnWidthRatio,Bt=ht.isPercent,Rt=ht.xField,Ot=ht.yField,X=ht.seriesField,ut=ht.tooltip;dt.data(Object(M.a)(St,Ot,Rt,Ot,Bt));var vt=Bt?Object(rt.a)({formatter:function(q){return{name:q[X]||q[Rt],value:(Number(q[Ot])*100).toFixed(2)+"%"}}},ut):ut,pt=Object(a.b)({},et,{options:{widthRatio:ft,tooltip:vt,interval:{style:wt,color:xt}}});return Object(h.c)(pt),et}function m(et){var dt,ht,St=et.options,wt=St.xAxis,xt=St.yAxis,ft=St.xField,Bt=St.yField,Rt=St.data,Ot=St.isPercent,X=Ot?{max:1,min:0,minLimit:0,maxLimit:1}:{};return Object(a.e)(Object(E.f)((dt={},dt[ft]=wt,dt[Bt]=xt,dt),(ht={},ht[ft]={type:"cat"},ht[Bt]=Object(rt.a)(Object(rt.a)({},Object(O.a)(Rt,Bt)),X),ht)))(et)}function C(et){var dt=et.chart,ht=et.options,St=ht.xAxis,wt=ht.yAxis,xt=ht.xField,ft=ht.yField;return St===!1?dt.axis(xt,!1):dt.axis(xt,St),wt===!1?dt.axis(ft,!1):dt.axis(ft,wt),et}function D(et){var dt=et.chart,ht=et.options,St=ht.legend,wt=ht.seriesField;return St&&wt?dt.legend(wt,St):St===!1&&dt.legend(!1),et}function Y(et){var dt=et.chart,ht=et.options,St=ht.label,wt=ht.yField,xt=ht.isRange,ft=Object(a.c)(dt,"interval");if(!St)ft.label(!1);else{var Bt=St.callback,Rt=Object(rt.c)(St,["callback"]);ft.label({fields:[wt],callback:Bt,cfg:Object(rt.a)({layout:(Rt==null?void 0:Rt.position)?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Object(a.o)(xt?Object(rt.a)({content:function(X){var ut;return(ut=X[wt])===null||ut===void 0?void 0:ut.join("-")}},Rt):Rt))})}return et}function Z(et,dt){dt===void 0&&(dt=!1);var ht=et.options,St=ht.seriesField;return Object(a.e)(T,E.j,v,m,C,D,E.k,E.h,E.g,Y,E.c,E.a,Object(E.b)(),y(ht.yField,!dt,!!St),s(!ht.isStack),E.e)(et)}},DdT1:function(Fn,Gt,_){"use strict";Gt.a=function(rt){rt.x0=Math.round(rt.x0),rt.y0=Math.round(rt.y0),rt.x1=Math.round(rt.x1),rt.y1=Math.round(rt.y1)}},Djfg:function(Fn,Gt,_){"use strict";var rt=_("XiRp"),a=_.n(rt),E=_("h4/5"),e=_.n(E),r=_("N9hJ"),p=_.n(r),b=_("3T7b"),S=_.n(b),l=_("B0vJ"),A=_.n(l),j=_("B2d+"),y=_.n(j)},DyAw:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return a}),_.d(Gt,"b",function(){return E});var rt=_("iTfj");function a(e,r){var p=e.filter(function(l){var A=Object(rt.get)(l,[r]);return Object(rt.isNumber)(A)&&!isNaN(A)}),b=p.every(function(l){return Object(rt.get)(l,[r])>=0}),S=p.every(function(l){return Object(rt.get)(l,[r])<=0});return b?{min:0}:S?{max:0}:{}}function E(e,r,p,b){if(!Array.isArray(e))return{nodes:[],links:[]};var S=[],l={},A=-1;return e.forEach(function(j){var y=j[r],n=j[p],s=j[b];l[y]||(l[y]={id:++A,name:y}),l[n]||(l[n]={id:++A,name:n}),S.push({source:l[y].id,target:l[n].id,value:s})}),{nodes:Object.values(l),links:S}}},EYNi:function(Fn,Gt,_){"use strict";_.d(Gt,"e",function(){return v}),_.d(Gt,"b",function(){return et}),_.d(Gt,"a",function(){return vt}),_.d(Gt,"c",function(){return A}),_.d(Gt,"d",function(){return z}),_.d(Gt,"f",function(){return rt});var rt={};_.r(rt),_.d(rt,"distance",function(){return e}),_.d(rt,"isNumberEqual",function(){return r}),_.d(rt,"getBBoxByArray",function(){return p}),_.d(rt,"getBBoxRange",function(){return b}),_.d(rt,"piMod",function(){return S});function a(k){return Math.min.apply(null,k)}function E(k){return Math.max.apply(null,k)}function e(k,d,g,F){var V=k-g,tt=d-F;return Math.sqrt(V*V+tt*tt)}function r(k,d){return Math.abs(k-d)<.001}function p(k,d){var g=a(k),F=a(d),V=E(k),tt=E(d);return{x:g,y:F,width:V-g,height:tt-F}}function b(k,d,g,F){return{minX:a([k,g]),maxX:E([k,g]),minY:a([d,F]),maxY:E([d,F])}}function S(k){return(k+Math.PI*2)%(Math.PI*2)}var l=_("ZxFD"),A={box:function(d,g,F,V){return p([d,F],[g,V])},length:function(d,g,F,V){return e(d,g,F,V)},pointAt:function(d,g,F,V,tt){return{x:(1-tt)*d+tt*F,y:(1-tt)*g+tt*V}},pointDistance:function(d,g,F,V,tt,ot){var at=(F-d)*(tt-d)+(V-g)*(ot-g);if(at<0)return e(d,g,tt,ot);var At=(F-d)*(F-d)+(V-g)*(V-g);return at>At?e(F,V,tt,ot):this.pointToLine(d,g,F,V,tt,ot)},pointToLine:function(d,g,F,V,tt,ot){var at=[F-d,V-g];if(l.exactEquals(at,[0,0]))return Math.sqrt((tt-d)*(tt-d)+(ot-g)*(ot-g));var At=[-at[1],at[0]];l.normalize(At,At);var yt=[tt-d,ot-g];return Math.abs(l.dot(yt,At))},tangentAngle:function(d,g,F,V){return Math.atan2(V-g,F-d)}},j=1e-4;function y(k,d,g,F,V,tt){var ot,at=Infinity,At=[g,F],yt=20;tt&&tt>200&&(yt=tt/10);for(var gt=1/yt,bt=gt/10,Tt=0;Tt<=yt;Tt++){var Dt=Tt*gt,Ut=[V.apply(null,k.concat([Dt])),V.apply(null,d.concat([Dt]))],jt=e(At[0],At[1],Ut[0],Ut[1]);jt<at&&(ot=Dt,at=jt)}if(ot===0)return{x:k[0],y:d[0]};if(ot===1){var Vt=k.length;return{x:k[Vt-1],y:d[Vt-1]}}at=Infinity;for(var Tt=0;Tt<32&&!(bt<j);Tt++){var Ht=ot-bt,re=ot+bt,Ut=[V.apply(null,k.concat([Ht])),V.apply(null,d.concat([Ht]))],jt=e(At[0],At[1],Ut[0],Ut[1]);if(Ht>=0&&jt<at)ot=Ht,at=jt;else{var pe=[V.apply(null,k.concat([re])),V.apply(null,d.concat([re]))],ye=e(At[0],At[1],pe[0],pe[1]);re<=1&&ye<at?(ot=re,at=ye):bt*=.5}}return{x:V.apply(null,k.concat([ot])),y:V.apply(null,d.concat([ot]))}}function n(k,d){for(var g=0,F=k.length,V=0;V<F;V++){var tt=k[V],ot=d[V],at=k[(V+1)%F],At=d[(V+1)%F];g+=e(tt,ot,at,At)}return g/2}function s(k,d,g,F){var V=1-F;return V*V*k+2*F*V*d+F*F*g}function h(k,d,g){var F=k+g-2*d;if(r(F,0))return[.5];var V=(k-d)/F;return V<=1&&V>=0?[V]:[]}function M(k,d,g,F){return 2*(1-F)*(d-k)+2*F*(g-d)}function O(k,d,g,F,V,tt,ot){var at=s(k,g,V,ot),At=s(d,F,tt,ot),yt=A.pointAt(k,d,g,F,ot),gt=A.pointAt(g,F,V,tt,ot);return[[k,d,yt.x,yt.y,at,At],[at,At,gt.x,gt.y,V,tt]]}function T(k,d,g,F,V,tt,ot){if(ot===0)return(e(k,d,g,F)+e(g,F,V,tt)+e(k,d,V,tt))/2;var at=O(k,d,g,F,V,tt,.5),At=at[0],yt=at[1];return At.push(ot-1),yt.push(ot-1),T.apply(null,At)+T.apply(null,yt)}var v={box:function(d,g,F,V,tt,ot){var at=h(d,F,tt)[0],At=h(g,V,ot)[0],yt=[d,tt],gt=[g,ot];return at!==void 0&&yt.push(s(d,F,tt,at)),At!==void 0&&gt.push(s(g,V,ot,At)),p(yt,gt)},length:function(d,g,F,V,tt,ot){return T(d,g,F,V,tt,ot,3)},nearestPoint:function(d,g,F,V,tt,ot,at,At){return y([d,F,tt],[g,V,ot],at,At,s)},pointDistance:function(d,g,F,V,tt,ot,at,At){var yt=this.nearestPoint(d,g,F,V,tt,ot,at,At);return e(yt.x,yt.y,at,At)},interpolationAt:s,pointAt:function(d,g,F,V,tt,ot,at){return{x:s(d,F,tt,at),y:s(g,V,ot,at)}},divide:function(d,g,F,V,tt,ot,at){return O(d,g,F,V,tt,ot,at)},tangentAngle:function(d,g,F,V,tt,ot,at){var At=M(d,F,tt,at),yt=M(g,V,ot,at),gt=Math.atan2(yt,At);return S(gt)}};function m(k,d,g,F,V){var tt=1-V;return tt*tt*tt*k+3*d*V*tt*tt+3*g*V*V*tt+F*V*V*V}function C(k,d,g,F,V){var tt=1-V;return 3*(tt*tt*(d-k)+2*tt*V*(g-d)+V*V*(F-g))}function D(k,d,g,F){var V=-3*k+9*d-9*g+3*F,tt=6*k-12*d+6*g,ot=3*d-3*k,at=[],At,yt,gt;if(r(V,0))r(tt,0)||(At=-ot/tt,At>=0&&At<=1&&at.push(At));else{var bt=tt*tt-4*V*ot;r(bt,0)?at.push(-tt/(2*V)):bt>0&&(gt=Math.sqrt(bt),At=(-tt+gt)/(2*V),yt=(-tt-gt)/(2*V),At>=0&&At<=1&&at.push(At),yt>=0&&yt<=1&&at.push(yt))}return at}function Y(k,d,g,F,V,tt,ot,at,At){var yt=m(k,g,V,ot,At),gt=m(d,F,tt,at,At),bt=A.pointAt(k,d,g,F,At),Tt=A.pointAt(g,F,V,tt,At),Dt=A.pointAt(V,tt,ot,at,At),Ut=A.pointAt(bt.x,bt.y,Tt.x,Tt.y,At),jt=A.pointAt(Tt.x,Tt.y,Dt.x,Dt.y,At);return[[k,d,bt.x,bt.y,Ut.x,Ut.y,yt,gt],[yt,gt,jt.x,jt.y,Dt.x,Dt.y,ot,at]]}function Z(k,d,g,F,V,tt,ot,at,At){if(At===0)return n([k,g,V,ot],[d,F,tt,at]);var yt=Y(k,d,g,F,V,tt,ot,at,.5),gt=yt[0],bt=yt[1];return gt.push(At-1),bt.push(At-1),Z.apply(null,gt)+Z.apply(null,bt)}var et={extrema:D,box:function(d,g,F,V,tt,ot,at,At){for(var yt=[d,at],gt=[g,At],bt=D(d,F,tt,at),Tt=D(g,V,ot,At),Dt=0;Dt<bt.length;Dt++)yt.push(m(d,F,tt,at,bt[Dt]));for(var Dt=0;Dt<Tt.length;Dt++)gt.push(m(g,V,ot,At,Tt[Dt]));return p(yt,gt)},length:function(d,g,F,V,tt,ot,at,At){return Z(d,g,F,V,tt,ot,at,At,3)},nearestPoint:function(d,g,F,V,tt,ot,at,At,yt,gt,bt){return y([d,F,tt,at],[g,V,ot,At],yt,gt,m,bt)},pointDistance:function(d,g,F,V,tt,ot,at,At,yt,gt,bt){var Tt=this.nearestPoint(d,g,F,V,tt,ot,at,At,yt,gt,bt);return e(Tt.x,Tt.y,yt,gt)},interpolationAt:m,pointAt:function(d,g,F,V,tt,ot,at,At,yt){return{x:m(d,F,tt,at,yt),y:m(g,V,ot,At,yt)}},divide:function(d,g,F,V,tt,ot,at,At,yt){return Y(d,g,F,V,tt,ot,at,At,yt)},tangentAngle:function(d,g,F,V,tt,ot,at,At,yt){var gt=C(d,F,tt,at,yt),bt=C(g,V,ot,At,yt);return S(Math.atan2(bt,gt))}};function dt(k,d){var g=Math.abs(k);return d>0?g:g*-1}var ht={box:function(d,g,F,V){return{x:d-F,y:g-V,width:F*2,height:V*2}},length:function(d,g,F,V){return Math.PI*(3*(F+V)-Math.sqrt((3*F+V)*(F+3*V)))},nearestPoint:function(d,g,F,V,tt,ot){var at=F,At=V;if(at===0||At===0)return{x:d,y:g};for(var yt=tt-d,gt=ot-g,bt=Math.abs(yt),Tt=Math.abs(gt),Dt=at*at,Ut=At*At,jt=Math.PI/4,Vt,Ht,re=0;re<4;re++){Vt=at*Math.cos(jt),Ht=At*Math.sin(jt);var pe=(Dt-Ut)*Math.pow(Math.cos(jt),3)/at,ye=(Ut-Dt)*Math.pow(Math.sin(jt),3)/At,we=Vt-pe,Re=Ht-ye,He=bt-pe,pn=Tt-ye,fn=Math.hypot(Re,we),Rn=Math.hypot(pn,He),Cn=fn*Math.asin((we*pn-Re*He)/(fn*Rn)),kn=Cn/Math.sqrt(Dt+Ut-Vt*Vt-Ht*Ht);jt+=kn,jt=Math.min(Math.PI/2,Math.max(0,jt))}return{x:d+dt(Vt,yt),y:g+dt(Ht,gt)}},pointDistance:function(d,g,F,V,tt,ot){var at=this.nearestPoint(d,g,F,V,tt,ot);return e(at.x,at.y,tt,ot)},pointAt:function(d,g,F,V,tt){var ot=2*Math.PI*tt;return{x:d+F*Math.cos(ot),y:g+V*Math.sin(ot)}},tangentAngle:function(d,g,F,V,tt){var ot=2*Math.PI*tt,at=Math.atan2(V*Math.cos(ot),-F*Math.sin(ot));return S(at)}};function St(k,d,g,F,V,tt,ot,at){return-1*g*Math.cos(V)*Math.sin(at)-F*Math.sin(V)*Math.cos(at)}function wt(k,d,g,F,V,tt,ot,at){return-1*g*Math.sin(V)*Math.sin(at)+F*Math.cos(V)*Math.cos(at)}function xt(k,d,g){return Math.atan(-d/k*Math.tan(g))}function ft(k,d,g){return Math.atan(d/(k*Math.tan(g)))}function Bt(k,d,g,F,V,tt){return g*Math.cos(V)*Math.cos(tt)-F*Math.sin(V)*Math.sin(tt)+k}function Rt(k,d,g,F,V,tt){return g*Math.sin(V)*Math.cos(tt)+F*Math.cos(V)*Math.sin(tt)+d}function Ot(k,d,g,F){var V=Math.atan2(F*k,g*d);return(V+Math.PI*2)%(Math.PI*2)}function X(k,d,g){return{x:k*Math.cos(g),y:d*Math.sin(g)}}function ut(k,d,g){var F=Math.cos(g),V=Math.sin(g);return[k*F-d*V,k*V+d*F]}var vt={box:function(d,g,F,V,tt,ot,at){for(var At=xt(F,V,tt),yt=Infinity,gt=-Infinity,bt=[ot,at],Tt=-Math.PI*2;Tt<=Math.PI*2;Tt+=Math.PI){var Dt=At+Tt;ot<at?ot<Dt&&Dt<at&&bt.push(Dt):at<Dt&&Dt<ot&&bt.push(Dt)}for(var Tt=0;Tt<bt.length;Tt++){var Ut=Bt(d,g,F,V,tt,bt[Tt]);Ut<yt&&(yt=Ut),Ut>gt&&(gt=Ut)}for(var jt=ft(F,V,tt),Vt=Infinity,Ht=-Infinity,re=[ot,at],Tt=-Math.PI*2;Tt<=Math.PI*2;Tt+=Math.PI){var pe=jt+Tt;ot<at?ot<pe&&pe<at&&re.push(pe):at<pe&&pe<ot&&re.push(pe)}for(var Tt=0;Tt<re.length;Tt++){var ye=Rt(d,g,F,V,tt,re[Tt]);ye<Vt&&(Vt=ye),ye>Ht&&(Ht=ye)}return{x:yt,y:Vt,width:gt-yt,height:Ht-Vt}},length:function(d,g,F,V,tt,ot,at){},nearestPoint:function(d,g,F,V,tt,ot,at,At,yt){var gt=ut(At-d,yt-g,-tt),bt=gt[0],Tt=gt[1],Dt=ht.nearestPoint(0,0,F,V,bt,Tt),Ut=Ot(F,V,Dt.x,Dt.y);Ut<ot?Dt=X(F,V,ot):Ut>at&&(Dt=X(F,V,at));var jt=ut(Dt.x,Dt.y,tt);return{x:jt[0]+d,y:jt[1]+g}},pointDistance:function(d,g,F,V,tt,ot,at,At,yt){var gt=this.nearestPoint(d,g,F,V,At,yt);return e(gt.x,gt.y,At,yt)},pointAt:function(d,g,F,V,tt,ot,at,At){var yt=(at-ot)*At+ot;return{x:Bt(d,g,F,V,tt,yt),y:Rt(d,g,F,V,tt,yt)}},tangentAngle:function(d,g,F,V,tt,ot,at,At){var yt=(at-ot)*At+ot,gt=St(d,g,F,V,tt,ot,at,yt),bt=wt(d,g,F,V,tt,ot,at,yt);return S(Math.atan2(bt,gt))}};function pt(k){for(var d=0,g=[],F=0;F<k.length-1;F++){var V=k[F],tt=k[F+1],ot=e(V[0],V[1],tt[0],tt[1]),at={from:V,to:tt,length:ot};g.push(at),d+=ot}return{segments:g,totalLength:d}}function Et(k){if(k.length<2)return 0;for(var d=0,g=0;g<k.length-1;g++){var F=k[g],V=k[g+1];d+=e(F[0],F[1],V[0],V[1])}return d}function q(k,d){if(d>1||d<0||k.length<2)return null;var g=pt(k),F=g.segments,V=g.totalLength;if(V===0)return{x:k[0][0],y:k[0][1]};for(var tt=0,ot=null,at=0;at<F.length;at++){var At=F[at],yt=At.from,gt=At.to,bt=At.length/V;if(d>=tt&&d<=tt+bt){var Tt=(d-tt)/bt;ot=A.pointAt(yt[0],yt[1],gt[0],gt[1],Tt);break}tt+=bt}return ot}function st(k,d){if(d>1||d<0||k.length<2)return 0;for(var g=pt(k),F=g.segments,V=g.totalLength,tt=0,ot=0,at=0;at<F.length;at++){var At=F[at],yt=At.from,gt=At.to,bt=At.length/V;if(d>=tt&&d<=tt+bt){ot=Math.atan2(gt[1]-yt[1],gt[0]-yt[0]);break}tt+=bt}return ot}function it(k,d,g){for(var F=Infinity,V=0;V<k.length-1;V++){var tt=k[V],ot=k[V+1],at=A.pointDistance(tt[0],tt[1],ot[0],ot[1],d,g);at<F&&(F=at)}return F}var z={box:function(d){for(var g=[],F=[],V=0;V<d.length;V++){var tt=d[V];g.push(tt[0]),F.push(tt[1])}return p(g,F)},length:function(d){return Et(d)},pointAt:function(d,g){return q(d,g)},pointDistance:function(d,g,F){return it(d,g,F)},tangentAngle:function(d,g){return st(d,g)}};function P(k){var d=k.slice(0);return k.length&&d.push(k[0]),d}var H={box:function(d){return z.box(d)},length:function(d){return Et(P(d))},pointAt:function(d,g){return q(P(d),g)},pointDistance:function(d,g,F){return it(P(d),g,F)},tangentAngle:function(d,g){return st(P(d),g)}}},EkMX:function(Fn,Gt,_){"use strict";var rt={};_.r(rt),_.d(rt,"easeLinear",function(){return ht}),_.d(rt,"easeQuad",function(){return xt}),_.d(rt,"easeQuadIn",function(){return St}),_.d(rt,"easeQuadOut",function(){return wt}),_.d(rt,"easeQuadInOut",function(){return xt}),_.d(rt,"easeCubic",function(){return Rt}),_.d(rt,"easeCubicIn",function(){return ft}),_.d(rt,"easeCubicOut",function(){return Bt}),_.d(rt,"easeCubicInOut",function(){return Rt}),_.d(rt,"easePoly",function(){return vt}),_.d(rt,"easePolyIn",function(){return X}),_.d(rt,"easePolyOut",function(){return ut}),_.d(rt,"easePolyInOut",function(){return vt}),_.d(rt,"easeSin",function(){return it}),_.d(rt,"easeSinIn",function(){return q}),_.d(rt,"easeSinOut",function(){return st}),_.d(rt,"easeSinInOut",function(){return it}),_.d(rt,"easeExp",function(){return k}),_.d(rt,"easeExpIn",function(){return P}),_.d(rt,"easeExpOut",function(){return H}),_.d(rt,"easeExpInOut",function(){return k}),_.d(rt,"easeCircle",function(){return F}),_.d(rt,"easeCircleIn",function(){return d}),_.d(rt,"easeCircleOut",function(){return g}),_.d(rt,"easeCircleInOut",function(){return F}),_.d(rt,"easeBounce",function(){return jt}),_.d(rt,"easeBounceIn",function(){return Ut}),_.d(rt,"easeBounceOut",function(){return jt}),_.d(rt,"easeBounceInOut",function(){return Vt}),_.d(rt,"easeBack",function(){return ye}),_.d(rt,"easeBackIn",function(){return re}),_.d(rt,"easeBackOut",function(){return pe}),_.d(rt,"easeBackInOut",function(){return ye}),_.d(rt,"easeElastic",function(){return fn}),_.d(rt,"easeElasticIn",function(){return pn}),_.d(rt,"easeElasticOut",function(){return fn}),_.d(rt,"easeElasticInOut",function(){return Rn});var a=_("mrSG"),E=_("e0ae"),e=_("Mw2x"),r=_("sstZ"),p=_("iTfj"),b=0,S=0,l=0,A=1e3,j,y,n=0,s=0,h=0,M=typeof performance=="object"&&performance.now?performance:Date,O=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(G){setTimeout(G,17)};function T(){return s||(O(v),s=M.now()+h)}function v(){s=0}function m(){this._call=this._time=this._next=null}m.prototype=C.prototype={constructor:m,restart:function(B,$,lt){if(typeof B!="function")throw new TypeError("callback is not a function");lt=(lt==null?T():+lt)+($==null?0:+$),!this._next&&y!==this&&(y?y._next=this:j=this,y=this),this._call=B,this._time=lt,dt()},stop:function(){this._call&&(this._call=null,this._time=Infinity,dt())}};function C(G,B,$){var lt=new m;return lt.restart(G,B,$),lt}function D(){T(),++b;for(var G=j,B;G;)(B=s-G._time)>=0&&G._call.call(null,B),G=G._next;--b}function Y(){s=(n=M.now())+h,b=S=0;try{D()}finally{b=0,et(),s=0}}function Z(){var G=M.now(),B=G-n;B>A&&(h-=B,n=G)}function et(){for(var G,B=j,$,lt=Infinity;B;)B._call?(lt>B._time&&(lt=B._time),G=B,B=B._next):($=B._next,B._next=null,B=G?G._next=$:j=$);y=G,dt(lt)}function dt(G){if(!b){S&&(S=clearTimeout(S));var B=G-s;B>24?(G<Infinity&&(S=setTimeout(Y,G-M.now()-h)),l&&(l=clearInterval(l))):(l||(n=M.now(),l=setInterval(Z,A)),b=1,O(Y))}}function ht(G){return+G}function St(G){return G*G}function wt(G){return G*(2-G)}function xt(G){return((G*=2)<=1?G*G:--G*(2-G)+1)/2}function ft(G){return G*G*G}function Bt(G){return--G*G*G+1}function Rt(G){return((G*=2)<=1?G*G*G:(G-=2)*G*G+2)/2}var Ot=3,X=function G(B){B=+B;function $(lt){return Math.pow(lt,B)}return $.exponent=G,$}(Ot),ut=function G(B){B=+B;function $(lt){return 1-Math.pow(1-lt,B)}return $.exponent=G,$}(Ot),vt=function G(B){B=+B;function $(lt){return((lt*=2)<=1?Math.pow(lt,B):2-Math.pow(2-lt,B))/2}return $.exponent=G,$}(Ot),pt=Math.PI,Et=pt/2;function q(G){return+G==1?1:1-Math.cos(G*Et)}function st(G){return Math.sin(G*Et)}function it(G){return(1-Math.cos(pt*G))/2}function z(G){return(Math.pow(2,-10*G)-.0009765625)*1.0009775171065494}function P(G){return z(1-+G)}function H(G){return 1-z(G)}function k(G){return((G*=2)<=1?z(1-G):2-z(G-1))/2}function d(G){return 1-Math.sqrt(1-G*G)}function g(G){return Math.sqrt(1- --G*G)}function F(G){return((G*=2)<=1?1-Math.sqrt(1-G*G):Math.sqrt(1-(G-=2)*G)+1)/2}var V=4/11,tt=6/11,ot=8/11,at=3/4,At=9/11,yt=10/11,gt=15/16,bt=21/22,Tt=63/64,Dt=1/V/V;function Ut(G){return 1-jt(1-G)}function jt(G){return(G=+G)<V?Dt*G*G:G<ot?Dt*(G-=tt)*G+at:G<yt?Dt*(G-=At)*G+gt:Dt*(G-=bt)*G+Tt}function Vt(G){return((G*=2)<=1?1-jt(1-G):jt(G-1)+1)/2}var Ht=1.70158,re=function G(B){B=+B;function $(lt){return(lt=+lt)*lt*(B*(lt-1)+lt)}return $.overshoot=G,$}(Ht),pe=function G(B){B=+B;function $(lt){return--lt*lt*((lt+1)*B+lt)+1}return $.overshoot=G,$}(Ht),ye=function G(B){B=+B;function $(lt){return((lt*=2)<1?lt*lt*((B+1)*lt-B):(lt-=2)*lt*((B+1)*lt+B)+2)/2}return $.overshoot=G,$}(Ht),we=2*Math.PI,Re=1,He=.3,pn=function G(B,$){var lt=Math.asin(1/(B=Math.max(1,B)))*($/=we);function Ft(Jt){return B*z(- --Jt)*Math.sin((lt-Jt)/$)}return Ft.amplitude=function(Jt){return G(Jt,$*we)},Ft.period=function(Jt){return G(B,Jt)},Ft}(Re,He),fn=function G(B,$){var lt=Math.asin(1/(B=Math.max(1,B)))*($/=we);function Ft(Jt){return 1-B*z(Jt=+Jt)*Math.sin((Jt+lt)/$)}return Ft.amplitude=function(Jt){return G(Jt,$*we)},Ft.period=function(Jt){return G(B,Jt)},Ft}(Re,He),Rn=function G(B,$){var lt=Math.asin(1/(B=Math.max(1,B)))*($/=we);function Ft(Jt){return((Jt=Jt*2-1)<0?B*z(-Jt)*Math.sin((lt-Jt)/$):2-B*z(Jt)*Math.sin((lt+Jt)/$))/2}return Ft.amplitude=function(Jt){return G(Jt,$*we)},Ft.period=function(Jt){return G(B,Jt)},Ft}(Re,He),Cn=function(G,B,$){G.prototype=B.prototype=$,$.constructor=G};function kn(G,B){var $=Object.create(G.prototype);for(var lt in B)$[lt]=B[lt];return $}function Mn(){}var Tn=.7,Un=1/Tn,Kn="\\s*([+-]?\\d+)\\s*",tr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",or="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nr=/^#([0-9a-f]{3,8})$/,er=new RegExp("^rgb\\("+[Kn,Kn,Kn]+"\\)$"),Sr=new RegExp("^rgb\\("+[or,or,or]+"\\)$"),Vr=new RegExp("^rgba\\("+[Kn,Kn,Kn,tr]+"\\)$"),ti=new RegExp("^rgba\\("+[or,or,or,tr]+"\\)$"),hi=new RegExp("^hsl\\("+[tr,or,or]+"\\)$"),Fi=new RegExp("^hsla\\("+[tr,or,or,tr]+"\\)$"),to={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Cn(Mn,Li,{copy:function(B){return Object.assign(new this.constructor,this,B)},displayable:function(){return this.rgb().displayable()},hex:si,formatHex:si,formatHsl:Ti,formatRgb:_i,toString:_i});function si(){return this.rgb().formatHex()}function Ti(){return Kr(this).formatHsl()}function _i(){return this.rgb().formatRgb()}function Li(G){var B,$;return G=(G+"").trim().toLowerCase(),(B=nr.exec(G))?($=B[1].length,B=parseInt(B[1],16),$===6?Vi(B):$===3?new pr(B>>8&15|B>>4&240,B>>4&15|B&240,(B&15)<<4|B&15,1):$===8?ro(B>>24&255,B>>16&255,B>>8&255,(B&255)/255):$===4?ro(B>>12&15|B>>8&240,B>>8&15|B>>4&240,B>>4&15|B&240,((B&15)<<4|B&15)/255):null):(B=er.exec(G))?new pr(B[1],B[2],B[3],1):(B=Sr.exec(G))?new pr(B[1]*255/100,B[2]*255/100,B[3]*255/100,1):(B=Vr.exec(G))?ro(B[1],B[2],B[3],B[4]):(B=ti.exec(G))?ro(B[1]*255/100,B[2]*255/100,B[3]*255/100,B[4]):(B=hi.exec(G))?Xr(B[1],B[2]/100,B[3]/100,1):(B=Fi.exec(G))?Xr(B[1],B[2]/100,B[3]/100,B[4]):to.hasOwnProperty(G)?Vi(to[G]):G==="transparent"?new pr(NaN,NaN,NaN,0):null}function Vi(G){return new pr(G>>16&255,G>>8&255,G&255,1)}function ro(G,B,$,lt){return lt<=0&&(G=B=$=NaN),new pr(G,B,$,lt)}function jr(G){return G instanceof Mn||(G=Li(G)),G?(G=G.rgb(),new pr(G.r,G.g,G.b,G.opacity)):new pr}function Ji(G,B,$,lt){return arguments.length===1?jr(G):new pr(G,B,$,lt==null?1:lt)}function pr(G,B,$,lt){this.r=+G,this.g=+B,this.b=+$,this.opacity=+lt}Cn(pr,Ji,kn(Mn,{brighter:function(B){return B=B==null?Un:Math.pow(Un,B),new pr(this.r*B,this.g*B,this.b*B,this.opacity)},darker:function(B){return B=B==null?Tn:Math.pow(Tn,B),new pr(this.r*B,this.g*B,this.b*B,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yr,formatHex:Yr,formatRgb:Br,toString:Br}));function Yr(){return"#"+Nr(this.r)+Nr(this.g)+Nr(this.b)}function Br(){var G=this.opacity;return G=isNaN(G)?1:Math.max(0,Math.min(1,G)),(G===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(G===1?")":", "+G+")")}function Nr(G){return G=Math.max(0,Math.min(255,Math.round(G)||0)),(G<16?"0":"")+G.toString(16)}function Xr(G,B,$,lt){return lt<=0?G=B=$=NaN:$<=0||$>=1?G=B=NaN:B<=0&&(G=NaN),new fi(G,B,$,lt)}function Kr(G){if(G instanceof fi)return new fi(G.h,G.s,G.l,G.opacity);if(G instanceof Mn||(G=Li(G)),!G)return new fi;if(G instanceof fi)return G;G=G.rgb();var B=G.r/255,$=G.g/255,lt=G.b/255,Ft=Math.min(B,$,lt),Jt=Math.max(B,$,lt),ie=NaN,se=Jt-Ft,Ce=(Jt+Ft)/2;return se?(B===Jt?ie=($-lt)/se+($<lt)*6:$===Jt?ie=(lt-B)/se+2:ie=(B-$)/se+4,se/=Ce<.5?Jt+Ft:2-Jt-Ft,ie*=60):se=Ce>0&&Ce<1?0:ie,new fi(ie,se,Ce,G.opacity)}function ni(G,B,$,lt){return arguments.length===1?Kr(G):new fi(G,B,$,lt==null?1:lt)}function fi(G,B,$,lt){this.h=+G,this.s=+B,this.l=+$,this.opacity=+lt}Cn(fi,ni,kn(Mn,{brighter:function(B){return B=B==null?Un:Math.pow(Un,B),new fi(this.h,this.s,this.l*B,this.opacity)},darker:function(B){return B=B==null?Tn:Math.pow(Tn,B),new fi(this.h,this.s,this.l*B,this.opacity)},rgb:function(){var B=this.h%360+(this.h<0)*360,$=isNaN(B)||isNaN(this.s)?0:this.s,lt=this.l,Ft=lt+(lt<.5?lt:1-lt)*$,Jt=2*lt-Ft;return new pr($r(B>=240?B-240:B+120,Jt,Ft),$r(B,Jt,Ft),$r(B<120?B+240:B-120,Jt,Ft),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var B=this.opacity;return B=isNaN(B)?1:Math.max(0,Math.min(1,B)),(B===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(B===1?")":", "+B+")")}}));function $r(G,B,$){return(G<60?B+($-B)*G/60:G<180?$:G<240?B+($-B)*(240-G)/60:B)*255}function ci(G,B,$,lt,Ft){var Jt=G*G,ie=Jt*G;return((1-3*G+3*Jt-ie)*B+(4-6*Jt+3*ie)*$+(1+3*G+3*Jt-3*ie)*lt+ie*Ft)/6}var Qr=function(G){var B=G.length-1;return function($){var lt=$<=0?$=0:$>=1?($=1,B-1):Math.floor($*B),Ft=G[lt],Jt=G[lt+1],ie=lt>0?G[lt-1]:2*Ft-Jt,se=lt<B-1?G[lt+2]:2*Jt-Ft;return ci(($-lt/B)*B,ie,Ft,Jt,se)}},gi=function(G){var B=G.length;return function($){var lt=Math.floor((($%=1)<0?++$:$)*B),Ft=G[(lt+B-1)%B],Jt=G[lt%B],ie=G[(lt+1)%B],se=G[(lt+2)%B];return ci(($-lt/B)*B,Ft,Jt,ie,se)}},Oi=function(G){return function(){return G}};function bi(G,B){return function($){return G+$*B}}function zi(G,B,$){return G=Math.pow(G,$),B=Math.pow(B,$)-G,$=1/$,function(lt){return Math.pow(G+lt*B,$)}}function Qi(G,B){var $=B-G;return $?bi(G,$>180||$<-180?$-360*Math.round($/360):$):Oi(isNaN(G)?B:G)}function io(G){return(G=+G)==1?Wi:function(B,$){return $-B?zi(B,$,G):Oi(isNaN(B)?$:B)}}function Wi(G,B){var $=B-G;return $?bi(G,$):Oi(isNaN(G)?B:G)}var Zi=function G(B){var $=io(B);function lt(Ft,Jt){var ie=$((Ft=Ji(Ft)).r,(Jt=Ji(Jt)).r),se=$(Ft.g,Jt.g),Ce=$(Ft.b,Jt.b),Ee=Wi(Ft.opacity,Jt.opacity);return function(un){return Ft.r=ie(un),Ft.g=se(un),Ft.b=Ce(un),Ft.opacity=Ee(un),Ft+""}}return lt.gamma=G,lt}(1);function Pi(G){return function(B){var $=B.length,lt=new Array($),Ft=new Array($),Jt=new Array($),ie,se;for(ie=0;ie<$;++ie)se=Ji(B[ie]),lt[ie]=se.r||0,Ft[ie]=se.g||0,Jt[ie]=se.b||0;return lt=G(lt),Ft=G(Ft),Jt=G(Jt),se.opacity=1,function(Ce){return se.r=lt(Ce),se.g=Ft(Ce),se.b=Jt(Ce),se+""}}}var no=Pi(Qr),Mo=Pi(gi),ao=function(G,B){B||(B=[]);var $=G?Math.min(B.length,G.length):0,lt=B.slice(),Ft;return function(Jt){for(Ft=0;Ft<$;++Ft)lt[Ft]=G[Ft]*(1-Jt)+B[Ft]*Jt;return lt}};function uo(G){return ArrayBuffer.isView(G)&&!(G instanceof DataView)}var xo=function(G,B){return(uo(B)?ao:oe)(G,B)};function oe(G,B){var $=B?B.length:0,lt=G?Math.min($,G.length):0,Ft=new Array(lt),Jt=new Array($),ie;for(ie=0;ie<lt;++ie)Ft[ie]=rn(G[ie],B[ie]);for(;ie<$;++ie)Jt[ie]=B[ie];return function(se){for(ie=0;ie<lt;++ie)Jt[ie]=Ft[ie](se);return Jt}}var Kt=function(G,B){var $=new Date;return G=+G,B=+B,function(lt){return $.setTime(G*(1-lt)+B*lt),$}},te=function(G,B){return G=+G,B=+B,function($){return G*(1-$)+B*$}},Oe=function(G,B){var $={},lt={},Ft;(G===null||typeof G!="object")&&(G={}),(B===null||typeof B!="object")&&(B={});for(Ft in B)Ft in G?$[Ft]=rn(G[Ft],B[Ft]):lt[Ft]=B[Ft];return function(Jt){for(Ft in $)lt[Ft]=$[Ft](Jt);return lt}},Qe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,On=new RegExp(Qe.source,"g");function Vn(G){return function(){return G}}function Xn(G){return function(B){return G(B)+""}}var $e=function(G,B){var $=Qe.lastIndex=On.lastIndex=0,lt,Ft,Jt,ie=-1,se=[],Ce=[];for(G=G+"",B=B+"";(lt=Qe.exec(G))&&(Ft=On.exec(B));)(Jt=Ft.index)>$&&(Jt=B.slice($,Jt),se[ie]?se[ie]+=Jt:se[++ie]=Jt),(lt=lt[0])===(Ft=Ft[0])?se[ie]?se[ie]+=Ft:se[++ie]=Ft:(se[++ie]=null,Ce.push({i:ie,x:te(lt,Ft)})),$=On.lastIndex;return $<B.length&&(Jt=B.slice($),se[ie]?se[ie]+=Jt:se[++ie]=Jt),se.length<2?Ce[0]?Xn(Ce[0].x):Vn(B):(B=Ce.length,function(Ee){for(var un=0,xn;un<B;++un)se[(xn=Ce[un]).i]=xn.x(Ee);return se.join("")})},rn=function(G,B){var $=typeof B,lt;return B==null||$==="boolean"?Oi(B):($==="number"?te:$==="string"?(lt=Li(B))?(B=lt,Zi):$e:B instanceof Li?Zi:B instanceof Date?Kt:uo(B)?ao:Array.isArray(B)?oe:typeof B.valueOf!="function"&&typeof B.toString!="function"||isNaN(B)?Oe:te)(G,B)},on=_("tvuL"),$n=function(B){return["fill","stroke","fillStyle","strokeStyle"].includes(B)},vr=function(B){return/^[r,R,L,l]{1}[\s]*\(/.test(B)},ar=[1,0,0,0,1,0,0,0,1];function rr(G,B,$){var lt={},Ft=B.fromAttrs,Jt=B.toAttrs;if(!G.destroyed){var ie;for(var se in Jt)if(!Object(p.isEqual)(Ft[se],Jt[se]))if(se==="path"){var Ce=Jt[se],Ee=Ft[se];Ce.length>Ee.length?(Ce=on.parsePathString(Jt[se]),Ee=on.parsePathString(Ft[se]),Ee=on.fillPathByDiff(Ee,Ce),Ee=on.formatPath(Ee,Ce),B.fromAttrs.path=Ee,B.toAttrs.path=Ce):B.pathFormatted||(Ce=on.parsePathString(Jt[se]),Ee=on.parsePathString(Ft[se]),Ee=on.formatPath(Ee,Ce),B.fromAttrs.path=Ee,B.toAttrs.path=Ce,B.pathFormatted=!0),lt[se]=[];for(var un=0;un<Ce.length;un++){for(var xn=Ce[un],zt=Ee[un],Yt=[],Se=0;Se<xn.length;Se++)Object(p.isNumber)(xn[Se])&&zt&&Object(p.isNumber)(zt[Se])?(ie=rn(zt[Se],xn[Se]),Yt.push(ie($))):Yt.push(xn[Se]);lt[se].push(Yt)}}else if(se==="matrix"){var Wt=xo(Ft[se]||ar,Jt[se]||ar),ue=Wt($);lt[se]=ue}else $n(se)&&vr(Jt[se])?lt[se]=Jt[se]:Object(p.isFunction)(Jt[se])||(ie=rn(Ft[se],Jt[se]),lt[se]=ie($));G.attr(lt)}}function Fr(G,B,$){var lt=B.startTime,Ft=B.delay;if($<lt+Ft||B._paused)return!1;var Jt,ie=B.duration,se=B.easing;if($=$-lt-B.delay,B.repeat)Jt=$%ie/ie,Jt=rt[se](Jt);else if(Jt=$/ie,Jt<1)Jt=rt[se](Jt);else return B.onFrame?G.attr(B.onFrame(1)):G.attr(B.toAttrs),!0;if(B.onFrame){var Ce=B.onFrame(Jt);G.attr(Ce)}else rr(G,B,Jt);return!1}var Ar=function(){function G(B){this.animators=[],this.current=0,this.timer=null,this.canvas=B}return G.prototype.initTimer=function(){var B=this,$=!1,lt,Ft,Jt;this.timer=C(function(ie){if(B.current=ie,B.animators.length>0){for(var se=B.animators.length-1;se>=0;se--){if(lt=B.animators[se],lt.destroyed){B.removeAnimator(se);continue}if(!lt.isAnimatePaused()){Ft=lt.get("animations");for(var Ce=Ft.length-1;Ce>=0;Ce--)Jt=Ft[Ce],$=Fr(lt,Jt,ie),$&&(Ft.splice(Ce,1),$=!1,Jt.callback&&Jt.callback())}Ft.length===0&&B.removeAnimator(se)}var Ee=B.canvas.get("autoDraw");Ee||B.canvas.draw()}})},G.prototype.addAnimator=function(B){this.animators.push(B)},G.prototype.removeAnimator=function(B){this.animators.splice(B,1)},G.prototype.isAnimating=function(){return!!this.animators.length},G.prototype.stop=function(){this.timer&&this.timer.stop()},G.prototype.stopAllAnimations=function(B){B===void 0&&(B=!0),this.animators.forEach(function($){$.stopAnimate(B)}),this.animators=[],this.canvas.draw()},G.prototype.getTime=function(){return this.current},G}(),wr=Ar,xr=_("5eLp"),Er=40,Ir=0,Lr=":",Pr=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Dr(G,B){for(var $ in G)if(G.hasOwnProperty($)&&$.indexOf(Lr+B)>=0)return!0;return!1}function ri(G,B,$){$.name=B,$.target=G,$.currentTarget=G,$.delegateTarget=G,G.emit(B,$)}function vi(G,B,$){if($.bubbles){var lt=void 0,Ft=!1;if(B==="mouseenter"?(lt=$.fromShape,Ft=!0):B==="mouseleave"&&(Ft=!0,lt=$.toShape),G.isCanvas()&&Ft)return;if(lt&&Object(r.g)(G,lt)){$.bubbles=!1;return}$.name=B,$.currentTarget=G,$.delegateTarget=G,G.emit(B,$)}}var ii=function(){function G(B){var $=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(lt){var Ft=lt.type;$._triggerEvent(Ft,lt)},this._onDocumentMove=function(lt){var Ft=$.canvas,Jt=Ft.get("el");if(Jt!==lt.target&&($.dragging||$.currentShape)){var ie=$._getPointInfo(lt);$.dragging&&$._emitEvent("drag",lt,ie,$.draggingShape)}},this._onDocumentMouseUp=function(lt){var Ft=$.canvas,Jt=Ft.get("el");if(Jt!==lt.target&&$.dragging){var ie=$._getPointInfo(lt);$.draggingShape&&$._emitEvent("drop",lt,ie,null),$._emitEvent("dragend",lt,ie,$.draggingShape),$._afterDrag($.draggingShape,ie,lt)}},this.canvas=B.canvas}return G.prototype.init=function(){this._bindEvents()},G.prototype._bindEvents=function(){var B=this,$=this.canvas.get("el");Object(r.a)(Pr,function(lt){$.addEventListener(lt,B._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},G.prototype._clearEvents=function(){var B=this,$=this.canvas.get("el");Object(r.a)(Pr,function(lt){$.removeEventListener(lt,B._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},G.prototype._getEventObj=function(B,$,lt,Ft,Jt,ie){var se=new xr.a(B,$);return se.fromShape=Jt,se.toShape=ie,se.x=lt.x,se.y=lt.y,se.clientX=lt.clientX,se.clientY=lt.clientY,se.propagationPath.push(Ft),se},G.prototype._getShape=function(B,$){return this.canvas.getShape(B.x,B.y,$)},G.prototype._getPointInfo=function(B){var $=this.canvas,lt=$.getClientByEvent(B),Ft=$.getPointByEvent(B);return{x:Ft.x,y:Ft.y,clientX:lt.x,clientY:lt.y}},G.prototype._triggerEvent=function(B,$){var lt=this._getPointInfo($),Ft=this._getShape(lt,$),Jt=this["_on"+B],ie=!1;if(Jt)Jt.call(this,lt,Ft,$);else{var se=this.currentShape;B==="mouseenter"||B==="dragenter"||B==="mouseover"?(this._emitEvent(B,$,lt,null,null,Ft),Ft&&this._emitEvent(B,$,lt,Ft,null,Ft),B==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",$,lt,null)):B==="mouseleave"||B==="dragleave"||B==="mouseout"?(ie=!0,se&&this._emitEvent(B,$,lt,se,se,null),this._emitEvent(B,$,lt,null,se,null),B==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",$,lt,null)):this._emitEvent(B,$,lt,Ft,null,null)}if(ie||(this.currentShape=Ft),Ft&&!Ft.get("destroyed")){var Ce=this.canvas,Ee=Ce.get("el");Ee.style.cursor=Ft.attr("cursor")||Ce.get("cursor")}},G.prototype._onmousedown=function(B,$,lt){lt.button===Ir&&(this.mousedownShape=$,this.mousedownPoint=B,this.mousedownTimeStamp=lt.timeStamp),this._emitEvent("mousedown",lt,B,$,null,null)},G.prototype._emitMouseoverEvents=function(B,$,lt,Ft){var Jt=this.canvas.get("el");lt!==Ft&&(lt&&(this._emitEvent("mouseout",B,$,lt,lt,Ft),this._emitEvent("mouseleave",B,$,lt,lt,Ft),(!Ft||Ft.get("destroyed"))&&(Jt.style.cursor=this.canvas.get("cursor"))),Ft&&(this._emitEvent("mouseover",B,$,Ft,lt,Ft),this._emitEvent("mouseenter",B,$,Ft,lt,Ft)))},G.prototype._emitDragoverEvents=function(B,$,lt,Ft,Jt){Ft?(Ft!==lt&&(lt&&this._emitEvent("dragleave",B,$,lt,lt,Ft),this._emitEvent("dragenter",B,$,Ft,lt,Ft)),Jt||this._emitEvent("dragover",B,$,Ft)):lt&&this._emitEvent("dragleave",B,$,lt,lt,Ft),Jt&&this._emitEvent("dragover",B,$,Ft)},G.prototype._afterDrag=function(B,$,lt){B&&(B.set("capture",!0),this.draggingShape=null),this.dragging=!1;var Ft=this._getShape($,lt);Ft!==B&&this._emitMouseoverEvents(lt,$,B,Ft),this.currentShape=Ft},G.prototype._onmouseup=function(B,$,lt){if(lt.button===Ir){var Ft=this.draggingShape;this.dragging?(Ft&&this._emitEvent("drop",lt,B,$),this._emitEvent("dragend",lt,B,Ft),this._afterDrag(Ft,B,lt)):(this._emitEvent("mouseup",lt,B,$),$===this.mousedownShape&&this._emitEvent("click",lt,B,$),this.mousedownShape=null,this.mousedownPoint=null)}},G.prototype._ondragover=function(B,$,lt){lt.preventDefault();var Ft=this.currentShape;this._emitDragoverEvents(lt,B,Ft,$,!0)},G.prototype._onmousemove=function(B,$,lt){var Ft=this.canvas,Jt=this.currentShape,ie=this.draggingShape;if(this.dragging)ie&&this._emitDragoverEvents(lt,B,Jt,$,!1),this._emitEvent("drag",lt,B,ie);else{var se=this.mousedownPoint;if(se){var Ce=this.mousedownShape,Ee=lt.timeStamp,un=Ee-this.mousedownTimeStamp,xn=se.clientX-B.clientX,zt=se.clientY-B.clientY,Yt=xn*xn+zt*zt;un>120||Yt>Er?Ce&&Ce.get("draggable")?(ie=this.mousedownShape,ie.set("capture",!1),this.draggingShape=ie,this.dragging=!0,this._emitEvent("dragstart",lt,B,ie),this.mousedownShape=null,this.mousedownPoint=null):!Ce&&Ft.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",lt,B,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(lt,B,Jt,$),this._emitEvent("mousemove",lt,B,$)):(this._emitMouseoverEvents(lt,B,Jt,$),this._emitEvent("mousemove",lt,B,$))}else this._emitMouseoverEvents(lt,B,Jt,$),this._emitEvent("mousemove",lt,B,$)}},G.prototype._emitEvent=function(B,$,lt,Ft,Jt,ie){var se=this._getEventObj(B,$,lt,Ft,Jt,ie);if(Ft){se.shape=Ft,ri(Ft,B,se);for(var Ce=Ft.getParent();Ce;)Ce.emitDelegation(B,se),se.propagationStopped||vi(Ce,B,se),se.propagationPath.push(Ce),Ce=Ce.getParent()}else{var Ee=this.canvas;ri(Ee,B,se)}},G.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},G}(),Si=ii,Ui="px",Yi=Object(E.a)(),Bi=Yi&&Yi.name==="firefox",Di=function(G){Object(a.b)(B,G);function B($){var lt=G.call(this,$)||this;return lt.initContainer(),lt.initDom(),lt.initEvents(),lt.initTimeline(),lt}return B.prototype.getDefaultCfg=function(){var $=G.prototype.getDefaultCfg.call(this);return $.cursor="default",$.supportCSSTransform=!1,$},B.prototype.initContainer=function(){var $=this.get("container");Object(r.h)($)&&($=document.getElementById($),this.set("container",$))},B.prototype.initDom=function(){var $=this.createDom();this.set("el",$);var lt=this.get("container");lt.appendChild($),this.setDOMSize(this.get("width"),this.get("height"))},B.prototype.initEvents=function(){var $=new Si({canvas:this});$.init(),this.set("eventController",$)},B.prototype.initTimeline=function(){var $=new wr(this);this.set("timeline",$)},B.prototype.setDOMSize=function($,lt){var Ft=this.get("el");r.c&&(Ft.style.width=$+Ui,Ft.style.height=lt+Ui)},B.prototype.changeSize=function($,lt){this.setDOMSize($,lt),this.set("width",$),this.set("height",lt),this.onCanvasChange("changeSize")},B.prototype.getRenderer=function(){return this.get("renderer")},B.prototype.getCursor=function(){return this.get("cursor")},B.prototype.setCursor=function($){this.set("cursor",$);var lt=this.get("el");r.c&&lt&&(lt.style.cursor=$)},B.prototype.getPointByEvent=function($){var lt=this.get("supportCSSTransform");if(lt){if(Bi&&!Object(r.e)($.layerX)&&$.layerX!==$.offsetX)return{x:$.layerX,y:$.layerY};if(!Object(r.e)($.offsetX))return{x:$.offsetX,y:$.offsetY}}var Ft=this.getClientByEvent($),Jt=Ft.x,ie=Ft.y;return this.getPointByClient(Jt,ie)},B.prototype.getClientByEvent=function($){var lt=$;return $.touches&&($.type==="touchend"?lt=$.changedTouches[0]:lt=$.touches[0]),{x:lt.clientX,y:lt.clientY}},B.prototype.getPointByClient=function($,lt){var Ft=this.get("el"),Jt=Ft.getBoundingClientRect();return{x:$-Jt.left,y:lt-Jt.top}},B.prototype.getClientByPoint=function($,lt){var Ft=this.get("el"),Jt=Ft.getBoundingClientRect();return{x:$+Jt.left,y:lt+Jt.top}},B.prototype.draw=function(){},B.prototype.removeDom=function(){var $=this.get("el");$.parentNode.removeChild($)},B.prototype.clearEvents=function(){var $=this.get("eventController");$.destroy()},B.prototype.isCanvas=function(){return!0},B.prototype.getParent=function(){return null},B.prototype.destroy=function(){var $=this.get("timeline");this.get("destroyed")||(this.clear(),$&&$.stop(),this.clearEvents(),this.removeDom(),G.prototype.destroy.call(this))},B}(e.a),ve=Gt.a=Di},Em2t:function(Fn,Gt,_){var rt=_("bahg"),a=_("quyA"),E=_("0JQy");function e(r){return a(r)?E(r):rt(r)}Fn.exports=e},"F/eT":function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return rt});function rt(a){return typeof a=="number"&&!isNaN(a)}},FAXy:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return C});var rt=_("mrSG"),a=_("zJSt"),E=_("iTfj"),e=_("w02o"),r=_("YuPD"),p=_("tKoa"),b="liquid";function S(D){return[{percent:D,type:b}]}function l(D){var Y=D.chart,Z=D.options,et=Z.percent,dt=Z.color,ht=Z.liquidStyle,St=Z.radius,wt=Z.outline,xt=Z.wave;Y.scale({percent:{min:0,max:1}}),Y.data(S(et));var ft=Object(r.b)({},D,{options:{xField:"type",yField:"percent",widthRatio:St,interval:{color:dt,style:ht,shape:"liquid-fill-gauge"}}}),Bt=Object(p.c)(ft).ext,Rt=Bt.geometry;return Rt.customInfo({radius:St,outline:wt,wave:xt}),Y.legend(!1),Y.axis(!1),Y.tooltip(!1),D}function A(D,Y){var Z=D.chart,et=D.options,dt=et.statistic,ht=et.percent,St=et.meta;if(Z.getController("annotation").clear(!0),dt.content&&!dt.content.formatter){var wt=Object(E.get)(St,["percent","formatter"]);dt.content.formatter=function(xt){var ft=xt.percent;return wt?wt(ft):(ft*100).toFixed(2)+"%"}}return Object(r.m)(Z,{statistic:dt,plotType:"liquid"},{percent:ht}),Y&&Z.render(!0),D}function j(D){return Object(r.e)(l,A,Object(e.f)({}),e.a,e.j,e.c)(D)}var y=_("Ihc8"),n=_("qaDU"),s=5e3;function h(D,Y,Z){return D+(Y-D)*Z}function M(D){var Y=Object(rt.a)({opacity:1},D.style);return D.color&&!Y.fill&&(Y.fill=D.color),Y}function O(D){var Y={fill:"#fff",fillOpacity:0,lineWidth:4},Z=Object(E.mix)({},Y,D.style);return D.color&&!Z.stroke&&(Z.stroke=D.color),Object(E.isNumber)(D.opacity)&&(Z.opacity=Z.strokeOpacity=D.opacity),Z}function T(D,Y,Z,et){return Y===0?[[D+1/2*Z/Math.PI/2,et/2],[D+1/2*Z/Math.PI,et],[D+Z/4,et]]:Y===1?[[D+1/2*Z/Math.PI/2*(Math.PI-2),et],[D+1/2*Z/Math.PI/2*(Math.PI-1),et/2],[D+Z/4,0]]:Y===2?[[D+1/2*Z/Math.PI/2,-et/2],[D+1/2*Z/Math.PI,-et],[D+Z/4,-et]]:[[D+1/2*Z/Math.PI/2*(Math.PI-2),-et],[D+1/2*Z/Math.PI/2*(Math.PI-1),-et/2],[D+Z/4,0]]}function v(D,Y,Z,et,dt,ht,St){for(var wt=Math.ceil(2*D/Z*4)*4,xt=[],ft=et;ft<-Math.PI*2;)ft+=Math.PI*2;for(;ft>0;)ft-=Math.PI*2;ft=ft/Math.PI/2*Z;var Bt=ht-D+ft-D*2;xt.push(["M",Bt,Y]);for(var Rt=0,Ot=0;Ot<wt;++Ot){var X=Ot%4,ut=T(Ot*Z/4,X,Z,dt);xt.push(["C",ut[0][0]+Bt,-ut[0][1]+Y,ut[1][0]+Bt,-ut[1][1]+Y,ut[2][0]+Bt,-ut[2][1]+Y]),Ot===wt-1&&(Rt=ut[2][0])}return xt.push(["L",Rt+Bt,St+D]),xt.push(["L",Bt,St+D]),xt.push(["Z"]),xt}function m(D,Y,Z,et,dt,ht,St,wt,xt){for(var ft=dt.fill,Bt=dt.opacity,Rt=St.getBBox(),Ot=Rt.maxX-Rt.minX,X=Rt.maxY-Rt.minY,ut=0;ut<et;ut++){var vt=et<=1?0:ut/(et-1),pt=ht.addShape("path",{name:"waterwave-path",attrs:{path:v(wt,Rt.minY+X*Z,xt,0,Ot/32,D,Y),fill:ft,opacity:h(.2,.9,vt)*Bt}});try{var Et=Object(n.a)([["t",xt,0]]);pt.stopAnimate(),pt.animate({matrix:Et},{duration:h(.5*s,s,vt),repeat:!0})}catch(q){console.warn("off-screen group animate error!")}}}Object(y.registerShape)("interval","liquid-fill-gauge",{draw:function(Y,Z){var et=.5,dt=.5,ht=Y.customInfo,St=ht.radius,wt=ht.outline,xt=ht.wave,ft=wt.border,Bt=wt.distance,Rt=xt.count,Ot=xt.length,X=Object(E.reduce)(Y.points,function(P,H){return Math.min(P,H.x)},Infinity),ut=this.parsePoint({x:et,y:dt}),vt=this.parsePoint({x:X,y:dt}),pt=ut.x-vt.x,Et=Math.min(pt,vt.y*St),q=M(Y),st=O(Y);Z.addShape("circle",{name:"wrap",attrs:Object(E.mix)(st,{x:ut.x,y:ut.y,r:Et,fill:"transparent",lineWidth:ft})});var it=Z.addGroup({name:"waves"}),z=it.setClip({type:"circle",attrs:{x:ut.x,y:ut.y,r:Et-Bt-ft/2}});return m(ut.x,ut.y,1-Y.points[1].y,Rt,q,it,z,Et*2,Ot),Z}});var C=function(D){Object(rt.b)(Y,D);function Y(){var Z=D!==null&&D.apply(this,arguments)||this;return Z.type="liquid",Z}return Y.prototype.getDefaultOptions=function(){return{color:"#6a99f9",radius:.9,statistic:{title:!1,content:{formatter:function(et){var dt=et.percent;return(dt*100).toFixed(2)+"%"},style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192}}},Y.prototype.changeData=function(Z){this.updateOption({percent:Z}),this.chart.data(S(Z)),A({chart:this.chart,options:this.options},!0)},Y.prototype.getSchemaAdaptor=function(){return j},Y}(a.a)},FH2j:function(Fn,Gt,_){"use strict";_.d(Gt,"getAdjust",function(){return r}),_.d(Gt,"registerAdjust",function(){return p});var rt=_("Qci9"),a=_("WbAE"),E=_.n(a),e={},r=function(S){return e[S.toLowerCase()]},p=function(S,l){if(r(S))throw new Error("Adjust type '"+S+"' existed.");e[S.toLowerCase()]=l}},FIfw:function(Fn,Gt,_){},FLLP:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return Y});var rt=_("mrSG"),a=_("zJSt"),E=_("iTfj"),e=_("w02o"),r=_("tKoa"),p=_("YuPD"),b="$$yField$$",S="$$diffField$$",l="$$absoluteField$$",A="$$isTotal$$";function j(Z,et,dt,ht,St){var wt,xt=[];if(Object(E.reduce)(Z,function(Bt,Rt){var Ot;Object(p.j)(p.a.WARN,Object(E.isNumber)(Rt[dt]),Rt[dt]+" is not a valid number");var X=Object(E.isUndefined)(Rt[dt])?null:Rt[dt];return xt.push(Object(rt.a)(Object(rt.a)({},Rt),(Ot={},Ot[ht]=[Bt,Bt+X],Ot))),Bt+X},0),xt.length&&St){var ft=Object(E.get)(xt,[[Z.length-1],ht,[1]]);xt.push((wt={},wt[et]=St.label,wt[dt]=ft,wt[ht]=[0,ft],wt))}return xt}function y(Z,et,dt,ht){var St=j(Z,et,dt,b,ht);return St.map(function(wt,xt){var ft;return Object(E.isObject)(wt)?Object(rt.a)(Object(rt.a)({},wt),(ft={},ft[l]=wt[b][1],ft[S]=wt[b][1]-wt[b][0],ft[A]=xt===Z.length,ft)):wt})}var n=_("Ihc8");function s(Z){for(var et=[],dt=0;dt<Z.length;dt++){var ht=Z[dt];if(ht){var St=dt===0?"M":"L";et.push([St,ht.x,ht.y])}}var wt=Z[0];return et.push(["L",wt.x,wt.y]),et.push(["z"]),et}function h(Z){return Object(p.b)({},Z.defaultStyle,Z.style,{fill:Z.color})}Object(n.registerShape)("interval","waterfall",{draw:function(et,dt){var ht=et.customInfo,St=et.points,wt=et.nextPoints,xt=dt.addGroup(),ft=this.parsePath(s(St)),Bt=h(et);xt.addShape("path",{attrs:Object(rt.a)(Object(rt.a)({},Bt),{path:ft})});var Rt=Object(E.get)(ht,"leaderLine");if(Rt&&wt){var Ot=[["M",St[2].x,St[2].y],["L",wt[0].x,wt[0].y]];St[2].y===wt[1].y&&(Ot[1]=["L",wt[1].x,wt[1].y]),Ot=this.parsePath(Ot),xt.addShape("path",{attrs:Object(rt.a)({path:Ot},Rt.style||{})})}return xt}});function M(Z){var et=Z.chart,dt=Z.options,ht=dt.data,St=dt.xField,wt=dt.yField,xt=dt.total,ft=dt.leaderLine,Bt=dt.columnWidthRatio,Rt=dt.waterfallStyle,Ot=dt.risingFill,X=dt.fallingFill,ut=dt.color;et.data(y(ht,St,wt,xt));var vt=ut||function(st){return Object(E.get)(st,[A])?Object(E.get)(xt,["style","fill"],""):Object(E.get)(st,[b,1])-Object(E.get)(st,[b,0])>0?Ot:X},pt=Object(p.b)({},Z,{options:{xField:St,yField:b,seriesField:St,rawFields:[wt,S,A,b],widthRatio:Bt,interval:{style:Rt,shape:"waterfall",color:vt}}}),Et=Object(r.c)(pt).ext,q=Et.geometry;return q.customInfo({leaderLine:ft}),Z}function O(Z){var et,dt,ht=Z.options,St=ht.xAxis,wt=ht.yAxis,xt=ht.xField,ft=ht.yField,Bt=ht.meta,Rt=Object(p.b)({},{alias:ft},Object(E.get)(Bt,ft));return Object(p.e)(Object(e.f)((et={},et[xt]=St,et[ft]=wt,et[b]=wt,et),Object(p.b)({},Bt,(dt={},dt[b]=Rt,dt[S]=Rt,dt[l]=Rt,dt))))(Z)}function T(Z){var et=Z.chart,dt=Z.options,ht=dt.xAxis,St=dt.yAxis,wt=dt.xField,xt=dt.yField;return ht===!1?et.axis(wt,!1):et.axis(wt,ht),St===!1?(et.axis(xt,!1),et.axis(b,!1)):(et.axis(xt,St),et.axis(b,St)),Z}function v(Z){var et=Z.chart,dt=Z.options,ht=dt.legend,St=dt.total,wt=dt.risingFill,xt=dt.fallingFill;if(ht===!1)et.legend(!1);else{var ft=[{name:"\u589E\u52A0",value:"increase",marker:{symbol:"square",style:{r:5,fill:wt}}},{name:"\u51CF\u5C11",value:"decrease",marker:{symbol:"square",style:{r:5,fill:xt}}}];St&&ft.push({name:St.label||"",value:"total",marker:{symbol:"square",style:Object(p.b)({},{r:5},Object(E.get)(St,"style"))}}),et.legend(Object(p.b)({},{custom:!0,position:"top",items:ft},ht)),et.removeInteraction("legend-filter")}return Z}function m(Z){var et=Z.chart,dt=Z.options,ht=dt.label,St=dt.labelMode,wt=dt.xField,xt=Object(p.c)(et,"interval");if(!ht)xt.label(!1);else{var ft=ht.callback,Bt=Object(rt.c)(ht,["callback"]);xt.label({fields:St==="absolute"?[l,wt]:[S,wt],callback:ft,cfg:Object(p.o)(Bt)})}return Z}function C(Z){var et=Z.chart,dt=Z.options,ht=dt.tooltip,St=dt.xField,wt=dt.yField;if(ht!==!1){et.tooltip(Object(rt.a)({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[wt]},ht));var xt=et.geometries[0];(ht==null?void 0:ht.formatter)?xt.tooltip(St+"*"+wt,ht.formatter):xt.tooltip(wt)}else et.tooltip(!1);return Z}function D(Z){return Object(p.e)(M,O,T,v,C,m,e.i,e.j,e.c,e.a,Object(e.b)())(Z)}var Y=function(Z){Object(rt.b)(et,Z);function et(){var dt=Z!==null&&Z.apply(this,arguments)||this;return dt.type="waterfall",dt}return et.prototype.changeData=function(dt){var ht=this.options,St=ht.xField,wt=ht.yField,xt=ht.total;this.updateOption({data:dt}),this.chart.changeData(y(dt,St,wt,xt))},et.prototype.getSchemaAdaptor=function(){return D},et.prototype.getDefaultOptions=function(){return{label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{label:"\u603B\u8BA1",style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}}},et}(a.a)},FPPI:function(Fn,Gt,_){"use strict";Gt.a=function(rt,a,E,e,r){for(var p=rt.children,b,S=-1,l=p.length,A=rt.value&&(e-a)/rt.value;++S<l;)b=p[S],b.y0=E,b.y1=r,b.x0=a,b.x1=a+=b.value*A}},FxDU:function(Fn,Gt,_){"use strict";Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.createSensor=void 0;var rt=_("QO+J"),a=_("j5sG"),E=typeof ResizeObserver!="undefined"?a.createSensor:rt.createSensor;Gt.createSensor=E},I4jL:function(Fn,Gt,_){"use strict";_.d(Gt,"b",function(){return E}),_.d(Gt,"c",function(){return e});var rt=_("FPPI"),a=_("7IPS"),E=(1+Math.sqrt(5))/2;function e(r,p,b,S,l,A){for(var j=[],y=p.children,n,s,h=0,M=0,O=y.length,T,v,m=p.value,C,D,Y,Z,et,dt,ht;h<O;){T=l-b,v=A-S;do C=y[M++].value;while(!C&&M<O);for(D=Y=C,dt=Math.max(v/T,T/v)/(m*r),ht=C*C*dt,et=Math.max(Y/ht,ht/D);M<O;++M){if(C+=s=y[M].value,s<D&&(D=s),s>Y&&(Y=s),ht=C*C*dt,Z=Math.max(Y/ht,ht/D),Z>et){C-=s;break}et=Z}j.push(n={value:C,dice:T<v,children:y.slice(h,M)}),n.dice?Object(rt.a)(n,b,S,l,m?S+=v*C/m:A):Object(a.a)(n,b,S,m?b+=T*C/m:l,A),m-=C,h=M}return j}Gt.a=function r(p){function b(S,l,A,j,y){e(p,S,l,A,j,y)}return b.ratio=function(S){return r((S=+S)>1?S:1)},b}(E)},I7nc:function(Fn,Gt,_){"use strict";_.d(Gt,"b",function(){return E}),_.d(Gt,"a",function(){return e});var rt=_("iTfj"),a="Invalid field: it must be a string!";function E(r,p){var b=r.field,S=r.fields;if(Object(rt.isString)(b))return b;if(Object(rt.isArray)(b))return console.warn(a),b[0];if(console.warn(a+" will try to get fields instead."),Object(rt.isString)(S))return S;if(Object(rt.isArray)(S)&&S.length)return S[0];if(p)return p;throw new TypeError(a)}function e(r){var p=[];return r&&r.each?r.each(function(b){p.push(b)}):r&&r.eachNode&&r.eachNode(function(b){p.push(b)}),p}},IeU1:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return rt}),_.d(Gt,"b",function(){return a});function rt(E){return E==null?null:a(E)}function a(E){if(typeof E!="function")throw new Error;return E}},Ihc8:function(Fn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"VERSION",function(){return Or}),_.d(Gt,"Chart",function(){return gu}),_.d(Gt,"View",function(){return es}),_.d(Gt,"Event",function(){return Vo}),_.d(Gt,"ComponentController",function(){return Do}),_.d(Gt,"TooltipController",function(){return Fs}),_.d(Gt,"Geometry",function(){return la}),_.d(Gt,"Element",function(){return ca}),_.d(Gt,"GeometryLabel",function(){return Fe}),_.d(Gt,"Interaction",function(){return lr}),_.d(Gt,"Action",function(){return lt}),_.d(Gt,"Facet",function(){return Di}),_.d(Gt,"InteractionAction",function(){return lt}),_.d(Gt,"registerComponentController",function(){return yr}),_.d(Gt,"registerGeometry",function(){return Ho}),_.d(Gt,"registerShape",function(){return fo}),_.d(Gt,"registerShapeFactory",function(){return oa}),_.d(Gt,"getShapeFactory",function(){return bs}),_.d(Gt,"registerGeometryLabel",function(){return jn}),_.d(Gt,"registerGeometryLabelLayout",function(){return Wo}),_.d(Gt,"getGeometryLabel",function(){return ys}),_.d(Gt,"getGeometryLabelLayout",function(){return Us}),_.d(Gt,"getInteraction",function(){return Xi}),_.d(Gt,"registerInteraction",function(){return $i}),_.d(Gt,"registerAction",function(){return Ee}),_.d(Gt,"getActionClass",function(){return Ce}),_.d(Gt,"getFacet",function(){return G}),_.d(Gt,"registerFacet",function(){return B}),_.d(Gt,"getTheme",function(){return xi}),_.d(Gt,"registerTheme",function(){return Rs}),_.d(Gt,"registerEngine",function(){return T}),_.d(Gt,"getEngine",function(){return O}),_.d(Gt,"registerAnimation",function(){return Eo}),_.d(Gt,"getAnimation",function(){return Gs}),_.d(Gt,"LAYER",function(){return E}),_.d(Gt,"DIRECTION",function(){return e}),_.d(Gt,"Types",function(){return _e}),_.d(Gt,"Coordinate",function(){return pr}),_.d(Gt,"Scale",function(){return we.c}),_.d(Gt,"Util",function(){return ei});var rt=_("mrSG"),a=_("iTfj"),E;(function(c){c.FORE="fore",c.MID="mid",c.BG="bg"})(E||(E={}));var e;(function(c){c.TOP="top",c.TOP_LEFT="top-left",c.TOP_RIGHT="top-right",c.RIGHT="right",c.RIGHT_TOP="right-top",c.RIGHT_BOTTOM="right-bottom",c.LEFT="left",c.LEFT_TOP="left-top",c.LEFT_BOTTOM="left-bottom",c.BOTTOM="bottom",c.BOTTOM_LEFT="bottom-left",c.BOTTOM_RIGHT="bottom-right",c.RADIUS="radius",c.CIRCLE="circle",c.NONE="none"})(e||(e={}));var r;(function(c){c.AXIS="axis",c.GRID="grid",c.LEGEND="legend",c.TOOLTIP="tooltip",c.ANNOTATION="annotation",c.SLIDER="slider",c.SCROLLBAR="scrollbar",c.OTHER="other"})(r||(r={}));var p={FORE:3,MID:2,BG:1},b;(function(c){c.BEFORE_RENDER="beforerender",c.AFTER_RENDER="afterrender",c.BEFORE_PAINT="beforepaint",c.AFTER_PAINT="afterpaint",c.BEFORE_CHANGE_DATA="beforechangedata",c.AFTER_CHANGE_DATA="afterchangedata",c.BEFORE_CLEAR="beforeclear",c.AFTER_CLEAR="afterclear",c.BEFORE_DESTROY="beforedestroy",c.BEFORE_CHANGE_SIZE="beforechangesize",c.AFTER_CHANGE_SIZE="afterchangesize"})(b||(b={}));var S;(function(c){c.BEFORE_DRAW_ANIMATE="beforeanimate",c.AFTER_DRAW_ANIMATE="afteranimate"})(S||(S={}));var l;(function(c){c.MOUSE_ENTER="plot:mouseenter",c.MOUSE_DOWN="plot:mousedown",c.MOUSE_MOVE="plot:mousemove",c.MOUSE_UP="plot:mouseup",c.MOUSE_LEAVE="plot:mouseleave",c.TOUCH_START="plot:touchstart",c.TOUCH_MOVE="plot:touchmove",c.TOUCH_END="plot:touchend",c.TOUCH_CANCEL="plot:touchcancel",c.CLICK="plot:click",c.DBLCLICK="plot:dblclick",c.CONTEXTMENU="plot:contextmenu",c.LEAVE="plot:leave",c.ENTER="plot:enter"})(l||(l={}));var A;(function(c){c.ACTIVE="active",c.INACTIVE="inactive",c.SELECTED="selected",c.DEFAULT="default"})(A||(A={}));var j=["color","shape","size"],y="_origin",n=1,s=1,h=.25,M={};function O(c){var o=M[c];if(!o)throw new Error("G engine '"+c+"' is not exist, please register it at first.");return o}function T(c,o){M[c]=o}var v=_("fIp6");function m(c){var o=getComputedStyle(c);return{width:(c.clientWidth||parseInt(o.width,10))-parseInt(o.paddingLeft,10)-parseInt(o.paddingRight,10),height:(c.clientHeight||parseInt(o.height,10))-parseInt(o.paddingTop,10)-parseInt(o.paddingBottom,10)}}function C(c){return typeof c=="number"&&!isNaN(c)}function D(c,o,t,i){var x=t,R=i;if(o){var nt=m(c);x=nt.width?nt.width:x,R=nt.height?nt.height:R}return{width:Math.max(C(x)?x:n,n),height:Math.max(C(R)?R:s,s)}}function Y(c){var o=c.parentNode;o&&o.removeChild(c)}var Z=_("f6Jy"),et=function(c){Object(rt.b)(o,c);function o(t){var i=c.call(this)||this;i.destroyed=!1;var x=t.visible,R=x===void 0?!0:x;return i.visible=R,i}return o.prototype.show=function(){var t=this.visible;t||this.changeVisible(!0)},o.prototype.hide=function(){var t=this.visible;t&&this.changeVisible(!1)},o.prototype.destroy=function(){this.off(),this.destroyed=!0},o.prototype.changeVisible=function(t){this.visible!==t&&(this.visible=t)},o}(Z.a),dt=et,ht=_("aFU3"),St=_("7s0d"),wt=function(o,t){return Object(a.isString)(t)?t:o.invert(o.scale(t))},xt=function(){function c(o){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(o)}return c.prototype.mapping=function(){for(var o=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var x=t.map(function(R,nt){return o._toOriginParam(R,o.scales[nt])});return this.callback.apply(this,x)},c.prototype.getLinearValue=function(o){var t=this.values.length-1,i=Math.floor(t*o),x=t*o-i,R=this.values[i],nt=i===t?R:this.values[i+1];return R+(nt-R)*x},c.prototype.getNames=function(){for(var o=this.scales,t=this.names,i=Math.min(o.length,t.length),x=[],R=0;R<i;R+=1)x.push(t[R]);return x},c.prototype.getFields=function(){return this.scales.map(function(o){return o.field})},c.prototype.getScale=function(o){return this.scales[this.names.indexOf(o)]},c.prototype.defaultCallback=function(){for(var o=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return t.length===0?this.values:t.map(function(x,R){var nt=o.scales[R];return nt.type==="identity"?nt.values[0]:o._getAttributeValue(nt,x)})},c.prototype._parseCfg=function(o){var t=this,i=o.type,x=i===void 0?"base":i,R=o.names,nt=R===void 0?[]:R,Mt=o.scales,Lt=Mt===void 0?[]:Mt,ne=o.values,ge=ne===void 0?[]:ne,be=o.callback;this.type=x,this.scales=Lt,this.values=ge,this.names=nt,this.callback=function(){for(var Ae=[],We=0;We<arguments.length;We++)Ae[We]=arguments[We];if(be){var an=be.apply(void 0,Ae);if(!Object(a.isNil)(an))return[an]}return t.defaultCallback.apply(t,Ae)}},c.prototype._getAttributeValue=function(o,t){if(o.isCategory&&!this.linear){var i=o.translate(t);return this.values[i%this.values.length]}var x=o.scale(t);return this.getLinearValue(x)},c.prototype._toOriginParam=function(o,t){return t.isLinear?o:Object(a.isArray)(o)?o.map(function(i){return wt(t,i)}):wt(t,o)},c}(),ft=xt;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Bt=function(o,t){return Bt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,x){i.__proto__=x}||function(i,x){for(var R in x)x.hasOwnProperty(R)&&(i[R]=x[R])},Bt(o,t)};function Rt(c,o){Bt(c,o);function t(){this.constructor=c}c.prototype=o===null?Object.create(o):(t.prototype=o.prototype,new t)}var Ot=function(){return Ot=Object.assign||function(t){for(var i,x=1,R=arguments.length;x<R;x++){i=arguments[x];for(var nt in i)Object.prototype.hasOwnProperty.call(i,nt)&&(t[nt]=i[nt])}return t},Ot.apply(this,arguments)};function X(c,o){var t={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&o.indexOf(i)<0&&(t[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var x=0,i=Object.getOwnPropertySymbols(c);x<i.length;x++)o.indexOf(i[x])<0&&Object.prototype.propertyIsEnumerable.call(c,i[x])&&(t[i[x]]=c[i[x]]);return t}function ut(c,o,t,i){var x=arguments.length,R=x<3?o:i===null?i=Object.getOwnPropertyDescriptor(o,t):i,nt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(c,o,t,i);else for(var Mt=c.length-1;Mt>=0;Mt--)(nt=c[Mt])&&(R=(x<3?nt(R):x>3?nt(o,t,R):nt(o,t))||R);return x>3&&R&&Object.defineProperty(o,t,R),R}function vt(c,o){return function(t,i){o(t,i,c)}}function pt(c,o){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(c,o)}function Et(c,o,t,i){function x(R){return R instanceof t?R:new t(function(nt){nt(R)})}return new(t||(t=Promise))(function(R,nt){function Mt(ge){try{ne(i.next(ge))}catch(be){nt(be)}}function Lt(ge){try{ne(i.throw(ge))}catch(be){nt(be)}}function ne(ge){ge.done?R(ge.value):x(ge.value).then(Mt,Lt)}ne((i=i.apply(c,o||[])).next())})}function q(c,o){var t={label:0,sent:function(){if(R[0]&1)throw R[1];return R[1]},trys:[],ops:[]},i,x,R,nt;return nt={next:Mt(0),throw:Mt(1),return:Mt(2)},typeof Symbol=="function"&&(nt[Symbol.iterator]=function(){return this}),nt;function Mt(ne){return function(ge){return Lt([ne,ge])}}function Lt(ne){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,x&&(R=ne[0]&2?x.return:ne[0]?x.throw||((R=x.return)&&R.call(x),0):x.next)&&!(R=R.call(x,ne[1])).done)return R;switch(x=0,R&&(ne=[ne[0]&2,R.value]),ne[0]){case 0:case 1:R=ne;break;case 4:return t.label++,{value:ne[1],done:!1};case 5:t.label++,x=ne[1],ne=[0];continue;case 7:ne=t.ops.pop(),t.trys.pop();continue;default:if(R=t.trys,!(R=R.length>0&&R[R.length-1])&&(ne[0]===6||ne[0]===2)){t=0;continue}if(ne[0]===3&&(!R||ne[1]>R[0]&&ne[1]<R[3])){t.label=ne[1];break}if(ne[0]===6&&t.label<R[1]){t.label=R[1],R=ne;break}if(R&&t.label<R[2]){t.label=R[2],t.ops.push(ne);break}R[2]&&t.ops.pop(),t.trys.pop();continue}ne=o.call(c,t)}catch(ge){ne=[6,ge],x=0}finally{i=R=0}if(ne[0]&5)throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}}function st(c,o,t,i){i===void 0&&(i=t),c[i]=o[t]}function it(c,o){for(var t in c)t!=="default"&&!o.hasOwnProperty(t)&&(o[t]=c[t])}function z(c){var o=typeof Symbol=="function"&&Symbol.iterator,t=o&&c[o],i=0;if(t)return t.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&i>=c.length&&(c=void 0),{value:c&&c[i++],done:!c}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}function P(c,o){var t=typeof Symbol=="function"&&c[Symbol.iterator];if(!t)return c;var i=t.call(c),x,R=[],nt;try{for(;(o===void 0||o-- >0)&&!(x=i.next()).done;)R.push(x.value)}catch(Mt){nt={error:Mt}}finally{try{x&&!x.done&&(t=i.return)&&t.call(i)}finally{if(nt)throw nt.error}}return R}function H(){for(var c=[],o=0;o<arguments.length;o++)c=c.concat(P(arguments[o]));return c}function k(){for(var c=0,o=0,t=arguments.length;o<t;o++)c+=arguments[o].length;for(var i=Array(c),x=0,o=0;o<t;o++)for(var R=arguments[o],nt=0,Mt=R.length;nt<Mt;nt++,x++)i[x]=R[nt];return i}function d(c){return this instanceof d?(this.v=c,this):new d(c)}function g(c,o,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(c,o||[]),x,R=[];return x={},nt("next"),nt("throw"),nt("return"),x[Symbol.asyncIterator]=function(){return this},x;function nt(Ae){i[Ae]&&(x[Ae]=function(We){return new Promise(function(an,gn){R.push([Ae,We,an,gn])>1||Mt(Ae,We)})})}function Mt(Ae,We){try{Lt(i[Ae](We))}catch(an){be(R[0][3],an)}}function Lt(Ae){Ae.value instanceof d?Promise.resolve(Ae.value.v).then(ne,ge):be(R[0][2],Ae)}function ne(Ae){Mt("next",Ae)}function ge(Ae){Mt("throw",Ae)}function be(Ae,We){Ae(We),R.shift(),R.length&&Mt(R[0][0],R[0][1])}}function F(c){var o,t;return o={},i("next"),i("throw",function(x){throw x}),i("return"),o[Symbol.iterator]=function(){return this},o;function i(x,R){o[x]=c[x]?function(nt){return(t=!t)?{value:d(c[x](nt)),done:x==="return"}:R?R(nt):nt}:R}}function V(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=c[Symbol.asyncIterator],t;return o?o.call(c):(c=typeof z=="function"?z(c):c[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(R){t[R]=c[R]&&function(nt){return new Promise(function(Mt,Lt){nt=c[R](nt),x(Mt,Lt,nt.done,nt.value)})}}function x(R,nt,Mt,Lt){Promise.resolve(Lt).then(function(ne){R({value:ne,done:Mt})},nt)}}function tt(c,o){return Object.defineProperty?Object.defineProperty(c,"raw",{value:o}):c.raw=o,c}function ot(c){if(c&&c.__esModule)return c;var o={};if(c!=null)for(var t in c)Object.hasOwnProperty.call(c,t)&&(o[t]=c[t]);return o.default=c,o}function at(c){return c&&c.__esModule?c:{default:c}}function At(c,o){if(!o.has(c))throw new TypeError("attempted to get private field on non-instance");return o.get(c)}function yt(c,o,t){if(!o.has(c))throw new TypeError("attempted to set private field on non-instance");return o.set(c,t),t}var gt=_("6UX8"),bt=function(c){Rt(o,c);function o(t){var i=c.call(this,t)||this;return i.type="color",i.names=["color"],Object(a.isString)(i.values)&&(i.linear=!0),i.gradient=gt.a.gradient(i.values),i}return o.prototype.getLinearValue=function(t){return this.gradient(t)},o}(ft),Tt=bt,Dt=function(c){Rt(o,c);function o(t){var i=c.call(this,t)||this;return i.type="opacity",i.names=["opacity"],i}return o}(ft),Ut=Dt,jt=function(c){Rt(o,c);function o(t){var i=c.call(this,t)||this;return i.names=["x","y"],i.type="position",i}return o.prototype.mapping=function(t,i){var x=this.scales,R=x[0],nt=x[1];return Object(a.isNil)(t)||Object(a.isNil)(i)?[]:[Object(a.isArray)(t)?t.map(function(Mt){return R.scale(Mt)}):R.scale(t),Object(a.isArray)(i)?i.map(function(Mt){return nt.scale(Mt)}):nt.scale(i)]},o}(ft),Vt=jt,Ht=function(c){Rt(o,c);function o(t){var i=c.call(this,t)||this;return i.type="shape",i.names=["shape"],i}return o.prototype.getLinearValue=function(t){var i=Math.round((this.values.length-1)*t);return this.values[i]},o}(ft),re=Ht,pe=function(c){Rt(o,c);function o(t){var i=c.call(this,t)||this;return i.type="size",i.names=["size"],i}return o}(ft),ye=pe,we=_("8vsG"),Re={},He=function(o){return Re[o.toLowerCase()]},pn=function(o,t){if(He(o))throw new Error("Attribute type '"+o+"' existed.");Re[o.toLowerCase()]=t};pn("Color",Tt),pn("Opacity",Ut),pn("Position",Vt),pn("Shape",re),pn("Size",ye);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var fn=function(o,t){return fn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,x){i.__proto__=x}||function(i,x){for(var R in x)x.hasOwnProperty(R)&&(i[R]=x[R])},fn(o,t)};function Rn(c,o){fn(c,o);function t(){this.constructor=c}c.prototype=o===null?Object.create(o):(t.prototype=o.prototype,new t)}var Cn=function(){return Cn=Object.assign||function(t){for(var i,x=1,R=arguments.length;x<R;x++){i=arguments[x];for(var nt in i)Object.prototype.hasOwnProperty.call(i,nt)&&(t[nt]=i[nt])}return t},Cn.apply(this,arguments)};function kn(c,o){var t={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&o.indexOf(i)<0&&(t[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var x=0,i=Object.getOwnPropertySymbols(c);x<i.length;x++)o.indexOf(i[x])<0&&Object.prototype.propertyIsEnumerable.call(c,i[x])&&(t[i[x]]=c[i[x]]);return t}function Mn(c,o,t,i){var x=arguments.length,R=x<3?o:i===null?i=Object.getOwnPropertyDescriptor(o,t):i,nt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(c,o,t,i);else for(var Mt=c.length-1;Mt>=0;Mt--)(nt=c[Mt])&&(R=(x<3?nt(R):x>3?nt(o,t,R):nt(o,t))||R);return x>3&&R&&Object.defineProperty(o,t,R),R}function Tn(c,o){return function(t,i){o(t,i,c)}}function Un(c,o){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(c,o)}function Kn(c,o,t,i){function x(R){return R instanceof t?R:new t(function(nt){nt(R)})}return new(t||(t=Promise))(function(R,nt){function Mt(ge){try{ne(i.next(ge))}catch(be){nt(be)}}function Lt(ge){try{ne(i.throw(ge))}catch(be){nt(be)}}function ne(ge){ge.done?R(ge.value):x(ge.value).then(Mt,Lt)}ne((i=i.apply(c,o||[])).next())})}function tr(c,o){var t={label:0,sent:function(){if(R[0]&1)throw R[1];return R[1]},trys:[],ops:[]},i,x,R,nt;return nt={next:Mt(0),throw:Mt(1),return:Mt(2)},typeof Symbol=="function"&&(nt[Symbol.iterator]=function(){return this}),nt;function Mt(ne){return function(ge){return Lt([ne,ge])}}function Lt(ne){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,x&&(R=ne[0]&2?x.return:ne[0]?x.throw||((R=x.return)&&R.call(x),0):x.next)&&!(R=R.call(x,ne[1])).done)return R;switch(x=0,R&&(ne=[ne[0]&2,R.value]),ne[0]){case 0:case 1:R=ne;break;case 4:return t.label++,{value:ne[1],done:!1};case 5:t.label++,x=ne[1],ne=[0];continue;case 7:ne=t.ops.pop(),t.trys.pop();continue;default:if(R=t.trys,!(R=R.length>0&&R[R.length-1])&&(ne[0]===6||ne[0]===2)){t=0;continue}if(ne[0]===3&&(!R||ne[1]>R[0]&&ne[1]<R[3])){t.label=ne[1];break}if(ne[0]===6&&t.label<R[1]){t.label=R[1],R=ne;break}if(R&&t.label<R[2]){t.label=R[2],t.ops.push(ne);break}R[2]&&t.ops.pop(),t.trys.pop();continue}ne=o.call(c,t)}catch(ge){ne=[6,ge],x=0}finally{i=R=0}if(ne[0]&5)throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}}function or(c,o,t,i){i===void 0&&(i=t),c[i]=o[t]}function nr(c,o){for(var t in c)t!=="default"&&!o.hasOwnProperty(t)&&(o[t]=c[t])}function er(c){var o=typeof Symbol=="function"&&Symbol.iterator,t=o&&c[o],i=0;if(t)return t.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&i>=c.length&&(c=void 0),{value:c&&c[i++],done:!c}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}function Sr(c,o){var t=typeof Symbol=="function"&&c[Symbol.iterator];if(!t)return c;var i=t.call(c),x,R=[],nt;try{for(;(o===void 0||o-- >0)&&!(x=i.next()).done;)R.push(x.value)}catch(Mt){nt={error:Mt}}finally{try{x&&!x.done&&(t=i.return)&&t.call(i)}finally{if(nt)throw nt.error}}return R}function Vr(){for(var c=[],o=0;o<arguments.length;o++)c=c.concat(Sr(arguments[o]));return c}function ti(){for(var c=0,o=0,t=arguments.length;o<t;o++)c+=arguments[o].length;for(var i=Array(c),x=0,o=0;o<t;o++)for(var R=arguments[o],nt=0,Mt=R.length;nt<Mt;nt++,x++)i[x]=R[nt];return i}function hi(c){return this instanceof hi?(this.v=c,this):new hi(c)}function Fi(c,o,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(c,o||[]),x,R=[];return x={},nt("next"),nt("throw"),nt("return"),x[Symbol.asyncIterator]=function(){return this},x;function nt(Ae){i[Ae]&&(x[Ae]=function(We){return new Promise(function(an,gn){R.push([Ae,We,an,gn])>1||Mt(Ae,We)})})}function Mt(Ae,We){try{Lt(i[Ae](We))}catch(an){be(R[0][3],an)}}function Lt(Ae){Ae.value instanceof hi?Promise.resolve(Ae.value.v).then(ne,ge):be(R[0][2],Ae)}function ne(Ae){Mt("next",Ae)}function ge(Ae){Mt("throw",Ae)}function be(Ae,We){Ae(We),R.shift(),R.length&&Mt(R[0][0],R[0][1])}}function to(c){var o,t;return o={},i("next"),i("throw",function(x){throw x}),i("return"),o[Symbol.iterator]=function(){return this},o;function i(x,R){o[x]=c[x]?function(nt){return(t=!t)?{value:hi(c[x](nt)),done:x==="return"}:R?R(nt):nt}:R}}function si(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=c[Symbol.asyncIterator],t;return o?o.call(c):(c=typeof er=="function"?er(c):c[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(R){t[R]=c[R]&&function(nt){return new Promise(function(Mt,Lt){nt=c[R](nt),x(Mt,Lt,nt.done,nt.value)})}}function x(R,nt,Mt,Lt){Promise.resolve(Lt).then(function(ne){R({value:ne,done:Mt})},nt)}}function Ti(c,o){return Object.defineProperty?Object.defineProperty(c,"raw",{value:o}):c.raw=o,c}function _i(c){if(c&&c.__esModule)return c;var o={};if(c!=null)for(var t in c)Object.hasOwnProperty.call(c,t)&&(o[t]=c[t]);return o.default=c,o}function Li(c){return c&&c.__esModule?c:{default:c}}function Vi(c,o){if(!o.has(c))throw new TypeError("attempted to get private field on non-instance");return o.get(c)}function ro(c,o,t){if(!o.has(c))throw new TypeError("attempted to set private field on non-instance");return o.set(c,t),t}var jr=_("6JdA"),Ji=function(){function c(o){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var t=o.start,i=o.end,x=o.matrix,R=x===void 0?[1,0,0,0,1,0,0,0,1]:x,nt=o.isTransposed,Mt=nt===void 0?!1:nt;this.start=t,this.end=i,this.matrix=R,this.originalMatrix=ti(R),this.isTransposed=Mt}return c.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},c.prototype.update=function(o){Object(a.assign)(this,o),this.initial()},c.prototype.convertDim=function(o,t){var i,x=this[t],R=x.start,nt=x.end;return this.isReflect(t)&&(i=[nt,R],R=i[0],nt=i[1]),R+o*(nt-R)},c.prototype.invertDim=function(o,t){var i,x=this[t],R=x.start,nt=x.end;return this.isReflect(t)&&(i=[nt,R],R=i[0],nt=i[1]),(o-R)/(nt-R)},c.prototype.applyMatrix=function(o,t,i){i===void 0&&(i=0);var x=this.matrix,R=[o,t,i];return jr.d.transformMat3(R,R,x),R},c.prototype.invertMatrix=function(o,t,i){i===void 0&&(i=0);var x=this.matrix,R=jr.b.invert([0,0,0,0,0,0,0,0,0],x),nt=[o,t,i];return R&&jr.d.transformMat3(nt,nt,R),nt},c.prototype.convert=function(o){var t=this.convertPoint(o),i=t.x,x=t.y,R=this.applyMatrix(i,x,1);return{x:R[0],y:R[1]}},c.prototype.invert=function(o){var t=this.invertMatrix(o.x,o.y,1);return this.invertPoint({x:t[0],y:t[1]})},c.prototype.rotate=function(o){var t=this.matrix,i=this.center;return jr.a.leftTranslate(t,t,[-i.x,-i.y]),jr.a.leftRotate(t,t,o),jr.a.leftTranslate(t,t,[i.x,i.y]),this},c.prototype.reflect=function(o){return o==="x"?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},c.prototype.scale=function(o,t){var i=this.matrix,x=this.center;return jr.a.leftTranslate(i,i,[-x.x,-x.y]),jr.a.leftScale(i,i,[o,t]),jr.a.leftTranslate(i,i,[x.x,x.y]),this},c.prototype.translate=function(o,t){var i=this.matrix;return jr.a.leftTranslate(i,i,[o,t]),this},c.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},c.prototype.getCenter=function(){return this.center},c.prototype.getWidth=function(){return this.width},c.prototype.getHeight=function(){return this.height},c.prototype.getRadius=function(){return this.radius},c.prototype.isReflect=function(o){return o==="x"?this.isReflectX:this.isReflectY},c.prototype.resetMatrix=function(o){this.matrix=o||ti(this.originalMatrix)},c}(),pr=Ji,Yr=function(c){Rn(o,c);function o(t){var i=c.call(this,t)||this;return i.isRect=!0,i.type="cartesian",i.initial(),i}return o.prototype.initial=function(){c.prototype.initial.call(this);var t=this.start,i=this.end;this.x={start:t.x,end:i.x},this.y={start:t.y,end:i.y}},o.prototype.convertPoint=function(t){var i,x=t.x,R=t.y;return this.isTransposed&&(i=[R,x],x=i[0],R=i[1]),{x:this.convertDim(x,"x"),y:this.convertDim(R,"y")}},o.prototype.invertPoint=function(t){var i,x=this.invertDim(t.x,"x"),R=this.invertDim(t.y,"y");return this.isTransposed&&(i=[R,x],x=i[0],R=i[1]),{x,y:R}},o}(pr),Br=Yr,Nr=function(c){Rn(o,c);function o(t){var i=c.call(this,t)||this;i.isHelix=!0,i.type="helix";var x=t.startAngle,R=x===void 0?1.25*Math.PI:x,nt=t.endAngle,Mt=nt===void 0?7.25*Math.PI:nt,Lt=t.innerRadius,ne=Lt===void 0?0:Lt,ge=t.radius;return i.startAngle=R,i.endAngle=Mt,i.innerRadius=ne,i.radius=ge,i.initial(),i}return o.prototype.initial=function(){c.prototype.initial.call(this);var t=(this.endAngle-this.startAngle)/(2*Math.PI)+1,i=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(i=i*this.radius),this.d=Math.floor(i*(1-this.innerRadius)/t),this.a=this.d/(Math.PI*2),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*i,end:this.innerRadius*i+this.d*.99}},o.prototype.convertPoint=function(t){var i,x=t.x,R=t.y;this.isTransposed&&(i=[R,x],x=i[0],R=i[1]);var nt=this.convertDim(x,"x"),Mt=this.a*nt,Lt=this.convertDim(R,"y");return{x:this.center.x+Math.cos(nt)*(Mt+Lt),y:this.center.y+Math.sin(nt)*(Mt+Lt)}},o.prototype.invertPoint=function(t){var i,x=this.d+this.y.start,R=jr.c.subtract([0,0],[t.x,t.y],[this.center.x,this.center.y]),nt=jr.a.angleTo(R,[1,0],!0),Mt=nt*this.a;jr.c.length(R)<Mt&&(Mt=jr.c.length(R));var Lt=Math.floor((jr.c.length(R)-Mt)/x);nt=2*Lt*Math.PI+nt;var ne=this.a*nt,ge=jr.c.length(R)-ne;ge=Object(a.isNumberEqual)(ge,0)?0:ge;var be=this.invertDim(nt,"x"),Ae=this.invertDim(ge,"y");return be=Object(a.isNumberEqual)(be,0)?0:be,Ae=Object(a.isNumberEqual)(Ae,0)?0:Ae,this.isTransposed&&(i=[Ae,be],be=i[0],Ae=i[1]),{x:be,y:Ae}},o}(pr),Xr=Nr,Kr=function(c){Rn(o,c);function o(t){var i=c.call(this,t)||this;i.isPolar=!0,i.type="polar";var x=t.startAngle,R=x===void 0?-Math.PI/2:x,nt=t.endAngle,Mt=nt===void 0?Math.PI*3/2:nt,Lt=t.innerRadius,ne=Lt===void 0?0:Lt,ge=t.radius;return i.startAngle=R,i.endAngle=Mt,i.innerRadius=ne,i.radius=ge,i.initial(),i}return o.prototype.initial=function(){for(c.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=Math.PI*2;var t=this.getOneBox(),i=t.maxX-t.minX,x=t.maxY-t.minY,R=Math.abs(t.minX)/i,nt=Math.abs(t.minY)/x,Mt;this.height/x>this.width/i?(Mt=this.width/i,this.circleCenter={x:this.center.x-(.5-R)*this.width,y:this.center.y-(.5-nt)*Mt*x}):(Mt=this.height/x,this.circleCenter={x:this.center.x-(.5-R)*Mt*i,y:this.center.y-(.5-nt)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=Mt*this.radius:(this.radius<=0||this.radius>Mt)&&(this.polarRadius=Mt):this.polarRadius=Mt,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},o.prototype.getRadius=function(){return this.polarRadius},o.prototype.convertPoint=function(t){var i,x=this.getCenter(),R=t.x,nt=t.y;return this.isTransposed&&(i=[nt,R],R=i[0],nt=i[1]),R=this.convertDim(R,"x"),nt=this.convertDim(nt,"y"),{x:x.x+Math.cos(R)*nt,y:x.y+Math.sin(R)*nt}},o.prototype.invertPoint=function(t){var i=this.getCenter(),x=[t.x-i.x,t.y-i.y],R=[1,0,0,0,1,0,0,0,1];jr.a.leftRotate(R,R,this.startAngle);var nt=[1,0,0];jr.d.transformMat3(nt,nt,R);var Mt=[nt[0],nt[1]],Lt=jr.a.angleTo(Mt,x,this.endAngle<this.startAngle);Object(a.isNumberEqual)(Lt,Math.PI*2)&&(Lt=0);var ne=jr.c.length(x),ge=Lt/(this.endAngle-this.startAngle);ge=this.endAngle-this.startAngle>0?ge:-ge;var be=this.invertDim(ne,"y"),Ae={x:0,y:0};return Ae.x=this.isTransposed?be:ge,Ae.y=this.isTransposed?ge:be,Ae},o.prototype.getCenter=function(){return this.circleCenter},o.prototype.getOneBox=function(){var t=this.startAngle,i=this.endAngle;if(Math.abs(i-t)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var x=[0,Math.cos(t),Math.cos(i)],R=[0,Math.sin(t),Math.sin(i)],nt=Math.min(t,i);nt<Math.max(t,i);nt+=Math.PI/18)x.push(Math.cos(nt)),R.push(Math.sin(nt));return{minX:Math.min.apply(Math,x),maxX:Math.max.apply(Math,x),minY:Math.min.apply(Math,R),maxY:Math.max.apply(Math,R)}},o}(pr),ni=Kr,fi={},$r=function(o){return fi[o.toLowerCase()]},ci=function(o,t){fi[o.toLowerCase()]=t};ci("rect",Br),ci("cartesian",Br),ci("polar",ni),ci("helix",Xr);var Qr=_("17Tr"),gi=Qr.Axis.Line,Oi=Qr.Axis.Circle,bi=Qr.Grid.Line,zi=Qr.Grid.Circle,Qi=Qr.Legend.Category,io=Qr.Legend.Continuous,Wi=Qr.Tooltip.Html;function Zi(c){if(Object(a.isEmpty)(c))return null;var o=c[0].x,t=c[0].x,i=c[0].y,x=c[0].y;return Object(a.each)(c,function(R){o=o>R.x?R.x:o,t=t<R.x?R.x:t,i=i>R.y?R.y:i,x=x<R.y?R.y:x}),{minX:o,maxX:t,minY:i,maxY:x,centerX:(o+t)/2,centerY:(i+x)/2}}function Pi(c,o,t,i){return{x:c+t*Math.cos(i),y:o+t*Math.sin(i)}}function no(c,o,t,i,x,R){R===void 0&&(R=0);var nt=Pi(c,o,t,i),Mt=Pi(c,o,t,x),Lt=Pi(c,o,R,i),ne=Pi(c,o,R,x);if(x-i==Math.PI*2){var ge=Pi(c,o,t,i+Math.PI),be=Pi(c,o,R,i+Math.PI),Ae=[["M",nt.x,nt.y],["A",t,t,0,1,1,ge.x,ge.y],["A",t,t,0,1,1,Mt.x,Mt.y],["M",Lt.x,Lt.y]];return R&&(Ae.push(["A",R,R,0,1,0,be.x,be.y]),Ae.push(["A",R,R,0,1,0,ne.x,ne.y])),Ae.push(["M",nt.x,nt.y]),Ae.push(["Z"]),Ae}var We=x-i<=Math.PI?0:1,an=[["M",nt.x,nt.y],["A",t,t,0,We,1,Mt.x,Mt.y],["L",ne.x,ne.y]];return R&&an.push(["A",R,R,0,We,0,Lt.x,Lt.y]),an.push(["L",nt.x,nt.y]),an.push(["Z"]),an}function Mo(c,o,t,i,x){var R=Pi(c,o,t,i),nt=Pi(c,o,t,x);if(Object(a.isNumberEqual)(x-i,Math.PI*2)){var Mt=Pi(c,o,t,i+Math.PI);return[["M",R.x,R.y],["A",t,t,0,1,1,Mt.x,Mt.y],["A",t,t,0,1,1,R.x,R.y],["A",t,t,0,1,0,Mt.x,Mt.y],["A",t,t,0,1,0,R.x,R.y],["Z"]]}var Lt=x-i<=Math.PI?0:1;return[["M",R.x,R.y],["A",t,t,0,Lt,1,nt.x,nt.y]]}function ao(c,o){var t=c.points,i=Zi(t),x,R,nt=o.startAngle,Mt=o.endAngle,Lt=Mt-nt;return o.isTransposed?(x=i.maxY*Lt,R=i.minY*Lt):(x=i.maxX*Lt,R=i.minX*Lt),x+=nt,R+=nt,{startAngle:R,endAngle:x}}function uo(c,o){if(Object(a.isNumber)(c)&&Object(a.isNumber)(o))return[c,o];for(var t=-1,i=0,x=0,R,nt=c.length-1,Mt,Lt=0;++t<c.length;)R=nt,nt=t,Lt+=Mt=c[R]*o[nt]-c[nt]*o[R],i+=(c[R]+c[nt])*Mt,x+=(o[R]+o[nt])*Mt;return Lt*=3,[i/Lt,x/Lt]}function xo(c,o){var t=c.attr(),i=o.attr();return Object(a.each)(t,function(x,R){i[R]===void 0&&(i[R]=void 0)}),i}function oe(c,o,t){var i=Math.min(o,t),x=Math.max(o,t);return c>=i&&c<=x}function Kt(c,o,t){if(Object(a.isString)(c))return c.padEnd(o,t);if(Object(a.isArray)(c)){var i=c.length;if(i<o)for(var x=o-i,R=0;R<x;R++)c.push(t)}return c}function te(c,o){return o.forEach(function(t){delete c[t]}),c}function Oe(c,o,t){o===void 0&&(o=[]),t===void 0&&(t={});for(var i=0,x=c;i<x.length;i++){var R=x[i];t[R]||(o.push(R),t[R]=!0)}return o}var Qe=function(){function c(o,t,i,x){o===void 0&&(o=0),t===void 0&&(t=0),i===void 0&&(i=0),x===void 0&&(x=0),this.x=o,this.y=t,this.height=x,this.width=i}return c.fromRange=function(o,t,i,x){return new c(o,t,i-o,x-t)},c.fromObject=function(o){return new c(o.minX,o.minY,o.width,o.height)},Object.defineProperty(c.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),c.prototype.isEqual=function(o){return this.x===o.x&&this.y===o.y&&this.width===o.width&&this.height===o.height},c.prototype.contains=function(o){return o.minX>=this.minX&&o.maxX<=this.maxX&&o.minY>=this.minY&&o.maxY<=this.maxY},c.prototype.clone=function(){return new c(this.x,this.y,this.width,this.height)},c.prototype.add=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];var i=this.clone();return Object(a.each)(o,function(x){i.x=Math.min(x.x,i.x),i.y=Math.min(x.y,i.y),i.width=Math.max(x.maxX,i.maxX)-i.x,i.height=Math.max(x.maxY,i.maxY)-i.y}),i},c.prototype.merge=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];var i=this.clone();return Object(a.each)(o,function(x){i.x=Math.max(x.x,i.x),i.y=Math.max(x.y,i.y),i.width=Math.min(x.maxX,i.maxX)-i.x,i.height=Math.min(x.maxY,i.maxY)-i.y}),i},c.prototype.cut=function(o,t){var i=o.width,x=o.height;switch(t){case e.TOP:case e.TOP_LEFT:case e.TOP_RIGHT:return c.fromRange(this.minX,this.minY+x,this.maxX,this.maxY);case e.RIGHT:case e.RIGHT_TOP:case e.RIGHT_BOTTOM:return c.fromRange(this.minX,this.minY,this.maxX-i,this.maxY);case e.BOTTOM:case e.BOTTOM_LEFT:case e.BOTTOM_RIGHT:return c.fromRange(this.minX,this.minY,this.maxX,this.maxY-x);case e.LEFT:case e.LEFT_TOP:case e.LEFT_BOTTOM:return c.fromRange(this.minX+i,this.minY,this.maxX,this.maxY);default:return this}},c.prototype.shrink=function(o){var t=o[0],i=o[1],x=o[2],R=o[3];return new c(this.x+R,this.y+t,this.width-R-i,this.height-t-x)},c.prototype.expand=function(o){var t=o[0],i=o[1],x=o[2],R=o[3];return new c(this.x-R,this.y-t,this.width+R+i,this.height+t+x)},c.prototype.exceed=function(o){return[Math.max(-this.minY+o.minY,0),Math.max(this.maxX-o.maxX,0),Math.max(this.maxY-o.maxY,0),Math.max(-this.minX+o.minX,0)]},c.prototype.collide=function(o){return this.minX<o.maxX&&this.maxX>o.minX&&this.minY<o.maxY&&this.maxY>o.minY},c.prototype.size=function(){return this.width*this.height},c.prototype.isPointIn=function(o){return o.x>=this.minX&&o.x<=this.maxX&&o.y>=this.minY&&o.y<=this.maxY},c}(),On=function(o,t){var i=t.start,x=t.end;return new Qe(o.x+o.width*i.x,o.y+o.height*i.y,o.width*Math.abs(x.x-i.x),o.height*Math.abs(x.y-i.y))};function Vn(c){return[[c.minX,c.minY],[c.maxX,c.minY],[c.maxX,c.maxY],[c.minX,c.maxY]]}function Xn(c){if(c.isPolar&&!c.isTransposed)return(c.endAngle-c.startAngle)*c.getRadius();var o=c.convert({x:0,y:0}),t=c.convert({x:1,y:0});return Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2))}function $e(c){if(c.isPolar){var o=c.startAngle,t=c.endAngle;return t-o==Math.PI*2}return!1}function rn(c,o){var t=c.getCenter();return Math.sqrt(Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2))}function on(c,o){var t=!1;if(c)if(c.type==="theta"){var i=c.start,x=c.end;t=oe(o.x,i.x,x.x)&&oe(o.y,i.y,x.y)}else{var R=c.invert(o);t=oe(R.x,0,1)&&oe(R.y,0,1)}return t}function $n(c,o){var t=c.getCenter();return Math.atan2(o.y-t.y,o.x-t.x)}function vr(c,o){o===void 0&&(o=0);var t=c.start,i=c.end,x=c.getWidth(),R=c.getHeight();if(c.isPolar){var nt=c.startAngle,Mt=c.endAngle,Lt=c.getCenter(),ne=c.getRadius();return{type:"path",startState:{path:no(Lt.x,Lt.y,ne+o,nt,nt)},endState:function(Ae){var We=(Mt-nt)*Ae+nt,an=no(Lt.x,Lt.y,ne+o,nt,We);return{path:an}},attrs:{path:no(Lt.x,Lt.y,ne+o,nt,Mt)}}}var ge;return c.isTransposed?ge={height:R+o*2}:ge={width:x+o*2},{type:"rect",startState:{x:t.x-o,y:i.y-o,width:c.isTransposed?x+o*2:0,height:c.isTransposed?0:R+o*2},endState:ge,attrs:{x:t.x-o,y:i.y-o,width:x+o*2,height:R+o*2}}}function ar(c,o){o===void 0&&(o=0);var t=c.start,i=c.end,x=c.getWidth(),R=c.getHeight(),nt=Math.min(t.x,i.x),Mt=Math.min(t.y,i.y);return Qe.fromRange(nt-o,Mt-o,nt+x+o,Mt+R+o)}var rr=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function Fr(c){var o="linear";return rr.test(c)?o="timeCat":Object(a.isString)(c)&&(o="cat"),o}function Ar(c,o,t){var i=o||[];if(Object(a.isNumber)(c)||Object(a.isNil)(Object(a.firstValue)(i,c))&&Object(a.isEmpty)(t)){var x=Object(we.d)("identity");return new x({field:c.toString(),values:[c]})}var R=Object(a.valuesOfKey)(i,c),nt=Object(a.get)(t,"type",Fr(R[0])),Mt=Object(we.d)(nt);return new Mt(Object(rt.a)({field:c,values:R},t))}function wr(c,o){if(c.type!=="identity"&&o.type!=="identity"){var t={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);c.change(t)}}function xr(c){return c.alias||c.field}function Er(c,o,t){var i=c.values,x=i.length,R;if(x===1)R=[.5,1];else{var nt=1,Mt=0;$e(o)?o.isTransposed?(nt=Object(a.get)(t,"widthRatio.multiplePie",1/1.3),Mt=1/x*nt,R=[Mt/2,1-Mt/2]):R=[0,1-1/x]:(Mt=1/x/2,R=[Mt,1-Mt])}return R}function Ir(c){var o,t;switch(c){case e.TOP:o={x:0,y:1},t={x:1,y:1};break;case e.RIGHT:o={x:1,y:0},t={x:1,y:1};break;case e.BOTTOM:o={x:0,y:0},t={x:1,y:0};break;case e.LEFT:o={x:0,y:0},t={x:0,y:1};break;default:o=t={x:0,y:0}}return{start:o,end:t}}function Lr(c){var o,t;return c.isTransposed?(o={x:0,y:0},t={x:1,y:0}):(o={x:0,y:0},t={x:0,y:1}),{start:o,end:t}}function Pr(c,o){var t={start:{x:0,y:0},end:{x:0,y:0}};c.isRect?t=Ir(o):c.isPolar&&(t=Lr(c));var i=t.start,x=t.end;return{start:c.convert(i),end:c.convert(x)}}function Dr(c,o){if(c.isRect)return c.isTransposed?[e.RIGHT,e.BOTTOM].includes(o)?1:-1:[e.BOTTOM,e.RIGHT].includes(o)?-1:1;if(c.isPolar){var t=c.x.start;return t<0?-1:1}return 1}function ri(c){var o=c.start,t=c.end;return o.x===t.x}function vi(c,o){var t=c.start,i=c.end,x=ri(c);return x?(t.y-i.y)*(o.x-t.x)>0?1:-1:(i.x-t.x)*(t.y-o.y)>0?-1:1}function ii(c,o){return Object(a.get)(c,["components","axis",o],{})}function Si(c){var o=c.x,t=c.y,i=c.circleCenter,x=t.start>t.end,R=c.isTransposed?c.convert({x:x?0:1,y:0}):c.convert({x:0,y:x?0:1}),nt=[R.x-i.x,R.y-i.y],Mt=[1,0],Lt=R.y>i.y?jr.c.angle(nt,Mt):jr.c.angle(nt,Mt)*-1,ne=Lt+(o.end-o.start),ge=Math.sqrt(Math.pow(R.x-i.x,2)+Math.pow(R.y-i.y,2));return{center:i,radius:ge,startAngle:Lt,endAngle:ne}}function Ui(c,o){return Object(a.isBoolean)(c)?c===!1?!1:{}:Object(a.get)(c,[o])}function Yi(c,o){return Object(a.get)(c,"position",o)}function Bi(c,o){return Object(a.get)(o,["title","text"],xr(c))}var Di=function(){function c(o,t){this.destroyed=!1,this.facets=[],this.view=o,this.cfg=Object(a.deepMix)({},this.getDefaultCfg(),t)}return c.prototype.init=function(){this.container||(this.container=this.createContainer());var o=this.view.getData();this.facets=this.generateFacets(o)},c.prototype.render=function(){this.renderViews()},c.prototype.update=function(){},c.prototype.clear=function(){this.clearFacetViews()},c.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},c.prototype.facetToView=function(o){var t=o.region,i=o.data,x=o.padding,R=x===void 0?this.cfg.padding:x,nt=this.view.createView({region:t,padding:R});nt.data(i||[]),o.view=nt,this.beforeEachView(nt,o);var Mt=this.cfg.eachView;return Mt&&Mt(nt,o),this.afterEachView(nt,o),nt},c.prototype.createContainer=function(){var o=this.view.getLayer(E.FORE);return o.addGroup()},c.prototype.renderViews=function(){this.createFacetViews()},c.prototype.createFacetViews=function(){var o=this;return this.facets.map(function(t){return o.facetToView(t)})},c.prototype.clearFacetViews=function(){var o=this;Object(a.each)(this.facets,function(t){t.view&&(o.view.removeView(t.view),t.view=void 0)})},c.prototype.getFieldValues=function(o,t){var i=[],x={};return Object(a.each)(o,function(R){var nt=R[t];!Object(a.isNil)(nt)&&!x[nt]&&(i.push(nt),x[nt]=!0)}),i},c.prototype.getRegion=function(o,t,i,x){var R=1/(t===0?1:t),nt=1/(o===0?1:o),Mt={x:R*i,y:nt*x},Lt={x:R*(i+1),y:nt*(x+1)};return{start:Mt,end:Lt}},c.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,padding:10,fields:[]}},c.prototype.getDefaultTitleCfg=function(){var o=this.view.getTheme().fontFamily;return{style:{fontSize:14,fill:"#666",fontFamily:o}}},c.prototype.processAxis=function(o,t){var i=o.getOptions(),x=i.coordinate,R=o.geometries,nt=Object(a.get)(x,"type","rect");if(nt==="rect"&&R.length){Object(a.isNil)(i.axes)&&(i.axes={});var Mt=i.axes,Lt=R[0].getXYFields(),ne=Lt[0],ge=Lt[1],be=Ui(Mt,ne),Ae=Ui(Mt,ge);be!==!1&&(i.axes[ne]=this.getXAxisOption(ne,Mt,be,t)),Ae!==!1&&(i.axes[ge]=this.getYAxisOption(ge,Mt,Ae,t))}},c.prototype.getFacetDataFilter=function(o){return function(t){return Object(a.every)(o,function(i){var x=i.field,R=i.value;return!Object(a.isNil)(R)&&x?t[x]===R:!0})}},c}(),ve={},G=function(o){return ve[Object(a.lowerCase)(o)]},B=function(o,t){ve[Object(a.lowerCase)(o)]=t},$=function(){function c(o,t){this.context=o,this.cfg=t,o.addAction(this)}return c.prototype.applyCfg=function(o){Object(a.assign)(this,o)},c.prototype.init=function(){this.applyCfg(this.cfg)},c.prototype.destroy=function(){this.context.removeAction(this),this.context=null},c}(),lt=$,Ft=function(c){Object(rt.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.execute=function(){this.callback&&this.callback(this.context)},o.prototype.destroy=function(){c.prototype.destroy.call(this),this.callback=null},o}(lt),Jt=Ft,ie={};function se(c,o){var t=ie[c],i=null;if(t){var x=t.ActionClass,R=t.cfg;i=new x(o,R),i.name=c,i.init()}return i}function Ce(c){var o=ie[c];return Object(a.get)(o,"ActionClass")}function Ee(c,o,t){ie[c]={ActionClass:o,cfg:t}}function un(c){delete ie[c]}function xn(c,o){var t=new Jt(o);return t.callback=c,t.name="callback",t}function zt(c,o){var t=[];if(c.length){t.push(["M",c[0].x,c[0].y]);for(var i=1,x=c.length;i<x;i+=1){var R=c[i];t.push(["L",R.x,R.y])}o&&t.push(["Z"])}return t}function Yt(c,o){for(var t=[c[0]],i=1,x=c.length;i<x;i=i+2){var R=o.convert({x:c[i],y:c[i+1]});t.push(R.x,R.y)}return t}function Se(c,o){var t=o.isTransposed,i=c[1],x=c[6],R=c[7],nt=o.convert({x,y:R}),Mt=t?0:1;return["A",i,i,0,0,Mt,nt.x,nt.y]}function Wt(c,o,t){var i=t.isTransposed,x=t.startAngle,R=t.endAngle,nt=c[0].toLowerCase()==="a"?{x:c[6],y:c[7]}:{x:c[1],y:c[2]},Mt={x:o[1],y:o[2]},Lt=[],ne=i?"y":"x",ge=Math.abs(Mt[ne]-nt[ne])*(R-x),be=Mt[ne]>=nt[ne]?1:0,Ae=ge>Math.PI?1:0,We=t.convert(Mt),an=rn(t,We);if(an>=.5)if(ge===Math.PI*2){var gn={x:(Mt.x+nt.x)/2,y:(Mt.y+nt.y)/2},Yn=t.convert(gn);Lt.push(["A",an,an,0,Ae,be,Yn.x,Yn.y]),Lt.push(["A",an,an,0,Ae,be,We.x,We.y])}else Lt.push(["A",an,an,0,Ae,be,We.x,We.y]);return Lt}function ue(c){Object(a.each)(c,function(o,t){var i=o;if(i[0].toLowerCase()==="a"){var x=c[t-1],R=c[t+1];R&&R[0].toLowerCase()==="a"?x&&x[0].toLowerCase()==="l"&&(x[0]="M"):x&&x[0].toLowerCase()==="a"&&R&&R[0].toLowerCase()==="l"&&(R[0]="M")}})}var vn=function(o,t,i,x){var R=[],nt,Mt,Lt=!!x,ne,ge;if(Lt){ne=[Infinity,Infinity],ge=[-Infinity,-Infinity];for(var be=0,Ae=o.length;be<Ae;be++){var We=o[be];ne=jr.c.min([0,0],ne,We),ge=jr.c.max([0,0],ge,We)}ne=jr.c.min([0,0],ne,x[0]),ge=jr.c.max([0,0],ge,x[1])}for(var be=0,an=o.length;be<an;be++){var We=o[be];if(i)nt=o[be?be-1:an-1],Mt=o[(be+1)%an];else if(be===0||be===an-1){R.push(We);continue}else nt=o[be-1],Mt=o[be+1];var gn=[0,0];gn=jr.c.sub(gn,Mt,nt),gn=jr.c.scale(gn,gn,t);var Yn=jr.c.distance(We,nt),Hn=jr.c.distance(We,Mt),ir=Yn+Hn;ir!==0&&(Yn/=ir,Hn/=ir);var cr=jr.c.scale([0,0],gn,-Yn),kr=jr.c.scale([0,0],gn,Hn),zr=jr.c.add([0,0],We,cr),Ur=jr.c.add([0,0],We,kr);Lt&&(zr=jr.c.max([0,0],zr,ne),zr=jr.c.min([0,0],zr,ge),Ur=jr.c.max([0,0],Ur,ne),Ur=jr.c.min([0,0],Ur,ge)),R.push(zr),R.push(Ur)}return i&&R.push(R.shift()),R};function Dn(c,o,t){for(var i=!!o,x=[],R=0,nt=c.length;R<nt;R+=2)x.push([c[R],c[R+1]]);for(var Mt=vn(x,.4,i,t),Lt=x.length,ne=[],ge,be,Ae,R=0;R<Lt-1;R++)ge=Mt[R*2],be=Mt[R*2+1],Ae=x[R+1],ne.push(["C",ge[0],ge[1],be[0],be[1],Ae[0],Ae[1]]);return i&&(ge=Mt[Lt],be=Mt[Lt+1],Ae=x[0],ne.push(["C",ge[0],ge[1],be[0],be[1],Ae[0],Ae[1]])),ne}function zn(c,o){return zt(c,o)}function _n(c,o,t){var i=[],x=c[0],R=null;if(c.length<=2)return zn(c,o);for(var nt=0,Mt=c.length;nt<Mt;nt++){var Lt=c[nt];(!R||!(R.x===Lt.x&&R.y===Lt.y))&&(i.push(Lt.x),i.push(Lt.y),R=Lt)}var ne=t||[[0,0],[1,1]],ge=Dn(i,o,ne);return ge.unshift(["M",x.x,x.y]),ge}function Ze(c,o){var t=[];return Object(a.each)(o,function(i){var x=i[0];switch(x.toLowerCase()){case"m":case"l":case"c":t.push(Yt(i,c));break;case"a":t.push(Se(i,c));break;case"z":default:t.push(i);break}}),t}function Te(c,o){var t=[],i,x,R,nt;return Object(a.each)(o,function(Mt,Lt){var ne=Mt[0];switch(ne.toLowerCase()){case"m":case"c":case"q":t.push(Yt(Mt,c));break;case"l":i=o[Lt-1],x=Mt,R=c.isTransposed,nt=R?i[i.length-2]===x[1]:i[i.length-1]===x[2],nt?t=t.concat(Wt(i,x,c)):t.push(Yt(Mt,c));break;case"a":t.push(Se(Mt,c));break;case"z":default:t.push(Mt);break}}),ue(t),t}var N=_("LvGN");function mt(c,o){var t=c.event,i=t.target,x=i.getCanvasBBox();return x.width>=o||x.height>=o?x:null}function $t(c,o){var t=c.event,i=t.target,x=i.getCanvasBBox();return x.width>=o||x.height>=o?i.attr("path"):null}function me(c){var o=c.event,t,i=o.target;return i&&(t=i.get("element")),t}function Zt(c){var o=c.event,t=o.target,i;return t&&(i=t.get("delegateObject")),i}function de(c){var o=c.event.gEvent;return!(o&&o.fromShape&&o.toShape&&o.fromShape.get("element")===o.toShape.get("element"))}function he(c){return c&&c.component&&c.component.isList()}function ce(c){return c&&c.component&&c.component.isSlider()}function Me(c){var o=c.event,t=o.target;return t&&t.get("name")==="mask"}function ze(c,o){var t=c.event.target;if(t.get("type")==="path"){var i=$t(c,o);return i?Sn(c.view,i):void 0}var x=mt(c,o);return x?nn(c.view,x):null}function Ve(c,o,t){var i=mt(c,t);if(!i)return null;var x=c.view,R=Ue(x,o,{x:i.x,y:i.y}),nt=Ue(x,o,{x:i.maxX,y:i.maxY}),Mt={minX:R.x,minY:R.y,maxX:nt.x,maxY:nt.y};return nn(o,Mt)}function ke(c){var o=c.geometries,t=[];return Object(a.each)(o,function(i){var x=i.elements;t=t.concat(x)}),c.views&&c.views.length&&Object(a.each)(c.views,function(i){t=t.concat(ke(i))}),t}function tn(c,o,t){var i=ke(c);return i.filter(function(x){return cn(x,o)===t})}function De(c,o){var t=c.geometries,i=[];return Object(a.each)(t,function(x){var R=x.getElementsBy(function(nt){return nt.hasState(o)});i=i.concat(R)}),i}function cn(c,o){var t=c.getModel(),i=t.data,x;return Object(a.isArray)(i)?x=i[0][o]:x=i[o],x}function hn(c,o){return!(o.minX>c.maxX||o.maxX<c.minX||o.minY>c.maxY||o.maxY<c.minY)}function nn(c,o){var t=ke(c),i=[];return Object(a.each)(t,function(x){var R=x.shape,nt=R.getCanvasBBox();hn(o,nt)&&i.push(x)}),i}function dn(c){var o=[];return Object(a.each)(c,function(t){var i=t[0];if(i!=="A")for(var x=1;x<t.length;x=x+2)o.push([t[x],t[x+1]]);else{var R=t.length;o.push([t[R-2],t[R-1]])}}),o}function Sn(c,o){var t=ke(c),i=dn(o),x=t.filter(function(R){var nt=R.shape,Mt;if(nt.get("type")==="path")Mt=dn(nt.attr("path"));else{var Lt=nt.getCanvasBBox();Mt=Vn(Lt)}return Object(N.b)(i,Mt)});return x}function Pe(c){return c.getComponents().map(function(o){return o.component})}function le(c,o){var t=o.x-c.x,i=o.y-c.y;return Math.sqrt(t*t+i*i)}function Le(c,o){if(c.length<=2)return zn(c,!1);var t=c[0],i=[];Object(a.each)(c,function(R){i.push(R.x),i.push(R.y)});var x=Dn(i,o,null);return x.unshift(["M",t.x,t.y]),x}function Be(c,o){return c.x<=o.x&&c.maxX>=o.x&&c.y<=o.y&&c.maxY>o.y}function en(c){var o=c.parent,t=null;return o&&(t=o.views.filter(function(i){return i!==c})),t}function sn(c,o){var t=c.getCoordinate();return t.invert(o)}function Ue(c,o,t){var i=sn(c,t);return o.getCoordinate().convert(i)}function ln(c,o,t,i){var x=!1;return Object(a.each)(c,function(R){if(R[t]===o[t]&&R[i]===o[i])return x=!0,!1}),x}function mn(c,o){var t=c.getScaleByField(o);return!t&&c.views&&Object(a.each)(c.views,function(i){if(t=mn(i,o),t)return!1}),t}var Wn=function(){function c(o){this.actions=[],this.event=null,this.cacheMap={},this.view=o}return c.prototype.cache=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];if(o.length===1)return this.cacheMap[o[0]];o.length===2&&(this.cacheMap[o[0]]=o[1])},c.prototype.getAction=function(o){return this.actions.find(function(t){return t.name===o})},c.prototype.addAction=function(o){this.actions.push(o)},c.prototype.removeAction=function(o){var t=this.actions,i=this.actions.indexOf(o);i>=0&&t.splice(i,1)},c.prototype.getCurrentPoint=function(){var o=this.event;if(o)if(o.target instanceof HTMLElement){var t=this.view.getCanvas(),i=t.getPointByClient(o.clientX,o.clientY);return i}else return{x:o.x,y:o.y};return null},c.prototype.getCurrentShape=function(){return Object(a.get)(this.event,["gEvent","shape"])},c.prototype.isInPlot=function(){var o=this.getCurrentPoint();return o?this.view.isPointInPlot(o):!1},c.prototype.isInShape=function(o){var t=this.getCurrentShape();return t?t.get("name")===o:!1},c.prototype.isInComponent=function(o){var t=Pe(this.view),i=this.getCurrentPoint();return i?!!t.find(function(x){var R=x.getBBox();return o?x.get("name")===o&&Be(R,i):Be(R,i)}):!1},c.prototype.destroy=function(){this.view=null,this.event=null,Object(a.each)(this.actions.slice(),function(o){o.destroy()}),this.actions=null,this.cacheMap=null},c}(),An=Wn,In=function(){function c(o,t){this.view=o,this.cfg=t}return c.prototype.init=function(){this.initEvents()},c.prototype.initEvents=function(){},c.prototype.clearEvents=function(){},c.prototype.destroy=function(){this.clearEvents()},c}(),lr=In;function Hr(c,o){var t=c.split(":"),i=t[0],x=o.getAction(i)||se(i,o);if(!x)throw new Error("There is no action named "+i);var R=t[1];return{action:x,methodName:R}}function Gr(c){var o=c.action,t=c.methodName;if(o[t])o[t]();else throw new Error("Action("+o.name+") doesn't have a method called "+t)}var Mr={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},oi=function(c){Object(rt.b)(o,c);function o(t,i){var x=c.call(this,t,i)||this;return x.callbackCaches={},x.emitCaches={},x.steps=i,x}return o.prototype.init=function(){this.initContext(),c.prototype.init.call(this)},o.prototype.destroy=function(){c.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},o.prototype.initEvents=function(){var t=this;Object(a.each)(this.steps,function(i,x){Object(a.each)(i,function(R){var nt=t.getActionCallback(x,R);nt&&t.bindEvent(R.trigger,nt)})})},o.prototype.clearEvents=function(){var t=this;Object(a.each)(this.steps,function(i,x){Object(a.each)(i,function(R){var nt=t.getActionCallback(x,R);nt&&t.offEvent(R.trigger,nt)})})},o.prototype.initContext=function(){var t=this.view,i=new An(t);this.context=i;var x=this.steps;Object(a.each)(x,function(R){Object(a.each)(R,function(nt){if(Object(a.isFunction)(nt.action))nt.actionObject={action:xn(nt.action,i),methodName:"execute"};else if(Object(a.isString)(nt.action))nt.actionObject=Hr(nt.action,i);else if(Object(a.isArray)(nt.action)){var Mt=nt.action;nt.actionObject=[],Object(a.each)(Mt,function(Lt){nt.actionObject.push(Hr(Lt,i))})}})})},o.prototype.isAllowStep=function(t){var i=this.currentStepName,x=this.steps;if(i===t||t===Mr.SHOW_ENABLE)return!0;if(t===Mr.PROCESSING)return i===Mr.START;if(t===Mr.START)return i!==Mr.PROCESSING;if(t===Mr.END)return i===Mr.PROCESSING||i===Mr.START;if(t===Mr.ROLLBACK){if(x[Mr.END])return i===Mr.END;if(i===Mr.START)return!0}return!1},o.prototype.isAllowExecute=function(t,i){if(this.isAllowStep(t)){var x=this.getKey(t,i);return i.once&&this.emitCaches[x]?!1:i.isEnable?i.isEnable(this.context):!0}return!1},o.prototype.enterStep=function(t){this.currentStepName=t,this.emitCaches={}},o.prototype.afterExecute=function(t,i){t!==Mr.SHOW_ENABLE&&this.currentStepName!==t&&this.enterStep(t);var x=this.getKey(t,i);this.emitCaches[x]=!0},o.prototype.getKey=function(t,i){return t+i.trigger+i.action},o.prototype.getActionCallback=function(t,i){var x=this,R=this.context,nt=this.callbackCaches,Mt=i.actionObject;if(i.action&&Mt){var Lt=this.getKey(t,i);if(!nt[Lt]){var ne=function(be){R.event=be,x.isAllowExecute(t,i)?(Object(a.isArray)(Mt)?Object(a.each)(Mt,function(Ae){R.event=be,Gr(Ae)}):(R.event=be,Gr(Mt)),x.afterExecute(t,i),i.callback&&(R.event=be,i.callback(R))):R.event=null};i.debounce?nt[Lt]=Object(a.debounce)(ne,i.debounce.wait,i.debounce.immediate):i.throttle?nt[Lt]=Object(a.throttle)(ne,i.throttle.wait,{leading:i.throttle.leading,trailing:i.throttle.trailing}):nt[Lt]=ne}return nt[Lt]}return null},o.prototype.bindEvent=function(t,i){var x=t.split(":");x[0]==="window"?window.addEventListener(x[1],i):x[0]==="document"?document.addEventListener(x[1],i):this.view.on(t,i)},o.prototype.offEvent=function(t,i){var x=t.split(":");x[0]==="window"?window.removeEventListener(x[1],i):x[0]==="document"?document.removeEventListener(x[1],i):this.view.off(t,i)},o}(lr),ai=oi,Zr={};function Xi(c){return Zr[Object(a.lowerCase)(c)]}function $i(c,o){Zr[Object(a.lowerCase)(c)]=o}function Go(c,o,t){var i=Xi(c);if(!i)return null;if(Object(a.isPlainObject)(i)){var x=Object(a.mix)(Object(a.clone)(i),t);return new ai(o,x)}else{var R=i;return new R(o,t)}}function _o(c){return{title:{autoRotate:!0,position:"center",spacing:c.axisTitleSpacing,style:{fill:c.axisTitleTextFillColor,fontSize:c.axisTitleTextFontSize,lineHeight:c.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:c.fontFamily}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:c.axisLabelOffset,style:{fill:c.axisLabelFillColor,fontSize:c.axisLabelFontSize,lineHeight:c.axisLabelLineHeight,fontFamily:c.fontFamily}},line:{style:{lineWidth:c.axisLineBorder,stroke:c.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:c.axisGridBorderColor,lineWidth:c.axisGridBorder,lineDash:c.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:c.axisTickLineBorder,stroke:c.axisTickLineBorderColor},alignTick:!0,length:c.axisTickLineLength},subTickLine:null,animate:!0}}function Uo(c){return{title:null,marker:{symbol:"circle",spacing:c.legendMarkerSpacing,style:{r:c.legendCircleMarkerSize,fill:c.legendMarkerColor}},itemName:{spacing:5,style:{fill:c.legendItemNameFillColor,fontFamily:c.fontFamily,fontSize:c.legendItemNameFontSize,lineHeight:c.legendItemNameLineHeight,fontWeight:c.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},flipPage:!0,animate:!1,maxItemWidth:200,itemSpacing:c.legendItemSpacing,itemMarginBottom:c.legendItemMarginBottom,padding:c.legendPadding}}function ta(c){var o,t={point:{default:{fill:c.pointFillColor,r:c.pointSize,stroke:c.pointBorderColor,lineWidth:c.pointBorder,fillOpacity:c.pointFillOpacity},active:{stroke:c.pointActiveBorderColor,lineWidth:c.pointActiveBorder},selected:{stroke:c.pointSelectedBorderColor,lineWidth:c.pointSelectedBorder},inactive:{fillOpacity:c.pointInactiveFillOpacity,strokeOpacity:c.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:c.hollowPointFillColor,lineWidth:c.hollowPointBorder,stroke:c.hollowPointBorderColor,strokeOpacity:c.hollowPointBorderOpacity,r:c.hollowPointSize},active:{stroke:c.hollowPointActiveBorderColor,strokeOpacity:c.hollowPointActiveBorderOpacity},selected:{lineWidth:c.hollowPointSelectedBorder,stroke:c.hollowPointSelectedBorderColor,strokeOpacity:c.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:c.hollowPointInactiveBorderOpacity}},area:{default:{fill:c.areaFillColor,fillOpacity:c.areaFillOpacity,stroke:null},active:{fillOpacity:c.areaActiveFillOpacity},selected:{fillOpacity:c.areaSelectedFillOpacity},inactive:{fillOpacity:c.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:c.hollowAreaBorderColor,lineWidth:c.hollowAreaBorder,strokeOpacity:c.hollowAreaBorderOpacity},active:{fill:null,lineWidth:c.hollowAreaActiveBorder},selected:{fill:null,lineWidth:c.hollowAreaSelectedBorder},inactive:{strokeOpacity:c.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:c.intervalFillColor,fillOpacity:c.intervalFillOpacity},active:{stroke:c.intervalActiveBorderColor,lineWidth:c.intervalActiveBorder},selected:{stroke:c.intervalSelectedBorderColor,lineWidth:c.intervalSelectedBorder},inactive:{fillOpacity:c.intervalInactiveFillOpacity,strokeOpacity:c.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:c.hollowIntervalFillColor,stroke:c.hollowIntervalBorderColor,lineWidth:c.hollowIntervalBorder,strokeOpacity:c.hollowIntervalBorderOpacity},active:{stroke:c.hollowIntervalActiveBorderColor,lineWidth:c.hollowIntervalActiveBorder,strokeOpacity:c.hollowIntervalActiveBorderOpacity},selected:{stroke:c.hollowIntervalSelectedBorderColor,lineWidth:c.hollowIntervalSelectedBorder,strokeOpacity:c.hollowIntervalSelectedBorderOpacity},inactive:{stroke:c.hollowIntervalInactiveBorderColor,lineWidth:c.hollowIntervalInactiveBorder,strokeOpacity:c.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:c.lineBorderColor,lineWidth:c.lineBorder,strokeOpacity:c.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:c.lineActiveBorder},selected:{lineWidth:c.lineSelectedBorder},inactive:{strokeOpacity:c.lineInactiveBorderOpacity}}},i=_o(c),x=Uo(c);return{background:c.backgroundColor,defaultColor:c.brandColor,padding:"auto",fontFamily:c.fontFamily,columnWidthRatio:1/2,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:c.paletteQualitative10,colors20:c.paletteQualitative20,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:function(nt){var Mt=nt.geometry.coordinate;if(Mt.isPolar&&Mt.isTransposed){var Lt=ao(nt.getModel(),Mt),ne=Lt.startAngle,ge=Lt.endAngle,be=(ne+ge)/2,Ae=7.5,We=Ae*Math.cos(be),an=Ae*Math.sin(be);return{matrix:jr.a.transform(null,[["t",We,an]])}}return t.interval.selected}}},"hollow-rect":{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},line:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},tick:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},funnel:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}},pyramid:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},line:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},dot:{default:{style:Object(rt.a)(Object(rt.a)({},t.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:Object(rt.a)(Object(rt.a)({},t.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:Object(rt.a)(Object(rt.a)({},t.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:Object(rt.a)(Object(rt.a)({},t.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:Object(rt.a)(Object(rt.a)({},t.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:Object(rt.a)(Object(rt.a)({},t.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:Object(rt.a)(Object(rt.a)({},t.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:Object(rt.a)(Object(rt.a)({},t.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hvh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}},polygon:{polygon:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},point:{circle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},square:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},bowtie:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},diamond:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},hexagon:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},triangle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"triangle-down":{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"hollow-circle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-square":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-bowtie":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-diamond":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-hexagon":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle-down":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},cross:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},tick:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},plus:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},hyphen:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},line:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}}},area:{area:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},smooth:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},line:{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}},"smooth-line":{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}}},schema:{candle:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},box:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}}},edge:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},arc:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}}},components:{axis:{common:i,top:Object(a.deepMix)({},i,{position:"top",grid:null,title:null,verticalLimitLength:1/2}),bottom:Object(a.deepMix)({},i,{position:"bottom",grid:null,title:null,verticalLimitLength:1/2}),left:Object(a.deepMix)({},i,{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3}),right:Object(a.deepMix)({},i,{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3}),circle:Object(a.deepMix)({},i,{title:null,grid:Object(a.deepMix)({},i.grid,{line:{type:"line"}})}),radius:Object(a.deepMix)({},i,{title:null,grid:Object(a.deepMix)({},i.grid,{line:{type:"circle"}})})},legend:{common:x,right:Object(a.deepMix)({},x,{layout:"vertical",padding:c.legendVerticalPadding}),left:Object(a.deepMix)({},x,{layout:"vertical",padding:c.legendVerticalPadding}),top:Object(a.deepMix)({},x,{layout:"horizontal",padding:c.legendHorizontalPadding}),bottom:Object(a.deepMix)({},x,{layout:"horizontal",padding:c.legendHorizontalPadding}),continuous:{title:null,background:null,track:{},rail:{type:"color",size:c.sliderRailHeight,defaultLength:c.sliderRailWidth,style:{fill:c.sliderRailFillColor,stroke:c.sliderRailBorderColor,lineWidth:c.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:c.sliderLabelTextFillColor,fontSize:c.sliderLabelTextFontSize,lineHeight:c.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:c.fontFamily}},handler:{size:c.sliderHandlerWidth,style:{fill:c.sliderHandlerFillColor,stroke:c.sliderHandlerBorderColor}},slidable:!0,padding:x.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffSetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:c.tooltipCrosshairsBorderColor,lineWidth:c.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(o={},o[""+Qr.TOOLTIP_CSS_CONST.CONTAINER_CLASS]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:c.tooltipContainerFillColor,opacity:c.tooltipContainerFillOpacity,boxShadow:c.tooltipContainerShadow,borderRadius:c.tooltipContainerBorderRadius+"px",color:c.tooltipTextFillColor,fontSize:c.tooltipTextFontSize+"px",fontFamily:c.fontFamily,lineHeight:c.tooltipTextLineHeight+"px",padding:"0 12px 0 12px"},o[""+Qr.TOOLTIP_CSS_CONST.TITLE_CLASS]={marginBottom:"12px",marginTop:"12px"},o[""+Qr.TOOLTIP_CSS_CONST.LIST_CLASS]={margin:0,listStyleType:"none",padding:0},o[""+Qr.TOOLTIP_CSS_CONST.LIST_ITEM_CLASS]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},o[""+Qr.TOOLTIP_CSS_CONST.MARKER_CLASS]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},o[""+Qr.TOOLTIP_CSS_CONST.VALUE_CLASS]={display:"inline-block",float:"right",marginLeft:"30px"},o)},annotation:{arc:{style:{stroke:c.annotationArcBorderColor,lineWidth:c.annotationArcBorder},animate:!0},line:{style:{stroke:c.annotationLineBorderColor,lineDash:c.annotationLineDash,lineWidth:c.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:c.annotationTextFillColor,stroke:c.annotationTextBorderColor,lineWidth:c.annotationTextBorder,fontSize:c.annotationTextFontSize,textAlign:"start",fontFamily:c.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:c.annotationTextFillColor,stroke:c.annotationTextBorderColor,lineWidth:c.annotationTextBorder,fontSize:c.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:c.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:c.annotationRegionBorder,stroke:c.annotationRegionBorderColor,fill:c.annotationRegionFillColor,fillOpacity:c.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:c.brandColor,lineWidth:2}},line:{style:{stroke:c.annotationLineBorderColor,lineWidth:c.annotationLineBorder},length:c.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:c.annotationTextFillColor,stroke:c.annotationTextBorderColor,lineWidth:c.annotationTextBorder,fontSize:c.annotationTextFontSize,fontFamily:c.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:c.annotationRegionFillColor,fillOpacity:c.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:c.annotationTextFillColor,stroke:c.annotationTextBorderColor,lineWidth:c.annotationTextBorder,fontSize:c.annotationTextFontSize,fontFamily:c.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8]}},scrollbar:{common:{padding:[8,8,8,8]}}},labels:{offset:12,style:{fill:c.labelFillColor,fontSize:c.labelFontSize,fontFamily:c.fontFamily,stroke:c.labelBorderColor,lineWidth:c.labelBorder},fillColorDark:c.labelFillColorDark,fillColorLight:c.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:c.innerLabelFillColor,fontSize:c.innerLabelFontSize,fontFamily:c.fontFamily,stroke:c.innerLabelBorderColor,lineWidth:c.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:c.overflowLabelFillColor,fontSize:c.overflowLabelFontSize,fontFamily:c.fontFamily,stroke:c.overflowLabelBorderColor,lineWidth:c.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:c.labelLineBorder}},autoRotate:!0}}}var li={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},Oo={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},qi=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],zo=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],Yo=function(o){o===void 0&&(o={});var t=o.backgroundColor,i=t===void 0?"transparent":t,x=o.paletteQualitative10,R=x===void 0?qi:x,nt=o.paletteQualitative20,Mt=nt===void 0?zo:nt,Lt=o.paletteSemanticRed,ne=Lt===void 0?"#F4664A":Lt,ge=o.paletteSemanticGreen,be=ge===void 0?"#30BF78":ge,Ae=o.paletteSemanticYellow,We=Ae===void 0?"#FAAD14":Ae,an=o.fontFamily,gn=an===void 0?`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`:an,Yn=o.brandColor,Hn=Yn===void 0?R[0]:Yn;return{backgroundColor:i,brandColor:Hn,paletteQualitative10:R,paletteQualitative20:Mt,paletteSemanticRed:ne,paletteSemanticGreen:be,paletteSemanticYellow:We,fontFamily:gn,axisLineBorderColor:li[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:li[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:li[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:li[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:li[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:li[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:li[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:Hn,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:li[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],sliderRailFillColor:li[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:li[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:li[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:li[25],annotationArcBorderColor:li[15],annotationArcBorder:1,annotationLineBorderColor:li[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:li[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:li[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:li[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:li[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:li[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Oo[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:li[65],overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:Oo[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:li[25],pointFillColor:Hn,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Oo[100],pointBorderOpacity:1,pointActiveBorderColor:li[100],pointSelectedBorder:2,pointSelectedBorderColor:li[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:Hn,hollowPointBorderOpacity:.95,hollowPointFillColor:Oo[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:li[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:li[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:Hn,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:Hn,areaFillOpacity:.25,areaActiveFillColor:Hn,areaActiveFillOpacity:.5,areaSelectedFillColor:Hn,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:Hn,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:li[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:li[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:Hn,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:li[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:li[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:Hn,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Oo[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:li[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:li[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}},Xo=Yo();function ua(c){var o=c.styleSheet,t=o===void 0?{}:o,i=Object(rt.c)(c,["styleSheet"]),x=Yo(t);return Object(a.deepMix)({},ta(x),i)}var di=ua({}),ea={default:di};function xi(c){return Object(a.get)(ea,Object(a.lowerCase)(c),ea.default)}function Rs(c,o){ea[Object(a.lowerCase)(c)]=ua(o)}function ki(c,o,t){var i=t.translate(c),x=t.translate(o);return Object(a.isNumberEqual)(i,x)}function ks(c,o){var t=o.coordinate,i=o.getXScale(),x=i.range,R=x[x.length-1],nt=x[0],Mt=t.invert(c),Lt=Mt.x;return t.isPolar&&Lt>(1+R)/2&&(Lt=nt),i.translate(i.invert(Lt))}function Mi(c,o,t){var i=t.coordinate,x=t.getYScale(),R=x.field,nt=i.invert(o),Mt=x.invert(nt.y),Lt=Object(a.find)(c,function(ne){var ge=ne[y];return ge[R][0]<=Mt&&ge[R][1]>=Mt});return Lt||c[c.length-1]}var hu=Object(a.memoize)(function(c){if(c.isCategory)return 1;for(var o=c.values,t=o.length,i=c.translate(o[0]),x=i,R=0;R<t;R++){var nt=o[R],Mt=c.translate(nt);Mt<i&&(i=Mt),Mt>x&&(x=Mt)}return(x-i)/(t-1)});function ui(c,o,t){var i=o.getAttribute("position"),x=i.getFields(),R=o.scales,nt=Object(a.isFunction)(t)||!t?x[0]:t,Mt=R[nt],Lt=Mt?Mt.getText(c[nt]):c[nt]||nt;return Object(a.isFunction)(t)?t(Lt,c):Lt}function du(c){var o=Object(a.values)(c.attributes);return Object(a.filter)(o,function(t){return Object(a.contains)(j,t.type)})}function eo(c){for(var o=du(c),t,i=0,x=o;i<x.length;i++){var R=x[i],nt=R.getScale(R.type);if(nt&&nt.isLinear){t=nt;break}}var Mt=c.getXScale(),Lt=c.getYScale();return t||Lt||Mt}function vu(c,o){var t=o.field,i=c[t];if(Object(a.isArray)(i)){var x=i.map(function(R){return o.getText(R)});return x.join("-")}return o.getText(i)}function na(c,o){var t,i=o.getGroupScales();if(i.length&&(t=i[0]),t){var x=t.field;return t.getText(c[x])}var R=eo(o);return xr(R)}function ra(c,o,t){if(o.length===0)return null;var i=t.type,x=t.getXScale(),R=t.getYScale(),nt=x.field,Mt=R.field,Lt=null;if(i==="heatmap"||i==="point"){for(var ne=t.coordinate,ge=ne.invert(c),be=x.invert(ge.x),Ae=R.invert(ge.y),We=Infinity,an=0;an<o.length;an++){var gn=o[an],Yn=gn[y],Hn=Math.pow(Yn[nt]-be,2)+Math.pow(Yn[Mt]-Ae,2);Hn<We&&(We=Hn,Lt=gn)}return Lt}var ir=o[0],cr=o[o.length-1],kr=ks(c,t),zr=ir[y][nt],Ur=ir[y][Mt],Ri=cr[y][nt],Ai=R.isLinear&&Object(a.isArray)(Ur);if(Object(a.isArray)(zr)){for(var an=0;an<o.length;an++){var mi=o[an],Yn=mi[y];if(x.translate(Yn[nt][0])<=kr&&x.translate(Yn[nt][1])>=kr)if(Ai)Object(a.isArray)(Lt)||(Lt=[]),Lt.push(mi);else{Lt=mi;break}}Object(a.isArray)(Lt)&&(Lt=Mi(Lt,c,t))}else{var Ki=void 0;if(!x.isLinear&&x.type!=="timeCat"){for(var an=0;an<o.length;an++){var mi=o[an],Yn=mi[y];if(ki(Yn[nt],kr,x))if(Ai)Object(a.isArray)(Lt)||(Lt=[]),Lt.push(mi);else{Lt=mi;break}else x.translate(Yn[nt])<=kr&&(cr=mi,Ki=o[an+1])}Object(a.isArray)(Lt)&&(Lt=Mi(Lt,c,t))}else{if((kr>x.translate(Ri)||kr<x.translate(zr))&&(kr>x.max||kr<x.min))return null;for(var vo=0,po=o.length-1,yo=void 0;vo<=po;){yo=Math.floor((vo+po)/2);var wo=o[yo][y][nt];if(ki(wo,kr,x))return o[yo];x.translate(wo)<=x.translate(kr)?(vo=yo+1,cr=o[yo],Ki=o[yo+1]):(po===0&&(cr=o[0]),po=yo-1)}}cr&&Ki&&Math.abs(x.translate(cr[y][nt])-kr)>Math.abs(x.translate(Ki[y][nt])-kr)&&(cr=Ki)}var Q=hu(t.getXScale());return!Lt&&Math.abs(x.translate(cr[y][nt])-kr)<=Q/2&&(Lt=cr),Lt}function ia(c,o,t,i){t===void 0&&(t=""),i===void 0&&(i=!1);var x=c[y],R=ui(x,o,t),nt=o.tooltipOption,Mt=o.theme.defaultColor,Lt=[],ne,ge;function be(Ri,Ai){if(i||!Object(a.isNil)(Ai)&&Ai!==""){var mi={title:R,data:x,mappingData:c,name:Ri,value:Ai,color:c.color||Mt,marker:!0};Lt.push(mi)}}if(Object(a.isObject)(nt)){var Ae=nt.fields,We=nt.callback;if(We){var an=Ae.map(function(Ri){return c[y][Ri]}),gn=We.apply(void 0,an),Yn=Object(rt.a)({data:c[y],mappingData:c,title:R,color:c.color||Mt,marker:!0},gn);Lt.push(Yn)}else for(var Hn=o.scales,ir=0,cr=Ae;ir<cr.length;ir++){var kr=cr[ir];if(!Object(a.isNil)(x[kr])){var zr=Hn[kr];ne=xr(zr),ge=zr.getText(x[kr]),be(ne,ge)}}}else{var Ur=eo(o);ge=vu(x,Ur),ne=na(x,o),be(ne,ge)}return Lt}function tc(c){return!Object(a.isNumber)(c)&&!Object(a.isArray)(c)}function ya(c){c===void 0&&(c=0);var o=Object(a.isArray)(c)?c:[c];switch(o.length){case 0:o=[0,0,0,0];break;case 1:o=new Array(4).fill(o[0]);break;case 2:o=Object(rt.d)(o,o);break;case 3:o=Object(rt.d)(o,[o[1]]);break;default:o=o.slice(0,4);break}return o}var _r={};function yr(c,o){_r[c]=o}function Xc(c){delete _r[c]}function pu(){return Object.keys(_r)}function ds(c){return _r[c]}var ec=function(){function c(o){this.option=this.wrapperOption(o)}return c.prototype.update=function(o){return this.option=this.wrapperOption(o),this},c.prototype.hasAction=function(o){var t=this.option.actions;return Object(a.some)(t,function(i){return i[0]===o})},c.prototype.create=function(o,t){var i=this.option,x=i.type,R=i.cfg,nt=x==="theta",Mt=Object(rt.a)({start:o,end:t},R),Lt=$r(nt?"polar":x);return this.coordinate=new Lt(Mt),this.coordinate.type=x,nt&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},c.prototype.adjust=function(o,t){return this.coordinate.update({start:o,end:t}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},c.prototype.rotate=function(o){return this.option.actions.push(["rotate",o]),this},c.prototype.reflect=function(o){return this.option.actions.push(["reflect",o]),this},c.prototype.scale=function(o,t){return this.option.actions.push(["scale",o,t]),this},c.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},c.prototype.getOption=function(){return this.option},c.prototype.getCoordinate=function(){return this.coordinate},c.prototype.wrapperOption=function(o){return Object(rt.a)({type:"rect",actions:[],cfg:{}},o)},c.prototype.execActions=function(o){var t=this,i=this.option.actions;Object(a.each)(i,function(x){var R,nt=x[0],Mt=x.slice(1),Lt=Object(a.isNil)(o)?!0:o.includes(nt);Lt&&(R=t.coordinate)[nt].apply(R,Mt)})},c}(),Qo=ec,nc=function(){function c(o,t,i){this.view=o,this.gEvent=t,this.data=i,this.type=t.type}return c.fromData=function(o,t,i){return new c(o,new ht.Event(t,{}),i)},Object.defineProperty(c.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),c.prototype.toString=function(){return"[Event (type="+this.type+")]"},c.prototype.clone=function(){return new c(this.view,this.gEvent,this.data)},c}(),Vo=nc;function Aa(c){var o=c.getController("axis"),t=c.getController("legend"),i=c.getController("annotation"),x=c.getController("slider"),R=c.getController("scrollbar");[o,x,R,t,i].forEach(function(nt){nt&&nt.layout()})}var To=function(){function c(){this.scales=new Map,this.syncScales=new Map}return c.prototype.createScale=function(o,t,i,x){var R=i,nt=this.getScaleMeta(x);if(t.length===0&&nt){var Mt=nt.scale,Lt={type:Mt.type};Mt.isCategory&&(Lt.values=Mt.values),R=Object(a.deepMix)(Lt,nt.scaleDef,i)}var ne=Ar(o,t,R);return this.cacheScale(ne,i,x),ne},c.prototype.sync=function(o,t){var i=this;this.syncScales.forEach(function(x,R){var nt=Number.MAX_SAFE_INTEGER,Mt=Number.MIN_SAFE_INTEGER,Lt=[];Object(a.each)(x,function(ne){var ge=i.getScale(ne);Mt=Object(a.isNumber)(ge.max)?Math.max(Mt,ge.max):Mt,nt=Object(a.isNumber)(ge.min)?Math.min(nt,ge.min):nt,Object(a.each)(ge.values,function(be){Lt.includes(be)||Lt.push(be)})}),Object(a.each)(x,function(ne){var ge=i.getScale(ne);if(ge.isContinuous)ge.change({min:nt,max:Mt,values:Lt});else if(ge.isCategory){var be=ge.range,Ae=i.getScaleMeta(ne);Lt&&!Object(a.get)(Ae,["scaleDef","range"])&&(be=Er(Object(a.deepMix)({},ge,{values:Lt}),o,t)),ge.change({values:Lt,range:be})}})})},c.prototype.cacheScale=function(o,t,i){var x=this.getScaleMeta(i);x&&x.scale.type===o.type?(wr(x.scale,o),x.scaleDef=t):(x={key:i,scale:o,scaleDef:t},this.scales.set(i,x));var R=this.getSyncKey(x);if(x.syncKey=R,this.removeFromSyncScales(i),R){var nt=this.syncScales.get(R);nt||(nt=[],this.syncScales.set(R,nt)),nt.push(i)}},c.prototype.getScale=function(o){var t=this.getScaleMeta(o);if(!t){var i=Object(a.last)(o.split("-")),x=this.syncScales.get(i);x&&x.length&&(t=this.getScaleMeta(x[0]))}return t&&t.scale},c.prototype.deleteScale=function(o){var t=this.getScaleMeta(o);if(t){var i=t.syncKey,x=this.syncScales.get(i);if(x&&x.length){var R=x.indexOf(o);R!==-1&&x.splice(R,1)}}this.scales.delete(o)},c.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},c.prototype.removeFromSyncScales=function(o){var t=this;this.syncScales.forEach(function(i,x){var R=i.indexOf(o);if(R!==-1)return i.splice(R,1),i.length===0&&t.syncScales.delete(x),!1})},c.prototype.getSyncKey=function(o){var t=o.scale,i=o.scaleDef,x=t.field,R=Object(a.get)(i,["sync"]);return R===!0?x:R===!1?void 0:R},c.prototype.getScaleMeta=function(o){return this.scales.get(o)},c}(),vs=function(){function c(o,t,i,x){o===void 0&&(o=0),t===void 0&&(t=0),i===void 0&&(i=0),x===void 0&&(x=0),this.top=o,this.right=t,this.bottom=i,this.left=x}return c.instance=function(o,t,i,x){return o===void 0&&(o=0),t===void 0&&(t=0),i===void 0&&(i=0),x===void 0&&(x=0),new c(o,t,i,x)},c.prototype.max=function(o){var t=o[0],i=o[1],x=o[2],R=o[3];return this.top=Math.max(this.top,t),this.right=Math.max(this.right,i),this.bottom=Math.max(this.bottom,x),this.left=Math.max(this.left,R),this},c.prototype.shrink=function(o){var t=o[0],i=o[1],x=o[2],R=o[3];return this.top+=t,this.right+=i,this.bottom+=x,this.left+=R,this},c.prototype.inc=function(o,t){var i=o.width,x=o.height;switch(t){case e.TOP:case e.TOP_LEFT:case e.TOP_RIGHT:this.top+=x;break;case e.RIGHT:case e.RIGHT_TOP:case e.RIGHT_BOTTOM:this.right+=i;break;case e.BOTTOM:case e.BOTTOM_LEFT:case e.BOTTOM_RIGHT:this.bottom+=x;break;case e.LEFT:case e.LEFT_TOP:case e.LEFT_BOTTOM:this.left+=i;break;default:break}return this},c.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},c.prototype.clone=function(){return new(c.bind.apply(c,Object(rt.d)([void 0],this.getPadding())))},c}();function Ns(c){var o=c.padding;if(!tc(o))return new(vs.bind.apply(vs,Object(rt.d)([void 0],ya(o))));var t=c.viewBBox,i=new vs,x=[],R=[],nt=[];return Object(a.each)(c.getComponents(),function(Mt){var Lt=Mt.type;Lt===r.AXIS?x.push(Mt):[r.LEGEND,r.SLIDER,r.SCROLLBAR].includes(Lt)?R.push(Mt):Lt!==r.GRID&&Lt!==r.TOOLTIP&&nt.push(Mt)}),Object(a.each)(x,function(Mt){var Lt=Mt.component,ne=Lt.getLayoutBBox(),ge=new Qe(ne.x,ne.y,ne.width,ne.height),be=ge.exceed(t);i.max(be)}),Object(a.each)(R,function(Mt){var Lt=Mt.component,ne=Mt.direction,ge=Lt.getLayoutBBox(),be=Lt.get("padding"),Ae=new Qe(ge.x,ge.y,ge.width,ge.height).expand(be);i.inc(Ae,ne)}),Object(a.each)(nt,function(Mt){var Lt=Mt.component,ne=Mt.direction,ge=Lt.getLayoutBBox(),be=new Qe(ge.x,ge.y,ge.width,ge.height);i.inc(be,ne)}),i}function ts(c,o,t){var i=t.instance();o.forEach(function(x){x.autoPadding=i.max(x.autoPadding.getPadding())})}var Ls=function(c){Object(rt.b)(o,c);function o(t){var i=c.call(this,{visible:t.visible})||this;i.views=[],i.geometries=[],i.controllers=[],i.interactions={},i.limitInPlot=!1,i.options={data:[],animate:!0},i.usedControllers=pu(),i.scalePool=new To,i.layoutFunc=Aa,i.isPreMouseInPlot=!1,i.isDataChanged=!1,i.isCoordinateChanged=!1,i.createdScaleKeys=new Map,i.onCanvasEvent=function(cr){var kr=cr.name;if(!kr.includes(":")){var zr=i.createViewEvent(cr);i.doPlotEvent(zr),i.emit(kr,zr)}},i.onDelegateEvents=function(cr){var kr=cr.name;if(!!kr.includes(":")){var zr=i.createViewEvent(cr);i.emit(kr,zr)}};var x=t.id,R=x===void 0?Object(a.uniqueId)("view"):x,nt=t.parent,Mt=t.canvas,Lt=t.backgroundGroup,ne=t.middleGroup,ge=t.foregroundGroup,be=t.region,Ae=be===void 0?{start:{x:0,y:0},end:{x:1,y:1}}:be,We=t.padding,an=t.appendPadding,gn=t.theme,Yn=t.options,Hn=t.limitInPlot,ir=t.syncViewPadding;return i.parent=nt,i.canvas=Mt,i.backgroundGroup=Lt,i.middleGroup=ne,i.foregroundGroup=ge,i.region=Ae,i.padding=We,i.appendPadding=an,i.options=Object(rt.a)(Object(rt.a)({},i.options),Yn),i.limitInPlot=Hn,i.id=R,i.syncViewPadding=ir,i.themeObject=Object(a.isObject)(gn)?Object(a.deepMix)({},xi("default"),ua(gn)):xi(gn),i.init(),i}return o.prototype.setLayout=function(t){this.layoutFunc=t},o.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},o.prototype.render=function(t){t===void 0&&(t=!1),this.emit(b.BEFORE_RENDER),this.paint(t),this.emit(b.AFTER_RENDER),this.visible===!1&&this.changeVisible(!1)},o.prototype.clear=function(){var t=this;this.emit(b.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var i=this.geometries,x=0;x<i.length;x++)i[x].clear(),i[x].container.remove(!0);this.geometries=[];for(var R=this.controllers,x=0;x<R.length;x++)R[x].name==="annotation"?R[x].clear(!0):R[x].clear();this.createdScaleKeys.forEach(function(Mt,Lt){t.getRootView().scalePool.deleteScale(Lt)}),this.createdScaleKeys.clear();for(var nt=this.views,x=0;x<nt.length;x++)nt[x].clear();this.emit(b.AFTER_CLEAR)},o.prototype.destroy=function(){this.emit(b.BEFORE_DESTROY);var t=this.interactions;Object(a.each)(t,function(Mt){Mt&&Mt.destroy()}),this.clear();for(var i=this.controllers,x=0,R=i.length;x<R;x++){var nt=i[x];nt.destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),c.prototype.destroy.call(this)},o.prototype.changeVisible=function(t){c.prototype.changeVisible.call(this,t);for(var i=this.geometries,x=0,R=i.length;x<R;x++){var nt=i[x];nt.changeVisible(t)}for(var Mt=this.controllers,x=0,R=Mt.length;x<R;x++){var Lt=Mt[x];Lt.changeVisible(t)}return this.foregroundGroup.set("visible",t),this.middleGroup.set("visible",t),this.backgroundGroup.set("visible",t),this.getCanvas().draw(),this},o.prototype.data=function(t){return Object(a.set)(this.options,"data",t),this.isDataChanged=!0,this},o.prototype.source=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(t)},o.prototype.filter=function(t,i){return Object(a.isFunction)(i)?(Object(a.set)(this.options,["filters",t],i),this):(!i&&Object(a.get)(this.options,["filters",t])&&delete this.options.filters[t],this)},o.prototype.axis=function(t,i){return Object(a.isBoolean)(t)?Object(a.set)(this.options,["axes"],t):Object(a.set)(this.options,["axes",t],i),this},o.prototype.legend=function(t,i){return Object(a.isBoolean)(t)?Object(a.set)(this.options,["legends"],t):Object(a.isString)(t)?Object(a.set)(this.options,["legends",t],i):Object(a.set)(this.options,["legends"],t),this},o.prototype.scale=function(t,i){var x=this;return Object(a.isString)(t)?Object(a.set)(this.options,["scales",t],i):Object(a.isObject)(t)&&Object(a.each)(t,function(R,nt){Object(a.set)(x.options,["scales",nt],R)}),this},o.prototype.tooltip=function(t){return Object(a.set)(this.options,"tooltip",t),this},o.prototype.annotation=function(){return this.getController("annotation")},o.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},o.prototype.coordinate=function(t,i){return Object(a.isString)(t)?Object(a.set)(this.options,"coordinate",{type:t,cfg:i}):Object(a.set)(this.options,"coordinate",t),this.coordinateController.update(this.options.coordinate),this.coordinateController},o.prototype.coord=function(t,i){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(t,i)},o.prototype.facet=function(t,i){this.facetInstance&&this.facetInstance.destroy();var x=G(t);if(!x)throw new Error("facet '"+t+"' is not exist!");return this.facetInstance=new x(this,Object(rt.a)(Object(rt.a)({},i),{type:t})),this},o.prototype.animate=function(t){return Object(a.set)(this.options,"animate",t),this},o.prototype.updateOptions=function(t){return this.clear(),Object(a.mix)(this.options,t),this.views.forEach(function(i){return i.destroy()}),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},o.prototype.option=function(t,i){if(o.prototype[t])throw new Error(`Can't use built in variable name "`+t+'", please change another one.');return Object(a.set)(this.options,t,i),this},o.prototype.theme=function(t){return this.themeObject=Object(a.isObject)(t)?Object(a.deepMix)({},this.themeObject,ua(t)):xi(t),this},o.prototype.interaction=function(t,i){var x=this.interactions[t];x&&x.destroy();var R=Go(t,this,i);return R&&(R.init(),this.interactions[t]=R),this},o.prototype.removeInteraction=function(t){var i=this.interactions[t];i&&(i.destroy(),this.interactions[t]=void 0)},o.prototype.changeData=function(t){this.isDataChanged=!0,this.emit(b.BEFORE_CHANGE_DATA),this.data(t),this.paint(!0);for(var i=this.views,x=0,R=i.length;x<R;x++){var nt=i[x];nt.changeData(t)}this.emit(b.AFTER_CHANGE_DATA)},o.prototype.createView=function(t){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var i={data:this.options.data,scales:Object(a.clone)(this.options.scales),axes:Object(a.clone)(this.options.axes),coordinate:Object(a.clone)(this.coordinateController.getOption()),tooltip:Object(a.clone)(this.options.tooltip),legends:Object(a.clone)(this.options.legends),animate:this.options.animate,visible:this.visible},x=new o(Object(rt.a)(Object(rt.a)({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:p.BG}),middleGroup:this.middleGroup.addGroup({zIndex:p.MID}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:p.FORE}),theme:this.themeObject,padding:this.padding},t),{options:Object(rt.a)(Object(rt.a)({},i),Object(a.get)(t,"options",{}))}));return this.views.push(x),x},o.prototype.view=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(t)},o.prototype.removeView=function(t){var i=Object(a.remove)(this.views,function(x){return x===t})[0];return i&&i.destroy(),i},o.prototype.getCoordinate=function(){return this.coordinateInstance},o.prototype.getTheme=function(){return this.themeObject},o.prototype.getXScale=function(){var t=this.geometries[0];return t?t.getXScale():null},o.prototype.getYScales=function(){var t={};return this.geometries.map(function(i){var x=i.getYScale(),R=x.field;if(!t[R])return t[R]=!0,x})},o.prototype.getScalesByDim=function(t){for(var i=this.geometries,x={},R=0,nt=i.length;R<nt;R++){var Mt=i[R],Lt=t==="x"?Mt.getXScale():Mt.getYScale();Lt&&!x[Lt.field]&&(x[Lt.field]=Lt)}return x},o.prototype.getScaleByField=function(t,i){var x=i||this.getScaleKey(t);return this.getRootView().scalePool.getScale(x)},o.prototype.getOptions=function(){return this.options},o.prototype.getData=function(){return this.filteredData},o.prototype.getLayer=function(t){return t===E.BG?this.backgroundGroup:t===E.MID?this.middleGroup:t===E.FORE?this.foregroundGroup:this.foregroundGroup},o.prototype.isPointInPlot=function(t){return on(this.getCoordinate(),t)},o.prototype.getLegendAttributes=function(){return Object(a.flatten)(this.geometries.map(function(t){return t.getGroupAttributes()}))},o.prototype.getGroupScales=function(){var t=this.geometries.map(function(i){return i.getGroupScales()});return Oe(Object(a.flatten)(t))},o.prototype.getCanvas=function(){return this.getRootView().canvas},o.prototype.getRootView=function(){for(var t=this;;){if(t.parent){t=t.parent;continue}break}return t},o.prototype.getXY=function(t){var i=this.getCoordinate(),x=this.getScalesByDim("x"),R=this.getScalesByDim("y"),nt,Mt;if(Object(a.each)(t,function(Lt,ne){x[ne]&&(nt=x[ne].scale(Lt)),R[ne]&&(Mt=R[ne].scale(Lt))}),!Object(a.isNil)(nt)&&!Object(a.isNil)(Mt))return i.convert({x:nt,y:Mt})},o.prototype.getController=function(t){return Object(a.find)(this.controllers,function(i){return i.name===t})},o.prototype.showTooltip=function(t){var i=this.getController("tooltip");return i&&i.showTooltip(t),this},o.prototype.hideTooltip=function(){var t=this.getController("tooltip");return t&&t.hideTooltip(),this},o.prototype.lockTooltip=function(){var t=this.getController("tooltip");return t&&t.lockTooltip(),this},o.prototype.unlockTooltip=function(){var t=this.getController("tooltip");return t&&t.unlockTooltip(),this},o.prototype.isTooltipLocked=function(){var t=this.getController("tooltip");return t&&t.isTooltipLocked()},o.prototype.getTooltipItems=function(t){var i=this.getController("tooltip");return i?i.getTooltipItems(t):[]},o.prototype.getSnapRecords=function(t){for(var i=this.geometries,x=[],R=0,nt=i.length;R<nt;R++){var Mt=i[R],Lt=Mt.dataArray;Mt.sort(Lt);for(var ne=void 0,ge=0,be=Lt.length;ge<be;ge++){var Ae=Lt[ge];ne=ra(t,Ae,Mt),ne&&x.push(ne)}}for(var We=this.views,R=0,nt=We.length;R<nt;R++){var an=We[R],gn=an.getSnapRecords(t);x=x.concat(gn)}return x},o.prototype.getComponents=function(){for(var t=[],i=this.controllers,x=0,R=i.length;x<R;x++){var nt=i[x];t=t.concat(nt.getComponents())}return t},o.prototype.filterData=function(t){var i=this.options.filters;return Object(a.size)(i)===0?t:Object(a.filter)(t,function(x,R){var nt=Object.keys(i);return nt.every(function(Mt){var Lt=i[Mt];return Lt(x[Mt],x,R)})})},o.prototype.filterFieldData=function(t,i){var x=this.options.filters,R=Object(a.get)(x,t);return Object(a.isUndefined)(R)?i:i.filter(function(nt,Mt){return R(nt[t],nt,Mt)})},o.prototype.adjustCoordinate=function(){var t=this.getCoordinate(),i=t.start,x=t.end,R=this.coordinateBBox.bl,nt=this.coordinateBBox.tr;if(Object(a.isEqual)(i,R)&&Object(a.isEqual)(x,nt)){this.isCoordinateChanged=!1;return}this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(R,nt)},o.prototype.paint=function(t){this.renderDataRecursive(t),this.syncScale(),this.emit(b.BEFORE_PAINT),this.renderPaddingRecursive(t),this.renderLayoutRecursive(t),this.renderBackgroundStyleShape(),this.renderPaintRecursive(t),this.emit(b.AFTER_PAINT),this.isDataChanged=!1},o.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var t=Object(a.get)(this.themeObject,"background");if(t){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var i=this.viewBBox,x=i.x,R=i.y,nt=i.width,Mt=i.height;this.backgroundStyleRectShape.attr({fill:t,x,y:R,width:nt,height:Mt})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},o.prototype.renderPaddingRecursive=function(t){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(t),this.autoPadding=Ns(this).shrink(ya(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate();for(var i=this.views,x=0,R=i.length;x<R;x++){var nt=i[x];nt.renderPaddingRecursive(t)}},o.prototype.renderLayoutRecursive=function(t){var i=this.syncViewPadding===!0?ts:Object(a.isFunction)(this.syncViewPadding)?this.syncViewPadding:void 0;i&&(i(this,this.views,vs),this.views.forEach(function(Lt){Lt.coordinateBBox=Lt.viewBBox.shrink(Lt.autoPadding.getPadding()),Lt.adjustCoordinate()})),this.doLayout();for(var x=this.views,R=0,nt=x.length;R<nt;R++){var Mt=x[R];Mt.renderLayoutRecursive(t)}},o.prototype.renderPaintRecursive=function(t){var i=this.middleGroup;if(this.limitInPlot){var x=vr(this.coordinateInstance),R=x.type,nt=x.attrs;i.setClip({type:R,attrs:nt})}else i.setClip(void 0);this.paintGeometries(t),this.renderComponents(t);for(var Mt=this.views,Lt=0,ne=Mt.length;Lt<ne;Lt++){var ge=Mt[Lt];ge.renderPaintRecursive(t)}},o.prototype.createScale=function(t,i,x,R){var nt=Object(a.get)(this.options.scales,[t]),Mt=Object(rt.a)(Object(rt.a)({},nt),x);return this.parent?this.parent.createScale(t,i,Mt,R):this.scalePool.createScale(t,i,Mt,R)},o.prototype.renderDataRecursive=function(t){this.doFilterData(),this.createCoordinate(),this.initGeometries(t),this.renderFacet(t);for(var i=this.views,x=0,R=i.length;x<R;x++){var nt=i[x];nt.renderDataRecursive(t)}},o.prototype.calculateViewBBox=function(){var t,i,x,R;if(this.parent){var nt=this.parent.coordinateBBox;t=nt.x,i=nt.y,x=nt.width,R=nt.height}else t=0,i=0,x=this.canvas.get("width"),R=this.canvas.get("height");var Mt=this.region,Lt=Mt.start,ne=Mt.end,ge=new Qe(t+x*Lt.x,i+R*Lt.y,x*(ne.x-Lt.x),R*(ne.y-Lt.y));(!this.viewBBox||!this.viewBBox.isEqual(ge))&&(this.viewBBox=new Qe(t+x*Lt.x,i+R*Lt.y,x*(ne.x-Lt.x),R*(ne.y-Lt.y))),this.coordinateBBox=this.viewBBox},o.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},o.prototype.initComponentController=function(){for(var t=this.usedControllers,i=0,x=t.length;i<x;i++){var R=t[i],nt=ds(R);nt&&this.controllers.push(new nt(this))}},o.prototype.createViewEvent=function(t){var i=t.shape,x=t.name,R=i?i.get("origin"):null,nt=new Vo(this,t,R);return nt.type=x,nt},o.prototype.doPlotEvent=function(t){var i=t.type,x=t.x,R=t.y,nt={x,y:R},Mt=["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"];if(Mt.includes(i)){var Lt=this.isPointInPlot(nt);if(Lt){var ne="plot:"+i;t.type=ne,this.emit(ne,t),(i==="mouseleave"||i==="touchend")&&(this.isPreMouseInPlot=!1)}i==="mousemove"||i==="touchmove"?(this.isPreMouseInPlot&&!Lt?(i==="mousemove"&&(t.type=l.MOUSE_LEAVE,this.emit(l.MOUSE_LEAVE,t)),t.type=l.LEAVE,this.emit(l.LEAVE,t)):!this.isPreMouseInPlot&&Lt&&(i==="mousemove"&&(t.type=l.MOUSE_ENTER,this.emit(l.MOUSE_ENTER,t)),t.type=l.ENTER,this.emit(l.ENTER,t)),this.isPreMouseInPlot=Lt):(i==="mouseleave"||i==="touchend")&&this.isPreMouseInPlot&&(i==="mouseleave"&&(t.type=l.MOUSE_LEAVE,this.emit(l.MOUSE_LEAVE,t)),t.type=l.LEAVE,this.emit(l.LEAVE,t),this.isPreMouseInPlot=!1)}},o.prototype.doFilterData=function(){var t=this.options.data;this.filteredData=this.filterData(t)},o.prototype.initGeometries=function(t){this.createOrUpdateScales();for(var i=this.getCoordinate(),x=Object(a.get)(this.options,"scales",{}),R=this.geometries,nt=0,Mt=R.length;nt<Mt;nt++){var Lt=R[nt];Lt.scales=this.getGeometryScales();var ne={coordinate:i,scaleDefs:x,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};t?Lt.update(ne):Lt.init(ne)}this.adjustScales()},o.prototype.createOrUpdateScales=function(){for(var t=this.getScaleFields(),i=this.getGroupedFields(),x=this.getOptions(),R=x.data,nt=x.scales,Mt=nt===void 0?{}:nt,Lt=this.filteredData,ne=0,ge=t.length;ne<ge;ne++){var be=t[ne],Ae=Mt[be],We=this.getScaleKey(be);this.createScale(be,i.includes(be)?R:Lt,Ae,We),this.createdScaleKeys.set(We,!0)}},o.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},o.prototype.getGeometryScales=function(){for(var t=this.getScaleFields(),i={},x=0;x<t.length;x++){var R=t[x];i[R]=this.getScaleByField(R)}return i},o.prototype.getScaleFields=function(){for(var t=[],i={},x=this.geometries,R=0;R<x.length;R++){var nt=x[R],Mt=nt.getScaleFields();Oe(Mt,t,i)}return t},o.prototype.getGroupedFields=function(){for(var t=[],i={},x=this.geometries,R=0;R<x.length;R++){var nt=x[R],Mt=nt.getGroupFields();Oe(Mt,t,i)}return t},o.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},o.prototype.adjustCategoryScaleRange=function(){var t=this,i=Object(rt.d)([this.getXScale()],this.getYScales()).filter(function(nt){return!!nt}),x=this.getCoordinate(),R=this.options.scales;Object(a.each)(i,function(nt){var Mt=nt.field,Lt=nt.values,ne=nt.isCategory,ge=nt.isIdentity;(ne||ge)&&Lt&&!Object(a.get)(R,[Mt,"range"])&&(nt.range=Er(nt,x,t.theme))})},o.prototype.initComponents=function(t){for(var i=this.controllers,x=0;x<i.length;x++){var R=i[x];t?R.update():(R.clear(),R.render())}},o.prototype.doLayout=function(){this.layoutFunc(this)},o.prototype.createCoordinate=function(){var t=this.coordinateBBox.bl,i=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(t,i)},o.prototype.paintGeometries=function(t){for(var i=this.options.animate,x=this.getCoordinate(),R={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},nt=this.geometries,Mt=0;Mt<nt.length;Mt++){var Lt=nt[Mt];Lt.coordinate=x,Lt.canvasRegion=R,i||Lt.animate(!1),Lt.paint(t)}},o.prototype.renderComponents=function(t){for(var i=0;i<this.getComponents().length;i++){var x=this.getComponents()[i];x.component.render()}},o.prototype.renderFacet=function(t){this.facetInstance&&(t?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},o.prototype.initOptions=function(){var t=this,i=this.options,x=i.geometries,R=x===void 0?[]:x,nt=i.interactions,Mt=nt===void 0?[]:nt,Lt=i.views,ne=Lt===void 0?[]:Lt,ge=i.annotations,be=ge===void 0?[]:ge,Ae=i.coordinate,We=i.events,an=i.facets;this.coordinateController?Ae&&this.coordinateController.update(Ae):this.coordinateController=new Qo(Ae);for(var gn=0;gn<R.length;gn++){var Yn=R[gn];this.createGeometry(Yn)}for(var Hn=0;Hn<Mt.length;Hn++){var ir=Mt[Hn],cr=ir.type,kr=ir.cfg;this.interaction(cr,kr)}for(var zr=0;zr<ne.length;zr++){var Ur=ne[zr];this.createView(Ur)}for(var Ri=this.getController("annotation"),Ai=0;Ai<be.length;Ai++){var mi=be[Ai];Ri.annotation(mi)}We&&Object(a.each)(We,function(Ki,vo){t.on(vo,Ki)}),an&&Object(a.each)(an,function(Ki){var vo=Ki.type,po=Object(rt.c)(Ki,["type"]);t.facet(vo,po)})},o.prototype.createGeometry=function(t){var i=t.type,x=t.cfg,R=x===void 0?{}:x;if(this[i]){var nt=this[i](R);Object(a.each)(t,function(Mt,Lt){Object(a.isFunction)(nt[Lt])&&nt[Lt](Mt)})}},o.prototype.getScaleKey=function(t){return this.id+"-"+t},o}(dt);function Ho(c,o){Ls.prototype[c.toLowerCase()]=function(t){t===void 0&&(t={});var i=Object(rt.a)({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},t),x=new o(i);return this.geometries.push(x),x}}var es=Ls,Bs=function(c){Object(rt.b)(o,c);function o(t){var i=this,x=t.container,R=t.width,nt=t.height,Mt=t.autoFit,Lt=Mt===void 0?!1:Mt,ne=t.padding,ge=t.appendPadding,be=t.renderer,Ae=be===void 0?"canvas":be,We=t.pixelRatio,an=t.localRefresh,gn=an===void 0?!0:an,Yn=t.visible,Hn=Yn===void 0?!0:Yn,ir=t.supportCSSTransform,cr=ir===void 0?!1:ir,kr=t.defaultInteractions,zr=kr===void 0?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text"]:kr,Ur=t.options,Ri=t.limitInPlot,Ai=t.theme,mi=t.syncViewPadding,Ki=Object(a.isString)(x)?document.getElementById(x):x,vo=Object(v.b)('<div style="position:relative;"></div>');Ki.appendChild(vo);var po=D(Ki,Lt,R,nt),yo=O(Ae),wo=new yo.Canvas(Object(rt.a)({container:vo,pixelRatio:We,localRefresh:gn,supportCSSTransform:cr},po));return i=c.call(this,{parent:null,canvas:wo,backgroundGroup:wo.addGroup({zIndex:p.BG}),middleGroup:wo.addGroup({zIndex:p.MID}),foregroundGroup:wo.addGroup({zIndex:p.FORE}),padding:ne,appendPadding:ge,visible:Hn,options:Ur,limitInPlot:Ri,theme:Ai,syncViewPadding:mi})||this,i.onResize=Object(a.debounce)(function(){i.forceFit()},300),i.ele=Ki,i.canvas=wo,i.width=po.width,i.height=po.height,i.autoFit=Lt,i.localRefresh=gn,i.renderer=Ae,i.wrapperElement=vo,i.updateCanvasStyle(),i.bindAutoFit(),i.initDefaultInteractions(zr),i}return o.prototype.initDefaultInteractions=function(t){var i=this;Object(a.each)(t,function(x){i.interaction(x)})},o.prototype.changeSize=function(t,i){return this.width===t&&this.height===i?this:(this.emit(b.BEFORE_CHANGE_SIZE),this.width=t,this.height=i,this.canvas.changeSize(t,i),this.render(!0),this.emit(b.AFTER_CHANGE_SIZE),this)},o.prototype.destroy=function(){c.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),Y(this.wrapperElement),this.wrapperElement=null},o.prototype.changeVisible=function(t){return c.prototype.changeVisible.call(this,t),this.wrapperElement.style.display=t?"":"none",this},o.prototype.forceFit=function(){if(!this.destroyed){var t=D(this.ele,!0,this.width,this.height),i=t.width,x=t.height;this.changeSize(i,x)}},o.prototype.updateCanvasStyle=function(){Object(v.e)(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},o.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},o.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},o}(es),gu=Bs,Do=function(){function c(o){this.visible=!0,this.components=[],this.view=o}return c.prototype.clear=function(o){Object(a.each)(this.components,function(t){t.component.destroy()}),this.components=[]},c.prototype.destroy=function(){this.clear()},c.prototype.getComponents=function(){return this.components},c.prototype.changeVisible=function(o){this.visible!==o&&(this.components.forEach(function(t){o?t.component.show():t.component.hide()}),this.visible=o)},c}();function ps(c){for(var o=[],t=function(R){var nt=c[R],Mt=Object(a.find)(o,function(Lt){return Lt.color===nt.color&&Lt.name===nt.name&&Lt.value===nt.value&&Lt.title===nt.title});Mt||o.push(nt)},i=0;i<c.length;i++)t(i);return o}var yu=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.isLocked=!1,t}return Object.defineProperty(o.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.isVisible=function(){var t=this.view.getOptions().tooltip;return t!==!1},o.prototype.render=function(){},o.prototype.showTooltip=function(t){if(this.point=t,!!this.isVisible()){var i=this.view,x=this.getTooltipItems(t);if(!x.length){this.hideTooltip();return}var R=this.getTitle(x),nt={x:x[0].x,y:x[0].y};i.emit("tooltip:show",Vo.fromData(i,"tooltip:show",Object(rt.a)({items:x,title:R},t)));var Mt=this.getTooltipCfg(),Lt=Mt.follow,ne=Mt.showMarkers,ge=Mt.showCrosshairs,be=Mt.showContent,Ae=Mt.marker,We=this.items,an=this.title;if(!Object(a.isEqual)(an,R)||!Object(a.isEqual)(We,x)?(i.emit("tooltip:change",Vo.fromData(i,"tooltip:change",Object(rt.a)({items:x,title:R},t))),be&&(this.tooltip||this.renderTooltip(),this.tooltip.update(Object(a.mix)({},Mt,{items:this.getItemsAfterProcess(x),title:R},Lt?t:{})),this.tooltip.show()),ne&&this.renderTooltipMarkers(x,Ae)):(this.tooltip&&Lt&&(this.tooltip.update(t),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=x,this.title=R,ge){var gn=Object(a.get)(Mt,["crosshairs","follow"],!1);this.renderCrosshairs(gn?t:nt,Mt)}}},o.prototype.hideTooltip=function(){var t=this.getTooltipCfg().follow;if(!t){this.point=null;return}var i=this.tooltipMarkersGroup;i&&i.hide();var x=this.xCrosshair,R=this.yCrosshair;x&&x.hide(),R&&R.hide();var nt=this.tooltip;nt&&nt.hide(),this.view.emit("tooltip:hide",Vo.fromData(this.view,"tooltip:hide",{})),this.point=null},o.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},o.prototype.unlockTooltip=function(){this.isLocked=!1;var t=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(t.capture)},o.prototype.isTooltipLocked=function(){return this.isLocked},o.prototype.clear=function(){var t=this,i=t.tooltip,x=t.xCrosshair,R=t.yCrosshair,nt=t.tooltipMarkersGroup;i&&(i.hide(),i.clear()),x&&x.clear(),R&&R.clear(),nt&&nt.clear(),this.reset()},o.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},o.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},o.prototype.changeVisible=function(t){if(this.visible!==t){var i=this,x=i.tooltip,R=i.tooltipMarkersGroup,nt=i.xCrosshair,Mt=i.yCrosshair;t?(x&&x.show(),R&&R.show(),nt&&nt.show(),Mt&&Mt.show()):(x&&x.hide(),R&&R.hide(),nt&&nt.hide(),Mt&&Mt.hide()),this.visible=t}},o.prototype.getTooltipItems=function(t){var i=this.findItemsFromView(this.view,t);if(i.length){i=Object(a.flatten)(i);for(var x=0,R=i;x<R.length;x++)for(var nt=R[x],Mt=0,Lt=nt;Mt<Lt.length;Mt++){var ne=Lt[Mt],ge=ne.mappingData,be=ge.x,Ae=ge.y;ne.x=Object(a.isArray)(be)?be[be.length-1]:be,ne.y=Object(a.isArray)(Ae)?Ae[Ae.length-1]:Ae}var We=this.getTooltipCfg().shared;if(We===!1&&i.length>1){for(var an=i[0],gn=Math.abs(t.y-an[0].y),Yn=0,Hn=i;Yn<Hn.length;Yn++){var ir=Hn[Yn],cr=Math.abs(t.y-ir[0].y);cr<=gn&&(an=ir,gn=cr)}i=[an]}return ps(Object(a.flatten)(i))}return[]},o.prototype.layout=function(){},o.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var t=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}})}},o.prototype.isCursorEntered=function(t){if(this.tooltip){var i=this.tooltip.getContainer(),x=this.tooltip.get("capture");if(i&&x){var R=i.getBoundingClientRect(),nt=R.x,Mt=R.y,Lt=R.width,ne=R.height;return new Qe(nt,Mt,Lt,ne).isPointIn(t)}}return!1},o.prototype.getTooltipCfg=function(){var t=this.view,i=t.getOptions().tooltip,x=this.processCustomContent(i),R=t.getTheme(),nt=Object(a.get)(R,["components","tooltip"],{}),Mt=Object(a.get)(x,"enterable",nt.enterable);return Object(a.deepMix)({},nt,x,{capture:!!(Mt||this.isLocked)})},o.prototype.processCustomContent=function(t){if(Object(a.isBoolean)(t)||!Object(a.get)(t,"customContent"))return t;var i=t.customContent,x=function(nt,Mt){var Lt=i(nt,Mt)||"";return Object(a.isString)(Lt)?'<div class="g2-tooltip">'+Lt+"</div>":Lt};return Object(rt.a)(Object(rt.a)({},t),{customContent:x})},o.prototype.getTitle=function(t){var i=t[0].title||t[0].name;return this.title=i,i},o.prototype.renderTooltip=function(){var t=this.view.getCanvas(),i={start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}},x=this.getTooltipCfg(),R=new Wi(Object(rt.a)(Object(rt.a)({parent:t.get("el").parentNode,region:i},x),{visible:!1,crosshairs:null}));R.init(),this.tooltip=R},o.prototype.renderTooltipMarkers=function(t,i){for(var x=this.getTooltipMarkersGroup(),R=0,nt=t;R<nt.length;R++){var Mt=nt[R],Lt=Mt.x,ne=Mt.y,ge=Object(rt.a)(Object(rt.a)({fill:Mt.color,symbol:"circle",shadowColor:Mt.color},i),{x:Lt,y:ne});x.addShape("marker",{attrs:ge})}},o.prototype.renderCrosshairs=function(t,i){var x=Object(a.get)(i,["crosshairs","type"],"x");x==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(t,i)):x==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(t,i)):x==="xy"&&(this.renderXCrosshairs(t,i),this.renderYCrosshairs(t,i))},o.prototype.renderXCrosshairs=function(t,i){var x=this.getViewWithGeometry(this.view).getCoordinate();if(!!on(x,t)){var R,nt;if(x.isRect)x.isTransposed?(R={x:x.start.x,y:t.y},nt={x:x.end.x,y:t.y}):(R={x:t.x,y:x.end.y},nt={x:t.x,y:x.start.y});else{var Mt=$n(x,t),Lt=x.getCenter(),ne=x.getRadius();nt=Pi(Lt.x,Lt.y,ne,Mt),R=Lt}var ge=Object(a.deepMix)({start:R,end:nt,container:this.getTooltipCrosshairsGroup()},Object(a.get)(i,"crosshairs",{}),this.getCrosshairsText("x",t,i));delete ge.type;var be=this.xCrosshair;be?be.update(ge):(be=new Qr.Crosshair.Line(ge),be.init()),be.render(),be.show(),this.xCrosshair=be}},o.prototype.renderYCrosshairs=function(t,i){var x=this.getViewWithGeometry(this.view).getCoordinate();if(!!on(x,t)){var R,nt;if(x.isRect){var Mt=void 0,Lt=void 0;x.isTransposed?(Mt={x:t.x,y:x.end.y},Lt={x:t.x,y:x.start.y}):(Mt={x:x.start.x,y:t.y},Lt={x:x.end.x,y:t.y}),R={start:Mt,end:Lt},nt="Line"}else R={center:x.getCenter(),radius:rn(x,t),startAngle:x.startAngle,endAngle:x.endAngle},nt="Circle";R=Object(a.deepMix)({container:this.getTooltipCrosshairsGroup()},R,Object(a.get)(i,"crosshairs",{}),this.getCrosshairsText("y",t,i)),delete R.type;var ne=this.yCrosshair;ne?x.isRect&&ne.get("type")==="circle"||!x.isRect&&ne.get("type")==="line"?(ne=new Qr.Crosshair[nt](R),ne.init()):ne.update(R):(ne=new Qr.Crosshair[nt](R),ne.init()),ne.render(),ne.show(),this.yCrosshair=ne}},o.prototype.getCrosshairsText=function(t,i,x){var R=Object(a.get)(x,["crosshairs","text"]),nt=Object(a.get)(x,["crosshairs","follow"]),Mt=this.items;if(R){var Lt=this.getViewWithGeometry(this.view),ne=Mt[0],ge=Lt.getXScale(),be=Lt.getYScales()[0],Ae=void 0,We=void 0;if(nt){var an=this.view.getCoordinate().invert(i);Ae=ge.invert(an.x),We=be.invert(an.y)}else Ae=ne.data[ge.field],We=ne.data[be.field];var gn=t==="x"?Ae:We;return Object(a.isFunction)(R)?R=R(t,gn,Mt,i):R.content=gn,{text:R}}},o.prototype.getGuideGroup=function(){if(!this.guideGroup){var t=this.view.foregroundGroup;this.guideGroup=t.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},o.prototype.getTooltipMarkersGroup=function(){var t=this.tooltipMarkersGroup;return t&&!t.destroyed?(t.clear(),t.show()):(t=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),t.toFront(),this.tooltipMarkersGroup=t),t},o.prototype.getTooltipCrosshairsGroup=function(){var t=this.tooltipCrosshairsGroup;return t||(t=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),t.toBack(),this.tooltipCrosshairsGroup=t),t},o.prototype.getTooltipItemsByHitShape=function(t,i,x){var R=this.getTooltipCfg().showNil,nt=[],Mt=t.container,Lt=Mt.getShape(i.x,i.y);if(Lt&&Lt.get("visible")&&Lt.get("origin")){var ne=Lt.get("origin").mappingData,ge=ia(ne,t,x,R);ge.length&&nt.push(ge)}return nt},o.prototype.getTooltipItemsByFindData=function(t,i,x){var R=this.getTooltipCfg().showNil,nt=[],Mt=t.dataArray;if(!Object(a.isEmpty)(Mt)){t.sort(Mt);for(var Lt=0,ne=Mt;Lt<ne.length;Lt++){var ge=ne[Lt],be=ra(i,ge,t);if(be){var Ae=t.getElementId(be),We=t.elementsMap[Ae];if(t.type==="heatmap"||We.visible){var an=ia(be,t,x,R);an.length&&nt.push(an)}}}}return nt},o.prototype.findItemsFromView=function(t,i){if(t.getOptions().tooltip===!1)return[];for(var x=[],R=t.geometries,nt=this.getTooltipCfg(),Mt=nt.shared,Lt=nt.title,ne=nt.reversed,ge=0,be=R;ge<be.length;ge++){var Ae=be[ge];if(Ae.visible&&Ae.tooltipOption!==!1){var We=Ae.type,an=void 0;["point","edge","polygon"].includes(We)?an=this.getTooltipItemsByHitShape(Ae,i,Lt):["area","line","path","heatmap"].includes(We)?an=this.getTooltipItemsByFindData(Ae,i,Lt):Mt!==!1?an=this.getTooltipItemsByFindData(Ae,i,Lt):an=this.getTooltipItemsByHitShape(Ae,i,Lt),an.length&&(ne&&an.reverse(),x.push(an))}}for(var gn=0,Yn=t.views;gn<Yn.length;gn++){var Hn=Yn[gn];x=x.concat(this.findItemsFromView(Hn,i))}return x},o.prototype.getViewWithGeometry=function(t){var i=this;return t.geometries.length?t:Object(a.find)(t.views,function(x){return i.getViewWithGeometry(x)})},o.prototype.getItemsAfterProcess=function(t){var i=this.getTooltipCfg().customItems,x=i||function(R){return R};return x(t)},o}(Do),Fs=yu,mr={};function Gs(c){return mr[c.toLowerCase()]}function Eo(c,o){mr[c.toLowerCase()]=o}var ma={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},mu={interval:function(o){return{enter:{animation:o.isRect?o.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:o.isPolar&&o.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},bu={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(o){var t;return o.isRect?t=o.isTransposed?"grow-in-x":"grow-in-y":(t="grow-in-xy",o.isPolar&&o.isTransposed&&(t="wave-in")),{animation:t}},schema:function(o){var t;return o.isRect?t=o.isTransposed?"grow-in-x":"grow-in-y":t="grow-in-xy",{animation:t}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function Jn(c,o){return{delay:Object(a.isFunction)(c.delay)?c.delay(o):c.delay,easing:Object(a.isFunction)(c.easing)?c.easing(o):c.easing,duration:Object(a.isFunction)(c.duration)?c.duration(o):c.duration,callback:c.callback}}function fe(c,o,t){var i=mu[c];return i&&(Object(a.isFunction)(i)&&(i=i(o)),i=Object(a.deepMix)({},ma,i),t)?i[t]:i}function Ca(c,o,t){var i=Object(a.get)(c.get("origin"),"data",y),x=o.animation,R=Jn(o,i);if(x){var nt=Gs(x);nt&&nt(c,R,t)}else c.animate(t.toAttrs,R)}function _s(c,o,t,i,x){if(bu[t]){var R=bu[t](i),nt=Gs(Object(a.get)(R,"animation",""));if(nt){var Mt=Object(rt.a)(Object(rt.a)(Object(rt.a)({},ma.appear),R),o);c.stopAnimate(),nt(c,Mt,{coordinate:i,minYPoint:x,toAttrs:null})}}}var ns="element-background",ba=function(c){Object(rt.b)(o,c);function o(t){var i=c.call(this,t)||this;i.states=[];var x=t.shapeFactory,R=t.container,nt=t.offscreenGroup,Mt=t.visible,Lt=Mt===void 0?!0:Mt;return i.shapeFactory=x,i.container=R,i.offscreenGroup=nt,i.visible=Lt,i}return o.prototype.draw=function(t,i){i===void 0&&(i=!1),this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.drawShape(t,i),this.visible===!1&&this.changeVisible(!1)},o.prototype.update=function(t){var i=this,x=i.shapeFactory,R=i.shape;if(!!R){this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.setShapeInfo(R,t);var nt=this.getOffscreenGroup(),Mt=x.drawShape(this.shapeType,t,nt);Mt.cfg.data=this.data,Mt.cfg.origin=t,Mt.cfg.element=this,this.syncShapeStyle(R,Mt,this.getStates(),this.getAnimateCfg("update"))}},o.prototype.destroy=function(){var t=this,i=t.shapeFactory,x=t.shape;if(x){var R=this.getAnimateCfg("leave");R?Ca(x,R,{coordinate:i.coordinate,toAttrs:Object(rt.a)({},x.attr())}):x.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=void 0,this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,c.prototype.destroy.call(this)},o.prototype.changeVisible=function(t){c.prototype.changeVisible.call(this,t),t?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(i){i.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(i){i.hide()}))},o.prototype.setState=function(t,i){var x=this,R=x.states,nt=x.shapeFactory,Mt=x.model,Lt=x.shape,ne=x.shapeType,ge=R.indexOf(t);if(i){if(ge>-1)return;R.push(t),(t==="active"||t==="selected")&&Lt.toFront()}else{if(ge===-1)return;R.splice(ge,1),(t==="active"||t==="selected")&&Lt.toBack()}var be=nt.drawShape(ne,Mt,this.getOffscreenGroup());R.length?this.syncShapeStyle(Lt,be,R,null):this.syncShapeStyle(Lt,be,["reset"],null),be.remove(!0);var Ae={state:t,stateStatus:i,element:this,target:this.container};this.container.emit("statechange",Ae),Object(Qr.propagationDelegate)(this.shape,"statechange",Ae)},o.prototype.clearStates=function(){var t=this,i=this.states;Object(a.each)(i,function(x){t.setState(x,!1)}),this.states=[]},o.prototype.hasState=function(t){return this.states.includes(t)},o.prototype.getStates=function(){return this.states},o.prototype.getData=function(){return this.data},o.prototype.getModel=function(){return this.model},o.prototype.getBBox=function(){var t=this,i=t.shape,x=t.labelShape,R={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return i&&(R=i.getCanvasBBox()),x&&x.forEach(function(nt){var Mt=nt.getCanvasBBox();R.x=Math.min(Mt.x,R.x),R.y=Math.min(Mt.y,R.y),R.minX=Math.min(Mt.minX,R.minX),R.minY=Math.min(Mt.minY,R.minY),R.maxX=Math.max(Mt.maxX,R.maxX),R.maxY=Math.max(Mt.maxY,R.maxY)}),R.width=R.maxX-R.minX,R.height=R.maxY-R.minY,R},o.prototype.getStatesStyle=function(){if(!this.statesStyle){var t=this,i=t.shapeType,x=t.geometry,R=t.shapeFactory,nt=x.stateOption,Mt=R.defaultShapeType,Lt=R.theme[i]||R.theme[Mt];this.statesStyle=Object(a.deepMix)({},Lt,nt)}return this.statesStyle},o.prototype.getStateStyle=function(t,i){var x=this.getStatesStyle(),R=Object(a.get)(x,[t,"style"],{}),nt=R[i]||R;return Object(a.isFunction)(nt)?nt(this):nt},o.prototype.getAnimateCfg=function(t){var i=this,x=this.animate;if(x){var R=x[t];return R&&Object(rt.a)(Object(rt.a)({},R),{callback:function(){var Mt;Object(a.isFunction)(R.callback)&&R.callback(),(Mt=i.geometry)===null||Mt===void 0||Mt.emit(S.AFTER_DRAW_ANIMATE)}})}return null},o.prototype.drawShape=function(t,i){var x;i===void 0&&(i=!1);var R=this,nt=R.shapeFactory,Mt=R.container,Lt=R.shapeType;if(this.shape=nt.drawShape(Lt,t,Mt),this.shape){this.setShapeInfo(this.shape,t);var ne=this.shape.cfg.name;ne?Object(a.isString)(ne)&&(this.shape.cfg.name=["element",ne]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var ge=i?"enter":"appear",be=this.getAnimateCfg(ge);be&&((x=this.geometry)===null||x===void 0||x.emit(S.BEFORE_DRAW_ANIMATE),Ca(this.shape,be,{coordinate:nt.coordinate,toAttrs:Object(rt.a)({},this.shape.attr())}))}},o.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},o.prototype.setShapeInfo=function(t,i){var x=this;if(t.cfg.origin=i,t.cfg.element=this,t.isGroup()){var R=t.get("children");R.forEach(function(nt){x.setShapeInfo(nt,i)})}},o.prototype.syncShapeStyle=function(t,i,x,R,nt){var Mt=this,Lt;if(x===void 0&&(x=[]),nt===void 0&&(nt=0),!(!t||!i)){var ne=t.get("clipShape"),ge=i.get("clipShape");if(this.syncShapeStyle(ne,ge,x,R),t.isGroup())for(var be=t.get("children"),Ae=i.get("children"),We=0;We<be.length;We++)this.syncShapeStyle(be[We],Ae[We],x,R,nt+We);else{if(!Object(a.isEmpty)(x)&&!Object(a.isEqual)(x,["reset"])){var an=t.get("name");Object(a.isArray)(an)&&(an=an[1]),Object(a.each)(x,function(Yn){if(i.get("name")!==ns){var Hn=Mt.getStateStyle(Yn,an||nt);i.attr(Hn)}})}var gn=xo(t,i);this.animate?R?((Lt=this.geometry)===null||Lt===void 0||Lt.emit(S.BEFORE_DRAW_ANIMATE),Ca(t,R,{coordinate:this.shapeFactory.coordinate,toAttrs:gn,shapeModel:this.model})):Object(a.isEmpty)(x)?(t.stopAnimate(),t.animate(gn,{duration:300})):t.attr(gn):t.attr(gn)}}},o.prototype.getShapeType=function(t){var i=Object(a.get)(t,"shape");return Object(a.isArray)(i)?i[0]:i},o}(dt),ca=ba,gs={},Fa={};function ys(c){return gs[c.toLowerCase()]}function jn(c,o){gs[c.toLowerCase()]=o}function Us(c){return Fa[c.toLowerCase()]}function Wo(c,o){Fa[c.toLowerCase()]=o}var rc={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(o,t){var i=this.getShape(o);return i.getPoints?i.getPoints(t):this.getDefaultPoints(t)},getShape:function(o){var t=this[o]||this[this.defaultShapeType];return t.coordinate=this.coordinate,t},getDefaultPoints:function(){return[]},getDefaultStyle:function(o){return Object(a.get)(o,[this.defaultShapeType,"default","style"],{})},getMarker:function(o,t){var i=this.getShape(o);if(!i.getMarker){var x=this.defaultShapeType;i=this.getShape(x)}var R=this.theme,nt=Object(a.get)(R,[o,"default"],{}),Mt=i.getMarker(t);return Object(a.deepMix)({},nt,Mt)},drawShape:function(o,t,i){var x=this.getShape(o);return x.draw(t,i)}},ic={coordinate:null,parsePath:function(o){var t=this.coordinate,i=Object(N.c)(o);return t.isPolar?i=Te(t,i):i=Ze(t,i),i},parsePoint:function(o){var t=this.coordinate;return t.convert(o)},parsePoints:function(o){var t=this.coordinate;return o.map(function(i){return t.convert(i)})},draw:function(o,t){}},ms={};function oa(c,o){var t=Object(a.upperFirst)(c),i=Object(rt.a)(Object(rt.a)(Object(rt.a)({},rc),o),{geometryType:c});return ms[t]=i,i}function fo(c,o,t){var i=Object(a.upperFirst)(c),x=ms[i],R=Object(rt.a)(Object(rt.a)({},ic),t);return x[o]=R,R}function bs(c){var o=Object(a.upperFirst)(c);return ms[o]}function zs(c,o,t){if(t===void 0&&(t={}),!o)return[c];var i=Object(a.groupToMap)(c,o),x=[];if(o.length===1&&t[o[0]])for(var R=t[o[0]],nt=0,Mt=R;nt<Mt.length;nt++){var Lt=Mt[nt],ne=i["_"+Lt];ne&&x.push(ne)}else for(var ge in i)if(i.hasOwnProperty(ge)){var be=i[ge];x.push(be)}return x}function Ga(c,o){return Object(a.some)(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],function(t){return!Object(a.isEqual)(c[t],o[t])})}function _a(c){return Object(a.isArray)(c)?c:c.split("*")}function xu(c,o){var t=[];return Object(a.each)(o,function(i,x){var R=x.split(" ")[0];R===c&&t.push(i)}),t}var Ou=function(c){Object(rt.b)(o,c);function o(t){var i=c.call(this,t)||this;i.type="base",i.attributes={},i.elements=[],i.elementsMap={},i.animateOption=!0,i.attributeOption={},i.lastElementsMap={},i.generatePoints=!1,i.beforeMappingData=null,i.adjusts={},i.idFields=[],i.hasSorted=!1,i.isCoordinateChanged=!1;var x=t.container,R=t.labelsContainer,nt=t.coordinate,Mt=t.data,Lt=t.sortable,ne=Lt===void 0?!1:Lt,ge=t.visible,be=ge===void 0?!0:ge,Ae=t.theme,We=t.scales,an=We===void 0?{}:We,gn=t.scaleDefs,Yn=gn===void 0?{}:gn,Hn=t.intervalPadding,ir=t.dodgePadding,cr=t.maxColumnWidth,kr=t.minColumnWidth,zr=t.columnWidthRatio,Ur=t.roseWidthRatio,Ri=t.multiplePieWidthRatio,Ai=t.zIndexReversed;return i.container=x,i.labelsContainer=R,i.coordinate=nt,i.data=Mt,i.sortable=ne,i.visible=be,i.userTheme=Ae,i.scales=an,i.scaleDefs=Yn,i.intervalPadding=Hn,i.dodgePadding=ir,i.maxColumnWidth=cr,i.minColumnWidth=kr,i.columnWidthRatio=zr,i.roseWidthRatio=Ur,i.multiplePieWidthRatio=Ri,i.zIndexReversed=Ai,i}return o.prototype.position=function(t){var i=t;Object(a.isPlainObject)(t)||(i={fields:_a(t)});var x=Object(a.get)(i,"fields");return x.length===1&&(x.unshift("1"),Object(a.set)(i,"fields",x)),Object(a.set)(this.attributeOption,"position",i),this},o.prototype.color=function(t,i){return this.createAttrOption("color",t,i),this},o.prototype.shape=function(t,i){return this.createAttrOption("shape",t,i),this},o.prototype.size=function(t,i){return this.createAttrOption("size",t,i),this},o.prototype.adjust=function(t){var i=t;return(Object(a.isString)(t)||Object(a.isPlainObject)(t))&&(i=[t]),Object(a.each)(i,function(x,R){Object(a.isObject)(x)||(i[R]={type:x})}),this.adjustOption=i,this},o.prototype.style=function(t,i){if(Object(a.isString)(t)){var x=_a(t);this.styleOption={fields:x,callback:i}}else{var R=t,x=R.fields,nt=R.callback,Mt=R.cfg;x||nt||Mt?this.styleOption=t:this.styleOption={cfg:t}}return this},o.prototype.tooltip=function(t,i){if(Object(a.isString)(t)){var x=_a(t);this.tooltipOption={fields:x,callback:i}}else this.tooltipOption=t;return this},o.prototype.animate=function(t){return this.animateOption=t,this},o.prototype.label=function(t,i,x){if(Object(a.isString)(t)){var R={},nt=_a(t);R.fields=nt,Object(a.isFunction)(i)?R.callback=i:Object(a.isPlainObject)(i)&&(R.cfg=i),x&&(R.cfg=x),this.labelOption=R}else this.labelOption=t;return this},o.prototype.state=function(t){return this.stateOption=t,this},o.prototype.customInfo=function(t){return this.customOption=t,this},o.prototype.init=function(t){t===void 0&&(t={}),this.setCfg(t),this.initAttributes(),this.processData(this.data),this.adjustScale()},o.prototype.update=function(t){t===void 0&&(t={});var i=t.data,x=t.isDataChanged,R=t.isCoordinateChanged,nt=this,Mt=nt.attributeOption,Lt=nt.lastAttributeOption;Object(a.isEqual)(Mt,Lt)?i&&(x||!Object(a.isEqual)(i,this.data))?(this.setCfg(t),this.initAttributes(),this.processData(i)):this.setCfg(t):this.init(t),this.adjustScale(),this.isCoordinateChanged=R},o.prototype.paint=function(t){var i=this;t===void 0&&(t=!1),this.animateOption&&(this.animateOption=Object(a.deepMix)({},fe(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elements=[],this.elementsMap={};var x=this.getOffscreenGroup();x.clear();for(var R=this.beforeMappingData,nt=this.beforeMapping(R),Mt=[],Lt=0,ne=nt.length;Lt<ne;Lt++){var ge=nt[Lt],be=this.mapping(ge);Mt.push(be),this.createElements(be,Lt,t)}if(this.canDoGroupAnimation(t)){var Ae=this.container,We=this.type,an=this.coordinate,gn=Object(a.get)(this.animateOption,"appear"),Yn=this.getYScale(),Hn=an.convert({x:0,y:Yn.scale(this.getYMinValue())});_s(Ae,gn,We,an,Hn)}this.labelOption&&this.renderLabels(Object(a.flatten)(Mt),t),this.dataArray=Mt,Object(a.each)(this.lastElementsMap,function(ir){ir.animate=i.animateOption,ir.destroy()}),this.lastElementsMap=this.elementsMap,this.lastAttributeOption=Object(rt.a)({},this.attributeOption),this.visible===!1&&this.changeVisible(!1)},o.prototype.clear=function(){var t=this,i=t.container,x=t.geometryLabel,R=t.offscreenGroup;i&&i.clear(),x&&x.clear(),R&&R.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},o.prototype.destroy=function(){this.clear();var t=this.container;t.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,c.prototype.destroy.call(this)},o.prototype.getGroupScales=function(){return this.groupScales},o.prototype.getAttribute=function(t){return this.attributes[t]},o.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},o.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},o.prototype.getGroupAttributes=function(){var t=[];return Object(a.each)(this.attributes,function(i){j.includes(i.type)&&t.push(i)}),t},o.prototype.getDefaultValue=function(t){var i,x=this.getAttribute(t);return x&&Object(a.isEmpty)(x.scales)&&(i=x.values[0]),i},o.prototype.getAttributeValues=function(t,i){for(var x=[],R=t.scales,nt=0,Mt=R.length;nt<Mt;nt++){var Lt=R[nt],ne=Lt.field;Lt.isIdentity?x.push(Lt.values):x.push(i[ne])}return t.mapping.apply(t,x)},o.prototype.getAdjust=function(t){return this.adjusts[t]},o.prototype.getShapeMarker=function(t,i){var x=this.getShapeFactory();return x.getMarker(t,i)},o.prototype.getElementsBy=function(t){return this.elements.filter(function(i){return t(i)})},o.prototype.getElementId=function(t){t=Object(a.isArray)(t)?t[0]:t;var i=t[y];if(this.idFields.length){for(var x=i[this.idFields[0]],R=1;R<this.idFields.length;R++)x+="-"+i[this.idFields[R]];return x}var nt=this.type,Mt=this.getXScale(),Lt=this.getYScale(),ne=Mt.field||"x",ge=Lt.field||"y",be=i[ge],Ae;Mt.type==="identity"?Ae=Mt.values[0]:Ae=i[ne];var We;nt==="interval"||nt==="schema"?We=""+Ae:nt==="line"||nt==="area"||nt==="path"?We=nt:We=Ae+"-"+be;for(var an=this.groupScales,R=0,gn=an.length;R<gn;R++){var Yn=an[R],Hn=Yn.field;We=We+"-"+i[Hn]}var ir=this.getAdjust("dodge");if(ir){var cr=ir.dodgeBy;cr&&(We=We+"-"+i[cr])}return this.getAdjust("jitter")&&(We=We+"-"+t.x+"-"+t.y),We},o.prototype.getScaleFields=function(){var t=[],i={},x=this,R=x.attributeOption,nt=x.labelOption,Mt=x.tooltipOption;for(var Lt in R)if(R.hasOwnProperty(Lt)){var ne=R[Lt];ne.fields?Oe(ne.fields,t,i):ne.values&&Oe(ne.values,t,i)}return nt&&nt.fields&&Oe(nt.fields,t,i),Object(a.isObject)(Mt)&&Mt.fields&&Oe(Mt.fields,t,i),t},o.prototype.changeVisible=function(t){c.prototype.changeVisible.call(this,t);for(var i=this.elements,x=0,R=i.length;x<R;x++){var nt=i[x];nt.changeVisible(t)}t?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},o.prototype.getGroupFields=function(){for(var t=[],i={},x=0,R=j.length;x<R;x++){var nt=j[x],Mt=this.attributeOption[nt];Mt&&Mt.fields&&Oe(Mt.fields,t,i)}return t},o.prototype.getXYFields=function(){var t=this.attributeOption.position.fields,i=t[0],x=t[1];return[i,x]},o.prototype.getShapes=function(){return this.elements.map(function(t){return t.shape})},o.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},o.prototype.sort=function(t){if(!this.hasSorted)for(var i=this.getXScale(),x=i.field,R=0;R<t.length;R++){var nt=t[R];nt.sort(function(Mt,Lt){return i.translate(Mt[y][x])-i.translate(Lt[y][x])})}this.hasSorted=!0},o.prototype.adjustScale=function(){var t=this.getYScale();t&&this.getAdjust("stack")&&this.updateStackRange(t,this.beforeMappingData)},o.prototype.getShapeFactory=function(){var t=this.shapeType;if(!!bs(t))return this.shapeFactory||(this.shapeFactory=Object(a.clone)(bs(t))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[t]||{},this.shapeFactory},o.prototype.createShapePointsCfg=function(t){var i=this.getXScale(),x=this.getYScale(),R=this.normalizeValues(t[i.field],i),nt;return x?nt=this.normalizeValues(t[x.field],x):nt=t.y?t.y:.1,{x:R,y:nt,y0:x?x.scale(this.getYMinValue()):void 0}},o.prototype.createElement=function(t,i){i===void 0&&(i=!1);var x=this.container,R=this.getDrawCfg(t),nt=this.getShapeFactory(),Mt=new ca({shapeFactory:nt,container:x,offscreenGroup:this.getOffscreenGroup()});return Mt.animate=this.animateOption,Mt.geometry=this,Mt.draw(R,i),Mt},o.prototype.getDrawCfg=function(t){var i=t[y],x={mappingData:t,data:i,x:t.x,y:t.y,color:t.color,size:t.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},R=t.shape;!R&&this.getShapeFactory()&&(R=this.getShapeFactory().defaultShapeType),x.shape=R;var nt=this.theme.geometries[this.shapeType];x.defaultStyle=Object(a.get)(nt,[R,"default"],{}).style,!x.defaultStyle&&this.getShapeFactory()&&(x.defaultStyle=this.getShapeFactory().getDefaultStyle(nt));var Mt=this.styleOption;return Mt&&(x.style=this.getStyleCfg(Mt,i)),this.generatePoints&&(x.points=t.points,x.nextPoints=t.nextPoints),x},o.prototype.createElements=function(t,i,x){x===void 0&&(x=!1);for(var R=this,nt=R.lastElementsMap,Mt=R.elementsMap,Lt=R.elements,ne=0,ge=t.length;ne<ge;ne++){var be=t[ne],Ae=this.getElementId(be);Mt[Ae]&&(Ae=Ae+"-"+i+"-"+ne);var We=nt[Ae];if(!We)We=this.createElement(be,x);else{var an=this.getDrawCfg(be),gn=We.getModel();(this.isCoordinateChanged||Ga(an,gn))&&(We.animate=this.animateOption,We.update(an)),delete nt[Ae]}Lt.push(We),Mt[Ae]=We}if(this.zIndexReversed){var Yn=Lt.length;Lt.forEach(function(Hn,ir){Hn.shape.setZIndex(Yn-ir)})}return Lt},o.prototype.getLabelType=function(){var t=this,i=t.labelOption,x=t.coordinate,R=t.type,nt=x.type,Mt=x.isTransposed,Lt=Object(a.get)(i,["cfg","type"]);return Lt||(nt==="polar"?Lt=Mt?"pie":"polar":nt==="theta"?Lt="pie":R==="interval"||R==="polygon"?Lt="interval":Lt="base"),Lt},o.prototype.getYMinValue=function(){var t=this.getYScale(),i=t.min,x=t.max,R;return i>=0?R=i:x<=0?R=x:R=0,R},o.prototype.createAttrOption=function(t,i,x){if(Object(a.isNil)(i)||Object(a.isObject)(i))Object(a.isObject)(i)&&Object(a.isEqual)(Object.keys(i),["values"])?Object(a.set)(this.attributeOption,t,{fields:i.values}):Object(a.set)(this.attributeOption,t,i);else{var R={};Object(a.isNumber)(i)?R.values=[i]:R.fields=_a(i),x&&(Object(a.isFunction)(x)?R.callback=x:R.values=x),Object(a.set)(this.attributeOption,t,R)}},o.prototype.initAttributes=function(){var t=this,i=this,x=i.attributes,R=i.attributeOption,nt=i.theme,Mt=i.shapeType;this.groupScales=[];var Lt={},ne=function(We){if(R.hasOwnProperty(We)){var an=R[We];if(!an)return{value:void 0};var gn=Object(rt.a)({},an),Yn=gn.callback,Hn=gn.values,ir=gn.fields,cr=ir===void 0?[]:ir,kr=cr.map(function(Ur){var Ri=t.scales[Ur];return Ri.isCategory&&!Lt[Ur]&&j.includes(We)&&(t.groupScales.push(Ri),Lt[Ur]=!0),Ri});gn.scales=kr,We!=="position"&&kr.length===1&&kr[0].type==="identity"?gn.values=kr[0].values:!Yn&&!Hn&&(We==="size"?gn.values=nt.sizes:We==="shape"?gn.values=nt.shapes[Mt]||[]:We==="color"&&(kr.length?gn.values=kr[0].values.length<=10?nt.colors10:nt.colors20:gn.values=nt.colors10));var zr=He(We);x[We]=new zr(gn)}};for(var ge in R){var be=ne(ge);if(typeof be=="object")return be.value}},o.prototype.processData=function(t){this.hasSorted=!1;for(var i=this.getAttribute("position").scales,x=i.filter(function(zr){return zr.isCategory}),R=this.groupData(t),nt=[],Mt=0,Lt=R.length;Mt<Lt;Mt++){for(var ne=R[Mt],ge=[],be=0,Ae=ne.length;be<Ae;be++){var We=ne[be],an={};for(var gn in We)an[gn]=We[gn];an[y]=We;for(var Yn=0,Hn=x;Yn<Hn.length;Yn++){var ir=Hn[Yn],cr=ir.field;an[cr]=ir.translate(an[cr])}ge.push(an)}nt.push(ge)}var kr=this.adjustData(nt);return this.beforeMappingData=kr,kr},o.prototype.adjustData=function(t){var i=this.adjustOption,x=this,R=x.intervalPadding,nt=x.dodgePadding,Mt=x.theme,Lt=this.maxColumnWidth||Mt.maxColumnWidth,ne=this.minColumnWidth||Mt.minColumnWidth,ge=this.columnWidthRatio||Mt.columnWidthRatio,be=t;if(i){var Ae=this.getXScale(),We=this.getYScale(),an=Ae.field,gn=We?We.field:null,Yn=Xn(this.coordinate),Hn=Ae.values.length,ir=this.getAttribute("size"),cr=void 0;ir&&(cr=ir.values[0]);for(var kr=0,zr=i.length;kr<zr;kr++){var Ur=i[kr],Ri=Object(rt.a)({xField:an,yField:gn,intervalPadding:R,dodgePadding:nt,xDimensionLength:Yn,groupNum:Hn,defaultSize:cr,maxColumnWidth:Lt,minColumnWidth:ne,columnWidthRatio:ge},Ur),Ai=Ur.type;if(Ai==="dodge"){var mi=[];if(Ae.isCategory||Ae.type==="identity")mi.push("x");else if(!We)mi.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");Ri.adjustNames=mi,Ri.dodgeRatio=ge}else if(Ai==="stack"){var Ki=this.coordinate;if(!We){Ri.height=Ki.getHeight();var vo=this.getDefaultValue("size")||3;Ri.size=vo}!Ki.isTransposed&&Object(a.isNil)(Ri.reverseOrder)&&(Ri.reverseOrder=!0)}var po=Object(St.getAdjust)(Ai),yo=new po(Ri);be=yo.process(be),this.adjusts[Ai]=yo}}return be},o.prototype.groupData=function(t){for(var i=this.getGroupScales(),x=this.scaleDefs,R={},nt=[],Mt=0;Mt<i.length;Mt++){var Lt=i[Mt],ne=Lt.field;nt.push(ne),Object(a.get)(x,[ne,"values"])&&(R[ne]=x[ne].values)}return zs(t,nt,R)},o.prototype.updateStackRange=function(t,i){for(var x=Object(a.flatten)(i),R=t.field,nt=t.min,Mt=t.max,Lt=0;Lt<x.length;Lt++){var ne=x[Lt],ge=Math.min.apply(null,ne[R]),be=Math.max.apply(null,ne[R]);ge<nt&&(nt=ge),be>Mt&&(Mt=be)}var Ae=this.scaleDefs,We={};nt<t.min&&!Object(a.get)(Ae,[R,"min"])&&(We.min=nt),Mt>t.max&&!Object(a.get)(Ae,[R,"max"])&&(We.max=Mt),t.change(We)},o.prototype.beforeMapping=function(t){var i=t;if(this.sortable&&this.sort(i),this.generatePoints)for(var x=0,R=i.length;x<R;x++){var nt=i[x];this.generateShapePoints(nt);var Mt=i[x+1];Mt&&(this.generateShapePoints(Mt),nt[0].nextPoints=Mt[0].points)}return i},o.prototype.generateShapePoints=function(t){for(var i=this.getShapeFactory(),x=this.getAttribute("shape"),R=0;R<t.length;R++){var nt=t[R],Mt=this.createShapePointsCfg(nt),Lt=x?this.getAttributeValues(x,nt):null,ne=i.getShapePoints(Lt,Mt);nt.points=ne}},o.prototype.normalizeValues=function(t,i){var x=[];if(Object(a.isArray)(t))for(var R=0;R<t.length;R++){var nt=t[R];x.push(i.scale(nt))}else x=i.scale(t);return x},o.prototype.mapping=function(t){for(var i=this.attributes,x=[],R=0;R<t.length;R++){var nt=t[R],Mt={_origin:nt[y],points:nt.points,nextPoints:nt.nextPoints};for(var Lt in i)if(i.hasOwnProperty(Lt)){var ne=i[Lt],ge=ne.names,be=this.getAttributeValues(ne,nt);if(ge.length>1)for(var Ae=0;Ae<be.length;Ae+=1){var We=be[Ae],an=ge[Ae];Mt[an]=Object(a.isArray)(We)&&We.length===1?We[0]:We}else Mt[ge[0]]=be.length===1?be[0]:be}this.convertPoint(Mt),x.push(Mt)}return x},o.prototype.convertPoint=function(t){var i=t.x,x=t.y,R,nt,Mt,Lt=this.coordinate;if(Object(a.isArray)(i)&&Object(a.isArray)(x)){R=[],nt=[];for(var ne=0,ge=0,be=i.length,Ae=x.length;ne<be&&ge<Ae;ne+=1,ge+=1)Mt=Lt.convert({x:i[ne],y:x[ge]}),R.push(Mt.x),nt.push(Mt.y)}else if(Object(a.isArray)(x)){nt=[];for(var We=0;We<x.length;We++){var an=x[We];Mt=Lt.convert({x:i,y:an}),R&&R!==Mt.x?(Object(a.isArray)(R)||(R=[R]),R.push(Mt.x)):R=Mt.x,nt.push(Mt.y)}}else if(Object(a.isArray)(i)){R=[];for(var We=0;We<i.length;We++){var gn=i[We];Mt=Lt.convert({x:gn,y:x}),nt&&nt!==Mt.y?(Object(a.isArray)(nt)||(nt=[nt]),nt.push(Mt.y)):nt=Mt.y,R.push(Mt.x)}}else{var Yn=Lt.convert({x:i,y:x});R=Yn.x,nt=Yn.y}t.x=R,t.y=nt},o.prototype.getStyleCfg=function(t,i){var x=t.fields,R=x===void 0?[]:x,nt=t.callback,Mt=t.cfg;if(Mt)return Mt;var Lt=R.map(function(ne){return i[ne]});return nt.apply(void 0,Lt)},o.prototype.setCfg=function(t){var i=this,x=t.coordinate,R=t.data,nt=t.theme,Mt=t.scaleDefs;x&&(this.coordinate=x),R&&(this.data=R),Mt&&(this.scaleDefs=Mt,this.idFields=[],Object(a.each)(Mt,function(Lt,ne){Lt&&Lt.key&&i.idFields.push(ne)})),nt&&(this.theme=this.userTheme?Object(a.deepMix)({},nt,this.userTheme):nt)},o.prototype.renderLabels=function(t,i){i===void 0&&(i=!1);var x=this.geometryLabel;if(!x){var R=this.getLabelType(),nt=ys(R);x=new nt(this),this.geometryLabel=x}x.render(t,i);var Mt=x.labelsRenderer.shapesMap;Object(a.each)(this.elementsMap,function(Lt,ne){var ge=xu(ne,Mt);if(ge.length){Lt.labelShape=ge;for(var be=0;be<ge.length;be++)for(var Ae=ge[be],We=Ae.getChildren(),an=0;an<We.length;an++){var gn=We[an];gn.cfg.name=["element","label"],gn.cfg.element=Lt}}})},o.prototype.canDoGroupAnimation=function(t){return!t&&this.animateOption&&(Object(a.get)(this.animateOption,"appear")===void 0||Object(a.get)(this.animateOption,"appear")&&Object(a.get)(this.animateOption,["appear","animation"])===void 0)},o}(dt),la=Ou,rs=jr.a.transform;function Ta(c,o,t){var i=rs(c.getMatrix(),[["t",o,t]]);c.setMatrix(i)}function Vs(c,o){var t=c.attr(),i=t.x,x=t.y,R=rs(c.getMatrix(),[["t",-i,-x],["r",o],["t",i,x]]);return R}function kt(c,o){var t=Vs(c,o);c.setMatrix(t)}function f(){return[1,0,0,0,1,0,0,0,1]}function u(c,o){var t=c.getBBox(),i=(t.minX+t.maxX)/2,x=(t.minY+t.maxY)/2;c.applyToMatrix([i,x,1]);var R=rs(c.getMatrix(),[["t",-i,-x],["s",o,o],["t",i,x]]);c.setMatrix(R)}function I(c){return c.find(function(o){return o.get("type")==="text"})}function W(c,o,t){t===void 0&&(t=[0,0,0,0]);var i=c.getChildren()[0];if(i){var x=i.clone();(o==null?void 0:o.rotate)&&kt(x,-o.rotate);var R=x.getCanvasBBox(),nt=R.x,Mt=R.y,Lt=R.width,ne=R.height;x.destroy();var ge=t;return Object(a.isNil)(ge)?ge=[2,2,2,2]:Object(a.isNumber)(ge)&&(ge=new Array(4).fill(ge)),{x:nt-ge[3],y:Mt-ge[0],width:Lt+ge[1]+ge[3],height:ne+ge[0]+ge[2],rotation:(o==null?void 0:o.rotate)||0}}}function ct(c,o,t){t===void 0&&(t=0);var i=Math.max(0,Math.min(c.x+c.width+t,o.x+o.width+t)-Math.max(c.x-t,o.x-t)),x=Math.max(0,Math.min(c.y+c.height+t,o.y+o.height+t)-Math.max(c.y-t,o.y-t));return i*x}function Ct(c,o){var t=c.getBBox();return Object(a.some)(o,function(i){var x=i.getBBox();return ct(t,x,2)>0})}function _t(c,o,t){var i=t.data,x=t.origin,R=t.animateCfg,nt=t.coordinate,Mt=Object(a.get)(R,"update");c.set("data",i),c.set("origin",x),c.set("animateCfg",R),c.set("coordinate",nt),c.set("visible",o.get("visible")),c.getChildren().forEach(function(Lt,ne){var ge=o.getChildByIndex(ne);if(!ge)c.removeChild(Lt),Lt.remove(!0);else{Lt.set("data",i),Lt.set("origin",x),Lt.set("animateCfg",R),Lt.set("coordinate",nt);var be=xo(Lt,ge);Mt?Ca(Lt,Mt,{toAttrs:be,coordinate:nt}):Lt.attr(be),ge.isGroup()&&_t(Lt,ge,t)}}),Object(a.each)(o.getChildren(),function(Lt,ne){ne>=c.getCount()&&(Lt.destroyed||c.add(Lt))})}var Xt=function(){function c(o){this.shapesMap={},this.lastShapesMap={};var t=o.layout,i=o.container;this.layout=t,this.container=i}return c.prototype.render=function(o,t,i){var x=this;i===void 0&&(i=!1),this.shapesMap={};var R=this.container,nt=this.createOffscreenGroup();if(o.length){for(var Mt=0,Lt=o;Mt<Lt.length;Mt++){var ne=Lt[Mt];ne&&this.renderLabel(ne,nt)}this.doLayout(o,t),this.renderLabelLine(o),this.renderLabelBackground(o),this.adjustLabel(o)}var ge=this.lastShapesMap,be=this.shapesMap;Object(a.each)(be,function(Ae,We){if(Ae.destroyed)delete be[We];else{if(ge[We]){var an=Ae.get("data"),gn=Ae.get("origin"),Yn=Ae.get("coordinate"),Hn=Ae.get("animateCfg"),ir=ge[We];_t(ir,be[We],{data:an,origin:gn,animateCfg:Hn,coordinate:Yn}),x.shapesMap[We]=ir}else{R.add(Ae);var cr=Object(a.get)(Ae.get("animateCfg"),i?"enter":"appear");cr&&Ca(Ae,cr,{toAttrs:Object(rt.a)({},Ae.attr()),coordinate:Ae.get("coordinate")})}delete ge[We]}}),Object(a.each)(ge,function(Ae){var We=Object(a.get)(Ae.get("animateCfg"),"leave");We?Ca(Ae,We,{toAttrs:null,coordinate:Ae.get("coordinate")}):Ae.remove(!0)}),this.lastShapesMap=be,nt.destroy()},c.prototype.clear=function(){this.container.clear(),this.shapesMap={},this.lastShapesMap={}},c.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null,this.lastShapesMap=null},c.prototype.renderLabel=function(o,t){var i=o.id,x=o.elementId,R=o.data,nt=o.mappingData,Mt=o.coordinate,Lt=o.animate,ne=o.content,ge={id:i,elementId:x,data:R,origin:Object(rt.a)(Object(rt.a)({},nt),{data:nt[y]}),coordinate:Mt},be=t.addGroup(Object(rt.a)({name:"label",animateCfg:this.animate===!1||Lt===null||Lt===!1?!1:Object(a.deepMix)({},this.animate,Lt)},ge)),Ae;if(ne.isGroup&&ne.isGroup()||ne.isShape&&ne.isShape()){var We=ne.getCanvasBBox(),an=We.width,gn=We.height,Yn=Object(a.get)(o,"textAlign","left"),Hn=o.x,ir=o.y-gn/2;Yn==="center"?Hn=Hn-an/2:(Yn==="right"||Yn==="end")&&(Hn=Hn-an),Ta(ne,Hn,ir),Ae=ne,be.add(ne)}else{var cr=Object(a.get)(o,["style","fill"]);Ae=be.addShape("text",Object(rt.a)({attrs:Object(rt.a)(Object(rt.a)({x:o.x,y:o.y,textAlign:o.textAlign,textBaseline:Object(a.get)(o,"textBaseline","middle"),text:o.content},o.style),{fill:Object(a.isNull)(cr)?o.color:cr})},ge))}o.rotate&&kt(Ae,o.rotate),this.shapesMap[i]=be},c.prototype.doLayout=function(o,t){var i=this;if(this.layout){var x=Object(a.isArray)(this.layout)?this.layout:[this.layout];Object(a.each)(x,function(R){var nt=Us(Object(a.get)(R,"type",""));if(nt){var Mt=[],Lt=[];Object(a.each)(i.shapesMap,function(ne,ge){Mt.push(ne),Lt.push(t[ne.get("elementId")])}),nt(o,Mt,Lt,i.region,R.cfg)}})}},c.prototype.renderLabelLine=function(o){var t=this;Object(a.each)(o,function(i){var x=Object(a.get)(i,"coordinate");if(!(!i||!x)){var R=x.getCenter(),nt=x.getRadius();if(!!i.labelLine){var Mt=Object(a.get)(i,"labelLine",{}),Lt=i.id,ne=Mt.path;if(!ne){var ge=Pi(R.x,R.y,nt,i.angle);ne=[["M",ge.x,ge.y],["L",i.x,i.y]]}var be=t.shapesMap[Lt];be.destroyed||be.addShape("path",{capture:!1,attrs:Object(rt.a)({path:ne,stroke:i.color?i.color:Object(a.get)(i,["style","fill"],"#000"),fill:null},Mt.style),id:Lt,origin:i.mappingData,data:i.data,coordinate:i.coordinate})}}})},c.prototype.renderLabelBackground=function(o){var t=this;Object(a.each)(o,function(i){var x=Object(a.get)(i,"coordinate"),R=Object(a.get)(i,"background");if(!(!R||!x)){var nt=i.id,Mt=t.shapesMap[nt];if(!Mt.destroyed){var Lt=Mt.getChildren()[0];if(Lt){var ne=W(Mt,i,R.padding),ge=ne.rotation,be=Object(rt.c)(ne,["rotation"]),Ae=Mt.addShape("rect",{attrs:Object(rt.a)(Object(rt.a)({},be),R.style||{}),id:nt,origin:i.mappingData,data:i.data,coordinate:i.coordinate});if(Ae.setZIndex(-1),ge){var We=Lt.getMatrix();Ae.setMatrix(We)}}}}})},c.prototype.createOffscreenGroup=function(){var o=this.container,t=o.getGroupBase(),i=new t({});return i},c.prototype.adjustLabel=function(o){var t=this;Object(a.each)(o,function(i){if(i){var x=i.id,R=t.shapesMap[x];if(!R.destroyed){var nt=R.findAll(function(Mt){return Mt.get("type")!=="path"});Object(a.each)(nt,function(Mt){Mt&&(i.offsetX&&Mt.attr("x",Mt.attr("x")+i.offsetX),i.offsetY&&Mt.attr("y",Mt.attr("y")+i.offsetY))})}}})},c}(),ee=Xt;function ae(c){var o=0;return Object(a.each)(c,function(t){o+=t}),o/c.length}var je=function(){function c(o){this.geometry=o}return c.prototype.getLabelItems=function(o){var t=this,i=[],x=this.getLabelCfgs(o);return Object(a.each)(o,function(R,nt){var Mt=x[nt];if(!Mt||Object(a.isNil)(R.x)||Object(a.isNil)(R.y)){i.push(null);return}var Lt=Object(a.isArray)(Mt.content)?Mt.content:[Mt.content];Mt.content=Lt;var ne=Lt.length;Object(a.each)(Lt,function(ge,be){if(Object(a.isNil)(ge)||ge===""){i.push(null);return}var Ae=Object(rt.a)(Object(rt.a)({},Mt),t.getLabelPoint(Mt,R,be));Ae.textAlign||(Ae.textAlign=t.getLabelAlign(Ae,be,ne)),Ae.offset<=0&&(Ae.labelLine=null),i.push(Ae)})}),i},c.prototype.render=function(o,t){t===void 0&&(t=!1);var i=this.getLabelItems(o),x=this.getLabelsRenderer(),R=this.getGeometryShapes();x.render(i,R,t)},c.prototype.clear=function(){var o=this.labelsRenderer;o&&o.clear()},c.prototype.destroy=function(){var o=this.labelsRenderer;o&&o.destroy(),this.labelsRenderer=null},c.prototype.getCoordinate=function(){return this.geometry.coordinate},c.prototype.getDefaultLabelCfg=function(o,t){var i=this.geometry,x=i.type,R=i.theme;return x==="polygon"||x==="interval"&&t==="middle"||o<0&&!["line","point","path"].includes(x)?Object(a.get)(R,"innerLabels",{}):Object(a.get)(R,"labels",{})},c.prototype.getThemedLabelCfg=function(o){var t=this.geometry,i=this.getDefaultLabelCfg(),x=t.type,R=t.theme,nt;return x==="polygon"||o.offset<0&&!["line","point","path"].includes(x)?nt=Object(a.deepMix)({},i,R.innerLabels,o):nt=Object(a.deepMix)({},i,R.labels,o),nt},c.prototype.setLabelPosition=function(o,t,i,x){},c.prototype.getLabelOffset=function(o){var t=this.getCoordinate(),i=this.getOffsetVector(o);return t.isTransposed?i[0]:i[1]},c.prototype.getLabelOffsetPoint=function(o,t,i){var x=o.offset,R=this.getCoordinate(),nt=R.isTransposed,Mt=nt?"x":"y",Lt=nt?1:-1,ne={x:0,y:0};return t>0||i===1?ne[Mt]=x*Lt:ne[Mt]=x*Lt*-1,ne},c.prototype.getLabelPoint=function(o,t,i){var x=this.getCoordinate(),R=o.content.length;function nt(Yn,Hn,ir){ir===void 0&&(ir=!1);var cr=Yn;return Object(a.isArray)(cr)&&(o.content.length===1?ir?cr=ae(cr):cr.length<=2?cr=cr[Yn.length-1]:cr=ae(cr):cr=cr[Hn]),cr}var Mt={content:o.content[i],x:0,y:0,start:{x:0,y:0},color:"#fff"},Lt=Object(a.isArray)(t.shape)?t.shape[0]:t.shape,ne=Lt==="funnel"||Lt==="pyramid";if(this.geometry.type==="polygon"){var ge=uo(t.x,t.y);Mt.x=ge[0],Mt.y=ge[1]}else this.geometry.type==="interval"&&!ne?(Mt.x=nt(t.x,i,!0),Mt.y=nt(t.y,i)):(Mt.x=nt(t.x,i),Mt.y=nt(t.y,i));if(ne){var be=Object(a.get)(t,"nextPoints"),Ae=Object(a.get)(t,"points");if(be){var We=x.convert(Ae[1]),an=x.convert(be[1]);Mt.x=(We.x+an.x)/2,Mt.y=(We.y+an.y)/2}else if(Lt==="pyramid"){var We=x.convert(Ae[1]),an=x.convert(Ae[2]);Mt.x=(We.x+an.x)/2,Mt.y=(We.y+an.y)/2}}o.position&&this.setLabelPosition(Mt,t,i,o.position);var gn=this.getLabelOffsetPoint(o,i,R);return Mt.start={x:Mt.x,y:Mt.y},Mt.x+=gn.x,Mt.y+=gn.y,Mt.color=t.color,Mt},c.prototype.getLabelAlign=function(o,t,i){var x="center",R=this.getCoordinate();if(R.isTransposed){var nt=o.offset;nt<0?x="right":nt===0?x="center":x="left",i>1&&t===0&&(x==="right"?x="left":x==="left"&&(x="right"))}return x},c.prototype.getLabelId=function(o){var t=this.geometry,i=t.type,x=t.getXScale(),R=t.getYScale(),nt=o[y],Mt=t.getElementId(o);return i==="line"||i==="area"?Mt+=" "+nt[x.field]:i==="path"&&(Mt+=" "+nt[x.field]+"-"+nt[R.field]),Mt},c.prototype.getLabelsRenderer=function(){var o=this.geometry,t=o.labelsContainer,i=o.labelOption,x=o.canvasRegion,R=o.animateOption,nt=this.geometry.coordinate,Mt=this.labelsRenderer;return Mt||(Mt=new ee({container:t,layout:Object(a.get)(i,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=Mt),Mt.region=x,Mt.animate=R?fe("label",nt):!1,Mt},c.prototype.getLabelCfgs=function(o){var t=this,i=this.geometry,x=i.labelOption,R=i.scales,nt=i.coordinate,Mt=x,Lt=Mt.fields,ne=Mt.callback,ge=Mt.cfg,be=Lt.map(function(We){return R[We]}),Ae=[];return Object(a.each)(o,function(We,an){var gn=We[y],Yn=t.getLabelText(gn,be),Hn;if(ne){var ir=Lt.map(function(Ri){return gn[Ri]});if(Hn=ne.apply(void 0,ir),Object(a.isNil)(Hn)){Ae.push(null);return}}var cr=Object(rt.a)(Object(rt.a)({id:t.getLabelId(We),elementId:t.geometry.getElementId(We),data:gn,mappingData:We,coordinate:nt},ge),Hn);Object(a.isFunction)(cr.position)&&(cr.position=cr.position(gn,We,an));var kr=t.getLabelOffset(cr.offset||0),zr=t.getDefaultLabelCfg(kr,cr.position);cr=Object(a.deepMix)({},zr,cr),cr.offset=t.getLabelOffset(cr.offset||0);var Ur=cr.content;Object(a.isFunction)(Ur)?cr.content=Ur(gn,We,an):Object(a.isUndefined)(Ur)&&(cr.content=Yn[0]),Ae.push(cr)}),Ae},c.prototype.getLabelText=function(o,t){var i=[];return Object(a.each)(t,function(x){var R=o[x.field];Object(a.isArray)(R)?R=R.map(function(nt){return x.getText(nt)}):R=x.getText(R),Object(a.isNil)(R)||R===""?i.push(null):i.push(R)}),i},c.prototype.getOffsetVector=function(o){o===void 0&&(o=0);var t=this.getCoordinate(),i=0;return Object(a.isNumber)(o)&&(i=o),t.isTransposed?t.applyMatrix(i,0):t.applyMatrix(0,i)},c.prototype.getGeometryShapes=function(){var o=this.geometry,t={};return Object(a.each)(o.elementsMap,function(i,x){t[x]=i.shape}),Object(a.each)(o.getOffscreenGroup().getChildren(),function(i){var x=o.getElementId(i.get("origin").mappingData);t[x]=i}),t},c}(),Fe=je,_e=_("B+CY");function Ke(c,o,t){if(!c)return t;var i;if(c.callback&&c.callback.length>1){var x=Array(c.callback.length-1).fill("");i=c.mapping.apply(c,Object(rt.d)([o],x)).join("")}else i=c.mapping(o).join("");return i||t}var bn={hexagon:function(o,t,i){var x=i/2*Math.sqrt(3);return[["M",o,t-i],["L",o+x,t-i/2],["L",o+x,t+i/2],["L",o,t+i],["L",o-x,t+i/2],["L",o-x,t-i/2],["Z"]]},bowtie:function(o,t,i){var x=i-1.5;return[["M",o-i,t-x],["L",o+i,t+x],["L",o+i,t-x],["L",o-i,t+x],["Z"]]},cross:function(o,t,i){return[["M",o-i,t-i],["L",o+i,t+i],["M",o+i,t-i],["L",o-i,t+i]]},tick:function(o,t,i){return[["M",o-i/2,t-i],["L",o+i/2,t-i],["M",o,t-i],["L",o,t+i],["M",o-i/2,t+i],["L",o+i/2,t+i]]},plus:function(o,t,i){return[["M",o-i,t],["L",o+i,t],["M",o,t-i],["L",o,t+i]]},hyphen:function(o,t,i){return[["M",o-i,t],["L",o+i,t]]},line:function(o,t,i){return[["M",o,t-i],["L",o,t+i]]}},wn=["line","cross","tick","plus","hyphen"];function Nn(c,o){var t=c.symbol;Object(a.isString)(t)&&wn.indexOf(t)!==-1&&(c.style=Object(a.deepMix)({},c.style,{lineWidth:1,stroke:o,fill:null}))}function Bn(c){var o=c.symbol;Object(a.isString)(o)&&bn[o]&&(c.symbol=bn[o])}function Gn(c){return c.startsWith(e.LEFT)||c.startsWith(e.RIGHT)?"vertical":"horizontal"}function sr(c,o,t,i,x){var R=t.getScale(t.type);if(R.isCategory){var nt=R.field,Mt=o.getAttribute("color"),Lt=o.getAttribute("shape"),ne=c.getTheme().defaultColor,ge=o.coordinate.isPolar;return R.getTicks().map(function(be){var Ae,We=be.text,an=be.value,gn=We,Yn=R.invert(an),Hn=c.filterFieldData(nt,[(Ae={},Ae[nt]=Yn,Ae)]).length===0;Object(a.each)(c.views,function(zr){var Ur;zr.filterFieldData(nt,[(Ur={},Ur[nt]=Yn,Ur)]).length||(Hn=!0)});var ir=Ke(Mt,Yn,ne),cr=Ke(Lt,Yn,"point"),kr=o.getShapeMarker(cr,{color:ir,isInPolar:ge});return kr=Object(a.deepMix)({},i,kr,x),Nn(kr,ir),Bn(kr),{id:Yn,name:gn,value:Yn,marker:kr,unchecked:Hn}})}return[]}function ur(c,o,t){return t.map(function(i){var x=Object(a.deepMix)({},c,o,i.marker);return Bn(x),i.marker=x,i})}var Or="4.1.9",ei={getLegendItems:sr,translate:Ta,rotate:kt,zoom:u,transform:rs,getAngle:ao,getSectorPath:no,polarToCartesian:Pi,getDelegationObject:Zt,getTooltipItems:ia},Ci={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},Rr={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},yi=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],oo=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],so=function(o){o===void 0&&(o={});var t=o.backgroundColor,i=t===void 0?"#141414":t,x=o.paletteQualitative10,R=x===void 0?yi:x,nt=o.paletteQualitative20,Mt=nt===void 0?oo:nt,Lt=o.paletteSemanticRed,ne=Lt===void 0?"#F4664A":Lt,ge=o.paletteSemanticGreen,be=ge===void 0?"#30BF78":ge,Ae=o.paletteSemanticYellow,We=Ae===void 0?"#FAAD14":Ae,an=o.fontFamily,gn=an===void 0?`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`:an,Yn=o.brandColor,Hn=Yn===void 0?R[0]:Yn;return{backgroundColor:i,brandColor:Hn,paletteQualitative10:R,paletteQualitative20:Mt,paletteSemanticRed:ne,paletteSemanticGreen:be,paletteSemanticYellow:We,fontFamily:gn,axisLineBorderColor:Rr[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:Rr[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:Rr[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:Rr[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:Rr[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:Rr[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:Rr[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:yi[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:Rr[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],sliderRailFillColor:Rr[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:Rr[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:Ci[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:Ci[25],annotationArcBorderColor:Rr[15],annotationArcBorder:1,annotationLineBorderColor:Rr[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:Rr[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:Rr[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:Rr[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:Rr[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:Rr[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Ci[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:Rr[65],overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:Ci[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:Rr[25],pointFillColor:yi[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Ci[100],pointBorderOpacity:1,pointActiveBorderColor:Rr[100],pointSelectedBorder:2,pointSelectedBorderColor:Rr[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:yi[0],hollowPointBorderOpacity:.95,hollowPointFillColor:Ci[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:Rr[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:Rr[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:yi[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:yi[0],areaFillOpacity:.25,areaActiveFillColor:yi[0],areaActiveFillOpacity:.5,areaSelectedFillColor:yi[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:yi[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:Rr[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:Rr[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:yi[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:Rr[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:Rr[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:yi[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Ci[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:Rr[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:Rr[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}},co=so(),lo=_("U8jP"),Hi=_("v7Ed");function Io(c){return c?!1:c==null||isNaN(c)}function Ro(c){if(Object(a.isArray)(c))return Io(c[1].y);var o=c.y;return Object(a.isArray)(o)?Io(o[0]):Io(o)}function ko(c,o,t){if(o===void 0&&(o=!1),t===void 0&&(t=!0),!c.length||c.length===1&&!t)return[];if(o){for(var i=[],x=0,R=c.length;x<R;x++){var nt=c[x];Ro(nt)||i.push(nt)}return[i]}for(var Mt=[],Lt=[],x=0,R=c.length;x<R;x++){var nt=c[x];Ro(nt)?Lt.length&&(Lt.length===1&&!t||Mt.push(Lt),Lt=[]):Lt.push(nt)}return Lt.length&&Mt.push(Lt),Mt}function bo(c,o,t,i){i===void 0&&(i="");var x=c.style,R=x===void 0?{}:x,nt=c.defaultStyle,Mt=c.color,Lt=c.size,ne=Object(rt.a)(Object(rt.a)({},nt),R);return Mt&&(o&&(R.stroke||(ne.stroke=Mt)),t&&(R.fill||(ne.fill=Mt))),i&&Object(a.isNil)(R[i])&&!Object(a.isNil)(Lt)&&(ne[i]=Lt),ne}function jo(c){return Object(a.deepMix)({},{fill:"#CCD6EC",fillOpacity:.3},Object(a.get)(c,["background","style"]))}function ho(c){var o=c.x,t=Object(a.isArray)(c.y)?c.y:[c.y];return t.map(function(i,x){return{x:Object(a.isArray)(o)?o[x]:o,y:i}})}var fa={line:function(o,t,i){return[["M",o-i,t],["L",o+i,t]]},dot:function(o,t,i){return[["M",o-i,t],["L",o+i,t]]},dash:function(o,t,i){return[["M",o-i,t],["L",o+i,t]]},smooth:function(o,t,i){return[["M",o-i,t],["A",i/2,i/2,0,1,1,o,t],["A",i/2,i/2,0,1,0,o+i,t]]},hv:function(o,t,i){return[["M",o-i-1,t-2.5],["L",o,t-2.5],["L",o,t+2.5],["L",o+i+1,t+2.5]]},vh:function(o,t,i){return[["M",o-i-1,t+2.5],["L",o,t+2.5],["L",o,t-2.5],["L",o+i+1,t-2.5]]},hvh:function(o,t,i){return[["M",o-(i+1),t+2.5],["L",o-i/2,t+2.5],["L",o-i/2,t-2.5],["L",o+i/2,t-2.5],["L",o+i/2,t+2.5],["L",o+i+1,t+2.5]]},vhv:function(o,t){return[["M",o-5,t+2.5],["L",o-5,t],["L",o,t],["L",o,t-3],["L",o,t+3],["L",o+6.5,t+3]]}};function Zo(c,o){var t=c.color;return{symbol:fa[o],style:{lineWidth:2,r:6,stroke:t}}}function Hc(c,o,t){for(var i=c.isStack,x=c.connectNulls,R=c.isInCircle,nt=c.showSinglePoint,Mt=bo(c,!0,!1,"lineWidth"),Lt=ko(c.points,x,nt),ne=[],ge=0,be=Lt.length;ge<be;ge++){var Ae=Lt[ge];ne=ne.concat(Jc(Ae,R,i,o,t,Mt))}return Mt.path=ne,Mt}function Su(c,o,t,i,x){if(c.length===1)return[["M",c[0].x,c[0].y-x.lineWidth/2],["L",c[0].x,c[0].y],["L",c[0].x,c[0].y+x.lineWidth/2]];var R;return t?(o&&c.length&&c.push({x:c[0].x,y:c[0].y}),R=_n(c,!1,i)):(R=zn(c,!1),o&&R.push(["Z"])),R}function Kc(c,o,t,i,x,R){var nt=[],Mt=[];Object(a.each)(c,function(ge){var be=ho(ge);nt.push(be[1]),Mt.push(be[0])});var Lt=Su(nt,o,i,x,R),ne=Su(Mt,o,i,x,R);return t?Lt:Lt.concat(ne)}function Jc(c,o,t,i,x,R){if(c.length){var nt=c[0];return Object(a.isArray)(nt.y)?Kc(c,o,t,i,x,R):Su(c,o,i,x,R)}return[]}var Qc=oa("line",{defaultShapeType:"line"});Object(a.each)(["line","dot","dash","smooth"],function(c){fo("line",c,{draw:function(t,i){var x=c==="smooth",R;if(x){var nt=this.coordinate,Mt=nt.start,Lt=nt.end;R=[[Mt.x,Lt.y],[Lt.x,Mt.y]]}var ne=Hc(t,x,R),ge=i.addShape({type:"path",attrs:ne,name:"line",capture:!x});return ge},getMarker:function(t){return Zo(t,c)}})});var mh=Qc,Zc=function(c){Object(rt.b)(o,c);function o(t){var i=c.call(this,t)||this;i.type="path",i.shapeType="line";var x=t.connectNulls,R=x===void 0?!1:x,nt=t.showSinglePoint,Mt=nt===void 0?!0:nt;return i.connectNulls=R,i.showSinglePoint=Mt,i}return o.prototype.createElements=function(t,i,x){x===void 0&&(x=!1);var R=this,nt=R.lastElementsMap,Mt=R.elementsMap,Lt=R.elements,ne=R.container,ge=this.getElementId(t),be=this.getShapeInfo(t),Ae=nt[ge];if(Ae){var an=Ae.getModel();(this.isCoordinateChanged||Ga(an,be))&&(Ae.animate=this.animateOption,Ae.update(be)),delete nt[ge]}else{var We=this.getShapeFactory();Ae=new ca({shapeFactory:We,container:ne,offscreenGroup:this.getOffscreenGroup()}),Ae.geometry=this,Ae.animate=this.animateOption,Ae.draw(be,x)}return Lt.push(Ae),Mt[ge]=Ae,Lt},o.prototype.getPointsAndData=function(t){for(var i=[],x=[],R=0,nt=t.length;R<nt;R++){var Mt=t[R];i.push({x:Mt.x,y:Mt.y}),x.push(Mt[y])}return{points:i,data:x}},o.prototype.getShapeInfo=function(t){var i=this.getDrawCfg(t[0]),x=this.getPointsAndData(t),R=x.points,nt=x.data;return i.mappingData=t,i.data=nt,i.isStack=!!this.getAdjust("stack"),i.points=R,i.connectNulls=this.connectNulls,i.showSinglePoint=this.showSinglePoint,i},o}(la),wu=Zc;function $c(c,o,t,i,x){var R=[];if(c.length){for(var nt=[],Mt=[],Lt=0,ne=c.length;Lt<ne;Lt++){var ge=c[Lt];nt.push(ge[1]),Mt.push(ge[0])}Mt=Mt.reverse(),Object(a.each)([nt,Mt],function(be,Ae){var We=[],an=i.parsePoints(be),gn=an[0];nt.length===1&&Mt.length===1?We=Ae===0?[["M",gn.x-.5,gn.y],["L",gn.x+.5,gn.y]]:[["L",gn.x+.5,gn.y],["L",gn.x-.5,gn.y]]:(o&&an.push({x:gn.x,y:gn.y}),t?We=_n(an,!1,x):We=zn(an,!1),Ae>0&&(We[0][0]="L")),R=R.concat(We)}),R.push(["Z"])}return R}function Eu(c,o,t,i,x){for(var R=bo(c,o,!o,"lineWidth"),nt=c.connectNulls,Mt=c.isInCircle,Lt=c.points,ne=c.showSinglePoint,ge=ko(Lt,nt,ne),be=[],Ae=0,We=ge.length;Ae<We;Ae++){var an=ge[Ae];be=be.concat($c(an,Mt,t,i,x))}return R.path=be,R}function Ws(c){var o=c.start,t=c.end;return[[o.x,t.y],[t.x,o.y]]}var qc=oa("area",{defaultShapeType:"area",getDefaultPoints:function(o){var t=o.x,i=o.y0,x=Object(a.isArray)(o.y)?o.y:[i,o.y];return x.map(function(R){return{x:t,y:R}})}});fo("area","area",{draw:function(o,t){var i=Eu(o,!1,!1,this),x=t.addShape({type:"path",attrs:i,name:"area"});return x},getMarker:function(o){var t=o.color;return{symbol:function(x,R,nt){return nt===void 0&&(nt=5.5),[["M",x-nt,R-4],["L",x+nt,R-4],["L",x+nt,R+4],["L",x-nt,R+4],["Z"]]},style:{r:5,fill:t}}}});var bh=qc,tl=function(c){Object(rt.b)(o,c);function o(t){var i=c.call(this,t)||this;i.type="area",i.shapeType="area",i.generatePoints=!0,i.startOnZero=!0;var x=t.startOnZero,R=x===void 0?!0:x,nt=t.sortable,Mt=nt===void 0?!1:nt,Lt=t.showSinglePoint,ne=Lt===void 0?!1:Lt;return i.startOnZero=R,i.sortable=Mt,i.showSinglePoint=ne,i}return o.prototype.getPointsAndData=function(t){for(var i=[],x=[],R=0,nt=t.length;R<nt;R++){var Mt=t[R];i.push(Mt.points),x.push(Mt[y])}return{points:i,data:x}},o.prototype.getYMinValue=function(){if(this.startOnZero)return c.prototype.getYMinValue.call(this);var t=this.getYScale();return t.min},o}(wu),el=tl,nl=oa("edge",{defaultShapeType:"line",getDefaultPoints:function(o){return ho(o)}});fo("edge","line",{draw:function(o,t){var i=bo(o,!0,!1,"lineWidth"),x=zn(this.parsePoints(o.points),this.coordinate.isPolar);return t.addShape("path",{attrs:Object(rt.a)(Object(rt.a)({},i),{path:x})})},getMarker:function(o){return{symbol:"circle",style:{r:4.5,fill:o.color}}}});var oc=nl,rl=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.type="edge",t.shapeType="edge",t.generatePoints=!0,t}return o}(la),il=rl,ol=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.type="heatmap",t.paletteCache={},t}return o.prototype.createElements=function(t,i,x){x===void 0&&(x=!1);var R=this.prepareRange(t),nt=this.prepareSize(),Mt=Object(a.get)(this.styleOption,["style","shadowBlur"]);return Object(a.isNumber)(Mt)||(Mt=nt/2),this.prepareGreyScaleBlurredCircle(nt,Mt),this.drawWithRange(t,R,nt,Mt),null},o.prototype.clear=function(){c.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},o.prototype.prepareRange=function(t){var i=this.getAttribute("color"),x=i.getFields()[0],R=Infinity,nt=-Infinity;return t.forEach(function(Mt){var Lt=Mt[y][x];Lt>nt&&(nt=Lt),Lt<R&&(R=Lt)}),R===nt&&(R=nt-1),[R,nt]},o.prototype.prepareSize=function(){var t=this.getDefaultValue("size");return Object(a.isNumber)(t)||(t=this.getDefaultSize()),t},o.prototype.prepareGreyScaleBlurredCircle=function(t,i){var x=this.getGrayScaleBlurredCanvas(),R=t+i,nt=x.getContext("2d");x.width=x.height=R*2,nt.clearRect(0,0,x.width,x.height),nt.shadowOffsetX=nt.shadowOffsetY=R*2,nt.shadowBlur=i,nt.shadowColor="black",nt.beginPath(),nt.arc(-R,-R,t,0,Math.PI*2,!0),nt.closePath(),nt.fill()},o.prototype.drawWithRange=function(t,i,x,R){var nt=this.coordinate,Mt=nt.start,Lt=nt.end,ne=this.coordinate.getWidth(),ge=this.coordinate.getHeight(),be=this.getAttribute("color"),Ae=be.getFields()[0];this.clearShadowCanvasCtx();var We=this.getShadowCanvasCtx();i&&(t=t.filter(function(Ai){return Ai[y][Ae]<=i[1]&&Ai[y][Ae]>=i[0]}));for(var an=this.scales[Ae],gn=0,Yn=t;gn<Yn.length;gn++){var Hn=Yn[gn],ir=this.getDrawCfg(Hn),cr=ir.x,kr=ir.y,zr=an.scale(Hn[y][Ae]);this.drawGrayScaleBlurredCircle(cr-Mt.x,kr-Lt.y,x+R,zr,We)}var Ur=We.getImageData(0,0,ne,ge);this.clearShadowCanvasCtx(),this.colorize(Ur),We.putImageData(Ur,0,0);var Ri=this.getImageShape();Ri.attr("x",Mt.x),Ri.attr("y",Lt.y),Ri.attr("width",ne),Ri.attr("height",ge),Ri.attr("img",We.canvas),Ri.set("origin",this.getShapeInfo(t))},o.prototype.getDefaultSize=function(){var t=this.getAttribute("position"),i=this.coordinate;return Math.min(i.getWidth()/(t.scales[0].ticks.length*4),i.getHeight()/(t.scales[1].ticks.length*4))},o.prototype.clearShadowCanvasCtx=function(){var t=this.getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},o.prototype.getShadowCanvasCtx=function(){var t=this.shadowCanvas;return t||(t=document.createElement("canvas"),this.shadowCanvas=t),t.width=this.coordinate.getWidth(),t.height=this.coordinate.getHeight(),t.getContext("2d")},o.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},o.prototype.drawGrayScaleBlurredCircle=function(t,i,x,R,nt){var Mt=this.getGrayScaleBlurredCanvas();nt.globalAlpha=R,nt.drawImage(Mt,t-x,i-x)},o.prototype.colorize=function(t){for(var i=this.getAttribute("color"),x=t.data,R=this.paletteCache,nt=3;nt<x.length;nt+=4){var Mt=x[nt];if(Object(a.isNumber)(Mt)){var Lt=R[Mt]?R[Mt]:gt.a.rgb2arr(i.gradient(Mt/256));x[nt-3]=Lt[0],x[nt-2]=Lt[1],x[nt-1]=Lt[2],x[nt]=Mt}}},o.prototype.getImageShape=function(){var t=this.imageShape;if(t)return t;var i=this.container;return t=i.addShape({type:"image",attrs:{}}),this.imageShape=t,t},o.prototype.getShapeInfo=function(t){var i=this.getDrawCfg(t[0]);return Object(rt.a)(Object(rt.a)({},i),{mappingData:t,data:this.getData(t)})},o.prototype.getData=function(t){return t.map(function(i){return i[y]})},o}(la),al=ol;function Mu(c,o){o===void 0&&(o=!1);var t=c.x,i=c.y,x=c.y0,R=c.size,nt,Mt;Object(a.isArray)(i)?(nt=i[0],Mt=i[1]):(nt=x,Mt=i);var Lt,ne;Object(a.isArray)(t)?(Lt=t[0],ne=t[1]):(Lt=t-R/2,ne=t+R/2);var ge=[{x:Lt,y:nt},{x:Lt,y:Mt}];return o?ge.push({x:ne,y:(Mt+nt)/2}):ge.push({x:ne,y:Mt},{x:ne,y:nt}),ge}function Au(c,o){o===void 0&&(o=!0);var t=[],i=c[0];t.push(["M",i.x,i.y]);for(var x=1,R=c.length;x<R;x++)t.push(["L",c[x].x,c[x].y]);return o&&(t.push(["L",i.x,i.y]),t.push(["z"])),t}function xs(c,o){var t=0,i=0,x=0,R=0;return Object(a.isArray)(c)?c.length===1?t=i=x=R=c[0]:c.length===2?(t=x=c[0],i=R=c[1]):c.length===3?(t=c[0],i=R=c[1],x=c[2]):(t=c[0],i=c[1],x=c[2],R=c[3]):t=i=x=R=c,t+i>o&&(t=t?o/(1+i/t):0,i=o-t),x+R>o&&(x=x?o/(1+R/x):0,R=o-x),[t||0,i||0,x||0,R||0]}function ac(c,o,t){var i=[];if(t.isRect){var x=t.isTransposed?{x:t.start.x,y:o[0].y}:{x:o[0].x,y:t.start.y},R=t.isTransposed?{x:t.end.x,y:o[2].y}:{x:o[3].x,y:t.end.y},nt=Object(a.get)(c,["background","style","radius"]);if(nt){var Mt=t.isTransposed?Math.abs(o[0].y-o[2].y):o[2].x-o[1].x,Lt=t.isTransposed?t.getWidth():t.getHeight(),ne=xs(nt,Math.min(Mt,Lt)),ge=ne[0],be=ne[1],Ae=ne[2],We=ne[3];i.push(["M",x.x,R.y+ge]),ge!==0&&i.push(["A",ge,ge,0,0,1,x.x+ge,R.y]),i.push(["L",R.x-be,R.y]),be!==0&&i.push(["A",be,be,0,0,1,R.x,R.y+be]),i.push(["L",R.x,x.y-Ae]),Ae!==0&&i.push(["A",Ae,Ae,0,0,1,R.x-Ae,x.y]),i.push(["L",x.x+We,x.y]),We!==0&&i.push(["A",We,We,0,0,1,x.x,x.y-We])}else i.push(["M",x.x,x.y]),i.push(["L",R.x,x.y]),i.push(["L",R.x,R.y]),i.push(["L",x.x,R.y]),i.push(["L",x.x,x.y]);i.push(["z"])}if(t.isPolar){var an=t.getCenter(),gn=ao(c,t),Yn=gn.startAngle,Hn=gn.endAngle;if(t.type!=="theta"&&!t.isTransposed)i=no(an.x,an.y,t.getRadius(),Yn,Hn);else{var ir=function(Ur){return Math.pow(Ur,2)},ge=Math.sqrt(ir(an.x-o[0].x)+ir(an.y-o[0].y)),be=Math.sqrt(ir(an.x-o[2].x)+ir(an.y-o[2].y));i=no(an.x,an.y,ge,t.startAngle,t.endAngle,be)}}return i}function sl(c,o,t){var i=t.getWidth(),x=t.getHeight(),R=t.type==="rect",nt=[],Mt=(c[2].x-c[1].x)/2,Lt=t.isTransposed?Mt*x/i:Mt*i/x;return o==="round"?(R?(nt.push(["M",c[0].x,c[0].y+Lt]),nt.push(["L",c[1].x,c[1].y-Lt]),nt.push(["A",Mt,Mt,0,0,1,c[2].x,c[2].y-Lt]),nt.push(["L",c[3].x,c[3].y+Lt]),nt.push(["A",Mt,Mt,0,0,1,c[0].x,c[0].y+Lt])):(nt.push(["M",c[0].x,c[0].y]),nt.push(["L",c[1].x,c[1].y]),nt.push(["A",Mt,Mt,0,0,1,c[2].x,c[2].y]),nt.push(["L",c[3].x,c[3].y]),nt.push(["A",Mt,Mt,0,0,1,c[0].x,c[0].y])),nt.push(["z"])):nt=Au(c),nt}function sc(c,o,t){var i=[];return Object(a.isNil)(o)?t?i.push(["M",c[0].x,c[0].y],["L",c[1].x,c[1].y],["L",c[2].x,c[2].y],["L",c[2].x,c[2].y],["Z"]):i.push(["M",c[0].x,c[0].y],["L",c[1].x,c[1].y],["L",c[2].x,c[2].y],["L",c[3].x,c[3].y],["Z"]):i.push(["M",c[0].x,c[0].y],["L",c[1].x,c[1].y],["L",o[1].x,o[1].y],["L",o[0].x,o[0].y],["Z"]),i}function Os(c,o,t){var i,x,R,nt,Mt=c[0],Lt=c[1],ne=c[2],ge=c[3],be=[0,0,0,0],Ae=be[0],We=be[1],an=be[2],gn=be[3];Mt.y<Lt.y?(Lt=c[0],Mt=c[1],ge=c[2],ne=c[3],i=xs(t,Math.min(ge.x-Mt.x,Mt.y-Lt.y)),gn=i[0],an=i[1],We=i[2],Ae=i[3]):(x=xs(t,Math.min(ge.x-Mt.x,Mt.y-Lt.y)),Ae=x[0],We=x[1],an=x[2],gn=x[3]),o.isTransposed&&(Mt=c[0],ge=c[1],ne=c[2],Lt=c[3],c[0].x>c[1].x?(ge=c[0],Mt=c[1],Lt=c[2],ne=c[3],R=xs(t,Math.min(ge.x-Mt.x,Mt.y-Lt.y)),Ae=R[0],gn=R[1],an=R[2],We=R[3]):(nt=xs(t,Math.min(ge.x-Mt.x,Mt.y-Lt.y)),We=nt[0],an=nt[1],gn=nt[2],Ae=nt[3]));var Yn=[];return Yn.push(["M",Lt.x,Lt.y+Ae]),Ae!==0&&Yn.push(["A",Ae,Ae,0,0,1,Lt.x+Ae,Lt.y]),Yn.push(["L",ne.x-We,ne.y]),We!==0&&Yn.push(["A",We,We,0,0,1,ne.x,ne.y+We]),Yn.push(["L",ge.x,ge.y-an]),an!==0&&Yn.push(["A",an,an,0,0,1,ge.x-an,ge.y]),Yn.push(["L",Mt.x+gn,Mt.y]),gn!==0&&Yn.push(["A",gn,gn,0,0,1,Mt.x,Mt.y-gn]),Yn.push(["L",Lt.x,Lt.y+Ae]),Yn.push(["z"]),Yn}var ul=oa("interval",{defaultShapeType:"rect",getDefaultPoints:function(o){return Mu(o)}});fo("interval","rect",{draw:function(o,t){var i=bo(o,!1,!0),x=t,R=o==null?void 0:o.background;if(R){x=t.addGroup();var nt=jo(o),Mt=ac(o,this.parsePoints(o.points),this.coordinate);x.addShape("path",{attrs:Object(rt.a)(Object(rt.a)({},nt),{path:Mt}),zIndex:-1,name:ns})}var Lt;i.radius&&this.coordinate.isRect?Lt=Os(this.parsePoints(o.points),this.coordinate,i.radius):Lt=this.parsePath(sl(o.points,i.lineCap,this.coordinate));var ne=x.addShape("path",{attrs:Object(rt.a)(Object(rt.a)({},i),{path:Lt}),name:"interval"});return R?x:ne},getMarker:function(o){var t=o.color,i=o.isInPolar;return i?{symbol:"circle",style:{r:4.5,fill:t}}:{symbol:"square",style:{r:4,fill:t}}}});var xh=ul;function cl(c,o){var t=c.length,i=c;Object(a.isString)(i[0])&&(i=c.map(function(Mt){return o.translate(Mt)}));for(var x=i[1]-i[0],R=2;R<t;R++){var nt=i[R]-i[R-1];x>nt&&(x=nt)}return x}function ll(c,o){if(o){var t=Object(a.flatten)(c),i=Object(a.valuesOfKey)(t,o);return i.length}return c.length}function uc(c){var o=c.theme,t=c.coordinate,i=c.getXScale(),x=i.values,R=c.beforeMappingData,nt=x.length,Mt=Xn(c.coordinate),Lt=c.intervalPadding,ne=c.dodgePadding,ge=c.maxColumnWidth||o.maxColumnWidth,be=c.minColumnWidth||o.minColumnWidth,Ae=c.columnWidthRatio||o.columnWidthRatio,We=c.multiplePieWidthRatio||o.multiplePieWidthRatio,an=c.roseWidthRatio||o.roseWidthRatio;if(i.isLinear&&x.length>1){x.sort();var gn=cl(x,i);nt=(i.max-i.min)/gn,x.length>nt&&(nt=x.length)}var Yn=i.range,Hn=1/nt,ir=1;if(t.isPolar?t.isTransposed&&nt>1?ir=We:ir=an:(i.isLinear&&(Hn*=Yn[1]-Yn[0]),ir=Ae),!Object(a.isNil)(Lt)&&Lt>=0){var cr=Lt/Mt;Hn=(1-(nt-1)*cr)/nt}else Hn*=ir;if(c.getAdjust("dodge")){var kr=c.getAdjust("dodge"),zr=kr.dodgeBy,Ur=ll(R,zr);if(!Object(a.isNil)(ne)&&ne>=0){var Ri=ne/Mt;Hn=(Hn-Ri*(Ur-1))/Ur}else!Object(a.isNil)(Lt)&&Lt>=0&&(Hn*=ir),Hn=Hn/Ur;Hn=Hn>=0?Hn:0}if(!Object(a.isNil)(ge)&&ge>=0){var Ai=ge/Mt;Hn>Ai&&(Hn=Ai)}if(!Object(a.isNil)(be)&&be>=0){var mi=be/Mt;Hn<mi&&(Hn=mi)}return Hn}var fl=function(c){Object(rt.b)(o,c);function o(t){var i=c.call(this,t)||this;i.type="interval",i.shapeType="interval",i.generatePoints=!0;var x=t.background;return i.background=x,i}return o.prototype.createShapePointsCfg=function(t){var i=c.prototype.createShapePointsCfg.call(this,t),x,R=this.getAttribute("size");if(R){x=this.getAttributeValues(R,t)[0];var nt=this.coordinate,Mt=Xn(nt);x=x/Mt}else this.defaultSize||(this.defaultSize=uc(this)),x=this.defaultSize;return i.size=x,i},o.prototype.adjustScale=function(){c.prototype.adjustScale.call(this);var t=this.getYScale();if(this.coordinate.type==="theta")t.change({nice:!1,min:0,max:Math.max(Math.max.apply(null,t.values),t.max)});else{var i=this.scaleDefs,x=t.field,R=t.min,nt=t.max,Mt=t.type;Mt!=="time"&&(R>0&&!Object(a.get)(i,[x,"min"])&&t.change({min:0}),nt<=0&&!Object(a.get)(i,[x,"max"])&&t.change({max:0}))}},o.prototype.getDrawCfg=function(t){var i=c.prototype.getDrawCfg.call(this,t);return i.background=this.background,i},o}(la),Ss=fl,Cu=function(c){Object(rt.b)(o,c);function o(t){var i=c.call(this,t)||this;i.type="line";var x=t.sortable,R=x===void 0?!1:x;return i.sortable=R,i}return o}(wu),cc=Cu,lc=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],hl=["cross","tick","plus","hyphen","line"];function Tu(c,o,t,i,x){var R=bo(o,x,!x,"r"),nt=c.parsePoints(o.points),Mt=nt[0];if(o.isStack)Mt=nt[1];else if(nt.length>1){for(var Lt=t.addGroup(),ne=0,ge=nt;ne<ge.length;ne++){var be=ge[ne];Lt.addShape({type:"marker",attrs:Object(rt.a)(Object(rt.a)(Object(rt.a)({},R),{symbol:bn[i]||i}),be)})}return Lt}return t.addShape({type:"marker",attrs:Object(rt.a)(Object(rt.a)(Object(rt.a)({},R),{symbol:bn[i]||i}),Mt)})}var dl=oa("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(o){return ho(o)}});Object(a.each)(lc,function(c){fo("point","hollow-"+c,{draw:function(t,i){return Tu(this,t,i,c,!0)},getMarker:function(t){var i=t.color;return{symbol:bn[c]||c,style:{r:4.5,stroke:i,fill:null}}}})});var Oh=dl,vl=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.type="point",t.shapeType="point",t.generatePoints=!0,t}return o.prototype.getDrawCfg=function(t){var i=c.prototype.getDrawCfg.call(this,t);return Object(rt.a)(Object(rt.a)({},i),{isStack:!!this.getAdjust("stack")})},o}(la),pl=vl;function gl(c){for(var o=c[0],t=1,i=[["M",o.x,o.y]];t<c.length;){var x=c[t];(x.x!==c[t-1].x||x.y!==c[t-1].y)&&(i.push(["L",x.x,x.y]),x.x===o.x&&x.y===o.y&&t<c.length-1&&(o=c[t+1],i.push(["Z"]),i.push(["M",o.x,o.y]),t++)),t++}return Object(a.isEqual)(Object(a.last)(i),o)||i.push(["L",o.x,o.y]),i.push(["Z"]),i}var ws=oa("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(o){var t=[];return Object(a.each)(o.x,function(i,x){var R=o.y[x];t.push({x:i,y:R})}),t}});fo("polygon","polygon",{draw:function(o,t){if(!Object(a.isEmpty)(o.points)){var i=bo(o,!0,!0),x=this.parsePath(gl(o.points));return t.addShape("path",{attrs:Object(rt.a)(Object(rt.a)({},i),{path:x}),name:"polygon"})}},getMarker:function(o){var t=o.color;return{symbol:"square",style:{r:4,fill:t}}}});var Sh=ws,yl=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.type="polygon",t.shapeType="polygon",t.generatePoints=!0,t}return o.prototype.createShapePointsCfg=function(t){var i=c.prototype.createShapePointsCfg.call(this,t),x=i.x,R=i.y,nt;if(!(Object(a.isArray)(x)&&Object(a.isArray)(R))){var Mt=this.getXScale(),Lt=this.getYScale(),ne=Mt.values.length,ge=Lt.values.length,be=.5*1/ne,Ae=.5*1/ge;Mt.isCategory&&Lt.isCategory?(x=[x-be,x-be,x+be,x+be],R=[R-Ae,R+Ae,R+Ae,R-Ae]):Object(a.isArray)(x)?(nt=x,x=[nt[0],nt[0],nt[1],nt[1]],R=[R-Ae/2,R+Ae/2,R+Ae/2,R-Ae/2]):Object(a.isArray)(R)&&(nt=R,R=[nt[0],nt[1],nt[1],nt[0]],x=[x-be/2,x-be/2,x+be/2,x+be/2]),i.x=x,i.y=R}return i},o}(la),ml=yl,bl=oa("schema",{defaultShapeType:""}),jd=bl,xl=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.type="schema",t.shapeType="schema",t.generatePoints=!0,t}return o.prototype.createShapePointsCfg=function(t){var i=c.prototype.createShapePointsCfg.call(this,t),x,R=this.getAttribute("size");if(R){x=this.getAttributeValues(R,t)[0];var nt=this.coordinate,Mt=Xn(nt);x=x/Mt}else this.defaultSize||(this.defaultSize=uc(this)),x=this.defaultSize;return i.size=x,i},o}(la),fc=xl;fo("area","line",{draw:function(o,t){var i=Eu(o,!0,!1,this),x=t.addShape({type:"path",attrs:i,name:"area"});return x},getMarker:function(o){var t=o.color;return{symbol:function(x,R,nt){return nt===void 0&&(nt=5.5),[["M",x-nt,R-4],["L",x+nt,R-4],["L",x+nt,R+4],["L",x-nt,R+4],["Z"]]},style:{r:5,stroke:t,fill:null}}}}),fo("area","smooth",{draw:function(o,t){var i=this.coordinate,x=Eu(o,!1,!0,this,Ws(i)),R=t.addShape({type:"path",attrs:x,name:"area"});return R},getMarker:function(o){var t=o.color;return{symbol:function(x,R,nt){return nt===void 0&&(nt=5.5),[["M",x-nt,R-4],["L",x+nt,R-4],["L",x+nt,R+4],["L",x-nt,R+4],["Z"]]},style:{r:5,fill:t}}}}),fo("area","smooth-line",{draw:function(o,t){var i=this.coordinate,x=Eu(o,!0,!0,this,Ws(i)),R=t.addShape({type:"path",attrs:x,name:"area"});return R},getMarker:function(o){var t=o.color;return{symbol:function(x,R,nt){return nt===void 0&&(nt=5.5),[["M",x-nt,R-4],["L",x+nt,R-4],["L",x+nt,R+4],["L",x-nt,R+4],["Z"]]},style:{r:5,stroke:t,fill:null}}}});function hc(c,o){return["C",c.x*1/2+o.x*1/2,c.y,c.x*1/2+o.x*1/2,o.y,o.x,o.y]}function dc(c,o){var t=[];t.push({x:o.x,y:o.y}),t.push(c);var i=["Q"];return Object(a.each)(t,function(x){i.push(x.x,x.y)}),i}function Ol(c,o,t){var i=dc(o,t),x=[["M",c.x,c.y]];return x.push(i),x}function Sl(c,o){var t=dc(c[1],o),i=dc(c[3],o),x=[["M",c[0].x,c[0].y]];return x.push(i),x.push(["L",c[3].x,c[3].y]),x.push(["L",c[2].x,c[2].y]),x.push(t),x.push(["L",c[1].x,c[1].y]),x.push(["L",c[0].x,c[0].y]),x.push(["Z"]),x}fo("edge","arc",{draw:function(o,t){var i=bo(o,!0,!1,"lineWidth"),x=o.points,R=x.length>2?"weight":"normal",nt;if(o.isInCircle){var Mt={x:0,y:1};return R==="normal"?nt=Ol(x[0],x[1],Mt):(i.fill=i.stroke,nt=Sl(x,Mt)),nt=this.parsePath(nt),t.addShape("path",{attrs:Object(rt.a)(Object(rt.a)({},i),{path:nt})})}else{if(R==="normal")return x=this.parsePoints(x),nt=Mo((x[1].x+x[0].x)/2,x[0].y,Math.abs(x[1].x-x[0].x)/2,Math.PI,Math.PI*2),t.addShape("path",{attrs:Object(rt.a)(Object(rt.a)({},i),{path:nt})});var Lt=hc(x[1],x[3]),ne=hc(x[2],x[0]);return nt=[["M",x[0].x,x[0].y],["L",x[1].x,x[1].y],Lt,["L",x[3].x,x[3].y],["L",x[2].x,x[2].y],ne,["Z"]],nt=this.parsePath(nt),i.fill=i.stroke,t.addShape("path",{attrs:Object(rt.a)(Object(rt.a)({},i),{path:nt})})}},getMarker:function(o){return{symbol:"circle",style:{r:4.5,fill:o.color}}}});function wl(c,o){var t=hc(c,o),i=[["M",c.x,c.y]];return i.push(t),i}fo("edge","smooth",{draw:function(o,t){var i=bo(o,!0,!1,"lineWidth"),x=o.points,R=this.parsePath(wl(x[0],x[1]));return t.addShape("path",{attrs:Object(rt.a)(Object(rt.a)({},i),{path:R})})},getMarker:function(o){return{symbol:"circle",style:{r:4.5,fill:o.color}}}});var Ys=1/3;function El(c,o){var t=[];t.push({x:c.x,y:c.y*(1-Ys)+o.y*Ys}),t.push({x:o.x,y:c.y*(1-Ys)+o.y*Ys}),t.push(o);var i=[["M",c.x,c.y]];return Object(a.each)(t,function(x){i.push(["L",x.x,x.y])}),i}fo("edge","vhv",{draw:function(o,t){var i=bo(o,!0,!1,"lineWidth"),x=o.points,R=this.parsePath(El(x[0],x[1]));return t.addShape("path",{attrs:Object(rt.a)(Object(rt.a)({},i),{path:R})})},getMarker:function(o){return{symbol:"circle",style:{r:4.5,fill:o.color}}}}),fo("interval","funnel",{getPoints:function(o){return o.size=o.size*2,Mu(o)},draw:function(o,t){var i=bo(o,!1,!0),x=this.parsePath(sc(o.points,o.nextPoints,!1)),R=t.addShape("path",{attrs:Object(rt.a)(Object(rt.a)({},i),{path:x}),name:"interval"});return R},getMarker:function(o){var t=o.color;return{symbol:"square",style:{r:4,fill:t}}}}),fo("interval","hollow-rect",{draw:function(o,t){var i=bo(o,!0,!1),x=t,R=o==null?void 0:o.background;if(R){x=t.addGroup();var nt=jo(o),Mt=ac(o,this.parsePoints(o.points),this.coordinate);x.addShape("path",{attrs:Object(rt.a)(Object(rt.a)({},nt),{path:Mt}),zIndex:-1,name:ns})}var Lt=this.parsePath(Au(o.points)),ne=x.addShape("path",{attrs:Object(rt.a)(Object(rt.a)({},i),{path:Lt}),name:"interval"});return R?x:ne},getMarker:function(o){var t=o.color,i=o.isInPolar;return i?{symbol:"circle",style:{r:4.5,stroke:t,fill:null}}:{symbol:"square",style:{r:4,stroke:t,fill:null}}}});function Xs(c){var o=c.x,t=c.y,i=c.y0;return Object(a.isArray)(t)?t.map(function(x,R){return{x:Object(a.isArray)(o)?o[R]:o,y:x}}):[{x:o,y:i},{x:o,y:t}]}fo("interval","line",{getPoints:function(o){return Xs(o)},draw:function(o,t){var i=bo(o,!0,!1,"lineWidth"),x=te(Object(rt.a)({},i),["fill"]),R=this.parsePath(Au(o.points,!1)),nt=t.addShape("path",{attrs:Object(rt.a)(Object(rt.a)({},x),{path:R}),name:"interval"});return nt},getMarker:function(o){var t=o.color;return{symbol:function(x,R,nt){return[["M",x,R-nt],["L",x,R+nt]]},style:{r:5,stroke:t}}}}),fo("interval","pyramid",{getPoints:function(o){return o.size=o.size*2,Mu(o,!0)},draw:function(o,t){var i=bo(o,!1,!0),x=this.parsePath(sc(o.points,o.nextPoints,!0)),R=t.addShape("path",{attrs:Object(rt.a)(Object(rt.a)({},i),{path:x}),name:"interval"});return R},getMarker:function(o){var t=o.color;return{symbol:"square",style:{r:4,fill:t}}}});function Ml(c){var o=c.x,t=c.y,i=c.y0,x=c.size,R,nt;Object(a.isArray)(t)?(R=t[0],nt=t[1]):(R=i,nt=t);var Mt=o+x/2,Lt=o-x/2;return[{x:o,y:R},{x:o,y:nt},{x:Lt,y:R},{x:Mt,y:R},{x:Lt,y:nt},{x:Mt,y:nt}]}function Al(c){return[["M",c[0].x,c[0].y],["L",c[1].x,c[1].y],["M",c[2].x,c[2].y],["L",c[3].x,c[3].y],["M",c[4].x,c[4].y],["L",c[5].x,c[5].y]]}fo("interval","tick",{getPoints:function(o){return Ml(o)},draw:function(o,t){var i=bo(o,!0,!1),x=this.parsePath(Al(o.points)),R=t.addShape("path",{attrs:Object(rt.a)(Object(rt.a)({},i),{path:x}),name:"interval"});return R},getMarker:function(o){var t=o.color;return{symbol:function(x,R,nt){return[["M",x-nt/2,R-nt],["L",x+nt/2,R-nt],["M",x,R-nt],["L",x,R+nt],["M",x-nt/2,R+nt],["L",x+nt/2,R+nt]]},style:{r:5,stroke:t}}}});var Cl=function(o,t,i){var x=o.x,R=o.y,nt=t.x,Mt=t.y,Lt;switch(i){case"hv":Lt=[{x:nt,y:R}];break;case"vh":Lt=[{x,y:Mt}];break;case"hvh":var ne=(nt+x)/2;Lt=[{x:ne,y:R},{x:ne,y:Mt}];break;case"vhv":var ge=(R+Mt)/2;Lt=[{x,y:ge},{x:nt,y:ge}];break;default:break}return Lt};function wh(c,o){var t=[];return Object(a.each)(c,function(i,x){var R=c[x+1];if(t.push(i),R){var nt=Cl(i,R,o);t=t.concat(nt)}}),t}function Eh(c){return c.map(function(o,t){return t===0?["M",o.x,o.y]:["L",o.x,o.y]})}function Mh(c,o){var t=ko(c.points,c.connectNulls,c.showSinglePoint),i=[];return Object(a.each)(t,function(x){var R=wh(x,o);i=i.concat(Eh(R))}),Object(rt.a)(Object(rt.a)({},bo(c,!0,!1,"lineWidth")),{path:i})}Object(a.each)(["hv","vh","hvh","vhv"],function(c){fo("line",c,{draw:function(t,i){var x=Mh(t,c),R=i.addShape({type:"path",attrs:x,name:"line"});return R},getMarker:function(t){return Zo(t,c)}})}),Object(a.each)(hl,function(c){fo("point",c,{draw:function(t,i){return Tu(this,t,i,c,!0)},getMarker:function(t){var i=t.color;return{symbol:bn[c],style:{r:4.5,stroke:i,fill:null}}}})}),fo("point","image",{draw:function(o,t){var i=bo(o,!1,!1,"r").r,x=this.parsePoints(o.points),R=x[0];if(o.isStack)R=x[1];else if(x.length>1){for(var nt=t.addGroup(),Mt=0,Lt=x;Mt<Lt.length;Mt++){var ne=Lt[Mt];nt.addShape("image",{attrs:{x:ne.x-i/2,y:ne.y-i,width:i,height:i,img:o.shape[1]}})}return nt}return t.addShape("image",{attrs:{x:R.x-i/2,y:R.y-i,width:i,height:i,img:o.shape[1]}})},getMarker:function(o){var t=o.color;return{symbol:"circle",style:{r:4.5,fill:t}}}}),Object(a.each)(lc,function(c){fo("point",c,{draw:function(t,i){return Tu(this,t,i,c,!1)},getMarker:function(t){var i=t.color;return{symbol:bn[c]||c,style:{r:4.5,fill:i}}}})});function vc(c){var o=Object(a.isArray)(c)?c:[c],t=o[0],i=o[o.length-1],x=o.length>1?o[1]:t,R=o.length>3?o[3]:i,nt=o.length>2?o[2]:x;return{min:t,max:i,min1:x,max1:R,median:nt}}function pc(c,o,t){var i=t/2,x;if(Object(a.isArray)(o)){var R=vc(o),nt=R.min,Mt=R.max,Lt=R.median,ne=R.min1,ge=R.max1,be=c-i,Ae=c+i;x=[[be,Mt],[Ae,Mt],[c,Mt],[c,ge],[be,ne],[be,ge],[Ae,ge],[Ae,ne],[c,ne],[c,nt],[be,nt],[Ae,nt],[be,Lt],[Ae,Lt]]}else{o=Object(a.isNil)(o)?.5:o;var We=vc(c),nt=We.min,Mt=We.max,Lt=We.median,ne=We.min1,ge=We.max1,an=o-i,gn=o+i;x=[[nt,an],[nt,gn],[nt,o],[ne,o],[ne,an],[ne,gn],[ge,gn],[ge,an],[ge,o],[Mt,o],[Mt,an],[Mt,gn],[Lt,an],[Lt,gn]]}return x.map(function(Yn){return{x:Yn[0],y:Yn[1]}})}function Tl(c){return[["M",c[0].x,c[0].y],["L",c[1].x,c[1].y],["M",c[2].x,c[2].y],["L",c[3].x,c[3].y],["M",c[4].x,c[4].y],["L",c[5].x,c[5].y],["L",c[6].x,c[6].y],["L",c[7].x,c[7].y],["L",c[4].x,c[4].y],["Z"],["M",c[8].x,c[8].y],["L",c[9].x,c[9].y],["M",c[10].x,c[10].y],["L",c[11].x,c[11].y],["M",c[12].x,c[12].y],["L",c[13].x,c[13].y]]}fo("schema","box",{getPoints:function(o){var t=o.x,i=o.y,x=o.size;return pc(t,i,x)},draw:function(o,t){var i=bo(o,!0,!1),x=this.parsePath(Tl(o.points)),R=t.addShape("path",{attrs:Object(rt.a)(Object(rt.a)({},i),{path:x,name:"schema"})});return R},getMarker:function(o){var t=o.color;return{symbol:function(x,R,nt){var Mt=[R-6,R-3,R,R+3,R+6],Lt=pc(x,Mt,nt);return[["M",Lt[0].x+1,Lt[0].y],["L",Lt[1].x-1,Lt[1].y],["M",Lt[2].x,Lt[2].y],["L",Lt[3].x,Lt[3].y],["M",Lt[4].x,Lt[4].y],["L",Lt[5].x,Lt[5].y],["L",Lt[6].x,Lt[6].y],["L",Lt[7].x,Lt[7].y],["L",Lt[4].x,Lt[4].y],["Z"],["M",Lt[8].x,Lt[8].y],["L",Lt[9].x,Lt[9].y],["M",Lt[10].x+1,Lt[10].y],["L",Lt[11].x-1,Lt[11].y],["M",Lt[12].x,Lt[12].y],["L",Lt[13].x,Lt[13].y]]},style:{r:6,lineWidth:1,stroke:t}}}});function jl(c){var o=Object(a.isArray)(c)?c:[c],t=o.sort(function(i,x){return x-i});return Kt(t,4,t[t.length-1])}function ju(c,o,t){var i=jl(o);return[{x:c,y:i[0]},{x:c,y:i[1]},{x:c-t/2,y:i[2]},{x:c-t/2,y:i[1]},{x:c+t/2,y:i[1]},{x:c+t/2,y:i[2]},{x:c,y:i[2]},{x:c,y:i[3]}]}function Il(c){return[["M",c[0].x,c[0].y],["L",c[1].x,c[1].y],["M",c[2].x,c[2].y],["L",c[3].x,c[3].y],["L",c[4].x,c[4].y],["L",c[5].x,c[5].y],["Z"],["M",c[6].x,c[6].y],["L",c[7].x,c[7].y]]}fo("schema","candle",{getPoints:function(o){var t=o.x,i=o.y,x=o.size;return ju(t,i,x)},draw:function(o,t){var i=bo(o,!0,!0),x=this.parsePath(Il(o.points)),R=t.addShape("path",{attrs:Object(rt.a)(Object(rt.a)({},i),{path:x,name:"schema"})});return R},getMarker:function(o){var t=o.color;return{symbol:function(x,R,nt){var Mt=[R+7.5,R+3,R-3,R-7.5],Lt=ju(x,Mt,nt);return[["M",Lt[0].x,Lt[0].y],["L",Lt[1].x,Lt[1].y],["M",Lt[2].x,Lt[2].y],["L",Lt[3].x,Lt[3].y],["L",Lt[4].x,Lt[4].y],["L",Lt[5].x,Lt[5].y],["Z"],["M",Lt[6].x,Lt[6].y],["L",Lt[7].x,Lt[7].y]]},style:{lineWidth:1,stroke:t,fill:t,r:6}}}});function Pl(c,o){var t=Math.abs(c[0].x-c[2].x),i=Math.abs(c[0].y-c[2].y),x=Math.min(t,i);o&&(x=Object(a.clamp)(o,0,Math.min(t,i))),x=x/2;var R=(c[0].x+c[2].x)/2,nt=(c[0].y+c[2].y)/2;return{x:R-x,y:nt-x,width:x*2,height:x*2}}fo("polygon","square",{draw:function(o,t){if(!Object(a.isEmpty)(o.points)){var i=bo(o,!0,!0),x=this.parsePoints(o.points);return t.addShape("rect",{attrs:Object(rt.a)(Object(rt.a)({},i),Pl(x,o.size)),name:"polygon"})}},getMarker:function(o){var t=o.color;return{symbol:"square",style:{r:4,fill:t}}}});var Ah=function(c){Object(rt.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getLabelValueDir=function(t){var i="y",x=t.points;return x[0][i]<=x[2][i]?1:-1},o.prototype.getLabelOffsetPoint=function(t,i,x){var R,nt=c.prototype.getLabelOffsetPoint.call(this,t,i,x),Mt=this.getCoordinate().isTransposed,Lt=Mt?"x":"y",ne=this.getLabelValueDir(t.mappingData);return Object(rt.a)(Object(rt.a)({},nt),(R={},R[Lt]=nt[Lt]*ne,R))},o.prototype.getThemedLabelCfg=function(t){var i=this.geometry,x=this.getDefaultLabelCfg(),R=i.theme;return Object(a.deepMix)({},x,R.labels,t.position==="middle"?{offset:0}:{},t)},o.prototype.setLabelPosition=function(t,i,x,R){var nt=this.getCoordinate(),Mt=nt.isTransposed,Lt=i.points,ne=nt.convert(Lt[0]),ge=nt.convert(Lt[2]),be=this.getLabelValueDir(i),Ae,We,an,gn,Yn=Object(a.isArray)(i.shape)?i.shape[0]:i.shape;if(Yn==="funnel"||Yn==="pyramid"){var Hn=Object(a.get)(i,"nextPoints"),ir=Object(a.get)(i,"points");if(Hn){var cr=nt.convert(ir[0]),kr=nt.convert(ir[1]),zr=nt.convert(Hn[0]),Ur=nt.convert(Hn[1]);Mt?(Ae=Math.min(zr.y,cr.y),an=Math.max(zr.y,cr.y),We=(kr.x+Ur.x)/2,gn=(cr.x+zr.x)/2):(Ae=Math.min((kr.y+Ur.y)/2,(cr.y+zr.y)/2),an=Math.max((kr.y+Ur.y)/2,(cr.y+zr.y)/2),We=Ur.x,gn=cr.x)}else Ae=Math.min(ge.y,ne.y),an=Math.max(ge.y,ne.y),We=ge.x,gn=ne.x}else Ae=Math.min(ge.y,ne.y),an=Math.max(ge.y,ne.y),We=ge.x,gn=ne.x;switch(R){case"right":t.x=We,t.y=(Ae+an)/2,t.textAlign=Object(a.get)(t,"textAlign",be>0?"left":"right");break;case"left":t.x=gn,t.y=(Ae+an)/2,t.textAlign=Object(a.get)(t,"textAlign",be>0?"left":"right");break;case"bottom":Mt&&(t.x=(We+gn)/2),t.y=an,t.textAlign=Object(a.get)(t,"textAlign","center"),t.textBaseline=Object(a.get)(t,"textBaseline",be>0?"bottom":"top");break;case"middle":Mt&&(t.x=(We+gn)/2),t.y=(Ae+an)/2,t.textAlign=Object(a.get)(t,"textAlign","center"),t.textBaseline=Object(a.get)(t,"textBaseline","middle");break;case"top":Mt&&(t.x=(We+gn)/2),t.y=Ae,t.textAlign=Object(a.get)(t,"textAlign","center"),t.textBaseline=Object(a.get)(t,"textBaseline",be>0?"bottom":"top");break;default:break}},o}(Fe),Ch=Ah,Iu=Math.PI/2,Th=function(c){Object(rt.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getLabelOffset=function(t){var i=this.getCoordinate(),x=0;if(Object(a.isNumber)(t))x=t;else if(Object(a.isString)(t)&&t.indexOf("%")!==-1){var R=i.getRadius();i.innerRadius>0&&(R=R*(1-i.innerRadius)),x=parseFloat(t)*.01*R}return x},o.prototype.getLabelItems=function(t){var i=c.prototype.getLabelItems.call(this,t),x=this.geometry.getYScale();return Object(a.map)(i,function(R){if(R&&x){var nt=x.scale(Object(a.get)(R.data,x.field));return Object(rt.a)(Object(rt.a)({},R),{percent:nt})}return R})},o.prototype.getLabelAlign=function(t){var i=this.getCoordinate(),x;if(t.labelEmit)x=t.angle<=Math.PI/2&&t.angle>=-Math.PI/2?"left":"right";else if(!i.isTransposed)x="center";else{var R=i.getCenter(),nt=t.offset;Math.abs(t.x-R.x)<1?x="center":t.angle>Math.PI||t.angle<=0?x=nt>0?"left":"right":x=nt>0?"right":"left"}return x},o.prototype.getLabelPoint=function(t,i,x){var R=1,nt,Mt=t.content[x];this.isToMiddle(i)?nt=this.getMiddlePoint(i.points):(t.content.length===1&&x===0?x=1:x===0&&(R=-1),nt=this.getArcPoint(i,x));var Lt=t.offset*R,ne=this.getPointAngle(nt),ge=t.labelEmit,be=this.getCirclePoint(ne,Lt,nt,ge);return be.r===0?be.content="":(be.content=Mt,be.angle=ne,be.color=i.color),be.rotate=t.autoRotate?this.getLabelRotate(ne,Lt,ge):t.rotate,be.start={x:nt.x,y:nt.y},be},o.prototype.getArcPoint=function(t,i){return i===void 0&&(i=0),!Object(a.isArray)(t.x)&&!Object(a.isArray)(t.y)?{x:t.x,y:t.y}:{x:Object(a.isArray)(t.x)?t.x[i]:t.x,y:Object(a.isArray)(t.y)?t.y[i]:t.y}},o.prototype.getPointAngle=function(t){return $n(this.getCoordinate(),t)},o.prototype.getCirclePoint=function(t,i,x,R){var nt=this.getCoordinate(),Mt=nt.getCenter(),Lt=rn(nt,x);if(Lt===0)return Object(rt.a)(Object(rt.a)({},Mt),{r:Lt});var ne=t;if(nt.isTransposed&&Lt>i&&!R){var ge=Math.asin(i/(2*Lt));ne=t+ge*2}else Lt=Lt+i;return{x:Mt.x+Lt*Math.cos(ne),y:Mt.y+Lt*Math.sin(ne),r:Lt}},o.prototype.getLabelRotate=function(t,i,x){var R=t+Iu;return x&&(R-=Iu),R&&(R>Iu?R=R-Math.PI:R<-Iu&&(R=R+Math.PI)),R},o.prototype.getMiddlePoint=function(t){var i=this.getCoordinate(),x=t.length,R={x:0,y:0};return Object(a.each)(t,function(nt){R.x+=nt.x,R.y+=nt.y}),R.x/=x,R.y/=x,R=i.convert(R),R},o.prototype.isToMiddle=function(t){return t.x.length>2},o}(Fe),gc=Th,Dl=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.defaultLayout="distribute",t}return o.prototype.getDefaultLabelCfg=function(t,i){var x=c.prototype.getDefaultLabelCfg.call(this,t,i);return Object(a.deepMix)({},x,Object(a.get)(this.geometry.theme,"pieLabels",{}))},o.prototype.getLabelOffset=function(t){return c.prototype.getLabelOffset.call(this,t)||0},o.prototype.getLabelRotate=function(t,i,x){var R;return i<0&&(R=t,R>Math.PI/2&&(R=R-Math.PI),R<-Math.PI/2&&(R=R+Math.PI)),R},o.prototype.getLabelAlign=function(t){var i=this.getCoordinate(),x=i.getCenter(),R;return t.angle<=Math.PI/2&&t.x>=x.x?R="left":R="right",t.offset<=0&&(R==="right"?R="left":R="right"),R},o.prototype.getArcPoint=function(t){return t},o.prototype.getPointAngle=function(t){var i=this.getCoordinate(),x={x:Object(a.isArray)(t.x)?t.x[0]:t.x,y:t.y[0]},R={x:Object(a.isArray)(t.x)?t.x[1]:t.x,y:t.y[1]},nt,Mt=$n(i,x);if(t.points&&t.points[0].y===t.points[1].y)nt=Mt;else{var Lt=$n(i,R);Mt>=Lt&&(Lt=Lt+Math.PI*2),nt=Mt+(Lt-Mt)/2}return nt},o.prototype.getCirclePoint=function(t,i){var x=this.getCoordinate(),R=x.getCenter(),nt=x.getRadius()+i;return Object(rt.a)(Object(rt.a)({},Pi(R.x,R.y,nt,t)),{angle:t,r:nt})},o}(gc),jh=Dl,Rl=4;function Ih(c,o,t,i,x,R){var nt=!0,Mt=i.start,Lt=i.end,ne=Math.min(Mt.y,Lt.y),ge=Math.abs(Mt.y-Lt.y),be,Ae=0,We=Number.MIN_VALUE,an=o.map(function(zr){return zr.y>Ae&&(Ae=zr.y),zr.y<We&&(We=zr.y),{size:t,targets:[zr.y-ne]}});for(We-=ne,Ae-ne>ge&&(ge=Ae-ne);nt;)for(an.forEach(function(zr){var Ur=(Math.min.apply(We,zr.targets)+Math.max.apply(We,zr.targets))/2;zr.pos=Math.min(Math.max(We,Ur-zr.size/2),ge-zr.size)}),nt=!1,be=an.length;be--;)if(be>0){var gn=an[be-1],Yn=an[be];gn.pos+gn.size>Yn.pos&&(gn.size+=Yn.size,gn.targets=gn.targets.concat(Yn.targets),gn.pos+gn.size>ge&&(gn.pos=ge-gn.size),an.splice(be,1),nt=!0)}be=0,an.forEach(function(zr){var Ur=ne+t/2;zr.targets.forEach(function(){o[be].y=zr.pos+Ur,Ur+=t,be++})});for(var Hn={},ir=0,cr=c;ir<cr.length;ir++){var kr=cr[ir];Hn[kr.get("id")]=kr}o.forEach(function(zr){var Ur=zr.r*zr.r,Ri=Math.pow(Math.abs(zr.y-x.y),2);if(Ur<Ri)zr.x=x.x;else{var Ai=Math.sqrt(Ur-Ri);R?zr.x=x.x+Ai:zr.x=x.x-Ai}var mi=Hn[zr.id];mi.attr("x",zr.x),mi.attr("y",zr.y);var Ki=Object(a.find)(mi.getChildren(),function(vo){return vo.get("type")==="text"});Ki&&(Ki.attr("y",zr.y),Ki.attr("x",zr.x))})}function Ph(c,o,t,i){if(!(!c.length||!o.length)){var x=c[0]?c[0].offset:0,R=o[0].get("coordinate"),nt=R.getRadius(),Mt=R.getCenter();if(x>0){var Lt=14,ne=nt+x,ge=ne*2+Lt*2,be={start:R.start,end:R.end},Ae=[[],[]];c.forEach(function(We){!We||(We.textAlign==="right"?Ae[0].push(We):Ae[1].push(We))}),Ae.forEach(function(We,an){var gn=ge/Lt;We.length>gn&&(We.sort(function(Yn,Hn){return Hn["..percent"]-Yn["..percent"]}),We.splice(gn,We.length-gn)),We.sort(function(Yn,Hn){return Yn.y-Hn.y}),Ih(o,We,Lt,be,Mt,an)})}Object(a.each)(c,function(We){if(We&&We.labelLine){var an=We.offset,gn=We.angle,Yn=Pi(Mt.x,Mt.y,nt,gn),Hn=Pi(Mt.x,Mt.y,nt+an/2,gn),ir=We.x+Object(a.get)(We,"offsetX",0),cr=We.y+Object(a.get)(We,"offsetY",0),kr={x:ir-Math.cos(gn)*Rl,y:cr-Math.sin(gn)*Rl};Object(a.isObject)(We.labelLine)||(We.labelLine={}),We.labelLine.path=["M "+Yn.x,Yn.y+" Q"+Hn.x,Hn.y+" "+kr.x,kr.y].join(",")}})}}function kl(c,o,t){var i=c.filter(function(an){return!an.invisible});i.sort(function(an,gn){return an.y-gn.y});var x=!0,R=t.minY,nt=t.maxY,Mt=Math.abs(R-nt),Lt,ne=0,ge=Number.MIN_VALUE,be=i.map(function(an){return an.y>ne&&(ne=an.y),an.y<ge&&(ge=an.y),{content:an.content,size:o,targets:[an.y-R],pos:null}});for(ge-=R,ne-R>Mt&&(Mt=ne-R);x;)for(be.forEach(function(an){var gn=(Math.min.apply(ge,an.targets)+Math.max.apply(ge,an.targets))/2;an.pos=Math.min(Math.max(ge,gn-an.size/2),Mt-an.size),an.pos=Math.max(0,an.pos)}),x=!1,Lt=be.length;Lt--;)if(Lt>0){var Ae=be[Lt-1],We=be[Lt];Ae.pos+Ae.size>We.pos&&(Ae.size+=We.size,Ae.targets=Ae.targets.concat(We.targets),Ae.pos+Ae.size>Mt&&(Ae.pos=Mt-Ae.size),be.splice(Lt,1),x=!0)}Lt=0,be.forEach(function(an){var gn=R+o/2;an.targets.forEach(function(){i[Lt].y=an.pos+gn,gn+=o,Lt++})})}var yc=4;function Dh(c,o){var t=o.getCenter(),i=o.getRadius();if(c&&c.labelLine){var x=c.angle,R=c.offset,nt=Pi(t.x,t.y,i,x),Mt=c.x+Object(a.get)(c,"offsetX",0)*(Math.cos(x)>0?1:-1),Lt=c.y+Object(a.get)(c,"offsetY",0)*(Math.sin(x)>0?1:-1),ne={x:Mt-Math.cos(x)*yc,y:Lt-Math.sin(x)*yc},ge=c.labelLine.smooth,be=[],Ae=ne.x-t.x,We=ne.y-t.y,an=Math.atan(We/Ae);if(Ae<0&&(an+=Math.PI),ge===!1){Object(a.isObject)(c.labelLine)||(c.labelLine={});var gn=0;(x<0&&x>-Math.PI/2||x>Math.PI*1.5)&&ne.y>nt.y&&(gn=1),x>=0&&x<Math.PI/2&&ne.y>nt.y&&(gn=1),x>=Math.PI/2&&x<Math.PI&&nt.y>ne.y&&(gn=1),(x<-Math.PI/2||x>=Math.PI&&x<Math.PI*1.5)&&nt.y>ne.y&&(gn=1);var Yn=R/2>4?4:Math.max(R/2-1,0),Hn=Pi(t.x,t.y,i+Yn,x),ir=Pi(t.x,t.y,i+R/2,an),cr=0;be.push("M "+nt.x+" "+nt.y),be.push("L "+Hn.x+" "+Hn.y),be.push("A "+t.x+" "+t.y+" 0 "+cr+" "+gn+" "+ir.x+" "+ir.y),be.push("L "+ne.x+" "+ne.y)}else{var Hn=Pi(t.x,t.y,i+(R/2>4?4:Math.max(R/2-1,0)),x),kr=nt.x<t.x?1:-1;be.push("M "+ne.x+" "+ne.y);var zr=(nt.y-t.y)/(nt.x-t.x),Ur=(ne.y-t.y)/(ne.x-t.x);Math.abs(zr-Ur)>Math.pow(Math.E,-16)&&be.push.apply(be,["C",ne.x+kr*4,ne.y,2*Hn.x-nt.x,2*Hn.y-nt.y,nt.x,nt.y]),be.push("L "+nt.x+" "+nt.y)}c.labelLine.path=be.join(" ")}}function Nl(c,o,t,i){var x=Object(a.filter)(c,function(Ur){return!Object(a.isNil)(Ur)}),R=o[0]&&o[0].get("coordinate");if(!!R){for(var nt=R.getCenter(),Mt=R.getRadius(),Lt={},ne=0,ge=o;ne<ge.length;ne++){var be=ge[ne];Lt[be.get("id")]=be}var Ae=Object(a.get)(x[0],"labelHeight",14),We=Object(a.get)(x[0],"offset",0);if(!(We<=0)){var an="left",gn="right",Yn=Object(a.groupBy)(x,function(Ur){return Ur.x<nt.x?an:gn}),Hn=R.start,ir=R.end,cr=Math.min((Mt+We+Ae)*2,R.getHeight()),kr=cr/2,zr={minX:Hn.x,maxX:ir.x,minY:nt.y-kr,maxY:nt.y+kr};Object(a.each)(Yn,function(Ur,Ri){var Ai=Math.floor(cr/Ae);Ur.length>Ai&&(Ur.sort(function(mi,Ki){return Ki.percent-mi.percent}),Object(a.each)(Ur,function(mi,Ki){Ki+1>Ai&&(Lt[mi.id].set("visible",!1),mi.invisible=!0)})),kl(Ur,Ae,zr)}),Object(a.each)(Yn,function(Ur,Ri){Object(a.each)(Ur,function(Ai){var mi=Ri===gn,Ki=Lt[Ai.id],vo=Ki.getChildByIndex(0);if(vo){var po=Mt+We,yo=Ai.y-nt.y,wo=Math.pow(po,2),Q=Math.pow(yo,2),U=wo-Q>0?wo-Q:0,w=Math.sqrt(U),L=Math.abs(Math.cos(Ai.angle)*po);mi?Ai.x=nt.x+Math.max(w,L):Ai.x=nt.x-Math.max(w,L)}vo&&(vo.attr("y",Ai.y),vo.attr("x",Ai.x)),Dh(Ai,R)})})}}}var Pu=4,Hs=4,Ll=4;function Rh(c,o,t){var i=o.getCenter(),x=o.getRadius(),R={x:c.x-(t?Ll:-Ll),y:c.y},nt=Pi(i.x,i.y,x+Pu,c.angle),Mt={x:R.x,y:R.y},Lt={x:nt.x,y:nt.y},ne=Pi(i.x,i.y,x,c.angle),ge="";if(R.y!==nt.y){var be=t?4:-4;Mt.y=R.y,c.angle<0&&c.angle>=-Math.PI/2&&(Mt.x=Math.max(nt.x,R.x-be),R.y<nt.y?Lt.y=Mt.y:(Lt.y=nt.y,Lt.x=Math.max(Lt.x,Mt.x-be))),c.angle>0&&c.angle<Math.PI/2&&(Mt.x=Math.max(nt.x,R.x-be),R.y>nt.y?Lt.y=Mt.y:(Lt.y=nt.y,Lt.x=Math.max(Lt.x,Mt.x-be))),c.angle>Math.PI/2&&(Mt.x=Math.min(nt.x,R.x-be),R.y>nt.y?Lt.y=Mt.y:(Lt.y=nt.y,Lt.x=Math.min(Lt.x,Mt.x-be))),c.angle<-Math.PI/2&&(Mt.x=Math.min(nt.x,R.x-be),R.y<nt.y?Lt.y=Mt.y:(Lt.y=nt.y,Lt.x=Math.min(Lt.x,Mt.x-be)))}ge=["M "+R.x+","+R.y,"L "+Mt.x+","+Mt.y,"L "+Lt.x+","+Lt.y,"L "+nt.x+","+nt.y,"L "+ne.x+","+ne.y].join(" "),c.labelLine=Object(a.deepMix)({},c.labelLine,{path:ge})}function kh(c,o,t,i){var x=o[0]&&o[0].get("coordinate");if(!!x){for(var R=x.getCenter(),nt=x.getRadius(),Mt={},Lt=0,ne=o;Lt<ne.length;Lt++){var ge=ne[Lt];Mt[ge.get("id")]=ge}var be=Object(a.get)(c[0],"labelHeight",14),Ae=Math.max(Object(a.get)(c[0],"offset",0),Pu);Object(a.each)(c,function(Ur){var Ri=Object(a.get)(Mt,Ur.id);if(!!Ri){var Ai=Ur.x>R.x||Ur.x===R.x&&Ur.y>R.y,mi=Object(a.isNil)(Ur.offsetX)?Hs:Ur.offsetX,Ki=Pi(R.x,R.y,nt+Pu,Ur.angle),vo=Ae+mi;Ur.x=R.x+(Ai?1:-1)*(nt+vo),Ur.y=Ki.y}});var We=x.start,an=x.end,gn="left",Yn="right",Hn=Object(a.groupBy)(c,function(Ur){return Ur.x<R.x?gn:Yn}),ir=(nt+Ae)*2+be;Object(a.each)(Hn,function(Ur){var Ri=Ur.length*be;Ri>ir&&(ir=Math.min(Ri,Math.abs(We.y-an.y)))});var cr={minX:We.x,maxX:an.x,minY:R.y-ir/2,maxY:R.y+ir/2};Object(a.each)(Hn,function(Ur,Ri){var Ai=ir/be;Ur.length>Ai&&(Ur.sort(function(mi,Ki){return Ki.percent-mi.percent}),Object(a.each)(Ur,function(mi,Ki){Ki>Ai&&(Mt[mi.id].set("visible",!1),mi.invisible=!0)})),kl(Ur,be,cr)});var kr=cr.minY,zr=cr.maxY;Object(a.each)(Hn,function(Ur,Ri){var Ai=Ri===Yn;Object(a.each)(Ur,function(mi){var Ki=Object(a.get)(Mt,mi&&mi.id);if(!!Ki){if(mi.y<kr||mi.y>zr){Ki.set("visible",!1);return}var vo=Ki.getChildByIndex(0),po=vo.getCanvasBBox(),yo={x:Ai?po.x:po.maxX,y:po.y+po.height/2};Ta(vo,mi.x-yo.x,mi.y-yo.y),mi.labelLine&&Rh(mi,x,Ai)}})})}}function ha(c,o,t,i){Object(a.each)(o,function(x){var R=i.minX,nt=i.minY,Mt=i.maxX,Lt=i.maxY,ne=x.getCanvasBBox(),ge=ne.minX,be=ne.minY,Ae=ne.maxX,We=ne.maxY,an=ne.x,gn=ne.y,Yn=ne.width,Hn=ne.height,ir=an,cr=gn;(ge<R||Ae<R)&&(ir=R),(be<nt||We<nt)&&(cr=nt),ge>Mt?ir=Mt-Yn:Ae>Mt&&(ir=ir-(Ae-Mt)),be>Lt?cr=Lt-Hn:We>Lt&&(cr=cr-(We-Lt)),(ir!==an||cr!==gn)&&Ta(x,ir-an,cr-gn)})}function Nh(c,o,t,i){Object(a.each)(o,function(x,R){var nt=x.getCanvasBBox(),Mt=t[R].getBBox();(nt.minX<Mt.minX||nt.minY<Mt.minY||nt.maxX>Mt.maxX||nt.maxY>Mt.maxY)&&x.remove(!0)})}var Bl=100,Ua=function(){function c(o){o===void 0&&(o={}),this.bitmap={};var t=o.xGap,i=t===void 0?1:t,x=o.yGap,R=x===void 0?8:x;this.xGap=i,this.yGap=R}return c.prototype.hasGap=function(o){for(var t=!0,i=this.bitmap,x=Math.round(o.minX),R=Math.round(o.maxX),nt=Math.round(o.minY),Mt=Math.round(o.maxY),Lt=x;Lt<=R;Lt+=1){if(!i[Lt]){i[Lt]={};continue}if(Lt===x||Lt===R){for(var ne=nt;ne<=Mt;ne++)if(i[Lt][ne]){t=!1;break}}else if(i[Lt][nt]||i[Lt][Mt]){t=!1;break}}return t},c.prototype.fillGap=function(o){for(var t=this.bitmap,i=Math.round(o.minX),x=Math.round(o.maxX),R=Math.round(o.minY),nt=Math.round(o.maxY),Mt=i;Mt<=x;Mt+=1)t[Mt]||(t[Mt]={});for(var Mt=i;Mt<=x;Mt+=this.xGap){for(var Lt=R;Lt<=nt;Lt+=this.yGap)t[Mt][Lt]=!0;t[Mt][nt]=!0}if(this.yGap!==1)for(var Mt=R;Mt<=nt;Mt+=1)t[i][Mt]=!0,t[x][Mt]=!0;if(this.xGap!==1)for(var Mt=i;Mt<=x;Mt+=1)t[Mt][R]=!0,t[Mt][nt]=!0},c.prototype.destroy=function(){this.bitmap={}},c}();function Fl(c,o,t){t===void 0&&(t=Bl);var i=-1,x=c.attr(),R=x.x,nt=x.y,Mt=c.getCanvasBBox(),Lt=Math.sqrt(Mt.width*Mt.width+Mt.height*Mt.height),ne,ge=-i,be=0,Ae=0,We=function(ir){var cr=ir*.1;return[cr*Math.cos(cr),cr*Math.sin(cr)]};if(o.hasGap(Mt))return o.fillGap(Mt),!0;for(var an=!1,gn=0,Yn={};Math.min(Math.abs(be),Math.abs(Ae))<Lt&&gn<t;)if(ne=We(ge+=i),be=~~ne[0],Ae=~~ne[1],!(!be&&!Ae||Yn[be+"-"+Ae])&&(c.attr({x:R+be,y:nt+Ae}),be+Ae<0&&c.attr("textAlign","right"),gn++,o.hasGap(c.getCanvasBBox()))){o.fillGap(c.getCanvasBBox()),an=!0,Yn[be+"-"+Ae]=!0;break}return an}function za(c,o,t,i){var x=c.getCanvasBBox(),R=x.width,nt=x.height,Mt={x:o,y:t,textAlign:"center"};switch(i){case 0:Mt.y-=nt+1,Mt.x+=1,Mt.textAlign="left";break;case 1:Mt.y-=nt+1,Mt.x-=1,Mt.textAlign="right";break;case 2:Mt.y+=nt+1,Mt.x-=1,Mt.textAlign="right";break;case 3:Mt.y+=nt+1,Mt.x+=1,Mt.textAlign="left";break;case 5:Mt.y-=nt*2+2;break;case 6:Mt.y+=nt*2+2;break;case 7:Mt.x+=R+1,Mt.textAlign="left";break;case 8:Mt.x-=R+1,Mt.textAlign="right";break;default:break}return c.attr(Mt),c.getCanvasBBox()}function Ks(c,o,t,i){var x=new Ua;Object(a.each)(o,function(R){var nt=R.find(function(Mt){return Mt.get("type")==="text"});Fl(nt,x)||R.remove(!0)}),x.destroy()}function $o(c,o,t,i){var x=new Ua;Object(a.each)(o,function(R){for(var nt=R.find(function(We){return We.get("type")==="text"}),Mt=nt.attr(),Lt=Mt.x,ne=Mt.y,ge=!1,be=0;be<=8;be++){var Ae=za(nt,Lt,ne,be);if(x.hasGap(Ae)){x.fillGap(Ae),ge=!0;break}}ge||R.remove(!0)}),x.destroy()}var ja=jr.c.dot;function Va(c){if(c.length>4)return[];var o=function(R,nt){return[nt.x-R.x,nt.y-R.y]},t=o(c[0],c[1]),i=o(c[1],c[2]);return[t,i]}function Js(c,o,t){o===void 0&&(o=0),t===void 0&&(t={x:0,y:0});var i=c.x,x=c.y;return{x:(i-t.x)*Math.cos(-o)+(x-t.y)*Math.sin(-o)+t.x,y:(t.x-i)*Math.sin(-o)+(x-t.y)*Math.cos(-o)+t.y}}function mc(c){var o=[{x:c.x,y:c.y},{x:c.x+c.width,y:c.y},{x:c.x+c.width,y:c.y+c.height},{x:c.x,y:c.y+c.height}],t=c.rotation;return t?[Js(o[0],t,o[0]),Js(o[1],t,o[0]),Js(o[2],t,o[0]),Js(o[3],t,o[0])]:o}function bc(c,o){if(c.length>4)return{min:0,max:0};var t=[];return c.forEach(function(i){t.push(ja([i.x,i.y],o))}),{min:Math.min.apply(Math,t),max:Math.max.apply(Math,t)}}function xc(c,o){return c.max>o.min&&c.min<o.max}function Gl(c,o,t){return t===void 0&&(t=0),!(o.x>c.x+c.width+t||o.x+o.width<c.x-t||o.y>c.y+c.height+t||o.y+o.height<c.y-t)}function So(c,o){if(!c.rotation&&!o.rotation)return Gl(c,o);for(var t=mc(c),i=mc(o),x=Object(rt.d)(Va(t),Va(i)),R=0;R<x.length;R++){var nt=x[R],Mt=bc(t,nt),Lt=bc(i,nt);if(!xc(Mt,Lt))return!1}return!0}function Du(c,o,t,i){for(var x=0;x<o.length;x++){var R=o[x];if(o[x].get("visible"))for(var nt=x+1;nt<o.length;nt++){var Mt=o[nt];if(R&&Mt&&R!==Mt&&Mt.get("visible")){var Lt=W(R,c[x],Object(a.get)(c[x],"background.padding")),ne=W(Mt,c[nt],Object(a.get)(c[nt],"background.padding"));So(Lt,ne)&&o[nt].set("visible",!1)}}}}var Wa={"#5B8FF9":!0},_l=function(o){var t=gt.a.toRGB(o).toUpperCase();if(Wa[t])return Wa[t];var i=gt.a.rgb2arr(t),x=i[0],R=i[1],nt=i[2],Mt=(x*299+R*587+nt*114)/1e3<128;return Mt};function Ul(c,o,t){if(t.length!==0){var i=t[0].get("element"),x=i.geometry.theme,R=x.labels||{},nt=R.fillColorLight,Mt=R.fillColorDark;t.forEach(function(Lt,ne){var ge=o[ne],be=ge.find(function(Hn){return Hn.get("type")==="text"}),Ae=Qe.fromObject(Lt.getBBox()),We=Qe.fromObject(be.getCanvasBBox()),an=!Ae.contains(We),gn=Lt.attr("fill"),Yn=_l(gn);an?be.attr(x.overflowLabels.style):Yn?nt&&be.attr("fill",nt):Mt&&be.attr("fill",Mt)})}}function zl(c,o,t){var i=c.coordinate,x=I(o),R=Qe.fromObject(x.getCanvasBBox()),nt=Qe.fromObject(t.getBBox());return i.isTransposed?nt.height>=R.height:nt.width>=R.width}function Vl(c,o,t){var i=!!c.getAdjust("stack");return i||o.every(function(x,R){var nt=t[R];return zl(c,x,nt)})}function Wl(c,o,t){var i=c.coordinate,x=Qe.fromObject(t.getBBox()),R=I(o);i.isTransposed?R.attr({x:x.minX+x.width/2,textAlign:"center"}):R.attr({y:x.minY+x.height/2,textBaseline:"middle"})}function Ru(c,o,t){var i;if(t.length!==0){var x=(i=t[0])===null||i===void 0?void 0:i.get("element"),R=x==null?void 0:x.geometry;if(!(!R||R.type!=="interval")){var nt=Vl(R,o,t);nt&&t.forEach(function(Mt,Lt){var ne=o[Lt];Wl(R,ne,Mt)})}}}function Yl(c){var o=500,t=[],i=Math.max(Math.floor(c.length/o),1);return Object(a.each)(c,function(x,R){R%i==0?t.push(x):x.set("visible",!1)}),t}function Xl(c,o,t){var i;if(t.length!==0){var x=(i=t[0])===null||i===void 0?void 0:i.get("element"),R=x==null?void 0:x.geometry;if(!(!R||R.type!=="interval")){var nt=Yl(o),Mt=R.getXYFields()[0],Lt=[],ne=[],ge=Object(a.groupBy)(nt,function(gn){return gn.get("data")[Mt]}),be=Object(a.uniq)(Object(a.map)(nt,function(gn){return gn.get("data")[Mt]})),Ae;nt.forEach(function(gn){gn.set("visible",!0)});var We=function(Yn){Yn&&(Yn.length&&ne.push(Yn.pop()),ne.push.apply(ne,Yn))};for(Object(a.size)(be)>0&&(Ae=be.shift(),We(ge[Ae])),Object(a.size)(be)>0&&(Ae=be.pop(),We(ge[Ae])),Object(a.each)(be.reverse(),function(gn){We(ge[gn])});ne.length>0;){var an=ne.shift();an.get("visible")&&(Ct(an,Lt)?an.set("visible",!1):Lt.push(an))}}}}function Ia(c,o){var t=c.getXYFields()[1],i=[],x=o.sort(function(R,nt){return R.get("data")[t]-R.get("data")[t]});return x.length>0&&i.push(x.shift()),x.length>0&&i.push(x.pop()),i.push.apply(i,x),i}function is(c,o,t){return c.some(function(i){return t(i,o)})}function Hl(c,o,t){t===void 0&&(t=0);var i=Math.max(0,Math.min(c.x+c.width+t,o.x+o.width+t)-Math.max(c.x-t,o.x-t)),x=Math.max(0,Math.min(c.y+c.height+t,o.y+o.height+t)-Math.max(c.y-t,o.y-t));return i*x}function Kl(c,o){return is(c,o,function(t,i){var x=I(t),R=I(i);return Hl(x.getCanvasBBox(),R.getCanvasBBox(),2)>0})}function ku(c,o,t,i,x){var R,nt;if(t.length!==0){var Mt=(R=t[0])===null||R===void 0?void 0:R.get("element"),Lt=Mt==null?void 0:Mt.geometry;if(!(!Lt||Lt.type!=="point")){var ne=Lt.getXYFields(),ge=ne[0],be=ne[1],Ae=Object(a.groupBy)(o,function(gn){return gn.get("data")[ge]}),We=[],an=x&&x.offset||((nt=c[0])===null||nt===void 0?void 0:nt.offset)||12;Object(a.map)(Object(a.keys)(Ae).reverse(),function(gn){for(var Yn=Ia(Lt,Ae[gn]);Yn.length;){var Hn=Yn.shift(),ir=I(Hn);if(is(We,Hn,function(zr,Ur){return zr.get("data")[ge]===Ur.get("data")[ge]&&zr.get("data")[be]===Ur.get("data")[be]})){ir.set("visible",!1);continue}var cr=Kl(We,Hn),kr=!1;if(cr&&(ir.attr("y",ir.attr("y")+2*an),kr=Kl(We,Hn)),kr){ir.set("visible",!1);continue}We.push(Hn)}})}}}function Lh(c,o){var t=c.getXYFields()[1],i=[],x=o.sort(function(R,nt){return R.get("data")[t]-R.get("data")[t]});return x.length>0&&i.push(x.shift()),x.length>0&&i.push(x.pop()),i.push.apply(i,x),i}function Jl(c,o,t){return c.some(function(i){return t(i,o)})}function Wr(c,o,t){t===void 0&&(t=0);var i=Math.max(0,Math.min(c.x+c.width+t,o.x+o.width+t)-Math.max(c.x-t,o.x-t)),x=Math.max(0,Math.min(c.y+c.height+t,o.y+o.height+t)-Math.max(c.y-t,o.y-t));return i*x}function Oc(c,o){return Jl(c,o,function(t,i){var x=I(t),R=I(i);return Wr(x.getCanvasBBox(),R.getCanvasBBox(),2)>0})}function Ql(c,o,t,i,x){var R,nt;if(t.length!==0){var Mt=(R=t[0])===null||R===void 0?void 0:R.get("element"),Lt=Mt==null?void 0:Mt.geometry;if(!(!Lt||["path","line","area"].indexOf(Lt.type)<0)){var ne=Lt.getXYFields(),ge=ne[0],be=ne[1],Ae=Object(a.groupBy)(o,function(gn){return gn.get("data")[ge]}),We=[],an=x&&x.offset||((nt=c[0])===null||nt===void 0?void 0:nt.offset)||12;Object(a.map)(Object(a.keys)(Ae).reverse(),function(gn){for(var Yn=Lh(Lt,Ae[gn]);Yn.length;){var Hn=Yn.shift(),ir=I(Hn);if(Jl(We,Hn,function(zr,Ur){return zr.get("data")[ge]===Ur.get("data")[ge]&&zr.get("data")[be]===Ur.get("data")[be]})){ir.set("visible",!1);continue}var cr=Oc(We,Hn),kr=!1;if(cr&&(ir.attr("y",ir.attr("y")+2*an),kr=Oc(We,Hn)),kr){ir.set("visible",!1);continue}We.push(Hn)}})}}}var Nu;function Zl(){return Nu||(Nu=document.createElement("canvas").getContext("2d")),Nu}var Qs=Object(a.memoize)(function(c,o){o===void 0&&(o={});var t=o.fontSize,i=o.fontFamily,x=o.fontWeight,R=o.fontStyle,nt=o.fontVariant,Mt=Zl();return Mt.font=[R,nt,x,t+"px",i].join(" "),Mt.measureText(Object(a.isString)(c)?c:"").width},function(c,o){return o===void 0&&(o={}),Object(rt.d)([c],Object(a.values)(o)).join("")}),$l=function(o,t,i){var x=16,R=Qs("...",i),nt;Object(a.isString)(o)?nt=o:nt=Object(a.toString)(o);var Mt=t,Lt=[],ne,ge;if(Qs(o,i)<=t)return o;for(;ne=nt.substr(0,x),ge=Qs(ne,i),!(ge+R>Mt&&ge>Mt);)if(Lt.push(ne),Mt-=ge,nt=nt.substr(x),!nt)return Lt.join("");for(;ne=nt.substr(0,1),ge=Qs(ne,i),!(ge+R>Mt);)if(Lt.push(ne),Mt-=ge,nt=nt.substr(1),!nt)return Lt.join("");return Lt.join("")+"..."};function ql(c,o,t,i,x){if(!(o.length<=0)){var R=(x==null?void 0:x.direction)||["top","right","bottom","left"],nt=(x==null?void 0:x.action)||"translate",Mt=(x==null?void 0:x.margin)||0,Lt=o[0].get("coordinate");if(!!Lt){var ne=ar(Lt,Mt),ge=ne.minX,be=ne.minY,Ae=ne.maxX,We=ne.maxY;Object(a.each)(o,function(an){var gn=an.getCanvasBBox(),Yn=gn.minX,Hn=gn.minY,ir=gn.maxX,cr=gn.maxY,kr=gn.x,zr=gn.y,Ur=gn.width,Ri=gn.height,Ai=kr,mi=zr;if(R.indexOf("left")>=0&&(Yn<ge||ir<ge)&&(Ai=ge),R.indexOf("top")>=0&&(Hn<be||cr<be)&&(mi=be),R.indexOf("right")>=0&&(Yn>Ae?Ai=Ae-Ur:ir>Ae&&(Ai=Ai-(ir-Ae))),R.indexOf("bottom")>=0&&(Hn>We?mi=We-Ri:cr>We&&(mi=mi-(cr-We))),Ai!==kr||mi!==zr){var Ki=Ai-kr;if(nt==="translate")Ta(an,Ki,mi-zr);else if(nt==="ellipsis"){var vo=an.findAll(function(po){return po.get("type")==="text"});vo.forEach(function(po){var yo=Object(a.pick)(po.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),wo=po.getCanvasBBox(),Q=$l(po.attr("text"),wo.width-Math.abs(Ki),yo);po.attr("text",Q)})}else an.hide()}})}}}function tf(c,o,t){var i={fillOpacity:Object(a.isNil)(c.attr("fillOpacity"))?1:c.attr("fillOpacity"),strokeOpacity:Object(a.isNil)(c.attr("strokeOpacity"))?1:c.attr("strokeOpacity"),opacity:Object(a.isNil)(c.attr("opacity"))?1:c.attr("opacity")};c.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),c.animate(i,o)}function ef(c,o,t){var i={fillOpacity:0,strokeOpacity:0,opacity:0},x=o.easing,R=o.duration,nt=o.delay;c.animate(i,R,x,function(){c.remove(!0)},nt)}function nf(c,o,t){var i,x=o[0],R=o[1];return c.applyToMatrix([x,R,1]),t==="x"?(c.setMatrix(jr.a.transform(c.getMatrix(),[["t",-x,-R],["s",.01,1],["t",x,R]])),i=jr.a.transform(c.getMatrix(),[["t",-x,-R],["s",100,1],["t",x,R]])):t==="y"?(c.setMatrix(jr.a.transform(c.getMatrix(),[["t",-x,-R],["s",1,.01],["t",x,R]])),i=jr.a.transform(c.getMatrix(),[["t",-x,-R],["s",1,100],["t",x,R]])):t==="xy"&&(c.setMatrix(jr.a.transform(c.getMatrix(),[["t",-x,-R],["s",.01,.01],["t",x,R]])),i=jr.a.transform(c.getMatrix(),[["t",-x,-R],["s",100,100],["t",x,R]])),i}function Ya(c,o,t,i,x){var R=t.start,nt=t.end,Mt=t.getWidth(),Lt=t.getHeight(),ne,ge;x==="y"?(ne=R.x+Mt/2,ge=i.y<R.y?i.y:R.y):x==="x"?(ne=i.x>R.x?i.x:R.x,ge=R.y+Lt/2):x==="xy"&&(t.isPolar?(ne=t.getCenter().x,ge=t.getCenter().y):(ne=(R.x+nt.x)/2,ge=(R.y+nt.y)/2));var be=nf(c,[ne,ge],x);c.animate({matrix:be},o)}function rf(c,o,t){var i=t.coordinate,x=t.minYPoint;Ya(c,o,i,x,"x")}function of(c,o,t){var i=t.coordinate,x=t.minYPoint;Ya(c,o,i,x,"y")}function af(c,o,t){var i=t.coordinate,x=t.minYPoint;Ya(c,o,i,x,"xy")}function sf(c,o,t){var i=c.getTotalLength();c.attr("lineDash",[i]),c.animate(function(x){return{lineDashOffset:(1-x)*i}},o)}function Lu(c,o,t){var i=t.toAttrs,x=i.x,R=i.y;delete i.x,delete i.y,c.attr(i),c.animate({x,y:R},o)}function uf(c,o,t){var i=c.getBBox(),x=c.get("origin").mappingData,R=x.points,nt=R[0].y-R[1].y>0?i.maxX:i.minX,Mt=(i.minY+i.maxY)/2;c.applyToMatrix([nt,Mt,1]);var Lt=jr.a.transform(c.getMatrix(),[["t",-nt,-Mt],["s",.01,1],["t",nt,Mt]]);c.setMatrix(Lt),c.animate({matrix:jr.a.transform(c.getMatrix(),[["t",-nt,-Mt],["s",100,1],["t",nt,Mt]])},o)}function Pa(c,o,t){var i=c.getBBox(),x=c.get("origin").mappingData,R=(i.minX+i.maxX)/2,nt=x.points,Mt=nt[0].y-nt[1].y<=0?i.maxY:i.minY;c.applyToMatrix([R,Mt,1]);var Lt=jr.a.transform(c.getMatrix(),[["t",-R,-Mt],["s",1,.01],["t",R,Mt]]);c.setMatrix(Lt),c.animate({matrix:jr.a.transform(c.getMatrix(),[["t",-R,-Mt],["s",1,100],["t",R,Mt]])},o)}function Es(c,o){var t,i=Object(lo.getArcParams)(c,o),x=i.startAngle,R=i.endAngle;return!Object(a.isNumberEqual)(x,-Math.PI*.5)&&x<-Math.PI*.5&&(x+=Math.PI*2),!Object(a.isNumberEqual)(R,-Math.PI*.5)&&R<-Math.PI*.5&&(R+=Math.PI*2),o[5]===0&&(t=[R,x],x=t[0],R=t[1]),Object(a.isNumberEqual)(x,Math.PI*1.5)&&(x=Math.PI*-.5),Object(a.isNumberEqual)(R,Math.PI*-.5)&&(R=Math.PI*1.5),{startAngle:x,endAngle:R}}function xa(c){var o;return c[0]==="M"||c[0]==="L"?o=[c[1],c[2]]:(c[0]==="a"||c[0]==="A")&&(o=[c[c.length-2],c[c.length-1]]),o}function qo(c){var o,t,i,x=c.filter(function(cr){return cr[0]==="A"||cr[0]==="a"}),R=x[0],nt=x.length>1?x[1]:x[0],Mt=c.indexOf(R),Lt=c.indexOf(nt),ne=xa(c[Mt-1]),ge=xa(c[Lt-1]),be=Es(ne,R),Ae=be.startAngle,We=be.endAngle,an=Es(ge,nt),gn=an.startAngle,Yn=an.endAngle;Object(a.isNumberEqual)(Ae,gn)&&Object(a.isNumberEqual)(We,Yn)?(t=Ae,i=We):(t=Math.min(Ae,gn),i=Math.max(We,Yn));var Hn=R[1],ir=x[x.length-1][1];return Hn<ir?(o=[ir,Hn],Hn=o[0],ir=o[1]):Hn===ir&&(ir=0),{startAngle:t,endAngle:i,radius:Hn,innerRadius:ir}}function Zs(c,o,t){var i=t.toAttrs,x=t.coordinate,R=i.path||[],nt=R.map(function(ir){return ir[0]});if(!(R.length<1)){var Mt=qo(R),Lt=Mt.startAngle,ne=Mt.endAngle,ge=Mt.radius,be=Mt.innerRadius,Ae=qo(c.attr("path")),We=Ae.startAngle,an=Ae.endAngle,gn=x.getCenter(),Yn=Lt-We,Hn=ne-an;c.animate(function(ir){var cr=We+ir*Yn,kr=an+ir*Hn;return Object(rt.a)(Object(rt.a)({},i),{path:Object(a.isEqual)(nt,["M","A","A","Z"])?Mo(gn.x,gn.y,ge,cr,kr):no(gn.x,gn.y,ge,cr,kr,be)})},Object(rt.a)(Object(rt.a)({},o),{callback:function(){c.attr("path",R)}}))}}function Xa(c,o,t){var i=vr(t.coordinate,20),x=i.type,R=i.startState,nt=i.endState,Mt=c.setClip({type:x,attrs:R});Mt.animate(nt,Object(rt.a)(Object(rt.a)({},o),{callback:function(){c&&!c.get("destroyed")&&c.set("clipShape",null),Mt.remove(!0)}}))}function os(c,o,t){if(c.isGroup())Object(a.each)(c.getChildren(),function(Mt){os(Mt,o,t)});else{var i=c.getBBox(),x=(i.minX+i.maxX)/2,R=(i.minY+i.maxY)/2;if(c.applyToMatrix([x,R,1]),t==="zoomIn"){var nt=jr.a.transform(c.getMatrix(),[["t",-x,-R],["s",.01,.01],["t",x,R]]);c.setMatrix(nt),c.animate({matrix:jr.a.transform(c.getMatrix(),[["t",-x,-R],["s",100,100],["t",x,R]])},o)}else c.animate({matrix:jr.a.transform(c.getMatrix(),[["t",-x,-R],["s",.01,.01],["t",x,R]])},Object(rt.a)(Object(rt.a)({},o),{callback:function(){c.remove(!0)}}))}}function Bu(c,o,t){os(c,o,"zoomIn")}function Oa(c,o,t){os(c,o,"zoomOut")}function Ko(c){return[e.TOP,e.BOTTOM].includes(c)?{offsetX:0,offsetY:c===e.TOP?-8:8,style:{textAlign:"center",textBaseline:c===e.TOP?"bottom":"top"}}:[e.LEFT,e.RIGHT].includes(c)?{offsetX:c===e.LEFT?-8:8,offsetY:0,style:{textAlign:c===e.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function Bo(c,o,t){return{x:c.x+o*Math.cos(t),y:c.y+o*Math.sin(t)}}var Sa=function(c){Object(rt.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getDefaultCfg=function(){return Object(a.deepMix)({},c.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:c.prototype.getDefaultTitleCfg.call(this)})},o.prototype.render=function(){c.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.getRegion=function(t,i){var x=1/2,R={x:.5,y:.5},nt=Math.PI*2/t,Mt=-1*Math.PI/2+nt*i,Lt=x/(1+1/Math.sin(nt/2)),ne=Bo(R,x-Lt,Mt),ge=Math.PI*5/4,be=Math.PI*1/4;return{start:Bo(ne,Lt,ge),end:Bo(ne,Lt,be)}},o.prototype.afterEachView=function(t,i){this.processAxis(t,i)},o.prototype.beforeEachView=function(t,i){},o.prototype.generateFacets=function(t){var i=this,x=this.cfg,R=x.fields,nt=x.type,Mt=R[0];if(!Mt)throw new Error("No `fields` specified!");var Lt=this.getFieldValues(t,Mt),ne=Lt.length,ge=[];return Lt.forEach(function(be,Ae){var We=[{field:Mt,value:be,values:Lt}],an=Object(a.filter)(t,i.getFacetDataFilter(We)),gn={type:nt,data:an,region:i.getRegion(ne,Ae),columnValue:be,columnField:Mt,columnIndex:Ae,columnValuesLength:ne,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};ge.push(gn)}),ge},o.prototype.getXAxisOption=function(t,i,x,R){return x},o.prototype.getYAxisOption=function(t,i,x,R){return x},o.prototype.renderTitle=function(){var t=this;Object(a.each)(this.facets,function(i){var x=i.columnValue,R=i.view,nt=Object(a.get)(t.cfg.title,"formatter"),Mt=Object(a.deepMix)({position:["50%","0%"],content:nt?nt(x):x},Ko(e.TOP),t.cfg.title);R.annotation().text(Mt)})},o}(Di),wa=Sa,Fu=function(c){Object(rt.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getDefaultCfg=function(){return Object(a.deepMix)({},c.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:c.prototype.getDefaultTitleCfg.call(this)})},o.prototype.render=function(){c.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.afterEachView=function(t,i){this.processAxis(t,i)},o.prototype.beforeEachView=function(t,i){},o.prototype.generateFacets=function(t){var i=this,x=this.cfg.fields,R=this.cfg.cols,nt=x[0];if(!nt)throw new Error("No `fields` specified!");var Mt=this.getFieldValues(t,nt),Lt=Mt.length;R=R||Lt;var ne=this.getPageCount(Lt,R),ge=[];return Mt.forEach(function(be,Ae){var We=i.getRowCol(Ae,R),an=We.row,gn=We.col,Yn=[{field:nt,value:be,values:Mt}],Hn=Object(a.filter)(t,i.getFacetDataFilter(Yn)),ir={type:i.cfg.type,data:Hn,region:i.getRegion(ne,R,gn,an),columnValue:be,rowValue:be,columnField:nt,rowField:null,columnIndex:gn,rowIndex:an,columnValuesLength:R,rowValuesLength:ne,total:Lt};ge.push(ir)}),ge},o.prototype.getXAxisOption=function(t,i,x,R){return R.rowIndex!==R.rowValuesLength-1&&R.columnValuesLength*R.rowIndex+R.columnIndex+1+R.columnValuesLength<=R.total?Object(rt.a)(Object(rt.a)({},x),{label:null,title:null}):x},o.prototype.getYAxisOption=function(t,i,x,R){return R.columnIndex!==0?Object(rt.a)(Object(rt.a)({},x),{title:null,label:null}):x},o.prototype.renderTitle=function(){var t=this;Object(a.each)(this.facets,function(i){var x=i.columnValue,R=i.view,nt=Object(a.get)(t.cfg.title,"formatter"),Mt=Object(a.deepMix)({position:["50%","0%"],content:nt?nt(x):x},Ko(e.TOP),t.cfg.title);R.annotation().text(Mt)})},o.prototype.getPageCount=function(t,i){return Math.floor((t+i-1)/i)},o.prototype.getRowCol=function(t,i){var x=Math.floor(t/i),R=t%i;return{row:x,col:R}},o}(Di),cf=Fu,Ha=function(c){Object(rt.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getDefaultCfg=function(){return Object(a.deepMix)({},c.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:Object(rt.a)({},c.prototype.getDefaultTitleCfg.call(this)),rowTitle:Object(rt.a)({},c.prototype.getDefaultTitleCfg.call(this))})},o.prototype.render=function(){c.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.afterEachView=function(t,i){this.processAxis(t,i)},o.prototype.beforeEachView=function(t,i){},o.prototype.generateFacets=function(t){for(var i=this.cfg,x=i.fields,R=i.type,nt=x.length,Mt=nt,Lt=[],ne=0;ne<Mt;ne++)for(var ge=x[ne],be=0;be<nt;be++){var Ae=x[be],We={type:R,data:t,region:this.getRegion(nt,Mt,ne,be),columnValue:ge,rowValue:Ae,columnField:ge,rowField:Ae,columnIndex:ne,rowIndex:be,columnValuesLength:Mt,rowValuesLength:nt};Lt.push(We)}return Lt},o.prototype.getXAxisOption=function(t,i,x,R){return R.rowIndex!==R.rowValuesLength-1?Object(rt.a)(Object(rt.a)({},x),{label:null,title:null}):x},o.prototype.getYAxisOption=function(t,i,x,R){return R.columnIndex!==0?Object(rt.a)(Object(rt.a)({},x),{title:null,label:null}):x},o.prototype.renderTitle=function(){var t=this;Object(a.each)(this.facets,function(i,x){var R=i.columnIndex,nt=i.rowIndex,Mt=i.columnValuesLength,Lt=i.rowValuesLength,ne=i.columnValue,ge=i.rowValue,be=i.view;if(nt===0){var Ae=Object(a.get)(t.cfg.columnTitle,"formatter"),We=Object(a.deepMix)({position:["50%","0%"],content:Ae?Ae(ne):ne},Ko(e.TOP),t.cfg.columnTitle);be.annotation().text(We)}if(R===Mt-1){var Ae=Object(a.get)(t.cfg.rowTitle,"formatter"),We=Object(a.deepMix)({position:["100%","50%"],content:Ae?Ae(ge):ge},Ko(e.RIGHT),t.cfg.rowTitle);be.annotation().text(We)}})},o}(Di),Bh=Ha,Fh=function(c){Object(rt.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getDefaultCfg=function(){return Object(a.deepMix)({},c.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:c.prototype.getDefaultTitleCfg.call(this),transpose:!1})},o.prototype.render=function(){c.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.beforeEachView=function(t,i){this.cfg.transpose?i.columnIndex%2==0?t.coordinate().transpose().reflect("x"):t.coordinate().transpose():i.rowIndex%2!=0&&t.coordinate().reflect("y")},o.prototype.afterEachView=function(t,i){this.processAxis(t,i)},o.prototype.generateFacets=function(t){var i=this,x=this.cfg.fields[0],R=[],nt=1,Mt=1,Lt=[""],ne=[""],ge,be;return this.cfg.transpose?(ge=x,Lt=this.getFieldValues(t,ge).slice(0,2),nt=Lt.length):(be=x,ne=this.getFieldValues(t,be).slice(0,2),Mt=ne.length),Lt.forEach(function(Ae,We){ne.forEach(function(an,gn){var Yn=[{field:ge,value:Ae,values:Lt},{field:be,value:an,values:ne}],Hn=Object(a.filter)(t,i.getFacetDataFilter(Yn)),ir={type:i.cfg.type,data:Hn,region:i.getRegion(Mt,nt,We,gn),columnValue:Ae,rowValue:an,columnField:ge,rowField:be,columnIndex:We,rowIndex:gn,columnValuesLength:nt,rowValuesLength:Mt};R.push(ir)})}),R},o.prototype.getXAxisOption=function(t,i,x,R){return R.columnIndex===1||R.rowIndex===1?Object(rt.a)(Object(rt.a)({},x),{label:null,title:null}):x},o.prototype.getYAxisOption=function(t,i,x,R){return x},o.prototype.renderTitle=function(){var t=this;Object(a.each)(this.facets,function(i,x){var R=i.columnValue,nt=i.rowValue,Mt=i.view,Lt=Object(a.get)(t.cfg.title,"formatter");if(t.cfg.transpose){var ne=Object(a.deepMix)({position:["50%","0%"],content:Lt?Lt(R):R},Ko(e.TOP),t.cfg.title);Mt.annotation().text(ne)}else{var ne=Object(a.deepMix)({position:["100%","50%"],content:Lt?Lt(nt):nt},Ko(e.RIGHT),t.cfg.title);Mt.annotation().text(ne)}})},o}(Di),Gh=Fh,_h=function(c){Object(rt.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.afterEachView=function(t,i){this.processAxis(t,i)},o.prototype.beforeEachView=function(t,i){},o.prototype.getDefaultCfg=function(){return Object(a.deepMix)({},c.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:Object(rt.a)({},c.prototype.getDefaultTitleCfg.call(this)),rowTitle:Object(rt.a)({},c.prototype.getDefaultTitleCfg.call(this))})},o.prototype.render=function(){c.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.generateFacets=function(t){var i=this,x=this.cfg.fields,R=x[0],nt=x[1],Mt=[],Lt=1,ne=1,ge=[""],be=[""];return R&&(ge=this.getFieldValues(t,R),Lt=ge.length),nt&&(be=this.getFieldValues(t,nt),ne=be.length),ge.forEach(function(Ae,We){be.forEach(function(an,gn){var Yn=[{field:R,value:Ae,values:ge},{field:nt,value:an,values:be}],Hn=Object(a.filter)(t,i.getFacetDataFilter(Yn)),ir={type:i.cfg.type,data:Hn,region:i.getRegion(ne,Lt,We,gn),columnValue:Ae,rowValue:an,columnField:R,rowField:nt,columnIndex:We,rowIndex:gn,columnValuesLength:Lt,rowValuesLength:ne};Mt.push(ir)})}),Mt},o.prototype.renderTitle=function(){var t=this;Object(a.each)(this.facets,function(i,x){var R=i.columnIndex,nt=i.rowIndex,Mt=i.columnValuesLength,Lt=i.columnValue,ne=i.rowValue,ge=i.view;if(nt===0){var be=Object(a.get)(t.cfg.columnTitle,"formatter"),Ae=Object(a.deepMix)({position:["50%","0%"],content:be?be(Lt):Lt},Ko(e.TOP),t.cfg.columnTitle);ge.annotation().text(Ae)}if(R===Mt-1){var be=Object(a.get)(t.cfg.rowTitle,"formatter"),Ae=Object(a.deepMix)({position:["100%","50%"],content:be?be(ne):ne},Ko(e.RIGHT),t.cfg.rowTitle);ge.annotation().text(Ae)}})},o.prototype.getXAxisOption=function(t,i,x,R){return R.rowIndex!==R.rowValuesLength-1?Object(rt.a)(Object(rt.a)({},x),{title:null,label:null}):R.columnIndex!==Math.floor((R.columnValuesLength-1)/2)?Object(rt.a)(Object(rt.a)({},x),{title:null}):x},o.prototype.getYAxisOption=function(t,i,x,R){return R.columnIndex!==0?Object(rt.a)(Object(rt.a)({},x),{title:null,label:null}):R.rowIndex!==Math.floor((R.rowValuesLength-1)/2)?Object(rt.a)(Object(rt.a)({},x),{title:null}):x},o}(Di),lf=_h,Sc=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.afterChartRender=function(){t.facets&&t.cfg.line&&(t.container.clear(),t.drawLines(t.facets))},t}return o.prototype.afterEachView=function(t,i){this.processAxis(t,i)},o.prototype.beforeEachView=function(t,i){},o.prototype.init=function(){c.prototype.init.call(this),this.view.on(b.AFTER_RENDER,this.afterChartRender)},o.prototype.getDefaultCfg=function(){return Object(a.deepMix)({},c.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:c.prototype.getDefaultTitleCfg.call(this)})},o.prototype.generateFacets=function(t){var i=this.cfg.fields;if(!i.length)throw new Error("Please specify for the fields for rootFacet!");var x=[],R={type:this.cfg.type,data:t,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return x.push(R),R.children=this.getChildFacets(t,1,x),this.setRegion(x),x},o.prototype.setRegion=function(t){var i=this;this.forceColIndex(t),t.forEach(function(x){x.region=i.getRegion(x.rowValuesLength,x.columnValuesLength,x.columnIndex,x.rowIndex)})},o.prototype.getRegion=function(t,i,x,R){var nt=1/i,Mt=1/t,Lt={x:nt*x,y:Mt*R},ne={x:Lt.x+nt,y:Lt.y+Mt*2/3};return{start:Lt,end:ne}},o.prototype.forceColIndex=function(t){var i=this,x=[],R=0;t.forEach(function(Ae){i.isLeaf(Ae)&&(x.push(Ae),Ae.columnIndex=R,R++)}),x.forEach(function(Ae){Ae.columnValuesLength=x.length});for(var nt=this.cfg.fields.length,Mt=nt-1;Mt>=0;Mt--)for(var Lt=this.getFacetsByLevel(t,Mt),ne=0,ge=Lt;ne<ge.length;ne++){var be=ge[ne];this.isLeaf(be)||(be.originColIndex=be.columnIndex,be.columnIndex=this.getRegionIndex(be.children),be.columnValuesLength=x.length)}},o.prototype.getFacetsByLevel=function(t,i){var x=[];return t.forEach(function(R){R.rowIndex===i&&x.push(R)}),x},o.prototype.getRegionIndex=function(t){var i=t[0],x=t[t.length-1];return(x.columnIndex-i.columnIndex)/2+i.columnIndex},o.prototype.isLeaf=function(t){return!t.children||!t.children.length},o.prototype.getRows=function(){return this.cfg.fields.length+1},o.prototype.getChildFacets=function(t,i,x){var R=this,nt=this.cfg.fields,Mt=nt.length;if(!(Mt<i)){var Lt=[],ne=nt[i-1],ge=this.getFieldValues(t,ne);return ge.forEach(function(be,Ae){var We=[{field:ne,value:be,values:ge}],an=t.filter(R.getFacetDataFilter(We));if(an.length){var gn={type:R.cfg.type,data:an,region:null,columnValue:be,rowValue:"",columnField:ne,rowField:"",columnIndex:Ae,rowValuesLength:R.getRows(),columnValuesLength:1,rowIndex:i,children:R.getChildFacets(an,i+1,x)};Lt.push(gn),x.push(gn)}}),Lt}},o.prototype.render=function(){c.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.renderTitle=function(){var t=this;Object(a.each)(this.facets,function(i){var x=i.columnValue,R=i.view,nt=Object(a.get)(t.cfg.title,"formatter"),Mt=Object(a.deepMix)({position:["50%","0%"],content:nt?nt(x):x},Ko(e.TOP),t.cfg.title);R.annotation().text(Mt)})},o.prototype.drawLines=function(t){var i=this;t.forEach(function(x){if(!i.isLeaf(x)){var R=x.children;i.addFacetLines(x,R)}})},o.prototype.addFacetLines=function(t,i){var x=this,R=t.view,nt=R.coordinateBBox,Mt={x:nt.x+nt.width/2,y:nt.y+nt.height};i.forEach(function(Lt){var ne=Lt.view.coordinateBBox,ge={x:ne.bl.x+(ne.tr.x-ne.bl.x)/2,y:ne.tr.y},be={x:Mt.x,y:Mt.y+(ge.y-Mt.y)/2},Ae={x:ge.x,y:be.y};x.drawLine([Mt,be,Ae,ge])})},o.prototype.getPath=function(t){var i=[],x=this.cfg.line.smooth;return x?(i.push(["M",t[0].x,t[0].y]),i.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y])):t.forEach(function(R,nt){nt===0?i.push(["M",R.x,R.y]):i.push(["L",R.x,R.y])}),i},o.prototype.drawLine=function(t){var i=this.getPath(t),x=this.cfg.line.style;this.container.addShape("path",{attrs:Object(a.assign)({path:i},x)})},o.prototype.getXAxisOption=function(t,i,x,R){return R.rowIndex!==R.rowValuesLength-1?Object(rt.a)(Object(rt.a)({},x),{title:null,label:null}):x},o.prototype.getYAxisOption=function(t,i,x,R){return R.originColIndex!==0&&R.columnIndex!==0?Object(rt.a)(Object(rt.a)({},x),{title:null,label:null}):x},o}(Di),Uh=Sc;function ff(c){var o=Object(rt.d)(c);o.sort(function(i,x){return i-x});var t=o.length;return t===0?0:t%2==1?o[(t-1)/2]:(o[t/2]+o[t/2-1])/2}function hf(c){var o=Object(a.reduce)(c,function(t,i){return t+=isNaN(i)||!Object(a.isNumber)(i)?0:i},0);return c.length===0?0:o/c.length}function $s(c,o){var t;switch(c){case"start":return 0;case"end":return 1;case"median":{t=o.isCategory?ff(o.values.map(function(i,x){return x})):ff(o.values);break}case"mean":{t=o.isCategory?(o.values.length-1)/2:hf(o.values);break}case"min":t=o.isCategory?0:o[c];break;case"max":t=o.isCategory?o.values.length-1:o[c];break;default:t=c;break}return o.scale(t)}var Gu=["regionFilter","shape"],zh=function(c){Object(rt.b)(o,c);function o(t){var i=c.call(this,t)||this;return i.cache=new Map,i.foregroundContainer=i.view.getLayer(E.FORE).addGroup(),i.backgroundContainer=i.view.getLayer(E.BG).addGroup(),i.option=[],i}return Object.defineProperty(o.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.layout=function(){this.update()},o.prototype.render=function(){},o.prototype.update=function(){var t=this;this.onAfterRender(function(){var x=new Map;Object(a.each)(t.option,function(R){if(Object(a.includes)(Gu,R.type)){var nt=t.updateOrCreate(R);nt&&x.set(t.getCacheKey(R),nt)}}),t.cache=t.syncCache(x)});var i=new Map;Object(a.each)(this.option,function(x){if(!Object(a.includes)(Gu,x.type)){var R=t.updateOrCreate(x);R&&i.set(t.getCacheKey(x),R)}}),this.cache=this.syncCache(i)},o.prototype.clear=function(t){t===void 0&&(t=!1),c.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),t&&(this.option=[])},o.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},o.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(i){t.push(i)}),t},o.prototype.clearComponents=function(){this.getComponents().forEach(function(t){t.component.destroy()}),this.cache.clear()},o.prototype.onAfterRender=function(t){this.view.getOptions().animate?this.view.geometries.forEach(function(i){i.animateOption&&i.once(S.AFTER_DRAW_ANIMATE,function(){t()})}):this.view.getRootView().once(b.AFTER_RENDER,function(){t()})},o.prototype.createAnnotation=function(t){var i=t.type,x=Qr.Annotation[Object(a.upperFirst)(i)];if(x){var R=this.getAnnotationTheme(i),nt=this.getAnnotationCfg(i,t,R),Mt=new x(nt);return{component:Mt,layer:this.isTop(nt)?E.FORE:E.BG,direction:e.NONE,type:r.ANNOTATION,extra:t}}},o.prototype.annotation=function(t){this.option.push(t)},o.prototype.arc=function(t){return this.annotation(Object(rt.a)({type:"arc"},t)),this},o.prototype.image=function(t){return this.annotation(Object(rt.a)({type:"image"},t)),this},o.prototype.line=function(t){return this.annotation(Object(rt.a)({type:"line"},t)),this},o.prototype.region=function(t){return this.annotation(Object(rt.a)({type:"region"},t)),this},o.prototype.text=function(t){return this.annotation(Object(rt.a)({type:"text"},t)),this},o.prototype.dataMarker=function(t){return this.annotation(Object(rt.a)({type:"dataMarker"},t)),this},o.prototype.dataRegion=function(t){this.annotation(Object(rt.a)({type:"dataRegion"},t))},o.prototype.regionFilter=function(t){this.annotation(Object(rt.a)({type:"regionFilter"},t))},o.prototype.shape=function(t){this.annotation(Object(rt.a)({type:"shape"},t))},o.prototype.html=function(t){this.annotation(Object(rt.a)({type:"html"},t))},o.prototype.parsePosition=function(t){var i=this.view.getXScale(),x=this.view.getScalesByDim("y"),R=Object(a.isFunction)(t)?t.call(null,i,x):t,nt=0,Mt=0;if(Object(a.isArray)(R)){var Lt=R[0],ne=R[1];if(Object(a.isString)(Lt)&&Lt.indexOf("%")!==-1&&!isNaN(Lt.slice(0,-1)))return this.parsePercentPosition(R);nt=$s(Lt,i),Mt=$s(ne,Object.values(x)[0])}else if(!Object(a.isNil)(R))for(var ge=0,be=Object(a.keys)(R);ge<be.length;ge++){var Ae=be[ge],We=R[Ae];Ae===i.field&&(nt=$s(We,i)),x[Ae]&&(Mt=$s(We,x[Ae]))}return this.view.getCoordinate().convert({x:nt,y:Mt})},o.prototype.getRegionPoints=function(t,i){var x=this,R=this.view.getXScale(),nt=this.view.getScalesByDim("y"),Mt=Object.values(nt)[0],Lt=R.field,ne=this.view.getData(),ge=Object(a.isArray)(t)?t[0]:t[Lt],be=Object(a.isArray)(i)?i[0]:i[Lt],Ae=[],We;return Object(a.each)(ne,function(an,gn){if(an[Lt]===ge&&(We=gn),gn>=We){var Yn=x.parsePosition([an[Lt],an[Mt.field]]);Yn&&Ae.push(Yn)}if(an[Lt]===be)return!1}),Ae},o.prototype.parsePercentPosition=function(t){var i=parseFloat(t[0])/100,x=parseFloat(t[1])/100,R=this.view.getCoordinate(),nt=R.start,Mt=R.end,Lt={x:Math.min(nt.x,Mt.x),y:Math.min(nt.y,Mt.y)},ne=R.getWidth()*i+Lt.x,ge=R.getHeight()*x+Lt.y;return{x:ne,y:ge}},o.prototype.getCoordinateBBox=function(){var t=this.view.getCoordinate(),i=t.start,x=t.end,R=t.getWidth(),nt=t.getHeight(),Mt={x:Math.min(i.x,x.x),y:Math.min(i.y,x.y)};return{x:Mt.x,y:Mt.y,minX:Mt.x,minY:Mt.y,maxX:Mt.x+R,maxY:Mt.y+nt,width:R,height:nt}},o.prototype.getAnnotationCfg=function(t,i,x){var R=this,nt=this.view.getCoordinate(),Mt=this.view.getCanvas(),Lt={};if(Object(a.isNil)(i))return null;if(t==="arc"){var ne=i,ge=ne.start,be=ne.end,Ae=this.parsePosition(ge),We=this.parsePosition(be),an=$n(nt,Ae),gn=$n(nt,We);an>gn&&(gn=Math.PI*2+gn),Lt={center:nt.getCenter(),radius:rn(nt,Ae),startAngle:an,endAngle:gn}}else if(t==="image"){var Yn=i,ge=Yn.start,be=Yn.end;Lt={start:this.parsePosition(ge),end:this.parsePosition(be),src:i.src}}else if(t==="line"){var Hn=i,ge=Hn.start,be=Hn.end;Lt={start:this.parsePosition(ge),end:this.parsePosition(be),text:Object(a.get)(i,"text",null)}}else if(t==="region"){var ir=i,ge=ir.start,be=ir.end;Lt={start:this.parsePosition(ge),end:this.parsePosition(be)}}else if(t==="text"){var cr=this.view.getData(),kr=i,zr=kr.position,Ur=kr.content,Ri=Object(rt.c)(kr,["position","content"]),Ai=Ur;Object(a.isFunction)(Ur)&&(Ai=Ur(cr)),Lt=Object(rt.a)(Object(rt.a)(Object(rt.a)({},this.parsePosition(zr)),Ri),{content:Ai})}else if(t==="dataMarker"){var mi=i,zr=mi.position,Ki=mi.point,vo=mi.line,po=mi.text,yo=mi.autoAdjust,wo=mi.direction;Lt=Object(rt.a)(Object(rt.a)({},this.parsePosition(zr)),{coordinateBBox:this.getCoordinateBBox(),point:Ki,line:vo,text:po,autoAdjust:yo,direction:wo})}else if(t==="dataRegion"){var Q=i,ge=Q.start,be=Q.end,U=Q.region,po=Q.text,w=Q.lineLength;Lt={points:this.getRegionPoints(ge,be),region:U,text:po,lineLength:w}}else if(t==="regionFilter"){var L=i,ge=L.start,be=L.end,J=L.apply,It=L.color,Nt=this.view.geometries,K=[],Pt=function yn(Pn){!Pn||(Pn.isGroup()?Pn.getChildren().forEach(function(En){return yn(En)}):K.push(Pn))};Object(a.each)(Nt,function(yn){J?Object(a.contains)(J,yn.type)&&Object(a.each)(yn.elements,function(Pn){Pt(Pn.shape)}):Object(a.each)(yn.elements,function(Pn){Pt(Pn.shape)})}),Lt={color:It,shapes:K,start:this.parsePosition(ge),end:this.parsePosition(be)}}else if(t==="shape"){var Qt=i,qt=Qt.render,xe=Object(rt.c)(Qt,["render"]),Ie=function(qe){if(Object(a.isFunction)(i.render))return qt(qe,R.view,{parsePosition:R.parsePosition.bind(R)})};Lt=Object(rt.a)(Object(rt.a)({},xe),{render:Ie})}else if(t==="html"){var Ye=i,Ne=Ye.html,zr=Ye.position,xe=Object(rt.c)(Ye,["html","position"]),Xe=function(Pn){return Object(a.isFunction)(Ne)?Ne(Pn,R.view):Ne};Lt=Object(rt.a)(Object(rt.a)(Object(rt.a)({},xe),this.parsePosition(zr)),{parent:Mt.get("el").parentNode,html:Xe})}var Je=Object(a.deepMix)({},x,Object(rt.a)(Object(rt.a)({},Lt),{top:i.top,style:i.style,offsetX:i.offsetX,offsetY:i.offsetY}));return t!=="html"&&(Je.container=this.getComponentContainer(Je)),Je.animate=this.view.getOptions().animate&&Je.animate&&Object(a.get)(i,"animate",Je.animate),Je.animateOption=Object(a.deepMix)({},ma,Je.animateOption,i.animateOption),Je},o.prototype.isTop=function(t){return Object(a.get)(t,"top",!0)},o.prototype.getComponentContainer=function(t){return this.isTop(t)?this.foregroundContainer:this.backgroundContainer},o.prototype.getAnnotationTheme=function(t){return Object(a.get)(this.view.getTheme(),["components","annotation",t],{})},o.prototype.updateOrCreate=function(t){var i=this.cache.get(this.getCacheKey(t));if(i){var x=t.type,R=this.getAnnotationTheme(x),nt=this.getAnnotationCfg(x,t,R);te(nt,["container"]),i.component.update(nt),Object(a.includes)(Gu,t.type)&&i.component.render()}else i=this.createAnnotation(t),i&&(i.component.init(),Object(a.includes)(Gu,t.type)&&i.component.render());return i},o.prototype.syncCache=function(t){var i=this,x=new Map(this.cache);return t.forEach(function(R,nt){x.set(nt,R)}),x.forEach(function(R,nt){Object(a.find)(i.option,function(Mt){return nt===i.getCacheKey(Mt)})||(R.component.destroy(),x.delete(nt))}),x},o.prototype.getCacheKey=function(t){return t},o}(Do),df=zh;function qs(c,o){return Object(a.get)(c,["components","axis",o,"grid"],{})}function _u(c,o,t,i){var x=[],R=o.getTicks();return c.isPolar&&R.push({value:1,text:"",tickValue:""}),R.reduce(function(nt,Mt,Lt){var ne=Mt.value;if(i)x.push({points:[c.convert(t==="y"?{x:0,y:ne}:{x:ne,y:0}),c.convert(t==="y"?{x:1,y:ne}:{x:ne,y:1})]});else if(Lt){var ge=nt.value,be=(ge+ne)/2;x.push({points:[c.convert(t==="y"?{x:0,y:be}:{x:be,y:0}),c.convert(t==="y"?{x:1,y:be}:{x:be,y:1})]})}return Mt},R[0]),x}function Ka(c,o,t,i,x){var R=o.values.length,nt=[],Mt=t.getTicks();return Mt.reduce(function(Lt,ne){var ge=Lt?Lt.value:ne.value,be=ne.value,Ae=(ge+be)/2;return x==="x"?nt.push({points:[c.convert({x:i?be:Ae,y:0}),c.convert({x:i?be:Ae,y:1})]}):nt.push({points:Object(a.map)(Array(R+1),function(We,an){return c.convert({x:an/R,y:i?be:Ae})})}),ne},Mt[0]),nt}function vf(c,o){var t=Object(a.get)(o,"grid");if(t===null)return!1;var i=Object(a.get)(c,"grid");return!(t===void 0&&i===null)}var Ja=["container"],pf=Object(rt.a)(Object(rt.a)({},ma),{appear:null}),No=function(c){Object(rt.b)(o,c);function o(t){var i=c.call(this,t)||this;return i.cache=new Map,i.gridContainer=i.view.getLayer(E.BG).addGroup(),i.axisContainer=i.view.getLayer(E.BG).addGroup(),i}return Object.defineProperty(o.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.render=function(){this.update()},o.prototype.layout=function(){var t=this,i=this.view.getCoordinate();Object(a.each)(this.getComponents(),function(x){var R=x.component,nt=x.direction,Mt=x.type,Lt=x.extra,ne=Lt.dim,ge=Lt.scale,be=Lt.alignTick,Ae;if(Mt===r.AXIS)i.isPolar?ne==="x"?Ae=i.isTransposed?Pr(i,nt):Si(i):ne==="y"&&(Ae=i.isTransposed?Si(i):Pr(i,nt)):Ae=Pr(i,nt);else if(Mt===r.GRID)if(i.isPolar){var We=void 0;i.isTransposed?We=ne==="x"?Ka(i,t.view.getYScales()[0],ge,be,ne):_u(i,ge,ne,be):We=ne==="x"?_u(i,ge,ne,be):Ka(i,t.view.getXScale(),ge,be,ne),Ae={items:We,center:t.view.getCoordinate().getCenter()}}else Ae={items:_u(i,ge,ne,be)};R.update(Ae)})},o.prototype.update=function(){this.option=this.view.getOptions().axes;var t=new Map;this.updateXAxes(t),this.updateYAxes(t);var i=new Map;this.cache.forEach(function(x,R){t.has(R)?i.set(R,x):x.component.destroy()}),this.cache=i},o.prototype.clear=function(){c.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.axisContainer.clear()},o.prototype.destroy=function(){c.prototype.destroy.call(this),this.gridContainer.remove(!0),this.axisContainer.remove(!0)},o.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(i){t.push(i)}),t},o.prototype.updateXAxes=function(t){var i=this.view.getXScale();if(!(!i||i.isIdentity)){var x=Ui(this.option,i.field);if(x!==!1){var R=Yi(x,e.BOTTOM),nt=E.BG,Mt="x",Lt=this.view.getCoordinate(),ne=this.getId("axis",i.field),ge=this.getId("grid",i.field);if(Lt.isRect){var be=this.cache.get(ne);if(be){var Ae=this.getLineAxisCfg(i,x,R);te(Ae,Ja),be.component.update(Ae),t.set(ne,be)}else be=this.createLineAxis(i,x,nt,R,Mt),this.cache.set(ne,be),t.set(ne,be);var We=this.cache.get(ge);if(We){var Ae=this.getLineGridCfg(i,x,R,Mt);te(Ae,Ja),We.component.update(Ae),t.set(ge,We)}else We=this.createLineGrid(i,x,nt,R,Mt),We&&(this.cache.set(ge,We),t.set(ge,We))}else if(Lt.isPolar){var be=this.cache.get(ne);if(be){var Ae=Lt.isTransposed?this.getLineAxisCfg(i,x,e.RADIUS):this.getCircleAxisCfg(i,x,R);te(Ae,Ja),be.component.update(Ae),t.set(ne,be)}else{if(Lt.isTransposed){if(Object(a.isUndefined)(x))return;be=this.createLineAxis(i,x,nt,e.RADIUS,Mt)}else be=this.createCircleAxis(i,x,nt,R,Mt);this.cache.set(ne,be),t.set(ne,be)}var We=this.cache.get(ge);if(We){var Ae=Lt.isTransposed?this.getCircleGridCfg(i,x,e.RADIUS,Mt):this.getLineGridCfg(i,x,e.CIRCLE,Mt);te(Ae,Ja),We.component.update(Ae),t.set(ge,We)}else{if(Lt.isTransposed){if(Object(a.isUndefined)(x))return;We=this.createCircleGrid(i,x,nt,e.RADIUS,Mt)}else We=this.createLineGrid(i,x,nt,e.CIRCLE,Mt);We&&(this.cache.set(ge,We),t.set(ge,We))}}}}},o.prototype.updateYAxes=function(t){var i=this,x=this.view.getYScales();Object(a.each)(x,function(R,nt){if(!(!R||R.isIdentity)){var Mt=R.field,Lt=Ui(i.option,Mt);if(Lt!==!1){var ne=E.BG,ge="y",be=i.getId("axis",Mt),Ae=i.getId("grid",Mt),We=i.view.getCoordinate();if(We.isRect){var an=Yi(Lt,nt===0?e.LEFT:e.RIGHT),gn=i.cache.get(be);if(gn){var Yn=i.getLineAxisCfg(R,Lt,an);te(Yn,Ja),gn.component.update(Yn),t.set(be,gn)}else gn=i.createLineAxis(R,Lt,ne,an,ge),i.cache.set(be,gn),t.set(be,gn);var Hn=i.cache.get(Ae);if(Hn){var Yn=i.getLineGridCfg(R,Lt,an,ge);te(Yn,Ja),Hn.component.update(Yn),t.set(Ae,Hn)}else Hn=i.createLineGrid(R,Lt,ne,an,ge),Hn&&(i.cache.set(Ae,Hn),t.set(Ae,Hn))}else if(We.isPolar){var gn=i.cache.get(be);if(gn){var Yn=We.isTransposed?i.getCircleAxisCfg(R,Lt,e.CIRCLE):i.getLineAxisCfg(R,Lt,e.RADIUS);te(Yn,Ja),gn.component.update(Yn),t.set(be,gn)}else{if(We.isTransposed){if(Object(a.isUndefined)(Lt))return;gn=i.createCircleAxis(R,Lt,ne,e.CIRCLE,ge)}else gn=i.createLineAxis(R,Lt,ne,e.RADIUS,ge);i.cache.set(be,gn),t.set(be,gn)}var Hn=i.cache.get(Ae);if(Hn){var Yn=We.isTransposed?i.getLineGridCfg(R,Lt,e.CIRCLE,ge):i.getCircleGridCfg(R,Lt,e.RADIUS,ge);te(Yn,Ja),Hn.component.update(Yn),t.set(Ae,Hn)}else{if(We.isTransposed){if(Object(a.isUndefined)(Lt))return;Hn=i.createLineGrid(R,Lt,ne,e.CIRCLE,ge)}else Hn=i.createCircleGrid(R,Lt,ne,e.RADIUS,ge);Hn&&(i.cache.set(Ae,Hn),t.set(Ae,Hn))}}}}})},o.prototype.createLineAxis=function(t,i,x,R,nt){var Mt={component:new gi(this.getLineAxisCfg(t,i,R)),layer:x,direction:R===e.RADIUS?e.NONE:R,type:r.AXIS,extra:{dim:nt,scale:t}};return Mt.component.set("field",t.field),Mt.component.init(),Mt},o.prototype.createLineGrid=function(t,i,x,R,nt){var Mt=this.getLineGridCfg(t,i,R,nt);if(Mt){var Lt={component:new bi(Mt),layer:x,direction:e.NONE,type:r.GRID,extra:{dim:nt,scale:t,alignTick:Object(a.get)(Mt,"alignTick",!0)}};return Lt.component.init(),Lt}},o.prototype.createCircleAxis=function(t,i,x,R,nt){var Mt={component:new Oi(this.getCircleAxisCfg(t,i,R)),layer:x,direction:R,type:r.AXIS,extra:{dim:nt,scale:t}};return Mt.component.set("field",t.field),Mt.component.init(),Mt},o.prototype.createCircleGrid=function(t,i,x,R,nt){var Mt=this.getCircleGridCfg(t,i,R,nt);if(Mt){var Lt={component:new zi(Mt),layer:x,direction:e.NONE,type:r.GRID,extra:{dim:nt,scale:t,alignTick:Object(a.get)(Mt,"alignTick",!0)}};return Lt.component.init(),Lt}},o.prototype.getLineAxisCfg=function(t,i,x){var R=this.axisContainer,nt=this.view.getCoordinate(),Mt=Pr(nt,x),Lt=Bi(t,i),ne=ii(this.view.getTheme(),x),ge=Object(a.get)(i,["title"])?Object(a.deepMix)({title:{style:{text:Lt}}},{title:Object(a.get)(ii(this.view.getTheme(),"common"),"title")},i):i,be=Object(a.deepMix)(Object(rt.a)(Object(rt.a)({container:R},Mt),{ticks:t.getTicks().map(function(cr){return{id:""+cr.tickValue,name:cr.text,value:cr.value}}),verticalFactor:nt.isPolar?vi(Mt,nt.getCenter())*-1:vi(Mt,nt.getCenter()),theme:ne}),ne,ge),Ae=this.getAnimateCfg(be),We=Ae.animate,an=Ae.animateOption;be.animateOption=an,be.animate=We;var gn=ri(Mt),Yn=Object(a.get)(be,"verticalLimitLength",gn?1/3:1/2);if(Yn<=1){var Hn=this.view.getCanvas().get("width"),ir=this.view.getCanvas().get("height");be.verticalLimitLength=Yn*(gn?Hn:ir)}return be},o.prototype.getLineGridCfg=function(t,i,x,R){if(!!vf(ii(this.view.getTheme(),x),i)){var nt=qs(this.view.getTheme(),x),Mt=Object(a.deepMix)({container:this.gridContainer},nt,Object(a.get)(i,"grid"),this.getAnimateCfg(i));return Mt.items=_u(this.view.getCoordinate(),t,R,Object(a.get)(Mt,"alignTick",!0)),Mt}},o.prototype.getCircleAxisCfg=function(t,i,x){var R=this.axisContainer,nt=this.view.getCoordinate(),Mt=t.getTicks().map(function(gn){return{id:""+gn.tickValue,name:gn.text,value:gn.value}});!t.isCategory&&Math.abs(nt.endAngle-nt.startAngle)===Math.PI*2&&Mt.pop();var Lt=Bi(t,i),ne=ii(this.view.getTheme(),e.CIRCLE),ge=Object(a.get)(i,["title"])?Object(a.deepMix)({title:{style:{text:Lt}}},{title:Object(a.get)(ii(this.view.getTheme(),"common"),"title")},i):i,be=Object(a.deepMix)(Object(rt.a)(Object(rt.a)({container:R},Si(this.view.getCoordinate())),{ticks:Mt,verticalFactor:1,theme:ne}),ne,ge),Ae=this.getAnimateCfg(be),We=Ae.animate,an=Ae.animateOption;return be.animate=We,be.animateOption=an,be},o.prototype.getCircleGridCfg=function(t,i,x,R){if(!!vf(ii(this.view.getTheme(),x),i)){var nt=qs(this.view.getTheme(),e.RADIUS),Mt=Object(a.deepMix)({container:this.gridContainer,center:this.view.getCoordinate().getCenter()},nt,Object(a.get)(i,"grid"),this.getAnimateCfg(i)),Lt=Object(a.get)(Mt,"alignTick",!0),ne=R==="x"?this.view.getYScales()[0]:this.view.getXScale();return Mt.items=Ka(this.view.getCoordinate(),ne,t,Lt,R),Mt}},o.prototype.getId=function(t,i){var x=this.view.getCoordinate();return t+"-"+i+"-"+x.type},o.prototype.getAnimateCfg=function(t){return{animate:this.view.getOptions().animate&&Object(a.get)(t,"animate"),animateOption:t&&t.animateOption?Object(a.deepMix)({},pf,t.animateOption):pf}},o}(Do),gf=No;function Da(c,o,t){return t===e.TOP?[c.minX+c.width/2-o.width/2,c.minY]:t===e.BOTTOM?[c.minX+c.width/2-o.width/2,c.maxY-o.height]:t===e.LEFT?[c.minX,c.minY+c.height/2-o.height/2]:t===e.RIGHT?[c.maxX-o.width,c.minY+c.height/2-o.height/2]:t===e.TOP_LEFT||t===e.LEFT_TOP?[c.tl.x,c.tl.y]:t===e.TOP_RIGHT||t===e.RIGHT_TOP?[c.tr.x-o.width,c.tr.y]:t===e.BOTTOM_LEFT||t===e.LEFT_BOTTOM?[c.bl.x,c.bl.y-o.height]:t===e.BOTTOM_RIGHT||t===e.RIGHT_BOTTOM?[c.br.x-o.width,c.br.y-o.height]:[0,0]}function yf(c,o){if(o.isTransposed)switch(c){case e.BOTTOM:return e.LEFT;case e.LEFT:return e.BOTTOM;case e.RIGHT:return e.TOP;case e.TOP:return e.RIGHT}return c}function mf(c){return c===e.LEFT?e.RIGHT:c===e.RIGHT?e.LEFT:c}function bf(c){return c===e.TOP?e.BOTTOM:c===e.BOTTOM?e.TOP:c}function Vh(c,o){var t=o.matrix[0],i=o.matrix[4],x=c;return t<0&&(x=mf(x)),i<0&&(x=bf(x)),x}function Wh(c,o){var t=c;return o.isReflect("x")&&(t=mf(t)),o.isReflect("y")&&(t=bf(t)),t}function Yh(c,o){var t=c;return t=yf(t,o),t=Vh(t,o),t=Wh(t,o),t}function xf(c,o){return Object(a.isBoolean)(c)?c===!1?!1:{}:Object(a.get)(c,[o],c)}function Uu(c){return Object(a.get)(c,"position",e.BOTTOM)}var tu=function(c){Object(rt.b)(o,c);function o(t){var i=c.call(this,t)||this;return i.container=i.view.getLayer(E.FORE).addGroup(),i}return Object.defineProperty(o.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.render=function(){this.update()},o.prototype.layout=function(){var t=this;this.layoutBBox=this.view.viewBBox,Object(a.each)(this.components,function(i){var x=i.component,R=i.direction,nt=Gn(R),Mt=t.getCategoryLegendSizeCfg(nt),Lt=x.get("maxWidth"),ne=x.get("maxHeight");x.update({maxWidth:Math.min(Mt.maxWidth,Lt||0),maxHeight:Math.min(Mt.maxHeight,ne||0)});var ge=x.get("padding"),be=x.getLayoutBBox(),Ae=new Qe(be.x,be.y,be.width,be.height).expand(ge),We=Da(t.view.viewBBox,Ae,R),an=We[0],gn=We[1],Yn=Da(t.layoutBBox,Ae,R),Hn=Yn[0],ir=Yn[1],cr=0,kr=0;R.startsWith("top")||R.startsWith("bottom")?(cr=an,kr=ir):(cr=Hn,kr=gn),x.setLocation({x:cr+ge[3],y:kr+ge[0]}),t.layoutBBox=t.layoutBBox.cut(Ae,R)})},o.prototype.update=function(){var t=this;this.option=this.view.getOptions().legends;var i={},x=function(We,an,gn){var Yn=t.getId(gn.field),Hn=t.getComponentById(Yn);if(Hn){var ir=void 0,cr=xf(t.option,gn.field);cr!==!1&&(Object(a.get)(cr,"custom")?ir=t.getCategoryCfg(We,an,gn,cr,!0):gn.isLinear?ir=t.getContinuousCfg(We,an,gn,cr):gn.isCategory&&(ir=t.getCategoryCfg(We,an,gn,cr))),ir&&(te(ir,["container"]),Hn.direction=Uu(cr),Hn.component.update(ir),i[Yn]=!0)}else{var kr=t.createFieldLegend(We,an,gn);kr&&(kr.component.init(),t.components.push(kr),i[Yn]=!0)}};if(Object(a.get)(this.option,"custom")){var R="global-custom",nt=this.getComponentById(R);if(nt){var Mt=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);te(Mt,["container"]),nt.component.update(Mt),i[R]=!0}else{var Lt=this.createCustomLegend(void 0,void 0,void 0,this.option);if(Lt){Lt.init();var ne=E.FORE,ge=Uu(this.option);this.components.push({id:R,component:Lt,layer:ne,direction:ge,type:r.LEGEND,extra:void 0}),i[R]=!0}}}else this.loopLegends(x);var be=[];Object(a.each)(this.getComponents(),function(Ae){i[Ae.id]?be.push(Ae):Ae.component.destroy()}),this.components=be},o.prototype.clear=function(){c.prototype.clear.call(this),this.container.clear()},o.prototype.destroy=function(){c.prototype.destroy.call(this),this.container.remove(!0)},o.prototype.getGeometries=function(t){var i=this,x=t.geometries;return Object(a.each)(t.views,function(R){x=x.concat(i.getGeometries(R))}),x},o.prototype.loopLegends=function(t){var i=this.view.getRootView()===this.view;if(!!i){var x=this.getGeometries(this.view),R={};Object(a.each)(x,function(nt){var Mt=nt.getGroupAttributes();Object(a.each)(Mt,function(Lt){var ne=Lt.getScale(Lt.type);!ne||ne.type==="identity"||R[ne.field]||(t(nt,Lt,ne),R[ne.field]=!0)})})}},o.prototype.createFieldLegend=function(t,i,x){var R,nt=xf(this.option,x.field),Mt=E.FORE,Lt=Uu(nt);if(nt!==!1&&(Object(a.get)(nt,"custom")?R=this.createCustomLegend(t,i,x,nt):x.isLinear?R=this.createContinuousLegend(t,i,x,nt):x.isCategory&&(R=this.createCategoryLegend(t,i,x,nt))),R)return R.set("field",x.field),{id:this.getId(x.field),component:R,layer:Mt,direction:Lt,type:r.LEGEND,extra:{scale:x}}},o.prototype.createCustomLegend=function(t,i,x,R){var nt=this.getCategoryCfg(t,i,x,R,!0);return new Qi(nt)},o.prototype.createContinuousLegend=function(t,i,x,R){var nt=this.getContinuousCfg(t,i,x,R);return new io(nt)},o.prototype.createCategoryLegend=function(t,i,x,R){var nt=this.getCategoryCfg(t,i,x,R);return new Qi(nt)},o.prototype.getContinuousCfg=function(t,i,x,R){var nt=x.getTicks(),Mt=Object(a.find)(nt,function(gn){return gn.value===0}),Lt=Object(a.find)(nt,function(gn){return gn.value===1}),ne=nt.map(function(gn){var Yn=gn.value,Hn=gn.tickValue,ir=i.mapping(x.invert(Yn)).join("");return{value:Hn,attrValue:ir,color:ir,scaleValue:Yn}});Mt||ne.push({value:x.min,attrValue:i.mapping(x.invert(0)).join(""),color:i.mapping(x.invert(0)).join(""),scaleValue:0}),Lt||ne.push({value:x.max,attrValue:i.mapping(x.invert(1)).join(""),color:i.mapping(x.invert(1)).join(""),scaleValue:1}),ne.sort(function(gn,Yn){return gn.value-Yn.value});var ge={min:Object(a.head)(ne).value,max:Object(a.last)(ne).value,colors:[],rail:{type:i.type},track:{}};i.type==="size"&&(ge.track={style:{fill:i.type==="size"?this.view.getTheme().defaultColor:void 0}}),i.type==="color"&&(ge.colors=ne.map(function(gn){return gn.attrValue}));var be=this.container,Ae=Uu(R),We=Gn(Ae),an=Object(a.get)(R,"title");return an&&(an=Object(a.deepMix)({text:xr(x)},an)),ge.container=be,ge.layout=We,ge.title=an,ge.animateOption=ma,this.mergeLegendCfg(ge,R,"continuous")},o.prototype.getCategoryCfg=function(t,i,x,R,nt){var Mt=this.container,Lt=Object(a.get)(R,"position",e.BOTTOM),ne=Object(a.get)(this.view.getTheme(),["components","legend",Lt,"marker"]),ge=Object(a.get)(R,"marker"),be=Gn(Lt),Ae=nt?ur(ne,ge,R.items):sr(this.view,t,i,ne,ge),We=Object(a.get)(R,"title");We&&(We=Object(a.deepMix)({text:x?xr(x):""},We));var an=this.getCategoryLegendSizeCfg(be);an.container=Mt,an.layout=be,an.items=Ae,an.title=We,an.animateOption=ma;var gn=this.mergeLegendCfg(an,R,Lt);gn.reversed&&gn.items.reverse();var Yn=Object(a.get)(gn,"maxItemWidth");return Yn&&Yn<=1&&(gn.maxItemWidth=this.view.viewBBox.width*Yn),gn},o.prototype.mergeLegendCfg=function(t,i,x){var R=x.split("-")[0],nt=Object(a.get)(this.view.getTheme(),["components","legend",R],{});return Object(a.deepMix)({},nt,t,i)},o.prototype.getId=function(t){return this.name+"-"+t},o.prototype.getComponentById=function(t){return Object(a.find)(this.components,function(i){return i.id===t})},o.prototype.getCategoryLegendSizeCfg=function(t){var i=this.view.viewBBox,x=i.width,R=i.height;return t==="vertical"?{maxWidth:x*h,maxHeight:R}:{maxWidth:x,maxHeight:R*h}},o}(Do),Of=tu,Ms=function(c){Object(rt.b)(o,c);function o(t){var i=c.call(this,t)||this;return i.onChangeFn=a.noop,i.resetMeasure=function(){i.clear()},i.onValueChange=function(x){var R=x[0],nt=x[1];i.start=R,i.end=nt,i.changeViewData(R,nt)},i.container=i.view.getLayer(E.FORE).addGroup(),i.onChangeFn=Object(a.throttle)(i.onValueChange,20,{leading:!0}),i.width=0,i.view.on(b.BEFORE_CHANGE_DATA,i.resetMeasure),i.view.on(b.BEFORE_CHANGE_SIZE,i.resetMeasure),i}return Object.defineProperty(o.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),o.prototype.destroy=function(){c.prototype.destroy.call(this),this.view.off(b.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(b.BEFORE_CHANGE_SIZE,this.resetMeasure)},o.prototype.init=function(){},o.prototype.render=function(){this.option=this.view.getOptions().slider;var t=this.getSliderCfg(),i=t.start,x=t.end;Object(a.isNil)(this.start)&&(this.start=i,this.end=x);var R=this.view.getOptions().data;this.option&&!Object(a.isEmpty)(R)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},o.prototype.layout=function(){var t=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout(function(){t.view.destroyed||t.changeViewData(t.start,t.end)},0)),this.slider){var i=this.view.coordinateBBox.width,x=this.slider.component.get("padding"),R=x[0],nt=x[1],Mt=x[2],Lt=x[3],ne=this.slider.component.getLayoutBBox(),ge=new Qe(ne.x,ne.y,Math.min(ne.width,i),ne.height).expand(x),be=this.getMinMaxText(this.start,this.end),Ae=be.minText,We=be.maxText,an=Da(this.view.viewBBox,ge,e.BOTTOM),gn=an[0],Yn=an[1],Hn=Da(this.view.coordinateBBox,ge,e.BOTTOM),ir=Hn[0],cr=Hn[1];this.slider.component.update(Object(rt.a)(Object(rt.a)({},this.getSliderCfg()),{x:ir+Lt,y:Yn+R,width:this.width,start:this.start,end:this.end,minText:Ae,maxText:We})),this.view.viewBBox=this.view.viewBBox.cut(ge,e.BOTTOM)}},o.prototype.update=function(){this.render()},o.prototype.createSlider=function(){var t=this.getSliderCfg(),i=new Qr.Slider(Object(rt.a)({container:this.container},t));return i.init(),{component:i,layer:E.FORE,direction:e.BOTTOM,type:r.SLIDER}},o.prototype.updateSlider=function(){var t=this.getSliderCfg();if(this.width){var i=this.getMinMaxText(this.start,this.end),x=i.minText,R=i.maxText;t=Object(rt.a)(Object(rt.a)({},t),{width:this.width,start:this.start,end:this.end,minText:x,maxText:R})}return this.slider.component.update(t),this.slider},o.prototype.measureSlider=function(){var t=this.getSliderCfg().width;this.width=t},o.prototype.getSliderCfg=function(){var t={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if(Object(a.isObject)(this.option)){var i=Object(rt.a)({data:this.getData()},Object(a.get)(this.option,"trendCfg",{}));t=Object(a.deepMix)({},t,this.getThemeOptions(),this.option),t=Object(rt.a)(Object(rt.a)({},t),{trendCfg:i})}return t.start=Object(a.clamp)(Math.min(Object(a.isNil)(t.start)?0:t.start,Object(a.isNil)(t.end)?1:t.end),0,1),t.end=Object(a.clamp)(Math.max(Object(a.isNil)(t.start)?0:t.start,Object(a.isNil)(t.end)?1:t.end),0,1),t},o.prototype.getData=function(){var t=this.view.getOptions().data,i=this.view.getYScales()[0],x=this.view.getGroupScales();if(x.length){var R=x[0],nt=R.field,Mt=R.ticks;return t.reduce(function(Lt,ne){return ne[nt]===Mt[0]&&Lt.push(ne[i.field]),Lt},[])}return t.map(function(Lt){return Lt[i.field]||0})},o.prototype.getThemeOptions=function(){var t=this.view.getTheme();return Object(a.get)(t,["components","slider","common"],{})},o.prototype.getMinMaxText=function(t,i){var x=this.view.getOptions().data,R=this.view.getXScale(),nt=!0,Mt=Object(a.valuesOfKey)(x,R.field),Lt=nt?Mt:Mt.reverse(),ne=Object(a.size)(x);if(!R||!ne)return{};var ge=Object(a.size)(Lt),be=Math.floor(t*(ge-1)),Ae=Math.floor(i*(ge-1)),We=Object(a.get)(Lt,[be]),an=Object(a.get)(Lt,[Ae]),gn=this.getSliderCfg().formatter;return gn&&(We=gn(We,x[be],be),an=gn(an,x[Ae],Ae)),{minText:We,maxText:an}},o.prototype.changeViewData=function(t,i){var x=this.view.getOptions().data,R=this.view.getXScale(),nt=!0,Mt=Object(a.valuesOfKey)(x,R.field),Lt=nt?Mt:Mt.reverse(),ne=Object(a.size)(x);if(!(!R||!ne)){var ge=Object(a.size)(Lt),be=Math.floor(t*(ge-1)),Ae=Math.floor(i*(ge-1));this.view.filter(R.field,function(We,an){var gn=Lt.indexOf(We);return gn>-1?oe(gn,be,Ae):!0}),this.view.render(!0)}},o.prototype.getComponents=function(){return this.slider?[this.slider]:[]},o.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},o}(Do),Sf=Ms,as=0,wf=8,Xh=32,Hh=20,Kh=function(c){Object(rt.b)(o,c);function o(t){var i=c.call(this,t)||this;return i.onChangeFn=a.noop,i.resetMeasure=function(){i.clear()},i.onValueChange=function(x){var R=x.ratio,nt=i.getValidScrollbarCfg().animate;i.ratio=Object(a.clamp)(R,0,1);var Mt=i.view.getOptions().animate;nt||i.view.animate(!1),i.changeViewData(i.getScrollRange(),!0),i.view.animate(Mt)},i.container=i.view.getLayer(E.FORE).addGroup(),i.onChangeFn=Object(a.throttle)(i.onValueChange,20,{leading:!0}),i.trackLen=0,i.thumbLen=0,i.ratio=0,i.view.on(b.BEFORE_CHANGE_DATA,i.resetMeasure),i.view.on(b.BEFORE_CHANGE_SIZE,i.resetMeasure),i}return Object.defineProperty(o.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),o.prototype.destroy=function(){c.prototype.destroy.call(this),this.view.off(b.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(b.BEFORE_CHANGE_SIZE,this.resetMeasure)},o.prototype.init=function(){},o.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},o.prototype.layout=function(){var t=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout(function(){t.view.destroyed||t.changeViewData(t.getScrollRange(),!0)})),this.scrollbar){var i=this.view.coordinateBBox.width,x=this.scrollbar.component.get("padding"),R=this.scrollbar.component.getLayoutBBox(),nt=new Qe(R.x,R.y,Math.min(R.width,i),R.height).expand(x),Mt=this.getScrollbarComponentCfg(),Lt=void 0,ne=void 0;if(Mt.isHorizontal){var ge=Da(this.view.viewBBox,nt,e.BOTTOM),be=ge[0],Ae=ge[1],We=Da(this.view.coordinateBBox,nt,e.BOTTOM),an=We[0],gn=We[1];Lt=an,ne=Ae}else{var Yn=Da(this.view.viewBBox,nt,e.RIGHT),be=Yn[0],Ae=Yn[1],Hn=Da(this.view.viewBBox,nt,e.RIGHT),an=Hn[0],gn=Hn[1];Lt=an,ne=Ae}Lt+=x[3],ne+=x[0],this.trackLen?this.scrollbar.component.update(Object(rt.a)(Object(rt.a)({},Mt),{x:Lt,y:ne,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update(Object(rt.a)(Object(rt.a)({},Mt),{x:Lt,y:ne})),this.view.viewBBox=this.view.viewBBox.cut(nt,Mt.isHorizontal?e.BOTTOM:e.RIGHT)}},o.prototype.update=function(){this.render()},o.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},o.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},o.prototype.getThemeOptions=function(){var t=this.view.getTheme();return Object(a.get)(t,["components","slider","common"],{})},o.prototype.measureScrollbar=function(){var t=this.view.getXScale(),i=this.view.getYScales().slice();this.data=this.view.getOptions().data,this.step=this.getStep(),this.cnt=this.getCnt();var x=this.getScrollbarComponentCfg(),R=x.trackLen,nt=x.thumbLen;this.trackLen=R,this.thumbLen=nt,this.xScaleCfg={field:t.field,values:t.values||[]},this.yScalesCfg=i},o.prototype.getScrollRange=function(){var t=Math.floor((this.cnt-this.step)*Object(a.clamp)(this.ratio,0,1)),i=Math.min(t+this.step-1,this.cnt-1);return[t,i]},o.prototype.changeViewData=function(t,i){var x=this,R=t[0],nt=t[1],Mt=this.getValidScrollbarCfg().type,Lt=Mt!=="vertical",ne=Object(a.valuesOfKey)(this.data,this.xScaleCfg.field),ge=Lt?ne:ne.reverse();this.yScalesCfg.forEach(function(be){x.view.scale(be.field,{formatter:be.formatter,type:be.type,min:be.min,max:be.max})}),this.view.filter(this.xScaleCfg.field,function(be){var Ae=ge.indexOf(be);return Ae>-1?oe(Ae,R,nt):!0}),this.view.render(!0)},o.prototype.createScrollbar=function(){var t=this.getValidScrollbarCfg().type,i=t!=="vertical",x=new Qr.Scrollbar(Object(rt.a)(Object(rt.a)({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return x.init(),{component:x,layer:E.FORE,direction:i?e.BOTTOM:e.RIGHT,type:r.SCROLLBAR}},o.prototype.updateScrollbar=function(){var t=this.getScrollbarComponentCfg(),i=this.trackLen?Object(rt.a)(Object(rt.a)({},t),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):Object(rt.a)({},t);return this.scrollbar.component.update(i),this.scrollbar},o.prototype.getStep=function(){if(this.step)return this.step;var t=this.view.coordinateBBox,i=this.getValidScrollbarCfg(),x=i.type,R=i.categorySize,nt=x!=="vertical";return Math.floor((nt?t.width:t.height)/R)},o.prototype.getCnt=function(){if(this.cnt)return this.cnt;var t=this.view.getXScale(),i=this.view.getOptions().data,x=Object(a.valuesOfKey)(i,t.field);return Object(a.size)(x)},o.prototype.getScrollbarComponentCfg=function(){var t=this.view,i=t.coordinateBBox,x=t.viewBBox,R=this.view.getXScale(),nt=this.getValidScrollbarCfg(),Mt=nt.type,Lt=nt.padding,ne=nt.width,ge=nt.height,be=Mt!=="vertical",Ae=Lt[0],We=Lt[1],an=Lt[2],gn=Lt[3],Yn=be?{x:i.minX+gn,y:x.maxY-ge-an}:{x:x.maxX-ne-We,y:i.minY+Ae},Hn=this.getStep(),ir=this.getCnt(),cr=be?i.width-gn-We:i.height-Ae-an,kr=Math.max(cr*Object(a.clamp)(Hn/ir,0,1),Hh);return Object(rt.a)(Object(rt.a)({},this.getThemeOptions()),{x:Yn.x,y:Yn.y,size:be?ge:ne,isHorizontal:be,trackLen:cr,thumbLen:kr,thumbOffset:0})},o.prototype.getValidScrollbarCfg=function(){var t={type:"horizontal",categorySize:Xh,width:wf,height:wf,padding:[0,0,0,0],animate:!0};return Object(a.isObject)(this.option)&&(t=Object(rt.a)(Object(rt.a)({},t),this.option)),(!Object(a.isObject)(this.option)||!this.option.padding)&&(t.padding=t.type==="horizontal"?[as,0,as,0]:[0,as,0,as]),t},o}(Do),Jh=Kh,Qh=function(c){Object(rt.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.show=function(){var t=this.context.view,i=this.context.event,x=t.getTooltipItems({x:i.x,y:i.y});if(!Object(a.isEqual)(x,this.items)&&(this.items=x,x.length)){var R=t.getXScale().field,nt=x[0].data[R],Mt=[],Lt=t.geometries;if(Object(a.each)(Lt,function(yo){if(yo.type==="interval"||yo.type==="schema"){var wo=yo.getElementsBy(function(Q){var U=Q.getData();return U[R]===nt});Mt=Mt.concat(wo)}}),Mt.length){var ne=t.getCoordinate(),ge=Mt[0].shape.getCanvasBBox(),be=Mt[0].shape.getCanvasBBox(),Ae=ge;Object(a.each)(Mt,function(yo){var wo=yo.shape.getCanvasBBox();ne.isTransposed?(wo.minY<ge.minY&&(ge=wo),wo.maxY>be.maxY&&(be=wo)):(wo.minX<ge.minX&&(ge=wo),wo.maxX>be.maxX&&(be=wo)),Ae.x=Math.min(wo.minX,Ae.minX),Ae.y=Math.min(wo.minY,Ae.minY),Ae.width=Math.max(wo.maxX,Ae.maxX)-Ae.x,Ae.height=Math.max(wo.maxY,Ae.maxY)-Ae.y});var We=t.backgroundGroup,an=t.coordinateBBox,gn=void 0;if(ne.isRect){var Yn=t.getXScale(),Hn=Yn.isLinear?0:.25,ir=void 0,cr=void 0,kr=void 0,zr=void 0;ne.isTransposed?(ir=an.minX,cr=Math.min(be.minY,ge.minY)-Hn*be.height,kr=an.width,zr=Ae.height+Hn*2*be.height):(ir=Math.min(ge.minX,be.minX)-Hn*ge.width,cr=Math.min(an.minY,ge.minY),kr=Ae.width+Hn*2*ge.width,zr=an.height),gn=[["M",ir,cr],["L",ir+kr,cr],["L",ir+kr,cr+zr],["L",ir,cr+zr],["Z"]]}else{var Ur=Object(a.head)(Mt),Ri=Object(a.last)(Mt),Ai=ao(Ur.getModel(),ne).startAngle,mi=ao(Ri.getModel(),ne).endAngle,Ki=ne.getCenter(),vo=ne.getRadius(),po=ne.innerRadius*vo;gn=no(Ki.x,Ki.y,vo,Ai,mi,po)}this.regionPath?(this.regionPath.attr("path",gn),this.regionPath.show()):this.regionPath=We.addShape({type:"path",name:"active-region",capture:!1,attrs:{path:gn,fill:"#CCD6EC",opacity:.3}})}}},o.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},o.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),c.prototype.destroy.call(this)},o}(lt),Ef=Qh,Ra=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.timeStamp=0,t}return o.prototype.show=function(){var t=this.context,i=t.event,x=t.view,R=x.isTooltipLocked();if(!R){var nt=this.timeStamp,Mt=+new Date,Lt=Object(a.get)(t.view.getOptions(),"tooltip.showDelay",16);if(Mt-nt>Lt){var ne=this.location,ge={x:i.x,y:i.y};(!ne||!Object(a.isEqual)(ne,ge))&&this.showTooltip(x,ge),this.timeStamp=Mt,this.location=ge}}},o.prototype.hide=function(){var t=this.context.view,i=t.getController("tooltip"),x=this.context.event,R=x.clientX,nt=x.clientY;i.isCursorEntered({x:R,y:nt})||t.isTooltipLocked()||(this.hideTooltip(t),this.location=null)},o.prototype.showTooltip=function(t,i){t.showTooltip(i)},o.prototype.hideTooltip=function(t){t.hideTooltip()},o}(lt),da=Ra,ss=function(c){Object(rt.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.showTooltip=function(t,i){var x=en(t);Object(a.each)(x,function(R){var nt=Ue(t,R,i);R.showTooltip(nt)})},o.prototype.hideTooltip=function(t){var i=en(t);Object(a.each)(i,function(x){x.hideTooltip()})},o}(da),Jo=ss,As=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.timeStamp=0,t}return o.prototype.destroy=function(){c.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},o.prototype.show=function(){var t=this.context,i=t.event,x=this.timeStamp,R=+new Date;if(R-x>16){var nt=this.location,Mt={x:i.x,y:i.y};(!nt||!Object(a.isEqual)(nt,Mt))&&this.showTooltip(Mt),this.timeStamp=R,this.location=Mt}},o.prototype.hide=function(){this.hideTooltip(),this.location=null},o.prototype.showTooltip=function(t){var i=this.context,x=i.event,R=x.target;if(R&&R.get("tip")){this.tooltip||this.renderTooltip();var nt=R.get("tip");this.tooltip.update(Object(rt.a)({title:nt},t)),this.tooltip.show()}},o.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},o.prototype.renderTooltip=function(){var t,i=this.context.view,x=i.canvas,R={start:{x:0,y:0},end:{x:x.get("width"),y:x.get("height")}},nt=i.getTheme(),Mt=Object(a.get)(nt,["components","tooltip","domStyles"],{}),Lt=new Wi({parent:x.get("el").parentNode,region:R,visible:!1,crosshairs:null,domStyles:Object(rt.a)({},Object(a.deepMix)({},Mt,(t={},t[Qr.TOOLTIP_CSS_CONST.CONTAINER_CLASS]={"max-width":"50%"},t[Qr.TOOLTIP_CSS_CONST.TITLE_CLASS]={"word-break":"break-all"},t)))});Lt.init(),Lt.setCapture(!1),this.tooltip=Lt},o}(lt),zu=As,eu=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="",t}return o.prototype.hasState=function(t){return t.hasState(this.stateName)},o.prototype.setElementState=function(t,i){t.setState(this.stateName,i)},o.prototype.setState=function(){this.setStateEnable(!0)},o.prototype.clear=function(){var t=this.context.view;this.clearViewState(t)},o.prototype.clearViewState=function(t){var i=this,x=De(t,this.stateName);Object(a.each)(x,function(R){i.setElementState(R,!1)})},o}(lt),wc=eu;function us(c){return Object(a.get)(c.get("delegateObject"),"item")}var Zh=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.ignoreListItemStates=["unchecked"],t}return o.prototype.isItemIgnore=function(t,i){var x=this.ignoreListItemStates,R=x.filter(function(nt){return i.hasState(t,nt)});return!!R.length},o.prototype.setStateByComponent=function(t,i,x){var R=this.context.view,nt=t.get("field"),Mt=ke(R);this.setElementsStateByItem(Mt,nt,i,x)},o.prototype.setStateByElement=function(t,i){this.setElementState(t,i)},o.prototype.isMathItem=function(t,i,x){var R=this.context.view,nt=mn(R,i),Mt=cn(t,i);return!Object(a.isNil)(Mt)&&x.name===nt.getText(Mt)},o.prototype.setElementsStateByItem=function(t,i,x,R){var nt=this;Object(a.each)(t,function(Mt){nt.isMathItem(Mt,i,x)&&Mt.setState(nt.stateName,R)})},o.prototype.setStateEnable=function(t){var i=me(this.context);if(i)de(this.context)&&this.setStateByElement(i,t);else{var x=Zt(this.context);if(he(x)){var R=x.item,nt=x.component;if(R&&nt&&!this.isItemIgnore(R,nt)){var Mt=this.context.event.gEvent;if(Mt&&Mt.fromShape&&Mt.toShape&&us(Mt.fromShape)===us(Mt.toShape))return;this.setStateByComponent(nt,R,t)}}}},o.prototype.toggle=function(){var t=me(this.context);if(t){var i=t.hasState(this.stateName);this.setElementState(t,!i)}},o.prototype.reset=function(){this.setStateEnable(!1)},o}(wc),nu=Zh,$h=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="active",t}return o.prototype.active=function(){this.setState()},o}(nu),qh=$h,td=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.cache={},t}return o.prototype.getColorScale=function(t,i){var x=i.geometry.getAttribute("color");if(!x)return null;var R=t.getScaleByField(x.getFields()[0]);return R},o.prototype.getLinkPath=function(t,i){var x=this.context.view,R=x.getCoordinate().isTransposed,nt=t.shape.getCanvasBBox(),Mt=i.shape.getCanvasBBox(),Lt=R?[["M",nt.minX,nt.minY],["L",Mt.minX,Mt.maxY],["L",Mt.maxX,Mt.maxY],["L",nt.maxX,nt.minY],["Z"]]:[["M",nt.maxX,nt.minY],["L",Mt.minX,Mt.minY],["L",Mt.minX,Mt.maxY],["L",nt.maxX,nt.maxY],["Z"]];return Lt},o.prototype.addLinkShape=function(t,i,x){t.addShape({type:"path",attrs:{opacity:.4,fill:i.shape.attr("fill"),path:this.getLinkPath(i,x)}})},o.prototype.linkByElement=function(t){var i=this,x=this.context.view,R=this.getColorScale(x,t);if(!!R){var nt=cn(t,R.field);if(!this.cache[nt]){var Mt=tn(x,R.field,nt),Lt=this.linkGroup,ne=Lt.addGroup();this.cache[nt]=ne;var ge=Mt.length;Object(a.each)(Mt,function(be,Ae){if(Ae<ge-1){var We=Mt[Ae+1];i.addLinkShape(ne,be,We)}})}}},o.prototype.removeLink=function(t){var i=this.getColorScale(this.context.view,t);if(!!i){var x=cn(t,i.field);this.cache[x]&&(this.cache[x].remove(),this.cache[x]=null)}},o.prototype.link=function(){var t=this.context;this.linkGroup||(this.linkGroup=t.view.foregroundGroup.addGroup({capture:!1}));var i=me(t);i&&this.linkByElement(i)},o.prototype.unlink=function(){var t=me(this.context);t&&this.removeLink(t)},o.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},o.prototype.destroy=function(){c.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},o}(lt),ed=td,nd=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.startPoint=null,t.endPoint=null,t.isStarted=!1,t.effectSiblings=!1,t.effectByRecord=!1,t}return o.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},o.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},o.prototype.getIntersectElements=function(){var t=null;if(Me(this.context))t=ze(this.context,10);else{var i=this.startPoint,x=this.isStarted?this.getCurrentPoint():this.endPoint;if(!i||!x)return;var R={minX:Math.min(i.x,x.x),minY:Math.min(i.y,x.y),maxX:Math.max(i.x,x.x),maxY:Math.max(i.y,x.y)},nt=this.context.view;t=nn(nt,R)}return t},o.prototype.setStateEnable=function(t){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(t);else{var i=ke(this.context.view),x=this.getIntersectElements();x&&x.length?this.effectByRecord?this.setSiblingsStateByRecord(x,t):this.setElementsState(x,t,i):this.clear()}},o.prototype.setSiblingsStateByRecord=function(t,i){var x=this,R=this.context.view,nt=en(R),Mt=t.map(function(ge){return ge.getModel().data}),Lt=R.getXScale().field,ne=R.getYScales()[0].field;Object(a.each)(nt,function(ge){var be=ke(ge),Ae=be.filter(function(We){var an=We.getModel().data;return ln(Mt,an,Lt,ne)});x.setElementsState(Ae,i,be)})},o.prototype.setSiblingsState=function(t){var i=this,x=this.context.view,R=en(x);Me(this.context)&&Object(a.each)(R,function(nt){var Mt=ke(nt),Lt=Ve(i.context,nt,10);Lt&&Lt.length?i.setElementsState(Lt,t,Mt):i.clearViewState(nt)})},o.prototype.setElementsState=function(t,i,x){var R=this;Object(a.each)(x,function(nt){t.includes(nt)?R.setElementState(nt,i):R.setElementState(nt,!1)})},o.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},o.prototype.clear=function(){var t=this,i=this.context.view;if(this.effectSiblings){var x=en(i);Object(a.each)(x,function(R){t.clearViewState(R)})}else this.clearViewState(i)},o}(wc),Vu=nd,Wu=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="active",t}return o.prototype.active=function(){this.setState()},o}(Vu),rd=Wu,Mf=function(c){Object(rt.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.setStateEnable=function(t){var i=me(this.context);if(i){if(!de(this.context))return;t?(this.clear(),this.setElementState(i,!0)):this.hasState(i)&&this.setElementState(i,!1)}},o.prototype.toggle=function(){var t=me(this.context);if(t){var i=this.hasState(t);i||this.clear(),this.setElementState(t,!i)}},o.prototype.reset=function(){this.setStateEnable(!1)},o}(wc),ru=Mf,id=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="active",t}return o.prototype.active=function(){this.setState()},o}(ru),od=id,iu="inactive",Cs="active";function Qa(c){var o=ke(c);Object(a.each)(o,function(t){t.hasState(Cs)&&t.setState(Cs,!1),t.hasState(iu)&&t.setState(iu,!1)})}function Af(c,o,t){Object(a.each)(c,function(i){o(i)?(i.hasState(iu)&&i.setState(iu,!1),i.setState(Cs,t)):(i.hasState(Cs)&&i.setState(Cs,!1),i.setState(iu,t))})}var Za=A.INACTIVE,Ea=A.ACTIVE,Cf=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName=Ea,t}return o.prototype.setElementsStateByItem=function(t,i,x,R){var nt=this,Mt=function(ne){return nt.isMathItem(ne,i,x)};this.setHighlightBy(t,Mt,R)},o.prototype.setElementHighlight=function(t,i){i(t)?(t.hasState(Za)&&t.setState(Za,!1),t.setState(Ea,!0)):t.hasState(Ea)||t.setState(Za,!0)},o.prototype.setHighlightBy=function(t,i,x){var R=this;if(x)Object(a.each)(t,function(Lt){R.setElementHighlight(Lt,i)});else{var nt=De(this.context.view,Ea),Mt=!0;Object(a.each)(nt,function(Lt){if(!i(Lt))return Mt=!1,!1}),Mt?this.clear():Object(a.each)(t,function(Lt){i(Lt)&&(Lt.hasState(Ea)&&Lt.setState(Ea,!1),Lt.setState(Za,!0))})}},o.prototype.setElementState=function(t,i){var x=this.context.view,R=ke(x);this.setHighlightBy(R,function(nt){return t===nt},i)},o.prototype.highlight=function(){this.setState()},o.prototype.clear=function(){var t=this.context.view;Qa(t)},o}(nu),Yu=Cf,Tf=function(c){Object(rt.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.setStateByElement=function(t,i){var x=this.context.view,R=t.geometry.getAttribute("color");if(!!R){var nt=x.getScaleByField(R.getFields()[0]),Mt=cn(t,nt.field),Lt=ke(x),ne=Lt.filter(function(ge){return cn(ge,nt.field)===Mt});this.setHighlightBy(Lt,function(ge){return ne.includes(ge)},i)}},o}(Yu),jf=Tf,If=function(c){Object(rt.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.setElementHighlight=function(t,i){i(t)?(t.hasState(Za)&&t.setState(Za,!1),t.setState(Ea,!0)):(t.setState(Za,!0),t.hasState(Ea)&&t.setState(Ea,!1))},o.prototype.setStateByElement=function(t,i){var x=this.context.view,R=x.getXScale(),nt=cn(t,R.field),Mt=ke(x),Lt=Mt.filter(function(ne){return cn(ne,R.field)===nt});this.setHighlightBy(Mt,function(ne){return Lt.includes(ne)},i)},o.prototype.toggle=function(){var t=me(this.context);if(t){var i=t.hasState(this.stateName);this.setStateByElement(t,!i)}},o}(Yu),Pf=If,ou=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="active",t}return o.prototype.clearViewState=function(t){Qa(t)},o.prototype.highlight=function(){this.setState()},o.prototype.setElementsState=function(t,i,x){Af(x,function(R){return t.indexOf(R)>=0},i)},o}(Vu),Ec=ou,Df=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="active",t}return o.prototype.highlight=function(){this.setState()},o.prototype.setElementState=function(t,i){var x=this.context.view,R=ke(x);Af(R,function(nt){return t===nt},i)},o.prototype.clear=function(){var t=this.context.view;Qa(t)},o}(ru),Rf=Df,ad=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="selected",t}return o.prototype.selected=function(){this.setState()},o}(Vu),sd=ad,ud=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="selected",t}return o.prototype.selected=function(){this.setState()},o}(nu),cd=ud,ld=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="selected",t}return o.prototype.selected=function(){this.setState()},o}(ru),Xu=ld,cs=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="",t.ignoreItemStates=[],t}return o.prototype.getTriggerListInfo=function(){var t=Zt(this.context),i=null;return he(t)&&(i={item:t.item,list:t.component}),i},o.prototype.getAllowComponents=function(){var t=this,i=this.context.view,x=Pe(i),R=[];return Object(a.each)(x,function(nt){nt.isList()&&t.allowSetStateByElement(nt)&&R.push(nt)}),R},o.prototype.hasState=function(t,i){return t.hasState(i,this.stateName)},o.prototype.clearAllComponentsState=function(){var t=this,i=this.getAllowComponents();Object(a.each)(i,function(x){x.clearItemsState(t.stateName)})},o.prototype.allowSetStateByElement=function(t){var i=t.get("field");if(!i)return!1;if(this.cfg&&this.cfg.componentNames){var x=t.get("name");if(this.cfg.componentNames.indexOf(x)===-1)return!1}var R=this.context.view,nt=mn(R,i);return nt&&nt.isCategory},o.prototype.allowSetStateByItem=function(t,i){var x=this.ignoreItemStates;if(x.length){var R=x.filter(function(nt){return i.hasState(t,nt)});return R.length===0}return!0},o.prototype.setStateByElement=function(t,i,x){var R=t.get("field"),nt=this.context.view,Mt=mn(nt,R),Lt=cn(i,R),ne=Mt.getText(Lt);this.setItemsState(t,ne,x)},o.prototype.setStateEnable=function(t){var i=this,x=me(this.context);if(x){var R=this.getAllowComponents();Object(a.each)(R,function(ne){i.setStateByElement(ne,x,t)})}else{var nt=Zt(this.context);if(he(nt)){var Mt=nt.item,Lt=nt.component;this.allowSetStateByElement(Lt)&&this.allowSetStateByItem(Mt,Lt)&&this.setItemState(Lt,Mt,t)}}},o.prototype.setItemsState=function(t,i,x){var R=this,nt=t.getItems();Object(a.each)(nt,function(Mt){Mt.name===i&&R.setItemState(t,Mt,x)})},o.prototype.setItemState=function(t,i,x){t.setItemState(i,this.stateName,x)},o.prototype.setState=function(){this.setStateEnable(!0)},o.prototype.reset=function(){this.setStateEnable(!1)},o.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var i=t.list,x=t.item,R=this.hasState(i,x);this.setItemState(i,x,!R)}},o.prototype.clear=function(){var t=this.getTriggerListInfo();t?t.list.clearItemsState(this.stateName):this.clearAllComponentsState()},o}(lt),ls=cs,au=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="active",t}return o.prototype.active=function(){this.setState()},o}(ls),kf=au,Mc="inactive",Ac="active";function Nf(c){var o=c.getItems();Object(a.each)(o,function(t){c.hasState(t,Ac)&&c.setItemState(t,Ac,!1),c.hasState(t,Mc)&&c.setItemState(t,Mc,!1)})}var Ts="inactive",$a="active",Lf=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName=$a,t.ignoreItemStates=["unchecked"],t}return o.prototype.setItemsState=function(t,i,x){this.setHighlightBy(t,function(R){return R.name===i},x)},o.prototype.setItemState=function(t,i,x){var R=t.getItems();this.setHighlightBy(t,function(nt){return nt===i},x)},o.prototype.setHighlightBy=function(t,i,x){var R=t.getItems();if(x)Object(a.each)(R,function(Lt){i(Lt)?(t.hasState(Lt,Ts)&&t.setItemState(Lt,Ts,!1),t.setItemState(Lt,$a,!0)):t.hasState(Lt,$a)||t.setItemState(Lt,Ts,!0)});else{var nt=t.getItemsByState($a),Mt=!0;Object(a.each)(nt,function(Lt){if(!i(Lt))return Mt=!1,!1}),Mt?this.clear():Object(a.each)(R,function(Lt){i(Lt)&&(t.hasState(Lt,$a)&&t.setItemState(Lt,$a,!1),t.setItemState(Lt,Ts,!0))})}},o.prototype.highlight=function(){this.setState()},o.prototype.clear=function(){var t=this.getTriggerListInfo();if(t)Nf(t.list);else{var i=this.getAllowComponents();Object(a.each)(i,function(x){x.clearItemsState($a),x.clearItemsState(Ts)})}},o}(ls),fs=Lf,Bf=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="selected",t}return o.prototype.selected=function(){this.setState()},o}(ls),Ff=Bf,Gf=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="unchecked",t}return o.prototype.unchecked=function(){this.setState()},o}(ls),fd=Gf,_f=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.maskShape=null,t.points=[],t.starting=!1,t.moving=!1,t.preMovePoint=null,t.shapeType="path",t}return o.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},o.prototype.emitEvent=function(t){var i="mask:"+t,x=this.context.view,R=this.context.event;x.emit(i,{target:this.maskShape,shape:this.maskShape,points:this.points,x:R.x,y:R.y})},o.prototype.createMask=function(){var t=this.context.view,i=this.getMaskAttrs(),x=t.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:Object(rt.a)({fill:"#C5D4EB",opacity:.3},i)});return x},o.prototype.getMaskPath=function(){return[]},o.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},o.prototype.start=function(){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(),this.emitEvent("start")},o.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},o.prototype.move=function(){if(!(!this.moving||!this.maskShape)){var t=this.getCurrentPoint(),i=this.preMovePoint,x=t.x-i.x,R=t.y-i.y,nt=this.points;Object(a.each)(nt,function(Mt){Mt.x+=x,Mt.y+=R}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t}},o.prototype.updateMask=function(){var t=this.getMaskAttrs();this.maskShape.attr(t)},o.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},o.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},o.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},o.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},o.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,c.prototype.destroy.call(this)},o}(lt),Hu=_f,Uf=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.shapeType="circle",t}return o.prototype.getMaskAttrs=function(){var t=this.points,i=Object(a.last)(this.points),x=0,R=0,nt=0;if(t.length){var Mt=t[0];x=le(Mt,i)/2,R=(i.x+Mt.x)/2,nt=(i.y+Mt.y)/2}return{x:R,y:nt,r:x}},o}(Hu),zf=Uf,Vf=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.shapeType="rect",t}return o.prototype.getRegion=function(){var t=this.points;return{start:Object(a.head)(t),end:Object(a.last)(t)}},o.prototype.getMaskAttrs=function(){var t=this.getRegion(),i=t.start,x=t.end,R=Math.min(i.x,x.x),nt=Math.min(i.y,x.y),Mt=Math.abs(x.x-i.x),Lt=Math.abs(x.y-i.y);return{x:R,y:nt,width:Mt,height:Lt}},o}(Hu),Cc=Vf;function Tc(c){c.x=Object(a.clamp)(c.x,0,1),c.y=Object(a.clamp)(c.y,0,1)}var su=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return o.prototype.getRegion=function(){var t=null,i=null,x=this.points,R=this.dim,nt=this.context.view.getCoordinate(),Mt=nt.invert(Object(a.head)(x)),Lt=nt.invert(Object(a.last)(x));return this.inPlot&&(Tc(Mt),Tc(Lt)),R==="x"?(t=nt.convert({x:Mt.x,y:0}),i=nt.convert({x:Lt.x,y:1})):(t=nt.convert({x:0,y:Mt.y}),i=nt.convert({x:1,y:Lt.y})),{start:t,end:i}},o}(Cc),jc=su,Wf=function(c){Object(rt.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getMaskPath=function(){var t=this.points,i=[];return t.length&&(Object(a.each)(t,function(x,R){R===0?i.push(["M",x.x,x.y]):i.push(["L",x.x,x.y])}),i.push(["L",t[0].x,t[0].y])),i},o.prototype.getMaskAttrs=function(){return{path:this.getMaskPath()}},o.prototype.addPoint=function(){this.resize()},o}(Hu),Ic=Wf,hd=function(c){Object(rt.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getMaskPath=function(){var t=this.points;return Le(t,!0)},o}(Ic),Yf=hd,dd=function(c){Object(rt.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.setCursor=function(t){var i=this.context.view;i.getCanvas().setCursor(t)},o.prototype.default=function(){this.setCursor("default")},o.prototype.pointer=function(){this.setCursor("pointer")},o.prototype.move=function(){this.setCursor("move")},o.prototype.crosshair=function(){this.setCursor("crosshair")},o.prototype.wait=function(){this.setCursor("wait")},o.prototype.help=function(){this.setCursor("help")},o.prototype.text=function(){this.setCursor("text")},o.prototype.eResize=function(){this.setCursor("e-resize")},o.prototype.wResize=function(){this.setCursor("w-resize")},o.prototype.nResize=function(){this.setCursor("n-resize")},o.prototype.sResize=function(){this.setCursor("s-resize")},o.prototype.neResize=function(){this.setCursor("ne-resize")},o.prototype.nwResize=function(){this.setCursor("nw-resize")},o.prototype.seResize=function(){this.setCursor("se-resize")},o.prototype.swResize=function(){this.setCursor("sw-resize")},o.prototype.nsResize=function(){this.setCursor("ns-resize")},o.prototype.ewResize=function(){this.setCursor("ew-resize")},o}(lt),vd=dd,Xf=function(c){Object(rt.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.filterView=function(t,i,x){var R=this;t.getScaleByField(i)&&t.filter(i,x),t.views&&t.views.length&&Object(a.each)(t.views,function(nt){R.filterView(nt,i,x)})},o.prototype.filter=function(){var t=Zt(this.context);if(t){var i=this.context.view,x=t.component,R=x.get("field");if(he(t)){if(R){var nt=x.getItemsByState("unchecked"),Mt=mn(i,R),Lt=nt.map(function(Ae){return Ae.name});Lt.length?this.filterView(i,R,function(Ae){var We=Mt.getText(Ae);return!Lt.includes(We)}):this.filterView(i,R,null),i.render(!0)}}else if(ce(t)){var ne=x.getValue(),ge=ne[0],be=ne[1];this.filterView(i,R,function(Ae){return Ae>=ge&&Ae<=be}),i.render(!0)}}},o}(lt),Hf=Xf;function Pc(c,o,t,i){var x=Math.min(t[o],i[o]),R=Math.max(t[o],i[o]),nt=c.range,Mt=nt[0],Lt=nt[1];if(x<Mt&&(x=Mt),R>Lt&&(R=Lt),x===Lt&&R===Lt)return null;var ne=c.invert(x),ge=c.invert(R);if(c.isCategory){var be=c.values.indexOf(ne),Ae=c.values.indexOf(ge),We=c.values.slice(be,Ae+1);return function(an){return We.includes(an)}}else return function(an){return an>=ne&&an<=ge}}var Kf=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.dims=["x","y"],t.startPoint=null,t.isStarted=!1,t}return o.prototype.hasDim=function(t){return this.dims.includes(t)},o.prototype.start=function(){var t=this.context;this.isStarted=!0,this.startPoint=t.getCurrentPoint()},o.prototype.filter=function(){var t,i;if(Me(this.context)){var x=this.context.event.target,R=x.getCanvasBBox();t={x:R.x,y:R.y},i={x:R.maxX,y:R.maxY}}else{if(!this.isStarted)return;t=this.startPoint,i=this.context.getCurrentPoint()}if(!(Math.abs(t.x-i.x)<5||Math.abs(t.x-i.y)<5)){var nt=this.context.view,Mt=nt.getCoordinate(),Lt=Mt.invert(i),ne=Mt.invert(t);if(this.hasDim("x")){var ge=nt.getXScale(),be=Pc(ge,"x",Lt,ne);this.filterView(nt,ge.field,be)}if(this.hasDim("y")){var Ae=nt.getYScales()[0],be=Pc(Ae,"y",Lt,ne);this.filterView(nt,Ae.field,be)}this.reRender(nt)}},o.prototype.end=function(){this.isStarted=!1},o.prototype.reset=function(){var t=this.context.view;if(this.isStarted=!1,this.hasDim("x")){var i=t.getXScale();this.filterView(t,i.field,null)}if(this.hasDim("y")){var x=t.getYScales()[0];this.filterView(t,x.field,null)}this.reRender(t)},o.prototype.filterView=function(t,i,x){t.filter(i,x)},o.prototype.reRender=function(t){t.render(!0)},o}(lt),uu=Kf,cu=function(c){Object(rt.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.filterView=function(t,i,x){var R=en(t);Object(a.each)(R,function(nt){nt.filter(i,x)})},o.prototype.reRender=function(t){var i=en(t);Object(a.each)(i,function(x){x.render(!0)})},o}(uu),Ku=cu,Jf=function(c){Object(rt.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.filter=function(){var t=Zt(this.context),i=this.context.view,x=ke(i);if(Me(this.context)){var R=ze(this.context,10);R&&Object(a.each)(x,function(an){R.includes(an)?an.show():an.hide()})}else if(t){var nt=t.component,Mt=nt.get("field");if(he(t)){if(Mt){var Lt=nt.getItemsByState("unchecked"),ne=mn(i,Mt),ge=Lt.map(function(an){return an.name});Object(a.each)(x,function(an){var gn=cn(an,Mt),Yn=ne.getText(gn);ge.indexOf(Yn)>=0?an.hide():an.show()})}}else if(ce(t)){var be=nt.getValue(),Ae=be[0],We=be[1];Object(a.each)(x,function(an){var gn=cn(an,Mt);gn>=Ae&&gn<=We?an.show():an.hide()})}}},o.prototype.clear=function(){var t=ke(this.context.view);Object(a.each)(t,function(i){i.show()})},o.prototype.reset=function(){this.clear()},o}(lt),Qf=Jf,pd=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.byRecord=!1,t}return o.prototype.filter=function(){Me(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},o.prototype.filterByRecord=function(){var t=this.context.view,i=ze(this.context,10);if(!!i){var x=t.getXScale().field,R=t.getYScales()[0].field,nt=i.map(function(Lt){return Lt.getModel().data}),Mt=en(t);Object(a.each)(Mt,function(Lt){var ne=ke(Lt);Object(a.each)(ne,function(ge){var be=ge.getModel().data;ln(nt,be,x,R)?ge.show():ge.hide()})})}},o.prototype.filterByBBox=function(){var t=this,i=this.context.view,x=en(i);Object(a.each)(x,function(R){var nt=Ve(t.context,R,10),Mt=ke(R);nt&&Object(a.each)(Mt,function(Lt){nt.includes(Lt)?Lt.show():Lt.hide()})})},o.prototype.reset=function(){var t=en(this.context.view);Object(a.each)(t,function(i){var x=ke(i);Object(a.each)(x,function(R){R.show()})})},o}(lt),Dc=pd,Zf=10,$f=5,qf=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},t}return o.prototype.getButtonCfg=function(){return Object(a.deepMix)(this.buttonCfg,this.cfg)},o.prototype.drawButton=function(){var t=this.getButtonCfg(),i=this.context.view.foregroundGroup.addGroup({name:t.name}),x=i.addShape({type:"text",name:"button-text",attrs:Object(rt.a)({text:t.text},t.textStyle)}),R=x.getBBox(),nt=ya(t.padding),Mt=i.addShape({type:"rect",name:"button-rect",attrs:Object(rt.a)({x:R.x-nt[3],y:R.y-nt[0],width:R.width+nt[1]+nt[3],height:R.height+nt[0]+nt[2]},t.style)});Mt.toBack(),i.on("mouseenter",function(){Mt.attr(t.activeStyle)}),i.on("mouseleave",function(){Mt.attr(t.style)}),this.buttonGroup=i},o.prototype.resetPosition=function(){var t=this.context.view,i=t.getCoordinate(),x=i.convert({x:1,y:1}),R=this.buttonGroup,nt=R.getBBox(),Mt=jr.a.transform(null,[["t",x.x-nt.width-Zf,x.y+nt.height+$f]]);R.setMatrix(Mt)},o.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},o.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},o.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),c.prototype.destroy.call(this)},o}(lt),th=qf,eh=4,nh=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.starting=!1,t.dragStart=!1,t}return o.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},o.prototype.drag=function(){if(!!this.startPoint){var t=this.context.getCurrentPoint(),i=this.context.view,x=this.context.event;this.dragStart?i.emit("drag",{target:x.target,x:x.x,y:x.y}):le(t,this.startPoint)>eh&&(i.emit("dragstart",{target:x.target,x:x.x,y:x.y}),this.dragStart=!0)}},o.prototype.end=function(){if(this.dragStart){var t=this.context.view,i=this.context.event;t.emit("dragend",{target:i.target,x:i.x,y:i.y})}this.starting=!1,this.dragStart=!1},o}(lt),Rc=nh,rh=5,ih=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.starting=!1,t.isMoving=!1,t.startPoint=null,t.startMatrix=null,t}return o.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},o.prototype.move=function(){if(!!this.starting){var t=this.startPoint,i=this.context.getCurrentPoint(),x=le(t,i);if(x>rh&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var R=this.context.view,nt=jr.a.transform(this.startMatrix,[["t",i.x-t.x,i.y-t.y]]);R.backgroundGroup.setMatrix(nt),R.foregroundGroup.setMatrix(nt),R.middleGroup.setMatrix(nt)}}},o.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},o.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var t=this.context.view;t.backgroundGroup.resetMatrix(),t.foregroundGroup.resetMatrix(),t.middleGroup.resetMatrix(),this.isMoving=!1},o}(lt),oh=ih,kc="x",Ju="y",ah=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.dims=[kc,Ju],t.cfgFields=["dims"],t.cacheScaleDefs={},t}return o.prototype.hasDim=function(t){return this.dims.includes(t)},o.prototype.getScale=function(t){var i=this.context.view;return t==="x"?i.getXScale():i.getYScales()[0]},o.prototype.resetDim=function(t){var i=this.context.view;if(this.hasDim(t)&&this.cacheScaleDefs[t]){var x=this.getScale(t);i.scale(x.field,this.cacheScaleDefs[t]),this.cacheScaleDefs[t]=null}},o.prototype.reset=function(){this.resetDim(kc),this.resetDim(Ju);var t=this.context.view;t.render(!0)},o}(lt),Nc=ah,sh=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.startPoint=null,t.starting=!1,t.startCache={},t}return o.prototype.start=function(){var t=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var i=this.dims;Object(a.each)(i,function(x){var R=t.getScale(x),nt=R.min,Mt=R.max,Lt=R.values;t.startCache[x]={min:nt,max:Mt,values:Lt}})},o.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},o.prototype.translate=function(){var t=this;if(!!this.starting){var i=this.startPoint,x=this.context.view.getCoordinate(),R=this.context.getCurrentPoint(),nt=x.invert(i),Mt=x.invert(R),Lt=Mt.x-nt.x,ne=Mt.y-nt.y,ge=this.context.view,be=this.dims;Object(a.each)(be,function(Ae){t.translateDim(Ae,{x:Lt*-1,y:ne*-1})}),ge.render(!0)}},o.prototype.translateDim=function(t,i){if(this.hasDim(t)){var x=this.getScale(t);x.isLinear&&this.translateLinear(t,x,i)}},o.prototype.translateLinear=function(t,i,x){var R=this.context.view,nt=this.startCache[t],Mt=nt.min,Lt=nt.max,ne=Lt-Mt,ge=x[t]*ne;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:i.nice,min:Mt,max:Lt}),R.scale(i.field,{nice:!1,min:Mt+ge,max:Lt+ge})},o.prototype.reset=function(){c.prototype.reset.call(this),this.startPoint=null,this.starting=!1},o}(Nc),uh=sh,ch=function(c){Object(rt.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.zoomRatio=.05,t}return o.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},o.prototype.zoom=function(t){var i=this,x=this.dims;Object(a.each)(x,function(R){i.zoomDim(R,t)}),this.context.view.render(!0)},o.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},o.prototype.zoomDim=function(t,i){if(this.hasDim(t)){var x=this.getScale(t);x.isLinear&&this.zoomLinear(t,x,i)}},o.prototype.zoomLinear=function(t,i,x){var R=this.context.view;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:i.nice,min:i.min,max:i.max});var nt=this.cacheScaleDefs[t],Mt=nt.max-nt.min,Lt=i.min,ne=i.max,ge=x*Mt,be=Lt-ge,Ae=ne+ge,We=Ae-be,an=We/Mt;Ae>be&&an<100&&an>.01&&R.scale(i.field,{nice:!1,min:Lt-ge,max:ne+ge})},o}(Nc),gd=ch;Rs("dark",ta(co)),T("canvas",lo),T("svg",Hi),Ho("Polygon",ml),Ho("Interval",Ss),Ho("Schema",fc),Ho("Path",wu),Ho("Point",pl),Ho("Line",cc),Ho("Area",el),Ho("Edge",il),Ho("Heatmap",al),jn("base",Fe),jn("interval",Ch),jn("pie",jh),jn("polar",gc),Wo("overlap",$o),Wo("distribute",Ph),Wo("fixed-overlap",Ks),Wo("hide-overlap",Du),Wo("limit-in-shape",Nh),Wo("limit-in-canvas",ha),Wo("limit-in-plot",ql),Wo("pie-outer",Nl),Wo("adjust-color",Ul),Wo("interval-adjust-position",Ru),Wo("interval-hide-overlap",Xl),Wo("point-adjust-position",ku),Wo("pie-spider",kh),Wo("path-adjust-position",Ql),Eo("fade-in",tf),Eo("fade-out",ef),Eo("grow-in-x",rf),Eo("grow-in-xy",af),Eo("grow-in-y",of),Eo("scale-in-x",uf),Eo("scale-in-y",Pa),Eo("wave-in",Xa),Eo("zoom-in",Bu),Eo("zoom-out",Oa),Eo("position-update",Lu),Eo("sector-path-update",Zs),Eo("path-in",sf),B("rect",lf),B("mirror",Gh),B("list",cf),B("matrix",Bh),B("circle",wa),B("tree",Uh),yr("axis",gf),yr("legend",Of),yr("tooltip",Fs),yr("annotation",df),yr("slider",Sf),yr("scrollbar",Jh),Ee("tooltip",da),Ee("sibling-tooltip",Jo),Ee("ellipsis-text",zu),Ee("element-active",qh),Ee("element-single-active",od),Ee("element-range-active",rd),Ee("element-highlight",Yu),Ee("element-highlight-by-x",Pf),Ee("element-highlight-by-color",jf),Ee("element-single-highlight",Rf),Ee("element-range-highlight",Ec),Ee("element-sibling-highlight",Ec,{effectSiblings:!0,effectByRecord:!0}),Ee("element-selected",cd),Ee("element-single-selected",Xu),Ee("element-range-selected",sd),Ee("element-link-by-color",ed),Ee("active-region",Ef),Ee("list-active",kf),Ee("list-selected",Ff),Ee("list-highlight",fs),Ee("list-unchecked",fd),Ee("legend-item-highlight",fs,{componentNames:["legend"]}),Ee("axis-label-highlight",fs,{componentNames:["axis"]}),Ee("rect-mask",Cc),Ee("x-rect-mask",jc,{dim:"x"}),Ee("y-rect-mask",jc,{dim:"y"}),Ee("circle-mask",zf),Ee("path-mask",Ic),Ee("smooth-path-mask",Yf),Ee("cursor",vd),Ee("data-filter",Hf),Ee("brush",uu),Ee("brush-x",uu,{dims:["x"]}),Ee("brush-y",uu,{dims:["y"]}),Ee("sibling-filter",Ku),Ee("sibling-x-filter",Ku),Ee("sibling-y-filter",Ku),Ee("element-filter",Qf),Ee("element-sibling-filter",Dc),Ee("element-sibling-filter-record",Dc,{byRecord:!0}),Ee("view-drag",Rc),Ee("view-move",oh),Ee("scale-translate",uh),Ee("scale-zoom",gd),Ee("reset-button",th,{name:"reset-button",text:"reset"});function va(c){return c.isInPlot()}$i("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]}),$i("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]}),$i("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),$i("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]}),$i("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]}),$i("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]}),$i("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]}),$i("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]}),$i("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]}),$i("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]}),$i("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]}),$i("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(o){return!o.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(o){return!o.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]}),$i("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:va,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:va,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:va,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]}),$i("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]}),$i("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:va,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:va,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:va,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]}),$i("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:va,action:"path-mask:start"},{trigger:"mousedown",isEnable:va,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]}),$i("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]}),$i("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter"]}]}),$i("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]}),$i("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]}),$i("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","element-filter:filter"]}]}),$i("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]});function hs(c){return c.gEvent.preventDefault(),c.gEvent.originalEvent.deltaY>0}$i("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(o){return hs(o.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(o){return!hs(o.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]}),$i("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]})},IvmH:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return rt}),_.d(Gt,"b",function(){return a});var rt={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},a={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},E=["click","mousedown","mouseup","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","wheel"]},IzEo:function(Fn,Gt,_){"use strict";var rt=_("cIOH"),a=_.n(rt),E=_("lnY3"),e=_.n(E),r=_("Znn+"),p=_("14J3"),b=_("jCWc")},KMYG:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return r});var rt=_("mrSG"),a=_("5HRO"),E=_("YuPD"),e=_("WOQw");function r(p){var b=p.options,S=b.polygon,l=b.xField,A=b.yField,j=b.seriesField,y=b.tooltip,n=Object(a.a)(y,[l,A,j]),s=n.fields,h=n.formatter;return S?Object(e.a)(Object(E.b)({},p,{options:{type:"polygon",colorField:j,tooltipFields:s,mapping:Object(rt.a)({tooltip:h},S)}})):p}},KavR:function(Fn,Gt,_){"use strict";var rt=_("AA7f"),a=_("iTfj"),E=_("0Xep"),e=_("Qci9");function r(b,S){return(S-b)*Math.random()+b}var p=function(b){Object(rt.b)(S,b);function S(){return b!==null&&b.apply(this,arguments)||this}return S.prototype.process=function(l){var A=a.clone(l),j=a.flatten(A);return this.adjustData(A,j),A},S.prototype.adjustDim=function(l,A,j){var y=this,n=this.groupData(j,l);return a.each(n,function(s,h){return y.adjustGroup(s,l,parseFloat(h),A)})},S.prototype.getAdjustOffset=function(l){var A=l.pre,j=l.next,y=(j-A)*E.c;return r(A+y,j-y)},S.prototype.adjustGroup=function(l,A,j,y){var n=this,s=this.getAdjustRange(A,j,y);return a.each(l,function(h){h[A]=n.getAdjustOffset(s)}),l},S}(e.a);Gt.a=p},KxBF:function(Fn,Gt){function _(rt,a,E){var e=-1,r=rt.length;a<0&&(a=-a>r?0:r+a),E=E>r?r:E,E<0&&(E+=r),r=a>E?0:E-a>>>0,a>>>=0;for(var p=Array(r);++e<r;)p[e]=rt[e+a];return p}Fn.exports=_},L16w:function(Fn,Gt,_){"use strict";Gt.a={fontFamily:`
  "-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4}},LmB6:function(Fn,Gt,_){"use strict";var rt=_("mrSG"),a=_("f6Jy"),E=_("sstZ"),e=function(r){Object(rt.b)(p,r);function p(b){var S=r.call(this)||this;S.destroyed=!1;var l=S.getDefaultCfg();return S.cfg=Object(E.i)(l,b),S}return p.prototype.getDefaultCfg=function(){return{}},p.prototype.get=function(b){return this.cfg[b]},p.prototype.set=function(b,S){this.cfg[b]=S},p.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},p}(a.a);Gt.a=e},LvGN:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return p}),_.d(Gt,"c",function(){return C}),_.d(Gt,"d",function(){return Z}),_.d(Gt,"e",function(){return F}),_.d(Gt,"b",function(){return Ut});var rt=_("iTfj"),a=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,E=/[^\s\,]+/ig;function e(jt){var Vt=jt||[];if(Object(rt.isArray)(Vt))return Vt;if(Object(rt.isString)(Vt))return Vt=Vt.match(a),Object(rt.each)(Vt,function(Ht,re){if(Ht=Ht.match(E),Ht[0].length>1){var pe=Ht[0].charAt(0);Ht.splice(1,0,Ht[0].substr(1)),Ht[0]=pe}Object(rt.each)(Ht,function(ye,we){isNaN(ye)||(Ht[we]=+ye)}),Vt[re]=Ht}),Vt}var r=e;function p(jt,Vt){for(var Ht=[],re=0,pe=jt.length;pe-2*!Vt>re;re+=2){var ye=[{x:+jt[re-2],y:+jt[re-1]},{x:+jt[re],y:+jt[re+1]},{x:+jt[re+2],y:+jt[re+3]},{x:+jt[re+4],y:+jt[re+5]}];Vt?re?pe-4===re?ye[3]={x:+jt[0],y:+jt[1]}:pe-2===re&&(ye[2]={x:+jt[0],y:+jt[1]},ye[3]={x:+jt[2],y:+jt[3]}):ye[0]={x:+jt[pe-2],y:+jt[pe-1]}:pe-4===re?ye[3]=ye[2]:re||(ye[0]={x:+jt[re],y:+jt[re+1]}),Ht.push(["C",(-ye[0].x+6*ye[1].x+ye[2].x)/6,(-ye[0].y+6*ye[1].y+ye[2].y)/6,(ye[1].x+6*ye[2].x-ye[3].x)/6,(ye[1].y+6*ye[2].y-ye[3].y)/6,ye[2].x,ye[2].y])}return Ht}function b(jt,Vt){var Ht=[],re=[];function pe(ye,we){if(ye.length===1)Ht.push(ye[0]),re.push(ye[0]);else{for(var Re=[],He=0;He<ye.length-1;He++)He===0&&Ht.push(ye[0]),He===ye.length-2&&re.push(ye[He+1]),Re[He]=[(1-we)*ye[He][0]+we*ye[He+1][0],(1-we)*ye[He][1]+we*ye[He+1][1]];pe(Re,we)}}return jt.length&&pe(jt,Vt),{left:Ht,right:re.reverse()}}function S(jt,Vt,Ht){var re=[[jt[1],jt[2]]];Ht=Ht||2;var pe=[];Vt[0]==="A"?(re.push(Vt[6]),re.push(Vt[7])):Vt[0]==="C"?(re.push([Vt[1],Vt[2]]),re.push([Vt[3],Vt[4]]),re.push([Vt[5],Vt[6]])):Vt[0]==="S"||Vt[0]==="Q"?(re.push([Vt[1],Vt[2]]),re.push([Vt[3],Vt[4]])):re.push([Vt[1],Vt[2]]);for(var ye=re,we=1/Ht,Re=0;Re<Ht-1;Re++){var He=we/(1-we*Re),pn=b(ye,He);pe.push(pn.left),ye=pn.right}pe.push(ye);var fn=pe.map(function(Rn){var Cn=[];return Rn.length===4&&(Cn.push("C"),Cn=Cn.concat(Rn[2])),Rn.length>=3&&(Rn.length===3&&Cn.push("Q"),Cn=Cn.concat(Rn[1])),Rn.length===2&&Cn.push("L"),Cn=Cn.concat(Rn[Rn.length-1]),Cn});return fn}function l(jt,Vt,Ht){if(Ht===1)return[[].concat(jt)];var re=[];if(Vt[0]==="L"||Vt[0]==="C"||Vt[0]==="Q")re=re.concat(S(jt,Vt,Ht));else{var pe=[].concat(jt);pe[0]==="M"&&(pe[0]="L");for(var ye=0;ye<=Ht-1;ye++)re.push(pe)}return re}function A(jt,Vt){if(jt.length===1)return jt;var Ht=jt.length-1,re=Vt.length-1,pe=Ht/re,ye=[];if(jt.length===1&&jt[0][0]==="M"){for(var we=0;we<re-Ht;we++)jt.push(jt[0]);return jt}for(var we=0;we<re;we++){var Re=Math.floor(pe*we);ye[Re]=(ye[Re]||0)+1}var He=ye.reduce(function(pn,fn,Rn){return Rn===Ht?pn.concat(jt[Ht]):pn.concat(l(jt[Rn],jt[Rn+1],fn))},[]);return He.unshift(jt[0]),(Vt[re]==="Z"||Vt[re]==="z")&&He.push("Z"),He}function j(jt,Vt,Ht){var re=null,pe=Ht;return Vt<pe&&(pe=Vt,re="add"),jt<pe&&(pe=jt,re="del"),{type:re,min:pe}}var y=function(Vt,Ht){var re=Vt.length,pe=Ht.length,ye,we,Re=0;if(re===0||pe===0)return null;for(var He=[],pn=0;pn<=re;pn++)He[pn]=[],He[pn][0]={min:pn};for(var fn=0;fn<=pe;fn++)He[0][fn]={min:fn};for(var pn=1;pn<=re;pn++){ye=Vt[pn-1];for(var fn=1;fn<=pe;fn++){we=Ht[fn-1],Object(rt.isEqual)(ye,we)?Re=0:Re=1;var Rn=He[pn-1][fn].min+1,Cn=He[pn][fn-1].min+1,kn=He[pn-1][fn-1].min+Re;He[pn][fn]=j(Rn,Cn,kn)}}return He};function n(jt,Vt){var Ht=y(jt,Vt),re=jt.length,pe=Vt.length,ye=[],we=1,Re=1;if(Ht[re][pe]!==re){for(var He=1;He<=re;He++){var pn=Ht[He][He].min;Re=He;for(var fn=we;fn<=pe;fn++)Ht[He][fn].min<pn&&(pn=Ht[He][fn].min,Re=fn);we=Re,Ht[He][we].type&&ye.push({index:He-1,type:Ht[He][we].type})}for(var He=ye.length-1;He>=0;He--)we=ye[He].index,ye[He].type==="add"?jt.splice(we,0,[].concat(jt[we])):jt.splice(we,1)}if(re=jt.length,re<pe)for(var He=0;He<pe-re;He++)jt[re-1][0]==="z"||jt[re-1][0]==="Z"?jt.splice(re-2,0,jt[re-2]):jt.push(jt[re-1]);return jt}function s(jt){var Vt=[];switch(jt[0]){case"M":Vt.push([jt[1],jt[2]]);break;case"L":Vt.push([jt[1],jt[2]]);break;case"A":Vt.push([jt[6],jt[7]]);break;case"Q":Vt.push([jt[3],jt[4]]),Vt.push([jt[1],jt[2]]);break;case"T":Vt.push([jt[1],jt[2]]);break;case"C":Vt.push([jt[5],jt[6]]),Vt.push([jt[1],jt[2]]),Vt.push([jt[3],jt[4]]);break;case"S":Vt.push([jt[3],jt[4]]),Vt.push([jt[1],jt[2]]);break;case"H":Vt.push([jt[1],jt[1]]);break;case"V":Vt.push([jt[1],jt[1]]);break;default:}return Vt}function h(jt,Vt,Ht){for(var re=[].concat(jt),pe,ye=1/(Ht+1),we=s(Vt)[0],Re=1;Re<=Ht;Re++)ye*=Re,pe=Math.floor(jt.length*ye),pe===0?re.unshift([we[0]*ye+jt[pe][0]*(1-ye),we[1]*ye+jt[pe][1]*(1-ye)]):re.splice(pe,0,[we[0]*ye+jt[pe][0]*(1-ye),we[1]*ye+jt[pe][1]*(1-ye)]);return re}function M(jt,Vt){if(jt.length<=1)return jt;for(var Ht,re=0;re<Vt.length;re++)if(jt[re][0]!==Vt[re][0])switch(Ht=s(jt[re]),Vt[re][0]){case"M":jt[re]=["M"].concat(Ht[0]);break;case"L":jt[re]=["L"].concat(Ht[0]);break;case"A":jt[re]=[].concat(Vt[re]),jt[re][6]=Ht[0][0],jt[re][7]=Ht[0][1];break;case"Q":if(Ht.length<2)if(re>0)Ht=h(Ht,jt[re-1],1);else{jt[re]=Vt[re];break}jt[re]=["Q"].concat(Ht.reduce(function(pe,ye){return pe.concat(ye)},[]));break;case"T":jt[re]=["T"].concat(Ht[0]);break;case"C":if(Ht.length<3)if(re>0)Ht=h(Ht,jt[re-1],2);else{jt[re]=Vt[re];break}jt[re]=["C"].concat(Ht.reduce(function(pe,ye){return pe.concat(ye)},[]));break;case"S":if(Ht.length<2)if(re>0)Ht=h(Ht,jt[re-1],1);else{jt[re]=Vt[re];break}jt[re]=["S"].concat(Ht.reduce(function(pe,ye){return pe.concat(ye)},[]));break;default:jt[re]=Vt[re]}return jt}function O(jt,Vt,Ht,re,pe){return pe?[["M",+jt+ +pe,Vt],["l",Ht-pe*2,0],["a",pe,pe,0,0,1,pe,pe],["l",0,re-pe*2],["a",pe,pe,0,0,1,-pe,pe],["l",pe*2-Ht,0],["a",pe,pe,0,0,1,-pe,-pe],["l",0,pe*2-re],["a",pe,pe,0,0,1,pe,-pe],["z"]]:[["M",jt,Vt],["l",Ht,0],["l",0,re],["l",-Ht,0],["z"]]}var T=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,v=new RegExp("([a-z])["+T+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+T+"]*,?["+T+"]*)+)","ig"),m=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+T+"]*,?["+T+"]*","ig");function C(jt){if(!jt)return null;if(Object(rt.isArray)(jt))return jt;var Vt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},Ht=[];return String(jt).replace(v,function(re,pe,ye){var we=[],Re=pe.toLowerCase();if(ye.replace(m,function(He,pn){pn&&we.push(+pn)}),Re==="m"&&we.length>2&&(Ht.push([pe].concat(we.splice(0,2))),Re="l",pe=pe==="m"?"l":"L"),Re==="o"&&we.length===1&&Ht.push([pe,we[0]]),Re==="r")Ht.push([pe].concat(we));else for(;we.length>=Vt[Re]&&(Ht.push([pe].concat(we.splice(0,Vt[Re]))),!!Vt[Re]););return""}),Ht}var D=/[a-z]/;function Y(jt,Vt){return[Vt[0]+(Vt[0]-jt[0]),Vt[1]+(Vt[1]-jt[1])]}function Z(jt){var Vt=C(jt);if(!Vt||!Vt.length)return[["M",0,0]];for(var Ht=!1,re=0;re<Vt.length;re++){var pe=Vt[re][0];if(D.test(pe)||["V","H","T","S"].indexOf(pe)>=0){Ht=!0;break}}if(!Ht)return Vt;var ye=[],we=0,Re=0,He=0,pn=0,fn=0,Rn,Cn,kn=Vt[0];(kn[0]==="M"||kn[0]==="m")&&(we=+kn[1],Re=+kn[2],He=we,pn=Re,fn++,ye[0]=["M",we,Re]);for(var re=fn,Mn=Vt.length;re<Mn;re++){var Tn=Vt[re],Un=ye[re-1],Kn=[],pe=Tn[0],tr=pe.toUpperCase();if(pe!==tr)switch(Kn[0]=tr,tr){case"A":Kn[1]=Tn[1],Kn[2]=Tn[2],Kn[3]=Tn[3],Kn[4]=Tn[4],Kn[5]=Tn[5],Kn[6]=+Tn[6]+we,Kn[7]=+Tn[7]+Re;break;case"V":Kn[1]=+Tn[1]+Re;break;case"H":Kn[1]=+Tn[1]+we;break;case"M":He=+Tn[1]+we,pn=+Tn[2]+Re;break;default:for(var or=1,nr=Tn.length;or<nr;or++)Kn[or]=+Tn[or]+(or%2?we:Re)}else Kn=Vt[re];switch(tr){case"Z":we=+He,Re=+pn;break;case"H":we=Kn[1],Kn=["L",we,Re];break;case"V":Re=Kn[1],Kn=["L",we,Re];break;case"T":we=Kn[1],Re=Kn[2];var er=Y([Un[1],Un[2]],[Un[3],Un[4]]);Kn=["Q",er[0],er[1],we,Re];break;case"S":we=Kn[Kn.length-2],Re=Kn[Kn.length-1];var Sr=Un.length,Vr=Y([Un[Sr-4],Un[Sr-3]],[Un[Sr-2],Un[Sr-1]]);Kn=["C",Vr[0],Vr[1],Kn[1],Kn[2],we,Re];break;case"M":He=Kn[Kn.length-2],pn=Kn[Kn.length-1];break;default:we=Kn[Kn.length-2],Re=Kn[Kn.length-1]}ye.push(Kn)}return ye}var et=function jt(Vt,Ht,re,pe,ye,we,Re,He,pn,fn){re===pe&&(re+=1);var Rn=Math.PI*120/180,Cn=Math.PI/180*(+ye||0),kn=[],Mn,Tn,Un,Kn,tr,or=function(ci,Qr,gi){var Oi=ci*Math.cos(gi)-Qr*Math.sin(gi),bi=ci*Math.sin(gi)+Qr*Math.cos(gi);return{x:Oi,y:bi}};if(fn)Tn=fn[0],Un=fn[1],Kn=fn[2],tr=fn[3];else{Mn=or(Vt,Ht,-Cn),Vt=Mn.x,Ht=Mn.y,Mn=or(He,pn,-Cn),He=Mn.x,pn=Mn.y,Vt===He&&Ht===pn&&(He+=1,pn+=1);var nr=(Vt-He)/2,er=(Ht-pn)/2,Sr=nr*nr/(re*re)+er*er/(pe*pe);Sr>1&&(Sr=Math.sqrt(Sr),re=Sr*re,pe=Sr*pe);var Vr=re*re,ti=pe*pe,hi=(we===Re?-1:1)*Math.sqrt(Math.abs((Vr*ti-Vr*er*er-ti*nr*nr)/(Vr*er*er+ti*nr*nr)));Kn=hi*re*er/pe+(Vt+He)/2,tr=hi*-pe*nr/re+(Ht+pn)/2,Tn=Math.asin(Number(((Ht-tr)/pe).toFixed(9))),Un=Math.asin(Number(((pn-tr)/pe).toFixed(9))),Tn=Vt<Kn?Math.PI-Tn:Tn,Un=He<Kn?Math.PI-Un:Un,Tn<0&&(Tn=Math.PI*2+Tn),Un<0&&(Un=Math.PI*2+Un),Re&&Tn>Un&&(Tn=Tn-Math.PI*2),!Re&&Un>Tn&&(Un=Un-Math.PI*2)}var Fi=Un-Tn;if(Math.abs(Fi)>Rn){var to=Un,si=He,Ti=pn;Un=Tn+Rn*(Re&&Un>Tn?1:-1),He=Kn+re*Math.cos(Un),pn=tr+pe*Math.sin(Un),kn=jt(He,pn,re,pe,ye,0,Re,si,Ti,[Un,to,Kn,tr])}Fi=Un-Tn;var _i=Math.cos(Tn),Li=Math.sin(Tn),Vi=Math.cos(Un),ro=Math.sin(Un),jr=Math.tan(Fi/4),Ji=4/3*re*jr,pr=4/3*pe*jr,Yr=[Vt,Ht],Br=[Vt+Ji*Li,Ht-pr*_i],Nr=[He+Ji*ro,pn-pr*Vi],Xr=[He,pn];if(Br[0]=2*Yr[0]-Br[0],Br[1]=2*Yr[1]-Br[1],fn)return[Br,Nr,Xr].concat(kn);kn=[Br,Nr,Xr].concat(kn).join().split(",");for(var Kr=[],ni=0,fi=kn.length;ni<fi;ni++)Kr[ni]=ni%2?or(kn[ni-1],kn[ni],Cn).y:or(kn[ni],kn[ni+1],Cn).x;return Kr},dt=function(Vt,Ht,re,pe){return[Vt,Ht,re,pe,re,pe]},ht=function(Vt,Ht,re,pe,ye,we){var Re=1/3,He=2/3;return[Re*Vt+He*re,Re*Ht+He*pe,Re*ye+He*re,Re*we+He*pe,ye,we]};function St(jt,Vt){var Ht=Z(jt),re=Vt&&Z(Vt),pe={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ye={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},we=[],Re=[],He="",pn="",fn,Rn=function(nr,er,Sr){var Vr,ti;if(!nr)return["C",er.x,er.y,er.x,er.y,er.x,er.y];switch(!(nr[0]in{T:1,Q:1})&&(er.qx=er.qy=null),nr[0]){case"M":er.X=nr[1],er.Y=nr[2];break;case"A":nr=["C"].concat(et.apply(0,[er.x,er.y].concat(nr.slice(1))));break;case"S":Sr==="C"||Sr==="S"?(Vr=er.x*2-er.bx,ti=er.y*2-er.by):(Vr=er.x,ti=er.y),nr=["C",Vr,ti].concat(nr.slice(1));break;case"T":Sr==="Q"||Sr==="T"?(er.qx=er.x*2-er.qx,er.qy=er.y*2-er.qy):(er.qx=er.x,er.qy=er.y),nr=["C"].concat(ht(er.x,er.y,er.qx,er.qy,nr[1],nr[2]));break;case"Q":er.qx=nr[1],er.qy=nr[2],nr=["C"].concat(ht(er.x,er.y,nr[1],nr[2],nr[3],nr[4]));break;case"L":nr=["C"].concat(dt(er.x,er.y,nr[1],nr[2]));break;case"H":nr=["C"].concat(dt(er.x,er.y,nr[1],er.y));break;case"V":nr=["C"].concat(dt(er.x,er.y,er.x,nr[1]));break;case"Z":nr=["C"].concat(dt(er.x,er.y,er.X,er.Y));break;default:break}return nr},Cn=function(nr,er){if(nr[er].length>7){nr[er].shift();for(var Sr=nr[er];Sr.length;)we[er]="A",re&&(Re[er]="A"),nr.splice(er++,0,["C"].concat(Sr.splice(0,6)));nr.splice(er,1),fn=Math.max(Ht.length,re&&re.length||0)}},kn=function(nr,er,Sr,Vr,ti){nr&&er&&nr[ti][0]==="M"&&er[ti][0]!=="M"&&(er.splice(ti,0,["M",Vr.x,Vr.y]),Sr.bx=0,Sr.by=0,Sr.x=nr[ti][1],Sr.y=nr[ti][2],fn=Math.max(Ht.length,re&&re.length||0))};fn=Math.max(Ht.length,re&&re.length||0);for(var Mn=0;Mn<fn;Mn++){Ht[Mn]&&(He=Ht[Mn][0]),He!=="C"&&(we[Mn]=He,Mn&&(pn=we[Mn-1])),Ht[Mn]=Rn(Ht[Mn],pe,pn),we[Mn]!=="A"&&He==="C"&&(we[Mn]="C"),Cn(Ht,Mn),re&&(re[Mn]&&(He=re[Mn][0]),He!=="C"&&(Re[Mn]=He,Mn&&(pn=Re[Mn-1])),re[Mn]=Rn(re[Mn],ye,pn),Re[Mn]!=="A"&&He==="C"&&(Re[Mn]="C"),Cn(re,Mn)),kn(Ht,re,pe,ye,Mn),kn(re,Ht,ye,pe,Mn);var Tn=Ht[Mn],Un=re&&re[Mn],Kn=Tn.length,tr=re&&Un.length;pe.x=Tn[Kn-2],pe.y=Tn[Kn-1],pe.bx=parseFloat(Tn[Kn-4])||pe.x,pe.by=parseFloat(Tn[Kn-3])||pe.y,ye.bx=re&&(parseFloat(Un[tr-4])||ye.x),ye.by=re&&(parseFloat(Un[tr-3])||ye.y),ye.x=re&&Un[tr-2],ye.y=re&&Un[tr-1]}return re?[Ht,re]:Ht}var wt=function(Vt,Ht,re,pe,ye){var we=-3*Ht+9*re-9*pe+3*ye,Re=Vt*we+6*Ht-12*re+6*pe;return Vt*Re-3*Ht+3*re},xt=function(Vt,Ht,re,pe,ye,we,Re,He,pn){pn===null&&(pn=1),pn=pn>1?1:pn<0?0:pn;for(var fn=pn/2,Rn=12,Cn=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],kn=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Mn=0,Tn=0;Tn<Rn;Tn++){var Un=fn*Cn[Tn]+fn,Kn=wt(Un,Vt,re,ye,Re),tr=wt(Un,Ht,pe,we,He),or=Kn*Kn+tr*tr;Mn+=kn[Tn]*Math.sqrt(or)}return fn*Mn},ft=function(Vt,Ht,re,pe,ye,we,Re,He){for(var pn=[],fn=[[],[]],Rn,Cn,kn,Mn,Tn=0;Tn<2;++Tn){if(Tn===0?(Cn=6*Vt-12*re+6*ye,Rn=-3*Vt+9*re-9*ye+3*Re,kn=3*re-3*Vt):(Cn=6*Ht-12*pe+6*we,Rn=-3*Ht+9*pe-9*we+3*He,kn=3*pe-3*Ht),Math.abs(Rn)<1e-12){if(Math.abs(Cn)<1e-12)continue;Mn=-kn/Cn,Mn>0&&Mn<1&&pn.push(Mn);continue}var Un=Cn*Cn-4*kn*Rn,Kn=Math.sqrt(Un);if(!(Un<0)){var tr=(-Cn+Kn)/(2*Rn);tr>0&&tr<1&&pn.push(tr);var or=(-Cn-Kn)/(2*Rn);or>0&&or<1&&pn.push(or)}}for(var nr=pn.length,er=nr,Sr;nr--;)Mn=pn[nr],Sr=1-Mn,fn[0][nr]=Sr*Sr*Sr*Vt+3*Sr*Sr*Mn*re+3*Sr*Mn*Mn*ye+Mn*Mn*Mn*Re,fn[1][nr]=Sr*Sr*Sr*Ht+3*Sr*Sr*Mn*pe+3*Sr*Mn*Mn*we+Mn*Mn*Mn*He;return fn[0][er]=Vt,fn[1][er]=Ht,fn[0][er+1]=Re,fn[1][er+1]=He,fn[0].length=fn[1].length=er+2,{min:{x:Math.min.apply(0,fn[0]),y:Math.min.apply(0,fn[1])},max:{x:Math.max.apply(0,fn[0]),y:Math.max.apply(0,fn[1])}}},Bt=function(Vt,Ht,re,pe,ye,we,Re,He){if(!(Math.max(Vt,re)<Math.min(ye,Re)||Math.min(Vt,re)>Math.max(ye,Re)||Math.max(Ht,pe)<Math.min(we,He)||Math.min(Ht,pe)>Math.max(we,He))){var pn=(Vt*pe-Ht*re)*(ye-Re)-(Vt-re)*(ye*He-we*Re),fn=(Vt*pe-Ht*re)*(we-He)-(Ht-pe)*(ye*He-we*Re),Rn=(Vt-re)*(we-He)-(Ht-pe)*(ye-Re);if(!!Rn){var Cn=pn/Rn,kn=fn/Rn,Mn=+Cn.toFixed(2),Tn=+kn.toFixed(2);if(!(Mn<+Math.min(Vt,re).toFixed(2)||Mn>+Math.max(Vt,re).toFixed(2)||Mn<+Math.min(ye,Re).toFixed(2)||Mn>+Math.max(ye,Re).toFixed(2)||Tn<+Math.min(Ht,pe).toFixed(2)||Tn>+Math.max(Ht,pe).toFixed(2)||Tn<+Math.min(we,He).toFixed(2)||Tn>+Math.max(we,He).toFixed(2)))return{x:Cn,y:kn}}}},Rt=function(Vt,Ht,re){return Ht>=Vt.x&&Ht<=Vt.x+Vt.width&&re>=Vt.y&&re<=Vt.y+Vt.height},Ot=function(Vt,Ht,re,pe){return Vt===null&&(Vt=Ht=re=pe=0),Ht===null&&(Ht=Vt.y,re=Vt.width,pe=Vt.height,Vt=Vt.x),{x:Vt,y:Ht,width:re,w:re,height:pe,h:pe,x2:Vt+re,y2:Ht+pe,cx:Vt+re/2,cy:Ht+pe/2,r1:Math.min(re,pe)/2,r2:Math.max(re,pe)/2,r0:Math.sqrt(re*re+pe*pe)/2,path:O(Vt,Ht,re,pe),vb:[Vt,Ht,re,pe].join(" ")}},X=function(Vt,Ht){return Vt=Ot(Vt),Ht=Ot(Ht),Rt(Ht,Vt.x,Vt.y)||Rt(Ht,Vt.x2,Vt.y)||Rt(Ht,Vt.x,Vt.y2)||Rt(Ht,Vt.x2,Vt.y2)||Rt(Vt,Ht.x,Ht.y)||Rt(Vt,Ht.x2,Ht.y)||Rt(Vt,Ht.x,Ht.y2)||Rt(Vt,Ht.x2,Ht.y2)||(Vt.x<Ht.x2&&Vt.x>Ht.x||Ht.x<Vt.x2&&Ht.x>Vt.x)&&(Vt.y<Ht.y2&&Vt.y>Ht.y||Ht.y<Vt.y2&&Ht.y>Vt.y)},ut=function(Vt,Ht,re,pe,ye,we,Re,He){Object(rt.isArray)(Vt)||(Vt=[Vt,Ht,re,pe,ye,we,Re,He]);var pn=ft.apply(null,Vt);return Ot(pn.min.x,pn.min.y,pn.max.x-pn.min.x,pn.max.y-pn.min.y)},vt=function(Vt,Ht,re,pe,ye,we,Re,He,pn){var fn=1-pn,Rn=Math.pow(fn,3),Cn=Math.pow(fn,2),kn=pn*pn,Mn=kn*pn,Tn=Rn*Vt+Cn*3*pn*re+fn*3*pn*pn*ye+Mn*Re,Un=Rn*Ht+Cn*3*pn*pe+fn*3*pn*pn*we+Mn*He,Kn=Vt+2*pn*(re-Vt)+kn*(ye-2*re+Vt),tr=Ht+2*pn*(pe-Ht)+kn*(we-2*pe+Ht),or=re+2*pn*(ye-re)+kn*(Re-2*ye+re),nr=pe+2*pn*(we-pe)+kn*(He-2*we+pe),er=fn*Vt+pn*re,Sr=fn*Ht+pn*pe,Vr=fn*ye+pn*Re,ti=fn*we+pn*He,hi=90-Math.atan2(Kn-or,tr-nr)*180/Math.PI;return{x:Tn,y:Un,m:{x:Kn,y:tr},n:{x:or,y:nr},start:{x:er,y:Sr},end:{x:Vr,y:ti},alpha:hi}},pt=function(Vt,Ht,re){var pe=ut(Vt),ye=ut(Ht);if(!X(pe,ye))return re?0:[];for(var we=xt.apply(0,Vt),Re=xt.apply(0,Ht),He=~~(we/8),pn=~~(Re/8),fn=[],Rn=[],Cn={},kn=re?0:[],Mn=0;Mn<He+1;Mn++){var Tn=vt.apply(0,Vt.concat(Mn/He));fn.push({x:Tn.x,y:Tn.y,t:Mn/He})}for(var Mn=0;Mn<pn+1;Mn++){var Tn=vt.apply(0,Ht.concat(Mn/pn));Rn.push({x:Tn.x,y:Tn.y,t:Mn/pn})}for(var Mn=0;Mn<He;Mn++)for(var Un=0;Un<pn;Un++){var Kn=fn[Mn],tr=fn[Mn+1],or=Rn[Un],nr=Rn[Un+1],er=Math.abs(tr.x-Kn.x)<.001?"y":"x",Sr=Math.abs(nr.x-or.x)<.001?"y":"x",Vr=Bt(Kn.x,Kn.y,tr.x,tr.y,or.x,or.y,nr.x,nr.y);if(Vr){if(Cn[Vr.x.toFixed(4)]===Vr.y.toFixed(4))continue;Cn[Vr.x.toFixed(4)]=Vr.y.toFixed(4);var ti=Kn.t+Math.abs((Vr[er]-Kn[er])/(tr[er]-Kn[er]))*(tr.t-Kn.t),hi=or.t+Math.abs((Vr[Sr]-or[Sr])/(nr[Sr]-or[Sr]))*(nr.t-or.t);ti>=0&&ti<=1&&hi>=0&&hi<=1&&(re?kn++:kn.push({x:Vr.x,y:Vr.y,t1:ti,t2:hi}))}}return kn},Et=function(Vt,Ht,re){Vt=St(Vt),Ht=St(Ht);for(var pe,ye,we,Re,He,pn,fn,Rn,Cn,kn,Mn=re?0:[],Tn=0,Un=Vt.length;Tn<Un;Tn++){var Kn=Vt[Tn];if(Kn[0]==="M")pe=He=Kn[1],ye=pn=Kn[2];else{Kn[0]==="C"?(Cn=[pe,ye].concat(Kn.slice(1)),pe=Cn[6],ye=Cn[7]):(Cn=[pe,ye,pe,ye,He,pn,He,pn],pe=He,ye=pn);for(var tr=0,or=Ht.length;tr<or;tr++){var nr=Ht[tr];if(nr[0]==="M")we=fn=nr[1],Re=Rn=nr[2];else{nr[0]==="C"?(kn=[we,Re].concat(nr.slice(1)),we=kn[6],Re=kn[7]):(kn=[we,Re,we,Re,fn,Rn,fn,Rn],we=fn,Re=Rn);var er=pt(Cn,kn,re);if(re)Mn+=er;else{for(var Sr=0,Vr=er.length;Sr<Vr;Sr++)er[Sr].segment1=Tn,er[Sr].segment2=tr,er[Sr].bez1=Cn,er[Sr].bez2=kn;Mn=Mn.concat(er)}}}}}return Mn};function q(jt,Vt){return Et(jt,Vt)}var st=/,?([a-z]),?/gi;function it(jt){return jt.join(",").replace(st,"$1")}function z(jt){return Math.sqrt(jt[0]*jt[0]+jt[1]*jt[1])}function P(jt,Vt){return z(jt)*z(Vt)?(jt[0]*Vt[0]+jt[1]*Vt[1])/(z(jt)*z(Vt)):1}function H(jt,Vt){return(jt[0]*Vt[1]<jt[1]*Vt[0]?-1:1)*Math.acos(P(jt,Vt))}function k(jt,Vt){return jt[0]===Vt[0]&&jt[1]===Vt[1]}function d(jt,Vt){var Ht=Vt[1],re=Vt[2],pe=Object(rt.mod)(Object(rt.toRadian)(Vt[3]),Math.PI*2),ye=Vt[4],we=Vt[5],Re=jt[0],He=jt[1],pn=Vt[6],fn=Vt[7],Rn=Math.cos(pe)*(Re-pn)/2+Math.sin(pe)*(He-fn)/2,Cn=-1*Math.sin(pe)*(Re-pn)/2+Math.cos(pe)*(He-fn)/2,kn=Rn*Rn/(Ht*Ht)+Cn*Cn/(re*re);kn>1&&(Ht*=Math.sqrt(kn),re*=Math.sqrt(kn));var Mn=Ht*Ht*(Cn*Cn)+re*re*(Rn*Rn),Tn=Mn?Math.sqrt((Ht*Ht*(re*re)-Mn)/Mn):1;ye===we&&(Tn*=-1),isNaN(Tn)&&(Tn=0);var Un=re?Tn*Ht*Cn/re:0,Kn=Ht?Tn*-re*Rn/Ht:0,tr=(Re+pn)/2+Math.cos(pe)*Un-Math.sin(pe)*Kn,or=(He+fn)/2+Math.sin(pe)*Un+Math.cos(pe)*Kn,nr=[(Rn-Un)/Ht,(Cn-Kn)/re],er=[(-1*Rn-Un)/Ht,(-1*Cn-Kn)/re],Sr=H([1,0],nr),Vr=H(nr,er);return P(nr,er)<=-1&&(Vr=Math.PI),P(nr,er)>=1&&(Vr=0),we===0&&Vr>0&&(Vr=Vr-2*Math.PI),we===1&&Vr<0&&(Vr=Vr+2*Math.PI),{cx:tr,cy:or,rx:k(jt,[pn,fn])?0:Ht,ry:k(jt,[pn,fn])?0:re,startAngle:Sr,endAngle:Sr+Vr,xRotation:pe,arcFlag:ye,sweepFlag:we}}function g(jt,Vt){return[Vt[0]+(Vt[0]-jt[0]),Vt[1]+(Vt[1]-jt[1])]}function F(jt){jt=r(jt);for(var Vt=[],Ht=null,re=null,pe=null,ye=0,we=jt.length,Re=0;Re<we;Re++){var He=jt[Re];re=jt[Re+1];var pn=He[0],fn={command:pn,prePoint:Ht,params:He,startTangent:null,endTangent:null};switch(pn){case"M":pe=[He[1],He[2]],ye=Re;break;case"A":var Rn=d(Ht,He);fn.arcParams=Rn;break;default:break}if(pn==="Z")Ht=pe,re=jt[ye+1];else{var Cn=He.length;Ht=[He[Cn-2],He[Cn-1]]}re&&re[0]==="Z"&&(re=jt[ye],Vt[ye]&&(Vt[ye].prePoint=Ht)),fn.currentPoint=Ht,Vt[ye]&&k(Ht,Vt[ye].currentPoint)&&(Vt[ye].prePoint=fn.prePoint);var kn=re?[re[re.length-2],re[re.length-1]]:null;fn.nextPoint=kn;var Mn=fn.prePoint;if(["L","H","V"].includes(pn))fn.startTangent=[Mn[0]-Ht[0],Mn[1]-Ht[1]],fn.endTangent=[Ht[0]-Mn[0],Ht[1]-Mn[1]];else if(pn==="Q"){var Tn=[He[1],He[2]];fn.startTangent=[Mn[0]-Tn[0],Mn[1]-Tn[1]],fn.endTangent=[Ht[0]-Tn[0],Ht[1]-Tn[1]]}else if(pn==="T"){var Un=Vt[Re-1],Tn=g(Un.currentPoint,Mn);Un.command==="Q"?(fn.command="Q",fn.startTangent=[Mn[0]-Tn[0],Mn[1]-Tn[1]],fn.endTangent=[Ht[0]-Tn[0],Ht[1]-Tn[1]]):(fn.command="TL",fn.startTangent=[Mn[0]-Ht[0],Mn[1]-Ht[1]],fn.endTangent=[Ht[0]-Mn[0],Ht[1]-Mn[1]])}else if(pn==="C"){var Kn=[He[1],He[2]],tr=[He[3],He[4]];fn.startTangent=[Mn[0]-Kn[0],Mn[1]-Kn[1]],fn.endTangent=[Ht[0]-tr[0],Ht[1]-tr[1]]}else if(pn==="S"){var Un=Vt[Re-1],Kn=g(Un.currentPoint,Mn),tr=[He[1],He[2]];Un.command==="C"?(fn.command="C",fn.startTangent=[Mn[0]-Kn[0],Mn[1]-Kn[1]],fn.endTangent=[Ht[0]-tr[0],Ht[1]-tr[1]]):(fn.command="SQ",fn.startTangent=[Mn[0]-tr[0],Mn[1]-tr[1]],fn.endTangent=[Ht[0]-tr[0],Ht[1]-tr[1]])}else if(pn==="A"){var or=.001,nr=fn.arcParams||{},er=nr.cx,Sr=er===void 0?0:er,Vr=nr.cy,ti=Vr===void 0?0:Vr,hi=nr.rx,Fi=hi===void 0?0:hi,to=nr.ry,si=to===void 0?0:to,Ti=nr.sweepFlag,_i=Ti===void 0?0:Ti,Li=nr.startAngle,Vi=Li===void 0?0:Li,ro=nr.endAngle,jr=ro===void 0?0:ro;_i===0&&(or*=-1);var Ji=Fi*Math.cos(Vi-or)+Sr,pr=si*Math.sin(Vi-or)+ti;fn.startTangent=[Ji-pe[0],pr-pe[1]];var Yr=Fi*Math.cos(Vi+jr+or)+Sr,Br=si*Math.sin(Vi+jr-or)+ti;fn.endTangent=[Mn[0]-Yr,Mn[1]-Br]}Vt.push(fn)}return Vt}var V=function(Vt,Ht,re){return Vt>=Ht&&Vt<=re};function tt(jt,Vt,Ht,re){var pe=.001,ye={x:Ht.x-jt.x,y:Ht.y-jt.y},we={x:Vt.x-jt.x,y:Vt.y-jt.y},Re={x:re.x-Ht.x,y:re.y-Ht.y},He=we.x*Re.y-we.y*Re.x,pn=He*He,fn=we.x*we.x+we.y*we.y,Rn=Re.x*Re.x+Re.y*Re.y,Cn=null;if(pn>pe*fn*Rn){var kn=(ye.x*Re.y-ye.y*Re.x)/He,Mn=(ye.x*we.y-ye.y*we.x)/He;V(kn,0,1)&&V(Mn,0,1)&&(Cn={x:jt.x+kn*we.x,y:jt.y+kn*we.y})}return Cn}var ot=1e-6;function at(jt){return Math.abs(jt)<ot?0:jt<0?-1:1}function At(jt,Vt,Ht){return(Ht[0]-jt[0])*(Vt[1]-jt[1])==(Vt[0]-jt[0])*(Ht[1]-jt[1])&&Math.min(jt[0],Vt[0])<=Ht[0]&&Ht[0]<=Math.max(jt[0],Vt[0])&&Math.min(jt[1],Vt[1])<=Ht[1]&&Ht[1]<=Math.max(jt[1],Vt[1])}function yt(jt,Vt,Ht){var re=!1,pe=jt.length;if(pe<=2)return!1;for(var ye=0;ye<pe;ye++){var we=jt[ye],Re=jt[(ye+1)%pe];if(At(we,Re,[Vt,Ht]))return!0;at(we[1]-Ht)>0!=at(Re[1]-Ht)>0&&at(Vt-(Ht-we[1])*(we[0]-Re[0])/(we[1]-Re[1])-we[0])<0&&(re=!re)}return re}function gt(jt){for(var Vt=[],Ht=jt.length,re=0;re<Ht-1;re++){var pe=jt[re],ye=jt[re+1];Vt.push({from:{x:pe[0],y:pe[1]},to:{x:ye[0],y:ye[1]}})}if(Vt.length>1){var we=jt[0],Re=jt[Ht-1];Vt.push({from:{x:Re[0],y:Re[1]},to:{x:we[0],y:we[1]}})}return Vt}function bt(jt,Vt){var Ht=!1;return Object(rt.each)(jt,function(re){if(tt(re.from,re.to,Vt.from,Vt.to))return Ht=!0,!1}),Ht}function Tt(jt){var Vt=jt.map(function(re){return re[0]}),Ht=jt.map(function(re){return re[1]});return{minX:Math.min.apply(null,Vt),maxX:Math.max.apply(null,Vt),minY:Math.min.apply(null,Ht),maxY:Math.max.apply(null,Ht)}}function Dt(jt,Vt){return!(Vt.minX>jt.maxX||Vt.maxX<jt.minX||Vt.minY>jt.maxY||Vt.maxY<jt.minY)}function Ut(jt,Vt){if(jt.length<2||Vt.length<2)return!1;var Ht=Tt(jt),re=Tt(Vt);if(!Dt(Ht,re))return!1;var pe=!1;if(Object(rt.each)(Vt,function(He){if(yt(jt,He[0],He[1]))return pe=!0,!1}),pe||(Object(rt.each)(jt,function(He){if(yt(Vt,He[0],He[1]))return pe=!0,!1}),pe))return!0;var ye=gt(jt),we=gt(Vt),Re=!1;return Object(rt.each)(we,function(He){if(bt(ye,He))return Re=!0,!1}),Re}},MaEA:function(Fn,Gt,_){"use strict";var rt=_("mrSG"),a=_("zK8m"),E=_("aSjE"),e=function(r){Object(rt.b)(p,r);function p(b){return r.call(this,b)||this}return p.prototype._isInBBox=function(b,S){var l=this.getBBox();return l.minX<=b&&l.maxX>=b&&l.minY<=S&&l.maxY>=S},p.prototype.afterAttrsChange=function(b){r.prototype.afterAttrsChange.call(this,b),this.clearCacheBBox()},p.prototype.getBBox=function(){var b=this.cfg.bbox;return b||(b=this.calculateBBox(),this.set("bbox",b)),b},p.prototype.getCanvasBBox=function(){var b=this.cfg.canvasBBox;return b||(b=this.calculateCanvasBBox(),this.set("canvasBBox",b)),b},p.prototype.applyMatrix=function(b){r.prototype.applyMatrix.call(this,b),this.set("canvasBBox",null)},p.prototype.calculateCanvasBBox=function(){var b=this.getBBox(),S=this.getTotalMatrix(),l=b.minX,A=b.minY,j=b.maxX,y=b.maxY;if(S){var n=Object(E.c)(S,[b.minX,b.minY]),s=Object(E.c)(S,[b.maxX,b.minY]),h=Object(E.c)(S,[b.minX,b.maxY]),M=Object(E.c)(S,[b.maxX,b.maxY]);l=Math.min(n[0],s[0],h[0],M[0]),j=Math.max(n[0],s[0],h[0],M[0]),A=Math.min(n[1],s[1],h[1],M[1]),y=Math.max(n[1],s[1],h[1],M[1])}var O=this.attrs;if(O.shadowColor){var T=O.shadowBlur,v=T===void 0?0:T,m=O.shadowOffsetX,C=m===void 0?0:m,D=O.shadowOffsetY,Y=D===void 0?0:D,Z=l-v+C,et=j+v+C,dt=A-v+Y,ht=y+v+Y;l=Math.min(l,Z),j=Math.max(j,et),A=Math.min(A,dt),y=Math.max(y,ht)}return{x:l,y:A,minX:l,minY:A,maxX:j,maxY:y,width:j-l,height:y-A}},p.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},p.prototype.isClipShape=function(){return this.get("isClipShape")},p.prototype.isInShape=function(b,S){return!1},p.prototype.isOnlyHitBox=function(){return!1},p.prototype.isHit=function(b,S){var l=this.get("startArrowShape"),A=this.get("endArrowShape"),j=[b,S,1];j=this.invertFromMatrix(j);var y=j[0],n=j[1],s=this._isInBBox(y,n);return this.isOnlyHitBox()?s:!!(s&&!this.isClipped(y,n)&&(this.isInShape(y,n)||l&&l.isHit(y,n)||A&&A.isHit(y,n)))},p}(a.a);Gt.a=e},MeYt:function(Fn,Gt,_){"use strict";var rt=_("mrSG"),a=_("iTfj"),E=_("1//c"),e=_("jqgP"),r=_("5UbV"),p=_("NmWf"),b="update_status",S=["visible","tip","delegateObject"],l=["container","group","shapesMap","isRegister","isUpdating","destroyed"],A=function(j){Object(rt.b)(y,j);function y(){return j!==null&&j.apply(this,arguments)||this}return y.prototype.getDefaultCfg=function(){var n=j.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},n),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},y.prototype.remove=function(){this.clear();var n=this.get("group");n.remove()},y.prototype.clear=function(){var n=this.get("group");n.clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},y.prototype.getChildComponentById=function(n){var s=this.getElementById(n),h=s&&s.get("component");return h},y.prototype.getElementById=function(n){return this.get("shapesMap")[n]},y.prototype.getElementByLocalId=function(n){var s=this.getElementId(n);return this.getElementById(s)},y.prototype.getElementsByName=function(n){var s=[];return Object(a.each)(this.get("shapesMap"),function(h){h.get("name")===n&&s.push(h)}),s},y.prototype.getContainer=function(){return this.get("container")},y.prototype.updateInner=function(n){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},y.prototype.render=function(){var n=this.get("offScreenGroup");n||(n=this.offScreenRender());var s=this.get("group");this.updateElements(n,s),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},y.prototype.show=function(){var n=this.get("group");n.show(),this.set("visible",!0)},y.prototype.hide=function(){var n=this.get("group");n.hide(),this.set("visible",!1)},y.prototype.setCapture=function(n){var s=this.get("group");s.set("capture",n),this.set("capture",n)},y.prototype.destroy=function(){this.removeEvent(),this.remove(),j.prototype.destroy.call(this)},y.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},y.prototype.getLayoutBBox=function(){var n=this.get("group"),s=this.getInnerLayoutBBox(),h=n.getTotalMatrix();return h&&(s=Object(e.a)(h,s)),s},y.prototype.on=function(n,s,h){var M=this.get("group");return M.on(n,s,h),this},y.prototype.off=function(n,s){var h=this.get("group");return h&&h.off(n,s),this},y.prototype.emit=function(n,s){var h=this.get("group");h.emit(n,s)},y.prototype.init=function(){j.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},y.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},y.prototype.delegateEmit=function(n,s){var h=this.get("group");s.target=h,h.emit(n,s),Object(E.a)(h,n,s)},y.prototype.createOffScreenGroup=function(){var n=this.get("group"),s=n.getGroupBase(),h=new s({delegateObject:this.getDelegateObject()});return h},y.prototype.applyOffset=function(){var n=this.get("offsetX"),s=this.get("offsetY");this.moveElementTo(this.get("group"),{x:n,y:s})},y.prototype.initGroup=function(){var n=this.get("container");this.set("group",n.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},y.prototype.offScreenRender=function(){this.clearOffScreenCache();var n=this.createOffScreenGroup();return this.renderInner(n),this.set("offScreenGroup",n),this.set("offScreenBBox",Object(r.d)(n)),n},y.prototype.addGroup=function(n,s){this.appendDelegateObject(n,s);var h=n.addGroup(s);return this.get("isRegister")&&this.registerElement(h),h},y.prototype.addShape=function(n,s){this.appendDelegateObject(n,s);var h=n.addShape(s);return this.get("isRegister")&&this.registerElement(h),h},y.prototype.addComponent=function(n,s){var h=s.id,M=s.component,O=Object(rt.c)(s,["id","component"]),T=new M(Object(rt.a)(Object(rt.a)({},O),{id:h,container:n,updateAutoRender:this.get("updateAutoRender")}));return T.init(),T.render(),this.get("isRegister")&&this.registerElement(T.get("group")),T},y.prototype.initEvent=function(){},y.prototype.removeEvent=function(){var n=this.get("group");n.off()},y.prototype.getElementId=function(n){var s=this.get("id"),h=this.get("name");return s+"-"+h+"-"+n},y.prototype.registerElement=function(n){var s=n.get("id");this.get("shapesMap")[s]=n},y.prototype.unregisterElement=function(n){var s=n.get("id");delete this.get("shapesMap")[s]},y.prototype.moveElementTo=function(n,s){var h=Object(e.f)(s);n.attr("matrix",h)},y.prototype.addAnimation=function(n,s,h){var M=s.attr("opacity");Object(a.isNil)(M)&&(M=1),s.attr("opacity",0),s.animate({opacity:M},h)},y.prototype.removeAnimation=function(n,s,h){s.animate({opacity:0},h)},y.prototype.updateAnimation=function(n,s,h,M){s.animate(h,M)},y.prototype.updateElements=function(n,s){var h=this,M=this.get("animate"),O=this.get("animateOption"),T=n.getChildren().slice(0),v;Object(a.each)(T,function(m){var C=m.get("id"),D=h.getElementById(C),Y=m.get("name");if(D)if(m.get("isComponent")){var Z=m.get("component"),et=D.get("component"),dt=Object(a.pick)(Z.cfg,Object(a.difference)(Object(a.keys)(Z.cfg),l));et.update(dt),D.set(b,"update")}else{var ht=h.getReplaceAttrs(D,m);M&&O.update?h.updateAnimation(Y,D,ht,O.update):D.attr(ht),m.isGroup()&&h.updateElements(m,D),Object(a.each)(S,function(ft){D.set(ft,m.get(ft))}),Object(r.m)(D,m),v=D,D.set(b,"update")}else{s.add(m);var St=s.getChildren();if(St.splice(St.length-1,1),v){var wt=St.indexOf(v);St.splice(wt+1,0,m)}else St.unshift(m);if(h.registerElement(m),m.set(b,"add"),m.get("isComponent")){var Z=m.get("component");Z.set("container",s)}else m.isGroup()&&h.registerNewGroup(m);if(v=m,M){var xt=h.get("isInit")?O.appear:O.enter;xt&&h.addAnimation(Y,m,xt)}}})},y.prototype.clearUpdateStatus=function(n){var s=n.getChildren();Object(a.each)(s,function(h){h.set(b,null)})},y.prototype.clearOffScreenCache=function(){var n=this.get("offScreenGroup");n&&n.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},y.prototype.getDelegateObject=function(){var n,s=this.get("name"),h=(n={},n[s]=this,n.component=this,n);return h},y.prototype.appendDelegateObject=function(n,s){var h=n.get("delegateObject");s.delegateObject||(s.delegateObject={}),Object(a.mix)(s.delegateObject,h)},y.prototype.getReplaceAttrs=function(n,s){var h=n.attr(),M=s.attr();return Object(a.each)(h,function(O,T){M[T]===void 0&&(M[T]=void 0)}),M},y.prototype.registerNewGroup=function(n){var s=this,h=n.getChildren();Object(a.each)(h,function(M){s.registerElement(M),M.set(b,"add"),M.isGroup()&&s.registerNewGroup(M)})},y.prototype.deleteElements=function(){var n=this,s=this.get("shapesMap"),h=[];Object(a.each)(s,function(T,v){!T.get(b)||T.destroyed?h.push([v,T]):T.set(b,null)});var M=this.get("animate"),O=this.get("animateOption");Object(a.each)(h,function(T){var v=T[0],m=T[1];if(!m.destroyed){var C=m.get("name");if(M&&O.leave){var D=Object(a.mix)({callback:function(){n.removeElement(m)}},O.leave);n.removeAnimation(C,m,D)}else n.removeElement(m)}delete s[v]})},y.prototype.removeElement=function(n){if(n.get("isGroup")){var s=n.get("component");s&&s.destroy()}n.remove()},y}(p.a);Gt.a=A},Mj7Y:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return k});var rt=_("mrSG"),a=_("zJSt"),E=_("YuPD"),e=_("w02o"),r=_("tKoa"),p=_("iTfj"),b={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function S(d,g){return g=Object(p.assign)({},b,g),l(d,g)}function l(d,g){var F=wt();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach(function(yt){Object(p.isNil)(g[yt])||F[yt](g[yt])}),F.words(d),g.imageMask&&F.createMask(g.imageMask);var V=F.start(),tt=V._tags;tt.forEach(function(yt){yt.x+=g.size[0]/2,yt.y+=g.size[1]/2});var ot=g.size,at=ot[0],At=ot[1];return tt.push({text:"",value:0,x:0,y:0,opacity:0}),tt.push({text:"",value:0,x:at,y:At,opacity:0}),tt}var A=Math.PI/180,j=1<<11>>5,y=1<<11;function n(d){return d.text}function s(){return"serif"}function h(){return"normal"}function M(d){return d.value}function O(){return~~(Math.random()*2)*90}function T(){return 1}function v(d,g,F,V){if(!g.sprite){var tt=d.context,ot=d.ratio;tt.clearRect(0,0,(j<<5)/ot,y/ot);var at=0,At=0,yt=0,gt=F.length;for(--V;++V<gt;){g=F[V],tt.save(),tt.font=g.style+" "+g.weight+" "+~~((g.size+1)/ot)+"px "+g.font;var bt=tt.measureText(g.text+"m").width*ot,Tt=g.size<<1;if(g.rotate){var Dt=Math.sin(g.rotate*A),Ut=Math.cos(g.rotate*A),jt=bt*Ut,Vt=bt*Dt,Ht=Tt*Ut,re=Tt*Dt;bt=Math.max(Math.abs(jt+re),Math.abs(jt-re))+31>>5<<5,Tt=~~Math.max(Math.abs(Vt+Ht),Math.abs(Vt-Ht))}else bt=bt+31>>5<<5;if(Tt>yt&&(yt=Tt),at+bt>=j<<5&&(at=0,At+=yt,yt=0),At+Tt>=y)break;tt.translate((at+(bt>>1))/ot,(At+(Tt>>1))/ot),g.rotate&&tt.rotate(g.rotate*A),tt.fillText(g.text,0,0),g.padding&&(tt.lineWidth=2*g.padding,tt.strokeText(g.text,0,0)),tt.restore(),g.width=bt,g.height=Tt,g.xoff=at,g.yoff=At,g.x1=bt>>1,g.y1=Tt>>1,g.x0=-g.x1,g.y0=-g.y1,g.hasText=!0,at+=bt}for(var pe=tt.getImageData(0,0,(j<<5)/ot,y/ot).data,ye=[];--V>=0;)if(g=F[V],!!g.hasText){for(var bt=g.width,we=bt>>5,Tt=g.y1-g.y0,Re=0;Re<Tt*we;Re++)ye[Re]=0;if(at=g.xoff,at==null)return;At=g.yoff;for(var He=0,pn=-1,fn=0;fn<Tt;fn++){for(var Re=0;Re<bt;Re++){var Rn=we*fn+(Re>>5),Cn=pe[(At+fn)*(j<<5)+(at+Re)<<2]?1<<31-Re%32:0;ye[Rn]|=Cn,He|=Cn}He?pn=fn:(g.y0++,Tt--,fn--,At++)}g.y1=g.y0+pn,g.sprite=ye.slice(0,(g.y1-g.y0)*we)}}}function m(d,g,F){F>>=5;for(var V=d.sprite,tt=d.width>>5,ot=d.x-(tt<<4),at=ot&127,At=32-at,yt=d.y1-d.y0,gt=(d.y+d.y0)*F+(ot>>5),bt,Tt=0;Tt<yt;Tt++){bt=0;for(var Dt=0;Dt<=tt;Dt++)if((bt<<At|(Dt<tt?(bt=V[Tt*tt+Dt])>>>at:0))&g[gt+Dt])return!0;gt+=F}return!1}function C(d,g){var F=d[0],V=d[1];g.x+g.x0<F.x&&(F.x=g.x+g.x0),g.y+g.y0<F.y&&(F.y=g.y+g.y0),g.x+g.x1>V.x&&(V.x=g.x+g.x1),g.y+g.y1>V.y&&(V.y=g.y+g.y1)}function D(d,g){return d.x+d.x1>g[0].x&&d.x+d.x0<g[1].x&&d.y+d.y1>g[0].y&&d.y+d.y0<g[1].y}function Y(d){var g=d[0]/d[1];return function(F){return[g*(F*=.1)*Math.cos(F),F*Math.sin(F)]}}function Z(d){var g=4,F=g*d[0]/d[1],V=0,tt=0;return function(ot){var at=ot<0?-1:1;switch(Math.sqrt(1+4*at*ot)-at&3){case 0:V+=F;break;case 1:tt+=g;break;case 2:V-=F;break;default:tt-=g;break}return[V,tt]}}function et(d){for(var g=[],F=-1;++F<d;)g[F]=0;return g}function dt(){return document.createElement("canvas")}function ht(d){return Object(p.isFunction)(d)?d:function(){return d}}var St={archimedean:Y,rectangular:Z};function wt(){var d=[256,256],g=s,F=M,V=h,tt=O,ot=T,at=Y,At=Math.random,yt=[],gt=Infinity,bt=n,Tt=h,Dt=dt,Ut={};Ut.start=function(){var Ht=d[0],re=d[1],pe=jt(Dt()),ye=Ut.board?Ut.board:et((d[0]>>5)*d[1]),we=yt.length,Re=[],He=yt.map(function(Cn,kn,Mn){return Cn.text=bt.call(this,Cn,kn,Mn),Cn.font=g.call(this,Cn,kn,Mn),Cn.style=Tt.call(this,Cn,kn,Mn),Cn.weight=V.call(this,Cn,kn,Mn),Cn.rotate=tt.call(this,Cn,kn,Mn),Cn.size=~~F.call(this,Cn,kn,Mn),Cn.padding=ot.call(this,Cn,kn,Mn),Cn}).sort(function(Cn,kn){return kn.size-Cn.size}),pn=-1,fn=Ut.board?[{x:0,y:0},{x:Ht,y:re}]:null;Rn();function Rn(){for(var Cn=Date.now();Date.now()-Cn<gt&&++pn<we;){var kn=He[pn];kn.x=Ht*(At()+.5)>>1,kn.y=re*(At()+.5)>>1,v(pe,kn,He,pn),kn.hasText&&Vt(ye,kn,fn)&&(Re.push(kn),fn?Ut.hasImage||C(fn,kn):fn=[{x:kn.x+kn.x0,y:kn.y+kn.y0},{x:kn.x+kn.x1,y:kn.y+kn.y1}],kn.x-=d[0]>>1,kn.y-=d[1]>>1)}Ut._tags=Re,Ut._bounds=fn}return Ut};function jt(Ht){Ht.width=Ht.height=1;var re=Math.sqrt(Ht.getContext("2d").getImageData(0,0,1,1).data.length>>2);Ht.width=(j<<5)/re,Ht.height=y/re;var pe=Ht.getContext("2d");return pe.fillStyle=pe.strokeStyle="red",pe.textAlign="center",{context:pe,ratio:re}}function Vt(Ht,re,pe){for(var ye=re.x,we=re.y,Re=Math.sqrt(d[0]*d[0]+d[1]*d[1]),He=at(d),pn=At()<.5?1:-1,fn,Rn=-pn,Cn,kn;(fn=He(Rn+=pn))&&(Cn=~~fn[0],kn=~~fn[1],!(Math.min(Math.abs(Cn),Math.abs(kn))>=Re));)if(re.x=ye+Cn,re.y=we+kn,!(re.x+re.x0<0||re.y+re.y0<0||re.x+re.x1>d[0]||re.y+re.y1>d[1])&&(!pe||!m(re,Ht,d[0]))&&(!pe||D(re,pe))){for(var Mn=re.sprite,Tn=re.width>>5,Un=d[0]>>5,Kn=re.x-(Tn<<4),tr=Kn&127,or=32-tr,nr=re.y1-re.y0,er=void 0,Sr=(re.y+re.y0)*Un+(Kn>>5),Vr=0;Vr<nr;Vr++){er=0;for(var ti=0;ti<=Tn;ti++)Ht[Sr+ti]|=er<<or|(ti<Tn?(er=Mn[Vr*Tn+ti])>>>tr:0);Sr+=Un}return delete re.sprite,!0}return!1}return Ut.createMask=function(Ht){var re=document.createElement("canvas"),pe=d[0],ye=d[1];if(!(!pe||!ye)){var we=pe>>5,Re=et((pe>>5)*ye);re.width=pe,re.height=ye;var He=re.getContext("2d");He.drawImage(Ht,0,0,Ht.width,Ht.height,0,0,pe,ye);for(var pn=He.getImageData(0,0,pe,ye).data,fn=0;fn<ye;fn++)for(var Rn=0;Rn<pe;Rn++){var Cn=we*fn+(Rn>>5),kn=fn*pe+Rn<<2,Mn=pn[kn]>=250&&pn[kn+1]>=250&&pn[kn+2]>=250,Tn=Mn?1<<31-Rn%32:0;Re[Cn]|=Tn}Ut.board=Re,Ut.hasImage=!0}},Ut.timeInterval=function(Ht){gt=Ht==null?Infinity:Ht},Ut.words=function(Ht){yt=Ht},Ut.size=function(Ht){d=[+Ht[0],+Ht[1]]},Ut.font=function(Ht){g=ht(Ht)},Ut.fontWeight=function(Ht){V=ht(Ht)},Ut.rotate=function(Ht){tt=ht(Ht)},Ut.spiral=function(Ht){at=St[Ht]||Ht},Ut.fontSize=function(Ht){F=ht(Ht)},Ut.padding=function(Ht){ot=ht(Ht)},Ut.random=function(Ht){At=ht(Ht)},Ut}function xt(d){var g=d.options,F=d.chart,V=F,tt=V.width,ot=V.height,at=V.padding,At=V.appendPadding,yt=V.ele,gt=g.data,bt=g.imageMask,Tt=g.wordField,Dt=g.weightField,Ut=g.colorField,jt=g.wordStyle,Vt=g.timeInterval,Ht=g.random,re=g.spiral,pe=g.autoFit,ye=pe===void 0?!0:pe,we=g.placementStrategy;if(!gt||!gt.length)return[];var Re=jt.fontFamily,He=jt.fontWeight,pn=jt.padding,fn=jt.fontSize,Rn=ut(gt,Dt),Cn=[Et(Rn),q(Rn)],kn=gt.map(function(Un){return{text:Un[Tt],value:Un[Dt],color:Un[Ut],datum:Un}}),Mn={imageMask:bt,font:Re,fontSize:X(fn,Cn),fontWeight:He,size:ft({width:tt,height:ot,padding:at,appendPadding:At,autoFit:ye,container:yt}),padding:pn,timeInterval:Vt,random:Ht,spiral:re,rotate:vt(g)};if(Object(p.isFunction)(we)){var Tn=kn.map(function(Un,Kn,tr){return Object(rt.a)(Object(rt.a)(Object(rt.a)({},Un),{hasText:!!Un.text,font:ht(Mn.font)(Un,Kn,tr),weight:ht(Mn.fontWeight)(Un,Kn,tr),rotate:ht(Mn.rotate)(Un,Kn,tr),size:ht(Mn.fontSize)(Un,Kn,tr),style:"normal"}),we.call(F,Un,Kn,tr))});return Tn.push({text:"",value:0,x:0,y:0,opacity:0}),Tn.push({text:"",value:0,x:Mn.size[0],y:Mn.size[1],opacity:0}),Tn}return S(kn,Mn)}function ft(d){var g=d.width,F=d.height,V=d.container,tt=d.autoFit,ot=d.padding,at=d.appendPadding;if(tt){var At=Object(E.g)(V);g=At.width,F=At.height}g=g||400,F=F||400;var yt=Bt({padding:ot,appendPadding:at}),gt=yt[0],bt=yt[1],Tt=yt[2],Dt=yt[3],Ut=[g-(Dt+bt),F-(gt+Tt)];return Ut}function Bt(d){var g=Rt(d.padding),F=Rt(d.appendPadding),V=g[0]+F[0],tt=g[1]+F[1],ot=g[2]+F[2],at=g[3]+F[3];return[V,tt,ot,at]}function Rt(d){if(Object(p.isNumber)(d))return[d,d,d,d];if(Object(p.isArray)(d)){var g=d.length;if(g===1)return[d[0],d[0],d[0],d[0]];if(g===2)return[d[0],d[1],d[0],d[1]];if(g===3)return[d[0],d[1],d[2],d[1]];if(g===4)return d}return[0,0,0,0]}function Ot(d){return new Promise(function(g,F){if(d instanceof HTMLImageElement){g(d);return}if(Object(p.isString)(d)){var V=new Image;V.crossOrigin="anonymous",V.src=d,V.onload=function(){g(V)},V.onerror=function(){Object(E.j)(E.a.ERROR,!1,"image %s load failed !!!",d),F()};return}Object(E.j)(E.a.WARN,d===void 0,"The type of imageMask option must be String or HTMLImageElement."),F()})}function X(d,g){if(Object(p.isFunction)(d))return d;if(Object(p.isArray)(d)){var F=d[0],V=d[1];if(!g)return function(){return(V+F)/2};var tt=g[0],ot=g[1];return ot===tt?function(){return(V+F)/2}:function(At){var yt=At.value;return(V-F)/(ot-tt)*(yt-tt)+F}}return function(){return d}}function ut(d,g){return d.map(function(F){return F[g]}).filter(function(F){return typeof F=="number"&&!isNaN(F)})}function vt(d){var g=pt(d),F=g.rotation,V=g.rotationSteps;if(!Object(p.isArray)(F))return F;var tt=F[0],ot=F[1],at=V===1?0:(ot-tt)/(V-1);return function(){return ot===tt?ot:Math.floor(Math.random()*V)*at}}function pt(d){var g=d.wordStyle.rotationSteps;return g<1&&(Object(E.j)(E.a.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),g=1),{rotation:d.wordStyle.rotation,rotationSteps:g}}function Et(d){return Math.min.apply(Math,d)}function q(d){return Math.max.apply(Math,d)}function st(d){var g=d.chart,F=d.options,V=F.colorField,tt=F.color,ot=xt(d);g.data(ot);var at=Object(E.b)({},d,{options:{xField:"x",yField:"y",seriesField:V&&"color",point:{color:tt,shape:"word-cloud"}}}),At=Object(r.e)(at).ext;return At.geometry.label(!1),g.coordinate().reflect("y"),g.axis(!1),d}function it(d){return Object(E.e)(Object(e.f)({x:{nice:!1},y:{nice:!1}}))(d)}function z(d){Object(E.e)(st,it,e.k,e.d,e.c,e.a,e.j,e.i)(d)}var P=_("Ihc8");Object(P.registerShape)("point","word-cloud",{draw:function(g,F){var V=g.x,tt=g.y,ot=F.addShape("text",{attrs:Object(rt.a)(Object(rt.a)({},H(g)),{x:V,y:tt})}),at=g.data.rotate;return typeof at=="number"&&P.Util.rotate(ot,at*Math.PI/180),ot}});function H(d){return{fontSize:d.data.size,text:d.data.text,textAlign:"center",fontFamily:d.data.font,fontWeight:d.data.weight,fill:d.color||d.defaultStyle.stroke,textBaseline:"alphabetic"}}var k=function(d){Object(rt.b)(g,d);function g(){var F=d!==null&&d.apply(this,arguments)||this;return F.type="word-cloud",F}return g.prototype.changeData=function(F){this.updateOption({data:F}),this.options.imageMask?this.render():this.chart.changeData(xt({chart:this.chart,options:this.options}))},g.prototype.getDefaultOptions=function(){return Object(E.b)({},d.prototype.getDefaultOptions.call(this),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value","color"],formatter:function(V){return{name:V.text,value:V.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}})},g.prototype.render=function(){var F=this;return new Promise(function(V){var tt=F.options.imageMask;if(!tt){d.prototype.render.call(F),V();return}var ot=function(At){F.options=Object(rt.a)(Object(rt.a)({},F.options),{imageMask:At||null}),d.prototype.render.call(F),V()};Ot(tt).then(ot).catch(ot)})},g.prototype.getSchemaAdaptor=function(){return z},g.prototype.triggerResize=function(){var F=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout(function(){d.prototype.triggerResize.call(F)}))},g}(a.a)},Mw2x:function(Fn,Gt,_){"use strict";var rt=_("mrSG"),a=_("zK8m"),E=_("sstZ"),e={},r="_INDEX";function p(y,n){if(y.set("canvas",n),y.isGroup()){var s=y.get("children");s.length&&s.forEach(function(h){p(h,n)})}}function b(y,n){if(y.set("timeline",n),y.isGroup()){var s=y.get("children");s.length&&s.forEach(function(h){b(h,n)})}}function S(y,n){var s=y.getChildren();return s.indexOf(n)>=0}function l(y,n,s){s===void 0&&(s=!0),s?n.destroy():(n.set("parent",null),n.set("canvas",null)),Object(E.j)(y.getChildren(),n)}function A(y){return function(n,s){var h=y(n,s);return h===0?n[r]-s[r]:h}}var j=function(y){Object(rt.b)(n,y);function n(){return y!==null&&y.apply(this,arguments)||this}return n.prototype.isCanvas=function(){return!1},n.prototype.getBBox=function(){var s=Infinity,h=-Infinity,M=Infinity,O=-Infinity,T=[],v=[],m=this.getChildren().filter(function(D){return D.get("visible")&&(!D.isGroup()||D.isGroup()&&D.getChildren().length>0)});m.length>0?(Object(E.a)(m,function(D){var Y=D.getBBox();T.push(Y.minX,Y.maxX),v.push(Y.minY,Y.maxY)}),s=Math.min.apply(null,T),h=Math.max.apply(null,T),M=Math.min.apply(null,v),O=Math.max.apply(null,v)):(s=0,h=0,M=0,O=0);var C={x:s,y:M,minX:s,minY:M,maxX:h,maxY:O,width:h-s,height:O-M};return C},n.prototype.getCanvasBBox=function(){var s=Infinity,h=-Infinity,M=Infinity,O=-Infinity,T=[],v=[],m=this.getChildren().filter(function(D){return D.get("visible")&&(!D.isGroup()||D.isGroup()&&D.getChildren().length>0)});m.length>0?(Object(E.a)(m,function(D){var Y=D.getCanvasBBox();T.push(Y.minX,Y.maxX),v.push(Y.minY,Y.maxY)}),s=Math.min.apply(null,T),h=Math.max.apply(null,T),M=Math.min.apply(null,v),O=Math.max.apply(null,v)):(s=0,h=0,M=0,O=0);var C={x:s,y:M,minX:s,minY:M,maxX:h,maxY:O,width:h-s,height:O-M};return C},n.prototype.getDefaultCfg=function(){var s=y.prototype.getDefaultCfg.call(this);return s.children=[],s},n.prototype.onAttrChange=function(s,h,M){if(y.prototype.onAttrChange.call(this,s,h,M),s==="matrix"){var O=this.getTotalMatrix();this._applyChildrenMarix(O)}},n.prototype.applyMatrix=function(s){var h=this.getTotalMatrix();y.prototype.applyMatrix.call(this,s);var M=this.getTotalMatrix();M!==h&&this._applyChildrenMarix(M)},n.prototype._applyChildrenMarix=function(s){var h=this.getChildren();Object(E.a)(h,function(M){M.applyMatrix(s)})},n.prototype.addShape=function(){for(var s=[],h=0;h<arguments.length;h++)s[h]=arguments[h];var M=s[0],O=s[1];Object(E.f)(M)?O=M:O.type=M;var T=e[O.type];T||(T=Object(E.k)(O.type),e[O.type]=T);var v=this.getShapeBase(),m=new v[T](O);return this.add(m),m},n.prototype.addGroup=function(){for(var s=[],h=0;h<arguments.length;h++)s[h]=arguments[h];var M=s[0],O=s[1],T;if(Object(E.d)(M))O?T=new M(O):T=new M({parent:this});else{var v=M||{},m=this.getGroupBase();T=new m(v)}return this.add(T),T},n.prototype.getCanvas=function(){var s;return this.isCanvas()?s=this:s=this.get("canvas"),s},n.prototype.getShape=function(s,h,M){if(!Object(E.b)(this))return null;var O=this.getChildren(),T;if(this.isCanvas())T=this._findShape(O,s,h,M);else{var v=[s,h,1];v=this.invertFromMatrix(v),this.isClipped(v[0],v[1])||(T=this._findShape(O,v[0],v[1],M))}return T},n.prototype._findShape=function(s,h,M,O){for(var T=null,v=s.length-1;v>=0;v--){var m=s[v];if(Object(E.b)(m)&&(m.isGroup()?T=m.getShape(h,M,O):m.isHit(h,M)&&(T=m)),T)break}return T},n.prototype.add=function(s){var h=this.getCanvas(),M=this.getChildren(),O=this.get("timeline"),T=s.getParent();T&&l(T,s,!1),s.set("parent",this),h&&p(s,h),O&&b(s,O),M.push(s),s.onCanvasChange("add"),this._applyElementMatrix(s)},n.prototype._applyElementMatrix=function(s){var h=this.getTotalMatrix();h&&s.applyMatrix(h)},n.prototype.getChildren=function(){return this.get("children")},n.prototype.sort=function(){var s=this.getChildren();Object(E.a)(s,function(h,M){return h[r]=M,h}),s.sort(A(function(h,M){return h.get("zIndex")-M.get("zIndex")})),this.onCanvasChange("sort")},n.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var s=this.getChildren(),h=s.length-1;h>=0;h--)s[h].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},n.prototype.destroy=function(){this.get("destroyed")||(this.clear(),y.prototype.destroy.call(this))},n.prototype.getFirst=function(){return this.getChildByIndex(0)},n.prototype.getLast=function(){var s=this.getChildren();return this.getChildByIndex(s.length-1)},n.prototype.getChildByIndex=function(s){var h=this.getChildren();return h[s]},n.prototype.getCount=function(){var s=this.getChildren();return s.length},n.prototype.contain=function(s){var h=this.getChildren();return h.indexOf(s)>-1},n.prototype.removeChild=function(s,h){h===void 0&&(h=!0),this.contain(s)&&s.remove(h)},n.prototype.findAll=function(s){var h=[],M=this.getChildren();return Object(E.a)(M,function(O){s(O)&&h.push(O),O.isGroup()&&(h=h.concat(O.findAll(s)))}),h},n.prototype.find=function(s){var h=null,M=this.getChildren();return Object(E.a)(M,function(O){if(s(O)?h=O:O.isGroup()&&(h=O.find(s)),h)return!1}),h},n.prototype.findById=function(s){return this.find(function(h){return h.get("id")===s})},n.prototype.findByClassName=function(s){return this.find(function(h){return h.get("className")===s})},n.prototype.findAllByName=function(s){return this.findAll(function(h){return h.get("name")===s})},n}(a.a);Gt.a=j},N9hJ:function(Fn,Gt){},NmWf:function(Fn,Gt,_){"use strict";var rt=_("mrSG"),a=_("aFU3"),E=_("iTfj"),e={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},r=function(p){Object(rt.b)(b,p);function b(S){var l=p.call(this,S)||this;return l.initCfg(),l}return b.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},b.prototype.clear=function(){},b.prototype.update=function(S){var l=this,A=this.get("defaultCfg");Object(E.each)(S,function(j,y){var n=l.get(y),s=j;n!==j&&(Object(E.isObject)(j)&&A[y]&&(s=Object(E.deepMix)({},A[y],j)),l.set(y,s))}),this.updateInner(S),this.afterUpdate(S)},b.prototype.updateInner=function(S){},b.prototype.afterUpdate=function(S){Object(E.hasKey)(S,"visible")&&(S.visible?this.show():this.hide()),Object(E.hasKey)(S,"capture")&&this.setCapture(S.capture)},b.prototype.getLayoutBBox=function(){return this.getBBox()},b.prototype.getLocationType=function(){return this.get("locationType")},b.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},b.prototype.setOffset=function(S,l){this.update({offsetX:S,offsetY:l})},b.prototype.setLocation=function(S){var l=Object(rt.a)({},S);this.update(l)},b.prototype.getLocation=function(){var S=this,l={},A=this.get("locationType"),j=e[A];return Object(E.each)(j,function(y){l[y]=S.get(y)}),l},b.prototype.isList=function(){return!1},b.prototype.isSlider=function(){return!1},b.prototype.init=function(){},b.prototype.initCfg=function(){var S=this,l=this.get("defaultCfg");Object(E.each)(l,function(A,j){var y=S.get(j);if(Object(E.isObject)(y)){var n=Object(E.deepMix)({},A,y);S.set(j,n)}})},b}(a.Base);Gt.a=r},NohK:function(Fn,Gt,_){"use strict";Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.default=void 0;var rt=function(E){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,r=null;return function(){for(var p=this,b=arguments.length,S=new Array(b),l=0;l<b;l++)S[l]=arguments[l];clearTimeout(r),r=setTimeout(function(){E.apply(p,S)},e)}};Gt.default=rt},NzZ7:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return b});var rt=_("tvR+"),a=_("yUfG"),E=_("a8tM"),e=_("iTfj"),r=_("I7nc"),p={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"]};function b(S,l){l=Object(e.assign)({},p,l);var A=l.as;if(!Object(e.isArray)(A)||A.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var j;try{j=Object(r.b)(l)}catch(M){console.warn(M)}var y=function(O){return rt.a().tile(a[l.tile]).size(l.size).round(l.round).padding(l.padding).paddingInner(l.paddingInner).paddingOuter(l.paddingOuter).paddingTop(l.paddingTop).paddingRight(l.paddingRight).paddingBottom(l.paddingBottom).paddingLeft(l.paddingLeft)(E.c(O).sum(function(T){return l.ignoreParentValue&&T.children?0:T[j]}))},n=y(S),s=A[0],h=A[1];return n.each(function(M){M[s]=[M.x0,M.x1,M.x1,M.x0],M[h]=[M.y1,M.y1,M.y0,M.y0],["x0","x1","y0","y1"].forEach(function(O){A.indexOf(O)===-1&&delete M[O]})}),Object(r.a)(n)}},P4Qj:function(Fn,Gt,_){"use strict";Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.removeSensor=Gt.getSensor=void 0;var rt=e(_("chpo")),a=_("FxDU"),E=_("24YM");function e(S){return S&&S.__esModule?S:{default:S}}var r={},p=function(l){var A=l.getAttribute(E.SizeSensorId);if(A&&r[A])return r[A];var j=(0,rt.default)();l.setAttribute(E.SizeSensorId,j);var y=(0,a.createSensor)(l);return r[j]=y,y};Gt.getSensor=p;var b=function(l){var A=l.element.getAttribute(E.SizeSensorId);l.element.removeAttribute(E.SizeSensorId),l.destroy(),A&&r[A]&&delete r[A]};Gt.removeSensor=b},QG4C:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return A});var rt=_("mrSG"),a=_("zJSt"),E=_("iTfj"),e=_("WOQw"),r=_("w02o"),p=_("YuPD"),b=_("n/J0");function S(j){var y=j.chart,n=j.options,s=n.views,h=n.legend,M=n.tooltip;return Object(E.each)(s,function(O){var T=O.region,v=O.data,m=O.meta,C=O.axes,D=O.coordinate,Y=O.interactions,Z=O.annotations,et=O.geometries,dt=y.createView({region:T});dt.data(v);var ht={};C&&Object(E.each)(C,function(St,wt){ht[wt]=Object(p.k)(St,b.a)}),ht=Object(p.b)({},m,ht),dt.scale(ht),C?Object(E.each)(C,function(St,wt){dt.axis(wt,St)}):dt.axis(!1),dt.coordinate(D),Object(E.each)(et,function(St){var wt=Object(e.a)({chart:dt,options:St}).ext,xt=St.adjust;xt&&wt.geometry.adjust(xt)}),Object(E.each)(Y,function(St){St.enable===!1?dt.removeInteraction(St.type):dt.interaction(St.type,St.cfg)}),Object(E.each)(Z,function(St){dt.annotation()[St.type](Object(rt.a)({},St))})}),h?Object(E.each)(h,function(O,T){y.legend(T,O)}):y.legend(!1),y.tooltip(M),j}function l(j){return Object(p.e)(r.a,S,r.c,r.a,r.j,r.k)(j)}var A=function(j){Object(rt.b)(y,j);function y(){var n=j!==null&&j.apply(this,arguments)||this;return n.type="multi-view",n}return y.prototype.getSchemaAdaptor=function(){return l},y}(a.a)},"QO+J":function(Fn,Gt,_){"use strict";Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.createSensor=void 0;var rt=E(_("NohK")),a=_("24YM");function E(r){return r&&r.__esModule?r:{default:r}}var e=function(p){var b=void 0,S=[],l=function(){getComputedStyle(p).position==="static"&&(p.style.position="relative");var h=document.createElement("object");return h.onload=function(){h.contentDocument.defaultView.addEventListener("resize",A),A()},h.style.display="block",h.style.position="absolute",h.style.top="0",h.style.left="0",h.style.height="100%",h.style.width="100%",h.style.overflow="hidden",h.style.pointerEvents="none",h.style.zIndex="-1",h.style.opacity="0",h.setAttribute("class",a.SensorClassName),h.setAttribute("tabindex",a.SensorTabIndex),h.type="text/html",p.appendChild(h),h.data="about:blank",h},A=(0,rt.default)(function(){S.forEach(function(s){s(p)})}),j=function(h){b||(b=l()),S.indexOf(h)===-1&&S.push(h)},y=function(){b&&b.parentNode&&(b.contentDocument&&b.contentDocument.defaultView.removeEventListener("resize",A),b.parentNode.removeChild(b),b=void 0,S=[])},n=function(h){var M=S.indexOf(h);M!==-1&&S.splice(M,1),S.length===0&&b&&y()};return{element:p,bind:j,destroy:y,unbind:n}};Gt.createSensor=e},"QQZ/":function(Fn,Gt,_){var rt=_("Sq3C"),a=_("Z1HP"),E=_("Sxd8"),e=_("dt0z");function r(p,b,S){p=e(p),b=E(b);var l=b?a(p):0;return b&&l<b?rt(b-l,S)+p:p}Fn.exports=r},Qci9:function(Fn,Gt,_){"use strict";var rt=_("iTfj"),a=_("0Xep"),E=function(){function e(r){var p=r.xField,b=r.yField,S=r.adjustNames,l=S===void 0?["x","y"]:S;this.adjustNames=l,this.xField=p,this.yField=b}return e.prototype.isAdjust=function(r){return this.adjustNames.indexOf(r)>=0},e.prototype.getAdjustRange=function(r,p,b){var S=this.yField,l=b.indexOf(p),A=b.length,j,y;return!S&&this.isAdjust("y")?(j=0,y=1):A>1?(j=b[l===0?0:l-1],y=b[l===A-1?A-1:l+1],l!==0?j+=(p-j)/2:j-=(y-p)/2,l!==A-1?y-=(y-p)/2:y+=(p-b[A-2])/2):(j=p===0?0:p-.5,y=p===0?1:p+.5),{pre:j,next:y}},e.prototype.adjustData=function(r,p){var b=this,S=this.getDimValues(p);rt.each(r,function(l,A){rt.each(S,function(j,y){b.adjustDim(y,j,l,A)})})},e.prototype.groupData=function(r,p){return rt.each(r,function(b){b[p]===void 0&&(b[p]=a.a)}),rt.groupBy(r,p)},e.prototype.adjustDim=function(r,p,b,S){},e.prototype.getDimValues=function(r){var p=this,b=p.xField,S=p.yField,l={},A=[];if(b&&this.isAdjust("x")&&A.push(b),S&&this.isAdjust("y")&&A.push(S),A.forEach(function(y){l[y]=rt.valuesOfKey(r,y).sort(function(n,s){return n-s})}),!S&&this.isAdjust("y")){var j="y";l[j]=[a.a,1]}return l},e}();Gt.a=E},R5nb:function(Fn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"Base",function(){return S}),_.d(Gt,"Circle",function(){return A}),_.d(Gt,"Ellipse",function(){return n}),_.d(Gt,"Image",function(){return M}),_.d(Gt,"Line",function(){return C}),_.d(Gt,"Marker",function(){return dt}),_.d(Gt,"Path",function(){return it}),_.d(Gt,"Polygon",function(){return H}),_.d(Gt,"Polyline",function(){return d}),_.d(Gt,"Rect",function(){return ot}),_.d(Gt,"Text",function(){return At});var rt={};_.r(rt),_.d(rt,"Base",function(){return S}),_.d(rt,"Circle",function(){return A}),_.d(rt,"Ellipse",function(){return n}),_.d(rt,"Image",function(){return M}),_.d(rt,"Line",function(){return C}),_.d(rt,"Marker",function(){return dt}),_.d(rt,"Path",function(){return it}),_.d(rt,"Polygon",function(){return H}),_.d(rt,"Polyline",function(){return d}),_.d(rt,"Rect",function(){return ot}),_.d(rt,"Text",function(){return At});var a=_("mrSG"),E=_("aFU3"),e=_("cyZq"),r=_("9eUa"),p=_("wq2r"),b=function(yt){Object(a.b)(gt,yt);function gt(){return yt!==null&&yt.apply(this,arguments)||this}return gt.prototype.getDefaultAttrs=function(){var bt=yt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},bt),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},gt.prototype.getShapeBase=function(){return rt},gt.prototype.getGroupBase=function(){return p.a},gt.prototype.onCanvasChange=function(bt){Object(r.h)(this,bt)},gt.prototype.calculateBBox=function(){var bt=this.get("type"),Tt=this.getHitLineWidth(),Dt=Object(E.getBBoxMethod)(bt),Ut=Dt(this),jt=Tt/2,Vt=Ut.x-jt,Ht=Ut.y-jt,re=Ut.x+Ut.width+jt,pe=Ut.y+Ut.height+jt;return{x:Vt,minX:Vt,y:Ht,minY:Ht,width:Ut.width+Tt,height:Ut.height+Tt,maxX:re,maxY:pe}},gt.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},gt.prototype.isStroke=function(){return!!this.attrs.stroke},gt.prototype._applyClip=function(bt,Tt){Tt&&(bt.save(),Object(r.a)(bt,Tt),Tt.createPath(bt),bt.restore(),bt.clip(),Tt._afterDraw())},gt.prototype.draw=function(bt,Tt){var Dt=this.cfg.clipShape;if(Tt){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var Ut=this.getCanvasBBox();if(!Object(e.f)(Tt,Ut)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}bt.save(),Object(r.a)(bt,this),this._applyClip(bt,Dt),this.drawPath(bt),bt.restore(),this._afterDraw()},gt.prototype.getCanvasViewBox=function(){var bt=this.cfg.canvas;return bt?bt.getViewRange():null},gt.prototype.cacheCanvasBBox=function(){var bt=this.getCanvasViewBox();if(bt){var Tt=this.getCanvasBBox(),Dt=Object(e.f)(Tt,bt);this.set("isInView",Dt),Dt?this.set("cacheCanvasBBox",Tt):this.set("cacheCanvasBBox",null)}},gt.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},gt.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},gt.prototype.drawPath=function(bt){this.createPath(bt),this.strokeAndFill(bt),this.afterDrawPath(bt)},gt.prototype.fill=function(bt){bt.fill()},gt.prototype.stroke=function(bt){bt.stroke()},gt.prototype.strokeAndFill=function(bt){var Tt=this.attrs,Dt=Tt.lineWidth,Ut=Tt.opacity,jt=Tt.strokeOpacity,Vt=Tt.fillOpacity;this.isFill()&&(!Object(e.i)(Vt)&&Vt!==1?(bt.globalAlpha=Vt,this.fill(bt),bt.globalAlpha=Ut):this.fill(bt)),this.isStroke()&&Dt>0&&(!Object(e.i)(jt)&&jt!==1&&(bt.globalAlpha=jt),this.stroke(bt)),this.afterDrawPath(bt)},gt.prototype.createPath=function(bt){},gt.prototype.afterDrawPath=function(bt){},gt.prototype.isInShape=function(bt,Tt){var Dt=this.isStroke(),Ut=this.isFill(),jt=this.getHitLineWidth();return this.isInStrokeOrPath(bt,Tt,Dt,Ut,jt)},gt.prototype.isInStrokeOrPath=function(bt,Tt,Dt,Ut,jt){return!1},gt.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var bt=this.attrs;return bt.lineWidth+bt.lineAppendWidth},gt}(E.AbstractShape),S=b,l=function(yt){Object(a.b)(gt,yt);function gt(){return yt!==null&&yt.apply(this,arguments)||this}return gt.prototype.getDefaultAttrs=function(){var bt=yt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},bt),{x:0,y:0,r:0})},gt.prototype.isInStrokeOrPath=function(bt,Tt,Dt,Ut,jt){var Vt=this.attr(),Ht=Vt.x,re=Vt.y,pe=Vt.r,ye=jt/2,we=Object(e.b)(Ht,re,bt,Tt);return Ut&&Dt?we<=pe+ye:Ut?we<=pe:Dt?we>=pe-ye&&we<=pe+ye:!1},gt.prototype.createPath=function(bt){var Tt=this.attr(),Dt=Tt.x,Ut=Tt.y,jt=Tt.r;bt.beginPath(),bt.arc(Dt,Ut,jt,0,Math.PI*2,!1),bt.closePath()},gt}(S),A=l;function j(yt,gt,bt,Tt){return yt/(bt*bt)+gt/(Tt*Tt)}var y=function(yt){Object(a.b)(gt,yt);function gt(){return yt!==null&&yt.apply(this,arguments)||this}return gt.prototype.getDefaultAttrs=function(){var bt=yt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},bt),{x:0,y:0,rx:0,ry:0})},gt.prototype.isInStrokeOrPath=function(bt,Tt,Dt,Ut,jt){var Vt=this.attr(),Ht=jt/2,re=Vt.x,pe=Vt.y,ye=Vt.rx,we=Vt.ry,Re=(bt-re)*(bt-re),He=(Tt-pe)*(Tt-pe);return Ut&&Dt?j(Re,He,ye+Ht,we+Ht)<=1:Ut?j(Re,He,ye,we)<=1:Dt?j(Re,He,ye-Ht,we-Ht)>=1&&j(Re,He,ye+Ht,we+Ht)<=1:!1},gt.prototype.createPath=function(bt){var Tt=this.attr(),Dt=Tt.x,Ut=Tt.y,jt=Tt.rx,Vt=Tt.ry;if(bt.beginPath(),bt.ellipse)bt.ellipse(Dt,Ut,jt,Vt,0,0,Math.PI*2,!1);else{var Ht=jt>Vt?jt:Vt,re=jt>Vt?1:jt/Vt,pe=jt>Vt?Vt/jt:1;bt.save(),bt.translate(Dt,Ut),bt.scale(re,pe),bt.arc(0,0,Ht,0,Math.PI*2),bt.restore(),bt.closePath()}},gt}(S),n=y;function s(yt){return yt instanceof HTMLElement&&Object(e.k)(yt.nodeName)&&yt.nodeName.toUpperCase()==="CANVAS"}var h=function(yt){Object(a.b)(gt,yt);function gt(){return yt!==null&&yt.apply(this,arguments)||this}return gt.prototype.getDefaultAttrs=function(){var bt=yt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},bt),{x:0,y:0,width:0,height:0})},gt.prototype.initAttrs=function(bt){this._setImage(bt.img)},gt.prototype.isStroke=function(){return!1},gt.prototype.isOnlyHitBox=function(){return!0},gt.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var bt=this.get("canvas");bt?bt.draw():this.createPath(this.get("context"))}},gt.prototype._setImage=function(bt){var Tt=this,Dt=this.attrs;if(Object(e.k)(bt)){var Ut=new Image;Ut.onload=function(){if(Tt.destroyed)return!1;Tt.attr("img",Ut),Tt.set("loading",!1),Tt._afterLoading();var jt=Tt.get("callback");jt&&jt.call(Tt)},Ut.crossOrigin="Anonymous",Ut.src=bt,this.set("loading",!0)}else bt instanceof Image?(Dt.width||(Dt.width=bt.width),Dt.height||(Dt.height=bt.height)):s(bt)&&(Dt.width||(Dt.width=Number(bt.getAttribute("width"))),Dt.height||(Dt.height,Number(bt.getAttribute("height"))))},gt.prototype.onAttrChange=function(bt,Tt,Dt){yt.prototype.onAttrChange.call(this,bt,Tt,Dt),bt==="img"&&this._setImage(Tt)},gt.prototype.createPath=function(bt){if(this.get("loading")){this.set("toDraw",!0),this.set("context",bt);return}var Tt=this.attr(),Dt=Tt.x,Ut=Tt.y,jt=Tt.width,Vt=Tt.height,Ht=Tt.sx,re=Tt.sy,pe=Tt.swidth,ye=Tt.sheight,we=Tt.img;(we instanceof Image||s(we))&&(!Object(e.i)(Ht)&&!Object(e.i)(re)&&!Object(e.i)(pe)&&!Object(e.i)(ye)?bt.drawImage(we,Ht,re,pe,ye,Dt,Ut,jt,Vt):bt.drawImage(we,Dt,Ut,jt,Vt))},gt}(S),M=h,O=_("EYNi");function T(yt,gt,bt,Tt,Dt,Ut,jt){var Vt=Math.min(yt,bt),Ht=Math.max(yt,bt),re=Math.min(gt,Tt),pe=Math.max(gt,Tt),ye=Dt/2;return Ut>=Vt-ye&&Ut<=Ht+ye&&jt>=re-ye&&jt<=pe+ye?O.c.pointToLine(yt,gt,bt,Tt,Ut,jt)<=Dt/2:!1}var v=_("nycV"),m=function(yt){Object(a.b)(gt,yt);function gt(){return yt!==null&&yt.apply(this,arguments)||this}return gt.prototype.getDefaultAttrs=function(){var bt=yt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},bt),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},gt.prototype.initAttrs=function(bt){this.setArrow()},gt.prototype.onAttrChange=function(bt,Tt,Dt){yt.prototype.onAttrChange.call(this,bt,Tt,Dt),this.setArrow()},gt.prototype.setArrow=function(){var bt=this.attr(),Tt=bt.x1,Dt=bt.y1,Ut=bt.x2,jt=bt.y2,Vt=bt.startArrow,Ht=bt.endArrow;Vt&&v.b(this,bt,Ut,jt,Tt,Dt),Ht&&v.a(this,bt,Tt,Dt,Ut,jt)},gt.prototype.isInStrokeOrPath=function(bt,Tt,Dt,Ut,jt){if(!Dt||!jt)return!1;var Vt=this.attr(),Ht=Vt.x1,re=Vt.y1,pe=Vt.x2,ye=Vt.y2;return T(Ht,re,pe,ye,jt,bt,Tt)},gt.prototype.createPath=function(bt){var Tt=this.attr(),Dt=Tt.x1,Ut=Tt.y1,jt=Tt.x2,Vt=Tt.y2,Ht=Tt.startArrow,re=Tt.endArrow,pe={dx:0,dy:0},ye={dx:0,dy:0};Ht&&Ht.d&&(pe=v.c(Dt,Ut,jt,Vt,Tt.startArrow.d)),re&&re.d&&(ye=v.c(Dt,Ut,jt,Vt,Tt.endArrow.d)),bt.beginPath(),bt.moveTo(Dt+pe.dx,Ut+pe.dy),bt.lineTo(jt-ye.dx,Vt-ye.dy)},gt.prototype.afterDrawPath=function(bt){var Tt=this.get("startArrowShape"),Dt=this.get("endArrowShape");Tt&&Tt.draw(bt),Dt&&Dt.draw(bt)},gt.prototype.getTotalLength=function(){var bt=this.attr(),Tt=bt.x1,Dt=bt.y1,Ut=bt.x2,jt=bt.y2;return O.c.length(Tt,Dt,Ut,jt)},gt.prototype.getPoint=function(bt){var Tt=this.attr(),Dt=Tt.x1,Ut=Tt.y1,jt=Tt.x2,Vt=Tt.y2;return O.c.pointAt(Dt,Ut,jt,Vt,bt)},gt}(S),C=m,D=_("iTfj"),Y=_("LvGN"),Z={circle:function(gt,bt,Tt){return[["M",gt-Tt,bt],["A",Tt,Tt,0,1,0,gt+Tt,bt],["A",Tt,Tt,0,1,0,gt-Tt,bt]]},square:function(gt,bt,Tt){return[["M",gt-Tt,bt-Tt],["L",gt+Tt,bt-Tt],["L",gt+Tt,bt+Tt],["L",gt-Tt,bt+Tt],["Z"]]},diamond:function(gt,bt,Tt){return[["M",gt-Tt,bt],["L",gt,bt-Tt],["L",gt+Tt,bt],["L",gt,bt+Tt],["Z"]]},triangle:function(gt,bt,Tt){var Dt=Tt*Math.sin(1/3*Math.PI);return[["M",gt-Tt,bt+Dt],["L",gt,bt-Dt],["L",gt+Tt,bt+Dt],["Z"]]},"triangle-down":function(gt,bt,Tt){var Dt=Tt*Math.sin(1/3*Math.PI);return[["M",gt-Tt,bt-Dt],["L",gt+Tt,bt-Dt],["L",gt,bt+Dt],["Z"]]}},et=function(yt){Object(a.b)(gt,yt);function gt(){return yt!==null&&yt.apply(this,arguments)||this}return gt.prototype.initAttrs=function(bt){this._resetParamsCache()},gt.prototype._resetParamsCache=function(){this.set("paramsCache",{})},gt.prototype.onAttrChange=function(bt,Tt,Dt){yt.prototype.onAttrChange.call(this,bt,Tt,Dt),["symbol","x","y","r","radius"].indexOf(bt)!==-1&&this._resetParamsCache()},gt.prototype.isOnlyHitBox=function(){return!0},gt.prototype._getR=function(bt){return Object(D.isNil)(bt.r)?bt.radius:bt.r},gt.prototype._getPath=function(){var bt=this.attr(),Tt=bt.x,Dt=bt.y,Ut=bt.symbol||"circle",jt=this._getR(bt),Vt,Ht;if(Object(e.h)(Ut))Vt=Ut,Ht=Vt(Tt,Dt,jt),Ht=Object(Y.d)(Ht);else{if(Vt=gt.Symbols[Ut],!Vt)return console.warn(Ut+" marker is not supported."),null;Ht=Vt(Tt,Dt,jt)}return Ht},gt.prototype.createPath=function(bt){var Tt=this._getPath(),Dt=this.get("paramsCache");Object(r.e)(this,bt,{path:Tt},Dt)},gt.Symbols=Z,gt}(S),dt=et;function ht(yt,gt,bt){var Tt=Object(E.getOffScreenContext)();return yt.createPath(Tt),Tt.isPointInPath(gt,bt)}var St=1e-6;function wt(yt){return Math.abs(yt)<St?0:yt<0?-1:1}function xt(yt,gt,bt){return(bt[0]-yt[0])*(gt[1]-yt[1])==(gt[0]-yt[0])*(bt[1]-yt[1])&&Math.min(yt[0],gt[0])<=bt[0]&&bt[0]<=Math.max(yt[0],gt[0])&&Math.min(yt[1],gt[1])<=bt[1]&&bt[1]<=Math.max(yt[1],gt[1])}function ft(yt,gt,bt){var Tt=!1,Dt=yt.length;if(Dt<=2)return!1;for(var Ut=0;Ut<Dt;Ut++){var jt=yt[Ut],Vt=yt[(Ut+1)%Dt];if(xt(jt,Vt,[gt,bt]))return!0;wt(jt[1]-bt)>0!=wt(Vt[1]-bt)>0&&wt(gt-(bt-jt[1])*(jt[0]-Vt[0])/(jt[1]-Vt[1])-jt[0])<0&&(Tt=!Tt)}return Tt}var Bt=_("6JdA"),Rt=_("n+fv");function Ot(yt,gt,bt,Tt,Dt,Ut,jt,Vt){var Ht=(Math.atan2(Vt-gt,jt-yt)+Math.PI*2)%(Math.PI*2);if(Ht<Tt||Ht>Dt)return!1;var re={x:yt+bt*Math.cos(Ht),y:gt+bt*Math.sin(Ht)};return Object(e.b)(re.x,re.y,jt,Vt)<=Ut/2}var X=Bt.a.transform;function ut(yt){for(var gt=!1,bt=yt.length,Tt=0;Tt<bt;Tt++){var Dt=yt[Tt],Ut=Dt[0];if(Ut==="C"||Ut==="A"||Ut==="Q"){gt=!0;break}}return gt}function vt(yt,gt,bt,Tt,Dt){for(var Ut=!1,jt=gt/2,Vt=0;Vt<yt.length;Vt++){var Ht=yt[Vt],re=Ht.currentPoint,pe=Ht.params,ye=Ht.prePoint,we=Ht.box;if(!(we&&!Object(e.e)(we.x-jt,we.y-jt,we.width+gt,we.height+gt,bt,Tt))){switch(Ht.command){case"L":case"Z":Ut=T(ye[0],ye[1],re[0],re[1],gt,bt,Tt);break;case"Q":var Re=O.e.pointDistance(ye[0],ye[1],pe[1],pe[2],pe[3],pe[4],bt,Tt);Ut=Re<=gt/2;break;case"C":var He=O.b.pointDistance(ye[0],ye[1],pe[1],pe[2],pe[3],pe[4],pe[5],pe[6],bt,Tt,Dt);Ut=He<=gt/2;break;case"A":var pn=Ht.arcParams,fn=pn.cx,Rn=pn.cy,Cn=pn.rx,kn=pn.ry,Mn=pn.startAngle,Tn=pn.endAngle,Un=pn.xRotation,Kn=[bt,Tt,1],tr=Cn>kn?Cn:kn,or=Cn>kn?1:Cn/kn,nr=Cn>kn?kn/Cn:1,er=X(null,[["t",-fn,-Rn],["r",-Un],["s",1/or,1/nr]]);Rt.transformMat3(Kn,Kn,er),Ut=Ot(0,0,tr,Mn,Tn,gt,Kn[0],Kn[1]);break;default:break}if(Ut)break}}return Ut}function pt(yt){for(var gt=yt.length,bt=[],Tt=[],Dt=[],Ut=0;Ut<gt;Ut++){var jt=yt[Ut],Vt=jt[0];Vt==="M"?(Dt.length&&(Tt.push(Dt),Dt=[]),Dt.push([jt[1],jt[2]])):Vt==="Z"?Dt.length&&(bt.push(Dt),Dt=[]):Dt.push([jt[1],jt[2]])}return Dt.length>0&&Tt.push(Dt),{polygons:bt,polylines:Tt}}var Et=Object(a.a)({hasArc:ut,extractPolygons:pt,isPointInStroke:vt},E.PathUtil);function q(yt,gt,bt){for(var Tt=!1,Dt=0;Dt<yt.length;Dt++){var Ut=yt[Dt];if(Tt=ft(Ut,gt,bt),Tt)break}return Tt}var st=function(yt){Object(a.b)(gt,yt);function gt(){return yt!==null&&yt.apply(this,arguments)||this}return gt.prototype.getDefaultAttrs=function(){var bt=yt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},bt),{startArrow:!1,endArrow:!1})},gt.prototype.initAttrs=function(bt){this._setPathArr(bt.path),this.setArrow()},gt.prototype.onAttrChange=function(bt,Tt,Dt){yt.prototype.onAttrChange.call(this,bt,Tt,Dt),bt==="path"&&this._setPathArr(Tt),this.setArrow()},gt.prototype._setPathArr=function(bt){this.attrs.path=Object(Y.d)(bt);var Tt=Et.hasArc(bt);this.set("hasArc",Tt),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},gt.prototype.getSegments=function(){var bt=this.get("segements");return bt||(bt=Object(Y.e)(this.attr("path")),this.set("segments",bt)),bt},gt.prototype.setArrow=function(){var bt=this.attr(),Tt=bt.startArrow,Dt=bt.endArrow;if(Tt){var Ut=this.getStartTangent();v.b(this,bt,Ut[0][0],Ut[0][1],Ut[1][0],Ut[1][1])}if(Dt){var Ut=this.getEndTangent();v.a(this,bt,Ut[0][0],Ut[0][1],Ut[1][0],Ut[1][1])}},gt.prototype.isInStrokeOrPath=function(bt,Tt,Dt,Ut,jt){var Vt=this.getSegments(),Ht=this.get("hasArc"),re=!1;if(Dt){var pe=this.getTotalLength();re=Et.isPointInStroke(Vt,jt,bt,Tt,pe)}if(!re&&Ut)if(Ht)re=ht(this,bt,Tt);else{var ye=this.attr("path"),we=Et.extractPolygons(ye);re=q(we.polygons,bt,Tt)||q(we.polylines,bt,Tt)}return re},gt.prototype.createPath=function(bt){var Tt=this.attr(),Dt=this.get("paramsCache");Object(r.e)(this,bt,Tt,Dt)},gt.prototype.afterDrawPath=function(bt){var Tt=this.get("startArrowShape"),Dt=this.get("endArrowShape");Tt&&Tt.draw(bt),Dt&&Dt.draw(bt)},gt.prototype.getTotalLength=function(){var bt=this.get("totalLength");return Object(D.isNil)(bt)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):bt},gt.prototype.getPoint=function(bt){var Tt=this.get("tCache");Tt||(this._calculateCurve(),this._setTcache(),Tt=this.get("tCache"));var Dt,Ut,jt=this.get("curve");if(!Tt||Tt.length===0)return jt?{x:jt[0][1],y:jt[0][2]}:null;Object(D.each)(Tt,function(pe,ye){bt>=pe[0]&&bt<=pe[1]&&(Dt=(bt-pe[0])/(pe[1]-pe[0]),Ut=ye)});var Vt=jt[Ut];if(Object(D.isNil)(Vt)||Object(D.isNil)(Ut))return null;var Ht=Vt.length,re=jt[Ut+1];return O.b.pointAt(Vt[Ht-2],Vt[Ht-1],re[1],re[2],re[3],re[4],re[5],re[6],Dt)},gt.prototype._calculateCurve=function(){var bt=this.attr().path;this.set("curve",Et.pathToCurve(bt))},gt.prototype._setTcache=function(){var bt=0,Tt=0,Dt=[],Ut,jt,Vt,Ht,re=this.get("curve");if(!!re){if(Object(D.each)(re,function(pe,ye){Vt=re[ye+1],Ht=pe.length,Vt&&(bt+=O.b.length(pe[Ht-2],pe[Ht-1],Vt[1],Vt[2],Vt[3],Vt[4],Vt[5],Vt[6])||0)}),this.set("totalLength",bt),bt===0){this.set("tCache",[]);return}Object(D.each)(re,function(pe,ye){Vt=re[ye+1],Ht=pe.length,Vt&&(Ut=[],Ut[0]=Tt/bt,jt=O.b.length(pe[Ht-2],pe[Ht-1],Vt[1],Vt[2],Vt[3],Vt[4],Vt[5],Vt[6]),Tt+=jt||0,Ut[1]=Tt/bt,Dt.push(Ut))}),this.set("tCache",Dt)}},gt.prototype.getStartTangent=function(){var bt=this.getSegments(),Tt;if(bt.length>1){var Dt=bt[0].currentPoint,Ut=bt[1].currentPoint,jt=bt[1].startTangent;Tt=[],jt?(Tt.push([Dt[0]-jt[0],Dt[1]-jt[1]]),Tt.push([Dt[0],Dt[1]])):(Tt.push([Ut[0],Ut[1]]),Tt.push([Dt[0],Dt[1]]))}return Tt},gt.prototype.getEndTangent=function(){var bt=this.getSegments(),Tt=bt.length,Dt;if(Tt>1){var Ut=bt[Tt-2].currentPoint,jt=bt[Tt-1].currentPoint,Vt=bt[Tt-1].endTangent;Dt=[],Vt?(Dt.push([jt[0]-Vt[0],jt[1]-Vt[1]]),Dt.push([jt[0],jt[1]])):(Dt.push([Ut[0],Ut[1]]),Dt.push([jt[0],jt[1]]))}return Dt},gt}(S),it=st;function z(yt,gt,bt,Tt,Dt){var Ut=yt.length;if(Ut<2)return!1;for(var jt=0;jt<Ut-1;jt++){var Vt=yt[jt][0],Ht=yt[jt][1],re=yt[jt+1][0],pe=yt[jt+1][1];if(T(Vt,Ht,re,pe,gt,bt,Tt))return!0}if(Dt){var ye=yt[0],we=yt[Ut-1];if(T(ye[0],ye[1],we[0],we[1],gt,bt,Tt))return!0}return!1}var P=function(yt){Object(a.b)(gt,yt);function gt(){return yt!==null&&yt.apply(this,arguments)||this}return gt.prototype.isInStrokeOrPath=function(bt,Tt,Dt,Ut,jt){var Vt=this.attr().points,Ht=!1;return Dt&&(Ht=z(Vt,jt,bt,Tt,!0)),!Ht&&Ut&&(Ht=ft(Vt,bt,Tt)),Ht},gt.prototype.createPath=function(bt){var Tt=this.attr(),Dt=Tt.points;if(!(Dt.length<2)){bt.beginPath();for(var Ut=0;Ut<Dt.length;Ut++){var jt=Dt[Ut];Ut===0?bt.moveTo(jt[0],jt[1]):bt.lineTo(jt[0],jt[1])}bt.closePath()}},gt}(S),H=P,k=function(yt){Object(a.b)(gt,yt);function gt(){return yt!==null&&yt.apply(this,arguments)||this}return gt.prototype.getDefaultAttrs=function(){var bt=yt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},bt),{startArrow:!1,endArrow:!1})},gt.prototype.initAttrs=function(bt){this.setArrow()},gt.prototype.onAttrChange=function(bt,Tt,Dt){yt.prototype.onAttrChange.call(this,bt,Tt,Dt),this.setArrow(),["points"].indexOf(bt)!==-1&&this._resetCache()},gt.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},gt.prototype.setArrow=function(){var bt=this.attr(),Tt=this.attrs,Dt=Tt.points,Ut=Tt.startArrow,jt=Tt.endArrow,Vt=Dt.length,Ht=Dt[0][0],re=Dt[0][1],pe=Dt[Vt-1][0],ye=Dt[Vt-1][1];Ut&&v.b(this,bt,Dt[1][0],Dt[1][1],Ht,re),jt&&v.a(this,bt,Dt[Vt-2][0],Dt[Vt-2][1],pe,ye)},gt.prototype.isFill=function(){return!1},gt.prototype.isInStrokeOrPath=function(bt,Tt,Dt,Ut,jt){if(!Dt||!jt)return!1;var Vt=this.attr().points;return z(Vt,jt,bt,Tt,!1)},gt.prototype.isStroke=function(){return!0},gt.prototype.createPath=function(bt){var Tt=this.attr(),Dt=Tt.points,Ut=Tt.startArrow,jt=Tt.endArrow,Vt=Dt.length;if(!(Dt.length<2)){var Ht=Dt[0][0],re=Dt[0][1],pe=Dt[Vt-1][0],ye=Dt[Vt-1][1];if(Ut&&Ut.d){var we=v.c(Ht,re,Dt[1][0],Dt[1][1],Ut.d);Ht+=we.dx,re+=we.dy}if(jt&&jt.d){var we=v.c(Dt[Vt-2][0],Dt[Vt-2][1],pe,ye,jt.d);pe-=we.dx,ye-=we.dy}bt.beginPath(),bt.moveTo(Ht,re);for(var Re=0;Re<Vt-1;Re++){var He=Dt[Re];bt.lineTo(He[0],He[1])}bt.lineTo(pe,ye)}},gt.prototype.afterDrawPath=function(bt){var Tt=this.get("startArrowShape"),Dt=this.get("endArrowShape");Tt&&Tt.draw(bt),Dt&&Dt.draw(bt)},gt.prototype.getTotalLength=function(){var bt=this.attr().points,Tt=this.get("totalLength");return Object(D.isNil)(Tt)?(this.set("totalLength",O.d.length(bt)),this.get("totalLength")):Tt},gt.prototype.getPoint=function(bt){var Tt=this.attr().points,Dt=this.get("tCache");Dt||(this._setTcache(),Dt=this.get("tCache"));var Ut,jt;return Object(D.each)(Dt,function(Vt,Ht){bt>=Vt[0]&&bt<=Vt[1]&&(Ut=(bt-Vt[0])/(Vt[1]-Vt[0]),jt=Ht)}),O.c.pointAt(Tt[jt][0],Tt[jt][1],Tt[jt+1][0],Tt[jt+1][1],Ut)},gt.prototype._setTcache=function(){var bt=this.attr().points;if(!(!bt||bt.length===0)){var Tt=this.getTotalLength();if(!(Tt<=0)){var Dt=0,Ut=[],jt,Vt;Object(D.each)(bt,function(Ht,re){bt[re+1]&&(jt=[],jt[0]=Dt/Tt,Vt=O.c.length(Ht[0],Ht[1],bt[re+1][0],bt[re+1][1]),Dt+=Vt,jt[1]=Dt/Tt,Ut.push(jt))}),this.set("tCache",Ut)}}},gt.prototype.getStartTangent=function(){var bt=this.attr().points,Tt=[];return Tt.push([bt[1][0],bt[1][1]]),Tt.push([bt[0][0],bt[0][1]]),Tt},gt.prototype.getEndTangent=function(){var bt=this.attr().points,Tt=bt.length-1,Dt=[];return Dt.push([bt[Tt-1][0],bt[Tt-1][1]]),Dt.push([bt[Tt][0],bt[Tt][1]]),Dt},gt}(S),d=k,g=_("r0DC");function F(yt,gt,bt,Tt,Dt,Ut,jt){var Vt=Dt/2;return Object(e.e)(yt-Vt,gt-Vt,bt,Dt,Ut,jt)||Object(e.e)(yt+bt-Vt,gt-Vt,Dt,Tt,Ut,jt)||Object(e.e)(yt+Vt,gt+Tt-Vt,bt,Dt,Ut,jt)||Object(e.e)(yt-Vt,gt+Vt,Dt,Tt,Ut,jt)}function V(yt,gt,bt,Tt,Dt,Ut,jt,Vt){var Ht=Ut/2;return T(yt+Dt,gt,yt+bt-Dt,gt,Ut,jt,Vt)||T(yt+bt,gt+Dt,yt+bt,gt+Tt-Dt,Ut,jt,Vt)||T(yt+bt-Dt,gt+Tt,yt+Dt,gt+Tt,Ut,jt,Vt)||T(yt,gt+Tt-Dt,yt,gt+Dt,Ut,jt,Vt)||Ot(yt+bt-Dt,gt+Dt,Dt,1.5*Math.PI,2*Math.PI,Ut,jt,Vt)||Ot(yt+bt-Dt,gt+Tt-Dt,Dt,0,.5*Math.PI,Ut,jt,Vt)||Ot(yt+Dt,gt+Tt-Dt,Dt,.5*Math.PI,Math.PI,Ut,jt,Vt)||Ot(yt+Dt,gt+Dt,Dt,Math.PI,1.5*Math.PI,Ut,jt,Vt)}var tt=function(yt){Object(a.b)(gt,yt);function gt(){return yt!==null&&yt.apply(this,arguments)||this}return gt.prototype.getDefaultAttrs=function(){var bt=yt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},bt),{x:0,y:0,width:0,height:0,radius:0})},gt.prototype.isInStrokeOrPath=function(bt,Tt,Dt,Ut,jt){var Vt=this.attr(),Ht=Vt.x,re=Vt.y,pe=Vt.width,ye=Vt.height,we=Vt.radius;if(we){var He=!1;return Dt&&(He=V(Ht,re,pe,ye,we,jt,bt,Tt)),!He&&Ut&&(He=ht(this,bt,Tt)),He}else{var Re=jt/2;if(Ut&&Dt)return Object(e.e)(Ht-Re,re-Re,pe+Re,ye+Re,bt,Tt);if(Ut)return Object(e.e)(Ht,re,pe,ye,bt,Tt);if(Dt)return F(Ht,re,pe,ye,jt,bt,Tt)}},gt.prototype.createPath=function(bt){var Tt=this.attr(),Dt=Tt.x,Ut=Tt.y,jt=Tt.width,Vt=Tt.height,Ht=Tt.radius;if(bt.beginPath(),Ht===0)bt.rect(Dt,Ut,jt,Vt);else{var re=Object(g.a)(Ht),pe=re[0],ye=re[1],we=re[2],Re=re[3];bt.moveTo(Dt+pe,Ut),bt.lineTo(Dt+jt-ye,Ut),ye!==0&&bt.arc(Dt+jt-ye,Ut+ye,ye,-Math.PI/2,0),bt.lineTo(Dt+jt,Ut+Vt-we),we!==0&&bt.arc(Dt+jt-we,Ut+Vt-we,we,0,Math.PI/2),bt.lineTo(Dt+Re,Ut+Vt),Re!==0&&bt.arc(Dt+Re,Ut+Vt-Re,Re,Math.PI/2,Math.PI),bt.lineTo(Dt,Ut+pe),pe!==0&&bt.arc(Dt+pe,Ut+pe,pe,Math.PI,Math.PI*1.5),bt.closePath()}},gt}(S),ot=tt,at=function(yt){Object(a.b)(gt,yt);function gt(){return yt!==null&&yt.apply(this,arguments)||this}return gt.prototype.getDefaultAttrs=function(){var bt=yt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},bt),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},gt.prototype.isOnlyHitBox=function(){return!0},gt.prototype.initAttrs=function(bt){this._assembleFont(),bt.text&&this._setText(bt.text)},gt.prototype._assembleFont=function(){var bt=this.attrs;bt.font=Object(E.assembleFont)(bt)},gt.prototype._setText=function(bt){var Tt=null;Object(e.k)(bt)&&bt.indexOf(`
`)!==-1&&(Tt=bt.split(`
`)),this.set("textArr",Tt)},gt.prototype.onAttrChange=function(bt,Tt,Dt){yt.prototype.onAttrChange.call(this,bt,Tt,Dt),bt.startsWith("font")&&this._assembleFont(),bt==="text"&&this._setText(Tt)},gt.prototype._getSpaceingY=function(){var bt=this.attrs,Tt=bt.lineHeight,Dt=bt.fontSize*1;return Tt?Tt-Dt:Dt*.14},gt.prototype._drawTextArr=function(bt,Tt,Dt){var Ut=this.attrs,jt=Ut.textBaseline,Vt=Ut.x,Ht=Ut.y,re=Ut.fontSize*1,pe=this._getSpaceingY(),ye=Object(E.getTextHeight)(Ut.text,Ut.fontSize,Ut.lineHeight),we;Object(e.c)(Tt,function(Re,He){we=Ht+He*(pe+re)-ye+re,jt==="middle"&&(we+=ye-re-(ye-re)/2),jt==="top"&&(we+=ye-re),Dt?bt.fillText(Re,Vt,we):bt.strokeText(Re,Vt,we)})},gt.prototype._drawText=function(bt,Tt){var Dt=this.attr(),Ut=Dt.x,jt=Dt.y,Vt=this.get("textArr");if(Vt)this._drawTextArr(bt,Vt,Tt);else{var Ht=Dt.text;Tt?bt.fillText(Ht,Ut,jt):bt.strokeText(Ht,Ut,jt)}},gt.prototype.strokeAndFill=function(bt){var Tt=this.attrs,Dt=Tt.lineWidth,Ut=Tt.opacity,jt=Tt.strokeOpacity,Vt=Tt.fillOpacity;this.isStroke()&&Dt>0&&(!Object(e.i)(jt)&&jt!==1&&(bt.globalAlpha=Ut),this.stroke(bt)),this.isFill()&&(!Object(e.i)(Vt)&&Vt!==1?(bt.globalAlpha=Vt,this.fill(bt),bt.globalAlpha=Ut):this.fill(bt)),this.afterDrawPath(bt)},gt.prototype.fill=function(bt){this._drawText(bt,!0)},gt.prototype.stroke=function(bt){this._drawText(bt,!1)},gt}(S),At=at},SZbK:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return rt});var rt=["#FAAD14","#E8EDF3"]},ShmH:function(Fn,Gt,_){var rt=_("o0o1");(function(a,E){Fn.exports=E()})(this,function(){return function(a){var E={};function e(r){if(E[r])return E[r].exports;var p=E[r]={i:r,l:!1,exports:{}};return a[r].call(p.exports,p,p.exports,e),p.l=!0,p.exports}return e.m=a,e.c=E,e.d=function(r,p,b){e.o(r,p)||Object.defineProperty(r,p,{enumerable:!0,get:b})},e.r=function(r){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},e.t=function(r,p){if(1&p&&(r=e(r)),8&p||4&p&&typeof r=="object"&&r&&r.__esModule)return r;var b=Object.create(null);if(e.r(b),Object.defineProperty(b,"default",{enumerable:!0,value:r}),2&p&&typeof r!="string")for(var S in r)e.d(b,S,function(l){return r[l]}.bind(null,S));return b},e.n=function(r){var p=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(p,"a",p),p},e.o=function(r,p){return Object.prototype.hasOwnProperty.call(r,p)},e.p="",e(e.s=262)}([function(a,E,e){"use strict";e.d(E,"j",function(){return T}),e.d(E,"k",function(){return C}),e.d(E,"y",function(){return D}),e.d(E,"g",function(){return p}),e.d(E,"J",function(){return Y}),e.d(E,"h",function(){return Z}),e.d(E,"u",function(){return dt}),e.d(E,"B",function(){return ht}),e.d(E,"G",function(){return wt}),e.d(E,"I",function(){return ft}),e.d(E,"m",function(){return j}),e.d(E,"n",function(){return Ot}),e.d(E,"o",function(){return X}),e.d(E,"r",function(){return l}),e.d(E,"s",function(){return A}),e.d(E,"t",function(){return et}),e.d(E,"v",function(){return n}),e.d(E,"w",function(){return O}),e.d(E,"x",function(){return m}),e.d(E,"D",function(){return pt}),e.d(E,"b",function(){return Et}),e.d(E,"c",function(){return z}),e.d(E,"d",function(){return P}),e.d(E,"e",function(){return k}),e.d(E,"f",function(){return s}),e.d(E,"l",function(){return d}),e.d(E,"p",function(){return F}),e.d(E,"q",function(){return V}),e.d(E,"z",function(){return tt}),e.d(E,"A",function(){return st}),e.d(E,"a",function(){return st}),e.d(E,"i",function(){return ot}),e.d(E,"F",function(){return at}),e.d(E,"H",function(){return yt}),e.d(E,"C",function(){return gt}),e.d(E,"E",function(){return bt});var r=function(Dt){return Dt!==null&&typeof Dt!="function"&&isFinite(Dt.length)},p=function(Dt,Ut){if(!r(Dt))return Dt;for(var jt=[],Vt=0;Vt<Dt.length;Vt++){var Ht=Dt[Vt];Ut(Ht,Vt)&&jt.push(Ht)}return jt},b={}.toString,S=function(Dt,Ut){return b.call(Dt)==="[object "+Ut+"]"},l=function(Dt){return S(Dt,"Function")},A=function(Dt){return Dt==null},j=function(Dt){return Array.isArray?Array.isArray(Dt):S(Dt,"Array")};function y(Tt){return(y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Dt){return typeof Dt}:function(Dt){return Dt&&typeof Symbol=="function"&&Dt.constructor===Symbol&&Dt!==Symbol.prototype?"symbol":typeof Dt})(Tt)}var n=function(Dt){var Ut=y(Dt);return Dt!==null&&Ut==="object"||Ut==="function"},s=function(Dt,Ut){if(Dt){if(j(Dt))for(var jt=0,Vt=Dt.length;jt<Vt&&Ut(Dt[jt],jt)!==!1;jt++);else if(n(Dt)){for(var Ht in Dt)if(Dt.hasOwnProperty(Ht)&&Ut(Dt[Ht],Ht)===!1)break}}};function h(Tt){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Dt){return typeof Dt}:function(Dt){return Dt&&typeof Symbol=="function"&&Dt.constructor===Symbol&&Dt!==Symbol.prototype?"symbol":typeof Dt})(Tt)}var M=function(Dt){return h(Dt)==="object"&&Dt!==null},O=function(Dt){if(!M(Dt)||!S(Dt,"Object"))return!1;if(Object.getPrototypeOf(Dt)===null)return!0;for(var Ut=Dt;Object.getPrototypeOf(Ut)!==null;)Ut=Object.getPrototypeOf(Ut);return Object.getPrototypeOf(Dt)===Ut},T=function(Dt){var Ut=Dt.filter(function(re){return!isNaN(re)});if(!Ut.length)return{min:0,max:0};if(j(Dt[0])){for(var jt=[],Vt=0;Vt<Dt.length;Vt++)jt=jt.concat(Dt[Vt]);Ut=jt}var Ht=Math.max.apply(null,Ut);return{min:Math.min.apply(null,Ut),max:Ht}},v=Array.prototype,m=(v.splice,v.indexOf,Array.prototype.splice,function(Tt){return S(Tt,"String")});function C(Tt){if(r(Tt))return Tt[0]}function D(Tt){if(r(Tt))return Tt[Tt.length-1]}var Y=function(Dt,Ut){if(Dt["_wrap_"+Ut])return Dt["_wrap_"+Ut];var jt=function(Ht){Dt[Ut](Ht)};return Dt["_wrap_"+Ut]=jt,jt},Z=function(Dt,Ut){var jt=Ut.toString(),Vt=jt.indexOf(".");if(Vt===-1)return Math.round(Dt);var Ht=jt.substr(Vt+1).length;return Ht>20&&(Ht=20),parseFloat(Dt.toFixed(Ht))},et=function(Dt){return S(Dt,"Number")};Number.isInteger&&Number.isInteger;function dt(Tt,Dt,Ut){return Ut===void 0&&(Ut=1e-5),Math.abs(Tt-Dt)<Ut}var ht=function(Dt,Ut){return(Dt%Ut+Ut)%Ut},St=(parseInt,Math.PI/180),wt=function(Dt){return St*Dt},xt=function(Tt){return A(Tt)?"":Tt.toString()},ft=function(Dt){var Ut=xt(Dt);return Ut.charAt(0).toUpperCase()+Ut.substring(1)},Bt={}.toString,Rt=function(Dt){return Bt.call(Dt).replace(/^\[object /,"").replace(/]$/,"")},Ot=function(Dt){return S(Dt,"Boolean")},X=function(Dt){return S(Dt,"Date")},ut=Object.prototype,vt=function(Dt){var Ut=Dt&&Dt.constructor;return Dt===(typeof Ut=="function"&&Ut.prototype||ut)};function pt(Tt){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Dt){return setTimeout(Dt,16)})(Tt)}function Et(Tt){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(Tt)}function q(Tt,Dt){for(var Ut in Dt)Dt.hasOwnProperty(Ut)&&Ut!=="constructor"&&Dt[Ut]!==void 0&&(Tt[Ut]=Dt[Ut])}function st(Tt,Dt,Ut,jt){return Dt&&q(Tt,Dt),Ut&&q(Tt,Ut),jt&&q(Tt,jt),Tt}function it(Tt){return(it=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Dt){return typeof Dt}:function(Dt){return Dt&&typeof Symbol=="function"&&Dt.constructor===Symbol&&Dt!==Symbol.prototype?"symbol":typeof Dt})(Tt)}var z=function Tt(Dt){if(it(Dt)!=="object"||Dt===null)return Dt;var Ut;if(j(Dt)){Ut=[];for(var jt=0,Vt=Dt.length;jt<Vt;jt++)it(Dt[jt])==="object"&&Dt[jt]!=null?Ut[jt]=Tt(Dt[jt]):Ut[jt]=Dt[jt]}else for(var Ht in Ut={},Dt)it(Dt[Ht])==="object"&&Dt[Ht]!=null?Ut[Ht]=Tt(Dt[Ht]):Ut[Ht]=Dt[Ht];return Ut},P=function(Dt,Ut,jt){var Vt;return function(){var Ht=this,re=arguments,pe=function(){Vt=null,jt||Dt.apply(Ht,re)},ye=jt&&!Vt;clearTimeout(Vt),Vt=setTimeout(pe,Ut),ye&&Dt.apply(Ht,re)}};function H(Tt,Dt,Ut,jt){for(var Vt in Ut=Ut||0,jt=jt||5,Dt)if(Dt.hasOwnProperty(Vt)){var Ht=Dt[Vt];Ht!==null&&O(Ht)?(O(Tt[Vt])||(Tt[Vt]={}),Ut<jt?H(Tt[Vt],Ht,Ut+1,jt):Tt[Vt]=Dt[Vt]):j(Ht)?(Tt[Vt]=[],Tt[Vt]=Tt[Vt].concat(Ht)):Ht!==void 0&&(Tt[Vt]=Ht)}}var k=function(Dt){for(var Ut=[],jt=1;jt<arguments.length;jt++)Ut[jt-1]=arguments[jt];for(var Vt=0;Vt<Ut.length;Vt+=1)H(Dt,Ut[Vt]);return Dt},d=function(Dt,Ut){if(!r(Dt))return-1;var jt=Array.prototype.indexOf;if(jt)return jt.call(Dt,Ut);for(var Vt=-1,Ht=0;Ht<Dt.length;Ht++)if(Dt[Ht]===Ut){Vt=Ht;break}return Vt},g=Object.prototype.hasOwnProperty,F=function(Dt){if(A(Dt))return!0;if(r(Dt))return!Dt.length;var Ut=Rt(Dt);if(Ut==="Map"||Ut==="Set")return!Dt.size;if(vt(Dt))return!Object.keys(Dt).length;for(var jt in Dt)if(g.call(Dt,jt))return!1;return!0},V=function Tt(Dt,Ut){if(Dt===Ut)return!0;if(!Dt||!Ut||m(Dt)||m(Ut))return!1;if(r(Dt)||r(Ut)){if(Dt.length!==Ut.length)return!1;for(var jt=!0,Vt=0;Vt<Dt.length&&(jt=Tt(Dt[Vt],Ut[Vt]));Vt++);return jt}if(M(Dt)||M(Ut)){var Ht=Object.keys(Dt),re=Object.keys(Ut);if(Ht.length!==re.length)return!1;for(jt=!0,Vt=0;Vt<Ht.length&&(jt=Tt(Dt[Ht[Vt]],Ut[Ht[Vt]]));Vt++);return jt}return!1},tt=function(Dt,Ut){if(!r(Dt))return Dt;for(var jt=[],Vt=0;Vt<Dt.length;Vt++){var Ht=Dt[Vt];jt.push(Ut(Ht,Vt))}return jt},ot=function(Dt,Ut,jt){for(var Vt=0,Ht=m(Ut)?Ut.split("."):Ut;Dt&&Vt<Ht.length;)Dt=Dt[Ht[Vt++]];return Dt===void 0||Vt<Ht.length?jt:Dt},at=function(Tt){return r(Tt)?Array.prototype.slice.call(Tt):[]},At={},yt=function(Dt){return At[Dt=Dt||"g"]?At[Dt]+=1:At[Dt]=1,Dt+At[Dt]},gt=function(){};function bt(Tt){return A(Tt)?0:r(Tt)?Tt.length:Object.keys(Tt).length}(function(){function Tt(){this.map={}}Tt.prototype.has=function(Dt){return this.map[Dt]!==void 0},Tt.prototype.get=function(Dt,Ut){var jt=this.map[Dt];return jt===void 0?Ut:jt},Tt.prototype.set=function(Dt,Ut){this.map[Dt]=Ut},Tt.prototype.clear=function(){this.map={}},Tt.prototype.delete=function(Dt){delete this.map[Dt]},Tt.prototype.size=function(){return Object.keys(this.map).length}})()},function(a,E,e){"use strict";e.d(E,"b",function(){return p}),e.d(E,"a",function(){return b}),e.d(E,"c",function(){return S}),e.d(E,"d",function(){return l});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var r=function(j,y){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&(n[h]=s[h])})(j,y)};function p(A,j){if(typeof j!="function"&&j!==null)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");function y(){this.constructor=A}r(A,j),A.prototype=j===null?Object.create(j):(y.prototype=j.prototype,new y)}var b=function(){return(b=Object.assign||function(j){for(var y,n=1,s=arguments.length;n<s;n++)for(var h in y=arguments[n])Object.prototype.hasOwnProperty.call(y,h)&&(j[h]=y[h]);return j}).apply(this,arguments)};function S(A,j){var y={};for(var n in A)Object.prototype.hasOwnProperty.call(A,n)&&j.indexOf(n)<0&&(y[n]=A[n]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(A);s<n.length;s++)j.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(A,n[s])&&(y[n[s]]=A[n[s]])}return y}function l(){for(var A=0,j=0,y=arguments.length;j<y;j++)A+=arguments[j].length;var n=Array(A),s=0;for(j=0;j<y;j++)for(var h=arguments[j],M=0,O=h.length;M<O;M++,s++)n[s]=h[M];return n}},function(a,E,e){"use strict";e.d(E,"a",function(){return r}),e.d(E,"b",function(){return p}),e.d(E,"c",function(){return S}),e.d(E,"d",function(){return Te}),e.d(E,"e",function(){return si}),e.d(E,"f",function(){return b});var r={};e.r(r),e.d(r,"create",function(){return A}),e.d(r,"fromMat4",function(){return j}),e.d(r,"clone",function(){return y}),e.d(r,"copy",function(){return n}),e.d(r,"fromValues",function(){return s}),e.d(r,"set",function(){return h}),e.d(r,"identity",function(){return M}),e.d(r,"transpose",function(){return O}),e.d(r,"invert",function(){return T}),e.d(r,"adjoint",function(){return v}),e.d(r,"determinant",function(){return m}),e.d(r,"multiply",function(){return C}),e.d(r,"translate",function(){return D}),e.d(r,"rotate",function(){return Y}),e.d(r,"scale",function(){return Z}),e.d(r,"fromTranslation",function(){return et}),e.d(r,"fromRotation",function(){return dt}),e.d(r,"fromScaling",function(){return ht}),e.d(r,"fromMat2d",function(){return St}),e.d(r,"fromQuat",function(){return wt}),e.d(r,"normalFromMat4",function(){return xt}),e.d(r,"projection",function(){return ft}),e.d(r,"str",function(){return Bt}),e.d(r,"frob",function(){return Rt}),e.d(r,"add",function(){return Ot}),e.d(r,"subtract",function(){return X}),e.d(r,"multiplyScalar",function(){return ut}),e.d(r,"multiplyScalarAndAdd",function(){return vt}),e.d(r,"exactEquals",function(){return pt}),e.d(r,"equals",function(){return Et}),e.d(r,"mul",function(){return q}),e.d(r,"sub",function(){return st});var p={};e.r(p),e.d(p,"create",function(){return it}),e.d(p,"clone",function(){return z}),e.d(p,"copy",function(){return P}),e.d(p,"fromValues",function(){return H}),e.d(p,"set",function(){return k}),e.d(p,"identity",function(){return d}),e.d(p,"transpose",function(){return g}),e.d(p,"invert",function(){return F}),e.d(p,"adjoint",function(){return V}),e.d(p,"determinant",function(){return tt}),e.d(p,"multiply",function(){return ot}),e.d(p,"translate",function(){return at}),e.d(p,"scale",function(){return At}),e.d(p,"rotate",function(){return yt}),e.d(p,"rotateX",function(){return gt}),e.d(p,"rotateY",function(){return bt}),e.d(p,"rotateZ",function(){return Tt}),e.d(p,"fromTranslation",function(){return Dt}),e.d(p,"fromScaling",function(){return Ut}),e.d(p,"fromRotation",function(){return jt}),e.d(p,"fromXRotation",function(){return Vt}),e.d(p,"fromYRotation",function(){return Ht}),e.d(p,"fromZRotation",function(){return re}),e.d(p,"fromRotationTranslation",function(){return pe}),e.d(p,"fromQuat2",function(){return ye}),e.d(p,"getTranslation",function(){return we}),e.d(p,"getScaling",function(){return Re}),e.d(p,"getRotation",function(){return He}),e.d(p,"fromRotationTranslationScale",function(){return pn}),e.d(p,"fromRotationTranslationScaleOrigin",function(){return fn}),e.d(p,"fromQuat",function(){return Rn}),e.d(p,"frustum",function(){return Cn}),e.d(p,"perspective",function(){return kn}),e.d(p,"perspectiveFromFieldOfView",function(){return Mn}),e.d(p,"ortho",function(){return Tn}),e.d(p,"lookAt",function(){return Un}),e.d(p,"targetTo",function(){return Kn}),e.d(p,"str",function(){return tr}),e.d(p,"frob",function(){return or}),e.d(p,"add",function(){return nr}),e.d(p,"subtract",function(){return er}),e.d(p,"multiplyScalar",function(){return Sr}),e.d(p,"multiplyScalarAndAdd",function(){return Vr}),e.d(p,"exactEquals",function(){return ti}),e.d(p,"equals",function(){return hi}),e.d(p,"mul",function(){return Fi}),e.d(p,"sub",function(){return to});var b={};e.r(b),e.d(b,"create",function(){return Ti}),e.d(b,"clone",function(){return _i}),e.d(b,"fromValues",function(){return Li}),e.d(b,"copy",function(){return Vi}),e.d(b,"set",function(){return ro}),e.d(b,"add",function(){return jr}),e.d(b,"subtract",function(){return Ji}),e.d(b,"multiply",function(){return pr}),e.d(b,"divide",function(){return Yr}),e.d(b,"ceil",function(){return Br}),e.d(b,"floor",function(){return Nr}),e.d(b,"min",function(){return Xr}),e.d(b,"max",function(){return Kr}),e.d(b,"round",function(){return ni}),e.d(b,"scale",function(){return fi}),e.d(b,"scaleAndAdd",function(){return $r}),e.d(b,"distance",function(){return ci}),e.d(b,"squaredDistance",function(){return Qr}),e.d(b,"length",function(){return gi}),e.d(b,"squaredLength",function(){return Oi}),e.d(b,"negate",function(){return bi}),e.d(b,"inverse",function(){return zi}),e.d(b,"normalize",function(){return Qi}),e.d(b,"dot",function(){return io}),e.d(b,"cross",function(){return Wi}),e.d(b,"lerp",function(){return Zi}),e.d(b,"random",function(){return Pi}),e.d(b,"transformMat4",function(){return no}),e.d(b,"transformQuat",function(){return Mo}),e.d(b,"zero",function(){return ao}),e.d(b,"str",function(){return uo}),e.d(b,"exactEquals",function(){return xo}),e.d(b,"equals",function(){return oe}),e.d(b,"sub",function(){return te}),e.d(b,"mul",function(){return Oe}),e.d(b,"div",function(){return Qe}),e.d(b,"dist",function(){return On}),e.d(b,"sqrDist",function(){return Vn}),e.d(b,"len",function(){return Xn}),e.d(b,"sqrLen",function(){return $e}),e.d(b,"forEach",function(){return rn});var S={};e.r(S),e.d(S,"create",function(){return on}),e.d(S,"identity",function(){return $n}),e.d(S,"setAxisAngle",function(){return vr}),e.d(S,"getAxisAngle",function(){return ar}),e.d(S,"getAngle",function(){return rr}),e.d(S,"multiply",function(){return Fr}),e.d(S,"rotateX",function(){return Ar}),e.d(S,"rotateY",function(){return wr}),e.d(S,"rotateZ",function(){return xr}),e.d(S,"calculateW",function(){return Er}),e.d(S,"exp",function(){return Ir}),e.d(S,"ln",function(){return Lr}),e.d(S,"pow",function(){return Pr}),e.d(S,"slerp",function(){return Dr}),e.d(S,"random",function(){return ri}),e.d(S,"invert",function(){return vi}),e.d(S,"conjugate",function(){return ii}),e.d(S,"fromMat3",function(){return Si}),e.d(S,"fromEuler",function(){return Ui}),e.d(S,"str",function(){return Yi}),e.d(S,"clone",function(){return lt}),e.d(S,"fromValues",function(){return Ft}),e.d(S,"copy",function(){return Jt}),e.d(S,"set",function(){return ie}),e.d(S,"add",function(){return se}),e.d(S,"mul",function(){return Ce}),e.d(S,"scale",function(){return Ee}),e.d(S,"dot",function(){return un}),e.d(S,"lerp",function(){return xn}),e.d(S,"length",function(){return zt}),e.d(S,"len",function(){return Yt}),e.d(S,"squaredLength",function(){return Se}),e.d(S,"sqrLen",function(){return Wt}),e.d(S,"normalize",function(){return ue}),e.d(S,"exactEquals",function(){return vn}),e.d(S,"equals",function(){return Dn}),e.d(S,"rotationTo",function(){return zn}),e.d(S,"sqlerp",function(){return _n}),e.d(S,"setAxes",function(){return Ze});var l=e(11);function A(){var N=new l.a(9);return l.a!=Float32Array&&(N[1]=0,N[2]=0,N[3]=0,N[5]=0,N[6]=0,N[7]=0),N[0]=1,N[4]=1,N[8]=1,N}function j(N,mt){return N[0]=mt[0],N[1]=mt[1],N[2]=mt[2],N[3]=mt[4],N[4]=mt[5],N[5]=mt[6],N[6]=mt[8],N[7]=mt[9],N[8]=mt[10],N}function y(N){var mt=new l.a(9);return mt[0]=N[0],mt[1]=N[1],mt[2]=N[2],mt[3]=N[3],mt[4]=N[4],mt[5]=N[5],mt[6]=N[6],mt[7]=N[7],mt[8]=N[8],mt}function n(N,mt){return N[0]=mt[0],N[1]=mt[1],N[2]=mt[2],N[3]=mt[3],N[4]=mt[4],N[5]=mt[5],N[6]=mt[6],N[7]=mt[7],N[8]=mt[8],N}function s(N,mt,$t,me,Zt,de,he,ce,Me){var ze=new l.a(9);return ze[0]=N,ze[1]=mt,ze[2]=$t,ze[3]=me,ze[4]=Zt,ze[5]=de,ze[6]=he,ze[7]=ce,ze[8]=Me,ze}function h(N,mt,$t,me,Zt,de,he,ce,Me,ze){return N[0]=mt,N[1]=$t,N[2]=me,N[3]=Zt,N[4]=de,N[5]=he,N[6]=ce,N[7]=Me,N[8]=ze,N}function M(N){return N[0]=1,N[1]=0,N[2]=0,N[3]=0,N[4]=1,N[5]=0,N[6]=0,N[7]=0,N[8]=1,N}function O(N,mt){if(N===mt){var $t=mt[1],me=mt[2],Zt=mt[5];N[1]=mt[3],N[2]=mt[6],N[3]=$t,N[5]=mt[7],N[6]=me,N[7]=Zt}else N[0]=mt[0],N[1]=mt[3],N[2]=mt[6],N[3]=mt[1],N[4]=mt[4],N[5]=mt[7],N[6]=mt[2],N[7]=mt[5],N[8]=mt[8];return N}function T(N,mt){var $t=mt[0],me=mt[1],Zt=mt[2],de=mt[3],he=mt[4],ce=mt[5],Me=mt[6],ze=mt[7],Ve=mt[8],ke=Ve*he-ce*ze,tn=-Ve*de+ce*Me,De=ze*de-he*Me,cn=$t*ke+me*tn+Zt*De;return cn?(cn=1/cn,N[0]=ke*cn,N[1]=(-Ve*me+Zt*ze)*cn,N[2]=(ce*me-Zt*he)*cn,N[3]=tn*cn,N[4]=(Ve*$t-Zt*Me)*cn,N[5]=(-ce*$t+Zt*de)*cn,N[6]=De*cn,N[7]=(-ze*$t+me*Me)*cn,N[8]=(he*$t-me*de)*cn,N):null}function v(N,mt){var $t=mt[0],me=mt[1],Zt=mt[2],de=mt[3],he=mt[4],ce=mt[5],Me=mt[6],ze=mt[7],Ve=mt[8];return N[0]=he*Ve-ce*ze,N[1]=Zt*ze-me*Ve,N[2]=me*ce-Zt*he,N[3]=ce*Me-de*Ve,N[4]=$t*Ve-Zt*Me,N[5]=Zt*de-$t*ce,N[6]=de*ze-he*Me,N[7]=me*Me-$t*ze,N[8]=$t*he-me*de,N}function m(N){var mt=N[0],$t=N[1],me=N[2],Zt=N[3],de=N[4],he=N[5],ce=N[6],Me=N[7],ze=N[8];return mt*(ze*de-he*Me)+$t*(-ze*Zt+he*ce)+me*(Me*Zt-de*ce)}function C(N,mt,$t){var me=mt[0],Zt=mt[1],de=mt[2],he=mt[3],ce=mt[4],Me=mt[5],ze=mt[6],Ve=mt[7],ke=mt[8],tn=$t[0],De=$t[1],cn=$t[2],hn=$t[3],nn=$t[4],dn=$t[5],Sn=$t[6],Pe=$t[7],le=$t[8];return N[0]=tn*me+De*he+cn*ze,N[1]=tn*Zt+De*ce+cn*Ve,N[2]=tn*de+De*Me+cn*ke,N[3]=hn*me+nn*he+dn*ze,N[4]=hn*Zt+nn*ce+dn*Ve,N[5]=hn*de+nn*Me+dn*ke,N[6]=Sn*me+Pe*he+le*ze,N[7]=Sn*Zt+Pe*ce+le*Ve,N[8]=Sn*de+Pe*Me+le*ke,N}function D(N,mt,$t){var me=mt[0],Zt=mt[1],de=mt[2],he=mt[3],ce=mt[4],Me=mt[5],ze=mt[6],Ve=mt[7],ke=mt[8],tn=$t[0],De=$t[1];return N[0]=me,N[1]=Zt,N[2]=de,N[3]=he,N[4]=ce,N[5]=Me,N[6]=tn*me+De*he+ze,N[7]=tn*Zt+De*ce+Ve,N[8]=tn*de+De*Me+ke,N}function Y(N,mt,$t){var me=mt[0],Zt=mt[1],de=mt[2],he=mt[3],ce=mt[4],Me=mt[5],ze=mt[6],Ve=mt[7],ke=mt[8],tn=Math.sin($t),De=Math.cos($t);return N[0]=De*me+tn*he,N[1]=De*Zt+tn*ce,N[2]=De*de+tn*Me,N[3]=De*he-tn*me,N[4]=De*ce-tn*Zt,N[5]=De*Me-tn*de,N[6]=ze,N[7]=Ve,N[8]=ke,N}function Z(N,mt,$t){var me=$t[0],Zt=$t[1];return N[0]=me*mt[0],N[1]=me*mt[1],N[2]=me*mt[2],N[3]=Zt*mt[3],N[4]=Zt*mt[4],N[5]=Zt*mt[5],N[6]=mt[6],N[7]=mt[7],N[8]=mt[8],N}function et(N,mt){return N[0]=1,N[1]=0,N[2]=0,N[3]=0,N[4]=1,N[5]=0,N[6]=mt[0],N[7]=mt[1],N[8]=1,N}function dt(N,mt){var $t=Math.sin(mt),me=Math.cos(mt);return N[0]=me,N[1]=$t,N[2]=0,N[3]=-$t,N[4]=me,N[5]=0,N[6]=0,N[7]=0,N[8]=1,N}function ht(N,mt){return N[0]=mt[0],N[1]=0,N[2]=0,N[3]=0,N[4]=mt[1],N[5]=0,N[6]=0,N[7]=0,N[8]=1,N}function St(N,mt){return N[0]=mt[0],N[1]=mt[1],N[2]=0,N[3]=mt[2],N[4]=mt[3],N[5]=0,N[6]=mt[4],N[7]=mt[5],N[8]=1,N}function wt(N,mt){var $t=mt[0],me=mt[1],Zt=mt[2],de=mt[3],he=$t+$t,ce=me+me,Me=Zt+Zt,ze=$t*he,Ve=me*he,ke=me*ce,tn=Zt*he,De=Zt*ce,cn=Zt*Me,hn=de*he,nn=de*ce,dn=de*Me;return N[0]=1-ke-cn,N[3]=Ve-dn,N[6]=tn+nn,N[1]=Ve+dn,N[4]=1-ze-cn,N[7]=De-hn,N[2]=tn-nn,N[5]=De+hn,N[8]=1-ze-ke,N}function xt(N,mt){var $t=mt[0],me=mt[1],Zt=mt[2],de=mt[3],he=mt[4],ce=mt[5],Me=mt[6],ze=mt[7],Ve=mt[8],ke=mt[9],tn=mt[10],De=mt[11],cn=mt[12],hn=mt[13],nn=mt[14],dn=mt[15],Sn=$t*ce-me*he,Pe=$t*Me-Zt*he,le=$t*ze-de*he,Le=me*Me-Zt*ce,Be=me*ze-de*ce,en=Zt*ze-de*Me,sn=Ve*hn-ke*cn,Ue=Ve*nn-tn*cn,ln=Ve*dn-De*cn,mn=ke*nn-tn*hn,Wn=ke*dn-De*hn,An=tn*dn-De*nn,In=Sn*An-Pe*Wn+le*mn+Le*ln-Be*Ue+en*sn;return In?(In=1/In,N[0]=(ce*An-Me*Wn+ze*mn)*In,N[1]=(Me*ln-he*An-ze*Ue)*In,N[2]=(he*Wn-ce*ln+ze*sn)*In,N[3]=(Zt*Wn-me*An-de*mn)*In,N[4]=($t*An-Zt*ln+de*Ue)*In,N[5]=(me*ln-$t*Wn-de*sn)*In,N[6]=(hn*en-nn*Be+dn*Le)*In,N[7]=(nn*le-cn*en-dn*Pe)*In,N[8]=(cn*Be-hn*le+dn*Sn)*In,N):null}function ft(N,mt,$t){return N[0]=2/mt,N[1]=0,N[2]=0,N[3]=0,N[4]=-2/$t,N[5]=0,N[6]=-1,N[7]=1,N[8]=1,N}function Bt(N){return"mat3("+N[0]+", "+N[1]+", "+N[2]+", "+N[3]+", "+N[4]+", "+N[5]+", "+N[6]+", "+N[7]+", "+N[8]+")"}function Rt(N){return Math.hypot(N[0],N[1],N[2],N[3],N[4],N[5],N[6],N[7],N[8])}function Ot(N,mt,$t){return N[0]=mt[0]+$t[0],N[1]=mt[1]+$t[1],N[2]=mt[2]+$t[2],N[3]=mt[3]+$t[3],N[4]=mt[4]+$t[4],N[5]=mt[5]+$t[5],N[6]=mt[6]+$t[6],N[7]=mt[7]+$t[7],N[8]=mt[8]+$t[8],N}function X(N,mt,$t){return N[0]=mt[0]-$t[0],N[1]=mt[1]-$t[1],N[2]=mt[2]-$t[2],N[3]=mt[3]-$t[3],N[4]=mt[4]-$t[4],N[5]=mt[5]-$t[5],N[6]=mt[6]-$t[6],N[7]=mt[7]-$t[7],N[8]=mt[8]-$t[8],N}function ut(N,mt,$t){return N[0]=mt[0]*$t,N[1]=mt[1]*$t,N[2]=mt[2]*$t,N[3]=mt[3]*$t,N[4]=mt[4]*$t,N[5]=mt[5]*$t,N[6]=mt[6]*$t,N[7]=mt[7]*$t,N[8]=mt[8]*$t,N}function vt(N,mt,$t,me){return N[0]=mt[0]+$t[0]*me,N[1]=mt[1]+$t[1]*me,N[2]=mt[2]+$t[2]*me,N[3]=mt[3]+$t[3]*me,N[4]=mt[4]+$t[4]*me,N[5]=mt[5]+$t[5]*me,N[6]=mt[6]+$t[6]*me,N[7]=mt[7]+$t[7]*me,N[8]=mt[8]+$t[8]*me,N}function pt(N,mt){return N[0]===mt[0]&&N[1]===mt[1]&&N[2]===mt[2]&&N[3]===mt[3]&&N[4]===mt[4]&&N[5]===mt[5]&&N[6]===mt[6]&&N[7]===mt[7]&&N[8]===mt[8]}function Et(N,mt){var $t=N[0],me=N[1],Zt=N[2],de=N[3],he=N[4],ce=N[5],Me=N[6],ze=N[7],Ve=N[8],ke=mt[0],tn=mt[1],De=mt[2],cn=mt[3],hn=mt[4],nn=mt[5],dn=mt[6],Sn=mt[7],Pe=mt[8];return Math.abs($t-ke)<=l.b*Math.max(1,Math.abs($t),Math.abs(ke))&&Math.abs(me-tn)<=l.b*Math.max(1,Math.abs(me),Math.abs(tn))&&Math.abs(Zt-De)<=l.b*Math.max(1,Math.abs(Zt),Math.abs(De))&&Math.abs(de-cn)<=l.b*Math.max(1,Math.abs(de),Math.abs(cn))&&Math.abs(he-hn)<=l.b*Math.max(1,Math.abs(he),Math.abs(hn))&&Math.abs(ce-nn)<=l.b*Math.max(1,Math.abs(ce),Math.abs(nn))&&Math.abs(Me-dn)<=l.b*Math.max(1,Math.abs(Me),Math.abs(dn))&&Math.abs(ze-Sn)<=l.b*Math.max(1,Math.abs(ze),Math.abs(Sn))&&Math.abs(Ve-Pe)<=l.b*Math.max(1,Math.abs(Ve),Math.abs(Pe))}var q=C,st=X;function it(){var N=new l.a(16);return l.a!=Float32Array&&(N[1]=0,N[2]=0,N[3]=0,N[4]=0,N[6]=0,N[7]=0,N[8]=0,N[9]=0,N[11]=0,N[12]=0,N[13]=0,N[14]=0),N[0]=1,N[5]=1,N[10]=1,N[15]=1,N}function z(N){var mt=new l.a(16);return mt[0]=N[0],mt[1]=N[1],mt[2]=N[2],mt[3]=N[3],mt[4]=N[4],mt[5]=N[5],mt[6]=N[6],mt[7]=N[7],mt[8]=N[8],mt[9]=N[9],mt[10]=N[10],mt[11]=N[11],mt[12]=N[12],mt[13]=N[13],mt[14]=N[14],mt[15]=N[15],mt}function P(N,mt){return N[0]=mt[0],N[1]=mt[1],N[2]=mt[2],N[3]=mt[3],N[4]=mt[4],N[5]=mt[5],N[6]=mt[6],N[7]=mt[7],N[8]=mt[8],N[9]=mt[9],N[10]=mt[10],N[11]=mt[11],N[12]=mt[12],N[13]=mt[13],N[14]=mt[14],N[15]=mt[15],N}function H(N,mt,$t,me,Zt,de,he,ce,Me,ze,Ve,ke,tn,De,cn,hn){var nn=new l.a(16);return nn[0]=N,nn[1]=mt,nn[2]=$t,nn[3]=me,nn[4]=Zt,nn[5]=de,nn[6]=he,nn[7]=ce,nn[8]=Me,nn[9]=ze,nn[10]=Ve,nn[11]=ke,nn[12]=tn,nn[13]=De,nn[14]=cn,nn[15]=hn,nn}function k(N,mt,$t,me,Zt,de,he,ce,Me,ze,Ve,ke,tn,De,cn,hn,nn){return N[0]=mt,N[1]=$t,N[2]=me,N[3]=Zt,N[4]=de,N[5]=he,N[6]=ce,N[7]=Me,N[8]=ze,N[9]=Ve,N[10]=ke,N[11]=tn,N[12]=De,N[13]=cn,N[14]=hn,N[15]=nn,N}function d(N){return N[0]=1,N[1]=0,N[2]=0,N[3]=0,N[4]=0,N[5]=1,N[6]=0,N[7]=0,N[8]=0,N[9]=0,N[10]=1,N[11]=0,N[12]=0,N[13]=0,N[14]=0,N[15]=1,N}function g(N,mt){if(N===mt){var $t=mt[1],me=mt[2],Zt=mt[3],de=mt[6],he=mt[7],ce=mt[11];N[1]=mt[4],N[2]=mt[8],N[3]=mt[12],N[4]=$t,N[6]=mt[9],N[7]=mt[13],N[8]=me,N[9]=de,N[11]=mt[14],N[12]=Zt,N[13]=he,N[14]=ce}else N[0]=mt[0],N[1]=mt[4],N[2]=mt[8],N[3]=mt[12],N[4]=mt[1],N[5]=mt[5],N[6]=mt[9],N[7]=mt[13],N[8]=mt[2],N[9]=mt[6],N[10]=mt[10],N[11]=mt[14],N[12]=mt[3],N[13]=mt[7],N[14]=mt[11],N[15]=mt[15];return N}function F(N,mt){var $t=mt[0],me=mt[1],Zt=mt[2],de=mt[3],he=mt[4],ce=mt[5],Me=mt[6],ze=mt[7],Ve=mt[8],ke=mt[9],tn=mt[10],De=mt[11],cn=mt[12],hn=mt[13],nn=mt[14],dn=mt[15],Sn=$t*ce-me*he,Pe=$t*Me-Zt*he,le=$t*ze-de*he,Le=me*Me-Zt*ce,Be=me*ze-de*ce,en=Zt*ze-de*Me,sn=Ve*hn-ke*cn,Ue=Ve*nn-tn*cn,ln=Ve*dn-De*cn,mn=ke*nn-tn*hn,Wn=ke*dn-De*hn,An=tn*dn-De*nn,In=Sn*An-Pe*Wn+le*mn+Le*ln-Be*Ue+en*sn;return In?(In=1/In,N[0]=(ce*An-Me*Wn+ze*mn)*In,N[1]=(Zt*Wn-me*An-de*mn)*In,N[2]=(hn*en-nn*Be+dn*Le)*In,N[3]=(tn*Be-ke*en-De*Le)*In,N[4]=(Me*ln-he*An-ze*Ue)*In,N[5]=($t*An-Zt*ln+de*Ue)*In,N[6]=(nn*le-cn*en-dn*Pe)*In,N[7]=(Ve*en-tn*le+De*Pe)*In,N[8]=(he*Wn-ce*ln+ze*sn)*In,N[9]=(me*ln-$t*Wn-de*sn)*In,N[10]=(cn*Be-hn*le+dn*Sn)*In,N[11]=(ke*le-Ve*Be-De*Sn)*In,N[12]=(ce*Ue-he*mn-Me*sn)*In,N[13]=($t*mn-me*Ue+Zt*sn)*In,N[14]=(hn*Pe-cn*Le-nn*Sn)*In,N[15]=(Ve*Le-ke*Pe+tn*Sn)*In,N):null}function V(N,mt){var $t=mt[0],me=mt[1],Zt=mt[2],de=mt[3],he=mt[4],ce=mt[5],Me=mt[6],ze=mt[7],Ve=mt[8],ke=mt[9],tn=mt[10],De=mt[11],cn=mt[12],hn=mt[13],nn=mt[14],dn=mt[15];return N[0]=ce*(tn*dn-De*nn)-ke*(Me*dn-ze*nn)+hn*(Me*De-ze*tn),N[1]=-(me*(tn*dn-De*nn)-ke*(Zt*dn-de*nn)+hn*(Zt*De-de*tn)),N[2]=me*(Me*dn-ze*nn)-ce*(Zt*dn-de*nn)+hn*(Zt*ze-de*Me),N[3]=-(me*(Me*De-ze*tn)-ce*(Zt*De-de*tn)+ke*(Zt*ze-de*Me)),N[4]=-(he*(tn*dn-De*nn)-Ve*(Me*dn-ze*nn)+cn*(Me*De-ze*tn)),N[5]=$t*(tn*dn-De*nn)-Ve*(Zt*dn-de*nn)+cn*(Zt*De-de*tn),N[6]=-($t*(Me*dn-ze*nn)-he*(Zt*dn-de*nn)+cn*(Zt*ze-de*Me)),N[7]=$t*(Me*De-ze*tn)-he*(Zt*De-de*tn)+Ve*(Zt*ze-de*Me),N[8]=he*(ke*dn-De*hn)-Ve*(ce*dn-ze*hn)+cn*(ce*De-ze*ke),N[9]=-($t*(ke*dn-De*hn)-Ve*(me*dn-de*hn)+cn*(me*De-de*ke)),N[10]=$t*(ce*dn-ze*hn)-he*(me*dn-de*hn)+cn*(me*ze-de*ce),N[11]=-($t*(ce*De-ze*ke)-he*(me*De-de*ke)+Ve*(me*ze-de*ce)),N[12]=-(he*(ke*nn-tn*hn)-Ve*(ce*nn-Me*hn)+cn*(ce*tn-Me*ke)),N[13]=$t*(ke*nn-tn*hn)-Ve*(me*nn-Zt*hn)+cn*(me*tn-Zt*ke),N[14]=-($t*(ce*nn-Me*hn)-he*(me*nn-Zt*hn)+cn*(me*Me-Zt*ce)),N[15]=$t*(ce*tn-Me*ke)-he*(me*tn-Zt*ke)+Ve*(me*Me-Zt*ce),N}function tt(N){var mt=N[0],$t=N[1],me=N[2],Zt=N[3],de=N[4],he=N[5],ce=N[6],Me=N[7],ze=N[8],Ve=N[9],ke=N[10],tn=N[11],De=N[12],cn=N[13],hn=N[14],nn=N[15];return(mt*he-$t*de)*(ke*nn-tn*hn)-(mt*ce-me*de)*(Ve*nn-tn*cn)+(mt*Me-Zt*de)*(Ve*hn-ke*cn)+($t*ce-me*he)*(ze*nn-tn*De)-($t*Me-Zt*he)*(ze*hn-ke*De)+(me*Me-Zt*ce)*(ze*cn-Ve*De)}function ot(N,mt,$t){var me=mt[0],Zt=mt[1],de=mt[2],he=mt[3],ce=mt[4],Me=mt[5],ze=mt[6],Ve=mt[7],ke=mt[8],tn=mt[9],De=mt[10],cn=mt[11],hn=mt[12],nn=mt[13],dn=mt[14],Sn=mt[15],Pe=$t[0],le=$t[1],Le=$t[2],Be=$t[3];return N[0]=Pe*me+le*ce+Le*ke+Be*hn,N[1]=Pe*Zt+le*Me+Le*tn+Be*nn,N[2]=Pe*de+le*ze+Le*De+Be*dn,N[3]=Pe*he+le*Ve+Le*cn+Be*Sn,Pe=$t[4],le=$t[5],Le=$t[6],Be=$t[7],N[4]=Pe*me+le*ce+Le*ke+Be*hn,N[5]=Pe*Zt+le*Me+Le*tn+Be*nn,N[6]=Pe*de+le*ze+Le*De+Be*dn,N[7]=Pe*he+le*Ve+Le*cn+Be*Sn,Pe=$t[8],le=$t[9],Le=$t[10],Be=$t[11],N[8]=Pe*me+le*ce+Le*ke+Be*hn,N[9]=Pe*Zt+le*Me+Le*tn+Be*nn,N[10]=Pe*de+le*ze+Le*De+Be*dn,N[11]=Pe*he+le*Ve+Le*cn+Be*Sn,Pe=$t[12],le=$t[13],Le=$t[14],Be=$t[15],N[12]=Pe*me+le*ce+Le*ke+Be*hn,N[13]=Pe*Zt+le*Me+Le*tn+Be*nn,N[14]=Pe*de+le*ze+Le*De+Be*dn,N[15]=Pe*he+le*Ve+Le*cn+Be*Sn,N}function at(N,mt,$t){var me,Zt,de,he,ce,Me,ze,Ve,ke,tn,De,cn,hn=$t[0],nn=$t[1],dn=$t[2];return mt===N?(N[12]=mt[0]*hn+mt[4]*nn+mt[8]*dn+mt[12],N[13]=mt[1]*hn+mt[5]*nn+mt[9]*dn+mt[13],N[14]=mt[2]*hn+mt[6]*nn+mt[10]*dn+mt[14],N[15]=mt[3]*hn+mt[7]*nn+mt[11]*dn+mt[15]):(me=mt[0],Zt=mt[1],de=mt[2],he=mt[3],ce=mt[4],Me=mt[5],ze=mt[6],Ve=mt[7],ke=mt[8],tn=mt[9],De=mt[10],cn=mt[11],N[0]=me,N[1]=Zt,N[2]=de,N[3]=he,N[4]=ce,N[5]=Me,N[6]=ze,N[7]=Ve,N[8]=ke,N[9]=tn,N[10]=De,N[11]=cn,N[12]=me*hn+ce*nn+ke*dn+mt[12],N[13]=Zt*hn+Me*nn+tn*dn+mt[13],N[14]=de*hn+ze*nn+De*dn+mt[14],N[15]=he*hn+Ve*nn+cn*dn+mt[15]),N}function At(N,mt,$t){var me=$t[0],Zt=$t[1],de=$t[2];return N[0]=mt[0]*me,N[1]=mt[1]*me,N[2]=mt[2]*me,N[3]=mt[3]*me,N[4]=mt[4]*Zt,N[5]=mt[5]*Zt,N[6]=mt[6]*Zt,N[7]=mt[7]*Zt,N[8]=mt[8]*de,N[9]=mt[9]*de,N[10]=mt[10]*de,N[11]=mt[11]*de,N[12]=mt[12],N[13]=mt[13],N[14]=mt[14],N[15]=mt[15],N}function yt(N,mt,$t,me){var Zt,de,he,ce,Me,ze,Ve,ke,tn,De,cn,hn,nn,dn,Sn,Pe,le,Le,Be,en,sn,Ue,ln,mn,Wn=me[0],An=me[1],In=me[2],lr=Math.hypot(Wn,An,In);return lr<l.b?null:(Wn*=lr=1/lr,An*=lr,In*=lr,Zt=Math.sin($t),he=1-(de=Math.cos($t)),ce=mt[0],Me=mt[1],ze=mt[2],Ve=mt[3],ke=mt[4],tn=mt[5],De=mt[6],cn=mt[7],hn=mt[8],nn=mt[9],dn=mt[10],Sn=mt[11],Pe=Wn*Wn*he+de,le=An*Wn*he+In*Zt,Le=In*Wn*he-An*Zt,Be=Wn*An*he-In*Zt,en=An*An*he+de,sn=In*An*he+Wn*Zt,Ue=Wn*In*he+An*Zt,ln=An*In*he-Wn*Zt,mn=In*In*he+de,N[0]=ce*Pe+ke*le+hn*Le,N[1]=Me*Pe+tn*le+nn*Le,N[2]=ze*Pe+De*le+dn*Le,N[3]=Ve*Pe+cn*le+Sn*Le,N[4]=ce*Be+ke*en+hn*sn,N[5]=Me*Be+tn*en+nn*sn,N[6]=ze*Be+De*en+dn*sn,N[7]=Ve*Be+cn*en+Sn*sn,N[8]=ce*Ue+ke*ln+hn*mn,N[9]=Me*Ue+tn*ln+nn*mn,N[10]=ze*Ue+De*ln+dn*mn,N[11]=Ve*Ue+cn*ln+Sn*mn,mt!==N&&(N[12]=mt[12],N[13]=mt[13],N[14]=mt[14],N[15]=mt[15]),N)}function gt(N,mt,$t){var me=Math.sin($t),Zt=Math.cos($t),de=mt[4],he=mt[5],ce=mt[6],Me=mt[7],ze=mt[8],Ve=mt[9],ke=mt[10],tn=mt[11];return mt!==N&&(N[0]=mt[0],N[1]=mt[1],N[2]=mt[2],N[3]=mt[3],N[12]=mt[12],N[13]=mt[13],N[14]=mt[14],N[15]=mt[15]),N[4]=de*Zt+ze*me,N[5]=he*Zt+Ve*me,N[6]=ce*Zt+ke*me,N[7]=Me*Zt+tn*me,N[8]=ze*Zt-de*me,N[9]=Ve*Zt-he*me,N[10]=ke*Zt-ce*me,N[11]=tn*Zt-Me*me,N}function bt(N,mt,$t){var me=Math.sin($t),Zt=Math.cos($t),de=mt[0],he=mt[1],ce=mt[2],Me=mt[3],ze=mt[8],Ve=mt[9],ke=mt[10],tn=mt[11];return mt!==N&&(N[4]=mt[4],N[5]=mt[5],N[6]=mt[6],N[7]=mt[7],N[12]=mt[12],N[13]=mt[13],N[14]=mt[14],N[15]=mt[15]),N[0]=de*Zt-ze*me,N[1]=he*Zt-Ve*me,N[2]=ce*Zt-ke*me,N[3]=Me*Zt-tn*me,N[8]=de*me+ze*Zt,N[9]=he*me+Ve*Zt,N[10]=ce*me+ke*Zt,N[11]=Me*me+tn*Zt,N}function Tt(N,mt,$t){var me=Math.sin($t),Zt=Math.cos($t),de=mt[0],he=mt[1],ce=mt[2],Me=mt[3],ze=mt[4],Ve=mt[5],ke=mt[6],tn=mt[7];return mt!==N&&(N[8]=mt[8],N[9]=mt[9],N[10]=mt[10],N[11]=mt[11],N[12]=mt[12],N[13]=mt[13],N[14]=mt[14],N[15]=mt[15]),N[0]=de*Zt+ze*me,N[1]=he*Zt+Ve*me,N[2]=ce*Zt+ke*me,N[3]=Me*Zt+tn*me,N[4]=ze*Zt-de*me,N[5]=Ve*Zt-he*me,N[6]=ke*Zt-ce*me,N[7]=tn*Zt-Me*me,N}function Dt(N,mt){return N[0]=1,N[1]=0,N[2]=0,N[3]=0,N[4]=0,N[5]=1,N[6]=0,N[7]=0,N[8]=0,N[9]=0,N[10]=1,N[11]=0,N[12]=mt[0],N[13]=mt[1],N[14]=mt[2],N[15]=1,N}function Ut(N,mt){return N[0]=mt[0],N[1]=0,N[2]=0,N[3]=0,N[4]=0,N[5]=mt[1],N[6]=0,N[7]=0,N[8]=0,N[9]=0,N[10]=mt[2],N[11]=0,N[12]=0,N[13]=0,N[14]=0,N[15]=1,N}function jt(N,mt,$t){var me,Zt,de,he=$t[0],ce=$t[1],Me=$t[2],ze=Math.hypot(he,ce,Me);return ze<l.b?null:(he*=ze=1/ze,ce*=ze,Me*=ze,me=Math.sin(mt),de=1-(Zt=Math.cos(mt)),N[0]=he*he*de+Zt,N[1]=ce*he*de+Me*me,N[2]=Me*he*de-ce*me,N[3]=0,N[4]=he*ce*de-Me*me,N[5]=ce*ce*de+Zt,N[6]=Me*ce*de+he*me,N[7]=0,N[8]=he*Me*de+ce*me,N[9]=ce*Me*de-he*me,N[10]=Me*Me*de+Zt,N[11]=0,N[12]=0,N[13]=0,N[14]=0,N[15]=1,N)}function Vt(N,mt){var $t=Math.sin(mt),me=Math.cos(mt);return N[0]=1,N[1]=0,N[2]=0,N[3]=0,N[4]=0,N[5]=me,N[6]=$t,N[7]=0,N[8]=0,N[9]=-$t,N[10]=me,N[11]=0,N[12]=0,N[13]=0,N[14]=0,N[15]=1,N}function Ht(N,mt){var $t=Math.sin(mt),me=Math.cos(mt);return N[0]=me,N[1]=0,N[2]=-$t,N[3]=0,N[4]=0,N[5]=1,N[6]=0,N[7]=0,N[8]=$t,N[9]=0,N[10]=me,N[11]=0,N[12]=0,N[13]=0,N[14]=0,N[15]=1,N}function re(N,mt){var $t=Math.sin(mt),me=Math.cos(mt);return N[0]=me,N[1]=$t,N[2]=0,N[3]=0,N[4]=-$t,N[5]=me,N[6]=0,N[7]=0,N[8]=0,N[9]=0,N[10]=1,N[11]=0,N[12]=0,N[13]=0,N[14]=0,N[15]=1,N}function pe(N,mt,$t){var me=mt[0],Zt=mt[1],de=mt[2],he=mt[3],ce=me+me,Me=Zt+Zt,ze=de+de,Ve=me*ce,ke=me*Me,tn=me*ze,De=Zt*Me,cn=Zt*ze,hn=de*ze,nn=he*ce,dn=he*Me,Sn=he*ze;return N[0]=1-(De+hn),N[1]=ke+Sn,N[2]=tn-dn,N[3]=0,N[4]=ke-Sn,N[5]=1-(Ve+hn),N[6]=cn+nn,N[7]=0,N[8]=tn+dn,N[9]=cn-nn,N[10]=1-(Ve+De),N[11]=0,N[12]=$t[0],N[13]=$t[1],N[14]=$t[2],N[15]=1,N}function ye(N,mt){var $t=new l.a(3),me=-mt[0],Zt=-mt[1],de=-mt[2],he=mt[3],ce=mt[4],Me=mt[5],ze=mt[6],Ve=mt[7],ke=me*me+Zt*Zt+de*de+he*he;return ke>0?($t[0]=2*(ce*he+Ve*me+Me*de-ze*Zt)/ke,$t[1]=2*(Me*he+Ve*Zt+ze*me-ce*de)/ke,$t[2]=2*(ze*he+Ve*de+ce*Zt-Me*me)/ke):($t[0]=2*(ce*he+Ve*me+Me*de-ze*Zt),$t[1]=2*(Me*he+Ve*Zt+ze*me-ce*de),$t[2]=2*(ze*he+Ve*de+ce*Zt-Me*me)),pe(N,mt,$t),N}function we(N,mt){return N[0]=mt[12],N[1]=mt[13],N[2]=mt[14],N}function Re(N,mt){var $t=mt[0],me=mt[1],Zt=mt[2],de=mt[4],he=mt[5],ce=mt[6],Me=mt[8],ze=mt[9],Ve=mt[10];return N[0]=Math.hypot($t,me,Zt),N[1]=Math.hypot(de,he,ce),N[2]=Math.hypot(Me,ze,Ve),N}function He(N,mt){var $t=new l.a(3);Re($t,mt);var me=1/$t[0],Zt=1/$t[1],de=1/$t[2],he=mt[0]*me,ce=mt[1]*Zt,Me=mt[2]*de,ze=mt[4]*me,Ve=mt[5]*Zt,ke=mt[6]*de,tn=mt[8]*me,De=mt[9]*Zt,cn=mt[10]*de,hn=he+Ve+cn,nn=0;return hn>0?(nn=2*Math.sqrt(hn+1),N[3]=.25*nn,N[0]=(ke-De)/nn,N[1]=(tn-Me)/nn,N[2]=(ce-ze)/nn):he>Ve&&he>cn?(nn=2*Math.sqrt(1+he-Ve-cn),N[3]=(ke-De)/nn,N[0]=.25*nn,N[1]=(ce+ze)/nn,N[2]=(tn+Me)/nn):Ve>cn?(nn=2*Math.sqrt(1+Ve-he-cn),N[3]=(tn-Me)/nn,N[0]=(ce+ze)/nn,N[1]=.25*nn,N[2]=(ke+De)/nn):(nn=2*Math.sqrt(1+cn-he-Ve),N[3]=(ce-ze)/nn,N[0]=(tn+Me)/nn,N[1]=(ke+De)/nn,N[2]=.25*nn),N}function pn(N,mt,$t,me){var Zt=mt[0],de=mt[1],he=mt[2],ce=mt[3],Me=Zt+Zt,ze=de+de,Ve=he+he,ke=Zt*Me,tn=Zt*ze,De=Zt*Ve,cn=de*ze,hn=de*Ve,nn=he*Ve,dn=ce*Me,Sn=ce*ze,Pe=ce*Ve,le=me[0],Le=me[1],Be=me[2];return N[0]=(1-(cn+nn))*le,N[1]=(tn+Pe)*le,N[2]=(De-Sn)*le,N[3]=0,N[4]=(tn-Pe)*Le,N[5]=(1-(ke+nn))*Le,N[6]=(hn+dn)*Le,N[7]=0,N[8]=(De+Sn)*Be,N[9]=(hn-dn)*Be,N[10]=(1-(ke+cn))*Be,N[11]=0,N[12]=$t[0],N[13]=$t[1],N[14]=$t[2],N[15]=1,N}function fn(N,mt,$t,me,Zt){var de=mt[0],he=mt[1],ce=mt[2],Me=mt[3],ze=de+de,Ve=he+he,ke=ce+ce,tn=de*ze,De=de*Ve,cn=de*ke,hn=he*Ve,nn=he*ke,dn=ce*ke,Sn=Me*ze,Pe=Me*Ve,le=Me*ke,Le=me[0],Be=me[1],en=me[2],sn=Zt[0],Ue=Zt[1],ln=Zt[2],mn=(1-(hn+dn))*Le,Wn=(De+le)*Le,An=(cn-Pe)*Le,In=(De-le)*Be,lr=(1-(tn+dn))*Be,Hr=(nn+Sn)*Be,Gr=(cn+Pe)*en,Mr=(nn-Sn)*en,oi=(1-(tn+hn))*en;return N[0]=mn,N[1]=Wn,N[2]=An,N[3]=0,N[4]=In,N[5]=lr,N[6]=Hr,N[7]=0,N[8]=Gr,N[9]=Mr,N[10]=oi,N[11]=0,N[12]=$t[0]+sn-(mn*sn+In*Ue+Gr*ln),N[13]=$t[1]+Ue-(Wn*sn+lr*Ue+Mr*ln),N[14]=$t[2]+ln-(An*sn+Hr*Ue+oi*ln),N[15]=1,N}function Rn(N,mt){var $t=mt[0],me=mt[1],Zt=mt[2],de=mt[3],he=$t+$t,ce=me+me,Me=Zt+Zt,ze=$t*he,Ve=me*he,ke=me*ce,tn=Zt*he,De=Zt*ce,cn=Zt*Me,hn=de*he,nn=de*ce,dn=de*Me;return N[0]=1-ke-cn,N[1]=Ve+dn,N[2]=tn-nn,N[3]=0,N[4]=Ve-dn,N[5]=1-ze-cn,N[6]=De+hn,N[7]=0,N[8]=tn+nn,N[9]=De-hn,N[10]=1-ze-ke,N[11]=0,N[12]=0,N[13]=0,N[14]=0,N[15]=1,N}function Cn(N,mt,$t,me,Zt,de,he){var ce=1/($t-mt),Me=1/(Zt-me),ze=1/(de-he);return N[0]=2*de*ce,N[1]=0,N[2]=0,N[3]=0,N[4]=0,N[5]=2*de*Me,N[6]=0,N[7]=0,N[8]=($t+mt)*ce,N[9]=(Zt+me)*Me,N[10]=(he+de)*ze,N[11]=-1,N[12]=0,N[13]=0,N[14]=he*de*2*ze,N[15]=0,N}function kn(N,mt,$t,me,Zt){var de,he=1/Math.tan(mt/2);return N[0]=he/$t,N[1]=0,N[2]=0,N[3]=0,N[4]=0,N[5]=he,N[6]=0,N[7]=0,N[8]=0,N[9]=0,N[11]=-1,N[12]=0,N[13]=0,N[15]=0,Zt!=null&&Zt!==1/0?(de=1/(me-Zt),N[10]=(Zt+me)*de,N[14]=2*Zt*me*de):(N[10]=-1,N[14]=-2*me),N}function Mn(N,mt,$t,me){var Zt=Math.tan(mt.upDegrees*Math.PI/180),de=Math.tan(mt.downDegrees*Math.PI/180),he=Math.tan(mt.leftDegrees*Math.PI/180),ce=Math.tan(mt.rightDegrees*Math.PI/180),Me=2/(he+ce),ze=2/(Zt+de);return N[0]=Me,N[1]=0,N[2]=0,N[3]=0,N[4]=0,N[5]=ze,N[6]=0,N[7]=0,N[8]=-(he-ce)*Me*.5,N[9]=(Zt-de)*ze*.5,N[10]=me/($t-me),N[11]=-1,N[12]=0,N[13]=0,N[14]=me*$t/($t-me),N[15]=0,N}function Tn(N,mt,$t,me,Zt,de,he){var ce=1/(mt-$t),Me=1/(me-Zt),ze=1/(de-he);return N[0]=-2*ce,N[1]=0,N[2]=0,N[3]=0,N[4]=0,N[5]=-2*Me,N[6]=0,N[7]=0,N[8]=0,N[9]=0,N[10]=2*ze,N[11]=0,N[12]=(mt+$t)*ce,N[13]=(Zt+me)*Me,N[14]=(he+de)*ze,N[15]=1,N}function Un(N,mt,$t,me){var Zt,de,he,ce,Me,ze,Ve,ke,tn,De,cn=mt[0],hn=mt[1],nn=mt[2],dn=me[0],Sn=me[1],Pe=me[2],le=$t[0],Le=$t[1],Be=$t[2];return Math.abs(cn-le)<l.b&&Math.abs(hn-Le)<l.b&&Math.abs(nn-Be)<l.b?d(N):(Ve=cn-le,ke=hn-Le,tn=nn-Be,Zt=Sn*(tn*=De=1/Math.hypot(Ve,ke,tn))-Pe*(ke*=De),de=Pe*(Ve*=De)-dn*tn,he=dn*ke-Sn*Ve,(De=Math.hypot(Zt,de,he))?(Zt*=De=1/De,de*=De,he*=De):(Zt=0,de=0,he=0),ce=ke*he-tn*de,Me=tn*Zt-Ve*he,ze=Ve*de-ke*Zt,(De=Math.hypot(ce,Me,ze))?(ce*=De=1/De,Me*=De,ze*=De):(ce=0,Me=0,ze=0),N[0]=Zt,N[1]=ce,N[2]=Ve,N[3]=0,N[4]=de,N[5]=Me,N[6]=ke,N[7]=0,N[8]=he,N[9]=ze,N[10]=tn,N[11]=0,N[12]=-(Zt*cn+de*hn+he*nn),N[13]=-(ce*cn+Me*hn+ze*nn),N[14]=-(Ve*cn+ke*hn+tn*nn),N[15]=1,N)}function Kn(N,mt,$t,me){var Zt=mt[0],de=mt[1],he=mt[2],ce=me[0],Me=me[1],ze=me[2],Ve=Zt-$t[0],ke=de-$t[1],tn=he-$t[2],De=Ve*Ve+ke*ke+tn*tn;De>0&&(Ve*=De=1/Math.sqrt(De),ke*=De,tn*=De);var cn=Me*tn-ze*ke,hn=ze*Ve-ce*tn,nn=ce*ke-Me*Ve;return(De=cn*cn+hn*hn+nn*nn)>0&&(cn*=De=1/Math.sqrt(De),hn*=De,nn*=De),N[0]=cn,N[1]=hn,N[2]=nn,N[3]=0,N[4]=ke*nn-tn*hn,N[5]=tn*cn-Ve*nn,N[6]=Ve*hn-ke*cn,N[7]=0,N[8]=Ve,N[9]=ke,N[10]=tn,N[11]=0,N[12]=Zt,N[13]=de,N[14]=he,N[15]=1,N}function tr(N){return"mat4("+N[0]+", "+N[1]+", "+N[2]+", "+N[3]+", "+N[4]+", "+N[5]+", "+N[6]+", "+N[7]+", "+N[8]+", "+N[9]+", "+N[10]+", "+N[11]+", "+N[12]+", "+N[13]+", "+N[14]+", "+N[15]+")"}function or(N){return Math.hypot(N[0],N[1],N[2],N[3],N[4],N[5],N[6],N[7],N[8],N[9],N[10],N[11],N[12],N[13],N[14],N[15])}function nr(N,mt,$t){return N[0]=mt[0]+$t[0],N[1]=mt[1]+$t[1],N[2]=mt[2]+$t[2],N[3]=mt[3]+$t[3],N[4]=mt[4]+$t[4],N[5]=mt[5]+$t[5],N[6]=mt[6]+$t[6],N[7]=mt[7]+$t[7],N[8]=mt[8]+$t[8],N[9]=mt[9]+$t[9],N[10]=mt[10]+$t[10],N[11]=mt[11]+$t[11],N[12]=mt[12]+$t[12],N[13]=mt[13]+$t[13],N[14]=mt[14]+$t[14],N[15]=mt[15]+$t[15],N}function er(N,mt,$t){return N[0]=mt[0]-$t[0],N[1]=mt[1]-$t[1],N[2]=mt[2]-$t[2],N[3]=mt[3]-$t[3],N[4]=mt[4]-$t[4],N[5]=mt[5]-$t[5],N[6]=mt[6]-$t[6],N[7]=mt[7]-$t[7],N[8]=mt[8]-$t[8],N[9]=mt[9]-$t[9],N[10]=mt[10]-$t[10],N[11]=mt[11]-$t[11],N[12]=mt[12]-$t[12],N[13]=mt[13]-$t[13],N[14]=mt[14]-$t[14],N[15]=mt[15]-$t[15],N}function Sr(N,mt,$t){return N[0]=mt[0]*$t,N[1]=mt[1]*$t,N[2]=mt[2]*$t,N[3]=mt[3]*$t,N[4]=mt[4]*$t,N[5]=mt[5]*$t,N[6]=mt[6]*$t,N[7]=mt[7]*$t,N[8]=mt[8]*$t,N[9]=mt[9]*$t,N[10]=mt[10]*$t,N[11]=mt[11]*$t,N[12]=mt[12]*$t,N[13]=mt[13]*$t,N[14]=mt[14]*$t,N[15]=mt[15]*$t,N}function Vr(N,mt,$t,me){return N[0]=mt[0]+$t[0]*me,N[1]=mt[1]+$t[1]*me,N[2]=mt[2]+$t[2]*me,N[3]=mt[3]+$t[3]*me,N[4]=mt[4]+$t[4]*me,N[5]=mt[5]+$t[5]*me,N[6]=mt[6]+$t[6]*me,N[7]=mt[7]+$t[7]*me,N[8]=mt[8]+$t[8]*me,N[9]=mt[9]+$t[9]*me,N[10]=mt[10]+$t[10]*me,N[11]=mt[11]+$t[11]*me,N[12]=mt[12]+$t[12]*me,N[13]=mt[13]+$t[13]*me,N[14]=mt[14]+$t[14]*me,N[15]=mt[15]+$t[15]*me,N}function ti(N,mt){return N[0]===mt[0]&&N[1]===mt[1]&&N[2]===mt[2]&&N[3]===mt[3]&&N[4]===mt[4]&&N[5]===mt[5]&&N[6]===mt[6]&&N[7]===mt[7]&&N[8]===mt[8]&&N[9]===mt[9]&&N[10]===mt[10]&&N[11]===mt[11]&&N[12]===mt[12]&&N[13]===mt[13]&&N[14]===mt[14]&&N[15]===mt[15]}function hi(N,mt){var $t=N[0],me=N[1],Zt=N[2],de=N[3],he=N[4],ce=N[5],Me=N[6],ze=N[7],Ve=N[8],ke=N[9],tn=N[10],De=N[11],cn=N[12],hn=N[13],nn=N[14],dn=N[15],Sn=mt[0],Pe=mt[1],le=mt[2],Le=mt[3],Be=mt[4],en=mt[5],sn=mt[6],Ue=mt[7],ln=mt[8],mn=mt[9],Wn=mt[10],An=mt[11],In=mt[12],lr=mt[13],Hr=mt[14],Gr=mt[15];return Math.abs($t-Sn)<=l.b*Math.max(1,Math.abs($t),Math.abs(Sn))&&Math.abs(me-Pe)<=l.b*Math.max(1,Math.abs(me),Math.abs(Pe))&&Math.abs(Zt-le)<=l.b*Math.max(1,Math.abs(Zt),Math.abs(le))&&Math.abs(de-Le)<=l.b*Math.max(1,Math.abs(de),Math.abs(Le))&&Math.abs(he-Be)<=l.b*Math.max(1,Math.abs(he),Math.abs(Be))&&Math.abs(ce-en)<=l.b*Math.max(1,Math.abs(ce),Math.abs(en))&&Math.abs(Me-sn)<=l.b*Math.max(1,Math.abs(Me),Math.abs(sn))&&Math.abs(ze-Ue)<=l.b*Math.max(1,Math.abs(ze),Math.abs(Ue))&&Math.abs(Ve-ln)<=l.b*Math.max(1,Math.abs(Ve),Math.abs(ln))&&Math.abs(ke-mn)<=l.b*Math.max(1,Math.abs(ke),Math.abs(mn))&&Math.abs(tn-Wn)<=l.b*Math.max(1,Math.abs(tn),Math.abs(Wn))&&Math.abs(De-An)<=l.b*Math.max(1,Math.abs(De),Math.abs(An))&&Math.abs(cn-In)<=l.b*Math.max(1,Math.abs(cn),Math.abs(In))&&Math.abs(hn-lr)<=l.b*Math.max(1,Math.abs(hn),Math.abs(lr))&&Math.abs(nn-Hr)<=l.b*Math.max(1,Math.abs(nn),Math.abs(Hr))&&Math.abs(dn-Gr)<=l.b*Math.max(1,Math.abs(dn),Math.abs(Gr))}var Fi=ot,to=er,si=e(40);function Ti(){var N=new l.a(4);return l.a!=Float32Array&&(N[0]=0,N[1]=0,N[2]=0,N[3]=0),N}function _i(N){var mt=new l.a(4);return mt[0]=N[0],mt[1]=N[1],mt[2]=N[2],mt[3]=N[3],mt}function Li(N,mt,$t,me){var Zt=new l.a(4);return Zt[0]=N,Zt[1]=mt,Zt[2]=$t,Zt[3]=me,Zt}function Vi(N,mt){return N[0]=mt[0],N[1]=mt[1],N[2]=mt[2],N[3]=mt[3],N}function ro(N,mt,$t,me,Zt){return N[0]=mt,N[1]=$t,N[2]=me,N[3]=Zt,N}function jr(N,mt,$t){return N[0]=mt[0]+$t[0],N[1]=mt[1]+$t[1],N[2]=mt[2]+$t[2],N[3]=mt[3]+$t[3],N}function Ji(N,mt,$t){return N[0]=mt[0]-$t[0],N[1]=mt[1]-$t[1],N[2]=mt[2]-$t[2],N[3]=mt[3]-$t[3],N}function pr(N,mt,$t){return N[0]=mt[0]*$t[0],N[1]=mt[1]*$t[1],N[2]=mt[2]*$t[2],N[3]=mt[3]*$t[3],N}function Yr(N,mt,$t){return N[0]=mt[0]/$t[0],N[1]=mt[1]/$t[1],N[2]=mt[2]/$t[2],N[3]=mt[3]/$t[3],N}function Br(N,mt){return N[0]=Math.ceil(mt[0]),N[1]=Math.ceil(mt[1]),N[2]=Math.ceil(mt[2]),N[3]=Math.ceil(mt[3]),N}function Nr(N,mt){return N[0]=Math.floor(mt[0]),N[1]=Math.floor(mt[1]),N[2]=Math.floor(mt[2]),N[3]=Math.floor(mt[3]),N}function Xr(N,mt,$t){return N[0]=Math.min(mt[0],$t[0]),N[1]=Math.min(mt[1],$t[1]),N[2]=Math.min(mt[2],$t[2]),N[3]=Math.min(mt[3],$t[3]),N}function Kr(N,mt,$t){return N[0]=Math.max(mt[0],$t[0]),N[1]=Math.max(mt[1],$t[1]),N[2]=Math.max(mt[2],$t[2]),N[3]=Math.max(mt[3],$t[3]),N}function ni(N,mt){return N[0]=Math.round(mt[0]),N[1]=Math.round(mt[1]),N[2]=Math.round(mt[2]),N[3]=Math.round(mt[3]),N}function fi(N,mt,$t){return N[0]=mt[0]*$t,N[1]=mt[1]*$t,N[2]=mt[2]*$t,N[3]=mt[3]*$t,N}function $r(N,mt,$t,me){return N[0]=mt[0]+$t[0]*me,N[1]=mt[1]+$t[1]*me,N[2]=mt[2]+$t[2]*me,N[3]=mt[3]+$t[3]*me,N}function ci(N,mt){var $t=mt[0]-N[0],me=mt[1]-N[1],Zt=mt[2]-N[2],de=mt[3]-N[3];return Math.hypot($t,me,Zt,de)}function Qr(N,mt){var $t=mt[0]-N[0],me=mt[1]-N[1],Zt=mt[2]-N[2],de=mt[3]-N[3];return $t*$t+me*me+Zt*Zt+de*de}function gi(N){var mt=N[0],$t=N[1],me=N[2],Zt=N[3];return Math.hypot(mt,$t,me,Zt)}function Oi(N){var mt=N[0],$t=N[1],me=N[2],Zt=N[3];return mt*mt+$t*$t+me*me+Zt*Zt}function bi(N,mt){return N[0]=-mt[0],N[1]=-mt[1],N[2]=-mt[2],N[3]=-mt[3],N}function zi(N,mt){return N[0]=1/mt[0],N[1]=1/mt[1],N[2]=1/mt[2],N[3]=1/mt[3],N}function Qi(N,mt){var $t=mt[0],me=mt[1],Zt=mt[2],de=mt[3],he=$t*$t+me*me+Zt*Zt+de*de;return he>0&&(he=1/Math.sqrt(he)),N[0]=$t*he,N[1]=me*he,N[2]=Zt*he,N[3]=de*he,N}function io(N,mt){return N[0]*mt[0]+N[1]*mt[1]+N[2]*mt[2]+N[3]*mt[3]}function Wi(N,mt,$t,me){var Zt=$t[0]*me[1]-$t[1]*me[0],de=$t[0]*me[2]-$t[2]*me[0],he=$t[0]*me[3]-$t[3]*me[0],ce=$t[1]*me[2]-$t[2]*me[1],Me=$t[1]*me[3]-$t[3]*me[1],ze=$t[2]*me[3]-$t[3]*me[2],Ve=mt[0],ke=mt[1],tn=mt[2],De=mt[3];return N[0]=ke*ze-tn*Me+De*ce,N[1]=-Ve*ze+tn*he-De*de,N[2]=Ve*Me-ke*he+De*Zt,N[3]=-Ve*ce+ke*de-tn*Zt,N}function Zi(N,mt,$t,me){var Zt=mt[0],de=mt[1],he=mt[2],ce=mt[3];return N[0]=Zt+me*($t[0]-Zt),N[1]=de+me*($t[1]-de),N[2]=he+me*($t[2]-he),N[3]=ce+me*($t[3]-ce),N}function Pi(N,mt){var $t,me,Zt,de,he,ce;mt=mt||1;do he=($t=2*l.c()-1)*$t+(me=2*l.c()-1)*me;while(he>=1);do ce=(Zt=2*l.c()-1)*Zt+(de=2*l.c()-1)*de;while(ce>=1);var Me=Math.sqrt((1-he)/ce);return N[0]=mt*$t,N[1]=mt*me,N[2]=mt*Zt*Me,N[3]=mt*de*Me,N}function no(N,mt,$t){var me=mt[0],Zt=mt[1],de=mt[2],he=mt[3];return N[0]=$t[0]*me+$t[4]*Zt+$t[8]*de+$t[12]*he,N[1]=$t[1]*me+$t[5]*Zt+$t[9]*de+$t[13]*he,N[2]=$t[2]*me+$t[6]*Zt+$t[10]*de+$t[14]*he,N[3]=$t[3]*me+$t[7]*Zt+$t[11]*de+$t[15]*he,N}function Mo(N,mt,$t){var me=mt[0],Zt=mt[1],de=mt[2],he=$t[0],ce=$t[1],Me=$t[2],ze=$t[3],Ve=ze*me+ce*de-Me*Zt,ke=ze*Zt+Me*me-he*de,tn=ze*de+he*Zt-ce*me,De=-he*me-ce*Zt-Me*de;return N[0]=Ve*ze+De*-he+ke*-Me-tn*-ce,N[1]=ke*ze+De*-ce+tn*-he-Ve*-Me,N[2]=tn*ze+De*-Me+Ve*-ce-ke*-he,N[3]=mt[3],N}function ao(N){return N[0]=0,N[1]=0,N[2]=0,N[3]=0,N}function uo(N){return"vec4("+N[0]+", "+N[1]+", "+N[2]+", "+N[3]+")"}function xo(N,mt){return N[0]===mt[0]&&N[1]===mt[1]&&N[2]===mt[2]&&N[3]===mt[3]}function oe(N,mt){var $t=N[0],me=N[1],Zt=N[2],de=N[3],he=mt[0],ce=mt[1],Me=mt[2],ze=mt[3];return Math.abs($t-he)<=l.b*Math.max(1,Math.abs($t),Math.abs(he))&&Math.abs(me-ce)<=l.b*Math.max(1,Math.abs(me),Math.abs(ce))&&Math.abs(Zt-Me)<=l.b*Math.max(1,Math.abs(Zt),Math.abs(Me))&&Math.abs(de-ze)<=l.b*Math.max(1,Math.abs(de),Math.abs(ze))}var Kt,te=Ji,Oe=pr,Qe=Yr,On=ci,Vn=Qr,Xn=gi,$e=Oi,rn=(Kt=Ti(),function(N,mt,$t,me,Zt,de){var he,ce;for(mt||(mt=4),$t||($t=0),ce=me?Math.min(me*mt+$t,N.length):N.length,he=$t;he<ce;he+=mt)Kt[0]=N[he],Kt[1]=N[he+1],Kt[2]=N[he+2],Kt[3]=N[he+3],Zt(Kt,Kt,de),N[he]=Kt[0],N[he+1]=Kt[1],N[he+2]=Kt[2],N[he+3]=Kt[3];return N});function on(){var N=new l.a(4);return l.a!=Float32Array&&(N[0]=0,N[1]=0,N[2]=0),N[3]=1,N}function $n(N){return N[0]=0,N[1]=0,N[2]=0,N[3]=1,N}function vr(N,mt,$t){$t*=.5;var me=Math.sin($t);return N[0]=me*mt[0],N[1]=me*mt[1],N[2]=me*mt[2],N[3]=Math.cos($t),N}function ar(N,mt){var $t=2*Math.acos(mt[3]),me=Math.sin($t/2);return me>l.b?(N[0]=mt[0]/me,N[1]=mt[1]/me,N[2]=mt[2]/me):(N[0]=1,N[1]=0,N[2]=0),$t}function rr(N,mt){var $t=un(N,mt);return Math.acos(2*$t*$t-1)}function Fr(N,mt,$t){var me=mt[0],Zt=mt[1],de=mt[2],he=mt[3],ce=$t[0],Me=$t[1],ze=$t[2],Ve=$t[3];return N[0]=me*Ve+he*ce+Zt*ze-de*Me,N[1]=Zt*Ve+he*Me+de*ce-me*ze,N[2]=de*Ve+he*ze+me*Me-Zt*ce,N[3]=he*Ve-me*ce-Zt*Me-de*ze,N}function Ar(N,mt,$t){$t*=.5;var me=mt[0],Zt=mt[1],de=mt[2],he=mt[3],ce=Math.sin($t),Me=Math.cos($t);return N[0]=me*Me+he*ce,N[1]=Zt*Me+de*ce,N[2]=de*Me-Zt*ce,N[3]=he*Me-me*ce,N}function wr(N,mt,$t){$t*=.5;var me=mt[0],Zt=mt[1],de=mt[2],he=mt[3],ce=Math.sin($t),Me=Math.cos($t);return N[0]=me*Me-de*ce,N[1]=Zt*Me+he*ce,N[2]=de*Me+me*ce,N[3]=he*Me-Zt*ce,N}function xr(N,mt,$t){$t*=.5;var me=mt[0],Zt=mt[1],de=mt[2],he=mt[3],ce=Math.sin($t),Me=Math.cos($t);return N[0]=me*Me+Zt*ce,N[1]=Zt*Me-me*ce,N[2]=de*Me+he*ce,N[3]=he*Me-de*ce,N}function Er(N,mt){var $t=mt[0],me=mt[1],Zt=mt[2];return N[0]=$t,N[1]=me,N[2]=Zt,N[3]=Math.sqrt(Math.abs(1-$t*$t-me*me-Zt*Zt)),N}function Ir(N,mt){var $t=mt[0],me=mt[1],Zt=mt[2],de=mt[3],he=Math.sqrt($t*$t+me*me+Zt*Zt),ce=Math.exp(de),Me=he>0?ce*Math.sin(he)/he:0;return N[0]=$t*Me,N[1]=me*Me,N[2]=Zt*Me,N[3]=ce*Math.cos(he),N}function Lr(N,mt){var $t=mt[0],me=mt[1],Zt=mt[2],de=mt[3],he=Math.sqrt($t*$t+me*me+Zt*Zt),ce=he>0?Math.atan2(he,de)/he:0;return N[0]=$t*ce,N[1]=me*ce,N[2]=Zt*ce,N[3]=.5*Math.log($t*$t+me*me+Zt*Zt+de*de),N}function Pr(N,mt,$t){return Lr(N,mt),Ee(N,N,$t),Ir(N,N),N}function Dr(N,mt,$t,me){var Zt,de,he,ce,Me,ze=mt[0],Ve=mt[1],ke=mt[2],tn=mt[3],De=$t[0],cn=$t[1],hn=$t[2],nn=$t[3];return(de=ze*De+Ve*cn+ke*hn+tn*nn)<0&&(de=-de,De=-De,cn=-cn,hn=-hn,nn=-nn),1-de>l.b?(Zt=Math.acos(de),he=Math.sin(Zt),ce=Math.sin((1-me)*Zt)/he,Me=Math.sin(me*Zt)/he):(ce=1-me,Me=me),N[0]=ce*ze+Me*De,N[1]=ce*Ve+Me*cn,N[2]=ce*ke+Me*hn,N[3]=ce*tn+Me*nn,N}function ri(N){var mt=l.c(),$t=l.c(),me=l.c(),Zt=Math.sqrt(1-mt),de=Math.sqrt(mt);return N[0]=Zt*Math.sin(2*Math.PI*$t),N[1]=Zt*Math.cos(2*Math.PI*$t),N[2]=de*Math.sin(2*Math.PI*me),N[3]=de*Math.cos(2*Math.PI*me),N}function vi(N,mt){var $t=mt[0],me=mt[1],Zt=mt[2],de=mt[3],he=$t*$t+me*me+Zt*Zt+de*de,ce=he?1/he:0;return N[0]=-$t*ce,N[1]=-me*ce,N[2]=-Zt*ce,N[3]=de*ce,N}function ii(N,mt){return N[0]=-mt[0],N[1]=-mt[1],N[2]=-mt[2],N[3]=mt[3],N}function Si(N,mt){var $t,me=mt[0]+mt[4]+mt[8];if(me>0)$t=Math.sqrt(me+1),N[3]=.5*$t,$t=.5/$t,N[0]=(mt[5]-mt[7])*$t,N[1]=(mt[6]-mt[2])*$t,N[2]=(mt[1]-mt[3])*$t;else{var Zt=0;mt[4]>mt[0]&&(Zt=1),mt[8]>mt[3*Zt+Zt]&&(Zt=2);var de=(Zt+1)%3,he=(Zt+2)%3;$t=Math.sqrt(mt[3*Zt+Zt]-mt[3*de+de]-mt[3*he+he]+1),N[Zt]=.5*$t,$t=.5/$t,N[3]=(mt[3*de+he]-mt[3*he+de])*$t,N[de]=(mt[3*de+Zt]+mt[3*Zt+de])*$t,N[he]=(mt[3*he+Zt]+mt[3*Zt+he])*$t}return N}function Ui(N,mt,$t,me){var Zt=.5*Math.PI/180;mt*=Zt,$t*=Zt,me*=Zt;var de=Math.sin(mt),he=Math.cos(mt),ce=Math.sin($t),Me=Math.cos($t),ze=Math.sin(me),Ve=Math.cos(me);return N[0]=de*Me*Ve-he*ce*ze,N[1]=he*ce*Ve+de*Me*ze,N[2]=he*Me*ze-de*ce*Ve,N[3]=he*Me*Ve+de*ce*ze,N}function Yi(N){return"quat("+N[0]+", "+N[1]+", "+N[2]+", "+N[3]+")"}var Bi,Di,ve,G,B,$,lt=_i,Ft=Li,Jt=Vi,ie=ro,se=jr,Ce=Fr,Ee=fi,un=io,xn=Zi,zt=gi,Yt=zt,Se=Oi,Wt=Se,ue=Qi,vn=xo,Dn=oe,zn=(Bi=si.create(),Di=si.fromValues(1,0,0),ve=si.fromValues(0,1,0),function(N,mt,$t){var me=si.dot(mt,$t);return me<-.999999?(si.cross(Bi,Di,mt),si.len(Bi)<1e-6&&si.cross(Bi,ve,mt),si.normalize(Bi,Bi),vr(N,Bi,Math.PI),N):me>.999999?(N[0]=0,N[1]=0,N[2]=0,N[3]=1,N):(si.cross(Bi,mt,$t),N[0]=Bi[0],N[1]=Bi[1],N[2]=Bi[2],N[3]=1+me,ue(N,N))}),_n=(G=on(),B=on(),function(N,mt,$t,me,Zt,de){return Dr(G,mt,Zt,de),Dr(B,$t,me,de),Dr(N,G,B,2*de*(1-de)),N}),Ze=($=A(),function(N,mt,$t,me){return $[0]=$t[0],$[3]=$t[1],$[6]=$t[2],$[1]=me[0],$[4]=me[1],$[7]=me[2],$[2]=-mt[0],$[5]=-mt[1],$[8]=-mt[2],ue(N,Si(N,$))}),Te=e(80)},function(a,E){a.exports=function(e,r,p){return r in e?Object.defineProperty(e,r,{value:p,enumerable:!0,configurable:!0,writable:!0}):e[r]=p,e}},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.METADATA_KEY=void 0;var r=e(32);E.METADATA_KEY=r;var p=e(446);Object.defineProperty(E,"Container",{enumerable:!0,get:function(){return p.Container}});var b=e(55);Object.defineProperty(E,"BindingScopeEnum",{enumerable:!0,get:function(){return b.BindingScopeEnum}}),Object.defineProperty(E,"BindingTypeEnum",{enumerable:!0,get:function(){return b.BindingTypeEnum}}),Object.defineProperty(E,"TargetTypeEnum",{enumerable:!0,get:function(){return b.TargetTypeEnum}});var S=e(462);Object.defineProperty(E,"AsyncContainerModule",{enumerable:!0,get:function(){return S.AsyncContainerModule}}),Object.defineProperty(E,"ContainerModule",{enumerable:!0,get:function(){return S.ContainerModule}});var l=e(463);Object.defineProperty(E,"injectable",{enumerable:!0,get:function(){return l.injectable}});var A=e(464);Object.defineProperty(E,"tagged",{enumerable:!0,get:function(){return A.tagged}});var j=e(465);Object.defineProperty(E,"named",{enumerable:!0,get:function(){return j.named}});var y=e(222);Object.defineProperty(E,"inject",{enumerable:!0,get:function(){return y.inject}}),Object.defineProperty(E,"LazyServiceIdentifer",{enumerable:!0,get:function(){return y.LazyServiceIdentifer}});var n=e(466);Object.defineProperty(E,"optional",{enumerable:!0,get:function(){return n.optional}});var s=e(467);Object.defineProperty(E,"unmanaged",{enumerable:!0,get:function(){return s.unmanaged}});var h=e(468);Object.defineProperty(E,"multiInject",{enumerable:!0,get:function(){return h.multiInject}});var M=e(469);Object.defineProperty(E,"targetName",{enumerable:!0,get:function(){return M.targetName}});var O=e(470);Object.defineProperty(E,"postConstruct",{enumerable:!0,get:function(){return O.postConstruct}});var T=e(220);Object.defineProperty(E,"MetadataReader",{enumerable:!0,get:function(){return T.MetadataReader}});var v=e(67);Object.defineProperty(E,"id",{enumerable:!0,get:function(){return v.id}});var m=e(59);Object.defineProperty(E,"decorate",{enumerable:!0,get:function(){return m.decorate}});var C=e(225);Object.defineProperty(E,"traverseAncerstors",{enumerable:!0,get:function(){return C.traverseAncerstors}}),Object.defineProperty(E,"taggedConstraint",{enumerable:!0,get:function(){return C.taggedConstraint}}),Object.defineProperty(E,"namedConstraint",{enumerable:!0,get:function(){return C.namedConstraint}}),Object.defineProperty(E,"typeConstraint",{enumerable:!0,get:function(){return C.typeConstraint}});var D=e(88);Object.defineProperty(E,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return D.getServiceIdentifierAsString}});var Y=e(471);Object.defineProperty(E,"multiBindToService",{enumerable:!0,get:function(){return Y.multiBindToService}})},function(a,E,e){"use strict";e.d(E,"i",function(){return Tt}),e.d(E,"h",function(){return Er}),e.d(E,"d",function(){return Ir}),e.d(E,"m",function(){return Pr}),e.d(E,"l",function(){return Nr}),e.d(E,"g",function(){return Br}),e.d(E,"f",function(){return Xr}),e.d(E,"j",function(){return Qe}),e.d(E,"k",function(){return Lr}),e.d(E,"r",function(){return Si}),e.d(E,"p",function(){return Yi}),e.d(E,"b",function(){return Vn}),e.d(E,"n",function(){return ri}),e.d(E,"q",function(){return Ui}),e.d(E,"o",function(){return Bi}),e.d(E,"c",function(){return vi}),e.d(E,"a",function(){return ii}),e.d(E,"e",function(){return Di});var r={};e.r(r),e.d(r,"compare",function(){return T}),e.d(r,"getLineIntersect",function(){return m}),e.d(r,"getRectIntersectByPoint",function(){return C}),e.d(r,"getCircleIntersectByPoint",function(){return D}),e.d(r,"getEllipseIntersectByPoint",function(){return Y}),e.d(r,"applyMatrix",function(){return Z}),e.d(r,"invertMatrix",function(){return et}),e.d(r,"getCircleCenterByPoints",function(){return dt}),e.d(r,"distance",function(){return ht}),e.d(r,"scaleMatrix",function(){return St}),e.d(r,"floydWarshall",function(){return wt}),e.d(r,"getAdjMatrix",function(){return xt}),e.d(r,"translate",function(){return ft}),e.d(r,"move",function(){return Bt}),e.d(r,"scale",function(){return Rt}),e.d(r,"rotate",function(){return Ot}),e.d(r,"getDegree",function(){return X}),e.d(r,"isPointInPolygon",function(){return vt}),e.d(r,"intersectBBox",function(){return pt}),e.d(r,"isPolygonsIntersect",function(){return Et}),e.d(r,"Line",function(){return q}),e.d(r,"getBBoxBoundLine",function(){return st}),e.d(r,"itemIntersectByLine",function(){return z}),e.d(r,"fractionToLine",function(){return P}),e.d(r,"getPointsCenter",function(){return H}),e.d(r,"squareDist",function(){return k}),e.d(r,"pointLineSquareDist",function(){return d}),e.d(r,"isPointsOverlap",function(){return g}),e.d(r,"pointRectSquareDist",function(){return F});var p={};e.r(p),e.d(p,"uniqueId",function(){return Dt}),e.d(p,"formatPadding",function(){return Ut}),e.d(p,"cloneEvent",function(){return jt}),e.d(p,"isViewportChanged",function(){return Vt}),e.d(p,"isNaN",function(){return Ht}),e.d(p,"calculationItemsBBox",function(){return re}),e.d(p,"processParallelEdges",function(){return pe});var b={};e.r(b),e.d(b,"getBBox",function(){return Cn}),e.d(b,"getLoopCfgs",function(){return kn}),e.d(b,"getLabelPosition",function(){return Mn}),e.d(b,"traverseTree",function(){return Un}),e.d(b,"traverseTreeUp",function(){return Kn}),e.d(b,"getLetterWidth",function(){return tr}),e.d(b,"getTextSize",function(){return or}),e.d(b,"plainCombosToTrees",function(){return nr}),e.d(b,"reconstructTree",function(){return er}),e.d(b,"getComboBBox",function(){return Sr}),e.d(b,"shouldRefreshEdge",function(){return Vr}),e.d(b,"cloneBesidesImg",function(){return ti});var S={};e.r(S),e.d(S,"getSpline",function(){return Qr}),e.d(S,"getControlPoint",function(){return gi}),e.d(S,"pointsToPolygon",function(){return Oi}),e.d(S,"pathToPoints",function(){return bi}),e.d(S,"getClosedSpline",function(){return zi}),e.d(S,"roundedHull",function(){return Zi}),e.d(S,"paddedHull",function(){return Pi});var l=e(0),A={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(G){return Object.assign(this,G),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(G){var B=this,$=this.events;this.graph=G,this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||G.get("canvas").set("draggable",!0),Object(l.f)($,function(lt,Ft){G.on(Ft,lt)}),document.addEventListener("visibilitychange",function(){B.keydown=!1})},unbind:function(G){var B=this.events;this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||G.get("canvas").set("draggable",!1),Object(l.f)(B,function($,lt){G.off(lt,$)})},get:function(G){return this[G]},set:function(G,B){return this[G]=B,this}},j=function(){function ve(){}return ve.registerBehavior=function(G,B){if(!B)throw new Error("please specify handler for this behavior: "+G);var $=Object(l.c)(A);Object.assign($,B);var lt=function(Jt){var ie=this;Object.assign(this,this.getDefaultCfg(),Jt);var se=this.getEvents();this.events=null;var Ce={};se&&(Object(l.f)(se,function(Ee,un){Ce[un]=Object(l.J)(ie,Ee)}),this.events=Ce)};lt.prototype=$,ve.types[G]=lt},ve.hasBehavior=function(G){return!!ve.types[G]},ve.getBehavior=function(G){return ve.types[G]},ve.types={},ve}(),y=j,n=e(1),s=e(79),h=e(10),M=e(33),O=h.a.transform,T=function(G){return function(B,$){return B[G]-$[G]}},v=function(G,B,$){return G>=B&&G<=$},m=function(G,B,$,lt){var Ft=$.x-G.x,Jt=$.y-G.y,ie=B.x-G.x,se=B.y-G.y,Ce=lt.x-$.x,Ee=lt.y-$.y,un=ie*Ee-se*Ce,xn=1/un,zt=null;if(un*un>1e-4*(ie*ie+se*se)*(Ce*Ce+Ee*Ee)){var Yt=(Ft*Ee-Jt*Ce)*xn,Se=(Ft*se-Jt*ie)*xn;v(Yt,0,1)&&v(Se,0,1)&&(zt={x:G.x+Yt*ie,y:G.y+Yt*se})}return zt},C=function(G,B){var $=G.x,lt=G.y,Ft=G.width,Jt=G.height,ie=[],se={x:$+Ft/2,y:lt+Jt/2};ie.push({x:$,y:lt}),ie.push({x:$+Ft,y:lt}),ie.push({x:$+Ft,y:lt+Jt}),ie.push({x:$,y:lt+Jt}),ie.push({x:$,y:lt});for(var Ce=null,Ee=1;Ee<ie.length&&!(Ce=m(ie[Ee-1],ie[Ee],se,B));Ee++);return Ce},D=function(G,B){var $=G.x,lt=G.y,Ft=G.r,Jt=B.x-$,ie=B.y-lt;if(Math.sqrt(Jt*Jt+ie*ie)<Ft)return null;var se=Math.sign(Jt),Ce=Math.sign(ie),Ee=Math.atan(ie/Jt);return{x:$+Math.abs(Ft*Math.cos(Ee))*se,y:lt+Math.abs(Ft*Math.sin(Ee))*Ce}},Y=function(G,B){var $=G.rx,lt=G.ry,Ft=G.x,Jt=G.y,ie=B.x-Ft,se=B.y-Jt,Ce=Math.atan2(se/lt,ie/$);return Ce<0&&(Ce+=2*Math.PI),{x:Ft+$*Math.cos(Ce),y:Jt+lt*Math.sin(Ce)}},Z=function(G,B,$){$===void 0&&($=1);var lt=[G.x,G.y,$];return B&&!isNaN(B[0])||(B=[1,0,0,0,1,0,0,0,1]),h.d.transformMat3(lt,lt,B),{x:lt[0],y:lt[1]}},et=function(G,B,$){$===void 0&&($=1),B&&!isNaN(B[0])||(B=[1,0,0,0,1,0,0,0,1]);var lt=h.b.invert([1,0,0,0,1,0,0,0,1],B);lt||(lt=[1,0,0,0,1,0,0,0,1]);var Ft=[G.x,G.y,$];return h.d.transformMat3(Ft,Ft,lt),{x:Ft[0],y:Ft[1]}},dt=function(G,B,$){var lt=G.x-B.x,Ft=G.y-B.y,Jt=G.x-$.x,ie=G.y-$.y,se=(G.x*G.x-B.x*B.x-B.y*B.y+G.y*G.y)/2,Ce=(G.x*G.x-$.x*$.x-$.y*$.y+G.y*G.y)/2,Ee=Ft*Jt-lt*ie;return{x:-(ie*se-Ft*Ce)/Ee,y:-(lt*Ce-Jt*se)/Ee}},ht=function(G,B){var $=G.x-B.x,lt=G.y-B.y;return Math.sqrt($*$+lt*lt)},St=function(G,B){var $=[];return G.forEach(function(lt){var Ft=[];lt.forEach(function(Jt){Ft.push(Jt*B)}),$.push(Ft)}),$},wt=function(G){for(var B=[],$=G.length,lt=0;lt<$;lt+=1){B[lt]=[];for(var Ft=0;Ft<$;Ft+=1)lt===Ft?B[lt][Ft]=0:G[lt][Ft]!==0&&G[lt][Ft]?B[lt][Ft]=G[lt][Ft]:B[lt][Ft]=1/0}for(var Jt=0;Jt<$;Jt+=1)for(lt=0;lt<$;lt+=1)for(Ft=0;Ft<$;Ft+=1)B[lt][Ft]>B[lt][Jt]+B[Jt][Ft]&&(B[lt][Ft]=B[lt][Jt]+B[Jt][Ft]);return B},xt=function(G,B){var $=G.nodes,lt=G.edges,Ft=[],Jt={};if(!$)throw new Error("invalid nodes data!");return $&&$.forEach(function(ie,se){Jt[ie.id]=se,Ft.push([])}),lt&&lt.forEach(function(ie){var se=ie.source,Ce=ie.target,Ee=Jt[se],un=Jt[Ce];Ft[Ee][un]=1,B||(Ft[un][Ee]=1)}),Ft},ft=function(G,B){G.translate(B.x,B.y)},Bt=function(G,B){var $=G.getMatrix();$||($=[1,0,0,0,1,0,0,0,1]);var lt=G.getCanvasBBox(),Ft=B.x-lt.minX,Jt=B.y-lt.minY,ie=O($,[["t",Ft,Jt]]);G.setMatrix(ie)},Rt=function(G,B){var $=G.getMatrix();$||($=[1,0,0,0,1,0,0,0,1]);var lt=B;Object(l.m)(B)||(lt=[B,B]),Object(l.m)(B)&&B.length===1&&(lt=[B[0],B[0]]),$=O($,[["s",lt[0],lt[1]]]),G.setMatrix($)},Ot=function(G,B){var $=G.getMatrix();$||($=[1,0,0,0,1,0,0,0,1]),$=O($,[["r",B]]),G.setMatrix($)},X=function(G,B,$){for(var lt=[],Ft=0;Ft<G;Ft++)lt[Ft]=0;return $.forEach(function(Jt){Jt.source&&(lt[B[Jt.source]]+=1),Jt.target&&(lt[B[Jt.target]]+=1)}),lt};function ut(ve,G,B){return(B[0]-ve[0])*(G[1]-ve[1])==(G[0]-ve[0])*(B[1]-ve[1])&&Math.min(ve[0],G[0])<=B[0]&&B[0]<=Math.max(ve[0],G[0])&&Math.min(ve[1],G[1])<=B[1]&&B[1]<=Math.max(ve[1],G[1])}var vt=function(G,B,$){var lt=!1,Ft=G.length;function Jt(Ee){return Math.abs(Ee)<1e-6?0:Ee<0?-1:1}if(Ft<=2)return!1;for(var ie=0;ie<Ft;ie++){var se=G[ie],Ce=G[(ie+1)%Ft];if(ut(se,Ce,[B,$]))return!0;Jt(se[1]-$)>0!=Jt(Ce[1]-$)>0&&Jt(B-($-se[1])*(se[0]-Ce[0])/(se[1]-Ce[1])-se[0])<0&&(lt=!lt)}return lt},pt=function(G,B){return!(B.minX>G.maxX||B.maxX<G.minX||B.minY>G.maxY||B.maxY<G.minY)},Et=function(G,B){var $=function(xn){var zt=xn.map(function(Se){return Se[0]}),Yt=xn.map(function(Se){return Se[1]});return{minX:Math.min.apply(null,zt),maxX:Math.max.apply(null,zt),minY:Math.min.apply(null,Yt),maxY:Math.max.apply(null,Yt)}},lt=function(xn){for(var zt=[],Yt=xn.length,Se=0;Se<Yt-1;Se++){var Wt=xn[Se],ue=xn[Se+1];zt.push({from:{x:Wt[0],y:Wt[1]},to:{x:ue[0],y:ue[1]}})}if(zt.length>1){var vn=xn[0],Dn=xn[Yt-1];zt.push({from:{x:Dn[0],y:Dn[1]},to:{x:vn[0],y:vn[1]}})}return zt};if(G.length<2||B.length<2)return!1;var Ft=$(G),Jt=$(B);if(!pt(Ft,Jt))return!1;var ie=!1;if(Object(l.f)(B,function(un){if(vt(G,un[0],un[1]))return ie=!0,!1}),ie||(Object(l.f)(G,function(un){if(vt(B,un[0],un[1]))return ie=!0,!1}),ie))return!0;var se=lt(G),Ce=lt(B),Ee=!1;return Object(l.f)(Ce,function(un){if(function(xn,zt){var Yt=!1;return Object(l.f)(xn,function(Se){if(m(Se.from,Se.to,zt.from,zt.to))return Yt=!0,!1}),Yt}(se,un))return Ee=!0,!1}),Ee},q=function(){function ve(G,B,$,lt){this.x1=G,this.y1=B,this.x2=$,this.y2=lt}return ve.prototype.getBBox=function(){var G=Math.min(this.x1,this.x2),B=Math.min(this.y1,this.y2),$=Math.max(this.x1,this.x2),lt=Math.max(this.y1,this.y2);return{x:G,y:B,minX:G,minY:B,maxX:$,maxY:lt,width:$-G,height:lt-B}},ve}(),st=function(G,B){return{top:[G.minX,G.minY,G.maxX,G.minY],left:[G.minX,G.minY,G.minX,G.maxY],bottom:[G.minX,G.maxY,G.maxX,G.maxY],right:[G.maxX,G.minY,G.maxX,G.maxY]}[B]},it=function(G,B){var $=(B.x2-B.x1)*(G.y1-B.y1)-(B.y2-B.y1)*(G.x1-B.x1),lt=(G.x2-G.x1)*(G.y1-B.y1)-(G.y2-G.y1)*(G.x1-B.x1),Ft=(B.y2-B.y1)*(G.x2-G.x1)-(B.x2-B.x1)*(G.y2-G.y1);if(Ft){var Jt=$/Ft,ie=lt/Ft;if(Jt>=0&&Jt<=1&&ie>=0&&ie<=1)return Jt}return Number.POSITIVE_INFINITY},z=function(G,B){for(var $=["top","left","bottom","right"],lt=G.getBBox(),Ft=0,Jt=[],ie=0;ie<4;ie++){var se=st(lt,$[ie]),Ce=se[0],Ee=se[1],un=se[2],xn=se[3];Jt[ie]=m({x:B.x1,y:B.y1},{x:B.x2,y:B.y2},{x:Ce,y:Ee},{x:un,y:xn}),Jt[ie]&&(Ft+=1)}return[Jt,Ft]},P=function(G,B){for(var $=["top","left","bottom","right"],lt=G.getBBox(),Ft=Number.POSITIVE_INFINITY,Jt=0,ie=0;ie<4;ie++){var se=st(lt,$[ie]),Ce=se[0],Ee=se[1],un=se[2],xn=se[3],zt=it(B,new q(Ce,Ee,un,xn));(zt=Math.abs(zt-.5))>=0&&zt<=1&&(Jt+=1,Ft=zt<Ft?zt:Ft)}return Jt===0?-1:Ft},H=function(G){var B=0,$=0;if(G.length>0){for(var lt=0,Ft=G;lt<Ft.length;lt++){var Jt=Ft[lt];B+=Jt.x,$+=Jt.y}B/=G.length,$/=G.length}return{x:B,y:$}},k=function(G,B){return Math.pow(G.x-B.x,2)+Math.pow(G.y-B.y,2)},d=function(G,B){var $,lt=B.x1,Ft=B.y1,Jt=B.x2-lt,ie=B.y2-Ft,se=G.x-lt,Ce=G.y-Ft,Ee=se*Jt+Ce*ie;$=Ee<=0||(Ee=(se=Jt-se)*Jt+(Ce=ie-Ce)*ie)<=0?0:Ee*Ee/(Jt*Jt+ie*ie);var un=se*se+Ce*Ce-$;return un<0&&(un=0),un},g=function(G,B,$){return $===void 0&&($=.001),Math.pow(G.x-B.x,2)+Math.pow(G.y-B.y,2)<Math.pow($,2)},F=function(G,B){var $=G.x<B.x,lt=G.x>B.x+B.width,Ft=G.y>B.y+B.height,Jt=G.y<B.y;if(!($||lt||Ft||Jt))return 0;if(Ft&&!$&&!lt)return Math.pow(B.y+B.height-G.y,2);if(Jt&&!$&&!lt)return Math.pow(G.y-B.y,2);if($&&!Ft&&!Jt)return Math.pow(B.x-G.x,2);if(lt&&!Ft&&!Jt)return Math.pow(B.x+B.width-G.x,2);var ie=Math.min(Math.abs(B.x-G.x),Math.abs(B.x+B.width-G.x)),se=Math.min(Math.abs(B.y-G.y),Math.abs(B.y+B.height-G.y));return ie*ie+se*se},V="rgb(95, 149, 255)",tt="rgb(253, 253, 253)",ot="rgb(247, 250, 255)",at="rgb(224, 224, 224)",At="rgb(224, 224, 224)",yt={version:"0.0.9",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:V,fill:"rgb(239, 244, 255)"},size:20,color:V,linkPoints:{size:8,lineWidth:1,fill:ot,stroke:V}},nodeStateStyles:{active:{fill:ot,stroke:V,lineWidth:2,shadowColor:V,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:V,lineWidth:4,shadowColor:V,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:"#4572d9",lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:"rgb(247, 250, 255)",stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:"rgb(250, 250, 250)",stroke:"rgb(224, 224, 224)",lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:at,lineAppendWidth:2},color:at},edgeStateStyles:{active:{stroke:V,lineWidth:1},selected:{stroke:V,lineWidth:2,shadowColor:V,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:V,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(234, 234, 234)",lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:tt,lineWidth:1,stroke:At,r:5,width:20,height:10},size:[20,5],color:At,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:V,lineWidth:1,fill:"rgb(247, 250, 255)"},selected:{stroke:V,lineWidth:2,fill:tt,shadowColor:V,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:"#4572d9",lineWidth:2,fill:tt,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(224, 224, 224)",fill:tt,lineWidth:1},disable:{stroke:"rgb(234, 234, 234)",fill:"rgb(250, 250, 250)",lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]}},gt=function(){function ve(G){this.graph=G,this.destroyed=!1,this.modes=G.get("modes")||{default:[]},this.formatModes(),this.mode=G.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return ve.prototype.formatModes=function(){var G=this.modes;Object(l.f)(G,function(B){Object(l.f)(B,function($,lt){Object(l.x)($)&&(B[lt]={type:$})})})},ve.prototype.setBehaviors=function(G){var B,$=this.graph,lt=this.modes[G],Ft=[];Object(l.f)(lt||[],function(Jt){var ie=j.getBehavior(Jt.type||Jt);ie&&(B=new ie(Jt))&&(B.bind($),Ft.push(B))}),this.currentBehaves=Ft},ve.mergeBehaviors=function(G,B){return Object(l.f)(B,function($){G.indexOf($)<0&&(Object(l.x)($)&&($={type:$}),G.push($))}),G},ve.filterBehaviors=function(G,B){var $=[];return G.forEach(function(lt){var Ft="";Ft=Object(l.x)(lt)?lt:lt.type,B.indexOf(Ft)<0&&$.push(lt)}),$},ve.prototype.setMode=function(G){var B=this.modes,$=this.graph,lt=G;B[lt]&&($.emit("beforemodechange",{mode:G}),Object(l.f)(this.currentBehaves,function(Ft){Ft.delegate&&Ft.delegate.remove(),Ft.unbind($)}),this.setBehaviors(lt),$.emit("aftermodechange",{mode:G}),this.mode=G)},ve.prototype.getMode=function(){return this.mode},ve.prototype.manipulateBehaviors=function(G,B,$){var lt,Ft=this;if(lt=Object(l.m)(G)?G:[G],Object(l.m)(B))return Object(l.f)(B,function(ie){Ft.modes[ie]?Ft.modes[ie]=$?ve.mergeBehaviors(Ft.modes[ie]||[],lt):ve.filterBehaviors(Ft.modes[ie]||[],lt):$&&(Ft.modes[ie]=lt)}),this;var Jt=B;return B||(Jt=this.mode),this.modes[Jt]||$&&(this.modes[Jt]=lt),this.modes[Jt]=$?ve.mergeBehaviors(this.modes[Jt]||[],lt):ve.filterBehaviors(this.modes[Jt]||[],lt),this.setMode(this.mode),this},ve.prototype.updateBehavior=function(G,B,$){Object(l.x)(G)&&(G={type:G});var lt=[];if($&&$!==this.mode&&$!=="default"){if(!(lt=this.modes[$])||!lt.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;var Ft=lt.length;for(ie=0;ie<Ft;ie++){if((se=lt[ie]).type===G.type||se===G.type)return se===G.type&&(se={type:se}),Object.assign(se,B),lt[ie]=se,this;ie===Ft-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(!(lt=this.currentBehaves)||!lt.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var Jt=lt.length,ie=0;ie<Jt;ie++){var se;if((se=lt[ie]).type===G.type)return se.updateCfg(B),this;ie===Jt-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},ve.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},ve}(),bt=e(14),Tt=function(ve){function G(B,$){var lt=ve.call(this,B,$)||this;return lt.item=$.item,lt.canvasX=$.canvasX,lt.canvasY=$.canvasY,lt.wheelDelta=$.wheelDelta,lt.detail=$.detail,lt}return Object(n.b)(G,ve),G}(e(18).Event),Dt=function(G){return G+"-"+Math.random()+Date.now()},Ut=function(G){var B=0,$=0,lt=0,Ft=0;return Object(l.t)(G)?B=$=lt=Ft=G:Object(l.x)(G)?B=$=lt=Ft=parseInt(G,10):Object(l.m)(G)&&(B=G[0],lt=Object(l.s)(G[1])?G[0]:G[1],Ft=Object(l.s)(G[2])?G[0]:G[2],$=Object(l.s)(G[3])?lt:G[3]),[B,lt,Ft,$]},jt=function(G){var B=new Tt(G.type,G);return B.clientX=G.clientX,B.clientY=G.clientY,B.x=G.x,B.y=G.y,B.target=G.target,B.currentTarget=G.currentTarget,B.bubbles=!0,B.item=G.item,B},Vt=function(G){if(!G)return!1;for(var B=[1,0,0,0,1,0,0,0,1],$=0;$<9;$++)if(G[$]!==B[$])return!0;return!1},Ht=function(G){return Number.isNaN(Number(G))},re=function(G){for(var B=1/0,$=-1/0,lt=1/0,Ft=-1/0,Jt=0;Jt<G.length;Jt++){var ie=G[Jt].getBBox(),se=ie.minX,Ce=ie.minY,Ee=ie.maxX,un=ie.maxY;se<B&&(B=se),Ce<lt&&(lt=Ce),Ee>$&&($=Ee),un>Ft&&(Ft=un)}return{x:Math.floor(B),y:Math.floor(lt),width:Math.ceil($)-Math.floor(B),height:Math.ceil(Ft)-Math.floor(lt),minX:B,minY:lt,maxX:$,maxY:Ft}},pe=function(G,B,$,lt,Ft){B===void 0&&(B=15),$===void 0&&($="quadratic");for(var Jt=G.length,ie=2*B,se=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],Ce={},Ee=[],un={},xn=0;xn<Jt;xn++){var zt=G[xn],Yt=zt.source,Se=zt.target,Wt=Yt+"-"+Se;if(!Ee[xn]){Ce[Wt]||(Ce[Wt]=[]),Ee[xn]=!0,Ce[Wt].push(zt);for(var ue=0;ue<Jt;ue++)if(xn!==ue){var vn=G[ue],Dn=vn.source,zn=vn.target;Ee[ue]||(Yt===zn&&Se===Dn?(Ce[Wt].push(vn),Ee[ue]=!0,un[Dn+"|"+zn+"|"+(Ce[Wt].length-1)]=!0):Yt===Dn&&Se===zn&&(Ce[Wt].push(vn),Ee[ue]=!0))}}}for(var _n in Ce)for(var Ze=Ce[_n],Te=Ze.length,N=0;N<Te;N++){var mt=Ze[N];if(mt.source!==mt.target)if(Te===1&&lt&&mt.source!==mt.target)mt.type=lt;else{mt.type=$;var $t=(N%2==0?1:-1)*(un[mt.source+"|"+mt.target+"|"+N]?-1:1);mt.curveOffset=Te%2==1?$t*Math.ceil(N/2)*ie:$t*(Math.floor(N/2)*ie+B)}else Ft&&(mt.type=Ft),mt.loopCfg={position:se[N%8],dist:20*Math.floor(N/8)+50}}return G},ye=function(){function ve(G){this.destroyed=!1,this.graph=G,this.destroyed=!1}return ve.prototype.getViewCenter=function(){var G=this.getFormatPadding(),B=this.graph,$=this.graph.get("width"),lt=B.get("height");return{x:($-G[1]-G[3])/2+G[3],y:(lt-G[0]-G[2])/2+G[0]}},ve.prototype.fitCenter=function(){var G=this.graph,B=G.get("group");B.resetMatrix();var $=B.getCanvasBBox();if($.width!==0&&$.height!==0){var lt=this.getViewCenter(),Ft=$.x+$.width/2,Jt=$.y+$.height/2;G.translate(lt.x-Ft,lt.y-Jt)}},ve.prototype.fitView=function(){var G=this.graph,B=this.getFormatPadding(),$=G.get("width"),lt=G.get("height"),Ft=G.get("group");Ft.resetMatrix();var Jt=Ft.getCanvasBBox();if(Jt.width!==0&&Jt.height!==0){var ie=this.getViewCenter(),se=Jt.x+Jt.width/2,Ce=Jt.y+Jt.height/2;G.translate(ie.x-se,ie.y-Ce);var Ee=($-B[1]-B[3])/Jt.width,un=(lt-B[0]-B[2])/Jt.height,xn=Ee;Ee>un&&(xn=un),G.zoom(xn,ie)}},ve.prototype.getFormatPadding=function(){var G=this.graph.get("fitViewPadding");return Ut(G)},ve.prototype.focusPoint=function(G,B,$){var lt=this,Ft=this.getViewCenter(),Jt=this.getPointByCanvas(Ft.x,Ft.y),ie=this.graph.get("group").getMatrix();if(ie||(ie=[1,0,0,0,1,0,0,0,1]),B){var se=(Jt.x-G.x)*ie[0],Ce=(Jt.y-G.y)*ie[4],Ee=0,un=0,xn=0,zt=0;this.graph.get("canvas").animate(function(Yt){xn=se*Yt,zt=Ce*Yt,lt.graph.translate(xn-Ee,zt-un),Ee=xn,un=zt},Object(n.a)({},$))}else this.graph.translate((Jt.x-G.x)*ie[0],(Jt.y-G.y)*ie[4])},ve.prototype.getPointByCanvas=function(G,B){var $=this.graph.get("group").getMatrix();return $||($=[1,0,0,0,1,0,0,0,1]),et({x:G,y:B},$)},ve.prototype.getPointByClient=function(G,B){var $=this.graph.get("canvas").getPointByClient(G,B);return this.getPointByCanvas($.x,$.y)},ve.prototype.getClientByPoint=function(G,B){var $=this.graph.get("canvas"),lt=this.getCanvasByPoint(G,B),Ft=$.getClientByPoint(lt.x,lt.y);return{x:Ft.x,y:Ft.y}},ve.prototype.getCanvasByPoint=function(G,B){var $=this.graph.get("group").getMatrix();return $||($=[1,0,0,0,1,0,0,0,1]),Z({x:G,y:B},$)},ve.prototype.focus=function(G,B,$){Object(l.x)(G)&&(G=this.graph.findById(G));var lt=G.get("group").getMatrix();lt||(lt=[1,0,0,0,1,0,0,0,1]),G&&this.focusPoint({x:lt[6],y:lt[7]},B,$)},ve.prototype.changeSize=function(G,B){var $=this.graph;if(!Object(l.t)(G)||!Object(l.t)(B))throw Error("invalid canvas width & height, please make sure width & height type is number");$.set({width:G,height:B}),$.get("canvas").changeSize(G,B),$.get("plugins").forEach(function(lt){if(lt.get("gridContainer")){var Ft=$.get("minZoom");Object(bt.c)(lt.get("container"),{width:G+"px",height:B+"px"}),Object(bt.c)(lt.get("gridContainer"),{width:G/Ft+"px",height:B/Ft+"px",left:0,top:0})}})},ve.prototype.destroy=function(){this.graph=null,this.destroyed=!1},ve}(),we={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},Re=Math.PI,He=Math.sin,pn=Math.cos,fn=He(Re/8),Rn=pn(Re/8),Cn=function(G,B){var $=G.getBBox(),lt={x:$.minX,y:$.minY},Ft={x:$.maxX,y:$.maxY};if(B){var Jt=B.getMatrix();Jt||(Jt=[1,0,0,0,1,0,0,0,1]),lt=Z(lt,Jt),Ft=Z(Ft,Jt)}var ie=lt.x,se=lt.y,Ce=Ft.x,Ee=Ft.y;return{x:ie,y:se,minX:ie,minY:se,maxX:Ce,maxY:Ee,width:Ce-ie,height:Ee-se}},kn=function(G){var B=G.sourceNode||G.targetNode,$=B.get("group").getMatrix();$||($=[1,0,0,0,1,0,0,0,1]);var lt=B.getKeyShape().getBBox(),Ft=G.loopCfg||{},Jt=Ft.dist||2*Math.max(lt.width,lt.height),ie=Ft.position||yt.defaultLoopPosition,se=[$[6],$[7]],Ce=[G.startPoint.x,G.startPoint.y],Ee=[G.endPoint.x,G.endPoint.y],un=lt.height/2,xn=lt.height/2,zt=un*fn,Yt=un*Rn,Se=xn*fn,Wt=xn*Rn;if(Ce[0]===Ee[0]&&Ce[1]===Ee[1]){switch(ie){case"top":Ce=[se[0]-zt,se[1]-Yt],Ee=[se[0]+Se,se[1]-Wt];break;case"top-right":un=lt.height/2,xn=lt.width/2,Ce=[se[0]+(zt=un*fn),se[1]-(Yt=un*Rn)],Ee=[se[0]+(Wt=xn*Rn),se[1]-(Se=xn*fn)];break;case"right":un=lt.width/2,xn=lt.width/2,Ce=[se[0]+(Yt=un*Rn),se[1]-(zt=un*fn)],Ee=[se[0]+(Wt=xn*Rn),se[1]+(Se=xn*fn)];break;case"bottom-right":un=lt.width/2,xn=lt.height/2,Ce=[se[0]+(Yt=un*Rn),se[1]+(zt=un*fn)],Ee=[se[0]+(Se=xn*fn),se[1]+(Wt=xn*Rn)];break;case"bottom":un=lt.height/2,xn=lt.height/2,Ce=[se[0]+(zt=un*fn),se[1]+(Yt=un*Rn)],Ee=[se[0]-(Se=xn*fn),se[1]+(Wt=xn*Rn)];break;case"bottom-left":un=lt.height/2,xn=lt.width/2,Ce=[se[0]-(zt=un*fn),se[1]+(Yt=un*Rn)],Ee=[se[0]-(Wt=xn*Rn),se[1]+(Se=xn*fn)];break;case"left":un=lt.width/2,xn=lt.width/2,Ce=[se[0]-(Yt=un*Rn),se[1]+(zt=un*fn)],Ee=[se[0]-(Wt=xn*Rn),se[1]-(Se=xn*fn)];break;case"top-left":un=lt.width/2,xn=lt.height/2,Ce=[se[0]-(Yt=un*Rn),se[1]-(zt=un*fn)],Ee=[se[0]-(Se=xn*fn),se[1]-(Wt=xn*Rn)];break;default:un=lt.width/2,xn=lt.width/2,Ce=[se[0]-(zt=un*fn),se[1]-(Yt=un*Rn)],Ee=[se[0]+(Se=xn*fn),se[1]-(Wt=xn*Rn)]}if(Ft.clockwise===!1){var ue=[Ce[0],Ce[1]];Ce=[Ee[0],Ee[1]],Ee=[ue[0],ue[1]]}}var vn=[Ce[0]-se[0],Ce[1]-se[1]],Dn=(un+Jt)/un,zn=(xn+Jt)/xn;Ft.clockwise===!1&&(Dn=(xn+Jt)/xn,zn=(un+Jt)/un);var _n=h.c.scale([0,0],vn,Dn),Ze=[se[0]+_n[0],se[1]+_n[1]],Te=[Ee[0]-se[0],Ee[1]-se[1]],N=h.c.scale([0,0],Te,zn),mt=[se[0]+N[0],se[1]+N[1]];return G.startPoint={x:Ce[0],y:Ce[1]},G.endPoint={x:Ee[0],y:Ee[1]},G.controlPoints=[{x:Ze[0],y:Ze[1]},{x:mt[0],y:mt[1]}],G},Mn=function(G,B,$,lt,Ft){var Jt=[],ie=G.getPoint(B);if(ie===null)return{x:0,y:0,angle:0};if(B<1e-4)Jt=G.getStartTangent().reverse();else if(B>.9999)Jt=G.getEndTangent();else{var se=G.getPoint(B+1e-4);Jt.push([ie.x,ie.y]),Jt.push([se.x,se.y])}var Ce=Math.atan2(Jt[1][1]-Jt[0][1],Jt[1][0]-Jt[0][0]);if(Ce<0&&(Ce+=2*Re),$&&(ie.x+=pn(Ce)*$,ie.y+=He(Ce)*$),lt){var Ee=Ce-Re/2;Ce>.5*Re&&Ce<1.5*Re&&(Ee-=Re),ie.x+=pn(Ee)*lt,ie.y+=He(Ee)*lt}var un={x:ie.x,y:ie.y,angle:Ce};return Ft?(Ce>.5*Re&&Ce<1.5*Re&&(Ce-=Re),Object(n.a)({rotate:Ce},un)):un},Tn=function ve(G,B){if(B(G)===!1)return!1;if(G&&G.children){for(var $=G.children.length-1;$>=0;$--)if(!ve(G.children[$],B))return!1}return!0},Un=function(G,B){typeof B=="function"&&Tn(G,B)},Kn=function(G,B){typeof B=="function"&&function $(lt,Ft){if(lt&&lt.children){for(var Jt=lt.children.length-1;Jt>=0;Jt--)if(!$(lt.children[Jt],Ft))return}return Ft(lt)!==!1}(G,B)},tr=function(G,B){return B*(we[G]||1)},or=function(G,B){var $=0,lt=new RegExp("[\u4E00-\u9FA5]+");return G.split("").forEach(function(Ft){lt.test(Ft)?$+=B:$+=tr(Ft,B)}),[$,B]},nr=function(G,B){var $=[],lt={},Ft={};G.forEach(function(se){Ft[se.id]=se}),G.forEach(function(se,Ce){var Ee=Object(l.c)(se);Ee.itemType="combo",Ee.children=void 0,Ee.parentId===Ee.id?(console.warn("The parentId for combo "+Ee.id+" can not be the same as the combo's id"),delete Ee.parentId):Ee.parentId&&!Ft[Ee.parentId]&&(console.warn("The parent combo for combo "+Ee.id+" does not exist!"),delete Ee.parentId);var un=lt[Ee.id];if(un){if(Ee.children=un.children,lt[Ee.id]=Ee,!(un=Ee).parentId)return void $.push(un);var xn=lt[un.parentId];if(xn)xn.children?xn.children.push(Ee):xn.children=[Ee];else{var zt={id:un.parentId,children:[un]};lt[un.parentId]=zt,lt[Ee.id]=Ee}}else if(Object(l.x)(se.parentId)){var Yt=lt[se.parentId];if(Yt)Yt.children?Yt.children.push(Ee):Yt.children=[Ee],lt[Ee.id]=Ee;else{var Se={id:se.parentId,children:[Ee]};lt[Se.id]=Se,lt[Ee.id]=Ee}}else $.push(Ee),lt[Ee.id]=Ee});var Jt={};(B||[]).forEach(function(se){Jt[se.id]=se;var Ce=lt[se.comboId];if(Ce){var Ee={id:se.id,comboId:se.comboId};Ce.children?Ce.children.push(Ee):Ce.children=[Ee],Ee.itemType="node",lt[se.id]=Ee}});var ie=0;return $.forEach(function(se){se.depth=ie+10,Tn(se,function(Ce){var Ee,un=lt[Ce.id].itemType;Ee=un==="node"?lt[Ce.comboId]:lt[Ce.parentId],Ce.depth=Ee&&un==="node"?ie+1:ie+10,ie<Ce.depth&&(ie=Ce.depth);var xn=Jt[Ce.id];return xn&&(xn.depth=Ce.depth),!0})}),$},er=function(G,B,$){var lt,Ft=G,Jt={root:{children:G}},ie=!1,se="root";(G||[]).forEach(function(zt){if(!ie)return zt.id===B?(lt=zt,zt.itemType==="combo"?lt.parentId=$:lt.comboId=$,void(ie=!0)):void Un(zt,function(Yt){return Jt[Yt.id]={children:Yt.children},Ft=Jt[Yt.parentId||Yt.comboId||"root"].children,!Yt||!Yt.removed&&B!==Yt.id||!Ft||(se=Yt.parentId||Yt.comboId||"root",lt=Yt,Yt.itemType==="combo"?lt.parentId=$:lt.comboId=$,ie=!0,!1)})});var Ce=(Ft=Jt[se].children)?Ft.indexOf(lt):-1;if(Ce>-1&&Ft.splice(Ce,1),ie||(lt={id:B,itemType:"node",comboId:$},Jt[B]={children:void 0}),B){var Ee=!1;if($){var un=0;(G||[]).forEach(function(zt){Ee||Un(zt,function(Yt){return $!==Yt.id||(Ee=!0,Yt.children?Yt.children.push(lt):Yt.children=[lt],un=Yt.depth,lt.itemType==="node"?lt.depth=un+2:lt.depth=un+1,!1)})})}else $&&Ee||lt.itemType==="node"||G.push(lt);var xn=lt.depth;Un(lt,function(zt){return zt.itemType==="node"?xn+=2:xn+=1,zt.depth=xn,!0})}return G},Sr=function(G,B){var $={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return G&&G.length!==0&&(G.forEach(function(lt){var Ft=B.findById(lt.id);if(Ft&&Ft.isVisible()){Ft.set("bboxCanvasCache",void 0);var Jt=Ft.getCanvasBBox();Jt.x&&$.minX>Jt.minX&&($.minX=Jt.minX),Jt.y&&$.minY>Jt.minY&&($.minY=Jt.minY),Jt.x&&$.maxX<Jt.maxX&&($.maxX=Jt.maxX),Jt.y&&$.maxY<Jt.maxY&&($.maxY=Jt.maxY)}}),$.x=($.minX+$.maxX)/2,$.y=($.minY+$.maxY)/2,$.width=$.maxX-$.minX,$.height=$.maxY-$.minY,$.centerX=($.minX+$.maxX)/2,$.centerY=($.minY+$.maxY)/2,Object.keys($).forEach(function(lt){$[lt]!==1/0&&$[lt]!==-1/0||($[lt]=void 0)})),$},Vr=function(G){var B=Object(l.t)(G.x)||Object(l.t)(G.y)||G.type||G.anchorPoints||G.size;return G.style&&(B=B||Object(l.t)(G.style.r)||Object(l.t)(G.style.width)||Object(l.t)(G.style.height)||Object(l.t)(G.style.rx)||Object(l.t)(G.style.ry)),B},ti=function(G){var B={};return Object.keys(G).forEach(function($){var lt=G[$];if(Object(l.v)(lt)){var Ft={};Object.keys(lt).forEach(function(Jt){var ie=lt[Jt];(Jt!=="img"||Object(l.x)(ie))&&(Ft[Jt]=Object(l.c)(ie))}),B[$]=Ft}else B[$]=Object(l.c)(lt)}),B};function hi(ve){return(hi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G})(ve)}function Fi(ve){if(typeof ve!="string")return ve;var G=function(Ze){if(typeof Ze!="string")return Ze;try{return JSON.parse(Ze.trim())}catch(Te){return Ze.trim()}},B=G(ve);if(typeof B!="string")return B;for(var $=function(Ze){return Ze[Ze.length-1]},lt=ve.trim(),Ft=[],Jt=[],ie=function(){for(var Ze=[],Te=0;Te<arguments.length;Te++)Ze[Te]=arguments[Te];return Ze.some(function(N){return $(Jt)===N})},se=null,Ce=0,Ee="";Ce<lt.length;){var un=lt[Ce],xn=ie('"',"'");if(xn||un.trim()){var zt=lt[Ce-1]==="\\",Yt=ie("}"),Se=ie("]"),Wt=ie(","),ue=$(Ft);if(xn)if($(Jt)!==un||zt)Ee+=un;else{Jt.pop();var vn=G(Ee);ue.push(vn),se=vn,Ee=""}else if(Se&&un===",")Ee&&(ue.push(G(Ee)),Ee="");else if(Yt&&un===":")Jt.push(","),Ee&&(ue.push(Ee),Ee="");else if(Wt&&un===",")Ee&&(ue.push(G(Ee)),Ee=""),Jt.pop();else if(un==="}"&&(Yt||Wt)){Ee&&(ue.push(G(Ee)),Ee=""),Wt&&Jt.pop();for(var Dn={},zn=1;zn<ue.length;zn+=2)Dn[ue[zn-1]]=ue[zn];Ft.pop(),Ft.length&&$(Ft).push(Dn),Jt.pop(),se=Dn}else un==="]"&&Se?(Ee&&(ue.push(G(Ee)),Ee=""),Ft.pop(),Ft.length&&$(Ft).push(ue),Jt.pop(),se=ue):un==="{"?(Ft.push([]),Jt.push("}")):un==="["?(Ft.push([]),Jt.push("]")):un==='"'?Jt.push('"'):un==="'"?Jt.push("'"):Ee+=un;Ce+=1}else Ce+=1}return se||Ee}function to(ve,G){var B;G===void 0&&(G={x:0,y:0});var $=Object(n.a)({x:0,y:0,width:0,height:0},G);if((B=ve.children)===null||B===void 0?void 0:B.length){var lt=ve.attrs,Ft=lt===void 0?{}:lt,Jt=Ft.marginTop,ie=Object(n.a)({},G);Jt&&(ie.y+=Jt);for(var se=0;se<ve.children.length;se++){ve.children[se].attrs.key=(Ft.key||"root")+" -"+se+" ";var Ce=to(ve.children[se],ie);if(Ce.bbox){var Ee=Ce.bbox;Ce.attrs.next==="inline"?ie.x+=Ce.bbox.width:ie.y+=Ce.bbox.height,Ee.width+Ee.x>$.width&&($.width=Ee.width+Ee.x),Ee.height+Ee.y>$.height&&($.height=Ee.height+Ee.y)}}}return ve.bbox=function(un,xn,zt){var Yt,Se,Wt=un.attrs,ue=Wt===void 0?{}:Wt,vn={x:xn.x||0,y:xn.y||0,width:zt.width||0,height:zt.height||0};switch(un.type){case"maker":case"circle":ue.r&&(Se=2*ue.r,Yt=2*ue.r);break;case"text":ue.text&&(Se=or(ue.text,ue.fontSize||12)[0],Yt=16,vn.y+=Yt,vn.height=Yt,vn.width=Se,un.attrs=Object(n.a)({fontSize:12,fill:"#000"},ue));break;default:ue.width&&(Se=ue.width),ue.height&&(Yt=ue.height)}return Yt>=0&&(vn.height=Yt),Se>=0&&(vn.width=Se),ue.marginTop&&(vn.y+=ue.marginTop),ue.marginLeft&&(vn.x+=ue.marginLeft),vn}(ve,G,$),ve.attrs=Object(n.a)(Object(n.a)({},ve.attrs),ve.bbox),ve}function si(ve){var G={},B=function(lt){var Ft=function(se){return function(Ce){for(var Ee=se.length,un=[],xn=0,zt="";xn<Ee;)if(se[xn]==="{"&&se[xn+1]==="{")un.push(zt),zt="",xn+=2;else if(se[xn]==="}"&&se[xn+1]==="}"){if(un.length){var Yt=un.pop();zt=Object(l.i)(Ce,zt,Yt.endsWith("=")?'"{'+zt+'}"':zt),un.push(Yt+zt)}xn+=2,zt=""}else zt+=se[xn],xn+=1;return un.push(zt),un.map(function(Se,Wt){return un[Wt-1]&&un[Wt-1].endsWith("=")?'"{'+Se+'}"':Se}).join("")}}(typeof ve=="function"?ve(lt):ve)(lt),Jt=document.createElement("div");Jt.innerHTML=Ft;var ie=to(function se(Ce,Ee){var un={},xn=Ce.getAttributeNames&&Ce.getAttributeNames()||[],zt=Ce.children&&Array.from(Ce.children).map(function(Wt){return se(Wt,Ee)}),Yt={},Se=Ce.tagName?Ce.tagName.toLowerCase():"group";return Se==="text"&&(un.text=Ce.innerText),Yt.type=Se,Se==="img"&&(Yt.type="image"),Array.from(xn).forEach(function(Wt){var ue=Wt.split("-").reduce(function(zn,_n){return zn+_n.charAt(0).toUpperCase()+_n.slice(1)}),vn=Ce.getAttribute(Wt);try{if(ue==="style"||ue==="attrs"){var Dn=Fi(vn);un=Object(n.a)(Object(n.a)({},un),Dn)}else Yt[ue]=Fi(vn)}catch(zn){if(ue==="style")throw zn;Yt[ue]=vn}}),Yt.attrs=un,Ee&&Ee.style&&Yt.name&&hi(Ee.style[Yt.name])==="object"&&(Yt.attrs=Object(n.a)(Object(n.a)({},Yt.attrs),Ee.style[Yt.name])),Ee&&Ee.style&&Yt.keyshape&&(Yt.attrs=Object(n.a)(Object(n.a)({},Yt.attrs),Ee.style)),zt.length&&(Yt.children=zt),Yt}(Jt.children[0],lt));return Jt.remove(),ie};return{draw:function(lt,Ft){var Jt=B(lt),ie=Ft;return function se(Ce){var Ee=Ce.attrs,un=Ee===void 0?{}:Ee,xn=Ce.bbox,zt=Ce.type,Yt=Ce.children,Se=Object(n.c)(Ce,["attrs","bbox","type","children"]);if(Ce.type!=="group"){var Wt=Ft.addShape(Ce.type,Object(n.a)({attrs:un,origin:{bbox:xn,type:zt,children:Yt}},Se));Ce.keyshape&&(ie=Wt)}Ce.children&&Ce.children.forEach(function(ue){return se(ue)})}(Jt),G[lt.id]=[Jt],ie},update:function(lt,Ft){G[lt.id]||(G[lt.id]=[]);var Jt=Ft.getContainer(),ie=Jt.get("children"),se=B(lt),Ce=function xn(zt,Yt){var Se,Wt,ue,vn,Dn=(zt||{}).type,zn=((Yt==null?void 0:Yt.attrs)||{}).key;if(zn&&zt&&(zt.attrs.key=zn),!zt&&Yt)return{action:"delete",val:Yt,type:Dn,key:zn};if(zt&&!Yt)return{action:"add",val:zt,type:Dn};if(!zt&&!Yt)return{action:"same",type:Dn};var _n=[];if(((Se=zt.children)===null||Se===void 0?void 0:Se.length)>0||((Wt=Yt.children)===null||Wt===void 0?void 0:Wt.length)>0)for(var Ze=Math.max((ue=zt.children)===null||ue===void 0?void 0:ue.length,(vn=Yt.children)===null||vn===void 0?void 0:vn.length),Te=Yt.children||[],N=zt.children||[],mt=0;mt<Ze;mt+=1)_n.push(xn(N[mt],Te[mt]));var $t=Object.keys(Yt.attrs),me=Object.keys(zt.attrs);return Yt.type!==zt.type?{action:"restructure",nowTarget:zt,formerTarget:Yt,key:zn,children:_n}:$t.filter(function(Zt){return Zt!=="children"}).some(function(Zt){return zt.attrs[Zt]!==Yt.attrs[Zt]||!me.includes(Zt)})?{action:"change",val:zt,children:_n,type:Dn,key:zn}:{action:"same",children:_n,type:Dn,key:zn}}(se,G[lt.id].pop()),Ee=function xn(zt){var Yt;zt.type!=="group"&&Jt.addShape(zt.type,{attrs:zt.attrs}),((Yt=zt.children)===null||Yt===void 0?void 0:Yt.length)&&zt.children.map(function(Se){return xn(Se)})},un=function xn(zt){var Yt,Se=ie.find(function(Wt){return Wt.attrs.key===zt.attrs.key});Se&&Jt.removeChild(Se),((Yt=zt.children)===null||Yt===void 0?void 0:Yt.length)&&zt.children.map(function(Wt){return xn(Wt)})};(function xn(zt){var Yt=zt.key;if(zt.type!=="group"){var Se=ie.find(function(ue){return ue.attrs.key===Yt});switch(zt.action){case"change":if(Se){var Wt=zt.val.keyshape?Ft.getOriginStyle():{};Se.attr(Object(n.a)(Object(n.a)({},Wt),zt.val.attrs))}break;case"add":Ee(zt.val);break;case"delete":un(zt.val);break;case"restructure":un(zt.formerTarget),Ee(zt.nowTarget)}}zt.children&&zt.children.forEach(function(ue){return xn(ue)})})(Ce),G[lt.id].push(se)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Ti={};function _i(ve){return Ti[ve]||(Ti[ve]=Object(l.I)(ve)),Ti[ve]}var Li={defaultShapeType:"defaultType",className:null,getShape:function(G){return this[G]||this[this.defaultShapeType]||this["simple-circle"]},draw:function(G,B,$){var lt=this.getShape(G),Ft=lt.draw(B,$);return lt.afterDraw&&lt.afterDraw(B,$,Ft),Ft},baseUpdate:function(G,B,$){var lt=this.getShape(G);lt.update&&lt.update(B,$),lt.afterUpdate&&lt.afterUpdate(B,$)},setState:function(G,B,$,lt){this.getShape(G).setState(B,$,lt)},shouldUpdate:function(G){return!!this.getShape(G).update},getControlPoints:function(G,B){return this.getShape(G).getControlPoints(B)},getAnchorPoints:function(G,B){return this.getShape(G).getAnchorPoints(B)}},Vi={options:{},draw:function(G,B){return this.drawShape(G,B)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(G){return G.controlPoints},getAnchorPoints:function(G){var B=this.options.anchorPoints;return G.anchorPoints||B}},ro=function(){function ve(){}return ve.registerFactory=function(G,B){var $=_i(G),lt=Li,Ft=Object(n.a)(Object(n.a)({},lt),B);return ve[$]=Ft,Ft.className=$,Ft},ve.getFactory=function(G){return ve[_i(G)]},ve.registerNode=function(G,B,$){var lt,Ft=ve.Node;if(typeof B=="string"||typeof B=="function"){var Jt=si(B);lt=Object(n.a)(Object(n.a)({},Ft.getShape("single-node")),Jt)}else if(B.jsx)Jt=si(B.jsx),lt=Object(n.a)(Object(n.a)(Object(n.a)({},Ft.getShape("single-node")),Jt),B);else{Ft.getShape($);var ie=$?Ft.getShape($):Vi;lt=Object(n.a)(Object(n.a)({},ie),B)}return lt.type=G,lt.itemType="node",Ft[G]=lt,lt},ve.registerEdge=function(G,B,$){var lt=ve.Edge,Ft=$?lt.getShape($):Vi,Jt=Object(n.a)(Object(n.a)({},Ft),B);return Jt.type=G,Jt.itemType="edge",lt[G]=Jt,Jt},ve.registerCombo=function(G,B,$){var lt=ve.Combo,Ft=$?lt.getShape($):Vi,Jt=Object(n.a)(Object(n.a)({},Ft),B);return Jt.type=G,Jt.itemType="combo",lt[G]=Jt,Jt},ve}(),jr=ro;ro.registerFactory("node",{defaultShapeType:"circle"}),ro.registerFactory("edge",{defaultShapeType:"line"}),ro.registerFactory("combo",{defaultShapeType:"circle"});var Ji=["startArrow","endArrow"],pr=function(){function ve(G){this._cfg={},this.destroyed=!1;var B={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(B,this.getDefaultCfg(),G);var $=this.get("model"),lt=$.id,Ft=this.get("type");lt||(lt=Dt(Ft),this.get("model").id=lt),this.set("id",lt);var Jt=G.group;Jt&&(Jt.set("item",this),Jt.set("id",lt)),this.init(),this.draw();var ie=$.shape||$.type||(Ft==="edge"?"line":"circle"),se=this.get("shapeFactory");if(se&&se[ie]){var Ce=se[ie].options;if(Ce&&Ce.stateStyles){var Ee=this.get("styles")||$.stateStyles;Ee=Object(l.e)({},Ce.stateStyles,Ee),this.set("styles",Ee)}}}return ve.prototype.calculateBBox=function(){var G=this.get("keyShape"),B=this.get("group"),$=Cn(G,B);return $.x=$.minX,$.y=$.minY,$.width=$.maxX-$.minX,$.height=$.maxY-$.minY,$.centerX=($.minX+$.maxX)/2,$.centerY=($.minY+$.maxY)/2,$},ve.prototype.calculateCanvasBBox=function(){var G=this.get("keyShape"),B=this.get("group"),$=Cn(G,B);return $.x=$.minX,$.y=$.minY,$.width=$.maxX-$.minX,$.height=$.maxY-$.minY,$.centerX=($.minX+$.maxX)/2,$.centerY=($.minY+$.maxY)/2,$},ve.prototype.drawInner=function(){var G=this.get("shapeFactory"),B=this.get("group"),$=this.get("model");B.clear();var lt=$.visible;if(lt===void 0||lt||this.changeVisibility(lt),G){this.updatePosition($);var Ft=this.getShapeCfg($),Jt=Ft.type,ie=G.draw(Jt,Ft,B);ie&&(this.set("keyShape",ie),ie.set("isKeyShape",!0),ie.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",Jt),this.restoreStates(G,Jt)}},ve.prototype.setOriginStyle=function(G){var B=this.get("group").get("children"),$=this.getKeyShape(),lt=this,Ft=$.get("name");if(this.get("originStyle")){var Jt=this.getOriginStyle();Ft&&!Jt[Ft]&&(Jt[Ft]={});var ie=this.getCurrentStatesStyle();Object(l.f)(B,function(Ce){var Ee=Ce.get("name"),un=Ce.attr();if(Ee&&Ee!==Ft){var xn=ie[Ee];Jt[Ee]||(Jt[Ee]={}),xn?Object.keys(un).forEach(function(Se){var Wt=un[Se];Wt!==xn[Se]&&(Jt[Ee][Se]=Wt)}):Jt[Ee]=Object(l.c)(un)}else{var zt=Ce.attr(),Yt=Object(n.a)(Object(n.a)({},ie),ie[Ft]);Object.keys(zt).forEach(function(Se){var Wt=zt[Se];Object(l.w)(Wt)&&Ji.indexOf(Ee)===-1||Yt[Se]!==Wt&&(Ft?Jt[Ft][Se]=Wt:Jt[Se]=Wt)})}}),Jt.path&&delete Jt.path,Jt.matrix&&delete Jt.matrix,lt.set("originStyle",Jt)}else{var se={};Object(l.f)(B,function(Ce){var Ee=Ce.get("type"),un=Ce.get("name");if(un&&un!==Ft)se[un]=Ee!=="image"?Object(l.c)(Ce.attr()):lt.getShapeStyleByName(un);else{var xn=lt.getShapeStyleByName();if(xn.path&&delete xn.path,xn.matrix&&delete xn.matrix,Ft)if(un)se[Ft]=xn;else{var zt=Dt("shape");Ce.set("name",zt),se[zt]=Ee!=="image"?Object(l.c)(Ce.attr()):lt.getShapeStyleByName(un)}else Object.assign(se,xn)}}),lt.set("originStyle",se)}},ve.prototype.restoreStates=function(G,B){var $=this,lt=$.get("states");Object(l.f)(lt,function(Ft){G.setState(B,Ft,!0,$)})},ve.prototype.init=function(){var G=jr.getFactory(this.get("type"));this.set("shapeFactory",G)},ve.prototype.get=function(G){return this._cfg[G]},ve.prototype.set=function(G,B){Object(l.w)(G)?this._cfg=Object(n.a)(Object(n.a)({},this._cfg),G):this._cfg[G]=B},ve.prototype.getDefaultCfg=function(){return{}},ve.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null)},ve.prototype.beforeDraw=function(){},ve.prototype.afterDraw=function(){},ve.prototype.afterUpdate=function(){},ve.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},ve.prototype.getShapeStyleByName=function(G){var B,$=this.get("group");if(B=G?$.find(function(Ft){return Ft.get("name")===G}):this.getKeyShape()){var lt={};return Object(l.f)(B.attr(),function(Ft,Jt){Jt!=="img"&&(lt[Jt]=Ft)}),lt}return{}},ve.prototype.getShapeCfg=function(G){var B=this.get("styles");if(B){var $=G;return $.style=Object(n.a)(Object(n.a)({},B),G.style),$}return G},ve.prototype.getStateStyle=function(G){var B=this.get("styles");return B&&B[G]},ve.prototype.getOriginStyle=function(){return this.get("originStyle")},ve.prototype.getCurrentStatesStyle=function(){var G=this,B={},$=G.getStates();return $&&$.length?(Object(l.f)(G.getStates(),function(lt){B=Object.assign(B,G.getStateStyle(lt))}),B):this.getOriginStyle()},ve.prototype.setState=function(G,B){var $=this.get("states"),lt=this.get("shapeFactory"),Ft=G,Jt=G;Object(l.x)(B)&&(Ft=G+":"+B,Jt=G+":");var ie=$;if(Object(l.n)(B)){var se=$.indexOf(Jt);if(B){if(se>-1)return;$.push(Ft)}else se>-1&&$.splice(se,1)}else if(Object(l.x)(B)){var Ce=$.filter(function(un){return un.includes(Jt)});Ce.length>0&&this.clearStates(Ce),(ie=ie.filter(function(un){return!un.includes(Jt)})).push(Ft),this.set("states",ie)}if(lt){var Ee=this.get("model").type;lt.setState(Ee,G,B,this)}},ve.prototype.clearStates=function(G){var B=this,$=B.getStates(),lt=B.get("shapeFactory"),Ft=B.get("model").type;G||(G=$),Object(l.x)(G)&&(G=[G]);var Jt=$.filter(function(ie){return G.indexOf(ie)===-1});B.set("states",Jt),G.forEach(function(ie){lt.setState(Ft,ie,!1,B)})},ve.prototype.getContainer=function(){return this.get("group")},ve.prototype.getKeyShape=function(){return this.get("keyShape")},ve.prototype.getModel=function(){return this.get("model")},ve.prototype.getType=function(){return this.get("type")},ve.prototype.getID=function(){return this.get("id")},ve.prototype.isItem=function(){return!0},ve.prototype.getStates=function(){return this.get("states")},ve.prototype.hasState=function(G){return this.getStates().indexOf(G)>=0},ve.prototype.refresh=function(){var G=this.get("model");this.updatePosition(G),this.updateShape(),this.afterUpdate(),this.clearCache()},ve.prototype.isOnlyMove=function(G){return!1},ve.prototype.update=function(G,B){B===void 0&&(B=!1);var $=this.get("model"),lt=$.visible,Ft=G.visible;lt!==Ft&&Ft!==void 0&&this.changeVisibility(Ft);var Jt=$.x,ie=$.y;G.x=isNaN(G.x)?$.x:G.x,G.y=isNaN(G.y)?$.y:G.y;var se=this.get("styles");if(G.stateStyles){var Ce=G.stateStyles;Object(l.A)(se,Ce),delete G.stateStyles}Object.assign($,G),B?this.updatePosition(G):(Jt===G.x&&ie===G.y||this.updatePosition(G),this.updateShape()),this.afterUpdate(),this.clearCache()},ve.prototype.updateShape=function(){var G=this.get("shapeFactory"),B=this.get("model"),$=B.type;if(G.shouldUpdate($)&&$===this.get("currentShape")){var lt=this.getShapeCfg(B);G.baseUpdate($,lt,this)}else this.draw();this.setOriginStyle(B),this.restoreStates(G,$)},ve.prototype.updatePosition=function(G){var B=this.get("model"),$=Object(l.s)(G.x)?B.x:G.x,lt=Object(l.s)(G.y)?B.y:G.y,Ft=this.get("group");Object(l.s)($)||Object(l.s)(lt)||(Ft.resetMatrix(),ft(Ft,{x:$,y:lt}),B.x=$,B.y=lt,this.clearCache())},ve.prototype.getBBox=function(){var G=this.get("bboxCache");return G||(G=this.calculateBBox(),this.set("bboxCache",G)),G},ve.prototype.getCanvasBBox=function(){var G=this.get("bboxCanvasCache");return G||(G=this.calculateCanvasBBox(),this.set("bboxCanvasCache",G)),G},ve.prototype.toFront=function(){this.get("group").toFront()},ve.prototype.toBack=function(){this.get("group").toBack()},ve.prototype.show=function(){this.changeVisibility(!0)},ve.prototype.hide=function(){this.changeVisibility(!1)},ve.prototype.changeVisibility=function(G){var B=this.get("group");G?B.show():B.hide(),this.set("visible",G)},ve.prototype.isVisible=function(){return this.get("visible")},ve.prototype.enableCapture=function(G){var B=this.get("group");B&&B.set("capture",G)},ve.prototype.destroy=function(){if(!this.destroyed){var G=this.get("animate"),B=this.get("group");G&&B.stopAnimate(),this.clearCache(),B.remove(),this._cfg=null,this.destroyed=!0}},ve}(),Yr={source:"start",target:"end"},Br=function(ve){function G(){return ve!==null&&ve.apply(this,arguments)||this}return Object(n.b)(G,ve),G.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},G.prototype.setEnd=function(B,$){var lt=Yr[B]+"Point",Ft=B+"Node",Jt=this.get(Ft);Jt&&!Jt.destroyed&&Jt.removeEdge(this),Object(l.w)($)?(this.set(lt,$),this.set(Ft,null)):($.addEdge(this),this.set(Ft,$),this.set(lt,null))},G.prototype.getLinkPoint=function(B,$,lt){var Ft=Yr[B]+"Point",Jt=B+"Node",ie=this.get(Ft);if(!ie){var se=this.get(Jt),Ce=B+"Anchor",Ee=this.getPrePoint(B,lt),un=$[Ce];Object(l.s)(un)||(ie=se.getLinkPointByAnchor(un)),ie=ie||se.getLinkPoint(Ee),Object(l.s)(ie.index)||this.set(B+"AnchorIndex",ie.index)}return ie},G.prototype.getPrePoint=function(B,$){if($&&$.length)return $[B==="source"?0:$.length-1];var lt=B==="source"?"target":"source";return this.getEndPoint(lt)},G.prototype.getEndPoint=function(B){var $=B+"Node",lt=Yr[B]+"Point",Ft=this.get($);return Ft?Ft.get("model"):this.get(lt)},G.prototype.getControlPointsByCenter=function(B){var $=this.getEndPoint("source"),lt=this.getEndPoint("target"),Ft=this.get("shapeFactory"),Jt=B.type;return Ft.getControlPoints(Jt,{startPoint:$,endPoint:lt})},G.prototype.getEndCenter=function(B){var $=B+"Node",lt=Yr[B]+"Point",Ft=this.get($);if(Ft){var Jt=Ft.getBBox();return{x:Jt.centerX,y:Jt.centerY}}return this.get(lt)},G.prototype.init=function(){ve.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},G.prototype.getShapeCfg=function(B){var $=this.get("linkCenter"),lt=ve.prototype.getShapeCfg.call(this,B);if($)lt.startPoint=this.getEndCenter("source"),lt.endPoint=this.getEndCenter("target");else{var Ft=lt.controlPoints||this.getControlPointsByCenter(lt);lt.startPoint=this.getLinkPoint("source",B,Ft),lt.endPoint=this.getLinkPoint("target",B,Ft)}return lt.sourceNode=this.get("sourceNode"),lt.targetNode=this.get("targetNode"),lt},G.prototype.getModel=function(){var B=this.get("model"),$=this.get("sourceNode"),lt=this.get("targetNode");return $?delete B.sourceNode:B.source=this.get("startPoint"),lt?delete B.targetNode:B.target=this.get("endPoint"),Object(l.x)(B.source)||Object(l.w)(B.source)||(B.source=B.source.getID()),Object(l.x)(B.target)||Object(l.w)(B.target)||(B.target=B.target.getID()),B},G.prototype.setSource=function(B){this.setEnd("source",B),this.set("source",B)},G.prototype.setTarget=function(B){this.setEnd("target",B),this.set("target",B)},G.prototype.getSource=function(){return this.get("source")},G.prototype.getTarget=function(){return this.get("target")},G.prototype.updatePosition=function(){},G.prototype.update=function(B,$){$===void 0&&($=!1);var lt=this.get("model"),Ft=lt.visible,Jt=B.visible;Ft!==Jt&&Jt!==void 0&&this.changeVisibility(Jt);var ie=this.get("styles");if(B.stateStyles){var se=B.stateStyles;Object(l.A)(ie,se),delete B.stateStyles}Object.assign(lt,B),this.updateShape(),this.afterUpdate(),this.clearCache()},G.prototype.destroy=function(){var B=this.get("sourceNode"),$=this.get("targetNode");B&&!B.destroyed&&B.removeEdge(this),$&&!$.destroyed&&$.removeEdge(this),ve.prototype.destroy.call(this)},G}(pr),Nr=function(ve){function G(){return ve!==null&&ve.apply(this,arguments)||this}return Object(n.b)(G,ve),G.prototype.getNearestPoint=function(B,$){for(var lt=0,Ft=B[0],Jt=ht(B[0],$),ie=0;ie<B.length;ie++){var se=B[ie],Ce=ht(se,$);Ce<Jt&&(Ft=se,Jt=Ce,lt=ie)}return Ft.anchorIndex=lt,Ft},G.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},G.prototype.getEdges=function(){return this.get("edges")},G.prototype.getInEdges=function(){var B=this;return this.get("edges").filter(function($){return $.get("target")===B})},G.prototype.getOutEdges=function(){var B=this;return this.get("edges").filter(function($){return $.get("source")===B})},G.prototype.getNeighbors=function(B){var $=this,lt=this.get("edges");return B==="target"?lt.filter(function(Ft){return Ft.getSource()===$}).map(function(Ft){return Ft.getTarget()}):B==="source"?lt.filter(function(Ft){return Ft.getTarget()===$}).map(function(Ft){return Ft.getSource()}):lt.map(function(Ft){return Ft.getSource()===$?Ft.getTarget():Ft.getSource()})},G.prototype.getLinkPointByAnchor=function(B){return this.getAnchorPoints()[B]},G.prototype.getLinkPoint=function(B){var $,lt,Ft=this.get("keyShape").get("type"),Jt=this.get("type"),ie=this.getBBox();Jt==="combo"?($=ie.centerX||(ie.maxX+ie.minX)/2,lt=ie.centerY||(ie.maxY+ie.minY)/2):($=ie.centerX,lt=ie.centerY);var se,Ce=this.getAnchorPoints();switch(Ft){case"circle":se=D({x:$,y:lt,r:ie.width/2},B);break;case"ellipse":se=Y({x:$,y:lt,rx:ie.width/2,ry:ie.height/2},B);break;default:se=C(ie,B)}var Ee=se;return Ce.length&&(Ee||(Ee=B),Ee=this.getNearestPoint(Ce,Ee)),Ee||(Ee={x:$,y:lt}),Ee},G.prototype.getAnchorPoints=function(){var B=this.get("anchorPointsCache");if(!B){B=[];var $=this.get("shapeFactory"),lt=this.getBBox(),Ft=this.get("model"),Jt=this.getShapeCfg(Ft),ie=Ft.type,se=$.getAnchorPoints(ie,Jt)||[];Object(l.f)(se,function(Ce,Ee){var un={x:lt.minX+Ce[0]*lt.width,y:lt.minY+Ce[1]*lt.height,anchorIndex:Ee};B.push(un)}),this.set("anchorPointsCache",B)}return B},G.prototype.addEdge=function(B){this.get("edges").push(B)},G.prototype.lock=function(){this.set("locked",!0)},G.prototype.unlock=function(){this.set("locked",!1)},G.prototype.hasLocked=function(){return this.get("locked")},G.prototype.removeEdge=function(B){var $=this.getEdges(),lt=$.indexOf(B);lt>-1&&$.splice(lt,1)},G.prototype.clearCache=function(){this.set("bboxCache",null),this.set("anchorPointsCache",null)},G.prototype.isOnlyMove=function(B){if(!B)return!1;var $=!Object(l.s)(B.x),lt=!Object(l.s)(B.y),Ft=Object.keys(B);return Ft.length===1&&($||lt)||Ft.length===2&&$&&lt},G}(pr),Xr=function(ve){function G(){return ve!==null&&ve.apply(this,arguments)||this}return Object(n.b)(G,ve),G.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},G.prototype.getShapeCfg=function(B){var $=this.get("styles"),lt=this.get("bbox");if($&&lt){var Ft=B,Jt={r:Math.hypot(lt.height,lt.width)/2||yt.defaultCombo.size[0]/2,width:lt.width||yt.defaultCombo.size[0],height:lt.height||yt.defaultCombo.size[1]};Ft.style=Object(n.a)(Object(n.a)(Object(n.a)({},$),B.style),Jt);var ie=B.padding||yt.defaultCombo.padding;return Object(l.t)(ie)?(Jt.r+=ie,Jt.width+=2*ie,Jt.height+=2*ie):(Jt.r+=ie[0],Jt.width+=ie[1]+ie[3]||2*ie[1],Jt.height+=ie[0]+ie[2]||2*ie[0]),this.set("sizeCache",Jt),Ft}return B},G.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var B=this.get("keyShape"),$=this.get("group"),lt=Cn(B,$);lt.centerX=(lt.minX+lt.maxX)/2,lt.centerY=(lt.minY+lt.maxY)/2;var Ft=this.get("sizeCache"),Jt=this.get("bboxCache")||{},ie=Jt.x,se=Jt.x;return Ft?(B.get("type")==="circle"?(lt.width=2*Ft.r,lt.height=2*Ft.r):(lt.width=Ft.width,lt.height=Ft.height),lt.minX=lt.centerX-lt.width/2,lt.minY=lt.centerY-lt.height/2,lt.maxX=lt.centerX+lt.width/2,lt.maxY=lt.centerY+lt.height/2):(lt.width=lt.maxX-lt.minX,lt.height=lt.maxY-lt.minY,lt.centerX=(lt.minX+lt.maxX)/2,lt.centerY=(lt.minY+lt.maxY)/2),lt.x=lt.minX,lt.y=lt.minY,lt.x===ie&&lt.y===se||this.set("anchorPointsCache",null),lt}},G.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},G.prototype.getNodes=function(){return this.get("nodes")},G.prototype.getCombos=function(){return this.get("combos")},G.prototype.addChild=function(B){switch(B.getType()){case"node":this.addNode(B);break;case"combo":this.addCombo(B);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},G.prototype.addCombo=function(B){return this.get("combos").push(B),!0},G.prototype.addNode=function(B){return this.get("nodes").push(B),!0},G.prototype.removeChild=function(B){switch(B.getType()){case"node":this.removeNode(B);break;case"combo":this.removeCombo(B);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},G.prototype.removeCombo=function(B){if(B){var $=this.getCombos(),lt=$.indexOf(B);return lt>-1&&($.splice(lt,1),!0)}},G.prototype.removeNode=function(B){if(B){var $=this.getNodes(),lt=$.indexOf(B);return lt>-1&&($.splice(lt,1),!0)}},G.prototype.isOnlyMove=function(B){return!1},G.prototype.getBBox=function(){return this.set("bboxCanvasCache",null),this.calculateCanvasBBox()},G.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null),this.set("anchorPointsCache",null)},G.prototype.destroy=function(){if(!this.destroyed){var B=this.get("animate"),$=this.get("group");B&&$.stopAnimate(),this.clearCache(),this.set("sizeCache",null),this.set("bbox",null),$.remove(),this._cfg=null,this.destroyed=!0}},G}(Nr),Kr=function(){function ve(G){this.graph=G,this.destroyed=!1}return ve.prototype.addItem=function(G,B){var $=this,lt=this.graph,Ft=G==="vedge"?"edge":G,Jt=lt.get(Ft+"Group")||lt.get("group"),ie=Object(l.I)(Ft),se=null,Ce=lt.get(Ft+Object(l.I)("stateStyles"))||{},Ee=lt.get("default"+ie);B.stateStyles&&(Ce=B.stateStyles),Ee&&Object(l.f)(Ee,function(Dn,zn){Object(l.v)(Dn)&&!Object(l.m)(Dn)?B[zn]=Object(l.e)({},Dn,B[zn]):Object(l.m)(Dn)?B[zn]=B[zn]||Object(l.c)(Ee[zn]):B[zn]=B[zn]||Ee[zn]});var un=lt.get(Ft+"Mapper");if(un){var xn=un(B);xn.stateStyles&&(Ce=xn.stateStyles,delete xn.stateStyles),Object(l.f)(xn,function(Dn,zn){Object(l.v)(Dn)&&!Object(l.m)(Dn)?B[zn]=Object(l.e)({},B[zn],Dn):B[zn]=xn[zn]||B[zn]})}if(lt.emit("beforeadditem",{type:G,model:B}),G==="edge"||G==="vedge"){var zt=void 0,Yt=void 0;if(zt=B.source,Yt=B.target,zt&&Object(l.x)(zt)&&(zt=lt.findById(zt)),Yt&&Object(l.x)(Yt)&&(Yt=lt.findById(Yt)),!zt||!Yt)return void console.warn("The source or target node of edge "+B.id+" does not exist!");zt.getType&&zt.getType()==="combo"&&(B.isComboEdge=!0),Yt.getType&&Yt.getType()==="combo"&&(B.isComboEdge=!0),se=new Br({model:B,source:zt,target:Yt,styles:Ce,linkCenter:lt.get("linkCenter"),group:Jt.addGroup()})}else if(G==="node")se=new Nr({model:B,styles:Ce,group:Jt.addGroup()});else if(G==="combo"){var Se=B.children,Wt=Sr(Se,lt);B.x=Wt.x||B.x||100*Math.random(),B.y=Wt.y||B.y||100*Math.random();var ue=Jt.addGroup();ue.setZIndex(B.depth);var vn=(se=new Xr({model:B,styles:Ce,bbox:Wt,group:ue})).getModel();(Se||[]).forEach(function(Dn){var zn=lt.findById(Dn.id);se.addChild(zn),Dn.depth=vn.depth+2}),B.collapsed&&setTimeout(function(){lt.collapseCombo(se),$.updateCombo(se,[])},250)}if(se)return lt.get(G+"s").push(se),lt.get("itemMap")[se.get("id")]=se,lt.emit("afteradditem",{item:se,model:B}),se},ve.prototype.updateItem=function(G,B){var $,lt,Ft=this.graph;if(Object(l.x)(G)&&(G=Ft.findById(G)),G&&!G.destroyed){var Jt="";G.getType&&(Jt=G.getType());var ie=Ft.get(Jt+"Mapper"),se=G.getModel(),Ce=G.isOnlyMove(B);if(ie){var Ee=ie(Object(l.e)({},se,B)),un=Object(l.e)({},se,Ee,B);Ee.stateStyles&&(G.set("styles",un.stateStyles),delete un.stateStyles),Object(l.f)(un,function(vn,Dn){B[Dn]=vn})}else Object(l.f)(B,function(vn,Dn){se[Dn]&&Object(l.v)(vn)&&!Object(l.m)(vn)&&(B[Dn]=Object(n.a)(Object(n.a)({},se[Dn]),B[Dn]))});if(Ft.emit("beforeupdateitem",{item:G,cfg:B}),Jt==="edge"){if(B.source){var xn=B.source;Object(l.x)(xn)&&(xn=Ft.findById(xn)),G.setSource(xn)}if(B.target){var zt=B.target;Object(l.x)(zt)&&(zt=Ft.findById(zt)),G.setTarget(zt)}G.update(B)}if(Jt==="node"||Jt==="combo"){G.update(B,Ce);var Yt=G.getEdges(),Se=Vr(B);if(Se&&Jt==="node")Object(l.f)(Yt,function(vn){vn.refresh()});else if(Se&&Jt==="combo"){var Wt=G.get("shapeFactory"),ue=se.type||"circle";(se.animate===void 0||B.animate===void 0?(lt=($=Wt[ue])===null||$===void 0?void 0:$.options)===null||lt===void 0?void 0:lt.animate:se.animate||B.animate)?setTimeout(function(){if(G&&!G.destroyed){var vn=G.getKeyShape();vn&&!vn.destroyed&&Object(l.f)(Yt,function(Dn){Dn&&!Dn.destroyed&&Dn.refresh()})}},201):Object(l.f)(Yt,function(vn){vn.refresh()})}}Ft.emit("afterupdateitem",{item:G,cfg:B})}},ve.prototype.updateCombo=function(G,B){var $,lt,Ft=this.graph;if(Object(l.x)(G)&&(G=Ft.findById(G)),G&&!G.destroyed){var Jt=Sr(B,Ft);G.set("bbox",Jt),G.update({x:Jt.x,y:Jt.y});var ie=G.getEdges()||[],se=ie.length,Ce=G.getModel(),Ee=G.get("shapeFactory"),un=Ce.type||"circle";if(Ce.animate===void 0?(lt=($=Ee[un])===null||$===void 0?void 0:$.options)===null||lt===void 0?void 0:lt.animate:Ce.animate)setTimeout(function(){if(G&&!G.destroyed){var Yt=G.getKeyShape();if(Yt&&!Yt.destroyed)for(var Se=0;Se<se;Se++){var Wt=ie[Se];Wt&&!Wt.destroyed&&Wt.refresh()}}},201);else for(var xn=0;xn<se;xn++){var zt=ie[xn];zt&&!zt.destroyed&&zt.refresh()}}},ve.prototype.collapseCombo=function(G){var B=this.graph;Object(l.x)(G)&&(G=B.findById(G));var $=G.getChildren();$.nodes.forEach(function(lt){B.hideItem(lt)}),$.combos.forEach(function(lt){B.hideItem(lt)})},ve.prototype.expandCombo=function(G){var B=this.graph;Object(l.x)(G)&&(G=B.findById(G));var $=G.getChildren();$.nodes.forEach(function(lt){B.showItem(lt)}),$.combos.forEach(function(lt){lt.getModel().collapsed?lt.show():B.showItem(lt)})},ve.prototype.removeItem=function(G){var B=this,$=this.graph;if(Object(l.x)(G)&&(G=$.findById(G)),G&&!G.destroyed){var lt=Object(l.c)(G.getModel());$.emit("beforeremoveitem",{item:lt});var Ft="";G.getType&&(Ft=G.getType());var Jt=$.get(Ft+"s"),ie=Jt.indexOf(G);if(ie>-1&&Jt.splice(ie,1),Ft==="edge"){var se=$.get("v"+Ft+"s"),Ce=se.indexOf(G);Ce>-1&&se.splice(Ce,1)}var Ee=G.get("id");delete $.get("itemMap")[Ee];var un=$.get("comboTrees"),xn=G.get("id");if(Ft==="node"){var zt=G.getModel().comboId;if(un){var Yt=un,Se=!1;un.forEach(function(_n){Se||Un(_n,function(Ze){if(Ze.id===xn&&Yt){var Te=Yt.indexOf(Ze);return Yt.splice(Te,1),Se=!0,!1}return Yt=Ze.children,!0})})}for(var Wt=(zn=G.getEdges()).length-1;Wt>=0;Wt--)$.removeItem(zn[Wt],!1);zt&&$.updateCombo(zt)}else if(Ft==="combo"){var ue,vn=G.getModel().parentId,Dn=!1;(un||[]).forEach(function(_n){Dn||Un(_n,function(Ze){return Ze.id!==xn||(ue=Ze,Dn=!0,!1)})}),ue.removed=!0,ue&&ue.children&&ue.children.forEach(function(_n){B.removeItem(_n.id)});var zn;for(Wt=(zn=G.getEdges()).length;Wt>=0;Wt--)$.removeItem(zn[Wt],!1);vn&&$.updateCombo(vn)}G.destroy(),$.emit("afterremoveitem",{item:lt})}},ve.prototype.setItemState=function(G,B,$){var lt=this.graph,Ft=B;Object(l.x)($)&&(Ft=B+":"+$),G.hasState(Ft)===$&&$||Object(l.x)($)&&G.hasState(Ft)||(lt.emit("beforeitemstatechange",{item:G,state:Ft,enabled:$}),G.setState(B,$),lt.autoPaint(),lt.emit("afteritemstatechange",{item:G,state:Ft,enabled:$}))},ve.prototype.priorityState=function(G,B){var $=this.graph,lt=G;Object(l.x)(G)&&(lt=$.findById(G)),this.setItemState(lt,B,!1),this.setItemState(lt,B,!0)},ve.prototype.clearItemStates=function(G,B){var $=this.graph;Object(l.x)(G)&&(G=$.findById(G)),$.emit("beforeitemstatesclear",{item:G,states:B}),G.clearStates(B),$.emit("afteritemstatesclear",{item:G,states:B})},ve.prototype.refreshItem=function(G){var B=this.graph;Object(l.x)(G)&&(G=B.findById(G)),B.emit("beforeitemrefresh",{item:G}),G.refresh(),B.emit("afteritemrefresh",{item:G})},ve.prototype.addCombos=function(G,B){var $=this,lt=this.graph;(G||[]).forEach(function(Jt){Kn(Jt,function(ie){var se;return B.forEach(function(Ce){Ce.id===ie.id&&(Ce.children=ie.children,Ce.depth=ie.depth,se=Ce)}),se&&$.addItem("combo",se),!0})});var Ft=lt.get("comboGroup");Ft&&Ft.sort()},ve.prototype.changeItemVisibility=function(G,B){var $=this,lt=this.graph;if(Object(l.x)(G)&&(G=lt.findById(G)),G){if(lt.emit("beforeitemvisibilitychange",{item:G,visible:B}),G.changeVisibility(B),G.getType&&G.getType()==="node"){var Ft=G.getEdges();Object(l.f)(Ft,function(Ee){(!B||Ee.get("source").isVisible()&&Ee.get("target").isVisible())&&$.changeItemVisibility(Ee,B)})}else if(G.getType&&G.getType()==="combo"){var Jt=lt.get("comboTrees"),ie=G.get("id"),se=[],Ce=!1;(Jt||[]).forEach(function(Ee){Ce||Ee.children&&Ee.children.length!==0&&Un(Ee,function(un){return un.id!==ie||(se=un.children,Ce=!0,!1)})}),se&&se.forEach(function(Ee){var un=lt.findById(Ee.id);$.changeItemVisibility(un,B)}),Ft=G.getEdges(),Object(l.f)(Ft,function(Ee){(!B||Ee.get("source").isVisible()&&Ee.get("target").isVisible())&&$.changeItemVisibility(Ee,B)})}return lt.emit("afteritemvisibilitychange",{item:G,visible:B}),G}console.warn("The item to be shown or hidden does not exist!")},ve.prototype.destroy=function(){this.graph=null,this.destroyed=!0},ve}(),ni=null,fi=function(){function ve(G){this.graph=G,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return ve.checkCache=function(G,B,$){if($[B]){var lt=$[B].indexOf(G);lt>=0&&$[B].splice(lt,1)}},ve.cacheState=function(G,B,$){$[B]||($[B]=[]),$[B].push(G)},ve.prototype.updateState=function(G,B,$){var lt=this,Ft=ve.checkCache,Jt=ve.cacheState;if(!G.destroyed){var ie=this.cachedStates,se=ie.enabled,Ce=ie.disabled;$?(Ft(G,B,Ce),Jt(G,B,se)):(Ft(G,B,se),Jt(G,B,Ce)),ni&&clearTimeout(ni),ni=setTimeout(function(){ni=null,lt.updateGraphStates()},16)}},ve.prototype.updateStates=function(G,B,$){var lt=this;Object(l.x)(B)?this.updateState(G,B,$):B.forEach(function(Ft){lt.updateState(G,Ft,$)})},ve.prototype.updateGraphStates=function(){var G=this.graph.get("states"),B=this.cachedStates;Object(l.f)(B.disabled,function($,lt){G[lt]&&(G[lt]=G[lt].filter(function(Ft){return $.indexOf(Ft)<0&&!$.destroyed}))}),Object(l.f)(B.enabled,function($,lt){if(G[lt]){var Ft={};G[lt].forEach(function(Jt){Jt.destroyed||(Ft[Jt.get("id")]=!0)}),$.forEach(function(Jt){if(!Jt.destroyed){var ie=Jt.get("id");Ft[ie]||(Ft[ie]=!0,G[lt].push(Jt))}})}else G[lt]=$}),this.graph.emit("graphstatechange",{states:G}),this.cachedStates={enabled:{},disabled:{}}},ve.prototype.destroy=function(){this.graph=null,this.cachedStates=null,ni&&clearTimeout(ni),ni=null,this.destroyed=!0},ve}(),$r=e(31),ci=function(G,B){return G&&B?G.replace(/\\?\{([^{}]+)\}/g,function($,lt){if($.charAt(0)==="\\")return $.slice(1);var Ft=B[lt];return Ft===0&&(Ft="0"),Ft||""}):G},Qr=function(G){var B=[];if(G.length<2)throw new Error("point length must largn than 2, now it's "+G.length);for(var $=0,lt=G;$<lt.length;$++){var Ft=lt[$],Jt=Ft.x,ie=Ft.y;B.push(Jt),B.push(ie)}var se=Object($r.a)(B);return se.unshift(["M",G[0].x,G[0].y]),se},gi=function(G,B,$,lt){$===void 0&&($=0),lt===void 0&&(lt=0);var Ft={x:(1-$)*G.x+$*B.x,y:(1-$)*G.y+$*B.y},Jt=[0,0];h.c.normalize(Jt,[B.x-G.x,B.y-G.y]),Jt&&(Jt[0]||Jt[1])||(Jt=[0,0]);var ie=[-Jt[1]*lt,Jt[0]*lt];return Ft.x+=ie[0],Ft.y+=ie[1],Ft},Oi=function(G,B){var $=G.length;if(!$)return"";for(var lt="",Ft=0;Ft<$;Ft++){var Jt=G[Ft];lt+=ci(Ft===0?"M{x} {y}":"L{x} {y}",Jt)}return B&&(lt+="Z"),lt},bi=function(G){var B=[];return G.forEach(function($){if($[0]!=="A")for(var lt=1;lt<$.length;lt+=2)B.push([$[lt],$[lt+1]]);else{var Ft=$.length;B.push([$[Ft-2],$[Ft-1]])}}),B},zi=function(G){if(G.length<2)throw new Error("point length must largn than 2, now it's "+G.length);var B=G[0],$=G[1],lt=G[G.length-1],Ft=G[G.length-2];G.unshift(lt),G.unshift(Ft),G.push(B),G.push($);for(var Jt=[],ie=1;ie<G.length-2;ie+=1){var se=G[ie-1].x,Ce=G[ie-1].y,Ee=G[ie].x,un=G[ie].y,xn=G[ie+1].x,zt=G[ie+1].y,Yt=Ee+(xn-se)/6,Se=un+(zt-Ce)/6,Wt=xn-((ie!==G.length-2?G[ie+2].x:xn)-Ee)/6,ue=zt-((ie!==G.length-2?G[ie+2].y:zt)-un)/6;Jt.push(["C",Yt,Se,Wt,ue,xn,zt])}return Jt.unshift(["M",lt.x,lt.y]),Jt},Qi=function(G,B){return h.c.scale([0,0],h.c.normalize([0,0],G),B)},io=function(G,B){var $=[G[1]-B[1],B[0]-G[0]],lt=Math.sqrt($[0]*$[0]+$[1]*$[1]);if(lt===0)throw new Error("p0 should not be equal to p1");return[$[0]/lt,$[1]/lt]},Wi=function(G,B){return[B[0]-G[0],B[1]-G[1]]};function Zi(ve,G){if(!ve||ve.length<1)return"";if(ve.length===1)return function(se){var Ce=[se[0][0],se[0][1]-G],Ee=[se[0][0],se[0][1]+G];return"M "+Ce+" A "+G+","+G+",0,0,0,"+Ee+" A "+G+","+G+",0,0,0,"+Ce}(ve);if(ve.length===2)return function(se){var Ce=h.c.scale([0,0],io(se[0],se[1]),G),Ee=h.c.scale([0,0],Ce,-1),un=h.c.add([0,0],se[0],Ce),xn=h.c.add([0,0],se[1],Ce),zt=h.c.add([0,0],se[1],Ee),Yt=h.c.add([0,0],se[0],Ee);return"M "+un+" L "+xn+" A "+[G,G,"0,0,0",zt].join(",")+" L "+Yt+" A "+[G,G,"0,0,0",un].join(",")}(ve);for(var B=new Array(ve.length),$=0;$<B.length;++$){var lt=$===0?ve[ve.length-1]:ve[$-1],Ft=ve[$],Jt=h.c.scale([0,0],io(lt,Ft),G);B[$]=[h.c.add([0,0],lt,Jt),h.c.add([0,0],Ft,Jt)]}var ie="A "+[G,G,"0,0,0,"].join(",");return(B=B.map(function(se,Ce){var Ee="";return Ce===0&&(Ee="M "+B[B.length-1][1]+" "),Ee+=ie+se[0]+" L "+se[1]})).join(" ")}function Pi(ve,G){var B,$,lt,Ft=ve.length;if(!ve||Ft<1)return"";if(Ft===1)return $=[(B=ve)[0][0],B[0][1]-G],lt=[B[0][0],B[0][1]+G],"M "+$+" A "+[G,G,"0,0,0",lt].join(",")+" A "+[G,G,"0,0,0",$].join(",");if(Ft===2)return function(Ee){var un=Wi(Ee[0],Ee[1]),xn=Qi(un,G),zt=h.c.add([0,0],Ee[0],h.c.scale([0,0],xn,-1)),Yt=h.c.add([0,0],Ee[1],xn),Se=1.2*G,Wt=Qi(h.c.normalize([0,0],un),Se),ue=h.c.scale([0,0],Wt,-1),vn=h.c.add([0,0],zt,ue),Dn=h.c.add([0,0],Yt,ue),zn=h.c.add([0,0],zt,Wt);return"M "+zt+" C "+[vn,Dn,Yt].join(",")+" S "+[zn,zt].join(",")+" Z"}(ve);for(var Jt=ve.map(function(Ee,un){var xn=ve[(un+1)%Ft];return{p:Ee,v:h.c.normalize([0,0],Wi(Ee,xn))}}),ie=0;ie<Jt.length;++ie){var se=ie>0?ie-1:Ft-1,Ce=h.c.normalize([0,0],h.c.add([0,0],Jt[se].v,h.c.scale([0,0],Jt[ie].v,-1)));Jt[ie].p=h.c.add([0,0],Jt[ie].p,h.c.scale([0,0],Ce,G))}return Jt.map(function(Ee){var un=Ee.p;return{x:un[0],y:un[1]}})}var no=function(G,B,$){return(G.y-$.y)*(B.x-$.x)-(G.x-$.x)*(B.y-$.y)},Mo=function(G){var B=G.map(function(Jt){return{x:Jt.getModel().x,y:Jt.getModel().y}});if(B.sort(function(Jt,ie){return Jt.x===ie.x?Jt.y-ie.y:Jt.x-ie.x}),B.length===1)return B;for(var $=[],lt=0;lt<B.length;lt++){for(;$.length>=2&&no($[$.length-2],$[$.length-1],B[lt])<=0;)$.pop();$.push(B[lt])}var Ft=[];for(lt=B.length-1;lt>=0;lt--){for(;Ft.length>=2&&no(Ft[Ft.length-2],Ft[Ft.length-1],B[lt])<=0;)Ft.pop();Ft.push(B[lt])}return Ft.pop(),$.pop(),$.concat(Ft)},ao={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function uo(ve,G,B){var $=!1,lt=function(se,Ce){return G.cells[se+Ce*G.width]},Ft=function(se,Ce){var Ee=0;return lt(se-1,Ce-1)>=B&&(Ee+=1),lt(se,Ce-1)>B&&(Ee+=2),lt(se-1,Ce)>B&&(Ee+=4),lt(se,Ce)>B&&(Ee+=8),Ee},Jt=function(se,Ce){for(var Ee,un,xn=se,zt=Ce,Yt=0;Yt<G.width*G.height;Yt++){if(Ee=xn,un=zt,ve.findIndex(function(Wt){return Wt.x===xn&&Wt.y===zt})>-1){if(ve[0].x===xn&&ve[0].y===zt)return!0}else ve.push({x:xn,y:zt});var Se=Ft(xn,zt);switch(Se){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:xn++;break;case 12:case 14:case 4:xn--;break;case 6:Ee===0&&(un===-1?xn-=1:xn+=1);break;case 1:case 13:case 5:zt--;break;case 9:Ee===1&&(un===0?zt-=1:zt+=1);break;case 10:case 8:case 11:zt++;break;default:return console.warn("Marching squares invalid state: "+Se),!0}}};this.march=function(){for(var ie=0;ie<G.width&&!$;ie+=1)for(var se=0;se<G.height&&!$;se+=1)lt(ie,se)>B&&Ft(ie,se)!==15&&($=Jt(ie,se));return $}}var xo=function(G,B){var $=Number.POSITIVE_INFINITY,lt=null;return G.forEach(function(Ft){var Jt=P(Ft,B);Jt>=0&&Jt<$&&(lt=Ft,$=Jt)}),lt};function oe(ve,G,B,$,lt){var Ft=function(Jt,ie,se){var Ce=null,Ee=Number.POSITIVE_INFINITY;return ie.forEach(function(un){var xn={x:Jt.getModel().x,y:Jt.getModel().y},zt={x:un.getModel().x,y:un.getModel().y},Yt=k(xn,zt),Se=new q(xn.x,xn.y,zt.x,zt.y),Wt=se.reduce(function(ue,vn){return P(vn,Se)>0?ue+1:ue},0);Yt*Math.pow(Wt+1,2)<Ee&&(Ce=un,Ee=Yt*Math.pow(Wt+1,2))}),Ce}(ve,B,G);return Ft===null?[]:function(Jt){for(var ie=[];Jt.length>0;){var se=Jt.pop();if(Jt.length===0){ie.push(se);break}var Ce=Jt.pop(),Ee=new q(se.x1,se.y1,Ce.x2,Ce.y2);xo(G,Ee)?(ie.push(se),Jt.push(Ce)):Jt.push(Ee)}return ie}(function(Jt,ie,se,Ce){var Ee=[],un=[];un.push(Jt);for(var xn=!0,zt=0,Yt=function(vn,Dn){var zn=!1;return Dn.forEach(function(_n){zn||(g(vn,{x:_n.x1,y:_n.y1})||g(vn,{x:_n.x2,y:_n.y2}))&&(zn=!0)}),zn},Se=function(vn,Dn){for(var zn=0,_n=Dn;zn<_n.length;zn++){var Ze=_n[zn].getBBox(),Te=[[Ze.x,Ze.y],[Ze.x+Ze.width,Ze.y],[Ze.x,Ze.y+Ze.height],[Ze.x+Ze.width,Ze.y+Ze.height]];if(vt(Te,vn.x,vn.y))return!0}return!1};xn&&zt<se;){xn=!1;for(var Wt=function(){var vn=un.pop(),Dn=xo(ie,vn);if(Dn){var zn=z(Dn,vn),_n=zn[0];if(zn[1]===2){var Ze=function(N){for(var mt=Ce,$t=Oe(Dn,mt,_n,N),me=Yt($t,un)||Yt($t,Ee),Zt=Se($t,ie);!me&&Zt&&mt>=1;)$t=Oe(Dn,mt/=1.5,_n,N),me=Yt($t,un)||Yt($t,Ee),Zt=Se($t,ie);!$t||me||N&&Zt||(un.push(new q(vn.x1,vn.y1,$t.x,$t.y)),un.push(new q($t.x,$t.y,vn.x2,vn.y2)),xn=!0)};Ze(!0),xn||Ze(!1)}}xn||Ee.push(vn),zt+=1};!xn&&un.length;)Wt()}for(;un.length;)Ee.push(un.pop());return Ee}(new q(ve.getModel().x,ve.getModel().y,Ft.getModel().x,Ft.getModel().y),G,$,lt))}var Kt=function(G,B,$){var lt=Object.assign(ao,$),Ft=H(G.map(function(Ze){return{x:Ze.getModel().x,y:Ze.getModel().y}}));G=G.sort(function(Ze,Te){return k({x:Ze.getModel().x,y:Ze.getModel().y},Ft)-k({x:Te.getModel().x,y:Te.getModel().y},Ft)});var Jt=[],ie=[];G.forEach(function(Ze){oe(Ze,B,Jt,lt.maxRoutingIterations,lt.morphBuffer).forEach(function(Te){ie.push(Te)}),Jt.push(Ze)});for(var se,Ce,Ee,un,xn,zt=function(Ze,Te,N){var mt={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},$t=[];Ze.forEach(function(he){$t.push(he.getBBox())}),Te.forEach(function(he){$t.push(he.getBBox())});for(var me=0,Zt=$t;me<Zt.length;me++){var de=Zt[me];mt.minX=(de.minX<mt.minX?de.minX:mt.minX)-N,mt.minY=(de.minY<mt.minY?de.minY:mt.minY)-N,mt.maxX=(de.maxX>mt.maxX?de.maxX:mt.maxX)+N,mt.maxY=(de.maxY>mt.maxY?de.maxY:mt.maxY)+N}return mt.width=mt.maxX-mt.minX,mt.height=mt.maxY-mt.minY,mt.x=mt.minX,mt.y=mt.minY,mt}(G,ie,lt.nodeR0),Yt=(se=zt.width,Ce=zt.height,Ee=lt.pixelGroupSize,un=Math.ceil(se/Ee),xn=Math.ceil(Ce/Ee),{cells:new Float32Array(Math.max(0,un*xn)).fill(0),width:un,height:xn}),Se=[],Wt=[],ue=0;ue<lt.maxMarchingIterations;ue++)if(te(G,B,ie,zt,Yt,lt),Wt=[],new uo(Se=[],Yt,lt.threshold).march()){var vn=Se.map(function(Ze){return{x:Math.round(Ze.x*lt.pixelGroupSize+zt.minX),y:Math.round(Ze.y*lt.pixelGroupSize+zt.minY)}});if(vn){var Dn=vn.length;if(lt.skip>1)for(Dn=Math.floor(vn.length/lt.skip);Dn<3&&lt.skip>1;)lt.skip-=1,Dn=Math.floor(vn.length/lt.skip);for(var zn=0,_n=0;_n<Dn;_n+=1,zn+=lt.skip)Wt.push({x:vn[zn].x,y:vn[zn].y})}if(Wt&&function(){for(var Ze=0,Te=G;Ze<Te.length;Ze++){var N=Te[Ze],mt=Wt.map(function($t){return[$t.x,$t.y]});if(!vt(mt,N.getBBox().centerX,N.getBBox().centerY))return!1}return!0}())return Wt;if(lt.threshold*=.9,ue<=.5*lt.maxMarchingIterations)lt.memberInfluenceFactor*=1.2,lt.edgeInfluenceFactor*=1.2;else{if(!(lt.nonMemberInfluenceFactor!==0&&B.length>0))break;lt.nonMemberInfluenceFactor*=.8}}return Wt};function te(ve,G,B,$,lt,Ft){function Jt(xn,zt){var Yt=Math.floor((xn-zt)/Ft.pixelGroupSize);return Yt<0?0:Yt}function ie(xn,zt){return xn*Ft.pixelGroupSize+zt}var se=(Ft.nodeR0-Ft.nodeR1)*(Ft.nodeR0-Ft.nodeR1),Ce=(Ft.edgeR0-Ft.edgeR1)*(Ft.edgeR0-Ft.edgeR1),Ee=function(zt,Yt){return[Math.min(Jt(zt.minX,Yt+$.minX),lt.width),Math.min(Jt(zt.minY,Yt+$.minY),lt.height),Math.min(Jt(zt.maxX,-Yt+$.minX),lt.width),Math.min(Jt(zt.maxY,-Yt+$.minY),lt.height)]},un=function(zt,Yt){for(var Se=zt.getBBox(),Wt=Ee(Se,Ft.nodeR1),ue=Wt[0],vn=Wt[1],Dn=Wt[2],zn=Wt[3],_n=vn;_n<zn;_n+=1)for(var Ze=ue;Ze<Dn;Ze+=1)if(!(Yt<0&&lt[Ze+_n*lt.width]<=0)){var Te=ie(Ze,$.minX),N=ie(_n,$.minY),mt=F({x:Te,y:N},{x:Se.minX,y:Se.minY,width:Se.width,height:Se.height});if(mt<Math.pow(Ft.nodeR1,2)){var $t=Math.sqrt(mt)-Ft.nodeR1;lt.cells[Ze+_n*lt.width]+=Yt*$t*$t}}};Ft.nodeInfluenceFactor&&ve.forEach(function(xn){un(xn,Ft.nodeInfluenceFactor/se)}),Ft.edgeInfluenceFactor&&B.forEach(function(xn){(function(zt,Yt){for(var Se=zt.getBBox(),Wt=Ee(Se,Ft.edgeR1),ue=Wt[0],vn=Wt[1],Dn=Wt[2],zn=Wt[3],_n=vn;_n<zn;_n+=1)for(var Ze=ue;Ze<Dn;Ze+=1)if(!(Yt<0&&lt.cells[Ze+_n*lt.width]<=0)){var Te=ie(Ze,$.minX),N=ie(_n,$.minY),mt=d({x:Te,y:N},zt);if(mt<Math.pow(Ft.edgeR1,2)){var $t=Math.sqrt(mt)-Ft.edgeR1;lt.cells[Ze+_n*lt.width]+=Yt*$t*$t}}})(xn,Ft.edgeInfluenceFactor/Ce)}),Ft.negativeNodeInfluenceFactor&&G.forEach(function(xn){un(xn,Ft.negativeNodeInfluenceFactor/se)})}function Oe(ve,G,B,$){var lt=ve.getBBox(),Ft=B[0],Jt=B[1],ie=B[2],se=B[3],Ce={topLeft:{x:lt.minX-G,y:lt.minY-G},topRight:{x:lt.maxX+G,y:lt.minY-G},bottomLeft:{x:lt.minX-G,y:lt.maxY+G},bottomRight:{x:lt.maxX+G,y:lt.maxY+G}},Ee=lt.height*lt.width;function un(xn,zt){return lt.width*(.5*(xn.y-lt.minY+(zt.y-lt.minY)))}if(Jt)return Ft?$?Ce.topLeft:Ce.bottomRight:ie?$?Ce.bottomLeft:Ce.topRight:un(Jt,se)<.5*Ee?Jt.y>se.y?$?Ce.topLeft:Ce.bottomRight:$?Ce.topRight:Ce.bottomLeft:Jt.y<se.y?$?Ce.bottomLeft:Ce.topRight:$?Ce.bottomRight:Ce.topLeft;if(se){if(Ft)return $?Ce.topRight:Ce.bottomLeft;if(ie)return $?Ce.bottomRight:Ce.topLeft}return un(Ft,ie)<.5*Ee?Ft.x>ie.x?$?Ce.topLeft:Ce.bottomRight:$?Ce.bottomLeft:Ce.topRight:Ft.x<ie.x?$?Ce.topRight:Ce.bottomLeft:$?Ce.bottomRight:Ce.topLeft}var Qe=function(){function ve(G,B){this.cfg=Object(l.e)(this.getDefaultCfg(),B),this.graph=G,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function($){return Object(l.x)($)?G.findById($):$}),this.nonMembers=this.cfg.nonMembers.map(function($){return Object(l.x)($)?G.findById($):$}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return ve.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},ve.prototype.setPadding=function(){var G=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+G:10+G,this.cfg.bubbleCfg={nodeR0:this.padding-G,nodeR1:this.padding-G,morphBuffer:this.padding-G}},ve.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},ve.prototype.calcPath=function(G,B){var $,lt,Ft;switch(this.type){case"round-convex":Ft=Zi(($=Mo(G)).map(function(Jt){return[Jt.x,Jt.y]}),this.padding),lt=Object($r.b)(Ft);break;case"smooth-convex":($=Mo(G)).length===2?(Ft=Zi($.map(function(Jt){return[Jt.x,Jt.y]}),this.padding),lt=Object($r.b)(Ft)):$.length>2&&(Ft=Pi($.map(function(Jt){return[Jt.x,Jt.y]}),this.padding),lt=zi(Ft));break;case"bubble":lt=($=Kt(G,B,this.cfg.bubbleCfg)).length>=2&&zi($)}return lt},ve.prototype.render=function(){this.group.addShape("path",{attrs:Object(n.a)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id}),this.group.toBack()},ve.prototype.addMember=function(G){if(G){Object(l.x)(G)&&(G=this.graph.findById(G)),this.members.push(G);var B=this.nonMembers.indexOf(G);return B>-1&&this.nonMembers.splice(B,1),this.updateData(this.members,this.nonMembers),!0}},ve.prototype.addNonMember=function(G){if(G){Object(l.x)(G)&&(G=this.graph.findById(G)),this.nonMembers.push(G);var B=this.members.indexOf(G);return B>-1&&this.members.splice(B,1),this.updateData(this.members,this.nonMembers),!0}},ve.prototype.removeMember=function(G){if(G){Object(l.x)(G)&&(G=this.graph.findById(G));var B=this.members.indexOf(G);return B>-1&&(this.members.splice(B,1),this.updateData(this.members,this.nonMembers),!0)}},ve.prototype.removeNonMember=function(G){if(G){Object(l.x)(G)&&(G=this.graph.findById(G));var B=this.nonMembers.indexOf(G);return B>-1&&(this.nonMembers.splice(B,1),this.updateData(this.members,this.nonMembers),!0)}},ve.prototype.updateData=function(G,B){var $=this;this.group.findById(this.id).remove(),G&&(this.members=G.map(function(lt){return Object(l.x)(lt)?$.graph.findById(lt):lt})),B&&(this.nonMembers=B.map(function(lt){return Object(l.x)(lt)?$.graph.findById(lt):lt})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},ve.prototype.updateStyle=function(G){this.group.findById(this.id).attr(Object(n.a)({},G))},ve.prototype.updateCfg=function(G){var B=this;this.cfg=Object(l.e)(this.cfg,G),this.id=this.cfg.id,this.group=this.cfg.group,G.members&&(this.members=this.cfg.members.map(function($){return Object(l.x)($)?B.graph.findById($):$})),G.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function($){return Object(l.x)($)?B.graph.findById($):$})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},ve.prototype.contain=function(G){var B,$,lt=this,Ft=(B=Object(l.x)(G)?this.graph.findById(G):G).getKeyShape();if(B.get("type")==="path")$=bi(Ft.attr("path"));else{var Jt=Ft.getCanvasBBox();$=[[Jt.minX,Jt.minY],[Jt.maxX,Jt.minY],[Jt.maxX,Jt.maxY],[Jt.minX,Jt.maxY]]}return $=$.map(function(ie){var se=lt.graph.getPointByCanvas(ie[0],ie[1]);return[se.x,se.y]}),Et($,bi(this.path))},ve.prototype.destroy=function(){this.group.remove(),this.cfg=null},ve}(),On=h.a.transform,Vn=function(ve){function G(B){var $=ve.call(this)||this;return $.cfg=Object(l.e)($.getDefaultCfg(),B),$.init(),$.animating=!1,$.destroyed=!1,$.cfg.enabledStack&&($.undoStack=new M.Stack($.cfg.maxStep),$.redoStack=new M.Stack($.cfg.maxStep)),$}return Object(n.b)(G,ve),G.prototype.init=function(){this.initCanvas();var B=new ye(this),$=new gt(this),lt=new Kr(this),Ft=new fi(this);this.set({viewController:B,modeController:$,itemController:lt,stateController:Ft}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},G.prototype.initGroups=function(){var B=this.get("canvas"),$=this.get("canvas").get("el").id,lt=B.addGroup({id:$+"-root",className:yt.rootContainerClassName});if(this.get("groupByTypes")){var Ft=lt.addGroup({id:$+"-edge",className:yt.edgeContainerClassName}),Jt=lt.addGroup({id:$+"-node",className:yt.nodeContainerClassName}),ie=lt.addGroup({id:$+"-combo",className:yt.comboContainerClassName});ie.toBack(),this.set({nodeGroup:Jt,edgeGroup:Ft,comboGroup:ie})}var se=lt.addGroup({id:$+"-delegate",className:yt.delegateContainerClassName});this.set({delegateGroup:se}),this.set("group",lt)},G.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[]}},G.prototype.set=function(B,$){return Object(l.w)(B)?this.cfg=Object(n.a)(Object(n.a)({},this.cfg),B):this.cfg[B]=$,this},G.prototype.get=function(B){return this.cfg[B]},G.prototype.getGroup=function(){return this.get("group")},G.prototype.getContainer=function(){return this.get("container")},G.prototype.getMinZoom=function(){return this.get("minZoom")},G.prototype.setMinZoom=function(B){return this.set("minZoom",B)},G.prototype.getMaxZoom=function(){return this.get("maxZoom")},G.prototype.setMaxZoom=function(B){return this.set("maxZoom",B)},G.prototype.getWidth=function(){return this.get("width")},G.prototype.getHeight=function(){return this.get("height")},G.prototype.clearItemStates=function(B,$){Object(l.x)(B)&&(B=this.findById(B));var lt=this.get("itemController");$||($=B.get("states")),lt.clearItemStates(B,$),this.get("stateController").updateStates(B,$,!1)},G.prototype.node=function(B){typeof B=="function"&&this.set("nodeMapper",B)},G.prototype.edge=function(B){typeof B=="function"&&this.set("edgeMapper",B)},G.prototype.combo=function(B){typeof B=="function"&&this.set("comboMapper",B)},G.prototype.findById=function(B){return this.get("itemMap")[B]},G.prototype.find=function(B,$){var lt,Ft=this.get(B+"s");return Object(l.f)(Ft,function(Jt,ie){if($(Jt,ie))return lt=Jt}),lt},G.prototype.findAll=function(B,$){var lt=[];return Object(l.f)(this.get(B+"s"),function(Ft,Jt){$(Ft,Jt)&&lt.push(Ft)}),lt},G.prototype.findAllByState=function(B,$){return this.findAll(B,function(lt){return lt.hasState($)})},G.prototype.translate=function(B,$){var lt=this.get("group"),Ft=Object(l.c)(lt.getMatrix());Ft||(Ft=[1,0,0,0,1,0,0,0,1]),Ft=On(Ft,[["t",B,$]]),lt.setMatrix(Ft),this.emit("viewportchange",{action:"translate",matrix:lt.getMatrix()}),this.autoPaint()},G.prototype.moveTo=function(B,$){var lt=this.get("group");Bt(lt,{x:B,y:$}),this.emit("viewportchange",{action:"move",matrix:lt.getMatrix()})},G.prototype.fitView=function(B){B&&this.set("fitViewPadding",B),this.get("viewController").fitView(),this.autoPaint()},G.prototype.fitCenter=function(){this.get("viewController").fitCenter(),this.autoPaint()},G.prototype.addBehaviors=function(B,$){return this.get("modeController").manipulateBehaviors(B,$,!0),this},G.prototype.removeBehaviors=function(B,$){return this.get("modeController").manipulateBehaviors(B,$,!1),this},G.prototype.updateBehavior=function(B,$,lt){return this.get("modeController").updateBehavior(B,$,lt),this},G.prototype.zoom=function(B,$){var lt=this.get("group"),Ft=Object(l.c)(lt.getMatrix()),Jt=this.get("minZoom"),ie=this.get("maxZoom");Ft||(Ft=[1,0,0,0,1,0,0,0,1]),Ft=On(Ft,$?[["t",-$.x,-$.y],["s",B,B],["t",$.x,$.y]]:[["s",B,B]]),Jt&&Ft[0]<Jt||ie&&Ft[0]>ie||(lt.setMatrix(Ft),this.emit("viewportchange",{action:"zoom",matrix:Ft}),this.autoPaint())},G.prototype.zoomTo=function(B,$){var lt=B/this.getZoom();this.zoom(lt,$)},G.prototype.focusItem=function(B,$,lt){var Ft=this.get("viewController"),Jt=!1;$?Jt=!0:$===void 0&&(Jt=this.get("animate"));var ie={};lt?ie=lt:lt===void 0&&(ie=this.get("animateCfg")),Ft.focus(B,Jt,ie),this.autoPaint()},G.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},G.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},G.prototype.getPointByClient=function(B,$){return this.get("viewController").getPointByClient(B,$)},G.prototype.getClientByPoint=function(B,$){return this.get("viewController").getClientByPoint(B,$)},G.prototype.getPointByCanvas=function(B,$){return this.get("viewController").getPointByCanvas(B,$)},G.prototype.getCanvasByPoint=function(B,$){return this.get("viewController").getCanvasByPoint(B,$)},G.prototype.showItem=function(B,$){$===void 0&&($=!0);var lt=this.get("itemController").changeItemVisibility(B,!0);if($&&this.get("enabledStack")){var Ft=lt.getID(),Jt={},ie={};switch(lt.getType()){case"node":Jt.nodes=[{id:Ft,visible:!1}],ie.nodes=[{id:Ft,visible:!0}];break;case"edge":Jt.nodes=[{id:Ft,visible:!1}],ie.edges=[{id:Ft,visible:!0}];break;case"combo":Jt.nodes=[{id:Ft,visible:!1}],ie.combos=[{id:Ft,visible:!0}]}this.pushStack("visible",{before:Jt,after:ie})}},G.prototype.hideItem=function(B,$){$===void 0&&($=!0);var lt=this.get("itemController").changeItemVisibility(B,!1);if($&&this.get("enabledStack")){var Ft=lt.getID(),Jt={},ie={};switch(lt.getType()){case"node":Jt.nodes=[{id:Ft,visible:!0}],ie.nodes=[{id:Ft,visible:!1}];break;case"edge":Jt.nodes=[{id:Ft,visible:!0}],ie.edges=[{id:Ft,visible:!1}];break;case"combo":Jt.nodes=[{id:Ft,visible:!0}],ie.combos=[{id:Ft,visible:!1}]}this.pushStack("visible",{before:Jt,after:ie})}},G.prototype.refreshItem=function(B){this.get("itemController").refreshItem(B)},G.prototype.setAutoPaint=function(B){this.set("autoPaint",B),this.get("canvas").set("autoDraw",B)},G.prototype.remove=function(B,$){$===void 0&&($=!0),this.removeItem(B,$)},G.prototype.removeItem=function(B,$){$===void 0&&($=!0);var lt=B;if(Object(l.x)(B)&&(lt=this.findById(B)),!lt&&Object(l.x)(B))console.warn("The item to be removed does not exist!");else if(lt){var Ft="";if(lt.getType&&(Ft=lt.getType()),$&&this.get("enabledStack")){var Jt=Object(n.a)(Object(n.a)({},lt.getModel()),{itemType:Ft}),ie={};switch(Ft){case"node":ie.nodes=[Jt],ie.edges=[];for(var se=lt.getEdges(),Ce=se.length-1;Ce>=0;Ce--)ie.edges.push(Object(n.a)(Object(n.a)({},se[Ce].getModel()),{itemType:"edge"}));break;case"edge":ie.edges=[Jt];break;case"combo":ie.combos=[Jt]}this.pushStack("delete",{before:ie,after:{}})}if(Ft==="node"&&lt.getModel().comboId&&this.updateComboTree(lt),this.get("itemController").removeItem(lt),Ft==="combo"){var Ee=er(this.get("comboTrees"));this.set("comboTrees",Ee)}}},G.prototype.addItem=function(B,$,lt,Ft){lt===void 0&&(lt=!0),Ft===void 0&&(Ft=!0);var Jt=this.get("comboSorted");this.set("comboSorted",Jt&&!Ft);var ie=this.get("itemController");if(!$.id||!this.findById($.id)){var se,Ce=this.get("comboTrees");if(Ce||(Ce=[]),B==="combo"){var Ee=this.get("itemMap"),un=!1;if(Ce.forEach(function(zn){un||Kn(zn,function(_n){if($.parentId===_n.id){un=!0;var Ze=Object(n.a)({id:$.id,depth:_n.depth+2},$);_n.children?_n.children.push(Ze):_n.children=[Ze],$.depth=Ze.depth,se=ie.addItem(B,$)}var Te=Ee[_n.id];return un&&Te&&Te.getType&&Te.getType()==="combo"&&ie.updateCombo(Te,_n.children),!0})}),!un){var xn=Object(n.a)({id:$.id,depth:0},$);$.depth=xn.depth,Ce.push(xn),se=ie.addItem(B,$)}this.set("comboTrees",Ce)}else if(B==="node"&&Object(l.x)($.comboId)&&Ce){var zt;if((zt=this.findById($.comboId))&&zt.getType&&zt.getType()!=="combo")return void console.warn("'"+$.comboId+"' is a not id of a combo in the graph, the node will be added without combo.");se=ie.addItem(B,$);var Yt=this.get("itemMap"),Se=!1,Wt=!1;(Ce||[]).forEach(function(zn){Wt||Se||Kn(zn,function(_n){if(_n.id===$.id)return Wt=!0,!1;if($.comboId===_n.id&&!Wt){Se=!0;var Ze=Object(l.c)($);Ze.itemType="node",_n.children?_n.children.push(Ze):_n.children=[Ze],$.depth=_n.depth+1}return Se&&Yt[_n.id].getType&&Yt[_n.id].getType()==="combo"&&ie.updateCombo(Yt[_n.id],_n.children),!0})})}else se=ie.addItem(B,$);(B==="node"&&$.comboId||B==="combo"&&$.parentId)&&(zt=this.findById($.comboId||$.parentId))&&zt.addChild(se);var ue=this.get("combos");if(ue&&ue.length>0&&this.sortCombos(),this.autoPaint(),lt&&this.get("enabledStack")){var vn=Object(n.a)(Object(n.a)({},se.getModel()),{itemType:B}),Dn={};switch(B){case"node":Dn.nodes=[vn];break;case"edge":Dn.edges=[vn];break;case"combo":Dn.combos=[vn]}this.pushStack("add",{before:{},after:Dn})}return se}console.warn("This item exists already. Be sure the id %c"+$.id+"%c is unique.","font-size: 20px; color: red;","")},G.prototype.add=function(B,$,lt,Ft){return lt===void 0&&(lt=!0),Ft===void 0&&(Ft=!0),this.addItem(B,$,lt,Ft)},G.prototype.updateItem=function(B,$,lt){var Ft=this;lt===void 0&&(lt=!0);var Jt,ie=this.get("itemController");Jt=Object(l.x)(B)?this.findById(B):B;var se=Object(l.c)(Jt.getModel()),Ce="";Jt.getType&&(Ce=Jt.getType());var Ee=Object(n.d)(Jt.getStates());if(Ce==="combo"&&Object(l.f)(Ee,function(Yt){return Ft.setItemState(Jt,Yt,!1)}),ie.updateItem(Jt,$),Ce==="combo"&&Object(l.f)(Ee,function(Yt){return Ft.setItemState(Jt,Yt,!0)}),lt&&this.get("enabledStack")){var un={nodes:[],edges:[],combos:[]},xn={nodes:[],edges:[],combos:[]},zt=Object(n.a)({id:se.id},$);switch(Ce){case"node":un.nodes.push(se),xn.nodes.push(zt);break;case"edge":un.edges.push(se),xn.edges.push(zt);break;case"combo":un.combos.push(se),xn.combos.push(zt)}Ce==="node"&&un.nodes.push(se),this.pushStack("update",{before:un,after:xn})}},G.prototype.update=function(B,$,lt){lt===void 0&&(lt=!0),this.updateItem(B,$,lt)},G.prototype.setItemState=function(B,$,lt){Object(l.x)(B)&&(B=this.findById(B)),this.get("itemController").setItemState(B,$,lt);var Ft=this.get("stateController");Object(l.x)(lt)?Ft.updateState(B,$+":"+lt,!0):Ft.updateState(B,$,lt)},G.prototype.priorityState=function(B,$){this.get("itemController").priorityState(B,$)},G.prototype.data=function(B){this.set("data",B)},G.prototype.render=function(){var B=this;this.set("comboSorted",!1);var $=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!$)throw new Error("data must be defined first");var lt=$.nodes,Ft=lt===void 0?[]:lt,Jt=$.edges,ie=Jt===void 0?[]:Jt,se=$.combos,Ce=se===void 0?[]:se;if(this.clear(),this.emit("beforerender"),Object(l.f)(Ft,function(zt){B.add("node",zt,!1,!1)}),Ce&&Ce.length!==0){var Ee=nr(Ce,Ft);this.set("comboTrees",Ee),B.addCombos(Ce)}Object(l.f)(ie,function(zt){B.add("edge",zt,!1,!1)});var un=B.get("animate");(B.get("fitView")||B.get("fitCenter"))&&B.set("animate",!1);var xn=B.get("layoutController");if(xn){if(xn.layout(function(){B.get("fitView")?B.fitView():B.get("fitCenter")&&B.fitCenter(),B.autoPaint(),B.emit("afterrender"),(B.get("fitView")||B.get("fitCenter"))&&B.set("animate",un)}),this.destroyed)return}else B.get("fitView")&&B.fitView(),B.get("fitCenter")&&B.fitCenter(),B.emit("afterrender"),B.set("animate",un);this.get("groupByTypes")||(Ce&&Ce.length!==0?this.sortCombos():$.nodes&&$.edges&&$.nodes.length<$.edges.length?this.getNodes().forEach(function(zt){zt.toFront()}):this.getEdges().forEach(function(zt){zt.toBack()})),this.get("enabledStack")&&this.pushStack("render")},G.prototype.read=function(B){this.data(B),this.render()},G.prototype.diffItems=function(B,$,lt){var Ft,Jt=this,ie=this.get("itemMap");Object(l.f)(lt,function(se){if(Ft=ie[se.id]){if(Jt.get("animate")&&B==="node"){var Ce=Ft.getContainer().getMatrix();Ce||(Ce=[1,0,0,0,1,0,0,0,1]),Ft.set("originAttrs",{x:Ce[6],y:Ce[7]})}Jt.updateItem(Ft,se,!1)}else Ft=Jt.addItem(B,se,!1);Ft&&$[B+"s"].push(Ft)})},G.prototype.changeData=function(B,$){$===void 0&&($=!0);var lt=this;if(!B)return this;$&&this.get("enabledStack")&&this.pushStack("changedata",{before:lt.save(),after:B}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(Yt){return lt.clearItemStates(Yt)}),this.getEdges().map(function(Yt){return lt.clearItemStates(Yt)});var Ft=this.get("canvas"),Jt=Ft.get("localRefresh");Ft.set("localRefresh",!1),lt.get("data")||(lt.data(B),lt.render());var ie=this.get("itemMap"),se={nodes:[],edges:[]},Ce=B.combos;if(Ce){var Ee=nr(Ce,B.nodes);this.set("comboTrees",Ee)}this.diffItems("node",se,B.nodes),Object(l.f)(ie,function(Yt,Se){ie[Se].getModel().depth=0,Yt.getType&&Yt.getType()==="edge"||(Yt.getType&&Yt.getType()==="combo"?(delete ie[Se],Yt.destroy()):se.nodes.indexOf(Yt)<0&&(delete ie[Se],lt.remove(Yt,!1)))});for(var un=this.getCombos(),xn=un.length-1;xn>=0;xn--)un[xn].destroyed&&un.splice(xn,1);Ce&&(lt.addCombos(Ce),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",se,B.edges),Object(l.f)(ie,function(Yt,Se){(!Yt.getType||Yt.getType()!=="node"&&Yt.getType()!=="combo")&&se.edges.indexOf(Yt)<0&&(delete ie[Se],lt.remove(Yt,!1))}),this.set({nodes:se.nodes,edges:se.edges});var zt=this.get("layoutController");return zt&&(zt.changeData(),lt.get("animate")&&!zt.getLayoutType()?lt.positionsAnimate():lt.autoPaint()),setTimeout(function(){Ft.set("localRefresh",Jt)},16),this},G.prototype.addCombos=function(B){var $=this.get("comboTrees");this.get("itemController").addCombos($,B)},G.prototype.createCombo=function(B,$){var lt=this;this.set("comboSorted",!1);var Ft,Jt="";if(B){if(Object(l.x)(B))Jt=B,Ft={id:B};else{if(!(Jt=B.id))return void console.warn("Create combo failed. Please assign a unique string id for the adding combo.");Ft=B}var ie=$.map(function(Ce){var Ee=lt.findById(Ce),un="";Ee.getType&&(un=Ee.getType());var xn={id:Ee.getID(),itemType:un};return un==="combo"?xn.parentId=Jt:un==="node"&&(xn.comboId=Jt),xn});Ft.children=ie,this.addItem("combo",Ft,!1),this.set("comboSorted",!1);var se=this.get("comboTrees");(se||[]).forEach(function(Ce){Kn(Ce,function(Ee){return Ee.id!==Jt||(Ee.itemType="combo",Ee.children=ie,!1)})}),se&&this.sortCombos()}},G.prototype.uncombo=function(B){var $=this,lt=B;if(Object(l.x)(B)&&(lt=this.findById(B)),!lt||lt.getType&&lt.getType()!=="combo")console.warn("The item is not a combo!");else{var Ft=lt.getModel().parentId,Jt=this.get("comboTrees");Jt||(Jt=[]);var ie,se=this.get("itemMap"),Ce=lt.get("id"),Ee=[],un=this.get("combos"),xn=this.findById(Ft);if(Jt.forEach(function(Yt){ie||Kn(Yt,function(Se){if(Se.id===Ce){ie=Se,lt.getEdges().forEach(function(ue){$.removeItem(ue,!1)});var Wt=un.indexOf(B);un.splice(Wt,1),delete se[Ce],lt.destroy()}return!Ft||!ie||Se.id!==Ft||(xn.removeCombo(lt),(Wt=(Ee=Se.children).indexOf(ie))!==-1&&Ee.splice(Wt,1),ie.children.forEach(function(ue){var vn=$.findById(ue.id),Dn=vn.getModel();vn.getType&&vn.getType()==="combo"?(ue.parentId=Ft,delete ue.comboId,Dn.parentId=Ft,delete Dn.comboId):vn.getType&&vn.getType()==="node"&&(ue.comboId=Ft,Dn.comboId=Ft),xn.addChild(vn),Ee.push(ue)}),!1)})}),!Ft&&ie){var zt=Jt.indexOf(ie);Jt.splice(zt,1),ie.children.forEach(function(Yt){Yt.parentId=void 0,$.findById(Yt.id).getModel().parentId=void 0,Yt.itemType!=="node"&&Jt.push(Yt)})}}},G.prototype.updateCombos=function(){var B=this,$=this.get("comboTrees"),lt=this.get("itemController"),Ft=this.get("itemMap");($||[]).forEach(function(Jt){Kn(Jt,function(ie){if(!ie)return!0;var se=Ft[ie.id];if(se&&se.getType&&se.getType()==="combo"){var Ce=Object(n.d)(se.getStates());Object(l.f)(Ce,function(Ee){return B.setItemState(se,Ee,!1)}),lt.updateCombo(se,ie.children),Object(l.f)(Ce,function(Ee){return B.setItemState(se,Ee,!0)})}return!0})}),this.sortCombos()},G.prototype.updateCombo=function(B){var $,lt=this,Ft=B;if(Object(l.x)(B)&&(Ft=this.findById(B)),!Ft||Ft.getType&&Ft.getType()!=="combo")console.warn("The item to be updated is not a combo!");else{$=Ft.get("id");var Jt=this.get("comboTrees"),ie=this.get("itemController"),se=this.get("itemMap");(Jt||[]).forEach(function(Ce){Kn(Ce,function(Ee){if(!Ee)return!0;var un=se[Ee.id];if($===Ee.id&&un&&un.getType&&un.getType()==="combo"){var xn=Object(n.d)(un.getStates());Object(l.f)(xn,function(zt){un.getStateStyle(zt)&&lt.setItemState(un,zt,!1)}),ie.updateCombo(un,Ee.children),Object(l.f)(xn,function(zt){un.getStateStyle(zt)&&lt.setItemState(un,zt,!0)}),$&&($=Ee.parentId)}return!0})})}},G.prototype.updateComboTree=function(B,$,lt){lt===void 0&&(lt=!0);var Ft;this.set("comboSorted",!1);var Jt,ie=(Ft=Object(l.x)(B)?this.findById(B):B).getModel(),se=ie.comboId||ie.parentId,Ce="";if(Ft.getType&&(Ce=Ft.getType()),$&&Ce==="combo"){var Ee,un=this.get("comboTrees"),xn=!0;if((un||[]).forEach(function(ue){Ee||Un(ue,function(vn){if(!Ee)return vn.id===Ft.getID()&&(Ee=vn),!0})}),Un(Ee,function(ue){return ue.id!==$||(xn=!1,!1)}),!xn)return void console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!")}if(lt&&this.get("enabledStack")){var zt={},Yt={};Ce==="combo"?(zt.combos=[{id:ie.id,parentId:ie.parentId}],Yt.combos=[{id:ie.id,parentId:$}]):Ce==="node"&&(zt.nodes=[{id:ie.id,parentId:ie.comboId}],Yt.nodes=[{id:ie.id,parentId:$}]),this.pushStack("updateComboTree",{before:zt,after:Yt})}if(ie.parentId||ie.comboId){var Se=this.findById(ie.parentId||ie.comboId);Se&&Se.removeChild(Ft)}Ce==="combo"?ie.parentId=$:Ce==="node"&&(ie.comboId=$),$&&(Jt=this.findById($))&&Jt.addChild(Ft),se&&(Jt=this.findById(se))&&Jt.removeChild(Ft);var Wt=er(this.get("comboTrees"),ie.id,$);this.set("comboTrees",Wt),this.updateCombos()},G.prototype.save=function(){var B=[],$=[],lt=[];return Object(l.f)(this.get("nodes"),function(Ft){B.push(Ft.getModel())}),Object(l.f)(this.get("edges"),function(Ft){$.push(Ft.getModel())}),Object(l.f)(this.get("combos"),function(Ft){lt.push(Ft.getModel())}),{nodes:B,edges:$,combos:lt}},G.prototype.changeSize=function(B,$){return this.get("viewController").changeSize(B,$),this},G.prototype.refresh=function(){if(this.emit("beforegraphrefresh"),this.get("animate"))this.positionsAnimate();else{var B=this.get("nodes"),$=this.get("edges"),lt=this.get("edges");Object(l.f)(B,function(Ft){Ft.refresh()}),Object(l.f)($,function(Ft){Ft.refresh()}),Object(l.f)(lt,function(Ft){Ft.refresh()})}this.emit("aftergraphrefresh"),this.autoPaint()},G.prototype.getNodes=function(){return this.get("nodes")},G.prototype.getEdges=function(){return this.get("edges")},G.prototype.getCombos=function(){return this.get("combos")},G.prototype.getComboChildren=function(B){if(Object(l.x)(B)&&(B=this.findById(B)),B&&(!B.getType||B.getType()==="combo"))return B.getChildren();console.warn("The combo does not exist!")},G.prototype.positionsAnimate=function(){var B=this;B.emit("beforeanimate");var $=B.get("animateCfg"),lt=$.onFrame,Ft=B.getNodes(),Jt=Ft.map(function(ie){var se=ie.getModel();return{id:se.id,x:se.x,y:se.y}});B.isAnimating()&&B.stopAnimate(),B.get("canvas").animate(function(ie){Object(l.f)(Jt,function(se){var Ce=B.findById(se.id);if(Ce&&!Ce.destroyed){var Ee=Ce.get("originAttrs"),un=Ce.get("model");if(!Ee){var xn=Ce.getContainer().getMatrix();xn||(xn=[1,0,0,0,1,0,0,0,1]),Ee={x:xn[6],y:xn[7]},Ce.set("originAttrs",Ee)}if(lt){var zt=lt(Ce,ie,se,Ee);Ce.set("model",Object.assign(un,zt))}else un.x=Ee.x+(se.x-Ee.x)*ie,un.y=Ee.y+(se.y-Ee.y)*ie}}),B.refreshPositions()},{duration:$.duration,easing:$.easing,callback:function(){Object(l.f)(Ft,function(se){se.set("originAttrs",null)}),$.callback&&$.callback(),B.emit("afteranimate"),B.animating=!1}})},G.prototype.refreshPositions=function(){this.emit("beforegraphrefreshposition");var B,$=this.get("nodes"),lt=this.get("edges"),Ft=this.get("vedges"),Jt=this.get("combos"),ie={};Object(l.f)($,function(se){B=se.getModel();var Ce=se.get("originAttrs");Ce&&B.x===Ce.x&&B.y===Ce.y||(se.updatePosition({x:B.x,y:B.y}),ie[B.id]=!0,B.comboId&&(ie[B.comboId]=!0))}),Jt&&Jt.length!==0&&this.updateCombos(),Object(l.f)(lt,function(se){var Ce=se.getSource().getModel(),Ee=se.getTarget().getModel();(ie[Ce.id]||ie[Ee.id]||se.getModel().isComboEdge)&&se.refresh()}),Object(l.f)(Ft,function(se){se.refresh()}),this.emit("aftergraphrefreshposition"),this.autoPaint()},G.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},G.prototype.isAnimating=function(){return this.animating},G.prototype.getZoom=function(){var B=this.get("group").getMatrix();return B?B[0]:1},G.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},G.prototype.setMode=function(B){return this.get("modeController").setMode(B),this},G.prototype.clear=function(){return this.get("canvas").clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),this.emit("afterrender"),this},G.prototype.updateLayout=function(B){var $,lt=this.get("layoutController");Object(l.x)(B)?B={type:$=B}:$=B.type;var Ft=this.get("layout"),Jt=Ft?Ft.type:void 0;if($&&Jt!==$||B.gpuEnabled!==void 0&&B.gpuEnabled!==Ft.gpuEnabled)$||($=Jt),this.set("layout",B),lt.changeLayout($);else{var ie={};Object.assign(ie,Ft,B),ie.type=Jt||"random",this.set("layout",ie),lt.updateLayoutCfg(ie)}},G.prototype.destroyLayout=function(){this.get("layoutController").destroyLayout()},G.prototype.layout=function(){var B=this.get("layoutController"),$=this.get("layout");$&&B&&($.workerEnabled?B.layout():B.layoutMethod?B.relayout(!0):B.layout())},G.prototype.collapseCombo=function(B){var $=this;if(Object(l.x)(B)&&(B=this.findById(B)),B){this.emit("beforecollapseexpandcombo",{action:"expand",item:B});var lt=B.getModel();this.get("itemController").collapseCombo(B),lt.collapsed=!0;var Ft=this.getEdges().concat(this.get("vedges")),Jt=[],ie=[],se=this.get("comboTrees"),Ce=!1,Ee={};(se||[]).forEach(function(zt){Ee[zt.id]=zt}),(se||[]).forEach(function(zt){Ce||Un(zt,function(Yt){if(Ce&&Ee[Yt.id])return!1;if(lt.parentId===Yt.id?(Ee={},Yt.children.forEach(function(Wt){Ee[Wt.id]=Wt})):lt.id===Yt.id&&(Ce=!0),Ce){var Se=$.findById(Yt.id);Se&&Se.getType&&Se.getType()==="combo"&&(Jt=Jt.concat(Se.getNodes()),ie=ie.concat(Se.getCombos()))}return!0})});var un={},xn=[];Ft.forEach(function(zt){if(!zt.isVisible()||zt.getModel().isVEdge){var Yt=zt.getSource(),Se=zt.getTarget();if((Jt.includes(Yt)||ie.includes(Yt))&&!Jt.includes(Se)&&!ie.includes(Se)||Yt.getModel().id===lt.id){if((Dn=zt.getModel()).isVEdge)return void $.removeItem(zt,!1);for(var Wt=Se.getModel();!Se.isVisible();){if(!(Se=$.findById(Wt.parentId||Wt.comboId))||!Wt.parentId&&!Wt.comboId)return;Wt=Se.getModel()}var ue=Wt.id;if(un[lt.id+"-"+ue])return void(un[lt.id+"-"+ue]+=Dn.size||1);var vn=$.addItem("vedge",{source:lt.id,target:ue,isVEdge:!0},!1);un[lt.id+"-"+ue]=Dn.size||1,xn.push(vn)}else if(!Jt.includes(Yt)&&!ie.includes(Yt)&&(Jt.includes(Se)||ie.includes(Se))||Se.getModel().id===lt.id){var Dn;if((Dn=zt.getModel()).isVEdge)return void $.removeItem(zt,!1);for(var zn=Yt.getModel();!Yt.isVisible();){if(!(Yt=$.findById(zn.parentId||zn.comboId))||!zn.parentId&&!zn.comboId)return;zn=Yt.getModel()}var _n=zn.id;if(un[_n+"-"+lt.id])return void(un[_n+"-"+lt.id]+=Dn.size||1);vn=$.addItem("vedge",{target:lt.id,source:_n,isVEdge:!0},!1),un[_n+"-"+lt.id]=Dn.size||1,xn.push(vn)}}}),xn.forEach(function(zt){var Yt=zt.getModel();$.updateItem(zt,{size:un[Yt.source+"-"+Yt.target]},!1)}),this.emit("aftercollapseexpandcombo",{action:"collapse",item:B})}else console.warn("The combo to be collapsed does not exist!")},G.prototype.expandCombo=function(B){var $=this;if(Object(l.x)(B)&&(B=this.findById(B)),!B||B.getType&&B.getType()!=="combo")console.warn("The combo to be collapsed does not exist!");else{this.emit("beforecollapseexpandcombo",{action:"expand",item:B});var lt=B.getModel();this.get("itemController").expandCombo(B),lt.collapsed=!1;var Ft=this.getEdges().concat(this.get("vedges")),Jt=[],ie=[],se=this.get("comboTrees"),Ce=!1,Ee={};(se||[]).forEach(function(zt){Ee[zt.id]=zt}),(se||[]).forEach(function(zt){Ce||Un(zt,function(Yt){if(Ce&&Ee[Yt.id])return!1;if(lt.parentId===Yt.id?(Ee={},Yt.children.forEach(function(Wt){Ee[Wt.id]=Wt})):lt.id===Yt.id&&(Ce=!0),Ce){var Se=$.findById(Yt.id);Se&&Se.getType&&Se.getType()==="combo"&&(Jt=Jt.concat(Se.getNodes()),ie=ie.concat(Se.getCombos()))}return!0})});var un={},xn={};Ft.forEach(function(zt){if(!zt.isVisible()||zt.getModel().isVEdge){var Yt=zt.getSource(),Se=zt.getTarget(),Wt=Yt.get("id"),ue=Se.get("id");if((Jt.includes(Yt)||ie.includes(Yt))&&!Jt.includes(Se)&&!ie.includes(Se)||Wt===lt.id){if(zt.getModel().isVEdge)return void $.removeItem(zt,!1);for(var vn=Se.getModel();!Se.isVisible();){if(!(Se=$.findById(vn.comboId||vn.parentId))||!vn.parentId&&!vn.comboId)return;vn=Se.getModel()}ue=vn.id;for(var Dn=Yt.getModel();!Yt.isVisible();){if(!(Yt=$.findById(Dn.comboId||Dn.parentId))||!Dn.parentId&&!Dn.comboId)return;if(Dn.comboId===lt.id||Dn.parentId===lt.id)break;Dn=Yt.getModel()}if(Wt=Dn.id,ue){if(un[_n=Wt+"-"+ue])return un[_n]+=zt.getModel().size||1,void $.updateItem(xn[_n],{size:un[_n]},!1);var zn=$.addItem("vedge",{source:Wt,target:ue,isVEdge:!0},!1);un[_n]=zt.getModel().size||1,xn[_n]=zn}}else if(!Jt.includes(Yt)&&!ie.includes(Yt)&&(Jt.includes(Se)||ie.includes(Se))||ue===lt.id){if(zt.getModel().isVEdge)return void $.removeItem(zt,!1);for(Dn=Yt.getModel();!Yt.isVisible();){if(!(Yt=$.findById(Dn.comboId||Dn.parentId))||!Dn.parentId&&!Dn.comboId)return;Dn=Yt.getModel()}for(Wt=Dn.id,vn=Se.getModel();!Se.isVisible();){if(!(Se=$.findById(vn.comboId||vn.parentId))||!vn.parentId&&!vn.comboId)return;if(vn.comboId===lt.id||vn.parentId===lt.id)break;vn=Se.getModel()}if(ue=vn.id,Wt){var _n;if(un[_n=Wt+"-"+ue])return un[_n]+=zt.getModel().size||1,void $.updateItem(xn[_n],{size:un[_n]},!1);zn=$.addItem("vedge",{target:ue,source:Wt,isVEdge:!0},!1),un[_n]=zt.getModel().size||1,xn[_n]=zn}}else(Jt.includes(Yt)||ie.includes(Yt))&&(Jt.includes(Se)||ie.includes(Se))&&Yt.isVisible()&&Se.isVisible()&&zt.show()}}),this.emit("aftercollapseexpandcombo",{action:"expand",item:B})}},G.prototype.collapseExpandCombo=function(B){if(Object(l.x)(B)&&(B=this.findById(B)),!B.getType||B.getType()==="combo"){for(var $=B.getModel(),lt=this.findById($.parentId);lt;){var Ft=lt.getModel();if(Ft.collapsed)return console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),void(lt=void 0);lt=this.findById(Ft.parentId)}$.collapsed?this.expandCombo(B):this.collapseCombo(B),this.updateCombo(B)}},G.prototype.sortCombos=function(){var B=this;if(!this.get("comboSorted")){this.set("comboSorted",!0);var $=[],lt={};(this.get("comboTrees")||[]).forEach(function(Ft){Un(Ft,function(Jt){return $[Jt.depth]?$[Jt.depth].push(Jt.id):$[Jt.depth]=[Jt.id],lt[Jt.id]=Jt.depth,!0})}),(this.getEdges().concat(this.get("vedges"))||[]).forEach(function(Ft){var Jt=Ft.getModel(),ie=lt[Jt.source]||0,se=lt[Jt.target]||0,Ce=Math.max(ie,se);$[Ce]?$[Ce].push(Jt.id):$[Ce]=[Jt.id]}),$.forEach(function(Ft){if(Ft&&Ft.length)for(var Jt=Ft.length-1;Jt>=0;Jt--){var ie=B.findById(Ft[Jt]);ie&&ie.toFront()}})}},G.prototype.getNeighbors=function(B,$){var lt=B;return Object(l.x)(B)&&(lt=this.findById(B)),lt.getNeighbors($)},G.prototype.getNodeDegree=function(B,$){$===void 0&&($=void 0);var lt=B;Object(l.x)(B)&&(lt=this.findById(B));var Ft=this.get("degrees");Ft||(Ft=Object(M.getDegree)(this.get("data"))),this.set("degees",Ft);var Jt,ie=Ft[lt.getID()];switch($){case"in":Jt=ie.inDegree;break;case"out":Jt=ie.outDegree;break;case"all":Jt=ie;break;default:Jt=ie.degree}return Jt},G.prototype.getUndoStack=function(){return this.undoStack},G.prototype.getRedoStack=function(){return this.redoStack},G.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},G.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},G.prototype.pushStack=function(B,$,lt){if(B===void 0&&(B="update"),lt===void 0&&(lt="undo"),this.get("enabledStack")){var Ft=$?Object(l.c)($):{before:{},after:Object(l.c)(this.save())};lt==="redo"?this.redoStack.push({action:B,data:Ft}):this.undoStack.push({action:B,data:Ft}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})}else console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !")},G.prototype.getAdjMatrix=function(B,$){B===void 0&&(B=!0),$===void 0&&($=this.get("directed"));var lt=this.get("adjMatrix");return lt&&B||(lt=Object(M.getAdjMatrix)(this.save(),$),this.set("adjMatrix",lt)),lt},G.prototype.getShortestPathMatrix=function(B,$){B===void 0&&(B=!0),$===void 0&&($=this.get("directed"));var lt=this.get("adjMatrix"),Ft=this.get("shortestPathMatrix");return lt&&B||(lt=Object(M.getAdjMatrix)(this.save(),$),this.set("adjMatrix",lt)),Ft&&B||(Ft=Object(M.floydWarshall)(this.save(),$),this.set("shortestPathMatrix",Ft)),Ft},G.prototype.on=function(B,$,lt){return ve.prototype.on.call(this,B,$,lt)},G.prototype.destroy=function(){this.clear(),this.clearStack(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("canvas").destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},G.prototype.createHull=function(B){if(B.members&&!(B.members.length<1)){var $=this.get("hullGroup"),lt=this.get("hullMap");if(lt||(lt={},this.set("hullMap",lt)),$||(($=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",$)),lt[B.id])return console.warn("Existed hull id."),lt[B.id];var Ft=$.addGroup({id:B.id+"-container"}),Jt=new Qe(this,Object(n.a)(Object(n.a)({},B),{group:Ft}));return lt[Jt.id]=Jt,Jt}console.warn("Create hull failed! The members is empty.")},G.prototype.getHulls=function(){return this.get("hullMap")},G.prototype.getHullById=function(B){return this.get("hullMap")[B]},G.prototype.removeHull=function(B){var $;$=Object(l.x)(B)?this.getHullById(B):B,delete this.get("hullMap")[$.id],$.destroy()},G.prototype.removeHulls=function(){var B=this.getHulls();B&&Object.keys(B).length&&(B.forEach(function($){$.destroy()}),this.set("hullMap",{}))},G}(s.a);function Xn(ve){return(Xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G})(ve)}var $e=h.a.transform,rn=["startArrow","endArrow"],on={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},$n={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:on,combo:on},vr={options:{},itemType:"",type:"",getCustomConfig:function(G){return{}},getOptions:function(G){return Object(l.e)({labelCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}},descriptionCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}}},this.options,this.getCustomConfig(G)||{},G)},draw:function(G,B){var $=this.drawShape(G,B);return $.set("className",this.itemType+"-shape"),G.label&&this.drawLabel(G,B).set("className",this.itemType+"-label"),$},afterDraw:function(G,B,$){},drawShape:function(G,B){return null},drawLabel:function(G,B){var $=this.getOptions(G).labelCfg||{},lt=this.getLabelStyle(G,$,B),Ft=lt.rotate;delete lt.rotate;var Jt=B.addShape("text",{attrs:lt,draggable:!0,className:"text-shape",name:"text-shape"});if(Ft){var ie=Jt.getBBox(),se=Jt.getMatrix();if(se||(se=[1,0,0,0,1,0,0,0,1]),lt.rotateCenter)switch(lt.rotateCenter){case"center":se=$e(se,[["t",-ie.width/2,-ie.height/2],["r",Ft],["t",ie.width/2,ie.height/2]]);break;case"lefttop":se=$e(se,[["t",-lt.x,-lt.y],["r",Ft],["t",lt.x,lt.y]]);break;case"leftcenter":se=$e(se,[["t",-lt.x,-lt.y-ie.height/2],["r",Ft],["t",lt.x,lt.y+ie.height/2]]);break;default:se=$e(se,[["t",-ie.width/2,-ie.height/2],["r",Ft],["t",ie.width/2,ie.height/2]])}else se=$e(se,[["t",-lt.x,-lt.y-ie.height/2],["r",Ft],["t",lt.x,lt.y+ie.height/2]]);Jt.setMatrix(se)}if(lt.background){var Ce=this.drawLabelBg(G,B,Jt),Ee=this.itemType+"-label-bg";Ce.set("classname",Ee),Jt.toFront()}return Jt},drawLabelBg:function(G,B,$){var lt=this.options.labelCfg,Ft=Object(l.A)({},lt,G.labelCfg),Jt=this.getLabelBgStyleByPosition($,G,Ft,B);return B.addShape("rect",{name:"text-bg-shape",attrs:Jt})},getLabelStyleByPosition:function(G,B,$){return{text:G.label}},getLabelBgStyleByPosition:function(G,B,$,lt){return{}},getLabelStyle:function(G,B,$){var lt=this.getLabelStyleByPosition(G,B,$),Ft=this.itemType+"Label",Jt=yt[Ft]?yt[Ft].style:null;return Object(n.a)(Object(n.a)(Object(n.a)({},Jt),lt),B.style)},getShapeStyle:function(G){return G.style},update:function(G,B){this.updateShapeStyle(G,B),this.updateLabel(G,B)},updateShapeStyle:function(G,B){var $=B.getContainer(),lt=B.getKeyShape(),Ft=Object(l.A)({},lt.attr(),G.style),Jt=function(Ce){var Ee,un=Ft[Ce];if(Object(l.w)(un)){var xn=$.find(function(zt){return zt.get("name")===Ce});xn&&xn.attr(un)}else lt.attr(((Ee={})[Ce]=un,Ee))};for(var ie in Ft)Jt(ie)},updateLabel:function(G,B){var $=B.getContainer(),lt=this.getOptions({}).labelCfg,Ft=this.itemType+"-label",Jt=$.find(function(zn){return zn.get("className")===Ft}),ie=this.itemType+"-label-bg",se=$.find(function(zn){return zn.get("classname")===ie});if(G.label||G.label==="")if(Jt){var Ce={};B.getModel&&(Ce=B.getModel().labelCfg);var Ee=Object(l.e)({},lt,Ce,G.labelCfg),un=this.getLabelStyleByPosition(G,Ee,$),xn=G.labelCfg?G.labelCfg.style:void 0,zt=Ee.style&&Ee.style.background,Yt=Object(n.a)(Object(n.a)(Object(n.a)({},Jt.attr()),un),xn),Se=Yt.rotate;if(delete Yt.rotate,Se){var Wt=[1,0,0,0,1,0,0,0,1];Wt=$e(Wt,[["t",-Yt.x,-Yt.y],["r",Se],["t",Yt.x,Yt.y]]),Jt.resetMatrix(),Jt.attr(Object(n.a)(Object(n.a)({},Yt),{matrix:Wt}))}else Jt.resetMatrix(),Jt.attr(Yt);if(se)if(Yt.background){var ue=this.getLabelBgStyleByPosition(Jt,G,Ee,$),vn=Object(n.a)(Object(n.a)({},ue),zt);if(se.resetMatrix(),Se){var Dn=[1,0,0,0,1,0,0,0,1];Dn=$e(Dn,[["t",-vn.x,-vn.y],["r",Se],["t",vn.x,vn.y]]),vn.matrix=Dn}se.attr(vn)}else $.removeChild(se);else Yt.background&&((se=this.drawLabelBg(G,$,Jt)).set("classname",ie),Jt.toFront())}else this.drawLabel(G,$).set("className",Ft)},afterUpdate:function(G,B){},setState:function(G,B,$){var lt,Ft,Jt=$.get("keyShape");if(Jt){var ie=$.getType(),se=Object(l.n)(B)?G:G+":"+B,Ce=this.getStateStyle(se,$),Ee=$.getStateStyle(se);if(Ee||Ce){var un=Object(l.A)({},Ee||Ce),xn=$.getContainer(),zt={x:1,y:1,cx:1,cy:1};if(ie==="combo"&&(zt.r=1,zt.width=1,zt.height=1),B){var Yt=function(ce){var Me,ze=un[ce];if(Object(l.w)(ze)&&!rn.includes(ce)){var Ve=xn.find(function(ke){return ke.get("name")===ce});Ve&&Ve.attr(ze)}else Jt.attr(((Me={})[ce]=ze,Me))};for(var Se in un)Yt(Se)}else{var Wt=ti($.getCurrentStatesStyle()),ue=$.getModel(),vn=Object(l.A)({},ue.style,ti($.getOriginStyle())),Dn=Jt.get("name"),zn=Jt.attr(),_n={};Object.keys(zn).forEach(function(he){if(he!=="img"){var ce=zn[he];ce&&Xn(ce)==="object"?_n[he]=Object(l.c)(ce):_n[he]=ce}});var Ze={},Te=function(ce){var Me=un[ce];if(Object(l.w)(Me)&&!rn.includes(ce)){var ze=xn.find(function(tn){return tn.get("name")===ce});if(ze){var Ve=Object(l.c)(ze.attr());Object(l.f)(Me,function(tn,De){if(ce===Dn&&_n[De]&&!zt[De]){delete _n[De];var cn=vn[ce][De]||$n[ie][De];Jt.attr(De,cn)}else if(Ve[De]||Ve[De]===0){delete Ve[De];var hn=vn[ce][De]||$n[ie][De];ze.attr(De,hn)}}),Ze[ce]=Ve}}else if(_n[ce]&&!zt[ce]){delete _n[ce];var ke=vn[ce]||(vn[Dn]?vn[Dn][ce]:void 0)||$n[ie][ce];Jt.attr(ce,ke)}};for(var N in un)Te(N);for(var Se in Dn?Ze[Dn]=_n:Object(l.A)(Ze,_n),Wt)if(!zt[Se]){var mt=Wt[Se];Object(l.w)(mt)&&!rn.includes(Se)||(Dn?(Object(l.A)(vn[Dn],((Ft={})[Se]=mt,Ft)),delete vn[Se]):Object(l.A)(vn,((lt={})[Se]=mt,lt)),delete Wt[Se])}var $t={};Object(l.e)($t,vn,Ze,Wt);var me=!1,Zt=function(ce){var Me,ze,Ve=$t[ce];if(Object(l.w)(Ve)&&!rn.includes(ce)){var ke=xn.find(function(De){return De.get("name")===ce});ke&&(ce===Dn&&(ie==="combo"&&(delete Ve.r,delete Ve.width,delete Ve.height),me=!0),ke.attr(Ve))}else if(!me){var tn=Ve||$n[ie][ce];ie==="combo"?Dn||Jt.attr(((Me={})[ce]=tn,Me)):Jt.attr(((ze={})[ce]=tn,ze))}};for(var de in $t)Zt(de)}}}},getStateStyle:function(G,B){var $=B.getModel(),lt=B.getType(),Ft=this.getOptions($),Jt=Ft.stateStyles,ie=Ft.style,se=ie===void 0?{}:ie,Ce=$.stateStyles?$.stateStyles[G]:Jt&&Jt[G];return lt==="combo"?Object(l.c)(Ce):Object(l.A)({},se,Ce)},getControlPoints:function(G){return G.controlPoints},getAnchorPoints:function(G){return this.getOptions(G).anchorPoints}},ar={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:yt.nodeLabel.offset,getSize:function(G){var B=G.size||this.getOptions({}).size||yt.defaultNode.size;return Object(l.m)(B)&&B.length===1&&(B=[B[0],B[0]]),Object(l.m)(B)||(B=[B,B]),B},getLabelStyleByPosition:function(G,B){var $=B.position||this.labelPosition;if($==="center")return{x:0,y:0,text:G.label};var lt=B.offset;Object(l.s)(lt)&&(lt=this.offset);var Ft,Jt=this.getSize(G),ie=Jt[0],se=Jt[1];switch($){case"top":Ft={x:0,y:0-se/2-lt,textBaseline:"bottom"};break;case"bottom":Ft={x:0,y:se/2+lt,textBaseline:"top"};break;case"left":Ft={x:0-ie/2-lt,y:0,textAlign:"right"};break;default:Ft={x:ie/2+lt,y:0,textAlign:"left"}}return Ft.text=G.label,Ft},getLabelBgStyleByPosition:function(G,B,$,lt){if(!G)return{};var Ft=G.getBBox(),Jt=$.style&&$.style.background;if(!Jt)return{};var ie,se=Ut(Jt.padding),Ce=Ft.width+se[1]+se[3],Ee=Ft.height+se[0]+se[2],un=$.offset;return Object(l.s)(un)&&(un=this.offset),ie={x:Ft.minX-se[3],y:Ft.minY-se[0]},ie=Object(n.a)(Object(n.a)(Object(n.a)({},ie),Jt),{width:Ce,height:Ee})},drawShape:function(G,B){var $=this.shapeType,lt=this.getShapeStyle(G);return B.addShape($,{attrs:lt,draggable:!0,name:"node-shape"})},updateLinkPoints:function(G,B){var $,lt=this.getOptions(G).linkPoints,Ft=B.find(function(Te){return Te.get("className")==="link-point-left"}),Jt=B.find(function(Te){return Te.get("className")==="link-point-right"}),ie=B.find(function(Te){return Te.get("className")==="link-point-top"}),se=B.find(function(Te){return Te.get("className")==="link-point-bottom"});Ft&&($=Ft.attr()),Jt&&!$&&($=Jt.attr()),ie&&!$&&($=ie.attr()),se&&!$&&($=se.attr()),$||($=lt);var Ce=Object(l.A)({},$,G.linkPoints),Ee=Ce.fill,un=Ce.stroke,xn=Ce.lineWidth,zt=Ce.size/2;zt||(zt=Ce.r);var Yt=G.linkPoints?G.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},Se=Yt.left,Wt=Yt.right,ue=Yt.top,vn=Yt.bottom,Dn=this.getSize(G),zn=Dn[0],_n=Dn[1],Ze={r:zt,fill:Ee,stroke:un,lineWidth:xn};Ft?Se||Se===void 0?Ft.attr(Object(n.a)(Object(n.a)({},Ze),{x:-zn/2,y:0})):Ft.remove():Se&&B.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Ze),{x:-zn/2,y:0}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),Jt?(Wt||Wt===void 0||Jt.remove(),Jt.attr(Object(n.a)(Object(n.a)({},Ze),{x:zn/2,y:0}))):Wt&&B.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Ze),{x:zn/2,y:0}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),ie?(ue||ue===void 0||ie.remove(),ie.attr(Object(n.a)(Object(n.a)({},Ze),{x:0,y:-_n/2}))):ue&&B.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Ze),{x:0,y:-_n/2}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),se?vn||vn===void 0?se.attr(Object(n.a)(Object(n.a)({},Ze),{x:0,y:_n/2})):se.remove():vn&&B.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Ze),{x:0,y:_n/2}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},updateShape:function(G,B,$,lt){B.get("keyShape").attr(Object(n.a)({},$)),this.updateLabel(G,B),lt&&this.updateIcon(G,B)},updateIcon:function(G,B){var $=this,lt=B.getContainer(),Ft=this.getOptions(G).icon,Jt=(G.icon?G.icon:{show:void 0}).show,ie=lt.find(function(xn){return xn.get("className")===$.type+"-icon"});if(ie)if(Jt||Jt===void 0){var se=Object(l.A)({},ie.attr(),Ft),Ce=se.width,Ee=se.height;ie.attr(Object(n.a)(Object(n.a)({},se),{x:-Ce/2,y:-Ee/2}))}else ie.remove();else if(Jt){Ce=Ft.width,Ee=Ft.height,lt.addShape("image",{attrs:Object(n.a)(Object(n.a)({},Ft),{x:-Ce/2,y:-Ee/2}),className:this.type+"-icon",name:this.type+"-icon"});var un=lt.find(function(xn){return xn.get("className")==="node-label"});un&&un.toFront()}}},rr=Object(n.a)(Object(n.a)({},vr),ar);jr.registerNode("single-node",rr);var Fr={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:yt.defaultEdge.size,style:{x:0,y:0,stroke:yt.defaultEdge.style.stroke,lineAppendWidth:yt.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:yt.edgeLabel.style.fill,fontSize:yt.edgeLabel.style.fontSize}},stateStyles:Object(n.a)({},yt.edgeStateStyles)},getPath:function(G){var B=[];return Object(l.f)(G,function($,lt){lt===0?B.push(["M",$.x,$.y]):B.push(["L",$.x,$.y])}),B},getShapeStyle:function(G){var B=this.options.style,$={stroke:G.color},lt=Object(l.A)({},B,$,G.style),Ft=G.size||yt.defaultEdge.size,Jt=(G=this.getPathPoints(G)).startPoint,ie=G.endPoint,se=this.getControlPoints(G),Ce=[Jt];se&&(Ce=Ce.concat(se)),Ce.push(ie);var Ee=this.getPath(Ce);return Object(l.A)({},yt.defaultEdge.style,{stroke:yt.defaultEdge.color,lineWidth:Ft,path:Ee},lt)},updateShapeStyle:function(G,B){var $=B.getContainer(),lt={stroke:G.color},Ft=$.find(function(vn){return vn.get("className")==="edge-shape"})||B.getKeyShape(),Jt=G.size,ie=(G=this.getPathPoints(G)).startPoint,se=G.endPoint,Ce=this.getControlPoints(G),Ee=[ie];Ce&&(Ee=Ee.concat(Ce)),Ee.push(se);var un=Ft.attr(),xn=Object(l.A)({},lt,un,G.style),zt=G.sourceNode,Yt=G.targetNode,Se={radius:xn.radius};Ce||(Se={source:zt,target:Yt,offset:xn.offset,radius:xn.radius}),un.endArrow&&xn.endArrow===!1&&(G.style.endArrow={path:""}),un.startArrow&&xn.startArrow===!1&&(G.style.startArrow={path:""});var Wt=this.getPath(Ee,Se),ue=Object(l.A)(lt,Ft.attr(),{lineWidth:Jt,path:Wt},G.style);Ft&&Ft.attr(ue)},getLabelStyleByPosition:function(G,B,$){var lt,Ft=B.position||this.labelPosition,Jt={},ie=$&&$.find(function(xn){return xn.get("className")==="edge-shape"});lt=Ft==="start"?0:Ft==="end"?1:.5;var se=B.refX||this.refX,Ce=B.refY||this.refY;if(G.startPoint.x===G.endPoint.x&&G.startPoint.y===G.endPoint.y)return Jt.x=G.startPoint.x+se,Jt.y=G.startPoint.y+Ce,Jt.text=G.label,Jt;var Ee=Object(l.s)(B.autoRotate)?this.labelAutoRotate:B.autoRotate,un=Mn(ie,lt,se,Ce,Ee);return Jt.x=un.x,Jt.y=un.y,Jt.rotate=un.rotate,Jt.textAlign=this._getTextAlign(Ft,un.angle),Jt.text=G.label,Jt},getLabelBgStyleByPosition:function(G,B,$,lt){if(!G)return{};var Ft=G.getBBox(),Jt=$.style&&$.style.background;if(!Jt)return{};var ie,se=Jt.padding,Ce=Ft.width+se[1]+se[3],Ee=Ft.height+se[0]+se[2],un=$.position||this.labelPosition,xn=Object(n.a)(Object(n.a)({},Jt),{width:Ce,height:Ee,x:Ft.minX-se[2],y:Ft.minY-se[0],rotate:0}),zt=Object(l.s)($.autoRotate)?this.labelAutoRotate:$.autoRotate,Yt=lt&&lt.find(function(Dn){return Dn.get("className")==="edge-shape"});ie=un==="start"?0:un==="end"?1:.5;var Se=$.refX||this.refX,Wt=$.refY||this.refY;if(B.startPoint.x===B.endPoint.x&&B.startPoint.y===B.endPoint.y)return xn.x=B.startPoint.x+Se-Ce/2,xn.y=B.startPoint.y+Wt-Ee/2,xn;var ue=Mn(Yt,ie,Se-Ce/2,Wt+Ee/2,zt),vn=ue.angle;return vn>.5*Math.PI&&vn<1.5*Math.PI&&(ue=Mn(Yt,ie,Se+Ce/2,Wt+Ee/2,zt)),zt&&(xn.x=ue.x,xn.y=ue.y),xn.rotate=ue.rotate,xn},_getTextAlign:function(G,B){var $="center";return B?(B%=2*Math.PI,G!=="center"&&($=B>=0&&B<=Math.PI/2||B>=1.5*Math.PI&&B<2*Math.PI?G:function(lt){var Ft=lt;return lt==="start"?Ft="end":lt==="end"&&(Ft="start"),Ft}(G)),$):G},getControlPoints:function(G){return G.controlPoints},getPathPoints:function(G){return G},drawShape:function(G,B){var $=this.getShapeStyle(G);return B.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:$})},drawLabel:function(G,B){var $=this.options.labelCfg,lt=Object(l.e)({fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},$,G.labelCfg),Ft=this.getLabelStyle(G,lt,B),Jt=Ft.rotate;delete Ft.rotate;var ie=B.addShape("text",{attrs:Ft,name:"text-shape"});if(Jt&&ie.rotateAtStart(Jt),Ft.background){var se=this.drawLabelBg(G,B,ie),Ce=this.itemType+"-label-bg";se.set("classname",Ce),ie.toFront()}return ie},drawLabelBg:function(G,B,$){var lt=this.options.labelCfg,Ft=Object(l.e)({},lt,G.labelCfg),Jt=this.getLabelStyle(G,Ft,B).rotate,ie=this.getLabelBgStyleByPosition($,G,Ft,B);delete ie.rotate;var se=B.addShape("rect",{name:"text-bg-shape",attrs:ie});return Jt&&se.rotateAtStart(Jt),se}},Ar=Object(n.a)(Object(n.a)({},vr),Fr);jr.registerEdge("single-edge",Ar),jr.registerEdge("line",{getControlPoints:function(){}},"single-edge"),jr.registerEdge("spline",{getPath:function(G){return Qr(G)}},"single-edge"),jr.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(G){var B,$,lt=G.startPoint,Ft=G.endPoint,Jt=(lt.x+Ft.x)/2,ie=(lt.y+Ft.y)/2;if(G.controlPoints!==void 0){if($=G.controlPoints[0],B=dt(lt,$,Ft),lt.x<=Ft.x&&lt.y>Ft.y?this.clockwise=B.x>$.x?0:1:lt.x<=Ft.x&&lt.y<Ft.y?this.clockwise=B.x>$.x?1:0:lt.x>Ft.x&&lt.y<=Ft.y?this.clockwise=B.y<$.y?0:1:this.clockwise=B.y<$.y?1:0,($.x-lt.x)/($.y-lt.y)==(Ft.x-lt.x)/(Ft.y-lt.y))return[]}else{G.curveOffset===void 0&&(G.curveOffset=this.curveOffset),Object(l.m)(G.curveOffset)&&(G.curveOffset=G.curveOffset[0]),G.curveOffset<0?this.clockwise=0:this.clockwise=1;var se={x:Ft.x-lt.x,y:Ft.y-lt.y},Ce=Math.atan2(se.y,se.x);$={x:G.curveOffset*Math.cos(-Math.PI/2+Ce)+Jt,y:G.curveOffset*Math.sin(-Math.PI/2+Ce)+ie},B=dt(lt,$,Ft)}var Ee=ht(lt,B);return[{x:Ee,y:Ee}]},getPath:function(G){var B=[];return B.push(["M",G[0].x,G[0].y]),G.length===2?B.push(["L",G[1].x,G[1].y]):B.push(["A",G[1].x,G[1].y,0,0,this.clockwise,G[2].x,G[2].y]),B}},"single-edge"),jr.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(G){var B=G.controlPoints;if(!B||!B.length){var $=G.startPoint,lt=G.endPoint;G.curveOffset===void 0&&(G.curveOffset=this.curveOffset),G.curvePosition===void 0&&(G.curvePosition=this.curvePosition),Object(l.m)(this.curveOffset)&&(G.curveOffset=G.curveOffset[0]),Object(l.m)(this.curvePosition)&&(G.curvePosition=G.curveOffset[0]),B=[gi($,lt,G.curvePosition,G.curveOffset)]}return B},getPath:function(G){var B=[];return B.push(["M",G[0].x,G[0].y]),B.push(["Q",G[1].x,G[1].y,G[2].x,G[2].y]),B}},"single-edge"),jr.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(G){var B=G.controlPoints;if(G.curveOffset===void 0&&(G.curveOffset=this.curveOffset),G.curvePosition===void 0&&(G.curvePosition=this.curvePosition),Object(l.t)(G.curveOffset)&&(G.curveOffset=[G.curveOffset,-G.curveOffset]),Object(l.t)(G.curvePosition)&&(G.curvePosition=[G.curvePosition,1-G.curvePosition]),!B||!B.length||B.length<2){var $=G.startPoint,lt=G.endPoint;B=[gi($,lt,G.curvePosition[0],G.curveOffset[0]),gi($,lt,G.curvePosition[1],G.curveOffset[1])]}return B},getPath:function(G){var B=[];return B.push(["M",G[0].x,G[0].y]),B.push(["C",G[1].x,G[1].y,G[2].x,G[2].y,G[3].x,G[3].y]),B}},"single-edge"),jr.registerEdge("cubic-vertical",{curvePosition:[.5,.5],getControlPoints:function(G){var B=G.startPoint,$=G.endPoint;return G.curvePosition!==void 0&&(this.curvePosition=G.curvePosition),Object(l.t)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]),[{x:B.x,y:($.y-B.y)*this.curvePosition[0]+B.y},{x:$.x,y:($.y-B.y)*this.curvePosition[1]+B.y}]}},"cubic"),jr.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],getControlPoints:function(G){var B=G.startPoint,$=G.endPoint;return G.curvePosition!==void 0&&(this.curvePosition=G.curvePosition),Object(l.t)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]),[{x:($.x-B.x)*this.curvePosition[0]+B.x,y:B.y},{x:($.x-B.x)*this.curvePosition[1]+B.x,y:$.y}]}},"cubic"),jr.registerEdge("loop",{getPathPoints:function(G){return kn(G)},getControlPoints:function(G){return G.controlPoints},afterDraw:function(G){G.controlPoints=void 0},afterUpdate:function(G){G.controlPoints=void 0}},"cubic");var wr={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:yt.comboLabel.refX,refY:yt.comboLabel.refY,options:{style:{stroke:yt.defaultCombo.style.stroke,fill:yt.defaultCombo.style.fill,lineWidth:yt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:yt.comboLabel.style.fill,fontSize:yt.comboLabel.style.fontSize}},stateStyles:Object(n.a)({},yt.comboStateStyles)},getSize:function(G){var B=Object(l.c)(G.size||this.options.size||yt.defaultCombo.size);return Object(l.m)(B)&&B.length===1&&(B=[B[0],B[0]]),Object(l.m)(B)||(B=[B,B]),B},getLabelStyleByPosition:function(G,B){var $=B.position||this.labelPosition,lt=G.style,Ft=G.padding||this.options.padding;Object(l.m)(Ft)&&(Ft=Ft[0]);var Jt=B.refX,ie=B.refY;Object(l.s)(Jt)&&(Jt=this.refX),Object(l.s)(ie)&&(ie=this.refY);var se,Ce=this.getSize(G),Ee=(Math.max(lt.r,Ce[0]/2)||Ce[0]/2)+Ft;switch($){case"top":se={x:0,y:-Ee-ie,textBaseline:"bottom",textAlign:"center"};break;case"bottom":se={x:0,y:Ee+ie,textBaseline:"bottom",textAlign:"center"};break;case"left":se={x:-Ee+Jt,y:0,textAlign:"left"};break;case"center":se={x:0,y:0,text:G.label,textAlign:"center"};break;default:se={x:Ee+Jt,y:0,textAlign:"right"}}return se.text=G.label,se},drawShape:function(G,B){var $=this.shapeType,lt=this.getShapeStyle(G);return B.addShape($,{attrs:lt,draggable:!0,name:"combo-shape"})},updateShape:function(G,B,$){var lt=B.get("keyShape");(G.animate===void 0?this.options.animate:G.animate)&&lt.animate?lt.animate($,{duration:200,easing:"easeLinear"}):lt.attr(Object(n.a)({},$)),this.updateLabel(G,B)}},xr=Object(n.a)(Object(n.a)({},vr),wr);jr.registerCombo("single-combo",xr),jr.registerCombo("circle",{options:{size:[yt.defaultCombo.size[0],yt.defaultCombo.size[0]],padding:yt.defaultCombo.padding[0],animate:!0,style:{stroke:yt.defaultCombo.style.stroke,fill:yt.defaultCombo.style.fill,lineWidth:yt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:yt.comboLabel.style.fill,fontSize:yt.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:Object(n.a)({},yt.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function(G,B){var $=this.getShapeStyle(G);return delete $.height,delete $.width,B.addShape("circle",{attrs:$,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(G){var B=this.options.style,$=G.padding||this.options.padding;Object(l.m)($)&&($=$[0]);var lt,Ft={stroke:G.color},Jt=Object(l.A)({},B,Ft,G.style),ie=this.getSize(G);lt=!Object(l.t)(Jt.r)||isNaN(Jt.r)?ie[0]/2||yt.defaultCombo.style.r:Math.max(Jt.r,ie[0]/2)||ie[0]/2,Jt.r=lt+$;var se=Object(n.a)({x:0,y:0},Jt);return G.style?G.style.r=lt:G.style={r:lt},se},update:function(G,B){var $=this.getSize(G),lt=G.padding||this.options.padding;Object(l.m)(lt)&&(lt=lt[0]);var Ft=Object(l.c)(G.style),Jt=Math.max(Ft.r,$[0]/2)||$[0]/2;Ft.r=Jt+lt;var ie=B.get("sizeCache");ie&&(ie.r=Ft.r);var se={stroke:G.color},Ce=B.get("keyShape"),Ee=Object(l.A)({},Ce.attr(),se,Ft);G.style?G.style.r=Jt:G.style={r:Jt},this.updateShape(G,B,Ee,!0)}},"single-combo"),jr.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:yt.defaultCombo.style.stroke,fill:yt.defaultCombo.style.fill,lineWidth:yt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:yt.comboLabel.style.fill,fontSize:yt.comboLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(n.a)({},yt.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function(G,B){var $=this.getShapeStyle(G);return B.addShape("rect",{attrs:$,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(G,B){var $=B.position||this.labelPosition,lt=G.style,Ft=G.padding||this.options.padding;Object(l.t)(Ft)&&(Ft=[Ft,Ft,Ft,Ft]);var Jt=B.refX,ie=B.refY;Object(l.s)(Jt)&&(Jt=this.refX),Object(l.s)(ie)&&(ie=this.refY);var se,Ce=lt.width/2+Ft[3],Ee=lt.height/2+Ft[0];switch($){case"top":se={x:0-Ce+Jt,y:0-Ee+ie,textBaseline:"top",textAlign:"left"};break;case"bottom":se={x:0,y:Ee+ie,textBaseline:"bottom",textAlign:"center"};break;case"left":se={x:0-Ce+ie,y:0,textAlign:"left"};break;case"center":se={x:0,y:0,text:G.label,textAlign:"center"};break;default:se={x:Ce+Jt,y:0,textAlign:"right"}}return se.text=G.label,se},getShapeStyle:function(G){var B=this.options.style,$=G.padding||this.options.padding;Object(l.t)($)&&($=[$,$,$,$]);var lt,Ft,Jt={stroke:G.color},ie=Object(l.A)({},B,Jt,G.style),se=this.getSize(G);lt=!Object(l.t)(ie.width)||isNaN(ie.width)?se[0]||yt.defaultCombo.style.width:Math.max(ie.width,se[0])||se[0],Ft=!Object(l.t)(ie.height)||isNaN(ie.height)?se[1]||yt.defaultCombo.style.height:Math.max(ie.height,se[1])||se[1];var Ce=-lt/2-$[3],Ee=-Ft/2-$[0];ie.width=lt+$[1]+$[3],ie.height=Ft+$[0]+$[2];var un=Object(n.a)({x:Ce,y:Ee},ie);return G.style?(G.style.width=lt,G.style.height=Ft):G.style={width:lt,height:Ft},un},update:function(G,B){var $=this.getSize(G),lt=G.padding||this.options.padding;Object(l.t)(lt)&&(lt=[lt,lt,lt,lt]);var Ft=Object(l.c)(G.style),Jt=Math.max(Ft.width,$[0])||$[0],ie=Math.max(Ft.height,$[1])||$[1];Ft.width=Jt+lt[1]+lt[3],Ft.height=ie+lt[0]+lt[2];var se=B.get("sizeCache");se&&(se.width=Ft.width,se.height=Ft.height),Ft.x=-Jt/2-lt[3],Ft.y=-ie/2-lt[0];var Ce={stroke:G.color},Ee=B.get("keyShape"),un=Object(l.A)({},Ee.attr(),Ce,Ft);G.style?(G.style.width=Jt,G.style.height=ie):G.style={width:Jt,height:ie},this.updateShape(G,B,un,!1)},updateShape:function(G,B,$){var lt=B.get("keyShape");(G.animate===void 0?this.options.animate:G.animate)&&lt.animate?lt.animate($,{duration:200,easing:"easeLinear"}):lt.attr(Object(n.a)({},$)),this.updateLabel(G,B)}},"single-combo"),jr.registerNode("simple-circle",{options:{size:yt.defaultNode.size,style:{x:0,y:0,stroke:yt.defaultNode.style.stroke,fill:yt.defaultNode.style.fill,lineWidth:yt.defaultNode.style.lineWidth},labelCfg:{style:{fill:yt.nodeLabel.style.fill,fontSize:yt.nodeLabel.style.fontSize}},stateStyles:Object(n.a)({},yt.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",drawShape:function(G,B){var $=this.getShapeStyle(G);return B.addShape("circle",{attrs:$,className:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(G){var B=this.getOptions(G).style,$={stroke:G.color},lt=Object(l.e)({},B,$),Ft=this.getSize(G)[0]/2;return Object(n.a)({x:0,y:0,r:Ft},lt)},update:function(G,B){var $=this.getSize(G),lt={stroke:G.color,r:$[0]/2},Ft=B.get("keyShape"),Jt=Object(l.e)({},Ft.attr(),lt,G.style);this.updateShape(G,B,Jt,!0)}},"single-node"),jr.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:yt.defaultNode.style.stroke,fill:yt.defaultNode.style.fill,lineWidth:yt.defaultNode.style.lineWidth},labelCfg:{style:{fill:yt.nodeLabel.style.fill,fontSize:yt.nodeLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(n.a)({},yt.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(G,B){var $=this.getShapeStyle(G);return B.addShape("rect",{attrs:$,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(G){var B=this.getOptions(G).style,$={stroke:G.color},lt=Object(l.A)({},B,$),Ft=this.getSize(G),Jt=lt.width||Ft[0],ie=lt.height||Ft[1];return Object(n.a)({x:-Jt/2,y:-ie/2,width:Jt,height:ie},lt)},update:function(G,B){B.getContainer();var $=this.getOptions({}).style,lt=this.getSize(G),Ft=B.get("keyShape");G.size||(lt[0]=Ft.attr("width")||$.width,lt[1]=Ft.attr("height")||$.height);var Jt={stroke:G.color,x:-lt[0]/2,y:-lt[1]/2,width:lt[0],height:lt[1]},ie=Object(l.A)({},$,Ft.attr(),Jt);ie=Object(l.A)(ie,G.style),this.updateShape(G,B,ie,!1)}},"single-node"),jr.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(G,B){var $=this.shapeType,lt=this.getShapeStyle(G);delete lt.fill;var Ft=B.addShape($,{attrs:lt,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(G,Ft),Ft},drawClip:function(G,B){var $=this.getOptions(G).clipCfg;if($.show){var lt=$.type,Ft=$.x,Jt=$.y,ie=$.style;if(lt==="circle"){var se=$.r;B.setClip({type:"circle",attrs:Object(n.a)({r:se,x:Ft,y:Jt},ie)})}else if(lt==="rect"){var Ce=$.width,Ee=$.height,un=Ft-Ce/2,xn=Jt-Ee/2;B.setClip({type:"rect",attrs:Object(n.a)({x:un,y:xn,width:Ce,height:Ee},ie)})}else if(lt==="ellipse"){var zt=$.rx,Yt=$.ry;B.setClip({type:"ellipse",attrs:Object(n.a)({x:Ft,y:Jt,rx:zt,ry:Yt},ie)})}else if(lt==="polygon"){var Se=$.points;B.setClip({type:"polygon",attrs:Object(n.a)({points:Se},ie)})}else if(lt==="path"){var Wt=$.path;B.setClip({type:"path",attrs:Object(n.a)({path:Wt},ie)})}}},getShapeStyle:function(G){var B=this.getOptions(G).style,$=this.getSize(G),lt=this.getOptions(G).img,Ft=$[0],Jt=$[1];return B&&(Ft=B.width||$[0],Jt=B.height||$[1]),Object(n.a)({x:-Ft/2,y:-Jt/2,width:Ft,height:Jt,img:lt},B)},updateShapeStyle:function(G,B){var $=B.getContainer(),lt=this.itemType+"-shape",Ft=$.find(function(ie){return ie.get("className")===lt})||B.getKeyShape(),Jt=this.getShapeStyle(G);Ft&&Ft.attr(Jt)}},"single-node");var Er,Ir={triangle:function(G,B,$){G===void 0&&(G=10),B===void 0&&(B=15),$===void 0&&($=0);var lt=2*$;return"M "+lt+",0 L "+(lt+B)+",-"+G/2+" L "+(lt+B)+","+G/2+" Z"},vee:function(G,B,$){G===void 0&&(G=15),B===void 0&&(B=20),$===void 0&&($=0);var lt=2*$;return"M "+lt+",0 L "+(lt+B)+",-"+G/2+`
        L `+(lt+2*B/3)+",0 L "+(lt+B)+","+G/2+" Z"},circle:function(G,B){return G===void 0&&(G=5),B===void 0&&(B=0),"M "+2*B+`, 0
            a `+G+","+G+" 0 1,0 "+2*G+`,0
            a `+G+","+G+" 0 1,0 "+2*-G+",0"},rect:function(G,B,$){G===void 0&&(G=10),B===void 0&&(B=10),$===void 0&&($=0);var lt=2*$;return"M "+lt+","+-G/2+` 
        L `+(lt+B)+","+-G/2+` 
        L `+(lt+B)+","+G/2+` 
        L `+lt+","+G/2+" Z"},diamond:function(G,B,$){G===void 0&&(G=15),B===void 0&&(B=15),$===void 0&&($=0);var lt=2*$;return"M "+lt+`,0 
        L `+(lt+B/2)+","+-G/2+` 
        L `+(lt+B)+`,0 
        L `+(lt+B/2)+","+G/2+" Z"},triangleRect:function(G,B,$,lt,Ft,Jt){G===void 0&&(G=15),B===void 0&&(B=15),$===void 0&&($=15),lt===void 0&&(lt=3),Ft===void 0&&(Ft=5),Jt===void 0&&(Jt=0);var ie=2*Jt,se=ie+B+Ft;return"M "+ie+",0 L "+(ie+B)+",-"+G/2+" L "+(ie+B)+","+G/2+` Z
            M `+se+", -"+$/2+`
            L `+(se+lt)+" -"+$/2+`
            L `+(se+lt)+" "+$/2+`
            L `+se+" "+$/2+`
            Z`}},Lr={collapse:function(G,B,$){return[["M",G-$,B],["a",$,$,0,1,0,2*$,0],["a",$,$,0,1,0,2*-$,0],["M",G-$+4,B],["L",G+$-4,B]]},expand:function(G,B,$){return[["M",G-$,B],["a",$,$,0,1,0,2*$,0],["a",$,$,0,1,0,2*-$,0],["M",G-$+4,B],["L",G-$+2*$-4,B],["M",G-$+$,B-$+4],["L",G,B+$-4]]},upTriangle:function(G,B,$){var lt=$*Math.cos(Math.PI/6),Ft=$*Math.sin(Math.PI/6);return[["M",G-lt,B+Ft],["L",G+lt,B+Ft],["L",G,B-$],["Z"]]},downTriangle:function(G,B,$){var lt=$*Math.cos(Math.PI/6),Ft=$*Math.sin(Math.PI/6);return[["M",G-lt,B-Ft],["L",G+lt,B-Ft],["L",G,B+$],["Z"]]}},Pr=jr,Dr=h.a.transform,ri=Object(n.a)(Object(n.a)(Object(n.a)(Object(n.a)(Object(n.a)({},p),b),S),r),{transform:Dr,mat3:h.b}),vi=function(){function ve(G){this.graph=G,this.layoutCfg=G.get("layout")||{},this.layoutType=this.layoutCfg.type,this.initLayout()}return ve.prototype.initLayout=function(){},ve.prototype.getLayoutType=function(){return this.layoutCfg.type},ve.prototype.refreshLayout=function(){var G=this.graph;G&&(G.get("animate")?G.positionsAnimate():G.refreshPositions())},ve.prototype.changeLayout=function(G){var B=this.graph,$=this.layoutMethod;this.layoutType=G,this.layoutCfg=B.get("layout")||{},this.layoutCfg.type=G,$&&$.destroy(),this.layout()},ve.prototype.changeData=function(){var G=this.layoutMethod;G&&G.destroy(),this.layout()},ve.prototype.destroyLayout=function(){var G=this.layoutMethod,B=this.graph;G&&G.destroy(),B.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethod=void 0},ve.prototype.setDataFromGraph=function(){for(var G=[],B=[],$=[],lt=this.graph.getNodes(),Ft=this.graph.getEdges(),Jt=this.graph.getCombos(),ie=lt.length,se=0;se<ie;se++){var Ce=lt[se];if(Ce.isVisible()){var Ee=Ce.getModel();G.push(Ee)}}var un=Ft.length;for(se=0;se<un;se++){var xn=Ft[se];xn&&!xn.destroyed&&xn.isVisible()&&((Ee=xn.getModel()).isComboEdge||B.push(Ee))}var zt=Jt.length;for(se=0;se<zt;se++){var Yt=Jt[se];!Yt.destroyed&&Yt.isVisible()&&(Ee=Yt.getModel(),$.push(Ee))}return{nodes:G,edges:B,combos:$}},ve.prototype.relayout=function(G){var B=this.graph,$=this.layoutMethod,lt=this.layoutCfg;if(G){this.data=this.setDataFromGraph();var Ft=this.data.nodes;if(!Ft)return!1;this.initPositions(lt.center,Ft),$.init(this.data)}this.layoutType==="force"&&($.ticking=!1,$.forceSimulation.stop()),B.emit("beforelayout"),$.execute(G),$.isCustomLayout&&lt.onLayoutEnd&&lt.onLayoutEnd()},ve.prototype.layoutAnimate=function(){},ve.prototype.moveToZero=function(){var G=this.graph.get("data").nodes;if(G[0].x!==void 0&&G[0].x!==null&&!Ht(G[0].x)){for(var B=[0,0],$=G.length,lt=0;lt<$;lt++){var Ft=G[lt];B[0]+=Ft.x,B[1]+=Ft.y}for(B[0]/=G.length,B[1]/=G.length,lt=0;lt<$;lt++)(Ft=G[lt]).x-=B[0],Ft.y-=B[1]}},ve.prototype.initPositions=function(G,B){var $=this.graph;if(!B)return!1;var lt=!0,Ft=.85*$.get("width"),Jt=.85*$.get("height"),ie=B.length,se=Math.ceil(Math.sqrt(ie)*(Ft/Jt)),Ce=Ft/(se-1),Ee=Jt/(Math.ceil(ie/se)-1);isFinite(Ce)&&Ce||(Ce=0),isFinite(Ee)&&Ce||(Ee=0);for(var un=G[0]-Ft/2,xn=G[1]-Jt/2,zt=B.length,Yt=0;Yt<zt;Yt++){var Se=B[Yt];Ht(Se.x)&&(lt=!1,Se.x=Yt%se*Ce+un),Ht(Se.y)&&(lt=!1,Se.y=Math.floor(Yt/se)*Ee+xn)}return lt},ve.prototype.destroy=function(){var G=this.layoutMethod;this.graph=null,G&&(G.destroy(),G.destroyed=!0),this.destroyed=!0},ve}(),ii=function(G){this.graph=G,this.destroyed=!1,this.initEvents()};(function(ve){ve.CLICK="click",ve.DBLCLICK="dblclick",ve.MOUSEDOWN="mousedown",ve.MOUDEUP="mouseup",ve.CONTEXTMENU="contextmenu",ve.MOUSEENTER="mouseenter",ve.MOUSEOUT="mouseout",ve.MOUSEOVER="mouseover",ve.MOUSEMOVE="mousemove",ve.MOUSELEAVE="mouseleave",ve.DRAGSTART="dragstart",ve.DRAGEND="dragend",ve.DRAG="drag",ve.DRAGENTER="dragenter",ve.DRAGLEAVE="dragleave",ve.DRAGOVER="dragover",ve.DRAGOUT="dragout",ve.DDROP="drop",ve.KEYUP="keyup",ve.KEYDOWN="keydown",ve.WHEEL="wheel",ve.FOCUS="focus",ve.BLUR="blur",ve.TOUCHSTART="touchstart",ve.TOUCHMOVE="touchmove",ve.TOUCHEND="touchend",ve.NODE_CONTEXTMENU="node:contextmenu",ve.NODE_CLICK="node:click",ve.NODE_DBLCLICK="node:dblclick",ve.NODE_MOUSEDOWN="node:mousedown",ve.NODE_MOUSEUP="node:mouseup",ve.NODE_MOUSEENTER="node:mouseenter",ve.NODE_MOUSELEAVE="node:mouseleave",ve.NODE_MOUSEMOVE="node:mousemove",ve.NODE_MOUSEOUT="node:mouseout",ve.NODE_MOUSEOVER="node:mouseover",ve.NODE_DROP="node:drop",ve.NODE_DRAGOVER="node:dragover",ve.NODE_DRAGENTER="node:dragenter",ve.NODE_DRAGLEAVE="node:dragleave",ve.NODE_DRAGSTART="node:dragstart",ve.NODE_DRAG="node:drag",ve.NODE_DRAGEND="node:dragend",ve.COMBO_CONTEXTMENU="combo:contextmenu",ve.COMBO_CLICK="combo:click",ve.COMBO_DBLCLICK="combo:dblclick",ve.COMBO_MOUSEDOWN="combo:mousedown",ve.COMBO_MOUSEUP="combo:mouseup",ve.COMBO_MOUSEENTER="combo:mouseenter",ve.COMBO_MOUSELEAVE="combo:mouseleave",ve.COMBO_MOUSEMOVE="combo:mousemove",ve.COMBO_MOUSEOUT="combo:mouseout",ve.COMBO_MOUSEOVER="combo:mouseover",ve.COMBO_DROP="combo:drop",ve.COMBO_DRAGOVER="combo:dragover",ve.COMBO_DRAGENTER="combo:dragenter",ve.COMBO_DRAGLEAVE="combo:dragleave",ve.COMBO_DRAGSTART="combo:dragstart",ve.COMBO_DRAG="combo:drag",ve.COMBO_DRAGEND="combo:dragend",ve.EDGE_CONTEXTMENU="edge:contextmenu",ve.EDGE_CLICK="edge:click",ve.EDGE_DBLCLICK="edge:dblclick",ve.EDGE_MOUSEDOWN="edge:mousedown",ve.EDGE_MOUSEUP="edge:mouseup",ve.EDGE_MOUSEENTER="edge:mouseenter",ve.EDGE_MOUSELEAVE="edge:mouseleave",ve.EDGE_MOUSEMOVE="edge:mousemove",ve.EDGE_MOUSEOUT="edge:mouseout",ve.EDGE_MOUSEOVER="edge:mouseover",ve.EDGE_DROP="edge:drop",ve.EDGE_DRAGOVER="edge:dragover",ve.EDGE_DRAGENTER="edge:dragenter",ve.EDGE_DRAGLEAVE="edge:dragleave",ve.CANVAS_CONTEXTMENU="canvas:contextmenu",ve.CANVAS_CLICK="canvas:click",ve.CANVAS_DBLCLICK="canvas:dblclick",ve.CANVAS_MOUSEDOWN="canvas:mousedown",ve.CANVAS_MOUSEUP="canvas:mouseup",ve.CANVAS_MOUSEENTER="canvas:mouseenter",ve.CANVAS_MOUSELEAVE="canvas:mouseleave",ve.CANVAS_MOUSEMOVE="canvas:mousemove",ve.CANVAS_MOUSEOUT="canvas:mouseout",ve.CANVAS_MOUSEOVER="canvas:mouseover",ve.CANVAS_DROP="canvas:drop",ve.CANVAS_DRAGENTER="canvas:dragenter",ve.CANVAS_DRAGLEAVE="canvas:dragleave",ve.CANVAS_DRAGSTART="canvas:dragstart",ve.CANVAS_DRAG="canvas:drag",ve.CANVAS_DRAGEND="canvas:dragend",ve.BEFORERENDER="beforerender",ve.AFTERRENDER="afterrender",ve.BEFOREADDITEM="beforeadditem",ve.AFTERADDITEM="afteradditem",ve.BEFOREREMOVEITEM="beforeremoveitem",ve.AFTERREMOVEITEM="afterremoveitem",ve.BEFOREUPDATEITEM="beforeupdateitem",ve.AFTERUPDATEITEM="afterupdateitem",ve.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",ve.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",ve.BEFOREITEMSTATECHANGE="beforeitemstatechange",ve.AFTERITEMSTATECHANGE="afteritemstatechange",ve.BEFOREITEMREFRESH="beforeitemrefresh",ve.AFTERITEMREFRESH="afteritemrefresh",ve.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",ve.AFTERITEMSTATESCLEAR="afteritemstatesclear",ve.BEFOREMODECHANGE="beforemodechange",ve.AFTERMODECHANGE="aftermodechange",ve.BEFORELAYOUT="beforelayout",ve.AFTERLAYOUT="afterlayout",ve.BEFORECREATEEDGE="beforecreateedge",ve.AFTERCREATEEDGE="aftercreateedge",ve.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",ve.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",ve.BEFOREGRAPHREFRESH="beforegraphrefresh",ve.AFTERGRAPHREFRESH="aftergraphrefresh",ve.BEFOREANIMATE="beforeanimate",ve.AFTERANIMATE="afteranimate",ve.BEFOREPAINT="beforepaint",ve.AFTERPAINT="afterpaint",ve.BEFORECOLLAPSEEXPANDCOMBO="beforecollapseexpandcombo",ve.AFTERCOLLAPSEEXPANDCOMBO="aftercollapseexpandcombo",ve.GRAPHSTATECHANGE="graphstatechange",ve.AFTERACTIVATERELATIONS="afteractivaterelations",ve.NODESELECTCHANGE="nodeselectchange",ve.TOOLTIPCHANGE="tooltipchange",ve.WHEELZOOM="wheelzoom",ve.VIEWPORTCHANGE="viewportchange",ve.DRAGNODEEND="dragnodeend",ve.STACKCHANGE="stackchange"})(Er||(Er={}));var Si=Pr.registerNode,Ui=Pr.registerEdge,Yi=Pr.registerCombo,Bi=y.registerBehavior,Di=yt;Pr.registerNode,Pr.registerEdge,Pr.registerCombo,y.registerBehavior},function(a,E){a.exports=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),function(r){r.TextureCompressionBC="texture-compression-bc"}(E.ExtensionName||(E.ExtensionName={})),function(r){r.ClampToEdge="clamp-to-edge",r.Repeat="repeat",r.MirrorRepeat="mirror-repeat"}(E.AddressMode||(E.AddressMode={})),function(r){r.UniformBuffer="uniform-buffer",r.StorageBuffer="storage-buffer",r.ReadonlyStorageBuffer="readonly-storage-buffer",r.Sampler="sampler",r.ComparisonSampler="comparison-sampler",r.SampledTexture="sampled-texture",r.ReadonlyStorageTexture="readonly-storage-texture",r.WriteonlyStorageTexture="writeonly-storage-texture"}(E.BindingType||(E.BindingType={})),function(r){r.Zero="zero",r.One="one",r.SrcColor="src-color",r.OneMinusSrcColor="one-minus-src-color",r.SrcAlpha="src-alpha",r.OneMinusSrcAlpha="one-minus-src-alpha",r.DstColor="dst-color",r.OneMinusDstColor="one-minus-dst-color",r.DstAlpha="dst-alpha",r.OneMinusDstAlpha="one-minus-dst-alpha",r.SrcAlphaSaturated="src-alpha-saturated",r.BlendColor="blend-color",r.OneMinusBlendColor="one-minus-blend-color"}(E.BlendFactor||(E.BlendFactor={})),function(r){r.Add="add",r.Subtract="subtract",r.ReverseSubtract="reverse-subtract",r.Min="min",r.Max="max"}(E.BlendOperation||(E.BlendOperation={})),function(r){r.Never="never",r.Less="less",r.Equal="equal",r.LessEqual="less-equal",r.Greater="greater",r.NotEqual="not-equal",r.GreaterEqual="greater-equal",r.Always="always"}(E.CompareFunction||(E.CompareFunction={})),function(r){r.None="none",r.Front="front",r.Back="back"}(E.CullMode||(E.CullMode={})),function(r){r.Nearest="nearest",r.Linear="linear"}(E.FilterMode||(E.FilterMode={})),function(r){r.CCW="ccw",r.CW="cw"}(E.FrontFace||(E.FrontFace={})),function(r){r.Uint16="uint16",r.Uint32="uint32"}(E.IndexFormat||(E.IndexFormat={})),function(r){r.Vertex="vertex",r.Instance="instance"}(E.InputStepMode||(E.InputStepMode={})),function(r){r.Load="load"}(E.LoadOp||(E.LoadOp={})),function(r){r.PointList="point-list",r.LineList="line-list",r.LineStrip="line-strip",r.TriangleList="triangle-list",r.TriangleStrip="triangle-strip"}(E.PrimitiveTopology||(E.PrimitiveTopology={})),function(r){r.Keep="keep",r.Zero="zero",r.Replace="replace",r.Invert="invert",r.IncrementClamp="increment-clamp",r.DecrementClamp="decrement-clamp",r.IncrementWrap="increment-wrap",r.DecrementWrap="decrement-wrap"}(E.StencilOperation||(E.StencilOperation={})),function(r){r.Store="store",r.Clear="clear"}(E.StoreOp||(E.StoreOp={})),function(r){r.E1d="1d",r.E2d="2d",r.E3d="3d"}(E.TextureDimension||(E.TextureDimension={})),function(r){r.R8Unorm="r8unorm",r.R8Snorm="r8snorm",r.R8Uint="r8uint",r.R8Sint="r8sint",r.R16Uint="r16uint",r.R16Sint="r16sint",r.R16Float="r16float",r.RG8Unorm="rg8unorm",r.RG8Snorm="rg8snorm",r.RG8Uint="rg8uint",r.RG8Sint="rg8sint",r.R32Uint="r32uint",r.R32Sint="r32sint",r.R32Float="r32float",r.RG16Uint="rg16uint",r.RG16Sint="rg16sint",r.RG16Float="rg16float",r.RGBA8Unorm="rgba8unorm",r.RGBA8UnormSRGB="rgba8unorm-srgb",r.RGBA8Snorm="rgba8snorm",r.RGBA8Uint="rgba8uint",r.RGBA8Sint="rgba8sint",r.BGRA8Unorm="bgra8unorm",r.BGRA8UnormSRGB="bgra8unorm-srgb",r.RGB10A2Unorm="rgb10a2unorm",r.RG11B10Float="rg11b10float",r.RG32Uint="rg32uint",r.RG32Sint="rg32sint",r.RG32Float="rg32float",r.RGBA16Uint="rgba16uint",r.RGBA16Sint="rgba16sint",r.RGBA16Float="rgba16float",r.RGBA32Uint="rgba32uint",r.RGBA32Sint="rgba32sint",r.RGBA32Float="rgba32float",r.Depth32Float="depth32float",r.Depth24Plus="depth24plus",r.Depth24PlusStencil8="depth24plus-stencil8"}(E.TextureFormat||(E.TextureFormat={})),function(r){r.Float="float",r.Sint="sint",r.Uint="uint"}(E.TextureComponentType||(E.TextureComponentType={})),function(r){r.E1d="1d",r.E2d="2d",r.E2dArray="2d-array",r.Cube="cube",r.CubeArray="cube-array",r.E3d="3d"}(E.TextureViewDimension||(E.TextureViewDimension={})),function(r){r.Uchar2="uchar2",r.Uchar4="uchar4",r.Char2="char2",r.Char4="char4",r.Uchar2Norm="uchar2norm",r.Uchar4Norm="uchar4norm",r.Char2Norm="char2norm",r.Char4Norm="char4norm",r.Ushort2="ushort2",r.Ushort4="ushort4",r.Short2="short2",r.Short4="short4",r.Ushort2Norm="ushort2norm",r.Ushort4Norm="ushort4norm",r.Short2Norm="short2norm",r.Short4Norm="short4norm",r.Half2="half2",r.Half4="half4",r.Float="float",r.Float2="float2",r.Float3="float3",r.Float4="float4",r.Uint="uint",r.Uint2="uint2",r.Uint3="uint3",r.Uint4="uint4",r.Int="int",r.Int2="int2",r.Int3="int3",r.Int4="int4"}(E.VertexFormat||(E.VertexFormat={})),function(r){r.All="all",r.StencilOnly="stencil-only",r.DepthOnly="depth-only"}(E.TextureAspect||(E.TextureAspect={})),function(r){r.Error="error",r.Warning="warning",r.Info="info"}(E.CompilationMessageType||(E.CompilationMessageType={})),function(r){r.Occlusion="occlusion"}(E.QueryType||(E.QueryType={})),function(r){r[r.MapRead=1]="MapRead",r[r.MapWrite=2]="MapWrite",r[r.CopySrc=4]="CopySrc",r[r.CopyDst=8]="CopyDst",r[r.Index=16]="Index",r[r.Vertex=32]="Vertex",r[r.Uniform=64]="Uniform",r[r.Storage=128]="Storage",r[r.Indirect=256]="Indirect",r[r.QueryResolve=512]="QueryResolve"}(E.BufferUsage||(E.BufferUsage={})),function(r){r[r.Red=1]="Red",r[r.Green=2]="Green",r[r.Blue=4]="Blue",r[r.Alpha=8]="Alpha",r[r.All=15]="All"}(E.ColorWrite||(E.ColorWrite={})),function(r){r[r.Vertex=1]="Vertex",r[r.Fragment=2]="Fragment",r[r.Compute=4]="Compute"}(E.ShaderStage||(E.ShaderStage={})),function(r){r[r.CopySrc=1]="CopySrc",r[r.CopyDst=2]="CopyDst",r[r.Sampled=4]="Sampled",r[r.Storage=8]="Storage",r[r.OutputAttachment=16]="OutputAttachment"}(E.TextureUsage||(E.TextureUsage={})),function(r){r[r.Read=1]="Read",r[r.Write=2]="Write"}(E.MapMode||(E.MapMode={}))},function(a,E){function e(r,p){for(var b=0;b<p.length;b++){var S=p[b];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(r,S.key,S)}}a.exports=function(r,p,b){return p&&e(r.prototype,p),b&&e(r,b),r}},function(a,E,e){a.exports=e(442)},function(a,E,e){"use strict";e.d(E,"b",function(){return p.a}),e.d(E,"c",function(){return p.d}),e.d(E,"d",function(){return p.e}),e.d(E,"a",function(){return r});var r={};e.r(r),e.d(r,"leftTranslate",function(){return b}),e.d(r,"leftRotate",function(){return S}),e.d(r,"leftScale",function(){return l}),e.d(r,"transform",function(){return A}),e.d(r,"direction",function(){return j}),e.d(r,"angleTo",function(){return y}),e.d(r,"vertical",function(){return n});var p=e(2);function b(s,h,M){var O=[0,0,0,0,0,0,0,0,0];return p.a.fromTranslation(O,M),p.a.multiply(s,O,h)}function S(s,h,M){var O=[0,0,0,0,0,0,0,0,0];return p.a.fromRotation(O,M),p.a.multiply(s,O,h)}function l(s,h,M){var O=[0,0,0,0,0,0,0,0,0];return p.a.fromScaling(O,M),p.a.multiply(s,O,h)}function A(s,h){for(var M,O,T,v=s?[].concat(s):[1,0,0,0,1,0,0,0,1],m=0,C=h.length;m<C;m++){var D=h[m];switch(D[0]){case"t":b(v,v,[D[1],D[2]]);break;case"s":l(v,v,[D[1],D[2]]);break;case"r":S(v,v,D[1]);break;case"m":M=v,O=v,T=D[1],p.a.multiply(M,T,O)}}return v}function j(s,h){return s[0]*h[1]-h[0]*s[1]}function y(s,h,M){var O=p.d.angle(s,h),T=j(s,h)>=0;return M?T?2*Math.PI-O:O:T?O:2*Math.PI-O}function n(s,h,M){return M?(s[0]=h[1],s[1]=-1*h[0]):(s[0]=-1*h[1],s[1]=h[0]),s}},function(a,E,e){"use strict";e.d(E,"b",function(){return r}),e.d(E,"a",function(){return p}),e.d(E,"c",function(){return b});var r=1e-6,p=typeof Float32Array!="undefined"?Float32Array:Array,b=Math.random;Math.hypot||(Math.hypot=function(){for(var S=0,l=arguments.length;l--;)S+=arguments[l]*arguments[l];return Math.sqrt(S)})},function(a,E){a.exports=function(e,r,p,b){p&&Object.defineProperty(e,r,{enumerable:p.enumerable,configurable:p.configurable,writable:p.writable,value:p.initializer?p.initializer.call(b):void 0})}},function(a,E){a.exports=function(e,r,p,b,S){var l={};return Object.keys(b).forEach(function(A){l[A]=b[A]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=p.slice().reverse().reduce(function(A,j){return j(e,r,A)||A},l),S&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(S):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(e,r,l),l=null),l}},function(a,E,e){"use strict";function r(y,n,s){if(y){if(typeof y.addEventListener=="function")return y.addEventListener(n,s,!1),{remove:function(){y.removeEventListener(n,s,!1)}};if(typeof y.attachEvent=="function")return y.attachEvent("on"+n,s),{remove:function(){y.detachEvent("on"+n,s)}}}}var p,b,S,l;function A(y){p||(p=document.createElement("table"),b=document.createElement("tr"),S=/^\s*<(\w+|!)[^>]*>/,l={tr:document.createElement("tbody"),tbody:p,thead:p,tfoot:p,td:b,th:b,"*":document.createElement("div")});var n=S.test(y)&&RegExp.$1;n&&n in l||(n="*");var s=l[n];y=y.replace(/(^\s*)|(\s*$)/g,""),s.innerHTML=""+y;var h=s.childNodes[0];return s.removeChild(h),h}function j(y,n){if(y)for(var s in n)n.hasOwnProperty(s)&&(y.style[s]=n[s]);return y}e.d(E,"a",function(){return r}),e.d(E,"b",function(){return A}),e.d(E,"c",function(){return j})},function(a,E){function e(r,p,b,S,l,A,j){try{var y=r[A](j),n=y.value}catch(s){return void b(s)}y.done?p(n):Promise.resolve(n).then(S,l)}a.exports=function(r){return function(){var p=this,b=arguments;return new Promise(function(S,l){var A=r.apply(p,b);function j(n){e(A,S,l,j,y,"next",n)}function y(n){e(A,S,l,j,y,"throw",n)}j(void 0)})}}},function(a,E,e){"use strict";e.d(E,"a",function(){return r}),e.d(E,"b",function(){return p});var r={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},p={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"}},function(a,E,e){"use strict";e.d(E,"d",function(){return p}),e.d(E,"b",function(){return b}),e.d(E,"e",function(){return S}),e.d(E,"f",function(){return l}),e.d(E,"l",function(){return A}),e.d(E,"j",function(){return j});var r=e(0);function p(){return window?window.devicePixelRatio:1}function b(y,n,s,h){var M=y-s,O=n-h;return Math.sqrt(M*M+O*O)}function S(y,n,s,h,M,O){return M>=y&&M<=y+s&&O>=n&&O<=n+h}function l(y,n){return!(n.minX>y.maxX||n.maxX<y.minX||n.minY>y.maxY||n.maxY<y.minY)}function A(y,n){return y&&n?{minX:Math.min(y.minX,n.minX),minY:Math.min(y.minY,n.minY),maxX:Math.max(y.maxX,n.maxX),maxY:Math.max(y.maxY,n.maxY)}:y||n}function j(y,n){return y[0]===n[0]&&y[1]===n[1]}e.d(E,"i",function(){return r.s}),e.d(E,"k",function(){return r.x}),e.d(E,"h",function(){return r.r}),e.d(E,"g",function(){return r.m}),e.d(E,"c",function(){return r.f}),e.d(E,"o",function(){return r.G}),e.d(E,"m",function(){return r.B}),e.d(E,"n",function(){return r.D}),e.d(E,"a",function(){return r.b})},function(a,E,e){"use strict";var r=e(51);e.d(E,"PathUtil",function(){return r});var p=e(156);e.o(p,"ICanvas")&&e.d(E,"ICanvas",function(){return p.ICanvas}),e.o(p,"IGroup")&&e.d(E,"IGroup",function(){return p.IGroup}),e.o(p,"IShape")&&e.d(E,"IShape",function(){return p.IShape});var b=e(157);e.o(b,"ICanvas")&&e.d(E,"ICanvas",function(){return b.ICanvas}),e.o(b,"IGroup")&&e.d(E,"IGroup",function(){return b.IGroup}),e.o(b,"IShape")&&e.d(E,"IShape",function(){return b.IShape});var S=e(114);e.d(E,"Event",function(){return S.a}),e(115);var l=e(247);e.d(E,"AbstractCanvas",function(){return l.a});var A=e(159);e.d(E,"AbstractGroup",function(){return A.a});var j=e(160);e.d(E,"AbstractShape",function(){return j.a});var y=e(248);e.d(E,"getBBoxMethod",function(){return y.a});var n=e(68);e.d(E,"getTextHeight",function(){return n.b}),e.d(E,"assembleFont",function(){return n.a});var s=e(19);e.d(E,"isAllowCapture",function(){return s.b});var h=e(39);e.d(E,"multiplyVec2",function(){return h.c}),e.d(E,"invert",function(){return h.a});var M=e(116);e.d(E,"getOffScreenContext",function(){return M.a})},function(a,E,e){"use strict";e.d(E,"j",function(){return p}),e.d(E,"c",function(){return b}),e.d(E,"g",function(){return S}),e.d(E,"b",function(){return l});var r=e(0);function p(A,j){var y=A.indexOf(j);y!==-1&&A.splice(y,1)}e.d(E,"e",function(){return r.s}),e.d(E,"d",function(){return r.r}),e.d(E,"h",function(){return r.x}),e.d(E,"f",function(){return r.v}),e.d(E,"i",function(){return r.A}),e.d(E,"a",function(){return r.f}),e.d(E,"k",function(){return r.I});var b=typeof window!="undefined"&&window.document!==void 0;function S(A,j){if(A.isCanvas())return!0;for(var y=j.getParent(),n=!1;y;){if(y===A){n=!0;break}y=y.getParent()}return n}function l(A){return A.cfg.visible&&A.cfg.capture}},function(a,E,e){"use strict";e.d(E,"e",function(){return m}),e.d(E,"b",function(){return dt}),e.d(E,"a",function(){return Rt}),e.d(E,"c",function(){return s}),e.d(E,"d",function(){return Et}),e.d(E,"f",function(){return r});var r={};function p(q){return Math.min.apply(null,q)}function b(q){return Math.max.apply(null,q)}function S(q,st,it,z){var P=q-it,H=st-z;return Math.sqrt(P*P+H*H)}function l(q,st){return Math.abs(q-st)<.001}function A(q,st){var it=p(q),z=p(st);return{x:it,y:z,width:b(q)-it,height:b(st)-z}}function j(q,st,it,z){return{minX:p([q,it]),maxX:b([q,it]),minY:p([st,z]),maxY:b([st,z])}}function y(q){return(q+2*Math.PI)%(2*Math.PI)}e.r(r),e.d(r,"distance",function(){return S}),e.d(r,"isNumberEqual",function(){return l}),e.d(r,"getBBoxByArray",function(){return A}),e.d(r,"getBBoxRange",function(){return j}),e.d(r,"piMod",function(){return y});var n=e(80),s={box:function(st,it,z,P){return A([st,z],[it,P])},length:function(st,it,z,P){return S(st,it,z,P)},pointAt:function(st,it,z,P,H){return{x:(1-H)*st+H*z,y:(1-H)*it+H*P}},pointDistance:function(st,it,z,P,H,k){var d=(z-st)*(H-st)+(P-it)*(k-it);return d<0?S(st,it,H,k):d>(z-st)*(z-st)+(P-it)*(P-it)?S(z,P,H,k):this.pointToLine(st,it,z,P,H,k)},pointToLine:function(st,it,z,P,H,k){var d=[z-st,P-it];if(n.exactEquals(d,[0,0]))return Math.sqrt((H-st)*(H-st)+(k-it)*(k-it));var g=[-d[1],d[0]];n.normalize(g,g);var F=[H-st,k-it];return Math.abs(n.dot(F,g))},tangentAngle:function(st,it,z,P){return Math.atan2(P-it,z-st)}};function h(q,st,it,z,P,H){var k,d=1/0,g=[it,z],F=20;H&&H>200&&(F=H/10);for(var V=1/F,tt=V/10,ot=0;ot<=F;ot++){var at=ot*V,At=[P.apply(null,q.concat([at])),P.apply(null,st.concat([at]))];(Tt=S(g[0],g[1],At[0],At[1]))<d&&(k=at,d=Tt)}if(k===0)return{x:q[0],y:st[0]};if(k===1){var yt=q.length;return{x:q[yt-1],y:st[yt-1]}}for(d=1/0,ot=0;ot<32&&!(tt<1e-4);ot++){var gt=k-tt,bt=k+tt,Tt=(At=[P.apply(null,q.concat([gt])),P.apply(null,st.concat([gt]))],S(g[0],g[1],At[0],At[1]));if(gt>=0&&Tt<d)k=gt,d=Tt;else{var Dt=[P.apply(null,q.concat([bt])),P.apply(null,st.concat([bt]))],Ut=S(g[0],g[1],Dt[0],Dt[1]);bt<=1&&Ut<d?(k=bt,d=Ut):tt*=.5}}return{x:P.apply(null,q.concat([k])),y:P.apply(null,st.concat([k]))}}function M(q,st,it,z){var P=1-z;return P*P*q+2*z*P*st+z*z*it}function O(q,st,it){var z=q+it-2*st;if(l(z,0))return[.5];var P=(q-st)/z;return P<=1&&P>=0?[P]:[]}function T(q,st,it,z){return 2*(1-z)*(st-q)+2*z*(it-st)}function v(q,st,it,z,P,H,k){var d=M(q,it,P,k),g=M(st,z,H,k),F=s.pointAt(q,st,it,z,k),V=s.pointAt(it,z,P,H,k);return[[q,st,F.x,F.y,d,g],[d,g,V.x,V.y,P,H]]}var m={box:function(st,it,z,P,H,k){var d=O(st,z,H)[0],g=O(it,P,k)[0],F=[st,H],V=[it,k];return d!==void 0&&F.push(M(st,z,H,d)),g!==void 0&&V.push(M(it,P,k,g)),A(F,V)},length:function(st,it,z,P,H,k){return function d(g,F,V,tt,ot,at,At){if(At===0)return(S(g,F,V,tt)+S(V,tt,ot,at)+S(g,F,ot,at))/2;var yt=v(g,F,V,tt,ot,at,.5),gt=yt[0],bt=yt[1];return gt.push(At-1),bt.push(At-1),d.apply(null,gt)+d.apply(null,bt)}(st,it,z,P,H,k,3)},nearestPoint:function(st,it,z,P,H,k,d,g){return h([st,z,H],[it,P,k],d,g,M)},pointDistance:function(st,it,z,P,H,k,d,g){var F=this.nearestPoint(st,it,z,P,H,k,d,g);return S(F.x,F.y,d,g)},interpolationAt:M,pointAt:function(st,it,z,P,H,k,d){return{x:M(st,z,H,d),y:M(it,P,k,d)}},divide:function(st,it,z,P,H,k,d){return v(st,it,z,P,H,k,d)},tangentAngle:function(st,it,z,P,H,k,d){var g=T(st,z,H,d),F=T(it,P,k,d);return y(Math.atan2(F,g))}};function C(q,st,it,z,P){var H=1-P;return H*H*H*q+3*st*P*H*H+3*it*P*P*H+z*P*P*P}function D(q,st,it,z,P){var H=1-P;return 3*(H*H*(st-q)+2*H*P*(it-st)+P*P*(z-it))}function Y(q,st,it,z){var P,H,k,d=-3*q+9*st-9*it+3*z,g=6*q-12*st+6*it,F=3*st-3*q,V=[];if(l(d,0))l(g,0)||(P=-F/g)>=0&&P<=1&&V.push(P);else{var tt=g*g-4*d*F;l(tt,0)?V.push(-g/(2*d)):tt>0&&(H=(-g-(k=Math.sqrt(tt)))/(2*d),(P=(-g+k)/(2*d))>=0&&P<=1&&V.push(P),H>=0&&H<=1&&V.push(H))}return V}function Z(q,st,it,z,P,H,k,d,g){var F=C(q,it,P,k,g),V=C(st,z,H,d,g),tt=s.pointAt(q,st,it,z,g),ot=s.pointAt(it,z,P,H,g),at=s.pointAt(P,H,k,d,g),At=s.pointAt(tt.x,tt.y,ot.x,ot.y,g),yt=s.pointAt(ot.x,ot.y,at.x,at.y,g);return[[q,st,tt.x,tt.y,At.x,At.y,F,V],[F,V,yt.x,yt.y,at.x,at.y,k,d]]}function et(q,st,it,z,P,H,k,d,g){if(g===0)return function(ot,at){for(var At=0,yt=ot.length,gt=0;gt<yt;gt++)At+=S(ot[gt],at[gt],ot[(gt+1)%yt],at[(gt+1)%yt]);return At/2}([q,it,P,k],[st,z,H,d]);var F=Z(q,st,it,z,P,H,k,d,.5),V=F[0],tt=F[1];return V.push(g-1),tt.push(g-1),et.apply(null,V)+et.apply(null,tt)}var dt={extrema:Y,box:function(st,it,z,P,H,k,d,g){for(var F=[st,d],V=[it,g],tt=Y(st,z,H,d),ot=Y(it,P,k,g),at=0;at<tt.length;at++)F.push(C(st,z,H,d,tt[at]));for(at=0;at<ot.length;at++)V.push(C(it,P,k,g,ot[at]));return A(F,V)},length:function(st,it,z,P,H,k,d,g){return et(st,it,z,P,H,k,d,g,3)},nearestPoint:function(st,it,z,P,H,k,d,g,F,V,tt){return h([st,z,H,d],[it,P,k,g],F,V,C,tt)},pointDistance:function(st,it,z,P,H,k,d,g,F,V,tt){var ot=this.nearestPoint(st,it,z,P,H,k,d,g,F,V,tt);return S(ot.x,ot.y,F,V)},interpolationAt:C,pointAt:function(st,it,z,P,H,k,d,g,F){return{x:C(st,z,H,d,F),y:C(it,P,k,g,F)}},divide:function(st,it,z,P,H,k,d,g,F){return Z(st,it,z,P,H,k,d,g,F)},tangentAngle:function(st,it,z,P,H,k,d,g,F){var V=D(st,z,H,d,F),tt=D(it,P,k,g,F);return y(Math.atan2(tt,V))}};function ht(q,st){var it=Math.abs(q);return st>0?it:-1*it}var St=function(st,it,z,P,H,k){var d=z,g=P;if(d===0||g===0)return{x:st,y:it};for(var F,V,tt=H-st,ot=k-it,at=Math.abs(tt),At=Math.abs(ot),yt=d*d,gt=g*g,bt=Math.PI/4,Tt=0;Tt<4;Tt++){F=d*Math.cos(bt),V=g*Math.sin(bt);var Dt=(yt-gt)*Math.pow(Math.cos(bt),3)/d,Ut=(gt-yt)*Math.pow(Math.sin(bt),3)/g,jt=F-Dt,Vt=V-Ut,Ht=at-Dt,re=At-Ut,pe=Math.hypot(Vt,jt),ye=Math.hypot(re,Ht);bt+=pe*Math.asin((jt*re-Vt*Ht)/(pe*ye))/Math.sqrt(yt+gt-F*F-V*V),bt=Math.min(Math.PI/2,Math.max(0,bt))}return{x:st+ht(F,tt),y:it+ht(V,ot)}};function wt(q,st,it,z,P,H){return it*Math.cos(P)*Math.cos(H)-z*Math.sin(P)*Math.sin(H)+q}function xt(q,st,it,z,P,H){return it*Math.sin(P)*Math.cos(H)+z*Math.cos(P)*Math.sin(H)+st}function ft(q,st,it){return{x:q*Math.cos(it),y:st*Math.sin(it)}}function Bt(q,st,it){var z=Math.cos(it),P=Math.sin(it);return[q*z-st*P,q*P+st*z]}var Rt={box:function(st,it,z,P,H,k,d){for(var g=function(jt,Vt,Ht){return Math.atan(-Vt/jt*Math.tan(Ht))}(z,P,H),F=1/0,V=-1/0,tt=[k,d],ot=2*-Math.PI;ot<=2*Math.PI;ot+=Math.PI){var at=g+ot;k<d?k<at&&at<d&&tt.push(at):d<at&&at<k&&tt.push(at)}for(ot=0;ot<tt.length;ot++){var At=wt(st,0,z,P,H,tt[ot]);At<F&&(F=At),At>V&&(V=At)}var yt=function(jt,Vt,Ht){return Math.atan(Vt/(jt*Math.tan(Ht)))}(z,P,H),gt=1/0,bt=-1/0,Tt=[k,d];for(ot=2*-Math.PI;ot<=2*Math.PI;ot+=Math.PI){var Dt=yt+ot;k<d?k<Dt&&Dt<d&&Tt.push(Dt):d<Dt&&Dt<k&&Tt.push(Dt)}for(ot=0;ot<Tt.length;ot++){var Ut=xt(0,it,z,P,H,Tt[ot]);Ut<gt&&(gt=Ut),Ut>bt&&(bt=Ut)}return{x:F,y:gt,width:V-F,height:bt-gt}},length:function(st,it,z,P,H,k,d){},nearestPoint:function(st,it,z,P,H,k,d,g,F){var V=Bt(g-st,F-it,-H),tt=V[0],ot=V[1],at=St(0,0,z,P,tt,ot),At=function(gt,bt,Tt,Dt){return(Math.atan2(Dt*gt,Tt*bt)+2*Math.PI)%(2*Math.PI)}(z,P,at.x,at.y);At<k?at=ft(z,P,k):At>d&&(at=ft(z,P,d));var yt=Bt(at.x,at.y,H);return{x:yt[0]+st,y:yt[1]+it}},pointDistance:function(st,it,z,P,H,k,d,g,F){var V=this.nearestPoint(st,it,z,P,g,F);return S(V.x,V.y,g,F)},pointAt:function(st,it,z,P,H,k,d,g){var F=(d-k)*g+k;return{x:wt(st,0,z,P,H,F),y:xt(0,it,z,P,H,F)}},tangentAngle:function(st,it,z,P,H,k,d,g){var F=(d-k)*g+k,V=function(ot,at,At,yt,gt,bt,Tt,Dt){return-1*At*Math.cos(gt)*Math.sin(Dt)-yt*Math.sin(gt)*Math.cos(Dt)}(0,0,z,P,H,0,0,F),tt=function(ot,at,At,yt,gt,bt,Tt,Dt){return-1*At*Math.sin(gt)*Math.sin(Dt)+yt*Math.cos(gt)*Math.cos(Dt)}(0,0,z,P,H,0,0,F);return y(Math.atan2(tt,V))}};function Ot(q){for(var st=0,it=[],z=0;z<q.length-1;z++){var P=q[z],H=q[z+1],k=S(P[0],P[1],H[0],H[1]),d={from:P,to:H,length:k};it.push(d),st+=k}return{segments:it,totalLength:st}}function X(q){if(q.length<2)return 0;for(var st=0,it=0;it<q.length-1;it++){var z=q[it],P=q[it+1];st+=S(z[0],z[1],P[0],P[1])}return st}function ut(q,st){if(st>1||st<0||q.length<2)return null;var it=Ot(q),z=it.segments,P=it.totalLength;if(P===0)return{x:q[0][0],y:q[0][1]};for(var H=0,k=null,d=0;d<z.length;d++){var g=z[d],F=g.from,V=g.to,tt=g.length/P;if(st>=H&&st<=H+tt){var ot=(st-H)/tt;k=s.pointAt(F[0],F[1],V[0],V[1],ot);break}H+=tt}return k}function vt(q,st){if(st>1||st<0||q.length<2)return 0;for(var it=Ot(q),z=it.segments,P=it.totalLength,H=0,k=0,d=0;d<z.length;d++){var g=z[d],F=g.from,V=g.to,tt=g.length/P;if(st>=H&&st<=H+tt){k=Math.atan2(V[1]-F[1],V[0]-F[0]);break}H+=tt}return k}function pt(q,st,it){for(var z=1/0,P=0;P<q.length-1;P++){var H=q[P],k=q[P+1],d=s.pointDistance(H[0],H[1],k[0],k[1],st,it);d<z&&(z=d)}return z}var Et={box:function(st){for(var it=[],z=[],P=0;P<st.length;P++){var H=st[P];it.push(H[0]),z.push(H[1])}return A(it,z)},length:function(st){return X(st)},pointAt:function(st,it){return ut(st,it)},pointDistance:function(st,it,z){return pt(st,it,z)},tangentAngle:function(st,it){return vt(st,it)}}},function(a,E){function e(r){return a.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(p){return p.__proto__||Object.getPrototypeOf(p)},e(r)}a.exports=e},function(a,E,e){"use strict";e.d(E,"b",function(){return b}),e.d(E,"a",function(){return S}),e.d(E,"d",function(){return l}),e.d(E,"c",function(){return A});var r=e(0),p=e(16);function b(j){return document.createElementNS("http://www.w3.org/2000/svg",j)}function S(j){var y=p.a[j.type],n=j.getParent();if(!y)throw new Error("the type "+j.type+" is not supported by svg");var s=b(y);if(j.get("id")&&(s.id=j.get("id")),j.set("el",s),j.set("attrs",{}),n){var h=n.get("el");h||(h=n.createDom(),n.set("el",h)),h.appendChild(s)}return s}function l(j,y){var n=j.get("el"),s=Object(r.F)(n.children).sort(y),h=document.createDocumentFragment();s.forEach(function(M){h.appendChild(M)}),n.appendChild(h)}function A(j,y){var n=j.parentNode,s=Array.from(n.childNodes).filter(function(T){return T.nodeType===1&&T.nodeName.toLowerCase()!=="defs"}),h=s[y],M=s.indexOf(j);if(h){if(M>y)n.insertBefore(j,h);else if(M<y){var O=s[y+1];O?n.insertBefore(j,O):n.appendChild(j)}}else n.appendChild(j)}},function(a,E,e){var r=e(474),p=e(475),b=e(218),S=e(476);a.exports=function(l){return r(l)||p(l)||b(l)||S()}},function(a,E,e){var r;try{r={cloneDeep:e(383),constant:e(134),defaults:e(384),each:e(181),filter:e(184),find:e(385),flatten:e(212),forEach:e(182),forIn:e(390),has:e(195),isUndefined:e(196),last:e(391),map:e(197),mapValues:e(392),max:e(393),merge:e(395),min:e(400),minBy:e(401),now:e(402),pick:e(403),range:e(408),reduce:e(199),sortBy:e(411),uniqueId:e(416),values:e(205),zipObject:e(417)}}catch(p){}r||(r=window._),a.exports=r},function(a,E){a.exports=function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(a,E){var e=Array.isArray;a.exports=e},function(a,E,e){var r=e(472);a.exports=function(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(b&&b.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),b&&r(p,b)}},function(a,E,e){var r=e(90),p=e(25);a.exports=function(b,S){return!S||r(S)!=="object"&&typeof S!="function"?p(b):S}},function(a,E,e){"use strict";e.d(E,"a",function(){return j}),e.d(E,"d",function(){return y}),e.d(E,"b",function(){return n}),e.d(E,"c",function(){return s}),e.d(E,"e",function(){return O}),e.d(E,"h",function(){return T}),e.d(E,"f",function(){return v}),e.d(E,"g",function(){return m});var r=e(0),p=e(120),b=e(89),S=e(17),l=e(34),A={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function j(C,D){var Y=D.attr();for(var Z in Y){var et=Y[Z],dt=A[Z]?A[Z]:Z;dt==="matrix"&&et?C.transform(et[0],et[1],et[3],et[4],et[6],et[7]):dt==="lineDash"&&C.setLineDash?Object(r.m)(et)&&C.setLineDash(et):(dt==="strokeStyle"||dt==="fillStyle"?et=Object(p.b)(C,D,et):dt==="globalAlpha"&&(et*=C.globalAlpha),C[dt]=et)}}function y(C,D,Y){for(var Z=0;Z<D.length;Z++){var et=D[Z];et.cfg.visible?et.draw(C,Y):et.skipDraw()}}function n(C,D,Y){var Z=C.get("refreshElements");Object(r.f)(Z,function(et){if(et!==C)for(var dt=et.cfg.parent;dt&&dt!==C&&!dt.cfg.refresh;)dt.cfg.refresh=!0,dt=dt.cfg.parent}),Z[0]===C?h(D,Y):function et(dt,ht){for(var St=0;St<dt.length;St++){var wt=dt[St];if(wt.cfg.visible)if(wt.cfg.hasChanged)wt.cfg.refresh=!0,wt.isGroup()&&h(wt.cfg.children,ht);else if(wt.cfg.refresh)wt.isGroup()&&et(wt.cfg.children,ht);else{var xt=M(wt,ht);wt.cfg.refresh=xt,xt&&wt.isGroup()&&et(wt.cfg.children,ht)}}}(D,Y)}function s(C){for(var D=0;D<C.length;D++){var Y=C[D];Y.cfg.hasChanged=!1,Y.isGroup()&&!Y.destroyed&&s(Y.cfg.children)}}function h(C,D){for(var Y=0;Y<C.length;Y++){var Z=C[Y];Z.cfg.refresh=!0,Z.isGroup()&&h(Z.get("children"),D)}}function M(C,D){var Y=C.cfg.cacheCanvasBBox;return C.cfg.isInView&&Y&&Object(S.f)(Y,D)}function O(C,D,Y,Z){var et=Y.path,dt=Y.startArrow,ht=Y.endArrow;if(et){var St=[0,0],wt=[0,0],xt={dx:0,dy:0};D.beginPath();for(var ft=0;ft<et.length;ft++){var Bt=et[ft],Rt=Bt[0];if(ft===0&&dt&&dt.d){var Ot=C.getStartTangent();xt=l.c(Ot[0][0],Ot[0][1],Ot[1][0],Ot[1][1],dt.d)}else ft===et.length-2&&et[ft+1][0]==="Z"&&ht&&ht.d?et[ft+1][0]==="Z"&&(Ot=C.getEndTangent(),xt=l.c(Ot[0][0],Ot[0][1],Ot[1][0],Ot[1][1],ht.d)):ft===et.length-1&&ht&&ht.d&&et[0]!=="Z"&&(Ot=C.getEndTangent(),xt=l.c(Ot[0][0],Ot[0][1],Ot[1][0],Ot[1][1],ht.d));var X=xt.dx,ut=xt.dy;switch(Rt){case"M":D.moveTo(Bt[1]-X,Bt[2]-ut),wt=[Bt[1],Bt[2]];break;case"L":D.lineTo(Bt[1]-X,Bt[2]-ut);break;case"Q":D.quadraticCurveTo(Bt[1],Bt[2],Bt[3]-X,Bt[4]-ut);break;case"C":D.bezierCurveTo(Bt[1],Bt[2],Bt[3],Bt[4],Bt[5]-X,Bt[6]-ut);break;case"A":var vt=void 0;Z?(vt=Z[ft])||(vt=Object(b.a)(St,Bt),Z[ft]=vt):vt=Object(b.a)(St,Bt);var pt=vt.cx,Et=vt.cy,q=vt.rx,st=vt.ry,it=vt.startAngle,z=vt.endAngle,P=vt.xRotation,H=vt.sweepFlag;if(D.ellipse)D.ellipse(pt,Et,q,st,P,it,z,1-H);else{var k=q>st?q:st,d=q>st?1:q/st,g=q>st?st/q:1;D.translate(pt,Et),D.rotate(P),D.scale(d,g),D.arc(0,0,k,it,z,1-H),D.scale(1/d,1/g),D.rotate(-P),D.translate(-pt,-Et)}break;case"Z":D.closePath()}if(Rt==="Z")St=wt;else{var F=Bt.length;St=[Bt[F-2],Bt[F-1]]}}}}function T(C,D){var Y=C.get("canvas");Y&&(D==="remove"&&(C._cacheCanvasBBox=C.get("cacheCanvasBBox")),C.get("hasChanged")||(C.set("hasChanged",!0),C.cfg.parent&&C.cfg.parent.get("hasChanged")||(Y.refreshElement(C,D,Y),Y.get("autoDraw")&&Y.draw())))}function v(C){if(!C.length)return null;var D=[],Y=[],Z=[],et=[];return Object(r.f)(C,function(dt){var ht=function(St){var wt;if(St.destroyed)wt=St._cacheCanvasBBox;else{var xt=St.get("cacheCanvasBBox"),ft=xt&&!(!xt.width||!xt.height),Bt=St.getCanvasBBox(),Rt=Bt&&!(!Bt.width||!Bt.height);ft&&Rt?wt=Object(S.l)(xt,Bt):ft?wt=xt:Rt&&(wt=Bt)}return wt}(dt);ht&&(D.push(ht.minX),Y.push(ht.minY),Z.push(ht.maxX),et.push(ht.maxY))}),{minX:Math.min.apply(null,D),minY:Math.min.apply(null,Y),maxX:Math.max.apply(null,Z),maxY:Math.max.apply(null,et)}}function m(C,D){return C&&D&&Object(S.f)(C,D)?{minX:Math.max(C.minX,D.minX),minY:Math.max(C.minY,D.minY),maxX:Math.min(C.maxX,D.maxX),maxY:Math.min(C.maxY,D.maxY)}:null}},function(a,E){a.exports=function(e,r){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}},function(a,E,e){"use strict";e.d(E,"a",function(){return l}),e.d(E,"b",function(){return n}),e.d(E,"c",function(){return M}),e.d(E,"d",function(){return Y});var r=e(0),p=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,b=/[^\s\,]+/gi,S=function(et){var dt=et||[];return Object(r.m)(dt)?dt:Object(r.x)(dt)?(dt=dt.match(p),Object(r.f)(dt,function(ht,St){if((ht=ht.match(b))[0].length>1){var wt=ht[0].charAt(0);ht.splice(1,0,ht[0].substr(1)),ht[0]=wt}Object(r.f)(ht,function(xt,ft){isNaN(xt)||(ht[ft]=+xt)}),dt[St]=ht}),dt):void 0};function l(Z,et){for(var dt=[],ht=0,St=Z.length;St-2*!et>ht;ht+=2){var wt=[{x:+Z[ht-2],y:+Z[ht-1]},{x:+Z[ht],y:+Z[ht+1]},{x:+Z[ht+2],y:+Z[ht+3]},{x:+Z[ht+4],y:+Z[ht+5]}];et?ht?St-4===ht?wt[3]={x:+Z[0],y:+Z[1]}:St-2===ht&&(wt[2]={x:+Z[0],y:+Z[1]},wt[3]={x:+Z[2],y:+Z[3]}):wt[0]={x:+Z[St-2],y:+Z[St-1]}:St-4===ht?wt[3]=wt[2]:ht||(wt[0]={x:+Z[ht],y:+Z[ht+1]}),dt.push(["C",(-wt[0].x+6*wt[1].x+wt[2].x)/6,(-wt[0].y+6*wt[1].y+wt[2].y)/6,(wt[1].x+6*wt[2].x-wt[3].x)/6,(wt[1].y+6*wt[2].y-wt[3].y)/6,wt[2].x,wt[2].y])}return dt}var A=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,j=new RegExp("([a-z])["+A+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+A+"]*,?["+A+"]*)+)","ig"),y=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+A+"]*,?["+A+"]*","ig");function n(Z){if(!Z)return null;if(Object(r.m)(Z))return Z;var et={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},dt=[];return String(Z).replace(j,function(ht,St,wt){var xt=[],ft=St.toLowerCase();if(wt.replace(y,function(Bt,Rt){Rt&&xt.push(+Rt)}),ft==="m"&&xt.length>2&&(dt.push([St].concat(xt.splice(0,2))),ft="l",St=St==="m"?"l":"L"),ft==="o"&&xt.length===1&&dt.push([St,xt[0]]),ft==="r")dt.push([St].concat(xt));else for(;xt.length>=et[ft]&&(dt.push([St].concat(xt.splice(0,et[ft]))),et[ft]););return""}),dt}var s=/[a-z]/;function h(Z,et){return[et[0]+(et[0]-Z[0]),et[1]+(et[1]-Z[1])]}function M(Z){var et=n(Z);if(!et||!et.length)return[["M",0,0]];for(var dt=!1,ht=0;ht<et.length;ht++){var St=et[ht][0];if(s.test(St)||["V","H","T","S"].indexOf(St)>=0){dt=!0;break}}if(!dt)return et;var wt=[],xt=0,ft=0,Bt=0,Rt=0,Ot=0,X=et[0];X[0]!=="M"&&X[0]!=="m"||(Bt=xt=+X[1],Rt=ft=+X[2],Ot++,wt[0]=["M",xt,ft]),ht=Ot;for(var ut=et.length;ht<ut;ht++){var vt=et[ht],pt=wt[ht-1],Et=[],q=(St=vt[0]).toUpperCase();if(St!==q)switch(Et[0]=q,q){case"A":Et[1]=vt[1],Et[2]=vt[2],Et[3]=vt[3],Et[4]=vt[4],Et[5]=vt[5],Et[6]=+vt[6]+xt,Et[7]=+vt[7]+ft;break;case"V":Et[1]=+vt[1]+ft;break;case"H":Et[1]=+vt[1]+xt;break;case"M":Bt=+vt[1]+xt,Rt=+vt[2]+ft;break;default:for(var st=1,it=vt.length;st<it;st++)Et[st]=+vt[st]+(st%2?xt:ft)}else Et=et[ht];switch(q){case"Z":xt=+Bt,ft=+Rt;break;case"H":Et=["L",xt=Et[1],ft];break;case"V":Et=["L",xt,ft=Et[1]];break;case"T":xt=Et[1],ft=Et[2];var z=h([pt[1],pt[2]],[pt[3],pt[4]]);Et=["Q",z[0],z[1],xt,ft];break;case"S":xt=Et[Et.length-2],ft=Et[Et.length-1];var P=pt.length,H=h([pt[P-4],pt[P-3]],[pt[P-2],pt[P-1]]);Et=["C",H[0],H[1],Et[1],Et[2],xt,ft];break;case"M":Bt=Et[Et.length-2],Rt=Et[Et.length-1];break;default:xt=Et[Et.length-2],ft=Et[Et.length-1]}wt.push(Et)}return wt}function O(Z){return Math.sqrt(Z[0]*Z[0]+Z[1]*Z[1])}function T(Z,et){return O(Z)*O(et)?(Z[0]*et[0]+Z[1]*et[1])/(O(Z)*O(et)):1}function v(Z,et){return(Z[0]*et[1]<Z[1]*et[0]?-1:1)*Math.acos(T(Z,et))}function m(Z,et){return Z[0]===et[0]&&Z[1]===et[1]}function C(Z,et){var dt=et[1],ht=et[2],St=Object(r.B)(Object(r.G)(et[3]),2*Math.PI),wt=et[4],xt=et[5],ft=Z[0],Bt=Z[1],Rt=et[6],Ot=et[7],X=Math.cos(St)*(ft-Rt)/2+Math.sin(St)*(Bt-Ot)/2,ut=-1*Math.sin(St)*(ft-Rt)/2+Math.cos(St)*(Bt-Ot)/2,vt=X*X/(dt*dt)+ut*ut/(ht*ht);vt>1&&(dt*=Math.sqrt(vt),ht*=Math.sqrt(vt));var pt=dt*dt*(ut*ut)+ht*ht*(X*X),Et=pt?Math.sqrt((dt*dt*(ht*ht)-pt)/pt):1;wt===xt&&(Et*=-1),isNaN(Et)&&(Et=0);var q=ht?Et*dt*ut/ht:0,st=dt?Et*-ht*X/dt:0,it=(ft+Rt)/2+Math.cos(St)*q-Math.sin(St)*st,z=(Bt+Ot)/2+Math.sin(St)*q+Math.cos(St)*st,P=[(X-q)/dt,(ut-st)/ht],H=[(-1*X-q)/dt,(-1*ut-st)/ht],k=v([1,0],P),d=v(P,H);return T(P,H)<=-1&&(d=Math.PI),T(P,H)>=1&&(d=0),xt===0&&d>0&&(d-=2*Math.PI),xt===1&&d<0&&(d+=2*Math.PI),{cx:it,cy:z,rx:m(Z,[Rt,Ot])?0:dt,ry:m(Z,[Rt,Ot])?0:ht,startAngle:k,endAngle:k+d,xRotation:St,arcFlag:wt,sweepFlag:xt}}function D(Z,et){return[et[0]+(et[0]-Z[0]),et[1]+(et[1]-Z[1])]}function Y(Z){for(var et=[],dt=null,ht=null,St=null,wt=0,xt=(Z=S(Z)).length,ft=0;ft<xt;ft++){var Bt=Z[ft];ht=Z[ft+1];var Rt=Bt[0],Ot={command:Rt,prePoint:dt,params:Bt,startTangent:null,endTangent:null};switch(Rt){case"M":St=[Bt[1],Bt[2]],wt=ft;break;case"A":var X=C(dt,Bt);Ot.arcParams=X}if(Rt==="Z")dt=St,ht=Z[wt+1];else{var ut=Bt.length;dt=[Bt[ut-2],Bt[ut-1]]}ht&&ht[0]==="Z"&&(ht=Z[wt],et[wt]&&(et[wt].prePoint=dt)),Ot.currentPoint=dt,et[wt]&&m(dt,et[wt].currentPoint)&&(et[wt].prePoint=Ot.prePoint);var vt=ht?[ht[ht.length-2],ht[ht.length-1]]:null;Ot.nextPoint=vt;var pt=Ot.prePoint;if(["L","H","V"].includes(Rt))Ot.startTangent=[pt[0]-dt[0],pt[1]-dt[1]],Ot.endTangent=[dt[0]-pt[0],dt[1]-pt[1]];else if(Rt==="Q"){var Et=[Bt[1],Bt[2]];Ot.startTangent=[pt[0]-Et[0],pt[1]-Et[1]],Ot.endTangent=[dt[0]-Et[0],dt[1]-Et[1]]}else if(Rt==="T")Et=D((it=et[ft-1]).currentPoint,pt),it.command==="Q"?(Ot.command="Q",Ot.startTangent=[pt[0]-Et[0],pt[1]-Et[1]],Ot.endTangent=[dt[0]-Et[0],dt[1]-Et[1]]):(Ot.command="TL",Ot.startTangent=[pt[0]-dt[0],pt[1]-dt[1]],Ot.endTangent=[dt[0]-pt[0],dt[1]-pt[1]]);else if(Rt==="C"){var q=[Bt[1],Bt[2]],st=[Bt[3],Bt[4]];Ot.startTangent=[pt[0]-q[0],pt[1]-q[1]],Ot.endTangent=[dt[0]-st[0],dt[1]-st[1]]}else if(Rt==="S"){var it;q=D((it=et[ft-1]).currentPoint,pt),st=[Bt[1],Bt[2]],it.command==="C"?(Ot.command="C",Ot.startTangent=[pt[0]-q[0],pt[1]-q[1]],Ot.endTangent=[dt[0]-st[0],dt[1]-st[1]]):(Ot.command="SQ",Ot.startTangent=[pt[0]-st[0],pt[1]-st[1]],Ot.endTangent=[dt[0]-st[0],dt[1]-st[1]])}else if(Rt==="A"){var z=.001,P=Ot.arcParams||{},H=P.cx,k=H===void 0?0:H,d=P.cy,g=d===void 0?0:d,F=P.rx,V=F===void 0?0:F,tt=P.ry,ot=tt===void 0?0:tt,at=P.sweepFlag,At=at===void 0?0:at,yt=P.startAngle,gt=yt===void 0?0:yt,bt=P.endAngle,Tt=bt===void 0?0:bt;At===0&&(z*=-1);var Dt=V*Math.cos(gt-z)+k,Ut=ot*Math.sin(gt-z)+g;Ot.startTangent=[Dt-St[0],Ut-St[1]];var jt=V*Math.cos(gt+Tt+z)+k,Vt=ot*Math.sin(gt+Tt-z)+g;Ot.endTangent=[pt[0]-jt,pt[1]-Vt]}et.push(Ot)}return et}},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.POST_CONSTRUCT=E.DESIGN_PARAM_TYPES=E.PARAM_TYPES=E.TAGGED_PROP=E.TAGGED=E.MULTI_INJECT_TAG=E.INJECT_TAG=E.OPTIONAL_TAG=E.UNMANAGED_TAG=E.NAME_TAG=E.NAMED_TAG=void 0,E.NAMED_TAG="named",E.NAME_TAG="name",E.UNMANAGED_TAG="unmanaged",E.OPTIONAL_TAG="optional",E.INJECT_TAG="inject",E.MULTI_INJECT_TAG="multi_inject",E.TAGGED="inversify:tagged",E.TAGGED_PROP="inversify:tagged_props",E.PARAM_TYPES="inversify:paramtypes",E.DESIGN_PARAM_TYPES="design:paramtypes",E.POST_CONSTRUCT="post_construct"},function(a,E,e){var r,p,b;function S(l){return(S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(l)}(function(l,A){S(E)=="object"&&a!==void 0?A(E):(p=[E],(b=typeof(r=A)=="function"?r.apply(E,p):r)===void 0||(a.exports=b))})(0,function(l){"use strict";var A=function(ut,vt){var pt=ut.nodes,Et=ut.edges,q=[],st={};if(!pt)throw Error("invalid nodes data!");return pt&&pt.forEach(function(it,z){st[it.id]=z,q.push([])}),Et&&Et.forEach(function(it){var z=st[it.source],P=st[it.target];q[z][P]=1,vt||(q[P][z]=1)}),q};function j(X,ut){if(!(X instanceof ut))throw new TypeError("Cannot call a class as a function")}function y(X,ut){for(var vt=0;ut.length>vt;vt++){var pt=ut[vt];pt.enumerable=pt.enumerable||!1,pt.configurable=!0,"value"in pt&&(pt.writable=!0),Object.defineProperty(X,pt.key,pt)}}function n(X,ut,vt){return ut&&y(X.prototype,ut),vt&&y(X,vt),X}function s(X){return function(ut){if(Array.isArray(ut))return M(ut)}(X)||function(ut){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(ut))return Array.from(ut)}(X)||h(X)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function h(X,ut){if(X){if(typeof X=="string")return M(X,ut);var vt=Object.prototype.toString.call(X).slice(8,-1);return vt==="Object"&&X.constructor&&(vt=X.constructor.name),vt==="Map"||vt==="Set"?Array.from(X):vt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(vt)?M(X,ut):void 0}}function M(X,ut){(ut==null||ut>X.length)&&(ut=X.length);for(var vt=0,pt=Array(ut);ut>vt;vt++)pt[vt]=X[vt];return pt}function O(X,ut){var vt;if(typeof Symbol=="undefined"||X[Symbol.iterator]==null){if(Array.isArray(X)||(vt=h(X))||ut&&X&&typeof X.length=="number"){vt&&(X=vt);var pt=0,Et=function(){};return{s:Et,n:function(){return X.length>pt?{done:!1,value:X[pt++]}:{done:!0}},e:function(P){throw P},f:Et}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var q,st=!0,it=!1;return{s:function(){vt=X[Symbol.iterator]()},n:function(){var P=vt.next();return st=P.done,P},e:function(P){it=!0,q=P},f:function(){try{st||vt.return==null||vt.return()}finally{if(it)throw q}}}}var T=function(ut,vt){return ut===vt},v=function(){function X(ut){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;j(this,X),this.value=ut,this.next=vt}return n(X,[{key:"toString",value:function(vt){return vt?vt(this.value):"".concat(this.value)}}]),X}(),m=function(){function X(){var ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:T;j(this,X),this.head=null,this.tail=null,this.compare=ut}return n(X,[{key:"prepend",value:function(vt){var pt=new v(vt,this.head);return this.head=pt,this.tail||(this.tail=pt),this}},{key:"append",value:function(vt){var pt=new v(vt);return this.head?(this.tail.next=pt,this.tail=pt,this):(this.head=pt,this.tail=pt,this)}},{key:"delete",value:function(vt){if(!this.head)return null;for(var pt=null;this.head&&this.compare(this.head.value,vt);)pt=this.head,this.head=this.head.next;var Et=this.head;if(Et!==null)for(;Et.next;)this.compare(Et.next.value,vt)?(pt=Et.next,Et.next=Et.next.next):Et=Et.next;return this.compare(this.tail.value,vt)&&(this.tail=Et),pt}},{key:"find",value:function(vt){var pt=vt.value,Et=pt===void 0?void 0:pt,q=vt.callback,st=q===void 0?void 0:q;if(!this.head)return null;for(var it=this.head;it;){if(st&&st(it.value)||Et!==void 0&&this.compare(it.value,Et))return it;it=it.next}return null}},{key:"deleteTail",value:function(){var vt=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,vt;for(var pt=this.head;pt.next;)pt.next.next?pt=pt.next:pt.next=null;return this.tail=pt,vt}},{key:"deleteHead",value:function(){if(!this.head)return null;var vt=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),vt}},{key:"fromArray",value:function(vt){var pt=this;return vt.forEach(function(Et){return pt.append(Et)}),this}},{key:"toArray",value:function(){for(var vt=[],pt=this.head;pt;)vt.push(pt),pt=pt.next;return vt}},{key:"reverse",value:function(){for(var vt=this.head,pt=null,Et=null;vt;)Et=vt.next,vt.next=pt,pt=vt,vt=Et;this.tail=this.head,this.head=pt}},{key:"toString",value:function(){var vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;return""+this.toArray().map(function(pt){return pt.toString(vt)})}}]),X}(),C=function(){function X(){j(this,X),this.linkedList=new m}return n(X,[{key:"isEmpty",value:function(){return!this.linkedList.head}},{key:"peek",value:function(){return this.linkedList.head?this.linkedList.head.value:null}},{key:"enqueue",value:function(vt){this.linkedList.append(vt)}},{key:"dequeue",value:function(){var vt=this.linkedList.deleteHead();return vt?vt.value:null}},{key:"toString",value:function(vt){return this.linkedList.toString(vt)}}]),X}(),D=function(ut){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],pt=arguments.length>2?arguments[2]:void 0,Et=vt.filter(function(z){return z.source===ut||z.target===ut});if(pt==="target"){var q=function(P){return P.source===ut};return Et.filter(q).map(function(z){return z.target})}if(pt==="source"){var st=function(P){return P.target===ut};return Et.filter(st).map(function(z){return z.source})}var it=function(P){return P.source===ut?P.target:P.source};return Et.map(it)},Y=function(ut,vt){return vt.filter(function(pt){return pt.source===ut||pt.target===ut})},Z=function(){var ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,vt="".concat(Math.random()).split(".")[1].substr(0,5),pt="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(ut,"-").concat(vt).concat(pt)},et=function(ut){var vt={},pt=ut.nodes,Et=ut.edges,q=Et===void 0?[]:Et;return(pt===void 0?[]:pt).forEach(function(st){vt[st.id]={degree:0,inDegree:0,outDegree:0}}),q.forEach(function(st){vt[st.source].degree++,vt[st.source].outDegree++,vt[st.target].degree++,vt[st.target].inDegree++}),vt};function dt(X,ut,vt){(function pt(Et,q,st,it){it.enter({current:q,previous:st});var z=Et.edges;D(q,z===void 0?[]:z,"target").forEach(function(P){it.allowTraversal({previous:st,current:q,next:P})&&pt(Et,P,q,it)}),it.leave({current:q,previous:st})})(X,ut,"",function(){var pt,Et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=Et,st=function(){},it=(pt={},function(z){var P=z.next;return!pt[P]&&(pt[P]=!0,!0)});return q.allowTraversal=Et.allowTraversal||it,q.enter=Et.enter||st,q.leave=Et.leave||st,q}(vt))}var ht=function(ut,vt,pt,Et){var q=ut.nodes,st=q===void 0?[]:q,it=ut.edges,z=it===void 0?[]:it,P={},H={},k={};st.forEach(function(At,yt){var gt=At.id;H[gt]=1/0,gt===vt&&(H[gt]=0)});for(var d=st.length,g=function(yt){var gt=function(Tt,Dt,Ut){for(var jt,Vt=1/0,Ht=0;Dt.length>Ht;Ht++){var re=Dt[Ht].id;Ut[re]||Tt[re]>Vt||(Vt=Tt[re],jt=Dt[Ht])}return jt}(H,st,P),bt=gt.id;if(P[bt]=!0,H[bt]===1/0)return"continue";(pt?function(Tt,Dt){return Dt.filter(function(Ut){return Ut.source===Tt})}(bt,z):Y(bt,z)).forEach(function(Tt){var Dt=Tt.target,Ut=Dt===bt?Tt.source:Dt,jt=Et&&Tt[Et]?Tt[Et]:1;H[Ut]>H[gt.id]+jt?(H[Ut]=H[gt.id]+jt,k[Ut]=[gt.id]):H[Ut]===H[gt.id]+jt&&k[Ut].push(gt.id)})},F=0;d>F;F++)g();k[vt]=[vt];var V={};for(var tt in H)H[tt]!==1/0&&St(vt,tt,k,V);var ot={};for(var at in V)ot[at]=V[at][0];return{length:H,path:ot,allPaths:V}};function St(X,ut,vt,pt){if(X===ut)return[X];if(pt[ut])return pt[ut];var Et,q=[],st=O(vt[ut]);try{for(st.s();!(Et=st.n()).done;){var it,z=O(St(X,Et.value,vt,pt));try{for(z.s();!(it=z.n()).done;)q.push([].concat(s(it.value),[ut]))}catch(P){z.e(P)}finally{z.f()}}}catch(P){st.e(P)}finally{st.f()}pt[ut]=q}var wt=function(ut,vt,pt,Et){for(var q=vt.length,st=2*Et,it=0,z=0;q>z;z++)for(var P=ut[z].clusterId,H=0;q>H;H++)P===ut[H].clusterId&&(it+=(vt[z][H]||0)-(pt[z]||0)*(pt[H]||0)/st);return it*(1/st)},xt=function(){function X(ut){j(this,X),this.count=ut.length,this.parent={};var vt,pt=O(ut);try{for(pt.s();!(vt=pt.n()).done;){var Et=vt.value;this.parent[Et]=Et}}catch(q){pt.e(q)}finally{pt.f()}}return n(X,[{key:"find",value:function(vt){for(;this.parent[vt]!==vt;)vt=this.parent[vt];return vt}},{key:"union",value:function(vt,pt){var Et=this.find(vt),q=this.find(pt);Et!==q&&(q>Et?(this.parent[pt]!==pt&&this.union(this.parent[pt],vt),this.parent[pt]=this.parent[vt]):(this.parent[vt]!==vt&&this.union(this.parent[vt],pt),this.parent[vt]=this.parent[pt]))}},{key:"connected",value:function(vt,pt){return this.find(vt)===this.find(pt)}}]),X}(),ft=function(ut,vt){return ut-vt},Bt=function(){function X(){var ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ft;j(this,X),this.compareFn=ut,this.list=[]}return n(X,[{key:"getLeft",value:function(vt){return 2*vt+1}},{key:"getRight",value:function(vt){return 2*vt+2}},{key:"getParent",value:function(vt){return vt===0?null:Math.floor((vt-1)/2)}},{key:"isEmpty",value:function(){return 0>=this.list.length}},{key:"top",value:function(){return this.isEmpty()?void 0:this.list[0]}},{key:"delMin",value:function(){var vt=this.top(),pt=this.list.pop();return this.list.length>0&&(this.list[0]=pt,this.moveDown(0)),vt}},{key:"insert",value:function(vt){return vt!==null&&(this.list.push(vt),this.moveUp(this.list.length-1),!0)}},{key:"moveUp",value:function(vt){for(var pt=this.getParent(vt);vt&&vt>0&&this.compareFn(this.list[pt],this.list[vt])>0;){var Et=this.list[pt];this.list[pt]=this.list[vt],this.list[vt]=Et,pt=this.getParent(vt=pt)}}},{key:"moveDown",value:function(vt){var pt=vt,Et=this.getLeft(vt),q=this.getRight(vt),st=this.list.length;if(Et!==null&&st>Et&&this.compareFn(this.list[pt],this.list[Et])>0?pt=Et:q!==null&&st>q&&this.compareFn(this.list[pt],this.list[q])>0&&(pt=q),vt!==pt){var it=[this.list[pt],this.list[vt]];this.list[vt]=it[0],this.list[pt]=it[1],this.moveDown(pt)}}}]),X}(),Rt=function(ut,vt){var pt=[],Et=ut.nodes,q=Et===void 0?[]:Et,st=ut.edges,it=st===void 0?[]:st;if(q.length===0)return pt;var z=q[0],P=new Set;P.add(z);var H=new Bt(function(F,V){return vt?F.weight-V.weight:0});for(Y(z.id,it).forEach(function(F){H.insert(F)});!H.isEmpty();){var k=H.delMin(),d=k.source,g=k.target;P.has(d)&&P.has(g)||(pt.push(k),P.has(d)||(P.add(d),Y(d,it).forEach(function(F){H.insert(F)})),P.has(g)||(P.add(g),Y(g,it).forEach(function(F){H.insert(F)})))}return pt},Ot=function(ut,vt){var pt=[],Et=ut.nodes,q=Et===void 0?[]:Et,st=ut.edges;if(q.length===0)return pt;var it=(st===void 0?[]:st).map(function(d){return d});vt&&it.sort(function(d,g){return d.weight-g.weight});for(var z=new xt(q.map(function(d){return d.id}));it.length>0;){var P=it.shift(),H=P.source,k=P.target;z.connected(H,k)||(pt.push(P),z.union(H,k))}return pt};l.Stack=function(){function X(){var ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10;j(this,X),this.linkedList=new m,this.maxStep=ut}return n(X,[{key:"isEmpty",value:function(){return!this.linkedList.head}},{key:"isMaxStack",value:function(){return this.toArray().length>=this.maxStep}},{key:"peek",value:function(){return this.isEmpty()?null:this.linkedList.head.value}},{key:"push",value:function(vt){this.linkedList.prepend(vt),this.length>this.maxStep&&this.linkedList.deleteTail()}},{key:"pop",value:function(){var vt=this.linkedList.deleteHead();return vt?vt.value:null}},{key:"toArray",value:function(){return this.linkedList.toArray().map(function(vt){return vt.value})}},{key:"clear",value:function(){for(;!this.isEmpty();)this.pop()}},{key:"length",get:function(){return this.linkedList.toArray().length}}]),X}(),l.breadthFirstSearch=function(X,ut,vt){var pt=function(){var P,H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},k=H,d=function(){},g=(P={},function(F){var V=F.next;return!P[V]&&(P[V]=!0,!0)});return k.allowTraversal=H.allowTraversal||g,k.enter=H.enter||d,k.leave=H.leave||d,k}(vt),Et=new C,q=X.edges,st=q===void 0?[]:q;Et.enqueue(ut);for(var it="",z=function(){var H=Et.dequeue();pt.enter({current:H,previous:it}),D(H,st,"target").forEach(function(k){pt.allowTraversal({previous:it,current:H,next:k})&&Et.enqueue(k)}),pt.leave({current:H,previous:it}),it=H};!Et.isEmpty();)z()},l.connectedComponent=function(X,ut){return ut?function(vt){var pt,Et=vt.nodes,q=Et===void 0?[]:Et,st=vt.edges,it=st===void 0?[]:st,z=[],P={},H={},k={},d=[],g=0,F=function ot(at){H[at.id]=g,k[at.id]=g,g+=1,z.push(at),P[at.id]=!0;for(var At=D(at.id,it,"target").filter(function(Dt){return q.map(function(Ut){return Ut.id}).indexOf(Dt)>-1}),yt=function(Ut){var jt=At[Ut];if(H[jt]||H[jt]===0)P[jt]&&(k[at.id]=Math.min(k[at.id],H[jt]));else{var Vt=q.filter(function(Ht){return Ht.id===jt});Vt.length>0&&ot(Vt[0]),k[at.id]=Math.min(k[at.id],k[jt])}},gt=0;At.length>gt;gt++)yt(gt);if(k[at.id]===H[at.id]){for(var bt=[];z.length>0;){var Tt=z.pop();if(P[Tt.id]=!1,bt.push(Tt),Tt===at)break}bt.length>0&&d.push(bt)}},V=O(q);try{for(V.s();!(pt=V.n()).done;){var tt=pt.value;H[tt.id]||H[tt.id]===0||F(tt)}}catch(ot){V.e(ot)}finally{V.f()}return d}(X):function(vt){for(var pt=vt.nodes,Et=pt===void 0?[]:pt,q=vt.edges,st=q===void 0?[]:q,it=[],z={},P=[],H=function F(V){P.push(V),z[V.id]=!0;for(var tt=D(V.id,st),ot=function(yt){var gt=tt[yt];if(!z[gt]){var bt=Et.filter(function(Tt){return Tt.id===gt});bt.length>0&&F(bt[0])}},at=0;tt.length>at;++at)ot(at)},k=0;Et.length>k;k++){var d=Et[k];if(!z[d.id]){H(d);for(var g=[];P.length>0;)g.push(P.pop());it.push(g)}}return it}(X)},l.depthFirstSearch=dt,l.detectCycle=function(X){var ut=null,vt=X.nodes,pt={},Et={},q={},st={};(vt===void 0?[]:vt).forEach(function(z){Et[z.id]=z});for(var it={enter:function(P){var H=P.current,k=P.previous;if(q[H]){ut={};for(var d=H,g=k;g!==H;)ut[d]=g,d=g,g=pt[g];ut[d]=g}else q[H]=H,delete Et[H],pt[H]=k},leave:function(P){var H=P.current;st[H]=H,delete q[H]},allowTraversal:function(P){return!ut&&!st[P.next]}};Object.keys(Et).length;)dt(X,Object.keys(Et)[0],it);return ut},l.dijkstra=ht,l.findAllPath=function(X,ut,vt,pt){if(ut===vt)return[[ut]];var Et,q,st=X.edges,it=st===void 0?[]:st,z=[ut],P=((q=ut)in(Et={})?Object.defineProperty(Et,q,{value:!0,enumerable:!0,configurable:!0,writable:!0}):Et[q]=!0,Et),H=[],k=[],d=pt?D(ut,it,"target"):D(ut,it);for(H.push(d);z.length>0&&H.length>0;){var g=H[H.length-1];if(g.length){var F=g.shift();if(F&&(z.push(F),P[F]=!0,d=pt?D(F,it,"target"):D(F,it),H.push(d.filter(function(at){return!P[at]}))),z[z.length-1]===vt){var V=z.map(function(at){return at});k.push(V);var tt=z.pop();P[tt]=!1,H.pop()}}else{var ot=z.pop();P[ot]=!1,H.pop()}}return k},l.findShortestPath=function(X,ut,vt,pt,Et){var q=ht(X,ut,pt,Et);return{length:q.length[vt],path:q.path[vt],allPath:q.allPaths[vt]}},l.floydWarshall=function(X,ut){for(var vt=A(X,ut),pt=[],Et=vt.length,q=0;Et>q;q+=1){pt[q]=[];for(var st=0;Et>st;st+=1)pt[q][st]=q===st?0:vt[q][st]!==0&&vt[q][st]?vt[q][st]:1/0}for(var it=0;Et>it;it+=1)for(var z=0;Et>z;z+=1)for(var P=0;Et>P;P+=1)pt[z][P]>pt[z][it]+pt[it][P]&&(pt[z][P]=pt[z][it]+pt[it][P]);return pt},l.getAdjMatrix=A,l.getDegree=et,l.getInDegree=function(X,ut){return et(X)[ut]?et(X)[ut].inDegree:0},l.getNeighbors=D,l.getOutDegree=function(X,ut){return et(X)[ut]?et(X)[ut].outDegree:0},l.labelPropagation=function(X){var ut=arguments.length>1&&arguments[1]!==void 0&&arguments[1],vt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"weight",pt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e3,Et=X.nodes,q=Et===void 0?[]:Et,st=X.edges,it=st===void 0?[]:st,z={},P={};q.forEach(function(ot,at){var At=Z();ot.clusterId=At,z[At]={id:At,nodes:[ot]},P[ot.id]={node:ot,idx:at}});var H=A(X,ut),k={};H.forEach(function(ot,at){var At=q[at].id;k[At]={},ot.forEach(function(yt,gt){yt&&(k[At][q[gt].id]=yt)})});for(var d=0;pt>d;){var g=!1;if(q.forEach(function(ot){var at={};Object.keys(k[ot.id]).forEach(function(jt){var Vt=k[ot.id][jt],Ht=P[jt].node.clusterId;at[Ht]||(at[Ht]=0),at[Ht]+=Vt});var At=-1/0,yt=[];if(Object.keys(at).forEach(function(jt){at[jt]>At?(At=at[jt],yt=[jt]):At===at[jt]&&yt.push(jt)}),yt.length!==1||yt[0]!==ot.clusterId){var gt=yt.indexOf(ot.clusterId);if(0>gt||yt.splice(gt,1),yt&&yt.length){g=!0;var bt=z[ot.clusterId],Tt=bt.nodes.indexOf(ot);bt.nodes.splice(Tt,1);var Dt=Math.floor(Math.random()*yt.length),Ut=z[yt[Dt]];Ut.nodes.push(ot),ot.clusterId=Ut.id}}}),!g)break;d++}Object.keys(z).forEach(function(ot){var at=z[ot];at.nodes&&at.nodes.length||delete z[ot]});var F=[],V={};it.forEach(function(ot){var at=ot[vt]||1,At=P[ot.source].node.clusterId,yt=P[ot.target].node.clusterId,gt="".concat(At,"---").concat(yt);if(V[gt])V[gt].weight+=at,V[gt].count++;else{var bt={source:At,target:yt,weight:at,count:1};V[gt]=bt,F.push(bt)}});var tt=[];return Object.keys(z).forEach(function(ot){tt.push(z[ot])}),{clusters:tt,clusterEdges:F}},l.louvain=function(X){var ut=arguments.length>1&&arguments[1]!==void 0&&arguments[1],vt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"weight",pt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e-4,Et=X.nodes,q=Et===void 0?[]:Et,st=X.edges,it=st===void 0?[]:st,z={},P={};q.forEach(function(yt,gt){var bt=Z();yt.clusterId=bt,z[bt]={id:bt,nodes:[yt]},P[yt.id]={node:yt,idx:gt}});var H=A(X,ut),k=[],d={},g=0;H.forEach(function(yt,gt){var bt=0,Tt=q[gt].id;d[Tt]={},yt.forEach(function(Dt,Ut){Dt&&(bt+=Dt,d[Tt][q[Ut].id]=Dt,g+=Dt)}),k.push(bt)}),g/=2;for(var F=1/0,V=1/0,tt=0;F=wt(q,H,k,g),Math.abs(F-V)>=pt&&100>=tt;)V=F,tt++,Object.keys(z).forEach(function(yt){var gt=0;it.forEach(function(bt){var Tt=P[bt.source].node.clusterId,Dt=P[bt.target].node.clusterId;(Tt===yt&&Dt!==yt||Dt===yt&&Tt!==yt)&&(gt+=bt[vt]||1)}),z[yt].sumTot=gt}),q.forEach(function(yt,gt){var bt,Tt=z[yt.clusterId],Dt=0,Ut=k[gt]/(2*g),jt=0;Tt.nodes.forEach(function(we){jt+=H[gt][P[we.id].idx]||0});var Vt=jt-Tt.sumTot*Ut;if(Object.keys(d[yt.id]).forEach(function(we){var Re=P[we].node.clusterId;if(Re!==yt.clusterId){var He=z[Re],pn=He.nodes;if(pn&&pn.length){var fn=0;pn.forEach(function(Cn){fn+=H[gt][P[Cn.id].idx]||0});var Rn=fn-He.sumTot*Ut-Vt;Rn>Dt&&(Dt=Rn,bt=He)}}}),Dt>0){bt.nodes.push(yt);var Ht=yt.clusterId;yt.clusterId=bt.id;var re=Tt.nodes.indexOf(yt);Tt.nodes.splice(re,1);var pe=0,ye=0;it.forEach(function(we){var Re=P[we.source].node.clusterId,He=P[we.target].node.clusterId;(Re===bt.id&&He!==bt.id||He===bt.id&&Re!==bt.id)&&(pe+=we[vt]||1),(Re===Ht&&He!==Ht||He===Ht&&Re!==Ht)&&(ye+=we[vt]||1)}),bt.sumTot=pe,Tt.sumTot=ye}});Object.keys(z).forEach(function(yt){var gt=z[yt];gt.nodes&&gt.nodes.length||delete z[yt]});var ot=[],at={};it.forEach(function(yt){var gt=yt[vt]||1,bt=P[yt.source].node.clusterId,Tt=P[yt.target].node.clusterId,Dt="".concat(bt,"---").concat(Tt);if(at[Dt])at[Dt].weight+=gt,at[Dt].count++;else{var Ut={source:bt,target:Tt,weight:gt,count:1};at[Dt]=Ut,ot.push(Ut)}});var At=[];return Object.keys(z).forEach(function(yt){At.push(z[yt])}),{clusters:At,clusterEdges:ot}},l.minimumSpanningTree=function(X,ut,vt){return vt?{prim:Rt,kruskal:Ot}[vt](X,ut):Ot(X,ut)},l.pageRank=function(X,ut,vt){typeof ut!="number"&&(ut=1e-6),typeof vt!="number"&&(vt=.85);for(var pt,Et=1,q=0,st=1e3,it=X.nodes,z=it===void 0?[]:it,P=X.edges,H=P===void 0?[]:P,k=z.length,d={},g={},F=0;k>F;++F){var V=z[F].id;d[V]=1/k,g[V]=1/k}for(var tt=et(X);st>0&&Et>ut;){q=0;for(var ot=0;k>ot;++ot){var at=z[ot],At=at.id;if(pt=0,tt[at.id].inDegree===0)d[At]=0;else{for(var yt=D(At,H,"source"),gt=0;yt.length>gt;++gt){var bt=yt[gt],Tt=tt[bt].outDegree;Tt>0&&(pt+=g[bt]/Tt)}d[At]=vt*pt,q+=d[At]}}q=(1-q)/k,Et=0;for(var Dt=0;k>Dt;++Dt){var Ut=z[Dt].id;Et+=Math.abs((pt=d[Ut]+q)-g[Ut]),g[Ut]=pt}st-=1}return g},Object.defineProperty(l,"__esModule",{value:!0})})},function(a,E,e){"use strict";e.d(E,"c",function(){return s}),e.d(E,"b",function(){return h}),e.d(E,"a",function(){return M});var r=e(1),p=e(56);function b(O){return(b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T})(O)}var S=Math.sin,l=Math.cos,A=Math.atan2,j=Math.PI;function y(O,T,v,m,C,D,Y){var Z=T.stroke,et=T.lineWidth,dt=A(m-D,v-C),ht=new p.Path({type:"path",canvas:O.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*l(j/6)+","+10*S(j/6)+" L0,0 L"+10*l(j/6)+",-"+10*S(j/6),stroke:Z,lineWidth:et}});ht.translate(C,D),ht.rotateAtPoint(C,D,dt),O.set(Y?"startArrowShape":"endArrowShape",ht)}function n(O,T,v,m,C,D,Y){var Z=T.startArrow,et=T.endArrow,dt=T.stroke,ht=T.lineWidth,St=Y?Z:et,wt=St.d,xt=St.fill,ft=St.stroke,Bt=St.lineWidth,Rt=Object(r.c)(St,["d","fill","stroke","lineWidth"]),Ot=A(m-D,v-C);wt&&(C-=l(Ot)*wt,D-=S(Ot)*wt);var X=new p.Path({type:"path",canvas:O.get("canvas"),isArrowShape:!0,attrs:Object(r.a)(Object(r.a)({},Rt),{stroke:ft||dt,lineWidth:Bt||ht,fill:xt})});X.translate(C,D),X.rotateAtPoint(C,D,Ot),O.set(Y?"startArrowShape":"endArrowShape",X)}function s(O,T,v,m,C){var D=A(m-T,v-O);return{dx:l(D)*C,dy:S(D)*C}}function h(O,T,v,m,C,D){b(T.startArrow)==="object"?n(O,T,v,m,C,D,!0):T.startArrow?y(O,T,v,m,C,D,!0):O.set("startArrowShape",null)}function M(O,T,v,m,C,D){b(T.endArrow)==="object"?n(O,T,v,m,C,D,!1):T.endArrow?y(O,T,v,m,C,D,!1):O.set("startArrowShape",null)}},function(a,E,e){"use strict";var r={};e.r(r),e.d(r,"leftTranslate",function(){return et}),e.d(r,"leftRotate",function(){return dt}),e.d(r,"leftScale",function(){return ht}),e.d(r,"transform",function(){return St}),e.d(r,"direction",function(){return wt}),e.d(r,"angleTo",function(){return xt}),e.d(r,"vertical",function(){return ft});var p={};e.r(p),e.d(p,"default",function(){return or}),e.d(p,"assign",function(){return Ut}),e.d(p,"format",function(){return Kn}),e.d(p,"parse",function(){return tr}),e.d(p,"defaultI18n",function(){return re}),e.d(p,"setGlobalDateI18n",function(){return ye}),e.d(p,"setGlobalDateMasks",function(){return Un});var b={};e.r(b),e.d(b,"compare",function(){return ue}),e.d(b,"getLineIntersect",function(){return Dn}),e.d(b,"getRectIntersectByPoint",function(){return zn}),e.d(b,"getCircleIntersectByPoint",function(){return _n}),e.d(b,"getEllipseIntersectByPoint",function(){return Ze}),e.d(b,"applyMatrix",function(){return Te}),e.d(b,"invertMatrix",function(){return N}),e.d(b,"getCircleCenterByPoints",function(){return mt}),e.d(b,"distance",function(){return $t}),e.d(b,"scaleMatrix",function(){return me}),e.d(b,"floydWarshall",function(){return Zt}),e.d(b,"getAdjMatrix",function(){return de}),e.d(b,"translate",function(){return he}),e.d(b,"move",function(){return ce}),e.d(b,"scale",function(){return Me}),e.d(b,"rotate",function(){return ze}),e.d(b,"getDegree",function(){return Ve}),e.d(b,"isPointInPolygon",function(){return tn}),e.d(b,"intersectBBox",function(){return De}),e.d(b,"isPolygonsIntersect",function(){return cn}),e.d(b,"Line",function(){return hn}),e.d(b,"getBBoxBoundLine",function(){return nn}),e.d(b,"itemIntersectByLine",function(){return Sn}),e.d(b,"fractionToLine",function(){return Pe}),e.d(b,"getPointsCenter",function(){return le}),e.d(b,"squareDist",function(){return Le}),e.d(b,"pointLineSquareDist",function(){return Be}),e.d(b,"isPointsOverlap",function(){return en}),e.d(b,"pointRectSquareDist",function(){return sn});var S={};e.r(S),e.d(S,"uniqueId",function(){return Gr}),e.d(S,"formatPadding",function(){return Mr}),e.d(S,"cloneEvent",function(){return oi}),e.d(S,"isViewportChanged",function(){return ai}),e.d(S,"isNaN",function(){return Zr}),e.d(S,"calculationItemsBBox",function(){return Xi}),e.d(S,"processParallelEdges",function(){return $i});var l={};e.r(l),e.d(l,"getBBox",function(){return zo}),e.d(l,"getLoopCfgs",function(){return Yo}),e.d(l,"getLabelPosition",function(){return Xo}),e.d(l,"traverseTree",function(){return di}),e.d(l,"traverseTreeUp",function(){return ea}),e.d(l,"getLetterWidth",function(){return xi}),e.d(l,"getTextSize",function(){return Rs}),e.d(l,"plainCombosToTrees",function(){return ki}),e.d(l,"reconstructTree",function(){return ks}),e.d(l,"getComboBBox",function(){return Mi}),e.d(l,"shouldRefreshEdge",function(){return hu}),e.d(l,"cloneBesidesImg",function(){return ui});var A={};e.r(A),e.d(A,"getSpline",function(){return Ns}),e.d(A,"getControlPoint",function(){return ts}),e.d(A,"pointsToPolygon",function(){return Ls}),e.d(A,"pathToPoints",function(){return Ho}),e.d(A,"getClosedSpline",function(){return es}),e.d(A,"roundedHull",function(){return ps}),e.d(A,"paddedHull",function(){return yu});var j,y=e(14),n=e(0),s=function(){function kt(f){this._cfgs=Object(n.e)(this.getDefaultCfgs(),f),this._events={},this.destroyed=!1}return kt.prototype.getDefaultCfgs=function(){return{}},kt.prototype.initPlugin=function(f){var u=this;u.set("graph",f);var I=u.getEvents(),W={};Object(n.f)(I,function(ct,Ct){var _t=Object(n.J)(u,ct);W[Ct]=_t,f.on(Ct,_t)}),this._events=W,this.init()},kt.prototype.getEvents=function(){return{}},kt.prototype.get=function(f){return this._cfgs[f]},kt.prototype.set=function(f,u){this._cfgs[f]=u},kt.prototype.destroy=function(){},kt.prototype.destroyPlugin=function(){this.destroy();var f=this.get("graph"),u=this._events;Object(n.f)(u,function(I,W){f.off(W,I)}),this._events=null,this._cfgs=null,this.destroyed=!0},kt}(),h=(j=function(f,u){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,W){I.__proto__=W}||function(I,W){for(var ct in W)Object.prototype.hasOwnProperty.call(W,ct)&&(I[ct]=W[ct])})(f,u)},function(kt,f){function u(){this.constructor=kt}j(kt,f),kt.prototype=f===null?Object.create(f):(u.prototype=f.prototype,new u)}),M="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",O=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return h(f,kt),f.prototype.getDefaultCfgs=function(){return{img:M}},f.prototype.init=function(){var u=this.get("graph"),I=u.get("minZoom"),W=u.get("container"),ct=u.get("canvas").get("el"),Ct=u.get("width"),_t=u.get("height"),Xt=this.get("img")||M,ee=Object(y.b)(`<div class='g6-grid-container' style="position: absolute; left:0;top:0;right:0;bottom:0;overflow: hidden;z-index: -1;"></div>`),ae=Object(y.b)(`<div 
        class='g6-grid' 
        style='position:absolute;
        transform-origin: 0% 0% 0px;
        background-image: `+Xt+`;
        user-select: none
        '></div>`);ee.appendChild(ae),Object(y.c)(ee,{width:Ct+"px",height:_t+"px",left:W.offsetLeft+"px",top:W.offsetTop+"px"}),Object(y.c)(ae,{width:Ct/I+"px",height:_t/I+"px",left:"0px",top:"0px"}),W.insertBefore(ee,ct),this.set("container",ee),this.set("gridContainer",ae)},f.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},f.prototype.updateGrid=function(u){var I=this.get("gridContainer"),W=u.matrix;W||(W=[1,0,0,0,1,0,0,0,1]);var ct="matrix("+W[0]+", "+W[1]+", "+W[3]+", "+W[4]+", 0, 0)";Object(y.c)(I,{transform:ct})},f.prototype.getContainer=function(){return this.get("container")},f.prototype.destroy=function(){var u=this.get("graph").get("container"),I=this.get("container");u.removeChild(I)},f}(s),T=e(81),v=e.n(T),m=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,ct){W.__proto__=ct}||function(W,ct){for(var Ct in ct)Object.prototype.hasOwnProperty.call(ct,Ct)&&(W[Ct]=ct[Ct])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}();v()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var C=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return m(f,kt),f.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(I){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(I){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"]}},f.prototype.getEvents=function(){return{contextmenu:"onMenuShow"}},f.prototype.init=function(){var u=this.get("className"),I=Object(y.b)("<div class="+(u||"g6-component-contextmenu")+"></div>");Object(y.c)(I,{top:"0px",position:"absolute",visibility:"hidden"});var W=this.get("container");W||(W=this.get("graph").get("container")),Object(n.x)(W)&&(W=document.getElementById(W)),W.appendChild(I),this.set("menu",I)},f.prototype.onMenuShow=function(u){var I=this;u.preventDefault(),u.stopPropagation();var W=this.get("itemTypes");if(u.item){if(u.item&&u.item.getType&&W.indexOf(u.item.getType())===-1)return void I.onMenuHide()}else if(W.indexOf("canvas")===-1)return;if(this.get("shouldBegin")(u)){var ct=this.get("menu"),Ct=this.get("getContent"),_t=this.get("graph"),Xt=Ct(u,_t);Object(n.x)(Xt)?ct.innerHTML=Xt:ct.innerHTML=Xt.outerHTML,this.removeMenuEventListener();var ee=this.get("handleMenuClick");if(ee){var ae=function(Or){ee(Or.target,u.item,_t)};this.set("handleMenuClickWrapper",ae),ct.addEventListener("click",ae)}var je=_t.get("width"),Fe=_t.get("height"),_e=ct.getBoundingClientRect(),Ke=this.get("offsetX")||0,bn=this.get("offsetY")||0,wn=_t.getContainer().offsetTop,Nn=_t.getContainer().offsetLeft,Bn=u.canvasX+Nn+Ke,Gn=u.canvasY+wn+bn;Bn+_e.width>je&&(Bn=u.canvasX-_e.width-Ke+Nn),Gn+_e.height>Fe&&(Gn=u.canvasY-_e.height-bn+wn),Object(y.c)(ct,{top:Gn+"px",left:Bn+"px",visibility:"visible"});var sr=function(Or){I.onMenuHide()};document.body.addEventListener("click",sr),this.set("handler",sr)}},f.prototype.removeMenuEventListener=function(){var u=this.get("handleMenuClickWrapper"),I=this.get("handler");u&&(this.get("menu").removeEventListener("click",u),this.set("handleMenuClickWrapper",null)),I&&document.body.removeEventListener("click",I)},f.prototype.onMenuHide=function(){var u=this.get("menu");u&&Object(y.c)(u,{visibility:"hidden"}),this.removeMenuEventListener()},f.prototype.destroy=function(){var u=this.get("menu");if(this.removeMenuEventListener(),u){var I=this.get("container");I||(I=this.get("graph").get("container")),Object(n.x)(I)&&(I=document.getElementById(I)),I.removeChild(u)}},f}(s),D=e(52),Y=e(62),Z=e(2);function et(kt,f,u){var I=[0,0,0,0,0,0,0,0,0];return Z.a.fromTranslation(I,u),Z.a.multiply(kt,I,f)}function dt(kt,f,u){var I=[0,0,0,0,0,0,0,0,0];return Z.a.fromRotation(I,u),Z.a.multiply(kt,I,f)}function ht(kt,f,u){var I=[0,0,0,0,0,0,0,0,0];return Z.a.fromScaling(I,u),Z.a.multiply(kt,I,f)}function St(kt,f){for(var u,I,W,ct=kt?[].concat(kt):[1,0,0,0,1,0,0,0,1],Ct=0,_t=f.length;Ct<_t;Ct++){var Xt=f[Ct];switch(Xt[0]){case"t":et(ct,ct,[Xt[1],Xt[2]]);break;case"s":ht(ct,ct,[Xt[1],Xt[2]]);break;case"r":dt(ct,ct,Xt[1]);break;case"m":u=ct,I=ct,W=Xt[1],Z.a.multiply(u,W,I)}}return ct}function wt(kt,f){return kt[0]*f[1]-f[0]*kt[1]}function xt(kt,f,u){var I=Z.d.angle(kt,f),W=wt(kt,f)>=0;return u?W?2*Math.PI-I:I:W?I:2*Math.PI-I}function ft(kt,f,u){return u?(kt[0]=f[1],kt[1]=-1*f[0]):(kt[0]=-1*f[1],kt[1]=f[0]),kt}var Bt=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,ct){W.__proto__=ct}||function(W,ct){for(var Ct in ct)Object.prototype.hasOwnProperty.call(ct,Ct)&&(W[Ct]=ct[Ct])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}(),Rt=function(){return(Rt=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var ct in u=arguments[I])Object.prototype.hasOwnProperty.call(u,ct)&&(f[ct]=u[ct]);return f}).apply(this,arguments)},Ot=Math.max,X=r.transform,ut=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.handleUpdateCanvas=Object(n.d)(function(I){var W=u;W.destroyed||W.updateCanvas()},100,!1),u}return Bt(f,kt),f.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},f.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},f.prototype.disableRefresh=function(){this.set("refresh",!1)},f.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},f.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},f.prototype.initViewport=function(){var u=this,I=this._cfgs,W=I.size,ct=I.graph;if(!this.destroyed){var Ct=this.get("canvas").get("container"),_t=Object(y.b)(`
      <div
        class=`+I.viewportClassName+`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff'
        draggable=true>
      </div>`),Xt=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,ee=0,ae=0,je=!1,Fe=0,_e=0,Ke=0,bn=0,wn=0,Nn=0;_t.addEventListener("dragstart",function(Bn){var Gn,sr;if(Bn.dataTransfer){var ur=new Image;ur.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(sr=(Gn=Bn.dataTransfer).setDragImage)===null||sr===void 0||sr.call(Gn,ur,0,0);try{Bn.dataTransfer.setData("text/html","view-port-minimap")}catch(ei){Bn.dataTransfer.setData("text","view-port-minimap")}}if(I.refresh=!1,Bn.target===_t){var Or=_t.style;Fe=parseInt(Or.left,10),_e=parseInt(Or.top,10),Ke=parseInt(Or.width,10),bn=parseInt(Or.height,10),Ke>W[0]||bn>W[1]||(Nn=ct.getZoom(),wn=u.get("ratio"),je=!0,ee=Bn.clientX,ae=Bn.clientY)}},!1),_t.addEventListener(Xt?"dragover":"drag",function(Bn){if(je&&!Object(n.s)(Bn.clientX)&&!Object(n.s)(Bn.clientY)){var Gn=ee-Bn.clientX,sr=ae-Bn.clientY;(Fe-Gn<0||Fe-Gn+Ke>=W[0])&&(Gn=0),(_e-sr<0||_e-sr+bn>=W[1])&&(sr=0),Fe-=Gn,_e-=sr,Object(y.c)(_t,{left:Fe+"px",top:_e+"px"}),ct.translate(Gn*Nn/wn,sr*Nn/wn),ee=Bn.clientX,ae=Bn.clientY}},!1),_t.addEventListener("dragend",function(){je=!1,I.refresh=!0},!1),this.set("viewport",_t),Ct.appendChild(_t)}},f.prototype.updateViewport=function(){if(!this.destroyed){var u=this.get("ratio"),I=(this.get("dx"),this.get("dy"),this.get("totaldx")),W=this.get("totaldy"),ct=this.get("graph"),Ct=this.get("size"),_t=ct.get("width"),Xt=ct.get("height"),ee=ct.getPointByCanvas(0,0),ae=ct.getPointByCanvas(_t,Xt),je=this.get("viewport");je||this.initViewport(),ct.getZoom();var Fe=(ae.x-ee.x)*u,_e=(ae.y-ee.y)*u,Ke=ee.x*u+I,bn=ee.y*u+W,wn=Ke+Fe,Nn=bn+_e;Ke<0&&(Fe+=Ke,Ke=0),wn>Ct[0]&&(Fe-=wn-Ct[0]),bn<0&&(_e+=bn,bn=0),Nn>Ct[1]&&(_e-=Nn-Ct[1]),this.set("ratio",u);var Bn=Ke+"px",Gn=bn+"px";Object(y.c)(je,{left:Bn,top:Gn,width:Fe+"px",height:_e+"px"})}},f.prototype.updateGraphShapes=function(){var u=this._cfgs.graph,I=this.get("canvas"),W=u.get("group");if(!W.destroyed){var ct=W.clone();ct.resetMatrix(),I.clear(),I.add(ct),u.get("renderer")==="svg"&&this.updateVisible(ct)}},f.prototype.updateVisible=function(u){var I=this;if(u.isGroup()||u.get("visible")){var W=u.get("children");if(!W||!W.length)return;W.forEach(function(ct){ct.get("visible")||ct.hide(),I.updateVisible(ct)})}else u.hide()},f.prototype.updateKeyShapes=function(){var u=this,I=this._cfgs.graph;Object(n.f)(I.getEdges(),function(W){u.updateOneEdgeKeyShape(W)}),Object(n.f)(I.getNodes(),function(W){u.updateOneNodeKeyShape(W)}),this.clearDestroyedShapes()},f.prototype.updateOneNodeKeyShape=function(u){var I=this.get("canvas"),W=I.get("children")[0]||I.addGroup(),ct=this.get("itemMap")||{},Ct=ct[u.get("id")],_t=u.getBBox(),Xt=u.get("keyShape").clone(),ee=Xt.attr(),ae={x:_t.centerX,y:_t.centerY};Ct?ae=Object.assign(ee,ae):(Ct=Xt,W.add(Ct));var je=Ct.get("type");je!=="rect"&&je!=="image"||(ae.x=_t.minX,ae.y=_t.minY),Ct.attr(ae),u.isVisible()||Ct.hide(),Ct.exist=!0,ct[u.get("id")]=Ct,this.set("itemMap",ct)},f.prototype.updateDelegateShapes=function(){var u=this,I=this._cfgs.graph;Object(n.f)(I.getEdges(),function(W){u.updateOneEdgeKeyShape(W)}),Object(n.f)(I.getNodes(),function(W){u.updateOneNodeDelegateShape(W)}),this.clearDestroyedShapes()},f.prototype.clearDestroyedShapes=function(){var u=this.get("itemMap")||{},I=Object.keys(u);if(I&&I.length!==0)for(var W=I.length-1;W>=0;W--){var ct=u[I[W]],Ct=ct.exist;ct.exist=!1,Ct||(ct.remove(),delete u[I[W]])}},f.prototype.updateOneEdgeKeyShape=function(u){var I=this.get("canvas"),W=I.get("children")[0]||I.addGroup(),ct=this.get("itemMap")||{},Ct=ct[u.get("id")];if(Ct){var _t=u.get("keyShape").attr("path");Ct.attr("path",_t)}else Ct=u.get("keyShape").clone(),W.add(Ct),Ct.toBack();u.isVisible()||Ct.hide(),Ct.exist=!0,ct[u.get("id")]=Ct,this.set("itemMap",ct)},f.prototype.updateOneNodeDelegateShape=function(u){var I=this.get("canvas"),W=I.get("children")[0]||I.addGroup(),ct=this.get("delegateStyle"),Ct=this.get("itemMap")||{},_t=Ct[u.get("id")],Xt=u.getBBox();if(_t){var ee={x:Xt.minX,y:Xt.minY,width:Xt.width,height:Xt.height};_t.attr(ee)}else _t=W.addShape("rect",{attrs:Rt({x:Xt.minX,y:Xt.minY,width:Xt.width,height:Xt.height},ct),name:"minimap-node-shape"});u.isVisible()||_t.hide(),_t.exist=!0,Ct[u.get("id")]=_t,this.set("itemMap",Ct)},f.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},f.prototype.initContainer=function(){var u=this.get("graph"),I=this.get("size"),W=this.get("className"),ct=this.get("container"),Ct=Object(y.b)("<div class='"+W+"' style='width: "+I[0]+"px; height: "+I[1]+"px; overflow: hidden'></div>");Object(n.x)(ct)&&(ct=document.getElementById(ct)),ct?ct.appendChild(Ct):u.get("container").appendChild(Ct),this.set("container",Ct);var _t,Xt=Object(y.b)('<div class="g6-minimap-container" style="position: relative;"></div>');Ct.appendChild(Xt),_t=u.get("renderer")==="svg"?new Y.Canvas({container:Xt,width:I[0],height:I[1]}):new D.Canvas({container:Xt,width:I[0],height:I[1]}),this.set("canvas",_t),this.updateCanvas()},f.prototype.updateCanvas=function(){if(this.get("refresh")){var u=this.get("graph");if(!u.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var I=this.get("size"),W=this.get("canvas"),ct=this.get("type"),Ct=this.get("padding");if(!W.destroyed){switch(ct){case"default":this.updateGraphShapes();break;case"keyShape":this.updateKeyShapes();break;case"delegate":this.updateDelegateShapes()}var _t=W.get("children")[0];if(_t){_t.resetMatrix();var Xt=_t.getCanvasBBox(),ee=u.get("canvas").getCanvasBBox(),ae=ee.width,je=ee.height;Number.isFinite(Xt.width)&&(ae=Ot(Xt.width,ae),je=Ot(Xt.height,je)),ae+=2*Ct,je+=2*Ct;var Fe=Math.min(I[0]/ae,I[1]/je),_e=[1,0,0,0,1,0,0,0,1],Ke=0,bn=0;Number.isFinite(Xt.minX)&&(Ke=-Xt.minX),Number.isFinite(Xt.minY)&&(bn=-Xt.minY);var wn=(I[0]-(ae-2*Ct)*Fe)/2,Nn=(I[1]-(je-2*Ct)*Fe)/2;_e=X(_e,[["t",Ke,bn],["s",Fe,Fe],["t",wn,Nn]]),_t.setMatrix(_e),this.set("ratio",Fe),this.set("totaldx",wn+Ke*Fe),this.set("totaldy",Nn+bn*Fe),this.set("dx",wn),this.set("dy",Nn),this.updateViewport()}}}}},f.prototype.getCanvas=function(){return this.get("canvas")},f.prototype.getViewport=function(){return this.get("viewport")},f.prototype.getContainer=function(){return this.get("container")},f.prototype.destroy=function(){this.get("canvas").destroy();var u=this.get("container");u.parentNode.removeChild(u)},f}(s),vt=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,ct){W.__proto__=ct}||function(W,ct){for(var Ct in ct)Object.prototype.hasOwnProperty.call(ct,Ct)&&(W[Ct]=ct[Ct])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}();function pt(kt,f,u){var I=kt.x-f.x,W=kt.y-f.y;return!u||Math.abs(I)>u||Math.abs(W)>u?Math.sqrt(I*I+W*W):u}function Et(kt,f){var u=(f.source.y-f.target.y)/(f.source.x-f.target.x),I=(u*u*f.source.x+u*(kt.y-f.source.y)+kt.x)/(u*u+1);return{x:I,y:u*(I-f.source.x)+f.source.y}}var q=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return vt(f,kt),f.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},f.prototype.init=function(){var u=this.get("graph"),I=this.get("onTick");this.set("tick",function(){I&&I(),u.refreshPositions()})},f.prototype.bundling=function(u){var I=this;if(I.set("data",u),!I.isTicking()){var W=u.edges||[],ct=u.nodes||[],Ct={},_t=!1;if(ct.forEach(function(Gn){Gn.x!==null&&!Gn.y!==null&&Gn.x!==void 0&&!Gn.y!==void 0||(_t=!0),Ct[Gn.id]=Gn}),_t)throw new Error("please layout the graph or assign x and y for nodes first");I.set("nodeIdMap",Ct);var Xt=I.get("divisions"),ee=I.get("divRate"),ae=I.divideEdges(Xt);I.set("edgePoints",ae);var je=I.getEdgeBundles();I.set("edgeBundles",je);for(var Fe=I.get("cycles"),_e=I.get("iterations"),Ke=I.get("iterRate"),bn=I.get("lambda"),wn=0;wn<Fe;wn++){for(var Nn=function(sr){var ur=[];W.forEach(function(Or,ei){if(Or.source!==Or.target){var Ci=Ct[Or.source],Rr=Ct[Or.target];ur[ei]=I.getEdgeForces({source:Ci,target:Rr},ei,Xt,bn);for(var yi=0;yi<Xt+1;yi++)ae[ei][yi].x+=ur[ei][yi].x,ae[ei][yi].y+=ur[ei][yi].y}})},Bn=0;Bn<_e;Bn++)Nn();bn/=2,Xt*=ee,_e*=Ke,ae=I.divideEdges(Xt),I.set("edgePoints",ae)}W.forEach(function(Gn,sr){Gn.source!==Gn.target&&(Gn.type="polyline",Gn.controlPoints=ae[sr].slice(1,ae[sr].length-1))}),I.get("graph").refresh()}},f.prototype.updateBundling=function(u){var I=this,W=u.data;if(W&&I.set("data",W),I.get("ticking")&&I.set("ticking",!1),Object.keys(u).forEach(function(Ct){I.set(Ct,u[Ct])}),u.onTick){var ct=this.get("graph");I.set("tick",function(){u.onTick(),ct.refresh()})}I.bundling(W)},f.prototype.divideEdges=function(u){var I=this,W=I.get("data").edges,ct=I.get("nodeIdMap"),Ct=I.get("edgePoints");return Ct&&Ct!==void 0||(Ct=[]),W.forEach(function(_t,Xt){Ct[Xt]&&Ct[Xt]!==void 0||(Ct[Xt]=[]);var ee=ct[_t.source],ae=ct[_t.target];if(u===1)Ct[Xt].push({x:ee.x,y:ee.y}),Ct[Xt].push({x:.5*(ee.x+ae.x),y:.5*(ee.y+ae.y)}),Ct[Xt].push({x:ae.x,y:ae.y});else{var je=(Ct[Xt]&&Ct[Xt]!==[]?I.getEdgeLength(Ct[Xt]):pt({x:ee.x,y:ee.y},{x:ae.x,y:ae.y}))/(u+1),Fe=je,_e=[{x:ee.x,y:ee.y}];Ct[Xt].forEach(function(Ke,bn){if(bn!==0){for(var wn=pt(Ke,Ct[Xt][bn-1]);wn>Fe;){var Nn=Fe/wn,Bn={x:Ct[Xt][bn-1].x,y:Ct[Xt][bn-1].y};Bn.x+=Nn*(Ke.x-Ct[Xt][bn-1].x),Bn.y+=Nn*(Ke.y-Ct[Xt][bn-1].y),_e.push(Bn),wn-=Fe,Fe=je}Fe-=wn}}),_e.push({x:ae.x,y:ae.y}),Ct[Xt]=_e}}),Ct},f.prototype.getEdgeLength=function(u){var I=0;return u.forEach(function(W,ct){ct!==0&&(I+=pt(W,u[ct-1]))}),I},f.prototype.getEdgeBundles=function(){var u=this,I=u.get("data").edges||[],W=u.get("bundleThreshold"),ct=u.get("nodeIdMap"),Ct=u.get("edgeBundles");return Ct||(Ct=[]),I.forEach(function(_t,Xt){Ct[Xt]&&Ct[Xt]!==void 0||(Ct[Xt]=[])}),I.forEach(function(_t,Xt){var ee=ct[_t.source],ae=ct[_t.target];I.forEach(function(je,Fe){if(!(Fe<=Xt)){var _e=ct[je.source],Ke=ct[je.target];u.getBundleScore({source:ee,target:ae},{source:_e,target:Ke})>=W&&(Ct[Xt].push(Fe),Ct[Fe].push(Xt))}})}),Ct},f.prototype.getBundleScore=function(u,I){return u.vx=u.target.x-u.source.x,u.vy=u.target.y-u.source.y,I.vx=I.target.x-I.source.x,I.vy=I.target.y-I.source.y,u.length=pt({x:u.source.x,y:u.source.y},{x:u.target.x,y:u.target.y}),I.length=pt({x:I.source.x,y:I.source.y},{x:I.target.x,y:I.target.y}),this.getAngleScore(u,I)*this.getScaleScore(u,I)*this.getPositionScore(u,I)*this.getVisibilityScore(u,I)},f.prototype.getAngleScore=function(u,I){return function(W,ct){return W.x*ct.x+W.y*ct.y}({x:u.vx,y:u.vy},{x:I.vx,y:I.vy})/(u.length*I.length)},f.prototype.getScaleScore=function(u,I){var W=(u.length+I.length)/2;return 2/(W/Math.min(u.length,I.length)+Math.max(u.length,I.length)/W)},f.prototype.getPositionScore=function(u,I){var W=(u.length+I.length)/2;return W/(W+pt({x:(u.source.x+u.target.x)/2,y:(u.source.y+u.target.y)/2},{x:(I.source.x+I.target.x)/2,y:(I.source.y+I.target.y)/2}))},f.prototype.getVisibilityScore=function(u,I){var W=this.getEdgeVisibility(u,I),ct=this.getEdgeVisibility(I,u);return W<ct?W:ct},f.prototype.getEdgeVisibility=function(u,I){var W=Et(I.source,u),ct=Et(I.target,u),Ct={x:(W.x+ct.x)/2,y:(W.y+ct.y)/2},_t={x:(u.source.x+u.target.x)/2,y:(u.source.y+u.target.y)/2};return Math.max(0,1-2*pt(Ct,_t)/pt(W,ct))},f.prototype.getEdgeForces=function(u,I,W,ct){for(var Ct=this.get("edgePoints"),_t=this.get("K")/(pt(u.source,u.target)*(W+1)),Xt=[{x:0,y:0}],ee=1;ee<W;ee++){var ae={x:0,y:0},je=this.getSpringForce({pre:Ct[I][ee-1],cur:Ct[I][ee],next:Ct[I][ee+1]},_t),Fe=this.getElectrostaticForce(ee,I);ae.x=ct*(je.x+Fe.x),ae.y=ct*(je.y+Fe.y),Xt.push(ae)}return Xt.push({x:0,y:0}),Xt},f.prototype.getSpringForce=function(u,I){var W=u.pre.x+u.next.x-2*u.cur.x,ct=u.pre.y+u.next.y-2*u.cur.y;return{x:W*=I,y:ct*=I}},f.prototype.getElectrostaticForce=function(u,I){var W=this.get("eps"),ct=this.get("edgeBundles"),Ct=this.get("edgePoints"),_t=ct[I],Xt={x:0,y:0};return _t.forEach(function(ee){var ae={x:Ct[ee][u].x-Ct[I][u].x,y:Ct[ee][u].y-Ct[I][u].y};if(Math.abs(ae.x)>W||Math.abs(ae.y)>W){var je=1/pt(Ct[ee][u],Ct[I][u]);Xt.x+=ae.x*je,Xt.y+=ae.y*je}}),Xt},f.prototype.isTicking=function(){return this.get("ticking")},f.prototype.getSimulation=function(){return this.get("forceSimulation")},f.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),kt.prototype.destroy.call(this)},f}(s),st=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,ct){W.__proto__=ct}||function(W,ct){for(var Ct in ct)Object.prototype.hasOwnProperty.call(ct,Ct)&&(W[Ct]=ct[Ct])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}(),it=function(){return(it=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var ct in u=arguments[I])Object.prototype.hasOwnProperty.call(u,ct)&&(f[ct]=u[ct]);return f}).apply(this,arguments)},z={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},P=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return st(f,kt),f.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:Object(n.c)(z),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},f.prototype.getEvents=function(){var u;switch(this.get("trigger")){case"click":u={click:"magnify"};break;case"drag":u={click:"createDelegate"};break;default:u={mousemove:"magnify"}}return u},f.prototype.init=function(){var u=this.get("r");this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{}),this.set("r2",u*u);var I=this.get("d");this.set("molecularParam",(I+1)*u)},f.prototype.createDelegate=function(u){var I=this,W=this,ct=W.get("delegate");ct&&!ct.destroyed||(W.magnify(u),(ct=W.get("delegate")).on("dragstart",function(Ct){W.set("delegateCenterDiff",{x:ct.attr("x")-Ct.x,y:ct.attr("y")-Ct.y})}),ct.on("drag",function(Ct){W.magnify(Ct)}),this.get("scaleDBy")==="wheel"&&ct.on("mousewheel",function(Ct){I.scaleDByWheel(Ct)}),this.get("scaleRBy")==="wheel"&&ct.on("mousewheel",function(Ct){W.scaleRByWheel(Ct)}))},f.prototype.scaleRByWheel=function(u){if(u&&u.originalEvent){u.preventDefault&&u.preventDefault();var I,W=this.get("graph"),ct=this.get("delegate"),Ct=(ct?{x:ct.attr("x"),y:ct.attr("y")}:void 0)||W.getPointByClient(u.clientX,u.clientY);I=u.originalEvent.wheelDelta<0?.95:1/.95;var _t=this.get("maxR"),Xt=this.get("minR"),ee=this.get("r");(ee>(_t||W.get("height"))&&I>1||ee<(Xt||.05*W.get("height"))&&I<1)&&(I=1),ee*=I,this.set("r",ee),this.set("r2",ee*ee);var ae=this.get("d");this.set("molecularParam",(ae+1)*ee),this.set("delegateCenterDiff",void 0),this.magnify(u,Ct)}},f.prototype.scaleRByDrag=function(u){if(u){var I,W=this.get("dragPrePos"),ct=this.get("graph"),Ct=ct.getPointByClient(u.clientX,u.clientY);I=u.x-W.x<0?.95:1/.95;var _t=this.get("maxR"),Xt=this.get("minR"),ee=this.get("r");(ee>(_t||ct.get("height"))&&I>1||ee<(Xt||.05*ct.get("height"))&&I<1)&&(I=1),ee*=I,this.set("r",ee),this.set("r2",ee*ee);var ae=this.get("d");this.set("molecularParam",(ae+1)*ee),this.magnify(u,Ct),this.set("dragPrePos",{x:u.x,y:u.y})}},f.prototype.scaleDByWheel=function(u){if(u||u.originalEvent){u.preventDefault&&u.preventDefault();var I=0;I=u.originalEvent.wheelDelta<0?-.1:.1;var W=this.get("d")+I,ct=this.get("maxD"),Ct=this.get("minD");if(W<ct&&W>Ct){this.set("d",W);var _t=this.get("r");this.set("molecularParam",(W+1)*_t);var Xt=this.get("delegate"),ee=Xt?{x:Xt.attr("x"),y:Xt.attr("y")}:void 0;this.set("delegateCenterDiff",void 0),this.magnify(u,ee)}}},f.prototype.scaleDByDrag=function(u){var I=this.get("dragPrePos"),W=u.x-I.x>0?.1:-.1,ct=this.get("d")+W,Ct=this.get("maxD"),_t=this.get("minD");if(ct<Ct&&ct>_t){this.set("d",ct);var Xt=this.get("r");this.set("molecularParam",(ct+1)*Xt),this.magnify(u)}this.set("dragPrePos",{x:u.x,y:u.y})},f.prototype.magnify=function(u,I){this.restoreCache();var W=this.get("graph"),ct=this.get("cachedMagnifiedModels"),Ct=this.get("cachedOriginPositions"),_t=this.get("showLabel"),Xt=this.get("r"),ee=this.get("r2"),ae=this.get("d"),je=this.get("molecularParam"),Fe=W.getNodes(),_e=Fe.length,Ke=I?{x:I.x,y:I.y}:{x:u.x,y:u.y};!this.get("dragging")||this.get("trigger")!=="mousemove"&&this.get("trigger")!=="click"||(Ke=this.get("cacheCenter"));var bn=this.get("delegateCenterDiff");bn&&(Ke.x+=bn.x,Ke.y+=bn.y),this.updateDelegate(Ke,Xt);for(var wn=0;wn<_e;wn++){var Nn=Fe[wn].getModel(),Bn=Nn.x,Gn=Nn.y;if(!isNaN(Bn)&&!isNaN(Gn)){var sr=(Bn-Ke.x)*(Bn-Ke.x)+(Gn-Ke.y)*(Gn-Ke.y);if(!isNaN(sr)&&sr<ee&&sr!==0){var ur=Math.sqrt(sr),Or=je*ur/(ae*ur+Xt),ei=(Bn-Ke.x)/ur,Ci=(Gn-Ke.y)/ur;if(Nn.x=ei*Or+Ke.x,Nn.y=Ci*Or+Ke.y,Ct[Nn.id]||(Ct[Nn.id]={x:Bn,y:Gn,texts:[]}),ct.push(Nn),_t&&2*ur<Xt)for(var Rr=Fe[wn].getContainer().getChildren(),yi=Rr.length,oo=0;oo<yi;oo++){var so=Rr[oo];so.get("type")==="text"&&(Ct[Nn.id].texts.push({visible:so.get("visible"),shape:so}),so.set("visible",!0))}}}}W.refreshPositions()},f.prototype.restoreCache=function(){for(var u=this.get("cachedMagnifiedModels"),I=this.get("cachedOriginPositions"),W=u.length,ct=0;ct<W;ct++){var Ct=u[ct],_t=I[Ct.id];Ct.x=_t.x,Ct.y=_t.y;for(var Xt=_t.texts.length,ee=0;ee<Xt;ee++){var ae=_t.texts[ee];ae.shape.set("visible",ae.visible)}}this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{})},f.prototype.updateParams=function(u){var I=u.r,W=u.d,ct=u.trigger,Ct=u.minD,_t=u.maxD,Xt=u.minR,ee=u.maxR,ae=u.scaleDBy,je=u.scaleRBy;isNaN(u.r)||(this.set("r",I),this.set("r2",I*I)),isNaN(W)||this.set("d",W),isNaN(_t)||this.set("maxD",_t),isNaN(Ct)||this.set("minD",Ct),isNaN(ee)||this.set("maxR",ee),isNaN(Xt)||this.set("minR",Xt);var Fe,_e=this.get("d"),Ke=this.get("r");this.set("molecularParam",(_e+1)*Ke),ct!=="mousemove"&&ct!=="click"&&ct!=="drag"||this.set("trigger",ct),(ae==="drag"||ae==="wheel"||ae==="unset")&&(this.set("scaleDBy",ae),this.get("delegate").remove(),this.get("delegate").destroy(),(Fe=this.get("dPercentText"))&&(Fe.remove(),Fe.destroy())),je!=="drag"&&je!=="wheel"&&je!=="unset"||(this.set("scaleRBy",je),this.get("delegate").remove(),this.get("delegate").destroy(),(Fe=this.get("dPercentText"))&&(Fe.remove(),Fe.destroy()))},f.prototype.updateDelegate=function(u,I){var W=this,ct=this,Ct=ct.get("graph"),_t=ct.get("delegate");if(!_t||_t.destroyed){var Xt=Ct.get("group"),ee=ct.get("delegateStyle")||z;_t=Xt.addShape("circle",{attrs:it({r:I/1.5,x:u.x,y:u.y},ee),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?_t.on("mousewheel",function(_e){ct.scaleRByWheel(_e)}):this.get("scaleRBy")==="drag"&&(_t.on("dragstart",function(_e){ct.set("dragging",!0),ct.set("cacheCenter",{x:_e.x,y:_e.y}),ct.set("dragPrePos",{x:_e.x,y:_e.y})}),_t.on("drag",function(_e){ct.scaleRByDrag(_e)}),_t.on("dragend",function(_e){ct.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?_t.on("mousewheel",function(_e){W.scaleDByWheel(_e)}):this.get("scaleDBy")==="drag"&&(_t.on("dragstart",function(_e){ct.set("dragging",!0),ct.set("cacheCenter",{x:_e.x,y:_e.y}),ct.set("dragPrePos",{x:_e.x,y:_e.y})}),_t.on("drag",function(_e){W.scaleDByDrag(_e)}),_t.on("dragend",function(_e){ct.set("dragging",!1)})))}else _t.attr({x:u.x,y:u.y,r:I/1.5});if(ct.get("showDPercent")){var ae=Math.round((ct.get("d")-ct.get("minD"))/(ct.get("maxD")-ct.get("minD"))*100),je=ct.get("dPercentText"),Fe=u.y+I/1.5+16;!je||je.destroyed?(je=Ct.get("group").addShape("text",{attrs:{text:ae+"%",x:u.x,y:Fe,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),ct.set("dPercentText",je)):je.attr({text:ae+"%",x:u.x,y:Fe})}ct.set("delegate",_t)},f.prototype.clear=function(){var u=this.get("graph");this.restoreCache(),u.refreshPositions();var I=this.get("delegate");I&&!I.destroyed&&(I.remove(),I.destroy());var W=this.get("dPercentText");W&&!W.destroyed&&(W.remove(),W.destroy())},f.prototype.destroy=function(){this.clear()},f}(s),H=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,ct){W.__proto__=ct}||function(W,ct){for(var Ct in ct)Object.prototype.hasOwnProperty.call(ct,Ct)&&(W[Ct]=ct[Ct])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}();v()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var k=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return H(f,kt),f.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(I){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},f.prototype.init=function(){var u=this,I=this.get("graph"),W=this.get("getContent")(I),ct=W;Object(n.x)(W)&&(ct=Object(y.b)(W));var Ct=this.get("className");ct.setAttribute("class",Ct||"g6-component-toolbar");var _t=this.get("container");_t||(_t=this.get("graph").get("container")),Object(n.x)(_t)&&(_t=document.getElementById(_t)),_t.appendChild(ct),this.set("toolBar",ct);var Xt=this.get("handleClick");ct.addEventListener("click",function(ae){var je=function(_e){if(!_e)return[];if(_e.composedPath)return _e.composedPath();for(var Ke=[],bn=_e.target;bn;){if(Ke.push(bn),bn.tagName==="HTML")return Ke.push(document,window),Ke;bn=bn.parentElement}return Ke}(ae).filter(function(_e){return _e.nodeName==="LI"});if(je.length!==0){var Fe=je[0].getAttribute("code");Fe&&(Xt?Xt(Fe,I):u.handleDefaultOperator(Fe,I))}});var ee=this.get("position");ee&&Object(y.c)(ct,{top:ee.y+"px",left:ee.x+"px"}),this.bindUndoRedo()},f.prototype.bindUndoRedo=function(){var u=this.get("graph"),I=document.querySelector('.g6-component-toolbar li[code="undo"]'),W=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),ct=document.querySelector('.g6-component-toolbar li[code="redo"]'),Ct=document.querySelector('.g6-component-toolbar li[code="redo"] svg');I&&W&&ct&&Ct&&u.on("stackchange",function(_t){var Xt=_t.undoStack,ee=_t.redoStack,ae=Xt.length,je=ee.length;ae===1?(I.setAttribute("style","cursor: not-allowed"),W.setAttribute("style","opacity: 0.4")):(I.removeAttribute("style"),W.removeAttribute("style")),je===0?(ct.setAttribute("style","cursor: not-allowed"),Ct.setAttribute("style","opacity: 0.4")):(ct.removeAttribute("style"),Ct.removeAttribute("style"))})},f.prototype.undo=function(){var u=this.get("graph"),I=u.getUndoStack();if(I&&I.length!==0){var W=I.pop();if(W){var ct=W.action;u.pushStack(ct,Object(n.c)(W.data),"redo");var Ct=W.data.before;if(ct==="add"&&(Ct=W.data.after),!Ct)return;switch(ct){case"visible":Object.keys(Ct).forEach(function(_t){var Xt=Ct[_t];Xt&&Xt.forEach(function(ee){var ae=u.findById(ee.id);ee.visible?u.showItem(ae,!1):u.hideItem(ae,!1)})});break;case"render":case"update":Object.keys(Ct).forEach(function(_t){var Xt=Ct[_t];Xt&&Xt.forEach(function(ee){u.updateItem(ee.id,ee,!1)})});break;case"changedata":u.changeData(Ct,!1);break;case"delete":Object.keys(Ct).forEach(function(_t){var Xt=Ct[_t];Xt&&Xt.forEach(function(ee){var ae=ee.itemType;delete ee.itemType,u.addItem(ae,ee,!1)})});break;case"add":Object.keys(Ct).forEach(function(_t){var Xt=Ct[_t];Xt&&Xt.forEach(function(ee){u.removeItem(ee.id,!1)})});break;case"updateComboTree":Object.keys(Ct).forEach(function(_t){var Xt=Ct[_t];Xt&&Xt.forEach(function(ee){u.updateComboTree(ee.id,ee.parentId,!1)})})}}}},f.prototype.redo=function(){var u=this.get("graph"),I=u.getRedoStack();if(I&&I.length!==0){var W=I.pop();if(W){var ct=W.action,Ct=W.data.after;if(u.pushStack(ct,Object(n.c)(W.data)),ct==="delete"&&(Ct=W.data.before),!Ct)return;switch(ct){case"visible":Object.keys(Ct).forEach(function(_t){var Xt=Ct[_t];Xt&&Xt.forEach(function(ee){var ae=u.findById(ee.id);ee.visible?u.showItem(ae,!1):u.hideItem(ae,!1)})});break;case"render":case"update":Object.keys(Ct).forEach(function(_t){var Xt=Ct[_t];Xt&&Xt.forEach(function(ee){u.updateItem(ee.id,ee,!1)})});break;case"changedata":u.changeData(Ct,!1);break;case"delete":Ct.edges&&Ct.edges.forEach(function(_t){u.removeItem(_t.id,!1)}),Ct.nodes&&Ct.nodes.forEach(function(_t){u.removeItem(_t.id,!1)}),Ct.combos&&Ct.combos.forEach(function(_t){u.removeItem(_t.id,!1)});break;case"add":Object.keys(Ct).forEach(function(_t){var Xt=Ct[_t];Xt&&Xt.forEach(function(ee){var ae=ee.itemType;delete ee.itemType,u.addItem(ae,ee,!1)})});break;case"updateComboTree":Object.keys(Ct).forEach(function(_t){var Xt=Ct[_t];Xt&&Xt.forEach(function(ee){u.updateComboTree(ee.id,ee.parentId,!1)})})}}}},f.prototype.handleDefaultOperator=function(u,I){var W=I.getZoom();switch(u){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":var ct=1/(1-.05*this.get("zoomSensitivity"));if(ct*W>(this.get("maxZoom")||I.get("maxZoom")))return;I.zoomTo(W*ct);break;case"zoomIn":var Ct=1-.05*this.get("zoomSensitivity");if(Ct*W<(this.get("minZoom")||I.get("minZoom")))return;I.zoomTo(W*Ct);break;case"realZoom":I.zoomTo(1);break;case"autoZoom":I.fitView([20,20])}},f.prototype.destroy=function(){var u=this.get("toolBar");if(u){var I=this.get("container");I||(I=this.get("graph").get("container")),Object(n.x)(I)&&(I=document.getElementById(I)),I.removeChild(u)}var W=this.get("handleClick");W&&u.removeEventListener("click",W)},f}(s),d=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,ct){W.__proto__=ct}||function(W,ct){for(var Ct in ct)Object.prototype.hasOwnProperty.call(ct,Ct)&&(W[Ct]=ct[Ct])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}();v()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var g=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return d(f,kt),f.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(I){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`+I.item.getType()+`</h4>
          <span class='tooltip-id'>ID\uFF1A`+I.item.getID()+`</span>
        `},shouldBegin:function(I){return!0},itemTypes:["node","edge","combo"]}},f.prototype.getEvents=function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},f.prototype.init=function(){var u=this.get("className")||"g6-component-tooltip",I=Object(y.b)("<div class="+u+"></div>"),W=this.get("container");W||(W=this.get("graph").get("container")),Object(n.x)(W)&&(W=document.getElementById(W)),Object(y.c)(I,{position:"absolute",visibility:"hidden"}),W.appendChild(I),this.set("tooltip",I)},f.prototype.onMouseEnter=function(u){var I=this.get("itemTypes");if(!u.item||!u.item.getType||I.indexOf(u.item.getType())!==-1){var W=u.item,ct=this.get("graph");this.currentTarget=W,this.showTooltip(u),ct.emit("tooltipchange",{item:u.item,action:"show"})}},f.prototype.onMouseMove=function(u){var I=this.get("itemTypes");u.item&&u.item.getType&&I.indexOf(u.item.getType())===-1||this.currentTarget&&u.item===this.currentTarget&&this.showTooltip(u)},f.prototype.onMouseLeave=function(){this.hideTooltip(),this.get("graph").emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},f.prototype.showTooltip=function(u){if(u.item){var I=this.get("itemTypes");if(!u.item.getType||I.indexOf(u.item.getType())!==-1){var W=this.get("tooltip"),ct=this.get("getContent")(u);Object(n.x)(ct)?W.innerHTML=ct:W.innerHTML=ct.outerHTML,this.updatePosition(u)}}},f.prototype.hideTooltip=function(){var u=this.get("tooltip");u&&Object(y.c)(u,{visibility:"hidden"})},f.prototype.updatePosition=function(u){var I=this.get("shouldBegin"),W=this.get("tooltip");if(I(u)){var ct=this.get("graph"),Ct=ct.get("width"),_t=ct.get("height"),Xt=this.get("offsetX")||0,ee=this.get("offsetY")||0,ae=ct.getPointByClient(u.clientX,u.clientY),je=ct.getCanvasByPoint(ae.x,ae.y),Fe=je.x,_e=je.y;Fe+=Xt,_e+=ee;var Ke=W.getBoundingClientRect();Fe+Ke.width>Ct&&(Fe=Fe-Ke.width-Xt),_e+Ke.height>_t&&(_e=_e-Ke.height-ee),Object(y.c)(W,{left:Fe+"px",top:_e+"px",visibility:"visible"})}else Object(y.c)(W,{visibility:"hidden"})},f.prototype.hide=function(){this.onMouseLeave()},f.prototype.destroy=function(){var u=this.get("tooltip");if(u){var I=this.get("container");I||(I=this.get("graph").get("container")),Object(n.x)(I)&&(I=document.getElementById(I)),I.removeChild(u)}},f}(s),F=e(31),V={};function tt(kt,f){V[kt]=f}var ot=function(){function kt(f){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=f,this.initCfg(),this.init()}return kt.prototype.translate=function(f){return f},kt.prototype.change=function(f){Object(n.a)(this.__cfg__,f),this.init()},kt.prototype.clone=function(){return this.constructor(this.__cfg__)},kt.prototype.getTicks=function(){var f=this;return Object(n.z)(this.ticks,function(u,I){return Object(n.v)(u)?u:{text:f.getText(u,I),tickValue:u,value:f.scale(u)}})},kt.prototype.getText=function(f,u){var I=this.formatter,W=I?I(f,u):f;return Object(n.s)(W)||!Object(n.r)(W.toString)?"":W.toString()},kt.prototype.getConfig=function(f){return this.__cfg__[f]},kt.prototype.init=function(){Object(n.a)(this,this.__cfg__),this.setDomain(),Object(n.p)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},kt.prototype.initCfg=function(){},kt.prototype.setDomain=function(){},kt.prototype.calculateTicks=function(){var f=this.tickMethod,u=[];if(Object(n.x)(f)){var I=V[f];if(!I)throw new Error("There is no method to to calculate ticks!");u=I(this)}else Object(n.r)(f)&&(u=f(this));return u},kt.prototype.rangeMin=function(){return Object(n.k)(this.range)},kt.prototype.rangeMax=function(){return Object(n.y)(this.range)},kt.prototype.calcPercent=function(f,u,I){return Object(n.t)(f)?(f-u)/(I-u):NaN},kt.prototype.calcValue=function(f,u,I){return u+f*(I-u)},kt}(),at=e(1),At=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="cat",u.isCategory=!0,u.cache=new Map,u}return Object(at.b)(f,kt),f.prototype.translate=function(u){if(this.cache.has(u))return this.cache.get(u);var I=Object(n.l)(this.values,u);return I===-1&&(I=Object(n.t)(u)?u:NaN),this.cache.set(u,I),I},f.prototype.scale=function(u){var I=this.translate(u),W=this.calcPercent(I,this.min,this.max);return this.calcValue(W,this.rangeMin(),this.rangeMax())},f.prototype.invert=function(u){var I=this.max-this.min,W=this.calcPercent(u,this.rangeMin(),this.rangeMax()),ct=Math.round(I*W)+this.min;return ct<this.min||ct>this.max?NaN:this.values[ct]},f.prototype.getText=function(u){for(var I=[],W=1;W<arguments.length;W++)I[W-1]=arguments[W];var ct=u;return Object(n.t)(u)&&!this.values.includes(u)&&(ct=this.values[ct]),kt.prototype.getText.apply(this,Object(at.d)([ct],I))},f.prototype.initCfg=function(){this.tickMethod="cat"},f.prototype.setDomain=function(){if(Object(n.s)(this.getConfig("min"))&&(this.min=0),Object(n.s)(this.getConfig("max"))){var u=this.values.length;this.max=u>1?u-1:u}this.cache&&this.cache.clear()},f}(ot),yt=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,gt="[^\\s]+",bt=/\[([^]*?)\]/gm;function Tt(kt,f){for(var u=[],I=0,W=kt.length;I<W;I++)u.push(kt[I].substr(0,f));return u}var Dt=function(f){return function(u,I){var W=I[f].map(function(ct){return ct.toLowerCase()}).indexOf(u.toLowerCase());return W>-1?W:null}};function Ut(kt){for(var f=[],u=1;u<arguments.length;u++)f[u-1]=arguments[u];for(var I=0,W=f;I<W.length;I++){var ct=W[I];for(var Ct in ct)kt[Ct]=ct[Ct]}return kt}var jt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Vt=["January","February","March","April","May","June","July","August","September","October","November","December"],Ht=Tt(Vt,3),re={dayNamesShort:Tt(jt,3),dayNames:jt,monthNamesShort:Ht,monthNames:Vt,amPm:["am","pm"],DoFn:function(f){return f+["th","st","nd","rd"][f%10>3?0:(f-f%10!=10?1:0)*f%10]}},pe=Ut({},re),ye=function(f){return pe=Ut(pe,f)},we=function(f){return f.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Re=function(f,u){for(u===void 0&&(u=2),f=String(f);f.length<u;)f="0"+f;return f},He={D:function(f){return String(f.getDate())},DD:function(f){return Re(f.getDate())},Do:function(f,u){return u.DoFn(f.getDate())},d:function(f){return String(f.getDay())},dd:function(f){return Re(f.getDay())},ddd:function(f,u){return u.dayNamesShort[f.getDay()]},dddd:function(f,u){return u.dayNames[f.getDay()]},M:function(f){return String(f.getMonth()+1)},MM:function(f){return Re(f.getMonth()+1)},MMM:function(f,u){return u.monthNamesShort[f.getMonth()]},MMMM:function(f,u){return u.monthNames[f.getMonth()]},YY:function(f){return Re(String(f.getFullYear()),4).substr(2)},YYYY:function(f){return Re(f.getFullYear(),4)},h:function(f){return String(f.getHours()%12||12)},hh:function(f){return Re(f.getHours()%12||12)},H:function(f){return String(f.getHours())},HH:function(f){return Re(f.getHours())},m:function(f){return String(f.getMinutes())},mm:function(f){return Re(f.getMinutes())},s:function(f){return String(f.getSeconds())},ss:function(f){return Re(f.getSeconds())},S:function(f){return String(Math.round(f.getMilliseconds()/100))},SS:function(f){return Re(Math.round(f.getMilliseconds()/10),2)},SSS:function(f){return Re(f.getMilliseconds(),3)},a:function(f,u){return f.getHours()<12?u.amPm[0]:u.amPm[1]},A:function(f,u){return f.getHours()<12?u.amPm[0].toUpperCase():u.amPm[1].toUpperCase()},ZZ:function(f){var u=f.getTimezoneOffset();return(u>0?"-":"+")+Re(100*Math.floor(Math.abs(u)/60)+Math.abs(u)%60,4)},Z:function(f){var u=f.getTimezoneOffset();return(u>0?"-":"+")+Re(Math.floor(Math.abs(u)/60),2)+":"+Re(Math.abs(u)%60,2)}},pn=function(f){return+f-1},fn=[null,"[1-9]\\d?"],Rn=[null,gt],Cn=["isPm",gt,function(kt,f){var u=kt.toLowerCase();return u===f.amPm[0]?0:u===f.amPm[1]?1:null}],kn=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(kt){var f=(kt+"").match(/([+-]|\d\d)/gi);if(f){var u=60*+f[1]+parseInt(f[2],10);return f[0]==="+"?u:-u}return 0}],Mn={D:["day","[1-9]\\d?"],DD:["day","\\d\\d"],Do:["day","[1-9]\\d?"+gt,function(kt){return parseInt(kt,10)}],M:["month","[1-9]\\d?",pn],MM:["month","\\d\\d",pn],YY:["year","\\d\\d",function(kt){var f=+(""+new Date().getFullYear()).substr(0,2);return+(""+(+kt>68?f-1:f)+kt)}],h:["hour","[1-9]\\d?",void 0,"isPm"],hh:["hour","\\d\\d",void 0,"isPm"],H:["hour","[1-9]\\d?"],HH:["hour","\\d\\d"],m:["minute","[1-9]\\d?"],mm:["minute","\\d\\d"],s:["second","[1-9]\\d?"],ss:["second","\\d\\d"],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(kt){return 100*+kt}],SS:["millisecond","\\d\\d",function(kt){return 10*+kt}],SSS:["millisecond","\\d{3}"],d:fn,dd:fn,ddd:Rn,dddd:Rn,MMM:["month",gt,Dt("monthNamesShort")],MMMM:["month",gt,Dt("monthNames")],a:Cn,A:Cn,ZZ:kn,Z:kn},Tn={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Un=function(f){return Ut(Tn,f)},Kn=function(f,u,I){if(u===void 0&&(u=Tn.default),I===void 0&&(I={}),typeof f=="number"&&(f=new Date(f)),Object.prototype.toString.call(f)!=="[object Date]"||isNaN(f.getTime()))throw new Error("Invalid Date pass to format");var W=[];u=(u=Tn[u]||u).replace(bt,function(Ct,_t){return W.push(_t),"@@@"});var ct=Ut(Ut({},pe),I);return(u=u.replace(yt,function(Ct){return He[Ct](f,ct)})).replace(/@@@/g,function(){return W.shift()})};function tr(kt,f,u){if(u===void 0&&(u={}),typeof f!="string")throw new Error("Invalid format in fecha parse");if(f=Tn[f]||f,kt.length>1e3)return null;var I={year:new Date().getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},W=[],ct=[],Ct=f.replace(bt,function(Gn,sr){return ct.push(we(sr)),"@@@"}),_t={},Xt={};Ct=we(Ct).replace(yt,function(Gn){var sr=Mn[Gn],ur=sr[0],Or=sr[1],ei=sr[3];if(_t[ur])throw new Error("Invalid format. "+ur+" specified twice in format");return _t[ur]=!0,ei&&(Xt[ei]=!0),W.push(sr),"("+Or+")"}),Object.keys(Xt).forEach(function(Gn){if(!_t[Gn])throw new Error("Invalid format. "+Gn+" is required in specified format")}),Ct=Ct.replace(/@@@/g,function(){return ct.shift()});var ee=kt.match(new RegExp(Ct,"i"));if(!ee)return null;for(var ae=Ut(Ut({},pe),u),je=1;je<ee.length;je++){var Fe=W[je-1],_e=Fe[0],Ke=Fe[2],bn=Ke?Ke(ee[je],ae):+ee[je];if(bn==null)return null;I[_e]=bn}I.isPm===1&&I.hour!=null&&+I.hour!=12?I.hour=+I.hour+12:I.isPm===0&&+I.hour==12&&(I.hour=0);for(var wn=new Date(I.year,I.month,I.day,I.hour,I.minute,I.second,I.millisecond),Nn=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],Bn=(je=0,Nn.length);je<Bn;je++)if(_t[Nn[je][0]]&&I[Nn[je][0]]!==wn[Nn[je][1]]())return null;return I.timezoneOffset==null?wn:new Date(Date.UTC(I.year,I.month,I.day,I.hour,I.minute-I.timezoneOffset,I.second,I.millisecond))}var or={format:Kn,parse:tr,defaultI18n:re,setGlobalDateI18n:ye,setGlobalDateMasks:Un};function nr(kt,f){return(p.format||or.format)(kt,f)}function er(kt){return Object(n.x)(kt)&&(kt=kt.indexOf("T")>0?new Date(kt).getTime():new Date(kt.replace(/-/gi,"/")).getTime()),Object(n.o)(kt)&&(kt=kt.getTime()),kt}var Sr=36e5,Vr=24*Sr,ti=31*Vr,hi=[["HH:mm:ss",1e3],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",6e4],["HH:mm",6e5],["HH:mm",18e5],["HH",Sr],["HH",6*Sr],["HH",12*Sr],["YYYY-MM-DD",Vr],["YYYY-MM-DD",4*Vr],["YYYY-WW",7*Vr],["YYYY-MM",ti],["YYYY-MM",4*ti],["YYYY-MM",6*ti],["YYYY",380*Vr]];function Fi(kt,f,u){var I,W=(I=function(_t){return _t[1]},function(Ct,_t,Xt,ee){for(var ae=Object(n.s)(Xt)?0:Xt,je=Object(n.s)(ee)?Ct.length:ee;ae<je;){var Fe=ae+je>>>1;I(Ct[Fe])>_t?je=Fe:ae=Fe+1}return ae})(hi,(f-kt)/u)-1,ct=hi[W];return W<0?ct=hi[0]:W>=hi.length&&(ct=Object(n.y)(hi)),ct}var to=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="timeCat",u}return Object(at.b)(f,kt),f.prototype.translate=function(u){u=er(u);var I=this.values.indexOf(u);return I===-1&&(I=Object(n.t)(u)&&u<this.values.length?u:NaN),I},f.prototype.getText=function(u,I){var W=this.translate(u);if(W>-1){var ct=this.values[W],Ct=this.formatter;return ct=Ct?Ct(ct,I):nr(ct,this.mask)}return u},f.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},f.prototype.setDomain=function(){var u=this.values;Object(n.f)(u,function(I,W){u[W]=er(I)}),u.sort(function(I,W){return I-W}),kt.prototype.setDomain.call(this)},f}(At),si=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.isContinuous=!0,u}return Object(at.b)(f,kt),f.prototype.scale=function(u){if(Object(n.s)(u))return NaN;var I=this.rangeMin(),W=this.rangeMax();return this.max===this.min?I:I+this.getScalePercent(u)*(W-I)},f.prototype.init=function(){kt.prototype.init.call(this);var u=this.ticks,I=Object(n.k)(u),W=Object(n.y)(u);I<this.min&&(this.min=I),W>this.max&&(this.max=W),Object(n.s)(this.minLimit)||(this.min=I),Object(n.s)(this.maxLimit)||(this.max=W)},f.prototype.setDomain=function(){var u=Object(n.j)(this.values),I=u.min,W=u.max;Object(n.s)(this.min)&&(this.min=I),Object(n.s)(this.max)&&(this.max=W),this.min>this.max&&(this.min=I,this.max=W)},f.prototype.calculateTicks=function(){var u=this,I=kt.prototype.calculateTicks.call(this);return this.nice||(I=Object(n.g)(I,function(W){return W>=u.min&&W<=u.max})),I},f.prototype.getScalePercent=function(u){var I=this.max,W=this.min;return(u-W)/(I-W)},f.prototype.getInvertPercent=function(u){return(u-this.rangeMin())/(this.rangeMax()-this.rangeMin())},f}(ot),Ti=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="linear",u.isLinear=!0,u}return Object(at.b)(f,kt),f.prototype.invert=function(u){var I=this.getInvertPercent(u);return this.min+I*(this.max-this.min)},f.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},f}(si);function _i(kt,f){var u=Math.E;return f>=0?Math.pow(u,Math.log(f)/kt):-1*Math.pow(u,Math.log(-f)/kt)}function Li(kt,f){return kt===1?1:Math.log(f)/Math.log(kt)}function Vi(kt,f,u){Object(n.s)(u)&&(u=Math.max.apply(null,kt));var I=u;return Object(n.f)(kt,function(W){W>0&&W<I&&(I=W)}),I===u&&(I=u/f),I>1&&(I=1),I}var ro=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="log",u}return Object(at.b)(f,kt),f.prototype.invert=function(u){var I,W=this.base,ct=Li(W,this.max),Ct=this.rangeMin(),_t=this.rangeMax()-Ct,Xt=this.positiveMin;if(Xt){if(u===0)return 0;var ee=1/(ct-(I=Li(W,Xt/W)))*_t;if(u<ee)return u/ee*Xt}else I=Li(W,this.min);var ae=(u-Ct)/_t*(ct-I)+I;return Math.pow(W,ae)},f.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},f.prototype.setDomain=function(){kt.prototype.setDomain.call(this);var u=this.min;if(u<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");u===0&&(this.positiveMin=Vi(this.values,this.base,this.max))},f.prototype.getScalePercent=function(u){var I=this.max,W=this.min;if(I===W||u<=0)return 0;var ct=this.base,Ct=this.positiveMin;return Ct&&(W=1*Ct/ct),u<Ct?u/Ct/(Li(ct,I)-Li(ct,W)):(Li(ct,u)-Li(ct,W))/(Li(ct,I)-Li(ct,W))},f}(si),jr=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="pow",u}return Object(at.b)(f,kt),f.prototype.invert=function(u){var I=this.getInvertPercent(u),W=this.exponent,ct=_i(W,this.max),Ct=_i(W,this.min),_t=I*(ct-Ct)+Ct,Xt=_t>=0?1:-1;return Math.pow(_t,W)*Xt},f.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},f.prototype.getScalePercent=function(u){var I=this.max,W=this.min;if(I===W)return 0;var ct=this.exponent;return(_i(ct,u)-_i(ct,W))/(_i(ct,I)-_i(ct,W))},f}(si),Ji=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="time",u}return Object(at.b)(f,kt),f.prototype.getText=function(u,I){var W=this.translate(u),ct=this.formatter;return ct?ct(W,I):nr(W,this.mask)},f.prototype.scale=function(u){var I=u;return(Object(n.x)(I)||Object(n.o)(I))&&(I=this.translate(I)),kt.prototype.scale.call(this,I)},f.prototype.translate=function(u){return er(u)},f.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},f.prototype.setDomain=function(){var u=this.values,I=this.getConfig("min"),W=this.getConfig("max");if(Object(n.s)(I)&&Object(n.t)(I)||(this.min=this.translate(this.min)),Object(n.s)(W)&&Object(n.t)(W)||(this.max=this.translate(this.max)),u&&u.length){var ct=[],Ct=1/0,_t=Ct,Xt=0;Object(n.f)(u,function(ee){var ae=er(ee);if(isNaN(ae))throw new TypeError("Invalid Time: "+ee+" in time scale!");Ct>ae?(_t=Ct,Ct=ae):_t>ae&&(_t=ae),Xt<ae&&(Xt=ae),ct.push(ae)}),u.length>1&&(this.minTickInterval=_t-Ct),Object(n.s)(I)&&(this.min=Ct),Object(n.s)(W)&&(this.max=Xt)}},f}(Ti),pr=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="quantize",u}return Object(at.b)(f,kt),f.prototype.invert=function(u){var I=this.ticks,W=I.length,ct=this.getInvertPercent(u),Ct=Math.floor(ct*(W-1));if(Ct>=W-1)return Object(n.y)(I);if(Ct<0)return Object(n.k)(I);var _t=I[Ct],Xt=Ct/(W-1);return _t+(ct-Xt)/((Ct+1)/(W-1)-Xt)*(I[Ct+1]-_t)},f.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},f.prototype.calculateTicks=function(){var u=kt.prototype.calculateTicks.call(this);return this.nice||(Object(n.y)(u)!==this.max&&u.push(this.max),Object(n.k)(u)!==this.min&&u.unshift(this.min)),u},f.prototype.getScalePercent=function(u){var I=this.ticks;if(u<Object(n.k)(I))return 0;if(u>Object(n.y)(I))return 1;var W=0;return Object(n.f)(I,function(ct,Ct){if(!(u>=ct))return!1;W=Ct}),W/(I.length-1)},f}(si),Yr=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="quantile",u}return Object(at.b)(f,kt),f.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},f}(pr),Br={};function Nr(kt,f){if(function(u){return Br[u]}(kt))throw new Error("type '"+kt+"' existed.");Br[kt]=f}var Xr=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="identity",u.isIdentity=!0,u}return Object(at.b)(f,kt),f.prototype.calculateTicks=function(){return this.values},f.prototype.scale=function(u){return this.values[0]!==u&&Object(n.t)(u)?u:this.range[0]},f.prototype.invert=function(u){var I=this.range;return u<I[0]||u>I[1]?NaN:this.values[0]},f}(ot),Kr=[1,5,2,2.5,4,3],ni=100*Number.EPSILON;function fi(kt,f,u,I,W,ct){var Ct=Object(n.E)(f),_t=Object(n.l)(f,kt),Xt=0,ee=function(ae,je){return(ae%je+je)%je}(I,ct);return(ee<ni||ct-ee<ni)&&I<=0&&W>=0&&(Xt=1),1-_t/(Ct-1)-u+Xt}function $r(kt,f,u){var I=Object(n.E)(f);return 1-Object(n.l)(f,kt)/(I-1)-u+1}function ci(kt,f,u,I,W,ct){var Ct=(kt-1)/(ct-W),_t=(f-1)/(Math.max(ct,I)-Math.min(u,W));return 2-Math.max(Ct/_t,_t/Ct)}function Qr(kt,f){return kt>=f?2-(kt-1)/(f-1):1}function gi(kt,f,u,I){var W=f-kt;return 1-.5*(Math.pow(f-I,2)+Math.pow(kt-u,2))/Math.pow(.1*W,2)}function Oi(kt,f,u){var I=f-kt;if(u>I){var W=(u-I)/2;return 1-Math.pow(W,2)/Math.pow(.1*I,2)}return 1}function bi(kt,f,u,I,W,ct){if(u===void 0&&(u=5),I===void 0&&(I=!0),W===void 0&&(W=Kr),ct===void 0&&(ct=[.25,.2,.5,.05]),typeof kt!="number"||typeof f!="number")return{min:0,max:0,ticks:[]};if(kt===f||u===1)return{min:kt,max:f,ticks:[kt]};for(var Ct={score:-2,lmin:0,lmax:0,lstep:0},_t=1;_t<1/0;){for(var Xt=0,ee=W;Xt<ee.length;Xt++){var ae=ee[Xt],je=$r(ae,W,_t);if(Number.isNaN(je))throw new Error("NaN");if(ct[0]*je+ct[1]+ct[2]+ct[3]<Ct.score){_t=1/0;break}for(var Fe=2;Fe<1/0;){var _e=Qr(Fe,u);if(ct[0]*je+ct[1]+ct[2]*_e+ct[3]<Ct.score)break;for(var Ke=(f-kt)/(Fe+1)/_t/ae,bn=Math.ceil(Math.log10(Ke));bn<1/0;){var wn=_t*ae*Math.pow(10,bn),Nn=Oi(kt,f,wn*(Fe-1));if(ct[0]*je+ct[1]*Nn+ct[2]*_e+ct[3]<Ct.score)break;var Bn=Math.floor(f/wn)*_t-(Fe-1)*_t,Gn=Math.ceil(kt/wn)*_t;if(Bn>Gn)bn+=1;else{for(var sr=Bn;sr<=Gn;sr+=1){var ur=sr*(wn/_t),Or=ur+wn*(Fe-1),ei=wn,Ci=fi(ae,W,_t,ur,Or,ei),Rr=gi(kt,f,ur,Or),yi=ci(Fe,u,kt,f,ur,Or),oo=ct[0]*Ci+ct[1]*Rr+ct[2]*yi+1*ct[3];oo>Ct.score&&(!I||ur<=kt&&Or>=f)&&(Ct.lmin=ur,Ct.lmax=Or,Ct.lstep=ei,Ct.score=oo)}bn+=1}}Fe+=1}}_t+=1}for(var so=Number.isInteger(Ct.lstep)?0:Math.ceil(Math.abs(Math.log10(Ct.lstep))),co=[],lo=Ct.lmin;lo<=Ct.lmax;lo+=Ct.lstep)co.push(lo);var Hi=so?Object(n.z)(co,function(Io){return Number.parseFloat(Io.toFixed(so))}):co;return{min:Math.min(kt,Object(n.k)(Hi)),max:Math.max(f,Object(n.y)(Hi)),ticks:Hi}}function zi(kt){var f=kt.values,u=kt.tickInterval,I=kt.tickCount,W=f;if(Object(n.t)(u))return Object(n.g)(W,function(Xt,ee){return ee%u==0});var ct=kt.min,Ct=kt.max;if(Object(n.s)(ct)&&(ct=0),Object(n.s)(Ct)&&(Ct=f.length-1),Object(n.t)(I)&&I<Ct-ct){var _t=bi(ct,Ct,I,!1,[1,2,5,3,4,7,6,8,9]).ticks;return Object(n.g)(_t,function(Xt){return Xt>=ct&&Xt<=Ct}).map(function(Xt){return f[Xt]})}return f.slice(ct,Ct+1)}var Qi=Math.sqrt(50),io=Math.sqrt(10),Wi=Math.sqrt(2),Zi=function(){function kt(){this._domain=[0,1]}return kt.prototype.domain=function(f){return f?(this._domain=Array.from(f,Number),this):this._domain.slice()},kt.prototype.nice=function(f){var u,I;f===void 0&&(f=5);var W,ct=this._domain.slice(),Ct=0,_t=this._domain.length-1,Xt=this._domain[Ct],ee=this._domain[_t];return ee<Xt&&(Xt=(u=[ee,Xt])[0],ee=u[1],Ct=(I=[_t,Ct])[0],_t=I[1]),(W=Pi(Xt,ee,f))>0?W=Pi(Xt=Math.floor(Xt/W)*W,ee=Math.ceil(ee/W)*W,f):W<0&&(W=Pi(Xt=Math.ceil(Xt*W)/W,ee=Math.floor(ee*W)/W,f)),W>0?(ct[Ct]=Math.floor(Xt/W)*W,ct[_t]=Math.ceil(ee/W)*W,this.domain(ct)):W<0&&(ct[Ct]=Math.ceil(Xt*W)/W,ct[_t]=Math.floor(ee*W)/W,this.domain(ct)),this},kt.prototype.ticks=function(f){return f===void 0&&(f=5),function(u,I,W){var ct,Ct,_t,Xt,ee=-1;if(W=+W,(u=+u)==(I=+I)&&W>0)return[u];if((ct=I<u)&&(Ct=u,u=I,I=Ct),(Xt=Pi(u,I,W))===0||!isFinite(Xt))return[];if(Xt>0)for(u=Math.ceil(u/Xt),I=Math.floor(I/Xt),_t=new Array(Ct=Math.ceil(I-u+1));++ee<Ct;)_t[ee]=(u+ee)*Xt;else for(u=Math.floor(u*Xt),I=Math.ceil(I*Xt),_t=new Array(Ct=Math.ceil(u-I+1));++ee<Ct;)_t[ee]=(u-ee)/Xt;return ct&&_t.reverse(),_t}(this._domain[0],this._domain[this._domain.length-1],f||5)},kt}();function Pi(kt,f,u){var I=(f-kt)/Math.max(0,u),W=Math.floor(Math.log(I)/Math.LN10),ct=I/Math.pow(10,W);return W>=0?(ct>=Qi?10:ct>=io?5:ct>=Wi?2:1)*Math.pow(10,W):-Math.pow(10,-W)/(ct>=Qi?10:ct>=io?5:ct>=Wi?2:1)}function no(kt,f,u){return(u==="ceil"?Math.ceil(kt/f):u==="floor"?Math.floor(kt/f):Math.round(kt/f))*f}function Mo(kt,f,u){var I=no(kt,u,"floor"),W=no(f,u,"ceil");I=Object(n.h)(I,u),W=Object(n.h)(W,u);for(var ct=[],Ct=I;Ct<=W;Ct+=u){var _t=Object(n.h)(Ct,u);ct.push(_t)}return{min:I,max:W,ticks:ct}}function ao(kt,f,u){var I,W=kt.minLimit,ct=kt.maxLimit,Ct=kt.min,_t=kt.max,Xt=kt.tickCount,ee=Xt===void 0?5:Xt,ae=Object(n.s)(W)?Object(n.s)(f)?Ct:f:W,je=Object(n.s)(ct)?Object(n.s)(u)?_t:u:ct;if(ae>je&&(je=(I=[ae,je])[0],ae=I[1]),ee<=2)return[ae,je];for(var Fe=(je-ae)/(ee-1),_e=[],Ke=0;Ke<ee;Ke++)_e.push(ae+Fe*Ke);return _e}function uo(kt,f,u){u===void 0&&(u=5);var I={max:0,min:0,ticks:[]};if(kt===f)return{max:f,min:kt,ticks:[kt]};var W=(f-kt)/u,ct=Math.pow(10,Math.floor(Math.log10(W))),Ct=ct<1?Math.ceil(Math.abs(Math.log10(ct))):0,_t=ct;2*ct-W<1.5*(W-_t)&&5*ct-W<2.75*(W-(_t=2*ct))&&10*ct-W<1.5*(W-(_t=5*ct))&&(_t=10*ct);var Xt=Math.ceil(f/_t),ee=Math.floor(kt/_t);I.max=Math.max(Xt*_t,f),I.min=Math.min(ee*_t,kt);for(var ae=Number.parseFloat((ee*_t).toFixed(Ct));ae<f;)I.ticks.push(ae),ae+=_t,Ct&&(ae=Number.parseFloat(ae.toFixed(Ct)));return I.ticks.push(ae),I}function xo(kt,f){var u=kt.length*f;return f===1?kt[kt.length-1]:f===0?kt[0]:u%1!=0?kt[Math.ceil(u)-1]:kt.length%2==0?(kt[u-1]+kt[u])/2:kt[u]}function oe(kt){return new Date(kt).getFullYear()}function Kt(kt){return new Date(kt,0,1).getTime()}function te(kt){return new Date(kt).getMonth()}function Oe(kt,f){return new Date(kt,f,1).getTime()}tt("cat",zi),tt("time-cat",function(kt){var f=zi(kt),u=Object(n.y)(kt.values);return u!==Object(n.y)(f)&&f.push(u),f}),tt("wilkinson-extended",function(kt){var f=kt.min,u=kt.max,I=kt.tickCount,W=kt.nice,ct=kt.tickInterval,Ct=kt.minLimit,_t=kt.maxLimit,Xt=bi(f,u,I,W).ticks;return Object(n.s)(Ct)&&Object(n.s)(_t)?ct?Mo(f,u,ct).ticks:Xt:ao(kt,Object(n.k)(Xt),Object(n.y)(Xt))}),tt("r-pretty",function(kt){var f=kt.min,u=kt.max,I=kt.tickCount,W=kt.tickInterval,ct=kt.minLimit,Ct=kt.maxLimit,_t=uo(f,u,I).ticks;return Object(n.s)(ct)&&Object(n.s)(Ct)?W?Mo(f,u,W).ticks:_t:ao(kt,Object(n.k)(_t),Object(n.y)(_t))}),tt("time",function(kt){var f=kt.min,u=kt.max,I=kt.minTickInterval,W=kt.tickInterval,ct=kt.tickCount;if(W)ct=Math.ceil((u-f)/W);else{var Ct=(u-f)/(W=Fi(f,u,ct)[1])/ct;Ct>1&&(W*=Math.ceil(Ct)),I&&W<I&&(W=I)}for(var _t=[],Xt=f;Xt<u+W;Xt+=W)_t.push(Xt);return _t}),tt("time-pretty",function(kt){var f=kt.min,u=kt.max,I=kt.minTickInterval,W=kt.tickCount,ct=kt.tickInterval,Ct=[];ct||(ct=(u-f)/W,I&&ct<I&&(ct=I));var _t=oe(f);if(ct>31536e6)for(var Xt=oe(u),ee=Math.ceil(ct/31536e6),ae=_t;ae<=Xt+ee;ae+=ee)Ct.push(Kt(ae));else if(ct>ti){var je=Math.ceil(ct/ti),Fe=te(f),_e=function(co,lo){var Hi=oe(co),Io=oe(lo),Ro=te(co);return 12*(Io-Hi)+(te(lo)-Ro)%12}(f,u);for(ae=0;ae<=_e+je;ae+=je)Ct.push(Oe(_t,ae+Fe))}else if(ct>Vr){var Ke=(Gn=new Date(f)).getFullYear(),bn=Gn.getMonth(),wn=Gn.getDate(),Nn=Math.ceil(ct/Vr),Bn=function(co,lo){return Math.ceil((lo-co)/Vr)}(f,u);for(ae=0;ae<Bn+Nn;ae+=Nn)Ct.push(new Date(Ke,bn,wn+ae).getTime())}else if(ct>Sr){Ke=(Gn=new Date(f)).getFullYear(),bn=Gn.getMonth(),Nn=Gn.getDate();var Gn,sr=Gn.getHours(),ur=Math.ceil(ct/Sr),Or=function(co,lo){return Math.ceil((lo-co)/Sr)}(f,u);for(ae=0;ae<=Or+ur;ae+=ur)Ct.push(new Date(Ke,bn,Nn,sr+ae).getTime())}else if(ct>6e4){var ei=function(co,lo){return Math.ceil((lo-co)/6e4)}(f,u),Ci=Math.ceil(ct/6e4);for(ae=0;ae<=ei+Ci;ae+=Ci)Ct.push(f+6e4*ae)}else{var Rr=ct;Rr<1e3&&(Rr=1e3);var yi=1e3*Math.floor(f/1e3),oo=Math.ceil((u-f)/1e3),so=Math.ceil(Rr/1e3);for(ae=0;ae<oo+so;ae+=so)Ct.push(yi+1e3*ae)}return Ct.length>=512&&console.warn("Notice: current ticks length("+Ct.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+ct+") is too small, increase the value to solve the problem!"),Ct}),tt("log",function(kt){var f,u=kt.base,I=kt.tickCount,W=kt.min,ct=kt.max,Ct=kt.values,_t=Li(u,ct);if(W>0)f=Math.floor(Li(u,W));else{var Xt=Vi(Ct,u,ct);f=Math.floor(Li(u,Xt))}for(var ee=_t-f,ae=Math.ceil(ee/I),je=[],Fe=f;Fe<_t+ae;Fe+=ae)je.push(Math.pow(u,Fe));return W<=0&&je.unshift(0),je}),tt("pow",function(kt){var f=kt.exponent,u=kt.tickCount,I=Math.ceil(_i(f,kt.max));return uo(Math.floor(_i(f,kt.min)),I,u).ticks.map(function(W){var ct=W>=0?1:-1;return Math.pow(W,f)*ct})}),tt("quantile",function(kt){var f=kt.tickCount,u=kt.values;if(!u||!u.length)return[];for(var I=u.slice().sort(function(_t,Xt){return _t-Xt}),W=[],ct=0;ct<f;ct++){var Ct=ct/(f-1);W.push(xo(I,Ct))}return W}),tt("d3-linear",function(kt){var f=kt.min,u=kt.max,I=kt.tickInterval,W=kt.minLimit,ct=kt.maxLimit,Ct=function(_t){var Xt=_t.min,ee=_t.max,ae=_t.nice,je=_t.tickCount,Fe=new Zi;return Fe.domain([Xt,ee]),ae&&Fe.nice(je),Fe.ticks(je)}(kt);return Object(n.s)(W)&&Object(n.s)(ct)?I?Mo(f,u,I).ticks:Ct:ao(kt,Object(n.k)(Ct),Object(n.y)(Ct))}),Nr("cat",At),Nr("category",At),Nr("identity",Xr),Nr("linear",Ti),Nr("log",ro),Nr("pow",jr),Nr("time",Ji),Nr("timeCat",to),Nr("quantize",pr),Nr("quantile",Yr);var Qe=function(){for(var f=0,u=0,I=arguments.length;u<I;u++)f+=arguments[u].length;var W=Array(f),ct=0;for(u=0;u<I;u++)for(var Ct=arguments[u],_t=0,Xt=Ct.length;_t<Xt;_t++,ct++)W[ct]=Ct[_t];return W};function On(kt){return function(f){return Object(n.z)(f,function(u,I){return[I===0?"M":"L",u[0],u[1]]})}(kt)}function Vn(kt,f,u,I){I===void 0&&(I=!0);var W=new Ti({values:kt}),ct=new At({values:Object(n.z)(kt,function(_t,Xt){return Xt})}),Ct=Object(n.z)(kt,function(_t,Xt){return[ct.scale(Xt)*f,u-W.scale(_t)*u]});return I?function(_t){if(_t.length<=2)return On(_t);var Xt=[];Object(n.f)(_t,function(_e){Object(n.q)(_e,Xt.slice(Xt.length-2))||Xt.push(_e[0],_e[1])});var ee=F.a(Xt,!1),ae=Object(n.k)(_t),je=ae[0],Fe=ae[1];return ee.unshift(["M",je,Fe]),ee}(Ct):On(Ct)}function Xn(kt,f,u){for(var I=new Ti({values:kt}),W=new At({values:Object(n.z)(kt,function(ae,je){return je})}),ct=Object(n.z)(kt,function(ae,je){return[W.scale(je)*f,u-I.scale(ae)*u]}),Ct=[],_t=0;_t<ct.length;_t++){var Xt=ct[_t],ee=rn({x:Xt[0],y:Xt[1],y0:u,size:5});Ct.push.apply(Ct,ee)}return function(ae,je){je===void 0&&(je=!0);var Fe=[],_e=ae[0];Fe.push(["M",_e.x,_e.y]);for(var Ke=1,bn=ae.length;Ke<bn;Ke++)Fe.push(["L",ae[Ke].x,ae[Ke].y]);return je&&(Fe.push(["L",_e.x,_e.y]),Fe.push(["z"])),Fe}(Ct)}function $e(kt,f,u,I){var W=Qe(kt),ct=function(Ct,_t){var Xt=new Ti({values:Ct}),ee=Math.max(0,Xt.min);return _t-Xt.scale(ee)*_t}(I,u);return W.push(["L",f,ct]),W.push(["L",0,ct]),W.push(["Z"]),W}function rn(kt){var f,u,I,W,ct=kt.x,Ct=kt.y,_t=kt.y0,Xt=kt.size;Object(n.m)(Ct)?(f=Ct[0],u=Ct[1]):(f=_t,u=Ct),Object(n.m)(ct)?(I=ct[0],W=ct[1]):(I=ct-Xt/2,W=ct+Xt/2);var ee=[{x:I,y:f},{x:I,y:u}];return ee.push({x:W,y:u},{x:W,y:f}),ee}var on=function(){return(on=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var ct in u=arguments[I])Object.prototype.hasOwnProperty.call(u,ct)&&(f[ct]=u[ct]);return f}).apply(this,arguments)},$n={stroke:"#C5C5C5",strokeOpacity:.85},vr={fill:"#CACED4",opacity:.85},ar=function(){function kt(f){var u=f.x,I=u===void 0?0:u,W=f.y,ct=W===void 0?0:W,Ct=f.width,_t=Ct===void 0?200:Ct,Xt=f.height,ee=Xt===void 0?26:Xt,ae=f.smooth,je=ae===void 0||ae,Fe=f.isArea,_e=Fe!==void 0&&Fe,Ke=f.data,bn=Ke===void 0?[]:Ke,wn=f.lineStyle,Nn=f.areaStyle,Bn=f.group,Gn=f.interval,sr=Gn===void 0?null:Gn;this.group=Bn,this.x=I,this.y=ct,this.width=_t,this.height=ee,this.data=bn,this.smooth=je,this.isArea=_e,this.lineStyle=Object.assign({},$n,wn),this.areaStyle=Object.assign({},vr,Nn),this.intervalConfig=sr,this.renderLine()}return kt.prototype.renderLine=function(){var f=this,u=f.x,I=f.y,W=f.width,ct=f.height,Ct=f.data,_t=f.smooth,Xt=f.isArea,ee=(f.backgroundStyle,f.lineStyle),ae=f.areaStyle,je=this.group.addGroup({name:"trend-group"});if(Ct){var Fe=Vn(Ct,W,ct,_t);if(je.addShape("path",{attrs:on({path:Fe},ee)}),Xt){var _e=$e(Fe,W,ct,Ct);je.addShape("path",{attrs:on({path:_e},ae)})}}this.intervalConfig&&je.addShape("path",{attrs:on({path:Xn(this.intervalConfig.data,W,ct)},this.intervalConfig.style)}),je.move(u,I)},kt.prototype.destory=function(){this.group.destroy()},kt}(),rr=function(){return(rr=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var ct in u=arguments[I])Object.prototype.hasOwnProperty.call(u,ct)&&(f[ct]=u[ct]);return f}).apply(this,arguments)},Fr={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},Ar={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},wr=function(){function kt(f){var u=f.group,I=f.name,W=f.type,ct=f.x,Ct=ct===void 0?0:ct,_t=f.y,Xt=_t===void 0?0:_t,ee=f.width,ae=ee===void 0?2:ee,je=f.height,Fe=je===void 0?24:je,_e=f.style,Ke=_e===void 0?{}:_e;this.group=u,this.name=I,this.handleType=W,this.x=Ct,this.y=Xt,this.width=ae,this.height=Fe,W==="trend"?this.style=rr(rr({},Fr),Ke):W==="simple"&&(this.style=rr(rr({},Ar),Ke)),this.renderHandle()}return kt.prototype.setX=function(f){this.setXY(f,void 0)},kt.prototype.setY=function(f){this.setXY(void 0,f)},kt.prototype.setXY=function(f,u){Object(n.t)(f)&&(this.x=f),Object(n.t)(u)&&(this.y=u),this.updateXY()},kt.prototype.renderHandle=function(){var f=this.width,u=this.height,I=this.style,W=this.name,ct=I.fill,Ct=I.stroke,_t=I.radius,Xt=I.opacity,ee=I.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.background=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:f,height:u,fill:ct,stroke:Ct,radius:_t,opacity:Xt,cursor:ee},name:W+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:f/2,y:0,r:2*f,fill:ct,stroke:Ct,radius:_t,opacity:Xt,cursor:ee},name:W+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:f/2,y:u,r:2*f,fill:ct,stroke:Ct,radius:_t,opacity:Xt,cursor:ee},name:W+"-handler"})):this.handleType==="simple"&&(this.handleGroup.addShape("circle",{attrs:{x:f/2,y:u/2,r:2*f,fill:ct,stroke:Ct,radius:_t,opacity:Xt,cursor:ee},name:W+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:f/2,y:u/2,r:2*f,fill:ct,stroke:Ct,radius:_t,opacity:Xt,cursor:ee},name:W+"-handler"})),this.updateXY(),this.handleType==="trend"&&this.bindEvents()},kt.prototype.bindEvents=function(){var f=this,u=this.name;this.handleGroup.on(u+"-handler:mouseenter",function(){var I=f.style.highLightFill;f.background.attr("fill",I)}),this.handleGroup.on(u+"-handler:mouseleave",function(){var I=f.style.fill;f.background.attr("fill",I)})},kt.prototype.show=function(){this.handleGroup.show()},kt.prototype.hide=function(){this.handleGroup.hide()},kt.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},kt}(),xr=function(){return(xr=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var ct in u=arguments[I])Object.prototype.hasOwnProperty.call(u,ct)&&(f[ct]=u[ct]);return f}).apply(this,arguments)},Er=function(){function kt(f){this.config=Object(n.e)({},f),this.init()}return kt.prototype.update=function(f){this.config=Object(n.e)({},this.config,f),this.updateElement(),this.renderMarker()},kt.prototype.init=function(){this.initElement(),this.renderMarker()},kt.prototype.initElement=function(){var f=this.config,u=f.group,I=f.style;this.circle=u.addShape("circle",{attrs:xr({x:this.config.x,y:this.config.y,r:this.config.r},I)}),this.startMarker=u.addShape("path",{attrs:{path:this.getStartMarkerPath(),fill:"#ccc"},name:"playPauseBtn"}),this.pauseGroupMarker=u.addGroup();var W=1/4*this.config.r,ct=.5*this.config.r*Math.sqrt(3);this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x-.375*this.config.r,y:this.config.y-ct/2,width:2.5*W,height:ct,fill:"#fff"},name:"playPauseBtn"}),this.pauseLeftMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x-.375*this.config.r,y:this.config.y-ct/2,width:W,height:ct,fill:"#ccc"},name:"playPauseBtn"}),this.pauseRightMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x+1/8*this.config.r,y:this.config.y-ct/2,width:W,height:ct,fill:"#ccc"},name:"playPauseBtn"})},kt.prototype.updateElement=function(){this.circle.attr("x",this.config.x),this.circle.attr("y",this.config.y),this.circle.attr("r",this.config.r),this.startMarker.attr("path",this.getStartMarkerPath());var f=1/4*this.config.r,u=.5*this.config.r*Math.sqrt(3);this.pauseLeftMarker.attr("x",this.config.x-.375*this.config.r),this.pauseLeftMarker.attr("y",this.config.y-u/2),this.pauseLeftMarker.attr("width",f),this.pauseLeftMarker.attr("height",u),this.pauseRightMarker.attr("x",this.config.x+1/8*this.config.r),this.pauseRightMarker.attr("y",this.config.y-u/2),this.pauseRightMarker.attr("width",f),this.pauseRightMarker.attr("height",u)},kt.prototype.renderMarker=function(){this.config.isPlay?(this.startMarker.hide(),this.pauseGroupMarker.show()):(this.startMarker.show(),this.pauseGroupMarker.hide())},kt.prototype.getStartMarkerPath=function(){var f=.5*this.config.r*Math.sqrt(3);return[["M",this.config.x-f/Math.sqrt(3)/2,this.config.y-f/2],["L",this.config.x+f/Math.sqrt(3),this.config.y],["L",this.config.x-f/Math.sqrt(3)/2,this.config.y+f/2]]},kt}(),Ir=function(){return(Ir=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var ct in u=arguments[I])Object.prototype.hasOwnProperty.call(u,ct)&&(f[ct]=u[ct]);return f}).apply(this,arguments)},Lr={fill:"#607889",stroke:"#607889"},Pr={fill:"#fff"},Dr={fill:"green"},ri={speed:2,loop:!1,fill:"#fff",stroke:"#fff",hiddleToggle:!1,preBtnStyle:{fill:"#ccc",stroke:"#ccc"},nextBtnStyle:{fill:"#ccc",stroke:"#ccc"},playBtnStyle:{fill:"#fff",stroke:"#ccc"}},vi=function(){function kt(f){this.controllerCfg=Object(n.e)({},ri,f),this.group=f.group,this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType="range",this.fontFamily=f.fontFamily||"Arial, sans-serif",this.init()}return kt.prototype.init=function(){this.renderPlayButton()},kt.prototype.getNextMarkerPath=function(f,u,I){return[["M",f,u-I],["L",f+I,u],["L",f,u+I]]},kt.prototype.getPreMarkerPath=function(f,u,I){return[["M",f,u-I],["L",f-I,u],["L",f,u+I]]},kt.prototype.renderPlayButton=function(){var f=this.controllerCfg,u=f.width,I=f.height,W=f.x,ct=f.y,Ct=f.hiddleToggle,_t=f.fill,Xt=_t===void 0?"#ccc":_t,ee=f.stroke,ae=ee===void 0?"green":ee,je=f.playBtnStyle,Fe=je===void 0?Lr:je,_e=f.preBtnStyle,Ke=_e===void 0?Pr:_e,bn=f.nextBtnStyle,wn=bn===void 0?Dr:bn,Nn=I/2-5,Bn=ct+10,Gn=this.group.addShape("rect",{attrs:{x:W,y:Bn,width:u,height:I,stroke:ae,fill:Xt},name:"container-rect"});this.playButton?this.playButton.update({x:u/2,y:Bn,r:Nn}):this.playButton=new Er({group:this.group,x:u/2,y:Bn+Nn+5,r:Nn,isPlay:this.isPlay,style:Fe}),this.group.addShape("path",{attrs:Ir({path:this.getPreMarkerPath(u/2-5*Nn,Bn+Nn+5,.5*Nn)},Ke),name:"preStepBtn"}),this.group.addShape("path",{attrs:Ir({path:this.getPreMarkerPath(u/2-4.5*Nn,Bn+Nn+5,.5*Nn)},Ke),name:"preStepBtn"}),this.group.addShape("path",{attrs:Ir({path:this.getNextMarkerPath(u/2+5*Nn,Bn+Nn+5,.5*Nn)},wn),name:"nextStepBtn"}),this.group.addShape("path",{attrs:Ir({path:this.getNextMarkerPath(u/2+4.5*Nn,Bn+Nn+5,.5*Nn)},wn),name:"nextStepBtn"}),Gn.toBack(),this.renderSpeedBtn(),Ct||this.renderToggleTime(),this.bindEvent()},kt.prototype.renderSpeedBtn=function(){var f=this.controllerCfg,u=f.y,I=f.width,W=f.hiddleToggle,ct=this.group.addGroup({name:"speed-group"});this.speedGroup=ct;for(var Ct=1,_t=[],Xt=9,ee=0;ee<5;ee++){var ae=u+15+ee*(ee+1)+Ct;ct.addShape("rect",{attrs:{x:I-(W?50:110),y:ae,width:15,height:2,fill:"#ccc"},speed:Xt,name:"speed-rect"}),this.speedAxisY.push(ae),_t.push(Xt),Xt-=2,Ct++}for(ee=0;ee<4;ee++)ct.addShape("rect",{attrs:{x:I-(W?50:110),y:this.speedAxisY[ee]+2,width:15,height:2*ee+1,fill:"#fff",opacity:.3},speed:_t[ee]-1,name:"speed-rect"});this.speedText=ct.addShape("text",{attrs:{x:I-(W?50:110)+20,y:this.speedAxisY[1]+15,text:"1.0X",fill:"#ccc",fontFamily:this.fontFamily||"Arial, sans-serif"}}),this.speedPoint=ct.addShape("path",{attrs:{path:this.getPath(I-(W?50:110),this.speedAxisY[4]),fill:"#ccc"}})},kt.prototype.getPath=function(f,u){return[["M",f,u],["L",f-12,u-6],["L",f-12,u+6],["Z"]]},kt.prototype.renderToggleTime=function(){var f,u=this.controllerCfg.width;this.toggleGroup=this.group.addGroup({name:"toggle-group"}),this.toggleGroup.addShape("rect",{attrs:{width:14,height:14,x:u-50,y:this.speedAxisY[1],fill:"#fff",stroke:"#ccc",lineWidth:2,radius:3},isChecked:!1,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:{path:[["M",u-50+3,this.speedAxisY[1]+6],["L",u-50+7,this.speedAxisY[1]+10],["L",u-50+12,this.speedAxisY[1]+4]],stroke:"green",lineWidth:3},capture:!1}),this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:{text:((f=this.controllerCfg)===null||f===void 0?void 0:f.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:u-50+20,y:this.speedAxisY[1]+15,fill:"#ccc",fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}})},kt.prototype.bindEvent=function(){var f=this,u=this.controllerCfg,I=u.width,W=u.hiddleToggle;this.speedGroup.on("speed-rect:click",function(ct){f.speedPoint.attr("path",f.getPath(I-(W?50:110),ct.y)),f.currentSpeed=ct.target.get("speed"),f.speedText.attr("text",f.currentSpeed+".0X"),f.group.emit("timebarConfigChanged",{speed:f.currentSpeed,type:f.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(ct){var Ct,_t,Xt=ct.target.get("isChecked");Xt?(f.checkedIcon.hide(),f.checkedText.attr("text",((_t=f.controllerCfg)===null||_t===void 0?void 0:_t.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),f.currentType="range"):(f.checkedIcon.show(),f.checkedText.attr("text",((Ct=f.controllerCfg)===null||Ct===void 0?void 0:Ct.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),f.currentType="single"),ct.target.set("isChecked",!Xt),f.group.emit("timebarConfigChanged",{type:f.currentType,speed:f.currentSpeed})})},kt.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},kt}(),ii=function(){return(ii=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var ct in u=arguments[I])Object.prototype.hasOwnProperty.call(u,ct)&&(f[ct]=u[ct]);return f}).apply(this,arguments)},Si={fill:"#416180",opacity:.05},Ui={fill:"#416180",opacity:.15,radius:5},Yi={fill:"#5B8FF9",opacity:.3,cursor:"move"},Bi={width:2,height:24},Di={textBaseline:"middle",fill:"#000",opacity:.45},ve=function(){function kt(f){var u=this;this.prevX=0,this.onMouseDown=function(jo){return function(ho){u.currentHandler=jo;var fa=ho.originalEvent;fa.stopPropagation(),fa.preventDefault(),u.prevX=Object(n.i)(fa,"touches.0.pageX",fa.pageX);var Zo=u.canvas.get("container");Zo.addEventListener("mousemove",u.onMouseMove),Zo.addEventListener("mouseup",u.onMouseUp),Zo.addEventListener("mouseleave",u.onMouseUp),Zo.addEventListener("touchmove",u.onMouseMove),Zo.addEventListener("touchend",u.onMouseUp),Zo.addEventListener("touchcancel",u.onMouseUp)}},this.onMouseMove=function(jo){jo.stopPropagation(),jo.preventDefault();var ho=Object(n.i)(jo,"touches.0.pageX",jo.pageX),fa=ho-u.prevX,Zo=u.adjustOffsetRange(fa/u.width);u.updateStartEnd(Zo),u.updateUI(),u.prevX=ho},this.onMouseUp=function(){u.currentHandler&&(u.currentHandler=void 0);var jo=u.canvas.get("container");jo&&(jo.removeEventListener("mousemove",u.onMouseMove),jo.removeEventListener("mouseup",u.onMouseUp),jo.removeEventListener("mouseleave",u.onMouseUp),jo.removeEventListener("touchmove",u.onMouseMove),jo.removeEventListener("touchend",u.onMouseUp),jo.removeEventListener("touchcancel",u.onMouseUp))};var I=f.x,W=I===void 0?0:I,ct=f.y,Ct=ct===void 0?0:ct,_t=f.width,Xt=_t===void 0?100:_t,ee=f.height,ae=f.padding,je=ae===void 0?10:ae,Fe=f.trendCfg,_e=f.controllerCfg,Ke=_e===void 0?{speed:1}:_e,bn=f.backgroundStyle,wn=bn===void 0?{}:bn,Nn=f.foregroundStyle,Bn=Nn===void 0?{}:Nn,Gn=f.handlerStyle,sr=Gn===void 0?{}:Gn,ur=f.textStyle,Or=ur===void 0?{}:ur,ei=f.start,Ci=ei===void 0?0:ei,Rr=f.end,yi=Rr===void 0?1:Rr,oo=f.minText,so=oo===void 0?"":oo,co=f.maxText,lo=co===void 0?"":co,Hi=f.group,Io=f.graph,Ro=f.canvas,ko=f.ticks,bo=f.type;this.graph=Io,this.canvas=Ro,this.group=Hi,this.timeBarType=bo,this.x=W,this.y=Ct,this.width=Xt,this.height=ee,this.padding=je,this.ticks=ko,this.trendCfg=Fe,this.controllerCfg=Ke,this.currentSpeed=Ke.speed||1,bo==="trend"?this.backgroundStyle=ii(ii({},Si),wn):bo==="simple"&&(this.backgroundStyle=ii(ii({},Ui),wn)),this.foregroundStyle=ii(ii({},Yi),Bn),this.handlerStyle=ii(ii({},Bi),sr),this.textStyle=ii(ii({},Di),Or),this.currentMode="range",this.start=Ci,this.end=yi,this.minText=so,this.maxText=lo,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return kt.prototype.update=function(f){var u=f.x,I=f.y,W=f.width,ct=f.height,Ct=f.minText,_t=f.maxText,Xt=f.start,ee=f.end;this.start=Math.min(1,Math.max(Xt,0)),this.end=Math.min(1,Math.max(ee,0)),Object(n.a)(this,{x:u,y:I,width:W,height:ct,minText:Ct,maxText:_t}),this.updateUI()},kt.prototype.setText=function(f,u){this.minTextShape.attr("text",f),this.maxTextShape.attr("text",u)},kt.prototype.renderSlider=function(){var f=this,u=this.width,I=this.height,W=this.timeBarType;if(W==="trend"&&Object(n.E)(Object(n.i)(this.trendCfg,"data"))){var ct=new ar(ii(ii({x:this.x,y:this.y,width:u,height:I},this.trendCfg),{group:this.group}));this.trendComponent=ct}var Ct=this.group.addGroup({name:"slider-group"});Ct.addShape("rect",{attrs:ii({x:0,y:0,width:u,height:I},this.backgroundStyle)});var _t=this.group.addGroup();W==="trend"?(this.minTextShape=_t.addShape("text",{attrs:ii({x:0,y:I/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=_t.addShape("text",{attrs:ii({y:I/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})):(this.minTextShape=_t.addShape("text",{attrs:ii({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=_t.addShape("text",{attrs:ii({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:ii({x:0,y:this.y,height:I},this.foregroundStyle)});var Xt=Object(n.i)(this.handlerStyle,"width",2),ee=Object(n.i)(this.handlerStyle,"height",24),ae=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new wr(ii({name:"minHandlerShape",group:ae,type:W,x:this.x,y:this.y,width:Xt,height:ee,cursor:"ew-resize"},this.handlerStyle));var je=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new wr(ii({name:"maxHandlerShape",group:je,type:W,x:this.x,y:this.y,width:Xt,height:ee,cursor:"ew-resize"},this.handlerStyle));var Fe=this.ticks,_e=u/(Fe.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(bn){bn.destroy()});var Ke=-1/0;this.textList=Fe.map(function(bn,wn){f.tickPosList.push(f.x+wn*_e);var Nn=f.group.addShape("text",{attrs:{x:f.x+wn*_e,y:f.y+I+5,text:bn,textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35,fontFamily:f.fontFamily||"Arial, sans-serif"}}),Bn=f.group.addShape("line",{attrs:{x1:f.x+wn*_e,y1:f.y+I+2,x2:f.x+wn*_e,y2:f.y+I+6,lineWidth:1,stroke:"#ccc"}}),Gn=Nn.getBBox();return Gn.minX>Ke?(Nn.show(),Bn.show(),Ke=Gn.minX+Gn.width+10):(Nn.hide(),Bn.hide()),Nn}),this.controllerBtnGroup=new vi(ii({group:this.group,x:this.x,y:this.y+I+25,width:u,height:40},this.controllerCfg)),this.updateUI(),Ct.move(this.x,this.y),this.bindEvents()},kt.prototype.bindEvents=function(){var f=this,u=this.group.find(function(W){return W.get("name")==="minHandlerShape"});u&&(u.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),u.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var I=this.group.find(function(W){return W.get("name")==="maxHandlerShape"});I&&(I.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),I.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("playPauseBtn:click",function(){f.isPlay=!f.isPlay,f.currentHandler=f.maxHandlerShape,f.changePlayStatus()}),this.group.on("nextStepBtn:click",function(){f.currentHandler=f.maxHandlerShape,f.updateStartEnd(.01),f.updateUI()}),this.group.on("preStepBtn:click",function(){f.currentHandler=f.maxHandlerShape,f.updateStartEnd(-.01),f.updateUI()}),this.group.on("timebarConfigChanged",function(W){var ct=W.type,Ct=W.speed;f.currentSpeed=Ct,f.currentMode=ct,ct==="single"?(f.minHandlerShape.hide(),f.foregroundShape.hide(),f.minTextShape.hide()):ct==="range"&&(f.minHandlerShape.show(),f.foregroundShape.show(),f.minTextShape.show())})},kt.prototype.adjustTickIndex=function(f){for(var u=0;u<this.tickPosList.length-1;u++)if(this.tickPosList[u]<=f&&f<=this.tickPosList[u+1])return Math.abs(this.tickPosList[u]-f)<Math.abs(f-this.tickPosList[u+1])?u:u+1},kt.prototype.adjustOffsetRange=function(f){switch(this.currentHandler){case this.minHandlerShape:var u=0-this.start,I=1-this.start;return Math.min(I,Math.max(u,f));case this.maxHandlerShape:return u=0-this.end,I=1-this.end,Math.min(I,Math.max(u,f));case this.foregroundShape:return u=0-this.start,I=1-this.end,Math.min(I,Math.max(u,f));default:return 0}},kt.prototype.updateStartEnd=function(f){switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=f,this.minText=this.ticks[this.adjustTickIndex(this.start*this.width)];break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=f,this.maxText=this.ticks[this.adjustTickIndex(this.end*this.width)];break;case this.foregroundShape:this.start+=f,this.end+=f,this.minText=this.ticks[this.adjustTickIndex(this.start*this.width)],this.maxText=this.ticks[this.adjustTickIndex(this.end*this.width)]}},kt.prototype.updateUI=function(){var f=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var u=this.start*this.width,I=this.end*this.width;this.foregroundShape.attr("x",u),this.foregroundShape.attr("width",I-u);var W=Object(n.i)(this.handlerStyle,"width",2);this.setText(this.minText,this.maxText);var ct=this.dodgeText([u,I]),Ct=ct[0],_t=ct[1];this.minHandlerShape.setX(u-W/2),Object(n.f)(Ct,function(Xt,ee){return f.minTextShape.attr(ee,Xt)}),this.maxHandlerShape.setX(I-W/2),Object(n.f)(_t,function(Xt,ee){return f.maxTextShape.attr(ee,Xt)}),this.currentMode==="range"?this.graph.emit("valueChange",{value:[this.start,this.end].sort()}):this.currentMode==="single"&&this.graph.emit("valueChange",{value:[this.end,this.end]})},kt.prototype.dodgeText=function(f){var u,I,W=Object(n.i)(this.handlerStyle,"width",2),ct=this.minTextShape,Ct=this.maxTextShape,_t=f[0],Xt=f[1],ee=!1;_t>Xt&&(_t=(u=[Xt,_t])[0],Xt=u[1],ct=(I=[Ct,ct])[0],Ct=I[1],ee=!0);var ae=ct.getBBox(),je=Ct.getBBox(),Fe=null,_e=null;return this.timeBarType==="trend"?(Fe=ae.width>_t-2?{x:_t+W/2+2,textAlign:"left"}:{x:_t-W/2-2,textAlign:"right"},_e=je.width>this.width-Xt-2?{x:Xt-W/2-2,textAlign:"right"}:{x:Xt+W/2+2,textAlign:"left"}):this.timeBarType==="simple"&&(Fe=ae.width>_t-2?{x:_t+W/2+2,textAlign:"center"}:{x:_t-W/2-2,textAlign:"center"},_e=je.width>this.width-Xt-2?{x:Xt-W/2-2,textAlign:"center"}:{x:Xt+W/2+2,textAlign:"center"}),ee?[_e,Fe]:[Fe,_e]},kt.prototype.startPlay=function(){var f=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var u=f,I=u.ticks,W=u.width,ct=f.currentSpeed,Ct=W/I.length/(1e3*(10-ct)/60),_t=f.adjustOffsetRange(Ct/f.width);f.updateStartEnd(_t),f.updateUI(),f.isPlay&&(f.playHandler=f.startPlay())}):void 0},kt.prototype.changePlayStatus=function(f){f===void 0&&(f=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit("timelinestart",null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),f&&this.graph.emit("timelineend",null))},kt.prototype.destory=function(){this.graph.off("valueChange");var f=this.group,u=f.find(function(W){return W.get("name")==="minHandlerShape"});u&&(u.off("minHandlerShape-handler:mousedown"),u.off("minHandlerShape-handler:touchstart"),u.destroy());var I=f.find(function(W){return W.get("name")==="maxHandlerShape"});I&&(I.off("maxHandlerShape-handler:mousedown"),I.off("maxHandlerShape-handler:touchstart"),I.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),f.off("playPauseBtn:click"),f.off("nextStepBtn:click"),f.off("preStepBtn:click"),f.off("timebarConfigChanged"),f.destroy(),this.trendComponent&&this.trendComponent.destory()},kt}(),G=function(){function kt(f){var u=f.x,I=u===void 0?0:u,W=f.y,ct=W===void 0?0:W,Ct=f.container,_t=f.text,Xt=f.padding,ee=Xt===void 0?[4,4,4,4]:Xt,ae=f.className,je=ae===void 0?"g6-component-timebar-tooltip":ae,Fe=f.backgroundColor,_e=Fe===void 0?"#000":Fe,Ke=f.textColor,bn=Ke===void 0?"#fff":Ke,wn=f.opacity,Nn=wn===void 0?.8:wn,Bn=f.fontSize,Gn=Bn===void 0?12:Bn;this.container=Ct,this.className=je,this.backgroundColor=_e,this.textColor=bn,this.x=I,this.y=ct,this.text=_t,this.padding=ee,this.opacity=Nn,this.fontSize=Gn,this.render()}return kt.prototype.render=function(){var f=this.className,u=(this.x,this.y,this.backgroundColor),I=this.textColor,W=this.text,ct=this.padding,Ct=this.opacity,_t=this.fontSize,Xt=this.container,ee=Object(y.b)("<div class='"+f+`' style="position: absolute; width: fit-content; height: fit-content; opacity: `+Ct+'"></div>');Object(n.x)(Xt)&&(Xt=document.getElementById(Xt)),Xt.appendChild(ee),this.parentHeight=Xt.offsetHeight,this.parentWidth=Xt.offsetWidth,Object(y.c)(ee,{visibility:"hidden",top:0,left:0});var ae=Object(y.b)(`
      <div style='position: absolute; white-space:nowrap; background-color: `+u+"; font-size: "+_t+"px; border-radius: 4px; width: fit-content; height: fit-content; color: "+I+"; padding: "+ct[0]+"px "+ct[1]+"px "+ct[2]+"px "+ct[3]+"px'></div>");ae.innerHTML=W,ee.appendChild(ae),this.backgroundDOM=ae;var je=Object(y.b)("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid "+u+"'></div>");ee.appendChild(je),this.arrowDOM=je,this.container=ee},kt.prototype.show=function(f){var u=f.text,I=f.x;f.y,f.clientX,f.clientY,this.backgroundDOM.innerHTML=u;var W=this.backgroundDOM.offsetWidth,ct=this.backgroundDOM.offsetHeight,Ct=this.arrowDOM.offsetWidth,_t=this.arrowDOM.offsetHeight;Object(y.c)(this.container,{top:-ct-_t+"px",left:I+"px",visibility:"visible"}),Object(y.c)(this.backgroundDOM,{marginLeft:-W/2+"px"}),Object(y.c)(this.arrowDOM,{marginLeft:-Ct/2+"px",top:ct+"px"});var Xt=I-W/2,ee=I+W/2;Xt<0?Object(y.c)(this.backgroundDOM,{marginLeft:-W/2-Xt+"px"}):ee>this.parentWidth&&Object(y.c)(this.backgroundDOM,{marginLeft:-W/2-ee+this.parentWidth+12+"px"})},kt.prototype.hide=function(){Object(y.c)(this.container,{top:0,left:0,visibility:"hidden"})},kt}(),B=function(){return(B=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var ct in u=arguments[I])Object.prototype.hasOwnProperty.call(u,ct)&&(f[ct]=u[ct]);return f}).apply(this,arguments)},$={fill:"#5B8FF9"},lt={fill:"#e6e8e9"},Ft=function(){function kt(f){this.frameCount=0,this.fontFamily="Arial, sans-serif";var u=f.graph,I=f.canvas,W=f.group,ct=f.width,Ct=f.height,_t=f.padding,Xt=f.data,ee=f.start,ae=f.end,je=f.x,Fe=je===void 0?0:je,_e=f.y,Ke=_e===void 0?0:_e,bn=f.tickLabelFormatter,wn=f.selectedTickStyle,Nn=wn===void 0?$:wn,Bn=f.unselectedTickStyle,Gn=Bn===void 0?lt:Bn,sr=f.tooltipBackgroundColor,ur=f.tooltipFomatter;this.graph=u,this.group=W,this.sliceGroup=W.addGroup({name:"slice-group"}),this.canvas=I,this.width=ct,this.height=Ct,this.padding=_t,this.data=Xt,this.start=ee,this.end=ae,this.tickLabelFormatter=bn,this.selectedTickStyle=Nn,this.unselectedTickStyle=Gn,this.x=Fe,this.y=Ke,this.tooltipBackgroundColor=sr,this.tooltipFomatter=ur,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return kt.prototype.renderSlices=function(){var f=this,u=this,I=u.width,W=u.height,ct=u.padding,Ct=u.data,_t=u.start,Xt=u.end,ee=u.tickLabelFormatter,ae=u.selectedTickStyle,je=u.unselectedTickStyle,Fe=I-2*ct,_e=W-(3*ct+4+10)-2*ct,Ke=Ct.length,bn=(Fe-2*(Ke-1))/Ke;this.tickWidth=bn;var wn=this.sliceGroup,Nn=[],Bn=[],Gn=Math.round(Ke*_t),sr=Math.round(Ke*Xt);this.startTickRectId=Gn,this.endTickRectId=sr,Ct.forEach(function(Or,ei){var Ci=ei>=Gn&&ei<=sr?ae:je,Rr=wn.addShape("rect",{attrs:B({x:ct+ei*(bn+2),y:ct,width:bn,height:_e},Ci),draggable:!0,name:"tick-rect-"+ei}),yi=wn.addShape("rect",{attrs:{x:ct+ei*bn+2*(2*ei-1)/2,y:ct,width:ei===0||ei===Ke-1?bn+1:bn+2,height:_e,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-"+ei});yi.toFront();var oo,so=Rr.getBBox(),co=(so.minX+so.maxX)/2;if(Nn.push({rect:Rr,pickRect:yi,value:Or.date,x:co,y:so.minY}),ee?(oo=ee(Or),!Object(n.x)(oo)&&oo&&(oo=Or.date)):ei%Math.round(Ke/10)==0&&(oo=Or.date),oo){Bn.push(oo);var lo=so.maxY+2*ct;wn.addShape("line",{attrs:{stroke:"#BFBFBF",x1:co,y1:lo,x2:co,y2:lo+4}});var Hi=lo+4+ct,Io=wn.addShape("text",{attrs:{fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:co,y:Hi,textAlign:"center",text:oo,textBaseline:"top",fontSize:10,fontFamily:f.fontFamily||"Arial, sans-serif"},capture:!1}),Ro=Io.getBBox();Ro.maxX>I?Io.attr("textAlign","right"):Ro.minX<0&&Io.attr("textAlign","left")}}),this.tickRects=Nn;var ur=this.group;this.currentSpeed=1,this.controllerBtnGroup=new vi({group:ur,x:this.x,y:this.y+W+5,width:I,height:40,hiddleToggle:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"})},kt.prototype.initEvent=function(){var f=this,u=this.sliceGroup;u.on("click",function(ee){var ae=ee.target;if(ae.get("type")==="rect"&&ae.get("name")){var je=parseInt(ae.get("name").split("-")[2],10);if(!isNaN(je)){var Fe=f.tickRects,_e=f.unselectedTickStyle;Fe.forEach(function(wn){wn.rect.attr(_e)});var Ke=f.selectedTickStyle;Fe[je].rect.attr(Ke),f.startTickRectId=je,f.endTickRectId=je;var bn=je/Fe.length;f.graph.emit("valueChange",{value:[bn,bn]})}}}),u.on("dragstart",function(ee){var ae=f.tickRects,je=f.unselectedTickStyle;ae.forEach(function(wn){wn.rect.attr(je)});var Fe=ee.target,_e=parseInt(Fe.get("name").split("-")[2],10),Ke=f.selectedTickStyle;ae[_e].rect.attr(Ke),f.startTickRectId=_e;var bn=_e/ae.length;f.graph.emit("valueChange",{value:[bn,bn]}),f.dragging=!0}),u.on("dragover",function(ee){if(f.dragging&&ee.target.get("type")==="rect"){for(var ae=parseInt(ee.target.get("name").split("-")[2],10),je=f.startTickRectId,Fe=f.tickRects,_e=f.selectedTickStyle,Ke=f.unselectedTickStyle,bn=0;bn<Fe.length;bn++){var wn=bn>=je&&bn<=ae?_e:Ke;Fe[bn].rect.attr(wn)}var Nn=Fe.length;f.endTickRectId=ae;var Bn=je/Nn,Gn=ae/Nn;f.graph.emit("valueChange",{value:[Bn,Gn]})}}),u.on("drop",function(ee){if(f.dragging&&(f.dragging=!1,ee.target.get("type")==="rect")){var ae=f.startTickRectId,je=parseInt(ee.target.get("name").split("-")[2],10);if(!(je<ae)){var Fe=f.selectedTickStyle,_e=f.tickRects;_e[je].rect.attr(Fe),f.endTickRectId=je;var Ke=_e.length,bn=ae/Ke,wn=je/Ke;f.graph.emit("valueChange",{value:[bn,wn]})}}});var I=this.tooltipBackgroundColor,W=this.tooltipFomatter,ct=this.canvas,Ct=new G({container:ct.get("container"),backgroundColor:I}),_t=this.tickRects;_t.forEach(function(ee){var ae=ee.pickRect;ae.on("mouseenter",function(je){var Fe=je.target;if(Fe.get("type")==="rect"){var _e=parseInt(Fe.get("name").split("-")[2],10),Ke=ct.getClientByPoint(_t[_e].x,_t[_e].y);Ct.show({x:_t[_e].x,y:_t[_e].y,clientX:Ke.x,clientY:Ke.y,text:W?W(_t[_e].value):_t[_e].value})}}),ae.on("mouseleave",function(je){Ct.hide()})});var Xt=this.group;Xt.on("playPauseBtn:click",function(){f.isPlay=!f.isPlay,f.changePlayStatus()}),Xt.on("nextStepBtn:click",function(){f.updateStartEnd(1)}),Xt.on("preStepBtn:click",function(){f.updateStartEnd(-1)}),Xt.on("timebarConfigChanged",function(ee){ee.type;var ae=ee.speed;f.currentSpeed=ae})},kt.prototype.changePlayStatus=function(f){f===void 0&&(f=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit("timelinestart",null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),f&&this.graph.emit("timelineend",null))},kt.prototype.startPlay=function(){var f=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var u=f.currentSpeed;f.frameCount%(60/u)==0&&(f.frameCount=0,f.updateStartEnd(1)),f.frameCount++,f.isPlay&&(f.playHandler=f.startPlay())}):void 0},kt.prototype.updateStartEnd=function(f){var u=this.tickRects,I=u.length,W=this.unselectedTickStyle,ct=this.selectedTickStyle,Ct=this.endTickRectId;if(f>0?this.endTickRectId++:(u[this.endTickRectId].rect.attr(W),this.endTickRectId--),Ct!==this.startTickRectId)this.endTickRectId<this.startTickRectId&&(this.startTickRectId=this.endTickRectId);else{for(var _t=this.startTickRectId;_t<=this.endTickRectId-1;_t++)u[_t].rect.attr(W);this.startTickRectId=this.endTickRectId}if(u[this.endTickRectId]){u[this.endTickRectId].rect.attr(ct);var Xt=this.startTickRectId/I,ee=this.endTickRectId/I;this.graph.emit("valueChange",{value:[Xt,ee]})}},kt.prototype.destory=function(){this.graph.off("valueChange");var f=this.sliceGroup;f.off("click"),f.off("dragstart"),f.off("dragover"),f.off("drop"),this.tickRects.forEach(function(u){var I=u.pickRect;I.off("mouseenter"),I.off("mouseleave")}),this.tickRects.length=0,f.off("playPauseBtn:click"),f.off("nextStepBtn:click"),f.off("preStepBtn:click"),f.off("timebarConfigChanged"),this.sliceGroup.destroy()},kt}(),Jt=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,ct){W.__proto__=ct}||function(W,ct){for(var Ct in ct)Object.prototype.hasOwnProperty.call(ct,Ct)&&(W[Ct]=ct[Ct])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}(),ie=function(){return(ie=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var ct in u=arguments[I])Object.prototype.hasOwnProperty.call(u,ct)&&(f[ct]=u[ct]);return f}).apply(this,arguments)},se=function(f,u){var I={};for(var W in f)Object.prototype.hasOwnProperty.call(f,W)&&u.indexOf(W)<0&&(I[W]=f[W]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function"){var ct=0;for(W=Object.getOwnPropertySymbols(f);ct<W.length;ct++)u.indexOf(W[ct])<0&&Object.prototype.propertyIsEnumerable.call(f,W[ct])&&(I[W[ct]]=f[W[ct]])}return I},Ce=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return Jt(f,kt),f.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:2,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{}}},f.prototype.initContainer=function(){var u,I,W=this.get("graph"),ct=this._cfgs,Ct=ct.width,_t=ct.height,Xt=this.get("className")||"g6-component-timebar",ee=this.get("container"),ae=this.get("graph").get("container");ee?(Object(n.x)(ee)&&(ee=document.getElementById(ee)),u=ee):(u=Object(y.b)("<div class='"+Xt+"'></div>"),Object(y.c)(u,{position:"relative"})),ae.appendChild(u),this.set("timeBarContainer",u),I=W.get("renderer")==="SVG"?new Y.Canvas({container:u,width:Ct,height:_t}):new D.Canvas({container:u,width:Ct,height:_t}),this.set("canvas",I)},f.prototype.init=function(){this.initContainer();var u=this.get("canvas").addGroup({name:"timebar-group"});this.set("timeBarGroup",u),this.renderTrend(),this.initEvent();var I=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",I)},f.prototype.renderTrend=function(){var u=this._cfgs,I=u.width,W=u.x,ct=u.y,Ct=u.padding,_t=u.type,Xt=u.trend,ee=u.slider,ae=u.controllerCfg,je=u.textStyle,Fe=Xt.data,_e=se(Xt,["data"]),Ke=I-2*Ct,bn=_t==="trend"?26:8,wn=this.get("graph"),Nn=this.get("timeBarGroup"),Bn=this.get("canvas"),Gn=null;if(_t==="trend"||_t==="simple")Gn=new ve(ie(ie({graph:wn,canvas:Bn,group:Nn,type:_t,x:W+Ct,y:_t==="trend"?ct+Ct:ct+Ct+15,width:Ke,height:bn,padding:Ct,trendCfg:ie(ie({},_e),{data:Fe.map(function(ur){return ur.value})})},ee),{ticks:Fe.map(function(ur){return ur.date}),handlerStyle:ie(ie({},ee.handlerStyle),{height:ee.height||bn}),controllerCfg:ae,textStyle:je}));else if(_t==="tick"){var sr=this._cfgs.tick;Gn=new Ft(ie({graph:wn,canvas:Bn,group:Nn,x:W+Ct,y:ct+Ct},sr))}this.set("timebar",Gn)},f.prototype.filterData=function(u){var I=u.value,W=null,ct=this._cfgs.type;if(ct==="trend"||ct==="simple"?W=this._cfgs.trend.data:ct==="tick"&&(W=this._cfgs.tick.data),W&&W.length!==0){var Ct=this.get("rangeChange"),_t=this.get("graph"),Xt=Math.round(W.length*I[0]),ee=Math.round(W.length*I[1]);ee=ee>=W.length?W.length-1:ee;var ae=W[Xt].date,je=W[ee].date;if(ct!=="tick"&&this.get("timebar").setText(ae,je),Ct)Ct(_t,ae,je);else{var Fe=_t.save();(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=Fe);var _e=this.cacheGraphData.nodes.filter(function(wn){return wn.date>=ae&&wn.date<=je}),Ke=_e.map(function(wn){return wn.id}),bn=this.cacheGraphData.edges.filter(function(wn){return Ke.includes(wn.source)&&Ke.includes(wn.target)});_t.changeData({nodes:_e,edges:bn})}}else console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E")},f.prototype.initEvent=function(){var u=this,I=0,W=0,ct=this._cfgs.type;ct&&ct!=="trend"&&ct!=="simple"?ct==="tick"&&(I=this._cfgs.tick.start,W=this._cfgs.tick.end):(I=this._cfgs.slider.start,W=this._cfgs.slider.end);var Ct=this.get("graph");Ct.on("afterrender",function(){u.filterData({value:[I,W]})}),Ct.on("valueChange",function(_t){u.filterData(_t)})},f.prototype.destroy=function(){var u=this.get("timebar");u&&u.destory&&u.destory(),kt.prototype.destroy.call(this);var I=this.get("timeBarContainer");if(I){var W=this.get("container");W||(W=this.get("graph").get("container")),Object(n.x)(W)&&(W=document.getElementById(W)),W.removeChild(I)}},f}(s),Ee={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(f){return Object.assign(this,f),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(f){var u=this,I=this.events;this.graph=f,this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||f.get("canvas").set("draggable",!0),Object(n.f)(I,function(W,ct){f.on(ct,W)}),document.addEventListener("visibilitychange",function(){u.keydown=!1})},unbind:function(f){var u=this.events;this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||f.get("canvas").set("draggable",!1),Object(n.f)(u,function(I,W){f.off(W,I)})},get:function(f){return this[f]},set:function(f,u){return this[f]=u,this}},un=function(){function kt(){}return kt.registerBehavior=function(f,u){if(!u)throw new Error("please specify handler for this behavior: "+f);var I=Object(n.c)(Ee);Object.assign(I,u);var W=function(Ct){var _t=this;Object.assign(this,this.getDefaultCfg(),Ct);var Xt=this.getEvents();this.events=null;var ee={};Xt&&(Object(n.f)(Xt,function(ae,je){ee[je]=Object(n.J)(_t,ae)}),this.events=ee)};W.prototype=I,kt.types[f]=W},kt.hasBehavior=function(f){return!!kt.types[f]},kt.getBehavior=function(f){return kt.types[f]},kt.types={},kt}(),xn=un,zt=e(79),Yt=e(10),Se=e(33),Wt=Yt.a.transform,ue=function(f){return function(u,I){return u[f]-I[f]}},vn=function(f,u,I){return f>=u&&f<=I},Dn=function(f,u,I,W){var ct=I.x-f.x,Ct=I.y-f.y,_t=u.x-f.x,Xt=u.y-f.y,ee=W.x-I.x,ae=W.y-I.y,je=_t*ae-Xt*ee,Fe=null;if(je*je>.001*(_t*_t+Xt*Xt)*(ee*ee+ae*ae)){var _e=(ct*ae-Ct*ee)/je,Ke=(ct*Xt-Ct*_t)/je;vn(_e,0,1)&&vn(Ke,0,1)&&(Fe={x:f.x+_e*_t,y:f.y+_e*Xt})}return Fe},zn=function(f,u){var I=f.x,W=f.y,ct=f.width,Ct=f.height,_t=[],Xt={x:I+ct/2,y:W+Ct/2};_t.push({x:I,y:W}),_t.push({x:I+ct,y:W}),_t.push({x:I+ct,y:W+Ct}),_t.push({x:I,y:W+Ct}),_t.push({x:I,y:W});for(var ee=null,ae=1;ae<_t.length&&!(ee=Dn(_t[ae-1],_t[ae],Xt,u));ae++);return ee},_n=function(f,u){var I=f.x,W=f.y,ct=f.r,Ct=u.x-I,_t=u.y-W;if(Math.sqrt(Ct*Ct+_t*_t)<ct)return null;var Xt=Math.sign(Ct),ee=Math.sign(_t),ae=Math.atan(_t/Ct);return{x:I+Math.abs(ct*Math.cos(ae))*Xt,y:W+Math.abs(ct*Math.sin(ae))*ee}},Ze=function(f,u){var I=f.rx,W=f.ry,ct=f.x,Ct=f.y,_t=u.x-ct,Xt=u.y-Ct,ee=Math.atan2(Xt/W,_t/I);return ee<0&&(ee+=2*Math.PI),{x:ct+I*Math.cos(ee),y:Ct+W*Math.sin(ee)}},Te=function(f,u,I){I===void 0&&(I=1);var W=[f.x,f.y,I];return u&&!isNaN(u[0])||(u=[1,0,0,0,1,0,0,0,1]),Yt.d.transformMat3(W,W,u),{x:W[0],y:W[1]}},N=function(f,u,I){I===void 0&&(I=1),u&&!isNaN(u[0])||(u=[1,0,0,0,1,0,0,0,1]);var W=Yt.b.invert([1,0,0,0,1,0,0,0,1],u);W||(W=[1,0,0,0,1,0,0,0,1]);var ct=[f.x,f.y,I];return Yt.d.transformMat3(ct,ct,W),{x:ct[0],y:ct[1]}},mt=function(f,u,I){var W=f.x-u.x,ct=f.y-u.y,Ct=f.x-I.x,_t=f.y-I.y,Xt=(f.x*f.x-u.x*u.x-u.y*u.y+f.y*f.y)/2,ee=(f.x*f.x-I.x*I.x-I.y*I.y+f.y*f.y)/2,ae=ct*Ct-W*_t;return{x:-(_t*Xt-ct*ee)/ae,y:-(W*ee-Ct*Xt)/ae}},$t=function(f,u){var I=f.x-u.x,W=f.y-u.y;return Math.sqrt(I*I+W*W)},me=function(f,u){var I=[];return f.forEach(function(W){var ct=[];W.forEach(function(Ct){ct.push(Ct*u)}),I.push(ct)}),I},Zt=function(f){for(var u=[],I=f.length,W=0;W<I;W+=1){u[W]=[];for(var ct=0;ct<I;ct+=1)W===ct?u[W][ct]=0:f[W][ct]!==0&&f[W][ct]?u[W][ct]=f[W][ct]:u[W][ct]=1/0}for(var Ct=0;Ct<I;Ct+=1)for(W=0;W<I;W+=1)for(ct=0;ct<I;ct+=1)u[W][ct]>u[W][Ct]+u[Ct][ct]&&(u[W][ct]=u[W][Ct]+u[Ct][ct]);return u},de=function(f,u){var I=f.nodes,W=f.edges,ct=[],Ct={};if(!I)throw new Error("invalid nodes data!");return I&&I.forEach(function(_t,Xt){Ct[_t.id]=Xt,ct.push([])}),W&&W.forEach(function(_t){var Xt=_t.source,ee=_t.target,ae=Ct[Xt],je=Ct[ee];ct[ae][je]=1,u||(ct[je][ae]=1)}),ct},he=function(f,u){f.translate(u.x,u.y)},ce=function(f,u){var I=f.getMatrix();I||(I=[1,0,0,0,1,0,0,0,1]);var W=f.getCanvasBBox(),ct=u.x-W.minX,Ct=u.y-W.minY,_t=Wt(I,[["t",ct,Ct]]);f.setMatrix(_t)},Me=function(f,u){var I=f.getMatrix();I||(I=[1,0,0,0,1,0,0,0,1]);var W=u;Object(n.m)(u)||(W=[u,u]),Object(n.m)(u)&&u.length===1&&(W=[u[0],u[0]]),I=Wt(I,[["s",W[0],W[1]]]),f.setMatrix(I)},ze=function(f,u){var I=f.getMatrix();I||(I=[1,0,0,0,1,0,0,0,1]),I=Wt(I,[["r",u]]),f.setMatrix(I)},Ve=function(f,u,I){for(var W=[],ct=0;ct<f;ct++)W[ct]=0;return I.forEach(function(Ct){Ct.source&&(W[u[Ct.source]]+=1),Ct.target&&(W[u[Ct.target]]+=1)}),W};function ke(kt,f,u){return(u[0]-kt[0])*(f[1]-kt[1])==(f[0]-kt[0])*(u[1]-kt[1])&&Math.min(kt[0],f[0])<=u[0]&&u[0]<=Math.max(kt[0],f[0])&&Math.min(kt[1],f[1])<=u[1]&&u[1]<=Math.max(kt[1],f[1])}var tn=function(f,u,I){var W=!1,ct=f.length;function Ct(ae){return Math.abs(ae)<1e-6?0:ae<0?-1:1}if(ct<=2)return!1;for(var _t=0;_t<ct;_t++){var Xt=f[_t],ee=f[(_t+1)%ct];if(ke(Xt,ee,[u,I]))return!0;Ct(Xt[1]-I)>0!=Ct(ee[1]-I)>0&&Ct(u-(I-Xt[1])*(Xt[0]-ee[0])/(Xt[1]-ee[1])-Xt[0])<0&&(W=!W)}return W},De=function(f,u){return!(u.minX>f.maxX||u.maxX<f.minX||u.minY>f.maxY||u.maxY<f.minY)},cn=function(f,u){var I=function(Fe){var _e=Fe.map(function(bn){return bn[0]}),Ke=Fe.map(function(bn){return bn[1]});return{minX:Math.min.apply(null,_e),maxX:Math.max.apply(null,_e),minY:Math.min.apply(null,Ke),maxY:Math.max.apply(null,Ke)}},W=function(Fe){for(var _e=[],Ke=Fe.length,bn=0;bn<Ke-1;bn++){var wn=Fe[bn],Nn=Fe[bn+1];_e.push({from:{x:wn[0],y:wn[1]},to:{x:Nn[0],y:Nn[1]}})}if(_e.length>1){var Bn=Fe[0],Gn=Fe[Ke-1];_e.push({from:{x:Gn[0],y:Gn[1]},to:{x:Bn[0],y:Bn[1]}})}return _e};if(f.length<2||u.length<2)return!1;var ct=I(f),Ct=I(u);if(!De(ct,Ct))return!1;var _t=!1;if(Object(n.f)(u,function(je){if(tn(f,je[0],je[1]))return _t=!0,!1}),_t||(Object(n.f)(f,function(je){if(tn(u,je[0],je[1]))return _t=!0,!1}),_t))return!0;var Xt=W(f),ee=W(u),ae=!1;return Object(n.f)(ee,function(je){if(function(Fe,_e){var Ke=!1;return Object(n.f)(Fe,function(bn){if(Dn(bn.from,bn.to,_e.from,_e.to))return Ke=!0,!1}),Ke}(Xt,je))return ae=!0,!1}),ae},hn=function(){function kt(f,u,I,W){this.x1=f,this.y1=u,this.x2=I,this.y2=W}return kt.prototype.getBBox=function(){var f=Math.min(this.x1,this.x2),u=Math.min(this.y1,this.y2),I=Math.max(this.x1,this.x2),W=Math.max(this.y1,this.y2);return{x:f,y:u,minX:f,minY:u,maxX:I,maxY:W,width:I-f,height:W-u}},kt}(),nn=function(f,u){return{top:[f.minX,f.minY,f.maxX,f.minY],left:[f.minX,f.minY,f.minX,f.maxY],bottom:[f.minX,f.maxY,f.maxX,f.maxY],right:[f.maxX,f.minY,f.maxX,f.maxY]}[u]},dn=function(f,u){var I=(u.x2-u.x1)*(f.y1-u.y1)-(u.y2-u.y1)*(f.x1-u.x1),W=(f.x2-f.x1)*(f.y1-u.y1)-(f.y2-f.y1)*(f.x1-u.x1),ct=(u.y2-u.y1)*(f.x2-f.x1)-(u.x2-u.x1)*(f.y2-f.y1);if(ct){var Ct=I/ct,_t=W/ct;if(Ct>=0&&Ct<=1&&_t>=0&&_t<=1)return Ct}return Number.POSITIVE_INFINITY},Sn=function(f,u){for(var I=["top","left","bottom","right"],W=f.getBBox(),ct=0,Ct=[],_t=0;_t<4;_t++){var Xt=nn(W,I[_t]),ee=Xt[0],ae=Xt[1],je=Xt[2],Fe=Xt[3];Ct[_t]=Dn({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},{x:ee,y:ae},{x:je,y:Fe}),Ct[_t]&&(ct+=1)}return[Ct,ct]},Pe=function(f,u){for(var I=["top","left","bottom","right"],W=f.getBBox(),ct=Number.POSITIVE_INFINITY,Ct=0,_t=0;_t<4;_t++){var Xt=nn(W,I[_t]),ee=Xt[0],ae=Xt[1],je=Xt[2],Fe=Xt[3],_e=dn(u,new hn(ee,ae,je,Fe));(_e=Math.abs(_e-.5))>=0&&_e<=1&&(Ct+=1,ct=_e<ct?_e:ct)}return Ct===0?-1:ct},le=function(f){var u=0,I=0;if(f.length>0){for(var W=0,ct=f;W<ct.length;W++){var Ct=ct[W];u+=Ct.x,I+=Ct.y}u/=f.length,I/=f.length}return{x:u,y:I}},Le=function(f,u){return Math.pow(f.x-u.x,2)+Math.pow(f.y-u.y,2)},Be=function(f,u){var I,W=u.x1,ct=u.y1,Ct=u.x2-W,_t=u.y2-ct,Xt=f.x-W,ee=f.y-ct,ae=Xt*Ct+ee*_t;I=ae<=0||(ae=(Xt=Ct-Xt)*Ct+(ee=_t-ee)*_t)<=0?0:ae*ae/(Ct*Ct+_t*_t);var je=Xt*Xt+ee*ee-I;return je<0&&(je=0),je},en=function(f,u,I){return I===void 0&&(I=.001),Math.pow(f.x-u.x,2)+Math.pow(f.y-u.y,2)<Math.pow(I,2)},sn=function(f,u){var I=f.x<u.x,W=f.x>u.x+u.width,ct=f.y>u.y+u.height,Ct=f.y<u.y;if(!(I||W||ct||Ct))return 0;if(ct&&!I&&!W)return Math.pow(u.y+u.height-f.y,2);if(Ct&&!I&&!W)return Math.pow(f.y-u.y,2);if(I&&!ct&&!Ct)return Math.pow(u.x-f.x,2);if(W&&!ct&&!Ct)return Math.pow(u.x+u.width-f.x,2);var _t=Math.min(Math.abs(u.x-f.x),Math.abs(u.x+u.width-f.x)),Xt=Math.min(Math.abs(u.y-f.y),Math.abs(u.y+u.height-f.y));return _t*_t+Xt*Xt},Ue="rgb(95, 149, 255)",ln="rgb(253, 253, 253)",mn="rgb(247, 250, 255)",Wn="rgb(224, 224, 224)",An="rgb(224, 224, 224)",In={version:"0.0.8",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Ue,fill:"rgb(239, 244, 255)"},size:20,color:Ue,linkPoints:{size:8,lineWidth:1,fill:mn,stroke:Ue}},nodeStateStyles:{active:{fill:mn,stroke:Ue,lineWidth:2,shadowColor:Ue,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:Ue,lineWidth:4,shadowColor:Ue,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:"#4572d9",lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:"rgb(247, 250, 255)",stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:"rgb(250, 250, 250)",stroke:"rgb(224, 224, 224)",lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Wn,lineAppendWidth:2},color:Wn},edgeStateStyles:{active:{stroke:Ue,lineWidth:1},selected:{stroke:Ue,lineWidth:2,shadowColor:Ue,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Ue,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(234, 234, 234)",lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:ln,lineWidth:1,stroke:An,r:5,width:20,height:10},size:[20,5],color:An,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Ue,lineWidth:1,fill:"rgb(247, 250, 255)"},selected:{stroke:Ue,lineWidth:2,fill:ln,shadowColor:Ue,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:"#4572d9",lineWidth:2,fill:ln,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(224, 224, 224)",fill:ln,lineWidth:1},disable:{stroke:"rgb(234, 234, 234)",fill:"rgb(250, 250, 250)",lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]}},lr=function(){function kt(f){this.graph=f,this.destroyed=!1,this.modes=f.get("modes")||{default:[]},this.formatModes(),this.mode=f.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return kt.prototype.formatModes=function(){var f=this.modes;Object(n.f)(f,function(u){Object(n.f)(u,function(I,W){Object(n.x)(I)&&(u[W]={type:I})})})},kt.prototype.setBehaviors=function(f){var u,I=this.graph,W=this.modes[f],ct=[];Object(n.f)(W||[],function(Ct){var _t=un.getBehavior(Ct.type||Ct);_t&&(u=new _t(Ct))&&(u.bind(I),ct.push(u))}),this.currentBehaves=ct},kt.mergeBehaviors=function(f,u){return Object(n.f)(u,function(I){f.indexOf(I)<0&&(Object(n.x)(I)&&(I={type:I}),f.push(I))}),f},kt.filterBehaviors=function(f,u){var I=[];return f.forEach(function(W){var ct="";ct=Object(n.x)(W)?W:W.type,u.indexOf(ct)<0&&I.push(W)}),I},kt.prototype.setMode=function(f){var u=this.modes,I=this.graph,W=f;u[W]&&(I.emit("beforemodechange",{mode:f}),Object(n.f)(this.currentBehaves,function(ct){ct.delegate&&ct.delegate.remove(),ct.unbind(I)}),this.setBehaviors(W),I.emit("aftermodechange",{mode:f}),this.mode=f)},kt.prototype.getMode=function(){return this.mode},kt.prototype.manipulateBehaviors=function(f,u,I){var W,ct=this;if(W=Object(n.m)(f)?f:[f],Object(n.m)(u))return Object(n.f)(u,function(_t){ct.modes[_t]?ct.modes[_t]=I?kt.mergeBehaviors(ct.modes[_t]||[],W):kt.filterBehaviors(ct.modes[_t]||[],W):I&&(ct.modes[_t]=W)}),this;var Ct=u;return u||(Ct=this.mode),this.modes[Ct]||I&&(this.modes[Ct]=W),this.modes[Ct]=I?kt.mergeBehaviors(this.modes[Ct]||[],W):kt.filterBehaviors(this.modes[Ct]||[],W),this.setMode(this.mode),this},kt.prototype.updateBehavior=function(f,u,I){Object(n.x)(f)&&(f={type:f});var W=[];if(I&&I!==this.mode&&I!=="default"){if(!(W=this.modes[I])||!W.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;var ct=W.length;for(_t=0;_t<ct;_t++){if((Xt=W[_t]).type===f.type||Xt===f.type)return Xt===f.type&&(Xt={type:Xt}),Object.assign(Xt,u),W[_t]=Xt,this;_t===ct-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(!(W=this.currentBehaves)||!W.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var Ct=W.length,_t=0;_t<Ct;_t++){var Xt;if((Xt=W[_t]).type===f.type)return Xt.updateCfg(u),this;_t===Ct-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},kt.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},kt}(),Hr=function(kt){function f(u,I){var W=kt.call(this,u,I)||this;return W.item=I.item,W.canvasX=I.canvasX,W.canvasY=I.canvasY,W.wheelDelta=I.wheelDelta,W.detail=I.detail,W}return Object(at.b)(f,kt),f}(e(18).Event),Gr=function(f){return f+"-"+Math.random()+Date.now()},Mr=function(f){var u=0,I=0,W=0,ct=0;return Object(n.t)(f)?u=I=W=ct=f:Object(n.x)(f)?u=I=W=ct=parseInt(f,10):Object(n.m)(f)&&(u=f[0],W=Object(n.s)(f[1])?f[0]:f[1],ct=Object(n.s)(f[2])?f[0]:f[2],I=Object(n.s)(f[3])?W:f[3]),[u,W,ct,I]},oi=function(f){var u=new Hr(f.type,f);return u.clientX=f.clientX,u.clientY=f.clientY,u.x=f.x,u.y=f.y,u.target=f.target,u.currentTarget=f.currentTarget,u.bubbles=!0,u.item=f.item,u},ai=function(f){if(!f)return!1;for(var u=[1,0,0,0,1,0,0,0,1],I=0;I<9;I++)if(f[I]!==u[I])return!0;return!1},Zr=function(f){return Number.isNaN(Number(f))},Xi=function(f){for(var u=1/0,I=-1/0,W=1/0,ct=-1/0,Ct=0;Ct<f.length;Ct++){var _t=f[Ct].getBBox(),Xt=_t.minX,ee=_t.minY,ae=_t.maxX,je=_t.maxY;Xt<u&&(u=Xt),ee<W&&(W=ee),ae>I&&(I=ae),je>ct&&(ct=je)}return{x:Math.floor(u),y:Math.floor(W),width:Math.ceil(I)-Math.floor(u),height:Math.ceil(ct)-Math.floor(W),minX:u,minY:W,maxX:I,maxY:ct}},$i=function(f,u,I,W,ct){u===void 0&&(u=15),I===void 0&&(I="quadratic");for(var Ct=f.length,_t=2*u,Xt=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],ee={},ae=[],je={},Fe=0;Fe<Ct;Fe++){var _e=f[Fe],Ke=_e.source,bn=_e.target,wn=Ke+"-"+bn;if(!ae[Fe]){ee[wn]||(ee[wn]=[]),ae[Fe]=!0,ee[wn].push(_e);for(var Nn=0;Nn<Ct;Nn++)if(Fe!==Nn){var Bn=f[Nn],Gn=Bn.source,sr=Bn.target;ae[Nn]||(Ke===sr&&bn===Gn?(ee[wn].push(Bn),ae[Nn]=!0,je[Gn+"|"+sr+"|"+(ee[wn].length-1)]=!0):Ke===Gn&&bn===sr&&(ee[wn].push(Bn),ae[Nn]=!0))}}}for(var ur in ee)for(var Or=ee[ur],ei=Or.length,Ci=0;Ci<ei;Ci++){var Rr=Or[Ci];if(Rr.source!==Rr.target)if(ei===1&&W&&Rr.source!==Rr.target)Rr.type=W;else{Rr.type=I;var yi=(Ci%2==0?1:-1)*(je[Rr.source+"|"+Rr.target+"|"+Ci]?-1:1);Rr.curveOffset=ei%2==1?yi*Math.ceil(Ci/2)*_t:yi*(Math.floor(Ci/2)*_t+u)}else ct&&(Rr.type=ct),Rr.loopCfg={position:Xt[Ci%8],dist:20*Math.floor(Ci/8)+50}}return f},Go=function(){function kt(f){this.destroyed=!1,this.graph=f,this.destroyed=!1}return kt.prototype.getViewCenter=function(){var f=this.getFormatPadding(),u=this.graph,I=this.graph.get("width"),W=u.get("height");return{x:(I-f[1]-f[3])/2+f[3],y:(W-f[0]-f[2])/2+f[0]}},kt.prototype.fitCenter=function(){var f=this.graph,u=f.get("group");u.resetMatrix();var I=u.getCanvasBBox();if(I.width!==0&&I.height!==0){var W=this.getViewCenter(),ct=I.x+I.width/2,Ct=I.y+I.height/2;f.translate(W.x-ct,W.y-Ct)}},kt.prototype.fitView=function(){var f=this.graph,u=this.getFormatPadding(),I=f.get("width"),W=f.get("height"),ct=f.get("group");ct.resetMatrix();var Ct=ct.getCanvasBBox();if(Ct.width!==0&&Ct.height!==0){var _t=this.getViewCenter(),Xt=Ct.x+Ct.width/2,ee=Ct.y+Ct.height/2;f.translate(_t.x-Xt,_t.y-ee);var ae=(I-u[1]-u[3])/Ct.width,je=(W-u[0]-u[2])/Ct.height,Fe=ae;ae>je&&(Fe=je),f.zoom(Fe,_t)}},kt.prototype.getFormatPadding=function(){var f=this.graph.get("fitViewPadding");return Mr(f)},kt.prototype.focusPoint=function(f,u,I){var W=this,ct=this.getViewCenter(),Ct=this.getPointByCanvas(ct.x,ct.y),_t=this.graph.get("group").getMatrix();if(_t||(_t=[1,0,0,0,1,0,0,0,1]),u){var Xt=(Ct.x-f.x)*_t[0],ee=(Ct.y-f.y)*_t[4],ae=0,je=0,Fe=0,_e=0;this.graph.get("canvas").animate(function(Ke){Fe=Xt*Ke,_e=ee*Ke,W.graph.translate(Fe-ae,_e-je),ae=Fe,je=_e},Object(at.a)({},I))}else this.graph.translate((Ct.x-f.x)*_t[0],(Ct.y-f.y)*_t[4])},kt.prototype.getPointByCanvas=function(f,u){var I=this.graph.get("group").getMatrix();return I||(I=[1,0,0,0,1,0,0,0,1]),N({x:f,y:u},I)},kt.prototype.getPointByClient=function(f,u){var I=this.graph.get("canvas").getPointByClient(f,u);return this.getPointByCanvas(I.x,I.y)},kt.prototype.getClientByPoint=function(f,u){var I=this.graph.get("canvas"),W=this.getCanvasByPoint(f,u),ct=I.getClientByPoint(W.x,W.y);return{x:ct.x,y:ct.y}},kt.prototype.getCanvasByPoint=function(f,u){var I=this.graph.get("group").getMatrix();return I||(I=[1,0,0,0,1,0,0,0,1]),Te({x:f,y:u},I)},kt.prototype.focus=function(f,u,I){Object(n.x)(f)&&(f=this.graph.findById(f));var W=f.get("group").getMatrix();W||(W=[1,0,0,0,1,0,0,0,1]),f&&this.focusPoint({x:W[6],y:W[7]},u,I)},kt.prototype.changeSize=function(f,u){var I=this.graph;if(!Object(n.t)(f)||!Object(n.t)(u))throw Error("invalid canvas width & height, please make sure width & height type is number");I.set({width:f,height:u}),I.get("canvas").changeSize(f,u),I.get("plugins").forEach(function(W){if(W.get("gridContainer")){var ct=I.get("minZoom");Object(y.c)(W.get("container"),{width:f+"px",height:u+"px"}),Object(y.c)(W.get("gridContainer"),{width:f/ct+"px",height:u/ct+"px",left:0,top:0})}})},kt.prototype.destroy=function(){this.graph=null,this.destroyed=!1},kt}(),_o={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},Uo=Math.PI,ta=Math.sin,li=Math.cos,Oo=ta(Uo/8),qi=li(Uo/8),zo=function(f,u){var I=f.getBBox(),W={x:I.minX,y:I.minY},ct={x:I.maxX,y:I.maxY};if(u){var Ct=u.getMatrix();Ct||(Ct=[1,0,0,0,1,0,0,0,1]),W=Te(W,Ct),ct=Te(ct,Ct)}var _t=W.x,Xt=W.y,ee=ct.x,ae=ct.y;return{x:_t,y:Xt,minX:_t,minY:Xt,maxX:ee,maxY:ae,width:ee-_t,height:ae-Xt}},Yo=function(f){var u=f.sourceNode||f.targetNode,I=u.get("group").getMatrix();I||(I=[1,0,0,0,1,0,0,0,1]);var W=u.getKeyShape().getBBox(),ct=f.loopCfg||{},Ct=ct.dist||2*Math.max(W.width,W.height),_t=ct.position||In.defaultLoopPosition,Xt=[I[6],I[7]],ee=[f.startPoint.x,f.startPoint.y],ae=[f.endPoint.x,f.endPoint.y],je=W.height/2,Fe=W.height/2,_e=je*Oo,Ke=je*qi,bn=Fe*Oo,wn=Fe*qi;if(ee[0]===ae[0]&&ee[1]===ae[1]){switch(_t){case"top":ee=[Xt[0]-_e,Xt[1]-Ke],ae=[Xt[0]+bn,Xt[1]-wn];break;case"top-right":je=W.height/2,Fe=W.width/2,ee=[Xt[0]+(_e=je*Oo),Xt[1]-(Ke=je*qi)],ae=[Xt[0]+(wn=Fe*qi),Xt[1]-(bn=Fe*Oo)];break;case"right":je=W.width/2,Fe=W.width/2,ee=[Xt[0]+(Ke=je*qi),Xt[1]-(_e=je*Oo)],ae=[Xt[0]+(wn=Fe*qi),Xt[1]+(bn=Fe*Oo)];break;case"bottom-right":je=W.width/2,Fe=W.height/2,ee=[Xt[0]+(Ke=je*qi),Xt[1]+(_e=je*Oo)],ae=[Xt[0]+(bn=Fe*Oo),Xt[1]+(wn=Fe*qi)];break;case"bottom":je=W.height/2,Fe=W.height/2,ee=[Xt[0]+(_e=je*Oo),Xt[1]+(Ke=je*qi)],ae=[Xt[0]-(bn=Fe*Oo),Xt[1]+(wn=Fe*qi)];break;case"bottom-left":je=W.height/2,Fe=W.width/2,ee=[Xt[0]-(_e=je*Oo),Xt[1]+(Ke=je*qi)],ae=[Xt[0]-(wn=Fe*qi),Xt[1]+(bn=Fe*Oo)];break;case"left":je=W.width/2,Fe=W.width/2,ee=[Xt[0]-(Ke=je*qi),Xt[1]+(_e=je*Oo)],ae=[Xt[0]-(wn=Fe*qi),Xt[1]-(bn=Fe*Oo)];break;case"top-left":je=W.width/2,Fe=W.height/2,ee=[Xt[0]-(Ke=je*qi),Xt[1]-(_e=je*Oo)],ae=[Xt[0]-(bn=Fe*Oo),Xt[1]-(wn=Fe*qi)];break;default:je=W.width/2,Fe=W.width/2,ee=[Xt[0]-(_e=je*Oo),Xt[1]-(Ke=je*qi)],ae=[Xt[0]+(bn=Fe*Oo),Xt[1]-(wn=Fe*qi)]}if(ct.clockwise===!1){var Nn=[ee[0],ee[1]];ee=[ae[0],ae[1]],ae=[Nn[0],Nn[1]]}}var Bn=[ee[0]-Xt[0],ee[1]-Xt[1]],Gn=(je+Ct)/je,sr=(Fe+Ct)/Fe;ct.clockwise===!1&&(Gn=(Fe+Ct)/Fe,sr=(je+Ct)/je);var ur=Yt.c.scale([0,0],Bn,Gn),Or=[Xt[0]+ur[0],Xt[1]+ur[1]],ei=[ae[0]-Xt[0],ae[1]-Xt[1]],Ci=Yt.c.scale([0,0],ei,sr),Rr=[Xt[0]+Ci[0],Xt[1]+Ci[1]];return f.startPoint={x:ee[0],y:ee[1]},f.endPoint={x:ae[0],y:ae[1]},f.controlPoints=[{x:Or[0],y:Or[1]},{x:Rr[0],y:Rr[1]}],f},Xo=function(f,u,I,W,ct){var Ct=[],_t=f.getPoint(u);if(_t===null)return{x:0,y:0,angle:0};if(u<1e-4)Ct=f.getStartTangent().reverse();else if(u>.9999)Ct=f.getEndTangent();else{var Xt=f.getPoint(u+1e-4);Ct.push([_t.x,_t.y]),Ct.push([Xt.x,Xt.y])}var ee=Math.atan2(Ct[1][1]-Ct[0][1],Ct[1][0]-Ct[0][0]);if(ee<0&&(ee+=2*Uo),I&&(_t.x+=li(ee)*I,_t.y+=ta(ee)*I),W){var ae=ee-Uo/2;ee>.5*Uo&&ee<1.5*Uo&&(ae-=Uo),_t.x+=li(ae)*W,_t.y+=ta(ae)*W}var je={x:_t.x,y:_t.y,angle:ee};return ct?(ee>.5*Uo&&ee<1.5*Uo&&(ee-=Uo),Object(at.a)({rotate:ee},je)):je},ua=function kt(f,u){if(u(f)===!1)return!1;if(f&&f.children){for(var I=f.children.length-1;I>=0;I--)if(!kt(f.children[I],u))return!1}return!0},di=function(f,u){typeof u=="function"&&ua(f,u)},ea=function(f,u){typeof u=="function"&&function I(W,ct){if(W&&W.children){for(var Ct=W.children.length-1;Ct>=0;Ct--)if(!I(W.children[Ct],ct))return}return ct(W)!==!1}(f,u)},xi=function(f,u){return u*(_o[f]||1)},Rs=function(f,u){var I=0,W=new RegExp("[\u4E00-\u9FA5]+");return f.split("").forEach(function(ct){W.test(ct)?I+=u:I+=xi(ct,u)}),[I,u]},ki=function(f,u){var I=[],W={},ct={};f.forEach(function(Xt){ct[Xt.id]=Xt}),f.forEach(function(Xt,ee){var ae=Object(n.c)(Xt);ae.itemType="combo",ae.children=void 0,ae.parentId===ae.id?(console.warn("The parentId for combo "+ae.id+" can not be the same as the combo's id"),delete ae.parentId):ae.parentId&&!ct[ae.parentId]&&(console.warn("The parent combo for combo "+ae.id+" does not exist!"),delete ae.parentId);var je=W[ae.id];if(je){if(ae.children=je.children,W[ae.id]=ae,!(je=ae).parentId)return void I.push(je);var Fe=W[je.parentId];if(Fe)Fe.children?Fe.children.push(ae):Fe.children=[ae];else{var _e={id:je.parentId,children:[je]};W[je.parentId]=_e,W[ae.id]=ae}}else if(Object(n.x)(Xt.parentId)){var Ke=W[Xt.parentId];if(Ke)Ke.children?Ke.children.push(ae):Ke.children=[ae],W[ae.id]=ae;else{var bn={id:Xt.parentId,children:[ae]};W[bn.id]=bn,W[ae.id]=ae}}else I.push(ae),W[ae.id]=ae});var Ct={};(u||[]).forEach(function(Xt){Ct[Xt.id]=Xt;var ee=W[Xt.comboId];if(ee){var ae={id:Xt.id,comboId:Xt.comboId};ee.children?ee.children.push(ae):ee.children=[ae],ae.itemType="node",W[Xt.id]=ae}});var _t=0;return I.forEach(function(Xt){Xt.depth=_t+10,ua(Xt,function(ee){var ae,je=W[ee.id].itemType;ae=je==="node"?W[ee.comboId]:W[ee.parentId],ee.depth=ae&&je==="node"?_t+1:_t+10,_t<ee.depth&&(_t=ee.depth);var Fe=Ct[ee.id];return Fe&&(Fe.depth=ee.depth),!0})}),I},ks=function(f,u,I){var W,ct=f,Ct={root:{children:f}},_t=!1,Xt="root";(f||[]).forEach(function(_e){if(!_t)return _e.id===u?(W=_e,_e.itemType==="combo"?W.parentId=I:W.comboId=I,void(_t=!0)):void di(_e,function(Ke){return Ct[Ke.id]={children:Ke.children},ct=Ct[Ke.parentId||Ke.comboId||"root"].children,!Ke||!Ke.removed&&u!==Ke.id||!ct||(Xt=Ke.parentId||Ke.comboId||"root",W=Ke,Ke.itemType==="combo"?W.parentId=I:W.comboId=I,_t=!0,!1)})});var ee=(ct=Ct[Xt].children)?ct.indexOf(W):-1;if(ee>-1&&ct.splice(ee,1),_t||(W={id:u,itemType:"node",comboId:I},Ct[u]={children:void 0}),u){var ae=!1;if(I){var je=0;(f||[]).forEach(function(_e){ae||di(_e,function(Ke){return I!==Ke.id||(ae=!0,Ke.children?Ke.children.push(W):Ke.children=[W],je=Ke.depth,W.itemType==="node"?W.depth=je+2:W.depth=je+1,!1)})})}else I&&ae||W.itemType==="node"||f.push(W);var Fe=W.depth;di(W,function(_e){return _e.itemType==="node"?Fe+=2:Fe+=1,_e.depth=Fe,!0})}return f},Mi=function(f,u){var I={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return f&&f.length!==0&&(f.forEach(function(W){var ct=u.findById(W.id);if(ct&&ct.isVisible()){ct.set("bboxCanvasCache",void 0);var Ct=ct.getCanvasBBox();Ct.x&&I.minX>Ct.minX&&(I.minX=Ct.minX),Ct.y&&I.minY>Ct.minY&&(I.minY=Ct.minY),Ct.x&&I.maxX<Ct.maxX&&(I.maxX=Ct.maxX),Ct.y&&I.maxY<Ct.maxY&&(I.maxY=Ct.maxY)}}),I.x=(I.minX+I.maxX)/2,I.y=(I.minY+I.maxY)/2,I.width=I.maxX-I.minX,I.height=I.maxY-I.minY,I.centerX=(I.minX+I.maxX)/2,I.centerY=(I.minY+I.maxY)/2,Object.keys(I).forEach(function(W){I[W]!==1/0&&I[W]!==-1/0||(I[W]=void 0)})),I},hu=function(f){var u=Object(n.t)(f.x)||Object(n.t)(f.y)||f.type||f.anchorPoints||f.size;return f.style&&(u=u||Object(n.t)(f.style.r)||Object(n.t)(f.style.width)||Object(n.t)(f.style.height)||Object(n.t)(f.style.rx)||Object(n.t)(f.style.ry)),u},ui=function(f){var u={};return Object.keys(f).forEach(function(I){var W=f[I];if(Object(n.v)(W)){var ct={};Object.keys(W).forEach(function(Ct){var _t=W[Ct];(Ct!=="img"||Object(n.x)(_t))&&(ct[Ct]=Object(n.c)(_t))}),u[I]=ct}else u[I]=Object(n.c)(W)}),u};function du(kt){return(du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(kt)}function eo(kt){if(typeof kt!="string")return kt;var f=function(Or){if(typeof Or!="string")return Or;try{return JSON.parse(Or.trim())}catch(ei){return Or.trim()}},u=f(kt);if(typeof u!="string")return u;for(var I=function(Or){return Or[Or.length-1]},W=kt.trim(),ct=[],Ct=[],_t=function(){for(var Or=[],ei=0;ei<arguments.length;ei++)Or[ei]=arguments[ei];return Or.some(function(Ci){return I(Ct)===Ci})},Xt=null,ee=0,ae="";ee<W.length;){var je=W[ee],Fe=_t('"',"'");if(Fe||je.trim()){var _e=W[ee-1]==="\\",Ke=_t("}"),bn=_t("]"),wn=_t(","),Nn=I(ct);if(Fe)if(I(Ct)!==je||_e)ae+=je;else{Ct.pop();var Bn=f(ae);Nn.push(Bn),Xt=Bn,ae=""}else if(bn&&je===",")ae&&(Nn.push(f(ae)),ae="");else if(Ke&&je===":")Ct.push(","),ae&&(Nn.push(ae),ae="");else if(wn&&je===",")ae&&(Nn.push(f(ae)),ae=""),Ct.pop();else if(je==="}"&&(Ke||wn)){ae&&(Nn.push(f(ae)),ae=""),wn&&Ct.pop();for(var Gn={},sr=1;sr<Nn.length;sr+=2)Gn[Nn[sr-1]]=Nn[sr];ct.pop(),ct.length&&I(ct).push(Gn),Ct.pop(),Xt=Gn}else je==="]"&&bn?(ae&&(Nn.push(f(ae)),ae=""),ct.pop(),ct.length&&I(ct).push(Nn),Ct.pop(),Xt=Nn):je==="{"?(ct.push([]),Ct.push("}")):je==="["?(ct.push([]),Ct.push("]")):je==='"'?Ct.push('"'):je==="'"?Ct.push("'"):ae+=je;ee+=1}else ee+=1}return Xt||ae}function vu(kt,f){var u;f===void 0&&(f={x:0,y:0});var I=Object(at.a)({x:0,y:0,width:0,height:0},f);if((u=kt.children)===null||u===void 0?void 0:u.length){var W=kt.attrs,ct=W===void 0?{}:W,Ct=ct.marginTop,_t=Object(at.a)({},f);Ct&&(_t.y+=Ct);for(var Xt=0;Xt<kt.children.length;Xt++){kt.children[Xt].attrs.key=(ct.key||"root")+" -"+Xt+" ";var ee=vu(kt.children[Xt],_t);if(ee.bbox){var ae=ee.bbox;ee.attrs.next==="inline"?_t.x+=ee.bbox.width:_t.y+=ee.bbox.height,ae.width+ae.x>I.width&&(I.width=ae.width+ae.x),ae.height+ae.y>I.height&&(I.height=ae.height+ae.y)}}}return kt.bbox=function(je,Fe,_e){var Ke,bn,wn=je.attrs,Nn=wn===void 0?{}:wn,Bn={x:Fe.x||0,y:Fe.y||0,width:_e.width||0,height:_e.height||0};switch(je.type){case"maker":case"circle":Nn.r&&(bn=2*Nn.r,Ke=2*Nn.r);break;case"text":Nn.text&&(bn=Rs(Nn.text,Nn.fontSize||12)[0],Ke=16,Bn.y+=Ke,Bn.height=Ke,Bn.width=bn,je.attrs=Object(at.a)({fontSize:12,fill:"#000"},Nn));break;default:Nn.width&&(bn=Nn.width),Nn.height&&(Ke=Nn.height)}return Ke>=0&&(Bn.height=Ke),bn>=0&&(Bn.width=bn),Nn.marginTop&&(Bn.y+=Nn.marginTop),Nn.marginLeft&&(Bn.x+=Nn.marginLeft),Bn}(kt,f,I),kt.attrs=Object(at.a)(Object(at.a)({},kt.attrs),kt.bbox),kt}function na(kt){var f={},u=function(W){var ct=function(Xt){return function(ee){for(var ae=Xt.length,je=[],Fe=0,_e="";Fe<ae;)if(Xt[Fe]==="{"&&Xt[Fe+1]==="{")je.push(_e),_e="",Fe+=2;else if(Xt[Fe]==="}"&&Xt[Fe+1]==="}"){if(je.length){var Ke=je.pop();_e=Object(n.i)(ee,_e,Ke.endsWith("=")?'"{'+_e+'}"':_e),je.push(Ke+_e)}Fe+=2,_e=""}else _e+=Xt[Fe],Fe+=1;return je.push(_e),je.map(function(bn,wn){return je[wn-1]&&je[wn-1].endsWith("=")?'"{'+bn+'}"':bn}).join("")}}(typeof kt=="function"?kt(W):kt)(W),Ct=document.createElement("div");Ct.innerHTML=ct;var _t=vu(function Xt(ee,ae){var je={},Fe=ee.getAttributeNames&&ee.getAttributeNames()||[],_e=ee.children&&Array.from(ee.children).map(function(wn){return Xt(wn,ae)}),Ke={},bn=ee.tagName?ee.tagName.toLowerCase():"group";return bn==="text"&&(je.text=ee.innerText),Ke.type=bn,bn==="img"&&(Ke.type="image"),Array.from(Fe).forEach(function(wn){var Nn=wn.split("-").reduce(function(sr,ur){return sr+ur.charAt(0).toUpperCase()+ur.slice(1)}),Bn=ee.getAttribute(wn);try{if(Nn==="style"||Nn==="attrs"){var Gn=eo(Bn);je=Object(at.a)(Object(at.a)({},je),Gn)}else Ke[Nn]=eo(Bn)}catch(sr){if(Nn==="style")throw sr;Ke[Nn]=Bn}}),Ke.attrs=je,ae&&ae.style&&Ke.name&&du(ae.style[Ke.name])==="object"&&(Ke.attrs=Object(at.a)(Object(at.a)({},Ke.attrs),ae.style[Ke.name])),ae&&ae.style&&Ke.keyshape&&(Ke.attrs=Object(at.a)(Object(at.a)({},Ke.attrs),ae.style)),_e.length&&(Ke.children=_e),Ke}(Ct.children[0],W));return Ct.remove(),_t};return{draw:function(W,ct){var Ct=u(W),_t=ct;return function Xt(ee){var ae=ee.attrs,je=ae===void 0?{}:ae,Fe=ee.bbox,_e=ee.type,Ke=ee.children,bn=Object(at.c)(ee,["attrs","bbox","type","children"]);if(ee.type!=="group"){var wn=ct.addShape(ee.type,Object(at.a)({attrs:je,origin:{bbox:Fe,type:_e,children:Ke}},bn));ee.keyshape&&(_t=wn)}ee.children&&ee.children.forEach(function(Nn){return Xt(Nn)})}(Ct),f[W.id]=[Ct],_t},update:function(W,ct){f[W.id]||(f[W.id]=[]);var Ct=ct.getContainer(),_t=Ct.get("children"),Xt=u(W),ee=function Fe(_e,Ke){var bn,wn,Nn,Bn,Gn=(_e||{}).type,sr=((Ke==null?void 0:Ke.attrs)||{}).key;if(sr&&_e&&(_e.attrs.key=sr),!_e&&Ke)return{action:"delete",val:Ke,type:Gn,key:sr};if(_e&&!Ke)return{action:"add",val:_e,type:Gn};if(!_e&&!Ke)return{action:"same",type:Gn};var ur=[];if(((bn=_e.children)===null||bn===void 0?void 0:bn.length)>0||((wn=Ke.children)===null||wn===void 0?void 0:wn.length)>0)for(var Or=Math.max((Nn=_e.children)===null||Nn===void 0?void 0:Nn.length,(Bn=Ke.children)===null||Bn===void 0?void 0:Bn.length),ei=Ke.children||[],Ci=_e.children||[],Rr=0;Rr<Or;Rr+=1)ur.push(Fe(Ci[Rr],ei[Rr]));var yi=Object.keys(Ke.attrs),oo=Object.keys(_e.attrs);return Ke.type!==_e.type?{action:"restructure",nowTarget:_e,formerTarget:Ke,key:sr,children:ur}:yi.filter(function(so){return so!=="children"}).some(function(so){return _e.attrs[so]!==Ke.attrs[so]||!oo.includes(so)})?{action:"change",val:_e,children:ur,type:Gn,key:sr}:{action:"same",children:ur,type:Gn,key:sr}}(Xt,f[W.id].pop()),ae=function Fe(_e){var Ke;_e.type!=="group"&&Ct.addShape(_e.type,{attrs:_e.attrs}),((Ke=_e.children)===null||Ke===void 0?void 0:Ke.length)&&_e.children.map(function(bn){return Fe(bn)})},je=function Fe(_e){var Ke,bn=_t.find(function(wn){return wn.attrs.key===_e.attrs.key});bn&&Ct.removeChild(bn),((Ke=_e.children)===null||Ke===void 0?void 0:Ke.length)&&_e.children.map(function(wn){return Fe(wn)})};(function Fe(_e){var Ke=_e.key;if(_e.type!=="group"){var bn=_t.find(function(Nn){return Nn.attrs.key===Ke});switch(_e.action){case"change":if(bn){var wn=_e.val.keyshape?ct.getOriginStyle():{};bn.attr(Object(at.a)(Object(at.a)({},wn),_e.val.attrs))}break;case"add":ae(_e.val);break;case"delete":je(_e.val);break;case"restructure":je(_e.formerTarget),ae(_e.nowTarget)}}_e.children&&_e.children.forEach(function(Nn){return Fe(Nn)})})(ee),f[W.id].push(Xt)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var ra={};function ia(kt){return ra[kt]||(ra[kt]=Object(n.I)(kt)),ra[kt]}var tc={defaultShapeType:"defaultType",className:null,getShape:function(f){return this[f]||this[this.defaultShapeType]||this["simple-circle"]},draw:function(f,u,I){var W=this.getShape(f),ct=W.draw(u,I);return W.afterDraw&&W.afterDraw(u,I,ct),ct},baseUpdate:function(f,u,I){var W=this.getShape(f);W.update&&W.update(u,I),W.afterUpdate&&W.afterUpdate(u,I)},setState:function(f,u,I,W){this.getShape(f).setState(u,I,W)},shouldUpdate:function(f){return!!this.getShape(f).update},getControlPoints:function(f,u){return this.getShape(f).getControlPoints(u)},getAnchorPoints:function(f,u){return this.getShape(f).getAnchorPoints(u)}},ya={options:{},draw:function(f,u){return this.drawShape(f,u)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(f){return f.controlPoints},getAnchorPoints:function(f){var u=this.options.anchorPoints;return f.anchorPoints||u}},_r=function(){function kt(){}return kt.registerFactory=function(f,u){var I=ia(f),W=tc,ct=Object(at.a)(Object(at.a)({},W),u);return kt[I]=ct,ct.className=I,ct},kt.getFactory=function(f){return kt[ia(f)]},kt.registerNode=function(f,u,I){var W,ct=kt.Node;if(typeof u=="string"||typeof u=="function"){var Ct=na(u);W=Object(at.a)(Object(at.a)({},ct.getShape("single-node")),Ct)}else if(u.jsx)Ct=na(u.jsx),W=Object(at.a)(Object(at.a)(Object(at.a)({},ct.getShape("single-node")),Ct),u);else{ct.getShape(I);var _t=I?ct.getShape(I):ya;W=Object(at.a)(Object(at.a)({},_t),u)}return W.type=f,W.itemType="node",ct[f]=W,W},kt.registerEdge=function(f,u,I){var W=kt.Edge,ct=I?W.getShape(I):ya,Ct=Object(at.a)(Object(at.a)({},ct),u);return Ct.type=f,Ct.itemType="edge",W[f]=Ct,Ct},kt.registerCombo=function(f,u,I){var W=kt.Combo,ct=I?W.getShape(I):ya,Ct=Object(at.a)(Object(at.a)({},ct),u);return Ct.type=f,Ct.itemType="combo",W[f]=Ct,Ct},kt}(),yr=_r;_r.registerFactory("node",{defaultShapeType:"circle"}),_r.registerFactory("edge",{defaultShapeType:"line"}),_r.registerFactory("combo",{defaultShapeType:"circle"});var Xc=["startArrow","endArrow"],pu=function(){function kt(f){this._cfg={},this.destroyed=!1;var u={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(u,this.getDefaultCfg(),f);var I=this.get("model"),W=I.id,ct=this.get("type");W||(W=Gr(ct),this.get("model").id=W),this.set("id",W);var Ct=f.group;Ct&&(Ct.set("item",this),Ct.set("id",W)),this.init(),this.draw();var _t=I.shape||I.type||(ct==="edge"?"line":"circle"),Xt=this.get("shapeFactory");if(Xt&&Xt[_t]){var ee=Xt[_t].options;if(ee&&ee.stateStyles){var ae=this.get("styles")||I.stateStyles;ae=Object(n.e)({},ee.stateStyles,ae),this.set("styles",ae)}}}return kt.prototype.calculateBBox=function(){var f=this.get("keyShape"),u=this.get("group"),I=zo(f,u);return I.x=I.minX,I.y=I.minY,I.width=I.maxX-I.minX,I.height=I.maxY-I.minY,I.centerX=(I.minX+I.maxX)/2,I.centerY=(I.minY+I.maxY)/2,I},kt.prototype.calculateCanvasBBox=function(){var f=this.get("keyShape"),u=this.get("group"),I=zo(f,u);return I.x=I.minX,I.y=I.minY,I.width=I.maxX-I.minX,I.height=I.maxY-I.minY,I.centerX=(I.minX+I.maxX)/2,I.centerY=(I.minY+I.maxY)/2,I},kt.prototype.drawInner=function(){var f=this.get("shapeFactory"),u=this.get("group"),I=this.get("model");u.clear();var W=I.visible;if(W===void 0||W||this.changeVisibility(W),f){this.updatePosition(I);var ct=this.getShapeCfg(I),Ct=ct.type,_t=f.draw(Ct,ct,u);_t&&(this.set("keyShape",_t),_t.set("isKeyShape",!0),_t.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",Ct),this.restoreStates(f,Ct)}},kt.prototype.setOriginStyle=function(f){var u=this.get("group").get("children"),I=this.getKeyShape(),W=this,ct=I.get("name");if(this.get("originStyle")){var Ct=this.getOriginStyle();ct&&!Ct[ct]&&(Ct[ct]={});var _t=this.getCurrentStatesStyle();Object(n.f)(u,function(ee){var ae=ee.get("name"),je=ee.attr();if(ae&&ae!==ct){var Fe=_t[ae];Ct[ae]||(Ct[ae]={}),Fe?Object.keys(je).forEach(function(bn){var wn=je[bn];wn!==Fe[bn]&&(Ct[ae][bn]=wn)}):Ct[ae]=Object(n.c)(je)}else{var _e=ee.attr(),Ke=Object(at.a)(Object(at.a)({},_t),_t[ct]);Object.keys(_e).forEach(function(bn){var wn=_e[bn];Object(n.w)(wn)&&Xc.indexOf(ae)===-1||Ke[bn]!==wn&&(ct?Ct[ct][bn]=wn:Ct[bn]=wn)})}}),Ct.path&&delete Ct.path,Ct.matrix&&delete Ct.matrix,W.set("originStyle",Ct)}else{var Xt={};Object(n.f)(u,function(ee){var ae=ee.get("type"),je=ee.get("name");if(je&&je!==ct)Xt[je]=ae!=="image"?Object(n.c)(ee.attr()):W.getShapeStyleByName(je);else{var Fe=W.getShapeStyleByName();if(Fe.path&&delete Fe.path,Fe.matrix&&delete Fe.matrix,ct)if(je)Xt[ct]=Fe;else{var _e=Gr("shape");ee.set("name",_e),Xt[_e]=ae!=="image"?Object(n.c)(ee.attr()):W.getShapeStyleByName(je)}else Object.assign(Xt,Fe)}}),W.set("originStyle",Xt)}},kt.prototype.restoreStates=function(f,u){var I=this,W=I.get("states");Object(n.f)(W,function(ct){f.setState(u,ct,!0,I)})},kt.prototype.init=function(){var f=yr.getFactory(this.get("type"));this.set("shapeFactory",f)},kt.prototype.get=function(f){return this._cfg[f]},kt.prototype.set=function(f,u){Object(n.w)(f)?this._cfg=Object(at.a)(Object(at.a)({},this._cfg),f):this._cfg[f]=u},kt.prototype.getDefaultCfg=function(){return{}},kt.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null)},kt.prototype.beforeDraw=function(){},kt.prototype.afterDraw=function(){},kt.prototype.afterUpdate=function(){},kt.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},kt.prototype.getShapeStyleByName=function(f){var u,I=this.get("group");if(u=f?I.find(function(ct){return ct.get("name")===f}):this.getKeyShape()){var W={};return Object(n.f)(u.attr(),function(ct,Ct){Ct!=="img"&&(W[Ct]=ct)}),W}return{}},kt.prototype.getShapeCfg=function(f){var u=this.get("styles");if(u){var I=f;return I.style=Object(at.a)(Object(at.a)({},u),f.style),I}return f},kt.prototype.getStateStyle=function(f){var u=this.get("styles");return u&&u[f]},kt.prototype.getOriginStyle=function(){return this.get("originStyle")},kt.prototype.getCurrentStatesStyle=function(){var f=this,u={},I=f.getStates();return I&&I.length?(Object(n.f)(f.getStates(),function(W){u=Object.assign(u,f.getStateStyle(W))}),u):this.getOriginStyle()},kt.prototype.setState=function(f,u){var I=this.get("states"),W=this.get("shapeFactory"),ct=f,Ct=f;Object(n.x)(u)&&(ct=f+":"+u,Ct=f+":");var _t=I;if(Object(n.n)(u)){var Xt=I.indexOf(Ct);if(u){if(Xt>-1)return;I.push(ct)}else Xt>-1&&I.splice(Xt,1)}else if(Object(n.x)(u)){var ee=I.filter(function(je){return je.includes(Ct)});ee.length>0&&this.clearStates(ee),(_t=_t.filter(function(je){return!je.includes(Ct)})).push(ct),this.set("states",_t)}if(W){var ae=this.get("model").type;W.setState(ae,f,u,this)}},kt.prototype.clearStates=function(f){var u=this,I=u.getStates(),W=u.get("shapeFactory"),ct=u.get("model").type;f||(f=I),Object(n.x)(f)&&(f=[f]);var Ct=I.filter(function(_t){return f.indexOf(_t)===-1});u.set("states",Ct),f.forEach(function(_t){W.setState(ct,_t,!1,u)})},kt.prototype.getContainer=function(){return this.get("group")},kt.prototype.getKeyShape=function(){return this.get("keyShape")},kt.prototype.getModel=function(){return this.get("model")},kt.prototype.getType=function(){return this.get("type")},kt.prototype.getID=function(){return this.get("id")},kt.prototype.isItem=function(){return!0},kt.prototype.getStates=function(){return this.get("states")},kt.prototype.hasState=function(f){return this.getStates().indexOf(f)>=0},kt.prototype.refresh=function(){var f=this.get("model");this.updatePosition(f),this.updateShape(),this.afterUpdate(),this.clearCache()},kt.prototype.isOnlyMove=function(f){return!1},kt.prototype.update=function(f,u){u===void 0&&(u=!1);var I=this.get("model"),W=I.visible,ct=f.visible;W!==ct&&ct!==void 0&&this.changeVisibility(ct);var Ct=I.x,_t=I.y;f.x=isNaN(f.x)?I.x:f.x,f.y=isNaN(f.y)?I.y:f.y;var Xt=this.get("styles");if(f.stateStyles){var ee=f.stateStyles;Object(n.A)(Xt,ee),delete f.stateStyles}Object.assign(I,f),u?this.updatePosition(f):(Ct===f.x&&_t===f.y||this.updatePosition(f),this.updateShape()),this.afterUpdate(),this.clearCache()},kt.prototype.updateShape=function(){var f=this.get("shapeFactory"),u=this.get("model"),I=u.type;if(f.shouldUpdate(I)&&I===this.get("currentShape")){var W=this.getShapeCfg(u);f.baseUpdate(I,W,this)}else this.draw();this.setOriginStyle(u),this.restoreStates(f,I)},kt.prototype.updatePosition=function(f){var u=this.get("model"),I=Object(n.s)(f.x)?u.x:f.x,W=Object(n.s)(f.y)?u.y:f.y,ct=this.get("group");Object(n.s)(I)||Object(n.s)(W)||(ct.resetMatrix(),he(ct,{x:I,y:W}),u.x=I,u.y=W,this.clearCache())},kt.prototype.getBBox=function(){var f=this.get("bboxCache");return f||(f=this.calculateBBox(),this.set("bboxCache",f)),f},kt.prototype.getCanvasBBox=function(){var f=this.get("bboxCanvasCache");return f||(f=this.calculateCanvasBBox(),this.set("bboxCanvasCache",f)),f},kt.prototype.toFront=function(){this.get("group").toFront()},kt.prototype.toBack=function(){this.get("group").toBack()},kt.prototype.show=function(){this.changeVisibility(!0)},kt.prototype.hide=function(){this.changeVisibility(!1)},kt.prototype.changeVisibility=function(f){var u=this.get("group");f?u.show():u.hide(),this.set("visible",f)},kt.prototype.isVisible=function(){return this.get("visible")},kt.prototype.enableCapture=function(f){var u=this.get("group");u&&u.set("capture",f)},kt.prototype.destroy=function(){if(!this.destroyed){var f=this.get("animate"),u=this.get("group");f&&u.stopAnimate(),this.clearCache(),u.remove(),this._cfg=null,this.destroyed=!0}},kt}(),ds={source:"start",target:"end"},ec=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return Object(at.b)(f,kt),f.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},f.prototype.setEnd=function(u,I){var W=ds[u]+"Point",ct=u+"Node",Ct=this.get(ct);Ct&&!Ct.destroyed&&Ct.removeEdge(this),Object(n.w)(I)?(this.set(W,I),this.set(ct,null)):(I.addEdge(this),this.set(ct,I),this.set(W,null))},f.prototype.getLinkPoint=function(u,I,W){var ct=ds[u]+"Point",Ct=u+"Node",_t=this.get(ct);if(!_t){var Xt=this.get(Ct),ee=u+"Anchor",ae=this.getPrePoint(u,W),je=I[ee];Object(n.s)(je)||(_t=Xt.getLinkPointByAnchor(je)),_t=_t||Xt.getLinkPoint(ae),Object(n.s)(_t.index)||this.set(u+"AnchorIndex",_t.index)}return _t},f.prototype.getPrePoint=function(u,I){if(I&&I.length)return I[u==="source"?0:I.length-1];var W=u==="source"?"target":"source";return this.getEndPoint(W)},f.prototype.getEndPoint=function(u){var I=u+"Node",W=ds[u]+"Point",ct=this.get(I);return ct?ct.get("model"):this.get(W)},f.prototype.getControlPointsByCenter=function(u){var I=this.getEndPoint("source"),W=this.getEndPoint("target"),ct=this.get("shapeFactory"),Ct=u.type;return ct.getControlPoints(Ct,{startPoint:I,endPoint:W})},f.prototype.getEndCenter=function(u){var I=u+"Node",W=ds[u]+"Point",ct=this.get(I);if(ct){var Ct=ct.getBBox();return{x:Ct.centerX,y:Ct.centerY}}return this.get(W)},f.prototype.init=function(){kt.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},f.prototype.getShapeCfg=function(u){var I=this.get("linkCenter"),W=kt.prototype.getShapeCfg.call(this,u);if(I)W.startPoint=this.getEndCenter("source"),W.endPoint=this.getEndCenter("target");else{var ct=W.controlPoints||this.getControlPointsByCenter(W);W.startPoint=this.getLinkPoint("source",u,ct),W.endPoint=this.getLinkPoint("target",u,ct)}return W.sourceNode=this.get("sourceNode"),W.targetNode=this.get("targetNode"),W},f.prototype.getModel=function(){var u=this.get("model"),I=this.get("sourceNode"),W=this.get("targetNode");return I?delete u.sourceNode:u.source=this.get("startPoint"),W?delete u.targetNode:u.target=this.get("endPoint"),Object(n.x)(u.source)||Object(n.w)(u.source)||(u.source=u.source.getID()),Object(n.x)(u.target)||Object(n.w)(u.target)||(u.target=u.target.getID()),u},f.prototype.setSource=function(u){this.setEnd("source",u),this.set("source",u)},f.prototype.setTarget=function(u){this.setEnd("target",u),this.set("target",u)},f.prototype.getSource=function(){return this.get("source")},f.prototype.getTarget=function(){return this.get("target")},f.prototype.updatePosition=function(){},f.prototype.update=function(u,I){I===void 0&&(I=!1);var W=this.get("model"),ct=W.visible,Ct=u.visible;ct!==Ct&&Ct!==void 0&&this.changeVisibility(Ct);var _t=this.get("styles");if(u.stateStyles){var Xt=u.stateStyles;Object(n.A)(_t,Xt),delete u.stateStyles}Object.assign(W,u),this.updateShape(),this.afterUpdate(),this.clearCache()},f.prototype.destroy=function(){var u=this.get("sourceNode"),I=this.get("targetNode");u&&!u.destroyed&&u.removeEdge(this),I&&!I.destroyed&&I.removeEdge(this),kt.prototype.destroy.call(this)},f}(pu),Qo=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return Object(at.b)(f,kt),f.prototype.getNearestPoint=function(u,I){for(var W=0,ct=u[0],Ct=$t(u[0],I),_t=0;_t<u.length;_t++){var Xt=u[_t],ee=$t(Xt,I);ee<Ct&&(ct=Xt,Ct=ee,W=_t)}return ct.anchorIndex=W,ct},f.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},f.prototype.getEdges=function(){return this.get("edges")},f.prototype.getInEdges=function(){var u=this;return this.get("edges").filter(function(I){return I.get("target")===u})},f.prototype.getOutEdges=function(){var u=this;return this.get("edges").filter(function(I){return I.get("source")===u})},f.prototype.getNeighbors=function(u){var I=this,W=this.get("edges");return u==="target"?W.filter(function(ct){return ct.getSource()===I}).map(function(ct){return ct.getTarget()}):u==="source"?W.filter(function(ct){return ct.getTarget()===I}).map(function(ct){return ct.getSource()}):W.map(function(ct){return ct.getSource()===I?ct.getTarget():ct.getSource()})},f.prototype.getLinkPointByAnchor=function(u){return this.getAnchorPoints()[u]},f.prototype.getLinkPoint=function(u){var I,W,ct=this.get("keyShape").get("type"),Ct=this.get("type"),_t=this.getBBox();Ct==="combo"?(I=_t.centerX||(_t.maxX+_t.minX)/2,W=_t.centerY||(_t.maxY+_t.minY)/2):(I=_t.centerX,W=_t.centerY);var Xt,ee=this.getAnchorPoints();switch(ct){case"circle":Xt=_n({x:I,y:W,r:_t.width/2},u);break;case"ellipse":Xt=Ze({x:I,y:W,rx:_t.width/2,ry:_t.height/2},u);break;default:Xt=zn(_t,u)}var ae=Xt;return ee.length&&(ae||(ae=u),ae=this.getNearestPoint(ee,ae)),ae||(ae={x:I,y:W}),ae},f.prototype.getAnchorPoints=function(){var u=this.get("anchorPointsCache");if(!u){u=[];var I=this.get("shapeFactory"),W=this.getBBox(),ct=this.get("model"),Ct=this.getShapeCfg(ct),_t=ct.type,Xt=I.getAnchorPoints(_t,Ct)||[];Object(n.f)(Xt,function(ee,ae){var je={x:W.minX+ee[0]*W.width,y:W.minY+ee[1]*W.height,anchorIndex:ae};u.push(je)}),this.set("anchorPointsCache",u)}return u},f.prototype.addEdge=function(u){this.get("edges").push(u)},f.prototype.lock=function(){this.set("locked",!0)},f.prototype.unlock=function(){this.set("locked",!1)},f.prototype.hasLocked=function(){return this.get("locked")},f.prototype.removeEdge=function(u){var I=this.getEdges(),W=I.indexOf(u);W>-1&&I.splice(W,1)},f.prototype.clearCache=function(){this.set("bboxCache",null),this.set("anchorPointsCache",null)},f.prototype.isOnlyMove=function(u){if(!u)return!1;var I=!Object(n.s)(u.x),W=!Object(n.s)(u.y),ct=Object.keys(u);return ct.length===1&&(I||W)||ct.length===2&&I&&W},f}(pu),nc=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return Object(at.b)(f,kt),f.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},f.prototype.getShapeCfg=function(u){var I=this.get("styles"),W=this.get("bbox");if(I&&W){var ct=u,Ct={r:Math.hypot(W.height,W.width)/2||In.defaultCombo.size[0]/2,width:W.width||In.defaultCombo.size[0],height:W.height||In.defaultCombo.size[1]};ct.style=Object(at.a)(Object(at.a)(Object(at.a)({},I),u.style),Ct);var _t=u.padding||In.defaultCombo.padding;return Object(n.t)(_t)?(Ct.r+=_t,Ct.width+=2*_t,Ct.height+=2*_t):(Ct.r+=_t[0],Ct.width+=_t[1]+_t[3]||2*_t[1],Ct.height+=_t[0]+_t[2]||2*_t[0]),this.set("sizeCache",Ct),ct}return u},f.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var u=this.get("keyShape"),I=this.get("group"),W=zo(u,I);W.centerX=(W.minX+W.maxX)/2,W.centerY=(W.minY+W.maxY)/2;var ct=this.get("sizeCache"),Ct=this.get("bboxCache")||{},_t=Ct.x,Xt=Ct.x;return ct?(u.get("type")==="circle"?(W.width=2*ct.r,W.height=2*ct.r):(W.width=ct.width,W.height=ct.height),W.minX=W.centerX-W.width/2,W.minY=W.centerY-W.height/2,W.maxX=W.centerX+W.width/2,W.maxY=W.centerY+W.height/2):(W.width=W.maxX-W.minX,W.height=W.maxY-W.minY,W.centerX=(W.minX+W.maxX)/2,W.centerY=(W.minY+W.maxY)/2),W.x=W.minX,W.y=W.minY,W.x===_t&&W.y===Xt||this.set("anchorPointsCache",null),W}},f.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},f.prototype.getNodes=function(){return this.get("nodes")},f.prototype.getCombos=function(){return this.get("combos")},f.prototype.addChild=function(u){switch(u.getType()){case"node":this.addNode(u);break;case"combo":this.addCombo(u);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},f.prototype.addCombo=function(u){return this.get("combos").push(u),!0},f.prototype.addNode=function(u){return this.get("nodes").push(u),!0},f.prototype.removeChild=function(u){switch(u.getType()){case"node":this.removeNode(u);break;case"combo":this.removeCombo(u);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},f.prototype.removeCombo=function(u){if(u){var I=this.getCombos(),W=I.indexOf(u);return W>-1&&(I.splice(W,1),!0)}},f.prototype.removeNode=function(u){if(u){var I=this.getNodes(),W=I.indexOf(u);return W>-1&&(I.splice(W,1),!0)}},f.prototype.isOnlyMove=function(u){return!1},f.prototype.getBBox=function(){return this.set("bboxCanvasCache",null),this.calculateCanvasBBox()},f.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null),this.set("anchorPointsCache",null)},f.prototype.destroy=function(){if(!this.destroyed){var u=this.get("animate"),I=this.get("group");u&&I.stopAnimate(),this.clearCache(),this.set("sizeCache",null),this.set("bbox",null),I.remove(),this._cfg=null,this.destroyed=!0}},f}(Qo),Vo=function(){function kt(f){this.graph=f,this.destroyed=!1}return kt.prototype.addItem=function(f,u){var I=this,W=this.graph,ct=f==="vedge"?"edge":f,Ct=W.get(ct+"Group")||W.get("group"),_t=Object(n.I)(ct),Xt=null,ee=W.get(ct+Object(n.I)("stateStyles"))||{},ae=W.get("default"+_t);u.stateStyles&&(ee=u.stateStyles),ae&&Object(n.f)(ae,function(Gn,sr){Object(n.v)(Gn)&&!Object(n.m)(Gn)?u[sr]=Object(n.e)({},Gn,u[sr]):Object(n.m)(Gn)?u[sr]=u[sr]||Object(n.c)(ae[sr]):u[sr]=u[sr]||ae[sr]});var je=W.get(ct+"Mapper");if(je){var Fe=je(u);Fe.stateStyles&&(ee=Fe.stateStyles,delete Fe.stateStyles),Object(n.f)(Fe,function(Gn,sr){Object(n.v)(Gn)&&!Object(n.m)(Gn)?u[sr]=Object(n.e)({},u[sr],Gn):u[sr]=Fe[sr]||u[sr]})}if(W.emit("beforeadditem",{type:f,model:u}),f==="edge"||f==="vedge"){var _e=void 0,Ke=void 0;if(_e=u.source,Ke=u.target,_e&&Object(n.x)(_e)&&(_e=W.findById(_e)),Ke&&Object(n.x)(Ke)&&(Ke=W.findById(Ke)),!_e||!Ke)return void console.warn("The source or target node of edge "+u.id+" does not exist!");_e.getType&&_e.getType()==="combo"&&(u.isComboEdge=!0),Ke.getType&&Ke.getType()==="combo"&&(u.isComboEdge=!0),Xt=new ec({model:u,source:_e,target:Ke,styles:ee,linkCenter:W.get("linkCenter"),group:Ct.addGroup()})}else if(f==="node")Xt=new Qo({model:u,styles:ee,group:Ct.addGroup()});else if(f==="combo"){var bn=u.children,wn=Mi(bn,W);u.x=wn.x||u.x||100*Math.random(),u.y=wn.y||u.y||100*Math.random();var Nn=Ct.addGroup();Nn.setZIndex(u.depth);var Bn=(Xt=new nc({model:u,styles:ee,bbox:wn,group:Nn})).getModel();(bn||[]).forEach(function(Gn){var sr=W.findById(Gn.id);Xt.addChild(sr),Gn.depth=Bn.depth+2}),u.collapsed&&setTimeout(function(){W.collapseCombo(Xt),I.updateCombo(Xt,[])},250)}if(Xt)return W.get(f+"s").push(Xt),W.get("itemMap")[Xt.get("id")]=Xt,W.emit("afteradditem",{item:Xt,model:u}),Xt},kt.prototype.updateItem=function(f,u){var I,W,ct=this.graph;if(Object(n.x)(f)&&(f=ct.findById(f)),f&&!f.destroyed){var Ct="";f.getType&&(Ct=f.getType());var _t=ct.get(Ct+"Mapper"),Xt=f.getModel(),ee=f.isOnlyMove(u);if(_t){var ae=_t(Object(n.e)({},Xt,u)),je=Object(n.e)({},Xt,ae,u);ae.stateStyles&&(f.set("styles",je.stateStyles),delete je.stateStyles),Object(n.f)(je,function(Bn,Gn){u[Gn]=Bn})}else Object(n.f)(u,function(Bn,Gn){Xt[Gn]&&Object(n.v)(Bn)&&!Object(n.m)(Bn)&&(u[Gn]=Object(at.a)(Object(at.a)({},Xt[Gn]),u[Gn]))});if(ct.emit("beforeupdateitem",{item:f,cfg:u}),Ct==="edge"){if(u.source){var Fe=u.source;Object(n.x)(Fe)&&(Fe=ct.findById(Fe)),f.setSource(Fe)}if(u.target){var _e=u.target;Object(n.x)(_e)&&(_e=ct.findById(_e)),f.setTarget(_e)}f.update(u)}if(Ct==="node"||Ct==="combo"){f.update(u,ee);var Ke=f.getEdges(),bn=hu(u);if(bn&&Ct==="node")Object(n.f)(Ke,function(Bn){Bn.refresh()});else if(bn&&Ct==="combo"){var wn=f.get("shapeFactory"),Nn=Xt.type||"circle";(Xt.animate===void 0||u.animate===void 0?(W=(I=wn[Nn])===null||I===void 0?void 0:I.options)===null||W===void 0?void 0:W.animate:Xt.animate||u.animate)?setTimeout(function(){if(f&&!f.destroyed){var Bn=f.getKeyShape();Bn&&!Bn.destroyed&&Object(n.f)(Ke,function(Gn){Gn&&!Gn.destroyed&&Gn.refresh()})}},201):Object(n.f)(Ke,function(Bn){Bn.refresh()})}}ct.emit("afterupdateitem",{item:f,cfg:u})}},kt.prototype.updateCombo=function(f,u){var I,W,ct=this.graph;if(Object(n.x)(f)&&(f=ct.findById(f)),f&&!f.destroyed){var Ct=Mi(u,ct);f.set("bbox",Ct),f.update({x:Ct.x,y:Ct.y});var _t=f.getEdges()||[],Xt=_t.length,ee=f.getModel(),ae=f.get("shapeFactory"),je=ee.type||"circle";if(ee.animate===void 0?(W=(I=ae[je])===null||I===void 0?void 0:I.options)===null||W===void 0?void 0:W.animate:ee.animate)setTimeout(function(){if(f&&!f.destroyed){var Ke=f.getKeyShape();if(Ke&&!Ke.destroyed)for(var bn=0;bn<Xt;bn++){var wn=_t[bn];wn&&!wn.destroyed&&wn.refresh()}}},201);else for(var Fe=0;Fe<Xt;Fe++){var _e=_t[Fe];_e&&!_e.destroyed&&_e.refresh()}}},kt.prototype.collapseCombo=function(f){var u=this.graph;Object(n.x)(f)&&(f=u.findById(f));var I=f.getChildren();I.nodes.forEach(function(W){u.hideItem(W)}),I.combos.forEach(function(W){u.hideItem(W)})},kt.prototype.expandCombo=function(f){var u=this.graph;Object(n.x)(f)&&(f=u.findById(f));var I=f.getChildren();I.nodes.forEach(function(W){u.showItem(W)}),I.combos.forEach(function(W){W.getModel().collapsed?W.show():u.showItem(W)})},kt.prototype.removeItem=function(f){var u=this,I=this.graph;if(Object(n.x)(f)&&(f=I.findById(f)),f&&!f.destroyed){var W=Object(n.c)(f.getModel());I.emit("beforeremoveitem",{item:W});var ct="";f.getType&&(ct=f.getType());var Ct=I.get(ct+"s"),_t=Ct.indexOf(f);if(_t>-1&&Ct.splice(_t,1),ct==="edge"){var Xt=I.get("v"+ct+"s"),ee=Xt.indexOf(f);ee>-1&&Xt.splice(ee,1)}var ae=f.get("id");delete I.get("itemMap")[ae];var je=I.get("comboTrees"),Fe=f.get("id");if(ct==="node"){var _e=f.getModel().comboId;if(je){var Ke=je,bn=!1;je.forEach(function(ur){bn||di(ur,function(Or){if(Or.id===Fe&&Ke){var ei=Ke.indexOf(Or);return Ke.splice(ei,1),bn=!0,!1}return Ke=Or.children,!0})})}for(var wn=(sr=f.getEdges()).length-1;wn>=0;wn--)I.removeItem(sr[wn],!1);_e&&I.updateCombo(_e)}else if(ct==="combo"){var Nn,Bn=f.getModel().parentId,Gn=!1;(je||[]).forEach(function(ur){Gn||di(ur,function(Or){return Or.id!==Fe||(Nn=Or,Gn=!0,!1)})}),Nn.removed=!0,Nn&&Nn.children&&Nn.children.forEach(function(ur){u.removeItem(ur.id)});var sr;for(wn=(sr=f.getEdges()).length;wn>=0;wn--)I.removeItem(sr[wn],!1);Bn&&I.updateCombo(Bn)}f.destroy(),I.emit("afterremoveitem",{item:W})}},kt.prototype.setItemState=function(f,u,I){var W=this.graph,ct=u;Object(n.x)(I)&&(ct=u+":"+I),f.hasState(ct)===I&&I||Object(n.x)(I)&&f.hasState(ct)||(W.emit("beforeitemstatechange",{item:f,state:ct,enabled:I}),f.setState(u,I),W.autoPaint(),W.emit("afteritemstatechange",{item:f,state:ct,enabled:I}))},kt.prototype.priorityState=function(f,u){var I=this.graph,W=f;Object(n.x)(f)&&(W=I.findById(f)),this.setItemState(W,u,!1),this.setItemState(W,u,!0)},kt.prototype.clearItemStates=function(f,u){var I=this.graph;Object(n.x)(f)&&(f=I.findById(f)),I.emit("beforeitemstatesclear",{item:f,states:u}),f.clearStates(u),I.emit("afteritemstatesclear",{item:f,states:u})},kt.prototype.refreshItem=function(f){var u=this.graph;Object(n.x)(f)&&(f=u.findById(f)),u.emit("beforeitemrefresh",{item:f}),f.refresh(),u.emit("afteritemrefresh",{item:f})},kt.prototype.addCombos=function(f,u){var I=this,W=this.graph;(f||[]).forEach(function(Ct){ea(Ct,function(_t){var Xt;return u.forEach(function(ee){ee.id===_t.id&&(ee.children=_t.children,ee.depth=_t.depth,Xt=ee)}),Xt&&I.addItem("combo",Xt),!0})});var ct=W.get("comboGroup");ct&&ct.sort()},kt.prototype.changeItemVisibility=function(f,u){var I=this,W=this.graph;if(Object(n.x)(f)&&(f=W.findById(f)),f){if(W.emit("beforeitemvisibilitychange",{item:f,visible:u}),f.changeVisibility(u),f.getType&&f.getType()==="node"){var ct=f.getEdges();Object(n.f)(ct,function(ae){(!u||ae.get("source").isVisible()&&ae.get("target").isVisible())&&I.changeItemVisibility(ae,u)})}else if(f.getType&&f.getType()==="combo"){var Ct=W.get("comboTrees"),_t=f.get("id"),Xt=[],ee=!1;(Ct||[]).forEach(function(ae){ee||ae.children&&ae.children.length!==0&&di(ae,function(je){return je.id!==_t||(Xt=je.children,ee=!0,!1)})}),Xt&&Xt.forEach(function(ae){var je=W.findById(ae.id);I.changeItemVisibility(je,u)}),ct=f.getEdges(),Object(n.f)(ct,function(ae){(!u||ae.get("source").isVisible()&&ae.get("target").isVisible())&&I.changeItemVisibility(ae,u)})}return W.emit("afteritemvisibilitychange",{item:f,visible:u}),f}console.warn("The item to be shown or hidden does not exist!")},kt.prototype.destroy=function(){this.graph=null,this.destroyed=!0},kt}(),Aa=null,To=function(){function kt(f){this.graph=f,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return kt.checkCache=function(f,u,I){if(I[u]){var W=I[u].indexOf(f);W>=0&&I[u].splice(W,1)}},kt.cacheState=function(f,u,I){I[u]||(I[u]=[]),I[u].push(f)},kt.prototype.updateState=function(f,u,I){var W=this,ct=kt.checkCache,Ct=kt.cacheState;if(!f.destroyed){var _t=this.cachedStates,Xt=_t.enabled,ee=_t.disabled;I?(ct(f,u,ee),Ct(f,u,Xt)):(ct(f,u,Xt),Ct(f,u,ee)),Aa&&clearTimeout(Aa),Aa=setTimeout(function(){Aa=null,W.updateGraphStates()},16)}},kt.prototype.updateStates=function(f,u,I){var W=this;Object(n.x)(u)?this.updateState(f,u,I):u.forEach(function(ct){W.updateState(f,ct,I)})},kt.prototype.updateGraphStates=function(){var f=this.graph.get("states"),u=this.cachedStates;Object(n.f)(u.disabled,function(I,W){f[W]&&(f[W]=f[W].filter(function(ct){return I.indexOf(ct)<0&&!I.destroyed}))}),Object(n.f)(u.enabled,function(I,W){if(f[W]){var ct={};f[W].forEach(function(Ct){Ct.destroyed||(ct[Ct.get("id")]=!0)}),I.forEach(function(Ct){if(!Ct.destroyed){var _t=Ct.get("id");ct[_t]||(ct[_t]=!0,f[W].push(Ct))}})}else f[W]=I}),this.graph.emit("graphstatechange",{states:f}),this.cachedStates={enabled:{},disabled:{}}},kt.prototype.destroy=function(){this.graph=null,this.cachedStates=null,Aa&&clearTimeout(Aa),Aa=null,this.destroyed=!0},kt}(),vs=function(f,u){return f&&u?f.replace(/\\?\{([^{}]+)\}/g,function(I,W){if(I.charAt(0)==="\\")return I.slice(1);var ct=u[W];return ct===0&&(ct="0"),ct||""}):f},Ns=function(f){var u=[];if(f.length<2)throw new Error("point length must largn than 2, now it's "+f.length);for(var I=0,W=f;I<W.length;I++){var ct=W[I],Ct=ct.x,_t=ct.y;u.push(Ct),u.push(_t)}var Xt=Object(F.a)(u);return Xt.unshift(["M",f[0].x,f[0].y]),Xt},ts=function(f,u,I,W){I===void 0&&(I=0),W===void 0&&(W=0);var ct={x:(1-I)*f.x+I*u.x,y:(1-I)*f.y+I*u.y},Ct=[0,0];Yt.c.normalize(Ct,[u.x-f.x,u.y-f.y]),Ct&&(Ct[0]||Ct[1])||(Ct=[0,0]);var _t=[-Ct[1]*W,Ct[0]*W];return ct.x+=_t[0],ct.y+=_t[1],ct},Ls=function(f,u){var I=f.length;if(!I)return"";for(var W="",ct=0;ct<I;ct++){var Ct=f[ct];W+=vs(ct===0?"M{x} {y}":"L{x} {y}",Ct)}return u&&(W+="Z"),W},Ho=function(f){var u=[];return f.forEach(function(I){if(I[0]!=="A")for(var W=1;W<I.length;W+=2)u.push([I[W],I[W+1]]);else{var ct=I.length;u.push([I[ct-2],I[ct-1]])}}),u},es=function(f){if(f.length<2)throw new Error("point length must largn than 2, now it's "+f.length);var u=f[0],I=f[1],W=f[f.length-1],ct=f[f.length-2];f.unshift(W),f.unshift(ct),f.push(u),f.push(I);for(var Ct=[],_t=1;_t<f.length-2;_t+=1){var Xt=f[_t-1].x,ee=f[_t-1].y,ae=f[_t].x,je=f[_t].y,Fe=f[_t+1].x,_e=f[_t+1].y,Ke=ae+(Fe-Xt)/6,bn=je+(_e-ee)/6,wn=Fe-((_t!==f.length-2?f[_t+2].x:Fe)-ae)/6,Nn=_e-((_t!==f.length-2?f[_t+2].y:_e)-je)/6;Ct.push(["C",Ke,bn,wn,Nn,Fe,_e])}return Ct.unshift(["M",W.x,W.y]),Ct},Bs=function(f,u){return Yt.c.scale([0,0],Yt.c.normalize([0,0],f),u)},gu=function(f,u){var I=[f[1]-u[1],u[0]-f[0]],W=Math.sqrt(I[0]*I[0]+I[1]*I[1]);if(W===0)throw new Error("p0 should not be equal to p1");return[I[0]/W,I[1]/W]},Do=function(f,u){return[u[0]-f[0],u[1]-f[1]]};function ps(kt,f){if(!kt||kt.length<1)return"";if(kt.length===1)return function(Xt){var ee=[Xt[0][0],Xt[0][1]-f],ae=[Xt[0][0],Xt[0][1]+f];return"M "+ee+" A "+f+","+f+",0,0,0,"+ae+" A "+f+","+f+",0,0,0,"+ee}(kt);if(kt.length===2)return function(Xt){var ee=Yt.c.scale([0,0],gu(Xt[0],Xt[1]),f),ae=Yt.c.scale([0,0],ee,-1),je=Yt.c.add([0,0],Xt[0],ee),Fe=Yt.c.add([0,0],Xt[1],ee),_e=Yt.c.add([0,0],Xt[1],ae),Ke=Yt.c.add([0,0],Xt[0],ae);return"M "+je+" L "+Fe+" A "+[f,f,"0,0,0",_e].join(",")+" L "+Ke+" A "+[f,f,"0,0,0",je].join(",")}(kt);for(var u=new Array(kt.length),I=0;I<u.length;++I){var W=I===0?kt[kt.length-1]:kt[I-1],ct=kt[I],Ct=Yt.c.scale([0,0],gu(W,ct),f);u[I]=[Yt.c.add([0,0],W,Ct),Yt.c.add([0,0],ct,Ct)]}var _t="A "+[f,f,"0,0,0,"].join(",");return(u=u.map(function(Xt,ee){var ae="";return ee===0&&(ae="M "+u[u.length-1][1]+" "),ae+=_t+Xt[0]+" L "+Xt[1]})).join(" ")}function yu(kt,f){var u,I,W,ct=kt.length;if(!kt||ct<1)return"";if(ct===1)return I=[(u=kt)[0][0],u[0][1]-f],W=[u[0][0],u[0][1]+f],"M "+I+" A "+[f,f,"0,0,0",W].join(",")+" A "+[f,f,"0,0,0",I].join(",");if(ct===2)return function(ae){var je=Do(ae[0],ae[1]),Fe=Bs(je,f),_e=Yt.c.add([0,0],ae[0],Yt.c.scale([0,0],Fe,-1)),Ke=Yt.c.add([0,0],ae[1],Fe),bn=1.2*f,wn=Bs(Yt.c.normalize([0,0],je),bn),Nn=Yt.c.scale([0,0],wn,-1),Bn=Yt.c.add([0,0],_e,Nn),Gn=Yt.c.add([0,0],Ke,Nn),sr=Yt.c.add([0,0],_e,wn);return"M "+_e+" C "+[Bn,Gn,Ke].join(",")+" S "+[sr,_e].join(",")+" Z"}(kt);for(var Ct=kt.map(function(ae,je){var Fe=kt[(je+1)%ct];return{p:ae,v:Yt.c.normalize([0,0],Do(ae,Fe))}}),_t=0;_t<Ct.length;++_t){var Xt=_t>0?_t-1:ct-1,ee=Yt.c.normalize([0,0],Yt.c.add([0,0],Ct[Xt].v,Yt.c.scale([0,0],Ct[_t].v,-1)));Ct[_t].p=Yt.c.add([0,0],Ct[_t].p,Yt.c.scale([0,0],ee,f))}return Ct.map(function(ae){var je=ae.p;return{x:je[0],y:je[1]}})}var Fs=function(f,u,I){return(f.y-I.y)*(u.x-I.x)-(f.x-I.x)*(u.y-I.y)},mr=function(f){var u=f.map(function(Ct){return{x:Ct.getModel().x,y:Ct.getModel().y}});if(u.sort(function(Ct,_t){return Ct.x===_t.x?Ct.y-_t.y:Ct.x-_t.x}),u.length===1)return u;for(var I=[],W=0;W<u.length;W++){for(;I.length>=2&&Fs(I[I.length-2],I[I.length-1],u[W])<=0;)I.pop();I.push(u[W])}var ct=[];for(W=u.length-1;W>=0;W--){for(;ct.length>=2&&Fs(ct[ct.length-2],ct[ct.length-1],u[W])<=0;)ct.pop();ct.push(u[W])}return ct.pop(),I.pop(),I.concat(ct)},Gs={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function Eo(kt,f,u){var I=!1,W=function(Xt,ee){return f.cells[Xt+ee*f.width]},ct=function(Xt,ee){var ae=0;return W(Xt-1,ee-1)>=u&&(ae+=1),W(Xt,ee-1)>u&&(ae+=2),W(Xt-1,ee)>u&&(ae+=4),W(Xt,ee)>u&&(ae+=8),ae},Ct=function(Xt,ee){for(var ae,je,Fe=Xt,_e=ee,Ke=0;Ke<f.width*f.height;Ke++){if(ae=Fe,je=_e,kt.findIndex(function(wn){return wn.x===Fe&&wn.y===_e})>-1){if(kt[0].x===Fe&&kt[0].y===_e)return!0}else kt.push({x:Fe,y:_e});var bn=ct(Fe,_e);switch(bn){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:Fe++;break;case 12:case 14:case 4:Fe--;break;case 6:ae===0&&(je===-1?Fe-=1:Fe+=1);break;case 1:case 13:case 5:_e--;break;case 9:ae===1&&(je===0?_e-=1:_e+=1);break;case 10:case 8:case 11:_e++;break;default:return console.warn("Marching squares invalid state: "+bn),!0}}};this.march=function(){for(var _t=0;_t<f.width&&!I;_t+=1)for(var Xt=0;Xt<f.height&&!I;Xt+=1)W(_t,Xt)>u&&ct(_t,Xt)!==15&&(I=Ct(_t,Xt));return I}}var ma=function(f,u){var I=Number.POSITIVE_INFINITY,W=null;return f.forEach(function(ct){var Ct=Pe(ct,u);Ct>=0&&Ct<I&&(W=ct,I=Ct)}),W};function mu(kt,f,u,I,W){var ct=function(Ct,_t,Xt){var ee=null,ae=Number.POSITIVE_INFINITY;return _t.forEach(function(je){var Fe={x:Ct.getModel().x,y:Ct.getModel().y},_e={x:je.getModel().x,y:je.getModel().y},Ke=Le(Fe,_e),bn=new hn(Fe.x,Fe.y,_e.x,_e.y),wn=Xt.reduce(function(Nn,Bn){return Pe(Bn,bn)>0?Nn+1:Nn},0);Ke*Math.pow(wn+1,2)<ae&&(ee=je,ae=Ke*Math.pow(wn+1,2))}),ee}(kt,u,f);return ct===null?[]:function(Ct){for(var _t=[];Ct.length>0;){var Xt=Ct.pop();if(Ct.length===0){_t.push(Xt);break}var ee=Ct.pop(),ae=new hn(Xt.x1,Xt.y1,ee.x2,ee.y2);ma(f,ae)?(_t.push(Xt),Ct.push(ee)):Ct.push(ae)}return _t}(function(Ct,_t,Xt,ee){var ae=[],je=[];je.push(Ct);for(var Fe=!0,_e=0,Ke=function(Bn,Gn){var sr=!1;return Gn.forEach(function(ur){sr||(en(Bn,{x:ur.x1,y:ur.y1})||en(Bn,{x:ur.x2,y:ur.y2}))&&(sr=!0)}),sr},bn=function(Bn,Gn){for(var sr=0,ur=Gn;sr<ur.length;sr++){var Or=ur[sr].getBBox(),ei=[[Or.x,Or.y],[Or.x+Or.width,Or.y],[Or.x,Or.y+Or.height],[Or.x+Or.width,Or.y+Or.height]];if(tn(ei,Bn.x,Bn.y))return!0}return!1};Fe&&_e<Xt;){Fe=!1;for(var wn=function(){var Bn=je.pop(),Gn=ma(_t,Bn);if(Gn){var sr=Sn(Gn,Bn),ur=sr[0];if(sr[1]===2){var Or=function(Ci){for(var Rr=ee,yi=fe(Gn,Rr,ur,Ci),oo=Ke(yi,je)||Ke(yi,ae),so=bn(yi,_t);!oo&&so&&Rr>=1;)yi=fe(Gn,Rr/=1.5,ur,Ci),oo=Ke(yi,je)||Ke(yi,ae),so=bn(yi,_t);!yi||oo||Ci&&so||(je.push(new hn(Bn.x1,Bn.y1,yi.x,yi.y)),je.push(new hn(yi.x,yi.y,Bn.x2,Bn.y2)),Fe=!0)};Or(!0),Fe||Or(!1)}}Fe||ae.push(Bn),_e+=1};!Fe&&je.length;)wn()}for(;je.length;)ae.push(je.pop());return ae}(new hn(kt.getModel().x,kt.getModel().y,ct.getModel().x,ct.getModel().y),f,I,W))}var bu=function(f,u,I){var W=Object.assign(Gs,I),ct=le(f.map(function(Or){return{x:Or.getModel().x,y:Or.getModel().y}}));f=f.sort(function(Or,ei){return Le({x:Or.getModel().x,y:Or.getModel().y},ct)-Le({x:ei.getModel().x,y:ei.getModel().y},ct)});var Ct=[],_t=[];f.forEach(function(Or){mu(Or,u,Ct,W.maxRoutingIterations,W.morphBuffer).forEach(function(ei){_t.push(ei)}),Ct.push(Or)});for(var Xt,ee,ae,je,Fe,_e=function(Or,ei,Ci){var Rr={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},yi=[];Or.forEach(function(lo){yi.push(lo.getBBox())}),ei.forEach(function(lo){yi.push(lo.getBBox())});for(var oo=0,so=yi;oo<so.length;oo++){var co=so[oo];Rr.minX=(co.minX<Rr.minX?co.minX:Rr.minX)-Ci,Rr.minY=(co.minY<Rr.minY?co.minY:Rr.minY)-Ci,Rr.maxX=(co.maxX>Rr.maxX?co.maxX:Rr.maxX)+Ci,Rr.maxY=(co.maxY>Rr.maxY?co.maxY:Rr.maxY)+Ci}return Rr.width=Rr.maxX-Rr.minX,Rr.height=Rr.maxY-Rr.minY,Rr.x=Rr.minX,Rr.y=Rr.minY,Rr}(f,_t,W.nodeR0),Ke=(Xt=_e.width,ee=_e.height,ae=W.pixelGroupSize,je=Math.ceil(Xt/ae),Fe=Math.ceil(ee/ae),{cells:new Float32Array(Math.max(0,je*Fe)).fill(0),width:je,height:Fe}),bn=[],wn=[],Nn=0;Nn<W.maxMarchingIterations;Nn++)if(Jn(f,u,_t,_e,Ke,W),wn=[],new Eo(bn=[],Ke,W.threshold).march()){var Bn=bn.map(function(Or){return{x:Math.round(Or.x*W.pixelGroupSize+_e.minX),y:Math.round(Or.y*W.pixelGroupSize+_e.minY)}});if(Bn){var Gn=Bn.length;if(W.skip>1)for(Gn=Math.floor(Bn.length/W.skip);Gn<3&&W.skip>1;)W.skip-=1,Gn=Math.floor(Bn.length/W.skip);for(var sr=0,ur=0;ur<Gn;ur+=1,sr+=W.skip)wn.push({x:Bn[sr].x,y:Bn[sr].y})}if(wn&&function(){for(var Or=0,ei=f;Or<ei.length;Or++){var Ci=ei[Or],Rr=wn.map(function(yi){return[yi.x,yi.y]});if(!tn(Rr,Ci.getBBox().centerX,Ci.getBBox().centerY))return!1}return!0}())return wn;if(W.threshold*=.9,Nn<=.5*W.maxMarchingIterations)W.memberInfluenceFactor*=1.2,W.edgeInfluenceFactor*=1.2;else{if(!(W.nonMemberInfluenceFactor!==0&&u.length>0))break;W.nonMemberInfluenceFactor*=.8}}return wn};function Jn(kt,f,u,I,W,ct){function Ct(Fe,_e){var Ke=Math.floor((Fe-_e)/ct.pixelGroupSize);return Ke<0?0:Ke}function _t(Fe,_e){return Fe*ct.pixelGroupSize+_e}var Xt=(ct.nodeR0-ct.nodeR1)*(ct.nodeR0-ct.nodeR1),ee=(ct.edgeR0-ct.edgeR1)*(ct.edgeR0-ct.edgeR1),ae=function(_e,Ke){return[Math.min(Ct(_e.minX,Ke+I.minX),W.width),Math.min(Ct(_e.minY,Ke+I.minY),W.height),Math.min(Ct(_e.maxX,-Ke+I.minX),W.width),Math.min(Ct(_e.maxY,-Ke+I.minY),W.height)]},je=function(_e,Ke){for(var bn=_e.getBBox(),wn=ae(bn,ct.nodeR1),Nn=wn[0],Bn=wn[1],Gn=wn[2],sr=wn[3],ur=Bn;ur<sr;ur+=1)for(var Or=Nn;Or<Gn;Or+=1)if(!(Ke<0&&W[Or+ur*W.width]<=0)){var ei=_t(Or,I.minX),Ci=_t(ur,I.minY),Rr=sn({x:ei,y:Ci},{x:bn.minX,y:bn.minY,width:bn.width,height:bn.height});if(Rr<Math.pow(ct.nodeR1,2)){var yi=Math.sqrt(Rr)-ct.nodeR1;W.cells[Or+ur*W.width]+=Ke*yi*yi}}};ct.nodeInfluenceFactor&&kt.forEach(function(Fe){je(Fe,ct.nodeInfluenceFactor/Xt)}),ct.edgeInfluenceFactor&&u.forEach(function(Fe){(function(_e,Ke){for(var bn=_e.getBBox(),wn=ae(bn,ct.edgeR1),Nn=wn[0],Bn=wn[1],Gn=wn[2],sr=wn[3],ur=Bn;ur<sr;ur+=1)for(var Or=Nn;Or<Gn;Or+=1)if(!(Ke<0&&W.cells[Or+ur*W.width]<=0)){var ei=_t(Or,I.minX),Ci=_t(ur,I.minY),Rr=Be({x:ei,y:Ci},_e);if(Rr<Math.pow(ct.edgeR1,2)){var yi=Math.sqrt(Rr)-ct.edgeR1;W.cells[Or+ur*W.width]+=Ke*yi*yi}}})(Fe,ct.edgeInfluenceFactor/ee)}),ct.negativeNodeInfluenceFactor&&f.forEach(function(Fe){je(Fe,ct.negativeNodeInfluenceFactor/Xt)})}function fe(kt,f,u,I){var W=kt.getBBox(),ct=u[0],Ct=u[1],_t=u[2],Xt=u[3],ee={topLeft:{x:W.minX-f,y:W.minY-f},topRight:{x:W.maxX+f,y:W.minY-f},bottomLeft:{x:W.minX-f,y:W.maxY+f},bottomRight:{x:W.maxX+f,y:W.maxY+f}},ae=W.height*W.width;function je(Fe,_e){return W.width*(.5*(Fe.y-W.minY+(_e.y-W.minY)))}if(Ct)return ct?I?ee.topLeft:ee.bottomRight:_t?I?ee.bottomLeft:ee.topRight:je(Ct,Xt)<.5*ae?Ct.y>Xt.y?I?ee.topLeft:ee.bottomRight:I?ee.topRight:ee.bottomLeft:Ct.y<Xt.y?I?ee.bottomLeft:ee.topRight:I?ee.bottomRight:ee.topLeft;if(Xt){if(ct)return I?ee.topRight:ee.bottomLeft;if(_t)return I?ee.bottomRight:ee.topLeft}return je(ct,_t)<.5*ae?ct.x>_t.x?I?ee.topLeft:ee.bottomRight:I?ee.bottomLeft:ee.topRight:ct.x<_t.x?I?ee.topRight:ee.bottomLeft:I?ee.bottomRight:ee.topLeft}var Ca=function(){function kt(f,u){this.cfg=Object(n.e)(this.getDefaultCfg(),u),this.graph=f,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(I){return Object(n.x)(I)?f.findById(I):I}),this.nonMembers=this.cfg.nonMembers.map(function(I){return Object(n.x)(I)?f.findById(I):I}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return kt.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},kt.prototype.setPadding=function(){var f=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+f:10+f,this.cfg.bubbleCfg={nodeR0:this.padding-f,nodeR1:this.padding-f,morphBuffer:this.padding-f}},kt.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},kt.prototype.calcPath=function(f,u){var I,W,ct;switch(this.type){case"round-convex":ct=ps((I=mr(f)).map(function(Ct){return[Ct.x,Ct.y]}),this.padding),W=Object(F.b)(ct);break;case"smooth-convex":(I=mr(f)).length===2?(ct=ps(I.map(function(Ct){return[Ct.x,Ct.y]}),this.padding),W=Object(F.b)(ct)):I.length>2&&(ct=yu(I.map(function(Ct){return[Ct.x,Ct.y]}),this.padding),W=es(ct));break;case"bubble":W=(I=bu(f,u,this.cfg.bubbleCfg)).length>=2&&es(I)}return W},kt.prototype.render=function(){this.group.addShape("path",{attrs:Object(at.a)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id}),this.group.toBack()},kt.prototype.addMember=function(f){if(f){Object(n.x)(f)&&(f=this.graph.findById(f)),this.members.push(f);var u=this.nonMembers.indexOf(f);return u>-1&&this.nonMembers.splice(u,1),this.updateData(this.members,this.nonMembers),!0}},kt.prototype.addNonMember=function(f){if(f){Object(n.x)(f)&&(f=this.graph.findById(f)),this.nonMembers.push(f);var u=this.members.indexOf(f);return u>-1&&this.members.splice(u,1),this.updateData(this.members,this.nonMembers),!0}},kt.prototype.removeMember=function(f){if(f){Object(n.x)(f)&&(f=this.graph.findById(f));var u=this.members.indexOf(f);return u>-1&&(this.members.splice(u,1),this.updateData(this.members,this.nonMembers),!0)}},kt.prototype.removeNonMember=function(f){if(f){Object(n.x)(f)&&(f=this.graph.findById(f));var u=this.nonMembers.indexOf(f);return u>-1&&(this.nonMembers.splice(u,1),this.updateData(this.members,this.nonMembers),!0)}},kt.prototype.updateData=function(f,u){var I=this;this.group.findById(this.id).remove(),f&&(this.members=f.map(function(W){return Object(n.x)(W)?I.graph.findById(W):W})),u&&(this.nonMembers=u.map(function(W){return Object(n.x)(W)?I.graph.findById(W):W})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},kt.prototype.updateStyle=function(f){this.group.findById(this.id).attr(Object(at.a)({},f))},kt.prototype.updateCfg=function(f){var u=this;this.cfg=Object(n.e)(this.cfg,f),this.id=this.cfg.id,this.group=this.cfg.group,f.members&&(this.members=this.cfg.members.map(function(I){return Object(n.x)(I)?u.graph.findById(I):I})),f.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(I){return Object(n.x)(I)?u.graph.findById(I):I})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},kt.prototype.contain=function(f){var u,I,W=this,ct=(u=Object(n.x)(f)?this.graph.findById(f):f).getKeyShape();if(u.get("type")==="path")I=Ho(ct.attr("path"));else{var Ct=ct.getCanvasBBox();I=[[Ct.minX,Ct.minY],[Ct.maxX,Ct.minY],[Ct.maxX,Ct.maxY],[Ct.minX,Ct.maxY]]}return I=I.map(function(_t){var Xt=W.graph.getPointByCanvas(_t[0],_t[1]);return[Xt.x,Xt.y]}),cn(I,Ho(this.path))},kt.prototype.destroy=function(){this.group.remove(),this.cfg=null},kt}(),_s=Yt.a.transform;(function(kt){function f(u){var I=kt.call(this)||this;return I.cfg=Object(n.e)(I.getDefaultCfg(),u),I.init(),I.animating=!1,I.destroyed=!1,I.cfg.enabledStack&&(I.undoStack=new Se.Stack(I.cfg.maxStep),I.redoStack=new Se.Stack(I.cfg.maxStep)),I}Object(at.b)(f,kt),f.prototype.init=function(){this.initCanvas();var u=new Go(this),I=new lr(this),W=new Vo(this),ct=new To(this);this.set({viewController:u,modeController:I,itemController:W,stateController:ct}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},f.prototype.initGroups=function(){var u=this.get("canvas"),I=this.get("canvas").get("el").id,W=u.addGroup({id:I+"-root",className:In.rootContainerClassName});if(this.get("groupByTypes")){var ct=W.addGroup({id:I+"-edge",className:In.edgeContainerClassName}),Ct=W.addGroup({id:I+"-node",className:In.nodeContainerClassName}),_t=W.addGroup({id:I+"-combo",className:In.comboContainerClassName});_t.toBack(),this.set({nodeGroup:Ct,edgeGroup:ct,comboGroup:_t})}var Xt=W.addGroup({id:I+"-delegate",className:In.delegateContainerClassName});this.set({delegateGroup:Xt}),this.set("group",W)},f.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[]}},f.prototype.set=function(u,I){return Object(n.w)(u)?this.cfg=Object(at.a)(Object(at.a)({},this.cfg),u):this.cfg[u]=I,this},f.prototype.get=function(u){return this.cfg[u]},f.prototype.getGroup=function(){return this.get("group")},f.prototype.getContainer=function(){return this.get("container")},f.prototype.getMinZoom=function(){return this.get("minZoom")},f.prototype.setMinZoom=function(u){return this.set("minZoom",u)},f.prototype.getMaxZoom=function(){return this.get("maxZoom")},f.prototype.setMaxZoom=function(u){return this.set("maxZoom",u)},f.prototype.getWidth=function(){return this.get("width")},f.prototype.getHeight=function(){return this.get("height")},f.prototype.clearItemStates=function(u,I){Object(n.x)(u)&&(u=this.findById(u));var W=this.get("itemController");I||(I=u.get("states")),W.clearItemStates(u,I),this.get("stateController").updateStates(u,I,!1)},f.prototype.node=function(u){typeof u=="function"&&this.set("nodeMapper",u)},f.prototype.edge=function(u){typeof u=="function"&&this.set("edgeMapper",u)},f.prototype.combo=function(u){typeof u=="function"&&this.set("comboMapper",u)},f.prototype.findById=function(u){return this.get("itemMap")[u]},f.prototype.find=function(u,I){var W,ct=this.get(u+"s");return Object(n.f)(ct,function(Ct,_t){if(I(Ct,_t))return W=Ct}),W},f.prototype.findAll=function(u,I){var W=[];return Object(n.f)(this.get(u+"s"),function(ct,Ct){I(ct,Ct)&&W.push(ct)}),W},f.prototype.findAllByState=function(u,I){return this.findAll(u,function(W){return W.hasState(I)})},f.prototype.translate=function(u,I){var W=this.get("group"),ct=Object(n.c)(W.getMatrix());ct||(ct=[1,0,0,0,1,0,0,0,1]),ct=_s(ct,[["t",u,I]]),W.setMatrix(ct),this.emit("viewportchange",{action:"translate",matrix:W.getMatrix()}),this.autoPaint()},f.prototype.moveTo=function(u,I){var W=this.get("group");ce(W,{x:u,y:I}),this.emit("viewportchange",{action:"move",matrix:W.getMatrix()})},f.prototype.fitView=function(u){u&&this.set("fitViewPadding",u),this.get("viewController").fitView(),this.autoPaint()},f.prototype.fitCenter=function(){this.get("viewController").fitCenter(),this.autoPaint()},f.prototype.addBehaviors=function(u,I){return this.get("modeController").manipulateBehaviors(u,I,!0),this},f.prototype.removeBehaviors=function(u,I){return this.get("modeController").manipulateBehaviors(u,I,!1),this},f.prototype.updateBehavior=function(u,I,W){return this.get("modeController").updateBehavior(u,I,W),this},f.prototype.zoom=function(u,I){var W=this.get("group"),ct=Object(n.c)(W.getMatrix()),Ct=this.get("minZoom"),_t=this.get("maxZoom");ct||(ct=[1,0,0,0,1,0,0,0,1]),ct=_s(ct,I?[["t",-I.x,-I.y],["s",u,u],["t",I.x,I.y]]:[["s",u,u]]),Ct&&ct[0]<Ct||_t&&ct[0]>_t||(W.setMatrix(ct),this.emit("viewportchange",{action:"zoom",matrix:ct}),this.autoPaint())},f.prototype.zoomTo=function(u,I){var W=u/this.getZoom();this.zoom(W,I)},f.prototype.focusItem=function(u,I,W){var ct=this.get("viewController"),Ct=!1;I?Ct=!0:I===void 0&&(Ct=this.get("animate"));var _t={};W?_t=W:W===void 0&&(_t=this.get("animateCfg")),ct.focus(u,Ct,_t),this.autoPaint()},f.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},f.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},f.prototype.getPointByClient=function(u,I){return this.get("viewController").getPointByClient(u,I)},f.prototype.getClientByPoint=function(u,I){return this.get("viewController").getClientByPoint(u,I)},f.prototype.getPointByCanvas=function(u,I){return this.get("viewController").getPointByCanvas(u,I)},f.prototype.getCanvasByPoint=function(u,I){return this.get("viewController").getCanvasByPoint(u,I)},f.prototype.showItem=function(u,I){I===void 0&&(I=!0);var W=this.get("itemController").changeItemVisibility(u,!0);if(I&&this.get("enabledStack")){var ct=W.getID(),Ct={},_t={};switch(W.getType()){case"node":Ct.nodes=[{id:ct,visible:!1}],_t.nodes=[{id:ct,visible:!0}];break;case"edge":Ct.nodes=[{id:ct,visible:!1}],_t.edges=[{id:ct,visible:!0}];break;case"combo":Ct.nodes=[{id:ct,visible:!1}],_t.combos=[{id:ct,visible:!0}]}this.pushStack("visible",{before:Ct,after:_t})}},f.prototype.hideItem=function(u,I){I===void 0&&(I=!0);var W=this.get("itemController").changeItemVisibility(u,!1);if(I&&this.get("enabledStack")){var ct=W.getID(),Ct={},_t={};switch(W.getType()){case"node":Ct.nodes=[{id:ct,visible:!0}],_t.nodes=[{id:ct,visible:!1}];break;case"edge":Ct.nodes=[{id:ct,visible:!0}],_t.edges=[{id:ct,visible:!1}];break;case"combo":Ct.nodes=[{id:ct,visible:!0}],_t.combos=[{id:ct,visible:!1}]}this.pushStack("visible",{before:Ct,after:_t})}},f.prototype.refreshItem=function(u){this.get("itemController").refreshItem(u)},f.prototype.setAutoPaint=function(u){this.set("autoPaint",u),this.get("canvas").set("autoDraw",u)},f.prototype.remove=function(u,I){I===void 0&&(I=!0),this.removeItem(u,I)},f.prototype.removeItem=function(u,I){I===void 0&&(I=!0);var W=u;if(Object(n.x)(u)&&(W=this.findById(u)),!W&&Object(n.x)(u))console.warn("The item to be removed does not exist!");else if(W){var ct="";if(W.getType&&(ct=W.getType()),I&&this.get("enabledStack")){var Ct=Object(at.a)(Object(at.a)({},W.getModel()),{itemType:ct}),_t={};switch(ct){case"node":_t.nodes=[Ct],_t.edges=[];for(var Xt=W.getEdges(),ee=Xt.length-1;ee>=0;ee--)_t.edges.push(Object(at.a)(Object(at.a)({},Xt[ee].getModel()),{itemType:"edge"}));break;case"edge":_t.edges=[Ct];break;case"combo":_t.combos=[Ct]}this.pushStack("delete",{before:_t,after:{}})}if(ct==="node"&&W.getModel().comboId&&this.updateComboTree(W),this.get("itemController").removeItem(W),ct==="combo"){var ae=ks(this.get("comboTrees"));this.set("comboTrees",ae)}}},f.prototype.addItem=function(u,I,W,ct){W===void 0&&(W=!0),ct===void 0&&(ct=!0);var Ct=this.get("comboSorted");this.set("comboSorted",Ct&&!ct);var _t=this.get("itemController");if(!I.id||!this.findById(I.id)){var Xt,ee=this.get("comboTrees");if(ee||(ee=[]),u==="combo"){var ae=this.get("itemMap"),je=!1;if(ee.forEach(function(sr){je||ea(sr,function(ur){if(I.parentId===ur.id){je=!0;var Or=Object(at.a)({id:I.id,depth:ur.depth+2},I);ur.children?ur.children.push(Or):ur.children=[Or],I.depth=Or.depth,Xt=_t.addItem(u,I)}var ei=ae[ur.id];return je&&ei&&ei.getType&&ei.getType()==="combo"&&_t.updateCombo(ei,ur.children),!0})}),!je){var Fe=Object(at.a)({id:I.id,depth:0},I);I.depth=Fe.depth,ee.push(Fe),Xt=_t.addItem(u,I)}this.set("comboTrees",ee)}else if(u==="node"&&Object(n.x)(I.comboId)&&ee){var _e;if((_e=this.findById(I.comboId))&&_e.getType&&_e.getType()!=="combo")return void console.warn("'"+I.comboId+"' is a not id of a combo in the graph, the node will be added without combo.");Xt=_t.addItem(u,I);var Ke=this.get("itemMap"),bn=!1,wn=!1;(ee||[]).forEach(function(sr){wn||bn||ea(sr,function(ur){if(ur.id===I.id)return wn=!0,!1;if(I.comboId===ur.id&&!wn){bn=!0;var Or=Object(n.c)(I);Or.itemType="node",ur.children?ur.children.push(Or):ur.children=[Or],I.depth=ur.depth+1}return bn&&Ke[ur.id].getType&&Ke[ur.id].getType()==="combo"&&_t.updateCombo(Ke[ur.id],ur.children),!0})})}else Xt=_t.addItem(u,I);(u==="node"&&I.comboId||u==="combo"&&I.parentId)&&(_e=this.findById(I.comboId||I.parentId))&&_e.addChild(Xt);var Nn=this.get("combos");if(Nn&&Nn.length>0&&this.sortCombos(),this.autoPaint(),W&&this.get("enabledStack")){var Bn=Object(at.a)(Object(at.a)({},Xt.getModel()),{itemType:u}),Gn={};switch(u){case"node":Gn.nodes=[Bn];break;case"edge":Gn.edges=[Bn];break;case"combo":Gn.combos=[Bn]}this.pushStack("add",{before:{},after:Gn})}return Xt}console.warn("This item exists already. Be sure the id %c"+I.id+"%c is unique.","font-size: 20px; color: red;","")},f.prototype.add=function(u,I,W,ct){return W===void 0&&(W=!0),ct===void 0&&(ct=!0),this.addItem(u,I,W,ct)},f.prototype.updateItem=function(u,I,W){var ct=this;W===void 0&&(W=!0);var Ct,_t=this.get("itemController");Ct=Object(n.x)(u)?this.findById(u):u;var Xt=Object(n.c)(Ct.getModel()),ee="";Ct.getType&&(ee=Ct.getType());var ae=Object(at.d)(Ct.getStates());if(ee==="combo"&&Object(n.f)(ae,function(Ke){return ct.setItemState(Ct,Ke,!1)}),_t.updateItem(Ct,I),ee==="combo"&&Object(n.f)(ae,function(Ke){return ct.setItemState(Ct,Ke,!0)}),W&&this.get("enabledStack")){var je={nodes:[],edges:[],combos:[]},Fe={nodes:[],edges:[],combos:[]},_e=Object(at.a)({id:Xt.id},I);switch(ee){case"node":je.nodes.push(Xt),Fe.nodes.push(_e);break;case"edge":je.edges.push(Xt),Fe.edges.push(_e);break;case"combo":je.combos.push(Xt),Fe.combos.push(_e)}ee==="node"&&je.nodes.push(Xt),this.pushStack("update",{before:je,after:Fe})}},f.prototype.update=function(u,I,W){W===void 0&&(W=!0),this.updateItem(u,I,W)},f.prototype.setItemState=function(u,I,W){Object(n.x)(u)&&(u=this.findById(u)),this.get("itemController").setItemState(u,I,W);var ct=this.get("stateController");Object(n.x)(W)?ct.updateState(u,I+":"+W,!0):ct.updateState(u,I,W)},f.prototype.priorityState=function(u,I){this.get("itemController").priorityState(u,I)},f.prototype.data=function(u){this.set("data",u)},f.prototype.render=function(){var u=this;this.set("comboSorted",!1);var I=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!I)throw new Error("data must be defined first");var W=I.nodes,ct=W===void 0?[]:W,Ct=I.edges,_t=Ct===void 0?[]:Ct,Xt=I.combos,ee=Xt===void 0?[]:Xt;if(this.clear(),this.emit("beforerender"),Object(n.f)(ct,function(_e){u.add("node",_e,!1,!1)}),ee&&ee.length!==0){var ae=ki(ee,ct);this.set("comboTrees",ae),u.addCombos(ee)}Object(n.f)(_t,function(_e){u.add("edge",_e,!1,!1)});var je=u.get("animate");(u.get("fitView")||u.get("fitCenter"))&&u.set("animate",!1);var Fe=u.get("layoutController");if(Fe){if(Fe.layout(function(){u.get("fitView")?u.fitView():u.get("fitCenter")&&u.fitCenter(),u.autoPaint(),u.emit("afterrender"),(u.get("fitView")||u.get("fitCenter"))&&u.set("animate",je)}),this.destroyed)return}else u.get("fitView")&&u.fitView(),u.get("fitCenter")&&u.fitCenter(),u.emit("afterrender"),u.set("animate",je);this.get("groupByTypes")||(ee&&ee.length!==0?this.sortCombos():I.nodes&&I.edges&&I.nodes.length<I.edges.length?this.getNodes().forEach(function(_e){_e.toFront()}):this.getEdges().forEach(function(_e){_e.toBack()})),this.get("enabledStack")&&this.pushStack("render")},f.prototype.read=function(u){this.data(u),this.render()},f.prototype.diffItems=function(u,I,W){var ct,Ct=this,_t=this.get("itemMap");Object(n.f)(W,function(Xt){if(ct=_t[Xt.id]){if(Ct.get("animate")&&u==="node"){var ee=ct.getContainer().getMatrix();ee||(ee=[1,0,0,0,1,0,0,0,1]),ct.set("originAttrs",{x:ee[6],y:ee[7]})}Ct.updateItem(ct,Xt,!1)}else ct=Ct.addItem(u,Xt,!1);ct&&I[u+"s"].push(ct)})},f.prototype.changeData=function(u,I){I===void 0&&(I=!0);var W=this;if(!u)return this;I&&this.get("enabledStack")&&this.pushStack("changedata",{before:W.save(),after:u}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(Ke){return W.clearItemStates(Ke)}),this.getEdges().map(function(Ke){return W.clearItemStates(Ke)});var ct=this.get("canvas"),Ct=ct.get("localRefresh");ct.set("localRefresh",!1),W.get("data")||(W.data(u),W.render());var _t=this.get("itemMap"),Xt={nodes:[],edges:[]},ee=u.combos;if(ee){var ae=ki(ee,u.nodes);this.set("comboTrees",ae)}this.diffItems("node",Xt,u.nodes),Object(n.f)(_t,function(Ke,bn){_t[bn].getModel().depth=0,Ke.getType&&Ke.getType()==="edge"||(Ke.getType&&Ke.getType()==="combo"?(delete _t[bn],Ke.destroy()):Xt.nodes.indexOf(Ke)<0&&(delete _t[bn],W.remove(Ke,!1)))});for(var je=this.getCombos(),Fe=je.length-1;Fe>=0;Fe--)je[Fe].destroyed&&je.splice(Fe,1);ee&&(W.addCombos(ee),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",Xt,u.edges),Object(n.f)(_t,function(Ke,bn){(!Ke.getType||Ke.getType()!=="node"&&Ke.getType()!=="combo")&&Xt.edges.indexOf(Ke)<0&&(delete _t[bn],W.remove(Ke,!1))}),this.set({nodes:Xt.nodes,edges:Xt.edges});var _e=this.get("layoutController");return _e&&(_e.changeData(),W.get("animate")&&!_e.getLayoutType()?W.positionsAnimate():W.autoPaint()),setTimeout(function(){ct.set("localRefresh",Ct)},16),this},f.prototype.addCombos=function(u){var I=this.get("comboTrees");this.get("itemController").addCombos(I,u)},f.prototype.createCombo=function(u,I){var W=this;this.set("comboSorted",!1);var ct,Ct="";if(u){if(Object(n.x)(u))Ct=u,ct={id:u};else{if(!(Ct=u.id))return void console.warn("Create combo failed. Please assign a unique string id for the adding combo.");ct=u}var _t=I.map(function(ee){var ae=W.findById(ee),je="";ae.getType&&(je=ae.getType());var Fe={id:ae.getID(),itemType:je};return je==="combo"?Fe.parentId=Ct:je==="node"&&(Fe.comboId=Ct),Fe});ct.children=_t,this.addItem("combo",ct,!1),this.set("comboSorted",!1);var Xt=this.get("comboTrees");(Xt||[]).forEach(function(ee){ea(ee,function(ae){return ae.id!==Ct||(ae.itemType="combo",ae.children=_t,!1)})}),Xt&&this.sortCombos()}},f.prototype.uncombo=function(u){var I=this,W=u;if(Object(n.x)(u)&&(W=this.findById(u)),!W||W.getType&&W.getType()!=="combo")console.warn("The item is not a combo!");else{var ct=W.getModel().parentId,Ct=this.get("comboTrees");Ct||(Ct=[]);var _t,Xt=this.get("itemMap"),ee=W.get("id"),ae=[],je=this.get("combos"),Fe=this.findById(ct);if(Ct.forEach(function(Ke){_t||ea(Ke,function(bn){if(bn.id===ee){_t=bn,W.getEdges().forEach(function(Nn){I.removeItem(Nn,!1)});var wn=je.indexOf(u);je.splice(wn,1),delete Xt[ee],W.destroy()}return!ct||!_t||bn.id!==ct||(Fe.removeCombo(W),(wn=(ae=bn.children).indexOf(_t))!==-1&&ae.splice(wn,1),_t.children.forEach(function(Nn){var Bn=I.findById(Nn.id),Gn=Bn.getModel();Bn.getType&&Bn.getType()==="combo"?(Nn.parentId=ct,delete Nn.comboId,Gn.parentId=ct,delete Gn.comboId):Bn.getType&&Bn.getType()==="node"&&(Nn.comboId=ct,Gn.comboId=ct),Fe.addChild(Bn),ae.push(Nn)}),!1)})}),!ct&&_t){var _e=Ct.indexOf(_t);Ct.splice(_e,1),_t.children.forEach(function(Ke){Ke.parentId=void 0,I.findById(Ke.id).getModel().parentId=void 0,Ke.itemType!=="node"&&Ct.push(Ke)})}}},f.prototype.updateCombos=function(){var u=this,I=this.get("comboTrees"),W=this.get("itemController"),ct=this.get("itemMap");(I||[]).forEach(function(Ct){ea(Ct,function(_t){if(!_t)return!0;var Xt=ct[_t.id];if(Xt&&Xt.getType&&Xt.getType()==="combo"){var ee=Object(at.d)(Xt.getStates());Object(n.f)(ee,function(ae){return u.setItemState(Xt,ae,!1)}),W.updateCombo(Xt,_t.children),Object(n.f)(ee,function(ae){return u.setItemState(Xt,ae,!0)})}return!0})}),this.sortCombos()},f.prototype.updateCombo=function(u){var I,W=this,ct=u;if(Object(n.x)(u)&&(ct=this.findById(u)),!ct||ct.getType&&ct.getType()!=="combo")console.warn("The item to be updated is not a combo!");else{I=ct.get("id");var Ct=this.get("comboTrees"),_t=this.get("itemController"),Xt=this.get("itemMap");(Ct||[]).forEach(function(ee){ea(ee,function(ae){if(!ae)return!0;var je=Xt[ae.id];if(I===ae.id&&je&&je.getType&&je.getType()==="combo"){var Fe=Object(at.d)(je.getStates());Object(n.f)(Fe,function(_e){je.getStateStyle(_e)&&W.setItemState(je,_e,!1)}),_t.updateCombo(je,ae.children),Object(n.f)(Fe,function(_e){je.getStateStyle(_e)&&W.setItemState(je,_e,!0)}),I&&(I=ae.parentId)}return!0})})}},f.prototype.updateComboTree=function(u,I,W){W===void 0&&(W=!0);var ct;this.set("comboSorted",!1);var Ct,_t=(ct=Object(n.x)(u)?this.findById(u):u).getModel(),Xt=_t.comboId||_t.parentId,ee="";if(ct.getType&&(ee=ct.getType()),I&&ee==="combo"){var ae,je=this.get("comboTrees"),Fe=!0;if((je||[]).forEach(function(Nn){ae||di(Nn,function(Bn){if(!ae)return Bn.id===ct.getID()&&(ae=Bn),!0})}),di(ae,function(Nn){return Nn.id!==I||(Fe=!1,!1)}),!Fe)return void console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!")}if(W&&this.get("enabledStack")){var _e={},Ke={};ee==="combo"?(_e.combos=[{id:_t.id,parentId:_t.parentId}],Ke.combos=[{id:_t.id,parentId:I}]):ee==="node"&&(_e.nodes=[{id:_t.id,parentId:_t.comboId}],Ke.nodes=[{id:_t.id,parentId:I}]),this.pushStack("updateComboTree",{before:_e,after:Ke})}if(_t.parentId||_t.comboId){var bn=this.findById(_t.parentId||_t.comboId);bn&&bn.removeChild(ct)}ee==="combo"?_t.parentId=I:ee==="node"&&(_t.comboId=I),I&&(Ct=this.findById(I))&&Ct.addChild(ct),Xt&&(Ct=this.findById(Xt))&&Ct.removeChild(ct);var wn=ks(this.get("comboTrees"),_t.id,I);this.set("comboTrees",wn),this.updateCombos()},f.prototype.save=function(){var u=[],I=[],W=[];return Object(n.f)(this.get("nodes"),function(ct){u.push(ct.getModel())}),Object(n.f)(this.get("edges"),function(ct){I.push(ct.getModel())}),Object(n.f)(this.get("combos"),function(ct){W.push(ct.getModel())}),{nodes:u,edges:I,combos:W}},f.prototype.changeSize=function(u,I){return this.get("viewController").changeSize(u,I),this},f.prototype.refresh=function(){if(this.emit("beforegraphrefresh"),this.get("animate"))this.positionsAnimate();else{var u=this.get("nodes"),I=this.get("edges"),W=this.get("edges");Object(n.f)(u,function(ct){ct.refresh()}),Object(n.f)(I,function(ct){ct.refresh()}),Object(n.f)(W,function(ct){ct.refresh()})}this.emit("aftergraphrefresh"),this.autoPaint()},f.prototype.getNodes=function(){return this.get("nodes")},f.prototype.getEdges=function(){return this.get("edges")},f.prototype.getCombos=function(){return this.get("combos")},f.prototype.getComboChildren=function(u){if(Object(n.x)(u)&&(u=this.findById(u)),u&&(!u.getType||u.getType()==="combo"))return u.getChildren();console.warn("The combo does not exist!")},f.prototype.positionsAnimate=function(){var u=this;u.emit("beforeanimate");var I=u.get("animateCfg"),W=I.onFrame,ct=u.getNodes(),Ct=ct.map(function(_t){var Xt=_t.getModel();return{id:Xt.id,x:Xt.x,y:Xt.y}});u.isAnimating()&&u.stopAnimate(),u.get("canvas").animate(function(_t){Object(n.f)(Ct,function(Xt){var ee=u.findById(Xt.id);if(ee&&!ee.destroyed){var ae=ee.get("originAttrs"),je=ee.get("model");if(!ae){var Fe=ee.getContainer().getMatrix();Fe||(Fe=[1,0,0,0,1,0,0,0,1]),ae={x:Fe[6],y:Fe[7]},ee.set("originAttrs",ae)}if(W){var _e=W(ee,_t,Xt,ae);ee.set("model",Object.assign(je,_e))}else je.x=ae.x+(Xt.x-ae.x)*_t,je.y=ae.y+(Xt.y-ae.y)*_t}}),u.refreshPositions()},{duration:I.duration,easing:I.easing,callback:function(){Object(n.f)(ct,function(Xt){Xt.set("originAttrs",null)}),I.callback&&I.callback(),u.emit("afteranimate"),u.animating=!1}})},f.prototype.refreshPositions=function(){this.emit("beforegraphrefreshposition");var u,I=this.get("nodes"),W=this.get("edges"),ct=this.get("vedges"),Ct=this.get("combos"),_t={};Object(n.f)(I,function(Xt){u=Xt.getModel();var ee=Xt.get("originAttrs");ee&&u.x===ee.x&&u.y===ee.y||(Xt.updatePosition({x:u.x,y:u.y}),_t[u.id]=!0,u.comboId&&(_t[u.comboId]=!0))}),Ct&&Ct.length!==0&&this.updateCombos(),Object(n.f)(W,function(Xt){var ee=Xt.getSource().getModel(),ae=Xt.getTarget().getModel();(_t[ee.id]||_t[ae.id]||Xt.getModel().isComboEdge)&&Xt.refresh()}),Object(n.f)(ct,function(Xt){Xt.refresh()}),this.emit("aftergraphrefreshposition"),this.autoPaint()},f.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},f.prototype.isAnimating=function(){return this.animating},f.prototype.getZoom=function(){var u=this.get("group").getMatrix();return u?u[0]:1},f.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},f.prototype.setMode=function(u){return this.get("modeController").setMode(u),this},f.prototype.clear=function(){return this.get("canvas").clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),this.emit("afterrender"),this},f.prototype.updateLayout=function(u){var I,W=this.get("layoutController");Object(n.x)(u)?u={type:I=u}:I=u.type;var ct=this.get("layout"),Ct=ct?ct.type:void 0;if(I&&Ct!==I||u.gpuEnabled!==void 0&&u.gpuEnabled!==ct.gpuEnabled)I||(I=Ct),this.set("layout",u),W.changeLayout(I);else{var _t={};Object.assign(_t,ct,u),_t.type=Ct||"random",this.set("layout",_t),W.updateLayoutCfg(_t)}},f.prototype.destroyLayout=function(){this.get("layoutController").destroyLayout()},f.prototype.layout=function(){var u=this.get("layoutController"),I=this.get("layout");I&&u&&(I.workerEnabled?u.layout():u.layoutMethod?u.relayout(!0):u.layout())},f.prototype.collapseCombo=function(u){var I=this;if(Object(n.x)(u)&&(u=this.findById(u)),u){this.emit("beforecollapseexpandcombo",{action:"expand",item:u});var W=u.getModel();this.get("itemController").collapseCombo(u),W.collapsed=!0;var ct=this.getEdges().concat(this.get("vedges")),Ct=[],_t=[],Xt=this.get("comboTrees"),ee=!1,ae={};(Xt||[]).forEach(function(_e){ae[_e.id]=_e}),(Xt||[]).forEach(function(_e){ee||di(_e,function(Ke){if(ee&&ae[Ke.id])return!1;if(W.parentId===Ke.id?(ae={},Ke.children.forEach(function(wn){ae[wn.id]=wn})):W.id===Ke.id&&(ee=!0),ee){var bn=I.findById(Ke.id);bn&&bn.getType&&bn.getType()==="combo"&&(Ct=Ct.concat(bn.getNodes()),_t=_t.concat(bn.getCombos()))}return!0})});var je={},Fe=[];ct.forEach(function(_e){if(!_e.isVisible()||_e.getModel().isVEdge){var Ke=_e.getSource(),bn=_e.getTarget();if((Ct.includes(Ke)||_t.includes(Ke))&&!Ct.includes(bn)&&!_t.includes(bn)||Ke.getModel().id===W.id){if((Gn=_e.getModel()).isVEdge)return void I.removeItem(_e,!1);for(var wn=bn.getModel();!bn.isVisible();){if(!(bn=I.findById(wn.parentId||wn.comboId))||!wn.parentId&&!wn.comboId)return;wn=bn.getModel()}var Nn=wn.id;if(je[W.id+"-"+Nn])return void(je[W.id+"-"+Nn]+=Gn.size||1);var Bn=I.addItem("vedge",{source:W.id,target:Nn,isVEdge:!0},!1);je[W.id+"-"+Nn]=Gn.size||1,Fe.push(Bn)}else if(!Ct.includes(Ke)&&!_t.includes(Ke)&&(Ct.includes(bn)||_t.includes(bn))||bn.getModel().id===W.id){var Gn;if((Gn=_e.getModel()).isVEdge)return void I.removeItem(_e,!1);for(var sr=Ke.getModel();!Ke.isVisible();){if(!(Ke=I.findById(sr.parentId||sr.comboId))||!sr.parentId&&!sr.comboId)return;sr=Ke.getModel()}var ur=sr.id;if(je[ur+"-"+W.id])return void(je[ur+"-"+W.id]+=Gn.size||1);Bn=I.addItem("vedge",{target:W.id,source:ur,isVEdge:!0},!1),je[ur+"-"+W.id]=Gn.size||1,Fe.push(Bn)}}}),Fe.forEach(function(_e){var Ke=_e.getModel();I.updateItem(_e,{size:je[Ke.source+"-"+Ke.target]},!1)}),this.emit("aftercollapseexpandcombo",{action:"collapse",item:u})}else console.warn("The combo to be collapsed does not exist!")},f.prototype.expandCombo=function(u){var I=this;if(Object(n.x)(u)&&(u=this.findById(u)),!u||u.getType&&u.getType()!=="combo")console.warn("The combo to be collapsed does not exist!");else{this.emit("beforecollapseexpandcombo",{action:"expand",item:u});var W=u.getModel();this.get("itemController").expandCombo(u),W.collapsed=!1;var ct=this.getEdges().concat(this.get("vedges")),Ct=[],_t=[],Xt=this.get("comboTrees"),ee=!1,ae={};(Xt||[]).forEach(function(_e){ae[_e.id]=_e}),(Xt||[]).forEach(function(_e){ee||di(_e,function(Ke){if(ee&&ae[Ke.id])return!1;if(W.parentId===Ke.id?(ae={},Ke.children.forEach(function(wn){ae[wn.id]=wn})):W.id===Ke.id&&(ee=!0),ee){var bn=I.findById(Ke.id);bn&&bn.getType&&bn.getType()==="combo"&&(Ct=Ct.concat(bn.getNodes()),_t=_t.concat(bn.getCombos()))}return!0})});var je={},Fe={};ct.forEach(function(_e){if(!_e.isVisible()||_e.getModel().isVEdge){var Ke=_e.getSource(),bn=_e.getTarget(),wn=Ke.get("id"),Nn=bn.get("id");if((Ct.includes(Ke)||_t.includes(Ke))&&!Ct.includes(bn)&&!_t.includes(bn)||wn===W.id){if(_e.getModel().isVEdge)return void I.removeItem(_e,!1);for(var Bn=bn.getModel();!bn.isVisible();){if(!(bn=I.findById(Bn.comboId||Bn.parentId))||!Bn.parentId&&!Bn.comboId)return;Bn=bn.getModel()}Nn=Bn.id;for(var Gn=Ke.getModel();!Ke.isVisible();){if(!(Ke=I.findById(Gn.comboId||Gn.parentId))||!Gn.parentId&&!Gn.comboId)return;if(Gn.comboId===W.id||Gn.parentId===W.id)break;Gn=Ke.getModel()}if(wn=Gn.id,Nn){if(je[ur=wn+"-"+Nn])return je[ur]+=_e.getModel().size||1,void I.updateItem(Fe[ur],{size:je[ur]},!1);var sr=I.addItem("vedge",{source:wn,target:Nn,isVEdge:!0},!1);je[ur]=_e.getModel().size||1,Fe[ur]=sr}}else if(!Ct.includes(Ke)&&!_t.includes(Ke)&&(Ct.includes(bn)||_t.includes(bn))||Nn===W.id){if(_e.getModel().isVEdge)return void I.removeItem(_e,!1);for(Gn=Ke.getModel();!Ke.isVisible();){if(!(Ke=I.findById(Gn.comboId||Gn.parentId))||!Gn.parentId&&!Gn.comboId)return;Gn=Ke.getModel()}for(wn=Gn.id,Bn=bn.getModel();!bn.isVisible();){if(!(bn=I.findById(Bn.comboId||Bn.parentId))||!Bn.parentId&&!Bn.comboId)return;if(Bn.comboId===W.id||Bn.parentId===W.id)break;Bn=bn.getModel()}if(Nn=Bn.id,wn){var ur;if(je[ur=wn+"-"+Nn])return je[ur]+=_e.getModel().size||1,void I.updateItem(Fe[ur],{size:je[ur]},!1);sr=I.addItem("vedge",{target:Nn,source:wn,isVEdge:!0},!1),je[ur]=_e.getModel().size||1,Fe[ur]=sr}}else(Ct.includes(Ke)||_t.includes(Ke))&&(Ct.includes(bn)||_t.includes(bn))&&Ke.isVisible()&&bn.isVisible()&&_e.show()}}),this.emit("aftercollapseexpandcombo",{action:"expand",item:u})}},f.prototype.collapseExpandCombo=function(u){if(Object(n.x)(u)&&(u=this.findById(u)),!u.getType||u.getType()==="combo"){for(var I=u.getModel(),W=this.findById(I.parentId);W;){var ct=W.getModel();if(ct.collapsed)return console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),void(W=void 0);W=this.findById(ct.parentId)}I.collapsed?this.expandCombo(u):this.collapseCombo(u),this.updateCombo(u)}},f.prototype.sortCombos=function(){var u=this;if(!this.get("comboSorted")){this.set("comboSorted",!0);var I=[],W={};(this.get("comboTrees")||[]).forEach(function(ct){di(ct,function(Ct){return I[Ct.depth]?I[Ct.depth].push(Ct.id):I[Ct.depth]=[Ct.id],W[Ct.id]=Ct.depth,!0})}),(this.getEdges().concat(this.get("vedges"))||[]).forEach(function(ct){var Ct=ct.getModel(),_t=W[Ct.source]||0,Xt=W[Ct.target]||0,ee=Math.max(_t,Xt);I[ee]?I[ee].push(Ct.id):I[ee]=[Ct.id]}),I.forEach(function(ct){if(ct&&ct.length)for(var Ct=ct.length-1;Ct>=0;Ct--){var _t=u.findById(ct[Ct]);_t&&_t.toFront()}})}},f.prototype.getNeighbors=function(u,I){var W=u;return Object(n.x)(u)&&(W=this.findById(u)),W.getNeighbors(I)},f.prototype.getNodeDegree=function(u,I){I===void 0&&(I=void 0);var W=u;Object(n.x)(u)&&(W=this.findById(u));var ct=this.get("degrees");ct||(ct=Object(Se.getDegree)(this.get("data"))),this.set("degees",ct);var Ct,_t=ct[W.getID()];switch(I){case"in":Ct=_t.inDegree;break;case"out":Ct=_t.outDegree;break;case"all":Ct=_t;break;default:Ct=_t.degree}return Ct},f.prototype.getUndoStack=function(){return this.undoStack},f.prototype.getRedoStack=function(){return this.redoStack},f.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},f.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},f.prototype.pushStack=function(u,I,W){if(u===void 0&&(u="update"),W===void 0&&(W="undo"),this.get("enabledStack")){var ct=I?Object(n.c)(I):{before:{},after:Object(n.c)(this.save())};W==="redo"?this.redoStack.push({action:u,data:ct}):this.undoStack.push({action:u,data:ct}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})}else console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !")},f.prototype.getAdjMatrix=function(u,I){u===void 0&&(u=!0),I===void 0&&(I=this.get("directed"));var W=this.get("adjMatrix");return W&&u||(W=Object(Se.getAdjMatrix)(this.save(),I),this.set("adjMatrix",W)),W},f.prototype.getShortestPathMatrix=function(u,I){u===void 0&&(u=!0),I===void 0&&(I=this.get("directed"));var W=this.get("adjMatrix"),ct=this.get("shortestPathMatrix");return W&&u||(W=Object(Se.getAdjMatrix)(this.save(),I),this.set("adjMatrix",W)),ct&&u||(ct=Object(Se.floydWarshall)(this.save(),I),this.set("shortestPathMatrix",ct)),ct},f.prototype.on=function(u,I,W){return kt.prototype.on.call(this,u,I,W)},f.prototype.destroy=function(){this.clear(),this.clearStack(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("canvas").destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},f.prototype.createHull=function(u){if(u.members&&!(u.members.length<1)){var I=this.get("hullGroup"),W=this.get("hullMap");if(W||(W={},this.set("hullMap",W)),I||((I=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",I)),W[u.id])return console.warn("Existed hull id."),W[u.id];var ct=I.addGroup({id:u.id+"-container"}),Ct=new Ca(this,Object(at.a)(Object(at.a)({},u),{group:ct}));return W[Ct.id]=Ct,Ct}console.warn("Create hull failed! The members is empty.")},f.prototype.getHulls=function(){return this.get("hullMap")},f.prototype.getHullById=function(u){return this.get("hullMap")[u]},f.prototype.removeHull=function(u){var I;I=Object(n.x)(u)?this.getHullById(u):u,delete this.get("hullMap")[I.id],I.destroy()},f.prototype.removeHulls=function(){var u=this.getHulls();u&&Object.keys(u).length&&(u.forEach(function(I){I.destroy()}),this.set("hullMap",{}))}})(zt.a);function ns(kt){return(ns=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(kt)}var ba=Yt.a.transform,ca=["startArrow","endArrow"],gs={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Fa={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:gs,combo:gs},ys={options:{},itemType:"",type:"",getCustomConfig:function(f){return{}},getOptions:function(f){return Object(n.e)({labelCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}},descriptionCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}}},this.options,this.getCustomConfig(f)||{},f)},draw:function(f,u){var I=this.drawShape(f,u);return I.set("className",this.itemType+"-shape"),f.label&&this.drawLabel(f,u).set("className",this.itemType+"-label"),I},afterDraw:function(f,u,I){},drawShape:function(f,u){return null},drawLabel:function(f,u){var I=this.getOptions(f).labelCfg||{},W=this.getLabelStyle(f,I,u),ct=W.rotate;delete W.rotate;var Ct=u.addShape("text",{attrs:W,draggable:!0,className:"text-shape",name:"text-shape"});if(ct){var _t=Ct.getBBox(),Xt=Ct.getMatrix();if(Xt||(Xt=[1,0,0,0,1,0,0,0,1]),W.rotateCenter)switch(W.rotateCenter){case"center":Xt=ba(Xt,[["t",-_t.width/2,-_t.height/2],["r",ct],["t",_t.width/2,_t.height/2]]);break;case"lefttop":Xt=ba(Xt,[["t",-W.x,-W.y],["r",ct],["t",W.x,W.y]]);break;case"leftcenter":Xt=ba(Xt,[["t",-W.x,-W.y-_t.height/2],["r",ct],["t",W.x,W.y+_t.height/2]]);break;default:Xt=ba(Xt,[["t",-_t.width/2,-_t.height/2],["r",ct],["t",_t.width/2,_t.height/2]])}else Xt=ba(Xt,[["t",-W.x,-W.y-_t.height/2],["r",ct],["t",W.x,W.y+_t.height/2]]);Ct.setMatrix(Xt)}if(W.background){var ee=this.drawLabelBg(f,u,Ct),ae=this.itemType+"-label-bg";ee.set("classname",ae),Ct.toFront()}return Ct},drawLabelBg:function(f,u,I){var W=this.options.labelCfg,ct=Object(n.A)({},W,f.labelCfg),Ct=this.getLabelBgStyleByPosition(I,f,ct,u);return u.addShape("rect",{name:"text-bg-shape",attrs:Ct})},getLabelStyleByPosition:function(f,u,I){return{text:f.label}},getLabelBgStyleByPosition:function(f,u,I,W){return{}},getLabelStyle:function(f,u,I){var W=this.getLabelStyleByPosition(f,u,I),ct=this.itemType+"Label",Ct=In[ct]?In[ct].style:null;return Object(at.a)(Object(at.a)(Object(at.a)({},Ct),W),u.style)},getShapeStyle:function(f){return f.style},update:function(f,u){this.updateShapeStyle(f,u),this.updateLabel(f,u)},updateShapeStyle:function(f,u){var I=u.getContainer(),W=u.getKeyShape(),ct=Object(n.A)({},W.attr(),f.style),Ct=function(ee){var ae,je=ct[ee];if(Object(n.w)(je)){var Fe=I.find(function(_e){return _e.get("name")===ee});Fe&&Fe.attr(je)}else W.attr(((ae={})[ee]=je,ae))};for(var _t in ct)Ct(_t)},updateLabel:function(f,u){var I=u.getContainer(),W=this.getOptions({}).labelCfg,ct=this.itemType+"-label",Ct=I.find(function(sr){return sr.get("className")===ct}),_t=this.itemType+"-label-bg",Xt=I.find(function(sr){return sr.get("classname")===_t});if(f.label||f.label==="")if(Ct){var ee={};u.getModel&&(ee=u.getModel().labelCfg);var ae=Object(n.e)({},W,ee,f.labelCfg),je=this.getLabelStyleByPosition(f,ae,I),Fe=f.labelCfg?f.labelCfg.style:void 0,_e=ae.style&&ae.style.background,Ke=Object(at.a)(Object(at.a)(Object(at.a)({},Ct.attr()),je),Fe),bn=Ke.rotate;if(delete Ke.rotate,bn){var wn=[1,0,0,0,1,0,0,0,1];wn=ba(wn,[["t",-Ke.x,-Ke.y],["r",bn],["t",Ke.x,Ke.y]]),Ct.resetMatrix(),Ct.attr(Object(at.a)(Object(at.a)({},Ke),{matrix:wn}))}else Ct.resetMatrix(),Ct.attr(Ke);if(Xt)if(Ke.background){var Nn=this.getLabelBgStyleByPosition(Ct,f,ae,I),Bn=Object(at.a)(Object(at.a)({},Nn),_e);if(Xt.resetMatrix(),bn){var Gn=[1,0,0,0,1,0,0,0,1];Gn=ba(Gn,[["t",-Bn.x,-Bn.y],["r",bn],["t",Bn.x,Bn.y]]),Bn.matrix=Gn}Xt.attr(Bn)}else I.removeChild(Xt);else Ke.background&&((Xt=this.drawLabelBg(f,I,Ct)).set("classname",_t),Ct.toFront())}else this.drawLabel(f,I).set("className",ct)},afterUpdate:function(f,u){},setState:function(f,u,I){var W,ct,Ct=I.get("keyShape");if(Ct){var _t=I.getType(),Xt=Object(n.n)(u)?f:f+":"+u,ee=this.getStateStyle(Xt,I),ae=I.getStateStyle(Xt);if(ae||ee){var je=Object(n.A)({},ae||ee),Fe=I.getContainer(),_e={x:1,y:1,cx:1,cy:1};if(_t==="combo"&&(_e.r=1,_e.width=1,_e.height=1),u){var Ke=function(Hi){var Io,Ro=je[Hi];if(Object(n.w)(Ro)&&!ca.includes(Hi)){var ko=Fe.find(function(bo){return bo.get("name")===Hi});ko&&ko.attr(Ro)}else Ct.attr(((Io={})[Hi]=Ro,Io))};for(var bn in je)Ke(bn)}else{var wn=ui(I.getCurrentStatesStyle()),Nn=I.getModel(),Bn=Object(n.A)({},Nn.style,ui(I.getOriginStyle())),Gn=Ct.get("name"),sr=Ct.attr(),ur={};Object.keys(sr).forEach(function(lo){if(lo!=="img"){var Hi=sr[lo];Hi&&ns(Hi)==="object"?ur[lo]=Object(n.c)(Hi):ur[lo]=Hi}});var Or={},ei=function(Hi){var Io=je[Hi];if(Object(n.w)(Io)&&!ca.includes(Hi)){var Ro=Fe.find(function(jo){return jo.get("name")===Hi});if(Ro){var ko=Object(n.c)(Ro.attr());Object(n.f)(Io,function(jo,ho){if(Hi===Gn&&ur[ho]&&!_e[ho]){delete ur[ho];var fa=Bn[Hi][ho]||Fa[_t][ho];Ct.attr(ho,fa)}else if(ko[ho]||ko[ho]===0){delete ko[ho];var Zo=Bn[Hi][ho]||Fa[_t][ho];Ro.attr(ho,Zo)}}),Or[Hi]=ko}}else if(ur[Hi]&&!_e[Hi]){delete ur[Hi];var bo=Bn[Hi]||(Bn[Gn]?Bn[Gn][Hi]:void 0)||Fa[_t][Hi];Ct.attr(Hi,bo)}};for(var Ci in je)ei(Ci);for(var bn in Gn?Or[Gn]=ur:Object(n.A)(Or,ur),wn)if(!_e[bn]){var Rr=wn[bn];Object(n.w)(Rr)&&!ca.includes(bn)||(Gn?(Object(n.A)(Bn[Gn],((ct={})[bn]=Rr,ct)),delete Bn[bn]):Object(n.A)(Bn,((W={})[bn]=Rr,W)),delete wn[bn])}var yi={};Object(n.e)(yi,Bn,Or,wn);var oo=!1,so=function(Hi){var Io,Ro,ko=yi[Hi];if(Object(n.w)(ko)&&!ca.includes(Hi)){var bo=Fe.find(function(ho){return ho.get("name")===Hi});bo&&(Hi===Gn&&(_t==="combo"&&(delete ko.r,delete ko.width,delete ko.height),oo=!0),bo.attr(ko))}else if(!oo){var jo=ko||Fa[_t][Hi];_t==="combo"?Gn||Ct.attr(((Io={})[Hi]=jo,Io)):Ct.attr(((Ro={})[Hi]=jo,Ro))}};for(var co in yi)so(co)}}}},getStateStyle:function(f,u){var I=u.getModel(),W=u.getType(),ct=this.getOptions(I),Ct=ct.stateStyles,_t=ct.style,Xt=_t===void 0?{}:_t,ee=I.stateStyles?I.stateStyles[f]:Ct&&Ct[f];return W==="combo"?Object(n.c)(ee):Object(n.A)({},Xt,ee)},getControlPoints:function(f){return f.controlPoints},getAnchorPoints:function(f){return this.getOptions(f).anchorPoints}},jn={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:In.nodeLabel.offset,getSize:function(f){var u=f.size||this.getOptions({}).size||In.defaultNode.size;return Object(n.m)(u)&&u.length===1&&(u=[u[0],u[0]]),Object(n.m)(u)||(u=[u,u]),u},getLabelStyleByPosition:function(f,u){var I=u.position||this.labelPosition;if(I==="center")return{x:0,y:0,text:f.label};var W=u.offset;Object(n.s)(W)&&(W=this.offset);var ct,Ct=this.getSize(f),_t=Ct[0],Xt=Ct[1];switch(I){case"top":ct={x:0,y:0-Xt/2-W,textBaseline:"bottom"};break;case"bottom":ct={x:0,y:Xt/2+W,textBaseline:"top"};break;case"left":ct={x:0-_t/2-W,y:0,textAlign:"right"};break;default:ct={x:_t/2+W,y:0,textAlign:"left"}}return ct.text=f.label,ct},getLabelBgStyleByPosition:function(f,u,I,W){if(!f)return{};var ct=f.getBBox(),Ct=I.style&&I.style.background;if(!Ct)return{};var _t,Xt=Mr(Ct.padding),ee=ct.width+Xt[1]+Xt[3],ae=ct.height+Xt[0]+Xt[2],je=I.offset;return Object(n.s)(je)&&(je=this.offset),_t={x:ct.minX-Xt[3],y:ct.minY-Xt[0]},_t=Object(at.a)(Object(at.a)(Object(at.a)({},_t),Ct),{width:ee,height:ae})},drawShape:function(f,u){var I=this.shapeType,W=this.getShapeStyle(f);return u.addShape(I,{attrs:W,draggable:!0,name:"node-shape"})},updateLinkPoints:function(f,u){var I,W=this.getOptions(f).linkPoints,ct=u.find(function(ei){return ei.get("className")==="link-point-left"}),Ct=u.find(function(ei){return ei.get("className")==="link-point-right"}),_t=u.find(function(ei){return ei.get("className")==="link-point-top"}),Xt=u.find(function(ei){return ei.get("className")==="link-point-bottom"});ct&&(I=ct.attr()),Ct&&!I&&(I=Ct.attr()),_t&&!I&&(I=_t.attr()),Xt&&!I&&(I=Xt.attr()),I||(I=W);var ee=Object(n.A)({},I,f.linkPoints),ae=ee.fill,je=ee.stroke,Fe=ee.lineWidth,_e=ee.size/2;_e||(_e=ee.r);var Ke=f.linkPoints?f.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},bn=Ke.left,wn=Ke.right,Nn=Ke.top,Bn=Ke.bottom,Gn=this.getSize(f),sr=Gn[0],ur=Gn[1],Or={r:_e,fill:ae,stroke:je,lineWidth:Fe};ct?bn||bn===void 0?ct.attr(Object(at.a)(Object(at.a)({},Or),{x:-sr/2,y:0})):ct.remove():bn&&u.addShape("circle",{attrs:Object(at.a)(Object(at.a)({},Or),{x:-sr/2,y:0}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),Ct?(wn||wn===void 0||Ct.remove(),Ct.attr(Object(at.a)(Object(at.a)({},Or),{x:sr/2,y:0}))):wn&&u.addShape("circle",{attrs:Object(at.a)(Object(at.a)({},Or),{x:sr/2,y:0}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),_t?(Nn||Nn===void 0||_t.remove(),_t.attr(Object(at.a)(Object(at.a)({},Or),{x:0,y:-ur/2}))):Nn&&u.addShape("circle",{attrs:Object(at.a)(Object(at.a)({},Or),{x:0,y:-ur/2}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),Xt?Bn||Bn===void 0?Xt.attr(Object(at.a)(Object(at.a)({},Or),{x:0,y:ur/2})):Xt.remove():Bn&&u.addShape("circle",{attrs:Object(at.a)(Object(at.a)({},Or),{x:0,y:ur/2}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},updateShape:function(f,u,I,W){u.get("keyShape").attr(Object(at.a)({},I)),this.updateLabel(f,u),W&&this.updateIcon(f,u)},updateIcon:function(f,u){var I=this,W=u.getContainer(),ct=this.getOptions(f).icon,Ct=(f.icon?f.icon:{show:void 0}).show,_t=W.find(function(Fe){return Fe.get("className")===I.type+"-icon"});if(_t)if(Ct||Ct===void 0){var Xt=Object(n.A)({},_t.attr(),ct),ee=Xt.width,ae=Xt.height;_t.attr(Object(at.a)(Object(at.a)({},Xt),{x:-ee/2,y:-ae/2}))}else _t.remove();else if(Ct){ee=ct.width,ae=ct.height,W.addShape("image",{attrs:Object(at.a)(Object(at.a)({},ct),{x:-ee/2,y:-ae/2}),className:this.type+"-icon",name:this.type+"-icon"});var je=W.find(function(Fe){return Fe.get("className")==="node-label"});je&&je.toFront()}}},Us=Object(at.a)(Object(at.a)({},ys),jn);yr.registerNode("single-node",Us);var Wo={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:In.defaultEdge.size,style:{x:0,y:0,stroke:In.defaultEdge.style.stroke,lineAppendWidth:In.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:In.edgeLabel.style.fill,fontSize:In.edgeLabel.style.fontSize}},stateStyles:Object(at.a)({},In.edgeStateStyles)},getPath:function(f){var u=[];return Object(n.f)(f,function(I,W){W===0?u.push(["M",I.x,I.y]):u.push(["L",I.x,I.y])}),u},getShapeStyle:function(f){var u=this.options.style,I={stroke:f.color},W=Object(n.A)({},u,I,f.style),ct=f.size||In.defaultEdge.size,Ct=(f=this.getPathPoints(f)).startPoint,_t=f.endPoint,Xt=this.getControlPoints(f),ee=[Ct];Xt&&(ee=ee.concat(Xt)),ee.push(_t);var ae=this.getPath(ee);return Object(n.A)({},In.defaultEdge.style,{stroke:In.defaultEdge.color,lineWidth:ct,path:ae},W)},updateShapeStyle:function(f,u){var I=u.getContainer(),W={stroke:f.color},ct=I.find(function(Bn){return Bn.get("className")==="edge-shape"})||u.getKeyShape(),Ct=f.size,_t=(f=this.getPathPoints(f)).startPoint,Xt=f.endPoint,ee=this.getControlPoints(f),ae=[_t];ee&&(ae=ae.concat(ee)),ae.push(Xt);var je=ct.attr(),Fe=Object(n.A)({},W,je,f.style),_e=f.sourceNode,Ke=f.targetNode,bn={radius:Fe.radius};ee||(bn={source:_e,target:Ke,offset:Fe.offset,radius:Fe.radius}),je.endArrow&&Fe.endArrow===!1&&(f.style.endArrow={path:""}),je.startArrow&&Fe.startArrow===!1&&(f.style.startArrow={path:""});var wn=this.getPath(ae,bn),Nn=Object(n.A)(W,ct.attr(),{lineWidth:Ct,path:wn},f.style);ct&&ct.attr(Nn)},getLabelStyleByPosition:function(f,u,I){var W,ct=u.position||this.labelPosition,Ct={},_t=I&&I.find(function(Fe){return Fe.get("className")==="edge-shape"});W=ct==="start"?0:ct==="end"?1:.5;var Xt=u.refX||this.refX,ee=u.refY||this.refY;if(f.startPoint.x===f.endPoint.x&&f.startPoint.y===f.endPoint.y)return Ct.x=f.startPoint.x+Xt,Ct.y=f.startPoint.y+ee,Ct.text=f.label,Ct;var ae=Object(n.s)(u.autoRotate)?this.labelAutoRotate:u.autoRotate,je=Xo(_t,W,Xt,ee,ae);return Ct.x=je.x,Ct.y=je.y,Ct.rotate=je.rotate,Ct.textAlign=this._getTextAlign(ct,je.angle),Ct.text=f.label,Ct},getLabelBgStyleByPosition:function(f,u,I,W){if(!f)return{};var ct=f.getBBox(),Ct=I.style&&I.style.background;if(!Ct)return{};var _t,Xt=Ct.padding,ee=ct.width+Xt[1]+Xt[3],ae=ct.height+Xt[0]+Xt[2],je=I.position||this.labelPosition,Fe=Object(at.a)(Object(at.a)({},Ct),{width:ee,height:ae,x:ct.minX-Xt[2],y:ct.minY-Xt[0],rotate:0}),_e=Object(n.s)(I.autoRotate)?this.labelAutoRotate:I.autoRotate,Ke=W&&W.find(function(Gn){return Gn.get("className")==="edge-shape"});_t=je==="start"?0:je==="end"?1:.5;var bn=I.refX||this.refX,wn=I.refY||this.refY;if(u.startPoint.x===u.endPoint.x&&u.startPoint.y===u.endPoint.y)return Fe.x=u.startPoint.x+bn-ee/2,Fe.y=u.startPoint.y+wn-ae/2,Fe;var Nn=Xo(Ke,_t,bn-ee/2,wn+ae/2,_e),Bn=Nn.angle;return Bn>.5*Math.PI&&Bn<1.5*Math.PI&&(Nn=Xo(Ke,_t,bn+ee/2,wn+ae/2,_e)),_e&&(Fe.x=Nn.x,Fe.y=Nn.y),Fe.rotate=Nn.rotate,Fe},_getTextAlign:function(f,u){var I="center";return u?(u%=2*Math.PI,f!=="center"&&(I=u>=0&&u<=Math.PI/2||u>=1.5*Math.PI&&u<2*Math.PI?f:function(W){var ct=W;return W==="start"?ct="end":W==="end"&&(ct="start"),ct}(f)),I):f},getControlPoints:function(f){return f.controlPoints},getPathPoints:function(f){return f},drawShape:function(f,u){var I=this.getShapeStyle(f);return u.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:I})},drawLabel:function(f,u){var I=this.options.labelCfg,W=Object(n.e)({fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},I,f.labelCfg),ct=this.getLabelStyle(f,W,u),Ct=ct.rotate;delete ct.rotate;var _t=u.addShape("text",{attrs:ct,name:"text-shape"});if(Ct&&_t.rotateAtStart(Ct),ct.background){var Xt=this.drawLabelBg(f,u,_t),ee=this.itemType+"-label-bg";Xt.set("classname",ee),_t.toFront()}return _t},drawLabelBg:function(f,u,I){var W=this.options.labelCfg,ct=Object(n.e)({},W,f.labelCfg),Ct=this.getLabelStyle(f,ct,u).rotate,_t=this.getLabelBgStyleByPosition(I,f,ct,u);delete _t.rotate;var Xt=u.addShape("rect",{name:"text-bg-shape",attrs:_t});return Ct&&Xt.rotateAtStart(Ct),Xt}},rc=Object(at.a)(Object(at.a)({},ys),Wo);yr.registerEdge("single-edge",rc),yr.registerEdge("line",{getControlPoints:function(){}},"single-edge"),yr.registerEdge("spline",{getPath:function(f){return Ns(f)}},"single-edge"),yr.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(f){var u,I,W=f.startPoint,ct=f.endPoint,Ct=(W.x+ct.x)/2,_t=(W.y+ct.y)/2;if(f.controlPoints!==void 0){if(I=f.controlPoints[0],u=mt(W,I,ct),W.x<=ct.x&&W.y>ct.y?this.clockwise=u.x>I.x?0:1:W.x<=ct.x&&W.y<ct.y?this.clockwise=u.x>I.x?1:0:W.x>ct.x&&W.y<=ct.y?this.clockwise=u.y<I.y?0:1:this.clockwise=u.y<I.y?1:0,(I.x-W.x)/(I.y-W.y)==(ct.x-W.x)/(ct.y-W.y))return[]}else{f.curveOffset===void 0&&(f.curveOffset=this.curveOffset),Object(n.m)(f.curveOffset)&&(f.curveOffset=f.curveOffset[0]),f.curveOffset<0?this.clockwise=0:this.clockwise=1;var Xt={x:ct.x-W.x,y:ct.y-W.y},ee=Math.atan2(Xt.y,Xt.x);I={x:f.curveOffset*Math.cos(-Math.PI/2+ee)+Ct,y:f.curveOffset*Math.sin(-Math.PI/2+ee)+_t},u=mt(W,I,ct)}var ae=$t(W,u);return[{x:ae,y:ae}]},getPath:function(f){var u=[];return u.push(["M",f[0].x,f[0].y]),f.length===2?u.push(["L",f[1].x,f[1].y]):u.push(["A",f[1].x,f[1].y,0,0,this.clockwise,f[2].x,f[2].y]),u}},"single-edge"),yr.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(f){var u=f.controlPoints;if(!u||!u.length){var I=f.startPoint,W=f.endPoint;f.curveOffset===void 0&&(f.curveOffset=this.curveOffset),f.curvePosition===void 0&&(f.curvePosition=this.curvePosition),Object(n.m)(this.curveOffset)&&(f.curveOffset=f.curveOffset[0]),Object(n.m)(this.curvePosition)&&(f.curvePosition=f.curveOffset[0]),u=[ts(I,W,f.curvePosition,f.curveOffset)]}return u},getPath:function(f){var u=[];return u.push(["M",f[0].x,f[0].y]),u.push(["Q",f[1].x,f[1].y,f[2].x,f[2].y]),u}},"single-edge"),yr.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(f){var u=f.controlPoints;if(f.curveOffset===void 0&&(f.curveOffset=this.curveOffset),f.curvePosition===void 0&&(f.curvePosition=this.curvePosition),Object(n.t)(f.curveOffset)&&(f.curveOffset=[f.curveOffset,-f.curveOffset]),Object(n.t)(f.curvePosition)&&(f.curvePosition=[f.curvePosition,1-f.curvePosition]),!u||!u.length||u.length<2){var I=f.startPoint,W=f.endPoint;u=[ts(I,W,f.curvePosition[0],f.curveOffset[0]),ts(I,W,f.curvePosition[1],f.curveOffset[1])]}return u},getPath:function(f){var u=[];return u.push(["M",f[0].x,f[0].y]),u.push(["C",f[1].x,f[1].y,f[2].x,f[2].y,f[3].x,f[3].y]),u}},"single-edge"),yr.registerEdge("cubic-vertical",{curvePosition:[.5,.5],getControlPoints:function(f){var u=f.startPoint,I=f.endPoint;return f.curvePosition!==void 0&&(this.curvePosition=f.curvePosition),Object(n.t)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]),[{x:u.x,y:(I.y-u.y)*this.curvePosition[0]+u.y},{x:I.x,y:(I.y-u.y)*this.curvePosition[1]+u.y}]}},"cubic"),yr.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],getControlPoints:function(f){var u=f.startPoint,I=f.endPoint;return f.curvePosition!==void 0&&(this.curvePosition=f.curvePosition),Object(n.t)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]),[{x:(I.x-u.x)*this.curvePosition[0]+u.x,y:u.y},{x:(I.x-u.x)*this.curvePosition[1]+u.x,y:I.y}]}},"cubic"),yr.registerEdge("loop",{getPathPoints:function(f){return Yo(f)},getControlPoints:function(f){return f.controlPoints},afterDraw:function(f){f.controlPoints=void 0},afterUpdate:function(f){f.controlPoints=void 0}},"cubic");var ic={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:In.comboLabel.refX,refY:In.comboLabel.refY,options:{style:{stroke:In.defaultCombo.style.stroke,fill:In.defaultCombo.style.fill,lineWidth:In.defaultCombo.style.lineWidth},labelCfg:{style:{fill:In.comboLabel.style.fill,fontSize:In.comboLabel.style.fontSize}},stateStyles:Object(at.a)({},In.comboStateStyles)},getSize:function(f){var u=Object(n.c)(f.size||this.options.size||In.defaultCombo.size);return Object(n.m)(u)&&u.length===1&&(u=[u[0],u[0]]),Object(n.m)(u)||(u=[u,u]),u},getLabelStyleByPosition:function(f,u){var I=u.position||this.labelPosition,W=f.style,ct=f.padding||this.options.padding;Object(n.m)(ct)&&(ct=ct[0]);var Ct=u.refX,_t=u.refY;Object(n.s)(Ct)&&(Ct=this.refX),Object(n.s)(_t)&&(_t=this.refY);var Xt,ee=this.getSize(f),ae=(Math.max(W.r,ee[0]/2)||ee[0]/2)+ct;switch(I){case"top":Xt={x:0,y:-ae-_t,textBaseline:"bottom",textAlign:"center"};break;case"bottom":Xt={x:0,y:ae+_t,textBaseline:"bottom",textAlign:"center"};break;case"left":Xt={x:-ae+Ct,y:0,textAlign:"left"};break;case"center":Xt={x:0,y:0,text:f.label,textAlign:"center"};break;default:Xt={x:ae+Ct,y:0,textAlign:"right"}}return Xt.text=f.label,Xt},drawShape:function(f,u){var I=this.shapeType,W=this.getShapeStyle(f);return u.addShape(I,{attrs:W,draggable:!0,name:"combo-shape"})},updateShape:function(f,u,I){var W=u.get("keyShape");(f.animate===void 0?this.options.animate:f.animate)&&W.animate?W.animate(I,{duration:200,easing:"easeLinear"}):W.attr(Object(at.a)({},I)),this.updateLabel(f,u)}},ms=Object(at.a)(Object(at.a)({},ys),ic);yr.registerCombo("single-combo",ms),yr.registerCombo("circle",{options:{size:[In.defaultCombo.size[0],In.defaultCombo.size[0]],padding:In.defaultCombo.padding[0],animate:!0,style:{stroke:In.defaultCombo.style.stroke,fill:In.defaultCombo.style.fill,lineWidth:In.defaultCombo.style.lineWidth},labelCfg:{style:{fill:In.comboLabel.style.fill,fontSize:In.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:Object(at.a)({},In.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function(f,u){var I=this.getShapeStyle(f);return delete I.height,delete I.width,u.addShape("circle",{attrs:I,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(f){var u=this.options.style,I=f.padding||this.options.padding;Object(n.m)(I)&&(I=I[0]);var W,ct={stroke:f.color},Ct=Object(n.A)({},u,ct,f.style),_t=this.getSize(f);W=!Object(n.t)(Ct.r)||isNaN(Ct.r)?_t[0]/2||In.defaultCombo.style.r:Math.max(Ct.r,_t[0]/2)||_t[0]/2,Ct.r=W+I;var Xt=Object(at.a)({x:0,y:0},Ct);return f.style?f.style.r=W:f.style={r:W},Xt},update:function(f,u){var I=this.getSize(f),W=f.padding||this.options.padding;Object(n.m)(W)&&(W=W[0]);var ct=Object(n.c)(f.style),Ct=Math.max(ct.r,I[0]/2)||I[0]/2;ct.r=Ct+W;var _t=u.get("sizeCache");_t&&(_t.r=ct.r);var Xt={stroke:f.color},ee=u.get("keyShape"),ae=Object(n.A)({},ee.attr(),Xt,ct);f.style?f.style.r=Ct:f.style={r:Ct},this.updateShape(f,u,ae,!0)}},"single-combo"),yr.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:In.defaultCombo.style.stroke,fill:In.defaultCombo.style.fill,lineWidth:In.defaultCombo.style.lineWidth},labelCfg:{style:{fill:In.comboLabel.style.fill,fontSize:In.comboLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(at.a)({},In.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function(f,u){var I=this.getShapeStyle(f);return u.addShape("rect",{attrs:I,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(f,u){var I=u.position||this.labelPosition,W=f.style,ct=f.padding||this.options.padding;Object(n.t)(ct)&&(ct=[ct,ct,ct,ct]);var Ct=u.refX,_t=u.refY;Object(n.s)(Ct)&&(Ct=this.refX),Object(n.s)(_t)&&(_t=this.refY);var Xt,ee=W.width/2+ct[3],ae=W.height/2+ct[0];switch(I){case"top":Xt={x:0-ee+Ct,y:0-ae+_t,textBaseline:"top",textAlign:"left"};break;case"bottom":Xt={x:0,y:ae+_t,textBaseline:"bottom",textAlign:"center"};break;case"left":Xt={x:0-ee+_t,y:0,textAlign:"left"};break;case"center":Xt={x:0,y:0,text:f.label,textAlign:"center"};break;default:Xt={x:ee+Ct,y:0,textAlign:"right"}}return Xt.text=f.label,Xt},getShapeStyle:function(f){var u=this.options.style,I=f.padding||this.options.padding;Object(n.t)(I)&&(I=[I,I,I,I]);var W,ct,Ct={stroke:f.color},_t=Object(n.A)({},u,Ct,f.style),Xt=this.getSize(f);W=!Object(n.t)(_t.width)||isNaN(_t.width)?Xt[0]||In.defaultCombo.style.width:Math.max(_t.width,Xt[0])||Xt[0],ct=!Object(n.t)(_t.height)||isNaN(_t.height)?Xt[1]||In.defaultCombo.style.height:Math.max(_t.height,Xt[1])||Xt[1];var ee=-W/2-I[3],ae=-ct/2-I[0];_t.width=W+I[1]+I[3],_t.height=ct+I[0]+I[2];var je=Object(at.a)({x:ee,y:ae},_t);return f.style?(f.style.width=W,f.style.height=ct):f.style={width:W,height:ct},je},update:function(f,u){var I=this.getSize(f),W=f.padding||this.options.padding;Object(n.t)(W)&&(W=[W,W,W,W]);var ct=Object(n.c)(f.style),Ct=Math.max(ct.width,I[0])||I[0],_t=Math.max(ct.height,I[1])||I[1];ct.width=Ct+W[1]+W[3],ct.height=_t+W[0]+W[2];var Xt=u.get("sizeCache");Xt&&(Xt.width=ct.width,Xt.height=ct.height),ct.x=-Ct/2-W[3],ct.y=-_t/2-W[0];var ee={stroke:f.color},ae=u.get("keyShape"),je=Object(n.A)({},ae.attr(),ee,ct);f.style?(f.style.width=Ct,f.style.height=_t):f.style={width:Ct,height:_t},this.updateShape(f,u,je,!1)},updateShape:function(f,u,I){var W=u.get("keyShape");(f.animate===void 0?this.options.animate:f.animate)&&W.animate?W.animate(I,{duration:200,easing:"easeLinear"}):W.attr(Object(at.a)({},I)),this.updateLabel(f,u)}},"single-combo"),yr.registerNode("simple-circle",{options:{size:In.defaultNode.size,style:{x:0,y:0,stroke:In.defaultNode.style.stroke,fill:In.defaultNode.style.fill,lineWidth:In.defaultNode.style.lineWidth},labelCfg:{style:{fill:In.nodeLabel.style.fill,fontSize:In.nodeLabel.style.fontSize}},stateStyles:Object(at.a)({},In.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",drawShape:function(f,u){var I=this.getShapeStyle(f);return u.addShape("circle",{attrs:I,className:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(f){var u=this.getOptions(f).style,I={stroke:f.color},W=Object(n.e)({},u,I),ct=this.getSize(f)[0]/2;return Object(at.a)({x:0,y:0,r:ct},W)},update:function(f,u){var I=this.getSize(f),W={stroke:f.color,r:I[0]/2},ct=u.get("keyShape"),Ct=Object(n.e)({},ct.attr(),W,f.style);this.updateShape(f,u,Ct,!0)}},"single-node"),yr.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:In.defaultNode.style.stroke,fill:In.defaultNode.style.fill,lineWidth:In.defaultNode.style.lineWidth},labelCfg:{style:{fill:In.nodeLabel.style.fill,fontSize:In.nodeLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(at.a)({},In.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(f,u){var I=this.getShapeStyle(f);return u.addShape("rect",{attrs:I,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(f){var u=this.getOptions(f).style,I={stroke:f.color},W=Object(n.A)({},u,I),ct=this.getSize(f),Ct=W.width||ct[0],_t=W.height||ct[1];return Object(at.a)({x:-Ct/2,y:-_t/2,width:Ct,height:_t},W)},update:function(f,u){u.getContainer();var I=this.getOptions({}).style,W=this.getSize(f),ct=u.get("keyShape");f.size||(W[0]=ct.attr("width")||I.width,W[1]=ct.attr("height")||I.height);var Ct={stroke:f.color,x:-W[0]/2,y:-W[1]/2,width:W[0],height:W[1]},_t=Object(n.A)({},I,ct.attr(),Ct);_t=Object(n.A)(_t,f.style),this.updateShape(f,u,_t,!1)}},"single-node"),yr.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(f,u){var I=this.shapeType,W=this.getShapeStyle(f);delete W.fill;var ct=u.addShape(I,{attrs:W,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(f,ct),ct},drawClip:function(f,u){var I=this.getOptions(f).clipCfg;if(I.show){var W=I.type,ct=I.x,Ct=I.y,_t=I.style;if(W==="circle"){var Xt=I.r;u.setClip({type:"circle",attrs:Object(at.a)({r:Xt,x:ct,y:Ct},_t)})}else if(W==="rect"){var ee=I.width,ae=I.height,je=ct-ee/2,Fe=Ct-ae/2;u.setClip({type:"rect",attrs:Object(at.a)({x:je,y:Fe,width:ee,height:ae},_t)})}else if(W==="ellipse"){var _e=I.rx,Ke=I.ry;u.setClip({type:"ellipse",attrs:Object(at.a)({x:ct,y:Ct,rx:_e,ry:Ke},_t)})}else if(W==="polygon"){var bn=I.points;u.setClip({type:"polygon",attrs:Object(at.a)({points:bn},_t)})}else if(W==="path"){var wn=I.path;u.setClip({type:"path",attrs:Object(at.a)({path:wn},_t)})}}},getShapeStyle:function(f){var u=this.getOptions(f).style,I=this.getSize(f),W=this.getOptions(f).img,ct=I[0],Ct=I[1];return u&&(ct=u.width||I[0],Ct=u.height||I[1]),Object(at.a)({x:-ct/2,y:-Ct/2,width:ct,height:Ct,img:W},u)},updateShapeStyle:function(f,u){var I=u.getContainer(),W=this.itemType+"-shape",ct=I.find(function(_t){return _t.get("className")===W})||u.getKeyShape(),Ct=this.getShapeStyle(f);ct&&ct.attr(Ct)}},"single-node");var oa,fo=yr,bs=Yt.a.transform,zs=Object(at.a)(Object(at.a)(Object(at.a)(Object(at.a)(Object(at.a)({},S),l),A),b),{transform:bs,mat3:Yt.b});(function(){function kt(f){this.graph=f,this.layoutCfg=f.get("layout")||{},this.layoutType=this.layoutCfg.type,this.initLayout()}kt.prototype.initLayout=function(){},kt.prototype.getLayoutType=function(){return this.layoutCfg.type},kt.prototype.refreshLayout=function(){var f=this.graph;f&&(f.get("animate")?f.positionsAnimate():f.refreshPositions())},kt.prototype.changeLayout=function(f){var u=this.graph,I=this.layoutMethod;this.layoutType=f,this.layoutCfg=u.get("layout")||{},this.layoutCfg.type=f,I&&I.destroy(),this.layout()},kt.prototype.changeData=function(){var f=this.layoutMethod;f&&f.destroy(),this.layout()},kt.prototype.destroyLayout=function(){var f=this.layoutMethod,u=this.graph;f&&f.destroy(),u.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethod=void 0},kt.prototype.setDataFromGraph=function(){for(var f=[],u=[],I=[],W=this.graph.getNodes(),ct=this.graph.getEdges(),Ct=this.graph.getCombos(),_t=W.length,Xt=0;Xt<_t;Xt++){var ee=W[Xt];if(ee.isVisible()){var ae=ee.getModel();f.push(ae)}}var je=ct.length;for(Xt=0;Xt<je;Xt++){var Fe=ct[Xt];Fe&&!Fe.destroyed&&Fe.isVisible()&&((ae=Fe.getModel()).isComboEdge||u.push(ae))}var _e=Ct.length;for(Xt=0;Xt<_e;Xt++){var Ke=Ct[Xt];!Ke.destroyed&&Ke.isVisible()&&(ae=Ke.getModel(),I.push(ae))}return{nodes:f,edges:u,combos:I}},kt.prototype.relayout=function(f){var u=this.graph,I=this.layoutMethod,W=this.layoutCfg;if(f){this.data=this.setDataFromGraph();var ct=this.data.nodes;if(!ct)return!1;this.initPositions(W.center,ct),I.init(this.data)}this.layoutType==="force"&&(I.ticking=!1,I.forceSimulation.stop()),u.emit("beforelayout"),I.execute(f),I.isCustomLayout&&W.onLayoutEnd&&W.onLayoutEnd()},kt.prototype.layoutAnimate=function(){},kt.prototype.moveToZero=function(){var f=this.graph.get("data").nodes;if(f[0].x!==void 0&&f[0].x!==null&&!Zr(f[0].x)){for(var u=[0,0],I=f.length,W=0;W<I;W++){var ct=f[W];u[0]+=ct.x,u[1]+=ct.y}for(u[0]/=f.length,u[1]/=f.length,W=0;W<I;W++)(ct=f[W]).x-=u[0],ct.y-=u[1]}},kt.prototype.initPositions=function(f,u){var I=this.graph;if(!u)return!1;var W=!0,ct=.85*I.get("width"),Ct=.85*I.get("height"),_t=u.length,Xt=Math.ceil(Math.sqrt(_t)*(ct/Ct)),ee=ct/(Xt-1),ae=Ct/(Math.ceil(_t/Xt)-1);isFinite(ee)&&ee||(ee=0),isFinite(ae)&&ee||(ae=0);for(var je=f[0]-ct/2,Fe=f[1]-Ct/2,_e=u.length,Ke=0;Ke<_e;Ke++){var bn=u[Ke];Zr(bn.x)&&(W=!1,bn.x=Ke%Xt*ee+je),Zr(bn.y)&&(W=!1,bn.y=Math.floor(Ke/Xt)*ae+Fe)}return W},kt.prototype.destroy=function(){var f=this.layoutMethod;this.graph=null,f&&(f.destroy(),f.destroyed=!0),this.destroyed=!0}})(),function(kt){kt.CLICK="click",kt.DBLCLICK="dblclick",kt.MOUSEDOWN="mousedown",kt.MOUDEUP="mouseup",kt.CONTEXTMENU="contextmenu",kt.MOUSEENTER="mouseenter",kt.MOUSEOUT="mouseout",kt.MOUSEOVER="mouseover",kt.MOUSEMOVE="mousemove",kt.MOUSELEAVE="mouseleave",kt.DRAGSTART="dragstart",kt.DRAGEND="dragend",kt.DRAG="drag",kt.DRAGENTER="dragenter",kt.DRAGLEAVE="dragleave",kt.DRAGOVER="dragover",kt.DRAGOUT="dragout",kt.DDROP="drop",kt.KEYUP="keyup",kt.KEYDOWN="keydown",kt.WHEEL="wheel",kt.FOCUS="focus",kt.BLUR="blur",kt.TOUCHSTART="touchstart",kt.TOUCHMOVE="touchmove",kt.TOUCHEND="touchend",kt.NODE_CONTEXTMENU="node:contextmenu",kt.NODE_CLICK="node:click",kt.NODE_DBLCLICK="node:dblclick",kt.NODE_MOUSEDOWN="node:mousedown",kt.NODE_MOUSEUP="node:mouseup",kt.NODE_MOUSEENTER="node:mouseenter",kt.NODE_MOUSELEAVE="node:mouseleave",kt.NODE_MOUSEMOVE="node:mousemove",kt.NODE_MOUSEOUT="node:mouseout",kt.NODE_MOUSEOVER="node:mouseover",kt.NODE_DROP="node:drop",kt.NODE_DRAGOVER="node:dragover",kt.NODE_DRAGENTER="node:dragenter",kt.NODE_DRAGLEAVE="node:dragleave",kt.NODE_DRAGSTART="node:dragstart",kt.NODE_DRAG="node:drag",kt.NODE_DRAGEND="node:dragend",kt.COMBO_CONTEXTMENU="combo:contextmenu",kt.COMBO_CLICK="combo:click",kt.COMBO_DBLCLICK="combo:dblclick",kt.COMBO_MOUSEDOWN="combo:mousedown",kt.COMBO_MOUSEUP="combo:mouseup",kt.COMBO_MOUSEENTER="combo:mouseenter",kt.COMBO_MOUSELEAVE="combo:mouseleave",kt.COMBO_MOUSEMOVE="combo:mousemove",kt.COMBO_MOUSEOUT="combo:mouseout",kt.COMBO_MOUSEOVER="combo:mouseover",kt.COMBO_DROP="combo:drop",kt.COMBO_DRAGOVER="combo:dragover",kt.COMBO_DRAGENTER="combo:dragenter",kt.COMBO_DRAGLEAVE="combo:dragleave",kt.COMBO_DRAGSTART="combo:dragstart",kt.COMBO_DRAG="combo:drag",kt.COMBO_DRAGEND="combo:dragend",kt.EDGE_CONTEXTMENU="edge:contextmenu",kt.EDGE_CLICK="edge:click",kt.EDGE_DBLCLICK="edge:dblclick",kt.EDGE_MOUSEDOWN="edge:mousedown",kt.EDGE_MOUSEUP="edge:mouseup",kt.EDGE_MOUSEENTER="edge:mouseenter",kt.EDGE_MOUSELEAVE="edge:mouseleave",kt.EDGE_MOUSEMOVE="edge:mousemove",kt.EDGE_MOUSEOUT="edge:mouseout",kt.EDGE_MOUSEOVER="edge:mouseover",kt.EDGE_DROP="edge:drop",kt.EDGE_DRAGOVER="edge:dragover",kt.EDGE_DRAGENTER="edge:dragenter",kt.EDGE_DRAGLEAVE="edge:dragleave",kt.CANVAS_CONTEXTMENU="canvas:contextmenu",kt.CANVAS_CLICK="canvas:click",kt.CANVAS_DBLCLICK="canvas:dblclick",kt.CANVAS_MOUSEDOWN="canvas:mousedown",kt.CANVAS_MOUSEUP="canvas:mouseup",kt.CANVAS_MOUSEENTER="canvas:mouseenter",kt.CANVAS_MOUSELEAVE="canvas:mouseleave",kt.CANVAS_MOUSEMOVE="canvas:mousemove",kt.CANVAS_MOUSEOUT="canvas:mouseout",kt.CANVAS_MOUSEOVER="canvas:mouseover",kt.CANVAS_DROP="canvas:drop",kt.CANVAS_DRAGENTER="canvas:dragenter",kt.CANVAS_DRAGLEAVE="canvas:dragleave",kt.CANVAS_DRAGSTART="canvas:dragstart",kt.CANVAS_DRAG="canvas:drag",kt.CANVAS_DRAGEND="canvas:dragend",kt.BEFORERENDER="beforerender",kt.AFTERRENDER="afterrender",kt.BEFOREADDITEM="beforeadditem",kt.AFTERADDITEM="afteradditem",kt.BEFOREREMOVEITEM="beforeremoveitem",kt.AFTERREMOVEITEM="afterremoveitem",kt.BEFOREUPDATEITEM="beforeupdateitem",kt.AFTERUPDATEITEM="afterupdateitem",kt.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",kt.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",kt.BEFOREITEMSTATECHANGE="beforeitemstatechange",kt.AFTERITEMSTATECHANGE="afteritemstatechange",kt.BEFOREITEMREFRESH="beforeitemrefresh",kt.AFTERITEMREFRESH="afteritemrefresh",kt.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",kt.AFTERITEMSTATESCLEAR="afteritemstatesclear",kt.BEFOREMODECHANGE="beforemodechange",kt.AFTERMODECHANGE="aftermodechange",kt.BEFORELAYOUT="beforelayout",kt.AFTERLAYOUT="afterlayout",kt.BEFORECREATEEDGE="beforecreateedge",kt.AFTERCREATEEDGE="aftercreateedge",kt.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",kt.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",kt.BEFOREGRAPHREFRESH="beforegraphrefresh",kt.AFTERGRAPHREFRESH="aftergraphrefresh",kt.BEFOREANIMATE="beforeanimate",kt.AFTERANIMATE="afteranimate",kt.BEFOREPAINT="beforepaint",kt.AFTERPAINT="afterpaint",kt.BEFORECOLLAPSEEXPANDCOMBO="beforecollapseexpandcombo",kt.AFTERCOLLAPSEEXPANDCOMBO="aftercollapseexpandcombo",kt.GRAPHSTATECHANGE="graphstatechange",kt.AFTERACTIVATERELATIONS="afteractivaterelations",kt.NODESELECTCHANGE="nodeselectchange",kt.TOOLTIPCHANGE="tooltipchange",kt.WHEELZOOM="wheelzoom",kt.VIEWPORTCHANGE="viewportchange",kt.DRAGNODEEND="dragnodeend",kt.STACKCHANGE="stackchange"}(oa||(oa={})),fo.registerNode,fo.registerEdge,fo.registerCombo,xn.registerBehavior,fo.registerNode,fo.registerEdge,fo.registerCombo,xn.registerBehavior;var Ga=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,ct){W.__proto__=ct}||function(W,ct){for(var Ct in ct)Object.prototype.hasOwnProperty.call(ct,Ct)&&(W[Ct]=ct[Ct])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}(),_a=zs.applyMatrix,xu=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return Ga(f,kt),f.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},f.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},f.prototype.disableRefresh=function(){this.set("refresh",!1)},f.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},f.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},f.prototype.initViewport=function(){var u=this,I=this._cfgs,W=I.graph;if(!this.destroyed){var ct=this.get("container");Object(n.x)(ct)&&(ct=document.getElementById(ct));var Ct=Object(y.b)("<div class="+I.viewportClassName+`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff'>
      </div>`),_t=0,Xt=0,ee=!1,ae=0,je=0,Fe=0,_e=0,Ke=0,bn=0;ct.addEventListener("mousedown",function(wn){if(I.refresh=!1,wn.target===Ct){var Nn=Ct.style;Fe=parseInt(Nn.width,10),_e=parseInt(Nn.height,10);var Bn=u.get("width"),Gn=u.get("height");Fe>Bn||_e>Gn||(bn=W.getZoom(),Ke=u.get("ratio"),ee=!0,_t=wn.clientX,Xt=wn.clientY)}},!1),ct.addEventListener("mousemove",function(wn){if(ee&&!Object(n.s)(wn.clientX)&&!Object(n.s)(wn.clientY)){var Nn=u.get("width"),Bn=u.get("height"),Gn=Ct.style;ae=parseInt(Gn.left,10),je=parseInt(Gn.top,10),Fe=parseInt(Gn.width,10),_e=parseInt(Gn.height,10);var sr=_t-wn.clientX,ur=Xt-wn.clientY;ae-sr<0?sr=ae:ae-sr+Fe>=Nn&&(sr=0),je-ur<0?ur=je:je-ur+_e>=Bn&&(ur=0),ae-=sr,je-=ur,Object(y.c)(Ct,{left:ae+"px",top:je+"px"}),W.translate(sr*bn/Ke,ur*bn/Ke),_t=wn.clientX,Xt=wn.clientY}},!1),ct.addEventListener("mouseleave",function(){ee=!1,I.refresh=!0},!1),ct.addEventListener("mouseup",function(){ee=!1,I.refresh=!0},!1),this.set("viewport",Ct),ct.appendChild(Ct)}},f.prototype.updateViewport=function(){if(!this.destroyed){var u=this.get("ratio"),I=this.get("width"),W=this.get("height"),ct=this.get("graph"),Ct=ct.get("width"),_t=Ct/ct.get("height"),Xt=ct.getGroup(),ee=Xt.getCanvasBBox(),ae=[(ee.minX+ee.maxX)/2,(ee.minY+ee.maxY)/2],je=[ee.maxX-ee.minX,ee.maxY-ee.minY],Fe={centerX:ae[0],centerY:ae[1],width:0,height:0,minX:0,minY:0};ee[0]/ee[1]>_t?(Fe.width=je[0],Fe.height=Fe.width/_t):(Fe.height=je[1],Fe.width=Fe.height*_t),Fe.minX=ae[0]-Fe.width/2,Fe.minY=ae[1]-Fe.height/2;var _e=Xt.getMatrix();_e||(_e=[1,0,0,0,1,0,0,0,1]);var Ke=Z.a.invert([1,0,0,0,1,0,0,0,1],_e),bn=_a({x:Fe.minX,y:Fe.minY},Ke),wn=ct.getCanvasByPoint(bn.x,bn.y),Nn=this.get("viewport");Nn||this.initViewport();var Bn=Ct/Fe.width,Gn=Bn*I,sr=Bn*W,ur=I*-wn.x/Fe.width,Or=W*-wn.y/Fe.height,ei=ur+Gn,Ci=Or+sr;ur<0&&(Gn+=ur,ur=0),ei>I&&(Gn-=ei-I),Or<0&&(sr+=Or,Or=0),Ci>W&&(sr-=Ci-W),this.set("ratio",u);var Rr=ur+"px",yi=Or+"px";Object(y.c)(Nn,{left:Rr,top:yi,width:Gn+"px",height:sr+"px"})}},f.prototype.init=function(){this.initContainer()},f.prototype.initContainer=function(){var u=this.get("graph"),I=u.get("width"),W=u.get("height")/I,ct=this.get("className"),Ct=this.get("container"),_t=this.get("width"),Xt=this.get("height");_t||Xt||(_t=200),_t?(Xt=W*_t,this.set("height",Xt)):(_t=1/W*Xt,this.set("width",_t));var ee=Object(y.b)("<div class='"+ct+"' style='width: "+_t+"px; height: "+Xt+"px; overflow: hidden; position: relative;'></div>");Object(n.x)(Ct)&&(Ct=document.getElementById(Ct)),Ct?Ct.appendChild(ee):u.get("container").appendChild(ee),this.set("container",ee);var ae=Object(y.b)('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');ee.appendChild(ae);var je=Object(y.b)('<span style="display: table-cell; vertical-align: middle; "></span>');ae.appendChild(je),this.set("containerDOM",ae),this.set("containerSpan",je);var Fe=Object(y.b)('<img alt="" src="'+this.get("graphImg")+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');this.set("imgDOM",Fe),this.updateImgSize(),je.appendChild(Fe),this.updateCanvas()},f.prototype.updateImgSize=function(){var u=this.get("imgDOM"),I=this.get("width"),W=this.get("height");u.onload=function(){var ct=function(Ct,_t){var Xt,ee;if(Ct.naturalWidth)Xt=Ct.naturalWidth,ee=Ct.naturalHeight;else{var ae=new Image;ae.src=Ct.src,ae.onload=function(){_t&&_t(ae.width,ae.height)}}return[Xt,ee]}(u);ct[0]>ct[1]?u.width=I:u.height=W}},f.prototype.updateCanvas=function(){if(this.get("refresh")){var u=this.get("graph");if(!u.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var I=this.get("width")/u.get("canvas").getCanvasBBox().width;this.set("ratio",I),this.updateViewport()}}},f.prototype.getViewport=function(){return this.get("viewport")},f.prototype.getContainer=function(){return this.get("container")},f.prototype.updateGraphImg=function(u){this.get("imgDOM").remove(),this.set("graphImg",u);var I=Object(y.b)('<img alt="" src="'+u+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');this.set("imgDOM",I),I.src=u,this.updateImgSize(),this.get("containerSpan").appendChild(I),this.updateCanvas()},f.prototype.destroy=function(){var u=this.get("container");u.parentNode.removeChild(u)},f}(s),Ou=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,ct){W.__proto__=ct}||function(W,ct){for(var Ct in ct)Object.prototype.hasOwnProperty.call(ct,Ct)&&(W[Ct]=ct[Ct])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}(),la=function(){return(la=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var ct in u=arguments[I])Object.prototype.hasOwnProperty.call(u,ct)&&(f[ct]=u[ct]);return f}).apply(this,arguments)},rs=zs.distance,Ta={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},Vs={PluginBase:s,Menu:C,Grid:O,Minimap:ut,Bundling:q,ToolBar:k,Tooltip:g,Fisheye:P,TimeBar:Ce,ImageMinimap:xu,EdgeFilterLens:function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return Ou(f,kt),f.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:Object(n.c)(Ta),showLabel:"edge",scaleRBy:"wheel"}},f.prototype.getEvents=function(){var u;switch(this.get("trigger")){case"click":u={click:"filter"};break;case"drag":u={click:"createDelegate"};break;default:u={mousemove:"filter"}}return u},f.prototype.init=function(){var u=this.get("showLabel"),I=u==="node"||u==="both",W=u==="edge"||u==="both";this.set("showNodeLabel",I),this.set("showEdgeLabel",W),this.get("shouldShow")||this.set("shouldShow",function(){return!0})},f.prototype.createDelegate=function(u){var I=this,W=I.get("delegate");W&&!W.destroyed||(I.filter(u),(W=I.get("delegate")).on("dragstart",function(ct){}),W.on("drag",function(ct){I.filter(ct)}),this.get("scaleRBy")==="wheel"&&W.on("mousewheel",function(ct){I.scaleRByWheel(ct)}))},f.prototype.scaleRByWheel=function(u){if(u&&u.originalEvent){u.preventDefault&&u.preventDefault();var I,W=this.get("graph"),ct=this.get("delegate");(ct?{x:ct.attr("x"),y:ct.attr("y")}:void 0)||W.getPointByClient(u.clientX,u.clientY),I=u.originalEvent.wheelDelta<0?.95:1/.95;var Ct=this.get("maxR"),_t=this.get("minR"),Xt=this.get("r");(Xt>(Ct||W.get("height"))&&I>1||Xt<(_t||.05*W.get("height"))&&I<1)&&(I=1),Xt*=I,this.set("r",Xt),this.filter(u)}},f.prototype.filter=function(u){var I=this.get("graph"),W=I.getNodes(),ct={},Ct=this.get("r"),_t=this.get("type"),Xt={x:u.x,y:u.y};this.updateDelegate(Xt,Ct);var ee=this.get("shouldShow"),ae=this.get("vShapes");ae&&ae.forEach(function(wn){wn.remove(),wn.destroy()}),ae=[],W.forEach(function(wn){var Nn=wn.getModel(),Bn=Nn.x,Gn=Nn.y;rs({x:Bn,y:Gn},Xt)<Ct&&(ct[Nn.id]=wn)});var je=I.getEdges(),Fe=[];je.forEach(function(wn){var Nn=wn.getModel(),Bn=Nn.source,Gn=Nn.target;ee(Nn)&&(_t==="only-source"||_t==="one"?ct[Bn]&&!ct[Gn]&&Fe.push(wn):_t==="only-target"||_t==="one"?ct[Gn]&&!ct[Bn]&&Fe.push(wn):_t==="both"&&ct[Bn]&&ct[Gn]&&Fe.push(wn))});var _e=this.get("showNodeLabel"),Ke=this.get("showEdgelabel"),bn=I.get("group");Fe.forEach(function(wn){wn.get("group").get("children").forEach(function(Nn){var Bn=Nn.get("type"),Gn=bn.addShape(Bn,{attrs:Nn.attr()});ae.push(Gn),_e&&Bn==="text"&&Gn.set("visible",!0)})}),Object.keys(ct).forEach(function(wn){var Nn=ct[wn].get("group").clone();if(bn.add(Nn),ae.push(Nn),Ke)for(var Bn=Nn.get("children"),Gn=0;Gn<Bn.length;Gn++){var sr=Bn[Gn];sr.get("type")==="text"&&sr.set("visible",!0)}}),this.set("vShapes",ae)},f.prototype.updateParams=function(u){var I=u.r,W=u.trigger,ct=u.minR,Ct=u.maxR,_t=u.scaleRBy,Xt=u.showLabel,ee=u.shouldShow;if(isNaN(u.r)||this.set("r",I),isNaN(Ct)||this.set("maxR",Ct),isNaN(ct)||this.set("minR",ct),W!=="mousemove"&&W!=="click"||this.set("trigger",W),_t==="wheel"||_t==="unset"){this.set("scaleRBy",_t),this.get("delegate").remove(),this.get("delegate").destroy();var ae=this.get("dPercentText");ae&&(ae.remove(),ae.destroy())}Xt!=="node"&&Xt!=="both"||this.set("showNodeLabel",!0),Xt!=="edge"&&Xt!=="both"||this.set("showEdgeLabel",!0),ee&&this.set("shouldShow",ee)},f.prototype.updateDelegate=function(u,I){var W=this,ct=W.get("graph"),Ct=W.get("delegate");if(!Ct||Ct.destroyed){var _t=ct.get("group"),Xt=W.get("delegateStyle")||Ta;Ct=_t.addShape("circle",{attrs:la({r:I,x:u.x,y:u.y},Xt),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&Ct.on("mousewheel",function(ee){W.scaleRByWheel(ee)})}else Ct.attr({x:u.x,y:u.y,r:I});W.set("delegate",Ct)},f.prototype.clear=function(){var u=this.get("vShapes");u&&u.forEach(function(W){W.remove(),W.destroy()}),u=[],this.set("vShapes",u);var I=this.get("delegate");I&&!I.destroyed&&(I.remove(),I.destroy())},f.prototype.destroy=function(){this.clear()},f}(s)};E.a=Vs},function(a,E,e){"use strict";e.d(E,"b",function(){return p}),e.d(E,"c",function(){return b}),e.d(E,"a",function(){return S});var r=e(22);function p(l,A){var j=l.cfg.el,y=l.attr(),n={dx:y.shadowOffsetX,dy:y.shadowOffsetY,blur:y.shadowBlur,color:y.shadowColor};if(n.dx||n.dy||n.blur||n.color){var s=A.find("filter",n);s||(s=A.addShadow(n)),j.setAttribute("filter","url(#"+s+")")}else j.removeAttribute("filter")}function b(l){var A=l.attr().matrix;if(A){for(var j=l.cfg.el,y=[],n=0;n<9;n+=3)y.push(A[n]+","+A[n+1]);(y=y.join(",")).indexOf("NaN")===-1?j.setAttribute("transform","matrix("+y+")"):console.warn("invalid matrix:",A)}}function S(l,A){var j=l.getClip(),y=l.get("el");if(j){if(j&&!y.hasAttribute("clip-path")){Object(r.a)(j),j.createPath(A);var n=A.addClip(j);y.setAttribute("clip-path","url(#"+n+")")}}else y.removeAttribute("clip-path")}},function(a,E,e){"use strict";var r=e(24),p=e(46).Graph;function b(l,A,j,y){var n;do n=r.uniqueId(y);while(l.hasNode(n));return j.dummy=A,l.setNode(n,j),n}function S(l){return r.max(r.map(l.nodes(),function(A){var j=l.node(A).rank;if(!r.isUndefined(j))return j}))}a.exports={addDummyNode:b,simplify:function(A){var j=new p().setGraph(A.graph());return r.forEach(A.nodes(),function(y){j.setNode(y,A.node(y))}),r.forEach(A.edges(),function(y){var n=j.edge(y.v,y.w)||{weight:0,minlen:1},s=A.edge(y);j.setEdge(y.v,y.w,{weight:n.weight+s.weight,minlen:Math.max(n.minlen,s.minlen)})}),j},asNonCompoundGraph:function(A){var j=new p({multigraph:A.isMultigraph()}).setGraph(A.graph());return r.forEach(A.nodes(),function(y){A.children(y).length||j.setNode(y,A.node(y))}),r.forEach(A.edges(),function(y){j.setEdge(y,A.edge(y))}),j},successorWeights:function(A){var j=r.map(A.nodes(),function(y){var n={};return r.forEach(A.outEdges(y),function(s){n[s.w]=(n[s.w]||0)+A.edge(s).weight}),n});return r.zipObject(A.nodes(),j)},predecessorWeights:function(A){var j=r.map(A.nodes(),function(y){var n={};return r.forEach(A.inEdges(y),function(s){n[s.v]=(n[s.v]||0)+A.edge(s).weight}),n});return r.zipObject(A.nodes(),j)},intersectRect:function(A,j){var y,n,s=A.x,h=A.y,M=j.x-s,O=j.y-h,T=A.width/2,v=A.height/2;if(!M&&!O)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(O)*T>Math.abs(M)*v?(O<0&&(v=-v),y=v*M/O,n=v):(M<0&&(T=-T),y=T,n=T*O/M),{x:s+y,y:h+n}},buildLayerMatrix:function(A){var j=r.map(r.range(S(A)+1),function(){return[]});return r.forEach(A.nodes(),function(y){var n=A.node(y),s=n.rank;r.isUndefined(s)||(j[s][n.order]=y)}),j},normalizeRanks:function(A){var j=r.min(r.map(A.nodes(),function(y){return A.node(y).rank}));r.forEach(A.nodes(),function(y){var n=A.node(y);r.has(n,"rank")&&(n.rank-=j)})},removeEmptyRanks:function(A){var j=r.min(r.map(A.nodes(),function(h){return A.node(h).rank})),y=[];r.forEach(A.nodes(),function(h){var M=A.node(h).rank-j;y[M]||(y[M]=[]),y[M].push(h)});var n=0,s=A.graph().nodeRankFactor;r.forEach(y,function(h,M){r.isUndefined(h)&&M%s!=0?--n:n&&r.forEach(h,function(O){A.node(O).rank+=n})})},addBorderNode:function(A,j,y,n){var s={width:0,height:0};return arguments.length>=4&&(s.rank=y,s.order=n),b(A,"border",s,j)},maxRank:S,partition:function(A,j){var y={lhs:[],rhs:[]};return r.forEach(A,function(n){j(n)?y.lhs.push(n):y.rhs.push(n)}),y},time:function(A,j){var y=r.now();try{return j()}finally{console.log(A+" time: "+(r.now()-y)+"ms")}},notime:function(A,j){return j()}}},function(a,E,e){"use strict";var r={};e.r(r),e.d(r,"proccessToFunc",function(){return j}),e.d(r,"buildTextureData",function(){return y}),e.d(r,"buildTextureDataWithOneEdgeAttr",function(){return n}),e.d(r,"buildTextureDataWithTwoEdgeAttr",function(){return s}),e.d(r,"attributesToTextureData",function(){return h}),e.d(r,"arrayToTextureData",function(){return M}),e.d(r,"radialLayout",function(){return O});var p=e(1),b=e(123),S=e(5),l=e(0),A=S.n.traverseTree,j=function(C,D){return C?Object(l.t)(C)?function(Y){return C}:C:function(Y){return D||1}},y=function(C,D){var Y=[],Z=[],et={},dt=0;for(dt=0;dt<C.length;dt++){var ht=C[dt];et[ht.id]=dt,Y.push(ht.x),Y.push(ht.y),Y.push(0),Y.push(0),Z.push([])}for(dt=0;dt<D.length;dt++){var St=D[dt];Z[et[St.source]].push(et[St.target]),Z[et[St.target]].push(et[St.source])}var wt=0;for(dt=0;dt<C.length;dt++){var xt=Y.length,ft=Z[dt],Bt=ft.length;Y[4*dt+2]=xt,Y[4*dt+3]=ft.length,wt=Math.max(wt,ft.length);for(var Rt=0;Rt<Bt;++Rt){var Ot=ft[Rt];Y.push(+Ot)}}for(;Y.length%4!=0;)Y.push(0);return{array:new Float32Array(Y),maxEdgePerVetex:wt}},n=function(C,D,Y){var Z=[],et=[],dt={},ht=0;for(ht=0;ht<C.length;ht++){var St=C[ht];dt[St.id]=ht,Z.push(St.x),Z.push(St.y),Z.push(0),Z.push(0),et.push([])}for(ht=0;ht<D.length;ht++){var wt=D[ht];et[dt[wt.source]].push(dt[wt.target]),et[dt[wt.source]].push(Y(wt)),et[dt[wt.target]].push(dt[wt.source]),et[dt[wt.target]].push(Y(wt))}var xt=0;for(ht=0;ht<C.length;ht++){var ft=Z.length,Bt=et[ht],Rt=Bt.length;Z[4*ht+2]=ft,Z[4*ht+3]=Rt/2,xt=Math.max(xt,Rt/2);for(var Ot=0;Ot<Rt;++Ot){var X=Bt[Ot];Z.push(+X)}}for(;Z.length%4!=0;)Z.push(0);return{array:new Float32Array(Z),maxEdgePerVetex:xt}},s=function(C,D,Y,Z){var et=[],dt=[],ht={},St=0;for(St=0;St<C.length;St++){var wt=C[St];ht[wt.id]=St,et.push(wt.x),et.push(wt.y),et.push(0),et.push(0),dt.push([])}for(St=0;St<D.length;St++){var xt=D[St];dt[ht[xt.source]].push(ht[xt.target]),dt[ht[xt.source]].push(Y(xt)),dt[ht[xt.source]].push(Z(xt)),dt[ht[xt.source]].push(0),dt[ht[xt.target]].push(ht[xt.source]),dt[ht[xt.target]].push(Y(xt)),dt[ht[xt.target]].push(Z(xt)),dt[ht[xt.target]].push(0)}var ft=0;for(St=0;St<C.length;St++){var Bt=et.length,Rt=dt[St],Ot=Rt.length;et[4*St+2]=Bt+1048576*Ot/4,et[4*St+3]=0,ft=Math.max(ft,Ot/4);for(var X=0;X<Ot;++X){var ut=Rt[X];et.push(+ut)}}for(;et.length%4!=0;)et.push(0);return{array:new Float32Array(et),maxEdgePerVetex:ft}},h=function(C,D){var Y=[],Z=C.length,et={};return D.forEach(function(dt){C.forEach(function(ht,St){if(et[dt[ht]]===void 0&&(et[dt[ht]]=Object.keys(et).length),Y.push(et[dt[ht]]),St===Z-1)for(;Y.length%4!=0;)Y.push(0)})}),{array:new Float32Array(Y),count:Object.keys(et).length}},M=function(C){for(var D=[],Y=C.length,Z=C[0].length,et=function(St){C.forEach(function(wt,xt){if(D.push(wt[St]),xt===Y-1)for(;D.length%4!=0;)D.push(0)})},dt=0;dt<Z;dt++)et(dt);return new Float32Array(D)},O=function(C,D){var Y={x:1/0,y:1/0},Z={x:-1/0,y:-1/0},et="x",dt="y";D&&["V","TB","BT"].indexOf(D)>=0&&(dt="x",et="y");var ht=0;A(C,function(xt){return ht++,xt.x>Z.x&&(Z.x=xt.x),xt.x<Y.x&&(Y.x=xt.x),xt.y>Z.y&&(Z.y=xt.y),xt.y<Y.y&&(Y.y=xt.y),!0});var St=2*Math.PI/ht,wt=Z[dt]-Y[dt];return wt===0||A(C,function(xt){var ft=(xt[dt]-Y[dt])/wt*(2*Math.PI-St)+St,Bt=Math.abs(et==="x"?xt.x-C.x:xt.y-C.y);return xt.x=Bt*Math.cos(ft),xt.y=Bt*Math.sin(ft),!0}),C},T=e(121),v=Object(p.a)(Object(p.a)(Object(p.a)(Object(p.a)({},S.n),b),r),T);E.a=v},function(a,E,e){"use strict";function r(S,l){var A=[],j=S[0],y=S[1],n=S[2],s=S[3],h=S[4],M=S[5],O=S[6],T=S[7],v=S[8],m=l[0],C=l[1],D=l[2],Y=l[3],Z=l[4],et=l[5],dt=l[6],ht=l[7],St=l[8];return A[0]=m*j+C*s+D*O,A[1]=m*y+C*h+D*T,A[2]=m*n+C*M+D*v,A[3]=Y*j+Z*s+et*O,A[4]=Y*y+Z*h+et*T,A[5]=Y*n+Z*M+et*v,A[6]=dt*j+ht*s+St*O,A[7]=dt*y+ht*h+St*T,A[8]=dt*n+ht*M+St*v,A}function p(S,l){var A=[],j=l[0],y=l[1];return A[0]=S[0]*j+S[3]*y+S[6],A[1]=S[1]*j+S[4]*y+S[7],A}function b(S){var l=[],A=S[0],j=S[1],y=S[2],n=S[3],s=S[4],h=S[5],M=S[6],O=S[7],T=S[8],v=T*s-h*O,m=-T*n+h*M,C=O*n-s*M,D=A*v+j*m+y*C;return D?(D=1/D,l[0]=v*D,l[1]=(-T*j+y*O)*D,l[2]=(h*j-y*s)*D,l[3]=m*D,l[4]=(T*A-y*M)*D,l[5]=(-h*A+y*n)*D,l[6]=C*D,l[7]=(-O*A+j*M)*D,l[8]=(s*A-j*n)*D,l):null}e.d(E,"b",function(){return r}),e.d(E,"c",function(){return p}),e.d(E,"a",function(){return b})},function(a,E,e){"use strict";e.r(E),e.d(E,"create",function(){return p}),e.d(E,"clone",function(){return b}),e.d(E,"length",function(){return S}),e.d(E,"fromValues",function(){return l}),e.d(E,"copy",function(){return A}),e.d(E,"set",function(){return j}),e.d(E,"add",function(){return y}),e.d(E,"subtract",function(){return n}),e.d(E,"multiply",function(){return s}),e.d(E,"divide",function(){return h}),e.d(E,"ceil",function(){return M}),e.d(E,"floor",function(){return O}),e.d(E,"min",function(){return T}),e.d(E,"max",function(){return v}),e.d(E,"round",function(){return m}),e.d(E,"scale",function(){return C}),e.d(E,"scaleAndAdd",function(){return D}),e.d(E,"distance",function(){return Y}),e.d(E,"squaredDistance",function(){return Z}),e.d(E,"squaredLength",function(){return et}),e.d(E,"negate",function(){return dt}),e.d(E,"inverse",function(){return ht}),e.d(E,"normalize",function(){return St}),e.d(E,"dot",function(){return wt}),e.d(E,"cross",function(){return xt}),e.d(E,"lerp",function(){return ft}),e.d(E,"hermite",function(){return Bt}),e.d(E,"bezier",function(){return Rt}),e.d(E,"random",function(){return Ot}),e.d(E,"transformMat4",function(){return X}),e.d(E,"transformMat3",function(){return ut}),e.d(E,"transformQuat",function(){return vt}),e.d(E,"rotateX",function(){return pt}),e.d(E,"rotateY",function(){return Et}),e.d(E,"rotateZ",function(){return q}),e.d(E,"angle",function(){return st}),e.d(E,"zero",function(){return it}),e.d(E,"str",function(){return z}),e.d(E,"exactEquals",function(){return P}),e.d(E,"equals",function(){return H}),e.d(E,"sub",function(){return d}),e.d(E,"mul",function(){return g}),e.d(E,"div",function(){return F}),e.d(E,"dist",function(){return V}),e.d(E,"sqrDist",function(){return tt}),e.d(E,"len",function(){return ot}),e.d(E,"sqrLen",function(){return at}),e.d(E,"forEach",function(){return At});var r=e(11);function p(){var yt=new r.a(3);return r.a!=Float32Array&&(yt[0]=0,yt[1]=0,yt[2]=0),yt}function b(yt){var gt=new r.a(3);return gt[0]=yt[0],gt[1]=yt[1],gt[2]=yt[2],gt}function S(yt){var gt=yt[0],bt=yt[1],Tt=yt[2];return Math.hypot(gt,bt,Tt)}function l(yt,gt,bt){var Tt=new r.a(3);return Tt[0]=yt,Tt[1]=gt,Tt[2]=bt,Tt}function A(yt,gt){return yt[0]=gt[0],yt[1]=gt[1],yt[2]=gt[2],yt}function j(yt,gt,bt,Tt){return yt[0]=gt,yt[1]=bt,yt[2]=Tt,yt}function y(yt,gt,bt){return yt[0]=gt[0]+bt[0],yt[1]=gt[1]+bt[1],yt[2]=gt[2]+bt[2],yt}function n(yt,gt,bt){return yt[0]=gt[0]-bt[0],yt[1]=gt[1]-bt[1],yt[2]=gt[2]-bt[2],yt}function s(yt,gt,bt){return yt[0]=gt[0]*bt[0],yt[1]=gt[1]*bt[1],yt[2]=gt[2]*bt[2],yt}function h(yt,gt,bt){return yt[0]=gt[0]/bt[0],yt[1]=gt[1]/bt[1],yt[2]=gt[2]/bt[2],yt}function M(yt,gt){return yt[0]=Math.ceil(gt[0]),yt[1]=Math.ceil(gt[1]),yt[2]=Math.ceil(gt[2]),yt}function O(yt,gt){return yt[0]=Math.floor(gt[0]),yt[1]=Math.floor(gt[1]),yt[2]=Math.floor(gt[2]),yt}function T(yt,gt,bt){return yt[0]=Math.min(gt[0],bt[0]),yt[1]=Math.min(gt[1],bt[1]),yt[2]=Math.min(gt[2],bt[2]),yt}function v(yt,gt,bt){return yt[0]=Math.max(gt[0],bt[0]),yt[1]=Math.max(gt[1],bt[1]),yt[2]=Math.max(gt[2],bt[2]),yt}function m(yt,gt){return yt[0]=Math.round(gt[0]),yt[1]=Math.round(gt[1]),yt[2]=Math.round(gt[2]),yt}function C(yt,gt,bt){return yt[0]=gt[0]*bt,yt[1]=gt[1]*bt,yt[2]=gt[2]*bt,yt}function D(yt,gt,bt,Tt){return yt[0]=gt[0]+bt[0]*Tt,yt[1]=gt[1]+bt[1]*Tt,yt[2]=gt[2]+bt[2]*Tt,yt}function Y(yt,gt){var bt=gt[0]-yt[0],Tt=gt[1]-yt[1],Dt=gt[2]-yt[2];return Math.hypot(bt,Tt,Dt)}function Z(yt,gt){var bt=gt[0]-yt[0],Tt=gt[1]-yt[1],Dt=gt[2]-yt[2];return bt*bt+Tt*Tt+Dt*Dt}function et(yt){var gt=yt[0],bt=yt[1],Tt=yt[2];return gt*gt+bt*bt+Tt*Tt}function dt(yt,gt){return yt[0]=-gt[0],yt[1]=-gt[1],yt[2]=-gt[2],yt}function ht(yt,gt){return yt[0]=1/gt[0],yt[1]=1/gt[1],yt[2]=1/gt[2],yt}function St(yt,gt){var bt=gt[0],Tt=gt[1],Dt=gt[2],Ut=bt*bt+Tt*Tt+Dt*Dt;return Ut>0&&(Ut=1/Math.sqrt(Ut)),yt[0]=gt[0]*Ut,yt[1]=gt[1]*Ut,yt[2]=gt[2]*Ut,yt}function wt(yt,gt){return yt[0]*gt[0]+yt[1]*gt[1]+yt[2]*gt[2]}function xt(yt,gt,bt){var Tt=gt[0],Dt=gt[1],Ut=gt[2],jt=bt[0],Vt=bt[1],Ht=bt[2];return yt[0]=Dt*Ht-Ut*Vt,yt[1]=Ut*jt-Tt*Ht,yt[2]=Tt*Vt-Dt*jt,yt}function ft(yt,gt,bt,Tt){var Dt=gt[0],Ut=gt[1],jt=gt[2];return yt[0]=Dt+Tt*(bt[0]-Dt),yt[1]=Ut+Tt*(bt[1]-Ut),yt[2]=jt+Tt*(bt[2]-jt),yt}function Bt(yt,gt,bt,Tt,Dt,Ut){var jt=Ut*Ut,Vt=jt*(2*Ut-3)+1,Ht=jt*(Ut-2)+Ut,re=jt*(Ut-1),pe=jt*(3-2*Ut);return yt[0]=gt[0]*Vt+bt[0]*Ht+Tt[0]*re+Dt[0]*pe,yt[1]=gt[1]*Vt+bt[1]*Ht+Tt[1]*re+Dt[1]*pe,yt[2]=gt[2]*Vt+bt[2]*Ht+Tt[2]*re+Dt[2]*pe,yt}function Rt(yt,gt,bt,Tt,Dt,Ut){var jt=1-Ut,Vt=jt*jt,Ht=Ut*Ut,re=Vt*jt,pe=3*Ut*Vt,ye=3*Ht*jt,we=Ht*Ut;return yt[0]=gt[0]*re+bt[0]*pe+Tt[0]*ye+Dt[0]*we,yt[1]=gt[1]*re+bt[1]*pe+Tt[1]*ye+Dt[1]*we,yt[2]=gt[2]*re+bt[2]*pe+Tt[2]*ye+Dt[2]*we,yt}function Ot(yt,gt){gt=gt||1;var bt=2*r.c()*Math.PI,Tt=2*r.c()-1,Dt=Math.sqrt(1-Tt*Tt)*gt;return yt[0]=Math.cos(bt)*Dt,yt[1]=Math.sin(bt)*Dt,yt[2]=Tt*gt,yt}function X(yt,gt,bt){var Tt=gt[0],Dt=gt[1],Ut=gt[2],jt=bt[3]*Tt+bt[7]*Dt+bt[11]*Ut+bt[15];return jt=jt||1,yt[0]=(bt[0]*Tt+bt[4]*Dt+bt[8]*Ut+bt[12])/jt,yt[1]=(bt[1]*Tt+bt[5]*Dt+bt[9]*Ut+bt[13])/jt,yt[2]=(bt[2]*Tt+bt[6]*Dt+bt[10]*Ut+bt[14])/jt,yt}function ut(yt,gt,bt){var Tt=gt[0],Dt=gt[1],Ut=gt[2];return yt[0]=Tt*bt[0]+Dt*bt[3]+Ut*bt[6],yt[1]=Tt*bt[1]+Dt*bt[4]+Ut*bt[7],yt[2]=Tt*bt[2]+Dt*bt[5]+Ut*bt[8],yt}function vt(yt,gt,bt){var Tt=bt[0],Dt=bt[1],Ut=bt[2],jt=bt[3],Vt=gt[0],Ht=gt[1],re=gt[2],pe=Dt*re-Ut*Ht,ye=Ut*Vt-Tt*re,we=Tt*Ht-Dt*Vt,Re=Dt*we-Ut*ye,He=Ut*pe-Tt*we,pn=Tt*ye-Dt*pe,fn=2*jt;return pe*=fn,ye*=fn,we*=fn,Re*=2,He*=2,pn*=2,yt[0]=Vt+pe+Re,yt[1]=Ht+ye+He,yt[2]=re+we+pn,yt}function pt(yt,gt,bt,Tt){var Dt=[],Ut=[];return Dt[0]=gt[0]-bt[0],Dt[1]=gt[1]-bt[1],Dt[2]=gt[2]-bt[2],Ut[0]=Dt[0],Ut[1]=Dt[1]*Math.cos(Tt)-Dt[2]*Math.sin(Tt),Ut[2]=Dt[1]*Math.sin(Tt)+Dt[2]*Math.cos(Tt),yt[0]=Ut[0]+bt[0],yt[1]=Ut[1]+bt[1],yt[2]=Ut[2]+bt[2],yt}function Et(yt,gt,bt,Tt){var Dt=[],Ut=[];return Dt[0]=gt[0]-bt[0],Dt[1]=gt[1]-bt[1],Dt[2]=gt[2]-bt[2],Ut[0]=Dt[2]*Math.sin(Tt)+Dt[0]*Math.cos(Tt),Ut[1]=Dt[1],Ut[2]=Dt[2]*Math.cos(Tt)-Dt[0]*Math.sin(Tt),yt[0]=Ut[0]+bt[0],yt[1]=Ut[1]+bt[1],yt[2]=Ut[2]+bt[2],yt}function q(yt,gt,bt,Tt){var Dt=[],Ut=[];return Dt[0]=gt[0]-bt[0],Dt[1]=gt[1]-bt[1],Dt[2]=gt[2]-bt[2],Ut[0]=Dt[0]*Math.cos(Tt)-Dt[1]*Math.sin(Tt),Ut[1]=Dt[0]*Math.sin(Tt)+Dt[1]*Math.cos(Tt),Ut[2]=Dt[2],yt[0]=Ut[0]+bt[0],yt[1]=Ut[1]+bt[1],yt[2]=Ut[2]+bt[2],yt}function st(yt,gt){var bt=yt[0],Tt=yt[1],Dt=yt[2],Ut=gt[0],jt=gt[1],Vt=gt[2],Ht=Math.sqrt(bt*bt+Tt*Tt+Dt*Dt)*Math.sqrt(Ut*Ut+jt*jt+Vt*Vt),re=Ht&&wt(yt,gt)/Ht;return Math.acos(Math.min(Math.max(re,-1),1))}function it(yt){return yt[0]=0,yt[1]=0,yt[2]=0,yt}function z(yt){return"vec3("+yt[0]+", "+yt[1]+", "+yt[2]+")"}function P(yt,gt){return yt[0]===gt[0]&&yt[1]===gt[1]&&yt[2]===gt[2]}function H(yt,gt){var bt=yt[0],Tt=yt[1],Dt=yt[2],Ut=gt[0],jt=gt[1],Vt=gt[2];return Math.abs(bt-Ut)<=r.b*Math.max(1,Math.abs(bt),Math.abs(Ut))&&Math.abs(Tt-jt)<=r.b*Math.max(1,Math.abs(Tt),Math.abs(jt))&&Math.abs(Dt-Vt)<=r.b*Math.max(1,Math.abs(Dt),Math.abs(Vt))}var k,d=n,g=s,F=h,V=Y,tt=Z,ot=S,at=et,At=(k=p(),function(yt,gt,bt,Tt,Dt,Ut){var jt,Vt;for(gt||(gt=3),bt||(bt=0),Vt=Tt?Math.min(Tt*gt+bt,yt.length):yt.length,jt=bt;jt<Vt;jt+=gt)k[0]=yt[jt],k[1]=yt[jt+1],k[2]=yt[jt+2],Dt(k,k,Ut),yt[jt]=k[0],yt[jt+1]=k[1],yt[jt+2]=k[2];return yt})},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.STACK_OVERFLOW=E.CIRCULAR_DEPENDENCY_IN_FACTORY=E.POST_CONSTRUCT_ERROR=E.MULTIPLE_POST_CONSTRUCT_METHODS=E.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=E.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=E.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=E.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=E.ARGUMENTS_LENGTH_MISMATCH=E.INVALID_DECORATOR_OPERATION=E.INVALID_TO_SELF_VALUE=E.INVALID_FUNCTION_BINDING=E.INVALID_MIDDLEWARE_RETURN=E.NO_MORE_SNAPSHOTS_AVAILABLE=E.INVALID_BINDING_TYPE=E.NOT_IMPLEMENTED=E.CIRCULAR_DEPENDENCY=E.UNDEFINED_INJECT_ANNOTATION=E.MISSING_INJECT_ANNOTATION=E.MISSING_INJECTABLE_ANNOTATION=E.NOT_REGISTERED=E.CANNOT_UNBIND=E.AMBIGUOUS_MATCH=E.KEY_NOT_FOUND=E.NULL_ARGUMENT=E.DUPLICATED_METADATA=E.DUPLICATED_INJECTABLE_DECORATOR=void 0,E.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",E.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",E.NULL_ARGUMENT="NULL argument",E.KEY_NOT_FOUND="Key Not Found",E.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",E.CANNOT_UNBIND="Could not unbind serviceIdentifier:",E.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",E.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",E.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",E.UNDEFINED_INJECT_ANNOTATION=function(r){return"@inject called with undefined this could mean that the class "+r+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},E.CIRCULAR_DEPENDENCY="Circular dependency found:",E.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",E.INVALID_BINDING_TYPE="Invalid binding type:",E.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",E.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",E.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",E.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",E.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",E.ARGUMENTS_LENGTH_MISMATCH=function(){for(var r=[],p=0;p<arguments.length;p++)r[p]=arguments[p];return"The number of constructor arguments in the derived class "+r[0]+" must be >= than the number of constructor arguments of its base class."},E.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",E.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",E.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",E.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",E.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",E.POST_CONSTRUCT_ERROR=function(){for(var r=[],p=0;p<arguments.length;p++)r[p]=arguments[p];return"@postConstruct error in class "+r[0]+": "+r[1]},E.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var r=[],p=0;p<arguments.length;p++)r[p]=arguments[p];return"It looks like there is a circular dependency in one of the '"+r[0]+"' bindings. Please investigate bindings withservice identifier '"+r[1]+"'."},E.STACK_OVERFLOW="Maximum call stack size exceeded"},function(a,E,e){var r;try{r={clone:e(272),constant:e(134),each:e(181),filter:e(184),has:e(195),isArray:e(26),isEmpty:e(348),isFunction:e(83),isUndefined:e(196),keys:e(58),map:e(197),reduce:e(199),size:e(351),transform:e(357),union:e(358),values:e(205)}}catch(p){}r||(r=window._),a.exports=r},function(a,E){function e(r){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(r)}a.exports=function(r){var p=e(r);return r!=null&&(p=="object"||p=="function")}},function(a,E,e){var r=e(305),p=e(103),b=e(129),S=b&&b.isTypedArray,l=S?p(S):r;a.exports=l},function(a,E,e){"use strict";var r=e(123),p=Object(r.getColorsWithSubjectColor)("rgb(95, 149, 255)","rgb(255, 255, 255)");E.a={version:"0.0.12",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:p.mainStroke,fill:p.mainFill},size:20,color:p.mainStroke,linkPoints:{size:8,lineWidth:1,fill:p.activeFill,stroke:p.activeStroke}},nodeStateStyles:{active:{fill:p.activeFill,stroke:p.activeStroke,lineWidth:2,shadowColor:p.mainStroke,shadowBlur:10},selected:{fill:p.selectedFill,stroke:p.selectedStroke,lineWidth:4,shadowColor:p.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:p.highlightFill,stroke:p.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:p.inactiveFill,stroke:p.inactiveStroke,lineWidth:1},disable:{fill:p.disableFill,stroke:p.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:p.edgeMainStroke,lineAppendWidth:2},color:p.edgeMainStroke},edgeStateStyles:{active:{stroke:p.edgeActiveStroke,lineWidth:1},selected:{stroke:p.edgeSelectedStroke,lineWidth:2,shadowColor:p.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:p.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:p.edgeInactiveStroke,lineWidth:1},disable:{stroke:p.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:p.comboMainFill,lineWidth:1,stroke:p.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:p.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:p.comboActiveStroke,lineWidth:1,fill:p.comboActiveFill},selected:{stroke:p.comboSelectedStroke,lineWidth:2,fill:p.comboSelectedFill,shadowColor:p.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:p.comboHighlightStroke,lineWidth:2,fill:p.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:p.comboInactiveStroke,fill:p.comboInactiveFill,lineWidth:1},disable:{stroke:p.comboDisableStroke,fill:p.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"}},function(a,E,e){var r;try{r=e(270)}catch(p){}r||(r=window.graphlib),a.exports=r},function(a,E,e){function r(l){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(l)}var p=e(163),b=(typeof self=="undefined"?"undefined":r(self))=="object"&&self&&self.Object===Object&&self,S=p||b||Function("return this")();a.exports=S},function(a,E){function e(r){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(r)}a.exports=function(r){return r!=null&&e(r)=="object"}},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.Metadata=void 0;var r=e(32),p=function(){function b(S,l){this.key=S,this.value=l}return b.prototype.toString=function(){return this.key===r.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},b}();E.Metadata=p},function(a,E){},function(a,E,e){"use strict";e.r(E),e.d(E,"catmullRomToBezier",function(){return A}),e.d(E,"fillPath",function(){return Bt}),e.d(E,"fillPathByDiff",function(){return X}),e.d(E,"formatPath",function(){return pt}),e.d(E,"intersection",function(){return wt}),e.d(E,"parsePathArray",function(){return T}),e.d(E,"parsePathString",function(){return l}),e.d(E,"pathToAbsolute",function(){return y}),e.d(E,"pathToCurve",function(){return M}),e.d(E,"rectPath",function(){return Z});var r=e(0),p=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,b=new RegExp("([a-z])["+p+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+p+"]*,?["+p+"]*)+)","ig"),S=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+p+"]*,?["+p+"]*","ig"),l=function(q){if(!q)return null;if(Object(r.m)(q))return q;var st={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},it=[];return String(q).replace(b,function(z,P,H){var k=[],d=P.toLowerCase();if(H.replace(S,function(g,F){F&&k.push(+F)}),d==="m"&&k.length>2&&(it.push([P].concat(k.splice(0,2))),d="l",P=P==="m"?"l":"L"),d==="o"&&k.length===1&&it.push([P,k[0]]),d==="r")it.push([P].concat(k));else for(;k.length>=st[d]&&(it.push([P].concat(k.splice(0,st[d]))),st[d]););return q}),it},A=function(q,st){for(var it=[],z=0,P=q.length;P-2*!st>z;z+=2){var H=[{x:+q[z-2],y:+q[z-1]},{x:+q[z],y:+q[z+1]},{x:+q[z+2],y:+q[z+3]},{x:+q[z+4],y:+q[z+5]}];st?z?P-4===z?H[3]={x:+q[0],y:+q[1]}:P-2===z&&(H[2]={x:+q[0],y:+q[1]},H[3]={x:+q[2],y:+q[3]}):H[0]={x:+q[P-2],y:+q[P-1]}:P-4===z?H[3]=H[2]:z||(H[0]={x:+q[z],y:+q[z+1]}),it.push(["C",(-H[0].x+6*H[1].x+H[2].x)/6,(-H[0].y+6*H[1].y+H[2].y)/6,(H[1].x+6*H[2].x-H[3].x)/6,(H[1].y+6*H[2].y-H[3].y)/6,H[2].x,H[2].y])}return it},j=function(q,st,it,z,P){var H=[];if(P===null&&z===null&&(z=it),q=+q,st=+st,it=+it,z=+z,P!==null){var k=Math.PI/180,d=q+it*Math.cos(-z*k),g=q+it*Math.cos(-P*k);H=[["M",d,st+it*Math.sin(-z*k)],["A",it,it,0,+(P-z>180),0,g,st+it*Math.sin(-P*k)]]}else H=[["M",q,st],["m",0,-z],["a",it,z,0,1,1,0,2*z],["a",it,z,0,1,1,0,-2*z],["z"]];return H},y=function(q){if(!(q=l(q))||!q.length)return[["M",0,0]];var st,it,z=[],P=0,H=0,k=0,d=0,g=0;q[0][0]==="M"&&(k=P=+q[0][1],d=H=+q[0][2],g++,z[0]=["M",P,H]);for(var F=q.length===3&&q[0][0]==="M"&&q[1][0].toUpperCase()==="R"&&q[2][0].toUpperCase()==="Z",V=void 0,tt=void 0,ot=g,at=q.length;ot<at;ot++){if(z.push(V=[]),(st=(tt=q[ot])[0])!==st.toUpperCase())switch(V[0]=st.toUpperCase(),V[0]){case"A":V[1]=tt[1],V[2]=tt[2],V[3]=tt[3],V[4]=tt[4],V[5]=tt[5],V[6]=+tt[6]+P,V[7]=+tt[7]+H;break;case"V":V[1]=+tt[1]+H;break;case"H":V[1]=+tt[1]+P;break;case"R":for(var At=2,yt=(it=[P,H].concat(tt.slice(1))).length;At<yt;At++)it[At]=+it[At]+P,it[++At]=+it[At]+H;z.pop(),z=z.concat(A(it,F));break;case"O":z.pop(),(it=j(P,H,tt[1],tt[2])).push(it[0]),z=z.concat(it);break;case"U":z.pop(),z=z.concat(j(P,H,tt[1],tt[2],tt[3])),V=["U"].concat(z[z.length-1].slice(-2));break;case"M":k=+tt[1]+P,d=+tt[2]+H;break;default:for(At=1,yt=tt.length;At<yt;At++)V[At]=+tt[At]+(At%2?P:H)}else if(st==="R")it=[P,H].concat(tt.slice(1)),z.pop(),z=z.concat(A(it,F)),V=["R"].concat(tt.slice(-2));else if(st==="O")z.pop(),(it=j(P,H,tt[1],tt[2])).push(it[0]),z=z.concat(it);else if(st==="U")z.pop(),z=z.concat(j(P,H,tt[1],tt[2],tt[3])),V=["U"].concat(z[z.length-1].slice(-2));else for(var gt=0,bt=tt.length;gt<bt;gt++)V[gt]=tt[gt];if((st=st.toUpperCase())!=="O")switch(V[0]){case"Z":P=+k,H=+d;break;case"H":P=V[1];break;case"V":H=V[1];break;case"M":k=V[V.length-2],d=V[V.length-1];break;default:P=V[V.length-2],H=V[V.length-1]}}return z},n=function(q,st,it,z){return[q,st,it,z,it,z]},s=function(q,st,it,z,P,H){return[1/3*q+2/3*it,1/3*st+2/3*z,1/3*P+2/3*it,1/3*H+2/3*z,P,H]},h=function Et(q,st,it,z,P,H,k,d,g,F){it===z&&(it+=1);var V,tt,ot,at,At,yt=120*Math.PI/180,gt=Math.PI/180*(+P||0),bt=[],Tt=function(Vr,ti,hi){return{x:Vr*Math.cos(hi)-ti*Math.sin(hi),y:Vr*Math.sin(hi)+ti*Math.cos(hi)}};if(F)tt=F[0],ot=F[1],at=F[2],At=F[3];else{q=(V=Tt(q,st,-gt)).x,st=V.y,d=(V=Tt(d,g,-gt)).x,g=V.y,q===d&&st===g&&(d+=1,g+=1);var Dt=(q-d)/2,Ut=(st-g)/2,jt=Dt*Dt/(it*it)+Ut*Ut/(z*z);jt>1&&(it*=jt=Math.sqrt(jt),z*=jt);var Vt=it*it,Ht=z*z,re=(H===k?-1:1)*Math.sqrt(Math.abs((Vt*Ht-Vt*Ut*Ut-Ht*Dt*Dt)/(Vt*Ut*Ut+Ht*Dt*Dt)));at=re*it*Ut/z+(q+d)/2,At=re*-z*Dt/it+(st+g)/2,tt=Math.asin(((st-At)/z).toFixed(9)),ot=Math.asin(((g-At)/z).toFixed(9)),tt=q<at?Math.PI-tt:tt,ot=d<at?Math.PI-ot:ot,tt<0&&(tt=2*Math.PI+tt),ot<0&&(ot=2*Math.PI+ot),k&&tt>ot&&(tt-=2*Math.PI),!k&&ot>tt&&(ot-=2*Math.PI)}var pe=ot-tt;if(Math.abs(pe)>yt){var ye=ot,we=d,Re=g;ot=tt+yt*(k&&ot>tt?1:-1),bt=Et(d=at+it*Math.cos(ot),g=At+z*Math.sin(ot),it,z,P,0,k,we,Re,[ot,ye,at,At])}pe=ot-tt;var He=Math.cos(tt),pn=Math.sin(tt),fn=Math.cos(ot),Rn=Math.sin(ot),Cn=Math.tan(pe/4),kn=4/3*it*Cn,Mn=4/3*z*Cn,Tn=[q,st],Un=[q+kn*pn,st-Mn*He],Kn=[d+kn*Rn,g-Mn*fn],tr=[d,g];if(Un[0]=2*Tn[0]-Un[0],Un[1]=2*Tn[1]-Un[1],F)return[Un,Kn,tr].concat(bt);for(var or=[],nr=0,er=(bt=[Un,Kn,tr].concat(bt).join().split(",")).length;nr<er;nr++)or[nr]=nr%2?Tt(bt[nr-1],bt[nr],gt).y:Tt(bt[nr],bt[nr+1],gt).x;return or},M=function(q,st){var it,z=y(q),P=st&&y(st),H={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},d=[],g=[],F="",V="",tt=function(Ut,jt,Vt){var Ht,re;if(!Ut)return["C",jt.x,jt.y,jt.x,jt.y,jt.x,jt.y];switch(!(Ut[0]in{T:1,Q:1})&&(jt.qx=jt.qy=null),Ut[0]){case"M":jt.X=Ut[1],jt.Y=Ut[2];break;case"A":Ut=["C"].concat(h.apply(0,[jt.x,jt.y].concat(Ut.slice(1))));break;case"S":Vt==="C"||Vt==="S"?(Ht=2*jt.x-jt.bx,re=2*jt.y-jt.by):(Ht=jt.x,re=jt.y),Ut=["C",Ht,re].concat(Ut.slice(1));break;case"T":Vt==="Q"||Vt==="T"?(jt.qx=2*jt.x-jt.qx,jt.qy=2*jt.y-jt.qy):(jt.qx=jt.x,jt.qy=jt.y),Ut=["C"].concat(s(jt.x,jt.y,jt.qx,jt.qy,Ut[1],Ut[2]));break;case"Q":jt.qx=Ut[1],jt.qy=Ut[2],Ut=["C"].concat(s(jt.x,jt.y,Ut[1],Ut[2],Ut[3],Ut[4]));break;case"L":Ut=["C"].concat(n(jt.x,jt.y,Ut[1],Ut[2]));break;case"H":Ut=["C"].concat(n(jt.x,jt.y,Ut[1],jt.y));break;case"V":Ut=["C"].concat(n(jt.x,jt.y,jt.x,Ut[1]));break;case"Z":Ut=["C"].concat(n(jt.x,jt.y,jt.X,jt.Y))}return Ut},ot=function(Ut,jt){if(Ut[jt].length>7){Ut[jt].shift();for(var Vt=Ut[jt];Vt.length;)d[jt]="A",P&&(g[jt]="A"),Ut.splice(jt++,0,["C"].concat(Vt.splice(0,6)));Ut.splice(jt,1),it=Math.max(z.length,P&&P.length||0)}},at=function(Ut,jt,Vt,Ht,re){Ut&&jt&&Ut[re][0]==="M"&&jt[re][0]!=="M"&&(jt.splice(re,0,["M",Ht.x,Ht.y]),Vt.bx=0,Vt.by=0,Vt.x=Ut[re][1],Vt.y=Ut[re][2],it=Math.max(z.length,P&&P.length||0))};it=Math.max(z.length,P&&P.length||0);for(var At=0;At<it;At++){z[At]&&(F=z[At][0]),F!=="C"&&(d[At]=F,At&&(V=d[At-1])),z[At]=tt(z[At],H,V),d[At]!=="A"&&F==="C"&&(d[At]="C"),ot(z,At),P&&(P[At]&&(F=P[At][0]),F!=="C"&&(g[At]=F,At&&(V=g[At-1])),P[At]=tt(P[At],k,V),g[At]!=="A"&&F==="C"&&(g[At]="C"),ot(P,At)),at(z,P,H,k,At),at(P,z,k,H,At);var yt=z[At],gt=P&&P[At],bt=yt.length,Tt=P&&gt.length;H.x=yt[bt-2],H.y=yt[bt-1],H.bx=parseFloat(yt[bt-4])||H.x,H.by=parseFloat(yt[bt-3])||H.y,k.bx=P&&(parseFloat(gt[Tt-4])||k.x),k.by=P&&(parseFloat(gt[Tt-3])||k.y),k.x=P&&gt[Tt-2],k.y=P&&gt[Tt-1]}return P?[z,P]:z},O=/,?([a-z]),?/gi,T=function(q){return q.join(",").replace(O,"$1")},v=function(q,st,it,z,P){return q*(q*(-3*st+9*it-9*z+3*P)+6*st-12*it+6*z)-3*st+3*it},m=function(q,st,it,z,P,H,k,d,g){g===null&&(g=1);for(var F=(g=g>1?1:g<0?0:g)/2,V=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],tt=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],ot=0,at=0;at<12;at++){var At=F*V[at]+F,yt=v(At,q,it,P,k),gt=v(At,st,z,H,d),bt=yt*yt+gt*gt;ot+=tt[at]*Math.sqrt(bt)}return F*ot},C=function(q,st,it,z,P,H,k,d){for(var g,F,V,tt,ot=[],at=[[],[]],At=0;At<2;++At)if(At===0?(F=6*q-12*it+6*P,g=-3*q+9*it-9*P+3*k,V=3*it-3*q):(F=6*st-12*z+6*H,g=-3*st+9*z-9*H+3*d,V=3*z-3*st),Math.abs(g)<1e-12){if(Math.abs(F)<1e-12)continue;(tt=-V/F)>0&&tt<1&&ot.push(tt)}else{var yt=F*F-4*V*g,gt=Math.sqrt(yt);if(!(yt<0)){var bt=(-F+gt)/(2*g);bt>0&&bt<1&&ot.push(bt);var Tt=(-F-gt)/(2*g);Tt>0&&Tt<1&&ot.push(Tt)}}for(var Dt,Ut=ot.length,jt=Ut;Ut--;)Dt=1-(tt=ot[Ut]),at[0][Ut]=Dt*Dt*Dt*q+3*Dt*Dt*tt*it+3*Dt*tt*tt*P+tt*tt*tt*k,at[1][Ut]=Dt*Dt*Dt*st+3*Dt*Dt*tt*z+3*Dt*tt*tt*H+tt*tt*tt*d;return at[0][jt]=q,at[1][jt]=st,at[0][jt+1]=k,at[1][jt+1]=d,at[0].length=at[1].length=jt+2,{min:{x:Math.min.apply(0,at[0]),y:Math.min.apply(0,at[1])},max:{x:Math.max.apply(0,at[0]),y:Math.max.apply(0,at[1])}}},D=function(q,st,it,z,P,H,k,d){if(!(Math.max(q,it)<Math.min(P,k)||Math.min(q,it)>Math.max(P,k)||Math.max(st,z)<Math.min(H,d)||Math.min(st,z)>Math.max(H,d))){var g=(q-it)*(H-d)-(st-z)*(P-k);if(g){var F=((q*z-st*it)*(P-k)-(q-it)*(P*d-H*k))/g,V=((q*z-st*it)*(H-d)-(st-z)*(P*d-H*k))/g,tt=+F.toFixed(2),ot=+V.toFixed(2);if(!(tt<+Math.min(q,it).toFixed(2)||tt>+Math.max(q,it).toFixed(2)||tt<+Math.min(P,k).toFixed(2)||tt>+Math.max(P,k).toFixed(2)||ot<+Math.min(st,z).toFixed(2)||ot>+Math.max(st,z).toFixed(2)||ot<+Math.min(H,d).toFixed(2)||ot>+Math.max(H,d).toFixed(2)))return{x:F,y:V}}}},Y=function(q,st,it){return st>=q.x&&st<=q.x+q.width&&it>=q.y&&it<=q.y+q.height},Z=function(q,st,it,z,P){if(P)return[["M",+q+ +P,st],["l",it-2*P,0],["a",P,P,0,0,1,P,P],["l",0,z-2*P],["a",P,P,0,0,1,-P,P],["l",2*P-it,0],["a",P,P,0,0,1,-P,-P],["l",0,2*P-z],["a",P,P,0,0,1,P,-P],["z"]];var H=[["M",q,st],["l",it,0],["l",0,z],["l",-it,0],["z"]];return H.parsePathArray=T,H},et=function(q,st,it,z){return q===null&&(q=st=it=z=0),st===null&&(st=q.y,it=q.width,z=q.height,q=q.x),{x:q,y:st,width:it,w:it,height:z,h:z,x2:q+it,y2:st+z,cx:q+it/2,cy:st+z/2,r1:Math.min(it,z)/2,r2:Math.max(it,z)/2,r0:Math.sqrt(it*it+z*z)/2,path:Z(q,st,it,z),vb:[q,st,it,z].join(" ")}},dt=function(q,st,it,z,P,H,k,d){Object(r.m)(q)||(q=[q,st,it,z,P,H,k,d]);var g=C.apply(null,q);return et(g.min.x,g.min.y,g.max.x-g.min.x,g.max.y-g.min.y)},ht=function(q,st,it,z,P,H,k,d,g){var F=1-g,V=Math.pow(F,3),tt=Math.pow(F,2),ot=g*g,at=ot*g,At=q+2*g*(it-q)+ot*(P-2*it+q),yt=st+2*g*(z-st)+ot*(H-2*z+st),gt=it+2*g*(P-it)+ot*(k-2*P+it),bt=z+2*g*(H-z)+ot*(d-2*H+z);return{x:V*q+3*tt*g*it+3*F*g*g*P+at*k,y:V*st+3*tt*g*z+3*F*g*g*H+at*d,m:{x:At,y:yt},n:{x:gt,y:bt},start:{x:F*q+g*it,y:F*st+g*z},end:{x:F*P+g*k,y:F*H+g*d},alpha:90-180*Math.atan2(At-gt,yt-bt)/Math.PI}},St=function(q,st,it){if(!function(jt,Vt){return jt=et(jt),Vt=et(Vt),Y(Vt,jt.x,jt.y)||Y(Vt,jt.x2,jt.y)||Y(Vt,jt.x,jt.y2)||Y(Vt,jt.x2,jt.y2)||Y(jt,Vt.x,Vt.y)||Y(jt,Vt.x2,Vt.y)||Y(jt,Vt.x,Vt.y2)||Y(jt,Vt.x2,Vt.y2)||(jt.x<Vt.x2&&jt.x>Vt.x||Vt.x<jt.x2&&Vt.x>jt.x)&&(jt.y<Vt.y2&&jt.y>Vt.y||Vt.y<jt.y2&&Vt.y>jt.y)}(dt(q),dt(st)))return it?0:[];for(var z=~~(m.apply(0,q)/8),P=~~(m.apply(0,st)/8),H=[],k=[],d={},g=it?0:[],F=0;F<z+1;F++){var V=ht.apply(0,q.concat(F/z));H.push({x:V.x,y:V.y,t:F/z})}for(F=0;F<P+1;F++)V=ht.apply(0,st.concat(F/P)),k.push({x:V.x,y:V.y,t:F/P});for(F=0;F<z;F++)for(var tt=0;tt<P;tt++){var ot=H[F],at=H[F+1],At=k[tt],yt=k[tt+1],gt=Math.abs(at.x-ot.x)<.001?"y":"x",bt=Math.abs(yt.x-At.x)<.001?"y":"x",Tt=D(ot.x,ot.y,at.x,at.y,At.x,At.y,yt.x,yt.y);if(Tt){if(d[Tt.x.toFixed(4)]===Tt.y.toFixed(4))continue;d[Tt.x.toFixed(4)]=Tt.y.toFixed(4);var Dt=ot.t+Math.abs((Tt[gt]-ot[gt])/(at[gt]-ot[gt]))*(at.t-ot.t),Ut=At.t+Math.abs((Tt[bt]-At[bt])/(yt[bt]-At[bt]))*(yt.t-At.t);Dt>=0&&Dt<=1&&Ut>=0&&Ut<=1&&(it?g+=1:g.push({x:Tt.x,y:Tt.y,t1:Dt,t2:Ut}))}}return g},wt=function(q,st){return function(it,z,P){var H,k,d,g,F,V,tt,ot,at,At;it=M(it),z=M(z);for(var yt=P?0:[],gt=0,bt=it.length;gt<bt;gt++){var Tt=it[gt];if(Tt[0]==="M")H=F=Tt[1],k=V=Tt[2];else{Tt[0]==="C"?(at=[H,k].concat(Tt.slice(1)),H=at[6],k=at[7]):(at=[H,k,H,k,F,V,F,V],H=F,k=V);for(var Dt=0,Ut=z.length;Dt<Ut;Dt++){var jt=z[Dt];if(jt[0]==="M")d=tt=jt[1],g=ot=jt[2];else{jt[0]==="C"?(At=[d,g].concat(jt.slice(1)),d=At[6],g=At[7]):(At=[d,g,d,g,tt,ot,tt,ot],d=tt,g=ot);var Vt=St(at,At,P);if(P)yt+=Vt;else{for(var Ht=0,re=Vt.length;Ht<re;Ht++)Vt[Ht].segment1=gt,Vt[Ht].segment2=Dt,Vt[Ht].bez1=at,Vt[Ht].bez2=At;yt=yt.concat(Vt)}}}}}return yt}(q,st)};function xt(Et,q){var st=[],it=[];return Et.length&&function z(P,H){if(P.length===1)st.push(P[0]),it.push(P[0]);else{for(var k=[],d=0;d<P.length-1;d++)d===0&&st.push(P[0]),d===P.length-2&&it.push(P[d+1]),k[d]=[(1-H)*P[d][0]+H*P[d+1][0],(1-H)*P[d][1]+H*P[d+1][1]];z(k,H)}}(Et,q),{left:st,right:it.reverse()}}var ft=function(q,st,it){if(it===1)return[[].concat(q)];var z=[];if(st[0]==="L"||st[0]==="C"||st[0]==="Q")z=z.concat(function(k,d,g){var F=[[k[1],k[2]]];g=g||2;var V=[];d[0]==="A"?(F.push(d[6]),F.push(d[7])):d[0]==="C"?(F.push([d[1],d[2]]),F.push([d[3],d[4]]),F.push([d[5],d[6]])):d[0]==="S"||d[0]==="Q"?(F.push([d[1],d[2]]),F.push([d[3],d[4]])):F.push([d[1],d[2]]);for(var tt=F,ot=1/g,at=0;at<g-1;at++){var At=xt(tt,ot/(1-ot*at));V.push(At.left),tt=At.right}return V.push(tt),V.map(function(yt){var gt=[];return yt.length===4&&(gt.push("C"),gt=gt.concat(yt[2])),yt.length>=3&&(yt.length===3&&gt.push("Q"),gt=gt.concat(yt[1])),yt.length===2&&gt.push("L"),gt=gt.concat(yt[yt.length-1])})}(q,st,it));else{var P=[].concat(q);P[0]==="M"&&(P[0]="L");for(var H=0;H<=it-1;H++)z.push(P)}return z},Bt=function(q,st){if(q.length===1)return q;var it=q.length-1,z=st.length-1,P=it/z,H=[];if(q.length===1&&q[0][0]==="M"){for(var k=0;k<z-it;k++)q.push(q[0]);return q}for(k=0;k<z;k++){var d=Math.floor(P*k);H[d]=(H[d]||0)+1}var g=H.reduce(function(F,V,tt){return tt===it?F.concat(q[it]):F.concat(ft(q[tt],q[tt+1],V))},[]);return g.unshift(q[0]),st[z]!=="Z"&&st[z]!=="z"||g.push("Z"),g},Rt=function(q,st){if(q.length!==st.length)return!1;var it=!0;return Object(r.f)(q,function(z,P){if(z!==st[P])return it=!1,!1}),it};function Ot(Et,q,st){var it=null,z=st;return q<z&&(z=q,it="add"),Et<z&&(z=Et,it="del"),{type:it,min:z}}var X=function(q,st){var it=function(ot,at){var At,yt,gt=ot.length,bt=at.length,Tt=0;if(gt===0||bt===0)return null;for(var Dt=[],Ut=0;Ut<=gt;Ut++)Dt[Ut]=[],Dt[Ut][0]={min:Ut};for(var jt=0;jt<=bt;jt++)Dt[0][jt]={min:jt};for(Ut=1;Ut<=gt;Ut++)for(At=ot[Ut-1],jt=1;jt<=bt;jt++){yt=at[jt-1],Tt=Rt(At,yt)?0:1;var Vt=Dt[Ut-1][jt].min+1,Ht=Dt[Ut][jt-1].min+1,re=Dt[Ut-1][jt-1].min+Tt;Dt[Ut][jt]=Ot(Vt,Ht,re)}return Dt}(q,st),z=q.length,P=st.length,H=[],k=1,d=1;if(it[z][P].min!==z){for(var g=1;g<=z;g++){var F=it[g][g].min;d=g;for(var V=k;V<=P;V++)it[g][V].min<F&&(F=it[g][V].min,d=V);k=d,it[g][k].type&&H.push({index:g-1,type:it[g][k].type})}for(g=H.length-1;g>=0;g--)k=H[g].index,H[g].type==="add"?q.splice(k,0,[].concat(q[k])):q.splice(k,1)}var tt=P-(z=q.length);if(z<P)for(g=0;g<tt;g++)q[z-1][0]==="z"||q[z-1][0]==="Z"?q.splice(z-2,0,q[z-2]):q.push(q[z-1]),z+=1;return q};function ut(Et,q,st){for(var it,z=[].concat(Et),P=1/(st+1),H=vt(q)[0],k=1;k<=st;k++)P*=k,(it=Math.floor(Et.length*P))===0?z.unshift([H[0]*P+Et[it][0]*(1-P),H[1]*P+Et[it][1]*(1-P)]):z.splice(it,0,[H[0]*P+Et[it][0]*(1-P),H[1]*P+Et[it][1]*(1-P)]);return z}function vt(Et){var q=[];switch(Et[0]){case"M":case"L":q.push([Et[1],Et[2]]);break;case"A":q.push([Et[6],Et[7]]);break;case"Q":q.push([Et[3],Et[4]]),q.push([Et[1],Et[2]]);break;case"T":q.push([Et[1],Et[2]]);break;case"C":q.push([Et[5],Et[6]]),q.push([Et[1],Et[2]]),q.push([Et[3],Et[4]]);break;case"S":q.push([Et[3],Et[4]]),q.push([Et[1],Et[2]]);break;case"H":case"V":q.push([Et[1],Et[1]])}return q}var pt=function(q,st){if(q.length<=1)return q;for(var it,z=0;z<st.length;z++)if(q[z][0]!==st[z][0])switch(it=vt(q[z]),st[z][0]){case"M":q[z]=["M"].concat(it[0]);break;case"L":q[z]=["L"].concat(it[0]);break;case"A":q[z]=[].concat(st[z]),q[z][6]=it[0][0],q[z][7]=it[0][1];break;case"Q":if(it.length<2){if(!(z>0)){q[z]=st[z];break}it=ut(it,q[z-1],1)}q[z]=["Q"].concat(it.reduce(function(P,H){return P.concat(H)},[]));break;case"T":q[z]=["T"].concat(it[0]);break;case"C":if(it.length<3){if(!(z>0)){q[z]=st[z];break}it=ut(it,q[z-1],2)}q[z]=["C"].concat(it.reduce(function(P,H){return P.concat(H)},[]));break;case"S":if(it.length<2){if(!(z>0)){q[z]=st[z];break}it=ut(it,q[z-1],1)}q[z]=["S"].concat(it.reduce(function(P,H){return P.concat(H)},[]));break;default:q[z]=st[z]}return q}},function(a,E,e){"use strict";e(56),e(18);var r=e(250);e.d(E,"Canvas",function(){return r.a}),e(76),e(89)},function(a,E,e){var r=e(83),p=e(128);a.exports=function(b){return b!=null&&p(b.length)&&!r(b)}},function(a,E,e){function r(j){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(j)}var p=e(328),b=e(338),S=e(66),l=e(26),A=e(345);a.exports=function(j){return typeof j=="function"?j:j==null?S:r(j)=="object"?l(j)?b(j[0],j[1]):p(j):A(j)}},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.TargetTypeEnum=E.BindingTypeEnum=E.BindingScopeEnum=void 0,E.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"},E.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},E.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},function(a,E,e){"use strict";e.r(E),e.d(E,"Base",function(){return j}),e.d(E,"Circle",function(){return y}),e.d(E,"Ellipse",function(){return s}),e.d(E,"Image",function(){return M}),e.d(E,"Line",function(){return m}),e.d(E,"Marker",function(){return Z}),e.d(E,"Path",function(){return X}),e.d(E,"Polygon",function(){return vt}),e.d(E,"Polyline",function(){return pt}),e.d(E,"Rect",function(){return q}),e.d(E,"Text",function(){return st});var r={};e.r(r),e.d(r,"Base",function(){return j}),e.d(r,"Circle",function(){return y}),e.d(r,"Ellipse",function(){return s}),e.d(r,"Image",function(){return M}),e.d(r,"Line",function(){return m}),e.d(r,"Marker",function(){return Z}),e.d(r,"Path",function(){return X}),e.d(r,"Polygon",function(){return vt}),e.d(r,"Polyline",function(){return pt}),e.d(r,"Rect",function(){return q}),e.d(r,"Text",function(){return st});var p=e(1),b=e(18),S=e(17),l=e(29),A=e(76),j=function(it){function z(){return it!==null&&it.apply(this,arguments)||this}return Object(p.b)(z,it),z.prototype.getDefaultAttrs=function(){var P=it.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},z.prototype.getShapeBase=function(){return r},z.prototype.getGroupBase=function(){return A.a},z.prototype.onCanvasChange=function(P){Object(l.h)(this,P)},z.prototype.calculateBBox=function(){var P=this.get("type"),H=this.getHitLineWidth(),k=Object(b.getBBoxMethod)(P)(this),d=H/2,g=k.x-d,F=k.y-d,V=k.x+k.width+d,tt=k.y+k.height+d;return{x:g,minX:g,y:F,minY:F,width:k.width+H,height:k.height+H,maxX:V,maxY:tt}},z.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},z.prototype.isStroke=function(){return!!this.attrs.stroke},z.prototype._applyClip=function(P,H){H&&(P.save(),Object(l.a)(P,H),H.createPath(P),P.restore(),P.clip(),H._afterDraw())},z.prototype.draw=function(P,H){var k=this.cfg.clipShape;if(H){if(this.cfg.refresh===!1)return void this.set("hasChanged",!1);var d=this.getCanvasBBox();if(!Object(S.f)(H,d))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}P.save(),Object(l.a)(P,this),this._applyClip(P,k),this.drawPath(P),P.restore(),this._afterDraw()},z.prototype.getCanvasViewBox=function(){var P=this.cfg.canvas;return P?P.getViewRange():null},z.prototype.cacheCanvasBBox=function(){var P=this.getCanvasViewBox();if(P){var H=this.getCanvasBBox(),k=Object(S.f)(H,P);this.set("isInView",k),k?this.set("cacheCanvasBBox",H):this.set("cacheCanvasBBox",null)}},z.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},z.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},z.prototype.drawPath=function(P){this.createPath(P),this.strokeAndFill(P),this.afterDrawPath(P)},z.prototype.fill=function(P){P.fill()},z.prototype.stroke=function(P){P.stroke()},z.prototype.strokeAndFill=function(P){var H=this.attrs,k=H.lineWidth,d=H.opacity,g=H.strokeOpacity,F=H.fillOpacity;this.isFill()&&(Object(S.i)(F)||F===1?this.fill(P):(P.globalAlpha=F,this.fill(P),P.globalAlpha=d)),this.isStroke()&&k>0&&(Object(S.i)(g)||g===1||(P.globalAlpha=g),this.stroke(P)),this.afterDrawPath(P)},z.prototype.createPath=function(P){},z.prototype.afterDrawPath=function(P){},z.prototype.isInShape=function(P,H){var k=this.isStroke(),d=this.isFill(),g=this.getHitLineWidth();return this.isInStrokeOrPath(P,H,k,d,g)},z.prototype.isInStrokeOrPath=function(P,H,k,d,g){return!1},z.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var P=this.attrs;return P.lineWidth+P.lineAppendWidth},z}(b.AbstractShape),y=function(it){function z(){return it!==null&&it.apply(this,arguments)||this}return Object(p.b)(z,it),z.prototype.getDefaultAttrs=function(){var P=it.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{x:0,y:0,r:0})},z.prototype.isInStrokeOrPath=function(P,H,k,d,g){var F=this.attr(),V=F.x,tt=F.y,ot=F.r,at=g/2,At=Object(S.b)(V,tt,P,H);return d&&k?At<=ot+at:d?At<=ot:!!k&&At>=ot-at&&At<=ot+at},z.prototype.createPath=function(P){var H=this.attr(),k=H.x,d=H.y,g=H.r;P.beginPath(),P.arc(k,d,g,0,2*Math.PI,!1),P.closePath()},z}(j);function n(it,z,P,H){return it/(P*P)+z/(H*H)}var s=function(it){function z(){return it!==null&&it.apply(this,arguments)||this}return Object(p.b)(z,it),z.prototype.getDefaultAttrs=function(){var P=it.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{x:0,y:0,rx:0,ry:0})},z.prototype.isInStrokeOrPath=function(P,H,k,d,g){var F=this.attr(),V=g/2,tt=F.x,ot=F.y,at=F.rx,At=F.ry,yt=(P-tt)*(P-tt),gt=(H-ot)*(H-ot);return d&&k?n(yt,gt,at+V,At+V)<=1:d?n(yt,gt,at,At)<=1:!!k&&n(yt,gt,at-V,At-V)>=1&&n(yt,gt,at+V,At+V)<=1},z.prototype.createPath=function(P){var H=this.attr(),k=H.x,d=H.y,g=H.rx,F=H.ry;if(P.beginPath(),P.ellipse)P.ellipse(k,d,g,F,0,0,2*Math.PI,!1);else{var V=g>F?g:F,tt=g>F?1:g/F,ot=g>F?F/g:1;P.save(),P.translate(k,d),P.scale(tt,ot),P.arc(0,0,V,0,2*Math.PI),P.restore(),P.closePath()}},z}(j);function h(it){return it instanceof HTMLElement&&Object(S.k)(it.nodeName)&&it.nodeName.toUpperCase()==="CANVAS"}var M=function(it){function z(){return it!==null&&it.apply(this,arguments)||this}return Object(p.b)(z,it),z.prototype.getDefaultAttrs=function(){var P=it.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{x:0,y:0,width:0,height:0})},z.prototype.initAttrs=function(P){this._setImage(P.img)},z.prototype.isStroke=function(){return!1},z.prototype.isOnlyHitBox=function(){return!0},z.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var P=this.get("canvas");P?P.draw():this.createPath(this.get("context"))}},z.prototype._setImage=function(P){var H=this,k=this.attrs;if(Object(S.k)(P)){var d=new Image;d.onload=function(){if(H.destroyed)return!1;H.attr("img",d),H.set("loading",!1),H._afterLoading();var g=H.get("callback");g&&g.call(H)},d.crossOrigin="Anonymous",d.src=P,this.set("loading",!0)}else P instanceof Image?(k.width||(k.width=P.width),k.height||(k.height=P.height)):h(P)&&(k.width||(k.width=Number(P.getAttribute("width"))),k.height||(k.height,Number(P.getAttribute("height"))))},z.prototype.onAttrChange=function(P,H,k){it.prototype.onAttrChange.call(this,P,H,k),P==="img"&&this._setImage(H)},z.prototype.createPath=function(P){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",P);var H=this.attr(),k=H.x,d=H.y,g=H.width,F=H.height,V=H.sx,tt=H.sy,ot=H.swidth,at=H.sheight,At=H.img;(At instanceof Image||h(At))&&(Object(S.i)(V)||Object(S.i)(tt)||Object(S.i)(ot)||Object(S.i)(at)?P.drawImage(At,k,d,g,F):P.drawImage(At,V,tt,ot,at,k,d,g,F))},z}(j),O=e(20);function T(it,z,P,H,k,d,g){var F=Math.min(it,P),V=Math.max(it,P),tt=Math.min(z,H),ot=Math.max(z,H),at=k/2;return d>=F-at&&d<=V+at&&g>=tt-at&&g<=ot+at&&O.c.pointToLine(it,z,P,H,d,g)<=k/2}var v=e(34),m=function(it){function z(){return it!==null&&it.apply(this,arguments)||this}return Object(p.b)(z,it),z.prototype.getDefaultAttrs=function(){var P=it.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},z.prototype.initAttrs=function(P){this.setArrow()},z.prototype.onAttrChange=function(P,H,k){it.prototype.onAttrChange.call(this,P,H,k),this.setArrow()},z.prototype.setArrow=function(){var P=this.attr(),H=P.x1,k=P.y1,d=P.x2,g=P.y2,F=P.startArrow,V=P.endArrow;F&&v.b(this,P,d,g,H,k),V&&v.a(this,P,H,k,d,g)},z.prototype.isInStrokeOrPath=function(P,H,k,d,g){if(!k||!g)return!1;var F=this.attr();return T(F.x1,F.y1,F.x2,F.y2,g,P,H)},z.prototype.createPath=function(P){var H=this.attr(),k=H.x1,d=H.y1,g=H.x2,F=H.y2,V=H.startArrow,tt=H.endArrow,ot={dx:0,dy:0},at={dx:0,dy:0};V&&V.d&&(ot=v.c(k,d,g,F,H.startArrow.d)),tt&&tt.d&&(at=v.c(k,d,g,F,H.endArrow.d)),P.beginPath(),P.moveTo(k+ot.dx,d+ot.dy),P.lineTo(g-at.dx,F-at.dy)},z.prototype.afterDrawPath=function(P){var H=this.get("startArrowShape"),k=this.get("endArrowShape");H&&H.draw(P),k&&k.draw(P)},z.prototype.getTotalLength=function(){var P=this.attr(),H=P.x1,k=P.y1,d=P.x2,g=P.y2;return O.c.length(H,k,d,g)},z.prototype.getPoint=function(P){var H=this.attr(),k=H.x1,d=H.y1,g=H.x2,F=H.y2;return O.c.pointAt(k,d,g,F,P)},z}(j),C=e(0),D=e(31),Y={circle:function(z,P,H){return[["M",z-H,P],["A",H,H,0,1,0,z+H,P],["A",H,H,0,1,0,z-H,P]]},square:function(z,P,H){return[["M",z-H,P-H],["L",z+H,P-H],["L",z+H,P+H],["L",z-H,P+H],["Z"]]},diamond:function(z,P,H){return[["M",z-H,P],["L",z,P-H],["L",z+H,P],["L",z,P+H],["Z"]]},triangle:function(z,P,H){var k=H*Math.sin(1/3*Math.PI);return[["M",z-H,P+k],["L",z,P-k],["L",z+H,P+k],["Z"]]},"triangle-down":function(z,P,H){var k=H*Math.sin(1/3*Math.PI);return[["M",z-H,P-k],["L",z+H,P-k],["L",z,P+k],["Z"]]}},Z=function(it){function z(){return it!==null&&it.apply(this,arguments)||this}return Object(p.b)(z,it),z.prototype.initAttrs=function(P){this._resetParamsCache()},z.prototype._resetParamsCache=function(){this.set("paramsCache",{})},z.prototype.onAttrChange=function(P,H,k){it.prototype.onAttrChange.call(this,P,H,k),["symbol","x","y","r","radius"].indexOf(P)!==-1&&this._resetParamsCache()},z.prototype.isOnlyHitBox=function(){return!0},z.prototype._getR=function(P){return Object(C.s)(P.r)?P.radius:P.r},z.prototype._getPath=function(){var P,H,k=this.attr(),d=k.x,g=k.y,F=k.symbol||"circle",V=this._getR(k);if(Object(S.h)(F))H=(P=F)(d,g,V),H=Object(D.c)(H);else{if(!(P=z.Symbols[F]))return console.warn(F+" marker is not supported."),null;H=P(d,g,V)}return H},z.prototype.createPath=function(P){var H=this._getPath(),k=this.get("paramsCache");Object(l.e)(this,P,{path:H},k)},z.Symbols=Y,z}(j);function et(it,z,P){var H=Object(b.getOffScreenContext)();return it.createPath(H),H.isPointInPath(z,P)}function dt(it){return Math.abs(it)<1e-6?0:it<0?-1:1}function ht(it,z,P){return(P[0]-it[0])*(z[1]-it[1])==(z[0]-it[0])*(P[1]-it[1])&&Math.min(it[0],z[0])<=P[0]&&P[0]<=Math.max(it[0],z[0])&&Math.min(it[1],z[1])<=P[1]&&P[1]<=Math.max(it[1],z[1])}function St(it,z,P){var H=!1,k=it.length;if(k<=2)return!1;for(var d=0;d<k;d++){var g=it[d],F=it[(d+1)%k];if(ht(g,F,[z,P]))return!0;dt(g[1]-P)>0!=dt(F[1]-P)>0&&dt(z-(P-g[1])*(g[0]-F[0])/(g[1]-F[1])-g[0])<0&&(H=!H)}return H}var wt=e(10),xt=e(40);function ft(it,z,P,H,k,d,g,F){var V=(Math.atan2(F-z,g-it)+2*Math.PI)%(2*Math.PI);if(V<H||V>k)return!1;var tt={x:it+P*Math.cos(V),y:z+P*Math.sin(V)};return Object(S.b)(tt.x,tt.y,g,F)<=d/2}var Bt=wt.a.transform,Rt=Object(p.a)({hasArc:function(z){for(var P=!1,H=z.length,k=0;k<H;k++){var d=z[k][0];if(d==="C"||d==="A"||d==="Q"){P=!0;break}}return P},extractPolygons:function(z){for(var P=z.length,H=[],k=[],d=[],g=0;g<P;g++){var F=z[g],V=F[0];V==="M"?(d.length&&(k.push(d),d=[]),d.push([F[1],F[2]])):V==="Z"?d.length&&(H.push(d),d=[]):d.push([F[1],F[2]])}return d.length>0&&k.push(d),{polygons:H,polylines:k}},isPointInStroke:function(z,P,H,k,d){for(var g=!1,F=P/2,V=0;V<z.length;V++){var tt=z[V],ot=tt.currentPoint,at=tt.params,At=tt.prePoint,yt=tt.box;if(!yt||Object(S.e)(yt.x-F,yt.y-F,yt.width+P,yt.height+P,H,k)){switch(tt.command){case"L":case"Z":g=T(At[0],At[1],ot[0],ot[1],P,H,k);break;case"Q":g=O.e.pointDistance(At[0],At[1],at[1],at[2],at[3],at[4],H,k)<=P/2;break;case"C":g=O.b.pointDistance(At[0],At[1],at[1],at[2],at[3],at[4],at[5],at[6],H,k,d)<=P/2;break;case"A":var gt=tt.arcParams,bt=gt.cx,Tt=gt.cy,Dt=gt.rx,Ut=gt.ry,jt=gt.startAngle,Vt=gt.endAngle,Ht=gt.xRotation,re=[H,k,1],pe=Dt>Ut?Dt:Ut,ye=Bt(null,[["t",-bt,-Tt],["r",-Ht],["s",1/(Dt>Ut?1:Dt/Ut),1/(Dt>Ut?Ut/Dt:1)]]);xt.transformMat3(re,re,ye),g=ft(0,0,pe,jt,Vt,P,re[0],re[1])}if(g)break}}return g}},b.PathUtil);function Ot(it,z,P){for(var H=!1,k=0;k<it.length&&!(H=St(it[k],z,P));k++);return H}var X=function(it){function z(){return it!==null&&it.apply(this,arguments)||this}return Object(p.b)(z,it),z.prototype.getDefaultAttrs=function(){var P=it.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{startArrow:!1,endArrow:!1})},z.prototype.initAttrs=function(P){this._setPathArr(P.path),this.setArrow()},z.prototype.onAttrChange=function(P,H,k){it.prototype.onAttrChange.call(this,P,H,k),P==="path"&&this._setPathArr(H),this.setArrow()},z.prototype._setPathArr=function(P){this.attrs.path=Object(D.c)(P);var H=Rt.hasArc(P);this.set("hasArc",H),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},z.prototype.getSegments=function(){var P=this.get("segements");return P||(P=Object(D.d)(this.attr("path")),this.set("segments",P)),P},z.prototype.setArrow=function(){var P=this.attr(),H=P.startArrow,k=P.endArrow;if(H){var d=this.getStartTangent();v.b(this,P,d[0][0],d[0][1],d[1][0],d[1][1])}k&&(d=this.getEndTangent(),v.a(this,P,d[0][0],d[0][1],d[1][0],d[1][1]))},z.prototype.isInStrokeOrPath=function(P,H,k,d,g){var F=this.getSegments(),V=this.get("hasArc"),tt=!1;if(k){var ot=this.getTotalLength();tt=Rt.isPointInStroke(F,g,P,H,ot)}if(!tt&&d)if(V)tt=et(this,P,H);else{var at=this.attr("path"),At=Rt.extractPolygons(at);tt=Ot(At.polygons,P,H)||Ot(At.polylines,P,H)}return tt},z.prototype.createPath=function(P){var H=this.attr(),k=this.get("paramsCache");Object(l.e)(this,P,H,k)},z.prototype.afterDrawPath=function(P){var H=this.get("startArrowShape"),k=this.get("endArrowShape");H&&H.draw(P),k&&k.draw(P)},z.prototype.getTotalLength=function(){var P=this.get("totalLength");return Object(C.s)(P)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):P},z.prototype.getPoint=function(P){var H,k,d=this.get("tCache");d||(this._calculateCurve(),this._setTcache(),d=this.get("tCache"));var g=this.get("curve");if(!d||d.length===0)return g?{x:g[0][1],y:g[0][2]}:null;Object(C.f)(d,function(ot,at){P>=ot[0]&&P<=ot[1]&&(H=(P-ot[0])/(ot[1]-ot[0]),k=at)});var F=g[k];if(Object(C.s)(F)||Object(C.s)(k))return null;var V=F.length,tt=g[k+1];return O.b.pointAt(F[V-2],F[V-1],tt[1],tt[2],tt[3],tt[4],tt[5],tt[6],H)},z.prototype._calculateCurve=function(){var P=this.attr().path;this.set("curve",Rt.pathToCurve(P))},z.prototype._setTcache=function(){var P,H,k,d,g=0,F=0,V=[],tt=this.get("curve");tt&&(Object(C.f)(tt,function(ot,at){k=tt[at+1],d=ot.length,k&&(g+=O.b.length(ot[d-2],ot[d-1],k[1],k[2],k[3],k[4],k[5],k[6])||0)}),this.set("totalLength",g),g!==0?(Object(C.f)(tt,function(ot,at){k=tt[at+1],d=ot.length,k&&((P=[])[0]=F/g,H=O.b.length(ot[d-2],ot[d-1],k[1],k[2],k[3],k[4],k[5],k[6]),F+=H||0,P[1]=F/g,V.push(P))}),this.set("tCache",V)):this.set("tCache",[]))},z.prototype.getStartTangent=function(){var P,H=this.getSegments();if(H.length>1){var k=H[0].currentPoint,d=H[1].currentPoint,g=H[1].startTangent;P=[],g?(P.push([k[0]-g[0],k[1]-g[1]]),P.push([k[0],k[1]])):(P.push([d[0],d[1]]),P.push([k[0],k[1]]))}return P},z.prototype.getEndTangent=function(){var P,H=this.getSegments(),k=H.length;if(k>1){var d=H[k-2].currentPoint,g=H[k-1].currentPoint,F=H[k-1].endTangent;P=[],F?(P.push([g[0]-F[0],g[1]-F[1]]),P.push([g[0],g[1]])):(P.push([d[0],d[1]]),P.push([g[0],g[1]]))}return P},z}(j);function ut(it,z,P,H,k){var d=it.length;if(d<2)return!1;for(var g=0;g<d-1;g++)if(T(it[g][0],it[g][1],it[g+1][0],it[g+1][1],z,P,H))return!0;if(k){var F=it[0],V=it[d-1];if(T(F[0],F[1],V[0],V[1],z,P,H))return!0}return!1}var vt=function(it){function z(){return it!==null&&it.apply(this,arguments)||this}return Object(p.b)(z,it),z.prototype.isInStrokeOrPath=function(P,H,k,d,g){var F=this.attr().points,V=!1;return k&&(V=ut(F,g,P,H,!0)),!V&&d&&(V=St(F,P,H)),V},z.prototype.createPath=function(P){var H=this.attr().points;if(!(H.length<2)){P.beginPath();for(var k=0;k<H.length;k++){var d=H[k];k===0?P.moveTo(d[0],d[1]):P.lineTo(d[0],d[1])}P.closePath()}},z}(j),pt=function(it){function z(){return it!==null&&it.apply(this,arguments)||this}return Object(p.b)(z,it),z.prototype.getDefaultAttrs=function(){var P=it.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{startArrow:!1,endArrow:!1})},z.prototype.initAttrs=function(P){this.setArrow()},z.prototype.onAttrChange=function(P,H,k){it.prototype.onAttrChange.call(this,P,H,k),this.setArrow(),["points"].indexOf(P)!==-1&&this._resetCache()},z.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},z.prototype.setArrow=function(){var P=this.attr(),H=this.attrs,k=H.points,d=H.startArrow,g=H.endArrow,F=k.length,V=k[0][0],tt=k[0][1],ot=k[F-1][0],at=k[F-1][1];d&&v.b(this,P,k[1][0],k[1][1],V,tt),g&&v.a(this,P,k[F-2][0],k[F-2][1],ot,at)},z.prototype.isFill=function(){return!1},z.prototype.isInStrokeOrPath=function(P,H,k,d,g){return!(!k||!g)&&ut(this.attr().points,g,P,H,!1)},z.prototype.isStroke=function(){return!0},z.prototype.createPath=function(P){var H=this.attr(),k=H.points,d=H.startArrow,g=H.endArrow,F=k.length;if(!(k.length<2)){var V,tt=k[0][0],ot=k[0][1],at=k[F-1][0],At=k[F-1][1];d&&d.d&&(tt+=(V=v.c(tt,ot,k[1][0],k[1][1],d.d)).dx,ot+=V.dy),g&&g.d&&(at-=(V=v.c(k[F-2][0],k[F-2][1],at,At,g.d)).dx,At-=V.dy),P.beginPath(),P.moveTo(tt,ot);for(var yt=0;yt<F-1;yt++){var gt=k[yt];P.lineTo(gt[0],gt[1])}P.lineTo(at,At)}},z.prototype.afterDrawPath=function(P){var H=this.get("startArrowShape"),k=this.get("endArrowShape");H&&H.draw(P),k&&k.draw(P)},z.prototype.getTotalLength=function(){var P=this.attr().points,H=this.get("totalLength");return Object(C.s)(H)?(this.set("totalLength",O.d.length(P)),this.get("totalLength")):H},z.prototype.getPoint=function(P){var H,k,d=this.attr().points,g=this.get("tCache");return g||(this._setTcache(),g=this.get("tCache")),Object(C.f)(g,function(F,V){P>=F[0]&&P<=F[1]&&(H=(P-F[0])/(F[1]-F[0]),k=V)}),O.c.pointAt(d[k][0],d[k][1],d[k+1][0],d[k+1][1],H)},z.prototype._setTcache=function(){var P=this.attr().points;if(P&&P.length!==0){var H=this.getTotalLength();if(!(H<=0)){var k,d,g=0,F=[];Object(C.f)(P,function(V,tt){P[tt+1]&&((k=[])[0]=g/H,d=O.c.length(V[0],V[1],P[tt+1][0],P[tt+1][1]),g+=d,k[1]=g/H,F.push(k))}),this.set("tCache",F)}}},z.prototype.getStartTangent=function(){var P=this.attr().points,H=[];return H.push([P[1][0],P[1][1]]),H.push([P[0][0],P[0][1]]),H},z.prototype.getEndTangent=function(){var P=this.attr().points,H=P.length-1,k=[];return k.push([P[H-1][0],P[H-1][1]]),k.push([P[H][0],P[H][1]]),k},z}(j),Et=e(120),q=function(it){function z(){return it!==null&&it.apply(this,arguments)||this}return Object(p.b)(z,it),z.prototype.getDefaultAttrs=function(){var P=it.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{x:0,y:0,width:0,height:0,radius:0})},z.prototype.isInStrokeOrPath=function(P,H,k,d,g){var F=this.attr(),V=F.x,tt=F.y,ot=F.width,at=F.height,At=F.radius;if(At){var yt=!1;return k&&(yt=function(bt,Tt,Dt,Ut,jt,Vt,Ht,re){return T(bt+jt,Tt,bt+Dt-jt,Tt,Vt,Ht,re)||T(bt+Dt,Tt+jt,bt+Dt,Tt+Ut-jt,Vt,Ht,re)||T(bt+Dt-jt,Tt+Ut,bt+jt,Tt+Ut,Vt,Ht,re)||T(bt,Tt+Ut-jt,bt,Tt+jt,Vt,Ht,re)||ft(bt+Dt-jt,Tt+jt,jt,1.5*Math.PI,2*Math.PI,Vt,Ht,re)||ft(bt+Dt-jt,Tt+Ut-jt,jt,0,.5*Math.PI,Vt,Ht,re)||ft(bt+jt,Tt+Ut-jt,jt,.5*Math.PI,Math.PI,Vt,Ht,re)||ft(bt+jt,Tt+jt,jt,Math.PI,1.5*Math.PI,Vt,Ht,re)}(V,tt,ot,at,At,g,P,H)),!yt&&d&&(yt=et(this,P,H)),yt}var gt=g/2;return d&&k?Object(S.e)(V-gt,tt-gt,ot+gt,at+gt,P,H):d?Object(S.e)(V,tt,ot,at,P,H):k?function(bt,Tt,Dt,Ut,jt,Vt,Ht){var re=jt/2;return Object(S.e)(bt-re,Tt-re,Dt,jt,Vt,Ht)||Object(S.e)(bt+Dt-re,Tt-re,jt,Ut,Vt,Ht)||Object(S.e)(bt+re,Tt+Ut-re,Dt,jt,Vt,Ht)||Object(S.e)(bt-re,Tt+re,jt,Ut,Vt,Ht)}(V,tt,ot,at,g,P,H):void 0},z.prototype.createPath=function(P){var H=this.attr(),k=H.x,d=H.y,g=H.width,F=H.height,V=H.radius;if(P.beginPath(),V===0)P.rect(k,d,g,F);else{var tt=Object(Et.a)(V),ot=tt[0],at=tt[1],At=tt[2],yt=tt[3];P.moveTo(k+ot,d),P.lineTo(k+g-at,d),at!==0&&P.arc(k+g-at,d+at,at,-Math.PI/2,0),P.lineTo(k+g,d+F-At),At!==0&&P.arc(k+g-At,d+F-At,At,0,Math.PI/2),P.lineTo(k+yt,d+F),yt!==0&&P.arc(k+yt,d+F-yt,yt,Math.PI/2,Math.PI),P.lineTo(k,d+ot),ot!==0&&P.arc(k+ot,d+ot,ot,Math.PI,1.5*Math.PI),P.closePath()}},z}(j),st=function(it){function z(){return it!==null&&it.apply(this,arguments)||this}return Object(p.b)(z,it),z.prototype.getDefaultAttrs=function(){var P=it.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},z.prototype.isOnlyHitBox=function(){return!0},z.prototype.initAttrs=function(P){this._assembleFont(),P.text&&this._setText(P.text)},z.prototype._assembleFont=function(){var P=this.attrs;P.font=Object(b.assembleFont)(P)},z.prototype._setText=function(P){var H=null;Object(S.k)(P)&&P.indexOf(`
`)!==-1&&(H=P.split(`
`)),this.set("textArr",H)},z.prototype.onAttrChange=function(P,H,k){it.prototype.onAttrChange.call(this,P,H,k),P.startsWith("font")&&this._assembleFont(),P==="text"&&this._setText(H)},z.prototype._getSpaceingY=function(){var P=this.attrs,H=P.lineHeight,k=1*P.fontSize;return H?H-k:.14*k},z.prototype._drawTextArr=function(P,H,k){var d,g=this.attrs,F=g.textBaseline,V=g.x,tt=g.y,ot=1*g.fontSize,at=this._getSpaceingY(),At=Object(b.getTextHeight)(g.text,g.fontSize,g.lineHeight);Object(S.c)(H,function(yt,gt){d=tt+gt*(at+ot)-At+ot,F==="middle"&&(d+=At-ot-(At-ot)/2),F==="top"&&(d+=At-ot),k?P.fillText(yt,V,d):P.strokeText(yt,V,d)})},z.prototype._drawText=function(P,H){var k=this.attr(),d=k.x,g=k.y,F=this.get("textArr");if(F)this._drawTextArr(P,F,H);else{var V=k.text;H?P.fillText(V,d,g):P.strokeText(V,d,g)}},z.prototype.strokeAndFill=function(P){var H=this.attrs,k=H.lineWidth,d=H.opacity,g=H.strokeOpacity,F=H.fillOpacity;this.isStroke()&&k>0&&(Object(S.i)(g)||g===1||(P.globalAlpha=d),this.stroke(P)),this.isFill()&&(Object(S.i)(F)||F===1?this.fill(P):(P.globalAlpha=F,this.fill(P),P.globalAlpha=d)),this.afterDrawPath(P)},z.prototype.fill=function(P){this._drawText(P,!0)},z.prototype.stroke=function(P){this._drawText(P,!1)},z}(j)},function(a,E,e){var r=e(72),p=e(284),b=e(285),S=r?r.toStringTag:void 0;a.exports=function(l){return l==null?l===void 0?"[object Undefined]":"[object Null]":S&&S in Object(l)?p(l):b(l)}},function(a,E,e){var r=e(167),p=e(130),b=e(53);a.exports=function(S){return b(S)?r(S):p(S)}},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.tagProperty=E.tagParameter=E.decorate=void 0;var r=e(41),p=e(32);function b(A,j,y,n,s){var h={},M=typeof s=="number",O=s!==void 0&&M?s.toString():y;if(M&&y!==void 0)throw new Error(r.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(A,j)&&(h=Reflect.getMetadata(A,j));var T=h[O];if(Array.isArray(T))for(var v=0,m=T;v<m.length;v++){var C=m[v];if(C.key===n.key)throw new Error(r.DUPLICATED_METADATA+" "+C.key.toString())}else T=[];T.push(n),h[O]=T,Reflect.defineMetadata(A,h,j)}function S(A,j){Reflect.decorate(A,j)}function l(A,j){return function(y,n){j(y,n,A)}}E.tagParameter=function(A,j,y,n){b(p.TAGGED,A,j,n,y)},E.tagProperty=function(A,j,y){b(p.TAGGED_PROP,A.constructor,j,y)},E.decorate=function(A,j,y){typeof y=="number"?S([l(y,A)],j):typeof y=="string"?Reflect.decorate([A],j,y):S([A],j)}},function(a,E,e){var r=e(443),p=e(444),b=e(218),S=e(445);a.exports=function(l,A){return r(l)||p(l,A)||b(l,A)||S()}},function(a,E,e){var r=e(57),p=e(48);a.exports=function(b){return typeof b=="number"||p(b)&&r(b)=="[object Number]"}},function(a,E,e){"use strict";e(78),e(18);var r=e(249);e.d(E,"Canvas",function(){return r.a}),e(77)},function(a,E,e){var r=e(236),p=e(235),b=e(243),S=e(150),l=e(244),A=[0,0];a.exports.computeMiter=function(j,y,n,s,h){return r(j,n,s),b(j,j),p(y,-j[1],j[0]),p(A,-n[1],n[0]),h/l(y,A)},a.exports.normal=function(j,y){return p(j,-y[1],y[0]),j},a.exports.direction=function(j,y,n){return S(j,y,n),b(j,j),j}},function(a,E,e){var r=e(283),p=e(288);a.exports=function(b,S){var l=p(b,S);return r(l)?l:void 0}},function(a,E,e){var r=e(167),p=e(308),b=e(53);a.exports=function(S){return b(S)?r(S,!0):p(S)}},function(a,E){a.exports=function(e){return e}},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.id=void 0;var r=0;E.id=function(){return r++}},function(a,E,e){"use strict";e.d(E,"b",function(){return b}),e.d(E,"c",function(){return S}),e.d(E,"a",function(){return l});var r=e(19),p=e(116);function b(A,j,y){var n=1;return Object(r.h)(A)&&(n=A.split(`
`).length),n>1?j*n+function(s,h){return h?h-s:.14*s}(j,y)*(n-1):j}function S(A,j){var y=Object(p.a)(),n=0;if(Object(r.e)(A)||A==="")return n;if(y.save(),y.font=j,Object(r.h)(A)&&A.includes(`
`)){var s=A.split(`
`);Object(r.a)(s,function(h){var M=y.measureText(h).width;n<M&&(n=M)})}else n=y.measureText(A).width;return y.restore(),n}function l(A){var j=A.fontSize,y=A.fontFamily,n=A.fontWeight;return[A.fontStyle,A.fontVariant,n,j+"px",y].join(" ").trim()}},function(a,E,e){"use strict";e.d(E,"a",function(){return po}),e.d(E,"b",function(){return wo});var r,p,b=function(U){return typeof U=="string"},S=/-(\w)/g,l=(r=function(U){return U.replace(S,function(w,L){return L?L.toUpperCase():""})},p=Object.create(null),Array.isArray),A=function(U){return typeof U=="number"},j=function(U){return Number.isNaN(Number(U))},y=function(U,w,L){for(var J=[],It=0;It<U;It++)J[It]=0;return L&&L.forEach(function(Nt){Nt.source&&(J[w[Nt.source]]+=1),Nt.target&&(J[w[Nt.target]]+=1)}),J},n=function(U){for(var w=[],L=U.length,J=0;J<L;J+=1){w[J]=[];for(var It=0;It<L;It+=1)J===It?w[J][It]=0:U[J][It]!==0&&U[J][It]?w[J][It]=U[J][It]:w[J][It]=1/0}for(var Nt=0;Nt<L;Nt+=1)for(var K=0;K<L;K+=1)for(var Pt=0;Pt<L;Pt+=1)w[K][Pt]>w[K][Nt]+w[Nt][Pt]&&(w[K][Pt]=w[K][Nt]+w[Nt][Pt]);return w},s=function(U,w){var L=U.nodes,J=U.edges,It=[],Nt={};if(!L)throw new Error("invalid nodes data!");return L&&L.forEach(function(K,Pt){Nt[K.id]=Pt,It.push([])}),J&&J.forEach(function(K){var Pt=K.source,Qt=K.target,qt=Nt[Pt],xe=Nt[Qt];It[qt][xe]=1,w||(It[xe][qt]=1)}),It},h=function(U,w){typeof w=="function"&&function L(J,It){if(J&&J.children){for(var Nt=J.children.length-1;Nt>=0;Nt--)if(!L(J.children[Nt],It))return}return!!It(J)}(U,w)};function M(Q){return(M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}var O=function Q(U){if(U===null)return U;if(U instanceof Date)return new Date(U.getTime());if(U instanceof Array){var w=[];return U.forEach(function(J){w.push(J)}),w.map(function(J){return Q(J)})}if(M(U)==="object"&&U!=={}){var L=Object.assign({},U);return Object.keys(L).forEach(function(J){L[J]=Q(L[J])}),L}return U},T=function(U){return typeof U=="function"};function v(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}var m=function(){function Q(){(function(J,It){if(!(J instanceof It))throw new TypeError("Cannot call a class as a function")})(this,Q),this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}var U,w,L;return U=Q,(w=[{key:"layout",value:function(It){return this.init(It),this.execute(!0)}},{key:"init",value:function(It){this.nodes=It.nodes||[],this.edges=It.edges||[],this.combos=It.combos||[]}},{key:"execute",value:function(It){}},{key:"executeWithWorker",value:function(){}},{key:"getDefaultCfg",value:function(){return{}}},{key:"updateCfg",value:function(It){It&&Object.assign(this,It)}},{key:"getType",value:function(){return"base"}},{key:"destroy",value:function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}])&&v(U.prototype,w),L&&v(U,L),Q}();function C(Q){return(C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function D(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function Y(Q,U){return(Y=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function Z(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=dt(Q);if(U){var J=dt(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return et(this,w)}}function et(Q,U){return!U||C(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function dt(Q){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}var ht=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&Y(Nt,K)})(It,Q);var U,w,L,J=Z(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).begin=[0,0],K.preventOverlap=!0,K.preventOverlapPadding=10,K.condense=!1,K.sortBy="degree",K.nodeSize=30,K.nodes=[],K.edges=[],K.width=300,K.height=300,K.row=0,K.col=0,K.cellWidth=0,K.cellHeight=0,K.cellUsed={},K.id2manPos={},K.onLayoutEnd=function(){},K.updateCfg(Nt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}},{key:"execute",value:function(){var K=this,Pt=K.nodes,Qt=Pt.length,qt=K.begin;if(Qt!==0){if(Qt===1)return Pt[0].x=qt[0],Pt[0].y=qt[1],void(K.onLayoutEnd&&K.onLayoutEnd());var xe=K.edges,Ie=[];Pt.forEach(function(qn){Ie.push(qn)});var Ye={};if(Ie.forEach(function(qn,fr){Ye[qn.id]=fr}),(K.sortBy==="degree"||!b(K.sortBy)||Ie[0][K.sortBy]===void 0)&&(K.sortBy="degree",j(Pt[0].degree))){var Ne=y(Ie.length,Ye,xe);Ie.forEach(function(qn,fr){qn.degree=Ne[fr]})}Ie.sort(function(qn,fr){return fr[K.sortBy]-qn[K.sortBy]}),K.width||typeof window=="undefined"||(K.width=window.innerWidth),K.height||typeof window=="undefined"||(K.height=window.innerHeight);var Xe=K.rows,Je=K.cols!=null?K.cols:K.columns;if(K.cells=Qt,Xe!=null&&Je!=null?(K.rows=Xe,K.cols=Je):Xe!=null&&Je==null?(K.rows=Xe,K.cols=Math.ceil(K.cells/K.rows)):Xe==null&&Je!=null?(K.cols=Je,K.rows=Math.ceil(K.cells/K.cols)):(K.splits=Math.sqrt(K.cells*K.height/K.width),K.rows=Math.round(K.splits),K.cols=Math.round(K.width/K.height*K.splits)),K.cols*K.rows>K.cells){var Ge=K.small(),qe=K.large();(Ge-1)*qe>=K.cells?K.small(Ge-1):(qe-1)*Ge>=K.cells&&K.large(qe-1)}else for(;K.cols*K.rows<K.cells;){var yn=K.small(),Pn=K.large();(Pn+1)*yn>=K.cells?K.large(Pn+1):K.small(yn+1)}K.cellWidth=K.width/K.cols,K.cellHeight=K.height/K.rows,K.condense&&(K.cellWidth=0,K.cellHeight=0),K.preventOverlap&&Ie.forEach(function(qn){var fr,br;qn.x&&qn.y||(qn.x=0,qn.y=0),l(qn.size)?(fr=qn.size[0],br=qn.size[1]):A(qn.size)&&(fr=qn.size,br=qn.size),fr!==void 0&&br!==void 0||(l(K.nodeSize)?(fr=K.nodeSize[0],br=K.nodeSize[1]):A(K.nodeSize)?(fr=K.nodeSize,br=K.nodeSize):(fr=30,br=30));var gr=K.preventOverlapPadding,hr=fr+gr,Cr=br+gr;K.cellWidth=Math.max(K.cellWidth,hr),K.cellHeight=Math.max(K.cellHeight,Cr)}),K.cellUsed={},K.row=0,K.col=0,K.id2manPos={};for(var En=0;En<Ie.length;En++){var Ln=Ie[En],Zn=void 0;if(K.position&&(Zn=K.position(Ln)),Zn&&(Zn.row!==void 0||Zn.col!==void 0)){var Qn={row:Zn.row,col:Zn.col};if(Qn.col===void 0)for(Qn.col=0;K.used(Qn.row,Qn.col);)Qn.col++;else if(Qn.row===void 0)for(Qn.row=0;K.used(Qn.row,Qn.col);)Qn.row++;K.id2manPos[Ln.id]=Qn,K.use(Qn.row,Qn.col)}K.getPos(Ln)}return K.onLayoutEnd&&K.onLayoutEnd(),{edges:xe,nodes:Ie}}K.onLayoutEnd&&K.onLayoutEnd()}},{key:"small",value:function(K){var Pt,Qt=this.rows||5,qt=this.cols||5;return K==null?Pt=Math.min(Qt,qt):Math.min(Qt,qt)===this.rows?this.rows=K:this.cols=K,Pt}},{key:"large",value:function(K){var Pt,Qt=this.rows||5,qt=this.cols||5;return K==null?Pt=Math.max(Qt,qt):Math.max(Qt,qt)===this.rows?this.rows=K:this.cols=K,Pt}},{key:"used",value:function(K,Pt){return this.cellUsed["c-".concat(K,"-").concat(Pt)]||!1}},{key:"use",value:function(K,Pt){this.cellUsed["c-".concat(K,"-").concat(Pt)]=!0}},{key:"moveToNextCell",value:function(){var K=this.cols||5;this.col++,this.col>=K&&(this.col=0,this.row++)}},{key:"getPos",value:function(K){var Pt,Qt,qt=this.begin,xe=this.cellWidth,Ie=this.cellHeight,Ye=this.id2manPos[K.id];if(Ye)Pt=Ye.col*xe+xe/2+qt[0],Qt=Ye.row*Ie+Ie/2+qt[1];else{for(;this.used(this.row,this.col);)this.moveToNextCell();Pt=this.col*xe+xe/2+qt[0],Qt=this.row*Ie+Ie/2+qt[1],this.use(this.row,this.col),this.moveToNextCell()}K.x=Pt,K.y=Qt}},{key:"getType",value:function(){return"grid"}}])&&D(U.prototype,w),L&&D(U,L),It}(m);function St(Q){return(St=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function wt(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function xt(Q,U){return(xt=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function ft(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Rt(Q);if(U){var J=Rt(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Bt(this,w)}}function Bt(Q,U){return!U||St(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function Rt(Q){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}var Ot=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&xt(Nt,K)})(It,Q);var U,w,L,J=ft(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).center=[0,0],K.width=300,K.height=300,K.nodes=[],K.edges=[],K.onLayoutEnd=function(){},K.updateCfg(Nt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{center:[0,0],width:300,height:300}}},{key:"execute",value:function(){var K=this,Pt=K.nodes,Qt=K.center;return K.width||typeof window=="undefined"||(K.width=window.innerWidth),K.height||typeof window=="undefined"||(K.height=window.innerHeight),Pt&&Pt.forEach(function(qt){qt.x=.9*(Math.random()-.5)*K.width+Qt[0],qt.y=.9*(Math.random()-.5)*K.height+Qt[1]}),K.onLayoutEnd&&K.onLayoutEnd(),{nodes:Pt,edges:this.edges}}},{key:"getType",value:function(){return"random"}}])&&wt(U.prototype,w),L&&wt(U,L),It}(m);function X(Q){return(X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function ut(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function vt(Q,U){return(vt=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function pt(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=q(Q);if(U){var J=q(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Et(this,w)}}function Et(Q,U){return!U||X(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function q(Q){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}var st=function(U,w){return U?A(U)?function(L){return U}:U:function(L){return w||1}},it=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&vt(Nt,K)})(It,Q);var U,w,L,J=pt(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).maxIteration=1e3,K.edgeStrength=200,K.nodeStrength=1e3,K.coulombDisScale=.005,K.damping=.9,K.maxSpeed=1e3,K.minMovement=.5,K.interval=.02,K.factor=1,K.linkDistance=1,K.gravity=10,K.preventOverlap=!0,K.tick=function(){},K.nodes=[],K.edges=[],K.width=300,K.height=300,K.nodeMap={},K.nodeIdxMap={},K.updateCfg(Nt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{maxIteration:500,gravity:10,enableTick:!0}}},{key:"execute",value:function(){var K=this,Pt=K.nodes;if(K.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(K.timeInterval),Pt&&Pt.length!==0){K.width||typeof window=="undefined"||(K.width=window.innerWidth),K.height||typeof window=="undefined"||(K.height=window.innerHeight),K.center||(K.center=[K.width/2,K.height/2]);var Qt=K.center;if(Pt.length===1)return Pt[0].x=Qt[0],Pt[0].y=Qt[1],void(K.onLayoutEnd&&K.onLayoutEnd());var qt={},xe={};Pt.forEach(function(Ge,qe){A(Ge.x)||(Ge.x=Math.random()*K.width),A(Ge.y)||(Ge.y=Math.random()*K.height),qt[Ge.id]=Ge,xe[Ge.id]=qe}),K.nodeMap=qt,K.nodeIdxMap=xe,K.linkDistance=st(K.linkDistance,1),K.nodeStrength=st(K.nodeStrength,1),K.edgeStrength=st(K.edgeStrength,1);var Ie,Ye=K.nodeSize;if(K.preventOverlap){var Ne,Xe=K.nodeSpacing;Ne=A(Xe)?function(){return Xe}:T(Xe)?Xe:function(){return 0},Ie=Ye?l(Ye)?function(Ge){return(Ye[0]>Ye[1]?Ye[0]:Ye[1])+Ne(Ge)}:function(Ge){return Ye+Ne(Ge)}:function(Ge){return Ge.size?l(Ge.size)?(Ge.size[0]>Ge.size[1]?Ge.size[0]:Ge.size[1])+Ne(Ge):Ge.size+Ne(Ge):10+Ne(Ge)}}K.nodeSize=Ie;var Je=K.edges;K.degrees=y(Pt.length,K.nodeIdxMap,Je),K.getMass||(K.getMass=function(Ge){return K.degrees[K.nodeIdxMap[Ge.id]]}),K.run()}else K.onLayoutEnd&&K.onLayoutEnd()}},{key:"run",value:function(){var K=this,Pt=K.nodes,Qt=K.edges,qt=K.maxIteration;if(typeof window!="undefined"){var xe=0;this.timeInterval=window.setInterval(function(){var Ie=[],Ye=[];if(Pt){Pt.forEach(function(Ge,qe){Ie[2*qe]=0,Ie[2*qe+1]=0,Ye[2*qe]=0,Ye[2*qe+1]=0}),K.calRepulsive(Ie,Pt),Qt&&K.calAttractive(Ie,Qt),K.calGravity(Ie,Pt);var Ne=Math.max(.02,K.interval-.002*xe);K.updateVelocity(Ie,Ye,Ne,Pt);var Xe=[];Pt.forEach(function(Ge){Xe.push({x:Ge.x,y:Ge.y})}),K.updatePosition(Ye,Ne,Pt),K.tick&&K.tick();var Je=0;Pt.forEach(function(Ge,qe){var yn=Ge.x-Xe[qe].x,Pn=Ge.y-Xe[qe].y;Je+=Math.sqrt(yn*yn+Pn*Pn)}),(Je/=Pt.length)<K.minMovement&&(window.clearInterval(K.timeInterval),K.onLayoutEnd&&K.onLayoutEnd()),++xe>qt&&(window.clearInterval(K.timeInterval),K.onLayoutEnd&&K.onLayoutEnd())}},0)}}},{key:"calRepulsive",value:function(K,Pt){var Qt=this.getMass,qt=this.nodeStrength,xe=this.factor,Ie=this.coulombDisScale,Ye=this.preventOverlap,Ne=this.nodeSize;Pt.forEach(function(Xe,Je){var Ge=Qt?Qt(Xe):1;Pt.forEach(function(qe,yn){if(!(Je>=yn)){var Pn=Xe.x-qe.x,En=Xe.y-qe.y,Ln=Math.sqrt(Pn*Pn+En*En)+.01,Zn=(Ln+.1)*Ie,Qn=Pn/Ln,qn=En/Ln,fr=(qt(Xe)+qt(qe))/2*xe/(Zn*Zn),br=Qt?Qt(qe):1;if(K[2*Je]+=Qn*fr/Ge,K[2*Je+1]+=qn*fr/Ge,K[2*yn]-=Qn*fr/br,K[2*yn+1]-=qn*fr/br,Ye&&Ln<(Ne(Xe)+Ne(qe))/2){var gr=(qt(Xe)+qt(qe))/2/(Ln*Ln);K[2*Je]+=Qn*gr/Ge,K[2*Je+1]+=qn*gr/Ge,K[2*yn]-=Qn*gr/br,K[2*yn+1]-=qn*gr/br}}})})}},{key:"calAttractive",value:function(K,Pt){var Qt=this.nodeMap,qt=this.nodeIdxMap,xe=this.linkDistance,Ie=this.edgeStrength,Ye=this.getMass;Pt.forEach(function(Ne,Xe){var Je=Qt[Ne.source],Ge=Qt[Ne.target],qe=Ge.x-Je.x,yn=Ge.y-Je.y,Pn=Math.sqrt(qe*qe+yn*yn)+.01,En=qe/Pn,Ln=yn/Pn,Zn=((xe(Ne)||1)-Pn)*Ie(Ne),Qn=qt[Ne.source],qn=qt[Ne.target],fr=Ye?Ye(Je):1,br=Ye?Ye(Ge):1;K[2*Qn]-=En*Zn/fr,K[2*Qn+1]-=Ln*Zn/fr,K[2*qn]+=En*Zn/br,K[2*qn+1]+=Ln*Zn/br})}},{key:"calGravity",value:function(K,Pt){for(var Qt=this.center,qt=this.gravity,xe=this.degrees,Ie=Pt.length,Ye=0;Ye<Ie;Ye++){var Ne=Pt[Ye],Xe=Ne.x-Qt[0],Je=Ne.y-Qt[1],Ge=qt;if(this.getCenter){var qe=this.getCenter(Ne,xe[Ye]);qe&&A(qe[0])&&A(qe[1])&&A(qe[2])&&(Xe=Ne.x-qe[0],Je=Ne.y-qe[1],Ge=qe[2])}Ge&&(K[2*Ye]-=Ge*Xe,K[2*Ye+1]-=Ge*Je)}}},{key:"updateVelocity",value:function(K,Pt,Qt,qt){var xe=this,Ie=Qt*xe.damping;qt.forEach(function(Ye,Ne){var Xe=K[2*Ne]*Ie||.01,Je=K[2*Ne+1]*Ie||.01,Ge=Math.sqrt(Xe*Xe+Je*Je);if(Ge>xe.maxSpeed){var qe=xe.maxSpeed/Ge;Xe*=qe,Je*=qe}Pt[2*Ne]=Xe,Pt[2*Ne+1]=Je})}},{key:"updatePosition",value:function(K,Pt,Qt){Qt.forEach(function(qt,xe){var Ie=K[2*xe]*Pt,Ye=K[2*xe+1]*Pt;qt.x+=Ie,qt.y+=Ye})}},{key:"stop",value:function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}},{key:"destroy",value:function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0}},{key:"getType",value:function(){return"gForce"}}])&&ut(U.prototype,w),L&&ut(U,L),It}(m);function z(Q,U,w,L){if(isNaN(U)||isNaN(w))return Q;var J,It,Nt,K,Pt,Qt,qt,xe,Ie,Ye=Q._root,Ne={data:L},Xe=Q._x0,Je=Q._y0,Ge=Q._x1,qe=Q._y1;if(!Ye)return Q._root=Ne,Q;for(;Ye.length;)if((Qt=U>=(It=(Xe+Ge)/2))?Xe=It:Ge=It,(qt=w>=(Nt=(Je+qe)/2))?Je=Nt:qe=Nt,J=Ye,!(Ye=Ye[xe=qt<<1|Qt]))return J[xe]=Ne,Q;if(K=+Q._x.call(null,Ye.data),Pt=+Q._y.call(null,Ye.data),U===K&&w===Pt)return Ne.next=Ye,J?J[xe]=Ne:Q._root=Ne,Q;do J=J?J[xe]=new Array(4):Q._root=new Array(4),(Qt=U>=(It=(Xe+Ge)/2))?Xe=It:Ge=It,(qt=w>=(Nt=(Je+qe)/2))?Je=Nt:qe=Nt;while((xe=qt<<1|Qt)==(Ie=(Pt>=Nt)<<1|K>=It));return J[Ie]=Ye,J[xe]=Ne,Q}var P=function(U,w,L,J,It){this.node=U,this.x0=w,this.y0=L,this.x1=J,this.y1=It};function H(Q){return Q[0]}function k(Q){return Q[1]}function d(Q,U,w){var L=new g(U==null?H:U,w==null?k:w,NaN,NaN,NaN,NaN);return Q==null?L:L.addAll(Q)}function g(Q,U,w,L,J,It){this._x=Q,this._y=U,this._x0=w,this._y0=L,this._x1=J,this._y1=It,this._root=void 0}function F(Q){for(var U={data:Q.data},w=U;Q=Q.next;)w=w.next={data:Q.data};return U}var V=d.prototype=g.prototype;V.copy=function(){var Q,U,w=new g(this._x,this._y,this._x0,this._y0,this._x1,this._y1),L=this._root;if(!L)return w;if(!L.length)return w._root=F(L),w;for(Q=[{source:L,target:w._root=new Array(4)}];L=Q.pop();)for(var J=0;J<4;++J)(U=L.source[J])&&(U.length?Q.push({source:U,target:L.target[J]=new Array(4)}):L.target[J]=F(U));return w},V.add=function(Q){var U=+this._x.call(null,Q),w=+this._y.call(null,Q);return z(this.cover(U,w),U,w,Q)},V.addAll=function(Q){var U,w,L,J,It=Q.length,Nt=new Array(It),K=new Array(It),Pt=1/0,Qt=1/0,qt=-1/0,xe=-1/0;for(w=0;w<It;++w)isNaN(L=+this._x.call(null,U=Q[w]))||isNaN(J=+this._y.call(null,U))||(Nt[w]=L,K[w]=J,L<Pt&&(Pt=L),L>qt&&(qt=L),J<Qt&&(Qt=J),J>xe&&(xe=J));if(Pt>qt||Qt>xe)return this;for(this.cover(Pt,Qt).cover(qt,xe),w=0;w<It;++w)z(this,Nt[w],K[w],Q[w]);return this},V.cover=function(Q,U){if(isNaN(Q=+Q)||isNaN(U=+U))return this;var w=this._x0,L=this._y0,J=this._x1,It=this._y1;if(isNaN(w))J=(w=Math.floor(Q))+1,It=(L=Math.floor(U))+1;else{for(var Nt,K,Pt=J-w||1,Qt=this._root;w>Q||Q>=J||L>U||U>=It;)switch(K=(U<L)<<1|Q<w,(Nt=new Array(4))[K]=Qt,Qt=Nt,Pt*=2,K){case 0:J=w+Pt,It=L+Pt;break;case 1:w=J-Pt,It=L+Pt;break;case 2:J=w+Pt,L=It-Pt;break;case 3:w=J-Pt,L=It-Pt}this._root&&this._root.length&&(this._root=Qt)}return this._x0=w,this._y0=L,this._x1=J,this._y1=It,this},V.data=function(){var Q=[];return this.visit(function(U){if(!U.length)do Q.push(U.data);while(U=U.next)}),Q},V.extent=function(Q){return arguments.length?this.cover(+Q[0][0],+Q[0][1]).cover(+Q[1][0],+Q[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},V.find=function(Q,U,w){var L,J,It,Nt,K,Pt,Qt,qt=this._x0,xe=this._y0,Ie=this._x1,Ye=this._y1,Ne=[],Xe=this._root;for(Xe&&Ne.push(new P(Xe,qt,xe,Ie,Ye)),w==null?w=1/0:(qt=Q-w,xe=U-w,Ie=Q+w,Ye=U+w,w*=w);Pt=Ne.pop();)if(!(!(Xe=Pt.node)||(J=Pt.x0)>Ie||(It=Pt.y0)>Ye||(Nt=Pt.x1)<qt||(K=Pt.y1)<xe))if(Xe.length){var Je=(J+Nt)/2,Ge=(It+K)/2;Ne.push(new P(Xe[3],Je,Ge,Nt,K),new P(Xe[2],J,Ge,Je,K),new P(Xe[1],Je,It,Nt,Ge),new P(Xe[0],J,It,Je,Ge)),(Qt=(U>=Ge)<<1|Q>=Je)&&(Pt=Ne[Ne.length-1],Ne[Ne.length-1]=Ne[Ne.length-1-Qt],Ne[Ne.length-1-Qt]=Pt)}else{var qe=Q-+this._x.call(null,Xe.data),yn=U-+this._y.call(null,Xe.data),Pn=qe*qe+yn*yn;if(Pn<w){var En=Math.sqrt(w=Pn);qt=Q-En,xe=U-En,Ie=Q+En,Ye=U+En,L=Xe.data}}return L},V.remove=function(Q){if(isNaN(It=+this._x.call(null,Q))||isNaN(Nt=+this._y.call(null,Q)))return this;var U,w,L,J,It,Nt,K,Pt,Qt,qt,xe,Ie,Ye=this._root,Ne=this._x0,Xe=this._y0,Je=this._x1,Ge=this._y1;if(!Ye)return this;if(Ye.length)for(;;){if((Qt=It>=(K=(Ne+Je)/2))?Ne=K:Je=K,(qt=Nt>=(Pt=(Xe+Ge)/2))?Xe=Pt:Ge=Pt,U=Ye,!(Ye=Ye[xe=qt<<1|Qt]))return this;if(!Ye.length)break;(U[xe+1&3]||U[xe+2&3]||U[xe+3&3])&&(w=U,Ie=xe)}for(;Ye.data!==Q;)if(L=Ye,!(Ye=Ye.next))return this;return(J=Ye.next)&&delete Ye.next,L?(J?L.next=J:delete L.next,this):U?(J?U[xe]=J:delete U[xe],(Ye=U[0]||U[1]||U[2]||U[3])&&Ye===(U[3]||U[2]||U[1]||U[0])&&!Ye.length&&(w?w[Ie]=Ye:this._root=Ye),this):(this._root=J,this)},V.removeAll=function(Q){for(var U=0,w=Q.length;U<w;++U)this.remove(Q[U]);return this},V.root=function(){return this._root},V.size=function(){var Q=0;return this.visit(function(U){if(!U.length)do++Q;while(U=U.next)}),Q},V.visit=function(Q){var U,w,L,J,It,Nt,K=[],Pt=this._root;for(Pt&&K.push(new P(Pt,this._x0,this._y0,this._x1,this._y1));U=K.pop();)if(!Q(Pt=U.node,L=U.x0,J=U.y0,It=U.x1,Nt=U.y1)&&Pt.length){var Qt=(L+It)/2,qt=(J+Nt)/2;(w=Pt[3])&&K.push(new P(w,Qt,qt,It,Nt)),(w=Pt[2])&&K.push(new P(w,L,qt,Qt,Nt)),(w=Pt[1])&&K.push(new P(w,Qt,J,It,qt)),(w=Pt[0])&&K.push(new P(w,L,J,Qt,qt))}return this},V.visitAfter=function(Q){var U,w=[],L=[];for(this._root&&w.push(new P(this._root,this._x0,this._y0,this._x1,this._y1));U=w.pop();){var J=U.node;if(J.length){var It,Nt=U.x0,K=U.y0,Pt=U.x1,Qt=U.y1,qt=(Nt+Pt)/2,xe=(K+Qt)/2;(It=J[0])&&w.push(new P(It,Nt,K,qt,xe)),(It=J[1])&&w.push(new P(It,qt,K,Pt,xe)),(It=J[2])&&w.push(new P(It,Nt,xe,qt,Qt)),(It=J[3])&&w.push(new P(It,qt,xe,Pt,Qt))}L.push(U)}for(;U=L.pop();)Q(U.node,U.x0,U.y0,U.x1,U.y1);return this},V.x=function(Q){return arguments.length?(this._x=Q,this):this._x},V.y=function(Q){return arguments.length?(this._y=Q,this):this._y};var tt=function(U){return function(){return U}},ot=function(U){return 1e-6*(U()-.5)},at={value:function(){}};function At(){for(var Q,U=0,w=arguments.length,L={};U<w;++U){if(!(Q=arguments[U]+"")||Q in L||/[\s.]/.test(Q))throw new Error("illegal type: "+Q);L[Q]=[]}return new yt(L)}function yt(Q){this._=Q}function gt(Q,U){return Q.trim().split(/^|\s+/).map(function(w){var L="",J=w.indexOf(".");if(J>=0&&(L=w.slice(J+1),w=w.slice(0,J)),w&&!U.hasOwnProperty(w))throw new Error("unknown type: "+w);return{type:w,name:L}})}function bt(Q,U){for(var w,L=0,J=Q.length;L<J;++L)if((w=Q[L]).name===U)return w.value}function Tt(Q,U,w){for(var L=0,J=Q.length;L<J;++L)if(Q[L].name===U){Q[L]=at,Q=Q.slice(0,L).concat(Q.slice(L+1));break}return w!=null&&Q.push({name:U,value:w}),Q}yt.prototype=At.prototype={constructor:yt,on:function(U,w){var L,J=this._,It=gt(U+"",J),Nt=-1,K=It.length;if(!(arguments.length<2)){if(w!=null&&typeof w!="function")throw new Error("invalid callback: "+w);for(;++Nt<K;)if(L=(U=It[Nt]).type)J[L]=Tt(J[L],U.name,w);else if(w==null)for(L in J)J[L]=Tt(J[L],U.name,null);return this}for(;++Nt<K;)if((L=(U=It[Nt]).type)&&(L=bt(J[L],U.name)))return L},copy:function(){var U={},w=this._;for(var L in w)U[L]=w[L].slice();return new yt(U)},call:function(U,w){if((L=arguments.length-2)>0)for(var L,J,It=new Array(L),Nt=0;Nt<L;++Nt)It[Nt]=arguments[Nt+2];if(!this._.hasOwnProperty(U))throw new Error("unknown type: "+U);for(Nt=0,L=(J=this._[U]).length;Nt<L;++Nt)J[Nt].value.apply(w,It)},apply:function(U,w,L){if(!this._.hasOwnProperty(U))throw new Error("unknown type: "+U);for(var J=this._[U],It=0,Nt=J.length;It<Nt;++It)J[It].value.apply(w,L)}};var Dt=At;function Ut(Q){return(Ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}var jt,Vt,Ht=0,re=0,pe=0,ye=0,we=0,Re=0,He=(typeof performance=="undefined"?"undefined":Ut(performance))==="object"&&performance.now?performance:Date,pn=(typeof window=="undefined"?"undefined":Ut(window))==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(Q){setTimeout(Q,17)};function fn(){return we||(pn(Rn),we=He.now()+Re)}function Rn(){we=0}function Cn(){this._call=this._time=this._next=null}function kn(Q,U,w){var L=new Cn;return L.restart(Q,U,w),L}function Mn(){we=(ye=He.now())+Re,Ht=re=0;try{(function(){fn(),++Ht;for(var Q,U=jt;U;)(Q=we-U._time)>=0&&U._call.call(null,Q),U=U._next;--Ht})()}finally{Ht=0,function(){for(var Q,U,w=jt,L=1/0;w;)w._call?(L>w._time&&(L=w._time),Q=w,w=w._next):(U=w._next,w._next=null,w=Q?Q._next=U:jt=U);Vt=Q,Un(L)}(),we=0}}function Tn(){var Q=He.now(),U=Q-ye;U>1e3&&(Re-=U,ye=Q)}function Un(Q){Ht||(re&&(re=clearTimeout(re)),Q-we>24?(Q<1/0&&(re=setTimeout(Mn,Q-He.now()-Re)),pe&&(pe=clearInterval(pe))):(pe||(ye=He.now(),pe=setInterval(Tn,1e3)),Ht=1,pn(Mn)))}Cn.prototype=kn.prototype={constructor:Cn,restart:function(U,w,L){if(typeof U!="function")throw new TypeError("callback is not a function");L=(L==null?fn():+L)+(w==null?0:+w),this._next||Vt===this||(Vt?Vt._next=this:jt=this,Vt=this),this._call=U,this._time=L,Un()},stop:function(){this._call&&(this._call=null,this._time=1/0,Un())}};function Kn(Q){return Q.x}function tr(Q){return Q.y}var or=Math.PI*(3-Math.sqrt(5)),nr=function(U){var w,L,J=1,It=.001,Nt=1-Math.pow(It,1/300),K=0,Pt=.6,Qt=new Map,qt=kn(Ye),xe=Dt("tick","end"),Ie=(L=1,function(){return(L=(1664525*L+1013904223)%4294967296)/4294967296});function Ye(){Ne(),xe.call("tick",w),J<It&&(qt.stop(),xe.call("end",w))}function Ne(Ge){var qe,yn,Pn=U.length;Ge===void 0&&(Ge=1);for(var En=0;En<Ge;++En)for(J+=(K-J)*Nt,Qt.forEach(function(Ln){Ln(J)}),qe=0;qe<Pn;++qe)(yn=U[qe]).fx==null?yn.x+=yn.vx*=Pt:(yn.x=yn.fx,yn.vx=0),yn.fy==null?yn.y+=yn.vy*=Pt:(yn.y=yn.fy,yn.vy=0);return w}function Xe(){for(var Ge,qe=0,yn=U.length;qe<yn;++qe){if((Ge=U[qe]).index=qe,Ge.fx!=null&&(Ge.x=Ge.fx),Ge.fy!=null&&(Ge.y=Ge.fy),isNaN(Ge.x)||isNaN(Ge.y)){var Pn=10*Math.sqrt(.5+qe),En=qe*or;Ge.x=Pn*Math.cos(En),Ge.y=Pn*Math.sin(En)}(isNaN(Ge.vx)||isNaN(Ge.vy))&&(Ge.vx=Ge.vy=0)}}function Je(Ge){return Ge.initialize&&Ge.initialize(U,Ie),Ge}return U==null&&(U=[]),Xe(),w={tick:Ne,restart:function(){return qt.restart(Ye),w},stop:function(){return qt.stop(),w},nodes:function(qe){return arguments.length?(U=qe,Xe(),Qt.forEach(Je),w):U},alpha:function(qe){return arguments.length?(J=+qe,w):J},alphaMin:function(qe){return arguments.length?(It=+qe,w):It},alphaDecay:function(qe){return arguments.length?(Nt=+qe,w):+Nt},alphaTarget:function(qe){return arguments.length?(K=+qe,w):K},velocityDecay:function(qe){return arguments.length?(Pt=1-qe,w):1-Pt},randomSource:function(qe){return arguments.length?(Ie=qe,Qt.forEach(Je),w):Ie},force:function(qe,yn){return arguments.length>1?(yn==null?Qt.delete(qe):Qt.set(qe,Je(yn)),w):Qt.get(qe)},find:function(qe,yn,Pn){var En,Ln,Zn,Qn,qn,fr=0,br=U.length;for(Pn==null?Pn=1/0:Pn*=Pn,fr=0;fr<br;++fr)(Zn=(En=qe-(Qn=U[fr]).x)*En+(Ln=yn-Qn.y)*Ln)<Pn&&(qn=Qn,Pn=Zn);return qn},on:function(qe,yn){return arguments.length>1?(xe.on(qe,yn),w):xe.on(qe)}}},er=function(){var U,w,L,J,It,Nt=tt(-30),K=1,Pt=1/0,Qt=.81;function qt(Ne){var Xe,Je=U.length,Ge=d(U,Kn,tr).visitAfter(Ie);for(J=Ne,Xe=0;Xe<Je;++Xe)w=U[Xe],Ge.visit(Ye)}function xe(){if(U){var Ne,Xe,Je=U.length;for(It=new Array(Je),Ne=0;Ne<Je;++Ne)Xe=U[Ne],It[Xe.index]=+Nt(Xe,Ne,U)}}function Ie(Ne){var Xe,Je,Ge,qe,yn,Pn=0,En=0;if(Ne.length){for(Ge=qe=yn=0;yn<4;++yn)(Xe=Ne[yn])&&(Je=Math.abs(Xe.value))&&(Pn+=Xe.value,En+=Je,Ge+=Je*Xe.x,qe+=Je*Xe.y);Ne.x=Ge/En,Ne.y=qe/En}else{(Xe=Ne).x=Xe.data.x,Xe.y=Xe.data.y;do Pn+=It[Xe.data.index];while(Xe=Xe.next)}Ne.value=Pn}function Ye(Ne,Xe,Je,Ge){if(!Ne.value)return!0;var qe=Ne.x-w.x,yn=Ne.y-w.y,Pn=Ge-Xe,En=qe*qe+yn*yn;if(Pn*Pn/Qt<En)return En<Pt&&(qe===0&&(En+=(qe=ot(L))*qe),yn===0&&(En+=(yn=ot(L))*yn),En<K&&(En=Math.sqrt(K*En)),w.vx+=qe*Ne.value*J/En,w.vy+=yn*Ne.value*J/En),!0;if(!(Ne.length||En>=Pt)){(Ne.data!==w||Ne.next)&&(qe===0&&(En+=(qe=ot(L))*qe),yn===0&&(En+=(yn=ot(L))*yn),En<K&&(En=Math.sqrt(K*En)));do Ne.data!==w&&(Pn=It[Ne.data.index]*J/En,w.vx+=qe*Pn,w.vy+=yn*Pn);while(Ne=Ne.next)}}return qt.initialize=function(Ne,Xe){U=Ne,L=Xe,xe()},qt.strength=function(Ne){return arguments.length?(Nt=typeof Ne=="function"?Ne:tt(+Ne),xe(),qt):Nt},qt.distanceMin=function(Ne){return arguments.length?(K=Ne*Ne,qt):Math.sqrt(K)},qt.distanceMax=function(Ne){return arguments.length?(Pt=Ne*Ne,qt):Math.sqrt(Pt)},qt.theta=function(Ne){return arguments.length?(Qt=Ne*Ne,qt):Math.sqrt(Qt)},qt};function Sr(Q){return(Sr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function Vr(Q){return Q.index}function ti(Q,U){var w=Q.get(U);if(!w)throw new Error("node not found: "+U);return w}var hi=function(U){var w,L,J,It,Nt,K,Pt=Vr,Qt=function(Ge){return 1/Math.min(It[Ge.source.index],It[Ge.target.index])},qt=tt(30),xe=1;function Ie(Je){for(var Ge=0,qe=U.length;Ge<xe;++Ge)for(var yn,Pn,En,Ln,Zn,Qn,qn,fr=0;fr<qe;++fr)Pn=(yn=U[fr]).source,Ln=(En=yn.target).x+En.vx-Pn.x-Pn.vx||ot(K),Zn=En.y+En.vy-Pn.y-Pn.vy||ot(K),Ln*=Qn=((Qn=Math.sqrt(Ln*Ln+Zn*Zn))-L[fr])/Qn*Je*w[fr],Zn*=Qn,En.vx-=Ln*(qn=Nt[fr]),En.vy-=Zn*qn,Pn.vx+=Ln*(qn=1-qn),Pn.vy+=Zn*qn}function Ye(){if(J){var Je,Ge,qe=J.length,yn=U.length,Pn=new Map(J.map(function(En,Ln){return[Pt(En,Ln,J),En]}));for(Je=0,It=new Array(qe);Je<yn;++Je)(Ge=U[Je]).index=Je,Sr(Ge.source)!=="object"&&(Ge.source=ti(Pn,Ge.source)),Sr(Ge.target)!=="object"&&(Ge.target=ti(Pn,Ge.target)),It[Ge.source.index]=(It[Ge.source.index]||0)+1,It[Ge.target.index]=(It[Ge.target.index]||0)+1;for(Je=0,Nt=new Array(yn);Je<yn;++Je)Ge=U[Je],Nt[Je]=It[Ge.source.index]/(It[Ge.source.index]+It[Ge.target.index]);w=new Array(yn),Ne(),L=new Array(yn),Xe()}}function Ne(){if(J)for(var Je=0,Ge=U.length;Je<Ge;++Je)w[Je]=+Qt(U[Je],Je,U)}function Xe(){if(J)for(var Je=0,Ge=U.length;Je<Ge;++Je)L[Je]=+qt(U[Je],Je,U)}return U==null&&(U=[]),Ie.initialize=function(Je,Ge){J=Je,K=Ge,Ye()},Ie.links=function(Je){return arguments.length?(U=Je,Ye(),Ie):U},Ie.id=function(Je){return arguments.length?(Pt=Je,Ie):Pt},Ie.iterations=function(Je){return arguments.length?(xe=+Je,Ie):xe},Ie.strength=function(Je){return arguments.length?(Qt=typeof Je=="function"?Je:tt(+Je),Ne(),Ie):Qt},Ie.distance=function(Je){return arguments.length?(qt=typeof Je=="function"?Je:tt(+Je),Xe(),Ie):qt},Ie};function Fi(Q){return Q.x+Q.vx}function to(Q){return Q.y+Q.vy}var si=function(U){var w,L,J,It=1,Nt=1;function K(){for(var qt,xe,Ie,Ye,Ne,Xe,Je,Ge=w.length,qe=0;qe<Nt;++qe)for(xe=d(w,Fi,to).visitAfter(Pt),qt=0;qt<Ge;++qt)Ie=w[qt],Xe=L[Ie.index],Je=Xe*Xe,Ye=Ie.x+Ie.vx,Ne=Ie.y+Ie.vy,xe.visit(yn);function yn(Pn,En,Ln,Zn,Qn){var qn=Pn.data,fr=Pn.r,br=Xe+fr;if(!qn)return En>Ye+br||Zn<Ye-br||Ln>Ne+br||Qn<Ne-br;if(qn.index>Ie.index){var gr=Ye-qn.x-qn.vx,hr=Ne-qn.y-qn.vy,Cr=gr*gr+hr*hr;Cr<br*br&&(gr===0&&(Cr+=(gr=ot(J))*gr),hr===0&&(Cr+=(hr=ot(J))*hr),Cr=(br-(Cr=Math.sqrt(Cr)))/Cr*It,Ie.vx+=(gr*=Cr)*(br=(fr*=fr)/(Je+fr)),Ie.vy+=(hr*=Cr)*br,qn.vx-=gr*(br=1-br),qn.vy-=hr*br)}}}function Pt(qt){if(qt.data)return qt.r=L[qt.data.index];for(var xe=qt.r=0;xe<4;++xe)qt[xe]&&qt[xe].r>qt.r&&(qt.r=qt[xe].r)}function Qt(){if(w){var qt,xe,Ie=w.length;for(L=new Array(Ie),qt=0;qt<Ie;++qt)xe=w[qt],L[xe.index]=+U(xe,qt,w)}}return typeof U!="function"&&(U=tt(U==null?1:+U)),K.initialize=function(qt,xe){w=qt,J=xe,Qt()},K.iterations=function(qt){return arguments.length?(Nt=+qt,K):Nt},K.strength=function(qt){return arguments.length?(It=+qt,K):It},K.radius=function(qt){return arguments.length?(U=typeof qt=="function"?qt:tt(+qt),Qt(),K):U},K};function Ti(Q,U){return function(w){if(Array.isArray(w))return w}(Q)||function(w,L){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(w)))){var J=[],It=!0,Nt=!1,K=void 0;try{for(var Pt,Qt=w[Symbol.iterator]();!(It=(Pt=Qt.next()).done)&&(J.push(Pt.value),!L||J.length!==L);It=!0);}catch(qt){Nt=!0,K=qt}finally{try{It||Qt.return==null||Qt.return()}finally{if(Nt)throw K}}return J}}(Q,U)||function(w,L){if(!!w){if(typeof w=="string")return _i(w,L);var J=Object.prototype.toString.call(w).slice(8,-1);if(J==="Object"&&w.constructor&&(J=w.constructor.name),J==="Map"||J==="Set")return Array.from(w);if(J==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(J))return _i(w,L)}}(Q,U)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function _i(Q,U){(U==null||U>Q.length)&&(U=Q.length);for(var w=0,L=new Array(U);w<U;w++)L[w]=Q[w];return L}function Li(){function Q(Ln){return function(){return Ln}}var U,w=function(Zn){return Zn.cluster},L=Q(1),J=Q(-1),It=Q(100),Nt=Q(.1),K=[0,0],Pt=[],Qt={},qt=[],xe=100,Ie=100,Ye={none:{x:0,y:0}},Ne=[],Xe="force",Je=!0,Ge=.1;function qe(Ln){if(!Je)return qe;U.tick(),Pn();for(var Zn,Qn=0,qn=Pt.length,fr=Ln*Ge;Qn<qn;++Qn)(Zn=Pt[Qn]).vx+=(Ye[w(Zn)].x-Zn.x)*fr,Zn.vy+=(Ye[w(Zn)].y-Zn.y)*fr}function yn(){Pt&&function(){if(!(!Pt||!Pt.length)){if(w(Pt[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Ln=(Qn=[],qn=[],fr={},br=[],Zn=function(gr){var hr={};return gr.forEach(function(Cr){var dr=w(Cr);hr[dr]||(hr[dr]={count:0,sumforceNodeSize:0})}),gr.forEach(function(Cr){var dr=w(Cr),Jr=L(Cr),qr=hr[dr];qr.count=qr.count+1,qr.sumforceNodeSize=qr.sumforceNodeSize+Math.PI*(Jr*Jr)*1.3,hr[dr]=qr}),hr}(Pt),br=function(gr){var hr={},Cr=[];return gr.forEach(function(dr){var Jr=function(wi){var Tr=w(Qt[wi.source]),pi=w(Qt[wi.target]);return Tr<=pi?"".concat(Tr,"~").concat(pi):"".concat(pi,"~").concat(Tr)}(dr),qr=0;hr[Jr]!==void 0&&(qr=hr[Jr]),qr+=1,hr[Jr]=qr}),Object.entries(hr).forEach(function(dr){var Jr=Ti(dr,2),qr=Jr[0],wi=Jr[1],Tr=qr.split("~")[0],pi=qr.split("~")[1];Tr!==void 0&&pi!==void 0&&Cr.push({source:Tr,target:pi,count:wi})}),Cr}(qt),Object.keys(Zn).forEach(function(gr,hr){var Cr=Zn[gr];Qn.push({id:gr,size:Cr.count,r:Math.sqrt(Cr.sumforceNodeSize/Math.PI)}),fr[gr]=hr}),br.forEach(function(gr){var hr=fr[gr.source],Cr=fr[gr.target];hr!==void 0&&Cr!==void 0&&qn.push({source:hr,target:Cr,count:gr.count})}),{nodes:Qn,links:qn}),Zn,Qn,qn,fr,br;U=nr(Ln.nodes).force("x",function(gr){var hr,Cr,dr,Jr=tt(.1);function qr(Tr){for(var pi,Ei=0,ji=hr.length;Ei<ji;++Ei)(pi=hr[Ei]).vx+=(dr[Ei]-pi.x)*Cr[Ei]*Tr}function wi(){if(hr){var Tr,pi=hr.length;for(Cr=new Array(pi),dr=new Array(pi),Tr=0;Tr<pi;++Tr)Cr[Tr]=isNaN(dr[Tr]=+gr(hr[Tr],Tr,hr))?0:+Jr(hr[Tr],Tr,hr)}}return typeof gr!="function"&&(gr=tt(gr==null?0:+gr)),qr.initialize=function(Tr){hr=Tr,wi()},qr.strength=function(Tr){return arguments.length?(Jr=typeof Tr=="function"?Tr:tt(+Tr),wi(),qr):Jr},qr.x=function(Tr){return arguments.length?(gr=typeof Tr=="function"?Tr:tt(+Tr),wi(),qr):gr},qr}(xe).strength(.1)).force("y",function(gr){var hr,Cr,dr,Jr=tt(.1);function qr(Tr){for(var pi,Ei=0,ji=hr.length;Ei<ji;++Ei)(pi=hr[Ei]).vy+=(dr[Ei]-pi.y)*Cr[Ei]*Tr}function wi(){if(hr){var Tr,pi=hr.length;for(Cr=new Array(pi),dr=new Array(pi),Tr=0;Tr<pi;++Tr)Cr[Tr]=isNaN(dr[Tr]=+gr(hr[Tr],Tr,hr))?0:+Jr(hr[Tr],Tr,hr)}}return typeof gr!="function"&&(gr=tt(gr==null?0:+gr)),qr.initialize=function(Tr){hr=Tr,wi()},qr.strength=function(Tr){return arguments.length?(Jr=typeof Tr=="function"?Tr:tt(+Tr),wi(),qr):Jr},qr.y=function(Tr){return arguments.length?(gr=typeof Tr=="function"?Tr:tt(+Tr),wi(),qr):gr},qr}(Ie).strength(.1)).force("collide",si(function(gr){return gr.r}).iterations(4)).force("charge",er().strength(J)).force("links",hi(Ln.nodes.length?Ln.links:[]).distance(It).strength(Nt)),Ne=U.nodes(),Pn()}}()}function Pn(){return Ye={none:{x:0,y:0}},Ne.forEach(function(Ln){Ye[Ln.id]={x:Ln.x-K[0],y:Ln.y-K[1]}}),Ye}function En(Ln){Qt={},Ln.forEach(function(Zn){Qt[Zn.id]=Zn})}return qe.initialize=function(Ln){Pt=Ln,yn()},qe.template=function(Ln){return arguments.length?(Xe=Ln,yn(),qe):Xe},qe.groupBy=function(Ln){return arguments.length?typeof Ln=="string"?(w=function(Qn){return Qn[Ln]},qe):(w=Ln,qe):w},qe.enableGrouping=function(Ln){return arguments.length?(Je=Ln,qe):Je},qe.strength=function(Ln){return arguments.length?(Ge=Ln,qe):Ge},qe.centerX=function(Ln){return arguments.length?(xe=Ln,qe):xe},qe.centerY=function(Ln){return arguments.length?(Ie=Ln,qe):Ie},qe.nodes=function(Ln){return arguments.length?(En(Ln||[]),Pt=Ln||[],qe):Pt},qe.links=function(Ln){return arguments.length?(qt=Ln||[],yn(),qe):qt},qe.forceNodeSize=function(Ln){return arguments.length?(L=typeof Ln=="function"?Ln:Q(+Ln),yn(),qe):L},qe.nodeSize=qe.forceNodeSize,qe.forceCharge=function(Ln){return arguments.length?(J=typeof Ln=="function"?Ln:Q(+Ln),yn(),qe):J},qe.forceLinkDistance=function(Ln){return arguments.length?(It=typeof Ln=="function"?Ln:Q(+Ln),yn(),qe):It},qe.forceLinkStrength=function(Ln){return arguments.length?(Nt=typeof Ln=="function"?Ln:Q(+Ln),yn(),qe):Nt},qe.offset=function(Ln){return arguments.length?(K=Ln,qe):K},qe.getFocis=Pn,qe}var Vi="LAYOUT_RUN",ro="LAYOUT_END",jr="LAYOUT_ERROR",Ji="LAYOUT_TICK",pr="GPU_LAYOUT_RUN",Yr="GPU_LAYOUT_END";function Br(Q){return(Br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function Nr(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function Xr(Q,U){return(Xr=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function Kr(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=fi(Q);if(U){var J=fi(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return ni(this,w)}}function ni(Q,U){return!U||Br(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function fi(Q){return(fi=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}var $r=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&Xr(Nt,K)})(It,Q);var U,w,L,J=Kr(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).center=[0,0],K.nodeStrength=null,K.edgeStrength=null,K.preventOverlap=!1,K.clusterNodeStrength=null,K.clusterEdgeStrength=null,K.clusterEdgeDistance=null,K.clusterNodeSize=null,K.clusterFociStrength=null,K.linkDistance=50,K.alphaDecay=.028,K.alphaMin=.001,K.alpha=.3,K.collideStrength=1,K.workerEnabled=!1,K.tick=function(){},K.onLayoutEnd=function(){},K.ticking=void 0,Nt&&K.updateCfg(Nt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}}},{key:"init",value:function(K){this.nodes=K.nodes||[];var Pt=K.edges||[];this.edges=Pt.map(function(Qt){var qt={},xe=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(Qt).forEach(function(Ie){xe.indexOf(Ie)>-1||(qt[Ie]=Qt[Ie])}),qt}),this.ticking=!1}},{key:"execute",value:function(K){var Pt=this,Qt=Pt.nodes,qt=Pt.edges;if(!Pt.ticking){var xe=Pt.forceSimulation,Ie=Pt.alphaMin,Ye=Pt.alphaDecay,Ne=Pt.alpha;if(xe){if(K){if(Pt.clustering&&Pt.clusterForce&&(Pt.clusterForce.nodes(Qt),Pt.clusterForce.links(qt)),xe.nodes(Qt),qt&&Pt.edgeForce)Pt.edgeForce.links(qt);else if(qt&&!Pt.edgeForce){var Xe=hi().id(function(En){return En.id}).links(qt);Pt.edgeStrength&&Xe.strength(Pt.edgeStrength),Pt.linkDistance&&Xe.distance(Pt.linkDistance),Pt.edgeForce=Xe,xe.force("link",Xe)}}Pt.preventOverlap&&Pt.overlapProcess(xe),xe.alpha(Ne).restart(),this.ticking=!0}else try{var Je=er();if(Pt.nodeStrength&&Je.strength(Pt.nodeStrength),xe=nr().nodes(Qt),Pt.clustering){var Ge=Li();Ge.centerX(Pt.center[0]).centerY(Pt.center[1]).template("force").strength(Pt.clusterFociStrength),qt&&Ge.links(qt),Qt&&Ge.nodes(Qt),Ge.forceLinkDistance(Pt.clusterEdgeDistance).forceLinkStrength(Pt.clusterEdgeStrength).forceCharge(Pt.clusterNodeStrength).forceNodeSize(Pt.clusterNodeSize),Pt.clusterForce=Ge,xe.force("group",Ge)}if(xe.force("center",function(En,Ln){var Zn,Qn=1;function qn(){var fr,br,gr=Zn.length,hr=0,Cr=0;for(fr=0;fr<gr;++fr)hr+=(br=Zn[fr]).x,Cr+=br.y;for(hr=(hr/gr-En)*Qn,Cr=(Cr/gr-Ln)*Qn,fr=0;fr<gr;++fr)(br=Zn[fr]).x-=hr,br.y-=Cr}return En==null&&(En=0),Ln==null&&(Ln=0),qn.initialize=function(fr){Zn=fr},qn.x=function(fr){return arguments.length?(En=+fr,qn):En},qn.y=function(fr){return arguments.length?(Ln=+fr,qn):Ln},qn.strength=function(fr){return arguments.length?(Qn=+fr,qn):Qn},qn}(Pt.center[0],Pt.center[1])).force("charge",Je).alpha(Ne).alphaDecay(Ye).alphaMin(Ie),Pt.preventOverlap&&Pt.overlapProcess(xe),qt){var qe=hi().id(function(En){return En.id}).links(qt);Pt.edgeStrength&&qe.strength(Pt.edgeStrength),Pt.linkDistance&&qe.distance(Pt.linkDistance),Pt.edgeForce=qe,xe.force("link",qe)}if(Pt.workerEnabled&&!ci()&&(Pt.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),Pt.workerEnabled){xe.stop();for(var yn=function(En){var Ln=En.alphaMin(),Zn=En.alphaTarget(),Qn=En.alpha(),qn=Math.log((Ln-Zn)/(Qn-Zn))/Math.log(1-En.alphaDecay());return Math.ceil(qn)}(xe),Pn=1;Pn<=yn;Pn++)xe.tick(),postMessage({nodes:Qt,currentTick:Pn,totalTicks:yn,type:Ji},void 0);Pt.ticking=!1}else xe.on("tick",function(){Pt.tick()}).on("end",function(){Pt.ticking=!1,Pt.onLayoutEnd&&Pt.onLayoutEnd()}),Pt.ticking=!0;Pt.forceSimulation=xe,Pt.ticking=!0}catch(En){Pt.ticking=!1,console.warn(En)}}}},{key:"overlapProcess",value:function(K){var Pt,Qt,qt=this.nodeSize,xe=this.nodeSpacing,Ie=this.collideStrength;if(Qt=A(xe)?function(){return xe}:T(xe)?xe:function(){return 0},qt)if(T(qt))Pt=function(Je){return qt(Je)+Qt(Je)};else if(l(qt)){var Ye=(qt[0]>qt[1]?qt[0]:qt[1])/2;Pt=function(Je){return Ye+Qt(Je)}}else if(A(qt)){var Ne=qt/2;Pt=function(Je){return Ne+Qt(Je)}}else Pt=function(){return 10};else Pt=function(Je){return Je.size?l(Je.size)?(Je.size[0]>Je.size[1]?Je.size[0]:Je.size[1])/2+Qt(Je):Je.size/2+Qt(Je):10+Qt(Je)};K.force("collisionForce",si(Pt).strength(Ie))}},{key:"updateCfg",value:function(K){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.forceSimulation=null,Object.assign(this,K)}},{key:"destroy",value:function(){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.nodes=null,this.edges=null,this.destroyed=!0}}])&&Nr(U.prototype,w),L&&Nr(U,L),It}(m);function ci(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function Qr(Q){return(Qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function gi(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function Oi(Q,U){return(Oi=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function bi(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Qi(Q);if(U){var J=Qi(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return zi(this,w)}}function zi(Q,U){return!U||Qr(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function Qi(Q){return(Qi=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}function io(Q,U,w,L){Q.forEach(function(J,It){Q[It].children=[],Q[It].parent=[]}),L?U.forEach(function(J){var It=0;J.source&&(It=w[J.source]);var Nt=0;J.target&&(Nt=w[J.target]);var K=Q[It].children,Pt=Q[Nt].parent;K.push(Q[Nt].id),Pt.push(Q[It].id)}):U.forEach(function(J){var It=0;J.source&&(It=w[J.source]);var Nt=0;J.target&&(Nt=w[J.target]);var K=Q[It].children,Pt=Q[Nt].children;K.push(Q[Nt].id),Pt.push(Q[It].id)})}function Wi(Q,U,w){for(var L=w.length,J=0;J<L;J++)if(Q.id===w[J].source&&U.id===w[J].target||U.id===w[J].source&&Q.id===w[J].target)return!0;return!1}function Zi(Q,U){var w=Q.degree,L=U.degree;return w<L?-1:w>L?1:0}var Pi=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&Oi(Nt,K)})(It,Q);var U,w,L,J=bi(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).radius=null,K.startRadius=null,K.endRadius=null,K.startAngle=0,K.endAngle=2*Math.PI,K.clockwise=!0,K.divisions=1,K.ordering=null,K.angleRatio=1,K.nodes=[],K.edges=[],K.nodeMap={},K.degrees=[],K.width=300,K.height=300,K.updateCfg(Nt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}},{key:"execute",value:function(){var K=this.nodes,Pt=this.edges,Qt=K.length;if(Qt!==0){this.width||typeof window=="undefined"||(this.width=window.innerWidth),this.height||typeof window=="undefined"||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var qt=this.center;if(Qt===1)return K[0].x=qt[0],K[0].y=qt[1],void(this.onLayoutEnd&&this.onLayoutEnd());var xe=this.radius,Ie=this.startRadius,Ye=this.endRadius,Ne=this.divisions,Xe=this.startAngle,Je=this.endAngle,Ge=(Je-Xe)/Qt,qe={};K.forEach(function(gr,hr){qe[gr.id]=hr}),this.nodeMap=qe;var yn=y(K.length,qe,Pt);this.degrees=yn,xe||Ie||Ye?!Ie&&Ye?Ie=Ye:Ie&&!Ye&&(Ye=Ie):xe=this.height>this.width?this.width/2:this.height/2;var Pn=Ge*this.angleRatio,En=this.ordering,Ln=[];Ln=En==="topology"?this.topologyOrdering():En==="topology-directed"?this.topologyOrdering(!0):En==="degree"?this.degreeOrdering():K;for(var Zn=this.clockwise,Qn=Math.ceil(Qt/Ne),qn=0;qn<Qt;++qn){var fr=xe;fr||Ie===null||Ye===null||(fr=Ie+qn*(Ye-Ie)/(Qt-1)),fr||(fr=10+100*qn/(Qt-1));var br=Xe+qn%Qn*Pn+2*Math.PI/Ne*Math.floor(qn/Qn);Zn||(br=Je-qn%Qn*Pn-2*Math.PI/Ne*Math.floor(qn/Qn)),Ln[qn].x=qt[0]+Math.cos(br)*fr,Ln[qn].y=qt[1]+Math.sin(br)*fr,Ln[qn].weight=yn[qn]}return this.onLayoutEnd&&this.onLayoutEnd(),{nodes:Ln,edges:this.edges}}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"topologyOrdering",value:function(){var K=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Pt=this,Qt=Pt.degrees,qt=Pt.edges,xe=Pt.nodes,Ie=O(xe),Ye=Pt.nodeMap,Ne=[Ie[0]],Xe=[xe[0]],Je=[],Ge=xe.length;Je[0]=!0,io(Ie,qt,Ye,K);var qe=0;return Ie.forEach(function(yn,Pn){if(Pn!==0)if(Pn!==Ge-1&&Qt[Pn]===Qt[Pn+1]&&!Wi(Ne[qe],yn,qt)||Je[Pn]){for(var En=Ne[qe].children,Ln=!1,Zn=0;Zn<En.length;Zn++){var Qn=Ye[En[Zn]];if(Qt[Qn]===Qt[Pn]&&!Je[Qn]){Ne.push(Ie[Qn]),Xe.push(xe[Ye[Ie[Qn].id]]),Je[Qn]=!0,Ln=!0;break}}for(var qn=0;!Ln&&(Je[qn]||(Ne.push(Ie[qn]),Xe.push(xe[Ye[Ie[qn].id]]),Je[qn]=!0,Ln=!0),++qn!==Ge););}else Ne.push(yn),Xe.push(xe[Ye[yn.id]]),Je[Pn]=!0,qe++}),Xe}},{key:"degreeOrdering",value:function(){var K=this.nodes,Pt=[],Qt=this.degrees;return K.forEach(function(qt,xe){qt.degree=Qt[xe],Pt.push(qt)}),Pt.sort(Zi),Pt}},{key:"getType",value:function(){return"circular"}}])&&gi(U.prototype,w),L&&gi(U,L),It}(m),no=e(153),Mo=e.n(no);function ao(Q){return(ao=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function uo(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function xo(Q,U){return(xo=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function oe(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=te(Q);if(U){var J=te(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Kt(this,w)}}function Kt(Q,U){return!U||ao(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function te(Q){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}var Oe=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&xo(Nt,K)})(It,Q);var U,w,L,J=oe(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).rankdir="TB",K.nodesep=50,K.ranksep=50,K.controlPoints=!1,K.sortByCombo=!1,K.nodes=[],K.edges=[],K.onLayoutEnd=function(){},K.updateCfg(Nt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}},{key:"execute",value:function(){var K=this,Pt=K.nodes,Qt=K.nodeSize,qt=K.rankdir;if(Pt){var xe,Ie=K.edges||[],Ye=new Mo.a.graphlib.Graph;xe=Qt?l(Qt)?function(){return Qt}:function(){return[Qt,Qt]}:function(Ge){return Ge.size?l(Ge.size)?Ge.size:[Ge.size,Ge.size]:[40,40]};var Ne,Xe=Qe(K.nodesepFunc,K.nodesep,50),Je=Qe(K.ranksepFunc,K.ranksep,50);return qt!=="LR"&&qt!=="RL"||(Xe=Qe(K.ranksepFunc,K.ranksep,50),Je=Qe(K.nodesepFunc,K.nodesep,50)),Ye.setDefaultEdgeLabel(function(){return{}}),Ye.setGraph(K),Pt.forEach(function(Ge){var qe=xe(Ge),yn=Je(Ge),Pn=Xe(Ge),En=qe[0]+2*Pn,Ln=qe[1]+2*yn;Ye.setNode(Ge.id,{width:En,height:Ln})}),Ie.forEach(function(Ge){Ye.setEdge(Ge.source,Ge.target,{weight:Ge.weight||1})}),Mo.a.layout(Ye),Ye.nodes().forEach(function(Ge){Ne=Ye.node(Ge);var qe=Pt.findIndex(function(yn){return yn.id===Ge});Pt[qe].x=Ne.x,Pt[qe].y=Ne.y}),Ye.edges().forEach(function(Ge){Ne=Ye.edge(Ge);var qe=Ie.findIndex(function(yn){return yn.source===Ge.v&&yn.target===Ge.w});K.controlPoints&&Ie[qe].type!=="loop"&&(Ie[qe].controlPoints=Ne.points.slice(1,Ne.points.length-1))}),K.sortByCombo&&K.sortLevel("comboId"),K.onLayoutEnd&&K.onLayoutEnd(),{nodes:Pt,edges:Ie}}}},{key:"sortLevel",value:function(K){var Pt=this,Qt=Pt.nodes,qt={};Qt.forEach(function(xe){qt[xe.y]||(qt[xe.y]={y:xe.y,nodes:[]}),qt[xe.y].nodes.push(xe)}),Object.keys(qt).forEach(function(xe){var Ie=qt[xe].nodes,Ye=Ie.length,Ne={};if(Ie.forEach(function(qe){var yn=qe.comboId;Ne[yn]||(Ne[yn]={x:0,y:0,count:0}),Ne[yn].x+=qe.x,Ne[yn].y+=qe.y,Ne[yn].count++}),Object.keys(Ne).forEach(function(qe){Ne[qe].x/=Ne[qe].count,Ne[qe].y/=Ne[qe].count}),Ye!==1){var Xe=Ie.sort(function(qe,yn){return qe.x-yn.x}),Je=Xe[0].x,Ge=(Xe[Ye-1].x-Je)/(Ye-1);Ie.sort(function(qe,yn){var Pn=qe[K]||"undefined",En=yn[K]||"undefined";return Pn<En?-1:Pn>En?1:0}).forEach(function(qe,yn){qe.x=Je+yn*Ge})}else Pt.onLayoutEnd&&Pt.onLayoutEnd()})}},{key:"getType",value:function(){return"dagre"}}])&&uo(U.prototype,w),L&&uo(U,L),It}(m);function Qe(Q,U,w){return Q||(A(U)?function(){return U}:function(){return w})}var On=Object.prototype.toString;function Vn(Q){return On.call(Q).endsWith("Array]")}var Xn=function(U){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Vn(U))throw new TypeError("input must be an array");if(U.length===0)throw new TypeError("input must not be empty");var L=w.fromIndex,J=L===void 0?0:L,It=w.toIndex,Nt=It===void 0?U.length:It;if(J<0||J>=U.length||!Number.isInteger(J))throw new Error("fromIndex must be a positive integer smaller than length");if(Nt<=J||Nt>U.length||!Number.isInteger(Nt))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var K=U[J],Pt=J+1;Pt<Nt;Pt++)U[Pt]>K&&(K=U[Pt]);return K},$e=function(U){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Vn(U))throw new TypeError("input must be an array");if(U.length===0)throw new TypeError("input must not be empty");var L=w.fromIndex,J=L===void 0?0:L,It=w.toIndex,Nt=It===void 0?U.length:It;if(J<0||J>=U.length||!Number.isInteger(J))throw new Error("fromIndex must be a positive integer smaller than length");if(Nt<=J||Nt>U.length||!Number.isInteger(Nt))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var K=U[J],Pt=J+1;Pt<Nt;Pt++)U[Pt]<K&&(K=U[Pt]);return K},rn=function(U){var w,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Vn(U))throw new TypeError("input must be an array");if(U.length===0)throw new TypeError("input must not be empty");if(L.output!==void 0){if(!Vn(L.output))throw new TypeError("output option must be an array if specified");w=L.output}else w=new Array(U.length);var J=$e(U),It=Xn(U);if(J===It)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var Nt=L.min,K=Nt===void 0?L.autoMinMax?J:0:Nt,Pt=L.max,Qt=Pt===void 0?L.autoMinMax?It:1:Pt;if(K>=Qt)throw new RangeError("min option must be smaller than max option");for(var qt=(Qt-K)/(It-J),xe=0;xe<U.length;xe++)w[xe]=(U[xe]-J)*qt+K;return w},on=" ".repeat(2),$n=" ".repeat(4);function vr(Q){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},w=U.maxRows,L=w===void 0?15:w,J=U.maxColumns,It=J===void 0?10:J,Nt=U.maxNumSize,K=Nt===void 0?8:Nt;return"".concat(Q.constructor.name,` {
`).concat(on,`[
`).concat($n).concat(ar(Q,L,It,K),`
`).concat(on,`]
`).concat(on,"rows: ").concat(Q.rows,`
`).concat(on,"columns: ").concat(Q.columns,`
}`)}function ar(Q,U,w,L){for(var J=Q.rows,It=Q.columns,Nt=Math.min(J,U),K=Math.min(It,w),Pt=[],Qt=0;Qt<Nt;Qt++){for(var qt=[],xe=0;xe<K;xe++)qt.push(rr(Q.get(Qt,xe),L));Pt.push("".concat(qt.join(" ")))}return K!==It&&(Pt[Pt.length-1]+=" ... ".concat(It-w," more columns")),Nt!==J&&Pt.push("... ".concat(J-U," more rows")),Pt.join(`
`.concat($n))}function rr(Q,U){var w=String(Q);if(w.length<=U)return w.padEnd(U," ");var L=Q.toPrecision(U-2);if(L.length<=U)return L;var J=Q.toExponential(U-2),It=J.indexOf("e"),Nt=J.slice(It);return J.slice(0,U-Nt.length)+Nt}function Fr(Q){return(Fr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function Ar(Q,U,w){var L=w?Q.rows:Q.rows-1;if(U<0||U>L)throw new RangeError("Row index out of range")}function wr(Q,U,w){var L=w?Q.columns:Q.columns-1;if(U<0||U>L)throw new RangeError("Column index out of range")}function xr(Q,U){if(U.to1DArray&&(U=U.to1DArray()),U.length!==Q.columns)throw new RangeError("vector size must be the same as the number of columns");return U}function Er(Q,U){if(U.to1DArray&&(U=U.to1DArray()),U.length!==Q.rows)throw new RangeError("vector size must be the same as the number of rows");return U}function Ir(Q,U){if(Fr(U)!=="object")throw new TypeError("unexpected type for row indices");if(U.some(function(w){return w<0||w>=Q.rows}))throw new RangeError("row indices are out of range");return Array.isArray(U)||(U=Array.from(U)),U}function Lr(Q,U){if(Fr(U)!=="object")throw new TypeError("unexpected type for column indices");if(U.some(function(w){return w<0||w>=Q.columns}))throw new RangeError("column indices are out of range");return Array.isArray(U)||(U=Array.from(U)),U}function Pr(Q,U,w,L,J){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(ri("startRow",U),ri("endRow",w),ri("startColumn",L),ri("endColumn",J),U>w||L>J||U<0||U>=Q.rows||w<0||w>=Q.rows||L<0||L>=Q.columns||J<0||J>=Q.columns)throw new RangeError("Submatrix indices are out of range")}function Dr(Q){for(var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,w=[],L=0;L<Q;L++)w.push(U);return w}function ri(Q,U){if(typeof U!="number")throw new TypeError("".concat(Q," must be a number"))}function vi(Q){if(Q.isEmpty())throw new Error("Empty matrix has no elements to index")}function ii(Q,U,w){for(var L=Q.rows,J=Q.columns,It=[],Nt=0;Nt<L;Nt++){for(var K=0,Pt=0,Qt=0,qt=0;qt<J;qt++)K+=Qt=Q.get(Nt,qt)-w[Nt],Pt+=Qt*Qt;U?It.push((Pt-K*K/J)/(J-1)):It.push((Pt-K*K/J)/J)}return It}function Si(Q,U,w){for(var L=Q.rows,J=Q.columns,It=[],Nt=0;Nt<J;Nt++){for(var K=0,Pt=0,Qt=0,qt=0;qt<L;qt++)K+=Qt=Q.get(qt,Nt)-w[Nt],Pt+=Qt*Qt;U?It.push((Pt-K*K/L)/(L-1)):It.push((Pt-K*K/L)/L)}return It}function Ui(Q,U,w){for(var L=Q.rows,J=Q.columns,It=L*J,Nt=0,K=0,Pt=0,Qt=0;Qt<L;Qt++)for(var qt=0;qt<J;qt++)Nt+=Pt=Q.get(Qt,qt)-w,K+=Pt*Pt;return U?(K-Nt*Nt/It)/(It-1):(K-Nt*Nt/It)/It}function Yi(Q,U){for(var w=0;w<Q.rows;w++)for(var L=0;L<Q.columns;L++)Q.set(w,L,Q.get(w,L)-U[w])}function Bi(Q,U){for(var w=0;w<Q.rows;w++)for(var L=0;L<Q.columns;L++)Q.set(w,L,Q.get(w,L)-U[L])}function Di(Q,U){for(var w=0;w<Q.rows;w++)for(var L=0;L<Q.columns;L++)Q.set(w,L,Q.get(w,L)-U)}function ve(Q){for(var U=[],w=0;w<Q.rows;w++){for(var L=0,J=0;J<Q.columns;J++)L+=Math.pow(Q.get(w,J),2)/(Q.columns-1);U.push(Math.sqrt(L))}return U}function G(Q,U){for(var w=0;w<Q.rows;w++)for(var L=0;L<Q.columns;L++)Q.set(w,L,Q.get(w,L)/U[w])}function B(Q){for(var U=[],w=0;w<Q.columns;w++){for(var L=0,J=0;J<Q.rows;J++)L+=Math.pow(Q.get(J,w),2)/(Q.rows-1);U.push(Math.sqrt(L))}return U}function $(Q,U){for(var w=0;w<Q.rows;w++)for(var L=0;L<Q.columns;L++)Q.set(w,L,Q.get(w,L)/U[L])}function lt(Q){for(var U=Q.size-1,w=0,L=0;L<Q.columns;L++)for(var J=0;J<Q.rows;J++)w+=Math.pow(Q.get(J,L),2)/U;return Math.sqrt(w)}function Ft(Q,U){for(var w=0;w<Q.rows;w++)for(var L=0;L<Q.columns;L++)Q.set(w,L,Q.get(w,L)/U)}function Jt(Q,U){return(Jt=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function ie(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Ce(Q);if(U){var J=Ce(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return se(this,w)}}function se(Q,U){return!U||Ee(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function Ce(Q){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}function Ee(Q){return(Ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function un(Q,U){if(!(Q instanceof U))throw new TypeError("Cannot call a class as a function")}function xn(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function zt(Q,U,w){return U&&xn(Q.prototype,U),w&&xn(Q,w),Q}var Yt=function(){function Q(){un(this,Q)}return zt(Q,[{key:"apply",value:function(w){if(typeof w!="function")throw new TypeError("callback must be a function");for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)w.call(this,L,J);return this}},{key:"to1DArray",value:function(){for(var w=[],L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)w.push(this.get(L,J));return w}},{key:"to2DArray",value:function(){for(var w=[],L=0;L<this.rows;L++){w.push([]);for(var J=0;J<this.columns;J++)w[L].push(this.get(L,J))}return w}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var w=0;w<this.rows;w++)for(var L=0;L<=w;L++)if(this.get(w,L)!==this.get(L,w))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var w=0,L=0,J=-1,It=!0,Nt=!1;w<this.rows&&It;){for(L=0,Nt=!1;L<this.columns&&Nt===!1;)this.get(w,L)===0?L++:this.get(w,L)===1&&L>J?(Nt=!0,J=L):(It=!1,Nt=!0);w++}return It}},{key:"isReducedEchelonForm",value:function(){for(var w=0,L=0,J=-1,It=!0,Nt=!1;w<this.rows&&It;){for(L=0,Nt=!1;L<this.columns&&Nt===!1;)this.get(w,L)===0?L++:this.get(w,L)===1&&L>J?(Nt=!0,J=L):(It=!1,Nt=!0);for(var K=L+1;K<this.rows;K++)this.get(w,K)!==0&&(It=!1);w++}return It}},{key:"echelonForm",value:function(){for(var w=this.clone(),L=0,J=0;L<w.rows&&J<w.columns;){for(var It=L,Nt=L;Nt<w.rows;Nt++)w.get(Nt,J)>w.get(It,J)&&(It=Nt);if(w.get(It,J)===0)J++;else{w.swapRows(L,It);for(var K=w.get(L,J),Pt=J;Pt<w.columns;Pt++)w.set(L,Pt,w.get(L,Pt)/K);for(var Qt=L+1;Qt<w.rows;Qt++){var qt=w.get(Qt,J)/w.get(L,J);w.set(Qt,J,0);for(var xe=J+1;xe<w.columns;xe++)w.set(Qt,xe,w.get(Qt,xe)-w.get(L,xe)*qt)}L++,J++}}return w}},{key:"reducedEchelonForm",value:function(){for(var w=this.echelonForm(),L=w.columns,J=w.rows,It=J-1;It>=0;)if(w.maxRow(It)===0)It--;else{for(var Nt=0,K=!1;Nt<J&&K===!1;)w.get(It,Nt)===1?K=!0:Nt++;for(var Pt=0;Pt<It;Pt++)for(var Qt=w.get(Pt,Nt),qt=Nt;qt<L;qt++){var xe=w.get(Pt,qt)-Qt*w.get(It,qt);w.set(Pt,qt,xe)}It--}return w}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ee(w)!=="object")throw new TypeError("options must be an object");var L=w.rows,J=L===void 0?1:L,It=w.columns,Nt=It===void 0?1:It;if(!Number.isInteger(J)||J<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(Nt)||Nt<=0)throw new TypeError("columns must be a positive integer");for(var K=new vn(this.rows*J,this.columns*Nt),Pt=0;Pt<J;Pt++)for(var Qt=0;Qt<Nt;Qt++)K.setSubMatrix(this,this.rows*Pt,this.columns*Qt);return K}},{key:"fill",value:function(w){for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,w);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(w){Ar(this,w);for(var L=[],J=0;J<this.columns;J++)L.push(this.get(w,J));return L}},{key:"getRowVector",value:function(w){return vn.rowVector(this.getRow(w))}},{key:"setRow",value:function(w,L){Ar(this,w),L=xr(this,L);for(var J=0;J<this.columns;J++)this.set(w,J,L[J]);return this}},{key:"swapRows",value:function(w,L){Ar(this,w),Ar(this,L);for(var J=0;J<this.columns;J++){var It=this.get(w,J);this.set(w,J,this.get(L,J)),this.set(L,J,It)}return this}},{key:"getColumn",value:function(w){wr(this,w);for(var L=[],J=0;J<this.rows;J++)L.push(this.get(J,w));return L}},{key:"getColumnVector",value:function(w){return vn.columnVector(this.getColumn(w))}},{key:"setColumn",value:function(w,L){wr(this,w),L=Er(this,L);for(var J=0;J<this.rows;J++)this.set(J,w,L[J]);return this}},{key:"swapColumns",value:function(w,L){wr(this,w),wr(this,L);for(var J=0;J<this.rows;J++){var It=this.get(J,w);this.set(J,w,this.get(J,L)),this.set(J,L,It)}return this}},{key:"addRowVector",value:function(w){w=xr(this,w);for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,this.get(L,J)+w[J]);return this}},{key:"subRowVector",value:function(w){w=xr(this,w);for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,this.get(L,J)-w[J]);return this}},{key:"mulRowVector",value:function(w){w=xr(this,w);for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,this.get(L,J)*w[J]);return this}},{key:"divRowVector",value:function(w){w=xr(this,w);for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,this.get(L,J)/w[J]);return this}},{key:"addColumnVector",value:function(w){w=Er(this,w);for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,this.get(L,J)+w[L]);return this}},{key:"subColumnVector",value:function(w){w=Er(this,w);for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,this.get(L,J)-w[L]);return this}},{key:"mulColumnVector",value:function(w){w=Er(this,w);for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,this.get(L,J)*w[L]);return this}},{key:"divColumnVector",value:function(w){w=Er(this,w);for(var L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.set(L,J,this.get(L,J)/w[L]);return this}},{key:"mulRow",value:function(w,L){Ar(this,w);for(var J=0;J<this.columns;J++)this.set(w,J,this.get(w,J)*L);return this}},{key:"mulColumn",value:function(w,L){wr(this,w);for(var J=0;J<this.rows;J++)this.set(J,w,this.get(J,w)*L);return this}},{key:"max",value:function(){if(this.isEmpty())return NaN;for(var w=this.get(0,0),L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.get(L,J)>w&&(w=this.get(L,J));return w}},{key:"maxIndex",value:function(){vi(this);for(var w=this.get(0,0),L=[0,0],J=0;J<this.rows;J++)for(var It=0;It<this.columns;It++)this.get(J,It)>w&&(w=this.get(J,It),L[0]=J,L[1]=It);return L}},{key:"min",value:function(){if(this.isEmpty())return NaN;for(var w=this.get(0,0),L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)this.get(L,J)<w&&(w=this.get(L,J));return w}},{key:"minIndex",value:function(){vi(this);for(var w=this.get(0,0),L=[0,0],J=0;J<this.rows;J++)for(var It=0;It<this.columns;It++)this.get(J,It)<w&&(w=this.get(J,It),L[0]=J,L[1]=It);return L}},{key:"maxRow",value:function(w){if(Ar(this,w),this.isEmpty())return NaN;for(var L=this.get(w,0),J=1;J<this.columns;J++)this.get(w,J)>L&&(L=this.get(w,J));return L}},{key:"maxRowIndex",value:function(w){Ar(this,w),vi(this);for(var L=this.get(w,0),J=[w,0],It=1;It<this.columns;It++)this.get(w,It)>L&&(L=this.get(w,It),J[1]=It);return J}},{key:"minRow",value:function(w){if(Ar(this,w),this.isEmpty())return NaN;for(var L=this.get(w,0),J=1;J<this.columns;J++)this.get(w,J)<L&&(L=this.get(w,J));return L}},{key:"minRowIndex",value:function(w){Ar(this,w),vi(this);for(var L=this.get(w,0),J=[w,0],It=1;It<this.columns;It++)this.get(w,It)<L&&(L=this.get(w,It),J[1]=It);return J}},{key:"maxColumn",value:function(w){if(wr(this,w),this.isEmpty())return NaN;for(var L=this.get(0,w),J=1;J<this.rows;J++)this.get(J,w)>L&&(L=this.get(J,w));return L}},{key:"maxColumnIndex",value:function(w){wr(this,w),vi(this);for(var L=this.get(0,w),J=[0,w],It=1;It<this.rows;It++)this.get(It,w)>L&&(L=this.get(It,w),J[0]=It);return J}},{key:"minColumn",value:function(w){if(wr(this,w),this.isEmpty())return NaN;for(var L=this.get(0,w),J=1;J<this.rows;J++)this.get(J,w)<L&&(L=this.get(J,w));return L}},{key:"minColumnIndex",value:function(w){wr(this,w),vi(this);for(var L=this.get(0,w),J=[0,w],It=1;It<this.rows;It++)this.get(It,w)<L&&(L=this.get(It,w),J[0]=It);return J}},{key:"diag",value:function(){for(var w=Math.min(this.rows,this.columns),L=[],J=0;J<w;J++)L.push(this.get(J,J));return L}},{key:"norm",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",L=0;if(w==="max")return this.max();if(w==="frobenius"){for(var J=0;J<this.rows;J++)for(var It=0;It<this.columns;It++)L+=this.get(J,It)*this.get(J,It);return Math.sqrt(L)}throw new RangeError("unknown norm type: ".concat(w))}},{key:"cumulativeSum",value:function(){for(var w=0,L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)w+=this.get(L,J),this.set(L,J,w);return this}},{key:"dot",value:function(w){Q.isMatrix(w)&&(w=w.to1DArray());var L=this.to1DArray();if(L.length!==w.length)throw new RangeError("vectors do not have the same size");for(var J=0,It=0;It<L.length;It++)J+=L[It]*w[It];return J}},{key:"mmul",value:function(w){w=vn.checkMatrix(w);for(var L=this.rows,J=this.columns,It=w.columns,Nt=new vn(L,It),K=new Float64Array(J),Pt=0;Pt<It;Pt++){for(var Qt=0;Qt<J;Qt++)K[Qt]=w.get(Qt,Pt);for(var qt=0;qt<L;qt++){for(var xe=0,Ie=0;Ie<J;Ie++)xe+=this.get(qt,Ie)*K[Ie];Nt.set(qt,Pt,xe)}}return Nt}},{key:"strassen2x2",value:function(w){w=vn.checkMatrix(w);var L=new vn(2,2),J=this.get(0,0),It=w.get(0,0),Nt=this.get(0,1),K=w.get(0,1),Pt=this.get(1,0),Qt=w.get(1,0),qt=this.get(1,1),xe=w.get(1,1),Ie=(J+qt)*(It+xe),Ye=(Pt+qt)*It,Ne=J*(K-xe),Xe=qt*(Qt-It),Je=(J+Nt)*xe,Ge=Ie+Xe-Je+(Nt-qt)*(Qt+xe),qe=Ne+Je,yn=Ye+Xe,Pn=Ie-Ye+Ne+(Pt-J)*(It+K);return L.set(0,0,Ge),L.set(0,1,qe),L.set(1,0,yn),L.set(1,1,Pn),L}},{key:"strassen3x3",value:function(w){w=vn.checkMatrix(w);var L=new vn(3,3),J=this.get(0,0),It=this.get(0,1),Nt=this.get(0,2),K=this.get(1,0),Pt=this.get(1,1),Qt=this.get(1,2),qt=this.get(2,0),xe=this.get(2,1),Ie=this.get(2,2),Ye=w.get(0,0),Ne=w.get(0,1),Xe=w.get(0,2),Je=w.get(1,0),Ge=w.get(1,1),qe=w.get(1,2),yn=w.get(2,0),Pn=w.get(2,1),En=w.get(2,2),Ln=(J-K)*(-Ne+Ge),Zn=(-J+K+Pt)*(Ye-Ne+Ge),Qn=(K+Pt)*(-Ye+Ne),qn=J*Ye,fr=(-J+qt+xe)*(Ye-Xe+qe),br=(-J+qt)*(Xe-qe),gr=(qt+xe)*(-Ye+Xe),hr=(-Nt+xe+Ie)*(Ge+yn-Pn),Cr=(Nt-Ie)*(Ge-Pn),dr=Nt*yn,Jr=(xe+Ie)*(-yn+Pn),qr=(-Nt+Pt+Qt)*(qe+yn-En),wi=(Nt-Qt)*(qe-En),Tr=(Pt+Qt)*(-yn+En),pi=qn+dr+It*Je,Ei=(J+It+Nt-K-Pt-xe-Ie)*Ge+Zn+Qn+qn+hr+dr+Jr,ji=qn+fr+gr+(J+It+Nt-Pt-Qt-qt-xe)*qe+dr+qr+Tr,Ao=Ln+Pt*(-Ye+Ne+Je-Ge-qe-yn+En)+Zn+qn+dr+qr+wi,go=Ln+Zn+Qn+qn+Qt*Pn,Ii=dr+qr+wi+Tr+K*Xe,Gi=qn+fr+br+xe*(-Ye+Xe+Je-Ge-qe-yn+Pn)+hr+Cr+dr,Po=hr+Cr+dr+Jr+qt*Ne,Fo=qn+fr+br+gr+Ie*En;return L.set(0,0,pi),L.set(0,1,Ei),L.set(0,2,ji),L.set(1,0,Ao),L.set(1,1,go),L.set(1,2,Ii),L.set(2,0,Gi),L.set(2,1,Po),L.set(2,2,Fo),L}},{key:"mmulStrassen",value:function(w){w=vn.checkMatrix(w);var L=this.clone(),J=L.rows,It=L.columns,Nt=w.rows,K=w.columns;function Pt(xe,Ie,Ye){var Ne=xe.rows,Xe=xe.columns;if(Ne===Ie&&Xe===Ye)return xe;var Je=Q.zeros(Ie,Ye);return Je=Je.setSubMatrix(xe,0,0)}It!==Nt&&console.warn("Multiplying ".concat(J," x ").concat(It," and ").concat(Nt," x ").concat(K," matrix: dimensions do not match."));var Qt=Math.max(J,Nt),qt=Math.max(It,K);return function xe(Ie,Ye,Ne,Xe){if(Ne<=512||Xe<=512)return Ie.mmul(Ye);Ne%2==1&&Xe%2==1?(Ie=Pt(Ie,Ne+1,Xe+1),Ye=Pt(Ye,Ne+1,Xe+1)):Ne%2==1?(Ie=Pt(Ie,Ne+1,Xe),Ye=Pt(Ye,Ne+1,Xe)):Xe%2==1&&(Ie=Pt(Ie,Ne,Xe+1),Ye=Pt(Ye,Ne,Xe+1));var Je=parseInt(Ie.rows/2,10),Ge=parseInt(Ie.columns/2,10),qe=Ie.subMatrix(0,Je-1,0,Ge-1),yn=Ye.subMatrix(0,Je-1,0,Ge-1),Pn=Ie.subMatrix(0,Je-1,Ge,Ie.columns-1),En=Ye.subMatrix(0,Je-1,Ge,Ye.columns-1),Ln=Ie.subMatrix(Je,Ie.rows-1,0,Ge-1),Zn=Ye.subMatrix(Je,Ye.rows-1,0,Ge-1),Qn=Ie.subMatrix(Je,Ie.rows-1,Ge,Ie.columns-1),qn=Ye.subMatrix(Je,Ye.rows-1,Ge,Ye.columns-1),fr=xe(Q.add(qe,Qn),Q.add(yn,qn),Je,Ge),br=xe(Q.add(Ln,Qn),yn,Je,Ge),gr=xe(qe,Q.sub(En,qn),Je,Ge),hr=xe(Qn,Q.sub(Zn,yn),Je,Ge),Cr=xe(Q.add(qe,Pn),qn,Je,Ge),dr=xe(Q.sub(Ln,qe),Q.add(yn,En),Je,Ge),Jr=xe(Q.sub(Pn,Qn),Q.add(Zn,qn),Je,Ge),qr=Q.add(fr,hr);qr.sub(Cr),qr.add(Jr);var wi=Q.add(gr,Cr),Tr=Q.add(br,hr),pi=Q.sub(fr,br);pi.add(gr),pi.add(dr);var Ei=Q.zeros(2*qr.rows,2*qr.columns);return(Ei=(Ei=(Ei=(Ei=Ei.setSubMatrix(qr,0,0)).setSubMatrix(wi,qr.rows,0)).setSubMatrix(Tr,0,qr.columns)).setSubMatrix(pi,qr.rows,qr.columns)).subMatrix(0,Ne-1,0,Xe-1)}(L=Pt(L,Qt,qt),w=Pt(w,Qt,qt),Qt,qt)}},{key:"scaleRows",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ee(w)!=="object")throw new TypeError("options must be an object");var L=w.min,J=L===void 0?0:L,It=w.max,Nt=It===void 0?1:It;if(!Number.isFinite(J))throw new TypeError("min must be a number");if(!Number.isFinite(Nt))throw new TypeError("max must be a number");if(J>=Nt)throw new RangeError("min must be smaller than max");for(var K=new vn(this.rows,this.columns),Pt=0;Pt<this.rows;Pt++){var Qt=this.getRow(Pt);Qt.length>0&&rn(Qt,{min:J,max:Nt,output:Qt}),K.setRow(Pt,Qt)}return K}},{key:"scaleColumns",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ee(w)!=="object")throw new TypeError("options must be an object");var L=w.min,J=L===void 0?0:L,It=w.max,Nt=It===void 0?1:It;if(!Number.isFinite(J))throw new TypeError("min must be a number");if(!Number.isFinite(Nt))throw new TypeError("max must be a number");if(J>=Nt)throw new RangeError("min must be smaller than max");for(var K=new vn(this.rows,this.columns),Pt=0;Pt<this.columns;Pt++){var Qt=this.getColumn(Pt);Qt.length&&rn(Qt,{min:J,max:Nt,output:Qt}),K.setColumn(Pt,Qt)}return K}},{key:"flipRows",value:function(){for(var w=Math.ceil(this.columns/2),L=0;L<this.rows;L++)for(var J=0;J<w;J++){var It=this.get(L,J),Nt=this.get(L,this.columns-1-J);this.set(L,J,Nt),this.set(L,this.columns-1-J,It)}return this}},{key:"flipColumns",value:function(){for(var w=Math.ceil(this.rows/2),L=0;L<this.columns;L++)for(var J=0;J<w;J++){var It=this.get(J,L),Nt=this.get(this.rows-1-J,L);this.set(J,L,Nt),this.set(this.rows-1-J,L,It)}return this}},{key:"kroneckerProduct",value:function(w){w=vn.checkMatrix(w);for(var L=this.rows,J=this.columns,It=w.rows,Nt=w.columns,K=new vn(L*It,J*Nt),Pt=0;Pt<L;Pt++)for(var Qt=0;Qt<J;Qt++)for(var qt=0;qt<It;qt++)for(var xe=0;xe<Nt;xe++)K.set(It*Pt+qt,Nt*Qt+xe,this.get(Pt,Qt)*w.get(qt,xe));return K}},{key:"transpose",value:function(){for(var w=new vn(this.columns,this.rows),L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)w.set(J,L,this.get(L,J));return w}},{key:"sortRows",value:function(){for(var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Se,L=0;L<this.rows;L++)this.setRow(L,this.getRow(L).sort(w));return this}},{key:"sortColumns",value:function(){for(var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Se,L=0;L<this.columns;L++)this.setColumn(L,this.getColumn(L).sort(w));return this}},{key:"subMatrix",value:function(w,L,J,It){Pr(this,w,L,J,It);for(var Nt=new vn(L-w+1,It-J+1),K=w;K<=L;K++)for(var Pt=J;Pt<=It;Pt++)Nt.set(K-w,Pt-J,this.get(K,Pt));return Nt}},{key:"subMatrixRow",value:function(w,L,J){if(L===void 0&&(L=0),J===void 0&&(J=this.columns-1),L>J||L<0||L>=this.columns||J<0||J>=this.columns)throw new RangeError("Argument out of range");for(var It=new vn(w.length,J-L+1),Nt=0;Nt<w.length;Nt++)for(var K=L;K<=J;K++){if(w[Nt]<0||w[Nt]>=this.rows)throw new RangeError("Row index out of range: ".concat(w[Nt]));It.set(Nt,K-L,this.get(w[Nt],K))}return It}},{key:"subMatrixColumn",value:function(w,L,J){if(L===void 0&&(L=0),J===void 0&&(J=this.rows-1),L>J||L<0||L>=this.rows||J<0||J>=this.rows)throw new RangeError("Argument out of range");for(var It=new vn(J-L+1,w.length),Nt=0;Nt<w.length;Nt++)for(var K=L;K<=J;K++){if(w[Nt]<0||w[Nt]>=this.columns)throw new RangeError("Column index out of range: ".concat(w[Nt]));It.set(K-L,Nt,this.get(K,w[Nt]))}return It}},{key:"setSubMatrix",value:function(w,L,J){if((w=vn.checkMatrix(w)).isEmpty())return this;Pr(this,L,L+w.rows-1,J,J+w.columns-1);for(var It=0;It<w.rows;It++)for(var Nt=0;Nt<w.columns;Nt++)this.set(L+It,J+Nt,w.get(It,Nt));return this}},{key:"selection",value:function(w,L){for(var J=function(qt,xe,Ie){return{row:Ir(qt,xe),column:Lr(qt,Ie)}}(this,w,L),It=new vn(w.length,L.length),Nt=0;Nt<J.row.length;Nt++)for(var K=J.row[Nt],Pt=0;Pt<J.column.length;Pt++){var Qt=J.column[Pt];It.set(Nt,Pt,this.get(K,Qt))}return It}},{key:"trace",value:function(){for(var w=Math.min(this.rows,this.columns),L=0,J=0;J<w;J++)L+=this.get(J,J);return L}},{key:"clone",value:function(){for(var w=new vn(this.rows,this.columns),L=0;L<this.rows;L++)for(var J=0;J<this.columns;J++)w.set(L,J,this.get(L,J));return w}},{key:"sum",value:function(w){switch(w){case"row":return function(L){for(var J=Dr(L.rows),It=0;It<L.rows;++It)for(var Nt=0;Nt<L.columns;++Nt)J[It]+=L.get(It,Nt);return J}(this);case"column":return function(L){for(var J=Dr(L.columns),It=0;It<L.rows;++It)for(var Nt=0;Nt<L.columns;++Nt)J[Nt]+=L.get(It,Nt);return J}(this);case void 0:return function(L){for(var J=0,It=0;It<L.rows;It++)for(var Nt=0;Nt<L.columns;Nt++)J+=L.get(It,Nt);return J}(this);default:throw new Error("invalid option: ".concat(w))}}},{key:"product",value:function(w){switch(w){case"row":return function(L){for(var J=Dr(L.rows,1),It=0;It<L.rows;++It)for(var Nt=0;Nt<L.columns;++Nt)J[It]*=L.get(It,Nt);return J}(this);case"column":return function(L){for(var J=Dr(L.columns,1),It=0;It<L.rows;++It)for(var Nt=0;Nt<L.columns;++Nt)J[Nt]*=L.get(It,Nt);return J}(this);case void 0:return function(L){for(var J=1,It=0;It<L.rows;It++)for(var Nt=0;Nt<L.columns;Nt++)J*=L.get(It,Nt);return J}(this);default:throw new Error("invalid option: ".concat(w))}}},{key:"mean",value:function(w){var L=this.sum(w);switch(w){case"row":for(var J=0;J<this.rows;J++)L[J]/=this.columns;return L;case"column":for(var It=0;It<this.columns;It++)L[It]/=this.rows;return L;case void 0:return L/this.size;default:throw new Error("invalid option: ".concat(w))}}},{key:"variance",value:function(w){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ee(w)==="object"&&(L=w,w=void 0),Ee(L)!=="object")throw new TypeError("options must be an object");var J=L,It=J.unbiased,Nt=It===void 0||It,K=J.mean,Pt=K===void 0?this.mean(w):K;if(typeof Nt!="boolean")throw new TypeError("unbiased must be a boolean");switch(w){case"row":if(!Array.isArray(Pt))throw new TypeError("mean must be an array");return ii(this,Nt,Pt);case"column":if(!Array.isArray(Pt))throw new TypeError("mean must be an array");return Si(this,Nt,Pt);case void 0:if(typeof Pt!="number")throw new TypeError("mean must be a number");return Ui(this,Nt,Pt);default:throw new Error("invalid option: ".concat(w))}}},{key:"standardDeviation",value:function(w,L){Ee(w)==="object"&&(L=w,w=void 0);var J=this.variance(w,L);if(w===void 0)return Math.sqrt(J);for(var It=0;It<J.length;It++)J[It]=Math.sqrt(J[It]);return J}},{key:"center",value:function(w){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ee(w)==="object"&&(L=w,w=void 0),Ee(L)!=="object")throw new TypeError("options must be an object");var J=L,It=J.center,Nt=It===void 0?this.mean(w):It;switch(w){case"row":if(!Array.isArray(Nt))throw new TypeError("center must be an array");return Yi(this,Nt),this;case"column":if(!Array.isArray(Nt))throw new TypeError("center must be an array");return Bi(this,Nt),this;case void 0:if(typeof Nt!="number")throw new TypeError("center must be a number");return Di(this,Nt),this;default:throw new Error("invalid option: ".concat(w))}}},{key:"scale",value:function(w){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ee(w)==="object"&&(L=w,w=void 0),Ee(L)!=="object")throw new TypeError("options must be an object");var J=L.scale;switch(w){case"row":if(J===void 0)J=ve(this);else if(!Array.isArray(J))throw new TypeError("scale must be an array");return G(this,J),this;case"column":if(J===void 0)J=B(this);else if(!Array.isArray(J))throw new TypeError("scale must be an array");return $(this,J),this;case void 0:if(J===void 0)J=lt(this);else if(typeof J!="number")throw new TypeError("scale must be a number");return Ft(this,J),this;default:throw new Error("invalid option: ".concat(w))}}},{key:"toString",value:function(w){return vr(this,w)}},{key:"size",get:function(){return this.rows*this.columns}}],[{key:"from1DArray",value:function(w,L,J){if(w*L!==J.length)throw new RangeError("data length does not match given dimensions");for(var It=new vn(w,L),Nt=0;Nt<w;Nt++)for(var K=0;K<L;K++)It.set(Nt,K,J[Nt*L+K]);return It}},{key:"rowVector",value:function(w){for(var L=new vn(1,w.length),J=0;J<w.length;J++)L.set(0,J,w[J]);return L}},{key:"columnVector",value:function(w){for(var L=new vn(w.length,1),J=0;J<w.length;J++)L.set(J,0,w[J]);return L}},{key:"zeros",value:function(w,L){return new vn(w,L)}},{key:"ones",value:function(w,L){return new vn(w,L).fill(1)}},{key:"rand",value:function(w,L){var J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Ee(J)!=="object")throw new TypeError("options must be an object");for(var It=J.random,Nt=It===void 0?Math.random:It,K=new vn(w,L),Pt=0;Pt<w;Pt++)for(var Qt=0;Qt<L;Qt++)K.set(Pt,Qt,Nt());return K}},{key:"randInt",value:function(w,L){var J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Ee(J)!=="object")throw new TypeError("options must be an object");var It=J.min,Nt=It===void 0?0:It,K=J.max,Pt=K===void 0?1e3:K,Qt=J.random,qt=Qt===void 0?Math.random:Qt;if(!Number.isInteger(Nt))throw new TypeError("min must be an integer");if(!Number.isInteger(Pt))throw new TypeError("max must be an integer");if(Nt>=Pt)throw new RangeError("min must be smaller than max");for(var xe=Pt-Nt,Ie=new vn(w,L),Ye=0;Ye<w;Ye++)for(var Ne=0;Ne<L;Ne++){var Xe=Nt+Math.round(qt()*xe);Ie.set(Ye,Ne,Xe)}return Ie}},{key:"eye",value:function(w,L,J){L===void 0&&(L=w),J===void 0&&(J=1);for(var It=Math.min(w,L),Nt=this.zeros(w,L),K=0;K<It;K++)Nt.set(K,K,J);return Nt}},{key:"diag",value:function(w,L,J){var It=w.length;L===void 0&&(L=It),J===void 0&&(J=L);for(var Nt=Math.min(It,L,J),K=this.zeros(L,J),Pt=0;Pt<Nt;Pt++)K.set(Pt,Pt,w[Pt]);return K}},{key:"min",value:function(w,L){w=this.checkMatrix(w),L=this.checkMatrix(L);for(var J=w.rows,It=w.columns,Nt=new vn(J,It),K=0;K<J;K++)for(var Pt=0;Pt<It;Pt++)Nt.set(K,Pt,Math.min(w.get(K,Pt),L.get(K,Pt)));return Nt}},{key:"max",value:function(w,L){w=this.checkMatrix(w),L=this.checkMatrix(L);for(var J=w.rows,It=w.columns,Nt=new this(J,It),K=0;K<J;K++)for(var Pt=0;Pt<It;Pt++)Nt.set(K,Pt,Math.max(w.get(K,Pt),L.get(K,Pt)));return Nt}},{key:"checkMatrix",value:function(w){return Q.isMatrix(w)?w:new vn(w)}},{key:"isMatrix",value:function(w){return w!=null&&w.klass==="Matrix"}}]),Q}();function Se(Q,U){return Q-U}Yt.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Yt.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return vr(this)}),Yt.random=Yt.rand,Yt.randomInt=Yt.randInt,Yt.diagonal=Yt.diag,Yt.prototype.diagonal=Yt.prototype.diag,Yt.identity=Yt.eye,Yt.prototype.negate=Yt.prototype.neg,Yt.prototype.tensorProduct=Yt.prototype.kroneckerProduct;var Wt,ue,vn=function(Q){(function(L,J){if(typeof J!="function"&&J!==null)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(J&&J.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),J&&Jt(L,J)})(w,Q);var U=ie(w);function w(L,J){var It;if(un(this,w),It=U.call(this),w.isMatrix(L))return se(It,L.clone());if(Number.isInteger(L)&&L>=0){if(It.data=[],!(Number.isInteger(J)&&J>=0))throw new TypeError("nColumns must be a positive integer");for(var Nt=0;Nt<L;Nt++)It.data.push(new Float64Array(J))}else{if(!Array.isArray(L))throw new TypeError("First argument must be a positive number or an array");var K=L;if(typeof(J=(L=K.length)?K[0].length:0)!="number")throw new TypeError("Data must be a 2D array with at least one element");It.data=[];for(var Pt=0;Pt<L;Pt++){if(K[Pt].length!==J)throw new RangeError("Inconsistent array dimensions");It.data.push(Float64Array.from(K[Pt]))}}return It.rows=L,It.columns=J,It}return zt(w,[{key:"set",value:function(J,It,Nt){return this.data[J][It]=Nt,this}},{key:"get",value:function(J,It){return this.data[J][It]}},{key:"removeRow",value:function(J){return Ar(this,J),this.data.splice(J,1),this.rows-=1,this}},{key:"addRow",value:function(J,It){return It===void 0&&(It=J,J=this.rows),Ar(this,J,!0),It=Float64Array.from(xr(this,It)),this.data.splice(J,0,It),this.rows+=1,this}},{key:"removeColumn",value:function(J){wr(this,J);for(var It=0;It<this.rows;It++){for(var Nt=new Float64Array(this.columns-1),K=0;K<J;K++)Nt[K]=this.data[It][K];for(var Pt=J+1;Pt<this.columns;Pt++)Nt[Pt-1]=this.data[It][Pt];this.data[It]=Nt}return this.columns-=1,this}},{key:"addColumn",value:function(J,It){It===void 0&&(It=J,J=this.columns),wr(this,J,!0),It=Er(this,It);for(var Nt=0;Nt<this.rows;Nt++){for(var K=new Float64Array(this.columns+1),Pt=0;Pt<J;Pt++)K[Pt]=this.data[Nt][Pt];for(K[Pt++]=It[Nt];Pt<this.columns+1;Pt++)K[Pt]=this.data[Nt][Pt-1];this.data[Nt]=K}return this.columns+=1,this}}]),w}(Yt);function Dn(Q){return(Dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function zn(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function _n(Q,U){return(_n=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function Ze(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=N(Q);if(U){var J=N(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Te(this,w)}}function Te(Q,U){return!U||Dn(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function N(Q){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}ue=vn,(Wt=Yt).prototype.add=function(Q){return typeof Q=="number"?this.addS(Q):this.addM(Q)},Wt.prototype.addS=function(Q){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)+Q);return this},Wt.prototype.addM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)+Q.get(U,w));return this},Wt.add=function(Q,U){return new ue(Q).add(U)},Wt.prototype.sub=function(Q){return typeof Q=="number"?this.subS(Q):this.subM(Q)},Wt.prototype.subS=function(Q){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)-Q);return this},Wt.prototype.subM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)-Q.get(U,w));return this},Wt.sub=function(Q,U){return new ue(Q).sub(U)},Wt.prototype.subtract=Wt.prototype.sub,Wt.prototype.subtractS=Wt.prototype.subS,Wt.prototype.subtractM=Wt.prototype.subM,Wt.subtract=Wt.sub,Wt.prototype.mul=function(Q){return typeof Q=="number"?this.mulS(Q):this.mulM(Q)},Wt.prototype.mulS=function(Q){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)*Q);return this},Wt.prototype.mulM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)*Q.get(U,w));return this},Wt.mul=function(Q,U){return new ue(Q).mul(U)},Wt.prototype.multiply=Wt.prototype.mul,Wt.prototype.multiplyS=Wt.prototype.mulS,Wt.prototype.multiplyM=Wt.prototype.mulM,Wt.multiply=Wt.mul,Wt.prototype.div=function(Q){return typeof Q=="number"?this.divS(Q):this.divM(Q)},Wt.prototype.divS=function(Q){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)/Q);return this},Wt.prototype.divM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)/Q.get(U,w));return this},Wt.div=function(Q,U){return new ue(Q).div(U)},Wt.prototype.divide=Wt.prototype.div,Wt.prototype.divideS=Wt.prototype.divS,Wt.prototype.divideM=Wt.prototype.divM,Wt.divide=Wt.div,Wt.prototype.mod=function(Q){return typeof Q=="number"?this.modS(Q):this.modM(Q)},Wt.prototype.modS=function(Q){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)%Q);return this},Wt.prototype.modM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)%Q.get(U,w));return this},Wt.mod=function(Q,U){return new ue(Q).mod(U)},Wt.prototype.modulus=Wt.prototype.mod,Wt.prototype.modulusS=Wt.prototype.modS,Wt.prototype.modulusM=Wt.prototype.modM,Wt.modulus=Wt.mod,Wt.prototype.and=function(Q){return typeof Q=="number"?this.andS(Q):this.andM(Q)},Wt.prototype.andS=function(Q){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)&Q);return this},Wt.prototype.andM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)&Q.get(U,w));return this},Wt.and=function(Q,U){return new ue(Q).and(U)},Wt.prototype.or=function(Q){return typeof Q=="number"?this.orS(Q):this.orM(Q)},Wt.prototype.orS=function(Q){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)|Q);return this},Wt.prototype.orM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)|Q.get(U,w));return this},Wt.or=function(Q,U){return new ue(Q).or(U)},Wt.prototype.xor=function(Q){return typeof Q=="number"?this.xorS(Q):this.xorM(Q)},Wt.prototype.xorS=function(Q){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)^Q);return this},Wt.prototype.xorM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)^Q.get(U,w));return this},Wt.xor=function(Q,U){return new ue(Q).xor(U)},Wt.prototype.leftShift=function(Q){return typeof Q=="number"?this.leftShiftS(Q):this.leftShiftM(Q)},Wt.prototype.leftShiftS=function(Q){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)<<Q);return this},Wt.prototype.leftShiftM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)<<Q.get(U,w));return this},Wt.leftShift=function(Q,U){return new ue(Q).leftShift(U)},Wt.prototype.signPropagatingRightShift=function(Q){return typeof Q=="number"?this.signPropagatingRightShiftS(Q):this.signPropagatingRightShiftM(Q)},Wt.prototype.signPropagatingRightShiftS=function(Q){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)>>Q);return this},Wt.prototype.signPropagatingRightShiftM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)>>Q.get(U,w));return this},Wt.signPropagatingRightShift=function(Q,U){return new ue(Q).signPropagatingRightShift(U)},Wt.prototype.rightShift=function(Q){return typeof Q=="number"?this.rightShiftS(Q):this.rightShiftM(Q)},Wt.prototype.rightShiftS=function(Q){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)>>>Q);return this},Wt.prototype.rightShiftM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)>>>Q.get(U,w));return this},Wt.rightShift=function(Q,U){return new ue(Q).rightShift(U)},Wt.prototype.zeroFillRightShift=Wt.prototype.rightShift,Wt.prototype.zeroFillRightShiftS=Wt.prototype.rightShiftS,Wt.prototype.zeroFillRightShiftM=Wt.prototype.rightShiftM,Wt.zeroFillRightShift=Wt.rightShift,Wt.prototype.not=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,~this.get(Q,U));return this},Wt.not=function(Q){return new ue(Q).not()},Wt.prototype.abs=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.abs(this.get(Q,U)));return this},Wt.abs=function(Q){return new ue(Q).abs()},Wt.prototype.acos=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.acos(this.get(Q,U)));return this},Wt.acos=function(Q){return new ue(Q).acos()},Wt.prototype.acosh=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.acosh(this.get(Q,U)));return this},Wt.acosh=function(Q){return new ue(Q).acosh()},Wt.prototype.asin=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.asin(this.get(Q,U)));return this},Wt.asin=function(Q){return new ue(Q).asin()},Wt.prototype.asinh=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.asinh(this.get(Q,U)));return this},Wt.asinh=function(Q){return new ue(Q).asinh()},Wt.prototype.atan=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.atan(this.get(Q,U)));return this},Wt.atan=function(Q){return new ue(Q).atan()},Wt.prototype.atanh=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.atanh(this.get(Q,U)));return this},Wt.atanh=function(Q){return new ue(Q).atanh()},Wt.prototype.cbrt=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.cbrt(this.get(Q,U)));return this},Wt.cbrt=function(Q){return new ue(Q).cbrt()},Wt.prototype.ceil=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.ceil(this.get(Q,U)));return this},Wt.ceil=function(Q){return new ue(Q).ceil()},Wt.prototype.clz32=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.clz32(this.get(Q,U)));return this},Wt.clz32=function(Q){return new ue(Q).clz32()},Wt.prototype.cos=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.cos(this.get(Q,U)));return this},Wt.cos=function(Q){return new ue(Q).cos()},Wt.prototype.cosh=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.cosh(this.get(Q,U)));return this},Wt.cosh=function(Q){return new ue(Q).cosh()},Wt.prototype.exp=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.exp(this.get(Q,U)));return this},Wt.exp=function(Q){return new ue(Q).exp()},Wt.prototype.expm1=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.expm1(this.get(Q,U)));return this},Wt.expm1=function(Q){return new ue(Q).expm1()},Wt.prototype.floor=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.floor(this.get(Q,U)));return this},Wt.floor=function(Q){return new ue(Q).floor()},Wt.prototype.fround=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.fround(this.get(Q,U)));return this},Wt.fround=function(Q){return new ue(Q).fround()},Wt.prototype.log=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.log(this.get(Q,U)));return this},Wt.log=function(Q){return new ue(Q).log()},Wt.prototype.log1p=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.log1p(this.get(Q,U)));return this},Wt.log1p=function(Q){return new ue(Q).log1p()},Wt.prototype.log10=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.log10(this.get(Q,U)));return this},Wt.log10=function(Q){return new ue(Q).log10()},Wt.prototype.log2=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.log2(this.get(Q,U)));return this},Wt.log2=function(Q){return new ue(Q).log2()},Wt.prototype.round=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.round(this.get(Q,U)));return this},Wt.round=function(Q){return new ue(Q).round()},Wt.prototype.sign=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.sign(this.get(Q,U)));return this},Wt.sign=function(Q){return new ue(Q).sign()},Wt.prototype.sin=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.sin(this.get(Q,U)));return this},Wt.sin=function(Q){return new ue(Q).sin()},Wt.prototype.sinh=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.sinh(this.get(Q,U)));return this},Wt.sinh=function(Q){return new ue(Q).sinh()},Wt.prototype.sqrt=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.sqrt(this.get(Q,U)));return this},Wt.sqrt=function(Q){return new ue(Q).sqrt()},Wt.prototype.tan=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.tan(this.get(Q,U)));return this},Wt.tan=function(Q){return new ue(Q).tan()},Wt.prototype.tanh=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.tanh(this.get(Q,U)));return this},Wt.tanh=function(Q){return new ue(Q).tanh()},Wt.prototype.trunc=function(){for(var Q=0;Q<this.rows;Q++)for(var U=0;U<this.columns;U++)this.set(Q,U,Math.trunc(this.get(Q,U)));return this},Wt.trunc=function(Q){return new ue(Q).trunc()},Wt.pow=function(Q,U){return new ue(Q).pow(U)},Wt.prototype.pow=function(Q){return typeof Q=="number"?this.powS(Q):this.powM(Q)},Wt.prototype.powS=function(Q){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,Math.pow(this.get(U,w),Q));return this},Wt.prototype.powM=function(Q){if(Q=ue.checkMatrix(Q),this.rows!==Q.rows||this.columns!==Q.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,Math.pow(this.get(U,w),Q.get(U,w)));return this};var mt=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&_n(Nt,K)})(It,Q);var U,w,L,J=Ze(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).data=Nt,K.rows=Nt.length,K.columns=Nt[0].length,K}return U=It,(w=[{key:"set",value:function(K,Pt,Qt){return this.data[K][Pt]=Qt,this}},{key:"get",value:function(K,Pt){return this.data[K][Pt]}}])&&zn(U.prototype,w),L&&zn(U,L),It}(Yt);function $t(Q,U){var w=0;return Math.abs(Q)>Math.abs(U)?(w=U/Q,Math.abs(Q)*Math.sqrt(1+w*w)):U!==0?(w=Q/U,Math.abs(U)*Math.sqrt(1+w*w)):0}function me(Q,U){if(!(Q instanceof U))throw new TypeError("Cannot call a class as a function")}function Zt(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}var de=function(){function Q(J){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(me(this,Q),(J=mt.checkMatrix(J)).isEmpty())throw new Error("Matrix must be non-empty");var Nt,K=J.rows,Pt=J.columns,Qt=It.computeLeftSingularVectors,qt=Qt===void 0||Qt,xe=It.computeRightSingularVectors,Ie=xe===void 0||xe,Ye=It.autoTranspose,Ne=Ye!==void 0&&Ye,Xe=Boolean(qt),Je=Boolean(Ie),Ge=!1;if(K<Pt)if(Ne){K=(Nt=J.transpose()).rows,Pt=Nt.columns,Ge=!0;var qe=Xe;Xe=Je,Je=qe}else Nt=J.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else Nt=J.clone();for(var yn=Math.min(K,Pt),Pn=Math.min(K+1,Pt),En=new Float64Array(Pn),Ln=new vn(K,yn),Zn=new vn(Pt,Pt),Qn=new Float64Array(Pt),qn=new Float64Array(K),fr=new Float64Array(Pn),br=0;br<Pn;br++)fr[br]=br;for(var gr=Math.min(K-1,Pt),hr=Math.max(0,Math.min(Pt-2,K)),Cr=Math.max(gr,hr),dr=0;dr<Cr;dr++){if(dr<gr){En[dr]=0;for(var Jr=dr;Jr<K;Jr++)En[dr]=$t(En[dr],Nt.get(Jr,dr));if(En[dr]!==0){Nt.get(dr,dr)<0&&(En[dr]=-En[dr]);for(var qr=dr;qr<K;qr++)Nt.set(qr,dr,Nt.get(qr,dr)/En[dr]);Nt.set(dr,dr,Nt.get(dr,dr)+1)}En[dr]=-En[dr]}for(var wi=dr+1;wi<Pt;wi++){if(dr<gr&&En[dr]!==0){for(var Tr=0,pi=dr;pi<K;pi++)Tr+=Nt.get(pi,dr)*Nt.get(pi,wi);Tr=-Tr/Nt.get(dr,dr);for(var Ei=dr;Ei<K;Ei++)Nt.set(Ei,wi,Nt.get(Ei,wi)+Tr*Nt.get(Ei,dr))}Qn[wi]=Nt.get(dr,wi)}if(Xe&&dr<gr)for(var ji=dr;ji<K;ji++)Ln.set(ji,dr,Nt.get(ji,dr));if(dr<hr){Qn[dr]=0;for(var Ao=dr+1;Ao<Pt;Ao++)Qn[dr]=$t(Qn[dr],Qn[Ao]);if(Qn[dr]!==0){Qn[dr+1]<0&&(Qn[dr]=0-Qn[dr]);for(var go=dr+1;go<Pt;go++)Qn[go]/=Qn[dr];Qn[dr+1]+=1}if(Qn[dr]=-Qn[dr],dr+1<K&&Qn[dr]!==0){for(var Ii=dr+1;Ii<K;Ii++)qn[Ii]=0;for(var Gi=dr+1;Gi<K;Gi++)for(var Po=dr+1;Po<Pt;Po++)qn[Gi]+=Qn[Po]*Nt.get(Gi,Po);for(var Fo=dr+1;Fo<Pt;Fo++)for(var ka=-Qn[Fo]/Qn[dr+1],pa=dr+1;pa<K;pa++)Nt.set(pa,Fo,Nt.get(pa,Fo)+ka*qn[pa])}if(Je)for(var qa=dr+1;qa<Pt;qa++)Zn.set(qa,dr,Qn[qa])}}var Co=Math.min(Pt,K+1);if(gr<Pt&&(En[gr]=Nt.get(gr,gr)),K<Co&&(En[Co-1]=0),hr+1<Co&&(Qn[hr]=Nt.get(hr,Co-1)),Qn[Co-1]=0,Xe){for(var Lc=gr;Lc<yn;Lc++){for(var yd=0;yd<K;yd++)Ln.set(yd,Lc,0);Ln.set(Lc,Lc,1)}for(var Lo=gr-1;Lo>=0;Lo--)if(En[Lo]!==0){for(var Bc=Lo+1;Bc<yn;Bc++){for(var lh=0,fh=Lo;fh<K;fh++)lh+=Ln.get(fh,Lo)*Ln.get(fh,Bc);lh=-lh/Ln.get(Lo,Lo);for(var Fc=Lo;Fc<K;Fc++)Ln.set(Fc,Bc,Ln.get(Fc,Bc)+lh*Ln.get(Fc,Lo))}for(var hh=Lo;hh<K;hh++)Ln.set(hh,Lo,-Ln.get(hh,Lo));Ln.set(Lo,Lo,1+Ln.get(Lo,Lo));for(var md=0;md<Lo-1;md++)Ln.set(md,Lo,0)}else{for(var bd=0;bd<K;bd++)Ln.set(bd,Lo,0);Ln.set(Lo,Lo,1)}}if(Je)for(var aa=Pt-1;aa>=0;aa--){if(aa<hr&&Qn[aa]!==0)for(var Gc=aa+1;Gc<Pt;Gc++){for(var dh=0,vh=aa+1;vh<Pt;vh++)dh+=Zn.get(vh,aa)*Zn.get(vh,Gc);dh=-dh/Zn.get(aa+1,aa);for(var _c=aa+1;_c<Pt;_c++)Zn.set(_c,Gc,Zn.get(_c,Gc)+dh*Zn.get(_c,aa))}for(var xd=0;xd<Pt;xd++)Zn.set(xd,aa,0);Zn.set(aa,aa,1)}for(var Id=Co-1,Pd=Number.EPSILON;Co>0;){var Ni=void 0,Uc=void 0;for(Ni=Co-2;Ni>=-1&&Ni!==-1;Ni--){var Rd=Number.MIN_VALUE+Pd*Math.abs(En[Ni]+Math.abs(En[Ni+1]));if(Math.abs(Qn[Ni])<=Rd||Number.isNaN(Qn[Ni])){Qn[Ni]=0;break}}if(Ni===Co-2)Uc=4;else{var ga=void 0;for(ga=Co-1;ga>=Ni&&ga!==Ni;ga--){var kd=(ga!==Co?Math.abs(Qn[ga]):0)+(ga!==Ni+1?Math.abs(Qn[ga-1]):0);if(Math.abs(En[ga])<=Pd*kd){En[ga]=0;break}}ga===Ni?Uc=3:ga===Co-1?Uc=1:(Uc=2,Ni=ga)}switch(Ni++,Uc){case 1:var Od=Qn[Co-2];Qn[Co-2]=0;for(var Ma=Co-2;Ma>=Ni;Ma--){var zc=$t(En[Ma],Od),Sd=En[Ma]/zc,wd=Od/zc;if(En[Ma]=zc,Ma!==Ni&&(Od=-wd*Qn[Ma-1],Qn[Ma-1]=Sd*Qn[Ma-1]),Je)for(var js=0;js<Pt;js++)zc=Sd*Zn.get(js,Ma)+wd*Zn.get(js,Co-1),Zn.set(js,Co-1,-wd*Zn.get(js,Ma)+Sd*Zn.get(js,Co-1)),Zn.set(js,Ma,zc)}break;case 2:var Ed=Qn[Ni-1];Qn[Ni-1]=0;for(var Na=Ni;Na<Co;Na++){var Vc=$t(En[Na],Ed),Md=En[Na]/Vc,Ad=Ed/Vc;if(En[Na]=Vc,Ed=-Ad*Qn[Na],Qn[Na]=Md*Qn[Na],Xe)for(var Is=0;Is<K;Is++)Vc=Md*Ln.get(Is,Na)+Ad*Ln.get(Is,Ni-1),Ln.set(Is,Ni-1,-Ad*Ln.get(Is,Na)+Md*Ln.get(Is,Ni-1)),Ln.set(Is,Na,Vc)}break;case 3:var Wc=Math.max(Math.abs(En[Co-1]),Math.abs(En[Co-2]),Math.abs(Qn[Co-2]),Math.abs(En[Ni]),Math.abs(Qn[Ni])),Qu=En[Co-1]/Wc,Dd=En[Co-2]/Wc,ph=Qn[Co-2]/Wc,Cd=En[Ni]/Wc,Nd=Qn[Ni]/Wc,lu=((Dd+Qu)*(Dd-Qu)+ph*ph)/2,gh=Qu*ph*(Qu*ph),Td=0;lu===0&&gh===0||(Td=gh/(lu+(Td=lu<0?0-Math.sqrt(lu*lu+gh):Math.sqrt(lu*lu+gh))));for(var fu=(Cd+Qu)*(Cd-Qu)+Td,Zu=Cd*Nd,mo=Ni;mo<Co-1;mo++){var sa=$t(fu,Zu);sa===0&&(sa=Number.MIN_VALUE);var La=fu/sa,Ba=Zu/sa;if(mo!==Ni&&(Qn[mo-1]=sa),fu=La*En[mo]+Ba*Qn[mo],Qn[mo]=La*Qn[mo]-Ba*En[mo],Zu=Ba*En[mo+1],En[mo+1]=La*En[mo+1],Je)for(var Ps=0;Ps<Pt;Ps++)sa=La*Zn.get(Ps,mo)+Ba*Zn.get(Ps,mo+1),Zn.set(Ps,mo+1,-Ba*Zn.get(Ps,mo)+La*Zn.get(Ps,mo+1)),Zn.set(Ps,mo,sa);if((sa=$t(fu,Zu))===0&&(sa=Number.MIN_VALUE),La=fu/sa,Ba=Zu/sa,En[mo]=sa,fu=La*Qn[mo]+Ba*En[mo+1],En[mo+1]=-Ba*Qn[mo]+La*En[mo+1],Zu=Ba*Qn[mo+1],Qn[mo+1]=La*Qn[mo+1],Xe&&mo<K-1)for(var Ds=0;Ds<K;Ds++)sa=La*Ln.get(Ds,mo)+Ba*Ln.get(Ds,mo+1),Ln.set(Ds,mo+1,-Ba*Ln.get(Ds,mo)+La*Ln.get(Ds,mo+1)),Ln.set(Ds,mo,sa)}Qn[Co-2]=fu;break;case 4:if(En[Ni]<=0&&(En[Ni]=En[Ni]<0?-En[Ni]:0,Je))for(var yh=0;yh<=Id;yh++)Zn.set(yh,Ni,-Zn.get(yh,Ni));for(;Ni<Id&&!(En[Ni]>=En[Ni+1]);){var Yc=En[Ni];if(En[Ni]=En[Ni+1],En[Ni+1]=Yc,Je&&Ni<Pt-1)for(var $u=0;$u<Pt;$u++)Yc=Zn.get($u,Ni+1),Zn.set($u,Ni+1,Zn.get($u,Ni)),Zn.set($u,Ni,Yc);if(Xe&&Ni<K-1)for(var qu=0;qu<K;qu++)Yc=Ln.get(qu,Ni+1),Ln.set(qu,Ni+1,Ln.get(qu,Ni)),Ln.set(qu,Ni,Yc);Ni++}Co--}}if(Ge){var Ld=Zn;Zn=Ln,Ln=Ld}this.m=K,this.n=Pt,this.s=En,this.U=Ln,this.V=Zn}var U,w,L;return U=Q,(w=[{key:"solve",value:function(It){for(var Nt=It,K=this.threshold,Pt=this.s.length,Qt=vn.zeros(Pt,Pt),qt=0;qt<Pt;qt++)Math.abs(this.s[qt])<=K?Qt.set(qt,qt,0):Qt.set(qt,qt,1/this.s[qt]);for(var xe=this.U,Ie=this.rightSingularVectors,Ye=Ie.mmul(Qt),Ne=Ie.rows,Xe=xe.rows,Je=vn.zeros(Ne,Xe),Ge=0;Ge<Ne;Ge++)for(var qe=0;qe<Xe;qe++){for(var yn=0,Pn=0;Pn<Pt;Pn++)yn+=Ye.get(Ge,Pn)*xe.get(qe,Pn);Je.set(Ge,qe,yn)}return Je.mmul(Nt)}},{key:"solveForDiagonal",value:function(It){return this.solve(vn.diag(It))}},{key:"inverse",value:function(){for(var It=this.V,Nt=this.threshold,K=It.rows,Pt=It.columns,Qt=new vn(K,this.s.length),qt=0;qt<K;qt++)for(var xe=0;xe<Pt;xe++)Math.abs(this.s[xe])>Nt&&Qt.set(qt,xe,It.get(qt,xe)/this.s[xe]);for(var Ie=this.U,Ye=Ie.rows,Ne=Ie.columns,Xe=new vn(K,Ye),Je=0;Je<K;Je++)for(var Ge=0;Ge<Ye;Ge++){for(var qe=0,yn=0;yn<Ne;yn++)qe+=Qt.get(Je,yn)*Ie.get(Ge,yn);Xe.set(Je,Ge,qe)}return Xe}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var It=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,Nt=0,K=this.s,Pt=0,Qt=K.length;Pt<Qt;Pt++)K[Pt]>It&&Nt++;return Nt}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return vn.diag(this.s)}}])&&Zt(U.prototype,w),L&&Zt(U,L),Q}();function he(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}var ce=function(){function Q(J){(function(It,Nt){if(!(It instanceof Nt))throw new TypeError("Cannot call a class as a function")})(this,Q),this.distances=J.distances,this.dimension=J.dimension||2,this.linkDistance=J.linkDistance}var U,w,L;return U=Q,(w=[{key:"layout",value:function(){var It=this.dimension,Nt=this.distances,K=this.linkDistance;try{var Pt=vn.mul(vn.pow(Nt,2),-.5),Qt=Pt.mean("row"),qt=Pt.mean("column"),xe=Pt.mean();Pt.add(xe).subRowVector(Qt).subColumnVector(qt);var Ie=new de(Pt),Ye=vn.sqrt(Ie.diagonalMatrix).diagonal();return Ie.leftSingularVectors.toJSON().map(function(qe){return vn.mul([qe],[Ye]).toJSON()[0].splice(0,It)})}catch(qe){for(var Ne=[],Xe=0;Xe<Nt.length;Xe++){var Je=Math.random()*K,Ge=Math.random()*K;Ne.push([Je,Ge])}return Ne}}}])&&he(U.prototype,w),L&&he(U,L),Q}();function Me(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}var ze=function(){function Q(J){(function(It,Nt){if(!(It instanceof Nt))throw new TypeError("Cannot call a class as a function")})(this,Q),this.disp=[],this.positions=J.positions,this.adjMatrix=J.adjMatrix,this.focusID=J.focusID,this.radii=J.radii,this.iterations=J.iterations||10,this.height=J.height||10,this.width=J.width||10,this.speed=J.speed||100,this.gravity=J.gravity||10,this.nodeSizeFunc=J.nodeSizeFunc,this.k=J.k||5,this.strictRadial=J.strictRadial,this.nodes=J.nodes}var U,w,L;return U=Q,(w=[{key:"layout",value:function(){var It=this.positions,Nt=[],K=this.iterations,Pt=this.width/10;this.maxDisplace=Pt,this.disp=Nt;for(var Qt=0;Qt<K;Qt++)It.forEach(function(qt,xe){Nt[xe]={x:0,y:0}}),this.getRepulsion(),this.updatePositions();return It}},{key:"getRepulsion",value:function(){var It=this,Nt=It.positions,K=It.nodes,Pt=It.disp,Qt=It.k,qt=It.radii||[];Nt.forEach(function(xe,Ie){Pt[Ie]={x:0,y:0},Nt.forEach(function(Ye,Ne){if(Ie!==Ne&&qt[Ie]===qt[Ne]){var Xe=xe[0]-Ye[0],Je=xe[1]-Ye[1],Ge=Math.sqrt(Xe*Xe+Je*Je);if(Ge===0){Ge=1;var qe=Ie>Ne?1:-1;Xe=.01*qe,Je=.01*qe}if(Ge<It.nodeSizeFunc(K[Ie])/2+It.nodeSizeFunc(K[Ne])/2){var yn=Qt*Qt/Ge;Pt[Ie].x+=Xe/Ge*yn,Pt[Ie].y+=Je/Ge*yn}}})})}},{key:"updatePositions",value:function(){var It=this.positions,Nt=this.disp,K=this.speed,Pt=this.strictRadial,Qt=this.focusID,qt=this.maxDisplace||this.width/10;Pt&&Nt.forEach(function(Ie,Ye){var Ne=It[Ye][0]-It[Qt][0],Xe=It[Ye][1]-It[Qt][1],Je=Math.sqrt(Ne*Ne+Xe*Xe),Ge=Xe/Je,qe=-Ne/Je,yn=Math.sqrt(Ie.x*Ie.x+Ie.y*Ie.y),Pn=Math.acos((Ge*Ie.x+qe*Ie.y)/yn);Pn>Math.PI/2&&(Pn-=Math.PI/2,Ge*=-1,qe*=-1);var En=Math.cos(Pn)*yn;Ie.x=Ge*En,Ie.y=qe*En});var xe=this.radii;It.forEach(function(Ie,Ye){if(Ye!==Qt){var Ne=Math.sqrt(Nt[Ye].x*Nt[Ye].x+Nt[Ye].y*Nt[Ye].y);if(Ne>0&&Ye!==Qt){var Xe=Math.min(qt*(K/800),Ne);if(Ie[0]+=Nt[Ye].x/Ne*Xe,Ie[1]+=Nt[Ye].y/Ne*Xe,Pt){var Je=Ie[0]-It[Qt][0],Ge=Ie[1]-It[Qt][1],qe=Math.sqrt(Je*Je+Ge*Ge);Je=Je/qe*xe[Ye],Ge=Ge/qe*xe[Ye],Ie[0]=It[Qt][0]+Je,Ie[1]=It[Qt][1]+Ge}}}})}}])&&Me(U.prototype,w),L&&Me(U,L),Q}();function Ve(Q){return(Ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function ke(Q){return function(U){if(Array.isArray(U))return tn(U)}(Q)||function(U){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(U))return Array.from(U)}(Q)||function(U,w){if(!!U){if(typeof U=="string")return tn(U,w);var L=Object.prototype.toString.call(U).slice(8,-1);if(L==="Object"&&U.constructor&&(L=U.constructor.name),L==="Map"||L==="Set")return Array.from(U);if(L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L))return tn(U,w)}}(Q)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function tn(Q,U){(U==null||U>Q.length)&&(U=Q.length);for(var w=0,L=new Array(U);w<U;w++)L[w]=Q[w];return L}function De(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function cn(Q,U){return(cn=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function hn(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=dn(Q);if(U){var J=dn(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return nn(this,w)}}function nn(Q,U){return!U||Ve(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function dn(Q){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}function Sn(Q,U){return Math.sqrt((Q[0]-U[0])*(Q[0]-U[0])+(Q[1]-U[1])*(Q[1]-U[1]))}var Pe=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&cn(Nt,K)})(It,Q);var U,w,L,J=hn(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).maxIteration=1e3,K.focusNode=null,K.unitRadius=null,K.linkDistance=50,K.preventOverlap=!1,K.strictRadial=!0,K.maxPreventOverlapIteration=200,K.sortStrength=10,K.nodes=[],K.edges=[],K.updateCfg(Nt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}},{key:"execute",value:function(){var K=this,Pt=K.nodes,Qt=K.edges||[];if(Pt&&Pt.length!==0){K.width||typeof window=="undefined"||(K.width=window.innerWidth),K.height||typeof window=="undefined"||(K.height=window.innerHeight),K.center||(K.center=[K.width/2,K.height/2]);var qt=K.center;if(Pt.length===1)return Pt[0].x=qt[0],Pt[0].y=qt[1],void(K.onLayoutEnd&&K.onLayoutEnd());var xe=K.linkDistance,Ie=null;if(b(K.focusNode)){for(var Ye=!1,Ne=0;Ne<Pt.length;Ne++)Pt[Ne].id===K.focusNode&&(Ie=Pt[Ne],K.focusNode=Ie,Ye=!0,Ne=Pt.length);Ye||(Ie=null)}else Ie=K.focusNode;Ie||(Ie=Pt[0],K.focusNode=Ie);var Xe,Je,Ge,qe=(Xe=Pt,Je=Ie.id,Ge=-1,Xe.forEach(function(Ii,Gi){Ii.id===Je&&(Ge=Gi)}),Ge);K.focusIndex=qe;var yn=s({nodes:Pt,edges:Qt},!1),Pn=n(yn),En=K.maxToFocus(Pn,qe);K.handleInfinity(Pn,qe,En+1),K.distances=Pn;var Ln=Pn[qe],Zn=K.width||500,Qn=K.height||500,qn=Zn-qt[0]>qt[0]?qt[0]:Zn-qt[0],fr=Qn-qt[1]>qt[1]?qt[1]:Qn-qt[1];qn===0&&(qn=Zn/2),fr===0&&(fr=Qn/2);var br=fr>qn?qn:fr,gr=Math.max.apply(Math,ke(Ln)),hr=[];Ln.forEach(function(Ii,Gi){K.unitRadius||(K.unitRadius=br/gr),hr[Gi]=Ii*K.unitRadius}),K.radii=hr;var Cr=K.eIdealDisMatrix();K.eIdealDistances=Cr;var dr=function(Ii){for(var Gi=Ii.length,Po=Ii[0].length,Fo=[],ka=0;ka<Gi;ka++){for(var pa=[],qa=0;qa<Po;qa++)Ii[ka][qa]!==0?pa.push(1/(Ii[ka][qa]*Ii[ka][qa])):pa.push(0);Fo.push(pa)}return Fo}(Cr);K.weights=dr;var Jr=new ce({linkDistance:xe,distances:Cr}).layout();Jr.forEach(function(Ii){j(Ii[0])&&(Ii[0]=Math.random()*xe),j(Ii[1])&&(Ii[1]=Math.random()*xe)}),K.positions=Jr,Jr.forEach(function(Ii,Gi){Pt[Gi].x=Ii[0]+qt[0],Pt[Gi].y=Ii[1]+qt[1]}),Jr.forEach(function(Ii){Ii[0]-=Jr[qe][0],Ii[1]-=Jr[qe][1]}),K.run();var qr,wi=K.preventOverlap,Tr=K.nodeSize,pi=K.strictRadial;if(wi){var Ei,ji=K.nodeSpacing;Ei=A(ji)?function(){return ji}:T(ji)?ji:function(){return 0},qr=Tr?l(Tr)?function(Ii){return(Tr[0]>Tr[1]?Tr[0]:Tr[1])+Ei(Ii)}:function(Ii){return Tr+Ei(Ii)}:function(Ii){return Ii.size?l(Ii.size)?(Ii.size[0]>Ii.size[1]?Ii.size[0]:Ii.size[1])+Ei(Ii):Ii.size+Ei(Ii):10+Ei(Ii)};var Ao={nodes:Pt,nodeSizeFunc:qr,adjMatrix:yn,positions:Jr,radii:hr,height:Qn,width:Zn,strictRadial:pi,focusID:qe,iterations:K.maxPreventOverlapIteration||200,k:Jr.length/4.5},go=new ze(Ao);Jr=go.layout()}return Jr.forEach(function(Ii,Gi){Pt[Gi].x=Ii[0]+qt[0],Pt[Gi].y=Ii[1]+qt[1]}),K.onLayoutEnd&&K.onLayoutEnd(),{nodes:Pt,edges:Qt}}K.onLayoutEnd&&K.onLayoutEnd()}},{key:"run",value:function(){for(var K=this.maxIteration,Pt=this.positions||[],Qt=this.weights||[],qt=this.eIdealDistances||[],xe=this.radii||[],Ie=0;Ie<=K;Ie++){var Ye=Ie/K;this.oneIteration(Ye,Pt,xe,qt,Qt)}}},{key:"oneIteration",value:function(K,Pt,Qt,qt,xe){var Ie=1-K,Ye=this.focusIndex;Pt.forEach(function(Ne,Xe){var Je=Sn(Ne,[0,0]),Ge=Je===0?0:1/Je;if(Xe!==Ye){var qe=0,yn=0,Pn=0;Pt.forEach(function(Ln,Zn){if(Xe!==Zn){var Qn=Sn(Ne,Ln),qn=Qn===0?0:1/Qn,fr=qt[Zn][Xe];Pn+=xe[Xe][Zn],qe+=xe[Xe][Zn]*(Ln[0]+fr*(Ne[0]-Ln[0])*qn),yn+=xe[Xe][Zn]*(Ln[1]+fr*(Ne[1]-Ln[1])*qn)}});var En=Qt[Xe]===0?0:1/Qt[Xe];Pn*=Ie,Pn+=K*En*En,qe*=Ie,qe+=K*En*Ne[0]*Ge,Ne[0]=qe/Pn,yn*=Ie,yn+=K*En*Ne[1]*Ge,Ne[1]=yn/Pn}})}},{key:"eIdealDisMatrix",value:function(){var K=this,Pt=K.nodes;if(!Pt)return[];var Qt=K.distances,qt=K.linkDistance,xe=K.radii||[],Ie=K.unitRadius||50,Ye=[];return Qt&&Qt.forEach(function(Ne,Xe){var Je=[];Ne.forEach(function(Ge,qe){if(Xe===qe)Je.push(0);else if(xe[Xe]===xe[qe])if(K.sortBy==="data")Je.push(Ge*(Math.abs(Xe-qe)*K.sortStrength)/(xe[Xe]/Ie));else if(K.sortBy){var yn=Pt[Xe][K.sortBy]||0,Pn=Pt[qe][K.sortBy]||0;b(yn)&&(yn=yn.charCodeAt(0)),b(Pn)&&(Pn=Pn.charCodeAt(0)),Je.push(Ge*(Math.abs(yn-Pn)*K.sortStrength)/(xe[Xe]/Ie))}else Je.push(Ge*qt/(xe[Xe]/Ie));else{var En=(qt+Ie)/2;Je.push(Ge*En)}}),Ye.push(Je)}),Ye}},{key:"handleInfinity",value:function(K,Pt,Qt){for(var qt=K.length,xe=0;xe<qt;xe++)if(K[Pt][xe]===1/0){K[Pt][xe]=Qt,K[xe][Pt]=Qt;for(var Ie=0;Ie<qt;Ie++)K[xe][Ie]!==1/0&&K[Pt][Ie]===1/0&&(K[Pt][Ie]=Qt+K[xe][Ie],K[Ie][Pt]=Qt+K[xe][Ie])}for(var Ye=0;Ye<qt;Ye++)if(Ye!==Pt){for(var Ne=0;Ne<qt;Ne++)if(K[Ye][Ne]===1/0){var Xe=Math.abs(K[Pt][Ye]-K[Pt][Ne]);Xe=Xe===0?1:Xe,K[Ye][Ne]=Xe}}}},{key:"maxToFocus",value:function(K,Pt){for(var Qt=0,qt=0;qt<K[Pt].length;qt++)K[Pt][qt]!==1/0&&(Qt=K[Pt][qt]>Qt?K[Pt][qt]:Qt);return Qt}},{key:"getType",value:function(){return"radial"}}])&&De(U.prototype,w),L&&De(U,L),It}(m);function le(Q){return(le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function Le(Q,U){return(Le=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function Be(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Ue(Q);if(U){var J=Ue(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return en(this,w)}}function en(Q,U){return!U||le(U)!=="object"&&typeof U!="function"?sn(Q):U}function sn(Q){if(Q===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Q}function Ue(Q){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}var ln=new Map,mn=function(U,w){if(ln.get(U)&&console.warn("The layout with the name ".concat(U," exists already, it will be overridden")),(J=w)!==null&&M(J)==="object"){var L=function(It){(function(Pt,Qt){if(typeof Qt!="function"&&Qt!==null)throw new TypeError("Super expression must either be null or a function");Pt.prototype=Object.create(Qt&&Qt.prototype,{constructor:{value:Pt,writable:!0,configurable:!0}}),Qt&&Le(Pt,Qt)})(K,It);var Nt=Be(K);function K(Pt){var Qt;(function(Ye,Ne){if(!(Ye instanceof Ne))throw new TypeError("Cannot call a class as a function")})(this,K);var qt=sn(Qt=Nt.call(this)),xe={},Ie=qt.getDefaultCfg();return Object.assign(xe,Ie,w,Pt),Object.keys(xe).forEach(function(Ye){var Ne=xe[Ye];qt[Ye]=Ne}),Qt}return K}(m);ln.set(U,L)}else ln.set(U,w);var J},Wn=function(U){return ln.has(U)?ln.get(U):null};function An(Q){return(An=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function In(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function lr(Q,U){return(lr=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function Hr(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Mr(Q);if(U){var J=Mr(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Gr(this,w)}}function Gr(Q,U){return!U||An(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function Mr(Q){return(Mr=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}var oi=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&lr(Nt,K)})(It,Q);var U,w,L,J=Hr(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).nodeSize=30,K.minNodeSpacing=10,K.preventOverlap=!1,K.equidistant=!1,K.startAngle=1.5*Math.PI,K.clockwise=!0,K.sortBy="degree",K.nodes=[],K.edges=[],K.width=300,K.height=300,K.onLayoutEnd=function(){},K.updateCfg(Nt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}},{key:"execute",value:function(){var K=this,Pt=K.nodes,Qt=K.edges,qt=Pt.length;if(qt!==0){K.width||typeof window=="undefined"||(K.width=window.innerWidth),K.height||typeof window=="undefined"||(K.height=window.innerHeight),K.center||(K.center=[K.width/2,K.height/2]);var xe=K.center;if(qt===1)return Pt[0].x=xe[0],Pt[0].y=xe[1],void(K.onLayoutEnd&&K.onLayoutEnd());var Ie,Ye=[];Ie=l(K.nodeSize)?Math.max(K.nodeSize[0],K.nodeSize[1]):K.nodeSize,Pt.forEach(function(br){Ye.push(br);var gr=Ie;l(br.size)?gr=Math.max(br.size[0],br.size[1]):A(br.size)&&(gr=br.size),Ie=Math.max(Ie,gr)}),K.clockwise=K.counterclockwise!==void 0?!K.counterclockwise:K.clockwise;var Ne={},Xe={};if(Ye.forEach(function(br,gr){Ne[br.id]=br,Xe[br.id]=gr}),!(K.sortBy!=="degree"&&b(K.sortBy)&&Ye[0][K.sortBy]!==void 0||(K.sortBy="degree",A(Pt[0].degree)))){var Je=y(Pt.length,Xe,Qt);Ye.forEach(function(br,gr){br.degree=Je[gr]})}Ye.sort(function(br,gr){return gr[K.sortBy]-br[K.sortBy]}),K.maxValueNode=Ye[0],K.maxLevelDiff=K.maxLevelDiff||K.maxValueNode[K.sortBy]/4;var Ge=[[]],qe=Ge[0];Ye.forEach(function(br){if(qe.length>0){var gr=Math.abs(qe[0][K.sortBy]-br[K.sortBy]);K.maxLevelDiff&&gr>=K.maxLevelDiff&&(qe=[],Ge.push(qe))}qe.push(br)});var yn=Ie+K.minNodeSpacing;if(!K.preventOverlap){var Pn=Ge.length>0&&Ge[0].length>1,En=(Math.min(K.width,K.height)/2-yn)/(Ge.length+(Pn?1:0));yn=Math.min(yn,En)}var Ln=0;if(Ge.forEach(function(br){var gr=K.sweep;gr===void 0&&(gr=2*Math.PI-2*Math.PI/br.length);var hr=br.dTheta=gr/Math.max(1,br.length-1);if(br.length>1&&K.preventOverlap){var Cr=Math.cos(hr)-Math.cos(0),dr=Math.sin(hr)-Math.sin(0),Jr=Math.sqrt(yn*yn/(Cr*Cr+dr*dr));Ln=Math.max(Jr,Ln)}br.r=Ln,Ln+=yn}),K.equidistant){for(var Zn=0,Qn=0,qn=0;qn<Ge.length;qn++){var fr=Ge[qn].r-Qn;Zn=Math.max(Zn,fr)}Qn=0,Ge.forEach(function(br,gr){gr===0&&(Qn=br.r),br.r=Qn,Qn+=Zn})}return Ge.forEach(function(br){var gr=br.dTheta,hr=br.r;br.forEach(function(Cr,dr){var Jr=K.startAngle+(K.clockwise?1:-1)*gr*dr;Cr.x=xe[0]+hr*Math.cos(Jr),Cr.y=xe[1]+hr*Math.sin(Jr)})}),K.onLayoutEnd&&K.onLayoutEnd(),{nodes:Pt,edges:Qt}}K.onLayoutEnd&&K.onLayoutEnd()}},{key:"getType",value:function(){return"concentric"}}])&&In(U.prototype,w),L&&In(U,L),It}(m);function ai(Q){return(ai=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function Zr(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function Xi(Q,U){return(Xi=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function $i(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=_o(Q);if(U){var J=_o(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Go(this,w)}}function Go(Q,U){return!U||ai(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function _o(Q){return(_o=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}var Uo=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&Xi(Nt,K)})(It,Q);var U,w,L,J=$i(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).center=[0,0],K.linkDistance=50,K.nodes=[],K.edges=[],K.onLayoutEnd=function(){},K.updateCfg(Nt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{center:[0,0],linkDistance:50}}},{key:"execute",value:function(){var K=this.nodes,Pt=this.edges,Qt=Pt===void 0?[]:Pt,qt=this.center;if(K&&K.length!==0){if(K.length===1)return K[0].x=qt[0],K[0].y=qt[1],void(this.onLayoutEnd&&this.onLayoutEnd());var xe=this.linkDistance,Ie=s({nodes:K,edges:Qt},!1),Ye=n(Ie);this.handleInfinity(Ye);var Ne,Xe,Je=(Ne=xe,Xe=[],Ye.forEach(function(qe){var yn=[];qe.forEach(function(Pn){yn.push(Pn*Ne)}),Xe.push(yn)}),Xe);this.scaledDistances=Je;var Ge=this.runMDS();return this.positions=Ge,Ge.forEach(function(qe,yn){K[yn].x=qe[0]+qt[0],K[yn].y=qe[1]+qt[1]}),this.onLayoutEnd&&this.onLayoutEnd(),{nodes:K,edges:Qt}}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"runMDS",value:function(){var K=this.scaledDistances,Pt=vn.mul(vn.pow(K,2),-.5),Qt=Pt.mean("row"),qt=Pt.mean("column"),xe=Pt.mean();Pt.add(xe).subRowVector(Qt).subColumnVector(qt);var Ie=new de(Pt),Ye=vn.sqrt(Ie.diagonalMatrix).diagonal();return Ie.leftSingularVectors.toJSON().map(function(Ne){return vn.mul([Ne],[Ye]).toJSON()[0].splice(0,2)})}},{key:"handleInfinity",value:function(K){var Pt=-999999;K.forEach(function(Qt){Qt.forEach(function(qt){qt!==1/0&&Pt<qt&&(Pt=qt)})}),K.forEach(function(Qt,qt){Qt.forEach(function(xe,Ie){xe===1/0&&(K[qt][Ie]=Pt)})})}},{key:"getType",value:function(){return"mds"}}])&&Zr(U.prototype,w),L&&Zr(U,L),It}(m);function ta(Q){return(ta=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function li(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function Oo(Q,U){return(Oo=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function qi(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Yo(Q);if(U){var J=Yo(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return zo(this,w)}}function zo(Q,U){return!U||ta(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function Yo(Q){return(Yo=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}var Xo=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&Oo(Nt,K)})(It,Q);var U,w,L,J=qi(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).maxIteration=1e3,K.gravity=10,K.speed=1,K.clustering=!1,K.clusterGravity=10,K.nodes=[],K.edges=[],K.width=300,K.height=300,K.nodeMap={},K.nodeIdxMap={},K.onLayoutEnd=function(){},K.updateCfg(Nt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){var K=this,Pt=this.nodes;if(Pt&&Pt.length!==0){this.width||typeof window=="undefined"||(this.width=window.innerWidth),this.height||typeof window=="undefined"||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var Qt=this.center;if(Pt.length===1)return Pt[0].x=Qt[0],Pt[0].y=Qt[1],void(this.onLayoutEnd&&this.onLayoutEnd());var qt={},xe={};return Pt.forEach(function(Ie,Ye){A(Ie.x)||(Ie.x=Math.random()*K.width),A(Ie.y)||(Ie.y=Math.random()*K.height),qt[Ie.id]=Ie,xe[Ie.id]=Ye}),this.nodeMap=qt,this.nodeIdxMap=xe,this.run()}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"run",value:function(){var K=this,Pt=K.nodes,Qt=K.edges,qt=K.maxIteration,xe=K.center,Ie=K.height*K.width,Ye=Math.sqrt(Ie)/10,Ne=Ie/(Pt.length+1),Xe=Math.sqrt(Ne),Je=K.gravity,Ge=K.speed,qe=K.clustering,yn={};if(qe)for(var Pn in Pt.forEach(function(Zn){if(yn[Zn.cluster]===void 0){var Qn={name:Zn.cluster,cx:0,cy:0,count:0};yn[Zn.cluster]=Qn}var qn=yn[Zn.cluster];A(Zn.x)&&(qn.cx+=Zn.x),A(Zn.y)&&(qn.cy+=Zn.y),qn.count++}),yn)yn[Pn].cx/=yn[Pn].count,yn[Pn].cy/=yn[Pn].count;for(var En=function(Qn){var qn=[];if(Pt.forEach(function(hr,Cr){qn[Cr]={x:0,y:0}}),K.applyCalculate(Pt,Qt,qn,Xe,Ne),qe){var fr=K.clusterGravity||Je;for(var br in Pt.forEach(function(hr,Cr){if(A(hr.x)&&A(hr.y)){var dr=yn[hr.cluster],Jr=Math.sqrt((hr.x-dr.cx)*(hr.x-dr.cx)+(hr.y-dr.cy)*(hr.y-dr.cy)),qr=Xe*fr;qn[Cr].x-=qr*(hr.x-dr.cx)/Jr,qn[Cr].y-=qr*(hr.y-dr.cy)/Jr}}),yn)yn[br].cx=0,yn[br].cy=0,yn[br].count=0;for(var gr in Pt.forEach(function(hr){var Cr=yn[hr.cluster];A(hr.x)&&(Cr.cx+=hr.x),A(hr.y)&&(Cr.cy+=hr.y),Cr.count++}),yn)yn[gr].cx/=yn[gr].count,yn[gr].cy/=yn[gr].count}Pt.forEach(function(hr,Cr){if(A(hr.x)&&A(hr.y)){var dr=.01*Xe*Je;qn[Cr].x-=dr*(hr.x-xe[0]),qn[Cr].y-=dr*(hr.y-xe[1])}}),Pt.forEach(function(hr,Cr){if(A(hr.x)&&A(hr.y)){var dr=Math.sqrt(qn[Cr].x*qn[Cr].x+qn[Cr].y*qn[Cr].y);if(dr>0){var Jr=Math.min(Ye*(Ge/800),dr);hr.x+=qn[Cr].x/dr*Jr,hr.y+=qn[Cr].y/dr*Jr}}})},Ln=0;Ln<qt;Ln++)En();return K.onLayoutEnd&&K.onLayoutEnd(),{nodes:Pt,edges:Qt}}},{key:"applyCalculate",value:function(K,Pt,Qt,qt,xe){this.calRepulsive(K,Qt,xe),this.calAttractive(Pt,Qt,qt)}},{key:"calRepulsive",value:function(K,Pt,Qt){K.forEach(function(qt,xe){Pt[xe]={x:0,y:0},K.forEach(function(Ie,Ye){if(xe!==Ye&&A(qt.x)&&A(Ie.x)&&A(qt.y)&&A(Ie.y)){var Ne=qt.x-Ie.x,Xe=qt.y-Ie.y,Je=Ne*Ne+Xe*Xe;if(Je===0){Je=1;var Ge=xe>Ye?1:-1;Ne=.01*Ge,Xe=.01*Ge}var qe=Qt/Je;Pt[xe].x+=Ne*qe,Pt[xe].y+=Xe*qe}})})}},{key:"calAttractive",value:function(K,Pt,Qt){var qt=this;K.forEach(function(xe){if(xe.source&&xe.target){var Ie=qt.nodeIdxMap[xe.source],Ye=qt.nodeIdxMap[xe.target];if(Ie!==Ye){var Ne=qt.nodeMap[xe.source],Xe=qt.nodeMap[xe.target];if(A(Xe.x)&&A(Ne.x)&&A(Xe.y)&&A(Ne.y)){var Je=Xe.x-Ne.x,Ge=Xe.y-Ne.y,qe=Math.sqrt(Je*Je+Ge*Ge),yn=qe*qe/Qt;Pt[Ye].x-=Je/qe*yn,Pt[Ye].y-=Ge/qe*yn,Pt[Ie].x+=Je/qe*yn,Pt[Ie].y+=Ge/qe*yn}}}})}},{key:"getType",value:function(){return"fruchterman"}}])&&li(U.prototype,w),L&&li(U,L),It}(m),ua=e(12),di=e.n(ua),ea=e(6),xi=e.n(ea),Rs=e(8),ki=e.n(Rs),ks=e(13),Mi=e.n(ks),hu=(e(30),e(217),e(9)),ui=e.n(hu),du=e(15),eo=e.n(du),vu=1;function na(){return vu++}var ra=function Q(U){xi()(this,Q)},ia=function(){function Q(w){xi()(this,Q),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=w}var U;return ki()(Q,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(L){return this.lookup[L]>-1}},{key:"create",value:function(L,J){this.lookup[L]=this.components.length;var It=new this.clazz(J||{});return this.components.push(It),this.entities.push(L),It}},{key:"remove",value:function(L){var J=this.lookup[L];J>-1&&J<this.components.length-1&&(this.components[J]=this.components[this.components.length-1],this.entities[J]=this.entities[this.entities.length-1],this.lookup[this.entities[J]]=J),this.components.pop(),this.entities.pop(),delete this.lookup[L]}},{key:"removeKeepSorted",value:function(L){var J=this.lookup[L];if(J>-1){var It=this.entities[J];if(J<this.components.length-1){for(var Nt=J+1;Nt<this.components.length;++Nt)this.components[Nt-1]=this.components[Nt];for(var K=J+1;K<this.entities.length;++K)this.entities[K-1]=this.entities[K],this.lookup[this.entities[K-1]]=K-1}this.components.pop(),this.entities.pop(),delete this.lookup[It]}}},{key:"moveItem",value:function(L,J){if(L!==J){for(var It=this.components[L],Nt=this.entities[L],K=L<J?1:-1,Pt=L;Pt!==J;Pt+=K){var Qt=Pt+K;this.components[Pt]=this.components[Qt],this.entities[Pt]=this.entities[Qt],this.lookup[this.entities[Pt]]=Pt}this.components[J]=It,this.entities[J]=Nt,this.lookup[Nt]=J}}},{key:"getEntity",value:function(L){return this.entities[L]}},{key:"getComponent",value:function(L){return this.components[L]}},{key:"getComponentByEntity",value:function(L){var J=this.lookup[L];return J>-1?this.components[J]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(L){for(var J=0,It=Object.keys(this.lookup);J<It.length;J++){var Nt=It[J],K=Number(Nt);if(this.lookup[K]===L)return K}return-1}},{key:"find",value:function(L){for(var J=0;J<this.getCount();J++){var It=this.getComponent(J);if(L(It,J))return It}return null}},{key:"findIndex",value:function(L){for(var J=0;J<this.getCount();J++)if(L(this.getComponent(J),J))return J;return-1}},{key:"forEach",value:function(L){for(var J=0,It=Object.keys(this.lookup);J<It.length;J++){var Nt=It[J],K=Number(Nt),Pt=this.lookup[K];L(K,this.getComponent(Pt))}}},{key:"forEachAsync",value:(U=eo()(ui.a.mark(function w(L){var J,It,Nt,K,Pt;return ui.a.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:J=0,It=Object.keys(this.lookup);case 1:if(!(J<It.length)){Qt.next=10;break}return Nt=It[J],K=Number(Nt),Pt=this.lookup[K],Qt.next=7,L(K,this.getComponent(Pt));case 7:J++,Qt.next=1;break;case 10:case"end":return Qt.stop()}},w,this)})),function(w){return U.apply(this,arguments)})},{key:"map",value:function(L){for(var J=[],It=0,Nt=Object.keys(this.lookup);It<Nt.length;It++){var K=Nt[It],Pt=Number(K),Qt=this.lookup[Pt];J.push(L(Pt,this.getComponent(Qt)))}return J}}]),Q}(),tc=e(60),ya=e.n(tc),_r=e(4),yr={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")},Xc=function Q(){xi()(this,Q),this.index=void 0},pu=function Q(){xi()(this,Q),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},ds=function(){function Q(){xi()(this,Q),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return ki()(Q,[{key:"read",value:function(w){return this.reads.find(function(L){return L.index===w.index})||this.reads.push(w),w}},{key:"sample",value:function(w){return this.read(w),w}},{key:"write",value:function(w,L){if(this.writes.find(function(Nt){return Nt.index===L.index}))return L;var J=w.getResourceNode(L);J.resource.version++,J.resource.imported&&(this.hasSideEffect=!0);var It=w.createResourceNode(J.resource);return w.getResourceNode(It).writer=this,this.writes.push(It),It}}]),Q}(),ec=e(27),Qo=e.n(ec),nc=e(28),Vo=e.n(nc),Aa=e(21),To=e.n(Aa);function vs(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=To()(Q);if(U){var J=To()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var Ns,ts,Ls,Ho,es,Bs=function(Q){Qo()(w,Q);var U=vs(w);function w(){var L;xi()(this,w);for(var J=arguments.length,It=new Array(J),Nt=0;Nt<J;Nt++)It[Nt]=arguments[Nt];return(L=U.call.apply(U,[this].concat(It))).version=0,L.refs=0,L.name=void 0,L.imported=void 0,L.priority=void 0,L.discardStart=!0,L.discardEnd=!1,L.descriptor=void 0,L.resource=void 0,L}return ki()(w,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){this.imported}}]),w}(function Q(){xi()(this,Q),this.first=void 0,this.last=void 0}),gu=function Q(){xi()(this,Q),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0};function Do(Q,U){var w;if(typeof Symbol=="undefined"||Q[Symbol.iterator]==null){if(Array.isArray(Q)||(w=function(Pt,Qt){if(!!Pt){if(typeof Pt=="string")return ps(Pt,Qt);var qt=Object.prototype.toString.call(Pt).slice(8,-1);if(qt==="Object"&&Pt.constructor&&(qt=Pt.constructor.name),qt==="Map"||qt==="Set")return Array.from(Pt);if(qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qt))return ps(Pt,Qt)}}(Q))||U&&Q&&typeof Q.length=="number"){w&&(Q=w);var L=0,J=function(){};return{s:J,n:function(){return L>=Q.length?{done:!0}:{done:!1,value:Q[L++]}},e:function(Qt){throw Qt},f:J}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var It,Nt=!0,K=!1;return{s:function(){w=Q[Symbol.iterator]()},n:function(){var Qt=w.next();return Nt=Qt.done,Qt},e:function(Qt){K=!0,It=Qt},f:function(){try{Nt||w.return==null||w.return()}finally{if(K)throw It}}}}function ps(Q,U){(U==null||U>Q.length)&&(U=Q.length);for(var w=0,L=new Array(U);w<U;w++)L[w]=Q[w];return L}var yu=(Ns=Object(_r.injectable)(),ts=Object(_r.inject)(yr.RenderEngine),Ns((Ho=function(){function Q(){xi()(this,Q),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],di()(this,"engine",es,this)}var U,w;return ki()(Q,[{key:"execute",value:(w=eo()(ui.a.mark(function L(J){return ui.a.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:return this.compile(),It.next=3,this.executePassNodes(J);case 3:case"end":return It.stop()}},L,this)})),function(L){return w.apply(this,arguments)})},{key:"tearDown",value:function(){this.frameGraphPasses.forEach(function(J){J.tearDown&&J.tearDown()}),this.reset()}},{key:"addPass",value:function(J,It,Nt,K){var Pt=new pu;Pt.execute=Nt,K&&(Pt.tearDown=K),Pt.name=J;var Qt=new ds;return Qt.name=J,this.passNodes.push(Qt),this.frameGraphPasses.push(Pt),It(this,Qt,Pt),Pt}},{key:"getPass",value:function(J){return this.frameGraphPasses.find(function(It){return It.name===J})}},{key:"compile",value:function(){var J,It=this,Nt=Do(this.passNodes);try{for(Nt.s();!(J=Nt.n()).done;){var K=J.value;K.refCount=K.writes.length+(K.hasSideEffect?1:0),K.reads.forEach(function(Tr){It.resourceNodes[Tr.index].readerCount++})}}catch(Tr){Nt.e(Tr)}finally{Nt.f()}var Pt,Qt=[],qt=Do(this.resourceNodes);try{for(qt.s();!(Pt=qt.n()).done;){var xe=Pt.value;xe.readerCount===0&&Qt.push(xe)}}catch(Tr){qt.e(Tr)}finally{qt.f()}for(;Qt.length;){var Ie=Qt.pop(),Ye=Ie&&Ie.writer;if(Ye&&--Ye.refCount==0){var Ne,Xe=Do(Ye.reads);try{for(Xe.s();!(Ne=Xe.n()).done;){var Je=Ne.value,Ge=this.resourceNodes[Je.index];--Ge.readerCount==0&&Qt.push(Ge)}}catch(Tr){Xe.e(Tr)}finally{Xe.f()}}}this.resourceNodes.forEach(function(Tr){Tr.resource.refs+=Tr.readerCount});var qe,yn=Do(this.passNodes);try{for(yn.s();!(qe=yn.n()).done;){var Pn=qe.value;if(Pn.refCount){var En,Ln=Do(Pn.reads);try{for(Ln.s();!(En=Ln.n()).done;){var Zn=En.value,Qn=this.resourceNodes[Zn.index].resource;Qn.first=Qn.first?Qn.first:Pn,Qn.last=Pn}}catch(Tr){Ln.e(Tr)}finally{Ln.f()}var qn,fr=Do(Pn.writes);try{for(fr.s();!(qn=fr.n()).done;){var br=qn.value,gr=this.resourceNodes[br.index].resource;gr.first=gr.first?gr.first:Pn,gr.last=Pn}}catch(Tr){fr.e(Tr)}finally{fr.f()}}}}catch(Tr){yn.e(Tr)}finally{yn.f()}for(var hr=0;hr<2;hr++){var Cr,dr=Do(this.resourceNodes);try{for(dr.s();!(Cr=dr.n()).done;){var Jr=Cr.value.resource;if(Jr.priority===hr&&Jr.refs){var qr=Jr.first,wi=Jr.last;qr&&wi&&(qr.devirtualize.push(Jr),wi.destroy.push(Jr))}}}catch(Tr){dr.e(Tr)}finally{dr.f()}}}},{key:"executePassNodes",value:(U=eo()(ui.a.mark(function L(J){var It,Nt,K,Pt,Qt,qt,xe,Ie,Ye,Ne,Xe,Je,Ge;return ui.a.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:It=Do(this.passNodes.entries()),qe.prev=1,It.s();case 3:if((Nt=It.n()).done){qe.next=18;break}if(K=ya()(Nt.value,2),Pt=K[0],!(Qt=K[1]).refCount){qe.next=16;break}qt=Do(Qt.devirtualize);try{for(qt.s();!(xe=qt.n()).done;)xe.value.preExecuteDevirtualize(this.engine)}catch(yn){qt.e(yn)}finally{qt.f()}Ie=Do(Qt.destroy);try{for(Ie.s();!(Ye=Ie.n()).done;)Ye.value.preExecuteDestroy(this.engine)}catch(yn){Ie.e(yn)}finally{Ie.f()}return qe.next=12,this.frameGraphPasses[Pt].execute(this,this.frameGraphPasses[Pt],J);case 12:Ne=Do(Qt.devirtualize);try{for(Ne.s();!(Xe=Ne.n()).done;)Xe.value.postExecuteDevirtualize(this.engine)}catch(yn){Ne.e(yn)}finally{Ne.f()}Je=Do(Qt.destroy);try{for(Je.s();!(Ge=Je.n()).done;)Ge.value.postExecuteDestroy(this.engine)}catch(yn){Je.e(yn)}finally{Je.f()}case 16:qe.next=3;break;case 18:qe.next=23;break;case 20:qe.prev=20,qe.t0=qe.catch(1),It.e(qe.t0);case 23:return qe.prev=23,It.f(),qe.finish(23);case 26:this.reset();case 27:case"end":return qe.stop()}},L,this,[[1,20,23,26]])})),function(L){return U.apply(this,arguments)})},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(J){return this.resourceNodes[J.index]}},{key:"createResourceNode",value:function(J){var It=new gu;It.resource=J,It.version=J.version,this.resourceNodes.push(It);var Nt=new Xc;return Nt.index=this.resourceNodes.length-1,Nt}},{key:"createTexture",value:function(J,It,Nt){var K=new Bs;return K.name=It,K.descriptor=Nt,this.createResourceNode(K)}},{key:"createRenderTarget",value:function(J,It,Nt){var K=new Bs;return K.name=It,K.descriptor=Nt,this.createResourceNode(K)}},{key:"present",value:function(J){this.addPass("Present",function(It,Nt){Nt.read(J),Nt.hasSideEffect=!0},eo()(ui.a.mark(function It(){return ui.a.wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:case"end":return Nt.stop()}},It)})))}}]),Q}(),es=Mi()(Ho.prototype,"engine",[ts],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ls=Ho))||Ls),Fs=e(3),mr=e.n(Fs),Gs=e(25),Eo=e.n(Gs);function ma(Q,U){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);U&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function mu(Q){for(var U=1;U<arguments.length;U++){var w=arguments[U]!=null?arguments[U]:{};U%2?ma(Object(w),!0).forEach(function(L){mr()(Q,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(w)):ma(Object(w)).forEach(function(L){Object.defineProperty(Q,L,Object.getOwnPropertyDescriptor(w,L))})}return Q}function bu(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=To()(Q);if(U){var J=To()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var Jn,fe,Ca,_s,ns,ba,ca,gs,Fa,ys=function(Q){Qo()(w,Q);var U=bu(w);function w(L){var J;return xi()(this,w),(J=U.call(this,L)).dirty=!0,J.attributes=[],J.indices=void 0,J.indicesBuffer=void 0,J.vertexCount=void 0,J.maxInstancedCount=void 0,J.aabb=void 0,Object.assign(Eo()(J),L),J}return ki()(w,[{key:"setAttribute",value:function(J,It,Nt,K){var Pt=this.attributes.find(function(Qt){return Qt.name===J});return Pt?(Pt.data=It,Pt.dirty=!0):this.attributes.push(mu(mu({dirty:!0,name:J,data:It},Nt),{},{bufferGetter:K})),this.dirty=!0,this}},{key:"setIndex",value:function(J){return this.indices=new Uint32Array(J.buffer?J.buffer:J),this.dirty=!0,this}}]),w}(ra),jn=(e(226),e(2)),Us=function(){function Q(U,w){xi()(this,Q),this.center=void 0,this.halfExtents=void 0,this.min=jn.e.create(),this.max=jn.e.create(),this.update(U,w)}return ki()(Q,[{key:"update",value:function(w,L){this.center=w||jn.e.create(),this.halfExtents=L||jn.e.fromValues(.5,.5,.5),this.min=jn.e.sub(this.min,this.center,this.halfExtents),this.max=jn.e.add(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(w,L){jn.e.add(this.center,L,w),jn.e.scale(this.center,this.center,.5),jn.e.sub(this.halfExtents,L,w),jn.e.scale(this.halfExtents,this.halfExtents,.5),jn.e.copy(this.min,w),jn.e.copy(this.max,L)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(w){var L=this.center,J=L[0],It=L[1],Nt=L[2],K=this.halfExtents,Pt=K[0],Qt=K[1],qt=K[2],xe=J-Pt,Ie=J+Pt,Ye=It-Qt,Ne=It+Qt,Xe=Nt-qt,Je=Nt+qt,Ge=w.center,qe=Ge[0],yn=Ge[1],Pn=Ge[2],En=w.halfExtents,Ln=En[0],Zn=En[1],Qn=En[2],qn=qe-Ln,fr=qe+Ln,br=yn-Zn,gr=yn+Zn,hr=Pn-Qn,Cr=Pn+Qn;qn<xe&&(xe=qn),fr>Ie&&(Ie=fr),br<Ye&&(Ye=br),gr>Ne&&(Ne=gr),hr<Xe&&(Xe=hr),Cr>Je&&(Je=Cr),L[0]=.5*(xe+Ie),L[1]=.5*(Ye+Ne),L[2]=.5*(Xe+Je),K[0]=.5*(Ie-xe),K[1]=.5*(Ne-Ye),K[2]=.5*(Je-Xe),this.min[0]=xe,this.min[1]=Ye,this.min[2]=Xe,this.max[0]=Ie,this.max[1]=Ne,this.max[2]=Je}},{key:"intersects",value:function(w){var L=this.getMax(),J=this.getMin(),It=w.getMax(),Nt=w.getMin();return J[0]<=It[0]&&L[0]>=Nt[0]&&J[1]<=It[1]&&L[1]>=Nt[1]&&J[2]<=It[2]&&L[2]>=Nt[2]}},{key:"containsPoint",value:function(w){var L=this.getMin(),J=this.getMax();return!(w[0]<L[0]||w[0]>J[0]||w[1]<L[1]||w[1]>J[1]||w[2]<L[2]||w[2]>J[2])}},{key:"getNegativeFarPoint",value:function(w){return w.pnVertexFlag===273?jn.e.copy(jn.e.create(),this.min):w.pnVertexFlag===272?jn.e.fromValues(this.min[0],this.min[1],this.max[2]):w.pnVertexFlag===257?jn.e.fromValues(this.min[0],this.max[1],this.min[2]):w.pnVertexFlag===256?jn.e.fromValues(this.min[0],this.max[1],this.max[2]):w.pnVertexFlag===17?jn.e.fromValues(this.max[0],this.min[1],this.min[2]):w.pnVertexFlag===16?jn.e.fromValues(this.max[0],this.min[1],this.max[2]):w.pnVertexFlag===1?jn.e.fromValues(this.max[0],this.max[1],this.min[2]):jn.e.fromValues(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(w){return w.pnVertexFlag===273?jn.e.copy(jn.e.create(),this.max):w.pnVertexFlag===272?jn.e.fromValues(this.max[0],this.max[1],this.min[2]):w.pnVertexFlag===257?jn.e.fromValues(this.max[0],this.min[1],this.max[2]):w.pnVertexFlag===256?jn.e.fromValues(this.max[0],this.min[1],this.min[2]):w.pnVertexFlag===17?jn.e.fromValues(this.min[0],this.max[1],this.max[2]):w.pnVertexFlag===16?jn.e.fromValues(this.min[0],this.max[1],this.min[2]):w.pnVertexFlag===1?jn.e.fromValues(this.min[0],this.min[1],this.max[2]):jn.e.fromValues(this.min[0],this.min[1],this.min[2])}}]),Q}();function Wo(Q){for(var U=new Us,w=jn.e.fromValues(Q[0],Q[1],Q[2]),L=jn.e.fromValues(Q[0],Q[1],Q[2]),J=3;J<Q.length;){var It=Q[J++],Nt=Q[J++],K=Q[J++];It<w[0]&&(w[0]=It),Nt<w[1]&&(w[1]=Nt),K<w[2]&&(w[2]=K),It>L[0]&&(L[0]=It),Nt>L[1]&&(L[1]=Nt),K>L[2]&&(L[2]=K)}return U.setMinMax(w,L),U}(fe=Jn||(Jn={}))[fe.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",fe[fe.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",fe[fe.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",fe[fe.POINTS=0]="POINTS",fe[fe.LINES=1]="LINES",fe[fe.LINE_LOOP=2]="LINE_LOOP",fe[fe.LINE_STRIP=3]="LINE_STRIP",fe[fe.TRIANGLES=4]="TRIANGLES",fe[fe.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",fe[fe.TRIANGLE_FAN=6]="TRIANGLE_FAN",fe[fe.ZERO=0]="ZERO",fe[fe.ONE=1]="ONE",fe[fe.SRC_COLOR=768]="SRC_COLOR",fe[fe.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",fe[fe.SRC_ALPHA=770]="SRC_ALPHA",fe[fe.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",fe[fe.DST_ALPHA=772]="DST_ALPHA",fe[fe.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",fe[fe.DST_COLOR=774]="DST_COLOR",fe[fe.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",fe[fe.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",fe[fe.FUNC_ADD=32774]="FUNC_ADD",fe[fe.BLEND_EQUATION=32777]="BLEND_EQUATION",fe[fe.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",fe[fe.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",fe[fe.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",fe[fe.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",fe[fe.MAX_EXT=32776]="MAX_EXT",fe[fe.MIN_EXT=32775]="MIN_EXT",fe[fe.BLEND_DST_RGB=32968]="BLEND_DST_RGB",fe[fe.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",fe[fe.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",fe[fe.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",fe[fe.CONSTANT_COLOR=32769]="CONSTANT_COLOR",fe[fe.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",fe[fe.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",fe[fe.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",fe[fe.BLEND_COLOR=32773]="BLEND_COLOR",fe[fe.ARRAY_BUFFER=34962]="ARRAY_BUFFER",fe[fe.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",fe[fe.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",fe[fe.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",fe[fe.STREAM_DRAW=35040]="STREAM_DRAW",fe[fe.STATIC_DRAW=35044]="STATIC_DRAW",fe[fe.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",fe[fe.BUFFER_SIZE=34660]="BUFFER_SIZE",fe[fe.BUFFER_USAGE=34661]="BUFFER_USAGE",fe[fe.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",fe[fe.FRONT=1028]="FRONT",fe[fe.BACK=1029]="BACK",fe[fe.FRONT_AND_BACK=1032]="FRONT_AND_BACK",fe[fe.CULL_FACE=2884]="CULL_FACE",fe[fe.BLEND=3042]="BLEND",fe[fe.DITHER=3024]="DITHER",fe[fe.STENCIL_TEST=2960]="STENCIL_TEST",fe[fe.DEPTH_TEST=2929]="DEPTH_TEST",fe[fe.SCISSOR_TEST=3089]="SCISSOR_TEST",fe[fe.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",fe[fe.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",fe[fe.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",fe[fe.NO_ERROR=0]="NO_ERROR",fe[fe.INVALID_ENUM=1280]="INVALID_ENUM",fe[fe.INVALID_VALUE=1281]="INVALID_VALUE",fe[fe.INVALID_OPERATION=1282]="INVALID_OPERATION",fe[fe.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",fe[fe.CW=2304]="CW",fe[fe.CCW=2305]="CCW",fe[fe.LINE_WIDTH=2849]="LINE_WIDTH",fe[fe.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",fe[fe.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",fe[fe.CULL_FACE_MODE=2885]="CULL_FACE_MODE",fe[fe.FRONT_FACE=2886]="FRONT_FACE",fe[fe.DEPTH_RANGE=2928]="DEPTH_RANGE",fe[fe.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",fe[fe.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",fe[fe.DEPTH_FUNC=2932]="DEPTH_FUNC",fe[fe.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",fe[fe.STENCIL_FUNC=2962]="STENCIL_FUNC",fe[fe.STENCIL_FAIL=2964]="STENCIL_FAIL",fe[fe.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",fe[fe.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",fe[fe.STENCIL_REF=2967]="STENCIL_REF",fe[fe.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",fe[fe.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",fe[fe.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",fe[fe.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",fe[fe.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",fe[fe.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",fe[fe.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",fe[fe.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",fe[fe.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",fe[fe.VIEWPORT=2978]="VIEWPORT",fe[fe.SCISSOR_BOX=3088]="SCISSOR_BOX",fe[fe.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",fe[fe.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",fe[fe.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",fe[fe.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",fe[fe.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",fe[fe.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",fe[fe.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",fe[fe.RED_BITS=3410]="RED_BITS",fe[fe.GREEN_BITS=3411]="GREEN_BITS",fe[fe.BLUE_BITS=3412]="BLUE_BITS",fe[fe.ALPHA_BITS=3413]="ALPHA_BITS",fe[fe.DEPTH_BITS=3414]="DEPTH_BITS",fe[fe.STENCIL_BITS=3415]="STENCIL_BITS",fe[fe.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",fe[fe.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",fe[fe.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",fe[fe.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",fe[fe.SAMPLES=32937]="SAMPLES",fe[fe.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",fe[fe.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",fe[fe.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",fe[fe.DONT_CARE=4352]="DONT_CARE",fe[fe.FASTEST=4353]="FASTEST",fe[fe.NICEST=4354]="NICEST",fe[fe.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",fe[fe.BYTE=5120]="BYTE",fe[fe.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",fe[fe.SHORT=5122]="SHORT",fe[fe.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",fe[fe.INT=5124]="INT",fe[fe.UNSIGNED_INT=5125]="UNSIGNED_INT",fe[fe.FLOAT=5126]="FLOAT",fe[fe.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",fe[fe.ALPHA=6406]="ALPHA",fe[fe.RGB=6407]="RGB",fe[fe.RGBA=6408]="RGBA",fe[fe.LUMINANCE=6409]="LUMINANCE",fe[fe.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",fe[fe.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",fe[fe.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",fe[fe.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",fe[fe.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",fe[fe.VERTEX_SHADER=35633]="VERTEX_SHADER",fe[fe.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",fe[fe.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",fe[fe.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",fe[fe.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",fe[fe.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",fe[fe.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",fe[fe.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",fe[fe.SHADER_TYPE=35663]="SHADER_TYPE",fe[fe.DELETE_STATUS=35712]="DELETE_STATUS",fe[fe.LINK_STATUS=35714]="LINK_STATUS",fe[fe.VALIDATE_STATUS=35715]="VALIDATE_STATUS",fe[fe.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",fe[fe.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",fe[fe.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",fe[fe.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",fe[fe.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",fe[fe.NEVER=512]="NEVER",fe[fe.LESS=513]="LESS",fe[fe.EQUAL=514]="EQUAL",fe[fe.LEQUAL=515]="LEQUAL",fe[fe.GREATER=516]="GREATER",fe[fe.NOTEQUAL=517]="NOTEQUAL",fe[fe.GEQUAL=518]="GEQUAL",fe[fe.ALWAYS=519]="ALWAYS",fe[fe.KEEP=7680]="KEEP",fe[fe.REPLACE=7681]="REPLACE",fe[fe.INCR=7682]="INCR",fe[fe.DECR=7683]="DECR",fe[fe.INVERT=5386]="INVERT",fe[fe.INCR_WRAP=34055]="INCR_WRAP",fe[fe.DECR_WRAP=34056]="DECR_WRAP",fe[fe.VENDOR=7936]="VENDOR",fe[fe.RENDERER=7937]="RENDERER",fe[fe.VERSION=7938]="VERSION",fe[fe.NEAREST=9728]="NEAREST",fe[fe.LINEAR=9729]="LINEAR",fe[fe.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",fe[fe.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",fe[fe.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",fe[fe.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",fe[fe.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",fe[fe.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",fe[fe.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",fe[fe.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",fe[fe.TEXTURE_2D=3553]="TEXTURE_2D",fe[fe.TEXTURE=5890]="TEXTURE",fe[fe.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",fe[fe.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",fe[fe.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",fe[fe.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",fe[fe.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",fe[fe.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",fe[fe.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",fe[fe.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",fe[fe.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",fe[fe.TEXTURE0=33984]="TEXTURE0",fe[fe.TEXTURE1=33985]="TEXTURE1",fe[fe.TEXTURE2=33986]="TEXTURE2",fe[fe.TEXTURE3=33987]="TEXTURE3",fe[fe.TEXTURE4=33988]="TEXTURE4",fe[fe.TEXTURE5=33989]="TEXTURE5",fe[fe.TEXTURE6=33990]="TEXTURE6",fe[fe.TEXTURE7=33991]="TEXTURE7",fe[fe.TEXTURE8=33992]="TEXTURE8",fe[fe.TEXTURE9=33993]="TEXTURE9",fe[fe.TEXTURE10=33994]="TEXTURE10",fe[fe.TEXTURE11=33995]="TEXTURE11",fe[fe.TEXTURE12=33996]="TEXTURE12",fe[fe.TEXTURE13=33997]="TEXTURE13",fe[fe.TEXTURE14=33998]="TEXTURE14",fe[fe.TEXTURE15=33999]="TEXTURE15",fe[fe.TEXTURE16=34e3]="TEXTURE16",fe[fe.TEXTURE17=34001]="TEXTURE17",fe[fe.TEXTURE18=34002]="TEXTURE18",fe[fe.TEXTURE19=34003]="TEXTURE19",fe[fe.TEXTURE20=34004]="TEXTURE20",fe[fe.TEXTURE21=34005]="TEXTURE21",fe[fe.TEXTURE22=34006]="TEXTURE22",fe[fe.TEXTURE23=34007]="TEXTURE23",fe[fe.TEXTURE24=34008]="TEXTURE24",fe[fe.TEXTURE25=34009]="TEXTURE25",fe[fe.TEXTURE26=34010]="TEXTURE26",fe[fe.TEXTURE27=34011]="TEXTURE27",fe[fe.TEXTURE28=34012]="TEXTURE28",fe[fe.TEXTURE29=34013]="TEXTURE29",fe[fe.TEXTURE30=34014]="TEXTURE30",fe[fe.TEXTURE31=34015]="TEXTURE31",fe[fe.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",fe[fe.REPEAT=10497]="REPEAT",fe[fe.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",fe[fe.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",fe[fe.FLOAT_VEC2=35664]="FLOAT_VEC2",fe[fe.FLOAT_VEC3=35665]="FLOAT_VEC3",fe[fe.FLOAT_VEC4=35666]="FLOAT_VEC4",fe[fe.INT_VEC2=35667]="INT_VEC2",fe[fe.INT_VEC3=35668]="INT_VEC3",fe[fe.INT_VEC4=35669]="INT_VEC4",fe[fe.BOOL=35670]="BOOL",fe[fe.BOOL_VEC2=35671]="BOOL_VEC2",fe[fe.BOOL_VEC3=35672]="BOOL_VEC3",fe[fe.BOOL_VEC4=35673]="BOOL_VEC4",fe[fe.FLOAT_MAT2=35674]="FLOAT_MAT2",fe[fe.FLOAT_MAT3=35675]="FLOAT_MAT3",fe[fe.FLOAT_MAT4=35676]="FLOAT_MAT4",fe[fe.SAMPLER_2D=35678]="SAMPLER_2D",fe[fe.SAMPLER_CUBE=35680]="SAMPLER_CUBE",fe[fe.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",fe[fe.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",fe[fe.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",fe[fe.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",fe[fe.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",fe[fe.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",fe[fe.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",fe[fe.COMPILE_STATUS=35713]="COMPILE_STATUS",fe[fe.LOW_FLOAT=36336]="LOW_FLOAT",fe[fe.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",fe[fe.HIGH_FLOAT=36338]="HIGH_FLOAT",fe[fe.LOW_INT=36339]="LOW_INT",fe[fe.MEDIUM_INT=36340]="MEDIUM_INT",fe[fe.HIGH_INT=36341]="HIGH_INT",fe[fe.FRAMEBUFFER=36160]="FRAMEBUFFER",fe[fe.RENDERBUFFER=36161]="RENDERBUFFER",fe[fe.RGBA4=32854]="RGBA4",fe[fe.RGB5_A1=32855]="RGB5_A1",fe[fe.RGB565=36194]="RGB565",fe[fe.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",fe[fe.STENCIL_INDEX=6401]="STENCIL_INDEX",fe[fe.STENCIL_INDEX8=36168]="STENCIL_INDEX8",fe[fe.DEPTH_STENCIL=34041]="DEPTH_STENCIL",fe[fe.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",fe[fe.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",fe[fe.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",fe[fe.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",fe[fe.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",fe[fe.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",fe[fe.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",fe[fe.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",fe[fe.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",fe[fe.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",fe[fe.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",fe[fe.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",fe[fe.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",fe[fe.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",fe[fe.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",fe[fe.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",fe[fe.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",fe[fe.NONE=0]="NONE",fe[fe.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",fe[fe.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",fe[fe.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",fe[fe.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",fe[fe.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",fe[fe.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",fe[fe.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",fe[fe.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",fe[fe.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",fe[fe.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",fe[fe.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",fe[fe.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",fe[fe.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",fe[fe.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",fe[fe.COPY_SRC=1]="COPY_SRC",fe[fe.COPY_DST=2]="COPY_DST",fe[fe.SAMPLED=4]="SAMPLED",fe[fe.STORAGE=8]="STORAGE",fe[fe.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT";var rc=(Ca=Object(_r.injectable)(),_s=Object(_r.inject)(yr.GeometryComponentManager),ns=Object(_r.inject)(yr.RenderEngine),Ca((ca=function(){function Q(){xi()(this,Q),di()(this,"geometry",gs,this),di()(this,"engine",Fa,this)}var U;return ki()(Q,[{key:"execute",value:(U=eo()(ui.a.mark(function w(){var L=this;return ui.a.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:this.geometry.forEach(function(It,Nt){Nt.dirty&&(Nt.attributes.forEach(function(K){var Pt;K.dirty&&K.data&&(K.buffer?(Pt=K.buffer)===null||Pt===void 0||Pt.subData({data:K.data,offset:0}):K.buffer=L.engine.createBuffer({data:K.data,type:Jn.FLOAT}),K.dirty=!1)}),Nt.indices&&(Nt.indicesBuffer?Nt.indicesBuffer.subData({data:Nt.indices,offset:0}):Nt.indicesBuffer=L.engine.createElements({data:Nt.indices,count:Nt.indices.length,type:Jn.UNSIGNED_INT,usage:Jn.STATIC_DRAW})),Nt.dirty=!1)});case 1:case"end":return J.stop()}},w,this)})),function(){return U.apply(this,arguments)})},{key:"tearDown",value:function(){this.geometry.forEach(function(L,J){J.indicesBuffer&&J.indicesBuffer.destroy(),J.attributes.forEach(function(It){It.buffer&&It.buffer.destroy()})}),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{vertexCount:3},J=L.vertexCount,It=na();return this.geometry.create(It,{vertexCount:J})}},{key:"createInstancedBufferGeometry",value:function(L){var J=L.maxInstancedCount,It=L.vertexCount,Nt=na();return this.geometry.create(Nt,{maxInstancedCount:J,vertexCount:It})}},{key:"createBox",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},J=L.widthSegments||1,It=L.heightSegments||1,Nt=L.depthSegments||1,K=L.halfExtents||jn.e.fromValues(.5,.5,.5),Pt=ya()(K,3),Qt=Pt[0],qt=Pt[1],xe=Pt[2],Ie=[jn.e.fromValues(-Qt,-qt,xe),jn.e.fromValues(Qt,-qt,xe),jn.e.fromValues(Qt,qt,xe),jn.e.fromValues(-Qt,qt,xe),jn.e.fromValues(Qt,-qt,-xe),jn.e.fromValues(-Qt,-qt,-xe),jn.e.fromValues(-Qt,qt,-xe),jn.e.fromValues(Qt,qt,-xe)],Ye=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],Ne=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],Xe={FRONT:0,BACK:1,TOP:2,BOTTOM:3,RIGHT:4,LEFT:5},Je=[],Ge=[],qe=[],yn=[],Pn=[],En=0,Ln=function(fr,br,gr){var hr,Cr,dr,Jr;for(dr=0;dr<=br;dr++)for(Jr=0;Jr<=gr;Jr++){var qr=jn.e.create(),wi=jn.e.create(),Tr=jn.e.create(),pi=jn.e.create();jn.e.lerp(qr,Ie[Ye[fr][0]],Ie[Ye[fr][1]],dr/br),jn.e.lerp(wi,Ie[Ye[fr][0]],Ie[Ye[fr][2]],Jr/gr),jn.e.sub(Tr,wi,Ie[Ye[fr][0]]),jn.e.add(pi,qr,Tr),hr=dr/br,Cr=Jr/gr,Je.push(pi[0],pi[1],pi[2]),Ge.push(Ne[fr][0],Ne[fr][1],Ne[fr][2]),qe.push(hr,Cr),hr=.875*(hr/=3)+4/64,Cr=.875*(Cr/=3)+4/64,hr+=fr%3/3,Cr+=Math.floor(fr/3)/3,yn.push(hr,Cr),dr<br&&Jr<gr&&(Pn.push(En+gr+1,En+1,En),Pn.push(En+gr+1,En+gr+2,En+1)),En++}};Ln(Xe.FRONT,J,It),Ln(Xe.BACK,J,It),Ln(Xe.TOP,J,Nt),Ln(Xe.BOTTOM,J,Nt),Ln(Xe.RIGHT,Nt,It),Ln(Xe.LEFT,Nt,It);var Zn=Wo(Je),Qn=na();return this.geometry.create(Qn,{indices:Uint32Array.from(Pn),aabb:Zn,attributes:[{dirty:!0,name:"position",data:Float32Array.from(Je),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]}]})}}]),Q}(),gs=Mi()(ca.prototype,"geometry",[_s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fa=Mi()(ca.prototype,"engine",[ns],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ba=ca))||ba);e(227);function ic(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=To()(Q);if(U){var J=To()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var ms,oa,fo,bs,zs,Ga,_a,xu,Ou,la=function(Q){Qo()(w,Q);var U=ic(w);function w(L){var J;return xi()(this,w),(J=U.call(this,L)).vertexShaderGLSL=void 0,J.fragmentShaderGLSL=void 0,J.dirty=!0,J.uniforms=[],J.cull={enable:!0,face:Jn.BACK},J.depth={enable:!0},J.blend=void 0,Object.assign(Eo()(J),L),J}return ki()(w,[{key:"setCull",value:function(J){return this.cull=J,this}},{key:"setDepth",value:function(J){return this.depth=J,this}},{key:"setBlend",value:function(J){return this.blend=J,this}},{key:"setUniform",value:function(J,It){var Nt=this;if(typeof J!="string")return Object.keys(J).forEach(function(Pt){return Nt.setUniform(Pt,J[Pt])}),this;var K=this.uniforms.find(function(Pt){return Pt.name===J});return K?(K.dirty=!0,K.data=It):this.uniforms.push({name:J,dirty:!0,data:It}),this.dirty=!0,this}}]),w}(ra);function rs(Q,U){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);U&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function Ta(Q){for(var U=1;U<arguments.length;U++){var w=arguments[U]!=null?arguments[U]:{};U%2?rs(Object(w),!0).forEach(function(L){mr()(Q,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(w)):rs(Object(w)).forEach(function(L){Object.defineProperty(Q,L,Object.getOwnPropertyDescriptor(w,L))})}return Q}var Vs,kt=(ms=Object(_r.injectable)(),oa=Object(_r.inject)(yr.MaterialComponentManager),fo=Object(_r.inject)(yr.RenderEngine),bs=Object(_r.inject)(yr.ShaderModuleService),ms((Ga=function(){function Q(){xi()(this,Q),di()(this,"material",_a,this),di()(this,"engine",xu,this),di()(this,"shaderModule",Ou,this)}var U;return ki()(Q,[{key:"execute",value:(U=eo()(ui.a.mark(function w(){return ui.a.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,Promise.all(this.material.map(function(){var J=eo()(ui.a.mark(function It(Nt,K){return ui.a.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:case"end":return Pt.stop()}},It)}));return function(It,Nt){return J.apply(this,arguments)}}()));case 2:case"end":return L.stop()}},w,this)})),function(){return U.apply(this,arguments)})},{key:"tearDown",value:function(){this.material.clear()}},{key:"createBasicMaterial",value:function(){var L=na();return this.material.create(L,{vertexShaderGLSL:this.engine.supportWebGPU?`layout(set = 0, binding = 0) uniform Uniforms {
  vec4 color;
  mat4 projectionMatrix;
  mat4 modelViewMatrix;
} uniforms;

layout(location = 0) in vec3 position;
// layout(location = 1) in vec3 barycentric;

layout(location = 0) out vec4 fragColor;
// layout(location = 1) out vec3 v_Barycentric;

void main() {
  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);
  fragColor = uniforms.color;
  // v_Barycentric = barycentric;
}`:`attribute vec3 position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform vec4 color;

varying vec4 fragColor;

void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  fragColor = color;
}`,fragmentShaderGLSL:this.engine.supportWebGPU?`// layout(set = 0, binding = 1) uniform WireframeUniforms {
//   float lineWidth;
//   vec4 lineColor;
// } wireframe;

layout(location = 0) in vec4 fragColor;
// layout(location = 1) in vec3 v_Barycentric;

layout(location = 0) out vec4 outColor;

// wireframe
// float edgeFactor() {
//   vec3 d = fwidth(v_Barycentric);
//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);
//   return min(min(a3.x, a3.y), a3.z);
// }

void main() {
  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));
  outColor = fragColor;
}`:`varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`})}},{key:"createShaderMaterial",value:function(L){var J=na(),It=L.vertexShader,Nt=L.fragmentShader,K=[];if(!this.engine.supportWebGPU){var Pt="material-".concat(J);this.shaderModule.registerModule(Pt,{vs:L.vertexShader,fs:L.fragmentShader});var Qt=this.shaderModule.getModule(Pt);It=Qt.vs,Nt=Qt.fs,Qt.uniforms&&(K=Object.keys(Qt.uniforms).map(function(qt){return{dirty:!0,name:qt,data:Qt.uniforms[qt]}}))}return this.material.create(J,Ta(Ta({vertexShaderGLSL:It,fragmentShaderGLSL:Nt},L),{},{uniforms:K}))}}]),Q}(),_a=Mi()(Ga.prototype,"material",[oa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xu=Mi()(Ga.prototype,"engine",[fo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ou=Mi()(Ga.prototype,"shaderModule",[bs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zs=Ga))||zs);function f(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=To()(Q);if(U){var J=To()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}(function(Q){Q[Q.Standard=0]="Standard"})(Vs||(Vs={}));var u=function(Q){Qo()(w,Q);var U=f(w);function w(L){var J;return xi()(this,w),(J=U.call(this,L)).strategy=Vs.Standard,J.visibilityPlaneMask=0,J.visible=!1,Object.assign(Eo()(J),L),J}return w}(ra);e(228);function I(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=To()(Q);if(U){var J=To()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var W,ct=function(Q){Qo()(w,Q);var U=I(w);function w(L){var J;return xi()(this,w),(J=U.call(this,L)).material=void 0,J.geometry=void 0,J.aabb=new Us,J.aabbDirty=!0,J.model=void 0,J.visible=!0,Object.assign(Eo()(J),L),J}return w}(ra),Ct=function(){function Q(U,w){xi()(this,Q),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=U||0,this.normal=w||jn.e.fromValues(0,1,0),this.updatePNVertexFlag()}return ki()(Q,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(w){return jn.e.dot(w,this.normal)-this.distance}},{key:"normalize",value:function(){var w=1/jn.e.len(this.normal);jn.e.scale(this.normal,this.normal,w),this.distance*=w}},{key:"intersectsLine",value:function(w,L,J){var It=this.distanceToPoint(w),Nt=It/(It-this.distanceToPoint(L)),K=Nt>=0&&Nt<=1;return K&&J&&jn.e.lerp(J,w,L,Nt),K}}]),Q}();(function(Q){Q[Q.OUTSIDE=4294967295]="OUTSIDE",Q[Q.INSIDE=0]="INSIDE",Q[Q.INDETERMINATE=2147483647]="INDETERMINATE"})(W||(W={}));var _t,Xt,ee,ae,je,Fe,_e,Ke,bn,wn,Nn,Bn,Gn,sr=function(){function Q(U){if(xi()(this,Q),this.planes=[],U)this.planes=U;else for(var w=0;w<6;w++)this.planes.push(new Ct)}return ki()(Q,[{key:"extractFromVPMatrix",value:function(w){var L=ya()(w,16),J=L[0],It=L[1],Nt=L[2],K=L[3],Pt=L[4],Qt=L[5],qt=L[6],xe=L[7],Ie=L[8],Ye=L[9],Ne=L[10],Xe=L[11],Je=L[12],Ge=L[13],qe=L[14],yn=L[15];jn.e.set(this.planes[0].normal,K-J,xe-Pt,Xe-Ie),this.planes[0].distance=-(yn-Je),jn.e.set(this.planes[1].normal,K+J,xe+Pt,Xe+Ie),this.planes[1].distance=-(yn+Je),jn.e.set(this.planes[2].normal,K+It,xe+Qt,Xe+Ye),this.planes[2].distance=-(yn+Ge),jn.e.set(this.planes[3].normal,K-It,xe-Qt,Xe-Ye),this.planes[3].distance=-(yn-Ge),jn.e.set(this.planes[4].normal,K-Nt,xe-qt,Xe-Ne),this.planes[4].distance=-(yn-qe),jn.e.set(this.planes[5].normal,K+Nt,xe+qt,Xe+Ne),this.planes[5].distance=-(yn+qe),this.planes.forEach(function(Pn){Pn.normalize(),Pn.updatePNVertexFlag()})}}]),Q}(),ur=e(61),Or=e.n(ur);function ei(Q,U){var w;if(typeof Symbol=="undefined"||Q[Symbol.iterator]==null){if(Array.isArray(Q)||(w=function(Pt,Qt){if(!!Pt){if(typeof Pt=="string")return Ci(Pt,Qt);var qt=Object.prototype.toString.call(Pt).slice(8,-1);if(qt==="Object"&&Pt.constructor&&(qt=Pt.constructor.name),qt==="Map"||qt==="Set")return Array.from(Pt);if(qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qt))return Ci(Pt,Qt)}}(Q))||U&&Q&&typeof Q.length=="number"){w&&(Q=w);var L=0,J=function(){};return{s:J,n:function(){return L>=Q.length?{done:!0}:{done:!1,value:Q[L++]}},e:function(Qt){throw Qt},f:J}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var It,Nt=!0,K=!1;return{s:function(){w=Q[Symbol.iterator]()},n:function(){var Qt=w.next();return Nt=Qt.done,Qt},e:function(Qt){K=!0,It=Qt},f:function(){try{Nt||w.return==null||w.return()}finally{if(K)throw It}}}}function Ci(Q,U){(U==null||U>Q.length)&&(U=Q.length);for(var w=0,L=new Array(U);w<U;w++)L[w]=Q[w];return L}var Rr,yi,oo,so,co,lo,Hi,Io,Ro,ko,bo,jo,ho,fa,Zo,Hc,Su,Kc,Jc,Qc,mh,Zc,wu,$c,Eu=(_t=Object(_r.injectable)(),Xt=Object(_r.inject)(yr.MeshComponentManager),ee=Object(_r.inject)(yr.CullableComponentManager),ae=Object(_r.inject)(yr.GeometryComponentManager),je=Object(_r.inject)(yr.HierarchyComponentManager),Fe=Object(_r.inject)(yr.TransformComponentManager),_t((Ke=function(){function Q(){xi()(this,Q),di()(this,"mesh",bn,this),di()(this,"cullable",wn,this),di()(this,"geometry",Nn,this),di()(this,"hierarchy",Bn,this),di()(this,"transform",Gn,this),this.planes=void 0}var U;return ki()(Q,[{key:"setFrustumPlanes",value:function(L){this.planes=L}},{key:"execute",value:(U=eo()(ui.a.mark(function w(L){var J,It,Nt,K=this;return ui.a.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:J=ei(L);try{for(Nt=function(){var qt=It.value,xe=(qt.getScene(),qt.getCamera());K.mesh.forEach(function(Ie,Ye){var Ne,Xe,Je=K.hierarchy.getComponentByEntity(Ie),Ge=K.cullable.getComponentByEntity(Ie),qe=Ye.geometry,yn=K.transform.getComponentByEntity(Ie);if(qe&&qe.aabb&&yn&&Ye.aabbDirty){var Pn=yn.worldTransform,En=qe.aabb,Ln=En.center,Zn=En.halfExtents,Qn=jn.e.transformMat4(jn.e.create(),Ln,Pn),qn=(Ne=Pn,(Xe=jn.a.create())[0]=Ne[0],Xe[1]=Ne[1],Xe[2]=Ne[2],Xe[3]=Ne[4],Xe[4]=Ne[5],Xe[5]=Ne[6],Xe[6]=Ne[8],Xe[7]=Ne[9],Xe[8]=Ne[10],Xe),fr=jn.e.transformMat3(jn.e.create(),Zn,qn);Ye.aabb.update(Qn,fr),Ye.aabbDirty=!1}if(Ge&&qe){var br=K.cullable.getComponentByEntity((Je==null?void 0:Je.parentID)||-1);Ge.visibilityPlaneMask=K.computeVisibilityWithPlaneMask(Ye.aabb,(br==null?void 0:br.visibilityPlaneMask)||W.INDETERMINATE,K.planes||xe.getFrustum().planes),Ge.visible=Ge.visibilityPlaneMask!==W.OUTSIDE}})},J.s();!(It=J.n()).done;)Nt()}catch(Qt){J.e(Qt)}finally{J.f()}case 2:case"end":return Pt.stop()}},w)})),function(w){return U.apply(this,arguments)})},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(L,J,It){if(J===W.OUTSIDE||J===W.INSIDE)return J;for(var Nt=W.INSIDE,K=0,Pt=It.length;K<Pt;++K){var Qt=K<31?1<<K:0;if(!(K<31&&(J&Qt)==0)){var qt=It[K],xe=qt.normal,Ie=qt.distance;if(jn.e.dot(xe,L.getNegativeFarPoint(It[K]))+Ie>0)return W.OUTSIDE;jn.e.dot(xe,L.getPositiveFarPoint(It[K]))+Ie>0&&(Nt|=Qt)}}return Nt}}]),Q}(),bn=Mi()(Ke.prototype,"mesh",[Xt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wn=Mi()(Ke.prototype,"cullable",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nn=Mi()(Ke.prototype,"geometry",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bn=Mi()(Ke.prototype,"hierarchy",[je],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gn=Mi()(Ke.prototype,"transform",[Fe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=Ke))||_e);function Ws(Q,U){var w;if(typeof Symbol=="undefined"||Q[Symbol.iterator]==null){if(Array.isArray(Q)||(w=function(Pt,Qt){if(!!Pt){if(typeof Pt=="string")return qc(Pt,Qt);var qt=Object.prototype.toString.call(Pt).slice(8,-1);if(qt==="Object"&&Pt.constructor&&(qt=Pt.constructor.name),qt==="Map"||qt==="Set")return Array.from(Pt);if(qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qt))return qc(Pt,Qt)}}(Q))||U&&Q&&typeof Q.length=="number"){w&&(Q=w);var L=0,J=function(){};return{s:J,n:function(){return L>=Q.length?{done:!0}:{done:!1,value:Q[L++]}},e:function(Qt){throw Qt},f:J}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var It,Nt=!0,K=!1;return{s:function(){w=Q[Symbol.iterator]()},n:function(){var Qt=w.next();return Nt=Qt.done,Qt},e:function(Qt){K=!0,It=Qt},f:function(){try{Nt||w.return==null||w.return()}finally{if(K)throw It}}}}function qc(Q,U){(U==null||U>Q.length)&&(U=Q.length);for(var w=0,L=new Array(U);w<U;w++)L[w]=Q[w];return L}var bh,tl,el,nl,oc,rl,il,ol,al,Mu,Au,xs,ac,sl,sc,Os,ul,xh,cl,ll,uc,fl,Ss=(Rr=Object(_r.injectable)(),yi=Object(_r.inject)(yr.MeshComponentManager),oo=Object(_r.inject)(yr.GeometryComponentManager),so=Object(_r.inject)(yr.MaterialComponentManager),co=Object(_r.inject)(yr.CullableComponentManager),lo=Object(_r.inject)(yr.TransformComponentManager),Hi=Object(_r.inject)(yr.HierarchyComponentManager),Io=Object(_r.inject)(yr.Systems),Ro=Object(_r.named)(yr.FrameGraphSystem),ko=Object(_r.inject)(yr.RenderEngine),bo=Object(_r.inject)(yr.ResourcePool),Rr(($c=wu=function(){function Q(){var L=this;xi()(this,Q),di()(this,"mesh",fa,this),di()(this,"geometry",Zo,this),di()(this,"material",Hc,this),di()(this,"cullable",Su,this),di()(this,"transform",Kc,this),di()(this,"hierarchy",Jc,this),di()(this,"frameGraphSystem",Qc,this),di()(this,"engine",mh,this),di()(this,"resourcePool",Zc,this),this.setup=function(J,It,Nt){var K=J.createRenderTarget(It,"color buffer",{width:1,height:1,usage:Jn.RENDER_ATTACHMENT|Jn.SAMPLED|Jn.COPY_SRC});Nt.data={output:It.write(J,K)}},this.execute=function(){var J=eo()(ui.a.mark(function It(Nt,K,Pt){var Qt,qt,xe,Ie,Ye,Ne;return ui.a.wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:Qt=Nt.getResourceNode(K.data.output),qt=L.resourcePool.getOrCreateResource(Qt.resource),xe=Ws(Pt),Xe.prev=3,xe.s();case 5:if((Ie=xe.n()).done){Xe.next=11;break}return Ye=Ie.value,Xe.next=9,L.initView(Ye);case 9:Xe.next=5;break;case 11:Xe.next=16;break;case 13:Xe.prev=13,Xe.t0=Xe.catch(3),xe.e(Xe.t0);case 16:return Xe.prev=16,xe.f(),Xe.finish(16);case 19:Ne=L.engine.getCanvas(),qt.resize({width:Ne.width,height:Ne.height}),L.engine.setScissor({enable:!1}),L.engine.clear({framebuffer:qt,color:Pt[0].getClearColor(),depth:1}),L.engine.useFramebuffer(qt,function(){var Je,Ge=Ws(Pt);try{for(Ge.s();!(Je=Ge.n()).done;){var qe=Je.value;L.renderView(qe)}}catch(yn){Ge.e(yn)}finally{Ge.f()}});case 24:case"end":return Xe.stop()}},It,null,[[3,13,16,19]])}));return function(It,Nt,K){return J.apply(this,arguments)}}()}var U,w;return ki()(Q,[{key:"renderView",value:function(J){var It=J.getScene(),Nt=J.getCamera(),K=Nt.getViewTransform(),Pt=jn.b.multiply(jn.b.create(),Nt.getPerspective(),K);Nt.getFrustum().extractFromVPMatrix(Pt);var Qt=J.getViewport(),qt=Qt.x,xe=Qt.y,Ie=Qt.width,Ye=Qt.height;this.engine.viewport({x:qt,y:xe,width:Ie,height:Ye});var Ne,Xe=Ws(It.getEntities());try{for(Xe.s();!(Ne=Xe.n()).done;){var Je=Ne.value;this.renderMesh(Je,{camera:Nt,view:J,viewMatrix:K})}}catch(Ge){Xe.e(Ge)}finally{Xe.f()}}},{key:"renderMesh",value:function(J,It){var Nt=this,K=It.camera,Pt=It.view,Qt=It.viewMatrix,qt=this.mesh.getComponentByEntity(J);if(qt.visible){this.hierarchy.forEach(function(qe,yn){yn.parentID===J&&Nt.renderMesh(qe,{camera:K,view:Pt,viewMatrix:Qt})});var xe=qt.material,Ie=qt.geometry;if(Ie&&!Ie.dirty&&xe){var Ye=this.transform.getComponentByEntity(J),Ne=jn.b.multiply(jn.b.create(),Qt,Ye.worldTransform),Xe=Pt.getViewport(),Je=Xe.width,Ge=Xe.height;xe.setUniform({projectionMatrix:K.getPerspective(),modelViewMatrix:Ne,modelMatrix:Ye.worldTransform,viewMatrix:Qt,cameraPosition:K.getPosition(),u_viewport:[Je,Ge]}),qt.model&&(qt.model.draw({uniforms:xe.uniforms.reduce(function(qe,yn){return qe[yn.name]=yn.data,qe},{})}),xe.uniforms.forEach(function(qe){qe.dirty=!1}),xe.dirty=!1)}}}},{key:"initMesh",value:(w=eo()(ui.a.mark(function L(J,It){var Nt,K,Pt,Qt,qt,xe,Ie,Ye=this;return ui.a.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(Nt=this.mesh.getComponentByEntity(J)){Ne.next=3;break}return Ne.abrupt("return");case 3:return K=Nt.material,Pt=Nt.geometry,Ne.next=7,this.hierarchy.forEachAsync(function(){var Xe=eo()(ui.a.mark(function Je(Ge,qe){return ui.a.wrap(function(yn){for(;;)switch(yn.prev=yn.next){case 0:if(qe.parentID!==J){yn.next=4;break}return yn.next=4,Ye.initMesh(Ge,It);case 4:case"end":return yn.stop()}},Je)}));return function(Je,Ge){return Xe.apply(this,arguments)}}());case 7:if(Pt&&!Pt.dirty&&K){Ne.next=9;break}return Ne.abrupt("return");case 9:if(Nt.model){Ne.next=21;break}return K.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),Qt=this.engine,qt=Qt.createModel,xe=Qt.createAttribute,Ie={vs:K.vertexShaderGLSL,fs:K.fragmentShaderGLSL,attributes:Pt.attributes.reduce(function(Xe,Je){return Je.data&&Je.buffer&&(Xe[Je.name]=xe({buffer:Je.buffer,attributes:Je.attributes,arrayStride:Je.arrayStride,stepMode:Je.stepMode,divisor:Je.stepMode==="vertex"?0:1})),Xe},{}),uniforms:K.uniforms.reduce(function(Xe,Je){return Xe[Je.name]=Je.data,Xe},{}),scissor:{enable:!0,box:function(){return It.getViewport()}}},K.cull&&(Ie.cull=K.cull),K.depth&&(Ie.depth=K.depth),K.blend&&(Ie.blend=K.blend),Pt.indicesBuffer&&(Ie.elements=Pt.indicesBuffer),Pt.maxInstancedCount&&(Ie.instances=Pt.maxInstancedCount,Ie.count=Pt.vertexCount||3),Ne.next=20,qt(Ie);case 20:Nt.model=Ne.sent;case 21:case"end":return Ne.stop()}},L,this)})),function(L,J){return w.apply(this,arguments)})},{key:"initView",value:(U=eo()(ui.a.mark(function L(J){var It,Nt,K,Pt;return ui.a.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:It=J.getScene(),Nt=Ws(It.getEntities()),Qt.prev=2,Nt.s();case 4:if((K=Nt.n()).done){Qt.next=10;break}return Pt=K.value,Qt.next=8,this.initMesh(Pt,J);case 8:Qt.next=4;break;case 10:Qt.next=15;break;case 12:Qt.prev=12,Qt.t0=Qt.catch(2),Nt.e(Qt.t0);case 15:return Qt.prev=15,Nt.f(),Qt.finish(15);case 18:case"end":return Qt.stop()}},L,this,[[2,12,15,18]])})),function(L){return U.apply(this,arguments)})}]),Q}(),wu.IDENTIFIER="Render Pass",ho=$c,fa=Mi()(ho.prototype,"mesh",[yi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zo=Mi()(ho.prototype,"geometry",[oo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hc=Mi()(ho.prototype,"material",[so],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Su=Mi()(ho.prototype,"cullable",[co],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kc=Mi()(ho.prototype,"transform",[lo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jc=Mi()(ho.prototype,"hierarchy",[Hi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qc=Mi()(ho.prototype,"frameGraphSystem",[Io,Ro],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mh=Mi()(ho.prototype,"engine",[ko],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zc=Mi()(ho.prototype,"resourcePool",[bo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jo=ho))||jo),Cu=(bh=Object(_r.injectable)(),tl=Object(_r.inject)(yr.RenderEngine),el=Object(_r.inject)(yr.ResourcePool),bh((al=ol=function Q(){var U=this;xi()(this,Q),di()(this,"engine",rl,this),di()(this,"resourcePool",il,this),this.model=void 0,this.setup=function(w,L,J){var It=w.getPass(Ss.IDENTIFIER);if(It){var Nt=w.createRenderTarget(L,"render to screen",{width:1,height:1});J.data={input:L.read(It.data.output),output:L.write(w,Nt)}}},this.execute=function(){var w=eo()(ui.a.mark(function L(J,It){var Nt,K,Pt,Qt,qt,xe,Ie;return ui.a.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(Nt=U.engine,K=Nt.createModel,Pt=Nt.createAttribute,Qt=Nt.createBuffer,U.model){Ye.next=6;break}return Ye.next=4,K({vs:U.engine.supportWebGPU?`layout(location = 0) in vec2 a_Position;
layout(location = 0) out vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`:`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,fs:U.engine.supportWebGPU?`layout(set = 0, binding = 0) uniform sampler u_TextureSampler;
layout(set = 0, binding = 1) uniform texture2D u_Texture;

layout(location = 0) in vec2 v_UV;
layout(location = 0) out vec4 outColor;

void main() {
  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);
}`:`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,attributes:{a_Position:Pt({buffer:Qt({data:[-4,-4,4,-4,0,4],type:Jn.FLOAT}),size:2,arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:qt=Ye.sent,U.model=qt;case 6:xe=J.getResourceNode(It.data.input),Ie=U.resourcePool.getOrCreateResource(xe.resource),U.engine.useFramebuffer(null,function(){U.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),U.model.draw({uniforms:{u_Texture:Ie}})});case 9:case"end":return Ye.stop()}},L)}));return function(L,J){return w.apply(this,arguments)}}(),this.tearDown=function(){U.model=void 0}},ol.IDENTIFIER="Copy Pass",oc=al,rl=Mi()(oc.prototype,"engine",[tl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),il=Mi()(oc.prototype,"resourcePool",[el],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nl=oc))||nl);function cc(Q,U){var w;if(typeof Symbol=="undefined"||Q[Symbol.iterator]==null){if(Array.isArray(Q)||(w=function(Pt,Qt){if(!!Pt){if(typeof Pt=="string")return lc(Pt,Qt);var qt=Object.prototype.toString.call(Pt).slice(8,-1);if(qt==="Object"&&Pt.constructor&&(qt=Pt.constructor.name),qt==="Map"||qt==="Set")return Array.from(Pt);if(qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qt))return lc(Pt,Qt)}}(Q))||U&&Q&&typeof Q.length=="number"){w&&(Q=w);var L=0,J=function(){};return{s:J,n:function(){return L>=Q.length?{done:!0}:{done:!1,value:Q[L++]}},e:function(Qt){throw Qt},f:J}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var It,Nt=!0,K=!1;return{s:function(){w=Q[Symbol.iterator]()},n:function(){var Qt=w.next();return Nt=Qt.done,Qt},e:function(Qt){K=!0,It=Qt},f:function(){try{Nt||w.return==null||w.return()}finally{if(K)throw It}}}}function lc(Q,U){(U==null||U>Q.length)&&(U=Q.length);for(var w=0,L=new Array(U);w<U;w++)L[w]=Q[w];return L}var hl,Tu,dl,Oh,vl,pl,gl,ws,Sh,yl,ml,bl,jd=1,xl=2,fc=(Mu=Object(_r.injectable)(),Au=Object(_r.inject)(yr.RenderEngine),xs=Object(_r.inject)(yr.ResourcePool),ac=Object(_r.inject)(yr.RenderPassFactory),sl=Object(_r.inject)(yr.MeshComponentManager),Mu((fl=uc=function(){function Q(){var U=this;xi()(this,Q),di()(this,"engine",ul,this),di()(this,"resourcePool",xh,this),di()(this,"renderPassFactory",cl,this),di()(this,"mesh",ll,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(w,L,J){var It=w.createRenderTarget(L,"picking fbo",{width:1,height:1});J.data={output:L.write(w,It)},L.hasSideEffect=!0},this.execute=function(){var w=eo()(ui.a.mark(function L(J,It,Nt){var K,Pt,Qt;return ui.a.wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:if(U.views=Nt,!U.alreadyInRendering){qt.next=3;break}return qt.abrupt("return");case 3:K=cc(Nt);try{for(Qt=function(){var Ie=Pt.value,Ye=Ie.getViewport(),Ne=Ye.width,Xe=Ye.height;U.alreadyInRendering=!0;var Je=J.getResourceNode(It.data.output);U.pickingFBO=U.resourcePool.getOrCreateResource(Je.resource),U.pickingFBO.resize({width:Ne,height:Xe}),U.engine.useFramebuffer(U.pickingFBO,function(){U.engine.clear({framebuffer:U.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var Ge,qe=U.renderPassFactory(Ss.IDENTIFIER),yn=[],Pn=cc(Ie.getScene().getEntities());try{for(Pn.s();!(Ge=Pn.n()).done;){var En=Ge.value,Ln=U.mesh.getComponentByEntity(En);Ln.material.setUniform("u_PickingStage",jd),yn.push(Ln)}}catch(Zn){Pn.e(Zn)}finally{Pn.f()}qe.renderView(Ie),yn.forEach(function(Zn){Zn.material.setUniform("u_PickingStage",xl)}),U.alreadyInRendering=!1})},K.s();!(Pt=K.n()).done;)Qt()}catch(xe){K.e(xe)}finally{K.f()}case 5:case"end":return qt.stop()}},L)}));return function(L,J,It){return w.apply(this,arguments)}}(),this.pick=function(w,L){var J,It,Nt=w.x,K=w.y,Pt=U.engine,Qt=Pt.readPixels,qt=Pt.useFramebuffer,xe=L.getViewport(),Ie=xe.width,Ye=xe.height,Ne=Nt*window.devicePixelRatio,Xe=K*window.devicePixelRatio;if(!(Ne>Ie||Ne<0||Xe>Ye||Xe<0))return qt(U.pickingFBO,function(){var Je,Ge;(J=Qt({x:Math.round(Ne),y:Math.round(Ye-(K+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(4),framebuffer:U.pickingFBO}))[0]===0&&J[1]===0&&J[2]===0||(Je=J,Ge=ya()(Je,3),It=Ge[0]+256*Ge[1]+65536*Ge[2]-1,U.highlightEnabled&&U.highlightPickedFeature(J,L))}),It}}return ki()(Q,[{key:"enableHighlight",value:function(w){this.highlightEnabled=w}},{key:"setHighlightColor",value:function(w){this.highlightColor=w}},{key:"highlightPickedFeature",value:function(w,L){if(w){var J,It=cc(L.getScene().getEntities());try{for(It.s();!(J=It.n()).done;){var Nt=J.value,K=this.mesh.getComponentByEntity(Nt).material;K.setUniform("u_PickingStage",xl),K.setUniform("u_PickingColor",[w[0],w[1],w[2]]),K.setUniform("u_HighlightColor",this.highlightColor)}}catch(Pt){It.e(Pt)}finally{It.f()}}}}]),Q}(),uc.IDENTIFIER="PixelPicking Pass",Os=fl,ul=Mi()(Os.prototype,"engine",[Au],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xh=Mi()(Os.prototype,"resourcePool",[xs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cl=Mi()(Os.prototype,"renderPassFactory",[ac],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ll=Mi()(Os.prototype,"mesh",[sl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sc=Os))||sc),hc=(hl=Object(_r.injectable)(),Tu=Object(_r.inject)(yr.Systems),dl=Object(_r.named)(yr.FrameGraphSystem),Oh=Object(_r.inject)(yr.RenderPassFactory),vl=Object(_r.inject)(yr.ConfigService),pl=Object(_r.inject)(yr.ResourcePool),hl((ws=function(){function Q(){xi()(this,Q),di()(this,"frameGraphSystem",Sh,this),di()(this,"renderPassFactory",yl,this),di()(this,"configService",ml,this),di()(this,"resourcePool",bl,this)}var U;return ki()(Q,[{key:"execute",value:(U=eo()(ui.a.mark(function w(L){var J,It,Nt,K,Pt,Qt,qt,xe;return ui.a.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:J=this.renderPassFactory(Ss.IDENTIFIER),It=J.setup,Nt=J.execute,this.frameGraphSystem.addPass(Ss.IDENTIFIER,It,Nt),K=this.renderPassFactory(Cu.IDENTIFIER),Pt=K.setup,Qt=K.execute,qt=K.tearDown,xe=this.frameGraphSystem.addPass(Cu.IDENTIFIER,Pt,Qt,qt),this.frameGraphSystem.present(xe.data.output);case 5:case"end":return Ie.stop()}},w,this)})),function(w){return U.apply(this,arguments)})},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(L,J){return this.renderPassFactory(fc.IDENTIFIER).pick(L,J)}}]),Q}(),Sh=Mi()(ws.prototype,"frameGraphSystem",[Tu,dl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yl=Mi()(ws.prototype,"renderPassFactory",[Oh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ml=Mi()(ws.prototype,"configService",[vl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bl=Mi()(ws.prototype,"resourcePool",[pl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gl=ws))||gl);function dc(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=To()(Q);if(U){var J=To()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var Ol,Sl,wl,Ys,El,Xs,Ml,Al,Cl,wh=function(Q){Qo()(w,Q);var U=dc(w);function w(L){var J;return xi()(this,w),(J=U.call(this,L)).parentID=void 0,Object.assign(Eo()(J),L),J}return w}(ra),Eh=(Ol=Object(_r.injectable)(),Sl=Object(_r.inject)(yr.HierarchyComponentManager),wl=Object(_r.inject)(yr.TransformComponentManager),Ys=Object(_r.inject)(yr.MeshComponentManager),Ol((Xs=function(){function Q(){xi()(this,Q),di()(this,"hierarchy",Ml,this),di()(this,"transform",Al,this),di()(this,"mesh",Cl,this)}var U;return ki()(Q,[{key:"execute",value:(U=eo()(ui.a.mark(function w(){return ui.a.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return L.stop()}},w,this)})),function(){return U.apply(this,arguments)})},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var L=this;this.transform.forEach(function(J,It){It.isDirty()&&(L.setMeshAABBDirty(J),It.updateTransform())})}},{key:"runHierarchyUpdateSystem",value:function(){var L=this;this.hierarchy.forEach(function(J,It){var Nt=L.transform.getComponentByEntity(J),K=L.transform.getComponentByEntity(It.parentID);Nt!==null&&K!==null&&Nt.updateTransformWithParent(K)})}},{key:"attach",value:function(L,J,It){if(this.hierarchy.contains(L)&&this.detach(L),this.hierarchy.create(L,{parentID:J}),this.setMeshAABBDirty(J),this.hierarchy.getCount()>1){for(var Nt=this.hierarchy.getCount()-1;Nt>0;--Nt)for(var K=this.hierarchy.getEntity(Nt),Pt=0;Pt<Nt;++Pt)if(this.hierarchy.getComponent(Pt).parentID===K){this.hierarchy.moveItem(Nt,Pt),++Nt;break}}this.hierarchy.getComponentByEntity(L);var Qt=this.transform.getComponentByEntity(J);Qt===null&&(Qt=this.transform.create(J));var qt=this.transform.getComponentByEntity(L);qt===null&&(qt=this.transform.create(L),Qt=this.transform.getComponentByEntity(J)),!It&&Qt&&(qt.matrixTransform(jn.b.invert(jn.b.create(),Qt.worldTransform)),qt.updateTransform()),Qt&&qt.updateTransformWithParent(Qt)}},{key:"detach",value:function(L){if(this.hierarchy.getComponentByEntity(L)!==null){var J=this.transform.getComponentByEntity(L);J!==null&&J.applyTransform(),this.hierarchy.removeKeepSorted(L),this.setMeshAABBDirty(L)}}},{key:"detachChildren",value:function(L){for(var J=0;J<this.hierarchy.getCount();){var It;if(((It=this.hierarchy.getComponent(J))===null||It===void 0?void 0:It.parentID)===L){var Nt=this.hierarchy.getEntity(J);this.detach(Nt)}else++J}}},{key:"setMeshAABBDirty",value:function(L){var J=this.mesh.getComponentByEntity(L);J&&(J.aabbDirty=!0)}}]),Q}(),Ml=Mi()(Xs.prototype,"hierarchy",[Sl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Al=Mi()(Xs.prototype,"transform",[wl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cl=Mi()(Xs.prototype,"mesh",[Ys],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),El=Xs))||El);function Mh(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=To()(Q);if(U){var J=To()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var vc=function(Q){Qo()(w,Q);var U=Mh(w);function w(L){var J,It,Nt,K,Pt,Qt,qt,xe,Ie,Ye,Ne,Xe,Je,Ge,qe;return xi()(this,w),(J=U.call(this,L)).dirtyFlag=void 0,J.localTranslation=jn.e.fromValues(0,0,0),J.localRotation=jn.c.fromValues(0,0,0,1),J.localScale=jn.e.fromValues(1,1,1),J.localTransform=jn.b.create(),J.worldTransform=jn.b.create(),J.getRotation=(It=jn.c.create(),function(){return jn.b.getRotation(It,J.worldTransform),It}),J.getScale=(Nt=jn.e.create(),function(){return jn.b.getScaling(Nt,J.worldTransform),Nt}),J.getPosition=(K=jn.e.create(),function(){return jn.b.getTranslation(K,J.worldTransform),K}),J.getLocalMatrix=(Pt=jn.b.create(),function(){return jn.b.fromRotationTranslationScale(Pt,J.localRotation,J.localTranslation,J.localScale),Pt}),J.matrixTransform=(Qt=jn.b.create(),function(yn){jn.b.multiply(Qt,J.getLocalMatrix(),yn),jn.b.getScaling(J.localScale,Qt),jn.b.getTranslation(J.localTranslation,Qt),jn.b.getRotation(J.localRotation,Qt)}),J.rotateRollPitchYaw=(qt=jn.c.create(),xe=jn.c.create(),Ie=jn.c.create(),function(yn,Pn,En){J.setDirty(),jn.c.fromEuler(qt,yn,0,0),jn.c.fromEuler(xe,0,Pn,0),jn.c.fromEuler(Ie,0,0,En),jn.c.multiply(J.localRotation,qt,J.localRotation),jn.c.multiply(J.localRotation,J.localRotation,xe),jn.c.multiply(J.localRotation,Ie,J.localRotation),jn.c.normalize(J.localRotation,J.localRotation)}),J.lerp=(Ye=jn.e.create(),Ne=jn.c.create(),Xe=jn.e.create(),Je=jn.e.create(),Ge=jn.c.create(),qe=jn.e.create(),function(yn,Pn,En){J.setDirty(),jn.b.getScaling(Ye,yn.worldTransform),jn.b.getTranslation(Xe,yn.worldTransform),jn.b.getRotation(Ne,yn.worldTransform),jn.b.getScaling(Je,Pn.worldTransform),jn.b.getTranslation(qe,Pn.worldTransform),jn.b.getRotation(Ge,Pn.worldTransform),jn.e.lerp(J.localScale,Ye,Je,En),jn.c.slerp(J.localRotation,Ne,Ge,En),jn.e.lerp(J.localTranslation,Xe,qe,En)}),J}return ki()(w,[{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var J=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];J?this.dirtyFlag|=w.DIRTY:this.dirtyFlag&=~w.DIRTY}},{key:"updateTransform",value:function(){this.isDirty()&&(this.setDirty(!1),jn.b.copy(this.worldTransform,this.getLocalMatrix()))}},{key:"updateTransformWithParent",value:function(J){jn.b.multiply(this.worldTransform,this.getLocalMatrix(),J.worldTransform)}},{key:"applyTransform",value:function(){this.setDirty(),jn.b.getScaling(this.localScale,this.worldTransform),jn.b.getTranslation(this.localTranslation,this.worldTransform),jn.b.getRotation(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localTranslation=jn.e.fromValues(0,0,0),this.localRotation=jn.c.fromValues(0,0,0,1),this.localScale=jn.e.fromValues(1,1,1)}},{key:"translate",value:function(J){return this.setDirty(),jn.e.add(this.localTranslation,this.localTranslation,J),this}},{key:"scale",value:function(J){return this.setDirty(),jn.e.multiply(this.localScale,this.localScale,J),this}},{key:"rotate",value:function(J){return this.setDirty(),jn.c.multiply(this.localRotation,this.localRotation,J),jn.c.normalize(this.localRotation,this.localRotation),this}}]),w}(ra);vc.DIRTY=1,e(143),e(144),e(229),e(145),e(146),e(113),e(147),e(50),e(148),e(230);var pc,Tl,jl,ju,Il,Pl=e(154),Ah=e(251),Ch=e.n(Ah),Iu=(pc=Object(_r.injectable)(),Tl=Object(_r.inject)(yr.RenderEngine),pc((ju=function(){function Q(){xi()(this,Q),di()(this,"engine",Il,this),this.resourcePool={}}return ki()(Q,[{key:"getOrCreateResource",value:function(w){if(!this.resourcePool[w.name]){var L=w.descriptor,J=L.width,It=L.height,Nt=L.usage;this.resourcePool[w.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:J,height:It,wrapS:Jn.CLAMP_TO_EDGE,wrapT:Jn.CLAMP_TO_EDGE,usage:Nt})})}return this.resourcePool[w.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),Q}(),Il=Mi()(ju.prototype,"engine",[Tl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jl=ju))||jl);function Th(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=To()(Q);if(U){var J=To()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var gc,Dl,jh=function(Q){Qo()(w,Q);var U=Th(w);function w(L){var J;return xi()(this,w),(J=U.call(this,L)).name=void 0,J.name=L.name||"",J}return w}(ra),Rl=Object(_r.injectable)()(gc=function(){function Q(){xi()(this,Q),this.config=void 0}return ki()(Q,[{key:"get",value:function(){return this.config}},{key:"set",value:function(w){this.config=w}}]),Q}())||gc,Ih=Object(_r.injectable)()(Dl=function(){function Q(){xi()(this,Q)}return ki()(Q,[{key:"listen",value:function(w){}},{key:"on",value:function(w,L){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),Q}())||Dl,Ph=e(252),kl=e.n(Ph),yc,Dh=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function Nl(Q){var U={};return{content:Q=Q.replace(Dh,function(w,L,J){var It=J.split(":"),Nt=It[0].trim(),K="";switch(It.length>1&&(K=It[1].trim()),L){case"bool":K=K==="true";break;case"float":case"int":K=Number(K);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":K=K?K.replace("[","").replace("]","").split(",").reduce(function(Pt,Qt){return Pt.push(Number(Qt.trim())),Pt},[]):new Array(function(Pt){var Qt=0;switch(Pt){case"vec2":case"ivec2":Qt=2;break;case"vec3":case"ivec3":Qt=3;break;case"vec4":case"ivec4":case"mat2":Qt=4;break;case"mat3":Qt=9;break;case"mat4":Qt=16}return Qt}(L)).fill(0)}return U[Nt]=K,"uniform ".concat(L," ").concat(Nt,`;
`)}),uniforms:U}}function Pu(Q,U){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);U&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function Hs(Q){for(var U=1;U<arguments.length;U++){var w=arguments[U]!=null?arguments[U]:{};U%2?Pu(Object(w),!0).forEach(function(L){mr()(Q,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(w)):Pu(Object(w)).forEach(function(L){Object.defineProperty(Q,L,Object.getOwnPropertyDescriptor(w,L))})}return Q}var Ll=/precision\s+(high|low|medium)p\s+float/,Rh=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,kh=Object(_r.injectable)()(yc=function(){function Q(){xi()(this,Q),this.moduleCache={},this.rawContentCache={}}return ki()(Q,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}`,fs:`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`}),this.registerModule("sdf2d",{vs:"",fs:`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}`})}},{key:"registerModule",value:function(w,L){if(!this.rawContentCache[w]){var J=L.vs,It=L.fs,Nt=L.uniforms,K=Nl(J),Pt=K.content,Qt=K.uniforms,qt=Nl(It),xe=qt.content,Ie=qt.uniforms;this.rawContentCache[w]={fs:xe,uniforms:Hs(Hs(Hs({},Qt),Ie),Nt),vs:Pt}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(w){var L=this;if(this.moduleCache[w])return this.moduleCache[w];var J=this.rawContentCache[w].vs,It=this.rawContentCache[w].fs,Nt=this.processModule(J,[],"vs"),K=Nt.content,Pt=Nt.includeList,Qt=this.processModule(It,[],"fs"),qt=Qt.content,xe=Qt.includeList,Ie=qt,Ye=kl()(Pt.concat(xe).concat(w)).reduce(function(Ne,Xe){return Hs(Hs({},Ne),L.rawContentCache[Xe].uniforms)},{});return Ll.test(qt)||(Ie=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`+qt),this.moduleCache[w]={fs:Ie.trim(),uniforms:Ye,vs:K.trim()},this.moduleCache[w]}},{key:"processModule",value:function(w,L,J){var It=this;return{content:w.replace(Rh,function(Nt,K){var Pt=K.split(" ")[0].replace(/"/g,"");if(L.indexOf(Pt)>-1)return"";var Qt=It.rawContentCache[Pt][J];return L.push(Pt),It.processModule(Qt,L,J).content}),includeList:L}}}]),Q}())||yc,ha=new _r.Container;Object(_r.decorate)(Object(_r.injectable)(),Pl.EventEmitter),ha.bind(yr.IEventEmitter).to(Pl.EventEmitter),Ch()(ha,!1);function Nh(){var Q=new _r.Container;return Q.parent=ha,Q.bind(yr.Systems).to(Eh).inSingletonScope().whenTargetNamed(yr.SceneGraphSystem),Q.bind(yr.Systems).to(yu).inSingletonScope().whenTargetNamed(yr.FrameGraphSystem),Q.bind(yr.Systems).to(Eu).inSingletonScope().whenTargetNamed(yr.MeshSystem),Q.bind(yr.Systems).to(rc).inSingletonScope().whenTargetNamed(yr.GeometrySystem),Q.bind(yr.Systems).to(kt).inSingletonScope().whenTargetNamed(yr.MaterialSystem),Q.bind(yr.Systems).to(hc).inSingletonScope().whenTargetNamed(yr.RendererSystem),Q.bind(yr.ResourcePool).to(Iu).inSingletonScope(),Q.bind(yr.ConfigService).to(Rl).inSingletonScope(),Q.bind(yr.InteractorService).to(Ih).inSingletonScope(),Q.bind(yr.RenderPass).to(Ss).inSingletonScope().whenTargetNamed(Ss.IDENTIFIER),Q.bind(yr.RenderPass).to(Cu).inSingletonScope().whenTargetNamed(Cu.IDENTIFIER),Q.bind(yr.RenderPass).to(fc).inSingletonScope().whenTargetNamed(fc.IDENTIFIER),Q.bind(yr.RenderPassFactory).toFactory(function(U){return function(w){return U.container.getNamed(yr.RenderPass,w)}}),Q}ha.bind(yr.ShaderModuleService).to(kh).inSingletonScope(),ha.bind(yr.NameComponentManager).toConstantValue(new ia(jh)),ha.bind(yr.HierarchyComponentManager).toConstantValue(new ia(wh)),ha.bind(yr.TransformComponentManager).toConstantValue(new ia(vc)),ha.bind(yr.MeshComponentManager).toConstantValue(new ia(ct)),ha.bind(yr.CullableComponentManager).toConstantValue(new ia(u)),ha.bind(yr.GeometryComponentManager).toConstantValue(new ia(ys)),ha.bind(yr.MaterialComponentManager).toConstantValue(new ia(la));var Bl;e(231),e(149),function(Q){Q.PANSTART="PANSTART",Q.PANEND="PANEND",Q.PANMOVE="PANMOVE",Q.PINCH="PINCH",Q.KEYDOWN="KEYDOWN",Q.KEYUP="KEYUP",Q.HOVER="HOVER"}(Bl||(Bl={})),e(232);var Ua,Fl,za,Ks,$o=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);(function(Q){Q.Void="Void",Q.Boolean="Boolean",Q.Float="Float",Q.Uint32="Uint32",Q.Int32="Int32",Q.Vector="Vector",Q.Vector2Float="vec2<f32>",Q.Vector3Float="vec3<f32>",Q.Vector4Float="vec4<f32>",Q.Vector2Boolean="vec2<bool>",Q.Vector3Boolean="vec3<bool>",Q.Vector4Boolean="vec4<bool>",Q.Vector2Uint="vec2<u32>",Q.Vector3Uint="vec3<u32>",Q.Vector4Uint="vec4<u32>",Q.Vector2Int="vec2<i32>",Q.Vector3Int="vec3<i32>",Q.Vector4Int="vec4<i32>",Q.Matrix="Matrix",Q.Matrix3x3Float="mat3x3<f32>",Q.Matrix4x4Float="mat4x4<i32>",Q.Struct="Struct",Q.FloatArray="Float[]",Q.Vector4FloatArray="vec4<f32>[]"})(Ua||(Ua={})),function(Q){Q.Program="Program",Q.Identifier="Identifier",Q.VariableDeclaration="VariableDeclaration",Q.BlockStatement="BlockStatement",Q.ReturnStatement="ReturnStatement",Q.FunctionDeclaration="FunctionDeclaration",Q.VariableDeclarator="VariableDeclarator",Q.AssignmentExpression="AssignmentExpression",Q.LogicalExpression="LogicalExpression",Q.BinaryExpression="BinaryExpression",Q.ArrayExpression="ArrayExpression",Q.UnaryExpression="UnaryExpression",Q.UpdateExpression="UpdateExpression",Q.FunctionExpression="FunctionExpression",Q.MemberExpression="MemberExpression",Q.ConditionalExpression="ConditionalExpression",Q.ExpressionStatement="ExpressionStatement",Q.CallExpression="CallExpression",Q.NumThreadStatement="NumThreadStatement",Q.StorageStatement="StorageStatement",Q.DoWhileStatement="DoWhileStatement",Q.WhileStatement="WhileStatement",Q.ForStatement="ForStatement",Q.BreakStatement="BreakStatement",Q.ContinueStatement="ContinueStatement",Q.IfStatement="IfStatement",Q.ImportedFunctionStatement="ImportedFunctionStatement"}(Fl||(Fl={})),function(Q){Q.Input="Input",Q.Output="Output",Q.Uniform="Uniform",Q.Workgroup="Workgroup",Q.UniformConstant="UniformConstant",Q.Image="Image",Q.StorageBuffer="StorageBuffer",Q.Private="Private",Q.Function="Function"}(za||(za={})),function(Q){Q.GLSL100="GLSL100",Q.GLSL450="GLSL450",Q.WGSL="WGSL"}(Ks||(Ks={}));function ja(Q){return Q===void 0?0:Q>360||Q<-360?Q%360:Q}function Va(Q,U,w){return Or()(Q)?jn.e.fromValues(Q,U,w):Q.length===3?jn.e.clone(Q):jn.e.fromValues(Q[0],Q[1],Q[2])}var Js,mc,bc,xc,Gl,So,Du,Wa,_l=function(){function Q(U,w){xi()(this,Q),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=U,this.matrix=jn.b.clone(w.matrix),this.right=jn.e.clone(w.right),this.up=jn.e.clone(w.up),this.forward=jn.e.clone(w.forward),this.position=jn.e.clone(w.position),this.focalPoint=jn.e.clone(w.focalPoint),this.distanceVector=jn.e.clone(w.distanceVector),this.azimuth=w.azimuth,this.elevation=w.elevation,this.roll=w.roll,this.relAzimuth=w.relAzimuth,this.relElevation=w.relElevation,this.relRoll=w.relRoll,this.dollyingStep=w.dollyingStep,this.distance=w.distance}return ki()(Q,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(w){w.matrix=jn.b.copy(w.matrix,this.matrix),w.right=jn.e.copy(w.right,this.right),w.up=jn.e.copy(w.up,this.up),w.forward=jn.e.copy(w.forward,this.forward),w.position=jn.e.copy(w.position,this.position),w.focalPoint=jn.e.copy(w.focalPoint,this.focalPoint),w.distanceVector=jn.e.copy(w.distanceVector,this.distanceVector),w.azimuth=this.azimuth,w.elevation=this.elevation,w.roll=this.roll,w.relAzimuth=this.relAzimuth,w.relElevation=this.relElevation,w.relRoll=this.relRoll,w.dollyingStep=this.dollyingStep,w.distance=this.distance}}]),Q}();(function(Q){Q.ORBITING="ORBITING",Q.EXPLORING="EXPLORING",Q.TRACKING="TRACKING"})(So||(So={})),function(Q){Q.DEFAULT="DEFAULT",Q.ROTATIONAL="ROTATIONAL",Q.TRANSLATIONAL="TRANSLATIONAL",Q.CINEMATIC="CINEMATIC"}(Du||(Du={})),function(Q){Q.ORTHOGRAPHIC="ORTHOGRAPHIC",Q.PERSPECTIVE="PERSPECTIVE"}(Wa||(Wa={}));var Ul,zl,Vl,Wl,Ru,Yl,Xl,Ia=Math.PI/180,is=180/Math.PI,Hl=(Js=Object(_r.injectable)(),mc=Object(_r.inject)(yr.InteractorService),Js((xc=function(){function Q(){xi()(this,Q),this.matrix=jn.b.create(),this.right=jn.e.fromValues(1,0,0),this.up=jn.e.fromValues(0,1,0),this.forward=jn.e.fromValues(0,0,1),this.position=jn.e.fromValues(0,0,1),this.focalPoint=jn.e.fromValues(0,0,0),this.distanceVector=jn.e.fromValues(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.rotateWorld=!1,di()(this,"interactor",Gl,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=jn.b.create(),this.view=void 0,this.following=void 0,this.type=So.EXPLORING,this.trackingMode=Du.DEFAULT,this.projectionMode=Wa.PERSPECTIVE,this.frustum=new sr,this.landmarks=[],this.landmarkAnimationID=void 0}return ki()(Q,[{key:"clone",value:function(){var w=new Q;return w.setType(this.type,void 0),w.interactor=this.interactor,w}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(w,L){return this.type=w,this.type===So.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===So.TRACKING&&L!==void 0&&this.setTrackingMode(L),this}},{key:"setProjectionMode",value:function(w){return this.projectionMode=w,this}},{key:"setTrackingMode",value:function(w){if(this.type!==So.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=w,this}},{key:"setWorldRotation",value:function(w){this.rotateWorld=w,this._getAngles()}},{key:"getViewTransform",value:function(){return jn.b.invert(jn.b.create(),this.matrix)}},{key:"setMatrix",value:function(w){return this.matrix=w,this._update(),this}},{key:"setAspect",value:function(w){return this.setPerspective(this.near,this.far,this.fov,w),this}},{key:"setViewOffset",value:function(w,L,J,It,Nt,K){return this.aspect=w/L,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=w,this.view.fullHeight=L,this.view.offsetX=J,this.view.offsetY=It,this.view.width=Nt,this.view.height=K,this.projectionMode===Wa.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===Wa.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(w,L,J,It){return this.projectionMode=Wa.PERSPECTIVE,this.fov=J,this.near=w,this.far=L,this.aspect=It,jn.b.perspective(this.perspective,this.fov*Ia,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(w,L,J,It,Nt,K){this.projectionMode=Wa.ORTHOGRAPHIC,this.rright=L,this.left=w,this.top=J,this.bottom=It,this.near=Nt,this.far=K;var Pt=(this.rright-this.left)/(2*this.zoom),Qt=(this.top-this.bottom)/(2*this.zoom),qt=(this.rright+this.left)/2,xe=(this.top+this.bottom)/2,Ie=qt-Pt,Ye=qt+Pt,Ne=xe+Qt,Xe=xe-Qt;if(this.view!==void 0&&this.view.enabled){var Je=(this.rright-this.left)/this.view.fullWidth/this.zoom,Ge=(this.top-this.bottom)/this.view.fullHeight/this.zoom;Ye=(Ie+=Je*this.view.offsetX)+Je*this.view.width,Xe=(Ne-=Ge*this.view.offsetY)-Ge*this.view.height}return jn.b.ortho(this.perspective,Ie,Ye,Ne,Xe,Nt,K),this}},{key:"setPosition",value:function(w,L,J){return this._setPosition(w,L,J),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(w,L,J){var It=jn.e.fromValues(0,1,0);if(this.focalPoint=Va(w,L,J),this.trackingMode===Du.CINEMATIC){var Nt=jn.e.subtract(jn.e.create(),this.focalPoint,this.position);w=Nt[0],L=Nt[1],J=Nt[2];var K=jn.e.length(Nt),Pt=Math.asin(L/K)*is,Qt=90+Math.atan2(J,w)*is,qt=jn.b.create();jn.b.rotateY(qt,qt,Qt*Ia),jn.b.rotateX(qt,qt,Pt*Ia),It=jn.e.transformMat4(jn.e.create(),[0,1,0],qt)}return jn.b.invert(this.matrix,jn.b.lookAt(jn.b.create(),this.position,this.focalPoint,It)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(w){if(!(this.distance===w||w<0)){this.distance=w,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var L=jn.e.create();w=this.distance;var J=this.forward,It=this.focalPoint;return L[0]=w*J[0]+It[0],L[1]=w*J[1]+It[1],L[2]=w*J[2]+It[2],this._setPosition(L),this}}},{key:"changeAzimuth",value:function(w){return this.setAzimuth(this.azimuth+w),this}},{key:"changeElevation",value:function(w){return this.setElevation(this.elevation+w),this}},{key:"changeRoll",value:function(w){return this.setRoll(this.roll+w),this}},{key:"setAzimuth",value:function(w){return this.azimuth=ja(w),this.computeMatrix(),this._getAxes(),this.type===So.ORBITING||this.type===So.EXPLORING?this._getPosition():this.type===So.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(w){return this.elevation=ja(w),this.computeMatrix(),this._getAxes(),this.type===So.ORBITING||this.type===So.EXPLORING?this._getPosition():this.type===So.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(w){return this.roll=ja(w),this.computeMatrix(),this._getAxes(),this.type===So.ORBITING||this.type===So.EXPLORING?this._getPosition():this.type===So.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(w,L,J){if(this.type===So.EXPLORING){w=ja(w),L=ja(L),J=ja(J);var It=jn.c.setAxisAngle(jn.c.create(),[1,0,0],(this.rotateWorld?1:-1)*L*Ia),Nt=jn.c.setAxisAngle(jn.c.create(),[0,1,0],(this.rotateWorld?1:-1)*w*Ia),K=jn.c.setAxisAngle(jn.c.create(),[0,0,1],J*Ia),Pt=jn.c.multiply(jn.c.create(),Nt,It);Pt=jn.c.multiply(jn.c.create(),Pt,K);var Qt=jn.b.fromQuat(jn.b.create(),Pt);jn.b.translate(this.matrix,this.matrix,[0,0,-this.distance]),jn.b.multiply(this.matrix,this.matrix,Qt),jn.b.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+L)>90)return;this.relElevation=ja(L),this.relAzimuth=ja(w),this.relRoll=ja(J),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===So.ORBITING||this.type===So.EXPLORING?this._getPosition():this.type===So.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(w,L){var J=Va(w,L,0),It=jn.e.clone(this.position);return jn.e.add(It,It,jn.e.scale(jn.e.create(),this.right,J[0])),jn.e.add(It,It,jn.e.scale(jn.e.create(),this.up,J[1])),this._setPosition(It),this}},{key:"dolly",value:function(w){var L=this.forward,J=jn.e.clone(this.position),It=w*this.dollyingStep;return J[0]+=It*L[0],J[1]+=It*L[1],J[2]+=It*L[2],this._setPosition(J),this.type===So.ORBITING||this.type===So.EXPLORING?this._getDistance():this.type===So.TRACKING&&jn.e.add(this.focalPoint,J,this.distanceVector),this}},{key:"createLandmark",value:function(w,L){var J=this.clone();J.setPosition(L.position),J.setFocalPoint(L.focalPoint),L.roll!==void 0&&J.setRoll(L.roll);var It=new _l(w,J);return this.landmarks.push(It),It}},{key:"setLandmark",value:function(w){var L=new _l(w,this);return this.landmarks.push(L),this}},{key:"gotoLandmark",value:function(w){var L=this,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,It=this.landmarks.find(function(xe){return xe.name===w});if(It){if(J===0)return void It.retrieve(this);this.landmarkAnimationID!==void 0&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var Nt,K=It.getPosition(),Pt=It.getFocalPoint(),Qt=It.getRoll(),qt=function xe(Ie){Nt===void 0&&(Nt=Ie);var Ye,Ne=Ie-Nt,Xe=(1-Math.cos(Ne/J*Math.PI))/2,Je=jn.e.create(),Ge=jn.e.create();if(jn.e.lerp(Je,L.focalPoint,Pt,Xe),jn.e.lerp(Ge,L.position,K,Xe),Ye=L.roll*(1-Xe)+Qt*Xe,L.setFocalPoint(Je),L.setPosition(Ge),L.setRoll(Ye),L.computeMatrix(),!(jn.e.dist(Je,Pt)+jn.e.dist(Ge,K)>.01))return L.setFocalPoint(Je),L.setPosition(Ge),L.setRoll(Ye),L.computeMatrix(),void L.interactor.connect();Ne<J&&(L.landmarkAnimationID=window.requestAnimationFrame(xe))};window.requestAnimationFrame(qt)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var w,L,J=jn.c.setAxisAngle(jn.c.create(),[0,0,1],this.roll*Ia);jn.b.identity(this.matrix),w=jn.c.setAxisAngle(jn.c.create(),[1,0,0],(this.rotateWorld&&this.type!==So.TRACKING||this.type===So.TRACKING?1:-1)*this.elevation*Ia),L=jn.c.setAxisAngle(jn.c.create(),[0,1,0],(this.rotateWorld&&this.type!==So.TRACKING||this.type===So.TRACKING?1:-1)*this.azimuth*Ia);var It=jn.c.multiply(jn.c.create(),L,w);It=jn.c.multiply(jn.c.create(),It,J);var Nt=jn.b.fromQuat(jn.b.create(),It);this.type===So.ORBITING||this.type===So.EXPLORING?(jn.b.translate(this.matrix,this.matrix,this.focalPoint),jn.b.multiply(this.matrix,this.matrix,Nt),jn.b.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===So.TRACKING&&(jn.b.translate(this.matrix,this.matrix,this.position),jn.b.multiply(this.matrix,this.matrix,Nt))}},{key:"_setPosition",value:function(w,L,J){this.position=Va(w,L,J);var It=this.matrix;It[12]=this.position[0],It[13]=this.position[1],It[14]=this.position[2],It[15]=1}},{key:"_getAxes",value:function(){jn.e.copy(this.right,Va(jn.f.transformMat4(jn.f.create(),[1,0,0,0],this.matrix))),jn.e.copy(this.up,Va(jn.f.transformMat4(jn.f.create(),[0,1,0,0],this.matrix))),jn.e.copy(this.forward,Va(jn.f.transformMat4(jn.f.create(),[0,0,1,0],this.matrix))),jn.e.normalize(this.right,this.right),jn.e.normalize(this.up,this.up),jn.e.normalize(this.forward,this.forward)}},{key:"_getAngles",value:function(){var w=this.distanceVector[0],L=this.distanceVector[1],J=this.distanceVector[2],It=jn.e.length(this.distanceVector);if(It===0)return this.elevation=0,void(this.azimuth=0);this.type===So.TRACKING||this.rotateWorld?(this.elevation=Math.asin(L/It)*is,this.azimuth=Math.atan2(-w,-J)*is):(this.elevation=-Math.asin(L/It)*is,this.azimuth=-Math.atan2(-w,-J)*is)}},{key:"_getPosition",value:function(){jn.e.copy(this.position,Va(jn.f.transformMat4(jn.f.create(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){jn.e.transformMat3(this.distanceVector,[0,0,-this.distance],jn.a.fromMat4(jn.a.create(),this.matrix)),jn.e.add(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=jn.e.subtract(jn.e.create(),this.focalPoint,this.position),this.distance=jn.e.length(this.distanceVector),this.dollyingStep=this.distance/100}}]),Q}(),Gl=Mi()(xc.prototype,"interactor",[mc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bc=xc))||bc),Kl=e(44),ku=e.n(Kl),Lh=e(26),Jl=e.n(Lh),Wr=e(7);function Oc(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Ql(Q,U){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);U&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function Nu(Q){for(var U=1;U<arguments.length;U++){var w=arguments[U]!=null?arguments[U]:{};U%2?Ql(Object(w),!0).forEach(function(L){mr()(Q,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(w)):Ql(Object(w)).forEach(function(L){Object.defineProperty(Q,L,Object.getOwnPropertyDescriptor(w,L))})}return Q}var Zl,Qs,$l,ql,tf,ef,nf,Ya,rf,of,af,sf,Lu,uf,Pa,Es,xa,qo,Zs,Xa,os,Bu,Oa,Ko,Bo,Sa,wa,Fu,cf=(Ul=Object(_r.injectable)(),zl=Object(_r.inject)(yr.RenderEngine),Vl=Object(_r.inject)(yr.ConfigService),Ul((Ru=function(){function Q(){xi()(this,Q),di()(this,"engine",Yl,this),di()(this,"configService",Xl,this),this.entity=na(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}var U,w,L;return ki()(Q,[{key:"init",value:function(){var It=this.configService.get(),Nt=It.canvas,K=It.engineOptions;this.initPromise=this.engine.init(Nu({canvas:Nt||Oc(),swapChainFormat:Wr.TextureFormat.BGRA8Unorm,antialiasing:!1},K))}},{key:"setBundle",value:function(It){this.compiledBundle=JSON.parse(JSON.stringify(It))}},{key:"setDispatch",value:function(It){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=It),this}},{key:"setMaxIteration",value:function(It){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=It),this}},{key:"setBinding",value:function(It,Nt){var K=this;if(typeof It=="string"){var Pt=Or()(Nt)||ku()(Nt)||Jl()(Nt);if(this.compiledBundle&&this.compiledBundle.context){var Qt=this.compiledBundle.context.defines.find(function(xe){return xe.name===It});if(Qt)return Qt.value=Nt,this;var qt=this.compiledBundle.context.uniforms.find(function(xe){return xe.name===It});qt&&(Pt?(qt.data=Nt,qt.isReferer=!1,qt.storageClass===za.Uniform?this.model&&this.model.updateUniform(It,Nt):this.model&&this.model.updateBuffer(It,Nt)):(qt.isReferer=!0,qt.data=Nt))}}else Object.keys(It).forEach(function(xe){K.setBinding(xe,It[xe])});return this}},{key:"execute",value:(L=eo()(ui.a.mark(function J(){var It,Nt,K=this,Pt=arguments;return ui.a.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:if(It=Pt.length>0&&Pt[0]!==void 0?Pt[0]:1,!this.dirty){Qt.next=6;break}return this.compiledBundle.context&&(It>1?this.compiledBundle.context.maxIteration=It:this.compiledBundle.context.maxIteration++),Qt.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(qt){return qt.isReferer}).forEach(function(qt){var xe=qt.data,Ie=qt.name;K.model.confirmInput(xe.model,Ie)}),Nt=0;Nt<It;Nt++)this.model.run();return this.engine.endFrame(),Qt.abrupt("return",this);case 12:case"end":return Qt.stop()}},J,this)})),function(){return L.apply(this,arguments)})},{key:"getOutput",value:(w=eo()(ui.a.mark(function J(){return ui.a.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:return It.abrupt("return",this.model.readData());case 1:case"end":return It.stop()}},J,this)})),function(){return w.apply(this,arguments)})},{key:"compile",value:(U=eo()(ui.a.mark(function J(){var It,Nt,K;return ui.a.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.initPromise;case 2:return It=Nu({},this.compiledBundle.context),Nt=this.engine.supportWebGPU?this.engine.useWGSL?Ks.WGSL:Ks.GLSL450:Ks.GLSL100,K=this.compiledBundle.shaders[Nt],It.defines.filter(function(Qt){return Qt.runtime}).forEach(function(Qt){var qt="".concat("__DefineValuePlaceholder__").concat(Qt.name);K=K.replace(qt,"".concat(Qt.value))}),It.shader=K,It.uniforms.forEach(function(Qt){if(!Qt.data&&Qt.storageClass===za.StorageBuffer){var qt=1;Qt.type===Ua.FloatArray?qt=1:Qt.type===Ua.Vector4FloatArray&&(qt=4),Qt.data=new Float32Array(It.output.length*qt).fill(0)}}),this.compiledBundle.context=It,Pt.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=Pt.sent;case 12:case"end":return Pt.stop()}},J,this)})),function(){return U.apply(this,arguments)})}]),Q}(),Yl=Mi()(Ru.prototype,"engine",[zl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xl=Mi()(Ru.prototype,"configService",[Vl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wl=Ru))||Wl),Ha=(Zl=Object(_r.injectable)(),Qs=Object(_r.inject)(yr.MeshComponentManager),$l=Object(_r.inject)(yr.CullableComponentManager),ql=Object(_r.inject)(yr.TransformComponentManager),tf=Object(_r.inject)(yr.Systems),ef=Object(_r.named)(yr.SceneGraphSystem),Zl((uf=Lu=function(){function Q(){xi()(this,Q),this.attributes={},this.config=void 0,di()(this,"mesh",rf,this),di()(this,"cullable",of,this),di()(this,"transform",af,this),di()(this,"sceneGraphSystem",sf,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return ki()(Q,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(w){this.config=w}},{key:"setEntity",value:function(w){this.entity=w,this.cullable.create(w),this.meshComponent=this.mesh.create(w),this.transformComponent=this.transform.create(w),this.onEntityCreated()}},{key:"setMaterial",value:function(w){return this.meshComponent.material=w,this}},{key:"setGeometry",value:function(w){return this.meshComponent.geometry=w,this}},{key:"setAttributes",value:function(w){var L=this;Object.keys(w).forEach(function(J){w[J]!==void 0&&w[J]!==L.attributes[J]&&(L.onAttributeChanged({name:J,data:w[J]}),L.attributes[J]=w[J])})}},{key:"setVisible",value:function(w){return this.meshComponent.visible=w,this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(w){return this.sceneGraphSystem.attach(this.entity,w.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(w){var L=w.name,J=w.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(L),J)}},{key:"convertAttributeName2UniformName",value:function(w){return w}}]),Q}(),Lu.POINT="point",Lu.LINE="line",Lu.GRID="grid",Ya=uf,rf=Mi()(Ya.prototype,"mesh",[Qs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),of=Mi()(Ya.prototype,"cullable",[$l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),af=Mi()(Ya.prototype,"transform",[ql],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sf=Mi()(Ya.prototype,"sceneGraphSystem",[tf,ef],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nf=Ya))||nf),Bh=e(253),Fh=e.n(Bh),Gh=function(){function Q(U,w){xi()(this,Q),this.attribute=void 0,this.buffer=void 0;var L=w.buffer,J=w.offset,It=w.stride,Nt=w.normalized,K=w.size,Pt=w.divisor;this.buffer=L,this.attribute={buffer:L.get(),offset:J||0,stride:It||0,normalized:Nt||!1,divisor:Pt||0},K&&(this.attribute.size=K)}return ki()(Q,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(w){this.buffer.subData(w)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),Q}(),_h=(Pa={},mr()(Pa,Jn.POINTS,"points"),mr()(Pa,Jn.LINES,"lines"),mr()(Pa,Jn.LINE_LOOP,"line loop"),mr()(Pa,Jn.LINE_STRIP,"line strip"),mr()(Pa,Jn.TRIANGLES,"triangles"),mr()(Pa,Jn.TRIANGLE_FAN,"triangle fan"),mr()(Pa,Jn.TRIANGLE_STRIP,"triangle strip"),Pa),lf=(Es={},mr()(Es,Jn.STATIC_DRAW,"static"),mr()(Es,Jn.DYNAMIC_DRAW,"dynamic"),mr()(Es,Jn.STREAM_DRAW,"stream"),Es),Sc=(xa={},mr()(xa,Jn.BYTE,"int8"),mr()(xa,Jn.UNSIGNED_INT,"int16"),mr()(xa,Jn.INT,"int32"),mr()(xa,Jn.UNSIGNED_BYTE,"uint8"),mr()(xa,Jn.UNSIGNED_SHORT,"uint16"),mr()(xa,Jn.UNSIGNED_INT,"uint32"),mr()(xa,Jn.FLOAT,"float"),xa),Uh=(qo={},mr()(qo,Jn.ALPHA,"alpha"),mr()(qo,Jn.LUMINANCE,"luminance"),mr()(qo,Jn.LUMINANCE_ALPHA,"luminance alpha"),mr()(qo,Jn.RGB,"rgb"),mr()(qo,Jn.RGBA,"rgba"),mr()(qo,Jn.RGBA4,"rgba4"),mr()(qo,Jn.RGB5_A1,"rgb5 a1"),mr()(qo,Jn.RGB565,"rgb565"),mr()(qo,Jn.DEPTH_COMPONENT,"depth"),mr()(qo,Jn.DEPTH_STENCIL,"depth stencil"),qo),ff=(Zs={},mr()(Zs,Jn.DONT_CARE,"dont care"),mr()(Zs,Jn.NICEST,"nice"),mr()(Zs,Jn.FASTEST,"fast"),Zs),hf=(Xa={},mr()(Xa,Jn.NEAREST,"nearest"),mr()(Xa,Jn.LINEAR,"linear"),mr()(Xa,Jn.LINEAR_MIPMAP_LINEAR,"mipmap"),mr()(Xa,Jn.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),mr()(Xa,Jn.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),mr()(Xa,Jn.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Xa),$s=(os={},mr()(os,Jn.REPEAT,"repeat"),mr()(os,Jn.CLAMP_TO_EDGE,"clamp"),mr()(os,Jn.MIRRORED_REPEAT,"mirror"),os),Gu=(Bu={},mr()(Bu,Jn.NONE,"none"),mr()(Bu,Jn.BROWSER_DEFAULT_WEBGL,"browser"),Bu),zh=(Oa={},mr()(Oa,Jn.NEVER,"never"),mr()(Oa,Jn.ALWAYS,"always"),mr()(Oa,Jn.LESS,"less"),mr()(Oa,Jn.LEQUAL,"lequal"),mr()(Oa,Jn.GREATER,"greater"),mr()(Oa,Jn.GEQUAL,"gequal"),mr()(Oa,Jn.EQUAL,"equal"),mr()(Oa,Jn.NOTEQUAL,"notequal"),Oa),df=(Ko={},mr()(Ko,Jn.FUNC_ADD,"add"),mr()(Ko,Jn.MIN_EXT,"min"),mr()(Ko,Jn.MAX_EXT,"max"),mr()(Ko,Jn.FUNC_SUBTRACT,"subtract"),mr()(Ko,Jn.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Ko),qs=(Bo={},mr()(Bo,Jn.ZERO,"zero"),mr()(Bo,Jn.ONE,"one"),mr()(Bo,Jn.SRC_COLOR,"src color"),mr()(Bo,Jn.ONE_MINUS_SRC_COLOR,"one minus src color"),mr()(Bo,Jn.SRC_ALPHA,"src alpha"),mr()(Bo,Jn.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),mr()(Bo,Jn.DST_COLOR,"dst color"),mr()(Bo,Jn.ONE_MINUS_DST_COLOR,"one minus dst color"),mr()(Bo,Jn.DST_ALPHA,"dst alpha"),mr()(Bo,Jn.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),mr()(Bo,Jn.CONSTANT_COLOR,"constant color"),mr()(Bo,Jn.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),mr()(Bo,Jn.CONSTANT_ALPHA,"constant alpha"),mr()(Bo,Jn.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),mr()(Bo,Jn.SRC_ALPHA_SATURATE,"src alpha saturate"),Bo),_u=(Sa={},mr()(Sa,Jn.NEVER,"never"),mr()(Sa,Jn.ALWAYS,"always"),mr()(Sa,Jn.LESS,"less"),mr()(Sa,Jn.LEQUAL,"lequal"),mr()(Sa,Jn.GREATER,"greater"),mr()(Sa,Jn.GEQUAL,"gequal"),mr()(Sa,Jn.EQUAL,"equal"),mr()(Sa,Jn.NOTEQUAL,"notequal"),Sa),Ka=(wa={},mr()(wa,Jn.ZERO,"zero"),mr()(wa,Jn.KEEP,"keep"),mr()(wa,Jn.REPLACE,"replace"),mr()(wa,Jn.INVERT,"invert"),mr()(wa,Jn.INCR,"increment"),mr()(wa,Jn.DECR,"decrement"),mr()(wa,Jn.INCR_WRAP,"increment wrap"),mr()(wa,Jn.DECR_WRAP,"decrement wrap"),wa),vf=(Fu={},mr()(Fu,Jn.FRONT,"front"),mr()(Fu,Jn.BACK,"back"),Fu),Ja=function(){function Q(U,w){xi()(this,Q),this.buffer=void 0;var L=w.data,J=w.usage,It=w.type;this.buffer=U.buffer({data:L,usage:lf[J||Jn.STATIC_DRAW],type:Sc[It||Jn.UNSIGNED_BYTE]})}return ki()(Q,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(w){var L=w.data,J=w.offset;this.buffer.subdata(L,J)}}]),Q}(),pf=e(23),No=e.n(pf);function gf(Q,U){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);U&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function Da(Q){for(var U=1;U<arguments.length;U++){var w=arguments[U]!=null?arguments[U]:{};U%2?gf(Object(w),!0).forEach(function(L){mr()(Q,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(w)):gf(Object(w)).forEach(function(L){Object.defineProperty(Q,L,Object.getOwnPropertyDescriptor(w,L))})}return Q}var yf=0,mf=function(){function Q(w,L){var J=this;xi()(this,Q),this.reGl=w,this.context=L,this.entity=na(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var It={};this.context.uniforms.forEach(function(qt){var xe=qt.name,Ie=qt.type,Ye=qt.data,Ne=qt.isReferer,Xe=qt.storageClass;if(Xe===za.StorageBuffer){if(Ne)J.textureCache[xe]={data:void 0},It["".concat(xe,"Size")]=function(){return Ye.compiledBundle.context.output.textureSize};else{J.textureCache[xe]=J.calcDataTexture(xe,Ie,Ye);var Je=J.textureCache[xe],Ge=Je.textureWidth,qe=Je.isOutput;It["".concat(xe,"Size")]=[Ge,Ge],qe&&(J.outputTextureName=xe,J.context.needPingpong&&(J.outputTextureName="".concat(xe,"Output"),J.textureCache[J.outputTextureName]=J.calcDataTexture(xe,Ie,Ye)))}It[xe]=function(){return J.textureCache[xe].texture}}else if(Xe===za.Uniform){if(Ye&&(Array.isArray(Ye)||ku()(Ye))&&Ye.length>16)throw new Error("invalid data type ".concat(Ie));It[xe]=function(){return qt.data}}});var Nt=this.getOuputDataTexture(),K=Nt.textureWidth,Pt=Nt.texelCount;It.u_OutputTextureSize=[K,K],It.u_OutputTexelCount=Pt,this.context.output.textureSize=[K,K];var Qt={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:It,vert:`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(Qt)}var U;return ki()(Q,[{key:"run",value:function(){var L=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){L.computeCommand()})}},{key:"readData",value:(U=eo()(ui.a.mark(function w(){var L,J,It,Nt,K,Pt,Qt,qt,xe=this;return ui.a.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){L=xe.reGl.read()}),!L){Ie.next=6;break}if(J=this.getOuputDataTexture(),It=J.originalDataLength,Nt=J.elementsPerTexel,K=J.typedArrayConstructor,Pt=K===void 0?Float32Array:K,Qt=[],Nt!==4)for(qt=0;qt<L.length;qt+=4)Nt===1?Qt.push(L[qt]):Nt===2?Qt.push(L[qt],L[qt+1]):Qt.push(L[qt],L[qt+1],L[qt+2]);else Qt=L;return Ie.abrupt("return",new Pt(Qt.slice(0,It)));case 6:return Ie.abrupt("return",new Float32Array);case 7:case"end":return Ie.stop()}},w,this)})),function(){return U.apply(this,arguments)})},{key:"confirmInput",value:function(L,J){var It;this.entity===L.entity?(this.dynamicPingpong=!0,It=this):It=L,this.textureCache[J].id=It.getOuputDataTexture().id,this.textureCache[J].texture=It.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(L,J){var It=this.context.uniforms.find(function(Qt){return Qt.name===L});if(It){var Nt=this.calcDataTexture(L,It.type,J),K=Nt.texture,Pt=Nt.data;this.textureCache[L].data=Pt,this.textureCache[L].texture=K}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var L=this.context.output.name;this.textureCache[L].id=this.getOuputDataTexture().id,this.textureCache[L].texture=this.getOuputDataTexture().texture}var J=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=J}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var L=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=L}},{key:"cloneDataTexture",value:function(L){var J=L.data,It=L.textureWidth;return Da(Da({},L),{},{id:yf++,texture:this.reGl.texture({width:It,height:It,data:J,type:"float"})})}},{key:"calcDataTexture",value:function(L,J,It){var Nt=1;J===Ua.Vector4FloatArray&&(Nt=4);for(var K=[],Pt=0;Pt<It.length;Pt+=Nt)Nt===1?K.push(It[Pt],0,0,0):Nt===2?K.push(It[Pt],It[Pt+1],0,0):Nt===3?K.push(It[Pt],It[Pt+1],It[Pt+2],0):Nt===4&&K.push(It[Pt],It[Pt+1],It[Pt+2],It[Pt+3]);var Qt=It.length,qt=Math.ceil(Qt/Nt),xe=Math.ceil(Math.sqrt(qt)),Ie=xe*xe;qt<Ie&&K.push.apply(K,No()(new Array(4*(Ie-qt)).fill(0)));var Ye=this.reGl.texture({width:xe,height:xe,data:K,type:"float"});return{id:yf++,data:K,originalDataLength:Qt,typedArrayConstructor:ku()(It)?It.constructor:void 0,textureWidth:xe,texture:Ye,texelCount:qt,elementsPerTexel:Nt,isOutput:L===this.context.output.name}}}]),Q}(),bf=function(){function Q(U,w){xi()(this,Q),this.elements=void 0;var L=w.data,J=w.usage,It=w.type,Nt=w.count;this.elements=U.elements({data:L,usage:lf[J||Jn.STATIC_DRAW],type:Sc[It||Jn.UNSIGNED_BYTE],count:Nt})}return ki()(Q,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(w){var L=w.data;this.elements.subdata(L)}},{key:"destroy",value:function(){this.elements.destroy()}}]),Q}(),Vh=function(){function Q(U,w){xi()(this,Q),this.framebuffer=void 0;var L=w.width,J=w.height,It=w.color,Nt=w.colors,K=(w.depth,w.stencil,{width:L,height:J});Array.isArray(Nt)&&(K.colors=Nt.map(function(Pt){return Pt.get()})),It&&typeof It!="boolean"&&(K.color=It.get()),this.framebuffer=U.framebuffer(K)}return ki()(Q,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(w){var L=w.width,J=w.height;this.framebuffer.resize(L,J)}}]),Q}(),Wh=e(90),Yh=e.n(Wh),xf=e(151),Uu=e.n(xf);function tu(Q){var U={};return Object.keys(Q).forEach(function(w){(function L(J,It,Nt,K){if(It===null||typeof It=="number"||typeof It=="boolean"||Array.isArray(It)&&typeof It[0]=="number"||ku()(It)||It===""||"resize"in It)return void(Nt["".concat(K&&K+".").concat(J)]=It);Uu()(It)&&Object.keys(It).forEach(function(Pt){L(Pt,It[Pt],Nt,"".concat(K&&K+".").concat(J))}),Array.isArray(It)&&It.forEach(function(Pt,Qt){Object.keys(Pt).forEach(function(qt){L(qt,Pt[qt],Nt,"".concat(K&&K+".").concat(J,"[").concat(Qt,"]"))})})})(w,Q[w],U,"")}),U}function Of(Q,U){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);U&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function Ms(Q){for(var U=1;U<arguments.length;U++){var w=arguments[U]!=null?arguments[U]:{};U%2?Of(Object(w),!0).forEach(function(L){mr()(Q,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(w)):Of(Object(w)).forEach(function(L){Object.defineProperty(Q,L,Object.getOwnPropertyDescriptor(w,L))})}return Q}var Sf,as,wf=function(){function Q(U,w){xi()(this,Q),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=U;var L=w.vs,J=w.fs,It=w.attributes,Nt=w.uniforms,K=w.primitive,Pt=w.count,Qt=w.elements,qt=w.depth,xe=w.blend,Ie=w.stencil,Ye=w.cull,Ne=w.instances,Xe=w.scissor,Je=w.viewport,Ge={};Nt&&(this.uniforms=tu(Nt),Object.keys(Nt).forEach(function(Pn){Ge[Pn]=U.prop(Pn)}));var qe={};Object.keys(It).forEach(function(Pn){qe[Pn]=It[Pn].get()});var yn={attributes:qe,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(J),uniforms:Ge,vert:L,primitive:_h[K===void 0?Jn.TRIANGLES:K]};Ne&&(yn.instances=Ne),Pt&&(yn.count=Pt),Qt&&(yn.elements=Qt.get()),Xe&&(yn.scissor=Xe),Je&&(yn.viewport=Je),this.initDepthDrawParams({depth:qt},yn),this.initBlendDrawParams({blend:xe},yn),this.initStencilDrawParams({stencil:Ie},yn),this.initCullDrawParams({cull:Ye},yn),this.drawCommand=U(yn)}return ki()(Q,[{key:"addUniforms",value:function(w){this.uniforms=Ms(Ms({},this.uniforms),tu(w))}},{key:"draw",value:function(w){var L=Ms(Ms({},this.uniforms),tu(w.uniforms||{})),J={};Object.keys(L).forEach(function(It){var Nt=Yh()(L[It]);Nt==="boolean"||Nt==="number"||Array.isArray(L[It])||L[It].BYTES_PER_ELEMENT?J[It]=L[It]:J[It]=L[It].get()}),this.drawCommand(J)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(w,L){var J=w.depth;J&&(L.depth={enable:J.enable===void 0||!!J.enable,mask:J.mask===void 0||!!J.mask,func:zh[J.func||Jn.LESS],range:J.range||[0,1]})}},{key:"initBlendDrawParams",value:function(w,L){var J=w.blend;if(J){var It=J.enable,Nt=J.func,K=J.equation,Pt=J.color,Qt=Pt===void 0?[0,0,0,0]:Pt;L.blend={enable:!!It,func:{srcRGB:qs[Nt&&Nt.srcRGB||Jn.SRC_ALPHA],srcAlpha:qs[Nt&&Nt.srcAlpha||Jn.SRC_ALPHA],dstRGB:qs[Nt&&Nt.dstRGB||Jn.ONE_MINUS_SRC_ALPHA],dstAlpha:qs[Nt&&Nt.dstAlpha||Jn.ONE_MINUS_SRC_ALPHA]},equation:{rgb:df[K&&K.rgb||Jn.FUNC_ADD],alpha:df[K&&K.alpha||Jn.FUNC_ADD]},color:Qt}}}},{key:"initStencilDrawParams",value:function(w,L){var J=w.stencil;if(J){var It=J.enable,Nt=J.mask,K=Nt===void 0?-1:Nt,Pt=J.func,Qt=Pt===void 0?{cmp:Jn.ALWAYS,ref:0,mask:-1}:Pt,qt=J.opFront,xe=qt===void 0?{fail:Jn.KEEP,zfail:Jn.KEEP,zpass:Jn.KEEP}:qt,Ie=J.opBack,Ye=Ie===void 0?{fail:Jn.KEEP,zfail:Jn.KEEP,zpass:Jn.KEEP}:Ie;L.stencil={enable:!!It,mask:K,func:Ms(Ms({},Qt),{},{cmp:_u[Qt.cmp]}),opFront:{fail:Ka[xe.fail],zfail:Ka[xe.zfail],zpass:Ka[xe.zpass]},opBack:{fail:Ka[Ye.fail],zfail:Ka[Ye.zfail],zpass:Ka[Ye.zpass]}}}}},{key:"initCullDrawParams",value:function(w,L){var J=w.cull;if(J){var It=J.enable,Nt=J.face,K=Nt===void 0?Jn.BACK:Nt;L.cull={enable:!!It,face:vf[K]}}}}]),Q}(),Xh=function(){function Q(U,w){xi()(this,Q),this.texture=void 0,this.width=void 0,this.height=void 0;var L=w.data,J=w.type,It=J===void 0?Jn.UNSIGNED_BYTE:J,Nt=w.width,K=w.height,Pt=w.flipY,Qt=Pt!==void 0&&Pt,qt=w.format,xe=qt===void 0?Jn.RGBA:qt,Ie=w.mipmap,Ye=Ie!==void 0&&Ie,Ne=w.wrapS,Xe=Ne===void 0?Jn.CLAMP_TO_EDGE:Ne,Je=w.wrapT,Ge=Je===void 0?Jn.CLAMP_TO_EDGE:Je,qe=w.aniso,yn=qe===void 0?0:qe,Pn=w.alignment,En=Pn===void 0?1:Pn,Ln=w.premultiplyAlpha,Zn=Ln!==void 0&&Ln,Qn=w.mag,qn=Qn===void 0?Jn.NEAREST:Qn,fr=w.min,br=fr===void 0?Jn.NEAREST:fr,gr=w.colorSpace,hr=gr===void 0?Jn.BROWSER_DEFAULT_WEBGL:gr;this.width=Nt,this.height=K;var Cr={width:Nt,height:K,type:Sc[It],format:Uh[xe],wrapS:$s[Xe],wrapT:$s[Ge],mag:hf[qn],min:hf[br],alignment:En,flipY:Qt,colorSpace:Gu[hr],premultiplyAlpha:Zn,aniso:yn};L&&(Cr.data=L),typeof Ye=="number"?Cr.mipmap=ff[Ye]:typeof Ye=="boolean"&&(Cr.mipmap=Ye),this.texture=U.texture(Cr)}return ki()(Q,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(w){var L=w.width,J=w.height;this.texture.resize(L,J),this.width=L,this.height=J}},{key:"destroy",value:function(){this.texture.destroy()}}]),Q}(),Hh=Object(_r.injectable)()(Sf=function(){function Q(){var w=this;xi()(this,Q),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var L=eo()(ui.a.mark(function J(It){return ui.a.wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return Nt.abrupt("return",new wf(w.gl,It));case 1:case"end":return Nt.stop()}},J)}));return function(J){return L.apply(this,arguments)}}(),this.createAttribute=function(L){return new Gh(w.gl,L)},this.createBuffer=function(L){return new Ja(w.gl,L)},this.createElements=function(L){return new bf(w.gl,L)},this.createTexture2D=function(L){return new Xh(w.gl,L)},this.createFramebuffer=function(L){return new Vh(w.gl,L)},this.useFramebuffer=function(L,J){w.gl({framebuffer:L?L.get():null})(J)},this.createComputeModel=function(){var L=eo()(ui.a.mark(function J(It){return ui.a.wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return Nt.abrupt("return",new mf(w.gl,It));case 1:case"end":return Nt.stop()}},J)}));return function(J){return L.apply(this,arguments)}}(),this.clear=function(L){var J=L.color,It=L.depth,Nt=L.stencil,K=L.framebuffer,Pt=K===void 0?null:K,Qt={color:J,depth:It,stencil:Nt};Qt.framebuffer=Pt===null?Pt:Pt.get(),w.gl.clear(Qt)},this.setScissor=function(L){w.gl&&w.gl._gl&&(L.enable&&L.box?(w.gl._gl.enable(Jn.SCISSOR_TEST),w.gl._gl.scissor(L.box.x,L.box.y,L.box.width,L.box.height)):w.gl._gl.disable(Jn.SCISSOR_TEST),w.gl._refresh())},this.viewport=function(L){var J=L.x,It=L.y,Nt=L.width,K=L.height;w.gl&&w.gl._gl&&(w.gl._gl.viewport(J,It,Nt,K),w.gl._refresh())},this.readPixels=function(L){var J=L.framebuffer,It={x:L.x,y:L.y,width:L.width,height:L.height};return J&&(It.framebuffer=J.get()),w.gl.read(It)},this.getCanvas=function(){return w.$canvas},this.getGLContext=function(){return w.gl._gl},this.destroy=function(){w.gl&&(w.gl.destroy(),w.inited=!1)}}var U;return ki()(Q,[{key:"init",value:(U=eo()(ui.a.mark(function w(L){return ui.a.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(!this.inited){J.next=2;break}return J.abrupt("return");case 2:return this.$canvas=L.canvas,J.next=5,new Promise(function(It,Nt){Fh()({canvas:L.canvas,attributes:{alpha:!0,antialias:L.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(Pt,Qt){!Pt&&Qt||Nt(Pt),It(Qt)}})});case 5:this.gl=J.sent,this.inited=!0;case 7:case"end":return J.stop()}},w,this)})),function(w){return U.apply(this,arguments)})},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),Q}())||Sf;function Kh(Q,U,w,L){if(typeof window!="undefined"){var J=document.getElementsByTagName("head")[0],It=document.createElement("script");It.setAttribute("type","text/javascript"),It.setAttribute("src",Q),L&&(It.id=L),It.onload=function(){U&&U()},It.onerror=function(Nt){w&&w("Unable to load script '".concat(Q,"'"),Nt)},J.appendChild(It)}}function Jh(Q,U){return new Promise(function(w,L){Kh(Q,function(){w()},function(J,It){L(It)})})}var Qh=function(){return Ef.apply(this,arguments)};function Ef(){return(Ef=eo()(ui.a.mark(function Q(){return ui.a.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(!as){U.next=2;break}return U.abrupt("return",as);case 2:return U.next=4,Jh("https://preview.babylonjs.com/glslang/glslang.js");case 4:return as=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),U.abrupt("return",as);case 6:case"end":return U.stop()}},Q)}))).apply(this,arguments)}var Ra,da,ss,Jo,As,zu,eu,wc=function(){function Q(U,w){xi()(this,Q),this.engine=U,this.options=w,this.attribute=void 0,this.buffer=void 0;var L=w,J=L.buffer,It=L.offset,Nt=L.stride,K=L.normalized,Pt=L.size,Qt=L.divisor,qt=L.arrayStride,xe=L.attributes,Ie=L.stepMode;this.buffer=J,this.attribute={buffer:J.get(),offset:It||0,stride:Nt||0,normalized:K||!1,divisor:Qt||0,arrayStride:qt||0,attributes:xe,stepMode:Ie||"vertex"},Pt&&(this.attribute.size=Pt)}return ki()(Q,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(w){this.buffer.subData(w)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),Q}(),us=function(){function Q(U,w){xi()(this,Q),this.engine=U,this.options=w,this.buffer=void 0;var L=w,J=L.data,It=L.usage;L.type,this.buffer=this.createBuffer(J instanceof Array?new Float32Array(J):J,It||Wr.BufferUsage.Vertex|Wr.BufferUsage.CopyDst)}return ki()(Q,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(w){var L=w.data,J=w.offset;this.setSubData(this.buffer,J,L instanceof Array?new Float32Array(L):L)}},{key:"createBuffer",value:function(w,L){var J=w.byteLength%4,It={size:w.byteLength+J,usage:L},Nt=this.engine.device.createBuffer(It);return this.setSubData(Nt,0,w),Nt}},{key:"setSubData",value:function(w,L,J){($o?this.engine.device.getQueue():this.engine.device.defaultQueue).writeBuffer(w,L,J)}}]),Q}(),Zh=e(92),nu=e.n(Zh),$h=function(){function Q(J,It){xi()(this,Q),this.engine=J,this.context=It,this.entity=na(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}var U,w,L;return ki()(Q,[{key:"init",value:(L=eo()(ui.a.mark(function J(){var It,Nt,K,Pt,Qt,qt,xe,Ie=this;return ui.a.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return Ye.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:It=Ye.sent,Nt=It.computeStage,K=this.context.uniforms.filter(function(Ne){return Ne.storageClass===za.StorageBuffer}),Pt=this.context.uniforms.filter(function(Ne){return Ne.storageClass===za.Uniform}),Qt=Pt.length?1:0,this.bindGroupEntries=[],Qt&&(qt=0,xe=[],Pt.forEach(function(Ne){if(Or()(Ne.data))Ie.uniformGPUBufferLayout.push({name:Ne.name,offset:qt}),qt+=4,xe.push(Ne.data);else{var Xe,Je=((Xe=Ne.data)===null||Xe===void 0?void 0:Xe.length)||1;Je===3&&(Je=4,Ne.data.push(0));var Ge=qt/4%4;if(Ge>0){var qe=4-Ge;if(Je>1&&Je<=qe)Je===2&&(qe===3&&(qt+=4,xe.push(0)),xe.push.apply(xe,No()(Ne.data)),Ie.uniformGPUBufferLayout.push({name:Ne.name,offset:qt}));else{for(var yn=0;yn<qe;yn++)qt+=4,xe.push(0);xe.push.apply(xe,No()(Ne.data)),Ie.uniformGPUBufferLayout.push({name:Ne.name,offset:qt})}}qt+=4*Je}}),this.uniformBuffer=new us(this.engine,{data:xe instanceof Array?new Float32Array(xe):xe,usage:Wr.BufferUsage.Uniform|Wr.BufferUsage.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),K.forEach(function(Ne){var Xe;nu()(Ne.data)||Ne.type!==Ua.Vector4FloatArray&&Ne.type!==Ua.FloatArray||(Ne.name===Ie.context.output.name?(Xe=new us(Ie.engine,{data:isFinite(Number(Ne.data))?[Ne.data]:Ne.data,usage:Wr.BufferUsage.Storage|Wr.BufferUsage.CopyDst|Wr.BufferUsage.CopySrc}),Ie.outputBuffer=Xe,Ie.context.output={name:Ne.name,length:isFinite(Number(Ne.data))?1:Ne.data.length,typedArrayConstructor:Float32Array,gpuBuffer:Xe.get()}):Ne.isReferer?Ne.data.model&&Ne.data.model.outputBuffer&&(Xe=Ne.data.model.outputBuffer):Xe=new us(Ie.engine,{data:isFinite(Number(Ne.data))?[Ne.data]:Ne.data,usage:Wr.BufferUsage.Storage|Wr.BufferUsage.CopyDst|Wr.BufferUsage.CopySrc}),Ie.vertexBuffers[Ne.name]=Xe,Ie.bindGroupEntries.push({binding:Qt,resource:{name:Ne.name,refer:Xe?void 0:Ne.data,buffer:Xe?Xe.get():void 0}}),Qt++)}),this.computePipeline=this.engine.device.createComputePipeline({computeStage:Nt}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return Ye.stop()}},J,this)})),function(){return L.apply(this,arguments)})},{key:"destroy",value:function(){var It=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach(function(Nt){return It.vertexBuffers[Nt].destroy()})}},{key:"readData",value:(w=eo()(ui.a.mark(function J(){var It,Nt,K,Pt,Qt,qt,xe,Ie,Ye;return ui.a.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(!(It=this.context.output)){Ne.next=16;break}if(Nt=It.length,K=It.typedArrayConstructor,!(Pt=It.gpuBuffer)){Ne.next=16;break}return Qt=Nt*K.BYTES_PER_ELEMENT,qt=this.engine.device.createBuffer({size:Qt,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),(xe=this.engine.device.createCommandEncoder()).copyBufferToBuffer(Pt,0,qt,0,Qt),($o?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([xe.finish()]),Ne.next=12,qt.mapAsync(Wr.MapMode.Read);case 12:return Ie=qt.getMappedRange(),Ye=new K(Ie.slice(0)),qt.unmap(),Ne.abrupt("return",Ye);case 16:return Ne.abrupt("return",new Float32Array);case 17:case"end":return Ne.stop()}},J,this)})),function(){return w.apply(this,arguments)})},{key:"run",value:function(){var It;this.engine.currentComputePass&&(this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(It=this.engine.currentComputePass).dispatch.apply(It,No()(this.context.dispatch)))}},{key:"updateBuffer",value:function(It,Nt){var K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Pt=this.vertexBuffers[It];Pt&&Pt.subData({data:Nt,offset:K})}},{key:"updateUniform",value:function(It,Nt){var K=this.uniformGPUBufferLayout.find(function(Pt){return Pt.name===It});K&&this.uniformBuffer.subData({data:Number.isFinite(Nt)?new Float32Array([Nt]):new Float32Array(Nt),offset:K.offset})}},{key:"confirmInput",value:function(It,Nt){var K=this.vertexBuffers[Nt],Pt=It.outputBuffer;if(K&&Pt&&K!==Pt){var Qt=this.engine.device.createCommandEncoder(),qt=It.context.output,xe=qt.length*qt.typedArrayConstructor.BYTES_PER_ELEMENT;Qt.copyBufferToBuffer(Pt.get(),0,K.get(),0,xe),($o?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([Qt.finish()])}}},{key:"compileShaderToSpirV",value:function(It,Nt,K){return this.compileRawShaderToSpirV(K+It,Nt)}},{key:"compileRawShaderToSpirV",value:function(It,Nt){return this.engine.glslang.compileGLSL(It,Nt)}},{key:"compileComputePipelineStageDescriptor",value:(U=eo()(ui.a.mark(function J(It){var Nt;return ui.a.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(Nt=It,this.engine.options.useWGSL){K.next=6;break}return K.next=5,this.compileShaderToSpirV(It,"compute",`#version 450
`);case 5:Nt=K.sent;case 6:return K.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:Nt,isWHLSL:$o}),entryPoint:"main"}});case 7:case"end":return K.stop()}},J,this)})),function(J){return U.apply(this,arguments)})}]),Q}(),qh=function(){function Q(U,w){xi()(this,Q),this.engine=U,this.options=w,this.indexCount=void 0,this.buffer=void 0;var L=w,J=L.data,It=(L.usage,L.type,L.count);this.indexCount=It||0,this.buffer=new us(U,{data:J instanceof Array?new Uint16Array(J):J,usage:Wr.BufferUsage.Index|Wr.BufferUsage.CopyDst})}return ki()(Q,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(w){this.buffer.subData(w)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),Q}(),td=function(){function Q(U,w){xi()(this,Q),this.engine=U,this.options=w,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var L=w,J=(L.width,L.height,L.color),It=(L.colors,L.depth);L.stencil,J&&(this.colorTexture=J),It&&(this.depthTexture=It)}return ki()(Q,[{key:"get",value:function(){var w,L;return{color:(w=this.colorTexture)===null||w===void 0?void 0:w.get(),depth:(L=this.depthTexture)===null||L===void 0?void 0:L.get()}}},{key:"destroy",value:function(){var w,L;(w=this.colorTexture)===null||w===void 0||w.destroy(),(L=this.depthTexture)===null||L===void 0||L.destroy()}},{key:"resize",value:function(w){var L,J,It=w.width,Nt=w.height;It===this.width&&Nt===this.height||((L=this.colorTexture)===null||L===void 0||L.resize({width:It,height:Nt}),(J=this.depthTexture)===null||J===void 0||J.resize({width:It,height:Nt})),this.width=It,this.height=Nt}}]),Q}(),ed=(Ra={},mr()(Ra,Jn.POINTS,Wr.PrimitiveTopology.PointList),mr()(Ra,Jn.LINES,Wr.PrimitiveTopology.LineList),mr()(Ra,Jn.LINE_LOOP,Wr.PrimitiveTopology.LineList),mr()(Ra,Jn.LINE_STRIP,Wr.PrimitiveTopology.LineStrip),mr()(Ra,Jn.TRIANGLES,Wr.PrimitiveTopology.TriangleList),mr()(Ra,Jn.TRIANGLE_FAN,Wr.PrimitiveTopology.TriangleList),mr()(Ra,Jn.TRIANGLE_STRIP,Wr.PrimitiveTopology.TriangleStrip),Ra),nd=(da={},mr()(da,Jn.NEVER,Wr.CompareFunction.Never),mr()(da,Jn.ALWAYS,Wr.CompareFunction.Always),mr()(da,Jn.LESS,Wr.CompareFunction.Less),mr()(da,Jn.LEQUAL,Wr.CompareFunction.LessEqual),mr()(da,Jn.GREATER,Wr.CompareFunction.Greater),mr()(da,Jn.GEQUAL,Wr.CompareFunction.GreaterEqual),mr()(da,Jn.EQUAL,Wr.CompareFunction.Equal),mr()(da,Jn.NOTEQUAL,Wr.CompareFunction.NotEqual),da),Vu=(ss={},mr()(ss,Jn.FUNC_ADD,Wr.BlendOperation.Add),mr()(ss,Jn.MIN_EXT,Wr.BlendOperation.Min),mr()(ss,Jn.MAX_EXT,Wr.BlendOperation.Max),mr()(ss,Jn.FUNC_SUBTRACT,Wr.BlendOperation.Subtract),mr()(ss,Jn.FUNC_REVERSE_SUBTRACT,Wr.BlendOperation.ReverseSubtract),ss),Wu=(Jo={},mr()(Jo,Jn.ZERO,Wr.BlendFactor.Zero),mr()(Jo,Jn.ONE,Wr.BlendFactor.One),mr()(Jo,Jn.SRC_COLOR,Wr.BlendFactor.SrcColor),mr()(Jo,Jn.ONE_MINUS_SRC_COLOR,Wr.BlendFactor.OneMinusSrcColor),mr()(Jo,Jn.SRC_ALPHA,Wr.BlendFactor.SrcAlpha),mr()(Jo,Jn.ONE_MINUS_SRC_ALPHA,Wr.BlendFactor.OneMinusSrcAlpha),mr()(Jo,Jn.DST_COLOR,Wr.BlendFactor.DstColor),mr()(Jo,Jn.ONE_MINUS_DST_COLOR,Wr.BlendFactor.OneMinusDstColor),mr()(Jo,Jn.DST_ALPHA,Wr.BlendFactor.DstAlpha),mr()(Jo,Jn.ONE_MINUS_DST_ALPHA,Wr.BlendFactor.OneMinusDstAlpha),mr()(Jo,Jn.CONSTANT_COLOR,Wr.BlendFactor.BlendColor),mr()(Jo,Jn.ONE_MINUS_CONSTANT_COLOR,Wr.BlendFactor.OneMinusBlendColor),mr()(Jo,Jn.SRC_ALPHA_SATURATE,Wr.BlendFactor.SrcAlphaSaturated),Jo),rd=(As={},mr()(As,Jn.ALPHA,"r8unorm"),mr()(As,Jn.RGBA,"rgba8unorm"),mr()(As,Jn.DEPTH_COMPONENT,"depth32float"),mr()(As,Jn.DEPTH_STENCIL,"depth24plus-stencil8"),As),Mf=(zu={},mr()(zu,Jn.NEAREST,"nearest"),mr()(zu,Jn.LINEAR,"linear"),zu),ru=(eu={},mr()(eu,Jn.REPEAT,"repeat"),mr()(eu,Jn.CLAMP_TO_EDGE,"clamp-to-edge"),mr()(eu,Jn.MIRRORED_REPEAT,"mirror-repeat"),eu);function id(Q){var U=Q.cull;return U&&U.enable?U.face?U.face===Jn.FRONT?Wr.CullMode.Front:Wr.CullMode.Back:void 0:Wr.CullMode.None}function od(Q){var U=Q.depth,w=(Q.stencil,{compare:Wr.CompareFunction.Always,depthFailOp:Wr.StencilOperation.Keep,failOp:Wr.StencilOperation.Keep,passOp:Wr.StencilOperation.Keep});return{depthWriteEnabled:U&&U.enable,depthCompare:nd[(U==null?void 0:U.func)||Jn.ALWAYS],format:Wr.TextureFormat.Depth24PlusStencil8,stencilFront:w,stencilBack:w,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function iu(Q,U){var w=Q.blend;return[{format:U,alphaBlend:{srcFactor:Wu[w&&w.func&&w.func.srcAlpha||Jn.ONE],dstFactor:Wu[w&&w.func&&w.func.dstAlpha||Jn.ZERO],operation:Vu[w&&w.equation&&w.equation.alpha||Jn.FUNC_ADD]},colorBlend:{srcFactor:Wu[w&&w.func&&w.func.srcRGB||Jn.ONE],dstFactor:Wu[w&&w.func&&w.func.dstRGB||Jn.ZERO],operation:Vu[w&&w.equation&&w.equation.rgb||Jn.FUNC_ADD]},writeMask:Wr.ColorWrite.All}]}function Cs(Q,U){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);U&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function Qa(Q){for(var U=1;U<arguments.length;U++){var w=arguments[U]!=null?arguments[U]:{};U%2?Cs(Object(w),!0).forEach(function(L){mr()(Q,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(w)):Cs(Object(w)).forEach(function(L){Object.defineProperty(Q,L,Object.getOwnPropertyDescriptor(w,L))})}return Q}function Af(Q){for(var U=0,w=arguments.length,L=new Array(w>1?w-1:0),J=1;J<w;J++)L[J-1]=arguments[J];for(var It=0,Nt=L;It<Nt.length;It++){var K=Nt[It];U+=K.length}for(var Pt=new Q(U),Qt=0,qt=0,xe=L;qt<xe.length;qt++){var Ie=xe[qt];Pt.set(Ie,Qt),Qt+=Ie.length}return Pt}var Za,Ea,Cf,Yu,Tf,jf,If,Pf,ou,Ec,Df,Rf,ad=function(){function Q(L,J){xi()(this,Q),this.engine=L,this.options=J,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}var U,w;return ki()(Q,[{key:"init",value:(w=eo()(ui.a.mark(function L(){var J,It,Nt,K,Pt,Qt,qt,xe,Ie,Ye,Ne,Xe,Je,Ge,qe,yn,Pn=this;return ui.a.wrap(function(En){for(;;)switch(En.prev=En.next){case 0:return J=this.options,It=J.vs,Nt=J.fs,K=J.attributes,Pt=J.uniforms,Qt=J.primitive,J.count,qt=J.elements,xe=J.depth,Ie=J.blend,Ye=J.stencil,Ne=J.cull,J.instances,En.next=3,this.compilePipelineStageDescriptor(It,Nt,null);case 3:Xe=En.sent,Je=Xe.vertexStage,Ge=Xe.fragmentStage,Pt&&this.buildUniformBindGroup(Pt),qt&&(this.indexBuffer=qt.get(),this.indexCount=qt.indexCount),qe={vertexBuffers:Object.keys(K).map(function(Ln,Zn){var Qn=K[Ln],qn=Qn.get(),fr=qn.arrayStride,br=qn.stepMode,gr=qn.attributes;return Pn.attributeCache[Ln]=Qn,{arrayStride:fr,stepMode:br,attributes:gr}})},yn={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:ed[Qt||Jn.TRIANGLES],rasterizationState:Qa(Qa({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:id({cull:Ne})}),depthStencilState:od({depth:xe,stencil:Ye}),colorStates:iu({blend:Ie},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:Je,fragmentStage:Ge,vertexState:qe},this.renderPipeline=this.engine.device.createRenderPipeline(yn);case 11:case"end":return En.stop()}},L,this)})),function(){return w.apply(this,arguments)})},{key:"addUniforms",value:function(J){this.uniforms=Qa(Qa({},this.uniforms),tu(J))}},{key:"draw",value:function(J){var It=this,Nt=this.engine.getCurrentRenderPass(),K=Qa(Qa({},this.uniforms),tu(J.uniforms||{})),Pt=[];Object.keys(K).forEach(function(Qt){var qt=Yh()(K[Qt]);if(qt==="boolean"||qt==="number"||Array.isArray(K[Qt])||K[Qt].BYTES_PER_ELEMENT){var xe,Ie=(xe=It.uniformGPUBufferLayout.find(function(yn){return yn.name===Qt}))===null||xe===void 0?void 0:xe.offset;nu()(Ie)||It.uniformBuffer.subData({data:K[Qt],offset:Ie})}else{var Ye,Ne=(Ye=It.uniformGPUBufferLayout.find(function(yn){return yn.name===Qt}))===null||Ye===void 0?void 0:Ye.offset;if(!nu()(Ne)){var Xe=K[Qt].get(),Je=Xe.color||Xe,Ge=Je.texture,qe=Je.sampler;qe&&(Pt.push({binding:Ne,resource:qe}),Ne++),Pt.push({binding:Ne,resource:Ge.createView()})}}}),this.uniformBuffer&&(Pt[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:Pt}),this.renderPipeline&&Nt.setPipeline(this.renderPipeline),Nt.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&Nt.setIndexBuffer(this.indexBuffer.get(),Wr.IndexFormat.Uint32,0),Object.keys(this.attributeCache).forEach(function(Qt,qt){Nt.setVertexBuffer(0+qt,It.attributeCache[Qt].get().buffer,0)}),this.indexBuffer?Nt.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):Nt.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:(U=eo()(ui.a.mark(function L(J,It,Nt){var K,Pt,Qt;return ui.a.wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:if(K=`#version 450
`,Pt=J,Qt=It,this.engine.options.useWGSL){qt.next=10;break}return qt.next=6,this.compileShaderToSpirV(J,"vertex",K);case 6:return Pt=qt.sent,qt.next=9,this.compileShaderToSpirV(It,"fragment",K);case 9:Qt=qt.sent;case 10:return qt.abrupt("return",this.createPipelineStageDescriptor(Pt,Qt));case 11:case"end":return qt.stop()}},L,this)})),function(L,J,It){return U.apply(this,arguments)})},{key:"compileShaderToSpirV",value:function(J,It,Nt){return this.compileRawShaderToSpirV(Nt+J,It)}},{key:"compileRawShaderToSpirV",value:function(J,It){return this.engine.glslang.compileGLSL(J,It)}},{key:"createPipelineStageDescriptor",value:function(J,It){return{vertexStage:{module:this.engine.device.createShaderModule({code:J,isWHLSL:$o}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:It,isWHLSL:$o}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:Wr.FrontFace.CCW,cullMode:Wr.CullMode.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(J){var It=this,Nt=0,K=Af.apply(void 0,[Float32Array].concat(No()(Object.keys(J).map(function(qt){return J[qt]?(It.uniformGPUBufferLayout.push({name:qt,offset:Nt}),Nt+=4*(J[qt].length||1),J[qt]):[]})))),Pt=[],Qt=!1;K.length&&(Qt=!0,Pt.push({binding:0,visibility:Wr.ShaderStage.Fragment|Wr.ShaderStage.Vertex,type:Wr.BindingType.UniformBuffer})),Object.keys(J).filter(function(qt){return J[qt]===null}).forEach(function(qt,xe){It.uniformGPUBufferLayout.push({name:qt,offset:2*xe+(Qt?1:0)}),Pt.push({binding:2*xe+(Qt?1:0),visibility:Wr.ShaderStage.Fragment,type:Wr.BindingType.Sampler},{binding:2*xe+(Qt?1:0)+1,visibility:Wr.ShaderStage.Fragment,type:Wr.BindingType.SampledTexture})}),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:Pt}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),Qt&&(this.uniformBuffer=new us(this.engine,{data:K instanceof Array?new Float32Array(K):K,usage:Wr.BufferUsage.Uniform|Wr.BufferUsage.CopyDst}))}}]),Q}(),sd=function(){function Q(U,w){xi()(this,Q),this.engine=U,this.options=w,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return ki()(Q,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(w){var L=w.width,J=w.height;L===this.width&&J===this.height||(this.destroy(),this.createTexture()),this.width=L,this.height=J}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var w=this.options,L=(w.data,w.type),J=(L===void 0&&Jn.UNSIGNED_BYTE,w.width),It=w.height,Nt=(w.flipY,w.format),K=Nt===void 0?Jn.RGBA:Nt,Pt=(w.mipmap,w.wrapS),Qt=Pt===void 0?Jn.CLAMP_TO_EDGE:Pt,qt=w.wrapT,xe=qt===void 0?Jn.CLAMP_TO_EDGE:qt,Ie=w.aniso,Ye=Ie===void 0?0:Ie,Ne=(w.alignment,w.premultiplyAlpha,w.mag),Xe=Ne===void 0?Jn.NEAREST:Ne,Je=w.min,Ge=Je===void 0?Jn.NEAREST:Je,qe=w.colorSpace,yn=(qe===void 0&&Jn.BROWSER_DEFAULT_WEBGL,w.usage);this.width=J,this.height=It,this.texture=this.engine.device.createTexture({size:[J,It,1],mipLevelCount:1,sampleCount:1,dimension:Wr.TextureDimension.E2d,format:rd[K],usage:yn||Wr.TextureUsage.Sampled|Wr.TextureUsage.CopyDst}),(!yn||yn&Wr.TextureUsage.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:ru[Qt],addressModeV:ru[xe],addressModeW:ru[Qt],magFilter:Mf[Xe],minFilter:Mf[Ge],maxAnisotropy:Ye}))}}]),Q}(),ud=Object(_r.injectable)()(Za=function(){function Q(){var L=this;xi()(this,Q),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(J){J.framebuffer;var It=J.color,Nt=J.depth,K=J.stencil;L.options.supportCompute&&L.startComputePass(),L.currentRenderTarget?(L.currentRenderPass&&L.endRenderTargetRenderPass(),L.startRenderTargetRenderPass(L.currentRenderTarget,It||null,!!Nt,!!K)):(L.mainColorAttachments[0].loadValue=It||Wr.LoadOp.Load,L.mainDepthAttachment.depthLoadValue=Nt||Wr.LoadOp.Load,L.mainDepthAttachment.stencilLoadValue=K?L.clearStencilValue:Wr.LoadOp.Load,L.mainRenderPass&&L.endMainRenderPass(),L.startMainRenderPass())},this.createModel=function(){var J=eo()(ui.a.mark(function It(Nt){var K;return ui.a.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return K=new ad(L,Nt),Pt.next=3,K.init();case 3:return Pt.abrupt("return",K);case 4:case"end":return Pt.stop()}},It)}));return function(It){return J.apply(this,arguments)}}(),this.createAttribute=function(J){return new wc(L,J)},this.createBuffer=function(J){return new us(L,J)},this.createElements=function(J){return new qh(L,J)},this.createTexture2D=function(J){return new sd(L,J)},this.createFramebuffer=function(J){return new td(L,J)},this.useFramebuffer=function(J,It){L.currentRenderTarget&&L.unbindFramebuffer(L.currentRenderTarget),L.currentRenderTarget=J,L.currentRenderTargetViewDescriptor={dimension:Wr.TextureViewDimension.E2d,arrayLayerCount:1,aspect:Wr.TextureAspect.All},L.currentRenderPass=null,It()},this.createComputeModel=function(){var J=eo()(ui.a.mark(function It(Nt){var K;return ui.a.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return K=new $h(L,Nt),Pt.next=3,K.init();case 3:return Pt.abrupt("return",K);case 4:case"end":return Pt.stop()}},It)}));return function(It){return J.apply(this,arguments)}}(),this.getCanvas=function(){return L.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(J){var It=J.x,Nt=J.y,K=J.width,Pt=J.height;L.currentRenderPass?L.transientViewport.x!==1/0?L.getCurrentRenderPass().setViewport(L.transientViewport.x,L.transientViewport.y,L.transientViewport.width,L.transientViewport.height,0,1):(It!==L.cachedViewport.x||Nt!==L.cachedViewport.y||K!==L.cachedViewport.width||Pt!==L.cachedViewport.height)&&(L.cachedViewport={x:It,y:Nt,width:K,height:Pt},L.getCurrentRenderPass().setViewport(It,Nt,K,Pt,0,1)):L.transientViewport={x:It,y:Nt,width:K,height:Pt}},this.readPixels=function(J){throw new Error("Method not implemented.")}}var U,w;return ki()(Q,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:(w=eo()(ui.a.mark(function L(J){return ui.a.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:return this.canvas=J.canvas,this.options=J,this.useWGSL=!!J.useWGSL,this.mainPassSampleCount=J.antialiasing?this.defaultSampleCount:1,It.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return It.stop()}},L,this)})),function(L){return w.apply(this,arguments)})},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach(function(J){return J.destroy()}),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),$o?this.device.getQueue().submit(this.commandBuffers.filter(function(J){return J})):this.device.defaultQueue.submit(this.commandBuffers.filter(function(J){return J}))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:(U=eo()(ui.a.mark(function L(){var J,It;return ui.a.wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return Nt.next=2,Qh();case 2:return this.glslang=Nt.sent,Nt.next=5,(J=navigator)===null||J===void 0||(It=J.gpu)===null||It===void 0?void 0:It.requestAdapter();case 5:return this.adapter=Nt.sent,Nt.next=8,this.adapter.requestDevice();case 8:this.device=Nt.sent;case 9:case"end":return Nt.stop()}},L,this)})),function(){return U.apply(this,arguments)})},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext($o?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:Wr.TextureUsage.OutputAttachment|Wr.TextureUsage.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var J={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:Wr.TextureDimension.E2d,format:Wr.TextureFormat.BGRA8Unorm,usage:Wr.TextureUsage.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(J),this.mainColorAttachments=[{attachment:$o?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:Wr.StoreOp.Store}]}else this.mainColorAttachments=[{attachment:$o?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:Wr.StoreOp.Store}];var It={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:Wr.TextureDimension.E2d,format:$o?"depth32float-stencil8":Wr.TextureFormat.Depth24PlusStencil8,usage:Wr.TextureUsage.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(It),this.mainDepthAttachment={attachment:$o?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:Wr.StoreOp.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:Wr.StoreOp.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=$o?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=$o?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(J,It,Nt){var K,Pt,Qt,qt=arguments.length>3&&arguments[3]!==void 0&&arguments[3],xe=(K=J.get().color)===null||K===void 0?void 0:K.texture;xe&&(Qt=xe.createView(this.currentRenderTargetViewDescriptor));var Ie,Ye=(Pt=J.get().depth)===null||Pt===void 0?void 0:Pt.texture;Ye&&(Ie=Ye.createView());var Ne=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:Qt,loadValue:It!==null?It:Wr.LoadOp.Load,storeOp:Wr.StoreOp.Store}],depthStencilAttachment:Ye&&Ie?{attachment:Ie,depthLoadValue:Nt?this.clearDepthValue:Wr.LoadOp.Load,depthStoreOp:Wr.StoreOp.Store,stencilLoadValue:qt?this.clearStencilValue:Wr.LoadOp.Load,stencilStoreOp:Wr.StoreOp.Store}:void 0});this.currentRenderPass=Ne,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&this.currentRenderPass!==null&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(J){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),Q}())||Za;function cd(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=To()(Q);if(U){var J=To()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var ld=(Ea=Object(_r.injectable)(),Cf=Object(_r.inject)(yr.Systems),Yu=Object(_r.named)(yr.MaterialSystem),Tf=Object(_r.inject)(yr.Systems),jf=Object(_r.named)(yr.GeometrySystem),If=Object(_r.inject)(yr.ShaderModuleService),Ea((ou=function(Q){Qo()(w,Q);var U=cd(w);function w(){var L;xi()(this,w);for(var J=arguments.length,It=new Array(J),Nt=0;Nt<J;Nt++)It[Nt]=arguments[Nt];return L=U.call.apply(U,[this].concat(It)),di()(L,"materialSystem",Ec,Eo()(L)),di()(L,"geometrySystem",Df,Eo()(L)),di()(L,"shaderModuleService",Rf,Eo()(L)),L}return ki()(w,[{key:"onAttributeChanged",value:function(J){var It=J.name,Nt=J.data,K=this.getMeshComponent();K&&K.material&&(It==="gridColor"?(K.material.setUniform("u_GridColor",Nt),K.material.setUniform("u_GridColor2",Nt)):It==="gridSize"&&(K.material.setUniform("u_GridSize",Nt),K.material.setUniform("u_GridSize2",Nt)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:`attribute vec3 a_Position;

varying vec3 v_Position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

void main() {
  v_Position = a_Position;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);
}`,fs:`// generate grid, borrow from clay.gl viewer
// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl
#extension GL_OES_standard_derivatives : enable

varying vec3 v_Position;
// varying vec3 v_Normal;

uniform float u_GridSize : 5;
uniform float u_GridSize2 : .5;
uniform vec4 u_GridColor : [0, 0, 0, 1];
uniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];
uniform bool u_GridEnabled : true;

// uniform vec3 u_LightDirection;
// uniform vec3 u_LightColor;
// uniform vec3 u_Camera;

void main() {
  // vec3 n = v_Normal;
  // vec3 l = normalize(u_LightDirection);
  // float NdotL = clamp(dot(n, l), 0.001, 1.0);

  gl_FragColor = vec4(1.);

  if (u_GridEnabled) {
    float wx = v_Position.x;
    float wz = v_Position.z;
    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;
    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;

    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;
    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;

    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);
    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);
    // if (v0 > 0.1) {
        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);
    // }
    // else {
        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);
    // }
  }

  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);
  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;

  // gl_FragColor.rgb *= diffuseColor;
}`});var J=this.shaderModuleService.getModule("grid"),It=J.vs,Nt=J.fs,K=J.uniforms,Pt=this.materialSystem.createShaderMaterial({vertexShader:It,fragmentShader:Nt});this.setMaterial(Pt);var Qt=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(Qt),Pt.setCull({enable:!1,face:Jn.BACK}).setDepth({enable:!0,func:Jn.LESS}),Pt.setUniform(K),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),Qt.setIndex([0,3,2,2,1,0]),Qt.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),w}(Ha),Ec=Mi()(ou.prototype,"materialSystem",[Cf,Yu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Df=Mi()(ou.prototype,"geometrySystem",[Tf,jf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rf=Mi()(ou.prototype,"shaderModuleService",[If],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pf=ou))||Pf),Xu=e(94),cs=e(63);function ls(Q,U,w,L,J){au(U,L,-J),au(U,L,J),Q.push(w),Q.push(w)}function au(Q,U,w){Q.push([[U[0],U[1]],w])}var kf,Mc,Ac,Nf,Ts,$a,Lf,fs,Bf,Ff,Gf;function fd(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=To()(Q);if(U){var J=To()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var _f,Hu,Uf,zf,Vf,Cc,Tc,su,jc,Wf,Ic,hd=(kf=Object(_r.injectable)(),Mc=Object(_r.inject)(yr.Systems),Ac=Object(_r.named)(yr.MaterialSystem),Nf=Object(_r.inject)(yr.Systems),Ts=Object(_r.named)(yr.GeometrySystem),$a=Object(_r.inject)(yr.ShaderModuleService),kf((fs=function(Q){Qo()(w,Q);var U=fd(w);function w(){var L;xi()(this,w);for(var J=arguments.length,It=new Array(J),Nt=0;Nt<J;Nt++)It[Nt]=arguments[Nt];return L=U.call.apply(U,[this].concat(It)),di()(L,"materialSystem",Bf,Eo()(L)),di()(L,"geometrySystem",Ff,Eo()(L)),di()(L,"shaderModuleService",Gf,Eo()(L)),L.vertexCount=void 0,L}return ki()(w,[{key:"onAttributeChanged",value:function(J){var It=J.name,Nt=J.data,K=this.getMeshComponent();if(K&&K.material)switch(It){case"dashArray":K.material.setUniform("u_dash_array",Nt);break;case"dashOffset":K.material.setUniform("u_dash_offset",Nt);break;case"dashRatio":K.material.setUniform("u_dash_ratio",Nt);break;case"thickness":K.material.setUniform("u_thickness",Nt);break;case"color":var Pt=new Array(this.vertexCount).fill(void 0).map(function(){return Nt}).reduce(function(Qt,qt){return[].concat(No()(Qt),No()(qt))},[]);K.geometry.setAttribute("a_color",Float32Array.from(Pt),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]})}}},{key:"onEntityCreated",value:function(){var J=this;this.shaderModuleService.registerModule("line",{vs:`attribute vec2 a_pos;
attribute vec4 a_color;
attribute float a_line_miter;
attribute vec2 a_line_normal;
attribute float a_counters;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform float u_thickness : 0.02;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
  v_color = a_color;
  v_counters = a_counters;

  vec3 normal = normalize(vec3(a_line_normal, 0.0));

  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);

  v_normal = vec2(normal * sign(a_line_miter));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;
}
`,fs:`uniform float u_dash_array : 0.02;
uniform float u_dash_offset : 0;
uniform float u_dash_ratio : 0;
uniform float u_thickness : 0.02;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
    float blur = 1. - smoothstep(0.98, 1., length(v_normal));

    gl_FragColor = v_color;
    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));
}`});var It=this.shaderModuleService.getModule("line"),Nt=It.vs,K=It.fs,Pt=It.uniforms,Qt=this.materialSystem.createShaderMaterial({vertexShader:Nt,fragmentShader:K}),qt=function(Pn,En,Ln){var Zn=[0,0],Qn=[0,0],qn=[0,0],fr=[0,0],br=-1,gr=!1,hr=null,Cr=Object(Xu.create)(),dr=Ln||0,Jr=[],qr=[],wi=[],Tr=[0,0];En&&(Pn=Pn.slice()).push(Pn[0]);for(var pi=Pn.length,Ei=1;Ei<pi;Ei++){var ji=dr,Ao=Pn[Ei-1],go=Pn[Ei],Ii=Ei<Pn.length-1?Pn[Ei+1]:null;if(Tr.push(Ei/pi,Ei/pi),Object(cs.direction)(Zn,go,Ao),hr||(hr=[0,0],Object(cs.normal)(hr,Zn)),gr||(gr=!0,ls(qr,Jr,Ao,hr,1)),wi.push([ji+0,ji+1,ji+2]),Ii){Object(cs.direction)(Qn,Ii,go);var Gi=Object(cs.computeMiter)(qn,fr,Zn,Qn,1),Po=Object(Xu.dot)(qn,hr)<0?-1:1,Fo=Gi>3;if(!isFinite(Gi)){Object(cs.normal)(hr,Zn),ls(qr,Jr,go,hr,1),wi.push(br===1?[ji,ji+2,ji+3]:[ji+2,ji+1,ji+3]),dr+=2,br=Po;continue}Fo?(Gi=3,Tr.push(Ei/pi),au(Jr,hr,-Po),qr.push(go),au(Jr,fr,Gi*Po),qr.push(go),wi.push(br!==-Po?[ji,ji+2,ji+3]:[ji+2,ji+1,ji+3]),wi.push([ji+2,ji+3,ji+4]),Object(cs.normal)(Cr,Qn),Object(Xu.copy)(hr,Cr),au(Jr,hr,-Po),qr.push(go),dr+=3):(ls(qr,Jr,go,fr,Gi),wi.push(br===1?[ji,ji+2,ji+3]:[ji+2,ji+1,ji+3]),Po=-1,Object(Xu.copy)(hr,fr),dr+=2),br=Po}else Object(cs.normal)(hr,Zn),ls(qr,Jr,go,hr,1),wi.push(br===1?[ji,ji+2,ji+3]:[ji+2,ji+1,ji+3]),dr+=2}return{normals:Jr,attrIndex:wi,attrPos:qr,attrCounters:Tr}}(this.config.points,!1),xe=qt.normals,Ie=qt.attrIndex,Ye=qt.attrPos,Ne=qt.attrCounters,Xe=Ye.length;this.vertexCount=Xe;var Je=this.geometrySystem.createBufferGeometry({vertexCount:Xe});this.setMaterial(Qt),this.setGeometry(Je),Qt.setCull({enable:!1,face:Jn.BACK}).setUniform(Pt),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var Ge=[],qe=[];xe.forEach(function(Pn){var En=Pn[0],Ln=Pn[1];Ge.push([En[0],En[1]]),qe.push(Ln)}),Je.setIndex(Ie.reduce(function(Pn,En){return[].concat(No()(Pn),No()(En))},[])),Je.setAttribute("a_pos",Float32Array.from(Ye.reduce(function(Pn,En){return[].concat(No()(Pn),No()(En))},[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var yn=new Array(Xe).fill(void 0).map(function(){return No()(J.config.color)}).reduce(function(Pn,En){return[].concat(No()(Pn),No()(En))},[]);Je.setAttribute("a_color",Float32Array.from(yn),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),Je.setAttribute("a_line_miter",Float32Array.from(qe),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),Je.setAttribute("a_line_normal",Float32Array.from(Ge.reduce(function(Pn,En){return[].concat(No()(Pn),No()(En))},[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),Je.setAttribute("a_counters",Float32Array.from(Ne),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),w}(Ha),Bf=Mi()(fs.prototype,"materialSystem",[Mc,Ac],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ff=Mi()(fs.prototype,"geometrySystem",[Nf,Ts],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gf=Mi()(fs.prototype,"shaderModuleService",[$a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lf=fs))||Lf);function Yf(Q,U){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);U&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function dd(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=To()(Q);if(U){var J=To()(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Vo()(this,w)}}var vd=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"];console.log();var Xf,Hf,Pc,Kf,uu,cu,Ku,Jf,Qf,pd=(_f=Object(_r.injectable)(),Hu=Object(_r.inject)(yr.Systems),Uf=Object(_r.named)(yr.MaterialSystem),zf=Object(_r.inject)(yr.Systems),Vf=Object(_r.named)(yr.GeometrySystem),Cc=Object(_r.inject)(yr.ShaderModuleService),_f((su=function(Q){Qo()(w,Q);var U=dd(w);function w(){var L;xi()(this,w);for(var J=arguments.length,It=new Array(J),Nt=0;Nt<J;Nt++)It[Nt]=arguments[Nt];return L=U.call.apply(U,[this].concat(It)),di()(L,"materialSystem",jc,Eo()(L)),di()(L,"geometrySystem",Wf,Eo()(L)),di()(L,"shaderModuleService",Ic,Eo()(L)),L}return ki()(w,[{key:"onAttributeChanged",value:function(J){var It=J.name,Nt=J.data,K=this.getMeshComponent();K&&K.material&&(It==="strokeWidth"?K.material.setUniform("u_stroke_width",Nt):It==="strokeColor"?K.material.setUniform("u_stroke_color",Nt):It==="strokeOpacity"?K.material.setUniform("u_stroke_opacity",Nt):It==="opacity"?K.material.setUniform("u_opacity",Nt):It==="blur"&&K.material.setUniform("u_blur",Nt))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:`attribute vec2 position;
attribute vec4 color;
attribute float shape;
attribute vec2 offset;
attribute float size;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

uniform float u_stroke_width : 0.01;
uniform float u_device_pixel_ratio;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "picking"

void main() {
  v_color = color;
  v_radius = size;

  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);

  // construct point coords
  v_data = vec4(position, antialiasblur, shape);

  gl_Position = projectionMatrix * modelViewMatrix
    * vec4(position * size + offset, 0.0, 1.0);

  setPickingColor(a_PickingColor);
}`,fs:`uniform float u_blur : 0.05;
uniform float u_opacity : 0.7;
uniform float u_stroke_width : 0.01;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "sdf2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  // if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  // } else if (shape == 1) {
  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  // } else if (shape == 2) {
  //   outer_df = sdBox(v_data.xy, vec2(1.));
  //   inner_df = sdBox(v_data.xy, vec2(r));
  // } else if (shape == 3) {
  //   outer_df = sdPentagon(v_data.xy, 0.8);
  //   inner_df = sdPentagon(v_data.xy, r * 0.8);
  // } else if (shape == 4) {
  //   outer_df = sdHexagon(v_data.xy, 0.8);
  //   inner_df = sdHexagon(v_data.xy, r * 0.8);
  // } else if (shape == 5) {
  //   outer_df = sdOctogon(v_data.xy, 1.0);
  //   inner_df = sdOctogon(v_data.xy, r);
  // } else if (shape == 6) {
  //   outer_df = sdHexagram(v_data.xy, 0.52);
  //   inner_df = sdHexagram(v_data.xy, r * 0.52);
  // } else if (shape == 7) {
  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));
  //   inner_df = sdRhombus(v_data.xy, vec2(r));
  // } else if (shape == 8) {
  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);
  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  // }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;

  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;

  gl_FragColor = filterColor(gl_FragColor);
}`});var J=this.shaderModuleService.getModule("grid"),It=J.vs,Nt=J.fs,K=J.uniforms,Pt=this.materialSystem.createShaderMaterial({vertexShader:It,fragmentShader:Nt,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:Jn.SRC_ALPHA,dstRGB:Jn.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});Pt.setUniform(function(xe){for(var Ie=1;Ie<arguments.length;Ie++){var Ye=arguments[Ie]!=null?arguments[Ie]:{};Ie%2?Yf(Object(Ye),!0).forEach(function(Ne){mr()(xe,Ne,Ye[Ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(xe,Object.getOwnPropertyDescriptors(Ye)):Yf(Object(Ye)).forEach(function(Ne){Object.defineProperty(xe,Ne,Object.getOwnPropertyDescriptor(Ye,Ne))})}return xe}({u_device_pixel_ratio:window.devicePixelRatio},K));var Qt=this.buildAttributes(),qt=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:Qt.instancedOffsets.length/2,vertexCount:6});qt.setIndex([0,2,1,0,3,2]),qt.setAttribute("position",Float32Array.from(Qt.positions),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),qt.setAttribute("offset",Float32Array.from(Qt.instancedOffsets),{arrayStride:8,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),qt.setAttribute("color",Float32Array.from(Qt.instancedColors),{arrayStride:16,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),qt.setAttribute("size",Float32Array.from(Qt.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),qt.setAttribute("shape",Float32Array.from(Qt.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),qt.setAttribute("a_PickingColor",Float32Array.from(Qt.instancedPickingColors),{arrayStride:12,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(Pt),this.setGeometry(qt)}},{key:"buildAttribute",value:function(J,It,Nt){var K,Pt,Qt,qt,xe;(K=It.instancedPickingColors).push.apply(K,No()([(xe=J.id||Nt)+1&255,xe+1>>8&255,xe+1>>8>>8&255])),It.instancedShapes.push(vd.indexOf(J.shape||"circle")),(Pt=It.instancedColors).push.apply(Pt,No()(J.color||[1,0,0,1])),(Qt=It.instancedOffsets).push.apply(Qt,No()(J.position||[0,0])),(qt=It.instancedSizes).push.apply(qt,No()(J.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var J=this,It={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach(function(Nt,K){J.buildAttribute(Nt,It,K)}):this.buildAttribute(this.config,It,0),It}}]),w}(Ha),jc=Mi()(su.prototype,"materialSystem",[Hu,Uf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wf=Mi()(su.prototype,"geometrySystem",[zf,Vf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ic=Mi()(su.prototype,"shaderModuleService",[Cc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tc=su))||Tc);function Dc(Q,U){var w;if(typeof Symbol=="undefined"||Q[Symbol.iterator]==null){if(Array.isArray(Q)||(w=function(Pt,Qt){if(!!Pt){if(typeof Pt=="string")return Zf(Pt,Qt);var qt=Object.prototype.toString.call(Pt).slice(8,-1);if(qt==="Object"&&Pt.constructor&&(qt=Pt.constructor.name),qt==="Map"||qt==="Set")return Array.from(Pt);if(qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qt))return Zf(Pt,Qt)}}(Q))||U&&Q&&typeof Q.length=="number"){w&&(Q=w);var L=0,J=function(){};return{s:J,n:function(){return L>=Q.length?{done:!0}:{done:!1,value:Q[L++]}},e:function(Qt){throw Qt},f:J}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var It,Nt=!0,K=!1;return{s:function(){w=Q[Symbol.iterator]()},n:function(){var Qt=w.next();return Nt=Qt.done,Qt},e:function(Qt){K=!0,It=Qt},f:function(){try{Nt||w.return==null||w.return()}finally{if(K)throw It}}}}function Zf(Q,U){(U==null||U>Q.length)&&(U=Q.length);for(var w=0,L=new Array(U);w<U;w++)L[w]=Q[w];return L}var $f,qf,th,eh,nh,Rc,rh,ih,oh,kc,Ju,ah,Nc=(Xf=Object(_r.injectable)(),Hf=Object(_r.inject)(yr.RenderEngine),Pc=Object(_r.inject)(yr.ShaderModuleService),Kf=Object(_r.inject)(yr.ConfigService),Xf((cu=function(){function Q(){xi()(this,Q),di()(this,"engine",Ku,this),di()(this,"shaderModule",Jf,this),di()(this,"configService",Qf,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0,this.container=void 0}var U,w;return ki()(Q,[{key:"init",value:(w=eo()(ui.a.mark(function L(){var J,It,Nt,K,Pt;return ui.a.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:if(this.shaderModule.registerBuiltinModules(),J=this.container.getAll(yr.Systems),!(It=this.configService.get()).canvas){Qt.next=25;break}return Qt.next=6,this.engine.init({canvas:It.canvas,swapChainFormat:Wr.TextureFormat.BGRA8Unorm,antialiasing:!1});case 6:Nt=Dc(J),Qt.prev=7,Nt.s();case 9:if((K=Nt.n()).done){Qt.next=16;break}if(!(Pt=K.value).initialize){Qt.next=14;break}return Qt.next=14,Pt.initialize();case 14:Qt.next=9;break;case 16:Qt.next=21;break;case 18:Qt.prev=18,Qt.t0=Qt.catch(7),Nt.e(Qt.t0);case 21:return Qt.prev=21,Nt.f(),Qt.finish(21);case 24:this.inited=!0;case 25:case"end":return Qt.stop()}},L,this,[[7,18,21,24]])})),function(){return w.apply(this,arguments)})},{key:"render",value:(U=eo()(ui.a.mark(function L(){var J,It,Nt,K,Pt,Qt,qt,xe=arguments;return ui.a.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(this.inited&&!this.rendering){Ie.next=2;break}return Ie.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach(function(Ye){Ye()}),this.rendering=!0,this.engine.beginFrame(),J=this.container.getAll(yr.Systems),It=xe.length,Nt=new Array(It),K=0;K<It;K++)Nt[K]=xe[K];Pt=Dc(J),Ie.prev=8,Pt.s();case 10:if((Qt=Pt.n()).done){Ie.next=17;break}if(!(qt=Qt.value).execute){Ie.next=15;break}return Ie.next=15,qt.execute(Nt);case 15:Ie.next=10;break;case 17:Ie.next=22;break;case 19:Ie.prev=19,Ie.t0=Ie.catch(8),Pt.e(Ie.t0);case 22:return Ie.prev=22,Pt.f(),Ie.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return Ie.stop()}},L,this,[[8,19,22,25]])})),function(){return U.apply(this,arguments)})},{key:"clear",value:function(J){var It=this;return this.inited?this.engine.clear(J):this.pendings.unshift(function(){It.engine.clear(J),It.pendings.shift()}),this}},{key:"setSize",value:function(J){var It=J.width,Nt=J.height,K=this.engine.getCanvas();return this.size={width:It,height:Nt},K.width=It,K.height=Nt,this}},{key:"getSize",value:function(){return this.size}}]),Q}(),Ku=Mi()(cu.prototype,"engine",[Hf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jf=Mi()(cu.prototype,"shaderModule",[Pc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qf=Mi()(cu.prototype,"configService",[Kf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uu=cu))||uu),sh=Object(_r.injectable)()($f=function(){function Q(){xi()(this,Q),this.entities=[]}return ki()(Q,[{key:"getEntities",value:function(){return this.entities}},{key:"addEntity",value:function(w){return this.entities.indexOf(w)===-1&&this.entities.push(w),this}},{key:"removeEntity",value:function(w){var L=this.entities.indexOf(w);return this.entities.splice(L,1),this}}]),Q}())||$f,uh=(qf=Object(_r.injectable)(),th=Object(_r.inject)(yr.Systems),eh=Object(_r.named)(yr.RendererSystem),qf((Rc=function(){function Q(){xi()(this,Q),di()(this,"rendererSystem",rh,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return ki()(Q,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(w){return this.camera=w,this}},{key:"setScene",value:function(w){return this.scene=w,this}},{key:"setViewport",value:function(w){return this.viewport=w,this}},{key:"setClearColor",value:function(w){return this.clearColor=w,this}},{key:"pick",value:function(w){return this.rendererSystem.pick(w,this)}}]),Q}(),rh=Mi()(Rc.prototype,"rendererSystem",[th,eh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nh=Rc))||nh);function ch(Q,U){var w=Object.keys(Q);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Q);U&&(L=L.filter(function(J){return Object.getOwnPropertyDescriptor(Q,J).enumerable})),w.push.apply(w,L)}return w}function gd(Q){for(var U=1;U<arguments.length;U++){var w=arguments[U]!=null?arguments[U]:{};U%2?ch(Object(w),!0).forEach(function(L){mr()(Q,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(w)):ch(Object(w)).forEach(function(L){Object.defineProperty(Q,L,Object.getOwnPropertyDescriptor(w,L))})}return Q}var va=(ih=Object(_r.injectable)(),oh=Object(_r.inject)(yr.ConfigService),ih((Ju=function(){function Q(){xi()(this,Q),di()(this,"configService",ah,this),this.container=void 0}var U;return ki()(Q,[{key:"getEngine",value:(U=eo()(ui.a.mark(function w(){var L,J,It,Nt;return ui.a.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return L=this.container.get(yr.RenderEngine),J=this.configService.get(),It=J.canvas,Nt=J.engineOptions,K.next=4,L.init(gd({canvas:It||Oc(),swapChainFormat:Wr.TextureFormat.BGRA8Unorm,antialiasing:!1},Nt));case 4:return K.abrupt("return",L);case 5:case"end":return K.stop()}},w,this)})),function(){return U.apply(this,arguments)})},{key:"getTransformComponent",value:function(L){return this.container.get(yr.TransformComponentManager).getComponentByEntity(L)}},{key:"getMeshComponent",value:function(L){return this.container.get(yr.MeshComponentManager).getComponentByEntity(L)}},{key:"setConfig",value:function(L){this.configService.set(L)}},{key:"setContainer",value:function(L){this.container=L}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return na()}},{key:"createScene",value:function(){return this.container.get(sh)}},{key:"createCamera",value:function(){return this.container.get(Hl)}},{key:"createView",value:function(){return this.container.get(uh)}},{key:"createRenderable",value:function(L,J,It){var Nt=J?this.container.getNamed(yr.Renderable,J):this.container.get(Ha);return Nt.setConfig(It||{}),Nt.setEntity(L),Nt}},{key:"createBoxGeometry",value:function(L){return this.container.getNamed(yr.Systems,yr.GeometrySystem).createBox(L)}},{key:"createBufferGeometry",value:function(L){return this.container.getNamed(yr.Systems,yr.GeometrySystem).createBufferGeometry(L)}},{key:"createInstancedBufferGeometry",value:function(L){return this.container.getNamed(yr.Systems,yr.GeometrySystem).createInstancedBufferGeometry(L)}},{key:"createBasicMaterial",value:function(){return this.container.getNamed(yr.Systems,yr.MaterialSystem).createBasicMaterial()}},{key:"createShaderMaterial",value:function(L){return this.container.getNamed(yr.Systems,yr.MaterialSystem).createShaderMaterial(L)}},{key:"createKernel",value:function(L){var J=this.container.get(cf);return typeof L=="string"?J.setBundle(JSON.parse(L)):J.setBundle(L),J.init(),J}},{key:"createRenderer",value:function(){var L=this.container.get(Nc);return L.container=this.container,L.init(),L}},{key:"destroy",value:function(){this.container.getAll(yr.Systems).forEach(function(L){L.tearDown&&L.tearDown()}),this.container.get(yr.RenderEngine).destroy(),this.container.get(yr.InteractorService).destroy()}}],[{key:"create",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},J=Nh(),It=navigator.gpu?ud:Hh;J.isBound(yr.RenderEngine)||J.bind(yr.RenderEngine).to(It).inSingletonScope(),J.bind(Nc).toSelf(),J.bind(cf).toSelf(),J.bind(Ha).toSelf(),J.bind(uh).toSelf(),J.bind(Hl).toSelf(),J.bind(sh).toSelf(),J.bind(Q).toSelf(),J.bind(yr.Renderable).to(pd).whenTargetNamed(Ha.POINT),J.bind(yr.Renderable).to(hd).whenTargetNamed(Ha.LINE),J.bind(yr.Renderable).to(ld).whenTargetNamed(Ha.GRID);var Nt=J.get(Q);return Nt.setContainer(J),Nt.setConfig(L),Nt}}]),Q}(),ah=Mi()(Ju.prototype,"configService",[oh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kc=Ju))||kc),hs=function(U,w){return U?A(U)?function(){return U}:U:function(){return w||1}},c=function(U,w){var L=[],J=[],It={},Nt=0;for(Nt=0;Nt<U.length;Nt++){var K=U[Nt];It[K.id]=Nt,L.push(K.x),L.push(K.y),L.push(0),L.push(0),J.push([])}for(Nt=0;Nt<w.length;Nt++){var Pt=w[Nt];J[It[Pt.source]].push(It[Pt.target]),J[It[Pt.target]].push(It[Pt.source])}var Qt=0;for(Nt=0;Nt<U.length;Nt++){var qt=L.length,xe=J[Nt],Ie=xe.length;L[4*Nt+2]=qt,L[4*Nt+3]=xe.length,Qt=Math.max(Qt,xe.length);for(var Ye=0;Ye<Ie;++Ye){var Ne=xe[Ye];L.push(+Ne)}}for(;L.length%4!=0;)L.push(0);return{maxEdgePerVetex:Qt,array:new Float32Array(L)}},o=function(U,w,L,J){var It=[],Nt=[],K={},Pt=0;for(Pt=0;Pt<U.length;Pt++){var Qt=U[Pt];K[Qt.id]=Pt,It.push(Qt.x),It.push(Qt.y),It.push(0),It.push(0),Nt.push([])}for(Pt=0;Pt<w.length;Pt++){var qt=w[Pt];Nt[K[qt.source]].push(K[qt.target]),Nt[K[qt.source]].push(L(qt)),Nt[K[qt.source]].push(J(qt)),Nt[K[qt.source]].push(0),Nt[K[qt.target]].push(K[qt.source]),Nt[K[qt.target]].push(L(qt)),Nt[K[qt.target]].push(J(qt)),Nt[K[qt.target]].push(0)}var xe=0;for(Pt=0;Pt<U.length;Pt++){var Ie=It.length,Ye=Nt[Pt],Ne=Ye.length;It[4*Pt+2]=Ie+1048576*Ne/4,It[4*Pt+3]=0,xe=Math.max(xe,Ne/4);for(var Xe=0;Xe<Ne;++Xe){var Je=Ye[Xe];It.push(+Je)}}for(;It.length%4!=0;)It.push(0);return{maxEdgePerVetex:xe,array:new Float32Array(It)}},t=function(U,w){var L=[],J=U.length,It={};return w.forEach(function(Nt){U.forEach(function(K,Pt){if(It[Nt[K]]===void 0&&(It[Nt[K]]=Object.keys(It).length),L.push(It[Nt[K]]),Pt===J-1)for(;L.length%4!=0;)L.push(0)})}),{array:new Float32Array(L),count:Object.keys(It).length}},i=function(U){for(var w=[],L=U.length,J=U[0].length,It=function(Pt){U.forEach(function(Qt,qt){if(w.push(Qt[Pt]),qt===L-1)for(;w.length%4!=0;)w.push(0)})},Nt=0;Nt<J;Nt++)It(Nt);return new Float32Array(w)};function x(Q){return(x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function R(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function nt(Q,U){return(nt=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function Mt(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=ne(Q);if(U){var J=ne(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Lt(this,w)}}function Lt(Q,U){return!U||x(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function ne(Q){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}var ge=function(U,w,L,J){return new(L||(L=Promise))(function(It,Nt){function K(qt){try{Qt(J.next(qt))}catch(xe){Nt(xe)}}function Pt(qt){try{Qt(J.throw(qt))}catch(xe){Nt(xe)}}function Qt(qt){var xe;qt.done?It(qt.value):(xe=qt.value,xe instanceof L?xe:new L(function(Ie){Ie(xe)})).then(K,Pt)}Qt((J=J.apply(U,w||[])).next())})},be=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&nt(Nt,K)})(It,Q);var U,w,L,J=Mt(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).maxIteration=1e3,K.gravity=10,K.speed=1,K.clustering=!1,K.clusterField="cluster",K.clusterGravity=10,K.workerEnabled=!1,K.nodes=[],K.edges=[],K.width=300,K.height=300,K.nodeMap={},K.nodeIdxMap={},K.updateCfg(Nt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return ge(this,void 0,void 0,rt.mark(function K(){var Pt,Qt,qt,xe,Ie,Ye=this;return rt.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if((Qt=(Pt=this).nodes)&&Qt.length!==0){Ne.next=5;break}return Pt.onLayoutEnd&&Pt.onLayoutEnd(),Ne.abrupt("return");case 5:if(Pt.width||typeof window=="undefined"||(Pt.width=window.innerWidth),Pt.height||typeof window=="undefined"||(Pt.height=window.innerHeight),Pt.center||(Pt.center=[Pt.width/2,Pt.height/2]),qt=Pt.center,Qt.length!==1){Ne.next=14;break}return Qt[0].x=qt[0],Qt[0].y=qt[1],Pt.onLayoutEnd&&Pt.onLayoutEnd(),Ne.abrupt("return");case 14:return xe={},Ie={},Qt.forEach(function(Xe,Je){A(Xe.x)||(Xe.x=Math.random()*Ye.width),A(Xe.y)||(Xe.y=Math.random()*Ye.height),xe[Xe.id]=Xe,Ie[Xe.id]=Je}),Pt.nodeMap=xe,Pt.nodeIdxMap=Ie,Ne.next=21,Pt.run();case 21:case"end":return Ne.stop()}},K,this)}))}},{key:"executeWithWorker",value:function(K,Pt){return ge(this,void 0,void 0,rt.mark(function Qt(){var qt,xe,Ie,Ye,Ne,Xe=this;return rt.wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:if(xe=(qt=this).nodes,Ie=qt.center,xe&&xe.length!==0){Je.next=5;break}return Je.abrupt("return");case 5:if(xe.length!==1){Je.next=9;break}return xe[0].x=Ie[0],xe[0].y=Ie[1],Je.abrupt("return");case 9:return Ye={},Ne={},xe.forEach(function(Ge,qe){A(Ge.x)||(Ge.x=Math.random()*Xe.width),A(Ge.y)||(Ge.y=Math.random()*Xe.height),Ye[Ge.id]=Ge,Ne[Ge.id]=qe}),qt.nodeMap=Ye,qt.nodeIdxMap=Ne,Je.next=16,qt.run(K,Pt);case 16:case"end":return Je.stop()}},Qt,this)}))}},{key:"run",value:function(K,Pt){return ge(this,void 0,void 0,rt.mark(function Qt(){var qt,xe,Ie,Ye,Ne,Xe,Je,Ge,qe,yn,Pn,En,Ln,Zn,Qn,qn,fr,br,gr,hr,Cr,dr,Jr,qr,wi,Tr,pi=this;return rt.wrap(function(Ei){for(;;)switch(Ei.prev=Ei.next){case 0:for(xe=(qt=this).nodes,Ie=qt.edges,Ye=qt.maxIteration,Ne=qt.center,Xe=qt.height*qt.width,Je=Math.sqrt(Xe)/10,Ge=Xe/(xe.length+1),qe=Math.sqrt(Ge),yn=qt.speed,Pn=qt.clustering,En=t([qt.clusterField],xe),Ln=En.array,Zn=En.count,Qn=xe.length,qn=c(xe,Ie),fr=qn.maxEdgePerVetex,br=qn.array,gr=qt.workerEnabled,hr=gr?va.create({canvas:K,engineOptions:{supportCompute:!0}}):va.create({engineOptions:{supportCompute:!0}}),Cr=qt.onLayoutEnd,dr=[],Jr=0;Jr<Zn;Jr++)dr.push(0,0,0,0);return qr=hr.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([Qn,1,1]).setBinding({u_Data:br,u_K:qe,u_K2:Ge,u_Gravity:qt.gravity,u_ClusterGravity:qt.clusterGravity||qt.gravity||1,u_Speed:yn,u_MaxDisplace:Je,u_Clustering:Pn?1:0,u_Center:Ne,u_AttributeArray:Ln,u_ClusterCenters:dr,MAX_EDGE_PER_VERTEX:fr,VERTEX_COUNT:Qn}),Pn&&(wi=hr.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([Zn,1,1]).setBinding({u_Data:br,u_NodeAttributes:Ln,u_ClusterCenters:dr,VERTEX_COUNT:Qn,CLUSTER_COUNT:Zn})),Tr=function(){return ge(pi,void 0,void 0,rt.mark(function Ao(){var go,Ii;return rt.wrap(function(Gi){for(;;)switch(Gi.prev=Gi.next){case 0:go=0;case 1:if(!(go<Ye)){Gi.next=13;break}return Gi.next=4,qr.execute();case 4:if(!Pn){Gi.next=9;break}return wi.setBinding({u_Data:qr}),Gi.next=8,wi.execute();case 8:qr.setBinding({u_ClusterCenters:wi});case 9:qr.setBinding({u_MaxDisplace:Je*=.99});case 10:go++,Gi.next=1;break;case 13:return Gi.next=15,qr.getOutput();case 15:Ii=Gi.sent,K?Pt.postMessage({type:Yr,vertexEdgeData:Ii}):xe.forEach(function(Po,Fo){var ka=Ii[4*Fo],pa=Ii[4*Fo+1];Po.x=ka,Po.y=pa}),Cr&&Cr();case 18:case"end":return Gi.stop()}},Ao)}))},Ei.next=24,Tr();case 24:case"end":return Ei.stop()}},Qt,this)}))}},{key:"getType",value:function(){return"fruchterman-gpu"}}])&&R(U.prototype,w),L&&R(U,L),It}(m);function Ae(Q){return(Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function We(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function an(Q,U){return(an=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function gn(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Hn(Q);if(U){var J=Hn(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Yn(this,w)}}function Yn(Q,U){return!U||Ae(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function Hn(Q){return(Hn=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}var ir=function(U,w,L,J){return new(L||(L=Promise))(function(It,Nt){function K(qt){try{Qt(J.next(qt))}catch(xe){Nt(xe)}}function Pt(qt){try{Qt(J.throw(qt))}catch(xe){Nt(xe)}}function Qt(qt){var xe;qt.done?It(qt.value):(xe=qt.value,xe instanceof L?xe:new L(function(Ie){Ie(xe)})).then(K,Pt)}Qt((J=J.apply(U,w||[])).next())})},cr=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&an(Nt,K)})(It,Q);var U,w,L,J=gn(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).maxIteration=1e3,K.edgeStrength=200,K.nodeStrength=1e3,K.coulombDisScale=.005,K.damping=.9,K.maxSpeed=1e3,K.minMovement=1,K.interval=.02,K.factor=1,K.linkDistance=1,K.gravity=10,K.workerEnabled=!1,K.nodes=[],K.edges=[],K.width=300,K.height=300,K.nodeMap={},K.nodeIdxMap={},K.updateCfg(Nt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return ir(this,void 0,void 0,rt.mark(function K(){var Pt,Qt,qt,xe,Ie;return rt.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if((Qt=(Pt=this).nodes)&&Qt.length!==0){Ye.next=5;break}return Pt.onLayoutEnd&&Pt.onLayoutEnd(),Ye.abrupt("return");case 5:if(Pt.width||typeof window=="undefined"||(Pt.width=window.innerWidth),Pt.height||typeof window=="undefined"||(Pt.height=window.innerHeight),Pt.center||(Pt.center=[Pt.width/2,Pt.height/2]),qt=Pt.center,Qt.length!==1){Ye.next=14;break}return Qt[0].x=qt[0],Qt[0].y=qt[1],Pt.onLayoutEnd&&Pt.onLayoutEnd(),Ye.abrupt("return");case 14:return xe={},Ie={},Qt.forEach(function(Ne,Xe){A(Ne.x)||(Ne.x=Math.random()*Pt.width),A(Ne.y)||(Ne.y=Math.random()*Pt.height),xe[Ne.id]=Ne,Ie[Ne.id]=Xe}),Pt.nodeMap=xe,Pt.nodeIdxMap=Ie,Pt.nodeStrength=hs(Pt.nodeStrength,1),Pt.edgeStrength=hs(Pt.edgeStrength,1),Ye.next=23,Pt.run();case 23:case"end":return Ye.stop()}},K,this)}))}},{key:"executeWithWorker",value:function(K,Pt){var Qt=this,qt=Qt.nodes,xe=Qt.center;if(qt&&qt.length!==0){if(qt.length===1)return qt[0].x=xe[0],void(qt[0].y=xe[1]);var Ie={},Ye={};qt.forEach(function(Ne,Xe){A(Ne.x)||(Ne.x=Math.random()*Qt.width),A(Ne.y)||(Ne.y=Math.random()*Qt.height),Ie[Ne.id]=Ne,Ye[Ne.id]=Xe}),Qt.nodeMap=Ie,Qt.nodeIdxMap=Ye,Qt.nodeStrength=hs(Qt.nodeStrength,1),Qt.edgeStrength=hs(Qt.edgeStrength,1),Qt.run(K,Pt)}}},{key:"run",value:function(K,Pt){return ir(this,void 0,void 0,rt.mark(function Qt(){var qt,xe,Ie,Ye,Ne,Xe,Je,Ge,qe,yn,Pn,En,Ln,Zn,Qn,qn,fr,br,gr,hr,Cr,dr,Jr,qr,wi,Tr=this;return rt.wrap(function(pi){for(;;)switch(pi.prev=pi.next){case 0:for(xe=(qt=this).nodes,Ie=qt.edges,Ye=qt.maxIteration,qt.width||typeof window=="undefined"||(qt.width=window.innerWidth),qt.height||typeof window=="undefined"||(qt.height=window.innerHeight),Ne=xe.length,qt.linkDistance=hs(qt.linkDistance),qt.edgeStrength=hs(qt.edgeStrength),Xe=o(xe,Ie,qt.linkDistance,qt.edgeStrength),Je=Xe.maxEdgePerVetex,Ge=Xe.array,qt.degrees=y(xe.length,qt.nodeIdxMap,Ie),qe=[],yn=[],Pn=[],En=[],Ln=[],qt.getMass||(qt.getMass=function(Ei){return qt.degrees[qt.nodeIdxMap[Ei.id]]||1}),Zn=qt.gravity,Qn=qt.center,xe.forEach(function(Ei,ji){qe.push(qt.getMass(Ei)),yn.push(qt.nodeStrength(Ei)),qt.degrees[ji]||(qt.degrees[ji]=0);var Ao=[Qn[0],Qn[1],Zn];if(qt.getCenter){var go=qt.getCenter(Ei,qt.degrees[ji]);go&&A(go[0])&&A(go[1])&&A(go[2])&&(Ao=go)}Pn.push(Ao[0]),En.push(Ao[1]),Ln.push(Ao[2])}),qn=i([qe,qt.degrees,yn]),fr=i([Pn,En,Ln]),br=qt.workerEnabled,gr=br?va.create({canvas:K,engineOptions:{supportCompute:!0}}):va.create({engineOptions:{supportCompute:!0}}),hr=qt.onLayoutEnd,Cr=[],Ge.forEach(function(Ei){Cr.push(Ei)}),dr=0;dr<4;dr++)Cr.push(0);return Jr=gr.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = dist * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (1000.0 * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.w;\\nvar ay : f32 = vy * attributes2.w;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = dist * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (1000.0 * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.w;\\nfloat ay = vy * attributes2.w;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = dist * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (1000.0 * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.w;\\nfloat ay = vy * attributes2.w;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([Ne,1,1]).setBinding({u_Data:Ge,u_damping:qt.damping,u_maxSpeed:qt.maxSpeed,u_minMovement:qt.minMovement,u_coulombDisScale:qt.coulombDisScale,u_factor:qt.factor,u_NodeAttributeArray1:qn,u_NodeAttributeArray2:fr,MAX_EDGE_PER_VERTEX:Je,VERTEX_COUNT:Ne,u_AveMovement:Cr,u_interval:qt.interval}),qr=gr.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([1,1,1]).setBinding({u_Data:Ge,VERTEX_COUNT:Ne,u_AveMovement:[0,0,0,0]}),wi=function(){return ir(Tr,void 0,void 0,rt.mark(function ji(){var Ao,go,Ii;return rt.wrap(function(Gi){for(;;)switch(Gi.prev=Gi.next){case 0:Ao=0;case 1:if(!(Ao<Ye)){Gi.next=12;break}return Gi.next=4,Jr.execute();case 4:return qr.setBinding({u_Data:Jr}),Gi.next=7,qr.execute();case 7:go=Math.max(.02,qt.interval-.002*Ao),Jr.setBinding({u_interval:go,u_AveMovement:qr});case 9:Ao++,Gi.next=1;break;case 12:return Gi.next=14,Jr.getOutput();case 14:Ii=Gi.sent,K?Pt.postMessage({type:Yr,vertexEdgeData:Ii}):xe.forEach(function(Po,Fo){var ka=Ii[4*Fo],pa=Ii[4*Fo+1];Po.x=ka,Po.y=pa}),hr&&hr();case 17:case"end":return Gi.stop()}},ji)}))},pi.next=33,wi();case 33:case"end":return pi.stop()}},Qt,this)}))}},{key:"getType",value:function(){return"gForce-gpu"}}])&&We(U.prototype,w),L&&We(U,L),It}(m);function kr(Q){return(kr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Q)}function zr(Q,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Q,L.key,L)}}function Ur(Q,U){return(Ur=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Q,U)}function Ri(Q){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=mi(Q);if(U){var J=mi(this).constructor;w=Reflect.construct(L,arguments,J)}else w=L.apply(this,arguments);return Ai(this,w)}}function Ai(Q,U){return!U||kr(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Q):U}function mi(Q){return(mi=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Q)}var Ki=function(Q){(function(Nt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(K&&K.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),K&&Ur(Nt,K)})(It,Q);var U,w,L,J=Ri(It);function It(Nt){var K;return function(Pt,Qt){if(!(Pt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=J.call(this)).center=[0,0],K.maxIteration=100,K.gravity=10,K.comboGravity=10,K.linkDistance=10,K.alpha=1,K.alphaMin=.001,K.alphaDecay=1-Math.pow(K.alphaMin,1/300),K.alphaTarget=0,K.velocityDecay=.6,K.edgeStrength=.6,K.nodeStrength=30,K.preventOverlap=!1,K.preventNodeOverlap=!1,K.preventComboOverlap=!1,K.collideStrength=void 0,K.nodeCollideStrength=.5,K.comboCollideStrength=.5,K.comboSpacing=20,K.comboPadding=10,K.optimizeRangeFactor=1,K.onTick=function(){},K.onLayoutEnd=function(){},K.depthAttractiveForceScale=1,K.depthRepulsiveForceScale=2,K.nodes=[],K.edges=[],K.combos=[],K.comboTrees=[],K.width=300,K.height=300,K.bias=[],K.nodeMap={},K.oriComboMap={},K.indexMap={},K.comboMap={},K.previousLayouted=!1,K.updateCfg(Nt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}},{key:"execute",value:function(){var K=this.nodes,Pt=this.center;if(this.comboTree={id:"comboTreeRoot",depth:-1,children:this.comboTrees},K&&K.length!==0){if(K.length===1)return K[0].x=Pt[0],K[0].y=Pt[1],void(this.onLayoutEnd&&this.onLayoutEnd());this.initVals(),this.run(),this.onLayoutEnd&&this.onLayoutEnd()}else this.onLayoutEnd&&this.onLayoutEnd()}},{key:"run",value:function(){var K=this,Pt=K.nodes,Qt=K.previousLayouted?K.maxIteration/5:K.maxIteration;K.width||typeof window=="undefined"||(K.width=window.innerWidth),K.height||typeof window=="undefined"||(K.height=window.innerHeight);var qt=K.center,xe=K.velocityDecay,Ie=K.comboMap;K.previousLayouted||K.initPos(Ie);for(var Ye=function(qe){var yn=[];Pt.forEach(function(Pn,En){yn[En]={x:0,y:0}}),K.applyCalculate(yn),K.applyComboCenterForce(yn),Pt.forEach(function(Pn,En){A(Pn.x)&&A(Pn.y)&&(Pn.x+=yn[En].x*xe,Pn.y+=yn[En].y*xe)}),K.alpha+=(K.alphaTarget-K.alpha)*K.alphaDecay,K.onTick()},Ne=0;Ne<Qt;Ne++)Ye();var Xe=[0,0];Pt.forEach(function(Ge){A(Ge.x)&&A(Ge.y)&&(Xe[0]+=Ge.x,Xe[1]+=Ge.y)}),Xe[0]/=Pt.length,Xe[1]/=Pt.length;var Je=[qt[0]-Xe[0],qt[1]-Xe[1]];Pt.forEach(function(Ge,qe){A(Ge.x)&&A(Ge.y)&&(Ge.x+=Je[0],Ge.y+=Je[1])}),K.combos.forEach(function(Ge){var qe=Ie[Ge.id];qe&&qe.empty&&(Ge.x=qe.cx||Ge.x,Ge.y=qe.cy||Ge.y)}),K.previousLayouted=!0}},{key:"initVals",value:function(){var K=this.edges,Pt=this.nodes,Qt=this.combos,qt={},xe={},Ie={};Pt.forEach(function(Tr,pi){xe[Tr.id]=Tr,Ie[Tr.id]=pi}),this.nodeMap=xe,this.indexMap=Ie;var Ye={};Qt.forEach(function(Tr){Ye[Tr.id]=Tr}),this.oriComboMap=Ye,this.comboMap=this.getComboMap();var Ne=this.preventOverlap;this.preventComboOverlap=this.preventComboOverlap||Ne,this.preventNodeOverlap=this.preventNodeOverlap||Ne;var Xe=this.collideStrength;Xe&&(this.comboCollideStrength=Xe,this.nodeCollideStrength=Xe),this.comboCollideStrength=this.comboCollideStrength?this.comboCollideStrength:0,this.nodeCollideStrength=this.nodeCollideStrength?this.nodeCollideStrength:0;for(var Je=0;Je<K.length;++Je)qt[K[Je].source]?qt[K[Je].source]++:qt[K[Je].source]=1,qt[K[Je].target]?qt[K[Je].target]++:qt[K[Je].target]=1;for(var Ge=[],qe=0;qe<K.length;++qe)Ge[qe]=qt[K[qe].source]/(qt[K[qe].source]+qt[K[qe].target]);this.bias=Ge;var yn,Pn,En=this.nodeSize,Ln=this.nodeSpacing;if(Pn=A(Ln)?function(){return Ln}:T(Ln)?Ln:function(){return 0},this.nodeSpacing=Pn,En)if(T(En))yn=function(pi){return En(pi)};else if(l(En)){var Zn=(En[0]>En[1]?En[0]:En[1])/2;yn=function(pi){return Zn}}else{var Qn=En/2;yn=function(pi){return Qn}}else yn=function(pi){return pi.size?l(pi.size)?(pi.size[0]>pi.size[1]?pi.size[0]:pi.size[1])/2:pi.size/2:10};this.nodeSize=yn;var qn,fr=this.comboSpacing;qn=A(fr)?function(){return fr}:T(fr)?fr:function(){return 0},this.comboSpacing=qn;var br,gr=this.comboPadding;br=A(gr)?function(){return gr}:l(gr)?function(){return Math.max.apply(null,gr)}:T(gr)?gr:function(){return 0},this.comboPadding=br;var hr,Cr=this.linkDistance;Cr||(Cr=10),hr=A(Cr)?function(Tr){return Cr}:Cr,this.linkDistance=hr;var dr,Jr=this.edgeStrength;Jr||(Jr=1),dr=A(Jr)?function(Tr){return Jr}:Jr,this.edgeStrength=dr;var qr,wi=this.nodeStrength;wi||(wi=30),qr=A(wi)?function(Tr){return wi}:wi,this.nodeStrength=qr}},{key:"initPos",value:function(K){this.nodes.forEach(function(Pt,Qt){var qt=Pt.comboId,xe=K[qt];qt&&xe?(Pt.x=xe.cx+100/(Qt+1),Pt.y=xe.cy+100/(Qt+1)):(Pt.x=100/(Qt+1),Pt.y=100/(Qt+1))})}},{key:"getComboMap",value:function(){var K=this,Pt=K.nodeMap,Qt=K.indexMap,qt=K.comboTrees,xe=K.oriComboMap,Ie={};return(qt||[]).forEach(function(Ye){var Ne=[];h(Ye,function(Xe){if(Xe.itemType==="node"||!xe[Xe.id])return!0;if(Ie[Xe.id]===void 0){var Je={id:Xe.id,name:Xe.id,cx:0,cy:0,count:0,depth:K.oriComboMap[Xe.id].depth,children:[]};Ie[Xe.id]=Je}var Ge=Xe.children;Ge&&Ge.forEach(function(Zn){if(!Ie[Zn.id]&&!Pt[Zn.id])return!0;Ne.push(Zn)});var qe=Ie[Xe.id];if(qe.cx=0,qe.cy=0,Ne.length===0){qe.empty=!0;var yn=xe[Xe.id],Pn=Object.keys(Pt).length,En="".concat(Xe.id,"-visual-child-").concat(Pn),Ln={id:En,x:yn.x,y:yn.y,depth:qe.depth+1,itemType:"node"};K.nodes.push(Ln),Pt[En]=Ln,Qt[En]=Pn,qe.cx=yn.x,qe.cy=yn.y,Ne.push(Ln)}return Ne.forEach(function(Zn){if(qe.count++,Zn.itemType!=="node"){var Qn=Ie[Zn.id];return A(Qn.cx)&&(qe.cx+=Qn.cx),void(A(Qn.cy)&&(qe.cy+=Qn.cy))}var qn=Pt[Zn.id];qn&&(A(qn.x)&&(qe.cx+=qn.x),A(qn.y)&&(qe.cy+=qn.y))}),qe.cx/=qe.count,qe.cy/=qe.count,qe.children=Ne,!0})}),Ie}},{key:"applyComboCenterForce",value:function(K){var Pt=this.gravity,Qt=this.comboGravity||Pt,qt=this.alpha,xe=this.comboTrees,Ie=this.indexMap,Ye=this.nodeMap,Ne=this.comboMap;(xe||[]).forEach(function(Xe){h(Xe,function(Je){if(Je.itemType==="node"||!Ne[Je.id])return!0;var Ge=Ne[Je.id],qe=(Ge.depth+1)/10*.5,yn=Ge.cx,Pn=Ge.cy;return Ge.cx=0,Ge.cy=0,Ge.children.forEach(function(En){if(En.itemType!=="node"){var Ln=Ne[En.id];return Ln&&A(Ln.cx)&&(Ge.cx+=Ln.cx),void(Ln&&A(Ln.cy)&&(Ge.cy+=Ln.cy))}var Zn=Ye[En.id],Qn=Zn.x-yn||.005,qn=Zn.y-Pn||.005,fr=Math.sqrt(Qn*Qn+qn*qn),br=Ie[Zn.id],gr=Qt*qt/fr*qe;K[br].x-=Qn*gr,K[br].y-=qn*gr,A(Zn.x)&&(Ge.cx+=Zn.x),A(Zn.y)&&(Ge.cy+=Zn.y)}),Ge.cx/=Ge.count,Ge.cy/=Ge.count,!0})})}},{key:"applyCalculate",value:function(K){var Pt=this.comboMap,Qt=this.nodes,qt={};Qt.forEach(function(xe,Ie){Qt.forEach(function(Ye,Ne){if(!(Ie<Ne)){var Xe=xe.x-Ye.x||.005,Je=xe.y-Ye.y||.005,Ge=Xe*Xe+Je*Je,qe=Math.sqrt(Ge);Ge<1&&(Ge=qe),qt["".concat(xe.id,"-").concat(Ye.id)]={vx:Xe,vy:Je,vl2:Ge,vl:qe},qt["".concat(Ye.id,"-").concat(xe.id)]={vl2:Ge,vl:qe,vx:-Xe,vy:-Je}}})}),this.updateComboSizes(Pt),this.calRepulsive(K,qt),this.calAttractive(K,qt),this.preventComboOverlap&&this.comboNonOverlapping(K,Pt)}},{key:"updateComboSizes",value:function(K){var Pt=this,Qt=Pt.comboTrees,qt=Pt.nodeMap,xe=Pt.nodeSize,Ie=Pt.comboSpacing,Ye=Pt.comboPadding;(Qt||[]).forEach(function(Ne){var Xe=[];h(Ne,function(Je){if(Je.itemType==="node")return!0;var Ge=K[Je.id];if(!Ge)return!1;var qe=Je.children;qe&&qe.forEach(function(En){(K[En.id]||qt[En.id])&&Xe.push(En)}),Ge.minX=1/0,Ge.minY=1/0,Ge.maxX=-1/0,Ge.maxY=-1/0,Xe.forEach(function(En){if(En.itemType!=="node")return!0;var Ln=qt[En.id];if(!Ln)return!0;var Zn=xe(Ln),Qn=Ln.x-Zn,qn=Ln.y-Zn,fr=Ln.x+Zn,br=Ln.y+Zn;Ge.minX>Qn&&(Ge.minX=Qn),Ge.minY>qn&&(Ge.minY=qn),Ge.maxX<fr&&(Ge.maxX=fr),Ge.maxY<br&&(Ge.maxY=br)});var yn=Pt.oriComboMap[Je.id].size||10;l(yn)&&(yn=yn[0]);var Pn=Math.max(Ge.maxX-Ge.minX,Ge.maxY-Ge.minY,yn);return Ge.r=Pn/2+Ie(Ge)/2+Ye(Ge),!0})})}},{key:"comboNonOverlapping",value:function(K,Pt){var Qt=this.comboTree,qt=this.comboCollideStrength,xe=this.indexMap,Ie=this.nodeMap;h(Qt,function(Ye){if(!Pt[Ye.id]&&!Ie[Ye.id]&&Ye.id!=="comboTreeRoot")return!1;var Ne=Ye.children;return Ne&&Ne.length>1&&Ne.forEach(function(Xe,Je){if(Xe.itemType==="node")return!1;var Ge=Pt[Xe.id];Ge&&Ne.forEach(function(qe,yn){if(Je<=yn||qe.itemType==="node")return!1;var Pn=Pt[qe.id];if(!Pn)return!1;var En=Ge.cx-Pn.cx||.005,Ln=Ge.cy-Pn.cy||.005,Zn=En*En+Ln*Ln,Qn=Ge.r,qn=Pn.r,fr=Qn+qn,br=qn*qn,gr=Qn*Qn;if(Zn<fr*fr){var hr=Xe.children;if(!hr||hr.length===0)return!1;var Cr=qe.children;if(!Cr||Cr.length===0)return!1;var dr=Math.sqrt(Zn),Jr=(fr-dr)/dr*qt,qr=En*Jr,wi=Ln*Jr,Tr=br/(gr+br),pi=1-Tr;hr.forEach(function(Ei){if(Ei.itemType!=="node")return!1;if(Ie[Ei.id]){var ji=xe[Ei.id];Cr.forEach(function(Ao){if(Ao.itemType!=="node"||!Ie[Ao.id])return!1;var go=xe[Ao.id];K[ji].x+=qr*Tr,K[ji].y+=wi*Tr,K[go].x-=qr*pi,K[go].y-=wi*pi})}})}})}),!0})}},{key:"calRepulsive",value:function(K,Pt){var Qt=this,qt=Qt.nodes,xe=Qt.width*Qt.optimizeRangeFactor,Ie=Qt.nodeStrength,Ye=Qt.alpha,Ne=Qt.nodeCollideStrength,Xe=Qt.preventNodeOverlap,Je=Qt.nodeSize,Ge=Qt.nodeSpacing,qe=Qt.depthRepulsiveForceScale,yn=Qt.center;qt.forEach(function(Pn,En){if(Pn.x&&Pn.y){if(yn){var Ln=Qt.gravity,Zn=Pn.x-yn[0]||.005,Qn=Pn.y-yn[1]||.005,qn=Math.sqrt(Zn*Zn+Qn*Qn);K[En].x-=Zn*Ln*Ye/qn,K[En].y-=Qn*Ln*Ye/qn}qt.forEach(function(fr,br){if(En!==br&&fr.x&&fr.y){var gr=Pt["".concat(Pn.id,"-").concat(fr.id)],hr=gr.vl2,Cr=gr.vl;if(!(Cr>xe)){var dr=Pt["".concat(Pn.id,"-").concat(fr.id)],Jr=dr.vx,qr=dr.vy,wi=Math.log(Math.abs(fr.depth-Pn.depth)/10)+1||1;wi=wi<1?1:wi,fr.comboId!==Pn.comboId&&(wi+=1);var Tr=wi?Math.pow(qe,wi):1,pi=Ie(fr)*Ye/hr*Tr;if(K[En].x+=Jr*pi,K[En].y+=qr*pi,En<br&&Xe){var Ei=Je(Pn)+Ge(Pn),ji=Je(fr)+Ge(fr),Ao=Ei+ji;if(hr<Ao*Ao){var go=(Ao-Cr)/Cr*Ne,Ii=ji*ji,Gi=Ii/(Ei*Ei+Ii),Po=Jr*go,Fo=qr*go;K[En].x+=Po*Gi,K[En].y+=Fo*Gi,Gi=1-Gi,K[br].x-=Po*Gi,K[br].y-=Fo*Gi}}}}})}})}},{key:"calAttractive",value:function(K,Pt){var Qt=this,qt=Qt.edges,xe=Qt.linkDistance,Ie=Qt.alpha,Ye=Qt.edgeStrength,Ne=Qt.bias,Xe=Qt.depthAttractiveForceScale;qt.forEach(function(Je,Ge){if(Je.source&&Je.target&&Je.source!==Je.target){var qe=Qt.indexMap[Je.source],yn=Qt.indexMap[Je.target],Pn=Qt.nodeMap[Je.source],En=Qt.nodeMap[Je.target];if(Pn&&En){var Ln=Math.log(Math.abs(Pn.depth-En.depth)/10);Pn.comboId===En.comboId&&(Ln/=2);var Zn=Ln?Math.pow(Xe,Ln):1;if(Pn.comboId!==En.comboId&&Zn===1?Zn=Xe/2:Pn.comboId===En.comboId&&(Zn=2),A(En.x)&&A(Pn.x)&&A(En.y)&&A(Pn.y)){var Qn=Pt["".concat(Je.target,"-").concat(Je.source)],qn=Qn.vl,fr=Qn.vx,br=Qn.vy,gr=(qn-xe(Je))/qn*Ie*Ye(Je)*Zn,hr=fr*gr,Cr=br*gr,dr=Ne[Ge];K[yn].x-=hr*dr,K[yn].y-=Cr*dr,K[qe].x+=hr*(1-dr),K[qe].y+=Cr*(1-dr)}}}})}},{key:"getType",value:function(){return"comboForce"}}])&&zr(U.prototype,w),L&&zr(U,L),It}(m),vo,po=new Proxy({},{get:function(U,w){return Wn(w)},set:function(U,w,L){return mn(w,L),!0}});vo||(vo={}),mn("grid",ht),mn("random",Ot),mn("force",$r),mn("circular",Pi),mn("dagre",Oe),mn("radial",Pe),mn("concentric",oi),mn("mds",Uo),mn("fruchterman",Xo),mn("fruchterman-gpu",be),mn("gForce",it),mn("gForce-gpu",cr),mn("comboForce",Ki);var yo=self;yo.onmessage=function(Q){(function(U){var w=U.data.type;return w===Vi||w===pr})(Q)&&function(U){switch(U.data.type){case Vi:var w=U.data,L=w.nodes,J=w.edges,It=w.layoutCfg,Nt=It===void 0?{}:It,K=Nt.type,Pt=Wn(K);if(!Pt){yo.postMessage({type:jr,message:"layout ".concat(K," not found")});break}var Qt=new Pt(Nt);Qt.init({nodes:L,edges:J}),Qt.execute(),yo.postMessage({nodes:L,type:ro}),Qt.destroy();break;case pr:var qt=U.data,xe=qt.nodes,Ie=qt.edges,Ye=qt.layoutCfg,Ne=Ye===void 0?{}:Ye,Xe=qt.canvas,Je=Ne.type,Ge=Wn(Je);if(!Ge){yo.postMessage({type:jr,message:"layout ".concat(Je," not found")});break}if(Je.split("-")[1]!=="gpu"){yo.postMessage({type:jr,message:"layout ".concat(Je," does not support GPU")});break}var qe=new Ge(Ne);qe.init({nodes:xe,edges:Ie}),qe.executeWithWorker(Xe,yo)}}(Q)};var wo=function(U,w){w.isCustomLayout=!0,mn(U,w)}},function(a,E,e){"use strict";e.d(E,"a",function(){return b}),e.d(E,"b",function(){return S});var r=e(36),p=e(22);function b(l,A){A.forEach(function(j){j.draw(l)})}function S(l,A){var j=l.get("canvas");if(j&&j.get("autoDraw")){var y=j.get("context"),n=l.getParent(),s=n?n.getChildren():[j],h=l.get("el");if(A==="remove")if(l.get("isClipShape")){var M=h&&h.parentNode,O=M&&M.parentNode;M&&O&&O.removeChild(M)}else h&&h.parentNode&&h.parentNode.removeChild(h);else if(A==="show")h.setAttribute("visibility","visible");else if(A==="hide")h.setAttribute("visibility","hidden");else if(A==="zIndex")Object(p.c)(h,s.indexOf(l));else if(A==="sort"){var T=l.get("children");T&&T.length&&Object(p.d)(l,function(v,m){return T.indexOf(v)-T.indexOf(m)?1:0})}else A==="clear"?h&&(h.innerHTML=""):A==="matrix"?Object(r.c)(l):A==="clip"?Object(r.a)(l,y):A==="attr"||A==="add"&&l.draw(y)}}},function(a,E){a.exports=function(e,r){return e===r||e!=e&&r!=r}},function(a,E,e){var r=e(47).Symbol;a.exports=r},function(a,E,e){(function(r){function p(n){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(n)}var b=e(47),S=e(304),l=p(E)=="object"&&E&&!E.nodeType&&E,A=l&&p(r)=="object"&&r&&!r.nodeType&&r,j=A&&A.exports===l?b.Buffer:void 0,y=(j?j.isBuffer:void 0)||S;r.exports=y}).call(this,e(86)(a))},function(a,E,e){var r=e(313),p=e(125),b=e(314),S=e(176),l=e(315),A=e(57),j=e(165),y=j(r),n=j(p),s=j(b),h=j(S),M=j(l),O=A;(r&&O(new r(new ArrayBuffer(1)))!="[object DataView]"||p&&O(new p)!="[object Map]"||b&&O(b.resolve())!="[object Promise]"||S&&O(new S)!="[object Set]"||l&&O(new l)!="[object WeakMap]")&&(O=function(v){var m=A(v),C=m=="[object Object]"?v.constructor:void 0,D=C?j(C):"";if(D)switch(D){case y:return"[object DataView]";case n:return"[object Map]";case s:return"[object Promise]";case h:return"[object Set]";case M:return"[object WeakMap]"}return m}),a.exports=O},function(a,E,e){function r(S){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(S)}var p=e(57),b=e(48);a.exports=function(S){return r(S)=="symbol"||b(S)&&p(S)=="[object Symbol]"}},function(a,E,e){"use strict";var r=e(1),p=e(18),b=e(56),S=e(29),l=e(0),A=e(17),j=function(y){function n(){return y!==null&&y.apply(this,arguments)||this}return Object(r.b)(n,y),n.prototype.onCanvasChange=function(s){Object(S.h)(this,s)},n.prototype.getShapeBase=function(){return b},n.prototype.getGroupBase=function(){return n},n.prototype._applyClip=function(s,h){h&&(s.save(),Object(S.a)(s,h),h.createPath(s),s.restore(),s.clip(),h._afterDraw())},n.prototype.cacheCanvasBBox=function(){var s=this.cfg.children,h=[],M=[];Object(l.f)(s,function(Z){var et=Z.cfg.cacheCanvasBBox;et&&Z.cfg.isInView&&(h.push(et.minX,et.maxX),M.push(et.minY,et.maxY))});var O=null;if(h.length){var T=Math.min.apply(null,h),v=Math.max.apply(null,h),m=Math.min.apply(null,M),C=Math.max.apply(null,M);O={minX:T,minY:m,x:T,y:m,maxX:v,maxY:C,width:v-T,height:C-m};var D=this.cfg.canvas;if(D){var Y=D.getViewRange();this.set("isInView",Object(A.f)(O,Y))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",O)},n.prototype.draw=function(s,h){var M=this.cfg.children,O=!h||this.cfg.refresh;M.length&&O&&(s.save(),Object(S.a)(s,this),this._applyClip(s,this.getClip()),Object(S.d)(s,M,h),s.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},n.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},n}(p.AbstractGroup);E.a=j},function(a,E,e){"use strict";var r=e(1),p=e(18),b=e(0),S=e(78),l=e(70),A=e(36),j=e(16),y=e(22),n=function(s){function h(){return s!==null&&s.apply(this,arguments)||this}return Object(r.b)(h,s),h.prototype.isEntityGroup=function(){return!0},h.prototype.createDom=function(){var M=Object(y.b)("g");this.set("el",M);var O=this.getParent();if(O){var T=O.get("el");T||(T=O.createDom(),O.set("el",T)),T.appendChild(M)}return M},h.prototype.afterAttrsChange=function(M){s.prototype.afterAttrsChange.call(this,M);var O=this.get("canvas");if(O&&O.get("autoDraw")){var T=O.get("context");this.createPath(T,M)}},h.prototype.onCanvasChange=function(M){Object(l.b)(this,M)},h.prototype.getShapeBase=function(){return S},h.prototype.getGroupBase=function(){return h},h.prototype.draw=function(M){var O=this.getChildren(),T=this.get("el");this.get("destroyed")?T&&T.parentNode.removeChild(T):(T||this.createDom(),Object(A.a)(this,M),this.createPath(M),O.length&&Object(l.a)(M,O))},h.prototype.createPath=function(M,O){var T=this.attr(),v=this.get("el");Object(b.f)(O||T,function(m,C){j.b[C]&&v.setAttribute(j.b[C],m)}),Object(A.c)(this)},h}(p.AbstractGroup);E.a=n},function(a,E,e){"use strict";e.r(E),e.d(E,"Base",function(){return n}),e.d(E,"Circle",function(){return h}),e.d(E,"Dom",function(){return M}),e.d(E,"Ellipse",function(){return O}),e.d(E,"Image",function(){return T}),e.d(E,"Line",function(){return m}),e.d(E,"Marker",function(){return Y}),e.d(E,"Path",function(){return Z}),e.d(E,"Polygon",function(){return et}),e.d(E,"Polyline",function(){return dt}),e.d(E,"Rect",function(){return ht}),e.d(E,"Text",function(){return Bt});var r={};e.r(r),e.d(r,"Base",function(){return n}),e.d(r,"Circle",function(){return h}),e.d(r,"Dom",function(){return M}),e.d(r,"Ellipse",function(){return O}),e.d(r,"Image",function(){return T}),e.d(r,"Line",function(){return m}),e.d(r,"Marker",function(){return Y}),e.d(r,"Path",function(){return Z}),e.d(r,"Polygon",function(){return et}),e.d(r,"Polyline",function(){return dt}),e.d(r,"Rect",function(){return ht}),e.d(r,"Text",function(){return Bt});var p=e(1),b=e(18),S=e(36),l=e(22),A=e(70),j=e(16),y=e(77),n=function(Rt){function Ot(){var X=Rt!==null&&Rt.apply(this,arguments)||this;return X.type="svg",X.canFill=!1,X.canStroke=!1,X}return Object(p.b)(Ot,Rt),Ot.prototype.getDefaultAttrs=function(){var X=Rt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},X),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},Ot.prototype.afterAttrsChange=function(X){Rt.prototype.afterAttrsChange.call(this,X);var ut=this.get("canvas");if(ut&&ut.get("autoDraw")){var vt=ut.get("context");this.draw(vt,X)}},Ot.prototype.getShapeBase=function(){return r},Ot.prototype.getGroupBase=function(){return y.a},Ot.prototype.onCanvasChange=function(X){Object(A.b)(this,X)},Ot.prototype.calculateBBox=function(){var X=this.get("el"),ut=null;if(X)ut=X.getBBox();else{var vt=Object(b.getBBoxMethod)(this.get("type"));vt&&(ut=vt(this))}if(ut){var pt=ut.x,Et=ut.y,q=ut.width,st=ut.height,it=this.getHitLineWidth(),z=it/2,P=pt-z,H=Et-z;return{x:P,y:H,minX:P,minY:H,maxX:pt+q+z,maxY:Et+st+z,width:q+it,height:st+it}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},Ot.prototype.isFill=function(){var X=this.attr(),ut=X.fill,vt=X.fillStyle;return(ut||vt||this.isClipShape())&&this.canFill},Ot.prototype.isStroke=function(){var X=this.attr(),ut=X.stroke,vt=X.strokeStyle;return(ut||vt)&&this.canStroke},Ot.prototype.draw=function(X,ut){var vt=this.get("el");this.get("destroyed")?vt&&vt.parentNode.removeChild(vt):(vt||Object(l.a)(this),Object(S.a)(this,X),this.createPath(X,ut),this.shadow(X,ut),this.strokeAndFill(X,ut),this.transform(ut))},Ot.prototype.createPath=function(X,ut){},Ot.prototype.strokeAndFill=function(X,ut){var vt=ut||this.attr(),pt=vt.fill,Et=vt.fillStyle,q=vt.stroke,st=vt.strokeStyle,it=vt.fillOpacity,z=vt.strokeOpacity,P=vt.lineWidth,H=this.get("el");this.canFill&&(ut?"fill"in vt?this._setColor(X,"fill",pt):"fillStyle"in vt&&this._setColor(X,"fill",Et):this._setColor(X,"fill",pt||Et),it&&H.setAttribute(j.b.fillOpacity,it)),this.canStroke&&P>0&&(ut?"stroke"in vt?this._setColor(X,"stroke",q):"strokeStyle"in vt&&this._setColor(X,"stroke",st):this._setColor(X,"stroke",q||st),z&&H.setAttribute(j.b.strokeOpacity,z),P&&H.setAttribute(j.b.lineWidth,P))},Ot.prototype._setColor=function(X,ut,vt){var pt=this.get("el");if(vt)if(vt=vt.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(vt))(Et=X.find("gradient",vt))||(Et=X.addGradient(vt)),pt.setAttribute(j.b[ut],"url(#"+Et+")");else if(/^[p,P]{1}[\s]*\(/.test(vt)){var Et;(Et=X.find("pattern",vt))||(Et=X.addPattern(vt)),pt.setAttribute(j.b[ut],"url(#"+Et+")")}else pt.setAttribute(j.b[ut],vt);else pt.setAttribute(j.b[ut],"none")},Ot.prototype.shadow=function(X,ut){var vt=this.attr(),pt=ut||vt,Et=pt.shadowOffsetX,q=pt.shadowOffsetY,st=pt.shadowBlur,it=pt.shadowColor;(Et||q||st||it)&&Object(S.b)(this,X)},Ot.prototype.transform=function(X){var ut=this.attr();(X||ut).matrix&&Object(S.c)(this)},Ot.prototype.isInShape=function(X,ut){return this.isPointInPath(X,ut)},Ot.prototype.isPointInPath=function(X,ut){var vt=this.get("el"),pt=this.get("canvas").get("el").getBoundingClientRect(),Et=X+pt.left,q=ut+pt.top,st=document.elementFromPoint(Et,q);return!(!st||!st.isEqualNode(vt))},Ot.prototype.getHitLineWidth=function(){var X=this.attrs,ut=X.lineWidth,vt=X.lineAppendWidth;return this.isStroke()?ut+vt:0},Ot}(b.AbstractShape),s=e(0),h=function(Rt){function Ot(){var X=Rt!==null&&Rt.apply(this,arguments)||this;return X.type="circle",X.canFill=!0,X.canStroke=!0,X}return Object(p.b)(Ot,Rt),Ot.prototype.getDefaultAttrs=function(){var X=Rt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},X),{x:0,y:0,r:0})},Ot.prototype.createPath=function(X,ut){var vt=this.attr(),pt=this.get("el");Object(s.f)(ut||vt,function(Et,q){q==="x"||q==="y"?pt.setAttribute("c"+q,Et):j.b[q]&&pt.setAttribute(j.b[q],Et)})},Ot}(n),M=function(Rt){function Ot(){var X=Rt!==null&&Rt.apply(this,arguments)||this;return X.type="dom",X.canFill=!1,X.canStroke=!1,X}return Object(p.b)(Ot,Rt),Ot.prototype.createPath=function(X,ut){var vt=this.attr(),pt=this.get("el");if(Object(s.f)(ut||vt,function(it,z){j.b[z]&&pt.setAttribute(j.b[z],it)}),typeof vt.html=="function"){var Et=vt.html.call(this,vt);if(Et instanceof Element||Et instanceof HTMLDocument){for(var q=pt.childNodes,st=q.length-1;st>=0;st--)pt.removeChild(q[st]);pt.appendChild(Et)}else pt.innerHTML=Et}else pt.innerHTML=vt.html},Ot}(n),O=function(Rt){function Ot(){var X=Rt!==null&&Rt.apply(this,arguments)||this;return X.type="ellipse",X.canFill=!0,X.canStroke=!0,X}return Object(p.b)(Ot,Rt),Ot.prototype.getDefaultAttrs=function(){var X=Rt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},X),{x:0,y:0,rx:0,ry:0})},Ot.prototype.createPath=function(X,ut){var vt=this.attr(),pt=this.get("el");Object(s.f)(ut||vt,function(Et,q){q==="x"||q==="y"?pt.setAttribute("c"+q,Et):j.b[q]&&pt.setAttribute(j.b[q],Et)})},Ot}(n),T=function(Rt){function Ot(){var X=Rt!==null&&Rt.apply(this,arguments)||this;return X.type="image",X.canFill=!1,X.canStroke=!1,X}return Object(p.b)(Ot,Rt),Ot.prototype.getDefaultAttrs=function(){var X=Rt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},X),{x:0,y:0,width:0,height:0})},Ot.prototype.createPath=function(X,ut){var vt=this,pt=this.attr(),Et=this.get("el");Object(s.f)(ut||pt,function(q,st){st==="img"?vt._setImage(pt.img):j.b[st]&&Et.setAttribute(j.b[st],q)})},Ot.prototype.setAttr=function(X,ut){this.attrs[X]=ut,X==="img"&&this._setImage(ut)},Ot.prototype._setImage=function(X){var ut=this.attr(),vt=this.get("el");if(Object(s.x)(X))vt.setAttribute("href",X);else if(X instanceof window.Image)ut.width||(vt.setAttribute("width",X.width),this.attr("width",X.width)),ut.height||(vt.setAttribute("height",X.height),this.attr("height",X.height)),vt.setAttribute("href",X.src);else if(X instanceof HTMLElement&&Object(s.x)(X.nodeName)&&X.nodeName.toUpperCase()==="CANVAS")vt.setAttribute("href",X.toDataURL());else if(X instanceof ImageData){var pt=document.createElement("canvas");pt.setAttribute("width",""+X.width),pt.setAttribute("height",""+X.height),pt.getContext("2d").putImageData(X,0,0),ut.width||(vt.setAttribute("width",""+X.width),this.attr("width",X.width)),ut.height||(vt.setAttribute("height",""+X.height),this.attr("height",X.height)),vt.setAttribute("href",pt.toDataURL())}},Ot}(n),v=e(20),m=function(Rt){function Ot(){var X=Rt!==null&&Rt.apply(this,arguments)||this;return X.type="line",X.canFill=!1,X.canStroke=!0,X}return Object(p.b)(Ot,Rt),Ot.prototype.getDefaultAttrs=function(){var X=Rt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},X),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},Ot.prototype.createPath=function(X,ut){var vt=this.attr(),pt=this.get("el");Object(s.f)(ut||vt,function(Et,q){if(q==="startArrow"||q==="endArrow")if(Et){var st=Object(s.v)(Et)?X.addArrow(vt,j.b[q]):X.getDefaultArrow(vt,j.b[q]);pt.setAttribute(j.b[q],"url(#"+st+")")}else pt.removeAttribute(j.b[q]);else j.b[q]&&pt.setAttribute(j.b[q],Et)})},Ot.prototype.getTotalLength=function(){var X=this.attr(),ut=X.x1,vt=X.y1,pt=X.x2,Et=X.y2;return v.c.length(ut,vt,pt,Et)},Ot.prototype.getPoint=function(X){var ut=this.attr(),vt=ut.x1,pt=ut.y1,Et=ut.x2,q=ut.y2;return v.c.pointAt(vt,pt,Et,q,X)},Ot}(n),C={circle:function(Ot,X,ut){return[["M",Ot,X],["m",-ut,0],["a",ut,ut,0,1,0,2*ut,0],["a",ut,ut,0,1,0,2*-ut,0]]},square:function(Ot,X,ut){return[["M",Ot-ut,X-ut],["L",Ot+ut,X-ut],["L",Ot+ut,X+ut],["L",Ot-ut,X+ut],["Z"]]},diamond:function(Ot,X,ut){return[["M",Ot-ut,X],["L",Ot,X-ut],["L",Ot+ut,X],["L",Ot,X+ut],["Z"]]},triangle:function(Ot,X,ut){var vt=ut*Math.sin(1/3*Math.PI);return[["M",Ot-ut,X+vt],["L",Ot,X-vt],["L",Ot+ut,X+vt],["z"]]},triangleDown:function(Ot,X,ut){var vt=ut*Math.sin(1/3*Math.PI);return[["M",Ot-ut,X-vt],["L",Ot+ut,X-vt],["L",Ot,X+vt],["Z"]]}},D={get:function(Ot){return C[Ot]},register:function(Ot,X){C[Ot]=X},remove:function(Ot){delete C[Ot]},getAll:function(){return C}},Y=function(Rt){function Ot(){var X=Rt!==null&&Rt.apply(this,arguments)||this;return X.type="marker",X.canFill=!0,X.canStroke=!0,X}return Object(p.b)(Ot,Rt),Ot.prototype.createPath=function(X){this.get("el").setAttribute("d",this._assembleMarker())},Ot.prototype._assembleMarker=function(){var X=this._getPath();return Object(s.m)(X)?X.map(function(ut){return ut.join(" ")}).join(""):X},Ot.prototype._getPath=function(){var X,ut=this.attr(),vt=ut.x,pt=ut.y,Et=ut.r||ut.radius,q=ut.symbol||"circle";return(X=Object(s.r)(q)?q:D.get(q))?X(vt,pt,Et):(console.warn(X+" symbol is not exist."),null)},Ot.symbolsFactory=D,Ot}(n),Z=function(Rt){function Ot(){var X=Rt!==null&&Rt.apply(this,arguments)||this;return X.type="path",X.canFill=!0,X.canStroke=!0,X}return Object(p.b)(Ot,Rt),Ot.prototype.getDefaultAttrs=function(){var X=Rt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},X),{startArrow:!1,endArrow:!1})},Ot.prototype.createPath=function(X,ut){var vt=this,pt=this.attr(),Et=this.get("el");Object(s.f)(ut||pt,function(q,st){if(st==="path"&&Object(s.m)(q))Et.setAttribute("d",vt._formatPath(q));else if(st==="startArrow"||st==="endArrow")if(q){var it=Object(s.v)(q)?X.addArrow(pt,j.b[st]):X.getDefaultArrow(pt,j.b[st]);Et.setAttribute(j.b[st],"url(#"+it+")")}else Et.removeAttribute(j.b[st]);else j.b[st]&&Et.setAttribute(j.b[st],q)})},Ot.prototype._formatPath=function(X){var ut=X.map(function(vt){return vt.join(" ")}).join("");return~ut.indexOf("NaN")?"":ut},Ot.prototype.getTotalLength=function(){var X=this.get("el");return X?X.getTotalLength():null},Ot.prototype.getPoint=function(X){var ut=this.get("el"),vt=this.getTotalLength();if(vt===0)return null;var pt=ut?ut.getPointAtLength(X*vt):null;return pt?{x:pt.x,y:pt.y}:null},Ot}(n),et=function(Rt){function Ot(){var X=Rt!==null&&Rt.apply(this,arguments)||this;return X.type="polygon",X.canFill=!0,X.canStroke=!0,X}return Object(p.b)(Ot,Rt),Ot.prototype.createPath=function(X,ut){var vt=this.attr(),pt=this.get("el");Object(s.f)(ut||vt,function(Et,q){q==="points"&&Object(s.m)(Et)&&Et.length>=2?pt.setAttribute("points",Et.map(function(st){return st[0]+","+st[1]}).join(" ")):j.b[q]&&pt.setAttribute(j.b[q],Et)})},Ot}(n),dt=function(Rt){function Ot(){var X=Rt!==null&&Rt.apply(this,arguments)||this;return X.type="polyline",X.canFill=!0,X.canStroke=!0,X}return Object(p.b)(Ot,Rt),Ot.prototype.getDefaultAttrs=function(){var X=Rt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},X),{startArrow:!1,endArrow:!1})},Ot.prototype.onAttrChange=function(X,ut,vt){Rt.prototype.onAttrChange.call(this,X,ut,vt),["points"].indexOf(X)!==-1&&this._resetCache()},Ot.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},Ot.prototype.createPath=function(X,ut){var vt=this.attr(),pt=this.get("el");Object(s.f)(ut||vt,function(Et,q){q==="points"&&Object(s.m)(Et)&&Et.length>=2?pt.setAttribute("points",Et.map(function(st){return st[0]+","+st[1]}).join(" ")):j.b[q]&&pt.setAttribute(j.b[q],Et)})},Ot.prototype.getTotalLength=function(){var X=this.attr().points,ut=this.get("totalLength");return Object(s.s)(ut)?(this.set("totalLength",v.d.length(X)),this.get("totalLength")):ut},Ot.prototype.getPoint=function(X){var ut,vt,pt=this.attr().points,Et=this.get("tCache");return Et||(this._setTcache(),Et=this.get("tCache")),Object(s.f)(Et,function(q,st){X>=q[0]&&X<=q[1]&&(ut=(X-q[0])/(q[1]-q[0]),vt=st)}),v.c.pointAt(pt[vt][0],pt[vt][1],pt[vt+1][0],pt[vt+1][1],ut)},Ot.prototype._setTcache=function(){var X=this.attr().points;if(X&&X.length!==0){var ut=this.getTotalLength();if(!(ut<=0)){var vt,pt,Et=0,q=[];Object(s.f)(X,function(st,it){X[it+1]&&((vt=[])[0]=Et/ut,pt=v.c.length(st[0],st[1],X[it+1][0],X[it+1][1]),Et+=pt,vt[1]=Et/ut,q.push(vt))}),this.set("tCache",q)}}},Ot.prototype.getStartTangent=function(){var X=this.attr().points,ut=[];return ut.push([X[1][0],X[1][1]]),ut.push([X[0][0],X[0][1]]),ut},Ot.prototype.getEndTangent=function(){var X=this.attr().points,ut=X.length-1,vt=[];return vt.push([X[ut-1][0],X[ut-1][1]]),vt.push([X[ut][0],X[ut][1]]),vt},Ot}(n),ht=function(Rt){function Ot(){var X=Rt!==null&&Rt.apply(this,arguments)||this;return X.type="rect",X.canFill=!0,X.canStroke=!0,X}return Object(p.b)(Ot,Rt),Ot.prototype.getDefaultAttrs=function(){var X=Rt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},X),{x:0,y:0,width:0,height:0,radius:0})},Ot.prototype.createPath=function(X,ut){var vt=this,pt=this.attr(),Et=this.get("el"),q=!1,st=["x","y","width","height","radius"];Object(s.f)(ut||pt,function(it,z){st.indexOf(z)===-1||q?st.indexOf(z)===-1&&j.b[z]&&Et.setAttribute(j.b[z],it):(Et.setAttribute("d",vt._assembleRect(pt)),q=!0)})},Ot.prototype._assembleRect=function(X){var ut=X.x,vt=X.y,pt=X.width,Et=X.height,q=X.radius;if(!q)return"M "+ut+","+vt+" l "+pt+",0 l 0,"+Et+" l"+-pt+" 0 z";var st=function(it){var z=0,P=0,H=0,k=0;return Object(s.m)(it)?it.length===1?z=P=H=k=it[0]:it.length===2?(z=H=it[0],P=k=it[1]):it.length===3?(z=it[0],P=k=it[1],H=it[2]):(z=it[0],P=it[1],H=it[2],k=it[3]):z=P=H=k=it,{r1:z,r2:P,r3:H,r4:k}}(q);return Object(s.m)(q)?q.length===1?st.r1=st.r2=st.r3=st.r4=q[0]:q.length===2?(st.r1=st.r3=q[0],st.r2=st.r4=q[1]):q.length===3?(st.r1=q[0],st.r2=st.r4=q[1],st.r3=q[2]):(st.r1=q[0],st.r2=q[1],st.r3=q[2],st.r4=q[3]):st.r1=st.r2=st.r3=st.r4=q,[["M "+(ut+st.r1)+","+vt],["l "+(pt-st.r1-st.r2)+",0"],["a "+st.r2+","+st.r2+",0,0,1,"+st.r2+","+st.r2],["l 0,"+(Et-st.r2-st.r3)],["a "+st.r3+","+st.r3+",0,0,1,"+-st.r3+","+st.r3],["l "+(st.r3+st.r4-pt)+",0"],["a "+st.r4+","+st.r4+",0,0,1,"+-st.r4+","+-st.r4],["l 0,"+(st.r4+st.r1-Et)],["a "+st.r1+","+st.r1+",0,0,1,"+st.r1+","+-st.r1],["z"]].join(" ")},Ot}(n),St=e(119),wt={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},xt={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},ft={left:"left",start:"left",center:"middle",right:"end",end:"end"},Bt=function(Rt){function Ot(){var X=Rt!==null&&Rt.apply(this,arguments)||this;return X.type="text",X.canFill=!0,X.canStroke=!0,X}return Object(p.b)(Ot,Rt),Ot.prototype.getDefaultAttrs=function(){var X=Rt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},X),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},Ot.prototype.createPath=function(X,ut){var vt=this,pt=this.attr(),Et=this.get("el");this._setFont(),Object(s.f)(ut||pt,function(q,st){st==="text"?vt._setText(""+q):st==="matrix"&&q?Object(S.c)(vt):j.b[st]&&Et.setAttribute(j.b[st],q)}),Et.setAttribute("paint-order","stroke"),Et.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},Ot.prototype._setFont=function(){var X=this.get("el"),ut=this.attr(),vt=ut.textBaseline,pt=ut.textAlign,Et=Object(St.a)();Et&&Et.name==="firefox"?X.setAttribute("dominant-baseline",xt[vt]||"alphabetic"):X.setAttribute("alignment-baseline",wt[vt]||"baseline"),X.setAttribute("text-anchor",ft[pt]||"left")},Ot.prototype._setText=function(X){var ut=this.get("el"),vt=this.attr(),pt=vt.x,Et=vt.textBaseline,q=Et===void 0?"bottom":Et;if(X)if(~X.indexOf(`
`)){var st=X.split(`
`),it=st.length-1,z="";Object(s.f)(st,function(P,H){H===0?q==="alphabetic"?z+='<tspan x="'+pt+'" dy="'+-it+'em">'+P+"</tspan>":q==="top"?z+='<tspan x="'+pt+'" dy="0.9em">'+P+"</tspan>":q==="middle"?z+='<tspan x="'+pt+'" dy="'+-(it-1)/2+'em">'+P+"</tspan>":q==="bottom"?z+='<tspan x="'+pt+'" dy="-'+(it+.3)+'em">'+P+"</tspan>":q==="hanging"&&(z+='<tspan x="'+pt+'" dy="'+(-(it-1)-.3)+'em">'+P+"</tspan>"):z+='<tspan x="'+pt+'" dy="1em">'+P+"</tspan>"}),ut.innerHTML=z}else ut.innerHTML=X;else ut.innerHTML=""},Ot}(n)},function(a,E,e){"use strict";var r=function(){function p(){this._events={}}return p.prototype.on=function(b,S,l){return this._events[b]||(this._events[b]=[]),this._events[b].push({callback:S,once:!!l}),this},p.prototype.once=function(b,S){return this.on(b,S,!0),this},p.prototype.emit=function(b){for(var S=this,l=[],A=1;A<arguments.length;A++)l[A-1]=arguments[A];var j=this._events[b]||[],y=this._events["*"]||[],n=function(h){for(var M=h.length,O=0;O<M;O++)if(h[O]){var T=h[O],v=T.callback;T.once&&(h.splice(O,1),h.length===0&&delete S._events[b],M--,O--),v.apply(S,l)}};n(j),n(y)},p.prototype.off=function(b,S){if(b)if(S){for(var l=this._events[b]||[],A=l.length,j=0;j<A;j++)l[j].callback===S&&(l.splice(j,1),A--,j--);l.length===0&&delete this._events[b]}else delete this._events[b];else this._events={};return this},p.prototype.getEvents=function(){return this._events},p}();E.a=r},function(a,E,e){"use strict";e.r(E),e.d(E,"create",function(){return p}),e.d(E,"clone",function(){return b}),e.d(E,"fromValues",function(){return S}),e.d(E,"copy",function(){return l}),e.d(E,"set",function(){return A}),e.d(E,"add",function(){return j}),e.d(E,"subtract",function(){return y}),e.d(E,"multiply",function(){return n}),e.d(E,"divide",function(){return s}),e.d(E,"ceil",function(){return h}),e.d(E,"floor",function(){return M}),e.d(E,"min",function(){return O}),e.d(E,"max",function(){return T}),e.d(E,"round",function(){return v}),e.d(E,"scale",function(){return m}),e.d(E,"scaleAndAdd",function(){return C}),e.d(E,"distance",function(){return D}),e.d(E,"squaredDistance",function(){return Y}),e.d(E,"length",function(){return Z}),e.d(E,"squaredLength",function(){return et}),e.d(E,"negate",function(){return dt}),e.d(E,"inverse",function(){return ht}),e.d(E,"normalize",function(){return St}),e.d(E,"dot",function(){return wt}),e.d(E,"cross",function(){return xt}),e.d(E,"lerp",function(){return ft}),e.d(E,"random",function(){return Bt}),e.d(E,"transformMat2",function(){return Rt}),e.d(E,"transformMat2d",function(){return Ot}),e.d(E,"transformMat3",function(){return X}),e.d(E,"transformMat4",function(){return ut}),e.d(E,"rotate",function(){return vt}),e.d(E,"angle",function(){return pt}),e.d(E,"zero",function(){return Et}),e.d(E,"str",function(){return q}),e.d(E,"exactEquals",function(){return st}),e.d(E,"equals",function(){return it}),e.d(E,"len",function(){return P}),e.d(E,"sub",function(){return H}),e.d(E,"mul",function(){return k}),e.d(E,"div",function(){return d}),e.d(E,"dist",function(){return g}),e.d(E,"sqrDist",function(){return F}),e.d(E,"sqrLen",function(){return V}),e.d(E,"forEach",function(){return tt});var r=e(11);function p(){var ot=new r.a(2);return r.a!=Float32Array&&(ot[0]=0,ot[1]=0),ot}function b(ot){var at=new r.a(2);return at[0]=ot[0],at[1]=ot[1],at}function S(ot,at){var At=new r.a(2);return At[0]=ot,At[1]=at,At}function l(ot,at){return ot[0]=at[0],ot[1]=at[1],ot}function A(ot,at,At){return ot[0]=at,ot[1]=At,ot}function j(ot,at,At){return ot[0]=at[0]+At[0],ot[1]=at[1]+At[1],ot}function y(ot,at,At){return ot[0]=at[0]-At[0],ot[1]=at[1]-At[1],ot}function n(ot,at,At){return ot[0]=at[0]*At[0],ot[1]=at[1]*At[1],ot}function s(ot,at,At){return ot[0]=at[0]/At[0],ot[1]=at[1]/At[1],ot}function h(ot,at){return ot[0]=Math.ceil(at[0]),ot[1]=Math.ceil(at[1]),ot}function M(ot,at){return ot[0]=Math.floor(at[0]),ot[1]=Math.floor(at[1]),ot}function O(ot,at,At){return ot[0]=Math.min(at[0],At[0]),ot[1]=Math.min(at[1],At[1]),ot}function T(ot,at,At){return ot[0]=Math.max(at[0],At[0]),ot[1]=Math.max(at[1],At[1]),ot}function v(ot,at){return ot[0]=Math.round(at[0]),ot[1]=Math.round(at[1]),ot}function m(ot,at,At){return ot[0]=at[0]*At,ot[1]=at[1]*At,ot}function C(ot,at,At,yt){return ot[0]=at[0]+At[0]*yt,ot[1]=at[1]+At[1]*yt,ot}function D(ot,at){var At=at[0]-ot[0],yt=at[1]-ot[1];return Math.hypot(At,yt)}function Y(ot,at){var At=at[0]-ot[0],yt=at[1]-ot[1];return At*At+yt*yt}function Z(ot){var at=ot[0],At=ot[1];return Math.hypot(at,At)}function et(ot){var at=ot[0],At=ot[1];return at*at+At*At}function dt(ot,at){return ot[0]=-at[0],ot[1]=-at[1],ot}function ht(ot,at){return ot[0]=1/at[0],ot[1]=1/at[1],ot}function St(ot,at){var At=at[0],yt=at[1],gt=At*At+yt*yt;return gt>0&&(gt=1/Math.sqrt(gt)),ot[0]=at[0]*gt,ot[1]=at[1]*gt,ot}function wt(ot,at){return ot[0]*at[0]+ot[1]*at[1]}function xt(ot,at,At){var yt=at[0]*At[1]-at[1]*At[0];return ot[0]=ot[1]=0,ot[2]=yt,ot}function ft(ot,at,At,yt){var gt=at[0],bt=at[1];return ot[0]=gt+yt*(At[0]-gt),ot[1]=bt+yt*(At[1]-bt),ot}function Bt(ot,at){at=at||1;var At=2*r.c()*Math.PI;return ot[0]=Math.cos(At)*at,ot[1]=Math.sin(At)*at,ot}function Rt(ot,at,At){var yt=at[0],gt=at[1];return ot[0]=At[0]*yt+At[2]*gt,ot[1]=At[1]*yt+At[3]*gt,ot}function Ot(ot,at,At){var yt=at[0],gt=at[1];return ot[0]=At[0]*yt+At[2]*gt+At[4],ot[1]=At[1]*yt+At[3]*gt+At[5],ot}function X(ot,at,At){var yt=at[0],gt=at[1];return ot[0]=At[0]*yt+At[3]*gt+At[6],ot[1]=At[1]*yt+At[4]*gt+At[7],ot}function ut(ot,at,At){var yt=at[0],gt=at[1];return ot[0]=At[0]*yt+At[4]*gt+At[12],ot[1]=At[1]*yt+At[5]*gt+At[13],ot}function vt(ot,at,At,yt){var gt=at[0]-At[0],bt=at[1]-At[1],Tt=Math.sin(yt),Dt=Math.cos(yt);return ot[0]=gt*Dt-bt*Tt+At[0],ot[1]=gt*Tt+bt*Dt+At[1],ot}function pt(ot,at){var At=ot[0],yt=ot[1],gt=at[0],bt=at[1],Tt=Math.sqrt(At*At+yt*yt)*Math.sqrt(gt*gt+bt*bt),Dt=Tt&&(At*gt+yt*bt)/Tt;return Math.acos(Math.min(Math.max(Dt,-1),1))}function Et(ot){return ot[0]=0,ot[1]=0,ot}function q(ot){return"vec2("+ot[0]+", "+ot[1]+")"}function st(ot,at){return ot[0]===at[0]&&ot[1]===at[1]}function it(ot,at){var At=ot[0],yt=ot[1],gt=at[0],bt=at[1];return Math.abs(At-gt)<=r.b*Math.max(1,Math.abs(At),Math.abs(gt))&&Math.abs(yt-bt)<=r.b*Math.max(1,Math.abs(yt),Math.abs(bt))}var z,P=Z,H=y,k=n,d=s,g=D,F=Y,V=et,tt=(z=p(),function(ot,at,At,yt,gt,bt){var Tt,Dt;for(at||(at=2),At||(At=0),Dt=yt?Math.min(yt*at+At,ot.length):ot.length,Tt=At;Tt<Dt;Tt+=at)z[0]=ot[Tt],z[1]=ot[Tt+1],gt(z,z,bt),ot[Tt]=z[0],ot[Tt+1]=z[1];return ot})},function(a,E){var e=[],r=[];function p(b,S){if(S=S||{},b===void 0)throw new Error("insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).");var l,A=S.prepend===!0?"prepend":"append",j=S.container!==void 0?S.container:document.querySelector("head"),y=e.indexOf(j);return y===-1&&(y=e.push(j)-1,r[y]={}),r[y]!==void 0&&r[y][A]!==void 0?l=r[y][A]:(l=r[y][A]=function(){var n=document.createElement("style");return n.setAttribute("type","text/css"),n}(),A==="prepend"?j.insertBefore(l,j.childNodes[0]):j.appendChild(l)),b.charCodeAt(0)===65279&&(b=b.substr(1,b.length)),l.styleSheet?l.styleSheet.cssText+=b:l.textContent+=b,l}a.exports=p,a.exports.insertCss=p},function(a,E,e){"use strict";function r(O){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T})(O)}var p=e(263),b=e(267),S=[].slice,l=["keyword","gray","hex"],A={};Object.keys(b).forEach(function(O){A[S.call(b[O].labels).sort().join("")]=O});var j={};function y(O,T){if(!(this instanceof y))return new y(O,T);if(T&&T in l&&(T=null),T&&!(T in b))throw new Error("Unknown model: "+T);var v,m;if(O==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(O instanceof y)this.model=O.model,this.color=O.color.slice(),this.valpha=O.valpha;else if(typeof O=="string"){var C=p.get(O);if(C===null)throw new Error("Unable to parse color from string: "+O);this.model=C.model,m=b[this.model].channels,this.color=C.value.slice(0,m),this.valpha=typeof C.value[m]=="number"?C.value[m]:1}else if(O.length){this.model=T||"rgb",m=b[this.model].channels;var D=S.call(O,0,m);this.color=M(D,m),this.valpha=typeof O[m]=="number"?O[m]:1}else if(typeof O=="number")O&=16777215,this.model="rgb",this.color=[O>>16&255,O>>8&255,255&O],this.valpha=1;else{this.valpha=1;var Y=Object.keys(O);"alpha"in O&&(Y.splice(Y.indexOf("alpha"),1),this.valpha=typeof O.alpha=="number"?O.alpha:0);var Z=Y.sort().join("");if(!(Z in A))throw new Error("Unable to parse color from object: "+JSON.stringify(O));this.model=A[Z];var et=b[this.model].labels,dt=[];for(v=0;v<et.length;v++)dt.push(O[et[v]]);this.color=M(dt)}if(j[this.model])for(m=b[this.model].channels,v=0;v<m;v++){var ht=j[this.model][v];ht&&(this.color[v]=ht(this.color[v]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function n(O,T,v){return(O=Array.isArray(O)?O:[O]).forEach(function(m){(j[m]||(j[m]=[]))[T]=v}),O=O[0],function(m){var C;return arguments.length?(v&&(m=v(m)),(C=this[O]()).color[T]=m,C):(C=this[O]().color[T],v&&(C=v(C)),C)}}function s(O){return function(T){return Math.max(0,Math.min(O,T))}}function h(O){return Array.isArray(O)?O:[O]}function M(O,T){for(var v=0;v<T;v++)typeof O[v]!="number"&&(O[v]=0);return O}y.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(T){var v=this.model in p.to?this:this.rgb(),m=(v=v.round(typeof T=="number"?T:1)).valpha===1?v.color:v.color.concat(this.valpha);return p.to[v.model](m)},percentString:function(T){var v=this.rgb().round(typeof T=="number"?T:1),m=v.valpha===1?v.color:v.color.concat(this.valpha);return p.to.rgb.percent(m)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var T={},v=b[this.model].channels,m=b[this.model].labels,C=0;C<v;C++)T[m[C]]=this.color[C];return this.valpha!==1&&(T.alpha=this.valpha),T},unitArray:function(){var T=this.rgb().color;return T[0]/=255,T[1]/=255,T[2]/=255,this.valpha!==1&&T.push(this.valpha),T},unitObject:function(){var T=this.rgb().object();return T.r/=255,T.g/=255,T.b/=255,this.valpha!==1&&(T.alpha=this.valpha),T},round:function(T){return T=Math.max(T||0,0),new y(this.color.map(function(v){return function(m){return function(C,D){return Number(C.toFixed(D))}(m,v)}}(T)).concat(this.valpha),this.model)},alpha:function(T){return arguments.length?new y(this.color.concat(Math.max(0,Math.min(1,T))),this.model):this.valpha},red:n("rgb",0,s(255)),green:n("rgb",1,s(255)),blue:n("rgb",2,s(255)),hue:n(["hsl","hsv","hsl","hwb","hcg"],0,function(O){return(O%360+360)%360}),saturationl:n("hsl",1,s(100)),lightness:n("hsl",2,s(100)),saturationv:n("hsv",1,s(100)),value:n("hsv",2,s(100)),chroma:n("hcg",1,s(100)),gray:n("hcg",2,s(100)),white:n("hwb",1,s(100)),wblack:n("hwb",2,s(100)),cyan:n("cmyk",0,s(100)),magenta:n("cmyk",1,s(100)),yellow:n("cmyk",2,s(100)),black:n("cmyk",3,s(100)),x:n("xyz",0,s(100)),y:n("xyz",1,s(100)),z:n("xyz",2,s(100)),l:n("lab",0,s(100)),a:n("lab",1),b:n("lab",2),keyword:function(T){return arguments.length?new y(T):b[this.model].keyword(this.color)},hex:function(T){return arguments.length?new y(T):p.to.hex(this.rgb().round().color)},rgbNumber:function(){var T=this.rgb().color;return(255&T[0])<<16|(255&T[1])<<8|255&T[2]},luminosity:function(){for(var T=this.rgb().color,v=[],m=0;m<T.length;m++){var C=T[m]/255;v[m]=C<=.03928?C/12.92:Math.pow((C+.055)/1.055,2.4)}return .2126*v[0]+.7152*v[1]+.0722*v[2]},contrast:function(T){var v=this.luminosity(),m=T.luminosity();return v>m?(v+.05)/(m+.05):(m+.05)/(v+.05)},level:function(T){var v=this.contrast(T);return v>=7.1?"AAA":v>=4.5?"AA":""},isDark:function(){var T=this.rgb().color;return(299*T[0]+587*T[1]+114*T[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var T=this.rgb(),v=0;v<3;v++)T.color[v]=255-T.color[v];return T},lighten:function(T){var v=this.hsl();return v.color[2]+=v.color[2]*T,v},darken:function(T){var v=this.hsl();return v.color[2]-=v.color[2]*T,v},saturate:function(T){var v=this.hsl();return v.color[1]+=v.color[1]*T,v},desaturate:function(T){var v=this.hsl();return v.color[1]-=v.color[1]*T,v},whiten:function(T){var v=this.hwb();return v.color[1]+=v.color[1]*T,v},blacken:function(T){var v=this.hwb();return v.color[2]+=v.color[2]*T,v},grayscale:function(){var T=this.rgb().color,v=.3*T[0]+.59*T[1]+.11*T[2];return y.rgb(v,v,v)},fade:function(T){return this.alpha(this.valpha-this.valpha*T)},opaquer:function(T){return this.alpha(this.valpha+this.valpha*T)},rotate:function(T){var v=this.hsl(),m=v.color[0];return m=(m=(m+T)%360)<0?360+m:m,v.color[0]=m,v},mix:function(T,v){if(!T||!T.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+r(T));var m=T.rgb(),C=this.rgb(),D=v===void 0?.5:v,Y=2*D-1,Z=m.alpha()-C.alpha(),et=((Y*Z==-1?Y:(Y+Z)/(1+Y*Z))+1)/2,dt=1-et;return y.rgb(et*m.red()+dt*C.red(),et*m.green()+dt*C.green(),et*m.blue()+dt*C.blue(),m.alpha()*D+C.alpha()*(1-D))}},Object.keys(b).forEach(function(O){if(l.indexOf(O)===-1){var T=b[O].channels;y.prototype[O]=function(){if(this.model===O)return new y(this);if(arguments.length)return new y(arguments,O);var v=typeof arguments[T]=="number"?T:this.valpha;return new y(h(b[this.model][O].raw(this.color)).concat(v),O)},y[O]=function(v){return typeof v=="number"&&(v=M(S.call(arguments),T)),new y(v,O)}}}),a.exports=y},function(a,E,e){var r=e(57),p=e(43);a.exports=function(b){if(!p(b))return!1;var S=r(b);return S=="[object Function]"||S=="[object GeneratorFunction]"||S=="[object AsyncFunction]"||S=="[object Proxy]"}},function(a,E,e){var r=e(100),p=e(101);a.exports=function(b,S,l,A){var j=!l;l||(l={});for(var y=-1,n=S.length;++y<n;){var s=S[y],h=A?A(l[s],b[s],s,l,b):void 0;h===void 0&&(h=b[s]),j?p(l,s,h):r(l,s,h)}return l}},function(a,E,e){var r=e(303),p=e(48),b=Object.prototype,S=b.hasOwnProperty,l=b.propertyIsEnumerable,A=r(function(){return arguments}())?r:function(j){return p(j)&&S.call(j,"callee")&&!l.call(j,"callee")};a.exports=A},function(a,E){a.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(a,E,e){var r=e(75);a.exports=function(p){if(typeof p=="string"||r(p))return p;var b=p+"";return b=="0"&&1/p==-1/0?"-0":b}},function(a,E,e){"use strict";function r(l){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(l)}Object.defineProperty(E,"__esModule",{value:!0}),E.circularDependencyToException=E.listMetadataForTarget=E.listRegisteredBindingsForServiceIdentifier=E.getServiceIdentifierAsString=E.getFunctionName=void 0;var p=e(41);function b(l){return typeof l=="function"?l.name:r(l)==="symbol"?l.toString():l}function S(l){if(l.name)return l.name;var A=l.toString(),j=A.match(/^function\s*([^\s(]+)/);return j?j[1]:"Anonymous function: "+A}E.getServiceIdentifierAsString=b,E.listRegisteredBindingsForServiceIdentifier=function(l,A,j){var y="",n=j(l,A);return n.length!==0&&(y=`
Registered bindings:`,n.forEach(function(s){var h="Object";s.implementationType!==null&&(h=S(s.implementationType)),y=y+`
 `+h,s.constraint.metaData&&(y=y+" - "+s.constraint.metaData)})),y},E.circularDependencyToException=function l(A){A.childRequests.forEach(function(j){if(function n(s,h){return s.parentRequest!==null&&(s.parentRequest.serviceIdentifier===h||n(s.parentRequest,h))}(j,j.serviceIdentifier)){var y=function(n){return function s(h,M){M===void 0&&(M=[]);var O=b(h.serviceIdentifier);return M.push(O),h.parentRequest!==null?s(h.parentRequest,M):M}(n).reverse().join(" --> ")}(j);throw new Error(p.CIRCULAR_DEPENDENCY+" "+y)}l(j)})},E.listMetadataForTarget=function(l,A){if(A.isTagged()||A.isNamed()){var j="",y=A.getNamedTag(),n=A.getCustomTags();return y!==null&&(j+=y.toString()+`
`),n!==null&&n.forEach(function(s){j+=s.toString()+`
`})," "+l+`
 `+l+" - "+j}return" "+l},E.getFunctionName=S},function(a,E,e){"use strict";e.d(E,"a",function(){return l});var r=e(17);function p(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function b(A,j){return p(A)*p(j)?(A[0]*j[0]+A[1]*j[1])/(p(A)*p(j)):1}function S(A,j){return(A[0]*j[1]<A[1]*j[0]?-1:1)*Math.acos(b(A,j))}function l(A,j){var y=j[1],n=j[2],s=Object(r.m)(Object(r.o)(j[3]),2*Math.PI),h=j[4],M=j[5],O=A[0],T=A[1],v=j[6],m=j[7],C=Math.cos(s)*(O-v)/2+Math.sin(s)*(T-m)/2,D=-1*Math.sin(s)*(O-v)/2+Math.cos(s)*(T-m)/2,Y=C*C/(y*y)+D*D/(n*n);Y>1&&(y*=Math.sqrt(Y),n*=Math.sqrt(Y));var Z=y*y*(D*D)+n*n*(C*C),et=Z?Math.sqrt((y*y*(n*n)-Z)/Z):1;h===M&&(et*=-1),isNaN(et)&&(et=0);var dt=n?et*y*D/n:0,ht=y?et*-n*C/y:0,St=(O+v)/2+Math.cos(s)*dt-Math.sin(s)*ht,wt=(T+m)/2+Math.sin(s)*dt+Math.cos(s)*ht,xt=[(C-dt)/y,(D-ht)/n],ft=[(-1*C-dt)/y,(-1*D-ht)/n],Bt=S([1,0],xt),Rt=S(xt,ft);return b(xt,ft)<=-1&&(Rt=Math.PI),b(xt,ft)>=1&&(Rt=0),M===0&&Rt>0&&(Rt-=2*Math.PI),M===1&&Rt<0&&(Rt+=2*Math.PI),{cx:St,cy:wt,rx:Object(r.j)(A,[v,m])?0:y,ry:Object(r.j)(A,[v,m])?0:n,startAngle:Bt,endAngle:Bt+Rt,xRotation:s,arcFlag:h,sweepFlag:M}}},function(a,E){function e(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a.exports=e=function(b){return typeof b}:a.exports=e=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},e(r)}a.exports=e},function(a,E,e){"use strict";var r=e(1),p=e(52),b=e(62),S=e(122),l=e(0),A=e(5),j=e(45),y=e(14),n=A.n.cloneEvent,s=A.n.isViewportChanged,h=function(ut){function vt(pt){var Et=ut.call(this,pt)||this;return Et.extendEvents=[],Et.dragging=!1,Et.preItem=null,Et.graph=pt,Et.destroyed=!1,Et.initEvents(),Et}return Object(r.b)(vt,ut),vt.prototype.initEvents=function(){var pt=this.graph,Et=this.extendEvents,q=Et===void 0?[]:Et,st=pt.get("canvas"),it=st.get("el"),z=Object(l.J)(this,"onCanvasEvents"),P=Object(l.J)(this,"onExtendEvents"),H=Object(l.J)(this,"onWheelEvent");st.off("*").on("*",z),this.canvasHandler=z,q.push(Object(y.a)(it,"DOMMouseScroll",H)),q.push(Object(y.a)(it,"mousewheel",H)),typeof window!="undefined"&&(q.push(Object(y.a)(window,"keydown",P)),q.push(Object(y.a)(window,"keyup",P)),q.push(Object(y.a)(window,"focus",P)))},vt.getItemRoot=function(pt){for(;pt&&!pt.get("item");)pt=pt.get("parent");return pt},vt.prototype.onCanvasEvents=function(pt){var Et=this.graph,q=Et.get("canvas"),st=pt.target,it=pt.type;pt.canvasX=pt.x,pt.canvasY=pt.y;var z={x:pt.canvasX,y:pt.canvasY},P=Et.get("group").getMatrix();if(P||(P=[1,0,0,0,1,0,0,0,1]),s(P)&&(z=Et.getPointByClient(pt.clientX,pt.clientY)),pt.x=z.x,pt.y=z.y,pt.currentTarget=Et,st===q)return it==="mousemove"&&this.handleMouseMove(pt,"canvas"),pt.target=q,pt.item=null,Et.emit(it,pt),void Et.emit("canvas:"+it,pt);var H=vt.getItemRoot(st);if(H){var k=H.get("item");if(!k.destroyed){var d=k.getType();if(pt.target=st,pt.item=k,pt.canvasX===pt.x&&pt.canvasY===pt.y){var g=Et.getCanvasByPoint(pt.x,pt.y);pt.canvasX=g.x,pt.canvasY=g.y}Et.emit(it,pt),pt.name&&!pt.name.includes(":")?Et.emit(d+":"+it,pt):Et.emit(pt.name,pt),it==="dragstart"&&(this.dragging=!0),it==="dragend"&&(this.dragging=!1),it==="mousemove"&&this.handleMouseMove(pt,d)}}else Et.emit(it,pt)},vt.prototype.onExtendEvents=function(pt){this.graph.emit(pt.type,pt)},vt.prototype.onWheelEvent=function(pt){Object(l.s)(pt.wheelDelta)&&(pt.wheelDelta=-pt.detail),this.graph.emit("wheel",pt)},vt.prototype.handleMouseMove=function(pt,Et){var q=this.graph,st=this.preItem,it=q.get("canvas"),z=pt.target===it?null:pt.item;pt=n(pt),st&&st!==z&&!st.destroyed&&(pt.item=st,this.emitCustomEvent(st.getType(),"mouseleave",pt),this.dragging&&this.emitCustomEvent(st.getType(),"dragleave",pt)),z&&st!==z&&(pt.item=z,this.emitCustomEvent(Et,"mouseenter",pt),this.dragging&&this.emitCustomEvent(Et,"dragenter",pt)),this.preItem=z},vt.prototype.emitCustomEvent=function(pt,Et,q){q.type=Et,this.graph.emit(pt+":"+Et,q)},vt.prototype.destroy=function(){var pt=this.graph,Et=this.canvasHandler,q=this.extendEvents;pt.get("canvas").off("*",Et),Object(l.f)(q,function(st){st.remove()}),this.dragging=!1,this.preItem=null,this.extendEvents.length=0,this.canvasHandler=null,this.destroyed=!0},vt}(A.a),M=e(69),O=e(254),T=e.n(O);function v(){return T()(`!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=436)}([function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.METADATA_KEY=void 0;var r=n(17);e.METADATA_KEY=r;var o=n(374);Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return o.Container}});var i=n(30);Object.defineProperty(e,"BindingScopeEnum",{enumerable:!0,get:function(){return i.BindingScopeEnum}}),Object.defineProperty(e,"BindingTypeEnum",{enumerable:!0,get:function(){return i.BindingTypeEnum}}),Object.defineProperty(e,"TargetTypeEnum",{enumerable:!0,get:function(){return i.TargetTypeEnum}});var a=n(390);Object.defineProperty(e,"AsyncContainerModule",{enumerable:!0,get:function(){return a.AsyncContainerModule}}),Object.defineProperty(e,"ContainerModule",{enumerable:!0,get:function(){return a.ContainerModule}});var u=n(391);Object.defineProperty(e,"injectable",{enumerable:!0,get:function(){return u.injectable}});var s=n(392);Object.defineProperty(e,"tagged",{enumerable:!0,get:function(){return s.tagged}});var c=n(393);Object.defineProperty(e,"named",{enumerable:!0,get:function(){return c.named}});var f=n(164);Object.defineProperty(e,"inject",{enumerable:!0,get:function(){return f.inject}}),Object.defineProperty(e,"LazyServiceIdentifer",{enumerable:!0,get:function(){return f.LazyServiceIdentifer}});var l=n(394);Object.defineProperty(e,"optional",{enumerable:!0,get:function(){return l.optional}});var h=n(395);Object.defineProperty(e,"unmanaged",{enumerable:!0,get:function(){return h.unmanaged}});var d=n(396);Object.defineProperty(e,"multiInject",{enumerable:!0,get:function(){return d.multiInject}});var p=n(397);Object.defineProperty(e,"targetName",{enumerable:!0,get:function(){return p.targetName}});var v=n(398);Object.defineProperty(e,"postConstruct",{enumerable:!0,get:function(){return v.postConstruct}});var m=n(162);Object.defineProperty(e,"MetadataReader",{enumerable:!0,get:function(){return m.MetadataReader}});var y=n(40);Object.defineProperty(e,"id",{enumerable:!0,get:function(){return y.id}});var g=n(33);Object.defineProperty(e,"decorate",{enumerable:!0,get:function(){return g.decorate}});var b=n(167);Object.defineProperty(e,"traverseAncerstors",{enumerable:!0,get:function(){return b.traverseAncerstors}}),Object.defineProperty(e,"taggedConstraint",{enumerable:!0,get:function(){return b.taggedConstraint}}),Object.defineProperty(e,"namedConstraint",{enumerable:!0,get:function(){return b.namedConstraint}}),Object.defineProperty(e,"typeConstraint",{enumerable:!0,get:function(){return b.typeConstraint}});var _=n(50);Object.defineProperty(e,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return _.getServiceIdentifierAsString}});var x=n(399);Object.defineProperty(e,"multiBindToService",{enumerable:!0,get:function(){return x.multiBindToService}})},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.TextureCompressionBC="texture-compression-bc"}(e.ExtensionName||(e.ExtensionName={})),function(t){t.ClampToEdge="clamp-to-edge",t.Repeat="repeat",t.MirrorRepeat="mirror-repeat"}(e.AddressMode||(e.AddressMode={})),function(t){t.UniformBuffer="uniform-buffer",t.StorageBuffer="storage-buffer",t.ReadonlyStorageBuffer="readonly-storage-buffer",t.Sampler="sampler",t.ComparisonSampler="comparison-sampler",t.SampledTexture="sampled-texture",t.ReadonlyStorageTexture="readonly-storage-texture",t.WriteonlyStorageTexture="writeonly-storage-texture"}(e.BindingType||(e.BindingType={})),function(t){t.Zero="zero",t.One="one",t.SrcColor="src-color",t.OneMinusSrcColor="one-minus-src-color",t.SrcAlpha="src-alpha",t.OneMinusSrcAlpha="one-minus-src-alpha",t.DstColor="dst-color",t.OneMinusDstColor="one-minus-dst-color",t.DstAlpha="dst-alpha",t.OneMinusDstAlpha="one-minus-dst-alpha",t.SrcAlphaSaturated="src-alpha-saturated",t.BlendColor="blend-color",t.OneMinusBlendColor="one-minus-blend-color"}(e.BlendFactor||(e.BlendFactor={})),function(t){t.Add="add",t.Subtract="subtract",t.ReverseSubtract="reverse-subtract",t.Min="min",t.Max="max"}(e.BlendOperation||(e.BlendOperation={})),function(t){t.Never="never",t.Less="less",t.Equal="equal",t.LessEqual="less-equal",t.Greater="greater",t.NotEqual="not-equal",t.GreaterEqual="greater-equal",t.Always="always"}(e.CompareFunction||(e.CompareFunction={})),function(t){t.None="none",t.Front="front",t.Back="back"}(e.CullMode||(e.CullMode={})),function(t){t.Nearest="nearest",t.Linear="linear"}(e.FilterMode||(e.FilterMode={})),function(t){t.CCW="ccw",t.CW="cw"}(e.FrontFace||(e.FrontFace={})),function(t){t.Uint16="uint16",t.Uint32="uint32"}(e.IndexFormat||(e.IndexFormat={})),function(t){t.Vertex="vertex",t.Instance="instance"}(e.InputStepMode||(e.InputStepMode={})),function(t){t.Load="load"}(e.LoadOp||(e.LoadOp={})),function(t){t.PointList="point-list",t.LineList="line-list",t.LineStrip="line-strip",t.TriangleList="triangle-list",t.TriangleStrip="triangle-strip"}(e.PrimitiveTopology||(e.PrimitiveTopology={})),function(t){t.Keep="keep",t.Zero="zero",t.Replace="replace",t.Invert="invert",t.IncrementClamp="increment-clamp",t.DecrementClamp="decrement-clamp",t.IncrementWrap="increment-wrap",t.DecrementWrap="decrement-wrap"}(e.StencilOperation||(e.StencilOperation={})),function(t){t.Store="store",t.Clear="clear"}(e.StoreOp||(e.StoreOp={})),function(t){t.E1d="1d",t.E2d="2d",t.E3d="3d"}(e.TextureDimension||(e.TextureDimension={})),function(t){t.R8Unorm="r8unorm",t.R8Snorm="r8snorm",t.R8Uint="r8uint",t.R8Sint="r8sint",t.R16Uint="r16uint",t.R16Sint="r16sint",t.R16Float="r16float",t.RG8Unorm="rg8unorm",t.RG8Snorm="rg8snorm",t.RG8Uint="rg8uint",t.RG8Sint="rg8sint",t.R32Uint="r32uint",t.R32Sint="r32sint",t.R32Float="r32float",t.RG16Uint="rg16uint",t.RG16Sint="rg16sint",t.RG16Float="rg16float",t.RGBA8Unorm="rgba8unorm",t.RGBA8UnormSRGB="rgba8unorm-srgb",t.RGBA8Snorm="rgba8snorm",t.RGBA8Uint="rgba8uint",t.RGBA8Sint="rgba8sint",t.BGRA8Unorm="bgra8unorm",t.BGRA8UnormSRGB="bgra8unorm-srgb",t.RGB10A2Unorm="rgb10a2unorm",t.RG11B10Float="rg11b10float",t.RG32Uint="rg32uint",t.RG32Sint="rg32sint",t.RG32Float="rg32float",t.RGBA16Uint="rgba16uint",t.RGBA16Sint="rgba16sint",t.RGBA16Float="rgba16float",t.RGBA32Uint="rgba32uint",t.RGBA32Sint="rgba32sint",t.RGBA32Float="rgba32float",t.Depth32Float="depth32float",t.Depth24Plus="depth24plus",t.Depth24PlusStencil8="depth24plus-stencil8"}(e.TextureFormat||(e.TextureFormat={})),function(t){t.Float="float",t.Sint="sint",t.Uint="uint"}(e.TextureComponentType||(e.TextureComponentType={})),function(t){t.E1d="1d",t.E2d="2d",t.E2dArray="2d-array",t.Cube="cube",t.CubeArray="cube-array",t.E3d="3d"}(e.TextureViewDimension||(e.TextureViewDimension={})),function(t){t.Uchar2="uchar2",t.Uchar4="uchar4",t.Char2="char2",t.Char4="char4",t.Uchar2Norm="uchar2norm",t.Uchar4Norm="uchar4norm",t.Char2Norm="char2norm",t.Char4Norm="char4norm",t.Ushort2="ushort2",t.Ushort4="ushort4",t.Short2="short2",t.Short4="short4",t.Ushort2Norm="ushort2norm",t.Ushort4Norm="ushort4norm",t.Short2Norm="short2norm",t.Short4Norm="short4norm",t.Half2="half2",t.Half4="half4",t.Float="float",t.Float2="float2",t.Float3="float3",t.Float4="float4",t.Uint="uint",t.Uint2="uint2",t.Uint3="uint3",t.Uint4="uint4",t.Int="int",t.Int2="int2",t.Int3="int3",t.Int4="int4"}(e.VertexFormat||(e.VertexFormat={})),function(t){t.All="all",t.StencilOnly="stencil-only",t.DepthOnly="depth-only"}(e.TextureAspect||(e.TextureAspect={})),function(t){t.Error="error",t.Warning="warning",t.Info="info"}(e.CompilationMessageType||(e.CompilationMessageType={})),function(t){t.Occlusion="occlusion"}(e.QueryType||(e.QueryType={})),function(t){t[t.MapRead=1]="MapRead",t[t.MapWrite=2]="MapWrite",t[t.CopySrc=4]="CopySrc",t[t.CopyDst=8]="CopyDst",t[t.Index=16]="Index",t[t.Vertex=32]="Vertex",t[t.Uniform=64]="Uniform",t[t.Storage=128]="Storage",t[t.Indirect=256]="Indirect",t[t.QueryResolve=512]="QueryResolve"}(e.BufferUsage||(e.BufferUsage={})),function(t){t[t.Red=1]="Red",t[t.Green=2]="Green",t[t.Blue=4]="Blue",t[t.Alpha=8]="Alpha",t[t.All=15]="All"}(e.ColorWrite||(e.ColorWrite={})),function(t){t[t.Vertex=1]="Vertex",t[t.Fragment=2]="Fragment",t[t.Compute=4]="Compute"}(e.ShaderStage||(e.ShaderStage={})),function(t){t[t.CopySrc=1]="CopySrc",t[t.CopyDst=2]="CopyDst",t[t.Sampled=4]="Sampled",t[t.Storage=8]="Storage",t[t.OutputAttachment=16]="OutputAttachment"}(e.TextureUsage||(e.TextureUsage={})),function(t){t[t.Read=1]="Read",t[t.Write=2]="Write"}(e.MapMode||(e.MapMode={}))},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){t.exports=n(370)},function(t,e){t.exports=function(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}},function(t,e){t.exports=function(t,e,n,r,o){var i={};return Object.keys(r).forEach((function(t){i[t]=r[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}},function(t,e){function n(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function u(t){n(a,o,i,u,s,"next",t)}function s(t){n(a,o,i,u,s,"throw",t)}u(void 0)}))}}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(402),o=n(403),i=n(160),a=n(404);t.exports=function(t){return r(t)||o(t)||i(t)||a()}},function(t,e,n){var r;try{r={cloneDeep:n(310),constant:n(84),defaults:n(311),each:n(123),filter:n(126),find:n(312),flatten:n(154),forEach:n(124),forIn:n(317),has:n(137),isUndefined:n(138),last:n(318),map:n(139),mapValues:n(319),max:n(320),merge:n(322),min:n(327),minBy:n(328),now:n(329),pick:n(330),range:n(335),reduce:n(141),sortBy:n(338),uniqueId:n(343),values:n(147),zipObject:n(344)}}catch(t){}r||(r=window._),t.exports=r},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(400);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){var r=n(51),o=n(12);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e}},function(t,e){t.exports=function(t,e){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.POST_CONSTRUCT=e.DESIGN_PARAM_TYPES=e.PARAM_TYPES=e.TAGGED_PROP=e.TAGGED=e.MULTI_INJECT_TAG=e.INJECT_TAG=e.OPTIONAL_TAG=e.UNMANAGED_TAG=e.NAME_TAG=e.NAMED_TAG=void 0,e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct"},function(t,e,n){"use strict";var r=n(11),o=n(23).Graph;function i(t,e,n,o){var i;do{i=r.uniqueId(o)}while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function a(t){return r.max(r.map(t.nodes(),(function(e){var n=t.node(e).rank;if(!r.isUndefined(n))return n})))}t.exports={addDummyNode:i,simplify:function(t){var e=(new o).setGraph(t.graph());return r.forEach(t.nodes(),(function(n){e.setNode(n,t.node(n))})),r.forEach(t.edges(),(function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},o=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})})),e},asNonCompoundGraph:function(t){var e=new o({multigraph:t.isMultigraph()}).setGraph(t.graph());return r.forEach(t.nodes(),(function(n){t.children(n).length||e.setNode(n,t.node(n))})),r.forEach(t.edges(),(function(n){e.setEdge(n,t.edge(n))})),e},successorWeights:function(t){var e=r.map(t.nodes(),(function(e){var n={};return r.forEach(t.outEdges(e),(function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight})),n}));return r.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=r.map(t.nodes(),(function(e){var n={};return r.forEach(t.inEdges(e),(function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight})),n}));return r.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,o=t.x,i=t.y,a=e.x-o,u=e.y-i,s=t.width/2,c=t.height/2;if(!a&&!u)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(u)*s>Math.abs(a)*c?(u<0&&(c=-c),n=c*a/u,r=c):(a<0&&(s=-s),n=s,r=s*u/a);return{x:o+n,y:i+r}},buildLayerMatrix:function(t){var e=r.map(r.range(a(t)+1),(function(){return[]}));return r.forEach(t.nodes(),(function(n){var o=t.node(n),i=o.rank;r.isUndefined(i)||(e[i][o.order]=n)})),e},normalizeRanks:function(t){var e=r.min(r.map(t.nodes(),(function(e){return t.node(e).rank})));r.forEach(t.nodes(),(function(n){var o=t.node(n);r.has(o,"rank")&&(o.rank-=e)}))},removeEmptyRanks:function(t){var e=r.min(r.map(t.nodes(),(function(e){return t.node(e).rank}))),n=[];r.forEach(t.nodes(),(function(r){var o=t.node(r).rank-e;n[o]||(n[o]=[]),n[o].push(r)}));var o=0,i=t.graph().nodeRankFactor;r.forEach(n,(function(e,n){r.isUndefined(e)&&n%i!=0?--o:o&&r.forEach(e,(function(e){t.node(e).rank+=o}))}))},addBorderNode:function(t,e,n,r){var o={width:0,height:0};arguments.length>=4&&(o.rank=n,o.order=r);return i(t,"border",o,e)},maxRank:a,partition:function(t,e){var n={lhs:[],rhs:[]};return r.forEach(t,(function(t){e(t)?n.lhs.push(t):n.rhs.push(t)})),n},time:function(t,e){var n=r.now();try{return e()}finally{console.log(t+" time: "+(r.now()-n)+"ms")}},notime:function(t,e){return e()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STACK_OVERFLOW=e.CIRCULAR_DEPENDENCY_IN_FACTORY=e.POST_CONSTRUCT_ERROR=e.MULTIPLE_POST_CONSTRUCT_METHODS=e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=e.ARGUMENTS_LENGTH_MISMATCH=e.INVALID_DECORATOR_OPERATION=e.INVALID_TO_SELF_VALUE=e.INVALID_FUNCTION_BINDING=e.INVALID_MIDDLEWARE_RETURN=e.NO_MORE_SNAPSHOTS_AVAILABLE=e.INVALID_BINDING_TYPE=e.NOT_IMPLEMENTED=e.CIRCULAR_DEPENDENCY=e.UNDEFINED_INJECT_ANNOTATION=e.MISSING_INJECT_ANNOTATION=e.MISSING_INJECTABLE_ANNOTATION=e.NOT_REGISTERED=e.CANNOT_UNBIND=e.AMBIGUOUS_MATCH=e.KEY_NOT_FOUND=e.NULL_ARGUMENT=e.DUPLICATED_METADATA=e.DUPLICATED_INJECTABLE_DECORATOR=void 0,e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",e.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",e.ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",e.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]},e.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.STACK_OVERFLOW="Maximum call stack size exceeded"},function(t,e,n){var r;try{r={clone:n(199),constant:n(84),each:n(123),filter:n(126),has:n(137),isArray:n(13),isEmpty:n(275),isFunction:n(46),isUndefined:n(138),keys:n(32),map:n(139),reduce:n(141),size:n(278),transform:n(284),union:n(285),values:n(147)}}catch(t){}r||(r=window._),t.exports=r},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e=n(t);return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var r=n(232),o=n(63),i=n(79),a=i&&i.isTypedArray,u=a?o(a):r;t.exports=u},function(t,e,n){var r;try{r=n(197)}catch(t){}r||(r=window.graphlib),t.exports=r},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(105),i="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,a=o||i||Function("return this")();t.exports=a},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return null!=t&&"object"==n(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var r=n(17),o=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===r.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();e.Metadata=o},function(t,e){},function(t,e,n){var r=n(46),o=n(78);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(255),i=n(265),a=n(39),u=n(13),s=n(272);t.exports=function(t){return"function"==typeof t?t:null==t?a:"object"==r(t)?u(t)?i(t[0],t[1]):o(t):s(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TargetTypeEnum=e.BindingTypeEnum=e.BindingScopeEnum=void 0;e.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};e.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};e.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},function(t,e,n){var r=n(42),o=n(211),i=n(212),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?o(t):i(t)}},function(t,e,n){var r=n(109),o=n(80),i=n(28);t.exports=function(t){return i(t)?r(t):o(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagProperty=e.tagParameter=e.decorate=void 0;var r=n(19),o=n(17);function i(t,e,n,o,i){var a={},u="number"==typeof i,s=void 0!==i&&u?i.toString():n;if(u&&void 0!==n)throw new Error(r.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(a=Reflect.getMetadata(t,e));var c=a[s];if(Array.isArray(c))for(var f=0,l=c;f<l.length;f++){var h=l[f];if(h.key===o.key)throw new Error(r.DUPLICATED_METADATA+" "+h.key.toString())}else c=[];c.push(o),a[s]=c,Reflect.defineMetadata(t,a,e)}function a(t,e){Reflect.decorate(t,e)}function u(t,e){return function(n,r){e(n,r,t)}}e.tagParameter=function(t,e,n,r){i(o.TAGGED,t,e,r,n)},e.tagProperty=function(t,e,n){i(o.TAGGED_PROP,t.constructor,e,n)},e.decorate=function(t,e,n){"number"==typeof n?a([u(n,t)],e):"string"==typeof n?Reflect.decorate([t],e,n):a([t],e)}},function(t,e,n){var r=n(371),o=n(372),i=n(160),a=n(373);t.exports=function(t,e){return r(t)||o(t,e)||i(t,e)||a()}},function(t,e,n){var r=n(31),o=n(25);t.exports=function(t){return"number"==typeof t||o(t)&&"[object Number]"==r(t)}},function(t,e,n){var r=n(178),o=n(177),i=n(185),a=n(100),u=n(186),s=[0,0];t.exports.computeMiter=function(t,e,n,a,c){return r(t,n,a),i(t,t),o(e,-t[1],t[0]),o(s,-n[1],n[0]),c/u(e,s)},t.exports.normal=function(t,e){return o(t,-e[1],e[0]),t},t.exports.direction=function(t,e,n){return a(t,e,n),i(t,t),t}},function(t,e,n){var r=n(210),o=n(215);t.exports=function(t,e){var n=o(t,e);return r(n)?n:void 0}},function(t,e,n){var r=n(109),o=n(235),i=n(28);t.exports=function(t){return i(t)?r(t,!0):o(t)}},function(t,e){t.exports=function(t){return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.id=void 0;var r=0;e.id=function(){return r++}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(24).Symbol;t.exports=r},function(t,e,n){(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(24),i=n(231),a="object"==r(e)&&e&&!e.nodeType&&e,u=a&&"object"==r(t)&&t&&!t.nodeType&&t,s=u&&u.exports===a?o.Buffer:void 0,c=(s?s.isBuffer:void 0)||i;t.exports=c}).call(this,n(61)(t))},function(t,e,n){var r=n(240),o=n(75),i=n(241),a=n(118),u=n(242),s=n(31),c=n(107),f=c(r),l=c(o),h=c(i),d=c(a),p=c(u),v=s;(r&&"[object DataView]"!=v(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=v(new o)||i&&"[object Promise]"!=v(i.resolve())||a&&"[object Set]"!=v(new a)||u&&"[object WeakMap]"!=v(new u))&&(v=function(t){var e=s(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case f:return"[object DataView]";case l:return"[object Map]";case h:return"[object Promise]";case d:return"[object Set]";case p:return"[object WeakMap]"}return e}),t.exports=v},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(31),i=n(25);t.exports=function(t){return"symbol"==r(t)||i(t)&&"[object Symbol]"==o(t)}},function(t,e,n){var r=n(31),o=n(21);t.exports=function(t){if(!o(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){var r=n(59),o=n(60);t.exports=function(t,e,n,i){var a=!n;n||(n={});for(var u=-1,s=e.length;++u<s;){var c=e[u],f=i?i(n[c],t[c],c,n,t):void 0;void 0===f&&(f=t[c]),a?o(n,c,f):r(n,c,f)}return n}},function(t,e,n){var r=n(230),o=n(25),i=Object.prototype,a=i.hasOwnProperty,u=i.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(t){return o(t)&&a.call(t,"callee")&&!u.call(t,"callee")};t.exports=s},function(t,e,n){var r=n(45);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.circularDependencyToException=e.listMetadataForTarget=e.listRegisteredBindingsForServiceIdentifier=e.getServiceIdentifierAsString=e.getFunctionName=void 0;var o=n(19);function i(t){return"function"==typeof t?t.name:"symbol"===r(t)?t.toString():t}function a(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\\s*([^\\s(]+)/);return n?n[1]:"Anonymous function: "+e}e.getServiceIdentifierAsString=i,e.listRegisteredBindingsForServiceIdentifier=function(t,e,n){var r="",o=n(t,e);return 0!==o.length&&(r="\\nRegistered bindings:",o.forEach((function(t){var e="Object";null!==t.implementationType&&(e=a(t.implementationType)),r=r+"\\n "+e,t.constraint.metaData&&(r=r+" - "+t.constraint.metaData)}))),r},e.circularDependencyToException=function t(e){e.childRequests.forEach((function(e){if(function t(e,n){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===n||t(e.parentRequest,n))}(e,e.serviceIdentifier)){var n=function(t){return function t(e,n){void 0===n&&(n=[]);var r=i(e.serviceIdentifier);return n.push(r),null!==e.parentRequest?t(e.parentRequest,n):n}(t).reverse().join(" --\\x3e ")}(e);throw new Error(o.CIRCULAR_DEPENDENCY+" "+n)}t(e)}))},e.listMetadataForTarget=function(t,e){if(e.isTagged()||e.isNamed()){var n="",r=e.getNamedTag(),o=e.getCustomTags();return null!==r&&(n+=r.toString()+"\\n"),null!==o&&o.forEach((function(t){n+=t.toString()+"\\n"}))," "+t+"\\n "+t+" - "+n}return" "+t},e.getFunctionName=a},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e){t.exports=function(t){return null==t}},function(t,e,n){t.exports={EPSILON:n(175),create:n(176),clone:n(405),fromValues:n(406),copy:n(407),set:n(177),equals:n(408),exactEquals:n(409),add:n(178),subtract:n(100),sub:n(410),multiply:n(179),mul:n(411),divide:n(180),div:n(412),inverse:n(413),min:n(414),max:n(415),rotate:n(416),floor:n(417),ceil:n(418),round:n(419),scale:n(420),scaleAndAdd:n(421),distance:n(181),dist:n(422),squaredDistance:n(182),sqrDist:n(423),length:n(183),len:n(424),squaredLength:n(184),sqrLen:n(425),negate:n(426),normalize:n(185),dot:n(186),cross:n(427),lerp:n(428),random:n(429),transformMat2:n(430),transformMat2d:n(431),transformMat3:n(432),transformMat4:n(433),forEach:n(434),limit:n(435)}},function(t,e,n){var r=n(55),o=n(205),i=n(206),a=n(207),u=n(208),s=n(209);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=u,c.prototype.set=s,t.exports=c},function(t,e,n){var r=n(200),o=n(201),i=n(202),a=n(203),u=n(204);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e,n){var r=n(41);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(37)(Object,"create");t.exports=r},function(t,e,n){var r=n(224);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(60),o=n(41),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];i.call(t,e)&&o(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(108);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=/^(?:0|[1-9]\\d*)$/;t.exports=function(t,e){var o=n(t);return!!(e=null==e?9007199254740991:e)&&("number"==o||"symbol"!=o&&r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(110)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){var r=n(85),o=n(253)(r);t.exports=o},function(t,e,n){var r=n(68),o=n(49);t.exports=function(t,e){for(var n=0,i=(e=r(e,t)).length;null!=t&&n<i;)t=t[o(e[n++])];return n&&n==i?t:void 0}},function(t,e,n){var r=n(13),o=n(88),i=n(267),a=n(133);t.exports=function(t,e){return r(t)?t:o(t,e)?[t]:i(a(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},function(t,e,n){var r=n(39),o=n(142),i=n(143);t.exports=function(t,e){return i(o(t,e,r),t+"")}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(41),i=n(28),a=n(62),u=n(21);t.exports=function(t,e,n){if(!u(n))return!1;var s=r(e);return!!("number"==s?i(n)&&a(e,n.length):"string"==s&&e in n)&&o(n[e],t)}},function(t,e,n){"use strict";var r=n(11);t.exports={longestPath:function(t){var e={};r.forEach(t.sources(),(function n(o){var i=t.node(o);if(r.has(e,o))return i.rank;e[o]=!0;var a=r.min(r.map(t.outEdges(o),(function(e){return n(e.w)-t.edge(e).minlen})));return a!==Number.POSITIVE_INFINITY&&null!=a||(a=0),i.rank=a}))},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},function(t,e){},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(20);t.exports=i;function i(t){this._isDirected=!o.has(t,"directed")||t.directed,this._isMultigraph=!!o.has(t,"multigraph")&&t.multigraph,this._isCompound=!!o.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=o.constant(void 0),this._defaultEdgeLabelFn=o.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function a(t,e){t[e]?t[e]++:t[e]=1}function u(t,e){--t[e]||delete t[e]}function s(t,e,n,r){var i=""+e,a=""+n;if(!t&&i>a){var u=i;i=a,a=u}return i+""+a+""+(o.isUndefined(r)?"\\0":r)}function c(t,e,n,r){var o=""+e,i=""+n;if(!t&&o>i){var a=o;o=i,i=a}var u={v:o,w:i};return r&&(u.name=r),u}function f(t,e){return s(t,e.v,e.w,e.name)}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(t){return this._label=t,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(t){return o.isFunction(t)||(t=o.constant(t)),this._defaultNodeLabelFn=t,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return o.keys(this._nodes)},i.prototype.sources=function(){var t=this;return o.filter(this.nodes(),(function(e){return o.isEmpty(t._in[e])}))},i.prototype.sinks=function(){var t=this;return o.filter(this.nodes(),(function(e){return o.isEmpty(t._out[e])}))},i.prototype.setNodes=function(t,e){var n=arguments,r=this;return o.each(t,(function(t){n.length>1?r.setNode(t,e):r.setNode(t)})),this},i.prototype.setNode=function(t,e){return o.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]="\\0",this._children[t]={},this._children["\\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},i.prototype.node=function(t){return this._nodes[t]},i.prototype.hasNode=function(t){return o.has(this._nodes,t)},i.prototype.removeNode=function(t){var e=this;if(o.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],o.each(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),o.each(o.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],o.each(o.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},i.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(o.isUndefined(e))e="\\0";else{for(var n=e+="";!o.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},i.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},i.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if("\\0"!==e)return e}},i.prototype.children=function(t){if(o.isUndefined(t)&&(t="\\0"),this._isCompound){var e=this._children[t];if(e)return o.keys(e)}else{if("\\0"===t)return this.nodes();if(this.hasNode(t))return[]}},i.prototype.predecessors=function(t){var e=this._preds[t];if(e)return o.keys(e)},i.prototype.successors=function(t){var e=this._sucs[t];if(e)return o.keys(e)},i.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return o.union(e,this.successors(t))},i.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},i.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;o.each(this._nodes,(function(n,r){t(r)&&e.setNode(r,n)})),o.each(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))}));var r={};return this._isCompound&&o.each(e.nodes(),(function(t){e.setParent(t,function t(o){var i=n.parent(o);return void 0===i||e.hasNode(i)?(r[o]=i,i):i in r?r[i]:t(i)}(t))})),e},i.prototype.setDefaultEdgeLabel=function(t){return o.isFunction(t)||(t=o.constant(t)),this._defaultEdgeLabelFn=t,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return o.values(this._edgeObjs)},i.prototype.setPath=function(t,e){var n=this,r=arguments;return o.reduce(t,(function(t,o){return r.length>1?n.setEdge(t,o,e):n.setEdge(t,o),o})),this},i.prototype.setEdge=function(){var t,e,n,i,u=!1,f=arguments[0];"object"===r(f)&&null!==f&&"v"in f?(t=f.v,e=f.w,n=f.name,2===arguments.length&&(i=arguments[1],u=!0)):(t=f,e=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],u=!0)),t=""+t,e=""+e,o.isUndefined(n)||(n=""+n);var l=s(this._isDirected,t,e,n);if(o.has(this._edgeLabels,l))return u&&(this._edgeLabels[l]=i),this;if(!o.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[l]=u?i:this._defaultEdgeLabelFn(t,e,n);var h=c(this._isDirected,t,e,n);return t=h.v,e=h.w,Object.freeze(h),this._edgeObjs[l]=h,a(this._preds[e],t),a(this._sucs[t],e),this._in[e][l]=h,this._out[t][l]=h,this._edgeCount++,this},i.prototype.edge=function(t,e,n){var r=1===arguments.length?f(this._isDirected,arguments[0]):s(this._isDirected,t,e,n);return this._edgeLabels[r]},i.prototype.hasEdge=function(t,e,n){var r=1===arguments.length?f(this._isDirected,arguments[0]):s(this._isDirected,t,e,n);return o.has(this._edgeLabels,r)},i.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?f(this._isDirected,arguments[0]):s(this._isDirected,t,e,n),o=this._edgeObjs[r];return o&&(t=o.v,e=o.w,delete this._edgeLabels[r],delete this._edgeObjs[r],u(this._preds[e],t),u(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},i.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var r=o.values(n);return e?o.filter(r,(function(t){return t.v===e})):r}},i.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var r=o.values(n);return e?o.filter(r,(function(t){return t.w===e})):r}},i.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},function(t,e,n){var r=n(37)(n(24),"Map");t.exports=r},function(t,e,n){var r=n(216),o=n(223),i=n(225),a=n(226),u=n(227);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e,n){(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(105),i="object"==r(e)&&e&&!e.nodeType&&e,a=i&&"object"==r(t)&&t&&!t.nodeType&&t,u=a&&a.exports===i&&o.process,s=function(){try{var t=a&&a.require&&a.require("util").types;return t||u&&u.binding&&u.binding("util")}catch(t){}}();t.exports=s}).call(this,n(61)(t))},function(t,e,n){var r=n(64),o=n(233),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=[];for(var n in Object(t))i.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var r=n(113),o=n(114),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,u=a?function(t){return null==t?[]:(t=Object(t),r(a(t),(function(e){return i.call(t,e)})))}:o;t.exports=u},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},function(t,e,n){var r=n(119);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e,n){var r=n(86),o=n(32);t.exports=function(t,e){return t&&r(t,e,o)}},function(t,e,n){var r=n(252)();t.exports=r},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(13),i=n(45),a=/\\.|\\[(?:[^[\\]]*|(["'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,u=/^\\w*$/;t.exports=function(t,e){if(o(t))return!1;var n=r(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(u.test(t)||!a.test(t)||null!=e&&t in Object(e))}},function(t,e,n){var r=n(82),o=n(286);t.exports=function t(e,n,i,a,u){var s=-1,c=e.length;for(i||(i=o),u||(u=[]);++s<c;){var f=e[s];n>0&&i(f)?n>1?t(f,n-1,i,a,u):r(u,f):a||(u[u.length]=f)}return u}},function(t,e,n){var r=n(45);t.exports=function(t,e,n){for(var o=-1,i=t.length;++o<i;){var a=t[o],u=e(a);if(null!=u&&(void 0===s?u==u&&!r(u):n(u,s)))var s=u,c=a}return c}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingOnSyntax=void 0;var r=n(92),o=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new r.BindingWhenSyntax(this._binding)},t}();e.BindingOnSyntax=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenSyntax=void 0;var r=n(91),o=n(167),i=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=o.namedConstraint(t),new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=o.taggedConstraint(t)(e),new r.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return o.typeConstraint(t)(e.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return o.namedConstraint(t)(e.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return o.taggedConstraint(t)(e)(n.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return o.traverseAncerstors(e,o.typeConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!o.traverseAncerstors(e,o.typeConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return o.traverseAncerstors(e,o.namedConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!o.traverseAncerstors(e,o.namedConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return o.traverseAncerstors(n,o.taggedConstraint(t)(e))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!o.traverseAncerstors(n,o.taggedConstraint(t)(e))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return o.traverseAncerstors(e,t)},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!o.traverseAncerstors(e,t)},new r.BindingOnSyntax(this._binding)},t}();e.BindingWhenSyntax=i},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}},function(t,e,n){var r=n(31),o=n(65),i=n(25),a=Function.prototype,u=Object.prototype,s=a.toString,c=u.hasOwnProperty,f=s.call(Object);t.exports=function(t){if(!i(t)||"[object Object]"!=r(t))return!1;var e=o(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==f}},function(t,e,n){t.exports={graphlib:n(23),layout:n(309),debug:n(367),util:{time:n(18).time,notime:n(18).notime},version:n(368)}},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,o="~";function i(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function u(t,e,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var u=new a(n,r||t,i),s=o?o+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],u]:t._events[s].push(u):(t._events[s]=u,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function c(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),c.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(o?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},c.prototype.listeners=function(t){var e=o?o+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,a=new Array(i);r<i;r++)a[r]=n[r].fn;return a},c.prototype.listenerCount=function(t){var e=o?o+t:t,n=this._events[e];return n?n.fn?1:n.length:0},c.prototype.emit=function(t,e,n,r,i,a){var u=o?o+t:t;if(!this._events[u])return!1;var s,c,f=this._events[u],l=arguments.length;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),l){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,e),!0;case 3:return f.fn.call(f.context,e,n),!0;case 4:return f.fn.call(f.context,e,n,r),!0;case 5:return f.fn.call(f.context,e,n,r,i),!0;case 6:return f.fn.call(f.context,e,n,r,i,a),!0}for(c=1,s=new Array(l-1);c<l;c++)s[c-1]=arguments[c];f.fn.apply(f.context,s)}else{var h,d=f.length;for(c=0;c<d;c++)switch(f[c].once&&this.removeListener(t,f[c].fn,void 0,!0),l){case 1:f[c].fn.call(f[c].context);break;case 2:f[c].fn.call(f[c].context,e);break;case 3:f[c].fn.call(f[c].context,e,n);break;case 4:f[c].fn.call(f[c].context,e,n,r);break;default:if(!s)for(h=1,s=new Array(l-1);h<l;h++)s[h-1]=arguments[h];f[c].fn.apply(f[c].context,s)}}return!0},c.prototype.on=function(t,e,n){return u(this,t,e,n,!1)},c.prototype.once=function(t,e,n){return u(this,t,e,n,!0)},c.prototype.removeListener=function(t,e,n,r){var i=o?o+t:t;if(!this._events[i])return this;if(!e)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||r&&!a.once||n&&a.context!==n||s(this,i);else{for(var u=0,c=[],f=a.length;u<f;u++)(a[u].fn!==e||r&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[i]=1===c.length?c[0]:c:s(this,i)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=o?o+t:t,this._events[e]&&s(this,e)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=o,c.EventEmitter=c,t.exports=c},function(t,e,n){var r=n(54),o=n(77),i=n(59),a=n(228),u=n(234),s=n(111),c=n(112),f=n(237),l=n(238),h=n(116),d=n(239),p=n(44),v=n(243),m=n(244),y=n(121),g=n(13),b=n(43),_=n(248),x=n(21),w=n(250),E=n(32),S=n(38),T={};T["[object Arguments]"]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T["[object Object]"]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T["[object Function]"]=T["[object WeakMap]"]=!1,t.exports=function t(e,n,A,I,k,O){var D,R=1&n,M=2&n,C=4&n;if(A&&(D=k?A(e,I,k,O):A(e)),void 0!==D)return D;if(!x(e))return e;var N=g(e);if(N){if(D=v(e),!R)return c(e,D)}else{var P=p(e),G="[object Function]"==P||"[object GeneratorFunction]"==P;if(b(e))return s(e,R);if("[object Object]"==P||"[object Arguments]"==P||G&&!k){if(D=M||G?{}:y(e),!R)return M?l(e,u(D,e)):f(e,a(D,e))}else{if(!T[P])return k?e:{};D=m(e,P,R)}}O||(O=new r);var j=O.get(e);if(j)return j;O.set(e,D),w(e)?e.forEach((function(r){D.add(t(r,n,A,r,e,O))})):_(e)&&e.forEach((function(r,o){D.set(o,t(r,n,A,o,e,O))}));var L=N?void 0:(C?M?d:h:M?S:E)(e);return o(L||e,(function(r,o){L&&(r=e[o=r]),i(D,o,t(r,n,A,o,e,O))})),D}},function(t,e,n){(function(e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r="object"==(void 0===e?"undefined":n(e))&&e&&e.Object===Object&&e;t.exports=r}).call(this,n(106))},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}t.exports=r},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var r=n(37),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e,n){var r=n(229),o=n(48),i=n(13),a=n(43),u=n(62),s=n(22),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=i(t),f=!n&&o(t),l=!n&&!f&&a(t),h=!n&&!f&&!l&&s(t),d=n||f||l||h,p=d?r(t.length,String):[],v=p.length;for(var m in t)!e&&!c.call(t,m)||d&&("length"==m||l&&("offset"==m||"parent"==m)||h&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||u(m,v))||p.push(m);return p}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(24),i="object"==r(e)&&e&&!e.nodeType&&e,a=i&&"object"==r(t)&&t&&!t.nodeType&&t,u=a&&a.exports===i?o.Buffer:void 0,s=u?u.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(61)(t))},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(82),o=n(65),i=n(81),a=n(114),u=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,i(t)),t=o(t);return e}:a;t.exports=u},function(t,e,n){var r=n(117),o=n(81),i=n(32);t.exports=function(t){return r(t,i,o)}},function(t,e,n){var r=n(82),o=n(13);t.exports=function(t,e,n){var i=e(t);return o(t)?i:r(i,n(t))}},function(t,e,n){var r=n(37)(n(24),"Set");t.exports=r},function(t,e,n){var r=n(24).Uint8Array;t.exports=r},function(t,e,n){var r=n(83);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(122),o=n(65),i=n(64);t.exports=function(t){return"function"!=typeof t.constructor||i(t)?{}:r(o(t))}},function(t,e,n){var r=n(21),o=Object.create,i=function(){function t(){}return function(e){if(!r(e))return{};if(o)return o(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=i},function(t,e,n){t.exports=n(124)},function(t,e,n){var r=n(77),o=n(66),i=n(125),a=n(13);t.exports=function(t,e){return(a(t)?r:o)(t,i(e))}},function(t,e,n){var r=n(39);t.exports=function(t){return"function"==typeof t?t:r}},function(t,e,n){var r=n(113),o=n(254),i=n(29),a=n(13);t.exports=function(t,e){return(a(t)?r:o)(t,i(e,3))}},function(t,e,n){var r=n(257),o=n(25);t.exports=function t(e,n,i,a,u){return e===n||(null==e||null==n||!o(e)&&!o(n)?e!=e&&n!=n:r(e,n,i,a,t,u))}},function(t,e,n){var r=n(129),o=n(260),i=n(130);t.exports=function(t,e,n,a,u,s){var c=1&n,f=t.length,l=e.length;if(f!=l&&!(c&&l>f))return!1;var h=s.get(t),d=s.get(e);if(h&&d)return h==e&&d==t;var p=-1,v=!0,m=2&n?new r:void 0;for(s.set(t,e),s.set(e,t);++p<f;){var y=t[p],g=e[p];if(a)var b=c?a(g,y,p,e,t,s):a(y,g,p,t,e,s);if(void 0!==b){if(b)continue;v=!1;break}if(m){if(!o(e,(function(t,e){if(!i(m,e)&&(y===t||u(y,t,n,a,s)))return m.push(e)}))){v=!1;break}}else if(y!==g&&!u(y,g,n,a,s)){v=!1;break}}return s.delete(t),s.delete(e),v}},function(t,e,n){var r=n(76),o=n(258),i=n(259);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,t.exports=a},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(21);t.exports=function(t){return t==t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},function(t,e,n){var r=n(270);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(271),o=n(135);t.exports=function(t,e){return null!=t&&o(t,e,r)}},function(t,e,n){var r=n(68),o=n(48),i=n(13),a=n(62),u=n(78),s=n(49);t.exports=function(t,e,n){for(var c=-1,f=(e=r(e,t)).length,l=!1;++c<f;){var h=s(e[c]);if(!(l=null!=t&&n(t,h)))break;t=t[h]}return l||++c!=f?l:!!(f=null==t?0:t.length)&&u(f)&&a(h,f)&&(i(t)||o(t))}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(274),o=n(135);t.exports=function(t,e){return null!=t&&o(t,e,r)}},function(t,e){t.exports=function(t){return void 0===t}},function(t,e,n){var r=n(69),o=n(29),i=n(140),a=n(13);t.exports=function(t,e){return(a(t)?r:i)(t,o(e,3))}},function(t,e,n){var r=n(66),o=n(28);t.exports=function(t,e){var n=-1,i=o(t)?Array(t.length):[];return r(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}},function(t,e,n){var r=n(276),o=n(66),i=n(29),a=n(277),u=n(13);t.exports=function(t,e,n){var s=u(t)?r:a,c=arguments.length<3;return s(t,i(e,4),n,c,o)}},function(t,e,n){var r=n(287),o=Math.max;t.exports=function(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var i=arguments,a=-1,u=o(i.length-e,0),s=Array(u);++a<u;)s[a]=i[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=i[a];return c[e]=n(s),r(t,this,c)}}},function(t,e,n){var r=n(288),o=n(289)(r);t.exports=o},function(t,e,n){var r=n(129),o=n(290),i=n(294),a=n(130),u=n(295),s=n(87);t.exports=function(t,e,n){var c=-1,f=o,l=t.length,h=!0,d=[],p=d;if(n)h=!1,f=i;else if(l>=200){var v=e?null:u(t);if(v)return s(v);h=!1,f=a,p=new r}else p=e?[]:d;t:for(;++c<l;){var m=t[c],y=e?e(m):m;if(m=n||0!==m?m:0,h&&y==y){for(var g=p.length;g--;)if(p[g]===y)continue t;e&&p.push(y),d.push(m)}else f(p,y,n)||(p!==d&&p.push(y),d.push(m))}return d}},function(t,e){t.exports=function(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}},function(t,e,n){var r=n(28),o=n(25);t.exports=function(t){return o(t)&&r(t)}},function(t,e,n){var r=n(297),o=n(32);t.exports=function(t){return null==t?[]:r(t,o(t))}},function(t,e,n){var r=n(20),o=n(149);t.exports=function(t,e,n,r){return function(t,e,n,r){var i,a,u={},s=new o,c=function(t){var e=t.v!==i?t.v:t.w,r=u[e],o=n(t),c=a.distance+o;if(o<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+o);c<r.distance&&(r.distance=c,r.predecessor=i,s.decrease(e,c))};t.nodes().forEach((function(t){var n=t===e?0:Number.POSITIVE_INFINITY;u[t]={distance:n},s.add(t,n)}));for(;s.size()>0&&(i=s.removeMin(),(a=u[i]).distance!==Number.POSITIVE_INFINITY);)r(i).forEach(c);return u}(t,String(e),n||i,r||function(e){return t.outEdges(e)})};var i=r.constant(1)},function(t,e,n){var r=n(20);function o(){this._arr=[],this._keyIndices={}}t.exports=o,o.prototype.size=function(){return this._arr.length},o.prototype.keys=function(){return this._arr.map((function(t){return t.key}))},o.prototype.has=function(t){return r.has(this._keyIndices,t)},o.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},o.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},o.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!r.has(n,t)){var o=this._arr,i=o.length;return n[t]=i,o.push({key:t,priority:e}),this._decrease(i),!0}return!1},o.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},o.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},o.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,o=t;n<e.length&&(o=e[n].priority<e[o].priority?n:o,r<e.length&&(o=e[r].priority<e[o].priority?r:o),o!==t&&(this._swap(t,o),this._heapify(o)))},o.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},o.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,o=n[t],i=n[e];n[t]=i,n[e]=o,r[i.key]=t,r[o.key]=e}},function(t,e,n){var r=n(20);t.exports=function(t){var e=0,n=[],o={},i=[];return t.nodes().forEach((function(a){r.has(o,a)||function a(u){var s=o[u]={onStack:!0,lowlink:e,index:e++};if(n.push(u),t.successors(u).forEach((function(t){r.has(o,t)?o[t].onStack&&(s.lowlink=Math.min(s.lowlink,o[t].index)):(a(t),s.lowlink=Math.min(s.lowlink,o[t].lowlink))})),s.lowlink===s.index){var c,f=[];do{c=n.pop(),o[c].onStack=!1,f.push(c)}while(u!==c);i.push(f)}}(a)})),i}},function(t,e,n){var r=n(20);function o(t){var e={},n={},o=[];if(r.each(t.sinks(),(function a(u){if(r.has(n,u))throw new i;r.has(e,u)||(n[u]=!0,e[u]=!0,r.each(t.predecessors(u),a),delete n[u],o.push(u))})),r.size(e)!==t.nodeCount())throw new i;return o}function i(){}t.exports=o,o.CycleException=i,i.prototype=new Error},function(t,e,n){var r=n(20);t.exports=function(t,e,n){r.isArray(e)||(e=[e]);var o=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],a={};return r.each(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);!function t(e,n,o,i,a,u){r.has(i,n)||(i[n]=!0,o||u.push(n),r.each(a(n),(function(n){t(e,n,o,i,a,u)})),o&&u.push(n))}(t,e,"post"===n,a,o,i)})),i}},function(t,e,n){var r=n(316);t.exports=function(t){return t?(t=r(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},function(t,e,n){var r=n(89);t.exports=function(t){return(null==t?0:t.length)?r(t,1):[]}},function(t,e,n){var r=n(60),o=n(41);t.exports=function(t,e,n){(void 0!==n&&!o(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}},function(t,e){t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},function(t,e){t.exports=function(t,e){return t<e}},function(t,e,n){"use strict";var r=n(11),o=n(23).Graph,i=n(72).slack;function a(t,e){return r.forEach(t.nodes(),(function n(o){r.forEach(e.nodeEdges(o),(function(r){var a=r.v,u=o===a?r.w:a;t.hasNode(u)||i(e,r)||(t.setNode(u,{}),t.setEdge(o,u,{}),n(u))}))})),t.nodeCount()}function u(t,e){return r.minBy(e.edges(),(function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return i(e,n)}))}function s(t,e,n){r.forEach(t.nodes(),(function(t){e.node(t).rank+=n}))}t.exports=function(t){var e,n,r=new o({directed:!1}),c=t.nodes()[0],f=t.nodeCount();r.setNode(c,{});for(;a(r,t)<f;)e=u(r,t),n=r.hasNode(e.v)?i(t,e):-i(t,e),s(r,t,n);return r}},function(t,e,n){(function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var r;!function(r){!function(o){var i="object"===(void 0===e?"undefined":n(e))?e:"object"===("undefined"==typeof self?"undefined":n(self))?self:"object"===n(this)?this:Function("return this;")(),a=u(r);function u(t,e){return function(n,r){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}void 0===i.Reflect?i.Reflect=r:a=u(i.Reflect,a),function(e){var r=Object.prototype.hasOwnProperty,o="function"==typeof Symbol,i=o&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",a=o&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",u="function"==typeof Object.create,s={__proto__:[]}instanceof Array,c=!u&&!s,f={create:u?function(){return N(Object.create(null))}:s?function(){return N({__proto__:null})}:function(){return N({})},has:c?function(t,e){return r.call(t,e)}:function(t,e){return e in t},get:c?function(t,e){return r.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},l=Object.getPrototypeOf(Function),h="object"===(void 0===t?"undefined":n(t))&&t.env&&"true"===t.env.REFLECT_METADATA_USE_MAP_POLYFILL,d=h||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[a]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var r=this._keys.length,o=n+1;o<r;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,r)},e.prototype.values=function(){return new n(this._keys,this._values,o)},e.prototype.entries=function(){return new n(this._keys,this._values,i)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[a]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function r(t,e){return t}function o(t,e){return e}function i(t,e){return[t,e]}}():Map,p=h||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new d}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[a]=function(){return this.keys()},t}():Set,v=new(h||"function"!=typeof WeakMap?function(){var t=f.create(),e=n();return function(){function t(){this._key=n()}return t.prototype.has=function(t){var e=o(t,!1);return void 0!==e&&f.has(e,this._key)},t.prototype.get=function(t){var e=o(t,!1);return void 0!==e?f.get(e,this._key):void 0},t.prototype.set=function(t,e){return o(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=o(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=n()},t}();function n(){var e;do{e="@@WeakMap@@"+a()}while(f.has(t,e));return t[e]=!0,e}function o(t,n){if(!r.call(t,e)){if(!n)return;Object.defineProperty(t,e,{value:f.create()})}return t[e]}function i(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function a(){var t,e=(t=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):i(new Uint8Array(t),t):i(new Array(t),t));e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",r=0;r<16;++r){var o=e[r];4!==r&&6!==r&&8!==r||(n+="-"),o<16&&(n+="0"),n+=o.toString(16).toLowerCase()}return n}}():WeakMap);function m(t,e,n){var r=v.get(t);if(w(r)){if(!n)return;r=new d,v.set(t,r)}var o=r.get(e);if(w(o)){if(!n)return;o=new d,r.set(e,o)}return o}function y(t,e,n){var r=m(e,n,!1);return!w(r)&&!!r.has(t)}function g(t,e,n){var r=m(e,n,!1);if(!w(r))return r.get(t)}function b(t,e,n,r){m(n,r,!0).set(t,e)}function _(t,e){var n=[],r=m(t,e,!1);if(w(r))return n;for(var o=function(t){var e=D(t,a);if(!k(e))throw new TypeError;var n=e.call(t);if(!S(n))throw new TypeError;return n}(r.keys()),i=0;;){var u=R(o);if(!u)return n.length=i,n;var s=u.value;try{n[i]=s}catch(t){try{M(o)}finally{throw t}}i++}}function x(t){if(null===t)return 1;switch(n(t)){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function w(t){return void 0===t}function E(t){return null===t}function S(t){return"object"===n(t)?null!==t:"function"==typeof t}function T(t,e){switch(x(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",r=D(t,i);if(void 0!==r){var o=r.call(t,n);if(S(o))throw new TypeError;return o}return function(t,e){if("string"===e){var n=t.toString;if(k(n))if(!S(o=n.call(t)))return o;if(k(r=t.valueOf))if(!S(o=r.call(t)))return o}else{var r;if(k(r=t.valueOf))if(!S(o=r.call(t)))return o;var o,i=t.toString;if(k(i))if(!S(o=i.call(t)))return o}throw new TypeError}(t,"default"===n?"number":n)}function A(t){var e=T(t,3);return"symbol"===n(e)?e:function(t){return""+t}(e)}function I(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function k(t){return"function"==typeof t}function O(t){return"function"==typeof t}function D(t,e){var n=t[e];if(null!=n){if(!k(n))throw new TypeError;return n}}function R(t){var e=t.next();return!e.done&&e}function M(t){var e=t.return;e&&e.call(t)}function C(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===l)return e;if(e!==l)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var o=r.constructor;return"function"!=typeof o||o===t?e:o}function N(t){return t.__=void 0,delete t.__,t}e("decorate",(function(t,e,n,r){if(w(n)){if(!I(t))throw new TypeError;if(!O(e))throw new TypeError;return function(t,e){for(var n=t.length-1;n>=0;--n){var r=(0,t[n])(e);if(!w(r)&&!E(r)){if(!O(r))throw new TypeError;e=r}}return e}(t,e)}if(!I(t))throw new TypeError;if(!S(e))throw new TypeError;if(!S(r)&&!w(r)&&!E(r))throw new TypeError;return E(r)&&(r=void 0),function(t,e,n,r){for(var o=t.length-1;o>=0;--o){var i=(0,t[o])(e,n,r);if(!w(i)&&!E(i)){if(!S(i))throw new TypeError;r=i}}return r}(t,e,n=A(n),r)})),e("metadata",(function(t,e){return function(n,r){if(!S(n))throw new TypeError;if(!w(r)&&!function(t){switch(x(t)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;b(t,e,n,r)}})),e("defineMetadata",(function(t,e,n,r){if(!S(n))throw new TypeError;return w(r)||(r=A(r)),b(t,e,n,r)})),e("hasMetadata",(function(t,e,n){if(!S(e))throw new TypeError;return w(n)||(n=A(n)),function t(e,n,r){if(y(e,n,r))return!0;var o=C(n);return!E(o)&&t(e,o,r)}(t,e,n)})),e("hasOwnMetadata",(function(t,e,n){if(!S(e))throw new TypeError;return w(n)||(n=A(n)),y(t,e,n)})),e("getMetadata",(function(t,e,n){if(!S(e))throw new TypeError;return w(n)||(n=A(n)),function t(e,n,r){if(y(e,n,r))return g(e,n,r);var o=C(n);return E(o)?void 0:t(e,o,r)}(t,e,n)})),e("getOwnMetadata",(function(t,e,n){if(!S(e))throw new TypeError;return w(n)||(n=A(n)),g(t,e,n)})),e("getMetadataKeys",(function(t,e){if(!S(t))throw new TypeError;return w(e)||(e=A(e)),function t(e,n){var r=_(e,n),o=C(e);if(null===o)return r;var i=t(o,n);if(i.length<=0)return r;if(r.length<=0)return i;for(var a=new p,u=[],s=0,c=r;s<c.length;s++){var f=c[s];a.has(f)||(a.add(f),u.push(f))}for(var l=0,h=i;l<h.length;l++){f=h[l];a.has(f)||(a.add(f),u.push(f))}return u}(t,e)})),e("getOwnMetadataKeys",(function(t,e){if(!S(t))throw new TypeError;return w(e)||(e=A(e)),_(t,e)})),e("deleteMetadata",(function(t,e,n){if(!S(e))throw new TypeError;w(n)||(n=A(n));var r=m(e,n,!1);if(w(r))return!1;if(!r.delete(t))return!1;if(r.size>0)return!0;var o=v.get(e);return o.delete(n),o.size>0||v.delete(e),!0}))}(a)}()}(r||(r={}))}).call(this,n(369),n(106))},function(t,e,n){var r=n(161);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MetadataReader=void 0;var r=n(17),o=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(r.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(r.TAGGED,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(r.TAGGED_PROP,t)||[]},t}();e.MetadataReader=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isStackOverflowExeption=void 0;var r=n(19);e.isStackOverflowExeption=function(t){return t instanceof RangeError||t.message===r.STACK_OVERFLOW}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.inject=e.LazyServiceIdentifer=void 0;var r=n(19),o=n(17),i=n(26),a=n(33),u=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();e.LazyServiceIdentifer=u,e.inject=function(t){return function(e,n,u){if(void 0===t)throw new Error(r.UNDEFINED_INJECT_ANNOTATION(e.name));var s=new i.Metadata(o.INJECT_TAG,t);"number"==typeof u?a.tagParameter(e,n,u,s):a.tagProperty(e,n,s)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Target=void 0;var r=n(17),o=n(40),i=n(26),a=n(381),u=function(){function t(t,e,n,u){this.id=o.id(),this.type=t,this.serviceIdentifier=n,this.name=new a.QueryableString(e||""),this.metadata=new Array;var s=null;"string"==typeof u?s=new i.Metadata(r.NAMED_TAG,u):u instanceof i.Metadata&&(s=u),null!==s&&this.metadata.push(s)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){if(n[e].key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(r.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(t){return this.matchesTag(r.MULTI_INJECT_TAG)(t)},t.prototype.isNamed=function(){return this.hasTag(r.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some((function(t){return t.key!==r.INJECT_TAG&&t.key!==r.MULTI_INJECT_TAG&&t.key!==r.NAME_TAG&&t.key!==r.UNMANAGED_TAG&&t.key!==r.NAMED_TAG}))},t.prototype.isOptional=function(){return this.matchesTag(r.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===r.NAMED_TAG}))[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return t.key!==r.INJECT_TAG&&t.key!==r.MULTI_INJECT_TAG&&t.key!==r.NAME_TAG&&t.key!==r.UNMANAGED_TAG&&t.key!==r.NAMED_TAG})):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(r.NAMED_TAG)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var r=0,o=e.metadata;r<o.length;r++){var i=o[r];if(i.key===t&&i.value===n)return!0}return!1}},t}();e.Target=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenOnSyntax=void 0;var r=n(91),o=n(92),i=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingWhenOnSyntax=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.typeConstraint=e.namedConstraint=e.taggedConstraint=e.traverseAncerstors=void 0;var r=n(17),o=n(26);e.traverseAncerstors=function t(e,n){var r=e.parentRequest;return null!==r&&(!!n(r)||t(r,n))};var i=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new o.Metadata(t,e),n}};e.taggedConstraint=i;var a=i(r.NAMED_TAG);e.namedConstraint=a;e.typeConstraint=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"==typeof t)return n.serviceIdentifier===t;var r=e.bindings[0].implementationType;return t===r}return!1}}},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){t.exports=1e-6},function(t,e){t.exports=function(){var t=new Float32Array(2);return t[0]=0,t[1]=0,t}},function(t,e){t.exports=function(t,e,n){return t[0]=e,t[1]=n,t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}},function(t,e){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}},function(t,e){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}},function(t,e){t.exports=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}},function(t,e){t.exports=function(t){var e=t[0],n=t[1];return e*e+n*n}},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o);return t}},function(t,e){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(401);e.default=function(t,e){return void 0===e&&(e=!0),{lazyInject:r.makePropertyInjectDecorator(t,e),lazyInjectNamed:r.makePropertyInjectNamedDecorator(t,e),lazyInjectTagged:r.makePropertyInjectTaggedDecorator(t,e),lazyMultiInject:r.makePropertyMultiInjectDecorator(t,e)}}},function(t,e,n){var r=n(144);t.exports=function(t){return t&&t.length?r(t):[]}},function(t,e,n){var r,o,i;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i=function(){"use strict";var t=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},e=function(t,e){for(var n=Object.keys(e),r=0;r<n.length;++r)t[n[r]]=e[n[r]];return t};function n(t){var e=new Error("(regl) "+t);throw console.error(e),e}function r(t,e){t||n(e)}function o(t){return t?": "+t:""}function i(t,e){switch(e){case"number":return"number"==typeof t;case"object":return"object"===a(t);case"string":return"string"==typeof t;case"boolean":return"boolean"==typeof t;case"function":return"function"==typeof t;case"undefined":return void 0===t;case"symbol":return"symbol"===a(t)}}function u(t,e,r){e.indexOf(t)<0&&n("invalid value"+o(r)+". must be one of: "+e)}var s=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function c(t,e){for(t+="";t.length<e;)t=" "+t;return t}function f(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function l(t,e){this.number=t,this.line=e,this.errors=[]}function h(t,e,n){this.file=t,this.line=e,this.message=n}function d(){var t=new Error,e=(t.stack||t).toString(),n=/compileProcedure.*\\n\\s*at.*\\((.*)\\)/.exec(e);if(n)return n[1];var r=/compileProcedure.*\\n\\s*at\\s+(.*)(\\n|$)/.exec(e);return r?r[1]:"unknown"}function p(){var t=new Error,e=(t.stack||t).toString(),n=/at REGLCommand.*\\n\\s+at.*\\((.*)\\)/.exec(e);if(n)return n[1];var r=/at REGLCommand.*\\n\\s+at\\s+(.*)\\n/.exec(e);return r?r[1]:"unknown"}function v(t,e){var n,r=t.split("\\n"),o=1,i=0,a={unknown:new f,0:new f};a.unknown.name=a[0].name=e||d(),a.unknown.lines.push(new l(0,""));for(var u=0;u<r.length;++u){var s=r[u],c=/^\\s*#\\s*(\\w+)\\s+(.+)\\s*$/.exec(s);if(c)switch(c[1]){case"line":var h=/(\\d+)(\\s+\\d+)?/.exec(c[2]);h&&(o=0|h[1],h[2]&&((i=0|h[2])in a||(a[i]=new f)));break;case"define":var p=/SHADER_NAME(_B64)?\\s+(.*)$/.exec(c[2]);p&&(a[i].name=p[1]?(n=p[2],"undefined"!=typeof atob?atob(n):"base64:"+n):p[2])}a[i].lines.push(new l(o++,s))}return Object.keys(a).forEach((function(t){var e=a[t];e.lines.forEach((function(t){e.index[t.number]=t}))})),a}function m(t){t._commandRef=d()}function y(t,e){var r=p();n(t+" in command "+(e||d())+("unknown"===r?"":" called from "+r))}function g(t,e,n,r){i(t,e)||y("invalid parameter type"+o(n)+". expected "+e+", got "+a(t),r||d())}var b={};function _(t,e){return 32820===t||32819===t||33635===t?2:34042===t?4:b[t]*e}function x(t){return!(t&t-1||!t)}b[5120]=b[5121]=1,b[5122]=b[5123]=b[36193]=b[33635]=b[32819]=b[32820]=2,b[5124]=b[5125]=b[5126]=b[34042]=4;var w=e(r,{optional:function(t){t()},raise:n,commandRaise:y,command:function(t,e,n){t||y(e,n||d())},parameter:function(t,e,r){t in e||n("unknown parameter ("+t+")"+o(r)+". possible values: "+Object.keys(e).join())},commandParameter:function(t,e,n,r){t in e||y("unknown parameter ("+t+")"+o(n)+". possible values: "+Object.keys(e).join(),r||d())},constructor:function(t){Object.keys(t).forEach((function(t){s.indexOf(t)<0&&n('invalid regl constructor argument "'+t+'". must be one of '+s)}))},type:function(t,e,r){i(t,e)||n("invalid parameter type"+o(r)+". expected "+e+", got "+a(t))},commandType:g,isTypedArray:function(e,r){t(e)||n("invalid parameter type"+o(r)+". must be a typed array")},nni:function(t,e){t>=0&&(0|t)===t||n("invalid parameter type, ("+t+")"+o(e)+". must be a nonnegative integer")},oneOf:u,shaderError:function(t,e,n,o,i){if(!t.getShaderParameter(e,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(e),u=o===t.FRAGMENT_SHADER?"fragment":"vertex";g(n,"string",u+" shader source must be a string",i);var s=v(n,i),f=function(t){var e=[];return t.split("\\n").forEach((function(t){if(!(t.length<5)){var n=/^ERROR:\\s+(\\d+):(\\d+):\\s*(.*)$/.exec(t);n?e.push(new h(0|n[1],0|n[2],n[3].trim())):t.length>0&&e.push(new h("unknown",0,t))}})),e}(a);!function(t,e){e.forEach((function(e){var n=t[e.file];if(n){var r=n.index[e.line];if(r)return r.errors.push(e),void(n.hasErrors=!0)}t.unknown.hasErrors=!0,t.unknown.lines[0].errors.push(e)}))}(s,f),Object.keys(s).forEach((function(t){var e=s[t];if(e.hasErrors){var n=[""],r=[""];o("file number "+t+": "+e.name+"\\n","color:red;text-decoration:underline;font-weight:bold"),e.lines.forEach((function(t){if(t.errors.length>0){o(c(t.number,4)+"|  ","background-color:yellow; font-weight:bold"),o(t.line+"\\n","color:red; background-color:yellow; font-weight:bold");var e=0;t.errors.forEach((function(n){var r=n.message,i=/^\\s*'(.*)'\\s*:\\s*(.*)$/.exec(r);if(i){var a=i[1];switch(r=i[2],a){case"assign":a="="}e=Math.max(t.line.indexOf(a,e),0)}else e=0;o(c("| ",6)),o(c("^^^",e+3)+"\\n","font-weight:bold"),o(c("| ",6)),o(r+"\\n","font-weight:bold")})),o(c("| ",6)+"\\n")}else o(c(t.number,4)+"|  "),o(t.line+"\\n","color:red")})),"undefined"==typeof document||window.chrome?console.log(n.join("")):(r[0]=n.join("%c"),console.log.apply(console,r))}function o(t,e){n.push(t),r.push(e||"")}})),r.raise("Error compiling "+u+" shader, "+s[0].name)}},linkError:function(t,e,n,o,i){if(!t.getProgramParameter(e,t.LINK_STATUS)){var a=t.getProgramInfoLog(e),u=v(n,i),s='Error linking program with vertex shader, "'+v(o,i)[0].name+'", and fragment shader "'+u[0].name+'"';"undefined"!=typeof document?console.log("%c"+s+"\\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(s+"\\n"+a),r.raise(s)}},callSite:p,saveCommandRef:m,saveDrawInfo:function(t,e,n,r){function o(t){return t?r.id(t):0}function i(t,e){Object.keys(e).forEach((function(e){t[r.id(e)]=!0}))}m(t),t._fragId=o(t.static.frag),t._vertId=o(t.static.vert);var a=t._uniformSet={};i(a,e.static),i(a,e.dynamic);var u=t._attributeSet={};i(u,n.static),i(u,n.dynamic),t._hasCount="count"in t.static||"count"in t.dynamic||"elements"in t.static||"elements"in t.dynamic},framebufferFormat:function(t,e,n){t.texture?u(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):u(t.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")},guessCommand:d,texture2D:function(t,e,n){var o,i=e.width,a=e.height,u=e.channels;r(i>0&&i<=n.maxTextureSize&&a>0&&a<=n.maxTextureSize,"invalid texture shape"),33071===t.wrapS&&33071===t.wrapT||r(x(i)&&x(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==i&&1!==a&&r(9984!==t.minFilter&&9986!==t.minFilter&&9985!==t.minFilter&&9987!==t.minFilter,"min filter requires mipmap"):(r(x(i)&&x(a),"texture must be a square power of 2 to support mipmapping"),r(e.mipmask===(i<<1)-1,"missing or incomplete mipmap data")),5126===e.type&&(n.extensions.indexOf("oes_texture_float_linear")<0&&r(9728===t.minFilter&&9728===t.magFilter,"filter not supported, must enable oes_texture_float_linear"),r(!t.genMipmaps,"mipmap generation not supported with float textures"));var s=e.images;for(o=0;o<16;++o)if(s[o]){var c=i>>o,f=a>>o;r(e.mipmask&1<<o,"missing mipmap data");var l=s[o];if(r(l.width===c&&l.height===f,"invalid shape for mip images"),r(l.format===e.format&&l.internalformat===e.internalformat&&l.type===e.type,"incompatible type for mip image"),l.compressed);else if(l.data){var h=Math.ceil(_(l.type,u)*c/l.unpackAlignment)*l.unpackAlignment;r(l.data.byteLength===h*f,"invalid data for image, buffer size is inconsistent with image format")}else l.element||l.copy}else t.genMipmaps||r(0==(e.mipmask&1<<o),"extra mipmap data");e.compressed&&r(!t.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(t,e,n,o){var i=t.width,a=t.height,u=t.channels;r(i>0&&i<=o.maxTextureSize&&a>0&&a<=o.maxTextureSize,"invalid texture shape"),r(i===a,"cube map must be square"),r(33071===e.wrapS&&33071===e.wrapT,"wrap mode not supported by cube map");for(var s=0;s<n.length;++s){var c=n[s];r(c.width===i&&c.height===a,"inconsistent cube map face shape"),e.genMipmaps&&(r(!c.compressed,"can not generate mipmap for compressed textures"),r(1===c.mipmask,"can not specify mipmaps and generate mipmaps"));for(var f=c.images,l=0;l<16;++l){var h=f[l];if(h){var d=i>>l,p=a>>l;r(c.mipmask&1<<l,"missing mipmap data"),r(h.width===d&&h.height===p,"invalid shape for mip images"),r(h.format===t.format&&h.internalformat===t.internalformat&&h.type===t.type,"incompatible type for mip image"),h.compressed||(h.data?r(h.data.byteLength===d*p*Math.max(_(h.type,u),h.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):h.element||h.copy)}}}}}),E=0;function S(t,e){this.id=E++,this.type=t,this.data=e}function T(t){return t.replace(/\\\\/g,"\\\\\\\\").replace(/"/g,'\\\\"')}function A(t){return"["+function t(e){if(0===e.length)return[];var n=e.charAt(0),r=e.charAt(e.length-1);if(e.length>1&&n===r&&('"'===n||"'"===n))return['"'+T(e.substr(1,e.length-2))+'"'];var o=/\\[(false|true|null|\\d+|'[^']*'|"[^"]*")\\]/.exec(e);if(o)return t(e.substr(0,o.index)).concat(t(o[1])).concat(t(e.substr(o.index+o[0].length)));var i=e.split(".");if(1===i.length)return['"'+T(e)+'"'];for(var a=[],u=0;u<i.length;++u)a=a.concat(t(i[u]));return a}(t).join("][")+"]"}var I={DynamicVariable:S,define:function(t,e){return new S(t,A(e+""))},isDynamic:function(t){return"function"==typeof t&&!t._reglType||t instanceof S},unbox:function t(e,n){return"function"==typeof e?new S(0,e):"number"==typeof e||"boolean"==typeof e?new S(5,e):Array.isArray(e)?new S(6,e.map((function(e,r){return t(e,n+"["+r+"]")}))):e instanceof S?e:void w(!1,"invalid option type in uniform "+n)},accessor:A},k={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},O="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function D(t){return"string"==typeof t?t.split():(w(Array.isArray(t),"invalid extension array"),t)}function R(t){return"string"==typeof t?(w("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function M(t){var n,r,o,i,u,s=t||{},c={},f=[],l=[],h="undefined"==typeof window?1:window.devicePixelRatio,d=!1,p=function(t){t&&w.raise(t)},v=function(){};if("string"==typeof s?(w("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),n=document.querySelector(s),w(n,"invalid query string for element")):"object"===a(s)?"string"==typeof(u=s).nodeName&&"function"==typeof u.appendChild&&"function"==typeof u.getBoundingClientRect?n=s:function(t){return"function"==typeof t.drawArrays||"function"==typeof t.drawElements}(s)?o=(i=s).canvas:(w.constructor(s),"gl"in s?i=s.gl:"canvas"in s?o=R(s.canvas):"container"in s&&(r=R(s.container)),"attributes"in s&&(c=s.attributes,w.type(c,"object","invalid context attributes")),"extensions"in s&&(f=D(s.extensions)),"optionalExtensions"in s&&(l=D(s.optionalExtensions)),"onDone"in s&&(w.type(s.onDone,"function","invalid or missing onDone callback"),p=s.onDone),"profile"in s&&(d=!!s.profile),"pixelRatio"in s&&(h=+s.pixelRatio,w(h>0,"invalid pixel ratio"))):w.raise("invalid arguments to regl"),n&&("canvas"===n.nodeName.toLowerCase()?o=n:r=n),!i){if(!o){w("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var m=function(t,n,r){var o,i=document.createElement("canvas");function a(){var n=window.innerWidth,o=window.innerHeight;if(t!==document.body){var a=t.getBoundingClientRect();n=a.right-a.left,o=a.bottom-a.top}i.width=r*n,i.height=r*o,e(i.style,{width:n+"px",height:o+"px"})}return e(i.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(i),t===document.body&&(i.style.position="absolute",e(t.style,{margin:0,padding:0})),t!==document.body&&"function"==typeof ResizeObserver?(o=new ResizeObserver((function(){setTimeout(a)}))).observe(t):window.addEventListener("resize",a,!1),a(),{canvas:i,onDestroy:function(){o?o.disconnect():window.removeEventListener("resize",a),t.removeChild(i)}}}(r||document.body,0,h);if(!m)return null;o=m.canvas,v=m.onDestroy}void 0===c.premultipliedAlpha&&(c.premultipliedAlpha=!0),i=function(t,e){function n(n){try{return t.getContext(n,e)}catch(t){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}(o,c)}return i?{gl:i,canvas:o,container:r,extensions:f,optionalExtensions:l,pixelRatio:h,profile:d,onDone:p,onDestroy:v}:(v(),p("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function C(t,e){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r);return n}function N(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1}function P(){var t=C(8,(function(){return[]}));function e(e){var n=function(t){for(var e=16;e<=1<<28;e*=16)if(t<=e)return e;return 0}(e),r=t[N(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(e){t[N(e.byteLength)>>2].push(e)}return{alloc:e,free:n,allocType:function(t,n){var r=null;switch(t){case 5120:r=new Int8Array(e(n),0,n);break;case 5121:r=new Uint8Array(e(n),0,n);break;case 5122:r=new Int16Array(e(2*n),0,n);break;case 5123:r=new Uint16Array(e(2*n),0,n);break;case 5124:r=new Int32Array(e(4*n),0,n);break;case 5125:r=new Uint32Array(e(4*n),0,n);break;case 5126:r=new Float32Array(e(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r},freeType:function(t){n(t.buffer)}}}var G=P();function j(e){return!!e&&"object"===a(e)&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||t(e.data))}G.zero=P();var L=function(t){return Object.keys(t).map((function(e){return t[e]}))},U={shape:function(t){for(var e=[],n=t;n.length;n=n[0])e.push(n.length);return e},flatten:function(t,e,n,r){var o=1;if(e.length)for(var i=0;i<e.length;++i)o*=e[i];else o=0;var a=r||G.allocType(n,o);switch(e.length){case 0:break;case 1:!function(t,e,n){for(var r=0;r<e;++r)n[r]=t[r]}(t,e[0],a);break;case 2:!function(t,e,n,r){for(var o=0,i=0;i<e;++i)for(var a=t[i],u=0;u<n;++u)r[o++]=a[u]}(t,e[0],e[1],a);break;case 3:B(t,e[0],e[1],e[2],a,0);break;default:!function t(e,n,r,o,i){for(var a=1,u=r+1;u<n.length;++u)a*=n[u];var s=n[r];if(n.length-r==4){var c=n[r+1],f=n[r+2],l=n[r+3];for(u=0;u<s;++u)B(e[u],c,f,l,o,i),i+=a}else for(u=0;u<s;++u)t(e[u],n,r+1,o,i),i+=a}(t,e,0,a,0)}return a}};function B(t,e,n,r,o,i){for(var a=i,u=0;u<e;++u)for(var s=t[u],c=0;c<n;++c)for(var f=s[c],l=0;l<r;++l)o[a++]=f[l]}var F={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},z={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},V={dynamic:35048,stream:35040,static:35044},W=U.flatten,X=U.shape,H=[];function q(t){return 0|F[Object.prototype.toString.call(t)]}function Y(t,e){for(var n=0;n<e.length;++n)t[n]=e[n]}function K(t,e,n,r,o,i,a){for(var u=0,s=0;s<n;++s)for(var c=0;c<r;++c)t[u++]=e[o*s+i*c+a]}H[5120]=1,H[5122]=2,H[5124]=4,H[5121]=1,H[5123]=2,H[5125]=4,H[5126]=4;var Z={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Q=new Float32Array(1),J=new Uint32Array(Q.buffer);function $(t){for(var e=G.allocType(5123,t.length),n=0;n<t.length;++n)if(isNaN(t[n]))e[n]=65535;else if(t[n]===1/0)e[n]=31744;else if(t[n]===-1/0)e[n]=64512;else{Q[0]=t[n];var r=J[0],o=r>>>31<<15,i=(r<<1>>>24)-127,a=r>>13&1023;if(i<-24)e[n]=o;else if(i<-14){var u=-14-i;e[n]=o+(a+1024>>u)}else e[n]=i>15?o+31744:o+(i+15<<10)+a}return e}function tt(e){return Array.isArray(e)||t(e)}var et=function(t){return!(t&t-1||!t)},nt=[9984,9986,9985,9987],rt=[0,6409,6410,6407,6408],ot={};function it(t){return"[object "+t+"]"}ot[6409]=ot[6406]=ot[6402]=1,ot[34041]=ot[6410]=2,ot[6407]=ot[35904]=3,ot[6408]=ot[35906]=4;var at=it("HTMLCanvasElement"),ut=it("OffscreenCanvas"),st=it("CanvasRenderingContext2D"),ct=it("ImageBitmap"),ft=it("HTMLImageElement"),lt=it("HTMLVideoElement"),ht=Object.keys(F).concat([at,ut,st,ct,ft,lt]),dt=[];dt[5121]=1,dt[5126]=4,dt[36193]=2,dt[5123]=2,dt[5125]=4;var pt=[];function vt(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function mt(t){return!!Array.isArray(t)&&!(0===t.length||!tt(t[0]))}function yt(t){return Object.prototype.toString.call(t)}function gt(t){return yt(t)===at}function bt(t){return yt(t)===ut}function _t(t){if(!t)return!1;var e=yt(t);return ht.indexOf(e)>=0||vt(t)||mt(t)||j(t)}function xt(t){return 0|F[Object.prototype.toString.call(t)]}function wt(t,e){return G.allocType(36193===t.type?5126:t.type,e)}function Et(t,e){36193===t.type?(t.data=$(e),G.freeType(e)):t.data=e}function St(t,e,n,r,o,i){var a;if(a=void 0!==pt[t]?pt[t]:ot[t]*dt[e],i&&(a*=6),o){for(var u=0,s=n;s>=1;)u+=a*s*s,s/=2;return u}return a*n*r}function Tt(n,r,o,i,u,s,c){var f={"don't care":4352,"dont care":4352,nice:4354,fast:4353},l={repeat:10497,clamp:33071,mirror:33648},h={nearest:9728,linear:9729},d=e({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},h),p={none:0,browser:37444},v={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},m={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},y={};r.ext_srgb&&(m.srgb=35904,m.srgba=35906),r.oes_texture_float&&(v.float32=v.float=5126),r.oes_texture_half_float&&(v.float16=v["half float"]=36193),r.webgl_depth_texture&&(e(m,{depth:6402,"depth stencil":34041}),e(v,{uint16:5123,uint32:5125,"depth stencil":34042})),r.webgl_compressed_texture_s3tc&&e(y,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),r.webgl_compressed_texture_atc&&e(y,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),r.webgl_compressed_texture_pvrtc&&e(y,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),r.webgl_compressed_texture_etc1&&(y["rgb etc1"]=36196);var g=Array.prototype.slice.call(n.getParameter(34467));Object.keys(y).forEach((function(t){var e=y[t];g.indexOf(e)>=0&&(m[t]=e)}));var b=Object.keys(m);o.textureFormats=b;var _=[];Object.keys(m).forEach((function(t){var e=m[t];_[e]=t}));var x=[];Object.keys(v).forEach((function(t){var e=v[t];x[e]=t}));var E=[];Object.keys(h).forEach((function(t){E[h[t]]=t}));var S=[];Object.keys(d).forEach((function(t){var e=d[t];S[e]=t}));var T=[];Object.keys(l).forEach((function(t){T[l[t]]=t}));var A=b.reduce((function(t,e){var n=m[e];return 6409===n||6406===n||6409===n||6410===n||6402===n||34041===n||r.ext_srgb&&(35904===n||35906===n)?t[n]=n:32855===n||e.indexOf("rgba")>=0?t[n]=6408:t[n]=6407,t}),{});function I(){this.internalformat=6408,this.format=6408,this.type=5121,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0}function k(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function O(t,e){if("object"===a(e)&&e){if("premultiplyAlpha"in e&&(w.type(e.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=e.premultiplyAlpha),"flipY"in e&&(w.type(e.flipY,"boolean","invalid texture flip"),t.flipY=e.flipY),"alignment"in e&&(w.oneOf(e.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=e.alignment),"colorSpace"in e&&(w.parameter(e.colorSpace,p,"invalid colorSpace"),t.colorSpace=p[e.colorSpace]),"type"in e){var n=e.type;w(r.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),w(r.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),w(r.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),w.parameter(n,v,"invalid texture type"),t.type=v[n]}var i=t.width,u=t.height,s=t.channels,c=!1;"shape"in e?(w(Array.isArray(e.shape)&&e.shape.length>=2,"shape must be an array"),i=e.shape[0],u=e.shape[1],3===e.shape.length&&(s=e.shape[2],w(s>0&&s<=4,"invalid number of channels"),c=!0),w(i>=0&&i<=o.maxTextureSize,"invalid width"),w(u>=0&&u<=o.maxTextureSize,"invalid height")):("radius"in e&&(i=u=e.radius,w(i>=0&&i<=o.maxTextureSize,"invalid radius")),"width"in e&&(i=e.width,w(i>=0&&i<=o.maxTextureSize,"invalid width")),"height"in e&&(u=e.height,w(u>=0&&u<=o.maxTextureSize,"invalid height")),"channels"in e&&(s=e.channels,w(s>0&&s<=4,"invalid number of channels"),c=!0)),t.width=0|i,t.height=0|u,t.channels=0|s;var f=!1;if("format"in e){var l=e.format;w(r.webgl_depth_texture||!("depth"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),w.parameter(l,m,"invalid texture format");var h=t.internalformat=m[l];t.format=A[h],l in v&&("type"in e||(t.type=v[l])),l in y&&(t.compressed=!0),f=!0}!c&&f?t.channels=ot[t.format]:c&&!f?t.channels!==rt[t.format]&&(t.format=t.internalformat=rt[t.channels]):f&&c&&w(t.channels===ot[t.format],"number of channels inconsistent with specified format")}}function D(t){n.pixelStorei(37440,t.flipY),n.pixelStorei(37441,t.premultiplyAlpha),n.pixelStorei(37443,t.colorSpace),n.pixelStorei(3317,t.unpackAlignment)}function R(){I.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function M(e,n){var r=null;if(_t(n)?r=n:n&&(w.type(n,"object","invalid pixel data type"),O(e,n),"x"in n&&(e.xOffset=0|n.x),"y"in n&&(e.yOffset=0|n.y),_t(n.data)&&(r=n.data)),w(!e.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){w(!r,"can not specify copy and data field for the same texture");var i=u.viewportWidth,a=u.viewportHeight;e.width=e.width||i-e.xOffset,e.height=e.height||a-e.yOffset,e.needsCopy=!0,w(e.xOffset>=0&&e.xOffset<i&&e.yOffset>=0&&e.yOffset<a&&e.width>0&&e.width<=i&&e.height>0&&e.height<=a,"copy texture read out of bounds")}else if(r){if(t(r))e.channels=e.channels||4,e.data=r,"type"in n||5121!==e.type||(e.type=xt(r));else if(vt(r))e.channels=e.channels||4,function(t,e){var n=e.length;switch(t.type){case 5121:case 5123:case 5125:case 5126:var r=G.allocType(t.type,n);r.set(e),t.data=r;break;case 36193:t.data=$(e);break;default:w.raise("unsupported texture type, must specify a typed array")}}(e,r),e.alignment=1,e.needsFree=!0;else if(j(r)){var s=r.data;Array.isArray(s)||5121!==e.type||(e.type=xt(s));var c,f,l,h,d,p,v=r.shape,m=r.stride;3===v.length?(l=v[2],p=m[2]):(w(2===v.length,"invalid ndarray pixel data, must be 2 or 3D"),l=1,p=1),c=v[0],f=v[1],h=m[0],d=m[1],e.alignment=1,e.width=c,e.height=f,e.channels=l,e.format=e.internalformat=rt[l],e.needsFree=!0,function(t,e,n,r,o,i){for(var a=t.width,u=t.height,s=t.channels,c=wt(t,a*u*s),f=0,l=0;l<u;++l)for(var h=0;h<a;++h)for(var d=0;d<s;++d)c[f++]=e[n*h+r*l+o*d+i];Et(t,c)}(e,s,h,d,p,r.offset)}else if(gt(r)||bt(r)||yt(r)===st)gt(r)||bt(r)?e.element=r:e.element=r.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(function(t){return yt(t)===ct}(r))e.element=r,e.width=r.width,e.height=r.height,e.channels=4;else if(function(t){return yt(t)===ft}(r))e.element=r,e.width=r.naturalWidth,e.height=r.naturalHeight,e.channels=4;else if(function(t){return yt(t)===lt}(r))e.element=r,e.width=r.videoWidth,e.height=r.videoHeight,e.channels=4;else if(mt(r)){var y=e.width||r[0].length,g=e.height||r.length,b=e.channels;b=tt(r[0][0])?b||r[0][0].length:b||1;for(var _=U.shape(r),x=1,E=0;E<_.length;++E)x*=_[E];var S=wt(e,x);U.flatten(r,_,"",S),Et(e,S),e.alignment=1,e.width=y,e.height=g,e.channels=b,e.format=e.internalformat=rt[b],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;5126===e.type?w(o.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):36193===e.type&&w(o.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function C(t,e,r){var o=t.element,a=t.data,u=t.internalformat,s=t.format,c=t.type,f=t.width,l=t.height;D(t),o?n.texImage2D(e,r,s,s,c,o):t.compressed?n.compressedTexImage2D(e,r,u,f,l,0,a):t.needsCopy?(i(),n.copyTexImage2D(e,r,s,t.xOffset,t.yOffset,f,l,0)):n.texImage2D(e,r,s,f,l,0,s,c,a||null)}function N(t,e,r,o,a){var u=t.element,s=t.data,c=t.internalformat,f=t.format,l=t.type,h=t.width,d=t.height;D(t),u?n.texSubImage2D(e,a,r,o,f,l,u):t.compressed?n.compressedTexSubImage2D(e,a,r,o,c,h,d,s):t.needsCopy?(i(),n.copyTexSubImage2D(e,a,r,o,t.xOffset,t.yOffset,h,d)):n.texSubImage2D(e,a,r,o,h,d,f,l,s)}var P=[];function B(){return P.pop()||new R}function F(t){t.needsFree&&G.freeType(t.data),R.call(t),P.push(t)}function z(){I.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function V(t,e,n){var r=t.images[0]=B();t.mipmask=1,r.width=t.width=e,r.height=t.height=n,r.channels=t.channels=4}function W(t,e){var n=null;if(_t(e))k(n=t.images[0]=B(),t),M(n,e),t.mipmask=1;else if(O(t,e),Array.isArray(e.mipmap))for(var r=e.mipmap,o=0;o<r.length;++o)k(n=t.images[o]=B(),t),n.width>>=o,n.height>>=o,M(n,r[o]),t.mipmask|=1<<o;else k(n=t.images[0]=B(),t),M(n,e),t.mipmask=1;k(t,t.images[0]),!t.compressed||33776!==t.internalformat&&33777!==t.internalformat&&33778!==t.internalformat&&33779!==t.internalformat||w(t.width%4==0&&t.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function X(t,e){for(var n=t.images,r=0;r<n.length;++r){if(!n[r])return;C(n[r],e,r)}}var H=[];function q(){var t=H.pop()||new z;I.call(t),t.mipmask=0;for(var e=0;e<16;++e)t.images[e]=null;return t}function Y(t){for(var e=t.images,n=0;n<e.length;++n)e[n]&&F(e[n]),e[n]=null;H.push(t)}function K(){this.minFilter=9728,this.magFilter=9728,this.wrapS=33071,this.wrapT=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Z(t,e){if("min"in e){var n=e.min;w.parameter(n,d),t.minFilter=d[n],nt.indexOf(t.minFilter)>=0&&!("faces"in e)&&(t.genMipmaps=!0)}if("mag"in e){var r=e.mag;w.parameter(r,h),t.magFilter=h[r]}var i=t.wrapS,u=t.wrapT;if("wrap"in e){var s=e.wrap;"string"==typeof s?(w.parameter(s,l),i=u=l[s]):Array.isArray(s)&&(w.parameter(s[0],l),w.parameter(s[1],l),i=l[s[0]],u=l[s[1]])}else{if("wrapS"in e){var c=e.wrapS;w.parameter(c,l),i=l[c]}if("wrapT"in e){var p=e.wrapT;w.parameter(p,l),u=l[p]}}if(t.wrapS=i,t.wrapT=u,"anisotropic"in e){var v=e.anisotropic;w("number"==typeof v&&v>=1&&v<=o.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic}if("mipmap"in e){var m=!1;switch(a(e.mipmap)){case"string":w.parameter(e.mipmap,f,"invalid mipmap hint"),t.mipmapHint=f[e.mipmap],t.genMipmaps=!0,m=!0;break;case"boolean":m=t.genMipmaps=e.mipmap;break;case"object":w(Array.isArray(e.mipmap),"invalid mipmap type"),t.genMipmaps=!1,m=!0;break;default:w.raise("invalid mipmap type")}m&&!("min"in e)&&(t.minFilter=9984)}}function Q(t,e){n.texParameteri(e,10241,t.minFilter),n.texParameteri(e,10240,t.magFilter),n.texParameteri(e,10242,t.wrapS),n.texParameteri(e,10243,t.wrapT),r.ext_texture_filter_anisotropic&&n.texParameteri(e,34046,t.anisotropic),t.genMipmaps&&(n.hint(33170,t.mipmapHint),n.generateMipmap(e))}var J=0,it={},at=o.maxTextureUnits,ut=Array(at).map((function(){return null}));function ht(t){I.call(this),this.mipmask=0,this.internalformat=6408,this.id=J++,this.refCount=1,this.target=t,this.texture=n.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new K,c.profile&&(this.stats={size:0})}function dt(t){n.activeTexture(33984),n.bindTexture(t.target,t.texture)}function pt(){var t=ut[0];t?n.bindTexture(t.target,t.texture):n.bindTexture(3553,null)}function Tt(t){var e=t.texture;w(e,"must not double destroy texture");var r=t.unit,o=t.target;r>=0&&(n.activeTexture(33984+r),n.bindTexture(o,null),ut[r]=null),n.deleteTexture(e),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete it[t.id],s.textureCount--}return e(ht.prototype,{bind:function(){this.bindCount+=1;var t=this.unit;if(t<0){for(var e=0;e<at;++e){var r=ut[e];if(r){if(r.bindCount>0)continue;r.unit=-1}ut[e]=this,t=e;break}t>=at&&w.raise("insufficient number of texture units"),c.profile&&s.maxTextureUnits<t+1&&(s.maxTextureUnits=t+1),this.unit=t,n.activeTexture(33984+t),n.bindTexture(this.target,this.texture)}return t},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Tt(this)}}),c.profile&&(s.getTotalTextureSize=function(){var t=0;return Object.keys(it).forEach((function(e){t+=it[e].stats.size})),t}),{create2D:function(t,e){var r=new ht(3553);function i(t,e){var n=r.texInfo;K.call(n);var a=q();return"number"==typeof t?V(a,0|t,"number"==typeof e?0|e:0|t):t?(w.type(t,"object","invalid arguments to regl.texture"),Z(n,t),W(a,t)):V(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),r.mipmask=a.mipmask,k(r,a),w.texture2D(n,a,o),r.internalformat=a.internalformat,i.width=a.width,i.height=a.height,dt(r),X(a,3553),Q(n,3553),pt(),Y(a),c.profile&&(r.stats.size=St(r.internalformat,r.type,a.width,a.height,n.genMipmaps,!1)),i.format=_[r.internalformat],i.type=x[r.type],i.mag=E[n.magFilter],i.min=S[n.minFilter],i.wrapS=T[n.wrapS],i.wrapT=T[n.wrapT],i}return it[r.id]=r,s.textureCount++,i(t,e),i.subimage=function(t,e,n,o){w(!!t,"must specify image data");var a=0|e,u=0|n,s=0|o,c=B();return k(c,r),c.width=0,c.height=0,M(c,t),c.width=c.width||(r.width>>s)-a,c.height=c.height||(r.height>>s)-u,w(r.type===c.type&&r.format===c.format&&r.internalformat===c.internalformat,"incompatible format for texture.subimage"),w(a>=0&&u>=0&&a+c.width<=r.width&&u+c.height<=r.height,"texture.subimage write out of bounds"),w(r.mipmask&1<<s,"missing mipmap data"),w(c.data||c.element||c.needsCopy,"missing image data"),dt(r),N(c,3553,a,u,s),pt(),F(c),i},i.resize=function(t,e){var o=0|t,a=0|e||o;if(o===r.width&&a===r.height)return i;i.width=r.width=o,i.height=r.height=a,dt(r);for(var u=0;r.mipmask>>u;++u){var s=o>>u,f=a>>u;if(!s||!f)break;n.texImage2D(3553,u,r.format,s,f,0,r.format,r.type,null)}return pt(),c.profile&&(r.stats.size=St(r.internalformat,r.type,o,a,!1,!1)),i},i._reglType="texture2d",i._texture=r,c.profile&&(i.stats=r.stats),i.destroy=function(){r.decRef()},i},createCube:function(t,e,r,i,u,f){var l=new ht(34067);it[l.id]=l,s.cubeCount++;var h=new Array(6);function d(t,e,n,r,i,u){var s,f=l.texInfo;for(K.call(f),s=0;s<6;++s)h[s]=q();if("number"!=typeof t&&t)if("object"===a(t))if(e)W(h[0],t),W(h[1],e),W(h[2],n),W(h[3],r),W(h[4],i),W(h[5],u);else if(Z(f,t),O(l,t),"faces"in t){var p=t.faces;for(w(Array.isArray(p)&&6===p.length,"cube faces must be a length 6 array"),s=0;s<6;++s)w("object"===a(p[s])&&!!p[s],"invalid input for cube map face"),k(h[s],l),W(h[s],p[s])}else for(s=0;s<6;++s)W(h[s],t);else w.raise("invalid arguments to cube map");else{var v=0|t||1;for(s=0;s<6;++s)V(h[s],v,v)}for(k(l,h[0]),o.npotTextureCube||w(et(l.width)&&et(l.height),"your browser does not support non power or two texture dimensions"),f.genMipmaps?l.mipmask=(h[0].width<<1)-1:l.mipmask=h[0].mipmask,w.textureCube(l,f,h,o),l.internalformat=h[0].internalformat,d.width=h[0].width,d.height=h[0].height,dt(l),s=0;s<6;++s)X(h[s],34069+s);for(Q(f,34067),pt(),c.profile&&(l.stats.size=St(l.internalformat,l.type,d.width,d.height,f.genMipmaps,!0)),d.format=_[l.internalformat],d.type=x[l.type],d.mag=E[f.magFilter],d.min=S[f.minFilter],d.wrapS=T[f.wrapS],d.wrapT=T[f.wrapT],s=0;s<6;++s)Y(h[s]);return d}return d(t,e,r,i,u,f),d.subimage=function(t,e,n,r,o){w(!!e,"must specify image data"),w("number"==typeof t&&t===(0|t)&&t>=0&&t<6,"invalid face");var i=0|n,a=0|r,u=0|o,s=B();return k(s,l),s.width=0,s.height=0,M(s,e),s.width=s.width||(l.width>>u)-i,s.height=s.height||(l.height>>u)-a,w(l.type===s.type&&l.format===s.format&&l.internalformat===s.internalformat,"incompatible format for texture.subimage"),w(i>=0&&a>=0&&i+s.width<=l.width&&a+s.height<=l.height,"texture.subimage write out of bounds"),w(l.mipmask&1<<u,"missing mipmap data"),w(s.data||s.element||s.needsCopy,"missing image data"),dt(l),N(s,34069+t,i,a,u),pt(),F(s),d},d.resize=function(t){var e=0|t;if(e!==l.width){d.width=l.width=e,d.height=l.height=e,dt(l);for(var r=0;r<6;++r)for(var o=0;l.mipmask>>o;++o)n.texImage2D(34069+r,o,l.format,e>>o,e>>o,0,l.format,l.type,null);return pt(),c.profile&&(l.stats.size=St(l.internalformat,l.type,d.width,d.height,!1,!0)),d}},d._reglType="textureCube",d._texture=l,c.profile&&(d.stats=l.stats),d.destroy=function(){l.decRef()},d},clear:function(){for(var t=0;t<at;++t)n.activeTexture(33984+t),n.bindTexture(3553,null),ut[t]=null;L(it).forEach(Tt),s.cubeCount=0,s.textureCount=0},getTexture:function(t){return null},restore:function(){for(var t=0;t<at;++t){var e=ut[t];e&&(e.bindCount=0,e.unit=-1,ut[t]=null)}L(it).forEach((function(t){t.texture=n.createTexture(),n.bindTexture(t.target,t.texture);for(var e=0;e<32;++e)if(0!=(t.mipmask&1<<e))if(3553===t.target)n.texImage2D(3553,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);else for(var r=0;r<6;++r)n.texImage2D(34069+r,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);Q(t.texInfo,t.target)}))},refresh:function(){for(var t=0;t<at;++t){var e=ut[t];e&&(e.bindCount=0,e.unit=-1,ut[t]=null),n.activeTexture(33984+t),n.bindTexture(3553,null),n.bindTexture(34067,null)}}}}pt[32854]=2,pt[32855]=2,pt[36194]=2,pt[34041]=4,pt[33776]=.5,pt[33777]=.5,pt[33778]=1,pt[33779]=1,pt[35986]=.5,pt[35987]=1,pt[34798]=1,pt[35840]=.5,pt[35841]=.25,pt[35842]=.5,pt[35843]=.25,pt[36196]=.5;var At=[];function It(t,e,n){return At[t]*e*n}At[32854]=2,At[32855]=2,At[36194]=2,At[33189]=2,At[36168]=1,At[34041]=4,At[35907]=4,At[34836]=16,At[34842]=8,At[34843]=6;var kt=[6407,6408],Ot=[];Ot[6408]=4,Ot[6407]=3;var Dt=[];Dt[5121]=1,Dt[5126]=4,Dt[36193]=2;var Rt=[32854,32855,36194,35907,34842,34843,34836],Mt={};function Ct(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0}function Nt(e,n,r,o,i,a,u){function s(s){var c;null===n.next?(w(i.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),c=5121):(w(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),c=n.next.colorAttachments[0].texture._texture.type,a.oes_texture_float?(w(5121===c||5126===c,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===c&&w(u.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):w(5121===c,"Reading from a framebuffer is only allowed for the type 'uint8'"));var f=0,l=0,h=o.framebufferWidth,d=o.framebufferHeight,p=null;t(s)?p=s:s&&(w.type(s,"object","invalid arguments to regl.read()"),f=0|s.x,l=0|s.y,w(f>=0&&f<o.framebufferWidth,"invalid x offset for regl.read"),w(l>=0&&l<o.framebufferHeight,"invalid y offset for regl.read"),h=0|(s.width||o.framebufferWidth-f),d=0|(s.height||o.framebufferHeight-l),p=s.data||null),p&&(5121===c?w(p instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===c&&w(p instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),w(h>0&&h+f<=o.framebufferWidth,"invalid width for read pixels"),w(d>0&&d+l<=o.framebufferHeight,"invalid height for read pixels"),r();var v=h*d*4;return p||(5121===c?p=new Uint8Array(v):5126===c&&(p=p||new Float32Array(v))),w.isTypedArray(p,"data buffer for regl.read() must be a typedarray"),w(p.byteLength>=v,"data buffer for regl.read() too small"),e.pixelStorei(3333,4),e.readPixels(f,l,h,d,6408,c,p),p}return function(t){return t&&"framebuffer"in t?function(t){var e;return n.setFBO({framebuffer:t.framebuffer},(function(){e=s(t)})),e}(t):s(t)}}function Pt(t){return Array.prototype.slice.call(t)}function Gt(t){return Pt(t).join("")}Mt[36053]="complete",Mt[36054]="incomplete attachment",Mt[36057]="incomplete dimensions",Mt[36055]="incomplete, missing attachment",Mt[36061]="unsupported";var jt="xyzw".split(""),Lt="profile",Ut="framebuffer",Bt="vert",Ft="frag",zt="elements",Vt="primitive",Wt="count",Xt="offset",Ht="instances",qt="vao",Yt=Ut+"Width",Kt=Ut+"Height",Zt=["blend.func","blend.equation","stencil.func","stencil.opFront","stencil.opBack","sample.coverage","viewport","scissor.box","polygonOffset.offset"],Qt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Jt=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],$t={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},te={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ee={frag:35632,vert:35633},ne={cw:2304,ccw:2305};function re(e){return Array.isArray(e)||t(e)||j(e)}function oe(t){return t.sort((function(t,e){return"viewport"===t?-1:"viewport"===e?1:t<e?-1:1}))}function ie(t,e,n,r){this.thisDep=t,this.contextDep=e,this.propDep=n,this.append=r}function ae(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function ue(t){return new ie(!1,!1,!1,t)}function se(t,e){var n=t.type;if(0===n){var r=t.data.length;return new ie(!0,r>=1,r>=2,e)}if(4===n){var o=t.data;return new ie(o.thisDep,o.contextDep,o.propDep,e)}if(5===n)return new ie(!1,!1,!1,e);if(6===n){for(var i=!1,a=!1,u=!1,s=0;s<t.data.length;++s){var c=t.data[s];if(1===c.type)u=!0;else if(2===c.type)a=!0;else if(3===c.type)i=!0;else if(0===c.type){i=!0;var f=c.data;f>=1&&(a=!0),f>=2&&(u=!0)}else 4===c.type&&(i=i||c.data.thisDep,a=a||c.data.contextDep,u=u||c.data.propDep)}return new ie(i,a,u,e)}return new ie(3===n,2===n,1===n,e)}var ce=new ie(!1,!1,!1,(function(){}));function fe(t,n,r,o,i,u,s,c,f,l,h,d,p,v,m){var y=l.Record,g={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(g.min=32775,g.max=32776);var b=r.angle_instanced_arrays,_=r.webgl_draw_buffers,x={dirty:!0,profile:m.profile},E={},S=[],T={},A={};function k(t){return t.replace(".","_")}function O(t,e,n){var r=k(t);S.push(t),E[r]=x[r]=!!n,T[r]=e}function D(t,e,n){var r=k(t);S.push(t),Array.isArray(n)?(x[r]=n.slice(),E[r]=n.slice()):x[r]=E[r]=n,A[r]=e}O("dither",3024),O("blend.enable",3042),D("blend.color","blendColor",[0,0,0,0]),D("blend.equation","blendEquationSeparate",[32774,32774]),D("blend.func","blendFuncSeparate",[1,0,1,0]),O("depth.enable",2929,!0),D("depth.func","depthFunc",513),D("depth.range","depthRange",[0,1]),D("depth.mask","depthMask",!0),D("colorMask","colorMask",[!0,!0,!0,!0]),O("cull.enable",2884),D("cull.face","cullFace",1029),D("frontFace","frontFace",2305),D("lineWidth","lineWidth",1),O("polygonOffset.enable",32823),D("polygonOffset.offset","polygonOffset",[0,0]),O("sample.alpha",32926),O("sample.enable",32928),D("sample.coverage","sampleCoverage",[1,!1]),O("stencil.enable",2960),D("stencil.mask","stencilMask",-1),D("stencil.func","stencilFunc",[519,0,-1]),D("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),D("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),O("scissor.enable",3089),D("scissor.box","scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),D("viewport","viewport",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var R={gl:t,context:p,strings:n,next:E,current:x,draw:d,elements:u,buffer:i,shader:h,attributes:l.state,vao:l,uniforms:f,framebuffer:c,extensions:r,timer:v,isBufferArgs:re},M={primTypes:Z,compareFuncs:$t,blendFuncs:Qt,blendEquations:g,stencilOps:te,glTypes:z,orientationType:ne};w.optional((function(){R.isArrayLike=tt})),_&&(M.backBuffer=[1029],M.drawBuffer=C(o.maxDrawbuffers,(function(t){return 0===t?[0]:C(t,(function(t){return 36064+t}))})));var N=0;function P(){var t=function(){var t=0,n=[],r=[];function o(){var n=[],r=[];return e((function(){n.push.apply(n,Pt(arguments))}),{def:function(){var e="v"+t++;return r.push(e),arguments.length>0&&(n.push(e,"="),n.push.apply(n,Pt(arguments)),n.push(";")),e},toString:function(){return Gt([r.length>0?"var "+r.join(",")+";":"",Gt(n)])}})}function i(){var t=o(),n=o(),r=t.toString,i=n.toString;function a(e,r){n(e,r,"=",t.def(e,r),";")}return e((function(){t.apply(t,Pt(arguments))}),{def:t.def,entry:t,exit:n,save:a,set:function(e,n,r){a(e,n),t(e,n,"=",r,";")},toString:function(){return r()+i()}})}var a=o(),u={};return{global:a,link:function(e){for(var o=0;o<r.length;++o)if(r[o]===e)return n[o];var i="g"+t++;return n.push(i),r.push(e),i},block:o,proc:function(t,n){var r=[];function o(){var t="a"+r.length;return r.push(t),t}n=n||0;for(var a=0;a<n;++a)o();var s=i(),c=s.toString;return u[t]=e(s,{arg:o,toString:function(){return Gt(["function(",r.join(),"){",c(),"}"])}})},scope:i,cond:function(){var t=Gt(arguments),n=i(),r=i(),o=n.toString,a=r.toString;return e(n,{then:function(){return n.apply(n,Pt(arguments)),this},else:function(){return r.apply(r,Pt(arguments)),this},toString:function(){var e=a();return e&&(e="else{"+e+"}"),Gt(["if(",t,"){",o(),"}",e])}})},compile:function(){var t=['"use strict";',a,"return {"];Object.keys(u).forEach((function(e){t.push('"',e,'":',u[e].toString(),",")})),t.push("}");var e=Gt(t).replace(/;/g,";\\n").replace(/}/g,"}\\n").replace(/{/g,"{\\n");return Function.apply(null,n.concat(e)).apply(null,r)}}}(),r=t.link,o=t.global;t.id=N++,t.batchId="0";var i=r(R),a=t.shared={props:"a0"};Object.keys(R).forEach((function(t){a[t]=o.def(i,".",t)})),w.optional((function(){t.CHECK=r(w),t.commandStr=w.guessCommand(),t.command=r(t.commandStr),t.assert=function(t,e,n){t("if(!(",e,"))",this.CHECK,".commandRaise(",r(n),",",this.command,");")},M.invalidBlendCombinations=Jt}));var u=t.next={},s=t.current={};Object.keys(A).forEach((function(t){Array.isArray(x[t])&&(u[t]=o.def(a.next,".",t),s[t]=o.def(a.current,".",t))}));var c=t.constants={};Object.keys(M).forEach((function(t){c[t]=o.def(JSON.stringify(M[t]))})),t.invoke=function(e,n){switch(n.type){case 0:var o=["this",a.context,a.props,t.batchId];return e.def(r(n.data),".call(",o.slice(0,Math.max(n.data.length+1,4)),")");case 1:return e.def(a.props,n.data);case 2:return e.def(a.context,n.data);case 3:return e.def("this",n.data);case 4:return n.data.append(t,e),n.data.ref;case 5:return n.data.toString();case 6:return n.data.map((function(n){return t.invoke(e,n)}))}},t.attribCache={};var f={};return t.scopeAttrib=function(t){var e=n.id(t);if(e in f)return f[e];var o=l.scope[e];return o||(o=l.scope[e]=new y),f[e]=r(o)},t}function G(t,e,s,f,d){var p=t.static,v=t.dynamic;w.optional((function(){var t=[Ut,Bt,Ft,zt,Vt,Xt,Wt,Ht,Lt,qt].concat(S);function e(e){Object.keys(e).forEach((function(e){w.command(t.indexOf(e)>=0,'unknown parameter "'+e+'"',d.commandStr)}))}e(p),e(v)}));var m=function(t,e){var n=t.static;if("string"==typeof n[Ft]&&"string"==typeof n[Bt]){if(Object.keys(e.dynamic).length>0)return null;var r=e.static,o=Object.keys(r);if(o.length>0&&"number"==typeof r[o[0]]){for(var i=[],a=0;a<o.length;++a)w("number"==typeof r[o[a]],"must specify all vertex attribute locations when using vaos"),i.push([0|r[o[a]],o[a]]);return i}}return null}(t,e),_=function(t,e){var n=t.static,r=t.dynamic;if(Ut in n){var o=n[Ut];return o?(o=c.getFramebuffer(o),w.command(o,"invalid framebuffer object"),ue((function(t,e){var n=t.link(o),r=t.shared;e.set(r.framebuffer,".next",n);var i=r.context;return e.set(i,"."+Yt,n+".width"),e.set(i,"."+Kt,n+".height"),n}))):ue((function(t,e){var n=t.shared;e.set(n.framebuffer,".next","null");var r=n.context;return e.set(r,"."+Yt,r+".drawingBufferWidth"),e.set(r,"."+Kt,r+".drawingBufferHeight"),"null"}))}if(Ut in r){var i=r[Ut];return se(i,(function(t,e){var n=t.invoke(e,i),r=t.shared,o=r.framebuffer,a=e.def(o,".getFramebuffer(",n,")");w.optional((function(){t.assert(e,"!"+n+"||"+a,"invalid framebuffer object")})),e.set(o,".next",a);var u=r.context;return e.set(u,"."+Yt,a+"?"+a+".width:"+u+".drawingBufferWidth"),e.set(u,"."+Kt,a+"?"+a+".height:"+u+".drawingBufferHeight"),a}))}return null}(t),x=function(t,e,n){var r=t.static,o=t.dynamic;function i(t){if(t in r){var i=r[t];w.commandType(i,"object","invalid "+t,n.commandStr);var a,u,s=!0,c=0|i.x,f=0|i.y;return"width"in i?(a=0|i.width,w.command(a>=0,"invalid "+t,n.commandStr)):s=!1,"height"in i?(u=0|i.height,w.command(u>=0,"invalid "+t,n.commandStr)):s=!1,new ie(!s&&e&&e.thisDep,!s&&e&&e.contextDep,!s&&e&&e.propDep,(function(t,e){var n=t.shared.context,r=a;"width"in i||(r=e.def(n,".",Yt,"-",c));var o=u;return"height"in i||(o=e.def(n,".",Kt,"-",f)),[c,f,r,o]}))}if(t in o){var l=o[t],h=se(l,(function(e,n){var r=e.invoke(n,l);w.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}));var o=e.shared.context,i=n.def(r,".x|0"),a=n.def(r,".y|0"),u=n.def('"width" in ',r,"?",r,".width|0:","(",o,".",Yt,"-",i,")"),s=n.def('"height" in ',r,"?",r,".height|0:","(",o,".",Kt,"-",a,")");return w.optional((function(){e.assert(n,u+">=0&&"+s+">=0","invalid "+t)})),[i,a,u,s]}));return e&&(h.thisDep=h.thisDep||e.thisDep,h.contextDep=h.contextDep||e.contextDep,h.propDep=h.propDep||e.propDep),h}return e?new ie(e.thisDep,e.contextDep,e.propDep,(function(t,e){var n=t.shared.context;return[0,0,e.def(n,".",Yt),e.def(n,".",Kt)]})):null}var a=i("viewport");if(a){var u=a;a=new ie(a.thisDep,a.contextDep,a.propDep,(function(t,e){var n=u.append(t,e),r=t.shared.context;return e.set(r,".viewportWidth",n[2]),e.set(r,".viewportHeight",n[3]),n}))}return{viewport:a,scissor_box:i("scissor.box")}}(t,_,d),E=function(t,e){var n=t.static,r=t.dynamic,o=function(){if(zt in n){var t=n[zt];re(t)?t=u.getElements(u.create(t,!0)):t&&(t=u.getElements(t),w.command(t,"invalid elements",e.commandStr));var o=ue((function(e,n){if(t){var r=e.link(t);return e.ELEMENTS=r,r}return e.ELEMENTS=null,null}));return o.value=t,o}if(zt in r){var i=r[zt];return se(i,(function(t,e){var n=t.shared,r=n.isBufferArgs,o=n.elements,a=t.invoke(e,i),u=e.def("null"),s=e.def(r,"(",a,")"),c=t.cond(s).then(u,"=",o,".createStream(",a,");").else(u,"=",o,".getElements(",a,");");return w.optional((function(){t.assert(c.else,"!"+a+"||"+u,"invalid elements")})),e.entry(c),e.exit(t.cond(s).then(o,".destroyStream(",u,");")),t.ELEMENTS=u,u}))}return null}();function i(t,i){if(t in n){var a=0|n[t];return w.command(!i||a>=0,"invalid "+t,e.commandStr),ue((function(t,e){return i&&(t.OFFSET=a),a}))}if(t in r){var u=r[t];return se(u,(function(e,n){var r=e.invoke(n,u);return i&&(e.OFFSET=r,w.optional((function(){e.assert(n,r+">=0","invalid "+t)}))),r}))}return i&&o?ue((function(t,e){return t.OFFSET="0",0})):null}var a=i(Xt,!0);return{elements:o,primitive:function(){if(Vt in n){var t=n[Vt];return w.commandParameter(t,Z,"invalid primitve",e.commandStr),ue((function(e,n){return Z[t]}))}if(Vt in r){var i=r[Vt];return se(i,(function(t,e){var n=t.constants.primTypes,r=t.invoke(e,i);return w.optional((function(){t.assert(e,r+" in "+n,"invalid primitive, must be one of "+Object.keys(Z))})),e.def(n,"[",r,"]")}))}return o?ae(o)?o.value?ue((function(t,e){return e.def(t.ELEMENTS,".primType")})):ue((function(){return 4})):new ie(o.thisDep,o.contextDep,o.propDep,(function(t,e){var n=t.ELEMENTS;return e.def(n,"?",n,".primType:",4)})):null}(),count:function(){if(Wt in n){var t=0|n[Wt];return w.command("number"==typeof t&&t>=0,"invalid vertex count",e.commandStr),ue((function(){return t}))}if(Wt in r){var i=r[Wt];return se(i,(function(t,e){var n=t.invoke(e,i);return w.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")})),n}))}if(o){if(ae(o)){if(o)return a?new ie(a.thisDep,a.contextDep,a.propDep,(function(t,e){var n=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return w.optional((function(){t.assert(e,n+">=0","invalid vertex offset/element buffer too small")})),n})):ue((function(t,e){return e.def(t.ELEMENTS,".vertCount")}));var u=ue((function(){return-1}));return w.optional((function(){u.MISSING=!0})),u}var s=new ie(o.thisDep||a.thisDep,o.contextDep||a.contextDep,o.propDep||a.propDep,(function(t,e){var n=t.ELEMENTS;return t.OFFSET?e.def(n,"?",n,".vertCount-",t.OFFSET,":-1"):e.def(n,"?",n,".vertCount:-1")}));return w.optional((function(){s.DYNAMIC=!0})),s}return null}(),instances:i(Ht,!1),offset:a}}(t,d),T=function(t,e){var n=t.static,r=t.dynamic,i={};return S.forEach((function(t){var u=k(t);function s(e,o){if(t in n){var a=e(n[t]);i[u]=ue((function(){return a}))}else if(t in r){var s=r[t];i[u]=se(s,(function(t,e){return o(t,e,t.invoke(e,s))}))}}switch(t){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return s((function(n){return w.commandType(n,"boolean",t,e.commandStr),n}),(function(e,n,r){return w.optional((function(){e.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+t,e.commandStr)})),r}));case"depth.func":return s((function(n){return w.commandParameter(n,$t,"invalid "+t,e.commandStr),$t[n]}),(function(e,n,r){var o=e.constants.compareFuncs;return w.optional((function(){e.assert(n,r+" in "+o,"invalid "+t+", must be one of "+Object.keys($t))})),n.def(o,"[",r,"]")}));case"depth.range":return s((function(t){return w.command(tt(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]&&t[0]<=t[1],"depth range is 2d array",e.commandStr),t}),(function(t,e,n){return w.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")})),[e.def("+",n,"[0]"),e.def("+",n,"[1]")]}));case"blend.func":return s((function(t){w.commandType(t,"object","blend.func",e.commandStr);var n="srcRGB"in t?t.srcRGB:t.src,r="srcAlpha"in t?t.srcAlpha:t.src,o="dstRGB"in t?t.dstRGB:t.dst,i="dstAlpha"in t?t.dstAlpha:t.dst;return w.commandParameter(n,Qt,u+".srcRGB",e.commandStr),w.commandParameter(r,Qt,u+".srcAlpha",e.commandStr),w.commandParameter(o,Qt,u+".dstRGB",e.commandStr),w.commandParameter(i,Qt,u+".dstAlpha",e.commandStr),w.command(-1===Jt.indexOf(n+", "+o),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+o+")",e.commandStr),[Qt[n],Qt[o],Qt[r],Qt[i]]}),(function(e,n,r){var o=e.constants.blendFuncs;function i(i,a){var u=n.def('"',i,a,'" in ',r,"?",r,".",i,a,":",r,".",i);return w.optional((function(){e.assert(n,u+" in "+o,"invalid "+t+"."+i+a+", must be one of "+Object.keys(Qt))})),u}w.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")}));var a=i("src","RGB"),u=i("dst","RGB");w.optional((function(){var t=e.constants.invalidBlendCombinations;e.assert(n,t+".indexOf("+a+'+", "+'+u+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}));var s=n.def(o,"[",a,"]"),c=n.def(o,"[",i("src","Alpha"),"]");return[s,n.def(o,"[",u,"]"),c,n.def(o,"[",i("dst","Alpha"),"]")]}));case"blend.equation":return s((function(n){return"string"==typeof n?(w.commandParameter(n,g,"invalid "+t,e.commandStr),[g[n],g[n]]):"object"===a(n)?(w.commandParameter(n.rgb,g,t+".rgb",e.commandStr),w.commandParameter(n.alpha,g,t+".alpha",e.commandStr),[g[n.rgb],g[n.alpha]]):void w.commandRaise("invalid blend.equation",e.commandStr)}),(function(e,n,r){var o=e.constants.blendEquations,i=n.def(),a=n.def(),u=e.cond("typeof ",r,'==="string"');return w.optional((function(){function n(t,n,r){e.assert(t,r+" in "+o,"invalid "+n+", must be one of "+Object.keys(g))}n(u.then,t,r),e.assert(u.else,r+"&&typeof "+r+'==="object"',"invalid "+t),n(u.else,t+".rgb",r+".rgb"),n(u.else,t+".alpha",r+".alpha")})),u.then(i,"=",a,"=",o,"[",r,"];"),u.else(i,"=",o,"[",r,".rgb];",a,"=",o,"[",r,".alpha];"),n(u),[i,a]}));case"blend.color":return s((function(t){return w.command(tt(t)&&4===t.length,"blend.color must be a 4d array",e.commandStr),C(4,(function(e){return+t[e]}))}),(function(t,e,n){return w.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")})),C(4,(function(t){return e.def("+",n,"[",t,"]")}))}));case"stencil.mask":return s((function(t){return w.commandType(t,"number",u,e.commandStr),0|t}),(function(t,e,n){return w.optional((function(){t.assert(e,"typeof "+n+'==="number"',"invalid stencil.mask")})),e.def(n,"|0")}));case"stencil.func":return s((function(n){w.commandType(n,"object",u,e.commandStr);var r=n.cmp||"keep",o=n.ref||0,i="mask"in n?n.mask:-1;return w.commandParameter(r,$t,t+".cmp",e.commandStr),w.commandType(o,"number",t+".ref",e.commandStr),w.commandType(i,"number",t+".mask",e.commandStr),[$t[r],o,i]}),(function(t,e,n){var r=t.constants.compareFuncs;return w.optional((function(){function o(){t.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}o(n+"&&typeof ",n,'==="object"'),o('!("cmp" in ',n,")||(",n,".cmp in ",r,")")})),[e.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",7680),e.def(n,".ref|0"),e.def('"mask" in ',n,"?",n,".mask|0:-1")]}));case"stencil.opFront":case"stencil.opBack":return s((function(n){w.commandType(n,"object",u,e.commandStr);var r=n.fail||"keep",o=n.zfail||"keep",i=n.zpass||"keep";return w.commandParameter(r,te,t+".fail",e.commandStr),w.commandParameter(o,te,t+".zfail",e.commandStr),w.commandParameter(i,te,t+".zpass",e.commandStr),["stencil.opBack"===t?1029:1028,te[r],te[o],te[i]]}),(function(e,n,r){var o=e.constants.stencilOps;function i(i){return w.optional((function(){e.assert(n,'!("'+i+'" in '+r+")||("+r+"."+i+" in "+o+")","invalid "+t+"."+i+", must be one of "+Object.keys(te))})),n.def('"',i,'" in ',r,"?",o,"[",r,".",i,"]:",7680)}return w.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)})),["stencil.opBack"===t?1029:1028,i("fail"),i("zfail"),i("zpass")]}));case"polygonOffset.offset":return s((function(t){w.commandType(t,"object",u,e.commandStr);var n=0|t.factor,r=0|t.units;return w.commandType(n,"number",u+".factor",e.commandStr),w.commandType(r,"number",u+".units",e.commandStr),[n,r]}),(function(e,n,r){return w.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)})),[n.def(r,".factor|0"),n.def(r,".units|0")]}));case"cull.face":return s((function(t){var n=0;return"front"===t?n=1028:"back"===t&&(n=1029),w.command(!!n,u,e.commandStr),n}),(function(t,e,n){return w.optional((function(){t.assert(e,n+'==="front"||'+n+'==="back"',"invalid cull.face")})),e.def(n,'==="front"?',1028,":",1029)}));case"lineWidth":return s((function(t){return w.command("number"==typeof t&&t>=o.lineWidthDims[0]&&t<=o.lineWidthDims[1],"invalid line width, must be a positive number between "+o.lineWidthDims[0]+" and "+o.lineWidthDims[1],e.commandStr),t}),(function(t,e,n){return w.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">="+o.lineWidthDims[0]+"&&"+n+"<="+o.lineWidthDims[1],"invalid line width")})),n}));case"frontFace":return s((function(t){return w.commandParameter(t,ne,u,e.commandStr),ne[t]}),(function(t,e,n){return w.optional((function(){t.assert(e,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")})),e.def(n+'==="cw"?2304:2305')}));case"colorMask":return s((function(t){return w.command(tt(t)&&4===t.length,"color.mask must be length 4 array",e.commandStr),t.map((function(t){return!!t}))}),(function(t,e,n){return w.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")})),C(4,(function(t){return"!!"+n+"["+t+"]"}))}));case"sample.coverage":return s((function(t){w.command("object"===a(t)&&t,u,e.commandStr);var n="value"in t?t.value:1,r=!!t.invert;return w.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",e.commandStr),[n,r]}),(function(t,e,n){return w.optional((function(){t.assert(e,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")})),[e.def('"value" in ',n,"?+",n,".value:1"),e.def("!!",n,".invert")]}))}})),i}(t,d),A=function(t,e,r){var o=t.static,i=t.dynamic;function a(t){if(t in o){var e=n.id(o[t]);w.optional((function(){h.shader(ee[t],e,w.guessCommand())}));var r=ue((function(){return e}));return r.id=e,r}if(t in i){var a=i[t];return se(a,(function(e,n){var r=e.invoke(n,a),o=n.def(e.shared.strings,".id(",r,")");return w.optional((function(){n(e.shared.shader,".shader(",ee[t],",",o,",",e.command,");")})),o}))}return null}var u,s=a(Ft),c=a(Bt),f=null;return ae(s)&&ae(c)?(f=h.program(c.id,s.id,null,r),u=ue((function(t,e){return t.link(f)}))):u=new ie(s&&s.thisDep||c&&c.thisDep,s&&s.contextDep||c&&c.contextDep,s&&s.propDep||c&&c.propDep,(function(t,e){var n,r=t.shared.shader;n=s?s.append(t,e):e.def(r,".",Ft);var o=r+".program("+(c?c.append(t,e):e.def(r,".",Bt))+","+n;return w.optional((function(){o+=","+t.command})),e.def(o+")")})),{frag:s,vert:c,progVar:u,program:f}}(t,0,m);function I(t){var e=x[t];e&&(T[t]=e)}I("viewport"),I(k("scissor.box"));var O=Object.keys(T).length>0,D={framebuffer:_,draw:E,shader:A,state:T,dirty:O,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(D.profile=function(t){var e,n=t.static,r=t.dynamic;if(Lt in n){var o=!!n[Lt];(e=ue((function(t,e){return o}))).enable=o}else if(Lt in r){var i=r[Lt];e=se(i,(function(t,e){return t.invoke(e,i)}))}return e}(t),D.uniforms=function(t,e){var n=t.static,r=t.dynamic,o={};return Object.keys(n).forEach((function(t){var r,i=n[t];if("number"==typeof i||"boolean"==typeof i)r=ue((function(){return i}));else if("function"==typeof i){var a=i._reglType;"texture2d"===a||"textureCube"===a?r=ue((function(t){return t.link(i)})):"framebuffer"===a||"framebufferCube"===a?(w.command(i.color.length>0,'missing color attachment for framebuffer sent to uniform "'+t+'"',e.commandStr),r=ue((function(t){return t.link(i.color[0])}))):w.commandRaise('invalid data for uniform "'+t+'"',e.commandStr)}else tt(i)?r=ue((function(e){return e.global.def("[",C(i.length,(function(n){return w.command("number"==typeof i[n]||"boolean"==typeof i[n],"invalid uniform "+t,e.commandStr),i[n]})),"]")})):w.commandRaise('invalid or missing data for uniform "'+t+'"',e.commandStr);r.value=i,o[t]=r})),Object.keys(r).forEach((function(t){var e=r[t];o[t]=se(e,(function(t,n){return t.invoke(n,e)}))})),o}(s,d),D.drawVAO=D.scopeVAO=function(t,e){var n=t.static,r=t.dynamic;if(qt in n){var o=n[qt];return null!==o&&null===l.getVAO(o)&&(o=l.createVAO(o)),ue((function(t){return t.link(l.getVAO(o))}))}if(qt in r){var i=r[qt];return se(i,(function(t,e){var n=t.invoke(e,i);return e.def(t.shared.vao+".getVAO("+n+")")}))}return null}(t),!D.drawVAO&&A.program&&!m&&r.angle_instanced_arrays){var R=!0,M=A.program.attributes.map((function(t){var n=e.static[t];return R=R&&!!n,n}));if(R&&M.length>0){var N=l.getVAO(l.createVAO(M));D.drawVAO=new ie(null,null,null,(function(t,e){return t.link(N)})),D.useVAO=!0}}return m?D.useVAO=!0:D.attributes=function(t,e){var r=t.static,o=t.dynamic,u={};return Object.keys(r).forEach((function(t){var o=r[t],s=n.id(t),c=new y;if(re(o))c.state=1,c.buffer=i.getBuffer(i.create(o,34962,!1,!0)),c.type=0;else{var f=i.getBuffer(o);if(f)c.state=1,c.buffer=f,c.type=0;else if(w.command("object"===a(o)&&o,"invalid data for attribute "+t,e.commandStr),"constant"in o){var l=o.constant;c.buffer="null",c.state=2,"number"==typeof l?c.x=l:(w.command(tt(l)&&l.length>0&&l.length<=4,"invalid constant for attribute "+t,e.commandStr),jt.forEach((function(t,e){e<l.length&&(c[t]=l[e])})))}else{f=re(o.buffer)?i.getBuffer(i.create(o.buffer,34962,!1,!0)):i.getBuffer(o.buffer),w.command(!!f,'missing buffer for attribute "'+t+'"',e.commandStr);var h=0|o.offset;w.command(h>=0,'invalid offset for attribute "'+t+'"',e.commandStr);var d=0|o.stride;w.command(d>=0&&d<256,'invalid stride for attribute "'+t+'", must be integer betweeen [0, 255]',e.commandStr);var p=0|o.size;w.command(!("size"in o)||p>0&&p<=4,'invalid size for attribute "'+t+'", must be 1,2,3,4',e.commandStr);var v=!!o.normalized,m=0;"type"in o&&(w.commandParameter(o.type,z,"invalid type for attribute "+t,e.commandStr),m=z[o.type]);var g=0|o.divisor;"divisor"in o&&(w.command(0===g||b,'cannot specify divisor for attribute "'+t+'", instancing not supported',e.commandStr),w.command(g>=0,'invalid divisor for attribute "'+t+'"',e.commandStr)),w.optional((function(){var n=e.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(o).forEach((function(e){w.command(r.indexOf(e)>=0,'unknown parameter "'+e+'" for attribute pointer "'+t+'" (valid parameters are '+r+")",n)}))})),c.buffer=f,c.state=1,c.size=p,c.normalized=v,c.type=m||f.dtype,c.offset=h,c.stride=d,c.divisor=g}}u[t]=ue((function(t,e){var n=t.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(c).forEach((function(t){r[t]=c[t]})),c.buffer&&(r.buffer=t.link(c.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r}))})),Object.keys(o).forEach((function(t){var e=o[t];u[t]=se(e,(function(n,r){var o=n.invoke(r,e),i=n.shared,a=n.constants,u=i.isBufferArgs,s=i.buffer;w.optional((function(){n.assert(r,o+"&&(typeof "+o+'==="object"||typeof '+o+'==="function")&&('+u+"("+o+")||"+s+".getBuffer("+o+")||"+s+".getBuffer("+o+".buffer)||"+u+"("+o+'.buffer)||("constant" in '+o+"&&(typeof "+o+'.constant==="number"||'+i.isArrayLike+"("+o+".constant))))",'invalid dynamic attribute "'+t+'"')}));var c={isStream:r.def(!1)},f=new y;f.state=1,Object.keys(f).forEach((function(t){c[t]=r.def(""+f[t])}));var l=c.buffer,h=c.type;function d(t){r(c[t],"=",o,".",t,"|0;")}return r("if(",u,"(",o,")){",c.isStream,"=true;",l,"=",s,".createStream(",34962,",",o,");",h,"=",l,".dtype;","}else{",l,"=",s,".getBuffer(",o,");","if(",l,"){",h,"=",l,".dtype;",'}else if("constant" in ',o,"){",c.state,"=",2,";","if(typeof "+o+'.constant === "number"){',c[jt[0]],"=",o,".constant;",jt.slice(1).map((function(t){return c[t]})).join("="),"=0;","}else{",jt.map((function(t,e){return c[t]+"="+o+".constant.length>"+e+"?"+o+".constant["+e+"]:0;"})).join(""),"}}else{","if(",u,"(",o,".buffer)){",l,"=",s,".createStream(",34962,",",o,".buffer);","}else{",l,"=",s,".getBuffer(",o,".buffer);","}",h,'="type" in ',o,"?",a.glTypes,"[",o,".type]:",l,".dtype;",c.normalized,"=!!",o,".normalized;"),d("size"),d("offset"),d("stride"),d("divisor"),r("}}"),r.exit("if(",c.isStream,"){",s,".destroyStream(",l,");","}"),c}))})),u}(e,d),D.context=function(t){var e=t.static,n=t.dynamic,r={};return Object.keys(e).forEach((function(t){var n=e[t];r[t]=ue((function(t,e){return"number"==typeof n||"boolean"==typeof n?""+n:t.link(n)}))})),Object.keys(n).forEach((function(t){var e=n[t];r[t]=se(e,(function(t,n){return t.invoke(n,e)}))})),r}(f),D}function j(t,e,n){var r=t.shared.context,o=t.scope();Object.keys(n).forEach((function(i){e.save(r,"."+i);var a=n[i].append(t,e);Array.isArray(a)?o(r,".",i,"=[",a.join(),"];"):o(r,".",i,"=",a,";")})),e(o)}function L(t,e,n,r){var o,i=t.shared,a=i.gl,u=i.framebuffer;_&&(o=e.def(i.extensions,".webgl_draw_buffers"));var s,c=t.constants,f=c.drawBuffer,l=c.backBuffer;s=n?n.append(t,e):e.def(u,".next"),r||e("if(",s,"!==",u,".cur){"),e("if(",s,"){",a,".bindFramebuffer(",36160,",",s,".framebuffer);"),_&&e(o,".drawBuffersWEBGL(",f,"[",s,".colorAttachments.length]);"),e("}else{",a,".bindFramebuffer(",36160,",null);"),_&&e(o,".drawBuffersWEBGL(",l,");"),e("}",u,".cur=",s,";"),r||e("}")}function U(t,e,n){var r=t.shared,o=r.gl,i=t.current,a=t.next,u=r.current,s=r.next,c=t.cond(u,".dirty");S.forEach((function(e){var r,f,l=k(e);if(!(l in n.state))if(l in a){r=a[l],f=i[l];var h=C(x[l].length,(function(t){return c.def(r,"[",t,"]")}));c(t.cond(h.map((function(t,e){return t+"!=="+f+"["+e+"]"})).join("||")).then(o,".",A[l],"(",h,");",h.map((function(t,e){return f+"["+e+"]="+t})).join(";"),";"))}else{r=c.def(s,".",l);var d=t.cond(r,"!==",u,".",l);c(d),l in T?d(t.cond(r).then(o,".enable(",T[l],");").else(o,".disable(",T[l],");"),u,".",l,"=",r,";"):d(o,".",A[l],"(",r,");",u,".",l,"=",r,";")}})),0===Object.keys(n.state).length&&c(u,".dirty=false;"),e(c)}function B(t,e,n,r){var o=t.shared,i=t.current,a=o.current,u=o.gl;oe(Object.keys(n)).forEach((function(o){var s=n[o];if(!r||r(s)){var c=s.append(t,e);if(T[o]){var f=T[o];ae(s)?e(u,c?".enable(":".disable(",f,");"):e(t.cond(c).then(u,".enable(",f,");").else(u,".disable(",f,");")),e(a,".",o,"=",c,";")}else if(tt(c)){var l=i[o];e(u,".",A[o],"(",c,");",c.map((function(t,e){return l+"["+e+"]="+t})).join(";"),";")}else e(u,".",A[o],"(",c,");",a,".",o,"=",c,";")}}))}function F(t,e){b&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function V(t,e,n,r,o){var i,a,u,s=t.shared,c=t.stats,f=s.current,l=s.timer,h=n.profile;function d(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function p(t){t(i=e.def(),"=",d(),";"),"string"==typeof o?t(c,".count+=",o,";"):t(c,".count++;"),v&&(r?t(a=e.def(),"=",l,".getNumPendingQueries();"):t(l,".beginQuery(",c,");"))}function m(t){t(c,".cpuTime+=",d(),"-",i,";"),v&&(r?t(l,".pushScopeStats(",a,",",l,".getNumPendingQueries(),",c,");"):t(l,".endQuery();"))}function y(t){var n=e.def(f,".profile");e(f,".profile=",t,";"),e.exit(f,".profile=",n,";")}if(h){if(ae(h))return void(h.enable?(p(e),m(e.exit),y("true")):y("false"));y(u=h.append(t,e))}else u=e.def(f,".profile");var g=t.block();p(g),e("if(",u,"){",g,"}");var b=t.block();m(b),e.exit("if(",u,"){",b,"}")}function W(t,e,n,r,o){var i=t.shared;r.forEach((function(r){var a,u=r.name,s=n.attributes[u];if(s){if(!o(s))return;a=s.append(t,e)}else{if(!o(ce))return;var c=t.scopeAttrib(u);w.optional((function(){t.assert(e,c+".state","missing attribute "+u)})),a={},Object.keys(new y).forEach((function(t){a[t]=e.def(c,".",t)}))}!function(n,r,o){var a=i.gl,u=e.def(n,".location"),s=e.def(i.attributes,"[",u,"]"),c=o.state,f=o.buffer,l=[o.x,o.y,o.z,o.w],h=["buffer","normalized","offset","stride"];function d(){e("if(!",s,".buffer){",a,".enableVertexAttribArray(",u,");}");var n,i=o.type;if(n=o.size?e.def(o.size,"||",r):r,e("if(",s,".type!==",i,"||",s,".size!==",n,"||",h.map((function(t){return s+"."+t+"!=="+o[t]})).join("||"),"){",a,".bindBuffer(",34962,",",f,".buffer);",a,".vertexAttribPointer(",[u,n,i,o.normalized,o.stride,o.offset],");",s,".type=",i,";",s,".size=",n,";",h.map((function(t){return s+"."+t+"="+o[t]+";"})).join(""),"}"),b){var c=o.divisor;e("if(",s,".divisor!==",c,"){",t.instancing,".vertexAttribDivisorANGLE(",[u,c],");",s,".divisor=",c,";}")}}function p(){e("if(",s,".buffer){",a,".disableVertexAttribArray(",u,");",s,".buffer=null;","}if(",jt.map((function(t,e){return s+"."+t+"!=="+l[e]})).join("||"),"){",a,".vertexAttrib4f(",u,",",l,");",jt.map((function(t,e){return s+"."+t+"="+l[e]+";"})).join(""),"}")}1===c?d():2===c?p():(e("if(",c,"===",1,"){"),d(),e("}else{"),p(),e("}"))}(t.link(r),function(t){switch(t){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(r.info.type),a)}))}function X(t,e,r,o,i){for(var a,u=t.shared,s=u.gl,c=0;c<o.length;++c){var f,l=o[c],h=l.name,d=l.info.type,p=r.uniforms[h],v=t.link(l)+".location";if(p){if(!i(p))continue;if(ae(p)){var m=p.value;if(w.command(null!=m,'missing uniform "'+h+'"',t.commandStr),35678===d||35680===d){w.command("function"==typeof m&&(35678===d&&("texture2d"===m._reglType||"framebuffer"===m._reglType)||35680===d&&("textureCube"===m._reglType||"framebufferCube"===m._reglType)),"invalid texture for uniform "+h,t.commandStr);var y=t.link(m._texture||m.color[0]._texture);e(s,".uniform1i(",v,",",y+".bind());"),e.exit(y,".unbind();")}else if(35674===d||35675===d||35676===d){w.optional((function(){w.command(tt(m),"invalid matrix for uniform "+h,t.commandStr),w.command(35674===d&&4===m.length||35675===d&&9===m.length||35676===d&&16===m.length,"invalid length for matrix uniform "+h,t.commandStr)}));var g=t.global.def("new Float32Array(["+Array.prototype.slice.call(m)+"])"),b=2;35675===d?b=3:35676===d&&(b=4),e(s,".uniformMatrix",b,"fv(",v,",false,",g,");")}else{switch(d){case 5126:w.commandType(m,"number","uniform "+h,t.commandStr),a="1f";break;case 35664:w.command(tt(m)&&2===m.length,"uniform "+h,t.commandStr),a="2f";break;case 35665:w.command(tt(m)&&3===m.length,"uniform "+h,t.commandStr),a="3f";break;case 35666:w.command(tt(m)&&4===m.length,"uniform "+h,t.commandStr),a="4f";break;case 35670:w.commandType(m,"boolean","uniform "+h,t.commandStr),a="1i";break;case 5124:w.commandType(m,"number","uniform "+h,t.commandStr),a="1i";break;case 35671:case 35667:w.command(tt(m)&&2===m.length,"uniform "+h,t.commandStr),a="2i";break;case 35672:case 35668:w.command(tt(m)&&3===m.length,"uniform "+h,t.commandStr),a="3i";break;case 35673:case 35669:w.command(tt(m)&&4===m.length,"uniform "+h,t.commandStr),a="4i"}e(s,".uniform",a,"(",v,",",tt(m)?Array.prototype.slice.call(m):m,");")}continue}f=p.append(t,e)}else{if(!i(ce))continue;f=e.def(u.uniforms,"[",n.id(h),"]")}35678===d?(w(!Array.isArray(f),"must specify a scalar prop for textures"),e("if(",f,"&&",f,'._reglType==="framebuffer"){',f,"=",f,".color[0];","}")):35680===d&&(w(!Array.isArray(f),"must specify a scalar prop for cube maps"),e("if(",f,"&&",f,'._reglType==="framebufferCube"){',f,"=",f,".color[0];","}")),w.optional((function(){function n(n,r){t.assert(e,n,'bad data or missing for uniform "'+h+'".  '+r)}function r(t){w(!Array.isArray(f),"must not specify an array type for uniform"),n("typeof "+f+'==="'+t+'"',"invalid type, expected "+t)}function o(e,r){Array.isArray(f)?w(f.length===e,"must have length "+e):n(u.isArrayLike+"("+f+")&&"+f+".length==="+e,"invalid vector, should have length "+e,t.commandStr)}function i(e){w(!Array.isArray(f),"must not specify a value type"),n("typeof "+f+'==="function"&&'+f+'._reglType==="texture'+(3553===e?"2d":"Cube")+'"',"invalid texture type",t.commandStr)}switch(d){case 5124:r("number");break;case 35667:o(2);break;case 35668:o(3);break;case 35669:o(4);break;case 5126:r("number");break;case 35664:o(2);break;case 35665:o(3);break;case 35666:o(4);break;case 35670:r("boolean");break;case 35671:o(2);break;case 35672:o(3);break;case 35673:case 35674:o(4);break;case 35675:o(9);break;case 35676:o(16);break;case 35678:i(3553);break;case 35680:i(34067)}}));var _=1;switch(d){case 35678:case 35680:var x=e.def(f,"._texture");e(s,".uniform1i(",v,",",x,".bind());"),e.exit(x,".unbind();");continue;case 5124:case 35670:a="1i";break;case 35667:case 35671:a="2i",_=2;break;case 35668:case 35672:a="3i",_=3;break;case 35669:case 35673:a="4i",_=4;break;case 5126:a="1f";break;case 35664:a="2f",_=2;break;case 35665:a="3f",_=3;break;case 35666:a="4f",_=4;break;case 35674:a="Matrix2fv";break;case 35675:a="Matrix3fv";break;case 35676:a="Matrix4fv"}if(e(s,".uniform",a,"(",v,","),"M"===a.charAt(0)){var E=Math.pow(d-35674+2,2),S=t.global.def("new Float32Array(",E,")");Array.isArray(f)?e("false,(",C(E,(function(t){return S+"["+t+"]="+f[t]})),",",S,")"):e("false,(Array.isArray(",f,")||",f," instanceof Float32Array)?",f,":(",C(E,(function(t){return S+"["+t+"]="+f+"["+t+"]"})),",",S,")")}else _>1?e(C(_,(function(t){return Array.isArray(f)?f[t]:f+"["+t+"]"}))):(w(!Array.isArray(f),"uniform value must not be an array"),e(f));e(");")}}function H(t,e,n,r){var o=t.shared,i=o.gl,a=o.draw,u=r.draw,s=function(){var o,s=u.elements,c=e;return s?((s.contextDep&&r.contextDynamic||s.propDep)&&(c=n),o=s.append(t,c)):o=c.def(a,".",zt),o&&c("if("+o+")"+i+".bindBuffer(34963,"+o+".buffer.buffer);"),o}();function c(o){var i=u[o];return i?i.contextDep&&r.contextDynamic||i.propDep?i.append(t,n):i.append(t,e):e.def(a,".",o)}var f,l,h=c(Vt),d=c(Xt),p=function(){var o,i=u.count,s=e;return i?((i.contextDep&&r.contextDynamic||i.propDep)&&(s=n),o=i.append(t,s),w.optional((function(){i.MISSING&&t.assert(e,"false","missing vertex count"),i.DYNAMIC&&t.assert(s,o+">=0","missing vertex count")}))):(o=s.def(a,".",Wt),w.optional((function(){t.assert(s,o+">=0","missing vertex count")}))),o}();if("number"==typeof p){if(0===p)return}else n("if(",p,"){"),n.exit("}");b&&(f=c(Ht),l=t.instancing);var v=s+".type",m=u.elements&&ae(u.elements);function y(){function t(){n(l,".drawElementsInstancedANGLE(",[h,p,v,d+"<<(("+v+"-5121)>>1)",f],");")}function e(){n(l,".drawArraysInstancedANGLE(",[h,d,p,f],");")}s?m?t():(n("if(",s,"){"),t(),n("}else{"),e(),n("}")):e()}function g(){function t(){n(i+".drawElements("+[h,p,v,d+"<<(("+v+"-5121)>>1)"]+");")}function e(){n(i+".drawArrays("+[h,d,p]+");")}s?m?t():(n("if(",s,"){"),t(),n("}else{"),e(),n("}")):e()}b&&("number"!=typeof f||f>=0)?"string"==typeof f?(n("if(",f,">0){"),y(),n("}else if(",f,"<0){"),g(),n("}")):y():g()}function q(t,e,n,r,o){var i=P(),a=i.proc("body",o);return w.optional((function(){i.commandStr=e.commandStr,i.command=i.link(e.commandStr)})),b&&(i.instancing=a.def(i.shared.extensions,".angle_instanced_arrays")),t(i,a,n,r),i.compile().body}function Y(t,e,n,r){F(t,e),n.useVAO?n.drawVAO?e(t.shared.vao,".setVAO(",n.drawVAO.append(t,e),");"):e(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(e(t.shared.vao,".setVAO(null);"),W(t,e,n,r.attributes,(function(){return!0}))),X(t,e,n,r.uniforms,(function(){return!0})),H(t,e,e,n)}function K(t,e,n,r){function o(){return!0}t.batchId="a1",F(t,e),W(t,e,n,r.attributes,o),X(t,e,n,r.uniforms,o),H(t,e,e,n)}function Q(t,e,n,r){F(t,e);var o=n.contextDep,i=e.def(),a=e.def();t.shared.props=a,t.batchId=i;var u=t.scope(),s=t.scope();function c(t){return t.contextDep&&o||t.propDep}function f(t){return!c(t)}if(e(u.entry,"for(",i,"=0;",i,"<","a1",";++",i,"){",a,"=","a0","[",i,"];",s,"}",u.exit),n.needsContext&&j(t,s,n.context),n.needsFramebuffer&&L(t,s,n.framebuffer),B(t,s,n.state,c),n.profile&&c(n.profile)&&V(t,s,n,!1,!0),r)n.useVAO?n.drawVAO?c(n.drawVAO)?s(t.shared.vao,".setVAO(",n.drawVAO.append(t,s),");"):u(t.shared.vao,".setVAO(",n.drawVAO.append(t,u),");"):u(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(u(t.shared.vao,".setVAO(null);"),W(t,u,n,r.attributes,f),W(t,s,n,r.attributes,c)),X(t,u,n,r.uniforms,f),X(t,s,n,r.uniforms,c),H(t,u,s,n);else{var l=t.global.def("{}"),h=n.shader.progVar.append(t,s),d=s.def(h,".id"),p=s.def(l,"[",d,"]");s(t.shared.gl,".useProgram(",h,".program);","if(!",p,"){",p,"=",l,"[",d,"]=",t.link((function(e){return q(K,t,n,e,2)})),"(",h,");}",p,".call(this,a0[",i,"],",i,");")}}function J(t,e,n){var r=e.static[n];if(r&&function(t){if("object"===a(t)&&!tt(t)){for(var e=Object.keys(t),n=0;n<e.length;++n)if(I.isDynamic(t[e[n]]))return!0;return!1}}(r)){var o=t.global,i=Object.keys(r),u=!1,s=!1,c=!1,f=t.global.def("{}");i.forEach((function(e){var n=r[e];if(I.isDynamic(n)){"function"==typeof n&&(n=r[e]=I.unbox(n));var i=se(n,null);u=u||i.thisDep,c=c||i.propDep,s=s||i.contextDep}else{switch(o(f,".",e,"="),a(n)){case"number":o(n);break;case"string":o('"',n,'"');break;case"object":Array.isArray(n)&&o("[",n.join(),"]");break;default:o(t.link(n))}o(";")}})),e.dynamic[n]=new I.DynamicVariable(4,{thisDep:u,contextDep:s,propDep:c,ref:f,append:function(t,e){i.forEach((function(n){var o=r[n];if(I.isDynamic(o)){var i=t.invoke(e,o);e(f,".",n,"=",i,";")}}))}}),delete e.static[n]}}return{next:E,current:x,procs:function(){var t=P(),e=t.proc("poll"),n=t.proc("refresh"),i=t.block();e(i),n(i);var a,u=t.shared,s=u.gl,c=u.next,f=u.current;i(f,".dirty=false;"),L(t,e),L(t,n,null,!0),b&&(a=t.link(b)),r.oes_vertex_array_object&&n(t.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var l=0;l<o.maxAttributes;++l){var h=n.def(u.attributes,"[",l,"]"),d=t.cond(h,".buffer");d.then(s,".enableVertexAttribArray(",l,");",s,".bindBuffer(",34962,",",h,".buffer.buffer);",s,".vertexAttribPointer(",l,",",h,".size,",h,".type,",h,".normalized,",h,".stride,",h,".offset);").else(s,".disableVertexAttribArray(",l,");",s,".vertexAttrib4f(",l,",",h,".x,",h,".y,",h,".z,",h,".w);",h,".buffer=null;"),n(d),b&&n(a,".vertexAttribDivisorANGLE(",l,",",h,".divisor);")}return n(t.shared.vao,".currentVAO=null;",t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"),Object.keys(T).forEach((function(r){var o=T[r],a=i.def(c,".",r),u=t.block();u("if(",a,"){",s,".enable(",o,")}else{",s,".disable(",o,")}",f,".",r,"=",a,";"),n(u),e("if(",a,"!==",f,".",r,"){",u,"}")})),Object.keys(A).forEach((function(r){var o,a,u=A[r],l=x[r],h=t.block();if(h(s,".",u,"("),tt(l)){var d=l.length;o=t.global.def(c,".",r),a=t.global.def(f,".",r),h(C(d,(function(t){return o+"["+t+"]"})),");",C(d,(function(t){return a+"["+t+"]="+o+"["+t+"];"})).join("")),e("if(",C(d,(function(t){return o+"["+t+"]!=="+a+"["+t+"]"})).join("||"),"){",h,"}")}else o=i.def(c,".",r),a=i.def(f,".",r),h(o,");",f,".",r,"=",o,";"),e("if(",o,"!==",a,"){",h,"}");n(h)})),t.compile()}(),compile:function(t,r,o,i,a){var u=P();u.stats=u.link(a),Object.keys(r.static).forEach((function(t){J(u,r,t)})),Zt.forEach((function(e){J(u,t,e)}));var s=G(t,r,o,i,u);return function(t,e){var n=t.proc("draw",1);F(t,n),j(t,n,e.context),L(t,n,e.framebuffer),U(t,n,e),B(t,n,e.state),V(t,n,e,!1,!0);var r=e.shader.progVar.append(t,n);if(n(t.shared.gl,".useProgram(",r,".program);"),e.shader.program)Y(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var o=t.global.def("{}"),i=n.def(r,".id"),a=n.def(o,"[",i,"]");n(t.cond(a).then(a,".call(this,a0);").else(a,"=",o,"[",i,"]=",t.link((function(n){return q(Y,t,e,n,1)})),"(",r,");",a,".call(this,a0);"))}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}(u,s),function(t,e){var r=t.proc("scope",3);t.batchId="a2";var o=t.shared,i=o.current;function a(n){var i=e.shader[n];i&&r.set(o.shader,"."+n,i.append(t,r))}j(t,r,e.context),e.framebuffer&&e.framebuffer.append(t,r),oe(Object.keys(e.state)).forEach((function(n){var i=e.state[n].append(t,r);tt(i)?i.forEach((function(e,o){r.set(t.next[n],"["+o+"]",e)})):r.set(o.next,"."+n,i)})),V(t,r,e,!0,!0),[zt,Xt,Wt,Ht,Vt].forEach((function(n){var i=e.draw[n];i&&r.set(o.draw,"."+n,""+i.append(t,r))})),Object.keys(e.uniforms).forEach((function(i){var a=e.uniforms[i].append(t,r);Array.isArray(a)&&(a="["+a.join()+"]"),r.set(o.uniforms,"["+n.id(i)+"]",a)})),Object.keys(e.attributes).forEach((function(n){var o=e.attributes[n].append(t,r),i=t.scopeAttrib(n);Object.keys(new y).forEach((function(t){r.set(i,"."+t,o[t])}))})),e.scopeVAO&&r.set(o.vao,".targetVAO",e.scopeVAO.append(t,r)),a(Bt),a(Ft),Object.keys(e.state).length>0&&(r(i,".dirty=true;"),r.exit(i,".dirty=true;")),r("a1(",t.shared.context,",a0,",t.batchId,");")}(u,s),function(t,e){var n=t.proc("batch",2);t.batchId="0",F(t,n);var r=!1,o=!0;Object.keys(e.context).forEach((function(t){r=r||e.context[t].propDep})),r||(j(t,n,e.context),o=!1);var i=e.framebuffer,a=!1;function u(t){return t.contextDep&&r||t.propDep}i?(i.propDep?r=a=!0:i.contextDep&&r&&(a=!0),a||L(t,n,i)):L(t,n,null),e.state.viewport&&e.state.viewport.propDep&&(r=!0),U(t,n,e),B(t,n,e.state,(function(t){return!u(t)})),e.profile&&u(e.profile)||V(t,n,e,!1,"a1"),e.contextDep=r,e.needsContext=o,e.needsFramebuffer=a;var s=e.shader.progVar;if(s.contextDep&&r||s.propDep)Q(t,n,e,null);else{var c=s.append(t,n);if(n(t.shared.gl,".useProgram(",c,".program);"),e.shader.program)Q(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var f=t.global.def("{}"),l=n.def(c,".id"),h=n.def(f,"[",l,"]");n(t.cond(h).then(h,".call(this,a0,a1);").else(h,"=",f,"[",l,"]=",t.link((function(n){return q(Q,t,e,n,2)})),"(",c,");",h,".call(this,a0,a1);"))}}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}(u,s),e(u.compile(),{destroy:function(){s.shader.program.destroy()}})}}}var le=function(t,e){if(!e.ext_disjoint_timer_query)return null;var n=[];function r(t){n.push(t)}var o=[];function i(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var a=[];function u(t){a.push(t)}var s=[];function c(t,e,n){var r=a.pop()||new i;r.startQueryIndex=t,r.endQueryIndex=e,r.sum=0,r.stats=n,s.push(r)}var f=[],l=[];return{beginQuery:function(t){var r=n.pop()||e.ext_disjoint_timer_query.createQueryEXT();e.ext_disjoint_timer_query.beginQueryEXT(35007,r),o.push(r),c(o.length-1,o.length,t)},endQuery:function(){e.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:c,update:function(){var t,n,i=o.length;if(0!==i){l.length=Math.max(l.length,i+1),f.length=Math.max(f.length,i+1),f[0]=0,l[0]=0;var a=0;for(t=0,n=0;n<o.length;++n){var c=o[n];e.ext_disjoint_timer_query.getQueryObjectEXT(c,34919)?(a+=e.ext_disjoint_timer_query.getQueryObjectEXT(c,34918),r(c)):o[t++]=c,f[n+1]=a,l[n+1]=t}for(o.length=t,t=0,n=0;n<s.length;++n){var h=s[n],d=h.startQueryIndex,p=h.endQueryIndex;h.sum+=f[p]-f[d];var v=l[d],m=l[p];m===v?(h.stats.gpuTime+=h.sum/1e6,u(h)):(h.startQueryIndex=v,h.endQueryIndex=m,s[t++]=h)}s.length=t}},getNumPendingQueries:function(){return o.length},clear:function(){n.push.apply(n,o);for(var t=0;t<n.length;t++)e.ext_disjoint_timer_query.deleteQueryEXT(n[t]);o.length=0,n.length=0},restore:function(){o.length=0,n.length=0}}};function he(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}return function(n){var r=M(n);if(!r)return null;var o=r.gl,i=o.getContextAttributes(),u=o.isContextLost(),s=function(t,e){var n={};function r(e){w.type(e,"string","extension name must be string");var r,o=e.toLowerCase();try{r=n[o]=t.getExtension(o)}catch(t){}return!!r}for(var o=0;o<e.extensions.length;++o){var i=e.extensions[o];if(!r(i))return e.onDestroy(),e.onDone('"'+i+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach((function(t){if(n[t]&&!r(t))throw new Error("(regl): error restoring extension "+t)}))}}}(o,r);if(!s)return null;var c,f,l=(c={"":0},f=[""],{id:function(t){var e=c[t];return e||(e=c[t]=f.length,f.push(t),e)},str:function(t){return f[t]}}),h={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},d=s.extensions,p=le(0,d),v=O(),m=o.drawingBufferWidth,y=o.drawingBufferHeight,g={tick:0,time:0,viewportWidth:m,viewportHeight:y,framebufferWidth:m,framebufferHeight:y,drawingBufferWidth:m,drawingBufferHeight:y,pixelRatio:r.pixelRatio},b=function(t,e){var n=1;e.ext_texture_filter_anisotropic&&(n=t.getParameter(34047));var r=1,o=1;e.webgl_draw_buffers&&(r=t.getParameter(34852),o=t.getParameter(36063));var i=!!e.oes_texture_float;if(i){var a=t.createTexture();t.bindTexture(3553,a),t.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var u=t.createFramebuffer();if(t.bindFramebuffer(36160,u),t.framebufferTexture2D(36160,36064,3553,a,0),t.bindTexture(3553,null),36053!==t.checkFramebufferStatus(36160))i=!1;else{t.viewport(0,0,1,1),t.clearColor(1,0,0,1),t.clear(16384);var s=G.allocType(5126,4);t.readPixels(0,0,1,1,6408,5126,s),t.getError()?i=!1:(t.deleteFramebuffer(u),t.deleteTexture(a),i=1===s[0]),G.freeType(s)}}var c=!0;if("undefined"==typeof navigator||!(/MSIE/.test(navigator.userAgent)||/Trident\\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var f=t.createTexture(),l=G.allocType(5121,36);t.activeTexture(33984),t.bindTexture(34067,f),t.texImage2D(34069,0,6408,3,3,0,6408,5121,l),G.freeType(l),t.bindTexture(34067,null),t.deleteTexture(f),c=!t.getError()}return{colorBits:[t.getParameter(3410),t.getParameter(3411),t.getParameter(3412),t.getParameter(3413)],depthBits:t.getParameter(3414),stencilBits:t.getParameter(3415),subpixelBits:t.getParameter(3408),extensions:Object.keys(e).filter((function(t){return!!e[t]})),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:o,pointSizeDims:t.getParameter(33901),lineWidthDims:t.getParameter(33902),maxViewportDims:t.getParameter(3386),maxCombinedTextureUnits:t.getParameter(35661),maxCubeMapSize:t.getParameter(34076),maxRenderbufferSize:t.getParameter(34024),maxTextureUnits:t.getParameter(34930),maxTextureSize:t.getParameter(3379),maxAttributes:t.getParameter(34921),maxVertexUniforms:t.getParameter(36347),maxVertexTextureUnits:t.getParameter(35660),maxVaryingVectors:t.getParameter(36348),maxFragmentUniforms:t.getParameter(36349),glsl:t.getParameter(35724),renderer:t.getParameter(7937),vendor:t.getParameter(7936),version:t.getParameter(7938),readFloat:i,npotTextureCube:c}}(o,d),_=function(e,n,r,o){var i=0,a={};function u(t){this.id=i++,this.buffer=e.createBuffer(),this.type=t,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,r.profile&&(this.stats={size:0})}u.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},u.prototype.destroy=function(){l(this)};var s=[];function c(t,n,r){t.byteLength=n.byteLength,e.bufferData(t.type,n,r)}function f(e,n,r,o,i,a){var u,s;if(e.usage=r,Array.isArray(n)){if(e.dtype=o||5126,n.length>0)if(Array.isArray(n[0])){u=X(n);for(var f=1,l=1;l<u.length;++l)f*=u[l];e.dimension=f,c(e,s=W(n,u,e.dtype),r),a?e.persistentData=s:G.freeType(s)}else if("number"==typeof n[0]){e.dimension=i;var h=G.allocType(e.dtype,n.length);Y(h,n),c(e,h,r),a?e.persistentData=h:G.freeType(h)}else t(n[0])?(e.dimension=n[0].length,e.dtype=o||q(n[0])||5126,c(e,s=W(n,[n.length,n[0].length],e.dtype),r),a?e.persistentData=s:G.freeType(s)):w.raise("invalid buffer data")}else if(t(n))e.dtype=o||q(n),e.dimension=i,c(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(j(n)){u=n.shape;var d=n.stride,p=n.offset,v=0,m=0,y=0,g=0;1===u.length?(v=u[0],m=1,y=d[0],g=0):2===u.length?(v=u[0],m=u[1],y=d[0],g=d[1]):w.raise("invalid shape"),e.dtype=o||q(n.data)||5126,e.dimension=m;var b=G.allocType(e.dtype,v*m);K(b,n.data,v,m,y,g,p),c(e,b,r),a?e.persistentData=b:G.freeType(b)}else n instanceof ArrayBuffer?(e.dtype=5121,e.dimension=i,c(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n)))):w.raise("invalid buffer data")}function l(t){n.bufferCount--,o(t);var r=t.buffer;w(r,"buffer must not be deleted already"),e.deleteBuffer(r),t.buffer=null,delete a[t.id]}return r.profile&&(n.getTotalBufferSize=function(){var t=0;return Object.keys(a).forEach((function(e){t+=a[e].stats.size})),t}),{create:function(o,i,s,c){n.bufferCount++;var h=new u(i);function d(n){var o=35044,i=null,a=0,u=0,s=1;return Array.isArray(n)||t(n)||j(n)||n instanceof ArrayBuffer?i=n:"number"==typeof n?a=0|n:n&&(w.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(w(null===i||Array.isArray(i)||t(i)||j(i),"invalid data for buffer"),i=n.data),"usage"in n&&(w.parameter(n.usage,V,"invalid buffer usage"),o=V[n.usage]),"type"in n&&(w.parameter(n.type,z,"invalid buffer type"),u=z[n.type]),"dimension"in n&&(w.type(n.dimension,"number","invalid dimension"),s=0|n.dimension),"length"in n&&(w.nni(a,"buffer length must be a nonnegative integer"),a=0|n.length)),h.bind(),i?f(h,i,o,u,s,c):(a&&e.bufferData(h.type,a,o),h.dtype=u||5121,h.usage=o,h.dimension=s,h.byteLength=a),r.profile&&(h.stats.size=h.byteLength*H[h.dtype]),d}function p(t,n){w(n+t.byteLength<=h.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+n+" to a buffer of size "+h.byteLength),e.bufferSubData(h.type,n,t)}return a[h.id]=h,s||d(o),d._reglType="buffer",d._buffer=h,d.subdata=function(e,n){var r,o=0|(n||0);if(h.bind(),t(e)||e instanceof ArrayBuffer)p(e,o);else if(Array.isArray(e)){if(e.length>0)if("number"==typeof e[0]){var i=G.allocType(h.dtype,e.length);Y(i,e),p(i,o),G.freeType(i)}else if(Array.isArray(e[0])||t(e[0])){r=X(e);var a=W(e,r,h.dtype);p(a,o),G.freeType(a)}else w.raise("invalid buffer data")}else if(j(e)){r=e.shape;var u=e.stride,s=0,c=0,f=0,l=0;1===r.length?(s=r[0],c=1,f=u[0],l=0):2===r.length?(s=r[0],c=r[1],f=u[0],l=u[1]):w.raise("invalid shape");var v=Array.isArray(e.data)?h.dtype:q(e.data),m=G.allocType(v,s*c);K(m,e.data,s,c,f,l,e.offset),p(m,o),G.freeType(m)}else w.raise("invalid data for buffer subdata");return d},r.profile&&(d.stats=h.stats),d.destroy=function(){l(h)},d},createStream:function(t,e){var n=s.pop();return n||(n=new u(t)),n.bind(),f(n,e,35040,0,1,!1),n},destroyStream:function(t){s.push(t)},clear:function(){L(a).forEach(l),s.forEach(l)},getBuffer:function(t){return t&&t._buffer instanceof u?t._buffer:null},restore:function(){L(a).forEach((function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)}))},_initBuffer:f}}(o,h,r,(function(t){return x.destroyBuffer(t)})),x=function(e,n,r,o,i){for(var a=r.maxAttributes,u=new Array(a),s=0;s<a;++s)u[s]=new Ct;var c=0,f={},l={Record:Ct,scope:{},state:u,currentVAO:null,targetVAO:null,restore:h()?function(){h()&&L(f).forEach((function(t){t.refresh()}))}:function(){},createVAO:function(e){var r=new p;function u(e){w(Array.isArray(e),"arguments to vertex array constructor must be an array"),w(e.length<a,"too many attributes"),w(e.length>0,"must specify at least one attribute");var o={},s=r.attributes;s.length=e.length;for(var c=0;c<e.length;++c){var f,l=e[c],h=s[c]=new Ct,d=l.data||l;Array.isArray(d)||t(d)||j(d)?(r.buffers[c]&&(f=r.buffers[c],t(d)&&f._buffer.byteLength>=d.byteLength?f.subdata(d):(f.destroy(),r.buffers[c]=null)),r.buffers[c]||(f=r.buffers[c]=i.create(l,34962,!1,!0)),h.buffer=i.getBuffer(f),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1,o[c]=1):i.getBuffer(l)?(h.buffer=i.getBuffer(l),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1):i.getBuffer(l.buffer)?(h.buffer=i.getBuffer(l.buffer),h.size=0|(+l.size||h.buffer.dimension),h.normalized=!!l.normalized||!1,"type"in l?(w.parameter(l.type,z,"invalid buffer type"),h.type=z[l.type]):h.type=h.buffer.dtype,h.offset=0|(l.offset||0),h.stride=0|(l.stride||0),h.divisor=0|(l.divisor||0),h.state=1,w(h.size>=1&&h.size<=4,"size must be between 1 and 4"),w(h.offset>=0,"invalid offset"),w(h.stride>=0&&h.stride<=255,"stride must be between 0 and 255"),w(h.divisor>=0,"divisor must be positive"),w(!h.divisor||!!n.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in l?(w(c>0,"first attribute must not be a constant"),h.x=+l.x||0,h.y=+l.y||0,h.z=+l.z||0,h.w=+l.w||0,h.state=2):w(!1,"invalid attribute spec for location "+c)}for(var p=0;p<r.buffers.length;++p)!o[p]&&r.buffers[p]&&(r.buffers[p].destroy(),r.buffers[p]=null);return r.refresh(),u}return o.vaoCount+=1,u.destroy=function(){for(var t=0;t<r.buffers.length;++t)r.buffers[t]&&r.buffers[t].destroy();r.buffers.length=0,r.destroy()},u._vao=r,u._reglType="vao",u(e)},getVAO:function(t){return"function"==typeof t&&t._vao?t._vao:null},destroyBuffer:function(t){for(var n=0;n<u.length;++n){var r=u[n];r.buffer===t&&(e.disableVertexAttribArray(n),r.buffer=null)}},setVAO:h()?function(t){if(t!==l.currentVAO){var e=h();t?e.bindVertexArrayOES(t.vao):e.bindVertexArrayOES(null),l.currentVAO=t}}:function(t){if(t!==l.currentVAO){if(t)t.bindAttrs();else for(var n=d(),r=0;r<u.length;++r){var o=u[r];o.buffer?(e.enableVertexAttribArray(r),e.vertexAttribPointer(r,o.size,o.type,o.normalized,o.stride,o.offfset),n&&o.divisor&&n.vertexAttribDivisorANGLE(r,o.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,o.x,o.y,o.z,o.w))}l.currentVAO=t}},clear:h()?function(){L(f).forEach((function(t){t.destroy()}))}:function(){}};function h(){return n.oes_vertex_array_object}function d(){return n.angle_instanced_arrays}function p(){this.id=++c,this.attributes=[];var t=h();this.vao=t?t.createVertexArrayOES():null,f[this.id]=this,this.buffers=[]}return p.prototype.bindAttrs=function(){for(var t=d(),n=this.attributes,r=0;r<n.length;++r){var o=n[r];o.buffer?(e.enableVertexAttribArray(r),e.bindBuffer(34962,o.buffer.buffer),e.vertexAttribPointer(r,o.size,o.type,o.normalized,o.stride,o.offset),t&&o.divisor&&t.vertexAttribDivisorANGLE(r,o.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,o.x,o.y,o.z,o.w))}for(var i=n.length;i<a;++i)e.disableVertexAttribArray(i)},p.prototype.refresh=function(){var t=h();t&&(t.bindVertexArrayOES(this.vao),this.bindAttrs(),l.currentVAO=this)},p.prototype.destroy=function(){if(this.vao){var t=h();this===l.currentVAO&&(l.currentVAO=null,t.bindVertexArrayOES(null)),t.deleteVertexArrayOES(this.vao),this.vao=null}f[this.id]&&(delete f[this.id],o.vaoCount-=1)},l}(o,d,b,h,_),E=function(e,n,r,o){var i={},a=0,u={uint8:5121,uint16:5123};function s(t){this.id=a++,i[this.id]=this,this.buffer=t,this.primType=4,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(u.uint32=5125),s.prototype.bind=function(){this.buffer.bind()};var c=[];function f(o,i,a,u,s,c,f){var l;if(o.buffer.bind(),i){var h=f;f||t(i)&&(!j(i)||t(i.data))||(h=n.oes_element_index_uint?5125:5123),r._initBuffer(o.buffer,i,a,h,3)}else e.bufferData(34963,c,a),o.buffer.dtype=l||5121,o.buffer.usage=a,o.buffer.dimension=3,o.buffer.byteLength=c;if(l=f,!f){switch(o.buffer.dtype){case 5121:case 5120:l=5121;break;case 5123:case 5122:l=5123;break;case 5125:case 5124:l=5125;break;default:w.raise("unsupported type for element array")}o.buffer.dtype=l}o.type=l,w(5125!==l||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var d=s;d<0&&(d=o.buffer.byteLength,5123===l?d>>=1:5125===l&&(d>>=2)),o.vertCount=d;var p=u;if(u<0){p=4;var v=o.buffer.dimension;1===v&&(p=0),2===v&&(p=1),3===v&&(p=4)}o.primType=p}function l(t){o.elementsCount--,w(null!==t.buffer,"must not double destroy elements"),delete i[t.id],t.buffer.destroy(),t.buffer=null}return{create:function(e,n){var i=r.create(null,34963,!0),a=new s(i._buffer);function c(e){if(e)if("number"==typeof e)i(e),a.primType=4,a.vertCount=0|e,a.type=5121;else{var n=null,r=35044,o=-1,s=-1,l=0,h=0;Array.isArray(e)||t(e)||j(e)?n=e:(w.type(e,"object","invalid arguments for elements"),"data"in e&&(n=e.data,w(Array.isArray(n)||t(n)||j(n),"invalid data for element buffer")),"usage"in e&&(w.parameter(e.usage,V,"invalid element buffer usage"),r=V[e.usage]),"primitive"in e&&(w.parameter(e.primitive,Z,"invalid element buffer primitive"),o=Z[e.primitive]),"count"in e&&(w("number"==typeof e.count&&e.count>=0,"invalid vertex count for elements"),s=0|e.count),"type"in e&&(w.parameter(e.type,u,"invalid buffer type"),h=u[e.type]),"length"in e?l=0|e.length:(l=s,5123===h||5122===h?l*=2:5125!==h&&5124!==h||(l*=4))),f(a,n,r,o,s,l,h)}else i(),a.primType=4,a.vertCount=0,a.type=5121;return c}return o.elementsCount++,c(e),c._reglType="elements",c._elements=a,c.subdata=function(t,e){return i.subdata(t,e),c},c.destroy=function(){l(a)},c},createStream:function(t){var e=c.pop();return e||(e=new s(r.create(null,34963,!0,!1)._buffer)),f(e,t,35040,-1,-1,0,0),e},destroyStream:function(t){c.push(t)},getElements:function(t){return"function"==typeof t&&t._elements instanceof s?t._elements:null},clear:function(){L(i).forEach(l)}}}(o,d,_,h),S=function(t,n,r,o){var i={},a={};function u(t,e,n,r){this.name=t,this.id=e,this.location=n,this.info=r}function s(t,e){for(var n=0;n<t.length;++n)if(t[n].id===e.id)return void(t[n].location=e.location);t.push(e)}function c(e,r,o){var u=35632===e?i:a,s=u[r];if(!s){var c=n.str(r);s=t.createShader(e),t.shaderSource(s,c),t.compileShader(s),w.shaderError(t,s,c,e,o),u[r]=s}return s}var f={},l=[],h=0;function d(t,e){this.id=h++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,o.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function p(e,r,i){var a,f,l=c(35632,e.fragId),h=c(35633,e.vertId),d=e.program=t.createProgram();if(t.attachShader(d,l),t.attachShader(d,h),i)for(a=0;a<i.length;++a){var p=i[a];t.bindAttribLocation(d,p[0],p[1])}t.linkProgram(d),w.linkError(t,d,n.str(e.fragId),n.str(e.vertId),r);var v=t.getProgramParameter(d,35718);o.profile&&(e.stats.uniformsCount=v);var m=e.uniforms;for(a=0;a<v;++a)if(f=t.getActiveUniform(d,a))if(f.size>1)for(var y=0;y<f.size;++y){var g=f.name.replace("[0]","["+y+"]");s(m,new u(g,n.id(g),t.getUniformLocation(d,g),f))}else s(m,new u(f.name,n.id(f.name),t.getUniformLocation(d,f.name),f));var b=t.getProgramParameter(d,35721);o.profile&&(e.stats.attributesCount=b);var _=e.attributes;for(a=0;a<b;++a)(f=t.getActiveAttrib(d,a))&&s(_,new u(f.name,n.id(f.name),t.getAttribLocation(d,f.name),f))}return o.profile&&(r.getMaxUniformsCount=function(){var t=0;return l.forEach((function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)})),t},r.getMaxAttributesCount=function(){var t=0;return l.forEach((function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)})),t}),{clear:function(){var e=t.deleteShader.bind(t);L(i).forEach(e),i={},L(a).forEach(e),a={},l.forEach((function(e){t.deleteProgram(e.program)})),l.length=0,f={},r.shaderCount=0},program:function(n,o,u,s){w.command(n>=0,"missing vertex shader",u),w.command(o>=0,"missing fragment shader",u);var c=f[o];c||(c=f[o]={});var h=c[n];if(h&&(h.refCount++,!s))return h;var v=new d(o,n);return r.shaderCount++,p(v,u,s),h||(c[n]=v),l.push(v),e(v,{destroy:function(){if(v.refCount--,v.refCount<=0){t.deleteProgram(v.program);var e=l.indexOf(v);l.splice(e,1),r.shaderCount--}c[v.vertId].refCount<=0&&(t.deleteShader(a[v.vertId]),delete a[v.vertId],delete f[v.fragId][v.vertId]),Object.keys(f[v.fragId]).length||(t.deleteShader(i[v.fragId]),delete i[v.fragId],delete f[v.fragId])}})},restore:function(){i={},a={};for(var t=0;t<l.length;++t)p(l[t],null,l[t].attributes.map((function(t){return[t.location,t.name]})))},shader:c,frag:-1,vert:-1}}(o,l,h,r),T=Tt(o,d,b,(function(){R.procs.poll()}),g,h,r),A=function(t,e,n,r,o){var i={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(i.srgba=35907),e.ext_color_buffer_half_float&&(i.rgba16f=34842,i.rgb16f=34843),e.webgl_color_buffer_float&&(i.rgba32f=34836);var u=[];Object.keys(i).forEach((function(t){var e=i[t];u[e]=t}));var s=0,c={};function f(t){this.id=s++,this.refCount=1,this.renderbuffer=t,this.format=32854,this.width=0,this.height=0,o.profile&&(this.stats={size:0})}function l(e){var n=e.renderbuffer;w(n,"must not double destroy renderbuffer"),t.bindRenderbuffer(36161,null),t.deleteRenderbuffer(n),e.renderbuffer=null,e.refCount=0,delete c[e.id],r.renderbufferCount--}return f.prototype.decRef=function(){--this.refCount<=0&&l(this)},o.profile&&(r.getTotalRenderbufferSize=function(){var t=0;return Object.keys(c).forEach((function(e){t+=c[e].stats.size})),t}),{create:function(e,s){var l=new f(t.createRenderbuffer());function h(e,r){var s=0,c=0,f=32854;if("object"===a(e)&&e){var d=e;if("shape"in d){var p=d.shape;w(Array.isArray(p)&&p.length>=2,"invalid renderbuffer shape"),s=0|p[0],c=0|p[1]}else"radius"in d&&(s=c=0|d.radius),"width"in d&&(s=0|d.width),"height"in d&&(c=0|d.height);"format"in d&&(w.parameter(d.format,i,"invalid renderbuffer format"),f=i[d.format])}else"number"==typeof e?(s=0|e,c="number"==typeof r?0|r:s):e?w.raise("invalid arguments to renderbuffer constructor"):s=c=1;if(w(s>0&&c>0&&s<=n.maxRenderbufferSize&&c<=n.maxRenderbufferSize,"invalid renderbuffer size"),s!==l.width||c!==l.height||f!==l.format)return h.width=l.width=s,h.height=l.height=c,l.format=f,t.bindRenderbuffer(36161,l.renderbuffer),t.renderbufferStorage(36161,f,s,c),w(0===t.getError(),"invalid render buffer format"),o.profile&&(l.stats.size=It(l.format,l.width,l.height)),h.format=u[l.format],h}return c[l.id]=l,r.renderbufferCount++,h(e,s),h.resize=function(e,r){var i=0|e,a=0|r||i;return i===l.width&&a===l.height||(w(i>0&&a>0&&i<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),h.width=l.width=i,h.height=l.height=a,t.bindRenderbuffer(36161,l.renderbuffer),t.renderbufferStorage(36161,l.format,i,a),w(0===t.getError(),"invalid render buffer format"),o.profile&&(l.stats.size=It(l.format,l.width,l.height))),h},h._reglType="renderbuffer",h._renderbuffer=l,o.profile&&(h.stats=l.stats),h.destroy=function(){l.decRef()},h},clear:function(){L(c).forEach(l)},restore:function(){L(c).forEach((function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,e.renderbuffer),t.renderbufferStorage(36161,e.format,e.width,e.height)})),t.bindRenderbuffer(36161,null)}}}(o,d,b,h,r),D=function(t,n,r,o,i,u){var s={cur:null,next:null,dirty:!1,setFBO:null},c=["rgba"],f=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&f.push("srgba"),n.ext_color_buffer_half_float&&f.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&f.push("rgba32f");var l=["uint8"];function h(t,e,n){this.target=t,this.texture=e,this.renderbuffer=n;var r=0,o=0;e?(r=e.width,o=e.height):n&&(r=n.width,o=n.height),this.width=r,this.height=o}function d(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function p(t,e,n){if(t)if(t.texture){var r=t.texture._texture,o=Math.max(1,r.width),i=Math.max(1,r.height);w(o===e&&i===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=t.renderbuffer._renderbuffer;w(a.width===e&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function v(e,n){n&&(n.texture?t.framebufferTexture2D(36160,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(36160,e,36161,n.renderbuffer._renderbuffer.renderbuffer))}function m(t){var e=3553,n=null,r=null,o=t;"object"===a(t)&&(o=t.data,"target"in t&&(e=0|t.target)),w.type(o,"function","invalid attachment data");var i=o._reglType;return"texture2d"===i?(n=o,w(3553===e)):"textureCube"===i?(n=o,w(e>=34069&&e<34075,"invalid cube map target")):"renderbuffer"===i?(r=o,e=36161):w.raise("invalid regl object for attachment"),new h(e,n,r)}function y(t,e,n,r,a){if(n){var u=o.create2D({width:t,height:e,format:r,type:a});return u._texture.refCount=0,new h(3553,u,null)}var s=i.create({width:t,height:e,format:r});return s._renderbuffer.refCount=0,new h(36161,null,s)}function g(t){return t&&(t.texture||t.renderbuffer)}function b(t,e,n){t&&(t.texture?t.texture.resize(e,n):t.renderbuffer&&t.renderbuffer.resize(e,n),t.width=e,t.height=n)}n.oes_texture_half_float&&l.push("half float","float16"),n.oes_texture_float&&l.push("float","float32");var _=0,x={};function E(){this.id=_++,x[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function S(t){t.colorAttachments.forEach(d),d(t.depthAttachment),d(t.stencilAttachment),d(t.depthStencilAttachment)}function T(e){var n=e.framebuffer;w(n,"must not double destroy framebuffer"),t.deleteFramebuffer(n),e.framebuffer=null,u.framebufferCount--,delete x[e.id]}function A(e){var n;t.bindFramebuffer(36160,e.framebuffer);var o=e.colorAttachments;for(n=0;n<o.length;++n)v(36064+n,o[n]);for(n=o.length;n<r.maxColorAttachments;++n)t.framebufferTexture2D(36160,36064+n,3553,null,0);t.framebufferTexture2D(36160,33306,3553,null,0),t.framebufferTexture2D(36160,36096,3553,null,0),t.framebufferTexture2D(36160,36128,3553,null,0),v(36096,e.depthAttachment),v(36128,e.stencilAttachment),v(33306,e.depthStencilAttachment);var i=t.checkFramebufferStatus(36160);t.isContextLost()||36053===i||w.raise("framebuffer configuration not supported, status = "+Mt[i]),t.bindFramebuffer(36160,s.next?s.next.framebuffer:null),s.cur=s.next,t.getError()}function I(t,o){var i=new E;function a(t,e){var o;w(s.next!==i,"can not update framebuffer which is currently in use");var u=0,h=0,d=!0,v=!0,b=null,_=!0,x="rgba",E="uint8",T=1,I=null,k=null,O=null,D=!1;if("number"==typeof t)u=0|t,h=0|e||u;else if(t){w.type(t,"object","invalid arguments for framebuffer");var R=t;if("shape"in R){var M=R.shape;w(Array.isArray(M)&&M.length>=2,"invalid shape for framebuffer"),u=M[0],h=M[1]}else"radius"in R&&(u=h=R.radius),"width"in R&&(u=R.width),"height"in R&&(h=R.height);("color"in R||"colors"in R)&&(b=R.color||R.colors,Array.isArray(b)&&w(1===b.length||n.webgl_draw_buffers,"multiple render targets not supported")),b||("colorCount"in R&&(T=0|R.colorCount,w(T>0,"invalid color buffer count")),"colorTexture"in R&&(_=!!R.colorTexture,x="rgba4"),"colorType"in R&&(E=R.colorType,_?(w(n.oes_texture_float||!("float"===E||"float32"===E),"you must enable OES_texture_float in order to use floating point framebuffer objects"),w(n.oes_texture_half_float||!("half float"===E||"float16"===E),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===E||"float16"===E?(w(n.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),x="rgba16f"):"float"!==E&&"float32"!==E||(w(n.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),x="rgba32f"),w.oneOf(E,l,"invalid color type")),"colorFormat"in R&&(x=R.colorFormat,c.indexOf(x)>=0?_=!0:f.indexOf(x)>=0?_=!1:_?w.oneOf(R.colorFormat,c,"invalid color format for texture"):w.oneOf(R.colorFormat,f,"invalid color format for renderbuffer"))),("depthTexture"in R||"depthStencilTexture"in R)&&(D=!(!R.depthTexture&&!R.depthStencilTexture),w(!D||n.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in R&&("boolean"==typeof R.depth?d=R.depth:(I=R.depth,v=!1)),"stencil"in R&&("boolean"==typeof R.stencil?v=R.stencil:(k=R.stencil,d=!1)),"depthStencil"in R&&("boolean"==typeof R.depthStencil?d=v=R.depthStencil:(O=R.depthStencil,d=!1,v=!1))}else u=h=1;var C=null,N=null,P=null,G=null;if(Array.isArray(b))C=b.map(m);else if(b)C=[m(b)];else for(C=new Array(T),o=0;o<T;++o)C[o]=y(u,h,_,x,E);w(n.webgl_draw_buffers||C.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),w(C.length<=r.maxColorAttachments,"too many color attachments, not supported"),u=u||C[0].width,h=h||C[0].height,I?N=m(I):d&&!v&&(N=y(u,h,D,"depth","uint32")),k?P=m(k):v&&!d&&(P=y(u,h,!1,"stencil","uint8")),O?G=m(O):!I&&!k&&v&&d&&(G=y(u,h,D,"depth stencil","depth stencil")),w(!!I+!!k+!!O<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var j=null;for(o=0;o<C.length;++o)if(p(C[o],u,h),w(!C[o]||C[o].texture&&kt.indexOf(C[o].texture._texture.format)>=0||C[o].renderbuffer&&Rt.indexOf(C[o].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+o+" is invalid"),C[o]&&C[o].texture){var L=Ot[C[o].texture._texture.format]*Dt[C[o].texture._texture.type];null===j?j=L:w(j===L,"all color attachments much have the same number of bits per pixel.")}return p(N,u,h),w(!N||N.texture&&6402===N.texture._texture.format||N.renderbuffer&&33189===N.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object"),p(P,u,h),w(!P||P.renderbuffer&&36168===P.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object"),p(G,u,h),w(!G||G.texture&&34041===G.texture._texture.format||G.renderbuffer&&34041===G.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object"),S(i),i.width=u,i.height=h,i.colorAttachments=C,i.depthAttachment=N,i.stencilAttachment=P,i.depthStencilAttachment=G,a.color=C.map(g),a.depth=g(N),a.stencil=g(P),a.depthStencil=g(G),a.width=i.width,a.height=i.height,A(i),a}return u.framebufferCount++,a(t,o),e(a,{resize:function(t,e){w(s.next!==i,"can not resize a framebuffer which is currently in use");var n=Math.max(0|t,1),r=Math.max(0|e||n,1);if(n===i.width&&r===i.height)return a;for(var o=i.colorAttachments,u=0;u<o.length;++u)b(o[u],n,r);return b(i.depthAttachment,n,r),b(i.stencilAttachment,n,r),b(i.depthStencilAttachment,n,r),i.width=a.width=n,i.height=a.height=r,A(i),a},_reglType:"framebuffer",_framebuffer:i,destroy:function(){T(i),S(i)},use:function(t){s.setFBO({framebuffer:a},t)}})}return e(s,{getFramebuffer:function(t){if("function"==typeof t&&"framebuffer"===t._reglType){var e=t._framebuffer;if(e instanceof E)return e}return null},create:I,createCube:function(t){var i=Array(6);function a(t){var r;w(i.indexOf(s.next)<0,"can not update framebuffer which is currently in use");var u,f={color:null},h=0,d=null,p="rgba",v="uint8",m=1;if("number"==typeof t)h=0|t;else if(t){w.type(t,"object","invalid arguments for framebuffer");var y=t;if("shape"in y){var g=y.shape;w(Array.isArray(g)&&g.length>=2,"invalid shape for framebuffer"),w(g[0]===g[1],"cube framebuffer must be square"),h=g[0]}else"radius"in y&&(h=0|y.radius),"width"in y?(h=0|y.width,"height"in y&&w(y.height===h,"must be square")):"height"in y&&(h=0|y.height);("color"in y||"colors"in y)&&(d=y.color||y.colors,Array.isArray(d)&&w(1===d.length||n.webgl_draw_buffers,"multiple render targets not supported")),d||("colorCount"in y&&(m=0|y.colorCount,w(m>0,"invalid color buffer count")),"colorType"in y&&(w.oneOf(y.colorType,l,"invalid color type"),v=y.colorType),"colorFormat"in y&&(p=y.colorFormat,w.oneOf(y.colorFormat,c,"invalid color format for texture"))),"depth"in y&&(f.depth=y.depth),"stencil"in y&&(f.stencil=y.stencil),"depthStencil"in y&&(f.depthStencil=y.depthStencil)}else h=1;if(d)if(Array.isArray(d))for(u=[],r=0;r<d.length;++r)u[r]=d[r];else u=[d];else{u=Array(m);var b={radius:h,format:p,type:v};for(r=0;r<m;++r)u[r]=o.createCube(b)}for(f.color=Array(u.length),r=0;r<u.length;++r){var _=u[r];w("function"==typeof _&&"textureCube"===_._reglType,"invalid cube map"),h=h||_.width,w(_.width===h&&_.height===h,"invalid cube map shape"),f.color[r]={target:34069,data:u[r]}}for(r=0;r<6;++r){for(var x=0;x<u.length;++x)f.color[x].target=34069+r;r>0&&(f.depth=i[0].depth,f.stencil=i[0].stencil,f.depthStencil=i[0].depthStencil),i[r]?i[r](f):i[r]=I(f)}return e(a,{width:h,height:h,color:u})}return a(t),e(a,{faces:i,resize:function(t){var e,n=0|t;if(w(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===a.width)return a;var o=a.color;for(e=0;e<o.length;++e)o[e].resize(n);for(e=0;e<6;++e)i[e].resize(n);return a.width=a.height=n,a},_reglType:"framebufferCube",destroy:function(){i.forEach((function(t){t.destroy()}))}})},clear:function(){L(x).forEach(T)},restore:function(){s.cur=null,s.next=null,s.dirty=!0,L(x).forEach((function(e){e.framebuffer=t.createFramebuffer(),A(e)}))}})}(o,d,b,T,A,h),R=fe(o,l,d,b,_,E,0,D,{},x,S,{elements:null,primitive:4,count:-1,offset:0,instances:-1},g,p,r),C=Nt(o,D,R.procs.poll,g,i,d,b),N=R.next,P=o.canvas,U=[],B=[],F=[],Q=[r.onDestroy],J=null;function $(){if(0===U.length)return p&&p.update(),void(J=null);J=k.next($),ct();for(var t=U.length-1;t>=0;--t){var e=U[t];e&&e(g,null,0)}o.flush(),p&&p.update()}function tt(){!J&&U.length>0&&(J=k.next($))}function et(){J&&(k.cancel($),J=null)}function nt(t){t.preventDefault(),u=!0,et(),B.forEach((function(t){t()}))}function rt(t){o.getError(),u=!1,s.restore(),S.restore(),_.restore(),T.restore(),A.restore(),D.restore(),x.restore(),p&&p.restore(),R.procs.refresh(),tt(),F.forEach((function(t){t()}))}function ot(t){function n(t,e){var n={},r={};return Object.keys(t).forEach((function(o){var i=t[o];if(I.isDynamic(i))r[o]=I.unbox(i,o);else{if(e&&Array.isArray(i))for(var a=0;a<i.length;++a)if(I.isDynamic(i[a]))return void(r[o]=I.unbox(i,o));n[o]=i}})),{dynamic:r,static:n}}w(!!t,"invalid args to regl({...})"),w.type(t,"object","invalid args to regl({...})");var r=n(t.context||{},!0),o=n(t.uniforms||{},!0),i=n(t.attributes||{},!1),a=n(function(t){var n=e({},t);function r(t){if(t in n){var e=n[t];delete n[t],Object.keys(e).forEach((function(r){n[t+"."+r]=e[r]}))}}return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),"vao"in t&&(n.vao=t.vao),n}(t),!1),s={gpuTime:0,cpuTime:0,count:0},c=R.compile(a,i,o,r,s),f=c.draw,l=c.batch,h=c.scope,d=[];return e((function(t,e){var n;if(u&&w.raise("context lost"),"function"==typeof t)return h.call(this,null,t,0);if("function"==typeof e)if("number"==typeof t)for(n=0;n<t;++n)h.call(this,null,e,n);else{if(!Array.isArray(t))return h.call(this,t,e,0);for(n=0;n<t.length;++n)h.call(this,t[n],e,n)}else if("number"==typeof t){if(t>0)return l.call(this,function(t){for(;d.length<t;)d.push(null);return d}(0|t),0|t)}else{if(!Array.isArray(t))return f.call(this,t);if(t.length)return l.call(this,t,t.length)}}),{stats:s,destroy:function(){c.destroy()}})}P&&(P.addEventListener("webglcontextlost",nt,!1),P.addEventListener("webglcontextrestored",rt,!1));var it=D.setFBO=ot({framebuffer:I.define.call(null,1,"framebuffer")});function at(t,e){var n=0;R.procs.poll();var r=e.color;r&&(o.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=16384),"depth"in e&&(o.clearDepth(+e.depth),n|=256),"stencil"in e&&(o.clearStencil(0|e.stencil),n|=1024),w(!!n,"called regl.clear with no buffer specified"),o.clear(n)}function ut(t){return w.type(t,"function","regl.frame() callback must be a function"),U.push(t),tt(),{cancel:function(){var e=he(U,t);w(e>=0,"cannot cancel a frame twice"),U[e]=function t(){var e=he(U,t);U[e]=U[U.length-1],U.length-=1,U.length<=0&&et()}}}}function st(){var t=N.viewport,e=N.scissor_box;t[0]=t[1]=e[0]=e[1]=0,g.viewportWidth=g.framebufferWidth=g.drawingBufferWidth=t[2]=e[2]=o.drawingBufferWidth,g.viewportHeight=g.framebufferHeight=g.drawingBufferHeight=t[3]=e[3]=o.drawingBufferHeight}function ct(){g.tick+=1,g.time=lt(),st(),R.procs.poll()}function ft(){T.refresh(),st(),R.procs.refresh(),p&&p.update()}function lt(){return(O()-v)/1e3}ft();var ht=e(ot,{clear:function(t){if(w("object"===a(t)&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var n=0;n<6;++n)it(e({framebuffer:t.framebuffer.faces[n]},t),at);else it(t,at);else at(0,t)},prop:I.define.bind(null,1),context:I.define.bind(null,2),this:I.define.bind(null,3),draw:ot({}),buffer:function(t){return _.create(t,34962,!1,!1)},elements:function(t){return E.create(t,!1)},texture:T.create2D,cube:T.createCube,renderbuffer:A.create,framebuffer:D.create,framebufferCube:D.createCube,vao:x.createVAO,attributes:i,frame:ut,on:function(t,e){var n;switch(w.type(e,"function","listener callback must be a function"),t){case"frame":return ut(e);case"lost":n=B;break;case"restore":n=F;break;case"destroy":n=Q;break;default:w.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(e),{cancel:function(){for(var t=0;t<n.length;++t)if(n[t]===e)return n[t]=n[n.length-1],void n.pop()}}},limits:b,hasExtension:function(t){return b.extensions.indexOf(t.toLowerCase())>=0},read:C,destroy:function(){U.length=0,et(),P&&(P.removeEventListener("webglcontextlost",nt),P.removeEventListener("webglcontextrestored",rt)),S.clear(),D.clear(),A.clear(),T.clear(),E.clear(),_.clear(),x.clear(),p&&p.clear(),Q.forEach((function(t){t()}))},_gl:o,_refresh:ft,poll:function(){ct(),p&&p.update()},now:lt,stats:h});return r.onDone(null,ht),ht}},"object"===a(e)&&void 0!==t?t.exports=i():void 0===(o="function"==typeof(r=i)?r.call(e,n,e,t):r)||(t.exports=o)},,,,,,,,function(t,e,n){var r=n(198);t.exports={Graph:r.Graph,json:n(299),alg:n(300),version:r.version}},function(t,e,n){t.exports={Graph:n(74),version:n(298)}},function(t,e,n){var r=n(104);t.exports=function(t){return r(t,4)}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(56),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():o.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(56);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(56);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(56);t.exports=function(t,e){var n=this.__data__,o=r(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}},function(t,e,n){var r=n(55);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(55),o=n(75),i=n(76);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!o||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new i(a)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(46),o=n(213),i=n(21),a=n(107),u=/^\\[object .+?Constructor\\]$/,s=Function.prototype,c=Object.prototype,f=s.toString,l=c.hasOwnProperty,h=RegExp("^"+f.call(l).replace(/[\\\\^$.*+?()[\\]{}|]/g,"\\\\$&").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(r(t)?h:u).test(a(t))}},function(t,e,n){var r=n(42),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,u=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(t){}var o=a.call(t);return r&&(e?t[u]=n:delete t[u]),o}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r,o=n(214),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(24)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(217),o=n(55),i=n(75);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},function(t,e,n){var r=n(218),o=n(219),i=n(220),a=n(221),u=n(222);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e,n){var r=n(57);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(57),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(57),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)}},function(t,e,n){var r=n(57);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var r=n(58);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e=n(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(58);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(58);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(58);t.exports=function(t,e){var n=r(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this}},function(t,e,n){var r=n(47),o=n(32);t.exports=function(t,e){return t&&r(e,o(e),t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(31),o=n(25);t.exports=function(t){return o(t)&&"[object Arguments]"==r(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(31),o=n(78),i=n(25),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!a[r(t)]}},function(t,e,n){var r=n(110)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(47),o=n(38);t.exports=function(t,e){return t&&r(e,o(e),t)}},function(t,e,n){var r=n(21),o=n(64),i=n(236),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=o(t),n=[];for(var u in t)("constructor"!=u||!e&&a.call(t,u))&&n.push(u);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var r=n(47),o=n(81);t.exports=function(t,e){return r(t,o(t),e)}},function(t,e,n){var r=n(47),o=n(115);t.exports=function(t,e){return r(t,o(t),e)}},function(t,e,n){var r=n(117),o=n(115),i=n(38);t.exports=function(t){return r(t,i,o)}},function(t,e,n){var r=n(37)(n(24),"DataView");t.exports=r},function(t,e,n){var r=n(37)(n(24),"Promise");t.exports=r},function(t,e,n){var r=n(37)(n(24),"WeakMap");t.exports=r},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(83),o=n(245),i=n(246),a=n(247),u=n(120);t.exports=function(t,e,n){var s=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new s(+t);case"[object DataView]":return o(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return u(t,n);case"[object Map]":return new s;case"[object Number]":case"[object String]":return new s(t);case"[object RegExp]":return i(t);case"[object Set]":return new s;case"[object Symbol]":return a(t)}}},function(t,e,n){var r=n(83);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(42),o=r?r.prototype:void 0,i=o?o.valueOf:void 0;t.exports=function(t){return i?Object(i.call(t)):{}}},function(t,e,n){var r=n(249),o=n(63),i=n(79),a=i&&i.isMap,u=a?o(a):r;t.exports=u},function(t,e,n){var r=n(44),o=n(25);t.exports=function(t){return o(t)&&"[object Map]"==r(t)}},function(t,e,n){var r=n(251),o=n(63),i=n(79),a=i&&i.isSet,u=a?o(a):r;t.exports=u},function(t,e,n){var r=n(44),o=n(25);t.exports=function(t){return o(t)&&"[object Set]"==r(t)}},function(t,e){t.exports=function(t){return function(e,n,r){for(var o=-1,i=Object(e),a=r(e),u=a.length;u--;){var s=a[t?u:++o];if(!1===n(i[s],s,i))break}return e}}},function(t,e,n){var r=n(28);t.exports=function(t,e){return function(n,o){if(null==n)return n;if(!r(n))return t(n,o);for(var i=n.length,a=e?i:-1,u=Object(n);(e?a--:++a<i)&&!1!==o(u[a],a,u););return n}}},function(t,e,n){var r=n(66);t.exports=function(t,e){var n=[];return r(t,(function(t,r,o){e(t,r,o)&&n.push(t)})),n}},function(t,e,n){var r=n(256),o=n(264),i=n(132);t.exports=function(t){var e=o(t);return 1==e.length&&e[0][2]?i(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(54),o=n(127);t.exports=function(t,e,n,i){var a=n.length,u=a,s=!i;if(null==t)return!u;for(t=Object(t);a--;){var c=n[a];if(s&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++a<u;){var f=(c=n[a])[0],l=t[f],h=c[1];if(s&&c[2]){if(void 0===l&&!(f in t))return!1}else{var d=new r;if(i)var p=i(l,h,f,t,e,d);if(!(void 0===p?o(h,l,3,i,d):p))return!1}}return!0}},function(t,e,n){var r=n(54),o=n(128),i=n(261),a=n(263),u=n(44),s=n(13),c=n(43),f=n(22),l="[object Object]",h=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,d,p,v){var m=s(t),y=s(e),g=m?"[object Array]":u(t),b=y?"[object Array]":u(e),_=(g="[object Arguments]"==g?l:g)==l,x=(b="[object Arguments]"==b?l:b)==l,w=g==b;if(w&&c(t)){if(!c(e))return!1;m=!0,_=!1}if(w&&!_)return v||(v=new r),m||f(t)?o(t,e,n,d,p,v):i(t,e,g,n,d,p,v);if(!(1&n)){var E=_&&h.call(t,"__wrapped__"),S=x&&h.call(e,"__wrapped__");if(E||S){var T=E?t.value():t,A=S?e.value():e;return v||(v=new r),p(T,A,n,d,v)}}return!!w&&(v||(v=new r),a(t,e,n,d,p,v))}},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e,n){var r=n(42),o=n(119),i=n(41),a=n(128),u=n(262),s=n(87),c=r?r.prototype:void 0,f=c?c.valueOf:void 0;t.exports=function(t,e,n,r,c,l,h){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!l(new o(t),new o(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var d=u;case"[object Set]":var p=1&r;if(d||(d=s),t.size!=e.size&&!p)return!1;var v=h.get(t);if(v)return v==e;r|=2,h.set(t,e);var m=a(d(t),d(e),r,c,l,h);return h.delete(t),m;case"[object Symbol]":if(f)return f.call(t)==f.call(e)}return!1}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},function(t,e,n){var r=n(116),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,i,a,u){var s=1&n,c=r(t),f=c.length;if(f!=r(e).length&&!s)return!1;for(var l=f;l--;){var h=c[l];if(!(s?h in e:o.call(e,h)))return!1}var d=u.get(t),p=u.get(e);if(d&&p)return d==e&&p==t;var v=!0;u.set(t,e),u.set(e,t);for(var m=s;++l<f;){var y=t[h=c[l]],g=e[h];if(i)var b=s?i(g,y,h,e,t,u):i(y,g,h,t,e,u);if(!(void 0===b?y===g||a(y,g,n,i,u):b)){v=!1;break}m||(m="constructor"==h)}if(v&&!m){var _=t.constructor,x=e.constructor;_==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x||(v=!1)}return u.delete(t),u.delete(e),v}},function(t,e,n){var r=n(131),o=n(32);t.exports=function(t){for(var e=o(t),n=e.length;n--;){var i=e[n],a=t[i];e[n]=[i,a,r(a)]}return e}},function(t,e,n){var r=n(127),o=n(266),i=n(134),a=n(88),u=n(131),s=n(132),c=n(49);t.exports=function(t,e){return a(t)&&u(e)?s(c(t),e):function(n){var a=o(n,t);return void 0===a&&a===e?i(n,t):r(e,a,3)}}},function(t,e,n){var r=n(67);t.exports=function(t,e,n){var o=null==t?void 0:r(t,e);return void 0===o?n:o}},function(t,e,n){var r=n(268),o=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,i=/\\\\(\\\\)?/g,a=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,(function(t,n,r,o){e.push(r?o.replace(i,"$1"):n||t)})),e}));t.exports=a},function(t,e,n){var r=n(269);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var r=n(76);function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(o.Cache||r),n}o.Cache=r,t.exports=o},function(t,e,n){var r=n(42),o=n(69),i=n(13),a=n(45),u=r?r.prototype:void 0,s=u?u.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(a(e))return s?s.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(136),o=n(273),i=n(88),a=n(49);t.exports=function(t){return i(t)?r(a(t)):o(t)}},function(t,e,n){var r=n(67);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t,e){return null!=t&&n.call(t,e)}},function(t,e,n){var r=n(80),o=n(44),i=n(48),a=n(13),u=n(28),s=n(43),c=n(64),f=n(22),l=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(u(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||s(t)||f(t)||i(t)))return!t.length;var e=o(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(c(t))return!r(t).length;for(var n in t)if(l.call(t,n))return!1;return!0}},function(t,e){t.exports=function(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}},function(t,e){t.exports=function(t,e,n,r,o){return o(t,(function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)})),n}},function(t,e,n){var r=n(80),o=n(44),i=n(28),a=n(279),u=n(280);t.exports=function(t){if(null==t)return 0;if(i(t))return a(t)?u(t):t.length;var e=o(t);return"[object Map]"==e||"[object Set]"==e?t.size:r(t).length}},function(t,e,n){var r=n(31),o=n(13),i=n(25);t.exports=function(t){return"string"==typeof t||!o(t)&&i(t)&&"[object String]"==r(t)}},function(t,e,n){var r=n(281),o=n(282),i=n(283);t.exports=function(t){return o(t)?i(t):r(t)}},function(t,e,n){var r=n(136)("length");t.exports=r},function(t,e){var n=RegExp("[\\\\u200d\\\\ud800-\\\\udfff\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe2f\\\\u20d0-\\\\u20ff\\\\ufe0e\\\\ufe0f]");t.exports=function(t){return n.test(t)}},function(t,e){var n="[\\\\ud800-\\\\udfff]",r="[\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe2f\\\\u20d0-\\\\u20ff]",o="\\\\ud83c[\\\\udffb-\\\\udfff]",i="[^\\\\ud800-\\\\udfff]",a="(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}",u="[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]",s="(?:"+r+"|"+o+")"+"?",c="[\\\\ufe0e\\\\ufe0f]?"+s+("(?:\\\\u200d(?:"+[i,a,u].join("|")+")[\\\\ufe0e\\\\ufe0f]?"+s+")*"),f="(?:"+[i+r+"?",r,a,u,n].join("|")+")",l=RegExp(o+"(?="+o+")|"+f+c,"g");t.exports=function(t){for(var e=l.lastIndex=0;l.test(t);)++e;return e}},function(t,e,n){var r=n(77),o=n(122),i=n(85),a=n(29),u=n(65),s=n(13),c=n(43),f=n(46),l=n(21),h=n(22);t.exports=function(t,e,n){var d=s(t),p=d||c(t)||h(t);if(e=a(e,4),null==n){var v=t&&t.constructor;n=p?d?new v:[]:l(t)&&f(v)?o(u(t)):{}}return(p?r:i)(t,(function(t,r,o){return e(n,t,r,o)})),n}},function(t,e,n){var r=n(89),o=n(70),i=n(144),a=n(146),u=o((function(t){return i(r(t,1,a,!0))}));t.exports=u},function(t,e,n){var r=n(42),o=n(48),i=n(13),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return i(t)||o(t)||!!(a&&t&&t[a])}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(84),o=n(108),i=n(39),a=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:i;t.exports=a},function(t,e){var n=Date.now;t.exports=function(t){var e=0,r=0;return function(){var o=n(),i=16-(o-r);if(r=o,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var r=n(291);t.exports=function(t,e){return!!(null==t?0:t.length)&&r(t,e,0)>-1}},function(t,e,n){var r=n(145),o=n(292),i=n(293);t.exports=function(t,e,n){return e==e?i(t,e,n):r(t,o,n)}},function(t,e){t.exports=function(t){return t!=t}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}},function(t,e){t.exports=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}},function(t,e,n){var r=n(118),o=n(296),i=n(87),a=r&&1/i(new r([,-0]))[1]==1/0?function(t){return new r(t)}:o;t.exports=a},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(69);t.exports=function(t,e){return r(e,(function(e){return t[e]}))}},function(t,e){t.exports="2.1.8"},function(t,e,n){var r=n(20),o=n(74);function i(t){return r.map(t.nodes(),(function(e){var n=t.node(e),o=t.parent(e),i={v:e};return r.isUndefined(n)||(i.value=n),r.isUndefined(o)||(i.parent=o),i}))}function a(t){return r.map(t.edges(),(function(e){var n=t.edge(e),o={v:e.v,w:e.w};return r.isUndefined(e.name)||(o.name=e.name),r.isUndefined(n)||(o.value=n),o}))}t.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:i(t),edges:a(t)};r.isUndefined(t.graph())||(e.value=r.clone(t.graph()));return e},read:function(t){var e=new o(t.options).setGraph(t.value);return r.each(t.nodes,(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)})),r.each(t.edges,(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)})),e}}},function(t,e,n){t.exports={components:n(301),dijkstra:n(148),dijkstraAll:n(302),findCycles:n(303),floydWarshall:n(304),isAcyclic:n(305),postorder:n(306),preorder:n(307),prim:n(308),tarjan:n(150),topsort:n(151)}},function(t,e,n){var r=n(20);t.exports=function(t){var e,n={},o=[];function i(o){r.has(n,o)||(n[o]=!0,e.push(o),r.each(t.successors(o),i),r.each(t.predecessors(o),i))}return r.each(t.nodes(),(function(t){e=[],i(t),e.length&&o.push(e)})),o}},function(t,e,n){var r=n(148),o=n(20);t.exports=function(t,e,n){return o.transform(t.nodes(),(function(o,i){o[i]=r(t,i,e,n)}),{})}},function(t,e,n){var r=n(20),o=n(150);t.exports=function(t){return r.filter(o(t),(function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))}},function(t,e,n){var r=n(20);t.exports=function(t,e,n){return function(t,e,n){var r={},o=t.nodes();return o.forEach((function(t){r[t]={},r[t][t]={distance:0},o.forEach((function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})})),n(t).forEach((function(n){var o=n.v===t?n.w:n.v,i=e(n);r[t][o]={distance:i,predecessor:t}}))})),o.forEach((function(t){var e=r[t];o.forEach((function(n){var i=r[n];o.forEach((function(n){var r=i[t],o=e[n],a=i[n],u=r.distance+o.distance;u<a.distance&&(a.distance=u,a.predecessor=o.predecessor)}))}))})),r}(t,e||o,n||function(e){return t.outEdges(e)})};var o=r.constant(1)},function(t,e,n){var r=n(151);t.exports=function(t){try{r(t)}catch(t){if(t instanceof r.CycleException)return!1;throw t}return!0}},function(t,e,n){var r=n(152);t.exports=function(t,e){return r(t,e,"post")}},function(t,e,n){var r=n(152);t.exports=function(t,e){return r(t,e,"pre")}},function(t,e,n){var r=n(20),o=n(74),i=n(149);t.exports=function(t,e){var n,a=new o,u={},s=new i;function c(t){var r=t.v===n?t.w:t.v,o=s.priority(r);if(void 0!==o){var i=e(t);i<o&&(u[r]=n,s.decrease(r,i))}}if(0===t.nodeCount())return a;r.each(t.nodes(),(function(t){s.add(t,Number.POSITIVE_INFINITY),a.setNode(t)})),s.decrease(t.nodes()[0],0);var f=!1;for(;s.size()>0;){if(n=s.removeMin(),r.has(u,n))a.setEdge(n,u[n]);else{if(f)throw new Error("Input graph is not connected: "+t);f=!0}t.nodeEdges(n).forEach(c)}return a}},function(t,e,n){"use strict";var r=n(11),o=n(346),i=n(349),a=n(350),u=n(18).normalizeRanks,s=n(352),c=n(18).removeEmptyRanks,f=n(353),l=n(354),h=n(355),d=n(356),p=n(365),v=n(18),m=n(23).Graph;t.exports=function(t,e){var n=e&&e.debugTiming?v.time:v.notime;n("layout",(function(){var e=n("  buildLayoutGraph",(function(){return function(t){var e=new m({multigraph:!0,compound:!0}),n=A(t.graph());return e.setGraph(r.merge({},g,T(n,y),r.pick(n,b))),r.forEach(t.nodes(),(function(n){var o=A(t.node(n));e.setNode(n,r.defaults(T(o,_),x)),e.setParent(n,t.parent(n))})),r.forEach(t.edges(),(function(n){var o=A(t.edge(n));e.setEdge(n,r.merge({},E,T(o,w),r.pick(o,S)))})),e}(t)}));n("  runLayout",(function(){!function(t,e){e("    makeSpaceForEdgeLabels",(function(){!function(t){var e=t.graph();e.ranksep/=2,r.forEach(t.edges(),(function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(t)})),e("    removeSelfEdges",(function(){!function(t){r.forEach(t.edges(),(function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}}))}(t)})),e("    acyclic",(function(){o.run(t)})),e("    nestingGraph.run",(function(){f.run(t)})),e("    rank",(function(){a(v.asNonCompoundGraph(t))})),e("    injectEdgeLabelProxies",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),o={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e:e};v.addDummyNode(t,"edge-proxy",o,"_ep")}}))}(t)})),e("    removeEmptyRanks",(function(){c(t)})),e("    nestingGraph.cleanup",(function(){f.cleanup(t)})),e("    normalizeRanks",(function(){u(t)})),e("    assignRankMinMax",(function(){!function(t){var e=0;r.forEach(t.nodes(),(function(n){var o=t.node(n);o.borderTop&&(o.minRank=t.node(o.borderTop).rank,o.maxRank=t.node(o.borderBottom).rank,e=r.max(e,o.maxRank))})),t.graph().maxRank=e}(t)})),e("    removeEdgeLabelProxies",(function(){!function(t){r.forEach(t.nodes(),(function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))}))}(t)})),e("    normalize.run",(function(){i.run(t)})),e("    parentDummyChains",(function(){s(t)})),e("    addBorderSegments",(function(){l(t)})),e("    order",(function(){d(t)})),e("    insertSelfEdges",(function(){!function(t){var e=v.buildLayerMatrix(t);r.forEach(e,(function(e){var n=0;r.forEach(e,(function(e,o){var i=t.node(e);i.order=o+n,r.forEach(i.selfEdges,(function(e){v.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:o+ ++n,e:e.e,label:e.label},"_se")})),delete i.selfEdges}))}))}(t)})),e("    adjustCoordinateSystem",(function(){h.adjust(t)})),e("    position",(function(){p(t)})),e("    positionSelfEdges",(function(){!function(t){r.forEach(t.nodes(),(function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),o=r.x+r.width/2,i=r.y,a=n.x-o,u=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:o+2*a/3,y:i-u},{x:o+5*a/6,y:i-u},{x:o+a,y:i},{x:o+5*a/6,y:i+u},{x:o+2*a/3,y:i+u}],n.label.x=n.x,n.label.y=n.y}}))}(t)})),e("    removeBorderNodes",(function(){!function(t){r.forEach(t.nodes(),(function(e){if(t.children(e).length){var n=t.node(e),o=t.node(n.borderTop),i=t.node(n.borderBottom),a=t.node(r.last(n.borderLeft)),u=t.node(r.last(n.borderRight));n.width=Math.abs(u.x-a.x),n.height=Math.abs(i.y-o.y),n.x=a.x+n.width/2,n.y=o.y+n.height/2}})),r.forEach(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))}(t)})),e("    normalize.undo",(function(){i.undo(t)})),e("    fixupEdgeLabelCoords",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(t)})),e("    undoCoordinateSystem",(function(){h.undo(t)})),e("    translateGraph",(function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,o=Number.POSITIVE_INFINITY,i=0,a=t.graph(),u=a.marginx||0,s=a.marginy||0;function c(t){var r=t.x,a=t.y,u=t.width,s=t.height;e=Math.min(e,r-u/2),n=Math.max(n,r+u/2),o=Math.min(o,a-s/2),i=Math.max(i,a+s/2)}r.forEach(t.nodes(),(function(e){c(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.has(n,"x")&&c(n)})),e-=u,o-=s,r.forEach(t.nodes(),(function(n){var r=t.node(n);r.x-=e,r.y-=o})),r.forEach(t.edges(),(function(n){var i=t.edge(n);r.forEach(i.points,(function(t){t.x-=e,t.y-=o})),r.has(i,"x")&&(i.x-=e),r.has(i,"y")&&(i.y-=o)})),a.width=n-e+u,a.height=i-o+s}(t)})),e("    assignNodeIntersects",(function(){!function(t){r.forEach(t.edges(),(function(e){var n,r,o=t.edge(e),i=t.node(e.v),a=t.node(e.w);o.points?(n=o.points[0],r=o.points[o.points.length-1]):(o.points=[],n=a,r=i),o.points.unshift(v.intersectRect(i,n)),o.points.push(v.intersectRect(a,r))}))}(t)})),e("    reversePoints",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);n.reversed&&n.points.reverse()}))}(t)})),e("    acyclic.undo",(function(){o.undo(t)}))}(e,n)})),n("  updateInputGraph",(function(){!function(t,e){r.forEach(t.nodes(),(function(n){var r=t.node(n),o=e.node(n);r&&(r.x=o.x,r.y=o.y,e.children(n).length&&(r.width=o.width,r.height=o.height))})),r.forEach(t.edges(),(function(n){var o=t.edge(n),i=e.edge(n);o.points=i.points,r.has(i,"x")&&(o.x=i.x,o.y=i.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)}))}))};var y=["nodesep","edgesep","ranksep","marginx","marginy"],g={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],_=["width","height"],x={width:0,height:0},w=["minlen","weight","width","height","labeloffset"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},S=["labelpos"];function T(t,e){return r.mapValues(r.pick(t,e),Number)}function A(t){var e={};return r.forEach(t,(function(t,n){e[n.toLowerCase()]=t})),e}},function(t,e,n){var r=n(104);t.exports=function(t){return r(t,5)}},function(t,e,n){var r=n(70),o=n(41),i=n(71),a=n(38),u=Object.prototype,s=u.hasOwnProperty,c=r((function(t,e){t=Object(t);var n=-1,r=e.length,c=r>2?e[2]:void 0;for(c&&i(e[0],e[1],c)&&(r=1);++n<r;)for(var f=e[n],l=a(f),h=-1,d=l.length;++h<d;){var p=l[h],v=t[p];(void 0===v||o(v,u[p])&&!s.call(t,p))&&(t[p]=f[p])}return t}));t.exports=c},function(t,e,n){var r=n(313)(n(314));t.exports=r},function(t,e,n){var r=n(29),o=n(28),i=n(32);t.exports=function(t){return function(e,n,a){var u=Object(e);if(!o(e)){var s=r(n,3);e=i(e),n=function(t){return s(u[t],t,u)}}var c=t(e,n,a);return c>-1?u[s?e[c]:c]:void 0}}},function(t,e,n){var r=n(145),o=n(29),i=n(315),a=Math.max;t.exports=function(t,e,n){var u=null==t?0:t.length;if(!u)return-1;var s=null==n?0:i(n);return s<0&&(s=a(u+s,0)),r(t,o(e,3),s)}},function(t,e,n){var r=n(153);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},function(t,e,n){var r=n(21),o=n(45),i=/^\\s+|\\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var n=u.test(t);return n||s.test(t)?c(t.slice(2),n?2:8):a.test(t)?NaN:+t}},function(t,e,n){var r=n(86),o=n(125),i=n(38);t.exports=function(t,e){return null==t?t:r(t,o(e),i)}},function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},function(t,e,n){var r=n(60),o=n(85),i=n(29);t.exports=function(t,e){var n={};return e=i(e,3),o(t,(function(t,o,i){r(n,o,e(t,o,i))})),n}},function(t,e,n){var r=n(90),o=n(321),i=n(39);t.exports=function(t){return t&&t.length?r(t,i,o):void 0}},function(t,e){t.exports=function(t,e){return t>e}},function(t,e,n){var r=n(323),o=n(326)((function(t,e,n){r(t,e,n)}));t.exports=o},function(t,e,n){var r=n(54),o=n(155),i=n(86),a=n(324),u=n(21),s=n(38),c=n(156);t.exports=function t(e,n,f,l,h){e!==n&&i(n,(function(i,s){if(h||(h=new r),u(i))a(e,n,s,f,t,l,h);else{var d=l?l(c(e,s),i,s+"",e,n,h):void 0;void 0===d&&(d=i),o(e,s,d)}}),s)}},function(t,e,n){var r=n(155),o=n(111),i=n(120),a=n(112),u=n(121),s=n(48),c=n(13),f=n(146),l=n(43),h=n(46),d=n(21),p=n(101),v=n(22),m=n(156),y=n(325);t.exports=function(t,e,n,g,b,_,x){var w=m(t,n),E=m(e,n),S=x.get(E);if(S)r(t,n,S);else{var T=_?_(w,E,n+"",t,e,x):void 0,A=void 0===T;if(A){var I=c(E),k=!I&&l(E),O=!I&&!k&&v(E);T=E,I||k||O?c(w)?T=w:f(w)?T=a(w):k?(A=!1,T=o(E,!0)):O?(A=!1,T=i(E,!0)):T=[]:p(E)||s(E)?(T=w,s(w)?T=y(w):d(w)&&!h(w)||(T=u(E))):A=!1}A&&(x.set(E,T),b(T,E,g,_,x),x.delete(E)),r(t,n,T)}}},function(t,e,n){var r=n(47),o=n(38);t.exports=function(t){return r(t,o(t))}},function(t,e,n){var r=n(70),o=n(71);t.exports=function(t){return r((function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,u=i>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(i--,a):void 0,u&&o(n[0],n[1],u)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,a)}return e}))}},function(t,e,n){var r=n(90),o=n(157),i=n(39);t.exports=function(t){return t&&t.length?r(t,i,o):void 0}},function(t,e,n){var r=n(90),o=n(29),i=n(157);t.exports=function(t,e){return t&&t.length?r(t,o(e,2),i):void 0}},function(t,e,n){var r=n(24);t.exports=function(){return r.Date.now()}},function(t,e,n){var r=n(331),o=n(334)((function(t,e){return null==t?{}:r(t,e)}));t.exports=o},function(t,e,n){var r=n(332),o=n(134);t.exports=function(t,e){return r(t,e,(function(e,n){return o(t,n)}))}},function(t,e,n){var r=n(67),o=n(333),i=n(68);t.exports=function(t,e,n){for(var a=-1,u=e.length,s={};++a<u;){var c=e[a],f=r(t,c);n(f,c)&&o(s,i(c,t),f)}return s}},function(t,e,n){var r=n(59),o=n(68),i=n(62),a=n(21),u=n(49);t.exports=function(t,e,n,s){if(!a(t))return t;for(var c=-1,f=(e=o(e,t)).length,l=f-1,h=t;null!=h&&++c<f;){var d=u(e[c]),p=n;if("__proto__"===d||"constructor"===d||"prototype"===d)return t;if(c!=l){var v=h[d];void 0===(p=s?s(v,d,h):void 0)&&(p=a(v)?v:i(e[c+1])?[]:{})}r(h,d,p),h=h[d]}return t}},function(t,e,n){var r=n(154),o=n(142),i=n(143);t.exports=function(t){return i(o(t,void 0,r),t+"")}},function(t,e,n){var r=n(336)();t.exports=r},function(t,e,n){var r=n(337),o=n(71),i=n(153);t.exports=function(t){return function(e,n,a){return a&&"number"!=typeof a&&o(e,n,a)&&(n=a=void 0),e=i(e),void 0===n?(n=e,e=0):n=i(n),a=void 0===a?e<n?1:-1:i(a),r(e,n,a,t)}}},function(t,e){var n=Math.ceil,r=Math.max;t.exports=function(t,e,o,i){for(var a=-1,u=r(n((e-t)/(o||1)),0),s=Array(u);u--;)s[i?u:++a]=t,t+=o;return s}},function(t,e,n){var r=n(89),o=n(339),i=n(70),a=n(71),u=i((function(t,e){if(null==t)return[];var n=e.length;return n>1&&a(t,e[0],e[1])?e=[]:n>2&&a(e[0],e[1],e[2])&&(e=[e[0]]),o(t,r(e,1),[])}));t.exports=u},function(t,e,n){var r=n(69),o=n(67),i=n(29),a=n(140),u=n(340),s=n(63),c=n(341),f=n(39),l=n(13);t.exports=function(t,e,n){e=e.length?r(e,(function(t){return l(t)?function(e){return o(e,1===t.length?t[0]:t)}:t})):[f];var h=-1;e=r(e,s(i));var d=a(t,(function(t,n,o){return{criteria:r(e,(function(e){return e(t)})),index:++h,value:t}}));return u(d,(function(t,e){return c(t,e,n)}))}},function(t,e){t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},function(t,e,n){var r=n(342);t.exports=function(t,e,n){for(var o=-1,i=t.criteria,a=e.criteria,u=i.length,s=n.length;++o<u;){var c=r(i[o],a[o]);if(c)return o>=s?c:c*("desc"==n[o]?-1:1)}return t.index-e.index}},function(t,e,n){var r=n(45);t.exports=function(t,e){if(t!==e){var n=void 0!==t,o=null===t,i=t==t,a=r(t),u=void 0!==e,s=null===e,c=e==e,f=r(e);if(!s&&!f&&!a&&t>e||a&&u&&c&&!s&&!f||o&&u&&c||!n&&c||!i)return 1;if(!o&&!a&&!f&&t<e||f&&n&&i&&!o&&!a||s&&n&&i||!u&&i||!c)return-1}return 0}},function(t,e,n){var r=n(133),o=0;t.exports=function(t){var e=++o;return r(t)+e}},function(t,e,n){var r=n(59),o=n(345);t.exports=function(t,e){return o(t||[],e||[],r)}},function(t,e){t.exports=function(t,e,n){for(var r=-1,o=t.length,i=e.length,a={};++r<o;){var u=r<i?e[r]:void 0;n(a,t[r],u)}return a}},function(t,e,n){"use strict";var r=n(11),o=n(347);t.exports={run:function(t){var e="greedy"===t.graph().acyclicer?o(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},o={};function i(a){r.has(o,a)||(o[a]=!0,n[a]=!0,r.forEach(t.outEdges(a),(function(t){r.has(n,t.w)?e.push(t):i(t.w)})),delete n[a])}return r.forEach(t.nodes(),i),e}(t);r.forEach(e,(function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,r.uniqueId("rev"))}))},undo:function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}}))}}},function(t,e,n){var r=n(11),o=n(23).Graph,i=n(348);t.exports=function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new o,a=0,u=0;r.forEach(t.nodes(),(function(t){n.setNode(t,{v:t,in:0,out:0})})),r.forEach(t.edges(),(function(t){var r=n.edge(t.v,t.w)||0,o=e(t),i=r+o;n.setEdge(t.v,t.w,i),u=Math.max(u,n.node(t.v).out+=o),a=Math.max(a,n.node(t.w).in+=o)}));var c=r.range(u+a+3).map((function(){return new i})),f=a+1;return r.forEach(n.nodes(),(function(t){s(c,f,n.node(t))})),{graph:n,buckets:c,zeroIdx:f}}(t,e||a),c=function(t,e,n){var r,o=[],i=e[e.length-1],a=e[0];for(;t.nodeCount();){for(;r=a.dequeue();)u(t,e,n,r);for(;r=i.dequeue();)u(t,e,n,r);if(t.nodeCount())for(var s=e.length-2;s>0;--s)if(r=e[s].dequeue()){o=o.concat(u(t,e,n,r,!0));break}}return o}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(c,(function(e){return t.outEdges(e.v,e.w)})),!0)};var a=r.constant(1);function u(t,e,n,o,i){var a=i?[]:void 0;return r.forEach(t.inEdges(o.v),(function(r){var o=t.edge(r),u=t.node(r.v);i&&a.push({v:r.v,w:r.w}),u.out-=o,s(e,n,u)})),r.forEach(t.outEdges(o.v),(function(r){var o=t.edge(r),i=r.w,a=t.node(i);a.in-=o,s(e,n,a)})),t.removeNode(o.v),a}function s(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}},function(t,e){function n(){var t={};t._next=t._prev=t,this._sentinel=t}function r(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function o(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=n,n.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return r(e),e},n.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&r(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},n.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,o)),n=n._prev;return"["+t.join(", ")+"]"}},function(t,e,n){"use strict";var r=n(11),o=n(18);t.exports={run:function(t){t.graph().dummyChains=[],r.forEach(t.edges(),(function(e){!function(t,e){var n,r,i,a=e.v,u=t.node(a).rank,s=e.w,c=t.node(s).rank,f=e.name,l=t.edge(e),h=l.labelRank;if(c===u+1)return;for(t.removeEdge(e),i=0,++u;u<c;++i,++u)l.points=[],r={width:0,height:0,edgeLabel:l,edgeObj:e,rank:u},n=o.addDummyNode(t,"edge",r,"_d"),u===h&&(r.width=l.width,r.height=l.height,r.dummy="edge-label",r.labelpos=l.labelpos),t.setEdge(a,n,{weight:l.weight},f),0===i&&t.graph().dummyChains.push(n),a=n;t.setEdge(a,s,{weight:l.weight},f)}(t,e)}))},undo:function(t){r.forEach(t.graph().dummyChains,(function(e){var n,r=t.node(e),o=r.edgeLabel;for(t.setEdge(r.edgeObj,o);r.dummy;)n=t.successors(e)[0],t.removeNode(e),o.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(o.x=r.x,o.y=r.y,o.width=r.width,o.height=r.height),e=n,r=t.node(e)}))}}},function(t,e,n){"use strict";var r=n(72).longestPath,o=n(158),i=n(351);t.exports=function(t){switch(t.graph().ranker){case"network-simplex":u(t);break;case"tight-tree":!function(t){r(t),o(t)}(t);break;case"longest-path":a(t);break;default:u(t)}};var a=r;function u(t){i(t)}},function(t,e,n){"use strict";var r=n(11),o=n(158),i=n(72).slack,a=n(72).longestPath,u=n(23).alg.preorder,s=n(23).alg.postorder,c=n(18).simplify;function f(t){t=c(t),a(t);var e,n=o(t);for(d(n),l(n,t);e=v(n);)y(n,t,e,m(n,t,e))}function l(t,e){var n=s(t,t.nodes());n=n.slice(0,n.length-1),r.forEach(n,(function(n){!function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=h(t,e,n)}(t,e,n)}))}function h(t,e,n){var o=t.node(n).parent,i=!0,a=e.edge(n,o),u=0;return a||(i=!1,a=e.edge(o,n)),u=a.weight,r.forEach(e.nodeEdges(n),(function(r){var a,s,c=r.v===n,f=c?r.w:r.v;if(f!==o){var l=c===i,h=e.edge(r).weight;if(u+=l?h:-h,a=n,s=f,t.hasEdge(a,s)){var d=t.edge(n,f).cutvalue;u+=l?-d:d}}})),u}function d(t,e){arguments.length<2&&(e=t.nodes()[0]),p(t,{},1,e)}function p(t,e,n,o,i){var a=n,u=t.node(o);return e[o]=!0,r.forEach(t.neighbors(o),(function(i){r.has(e,i)||(n=p(t,e,n,i,o))})),u.low=a,u.lim=n++,i?u.parent=i:delete u.parent,n}function v(t){return r.find(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function m(t,e,n){var o=n.v,a=n.w;e.hasEdge(o,a)||(o=n.w,a=n.v);var u=t.node(o),s=t.node(a),c=u,f=!1;u.lim>s.lim&&(c=s,f=!0);var l=r.filter(e.edges(),(function(e){return f===g(t,t.node(e.v),c)&&f!==g(t,t.node(e.w),c)}));return r.minBy(l,(function(t){return i(e,t)}))}function y(t,e,n,o){var i=n.v,a=n.w;t.removeEdge(i,a),t.setEdge(o.v,o.w,{}),d(t),l(t,e),function(t,e){var n=r.find(t.nodes(),(function(t){return!e.node(t).parent})),o=u(t,n);o=o.slice(1),r.forEach(o,(function(n){var r=t.node(n).parent,o=e.edge(n,r),i=!1;o||(o=e.edge(r,n),i=!0),e.node(n).rank=e.node(r).rank+(i?o.minlen:-o.minlen)}))}(t,e)}function g(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}t.exports=f,f.initLowLimValues=d,f.initCutValues=l,f.calcCutValue=h,f.leaveEdge=v,f.enterEdge=m,f.exchangeEdges=y},function(t,e,n){var r=n(11);t.exports=function(t){var e=function(t){var e={},n=0;function o(i){var a=n;r.forEach(t.children(i),o),e[i]={low:a,lim:n++}}return r.forEach(t.children(),o),e}(t);r.forEach(t.graph().dummyChains,(function(n){for(var r=t.node(n),o=r.edgeObj,i=function(t,e,n,r){var o,i,a=[],u=[],s=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);o=n;do{o=t.parent(o),a.push(o)}while(o&&(e[o].low>s||c>e[o].lim));i=o,o=r;for(;(o=t.parent(o))!==i;)u.push(o);return{path:a.concat(u.reverse()),lca:i}}(t,e,o.v,o.w),a=i.path,u=i.lca,s=0,c=a[s],f=!0;n!==o.w;){if(r=t.node(n),f){for(;(c=a[s])!==u&&t.node(c).maxRank<r.rank;)s++;c===u&&(f=!1)}if(!f){for(;s<a.length-1&&t.node(c=a[s+1]).minRank<=r.rank;)s++;c=a[s]}t.setParent(n,c),n=t.successors(n)[0]}}))}},function(t,e,n){var r=n(11),o=n(18);t.exports={run:function(t){var e=o.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};return r.forEach(t.children(),(function(n){!function n(o,i){var a=t.children(o);a&&a.length&&r.forEach(a,(function(t){n(t,i+1)}));e[o]=i}(n,1)})),e}(t),i=r.max(r.values(n))-1,a=2*i+1;t.graph().nestingRoot=e,r.forEach(t.edges(),(function(e){t.edge(e).minlen*=a}));var u=function(t){return r.reduce(t.edges(),(function(e,n){return e+t.edge(n).weight}),0)}(t)+1;r.forEach(t.children(),(function(s){!function t(e,n,i,a,u,s,c){var f=e.children(c);if(!f.length)return void(c!==n&&e.setEdge(n,c,{weight:0,minlen:i}));var l=o.addBorderNode(e,"_bt"),h=o.addBorderNode(e,"_bb"),d=e.node(c);e.setParent(l,c),d.borderTop=l,e.setParent(h,c),d.borderBottom=h,r.forEach(f,(function(r){t(e,n,i,a,u,s,r);var o=e.node(r),f=o.borderTop?o.borderTop:r,d=o.borderBottom?o.borderBottom:r,p=o.borderTop?a:2*a,v=f!==d?1:u-s[c]+1;e.setEdge(l,f,{weight:p,minlen:v,nestingEdge:!0}),e.setEdge(d,h,{weight:p,minlen:v,nestingEdge:!0})})),e.parent(c)||e.setEdge(n,l,{weight:0,minlen:u+s[c]})}(t,e,a,u,i,n,s)})),t.graph().nodeRankFactor=a},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,r.forEach(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))}}},function(t,e,n){var r=n(11),o=n(18);function i(t,e,n,r,i,a){var u={width:0,height:0,rank:a,borderType:e},s=i[e][a-1],c=o.addDummyNode(t,"border",u,n);i[e][a]=c,t.setParent(c,r),s&&t.setEdge(s,c,{weight:1})}t.exports=function(t){r.forEach(t.children(),(function e(n){var o=t.children(n),a=t.node(n);if(o.length&&r.forEach(o,e),r.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var u=a.minRank,s=a.maxRank+1;u<s;++u)i(t,"borderLeft","_bl",n,a,u),i(t,"borderRight","_br",n,a,u)}}))}},function(t,e,n){"use strict";var r=n(11);function o(t){r.forEach(t.nodes(),(function(e){i(t.node(e))})),r.forEach(t.edges(),(function(e){i(t.edge(e))}))}function i(t){var e=t.width;t.width=t.height,t.height=e}function a(t){t.y=-t.y}function u(t){var e=t.x;t.x=t.y,t.y=e}t.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||o(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){r.forEach(t.nodes(),(function(e){a(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.forEach(n.points,a),r.has(n,"y")&&a(n)}))}(t);"lr"!==e&&"rl"!==e||(!function(t){r.forEach(t.nodes(),(function(e){u(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.forEach(n.points,u),r.has(n,"x")&&u(n)}))}(t),o(t))}}},function(t,e,n){"use strict";var r=n(11),o=n(357),i=n(358),a=n(359),u=n(363),s=n(364),c=n(23).Graph,f=n(18);function l(t,e,n){return r.map(e,(function(e){return u(t,e,n)}))}function h(t,e){var n=new c;r.forEach(t,(function(t){var o=t.graph().root,i=a(t,o,n,e);r.forEach(i.vs,(function(e,n){t.node(e).order=n})),s(t,n,i.vs)}))}function d(t,e){r.forEach(e,(function(e){r.forEach(e,(function(e,n){t.node(e).order=n}))}))}t.exports=function(t){var e=f.maxRank(t),n=l(t,r.range(1,e+1),"inEdges"),a=l(t,r.range(e-1,-1,-1),"outEdges"),u=o(t);d(t,u);for(var s,c=Number.POSITIVE_INFINITY,p=0,v=0;v<4;++p,++v){h(p%2?n:a,p%4>=2),u=f.buildLayerMatrix(t);var m=i(t,u);m<c&&(v=0,s=r.cloneDeep(u),c=m)}d(t,s)}},function(t,e,n){"use strict";var r=n(11);t.exports=function(t){var e={},n=r.filter(t.nodes(),(function(e){return!t.children(e).length})),o=r.max(r.map(n,(function(e){return t.node(e).rank}))),i=r.map(r.range(o+1),(function(){return[]}));var a=r.sortBy(n,(function(e){return t.node(e).rank}));return r.forEach(a,(function n(o){if(r.has(e,o))return;e[o]=!0;var a=t.node(o);i[a.rank].push(o),r.forEach(t.successors(o),n)})),i}},function(t,e,n){"use strict";var r=n(11);function o(t,e,n){for(var o=r.zipObject(n,r.map(n,(function(t,e){return e}))),i=r.flatten(r.map(e,(function(e){return r.sortBy(r.map(t.outEdges(e),(function(e){return{pos:o[e.w],weight:t.edge(e).weight}})),"pos")})),!0),a=1;a<n.length;)a<<=1;var u=2*a-1;a-=1;var s=r.map(new Array(u),(function(){return 0})),c=0;return r.forEach(i.forEach((function(t){var e=t.pos+a;s[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=s[e+1]),s[e=e-1>>1]+=t.weight;c+=t.weight*n}))),c}t.exports=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=o(t,e[r-1],e[r]);return n}},function(t,e,n){var r=n(11),o=n(360),i=n(361),a=n(362);t.exports=function t(e,n,u,s){var c=e.children(n),f=e.node(n),l=f?f.borderLeft:void 0,h=f?f.borderRight:void 0,d={};l&&(c=r.filter(c,(function(t){return t!==l&&t!==h})));var p=o(e,c);r.forEach(p,(function(n){if(e.children(n.v).length){var o=t(e,n.v,u,s);d[n.v]=o,r.has(o,"barycenter")&&(i=n,a=o,r.isUndefined(i.barycenter)?(i.barycenter=a.barycenter,i.weight=a.weight):(i.barycenter=(i.barycenter*i.weight+a.barycenter*a.weight)/(i.weight+a.weight),i.weight+=a.weight))}var i,a}));var v=i(p,u);!function(t,e){r.forEach(t,(function(t){t.vs=r.flatten(t.vs.map((function(t){return e[t]?e[t].vs:t})),!0)}))}(v,d);var m=a(v,s);if(l&&(m.vs=r.flatten([l,m.vs,h],!0),e.predecessors(l).length)){var y=e.node(e.predecessors(l)[0]),g=e.node(e.predecessors(h)[0]);r.has(m,"barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+y.order+g.order)/(m.weight+2),m.weight+=2}return m}},function(t,e,n){var r=n(11);t.exports=function(t,e){return r.map(e,(function(e){var n=t.inEdges(e);if(n.length){var o=r.reduce(n,(function(e,n){var r=t.edge(n),o=t.node(n.v);return{sum:e.sum+r.weight*o.order,weight:e.weight+r.weight}}),{sum:0,weight:0});return{v:e,barycenter:o.sum/o.weight,weight:o.weight}}return{v:e}}))}},function(t,e,n){"use strict";var r=n(11);t.exports=function(t,e){var n={};return r.forEach(t,(function(t,e){var o=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};r.isUndefined(t.barycenter)||(o.barycenter=t.barycenter,o.weight=t.weight)})),r.forEach(e.edges(),(function(t){var e=n[t.v],o=n[t.w];r.isUndefined(e)||r.isUndefined(o)||(o.indegree++,e.out.push(n[t.w]))})),function(t){var e=[];function n(t){return function(e){e.merged||(r.isUndefined(e.barycenter)||r.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&function(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight);e.weight&&(n+=e.barycenter*e.weight,r+=e.weight);t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}(t,e)}}function o(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}for(;t.length;){var i=t.pop();e.push(i),r.forEach(i.in.reverse(),n(i)),r.forEach(i.out,o(i))}return r.map(r.filter(e,(function(t){return!t.merged})),(function(t){return r.pick(t,["vs","i","barycenter","weight"])}))}(r.filter(n,(function(t){return!t.indegree})))}},function(t,e,n){var r=n(11),o=n(18);function i(t,e,n){for(var o;e.length&&(o=r.last(e)).i<=n;)e.pop(),t.push(o.vs),n++;return n}t.exports=function(t,e){var n=o.partition(t,(function(t){return r.has(t,"barycenter")})),a=n.lhs,u=r.sortBy(n.rhs,(function(t){return-t.i})),s=[],c=0,f=0,l=0;a.sort((h=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:h?e.i-t.i:t.i-e.i})),l=i(s,u,l),r.forEach(a,(function(t){l+=t.vs.length,s.push(t.vs),c+=t.barycenter*t.weight,f+=t.weight,l=i(s,u,l)}));var h;var d={vs:r.flatten(s,!0)};f&&(d.barycenter=c/f,d.weight=f);return d}},function(t,e,n){var r=n(11),o=n(23).Graph;t.exports=function(t,e,n){var i=function(t){var e;for(;t.hasNode(e=r.uniqueId("_root")););return e}(t),a=new o({compound:!0}).setGraph({root:i}).setDefaultNodeLabel((function(e){return t.node(e)}));return r.forEach(t.nodes(),(function(o){var u=t.node(o),s=t.parent(o);(u.rank===e||u.minRank<=e&&e<=u.maxRank)&&(a.setNode(o),a.setParent(o,s||i),r.forEach(t[n](o),(function(e){var n=e.v===o?e.w:e.v,i=a.edge(n,o),u=r.isUndefined(i)?0:i.weight;a.setEdge(n,o,{weight:t.edge(e).weight+u})})),r.has(u,"minRank")&&a.setNode(o,{borderLeft:u.borderLeft[e],borderRight:u.borderRight[e]}))})),a}},function(t,e,n){var r=n(11);t.exports=function(t,e,n){var o,i={};r.forEach(n,(function(n){for(var r,a,u=t.parent(n);u;){if((r=t.parent(u))?(a=i[r],i[r]=u):(a=o,o=u),a&&a!==u)return void e.setEdge(a,u);u=r}}))}},function(t,e,n){"use strict";var r=n(11),o=n(18),i=n(366).positionX;t.exports=function(t){(function(t){var e=o.buildLayerMatrix(t),n=t.graph().ranksep,i=0;r.forEach(e,(function(e){var o=r.max(r.map(e,(function(e){return t.node(e).height})));r.forEach(e,(function(e){t.node(e).y=i+o/2})),i+=o+n}))})(t=o.asNonCompoundGraph(t)),r.forEach(i(t),(function(e,n){t.node(n).x=e}))}},function(t,e,n){"use strict";var r=n(11),o=n(23).Graph,i=n(18);function a(t,e){var n={};return r.reduce(e,(function(e,o){var i=0,a=0,u=e.length,c=r.last(o);return r.forEach(o,(function(e,f){var l=function(t,e){if(t.node(e).dummy)return r.find(t.predecessors(e),(function(e){return t.node(e).dummy}))}(t,e),h=l?t.node(l).order:u;(l||e===c)&&(r.forEach(o.slice(a,f+1),(function(e){r.forEach(t.predecessors(e),(function(r){var o=t.node(r),a=o.order;!(a<i||h<a)||o.dummy&&t.node(e).dummy||s(n,r,e)}))})),a=f+1,i=h)})),o})),n}function u(t,e){var n={};function o(e,o,i,a,u){var c;r.forEach(r.range(o,i),(function(o){c=e[o],t.node(c).dummy&&r.forEach(t.predecessors(c),(function(e){var r=t.node(e);r.dummy&&(r.order<a||r.order>u)&&s(n,e,c)}))}))}return r.reduce(e,(function(e,n){var i,a=-1,u=0;return r.forEach(n,(function(r,s){if("border"===t.node(r).dummy){var c=t.predecessors(r);c.length&&(i=t.node(c[0]).order,o(n,u,s,a,i),u=s,a=i)}o(n,u,n.length,i,e.length)})),n})),n}function s(t,e,n){if(e>n){var r=e;e=n,n=r}var o=t[e];o||(t[e]=o={}),o[n]=!0}function c(t,e,n){if(e>n){var o=e;e=n,n=o}return r.has(t[e],n)}function f(t,e,n,o){var i={},a={},u={};return r.forEach(e,(function(t){r.forEach(t,(function(t,e){i[t]=t,a[t]=t,u[t]=e}))})),r.forEach(e,(function(t){var e=-1;r.forEach(t,(function(t){var s=o(t);if(s.length)for(var f=((s=r.sortBy(s,(function(t){return u[t]}))).length-1)/2,l=Math.floor(f),h=Math.ceil(f);l<=h;++l){var d=s[l];a[t]===t&&e<u[d]&&!c(n,t,d)&&(a[d]=t,a[t]=i[t]=i[d],e=u[d])}}))})),{root:i,align:a}}function l(t,e,n,i,a){var u={},s=function(t,e,n,i){var a=new o,u=t.graph(),s=function(t,e,n){return function(o,i,a){var u,s=o.node(i),c=o.node(a),f=0;if(f+=s.width/2,r.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=-s.width/2;break;case"r":u=s.width/2}if(u&&(f+=n?u:-u),u=0,f+=(s.dummy?e:t)/2,f+=(c.dummy?e:t)/2,f+=c.width/2,r.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":u=c.width/2;break;case"r":u=-c.width/2}return u&&(f+=n?u:-u),u=0,f}}(u.nodesep,u.edgesep,i);return r.forEach(e,(function(e){var o;r.forEach(e,(function(e){var r=n[e];if(a.setNode(r),o){var i=n[o],u=a.edge(i,r);a.setEdge(i,r,Math.max(s(t,e,o),u||0))}o=e}))})),a}(t,e,n,a),c=a?"borderLeft":"borderRight";function f(t,e){for(var n=s.nodes(),r=n.pop(),o={};r;)o[r]?t(r):(o[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return f((function(t){u[t]=s.inEdges(t).reduce((function(t,e){return Math.max(t,u[e.v]+s.edge(e))}),0)}),s.predecessors.bind(s)),f((function(e){var n=s.outEdges(e).reduce((function(t,e){return Math.min(t,u[e.w]-s.edge(e))}),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==c&&(u[e]=Math.max(u[e],n))}),s.successors.bind(s)),r.forEach(i,(function(t){u[t]=u[n[t]]})),u}function h(t,e){return r.minBy(r.values(e),(function(e){var n=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return r.forIn(e,(function(e,r){var i=function(t,e){return t.node(e).width}(t,r)/2;n=Math.max(e+i,n),o=Math.min(e-i,o)})),n-o}))}function d(t,e){var n=r.values(e),o=r.min(n),i=r.max(n);r.forEach(["u","d"],(function(n){r.forEach(["l","r"],(function(a){var u,s=n+a,c=t[s];if(c!==e){var f=r.values(c);(u="l"===a?o-r.min(f):i-r.max(f))&&(t[s]=r.mapValues(c,(function(t){return t+u})))}}))}))}function p(t,e){return r.mapValues(t.ul,(function(n,o){if(e)return t[e.toLowerCase()][o];var i=r.sortBy(r.map(t,o));return(i[1]+i[2])/2}))}t.exports={positionX:function(t){var e,n=i.buildLayerMatrix(t),o=r.merge(a(t,n),u(t,n)),s={};r.forEach(["u","d"],(function(i){e="u"===i?n:r.values(n).reverse(),r.forEach(["l","r"],(function(n){"r"===n&&(e=r.map(e,(function(t){return r.values(t).reverse()})));var a=("u"===i?t.predecessors:t.successors).bind(t),u=f(t,e,o,a),c=l(t,e,u.root,u.align,"r"===n);"r"===n&&(c=r.mapValues(c,(function(t){return-t}))),s[i+n]=c}))}));var c=h(t,s);return d(s,c),p(s,t.graph().align)},findType1Conflicts:a,findType2Conflicts:u,addConflict:s,hasConflict:c,verticalAlignment:f,horizontalCompaction:l,alignCoordinates:d,findSmallestWidthAlignment:h,balance:p}},function(t,e,n){var r=n(11),o=n(18),i=n(23).Graph;t.exports={debugOrdering:function(t){var e=o.buildLayerMatrix(t),n=new i({compound:!0,multigraph:!0}).setGraph({});return r.forEach(t.nodes(),(function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)})),r.forEach(t.edges(),(function(t){n.setEdge(t.v,t.w,{},t.name)})),r.forEach(e,(function(t,e){var o="layer"+e;n.setNode(o,{rank:"same"}),r.reduce(t,(function(t,e){return n.setEdge(t,e,{style:"invis"}),e}))})),n}}},function(t,e){t.exports="0.8.5"},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var s,c=[],f=!1,l=-1;function h(){f&&s&&(f=!1,s.length?c=s.concat(c):l=-1,c.length&&d())}function d(){if(!f){var t=u(h);f=!0;for(var e=c.length;e;){for(s=c,c=[];++l<e;)s&&s[l].run();l=-1,e=c.length}s=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||f||u(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=function(t){"use strict";var n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=x(a,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=f(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function h(){}function d(){}function p(){}var v={};v[i]=function(){return this};var m=Object.getPrototypeOf,y=m&&m(m(T([])));y&&y!==n&&r.call(y,i)&&(v=y);var g=p.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,n){var o;this._invoke=function(i,a){function u(){return new n((function(o,u){!function o(i,a,u,s){var c=f(t[i],t,a);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"===e(h)&&r.call(h,"__await")?n.resolve(h.__await).then((function(t){o("next",t,u,s)}),(function(t){o("throw",t,u,s)})):n.resolve(h).then((function(t){l.value=t,u(l)}),(function(t){return o("throw",t,u,s)}))}s(c.arg)}(i,a,o,u)}))}return o=o?o.then(u,u):u()}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=f(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return d.prototype=g.constructor=p,p.constructor=d,d.displayName=s(p,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(_.prototype),_.prototype[a]=function(){return this},t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),s(g,u,"Generator"),g[i]=function(){return this},g.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}("object"===e(t)?t.exports:{});try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}}).call(this,n(61)(t))},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var a=n(375),u=n(19),s=n(30),c=n(17),f=n(162),l=n(376),h=n(383),d=n(385),p=n(40),v=n(50),m=n(388),y=n(389),g=function(){function t(t){var e=t||{};if("object"!==r(e))throw new Error(""+u.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===e.defaultScope)e.defaultScope=s.BindingScopeEnum.Transient;else if(e.defaultScope!==s.BindingScopeEnum.Singleton&&e.defaultScope!==s.BindingScopeEnum.Transient&&e.defaultScope!==s.BindingScopeEnum.Request)throw new Error(""+u.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!=typeof e.autoBindInjectable)throw new Error(""+u.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!=typeof e.skipBaseClassChecks)throw new Error(""+u.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=p.id(),this._bindingDictionary=new y.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new f.MetadataReader}return t.merge=function(e,n){var r=new t,o=l.getBindingDictionary(r),i=l.getBindingDictionary(e),a=l.getBindingDictionary(n);function u(t,e){t.traverse((function(t,n){n.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))}return u(i,o),u(a,o),r},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),r=0,o=t;r<o.length;r++){var i=o[r],a=n(i.id);i.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(this,void 0,void 0,(function(){var e,n,r,o,a;return i(this,(function(i){switch(i.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,r=t,i.label=1;case 1:return n<r.length?(o=r[n],a=e(o.id),[4,o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(t){return function(e){return e.moduleId===t}};e.forEach((function(e){var n=r(e.id);t._bindingDictionary.removeByCondition(n)}))},t.prototype.bind=function(t){var e=this.options.defaultScope||s.BindingScopeEnum.Transient,n=new a.Binding(t,e);return this._bindingDictionary.add(t,n),new d.BindingToSyntax(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error(u.CANNOT_UNBIND+" "+v.getServiceIdentifierAsString(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new y.Lookup},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,c.NAMED_TAG,e)},t.prototype.isBoundTagged=function(t,e,n){var r=!1;if(this._bindingDictionary.hasKey(t)){var o=this._bindingDictionary.get(t),i=l.createMockRequest(this,t,e,n);r=o.some((function(t){return t.constraint(i)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(t,e,n)),r},t.prototype.snapshot=function(){this._snapshots.push(m.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(u.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,s.TargetTypeEnum.Variable,t)},t.prototype.getTagged=function(t,e,n){return this._get(!1,!1,s.TargetTypeEnum.Variable,t,e,n)},t.prototype.getNamed=function(t,e){return this.getTagged(t,c.NAMED_TAG,e)},t.prototype.getAll=function(t){return this._get(!0,!0,s.TargetTypeEnum.Variable,t)},t.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,s.TargetTypeEnum.Variable,t,e,n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,c.NAMED_TAG,e)},t.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),e.get(t)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(r){var o=t.rebind.bind(t)(r);return e(o,n),o}};return function(r){return{bindFunction:(o=r,function(n){var r=t.bind.bind(t)(n);return e(r,o),r}),isboundFunction:function(e){return t.isBound.bind(t)(e)},rebindFunction:n(r),unbindFunction:function(e){t.unbind.bind(t)(e)}};var o}},t.prototype._get=function(t,e,n,r,o,i){var a=null,s={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:o,serviceIdentifier:r,targetType:n,value:i};if(this._middleware){if(null==(a=this._middleware(s)))throw new Error(u.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(s);return a},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=l.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return n=e.contextInterceptor(n),h.resolve(n)}},t}();e.Container=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Binding=void 0;var r=n(30),o=n(40),i=function(){function t(t,e){this.id=o.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=r.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=!1,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();e.Binding=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBindingDictionary=e.createMockRequest=e.plan=void 0;var r=n(377),o=n(19),i=n(30),a=n(17),u=n(163),s=n(50),c=n(378),f=n(26),l=n(379),h=n(380),d=n(382),p=n(165);function v(t){return t._bindingDictionary}function m(t,e,n,i,a){var u=y(n.container,a.serviceIdentifier),c=[];return u.length===r.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof a.serviceIdentifier&&t.getConstructorMetadata(a.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(a.serviceIdentifier).toSelf(),u=y(n.container,a.serviceIdentifier)),c=e?u:u.filter((function(t){var e=new d.Request(t.serviceIdentifier,n,i,t,a);return t.constraint(e)})),function(t,e,n,i){switch(e.length){case r.BindingCount.NoBindingsAvailable:if(n.isOptional())return e;var a=s.getServiceIdentifierAsString(t),u=o.NOT_REGISTERED;throw u+=s.listMetadataForTarget(a,n),u+=s.listRegisteredBindingsForServiceIdentifier(i,a,y),new Error(u);case r.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return e;case r.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return e;a=s.getServiceIdentifierAsString(t),u=o.AMBIGUOUS_MATCH+" "+a;throw u+=s.listRegisteredBindingsForServiceIdentifier(i,a,y),new Error(u)}}(a.serviceIdentifier,c,a,n.container),c}function y(t,e){var n=[],r=v(t);return r.hasKey(e)?n=r.get(e):null!==t.parent&&(n=y(t.parent,e)),n}e.getBindingDictionary=v,e.plan=function(t,e,n,r,v,y,g,b){void 0===b&&(b=!1);var _=new c.Context(e),x=function(t,e,n,r,o,i){var u=t?a.MULTI_INJECT_TAG:a.INJECT_TAG,s=new f.Metadata(u,n),c=new p.Target(e,r,n,s);if(void 0!==o){var l=new f.Metadata(o,i);c.metadata.push(l)}return c}(n,r,v,"",y,g);try{return function t(e,n,r,a,u,s){var c,f;if(null===u){c=m(e,n,a,null,s),f=new d.Request(r,a,null,c,s);var p=new l.Plan(a,f);a.addPlan(p)}else c=m(e,n,a,u,s),f=u.addChildRequest(s.serviceIdentifier,c,s);c.forEach((function(n){var r=null;if(s.isArray())r=f.addChildRequest(n.serviceIdentifier,n,s);else{if(n.cache)return;r=f}if(n.type===i.BindingTypeEnum.Instance&&null!==n.implementationType){var u=h.getDependencies(e,n.implementationType);if(!a.container.options.skipBaseClassChecks){var c=h.getBaseClassDependencyCount(e,n.implementationType);if(u.length<c){var l=o.ARGUMENTS_LENGTH_MISMATCH(h.getFunctionName(n.implementationType));throw new Error(l)}}u.forEach((function(n){t(e,!1,n.serviceIdentifier,a,r,n)}))}}))}(t,b,v,_,null,x),_}catch(t){throw u.isStackOverflowExeption(t)&&_.plan&&s.circularDependencyToException(_.plan.rootRequest),t}},e.createMockRequest=function(t,e,n,r){var o=new p.Target(i.TargetTypeEnum.Variable,"",e,new f.Metadata(n,r)),a=new c.Context(t);return new d.Request(e,a,null,[],o)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingCount=void 0;e.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Context=void 0;var r=n(40),o=function(){function t(t){this.id=r.id(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}();e.Context=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Plan=void 0;var r=function(t,e){this.parentContext=t,this.rootRequest=e};e.Plan=r},function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.getFunctionName=e.getBaseClassDependencyCount=e.getDependencies=void 0;var o=n(164),i=n(19),a=n(30),u=n(17),s=n(50);Object.defineProperty(e,"getFunctionName",{enumerable:!0,get:function(){return s.getFunctionName}});var c=n(165);function f(t,e,n,o){var u=t.getConstructorMetadata(n),s=u.compilerGeneratedMetadata;if(void 0===s){var f=i.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(f)}var d=u.userGeneratedMetadata,p=Object.keys(d),v=function(t,e,n,r,o){for(var i=[],a=0;a<o;a++){var u=l(a,t,e,n,r);null!==u&&i.push(u)}return i}(o,e,s,d,0===n.length&&p.length>0?p.length:n.length),m=function t(e,n){for(var o=e.getPropertiesMetadata(n),i=[],u=Object.keys(o),s=0,f=u;s<f.length;s++){var l=f[s],d=o[l],p=h(o[l]),v=p.targetName||l,m=p.inject||p.multiInject,y=new c.Target(a.TargetTypeEnum.ClassProperty,v,m);y.metadata=d,i.push(y)}var g=Object.getPrototypeOf(n.prototype).constructor;if(g!==Object){var b=t(e,g);i=r(i,b)}return i}(t,n);return r(v,m)}function l(t,e,n,r,u){var s=u[t.toString()]||[],f=h(s),l=!0!==f.unmanaged,d=r[t],p=f.inject||f.multiInject;if((d=p||d)instanceof o.LazyServiceIdentifer&&(d=d.unwrap()),l){if(!e&&(d===Object||d===Function||void 0===d)){var v=i.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".";throw new Error(v)}var m=new c.Target(a.TargetTypeEnum.ConstructorArgument,f.targetName,d);return m.metadata=s,m}return null}function h(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e[u.INJECT_TAG],multiInject:e[u.MULTI_INJECT_TAG],targetName:e[u.NAME_TAG],unmanaged:e[u.UNMANAGED_TAG]}}e.getDependencies=function(t,e){return f(t,s.getFunctionName(e),e,!1)},e.getBaseClassDependencyCount=function t(e,n){var r=Object.getPrototypeOf(n.prototype).constructor;if(r!==Object){var o=f(e,s.getFunctionName(r),r,!0),i=o.map((function(t){return t.metadata.filter((function(t){return t.key===u.UNMANAGED_TAG}))})),a=[].concat.apply([],i).length,c=o.length-a;return c>0?c:t(e,r)}return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryableString=void 0;var r=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e,n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();e.QueryableString=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Request=void 0;var r=n(40),o=function(){function t(t,e,n,o,i){this.id=r.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=i,this.childRequests=[],this.bindings=Array.isArray(o)?o:[o],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,r){var o=new t(e,this.parentContext,this,n,r);return this.childRequests.push(o),o},t}();e.Request=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolve=void 0;var r=n(19),o=n(30),i=n(163),a=n(50),u=n(384),s=function(t,e,n){try{return n()}catch(n){throw i.isStackOverflowExeption(n)?new Error(r.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):n}};e.resolve=function(t){return function t(e){return function(n){n.parentContext.setCurrentRequest(n);var i=n.bindings,c=n.childRequests,f=n.target&&n.target.isArray(),l=!(n.parentRequest&&n.parentRequest.target&&n.target&&n.parentRequest.target.matchesArray(n.target.serviceIdentifier));if(f&&l)return c.map((function(n){return t(e)(n)}));var h=null;if(!n.target.isOptional()||0!==i.length){var d=i[0],p=d.scope===o.BindingScopeEnum.Singleton,v=d.scope===o.BindingScopeEnum.Request;if(p&&d.activated)return d.cache;if(v&&null!==e&&e.has(d.id))return e.get(d.id);if(d.type===o.BindingTypeEnum.ConstantValue)h=d.cache;else if(d.type===o.BindingTypeEnum.Function)h=d.cache;else if(d.type===o.BindingTypeEnum.Constructor)h=d.implementationType;else if(d.type===o.BindingTypeEnum.DynamicValue&&null!==d.dynamicValue)h=s("toDynamicValue",d.serviceIdentifier,(function(){return d.dynamicValue(n.parentContext)}));else if(d.type===o.BindingTypeEnum.Factory&&null!==d.factory)h=s("toFactory",d.serviceIdentifier,(function(){return d.factory(n.parentContext)}));else if(d.type===o.BindingTypeEnum.Provider&&null!==d.provider)h=s("toProvider",d.serviceIdentifier,(function(){return d.provider(n.parentContext)}));else{if(d.type!==o.BindingTypeEnum.Instance||null===d.implementationType){var m=a.getServiceIdentifierAsString(n.serviceIdentifier);throw new Error(r.INVALID_BINDING_TYPE+" "+m)}h=u.resolveInstance(d.implementationType,c,t(e))}return"function"==typeof d.onActivation&&(h=d.onActivation(n.parentContext,h)),p&&(d.cache=h,d.activated=!0),v&&null!==e&&!e.has(d.id)&&e.set(d.id,h),h}}}(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}},function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveInstance=void 0;var o=n(19),i=n(30),a=n(17);e.resolveInstance=function(t,e,n){var u,s,c=null;if(e.length>0){var f=e.filter((function(t){return null!==t.target&&t.target.type===i.TargetTypeEnum.ConstructorArgument})).map(n);s=f,c=function(t,e,n){var r=e.filter((function(t){return null!==t.target&&t.target.type===i.TargetTypeEnum.ClassProperty})),o=r.map(n);return r.forEach((function(e,n){var r;r=e.target.name.value();var i=o[n];t[r]=i})),t}(c=new((u=t).bind.apply(u,r([void 0],s))),e,n)}else c=new t;return function(t,e){if(Reflect.hasMetadata(a.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(a.POST_CONSTRUCT,t);try{e[n.value]()}catch(e){throw new Error(o.POST_CONSTRUCT_ERROR(t.name,e.message))}}}(t,c),c}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingToSyntax=void 0;var r=n(19),o=n(30),i=n(386),a=n(166),u=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=o.BindingTypeEnum.Instance,this._binding.implementationType=t,new i.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+r.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=o.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=o.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new i.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=o.BindingTypeEnum.Constructor,this._binding.implementationType=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=o.BindingTypeEnum.Factory,this._binding.factory=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error(r.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=o.BindingTypeEnum.Function,e},t.prototype.toAutoFactory=function(t){return this._binding.type=o.BindingTypeEnum.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},new a.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=o.BindingTypeEnum.Provider,this._binding.provider=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},t}();e.BindingToSyntax=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInWhenOnSyntax=void 0;var r=n(387),o=n(91),i=n(92),a=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new o.BindingOnSyntax(this._binding),this._bindingInSyntax=new r.BindingInSyntax(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingInWhenOnSyntax=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInSyntax=void 0;var r=n(30),o=n(166),i=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=r.BindingScopeEnum.Request,new o.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=r.BindingScopeEnum.Singleton,new o.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=r.BindingScopeEnum.Transient,new o.BindingWhenOnSyntax(this._binding)},t}();e.BindingInSyntax=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContainerSnapshot=void 0;var r=function(){function t(){}return t.of=function(e,n){var r=new t;return r.bindings=e,r.middleware=n,r},t}();e.ContainerSnapshot=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Lookup=void 0;var r=n(19),o=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null==t)throw new Error(r.NULL_ARGUMENT);if(null==e)throw new Error(r.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},t.prototype.get=function(t){if(null==t)throw new Error(r.NULL_ARGUMENT);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(r.KEY_NOT_FOUND)},t.prototype.remove=function(t){if(null==t)throw new Error(r.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(r.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach((function(n,r){var o=n.filter((function(e){return!t(e)}));o.length>0?e._map.set(r,o):e._map.delete(r)}))},t.prototype.hasKey=function(t){if(null==t)throw new Error(r.NULL_ARGUMENT);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){t.forEach((function(t){return e.add(n,t.clone())}))})),e},t.prototype.traverse=function(t){this._map.forEach((function(e,n){t(n,e)}))},t}();e.Lookup=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncContainerModule=e.ContainerModule=void 0;var r=n(40),o=function(t){this.id=r.id(),this.registry=t};e.ContainerModule=o;var i=function(t){this.id=r.id(),this.registry=t};e.AsyncContainerModule=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.injectable=void 0;var r=n(19),o=n(17);e.injectable=function(){return function(t){if(Reflect.hasOwnMetadata(o.PARAM_TYPES,t))throw new Error(r.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(o.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(o.PARAM_TYPES,e,t),t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagged=void 0;var r=n(26),o=n(33);e.tagged=function(t,e){return function(n,i,a){var u=new r.Metadata(t,e);"number"==typeof a?o.tagParameter(n,i,a,u):o.tagProperty(n,i,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.named=void 0;var r=n(17),o=n(26),i=n(33);e.named=function(t){return function(e,n,a){var u=new o.Metadata(r.NAMED_TAG,t);"number"==typeof a?i.tagParameter(e,n,a,u):i.tagProperty(e,n,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.optional=void 0;var r=n(17),o=n(26),i=n(33);e.optional=function(){return function(t,e,n){var a=new o.Metadata(r.OPTIONAL_TAG,!0);"number"==typeof n?i.tagParameter(t,e,n,a):i.tagProperty(t,e,a)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unmanaged=void 0;var r=n(17),o=n(26),i=n(33);e.unmanaged=function(){return function(t,e,n){var a=new o.Metadata(r.UNMANAGED_TAG,!0);i.tagParameter(t,e,n,a)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiInject=void 0;var r=n(17),o=n(26),i=n(33);e.multiInject=function(t){return function(e,n,a){var u=new o.Metadata(r.MULTI_INJECT_TAG,t);"number"==typeof a?i.tagParameter(e,n,a,u):i.tagProperty(e,n,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.targetName=void 0;var r=n(17),o=n(26),i=n(33);e.targetName=function(t){return function(e,n,a){var u=new o.Metadata(r.NAME_TAG,t);i.tagParameter(e,n,a,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.postConstruct=void 0;var r=n(19),o=n(17),i=n(26);e.postConstruct=function(){return function(t,e,n){var a=new i.Metadata(o.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(o.POST_CONSTRUCT,t.constructor))throw new Error(r.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(o.POST_CONSTRUCT,a,t.constructor)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=void 0,e.multiBindToService=function(t){return function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach((function(n){return t.bind(n).toService(e)}))}}}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Symbol.for("INJECTION");function o(t,e,n,o){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return o&&!Reflect.hasMetadata(r,this,e)&&Reflect.defineMetadata(r,n(),this,e),Reflect.hasMetadata(r,this,e)?Reflect.getMetadata(r,this,e):n()},set:function(t){Reflect.defineMetadata(r,t,this,e)}})}e.makePropertyInjectDecorator=function(t,e){return function(n){return function(r,i){o(r,i,(function(){return t.get(n)}),e)}}},e.makePropertyInjectNamedDecorator=function(t,e){return function(n,r){return function(i,a){o(i,a,(function(){return t.getNamed(n,r)}),e)}}},e.makePropertyInjectTaggedDecorator=function(t,e){return function(n,r,i){return function(a,u){o(a,u,(function(){return t.getTagged(n,r,i)}),e)}}},e.makePropertyMultiInjectDecorator=function(t,e){return function(n){return function(r,i){o(r,i,(function(){return t.getAll(n)}),e)}}}},function(t,e,n){var r=n(161);t.exports=function(t){if(Array.isArray(t))return r(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e){t.exports=function(t){var e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}},function(t,e){t.exports=function(t,e){var n=new Float32Array(2);return n[0]=t,n[1]=e,n}},function(t,e){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t}},function(t,e,n){t.exports=function(t,e){var n=t[0],o=t[1],i=e[0],a=e[1];return Math.abs(n-i)<=r*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(o-a)<=r*Math.max(1,Math.abs(o),Math.abs(a))};var r=n(175)},function(t,e){t.exports=function(t,e){return t[0]===e[0]&&t[1]===e[1]}},function(t,e,n){t.exports=n(100)},function(t,e,n){t.exports=n(179)},function(t,e,n){t.exports=n(180)},function(t,e){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}},function(t,e){t.exports=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}},function(t,e){t.exports=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}},function(t,e){t.exports=function(t,e,n){var r=Math.cos(n),o=Math.sin(n),i=e[0],a=e[1];return t[0]=i*r-a*o,t[1]=i*o+a*r,t}},function(t,e){t.exports=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}},function(t,e){t.exports=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}},function(t,e){t.exports=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}},function(t,e){t.exports=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}},function(t,e,n){t.exports=n(181)},function(t,e,n){t.exports=n(182)},function(t,e,n){t.exports=n(183)},function(t,e,n){t.exports=n(184)},function(t,e){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t}},function(t,e){t.exports=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}},function(t,e){t.exports=function(t,e,n,r){var o=e[0],i=e[1];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t}},function(t,e){t.exports=function(t,e){e=e||1;var n=2*Math.random()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o,t[1]=n[1]*r+n[3]*o,t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o+n[4],t[1]=n[1]*r+n[3]*o+n[5],t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[3]*o+n[6],t[1]=n[1]*r+n[4]*o+n[7],t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[4]*o+n[12],t[1]=n[1]*r+n[5]*o+n[13],t}},function(t,e,n){t.exports=function(t,e,n,o,i,a){var u,s;e||(e=2);n||(n=0);s=o?Math.min(o*e+n,t.length):t.length;for(u=n;u<s;u+=e)r[0]=t[u],r[1]=t[u+1],i(r,r,a),t[u]=r[0],t[u+1]=r[1];return t};var r=n(176)()},function(t,e){t.exports=function(t,e,n){var r=e[0]*e[0]+e[1]*e[1];if(r>n*n){var o=Math.sqrt(r);t[0]=e[0]/o*n,t[1]=e[1]/o*n}else t[0]=e[0],t[1]=e[1];return t}},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"create",(function(){return go})),n.d(r,"fromMat4",(function(){return bo})),n.d(r,"clone",(function(){return _o})),n.d(r,"copy",(function(){return xo})),n.d(r,"fromValues",(function(){return wo})),n.d(r,"set",(function(){return Eo})),n.d(r,"identity",(function(){return So})),n.d(r,"transpose",(function(){return To})),n.d(r,"invert",(function(){return Ao})),n.d(r,"adjoint",(function(){return Io})),n.d(r,"determinant",(function(){return ko})),n.d(r,"multiply",(function(){return Oo})),n.d(r,"translate",(function(){return Do})),n.d(r,"rotate",(function(){return Ro})),n.d(r,"scale",(function(){return Mo})),n.d(r,"fromTranslation",(function(){return Co})),n.d(r,"fromRotation",(function(){return No})),n.d(r,"fromScaling",(function(){return Po})),n.d(r,"fromMat2d",(function(){return Go})),n.d(r,"fromQuat",(function(){return jo})),n.d(r,"normalFromMat4",(function(){return Lo})),n.d(r,"projection",(function(){return Uo})),n.d(r,"str",(function(){return Bo})),n.d(r,"frob",(function(){return Fo})),n.d(r,"add",(function(){return zo})),n.d(r,"subtract",(function(){return Vo})),n.d(r,"multiplyScalar",(function(){return Wo})),n.d(r,"multiplyScalarAndAdd",(function(){return Xo})),n.d(r,"exactEquals",(function(){return Ho})),n.d(r,"equals",(function(){return qo})),n.d(r,"mul",(function(){return Yo})),n.d(r,"sub",(function(){return Ko}));var o={};n.r(o),n.d(o,"create",(function(){return Zo})),n.d(o,"clone",(function(){return Qo})),n.d(o,"copy",(function(){return Jo})),n.d(o,"fromValues",(function(){return $o})),n.d(o,"set",(function(){return ti})),n.d(o,"identity",(function(){return ei})),n.d(o,"transpose",(function(){return ni})),n.d(o,"invert",(function(){return ri})),n.d(o,"adjoint",(function(){return oi})),n.d(o,"determinant",(function(){return ii})),n.d(o,"multiply",(function(){return ai})),n.d(o,"translate",(function(){return ui})),n.d(o,"scale",(function(){return si})),n.d(o,"rotate",(function(){return ci})),n.d(o,"rotateX",(function(){return fi})),n.d(o,"rotateY",(function(){return li})),n.d(o,"rotateZ",(function(){return hi})),n.d(o,"fromTranslation",(function(){return di})),n.d(o,"fromScaling",(function(){return pi})),n.d(o,"fromRotation",(function(){return vi})),n.d(o,"fromXRotation",(function(){return mi})),n.d(o,"fromYRotation",(function(){return yi})),n.d(o,"fromZRotation",(function(){return gi})),n.d(o,"fromRotationTranslation",(function(){return bi})),n.d(o,"fromQuat2",(function(){return _i})),n.d(o,"getTranslation",(function(){return xi})),n.d(o,"getScaling",(function(){return wi})),n.d(o,"getRotation",(function(){return Ei})),n.d(o,"fromRotationTranslationScale",(function(){return Si})),n.d(o,"fromRotationTranslationScaleOrigin",(function(){return Ti})),n.d(o,"fromQuat",(function(){return Ai})),n.d(o,"frustum",(function(){return Ii})),n.d(o,"perspective",(function(){return ki})),n.d(o,"perspectiveFromFieldOfView",(function(){return Oi})),n.d(o,"ortho",(function(){return Di})),n.d(o,"lookAt",(function(){return Ri})),n.d(o,"targetTo",(function(){return Mi})),n.d(o,"str",(function(){return Ci})),n.d(o,"frob",(function(){return Ni})),n.d(o,"add",(function(){return Pi})),n.d(o,"subtract",(function(){return Gi})),n.d(o,"multiplyScalar",(function(){return ji})),n.d(o,"multiplyScalarAndAdd",(function(){return Li})),n.d(o,"exactEquals",(function(){return Ui})),n.d(o,"equals",(function(){return Bi})),n.d(o,"mul",(function(){return Fi})),n.d(o,"sub",(function(){return zi}));var i={};n.r(i),n.d(i,"create",(function(){return Vi})),n.d(i,"clone",(function(){return Wi})),n.d(i,"length",(function(){return Xi})),n.d(i,"fromValues",(function(){return Hi})),n.d(i,"copy",(function(){return qi})),n.d(i,"set",(function(){return Yi})),n.d(i,"add",(function(){return Ki})),n.d(i,"subtract",(function(){return Zi})),n.d(i,"multiply",(function(){return Qi})),n.d(i,"divide",(function(){return Ji})),n.d(i,"ceil",(function(){return $i})),n.d(i,"floor",(function(){return ta})),n.d(i,"min",(function(){return ea})),n.d(i,"max",(function(){return na})),n.d(i,"round",(function(){return ra})),n.d(i,"scale",(function(){return oa})),n.d(i,"scaleAndAdd",(function(){return ia})),n.d(i,"distance",(function(){return aa})),n.d(i,"squaredDistance",(function(){return ua})),n.d(i,"squaredLength",(function(){return sa})),n.d(i,"negate",(function(){return ca})),n.d(i,"inverse",(function(){return fa})),n.d(i,"normalize",(function(){return la})),n.d(i,"dot",(function(){return ha})),n.d(i,"cross",(function(){return da})),n.d(i,"lerp",(function(){return pa})),n.d(i,"hermite",(function(){return va})),n.d(i,"bezier",(function(){return ma})),n.d(i,"random",(function(){return ya})),n.d(i,"transformMat4",(function(){return ga})),n.d(i,"transformMat3",(function(){return ba})),n.d(i,"transformQuat",(function(){return _a})),n.d(i,"rotateX",(function(){return xa})),n.d(i,"rotateY",(function(){return wa})),n.d(i,"rotateZ",(function(){return Ea})),n.d(i,"angle",(function(){return Sa})),n.d(i,"zero",(function(){return Ta})),n.d(i,"str",(function(){return Aa})),n.d(i,"exactEquals",(function(){return Ia})),n.d(i,"equals",(function(){return ka})),n.d(i,"sub",(function(){return Da})),n.d(i,"mul",(function(){return Ra})),n.d(i,"div",(function(){return Ma})),n.d(i,"dist",(function(){return Ca})),n.d(i,"sqrDist",(function(){return Na})),n.d(i,"len",(function(){return Pa})),n.d(i,"sqrLen",(function(){return Ga})),n.d(i,"forEach",(function(){return ja}));var a={};n.r(a),n.d(a,"create",(function(){return La})),n.d(a,"clone",(function(){return Ua})),n.d(a,"fromValues",(function(){return Ba})),n.d(a,"copy",(function(){return Fa})),n.d(a,"set",(function(){return za})),n.d(a,"add",(function(){return Va})),n.d(a,"subtract",(function(){return Wa})),n.d(a,"multiply",(function(){return Xa})),n.d(a,"divide",(function(){return Ha})),n.d(a,"ceil",(function(){return qa})),n.d(a,"floor",(function(){return Ya})),n.d(a,"min",(function(){return Ka})),n.d(a,"max",(function(){return Za})),n.d(a,"round",(function(){return Qa})),n.d(a,"scale",(function(){return Ja})),n.d(a,"scaleAndAdd",(function(){return $a})),n.d(a,"distance",(function(){return tu})),n.d(a,"squaredDistance",(function(){return eu})),n.d(a,"length",(function(){return nu})),n.d(a,"squaredLength",(function(){return ru})),n.d(a,"negate",(function(){return ou})),n.d(a,"inverse",(function(){return iu})),n.d(a,"normalize",(function(){return au})),n.d(a,"dot",(function(){return uu})),n.d(a,"cross",(function(){return su})),n.d(a,"lerp",(function(){return cu})),n.d(a,"random",(function(){return fu})),n.d(a,"transformMat4",(function(){return lu})),n.d(a,"transformQuat",(function(){return hu})),n.d(a,"zero",(function(){return du})),n.d(a,"str",(function(){return pu})),n.d(a,"exactEquals",(function(){return vu})),n.d(a,"equals",(function(){return mu})),n.d(a,"sub",(function(){return yu})),n.d(a,"mul",(function(){return gu})),n.d(a,"div",(function(){return bu})),n.d(a,"dist",(function(){return _u})),n.d(a,"sqrDist",(function(){return xu})),n.d(a,"len",(function(){return wu})),n.d(a,"sqrLen",(function(){return Eu})),n.d(a,"forEach",(function(){return Su}));var u={};n.r(u),n.d(u,"create",(function(){return Tu})),n.d(u,"identity",(function(){return Au})),n.d(u,"setAxisAngle",(function(){return Iu})),n.d(u,"getAxisAngle",(function(){return ku})),n.d(u,"getAngle",(function(){return Ou})),n.d(u,"multiply",(function(){return Du})),n.d(u,"rotateX",(function(){return Ru})),n.d(u,"rotateY",(function(){return Mu})),n.d(u,"rotateZ",(function(){return Cu})),n.d(u,"calculateW",(function(){return Nu})),n.d(u,"exp",(function(){return Pu})),n.d(u,"ln",(function(){return Gu})),n.d(u,"pow",(function(){return ju})),n.d(u,"slerp",(function(){return Lu})),n.d(u,"random",(function(){return Uu})),n.d(u,"invert",(function(){return Bu})),n.d(u,"conjugate",(function(){return Fu})),n.d(u,"fromMat3",(function(){return zu})),n.d(u,"fromEuler",(function(){return Vu})),n.d(u,"str",(function(){return Wu})),n.d(u,"clone",(function(){return as})),n.d(u,"fromValues",(function(){return us})),n.d(u,"copy",(function(){return ss})),n.d(u,"set",(function(){return cs})),n.d(u,"add",(function(){return fs})),n.d(u,"mul",(function(){return ls})),n.d(u,"scale",(function(){return hs})),n.d(u,"dot",(function(){return ds})),n.d(u,"lerp",(function(){return ps})),n.d(u,"length",(function(){return vs})),n.d(u,"len",(function(){return ms})),n.d(u,"squaredLength",(function(){return ys})),n.d(u,"sqrLen",(function(){return gs})),n.d(u,"normalize",(function(){return bs})),n.d(u,"exactEquals",(function(){return _s})),n.d(u,"equals",(function(){return xs})),n.d(u,"rotationTo",(function(){return ws})),n.d(u,"sqlerp",(function(){return Es})),n.d(u,"setAxes",(function(){return Ss}));var s,c,f="LAYOUT_RUN",l="LAYOUT_END",h="LAYOUT_ERROR",d="GPU_LAYOUT_RUN",p=function(t){return"string"==typeof t},v=/-(\\w)/g,m=(s=function(t){return t.replace(v,(function(t,e){return e?e.toUpperCase():""}))},c=Object.create(null),Array.isArray),y=function(t){return"number"==typeof t},g=function(t){return Number.isNaN(Number(t))},b=function(t,e,n){for(var r=[],o=0;o<t;o++)r[o]=0;return n?(n.forEach((function(t){t.source&&(r[e[t.source]]+=1),t.target&&(r[e[t.target]]+=1)})),r):r},_=function(t){for(var e=[],n=t.length,r=0;r<n;r+=1){e[r]=[];for(var o=0;o<n;o+=1)r===o?e[r][o]=0:0!==t[r][o]&&t[r][o]?e[r][o]=t[r][o]:e[r][o]=1/0}for(var i=0;i<n;i+=1)for(var a=0;a<n;a+=1)for(var u=0;u<n;u+=1)e[a][u]>e[a][i]+e[i][u]&&(e[a][u]=e[a][i]+e[i][u]);return e},x=function(t,e){var n=t.nodes,r=t.edges,o=[],i={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(t,e){i[t.id]=e;o.push([])})),r&&r.forEach((function(t){var n=t.source,r=t.target,a=i[n],u=i[r];o[a][u]=1,e||(o[u][a]=1)})),o},w=function(t,e){"function"==typeof e&&function t(e,n){if(e&&e.children)for(var r=e.children.length-1;r>=0;r--)if(!t(e.children[r],n))return;return!!n(e)}(t,e)};function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var S=function t(e){if(null===e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){var n=[];return e.forEach((function(t){n.push(t)})),n.map((function(e){return t(e)}))}if("object"===E(e)&&e!=={}){var r=Object.assign({},e);return Object.keys(r).forEach((function(e){r[e]=t(r[e])})),r}return e},T=function(t){return"function"==typeof t};function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var I=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}var e,n,r;return e=t,(n=[{key:"layout",value:function(t){return this.init(t),this.execute(!0)}},{key:"init",value:function(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[]}},{key:"execute",value:function(t){}},{key:"executeWithWorker",value:function(){}},{key:"getDefaultCfg",value:function(){return{}}},{key:"updateCfg",value:function(t){t&&Object.assign(this,t)}},{key:"getType",value:function(){return"base"}},{key:"destroy",value:function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}])&&A(e.prototype,n),r&&A(e,r),t}();function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C(t);if(e){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return M(this,n)}}function M(t,e){return!e||"object"!==k(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(i,t);var e,n,r,o=R(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).begin=[0,0],e.preventOverlap=!0,e.preventOverlapPadding=10,e.condense=!1,e.sortBy="degree",e.nodeSize=30,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.row=0,e.col=0,e.cellWidth=0,e.cellHeight=0,e.cellUsed={},e.id2manPos={},e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=e.length,r=t.begin;if(0!==n){if(1===n)return e[0].x=r[0],e[0].y=r[1],void(t.onLayoutEnd&&t.onLayoutEnd());var o=t.edges,i=[];e.forEach((function(t){i.push(t)}));var a={};if(i.forEach((function(t,e){a[t.id]=e})),("degree"===t.sortBy||!p(t.sortBy)||void 0===i[0][t.sortBy])&&(t.sortBy="degree",g(e[0].degree))){var u=b(i.length,a,o);i.forEach((function(t,e){t.degree=u[e]}))}i.sort((function(e,n){return n[t.sortBy]-e[t.sortBy]})),t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);var s=t.rows,c=null!=t.cols?t.cols:t.columns;if(t.cells=n,null!=s&&null!=c?(t.rows=s,t.cols=c):null!=s&&null==c?(t.rows=s,t.cols=Math.ceil(t.cells/t.rows)):null==s&&null!=c?(t.cols=c,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.cols*t.rows>t.cells){var f=t.small(),l=t.large();(f-1)*l>=t.cells?t.small(f-1):(l-1)*f>=t.cells&&t.large(l-1)}else for(;t.cols*t.rows<t.cells;){var h=t.small(),d=t.large();(d+1)*h>=t.cells?t.large(d+1):t.small(h+1)}t.cellWidth=t.width/t.cols,t.cellHeight=t.height/t.rows,t.condense&&(t.cellWidth=0,t.cellHeight=0),t.preventOverlap&&i.forEach((function(e){var n,r;e.x&&e.y||(e.x=0,e.y=0),m(e.size)?(n=e.size[0],r=e.size[1]):y(e.size)&&(n=e.size,r=e.size),void 0!==n&&void 0!==r||(m(t.nodeSize)?(n=t.nodeSize[0],r=t.nodeSize[1]):y(t.nodeSize)?(n=t.nodeSize,r=t.nodeSize):(n=30,r=30));var o=t.preventOverlapPadding,i=n+o,a=r+o;t.cellWidth=Math.max(t.cellWidth,i),t.cellHeight=Math.max(t.cellHeight,a)})),t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(var v=0;v<i.length;v++){var _=i[v],x=void 0;if(t.position&&(x=t.position(_)),x&&(void 0!==x.row||void 0!==x.col)){var w={row:x.row,col:x.col};if(void 0===w.col)for(w.col=0;t.used(w.row,w.col);)w.col++;else if(void 0===w.row)for(w.row=0;t.used(w.row,w.col);)w.row++;t.id2manPos[_.id]=w,t.use(w.row,w.col)}t.getPos(_)}return t.onLayoutEnd&&t.onLayoutEnd(),{edges:o,nodes:i}}t.onLayoutEnd&&t.onLayoutEnd()}},{key:"small",value:function(t){var e,n=this.rows||5,r=this.cols||5;return null==t?e=Math.min(n,r):Math.min(n,r)===this.rows?this.rows=t:this.cols=t,e}},{key:"large",value:function(t){var e,n=this.rows||5,r=this.cols||5;return null==t?e=Math.max(n,r):Math.max(n,r)===this.rows?this.rows=t:this.cols=t,e}},{key:"used",value:function(t,e){return this.cellUsed["c-".concat(t,"-").concat(e)]||!1}},{key:"use",value:function(t,e){this.cellUsed["c-".concat(t,"-").concat(e)]=!0}},{key:"moveToNextCell",value:function(){var t=this.cols||5;this.col++,this.col>=t&&(this.col=0,this.row++)}},{key:"getPos",value:function(t){var e,n,r=this.begin,o=this.cellWidth,i=this.cellHeight,a=this.id2manPos[t.id];if(a)e=a.col*o+o/2+r[0],n=a.row*i+i/2+r[1];else{for(;this.used(this.row,this.col);)this.moveToNextCell();e=this.col*o+o/2+r[0],n=this.row*i+i/2+r[1],this.use(this.row,this.col),this.moveToNextCell()}t.x=e,t.y=n}},{key:"getType",value:function(){return"grid"}}])&&O(e.prototype,n),r&&O(e,r),i}(I);function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function L(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=B(t);if(e){var o=B(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return U(this,n)}}function U(t,e){return!e||"object"!==P(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}(i,t);var e,n,r,o=L(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).center=[0,0],e.width=300,e.height=300,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{center:[0,0],width:300,height:300}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=t.center;return t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),e&&e.forEach((function(e){e.x=.9*(Math.random()-.5)*t.width+n[0],e.y=.9*(Math.random()-.5)*t.height+n[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:this.edges}}},{key:"getType",value:function(){return"random"}}])&&G(e.prototype,n),r&&G(e,r),i}(I);function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function W(t,e){return(W=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function X(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=q(t);if(e){var o=q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return H(this,n)}}function H(t,e){return!e||"object"!==z(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Y=function(t,e){return t?y(t)?function(e){return t}:t:function(t){return e||1}},K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&W(t,e)}(i,t);var e,n,r,o=X(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.edgeStrength=200,e.nodeStrength=1e3,e.coulombDisScale=.005,e.damping=.9,e.maxSpeed=1e3,e.minMovement=.5,e.interval=.02,e.factor=1,e.linkDistance=1,e.gravity=10,e.preventOverlap=!0,e.tick=function(){},e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:500,gravity:10,enableTick:!0}}},{key:"execute",value:function(){var t=this,e=t.nodes;if(void 0!==t.timeInterval&&"undefined"!=typeof window&&window.clearInterval(t.timeInterval),e&&0!==e.length){t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var n=t.center;if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(t.onLayoutEnd&&t.onLayoutEnd());var r={},o={};e.forEach((function(e,n){y(e.x)||(e.x=Math.random()*t.width),y(e.y)||(e.y=Math.random()*t.height),r[e.id]=e,o[e.id]=n})),t.nodeMap=r,t.nodeIdxMap=o,t.linkDistance=Y(t.linkDistance,1),t.nodeStrength=Y(t.nodeStrength,1),t.edgeStrength=Y(t.edgeStrength,1);var i,a=t.nodeSize;if(t.preventOverlap){var u,s=t.nodeSpacing;u=y(s)?function(){return s}:T(s)?s:function(){return 0},i=a?m(a)?function(t){return(a[0]>a[1]?a[0]:a[1])+u(t)}:function(t){return a+u(t)}:function(t){return t.size?m(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])+u(t):t.size+u(t):10+u(t)}}t.nodeSize=i;var c=t.edges;t.degrees=b(e.length,t.nodeIdxMap,c),t.getMass||(t.getMass=function(e){return t.degrees[t.nodeIdxMap[e.id]]}),t.run()}else t.onLayoutEnd&&t.onLayoutEnd()}},{key:"run",value:function(){var t=this,e=t.nodes,n=t.edges,r=t.maxIteration;if("undefined"!=typeof window){var o=0;this.timeInterval=window.setInterval((function(){var i=[],a=[];if(e){e.forEach((function(t,e){i[2*e]=0,i[2*e+1]=0,a[2*e]=0,a[2*e+1]=0})),t.calRepulsive(i,e),n&&t.calAttractive(i,n),t.calGravity(i,e);var u=Math.max(.02,t.interval-.002*o);t.updateVelocity(i,a,u,e);var s=[];e.forEach((function(t){s.push({x:t.x,y:t.y})})),t.updatePosition(a,u,e),t.tick&&t.tick();var c=0;e.forEach((function(t,e){var n=t.x-s[e].x,r=t.y-s[e].y;c+=Math.sqrt(n*n+r*r)})),(c/=e.length)<t.minMovement&&(window.clearInterval(t.timeInterval),t.onLayoutEnd&&t.onLayoutEnd()),++o>r&&(window.clearInterval(t.timeInterval),t.onLayoutEnd&&t.onLayoutEnd())}}),0)}}},{key:"calRepulsive",value:function(t,e){var n=this.getMass,r=this.nodeStrength,o=this.factor,i=this.coulombDisScale,a=this.preventOverlap,u=this.nodeSize;e.forEach((function(s,c){var f=n?n(s):1;e.forEach((function(e,l){if(!(c>=l)){var h=s.x-e.x,d=s.y-e.y,p=Math.sqrt(h*h+d*d)+.01,v=(p+.1)*i,m=h/p,y=d/p,g=(r(s)+r(e))/2*o/(v*v),b=n?n(e):1;if(t[2*c]+=m*g/f,t[2*c+1]+=y*g/f,t[2*l]-=m*g/b,t[2*l+1]-=y*g/b,a&&p<(u(s)+u(e))/2){var _=(r(s)+r(e))/2/(p*p);t[2*c]+=m*_/f,t[2*c+1]+=y*_/f,t[2*l]-=m*_/b,t[2*l+1]-=y*_/b}}}))}))}},{key:"calAttractive",value:function(t,e){var n=this.nodeMap,r=this.nodeIdxMap,o=this.linkDistance,i=this.edgeStrength,a=this.getMass;e.forEach((function(e,u){var s=n[e.source],c=n[e.target],f=c.x-s.x,l=c.y-s.y,h=Math.sqrt(f*f+l*l)+.01,d=f/h,p=l/h,v=((o(e)||1)-h)*i(e),m=r[e.source],y=r[e.target],g=a?a(s):1,b=a?a(c):1;t[2*m]-=d*v/g,t[2*m+1]-=p*v/g,t[2*y]+=d*v/b,t[2*y+1]+=p*v/b}))}},{key:"calGravity",value:function(t,e){for(var n=this.center,r=this.gravity,o=this.degrees,i=e.length,a=0;a<i;a++){var u=e[a],s=u.x-n[0],c=u.y-n[1],f=r;if(this.getCenter){var l=this.getCenter(u,o[a]);l&&y(l[0])&&y(l[1])&&y(l[2])&&(s=u.x-l[0],c=u.y-l[1],f=l[2])}f&&(t[2*a]-=f*s,t[2*a+1]-=f*c)}}},{key:"updateVelocity",value:function(t,e,n,r){var o=this,i=n*o.damping;r.forEach((function(n,r){var a=t[2*r]*i||.01,u=t[2*r+1]*i||.01,s=Math.sqrt(a*a+u*u);if(s>o.maxSpeed){var c=o.maxSpeed/s;a*=c,u*=c}e[2*r]=a,e[2*r+1]=u}))}},{key:"updatePosition",value:function(t,e,n){n.forEach((function(n,r){var o=t[2*r]*e,i=t[2*r+1]*e;n.x+=o,n.y+=i}))}},{key:"stop",value:function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)}},{key:"destroy",value:function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0}},{key:"getType",value:function(){return"gForce"}}])&&V(e.prototype,n),r&&V(e,r),i}(I);function Z(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var o,i,a,u,s,c,f,l,h,d=t._root,p={data:r},v=t._x0,m=t._y0,y=t._x1,g=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=e>=(i=(v+y)/2))?v=i:y=i,(f=n>=(a=(m+g)/2))?m=a:g=a,o=d,!(d=d[l=f<<1|c]))return o[l]=p,t;if(u=+t._x.call(null,d.data),s=+t._y.call(null,d.data),e===u&&n===s)return p.next=d,o?o[l]=p:t._root=p,t;do{o=o?o[l]=new Array(4):t._root=new Array(4),(c=e>=(i=(v+y)/2))?v=i:y=i,(f=n>=(a=(m+g)/2))?m=a:g=a}while((l=f<<1|c)==(h=(s>=a)<<1|u>=i));return o[h]=d,o[l]=p,t}var Q=function(t,e,n,r,o){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=o};function J(t){return t[0]}function $(t){return t[1]}function tt(t,e,n){var r=new et(null==e?J:e,null==n?$:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function et(t,e,n,r,o,i){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=o,this._y1=i,this._root=void 0}function nt(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var rt=tt.prototype=et.prototype;rt.copy=function(){var t,e,n=new et(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=nt(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var o=0;o<4;++o)(e=r.source[o])&&(e.length?t.push({source:e,target:r.target[o]=new Array(4)}):r.target[o]=nt(e));return n},rt.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Z(this.cover(e,n),e,n,t)},rt.addAll=function(t){var e,n,r,o,i=t.length,a=new Array(i),u=new Array(i),s=1/0,c=1/0,f=-1/0,l=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(a[n]=r,u[n]=o,r<s&&(s=r),r>f&&(f=r),o<c&&(c=o),o>l&&(l=o));if(s>f||c>l)return this;for(this.cover(s,c).cover(f,l),n=0;n<i;++n)Z(this,a[n],u[n],t[n]);return this},rt.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,o=this._x1,i=this._y1;if(isNaN(n))o=(n=Math.floor(t))+1,i=(r=Math.floor(e))+1;else{for(var a,u,s=o-n||1,c=this._root;n>t||t>=o||r>e||e>=i;)switch(u=(e<r)<<1|t<n,(a=new Array(4))[u]=c,c=a,s*=2,u){case 0:o=n+s,i=r+s;break;case 1:n=o-s,i=r+s;break;case 2:o=n+s,r=i-s;break;case 3:n=o-s,r=i-s}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=o,this._y1=i,this},rt.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},rt.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},rt.find=function(t,e,n){var r,o,i,a,u,s,c,f=this._x0,l=this._y0,h=this._x1,d=this._y1,p=[],v=this._root;for(v&&p.push(new Q(v,f,l,h,d)),null==n?n=1/0:(f=t-n,l=e-n,h=t+n,d=e+n,n*=n);s=p.pop();)if(!(!(v=s.node)||(o=s.x0)>h||(i=s.y0)>d||(a=s.x1)<f||(u=s.y1)<l))if(v.length){var m=(o+a)/2,y=(i+u)/2;p.push(new Q(v[3],m,y,a,u),new Q(v[2],o,y,m,u),new Q(v[1],m,i,a,y),new Q(v[0],o,i,m,y)),(c=(e>=y)<<1|t>=m)&&(s=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=s)}else{var g=t-+this._x.call(null,v.data),b=e-+this._y.call(null,v.data),_=g*g+b*b;if(_<n){var x=Math.sqrt(n=_);f=t-x,l=e-x,h=t+x,d=e+x,r=v.data}}return r},rt.remove=function(t){if(isNaN(i=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,o,i,a,u,s,c,f,l,h,d=this._root,p=this._x0,v=this._y0,m=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((c=i>=(u=(p+m)/2))?p=u:m=u,(f=a>=(s=(v+y)/2))?v=s:y=s,e=d,!(d=d[l=f<<1|c]))return this;if(!d.length)break;(e[l+1&3]||e[l+2&3]||e[l+3&3])&&(n=e,h=l)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(o=d.next)&&delete d.next,r?(o?r.next=o:delete r.next,this):e?(o?e[l]=o:delete e[l],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=o,this)},rt.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},rt.root=function(){return this._root},rt.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},rt.visit=function(t){var e,n,r,o,i,a,u=[],s=this._root;for(s&&u.push(new Q(s,this._x0,this._y0,this._x1,this._y1));e=u.pop();)if(!t(s=e.node,r=e.x0,o=e.y0,i=e.x1,a=e.y1)&&s.length){var c=(r+i)/2,f=(o+a)/2;(n=s[3])&&u.push(new Q(n,c,f,i,a)),(n=s[2])&&u.push(new Q(n,r,f,c,a)),(n=s[1])&&u.push(new Q(n,c,o,i,f)),(n=s[0])&&u.push(new Q(n,r,o,c,f))}return this},rt.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Q(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var o=e.node;if(o.length){var i,a=e.x0,u=e.y0,s=e.x1,c=e.y1,f=(a+s)/2,l=(u+c)/2;(i=o[0])&&n.push(new Q(i,a,u,f,l)),(i=o[1])&&n.push(new Q(i,f,u,s,l)),(i=o[2])&&n.push(new Q(i,a,l,f,c)),(i=o[3])&&n.push(new Q(i,f,l,s,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},rt.x=function(t){return arguments.length?(this._x=t,this):this._x},rt.y=function(t){return arguments.length?(this._y=t,this):this._y};var ot=function(t){return function(){return t}},it=function(t){return 1e-6*(t()-.5)},at={value:function(){}};function ut(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new st(r)}function st(t){this._=t}function ct(t,e){return t.trim().split(/^|\\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function ft(t,e){for(var n,r=0,o=t.length;r<o;++r)if((n=t[r]).name===e)return n.value}function lt(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=at,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}st.prototype=ut.prototype={constructor:st,on:function(t,e){var n,r=this._,o=ct(t+"",r),i=-1,a=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++i<a;)if(n=(t=o[i]).type)r[n]=lt(r[n],t.name,e);else if(null==e)for(n in r)r[n]=lt(r[n],t.name,null);return this}for(;++i<a;)if((n=(t=o[i]).type)&&(n=ft(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new st(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,n=(r=this._[t]).length;i<n;++i)r[i].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(e,n)}};var ht=ut;function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var pt,vt,mt=0,yt=0,gt=0,bt=0,_t=0,xt=0,wt="object"===("undefined"==typeof performance?"undefined":dt(performance))&&performance.now?performance:Date,Et="object"===("undefined"==typeof window?"undefined":dt(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function St(){return _t||(Et(Tt),_t=wt.now()+xt)}function Tt(){_t=0}function At(){this._call=this._time=this._next=null}function It(t,e,n){var r=new At;return r.restart(t,e,n),r}function kt(){_t=(bt=wt.now())+xt,mt=yt=0;try{!function(){St(),++mt;for(var t,e=pt;e;)(t=_t-e._time)>=0&&e._call.call(null,t),e=e._next;--mt}()}finally{mt=0,function(){var t,e,n=pt,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:pt=e);vt=t,Dt(r)}(),_t=0}}function Ot(){var t=wt.now(),e=t-bt;e>1e3&&(xt-=e,bt=t)}function Dt(t){mt||(yt&&(yt=clearTimeout(yt)),t-_t>24?(t<1/0&&(yt=setTimeout(kt,t-wt.now()-xt)),gt&&(gt=clearInterval(gt))):(gt||(bt=wt.now(),gt=setInterval(Ot,1e3)),mt=1,Et(kt)))}At.prototype=It.prototype={constructor:At,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?St():+n)+(null==e?0:+e),this._next||vt===this||(vt?vt._next=this:pt=this,vt=this),this._call=t,this._time=n,Dt()},stop:function(){this._call&&(this._call=null,this._time=1/0,Dt())}};function Rt(t){return t.x}function Mt(t){return t.y}var Ct=Math.PI*(3-Math.sqrt(5)),Nt=function(t){var e,n,r=1,o=.001,i=1-Math.pow(o,1/300),a=0,u=.6,s=new Map,c=It(h),f=ht("tick","end"),l=(n=1,function(){return(n=(1664525*n+1013904223)%4294967296)/4294967296});function h(){d(),f.call("tick",e),r<o&&(c.stop(),f.call("end",e))}function d(n){var o,c,f=t.length;void 0===n&&(n=1);for(var l=0;l<n;++l)for(r+=(a-r)*i,s.forEach((function(t){t(r)})),o=0;o<f;++o)null==(c=t[o]).fx?c.x+=c.vx*=u:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=u:(c.y=c.fy,c.vy=0);return e}function p(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var o=10*Math.sqrt(.5+n),i=n*Ct;e.x=o*Math.cos(i),e.y=o*Math.sin(i)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function v(e){return e.initialize&&e.initialize(t,l),e}return null==t&&(t=[]),p(),e={tick:d,restart:function(){return c.restart(h),e},stop:function(){return c.stop(),e},nodes:function(n){return arguments.length?(t=n,p(),s.forEach(v),e):t},alpha:function(t){return arguments.length?(r=+t,e):r},alphaMin:function(t){return arguments.length?(o=+t,e):o},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(u=1-t,e):1-u},randomSource:function(t){return arguments.length?(l=t,s.forEach(v),e):l},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,v(n)),e):s.get(t)},find:function(e,n,r){var o,i,a,u,s,c=0,f=t.length;for(null==r?r=1/0:r*=r,c=0;c<f;++c)(a=(o=e-(u=t[c]).x)*o+(i=n-u.y)*i)<r&&(s=u,r=a);return s},on:function(t,n){return arguments.length>1?(f.on(t,n),e):f.on(t)}}},Pt=function(){var t,e,n,r,o,i=ot(-30),a=1,u=1/0,s=.81;function c(n){var o,i=t.length,a=tt(t,Rt,Mt).visitAfter(l);for(r=n,o=0;o<i;++o)e=t[o],a.visit(h)}function f(){if(t){var e,n,r=t.length;for(o=new Array(r),e=0;e<r;++e)n=t[e],o[n.index]=+i(n,e,t)}}function l(t){var e,n,r,i,a,u=0,s=0;if(t.length){for(r=i=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(u+=e.value,s+=n,r+=n*e.x,i+=n*e.y);t.x=r/s,t.y=i/s}else{(e=t).x=e.data.x,e.y=e.data.y;do{u+=o[e.data.index]}while(e=e.next)}t.value=u}function h(t,i,c,f){if(!t.value)return!0;var l=t.x-e.x,h=t.y-e.y,d=f-i,p=l*l+h*h;if(d*d/s<p)return p<u&&(0===l&&(p+=(l=it(n))*l),0===h&&(p+=(h=it(n))*h),p<a&&(p=Math.sqrt(a*p)),e.vx+=l*t.value*r/p,e.vy+=h*t.value*r/p),!0;if(!(t.length||p>=u)){(t.data!==e||t.next)&&(0===l&&(p+=(l=it(n))*l),0===h&&(p+=(h=it(n))*h),p<a&&(p=Math.sqrt(a*p)));do{t.data!==e&&(d=o[t.data.index]*r/p,e.vx+=l*d,e.vy+=h*d)}while(t=t.next)}}return c.initialize=function(e,r){t=e,n=r,f()},c.strength=function(t){return arguments.length?(i="function"==typeof t?t:ot(+t),f(),c):i},c.distanceMin=function(t){return arguments.length?(a=t*t,c):Math.sqrt(a)},c.distanceMax=function(t){return arguments.length?(u=t*t,c):Math.sqrt(u)},c.theta=function(t){return arguments.length?(s=t*t,c):Math.sqrt(s)},c};function Gt(t){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t){return t.index}function Lt(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}var Ut=function(t){var e,n,r,o,i,a,u=jt,s=function(t){return 1/Math.min(o[t.source.index],o[t.target.index])},c=ot(30),f=1;function l(r){for(var o=0,u=t.length;o<f;++o)for(var s,c,l,h,d,p,v,m=0;m<u;++m)c=(s=t[m]).source,h=(l=s.target).x+l.vx-c.x-c.vx||it(a),d=l.y+l.vy-c.y-c.vy||it(a),h*=p=((p=Math.sqrt(h*h+d*d))-n[m])/p*r*e[m],d*=p,l.vx-=h*(v=i[m]),l.vy-=d*v,c.vx+=h*(v=1-v),c.vy+=d*v}function h(){if(r){var a,s,c=r.length,f=t.length,l=new Map(r.map((function(t,e){return[u(t,e,r),t]})));for(a=0,o=new Array(c);a<f;++a)(s=t[a]).index=a,"object"!==Gt(s.source)&&(s.source=Lt(l,s.source)),"object"!==Gt(s.target)&&(s.target=Lt(l,s.target)),o[s.source.index]=(o[s.source.index]||0)+1,o[s.target.index]=(o[s.target.index]||0)+1;for(a=0,i=new Array(f);a<f;++a)s=t[a],i[a]=o[s.source.index]/(o[s.source.index]+o[s.target.index]);e=new Array(f),d(),n=new Array(f),p()}}function d(){if(r)for(var n=0,o=t.length;n<o;++n)e[n]=+s(t[n],n,t)}function p(){if(r)for(var e=0,o=t.length;e<o;++e)n[e]=+c(t[e],e,t)}return null==t&&(t=[]),l.initialize=function(t,e){r=t,a=e,h()},l.links=function(e){return arguments.length?(t=e,h(),l):t},l.id=function(t){return arguments.length?(u=t,l):u},l.iterations=function(t){return arguments.length?(f=+t,l):f},l.strength=function(t){return arguments.length?(s="function"==typeof t?t:ot(+t),d(),l):s},l.distance=function(t){return arguments.length?(c="function"==typeof t?t:ot(+t),p(),l):c},l};function Bt(t){return t.x+t.vx}function Ft(t){return t.y+t.vy}var zt=function(t){var e,n,r,o=1,i=1;function a(){for(var t,a,s,c,f,l,h,d=e.length,p=0;p<i;++p)for(a=tt(e,Bt,Ft).visitAfter(u),t=0;t<d;++t)s=e[t],l=n[s.index],h=l*l,c=s.x+s.vx,f=s.y+s.vy,a.visit(v);function v(t,e,n,i,a){var u=t.data,d=t.r,p=l+d;if(!u)return e>c+p||i<c-p||n>f+p||a<f-p;if(u.index>s.index){var v=c-u.x-u.vx,m=f-u.y-u.vy,y=v*v+m*m;y<p*p&&(0===v&&(y+=(v=it(r))*v),0===m&&(y+=(m=it(r))*m),y=(p-(y=Math.sqrt(y)))/y*o,s.vx+=(v*=y)*(p=(d*=d)/(h+d)),s.vy+=(m*=y)*p,u.vx-=v*(p=1-p),u.vy-=m*p)}}}function u(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var r,o,i=e.length;for(n=new Array(i),r=0;r<i;++r)o=e[r],n[o.index]=+t(o,r,e)}}return"function"!=typeof t&&(t=ot(null==t?1:+t)),a.initialize=function(t,n){e=t,r=n,s()},a.iterations=function(t){return arguments.length?(i=+t,a):i},a.strength=function(t){return arguments.length?(o=+t,a):o},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:ot(+e),s(),a):t},a};function Vt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Wt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xt(){function t(t){return function(){return t}}var e,n=function(t){return t.cluster},r=t(1),o=t(-1),i=t(100),a=t(.1),u=[0,0],s=[],c={},f=[],l=100,h=100,d={none:{x:0,y:0}},p=[],v="force",m=!0,y=.1;function g(t){if(!m)return g;e.tick(),_();for(var r,o=0,i=s.length,a=t*y;o<i;++o)(r=s[o]).vx+=(d[n(r)].x-r.x)*a,r.vy+=(d[n(r)].y-r.y)*a}function b(){s&&function(){if(!s||!s.length)return;if(void 0===n(s[0]))throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var t=(d=[],v=[],m={},y=[],u=function(t){var e={};return t.forEach((function(t){var r=n(t);e[r]||(e[r]={count:0,sumforceNodeSize:0})})),t.forEach((function(t){var o=n(t),i=r(t),a=e[o];a.count=a.count+1,a.sumforceNodeSize=a.sumforceNodeSize+Math.PI*(i*i)*1.3,e[o]=a})),e}(s),y=function(t){var e={},r=[];return t.forEach((function(t){var r=function(t){var e=n(c[t.source]),r=n(c[t.target]);return e<=r?"".concat(e,"~").concat(r):"".concat(r,"~").concat(e)}(t),o=0;void 0!==e[r]&&(o=e[r]),o+=1,e[r]=o})),Object.entries(e).forEach((function(t){var e=Vt(t,2),n=e[0],o=e[1],i=n.split("~")[0],a=n.split("~")[1];void 0!==i&&void 0!==a&&r.push({source:i,target:a,count:o})})),r}(f),Object.keys(u).forEach((function(t,e){var n=u[t];d.push({id:t,size:n.count,r:Math.sqrt(n.sumforceNodeSize/Math.PI)}),m[t]=e})),y.forEach((function(t){var e=m[t.source],n=m[t.target];void 0!==e&&void 0!==n&&v.push({source:e,target:n,count:t.count})})),{nodes:d,links:v});var u,d,v,m,y;e=Nt(t.nodes).force("x",function(t){var e,n,r,o=ot(.1);function i(t){for(var o,i=0,a=e.length;i<a;++i)(o=e[i]).vx+=(r[i]-o.x)*n[i]*t}function a(){if(e){var i,a=e.length;for(n=new Array(a),r=new Array(a),i=0;i<a;++i)n[i]=isNaN(r[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=ot(null==t?0:+t)),i.initialize=function(t){e=t,a()},i.strength=function(t){return arguments.length?(o="function"==typeof t?t:ot(+t),a(),i):o},i.x=function(e){return arguments.length?(t="function"==typeof e?e:ot(+e),a(),i):t},i}(l).strength(.1)).force("y",function(t){var e,n,r,o=ot(.1);function i(t){for(var o,i=0,a=e.length;i<a;++i)(o=e[i]).vy+=(r[i]-o.y)*n[i]*t}function a(){if(e){var i,a=e.length;for(n=new Array(a),r=new Array(a),i=0;i<a;++i)n[i]=isNaN(r[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=ot(null==t?0:+t)),i.initialize=function(t){e=t,a()},i.strength=function(t){return arguments.length?(o="function"==typeof t?t:ot(+t),a(),i):o},i.y=function(e){return arguments.length?(t="function"==typeof e?e:ot(+e),a(),i):t},i}(h).strength(.1)).force("collide",zt((function(t){return t.r})).iterations(4)).force("charge",Pt().strength(o)).force("links",Ut(t.nodes.length?t.links:[]).distance(i).strength(a)),p=e.nodes(),_()}()}function _(){return d={none:{x:0,y:0}},p.forEach((function(t){d[t.id]={x:t.x-u[0],y:t.y-u[1]}})),d}function x(t){c={},t.forEach((function(t){c[t.id]=t}))}return g.initialize=function(t){s=t,b()},g.template=function(t){return arguments.length?(v=t,b(),g):v},g.groupBy=function(t){return arguments.length?"string"==typeof t?(n=function(e){return e[t]},g):(n=t,g):n},g.enableGrouping=function(t){return arguments.length?(m=t,g):m},g.strength=function(t){return arguments.length?(y=t,g):y},g.centerX=function(t){return arguments.length?(l=t,g):l},g.centerY=function(t){return arguments.length?(h=t,g):h},g.nodes=function(t){return arguments.length?(x(t||[]),s=t||[],g):s},g.links=function(t){return arguments.length?(f=t||[],b(),g):f},g.forceNodeSize=function(e){return arguments.length?(r="function"==typeof e?e:t(+e),b(),g):r},g.nodeSize=g.forceNodeSize,g.forceCharge=function(e){return arguments.length?(o="function"==typeof e?e:t(+e),b(),g):o},g.forceLinkDistance=function(e){return arguments.length?(i="function"==typeof e?e:t(+e),b(),g):i},g.forceLinkStrength=function(e){return arguments.length?(a="function"==typeof e?e:t(+e),b(),g):a},g.offset=function(t){return arguments.length?(u=t,g):u},g.getFocis=_,g}var Ht="LAYOUT_RUN",qt="LAYOUT_END",Yt="LAYOUT_ERROR",Kt="LAYOUT_TICK",Zt="GPU_LAYOUT_RUN",Qt="GPU_LAYOUT_END";function Jt(t){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function te(t,e){return(te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ee(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=re(t);if(e){var o=re(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ne(this,n)}}function ne(t,e){return!e||"object"!==Jt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function re(t){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var oe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&te(t,e)}(i,t);var e,n,r,o=ee(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).center=[0,0],e.nodeStrength=null,e.edgeStrength=null,e.preventOverlap=!1,e.clusterNodeStrength=null,e.clusterEdgeStrength=null,e.clusterEdgeDistance=null,e.clusterNodeSize=null,e.clusterFociStrength=null,e.linkDistance=50,e.alphaDecay=.028,e.alphaMin=.001,e.alpha=.3,e.collideStrength=1,e.workerEnabled=!1,e.tick=function(){},e.onLayoutEnd=function(){},e.ticking=void 0,t&&e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}}},{key:"init",value:function(t){this.nodes=t.nodes||[];var e=t.edges||[];this.edges=e.map((function(t){var e={},n=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(t).forEach((function(r){n.indexOf(r)>-1||(e[r]=t[r])})),e})),this.ticking=!1}},{key:"execute",value:function(t){var e=this,n=e.nodes,r=e.edges;if(!e.ticking){var o=e.forceSimulation,i=e.alphaMin,a=e.alphaDecay,u=e.alpha;if(o){if(t)if(e.clustering&&e.clusterForce&&(e.clusterForce.nodes(n),e.clusterForce.links(r)),o.nodes(n),r&&e.edgeForce)e.edgeForce.links(r);else if(r&&!e.edgeForce){var s=Ut().id((function(t){return t.id})).links(r);e.edgeStrength&&s.strength(e.edgeStrength),e.linkDistance&&s.distance(e.linkDistance),e.edgeForce=s,o.force("link",s)}e.preventOverlap&&e.overlapProcess(o),o.alpha(u).restart(),this.ticking=!0}else try{var c=Pt();if(e.nodeStrength&&c.strength(e.nodeStrength),o=Nt().nodes(n),e.clustering){var f=Xt();f.centerX(e.center[0]).centerY(e.center[1]).template("force").strength(e.clusterFociStrength),r&&f.links(r),n&&f.nodes(n),f.forceLinkDistance(e.clusterEdgeDistance).forceLinkStrength(e.clusterEdgeStrength).forceCharge(e.clusterNodeStrength).forceNodeSize(e.clusterNodeSize),e.clusterForce=f,o.force("group",f)}if(o.force("center",function(t,e){var n,r=1;function o(){var o,i,a=n.length,u=0,s=0;for(o=0;o<a;++o)u+=(i=n[o]).x,s+=i.y;for(u=(u/a-t)*r,s=(s/a-e)*r,o=0;o<a;++o)(i=n[o]).x-=u,i.y-=s}return null==t&&(t=0),null==e&&(e=0),o.initialize=function(t){n=t},o.x=function(e){return arguments.length?(t=+e,o):t},o.y=function(t){return arguments.length?(e=+t,o):e},o.strength=function(t){return arguments.length?(r=+t,o):r},o}(e.center[0],e.center[1])).force("charge",c).alpha(u).alphaDecay(a).alphaMin(i),e.preventOverlap&&e.overlapProcess(o),r){var l=Ut().id((function(t){return t.id})).links(r);e.edgeStrength&&l.strength(e.edgeStrength),e.linkDistance&&l.distance(e.linkDistance),e.edgeForce=l,o.force("link",l)}if(e.workerEnabled&&!ie()&&(e.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),e.workerEnabled){o.stop();for(var h=function(t){var e=t.alphaMin(),n=t.alphaTarget(),r=t.alpha(),o=Math.log((e-n)/(r-n))/Math.log(1-t.alphaDecay());return Math.ceil(o)}(o),d=1;d<=h;d++)o.tick(),postMessage({nodes:n,currentTick:d,totalTicks:h,type:Kt},void 0);e.ticking=!1}else o.on("tick",(function(){e.tick()})).on("end",(function(){e.ticking=!1,e.onLayoutEnd&&e.onLayoutEnd()})),e.ticking=!0;e.forceSimulation=o,e.ticking=!0}catch(t){e.ticking=!1,console.warn(t)}}}},{key:"overlapProcess",value:function(t){var e,n,r=this.nodeSize,o=this.nodeSpacing,i=this.collideStrength;if(n=y(o)?function(){return o}:T(o)?o:function(){return 0},r)if(T(r))e=function(t){return r(t)+n(t)};else if(m(r)){var a=(r[0]>r[1]?r[0]:r[1])/2;e=function(t){return a+n(t)}}else if(y(r)){var u=r/2;e=function(t){return u+n(t)}}else e=function(){return 10};else e=function(t){return t.size?m(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2+n(t):t.size/2+n(t):10+n(t)};t.force("collisionForce",zt(e).strength(i))}},{key:"updateCfg",value:function(t){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.forceSimulation=null,Object.assign(this,t)}},{key:"destroy",value:function(){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.nodes=null,this.edges=null,this.destroyed=!0}}])&&$t(e.prototype,n),r&&$t(e,r),i}(I);function ie(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}function ae(t){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function se(t,e){return(se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ce(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=le(t);if(e){var o=le(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fe(this,n)}}function fe(t,e){return!e||"object"!==ae(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function le(t){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function he(t,e,n,r){t.forEach((function(e,n){t[n].children=[],t[n].parent=[]})),r?e.forEach((function(e){var r=0;e.source&&(r=n[e.source]);var o=0;e.target&&(o=n[e.target]);var i=t[r].children,a=t[o].parent;i.push(t[o].id),a.push(t[r].id)})):e.forEach((function(e){var r=0;e.source&&(r=n[e.source]);var o=0;e.target&&(o=n[e.target]);var i=t[r].children,a=t[o].children;i.push(t[o].id),a.push(t[r].id)}))}function de(t,e,n){for(var r=n.length,o=0;o<r;o++)if(t.id===n[o].source&&e.id===n[o].target||e.id===n[o].source&&t.id===n[o].target)return!0;return!1}function pe(t,e){var n=t.degree,r=e.degree;return n<r?-1:n>r?1:0}var ve=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&se(t,e)}(i,t);var e,n,r,o=ce(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).radius=null,e.startRadius=null,e.endRadius=null,e.startAngle=0,e.endAngle=2*Math.PI,e.clockwise=!0,e.divisions=1,e.ordering=null,e.angleRatio=1,e.nodes=[],e.edges=[],e.nodeMap={},e.degrees=[],e.width=300,e.height=300,e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}},{key:"execute",value:function(){var t=this.nodes,e=this.edges,n=t.length;if(0!==n){this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var r=this.center;if(1===n)return t[0].x=r[0],t[0].y=r[1],void(this.onLayoutEnd&&this.onLayoutEnd());var o=this.radius,i=this.startRadius,a=this.endRadius,u=this.divisions,s=this.startAngle,c=this.endAngle,f=(c-s)/n,l={};t.forEach((function(t,e){l[t.id]=e})),this.nodeMap=l;var h=b(t.length,l,e);this.degrees=h,o||i||a?!i&&a?i=a:i&&!a&&(a=i):o=this.height>this.width?this.width/2:this.height/2;var d=f*this.angleRatio,p=this.ordering,v=[];v="topology"===p?this.topologyOrdering():"topology-directed"===p?this.topologyOrdering(!0):"degree"===p?this.degreeOrdering():t;for(var m=this.clockwise,y=Math.ceil(n/u),g=0;g<n;++g){var _=o;_||null===i||null===a||(_=i+g*(a-i)/(n-1)),_||(_=10+100*g/(n-1));var x=s+g%y*d+2*Math.PI/u*Math.floor(g/y);m||(x=c-g%y*d-2*Math.PI/u*Math.floor(g/y)),v[g].x=r[0]+Math.cos(x)*_,v[g].y=r[1]+Math.sin(x)*_,v[g].weight=h[g]}return this.onLayoutEnd&&this.onLayoutEnd(),{nodes:v,edges:this.edges}}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"topologyOrdering",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this,n=e.degrees,r=e.edges,o=e.nodes,i=S(o),a=e.nodeMap,u=[i[0]],s=[o[0]],c=[],f=o.length;c[0]=!0,he(i,r,a,t);var l=0;return i.forEach((function(t,e){if(0!==e)if(e!==f-1&&n[e]===n[e+1]&&!de(u[l],t,r)||c[e]){for(var h=u[l].children,d=!1,p=0;p<h.length;p++){var v=a[h[p]];if(n[v]===n[e]&&!c[v]){u.push(i[v]),s.push(o[a[i[v].id]]),c[v]=!0,d=!0;break}}for(var m=0;!d&&(c[m]||(u.push(i[m]),s.push(o[a[i[m].id]]),c[m]=!0,d=!0),++m!==f););}else u.push(t),s.push(o[a[t.id]]),c[e]=!0,l++})),s}},{key:"degreeOrdering",value:function(){var t=this.nodes,e=[],n=this.degrees;return t.forEach((function(t,r){t.degree=n[r],e.push(t)})),e.sort(pe),e}},{key:"getType",value:function(){return"circular"}}])&&ue(e.prototype,n),r&&ue(e,r),i}(I),me=n(102),ye=n.n(me);function ge(t){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _e(t,e){return(_e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ee(t);if(e){var o=Ee(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return we(this,n)}}function we(t,e){return!e||"object"!==ge(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ee(t){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Se=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_e(t,e)}(i,t);var e,n,r,o=xe(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).rankdir="TB",e.nodesep=50,e.ranksep=50,e.controlPoints=!1,e.sortByCombo=!1,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=t.nodeSize,r=t.rankdir;if(e){var o,i=t.edges||[],a=new ye.a.graphlib.Graph;o=n?m(n)?function(){return n}:function(){return[n,n]}:function(t){return t.size?m(t.size)?t.size:[t.size,t.size]:[40,40]};var u,s=Te(t.nodesepFunc,t.nodesep,50),c=Te(t.ranksepFunc,t.ranksep,50);return"LR"!==r&&"RL"!==r||(s=Te(t.ranksepFunc,t.ranksep,50),c=Te(t.nodesepFunc,t.nodesep,50)),a.setDefaultEdgeLabel((function(){return{}})),a.setGraph(t),e.forEach((function(t){var e=o(t),n=c(t),r=s(t),i=e[0]+2*r,u=e[1]+2*n;a.setNode(t.id,{width:i,height:u})})),i.forEach((function(t){a.setEdge(t.source,t.target,{weight:t.weight||1})})),ye.a.layout(a),a.nodes().forEach((function(t){u=a.node(t);var n=e.findIndex((function(e){return e.id===t}));e[n].x=u.x,e[n].y=u.y})),a.edges().forEach((function(e){u=a.edge(e);var n=i.findIndex((function(t){return t.source===e.v&&t.target===e.w}));t.controlPoints&&"loop"!==i[n].type&&(i[n].controlPoints=u.points.slice(1,u.points.length-1))})),t.sortByCombo&&t.sortLevel("comboId"),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:i}}}},{key:"sortLevel",value:function(t){var e=this,n=e.nodes,r={};n.forEach((function(t){r[t.y]||(r[t.y]={y:t.y,nodes:[]}),r[t.y].nodes.push(t)})),Object.keys(r).forEach((function(n){var o=r[n].nodes,i=o.length,a={};if(o.forEach((function(t){var e=t.comboId;a[e]||(a[e]={x:0,y:0,count:0}),a[e].x+=t.x,a[e].y+=t.y,a[e].count++})),Object.keys(a).forEach((function(t){a[t].x/=a[t].count,a[t].y/=a[t].count})),1!==i){var u=o.sort((function(t,e){return t.x-e.x})),s=u[0].x,c=(u[i-1].x-s)/(i-1);o.sort((function(e,n){var r=e[t]||"undefined",o=n[t]||"undefined";return r<o?-1:r>o?1:0})).forEach((function(t,e){t.x=s+e*c}))}else e.onLayoutEnd&&e.onLayoutEnd()}))}},{key:"getType",value:function(){return"dagre"}}])&&be(e.prototype,n),r&&be(e,r),i}(I);function Te(t,e,n){return t||(y(e)?function(){return e}:function(){return n})}var Ae=Object.prototype.toString;function Ie(t){return Ae.call(t).endsWith("Array]")}var ke=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ie(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,r=void 0===n?0:n,o=e.toIndex,i=void 0===o?t.length:o;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=r||i>t.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[r],u=r+1;u<i;u++)t[u]>a&&(a=t[u]);return a};var Oe=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ie(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,r=void 0===n?0:n,o=e.toIndex,i=void 0===o?t.length:o;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=r||i>t.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[r],u=r+1;u<i;u++)t[u]<a&&(a=t[u]);return a};var De=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ie(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!Ie(n.output))throw new TypeError("output option must be an array if specified");e=n.output}else e=new Array(t.length);var r=Oe(t),o=ke(t);if(r===o)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var i=n.min,a=void 0===i?n.autoMinMax?r:0:i,u=n.max,s=void 0===u?n.autoMinMax?o:1:u;if(a>=s)throw new RangeError("min option must be smaller than max option");for(var c=(s-a)/(o-r),f=0;f<t.length;f++)e[f]=(t[f]-r)*c+a;return e},Re=" ".repeat(2),Me=" ".repeat(4);function Ce(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.maxRows,r=void 0===n?15:n,o=e.maxColumns,i=void 0===o?10:o,a=e.maxNumSize,u=void 0===a?8:a;return"".concat(t.constructor.name," {\\n").concat(Re,"[\\n").concat(Me).concat(Ne(t,r,i,u),"\\n").concat(Re,"]\\n").concat(Re,"rows: ").concat(t.rows,"\\n").concat(Re,"columns: ").concat(t.columns,"\\n}")}function Ne(t,e,n,r){for(var o=t.rows,i=t.columns,a=Math.min(o,e),u=Math.min(i,n),s=[],c=0;c<a;c++){for(var f=[],l=0;l<u;l++)f.push(Pe(t.get(c,l),r));s.push("".concat(f.join(" ")))}return u!==i&&(s[s.length-1]+=" ... ".concat(i-n," more columns")),a!==o&&s.push("... ".concat(o-e," more rows")),s.join("\\n".concat(Me))}function Pe(t,e){var n=String(t);if(n.length<=e)return n.padEnd(e," ");var r=t.toPrecision(e-2);if(r.length<=e)return r;var o=t.toExponential(e-2),i=o.indexOf("e"),a=o.slice(i);return o.slice(0,e-a.length)+a}function Ge(t){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function je(t,e,n){var r=n?t.rows:t.rows-1;if(e<0||e>r)throw new RangeError("Row index out of range")}function Le(t,e,n){var r=n?t.columns:t.columns-1;if(e<0||e>r)throw new RangeError("Column index out of range")}function Ue(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function Be(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function Fe(t,e){if("object"!==Ge(e))throw new TypeError("unexpected type for row indices");if(e.some((function(e){return e<0||e>=t.rows})))throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function ze(t,e){if("object"!==Ge(e))throw new TypeError("unexpected type for column indices");if(e.some((function(e){return e<0||e>=t.columns})))throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function Ve(t,e,n,r,o){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(Xe("startRow",e),Xe("endRow",n),Xe("startColumn",r),Xe("endColumn",o),e>n||r>o||e<0||e>=t.rows||n<0||n>=t.rows||r<0||r>=t.columns||o<0||o>=t.columns)throw new RangeError("Submatrix indices are out of range")}function We(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=0;r<t;r++)n.push(e);return n}function Xe(t,e){if("number"!=typeof e)throw new TypeError("".concat(t," must be a number"))}function He(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}function qe(t,e,n){for(var r=t.rows,o=t.columns,i=[],a=0;a<r;a++){for(var u=0,s=0,c=0,f=0;f<o;f++)u+=c=t.get(a,f)-n[a],s+=c*c;e?i.push((s-u*u/o)/(o-1)):i.push((s-u*u/o)/o)}return i}function Ye(t,e,n){for(var r=t.rows,o=t.columns,i=[],a=0;a<o;a++){for(var u=0,s=0,c=0,f=0;f<r;f++)u+=c=t.get(f,a)-n[a],s+=c*c;e?i.push((s-u*u/r)/(r-1)):i.push((s-u*u/r)/r)}return i}function Ke(t,e,n){for(var r=t.rows,o=t.columns,i=r*o,a=0,u=0,s=0,c=0;c<r;c++)for(var f=0;f<o;f++)a+=s=t.get(c,f)-n,u+=s*s;return e?(u-a*a/i)/(i-1):(u-a*a/i)/i}function Ze(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[n])}function Qe(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[r])}function Je(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e)}function $e(t){for(var e=[],n=0;n<t.rows;n++){for(var r=0,o=0;o<t.columns;o++)r+=Math.pow(t.get(n,o),2)/(t.columns-1);e.push(Math.sqrt(r))}return e}function tn(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[n])}function en(t){for(var e=[],n=0;n<t.columns;n++){for(var r=0,o=0;o<t.rows;o++)r+=Math.pow(t.get(o,n),2)/(t.rows-1);e.push(Math.sqrt(r))}return e}function nn(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[r])}function rn(t){for(var e=t.size-1,n=0,r=0;r<t.columns;r++)for(var o=0;o<t.rows;o++)n+=Math.pow(t.get(o,r),2)/e;return Math.sqrt(n)}function on(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e)}function an(t,e){return(an=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function un(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=cn(t);if(e){var o=cn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return sn(this,n)}}function sn(t,e){return!e||"object"!==fn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cn(t){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fn(t){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ln(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dn(t,e,n){return e&&hn(t.prototype,e),n&&hn(t,n),t}var pn=function(){function t(){ln(this,t)}return dn(t,[{key:"apply",value:function(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.call(this,e,n);return this}},{key:"to1DArray",value:function(){for(var t=[],e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.push(this.get(e,n));return t}},{key:"to2DArray",value:function(){for(var t=[],e=0;e<this.rows;e++){t.push([]);for(var n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return 1===this.rows}},{key:"isColumnVector",value:function(){return 1===this.columns}},{key:"isVector",value:function(){return 1===this.rows||1===this.columns}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return 0===this.rows||0===this.columns}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var t=0,e=0,n=-1,r=!0,o=!1;t<this.rows&&r;){for(e=0,o=!1;e<this.columns&&!1===o;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(o=!0,n=e):(r=!1,o=!0);t++}return r}},{key:"isReducedEchelonForm",value:function(){for(var t=0,e=0,n=-1,r=!0,o=!1;t<this.rows&&r;){for(e=0,o=!1;e<this.columns&&!1===o;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(o=!0,n=e):(r=!1,o=!0);for(var i=e+1;i<this.rows;i++)0!==this.get(t,i)&&(r=!1);t++}return r}},{key:"echelonForm",value:function(){for(var t=this.clone(),e=0,n=0;e<t.rows&&n<t.columns;){for(var r=e,o=e;o<t.rows;o++)t.get(o,n)>t.get(r,n)&&(r=o);if(0===t.get(r,n))n++;else{t.swapRows(e,r);for(var i=t.get(e,n),a=n;a<t.columns;a++)t.set(e,a,t.get(e,a)/i);for(var u=e+1;u<t.rows;u++){var s=t.get(u,n)/t.get(e,n);t.set(u,n,0);for(var c=n+1;c<t.columns;c++)t.set(u,c,t.get(u,c)-t.get(e,c)*s)}e++,n++}}return t}},{key:"reducedEchelonForm",value:function(){for(var t=this.echelonForm(),e=t.columns,n=t.rows,r=n-1;r>=0;)if(0===t.maxRow(r))r--;else{for(var o=0,i=!1;o<n&&!1===i;)1===t.get(r,o)?i=!0:o++;for(var a=0;a<r;a++)for(var u=t.get(a,o),s=o;s<e;s++){var c=t.get(a,s)-u*t.get(r,s);t.set(a,s,c)}r--}return t}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==fn(t))throw new TypeError("options must be an object");var e=t.rows,n=void 0===e?1:e,r=t.columns,o=void 0===r?1:r;if(!Number.isInteger(n)||n<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(o)||o<=0)throw new TypeError("columns must be a positive integer");for(var i=new gn(this.rows*n,this.columns*o),a=0;a<n;a++)for(var u=0;u<o;u++)i.setSubMatrix(this,this.rows*a,this.columns*u);return i}},{key:"fill",value:function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,t);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(t){je(this,t);for(var e=[],n=0;n<this.columns;n++)e.push(this.get(t,n));return e}},{key:"getRowVector",value:function(t){return gn.rowVector(this.getRow(t))}},{key:"setRow",value:function(t,e){je(this,t),e=Ue(this,e);for(var n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}},{key:"swapRows",value:function(t,e){je(this,t),je(this,e);for(var n=0;n<this.columns;n++){var r=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,r)}return this}},{key:"getColumn",value:function(t){Le(this,t);for(var e=[],n=0;n<this.rows;n++)e.push(this.get(n,t));return e}},{key:"getColumnVector",value:function(t){return gn.columnVector(this.getColumn(t))}},{key:"setColumn",value:function(t,e){Le(this,t),e=Be(this,e);for(var n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}},{key:"swapColumns",value:function(t,e){Le(this,t),Le(this,e);for(var n=0;n<this.rows;n++){var r=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,r)}return this}},{key:"addRowVector",value:function(t){t=Ue(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}},{key:"subRowVector",value:function(t){t=Ue(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}},{key:"mulRowVector",value:function(t){t=Ue(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}},{key:"divRowVector",value:function(t){t=Ue(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}},{key:"addColumnVector",value:function(t){t=Be(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}},{key:"subColumnVector",value:function(t){t=Be(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}},{key:"mulColumnVector",value:function(t){t=Be(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}},{key:"divColumnVector",value:function(t){t=Be(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}},{key:"mulRow",value:function(t,e){je(this,t);for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}},{key:"mulColumn",value:function(t,e){Le(this,t);for(var n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}},{key:"max",value:function(){if(this.isEmpty())return NaN;for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}},{key:"maxIndex",value:function(){He(this);for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}},{key:"min",value:function(){if(this.isEmpty())return NaN;for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}},{key:"minIndex",value:function(){He(this);for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}},{key:"maxRow",value:function(t){if(je(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}},{key:"maxRowIndex",value:function(t){je(this,t),He(this);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}},{key:"minRow",value:function(t){if(je(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}},{key:"minRowIndex",value:function(t){je(this,t),He(this);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}},{key:"maxColumn",value:function(t){if(Le(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}},{key:"maxColumnIndex",value:function(t){Le(this,t),He(this);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}},{key:"minColumn",value:function(t){if(Le(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}},{key:"minColumnIndex",value:function(t){Le(this,t),He(this);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}},{key:"diag",value:function(){for(var t=Math.min(this.rows,this.columns),e=[],n=0;n<t;n++)e.push(this.get(n,n));return e}},{key:"norm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frobenius",e=0;if("max"===t)return this.max();if("frobenius"===t){for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)e+=this.get(n,r)*this.get(n,r);return Math.sqrt(e)}throw new RangeError("unknown norm type: ".concat(t))}},{key:"cumulativeSum",value:function(){for(var t=0,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}},{key:"dot",value:function(e){t.isMatrix(e)&&(e=e.to1DArray());var n=this.to1DArray();if(n.length!==e.length)throw new RangeError("vectors do not have the same size");for(var r=0,o=0;o<n.length;o++)r+=n[o]*e[o];return r}},{key:"mmul",value:function(t){t=gn.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.columns,o=new gn(e,r),i=new Float64Array(n),a=0;a<r;a++){for(var u=0;u<n;u++)i[u]=t.get(u,a);for(var s=0;s<e;s++){for(var c=0,f=0;f<n;f++)c+=this.get(s,f)*i[f];o.set(s,a,c)}}return o}},{key:"strassen2x2",value:function(t){t=gn.checkMatrix(t);var e=new gn(2,2),n=this.get(0,0),r=t.get(0,0),o=this.get(0,1),i=t.get(0,1),a=this.get(1,0),u=t.get(1,0),s=this.get(1,1),c=t.get(1,1),f=(n+s)*(r+c),l=(a+s)*r,h=n*(i-c),d=s*(u-r),p=(n+o)*c,v=f+d-p+(o-s)*(u+c),m=h+p,y=l+d,g=f-l+h+(a-n)*(r+i);return e.set(0,0,v),e.set(0,1,m),e.set(1,0,y),e.set(1,1,g),e}},{key:"strassen3x3",value:function(t){t=gn.checkMatrix(t);var e=new gn(3,3),n=this.get(0,0),r=this.get(0,1),o=this.get(0,2),i=this.get(1,0),a=this.get(1,1),u=this.get(1,2),s=this.get(2,0),c=this.get(2,1),f=this.get(2,2),l=t.get(0,0),h=t.get(0,1),d=t.get(0,2),p=t.get(1,0),v=t.get(1,1),m=t.get(1,2),y=t.get(2,0),g=t.get(2,1),b=t.get(2,2),_=(n-i)*(-h+v),x=(-n+i+a)*(l-h+v),w=(i+a)*(-l+h),E=n*l,S=(-n+s+c)*(l-d+m),T=(-n+s)*(d-m),A=(s+c)*(-l+d),I=(-o+c+f)*(v+y-g),k=(o-f)*(v-g),O=o*y,D=(c+f)*(-y+g),R=(-o+a+u)*(m+y-b),M=(o-u)*(m-b),C=(a+u)*(-y+b),N=E+O+r*p,P=(n+r+o-i-a-c-f)*v+x+w+E+I+O+D,G=E+S+A+(n+r+o-a-u-s-c)*m+O+R+C,j=_+a*(-l+h+p-v-m-y+b)+x+E+O+R+M,L=_+x+w+E+u*g,U=O+R+M+C+i*d,B=E+S+T+c*(-l+d+p-v-m-y+g)+I+k+O,F=I+k+O+D+s*h,z=E+S+T+A+f*b;return e.set(0,0,N),e.set(0,1,P),e.set(0,2,G),e.set(1,0,j),e.set(1,1,L),e.set(1,2,U),e.set(2,0,B),e.set(2,1,F),e.set(2,2,z),e}},{key:"mmulStrassen",value:function(e){e=gn.checkMatrix(e);var n=this.clone(),r=n.rows,o=n.columns,i=e.rows,a=e.columns;function u(e,n,r){var o=e.rows,i=e.columns;if(o===n&&i===r)return e;var a=t.zeros(n,r);return a=a.setSubMatrix(e,0,0)}o!==i&&console.warn("Multiplying ".concat(r," x ").concat(o," and ").concat(i," x ").concat(a," matrix: dimensions do not match."));var s=Math.max(r,i),c=Math.max(o,a);return function e(n,r,o,i){if(o<=512||i<=512)return n.mmul(r);o%2==1&&i%2==1?(n=u(n,o+1,i+1),r=u(r,o+1,i+1)):o%2==1?(n=u(n,o+1,i),r=u(r,o+1,i)):i%2==1&&(n=u(n,o,i+1),r=u(r,o,i+1));var a=parseInt(n.rows/2,10),s=parseInt(n.columns/2,10),c=n.subMatrix(0,a-1,0,s-1),f=r.subMatrix(0,a-1,0,s-1),l=n.subMatrix(0,a-1,s,n.columns-1),h=r.subMatrix(0,a-1,s,r.columns-1),d=n.subMatrix(a,n.rows-1,0,s-1),p=r.subMatrix(a,r.rows-1,0,s-1),v=n.subMatrix(a,n.rows-1,s,n.columns-1),m=r.subMatrix(a,r.rows-1,s,r.columns-1),y=e(t.add(c,v),t.add(f,m),a,s),g=e(t.add(d,v),f,a,s),b=e(c,t.sub(h,m),a,s),_=e(v,t.sub(p,f),a,s),x=e(t.add(c,l),m,a,s),w=e(t.sub(d,c),t.add(f,h),a,s),E=e(t.sub(l,v),t.add(p,m),a,s),S=t.add(y,_);S.sub(x),S.add(E);var T=t.add(b,x),A=t.add(g,_),I=t.sub(y,g);I.add(b),I.add(w);var k=t.zeros(2*S.rows,2*S.columns);return(k=(k=(k=(k=k.setSubMatrix(S,0,0)).setSubMatrix(T,S.rows,0)).setSubMatrix(A,0,S.columns)).setSubMatrix(I,S.rows,S.columns)).subMatrix(0,o-1,0,i-1)}(n=u(n,s,c),e=u(e,s,c),s,c)}},{key:"scaleRows",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==fn(t))throw new TypeError("options must be an object");var e=t.min,n=void 0===e?0:e,r=t.max,o=void 0===r?1:r;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(n>=o)throw new RangeError("min must be smaller than max");for(var i=new gn(this.rows,this.columns),a=0;a<this.rows;a++){var u=this.getRow(a);u.length>0&&De(u,{min:n,max:o,output:u}),i.setRow(a,u)}return i}},{key:"scaleColumns",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==fn(t))throw new TypeError("options must be an object");var e=t.min,n=void 0===e?0:e,r=t.max,o=void 0===r?1:r;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(n>=o)throw new RangeError("min must be smaller than max");for(var i=new gn(this.rows,this.columns),a=0;a<this.columns;a++){var u=this.getColumn(a);u.length&&De(u,{min:n,max:o,output:u}),i.setColumn(a,u)}return i}},{key:"flipRows",value:function(){for(var t=Math.ceil(this.columns/2),e=0;e<this.rows;e++)for(var n=0;n<t;n++){var r=this.get(e,n),o=this.get(e,this.columns-1-n);this.set(e,n,o),this.set(e,this.columns-1-n,r)}return this}},{key:"flipColumns",value:function(){for(var t=Math.ceil(this.rows/2),e=0;e<this.columns;e++)for(var n=0;n<t;n++){var r=this.get(n,e),o=this.get(this.rows-1-n,e);this.set(n,e,o),this.set(this.rows-1-n,e,r)}return this}},{key:"kroneckerProduct",value:function(t){t=gn.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.rows,o=t.columns,i=new gn(e*r,n*o),a=0;a<e;a++)for(var u=0;u<n;u++)for(var s=0;s<r;s++)for(var c=0;c<o;c++)i.set(r*a+s,o*u+c,this.get(a,u)*t.get(s,c));return i}},{key:"transpose",value:function(){for(var t=new gn(this.columns,this.rows),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}},{key:"sortRows",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn,e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}},{key:"sortColumns",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn,e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}},{key:"subMatrix",value:function(t,e,n,r){Ve(this,t,e,n,r);for(var o=new gn(e-t+1,r-n+1),i=t;i<=e;i++)for(var a=n;a<=r;a++)o.set(i-t,a-n,this.get(i,a));return o}},{key:"subMatrixRow",value:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");for(var r=new gn(t.length,n-e+1),o=0;o<t.length;o++)for(var i=e;i<=n;i++){if(t[o]<0||t[o]>=this.rows)throw new RangeError("Row index out of range: ".concat(t[o]));r.set(o,i-e,this.get(t[o],i))}return r}},{key:"subMatrixColumn",value:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");for(var r=new gn(n-e+1,t.length),o=0;o<t.length;o++)for(var i=e;i<=n;i++){if(t[o]<0||t[o]>=this.columns)throw new RangeError("Column index out of range: ".concat(t[o]));r.set(i-e,o,this.get(i,t[o]))}return r}},{key:"setSubMatrix",value:function(t,e,n){if((t=gn.checkMatrix(t)).isEmpty())return this;Ve(this,e,e+t.rows-1,n,n+t.columns-1);for(var r=0;r<t.rows;r++)for(var o=0;o<t.columns;o++)this.set(e+r,n+o,t.get(r,o));return this}},{key:"selection",value:function(t,e){for(var n=function(t,e,n){return{row:Fe(t,e),column:ze(t,n)}}(this,t,e),r=new gn(t.length,e.length),o=0;o<n.row.length;o++)for(var i=n.row[o],a=0;a<n.column.length;a++){var u=n.column[a];r.set(o,a,this.get(i,u))}return r}},{key:"trace",value:function(){for(var t=Math.min(this.rows,this.columns),e=0,n=0;n<t;n++)e+=this.get(n,n);return e}},{key:"clone",value:function(){for(var t=new gn(this.rows,this.columns),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}},{key:"sum",value:function(t){switch(t){case"row":return function(t){for(var e=We(t.rows),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[n]+=t.get(n,r);return e}(this);case"column":return function(t){for(var e=We(t.columns),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[r]+=t.get(n,r);return e}(this);case void 0:return function(t){for(var e=0,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e+=t.get(n,r);return e}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"product",value:function(t){switch(t){case"row":return function(t){for(var e=We(t.rows,1),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[n]*=t.get(n,r);return e}(this);case"column":return function(t){for(var e=We(t.columns,1),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[r]*=t.get(n,r);return e}(this);case void 0:return function(t){for(var e=1,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e*=t.get(n,r);return e}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"mean",value:function(t){var e=this.sum(t);switch(t){case"row":for(var n=0;n<this.rows;n++)e[n]/=this.columns;return e;case"column":for(var r=0;r<this.columns;r++)e[r]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error("invalid option: ".concat(t))}}},{key:"variance",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===fn(t)&&(e=t,t=void 0),"object"!==fn(e))throw new TypeError("options must be an object");var n=e,r=n.unbiased,o=void 0===r||r,i=n.mean,a=void 0===i?this.mean(t):i;if("boolean"!=typeof o)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!Array.isArray(a))throw new TypeError("mean must be an array");return qe(this,o,a);case"column":if(!Array.isArray(a))throw new TypeError("mean must be an array");return Ye(this,o,a);case void 0:if("number"!=typeof a)throw new TypeError("mean must be a number");return Ke(this,o,a);default:throw new Error("invalid option: ".concat(t))}}},{key:"standardDeviation",value:function(t,e){"object"===fn(t)&&(e=t,t=void 0);var n=this.variance(t,e);if(void 0===t)return Math.sqrt(n);for(var r=0;r<n.length;r++)n[r]=Math.sqrt(n[r]);return n}},{key:"center",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===fn(t)&&(e=t,t=void 0),"object"!==fn(e))throw new TypeError("options must be an object");var n=e,r=n.center,o=void 0===r?this.mean(t):r;switch(t){case"row":if(!Array.isArray(o))throw new TypeError("center must be an array");return Ze(this,o),this;case"column":if(!Array.isArray(o))throw new TypeError("center must be an array");return Qe(this,o),this;case void 0:if("number"!=typeof o)throw new TypeError("center must be a number");return Je(this,o),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"scale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===fn(t)&&(e=t,t=void 0),"object"!==fn(e))throw new TypeError("options must be an object");var n=e.scale;switch(t){case"row":if(void 0===n)n=$e(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return tn(this,n),this;case"column":if(void 0===n)n=en(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return nn(this,n),this;case void 0:if(void 0===n)n=rn(this);else if("number"!=typeof n)throw new TypeError("scale must be a number");return on(this,n),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"toString",value:function(t){return Ce(this,t)}},{key:"size",get:function(){return this.rows*this.columns}}],[{key:"from1DArray",value:function(t,e,n){if(t*e!==n.length)throw new RangeError("data length does not match given dimensions");for(var r=new gn(t,e),o=0;o<t;o++)for(var i=0;i<e;i++)r.set(o,i,n[o*e+i]);return r}},{key:"rowVector",value:function(t){for(var e=new gn(1,t.length),n=0;n<t.length;n++)e.set(0,n,t[n]);return e}},{key:"columnVector",value:function(t){for(var e=new gn(t.length,1),n=0;n<t.length;n++)e.set(n,0,t[n]);return e}},{key:"zeros",value:function(t,e){return new gn(t,e)}},{key:"ones",value:function(t,e){return new gn(t,e).fill(1)}},{key:"rand",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==fn(n))throw new TypeError("options must be an object");for(var r=n.random,o=void 0===r?Math.random:r,i=new gn(t,e),a=0;a<t;a++)for(var u=0;u<e;u++)i.set(a,u,o());return i}},{key:"randInt",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==fn(n))throw new TypeError("options must be an object");var r=n.min,o=void 0===r?0:r,i=n.max,a=void 0===i?1e3:i,u=n.random,s=void 0===u?Math.random:u;if(!Number.isInteger(o))throw new TypeError("min must be an integer");if(!Number.isInteger(a))throw new TypeError("max must be an integer");if(o>=a)throw new RangeError("min must be smaller than max");for(var c=a-o,f=new gn(t,e),l=0;l<t;l++)for(var h=0;h<e;h++){var d=o+Math.round(s()*c);f.set(l,h,d)}return f}},{key:"eye",value:function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);for(var r=Math.min(t,e),o=this.zeros(t,e),i=0;i<r;i++)o.set(i,i,n);return o}},{key:"diag",value:function(t,e,n){var r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);for(var o=Math.min(r,e,n),i=this.zeros(e,n),a=0;a<o;a++)i.set(a,a,t[a]);return i}},{key:"min",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,o=new gn(n,r),i=0;i<n;i++)for(var a=0;a<r;a++)o.set(i,a,Math.min(t.get(i,a),e.get(i,a)));return o}},{key:"max",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,o=new this(n,r),i=0;i<n;i++)for(var a=0;a<r;a++)o.set(i,a,Math.max(t.get(i,a),e.get(i,a)));return o}},{key:"checkMatrix",value:function(e){return t.isMatrix(e)?e:new gn(e)}},{key:"isMatrix",value:function(t){return null!=t&&"Matrix"===t.klass}}]),t}();function vn(t,e){return t-e}pn.prototype.klass="Matrix","undefined"!=typeof Symbol&&(pn.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return Ce(this)}),pn.random=pn.rand,pn.randomInt=pn.randInt,pn.diagonal=pn.diag,pn.prototype.diagonal=pn.prototype.diag,pn.identity=pn.eye,pn.prototype.negate=pn.prototype.neg,pn.prototype.tensorProduct=pn.prototype.kroneckerProduct;var mn,yn,gn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&an(t,e)}(n,t);var e=un(n);function n(t,r){var o;if(ln(this,n),o=e.call(this),n.isMatrix(t))return sn(o,t.clone());if(Number.isInteger(t)&&t>=0){if(o.data=[],!(Number.isInteger(r)&&r>=0))throw new TypeError("nColumns must be a positive integer");for(var i=0;i<t;i++)o.data.push(new Float64Array(r))}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");var a=t;if("number"!=typeof(r=(t=a.length)?a[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");o.data=[];for(var u=0;u<t;u++){if(a[u].length!==r)throw new RangeError("Inconsistent array dimensions");o.data.push(Float64Array.from(a[u]))}}return o.rows=t,o.columns=r,o}return dn(n,[{key:"set",value:function(t,e,n){return this.data[t][e]=n,this}},{key:"get",value:function(t,e){return this.data[t][e]}},{key:"removeRow",value:function(t){return je(this,t),this.data.splice(t,1),this.rows-=1,this}},{key:"addRow",value:function(t,e){return void 0===e&&(e=t,t=this.rows),je(this,t,!0),e=Float64Array.from(Ue(this,e)),this.data.splice(t,0,e),this.rows+=1,this}},{key:"removeColumn",value:function(t){Le(this,t);for(var e=0;e<this.rows;e++){for(var n=new Float64Array(this.columns-1),r=0;r<t;r++)n[r]=this.data[e][r];for(var o=t+1;o<this.columns;o++)n[o-1]=this.data[e][o];this.data[e]=n}return this.columns-=1,this}},{key:"addColumn",value:function(t,e){void 0===e&&(e=t,t=this.columns),Le(this,t,!0),e=Be(this,e);for(var n=0;n<this.rows;n++){for(var r=new Float64Array(this.columns+1),o=0;o<t;o++)r[o]=this.data[n][o];for(r[o++]=e[n];o<this.columns+1;o++)r[o]=this.data[n][o-1];this.data[n]=r}return this.columns+=1,this}}]),n}(pn);function bn(t){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xn(t,e){return(xn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Sn(t);if(e){var o=Sn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return En(this,n)}}function En(t,e){return!e||"object"!==bn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Sn(t){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}yn=gn,(mn=pn).prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},mn.prototype.addS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t);return this},mn.prototype.addM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t.get(e,n));return this},mn.add=function(t,e){return new yn(t).add(e)},mn.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},mn.prototype.subS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t);return this},mn.prototype.subM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t.get(e,n));return this},mn.sub=function(t,e){return new yn(t).sub(e)},mn.prototype.subtract=mn.prototype.sub,mn.prototype.subtractS=mn.prototype.subS,mn.prototype.subtractM=mn.prototype.subM,mn.subtract=mn.sub,mn.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},mn.prototype.mulS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this},mn.prototype.mulM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t.get(e,n));return this},mn.mul=function(t,e){return new yn(t).mul(e)},mn.prototype.multiply=mn.prototype.mul,mn.prototype.multiplyS=mn.prototype.mulS,mn.prototype.multiplyM=mn.prototype.mulM,mn.multiply=mn.mul,mn.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},mn.prototype.divS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t);return this},mn.prototype.divM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t.get(e,n));return this},mn.div=function(t,e){return new yn(t).div(e)},mn.prototype.divide=mn.prototype.div,mn.prototype.divideS=mn.prototype.divS,mn.prototype.divideM=mn.prototype.divM,mn.divide=mn.div,mn.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},mn.prototype.modS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t);return this},mn.prototype.modM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t.get(e,n));return this},mn.mod=function(t,e){return new yn(t).mod(e)},mn.prototype.modulus=mn.prototype.mod,mn.prototype.modulusS=mn.prototype.modS,mn.prototype.modulusM=mn.prototype.modM,mn.modulus=mn.mod,mn.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},mn.prototype.andS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t);return this},mn.prototype.andM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t.get(e,n));return this},mn.and=function(t,e){return new yn(t).and(e)},mn.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},mn.prototype.orS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t);return this},mn.prototype.orM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t.get(e,n));return this},mn.or=function(t,e){return new yn(t).or(e)},mn.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},mn.prototype.xorS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t);return this},mn.prototype.xorM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t.get(e,n));return this},mn.xor=function(t,e){return new yn(t).xor(e)},mn.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},mn.prototype.leftShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t);return this},mn.prototype.leftShiftM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t.get(e,n));return this},mn.leftShift=function(t,e){return new yn(t).leftShift(e)},mn.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},mn.prototype.signPropagatingRightShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t);return this},mn.prototype.signPropagatingRightShiftM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t.get(e,n));return this},mn.signPropagatingRightShift=function(t,e){return new yn(t).signPropagatingRightShift(e)},mn.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},mn.prototype.rightShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t);return this},mn.prototype.rightShiftM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t.get(e,n));return this},mn.rightShift=function(t,e){return new yn(t).rightShift(e)},mn.prototype.zeroFillRightShift=mn.prototype.rightShift,mn.prototype.zeroFillRightShiftS=mn.prototype.rightShiftS,mn.prototype.zeroFillRightShiftM=mn.prototype.rightShiftM,mn.zeroFillRightShift=mn.rightShift,mn.prototype.not=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},mn.not=function(t){return new yn(t).not()},mn.prototype.abs=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},mn.abs=function(t){return new yn(t).abs()},mn.prototype.acos=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},mn.acos=function(t){return new yn(t).acos()},mn.prototype.acosh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},mn.acosh=function(t){return new yn(t).acosh()},mn.prototype.asin=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},mn.asin=function(t){return new yn(t).asin()},mn.prototype.asinh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},mn.asinh=function(t){return new yn(t).asinh()},mn.prototype.atan=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},mn.atan=function(t){return new yn(t).atan()},mn.prototype.atanh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},mn.atanh=function(t){return new yn(t).atanh()},mn.prototype.cbrt=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},mn.cbrt=function(t){return new yn(t).cbrt()},mn.prototype.ceil=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},mn.ceil=function(t){return new yn(t).ceil()},mn.prototype.clz32=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},mn.clz32=function(t){return new yn(t).clz32()},mn.prototype.cos=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},mn.cos=function(t){return new yn(t).cos()},mn.prototype.cosh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},mn.cosh=function(t){return new yn(t).cosh()},mn.prototype.exp=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},mn.exp=function(t){return new yn(t).exp()},mn.prototype.expm1=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},mn.expm1=function(t){return new yn(t).expm1()},mn.prototype.floor=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},mn.floor=function(t){return new yn(t).floor()},mn.prototype.fround=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},mn.fround=function(t){return new yn(t).fround()},mn.prototype.log=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},mn.log=function(t){return new yn(t).log()},mn.prototype.log1p=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},mn.log1p=function(t){return new yn(t).log1p()},mn.prototype.log10=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},mn.log10=function(t){return new yn(t).log10()},mn.prototype.log2=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},mn.log2=function(t){return new yn(t).log2()},mn.prototype.round=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},mn.round=function(t){return new yn(t).round()},mn.prototype.sign=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},mn.sign=function(t){return new yn(t).sign()},mn.prototype.sin=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},mn.sin=function(t){return new yn(t).sin()},mn.prototype.sinh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},mn.sinh=function(t){return new yn(t).sinh()},mn.prototype.sqrt=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},mn.sqrt=function(t){return new yn(t).sqrt()},mn.prototype.tan=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},mn.tan=function(t){return new yn(t).tan()},mn.prototype.tanh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},mn.tanh=function(t){return new yn(t).tanh()},mn.prototype.trunc=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},mn.trunc=function(t){return new yn(t).trunc()},mn.pow=function(t,e){return new yn(t).pow(e)},mn.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},mn.prototype.powS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t));return this},mn.prototype.powM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t.get(e,n)));return this};var Tn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xn(t,e)}(i,t);var e,n,r,o=wn(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).data=t,e.rows=t.length,e.columns=t[0].length,e}return e=i,(n=[{key:"set",value:function(t,e,n){return this.data[t][e]=n,this}},{key:"get",value:function(t,e){return this.data[t][e]}}])&&_n(e.prototype,n),r&&_n(e,r),i}(pn);function An(t,e){var n=0;return Math.abs(t)>Math.abs(e)?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0!==e?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0}function In(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var On=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(In(this,t),(e=Tn.checkMatrix(e)).isEmpty())throw new Error("Matrix must be non-empty");var r,o=e.rows,i=e.columns,a=n.computeLeftSingularVectors,u=void 0===a||a,s=n.computeRightSingularVectors,c=void 0===s||s,f=n.autoTranspose,l=void 0!==f&&f,h=Boolean(u),d=Boolean(c),p=!1;if(o<i)if(l){o=(r=e.transpose()).rows,i=r.columns,p=!0;var v=h;h=d,d=v}else r=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else r=e.clone();for(var m=Math.min(o,i),y=Math.min(o+1,i),g=new Float64Array(y),b=new gn(o,m),_=new gn(i,i),x=new Float64Array(i),w=new Float64Array(o),E=new Float64Array(y),S=0;S<y;S++)E[S]=S;for(var T=Math.min(o-1,i),A=Math.max(0,Math.min(i-2,o)),I=Math.max(T,A),k=0;k<I;k++){if(k<T){g[k]=0;for(var O=k;O<o;O++)g[k]=An(g[k],r.get(O,k));if(0!==g[k]){r.get(k,k)<0&&(g[k]=-g[k]);for(var D=k;D<o;D++)r.set(D,k,r.get(D,k)/g[k]);r.set(k,k,r.get(k,k)+1)}g[k]=-g[k]}for(var R=k+1;R<i;R++){if(k<T&&0!==g[k]){for(var M=0,C=k;C<o;C++)M+=r.get(C,k)*r.get(C,R);M=-M/r.get(k,k);for(var N=k;N<o;N++)r.set(N,R,r.get(N,R)+M*r.get(N,k))}x[R]=r.get(k,R)}if(h&&k<T)for(var P=k;P<o;P++)b.set(P,k,r.get(P,k));if(k<A){x[k]=0;for(var G=k+1;G<i;G++)x[k]=An(x[k],x[G]);if(0!==x[k]){x[k+1]<0&&(x[k]=0-x[k]);for(var j=k+1;j<i;j++)x[j]/=x[k];x[k+1]+=1}if(x[k]=-x[k],k+1<o&&0!==x[k]){for(var L=k+1;L<o;L++)w[L]=0;for(var U=k+1;U<o;U++)for(var B=k+1;B<i;B++)w[U]+=x[B]*r.get(U,B);for(var F=k+1;F<i;F++)for(var z=-x[F]/x[k+1],V=k+1;V<o;V++)r.set(V,F,r.get(V,F)+z*w[V])}if(d)for(var W=k+1;W<i;W++)_.set(W,k,x[W])}}var X=Math.min(i,o+1);if(T<i&&(g[T]=r.get(T,T)),o<X&&(g[X-1]=0),A+1<X&&(x[A]=r.get(A,X-1)),x[X-1]=0,h){for(var H=T;H<m;H++){for(var q=0;q<o;q++)b.set(q,H,0);b.set(H,H,1)}for(var Y=T-1;Y>=0;Y--)if(0!==g[Y]){for(var K=Y+1;K<m;K++){for(var Z=0,Q=Y;Q<o;Q++)Z+=b.get(Q,Y)*b.get(Q,K);Z=-Z/b.get(Y,Y);for(var J=Y;J<o;J++)b.set(J,K,b.get(J,K)+Z*b.get(J,Y))}for(var $=Y;$<o;$++)b.set($,Y,-b.get($,Y));b.set(Y,Y,1+b.get(Y,Y));for(var tt=0;tt<Y-1;tt++)b.set(tt,Y,0)}else{for(var et=0;et<o;et++)b.set(et,Y,0);b.set(Y,Y,1)}}if(d)for(var nt=i-1;nt>=0;nt--){if(nt<A&&0!==x[nt])for(var rt=nt+1;rt<i;rt++){for(var ot=0,it=nt+1;it<i;it++)ot+=_.get(it,nt)*_.get(it,rt);ot=-ot/_.get(nt+1,nt);for(var at=nt+1;at<i;at++)_.set(at,rt,_.get(at,rt)+ot*_.get(at,nt))}for(var ut=0;ut<i;ut++)_.set(ut,nt,0);_.set(nt,nt,1)}for(var st=X-1,ct=Number.EPSILON;X>0;){var ft=void 0,lt=void 0;for(ft=X-2;ft>=-1&&-1!==ft;ft--){var ht=Number.MIN_VALUE+ct*Math.abs(g[ft]+Math.abs(g[ft+1]));if(Math.abs(x[ft])<=ht||Number.isNaN(x[ft])){x[ft]=0;break}}if(ft===X-2)lt=4;else{var dt=void 0;for(dt=X-1;dt>=ft&&dt!==ft;dt--){var pt=(dt!==X?Math.abs(x[dt]):0)+(dt!==ft+1?Math.abs(x[dt-1]):0);if(Math.abs(g[dt])<=ct*pt){g[dt]=0;break}}dt===ft?lt=3:dt===X-1?lt=1:(lt=2,ft=dt)}switch(ft++,lt){case 1:var vt=x[X-2];x[X-2]=0;for(var mt=X-2;mt>=ft;mt--){var yt=An(g[mt],vt),gt=g[mt]/yt,bt=vt/yt;if(g[mt]=yt,mt!==ft&&(vt=-bt*x[mt-1],x[mt-1]=gt*x[mt-1]),d)for(var _t=0;_t<i;_t++)yt=gt*_.get(_t,mt)+bt*_.get(_t,X-1),_.set(_t,X-1,-bt*_.get(_t,mt)+gt*_.get(_t,X-1)),_.set(_t,mt,yt)}break;case 2:var xt=x[ft-1];x[ft-1]=0;for(var wt=ft;wt<X;wt++){var Et=An(g[wt],xt),St=g[wt]/Et,Tt=xt/Et;if(g[wt]=Et,xt=-Tt*x[wt],x[wt]=St*x[wt],h)for(var At=0;At<o;At++)Et=St*b.get(At,wt)+Tt*b.get(At,ft-1),b.set(At,ft-1,-Tt*b.get(At,wt)+St*b.get(At,ft-1)),b.set(At,wt,Et)}break;case 3:var It=Math.max(Math.abs(g[X-1]),Math.abs(g[X-2]),Math.abs(x[X-2]),Math.abs(g[ft]),Math.abs(x[ft])),kt=g[X-1]/It,Ot=g[X-2]/It,Dt=x[X-2]/It,Rt=g[ft]/It,Mt=x[ft]/It,Ct=((Ot+kt)*(Ot-kt)+Dt*Dt)/2,Nt=kt*Dt*(kt*Dt),Pt=0;0===Ct&&0===Nt||(Pt=Nt/(Ct+(Pt=Ct<0?0-Math.sqrt(Ct*Ct+Nt):Math.sqrt(Ct*Ct+Nt))));for(var Gt=(Rt+kt)*(Rt-kt)+Pt,jt=Rt*Mt,Lt=ft;Lt<X-1;Lt++){var Ut=An(Gt,jt);0===Ut&&(Ut=Number.MIN_VALUE);var Bt=Gt/Ut,Ft=jt/Ut;if(Lt!==ft&&(x[Lt-1]=Ut),Gt=Bt*g[Lt]+Ft*x[Lt],x[Lt]=Bt*x[Lt]-Ft*g[Lt],jt=Ft*g[Lt+1],g[Lt+1]=Bt*g[Lt+1],d)for(var zt=0;zt<i;zt++)Ut=Bt*_.get(zt,Lt)+Ft*_.get(zt,Lt+1),_.set(zt,Lt+1,-Ft*_.get(zt,Lt)+Bt*_.get(zt,Lt+1)),_.set(zt,Lt,Ut);if(0===(Ut=An(Gt,jt))&&(Ut=Number.MIN_VALUE),Bt=Gt/Ut,Ft=jt/Ut,g[Lt]=Ut,Gt=Bt*x[Lt]+Ft*g[Lt+1],g[Lt+1]=-Ft*x[Lt]+Bt*g[Lt+1],jt=Ft*x[Lt+1],x[Lt+1]=Bt*x[Lt+1],h&&Lt<o-1)for(var Vt=0;Vt<o;Vt++)Ut=Bt*b.get(Vt,Lt)+Ft*b.get(Vt,Lt+1),b.set(Vt,Lt+1,-Ft*b.get(Vt,Lt)+Bt*b.get(Vt,Lt+1)),b.set(Vt,Lt,Ut)}x[X-2]=Gt,1;break;case 4:if(g[ft]<=0&&(g[ft]=g[ft]<0?-g[ft]:0,d))for(var Wt=0;Wt<=st;Wt++)_.set(Wt,ft,-_.get(Wt,ft));for(;ft<st&&!(g[ft]>=g[ft+1]);){var Xt=g[ft];if(g[ft]=g[ft+1],g[ft+1]=Xt,d&&ft<i-1)for(var Ht=0;Ht<i;Ht++)Xt=_.get(Ht,ft+1),_.set(Ht,ft+1,_.get(Ht,ft)),_.set(Ht,ft,Xt);if(h&&ft<o-1)for(var qt=0;qt<o;qt++)Xt=b.get(qt,ft+1),b.set(qt,ft+1,b.get(qt,ft)),b.set(qt,ft,Xt);ft++}0,X--}}if(p){var Yt=_;_=b,b=Yt}this.m=o,this.n=i,this.s=g,this.U=b,this.V=_}var e,n,r;return e=t,(n=[{key:"solve",value:function(t){for(var e=t,n=this.threshold,r=this.s.length,o=gn.zeros(r,r),i=0;i<r;i++)Math.abs(this.s[i])<=n?o.set(i,i,0):o.set(i,i,1/this.s[i]);for(var a=this.U,u=this.rightSingularVectors,s=u.mmul(o),c=u.rows,f=a.rows,l=gn.zeros(c,f),h=0;h<c;h++)for(var d=0;d<f;d++){for(var p=0,v=0;v<r;v++)p+=s.get(h,v)*a.get(d,v);l.set(h,d,p)}return l.mmul(e)}},{key:"solveForDiagonal",value:function(t){return this.solve(gn.diag(t))}},{key:"inverse",value:function(){for(var t=this.V,e=this.threshold,n=t.rows,r=t.columns,o=new gn(n,this.s.length),i=0;i<n;i++)for(var a=0;a<r;a++)Math.abs(this.s[a])>e&&o.set(i,a,t.get(i,a)/this.s[a]);for(var u=this.U,s=u.rows,c=u.columns,f=new gn(n,s),l=0;l<n;l++)for(var h=0;h<s;h++){for(var d=0,p=0;p<c;p++)d+=o.get(l,p)*u.get(h,p);f.set(l,h,d)}return f}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,n=this.s,r=0,o=n.length;r<o;r++)n[r]>t&&e++;return e}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return gn.diag(this.s)}}])&&kn(e.prototype,n),r&&kn(e,r),t}();function Dn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Rn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.distances=e.distances,this.dimension=e.dimension||2,this.linkDistance=e.linkDistance}var e,n,r;return e=t,(n=[{key:"layout",value:function(){var t=this.dimension,e=this.distances,n=this.linkDistance;try{var r=gn.mul(gn.pow(e,2),-.5),o=r.mean("row"),i=r.mean("column"),a=r.mean();r.add(a).subRowVector(o).subColumnVector(i);var u=new On(r),s=gn.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map((function(e){return gn.mul([e],[s]).toJSON()[0].splice(0,t)}))}catch(t){for(var c=[],f=0;f<e.length;f++){var l=Math.random()*n,h=Math.random()*n;c.push([l,h])}return c}}}])&&Dn(e.prototype,n),r&&Dn(e,r),t}();function Mn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Cn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.disp=[],this.positions=e.positions,this.adjMatrix=e.adjMatrix,this.focusID=e.focusID,this.radii=e.radii,this.iterations=e.iterations||10,this.height=e.height||10,this.width=e.width||10,this.speed=e.speed||100,this.gravity=e.gravity||10,this.nodeSizeFunc=e.nodeSizeFunc,this.k=e.k||5,this.strictRadial=e.strictRadial,this.nodes=e.nodes}var e,n,r;return e=t,(n=[{key:"layout",value:function(){var t=this.positions,e=[],n=this.iterations,r=this.width/10;this.maxDisplace=r,this.disp=e;for(var o=0;o<n;o++)t.forEach((function(t,n){e[n]={x:0,y:0}})),this.getRepulsion(),this.updatePositions();return t}},{key:"getRepulsion",value:function(){var t=this,e=t.positions,n=t.nodes,r=t.disp,o=t.k,i=t.radii||[];e.forEach((function(a,u){r[u]={x:0,y:0},e.forEach((function(e,s){if(u!==s&&i[u]===i[s]){var c=a[0]-e[0],f=a[1]-e[1],l=Math.sqrt(c*c+f*f);if(0===l){l=1;var h=u>s?1:-1;c=.01*h,f=.01*h}if(l<t.nodeSizeFunc(n[u])/2+t.nodeSizeFunc(n[s])/2){var d=o*o/l;r[u].x+=c/l*d,r[u].y+=f/l*d}}}))}))}},{key:"updatePositions",value:function(){var t=this.positions,e=this.disp,n=this.speed,r=this.strictRadial,o=this.focusID,i=this.maxDisplace||this.width/10;r&&e.forEach((function(e,n){var r=t[n][0]-t[o][0],i=t[n][1]-t[o][1],a=Math.sqrt(r*r+i*i),u=i/a,s=-r/a,c=Math.sqrt(e.x*e.x+e.y*e.y),f=Math.acos((u*e.x+s*e.y)/c);f>Math.PI/2&&(f-=Math.PI/2,u*=-1,s*=-1);var l=Math.cos(f)*c;e.x=u*l,e.y=s*l}));var a=this.radii;t.forEach((function(u,s){if(s!==o){var c=Math.sqrt(e[s].x*e[s].x+e[s].y*e[s].y);if(c>0&&s!==o){var f=Math.min(i*(n/800),c);if(u[0]+=e[s].x/c*f,u[1]+=e[s].y/c*f,r){var l=u[0]-t[o][0],h=u[1]-t[o][1],d=Math.sqrt(l*l+h*h);l=l/d*a[s],h=h/d*a[s],u[0]=t[o][0]+l,u[1]=t[o][1]+h}}}}))}}])&&Mn(e.prototype,n),r&&Mn(e,r),t}();function Nn(t){return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pn(t){return function(t){if(Array.isArray(t))return Gn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Gn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gn(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ln(t,e){return(Ln=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Un(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Fn(t);if(e){var o=Fn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Bn(this,n)}}function Bn(t,e){return!e||"object"!==Nn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fn(t){return(Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zn(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var Vn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ln(t,e)}(i,t);var e,n,r,o=Un(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.focusNode=null,e.unitRadius=null,e.linkDistance=50,e.preventOverlap=!1,e.strictRadial=!0,e.maxPreventOverlapIteration=200,e.sortStrength=10,e.nodes=[],e.edges=[],e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=t.edges||[];if(e&&0!==e.length){t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var r=t.center;if(1===e.length)return e[0].x=r[0],e[0].y=r[1],void(t.onLayoutEnd&&t.onLayoutEnd());var o=t.linkDistance,i=null;if(p(t.focusNode)){for(var a=!1,u=0;u<e.length;u++)e[u].id===t.focusNode&&(i=e[u],t.focusNode=i,a=!0,u=e.length);a||(i=null)}else i=t.focusNode;i||(i=e[0],t.focusNode=i);var s,c,f,l=(s=e,c=i.id,f=-1,s.forEach((function(t,e){t.id===c&&(f=e)})),f);t.focusIndex=l;var h=x({nodes:e,edges:n},!1),d=_(h),v=t.maxToFocus(d,l);t.handleInfinity(d,l,v+1),t.distances=d;var b=d[l],w=t.width||500,E=t.height||500,S=w-r[0]>r[0]?r[0]:w-r[0],A=E-r[1]>r[1]?r[1]:E-r[1];0===S&&(S=w/2),0===A&&(A=E/2);var I=A>S?S:A,k=Math.max.apply(Math,Pn(b)),O=[];b.forEach((function(e,n){t.unitRadius||(t.unitRadius=I/k),O[n]=e*t.unitRadius})),t.radii=O;var D=t.eIdealDisMatrix();t.eIdealDistances=D;var R=function(t){for(var e=t.length,n=t[0].length,r=[],o=0;o<e;o++){for(var i=[],a=0;a<n;a++)0!==t[o][a]?i.push(1/(t[o][a]*t[o][a])):i.push(0);r.push(i)}return r}(D);t.weights=R;var M=new Rn({linkDistance:o,distances:D}).layout();M.forEach((function(t){g(t[0])&&(t[0]=Math.random()*o),g(t[1])&&(t[1]=Math.random()*o)})),t.positions=M,M.forEach((function(t,n){e[n].x=t[0]+r[0],e[n].y=t[1]+r[1]})),M.forEach((function(t){t[0]-=M[l][0],t[1]-=M[l][1]})),t.run();var C,N=t.preventOverlap,P=t.nodeSize,G=t.strictRadial;if(N){var j,L=t.nodeSpacing;j=y(L)?function(){return L}:T(L)?L:function(){return 0},C=P?m(P)?function(t){return(P[0]>P[1]?P[0]:P[1])+j(t)}:function(t){return P+j(t)}:function(t){return t.size?m(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])+j(t):t.size+j(t):10+j(t)};var U={nodes:e,nodeSizeFunc:C,adjMatrix:h,positions:M,radii:O,height:E,width:w,strictRadial:G,focusID:l,iterations:t.maxPreventOverlapIteration||200,k:M.length/4.5},B=new Cn(U);M=B.layout()}return M.forEach((function(t,n){e[n].x=t[0]+r[0],e[n].y=t[1]+r[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}t.onLayoutEnd&&t.onLayoutEnd()}},{key:"run",value:function(){for(var t=this.maxIteration,e=this.positions||[],n=this.weights||[],r=this.eIdealDistances||[],o=this.radii||[],i=0;i<=t;i++){var a=i/t;this.oneIteration(a,e,o,r,n)}}},{key:"oneIteration",value:function(t,e,n,r,o){var i=1-t,a=this.focusIndex;e.forEach((function(u,s){var c=zn(u,[0,0]),f=0===c?0:1/c;if(s!==a){var l=0,h=0,d=0;e.forEach((function(t,e){if(s!==e){var n=zn(u,t),i=0===n?0:1/n,a=r[e][s];d+=o[s][e],l+=o[s][e]*(t[0]+a*(u[0]-t[0])*i),h+=o[s][e]*(t[1]+a*(u[1]-t[1])*i)}}));var p=0===n[s]?0:1/n[s];d*=i,d+=t*p*p,l*=i,l+=t*p*u[0]*f,u[0]=l/d,h*=i,h+=t*p*u[1]*f,u[1]=h/d}}))}},{key:"eIdealDisMatrix",value:function(){var t=this,e=t.nodes;if(!e)return[];var n=t.distances,r=t.linkDistance,o=t.radii||[],i=t.unitRadius||50,a=[];return n&&n.forEach((function(n,u){var s=[];n.forEach((function(n,a){if(u===a)s.push(0);else if(o[u]===o[a])if("data"===t.sortBy)s.push(n*(Math.abs(u-a)*t.sortStrength)/(o[u]/i));else if(t.sortBy){var c=e[u][t.sortBy]||0,f=e[a][t.sortBy]||0;p(c)&&(c=c.charCodeAt(0)),p(f)&&(f=f.charCodeAt(0)),s.push(n*(Math.abs(c-f)*t.sortStrength)/(o[u]/i))}else s.push(n*r/(o[u]/i));else{var l=(r+i)/2;s.push(n*l)}})),a.push(s)})),a}},{key:"handleInfinity",value:function(t,e,n){for(var r=t.length,o=0;o<r;o++)if(t[e][o]===1/0){t[e][o]=n,t[o][e]=n;for(var i=0;i<r;i++)t[o][i]!==1/0&&t[e][i]===1/0&&(t[e][i]=n+t[o][i],t[i][e]=n+t[o][i])}for(var a=0;a<r;a++)if(a!==e)for(var u=0;u<r;u++)if(t[a][u]===1/0){var s=Math.abs(t[e][a]-t[e][u]);s=0===s?1:s,t[a][u]=s}}},{key:"maxToFocus",value:function(t,e){for(var n=0,r=0;r<t[e].length;r++)t[e][r]!==1/0&&(n=t[e][r]>n?t[e][r]:n);return n}},{key:"getType",value:function(){return"radial"}}])&&jn(e.prototype,n),r&&jn(e,r),i}(I);function Wn(t){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xn(t,e){return(Xn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Hn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Kn(t);if(e){var o=Kn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qn(this,n)}}function qn(t,e){return!e||"object"!==Wn(e)&&"function"!=typeof e?Yn(t):e}function Yn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kn(t){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zn=new Map,Qn=function(t,e){if(Zn.get(t)&&console.warn("The layout with the name ".concat(t," exists already, it will be overridden")),null!==(r=e)&&"object"===E(r)){var n=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xn(t,e)}(r,t);var n=Hn(r);function r(t){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var i=Yn(o=n.call(this)),a={},u=i.getDefaultCfg();return Object.assign(a,u,e,t),Object.keys(a).forEach((function(t){var e=a[t];i[t]=e})),o}return r}(I);Zn.set(t,n)}else Zn.set(t,e);var r},Jn=function(t){return Zn.has(t)?Zn.get(t):null};function $n(t){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function er(t,e){return(er=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=or(t);if(e){var o=or(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return rr(this,n)}}function rr(t,e){return!e||"object"!==$n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function or(t){return(or=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ir=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&er(t,e)}(i,t);var e,n,r,o=nr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).nodeSize=30,e.minNodeSpacing=10,e.preventOverlap=!1,e.equidistant=!1,e.startAngle=1.5*Math.PI,e.clockwise=!0,e.sortBy="degree",e.nodes=[],e.edges=[],e.width=300,e.height=300,e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=t.edges,r=e.length;if(0!==r){t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var o=t.center;if(1===r)return e[0].x=o[0],e[0].y=o[1],void(t.onLayoutEnd&&t.onLayoutEnd());var i,a=[];i=m(t.nodeSize)?Math.max(t.nodeSize[0],t.nodeSize[1]):t.nodeSize,e.forEach((function(t){a.push(t);var e=i;m(t.size)?e=Math.max(t.size[0],t.size[1]):y(t.size)&&(e=t.size),i=Math.max(i,e)})),t.clockwise=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise;var u={},s={};if(a.forEach((function(t,e){u[t.id]=t,s[t.id]=e})),!("degree"!==t.sortBy&&p(t.sortBy)&&void 0!==a[0][t.sortBy]||(t.sortBy="degree",y(e[0].degree)))){var c=b(e.length,s,n);a.forEach((function(t,e){t.degree=c[e]}))}a.sort((function(e,n){return n[t.sortBy]-e[t.sortBy]})),t.maxValueNode=a[0],t.maxLevelDiff=t.maxLevelDiff||t.maxValueNode[t.sortBy]/4;var f=[[]],l=f[0];a.forEach((function(e){if(l.length>0){var n=Math.abs(l[0][t.sortBy]-e[t.sortBy]);t.maxLevelDiff&&n>=t.maxLevelDiff&&(l=[],f.push(l))}l.push(e)}));var h=i+t.minNodeSpacing;if(!t.preventOverlap){var d=f.length>0&&f[0].length>1,v=(Math.min(t.width,t.height)/2-h)/(f.length+(d?1:0));h=Math.min(h,v)}var g=0;if(f.forEach((function(e){var n=t.sweep;void 0===n&&(n=2*Math.PI-2*Math.PI/e.length);var r=e.dTheta=n/Math.max(1,e.length-1);if(e.length>1&&t.preventOverlap){var o=Math.cos(r)-Math.cos(0),i=Math.sin(r)-Math.sin(0),a=Math.sqrt(h*h/(o*o+i*i));g=Math.max(a,g)}e.r=g,g+=h})),t.equidistant){for(var _=0,x=0,w=0;w<f.length;w++){var E=f[w].r-x;_=Math.max(_,E)}x=0,f.forEach((function(t,e){0===e&&(x=t.r),t.r=x,x+=_}))}return f.forEach((function(e){var n=e.dTheta,r=e.r;e.forEach((function(e,i){var a=t.startAngle+(t.clockwise?1:-1)*n*i;e.x=o[0]+r*Math.cos(a),e.y=o[1]+r*Math.sin(a)}))})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}t.onLayoutEnd&&t.onLayoutEnd()}},{key:"getType",value:function(){return"concentric"}}])&&tr(e.prototype,n),r&&tr(e,r),i}(I);function ar(t){return(ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sr(t,e){return(sr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=lr(t);if(e){var o=lr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fr(this,n)}}function fr(t,e){return!e||"object"!==ar(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lr(t){return(lr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sr(t,e)}(i,t);var e,n,r,o=cr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).center=[0,0],e.linkDistance=50,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{center:[0,0],linkDistance:50}}},{key:"execute",value:function(){var t=this.nodes,e=this.edges,n=void 0===e?[]:e,r=this.center;if(t&&0!==t.length){if(1===t.length)return t[0].x=r[0],t[0].y=r[1],void(this.onLayoutEnd&&this.onLayoutEnd());var o=this.linkDistance,i=x({nodes:t,edges:n},!1),a=_(i);this.handleInfinity(a);var u,s,c=(u=o,s=[],a.forEach((function(t){var e=[];t.forEach((function(t){e.push(t*u)})),s.push(e)})),s);this.scaledDistances=c;var f=this.runMDS();return this.positions=f,f.forEach((function(e,n){t[n].x=e[0]+r[0],t[n].y=e[1]+r[1]})),this.onLayoutEnd&&this.onLayoutEnd(),{nodes:t,edges:n}}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"runMDS",value:function(){var t=this.scaledDistances,e=gn.mul(gn.pow(t,2),-.5),n=e.mean("row"),r=e.mean("column"),o=e.mean();e.add(o).subRowVector(n).subColumnVector(r);var i=new On(e),a=gn.sqrt(i.diagonalMatrix).diagonal();return i.leftSingularVectors.toJSON().map((function(t){return gn.mul([t],[a]).toJSON()[0].splice(0,2)}))}},{key:"handleInfinity",value:function(t){var e=-999999;t.forEach((function(t){t.forEach((function(t){t!==1/0&&e<t&&(e=t)}))})),t.forEach((function(n,r){n.forEach((function(n,o){n===1/0&&(t[r][o]=e)}))}))}},{key:"getType",value:function(){return"mds"}}])&&ur(e.prototype,n),r&&ur(e,r),i}(I);function dr(t){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vr(t,e){return(vr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=gr(t);if(e){var o=gr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return yr(this,n)}}function yr(t,e){return!e||"object"!==dr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gr(t){return(gr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var br=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vr(t,e)}(i,t);var e,n,r,o=mr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.gravity=10,e.speed=1,e.clustering=!1,e.clusterGravity=10,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){var t=this,e=this.nodes;if(e&&0!==e.length){this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var n=this.center;if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(this.onLayoutEnd&&this.onLayoutEnd());var r={},o={};return e.forEach((function(e,n){y(e.x)||(e.x=Math.random()*t.width),y(e.y)||(e.y=Math.random()*t.height),r[e.id]=e,o[e.id]=n})),this.nodeMap=r,this.nodeIdxMap=o,this.run()}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"run",value:function(){var t=this,e=t.nodes,n=t.edges,r=t.maxIteration,o=t.center,i=t.height*t.width,a=Math.sqrt(i)/10,u=i/(e.length+1),s=Math.sqrt(u),c=t.gravity,f=t.speed,l=t.clustering,h={};if(l)for(var d in e.forEach((function(t){if(void 0===h[t.cluster]){var e={name:t.cluster,cx:0,cy:0,count:0};h[t.cluster]=e}var n=h[t.cluster];y(t.x)&&(n.cx+=t.x),y(t.y)&&(n.cy+=t.y),n.count++})),h)h[d].cx/=h[d].count,h[d].cy/=h[d].count;for(var p=function(r){var i=[];if(e.forEach((function(t,e){i[e]={x:0,y:0}})),t.applyCalculate(e,n,i,s,u),l){var d=t.clusterGravity||c;for(var p in e.forEach((function(t,e){if(y(t.x)&&y(t.y)){var n=h[t.cluster],r=Math.sqrt((t.x-n.cx)*(t.x-n.cx)+(t.y-n.cy)*(t.y-n.cy)),o=s*d;i[e].x-=o*(t.x-n.cx)/r,i[e].y-=o*(t.y-n.cy)/r}})),h)h[p].cx=0,h[p].cy=0,h[p].count=0;for(var v in e.forEach((function(t){var e=h[t.cluster];y(t.x)&&(e.cx+=t.x),y(t.y)&&(e.cy+=t.y),e.count++})),h)h[v].cx/=h[v].count,h[v].cy/=h[v].count}e.forEach((function(t,e){if(y(t.x)&&y(t.y)){var n=.01*s*c;i[e].x-=n*(t.x-o[0]),i[e].y-=n*(t.y-o[1])}})),e.forEach((function(t,e){if(y(t.x)&&y(t.y)){var n=Math.sqrt(i[e].x*i[e].x+i[e].y*i[e].y);if(n>0){var r=Math.min(a*(f/800),n);t.x+=i[e].x/n*r,t.y+=i[e].y/n*r}}}))},v=0;v<r;v++)p();return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}},{key:"applyCalculate",value:function(t,e,n,r,o){this.calRepulsive(t,n,o),this.calAttractive(e,n,r)}},{key:"calRepulsive",value:function(t,e,n){t.forEach((function(r,o){e[o]={x:0,y:0},t.forEach((function(t,i){if(o!==i&&y(r.x)&&y(t.x)&&y(r.y)&&y(t.y)){var a=r.x-t.x,u=r.y-t.y,s=a*a+u*u;if(0===s){s=1;var c=o>i?1:-1;a=.01*c,u=.01*c}var f=n/s;e[o].x+=a*f,e[o].y+=u*f}}))}))}},{key:"calAttractive",value:function(t,e,n){var r=this;t.forEach((function(t){if(t.source&&t.target){var o=r.nodeIdxMap[t.source],i=r.nodeIdxMap[t.target];if(o!==i){var a=r.nodeMap[t.source],u=r.nodeMap[t.target];if(y(u.x)&&y(a.x)&&y(u.y)&&y(a.y)){var s=u.x-a.x,c=u.y-a.y,f=Math.sqrt(s*s+c*c),l=f*f/n;e[i].x-=s/f*l,e[i].y-=c/f*l,e[o].x+=s/f*l,e[o].y+=c/f*l}}}}))}},{key:"getType",value:function(){return"fruchterman"}}])&&pr(e.prototype,n),r&&pr(e,r),i}(I),_r=n(6),xr=n.n(_r),wr=n(2),Er=n.n(wr),Sr=n(4),Tr=n.n(Sr),Ar=n(7),Ir=n.n(Ar),kr=(n(16),n(159),n(5)),Or=n.n(kr),Dr=n(8),Rr=n.n(Dr),Mr=1;function Cr(){return Mr++}var Nr=function t(e){Er()(this,t)},Pr=function(){function t(e){Er()(this,t),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=e}var e;return Tr()(t,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(t){return this.lookup[t]>-1}},{key:"create",value:function(t,e){this.lookup[t]=this.components.length;var n=new this.clazz(e||{});return this.components.push(n),this.entities.push(t),n}},{key:"remove",value:function(t){var e=this.lookup[t];e>-1&&e<this.components.length-1&&(this.components[e]=this.components[this.components.length-1],this.entities[e]=this.entities[this.entities.length-1],this.lookup[this.entities[e]]=e),this.components.pop(),this.entities.pop(),delete this.lookup[t]}},{key:"removeKeepSorted",value:function(t){var e=this.lookup[t];if(e>-1){var n=this.entities[e];if(e<this.components.length-1){for(var r=e+1;r<this.components.length;++r)this.components[r-1]=this.components[r];for(var o=e+1;o<this.entities.length;++o)this.entities[o-1]=this.entities[o],this.lookup[this.entities[o-1]]=o-1}this.components.pop(),this.entities.pop(),delete this.lookup[n]}}},{key:"moveItem",value:function(t,e){if(t!==e){for(var n=this.components[t],r=this.entities[t],o=t<e?1:-1,i=t;i!==e;i+=o){var a=i+o;this.components[i]=this.components[a],this.entities[i]=this.entities[a],this.lookup[this.entities[i]]=i}this.components[e]=n,this.entities[e]=r,this.lookup[r]=e}}},{key:"getEntity",value:function(t){return this.entities[t]}},{key:"getComponent",value:function(t){return this.components[t]}},{key:"getComponentByEntity",value:function(t){var e=this.lookup[t];return e>-1?this.components[e]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(t){for(var e=0,n=Object.keys(this.lookup);e<n.length;e++){var r=n[e],o=Number(r);if(this.lookup[o]===t)return o}return-1}},{key:"find",value:function(t){for(var e=0;e<this.getCount();e++){var n=this.getComponent(e);if(t(n,e))return n}return null}},{key:"findIndex",value:function(t){for(var e=0;e<this.getCount();e++){if(t(this.getComponent(e),e))return e}return-1}},{key:"forEach",value:function(t){for(var e=0,n=Object.keys(this.lookup);e<n.length;e++){var r=n[e],o=Number(r),i=this.lookup[o];t(o,this.getComponent(i))}}},{key:"forEachAsync",value:(e=Rr()(Or.a.mark((function t(e){var n,r,o,i,a;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=0,r=Object.keys(this.lookup);case 1:if(!(n<r.length)){t.next=10;break}return o=r[n],i=Number(o),a=this.lookup[i],t.next=7,e(i,this.getComponent(a));case 7:n++,t.next=1;break;case 10:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"map",value:function(t){for(var e=[],n=0,r=Object.keys(this.lookup);n<r.length;n++){var o=r[n],i=Number(o),a=this.lookup[i];e.push(t(i,this.getComponent(a)))}return e}}]),t}(),Gr=n(34),jr=n.n(Gr),Lr=n(1),Ur={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")},Br=function t(){Er()(this,t),this.index=void 0},Fr=function t(){Er()(this,t),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},zr=function(){function t(){Er()(this,t),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return Tr()(t,[{key:"read",value:function(t){return this.reads.find((function(e){return e.index===t.index}))||this.reads.push(t),t}},{key:"sample",value:function(t){return this.read(t),t}},{key:"write",value:function(t,e){if(this.writes.find((function(t){return t.index===e.index})))return e;var n=t.getResourceNode(e);n.resource.version++,n.resource.imported&&(this.hasSideEffect=!0);var r=t.createResourceNode(n.resource);return t.getResourceNode(r).writer=this,this.writes.push(r),r}}]),t}(),Vr=n(14),Wr=n.n(Vr),Xr=n(15),Hr=n.n(Xr),qr=n(9),Yr=n.n(qr);function Kr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Zr,Qr,Jr,$r,to,eo=function(t){Wr()(n,t);var e=Kr(n);function n(){var t;Er()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).version=0,t.refs=0,t.name=void 0,t.imported=void 0,t.priority=void 0,t.discardStart=!0,t.discardEnd=!1,t.descriptor=void 0,t.resource=void 0,t}return Tr()(n,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){this.imported}}]),n}((function t(){Er()(this,t),this.first=void 0,this.last=void 0})),no=function t(){Er()(this,t),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0};function ro(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return oo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oo(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function oo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var io=(Zr=Object(Lr.injectable)(),Qr=Object(Lr.inject)(Ur.RenderEngine),Zr(($r=function(){function t(){Er()(this,t),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],xr()(this,"engine",to,this)}var e,n;return Tr()(t,[{key:"execute",value:(n=Rr()(Or.a.mark((function t(e){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.compile(),t.next=3,this.executePassNodes(e);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"tearDown",value:function(){this.frameGraphPasses.forEach((function(t){t.tearDown&&t.tearDown()})),this.reset()}},{key:"addPass",value:function(t,e,n,r){var o=new Fr;o.execute=n,r&&(o.tearDown=r),o.name=t;var i=new zr;return i.name=t,this.passNodes.push(i),this.frameGraphPasses.push(o),e(this,i,o),o}},{key:"getPass",value:function(t){return this.frameGraphPasses.find((function(e){return e.name===t}))}},{key:"compile",value:function(){var t,e=this,n=ro(this.passNodes);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.refCount=r.writes.length+(r.hasSideEffect?1:0),r.reads.forEach((function(t){e.resourceNodes[t.index].readerCount++}))}}catch(t){n.e(t)}finally{n.f()}var o,i=[],a=ro(this.resourceNodes);try{for(a.s();!(o=a.n()).done;){var u=o.value;0===u.readerCount&&i.push(u)}}catch(t){a.e(t)}finally{a.f()}for(;i.length;){var s=i.pop(),c=s&&s.writer;if(c&&0==--c.refCount){var f,l=ro(c.reads);try{for(l.s();!(f=l.n()).done;){var h=f.value,d=this.resourceNodes[h.index];0==--d.readerCount&&i.push(d)}}catch(t){l.e(t)}finally{l.f()}}}this.resourceNodes.forEach((function(t){t.resource.refs+=t.readerCount}));var p,v=ro(this.passNodes);try{for(v.s();!(p=v.n()).done;){var m=p.value;if(m.refCount){var y,g=ro(m.reads);try{for(g.s();!(y=g.n()).done;){var b=y.value,_=this.resourceNodes[b.index].resource;_.first=_.first?_.first:m,_.last=m}}catch(t){g.e(t)}finally{g.f()}var x,w=ro(m.writes);try{for(w.s();!(x=w.n()).done;){var E=x.value,S=this.resourceNodes[E.index].resource;S.first=S.first?S.first:m,S.last=m}}catch(t){w.e(t)}finally{w.f()}}}}catch(t){v.e(t)}finally{v.f()}for(var T=0;T<2;T++){var A,I=ro(this.resourceNodes);try{for(I.s();!(A=I.n()).done;){var k=A.value.resource;if(k.priority===T&&k.refs){var O=k.first,D=k.last;O&&D&&(O.devirtualize.push(k),D.destroy.push(k))}}}catch(t){I.e(t)}finally{I.f()}}}},{key:"executePassNodes",value:(e=Rr()(Or.a.mark((function t(e){var n,r,o,i,a,u,s,c,f,l,h,d,p;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=ro(this.passNodes.entries()),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=18;break}if(o=jr()(r.value,2),i=o[0],!(a=o[1]).refCount){t.next=16;break}u=ro(a.devirtualize);try{for(u.s();!(s=u.n()).done;)s.value.preExecuteDevirtualize(this.engine)}catch(t){u.e(t)}finally{u.f()}c=ro(a.destroy);try{for(c.s();!(f=c.n()).done;)f.value.preExecuteDestroy(this.engine)}catch(t){c.e(t)}finally{c.f()}return t.next=12,this.frameGraphPasses[i].execute(this,this.frameGraphPasses[i],e);case 12:l=ro(a.devirtualize);try{for(l.s();!(h=l.n()).done;)h.value.postExecuteDevirtualize(this.engine)}catch(t){l.e(t)}finally{l.f()}d=ro(a.destroy);try{for(d.s();!(p=d.n()).done;)p.value.postExecuteDestroy(this.engine)}catch(t){d.e(t)}finally{d.f()}case 16:t.next=3;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(1),n.e(t.t0);case 23:return t.prev=23,n.f(),t.finish(23);case 26:this.reset();case 27:case"end":return t.stop()}}),t,this,[[1,20,23,26]])}))),function(t){return e.apply(this,arguments)})},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(t){return this.resourceNodes[t.index]}},{key:"createResourceNode",value:function(t){var e=new no;e.resource=t,e.version=t.version,this.resourceNodes.push(e);var n=new Br;return n.index=this.resourceNodes.length-1,n}},{key:"createTexture",value:function(t,e,n){var r=new eo;return r.name=e,r.descriptor=n,this.createResourceNode(r)}},{key:"createRenderTarget",value:function(t,e,n){var r=new eo;return r.name=e,r.descriptor=n,this.createResourceNode(r)}},{key:"present",value:function(t){this.addPass("Present",(function(e,n){n.read(t),n.hasSideEffect=!0}),Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))))}}]),t}(),to=Ir()($r.prototype,"engine",[Qr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jr=$r))||Jr),ao=n(0),uo=n.n(ao),so=n(12),co=n.n(so);function fo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fo(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ho(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var po=function(t){Wr()(n,t);var e=ho(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).dirty=!0,r.attributes=[],r.indices=void 0,r.indicesBuffer=void 0,r.vertexCount=void 0,r.maxInstancedCount=void 0,r.aabb=void 0,Object.assign(co()(r),t),r}return Tr()(n,[{key:"setAttribute",value:function(t,e,n,r){var o=this.attributes.find((function(e){return e.name===t}));return o?(o.data=e,o.dirty=!0):this.attributes.push(lo(lo({dirty:!0,name:t,data:e},n),{},{bufferGetter:r})),this.dirty=!0,this}},{key:"setIndex",value:function(t){return this.indices=new Uint32Array(t.buffer?t.buffer:t),this.dirty=!0,this}}]),n}(Nr),vo=(n(168),1e-6),mo="undefined"!=typeof Float32Array?Float32Array:Array,yo=Math.random;Math.PI;function go(){var t=new mo(9);return mo!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function bo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function _o(t){var e=new mo(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function xo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function wo(t,e,n,r,o,i,a,u,s){var c=new mo(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=o,c[5]=i,c[6]=a,c[7]=u,c[8]=s,c}function Eo(t,e,n,r,o,i,a,u,s,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=u,t[7]=s,t[8]=c,t}function So(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function To(t,e){if(t===e){var n=e[1],r=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Ao(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=f*a-u*c,h=-f*i+u*s,d=c*i-a*s,p=n*l+r*h+o*d;return p?(p=1/p,t[0]=l*p,t[1]=(-f*r+o*c)*p,t[2]=(u*r-o*a)*p,t[3]=h*p,t[4]=(f*n-o*s)*p,t[5]=(-u*n+o*i)*p,t[6]=d*p,t[7]=(-c*n+r*s)*p,t[8]=(a*n-r*i)*p,t):null}function Io(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8];return t[0]=a*f-u*c,t[1]=o*c-r*f,t[2]=r*u-o*a,t[3]=u*s-i*f,t[4]=n*f-o*s,t[5]=o*i-n*u,t[6]=i*c-a*s,t[7]=r*s-n*c,t[8]=n*a-r*i,t}function ko(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5],u=t[6],s=t[7],c=t[8];return e*(c*i-a*s)+n*(-c*o+a*u)+r*(s*o-i*u)}function Oo(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=n[0],d=n[1],p=n[2],v=n[3],m=n[4],y=n[5],g=n[6],b=n[7],_=n[8];return t[0]=h*r+d*a+p*c,t[1]=h*o+d*u+p*f,t[2]=h*i+d*s+p*l,t[3]=v*r+m*a+y*c,t[4]=v*o+m*u+y*f,t[5]=v*i+m*s+y*l,t[6]=g*r+b*a+_*c,t[7]=g*o+b*u+_*f,t[8]=g*i+b*s+_*l,t}function Do(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=n[0],d=n[1];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=u,t[5]=s,t[6]=h*r+d*a+c,t[7]=h*o+d*u+f,t[8]=h*i+d*s+l,t}function Ro(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=Math.sin(n),d=Math.cos(n);return t[0]=d*r+h*a,t[1]=d*o+h*u,t[2]=d*i+h*s,t[3]=d*a-h*r,t[4]=d*u-h*o,t[5]=d*s-h*i,t[6]=c,t[7]=f,t[8]=l,t}function Mo(t,e,n){var r=n[0],o=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Co(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function No(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Po(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Go(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function jo(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n+n,u=r+r,s=o+o,c=n*a,f=r*a,l=r*u,h=o*a,d=o*u,p=o*s,v=i*a,m=i*u,y=i*s;return t[0]=1-l-p,t[3]=f-y,t[6]=h+m,t[1]=f+y,t[4]=1-c-p,t[7]=d-v,t[2]=h-m,t[5]=d+v,t[8]=1-c-l,t}function Lo(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],d=e[11],p=e[12],v=e[13],m=e[14],y=e[15],g=n*u-r*a,b=n*s-o*a,_=n*c-i*a,x=r*s-o*u,w=r*c-i*u,E=o*c-i*s,S=f*v-l*p,T=f*m-h*p,A=f*y-d*p,I=l*m-h*v,k=l*y-d*v,O=h*y-d*m,D=g*O-b*k+_*I+x*A-w*T+E*S;return D?(D=1/D,t[0]=(u*O-s*k+c*I)*D,t[1]=(s*A-a*O-c*T)*D,t[2]=(a*k-u*A+c*S)*D,t[3]=(o*k-r*O-i*I)*D,t[4]=(n*O-o*A+i*T)*D,t[5]=(r*A-n*k-i*S)*D,t[6]=(v*E-m*w+y*x)*D,t[7]=(m*_-p*E-y*b)*D,t[8]=(p*w-v*_+y*g)*D,t):null}function Uo(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Bo(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Fo(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function zo(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function Vo(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function Wo(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function Xo(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function Ho(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function qo(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=e[0],h=e[1],d=e[2],p=e[3],v=e[4],m=e[5],y=e[6],g=e[7],b=e[8];return Math.abs(n-l)<=vo*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-h)<=vo*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(o-d)<=vo*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(i-p)<=vo*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-v)<=vo*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(u-m)<=vo*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(s-y)<=vo*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(c-g)<=vo*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(f-b)<=vo*Math.max(1,Math.abs(f),Math.abs(b))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Yo=Oo,Ko=Vo;function Zo(){var t=new mo(16);return mo!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Qo(t){var e=new mo(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Jo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function $o(t,e,n,r,o,i,a,u,s,c,f,l,h,d,p,v){var m=new mo(16);return m[0]=t,m[1]=e,m[2]=n,m[3]=r,m[4]=o,m[5]=i,m[6]=a,m[7]=u,m[8]=s,m[9]=c,m[10]=f,m[11]=l,m[12]=h,m[13]=d,m[14]=p,m[15]=v,m}function ti(t,e,n,r,o,i,a,u,s,c,f,l,h,d,p,v,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=u,t[7]=s,t[8]=c,t[9]=f,t[10]=l,t[11]=h,t[12]=d,t[13]=p,t[14]=v,t[15]=m,t}function ei(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ni(t,e){if(t===e){var n=e[1],r=e[2],o=e[3],i=e[6],a=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=o,t[13]=a,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ri(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],d=e[11],p=e[12],v=e[13],m=e[14],y=e[15],g=n*u-r*a,b=n*s-o*a,_=n*c-i*a,x=r*s-o*u,w=r*c-i*u,E=o*c-i*s,S=f*v-l*p,T=f*m-h*p,A=f*y-d*p,I=l*m-h*v,k=l*y-d*v,O=h*y-d*m,D=g*O-b*k+_*I+x*A-w*T+E*S;return D?(D=1/D,t[0]=(u*O-s*k+c*I)*D,t[1]=(o*k-r*O-i*I)*D,t[2]=(v*E-m*w+y*x)*D,t[3]=(h*w-l*E-d*x)*D,t[4]=(s*A-a*O-c*T)*D,t[5]=(n*O-o*A+i*T)*D,t[6]=(m*_-p*E-y*b)*D,t[7]=(f*E-h*_+d*b)*D,t[8]=(a*k-u*A+c*S)*D,t[9]=(r*A-n*k-i*S)*D,t[10]=(p*w-v*_+y*g)*D,t[11]=(l*_-f*w-d*g)*D,t[12]=(u*T-a*I-s*S)*D,t[13]=(n*I-r*T+o*S)*D,t[14]=(v*b-p*x-m*g)*D,t[15]=(f*x-l*b+h*g)*D,t):null}function oi(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],d=e[11],p=e[12],v=e[13],m=e[14],y=e[15];return t[0]=u*(h*y-d*m)-l*(s*y-c*m)+v*(s*d-c*h),t[1]=-(r*(h*y-d*m)-l*(o*y-i*m)+v*(o*d-i*h)),t[2]=r*(s*y-c*m)-u*(o*y-i*m)+v*(o*c-i*s),t[3]=-(r*(s*d-c*h)-u*(o*d-i*h)+l*(o*c-i*s)),t[4]=-(a*(h*y-d*m)-f*(s*y-c*m)+p*(s*d-c*h)),t[5]=n*(h*y-d*m)-f*(o*y-i*m)+p*(o*d-i*h),t[6]=-(n*(s*y-c*m)-a*(o*y-i*m)+p*(o*c-i*s)),t[7]=n*(s*d-c*h)-a*(o*d-i*h)+f*(o*c-i*s),t[8]=a*(l*y-d*v)-f*(u*y-c*v)+p*(u*d-c*l),t[9]=-(n*(l*y-d*v)-f*(r*y-i*v)+p*(r*d-i*l)),t[10]=n*(u*y-c*v)-a*(r*y-i*v)+p*(r*c-i*u),t[11]=-(n*(u*d-c*l)-a*(r*d-i*l)+f*(r*c-i*u)),t[12]=-(a*(l*m-h*v)-f*(u*m-s*v)+p*(u*h-s*l)),t[13]=n*(l*m-h*v)-f*(r*m-o*v)+p*(r*h-o*l),t[14]=-(n*(u*m-s*v)-a*(r*m-o*v)+p*(r*s-o*u)),t[15]=n*(u*h-s*l)-a*(r*h-o*l)+f*(r*s-o*u),t}function ii(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5],u=t[6],s=t[7],c=t[8],f=t[9],l=t[10],h=t[11],d=t[12],p=t[13],v=t[14],m=t[15];return(e*a-n*i)*(l*m-h*v)-(e*u-r*i)*(f*m-h*p)+(e*s-o*i)*(f*v-l*p)+(n*u-r*a)*(c*m-h*d)-(n*s-o*a)*(c*v-l*d)+(r*s-o*u)*(c*p-f*d)}function ai(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],d=e[10],p=e[11],v=e[12],m=e[13],y=e[14],g=e[15],b=n[0],_=n[1],x=n[2],w=n[3];return t[0]=b*r+_*u+x*l+w*v,t[1]=b*o+_*s+x*h+w*m,t[2]=b*i+_*c+x*d+w*y,t[3]=b*a+_*f+x*p+w*g,b=n[4],_=n[5],x=n[6],w=n[7],t[4]=b*r+_*u+x*l+w*v,t[5]=b*o+_*s+x*h+w*m,t[6]=b*i+_*c+x*d+w*y,t[7]=b*a+_*f+x*p+w*g,b=n[8],_=n[9],x=n[10],w=n[11],t[8]=b*r+_*u+x*l+w*v,t[9]=b*o+_*s+x*h+w*m,t[10]=b*i+_*c+x*d+w*y,t[11]=b*a+_*f+x*p+w*g,b=n[12],_=n[13],x=n[14],w=n[15],t[12]=b*r+_*u+x*l+w*v,t[13]=b*o+_*s+x*h+w*m,t[14]=b*i+_*c+x*d+w*y,t[15]=b*a+_*f+x*p+w*g,t}function ui(t,e,n){var r,o,i,a,u,s,c,f,l,h,d,p,v=n[0],m=n[1],y=n[2];return e===t?(t[12]=e[0]*v+e[4]*m+e[8]*y+e[12],t[13]=e[1]*v+e[5]*m+e[9]*y+e[13],t[14]=e[2]*v+e[6]*m+e[10]*y+e[14],t[15]=e[3]*v+e[7]*m+e[11]*y+e[15]):(r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],d=e[10],p=e[11],t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=u,t[5]=s,t[6]=c,t[7]=f,t[8]=l,t[9]=h,t[10]=d,t[11]=p,t[12]=r*v+u*m+l*y+e[12],t[13]=o*v+s*m+h*y+e[13],t[14]=i*v+c*m+d*y+e[14],t[15]=a*v+f*m+p*y+e[15]),t}function si(t,e,n){var r=n[0],o=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ci(t,e,n,r){var o,i,a,u,s,c,f,l,h,d,p,v,m,y,g,b,_,x,w,E,S,T,A,I,k=r[0],O=r[1],D=r[2],R=Math.hypot(k,O,D);return R<vo?null:(k*=R=1/R,O*=R,D*=R,o=Math.sin(n),a=1-(i=Math.cos(n)),u=e[0],s=e[1],c=e[2],f=e[3],l=e[4],h=e[5],d=e[6],p=e[7],v=e[8],m=e[9],y=e[10],g=e[11],b=k*k*a+i,_=O*k*a+D*o,x=D*k*a-O*o,w=k*O*a-D*o,E=O*O*a+i,S=D*O*a+k*o,T=k*D*a+O*o,A=O*D*a-k*o,I=D*D*a+i,t[0]=u*b+l*_+v*x,t[1]=s*b+h*_+m*x,t[2]=c*b+d*_+y*x,t[3]=f*b+p*_+g*x,t[4]=u*w+l*E+v*S,t[5]=s*w+h*E+m*S,t[6]=c*w+d*E+y*S,t[7]=f*w+p*E+g*S,t[8]=u*T+l*A+v*I,t[9]=s*T+h*A+m*I,t[10]=c*T+d*A+y*I,t[11]=f*T+p*A+g*I,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function fi(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[4],a=e[5],u=e[6],s=e[7],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*o+c*r,t[5]=a*o+f*r,t[6]=u*o+l*r,t[7]=s*o+h*r,t[8]=c*o-i*r,t[9]=f*o-a*r,t[10]=l*o-u*r,t[11]=h*o-s*r,t}function li(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[0],a=e[1],u=e[2],s=e[3],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o-c*r,t[1]=a*o-f*r,t[2]=u*o-l*r,t[3]=s*o-h*r,t[8]=i*r+c*o,t[9]=a*r+f*o,t[10]=u*r+l*o,t[11]=s*r+h*o,t}function hi(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[0],a=e[1],u=e[2],s=e[3],c=e[4],f=e[5],l=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o+c*r,t[1]=a*o+f*r,t[2]=u*o+l*r,t[3]=s*o+h*r,t[4]=c*o-i*r,t[5]=f*o-a*r,t[6]=l*o-u*r,t[7]=h*o-s*r,t}function di(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function pi(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function vi(t,e,n){var r,o,i,a=n[0],u=n[1],s=n[2],c=Math.hypot(a,u,s);return c<vo?null:(a*=c=1/c,u*=c,s*=c,r=Math.sin(e),i=1-(o=Math.cos(e)),t[0]=a*a*i+o,t[1]=u*a*i+s*r,t[2]=s*a*i-u*r,t[3]=0,t[4]=a*u*i-s*r,t[5]=u*u*i+o,t[6]=s*u*i+a*r,t[7]=0,t[8]=a*s*i+u*r,t[9]=u*s*i-a*r,t[10]=s*s*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function mi(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function yi(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function gi(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function bi(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=r+r,s=o+o,c=i+i,f=r*u,l=r*s,h=r*c,d=o*s,p=o*c,v=i*c,m=a*u,y=a*s,g=a*c;return t[0]=1-(d+v),t[1]=l+g,t[2]=h-y,t[3]=0,t[4]=l-g,t[5]=1-(f+v),t[6]=p+m,t[7]=0,t[8]=h+y,t[9]=p-m,t[10]=1-(f+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function _i(t,e){var n=new mo(3),r=-e[0],o=-e[1],i=-e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=r*r+o*o+i*i+a*a;return l>0?(n[0]=2*(u*a+f*r+s*i-c*o)/l,n[1]=2*(s*a+f*o+c*r-u*i)/l,n[2]=2*(c*a+f*i+u*o-s*r)/l):(n[0]=2*(u*a+f*r+s*i-c*o),n[1]=2*(s*a+f*o+c*r-u*i),n[2]=2*(c*a+f*i+u*o-s*r)),bi(t,e,n),t}function xi(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function wi(t,e){var n=e[0],r=e[1],o=e[2],i=e[4],a=e[5],u=e[6],s=e[8],c=e[9],f=e[10];return t[0]=Math.hypot(n,r,o),t[1]=Math.hypot(i,a,u),t[2]=Math.hypot(s,c,f),t}function Ei(t,e){var n=new mo(3);wi(n,e);var r=1/n[0],o=1/n[1],i=1/n[2],a=e[0]*r,u=e[1]*o,s=e[2]*i,c=e[4]*r,f=e[5]*o,l=e[6]*i,h=e[8]*r,d=e[9]*o,p=e[10]*i,v=a+f+p,m=0;return v>0?(m=2*Math.sqrt(v+1),t[3]=.25*m,t[0]=(l-d)/m,t[1]=(h-s)/m,t[2]=(u-c)/m):a>f&&a>p?(m=2*Math.sqrt(1+a-f-p),t[3]=(l-d)/m,t[0]=.25*m,t[1]=(u+c)/m,t[2]=(h+s)/m):f>p?(m=2*Math.sqrt(1+f-a-p),t[3]=(h-s)/m,t[0]=(u+c)/m,t[1]=.25*m,t[2]=(l+d)/m):(m=2*Math.sqrt(1+p-a-f),t[3]=(u-c)/m,t[0]=(h+s)/m,t[1]=(l+d)/m,t[2]=.25*m),t}function Si(t,e,n,r){var o=e[0],i=e[1],a=e[2],u=e[3],s=o+o,c=i+i,f=a+a,l=o*s,h=o*c,d=o*f,p=i*c,v=i*f,m=a*f,y=u*s,g=u*c,b=u*f,_=r[0],x=r[1],w=r[2];return t[0]=(1-(p+m))*_,t[1]=(h+b)*_,t[2]=(d-g)*_,t[3]=0,t[4]=(h-b)*x,t[5]=(1-(l+m))*x,t[6]=(v+y)*x,t[7]=0,t[8]=(d+g)*w,t[9]=(v-y)*w,t[10]=(1-(l+p))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Ti(t,e,n,r,o){var i=e[0],a=e[1],u=e[2],s=e[3],c=i+i,f=a+a,l=u+u,h=i*c,d=i*f,p=i*l,v=a*f,m=a*l,y=u*l,g=s*c,b=s*f,_=s*l,x=r[0],w=r[1],E=r[2],S=o[0],T=o[1],A=o[2],I=(1-(v+y))*x,k=(d+_)*x,O=(p-b)*x,D=(d-_)*w,R=(1-(h+y))*w,M=(m+g)*w,C=(p+b)*E,N=(m-g)*E,P=(1-(h+v))*E;return t[0]=I,t[1]=k,t[2]=O,t[3]=0,t[4]=D,t[5]=R,t[6]=M,t[7]=0,t[8]=C,t[9]=N,t[10]=P,t[11]=0,t[12]=n[0]+S-(I*S+D*T+C*A),t[13]=n[1]+T-(k*S+R*T+N*A),t[14]=n[2]+A-(O*S+M*T+P*A),t[15]=1,t}function Ai(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n+n,u=r+r,s=o+o,c=n*a,f=r*a,l=r*u,h=o*a,d=o*u,p=o*s,v=i*a,m=i*u,y=i*s;return t[0]=1-l-p,t[1]=f+y,t[2]=h-m,t[3]=0,t[4]=f-y,t[5]=1-c-p,t[6]=d+v,t[7]=0,t[8]=h+m,t[9]=d-v,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ii(t,e,n,r,o,i,a){var u=1/(n-e),s=1/(o-r),c=1/(i-a);return t[0]=2*i*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*s,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(o+r)*s,t[10]=(a+i)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*i*2*c,t[15]=0,t}function ki(t,e,n,r,o){var i,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(i=1/(r-o),t[10]=(o+r)*i,t[14]=2*o*r*i):(t[10]=-1,t[14]=-2*r),t}function Oi(t,e,n,r){var o=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(a+u),c=2/(o+i);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-u)*s*.5,t[9]=(o-i)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Di(t,e,n,r,o,i,a){var u=1/(e-n),s=1/(r-o),c=1/(i-a);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*u,t[13]=(o+r)*s,t[14]=(a+i)*c,t[15]=1,t}function Ri(t,e,n,r){var o,i,a,u,s,c,f,l,h,d,p=e[0],v=e[1],m=e[2],y=r[0],g=r[1],b=r[2],_=n[0],x=n[1],w=n[2];return Math.abs(p-_)<vo&&Math.abs(v-x)<vo&&Math.abs(m-w)<vo?ei(t):(f=p-_,l=v-x,h=m-w,o=g*(h*=d=1/Math.hypot(f,l,h))-b*(l*=d),i=b*(f*=d)-y*h,a=y*l-g*f,(d=Math.hypot(o,i,a))?(o*=d=1/d,i*=d,a*=d):(o=0,i=0,a=0),u=l*a-h*i,s=h*o-f*a,c=f*i-l*o,(d=Math.hypot(u,s,c))?(u*=d=1/d,s*=d,c*=d):(u=0,s=0,c=0),t[0]=o,t[1]=u,t[2]=f,t[3]=0,t[4]=i,t[5]=s,t[6]=l,t[7]=0,t[8]=a,t[9]=c,t[10]=h,t[11]=0,t[12]=-(o*p+i*v+a*m),t[13]=-(u*p+s*v+c*m),t[14]=-(f*p+l*v+h*m),t[15]=1,t)}function Mi(t,e,n,r){var o=e[0],i=e[1],a=e[2],u=r[0],s=r[1],c=r[2],f=o-n[0],l=i-n[1],h=a-n[2],d=f*f+l*l+h*h;d>0&&(f*=d=1/Math.sqrt(d),l*=d,h*=d);var p=s*h-c*l,v=c*f-u*h,m=u*l-s*f;return(d=p*p+v*v+m*m)>0&&(p*=d=1/Math.sqrt(d),v*=d,m*=d),t[0]=p,t[1]=v,t[2]=m,t[3]=0,t[4]=l*m-h*v,t[5]=h*p-f*m,t[6]=f*v-l*p,t[7]=0,t[8]=f,t[9]=l,t[10]=h,t[11]=0,t[12]=o,t[13]=i,t[14]=a,t[15]=1,t}function Ci(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Ni(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Pi(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Gi(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function ji(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Li(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Ui(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Bi(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=t[9],h=t[10],d=t[11],p=t[12],v=t[13],m=t[14],y=t[15],g=e[0],b=e[1],_=e[2],x=e[3],w=e[4],E=e[5],S=e[6],T=e[7],A=e[8],I=e[9],k=e[10],O=e[11],D=e[12],R=e[13],M=e[14],C=e[15];return Math.abs(n-g)<=vo*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-b)<=vo*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(o-_)<=vo*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(i-x)<=vo*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(a-w)<=vo*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(u-E)<=vo*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(s-S)<=vo*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(c-T)<=vo*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(f-A)<=vo*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(l-I)<=vo*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(h-k)<=vo*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(d-O)<=vo*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(p-D)<=vo*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(v-R)<=vo*Math.max(1,Math.abs(v),Math.abs(R))&&Math.abs(m-M)<=vo*Math.max(1,Math.abs(m),Math.abs(M))&&Math.abs(y-C)<=vo*Math.max(1,Math.abs(y),Math.abs(C))}var Fi=ai,zi=Gi;function Vi(){var t=new mo(3);return mo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Wi(t){var e=new mo(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Xi(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function Hi(t,e,n){var r=new mo(3);return r[0]=t,r[1]=e,r[2]=n,r}function qi(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Yi(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Ki(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Zi(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Qi(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Ji(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function $i(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function ta(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function ea(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function na(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function ra(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function oa(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function ia(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function aa(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return Math.hypot(n,r,o)}function ua(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return n*n+r*r+o*o}function sa(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function ca(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function fa(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function la(t,e){var n=e[0],r=e[1],o=e[2],i=n*n+r*r+o*o;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function ha(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function da(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],u=n[1],s=n[2];return t[0]=o*s-i*u,t[1]=i*a-r*s,t[2]=r*u-o*a,t}function pa(t,e,n,r){var o=e[0],i=e[1],a=e[2];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t[2]=a+r*(n[2]-a),t}function va(t,e,n,r,o,i){var a=i*i,u=a*(2*i-3)+1,s=a*(i-2)+i,c=a*(i-1),f=a*(3-2*i);return t[0]=e[0]*u+n[0]*s+r[0]*c+o[0]*f,t[1]=e[1]*u+n[1]*s+r[1]*c+o[1]*f,t[2]=e[2]*u+n[2]*s+r[2]*c+o[2]*f,t}function ma(t,e,n,r,o,i){var a=1-i,u=a*a,s=i*i,c=u*a,f=3*i*u,l=3*s*a,h=s*i;return t[0]=e[0]*c+n[0]*f+r[0]*l+o[0]*h,t[1]=e[1]*c+n[1]*f+r[1]*l+o[1]*h,t[2]=e[2]*c+n[2]*f+r[2]*l+o[2]*h,t}function ya(t,e){e=e||1;var n=2*yo()*Math.PI,r=2*yo()-1,o=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=r*e,t}function ga(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[3]*r+n[7]*o+n[11]*i+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*o+n[8]*i+n[12])/a,t[1]=(n[1]*r+n[5]*o+n[9]*i+n[13])/a,t[2]=(n[2]*r+n[6]*o+n[10]*i+n[14])/a,t}function ba(t,e,n){var r=e[0],o=e[1],i=e[2];return t[0]=r*n[0]+o*n[3]+i*n[6],t[1]=r*n[1]+o*n[4]+i*n[7],t[2]=r*n[2]+o*n[5]+i*n[8],t}function _a(t,e,n){var r=n[0],o=n[1],i=n[2],a=n[3],u=e[0],s=e[1],c=e[2],f=o*c-i*s,l=i*u-r*c,h=r*s-o*u,d=o*h-i*l,p=i*f-r*h,v=r*l-o*f,m=2*a;return f*=m,l*=m,h*=m,d*=2,p*=2,v*=2,t[0]=u+f+d,t[1]=s+l+p,t[2]=c+h+v,t}function xa(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[0],i[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),i[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function wa(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),i[1]=o[1],i[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Ea(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),i[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),i[2]=o[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Sa(t,e){var n=t[0],r=t[1],o=t[2],i=e[0],a=e[1],u=e[2],s=Math.sqrt(n*n+r*r+o*o)*Math.sqrt(i*i+a*a+u*u),c=s&&ha(t,e)/s;return Math.acos(Math.min(Math.max(c,-1),1))}function Ta(t){return t[0]=0,t[1]=0,t[2]=0,t}function Aa(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Ia(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function ka(t,e){var n=t[0],r=t[1],o=t[2],i=e[0],a=e[1],u=e[2];return Math.abs(n-i)<=vo*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-a)<=vo*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-u)<=vo*Math.max(1,Math.abs(o),Math.abs(u))}var Oa,Da=Zi,Ra=Qi,Ma=Ji,Ca=aa,Na=ua,Pa=Xi,Ga=sa,ja=(Oa=Vi(),function(t,e,n,r,o,i){var a,u;for(e||(e=3),n||(n=0),u=r?Math.min(r*e+n,t.length):t.length,a=n;a<u;a+=e)Oa[0]=t[a],Oa[1]=t[a+1],Oa[2]=t[a+2],o(Oa,Oa,i),t[a]=Oa[0],t[a+1]=Oa[1],t[a+2]=Oa[2];return t});function La(){var t=new mo(4);return mo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Ua(t){var e=new mo(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Ba(t,e,n,r){var o=new mo(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o}function Fa(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function za(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t}function Va(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function Wa(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Xa(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function Ha(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function qa(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Ya(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Ka(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function Za(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function Qa(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Ja(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function $a(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function tu(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],i=e[3]-t[3];return Math.hypot(n,r,o,i)}function eu(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],i=e[3]-t[3];return n*n+r*r+o*o+i*i}function nu(t){var e=t[0],n=t[1],r=t[2],o=t[3];return Math.hypot(e,n,r,o)}function ru(t){var e=t[0],n=t[1],r=t[2],o=t[3];return e*e+n*n+r*r+o*o}function ou(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function iu(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function au(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*n+r*r+o*o+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=o*a,t[3]=i*a,t}function uu(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function su(t,e,n,r){var o=n[0]*r[1]-n[1]*r[0],i=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],u=n[1]*r[2]-n[2]*r[1],s=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],f=e[0],l=e[1],h=e[2],d=e[3];return t[0]=l*c-h*s+d*u,t[1]=-f*c+h*a-d*i,t[2]=f*s-l*a+d*o,t[3]=-f*u+l*i-h*o,t}function cu(t,e,n,r){var o=e[0],i=e[1],a=e[2],u=e[3];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t[2]=a+r*(n[2]-a),t[3]=u+r*(n[3]-u),t}function fu(t,e){var n,r,o,i,a,u;e=e||1;do{a=(n=2*yo()-1)*n+(r=2*yo()-1)*r}while(a>=1);do{u=(o=2*yo()-1)*o+(i=2*yo()-1)*i}while(u>=1);var s=Math.sqrt((1-a)/u);return t[0]=e*n,t[1]=e*r,t[2]=e*o*s,t[3]=e*i*s,t}function lu(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3];return t[0]=n[0]*r+n[4]*o+n[8]*i+n[12]*a,t[1]=n[1]*r+n[5]*o+n[9]*i+n[13]*a,t[2]=n[2]*r+n[6]*o+n[10]*i+n[14]*a,t[3]=n[3]*r+n[7]*o+n[11]*i+n[15]*a,t}function hu(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],u=n[1],s=n[2],c=n[3],f=c*r+u*i-s*o,l=c*o+s*r-a*i,h=c*i+a*o-u*r,d=-a*r-u*o-s*i;return t[0]=f*c+d*-a+l*-s-h*-u,t[1]=l*c+d*-u+h*-a-f*-s,t[2]=h*c+d*-s+f*-u-l*-a,t[3]=e[3],t}function du(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function pu(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function vu(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function mu(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=e[0],u=e[1],s=e[2],c=e[3];return Math.abs(n-a)<=vo*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-u)<=vo*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-s)<=vo*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-c)<=vo*Math.max(1,Math.abs(i),Math.abs(c))}var yu=Wa,gu=Xa,bu=Ha,_u=tu,xu=eu,wu=nu,Eu=ru,Su=function(){var t=La();return function(e,n,r,o,i,a){var u,s;for(n||(n=4),r||(r=0),s=o?Math.min(o*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],i(t,t,a),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}();function Tu(){var t=new mo(4);return mo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Au(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Iu(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function ku(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>vo?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Ou(t,e){var n=ds(t,e);return Math.acos(2*n*n-1)}function Du(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=n[0],s=n[1],c=n[2],f=n[3];return t[0]=r*f+a*u+o*c-i*s,t[1]=o*f+a*s+i*u-r*c,t[2]=i*f+a*c+r*s-o*u,t[3]=a*f-r*u-o*s-i*c,t}function Ru(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+a*u,t[1]=o*s+i*u,t[2]=i*s-o*u,t[3]=a*s-r*u,t}function Mu(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s-i*u,t[1]=o*s+a*u,t[2]=i*s+r*u,t[3]=a*s-o*u,t}function Cu(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+o*u,t[1]=o*s-r*u,t[2]=i*s+a*u,t[3]=a*s-i*u,t}function Nu(t,e){var n=e[0],r=e[1],o=e[2];return t[0]=n,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),t}function Pu(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=Math.sqrt(n*n+r*r+o*o),u=Math.exp(i),s=a>0?u*Math.sin(a)/a:0;return t[0]=n*s,t[1]=r*s,t[2]=o*s,t[3]=u*Math.cos(a),t}function Gu(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=Math.sqrt(n*n+r*r+o*o),u=a>0?Math.atan2(a,i)/a:0;return t[0]=n*u,t[1]=r*u,t[2]=o*u,t[3]=.5*Math.log(n*n+r*r+o*o+i*i),t}function ju(t,e,n){return Gu(t,e),hs(t,t,n),Pu(t,t),t}function Lu(t,e,n,r){var o,i,a,u,s,c=e[0],f=e[1],l=e[2],h=e[3],d=n[0],p=n[1],v=n[2],m=n[3];return(i=c*d+f*p+l*v+h*m)<0&&(i=-i,d=-d,p=-p,v=-v,m=-m),1-i>vo?(o=Math.acos(i),a=Math.sin(o),u=Math.sin((1-r)*o)/a,s=Math.sin(r*o)/a):(u=1-r,s=r),t[0]=u*c+s*d,t[1]=u*f+s*p,t[2]=u*l+s*v,t[3]=u*h+s*m,t}function Uu(t){var e=yo(),n=yo(),r=yo(),o=Math.sqrt(1-e),i=Math.sqrt(e);return t[0]=o*Math.sin(2*Math.PI*n),t[1]=o*Math.cos(2*Math.PI*n),t[2]=i*Math.sin(2*Math.PI*r),t[3]=i*Math.cos(2*Math.PI*r),t}function Bu(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*n+r*r+o*o+i*i,u=a?1/a:0;return t[0]=-n*u,t[1]=-r*u,t[2]=-o*u,t[3]=i*u,t}function Fu(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function zu(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var i=(o+1)%3,a=(o+2)%3;n=Math.sqrt(e[3*o+o]-e[3*i+i]-e[3*a+a]+1),t[o]=.5*n,n=.5/n,t[3]=(e[3*i+a]-e[3*a+i])*n,t[i]=(e[3*i+o]+e[3*o+i])*n,t[a]=(e[3*a+o]+e[3*o+a])*n}return t}function Vu(t,e,n,r){var o=.5*Math.PI/180;e*=o,n*=o,r*=o;var i=Math.sin(e),a=Math.cos(e),u=Math.sin(n),s=Math.cos(n),c=Math.sin(r),f=Math.cos(r);return t[0]=i*s*f-a*u*c,t[1]=a*u*f+i*s*c,t[2]=a*s*c-i*u*f,t[3]=a*s*f+i*u*c,t}function Wu(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Xu,Hu,qu,Yu,Ku,Zu,Qu,Ju,$u,ts,es,ns,rs,os,is,as=Ua,us=Ba,ss=Fa,cs=za,fs=Va,ls=Du,hs=Ja,ds=uu,ps=cu,vs=nu,ms=vs,ys=ru,gs=ys,bs=au,_s=vu,xs=mu,ws=(Xu=Vi(),Hu=Hi(1,0,0),qu=Hi(0,1,0),function(t,e,n){var r=ha(e,n);return r<-.999999?(da(Xu,Hu,e),Pa(Xu)<1e-6&&da(Xu,qu,e),la(Xu,Xu),Iu(t,Xu,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(da(Xu,e,n),t[0]=Xu[0],t[1]=Xu[1],t[2]=Xu[2],t[3]=1+r,bs(t,t))}),Es=(Yu=Tu(),Ku=Tu(),function(t,e,n,r,o,i){return Lu(Yu,e,o,i),Lu(Ku,n,r,i),Lu(t,Yu,Ku,2*i*(1-i)),t}),Ss=(Zu=go(),function(t,e,n,r){return Zu[0]=n[0],Zu[3]=n[1],Zu[6]=n[2],Zu[1]=r[0],Zu[4]=r[1],Zu[7]=r[2],Zu[2]=-e[0],Zu[5]=-e[1],Zu[8]=-e[2],bs(t,zu(t,Zu))}),Ts=function(){function t(e,n){Er()(this,t),this.center=void 0,this.halfExtents=void 0,this.min=i.create(),this.max=i.create(),this.update(e,n)}return Tr()(t,[{key:"update",value:function(t,e){this.center=t||i.create(),this.halfExtents=e||i.fromValues(.5,.5,.5),this.min=i.sub(this.min,this.center,this.halfExtents),this.max=i.add(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(t,e){i.add(this.center,e,t),i.scale(this.center,this.center,.5),i.sub(this.halfExtents,e,t),i.scale(this.halfExtents,this.halfExtents,.5),i.copy(this.min,t),i.copy(this.max,e)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(t){var e=this.center,n=e[0],r=e[1],o=e[2],i=this.halfExtents,a=i[0],u=i[1],s=i[2],c=n-a,f=n+a,l=r-u,h=r+u,d=o-s,p=o+s,v=t.center,m=v[0],y=v[1],g=v[2],b=t.halfExtents,_=b[0],x=b[1],w=b[2],E=m-_,S=m+_,T=y-x,A=y+x,I=g-w,k=g+w;E<c&&(c=E),S>f&&(f=S),T<l&&(l=T),A>h&&(h=A),I<d&&(d=I),k>p&&(p=k),e[0]=.5*(c+f),e[1]=.5*(l+h),e[2]=.5*(d+p),i[0]=.5*(f-c),i[1]=.5*(h-l),i[2]=.5*(p-d),this.min[0]=c,this.min[1]=l,this.min[2]=d,this.max[0]=f,this.max[1]=h,this.max[2]=p}},{key:"intersects",value:function(t){var e=this.getMax(),n=this.getMin(),r=t.getMax(),o=t.getMin();return n[0]<=r[0]&&e[0]>=o[0]&&n[1]<=r[1]&&e[1]>=o[1]&&n[2]<=r[2]&&e[2]>=o[2]}},{key:"containsPoint",value:function(t){var e=this.getMin(),n=this.getMax();return!(t[0]<e[0]||t[0]>n[0]||t[1]<e[1]||t[1]>n[1]||t[2]<e[2]||t[2]>n[2])}},{key:"getNegativeFarPoint",value:function(t){return 273===t.pnVertexFlag?i.copy(i.create(),this.min):272===t.pnVertexFlag?i.fromValues(this.min[0],this.min[1],this.max[2]):257===t.pnVertexFlag?i.fromValues(this.min[0],this.max[1],this.min[2]):256===t.pnVertexFlag?i.fromValues(this.min[0],this.max[1],this.max[2]):17===t.pnVertexFlag?i.fromValues(this.max[0],this.min[1],this.min[2]):16===t.pnVertexFlag?i.fromValues(this.max[0],this.min[1],this.max[2]):1===t.pnVertexFlag?i.fromValues(this.max[0],this.max[1],this.min[2]):i.fromValues(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(t){return 273===t.pnVertexFlag?i.copy(i.create(),this.max):272===t.pnVertexFlag?i.fromValues(this.max[0],this.max[1],this.min[2]):257===t.pnVertexFlag?i.fromValues(this.max[0],this.min[1],this.max[2]):256===t.pnVertexFlag?i.fromValues(this.max[0],this.min[1],this.min[2]):17===t.pnVertexFlag?i.fromValues(this.min[0],this.max[1],this.max[2]):16===t.pnVertexFlag?i.fromValues(this.min[0],this.max[1],this.min[2]):1===t.pnVertexFlag?i.fromValues(this.min[0],this.min[1],this.max[2]):i.fromValues(this.min[0],this.min[1],this.min[2])}}]),t}();function As(t){for(var e=new Ts,n=i.fromValues(t[0],t[1],t[2]),r=i.fromValues(t[0],t[1],t[2]),o=3;o<t.length;){var a=t[o++],u=t[o++],s=t[o++];a<n[0]&&(n[0]=a),u<n[1]&&(n[1]=u),s<n[2]&&(n[2]=s),a>r[0]&&(r[0]=a),u>r[1]&&(r[1]=u),s>r[2]&&(r[2]=s)}return e.setMinMax(n,r),e}(Ju=Qu||(Qu={}))[Ju.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",Ju[Ju.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",Ju[Ju.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",Ju[Ju.POINTS=0]="POINTS",Ju[Ju.LINES=1]="LINES",Ju[Ju.LINE_LOOP=2]="LINE_LOOP",Ju[Ju.LINE_STRIP=3]="LINE_STRIP",Ju[Ju.TRIANGLES=4]="TRIANGLES",Ju[Ju.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",Ju[Ju.TRIANGLE_FAN=6]="TRIANGLE_FAN",Ju[Ju.ZERO=0]="ZERO",Ju[Ju.ONE=1]="ONE",Ju[Ju.SRC_COLOR=768]="SRC_COLOR",Ju[Ju.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",Ju[Ju.SRC_ALPHA=770]="SRC_ALPHA",Ju[Ju.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",Ju[Ju.DST_ALPHA=772]="DST_ALPHA",Ju[Ju.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",Ju[Ju.DST_COLOR=774]="DST_COLOR",Ju[Ju.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",Ju[Ju.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",Ju[Ju.FUNC_ADD=32774]="FUNC_ADD",Ju[Ju.BLEND_EQUATION=32777]="BLEND_EQUATION",Ju[Ju.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",Ju[Ju.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",Ju[Ju.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",Ju[Ju.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",Ju[Ju.MAX_EXT=32776]="MAX_EXT",Ju[Ju.MIN_EXT=32775]="MIN_EXT",Ju[Ju.BLEND_DST_RGB=32968]="BLEND_DST_RGB",Ju[Ju.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",Ju[Ju.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",Ju[Ju.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",Ju[Ju.CONSTANT_COLOR=32769]="CONSTANT_COLOR",Ju[Ju.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",Ju[Ju.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",Ju[Ju.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",Ju[Ju.BLEND_COLOR=32773]="BLEND_COLOR",Ju[Ju.ARRAY_BUFFER=34962]="ARRAY_BUFFER",Ju[Ju.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",Ju[Ju.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",Ju[Ju.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",Ju[Ju.STREAM_DRAW=35040]="STREAM_DRAW",Ju[Ju.STATIC_DRAW=35044]="STATIC_DRAW",Ju[Ju.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",Ju[Ju.BUFFER_SIZE=34660]="BUFFER_SIZE",Ju[Ju.BUFFER_USAGE=34661]="BUFFER_USAGE",Ju[Ju.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",Ju[Ju.FRONT=1028]="FRONT",Ju[Ju.BACK=1029]="BACK",Ju[Ju.FRONT_AND_BACK=1032]="FRONT_AND_BACK",Ju[Ju.CULL_FACE=2884]="CULL_FACE",Ju[Ju.BLEND=3042]="BLEND",Ju[Ju.DITHER=3024]="DITHER",Ju[Ju.STENCIL_TEST=2960]="STENCIL_TEST",Ju[Ju.DEPTH_TEST=2929]="DEPTH_TEST",Ju[Ju.SCISSOR_TEST=3089]="SCISSOR_TEST",Ju[Ju.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",Ju[Ju.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",Ju[Ju.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",Ju[Ju.NO_ERROR=0]="NO_ERROR",Ju[Ju.INVALID_ENUM=1280]="INVALID_ENUM",Ju[Ju.INVALID_VALUE=1281]="INVALID_VALUE",Ju[Ju.INVALID_OPERATION=1282]="INVALID_OPERATION",Ju[Ju.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",Ju[Ju.CW=2304]="CW",Ju[Ju.CCW=2305]="CCW",Ju[Ju.LINE_WIDTH=2849]="LINE_WIDTH",Ju[Ju.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",Ju[Ju.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",Ju[Ju.CULL_FACE_MODE=2885]="CULL_FACE_MODE",Ju[Ju.FRONT_FACE=2886]="FRONT_FACE",Ju[Ju.DEPTH_RANGE=2928]="DEPTH_RANGE",Ju[Ju.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",Ju[Ju.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",Ju[Ju.DEPTH_FUNC=2932]="DEPTH_FUNC",Ju[Ju.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",Ju[Ju.STENCIL_FUNC=2962]="STENCIL_FUNC",Ju[Ju.STENCIL_FAIL=2964]="STENCIL_FAIL",Ju[Ju.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",Ju[Ju.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",Ju[Ju.STENCIL_REF=2967]="STENCIL_REF",Ju[Ju.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",Ju[Ju.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",Ju[Ju.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",Ju[Ju.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",Ju[Ju.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",Ju[Ju.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",Ju[Ju.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",Ju[Ju.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",Ju[Ju.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",Ju[Ju.VIEWPORT=2978]="VIEWPORT",Ju[Ju.SCISSOR_BOX=3088]="SCISSOR_BOX",Ju[Ju.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",Ju[Ju.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",Ju[Ju.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",Ju[Ju.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",Ju[Ju.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",Ju[Ju.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",Ju[Ju.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",Ju[Ju.RED_BITS=3410]="RED_BITS",Ju[Ju.GREEN_BITS=3411]="GREEN_BITS",Ju[Ju.BLUE_BITS=3412]="BLUE_BITS",Ju[Ju.ALPHA_BITS=3413]="ALPHA_BITS",Ju[Ju.DEPTH_BITS=3414]="DEPTH_BITS",Ju[Ju.STENCIL_BITS=3415]="STENCIL_BITS",Ju[Ju.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",Ju[Ju.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",Ju[Ju.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",Ju[Ju.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",Ju[Ju.SAMPLES=32937]="SAMPLES",Ju[Ju.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",Ju[Ju.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",Ju[Ju.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",Ju[Ju.DONT_CARE=4352]="DONT_CARE",Ju[Ju.FASTEST=4353]="FASTEST",Ju[Ju.NICEST=4354]="NICEST",Ju[Ju.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",Ju[Ju.BYTE=5120]="BYTE",Ju[Ju.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",Ju[Ju.SHORT=5122]="SHORT",Ju[Ju.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",Ju[Ju.INT=5124]="INT",Ju[Ju.UNSIGNED_INT=5125]="UNSIGNED_INT",Ju[Ju.FLOAT=5126]="FLOAT",Ju[Ju.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",Ju[Ju.ALPHA=6406]="ALPHA",Ju[Ju.RGB=6407]="RGB",Ju[Ju.RGBA=6408]="RGBA",Ju[Ju.LUMINANCE=6409]="LUMINANCE",Ju[Ju.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",Ju[Ju.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",Ju[Ju.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",Ju[Ju.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",Ju[Ju.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",Ju[Ju.VERTEX_SHADER=35633]="VERTEX_SHADER",Ju[Ju.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",Ju[Ju.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",Ju[Ju.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",Ju[Ju.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",Ju[Ju.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",Ju[Ju.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",Ju[Ju.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",Ju[Ju.SHADER_TYPE=35663]="SHADER_TYPE",Ju[Ju.DELETE_STATUS=35712]="DELETE_STATUS",Ju[Ju.LINK_STATUS=35714]="LINK_STATUS",Ju[Ju.VALIDATE_STATUS=35715]="VALIDATE_STATUS",Ju[Ju.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",Ju[Ju.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",Ju[Ju.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",Ju[Ju.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",Ju[Ju.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",Ju[Ju.NEVER=512]="NEVER",Ju[Ju.LESS=513]="LESS",Ju[Ju.EQUAL=514]="EQUAL",Ju[Ju.LEQUAL=515]="LEQUAL",Ju[Ju.GREATER=516]="GREATER",Ju[Ju.NOTEQUAL=517]="NOTEQUAL",Ju[Ju.GEQUAL=518]="GEQUAL",Ju[Ju.ALWAYS=519]="ALWAYS",Ju[Ju.KEEP=7680]="KEEP",Ju[Ju.REPLACE=7681]="REPLACE",Ju[Ju.INCR=7682]="INCR",Ju[Ju.DECR=7683]="DECR",Ju[Ju.INVERT=5386]="INVERT",Ju[Ju.INCR_WRAP=34055]="INCR_WRAP",Ju[Ju.DECR_WRAP=34056]="DECR_WRAP",Ju[Ju.VENDOR=7936]="VENDOR",Ju[Ju.RENDERER=7937]="RENDERER",Ju[Ju.VERSION=7938]="VERSION",Ju[Ju.NEAREST=9728]="NEAREST",Ju[Ju.LINEAR=9729]="LINEAR",Ju[Ju.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",Ju[Ju.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",Ju[Ju.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",Ju[Ju.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",Ju[Ju.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",Ju[Ju.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",Ju[Ju.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",Ju[Ju.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",Ju[Ju.TEXTURE_2D=3553]="TEXTURE_2D",Ju[Ju.TEXTURE=5890]="TEXTURE",Ju[Ju.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Ju[Ju.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",Ju[Ju.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Ju[Ju.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Ju[Ju.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Ju[Ju.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Ju[Ju.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Ju[Ju.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",Ju[Ju.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",Ju[Ju.TEXTURE0=33984]="TEXTURE0",Ju[Ju.TEXTURE1=33985]="TEXTURE1",Ju[Ju.TEXTURE2=33986]="TEXTURE2",Ju[Ju.TEXTURE3=33987]="TEXTURE3",Ju[Ju.TEXTURE4=33988]="TEXTURE4",Ju[Ju.TEXTURE5=33989]="TEXTURE5",Ju[Ju.TEXTURE6=33990]="TEXTURE6",Ju[Ju.TEXTURE7=33991]="TEXTURE7",Ju[Ju.TEXTURE8=33992]="TEXTURE8",Ju[Ju.TEXTURE9=33993]="TEXTURE9",Ju[Ju.TEXTURE10=33994]="TEXTURE10",Ju[Ju.TEXTURE11=33995]="TEXTURE11",Ju[Ju.TEXTURE12=33996]="TEXTURE12",Ju[Ju.TEXTURE13=33997]="TEXTURE13",Ju[Ju.TEXTURE14=33998]="TEXTURE14",Ju[Ju.TEXTURE15=33999]="TEXTURE15",Ju[Ju.TEXTURE16=34e3]="TEXTURE16",Ju[Ju.TEXTURE17=34001]="TEXTURE17",Ju[Ju.TEXTURE18=34002]="TEXTURE18",Ju[Ju.TEXTURE19=34003]="TEXTURE19",Ju[Ju.TEXTURE20=34004]="TEXTURE20",Ju[Ju.TEXTURE21=34005]="TEXTURE21",Ju[Ju.TEXTURE22=34006]="TEXTURE22",Ju[Ju.TEXTURE23=34007]="TEXTURE23",Ju[Ju.TEXTURE24=34008]="TEXTURE24",Ju[Ju.TEXTURE25=34009]="TEXTURE25",Ju[Ju.TEXTURE26=34010]="TEXTURE26",Ju[Ju.TEXTURE27=34011]="TEXTURE27",Ju[Ju.TEXTURE28=34012]="TEXTURE28",Ju[Ju.TEXTURE29=34013]="TEXTURE29",Ju[Ju.TEXTURE30=34014]="TEXTURE30",Ju[Ju.TEXTURE31=34015]="TEXTURE31",Ju[Ju.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",Ju[Ju.REPEAT=10497]="REPEAT",Ju[Ju.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",Ju[Ju.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",Ju[Ju.FLOAT_VEC2=35664]="FLOAT_VEC2",Ju[Ju.FLOAT_VEC3=35665]="FLOAT_VEC3",Ju[Ju.FLOAT_VEC4=35666]="FLOAT_VEC4",Ju[Ju.INT_VEC2=35667]="INT_VEC2",Ju[Ju.INT_VEC3=35668]="INT_VEC3",Ju[Ju.INT_VEC4=35669]="INT_VEC4",Ju[Ju.BOOL=35670]="BOOL",Ju[Ju.BOOL_VEC2=35671]="BOOL_VEC2",Ju[Ju.BOOL_VEC3=35672]="BOOL_VEC3",Ju[Ju.BOOL_VEC4=35673]="BOOL_VEC4",Ju[Ju.FLOAT_MAT2=35674]="FLOAT_MAT2",Ju[Ju.FLOAT_MAT3=35675]="FLOAT_MAT3",Ju[Ju.FLOAT_MAT4=35676]="FLOAT_MAT4",Ju[Ju.SAMPLER_2D=35678]="SAMPLER_2D",Ju[Ju.SAMPLER_CUBE=35680]="SAMPLER_CUBE",Ju[Ju.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",Ju[Ju.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",Ju[Ju.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",Ju[Ju.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",Ju[Ju.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",Ju[Ju.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",Ju[Ju.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",Ju[Ju.COMPILE_STATUS=35713]="COMPILE_STATUS",Ju[Ju.LOW_FLOAT=36336]="LOW_FLOAT",Ju[Ju.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",Ju[Ju.HIGH_FLOAT=36338]="HIGH_FLOAT",Ju[Ju.LOW_INT=36339]="LOW_INT",Ju[Ju.MEDIUM_INT=36340]="MEDIUM_INT",Ju[Ju.HIGH_INT=36341]="HIGH_INT",Ju[Ju.FRAMEBUFFER=36160]="FRAMEBUFFER",Ju[Ju.RENDERBUFFER=36161]="RENDERBUFFER",Ju[Ju.RGBA4=32854]="RGBA4",Ju[Ju.RGB5_A1=32855]="RGB5_A1",Ju[Ju.RGB565=36194]="RGB565",Ju[Ju.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",Ju[Ju.STENCIL_INDEX=6401]="STENCIL_INDEX",Ju[Ju.STENCIL_INDEX8=36168]="STENCIL_INDEX8",Ju[Ju.DEPTH_STENCIL=34041]="DEPTH_STENCIL",Ju[Ju.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",Ju[Ju.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",Ju[Ju.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",Ju[Ju.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",Ju[Ju.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",Ju[Ju.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",Ju[Ju.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",Ju[Ju.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",Ju[Ju.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",Ju[Ju.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",Ju[Ju.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",Ju[Ju.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",Ju[Ju.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",Ju[Ju.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",Ju[Ju.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",Ju[Ju.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",Ju[Ju.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",Ju[Ju.NONE=0]="NONE",Ju[Ju.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",Ju[Ju.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",Ju[Ju.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",Ju[Ju.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",Ju[Ju.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",Ju[Ju.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",Ju[Ju.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",Ju[Ju.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",Ju[Ju.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",Ju[Ju.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",Ju[Ju.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",Ju[Ju.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",Ju[Ju.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",Ju[Ju.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",Ju[Ju.COPY_SRC=1]="COPY_SRC",Ju[Ju.COPY_DST=2]="COPY_DST",Ju[Ju.SAMPLED=4]="SAMPLED",Ju[Ju.STORAGE=8]="STORAGE",Ju[Ju.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT";var Is=($u=Object(Lr.injectable)(),ts=Object(Lr.inject)(Ur.GeometryComponentManager),es=Object(Lr.inject)(Ur.RenderEngine),$u((rs=function(){function t(){Er()(this,t),xr()(this,"geometry",os,this),xr()(this,"engine",is,this)}var e;return Tr()(t,[{key:"execute",value:(e=Rr()(Or.a.mark((function t(){var e=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.geometry.forEach((function(t,n){n.dirty&&(n.attributes.forEach((function(t){var n;t.dirty&&t.data&&(t.buffer?null===(n=t.buffer)||void 0===n||n.subData({data:t.data,offset:0}):t.buffer=e.engine.createBuffer({data:t.data,type:Qu.FLOAT}),t.dirty=!1)})),n.indices&&(n.indicesBuffer?n.indicesBuffer.subData({data:n.indices,offset:0}):n.indicesBuffer=e.engine.createElements({data:n.indices,count:n.indices.length,type:Qu.UNSIGNED_INT,usage:Qu.STATIC_DRAW})),n.dirty=!1)}));case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.geometry.forEach((function(t,e){e.indicesBuffer&&e.indicesBuffer.destroy(),e.attributes.forEach((function(t){t.buffer&&t.buffer.destroy()}))})),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{vertexCount:3},e=t.vertexCount,n=Cr();return this.geometry.create(n,{vertexCount:e})}},{key:"createInstancedBufferGeometry",value:function(t){var e=t.maxInstancedCount,n=t.vertexCount,r=Cr();return this.geometry.create(r,{maxInstancedCount:e,vertexCount:n})}},{key:"createBox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.widthSegments||1,n=t.heightSegments||1,r=t.depthSegments||1,o=t.halfExtents||i.fromValues(.5,.5,.5),a=jr()(o,3),u=a[0],s=a[1],c=a[2],f=[i.fromValues(-u,-s,c),i.fromValues(u,-s,c),i.fromValues(u,s,c),i.fromValues(-u,s,c),i.fromValues(u,-s,-c),i.fromValues(-u,-s,-c),i.fromValues(-u,s,-c),i.fromValues(u,s,-c)],l=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],h=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],d={FRONT:0,BACK:1,TOP:2,BOTTOM:3,RIGHT:4,LEFT:5},p=[],v=[],m=[],y=[],g=[],b=0,_=function(t,e,n){var r,o,a,u;for(a=0;a<=e;a++)for(u=0;u<=n;u++){var s=i.create(),c=i.create(),d=i.create(),_=i.create();i.lerp(s,f[l[t][0]],f[l[t][1]],a/e),i.lerp(c,f[l[t][0]],f[l[t][2]],u/n),i.sub(d,c,f[l[t][0]]),i.add(_,s,d),r=a/e,o=u/n,p.push(_[0],_[1],_[2]),v.push(h[t][0],h[t][1],h[t][2]),m.push(r,o),r=.875*(r/=3)+4/64,o=.875*(o/=3)+4/64,r+=t%3/3,o+=Math.floor(t/3)/3,y.push(r,o),a<e&&u<n&&(g.push(b+n+1,b+1,b),g.push(b+n+1,b+n+2,b+1)),b++}};_(d.FRONT,e,n),_(d.BACK,e,n),_(d.TOP,e,r),_(d.BOTTOM,e,r),_(d.RIGHT,r,n),_(d.LEFT,r,n);var x=As(p),w=Cr();return this.geometry.create(w,{indices:Uint32Array.from(g),aabb:x,attributes:[{dirty:!0,name:"position",data:Float32Array.from(p),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]}]})}}]),t}(),os=Ir()(rs.prototype,"geometry",[ts],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),is=Ir()(rs.prototype,"engine",[es],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ns=rs))||ns);n(169);function ks(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Os,Ds,Rs,Ms,Cs,Ns,Ps,Gs,js,Ls=function(t){Wr()(n,t);var e=ks(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).vertexShaderGLSL=void 0,r.fragmentShaderGLSL=void 0,r.dirty=!0,r.uniforms=[],r.cull={enable:!0,face:Qu.BACK},r.depth={enable:!0},r.blend=void 0,Object.assign(co()(r),t),r}return Tr()(n,[{key:"setCull",value:function(t){return this.cull=t,this}},{key:"setDepth",value:function(t){return this.depth=t,this}},{key:"setBlend",value:function(t){return this.blend=t,this}},{key:"setUniform",value:function(t,e){var n=this;if("string"!=typeof t)return Object.keys(t).forEach((function(e){return n.setUniform(e,t[e])})),this;var r=this.uniforms.find((function(e){return e.name===t}));return r?(r.dirty=!0,r.data=e):this.uniforms.push({name:t,dirty:!0,data:e}),this.dirty=!0,this}}]),n}(Nr);function Us(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Bs(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Us(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Us(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Fs,zs=(Os=Object(Lr.injectable)(),Ds=Object(Lr.inject)(Ur.MaterialComponentManager),Rs=Object(Lr.inject)(Ur.RenderEngine),Ms=Object(Lr.inject)(Ur.ShaderModuleService),Os((Ns=function(){function t(){Er()(this,t),xr()(this,"material",Ps,this),xr()(this,"engine",Gs,this),xr()(this,"shaderModule",js,this)}var e;return Tr()(t,[{key:"execute",value:(e=Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(this.material.map(function(){var t=Rr()(Or.a.mark((function t(e,n){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.material.clear()}},{key:"createBasicMaterial",value:function(){var t=Cr();return this.material.create(t,{vertexShaderGLSL:this.engine.supportWebGPU?"layout(set = 0, binding = 0) uniform Uniforms {\\n  vec4 color;\\n  mat4 projectionMatrix;\\n  mat4 modelViewMatrix;\\n} uniforms;\\n\\nlayout(location = 0) in vec3 position;\\n// layout(location = 1) in vec3 barycentric;\\n\\nlayout(location = 0) out vec4 fragColor;\\n// layout(location = 1) out vec3 v_Barycentric;\\n\\nvoid main() {\\n  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);\\n  fragColor = uniforms.color;\\n  // v_Barycentric = barycentric;\\n}":"attribute vec3 position;\\n\\nuniform mat4 projectionMatrix;\\nuniform mat4 modelViewMatrix;\\nuniform vec4 color;\\n\\nvarying vec4 fragColor;\\n\\nvoid main() {\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n  fragColor = color;\\n}",fragmentShaderGLSL:this.engine.supportWebGPU?"// layout(set = 0, binding = 1) uniform WireframeUniforms {\\n//   float lineWidth;\\n//   vec4 lineColor;\\n// } wireframe;\\n\\nlayout(location = 0) in vec4 fragColor;\\n// layout(location = 1) in vec3 v_Barycentric;\\n\\nlayout(location = 0) out vec4 outColor;\\n\\n// wireframe\\n// float edgeFactor() {\\n//   vec3 d = fwidth(v_Barycentric);\\n//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);\\n//   return min(min(a3.x, a3.y), a3.z);\\n// }\\n\\nvoid main() {\\n  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));\\n  outColor = fragColor;\\n}":"varying vec4 fragColor;\\n\\nvoid main() {\\n  gl_FragColor = fragColor;\\n}"})}},{key:"createShaderMaterial",value:function(t){var e=Cr(),n=t.vertexShader,r=t.fragmentShader,o=[];if(!this.engine.supportWebGPU){var i="material-".concat(e);this.shaderModule.registerModule(i,{vs:t.vertexShader,fs:t.fragmentShader});var a=this.shaderModule.getModule(i);n=a.vs,r=a.fs,a.uniforms&&(o=Object.keys(a.uniforms).map((function(t){return{dirty:!0,name:t,data:a.uniforms[t]}})))}return this.material.create(e,Bs(Bs({vertexShaderGLSL:n,fragmentShaderGLSL:r},t),{},{uniforms:o}))}}]),t}(),Ps=Ir()(Ns.prototype,"material",[Ds],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gs=Ir()(Ns.prototype,"engine",[Rs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),js=Ir()(Ns.prototype,"shaderModule",[Ms],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cs=Ns))||Cs);function Vs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}!function(t){t[t.Standard=0]="Standard"}(Fs||(Fs={}));var Ws=function(t){Wr()(n,t);var e=Vs(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).strategy=Fs.Standard,r.visibilityPlaneMask=0,r.visible=!1,Object.assign(co()(r),t),r}return n}(Nr);n(170);function Xs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Hs,qs=function(t){Wr()(n,t);var e=Xs(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).material=void 0,r.geometry=void 0,r.aabb=new Ts,r.aabbDirty=!0,r.model=void 0,r.visible=!0,Object.assign(co()(r),t),r}return n}(Nr),Ys=function(){function t(e,n){Er()(this,t),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=e||0,this.normal=n||i.fromValues(0,1,0),this.updatePNVertexFlag()}return Tr()(t,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(t){return i.dot(t,this.normal)-this.distance}},{key:"normalize",value:function(){var t=1/i.len(this.normal);i.scale(this.normal,this.normal,t),this.distance*=t}},{key:"intersectsLine",value:function(t,e,n){var r=this.distanceToPoint(t),o=r/(r-this.distanceToPoint(e)),a=o>=0&&o<=1;return a&&n&&i.lerp(n,t,e,o),a}}]),t}();!function(t){t[t.OUTSIDE=4294967295]="OUTSIDE",t[t.INSIDE=0]="INSIDE",t[t.INDETERMINATE=2147483647]="INDETERMINATE"}(Hs||(Hs={}));var Ks,Zs,Qs,Js,$s,tc,ec,nc,rc,oc,ic,ac,uc,sc=function(){function t(e){if(Er()(this,t),this.planes=[],e)this.planes=e;else for(var n=0;n<6;n++)this.planes.push(new Ys)}return Tr()(t,[{key:"extractFromVPMatrix",value:function(t){var e=jr()(t,16),n=e[0],r=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],d=e[10],p=e[11],v=e[12],m=e[13],y=e[14],g=e[15];i.set(this.planes[0].normal,a-n,f-u,p-l),this.planes[0].distance=-(g-v),i.set(this.planes[1].normal,a+n,f+u,p+l),this.planes[1].distance=-(g+v),i.set(this.planes[2].normal,a+r,f+s,p+h),this.planes[2].distance=-(g+m),i.set(this.planes[3].normal,a-r,f-s,p-h),this.planes[3].distance=-(g-m),i.set(this.planes[4].normal,a-o,f-c,p-d),this.planes[4].distance=-(g-y),i.set(this.planes[5].normal,a+o,f+c,p+d),this.planes[5].distance=-(g+y),this.planes.forEach((function(t){t.normalize(),t.updatePNVertexFlag()}))}}]),t}(),cc=n(35),fc=n.n(cc);function lc(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return hc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hc(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function hc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var dc,pc,vc,mc,yc,gc,bc,_c,xc,wc,Ec,Sc,Tc,Ac,Ic,kc,Oc,Dc,Rc,Mc,Cc,Nc,Pc,Gc,jc=(Ks=Object(Lr.injectable)(),Zs=Object(Lr.inject)(Ur.MeshComponentManager),Qs=Object(Lr.inject)(Ur.CullableComponentManager),Js=Object(Lr.inject)(Ur.GeometryComponentManager),$s=Object(Lr.inject)(Ur.HierarchyComponentManager),tc=Object(Lr.inject)(Ur.TransformComponentManager),Ks((nc=function(){function t(){Er()(this,t),xr()(this,"mesh",rc,this),xr()(this,"cullable",oc,this),xr()(this,"geometry",ic,this),xr()(this,"hierarchy",ac,this),xr()(this,"transform",uc,this),this.planes=void 0}var e;return Tr()(t,[{key:"setFrustumPlanes",value:function(t){this.planes=t}},{key:"execute",value:(e=Rr()(Or.a.mark((function t(e){var n,o,a,u=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=lc(e);try{for(a=function(){var t=o.value,e=(t.getScene(),t.getCamera());u.mesh.forEach((function(t,n){var o,a,s=u.hierarchy.getComponentByEntity(t),c=u.cullable.getComponentByEntity(t),f=n.geometry,l=u.transform.getComponentByEntity(t);if(f&&f.aabb&&l&&n.aabbDirty){var h=l.worldTransform,d=f.aabb,p=d.center,v=d.halfExtents,m=i.transformMat4(i.create(),p,h),y=(o=h,(a=r.create())[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[4],a[4]=o[5],a[5]=o[6],a[6]=o[8],a[7]=o[9],a[8]=o[10],a),g=i.transformMat3(i.create(),v,y);n.aabb.update(m,g),n.aabbDirty=!1}if(c&&f){var b=u.cullable.getComponentByEntity((null==s?void 0:s.parentID)||-1);c.visibilityPlaneMask=u.computeVisibilityWithPlaneMask(n.aabb,(null==b?void 0:b.visibilityPlaneMask)||Hs.INDETERMINATE,u.planes||e.getFrustum().planes),c.visible=c.visibilityPlaneMask!==Hs.OUTSIDE}}))},n.s();!(o=n.n()).done;)a()}catch(t){n.e(t)}finally{n.f()}case 2:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(t,e,n){if(e===Hs.OUTSIDE||e===Hs.INSIDE)return e;for(var r=Hs.INSIDE,o=0,a=n.length;o<a;++o){var u=o<31?1<<o:0;if(!(o<31&&0==(e&u))){var s=n[o],c=s.normal,f=s.distance;if(i.dot(c,t.getNegativeFarPoint(n[o]))+f>0)return Hs.OUTSIDE;i.dot(c,t.getPositiveFarPoint(n[o]))+f>0&&(r|=u)}}return r}}]),t}(),rc=Ir()(nc.prototype,"mesh",[Zs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oc=Ir()(nc.prototype,"cullable",[Qs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ic=Ir()(nc.prototype,"geometry",[Js],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ac=Ir()(nc.prototype,"hierarchy",[$s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uc=Ir()(nc.prototype,"transform",[tc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ec=nc))||ec);function Lc(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Uc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uc(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Uc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Bc,Fc,zc,Vc,Wc,Xc,Hc,qc,Yc,Kc,Zc,Qc,Jc,$c,tf,ef,nf,rf,of,af,uf,sf,cf=(dc=Object(Lr.injectable)(),pc=Object(Lr.inject)(Ur.MeshComponentManager),vc=Object(Lr.inject)(Ur.GeometryComponentManager),mc=Object(Lr.inject)(Ur.MaterialComponentManager),yc=Object(Lr.inject)(Ur.CullableComponentManager),gc=Object(Lr.inject)(Ur.TransformComponentManager),bc=Object(Lr.inject)(Ur.HierarchyComponentManager),_c=Object(Lr.inject)(Ur.Systems),xc=Object(Lr.named)(Ur.FrameGraphSystem),wc=Object(Lr.inject)(Ur.RenderEngine),Ec=Object(Lr.inject)(Ur.ResourcePool),dc((Gc=Pc=function(){function t(){var e=this;Er()(this,t),xr()(this,"mesh",Ac,this),xr()(this,"geometry",Ic,this),xr()(this,"material",kc,this),xr()(this,"cullable",Oc,this),xr()(this,"transform",Dc,this),xr()(this,"hierarchy",Rc,this),xr()(this,"frameGraphSystem",Mc,this),xr()(this,"engine",Cc,this),xr()(this,"resourcePool",Nc,this),this.setup=function(t,e,n){var r=t.createRenderTarget(e,"color buffer",{width:1,height:1,usage:Qu.RENDER_ATTACHMENT|Qu.SAMPLED|Qu.COPY_SRC});n.data={output:e.write(t,r)}},this.execute=function(){var t=Rr()(Or.a.mark((function t(n,r,o){var i,a,u,s,c,f;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=n.getResourceNode(r.data.output),a=e.resourcePool.getOrCreateResource(i.resource),u=Lc(o),t.prev=3,u.s();case 5:if((s=u.n()).done){t.next=11;break}return c=s.value,t.next=9,e.initView(c);case 9:t.next=5;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),u.e(t.t0);case 16:return t.prev=16,u.f(),t.finish(16);case 19:f=e.engine.getCanvas(),a.resize({width:f.width,height:f.height}),e.engine.setScissor({enable:!1}),e.engine.clear({framebuffer:a,color:o[0].getClearColor(),depth:1}),e.engine.useFramebuffer(a,(function(){var t,n=Lc(o);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.renderView(r)}}catch(t){n.e(t)}finally{n.f()}}));case 24:case"end":return t.stop()}}),t,null,[[3,13,16,19]])})));return function(e,n,r){return t.apply(this,arguments)}}()}var e,n;return Tr()(t,[{key:"renderView",value:function(t){var e=t.getScene(),n=t.getCamera(),r=n.getViewTransform(),i=o.multiply(o.create(),n.getPerspective(),r);n.getFrustum().extractFromVPMatrix(i);var a=t.getViewport(),u=a.x,s=a.y,c=a.width,f=a.height;this.engine.viewport({x:u,y:s,width:c,height:f});var l,h=Lc(e.getEntities());try{for(h.s();!(l=h.n()).done;){var d=l.value;this.renderMesh(d,{camera:n,view:t,viewMatrix:r})}}catch(t){h.e(t)}finally{h.f()}}},{key:"renderMesh",value:function(t,e){var n=this,r=e.camera,i=e.view,a=e.viewMatrix,u=this.mesh.getComponentByEntity(t);if(u.visible){this.hierarchy.forEach((function(e,o){o.parentID===t&&n.renderMesh(e,{camera:r,view:i,viewMatrix:a})}));var s=u.material,c=u.geometry;if(c&&!c.dirty&&s){var f=this.transform.getComponentByEntity(t),l=o.multiply(o.create(),a,f.worldTransform),h=i.getViewport(),d=h.width,p=h.height;s.setUniform({projectionMatrix:r.getPerspective(),modelViewMatrix:l,modelMatrix:f.worldTransform,viewMatrix:a,cameraPosition:r.getPosition(),u_viewport:[d,p]}),u.model&&(u.model.draw({uniforms:s.uniforms.reduce((function(t,e){return t[e.name]=e.data,t}),{})}),s.uniforms.forEach((function(t){t.dirty=!1})),s.dirty=!1)}}}},{key:"initMesh",value:(n=Rr()(Or.a.mark((function t(e,n){var r,o,i,a,u,s,c,f=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.mesh.getComponentByEntity(e)){t.next=3;break}return t.abrupt("return");case 3:return o=r.material,i=r.geometry,t.next=7,this.hierarchy.forEachAsync(function(){var t=Rr()(Or.a.mark((function t(r,o){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.parentID!==e){t.next=4;break}return t.next=4,f.initMesh(r,n);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 7:if(i&&!i.dirty&&o){t.next=9;break}return t.abrupt("return");case 9:if(r.model){t.next=21;break}return o.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),a=this.engine,u=a.createModel,s=a.createAttribute,c={vs:o.vertexShaderGLSL,fs:o.fragmentShaderGLSL,attributes:i.attributes.reduce((function(t,e){return e.data&&e.buffer&&(t[e.name]=s({buffer:e.buffer,attributes:e.attributes,arrayStride:e.arrayStride,stepMode:e.stepMode,divisor:"vertex"===e.stepMode?0:1})),t}),{}),uniforms:o.uniforms.reduce((function(t,e){return t[e.name]=e.data,t}),{}),scissor:{enable:!0,box:function(){return n.getViewport()}}},o.cull&&(c.cull=o.cull),o.depth&&(c.depth=o.depth),o.blend&&(c.blend=o.blend),i.indicesBuffer&&(c.elements=i.indicesBuffer),i.maxInstancedCount&&(c.instances=i.maxInstancedCount,c.count=i.vertexCount||3),t.next=20,u(c);case 20:r.model=t.sent;case 21:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"initView",value:(e=Rr()(Or.a.mark((function t(e){var n,r,o,i;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getScene(),r=Lc(n.getEntities()),t.prev=2,r.s();case 4:if((o=r.n()).done){t.next=10;break}return i=o.value,t.next=8,this.initMesh(i,e);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),r.e(t.t0);case 15:return t.prev=15,r.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[2,12,15,18]])}))),function(t){return e.apply(this,arguments)})}]),t}(),Pc.IDENTIFIER="Render Pass",Tc=Gc,Ac=Ir()(Tc.prototype,"mesh",[pc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ic=Ir()(Tc.prototype,"geometry",[vc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kc=Ir()(Tc.prototype,"material",[mc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oc=Ir()(Tc.prototype,"cullable",[yc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dc=Ir()(Tc.prototype,"transform",[gc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rc=Ir()(Tc.prototype,"hierarchy",[bc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mc=Ir()(Tc.prototype,"frameGraphSystem",[_c,xc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cc=Ir()(Tc.prototype,"engine",[wc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nc=Ir()(Tc.prototype,"resourcePool",[Ec],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sc=Tc))||Sc),ff=(Bc=Object(Lr.injectable)(),Fc=Object(Lr.inject)(Ur.RenderEngine),zc=Object(Lr.inject)(Ur.ResourcePool),Bc((Yc=qc=function t(){var e=this;Er()(this,t),xr()(this,"engine",Xc,this),xr()(this,"resourcePool",Hc,this),this.model=void 0,this.setup=function(t,e,n){var r=t.getPass(cf.IDENTIFIER);if(r){var o=t.createRenderTarget(e,"render to screen",{width:1,height:1});n.data={input:e.read(r.data.output),output:e.write(t,o)}}},this.execute=function(){var t=Rr()(Or.a.mark((function t(n,r){var o,i,a,u,s,c,f;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.engine,i=o.createModel,a=o.createAttribute,u=o.createBuffer,e.model){t.next=6;break}return t.next=4,i({vs:e.engine.supportWebGPU?"layout(location = 0) in vec2 a_Position;\\nlayout(location = 0) out vec2 v_UV;\\n\\nvoid main() {\\n  v_UV = 0.5 * (a_Position + 1.0);\\n  gl_Position = vec4(a_Position, 0., 1.);\\n}":"attribute vec2 a_Position;\\n\\nvarying vec2 v_UV;\\n\\nvoid main() {\\n  v_UV = 0.5 * (a_Position + 1.0);\\n  gl_Position = vec4(a_Position, 0., 1.);\\n}",fs:e.engine.supportWebGPU?"layout(set = 0, binding = 0) uniform sampler u_TextureSampler;\\nlayout(set = 0, binding = 1) uniform texture2D u_Texture;\\n\\nlayout(location = 0) in vec2 v_UV;\\nlayout(location = 0) out vec4 outColor;\\n\\nvoid main() {\\n  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);\\n}":"varying vec2 v_UV;\\n\\nuniform sampler2D u_Texture;\\n\\nvoid main() {\\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\\n}",attributes:{a_Position:a({buffer:u({data:[-4,-4,4,-4,0,4],type:Qu.FLOAT}),size:2,arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:s=t.sent,e.model=s;case 6:c=n.getResourceNode(r.data.input),f=e.resourcePool.getOrCreateResource(c.resource),e.engine.useFramebuffer(null,(function(){e.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),e.model.draw({uniforms:{u_Texture:f}})}));case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),this.tearDown=function(){e.model=void 0}},qc.IDENTIFIER="Copy Pass",Wc=Yc,Xc=Ir()(Wc.prototype,"engine",[Fc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hc=Ir()(Wc.prototype,"resourcePool",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vc=Wc))||Vc);function lf(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return hf(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hf(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function hf(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var df,pf,vf,mf,yf,gf,bf,_f,xf,wf,Ef,Sf,Tf=1,Af=2,If=(Kc=Object(Lr.injectable)(),Zc=Object(Lr.inject)(Ur.RenderEngine),Qc=Object(Lr.inject)(Ur.ResourcePool),Jc=Object(Lr.inject)(Ur.RenderPassFactory),$c=Object(Lr.inject)(Ur.MeshComponentManager),Kc((sf=uf=function(){function t(){var e=this;Er()(this,t),xr()(this,"engine",nf,this),xr()(this,"resourcePool",rf,this),xr()(this,"renderPassFactory",of,this),xr()(this,"mesh",af,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(t,e,n){var r=t.createRenderTarget(e,"picking fbo",{width:1,height:1});n.data={output:e.write(t,r)},e.hasSideEffect=!0},this.execute=function(){var t=Rr()(Or.a.mark((function t(n,r,o){var i,a,u;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.views=o,!e.alreadyInRendering){t.next=3;break}return t.abrupt("return");case 3:i=lf(o);try{for(u=function(){var t=a.value,o=t.getViewport(),i=o.width,u=o.height;e.alreadyInRendering=!0;var s=n.getResourceNode(r.data.output);e.pickingFBO=e.resourcePool.getOrCreateResource(s.resource),e.pickingFBO.resize({width:i,height:u}),e.engine.useFramebuffer(e.pickingFBO,(function(){e.engine.clear({framebuffer:e.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var n,r=e.renderPassFactory(cf.IDENTIFIER),o=[],i=lf(t.getScene().getEntities());try{for(i.s();!(n=i.n()).done;){var a=n.value,u=e.mesh.getComponentByEntity(a);u.material.setUniform("u_PickingStage",Tf),o.push(u)}}catch(t){i.e(t)}finally{i.f()}r.renderView(t),o.forEach((function(t){t.material.setUniform("u_PickingStage",Af)})),e.alreadyInRendering=!1}))},i.s();!(a=i.n()).done;)u()}catch(t){i.e(t)}finally{i.f()}case 5:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),this.pick=function(t,n){var r,o,i=t.x,a=t.y,u=e.engine,s=u.readPixels,c=u.useFramebuffer,f=n.getViewport(),l=f.width,h=f.height,d=i*window.devicePixelRatio,p=a*window.devicePixelRatio;if(!(d>l||d<0||p>h||p<0))return c(e.pickingFBO,(function(){var t,i;0===(r=s({x:Math.round(d),y:Math.round(h-(a+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(4),framebuffer:e.pickingFBO}))[0]&&0===r[1]&&0===r[2]||(t=r,i=jr()(t,3),o=i[0]+256*i[1]+65536*i[2]-1,e.highlightEnabled&&e.highlightPickedFeature(r,n))})),o}}return Tr()(t,[{key:"enableHighlight",value:function(t){this.highlightEnabled=t}},{key:"setHighlightColor",value:function(t){this.highlightColor=t}},{key:"highlightPickedFeature",value:function(t,e){if(t){var n,r=lf(e.getScene().getEntities());try{for(r.s();!(n=r.n()).done;){var o=n.value,i=this.mesh.getComponentByEntity(o).material;i.setUniform("u_PickingStage",Af),i.setUniform("u_PickingColor",[t[0],t[1],t[2]]),i.setUniform("u_HighlightColor",this.highlightColor)}}catch(t){r.e(t)}finally{r.f()}}}}]),t}(),uf.IDENTIFIER="PixelPicking Pass",ef=sf,nf=Ir()(ef.prototype,"engine",[Zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rf=Ir()(ef.prototype,"resourcePool",[Qc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),of=Ir()(ef.prototype,"renderPassFactory",[Jc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),af=Ir()(ef.prototype,"mesh",[$c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tf=ef))||tf),kf=(df=Object(Lr.injectable)(),pf=Object(Lr.inject)(Ur.Systems),vf=Object(Lr.named)(Ur.FrameGraphSystem),mf=Object(Lr.inject)(Ur.RenderPassFactory),yf=Object(Lr.inject)(Ur.ConfigService),gf=Object(Lr.inject)(Ur.ResourcePool),df((_f=function(){function t(){Er()(this,t),xr()(this,"frameGraphSystem",xf,this),xr()(this,"renderPassFactory",wf,this),xr()(this,"configService",Ef,this),xr()(this,"resourcePool",Sf,this)}var e;return Tr()(t,[{key:"execute",value:(e=Rr()(Or.a.mark((function t(e){var n,r,o,i,a,u,s,c;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this.renderPassFactory(cf.IDENTIFIER),r=n.setup,o=n.execute,this.frameGraphSystem.addPass(cf.IDENTIFIER,r,o),i=this.renderPassFactory(ff.IDENTIFIER),a=i.setup,u=i.execute,s=i.tearDown,c=this.frameGraphSystem.addPass(ff.IDENTIFIER,a,u,s),this.frameGraphSystem.present(c.data.output);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(t,e){return this.renderPassFactory(If.IDENTIFIER).pick(t,e)}}]),t}(),xf=Ir()(_f.prototype,"frameGraphSystem",[pf,vf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wf=Ir()(_f.prototype,"renderPassFactory",[mf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ef=Ir()(_f.prototype,"configService",[yf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sf=Ir()(_f.prototype,"resourcePool",[gf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bf=_f))||bf);function Of(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Df,Rf,Mf,Cf,Nf,Pf,Gf,jf,Lf,Uf=function(t){Wr()(n,t);var e=Of(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).parentID=void 0,Object.assign(co()(r),t),r}return n}(Nr),Bf=(Df=Object(Lr.injectable)(),Rf=Object(Lr.inject)(Ur.HierarchyComponentManager),Mf=Object(Lr.inject)(Ur.TransformComponentManager),Cf=Object(Lr.inject)(Ur.MeshComponentManager),Df((Pf=function(){function t(){Er()(this,t),xr()(this,"hierarchy",Gf,this),xr()(this,"transform",jf,this),xr()(this,"mesh",Lf,this)}var e;return Tr()(t,[{key:"execute",value:(e=Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var t=this;this.transform.forEach((function(e,n){n.isDirty()&&(t.setMeshAABBDirty(e),n.updateTransform())}))}},{key:"runHierarchyUpdateSystem",value:function(){var t=this;this.hierarchy.forEach((function(e,n){var r=t.transform.getComponentByEntity(e),o=t.transform.getComponentByEntity(n.parentID);null!==r&&null!==o&&r.updateTransformWithParent(o)}))}},{key:"attach",value:function(t,e,n){if(this.hierarchy.contains(t)&&this.detach(t),this.hierarchy.create(t,{parentID:e}),this.setMeshAABBDirty(e),this.hierarchy.getCount()>1)for(var r=this.hierarchy.getCount()-1;r>0;--r)for(var i=this.hierarchy.getEntity(r),a=0;a<r;++a){if(this.hierarchy.getComponent(a).parentID===i){this.hierarchy.moveItem(r,a),++r;break}}this.hierarchy.getComponentByEntity(t);var u=this.transform.getComponentByEntity(e);null===u&&(u=this.transform.create(e));var s=this.transform.getComponentByEntity(t);null===s&&(s=this.transform.create(t),u=this.transform.getComponentByEntity(e)),!n&&u&&(s.matrixTransform(o.invert(o.create(),u.worldTransform)),s.updateTransform()),u&&s.updateTransformWithParent(u)}},{key:"detach",value:function(t){if(null!==this.hierarchy.getComponentByEntity(t)){var e=this.transform.getComponentByEntity(t);null!==e&&e.applyTransform(),this.hierarchy.removeKeepSorted(t),this.setMeshAABBDirty(t)}}},{key:"detachChildren",value:function(t){for(var e=0;e<this.hierarchy.getCount();){var n;if((null===(n=this.hierarchy.getComponent(e))||void 0===n?void 0:n.parentID)===t){var r=this.hierarchy.getEntity(e);this.detach(r)}else++e}}},{key:"setMeshAABBDirty",value:function(t){var e=this.mesh.getComponentByEntity(t);e&&(e.aabbDirty=!0)}}]),t}(),Gf=Ir()(Pf.prototype,"hierarchy",[Rf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jf=Ir()(Pf.prototype,"transform",[Mf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lf=Ir()(Pf.prototype,"mesh",[Cf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nf=Pf))||Nf);function Ff(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var zf=function(t){Wr()(n,t);var e=Ff(n);function n(t){var r,a,s,c,f,l,h,d,p,v,m,y,g,b,_;return Er()(this,n),(r=e.call(this,t)).dirtyFlag=void 0,r.localTranslation=i.fromValues(0,0,0),r.localRotation=u.fromValues(0,0,0,1),r.localScale=i.fromValues(1,1,1),r.localTransform=o.create(),r.worldTransform=o.create(),r.getRotation=(a=u.create(),function(){return o.getRotation(a,r.worldTransform),a}),r.getScale=(s=i.create(),function(){return o.getScaling(s,r.worldTransform),s}),r.getPosition=(c=i.create(),function(){return o.getTranslation(c,r.worldTransform),c}),r.getLocalMatrix=(f=o.create(),function(){return o.fromRotationTranslationScale(f,r.localRotation,r.localTranslation,r.localScale),f}),r.matrixTransform=(l=o.create(),function(t){o.multiply(l,r.getLocalMatrix(),t),o.getScaling(r.localScale,l),o.getTranslation(r.localTranslation,l),o.getRotation(r.localRotation,l)}),r.rotateRollPitchYaw=(h=u.create(),d=u.create(),p=u.create(),function(t,e,n){r.setDirty(),u.fromEuler(h,t,0,0),u.fromEuler(d,0,e,0),u.fromEuler(p,0,0,n),u.multiply(r.localRotation,h,r.localRotation),u.multiply(r.localRotation,r.localRotation,d),u.multiply(r.localRotation,p,r.localRotation),u.normalize(r.localRotation,r.localRotation)}),r.lerp=(v=i.create(),m=u.create(),y=i.create(),g=i.create(),b=u.create(),_=i.create(),function(t,e,n){r.setDirty(),o.getScaling(v,t.worldTransform),o.getTranslation(y,t.worldTransform),o.getRotation(m,t.worldTransform),o.getScaling(g,e.worldTransform),o.getTranslation(_,e.worldTransform),o.getRotation(b,e.worldTransform),i.lerp(r.localScale,v,g,n),u.slerp(r.localRotation,m,b,n),i.lerp(r.localTranslation,y,_,n)}),r}return Tr()(n,[{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?this.dirtyFlag|=n.DIRTY:this.dirtyFlag&=~n.DIRTY}},{key:"updateTransform",value:function(){this.isDirty()&&(this.setDirty(!1),o.copy(this.worldTransform,this.getLocalMatrix()))}},{key:"updateTransformWithParent",value:function(t){o.multiply(this.worldTransform,this.getLocalMatrix(),t.worldTransform)}},{key:"applyTransform",value:function(){this.setDirty(),o.getScaling(this.localScale,this.worldTransform),o.getTranslation(this.localTranslation,this.worldTransform),o.getRotation(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localTranslation=i.fromValues(0,0,0),this.localRotation=u.fromValues(0,0,0,1),this.localScale=i.fromValues(1,1,1)}},{key:"translate",value:function(t){return this.setDirty(),i.add(this.localTranslation,this.localTranslation,t),this}},{key:"scale",value:function(t){return this.setDirty(),i.multiply(this.localScale,this.localScale,t),this}},{key:"rotate",value:function(t){return this.setDirty(),u.multiply(this.localRotation,this.localRotation,t),u.normalize(this.localRotation,this.localRotation),this}}]),n}(Nr);zf.DIRTY=1;n(93),n(94),n(171),n(95),n(96),n(73),n(97),n(27),n(98),n(172);var Vf,Wf,Xf,Hf,qf,Yf=n(103),Kf=n(187),Zf=n.n(Kf),Qf=(Vf=Object(Lr.injectable)(),Wf=Object(Lr.inject)(Ur.RenderEngine),Vf((Hf=function(){function t(){Er()(this,t),xr()(this,"engine",qf,this),this.resourcePool={}}return Tr()(t,[{key:"getOrCreateResource",value:function(t){if(!this.resourcePool[t.name]){var e=t.descriptor,n=e.width,r=e.height,o=e.usage;this.resourcePool[t.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:n,height:r,wrapS:Qu.CLAMP_TO_EDGE,wrapT:Qu.CLAMP_TO_EDGE,usage:o})})}return this.resourcePool[t.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),t}(),qf=Ir()(Hf.prototype,"engine",[Wf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xf=Hf))||Xf);function Jf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var $f,tl,el=function(t){Wr()(n,t);var e=Jf(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).name=void 0,r.name=t.name||"",r}return n}(Nr),nl=Object(Lr.injectable)()($f=function(){function t(){Er()(this,t),this.config=void 0}return Tr()(t,[{key:"get",value:function(){return this.config}},{key:"set",value:function(t){this.config=t}}]),t}())||$f,rl=Object(Lr.injectable)()(tl=function(){function t(){Er()(this,t)}return Tr()(t,[{key:"listen",value:function(t){}},{key:"on",value:function(t,e){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),t}())||tl,ol=n(188),il=n.n(ol);var al,ul=/uniform\\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\\s+([\\s\\S]*?);/g;function sl(t){var e={};return{content:t=t.replace(ul,(function(t,n,r){var o=r.split(":"),i=o[0].trim(),a="";switch(o.length>1&&(a=o[1].trim()),n){case"bool":a="true"===a;break;case"float":case"int":a=Number(a);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":a=a?a.replace("[","").replace("]","").split(",").reduce((function(t,e){return t.push(Number(e.trim())),t}),[]):new Array(function(t){var e=0;switch(t){case"vec2":case"ivec2":e=2;break;case"vec3":case"ivec3":e=3;break;case"vec4":case"ivec4":case"mat2":e=4;break;case"mat3":e=9;break;case"mat4":e=16}return e}(n)).fill(0)}return e[i]=a,"uniform ".concat(n," ").concat(i,";\\n")})),uniforms:e}}function cl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cl(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ll=/precision\\s+(high|low|medium)p\\s+float/,hl=/#pragma include (["^+"]?["\\ "[a-zA-Z_0-9](.*)"]*?)/g,dl=Object(Lr.injectable)()(al=function(){function t(){Er()(this,t),this.moduleCache={},this.rawContentCache={}}return Tr()(t,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:"attribute vec3 a_PickingColor;\\nvarying vec4 v_PickingResult;\\n\\nuniform vec3 u_PickingColor : [0, 0, 0];\\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\\nuniform float u_PickingStage : 0.0;\\nuniform float u_PickingThreshold : 1.0;\\nuniform float u_PickingBuffer: 0.0;\\n\\n#define PICKING_ENCODE 1.0\\n#define PICKING_HIGHLIGHT 2.0\\n#define COLOR_SCALE 1. / 255.\\n\\nbool isVertexPicked(vec3 vertexColor) {\\n  return\\n    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&\\n    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&\\n    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;\\n}\\n\\nvoid setPickingColor(vec3 pickingColor) {\\n  // compares only in highlight stage\\n  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));\\n\\n  // Stores the picking color so that the fragment shader can render it during picking\\n  v_PickingResult.rgb = pickingColor * COLOR_SCALE;\\n}\\n\\nfloat setPickingSize(float x) {\\n   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;\\n}",fs:"varying vec4 v_PickingResult;\\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\\nuniform float u_PickingStage : 0.0;\\n\\n#define PICKING_ENCODE 1.0\\n#define PICKING_HIGHLIGHT 2.0\\n#define COLOR_SCALE 1. / 255.\\n\\n/*\\n * Returns highlight color if this item is selected.\\n */\\nvec4 filterHighlightColor(vec4 color) {\\n  bool selected = bool(v_PickingResult.a);\\n\\n  if (selected) {\\n    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;\\n\\n    float highLightAlpha = highLightColor.a;\\n    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));\\n\\n    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\\n    return vec4(resultRGB, color.a);\\n  } else {\\n    return color;\\n  }\\n}\\n\\n/*\\n * Returns picking color if picking enabled else unmodified argument.\\n */\\nvec4 filterPickingColor(vec4 color) {\\n  vec3 pickingColor = v_PickingResult.rgb;\\n  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {\\n    discard;\\n  }\\n  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;\\n}\\n\\n/*\\n * Returns picking color if picking is enabled if not\\n * highlight color if this item is selected, otherwise unmodified argument.\\n */\\nvec4 filterColor(vec4 color) {\\n  return filterPickingColor(filterHighlightColor(color));\\n}\\n"}),this.registerModule("sdf2d",{vs:"",fs:"/**\\n * 2D signed distance field functions\\n * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\\n */\\n\\nfloat ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }\\n\\nfloat sdCircle(vec2 p, float r) {\\n  return length(p) - r;\\n}\\n\\nfloat sdEquilateralTriangle(vec2 p) {\\n  float k = sqrt(3.0);\\n  p.x = abs(p.x) - 1.0;\\n  p.y = p.y + 1.0/k;\\n  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;\\n  p.x -= clamp( p.x, -2.0, 0.0 );\\n  return -length(p)*sign(p.y);\\n}\\n\\nfloat sdBox(vec2 p, vec2 b) {\\n  vec2 d = abs(p)-b;\\n  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);\\n}\\n\\nfloat sdPentagon(vec2 p, float r) {\\n  vec3 k = vec3(0.809016994,0.587785252,0.726542528);\\n  p.x = abs(p.x);\\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\\n  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);\\n  return length(p)*sign(p.y);\\n}\\n\\nfloat sdHexagon(vec2 p, float r) {\\n  vec3 k = vec3(-0.866025404,0.5,0.577350269);\\n  p = abs(p);\\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\\n  return length(p)*sign(p.y);\\n}\\n\\nfloat sdOctogon(vec2 p, float r) {\\n  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );\\n  p = abs(p);\\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\\n  return length(p)*sign(p.y);\\n}\\n\\nfloat sdHexagram(vec2 p, float r) {\\n  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);\\n  p = abs(p);\\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\\n  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;\\n  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);\\n  return length(p)*sign(p.y);\\n}\\n\\nfloat sdRhombus(vec2 p, vec2 b) {\\n  vec2 q = abs(p);\\n  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);\\n  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );\\n  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );\\n}\\n\\nfloat sdVesica(vec2 p, float r, float d) {\\n  p = abs(p);\\n  float b = sqrt(r*r-d*d); // can delay this sqrt\\n  return ((p.y-b)*d>p.x*b)\\n          ? length(p-vec2(0.0,b))\\n          : length(p-vec2(-d,0.0))-r;\\n}"})}},{key:"registerModule",value:function(t,e){if(!this.rawContentCache[t]){var n=e.vs,r=e.fs,o=e.uniforms,i=sl(n),a=i.content,u=i.uniforms,s=sl(r),c=s.content,f=s.uniforms;this.rawContentCache[t]={fs:c,uniforms:fl(fl(fl({},u),f),o),vs:a}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(t){var e=this;if(this.moduleCache[t])return this.moduleCache[t];var n=this.rawContentCache[t].vs,r=this.rawContentCache[t].fs,o=this.processModule(n,[],"vs"),i=o.content,a=o.includeList,u=this.processModule(r,[],"fs"),s=u.content,c=u.includeList,f=s,l=il()(a.concat(c).concat(t)).reduce((function(t,n){return fl(fl({},t),e.rawContentCache[n].uniforms)}),{});return ll.test(s)||(f="#ifdef GL_FRAGMENT_PRECISION_HIGH\\n precision highp float;\\n #else\\n precision mediump float;\\n#endif\\n"+s),this.moduleCache[t]={fs:f.trim(),uniforms:l,vs:i.trim()},this.moduleCache[t]}},{key:"processModule",value:function(t,e,n){var r=this;return{content:t.replace(hl,(function(t,o){var i=o.split(" ")[0].replace(/"/g,"");if(e.indexOf(i)>-1)return"";var a=r.rawContentCache[i][n];return e.push(i),r.processModule(a,e,n).content})),includeList:e}}}]),t}())||al,pl=new Lr.Container;Object(Lr.decorate)(Object(Lr.injectable)(),Yf.EventEmitter),pl.bind(Ur.IEventEmitter).to(Yf.EventEmitter);Zf()(pl,!1);function vl(){var t=new Lr.Container;return t.parent=pl,t.bind(Ur.Systems).to(Bf).inSingletonScope().whenTargetNamed(Ur.SceneGraphSystem),t.bind(Ur.Systems).to(io).inSingletonScope().whenTargetNamed(Ur.FrameGraphSystem),t.bind(Ur.Systems).to(jc).inSingletonScope().whenTargetNamed(Ur.MeshSystem),t.bind(Ur.Systems).to(Is).inSingletonScope().whenTargetNamed(Ur.GeometrySystem),t.bind(Ur.Systems).to(zs).inSingletonScope().whenTargetNamed(Ur.MaterialSystem),t.bind(Ur.Systems).to(kf).inSingletonScope().whenTargetNamed(Ur.RendererSystem),t.bind(Ur.ResourcePool).to(Qf).inSingletonScope(),t.bind(Ur.ConfigService).to(nl).inSingletonScope(),t.bind(Ur.InteractorService).to(rl).inSingletonScope(),t.bind(Ur.RenderPass).to(cf).inSingletonScope().whenTargetNamed(cf.IDENTIFIER),t.bind(Ur.RenderPass).to(ff).inSingletonScope().whenTargetNamed(ff.IDENTIFIER),t.bind(Ur.RenderPass).to(If).inSingletonScope().whenTargetNamed(If.IDENTIFIER),t.bind(Ur.RenderPassFactory).toFactory((function(t){return function(e){return t.container.getNamed(Ur.RenderPass,e)}})),t}pl.bind(Ur.ShaderModuleService).to(dl).inSingletonScope(),pl.bind(Ur.NameComponentManager).toConstantValue(new Pr(el)),pl.bind(Ur.HierarchyComponentManager).toConstantValue(new Pr(Uf)),pl.bind(Ur.TransformComponentManager).toConstantValue(new Pr(zf)),pl.bind(Ur.MeshComponentManager).toConstantValue(new Pr(qs)),pl.bind(Ur.CullableComponentManager).toConstantValue(new Pr(Ws)),pl.bind(Ur.GeometryComponentManager).toConstantValue(new Pr(po)),pl.bind(Ur.MaterialComponentManager).toConstantValue(new Pr(Ls));var ml;n(173),n(99);!function(t){t.PANSTART="PANSTART",t.PANEND="PANEND",t.PANMOVE="PANMOVE",t.PINCH="PINCH",t.KEYDOWN="KEYDOWN",t.KEYUP="KEYUP",t.HOVER="HOVER"}(ml||(ml={}));n(174);var yl,gl,bl,_l,xl="undefined"!=typeof navigator&&/Version\\/[\\d\\.]+.*Safari/.test(navigator.userAgent);!function(t){t.Void="Void",t.Boolean="Boolean",t.Float="Float",t.Uint32="Uint32",t.Int32="Int32",t.Vector="Vector",t.Vector2Float="vec2<f32>",t.Vector3Float="vec3<f32>",t.Vector4Float="vec4<f32>",t.Vector2Boolean="vec2<bool>",t.Vector3Boolean="vec3<bool>",t.Vector4Boolean="vec4<bool>",t.Vector2Uint="vec2<u32>",t.Vector3Uint="vec3<u32>",t.Vector4Uint="vec4<u32>",t.Vector2Int="vec2<i32>",t.Vector3Int="vec3<i32>",t.Vector4Int="vec4<i32>",t.Matrix="Matrix",t.Matrix3x3Float="mat3x3<f32>",t.Matrix4x4Float="mat4x4<i32>",t.Struct="Struct",t.FloatArray="Float[]",t.Vector4FloatArray="vec4<f32>[]"}(yl||(yl={})),function(t){t.Program="Program",t.Identifier="Identifier",t.VariableDeclaration="VariableDeclaration",t.BlockStatement="BlockStatement",t.ReturnStatement="ReturnStatement",t.FunctionDeclaration="FunctionDeclaration",t.VariableDeclarator="VariableDeclarator",t.AssignmentExpression="AssignmentExpression",t.LogicalExpression="LogicalExpression",t.BinaryExpression="BinaryExpression",t.ArrayExpression="ArrayExpression",t.UnaryExpression="UnaryExpression",t.UpdateExpression="UpdateExpression",t.FunctionExpression="FunctionExpression",t.MemberExpression="MemberExpression",t.ConditionalExpression="ConditionalExpression",t.ExpressionStatement="ExpressionStatement",t.CallExpression="CallExpression",t.NumThreadStatement="NumThreadStatement",t.StorageStatement="StorageStatement",t.DoWhileStatement="DoWhileStatement",t.WhileStatement="WhileStatement",t.ForStatement="ForStatement",t.BreakStatement="BreakStatement",t.ContinueStatement="ContinueStatement",t.IfStatement="IfStatement",t.ImportedFunctionStatement="ImportedFunctionStatement"}(gl||(gl={})),function(t){t.Input="Input",t.Output="Output",t.Uniform="Uniform",t.Workgroup="Workgroup",t.UniformConstant="UniformConstant",t.Image="Image",t.StorageBuffer="StorageBuffer",t.Private="Private",t.Function="Function"}(bl||(bl={})),function(t){t.GLSL100="GLSL100",t.GLSL450="GLSL450",t.WGSL="WGSL"}(_l||(_l={}));function wl(t){return void 0===t?0:t>360||t<-360?t%360:t}function El(t,e,n){return fc()(t)?i.fromValues(t,e,n):3===t.length?i.clone(t):i.fromValues(t[0],t[1],t[2])}var Sl,Tl,Al,Il,kl,Ol,Dl,Rl,Ml=function(){function t(e,n){Er()(this,t),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=e,this.matrix=o.clone(n.matrix),this.right=i.clone(n.right),this.up=i.clone(n.up),this.forward=i.clone(n.forward),this.position=i.clone(n.position),this.focalPoint=i.clone(n.focalPoint),this.distanceVector=i.clone(n.distanceVector),this.azimuth=n.azimuth,this.elevation=n.elevation,this.roll=n.roll,this.relAzimuth=n.relAzimuth,this.relElevation=n.relElevation,this.relRoll=n.relRoll,this.dollyingStep=n.dollyingStep,this.distance=n.distance}return Tr()(t,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(t){t.matrix=o.copy(t.matrix,this.matrix),t.right=i.copy(t.right,this.right),t.up=i.copy(t.up,this.up),t.forward=i.copy(t.forward,this.forward),t.position=i.copy(t.position,this.position),t.focalPoint=i.copy(t.focalPoint,this.focalPoint),t.distanceVector=i.copy(t.distanceVector,this.distanceVector),t.azimuth=this.azimuth,t.elevation=this.elevation,t.roll=this.roll,t.relAzimuth=this.relAzimuth,t.relElevation=this.relElevation,t.relRoll=this.relRoll,t.dollyingStep=this.dollyingStep,t.distance=this.distance}}]),t}();!function(t){t.ORBITING="ORBITING",t.EXPLORING="EXPLORING",t.TRACKING="TRACKING"}(Ol||(Ol={})),function(t){t.DEFAULT="DEFAULT",t.ROTATIONAL="ROTATIONAL",t.TRANSLATIONAL="TRANSLATIONAL",t.CINEMATIC="CINEMATIC"}(Dl||(Dl={})),function(t){t.ORTHOGRAPHIC="ORTHOGRAPHIC",t.PERSPECTIVE="PERSPECTIVE"}(Rl||(Rl={}));var Cl,Nl,Pl,Gl,jl,Ll,Ul,Bl=Math.PI/180,Fl=180/Math.PI,zl=(Sl=Object(Lr.injectable)(),Tl=Object(Lr.inject)(Ur.InteractorService),Sl((Il=function(){function t(){Er()(this,t),this.matrix=o.create(),this.right=i.fromValues(1,0,0),this.up=i.fromValues(0,1,0),this.forward=i.fromValues(0,0,1),this.position=i.fromValues(0,0,1),this.focalPoint=i.fromValues(0,0,0),this.distanceVector=i.fromValues(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.rotateWorld=!1,xr()(this,"interactor",kl,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=o.create(),this.view=void 0,this.following=void 0,this.type=Ol.EXPLORING,this.trackingMode=Dl.DEFAULT,this.projectionMode=Rl.PERSPECTIVE,this.frustum=new sc,this.landmarks=[],this.landmarkAnimationID=void 0}return Tr()(t,[{key:"clone",value:function(){var e=new t;return e.setType(this.type,void 0),e.interactor=this.interactor,e}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(t,e){return this.type=t,this.type===Ol.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Ol.TRACKING&&void 0!==e&&this.setTrackingMode(e),this}},{key:"setProjectionMode",value:function(t){return this.projectionMode=t,this}},{key:"setTrackingMode",value:function(t){if(this.type!==Ol.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this}},{key:"setWorldRotation",value:function(t){this.rotateWorld=t,this._getAngles()}},{key:"getViewTransform",value:function(){return o.invert(o.create(),this.matrix)}},{key:"setMatrix",value:function(t){return this.matrix=t,this._update(),this}},{key:"setAspect",value:function(t){return this.setPerspective(this.near,this.far,this.fov,t),this}},{key:"setViewOffset",value:function(t,e,n,r,o,i){return this.aspect=t/e,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=i,this.projectionMode===Rl.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===Rl.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(t,e,n,r){return this.projectionMode=Rl.PERSPECTIVE,this.fov=n,this.near=t,this.far=e,this.aspect=r,o.perspective(this.perspective,this.fov*Bl,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(t,e,n,r,i,a){this.projectionMode=Rl.ORTHOGRAPHIC,this.rright=e,this.left=t,this.top=n,this.bottom=r,this.near=i,this.far=a;var u=(this.rright-this.left)/(2*this.zoom),s=(this.top-this.bottom)/(2*this.zoom),c=(this.rright+this.left)/2,f=(this.top+this.bottom)/2,l=c-u,h=c+u,d=f+s,p=f-s;if(void 0!==this.view&&this.view.enabled){var v=(this.rright-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;h=(l+=v*this.view.offsetX)+v*this.view.width,p=(d-=m*this.view.offsetY)-m*this.view.height}return o.ortho(this.perspective,l,h,d,p,i,a),this}},{key:"setPosition",value:function(t,e,n){return this._setPosition(t,e,n),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(t,e,n){var r=i.fromValues(0,1,0);if(this.focalPoint=El(t,e,n),this.trackingMode===Dl.CINEMATIC){var a=i.subtract(i.create(),this.focalPoint,this.position);t=a[0],e=a[1],n=a[2];var u=i.length(a),s=Math.asin(e/u)*Fl,c=90+Math.atan2(n,t)*Fl,f=o.create();o.rotateY(f,f,c*Bl),o.rotateX(f,f,s*Bl),r=i.transformMat4(i.create(),[0,1,0],f)}return o.invert(this.matrix,o.lookAt(o.create(),this.position,this.focalPoint,r)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(t){if(!(this.distance===t||t<0)){this.distance=t,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var e=i.create();t=this.distance;var n=this.forward,r=this.focalPoint;return e[0]=t*n[0]+r[0],e[1]=t*n[1]+r[1],e[2]=t*n[2]+r[2],this._setPosition(e),this}}},{key:"changeAzimuth",value:function(t){return this.setAzimuth(this.azimuth+t),this}},{key:"changeElevation",value:function(t){return this.setElevation(this.elevation+t),this}},{key:"changeRoll",value:function(t){return this.setRoll(this.roll+t),this}},{key:"setAzimuth",value:function(t){return this.azimuth=wl(t),this.computeMatrix(),this._getAxes(),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getPosition():this.type===Ol.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(t){return this.elevation=wl(t),this.computeMatrix(),this._getAxes(),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getPosition():this.type===Ol.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(t){return this.roll=wl(t),this.computeMatrix(),this._getAxes(),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getPosition():this.type===Ol.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(t,e,n){if(this.type===Ol.EXPLORING){t=wl(t),e=wl(e),n=wl(n);var r=u.setAxisAngle(u.create(),[1,0,0],(this.rotateWorld?1:-1)*e*Bl),i=u.setAxisAngle(u.create(),[0,1,0],(this.rotateWorld?1:-1)*t*Bl),a=u.setAxisAngle(u.create(),[0,0,1],n*Bl),s=u.multiply(u.create(),i,r);s=u.multiply(u.create(),s,a);var c=o.fromQuat(o.create(),s);o.translate(this.matrix,this.matrix,[0,0,-this.distance]),o.multiply(this.matrix,this.matrix,c),o.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+e)>90)return;this.relElevation=wl(e),this.relAzimuth=wl(t),this.relRoll=wl(n),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getPosition():this.type===Ol.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(t,e){var n=El(t,e,0),r=i.clone(this.position);return i.add(r,r,i.scale(i.create(),this.right,n[0])),i.add(r,r,i.scale(i.create(),this.up,n[1])),this._setPosition(r),this}},{key:"dolly",value:function(t){var e=this.forward,n=i.clone(this.position),r=t*this.dollyingStep;return n[0]+=r*e[0],n[1]+=r*e[1],n[2]+=r*e[2],this._setPosition(n),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getDistance():this.type===Ol.TRACKING&&i.add(this.focalPoint,n,this.distanceVector),this}},{key:"createLandmark",value:function(t,e){var n=this.clone();n.setPosition(e.position),n.setFocalPoint(e.focalPoint),void 0!==e.roll&&n.setRoll(e.roll);var r=new Ml(t,n);return this.landmarks.push(r),r}},{key:"setLandmark",value:function(t){var e=new Ml(t,this);return this.landmarks.push(e),this}},{key:"gotoLandmark",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=this.landmarks.find((function(e){return e.name===t}));if(r){if(0===n)return void r.retrieve(this);void 0!==this.landmarkAnimationID&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var o,a=r.getPosition(),u=r.getFocalPoint(),s=r.getRoll(),c=function t(r){void 0===o&&(o=r);var c,f=r-o,l=(1-Math.cos(f/n*Math.PI))/2,h=i.create(),d=i.create();if(i.lerp(h,e.focalPoint,u,l),i.lerp(d,e.position,a,l),c=e.roll*(1-l)+s*l,e.setFocalPoint(h),e.setPosition(d),e.setRoll(c),e.computeMatrix(),!(i.dist(h,u)+i.dist(d,a)>.01))return e.setFocalPoint(h),e.setPosition(d),e.setRoll(c),e.computeMatrix(),void e.interactor.connect();f<n&&(e.landmarkAnimationID=window.requestAnimationFrame(t))};window.requestAnimationFrame(c)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var t,e,n=u.setAxisAngle(u.create(),[0,0,1],this.roll*Bl);o.identity(this.matrix),t=u.setAxisAngle(u.create(),[1,0,0],(this.rotateWorld&&this.type!==Ol.TRACKING||this.type===Ol.TRACKING?1:-1)*this.elevation*Bl),e=u.setAxisAngle(u.create(),[0,1,0],(this.rotateWorld&&this.type!==Ol.TRACKING||this.type===Ol.TRACKING?1:-1)*this.azimuth*Bl);var r=u.multiply(u.create(),e,t);r=u.multiply(u.create(),r,n);var i=o.fromQuat(o.create(),r);this.type===Ol.ORBITING||this.type===Ol.EXPLORING?(o.translate(this.matrix,this.matrix,this.focalPoint),o.multiply(this.matrix,this.matrix,i),o.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===Ol.TRACKING&&(o.translate(this.matrix,this.matrix,this.position),o.multiply(this.matrix,this.matrix,i))}},{key:"_setPosition",value:function(t,e,n){this.position=El(t,e,n);var r=this.matrix;r[12]=this.position[0],r[13]=this.position[1],r[14]=this.position[2],r[15]=1}},{key:"_getAxes",value:function(){i.copy(this.right,El(a.transformMat4(a.create(),[1,0,0,0],this.matrix))),i.copy(this.up,El(a.transformMat4(a.create(),[0,1,0,0],this.matrix))),i.copy(this.forward,El(a.transformMat4(a.create(),[0,0,1,0],this.matrix))),i.normalize(this.right,this.right),i.normalize(this.up,this.up),i.normalize(this.forward,this.forward)}},{key:"_getAngles",value:function(){var t=this.distanceVector[0],e=this.distanceVector[1],n=this.distanceVector[2],r=i.length(this.distanceVector);if(0===r)return this.elevation=0,void(this.azimuth=0);this.type===Ol.TRACKING||this.rotateWorld?(this.elevation=Math.asin(e/r)*Fl,this.azimuth=Math.atan2(-t,-n)*Fl):(this.elevation=-Math.asin(e/r)*Fl,this.azimuth=-Math.atan2(-t,-n)*Fl)}},{key:"_getPosition",value:function(){i.copy(this.position,El(a.transformMat4(a.create(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){i.transformMat3(this.distanceVector,[0,0,-this.distance],r.fromMat4(r.create(),this.matrix)),i.add(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=i.subtract(i.create(),this.focalPoint,this.position),this.distance=i.length(this.distanceVector),this.dollyingStep=this.distance/100}}]),t}(),kl=Ir()(Il.prototype,"interactor",[Tl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Al=Il))||Al),Vl=n(22),Wl=n.n(Vl),Xl=n(13),Hl=n.n(Xl),ql=n(3);function Yl(){if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Kl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Kl(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ql,Jl,$l,th,eh,nh,rh,oh,ih,ah,uh,sh,ch,fh,lh,hh,dh,ph,vh,mh,yh,gh,bh,_h,xh,wh,Eh,Sh,Th=(Cl=Object(Lr.injectable)(),Nl=Object(Lr.inject)(Ur.RenderEngine),Pl=Object(Lr.inject)(Ur.ConfigService),Cl((jl=function(){function t(){Er()(this,t),xr()(this,"engine",Ll,this),xr()(this,"configService",Ul,this),this.entity=Cr(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}var e,n,r;return Tr()(t,[{key:"init",value:function(){var t=this.configService.get(),e=t.canvas,n=t.engineOptions;this.initPromise=this.engine.init(Zl({canvas:e||Yl(),swapChainFormat:ql.TextureFormat.BGRA8Unorm,antialiasing:!1},n))}},{key:"setBundle",value:function(t){this.compiledBundle=JSON.parse(JSON.stringify(t))}},{key:"setDispatch",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=t),this}},{key:"setMaxIteration",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=t),this}},{key:"setBinding",value:function(t,e){var n=this;if("string"==typeof t){var r=fc()(e)||Wl()(e)||Hl()(e);if(this.compiledBundle&&this.compiledBundle.context){var o=this.compiledBundle.context.defines.find((function(e){return e.name===t}));if(o)return o.value=e,this;var i=this.compiledBundle.context.uniforms.find((function(e){return e.name===t}));i&&(r?(i.data=e,i.isReferer=!1,i.storageClass===bl.Uniform?this.model&&this.model.updateUniform(t,e):this.model&&this.model.updateBuffer(t,e)):(i.isReferer=!0,i.data=e))}}else Object.keys(t).forEach((function(e){n.setBinding(e,t[e])}));return this}},{key:"execute",value:(r=Rr()(Or.a.mark((function t(){var e,n,r=this,o=arguments;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=o.length>0&&void 0!==o[0]?o[0]:1,!this.dirty){t.next=6;break}return this.compiledBundle.context&&(e>1?this.compiledBundle.context.maxIteration=e:this.compiledBundle.context.maxIteration++),t.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter((function(t){return t.isReferer})).forEach((function(t){var e=t.data,n=t.name;r.model.confirmInput(e.model,n)})),n=0;n<e;n++)this.model.run();return this.engine.endFrame(),t.abrupt("return",this);case 12:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"getOutput",value:(n=Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.model.readData());case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"compile",value:(e=Rr()(Or.a.mark((function t(){var e,n,r;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initPromise;case 2:return e=Zl({},this.compiledBundle.context),n=this.engine.supportWebGPU?this.engine.useWGSL?_l.WGSL:_l.GLSL450:_l.GLSL100,r=this.compiledBundle.shaders[n],e.defines.filter((function(t){return t.runtime})).forEach((function(t){var e="".concat("__DefineValuePlaceholder__").concat(t.name);r=r.replace(e,"".concat(t.value))})),e.shader=r,e.uniforms.forEach((function(t){if(!t.data&&t.storageClass===bl.StorageBuffer){var n=1;t.type===yl.FloatArray?n=1:t.type===yl.Vector4FloatArray&&(n=4),t.data=new Float32Array(e.output.length*n).fill(0)}})),this.compiledBundle.context=e,t.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=t.sent;case 12:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}(),Ll=Ir()(jl.prototype,"engine",[Nl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ul=Ir()(jl.prototype,"configService",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gl=jl))||Gl),Ah=(Ql=Object(Lr.injectable)(),Jl=Object(Lr.inject)(Ur.MeshComponentManager),$l=Object(Lr.inject)(Ur.CullableComponentManager),th=Object(Lr.inject)(Ur.TransformComponentManager),eh=Object(Lr.inject)(Ur.Systems),nh=Object(Lr.named)(Ur.SceneGraphSystem),Ql((fh=ch=function(){function t(){Er()(this,t),this.attributes={},this.config=void 0,xr()(this,"mesh",ih,this),xr()(this,"cullable",ah,this),xr()(this,"transform",uh,this),xr()(this,"sceneGraphSystem",sh,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return Tr()(t,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(t){this.config=t}},{key:"setEntity",value:function(t){this.entity=t,this.cullable.create(t),this.meshComponent=this.mesh.create(t),this.transformComponent=this.transform.create(t),this.onEntityCreated()}},{key:"setMaterial",value:function(t){return this.meshComponent.material=t,this}},{key:"setGeometry",value:function(t){return this.meshComponent.geometry=t,this}},{key:"setAttributes",value:function(t){var e=this;Object.keys(t).forEach((function(n){void 0!==t[n]&&t[n]!==e.attributes[n]&&(e.onAttributeChanged({name:n,data:t[n]}),e.attributes[n]=t[n])}))}},{key:"setVisible",value:function(t){return this.meshComponent.visible=t,this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(t){return this.sceneGraphSystem.attach(this.entity,t.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(e),n)}},{key:"convertAttributeName2UniformName",value:function(t){return t}}]),t}(),ch.POINT="point",ch.LINE="line",ch.GRID="grid",oh=fh,ih=Ir()(oh.prototype,"mesh",[Jl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ah=Ir()(oh.prototype,"cullable",[$l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uh=Ir()(oh.prototype,"transform",[th],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sh=Ir()(oh.prototype,"sceneGraphSystem",[eh,nh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rh=oh))||rh),Ih=n(189),kh=n.n(Ih),Oh=function(){function t(e,n){Er()(this,t),this.attribute=void 0,this.buffer=void 0;var r=n.buffer,o=n.offset,i=n.stride,a=n.normalized,u=n.size,s=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:o||0,stride:i||0,normalized:a||!1,divisor:s||0},u&&(this.attribute.size=u)}return Tr()(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),Dh=(lh={},uo()(lh,Qu.POINTS,"points"),uo()(lh,Qu.LINES,"lines"),uo()(lh,Qu.LINE_LOOP,"line loop"),uo()(lh,Qu.LINE_STRIP,"line strip"),uo()(lh,Qu.TRIANGLES,"triangles"),uo()(lh,Qu.TRIANGLE_FAN,"triangle fan"),uo()(lh,Qu.TRIANGLE_STRIP,"triangle strip"),lh),Rh=(hh={},uo()(hh,Qu.STATIC_DRAW,"static"),uo()(hh,Qu.DYNAMIC_DRAW,"dynamic"),uo()(hh,Qu.STREAM_DRAW,"stream"),hh),Mh=(dh={},uo()(dh,Qu.BYTE,"int8"),uo()(dh,Qu.UNSIGNED_INT,"int16"),uo()(dh,Qu.INT,"int32"),uo()(dh,Qu.UNSIGNED_BYTE,"uint8"),uo()(dh,Qu.UNSIGNED_SHORT,"uint16"),uo()(dh,Qu.UNSIGNED_INT,"uint32"),uo()(dh,Qu.FLOAT,"float"),dh),Ch=(ph={},uo()(ph,Qu.ALPHA,"alpha"),uo()(ph,Qu.LUMINANCE,"luminance"),uo()(ph,Qu.LUMINANCE_ALPHA,"luminance alpha"),uo()(ph,Qu.RGB,"rgb"),uo()(ph,Qu.RGBA,"rgba"),uo()(ph,Qu.RGBA4,"rgba4"),uo()(ph,Qu.RGB5_A1,"rgb5 a1"),uo()(ph,Qu.RGB565,"rgb565"),uo()(ph,Qu.DEPTH_COMPONENT,"depth"),uo()(ph,Qu.DEPTH_STENCIL,"depth stencil"),ph),Nh=(vh={},uo()(vh,Qu.DONT_CARE,"dont care"),uo()(vh,Qu.NICEST,"nice"),uo()(vh,Qu.FASTEST,"fast"),vh),Ph=(mh={},uo()(mh,Qu.NEAREST,"nearest"),uo()(mh,Qu.LINEAR,"linear"),uo()(mh,Qu.LINEAR_MIPMAP_LINEAR,"mipmap"),uo()(mh,Qu.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),uo()(mh,Qu.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),uo()(mh,Qu.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),mh),Gh=(yh={},uo()(yh,Qu.REPEAT,"repeat"),uo()(yh,Qu.CLAMP_TO_EDGE,"clamp"),uo()(yh,Qu.MIRRORED_REPEAT,"mirror"),yh),jh=(gh={},uo()(gh,Qu.NONE,"none"),uo()(gh,Qu.BROWSER_DEFAULT_WEBGL,"browser"),gh),Lh=(bh={},uo()(bh,Qu.NEVER,"never"),uo()(bh,Qu.ALWAYS,"always"),uo()(bh,Qu.LESS,"less"),uo()(bh,Qu.LEQUAL,"lequal"),uo()(bh,Qu.GREATER,"greater"),uo()(bh,Qu.GEQUAL,"gequal"),uo()(bh,Qu.EQUAL,"equal"),uo()(bh,Qu.NOTEQUAL,"notequal"),bh),Uh=(_h={},uo()(_h,Qu.FUNC_ADD,"add"),uo()(_h,Qu.MIN_EXT,"min"),uo()(_h,Qu.MAX_EXT,"max"),uo()(_h,Qu.FUNC_SUBTRACT,"subtract"),uo()(_h,Qu.FUNC_REVERSE_SUBTRACT,"reverse subtract"),_h),Bh=(xh={},uo()(xh,Qu.ZERO,"zero"),uo()(xh,Qu.ONE,"one"),uo()(xh,Qu.SRC_COLOR,"src color"),uo()(xh,Qu.ONE_MINUS_SRC_COLOR,"one minus src color"),uo()(xh,Qu.SRC_ALPHA,"src alpha"),uo()(xh,Qu.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),uo()(xh,Qu.DST_COLOR,"dst color"),uo()(xh,Qu.ONE_MINUS_DST_COLOR,"one minus dst color"),uo()(xh,Qu.DST_ALPHA,"dst alpha"),uo()(xh,Qu.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),uo()(xh,Qu.CONSTANT_COLOR,"constant color"),uo()(xh,Qu.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),uo()(xh,Qu.CONSTANT_ALPHA,"constant alpha"),uo()(xh,Qu.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),uo()(xh,Qu.SRC_ALPHA_SATURATE,"src alpha saturate"),xh),Fh=(wh={},uo()(wh,Qu.NEVER,"never"),uo()(wh,Qu.ALWAYS,"always"),uo()(wh,Qu.LESS,"less"),uo()(wh,Qu.LEQUAL,"lequal"),uo()(wh,Qu.GREATER,"greater"),uo()(wh,Qu.GEQUAL,"gequal"),uo()(wh,Qu.EQUAL,"equal"),uo()(wh,Qu.NOTEQUAL,"notequal"),wh),zh=(Eh={},uo()(Eh,Qu.ZERO,"zero"),uo()(Eh,Qu.KEEP,"keep"),uo()(Eh,Qu.REPLACE,"replace"),uo()(Eh,Qu.INVERT,"invert"),uo()(Eh,Qu.INCR,"increment"),uo()(Eh,Qu.DECR,"decrement"),uo()(Eh,Qu.INCR_WRAP,"increment wrap"),uo()(Eh,Qu.DECR_WRAP,"decrement wrap"),Eh),Vh=(Sh={},uo()(Sh,Qu.FRONT,"front"),uo()(Sh,Qu.BACK,"back"),Sh),Wh=function(){function t(e,n){Er()(this,t),this.buffer=void 0;var r=n.data,o=n.usage,i=n.type;this.buffer=e.buffer({data:r,usage:Rh[o||Qu.STATIC_DRAW],type:Mh[i||Qu.UNSIGNED_BYTE]})}return Tr()(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(t){var e=t.data,n=t.offset;this.buffer.subdata(e,n)}}]),t}(),Xh=n(10),Hh=n.n(Xh);function qh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Yh(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qh(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Kh=0,Zh=function(){function t(e,n){var r=this;Er()(this,t),this.reGl=e,this.context=n,this.entity=Cr(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var o={};this.context.uniforms.forEach((function(t){var e=t.name,n=t.type,i=t.data,a=t.isReferer,u=t.storageClass;if(u===bl.StorageBuffer){if(a)r.textureCache[e]={data:void 0},o["".concat(e,"Size")]=function(){return i.compiledBundle.context.output.textureSize};else{r.textureCache[e]=r.calcDataTexture(e,n,i);var s=r.textureCache[e],c=s.textureWidth,f=s.isOutput;o["".concat(e,"Size")]=[c,c],f&&(r.outputTextureName=e,r.context.needPingpong&&(r.outputTextureName="".concat(e,"Output"),r.textureCache[r.outputTextureName]=r.calcDataTexture(e,n,i)))}o[e]=function(){return r.textureCache[e].texture}}else if(u===bl.Uniform){if(i&&(Array.isArray(i)||Wl()(i))&&i.length>16)throw new Error("invalid data type ".concat(n));o[e]=function(){return t.data}}}));var i=this.getOuputDataTexture(),a=i.textureWidth,u=i.texelCount;o.u_OutputTextureSize=[a,a],o.u_OutputTexelCount=u,this.context.output.textureSize=[a,a];var s={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\\n  precision highp float;\\n#else\\n  precision mediump float;\\n#endif\\n".concat(this.context.shader),uniforms:o,vert:"attribute vec3 a_Position;\\nattribute vec2 a_TexCoord;\\n\\nvarying vec2 v_TexCoord;\\n\\nvoid main() {\\n  gl_Position = vec4(a_Position, 1.0);\\n  v_TexCoord = a_TexCoord;\\n}",primitive:"triangle strip",count:4};this.computeCommand=this.reGl(s)}var e;return Tr()(t,[{key:"run",value:function(){var t=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use((function(){t.computeCommand()}))}},{key:"readData",value:(e=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s,c=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.reGl({framebuffer:this.texFBO})((function(){e=c.reGl.read()})),!e){t.next=6;break}if(n=this.getOuputDataTexture(),r=n.originalDataLength,o=n.elementsPerTexel,i=n.typedArrayConstructor,a=void 0===i?Float32Array:i,u=[],4!==o)for(s=0;s<e.length;s+=4)1===o?u.push(e[s]):2===o?u.push(e[s],e[s+1]):u.push(e[s],e[s+1],e[s+2]);else u=e;return t.abrupt("return",new a(u.slice(0,r)));case 6:return t.abrupt("return",new Float32Array);case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"confirmInput",value:function(t,e){var n;this.entity===t.entity?(this.dynamicPingpong=!0,n=this):n=t,this.textureCache[e].id=n.getOuputDataTexture().id,this.textureCache[e].texture=n.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(t,e){var n=this.context.uniforms.find((function(e){return e.name===t}));if(n){var r=this.calcDataTexture(t,n.type,e),o=r.texture,i=r.data;this.textureCache[t].data=i,this.textureCache[t].texture=o}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var t=this.context.output.name;this.textureCache[t].id=this.getOuputDataTexture().id,this.textureCache[t].texture=this.getOuputDataTexture().texture}var e=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=e}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var t=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=t}},{key:"cloneDataTexture",value:function(t){var e=t.data,n=t.textureWidth;return Yh(Yh({},t),{},{id:Kh++,texture:this.reGl.texture({width:n,height:n,data:e,type:"float"})})}},{key:"calcDataTexture",value:function(t,e,n){var r=1;e===yl.Vector4FloatArray&&(r=4);for(var o=[],i=0;i<n.length;i+=r)1===r?o.push(n[i],0,0,0):2===r?o.push(n[i],n[i+1],0,0):3===r?o.push(n[i],n[i+1],n[i+2],0):4===r&&o.push(n[i],n[i+1],n[i+2],n[i+3]);var a=n.length,u=Math.ceil(a/r),s=Math.ceil(Math.sqrt(u)),c=s*s;u<c&&o.push.apply(o,Hh()(new Array(4*(c-u)).fill(0)));var f=this.reGl.texture({width:s,height:s,data:o,type:"float"});return{id:Kh++,data:o,originalDataLength:a,typedArrayConstructor:Wl()(n)?n.constructor:void 0,textureWidth:s,texture:f,texelCount:u,elementsPerTexel:r,isOutput:t===this.context.output.name}}}]),t}(),Qh=function(){function t(e,n){Er()(this,t),this.elements=void 0;var r=n.data,o=n.usage,i=n.type,a=n.count;this.elements=e.elements({data:r,usage:Rh[o||Qu.STATIC_DRAW],type:Mh[i||Qu.UNSIGNED_BYTE],count:a})}return Tr()(t,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){var e=t.data;this.elements.subdata(e)}},{key:"destroy",value:function(){this.elements.destroy()}}]),t}(),Jh=function(){function t(e,n){Er()(this,t),this.framebuffer=void 0;var r=n.width,o=n.height,i=n.color,a=n.colors,u=(n.depth,n.stencil,{width:r,height:o});Array.isArray(a)&&(u.colors=a.map((function(t){return t.get()}))),i&&"boolean"!=typeof i&&(u.color=i.get()),this.framebuffer=e.framebuffer(u)}return Tr()(t,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.framebuffer.resize(e,n)}}]),t}(),$h=n(51),td=n.n($h),ed=n(101),nd=n.n(ed);function rd(t){var e={};return Object.keys(t).forEach((function(n){!function t(e,n,r,o){if(null===n||"number"==typeof n||"boolean"==typeof n||Array.isArray(n)&&"number"==typeof n[0]||Wl()(n)||""===n||"resize"in n)return void(r["".concat(o&&o+".").concat(e)]=n);nd()(n)&&Object.keys(n).forEach((function(i){t(i,n[i],r,"".concat(o&&o+".").concat(e))}));Array.isArray(n)&&n.forEach((function(n,i){Object.keys(n).forEach((function(a){t(a,n[a],r,"".concat(o&&o+".").concat(e,"[").concat(i,"]"))}))}))}(n,t[n],e,"")})),e}function od(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function id(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?od(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):od(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ad,ud,sd=function(){function t(e,n){Er()(this,t),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=e;var r=n.vs,o=n.fs,i=n.attributes,a=n.uniforms,u=n.primitive,s=n.count,c=n.elements,f=n.depth,l=n.blend,h=n.stencil,d=n.cull,p=n.instances,v=n.scissor,m=n.viewport,y={};a&&(this.uniforms=rd(a),Object.keys(a).forEach((function(t){y[t]=e.prop(t)})));var g={};Object.keys(i).forEach((function(t){g[t]=i[t].get()}));var b={attributes:g,frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\\n  precision highp float;\\n#else\\n  precision mediump float;\\n#endif\\n".concat(o),uniforms:y,vert:r,primitive:Dh[void 0===u?Qu.TRIANGLES:u]};p&&(b.instances=p),s&&(b.count=s),c&&(b.elements=c.get()),v&&(b.scissor=v),m&&(b.viewport=m),this.initDepthDrawParams({depth:f},b),this.initBlendDrawParams({blend:l},b),this.initStencilDrawParams({stencil:h},b),this.initCullDrawParams({cull:d},b),this.drawCommand=e(b)}return Tr()(t,[{key:"addUniforms",value:function(t){this.uniforms=id(id({},this.uniforms),rd(t))}},{key:"draw",value:function(t){var e=id(id({},this.uniforms),rd(t.uniforms||{})),n={};Object.keys(e).forEach((function(t){var r=td()(e[t]);"boolean"===r||"number"===r||Array.isArray(e[t])||e[t].BYTES_PER_ELEMENT?n[t]=e[t]:n[t]=e[t].get()})),this.drawCommand(n)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(t,e){var n=t.depth;n&&(e.depth={enable:void 0===n.enable||!!n.enable,mask:void 0===n.mask||!!n.mask,func:Lh[n.func||Qu.LESS],range:n.range||[0,1]})}},{key:"initBlendDrawParams",value:function(t,e){var n=t.blend;if(n){var r=n.enable,o=n.func,i=n.equation,a=n.color,u=void 0===a?[0,0,0,0]:a;e.blend={enable:!!r,func:{srcRGB:Bh[o&&o.srcRGB||Qu.SRC_ALPHA],srcAlpha:Bh[o&&o.srcAlpha||Qu.SRC_ALPHA],dstRGB:Bh[o&&o.dstRGB||Qu.ONE_MINUS_SRC_ALPHA],dstAlpha:Bh[o&&o.dstAlpha||Qu.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Uh[i&&i.rgb||Qu.FUNC_ADD],alpha:Uh[i&&i.alpha||Qu.FUNC_ADD]},color:u}}}},{key:"initStencilDrawParams",value:function(t,e){var n=t.stencil;if(n){var r=n.enable,o=n.mask,i=void 0===o?-1:o,a=n.func,u=void 0===a?{cmp:Qu.ALWAYS,ref:0,mask:-1}:a,s=n.opFront,c=void 0===s?{fail:Qu.KEEP,zfail:Qu.KEEP,zpass:Qu.KEEP}:s,f=n.opBack,l=void 0===f?{fail:Qu.KEEP,zfail:Qu.KEEP,zpass:Qu.KEEP}:f;e.stencil={enable:!!r,mask:i,func:id(id({},u),{},{cmp:Fh[u.cmp]}),opFront:{fail:zh[c.fail],zfail:zh[c.zfail],zpass:zh[c.zpass]},opBack:{fail:zh[l.fail],zfail:zh[l.zfail],zpass:zh[l.zpass]}}}}},{key:"initCullDrawParams",value:function(t,e){var n=t.cull;if(n){var r=n.enable,o=n.face,i=void 0===o?Qu.BACK:o;e.cull={enable:!!r,face:Vh[i]}}}}]),t}(),cd=function(){function t(e,n){Er()(this,t),this.texture=void 0,this.width=void 0,this.height=void 0;var r=n.data,o=n.type,i=void 0===o?Qu.UNSIGNED_BYTE:o,a=n.width,u=n.height,s=n.flipY,c=void 0!==s&&s,f=n.format,l=void 0===f?Qu.RGBA:f,h=n.mipmap,d=void 0!==h&&h,p=n.wrapS,v=void 0===p?Qu.CLAMP_TO_EDGE:p,m=n.wrapT,y=void 0===m?Qu.CLAMP_TO_EDGE:m,g=n.aniso,b=void 0===g?0:g,_=n.alignment,x=void 0===_?1:_,w=n.premultiplyAlpha,E=void 0!==w&&w,S=n.mag,T=void 0===S?Qu.NEAREST:S,A=n.min,I=void 0===A?Qu.NEAREST:A,k=n.colorSpace,O=void 0===k?Qu.BROWSER_DEFAULT_WEBGL:k;this.width=a,this.height=u;var D={width:a,height:u,type:Mh[i],format:Ch[l],wrapS:Gh[v],wrapT:Gh[y],mag:Ph[T],min:Ph[I],alignment:x,flipY:c,colorSpace:jh[O],premultiplyAlpha:E,aniso:b};r&&(D.data=r),"number"==typeof d?D.mipmap=Nh[d]:"boolean"==typeof d&&(D.mipmap=d),this.texture=e.texture(D)}return Tr()(t,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.texture.resize(e,n),this.width=e,this.height=n}},{key:"destroy",value:function(){this.texture.destroy()}}]),t}(),fd=Object(Lr.injectable)()(ad=function(){function t(){var e=this;Er()(this,t),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var t=Rr()(Or.a.mark((function t(n){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new sd(e.gl,n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new Oh(e.gl,t)},this.createBuffer=function(t){return new Wh(e.gl,t)},this.createElements=function(t){return new Qh(e.gl,t)},this.createTexture2D=function(t){return new cd(e.gl,t)},this.createFramebuffer=function(t){return new Jh(e.gl,t)},this.useFramebuffer=function(t,n){e.gl({framebuffer:t?t.get():null})(n)},this.createComputeModel=function(){var t=Rr()(Or.a.mark((function t(n){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Zh(e.gl,n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.clear=function(t){var n=t.color,r=t.depth,o=t.stencil,i=t.framebuffer,a=void 0===i?null:i,u={color:n,depth:r,stencil:o};u.framebuffer=null===a?a:a.get(),e.gl.clear(u)},this.setScissor=function(t){e.gl&&e.gl._gl&&(t.enable&&t.box?(e.gl._gl.enable(Qu.SCISSOR_TEST),e.gl._gl.scissor(t.box.x,t.box.y,t.box.width,t.box.height)):e.gl._gl.disable(Qu.SCISSOR_TEST),e.gl._refresh())},this.viewport=function(t){var n=t.x,r=t.y,o=t.width,i=t.height;e.gl&&e.gl._gl&&(e.gl._gl.viewport(n,r,o,i),e.gl._refresh())},this.readPixels=function(t){var n=t.framebuffer,r={x:t.x,y:t.y,width:t.width,height:t.height};return n&&(r.framebuffer=n.get()),e.gl.read(r)},this.getCanvas=function(){return e.$canvas},this.getGLContext=function(){return e.gl._gl},this.destroy=function(){e.gl&&(e.gl.destroy(),e.inited=!1)}}var e;return Tr()(t,[{key:"init",value:(e=Rr()(Or.a.mark((function t(e){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.inited){t.next=2;break}return t.abrupt("return");case 2:return this.$canvas=e.canvas,t.next=5,new Promise((function(t,n){kh()({canvas:e.canvas,attributes:{alpha:!0,antialias:e.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(e,r){!e&&r||n(e),t(r)}})}));case 5:this.gl=t.sent,this.inited=!0;case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),t}())||ad;function ld(t,e,n,r){if("undefined"!=typeof window){var o=document.getElementsByTagName("head")[0],i=document.createElement("script");i.setAttribute("type","text/javascript"),i.setAttribute("src",t),r&&(i.id=r),i.onload=function(){e&&e()},i.onerror=function(e){n&&n("Unable to load script '".concat(t,"'"),e)},o.appendChild(i)}}function hd(t,e){return new Promise((function(e,n){ld(t,(function(){e()}),(function(t,e){n(e)}))}))}var dd=function(){return pd.apply(this,arguments)};function pd(){return(pd=Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!ud){t.next=2;break}return t.abrupt("return",ud);case 2:return t.next=4,hd("https://preview.babylonjs.com/glslang/glslang.js");case 4:return ud=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),t.abrupt("return",ud);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var vd,md,yd,gd,bd,_d,xd,wd=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.attribute=void 0,this.buffer=void 0;var r=n,o=r.buffer,i=r.offset,a=r.stride,u=r.normalized,s=r.size,c=r.divisor,f=r.arrayStride,l=r.attributes,h=r.stepMode;this.buffer=o,this.attribute={buffer:o.get(),offset:i||0,stride:a||0,normalized:u||!1,divisor:c||0,arrayStride:f||0,attributes:l,stepMode:h||"vertex"},s&&(this.attribute.size=s)}return Tr()(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),Ed=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.buffer=void 0;var r=n,o=r.data,i=r.usage;r.type;this.buffer=this.createBuffer(o instanceof Array?new Float32Array(o):o,i||ql.BufferUsage.Vertex|ql.BufferUsage.CopyDst)}return Tr()(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(t){var e=t.data,n=t.offset;this.setSubData(this.buffer,n,e instanceof Array?new Float32Array(e):e)}},{key:"createBuffer",value:function(t,e){var n=t.byteLength%4,r={size:t.byteLength+n,usage:e},o=this.engine.device.createBuffer(r);return this.setSubData(o,0,t),o}},{key:"setSubData",value:function(t,e,n){(xl?this.engine.device.getQueue():this.engine.device.defaultQueue).writeBuffer(t,e,n)}}]),t}(),Sd=n(52),Td=n.n(Sd),Ad=function(){function t(e,n){Er()(this,t),this.engine=e,this.context=n,this.entity=Cr(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}var e,n,r;return Tr()(t,[{key:"init",value:(r=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:e=t.sent,n=e.computeStage,r=this.context.uniforms.filter((function(t){return t.storageClass===bl.StorageBuffer})),o=this.context.uniforms.filter((function(t){return t.storageClass===bl.Uniform})),i=o.length?1:0,this.bindGroupEntries=[],i&&(a=0,u=[],o.forEach((function(t){if(fc()(t.data))s.uniformGPUBufferLayout.push({name:t.name,offset:a}),a+=4,u.push(t.data);else{var e,n=(null===(e=t.data)||void 0===e?void 0:e.length)||1;3===n&&(n=4,t.data.push(0));var r=a/4%4;if(r>0){var o=4-r;if(n>1&&n<=o)2===n&&(3===o&&(a+=4,u.push(0)),u.push.apply(u,Hh()(t.data)),s.uniformGPUBufferLayout.push({name:t.name,offset:a}));else{for(var i=0;i<o;i++)a+=4,u.push(0);u.push.apply(u,Hh()(t.data)),s.uniformGPUBufferLayout.push({name:t.name,offset:a})}}a+=4*n}})),this.uniformBuffer=new Ed(this.engine,{data:u instanceof Array?new Float32Array(u):u,usage:ql.BufferUsage.Uniform|ql.BufferUsage.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),r.forEach((function(t){var e;Td()(t.data)||t.type!==yl.Vector4FloatArray&&t.type!==yl.FloatArray||(t.name===s.context.output.name?(e=new Ed(s.engine,{data:isFinite(Number(t.data))?[t.data]:t.data,usage:ql.BufferUsage.Storage|ql.BufferUsage.CopyDst|ql.BufferUsage.CopySrc}),s.outputBuffer=e,s.context.output={name:t.name,length:isFinite(Number(t.data))?1:t.data.length,typedArrayConstructor:Float32Array,gpuBuffer:e.get()}):t.isReferer?t.data.model&&t.data.model.outputBuffer&&(e=t.data.model.outputBuffer):e=new Ed(s.engine,{data:isFinite(Number(t.data))?[t.data]:t.data,usage:ql.BufferUsage.Storage|ql.BufferUsage.CopyDst|ql.BufferUsage.CopySrc}),s.vertexBuffers[t.name]=e,s.bindGroupEntries.push({binding:i,resource:{name:t.name,refer:e?void 0:t.data,buffer:e?e.get():void 0}}),i++)})),this.computePipeline=this.engine.device.createComputePipeline({computeStage:n}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"destroy",value:function(){var t=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach((function(e){return t.vertexBuffers[e].destroy()}))}},{key:"readData",value:(n=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s,c;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this.context.output)){t.next=16;break}if(n=e.length,r=e.typedArrayConstructor,!(o=e.gpuBuffer)){t.next=16;break}return i=n*r.BYTES_PER_ELEMENT,a=this.engine.device.createBuffer({size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),(u=this.engine.device.createCommandEncoder()).copyBufferToBuffer(o,0,a,0,i),(xl?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([u.finish()]),t.next=12,a.mapAsync(ql.MapMode.Read);case 12:return s=a.getMappedRange(),c=new r(s.slice(0)),a.unmap(),t.abrupt("return",c);case 16:return t.abrupt("return",new Float32Array);case 17:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"run",value:function(){var t;this.engine.currentComputePass&&(this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(t=this.engine.currentComputePass).dispatch.apply(t,Hh()(this.context.dispatch)))}},{key:"updateBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.vertexBuffers[t];r&&r.subData({data:e,offset:n})}},{key:"updateUniform",value:function(t,e){var n=this.uniformGPUBufferLayout.find((function(e){return e.name===t}));n&&this.uniformBuffer.subData({data:Number.isFinite(e)?new Float32Array([e]):new Float32Array(e),offset:n.offset})}},{key:"confirmInput",value:function(t,e){var n=this.vertexBuffers[e],r=t.outputBuffer;if(n&&r&&n!==r){var o=this.engine.device.createCommandEncoder(),i=t.context.output,a=i.length*i.typedArrayConstructor.BYTES_PER_ELEMENT;o.copyBufferToBuffer(r.get(),0,n.get(),0,a),(xl?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([o.finish()])}}},{key:"compileShaderToSpirV",value:function(t,e,n){return this.compileRawShaderToSpirV(n+t,e)}},{key:"compileRawShaderToSpirV",value:function(t,e){return this.engine.glslang.compileGLSL(t,e)}},{key:"compileComputePipelineStageDescriptor",value:(e=Rr()(Or.a.mark((function t(e){var n;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e,this.engine.options.useWGSL){t.next=6;break}return t.next=5,this.compileShaderToSpirV(e,"compute","#version 450\\n");case 5:n=t.sent;case 6:return t.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:n,isWHLSL:xl}),entryPoint:"main"}});case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}(),Id=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.indexCount=void 0,this.buffer=void 0;var r=n,o=r.data,i=(r.usage,r.type,r.count);this.indexCount=i||0,this.buffer=new Ed(e,{data:o instanceof Array?new Uint16Array(o):o,usage:ql.BufferUsage.Index|ql.BufferUsage.CopyDst})}return Tr()(t,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),kd=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var r=n,o=(r.width,r.height,r.color),i=(r.colors,r.depth);r.stencil;o&&(this.colorTexture=o),i&&(this.depthTexture=i)}return Tr()(t,[{key:"get",value:function(){var t,e;return{color:null===(t=this.colorTexture)||void 0===t?void 0:t.get(),depth:null===(e=this.depthTexture)||void 0===e?void 0:e.get()}}},{key:"destroy",value:function(){var t,e;null===(t=this.colorTexture)||void 0===t||t.destroy(),null===(e=this.depthTexture)||void 0===e||e.destroy()}},{key:"resize",value:function(t){var e,n,r=t.width,o=t.height;r===this.width&&o===this.height||(null===(e=this.colorTexture)||void 0===e||e.resize({width:r,height:o}),null===(n=this.depthTexture)||void 0===n||n.resize({width:r,height:o}));this.width=r,this.height=o}}]),t}(),Od=(vd={},uo()(vd,Qu.POINTS,ql.PrimitiveTopology.PointList),uo()(vd,Qu.LINES,ql.PrimitiveTopology.LineList),uo()(vd,Qu.LINE_LOOP,ql.PrimitiveTopology.LineList),uo()(vd,Qu.LINE_STRIP,ql.PrimitiveTopology.LineStrip),uo()(vd,Qu.TRIANGLES,ql.PrimitiveTopology.TriangleList),uo()(vd,Qu.TRIANGLE_FAN,ql.PrimitiveTopology.TriangleList),uo()(vd,Qu.TRIANGLE_STRIP,ql.PrimitiveTopology.TriangleStrip),vd),Dd=(md={},uo()(md,Qu.NEVER,ql.CompareFunction.Never),uo()(md,Qu.ALWAYS,ql.CompareFunction.Always),uo()(md,Qu.LESS,ql.CompareFunction.Less),uo()(md,Qu.LEQUAL,ql.CompareFunction.LessEqual),uo()(md,Qu.GREATER,ql.CompareFunction.Greater),uo()(md,Qu.GEQUAL,ql.CompareFunction.GreaterEqual),uo()(md,Qu.EQUAL,ql.CompareFunction.Equal),uo()(md,Qu.NOTEQUAL,ql.CompareFunction.NotEqual),md),Rd=(yd={},uo()(yd,Qu.FUNC_ADD,ql.BlendOperation.Add),uo()(yd,Qu.MIN_EXT,ql.BlendOperation.Min),uo()(yd,Qu.MAX_EXT,ql.BlendOperation.Max),uo()(yd,Qu.FUNC_SUBTRACT,ql.BlendOperation.Subtract),uo()(yd,Qu.FUNC_REVERSE_SUBTRACT,ql.BlendOperation.ReverseSubtract),yd),Md=(gd={},uo()(gd,Qu.ZERO,ql.BlendFactor.Zero),uo()(gd,Qu.ONE,ql.BlendFactor.One),uo()(gd,Qu.SRC_COLOR,ql.BlendFactor.SrcColor),uo()(gd,Qu.ONE_MINUS_SRC_COLOR,ql.BlendFactor.OneMinusSrcColor),uo()(gd,Qu.SRC_ALPHA,ql.BlendFactor.SrcAlpha),uo()(gd,Qu.ONE_MINUS_SRC_ALPHA,ql.BlendFactor.OneMinusSrcAlpha),uo()(gd,Qu.DST_COLOR,ql.BlendFactor.DstColor),uo()(gd,Qu.ONE_MINUS_DST_COLOR,ql.BlendFactor.OneMinusDstColor),uo()(gd,Qu.DST_ALPHA,ql.BlendFactor.DstAlpha),uo()(gd,Qu.ONE_MINUS_DST_ALPHA,ql.BlendFactor.OneMinusDstAlpha),uo()(gd,Qu.CONSTANT_COLOR,ql.BlendFactor.BlendColor),uo()(gd,Qu.ONE_MINUS_CONSTANT_COLOR,ql.BlendFactor.OneMinusBlendColor),uo()(gd,Qu.SRC_ALPHA_SATURATE,ql.BlendFactor.SrcAlphaSaturated),gd),Cd=(bd={},uo()(bd,Qu.ALPHA,"r8unorm"),uo()(bd,Qu.RGBA,"rgba8unorm"),uo()(bd,Qu.DEPTH_COMPONENT,"depth32float"),uo()(bd,Qu.DEPTH_STENCIL,"depth24plus-stencil8"),bd),Nd=(_d={},uo()(_d,Qu.NEAREST,"nearest"),uo()(_d,Qu.LINEAR,"linear"),_d),Pd=(xd={},uo()(xd,Qu.REPEAT,"repeat"),uo()(xd,Qu.CLAMP_TO_EDGE,"clamp-to-edge"),uo()(xd,Qu.MIRRORED_REPEAT,"mirror-repeat"),xd);function Gd(t){var e=t.cull;return e&&e.enable?e.face?e.face===Qu.FRONT?ql.CullMode.Front:ql.CullMode.Back:void 0:ql.CullMode.None}function jd(t){var e=t.depth,n=(t.stencil,{compare:ql.CompareFunction.Always,depthFailOp:ql.StencilOperation.Keep,failOp:ql.StencilOperation.Keep,passOp:ql.StencilOperation.Keep});return{depthWriteEnabled:e&&e.enable,depthCompare:Dd[(null==e?void 0:e.func)||Qu.ALWAYS],format:ql.TextureFormat.Depth24PlusStencil8,stencilFront:n,stencilBack:n,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function Ld(t,e){var n=t.blend;return[{format:e,alphaBlend:{srcFactor:Md[n&&n.func&&n.func.srcAlpha||Qu.ONE],dstFactor:Md[n&&n.func&&n.func.dstAlpha||Qu.ZERO],operation:Rd[n&&n.equation&&n.equation.alpha||Qu.FUNC_ADD]},colorBlend:{srcFactor:Md[n&&n.func&&n.func.srcRGB||Qu.ONE],dstFactor:Md[n&&n.func&&n.func.dstRGB||Qu.ZERO],operation:Rd[n&&n.equation&&n.equation.rgb||Qu.FUNC_ADD]},writeMask:ql.ColorWrite.All}]}function Ud(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Bd(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ud(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ud(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Fd(t){for(var e=0,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var i=0,a=r;i<a.length;i++){var u=a[i];e+=u.length}for(var s=new t(e),c=0,f=0,l=r;f<l.length;f++){var h=l[f];s.set(h,c),c+=h.length}return s}var zd,Vd,Wd,Xd,Hd,qd,Yd,Kd,Zd,Qd,Jd,$d,tp=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}var e,n;return Tr()(t,[{key:"init",value:(n=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s,c,f,l,h,d,p,v,m,y=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.options,n=e.vs,r=e.fs,o=e.attributes,i=e.uniforms,a=e.primitive,e.count,u=e.elements,s=e.depth,c=e.blend,f=e.stencil,l=e.cull,e.instances,t.next=3,this.compilePipelineStageDescriptor(n,r,null);case 3:h=t.sent,d=h.vertexStage,p=h.fragmentStage,i&&this.buildUniformBindGroup(i),u&&(this.indexBuffer=u.get(),this.indexCount=u.indexCount),v={vertexBuffers:Object.keys(o).map((function(t,e){var n=o[t],r=n.get(),i=r.arrayStride,a=r.stepMode,u=r.attributes;return y.attributeCache[t]=n,{arrayStride:i,stepMode:a,attributes:u}}))},m={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:Od[a||Qu.TRIANGLES],rasterizationState:Bd(Bd({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:Gd({cull:l})}),depthStencilState:jd({depth:s,stencil:f}),colorStates:Ld({blend:c},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:d,fragmentStage:p,vertexState:v},this.renderPipeline=this.engine.device.createRenderPipeline(m);case 11:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"addUniforms",value:function(t){this.uniforms=Bd(Bd({},this.uniforms),rd(t))}},{key:"draw",value:function(t){var e=this,n=this.engine.getCurrentRenderPass(),r=Bd(Bd({},this.uniforms),rd(t.uniforms||{})),o=[];Object.keys(r).forEach((function(t){var n=td()(r[t]);if("boolean"===n||"number"===n||Array.isArray(r[t])||r[t].BYTES_PER_ELEMENT){var i,a=null===(i=e.uniformGPUBufferLayout.find((function(e){return e.name===t})))||void 0===i?void 0:i.offset;Td()(a)||e.uniformBuffer.subData({data:r[t],offset:a})}else{var u,s=null===(u=e.uniformGPUBufferLayout.find((function(e){return e.name===t})))||void 0===u?void 0:u.offset;if(!Td()(s)){var c=r[t].get(),f=c.color||c,l=f.texture,h=f.sampler;h&&(o.push({binding:s,resource:h}),s++),o.push({binding:s,resource:l.createView()})}}})),this.uniformBuffer&&(o[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:o}),this.renderPipeline&&n.setPipeline(this.renderPipeline),n.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&n.setIndexBuffer(this.indexBuffer.get(),ql.IndexFormat.Uint32,0),Object.keys(this.attributeCache).forEach((function(t,r){n.setVertexBuffer(0+r,e.attributeCache[t].get().buffer,0)})),this.indexBuffer?n.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):n.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:(e=Rr()(Or.a.mark((function t(e,n,r){var o,i,a;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o="#version 450\\n",i=e,a=n,this.engine.options.useWGSL){t.next=10;break}return t.next=6,this.compileShaderToSpirV(e,"vertex",o);case 6:return i=t.sent,t.next=9,this.compileShaderToSpirV(n,"fragment",o);case 9:a=t.sent;case 10:return t.abrupt("return",this.createPipelineStageDescriptor(i,a));case 11:case"end":return t.stop()}}),t,this)}))),function(t,n,r){return e.apply(this,arguments)})},{key:"compileShaderToSpirV",value:function(t,e,n){return this.compileRawShaderToSpirV(n+t,e)}},{key:"compileRawShaderToSpirV",value:function(t,e){return this.engine.glslang.compileGLSL(t,e)}},{key:"createPipelineStageDescriptor",value:function(t,e){return{vertexStage:{module:this.engine.device.createShaderModule({code:t,isWHLSL:xl}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:e,isWHLSL:xl}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:ql.FrontFace.CCW,cullMode:ql.CullMode.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(t){var e=this,n=0,r=Fd.apply(void 0,[Float32Array].concat(Hh()(Object.keys(t).map((function(r){return t[r]?(e.uniformGPUBufferLayout.push({name:r,offset:n}),n+=4*(t[r].length||1),t[r]):[]}))))),o=[],i=!1;r.length&&(i=!0,o.push({binding:0,visibility:ql.ShaderStage.Fragment|ql.ShaderStage.Vertex,type:ql.BindingType.UniformBuffer})),Object.keys(t).filter((function(e){return null===t[e]})).forEach((function(t,n){e.uniformGPUBufferLayout.push({name:t,offset:2*n+(i?1:0)}),o.push({binding:2*n+(i?1:0),visibility:ql.ShaderStage.Fragment,type:ql.BindingType.Sampler},{binding:2*n+(i?1:0)+1,visibility:ql.ShaderStage.Fragment,type:ql.BindingType.SampledTexture})})),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:o}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),i&&(this.uniformBuffer=new Ed(this.engine,{data:r instanceof Array?new Float32Array(r):r,usage:ql.BufferUsage.Uniform|ql.BufferUsage.CopyDst}))}}]),t}(),ep=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return Tr()(t,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(t){var e=t.width,n=t.height;e===this.width&&n===this.height||(this.destroy(),this.createTexture()),this.width=e,this.height=n}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var t=this.options,e=(t.data,t.type),n=(void 0===e&&Qu.UNSIGNED_BYTE,t.width),r=t.height,o=(t.flipY,t.format),i=void 0===o?Qu.RGBA:o,a=(t.mipmap,t.wrapS),u=void 0===a?Qu.CLAMP_TO_EDGE:a,s=t.wrapT,c=void 0===s?Qu.CLAMP_TO_EDGE:s,f=t.aniso,l=void 0===f?0:f,h=(t.alignment,t.premultiplyAlpha,t.mag),d=void 0===h?Qu.NEAREST:h,p=t.min,v=void 0===p?Qu.NEAREST:p,m=t.colorSpace,y=(void 0===m&&Qu.BROWSER_DEFAULT_WEBGL,t.usage);this.width=n,this.height=r,this.texture=this.engine.device.createTexture({size:[n,r,1],mipLevelCount:1,sampleCount:1,dimension:ql.TextureDimension.E2d,format:Cd[i],usage:y||ql.TextureUsage.Sampled|ql.TextureUsage.CopyDst}),(!y||y&ql.TextureUsage.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:Pd[u],addressModeV:Pd[c],addressModeW:Pd[u],magFilter:Nd[d],minFilter:Nd[v],maxAnisotropy:l}))}}]),t}(),np=Object(Lr.injectable)()(zd=function(){function t(){var e=this;Er()(this,t),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(t){t.framebuffer;var n=t.color,r=t.depth,o=t.stencil;e.options.supportCompute&&e.startComputePass(),e.currentRenderTarget?(e.currentRenderPass&&e.endRenderTargetRenderPass(),e.startRenderTargetRenderPass(e.currentRenderTarget,n||null,!!r,!!o)):(e.mainColorAttachments[0].loadValue=n||ql.LoadOp.Load,e.mainDepthAttachment.depthLoadValue=r||ql.LoadOp.Load,e.mainDepthAttachment.stencilLoadValue=o?e.clearStencilValue:ql.LoadOp.Load,e.mainRenderPass&&e.endMainRenderPass(),e.startMainRenderPass())},this.createModel=function(){var t=Rr()(Or.a.mark((function t(n){var r;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new tp(e,n),t.next=3,r.init();case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new wd(e,t)},this.createBuffer=function(t){return new Ed(e,t)},this.createElements=function(t){return new Id(e,t)},this.createTexture2D=function(t){return new ep(e,t)},this.createFramebuffer=function(t){return new kd(e,t)},this.useFramebuffer=function(t,n){e.currentRenderTarget&&e.unbindFramebuffer(e.currentRenderTarget),e.currentRenderTarget=t,e.currentRenderTargetViewDescriptor={dimension:ql.TextureViewDimension.E2d,arrayLayerCount:1,aspect:ql.TextureAspect.All},e.currentRenderPass=null,n()},this.createComputeModel=function(){var t=Rr()(Or.a.mark((function t(n){var r;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Ad(e,n),t.next=3,r.init();case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getCanvas=function(){return e.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(t){var n=t.x,r=t.y,o=t.width,i=t.height;if(e.currentRenderPass){if(e.transientViewport.x!==1/0){e.getCurrentRenderPass().setViewport(e.transientViewport.x,e.transientViewport.y,e.transientViewport.width,e.transientViewport.height,0,1)}else if(n!==e.cachedViewport.x||r!==e.cachedViewport.y||o!==e.cachedViewport.width||i!==e.cachedViewport.height){e.cachedViewport={x:n,y:r,width:o,height:i},e.getCurrentRenderPass().setViewport(n,r,o,i,0,1)}}else e.transientViewport={x:n,y:r,width:o,height:i}},this.readPixels=function(t){throw new Error("Method not implemented.")}}var e,n;return Tr()(t,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:(n=Rr()(Or.a.mark((function t(e){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.canvas=e.canvas,this.options=e,this.useWGSL=!!e.useWGSL,this.mainPassSampleCount=e.antialiasing?this.defaultSampleCount:1,t.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach((function(t){return t.destroy()})),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),xl?this.device.getQueue().submit(this.commandBuffers.filter((function(t){return t}))):this.device.defaultQueue.submit(this.commandBuffers.filter((function(t){return t})))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:(e=Rr()(Or.a.mark((function t(){var e,n;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dd();case 2:return this.glslang=t.sent,t.next=5,null===(e=navigator)||void 0===e||null===(n=e.gpu)||void 0===n?void 0:n.requestAdapter();case 5:return this.adapter=t.sent,t.next=8,this.adapter.requestDevice();case 8:this.device=t.sent;case 9:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(xl?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:ql.TextureUsage.OutputAttachment|ql.TextureUsage.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var t={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:ql.TextureDimension.E2d,format:ql.TextureFormat.BGRA8Unorm,usage:ql.TextureUsage.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(t),this.mainColorAttachments=[{attachment:xl?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:ql.StoreOp.Store}]}else this.mainColorAttachments=[{attachment:xl?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:ql.StoreOp.Store}];var e={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:ql.TextureDimension.E2d,format:xl?"depth32float-stencil8":ql.TextureFormat.Depth24PlusStencil8,usage:ql.TextureUsage.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(e),this.mainDepthAttachment={attachment:xl?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:ql.StoreOp.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:ql.StoreOp.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=xl?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=xl?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(t,e,n){var r,o,i,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=null===(r=t.get().color)||void 0===r?void 0:r.texture;u&&(i=u.createView(this.currentRenderTargetViewDescriptor));var s,c=null===(o=t.get().depth)||void 0===o?void 0:o.texture;c&&(s=c.createView());var f=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:i,loadValue:null!==e?e:ql.LoadOp.Load,storeOp:ql.StoreOp.Store}],depthStencilAttachment:c&&s?{attachment:s,depthLoadValue:n?this.clearDepthValue:ql.LoadOp.Load,depthStoreOp:ql.StoreOp.Store,stencilLoadValue:a?this.clearStencilValue:ql.LoadOp.Load,stencilStoreOp:ql.StoreOp.Store}:void 0});this.currentRenderPass=f,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&null!==this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(t){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),t}())||zd;function rp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var op=(Vd=Object(Lr.injectable)(),Wd=Object(Lr.inject)(Ur.Systems),Xd=Object(Lr.named)(Ur.MaterialSystem),Hd=Object(Lr.inject)(Ur.Systems),qd=Object(Lr.named)(Ur.GeometrySystem),Yd=Object(Lr.inject)(Ur.ShaderModuleService),Vd((Zd=function(t){Wr()(n,t);var e=rp(n);function n(){var t;Er()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o)),xr()(t,"materialSystem",Qd,co()(t)),xr()(t,"geometrySystem",Jd,co()(t)),xr()(t,"shaderModuleService",$d,co()(t)),t}return Tr()(n,[{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data,r=this.getMeshComponent();r&&r.material&&("gridColor"===e?(r.material.setUniform("u_GridColor",n),r.material.setUniform("u_GridColor2",n)):"gridSize"===e&&(r.material.setUniform("u_GridSize",n),r.material.setUniform("u_GridSize2",n)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:"attribute vec3 a_Position;\\n\\nvarying vec3 v_Position;\\n\\nuniform mat4 projectionMatrix;\\nuniform mat4 modelViewMatrix;\\n\\nvoid main() {\\n  v_Position = a_Position;\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);\\n}",fs:"// generate grid, borrow from clay.gl viewer\\n// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl\\n#extension GL_OES_standard_derivatives : enable\\n\\nvarying vec3 v_Position;\\n// varying vec3 v_Normal;\\n\\nuniform float u_GridSize : 5;\\nuniform float u_GridSize2 : .5;\\nuniform vec4 u_GridColor : [0, 0, 0, 1];\\nuniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];\\nuniform bool u_GridEnabled : true;\\n\\n// uniform vec3 u_LightDirection;\\n// uniform vec3 u_LightColor;\\n// uniform vec3 u_Camera;\\n\\nvoid main() {\\n  // vec3 n = v_Normal;\\n  // vec3 l = normalize(u_LightDirection);\\n  // float NdotL = clamp(dot(n, l), 0.001, 1.0);\\n\\n  gl_FragColor = vec4(1.);\\n\\n  if (u_GridEnabled) {\\n    float wx = v_Position.x;\\n    float wz = v_Position.z;\\n    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;\\n    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;\\n\\n    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;\\n    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;\\n\\n    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);\\n    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);\\n    // if (v0 > 0.1) {\\n        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);\\n    // }\\n    // else {\\n        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);\\n    // }\\n  }\\n\\n  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);\\n  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;\\n\\n  // gl_FragColor.rgb *= diffuseColor;\\n}"});var t=this.shaderModuleService.getModule("grid"),e=t.vs,n=t.fs,r=t.uniforms,o=this.materialSystem.createShaderMaterial({vertexShader:e,fragmentShader:n});this.setMaterial(o);var i=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(i),o.setCull({enable:!1,face:Qu.BACK}).setDepth({enable:!0,func:Qu.LESS}),o.setUniform(r),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),i.setIndex([0,3,2,2,1,0]),i.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),n}(Ah),Qd=Ir()(Zd.prototype,"materialSystem",[Wd,Xd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jd=Ir()(Zd.prototype,"geometrySystem",[Hd,qd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$d=Ir()(Zd.prototype,"shaderModuleService",[Yd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kd=Zd))||Kd),ip=n(53),ap=n(36);function up(t,e,n,r,o){sp(e,r,-o),sp(e,r,o),t.push(n),t.push(n)}function sp(t,e,n){t.push([[e[0],e[1]],n])}var cp,fp,lp,hp,dp,pp,vp,mp,yp,gp,bp;function _p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var xp,wp,Ep,Sp,Tp,Ap,Ip,kp,Op,Dp,Rp,Mp=(cp=Object(Lr.injectable)(),fp=Object(Lr.inject)(Ur.Systems),lp=Object(Lr.named)(Ur.MaterialSystem),hp=Object(Lr.inject)(Ur.Systems),dp=Object(Lr.named)(Ur.GeometrySystem),pp=Object(Lr.inject)(Ur.ShaderModuleService),cp((mp=function(t){Wr()(n,t);var e=_p(n);function n(){var t;Er()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o)),xr()(t,"materialSystem",yp,co()(t)),xr()(t,"geometrySystem",gp,co()(t)),xr()(t,"shaderModuleService",bp,co()(t)),t.vertexCount=void 0,t}return Tr()(n,[{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data,r=this.getMeshComponent();if(r&&r.material)switch(e){case"dashArray":r.material.setUniform("u_dash_array",n);break;case"dashOffset":r.material.setUniform("u_dash_offset",n);break;case"dashRatio":r.material.setUniform("u_dash_ratio",n);break;case"thickness":r.material.setUniform("u_thickness",n);break;case"color":var o=new Array(this.vertexCount).fill(void 0).map((function(){return n})).reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[]);r.geometry.setAttribute("a_color",Float32Array.from(o),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]})}}},{key:"onEntityCreated",value:function(){var t=this;this.shaderModuleService.registerModule("line",{vs:"attribute vec2 a_pos;\\nattribute vec4 a_color;\\nattribute float a_line_miter;\\nattribute vec2 a_line_normal;\\nattribute float a_counters;\\n\\nuniform mat4 projectionMatrix;\\nuniform mat4 modelViewMatrix;\\nuniform float u_thickness : 0.02;\\nuniform vec2 u_viewport;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_counters;\\n\\nvoid main() {\\n  v_color = a_color;\\n  v_counters = a_counters;\\n\\n  vec3 normal = normalize(vec3(a_line_normal, 0.0));\\n\\n  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);\\n\\n  v_normal = vec2(normal * sign(a_line_miter));\\n\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;\\n}\\n",fs:"uniform float u_dash_array : 0.02;\\nuniform float u_dash_offset : 0;\\nuniform float u_dash_ratio : 0;\\nuniform float u_thickness : 0.02;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_counters;\\n\\nvoid main() {\\n    float blur = 1. - smoothstep(0.98, 1., length(v_normal));\\n\\n    gl_FragColor = v_color;\\n    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));\\n}"});var e=this.shaderModuleService.getModule("line"),n=e.vs,r=e.fs,o=e.uniforms,i=this.materialSystem.createShaderMaterial({vertexShader:n,fragmentShader:r}),a=function(t,e,n){var r=[0,0],o=[0,0],i=[0,0],a=[0,0],u=-1,s=!1,c=null,f=Object(ip.create)(),l=n||0,h=[],d=[],p=[],v=[0,0];e&&(t=t.slice()).push(t[0]);for(var m=t.length,y=1;y<m;y++){var g=l,b=t[y-1],_=t[y],x=y<t.length-1?t[y+1]:null;if(v.push(y/m,y/m),Object(ap.direction)(r,_,b),c||(c=[0,0],Object(ap.normal)(c,r)),s||(s=!0,up(d,h,b,c,1)),p.push([g+0,g+1,g+2]),x){Object(ap.direction)(o,x,_);var w=Object(ap.computeMiter)(i,a,r,o,1),E=Object(ip.dot)(i,c)<0?-1:1,S=w>3;if(!isFinite(w)){Object(ap.normal)(c,r),up(d,h,_,c,1),p.push(1===u?[g,g+2,g+3]:[g+2,g+1,g+3]),l+=2,u=E;continue}S?(w=3,v.push(y/m),sp(h,c,-E),d.push(_),sp(h,a,w*E),d.push(_),p.push(u!==-E?[g,g+2,g+3]:[g+2,g+1,g+3]),p.push([g+2,g+3,g+4]),Object(ap.normal)(f,o),Object(ip.copy)(c,f),sp(h,c,-E),d.push(_),l+=3):(up(d,h,_,a,w),p.push(1===u?[g,g+2,g+3]:[g+2,g+1,g+3]),E=-1,Object(ip.copy)(c,a),l+=2),u=E}else Object(ap.normal)(c,r),up(d,h,_,c,1),p.push(1===u?[g,g+2,g+3]:[g+2,g+1,g+3]),l+=2}return{normals:h,attrIndex:p,attrPos:d,attrCounters:v}}(this.config.points,!1),u=a.normals,s=a.attrIndex,c=a.attrPos,f=a.attrCounters,l=c.length;this.vertexCount=l;var h=this.geometrySystem.createBufferGeometry({vertexCount:l});this.setMaterial(i),this.setGeometry(h),i.setCull({enable:!1,face:Qu.BACK}).setUniform(o),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var d=[],p=[];u.forEach((function(t){var e=t[0],n=t[1];d.push([e[0],e[1]]),p.push(n)})),h.setIndex(s.reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[])),h.setAttribute("a_pos",Float32Array.from(c.reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var v=new Array(l).fill(void 0).map((function(){return Hh()(t.config.color)})).reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[]);h.setAttribute("a_color",Float32Array.from(v),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),h.setAttribute("a_line_miter",Float32Array.from(p),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),h.setAttribute("a_line_normal",Float32Array.from(d.reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),h.setAttribute("a_counters",Float32Array.from(f),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),n}(Ah),yp=Ir()(mp.prototype,"materialSystem",[fp,lp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gp=Ir()(mp.prototype,"geometrySystem",[hp,dp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bp=Ir()(mp.prototype,"shaderModuleService",[pp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vp=mp))||vp);function Cp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Np(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Pp=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"];console.log();var Gp,jp,Lp,Up,Bp,Fp,zp,Vp,Wp,Xp=(xp=Object(Lr.injectable)(),wp=Object(Lr.inject)(Ur.Systems),Ep=Object(Lr.named)(Ur.MaterialSystem),Sp=Object(Lr.inject)(Ur.Systems),Tp=Object(Lr.named)(Ur.GeometrySystem),Ap=Object(Lr.inject)(Ur.ShaderModuleService),xp((kp=function(t){Wr()(n,t);var e=Np(n);function n(){var t;Er()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o)),xr()(t,"materialSystem",Op,co()(t)),xr()(t,"geometrySystem",Dp,co()(t)),xr()(t,"shaderModuleService",Rp,co()(t)),t}return Tr()(n,[{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data,r=this.getMeshComponent();r&&r.material&&("strokeWidth"===e?r.material.setUniform("u_stroke_width",n):"strokeColor"===e?r.material.setUniform("u_stroke_color",n):"strokeOpacity"===e?r.material.setUniform("u_stroke_opacity",n):"opacity"===e?r.material.setUniform("u_opacity",n):"blur"===e&&r.material.setUniform("u_blur",n))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:'attribute vec2 position;\\nattribute vec4 color;\\nattribute float shape;\\nattribute vec2 offset;\\nattribute float size;\\n\\nuniform mat4 projectionMatrix;\\nuniform mat4 modelViewMatrix;\\n\\nuniform float u_stroke_width : 0.01;\\nuniform float u_device_pixel_ratio;\\nuniform vec2 u_viewport;\\n\\nvarying vec4 v_color;\\nvarying vec4 v_data;\\nvarying float v_radius;\\n\\n#pragma include "picking"\\n\\nvoid main() {\\n  v_color = color;\\n  v_radius = size;\\n\\n  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);\\n\\n  // construct point coords\\n  v_data = vec4(position, antialiasblur, shape);\\n\\n  gl_Position = projectionMatrix * modelViewMatrix\\n    * vec4(position * size + offset, 0.0, 1.0);\\n\\n  setPickingColor(a_PickingColor);\\n}',fs:"uniform float u_blur : 0.05;\\nuniform float u_opacity : 0.7;\\nuniform float u_stroke_width : 0.01;\\nuniform vec4 u_stroke_color : [0, 0, 0, 0];\\nuniform float u_stroke_opacity : 1;\\n\\nvarying vec4 v_color;\\nvarying vec4 v_data;\\nvarying float v_radius;\\n\\n#pragma include \\"sdf2d\\"\\n#pragma include \\"picking\\"\\n\\nvoid main() {\\n  int shape = int(floor(v_data.w + 0.5));\\n\\n  float antialiasblur = v_data.z;\\n  float antialiased_blur = -max(u_blur, antialiasblur);\\n  float r = v_radius / (v_radius + u_stroke_width);\\n\\n  float outer_df;\\n  float inner_df;\\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\\n  // if (shape == 0) {\\n    outer_df = sdCircle(v_data.xy, 1.0);\\n    inner_df = sdCircle(v_data.xy, r);\\n  // } else if (shape == 1) {\\n  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);\\n  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);\\n  // } else if (shape == 2) {\\n  //   outer_df = sdBox(v_data.xy, vec2(1.));\\n  //   inner_df = sdBox(v_data.xy, vec2(r));\\n  // } else if (shape == 3) {\\n  //   outer_df = sdPentagon(v_data.xy, 0.8);\\n  //   inner_df = sdPentagon(v_data.xy, r * 0.8);\\n  // } else if (shape == 4) {\\n  //   outer_df = sdHexagon(v_data.xy, 0.8);\\n  //   inner_df = sdHexagon(v_data.xy, r * 0.8);\\n  // } else if (shape == 5) {\\n  //   outer_df = sdOctogon(v_data.xy, 1.0);\\n  //   inner_df = sdOctogon(v_data.xy, r);\\n  // } else if (shape == 6) {\\n  //   outer_df = sdHexagram(v_data.xy, 0.52);\\n  //   inner_df = sdHexagram(v_data.xy, r * 0.52);\\n  // } else if (shape == 7) {\\n  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));\\n  //   inner_df = sdRhombus(v_data.xy, vec2(r));\\n  // } else if (shape == 8) {\\n  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);\\n  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);\\n  // }\\n\\n  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);\\n\\n  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(\\n    antialiased_blur,\\n    0.0,\\n    inner_df\\n  );\\n  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;\\n\\n  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);\\n  gl_FragColor.a = gl_FragColor.a * opacity_t;\\n\\n  gl_FragColor = filterColor(gl_FragColor);\\n}"});var t=this.shaderModuleService.getModule("grid"),e=t.vs,n=t.fs,r=t.uniforms,o=this.materialSystem.createShaderMaterial({vertexShader:e,fragmentShader:n,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:Qu.SRC_ALPHA,dstRGB:Qu.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});o.setUniform(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Cp(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({u_device_pixel_ratio:window.devicePixelRatio},r));var i=this.buildAttributes(),a=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:i.instancedOffsets.length/2,vertexCount:6});a.setIndex([0,2,1,0,3,2]),a.setAttribute("position",Float32Array.from(i.positions),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),a.setAttribute("offset",Float32Array.from(i.instancedOffsets),{arrayStride:8,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),a.setAttribute("color",Float32Array.from(i.instancedColors),{arrayStride:16,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),a.setAttribute("size",Float32Array.from(i.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),a.setAttribute("shape",Float32Array.from(i.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),a.setAttribute("a_PickingColor",Float32Array.from(i.instancedPickingColors),{arrayStride:12,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(o),this.setGeometry(a)}},{key:"buildAttribute",value:function(t,e,n){var r,o,i,a,u;(r=e.instancedPickingColors).push.apply(r,Hh()([(u=t.id||n)+1&255,u+1>>8&255,u+1>>8>>8&255])),e.instancedShapes.push(Pp.indexOf(t.shape||"circle")),(o=e.instancedColors).push.apply(o,Hh()(t.color||[1,0,0,1])),(i=e.instancedOffsets).push.apply(i,Hh()(t.position||[0,0])),(a=e.instancedSizes).push.apply(a,Hh()(t.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var t=this,e={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach((function(n,r){t.buildAttribute(n,e,r)})):this.buildAttribute(this.config,e,0),e}}]),n}(Ah),Op=Ir()(kp.prototype,"materialSystem",[wp,Ep],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dp=Ir()(kp.prototype,"geometrySystem",[Sp,Tp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rp=Ir()(kp.prototype,"shaderModuleService",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ip=kp))||Ip);function Hp(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return qp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qp(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function qp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Yp,Kp,Zp,Qp,Jp,$p,tv,ev,nv,rv,ov,iv,av=(Gp=Object(Lr.injectable)(),jp=Object(Lr.inject)(Ur.RenderEngine),Lp=Object(Lr.inject)(Ur.ShaderModuleService),Up=Object(Lr.inject)(Ur.ConfigService),Gp((Fp=function(){function t(){Er()(this,t),xr()(this,"engine",zp,this),xr()(this,"shaderModule",Vp,this),xr()(this,"configService",Wp,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0,this.container=void 0}var e,n;return Tr()(t,[{key:"init",value:(n=Rr()(Or.a.mark((function t(){var e,n,r,o,i;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.shaderModule.registerBuiltinModules(),e=this.container.getAll(Ur.Systems),!(n=this.configService.get()).canvas){t.next=25;break}return t.next=6,this.engine.init({canvas:n.canvas,swapChainFormat:ql.TextureFormat.BGRA8Unorm,antialiasing:!1});case 6:r=Hp(e),t.prev=7,r.s();case 9:if((o=r.n()).done){t.next=16;break}if(!(i=o.value).initialize){t.next=14;break}return t.next=14,i.initialize();case 14:t.next=9;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(7),r.e(t.t0);case 21:return t.prev=21,r.f(),t.finish(21);case 24:this.inited=!0;case 25:case"end":return t.stop()}}),t,this,[[7,18,21,24]])}))),function(){return n.apply(this,arguments)})},{key:"render",value:(e=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s=arguments;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.inited&&!this.rendering){t.next=2;break}return t.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach((function(t){t()})),this.rendering=!0,this.engine.beginFrame(),e=this.container.getAll(Ur.Systems),n=s.length,r=new Array(n),o=0;o<n;o++)r[o]=s[o];i=Hp(e),t.prev=8,i.s();case 10:if((a=i.n()).done){t.next=17;break}if(!(u=a.value).execute){t.next=15;break}return t.next=15,u.execute(r);case 15:t.next=10;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(8),i.e(t.t0);case 22:return t.prev=22,i.f(),t.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return t.stop()}}),t,this,[[8,19,22,25]])}))),function(){return e.apply(this,arguments)})},{key:"clear",value:function(t){var e=this;return this.inited?this.engine.clear(t):this.pendings.unshift((function(){e.engine.clear(t),e.pendings.shift()})),this}},{key:"setSize",value:function(t){var e=t.width,n=t.height,r=this.engine.getCanvas();return this.size={width:e,height:n},r.width=e,r.height=n,this}},{key:"getSize",value:function(){return this.size}}]),t}(),zp=Ir()(Fp.prototype,"engine",[jp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vp=Ir()(Fp.prototype,"shaderModule",[Lp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wp=Ir()(Fp.prototype,"configService",[Up],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bp=Fp))||Bp),uv=Object(Lr.injectable)()(Yp=function(){function t(){Er()(this,t),this.entities=[]}return Tr()(t,[{key:"getEntities",value:function(){return this.entities}},{key:"addEntity",value:function(t){return-1===this.entities.indexOf(t)&&this.entities.push(t),this}},{key:"removeEntity",value:function(t){var e=this.entities.indexOf(t);return this.entities.splice(e,1),this}}]),t}())||Yp,sv=(Kp=Object(Lr.injectable)(),Zp=Object(Lr.inject)(Ur.Systems),Qp=Object(Lr.named)(Ur.RendererSystem),Kp(($p=function(){function t(){Er()(this,t),xr()(this,"rendererSystem",tv,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return Tr()(t,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(t){return this.camera=t,this}},{key:"setScene",value:function(t){return this.scene=t,this}},{key:"setViewport",value:function(t){return this.viewport=t,this}},{key:"setClearColor",value:function(t){return this.clearColor=t,this}},{key:"pick",value:function(t){return this.rendererSystem.pick(t,this)}}]),t}(),tv=Ir()($p.prototype,"rendererSystem",[Zp,Qp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jp=$p))||Jp);function cv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cv(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var lv=(ev=Object(Lr.injectable)(),nv=Object(Lr.inject)(Ur.ConfigService),ev((ov=function(){function t(){Er()(this,t),xr()(this,"configService",iv,this),this.container=void 0}var e;return Tr()(t,[{key:"getEngine",value:(e=Rr()(Or.a.mark((function t(){var e,n,r,o;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.container.get(Ur.RenderEngine),n=this.configService.get(),r=n.canvas,o=n.engineOptions,t.next=4,e.init(fv({canvas:r||Yl(),swapChainFormat:ql.TextureFormat.BGRA8Unorm,antialiasing:!1},o));case 4:return t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"getTransformComponent",value:function(t){return this.container.get(Ur.TransformComponentManager).getComponentByEntity(t)}},{key:"getMeshComponent",value:function(t){return this.container.get(Ur.MeshComponentManager).getComponentByEntity(t)}},{key:"setConfig",value:function(t){this.configService.set(t)}},{key:"setContainer",value:function(t){this.container=t}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return Cr()}},{key:"createScene",value:function(){return this.container.get(uv)}},{key:"createCamera",value:function(){return this.container.get(zl)}},{key:"createView",value:function(){return this.container.get(sv)}},{key:"createRenderable",value:function(t,e,n){var r=e?this.container.getNamed(Ur.Renderable,e):this.container.get(Ah);return r.setConfig(n||{}),r.setEntity(t),r}},{key:"createBoxGeometry",value:function(t){return this.container.getNamed(Ur.Systems,Ur.GeometrySystem).createBox(t)}},{key:"createBufferGeometry",value:function(t){return this.container.getNamed(Ur.Systems,Ur.GeometrySystem).createBufferGeometry(t)}},{key:"createInstancedBufferGeometry",value:function(t){return this.container.getNamed(Ur.Systems,Ur.GeometrySystem).createInstancedBufferGeometry(t)}},{key:"createBasicMaterial",value:function(){return this.container.getNamed(Ur.Systems,Ur.MaterialSystem).createBasicMaterial()}},{key:"createShaderMaterial",value:function(t){return this.container.getNamed(Ur.Systems,Ur.MaterialSystem).createShaderMaterial(t)}},{key:"createKernel",value:function(t){var e=this.container.get(Th);return"string"==typeof t?e.setBundle(JSON.parse(t)):e.setBundle(t),e.init(),e}},{key:"createRenderer",value:function(){var t=this.container.get(av);return t.container=this.container,t.init(),t}},{key:"destroy",value:function(){this.container.getAll(Ur.Systems).forEach((function(t){t.tearDown&&t.tearDown()})),this.container.get(Ur.RenderEngine).destroy(),this.container.get(Ur.InteractorService).destroy()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=vl(),r=navigator.gpu?np:fd;n.isBound(Ur.RenderEngine)||n.bind(Ur.RenderEngine).to(r).inSingletonScope(),n.bind(av).toSelf(),n.bind(Th).toSelf(),n.bind(Ah).toSelf(),n.bind(sv).toSelf(),n.bind(zl).toSelf(),n.bind(uv).toSelf(),n.bind(t).toSelf(),n.bind(Ur.Renderable).to(Xp).whenTargetNamed(Ah.POINT),n.bind(Ur.Renderable).to(Mp).whenTargetNamed(Ah.LINE),n.bind(Ur.Renderable).to(op).whenTargetNamed(Ah.GRID);var o=n.get(t);return o.setContainer(n),o.setConfig(e),o}}]),t}(),iv=Ir()(ov.prototype,"configService",[nv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rv=ov))||rv),hv=function(t,e){return t?y(t)?function(){return t}:t:function(){return e||1}},dv=function(t,e){var n=[],r=[],o={},i=0;for(i=0;i<t.length;i++){var a=t[i];o[a.id]=i,n.push(a.x),n.push(a.y),n.push(0),n.push(0),r.push([])}for(i=0;i<e.length;i++){var u=e[i];r[o[u.source]].push(o[u.target]),r[o[u.target]].push(o[u.source])}var s=0;for(i=0;i<t.length;i++){var c=n.length,f=r[i],l=f.length;n[4*i+2]=c,n[4*i+3]=f.length,s=Math.max(s,f.length);for(var h=0;h<l;++h){var d=f[h];n.push(+d)}}for(;n.length%4!=0;)n.push(0);return{maxEdgePerVetex:s,array:new Float32Array(n)}},pv=function(t,e,n,r){var o=[],i=[],a={},u=0;for(u=0;u<t.length;u++){var s=t[u];a[s.id]=u,o.push(s.x),o.push(s.y),o.push(0),o.push(0),i.push([])}for(u=0;u<e.length;u++){var c=e[u];i[a[c.source]].push(a[c.target]),i[a[c.source]].push(n(c)),i[a[c.source]].push(r(c)),i[a[c.source]].push(0),i[a[c.target]].push(a[c.source]),i[a[c.target]].push(n(c)),i[a[c.target]].push(r(c)),i[a[c.target]].push(0)}var f=0;for(u=0;u<t.length;u++){var l=o.length,h=i[u],d=h.length;o[4*u+2]=l+1048576*d/4,o[4*u+3]=0,f=Math.max(f,d/4);for(var p=0;p<d;++p){var v=h[p];o.push(+v)}}for(;o.length%4!=0;)o.push(0);return{maxEdgePerVetex:f,array:new Float32Array(o)}},vv=function(t,e){var n=[],r=t.length,o={};return e.forEach((function(e){t.forEach((function(t,i){if(void 0===o[e[t]]&&(o[e[t]]=Object.keys(o).length),n.push(o[e[t]]),i===r-1)for(;n.length%4!=0;)n.push(0)}))})),{array:new Float32Array(n),count:Object.keys(o).length}},mv=function(t){for(var e=[],n=t.length,r=t[0].length,o=function(r){t.forEach((function(t,o){if(e.push(t[r]),o===n-1)for(;e.length%4!=0;)e.push(0)}))},i=0;i<r;i++)o(i);return new Float32Array(e)};function yv(t){return(yv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bv(t,e){return(bv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=wv(t);if(e){var o=wv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xv(this,n)}}function xv(t,e){return!e||"object"!==yv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wv(t){return(wv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ev=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},Sv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bv(t,e)}(i,t);var e,n,r,o=_v(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.gravity=10,e.speed=1,e.clustering=!1,e.clusterField="cluster",e.clusterGravity=10,e.workerEnabled=!1,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return Ev(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,r,o,i,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=(e=this).nodes)&&0!==n.length){t.next=5;break}return e.onLayoutEnd&&e.onLayoutEnd(),t.abrupt("return");case 5:if(e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]),r=e.center,1!==n.length){t.next=14;break}return n[0].x=r[0],n[0].y=r[1],e.onLayoutEnd&&e.onLayoutEnd(),t.abrupt("return");case 14:return o={},i={},n.forEach((function(t,e){y(t.x)||(t.x=Math.random()*a.width),y(t.y)||(t.y=Math.random()*a.height),o[t.id]=t,i[t.id]=e})),e.nodeMap=o,e.nodeIdxMap=i,t.next=21,e.run();case 21:case"end":return t.stop()}}),t,this)})))}},{key:"executeWithWorker",value:function(t,e){return Ev(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,i,a,u,s=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=(r=this).nodes,i=r.center,o&&0!==o.length){n.next=5;break}return n.abrupt("return");case 5:if(1!==o.length){n.next=9;break}return o[0].x=i[0],o[0].y=i[1],n.abrupt("return");case 9:return a={},u={},o.forEach((function(t,e){y(t.x)||(t.x=Math.random()*s.width),y(t.y)||(t.y=Math.random()*s.height),a[t.id]=t,u[t.id]=e})),r.nodeMap=a,r.nodeIdxMap=u,n.next=16,r.run(t,e);case 16:case"end":return n.stop()}}),n,this)})))}},{key:"run",value:function(t,e){return Ev(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,i,a,u,s,c,f,l,h,d,p,v,m,y,g,b,_,x,w,E,S,T,A,I,k,O=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(o=(r=this).nodes,i=r.edges,a=r.maxIteration,u=r.center,s=r.height*r.width,c=Math.sqrt(s)/10,f=s/(o.length+1),l=Math.sqrt(f),h=r.speed,d=r.clustering,p=vv([r.clusterField],o),v=p.array,m=p.count,y=o.length,g=dv(o,i),b=g.maxEdgePerVetex,_=g.array,x=r.workerEnabled,w=x?lv.create({canvas:t,engineOptions:{supportCompute:!0}}):lv.create({engineOptions:{supportCompute:!0}}),E=r.onLayoutEnd,S=[],T=0;T<m;T++)S.push(0,0,0,0);return A=w.createKernel('{"shaders":{"WGSL":"import \\\\"GLSL.std.450\\\\" as std;\\\\n\\\\n\\\\n# var gWebGPUDebug : bool = false;\\\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\\\n\\\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\\\n\\\\ntype GWebGPUParams = [[block]] struct {\\\\n  [[offset 0]] u_K : f32;\\\\n  [[offset 4]] u_K2 : f32;\\\\n  [[offset 8]] u_Center : vec2<f32>;\\\\n  [[offset 16]] u_Gravity : f32;\\\\n  [[offset 20]] u_ClusterGravity : f32;\\\\n  [[offset 24]] u_Speed : f32;\\\\n  [[offset 28]] u_MaxDisplace : f32;\\\\n  [[offset 32]] u_Clustering : f32;\\\\n};\\\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\\\ntype GWebGPUBuffer0 = [[block]] struct {\\\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\\\ntype GWebGPUBuffer1 = [[block]] struct {\\\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\\\ntype GWebGPUBuffer2 = [[block]] struct {\\\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\\\nvar dy : f32 = 0.0;\\\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\\\nvar xDist : f32 = currentNode.x - nextNode.x;\\\\nvar yDist : f32 = currentNode.y - nextNode.y;\\\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\\\nif (dist > 0.0) {dx = dx + param * xDist;\\\\ndy = dy + param * yDist;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\\\ndx = dx + param * std::sign;\\\\ndy = dy + param * std::sign;}}}}\\\\nreturn vec2<f32>(dx, dy);}\\\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\\\nvar dy : f32 = 0.0;\\\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\\\ndx = gf * vx;\\\\ndy = gf * vy;\\\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\\\nvar cvx : f32 = currentNode.x - center.x;\\\\nvar cvy : f32 = currentNode.y - center.y;\\\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\\\ndx = dx + parma * cvx;\\\\ndy = dy + parma * cvy;}\\\\nreturn vec2<f32>(dx, dy);}\\\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\\\nvar dy : f32 = 0.0;\\\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\\\nvar node_buffer : vec4<f32>;\\\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\\\nvar arr_idx : i32 = arr_offset + i32(p);\\\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\\\nvar xDist : f32 = currentNode.x - nextNode.x;\\\\nvar yDist : f32 = currentNode.y - nextNode.y;\\\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\\\ndy = dy - yDist * attractiveF;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\\\ndx = dx - std::sign * attractiveF;\\\\ndy = dy - std::sign * attractiveF;}}}\\\\nreturn vec2<f32>(dx, dy);}\\\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\\\nvar dx : f32 = 0.0;\\\\nvar dy : f32 = 0.0;\\\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\\\nreturn ;}\\\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\\\ndx = dx + repulsive.x;\\\\ndy = dy + repulsive.y;\\\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\\\ndx = dx + attractive.x;\\\\ndy = dy + attractive.y;\\\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\\\ndx = dx - gravity.x;\\\\ndy = dy - gravity.y;\\\\ndx = dx * gWebGPUUniformParams.u_Speed;\\\\ndy = dy * gWebGPUUniformParams.u_Speed;\\\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\\\nreturn;}\\\\n\\\\nentry_point compute as \\\\"main\\\\" = main;\\\\n","GLSL450":"\\\\n\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\\\nivec3 workGroupSize = ivec3(1,1,1);\\\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\\\n\\\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\\\n  float u_K;\\\\n  float u_K2;\\\\n  vec2 u_Center;\\\\n  float u_Gravity;\\\\n  float u_ClusterGravity;\\\\n  float u_Speed;\\\\n  float u_MaxDisplace;\\\\n  float u_Clustering;\\\\n} gWebGPUUniformParams;\\\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\\\n  vec4 u_Data[];\\\\n} gWebGPUBuffer0;\\\\n\\\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\\\n  vec4 u_AttributeArray[];\\\\n} gWebGPUBuffer1;\\\\n\\\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\\\n  vec4 u_ClusterCenters[];\\\\n} gWebGPUBuffer2;\\\\n\\\\n\\\\n\\\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\nlayout (\\\\n  local_size_x = 1,\\\\n  local_size_y = 1,\\\\n  local_size_z = 1\\\\n) in;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\\\nfloat dy = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\\\nfloat xDist = currentNode.x - nextNode.x;\\\\nfloat yDist = currentNode.y - nextNode.y;\\\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\\\nif (dist > 0.0) {dx += param * xDist;\\\\ndy += param * yDist;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\\\ndx += param * sign;\\\\ndy += param * sign;}}}}\\\\nreturn vec2(dx, dy);}\\\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\\\nfloat dy = 0.0;\\\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\\\ndx = gf * vx;\\\\ndy = gf * vy;\\\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\\\nfloat cvx = currentNode.x - center.x;\\\\nfloat cvy = currentNode.y - center.y;\\\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\\\ndx += parma * cvx;\\\\ndy += parma * cvy;}\\\\nreturn vec2(dx, dy);}\\\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\\\nfloat dy = 0.0;\\\\nint arr_offset = int(floor(currentNode.z + 0.5));\\\\nint length = int(floor(currentNode.w + 0.5));\\\\nvec4 node_buffer;\\\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\\\nint arr_idx = arr_offset + int(p);\\\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\\\nfloat xDist = currentNode.x - nextNode.x;\\\\nfloat yDist = currentNode.y - nextNode.y;\\\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\\\ndy -= yDist * attractiveF;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\\\ndx -= sign * attractiveF;\\\\ndy -= sign * attractiveF;}}}\\\\nreturn vec2(dx, dy);}\\\\nvoid main() {int i = globalInvocationID.x;\\\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\\\nreturn ;}\\\\nvec2 repulsive = calcRepulsive(i, currentNode);\\\\ndx += repulsive.x;\\\\ndy += repulsive.y;\\\\nvec2 attractive = calcAttractive(i, currentNode);\\\\ndx += attractive.x;\\\\ndy += attractive.y;\\\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\\\ndx -= gravity.x;\\\\ndy -= gravity.y;\\\\ndx *= gWebGPUUniformParams.u_Speed;\\\\ndy *= gWebGPUUniformParams.u_Speed;\\\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\\\n","GLSL100":"\\\\n\\\\nfloat epsilon = 0.00001;\\\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\\\n  vec2 normAddr2D = float(address1D) * conv_const;\\\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\\\n}\\\\n\\\\nvoid barrier() {}\\\\n  \\\\n\\\\nuniform vec2 u_OutputTextureSize;\\\\nuniform int u_OutputTexelCount;\\\\nvarying vec2 v_TexCoord;\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n\\\\nuniform sampler2D u_Data;\\\\nuniform vec2 u_DataSize;\\\\nvec4 getDatau_Data(vec2 address2D) {\\\\n  return vec4(texture2D(u_Data, address2D).rgba);\\\\n}\\\\nvec4 getDatau_Data(float address1D) {\\\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\\\n}\\\\nvec4 getDatau_Data(int address1D) {\\\\n  return getDatau_Data(float(address1D));\\\\n}\\\\nuniform float u_K;\\\\nuniform float u_K2;\\\\nuniform vec2 u_Center;\\\\nuniform float u_Gravity;\\\\nuniform float u_ClusterGravity;\\\\nuniform float u_Speed;\\\\nuniform float u_MaxDisplace;\\\\nuniform float u_Clustering;\\\\nuniform sampler2D u_AttributeArray;\\\\nuniform vec2 u_AttributeArraySize;\\\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\\\n}\\\\nvec4 getDatau_AttributeArray(float address1D) {\\\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\\\n}\\\\nvec4 getDatau_AttributeArray(int address1D) {\\\\n  return getDatau_AttributeArray(float(address1D));\\\\n}\\\\nuniform sampler2D u_ClusterCenters;\\\\nuniform vec2 u_ClusterCentersSize;\\\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\\\n}\\\\nvec4 getDatau_ClusterCenters(float address1D) {\\\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\\\n}\\\\nvec4 getDatau_ClusterCenters(int address1D) {\\\\n  return getDatau_ClusterCenters(float(address1D));\\\\n}\\\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\\\nfloat xDist = currentNode.x - nextNode.x;\\\\nfloat yDist = currentNode.y - nextNode.y;\\\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nfloat param = u_K2 / dist;\\\\nif (dist > 0.0) {dx += param * xDist;\\\\ndy += param * yDist;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\\\ndx += param * sign;\\\\ndy += param * sign;}}}}\\\\nreturn vec2(dx, dy);}\\\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nfloat vx = currentNode.x - u_Center.x;\\\\nfloat vy = currentNode.y - u_Center.y;\\\\nfloat gf = (0.01 * u_K) * u_Gravity;\\\\ndx = gf * vx;\\\\ndy = gf * vy;\\\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\\\nfloat cvx = currentNode.x - center.x;\\\\nfloat cvy = currentNode.y - center.y;\\\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\\\ndx += parma * cvx;\\\\ndy += parma * cvy;}\\\\nreturn vec2(dx, dy);}\\\\nvec2 calcAttractive(int i, vec4 currentNode) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nint arr_offset = int(floor(currentNode.z + 0.5));\\\\nint length = int(floor(currentNode.w + 0.5));\\\\nvec4 node_buffer;\\\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\\\nint arr_idx = arr_offset + int(p);\\\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\\\nvec4 nextNode = getDatau_Data(int(float_j));\\\\nfloat xDist = currentNode.x - nextNode.x;\\\\nfloat yDist = currentNode.y - nextNode.y;\\\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nfloat attractiveF = dist / u_K;\\\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\\\ndy -= yDist * attractiveF;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\\\ndx -= sign * attractiveF;\\\\ndy -= sign * attractiveF;}}}\\\\nreturn vec2(dx, dy);}\\\\nvoid main() {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nint i = globalInvocationID.x;\\\\nvec4 currentNode = getDatau_Data(i);\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\\\nreturn ;}\\\\nvec2 repulsive = calcRepulsive(i, currentNode);\\\\ndx += repulsive.x;\\\\ndy += repulsive.y;\\\\nvec2 attractive = calcAttractive(i, currentNode);\\\\ndx += attractive.x;\\\\ndy += attractive.y;\\\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\\\ndx -= gravity.x;\\\\ndy -= gravity.y;\\\\ndx *= u_Speed;\\\\ndy *= u_Speed;\\\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\\\n  gl_FragColor = gWebGPUDebugOutput;\\\\n}}\\\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([y,1,1]).setBinding({u_Data:_,u_K:l,u_K2:f,u_Gravity:r.gravity,u_ClusterGravity:r.clusterGravity||r.gravity||1,u_Speed:h,u_MaxDisplace:c,u_Clustering:d?1:0,u_Center:u,u_AttributeArray:v,u_ClusterCenters:S,MAX_EDGE_PER_VERTEX:b,VERTEX_COUNT:y}),d&&(I=w.createKernel('{"shaders":{"WGSL":"import \\\\"GLSL.std.450\\\\" as std;\\\\n\\\\n\\\\n# var gWebGPUDebug : bool = false;\\\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\\\n\\\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\\\n\\\\n\\\\ntype GWebGPUBuffer0 = [[block]] struct {\\\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\\\ntype GWebGPUBuffer1 = [[block]] struct {\\\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\\\ntype GWebGPUBuffer2 = [[block]] struct {\\\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\\\nvar sumx : f32 = 0.0;\\\\nvar sumy : f32 = 0.0;\\\\nvar count : f32 = 0.0;\\\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\\\nvar clusterIdx : i32 = i32(attributes.x);\\\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\\\nsumy = sumy + vertex.y;\\\\ncount = count + 1.0;}}\\\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\\\nreturn;}\\\\n\\\\nentry_point compute as \\\\"main\\\\" = main;\\\\n","GLSL450":"\\\\n\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\\\nivec3 workGroupSize = ivec3(1,1,1);\\\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\\\n\\\\n\\\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\\\n  vec4 u_Data[];\\\\n} gWebGPUBuffer0;\\\\n\\\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\\\n  vec4 u_NodeAttributes[];\\\\n} gWebGPUBuffer1;\\\\n\\\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\\\n  vec4 u_ClusterCenters[];\\\\n} gWebGPUBuffer2;\\\\n\\\\n\\\\n\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\\\nlayout (\\\\n  local_size_x = 1,\\\\n  local_size_y = 1,\\\\n  local_size_z = 1\\\\n) in;\\\\n\\\\n\\\\n\\\\nvoid main() {int i = globalInvocationID.x;\\\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\\\nfloat sumx = 0.0;\\\\nfloat sumy = 0.0;\\\\nfloat count = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\\\nint clusterIdx = int(attributes.x);\\\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\\\nif (clusterIdx == i) {sumx += vertex.x;\\\\nsumy += vertex.y;\\\\ncount += 1.0;}}\\\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\\\n","GLSL100":"\\\\n\\\\nfloat epsilon = 0.00001;\\\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\\\n  vec2 normAddr2D = float(address1D) * conv_const;\\\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\\\n}\\\\n\\\\nvoid barrier() {}\\\\n  \\\\n\\\\nuniform vec2 u_OutputTextureSize;\\\\nuniform int u_OutputTexelCount;\\\\nvarying vec2 v_TexCoord;\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\\\n\\\\nuniform sampler2D u_Data;\\\\nuniform vec2 u_DataSize;\\\\nvec4 getDatau_Data(vec2 address2D) {\\\\n  return vec4(texture2D(u_Data, address2D).rgba);\\\\n}\\\\nvec4 getDatau_Data(float address1D) {\\\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\\\n}\\\\nvec4 getDatau_Data(int address1D) {\\\\n  return getDatau_Data(float(address1D));\\\\n}\\\\nuniform sampler2D u_NodeAttributes;\\\\nuniform vec2 u_NodeAttributesSize;\\\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\\\n}\\\\nvec4 getDatau_NodeAttributes(float address1D) {\\\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\\\n}\\\\nvec4 getDatau_NodeAttributes(int address1D) {\\\\n  return getDatau_NodeAttributes(float(address1D));\\\\n}\\\\nuniform sampler2D u_ClusterCenters;\\\\nuniform vec2 u_ClusterCentersSize;\\\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\\\n}\\\\nvec4 getDatau_ClusterCenters(float address1D) {\\\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\\\n}\\\\nvec4 getDatau_ClusterCenters(int address1D) {\\\\n  return getDatau_ClusterCenters(float(address1D));\\\\n}\\\\nvoid main() {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nint i = globalInvocationID.x;\\\\nvec4 center = getDatau_ClusterCenters(i);\\\\nfloat sumx = 0.0;\\\\nfloat sumy = 0.0;\\\\nfloat count = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\\\nint clusterIdx = int(attributes.x);\\\\nvec4 vertex = getDatau_Data(j);\\\\nif (clusterIdx == i) {sumx += vertex.x;\\\\nsumy += vertex.y;\\\\ncount += 1.0;}}\\\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\\\n  gl_FragColor = gWebGPUDebugOutput;\\\\n}}\\\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([m,1,1]).setBinding({u_Data:_,u_NodeAttributes:v,u_ClusterCenters:S,VERTEX_COUNT:y,CLUSTER_COUNT:m})),k=function(){return Ev(O,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=0;case 1:if(!(r<a)){n.next=13;break}return n.next=4,A.execute();case 4:if(!d){n.next=9;break}return I.setBinding({u_Data:A}),n.next=8,I.execute();case 8:A.setBinding({u_ClusterCenters:I});case 9:A.setBinding({u_MaxDisplace:c*=.99});case 10:r++,n.next=1;break;case 13:return n.next=15,A.getOutput();case 15:i=n.sent,t?e.postMessage({type:Qt,vertexEdgeData:i}):o.forEach((function(t,e){var n=i[4*e],r=i[4*e+1];t.x=n,t.y=r})),E&&E();case 18:case"end":return n.stop()}}),n)})))},n.next=24,k();case 24:case"end":return n.stop()}}),n,this)})))}},{key:"getType",value:function(){return"fruchterman-gpu"}}])&&gv(e.prototype,n),r&&gv(e,r),i}(I);function Tv(t){return(Tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Av(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Iv(t,e){return(Iv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Dv(t);if(e){var o=Dv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ov(this,n)}}function Ov(t,e){return!e||"object"!==Tv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dv(t){return(Dv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Rv=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},Mv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Iv(t,e)}(i,t);var e,n,r,o=kv(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.edgeStrength=200,e.nodeStrength=1e3,e.coulombDisScale=.005,e.damping=.9,e.maxSpeed=1e3,e.minMovement=1,e.interval=.02,e.factor=1,e.linkDistance=1,e.gravity=10,e.workerEnabled=!1,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return Rv(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,r,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=(e=this).nodes)&&0!==n.length){t.next=5;break}return e.onLayoutEnd&&e.onLayoutEnd(),t.abrupt("return");case 5:if(e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]),r=e.center,1!==n.length){t.next=14;break}return n[0].x=r[0],n[0].y=r[1],e.onLayoutEnd&&e.onLayoutEnd(),t.abrupt("return");case 14:return o={},i={},n.forEach((function(t,n){y(t.x)||(t.x=Math.random()*e.width),y(t.y)||(t.y=Math.random()*e.height),o[t.id]=t,i[t.id]=n})),e.nodeMap=o,e.nodeIdxMap=i,e.nodeStrength=hv(e.nodeStrength,1),e.edgeStrength=hv(e.edgeStrength,1),t.next=23,e.run();case 23:case"end":return t.stop()}}),t,this)})))}},{key:"executeWithWorker",value:function(t,e){var n=this,r=n.nodes,o=n.center;if(r&&0!==r.length){if(1===r.length)return r[0].x=o[0],void(r[0].y=o[1]);var i={},a={};r.forEach((function(t,e){y(t.x)||(t.x=Math.random()*n.width),y(t.y)||(t.y=Math.random()*n.height),i[t.id]=t,a[t.id]=e})),n.nodeMap=i,n.nodeIdxMap=a,n.nodeStrength=hv(n.nodeStrength,1),n.edgeStrength=hv(n.edgeStrength,1),n.run(t,e)}}},{key:"run",value:function(t,e){return Rv(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,i,a,u,s,c,f,l,h,d,p,v,m,g,_,x,w,E,S,T,A,I,k,O,D=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(o=(r=this).nodes,i=r.edges,a=r.maxIteration,r.width||"undefined"==typeof window||(r.width=window.innerWidth),r.height||"undefined"==typeof window||(r.height=window.innerHeight),u=o.length,r.linkDistance=hv(r.linkDistance),r.edgeStrength=hv(r.edgeStrength),s=pv(o,i,r.linkDistance,r.edgeStrength),c=s.maxEdgePerVetex,f=s.array,r.degrees=b(o.length,r.nodeIdxMap,i),l=[],h=[],d=[],p=[],v=[],r.getMass||(r.getMass=function(t){return r.degrees[r.nodeIdxMap[t.id]]||1}),m=r.gravity,g=r.center,o.forEach((function(t,e){l.push(r.getMass(t)),h.push(r.nodeStrength(t)),r.degrees[e]||(r.degrees[e]=0);var n=[g[0],g[1],m];if(r.getCenter){var o=r.getCenter(t,r.degrees[e]);o&&y(o[0])&&y(o[1])&&y(o[2])&&(n=o)}d.push(n[0]),p.push(n[1]),v.push(n[2])})),_=mv([l,r.degrees,h]),x=mv([d,p,v]),w=r.workerEnabled,E=w?lv.create({canvas:t,engineOptions:{supportCompute:!0}}):lv.create({engineOptions:{supportCompute:!0}}),S=r.onLayoutEnd,T=[],f.forEach((function(t){T.push(t)})),A=0;A<4;A++)T.push(0);return I=E.createKernel('{"shaders":{"WGSL":"import \\\\"GLSL.std.450\\\\" as std;\\\\n\\\\n\\\\n# var gWebGPUDebug : bool = false;\\\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\\\n\\\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\\\n\\\\ntype GWebGPUParams = [[block]] struct {\\\\n  [[offset 0]] u_damping : f32;\\\\n  [[offset 4]] u_maxSpeed : f32;\\\\n  [[offset 8]] u_minMovement : f32;\\\\n  \\\\n  [[offset 12]] u_coulombDisScale : f32;\\\\n  [[offset 16]] u_factor : f32;\\\\n  \\\\n  \\\\n  [[offset 20]] u_interval : f32;\\\\n};\\\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\\\ntype GWebGPUBuffer0 = [[block]] struct {\\\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\\\ntype GWebGPUBuffer1 = [[block]] struct {\\\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\\\ntype GWebGPUBuffer2 = [[block]] struct {\\\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\\\ntype GWebGPUBuffer3 = [[block]] struct {\\\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\\\nvar v0 : i32 = packedIntValue / 1048576;\\\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\\\nvar ay : f32 = 0.0;\\\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\\\nvar vx : f32 = currentNode.x - nextNode.x;\\\\nvar vy : f32 = currentNode.y - nextNode.y;\\\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nvar n_dist : f32 = dist * gWebGPUUniformParams.u_coulombDisScale;\\\\nvar direx : f32 = vx / dist;\\\\nvar direy : f32 = vy / dist;\\\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\\\nvar massi : f32 = attributesi.x;\\\\nvar nodeStrengthi : f32 = attributesi.z;\\\\nvar nodeStrengthj : f32 = attributesj.z;\\\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\\\nvar param : f32 = (1000.0 * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\\\nax = ax + direx * param;\\\\nay = ay + direy * param;}}\\\\nreturn vec2<f32>(ax, ay);}\\\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\\\nvar vy : f32 = currentNode.y - attributes2.y;\\\\nvar ax : f32 = vx * attributes2.w;\\\\nvar ay : f32 = vy * attributes2.w;\\\\nreturn vec2<f32>(ax, ay);}\\\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\\\nvar ax : f32 = 0.0;\\\\nvar ay : f32 = 0.0;\\\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\\\nvar length : i32 = compressed.x;\\\\nvar arr_offset : i32 = compressed.y;\\\\nvar node_buffer : vec4<f32>;\\\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\\\nvar arr_idx : i32 = arr_offset + (4 * p);\\\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\\\nvar float_j : f32 = node_buffer.x;\\\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\\\nvar vx : f32 = nextNode.x - currentNode.x;\\\\nvar vy : f32 = nextNode.y - currentNode.y;\\\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nvar direx : f32 = vx / dist;\\\\nvar direy : f32 = vy / dist;\\\\nvar edgeLength : f32 = node_buffer.y;\\\\nvar edgeStrength : f32 = node_buffer.z;\\\\nvar diff : f32 = edgeLength - dist;\\\\nvar param : f32 = (diff * edgeStrength) / mass;\\\\nax = ax - direx * param;\\\\nay = ay - direy * param;}\\\\nreturn vec2<f32>(ax, ay);}\\\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\\\nvar ax : f32 = 0.0;\\\\nvar ay : f32 = 0.0;\\\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\\\nreturn ;}\\\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\\\nax = ax + repulsive.x;\\\\nay = ay + repulsive.y;\\\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\\\nax = ax + attractive.x;\\\\nay = ay + attractive.y;\\\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\\\nax = ax - gravity.x;\\\\nay = ay - gravity.y;\\\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\\\nvar vx : f32 = ax * param;\\\\nvar vy : f32 = ay * param;\\\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\\\nvx = param2 * vx;\\\\nvy = param2 * vy;}\\\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);\\\\nreturn;}\\\\n\\\\nentry_point compute as \\\\"main\\\\" = main;\\\\n","GLSL450":"\\\\n\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\\\nivec3 workGroupSize = ivec3(1,1,1);\\\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\\\n\\\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\\\n  float u_damping;\\\\n  float u_maxSpeed;\\\\n  float u_minMovement;\\\\n  \\\\n  float u_coulombDisScale;\\\\n  float u_factor;\\\\n  \\\\n  \\\\n  float u_interval;\\\\n} gWebGPUUniformParams;\\\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\\\n  vec4 u_Data[];\\\\n} gWebGPUBuffer0;\\\\n\\\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\\\n  vec4 u_AveMovement[];\\\\n} gWebGPUBuffer1;\\\\n\\\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\\\n  vec4 u_NodeAttributeArray1[];\\\\n} gWebGPUBuffer2;\\\\n\\\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\\\n  vec4 u_NodeAttributeArray2[];\\\\n} gWebGPUBuffer3;\\\\n\\\\n\\\\n\\\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n#define SHIFT_20 1048576.0\\\\nlayout (\\\\n  local_size_x = 1,\\\\n  local_size_y = 1,\\\\n  local_size_z = 1\\\\n) in;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\\\nint v0 = packedIntValue / int(SHIFT_20);\\\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\\\nfloat ay = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\\\nfloat vx = currentNode.x - nextNode.x;\\\\nfloat vy = currentNode.y - nextNode.y;\\\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nfloat n_dist = dist * gWebGPUUniformParams.u_coulombDisScale;\\\\nfloat direx = vx / dist;\\\\nfloat direy = vy / dist;\\\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\\\nfloat massi = attributesi.x;\\\\nfloat nodeStrengthi = attributesi.z;\\\\nfloat nodeStrengthj = attributesj.z;\\\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\\\nfloat param = (1000.0 * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\\\nax += direx * param;\\\\nay += direy * param;}}\\\\nreturn vec2(ax, ay);}\\\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\\\nfloat vy = currentNode.y - attributes2.y;\\\\nfloat ax = vx * attributes2.w;\\\\nfloat ay = vy * attributes2.w;\\\\nreturn vec2(ax, ay);}\\\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nivec2 compressed = unpack_float(currentNode.z);\\\\nint length = compressed.x;\\\\nint arr_offset = compressed.y;\\\\nvec4 node_buffer;\\\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\\\nint arr_idx = arr_offset + (4 * p);\\\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\\\nfloat float_j = node_buffer.x;\\\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\\\nfloat vx = nextNode.x - currentNode.x;\\\\nfloat vy = nextNode.y - currentNode.y;\\\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nfloat direx = vx / dist;\\\\nfloat direy = vy / dist;\\\\nfloat edgeLength = node_buffer.y;\\\\nfloat edgeStrength = node_buffer.z;\\\\nfloat diff = edgeLength - dist;\\\\nfloat param = (diff * edgeStrength) / mass;\\\\nax -= direx * param;\\\\nay -= direy * param;}\\\\nreturn vec2(ax, ay);}\\\\nvoid main() {int i = globalInvocationID.x;\\\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\\\nreturn ;}\\\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\\\nvec2 repulsive = calcRepulsive(i, currentNode);\\\\nax += repulsive.x;\\\\nay += repulsive.y;\\\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\\\nax += attractive.x;\\\\nay += attractive.y;\\\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\\\nax -= gravity.x;\\\\nay -= gravity.y;\\\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\\\nfloat vx = ax * param;\\\\nfloat vy = ay * param;\\\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\\\nvx = param2 * vx;\\\\nvy = param2 * vy;}\\\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\\\n","GLSL100":"\\\\n\\\\nfloat epsilon = 0.00001;\\\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\\\n  vec2 normAddr2D = float(address1D) * conv_const;\\\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\\\n}\\\\n\\\\nvoid barrier() {}\\\\n  \\\\n\\\\nuniform vec2 u_OutputTextureSize;\\\\nuniform int u_OutputTexelCount;\\\\nvarying vec2 v_TexCoord;\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n#define SHIFT_20 1048576.0\\\\n\\\\nuniform sampler2D u_Data;\\\\nuniform vec2 u_DataSize;\\\\nvec4 getDatau_Data(vec2 address2D) {\\\\n  return vec4(texture2D(u_Data, address2D).rgba);\\\\n}\\\\nvec4 getDatau_Data(float address1D) {\\\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\\\n}\\\\nvec4 getDatau_Data(int address1D) {\\\\n  return getDatau_Data(float(address1D));\\\\n}\\\\nuniform float u_damping;\\\\nuniform float u_maxSpeed;\\\\nuniform float u_minMovement;\\\\nuniform sampler2D u_AveMovement;\\\\nuniform vec2 u_AveMovementSize;\\\\nvec4 getDatau_AveMovement(vec2 address2D) {\\\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\\\n}\\\\nvec4 getDatau_AveMovement(float address1D) {\\\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\\\n}\\\\nvec4 getDatau_AveMovement(int address1D) {\\\\n  return getDatau_AveMovement(float(address1D));\\\\n}\\\\nuniform float u_coulombDisScale;\\\\nuniform float u_factor;\\\\nuniform sampler2D u_NodeAttributeArray1;\\\\nuniform vec2 u_NodeAttributeArray1Size;\\\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\\\n}\\\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\\\n}\\\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\\\n  return getDatau_NodeAttributeArray1(float(address1D));\\\\n}\\\\nuniform sampler2D u_NodeAttributeArray2;\\\\nuniform vec2 u_NodeAttributeArray2Size;\\\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\\\n}\\\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\\\n}\\\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\\\n  return getDatau_NodeAttributeArray2(float(address1D));\\\\n}\\\\nuniform float u_interval;\\\\nivec2 unpack_float(float packedValue) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nint packedIntValue = int(packedValue);\\\\nint v0 = packedIntValue / int(SHIFT_20);\\\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\\\nfloat vx = currentNode.x - nextNode.x;\\\\nfloat vy = currentNode.y - nextNode.y;\\\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nfloat n_dist = dist * u_coulombDisScale;\\\\nfloat direx = vx / dist;\\\\nfloat direy = vy / dist;\\\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\\\nfloat massi = attributesi.x;\\\\nfloat nodeStrengthi = attributesi.z;\\\\nfloat nodeStrengthj = attributesj.z;\\\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\\\nfloat param = (1000.0 * u_factor) / (n_dist * n_dist);\\\\nax += direx * param;\\\\nay += direy * param;}}\\\\nreturn vec2(ax, ay);}\\\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat vx = currentNode.x - attributes2.x;\\\\nfloat vy = currentNode.y - attributes2.y;\\\\nfloat ax = vx * attributes2.w;\\\\nfloat ay = vy * attributes2.w;\\\\nreturn vec2(ax, ay);}\\\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat mass = attributes1.x;\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nivec2 compressed = unpack_float(currentNode.z);\\\\nint length = compressed.x;\\\\nint arr_offset = compressed.y;\\\\nvec4 node_buffer;\\\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\\\nint arr_idx = arr_offset + (4 * p);\\\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\\\nfloat float_j = node_buffer.x;\\\\nvec4 nextNode = getDatau_Data(int(float_j));\\\\nfloat vx = nextNode.x - currentNode.x;\\\\nfloat vy = nextNode.y - currentNode.y;\\\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nfloat direx = vx / dist;\\\\nfloat direy = vy / dist;\\\\nfloat edgeLength = node_buffer.y;\\\\nfloat edgeStrength = node_buffer.z;\\\\nfloat diff = edgeLength - dist;\\\\nfloat param = (diff * edgeStrength) / mass;\\\\nax -= direx * param;\\\\nay -= direy * param;}\\\\nreturn vec2(ax, ay);}\\\\nvoid main() {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nint i = globalInvocationID.x;\\\\nvec4 currentNode = getDatau_Data(i);\\\\nvec4 movement = getDatau_AveMovement(0.0);\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\\\nreturn ;}\\\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\\\nvec2 repulsive = calcRepulsive(i, currentNode);\\\\nax += repulsive.x;\\\\nay += repulsive.y;\\\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\\\nax += attractive.x;\\\\nay += attractive.y;\\\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\\\nax -= gravity.x;\\\\nay -= gravity.y;\\\\nfloat param = u_interval * u_damping;\\\\nfloat vx = ax * param;\\\\nfloat vy = ay * param;\\\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\\\nvx = param2 * vx;\\\\nvy = param2 * vy;}\\\\nfloat distx = vx * u_interval;\\\\nfloat disty = vy * u_interval;\\\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));if (gWebGPUDebug) {\\\\n  gl_FragColor = gWebGPUDebugOutput;\\\\n}}\\\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([u,1,1]).setBinding({u_Data:f,u_damping:r.damping,u_maxSpeed:r.maxSpeed,u_minMovement:r.minMovement,u_coulombDisScale:r.coulombDisScale,u_factor:r.factor,u_NodeAttributeArray1:_,u_NodeAttributeArray2:x,MAX_EDGE_PER_VERTEX:c,VERTEX_COUNT:u,u_AveMovement:T,u_interval:r.interval}),k=E.createKernel('{"shaders":{"WGSL":"import \\\\"GLSL.std.450\\\\" as std;\\\\n\\\\n\\\\n# var gWebGPUDebug : bool = false;\\\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\\\n\\\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\\\n\\\\ntype GWebGPUParams = [[block]] struct {\\\\n  [[offset 0]] u_iter : f32;\\\\n};\\\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\\\ntype GWebGPUBuffer0 = [[block]] struct {\\\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\\\ntype GWebGPUBuffer1 = [[block]] struct {\\\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nfn main() -> void {var movement : f32 = 0.0;\\\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\\\nmovement = movement + vertex.w;}\\\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\\\nreturn;}\\\\n\\\\nentry_point compute as \\\\"main\\\\" = main;\\\\n","GLSL450":"\\\\n\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\\\nivec3 workGroupSize = ivec3(1,1,1);\\\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\\\n\\\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\\\n  float u_iter;\\\\n} gWebGPUUniformParams;\\\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\\\n  vec4 u_Data[];\\\\n} gWebGPUBuffer0;\\\\n\\\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\\\n  vec4 u_AveMovement[];\\\\n} gWebGPUBuffer1;\\\\n\\\\n\\\\n\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\nlayout (\\\\n  local_size_x = 1,\\\\n  local_size_y = 1,\\\\n  local_size_z = 1\\\\n) in;\\\\n\\\\n\\\\n\\\\nvoid main() {float movement = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\\\nmovement += vertex.w;}\\\\nmovement = movement / float(VERTEX_COUNT);\\\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\\\n","GLSL100":"\\\\n\\\\nfloat epsilon = 0.00001;\\\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\\\n  vec2 normAddr2D = float(address1D) * conv_const;\\\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\\\n}\\\\n\\\\nvoid barrier() {}\\\\n  \\\\n\\\\nuniform vec2 u_OutputTextureSize;\\\\nuniform int u_OutputTexelCount;\\\\nvarying vec2 v_TexCoord;\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n\\\\nuniform sampler2D u_Data;\\\\nuniform vec2 u_DataSize;\\\\nvec4 getDatau_Data(vec2 address2D) {\\\\n  return vec4(texture2D(u_Data, address2D).rgba);\\\\n}\\\\nvec4 getDatau_Data(float address1D) {\\\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\\\n}\\\\nvec4 getDatau_Data(int address1D) {\\\\n  return getDatau_Data(float(address1D));\\\\n}\\\\nuniform float u_iter;\\\\nuniform sampler2D u_AveMovement;\\\\nuniform vec2 u_AveMovementSize;\\\\nvec4 getDatau_AveMovement(vec2 address2D) {\\\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\\\n}\\\\nvec4 getDatau_AveMovement(float address1D) {\\\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\\\n}\\\\nvec4 getDatau_AveMovement(int address1D) {\\\\n  return getDatau_AveMovement(float(address1D));\\\\n}\\\\nvoid main() {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat movement = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\\\nmovement += vertex.w;}\\\\nmovement = movement / float(VERTEX_COUNT);\\\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\\\n  gl_FragColor = gWebGPUDebugOutput;\\\\n}}\\\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([1,1,1]).setBinding({u_Data:f,VERTEX_COUNT:u,u_AveMovement:[0,0,0,0]}),O=function(){return Rv(D,void 0,void 0,regeneratorRuntime.mark((function n(){var i,u,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=0;case 1:if(!(i<a)){n.next=12;break}return n.next=4,I.execute();case 4:return k.setBinding({u_Data:I}),n.next=7,k.execute();case 7:u=Math.max(.02,r.interval-.002*i),I.setBinding({u_interval:u,u_AveMovement:k});case 9:i++,n.next=1;break;case 12:return n.next=14,I.getOutput();case 14:s=n.sent,t?e.postMessage({type:Qt,vertexEdgeData:s}):o.forEach((function(t,e){var n=s[4*e],r=s[4*e+1];t.x=n,t.y=r})),S&&S();case 17:case"end":return n.stop()}}),n)})))},n.next=33,O();case 33:case"end":return n.stop()}}),n,this)})))}},{key:"getType",value:function(){return"gForce-gpu"}}])&&Av(e.prototype,n),r&&Av(e,r),i}(I);function Cv(t){return(Cv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pv(t,e){return(Pv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Lv(t);if(e){var o=Lv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return jv(this,n)}}function jv(t,e){return!e||"object"!==Cv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Lv(t){return(Lv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Uv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pv(t,e)}(i,t);var e,n,r,o=Gv(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).center=[0,0],e.maxIteration=100,e.gravity=10,e.comboGravity=10,e.linkDistance=10,e.alpha=1,e.alphaMin=.001,e.alphaDecay=1-Math.pow(e.alphaMin,1/300),e.alphaTarget=0,e.velocityDecay=.6,e.edgeStrength=.6,e.nodeStrength=30,e.preventOverlap=!1,e.preventNodeOverlap=!1,e.preventComboOverlap=!1,e.collideStrength=void 0,e.nodeCollideStrength=.5,e.comboCollideStrength=.5,e.comboSpacing=20,e.comboPadding=10,e.optimizeRangeFactor=1,e.onTick=function(){},e.onLayoutEnd=function(){},e.depthAttractiveForceScale=1,e.depthRepulsiveForceScale=2,e.nodes=[],e.edges=[],e.combos=[],e.comboTrees=[],e.width=300,e.height=300,e.bias=[],e.nodeMap={},e.oriComboMap={},e.indexMap={},e.comboMap={},e.previousLayouted=!1,e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}},{key:"execute",value:function(){var t=this.nodes,e=this.center;if(this.comboTree={id:"comboTreeRoot",depth:-1,children:this.comboTrees},t&&0!==t.length){if(1===t.length)return t[0].x=e[0],t[0].y=e[1],void(this.onLayoutEnd&&this.onLayoutEnd());this.initVals(),this.run(),this.onLayoutEnd&&this.onLayoutEnd()}else this.onLayoutEnd&&this.onLayoutEnd()}},{key:"run",value:function(){var t=this,e=t.nodes,n=t.previousLayouted?t.maxIteration/5:t.maxIteration;t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);var r=t.center,o=t.velocityDecay,i=t.comboMap;t.previousLayouted||t.initPos(i);for(var a=function(n){var r=[];e.forEach((function(t,e){r[e]={x:0,y:0}})),t.applyCalculate(r),t.applyComboCenterForce(r),e.forEach((function(t,e){y(t.x)&&y(t.y)&&(t.x+=r[e].x*o,t.y+=r[e].y*o)})),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()},u=0;u<n;u++)a();var s=[0,0];e.forEach((function(t){y(t.x)&&y(t.y)&&(s[0]+=t.x,s[1]+=t.y)})),s[0]/=e.length,s[1]/=e.length;var c=[r[0]-s[0],r[1]-s[1]];e.forEach((function(t,e){y(t.x)&&y(t.y)&&(t.x+=c[0],t.y+=c[1])})),t.combos.forEach((function(t){var e=i[t.id];e&&e.empty&&(t.x=e.cx||t.x,t.y=e.cy||t.y)})),t.previousLayouted=!0}},{key:"initVals",value:function(){var t=this.edges,e=this.nodes,n=this.combos,r={},o={},i={};e.forEach((function(t,e){o[t.id]=t,i[t.id]=e})),this.nodeMap=o,this.indexMap=i;var a={};n.forEach((function(t){a[t.id]=t})),this.oriComboMap=a,this.comboMap=this.getComboMap();var u=this.preventOverlap;this.preventComboOverlap=this.preventComboOverlap||u,this.preventNodeOverlap=this.preventNodeOverlap||u;var s=this.collideStrength;s&&(this.comboCollideStrength=s,this.nodeCollideStrength=s),this.comboCollideStrength=this.comboCollideStrength?this.comboCollideStrength:0,this.nodeCollideStrength=this.nodeCollideStrength?this.nodeCollideStrength:0;for(var c=0;c<t.length;++c)r[t[c].source]?r[t[c].source]++:r[t[c].source]=1,r[t[c].target]?r[t[c].target]++:r[t[c].target]=1;for(var f=[],l=0;l<t.length;++l)f[l]=r[t[l].source]/(r[t[l].source]+r[t[l].target]);this.bias=f;var h,d,p=this.nodeSize,v=this.nodeSpacing;if(d=y(v)?function(){return v}:T(v)?v:function(){return 0},this.nodeSpacing=d,p)if(T(p))h=function(t){return p(t)};else if(m(p)){var g=(p[0]>p[1]?p[0]:p[1])/2;h=function(t){return g}}else{var b=p/2;h=function(t){return b}}else h=function(t){return t.size?m(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2:t.size/2:10};this.nodeSize=h;var _,x=this.comboSpacing;_=y(x)?function(){return x}:T(x)?x:function(){return 0},this.comboSpacing=_;var w,E=this.comboPadding;w=y(E)?function(){return E}:m(E)?function(){return Math.max.apply(null,E)}:T(E)?E:function(){return 0},this.comboPadding=w;var S,A=this.linkDistance;A||(A=10),S=y(A)?function(t){return A}:A,this.linkDistance=S;var I,k=this.edgeStrength;k||(k=1),I=y(k)?function(t){return k}:k,this.edgeStrength=I;var O,D=this.nodeStrength;D||(D=30),O=y(D)?function(t){return D}:D,this.nodeStrength=O}},{key:"initPos",value:function(t){this.nodes.forEach((function(e,n){var r=e.comboId,o=t[r];r&&o?(e.x=o.cx+100/(n+1),e.y=o.cy+100/(n+1)):(e.x=100/(n+1),e.y=100/(n+1))}))}},{key:"getComboMap",value:function(){var t=this,e=t.nodeMap,n=t.indexMap,r=t.comboTrees,o=t.oriComboMap,i={};return(r||[]).forEach((function(r){var a=[];w(r,(function(r){if("node"===r.itemType)return!0;if(!o[r.id])return!0;if(void 0===i[r.id]){var u={id:r.id,name:r.id,cx:0,cy:0,count:0,depth:t.oriComboMap[r.id].depth,children:[]};i[r.id]=u}var s=r.children;s&&s.forEach((function(t){if(!i[t.id]&&!e[t.id])return!0;a.push(t)}));var c=i[r.id];if(c.cx=0,c.cy=0,0===a.length){c.empty=!0;var f=o[r.id],l=Object.keys(e).length,h="".concat(r.id,"-visual-child-").concat(l),d={id:h,x:f.x,y:f.y,depth:c.depth+1,itemType:"node"};t.nodes.push(d),e[h]=d,n[h]=l,c.cx=f.x,c.cy=f.y,a.push(d)}return a.forEach((function(t){if(c.count++,"node"!==t.itemType){var n=i[t.id];return y(n.cx)&&(c.cx+=n.cx),void(y(n.cy)&&(c.cy+=n.cy))}var r=e[t.id];r&&(y(r.x)&&(c.cx+=r.x),y(r.y)&&(c.cy+=r.y))})),c.cx/=c.count,c.cy/=c.count,c.children=a,!0}))})),i}},{key:"applyComboCenterForce",value:function(t){var e=this.gravity,n=this.comboGravity||e,r=this.alpha,o=this.comboTrees,i=this.indexMap,a=this.nodeMap,u=this.comboMap;(o||[]).forEach((function(e){w(e,(function(e){if("node"===e.itemType)return!0;if(!u[e.id])return!0;var o=u[e.id],s=(o.depth+1)/10*.5,c=o.cx,f=o.cy;return o.cx=0,o.cy=0,o.children.forEach((function(e){if("node"!==e.itemType){var l=u[e.id];return l&&y(l.cx)&&(o.cx+=l.cx),void(l&&y(l.cy)&&(o.cy+=l.cy))}var h=a[e.id],d=h.x-c||.005,p=h.y-f||.005,v=Math.sqrt(d*d+p*p),m=i[h.id],g=n*r/v*s;t[m].x-=d*g,t[m].y-=p*g,y(h.x)&&(o.cx+=h.x),y(h.y)&&(o.cy+=h.y)})),o.cx/=o.count,o.cy/=o.count,!0}))}))}},{key:"applyCalculate",value:function(t){var e=this.comboMap,n=this.nodes,r={};n.forEach((function(t,e){n.forEach((function(n,o){if(!(e<o)){var i=t.x-n.x||.005,a=t.y-n.y||.005,u=i*i+a*a,s=Math.sqrt(u);u<1&&(u=s),r["".concat(t.id,"-").concat(n.id)]={vx:i,vy:a,vl2:u,vl:s},r["".concat(n.id,"-").concat(t.id)]={vl2:u,vl:s,vx:-i,vy:-a}}}))})),this.updateComboSizes(e),this.calRepulsive(t,r),this.calAttractive(t,r),this.preventComboOverlap&&this.comboNonOverlapping(t,e)}},{key:"updateComboSizes",value:function(t){var e=this,n=e.comboTrees,r=e.nodeMap,o=e.nodeSize,i=e.comboSpacing,a=e.comboPadding;(n||[]).forEach((function(n){var u=[];w(n,(function(n){if("node"===n.itemType)return!0;var s=t[n.id];if(!s)return!1;var c=n.children;c&&c.forEach((function(e){(t[e.id]||r[e.id])&&u.push(e)})),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0,u.forEach((function(t){if("node"!==t.itemType)return!0;var e=r[t.id];if(!e)return!0;var n=o(e),i=e.x-n,a=e.y-n,u=e.x+n,c=e.y+n;s.minX>i&&(s.minX=i),s.minY>a&&(s.minY=a),s.maxX<u&&(s.maxX=u),s.maxY<c&&(s.maxY=c)}));var f=e.oriComboMap[n.id].size||10;m(f)&&(f=f[0]);var l=Math.max(s.maxX-s.minX,s.maxY-s.minY,f);return s.r=l/2+i(s)/2+a(s),!0}))}))}},{key:"comboNonOverlapping",value:function(t,e){var n=this.comboTree,r=this.comboCollideStrength,o=this.indexMap,i=this.nodeMap;w(n,(function(n){if(!e[n.id]&&!i[n.id]&&"comboTreeRoot"!==n.id)return!1;var a=n.children;return a&&a.length>1&&a.forEach((function(n,u){if("node"===n.itemType)return!1;var s=e[n.id];s&&a.forEach((function(a,c){if(u<=c)return!1;if("node"===a.itemType)return!1;var f=e[a.id];if(!f)return!1;var l=s.cx-f.cx||.005,h=s.cy-f.cy||.005,d=l*l+h*h,p=s.r,v=f.r,m=p+v,y=v*v,g=p*p;if(d<m*m){var b=n.children;if(!b||0===b.length)return!1;var _=a.children;if(!_||0===_.length)return!1;var x=Math.sqrt(d),w=(m-x)/x*r,E=l*w,S=h*w,T=y/(g+y),A=1-T;b.forEach((function(e){if("node"!==e.itemType)return!1;if(i[e.id]){var n=o[e.id];_.forEach((function(e){if("node"!==e.itemType)return!1;if(!i[e.id])return!1;var r=o[e.id];t[n].x+=E*T,t[n].y+=S*T,t[r].x-=E*A,t[r].y-=S*A}))}}))}}))})),!0}))}},{key:"calRepulsive",value:function(t,e){var n=this,r=n.nodes,o=n.width*n.optimizeRangeFactor,i=n.nodeStrength,a=n.alpha,u=n.nodeCollideStrength,s=n.preventNodeOverlap,c=n.nodeSize,f=n.nodeSpacing,l=n.depthRepulsiveForceScale,h=n.center;r.forEach((function(d,p){if(d.x&&d.y){if(h){var v=n.gravity,m=d.x-h[0]||.005,y=d.y-h[1]||.005,g=Math.sqrt(m*m+y*y);t[p].x-=m*v*a/g,t[p].y-=y*v*a/g}r.forEach((function(n,r){if(p!==r&&n.x&&n.y){var h=e["".concat(d.id,"-").concat(n.id)],v=h.vl2,m=h.vl;if(!(m>o)){var y=e["".concat(d.id,"-").concat(n.id)],g=y.vx,b=y.vy,_=Math.log(Math.abs(n.depth-d.depth)/10)+1||1;_=_<1?1:_,n.comboId!==d.comboId&&(_+=1);var x=_?Math.pow(l,_):1,w=i(n)*a/v*x;if(t[p].x+=g*w,t[p].y+=b*w,p<r&&s){var E=c(d)+f(d),S=c(n)+f(n),T=E+S;if(v<T*T){var A=(T-m)/m*u,I=S*S,k=I/(E*E+I),O=g*A,D=b*A;t[p].x+=O*k,t[p].y+=D*k,k=1-k,t[r].x-=O*k,t[r].y-=D*k}}}}}))}}))}},{key:"calAttractive",value:function(t,e){var n=this,r=n.edges,o=n.linkDistance,i=n.alpha,a=n.edgeStrength,u=n.bias,s=n.depthAttractiveForceScale;r.forEach((function(r,c){if(r.source&&r.target&&r.source!==r.target){var f=n.indexMap[r.source],l=n.indexMap[r.target],h=n.nodeMap[r.source],d=n.nodeMap[r.target];if(h&&d){var p=Math.log(Math.abs(h.depth-d.depth)/10);h.comboId===d.comboId&&(p/=2);var v=p?Math.pow(s,p):1;if(h.comboId!==d.comboId&&1===v?v=s/2:h.comboId===d.comboId&&(v=2),y(d.x)&&y(h.x)&&y(d.y)&&y(h.y)){var m=e["".concat(r.target,"-").concat(r.source)],g=m.vl,b=m.vx,_=m.vy,x=(g-o(r))/g*i*a(r)*v,w=b*x,E=_*x,S=u[c];t[l].x-=w*S,t[l].y-=E*S,t[f].x+=w*(1-S),t[f].y+=E*(1-S)}}}}))}},{key:"getType",value:function(){return"comboForce"}}])&&Nv(e.prototype,n),r&&Nv(e,r),i}(I);var Bv;new Proxy({},{get:function(t,e){return Jn(e)},set:function(t,e,n){return Qn(e,n),!0}});Bv||(Bv={}),Qn("grid",N),Qn("random",F),Qn("force",oe),Qn("circular",ve),Qn("dagre",Se),Qn("radial",Vn),Qn("concentric",ir),Qn("mds",hr),Qn("fruchterman",br),Qn("fruchterman-gpu",Sv),Qn("gForce",K),Qn("gForce-gpu",Mv),Qn("comboForce",Uv);var Fv=self;Fv.onmessage=function(t){(function(t){var e=t.data.type;return e===Ht||e===Zt})(t)&&function(t){switch(t.data.type){case Ht:var e=t.data,n=e.nodes,r=e.edges,o=e.layoutCfg,i=void 0===o?{}:o,a=i.type,u=Jn(a);if(!u){Fv.postMessage({type:Yt,message:"layout ".concat(a," not found")});break}var s=new u(i);s.init({nodes:n,edges:r}),s.execute(),Fv.postMessage({nodes:n,type:qt}),s.destroy();break;case Zt:var c=t.data,f=c.nodes,l=c.edges,h=c.layoutCfg,d=void 0===h?{}:h,p=c.canvas,v=d.type,m=Jn(v);if(!m){Fv.postMessage({type:Yt,message:"layout ".concat(v," not found")});break}if("gpu"!==v.split("-")[1]){Fv.postMessage({type:Yt,message:"layout ".concat(v," does not support GPU")});break}var y=new m(d);y.init({nodes:f,edges:l}),y.executeWithWorker(p,Fv)}}(t)};var zv=self;zv.onmessage=function(t){(function(t){var e=t.data.type;return e===f||e===d})(t)&&function(t){switch(t.data.type){case f:var e=t.data,n=e.nodes,r=e.edges,o=e.layoutCfg,i=(p=void 0===o?{}:o).type;if(!(a=Jn(i))){zv.postMessage({type:h,message:"layout "+i+" not found"});break}(u=new a(p)).init({nodes:n,edges:r}),u.execute(),zv.postMessage({type:l,nodes:n}),u.destroy();break;case d:var a,u,s=t.data,c=(n=s.nodes,r=s.edges,s.layoutCfg),p=void 0===c?{}:c,v=s.canvas;i=p.type;if(!(a=Jn(i))){zv.postMessage({type:h,message:"layout "+i+" not found"});break}if("gpu"!==i.split("-")[1]){zv.postMessage({type:h,message:"layout "+i+" does not support GPU"});break}(u=new a(p)).init({nodes:n,edges:r}),u.executeWithWorker(v,zv)}}(t)};e.default=null}]);
//# sourceMappingURL=g6Layout.worker.js.map`,"Worker",void 0,e.p+"g6Layout.worker.js")}var m="LAYOUT_RUN",C="LAYOUT_END",D="LAYOUT_ERROR",Y="LAYOUT_TICK",Z="GPU_LAYOUT_RUN",et="GPU_LAYOUT_END",dt=e(121),ht=function(vt){return setTimeout(vt,16)},St=function(vt){return clearTimeout(vt)},wt=function(vt){return(typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||ht)(vt)},xt=function(vt){return(typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||St)(vt)},ft=["fruchterman","gForce"],Bt=function(ut){function vt(pt){var Et=ut.call(this,pt)||this;return Et.graph=pt,Et.layoutCfg=pt.get("layout")||{},Et.layoutType=Et.layoutCfg.type,Et.worker=null,Et.workerData={},Et.initLayout(),Et}return Object(r.b)(vt,ut),vt.prototype.initLayout=function(){},vt.prototype.getWorker=function(){return this.worker||(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=new v),this.worker},vt.prototype.stopWorker=function(){var pt=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,pt.requestId&&(xt(pt.requestId),pt.requestId=null),pt.requestId2&&(xt(pt.requestId2),pt.requestId2=null))},vt.prototype.layout=function(pt){var Et=this,q=this.graph;this.data=this.setDataFromGraph();var st=this.data.nodes;if(!st)return!1;var it=q.get("width"),z=q.get("height"),P={};Object.assign(P,{width:it,height:z,center:[it/2,z/2]},this.layoutCfg),this.layoutCfg=P;var H=!!this.layoutType,k=this.layoutMethod;k&&k.destroy(),q.emit("beforelayout"),this.initPositions(P.center,st);var d=this.layoutType,g=!1;if(d&&d.split("-")[1]==="gpu"&&(d=d.split("-")[0],P.gpuEnabled=!0),d&&P.gpuEnabled){var F=!0;Object(dt.gpuDetector)().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),F=!1),this.hasGPUVersion(d)||(console.warn("The '"+d+"' layout does not support GPU calculation for now, it will run in CPU."),F=!1),F&&(d+="-gpu",g=!0)}if(this.isGPU=g,this.stopWorker(),P.workerEnabled&&this.layoutWithWorker(this.data,pt))return!0;var V=P.onLayoutEnd;if(P.layoutEndFormatted||(P.layoutEndFormatted=!0,P.onLayoutEnd=function(){V&&V(),q.emit("afterlayout"),Et.refreshLayout(),pt&&pt()}),d==="force"||d==="g6force"||d==="gForce"){var tt=P.onTick,ot=function(){tt&&tt(),q.refreshPositions()};P.tick=ot}else this.layoutType==="comboForce"&&(P.comboTrees=q.get("comboTrees"));if(d!==void 0){try{k=new M.a[d](P)}catch(At){return console.warn("The layout method: '"+d+"' does not exist! Please specify it first."),!1}if(k.enableTick){var at=P.onTick;ot=function(){at&&at(),q.refreshPositions()},k.tick=ot}k.init(this.data),H&&(q.emit("beginlayout"),k.execute(),k.isCustomLayout&&P.onLayoutEnd&&P.onLayoutEnd()),this.layoutMethod=k}else P.onLayoutEnd&&P.onLayoutEnd();return!1},vt.prototype.layoutWithWorker=function(pt,Et){var q=this,st=pt.nodes,it=pt.edges,z=this.layoutCfg,P=this.graph,H=this.isGPU,k=this.getWorker(),d=this.workerData;if(!k)return!1;d.requestId=null,d.requestId2=null,d.currentTick=null,d.currentTickData=null,P.emit("beforelayout");var g=document.createElement("canvas"),F=H&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in g,V=function(ot,at){var At={};return ot&&typeof ot=="object"?(Object.keys(ot).forEach(function(yt){ot.hasOwnProperty(yt)&&at(ot[yt])&&(At[yt]=ot[yt])}),At):ot}(z,function(ot){return typeof ot!="function"});if(F){var tt=g.transferControlToOffscreen();V.type=V.type+"-gpu",k.postMessage({type:Z,nodes:st,edges:it,layoutCfg:V,canvas:tt},[tt])}else k.postMessage({type:m,nodes:st,edges:it,layoutCfg:V});return k.onmessage=function(ot){q.handleWorkerMessage(ot,pt,Et)},!0},vt.prototype.handleWorkerMessage=function(pt,Et,q){var st=this.graph,it=this.workerData,z=this.layoutCfg,P=pt.data,H=P.type,k=function(){z.onTick&&z.onTick()},d=function(){z.onLayoutEnd&&z.onLayoutEnd(),st.emit("afterlayout")};switch(H){case Y:it.currentTick=P.currentTick,it.currentTickData=P,it.requestId||(it.requestId=wt(function(){Rt(Et,P),st.refreshPositions(),k(),P.currentTick===1&&q&&q(),P.currentTick===P.totalTicks?d():it.currentTick===P.totalTicks&&(it.requestId2=wt(function(){Rt(Et,it.currentTickData),st.refreshPositions(),it.requestId2=null,k(),d()})),it.requestId=null}));break;case C:it.currentTick==null&&(Rt(Et,P),this.refreshLayout(),q&&q(),st.emit("afterlayout"));break;case et:it.currentTick==null&&(function(g,F){for(var V=g.nodes,tt=F.vertexEdgeData,ot=V.length,at=0;at<ot;at++){var At=V[at],yt=tt[4*at],gt=tt[4*at+1];At.x=yt,At.y=gt}}(Et,P),this.refreshLayout(),q&&q(),st.emit("afterlayout"));break;case D:console.warn("Web-Worker layout error!",P.message)}},vt.prototype.updateLayoutCfg=function(pt){var Et=this.graph,q=this.layoutMethod,st=(this.layoutType,this.layoutCfg);if(this.layoutType=pt.type,!q||q.destroyed)return this.layoutCfg=Object(l.A)({},st,pt),void this.layout();this.data=this.setDataFromGraph(),this.stopWorker(),pt.workerEnabled&&this.layoutWithWorker(this.data,null)||(q.init(this.data),q.updateCfg(pt),Et.emit("beforelayout"),q.execute(),q.isCustomLayout&&st.onLayoutEnd&&st.onLayoutEnd())},vt.prototype.hasGPUVersion=function(pt){for(var Et=ft.length,q=0;q<Et;q++)if(ft[q]===pt)return!0;return!1},vt.prototype.destroy=function(){var pt=this.layoutMethod;pt&&(pt.destroy(),pt.destroyed=!0);var Et=this.worker;Et&&(Et.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethod=void 0,this.graph=null},vt}(A.c);function Rt(ut,vt){for(var pt=ut.nodes,Et=vt.nodes,q=pt.length,st=0;st<q;st++){var it=pt[st];it.x=Et[st].x,it.y=Et[st].y}}var Ot=S.a.transform,X=function(ut){function vt(pt){var Et=ut.call(this,pt)||this,q=Et.get("defaultNode");return q||Et.set("defaultNode",{type:"circle"}),q.type||(q.type="circle",Et.set("defaultNode",q)),Et.destroyed=!1,Et}return Object(r.b)(vt,ut),vt.prototype.initLayoutController=function(){var pt=new Bt(this);this.set({layoutController:pt})},vt.prototype.initEventController=function(){var pt=new h(this);this.set({eventController:pt})},vt.prototype.initCanvas=function(){var pt=this.get("container");if(typeof pt=="string"&&(pt=document.getElementById(pt),this.set("container",pt)),!pt)throw new Error("invalid container");var Et,q=this.get("width"),st=this.get("height");if(this.get("renderer")==="svg")Et=new b.Canvas({container:pt,width:q,height:st});else{var it={container:pt,width:q,height:st},z=this.get("pixelRatio");z&&(it.pixelRatio=z),Et=new p.Canvas(it)}this.set("canvas",Et)},vt.prototype.initPlugins=function(){var pt=this;Object(l.f)(pt.get("plugins"),function(Et){!Et.destroyed&&Et.initPlugin&&Et.initPlugin(pt)})},vt.prototype.toDataURL=function(pt,Et){var q=this.get("canvas"),st=q.getRenderer(),it=q.get("el");pt||(pt="image/png");var z="";if(st==="svg"){var P=it.cloneNode(!0),H=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),k=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",H);k.replaceChild(P,k.documentElement);var d=new XMLSerializer().serializeToString(k);z="data:image/svg+xml;charset=utf8,"+encodeURIComponent(d)}else{var g=void 0,F=it.getContext("2d"),V=this.get("width"),tt=this.get("height"),ot=void 0;if(Et){var at=typeof window!="undefined"?window.devicePixelRatio:1;g=F.getImageData(0,0,V*at,tt*at),ot=F.globalCompositeOperation,F.globalCompositeOperation="destination-over",F.fillStyle=Et,F.fillRect(0,0,V,tt)}z=it.toDataURL(pt),Et&&(F.clearRect(0,0,V,tt),F.putImageData(g,0,0),F.globalCompositeOperation=ot)}return z},vt.prototype.toFullDataURL=function(pt,Et,q){var st=this.get("group").getCanvasBBox(),it=st.height,z=st.width,P=this.get("renderer"),H=Object(y.b)('<id="virtual-image"></div>'),k=q?q.backgroundColor:void 0,d=q?q.padding:void 0;d?Object(l.t)(d)&&(d=[d,d,d,d]):d=[0,0,0,0];var g=it+d[0]+d[2],F=z+d[1]+d[3],V={container:H,height:g,width:F,quickHit:!0},tt=P==="svg"?new b.Canvas(V):new p.Canvas(V),ot=this.get("group").clone(),at=Object(l.c)(ot.getMatrix());at||(at=[1,0,0,0,1,0,0,0,1]);var At=(st.maxX+st.minX)/2,yt=(st.maxY+st.minY)/2;at=Ot(at,[["t",-At,-yt],["t",z/2+d[3],it/2+d[0]]]),ot.resetMatrix(),ot.setMatrix(at),tt.add(ot);var gt=tt.get("el"),bt="";Et||(Et="image/png"),setTimeout(function(){if(P==="svg"){var Tt=gt.cloneNode(!0),Dt=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),Ut=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Dt);Ut.replaceChild(Tt,Ut.documentElement);var jt=new XMLSerializer().serializeToString(Ut);bt="data:image/svg+xml;charset=utf8,"+encodeURIComponent(jt)}else{var Vt=void 0,Ht=gt.getContext("2d"),re=void 0;if(k){var pe=typeof window!="undefined"?window.devicePixelRatio:1;Vt=Ht.getImageData(0,0,F*pe,g*pe),re=Ht.globalCompositeOperation,Ht.globalCompositeOperation="destination-over",Ht.fillStyle=k,Ht.fillRect(0,0,F,g)}bt=gt.toDataURL(Et),k&&(Ht.clearRect(0,0,F,g),Ht.putImageData(Vt,0,0),Ht.globalCompositeOperation=re)}pt&&pt(bt)},16)},vt.prototype.downloadFullImage=function(pt,Et,q){var st=this,it=this.get("group").getCanvasBBox(),z=it.height,P=it.width,H=this.get("renderer"),k=Object(y.b)('<id="virtual-image"></div>'),d=q?q.backgroundColor:void 0,g=q?q.padding:void 0;g?Object(l.t)(g)&&(g=[g,g,g,g]):g=[0,0,0,0];var F=z+g[0]+g[2],V=P+g[1]+g[3],tt={container:k,height:F,width:V},ot=H==="svg"?new b.Canvas(tt):new p.Canvas(tt),at=this.get("group").clone(),At=Object(l.c)(at.getMatrix());At||(At=[1,0,0,0,1,0,0,0,1]);var yt=(it.maxX+it.minX)/2,gt=(it.maxY+it.minY)/2;At=Ot(At,[["t",-yt,-gt],["t",P/2+g[3],z/2+g[0]]]),at.resetMatrix(),at.setMatrix(At),ot.add(at);var bt=ot.get("el");Et||(Et="image/png"),setTimeout(function(){var Tt="";if(H==="svg"){var Dt=bt.cloneNode(!0),Ut=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),jt=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Ut);jt.replaceChild(Dt,jt.documentElement);var Vt=new XMLSerializer().serializeToString(jt);Tt="data:image/svg+xml;charset=utf8,"+encodeURIComponent(Vt)}else{var Ht=void 0,re=bt.getContext("2d"),pe=void 0;if(d){var ye=typeof window!="undefined"?window.devicePixelRatio:1;Ht=re.getImageData(0,0,V*ye,F*ye),pe=re.globalCompositeOperation,re.globalCompositeOperation="destination-over",re.fillStyle=d,re.fillRect(0,0,V,F)}Tt=bt.toDataURL(Et),d&&(re.clearRect(0,0,V,F),re.putImageData(Ht,0,0),re.globalCompositeOperation=pe)}var we=document.createElement("a"),Re=(pt||"graph")+(H==="svg"?".svg":"."+Et.split("/")[1]);st.dataURLToImage(Tt,H,we,Re);var He=document.createEvent("MouseEvents");He.initEvent("click",!1,!1),we.dispatchEvent(He)},16)},vt.prototype.downloadImage=function(pt,Et,q){var st=this,it=this;it.isAnimating()&&it.stopAnimate();var z=it.get("canvas").getRenderer();Et||(Et="image/png");var P=(pt||"graph")+(z==="svg"?".svg":Et.split("/")[1]),H=document.createElement("a");setTimeout(function(){var k=it.toDataURL(Et,q);st.dataURLToImage(k,z,H,P);var d=document.createEvent("MouseEvents");d.initEvent("click",!1,!1),H.dispatchEvent(d)},16)},vt.prototype.dataURLToImage=function(pt,Et,q,st){if(typeof window!="undefined")if(window.Blob&&window.URL&&Et!=="svg"){var it=pt.split(","),z="";if(it&&it.length>0){var P=it[0].match(/:(.*?);/);P&&P.length>=2&&(z=P[1])}for(var H=atob(it[1]),k=H.length,d=new Uint8Array(k);k--;)d[k]=H.charCodeAt(k);var g=new Blob([d],{type:z});window.navigator.msSaveBlob?window.navigator.msSaveBlob(g,st):q.addEventListener("click",function(){q.download=st,q.href=window.URL.createObjectURL(g)})}else q.addEventListener("click",function(){q.download=st,q.href=pt})},vt.prototype.addPlugin=function(pt){pt.destroyed||(this.get("plugins").push(pt),pt.initPlugin(this))},vt.prototype.removePlugin=function(pt){var Et=this.get("plugins"),q=Et.indexOf(pt);q>=0&&(pt.destroyPlugin(),Et.splice(q,1))},vt.prototype.setImageWaterMarker=function(pt,Et){pt===void 0&&(pt=j.a.waterMarkerImage);var q=this.get("container");Object(l.x)(q)&&(q=document.getElementById(q)),q.style.position||(q.style.position="relative");var st=this.get("graphWaterMarker"),it=Object(l.e)({},j.a.imageWaterMarkerConfig,Et),z=it.width,P=it.height,H=it.compatible,k=it.image;if(!st){var d={container:q,width:z,height:P,capture:!1},g=this.get("pixelRatio");g&&(d.pixelRatio=g),st=new p.Canvas(d),this.set("graphWaterMarker",st)}st.get("el").style.display="none";var F=st.get("context"),V=k.rotate,tt=k.x,ot=k.y;F.rotate(-V*Math.PI/180);var at=new Image;at.crossOrigin="anonymous",at.src=pt,at.onload=function(){if(F.drawImage(at,tt,ot,k.width,k.height),F.rotate(V*Math.PI/180),H)q.style.cssText="background-image: url("+st.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var At=document.querySelector(".g6-graph-watermarker");At||((At=document.createElement("div")).className="g6-graph-watermarker"),At.className="g6-graph-watermarker",st.destroyed||(At.style.cssText="background-image: url("+st.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;",q.appendChild(At))}}},vt.prototype.setTextWaterMarker=function(pt,Et){var q=this.get("container");Object(l.x)(q)&&(q=document.getElementById(q)),q.style.position||(q.style.position="relative");var st=this.get("graphWaterMarker"),it=Object(l.e)({},j.a.textWaterMarkerConfig,Et),z=it.width,P=it.height,H=it.compatible,k=it.text;if(!st){var d={container:q,width:z,height:P,capture:!1},g=this.get("pixelRatio");g&&(d.pixelRatio=g),st=new p.Canvas(d),this.set("graphWaterMarker",st)}st.get("el").style.display="none";var F=st.get("context"),V=k.rotate,tt=k.fill,ot=k.fontFamily,at=k.fontSize,At=k.baseline,yt=k.x,gt=k.y,bt=k.lineHeight;F.rotate(-V*Math.PI/180),F.font=at+"px "+ot,F.fillStyle=tt,F.textBaseline=At;for(var Tt=pt.length-1;Tt>=0;Tt--)F.fillText(pt[Tt],yt,gt+Tt*bt);if(F.rotate(V*Math.PI/180),H)q.style.cssText="background-image: url("+st.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var Dt=document.querySelector(".g6-graph-watermarker");Dt||((Dt=document.createElement("div")).className="g6-graph-watermarker"),Dt.style.cssText="background-image: url("+st.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;",q.appendChild(Dt)}},vt.prototype.destroy=function(){Object(l.f)(this.get("plugins"),function(it){it.destroyPlugin()});var pt=this.get("tooltips");if(pt)for(var Et=0;Et<pt.length;Et++){var q=pt[Et];if(q){var st=q.parentElement;st&&st.removeChild(q)}}this.get("eventController").destroy(),this.get("layoutController").destroy(),this.get("graphWaterMarker")&&this.get("graphWaterMarker").destroy(),document.querySelector(".g6-graph-watermarker")&&document.querySelector(".g6-graph-watermarker").remove(),ut.prototype.destroy.call(this)},vt}(A.b);E.a=X},function(a,E){a.exports=function(e){return e==null}},function(a,E,e){var r;function p(b){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(b)}(function(b){var S=/^\s+/,l=/\s+$/,A=0,j=b.round,y=b.min,n=b.max,s=b.random;function h(g,F){if(F=F||{},(g=g||"")instanceof h)return g;if(!(this instanceof h))return new h(g,F);var V=function(tt){var ot={r:0,g:0,b:0},at=1,At=null,yt=null,gt=null,bt=!1,Tt=!1;typeof tt=="string"&&(tt=function(Vt){Vt=Vt.replace(S,"").replace(l,"").toLowerCase();var Ht,re=!1;if(Rt[Vt])Vt=Rt[Vt],re=!0;else if(Vt=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(Ht=k.rgb.exec(Vt))?{r:Ht[1],g:Ht[2],b:Ht[3]}:(Ht=k.rgba.exec(Vt))?{r:Ht[1],g:Ht[2],b:Ht[3],a:Ht[4]}:(Ht=k.hsl.exec(Vt))?{h:Ht[1],s:Ht[2],l:Ht[3]}:(Ht=k.hsla.exec(Vt))?{h:Ht[1],s:Ht[2],l:Ht[3],a:Ht[4]}:(Ht=k.hsv.exec(Vt))?{h:Ht[1],s:Ht[2],v:Ht[3]}:(Ht=k.hsva.exec(Vt))?{h:Ht[1],s:Ht[2],v:Ht[3],a:Ht[4]}:(Ht=k.hex8.exec(Vt))?{r:pt(Ht[1]),g:pt(Ht[2]),b:pt(Ht[3]),a:it(Ht[4]),format:re?"name":"hex8"}:(Ht=k.hex6.exec(Vt))?{r:pt(Ht[1]),g:pt(Ht[2]),b:pt(Ht[3]),format:re?"name":"hex"}:(Ht=k.hex4.exec(Vt))?{r:pt(Ht[1]+""+Ht[1]),g:pt(Ht[2]+""+Ht[2]),b:pt(Ht[3]+""+Ht[3]),a:it(Ht[4]+""+Ht[4]),format:re?"name":"hex8"}:(Ht=k.hex3.exec(Vt))?{r:pt(Ht[1]+""+Ht[1]),g:pt(Ht[2]+""+Ht[2]),b:pt(Ht[3]+""+Ht[3]),format:re?"name":"hex"}:!1}(tt)),p(tt)=="object"&&(d(tt.r)&&d(tt.g)&&d(tt.b)?(Dt=tt.r,Ut=tt.g,jt=tt.b,ot={r:255*ut(Dt,255),g:255*ut(Ut,255),b:255*ut(jt,255)},bt=!0,Tt=String(tt.r).substr(-1)==="%"?"prgb":"rgb"):d(tt.h)&&d(tt.s)&&d(tt.v)?(At=q(tt.s),yt=q(tt.v),ot=function(Vt,Ht,re){Vt=6*ut(Vt,360),Ht=ut(Ht,100),re=ut(re,100);var pe=b.floor(Vt),ye=Vt-pe,we=re*(1-Ht),Re=re*(1-ye*Ht),He=re*(1-(1-ye)*Ht),pn=pe%6;return{r:255*[re,Re,we,we,He,re][pn],g:255*[He,re,re,Re,we,we][pn],b:255*[we,we,He,re,re,Re][pn]}}(tt.h,At,yt),bt=!0,Tt="hsv"):d(tt.h)&&d(tt.s)&&d(tt.l)&&(At=q(tt.s),gt=q(tt.l),ot=function(Vt,Ht,re){var pe,ye,we;function Re(fn,Rn,Cn){return Cn<0&&(Cn+=1),Cn>1&&(Cn-=1),Cn<1/6?fn+6*(Rn-fn)*Cn:Cn<.5?Rn:Cn<2/3?fn+(Rn-fn)*(2/3-Cn)*6:fn}if(Vt=ut(Vt,360),Ht=ut(Ht,100),re=ut(re,100),Ht===0)pe=ye=we=re;else{var He=re<.5?re*(1+Ht):re+Ht-re*Ht,pn=2*re-He;pe=Re(pn,He,Vt+1/3),ye=Re(pn,He,Vt),we=Re(pn,He,Vt-1/3)}return{r:255*pe,g:255*ye,b:255*we}}(tt.h,At,gt),bt=!0,Tt="hsl"),tt.hasOwnProperty("a")&&(at=tt.a));var Dt,Ut,jt;return at=X(at),{ok:bt,format:tt.format||Tt,r:y(255,n(ot.r,0)),g:y(255,n(ot.g,0)),b:y(255,n(ot.b,0)),a:at}}(g);this._originalInput=g,this._r=V.r,this._g=V.g,this._b=V.b,this._a=V.a,this._roundA=j(100*this._a)/100,this._format=F.format||V.format,this._gradientType=F.gradientType,this._r<1&&(this._r=j(this._r)),this._g<1&&(this._g=j(this._g)),this._b<1&&(this._b=j(this._b)),this._ok=V.ok,this._tc_id=A++}function M(g,F,V){g=ut(g,255),F=ut(F,255),V=ut(V,255);var tt,ot,at=n(g,F,V),At=y(g,F,V),yt=(at+At)/2;if(at==At)tt=ot=0;else{var gt=at-At;switch(ot=yt>.5?gt/(2-at-At):gt/(at+At),at){case g:tt=(F-V)/gt+(F<V?6:0);break;case F:tt=(V-g)/gt+2;break;case V:tt=(g-F)/gt+4}tt/=6}return{h:tt,s:ot,l:yt}}function O(g,F,V){g=ut(g,255),F=ut(F,255),V=ut(V,255);var tt,ot,at=n(g,F,V),At=y(g,F,V),yt=at,gt=at-At;if(ot=at===0?0:gt/at,at==At)tt=0;else{switch(at){case g:tt=(F-V)/gt+(F<V?6:0);break;case F:tt=(V-g)/gt+2;break;case V:tt=(g-F)/gt+4}tt/=6}return{h:tt,s:ot,v:yt}}function T(g,F,V,tt){var ot=[Et(j(g).toString(16)),Et(j(F).toString(16)),Et(j(V).toString(16))];return tt&&ot[0].charAt(0)==ot[0].charAt(1)&&ot[1].charAt(0)==ot[1].charAt(1)&&ot[2].charAt(0)==ot[2].charAt(1)?ot[0].charAt(0)+ot[1].charAt(0)+ot[2].charAt(0):ot.join("")}function v(g,F,V,tt){return[Et(st(tt)),Et(j(g).toString(16)),Et(j(F).toString(16)),Et(j(V).toString(16))].join("")}function m(g,F){F=F===0?0:F||10;var V=h(g).toHsl();return V.s-=F/100,V.s=vt(V.s),h(V)}function C(g,F){F=F===0?0:F||10;var V=h(g).toHsl();return V.s+=F/100,V.s=vt(V.s),h(V)}function D(g){return h(g).desaturate(100)}function Y(g,F){F=F===0?0:F||10;var V=h(g).toHsl();return V.l+=F/100,V.l=vt(V.l),h(V)}function Z(g,F){F=F===0?0:F||10;var V=h(g).toRgb();return V.r=n(0,y(255,V.r-j(-F/100*255))),V.g=n(0,y(255,V.g-j(-F/100*255))),V.b=n(0,y(255,V.b-j(-F/100*255))),h(V)}function et(g,F){F=F===0?0:F||10;var V=h(g).toHsl();return V.l-=F/100,V.l=vt(V.l),h(V)}function dt(g,F){var V=h(g).toHsl(),tt=(V.h+F)%360;return V.h=tt<0?360+tt:tt,h(V)}function ht(g){var F=h(g).toHsl();return F.h=(F.h+180)%360,h(F)}function St(g){var F=h(g).toHsl(),V=F.h;return[h(g),h({h:(V+120)%360,s:F.s,l:F.l}),h({h:(V+240)%360,s:F.s,l:F.l})]}function wt(g){var F=h(g).toHsl(),V=F.h;return[h(g),h({h:(V+90)%360,s:F.s,l:F.l}),h({h:(V+180)%360,s:F.s,l:F.l}),h({h:(V+270)%360,s:F.s,l:F.l})]}function xt(g){var F=h(g).toHsl(),V=F.h;return[h(g),h({h:(V+72)%360,s:F.s,l:F.l}),h({h:(V+216)%360,s:F.s,l:F.l})]}function ft(g,F,V){F=F||6,V=V||30;var tt=h(g).toHsl(),ot=360/V,at=[h(g)];for(tt.h=(tt.h-(ot*F>>1)+720)%360;--F;)tt.h=(tt.h+ot)%360,at.push(h(tt));return at}function Bt(g,F){F=F||6;for(var V=h(g).toHsv(),tt=V.h,ot=V.s,at=V.v,At=[],yt=1/F;F--;)At.push(h({h:tt,s:ot,v:at})),at=(at+yt)%1;return At}h.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var F=this.toRgb();return(299*F.r+587*F.g+114*F.b)/1e3},getLuminance:function(){var F,V,tt,ot=this.toRgb();return F=ot.r/255,V=ot.g/255,tt=ot.b/255,.2126*(F<=.03928?F/12.92:b.pow((F+.055)/1.055,2.4))+.7152*(V<=.03928?V/12.92:b.pow((V+.055)/1.055,2.4))+.0722*(tt<=.03928?tt/12.92:b.pow((tt+.055)/1.055,2.4))},setAlpha:function(F){return this._a=X(F),this._roundA=j(100*this._a)/100,this},toHsv:function(){var F=O(this._r,this._g,this._b);return{h:360*F.h,s:F.s,v:F.v,a:this._a}},toHsvString:function(){var F=O(this._r,this._g,this._b),V=j(360*F.h),tt=j(100*F.s),ot=j(100*F.v);return this._a==1?"hsv("+V+", "+tt+"%, "+ot+"%)":"hsva("+V+", "+tt+"%, "+ot+"%, "+this._roundA+")"},toHsl:function(){var F=M(this._r,this._g,this._b);return{h:360*F.h,s:F.s,l:F.l,a:this._a}},toHslString:function(){var F=M(this._r,this._g,this._b),V=j(360*F.h),tt=j(100*F.s),ot=j(100*F.l);return this._a==1?"hsl("+V+", "+tt+"%, "+ot+"%)":"hsla("+V+", "+tt+"%, "+ot+"%, "+this._roundA+")"},toHex:function(F){return T(this._r,this._g,this._b,F)},toHexString:function(F){return"#"+this.toHex(F)},toHex8:function(F){return function(V,tt,ot,at,At){var yt=[Et(j(V).toString(16)),Et(j(tt).toString(16)),Et(j(ot).toString(16)),Et(st(at))];return At&&yt[0].charAt(0)==yt[0].charAt(1)&&yt[1].charAt(0)==yt[1].charAt(1)&&yt[2].charAt(0)==yt[2].charAt(1)&&yt[3].charAt(0)==yt[3].charAt(1)?yt[0].charAt(0)+yt[1].charAt(0)+yt[2].charAt(0)+yt[3].charAt(0):yt.join("")}(this._r,this._g,this._b,this._a,F)},toHex8String:function(F){return"#"+this.toHex8(F)},toRgb:function(){return{r:j(this._r),g:j(this._g),b:j(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+j(this._r)+", "+j(this._g)+", "+j(this._b)+")":"rgba("+j(this._r)+", "+j(this._g)+", "+j(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:j(100*ut(this._r,255))+"%",g:j(100*ut(this._g,255))+"%",b:j(100*ut(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+j(100*ut(this._r,255))+"%, "+j(100*ut(this._g,255))+"%, "+j(100*ut(this._b,255))+"%)":"rgba("+j(100*ut(this._r,255))+"%, "+j(100*ut(this._g,255))+"%, "+j(100*ut(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(Ot[T(this._r,this._g,this._b,!0)]||!1)},toFilter:function(F){var V="#"+v(this._r,this._g,this._b,this._a),tt=V,ot=this._gradientType?"GradientType = 1, ":"";if(F){var at=h(F);tt="#"+v(at._r,at._g,at._b,at._a)}return"progid:DXImageTransform.Microsoft.gradient("+ot+"startColorstr="+V+",endColorstr="+tt+")"},toString:function(F){var V=!!F;F=F||this._format;var tt=!1,ot=this._a<1&&this._a>=0;return V||!ot||F!=="hex"&&F!=="hex6"&&F!=="hex3"&&F!=="hex4"&&F!=="hex8"&&F!=="name"?(F==="rgb"&&(tt=this.toRgbString()),F==="prgb"&&(tt=this.toPercentageRgbString()),F!=="hex"&&F!=="hex6"||(tt=this.toHexString()),F==="hex3"&&(tt=this.toHexString(!0)),F==="hex4"&&(tt=this.toHex8String(!0)),F==="hex8"&&(tt=this.toHex8String()),F==="name"&&(tt=this.toName()),F==="hsl"&&(tt=this.toHslString()),F==="hsv"&&(tt=this.toHsvString()),tt||this.toHexString()):F==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return h(this.toString())},_applyModification:function(F,V){var tt=F.apply(null,[this].concat([].slice.call(V)));return this._r=tt._r,this._g=tt._g,this._b=tt._b,this.setAlpha(tt._a),this},lighten:function(){return this._applyModification(Y,arguments)},brighten:function(){return this._applyModification(Z,arguments)},darken:function(){return this._applyModification(et,arguments)},desaturate:function(){return this._applyModification(m,arguments)},saturate:function(){return this._applyModification(C,arguments)},greyscale:function(){return this._applyModification(D,arguments)},spin:function(){return this._applyModification(dt,arguments)},_applyCombination:function(F,V){return F.apply(null,[this].concat([].slice.call(V)))},analogous:function(){return this._applyCombination(ft,arguments)},complement:function(){return this._applyCombination(ht,arguments)},monochromatic:function(){return this._applyCombination(Bt,arguments)},splitcomplement:function(){return this._applyCombination(xt,arguments)},triad:function(){return this._applyCombination(St,arguments)},tetrad:function(){return this._applyCombination(wt,arguments)}},h.fromRatio=function(g,F){if(p(g)=="object"){var V={};for(var tt in g)g.hasOwnProperty(tt)&&(V[tt]=tt==="a"?g[tt]:q(g[tt]));g=V}return h(g,F)},h.equals=function(g,F){return!(!g||!F)&&h(g).toRgbString()==h(F).toRgbString()},h.random=function(){return h.fromRatio({r:s(),g:s(),b:s()})},h.mix=function(g,F,V){V=V===0?0:V||50;var tt=h(g).toRgb(),ot=h(F).toRgb(),at=V/100;return h({r:(ot.r-tt.r)*at+tt.r,g:(ot.g-tt.g)*at+tt.g,b:(ot.b-tt.b)*at+tt.b,a:(ot.a-tt.a)*at+tt.a})},h.readability=function(g,F){var V=h(g),tt=h(F);return(b.max(V.getLuminance(),tt.getLuminance())+.05)/(b.min(V.getLuminance(),tt.getLuminance())+.05)},h.isReadable=function(g,F,V){var tt,ot,at=h.readability(g,F);switch(ot=!1,(tt=function(At){var yt,gt;return yt=((At=At||{level:"AA",size:"small"}).level||"AA").toUpperCase(),gt=(At.size||"small").toLowerCase(),yt!=="AA"&&yt!=="AAA"&&(yt="AA"),gt!=="small"&&gt!=="large"&&(gt="small"),{level:yt,size:gt}}(V)).level+tt.size){case"AAsmall":case"AAAlarge":ot=at>=4.5;break;case"AAlarge":ot=at>=3;break;case"AAAsmall":ot=at>=7}return ot},h.mostReadable=function(g,F,V){var tt,ot,at,At,yt=null,gt=0;ot=(V=V||{}).includeFallbackColors,at=V.level,At=V.size;for(var bt=0;bt<F.length;bt++)(tt=h.readability(g,F[bt]))>gt&&(gt=tt,yt=h(F[bt]));return h.isReadable(g,yt,{level:at,size:At})||!ot?yt:(V.includeFallbackColors=!1,h.mostReadable(g,["#fff","#000"],V))};var Rt=h.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ot=h.hexNames=function(g){var F={};for(var V in g)g.hasOwnProperty(V)&&(F[g[V]]=V);return F}(Rt);function X(g){return g=parseFloat(g),(isNaN(g)||g<0||g>1)&&(g=1),g}function ut(g,F){(function(tt){return typeof tt=="string"&&tt.indexOf(".")!=-1&&parseFloat(tt)===1})(g)&&(g="100%");var V=function(tt){return typeof tt=="string"&&tt.indexOf("%")!=-1}(g);return g=y(F,n(0,parseFloat(g))),V&&(g=parseInt(g*F,10)/100),b.abs(g-F)<1e-6?1:g%F/parseFloat(F)}function vt(g){return y(1,n(0,g))}function pt(g){return parseInt(g,16)}function Et(g){return g.length==1?"0"+g:""+g}function q(g){return g<=1&&(g=100*g+"%"),g}function st(g){return b.round(255*parseFloat(g)).toString(16)}function it(g){return pt(g)/255}var z,P,H,k=(P="[\\s|\\(]+("+(z="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?",H="[\\s|\\(]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?",{CSS_UNIT:new RegExp(z),rgb:new RegExp("rgb"+P),rgba:new RegExp("rgba"+H),hsl:new RegExp("hsl"+P),hsla:new RegExp("hsla"+H),hsv:new RegExp("hsv"+P),hsva:new RegExp("hsva"+H),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function d(g){return!!k.CSS_UNIT.exec(g)}a.exports?a.exports=h:(r=function(){return h}.call(E,e,E,a))===void 0||(a.exports=r)})(Math)},function(a,E,e){a.exports={EPSILON:e(233),create:e(234),clone:e(477),fromValues:e(478),copy:e(479),set:e(235),equals:e(480),exactEquals:e(481),add:e(236),subtract:e(150),sub:e(482),multiply:e(237),mul:e(483),divide:e(238),div:e(484),inverse:e(485),min:e(486),max:e(487),rotate:e(488),floor:e(489),ceil:e(490),round:e(491),scale:e(492),scaleAndAdd:e(493),distance:e(239),dist:e(494),squaredDistance:e(240),sqrDist:e(495),length:e(241),len:e(496),squaredLength:e(242),sqrLen:e(497),negate:e(498),normalize:e(243),dot:e(244),cross:e(499),lerp:e(500),random:e(501),transformMat2:e(502),transformMat2d:e(503),transformMat3:e(504),transformMat4:e(505),forEach:e(506),limit:e(507)}},function(a,E,e){var r=e(96),p=e(278),b=e(279),S=e(280),l=e(281),A=e(282);function j(y){var n=this.__data__=new r(y);this.size=n.size}j.prototype.clear=p,j.prototype.delete=b,j.prototype.get=S,j.prototype.has=l,j.prototype.set=A,a.exports=j},function(a,E,e){var r=e(273),p=e(274),b=e(275),S=e(276),l=e(277);function A(j){var y=-1,n=j==null?0:j.length;for(this.clear();++y<n;){var s=j[y];this.set(s[0],s[1])}}A.prototype.clear=r,A.prototype.delete=p,A.prototype.get=b,A.prototype.has=S,A.prototype.set=l,a.exports=A},function(a,E,e){var r=e(71);a.exports=function(p,b){for(var S=p.length;S--;)if(r(p[S][0],b))return S;return-1}},function(a,E,e){var r=e(64)(Object,"create");a.exports=r},function(a,E,e){var r=e(297);a.exports=function(p,b){var S=p.__data__;return r(b)?S[typeof b=="string"?"string":"hash"]:S.map}},function(a,E,e){var r=e(101),p=e(71),b=Object.prototype.hasOwnProperty;a.exports=function(S,l,A){var j=S[l];b.call(S,l)&&p(j,A)&&(A!==void 0||l in S)||r(S,l,A)}},function(a,E,e){var r=e(166);a.exports=function(p,b,S){b=="__proto__"&&r?r(p,b,{configurable:!0,enumerable:!0,value:S,writable:!0}):p[b]=S}},function(a,E){function e(p){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(p)}var r=/^(?:0|[1-9]\d*)$/;a.exports=function(p,b){var S=e(p);return!!(b=b==null?9007199254740991:b)&&(S=="number"||S!="symbol"&&r.test(p))&&p>-1&&p%1==0&&p<b}},function(a,E){a.exports=function(e){return function(r){return e(r)}}},function(a,E){var e=Object.prototype;a.exports=function(r){var p=r&&r.constructor;return r===(typeof p=="function"&&p.prototype||e)}},function(a,E,e){var r=e(168)(Object.getPrototypeOf,Object);a.exports=r},function(a,E,e){var r=e(135),p=e(326)(r);a.exports=p},function(a,E,e){var r=e(108),p=e(87);a.exports=function(b,S){for(var l=0,A=(S=r(S,b)).length;b!=null&&l<A;)b=b[p(S[l++])];return l&&l==A?b:void 0}},function(a,E,e){var r=e(26),p=e(138),b=e(340),S=e(191);a.exports=function(l,A){return r(l)?l:p(l,A)?[l]:b(S(l))}},function(a,E){a.exports=function(e,r){for(var p=-1,b=e==null?0:e.length,S=Array(b);++p<b;)S[p]=r(e[p],p,e);return S}},function(a,E,e){var r=e(66),p=e(200),b=e(201);a.exports=function(S,l){return b(p(S,l,r),S+"")}},function(a,E,e){function r(A){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(A)}var p=e(71),b=e(53),S=e(102),l=e(43);a.exports=function(A,j,y){if(!l(y))return!1;var n=r(j);return!!(n=="number"?b(y)&&S(j,y.length):n=="string"&&j in y)&&p(y[j],A)}},function(a,E,e){"use strict";var r=e(24);a.exports={longestPath:function(b){var S={};r.forEach(b.sources(),function l(A){var j=b.node(A);if(r.has(S,A))return j.rank;S[A]=!0;var y=r.min(r.map(b.outEdges(A),function(n){return l(n.w)-b.edge(n).minlen}));return y!==Number.POSITIVE_INFINITY&&y!=null||(y=0),j.rank=y})},slack:function(b,S){return b.node(S.w).rank-b.node(S.v).rank-b.edge(S).minlen}}},function(a,E){},function(a,E,e){"use strict";var r=function(){function p(b,S){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=b,this.name=b,this.originalEvent=S,this.timeStamp=S.timeStamp}return p.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},p.prototype.stopPropagation=function(){this.propagationStopped=!0},p.prototype.toString=function(){return"[Event (type="+this.type+")]"},p.prototype.save=function(){},p.prototype.restore=function(){},p}();E.a=r},function(a,E,e){"use strict";var r=e(1),p=e(79),b=e(19),S=function(l){function A(j){var y=l.call(this)||this;y.destroyed=!1;var n=y.getDefaultCfg();return y.cfg=Object(b.i)(n,j),y}return Object(r.b)(A,l),A.prototype.getDefaultCfg=function(){return{}},A.prototype.get=function(j){return this.cfg[j]},A.prototype.set=function(j,y){this.cfg[j]=y},A.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},A}(p.a);E.a=S},function(a,E,e){"use strict";e.d(E,"a",function(){return p});var r=null;function p(){if(!r){var b=document.createElement("canvas");b.width=1,b.height=1,r=b.getContext("2d")}return r}},function(a,E,e){"use strict";var r=e(1),p=e(118),b=e(19),S={},l=function(A){function j(){return A!==null&&A.apply(this,arguments)||this}return Object(r.b)(j,A),j.prototype.isCanvas=function(){return!1},j.prototype.getBBox=function(){var y=1/0,n=-1/0,s=1/0,h=-1/0,M=[],O=[],T=this.getChildren().filter(function(v){return v.get("visible")&&(!v.isGroup()||v.isGroup()&&v.getChildren().length>0)});return T.length>0?(Object(b.a)(T,function(v){var m=v.getBBox();M.push(m.minX,m.maxX),O.push(m.minY,m.maxY)}),y=Math.min.apply(null,M),n=Math.max.apply(null,M),s=Math.min.apply(null,O),h=Math.max.apply(null,O)):(y=0,n=0,s=0,h=0),{x:y,y:s,minX:y,minY:s,maxX:n,maxY:h,width:n-y,height:h-s}},j.prototype.getCanvasBBox=function(){var y=1/0,n=-1/0,s=1/0,h=-1/0,M=[],O=[],T=this.getChildren().filter(function(v){return v.get("visible")&&(!v.isGroup()||v.isGroup()&&v.getChildren().length>0)});return T.length>0?(Object(b.a)(T,function(v){var m=v.getCanvasBBox();M.push(m.minX,m.maxX),O.push(m.minY,m.maxY)}),y=Math.min.apply(null,M),n=Math.max.apply(null,M),s=Math.min.apply(null,O),h=Math.max.apply(null,O)):(y=0,n=0,s=0,h=0),{x:y,y:s,minX:y,minY:s,maxX:n,maxY:h,width:n-y,height:h-s}},j.prototype.getDefaultCfg=function(){var y=A.prototype.getDefaultCfg.call(this);return y.children=[],y},j.prototype.onAttrChange=function(y,n,s){if(A.prototype.onAttrChange.call(this,y,n,s),y==="matrix"){var h=this.getTotalMatrix();this._applyChildrenMarix(h)}},j.prototype.applyMatrix=function(y){var n=this.getTotalMatrix();A.prototype.applyMatrix.call(this,y);var s=this.getTotalMatrix();s!==n&&this._applyChildrenMarix(s)},j.prototype._applyChildrenMarix=function(y){var n=this.getChildren();Object(b.a)(n,function(s){s.applyMatrix(y)})},j.prototype.addShape=function(){for(var y=[],n=0;n<arguments.length;n++)y[n]=arguments[n];var s=y[0],h=y[1];Object(b.f)(s)?h=s:h.type=s;var M=S[h.type];M||(M=Object(b.k)(h.type),S[h.type]=M);var O=this.getShapeBase(),T=new O[M](h);return this.add(T),T},j.prototype.addGroup=function(){for(var y=[],n=0;n<arguments.length;n++)y[n]=arguments[n];var s,h=y[0],M=y[1];if(Object(b.d)(h))s=new h(M||{parent:this});else{var O=h||{},T=this.getGroupBase();s=new T(O)}return this.add(s),s},j.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},j.prototype.getShape=function(y,n,s){if(!Object(b.b)(this))return null;var h,M=this.getChildren();if(this.isCanvas())h=this._findShape(M,y,n,s);else{var O=[y,n,1];O=this.invertFromMatrix(O),this.isClipped(O[0],O[1])||(h=this._findShape(M,O[0],O[1],s))}return h},j.prototype._findShape=function(y,n,s,h){for(var M=null,O=y.length-1;O>=0;O--){var T=y[O];if(Object(b.b)(T)&&(T.isGroup()?M=T.getShape(n,s,h):T.isHit(n,s)&&(M=T)),M)break}return M},j.prototype.add=function(y){var n=this.getCanvas(),s=this.getChildren(),h=this.get("timeline"),M=y.getParent();M&&function(O,T,v){v===void 0&&(v=!0),v?T.destroy():(T.set("parent",null),T.set("canvas",null)),Object(b.j)(O.getChildren(),T)}(M,y,!1),y.set("parent",this),n&&function O(T,v){if(T.set("canvas",v),T.isGroup()){var m=T.get("children");m.length&&m.forEach(function(C){O(C,v)})}}(y,n),h&&function O(T,v){if(T.set("timeline",v),T.isGroup()){var m=T.get("children");m.length&&m.forEach(function(C){O(C,v)})}}(y,h),s.push(y),y.onCanvasChange("add"),this._applyElementMatrix(y)},j.prototype._applyElementMatrix=function(y){var n=this.getTotalMatrix();n&&y.applyMatrix(n)},j.prototype.getChildren=function(){return this.get("children")},j.prototype.sort=function(){var y,n=this.getChildren();Object(b.a)(n,function(s,h){return s._INDEX=h,s}),n.sort((y=function(h,M){return h.get("zIndex")-M.get("zIndex")},function(s,h){var M=y(s,h);return M===0?s._INDEX-h._INDEX:M})),this.onCanvasChange("sort")},j.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var y=this.getChildren(),n=y.length-1;n>=0;n--)y[n].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},j.prototype.destroy=function(){this.get("destroyed")||(this.clear(),A.prototype.destroy.call(this))},j.prototype.getFirst=function(){return this.getChildByIndex(0)},j.prototype.getLast=function(){var y=this.getChildren();return this.getChildByIndex(y.length-1)},j.prototype.getChildByIndex=function(y){return this.getChildren()[y]},j.prototype.getCount=function(){return this.getChildren().length},j.prototype.contain=function(y){return this.getChildren().indexOf(y)>-1},j.prototype.removeChild=function(y,n){n===void 0&&(n=!0),this.contain(y)&&y.remove(n)},j.prototype.findAll=function(y){var n=[],s=this.getChildren();return Object(b.a)(s,function(h){y(h)&&n.push(h),h.isGroup()&&(n=n.concat(h.findAll(y)))}),n},j.prototype.find=function(y){var n=null,s=this.getChildren();return Object(b.a)(s,function(h){if(y(h)?n=h:h.isGroup()&&(n=h.find(y)),n)return!1}),n},j.prototype.findById=function(y){return this.find(function(n){return n.get("id")===y})},j.prototype.findByClassName=function(y){return this.find(function(n){return n.get("className")===y})},j.prototype.findAllByName=function(y){return this.findAll(function(n){return n.get("name")===y})},j}(p.a);E.a=l},function(a,E,e){"use strict";var r=e(1),p=e(0),b=e(10),S=e(19),l=e(39),A=e(115),j=b.a.transform,y=["zIndex","capture","visible","type"],n=["repeat"];function s(T,v){var m={},C=v.attrs;for(var D in T)m[D]=C[D];return m}function h(T,v){var m={},C=v.attr();return Object(p.f)(T,function(D,Y){n.indexOf(Y)!==-1||Object(p.q)(C[Y],D)||(m[Y]=D)}),m}function M(T,v){if(v.onFrame)return T;var m=v.startTime,C=v.delay,D=v.duration,Y=Object.prototype.hasOwnProperty;return Object(p.f)(T,function(Z){m+C<Z.startTime+Z.delay+Z.duration&&D>Z.delay&&Object(p.f)(v.toAttrs,function(et,dt){Y.call(Z.toAttrs,dt)&&(delete Z.toAttrs[dt],delete Z.fromAttrs[dt])})}),T}var O=function(T){function v(m){var C=T.call(this,m)||this;C.attrs={};var D=C.getDefaultAttrs();return Object(p.A)(D,m.attrs),C.attrs=D,C.initAttrs(D),C.initAnimate(),C}return Object(r.b)(v,T),v.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},v.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},v.prototype.onCanvasChange=function(m){},v.prototype.initAttrs=function(m){},v.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},v.prototype.isGroup=function(){return!1},v.prototype.getParent=function(){return this.get("parent")},v.prototype.getCanvas=function(){return this.get("canvas")},v.prototype.attr=function(){for(var m,C=[],D=0;D<arguments.length;D++)C[D]=arguments[D];var Y=C[0],Z=C[1];if(!Y)return this.attrs;if(Object(p.v)(Y)){for(var et in Y)this.setAttr(et,Y[et]);return this.afterAttrsChange(Y),this}return C.length===2?(this.setAttr(Y,Z),this.afterAttrsChange(((m={})[Y]=Z,m)),this):this.attrs[Y]},v.prototype.isClipped=function(m,C){var D=this.getClip();return D&&!D.isHit(m,C)},v.prototype.setAttr=function(m,C){var D=this.attrs[m];D!==C&&(this.attrs[m]=C,this.onAttrChange(m,C,D))},v.prototype.onAttrChange=function(m,C,D){m==="matrix"&&this.set("totalMatrix",null)},v.prototype.afterAttrsChange=function(m){if(this.cfg.isClipShape){var C=this.cfg.applyTo;C&&C.onCanvasChange("clip")}else this.onCanvasChange("attr")},v.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},v.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},v.prototype.setZIndex=function(m){this.set("zIndex",m);var C=this.getParent();return C&&C.sort(),this},v.prototype.toFront=function(){var m=this.getParent();if(m){var C=m.getChildren(),D=(this.get("el"),C.indexOf(this));C.splice(D,1),C.push(this),this.onCanvasChange("zIndex")}},v.prototype.toBack=function(){var m=this.getParent();if(m){var C=m.getChildren(),D=(this.get("el"),C.indexOf(this));C.splice(D,1),C.unshift(this),this.onCanvasChange("zIndex")}},v.prototype.remove=function(m){m===void 0&&(m=!0);var C=this.getParent();C?(Object(S.j)(C.getChildren(),this),C.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),m&&this.destroy()},v.prototype.resetMatrix=function(){this.attr("matrix",this.getDefaultMatrix()),this.onCanvasChange("matrix")},v.prototype.getMatrix=function(){return this.attr("matrix")},v.prototype.setMatrix=function(m){this.attr("matrix",m),this.onCanvasChange("matrix")},v.prototype.getTotalMatrix=function(){var m=this.cfg.totalMatrix;if(!m){var C=this.attr("matrix"),D=this.cfg.parentMatrix;m=D&&C?Object(l.b)(D,C):C||D,this.set("totalMatrix",m)}return m},v.prototype.applyMatrix=function(m){var C=this.attr("matrix"),D=null;D=m&&C?Object(l.b)(m,C):C||m,this.set("totalMatrix",D),this.set("parentMatrix",m)},v.prototype.getDefaultMatrix=function(){return null},v.prototype.applyToMatrix=function(m){var C=this.attr("matrix");return C?Object(l.c)(C,m):m},v.prototype.invertFromMatrix=function(m){var C=this.attr("matrix");if(C){var D=Object(l.a)(C);if(D)return Object(l.c)(D,m)}return m},v.prototype.setClip=function(m){var C=this.getCanvas(),D=null;if(m){var Y=this.getShapeBase()[Object(p.I)(m.type)];Y&&(D=new Y({type:m.type,isClipShape:!0,applyTo:this,attrs:m.attrs,canvas:C}))}return this.set("clipShape",D),this.onCanvasChange("clip"),D},v.prototype.getClip=function(){var m=this.cfg.clipShape;return m||null},v.prototype.clone=function(){var m=this,C=this.attrs,D={};Object(p.f)(C,function(Z,et){Object(p.m)(C[et])?D[et]=function(dt){for(var ht=[],St=0;St<dt.length;St++)Object(p.m)(dt[St])?ht.push([].concat(dt[St])):ht.push(dt[St]);return ht}(C[et]):D[et]=C[et]});var Y=new this.constructor({attrs:D});return Object(p.f)(y,function(Z){Y.set(Z,m.get(Z))}),Y},v.prototype.destroy=function(){this.destroyed||(this.attrs={},T.prototype.destroy.call(this))},v.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},v.prototype.animate=function(){for(var m=[],C=0;C<arguments.length;C++)m[C]=arguments[C];var D=this.isCanvas&&this.isCanvas();if(D||this.get("canvas")){this.set("animating",!0);var Y=this.get("timeline");Y||(Y=this.get("canvas").get("timeline"),this.set("timeline",Y));var Z=this.get("animations")||[];Y.timer||Y.initTimer();var et,dt,ht,St,wt,xt=m[0],ft=m[1],Bt=m[2],Rt=Bt===void 0?"easeLinear":Bt,Ot=m[3],X=Ot===void 0?p.C:Ot,ut=m[4],vt=ut===void 0?0:ut;Object(p.r)(xt)?(et=xt,xt={}):Object(p.v)(xt)&&xt.onFrame&&(et=xt.onFrame,dt=xt.repeat),Object(p.v)(ft)?(ft=(wt=ft).duration,Rt=wt.easing||"easeLinear",vt=wt.delay||0,dt=wt.repeat||dt||!1,X=wt.callback||p.C,ht=wt.pauseCallback||p.C,St=wt.resumeCallback||p.C):(Object(p.t)(X)&&(vt=X,X=null),Object(p.r)(Rt)?(X=Rt,Rt="easeLinear"):Rt=Rt||"easeLinear");var pt=h(xt,this),Et={fromAttrs:s(pt,this),toAttrs:pt,duration:ft,easing:Rt,repeat:dt,callback:X,pauseCallback:ht,resumeCallback:St,delay:vt,startTime:Y.getTime(),id:Object(p.H)(),onFrame:et,pathFormatted:!1};Z.length>0?Z=M(Z,Et):Y.addAnimator(this),Z.push(Et),this.set("animations",Z),this.set("_pause",{isPaused:!1})}},v.prototype.stopAnimate=function(m){var C=this;m===void 0&&(m=!0);var D=this.get("animations");Object(p.f)(D,function(Y){m&&(Y.onFrame?C.attr(Y.onFrame(1)):C.attr(Y.toAttrs)),Y.callback&&Y.callback()}),this.set("animating",!1),this.set("animations",[])},v.prototype.pauseAnimate=function(){var m=this.get("timeline"),C=this.get("animations"),D=m.getTime();return Object(p.f)(C,function(Y){Y._paused=!0,Y._pauseTime=D,Y.pauseCallback&&Y.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:D}),this},v.prototype.resumeAnimate=function(){var m=this.get("timeline").getTime(),C=this.get("animations"),D=this.get("_pause").pauseTime;return Object(p.f)(C,function(Y){Y.startTime=Y.startTime+(m-D),Y._paused=!1,Y._pauseTime=null,Y.resumeCallback&&Y.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",C),this},v.prototype.emitDelegation=function(m,C){var D,Y=this,Z=C.propagationPath;this.getEvents(),m==="mouseenter"?D=C.fromShape:m==="mouseleave"&&(D=C.toShape);for(var et=function(wt){var xt=Z[wt],ft=xt.get("name");if(ft){if((xt.isGroup()||xt.isCanvas&&xt.isCanvas())&&D&&Object(S.g)(xt,D))return"break";Object(p.m)(ft)?Object(p.f)(ft,function(Bt){Y.emitDelegateEvent(xt,Bt,C)}):dt.emitDelegateEvent(xt,ft,C)}},dt=this,ht=0;ht<Z.length&&et(ht)!=="break";ht++);},v.prototype.emitDelegateEvent=function(m,C,D){var Y=this.getEvents(),Z=C+":"+D.type;(Y[Z]||Y["*"])&&(D.name=Z,D.currentTarget=m,D.delegateTarget=this,D.delegateObject=m.get("delegateObject"),this.emit(Z,D))},v.prototype.translate=function(m,C){m===void 0&&(m=0),C===void 0&&(C=0);var D=this.getMatrix(),Y=j(D,[["t",m,C]]);return this.setMatrix(Y),this},v.prototype.move=function(m,C){var D=this.attr("x")||0,Y=this.attr("y")||0;return this.translate(m-D,C-Y),this},v.prototype.moveTo=function(m,C){return this.move(m,C)},v.prototype.scale=function(m,C){var D=this.getMatrix(),Y=j(D,[["s",m,C||m]]);return this.setMatrix(Y),this},v.prototype.rotate=function(m){var C=this.getMatrix(),D=j(C,[["r",m]]);return this.setMatrix(D),this},v.prototype.rotateAtStart=function(m){var C=this.attr(),D=C.x,Y=C.y,Z=this.getMatrix(),et=j(Z,[["t",-D,-Y],["r",m],["t",D,Y]]);return this.setMatrix(et),this},v.prototype.rotateAtPoint=function(m,C,D){var Y=this.getMatrix(),Z=j(Y,[["t",-m,-C],["r",D],["t",m,C]]);return this.setMatrix(Z),this},v}(A.a);E.a=O},function(a,E,e){"use strict";(function(r){e.d(E,"a",function(){return h});var p=function(){for(var v=0,m=0,C=arguments.length;m<C;m++)v+=arguments[m].length;var D=Array(v),Y=0;for(m=0;m<C;m++)for(var Z=arguments[m],et=0,dt=Z.length;et<dt;et++,Y++)D[Y]=Z[et];return D},b=function(v,m,C){this.name=v,this.version=m,this.os=C,this.type="browser"},S=function(v){this.version=v,this.type="node",this.name="node",this.os=r.platform},l=function(v,m,C,D){this.name=v,this.version=m,this.os=C,this.bot=D,this.type="bot-device"},A=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},j=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},y=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,n=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],s=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function h(T){return T?O(T):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new j:typeof navigator!="undefined"?O(navigator.userAgent):r!==void 0&&r.version?new S(r.version.slice(1)):null}function M(T){return T!==""&&n.reduce(function(v,m){var C=m[0],D=m[1];if(v)return v;var Y=D.exec(T);return!!Y&&[C,Y]},!1)}function O(T){var v=M(T);if(!v)return null;var m=v[0],C=v[1];if(m==="searchbot")return new A;var D=C[1]&&C[1].split(/[._]/).slice(0,3);D?D.length<3&&(D=p(D,function(dt){for(var ht=[],St=0;St<dt;St++)ht.push("0");return ht}(3-D.length))):D=[];var Y=D.join("."),Z=function(dt){for(var ht=0,St=s.length;ht<St;ht++){var wt=s[ht],xt=wt[0];if(wt[1].exec(dt))return xt}return null}(T),et=y.exec(T);return et&&et[1]?new l(m,Y,Z,et[1]):new b(m,Y,Z)}}).call(this,e(158))},function(a,E,e){"use strict";e.d(E,"b",function(){return j}),e.d(E,"a",function(){return y});var r=e(17),p=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,b=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,S=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,l=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function A(n,s){var h=n.match(l);Object(r.c)(h,function(M){var O=M.split(":");s.addColorStop(O[0],O[1])})}function j(n,s,h){if(Object(r.k)(h)){if(h[1]==="("||h[2]==="("){if(h[0]==="l")return function(M,O,T){var v,m,C=p.exec(T),D=parseFloat(C[1])%360*(Math.PI/180),Y=C[2],Z=O.getBBox();D>=0&&D<.5*Math.PI?(v={x:Z.minX,y:Z.minY},m={x:Z.maxX,y:Z.maxY}):.5*Math.PI<=D&&D<Math.PI?(v={x:Z.maxX,y:Z.minY},m={x:Z.minX,y:Z.maxY}):Math.PI<=D&&D<1.5*Math.PI?(v={x:Z.maxX,y:Z.maxY},m={x:Z.minX,y:Z.minY}):(v={x:Z.minX,y:Z.maxY},m={x:Z.maxX,y:Z.minY});var et=Math.tan(D),dt=et*et,ht=(m.x-v.x+et*(m.y-v.y))/(dt+1)+v.x,St=et*(m.x-v.x+et*(m.y-v.y))/(dt+1)+v.y,wt=M.createLinearGradient(v.x,v.y,ht,St);return A(Y,wt),wt}(n,s,h);if(h[0]==="r")return function(M,O,T){var v=b.exec(T),m=parseFloat(v[1]),C=parseFloat(v[2]),D=parseFloat(v[3]),Y=v[4];if(D===0){var Z=Y.match(l);return Z[Z.length-1].split(":")[1]}var et=O.getBBox(),dt=et.maxX-et.minX,ht=et.maxY-et.minY,St=Math.sqrt(dt*dt+ht*ht)/2,wt=M.createRadialGradient(et.minX+dt*m,et.minY+ht*C,0,et.minX+dt/2,et.minY+ht/2,D*St);return A(Y,wt),wt}(n,s,h);if(h[0]==="p")return function(M,O,T){if(O.get("patternSource")&&O.get("patternSource")===T)return O.get("pattern");var v,m,C=S.exec(T),D=C[1],Y=C[2];function Z(){v=M.createPattern(m,D),O.set("pattern",v),O.set("patternSource",T)}switch(D){case"a":D="repeat";break;case"x":D="repeat-x";break;case"y":D="repeat-y";break;case"n":D="no-repeat";break;default:D="no-repeat"}return m=new Image,Y.match(/^data:/i)||(m.crossOrigin="Anonymous"),m.src=Y,m.complete?Z():(m.onload=Z,m.src=m.src),v}(n,s,h)}return h}}function y(n){var s=0,h=0,M=0,O=0;return Object(r.g)(n)?n.length===1?s=h=M=O=n[0]:n.length===2?(s=M=n[0],h=O=n[1]):n.length===3?(s=n[0],h=O=n[1],M=n[2]):(s=n[0],h=n[1],M=n[2],O=n[3]):s=h=M=O=n,[s,h,M,O]}},function(a,E,e){"use strict";e.r(E),e.d(E,"gpuDetector",function(){return r});var r=function p(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var b=document.createElement("canvas");return!(!window.WebGLRenderingContext||!b.getContext("webgl")&&!b.getContext("experimental-webgl"))}catch(S){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var S=document.createElement("div");return S.id="webgl-error-message",S.style.fontFamily="monospace",S.style.fontSize="13px",S.style.fontWeight="normal",S.style.textAlign="center",S.style.background="#fff",S.style.color="#000",S.style.padding="1.5em",S.style.width="400px",S.style.margin="5em auto 0",this.webgl||(S.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),S},addGetWebGLMessage:function(S){var l=(S=S||{}).parent!==void 0?S.parent:document.body,A=S.id!==void 0?S.id:"oldie",j=p().getWebGLErrorMessage();j.id=A,l.appendChild(j)}}}},function(a,E,e){"use strict";e.d(E,"a",function(){return r});var r={};e.r(r),e.d(r,"leftTranslate",function(){return b}),e.d(r,"leftRotate",function(){return S}),e.d(r,"leftScale",function(){return l}),e.d(r,"transform",function(){return A}),e.d(r,"direction",function(){return j}),e.d(r,"angleTo",function(){return y}),e.d(r,"vertical",function(){return n});var p=e(2);function b(s,h,M){var O=[0,0,0,0,0,0,0,0,0];return p.a.fromTranslation(O,M),p.a.multiply(s,O,h)}function S(s,h,M){var O=[0,0,0,0,0,0,0,0,0];return p.a.fromRotation(O,M),p.a.multiply(s,O,h)}function l(s,h,M){var O=[0,0,0,0,0,0,0,0,0];return p.a.fromScaling(O,M),p.a.multiply(s,O,h)}function A(s,h){for(var M,O,T,v=s?[].concat(s):[1,0,0,0,1,0,0,0,1],m=0,C=h.length;m<C;m++){var D=h[m];switch(D[0]){case"t":b(v,v,[D[1],D[2]]);break;case"s":l(v,v,[D[1],D[2]]);break;case"r":S(v,v,D[1]);break;case"m":M=v,O=v,T=D[1],p.a.multiply(M,T,O)}}return v}function j(s,h){return s[0]*h[1]-h[0]*s[1]}function y(s,h,M){var O=p.d.angle(s,h),T=j(s,h)>=0;return M?T?2*Math.PI-O:O:T?O:2*Math.PI-O}function n(s,h,M){return M?(s[0]=h[1],s[1]=-1*h[0]):(s[0]=-1*h[1],s[1]=h[0]),s}},function(a,E,e){"use strict";e.r(E),e.d(E,"mixColor",function(){return O}),e.d(E,"getColorsWithSubjectColor",function(){return T}),e.d(E,"getColorSetsBySubjectColors",function(){return v});var r=e(82),p=e.n(r),b=e(93),S=e.n(b),l=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function A(m,C,D){var Y;return(Y=Math.round(m.h)>=60&&Math.round(m.h)<=240?D?Math.round(m.h)-2*C:Math.round(m.h)+2*C:D?Math.round(m.h)+2*C:Math.round(m.h)-2*C)<0?Y+=360:Y>=360&&(Y-=360),Y}function j(m,C,D){return m.h===0&&m.s===0?m.s:((Y=D?m.s-.16*C:C===4?m.s+.16:m.s+.05*C)>1&&(Y=1),D&&C===5&&Y>.1&&(Y=.1),Y<.06&&(Y=.06),Number(Y.toFixed(2)));var Y}function y(m,C,D){var Y;return(Y=D?m.v+.05*C:m.v-.15*C)>1&&(Y=1),Number(Y.toFixed(2))}function n(m){for(var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},D=[],Y=S()(m),Z=5;Z>0;Z-=1){var et=Y.toHsv(),dt=S()({h:A(et,Z,!0),s:j(et,Z,!0),v:y(et,Z,!0)}).toHexString();D.push(dt)}D.push(Y.toHexString());for(var ht=1;ht<=4;ht+=1){var St=Y.toHsv(),wt=S()({h:A(St,ht),s:j(St,ht),v:y(St,ht)}).toHexString();D.push(wt)}return C.theme==="dark"?l.map(function(xt){var ft=xt.index,Bt=xt.opacity;return S.a.mix(C.backgroundColor||"#141414",D[ft],100*Bt).toHexString()}):D}var s={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},h={},M={};Object.keys(s).forEach(function(m){h[m]=n(s[m]),h[m].primary=h[m][5],M[m]=n(s[m],{theme:"dark",backgroundColor:"#141414"}),M[m].primary=M[m][5]}),h.red,h.volcano,h.gold,h.orange,h.yellow,h.lime,h.green,h.cyan,h.blue,h.geekblue,h.purple,h.magenta,h.grey;var O=function(C,D,Y){var Z=p()(C),et=p()(D);return p()([(1-Y)*Z.red()+Y*et.red(),(1-Y)*Z.green()+Y*et.green(),(1-Y)*Z.blue()+Y*et.blue()]).rgb()},T=function(C,D,Y,Z){return D===void 0&&(D="#fff"),Y===void 0&&(Y="default"),Z===void 0&&(Z="rgb(150, 150, 150)"),Y==="default"?function(et,dt,ht){dt===void 0&&(dt="#fff"),ht===void 0&&(ht="rgb(150, 150, 150)");var St=O(dt,et,.05).rgb().toString(),wt=O(dt,et,.1).rgb().toString(),xt=O(dt,et,.2).rgb().toString(),ft=O(dt,et,.4).rgb().toString(),Bt=O(dt,ht,.02).rgb().toString(),Rt=O(dt,ht,.05).rgb().toString(),Ot=O(dt,ht,.1).rgb().toString(),X=O(dt,ht,.2).rgb().toString(),ut=O(dt,ht,.3).rgb().toString(),vt=n(et,{theme:"default",backgroundColor:dt}),pt=p()(et).hex().toLowerCase(),Et=vt.indexOf(pt),q=et;return Et!==-1&&(q=vt[Et+1]),{mainStroke:et,mainFill:wt,activeStroke:et,activeFill:St,inactiveStroke:ft,inactiveFill:St,selectedStroke:et,selectedFill:dt,highlightStroke:q,highlightFill:xt,disableStroke:ut,disableFill:Rt,edgeMainStroke:ut,edgeActiveStroke:et,edgeInactiveStroke:X,edgeSelectedStroke:et,edgeHighlightStroke:et,edgeDisableStroke:Ot,comboMainStroke:ut,comboMainFill:Bt,comboActiveStroke:et,comboActiveFill:St,comboInactiveStroke:ut,comboInactiveFill:Bt,comboSelectedStroke:et,comboSelectedFill:Bt,comboHighlightStroke:q,comboHighlightFill:Bt,comboDisableStroke:X,comboDisableFill:Rt}}(C,D,"rgb(150, 150, 150)"):function(et,dt,ht){dt===void 0&&(dt="#fff"),ht===void 0&&(ht="#777");var St=O(dt,et,.2).rgb().toString(),wt=O(dt,et,.3).rgb().toString(),xt=O(dt,et,.6).rgb().toString(),ft=O(dt,et,.8).rgb().toString(),Bt=O(dt,ht,.2).rgb().toString(),Rt=O(dt,ht,.25).rgb().toString(),Ot=O(dt,ht,.3).rgb().toString(),X=O(dt,ht,.4).rgb().toString(),ut=O(dt,ht,.5).rgb().toString(),vt=n(et,{theme:"dark",backgroundColor:dt}),pt=p()(et).hex().toLowerCase(),Et=vt.indexOf(pt),q=et;return Et!==-1&&(q=vt[Et+1]),{mainStroke:ft,mainFill:St,activeStroke:et,activeFill:wt,inactiveStroke:ft,inactiveFill:St,selectedStroke:et,selectedFill:St,highlightStroke:et,highlightFill:xt,disableStroke:ut,disableFill:Rt,edgeMainStroke:ht,edgeActiveStroke:et,edgeInactiveStroke:ht,edgeSelectedStroke:et,edgeHighlightStroke:et,edgeDisableStroke:Ot,comboMainStroke:X,comboMainFill:Rt,comboActiveStroke:et,comboActiveFill:Bt,comboInactiveStroke:X,comboInactiveFill:Rt,comboSelectedStroke:et,comboSelectedFill:Bt,comboHighlightStroke:q,comboHighlightFill:Rt,comboDisableStroke:X,comboDisableFill:Bt}}(C,D,"#777")},v=function(C,D,Y,Z){D===void 0&&(D="#fff"),Y===void 0&&(Y="default"),Z===void 0&&(Z="rgb(150, 150, 150)");var et=[];return C.forEach(function(dt){et.push(T(dt,D,Y,Z))}),et}},function(a,E,e){"use strict";function r(n){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(n)}var p=e(42);a.exports=b;function b(n){this._isDirected=!p.has(n,"directed")||n.directed,this._isMultigraph=!!p.has(n,"multigraph")&&n.multigraph,this._isCompound=!!p.has(n,"compound")&&n.compound,this._label=void 0,this._defaultNodeLabelFn=p.constant(void 0),this._defaultEdgeLabelFn=p.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function S(n,s){n[s]?n[s]++:n[s]=1}function l(n,s){--n[s]||delete n[s]}function A(n,s,h,M){var O=""+s,T=""+h;if(!n&&O>T){var v=O;O=T,T=v}return O+""+T+""+(p.isUndefined(M)?"\0":M)}function j(n,s,h,M){var O=""+s,T=""+h;if(!n&&O>T){var v=O;O=T,T=v}var m={v:O,w:T};return M&&(m.name=M),m}function y(n,s){return A(n,s.v,s.w,s.name)}b.prototype._nodeCount=0,b.prototype._edgeCount=0,b.prototype.isDirected=function(){return this._isDirected},b.prototype.isMultigraph=function(){return this._isMultigraph},b.prototype.isCompound=function(){return this._isCompound},b.prototype.setGraph=function(n){return this._label=n,this},b.prototype.graph=function(){return this._label},b.prototype.setDefaultNodeLabel=function(n){return p.isFunction(n)||(n=p.constant(n)),this._defaultNodeLabelFn=n,this},b.prototype.nodeCount=function(){return this._nodeCount},b.prototype.nodes=function(){return p.keys(this._nodes)},b.prototype.sources=function(){var n=this;return p.filter(this.nodes(),function(s){return p.isEmpty(n._in[s])})},b.prototype.sinks=function(){var n=this;return p.filter(this.nodes(),function(s){return p.isEmpty(n._out[s])})},b.prototype.setNodes=function(n,s){var h=arguments,M=this;return p.each(n,function(O){h.length>1?M.setNode(O,s):M.setNode(O)}),this},b.prototype.setNode=function(n,s){return p.has(this._nodes,n)?(arguments.length>1&&(this._nodes[n]=s),this):(this._nodes[n]=arguments.length>1?s:this._defaultNodeLabelFn(n),this._isCompound&&(this._parent[n]="\0",this._children[n]={},this._children["\0"][n]=!0),this._in[n]={},this._preds[n]={},this._out[n]={},this._sucs[n]={},++this._nodeCount,this)},b.prototype.node=function(n){return this._nodes[n]},b.prototype.hasNode=function(n){return p.has(this._nodes,n)},b.prototype.removeNode=function(n){var s=this;if(p.has(this._nodes,n)){var h=function(O){s.removeEdge(s._edgeObjs[O])};delete this._nodes[n],this._isCompound&&(this._removeFromParentsChildList(n),delete this._parent[n],p.each(this.children(n),function(M){s.setParent(M)}),delete this._children[n]),p.each(p.keys(this._in[n]),h),delete this._in[n],delete this._preds[n],p.each(p.keys(this._out[n]),h),delete this._out[n],delete this._sucs[n],--this._nodeCount}return this},b.prototype.setParent=function(n,s){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(p.isUndefined(s))s="\0";else{for(var h=s+="";!p.isUndefined(h);h=this.parent(h))if(h===n)throw new Error("Setting "+s+" as parent of "+n+" would create a cycle");this.setNode(s)}return this.setNode(n),this._removeFromParentsChildList(n),this._parent[n]=s,this._children[s][n]=!0,this},b.prototype._removeFromParentsChildList=function(n){delete this._children[this._parent[n]][n]},b.prototype.parent=function(n){if(this._isCompound){var s=this._parent[n];if(s!=="\0")return s}},b.prototype.children=function(n){if(p.isUndefined(n)&&(n="\0"),this._isCompound){var s=this._children[n];if(s)return p.keys(s)}else{if(n==="\0")return this.nodes();if(this.hasNode(n))return[]}},b.prototype.predecessors=function(n){var s=this._preds[n];if(s)return p.keys(s)},b.prototype.successors=function(n){var s=this._sucs[n];if(s)return p.keys(s)},b.prototype.neighbors=function(n){var s=this.predecessors(n);if(s)return p.union(s,this.successors(n))},b.prototype.isLeaf=function(n){return(this.isDirected()?this.successors(n):this.neighbors(n)).length===0},b.prototype.filterNodes=function(n){var s=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});s.setGraph(this.graph());var h=this;p.each(this._nodes,function(O,T){n(T)&&s.setNode(T,O)}),p.each(this._edgeObjs,function(O){s.hasNode(O.v)&&s.hasNode(O.w)&&s.setEdge(O,h.edge(O))});var M={};return this._isCompound&&p.each(s.nodes(),function(O){s.setParent(O,function T(v){var m=h.parent(v);return m===void 0||s.hasNode(m)?(M[v]=m,m):m in M?M[m]:T(m)}(O))}),s},b.prototype.setDefaultEdgeLabel=function(n){return p.isFunction(n)||(n=p.constant(n)),this._defaultEdgeLabelFn=n,this},b.prototype.edgeCount=function(){return this._edgeCount},b.prototype.edges=function(){return p.values(this._edgeObjs)},b.prototype.setPath=function(n,s){var h=this,M=arguments;return p.reduce(n,function(O,T){return M.length>1?h.setEdge(O,T,s):h.setEdge(O,T),T}),this},b.prototype.setEdge=function(){var n,s,h,M,O=!1,T=arguments[0];r(T)==="object"&&T!==null&&"v"in T?(n=T.v,s=T.w,h=T.name,arguments.length===2&&(M=arguments[1],O=!0)):(n=T,s=arguments[1],h=arguments[3],arguments.length>2&&(M=arguments[2],O=!0)),n=""+n,s=""+s,p.isUndefined(h)||(h=""+h);var v=A(this._isDirected,n,s,h);if(p.has(this._edgeLabels,v))return O&&(this._edgeLabels[v]=M),this;if(!p.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(n),this.setNode(s),this._edgeLabels[v]=O?M:this._defaultEdgeLabelFn(n,s,h);var m=j(this._isDirected,n,s,h);return n=m.v,s=m.w,Object.freeze(m),this._edgeObjs[v]=m,S(this._preds[s],n),S(this._sucs[n],s),this._in[s][v]=m,this._out[n][v]=m,this._edgeCount++,this},b.prototype.edge=function(n,s,h){var M=arguments.length===1?y(this._isDirected,arguments[0]):A(this._isDirected,n,s,h);return this._edgeLabels[M]},b.prototype.hasEdge=function(n,s,h){var M=arguments.length===1?y(this._isDirected,arguments[0]):A(this._isDirected,n,s,h);return p.has(this._edgeLabels,M)},b.prototype.removeEdge=function(n,s,h){var M=arguments.length===1?y(this._isDirected,arguments[0]):A(this._isDirected,n,s,h),O=this._edgeObjs[M];return O&&(n=O.v,s=O.w,delete this._edgeLabels[M],delete this._edgeObjs[M],l(this._preds[s],n),l(this._sucs[n],s),delete this._in[s][M],delete this._out[n][M],this._edgeCount--),this},b.prototype.inEdges=function(n,s){var h=this._in[n];if(h){var M=p.values(h);return s?p.filter(M,function(O){return O.v===s}):M}},b.prototype.outEdges=function(n,s){var h=this._out[n];if(h){var M=p.values(h);return s?p.filter(M,function(O){return O.w===s}):M}},b.prototype.nodeEdges=function(n,s){var h=this.inEdges(n,s);if(h)return h.concat(this.outEdges(n,s))}},function(a,E,e){var r=e(64)(e(47),"Map");a.exports=r},function(a,E,e){var r=e(289),p=e(296),b=e(298),S=e(299),l=e(300);function A(j){var y=-1,n=j==null?0:j.length;for(this.clear();++y<n;){var s=j[y];this.set(s[0],s[1])}}A.prototype.clear=r,A.prototype.delete=p,A.prototype.get=b,A.prototype.has=S,A.prototype.set=l,a.exports=A},function(a,E){a.exports=function(e,r){for(var p=-1,b=e==null?0:e.length;++p<b&&r(e[p],p,e)!==!1;);return e}},function(a,E){a.exports=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991}},function(a,E,e){(function(r){function p(y){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(y)}var b=e(163),S=p(E)=="object"&&E&&!E.nodeType&&E,l=S&&p(r)=="object"&&r&&!r.nodeType&&r,A=l&&l.exports===S&&b.process,j=function(){try{var y=l&&l.require&&l.require("util").types;return y||A&&A.binding&&A.binding("util")}catch(n){}}();r.exports=j}).call(this,e(86)(a))},function(a,E,e){var r=e(104),p=e(306),b=Object.prototype.hasOwnProperty;a.exports=function(S){if(!r(S))return p(S);var l=[];for(var A in Object(S))b.call(S,A)&&A!="constructor"&&l.push(A);return l}},function(a,E,e){var r=e(171),p=e(172),b=Object.prototype.propertyIsEnumerable,S=Object.getOwnPropertySymbols,l=S?function(A){return A==null?[]:(A=Object(A),r(S(A),function(j){return b.call(A,j)}))}:p;a.exports=l},function(a,E){a.exports=function(e,r){for(var p=-1,b=r.length,S=e.length;++p<b;)e[S+p]=r[p];return e}},function(a,E,e){var r=e(177);a.exports=function(p){var b=new p.constructor(p.byteLength);return new r(b).set(new r(p)),b}},function(a,E){a.exports=function(e){return function(){return e}}},function(a,E,e){var r=e(136),p=e(58);a.exports=function(b,S){return b&&r(b,S,p)}},function(a,E,e){var r=e(325)();a.exports=r},function(a,E){a.exports=function(e){var r=-1,p=Array(e.size);return e.forEach(function(b){p[++r]=b}),p}},function(a,E,e){function r(A){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(A)}var p=e(26),b=e(75),S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/;a.exports=function(A,j){if(p(A))return!1;var y=r(A);return!(y!="number"&&y!="symbol"&&y!="boolean"&&A!=null&&!b(A))||l.test(A)||!S.test(A)||j!=null&&A in Object(j)}},function(a,E,e){var r=e(132),p=e(359);a.exports=function b(S,l,A,j,y){var n=-1,s=S.length;for(A||(A=p),y||(y=[]);++n<s;){var h=S[n];l>0&&A(h)?l>1?b(h,l-1,A,j,y):r(y,h):j||(y[y.length]=h)}return y}},function(a,E,e){var r=e(75);a.exports=function(p,b,S){for(var l=-1,A=p.length;++l<A;){var j=p[l],y=b(j);if(y!=null&&(n===void 0?y==y&&!r(y):S(y,n)))var n=y,s=j}return s}},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.BindingOnSyntax=void 0;var r=e(142),p=function(){function b(S){this._binding=S}return b.prototype.onActivation=function(S){return this._binding.onActivation=S,new r.BindingWhenSyntax(this._binding)},b}();E.BindingOnSyntax=p},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.BindingWhenSyntax=void 0;var r=e(141),p=e(225),b=function(){function S(l){this._binding=l}return S.prototype.when=function(l){return this._binding.constraint=l,new r.BindingOnSyntax(this._binding)},S.prototype.whenTargetNamed=function(l){return this._binding.constraint=p.namedConstraint(l),new r.BindingOnSyntax(this._binding)},S.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(l){return l.target!==null&&!l.target.isNamed()&&!l.target.isTagged()},new r.BindingOnSyntax(this._binding)},S.prototype.whenTargetTagged=function(l,A){return this._binding.constraint=p.taggedConstraint(l)(A),new r.BindingOnSyntax(this._binding)},S.prototype.whenInjectedInto=function(l){return this._binding.constraint=function(A){return p.typeConstraint(l)(A.parentRequest)},new r.BindingOnSyntax(this._binding)},S.prototype.whenParentNamed=function(l){return this._binding.constraint=function(A){return p.namedConstraint(l)(A.parentRequest)},new r.BindingOnSyntax(this._binding)},S.prototype.whenParentTagged=function(l,A){return this._binding.constraint=function(j){return p.taggedConstraint(l)(A)(j.parentRequest)},new r.BindingOnSyntax(this._binding)},S.prototype.whenAnyAncestorIs=function(l){return this._binding.constraint=function(A){return p.traverseAncerstors(A,p.typeConstraint(l))},new r.BindingOnSyntax(this._binding)},S.prototype.whenNoAncestorIs=function(l){return this._binding.constraint=function(A){return!p.traverseAncerstors(A,p.typeConstraint(l))},new r.BindingOnSyntax(this._binding)},S.prototype.whenAnyAncestorNamed=function(l){return this._binding.constraint=function(A){return p.traverseAncerstors(A,p.namedConstraint(l))},new r.BindingOnSyntax(this._binding)},S.prototype.whenNoAncestorNamed=function(l){return this._binding.constraint=function(A){return!p.traverseAncerstors(A,p.namedConstraint(l))},new r.BindingOnSyntax(this._binding)},S.prototype.whenAnyAncestorTagged=function(l,A){return this._binding.constraint=function(j){return p.traverseAncerstors(j,p.taggedConstraint(l)(A))},new r.BindingOnSyntax(this._binding)},S.prototype.whenNoAncestorTagged=function(l,A){return this._binding.constraint=function(j){return!p.traverseAncerstors(j,p.taggedConstraint(l)(A))},new r.BindingOnSyntax(this._binding)},S.prototype.whenAnyAncestorMatches=function(l){return this._binding.constraint=function(A){return p.traverseAncerstors(A,l)},new r.BindingOnSyntax(this._binding)},S.prototype.whenNoAncestorMatches=function(l){return this._binding.constraint=function(A){return!p.traverseAncerstors(A,l)},new r.BindingOnSyntax(this._binding)},S}();E.BindingWhenSyntax=b},function(a,E){},function(a,E){},function(a,E){},function(a,E){},function(a,E){},function(a,E){},function(a,E){},function(a,E){a.exports=function(e,r,p){return e[0]=r[0]-p[0],e[1]=r[1]-p[1],e}},function(a,E,e){var r=e(57),p=e(105),b=e(48),S=Function.prototype,l=Object.prototype,A=S.toString,j=l.hasOwnProperty,y=A.call(Object);a.exports=function(n){if(!b(n)||r(n)!="[object Object]")return!1;var s=p(n);if(s===null)return!0;var h=j.call(s,"constructor")&&s.constructor;return typeof h=="function"&&h instanceof h&&A.call(h)==y}},function(a,E,e){"use strict";var r=e(1),p=e(155),b=e.n(p),S=e(0),l=e(38),A=e(91),j=l.a.radialLayout,y=l.a.traverseTree,n=function(s){function h(M){var O=s.call(this,M)||this;return O.layoutAnimating=!1,O.set("removeList",[]),O.set("layoutMethod",O.getLayout()),O}return Object(r.b)(h,s),h.prototype.getLayout=function(){var M=this.get("layout");return M?typeof M=="function"?M:(M.type||(M.type="dendrogram"),M.direction||(M.direction="TB"),M.radial?function(O){var T=b.a[M.type](O,M);return j(T),T}:function(O){return b.a[M.type](O,M)}):null},h.indexOfChild=function(M,O){var T=-1;return Object(S.f)(M,function(v,m){if(O===v.id)return T=m,!1}),T},h.prototype.getDefaultCfg=function(){var M=s.prototype.getDefaultCfg.call(this);return M.animate=!0,M},h.prototype.innerAddChild=function(M,O,T){var v=this,m=M.data;m&&(m.x=M.x,m.y=M.y,m.depth=M.depth);var C=v.addItem("node",m,!1);if(O){if(C.set("parent",O),T){var D=O.get("originAttrs");if(D)C.set("originAttrs",D);else{var Y=O.getModel();C.set("originAttrs",{x:Y.x,y:Y.y})}}var Z=O.get("children");Z?Z.push(C):O.set("children",[C]),v.addItem("edge",{source:O,target:C,id:O.get("id")+":"+C.get("id")},!1)}return Object(S.f)(M.children||[],function(et){v.innerAddChild(et,C,T)}),v.emit("afteraddchild",{item:C,parent:O}),C},h.prototype.innerUpdateChild=function(M,O,T){var v=this,m=v.findById(M.id);if(m){Object(S.f)(M.children||[],function(ht){v.innerUpdateChild(ht,m,T)});var C,D,Y=m.get("children");if(Y&&Y.length>0)for(var Z=Y.length-1;Z>=0;Z--){var et=Y[Z].getModel();h.indexOfChild(M.children||[],et.id)===-1&&(v.innerRemoveChild(et.id,{x:M.x,y:M.y},T),Y.splice(Z,1))}m.get("originAttrs")&&(C=m.get("originAttrs").x,D=m.get("originAttrs").y);var dt=m.getModel();T&&m.set("originAttrs",{x:dt.x,y:dt.y}),m.set("model",M.data),C===M.x&&D===M.y||m.updatePosition({x:M.x,y:M.y})}else v.innerAddChild(M,O,T)},h.prototype.innerRemoveChild=function(M,O,T){var v=this,m=v.findById(M);if(m)if(Object(S.f)(m.get("children"),function(D){v.innerRemoveChild(D.getModel().id,O,T)}),T){var C=m.getModel();m.set("to",O),m.set("originAttrs",{x:C.x,y:C.y}),v.get("removeList").push(m)}else v.removeItem(m)},h.prototype.changeData=function(M){var O=this;this.getNodes().map(function(T){return O.clearItemStates(T)}),this.getEdges().map(function(T){return O.clearItemStates(T)}),M?(O.data(M),O.render()):O.layout(this.get("fitView"))},h.prototype.changeLayout=function(M){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon"),this.updateLayout(M)},h.prototype.updateLayout=function(M){M?(this.set("layout",M),this.set("layoutMethod",this.getLayout()),this.layout()):console.warn("layout cannot be null")},h.prototype.refreshLayout=function(M){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon"),this.layout(M)},h.prototype.layout=function(M){var O=this.get("data"),T=this.get("layoutMethod")(O,this.get("layout")),v=this.get("animate");this.emit("beforerefreshlayout",{data:O,layoutData:T}),this.emit("beforelayout"),this.innerUpdateChild(T,void 0,v),M&&this.get("viewController").fitView(),v?this.layoutAnimate(T):(this.refresh(),this.paint()),this.emit("afterrefreshlayout",{data:O,layoutData:T}),this.emit("afterlayout")},h.prototype.addChild=function(M,O){this.emit("beforeaddchild",{model:M,parent:O}),Object(S.x)(O)||(O=O.get("id"));var T=this.findDataById(O);T&&(T.children||(T.children=[]),T.children.push(M),this.changeData())},h.prototype.updateChildren=function(M,O){O&&this.findById(O)?(this.findDataById(O).children=M,this.changeData()):console.warn("Update children failed! There is no node with id '"+O+"'")},h.prototype.updateChild=function(M,O){if(O&&this.findById(O)){var T=this.findDataById(O),v=this.findById(M.id);if(T.children||(T.children=[]),v){var m=h.indexOfChild(T.children,M.id);T.children[m]=M}else T.children.push(M);this.changeData()}else this.changeData(M)},h.prototype.removeChild=function(M){var O=this.findById(M);if(O){var T=O.get("parent");if(T&&!T.destroyed){var v=this.findDataById(T.get("id")),m=v&&v.children||[],C=O.getModel(),D=h.indexOfChild(m,C.id);m.splice(D,1)}this.changeData()}},h.prototype.findDataById=function(M,O){var T=this;if(O||(O=T.get("data")),M===O.id)return O;var v=null;return Object(S.f)(O.children||[],function(m){return m.id===M?(v=m,!1):!(v=T.findDataById(M,m))&&void 0}),v},h.prototype.layoutAnimate=function(M,O){var T=this,v=this.get("animateCfg");T.emit("beforeanimate",{data:M}),T.getEdges().forEach(function(m){var C=m.get("model");C.sourceAnchor||(C.sourceAnchor=m.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(m){y(M,function(C){var D=T.findById(C.id);if(D){var Y=D.get("originAttrs"),Z=D.get("model");if(Y||(Y={x:Z.x,y:Z.y},D.set("originAttrs",Y)),O){var et=O(D,m,Y,M);D.set("model",Object.assign(Z,et))}else Z.x=Y.x+(C.x-Y.x)*m,Z.y=Y.y+(C.y-Y.y)*m}return!0}),Object(S.f)(T.get("removeList"),function(C){var D=C.getModel(),Y=C.get("originAttrs"),Z=C.get("to");D.x=Y.x+(Z.x-Y.x)*m,D.y=Y.y+(Z.y-Y.y)*m}),T.refreshPositions()},{duration:v.duration,easing:v.ease,callback:function(){Object(S.f)(T.getNodes(),function(C){C.set("originAttrs",null)}),Object(S.f)(T.get("removeList"),function(C){T.removeItem(C)}),T.set("removeList",[]),v.callback&&v.callback(),T.emit("afteranimate",{data:M})},delay:v.delay})},h.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},h.prototype.isLayoutAnimating=function(){return this.layoutAnimating},h.prototype.render=function(){if(!this.get("data"))throw new Error("data must be defined first");this.clear(),this.emit("beforerender"),this.layout(this.get("fitView")),this.emit("afterrender")},h.prototype.save=function(){return this.get("data")},h}(A.a);E.a=n},function(a,E,e){a.exports={graphlib:e(46),layout:e(382),debug:e(440),util:{time:e(37).time,notime:e(37).notime},version:e(441)}},function(a,E,e){"use strict";var r=Object.prototype.hasOwnProperty,p="~";function b(){}function S(y,n,s){this.fn=y,this.context=n,this.once=s||!1}function l(y,n,s,h,M){if(typeof s!="function")throw new TypeError("The listener must be a function");var O=new S(s,h||y,M),T=p?p+n:n;return y._events[T]?y._events[T].fn?y._events[T]=[y._events[T],O]:y._events[T].push(O):(y._events[T]=O,y._eventsCount++),y}function A(y,n){--y._eventsCount==0?y._events=new b:delete y._events[n]}function j(){this._events=new b,this._eventsCount=0}Object.create&&(b.prototype=Object.create(null),new b().__proto__||(p=!1)),j.prototype.eventNames=function(){var y,n,s=[];if(this._eventsCount===0)return s;for(n in y=this._events)r.call(y,n)&&s.push(p?n.slice(1):n);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(y)):s},j.prototype.listeners=function(y){var n=p?p+y:y,s=this._events[n];if(!s)return[];if(s.fn)return[s.fn];for(var h=0,M=s.length,O=new Array(M);h<M;h++)O[h]=s[h].fn;return O},j.prototype.listenerCount=function(y){var n=p?p+y:y,s=this._events[n];return s?s.fn?1:s.length:0},j.prototype.emit=function(y,n,s,h,M,O){var T=p?p+y:y;if(!this._events[T])return!1;var v,m,C=this._events[T],D=arguments.length;if(C.fn){switch(C.once&&this.removeListener(y,C.fn,void 0,!0),D){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,n),!0;case 3:return C.fn.call(C.context,n,s),!0;case 4:return C.fn.call(C.context,n,s,h),!0;case 5:return C.fn.call(C.context,n,s,h,M),!0;case 6:return C.fn.call(C.context,n,s,h,M,O),!0}for(m=1,v=new Array(D-1);m<D;m++)v[m-1]=arguments[m];C.fn.apply(C.context,v)}else{var Y,Z=C.length;for(m=0;m<Z;m++)switch(C[m].once&&this.removeListener(y,C[m].fn,void 0,!0),D){case 1:C[m].fn.call(C[m].context);break;case 2:C[m].fn.call(C[m].context,n);break;case 3:C[m].fn.call(C[m].context,n,s);break;case 4:C[m].fn.call(C[m].context,n,s,h);break;default:if(!v)for(Y=1,v=new Array(D-1);Y<D;Y++)v[Y-1]=arguments[Y];C[m].fn.apply(C[m].context,v)}}return!0},j.prototype.on=function(y,n,s){return l(this,y,n,s,!1)},j.prototype.once=function(y,n,s){return l(this,y,n,s,!0)},j.prototype.removeListener=function(y,n,s,h){var M=p?p+y:y;if(!this._events[M])return this;if(!n)return A(this,M),this;var O=this._events[M];if(O.fn)O.fn!==n||h&&!O.once||s&&O.context!==s||A(this,M);else{for(var T=0,v=[],m=O.length;T<m;T++)(O[T].fn!==n||h&&!O[T].once||s&&O[T].context!==s)&&v.push(O[T]);v.length?this._events[M]=v.length===1?v[0]:v:A(this,M)}return this},j.prototype.removeAllListeners=function(y){var n;return y?(n=p?p+y:y,this._events[n]&&A(this,n)):(this._events=new b,this._eventsCount=0),this},j.prototype.off=j.prototype.removeListener,j.prototype.addListener=j.prototype.on,j.prefixed=p,j.EventEmitter=j,a.exports=j},function(a,E,e){(function(r){var p,b,S,l;function A(j){return(A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(j)}typeof self!="undefined"&&self,l=function(){return function(y){var n={};function s(h){if(n[h])return n[h].exports;var M=n[h]={i:h,l:!1,exports:{}};return y[h].call(M.exports,M,M.exports,s),M.l=!0,M.exports}return s.m=y,s.c=n,s.d=function(h,M,O){s.o(h,M)||Object.defineProperty(h,M,{configurable:!1,enumerable:!0,get:O})},s.n=function(h){var M=h&&h.__esModule?function(){return h.default}:function(){return h};return s.d(M,"a",M),M},s.o=function(h,M){return Object.prototype.hasOwnProperty.call(h,M)},s.p="",s(s.s=31)}([function(y,n,s){"use strict";var h=s(4);n.a=function(M){return Array.isArray?Array.isArray(M):Object(h.a)(M,"Array")}},function(y,n,s){"use strict";n.a=function(h){return h!==null&&typeof h!="function"&&isFinite(h.length)}},function(y,n,s){"use strict";var h=s(0),M=s(13);n.a=function(O,T){if(O){if(Object(h.a)(O))for(var v=0,m=O.length;v<m&&T(O[v],v)!==!1;v++);else if(Object(M.a)(O)){for(var C in O)if(O.hasOwnProperty(C)&&T(O[C],C)===!1)break}}}},function(y,n,s){"use strict";var h=s(4);n.a=function(M){return Object(h.a)(M,"Function")}},function(y,n,s){"use strict";var h={}.toString;n.a=function(M,O){return h.call(M)==="[object "+O+"]"}},function(y,n,s){"use strict";var h=s(4);n.a=function(M){return Object(h.a)(M,"Number")}},function(y,n,s){"use strict";n.a=function(h){return h==null}},function(y,n,s){var h=s(33).mix;y.exports={assign:h}},function(y,n,s){"use strict";var h=s(4);n.a=function(M){return Object(h.a)(M,"String")}},function(y,n,s){"use strict";var h=s(15),M=s(4);n.a=function(O){if(!Object(h.a)(O)||!Object(M.a)(O,"Object"))return!1;if(Object.getPrototypeOf(O)===null)return!0;for(var T=O;Object.getPrototypeOf(T)!==null;)T=Object.getPrototypeOf(T);return Object.getPrototypeOf(O)===T}},function(y,n,s){"use strict";var h=s(6);n.a=function(M){return Object(h.a)(M)?"":M.toString()}},function(y,n,s){var h=s(18),M=function(){function O(T,v){v===void 0&&(v={}),this.options=v,this.rootNode=h(T,v)}return O.prototype.execute=function(){throw new Error("please override this method")},O}();y.exports=M},function(y,n,s){"use strict";var h=s(1);n.a=function(M,O){return!!Object(h.a)(M)&&M.indexOf(O)>-1}},function(y,n,s){"use strict";n.a=function(h){var M=A(h);return h!==null&&M==="object"||M==="function"}},function(y,n,s){"use strict";var h=s(2),M=s(1);n.a=function(O,T){if(!Object(M.a)(O))return O;var v=[];return Object(h.a)(O,function(m,C){T(m,C)&&v.push(m)}),v}},function(y,n,s){"use strict";n.a=function(h){return A(h)==="object"&&h!==null}},function(y,n,s){"use strict";function h(M,O){for(var T in O)O.hasOwnProperty(T)&&T!=="constructor"&&O[T]!==void 0&&(M[T]=O[T])}n.a=function(M,O,T,v){return O&&h(M,O),T&&h(M,T),v&&h(M,v),M}},function(y,n,s){var h=s(30),M=["LR","RL","TB","BT","H","V"],O=["LR","RL","H"],T=M[0];y.exports=function(v,m,C){var D=m.direction||T;if(m.isHorizontal=function(St){return O.indexOf(St)>-1}(D),D&&M.indexOf(D)===-1)throw new TypeError("Invalid direction: "+D);if(D===M[0])C(v,m);else if(D===M[1])C(v,m),v.right2left();else if(D===M[2])C(v,m);else if(D===M[3])C(v,m),v.bottom2top();else if(D===M[4]||D===M[5]){var Y=h(v,m),Z=Y.left,et=Y.right;C(Z,m),C(et,m),m.isHorizontal?Z.right2left():Z.bottom2top(),et.translate(Z.x-et.x,Z.y-et.y),v.x=Z.x,v.y=et.y;var dt=v.getBoundingBox();m.isHorizontal?dt.top<0&&v.translate(0,-dt.top):dt.left<0&&v.translate(-dt.left,0)}var ht=m.fixedRoot;return ht===void 0&&(ht=!0),ht&&v.translate(-(v.x+v.width/2+v.hgap),-(v.y+v.height/2+v.vgap)),v}},function(y,n,s){var h=s(7),M={getId:function(v){return v.id||v.name},getHGap:function(v){return v.hgap||18},getVGap:function(v){return v.vgap||18},getChildren:function(v){return v.children},getHeight:function(v){return v.height||36},getWidth:function(v){var m=v.label||" ";return v.width||18*m.split("").length}};function O(T,v){var m=this;if(m.vgap=m.hgap=0,T instanceof O)return T;m.data=T;var C=v.getHGap(T),D=v.getVGap(T);return m.width=v.getWidth(T),m.height=v.getHeight(T),m.id=v.getId(T),m.x=m.y=0,m.depth=0,m.children||(m.children=[]),m.addGap(C,D),m}h.assign(O.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(v,m){this.hgap+=v,this.vgap+=m,this.width+=2*v,this.height+=2*m},eachNode:function(v){for(var m,C=[this];m=C.shift();)v(m),C=m.children.concat(C)},DFTraverse:function(v){this.eachNode(v)},BFTraverse:function(v){for(var m,C=[this];m=C.shift();)v(m),C=C.concat(m.children)},getBoundingBox:function(){var v={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(m){v.left=Math.min(v.left,m.x),v.top=Math.min(v.top,m.y),v.width=Math.max(v.width,m.x+m.width),v.height=Math.max(v.height,m.y+m.height)}),v},translate:function(v,m){v===void 0&&(v=0),m===void 0&&(m=0),this.eachNode(function(C){C.x+=v,C.y+=m})},right2left:function(){var v=this.getBoundingBox();this.eachNode(function(m){m.x=m.x-2*(m.x-v.left)-m.width}),this.translate(v.width,0)},bottom2top:function(){var v=this.getBoundingBox();this.eachNode(function(m){m.y=m.y-2*(m.y-v.top)-m.height}),this.translate(0,v.height)}}),y.exports=function(T,v,m){v===void 0&&(v={});var C,D=new O(T,v=h.assign({},M,v)),Y=[D];if(!m&&!T.collapsed){for(;C=Y.shift();)if(!C.data.collapsed){var Z=v.getChildren(C.data),et=Z?Z.length:0;if(C.children=new Array(et),Z&&et)for(var dt=0;dt<et;dt++){var ht=new O(Z[dt],v);C.children[dt]=ht,Y.push(ht),ht.parent=C,ht.depth=C.depth+1}}}return D}},function(y,n,s){"use strict";var h=s(6),M=s(20);n.a=function(O,T){var v=Object(M.a)(T),m=v.length;if(Object(h.a)(O))return!m;for(var C=0;C<m;C+=1){var D=v[C];if(T[D]!==O[D]||!(D in O))return!1}return!0}},function(y,n,s){"use strict";var h=s(2),M=s(3),O=Object.keys?function(T){return Object.keys(T)}:function(T){var v=[];return Object(h.a)(T,function(m,C){Object(M.a)(T)&&C==="prototype"||v.push(C)}),v};n.a=O},function(y,n,s){"use strict";var h=s(1),M=Array.prototype.splice;n.a=function(O,T){if(!Object(h.a)(O))return[];for(var v=O?T.length:0,m=v-1;v--;){var C=void 0,D=T[v];v!==m&&D===C||(C=D,M.call(O,D,1))}return O}},function(y,n,s){"use strict";var h=s(12),M=s(2);n.a=function(O){var T=[];return Object(M.a)(O,function(v){Object(h.a)(T,v)||T.push(v)}),T}},function(y,n,s){"use strict";var h=s(0),M=s(3),O=s(24);n.a=function(T,v){if(!v)return{0:T};if(!Object(M.a)(v)){var m=Object(h.a)(v)?v:v.replace(/\s+/g,"").split("*");v=function(D){for(var Y="_",Z=0,et=m.length;Z<et;Z++)Y+=D[m[Z]]&&D[m[Z]].toString();return Y}}return Object(O.a)(T,v)}},function(y,n,s){"use strict";var h=s(2),M=s(0),O=s(3),T=Object.prototype.hasOwnProperty;n.a=function(v,m){if(!m||!Object(M.a)(v))return{};var C,D={},Y=Object(O.a)(m)?m:function(Z){return Z[m]};return Object(h.a)(v,function(Z){C=Y(Z),T.call(D,C)?D[C].push(Z):D[C]=[Z]}),D}},function(y,n,s){"use strict";n.a=function(h,M){return h.hasOwnProperty(M)}},function(y,n,s){"use strict";var h=s(2),M=s(3),O=Object.values?function(T){return Object.values(T)}:function(T){var v=[];return Object(h.a)(T,function(m,C){Object(M.a)(T)&&C==="prototype"||v.push(m)}),v};n.a=O},function(y,n,s){"use strict";var h={}.toString;n.a=function(M){return h.call(M).replace(/^\[object /,"").replace(/]$/,"")}},function(y,n,s){"use strict";var h=Object.prototype;n.a=function(M){var O=M&&M.constructor;return M===(typeof O=="function"&&O.prototype||h)}},function(y,n,s){"use strict";var h=s(15),M=s(1),O=s(8);n.a=function T(v,m){if(v===m)return!0;if(!v||!m||Object(O.a)(v)||Object(O.a)(m))return!1;if(Object(M.a)(v)||Object(M.a)(m)){if(v.length!==m.length)return!1;for(var C=!0,D=0;D<v.length&&(C=T(v[D],m[D]));D++);return C}if(Object(h.a)(v)||Object(h.a)(m)){var Y=Object.keys(v),Z=Object.keys(m);if(Y.length!==Z.length)return!1;for(C=!0,D=0;D<Y.length&&(C=T(v[Y[D]],m[Y[D]]));D++);return C}return!1}},function(y,n,s){var h=s(18);y.exports=function(M,O){for(var T=h(M.data,O,!0),v=h(M.data,O,!0),m=M.children.length,C=Math.round(m/2),D=O.getSide||function(et,dt){return dt<C?"right":"left"},Y=0;Y<m;Y++){var Z=M.children[Y];D(Z,Y)==="right"?v.children.push(Z):T.children.push(Z)}return T.eachNode(function(et){et.isRoot()||(et.side="left")}),v.eachNode(function(et){et.isRoot()||(et.side="right")}),{left:T,right:v}}},function(y,n,s){var h={compactBox:s(32),dendrogram:s(114),indented:s(116),mindmap:s(118)};y.exports=h},function(y,n,s){var h=s(11),M=s(113),O=s(17),T=s(7),v=function(C){var D,Y;function Z(){return C.apply(this,arguments)||this}return Y=C,(D=Z).prototype=Object.create(Y.prototype),D.prototype.constructor=D,D.__proto__=Y,Z.prototype.execute=function(){return O(this.rootNode,this.options,M)},Z}(h),m={};y.exports=function(C,D){return D=T.assign({},m,D),new v(C,D).execute()}},function(y,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var h=s(12);s.d(n,"contains",function(){return h.a}),s.d(n,"includes",function(){return h.a});var M=s(34);s.d(n,"difference",function(){return M.a});var O=s(35);s.d(n,"find",function(){return O.a});var T=s(36);s.d(n,"findIndex",function(){return T.a});var v=s(37);s.d(n,"firstValue",function(){return v.a});var m=s(38);s.d(n,"flatten",function(){return m.a});var C=s(39);s.d(n,"flattenDeep",function(){return C.a});var D=s(40);s.d(n,"getRange",function(){return D.a});var Y=s(41);s.d(n,"pull",function(){return Y.a});var Z=s(21);s.d(n,"pullAt",function(){return Z.a});var et=s(42);s.d(n,"reduce",function(){return et.a});var dt=s(43);s.d(n,"remove",function(){return dt.a});var ht=s(44);s.d(n,"sortBy",function(){return ht.a});var St=s(45);s.d(n,"union",function(){return St.a});var wt=s(22);s.d(n,"uniq",function(){return wt.a});var xt=s(46);s.d(n,"valuesOfKey",function(){return xt.a});var ft=s(47);s.d(n,"head",function(){return ft.a});var Bt=s(48);s.d(n,"last",function(){return Bt.a});var Rt=s(49);s.d(n,"startsWith",function(){return Rt.a});var Ot=s(50);s.d(n,"endsWith",function(){return Ot.a});var X=s(14);s.d(n,"filter",function(){return X.a});var ut=s(51);s.d(n,"every",function(){return ut.a});var vt=s(52);s.d(n,"some",function(){return vt.a});var pt=s(53);s.d(n,"group",function(){return pt.a});var Et=s(24);s.d(n,"groupBy",function(){return Et.a});var q=s(23);s.d(n,"groupToMap",function(){return q.a});var st=s(54);s.d(n,"getWrapBehavior",function(){return st.a});var it=s(55);s.d(n,"wrapBehavior",function(){return it.a});var z=s(56);s.d(n,"number2color",function(){return z.a});var P=s(57);s.d(n,"parseRadius",function(){return P.a});var H=s(58);s.d(n,"clamp",function(){return H.a});var k=s(59);s.d(n,"fixedBase",function(){return k.a});var d=s(60);s.d(n,"isDecimal",function(){return d.a});var g=s(61);s.d(n,"isEven",function(){return g.a});var F=s(62);s.d(n,"isInteger",function(){return F.a});var V=s(63);s.d(n,"isNegative",function(){return V.a});var tt=s(64);s.d(n,"isNumberEqual",function(){return tt.a});var ot=s(65);s.d(n,"isOdd",function(){return ot.a});var at=s(66);s.d(n,"isPositive",function(){return at.a});var At=s(67);s.d(n,"maxBy",function(){return At.a});var yt=s(68);s.d(n,"minBy",function(){return yt.a});var gt=s(69);s.d(n,"mod",function(){return gt.a});var bt=s(70);s.d(n,"toDegree",function(){return bt.a});var Tt=s(71);s.d(n,"toInteger",function(){return Tt.a});var Dt=s(72);s.d(n,"toRadian",function(){return Dt.a});var Ut=s(73);s.d(n,"forIn",function(){return Ut.a});var jt=s(25);s.d(n,"has",function(){return jt.a});var Vt=s(74);s.d(n,"hasKey",function(){return Vt.a});var Ht=s(75);s.d(n,"hasValue",function(){return Ht.a});var re=s(20);s.d(n,"keys",function(){return re.a});var pe=s(19);s.d(n,"isMatch",function(){return pe.a});var ye=s(26);s.d(n,"values",function(){return ye.a});var we=s(76);s.d(n,"lowerCase",function(){return we.a});var Re=s(77);s.d(n,"lowerFirst",function(){return Re.a});var He=s(78);s.d(n,"substitute",function(){return He.a});var pn=s(79);s.d(n,"upperCase",function(){return pn.a});var fn=s(80);s.d(n,"upperFirst",function(){return fn.a});var Rn=s(27);s.d(n,"getType",function(){return Rn.a});var Cn=s(81);s.d(n,"isArguments",function(){return Cn.a});var kn=s(0);s.d(n,"isArray",function(){return kn.a});var Mn=s(1);s.d(n,"isArrayLike",function(){return Mn.a});var Tn=s(82);s.d(n,"isBoolean",function(){return Tn.a});var Un=s(83);s.d(n,"isDate",function(){return Un.a});var Kn=s(84);s.d(n,"isError",function(){return Kn.a});var tr=s(3);s.d(n,"isFunction",function(){return tr.a});var or=s(85);s.d(n,"isFinite",function(){return or.a});var nr=s(6);s.d(n,"isNil",function(){return nr.a});var er=s(86);s.d(n,"isNull",function(){return er.a});var Sr=s(5);s.d(n,"isNumber",function(){return Sr.a});var Vr=s(13);s.d(n,"isObject",function(){return Vr.a});var ti=s(15);s.d(n,"isObjectLike",function(){return ti.a});var hi=s(9);s.d(n,"isPlainObject",function(){return hi.a});var Fi=s(28);s.d(n,"isPrototype",function(){return Fi.a});var to=s(87);s.d(n,"isRegExp",function(){return to.a});var si=s(8);s.d(n,"isString",function(){return si.a});var Ti=s(4);s.d(n,"isType",function(){return Ti.a});var _i=s(88);s.d(n,"isUndefined",function(){return _i.a});var Li=s(89);s.d(n,"isElement",function(){return Li.a});var Vi=s(90);s.d(n,"requestAnimationFrame",function(){return Vi.a});var ro=s(91);s.d(n,"clearAnimationFrame",function(){return ro.a});var jr=s(92);s.d(n,"augment",function(){return jr.a});var Ji=s(93);s.d(n,"clone",function(){return Ji.a});var pr=s(94);s.d(n,"debounce",function(){return pr.a});var Yr=s(95);s.d(n,"memoize",function(){return Yr.a});var Br=s(96);s.d(n,"deepMix",function(){return Br.a});var Nr=s(2);s.d(n,"each",function(){return Nr.a});var Xr=s(97);s.d(n,"extend",function(){return Xr.a});var Kr=s(98);s.d(n,"indexOf",function(){return Kr.a});var ni=s(99);s.d(n,"isEmpty",function(){return ni.a});var fi=s(29);s.d(n,"isEqual",function(){return fi.a});var $r=s(100);s.d(n,"isEqualWith",function(){return $r.a});var ci=s(101);s.d(n,"map",function(){return ci.a});var Qr=s(102);s.d(n,"mapValues",function(){return Qr.a});var gi=s(16);s.d(n,"mix",function(){return gi.a}),s.d(n,"assign",function(){return gi.a});var Oi=s(103);s.d(n,"get",function(){return Oi.a});var bi=s(104);s.d(n,"set",function(){return bi.a});var zi=s(105);s.d(n,"pick",function(){return zi.a});var Qi=s(106);s.d(n,"throttle",function(){return Qi.a});var io=s(107);s.d(n,"toArray",function(){return io.a});var Wi=s(10);s.d(n,"toString",function(){return Wi.a});var Zi=s(108);s.d(n,"uniqueId",function(){return Zi.a});var Pi=s(109);s.d(n,"noop",function(){return Pi.a});var no=s(110);s.d(n,"identity",function(){return no.a});var Mo=s(111);s.d(n,"size",function(){return Mo.a});var ao=s(112);s.d(n,"Cache",function(){return ao.a})},function(y,n,s){"use strict";var h=s(14),M=s(12);n.a=function(O,T){return T===void 0&&(T=[]),Object(h.a)(O,function(v){return!Object(M.a)(T,v)})}},function(y,n,s){"use strict";var h=s(3),M=s(19),O=s(0),T=s(9);n.a=function(v,m){if(!Object(O.a)(v))return null;var C;if(Object(h.a)(m)&&(C=m),Object(T.a)(m)&&(C=function(Z){return Object(M.a)(Z,m)}),C){for(var D=0;D<v.length;D+=1)if(C(v[D]))return v[D]}return null}},function(y,n,s){"use strict";n.a=function(h,M,O){O===void 0&&(O=0);for(var T=O;T<h.length;T++)if(M(h[T],T))return T;return-1}},function(y,n,s){"use strict";var h=s(6),M=s(0);n.a=function(O,T){for(var v=null,m=0;m<O.length;m++){var C=O[m][T];if(!Object(h.a)(C)){v=Object(M.a)(C)?C[0]:C;break}}return v}},function(y,n,s){"use strict";var h=s(0);n.a=function(M){if(!Object(h.a)(M))return[];for(var O=[],T=0;T<M.length;T++)O=O.concat(M[T]);return O}},function(y,n,s){"use strict";var h=s(0);n.a=function M(O,T){if(T===void 0&&(T=[]),Object(h.a)(O))for(var v=0;v<O.length;v+=1)M(O[v],T);else T.push(O);return T}},function(y,n,s){"use strict";var h=s(0),M=s(14);n.a=function(O){if(!(O=Object(M.a)(O,function(C){return!isNaN(C)})).length)return{min:0,max:0};if(Object(h.a)(O[0])){for(var T=[],v=0;v<O.length;v++)T=T.concat(O[v]);O=T}var m=Math.max.apply(null,O);return{min:Math.min.apply(null,O),max:m}}},function(y,n,s){"use strict";var h=Array.prototype,M=h.splice,O=h.indexOf;n.a=function(T){for(var v=[],m=1;m<arguments.length;m++)v[m-1]=arguments[m];for(var C=0;C<v.length;C++)for(var D=v[C],Y=-1;(Y=O.call(T,D))>-1;)M.call(T,Y,1);return T}},function(y,n,s){"use strict";var h=s(2),M=s(0),O=s(9);n.a=function(T,v,m){if(!Object(M.a)(T)&&!Object(O.a)(T))return T;var C=m;return Object(h.a)(T,function(D,Y){C=v(C,D,Y)}),C}},function(y,n,s){"use strict";var h=s(1),M=s(21);n.a=function(O,T){var v=[];if(!Object(h.a)(O))return v;for(var m=-1,C=[],D=O.length;++m<D;){var Y=O[m];T(Y,m,O)&&(v.push(Y),C.push(m))}return Object(M.a)(O,C),v}},function(y,n,s){"use strict";var h=s(0),M=s(8),O=s(3);n.a=function(T,v){var m;if(Object(O.a)(v))m=function(Y,Z){return v(Y)-v(Z)};else{var C=[];Object(M.a)(v)?C.push(v):Object(h.a)(v)&&(C=v),m=function(Y,Z){for(var et=0;et<C.length;et+=1){var dt=C[et];if(Y[dt]>Z[dt])return 1;if(Y[dt]<Z[dt])return-1}return 0}}return T.sort(m),T}},function(y,n,s){"use strict";var h=s(22);n.a=function(){for(var M=[],O=0;O<arguments.length;O++)M[O]=arguments[O];return Object(h.a)([].concat.apply([],M))}},function(y,n,s){"use strict";var h=s(2),M=s(0),O=s(6);n.a=function(T,v){var m=[],C={};return T.forEach(function(D){var Y=D[v];Object(O.a)(Y)||(Object(M.a)(Y)||(Y=[Y]),Object(h.a)(Y,function(Z){C[Z]||(m.push(Z),C[Z]=!0)}))}),m}},function(y,n,s){"use strict";n.a=function(M){if(Object(h.a)(M))return M[0]};var h=s(1)},function(y,n,s){"use strict";n.a=function(M){if(Object(h.a)(M))return M[M.length-1]};var h=s(1)},function(y,n,s){"use strict";var h=s(0),M=s(8);n.a=function(O,T){return!(!Object(h.a)(O)&&!Object(M.a)(O))&&O[0]===T}},function(y,n,s){"use strict";var h=s(0),M=s(8);n.a=function(O,T){return!(!Object(h.a)(O)&&!Object(M.a)(O))&&O[O.length-1]===T}},function(y,n,s){"use strict";n.a=function(h,M){for(var O=0;O<h.length;O++)if(!M(h[O],O))return!1;return!0}},function(y,n,s){"use strict";n.a=function(h,M){for(var O=0;O<h.length;O++)if(M(h[O],O))return!0;return!1}},function(y,n,s){"use strict";var h=s(23);n.a=function(M,O){if(!O)return[M];var T=Object(h.a)(M,O),v=[];for(var m in T)v.push(T[m]);return v}},function(y,n,s){"use strict";n.a=function(h,M){return h["_wrap_"+M]}},function(y,n,s){"use strict";n.a=function(h,M){if(h["_wrap_"+M])return h["_wrap_"+M];var O=function(v){h[M](v)};return h["_wrap_"+M]=O,O}},function(y,n,s){"use strict";var h={};n.a=function(M){var O=h[M];if(!O){for(var T=M.toString(16),v=T.length;v<6;v++)T="0"+T;O="#"+T,h[M]=O}return O}},function(y,n,s){"use strict";var h=s(0);n.a=function(M){var O=0,T=0,v=0,m=0;return Object(h.a)(M)?M.length===1?O=T=v=m=M[0]:M.length===2?(O=v=M[0],T=m=M[1]):M.length===3?(O=M[0],T=m=M[1],v=M[2]):(O=M[0],T=M[1],v=M[2],m=M[3]):O=T=v=m=M,{r1:O,r2:T,r3:v,r4:m}}},function(y,n,s){"use strict";n.a=function(h,M,O){return h<M?M:h>O?O:h}},function(y,n,s){"use strict";n.a=function(h,M){var O=M.toString(),T=O.indexOf(".");if(T===-1)return Math.round(h);var v=O.substr(T+1).length;return v>20&&(v=20),parseFloat(h.toFixed(v))}},function(y,n,s){"use strict";var h=s(5);n.a=function(M){return Object(h.a)(M)&&M%1!=0}},function(y,n,s){"use strict";var h=s(5);n.a=function(M){return Object(h.a)(M)&&M%2==0}},function(y,n,s){"use strict";var h=s(5),M=Number.isInteger?Number.isInteger:function(O){return Object(h.a)(O)&&O%1==0};n.a=M},function(y,n,s){"use strict";var h=s(5);n.a=function(M){return Object(h.a)(M)&&M<0}},function(y,n,s){"use strict";n.a=function(h,M,O){return O===void 0&&(O=1e-5),Math.abs(h-M)<O}},function(y,n,s){"use strict";var h=s(5);n.a=function(M){return Object(h.a)(M)&&M%2!=0}},function(y,n,s){"use strict";var h=s(5);n.a=function(M){return Object(h.a)(M)&&M>0}},function(y,n,s){"use strict";var h=s(2),M=s(0),O=s(3);n.a=function(T,v){if(Object(M.a)(T)){var m,C,D=T[0];return m=Object(O.a)(v)?v(T[0]):T[0][v],Object(h.a)(T,function(Y){(C=Object(O.a)(v)?v(Y):Y[v])>m&&(D=Y,m=C)}),D}}},function(y,n,s){"use strict";var h=s(2),M=s(0),O=s(3);n.a=function(T,v){if(Object(M.a)(T)){var m,C,D=T[0];return m=Object(O.a)(v)?v(T[0]):T[0][v],Object(h.a)(T,function(Y){(C=Object(O.a)(v)?v(Y):Y[v])<m&&(D=Y,m=C)}),D}}},function(y,n,s){"use strict";n.a=function(h,M){return(h%M+M)%M}},function(y,n,s){"use strict";var h=180/Math.PI;n.a=function(M){return h*M}},function(y,n,s){"use strict";n.a=parseInt},function(y,n,s){"use strict";var h=Math.PI/180;n.a=function(M){return h*M}},function(y,n,s){"use strict";var h=s(2);n.a=h.a},function(y,n,s){"use strict";var h=s(25);n.a=h.a},function(y,n,s){"use strict";var h=s(12),M=s(26);n.a=function(O,T){return Object(h.a)(Object(M.a)(O),T)}},function(y,n,s){"use strict";var h=s(10);n.a=function(M){return Object(h.a)(M).toLowerCase()}},function(y,n,s){"use strict";var h=s(10);n.a=function(M){var O=Object(h.a)(M);return O.charAt(0).toLowerCase()+O.substring(1)}},function(y,n,s){"use strict";n.a=function(h,M){return h&&M?h.replace(/\\?\{([^{}]+)\}/g,function(O,T){return O.charAt(0)==="\\"?O.slice(1):M[T]===void 0?"":M[T]}):h}},function(y,n,s){"use strict";var h=s(10);n.a=function(M){return Object(h.a)(M).toUpperCase()}},function(y,n,s){"use strict";var h=s(10);n.a=function(M){var O=Object(h.a)(M);return O.charAt(0).toUpperCase()+O.substring(1)}},function(y,n,s){"use strict";var h=s(4);n.a=function(M){return Object(h.a)(M,"Arguments")}},function(y,n,s){"use strict";var h=s(4);n.a=function(M){return Object(h.a)(M,"Boolean")}},function(y,n,s){"use strict";var h=s(4);n.a=function(M){return Object(h.a)(M,"Date")}},function(y,n,s){"use strict";var h=s(4);n.a=function(M){return Object(h.a)(M,"Error")}},function(y,n,s){"use strict";var h=s(5);n.a=function(M){return Object(h.a)(M)&&isFinite(M)}},function(y,n,s){"use strict";n.a=function(h){return h===null}},function(y,n,s){"use strict";var h=s(4);n.a=function(M){return Object(h.a)(M,"RegExp")}},function(y,n,s){"use strict";n.a=function(h){return h===void 0}},function(y,n,s){"use strict";n.a=function(h){return h instanceof Element||h instanceof HTMLDocument}},function(y,n,s){"use strict";n.a=function(h){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(M){return setTimeout(M,16)})(h)}},function(y,n,s){"use strict";n.a=function(h){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(h)}},function(y,n,s){"use strict";var h=s(16),M=s(3);n.a=function(){for(var O=[],T=0;T<arguments.length;T++)O[T]=arguments[T];for(var v=O[0],m=1;m<O.length;m++){var C=O[m];Object(M.a)(C)&&(C=C.prototype),Object(h.a)(v.prototype,C)}}},function(y,n,s){"use strict";var h=s(0);n.a=function M(O){if(A(O)!=="object"||O===null)return O;var T;if(Object(h.a)(O)){T=[];for(var v=0,m=O.length;v<m;v++)A(O[v])==="object"&&O[v]!=null?T[v]=M(O[v]):T[v]=O[v]}else for(var C in T={},O)A(O[C])==="object"&&O[C]!=null?T[C]=M(O[C]):T[C]=O[C];return T}},function(y,n,s){"use strict";n.a=function(h,M,O){var T;return function(){var v=this,m=arguments,C=function(){T=null,O||h.apply(v,m)},D=O&&!T;clearTimeout(T),T=setTimeout(C,M),D&&h.apply(v,m)}}},function(y,n,s){"use strict";var h=s(3);n.a=function(M,O){if(!Object(h.a)(M))throw new TypeError("Expected a function");var T=function v(){for(var m=[],C=0;C<arguments.length;C++)m[C]=arguments[C];var D=O?O.apply(this,m):m[0],Y=v.cache;if(Y.has(D))return Y.get(D);var Z=M.apply(this,m);return Y.set(D,Z),Z};return T.cache=new Map,T}},function(y,n,s){"use strict";var h=s(0),M=s(9);function O(T,v,m,C){for(var D in m=m||0,C=C||5,v)if(v.hasOwnProperty(D)){var Y=v[D];Y!==null&&Object(M.a)(Y)?(Object(M.a)(T[D])||(T[D]={}),m<C?O(T[D],Y,m+1,C):T[D]=v[D]):Object(h.a)(Y)?(T[D]=[],T[D]=T[D].concat(Y)):Y!==void 0&&(T[D]=Y)}}n.a=function(T){for(var v=[],m=1;m<arguments.length;m++)v[m-1]=arguments[m];for(var C=0;C<v.length;C+=1)O(T,v[C]);return T}},function(y,n,s){"use strict";var h=s(16),M=s(3);n.a=function(O,T,v,m){Object(M.a)(T)||(v=T,T=O,O=function(){});var C=Object.create?function(Y,Z){return Object.create(Y,{constructor:{value:Z}})}:function(Y,Z){function et(){}et.prototype=Y;var dt=new et;return dt.constructor=Z,dt},D=C(T.prototype,O);return O.prototype=Object(h.a)(D,O.prototype),O.superclass=C(T.prototype,T),Object(h.a)(D,v),Object(h.a)(O,m),O}},function(y,n,s){"use strict";var h=s(1);n.a=function(M,O){if(!Object(h.a)(M))return-1;var T=Array.prototype.indexOf;if(T)return T.call(M,O);for(var v=-1,m=0;m<M.length;m++)if(M[m]===O){v=m;break}return v}},function(y,n,s){"use strict";var h=s(6),M=s(1),O=s(27),T=s(28),v=Object.prototype.hasOwnProperty;n.a=function(m){if(Object(h.a)(m))return!0;if(Object(M.a)(m))return!m.length;var C=Object(O.a)(m);if(C==="Map"||C==="Set")return!m.size;if(Object(T.a)(m))return!Object.keys(m).length;for(var D in m)if(v.call(m,D))return!1;return!0}},function(y,n,s){"use strict";var h=s(3),M=s(29);n.a=function(O,T,v){return Object(h.a)(v)?!!v(O,T):Object(M.a)(O,T)}},function(y,n,s){"use strict";var h=s(2),M=s(1);n.a=function(O,T){if(!Object(M.a)(O))return O;var v=[];return Object(h.a)(O,function(m,C){v.push(T(m,C))}),v}},function(y,n,s){"use strict";var h=s(6),M=s(13),O=function(v){return v};n.a=function(T,v){v===void 0&&(v=O);var m={};return Object(M.a)(T)&&!Object(h.a)(T)&&Object.keys(T).forEach(function(C){m[C]=v(T[C],C)}),m}},function(y,n,s){"use strict";var h=s(8);n.a=function(M,O,T){for(var v=0,m=Object(h.a)(O)?O.split("."):O;M&&v<m.length;)M=M[m[v++]];return M===void 0||v<m.length?T:M}},function(y,n,s){"use strict";var h=s(13),M=s(8),O=s(5);n.a=function(T,v,m){var C=T,D=Object(M.a)(v)?v.split("."):v;return D.forEach(function(Y,Z){Z<D.length-1?(Object(h.a)(C[Y])||(C[Y]=Object(O.a)(D[Z+1])?[]:{}),C=C[Y]):C[Y]=m}),T}},function(y,n,s){"use strict";var h=s(2),M=s(9),O=Object.prototype.hasOwnProperty;n.a=function(T,v){if(T===null||!Object(M.a)(T))return{};var m={};return Object(h.a)(v,function(C){O.call(T,C)&&(m[C]=T[C])}),m}},function(y,n,s){"use strict";n.a=function(h,M,O){var T,v,m,C,D=0;O||(O={});var Y=function(){D=O.leading===!1?0:Date.now(),T=null,C=h.apply(v,m),T||(v=m=null)},Z=function(){var dt=Date.now();D||O.leading!==!1||(D=dt);var ht=M-(dt-D);return v=this,m=arguments,ht<=0||ht>M?(T&&(clearTimeout(T),T=null),D=dt,C=h.apply(v,m),T||(v=m=null)):T||O.trailing===!1||(T=setTimeout(Y,ht)),C};return Z.cancel=function(){clearTimeout(T),D=0,T=v=m=null},Z}},function(y,n,s){"use strict";var h=s(1);n.a=function(M){return Object(h.a)(M)?Array.prototype.slice.call(M):[]}},function(y,n,s){"use strict";var h={};n.a=function(M){return h[M=M||"g"]?h[M]+=1:h[M]=1,M+h[M]}},function(y,n,s){"use strict";n.a=function(){}},function(y,n,s){"use strict";n.a=function(h){return h}},function(y,n,s){"use strict";n.a=function(O){return Object(h.a)(O)?0:Object(M.a)(O)?O.length:Object.keys(O).length};var h=s(6),M=s(1)},function(y,n,s){"use strict";var h=function(){function M(){this.map={}}return M.prototype.has=function(O){return this.map[O]!==void 0},M.prototype.get=function(O,T){var v=this.map[O];return v===void 0?T:v},M.prototype.set=function(O,T){this.map[O]=T},M.prototype.clear=function(){this.map={}},M.prototype.delete=function(O){delete this.map[O]},M.prototype.size=function(){return Object.keys(this.map).length},M}();n.a=h},function(y,n){function s(M,O,T,v){v===void 0&&(v=[]);var m=this;m.w=M||0,m.h=O||0,m.y=T||0,m.x=0,m.c=v||[],m.cs=v.length,m.prelim=0,m.mod=0,m.shift=0,m.change=0,m.tl=null,m.tr=null,m.el=null,m.er=null,m.msel=0,m.mser=0}function h(M,O){var T=function v(m,C){var D=C?m.y:m.x;return m.children.forEach(function(Y){D=Math.min(v(Y,C),D)}),D}(M,O);(function v(m,C,D){D?m.y+=C:m.x+=C,m.children.forEach(function(Y){v(Y,C,D)})})(M,-T,O)}s.fromNode=function(M,O){if(!M)return null;var T=[];return M.children.forEach(function(v){T.push(s.fromNode(v,O))}),O?new s(M.height,M.width,M.x,T):new s(M.width,M.height,M.y,T)},y.exports=function(M,O){O===void 0&&(O={});var T=O.isHorizontal;function v(ht){ht.cs===0?(ht.el=ht,ht.er=ht,ht.msel=ht.mser=0):(ht.el=ht.c[0].el,ht.msel=ht.c[0].msel,ht.er=ht.c[ht.cs-1].er,ht.mser=ht.c[ht.cs-1].mser)}function m(ht,St,wt){for(var xt=ht.c[St-1],ft=xt.mod,Bt=ht.c[St],Rt=Bt.mod;xt!==null&&Bt!==null;){Z(xt)>wt.low&&(wt=wt.nxt);var Ot=ft+xt.prelim+xt.w-(Rt+Bt.prelim);Ot>0&&(Rt+=Ot,C(ht,St,wt.index,Ot));var X=Z(xt),ut=Z(Bt);X<=ut&&(xt=Y(xt))!==null&&(ft+=xt.mod),X>=ut&&(Bt=D(Bt))!==null&&(Rt+=Bt.mod)}!xt&&Bt?function(vt,pt,Et,q){var st=vt.c[0].el;st.tl=Et;var it=q-Et.mod-vt.c[0].msel;st.mod+=it,st.prelim-=it,vt.c[0].el=vt.c[pt].el,vt.c[0].msel=vt.c[pt].msel}(ht,St,Bt,Rt):xt&&!Bt&&function(vt,pt,Et,q){var st=vt.c[pt].er;st.tr=Et;var it=q-Et.mod-vt.c[pt].mser;st.mod+=it,st.prelim-=it,vt.c[pt].er=vt.c[pt-1].er,vt.c[pt].mser=vt.c[pt-1].mser}(ht,St,xt,ft)}function C(ht,St,wt,xt){ht.c[St].mod+=xt,ht.c[St].msel+=xt,ht.c[St].mser+=xt,function(ft,Bt,Rt,Ot){if(Rt!==Bt-1){var X=Bt-Rt;ft.c[Rt+1].shift+=Ot/X,ft.c[Bt].shift-=Ot/X,ft.c[Bt].change-=Ot-Ot/X}}(ht,St,wt,xt)}function D(ht){return ht.cs===0?ht.tl:ht.c[0]}function Y(ht){return ht.cs===0?ht.tr:ht.c[ht.cs-1]}function Z(ht){return ht.y+ht.h}function et(ht,St,wt){for(;wt!==null&&ht>=wt.low;)wt=wt.nxt;return{low:ht,index:St,nxt:wt}}(function ht(St,wt,xt){xt===void 0&&(xt=0),wt?(St.x=xt,xt+=St.width):(St.y=xt,xt+=St.height),St.children.forEach(function(ft){ht(ft,wt,xt)})})(M,T);var dt=s.fromNode(M,T);return function ht(St){if(St.cs!==0){ht(St.c[0]);for(var wt=et(Z(St.c[0].el),0,null),xt=1;xt<St.cs;++xt){ht(St.c[xt]);var ft=Z(St.c[xt].er);m(St,xt,wt),wt=et(ft,xt,wt)}(function(Bt){Bt.prelim=(Bt.c[0].prelim+Bt.c[0].mod+Bt.c[Bt.cs-1].mod+Bt.c[Bt.cs-1].prelim+Bt.c[Bt.cs-1].w)/2-Bt.w/2})(St),v(St)}else v(St)}(dt),function ht(St,wt){wt+=St.mod,St.x=St.prelim+wt,function(ft){for(var Bt=0,Rt=0,Ot=0;Ot<ft.cs;Ot++)Bt+=ft.c[Ot].shift,Rt+=Bt+ft.c[Ot].change,ft.c[Ot].mod+=Rt}(St);for(var xt=0;xt<St.cs;xt++)ht(St.c[xt],wt)}(dt,0),function ht(St,wt,xt){xt?wt.y=St.x:wt.x=St.x,St.c.forEach(function(ft,Bt){ht(ft,wt.children[Bt],xt)})}(dt,M,T),h(M,T),M}},function(y,n,s){var h=s(11),M=s(115),O=s(17),T=s(7),v=function(C){var D,Y;function Z(){return C.apply(this,arguments)||this}return Y=C,(D=Z).prototype=Object.create(Y.prototype),D.prototype.constructor=D,D.__proto__=Y,Z.prototype.execute=function(){return this.rootNode.width=0,O(this.rootNode,this.options,M)},Z}(h),m={};y.exports=function(C,D){return D=T.assign({},m,D),new v(C,D).execute()}},function(y,n,s){var h=s(7);function M(T,v){T===void 0&&(T=0),v===void 0&&(v=[]);var m=this;m.x=m.y=0,m.leftChild=m.rightChild=null,m.height=0,m.children=v}var O={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};y.exports=function(T,v){v===void 0&&(v={}),v=h.assign({},O,v);var m,C=0,D=function Y(Z){if(!Z)return null;Z.width=0,Z.depth&&Z.depth>C&&(C=Z.depth);var et=Z.children,dt=et.length,ht=new M(Z.height,[]);return et.forEach(function(St,wt){var xt=Y(St);ht.children.push(xt),wt===0&&(ht.leftChild=xt),wt===dt-1&&(ht.rightChild=xt)}),ht.originNode=Z,ht.isLeaf=Z.isLeaf(),ht}(T);return function Y(Z){if(Z.isLeaf||Z.children.length===0)Z.drawingDepth=C;else{var et=Z.children.map(function(ht){return Y(ht)}),dt=Math.min.apply(null,et);Z.drawingDepth=dt-1}return Z.drawingDepth}(D),function Y(Z){Z.x=Z.drawingDepth*v.rankSep,Z.isLeaf?(Z.y=0,m&&(Z.y=m.y+m.height+v.nodeSep,Z.originNode.parent!==m.originNode.parent&&(Z.y+=v.subTreeSep)),m=Z):(Z.children.forEach(function(et){Y(et)}),Z.y=(Z.leftChild.y+Z.rightChild.y)/2)}(D),function Y(Z,et,dt){dt?(et.x=Z.x,et.y=Z.y):(et.x=Z.y,et.y=Z.x),Z.children.forEach(function(ht,St){Y(ht,et.children[St],dt)})}(D,T,v.isHorizontal),T}},function(y,n,s){var h=s(11),M=s(117),O=s(30),T=s(7),v=["LR","RL","H"],m=v[0],C=function(Y){var Z,et;function dt(){return Y.apply(this,arguments)||this}return et=Y,(Z=dt).prototype=Object.create(et.prototype),Z.prototype.constructor=Z,Z.__proto__=et,dt.prototype.execute=function(){var ht=this.options,St=this.rootNode;ht.isHorizontal=!0;var wt=ht.indent,xt=wt===void 0?20:wt,ft=ht.dropCap,Bt=ft===void 0||ft,Rt=ht.direction||m;if(Rt&&v.indexOf(Rt)===-1)throw new TypeError("Invalid direction: "+Rt);if(Rt===v[0])M(St,xt,Bt);else if(Rt===v[1])M(St,xt,Bt),St.right2left();else if(Rt===v[2]){var Ot=O(St,ht),X=Ot.left,ut=Ot.right;M(X,xt,Bt),X.right2left(),M(ut,xt,Bt);var vt=X.getBoundingBox();ut.translate(vt.width,0),St.x=ut.x-St.width/2}return St},dt}(h),D={};y.exports=function(Y,Z){return Z=T.assign({},D,Z),new C(Y,Z).execute()}},function(y,n){y.exports=function(s,h,M){var O=null;s.eachNode(function(T){(function(v,m,C,D){if(!D)try{if(v.id===v.parent.children[0].id)return v.x+=C*v.depth,void(v.y=m?m.y:0)}catch(Y){}v.x+=C*v.depth,v.y=m?m.y+m.height:0})(T,O,h,M),O=T})}},function(y,n,s){var h=s(11),M=s(119),O=s(17),T=s(7),v=function(C){var D,Y;function Z(){return C.apply(this,arguments)||this}return Y=C,(D=Z).prototype=Object.create(Y.prototype),D.prototype.constructor=D,D.__proto__=Y,Z.prototype.execute=function(){return O(this.rootNode,this.options,M)},Z}(h),m={};y.exports=function(C,D){return D=T.assign({},m,D),new v(C,D).execute()}},function(y,n,s){var h=s(7),M={getSubTreeSep:function(){return 0}};y.exports=function(O,T){T===void 0&&(T={}),T=h.assign({},M,T),O.parent={x:0,width:0,height:0,y:0},O.BFTraverse(function(v){v.x=v.parent.x+v.parent.width}),O.parent=null,function v(m,C){var D=0;return m.children.length?m.children.forEach(function(Y){D+=v(Y,C)}):D=m.height,m._subTreeSep=C.getSubTreeSep(m.data),m.totalHeight=Math.max(m.height,D)+2*m._subTreeSep,m.totalHeight}(O,T),O.startY=0,O.y=O.totalHeight/2-O.height/2,O.eachNode(function(v){var m=v.children,C=m.length;if(C){var D=m[0];if(D.startY=v.startY+v._subTreeSep,C===1)D.y=v.y+v.height/2-D.height/2;else{D.y=D.startY+D.totalHeight/2-D.height/2;for(var Y=1;Y<C;Y++){var Z=m[Y];Z.startY=m[Y-1].startY+m[Y-1].totalHeight,Z.y=Z.startY+Z.totalHeight/2-Z.height/2}}}}),function v(m){var C=m.children,D=C.length;if(D){C.forEach(function(St){v(St)});var Y=C[0],Z=C[D-1],et=Z.y-Y.y+Z.height,dt=0;if(C.forEach(function(St){dt+=St.totalHeight}),et>m.height)m.y=Y.y+et/2-m.height/2;else if(C.length!==1||m.height>dt){var ht=m.y+(m.height-et)/2-Y.y;C.forEach(function(St){St.translate(0,ht)})}else m.y=(Y.y+Y.height/2+Z.y+Z.height/2)/2-m.height/2}}(O)}}])},A(E)==="object"&&A(r)==="object"?r.exports=l():(b=[],(S=typeof(p=l)=="function"?p.apply(E,b):p)===void 0||(r.exports=S))}).call(this,e(86)(a))},function(a,E){},function(a,E){},function(a,E){var e,r,p=a.exports={};function b(){throw new Error("setTimeout has not been defined")}function S(){throw new Error("clearTimeout has not been defined")}function l(T){if(e===setTimeout)return setTimeout(T,0);if((e===b||!e)&&setTimeout)return e=setTimeout,setTimeout(T,0);try{return e(T,0)}catch(v){try{return e.call(null,T,0)}catch(m){return e.call(this,T,0)}}}(function(){try{e=typeof setTimeout=="function"?setTimeout:b}catch(T){e=b}try{r=typeof clearTimeout=="function"?clearTimeout:S}catch(T){r=S}})();var A,j=[],y=!1,n=-1;function s(){y&&A&&(y=!1,A.length?j=A.concat(j):n=-1,j.length&&h())}function h(){if(!y){var T=l(s);y=!0;for(var v=j.length;v;){for(A=j,j=[];++n<v;)A&&A[n].run();n=-1,v=j.length}A=null,y=!1,function(m){if(r===clearTimeout)return clearTimeout(m);if((r===S||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(m);try{r(m)}catch(C){try{return r.call(null,m)}catch(D){return r.call(this,m)}}}(T)}}function M(T,v){this.fun=T,this.array=v}function O(){}p.nextTick=function(T){var v=new Array(arguments.length-1);if(arguments.length>1)for(var m=1;m<arguments.length;m++)v[m-1]=arguments[m];j.push(new M(T,v)),j.length!==1||y||l(h)},M.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=O,p.addListener=O,p.once=O,p.off=O,p.removeListener=O,p.removeAllListeners=O,p.emit=O,p.prependListener=O,p.prependOnceListener=O,p.listeners=function(T){return[]},p.binding=function(T){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(T){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(a,E,e){"use strict";var r=e(1),p=function(b){function S(){return b!==null&&b.apply(this,arguments)||this}return Object(r.b)(S,b),S.prototype.isGroup=function(){return!0},S.prototype.isEntityGroup=function(){return!1},S.prototype.clone=function(){for(var l=b.prototype.clone.call(this),A=this.getChildren(),j=0;j<A.length;j++){var y=A[j];l.add(y.clone())}return l},S}(e(117).a);E.a=p},function(a,E,e){"use strict";var r=e(1),p=e(118),b=e(39),S=function(l){function A(j){return l.call(this,j)||this}return Object(r.b)(A,l),A.prototype._isInBBox=function(j,y){var n=this.getBBox();return n.minX<=j&&n.maxX>=j&&n.minY<=y&&n.maxY>=y},A.prototype.afterAttrsChange=function(j){l.prototype.afterAttrsChange.call(this,j),this.clearCacheBBox()},A.prototype.getBBox=function(){var j=this.cfg.bbox;return j||(j=this.calculateBBox(),this.set("bbox",j)),j},A.prototype.getCanvasBBox=function(){var j=this.cfg.canvasBBox;return j||(j=this.calculateCanvasBBox(),this.set("canvasBBox",j)),j},A.prototype.applyMatrix=function(j){l.prototype.applyMatrix.call(this,j),this.set("canvasBBox",null)},A.prototype.calculateCanvasBBox=function(){var j=this.getBBox(),y=this.getTotalMatrix(),n=j.minX,s=j.minY,h=j.maxX,M=j.maxY;if(y){var O=Object(b.c)(y,[j.minX,j.minY]),T=Object(b.c)(y,[j.maxX,j.minY]),v=Object(b.c)(y,[j.minX,j.maxY]),m=Object(b.c)(y,[j.maxX,j.maxY]);n=Math.min(O[0],T[0],v[0],m[0]),h=Math.max(O[0],T[0],v[0],m[0]),s=Math.min(O[1],T[1],v[1],m[1]),M=Math.max(O[1],T[1],v[1],m[1])}var C=this.attrs;if(C.shadowColor){var D=C.shadowBlur,Y=D===void 0?0:D,Z=C.shadowOffsetX,et=Z===void 0?0:Z,dt=C.shadowOffsetY,ht=dt===void 0?0:dt,St=n-Y+et,wt=h+Y+et,xt=s-Y+ht,ft=M+Y+ht;n=Math.min(n,St),h=Math.max(h,wt),s=Math.min(s,xt),M=Math.max(M,ft)}return{x:n,y:s,minX:n,minY:s,maxX:h,maxY:M,width:h-n,height:M-s}},A.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},A.prototype.isClipShape=function(){return this.get("isClipShape")},A.prototype.isInShape=function(j,y){return!1},A.prototype.isOnlyHitBox=function(){return!1},A.prototype.isHit=function(j,y){var n=this.get("startArrowShape"),s=this.get("endArrowShape"),h=[j,y,1],M=(h=this.invertFromMatrix(h))[0],O=h[1],T=this._isInBBox(M,O);return this.isOnlyHitBox()?T:!!(T&&!this.isClipped(M,O)&&(this.isInShape(M,O)||n&&n.isHit(M,O)||s&&s.isHit(M,O)))},A}(p.a);E.a=S},function(a,E,e){var r=e(268),p={};for(var b in r)r.hasOwnProperty(b)&&(p[r[b]]=b);var S=a.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var l in S)if(S.hasOwnProperty(l)){if(!("channels"in S[l]))throw new Error("missing channels property: "+l);if(!("labels"in S[l]))throw new Error("missing channel labels property: "+l);if(S[l].labels.length!==S[l].channels)throw new Error("channel and label counts mismatch: "+l);var A=S[l].channels,j=S[l].labels;delete S[l].channels,delete S[l].labels,Object.defineProperty(S[l],"channels",{value:A}),Object.defineProperty(S[l],"labels",{value:j})}S.rgb.hsl=function(y){var n,s,h=y[0]/255,M=y[1]/255,O=y[2]/255,T=Math.min(h,M,O),v=Math.max(h,M,O),m=v-T;return v===T?n=0:h===v?n=(M-O)/m:M===v?n=2+(O-h)/m:O===v&&(n=4+(h-M)/m),(n=Math.min(60*n,360))<0&&(n+=360),s=(T+v)/2,[n,100*(v===T?0:s<=.5?m/(v+T):m/(2-v-T)),100*s]},S.rgb.hsv=function(y){var n,s,h,M,O,T=y[0]/255,v=y[1]/255,m=y[2]/255,C=Math.max(T,v,m),D=C-Math.min(T,v,m),Y=function(et){return(C-et)/6/D+.5};return D===0?M=O=0:(O=D/C,n=Y(T),s=Y(v),h=Y(m),T===C?M=h-s:v===C?M=1/3+n-h:m===C&&(M=2/3+s-n),M<0?M+=1:M>1&&(M-=1)),[360*M,100*O,100*C]},S.rgb.hwb=function(y){var n=y[0],s=y[1],h=y[2];return[S.rgb.hsl(y)[0],100*(1/255*Math.min(n,Math.min(s,h))),100*(h=1-1/255*Math.max(n,Math.max(s,h)))]},S.rgb.cmyk=function(y){var n,s=y[0]/255,h=y[1]/255,M=y[2]/255;return[100*((1-s-(n=Math.min(1-s,1-h,1-M)))/(1-n)||0),100*((1-h-n)/(1-n)||0),100*((1-M-n)/(1-n)||0),100*n]},S.rgb.keyword=function(y){var n=p[y];if(n)return n;var s,h,M,O=1/0;for(var T in r)if(r.hasOwnProperty(T)){var v=r[T],m=(h=y,M=v,Math.pow(h[0]-M[0],2)+Math.pow(h[1]-M[1],2)+Math.pow(h[2]-M[2],2));m<O&&(O=m,s=T)}return s},S.keyword.rgb=function(y){return r[y]},S.rgb.xyz=function(y){var n=y[0]/255,s=y[1]/255,h=y[2]/255;return[100*(.4124*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.3576*(s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92)+.1805*(h=h>.04045?Math.pow((h+.055)/1.055,2.4):h/12.92)),100*(.2126*n+.7152*s+.0722*h),100*(.0193*n+.1192*s+.9505*h)]},S.rgb.lab=function(y){var n=S.rgb.xyz(y),s=n[0],h=n[1],M=n[2];return h/=100,M/=108.883,s=(s/=95.047)>.008856?Math.pow(s,1/3):7.787*s+16/116,[116*(h=h>.008856?Math.pow(h,1/3):7.787*h+16/116)-16,500*(s-h),200*(h-(M=M>.008856?Math.pow(M,1/3):7.787*M+16/116))]},S.hsl.rgb=function(y){var n,s,h,M,O,T=y[0]/360,v=y[1]/100,m=y[2]/100;if(v===0)return[O=255*m,O,O];n=2*m-(s=m<.5?m*(1+v):m+v-m*v),M=[0,0,0];for(var C=0;C<3;C++)(h=T+1/3*-(C-1))<0&&h++,h>1&&h--,O=6*h<1?n+6*(s-n)*h:2*h<1?s:3*h<2?n+(s-n)*(2/3-h)*6:n,M[C]=255*O;return M},S.hsl.hsv=function(y){var n=y[0],s=y[1]/100,h=y[2]/100,M=s,O=Math.max(h,.01);return s*=(h*=2)<=1?h:2-h,M*=O<=1?O:2-O,[n,100*(h===0?2*M/(O+M):2*s/(h+s)),100*((h+s)/2)]},S.hsv.rgb=function(y){var n=y[0]/60,s=y[1]/100,h=y[2]/100,M=Math.floor(n)%6,O=n-Math.floor(n),T=255*h*(1-s),v=255*h*(1-s*O),m=255*h*(1-s*(1-O));switch(h*=255,M){case 0:return[h,m,T];case 1:return[v,h,T];case 2:return[T,h,m];case 3:return[T,v,h];case 4:return[m,T,h];case 5:return[h,T,v]}},S.hsv.hsl=function(y){var n,s,h,M=y[0],O=y[1]/100,T=y[2]/100,v=Math.max(T,.01);return h=(2-O)*T,s=O*v,[M,100*(s=(s/=(n=(2-O)*v)<=1?n:2-n)||0),100*(h/=2)]},S.hwb.rgb=function(y){var n,s,h,M,O,T,v,m=y[0]/360,C=y[1]/100,D=y[2]/100,Y=C+D;switch(Y>1&&(C/=Y,D/=Y),h=6*m-(n=Math.floor(6*m)),(1&n)!=0&&(h=1-h),M=C+h*((s=1-D)-C),n){default:case 6:case 0:O=s,T=M,v=C;break;case 1:O=M,T=s,v=C;break;case 2:O=C,T=s,v=M;break;case 3:O=C,T=M,v=s;break;case 4:O=M,T=C,v=s;break;case 5:O=s,T=C,v=M}return[255*O,255*T,255*v]},S.cmyk.rgb=function(y){var n=y[0]/100,s=y[1]/100,h=y[2]/100,M=y[3]/100;return[255*(1-Math.min(1,n*(1-M)+M)),255*(1-Math.min(1,s*(1-M)+M)),255*(1-Math.min(1,h*(1-M)+M))]},S.xyz.rgb=function(y){var n,s,h,M=y[0]/100,O=y[1]/100,T=y[2]/100;return s=-.9689*M+1.8758*O+.0415*T,h=.0557*M+-.204*O+1.057*T,n=(n=3.2406*M+-1.5372*O+-.4986*T)>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:12.92*s,h=h>.0031308?1.055*Math.pow(h,1/2.4)-.055:12.92*h,[255*(n=Math.min(Math.max(0,n),1)),255*(s=Math.min(Math.max(0,s),1)),255*(h=Math.min(Math.max(0,h),1))]},S.xyz.lab=function(y){var n=y[0],s=y[1],h=y[2];return s/=100,h/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(s=s>.008856?Math.pow(s,1/3):7.787*s+16/116)-16,500*(n-s),200*(s-(h=h>.008856?Math.pow(h,1/3):7.787*h+16/116))]},S.lab.xyz=function(y){var n,s,h,M=y[0];n=y[1]/500+(s=(M+16)/116),h=s-y[2]/200;var O=Math.pow(s,3),T=Math.pow(n,3),v=Math.pow(h,3);return s=O>.008856?O:(s-16/116)/7.787,n=T>.008856?T:(n-16/116)/7.787,h=v>.008856?v:(h-16/116)/7.787,[n*=95.047,s*=100,h*=108.883]},S.lab.lch=function(y){var n,s=y[0],h=y[1],M=y[2];return(n=360*Math.atan2(M,h)/2/Math.PI)<0&&(n+=360),[s,Math.sqrt(h*h+M*M),n]},S.lch.lab=function(y){var n,s=y[0],h=y[1];return n=y[2]/360*2*Math.PI,[s,h*Math.cos(n),h*Math.sin(n)]},S.rgb.ansi16=function(y){var n=y[0],s=y[1],h=y[2],M=1 in arguments?arguments[1]:S.rgb.hsv(y)[2];if((M=Math.round(M/50))===0)return 30;var O=30+(Math.round(h/255)<<2|Math.round(s/255)<<1|Math.round(n/255));return M===2&&(O+=60),O},S.hsv.ansi16=function(y){return S.rgb.ansi16(S.hsv.rgb(y),y[2])},S.rgb.ansi256=function(y){var n=y[0],s=y[1],h=y[2];return n===s&&s===h?n<8?16:n>248?231:Math.round((n-8)/247*24)+232:16+36*Math.round(n/255*5)+6*Math.round(s/255*5)+Math.round(h/255*5)},S.ansi16.rgb=function(y){var n=y%10;if(n===0||n===7)return y>50&&(n+=3.5),[n=n/10.5*255,n,n];var s=.5*(1+~~(y>50));return[(1&n)*s*255,(n>>1&1)*s*255,(n>>2&1)*s*255]},S.ansi256.rgb=function(y){if(y>=232){var n=10*(y-232)+8;return[n,n,n]}var s;return y-=16,[Math.floor(y/36)/5*255,Math.floor((s=y%36)/6)/5*255,s%6/5*255]},S.rgb.hex=function(y){var n=(((255&Math.round(y[0]))<<16)+((255&Math.round(y[1]))<<8)+(255&Math.round(y[2]))).toString(16).toUpperCase();return"000000".substring(n.length)+n},S.hex.rgb=function(y){var n=y.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!n)return[0,0,0];var s=n[0];n[0].length===3&&(s=s.split("").map(function(M){return M+M}).join(""));var h=parseInt(s,16);return[h>>16&255,h>>8&255,255&h]},S.rgb.hcg=function(y){var n,s=y[0]/255,h=y[1]/255,M=y[2]/255,O=Math.max(Math.max(s,h),M),T=Math.min(Math.min(s,h),M),v=O-T;return n=v<=0?0:O===s?(h-M)/v%6:O===h?2+(M-s)/v:4+(s-h)/v+4,n/=6,[360*(n%=1),100*v,100*(v<1?T/(1-v):0)]},S.hsl.hcg=function(y){var n=y[1]/100,s=y[2]/100,h=1,M=0;return(h=s<.5?2*n*s:2*n*(1-s))<1&&(M=(s-.5*h)/(1-h)),[y[0],100*h,100*M]},S.hsv.hcg=function(y){var n=y[1]/100,s=y[2]/100,h=n*s,M=0;return h<1&&(M=(s-h)/(1-h)),[y[0],100*h,100*M]},S.hcg.rgb=function(y){var n=y[0]/360,s=y[1]/100,h=y[2]/100;if(s===0)return[255*h,255*h,255*h];var M,O=[0,0,0],T=n%1*6,v=T%1,m=1-v;switch(Math.floor(T)){case 0:O[0]=1,O[1]=v,O[2]=0;break;case 1:O[0]=m,O[1]=1,O[2]=0;break;case 2:O[0]=0,O[1]=1,O[2]=v;break;case 3:O[0]=0,O[1]=m,O[2]=1;break;case 4:O[0]=v,O[1]=0,O[2]=1;break;default:O[0]=1,O[1]=0,O[2]=m}return M=(1-s)*h,[255*(s*O[0]+M),255*(s*O[1]+M),255*(s*O[2]+M)]},S.hcg.hsv=function(y){var n=y[1]/100,s=n+y[2]/100*(1-n),h=0;return s>0&&(h=n/s),[y[0],100*h,100*s]},S.hcg.hsl=function(y){var n=y[1]/100,s=y[2]/100*(1-n)+.5*n,h=0;return s>0&&s<.5?h=n/(2*s):s>=.5&&s<1&&(h=n/(2*(1-s))),[y[0],100*h,100*s]},S.hcg.hwb=function(y){var n=y[1]/100,s=n+y[2]/100*(1-n);return[y[0],100*(s-n),100*(1-s)]},S.hwb.hcg=function(y){var n=y[1]/100,s=1-y[2]/100,h=s-n,M=0;return h<1&&(M=(s-h)/(1-h)),[y[0],100*h,100*M]},S.apple.rgb=function(y){return[y[0]/65535*255,y[1]/65535*255,y[2]/65535*255]},S.rgb.apple=function(y){return[y[0]/255*65535,y[1]/255*65535,y[2]/255*65535]},S.gray.rgb=function(y){return[y[0]/100*255,y[0]/100*255,y[0]/100*255]},S.gray.hsl=S.gray.hsv=function(y){return[0,0,y[0]]},S.gray.hwb=function(y){return[0,100,y[0]]},S.gray.cmyk=function(y){return[0,0,0,y[0]]},S.gray.lab=function(y){return[y[0],0,0]},S.gray.hex=function(y){var n=255&Math.round(y[0]/100*255),s=((n<<16)+(n<<8)+n).toString(16).toUpperCase();return"000000".substring(s.length)+s},S.rgb.gray=function(y){return[(y[0]+y[1]+y[2])/3/255*100]}},function(a,E,e){var r=e(95),p=e(127),b=e(100),S=e(301),l=e(307),A=e(169),j=e(170),y=e(310),n=e(311),s=e(174),h=e(312),M=e(74),O=e(316),T=e(317),v=e(179),m=e(26),C=e(73),D=e(321),Y=e(43),Z=e(323),et=e(58),dt=e(65),ht={};ht["[object Arguments]"]=ht["[object Array]"]=ht["[object ArrayBuffer]"]=ht["[object DataView]"]=ht["[object Boolean]"]=ht["[object Date]"]=ht["[object Float32Array]"]=ht["[object Float64Array]"]=ht["[object Int8Array]"]=ht["[object Int16Array]"]=ht["[object Int32Array]"]=ht["[object Map]"]=ht["[object Number]"]=ht["[object Object]"]=ht["[object RegExp]"]=ht["[object Set]"]=ht["[object String]"]=ht["[object Symbol]"]=ht["[object Uint8Array]"]=ht["[object Uint8ClampedArray]"]=ht["[object Uint16Array]"]=ht["[object Uint32Array]"]=!0,ht["[object Error]"]=ht["[object Function]"]=ht["[object WeakMap]"]=!1,a.exports=function St(wt,xt,ft,Bt,Rt,Ot){var X,ut=1&xt,vt=2&xt,pt=4&xt;if(ft&&(X=Rt?ft(wt,Bt,Rt,Ot):ft(wt)),X!==void 0)return X;if(!Y(wt))return wt;var Et=m(wt);if(Et){if(X=O(wt),!ut)return j(wt,X)}else{var q=M(wt),st=q=="[object Function]"||q=="[object GeneratorFunction]";if(C(wt))return A(wt,ut);if(q=="[object Object]"||q=="[object Arguments]"||st&&!Rt){if(X=vt||st?{}:v(wt),!ut)return vt?n(wt,l(X,wt)):y(wt,S(X,wt))}else{if(!ht[q])return Rt?wt:{};X=T(wt,q,ut)}}Ot||(Ot=new r);var it=Ot.get(wt);if(it)return it;Ot.set(wt,X),Z(wt)?wt.forEach(function(P){X.add(St(P,xt,ft,P,wt,Ot))}):D(wt)&&wt.forEach(function(P,H){X.set(H,St(P,xt,ft,H,wt,Ot))});var z=Et?void 0:(pt?vt?h:s:vt?dt:et)(wt);return p(z||wt,function(P,H){z&&(P=wt[H=P]),b(X,H,St(P,xt,ft,H,wt,Ot))}),X}},function(a,E,e){(function(r){function p(S){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(S)}var b=(r===void 0?"undefined":p(r))=="object"&&r&&r.Object===Object&&r;a.exports=b}).call(this,e(164))},function(a,E){function e(p){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(p)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(p){(typeof window=="undefined"?"undefined":e(window))==="object"&&(r=window)}a.exports=r},function(a,E){var e=Function.prototype.toString;a.exports=function(r){if(r!=null){try{return e.call(r)}catch(p){}try{return r+""}catch(p){}}return""}},function(a,E,e){var r=e(64),p=function(){try{var b=r(Object,"defineProperty");return b({},"",{}),b}catch(S){}}();a.exports=p},function(a,E,e){var r=e(302),p=e(85),b=e(26),S=e(73),l=e(102),A=e(44),j=Object.prototype.hasOwnProperty;a.exports=function(y,n){var s=b(y),h=!s&&p(y),M=!s&&!h&&S(y),O=!s&&!h&&!M&&A(y),T=s||h||M||O,v=T?r(y.length,String):[],m=v.length;for(var C in y)!n&&!j.call(y,C)||T&&(C=="length"||M&&(C=="offset"||C=="parent")||O&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||l(C,m))||v.push(C);return v}},function(a,E){a.exports=function(e,r){return function(p){return e(r(p))}}},function(a,E,e){(function(r){function p(y){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(y)}var b=e(47),S=p(E)=="object"&&E&&!E.nodeType&&E,l=S&&p(r)=="object"&&r&&!r.nodeType&&r,A=l&&l.exports===S?b.Buffer:void 0,j=A?A.allocUnsafe:void 0;r.exports=function(y,n){if(n)return y.slice();var s=y.length,h=j?j(s):new y.constructor(s);return y.copy(h),h}}).call(this,e(86)(a))},function(a,E){a.exports=function(e,r){var p=-1,b=e.length;for(r||(r=Array(b));++p<b;)r[p]=e[p];return r}},function(a,E){a.exports=function(e,r){for(var p=-1,b=e==null?0:e.length,S=0,l=[];++p<b;){var A=e[p];r(A,p,e)&&(l[S++]=A)}return l}},function(a,E){a.exports=function(){return[]}},function(a,E,e){var r=e(132),p=e(105),b=e(131),S=e(172),l=Object.getOwnPropertySymbols?function(A){for(var j=[];A;)r(j,b(A)),A=p(A);return j}:S;a.exports=l},function(a,E,e){var r=e(175),p=e(131),b=e(58);a.exports=function(S){return r(S,b,p)}},function(a,E,e){var r=e(132),p=e(26);a.exports=function(b,S,l){var A=S(b);return p(b)?A:r(A,l(b))}},function(a,E,e){var r=e(64)(e(47),"Set");a.exports=r},function(a,E,e){var r=e(47).Uint8Array;a.exports=r},function(a,E,e){var r=e(133);a.exports=function(p,b){var S=b?r(p.buffer):p.buffer;return new p.constructor(S,p.byteOffset,p.length)}},function(a,E,e){var r=e(180),p=e(105),b=e(104);a.exports=function(S){return typeof S.constructor!="function"||b(S)?{}:r(p(S))}},function(a,E,e){var r=e(43),p=Object.create,b=function(){function S(){}return function(l){if(!r(l))return{};if(p)return p(l);S.prototype=l;var A=new S;return S.prototype=void 0,A}}();a.exports=b},function(a,E,e){a.exports=e(182)},function(a,E,e){var r=e(127),p=e(106),b=e(183),S=e(26);a.exports=function(l,A){return(S(l)?r:p)(l,b(A))}},function(a,E,e){var r=e(66);a.exports=function(p){return typeof p=="function"?p:r}},function(a,E,e){var r=e(171),p=e(327),b=e(54),S=e(26);a.exports=function(l,A){return(S(l)?r:p)(l,b(A,3))}},function(a,E,e){var r=e(330),p=e(48);a.exports=function b(S,l,A,j,y){return S===l||(S==null||l==null||!p(S)&&!p(l)?S!=S&&l!=l:r(S,l,A,j,b,y))}},function(a,E,e){var r=e(187),p=e(333),b=e(188);a.exports=function(S,l,A,j,y,n){var s=1&A,h=S.length,M=l.length;if(h!=M&&!(s&&M>h))return!1;var O=n.get(S),T=n.get(l);if(O&&T)return O==l&&T==S;var v=-1,m=!0,C=2&A?new r:void 0;for(n.set(S,l),n.set(l,S);++v<h;){var D=S[v],Y=l[v];if(j)var Z=s?j(Y,D,v,l,S,n):j(D,Y,v,S,l,n);if(Z!==void 0){if(Z)continue;m=!1;break}if(C){if(!p(l,function(et,dt){if(!b(C,dt)&&(D===et||y(D,et,A,j,n)))return C.push(dt)})){m=!1;break}}else if(D!==Y&&!y(D,Y,A,j,n)){m=!1;break}}return n.delete(S),n.delete(l),m}},function(a,E,e){var r=e(126),p=e(331),b=e(332);function S(l){var A=-1,j=l==null?0:l.length;for(this.__data__=new r;++A<j;)this.add(l[A])}S.prototype.add=S.prototype.push=p,S.prototype.has=b,a.exports=S},function(a,E){a.exports=function(e,r){return e.has(r)}},function(a,E,e){var r=e(43);a.exports=function(p){return p==p&&!r(p)}},function(a,E){a.exports=function(e,r){return function(p){return p!=null&&p[e]===r&&(r!==void 0||e in Object(p))}}},function(a,E,e){var r=e(343);a.exports=function(p){return p==null?"":r(p)}},function(a,E,e){var r=e(344),p=e(193);a.exports=function(b,S){return b!=null&&p(b,S,r)}},function(a,E,e){var r=e(108),p=e(85),b=e(26),S=e(102),l=e(128),A=e(87);a.exports=function(j,y,n){for(var s=-1,h=(y=r(y,j)).length,M=!1;++s<h;){var O=A(y[s]);if(!(M=j!=null&&n(j,O)))break;j=j[O]}return M||++s!=h?M:!!(h=j==null?0:j.length)&&l(h)&&S(O,h)&&(b(j)||p(j))}},function(a,E){a.exports=function(e){return function(r){return r==null?void 0:r[e]}}},function(a,E,e){var r=e(347),p=e(193);a.exports=function(b,S){return b!=null&&p(b,S,r)}},function(a,E){a.exports=function(e){return e===void 0}},function(a,E,e){var r=e(109),p=e(54),b=e(198),S=e(26);a.exports=function(l,A){return(S(l)?r:b)(l,p(A,3))}},function(a,E,e){var r=e(106),p=e(53);a.exports=function(b,S){var l=-1,A=p(b)?Array(b.length):[];return r(b,function(j,y,n){A[++l]=S(j,y,n)}),A}},function(a,E,e){var r=e(349),p=e(106),b=e(54),S=e(350),l=e(26);a.exports=function(A,j,y){var n=l(A)?r:S,s=arguments.length<3;return n(A,b(j,4),y,s,p)}},function(a,E,e){var r=e(360),p=Math.max;a.exports=function(b,S,l){return S=p(S===void 0?b.length-1:S,0),function(){for(var A=arguments,j=-1,y=p(A.length-S,0),n=Array(y);++j<y;)n[j]=A[S+j];j=-1;for(var s=Array(S+1);++j<S;)s[j]=A[j];return s[S]=l(n),r(b,this,s)}}},function(a,E,e){var r=e(361),p=e(362)(r);a.exports=p},function(a,E,e){var r=e(187),p=e(363),b=e(367),S=e(188),l=e(368),A=e(137);a.exports=function(j,y,n){var s=-1,h=p,M=j.length,O=!0,T=[],v=T;if(n)O=!1,h=b;else if(M>=200){var m=y?null:l(j);if(m)return A(m);O=!1,h=S,v=new r}else v=y?[]:T;t:for(;++s<M;){var C=j[s],D=y?y(C):C;if(C=n||C!==0?C:0,O&&D==D){for(var Y=v.length;Y--;)if(v[Y]===D)continue t;y&&v.push(D),T.push(C)}else h(v,D,n)||(v!==T&&v.push(D),T.push(C))}return T}},function(a,E){a.exports=function(e,r,p,b){for(var S=e.length,l=p+(b?1:-1);b?l--:++l<S;)if(r(e[l],l,e))return l;return-1}},function(a,E,e){var r=e(53),p=e(48);a.exports=function(b){return p(b)&&r(b)}},function(a,E,e){var r=e(370),p=e(58);a.exports=function(b){return b==null?[]:r(b,p(b))}},function(a,E,e){var r=e(42),p=e(207);a.exports=function(S,l,A,j){return function(y,n,s,h){var M,O,T={},v=new p,m=function(D){var Y=D.v!==M?D.v:D.w,Z=T[Y],et=s(D),dt=O.distance+et;if(et<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+D+" Weight: "+et);dt<Z.distance&&(Z.distance=dt,Z.predecessor=M,v.decrease(Y,dt))};for(y.nodes().forEach(function(C){var D=C===n?0:Number.POSITIVE_INFINITY;T[C]={distance:D},v.add(C,D)});v.size()>0&&(M=v.removeMin(),(O=T[M]).distance!==Number.POSITIVE_INFINITY);)h(M).forEach(m);return T}(S,String(l),A||b,j||function(y){return S.outEdges(y)})};var b=r.constant(1)},function(a,E,e){var r=e(42);function p(){this._arr=[],this._keyIndices={}}a.exports=p,p.prototype.size=function(){return this._arr.length},p.prototype.keys=function(){return this._arr.map(function(b){return b.key})},p.prototype.has=function(b){return r.has(this._keyIndices,b)},p.prototype.priority=function(b){var S=this._keyIndices[b];if(S!==void 0)return this._arr[S].priority},p.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},p.prototype.add=function(b,S){var l=this._keyIndices;if(b=String(b),!r.has(l,b)){var A=this._arr,j=A.length;return l[b]=j,A.push({key:b,priority:S}),this._decrease(j),!0}return!1},p.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var b=this._arr.pop();return delete this._keyIndices[b.key],this._heapify(0),b.key},p.prototype.decrease=function(b,S){var l=this._keyIndices[b];if(S>this._arr[l].priority)throw new Error("New priority is greater than current priority. Key: "+b+" Old: "+this._arr[l].priority+" New: "+S);this._arr[l].priority=S,this._decrease(l)},p.prototype._heapify=function(b){var S=this._arr,l=2*b,A=l+1,j=b;l<S.length&&(j=S[l].priority<S[j].priority?l:j,A<S.length&&(j=S[A].priority<S[j].priority?A:j),j!==b&&(this._swap(b,j),this._heapify(j)))},p.prototype._decrease=function(b){for(var S,l=this._arr,A=l[b].priority;b!==0&&!(l[S=b>>1].priority<A);)this._swap(b,S),b=S},p.prototype._swap=function(b,S){var l=this._arr,A=this._keyIndices,j=l[b],y=l[S];l[b]=y,l[S]=j,A[y.key]=b,A[j.key]=S}},function(a,E,e){var r=e(42);a.exports=function(p){var b=0,S=[],l={},A=[];return p.nodes().forEach(function(j){r.has(l,j)||function y(n){var s=l[n]={onStack:!0,lowlink:b,index:b++};if(S.push(n),p.successors(n).forEach(function(O){r.has(l,O)?l[O].onStack&&(s.lowlink=Math.min(s.lowlink,l[O].index)):(y(O),s.lowlink=Math.min(s.lowlink,l[O].lowlink))}),s.lowlink===s.index){var h,M=[];do h=S.pop(),l[h].onStack=!1,M.push(h);while(n!==h);A.push(M)}}(j)}),A}},function(a,E,e){var r=e(42);function p(S){var l={},A={},j=[];if(r.each(S.sinks(),function y(n){if(r.has(A,n))throw new b;r.has(l,n)||(A[n]=!0,l[n]=!0,r.each(S.predecessors(n),y),delete A[n],j.push(n))}),r.size(l)!==S.nodeCount())throw new b;return j}function b(){}a.exports=p,p.CycleException=b,b.prototype=new Error},function(a,E,e){var r=e(42);a.exports=function(p,b,S){r.isArray(b)||(b=[b]);var l=(p.isDirected()?p.successors:p.neighbors).bind(p),A=[],j={};return r.each(b,function(y){if(!p.hasNode(y))throw new Error("Graph does not have node: "+y);(function n(s,h,M,O,T,v){r.has(O,h)||(O[h]=!0,M||v.push(h),r.each(T(h),function(m){n(s,m,M,O,T,v)}),M&&v.push(h))})(p,y,S==="post",j,l,A)}),A}},function(a,E,e){var r=e(389);a.exports=function(p){return p?(p=r(p))===1/0||p===-1/0?17976931348623157e292*(p<0?-1:1):p==p?p:0:p===0?p:0}},function(a,E,e){var r=e(139);a.exports=function(p){return(p==null?0:p.length)?r(p,1):[]}},function(a,E,e){var r=e(101),p=e(71);a.exports=function(b,S,l){(l!==void 0&&!p(b[S],l)||l===void 0&&!(S in b))&&r(b,S,l)}},function(a,E){a.exports=function(e,r){if((r!=="constructor"||typeof e[r]!="function")&&r!="__proto__")return e[r]}},function(a,E){a.exports=function(e,r){return e<r}},function(a,E,e){"use strict";var r=e(24),p=e(46).Graph,b=e(112).slack;function S(j,y){return r.forEach(j.nodes(),function n(s){r.forEach(y.nodeEdges(s),function(h){var M=h.v,O=s===M?h.w:M;j.hasNode(O)||b(y,h)||(j.setNode(O,{}),j.setEdge(s,O,{}),n(O))})}),j.nodeCount()}function l(j,y){return r.minBy(y.edges(),function(n){if(j.hasNode(n.v)!==j.hasNode(n.w))return b(y,n)})}function A(j,y,n){r.forEach(j.nodes(),function(s){y.node(s).rank+=n})}a.exports=function(j){var y,n,s=new p({directed:!1}),h=j.nodes()[0],M=j.nodeCount();for(s.setNode(h,{});S(s,j)<M;)y=l(s,j),n=s.hasNode(y.v)?b(j,y):-b(j,y),A(s,j,n);return s}},function(a,E,e){(function(r,p){function b(l){return(b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(l)}/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var S;(function(l){(function(A){var j=(p===void 0?"undefined":b(p))==="object"?p:(typeof self=="undefined"?"undefined":b(self))==="object"?self:b(this)==="object"?this:Function("return this;")(),y=n(l);function n(s,h){return function(M,O){typeof s[M]!="function"&&Object.defineProperty(s,M,{configurable:!0,writable:!0,value:O}),h&&h(M,O)}}j.Reflect===void 0?j.Reflect=l:y=n(j.Reflect,y),function(s){var h=Object.prototype.hasOwnProperty,M=typeof Symbol=="function",O=M&&Symbol.toPrimitive!==void 0?Symbol.toPrimitive:"@@toPrimitive",T=M&&Symbol.iterator!==void 0?Symbol.iterator:"@@iterator",v=typeof Object.create=="function",m={__proto__:[]}instanceof Array,C=!v&&!m,D={create:v?function(){return k(Object.create(null))}:m?function(){return k({__proto__:null})}:function(){return k({})},has:C?function(d,g){return h.call(d,g)}:function(d,g){return g in d},get:C?function(d,g){return h.call(d,g)?d[g]:void 0}:function(d,g){return d[g]}},Y=Object.getPrototypeOf(Function),Z=(r===void 0?"undefined":b(r))==="object"&&r.env&&r.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",et=Z||typeof Map!="function"||typeof Map.prototype.entries!="function"?function(){var d={},g=[],F=function(){function at(At,yt,gt){this._index=0,this._keys=At,this._values=yt,this._selector=gt}return at.prototype["@@iterator"]=function(){return this},at.prototype[T]=function(){return this},at.prototype.next=function(){var At=this._index;if(At>=0&&At<this._keys.length){var yt=this._selector(this._keys[At],this._values[At]);return At+1>=this._keys.length?(this._index=-1,this._keys=g,this._values=g):this._index++,{value:yt,done:!1}}return{value:void 0,done:!0}},at.prototype.throw=function(At){throw this._index>=0&&(this._index=-1,this._keys=g,this._values=g),At},at.prototype.return=function(At){return this._index>=0&&(this._index=-1,this._keys=g,this._values=g),{value:At,done:!0}},at}();return function(){function at(){this._keys=[],this._values=[],this._cacheKey=d,this._cacheIndex=-2}return Object.defineProperty(at.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),at.prototype.has=function(At){return this._find(At,!1)>=0},at.prototype.get=function(At){var yt=this._find(At,!1);return yt>=0?this._values[yt]:void 0},at.prototype.set=function(At,yt){var gt=this._find(At,!0);return this._values[gt]=yt,this},at.prototype.delete=function(At){var yt=this._find(At,!1);if(yt>=0){for(var gt=this._keys.length,bt=yt+1;bt<gt;bt++)this._keys[bt-1]=this._keys[bt],this._values[bt-1]=this._values[bt];return this._keys.length--,this._values.length--,At===this._cacheKey&&(this._cacheKey=d,this._cacheIndex=-2),!0}return!1},at.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=d,this._cacheIndex=-2},at.prototype.keys=function(){return new F(this._keys,this._values,V)},at.prototype.values=function(){return new F(this._keys,this._values,tt)},at.prototype.entries=function(){return new F(this._keys,this._values,ot)},at.prototype["@@iterator"]=function(){return this.entries()},at.prototype[T]=function(){return this.entries()},at.prototype._find=function(At,yt){return this._cacheKey!==At&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=At)),this._cacheIndex<0&&yt&&(this._cacheIndex=this._keys.length,this._keys.push(At),this._values.push(void 0)),this._cacheIndex},at}();function V(at,At){return at}function tt(at,At){return At}function ot(at,At){return[at,At]}}():Map,dt=Z||typeof Set!="function"||typeof Set.prototype.entries!="function"?function(){function d(){this._map=new et}return Object.defineProperty(d.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),d.prototype.has=function(g){return this._map.has(g)},d.prototype.add=function(g){return this._map.set(g,g),this},d.prototype.delete=function(g){return this._map.delete(g)},d.prototype.clear=function(){this._map.clear()},d.prototype.keys=function(){return this._map.keys()},d.prototype.values=function(){return this._map.values()},d.prototype.entries=function(){return this._map.entries()},d.prototype["@@iterator"]=function(){return this.keys()},d.prototype[T]=function(){return this.keys()},d}():Set,ht=new(Z||typeof WeakMap!="function"?function(){var d=D.create(),g=F();return function(){function at(){this._key=F()}return at.prototype.has=function(At){var yt=V(At,!1);return yt!==void 0&&D.has(yt,this._key)},at.prototype.get=function(At){var yt=V(At,!1);return yt!==void 0?D.get(yt,this._key):void 0},at.prototype.set=function(At,yt){return V(At,!0)[this._key]=yt,this},at.prototype.delete=function(At){var yt=V(At,!1);return yt!==void 0&&delete yt[this._key]},at.prototype.clear=function(){this._key=F()},at}();function F(){var at;do at="@@WeakMap@@"+ot();while(D.has(d,at));return d[at]=!0,at}function V(at,At){if(!h.call(at,g)){if(!At)return;Object.defineProperty(at,g,{value:D.create()})}return at[g]}function tt(at,At){for(var yt=0;yt<At;++yt)at[yt]=255*Math.random()|0;return at}function ot(){var at,At=(at=16,typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(at)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(at)):tt(new Uint8Array(at),at):tt(new Array(at),at));At[6]=79&At[6]|64,At[8]=191&At[8]|128;for(var yt="",gt=0;gt<16;++gt){var bt=At[gt];gt!==4&&gt!==6&&gt!==8||(yt+="-"),bt<16&&(yt+="0"),yt+=bt.toString(16).toLowerCase()}return yt}}():WeakMap);function St(d,g,F){var V=ht.get(d);if(Ot(V)){if(!F)return;V=new et,ht.set(d,V)}var tt=V.get(g);if(Ot(tt)){if(!F)return;tt=new et,V.set(g,tt)}return tt}function wt(d,g,F){var V=St(g,F,!1);return!Ot(V)&&!!V.has(d)}function xt(d,g,F){var V=St(g,F,!1);if(!Ot(V))return V.get(d)}function ft(d,g,F,V){St(F,V,!0).set(d,g)}function Bt(d,g){var F=[],V=St(d,g,!1);if(Ot(V))return F;for(var tt=function(yt){var gt=it(yt,T);if(!q(gt))throw new TypeError;var bt=gt.call(yt);if(!ut(bt))throw new TypeError;return bt}(V.keys()),ot=0;;){var at=z(tt);if(!at)return F.length=ot,F;var At=at.value;try{F[ot]=At}catch(yt){try{P(tt)}finally{throw yt}}ot++}}function Rt(d){if(d===null)return 1;switch(b(d)){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return d===null?1:6;default:return 6}}function Ot(d){return d===void 0}function X(d){return d===null}function ut(d){return b(d)==="object"?d!==null:typeof d=="function"}function vt(d,g){switch(Rt(d)){case 0:case 1:case 2:case 3:case 4:case 5:return d}var F=g===3?"string":g===5?"number":"default",V=it(d,O);if(V!==void 0){var tt=V.call(d,F);if(ut(tt))throw new TypeError;return tt}return function(ot,at){if(at==="string"){var At=ot.toString;if(q(At)&&!ut(gt=At.call(ot))||q(yt=ot.valueOf)&&!ut(gt=yt.call(ot)))return gt}else{var yt;if(q(yt=ot.valueOf)&&!ut(gt=yt.call(ot)))return gt;var gt,bt=ot.toString;if(q(bt)&&!ut(gt=bt.call(ot)))return gt}throw new TypeError}(d,F==="default"?"number":F)}function pt(d){var g=vt(d,3);return b(g)==="symbol"?g:function(F){return""+F}(g)}function Et(d){return Array.isArray?Array.isArray(d):d instanceof Object?d instanceof Array:Object.prototype.toString.call(d)==="[object Array]"}function q(d){return typeof d=="function"}function st(d){return typeof d=="function"}function it(d,g){var F=d[g];if(F!=null){if(!q(F))throw new TypeError;return F}}function z(d){var g=d.next();return!g.done&&g}function P(d){var g=d.return;g&&g.call(d)}function H(d){var g=Object.getPrototypeOf(d);if(typeof d!="function"||d===Y||g!==Y)return g;var F=d.prototype,V=F&&Object.getPrototypeOf(F);if(V==null||V===Object.prototype)return g;var tt=V.constructor;return typeof tt!="function"||tt===d?g:tt}function k(d){return d.__=void 0,delete d.__,d}s("decorate",function(d,g,F,V){if(Ot(F)){if(!Et(d))throw new TypeError;if(!st(g))throw new TypeError;return function(tt,ot){for(var at=tt.length-1;at>=0;--at){var At=(0,tt[at])(ot);if(!Ot(At)&&!X(At)){if(!st(At))throw new TypeError;ot=At}}return ot}(d,g)}if(!Et(d))throw new TypeError;if(!ut(g))throw new TypeError;if(!ut(V)&&!Ot(V)&&!X(V))throw new TypeError;return X(V)&&(V=void 0),function(tt,ot,at,At){for(var yt=tt.length-1;yt>=0;--yt){var gt=(0,tt[yt])(ot,at,At);if(!Ot(gt)&&!X(gt)){if(!ut(gt))throw new TypeError;At=gt}}return At}(d,g,F=pt(F),V)}),s("metadata",function(d,g){return function(F,V){if(!ut(F))throw new TypeError;if(!Ot(V)&&!function(tt){switch(Rt(tt)){case 3:case 4:return!0;default:return!1}}(V))throw new TypeError;ft(d,g,F,V)}}),s("defineMetadata",function(d,g,F,V){if(!ut(F))throw new TypeError;return Ot(V)||(V=pt(V)),ft(d,g,F,V)}),s("hasMetadata",function(d,g,F){if(!ut(g))throw new TypeError;return Ot(F)||(F=pt(F)),function V(tt,ot,at){if(wt(tt,ot,at))return!0;var At=H(ot);return!X(At)&&V(tt,At,at)}(d,g,F)}),s("hasOwnMetadata",function(d,g,F){if(!ut(g))throw new TypeError;return Ot(F)||(F=pt(F)),wt(d,g,F)}),s("getMetadata",function(d,g,F){if(!ut(g))throw new TypeError;return Ot(F)||(F=pt(F)),function V(tt,ot,at){if(wt(tt,ot,at))return xt(tt,ot,at);var At=H(ot);return X(At)?void 0:V(tt,At,at)}(d,g,F)}),s("getOwnMetadata",function(d,g,F){if(!ut(g))throw new TypeError;return Ot(F)||(F=pt(F)),xt(d,g,F)}),s("getMetadataKeys",function(d,g){if(!ut(d))throw new TypeError;return Ot(g)||(g=pt(g)),function F(V,tt){var ot=Bt(V,tt),at=H(V);if(at===null)return ot;var At=F(at,tt);if(At.length<=0)return ot;if(ot.length<=0)return At;for(var yt=new dt,gt=[],bt=0,Tt=ot;bt<Tt.length;bt++){var Dt=Tt[bt];yt.has(Dt)||(yt.add(Dt),gt.push(Dt))}for(var Ut=0,jt=At;Ut<jt.length;Ut++)Dt=jt[Ut],yt.has(Dt)||(yt.add(Dt),gt.push(Dt));return gt}(d,g)}),s("getOwnMetadataKeys",function(d,g){if(!ut(d))throw new TypeError;return Ot(g)||(g=pt(g)),Bt(d,g)}),s("deleteMetadata",function(d,g,F){if(!ut(g))throw new TypeError;Ot(F)||(F=pt(F));var V=St(g,F,!1);if(Ot(V)||!V.delete(d))return!1;if(V.size>0)return!0;var tt=ht.get(g);return tt.delete(F),tt.size>0||ht.delete(g),!0})}(y)})()})(S||(S={}))}).call(this,e(158),e(164))},function(a,E,e){var r=e(219);a.exports=function(p,b){if(p){if(typeof p=="string")return r(p,b);var S=Object.prototype.toString.call(p).slice(8,-1);return S==="Object"&&p.constructor&&(S=p.constructor.name),S==="Map"||S==="Set"?Array.from(p):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?r(p,b):void 0}}},function(a,E){a.exports=function(e,r){(r==null||r>e.length)&&(r=e.length);for(var p=0,b=new Array(r);p<r;p++)b[p]=e[p];return b}},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.MetadataReader=void 0;var r=e(32),p=function(){function b(){}return b.prototype.getConstructorMetadata=function(S){return{compilerGeneratedMetadata:Reflect.getMetadata(r.PARAM_TYPES,S),userGeneratedMetadata:Reflect.getMetadata(r.TAGGED,S)||{}}},b.prototype.getPropertiesMetadata=function(S){return Reflect.getMetadata(r.TAGGED_PROP,S)||[]},b}();E.MetadataReader=p},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.isStackOverflowExeption=void 0;var r=e(41);E.isStackOverflowExeption=function(p){return p instanceof RangeError||p.message===r.STACK_OVERFLOW}},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.inject=E.LazyServiceIdentifer=void 0;var r=e(41),p=e(32),b=e(49),S=e(59),l=function(){function A(j){this._cb=j}return A.prototype.unwrap=function(){return this._cb()},A}();E.LazyServiceIdentifer=l,E.inject=function(A){return function(j,y,n){if(A===void 0)throw new Error(r.UNDEFINED_INJECT_ANNOTATION(j.name));var s=new b.Metadata(p.INJECT_TAG,A);typeof n=="number"?S.tagParameter(j,y,n,s):S.tagProperty(j,y,s)}}},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.Target=void 0;var r=e(32),p=e(67),b=e(49),S=e(453),l=function(){function A(j,y,n,s){this.id=p.id(),this.type=j,this.serviceIdentifier=n,this.name=new S.QueryableString(y||""),this.metadata=new Array;var h=null;typeof s=="string"?h=new b.Metadata(r.NAMED_TAG,s):s instanceof b.Metadata&&(h=s),h!==null&&this.metadata.push(h)}return A.prototype.hasTag=function(j){for(var y=0,n=this.metadata;y<n.length;y++)if(n[y].key===j)return!0;return!1},A.prototype.isArray=function(){return this.hasTag(r.MULTI_INJECT_TAG)},A.prototype.matchesArray=function(j){return this.matchesTag(r.MULTI_INJECT_TAG)(j)},A.prototype.isNamed=function(){return this.hasTag(r.NAMED_TAG)},A.prototype.isTagged=function(){return this.metadata.some(function(j){return j.key!==r.INJECT_TAG&&j.key!==r.MULTI_INJECT_TAG&&j.key!==r.NAME_TAG&&j.key!==r.UNMANAGED_TAG&&j.key!==r.NAMED_TAG})},A.prototype.isOptional=function(){return this.matchesTag(r.OPTIONAL_TAG)(!0)},A.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(j){return j.key===r.NAMED_TAG})[0]:null},A.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(j){return j.key!==r.INJECT_TAG&&j.key!==r.MULTI_INJECT_TAG&&j.key!==r.NAME_TAG&&j.key!==r.UNMANAGED_TAG&&j.key!==r.NAMED_TAG}):null},A.prototype.matchesNamedTag=function(j){return this.matchesTag(r.NAMED_TAG)(j)},A.prototype.matchesTag=function(j){var y=this;return function(n){for(var s=0,h=y.metadata;s<h.length;s++){var M=h[s];if(M.key===j&&M.value===n)return!0}return!1}},A}();E.Target=l},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.BindingWhenOnSyntax=void 0;var r=e(141),p=e(142),b=function(){function S(l){this._binding=l,this._bindingWhenSyntax=new p.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding)}return S.prototype.when=function(l){return this._bindingWhenSyntax.when(l)},S.prototype.whenTargetNamed=function(l){return this._bindingWhenSyntax.whenTargetNamed(l)},S.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},S.prototype.whenTargetTagged=function(l,A){return this._bindingWhenSyntax.whenTargetTagged(l,A)},S.prototype.whenInjectedInto=function(l){return this._bindingWhenSyntax.whenInjectedInto(l)},S.prototype.whenParentNamed=function(l){return this._bindingWhenSyntax.whenParentNamed(l)},S.prototype.whenParentTagged=function(l,A){return this._bindingWhenSyntax.whenParentTagged(l,A)},S.prototype.whenAnyAncestorIs=function(l){return this._bindingWhenSyntax.whenAnyAncestorIs(l)},S.prototype.whenNoAncestorIs=function(l){return this._bindingWhenSyntax.whenNoAncestorIs(l)},S.prototype.whenAnyAncestorNamed=function(l){return this._bindingWhenSyntax.whenAnyAncestorNamed(l)},S.prototype.whenAnyAncestorTagged=function(l,A){return this._bindingWhenSyntax.whenAnyAncestorTagged(l,A)},S.prototype.whenNoAncestorNamed=function(l){return this._bindingWhenSyntax.whenNoAncestorNamed(l)},S.prototype.whenNoAncestorTagged=function(l,A){return this._bindingWhenSyntax.whenNoAncestorTagged(l,A)},S.prototype.whenAnyAncestorMatches=function(l){return this._bindingWhenSyntax.whenAnyAncestorMatches(l)},S.prototype.whenNoAncestorMatches=function(l){return this._bindingWhenSyntax.whenNoAncestorMatches(l)},S.prototype.onActivation=function(l){return this._bindingOnSyntax.onActivation(l)},S}();E.BindingWhenOnSyntax=b},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.typeConstraint=E.namedConstraint=E.taggedConstraint=E.traverseAncerstors=void 0;var r=e(32),p=e(49);E.traverseAncerstors=function l(A,j){var y=A.parentRequest;return y!==null&&(!!j(y)||l(y,j))};var b=function(A){return function(j){var y=function(s){return s!==null&&s.target!==null&&s.target.matchesTag(A)(j)};return y.metaData=new p.Metadata(A,j),y}};E.taggedConstraint=b;var S=b(r.NAMED_TAG);E.namedConstraint=S,E.typeConstraint=function(l){return function(A){var j=null;if(A!==null){if(j=A.bindings[0],typeof l=="string")return j.serviceIdentifier===l;var y=A.bindings[0].implementationType;return l===y}return!1}}},function(a,E){},function(a,E){},function(a,E){},function(a,E){},function(a,E){},function(a,E){},function(a,E){},function(a,E){a.exports=1e-6},function(a,E){a.exports=function(){var e=new Float32Array(2);return e[0]=0,e[1]=0,e}},function(a,E){a.exports=function(e,r,p){return e[0]=r,e[1]=p,e}},function(a,E){a.exports=function(e,r,p){return e[0]=r[0]+p[0],e[1]=r[1]+p[1],e}},function(a,E){a.exports=function(e,r,p){return e[0]=r[0]*p[0],e[1]=r[1]*p[1],e}},function(a,E){a.exports=function(e,r,p){return e[0]=r[0]/p[0],e[1]=r[1]/p[1],e}},function(a,E){a.exports=function(e,r){var p=r[0]-e[0],b=r[1]-e[1];return Math.sqrt(p*p+b*b)}},function(a,E){a.exports=function(e,r){var p=r[0]-e[0],b=r[1]-e[1];return p*p+b*b}},function(a,E){a.exports=function(e){var r=e[0],p=e[1];return Math.sqrt(r*r+p*p)}},function(a,E){a.exports=function(e){var r=e[0],p=e[1];return r*r+p*p}},function(a,E){a.exports=function(e,r){var p=r[0],b=r[1],S=p*p+b*b;return S>0&&(S=1/Math.sqrt(S),e[0]=r[0]*S,e[1]=r[1]*S),e}},function(a,E){a.exports=function(e,r){return e[0]*r[0]+e[1]*r[1]}},function(a,E){},function(a,E){},function(a,E,e){"use strict";var r={};e.r(r),e.d(r,"easeLinear",function(){return wt}),e.d(r,"easeQuad",function(){return Bt}),e.d(r,"easeQuadIn",function(){return xt}),e.d(r,"easeQuadOut",function(){return ft}),e.d(r,"easeQuadInOut",function(){return Bt}),e.d(r,"easeCubic",function(){return X}),e.d(r,"easeCubicIn",function(){return Rt}),e.d(r,"easeCubicOut",function(){return Ot}),e.d(r,"easeCubicInOut",function(){return X}),e.d(r,"easePoly",function(){return pt}),e.d(r,"easePolyIn",function(){return ut}),e.d(r,"easePolyOut",function(){return vt}),e.d(r,"easePolyInOut",function(){return pt}),e.d(r,"easeSin",function(){return z}),e.d(r,"easeSinIn",function(){return st}),e.d(r,"easeSinOut",function(){return it}),e.d(r,"easeSinInOut",function(){return z}),e.d(r,"easeExp",function(){return d}),e.d(r,"easeExpIn",function(){return H}),e.d(r,"easeExpOut",function(){return k}),e.d(r,"easeExpInOut",function(){return d}),e.d(r,"easeCircle",function(){return V}),e.d(r,"easeCircleIn",function(){return g}),e.d(r,"easeCircleOut",function(){return F}),e.d(r,"easeCircleInOut",function(){return V}),e.d(r,"easeBounce",function(){return at}),e.d(r,"easeBounceIn",function(){return ot}),e.d(r,"easeBounceOut",function(){return at}),e.d(r,"easeBounceInOut",function(){return At}),e.d(r,"easeBack",function(){return bt}),e.d(r,"easeBackIn",function(){return yt}),e.d(r,"easeBackOut",function(){return gt}),e.d(r,"easeBackInOut",function(){return bt}),e.d(r,"easeElastic",function(){return Ut}),e.d(r,"easeElasticIn",function(){return Dt}),e.d(r,"easeElasticOut",function(){return Ut}),e.d(r,"easeElasticInOut",function(){return jt});var p=e(1),b=e(119),S=e(117),l=e(19),A=e(0);function j(oe){return(j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Kt){return typeof Kt}:function(Kt){return Kt&&typeof Symbol=="function"&&Kt.constructor===Symbol&&Kt!==Symbol.prototype?"symbol":typeof Kt})(oe)}var y,n,s=0,h=0,M=0,O=0,T=0,v=0,m=(typeof performance=="undefined"?"undefined":j(performance))==="object"&&performance.now?performance:Date,C=(typeof window=="undefined"?"undefined":j(window))==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(oe){setTimeout(oe,17)};function D(){return T||(C(Y),T=m.now()+v)}function Y(){T=0}function Z(){this._call=this._time=this._next=null}function et(oe,Kt,te){var Oe=new Z;return Oe.restart(oe,Kt,te),Oe}function dt(){T=(O=m.now())+v,s=h=0;try{(function(){D(),++s;for(var oe,Kt=y;Kt;)(oe=T-Kt._time)>=0&&Kt._call.call(null,oe),Kt=Kt._next;--s})()}finally{s=0,function(){for(var oe,Kt,te=y,Oe=1/0;te;)te._call?(Oe>te._time&&(Oe=te._time),oe=te,te=te._next):(Kt=te._next,te._next=null,te=oe?oe._next=Kt:y=Kt);n=oe,St(Oe)}(),T=0}}function ht(){var oe=m.now(),Kt=oe-O;Kt>1e3&&(v-=Kt,O=oe)}function St(oe){s||(h&&(h=clearTimeout(h)),oe-T>24?(oe<1/0&&(h=setTimeout(dt,oe-m.now()-v)),M&&(M=clearInterval(M))):(M||(O=m.now(),M=setInterval(ht,1e3)),s=1,C(dt)))}function wt(oe){return+oe}function xt(oe){return oe*oe}function ft(oe){return oe*(2-oe)}function Bt(oe){return((oe*=2)<=1?oe*oe:--oe*(2-oe)+1)/2}function Rt(oe){return oe*oe*oe}function Ot(oe){return--oe*oe*oe+1}function X(oe){return((oe*=2)<=1?oe*oe*oe:(oe-=2)*oe*oe+2)/2}Z.prototype=et.prototype={constructor:Z,restart:function(Kt,te,Oe){if(typeof Kt!="function")throw new TypeError("callback is not a function");Oe=(Oe==null?D():+Oe)+(te==null?0:+te),this._next||n===this||(n?n._next=this:y=this,n=this),this._call=Kt,this._time=Oe,St()},stop:function(){this._call&&(this._call=null,this._time=1/0,St())}};var ut=function oe(Kt){function te(Oe){return Math.pow(Oe,Kt)}return Kt=+Kt,te.exponent=oe,te}(3),vt=function oe(Kt){function te(Oe){return 1-Math.pow(1-Oe,Kt)}return Kt=+Kt,te.exponent=oe,te}(3),pt=function oe(Kt){function te(Oe){return((Oe*=2)<=1?Math.pow(Oe,Kt):2-Math.pow(2-Oe,Kt))/2}return Kt=+Kt,te.exponent=oe,te}(3),Et=Math.PI,q=Et/2;function st(oe){return+oe==1?1:1-Math.cos(oe*q)}function it(oe){return Math.sin(oe*q)}function z(oe){return(1-Math.cos(Et*oe))/2}function P(oe){return 1.0009775171065494*(Math.pow(2,-10*oe)-.0009765625)}function H(oe){return P(1-+oe)}function k(oe){return 1-P(oe)}function d(oe){return((oe*=2)<=1?P(1-oe):2-P(oe-1))/2}function g(oe){return 1-Math.sqrt(1-oe*oe)}function F(oe){return Math.sqrt(1- --oe*oe)}function V(oe){return((oe*=2)<=1?1-Math.sqrt(1-oe*oe):Math.sqrt(1-(oe-=2)*oe)+1)/2}var tt=7.5625;function ot(oe){return 1-at(1-oe)}function at(oe){return(oe=+oe)<4/11?tt*oe*oe:oe<8/11?tt*(oe-=6/11)*oe+3/4:oe<10/11?tt*(oe-=9/11)*oe+15/16:tt*(oe-=21/22)*oe+63/64}function At(oe){return((oe*=2)<=1?1-at(1-oe):at(oe-1)+1)/2}var yt=function oe(Kt){function te(Oe){return(Oe=+Oe)*Oe*(Kt*(Oe-1)+Oe)}return Kt=+Kt,te.overshoot=oe,te}(1.70158),gt=function oe(Kt){function te(Oe){return--Oe*Oe*((Oe+1)*Kt+Oe)+1}return Kt=+Kt,te.overshoot=oe,te}(1.70158),bt=function oe(Kt){function te(Oe){return((Oe*=2)<1?Oe*Oe*((Kt+1)*Oe-Kt):(Oe-=2)*Oe*((Kt+1)*Oe+Kt)+2)/2}return Kt=+Kt,te.overshoot=oe,te}(1.70158),Tt=2*Math.PI,Dt=function oe(Kt,te){var Oe=Math.asin(1/(Kt=Math.max(1,Kt)))*(te/=Tt);function Qe(On){return Kt*P(- --On)*Math.sin((Oe-On)/te)}return Qe.amplitude=function(On){return oe(On,te*Tt)},Qe.period=function(On){return oe(Kt,On)},Qe}(1,.3),Ut=function oe(Kt,te){var Oe=Math.asin(1/(Kt=Math.max(1,Kt)))*(te/=Tt);function Qe(On){return 1-Kt*P(On=+On)*Math.sin((On+Oe)/te)}return Qe.amplitude=function(On){return oe(On,te*Tt)},Qe.period=function(On){return oe(Kt,On)},Qe}(1,.3),jt=function oe(Kt,te){var Oe=Math.asin(1/(Kt=Math.max(1,Kt)))*(te/=Tt);function Qe(On){return((On=2*On-1)<0?Kt*P(-On)*Math.sin((Oe-On)/te):2-Kt*P(On)*Math.sin((Oe+On)/te))/2}return Qe.amplitude=function(On){return oe(On,te*Tt)},Qe.period=function(On){return oe(Kt,On)},Qe}(1,.3),Vt=function(Kt,te,Oe){Kt.prototype=te.prototype=Oe,Oe.constructor=Kt};function Ht(oe,Kt){var te=Object.create(oe.prototype);for(var Oe in Kt)te[Oe]=Kt[Oe];return te}function re(){}var pe="\\s*([+-]?\\d+)\\s*",ye="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",we="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Re=/^#([0-9a-f]{3,8})$/,He=new RegExp("^rgb\\("+[pe,pe,pe]+"\\)$"),pn=new RegExp("^rgb\\("+[we,we,we]+"\\)$"),fn=new RegExp("^rgba\\("+[pe,pe,pe,ye]+"\\)$"),Rn=new RegExp("^rgba\\("+[we,we,we,ye]+"\\)$"),Cn=new RegExp("^hsl\\("+[ye,we,we]+"\\)$"),kn=new RegExp("^hsla\\("+[ye,we,we,ye]+"\\)$"),Mn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Tn(){return this.rgb().formatHex()}function Un(){return this.rgb().formatRgb()}function Kn(oe){var Kt,te;return oe=(oe+"").trim().toLowerCase(),(Kt=Re.exec(oe))?(te=Kt[1].length,Kt=parseInt(Kt[1],16),te===6?tr(Kt):te===3?new Sr(Kt>>8&15|Kt>>4&240,Kt>>4&15|240&Kt,(15&Kt)<<4|15&Kt,1):te===8?or(Kt>>24&255,Kt>>16&255,Kt>>8&255,(255&Kt)/255):te===4?or(Kt>>12&15|Kt>>8&240,Kt>>8&15|Kt>>4&240,Kt>>4&15|240&Kt,((15&Kt)<<4|15&Kt)/255):null):(Kt=He.exec(oe))?new Sr(Kt[1],Kt[2],Kt[3],1):(Kt=pn.exec(oe))?new Sr(255*Kt[1]/100,255*Kt[2]/100,255*Kt[3]/100,1):(Kt=fn.exec(oe))?or(Kt[1],Kt[2],Kt[3],Kt[4]):(Kt=Rn.exec(oe))?or(255*Kt[1]/100,255*Kt[2]/100,255*Kt[3]/100,Kt[4]):(Kt=Cn.exec(oe))?Fi(Kt[1],Kt[2]/100,Kt[3]/100,1):(Kt=kn.exec(oe))?Fi(Kt[1],Kt[2]/100,Kt[3]/100,Kt[4]):Mn.hasOwnProperty(oe)?tr(Mn[oe]):oe==="transparent"?new Sr(NaN,NaN,NaN,0):null}function tr(oe){return new Sr(oe>>16&255,oe>>8&255,255&oe,1)}function or(oe,Kt,te,Oe){return Oe<=0&&(oe=Kt=te=NaN),new Sr(oe,Kt,te,Oe)}function nr(oe){return oe instanceof re||(oe=Kn(oe)),oe?new Sr((oe=oe.rgb()).r,oe.g,oe.b,oe.opacity):new Sr}function er(oe,Kt,te,Oe){return arguments.length===1?nr(oe):new Sr(oe,Kt,te,Oe==null?1:Oe)}function Sr(oe,Kt,te,Oe){this.r=+oe,this.g=+Kt,this.b=+te,this.opacity=+Oe}function Vr(){return"#"+hi(this.r)+hi(this.g)+hi(this.b)}function ti(){var oe=this.opacity;return((oe=isNaN(oe)?1:Math.max(0,Math.min(1,oe)))===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(oe===1?")":", "+oe+")")}function hi(oe){return((oe=Math.max(0,Math.min(255,Math.round(oe)||0)))<16?"0":"")+oe.toString(16)}function Fi(oe,Kt,te,Oe){return Oe<=0?oe=Kt=te=NaN:te<=0||te>=1?oe=Kt=NaN:Kt<=0&&(oe=NaN),new si(oe,Kt,te,Oe)}function to(oe){if(oe instanceof si)return new si(oe.h,oe.s,oe.l,oe.opacity);if(oe instanceof re||(oe=Kn(oe)),!oe)return new si;if(oe instanceof si)return oe;var Kt=(oe=oe.rgb()).r/255,te=oe.g/255,Oe=oe.b/255,Qe=Math.min(Kt,te,Oe),On=Math.max(Kt,te,Oe),Vn=NaN,Xn=On-Qe,$e=(On+Qe)/2;return Xn?(Vn=Kt===On?(te-Oe)/Xn+6*(te<Oe):te===On?(Oe-Kt)/Xn+2:(Kt-te)/Xn+4,Xn/=$e<.5?On+Qe:2-On-Qe,Vn*=60):Xn=$e>0&&$e<1?0:Vn,new si(Vn,Xn,$e,oe.opacity)}function si(oe,Kt,te,Oe){this.h=+oe,this.s=+Kt,this.l=+te,this.opacity=+Oe}function Ti(oe,Kt,te){return 255*(oe<60?Kt+(te-Kt)*oe/60:oe<180?te:oe<240?Kt+(te-Kt)*(240-oe)/60:Kt)}function _i(oe,Kt,te,Oe,Qe){var On=oe*oe,Vn=On*oe;return((1-3*oe+3*On-Vn)*Kt+(4-6*On+3*Vn)*te+(1+3*oe+3*On-3*Vn)*Oe+Vn*Qe)/6}Vt(re,Kn,{copy:function(Kt){return Object.assign(new this.constructor,this,Kt)},displayable:function(){return this.rgb().displayable()},hex:Tn,formatHex:Tn,formatHsl:function(){return to(this).formatHsl()},formatRgb:Un,toString:Un}),Vt(Sr,er,Ht(re,{brighter:function(Kt){return Kt=Kt==null?1/.7:Math.pow(1/.7,Kt),new Sr(this.r*Kt,this.g*Kt,this.b*Kt,this.opacity)},darker:function(Kt){return Kt=Kt==null?.7:Math.pow(.7,Kt),new Sr(this.r*Kt,this.g*Kt,this.b*Kt,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vr,formatHex:Vr,formatRgb:ti,toString:ti})),Vt(si,function(oe,Kt,te,Oe){return arguments.length===1?to(oe):new si(oe,Kt,te,Oe==null?1:Oe)},Ht(re,{brighter:function(Kt){return Kt=Kt==null?1/.7:Math.pow(1/.7,Kt),new si(this.h,this.s,this.l*Kt,this.opacity)},darker:function(Kt){return Kt=Kt==null?.7:Math.pow(.7,Kt),new si(this.h,this.s,this.l*Kt,this.opacity)},rgb:function(){var Kt=this.h%360+360*(this.h<0),te=isNaN(Kt)||isNaN(this.s)?0:this.s,Oe=this.l,Qe=Oe+(Oe<.5?Oe:1-Oe)*te,On=2*Oe-Qe;return new Sr(Ti(Kt>=240?Kt-240:Kt+120,On,Qe),Ti(Kt,On,Qe),Ti(Kt<120?Kt+240:Kt-120,On,Qe),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Kt=this.opacity;return((Kt=isNaN(Kt)?1:Math.max(0,Math.min(1,Kt)))===1?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(Kt===1?")":", "+Kt+")")}}));var Li=function(Kt){return function(){return Kt}};function Vi(oe,Kt){return function(te){return oe+te*Kt}}function ro(oe){return(oe=+oe)==1?jr:function(Kt,te){return te-Kt?function(Oe,Qe,On){return Oe=Math.pow(Oe,On),Qe=Math.pow(Qe,On)-Oe,On=1/On,function(Vn){return Math.pow(Oe+Vn*Qe,On)}}(Kt,te,oe):Li(isNaN(Kt)?te:Kt)}}function jr(oe,Kt){var te=Kt-oe;return te?Vi(oe,te):Li(isNaN(oe)?Kt:oe)}var Ji=function oe(Kt){var te=ro(Kt);function Oe(Qe,On){var Vn=te((Qe=er(Qe)).r,(On=er(On)).r),Xn=te(Qe.g,On.g),$e=te(Qe.b,On.b),rn=jr(Qe.opacity,On.opacity);return function(on){return Qe.r=Vn(on),Qe.g=Xn(on),Qe.b=$e(on),Qe.opacity=rn(on),Qe+""}}return Oe.gamma=oe,Oe}(1);function pr(oe){return function(Kt){var te,Oe,Qe=Kt.length,On=new Array(Qe),Vn=new Array(Qe),Xn=new Array(Qe);for(te=0;te<Qe;++te)Oe=er(Kt[te]),On[te]=Oe.r||0,Vn[te]=Oe.g||0,Xn[te]=Oe.b||0;return On=oe(On),Vn=oe(Vn),Xn=oe(Xn),Oe.opacity=1,function($e){return Oe.r=On($e),Oe.g=Vn($e),Oe.b=Xn($e),Oe+""}}}pr(function(oe){var Kt=oe.length-1;return function(te){var Oe=te<=0?te=0:te>=1?(te=1,Kt-1):Math.floor(te*Kt),Qe=oe[Oe],On=oe[Oe+1],Vn=Oe>0?oe[Oe-1]:2*Qe-On,Xn=Oe<Kt-1?oe[Oe+2]:2*On-Qe;return _i((te-Oe/Kt)*Kt,Vn,Qe,On,Xn)}}),pr(function(oe){var Kt=oe.length;return function(te){var Oe=Math.floor(((te%=1)<0?++te:te)*Kt),Qe=oe[(Oe+Kt-1)%Kt],On=oe[Oe%Kt],Vn=oe[(Oe+1)%Kt],Xn=oe[(Oe+2)%Kt];return _i((te-Oe/Kt)*Kt,Qe,On,Vn,Xn)}});var Yr=function(Kt,te){te||(te=[]);var Oe,Qe=Kt?Math.min(te.length,Kt.length):0,On=te.slice();return function(Vn){for(Oe=0;Oe<Qe;++Oe)On[Oe]=Kt[Oe]*(1-Vn)+te[Oe]*Vn;return On}};function Br(oe){return ArrayBuffer.isView(oe)&&!(oe instanceof DataView)}function Nr(oe,Kt){var te,Oe=Kt?Kt.length:0,Qe=oe?Math.min(Oe,oe.length):0,On=new Array(Qe),Vn=new Array(Oe);for(te=0;te<Qe;++te)On[te]=Oi(oe[te],Kt[te]);for(;te<Oe;++te)Vn[te]=Kt[te];return function(Xn){for(te=0;te<Qe;++te)Vn[te]=On[te](Xn);return Vn}}var Xr=function(Kt,te){var Oe=new Date;return Kt=+Kt,te=+te,function(Qe){return Oe.setTime(Kt*(1-Qe)+te*Qe),Oe}},Kr=function(Kt,te){return Kt=+Kt,te=+te,function(Oe){return Kt*(1-Oe)+te*Oe}};function ni(oe){return(ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Kt){return typeof Kt}:function(Kt){return Kt&&typeof Symbol=="function"&&Kt.constructor===Symbol&&Kt!==Symbol.prototype?"symbol":typeof Kt})(oe)}var fi=function(Kt,te){var Oe,Qe={},On={};for(Oe in Kt!==null&&ni(Kt)==="object"||(Kt={}),te!==null&&ni(te)==="object"||(te={}),te)Oe in Kt?Qe[Oe]=Oi(Kt[Oe],te[Oe]):On[Oe]=te[Oe];return function(Vn){for(Oe in Qe)On[Oe]=Qe[Oe](Vn);return On}},$r=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ci=new RegExp($r.source,"g"),Qr=function(Kt,te){var Oe,Qe,On,Vn=$r.lastIndex=ci.lastIndex=0,Xn=-1,$e=[],rn=[];for(Kt+="",te+="";(Oe=$r.exec(Kt))&&(Qe=ci.exec(te));)(On=Qe.index)>Vn&&(On=te.slice(Vn,On),$e[Xn]?$e[Xn]+=On:$e[++Xn]=On),(Oe=Oe[0])===(Qe=Qe[0])?$e[Xn]?$e[Xn]+=Qe:$e[++Xn]=Qe:($e[++Xn]=null,rn.push({i:Xn,x:Kr(Oe,Qe)})),Vn=ci.lastIndex;return Vn<te.length&&(On=te.slice(Vn),$e[Xn]?$e[Xn]+=On:$e[++Xn]=On),$e.length<2?rn[0]?function(on){return function($n){return on($n)+""}}(rn[0].x):function(on){return function(){return on}}(te):(te=rn.length,function(on){for(var $n,vr=0;vr<te;++vr)$e[($n=rn[vr]).i]=$n.x(on);return $e.join("")})};function gi(oe){return(gi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Kt){return typeof Kt}:function(Kt){return Kt&&typeof Symbol=="function"&&Kt.constructor===Symbol&&Kt!==Symbol.prototype?"symbol":typeof Kt})(oe)}var Oi=function(Kt,te){var Oe,Qe=gi(te);return te==null||Qe==="boolean"?Li(te):(Qe==="number"?Kr:Qe==="string"?(Oe=Kn(te))?(te=Oe,Ji):Qr:te instanceof Kn?Ji:te instanceof Date?Xr:Br(te)?Yr:Array.isArray(te)?Nr:typeof te.valueOf!="function"&&typeof te.toString!="function"||isNaN(te)?fi:Kr)(Kt,te)},bi=e(51),zi=[1,0,0,0,1,0,0,0,1];function Qi(oe,Kt,te){var Oe,Qe=Kt.startTime;if(te<Qe+Kt.delay||Kt._paused)return!1;var On=Kt.duration,Vn=Kt.easing;if(te=te-Qe-Kt.delay,Kt.repeat)Oe=te%On/On,Oe=r[Vn](Oe);else{if(!((Oe=te/On)<1))return Kt.onFrame?oe.attr(Kt.onFrame(1)):oe.attr(Kt.toAttrs),!0;Oe=r[Vn](Oe)}if(Kt.onFrame){var Xn=Kt.onFrame(Oe);oe.attr(Xn)}else(function($e,rn,on){var $n={},vr=rn.fromAttrs,ar=rn.toAttrs;if(!$e.destroyed){var rr,Fr,Ar,wr;for(var xr in ar)if(!Object(A.q)(vr[xr],ar[xr]))if(xr==="path"){var Er=ar[xr],Ir=vr[xr];Er.length>Ir.length?(Er=bi.parsePathString(ar[xr]),Ir=bi.parsePathString(vr[xr]),Ir=bi.fillPathByDiff(Ir,Er),Ir=bi.formatPath(Ir,Er),rn.fromAttrs.path=Ir,rn.toAttrs.path=Er):rn.pathFormatted||(Er=bi.parsePathString(ar[xr]),Ir=bi.parsePathString(vr[xr]),Ir=bi.formatPath(Ir,Er),rn.fromAttrs.path=Ir,rn.toAttrs.path=Er,rn.pathFormatted=!0),$n[xr]=[];for(var Lr=0;Lr<Er.length;Lr++){for(var Pr=Er[Lr],Dr=Ir[Lr],ri=[],vi=0;vi<Pr.length;vi++)Object(A.t)(Pr[vi])&&Dr&&Object(A.t)(Dr[vi])?(rr=Oi(Dr[vi],Pr[vi]),ri.push(rr(on))):ri.push(Pr[vi]);$n[xr].push(ri)}}else if(xr==="matrix"){var ii=(Ar=vr[xr]||zi,(Br(wr=ar[xr]||zi)?Yr:Nr)(Ar,wr))(on);$n[xr]=ii}else["fill","stroke","fillStyle","strokeStyle"].includes(xr)&&(Fr=ar[xr],/^[r,R,L,l]{1}[\s]*\(/.test(Fr))?$n[xr]=ar[xr]:Object(A.r)(ar[xr])||(rr=Oi(vr[xr],ar[xr]),$n[xr]=rr(on));$e.attr($n)}})(oe,Kt,Oe);return!1}var io=function(){function oe(Kt){this.animators=[],this.current=0,this.timer=null,this.canvas=Kt}return oe.prototype.initTimer=function(){var Kt,te,Oe,Qe=this;this.timer=et(function(On){if(Qe.current=On,Qe.animators.length>0){for(var Vn=Qe.animators.length-1;Vn>=0;Vn--)if((Kt=Qe.animators[Vn]).destroyed)Qe.removeAnimator(Vn);else{if(!Kt.isAnimatePaused())for(var Xn=(te=Kt.get("animations")).length-1;Xn>=0;Xn--)Oe=te[Xn],Qi(Kt,Oe,On)&&(te.splice(Xn,1),Oe.callback&&Oe.callback());te.length===0&&Qe.removeAnimator(Vn)}Qe.canvas.get("autoDraw")||Qe.canvas.draw()}})},oe.prototype.addAnimator=function(Kt){this.animators.push(Kt)},oe.prototype.removeAnimator=function(Kt){this.animators.splice(Kt,1)},oe.prototype.isAnimating=function(){return!!this.animators.length},oe.prototype.stop=function(){this.timer&&this.timer.stop()},oe.prototype.stopAllAnimations=function(Kt){Kt===void 0&&(Kt=!0),this.animators.forEach(function(te){te.stopAnimate(Kt)}),this.animators=[],this.canvas.draw()},oe.prototype.getTime=function(){return this.current},oe}(),Wi=e(114),Zi=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Pi(oe,Kt,te){te.name=Kt,te.target=oe,te.currentTarget=oe,te.delegateTarget=oe,oe.emit(Kt,te)}function no(oe,Kt,te){if(te.bubbles){var Oe=void 0,Qe=!1;if(Kt==="mouseenter"?(Oe=te.fromShape,Qe=!0):Kt==="mouseleave"&&(Qe=!0,Oe=te.toShape),oe.isCanvas()&&Qe)return;if(Oe&&Object(l.g)(oe,Oe))return void(te.bubbles=!1);te.name=Kt,te.currentTarget=oe,te.delegateTarget=oe,oe.emit(Kt,te)}}var Mo=function(){function oe(Kt){var te=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(Oe){var Qe=Oe.type;te._triggerEvent(Qe,Oe)},this._onDocumentMove=function(Oe){if(te.canvas.get("el")!==Oe.target&&(te.dragging||te.currentShape)){var Qe=te._getPointInfo(Oe);te.dragging&&te._emitEvent("drag",Oe,Qe,te.draggingShape)}},this._onDocumentMouseUp=function(Oe){if(te.canvas.get("el")!==Oe.target&&te.dragging){var Qe=te._getPointInfo(Oe);te.draggingShape&&te._emitEvent("drop",Oe,Qe,null),te._emitEvent("dragend",Oe,Qe,te.draggingShape),te._afterDrag(te.draggingShape,Qe,Oe)}},this.canvas=Kt.canvas}return oe.prototype.init=function(){this._bindEvents()},oe.prototype._bindEvents=function(){var Kt=this,te=this.canvas.get("el");Object(l.a)(Zi,function(Oe){te.addEventListener(Oe,Kt._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},oe.prototype._clearEvents=function(){var Kt=this,te=this.canvas.get("el");Object(l.a)(Zi,function(Oe){te.removeEventListener(Oe,Kt._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},oe.prototype._getEventObj=function(Kt,te,Oe,Qe,On,Vn){var Xn=new Wi.a(Kt,te);return Xn.fromShape=On,Xn.toShape=Vn,Xn.x=Oe.x,Xn.y=Oe.y,Xn.clientX=Oe.clientX,Xn.clientY=Oe.clientY,Xn.propagationPath.push(Qe),Xn},oe.prototype._getShape=function(Kt,te){return this.canvas.getShape(Kt.x,Kt.y,te)},oe.prototype._getPointInfo=function(Kt){var te=this.canvas,Oe=te.getClientByEvent(Kt),Qe=te.getPointByEvent(Kt);return{x:Qe.x,y:Qe.y,clientX:Oe.x,clientY:Oe.y}},oe.prototype._triggerEvent=function(Kt,te){var Oe=this._getPointInfo(te),Qe=this._getShape(Oe,te),On=this["_on"+Kt],Vn=!1;if(On)On.call(this,Oe,Qe,te);else{var Xn=this.currentShape;Kt==="mouseenter"||Kt==="dragenter"||Kt==="mouseover"?(this._emitEvent(Kt,te,Oe,null,null,Qe),Qe&&this._emitEvent(Kt,te,Oe,Qe,null,Qe),Kt==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",te,Oe,null)):Kt==="mouseleave"||Kt==="dragleave"||Kt==="mouseout"?(Vn=!0,Xn&&this._emitEvent(Kt,te,Oe,Xn,Xn,null),this._emitEvent(Kt,te,Oe,null,Xn,null),Kt==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",te,Oe,null)):this._emitEvent(Kt,te,Oe,Qe,null,null)}if(Vn||(this.currentShape=Qe),Qe&&!Qe.get("destroyed")){var $e=this.canvas;$e.get("el").style.cursor=Qe.attr("cursor")||$e.get("cursor")}},oe.prototype._onmousedown=function(Kt,te,Oe){Oe.button===0&&(this.mousedownShape=te,this.mousedownPoint=Kt,this.mousedownTimeStamp=Oe.timeStamp),this._emitEvent("mousedown",Oe,Kt,te,null,null)},oe.prototype._emitMouseoverEvents=function(Kt,te,Oe,Qe){var On=this.canvas.get("el");Oe!==Qe&&(Oe&&(this._emitEvent("mouseout",Kt,te,Oe,Oe,Qe),this._emitEvent("mouseleave",Kt,te,Oe,Oe,Qe),Qe&&!Qe.get("destroyed")||(On.style.cursor=this.canvas.get("cursor"))),Qe&&(this._emitEvent("mouseover",Kt,te,Qe,Oe,Qe),this._emitEvent("mouseenter",Kt,te,Qe,Oe,Qe)))},oe.prototype._emitDragoverEvents=function(Kt,te,Oe,Qe,On){Qe?(Qe!==Oe&&(Oe&&this._emitEvent("dragleave",Kt,te,Oe,Oe,Qe),this._emitEvent("dragenter",Kt,te,Qe,Oe,Qe)),On||this._emitEvent("dragover",Kt,te,Qe)):Oe&&this._emitEvent("dragleave",Kt,te,Oe,Oe,Qe),On&&this._emitEvent("dragover",Kt,te,Qe)},oe.prototype._afterDrag=function(Kt,te,Oe){Kt&&(Kt.set("capture",!0),this.draggingShape=null),this.dragging=!1;var Qe=this._getShape(te,Oe);Qe!==Kt&&this._emitMouseoverEvents(Oe,te,Kt,Qe),this.currentShape=Qe},oe.prototype._onmouseup=function(Kt,te,Oe){if(Oe.button===0){var Qe=this.draggingShape;this.dragging?(Qe&&this._emitEvent("drop",Oe,Kt,te),this._emitEvent("dragend",Oe,Kt,Qe),this._afterDrag(Qe,Kt,Oe)):(this._emitEvent("mouseup",Oe,Kt,te),te===this.mousedownShape&&this._emitEvent("click",Oe,Kt,te),this.mousedownShape=null,this.mousedownPoint=null)}},oe.prototype._ondragover=function(Kt,te,Oe){Oe.preventDefault();var Qe=this.currentShape;this._emitDragoverEvents(Oe,Kt,Qe,te,!0)},oe.prototype._onmousemove=function(Kt,te,Oe){var Qe=this.canvas,On=this.currentShape,Vn=this.draggingShape;if(this.dragging)Vn&&this._emitDragoverEvents(Oe,Kt,On,te,!1),this._emitEvent("drag",Oe,Kt,Vn);else{var Xn=this.mousedownPoint;if(Xn){var $e=this.mousedownShape,rn=Oe.timeStamp-this.mousedownTimeStamp,on=Xn.clientX-Kt.clientX,$n=Xn.clientY-Kt.clientY;rn>120||on*on+$n*$n>40?$e&&$e.get("draggable")?((Vn=this.mousedownShape).set("capture",!1),this.draggingShape=Vn,this.dragging=!0,this._emitEvent("dragstart",Oe,Kt,Vn),this.mousedownShape=null,this.mousedownPoint=null):!$e&&Qe.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",Oe,Kt,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(Oe,Kt,On,te),this._emitEvent("mousemove",Oe,Kt,te)):(this._emitMouseoverEvents(Oe,Kt,On,te),this._emitEvent("mousemove",Oe,Kt,te))}else this._emitMouseoverEvents(Oe,Kt,On,te),this._emitEvent("mousemove",Oe,Kt,te)}},oe.prototype._emitEvent=function(Kt,te,Oe,Qe,On,Vn){var Xn=this._getEventObj(Kt,te,Oe,Qe,On,Vn);if(Qe){Xn.shape=Qe,Pi(Qe,Kt,Xn);for(var $e=Qe.getParent();$e;)$e.emitDelegation(Kt,Xn),Xn.propagationStopped||no($e,Kt,Xn),Xn.propagationPath.push($e),$e=$e.getParent()}else Pi(this.canvas,Kt,Xn)},oe.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},oe}(),ao=Object(b.a)(),uo=ao&&ao.name==="firefox",xo=function(oe){function Kt(te){var Oe=oe.call(this,te)||this;return Oe.initContainer(),Oe.initDom(),Oe.initEvents(),Oe.initTimeline(),Oe}return Object(p.b)(Kt,oe),Kt.prototype.getDefaultCfg=function(){var te=oe.prototype.getDefaultCfg.call(this);return te.cursor="default",te.supportCSSTransform=!1,te},Kt.prototype.initContainer=function(){var te=this.get("container");Object(l.h)(te)&&(te=document.getElementById(te),this.set("container",te))},Kt.prototype.initDom=function(){var te=this.createDom();this.set("el",te),this.get("container").appendChild(te),this.setDOMSize(this.get("width"),this.get("height"))},Kt.prototype.initEvents=function(){var te=new Mo({canvas:this});te.init(),this.set("eventController",te)},Kt.prototype.initTimeline=function(){var te=new io(this);this.set("timeline",te)},Kt.prototype.setDOMSize=function(te,Oe){var Qe=this.get("el");l.c&&(Qe.style.width=te+"px",Qe.style.height=Oe+"px")},Kt.prototype.changeSize=function(te,Oe){this.setDOMSize(te,Oe),this.set("width",te),this.set("height",Oe),this.onCanvasChange("changeSize")},Kt.prototype.getRenderer=function(){return this.get("renderer")},Kt.prototype.getCursor=function(){return this.get("cursor")},Kt.prototype.setCursor=function(te){this.set("cursor",te);var Oe=this.get("el");l.c&&Oe&&(Oe.style.cursor=te)},Kt.prototype.getPointByEvent=function(te){if(this.get("supportCSSTransform")){if(uo&&!Object(l.e)(te.layerX)&&te.layerX!==te.offsetX)return{x:te.layerX,y:te.layerY};if(!Object(l.e)(te.offsetX))return{x:te.offsetX,y:te.offsetY}}var Oe=this.getClientByEvent(te),Qe=Oe.x,On=Oe.y;return this.getPointByClient(Qe,On)},Kt.prototype.getClientByEvent=function(te){var Oe=te;return te.touches&&(Oe=te.type==="touchend"?te.changedTouches[0]:te.touches[0]),{x:Oe.clientX,y:Oe.clientY}},Kt.prototype.getPointByClient=function(te,Oe){var Qe=this.get("el").getBoundingClientRect();return{x:te-Qe.left,y:Oe-Qe.top}},Kt.prototype.getClientByPoint=function(te,Oe){var Qe=this.get("el").getBoundingClientRect();return{x:te+Qe.left,y:Oe+Qe.top}},Kt.prototype.draw=function(){},Kt.prototype.removeDom=function(){var te=this.get("el");te.parentNode.removeChild(te)},Kt.prototype.clearEvents=function(){this.get("eventController").destroy()},Kt.prototype.isCanvas=function(){return!0},Kt.prototype.getParent=function(){return null},Kt.prototype.destroy=function(){var te=this.get("timeline");this.get("destroyed")||(this.clear(),te&&te.stop(),this.clearEvents(),this.removeDom(),oe.prototype.destroy.call(this))},Kt}(S.a);E.a=xo},function(a,E,e){"use strict";e.d(E,"a",function(){return b});var r=new Map;function p(O,T){r.set(O,T)}function b(O){return r.get(O)}var S=function(T){var v=T.attr();return{x:v.x,y:v.y,width:v.width,height:v.height}},l=function(T){var v=T.attr(),m=v.x,C=v.y,D=v.r;return{x:m-D,y:C-D,width:2*D,height:2*D}},A=e(20);function j(O,T){return O&&T?{minX:Math.min(O.minX,T.minX),minY:Math.min(O.minY,T.minY),maxX:Math.max(O.maxX,T.maxX),maxY:Math.max(O.maxY,T.maxY)}:O||T}function y(O,T){var v=O.get("startArrowShape"),m=O.get("endArrowShape");return v&&(T=j(T,v.getCanvasBBox())),m&&(T=j(T,m.getCanvasBBox())),T}var n=e(68),s=e(31),h=e(0);function M(O,T){var v=O.prePoint,m=O.currentPoint,C=O.nextPoint,D=Math.pow(m[0]-v[0],2)+Math.pow(m[1]-v[1],2),Y=Math.pow(m[0]-C[0],2)+Math.pow(m[1]-C[1],2),Z=Math.pow(v[0]-C[0],2)+Math.pow(v[1]-C[1],2),et=Math.acos((D+Y-Z)/(2*Math.sqrt(D)*Math.sqrt(Y)));if(!et||Math.sin(et)===0||Object(h.u)(et,0))return{xExtra:0,yExtra:0};var dt=Math.abs(Math.atan2(C[1]-m[1],C[0]-m[0])),ht=Math.abs(Math.atan2(C[0]-m[0],C[1]-m[1]));return dt=dt>Math.PI/2?Math.PI-dt:dt,ht=ht>Math.PI/2?Math.PI-ht:ht,{xExtra:Math.cos(et/2-dt)*(T/2*(1/Math.sin(et/2)))-T/2||0,yExtra:Math.cos(ht-et/2)*(T/2*(1/Math.sin(et/2)))-T/2||0}}p("rect",S),p("image",S),p("circle",l),p("marker",l),p("polyline",function(O){for(var T=O.attr().points,v=[],m=[],C=0;C<T.length;C++){var D=T[C];v.push(D[0]),m.push(D[1])}var Y=A.f.getBBoxByArray(v,m),Z=Y.x,et=Y.y,dt={minX:Z,minY:et,maxX:Z+Y.width,maxY:et+Y.height};return{x:(dt=y(O,dt)).minX,y:dt.minY,width:dt.maxX-dt.minX,height:dt.maxY-dt.minY}}),p("polygon",function(O){for(var T=O.attr().points,v=[],m=[],C=0;C<T.length;C++){var D=T[C];v.push(D[0]),m.push(D[1])}return A.f.getBBoxByArray(v,m)}),p("text",function(O){var T=O.attr(),v=T.x,m=T.y,C=T.text,D=T.fontSize,Y=T.lineHeight,Z=T.font;Z||(Z=Object(n.a)(T));var et,dt=Object(n.c)(C,Z);if(dt){var ht=T.textAlign,St=T.textBaseline,wt=Object(n.b)(C,D,Y),xt={x:v,y:m-wt};ht&&(ht==="end"||ht==="right"?xt.x-=dt:ht==="center"&&(xt.x-=dt/2)),St&&(St==="top"?xt.y+=wt:St==="middle"&&(xt.y+=wt/2)),et={x:xt.x,y:xt.y,width:dt,height:wt}}else et={x:v,y:m,width:0,height:0};return et}),p("path",function(O){var T=O.attr(),v=T.path,m=T.stroke?T.lineWidth:0,C=function(et,dt){for(var ht=[],St=[],wt=[],xt=0;xt<et.length;xt++){var ft=(q=et[xt]).currentPoint,Bt=q.params,Rt=q.prePoint,Ot=void 0;switch(q.command){case"Q":Ot=A.e.box(Rt[0],Rt[1],Bt[1],Bt[2],Bt[3],Bt[4]);break;case"C":Ot=A.b.box(Rt[0],Rt[1],Bt[1],Bt[2],Bt[3],Bt[4],Bt[5],Bt[6]);break;case"A":var X=q.arcParams;Ot=A.a.box(X.cx,X.cy,X.rx,X.ry,X.xRotation,X.startAngle,X.endAngle);break;default:ht.push(ft[0]),St.push(ft[1])}Ot&&(q.box=Ot,ht.push(Ot.x,Ot.x+Ot.width),St.push(Ot.y,Ot.y+Ot.height)),dt&&(q.command==="L"||q.command==="M")&&q.prePoint&&q.nextPoint&&wt.push(q)}ht=ht.filter(function(st){return!Number.isNaN(st)}),St=St.filter(function(st){return!Number.isNaN(st)});var ut=Math.min.apply(null,ht),vt=Math.min.apply(null,St),pt=Math.max.apply(null,ht),Et=Math.max.apply(null,St);if(wt.length===0)return{x:ut,y:vt,width:pt-ut,height:Et-vt};for(xt=0;xt<wt.length;xt++){var q;(ft=(q=wt[xt]).currentPoint)[0]===ut?ut-=M(q,dt).xExtra:ft[0]===pt&&(pt+=M(q,dt).xExtra),ft[1]===vt?vt-=M(q,dt).yExtra:ft[1]===Et&&(Et+=M(q,dt).yExtra)}return{x:ut,y:vt,width:pt-ut,height:Et-vt}}(O.get("segments")||Object(s.d)(v),m),D=C.x,Y=C.y,Z={minX:D,minY:Y,maxX:D+C.width,maxY:Y+C.height};return{x:(Z=y(O,Z)).minX,y:Z.minY,width:Z.maxX-Z.minX,height:Z.maxY-Z.minY}}),p("line",function(O){var T=O.attr(),v=T.x1,m=T.y1,C=T.x2,D=T.y2,Y={minX:Math.min(v,C),maxX:Math.max(v,C),minY:Math.min(m,D),maxY:Math.max(m,D)};return{x:(Y=y(O,Y)).minX,y:Y.minY,width:Y.maxX-Y.minX,height:Y.maxY-Y.minY}}),p("ellipse",function(O){var T=O.attr(),v=T.x,m=T.y,C=T.rx,D=T.ry;return{x:v-C,y:m-D,width:2*C,height:2*D}})},function(a,E,e){"use strict";var r=e(1),p=e(18),b=e(16),S=e(70),l=e(36),A=e(22),j=e(78),y=e(77),n=e(0),s=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,h=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,M=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function O(St){var wt=St.match(M);if(!wt)return"";var xt="";return wt.sort(function(ft,Bt){return ft=ft.split(":"),Bt=Bt.split(":"),Number(ft[0])-Number(Bt[0])}),Object(n.f)(wt,function(ft){ft=ft.split(":"),xt+='<stop offset="'+ft[0]+'" stop-color="'+ft[1]+'"></stop>'}),xt}var T=function(){function St(wt){this.cfg={};var xt=null,ft=Object(n.H)("gradient_");return wt.toLowerCase()[0]==="l"?function(Bt,Rt){var Ot,X,ut=s.exec(Bt),vt=Object(n.B)(Object(n.G)(parseFloat(ut[1])),2*Math.PI),pt=ut[2];vt>=0&&vt<.5*Math.PI?(Ot={x:0,y:0},X={x:1,y:1}):.5*Math.PI<=vt&&vt<Math.PI?(Ot={x:1,y:0},X={x:0,y:1}):Math.PI<=vt&&vt<1.5*Math.PI?(Ot={x:1,y:1},X={x:0,y:0}):(Ot={x:0,y:1},X={x:1,y:0});var Et=Math.tan(vt),q=Et*Et,st=(X.x-Ot.x+Et*(X.y-Ot.y))/(q+1)+Ot.x,it=Et*(X.x-Ot.x+Et*(X.y-Ot.y))/(q+1)+Ot.y;Rt.setAttribute("x1",Ot.x),Rt.setAttribute("y1",Ot.y),Rt.setAttribute("x2",st),Rt.setAttribute("y2",it),Rt.innerHTML=O(pt)}(wt,xt=Object(A.b)("linearGradient")):function(Bt,Rt){var Ot=h.exec(Bt),X=parseFloat(Ot[1]),ut=parseFloat(Ot[2]),vt=parseFloat(Ot[3]),pt=Ot[4];Rt.setAttribute("cx",X),Rt.setAttribute("cy",ut),Rt.setAttribute("r",vt),Rt.innerHTML=O(pt)}(wt,xt=Object(A.b)("radialGradient")),xt.setAttribute("id",ft),this.el=xt,this.id=ft,this.cfg=wt,this}return St.prototype.match=function(wt,xt){return this.cfg===xt},St}(),v={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},m={x:"-40%",y:"-40%",width:"200%",height:"200%"},C=function(){function St(wt){this.type="filter",this.cfg={},this.type="filter";var xt=Object(A.b)("filter");return Object(n.f)(m,function(ft,Bt){xt.setAttribute(Bt,ft)}),this.el=xt,this.id=Object(n.H)("filter_"),this.el.id=this.id,this.cfg=wt,this._parseShadow(wt,xt),this}return St.prototype.match=function(wt,xt){if(this.type!==wt)return!1;var ft=!0,Bt=this.cfg;return Object(n.f)(Object.keys(Bt),function(Rt){if(Bt[Rt]!==xt[Rt])return ft=!1,!1}),ft},St.prototype.update=function(wt,xt){var ft=this.cfg;return ft[v[wt]]=xt,this._parseShadow(ft,this.el),this},St.prototype._parseShadow=function(wt,xt){var ft=`<feDropShadow
      dx="`+(wt.dx||0)+`"
      dy="`+(wt.dy||0)+`"
      stdDeviation="`+(wt.blur?wt.blur/10:0)+`"
      flood-color="`+(wt.color?wt.color:"#000")+`"
      flood-opacity="`+(wt.opacity?wt.opacity:1)+`"
      />`;xt.innerHTML=ft},St}(),D=function(){function St(wt,xt){this.cfg={};var ft=Object(A.b)("marker"),Bt=Object(n.H)("marker_");ft.setAttribute("id",Bt);var Rt=Object(A.b)("path");Rt.setAttribute("stroke",wt.stroke||"none"),Rt.setAttribute("fill",wt.fill||"none"),ft.appendChild(Rt),ft.setAttribute("overflow","visible"),ft.setAttribute("orient","auto-start-reverse"),this.el=ft,this.child=Rt,this.id=Bt;var Ot=wt[xt==="marker-start"?"startArrow":"endArrow"];return this.stroke=wt.stroke||"#000",Ot===!0?this._setDefaultPath(xt,Rt):(this.cfg=Ot,this._setMarker(wt.lineWidth,Rt)),this}return St.prototype.match=function(){return!1},St.prototype._setDefaultPath=function(wt,xt){var ft=this.el;xt.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),ft.setAttribute("refX",""+10*Math.cos(Math.PI/6)),ft.setAttribute("refY","5")},St.prototype._setMarker=function(wt,xt){var ft=this.el,Bt=this.cfg.path,Rt=this.cfg.d;Object(n.m)(Bt)&&(Bt=Bt.map(function(Ot){return Ot.join(" ")}).join("")),xt.setAttribute("d",Bt),ft.appendChild(xt),Rt&&ft.setAttribute("refX",""+Rt/wt)},St.prototype.update=function(wt){var xt=this.child;xt.attr?xt.attr("fill",wt):xt.setAttribute("fill",wt)},St}(),Y=function(){function St(wt){this.type="clip",this.cfg={};var xt=Object(A.b)("clipPath");this.el=xt,this.id=Object(n.H)("clip_"),xt.id=this.id;var ft=wt.cfg.el;return xt.appendChild(ft),this.cfg=wt,this}return St.prototype.match=function(){return!1},St.prototype.remove=function(){var wt=this.el;wt.parentNode.removeChild(wt)},St}(),Z=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,et=function(){function St(wt){this.cfg={};var xt=Object(A.b)("pattern");xt.setAttribute("patternUnits","userSpaceOnUse");var ft=Object(A.b)("image");xt.appendChild(ft);var Bt=Object(n.H)("pattern_");xt.id=Bt,this.el=xt,this.id=Bt,this.cfg=wt;var Rt=Z.exec(wt)[2];ft.setAttribute("href",Rt);var Ot=new Image;function X(){xt.setAttribute("width",""+Ot.width),xt.setAttribute("height",""+Ot.height)}return Rt.match(/^data:/i)||(Ot.crossOrigin="Anonymous"),Ot.src=Rt,Ot.complete?X():(Ot.onload=X,Ot.src=Ot.src),this}return St.prototype.match=function(wt,xt){return this.cfg===xt},St}(),dt=function(){function St(wt){var xt=Object(A.b)("defs"),ft=Object(n.H)("defs_");xt.id=ft,wt.appendChild(xt),this.children=[],this.defaultArrow={},this.el=xt,this.canvas=wt}return St.prototype.find=function(wt,xt){for(var ft=this.children,Bt=null,Rt=0;Rt<ft.length;Rt++)if(ft[Rt].match(wt,xt)){Bt=ft[Rt].id;break}return Bt},St.prototype.findById=function(wt){for(var xt=this.children,ft=null,Bt=0;Bt<xt.length;Bt++)if(xt[Bt].id===wt){ft=xt[Bt];break}return ft},St.prototype.add=function(wt){this.children.push(wt),wt.canvas=this.canvas,wt.parent=this},St.prototype.getDefaultArrow=function(wt,xt){var ft=wt.stroke||wt.strokeStyle;if(this.defaultArrow[ft])return this.defaultArrow[ft].id;var Bt=new D(wt,xt);return this.defaultArrow[ft]=Bt,this.el.appendChild(Bt.el),this.add(Bt),Bt.id},St.prototype.addGradient=function(wt){var xt=new T(wt);return this.el.appendChild(xt.el),this.add(xt),xt.id},St.prototype.addArrow=function(wt,xt){var ft=new D(wt,xt);return this.el.appendChild(ft.el),this.add(ft),ft.id},St.prototype.addShadow=function(wt){var xt=new C(wt);return this.el.appendChild(xt.el),this.add(xt),xt.id},St.prototype.addPattern=function(wt){var xt=new et(wt);return this.el.appendChild(xt.el),this.add(xt),xt.id},St.prototype.addClip=function(wt){var xt=new Y(wt);return this.el.appendChild(xt.el),this.add(xt),xt.id},St}(),ht=function(St){function wt(xt){return St.call(this,Object(r.a)(Object(r.a)({},xt),{autoDraw:!0,renderer:"svg"}))||this}return Object(r.b)(wt,St),wt.prototype.getShapeBase=function(){return j},wt.prototype.getGroupBase=function(){return y.a},wt.prototype.getShape=function(xt,ft,Bt){var Rt=Bt.target||Bt.srcElement;if(!b.a[Rt.tagName]){for(var Ot=Rt.parentNode;Ot&&!b.a[Ot.tagName];)Ot=Ot.parentNode;Rt=Ot}return this.find(function(X){return X.get("el")===Rt})},wt.prototype.createDom=function(){var xt=Object(A.b)("svg"),ft=new dt(xt);return xt.setAttribute("width",""+this.get("width")),xt.setAttribute("height",""+this.get("height")),this.set("context",ft),xt},wt.prototype.onCanvasChange=function(xt){var ft=this.get("context"),Bt=this.get("el");if(xt==="sort"){var Rt=this.get("children");Rt&&Rt.length&&Object(A.d)(this,function(X,ut){return Rt.indexOf(X)-Rt.indexOf(ut)?1:0})}else if(xt==="clear"){if(Bt){Bt.innerHTML="";var Ot=ft.el;Ot.innerHTML="",Bt.appendChild(Ot)}}else xt==="matrix"?Object(l.c)(this):xt==="clip"?Object(l.a)(this,ft):xt==="changeSize"&&(Bt.setAttribute("width",""+this.get("width")),Bt.setAttribute("height",""+this.get("height")))},wt.prototype.draw=function(){var xt=this.get("context"),ft=this.getChildren();Object(l.a)(this,xt),ft.length&&Object(S.a)(xt,ft)},wt}(p.AbstractCanvas);E.a=ht},function(a,E,e){"use strict";var r=e(1),p=e(18);function b(s,h,M){var O=s.getTotalMatrix();if(O){var T=function(v,m){if(m){var C=Object(p.invert)(m);return Object(p.multiplyVec2)(C,v)}return v}([h,M,1],O);return[T[0],T[1]]}return[h,M]}function S(s,h,M){if(s.isCanvas&&s.isCanvas())return!0;if(!Object(p.isAllowCapture)(s)||s.cfg.isInView===!1)return!1;if(s.cfg.clipShape){var O=b(s,h,M),T=O[0],v=O[1];if(s.isClipped(T,v))return!1}var m=s.cfg.cacheCanvasBBox||s.getCanvasBBox();return h>=m.minX&&h<=m.maxX&&M>=m.minY&&M<=m.maxY}var l=e(56),A=e(76),j=e(17),y=e(29),n=function(s){function h(){return s!==null&&s.apply(this,arguments)||this}return Object(r.b)(h,s),h.prototype.getDefaultCfg=function(){var M=s.prototype.getDefaultCfg.call(this);return M.renderer="canvas",M.autoDraw=!0,M.localRefresh=!0,M.refreshElements=[],M.clipView=!0,M.quickHit=!1,M},h.prototype.onCanvasChange=function(M){M!=="attr"&&M!=="sort"&&M!=="changeSize"||(this.set("refreshElements",[this]),this.draw())},h.prototype.getShapeBase=function(){return l},h.prototype.getGroupBase=function(){return A.a},h.prototype.getPixelRatio=function(){var M=this.get("pixelRatio")||Object(j.d)();return M>=1?Math.ceil(M):1},h.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},h.prototype.createDom=function(){var M=document.createElement("canvas"),O=M.getContext("2d");return this.set("context",O),M},h.prototype.setDOMSize=function(M,O){s.prototype.setDOMSize.call(this,M,O);var T=this.get("context"),v=this.get("el"),m=this.getPixelRatio();v.width=m*M,v.height=m*O,m>1&&T.scale(m,m)},h.prototype.clear=function(){s.prototype.clear.call(this),this._clearFrame();var M=this.get("context"),O=this.get("el");M.clearRect(0,0,O.width,O.height)},h.prototype.getShape=function(M,O){return this.get("quickHit")?function T(v,m,C){if(!S(v,m,C))return null;for(var D=null,Y=v.getChildren(),Z=Y.length-1;Z>=0;Z--){var et=Y[Z];if(et.isGroup())D=T(et,m,C);else if(S(et,m,C)){var dt=et,ht=b(et,m,C),St=ht[0],wt=ht[1];dt.isInShape(St,wt)&&(D=et)}if(D)break}return D}(this,M,O):s.prototype.getShape.call(this,M,O,null)},h.prototype._getRefreshRegion=function(){var M,O=this.get("refreshElements"),T=this.getViewRange();return O.length&&O[0]===this?M=T:(M=Object(y.f)(O))&&(M.minX=Math.floor(M.minX),M.minY=Math.floor(M.minY),M.maxX=Math.ceil(M.maxX),M.maxY=Math.ceil(M.maxY),M.maxY+=1,this.get("clipView")&&(M=Object(y.g)(M,T))),M},h.prototype.refreshElement=function(M){this.get("refreshElements").push(M)},h.prototype._clearFrame=function(){var M=this.get("drawFrame");M&&(Object(j.a)(M),this.set("drawFrame",null),this.set("refreshElements",[]))},h.prototype.draw=function(){var M=this.get("drawFrame");this.get("autoDraw")&&M||this._startDraw()},h.prototype._drawAll=function(){var M=this.get("context"),O=this.get("el"),T=this.getChildren();M.clearRect(0,0,O.width,O.height),Object(y.a)(M,this),Object(y.d)(M,T),this.set("refreshElements",[])},h.prototype._drawRegion=function(){var M=this.get("context"),O=this.get("refreshElements"),T=this.getChildren(),v=this._getRefreshRegion();v?(M.clearRect(v.minX,v.minY,v.maxX-v.minX,v.maxY-v.minY),M.save(),M.beginPath(),M.rect(v.minX,v.minY,v.maxX-v.minX,v.maxY-v.minY),M.clip(),Object(y.a)(M,this),Object(y.b)(this,T,v),Object(y.d)(M,T,v),M.restore()):O.length&&Object(y.c)(O),Object(j.c)(O,function(m){m.get("hasChanged")&&m.set("hasChanged",!1)}),this.set("refreshElements",[])},h.prototype._startDraw=function(){var M=this,O=this.get("drawFrame");O||(O=Object(j.n)(function(){M.get("localRefresh")?M._drawRegion():M._drawAll(),M.set("drawFrame",null)}),this.set("drawFrame",O))},h.prototype.skipDraw=function(){},h}(p.AbstractCanvas);E.a=n},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});var r=e(473);E.default=function(p,b){return b===void 0&&(b=!0),{lazyInject:r.makePropertyInjectDecorator(p,b),lazyInjectNamed:r.makePropertyInjectNamedDecorator(p,b),lazyInjectTagged:r.makePropertyInjectTaggedDecorator(p,b),lazyMultiInject:r.makePropertyMultiInjectDecorator(p,b)}}},function(a,E,e){var r=e(202);a.exports=function(p){return p&&p.length?r(p):[]}},function(a,E,e){var r,p,b;function S(l){return(S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(l)}b=function(){"use strict";var A=function(rn){return rn instanceof Uint8Array||rn instanceof Uint16Array||rn instanceof Uint32Array||rn instanceof Int8Array||rn instanceof Int16Array||rn instanceof Int32Array||rn instanceof Float32Array||rn instanceof Float64Array||rn instanceof Uint8ClampedArray},j=function(rn,on){for(var $n=Object.keys(on),vr=0;vr<$n.length;++vr)rn[$n[vr]]=on[$n[vr]];return rn};function y($e){var rn=new Error("(regl) "+$e);throw console.error(rn),rn}function n($e,rn){$e||y(rn)}function s($e){return $e?": "+$e:""}function h($e,rn){switch(rn){case"number":return typeof $e=="number";case"object":return S($e)==="object";case"string":return typeof $e=="string";case"boolean":return typeof $e=="boolean";case"function":return typeof $e=="function";case"undefined":return $e===void 0;case"symbol":return S($e)==="symbol"}}function M($e,rn,on){rn.indexOf($e)<0&&y("invalid value"+s(on)+". must be one of: "+rn)}var O=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function T($e,rn){for($e+="";$e.length<rn;)$e=" "+$e;return $e}function v(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function m($e,rn){this.number=$e,this.line=rn,this.errors=[]}function C($e,rn,on){this.file=$e,this.line=rn,this.message=on}function D(){var $e=new Error,rn=($e.stack||$e).toString(),on=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(rn);if(on)return on[1];var $n=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(rn);return $n?$n[1]:"unknown"}function Y(){var $e=new Error,rn=($e.stack||$e).toString(),on=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(rn);if(on)return on[1];var $n=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(rn);return $n?$n[1]:"unknown"}function Z($e,rn){var on,$n=$e.split(`
`),vr=1,ar=0,rr={unknown:new v,0:new v};rr.unknown.name=rr[0].name=rn||D(),rr.unknown.lines.push(new m(0,""));for(var Fr=0;Fr<$n.length;++Fr){var Ar=$n[Fr],wr=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Ar);if(wr)switch(wr[1]){case"line":var xr=/(\d+)(\s+\d+)?/.exec(wr[2]);xr&&(vr=0|xr[1],xr[2]&&((ar=0|xr[2])in rr||(rr[ar]=new v)));break;case"define":var Er=/SHADER_NAME(_B64)?\s+(.*)$/.exec(wr[2]);Er&&(rr[ar].name=Er[1]?(on=Er[2],typeof atob!="undefined"?atob(on):"base64:"+on):Er[2])}rr[ar].lines.push(new m(vr++,Ar))}return Object.keys(rr).forEach(function(Ir){var Lr=rr[Ir];Lr.lines.forEach(function(Pr){Lr.index[Pr.number]=Pr})}),rr}function et($e){$e._commandRef=D()}function dt($e,rn){var on=Y();y($e+" in command "+(rn||D())+(on==="unknown"?"":" called from "+on))}function ht($e,rn,on,$n){h($e,rn)||dt("invalid parameter type"+s(on)+". expected "+rn+", got "+S($e),$n||D())}var St={};function wt($e,rn){return $e===32820||$e===32819||$e===33635?2:$e===34042?4:St[$e]*rn}function xt($e){return!($e&$e-1||!$e)}St[5120]=St[5121]=1,St[5122]=St[5123]=St[36193]=St[33635]=St[32819]=St[32820]=2,St[5124]=St[5125]=St[5126]=St[34042]=4;var ft=j(n,{optional:function(rn){rn()},raise:y,commandRaise:dt,command:function(rn,on,$n){rn||dt(on,$n||D())},parameter:function(rn,on,$n){rn in on||y("unknown parameter ("+rn+")"+s($n)+". possible values: "+Object.keys(on).join())},commandParameter:function(rn,on,$n,vr){rn in on||dt("unknown parameter ("+rn+")"+s($n)+". possible values: "+Object.keys(on).join(),vr||D())},constructor:function(rn){Object.keys(rn).forEach(function(on){O.indexOf(on)<0&&y('invalid regl constructor argument "'+on+'". must be one of '+O)})},type:function(rn,on,$n){h(rn,on)||y("invalid parameter type"+s($n)+". expected "+on+", got "+S(rn))},commandType:ht,isTypedArray:function(rn,on){A(rn)||y("invalid parameter type"+s(on)+". must be a typed array")},nni:function(rn,on){rn>=0&&(0|rn)===rn||y("invalid parameter type, ("+rn+")"+s(on)+". must be a nonnegative integer")},oneOf:M,shaderError:function(rn,on,$n,vr,ar){if(!rn.getShaderParameter(on,rn.COMPILE_STATUS)){var rr=rn.getShaderInfoLog(on),Fr=vr===rn.FRAGMENT_SHADER?"fragment":"vertex";ht($n,"string",Fr+" shader source must be a string",ar);var Ar=Z($n,ar),wr=function(xr){var Er=[];return xr.split(`
`).forEach(function(Ir){if(!(Ir.length<5)){var Lr=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Ir);Lr?Er.push(new C(0|Lr[1],0|Lr[2],Lr[3].trim())):Ir.length>0&&Er.push(new C("unknown",0,Ir))}}),Er}(rr);(function(xr,Er){Er.forEach(function(Ir){var Lr=xr[Ir.file];if(Lr){var Pr=Lr.index[Ir.line];if(Pr)return Pr.errors.push(Ir),void(Lr.hasErrors=!0)}xr.unknown.hasErrors=!0,xr.unknown.lines[0].errors.push(Ir)})})(Ar,wr),Object.keys(Ar).forEach(function(xr){var Er=Ar[xr];if(Er.hasErrors){var Ir=[""],Lr=[""];Pr("file number "+xr+": "+Er.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Er.lines.forEach(function(Dr){if(Dr.errors.length>0){Pr(T(Dr.number,4)+"|  ","background-color:yellow; font-weight:bold"),Pr(Dr.line+`
`,"color:red; background-color:yellow; font-weight:bold");var ri=0;Dr.errors.forEach(function(vi){var ii=vi.message,Si=/^\s*'(.*)'\s*:\s*(.*)$/.exec(ii);if(Si){var Ui=Si[1];switch(ii=Si[2],Ui){case"assign":Ui="="}ri=Math.max(Dr.line.indexOf(Ui,ri),0)}else ri=0;Pr(T("| ",6)),Pr(T("^^^",ri+3)+`
`,"font-weight:bold"),Pr(T("| ",6)),Pr(ii+`
`,"font-weight:bold")}),Pr(T("| ",6)+`
`)}else Pr(T(Dr.number,4)+"|  "),Pr(Dr.line+`
`,"color:red")}),typeof document=="undefined"||window.chrome?console.log(Ir.join("")):(Lr[0]=Ir.join("%c"),console.log.apply(console,Lr))}function Pr(Dr,ri){Ir.push(Dr),Lr.push(ri||"")}}),n.raise("Error compiling "+Fr+" shader, "+Ar[0].name)}},linkError:function(rn,on,$n,vr,ar){if(!rn.getProgramParameter(on,rn.LINK_STATUS)){var rr=rn.getProgramInfoLog(on),Fr=Z($n,ar),Ar='Error linking program with vertex shader, "'+Z(vr,ar)[0].name+'", and fragment shader "'+Fr[0].name+'"';typeof document!="undefined"?console.log("%c"+Ar+`
%c`+rr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Ar+`
`+rr),n.raise(Ar)}},callSite:Y,saveCommandRef:et,saveDrawInfo:function(rn,on,$n,vr){function ar(wr){return wr?vr.id(wr):0}function rr(wr,xr){Object.keys(xr).forEach(function(Er){wr[vr.id(Er)]=!0})}et(rn),rn._fragId=ar(rn.static.frag),rn._vertId=ar(rn.static.vert);var Fr=rn._uniformSet={};rr(Fr,on.static),rr(Fr,on.dynamic);var Ar=rn._attributeSet={};rr(Ar,$n.static),rr(Ar,$n.dynamic),rn._hasCount="count"in rn.static||"count"in rn.dynamic||"elements"in rn.static||"elements"in rn.dynamic},framebufferFormat:function(rn,on,$n){rn.texture?M(rn.texture._texture.internalformat,on,"unsupported texture format for attachment"):M(rn.renderbuffer._renderbuffer.format,$n,"unsupported renderbuffer format for attachment")},guessCommand:D,texture2D:function(rn,on,$n){var vr,ar=on.width,rr=on.height,Fr=on.channels;n(ar>0&&ar<=$n.maxTextureSize&&rr>0&&rr<=$n.maxTextureSize,"invalid texture shape"),rn.wrapS===33071&&rn.wrapT===33071||n(xt(ar)&&xt(rr),"incompatible wrap mode for texture, both width and height must be power of 2"),on.mipmask===1?ar!==1&&rr!==1&&n(rn.minFilter!==9984&&rn.minFilter!==9986&&rn.minFilter!==9985&&rn.minFilter!==9987,"min filter requires mipmap"):(n(xt(ar)&&xt(rr),"texture must be a square power of 2 to support mipmapping"),n(on.mipmask===(ar<<1)-1,"missing or incomplete mipmap data")),on.type===5126&&($n.extensions.indexOf("oes_texture_float_linear")<0&&n(rn.minFilter===9728&&rn.magFilter===9728,"filter not supported, must enable oes_texture_float_linear"),n(!rn.genMipmaps,"mipmap generation not supported with float textures"));var Ar=on.images;for(vr=0;vr<16;++vr)if(Ar[vr]){var wr=ar>>vr,xr=rr>>vr;n(on.mipmask&1<<vr,"missing mipmap data");var Er=Ar[vr];if(n(Er.width===wr&&Er.height===xr,"invalid shape for mip images"),n(Er.format===on.format&&Er.internalformat===on.internalformat&&Er.type===on.type,"incompatible type for mip image"),!Er.compressed)if(Er.data){var Ir=Math.ceil(wt(Er.type,Fr)*wr/Er.unpackAlignment)*Er.unpackAlignment;n(Er.data.byteLength===Ir*xr,"invalid data for image, buffer size is inconsistent with image format")}else Er.element||Er.copy}else rn.genMipmaps||n((on.mipmask&1<<vr)==0,"extra mipmap data");on.compressed&&n(!rn.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(rn,on,$n,vr){var ar=rn.width,rr=rn.height,Fr=rn.channels;n(ar>0&&ar<=vr.maxTextureSize&&rr>0&&rr<=vr.maxTextureSize,"invalid texture shape"),n(ar===rr,"cube map must be square"),n(on.wrapS===33071&&on.wrapT===33071,"wrap mode not supported by cube map");for(var Ar=0;Ar<$n.length;++Ar){var wr=$n[Ar];n(wr.width===ar&&wr.height===rr,"inconsistent cube map face shape"),on.genMipmaps&&(n(!wr.compressed,"can not generate mipmap for compressed textures"),n(wr.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var xr=wr.images,Er=0;Er<16;++Er){var Ir=xr[Er];if(Ir){var Lr=ar>>Er,Pr=rr>>Er;n(wr.mipmask&1<<Er,"missing mipmap data"),n(Ir.width===Lr&&Ir.height===Pr,"invalid shape for mip images"),n(Ir.format===rn.format&&Ir.internalformat===rn.internalformat&&Ir.type===rn.type,"incompatible type for mip image"),Ir.compressed||(Ir.data?n(Ir.data.byteLength===Lr*Pr*Math.max(wt(Ir.type,Fr),Ir.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Ir.element||Ir.copy)}}}}}),Bt=0;function Rt($e,rn){this.id=Bt++,this.type=$e,this.data=rn}function Ot($e){return $e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function X($e){return"["+function rn(on){if(on.length===0)return[];var $n=on.charAt(0),vr=on.charAt(on.length-1);if(on.length>1&&$n===vr&&($n==='"'||$n==="'"))return['"'+Ot(on.substr(1,on.length-2))+'"'];var ar=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(on);if(ar)return rn(on.substr(0,ar.index)).concat(rn(ar[1])).concat(rn(on.substr(ar.index+ar[0].length)));var rr=on.split(".");if(rr.length===1)return['"'+Ot(on)+'"'];for(var Fr=[],Ar=0;Ar<rr.length;++Ar)Fr=Fr.concat(rn(rr[Ar]));return Fr}($e).join("][")+"]"}var ut={DynamicVariable:Rt,define:function(rn,on){return new Rt(rn,X(on+""))},isDynamic:function(rn){return typeof rn=="function"&&!rn._reglType||rn instanceof Rt},unbox:function $e(rn,on){return typeof rn=="function"?new Rt(0,rn):typeof rn=="number"||typeof rn=="boolean"?new Rt(5,rn):Array.isArray(rn)?new Rt(6,rn.map(function($n,vr){return $e($n,on+"["+vr+"]")})):rn instanceof Rt?rn:void ft(!1,"invalid option type in uniform "+on)},accessor:X},vt={next:typeof requestAnimationFrame=="function"?function($e){return requestAnimationFrame($e)}:function($e){return setTimeout($e,16)},cancel:typeof cancelAnimationFrame=="function"?function($e){return cancelAnimationFrame($e)}:clearTimeout},pt=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Et($e){return typeof $e=="string"?$e.split():(ft(Array.isArray($e),"invalid extension array"),$e)}function q($e){return typeof $e=="string"?(ft(typeof document!="undefined","not supported outside of DOM"),document.querySelector($e)):$e}function st($e){var rn,on,$n,vr,ar,rr=$e||{},Fr={},Ar=[],wr=[],xr=typeof window=="undefined"?1:window.devicePixelRatio,Er=!1,Ir=function(ri){ri&&ft.raise(ri)},Lr=function(){};if(typeof rr=="string"?(ft(typeof document!="undefined","selector queries only supported in DOM enviroments"),rn=document.querySelector(rr),ft(rn,"invalid query string for element")):S(rr)==="object"?typeof(ar=rr).nodeName=="string"&&typeof ar.appendChild=="function"&&typeof ar.getBoundingClientRect=="function"?rn=rr:function(Dr){return typeof Dr.drawArrays=="function"||typeof Dr.drawElements=="function"}(rr)?$n=(vr=rr).canvas:(ft.constructor(rr),"gl"in rr?vr=rr.gl:"canvas"in rr?$n=q(rr.canvas):"container"in rr&&(on=q(rr.container)),"attributes"in rr&&(Fr=rr.attributes,ft.type(Fr,"object","invalid context attributes")),"extensions"in rr&&(Ar=Et(rr.extensions)),"optionalExtensions"in rr&&(wr=Et(rr.optionalExtensions)),"onDone"in rr&&(ft.type(rr.onDone,"function","invalid or missing onDone callback"),Ir=rr.onDone),"profile"in rr&&(Er=!!rr.profile),"pixelRatio"in rr&&(xr=+rr.pixelRatio,ft(xr>0,"invalid pixel ratio"))):ft.raise("invalid arguments to regl"),rn&&(rn.nodeName.toLowerCase()==="canvas"?$n=rn:on=rn),!vr){if(!$n){ft(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var Pr=function(Dr,ri,vi){var ii,Si=document.createElement("canvas");function Ui(){var Yi=window.innerWidth,Bi=window.innerHeight;if(Dr!==document.body){var Di=Dr.getBoundingClientRect();Yi=Di.right-Di.left,Bi=Di.bottom-Di.top}Si.width=vi*Yi,Si.height=vi*Bi,j(Si.style,{width:Yi+"px",height:Bi+"px"})}return j(Si.style,{border:0,margin:0,padding:0,top:0,left:0}),Dr.appendChild(Si),Dr===document.body&&(Si.style.position="absolute",j(Dr.style,{margin:0,padding:0})),Dr!==document.body&&typeof ResizeObserver=="function"?(ii=new ResizeObserver(function(){setTimeout(Ui)})).observe(Dr):window.addEventListener("resize",Ui,!1),Ui(),{canvas:Si,onDestroy:function(){ii?ii.disconnect():window.removeEventListener("resize",Ui),Dr.removeChild(Si)}}}(on||document.body,0,xr);if(!Pr)return null;$n=Pr.canvas,Lr=Pr.onDestroy}Fr.premultipliedAlpha===void 0&&(Fr.premultipliedAlpha=!0),vr=function(Dr,ri){function vi(ii){try{return Dr.getContext(ii,ri)}catch(Si){return null}}return vi("webgl")||vi("experimental-webgl")||vi("webgl-experimental")}($n,Fr)}return vr?{gl:vr,canvas:$n,container:on,extensions:Ar,optionalExtensions:wr,pixelRatio:xr,profile:Er,onDone:Ir,onDestroy:Lr}:(Lr(),Ir("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function it($e,rn){for(var on=Array($e),$n=0;$n<$e;++$n)on[$n]=rn($n);return on}function z($e){var rn,on;return rn=($e>65535)<<4,rn|=on=(($e>>>=rn)>255)<<3,rn|=on=(($e>>>=on)>15)<<2,(rn|=on=(($e>>>=on)>3)<<1)|($e>>>=on)>>1}function P(){var $e=it(8,function(){return[]});function rn($n){var vr=function(rr){for(var Fr=16;Fr<=1<<28;Fr*=16)if(rr<=Fr)return Fr;return 0}($n),ar=$e[z(vr)>>2];return ar.length>0?ar.pop():new ArrayBuffer(vr)}function on($n){$e[z($n.byteLength)>>2].push($n)}return{alloc:rn,free:on,allocType:function(vr,ar){var rr=null;switch(vr){case 5120:rr=new Int8Array(rn(ar),0,ar);break;case 5121:rr=new Uint8Array(rn(ar),0,ar);break;case 5122:rr=new Int16Array(rn(2*ar),0,ar);break;case 5123:rr=new Uint16Array(rn(2*ar),0,ar);break;case 5124:rr=new Int32Array(rn(4*ar),0,ar);break;case 5125:rr=new Uint32Array(rn(4*ar),0,ar);break;case 5126:rr=new Float32Array(rn(4*ar),0,ar);break;default:return null}return rr.length!==ar?rr.subarray(0,ar):rr},freeType:function(vr){on(vr.buffer)}}}var H=P();function k($e){return!!$e&&S($e)==="object"&&Array.isArray($e.shape)&&Array.isArray($e.stride)&&typeof $e.offset=="number"&&$e.shape.length===$e.stride.length&&(Array.isArray($e.data)||A($e.data))}H.zero=P();var d=function(rn){return Object.keys(rn).map(function(on){return rn[on]})},g={shape:function(rn){for(var on=[],$n=rn;$n.length;$n=$n[0])on.push($n.length);return on},flatten:function(rn,on,$n,vr){var ar=1;if(on.length)for(var rr=0;rr<on.length;++rr)ar*=on[rr];else ar=0;var Fr=vr||H.allocType($n,ar);switch(on.length){case 0:break;case 1:(function(Ar,wr,xr){for(var Er=0;Er<wr;++Er)xr[Er]=Ar[Er]})(rn,on[0],Fr);break;case 2:(function(Ar,wr,xr,Er){for(var Ir=0,Lr=0;Lr<wr;++Lr)for(var Pr=Ar[Lr],Dr=0;Dr<xr;++Dr)Er[Ir++]=Pr[Dr]})(rn,on[0],on[1],Fr);break;case 3:F(rn,on[0],on[1],on[2],Fr,0);break;default:(function Ar(wr,xr,Er,Ir,Lr){for(var Pr=1,Dr=Er+1;Dr<xr.length;++Dr)Pr*=xr[Dr];var ri=xr[Er];if(xr.length-Er==4){var vi=xr[Er+1],ii=xr[Er+2],Si=xr[Er+3];for(Dr=0;Dr<ri;++Dr)F(wr[Dr],vi,ii,Si,Ir,Lr),Lr+=Pr}else for(Dr=0;Dr<ri;++Dr)Ar(wr[Dr],xr,Er+1,Ir,Lr),Lr+=Pr})(rn,on,0,Fr,0)}return Fr}};function F($e,rn,on,$n,vr,ar){for(var rr=ar,Fr=0;Fr<rn;++Fr)for(var Ar=$e[Fr],wr=0;wr<on;++wr)for(var xr=Ar[wr],Er=0;Er<$n;++Er)vr[rr++]=xr[Er]}var V={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},tt={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},ot={dynamic:35048,stream:35040,static:35044},at=g.flatten,At=g.shape,yt=[];function gt($e){return 0|V[Object.prototype.toString.call($e)]}function bt($e,rn){for(var on=0;on<rn.length;++on)$e[on]=rn[on]}function Tt($e,rn,on,$n,vr,ar,rr){for(var Fr=0,Ar=0;Ar<on;++Ar)for(var wr=0;wr<$n;++wr)$e[Fr++]=rn[vr*Ar+ar*wr+rr]}yt[5120]=1,yt[5122]=2,yt[5124]=4,yt[5121]=1,yt[5123]=2,yt[5125]=4,yt[5126]=4;var Dt={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ut=new Float32Array(1),jt=new Uint32Array(Ut.buffer);function Vt($e){for(var rn=H.allocType(5123,$e.length),on=0;on<$e.length;++on)if(isNaN($e[on]))rn[on]=65535;else if($e[on]===1/0)rn[on]=31744;else if($e[on]===-1/0)rn[on]=64512;else{Ut[0]=$e[on];var $n=jt[0],vr=$n>>>31<<15,ar=($n<<1>>>24)-127,rr=$n>>13&1023;if(ar<-24)rn[on]=vr;else if(ar<-14){var Fr=-14-ar;rn[on]=vr+(rr+1024>>Fr)}else rn[on]=ar>15?vr+31744:vr+(ar+15<<10)+rr}return rn}function Ht($e){return Array.isArray($e)||A($e)}var re=function(rn){return!(rn&rn-1||!rn)},pe=[9984,9986,9985,9987],ye=[0,6409,6410,6407,6408],we={};function Re($e){return"[object "+$e+"]"}we[6409]=we[6406]=we[6402]=1,we[34041]=we[6410]=2,we[6407]=we[35904]=3,we[6408]=we[35906]=4;var He=Re("HTMLCanvasElement"),pn=Re("OffscreenCanvas"),fn=Re("CanvasRenderingContext2D"),Rn=Re("ImageBitmap"),Cn=Re("HTMLImageElement"),kn=Re("HTMLVideoElement"),Mn=Object.keys(V).concat([He,pn,fn,Rn,Cn,kn]),Tn=[];Tn[5121]=1,Tn[5126]=4,Tn[36193]=2,Tn[5123]=2,Tn[5125]=4;var Un=[];function Kn($e){return Array.isArray($e)&&($e.length===0||typeof $e[0]=="number")}function tr($e){return!!Array.isArray($e)&&!($e.length===0||!Ht($e[0]))}function or($e){return Object.prototype.toString.call($e)}function nr($e){return or($e)===He}function er($e){return or($e)===pn}function Sr($e){if(!$e)return!1;var rn=or($e);return Mn.indexOf(rn)>=0||Kn($e)||tr($e)||k($e)}function Vr($e){return 0|V[Object.prototype.toString.call($e)]}function ti($e,rn){return H.allocType($e.type===36193?5126:$e.type,rn)}function hi($e,rn){$e.type===36193?($e.data=Vt(rn),H.freeType(rn)):$e.data=rn}function Fi($e,rn,on,$n,vr,ar){var rr;if(rr=Un[$e]!==void 0?Un[$e]:we[$e]*Tn[rn],ar&&(rr*=6),vr){for(var Fr=0,Ar=on;Ar>=1;)Fr+=rr*Ar*Ar,Ar/=2;return Fr}return rr*on*$n}function to($e,rn,on,$n,vr,ar,rr){var Fr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Ar={repeat:10497,clamp:33071,mirror:33648},wr={nearest:9728,linear:9729},xr=j({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},wr),Er={none:0,browser:37444},Ir={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Lr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Pr={};rn.ext_srgb&&(Lr.srgb=35904,Lr.srgba=35906),rn.oes_texture_float&&(Ir.float32=Ir.float=5126),rn.oes_texture_half_float&&(Ir.float16=Ir["half float"]=36193),rn.webgl_depth_texture&&(j(Lr,{depth:6402,"depth stencil":34041}),j(Ir,{uint16:5123,uint32:5125,"depth stencil":34042})),rn.webgl_compressed_texture_s3tc&&j(Pr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),rn.webgl_compressed_texture_atc&&j(Pr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),rn.webgl_compressed_texture_pvrtc&&j(Pr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),rn.webgl_compressed_texture_etc1&&(Pr["rgb etc1"]=36196);var Dr=Array.prototype.slice.call($e.getParameter(34467));Object.keys(Pr).forEach(function(Zt){var de=Pr[Zt];Dr.indexOf(de)>=0&&(Lr[Zt]=de)});var ri=Object.keys(Lr);on.textureFormats=ri;var vi=[];Object.keys(Lr).forEach(function(Zt){var de=Lr[Zt];vi[de]=Zt});var ii=[];Object.keys(Ir).forEach(function(Zt){var de=Ir[Zt];ii[de]=Zt});var Si=[];Object.keys(wr).forEach(function(Zt){Si[wr[Zt]]=Zt});var Ui=[];Object.keys(xr).forEach(function(Zt){var de=xr[Zt];Ui[de]=Zt});var Yi=[];Object.keys(Ar).forEach(function(Zt){Yi[Ar[Zt]]=Zt});var Bi=ri.reduce(function(Zt,de){var he=Lr[de];return he===6409||he===6406||he===6409||he===6410||he===6402||he===34041||rn.ext_srgb&&(he===35904||he===35906)?Zt[he]=he:he===32855||de.indexOf("rgba")>=0?Zt[he]=6408:Zt[he]=6407,Zt},{});function Di(){this.internalformat=6408,this.format=6408,this.type=5121,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0}function ve(Zt,de){Zt.internalformat=de.internalformat,Zt.format=de.format,Zt.type=de.type,Zt.compressed=de.compressed,Zt.premultiplyAlpha=de.premultiplyAlpha,Zt.flipY=de.flipY,Zt.unpackAlignment=de.unpackAlignment,Zt.colorSpace=de.colorSpace,Zt.width=de.width,Zt.height=de.height,Zt.channels=de.channels}function G(Zt,de){if(S(de)==="object"&&de){if("premultiplyAlpha"in de&&(ft.type(de.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Zt.premultiplyAlpha=de.premultiplyAlpha),"flipY"in de&&(ft.type(de.flipY,"boolean","invalid texture flip"),Zt.flipY=de.flipY),"alignment"in de&&(ft.oneOf(de.alignment,[1,2,4,8],"invalid texture unpack alignment"),Zt.unpackAlignment=de.alignment),"colorSpace"in de&&(ft.parameter(de.colorSpace,Er,"invalid colorSpace"),Zt.colorSpace=Er[de.colorSpace]),"type"in de){var he=de.type;ft(rn.oes_texture_float||!(he==="float"||he==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),ft(rn.oes_texture_half_float||!(he==="half float"||he==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),ft(rn.webgl_depth_texture||!(he==="uint16"||he==="uint32"||he==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ft.parameter(he,Ir,"invalid texture type"),Zt.type=Ir[he]}var ce=Zt.width,Me=Zt.height,ze=Zt.channels,Ve=!1;"shape"in de?(ft(Array.isArray(de.shape)&&de.shape.length>=2,"shape must be an array"),ce=de.shape[0],Me=de.shape[1],de.shape.length===3&&(ze=de.shape[2],ft(ze>0&&ze<=4,"invalid number of channels"),Ve=!0),ft(ce>=0&&ce<=on.maxTextureSize,"invalid width"),ft(Me>=0&&Me<=on.maxTextureSize,"invalid height")):("radius"in de&&(ce=Me=de.radius,ft(ce>=0&&ce<=on.maxTextureSize,"invalid radius")),"width"in de&&(ce=de.width,ft(ce>=0&&ce<=on.maxTextureSize,"invalid width")),"height"in de&&(Me=de.height,ft(Me>=0&&Me<=on.maxTextureSize,"invalid height")),"channels"in de&&(ze=de.channels,ft(ze>0&&ze<=4,"invalid number of channels"),Ve=!0)),Zt.width=0|ce,Zt.height=0|Me,Zt.channels=0|ze;var ke=!1;if("format"in de){var tn=de.format;ft(rn.webgl_depth_texture||!(tn==="depth"||tn==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ft.parameter(tn,Lr,"invalid texture format");var De=Zt.internalformat=Lr[tn];Zt.format=Bi[De],tn in Ir&&("type"in de||(Zt.type=Ir[tn])),tn in Pr&&(Zt.compressed=!0),ke=!0}!Ve&&ke?Zt.channels=we[Zt.format]:Ve&&!ke?Zt.channels!==ye[Zt.format]&&(Zt.format=Zt.internalformat=ye[Zt.channels]):ke&&Ve&&ft(Zt.channels===we[Zt.format],"number of channels inconsistent with specified format")}}function B(Zt){$e.pixelStorei(37440,Zt.flipY),$e.pixelStorei(37441,Zt.premultiplyAlpha),$e.pixelStorei(37443,Zt.colorSpace),$e.pixelStorei(3317,Zt.unpackAlignment)}function $(){Di.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function lt(Zt,de){var he=null;if(Sr(de)?he=de:de&&(ft.type(de,"object","invalid pixel data type"),G(Zt,de),"x"in de&&(Zt.xOffset=0|de.x),"y"in de&&(Zt.yOffset=0|de.y),Sr(de.data)&&(he=de.data)),ft(!Zt.compressed||he instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),de.copy){ft(!he,"can not specify copy and data field for the same texture");var ce=vr.viewportWidth,Me=vr.viewportHeight;Zt.width=Zt.width||ce-Zt.xOffset,Zt.height=Zt.height||Me-Zt.yOffset,Zt.needsCopy=!0,ft(Zt.xOffset>=0&&Zt.xOffset<ce&&Zt.yOffset>=0&&Zt.yOffset<Me&&Zt.width>0&&Zt.width<=ce&&Zt.height>0&&Zt.height<=Me,"copy texture read out of bounds")}else if(he){if(A(he))Zt.channels=Zt.channels||4,Zt.data=he,"type"in de||Zt.type!==5121||(Zt.type=Vr(he));else if(Kn(he))Zt.channels=Zt.channels||4,function(Ue,ln){var mn=ln.length;switch(Ue.type){case 5121:case 5123:case 5125:case 5126:var Wn=H.allocType(Ue.type,mn);Wn.set(ln),Ue.data=Wn;break;case 36193:Ue.data=Vt(ln);break;default:ft.raise("unsupported texture type, must specify a typed array")}}(Zt,he),Zt.alignment=1,Zt.needsFree=!0;else if(k(he)){var ze=he.data;Array.isArray(ze)||Zt.type!==5121||(Zt.type=Vr(ze));var Ve,ke,tn,De,cn,hn,nn=he.shape,dn=he.stride;nn.length===3?(tn=nn[2],hn=dn[2]):(ft(nn.length===2,"invalid ndarray pixel data, must be 2 or 3D"),tn=1,hn=1),Ve=nn[0],ke=nn[1],De=dn[0],cn=dn[1],Zt.alignment=1,Zt.width=Ve,Zt.height=ke,Zt.channels=tn,Zt.format=Zt.internalformat=ye[tn],Zt.needsFree=!0,function(Ue,ln,mn,Wn,An,In){for(var lr=Ue.width,Hr=Ue.height,Gr=Ue.channels,Mr=ti(Ue,lr*Hr*Gr),oi=0,ai=0;ai<Hr;++ai)for(var Zr=0;Zr<lr;++Zr)for(var Xi=0;Xi<Gr;++Xi)Mr[oi++]=ln[mn*Zr+Wn*ai+An*Xi+In];hi(Ue,Mr)}(Zt,ze,De,cn,hn,he.offset)}else if(nr(he)||er(he)||or(he)===fn)nr(he)||er(he)?Zt.element=he:Zt.element=he.canvas,Zt.width=Zt.element.width,Zt.height=Zt.element.height,Zt.channels=4;else if(function(Ue){return or(Ue)===Rn}(he))Zt.element=he,Zt.width=he.width,Zt.height=he.height,Zt.channels=4;else if(function(Ue){return or(Ue)===Cn}(he))Zt.element=he,Zt.width=he.naturalWidth,Zt.height=he.naturalHeight,Zt.channels=4;else if(function(Ue){return or(Ue)===kn}(he))Zt.element=he,Zt.width=he.videoWidth,Zt.height=he.videoHeight,Zt.channels=4;else if(tr(he)){var Sn=Zt.width||he[0].length,Pe=Zt.height||he.length,le=Zt.channels;le=Ht(he[0][0])?le||he[0][0].length:le||1;for(var Le=g.shape(he),Be=1,en=0;en<Le.length;++en)Be*=Le[en];var sn=ti(Zt,Be);g.flatten(he,Le,"",sn),hi(Zt,sn),Zt.alignment=1,Zt.width=Sn,Zt.height=Pe,Zt.channels=le,Zt.format=Zt.internalformat=ye[le],Zt.needsFree=!0}}else Zt.width=Zt.width||1,Zt.height=Zt.height||1,Zt.channels=Zt.channels||4;Zt.type===5126?ft(on.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Zt.type===36193&&ft(on.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Ft(Zt,de,he){var ce=Zt.element,Me=Zt.data,ze=Zt.internalformat,Ve=Zt.format,ke=Zt.type,tn=Zt.width,De=Zt.height;B(Zt),ce?$e.texImage2D(de,he,Ve,Ve,ke,ce):Zt.compressed?$e.compressedTexImage2D(de,he,ze,tn,De,0,Me):Zt.needsCopy?($n(),$e.copyTexImage2D(de,he,Ve,Zt.xOffset,Zt.yOffset,tn,De,0)):$e.texImage2D(de,he,Ve,tn,De,0,Ve,ke,Me||null)}function Jt(Zt,de,he,ce,Me){var ze=Zt.element,Ve=Zt.data,ke=Zt.internalformat,tn=Zt.format,De=Zt.type,cn=Zt.width,hn=Zt.height;B(Zt),ze?$e.texSubImage2D(de,Me,he,ce,tn,De,ze):Zt.compressed?$e.compressedTexSubImage2D(de,Me,he,ce,ke,cn,hn,Ve):Zt.needsCopy?($n(),$e.copyTexSubImage2D(de,Me,he,ce,Zt.xOffset,Zt.yOffset,cn,hn)):$e.texSubImage2D(de,Me,he,ce,cn,hn,tn,De,Ve)}var ie=[];function se(){return ie.pop()||new $}function Ce(Zt){Zt.needsFree&&H.freeType(Zt.data),$.call(Zt),ie.push(Zt)}function Ee(){Di.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function un(Zt,de,he){var ce=Zt.images[0]=se();Zt.mipmask=1,ce.width=Zt.width=de,ce.height=Zt.height=he,ce.channels=Zt.channels=4}function xn(Zt,de){var he=null;if(Sr(de))ve(he=Zt.images[0]=se(),Zt),lt(he,de),Zt.mipmask=1;else if(G(Zt,de),Array.isArray(de.mipmap))for(var ce=de.mipmap,Me=0;Me<ce.length;++Me)ve(he=Zt.images[Me]=se(),Zt),he.width>>=Me,he.height>>=Me,lt(he,ce[Me]),Zt.mipmask|=1<<Me;else ve(he=Zt.images[0]=se(),Zt),lt(he,de),Zt.mipmask=1;ve(Zt,Zt.images[0]),!Zt.compressed||Zt.internalformat!==33776&&Zt.internalformat!==33777&&Zt.internalformat!==33778&&Zt.internalformat!==33779||ft(Zt.width%4==0&&Zt.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function zt(Zt,de){for(var he=Zt.images,ce=0;ce<he.length;++ce){if(!he[ce])return;Ft(he[ce],de,ce)}}var Yt=[];function Se(){var Zt=Yt.pop()||new Ee;Di.call(Zt),Zt.mipmask=0;for(var de=0;de<16;++de)Zt.images[de]=null;return Zt}function Wt(Zt){for(var de=Zt.images,he=0;he<de.length;++he)de[he]&&Ce(de[he]),de[he]=null;Yt.push(Zt)}function ue(){this.minFilter=9728,this.magFilter=9728,this.wrapS=33071,this.wrapT=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function vn(Zt,de){if("min"in de){var he=de.min;ft.parameter(he,xr),Zt.minFilter=xr[he],pe.indexOf(Zt.minFilter)>=0&&!("faces"in de)&&(Zt.genMipmaps=!0)}if("mag"in de){var ce=de.mag;ft.parameter(ce,wr),Zt.magFilter=wr[ce]}var Me=Zt.wrapS,ze=Zt.wrapT;if("wrap"in de){var Ve=de.wrap;typeof Ve=="string"?(ft.parameter(Ve,Ar),Me=ze=Ar[Ve]):Array.isArray(Ve)&&(ft.parameter(Ve[0],Ar),ft.parameter(Ve[1],Ar),Me=Ar[Ve[0]],ze=Ar[Ve[1]])}else{if("wrapS"in de){var ke=de.wrapS;ft.parameter(ke,Ar),Me=Ar[ke]}if("wrapT"in de){var tn=de.wrapT;ft.parameter(tn,Ar),ze=Ar[tn]}}if(Zt.wrapS=Me,Zt.wrapT=ze,"anisotropic"in de){var De=de.anisotropic;ft(typeof De=="number"&&De>=1&&De<=on.maxAnisotropic,"aniso samples must be between 1 and "),Zt.anisotropic=de.anisotropic}if("mipmap"in de){var cn=!1;switch(S(de.mipmap)){case"string":ft.parameter(de.mipmap,Fr,"invalid mipmap hint"),Zt.mipmapHint=Fr[de.mipmap],Zt.genMipmaps=!0,cn=!0;break;case"boolean":cn=Zt.genMipmaps=de.mipmap;break;case"object":ft(Array.isArray(de.mipmap),"invalid mipmap type"),Zt.genMipmaps=!1,cn=!0;break;default:ft.raise("invalid mipmap type")}cn&&!("min"in de)&&(Zt.minFilter=9984)}}function Dn(Zt,de){$e.texParameteri(de,10241,Zt.minFilter),$e.texParameteri(de,10240,Zt.magFilter),$e.texParameteri(de,10242,Zt.wrapS),$e.texParameteri(de,10243,Zt.wrapT),rn.ext_texture_filter_anisotropic&&$e.texParameteri(de,34046,Zt.anisotropic),Zt.genMipmaps&&($e.hint(33170,Zt.mipmapHint),$e.generateMipmap(de))}var zn=0,_n={},Ze=on.maxTextureUnits,Te=Array(Ze).map(function(){return null});function N(Zt){Di.call(this),this.mipmask=0,this.internalformat=6408,this.id=zn++,this.refCount=1,this.target=Zt,this.texture=$e.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new ue,rr.profile&&(this.stats={size:0})}function mt(Zt){$e.activeTexture(33984),$e.bindTexture(Zt.target,Zt.texture)}function $t(){var Zt=Te[0];Zt?$e.bindTexture(Zt.target,Zt.texture):$e.bindTexture(3553,null)}function me(Zt){var de=Zt.texture;ft(de,"must not double destroy texture");var he=Zt.unit,ce=Zt.target;he>=0&&($e.activeTexture(33984+he),$e.bindTexture(ce,null),Te[he]=null),$e.deleteTexture(de),Zt.texture=null,Zt.params=null,Zt.pixels=null,Zt.refCount=0,delete _n[Zt.id],ar.textureCount--}return j(N.prototype,{bind:function(){this.bindCount+=1;var de=this.unit;if(de<0){for(var he=0;he<Ze;++he){var ce=Te[he];if(ce){if(ce.bindCount>0)continue;ce.unit=-1}Te[he]=this,de=he;break}de>=Ze&&ft.raise("insufficient number of texture units"),rr.profile&&ar.maxTextureUnits<de+1&&(ar.maxTextureUnits=de+1),this.unit=de,$e.activeTexture(33984+de),$e.bindTexture(this.target,this.texture)}return de},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&me(this)}}),rr.profile&&(ar.getTotalTextureSize=function(){var Zt=0;return Object.keys(_n).forEach(function(de){Zt+=_n[de].stats.size}),Zt}),{create2D:function(de,he){var ce=new N(3553);function Me(ze,Ve){var ke=ce.texInfo;ue.call(ke);var tn=Se();return typeof ze=="number"?un(tn,0|ze,typeof Ve=="number"?0|Ve:0|ze):ze?(ft.type(ze,"object","invalid arguments to regl.texture"),vn(ke,ze),xn(tn,ze)):un(tn,1,1),ke.genMipmaps&&(tn.mipmask=(tn.width<<1)-1),ce.mipmask=tn.mipmask,ve(ce,tn),ft.texture2D(ke,tn,on),ce.internalformat=tn.internalformat,Me.width=tn.width,Me.height=tn.height,mt(ce),zt(tn,3553),Dn(ke,3553),$t(),Wt(tn),rr.profile&&(ce.stats.size=Fi(ce.internalformat,ce.type,tn.width,tn.height,ke.genMipmaps,!1)),Me.format=vi[ce.internalformat],Me.type=ii[ce.type],Me.mag=Si[ke.magFilter],Me.min=Ui[ke.minFilter],Me.wrapS=Yi[ke.wrapS],Me.wrapT=Yi[ke.wrapT],Me}return _n[ce.id]=ce,ar.textureCount++,Me(de,he),Me.subimage=function(ze,Ve,ke,tn){ft(!!ze,"must specify image data");var De=0|Ve,cn=0|ke,hn=0|tn,nn=se();return ve(nn,ce),nn.width=0,nn.height=0,lt(nn,ze),nn.width=nn.width||(ce.width>>hn)-De,nn.height=nn.height||(ce.height>>hn)-cn,ft(ce.type===nn.type&&ce.format===nn.format&&ce.internalformat===nn.internalformat,"incompatible format for texture.subimage"),ft(De>=0&&cn>=0&&De+nn.width<=ce.width&&cn+nn.height<=ce.height,"texture.subimage write out of bounds"),ft(ce.mipmask&1<<hn,"missing mipmap data"),ft(nn.data||nn.element||nn.needsCopy,"missing image data"),mt(ce),Jt(nn,3553,De,cn,hn),$t(),Ce(nn),Me},Me.resize=function(ze,Ve){var ke=0|ze,tn=0|Ve||ke;if(ke===ce.width&&tn===ce.height)return Me;Me.width=ce.width=ke,Me.height=ce.height=tn,mt(ce);for(var De=0;ce.mipmask>>De;++De){var cn=ke>>De,hn=tn>>De;if(!cn||!hn)break;$e.texImage2D(3553,De,ce.format,cn,hn,0,ce.format,ce.type,null)}return $t(),rr.profile&&(ce.stats.size=Fi(ce.internalformat,ce.type,ke,tn,!1,!1)),Me},Me._reglType="texture2d",Me._texture=ce,rr.profile&&(Me.stats=ce.stats),Me.destroy=function(){ce.decRef()},Me},createCube:function(de,he,ce,Me,ze,Ve){var ke=new N(34067);_n[ke.id]=ke,ar.cubeCount++;var tn=new Array(6);function De(cn,hn,nn,dn,Sn,Pe){var le,Le=ke.texInfo;for(ue.call(Le),le=0;le<6;++le)tn[le]=Se();if(typeof cn!="number"&&cn)if(S(cn)==="object")if(hn)xn(tn[0],cn),xn(tn[1],hn),xn(tn[2],nn),xn(tn[3],dn),xn(tn[4],Sn),xn(tn[5],Pe);else if(vn(Le,cn),G(ke,cn),"faces"in cn){var Be=cn.faces;for(ft(Array.isArray(Be)&&Be.length===6,"cube faces must be a length 6 array"),le=0;le<6;++le)ft(S(Be[le])==="object"&&!!Be[le],"invalid input for cube map face"),ve(tn[le],ke),xn(tn[le],Be[le])}else for(le=0;le<6;++le)xn(tn[le],cn);else ft.raise("invalid arguments to cube map");else{var en=0|cn||1;for(le=0;le<6;++le)un(tn[le],en,en)}for(ve(ke,tn[0]),on.npotTextureCube||ft(re(ke.width)&&re(ke.height),"your browser does not support non power or two texture dimensions"),Le.genMipmaps?ke.mipmask=(tn[0].width<<1)-1:ke.mipmask=tn[0].mipmask,ft.textureCube(ke,Le,tn,on),ke.internalformat=tn[0].internalformat,De.width=tn[0].width,De.height=tn[0].height,mt(ke),le=0;le<6;++le)zt(tn[le],34069+le);for(Dn(Le,34067),$t(),rr.profile&&(ke.stats.size=Fi(ke.internalformat,ke.type,De.width,De.height,Le.genMipmaps,!0)),De.format=vi[ke.internalformat],De.type=ii[ke.type],De.mag=Si[Le.magFilter],De.min=Ui[Le.minFilter],De.wrapS=Yi[Le.wrapS],De.wrapT=Yi[Le.wrapT],le=0;le<6;++le)Wt(tn[le]);return De}return De(de,he,ce,Me,ze,Ve),De.subimage=function(cn,hn,nn,dn,Sn){ft(!!hn,"must specify image data"),ft(typeof cn=="number"&&cn===(0|cn)&&cn>=0&&cn<6,"invalid face");var Pe=0|nn,le=0|dn,Le=0|Sn,Be=se();return ve(Be,ke),Be.width=0,Be.height=0,lt(Be,hn),Be.width=Be.width||(ke.width>>Le)-Pe,Be.height=Be.height||(ke.height>>Le)-le,ft(ke.type===Be.type&&ke.format===Be.format&&ke.internalformat===Be.internalformat,"incompatible format for texture.subimage"),ft(Pe>=0&&le>=0&&Pe+Be.width<=ke.width&&le+Be.height<=ke.height,"texture.subimage write out of bounds"),ft(ke.mipmask&1<<Le,"missing mipmap data"),ft(Be.data||Be.element||Be.needsCopy,"missing image data"),mt(ke),Jt(Be,34069+cn,Pe,le,Le),$t(),Ce(Be),De},De.resize=function(cn){var hn=0|cn;if(hn!==ke.width){De.width=ke.width=hn,De.height=ke.height=hn,mt(ke);for(var nn=0;nn<6;++nn)for(var dn=0;ke.mipmask>>dn;++dn)$e.texImage2D(34069+nn,dn,ke.format,hn>>dn,hn>>dn,0,ke.format,ke.type,null);return $t(),rr.profile&&(ke.stats.size=Fi(ke.internalformat,ke.type,De.width,De.height,!1,!0)),De}},De._reglType="textureCube",De._texture=ke,rr.profile&&(De.stats=ke.stats),De.destroy=function(){ke.decRef()},De},clear:function(){for(var de=0;de<Ze;++de)$e.activeTexture(33984+de),$e.bindTexture(3553,null),Te[de]=null;d(_n).forEach(me),ar.cubeCount=0,ar.textureCount=0},getTexture:function(de){return null},restore:function(){for(var de=0;de<Ze;++de){var he=Te[de];he&&(he.bindCount=0,he.unit=-1,Te[de]=null)}d(_n).forEach(function(ce){ce.texture=$e.createTexture(),$e.bindTexture(ce.target,ce.texture);for(var Me=0;Me<32;++Me)if((ce.mipmask&1<<Me)!=0)if(ce.target===3553)$e.texImage2D(3553,Me,ce.internalformat,ce.width>>Me,ce.height>>Me,0,ce.internalformat,ce.type,null);else for(var ze=0;ze<6;++ze)$e.texImage2D(34069+ze,Me,ce.internalformat,ce.width>>Me,ce.height>>Me,0,ce.internalformat,ce.type,null);Dn(ce.texInfo,ce.target)})},refresh:function(){for(var de=0;de<Ze;++de){var he=Te[de];he&&(he.bindCount=0,he.unit=-1,Te[de]=null),$e.activeTexture(33984+de),$e.bindTexture(3553,null),$e.bindTexture(34067,null)}}}}Un[32854]=2,Un[32855]=2,Un[36194]=2,Un[34041]=4,Un[33776]=.5,Un[33777]=.5,Un[33778]=1,Un[33779]=1,Un[35986]=.5,Un[35987]=1,Un[34798]=1,Un[35840]=.5,Un[35841]=.25,Un[35842]=.5,Un[35843]=.25,Un[36196]=.5;var si=[];function Ti($e,rn,on){return si[$e]*rn*on}si[32854]=2,si[32855]=2,si[36194]=2,si[33189]=2,si[36168]=1,si[34041]=4,si[35907]=4,si[34836]=16,si[34842]=8,si[34843]=6;var _i=[6407,6408],Li=[];Li[6408]=4,Li[6407]=3;var Vi=[];Vi[5121]=1,Vi[5126]=4,Vi[36193]=2;var ro=[32854,32855,36194,35907,34842,34843,34836],jr={};function Ji(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0}function pr($e,rn,on,$n,vr,ar,rr){function Fr(Ar){var wr;rn.next===null?(ft(vr.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),wr=5121):(ft(rn.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),wr=rn.next.colorAttachments[0].texture._texture.type,ar.oes_texture_float?(ft(wr===5121||wr===5126,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),wr===5126&&ft(rr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):ft(wr===5121,"Reading from a framebuffer is only allowed for the type 'uint8'"));var xr=0,Er=0,Ir=$n.framebufferWidth,Lr=$n.framebufferHeight,Pr=null;A(Ar)?Pr=Ar:Ar&&(ft.type(Ar,"object","invalid arguments to regl.read()"),xr=0|Ar.x,Er=0|Ar.y,ft(xr>=0&&xr<$n.framebufferWidth,"invalid x offset for regl.read"),ft(Er>=0&&Er<$n.framebufferHeight,"invalid y offset for regl.read"),Ir=0|(Ar.width||$n.framebufferWidth-xr),Lr=0|(Ar.height||$n.framebufferHeight-Er),Pr=Ar.data||null),Pr&&(wr===5121?ft(Pr instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):wr===5126&&ft(Pr instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),ft(Ir>0&&Ir+xr<=$n.framebufferWidth,"invalid width for read pixels"),ft(Lr>0&&Lr+Er<=$n.framebufferHeight,"invalid height for read pixels"),on();var Dr=Ir*Lr*4;return Pr||(wr===5121?Pr=new Uint8Array(Dr):wr===5126&&(Pr=Pr||new Float32Array(Dr))),ft.isTypedArray(Pr,"data buffer for regl.read() must be a typedarray"),ft(Pr.byteLength>=Dr,"data buffer for regl.read() too small"),$e.pixelStorei(3333,4),$e.readPixels(xr,Er,Ir,Lr,6408,wr,Pr),Pr}return function(Ar){return Ar&&"framebuffer"in Ar?function(wr){var xr;return rn.setFBO({framebuffer:wr.framebuffer},function(){xr=Fr(wr)}),xr}(Ar):Fr(Ar)}}function Yr($e){return Array.prototype.slice.call($e)}function Br($e){return Yr($e).join("")}jr[36053]="complete",jr[36054]="incomplete attachment",jr[36057]="incomplete dimensions",jr[36055]="incomplete, missing attachment",jr[36061]="unsupported";var Nr="xyzw".split(""),Xr="profile",Kr="framebuffer",ni="vert",fi="frag",$r="elements",ci="primitive",Qr="count",gi="offset",Oi="instances",bi="vao",zi=Kr+"Width",Qi=Kr+"Height",io=["blend.func","blend.equation","stencil.func","stencil.opFront","stencil.opBack","sample.coverage","viewport","scissor.box","polygonOffset.offset"],Wi={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Zi=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Pi={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},no={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Mo={frag:35632,vert:35633},ao={cw:2304,ccw:2305};function uo($e){return Array.isArray($e)||A($e)||k($e)}function xo($e){return $e.sort(function(rn,on){return rn==="viewport"?-1:on==="viewport"?1:rn<on?-1:1})}function oe($e,rn,on,$n){this.thisDep=$e,this.contextDep=rn,this.propDep=on,this.append=$n}function Kt($e){return $e&&!($e.thisDep||$e.contextDep||$e.propDep)}function te($e){return new oe(!1,!1,!1,$e)}function Oe($e,rn){var on=$e.type;if(on===0){var $n=$e.data.length;return new oe(!0,$n>=1,$n>=2,rn)}if(on===4){var vr=$e.data;return new oe(vr.thisDep,vr.contextDep,vr.propDep,rn)}if(on===5)return new oe(!1,!1,!1,rn);if(on===6){for(var ar=!1,rr=!1,Fr=!1,Ar=0;Ar<$e.data.length;++Ar){var wr=$e.data[Ar];if(wr.type===1)Fr=!0;else if(wr.type===2)rr=!0;else if(wr.type===3)ar=!0;else if(wr.type===0){ar=!0;var xr=wr.data;xr>=1&&(rr=!0),xr>=2&&(Fr=!0)}else wr.type===4&&(ar=ar||wr.data.thisDep,rr=rr||wr.data.contextDep,Fr=Fr||wr.data.propDep)}return new oe(ar,rr,Fr,rn)}return new oe(on===3,on===2,on===1,rn)}var Qe=new oe(!1,!1,!1,function(){});function On($e,rn,on,$n,vr,ar,rr,Fr,Ar,wr,xr,Er,Ir,Lr,Pr){var Dr=wr.Record,ri={add:32774,subtract:32778,"reverse subtract":32779};on.ext_blend_minmax&&(ri.min=32775,ri.max=32776);var vi=on.angle_instanced_arrays,ii=on.webgl_draw_buffers,Si={dirty:!0,profile:Pr.profile},Ui={},Yi=[],Bi={},Di={};function ve(Ze){return Ze.replace(".","_")}function G(Ze,Te,N){var mt=ve(Ze);Yi.push(Ze),Ui[mt]=Si[mt]=!!N,Bi[mt]=Te}function B(Ze,Te,N){var mt=ve(Ze);Yi.push(Ze),Array.isArray(N)?(Si[mt]=N.slice(),Ui[mt]=N.slice()):Si[mt]=Ui[mt]=N,Di[mt]=Te}G("dither",3024),G("blend.enable",3042),B("blend.color","blendColor",[0,0,0,0]),B("blend.equation","blendEquationSeparate",[32774,32774]),B("blend.func","blendFuncSeparate",[1,0,1,0]),G("depth.enable",2929,!0),B("depth.func","depthFunc",513),B("depth.range","depthRange",[0,1]),B("depth.mask","depthMask",!0),B("colorMask","colorMask",[!0,!0,!0,!0]),G("cull.enable",2884),B("cull.face","cullFace",1029),B("frontFace","frontFace",2305),B("lineWidth","lineWidth",1),G("polygonOffset.enable",32823),B("polygonOffset.offset","polygonOffset",[0,0]),G("sample.alpha",32926),G("sample.enable",32928),B("sample.coverage","sampleCoverage",[1,!1]),G("stencil.enable",2960),B("stencil.mask","stencilMask",-1),B("stencil.func","stencilFunc",[519,0,-1]),B("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),B("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),G("scissor.enable",3089),B("scissor.box","scissor",[0,0,$e.drawingBufferWidth,$e.drawingBufferHeight]),B("viewport","viewport",[0,0,$e.drawingBufferWidth,$e.drawingBufferHeight]);var $={gl:$e,context:Ir,strings:rn,next:Ui,current:Si,draw:Er,elements:ar,buffer:vr,shader:xr,attributes:wr.state,vao:wr,uniforms:Ar,framebuffer:Fr,extensions:on,timer:Lr,isBufferArgs:uo},lt={primTypes:Dt,compareFuncs:Pi,blendFuncs:Wi,blendEquations:ri,stencilOps:no,glTypes:tt,orientationType:ao};ft.optional(function(){$.isArrayLike=Ht}),ii&&(lt.backBuffer=[1029],lt.drawBuffer=it($n.maxDrawbuffers,function(Ze){return Ze===0?[0]:it(Ze,function(Te){return 36064+Te})}));var Ft=0;function Jt(){var Ze=function(){var ce=0,Me=[],ze=[];function Ve(){var cn=[],hn=[];return j(function(){cn.push.apply(cn,Yr(arguments))},{def:function(){var dn="v"+ce++;return hn.push(dn),arguments.length>0&&(cn.push(dn,"="),cn.push.apply(cn,Yr(arguments)),cn.push(";")),dn},toString:function(){return Br([hn.length>0?"var "+hn.join(",")+";":"",Br(cn)])}})}function ke(){var cn=Ve(),hn=Ve(),nn=cn.toString,dn=hn.toString;function Sn(Pe,le){hn(Pe,le,"=",cn.def(Pe,le),";")}return j(function(){cn.apply(cn,Yr(arguments))},{def:cn.def,entry:cn,exit:hn,save:Sn,set:function(le,Le,Be){Sn(le,Le),cn(le,Le,"=",Be,";")},toString:function(){return nn()+dn()}})}var tn=Ve(),De={};return{global:tn,link:function(hn){for(var nn=0;nn<ze.length;++nn)if(ze[nn]===hn)return Me[nn];var dn="g"+ce++;return Me.push(dn),ze.push(hn),dn},block:Ve,proc:function(hn,nn){var dn=[];function Sn(){var Be="a"+dn.length;return dn.push(Be),Be}nn=nn||0;for(var Pe=0;Pe<nn;++Pe)Sn();var le=ke(),Le=le.toString;return De[hn]=j(le,{arg:Sn,toString:function(){return Br(["function(",dn.join(),"){",Le(),"}"])}})},scope:ke,cond:function(){var hn=Br(arguments),nn=ke(),dn=ke(),Sn=nn.toString,Pe=dn.toString;return j(nn,{then:function(){return nn.apply(nn,Yr(arguments)),this},else:function(){return dn.apply(dn,Yr(arguments)),this},toString:function(){var Le=Pe();return Le&&(Le="else{"+Le+"}"),Br(["if(",hn,"){",Sn(),"}",Le])}})},compile:function(){var hn=['"use strict";',tn,"return {"];Object.keys(De).forEach(function(dn){hn.push('"',dn,'":',De[dn].toString(),",")}),hn.push("}");var nn=Br(hn).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return Function.apply(null,Me.concat(nn)).apply(null,ze)}}}(),Te=Ze.link,N=Ze.global;Ze.id=Ft++,Ze.batchId="0";var mt=Te($),$t=Ze.shared={props:"a0"};Object.keys($).forEach(function(ce){$t[ce]=N.def(mt,".",ce)}),ft.optional(function(){Ze.CHECK=Te(ft),Ze.commandStr=ft.guessCommand(),Ze.command=Te(Ze.commandStr),Ze.assert=function(ce,Me,ze){ce("if(!(",Me,"))",this.CHECK,".commandRaise(",Te(ze),",",this.command,");")},lt.invalidBlendCombinations=Zi});var me=Ze.next={},Zt=Ze.current={};Object.keys(Di).forEach(function(ce){Array.isArray(Si[ce])&&(me[ce]=N.def($t.next,".",ce),Zt[ce]=N.def($t.current,".",ce))});var de=Ze.constants={};Object.keys(lt).forEach(function(ce){de[ce]=N.def(JSON.stringify(lt[ce]))}),Ze.invoke=function(ce,Me){switch(Me.type){case 0:var ze=["this",$t.context,$t.props,Ze.batchId];return ce.def(Te(Me.data),".call(",ze.slice(0,Math.max(Me.data.length+1,4)),")");case 1:return ce.def($t.props,Me.data);case 2:return ce.def($t.context,Me.data);case 3:return ce.def("this",Me.data);case 4:return Me.data.append(Ze,ce),Me.data.ref;case 5:return Me.data.toString();case 6:return Me.data.map(function(Ve){return Ze.invoke(ce,Ve)})}},Ze.attribCache={};var he={};return Ze.scopeAttrib=function(ce){var Me=rn.id(ce);if(Me in he)return he[Me];var ze=wr.scope[Me];return ze||(ze=wr.scope[Me]=new Dr),he[Me]=Te(ze)},Ze}function ie(Ze,Te,N,mt,$t){var me=Ze.static,Zt=Ze.dynamic;ft.optional(function(){var dn=[Kr,ni,fi,$r,ci,gi,Qr,Oi,Xr,bi].concat(Yi);function Sn(Pe){Object.keys(Pe).forEach(function(le){ft.command(dn.indexOf(le)>=0,'unknown parameter "'+le+'"',$t.commandStr)})}Sn(me),Sn(Zt)});var de=function(dn,Sn){var Pe=dn.static;if(typeof Pe[fi]=="string"&&typeof Pe[ni]=="string"){if(Object.keys(Sn.dynamic).length>0)return null;var le=Sn.static,Le=Object.keys(le);if(Le.length>0&&typeof le[Le[0]]=="number"){for(var Be=[],en=0;en<Le.length;++en)ft(typeof le[Le[en]]=="number","must specify all vertex attribute locations when using vaos"),Be.push([0|le[Le[en]],Le[en]]);return Be}}return null}(Ze,Te),he=function(dn,Sn){var Pe=dn.static,le=dn.dynamic;if(Kr in Pe){var Le=Pe[Kr];return Le?(Le=Fr.getFramebuffer(Le),ft.command(Le,"invalid framebuffer object"),te(function(en,sn){var Ue=en.link(Le),ln=en.shared;sn.set(ln.framebuffer,".next",Ue);var mn=ln.context;return sn.set(mn,"."+zi,Ue+".width"),sn.set(mn,"."+Qi,Ue+".height"),Ue})):te(function(en,sn){var Ue=en.shared;sn.set(Ue.framebuffer,".next","null");var ln=Ue.context;return sn.set(ln,"."+zi,ln+".drawingBufferWidth"),sn.set(ln,"."+Qi,ln+".drawingBufferHeight"),"null"})}if(Kr in le){var Be=le[Kr];return Oe(Be,function(en,sn){var Ue=en.invoke(sn,Be),ln=en.shared,mn=ln.framebuffer,Wn=sn.def(mn,".getFramebuffer(",Ue,")");ft.optional(function(){en.assert(sn,"!"+Ue+"||"+Wn,"invalid framebuffer object")}),sn.set(mn,".next",Wn);var An=ln.context;return sn.set(An,"."+zi,Wn+"?"+Wn+".width:"+An+".drawingBufferWidth"),sn.set(An,"."+Qi,Wn+"?"+Wn+".height:"+An+".drawingBufferHeight"),Wn})}return null}(Ze),ce=function(dn,Sn,Pe){var le=dn.static,Le=dn.dynamic;function Be(Ue){if(Ue in le){var ln=le[Ue];ft.commandType(ln,"object","invalid "+Ue,Pe.commandStr);var mn,Wn,An=!0,In=0|ln.x,lr=0|ln.y;return"width"in ln?(mn=0|ln.width,ft.command(mn>=0,"invalid "+Ue,Pe.commandStr)):An=!1,"height"in ln?(Wn=0|ln.height,ft.command(Wn>=0,"invalid "+Ue,Pe.commandStr)):An=!1,new oe(!An&&Sn&&Sn.thisDep,!An&&Sn&&Sn.contextDep,!An&&Sn&&Sn.propDep,function(Mr,oi){var ai=Mr.shared.context,Zr=mn;"width"in ln||(Zr=oi.def(ai,".",zi,"-",In));var Xi=Wn;return"height"in ln||(Xi=oi.def(ai,".",Qi,"-",lr)),[In,lr,Zr,Xi]})}if(Ue in Le){var Hr=Le[Ue],Gr=Oe(Hr,function(Mr,oi){var ai=Mr.invoke(oi,Hr);ft.optional(function(){Mr.assert(oi,ai+"&&typeof "+ai+'==="object"',"invalid "+Ue)});var Zr=Mr.shared.context,Xi=oi.def(ai,".x|0"),$i=oi.def(ai,".y|0"),Go=oi.def('"width" in ',ai,"?",ai,".width|0:","(",Zr,".",zi,"-",Xi,")"),_o=oi.def('"height" in ',ai,"?",ai,".height|0:","(",Zr,".",Qi,"-",$i,")");return ft.optional(function(){Mr.assert(oi,Go+">=0&&"+_o+">=0","invalid "+Ue)}),[Xi,$i,Go,_o]});return Sn&&(Gr.thisDep=Gr.thisDep||Sn.thisDep,Gr.contextDep=Gr.contextDep||Sn.contextDep,Gr.propDep=Gr.propDep||Sn.propDep),Gr}return Sn?new oe(Sn.thisDep,Sn.contextDep,Sn.propDep,function(Mr,oi){var ai=Mr.shared.context;return[0,0,oi.def(ai,".",zi),oi.def(ai,".",Qi)]}):null}var en=Be("viewport");if(en){var sn=en;en=new oe(en.thisDep,en.contextDep,en.propDep,function(Ue,ln){var mn=sn.append(Ue,ln),Wn=Ue.shared.context;return ln.set(Wn,".viewportWidth",mn[2]),ln.set(Wn,".viewportHeight",mn[3]),mn})}return{viewport:en,scissor_box:Be("scissor.box")}}(Ze,he,$t),Me=function(dn,Sn){var Pe=dn.static,le=dn.dynamic,Le=function(){if($r in Pe){var sn=Pe[$r];uo(sn)?sn=ar.getElements(ar.create(sn,!0)):sn&&(sn=ar.getElements(sn),ft.command(sn,"invalid elements",Sn.commandStr));var Ue=te(function(mn,Wn){if(sn){var An=mn.link(sn);return mn.ELEMENTS=An,An}return mn.ELEMENTS=null,null});return Ue.value=sn,Ue}if($r in le){var ln=le[$r];return Oe(ln,function(mn,Wn){var An=mn.shared,In=An.isBufferArgs,lr=An.elements,Hr=mn.invoke(Wn,ln),Gr=Wn.def("null"),Mr=Wn.def(In,"(",Hr,")"),oi=mn.cond(Mr).then(Gr,"=",lr,".createStream(",Hr,");").else(Gr,"=",lr,".getElements(",Hr,");");return ft.optional(function(){mn.assert(oi.else,"!"+Hr+"||"+Gr,"invalid elements")}),Wn.entry(oi),Wn.exit(mn.cond(Mr).then(lr,".destroyStream(",Gr,");")),mn.ELEMENTS=Gr,Gr})}return null}();function Be(sn,Ue){if(sn in Pe){var ln=0|Pe[sn];return ft.command(!Ue||ln>=0,"invalid "+sn,Sn.commandStr),te(function(Wn,An){return Ue&&(Wn.OFFSET=ln),ln})}if(sn in le){var mn=le[sn];return Oe(mn,function(Wn,An){var In=Wn.invoke(An,mn);return Ue&&(Wn.OFFSET=In,ft.optional(function(){Wn.assert(An,In+">=0","invalid "+sn)})),In})}return Ue&&Le?te(function(Wn,An){return Wn.OFFSET="0",0}):null}var en=Be(gi,!0);return{elements:Le,primitive:function(){if(ci in Pe){var sn=Pe[ci];return ft.commandParameter(sn,Dt,"invalid primitve",Sn.commandStr),te(function(ln,mn){return Dt[sn]})}if(ci in le){var Ue=le[ci];return Oe(Ue,function(ln,mn){var Wn=ln.constants.primTypes,An=ln.invoke(mn,Ue);return ft.optional(function(){ln.assert(mn,An+" in "+Wn,"invalid primitive, must be one of "+Object.keys(Dt))}),mn.def(Wn,"[",An,"]")})}return Le?Kt(Le)?Le.value?te(function(ln,mn){return mn.def(ln.ELEMENTS,".primType")}):te(function(){return 4}):new oe(Le.thisDep,Le.contextDep,Le.propDep,function(ln,mn){var Wn=ln.ELEMENTS;return mn.def(Wn,"?",Wn,".primType:",4)}):null}(),count:function(){if(Qr in Pe){var sn=0|Pe[Qr];return ft.command(typeof sn=="number"&&sn>=0,"invalid vertex count",Sn.commandStr),te(function(){return sn})}if(Qr in le){var Ue=le[Qr];return Oe(Ue,function(Wn,An){var In=Wn.invoke(An,Ue);return ft.optional(function(){Wn.assert(An,"typeof "+In+'==="number"&&'+In+">=0&&"+In+"===("+In+"|0)","invalid vertex count")}),In})}if(Le){if(Kt(Le)){if(Le)return en?new oe(en.thisDep,en.contextDep,en.propDep,function(Wn,An){var In=An.def(Wn.ELEMENTS,".vertCount-",Wn.OFFSET);return ft.optional(function(){Wn.assert(An,In+">=0","invalid vertex offset/element buffer too small")}),In}):te(function(Wn,An){return An.def(Wn.ELEMENTS,".vertCount")});var ln=te(function(){return-1});return ft.optional(function(){ln.MISSING=!0}),ln}var mn=new oe(Le.thisDep||en.thisDep,Le.contextDep||en.contextDep,Le.propDep||en.propDep,function(Wn,An){var In=Wn.ELEMENTS;return Wn.OFFSET?An.def(In,"?",In,".vertCount-",Wn.OFFSET,":-1"):An.def(In,"?",In,".vertCount:-1")});return ft.optional(function(){mn.DYNAMIC=!0}),mn}return null}(),instances:Be(Oi,!1),offset:en}}(Ze,$t),ze=function(dn,Sn){var Pe=dn.static,le=dn.dynamic,Le={};return Yi.forEach(function(Be){var en=ve(Be);function sn(Ue,ln){if(Be in Pe){var mn=Ue(Pe[Be]);Le[en]=te(function(){return mn})}else if(Be in le){var Wn=le[Be];Le[en]=Oe(Wn,function(An,In){return ln(An,In,An.invoke(In,Wn))})}}switch(Be){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return sn(function(Ue){return ft.commandType(Ue,"boolean",Be,Sn.commandStr),Ue},function(Ue,ln,mn){return ft.optional(function(){Ue.assert(ln,"typeof "+mn+'==="boolean"',"invalid flag "+Be,Ue.commandStr)}),mn});case"depth.func":return sn(function(Ue){return ft.commandParameter(Ue,Pi,"invalid "+Be,Sn.commandStr),Pi[Ue]},function(Ue,ln,mn){var Wn=Ue.constants.compareFuncs;return ft.optional(function(){Ue.assert(ln,mn+" in "+Wn,"invalid "+Be+", must be one of "+Object.keys(Pi))}),ln.def(Wn,"[",mn,"]")});case"depth.range":return sn(function(Ue){return ft.command(Ht(Ue)&&Ue.length===2&&typeof Ue[0]=="number"&&typeof Ue[1]=="number"&&Ue[0]<=Ue[1],"depth range is 2d array",Sn.commandStr),Ue},function(Ue,ln,mn){return ft.optional(function(){Ue.assert(ln,Ue.shared.isArrayLike+"("+mn+")&&"+mn+".length===2&&typeof "+mn+'[0]==="number"&&typeof '+mn+'[1]==="number"&&'+mn+"[0]<="+mn+"[1]","depth range must be a 2d array")}),[ln.def("+",mn,"[0]"),ln.def("+",mn,"[1]")]});case"blend.func":return sn(function(Ue){ft.commandType(Ue,"object","blend.func",Sn.commandStr);var ln="srcRGB"in Ue?Ue.srcRGB:Ue.src,mn="srcAlpha"in Ue?Ue.srcAlpha:Ue.src,Wn="dstRGB"in Ue?Ue.dstRGB:Ue.dst,An="dstAlpha"in Ue?Ue.dstAlpha:Ue.dst;return ft.commandParameter(ln,Wi,en+".srcRGB",Sn.commandStr),ft.commandParameter(mn,Wi,en+".srcAlpha",Sn.commandStr),ft.commandParameter(Wn,Wi,en+".dstRGB",Sn.commandStr),ft.commandParameter(An,Wi,en+".dstAlpha",Sn.commandStr),ft.command(Zi.indexOf(ln+", "+Wn)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+ln+", "+Wn+")",Sn.commandStr),[Wi[ln],Wi[Wn],Wi[mn],Wi[An]]},function(Ue,ln,mn){var Wn=Ue.constants.blendFuncs;function An(Mr,oi){var ai=ln.def('"',Mr,oi,'" in ',mn,"?",mn,".",Mr,oi,":",mn,".",Mr);return ft.optional(function(){Ue.assert(ln,ai+" in "+Wn,"invalid "+Be+"."+Mr+oi+", must be one of "+Object.keys(Wi))}),ai}ft.optional(function(){Ue.assert(ln,mn+"&&typeof "+mn+'==="object"',"invalid blend func, must be an object")});var In=An("src","RGB"),lr=An("dst","RGB");ft.optional(function(){var Mr=Ue.constants.invalidBlendCombinations;Ue.assert(ln,Mr+".indexOf("+In+'+", "+'+lr+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Hr=ln.def(Wn,"[",In,"]"),Gr=ln.def(Wn,"[",An("src","Alpha"),"]");return[Hr,ln.def(Wn,"[",lr,"]"),Gr,ln.def(Wn,"[",An("dst","Alpha"),"]")]});case"blend.equation":return sn(function(Ue){return typeof Ue=="string"?(ft.commandParameter(Ue,ri,"invalid "+Be,Sn.commandStr),[ri[Ue],ri[Ue]]):S(Ue)==="object"?(ft.commandParameter(Ue.rgb,ri,Be+".rgb",Sn.commandStr),ft.commandParameter(Ue.alpha,ri,Be+".alpha",Sn.commandStr),[ri[Ue.rgb],ri[Ue.alpha]]):void ft.commandRaise("invalid blend.equation",Sn.commandStr)},function(Ue,ln,mn){var Wn=Ue.constants.blendEquations,An=ln.def(),In=ln.def(),lr=Ue.cond("typeof ",mn,'==="string"');return ft.optional(function(){function Hr(Gr,Mr,oi){Ue.assert(Gr,oi+" in "+Wn,"invalid "+Mr+", must be one of "+Object.keys(ri))}Hr(lr.then,Be,mn),Ue.assert(lr.else,mn+"&&typeof "+mn+'==="object"',"invalid "+Be),Hr(lr.else,Be+".rgb",mn+".rgb"),Hr(lr.else,Be+".alpha",mn+".alpha")}),lr.then(An,"=",In,"=",Wn,"[",mn,"];"),lr.else(An,"=",Wn,"[",mn,".rgb];",In,"=",Wn,"[",mn,".alpha];"),ln(lr),[An,In]});case"blend.color":return sn(function(Ue){return ft.command(Ht(Ue)&&Ue.length===4,"blend.color must be a 4d array",Sn.commandStr),it(4,function(ln){return+Ue[ln]})},function(Ue,ln,mn){return ft.optional(function(){Ue.assert(ln,Ue.shared.isArrayLike+"("+mn+")&&"+mn+".length===4","blend.color must be a 4d array")}),it(4,function(Wn){return ln.def("+",mn,"[",Wn,"]")})});case"stencil.mask":return sn(function(Ue){return ft.commandType(Ue,"number",en,Sn.commandStr),0|Ue},function(Ue,ln,mn){return ft.optional(function(){Ue.assert(ln,"typeof "+mn+'==="number"',"invalid stencil.mask")}),ln.def(mn,"|0")});case"stencil.func":return sn(function(Ue){ft.commandType(Ue,"object",en,Sn.commandStr);var ln=Ue.cmp||"keep",mn=Ue.ref||0,Wn="mask"in Ue?Ue.mask:-1;return ft.commandParameter(ln,Pi,Be+".cmp",Sn.commandStr),ft.commandType(mn,"number",Be+".ref",Sn.commandStr),ft.commandType(Wn,"number",Be+".mask",Sn.commandStr),[Pi[ln],mn,Wn]},function(Ue,ln,mn){var Wn=Ue.constants.compareFuncs;return ft.optional(function(){function An(){Ue.assert(ln,Array.prototype.join.call(arguments,""),"invalid stencil.func")}An(mn+"&&typeof ",mn,'==="object"'),An('!("cmp" in ',mn,")||(",mn,".cmp in ",Wn,")")}),[ln.def('"cmp" in ',mn,"?",Wn,"[",mn,".cmp]",":",7680),ln.def(mn,".ref|0"),ln.def('"mask" in ',mn,"?",mn,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return sn(function(Ue){ft.commandType(Ue,"object",en,Sn.commandStr);var ln=Ue.fail||"keep",mn=Ue.zfail||"keep",Wn=Ue.zpass||"keep";return ft.commandParameter(ln,no,Be+".fail",Sn.commandStr),ft.commandParameter(mn,no,Be+".zfail",Sn.commandStr),ft.commandParameter(Wn,no,Be+".zpass",Sn.commandStr),[Be==="stencil.opBack"?1029:1028,no[ln],no[mn],no[Wn]]},function(Ue,ln,mn){var Wn=Ue.constants.stencilOps;function An(In){return ft.optional(function(){Ue.assert(ln,'!("'+In+'" in '+mn+")||("+mn+"."+In+" in "+Wn+")","invalid "+Be+"."+In+", must be one of "+Object.keys(no))}),ln.def('"',In,'" in ',mn,"?",Wn,"[",mn,".",In,"]:",7680)}return ft.optional(function(){Ue.assert(ln,mn+"&&typeof "+mn+'==="object"',"invalid "+Be)}),[Be==="stencil.opBack"?1029:1028,An("fail"),An("zfail"),An("zpass")]});case"polygonOffset.offset":return sn(function(Ue){ft.commandType(Ue,"object",en,Sn.commandStr);var ln=0|Ue.factor,mn=0|Ue.units;return ft.commandType(ln,"number",en+".factor",Sn.commandStr),ft.commandType(mn,"number",en+".units",Sn.commandStr),[ln,mn]},function(Ue,ln,mn){return ft.optional(function(){Ue.assert(ln,mn+"&&typeof "+mn+'==="object"',"invalid "+Be)}),[ln.def(mn,".factor|0"),ln.def(mn,".units|0")]});case"cull.face":return sn(function(Ue){var ln=0;return Ue==="front"?ln=1028:Ue==="back"&&(ln=1029),ft.command(!!ln,en,Sn.commandStr),ln},function(Ue,ln,mn){return ft.optional(function(){Ue.assert(ln,mn+'==="front"||'+mn+'==="back"',"invalid cull.face")}),ln.def(mn,'==="front"?',1028,":",1029)});case"lineWidth":return sn(function(Ue){return ft.command(typeof Ue=="number"&&Ue>=$n.lineWidthDims[0]&&Ue<=$n.lineWidthDims[1],"invalid line width, must be a positive number between "+$n.lineWidthDims[0]+" and "+$n.lineWidthDims[1],Sn.commandStr),Ue},function(Ue,ln,mn){return ft.optional(function(){Ue.assert(ln,"typeof "+mn+'==="number"&&'+mn+">="+$n.lineWidthDims[0]+"&&"+mn+"<="+$n.lineWidthDims[1],"invalid line width")}),mn});case"frontFace":return sn(function(Ue){return ft.commandParameter(Ue,ao,en,Sn.commandStr),ao[Ue]},function(Ue,ln,mn){return ft.optional(function(){Ue.assert(ln,mn+'==="cw"||'+mn+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),ln.def(mn+'==="cw"?2304:2305')});case"colorMask":return sn(function(Ue){return ft.command(Ht(Ue)&&Ue.length===4,"color.mask must be length 4 array",Sn.commandStr),Ue.map(function(ln){return!!ln})},function(Ue,ln,mn){return ft.optional(function(){Ue.assert(ln,Ue.shared.isArrayLike+"("+mn+")&&"+mn+".length===4","invalid color.mask")}),it(4,function(Wn){return"!!"+mn+"["+Wn+"]"})});case"sample.coverage":return sn(function(Ue){ft.command(S(Ue)==="object"&&Ue,en,Sn.commandStr);var ln="value"in Ue?Ue.value:1,mn=!!Ue.invert;return ft.command(typeof ln=="number"&&ln>=0&&ln<=1,"sample.coverage.value must be a number between 0 and 1",Sn.commandStr),[ln,mn]},function(Ue,ln,mn){return ft.optional(function(){Ue.assert(ln,mn+"&&typeof "+mn+'==="object"',"invalid sample.coverage")}),[ln.def('"value" in ',mn,"?+",mn,".value:1"),ln.def("!!",mn,".invert")]})}}),Le}(Ze,$t),Ve=function(dn,Sn,Pe){var le=dn.static,Le=dn.dynamic;function Be(mn){if(mn in le){var Wn=rn.id(le[mn]);ft.optional(function(){xr.shader(Mo[mn],Wn,ft.guessCommand())});var An=te(function(){return Wn});return An.id=Wn,An}if(mn in Le){var In=Le[mn];return Oe(In,function(lr,Hr){var Gr=lr.invoke(Hr,In),Mr=Hr.def(lr.shared.strings,".id(",Gr,")");return ft.optional(function(){Hr(lr.shared.shader,".shader(",Mo[mn],",",Mr,",",lr.command,");")}),Mr})}return null}var en,sn=Be(fi),Ue=Be(ni),ln=null;return Kt(sn)&&Kt(Ue)?(ln=xr.program(Ue.id,sn.id,null,Pe),en=te(function(mn,Wn){return mn.link(ln)})):en=new oe(sn&&sn.thisDep||Ue&&Ue.thisDep,sn&&sn.contextDep||Ue&&Ue.contextDep,sn&&sn.propDep||Ue&&Ue.propDep,function(mn,Wn){var An,In=mn.shared.shader;An=sn?sn.append(mn,Wn):Wn.def(In,".",fi);var lr=In+".program("+(Ue?Ue.append(mn,Wn):Wn.def(In,".",ni))+","+An;return ft.optional(function(){lr+=","+mn.command}),Wn.def(lr+")")}),{frag:sn,vert:Ue,progVar:en,program:ln}}(Ze,0,de);function ke(dn){var Sn=ce[dn];Sn&&(ze[dn]=Sn)}ke("viewport"),ke(ve("scissor.box"));var tn=Object.keys(ze).length>0,De={framebuffer:he,draw:Me,shader:Ve,state:ze,dirty:tn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(De.profile=function(dn){var Sn,Pe=dn.static,le=dn.dynamic;if(Xr in Pe){var Le=!!Pe[Xr];(Sn=te(function(en,sn){return Le})).enable=Le}else if(Xr in le){var Be=le[Xr];Sn=Oe(Be,function(en,sn){return en.invoke(sn,Be)})}return Sn}(Ze),De.uniforms=function(dn,Sn){var Pe=dn.static,le=dn.dynamic,Le={};return Object.keys(Pe).forEach(function(Be){var en,sn=Pe[Be];if(typeof sn=="number"||typeof sn=="boolean")en=te(function(){return sn});else if(typeof sn=="function"){var Ue=sn._reglType;Ue==="texture2d"||Ue==="textureCube"?en=te(function(ln){return ln.link(sn)}):Ue==="framebuffer"||Ue==="framebufferCube"?(ft.command(sn.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Be+'"',Sn.commandStr),en=te(function(ln){return ln.link(sn.color[0])})):ft.commandRaise('invalid data for uniform "'+Be+'"',Sn.commandStr)}else Ht(sn)?en=te(function(ln){return ln.global.def("[",it(sn.length,function(mn){return ft.command(typeof sn[mn]=="number"||typeof sn[mn]=="boolean","invalid uniform "+Be,ln.commandStr),sn[mn]}),"]")}):ft.commandRaise('invalid or missing data for uniform "'+Be+'"',Sn.commandStr);en.value=sn,Le[Be]=en}),Object.keys(le).forEach(function(Be){var en=le[Be];Le[Be]=Oe(en,function(sn,Ue){return sn.invoke(Ue,en)})}),Le}(N,$t),De.drawVAO=De.scopeVAO=function(dn,Sn){var Pe=dn.static,le=dn.dynamic;if(bi in Pe){var Le=Pe[bi];return Le!==null&&wr.getVAO(Le)===null&&(Le=wr.createVAO(Le)),te(function(en){return en.link(wr.getVAO(Le))})}if(bi in le){var Be=le[bi];return Oe(Be,function(en,sn){var Ue=en.invoke(sn,Be);return sn.def(en.shared.vao+".getVAO("+Ue+")")})}return null}(Ze),!De.drawVAO&&Ve.program&&!de&&on.angle_instanced_arrays){var cn=!0,hn=Ve.program.attributes.map(function(dn){var Sn=Te.static[dn];return cn=cn&&!!Sn,Sn});if(cn&&hn.length>0){var nn=wr.getVAO(wr.createVAO(hn));De.drawVAO=new oe(null,null,null,function(dn,Sn){return dn.link(nn)}),De.useVAO=!0}}return de?De.useVAO=!0:De.attributes=function(dn,Sn){var Pe=dn.static,le=dn.dynamic,Le={};return Object.keys(Pe).forEach(function(Be){var en=Pe[Be],sn=rn.id(Be),Ue=new Dr;if(uo(en))Ue.state=1,Ue.buffer=vr.getBuffer(vr.create(en,34962,!1,!0)),Ue.type=0;else{var ln=vr.getBuffer(en);if(ln)Ue.state=1,Ue.buffer=ln,Ue.type=0;else if(ft.command(S(en)==="object"&&en,"invalid data for attribute "+Be,Sn.commandStr),"constant"in en){var mn=en.constant;Ue.buffer="null",Ue.state=2,typeof mn=="number"?Ue.x=mn:(ft.command(Ht(mn)&&mn.length>0&&mn.length<=4,"invalid constant for attribute "+Be,Sn.commandStr),Nr.forEach(function(Mr,oi){oi<mn.length&&(Ue[Mr]=mn[oi])}))}else{ln=uo(en.buffer)?vr.getBuffer(vr.create(en.buffer,34962,!1,!0)):vr.getBuffer(en.buffer),ft.command(!!ln,'missing buffer for attribute "'+Be+'"',Sn.commandStr);var Wn=0|en.offset;ft.command(Wn>=0,'invalid offset for attribute "'+Be+'"',Sn.commandStr);var An=0|en.stride;ft.command(An>=0&&An<256,'invalid stride for attribute "'+Be+'", must be integer betweeen [0, 255]',Sn.commandStr);var In=0|en.size;ft.command(!("size"in en)||In>0&&In<=4,'invalid size for attribute "'+Be+'", must be 1,2,3,4',Sn.commandStr);var lr=!!en.normalized,Hr=0;"type"in en&&(ft.commandParameter(en.type,tt,"invalid type for attribute "+Be,Sn.commandStr),Hr=tt[en.type]);var Gr=0|en.divisor;"divisor"in en&&(ft.command(Gr===0||vi,'cannot specify divisor for attribute "'+Be+'", instancing not supported',Sn.commandStr),ft.command(Gr>=0,'invalid divisor for attribute "'+Be+'"',Sn.commandStr)),ft.optional(function(){var Mr=Sn.commandStr,oi=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(en).forEach(function(ai){ft.command(oi.indexOf(ai)>=0,'unknown parameter "'+ai+'" for attribute pointer "'+Be+'" (valid parameters are '+oi+")",Mr)})}),Ue.buffer=ln,Ue.state=1,Ue.size=In,Ue.normalized=lr,Ue.type=Hr||ln.dtype,Ue.offset=Wn,Ue.stride=An,Ue.divisor=Gr}}Le[Be]=te(function(Mr,oi){var ai=Mr.attribCache;if(sn in ai)return ai[sn];var Zr={isStream:!1};return Object.keys(Ue).forEach(function(Xi){Zr[Xi]=Ue[Xi]}),Ue.buffer&&(Zr.buffer=Mr.link(Ue.buffer),Zr.type=Zr.type||Zr.buffer+".dtype"),ai[sn]=Zr,Zr})}),Object.keys(le).forEach(function(Be){var en=le[Be];Le[Be]=Oe(en,function(sn,Ue){var ln=sn.invoke(Ue,en),mn=sn.shared,Wn=sn.constants,An=mn.isBufferArgs,In=mn.buffer;ft.optional(function(){sn.assert(Ue,ln+"&&(typeof "+ln+'==="object"||typeof '+ln+'==="function")&&('+An+"("+ln+")||"+In+".getBuffer("+ln+")||"+In+".getBuffer("+ln+".buffer)||"+An+"("+ln+'.buffer)||("constant" in '+ln+"&&(typeof "+ln+'.constant==="number"||'+mn.isArrayLike+"("+ln+".constant))))",'invalid dynamic attribute "'+Be+'"')});var lr={isStream:Ue.def(!1)},Hr=new Dr;Hr.state=1,Object.keys(Hr).forEach(function(ai){lr[ai]=Ue.def(""+Hr[ai])});var Gr=lr.buffer,Mr=lr.type;function oi(ai){Ue(lr[ai],"=",ln,".",ai,"|0;")}return Ue("if(",An,"(",ln,")){",lr.isStream,"=true;",Gr,"=",In,".createStream(",34962,",",ln,");",Mr,"=",Gr,".dtype;","}else{",Gr,"=",In,".getBuffer(",ln,");","if(",Gr,"){",Mr,"=",Gr,".dtype;",'}else if("constant" in ',ln,"){",lr.state,"=",2,";","if(typeof "+ln+'.constant === "number"){',lr[Nr[0]],"=",ln,".constant;",Nr.slice(1).map(function(ai){return lr[ai]}).join("="),"=0;","}else{",Nr.map(function(ai,Zr){return lr[ai]+"="+ln+".constant.length>"+Zr+"?"+ln+".constant["+Zr+"]:0;"}).join(""),"}}else{","if(",An,"(",ln,".buffer)){",Gr,"=",In,".createStream(",34962,",",ln,".buffer);","}else{",Gr,"=",In,".getBuffer(",ln,".buffer);","}",Mr,'="type" in ',ln,"?",Wn.glTypes,"[",ln,".type]:",Gr,".dtype;",lr.normalized,"=!!",ln,".normalized;"),oi("size"),oi("offset"),oi("stride"),oi("divisor"),Ue("}}"),Ue.exit("if(",lr.isStream,"){",In,".destroyStream(",Gr,");","}"),lr})}),Le}(Te,$t),De.context=function(dn){var Sn=dn.static,Pe=dn.dynamic,le={};return Object.keys(Sn).forEach(function(Le){var Be=Sn[Le];le[Le]=te(function(en,sn){return typeof Be=="number"||typeof Be=="boolean"?""+Be:en.link(Be)})}),Object.keys(Pe).forEach(function(Le){var Be=Pe[Le];le[Le]=Oe(Be,function(en,sn){return en.invoke(sn,Be)})}),le}(mt),De}function se(Ze,Te,N){var mt=Ze.shared.context,$t=Ze.scope();Object.keys(N).forEach(function(me){Te.save(mt,"."+me);var Zt=N[me].append(Ze,Te);Array.isArray(Zt)?$t(mt,".",me,"=[",Zt.join(),"];"):$t(mt,".",me,"=",Zt,";")}),Te($t)}function Ce(Ze,Te,N,mt){var $t,me=Ze.shared,Zt=me.gl,de=me.framebuffer;ii&&($t=Te.def(me.extensions,".webgl_draw_buffers"));var he,ce=Ze.constants,Me=ce.drawBuffer,ze=ce.backBuffer;he=N?N.append(Ze,Te):Te.def(de,".next"),mt||Te("if(",he,"!==",de,".cur){"),Te("if(",he,"){",Zt,".bindFramebuffer(",36160,",",he,".framebuffer);"),ii&&Te($t,".drawBuffersWEBGL(",Me,"[",he,".colorAttachments.length]);"),Te("}else{",Zt,".bindFramebuffer(",36160,",null);"),ii&&Te($t,".drawBuffersWEBGL(",ze,");"),Te("}",de,".cur=",he,";"),mt||Te("}")}function Ee(Ze,Te,N){var mt=Ze.shared,$t=mt.gl,me=Ze.current,Zt=Ze.next,de=mt.current,he=mt.next,ce=Ze.cond(de,".dirty");Yi.forEach(function(Me){var ze,Ve,ke=ve(Me);if(!(ke in N.state))if(ke in Zt){ze=Zt[ke],Ve=me[ke];var tn=it(Si[ke].length,function(cn){return ce.def(ze,"[",cn,"]")});ce(Ze.cond(tn.map(function(cn,hn){return cn+"!=="+Ve+"["+hn+"]"}).join("||")).then($t,".",Di[ke],"(",tn,");",tn.map(function(cn,hn){return Ve+"["+hn+"]="+cn}).join(";"),";"))}else{ze=ce.def(he,".",ke);var De=Ze.cond(ze,"!==",de,".",ke);ce(De),ke in Bi?De(Ze.cond(ze).then($t,".enable(",Bi[ke],");").else($t,".disable(",Bi[ke],");"),de,".",ke,"=",ze,";"):De($t,".",Di[ke],"(",ze,");",de,".",ke,"=",ze,";")}}),Object.keys(N.state).length===0&&ce(de,".dirty=false;"),Te(ce)}function un(Ze,Te,N,mt){var $t=Ze.shared,me=Ze.current,Zt=$t.current,de=$t.gl;xo(Object.keys(N)).forEach(function(he){var ce=N[he];if(!mt||mt(ce)){var Me=ce.append(Ze,Te);if(Bi[he]){var ze=Bi[he];Kt(ce)?Te(de,Me?".enable(":".disable(",ze,");"):Te(Ze.cond(Me).then(de,".enable(",ze,");").else(de,".disable(",ze,");")),Te(Zt,".",he,"=",Me,";")}else if(Ht(Me)){var Ve=me[he];Te(de,".",Di[he],"(",Me,");",Me.map(function(ke,tn){return Ve+"["+tn+"]="+ke}).join(";"),";")}else Te(de,".",Di[he],"(",Me,");",Zt,".",he,"=",Me,";")}})}function xn(Ze,Te){vi&&(Ze.instancing=Te.def(Ze.shared.extensions,".angle_instanced_arrays"))}function zt(Ze,Te,N,mt,$t){var me,Zt,de,he=Ze.shared,ce=Ze.stats,Me=he.current,ze=he.timer,Ve=N.profile;function ke(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}function tn(dn){dn(me=Te.def(),"=",ke(),";"),typeof $t=="string"?dn(ce,".count+=",$t,";"):dn(ce,".count++;"),Lr&&(mt?dn(Zt=Te.def(),"=",ze,".getNumPendingQueries();"):dn(ze,".beginQuery(",ce,");"))}function De(dn){dn(ce,".cpuTime+=",ke(),"-",me,";"),Lr&&(mt?dn(ze,".pushScopeStats(",Zt,",",ze,".getNumPendingQueries(),",ce,");"):dn(ze,".endQuery();"))}function cn(dn){var Sn=Te.def(Me,".profile");Te(Me,".profile=",dn,";"),Te.exit(Me,".profile=",Sn,";")}if(Ve){if(Kt(Ve))return void(Ve.enable?(tn(Te),De(Te.exit),cn("true")):cn("false"));cn(de=Ve.append(Ze,Te))}else de=Te.def(Me,".profile");var hn=Ze.block();tn(hn),Te("if(",de,"){",hn,"}");var nn=Ze.block();De(nn),Te.exit("if(",de,"){",nn,"}")}function Yt(Ze,Te,N,mt,$t){var me=Ze.shared;mt.forEach(function(Zt){var de,he=Zt.name,ce=N.attributes[he];if(ce){if(!$t(ce))return;de=ce.append(Ze,Te)}else{if(!$t(Qe))return;var Me=Ze.scopeAttrib(he);ft.optional(function(){Ze.assert(Te,Me+".state","missing attribute "+he)}),de={},Object.keys(new Dr).forEach(function(ze){de[ze]=Te.def(Me,".",ze)})}(function(ze,Ve,ke){var tn=me.gl,De=Te.def(ze,".location"),cn=Te.def(me.attributes,"[",De,"]"),hn=ke.state,nn=ke.buffer,dn=[ke.x,ke.y,ke.z,ke.w],Sn=["buffer","normalized","offset","stride"];function Pe(){Te("if(!",cn,".buffer){",tn,".enableVertexAttribArray(",De,");}");var Le,Be=ke.type;if(Le=ke.size?Te.def(ke.size,"||",Ve):Ve,Te("if(",cn,".type!==",Be,"||",cn,".size!==",Le,"||",Sn.map(function(sn){return cn+"."+sn+"!=="+ke[sn]}).join("||"),"){",tn,".bindBuffer(",34962,",",nn,".buffer);",tn,".vertexAttribPointer(",[De,Le,Be,ke.normalized,ke.stride,ke.offset],");",cn,".type=",Be,";",cn,".size=",Le,";",Sn.map(function(sn){return cn+"."+sn+"="+ke[sn]+";"}).join(""),"}"),vi){var en=ke.divisor;Te("if(",cn,".divisor!==",en,"){",Ze.instancing,".vertexAttribDivisorANGLE(",[De,en],");",cn,".divisor=",en,";}")}}function le(){Te("if(",cn,".buffer){",tn,".disableVertexAttribArray(",De,");",cn,".buffer=null;","}if(",Nr.map(function(Le,Be){return cn+"."+Le+"!=="+dn[Be]}).join("||"),"){",tn,".vertexAttrib4f(",De,",",dn,");",Nr.map(function(Le,Be){return cn+"."+Le+"="+dn[Be]+";"}).join(""),"}")}hn===1?Pe():hn===2?le():(Te("if(",hn,"===",1,"){"),Pe(),Te("}else{"),le(),Te("}"))})(Ze.link(Zt),function(ze){switch(ze){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(Zt.info.type),de)})}function Se(Ze,Te,N,mt,$t){for(var me,Zt=Ze.shared,de=Zt.gl,he=0;he<mt.length;++he){var ce,Me=mt[he],ze=Me.name,Ve=Me.info.type,ke=N.uniforms[ze],tn=Ze.link(Me)+".location";if(ke){if(!$t(ke))continue;if(Kt(ke)){var De=ke.value;if(ft.command(De!=null,'missing uniform "'+ze+'"',Ze.commandStr),Ve===35678||Ve===35680){ft.command(typeof De=="function"&&(Ve===35678&&(De._reglType==="texture2d"||De._reglType==="framebuffer")||Ve===35680&&(De._reglType==="textureCube"||De._reglType==="framebufferCube")),"invalid texture for uniform "+ze,Ze.commandStr);var cn=Ze.link(De._texture||De.color[0]._texture);Te(de,".uniform1i(",tn,",",cn+".bind());"),Te.exit(cn,".unbind();")}else if(Ve===35674||Ve===35675||Ve===35676){ft.optional(function(){ft.command(Ht(De),"invalid matrix for uniform "+ze,Ze.commandStr),ft.command(Ve===35674&&De.length===4||Ve===35675&&De.length===9||Ve===35676&&De.length===16,"invalid length for matrix uniform "+ze,Ze.commandStr)});var hn=Ze.global.def("new Float32Array(["+Array.prototype.slice.call(De)+"])"),nn=2;Ve===35675?nn=3:Ve===35676&&(nn=4),Te(de,".uniformMatrix",nn,"fv(",tn,",false,",hn,");")}else{switch(Ve){case 5126:ft.commandType(De,"number","uniform "+ze,Ze.commandStr),me="1f";break;case 35664:ft.command(Ht(De)&&De.length===2,"uniform "+ze,Ze.commandStr),me="2f";break;case 35665:ft.command(Ht(De)&&De.length===3,"uniform "+ze,Ze.commandStr),me="3f";break;case 35666:ft.command(Ht(De)&&De.length===4,"uniform "+ze,Ze.commandStr),me="4f";break;case 35670:ft.commandType(De,"boolean","uniform "+ze,Ze.commandStr),me="1i";break;case 5124:ft.commandType(De,"number","uniform "+ze,Ze.commandStr),me="1i";break;case 35671:case 35667:ft.command(Ht(De)&&De.length===2,"uniform "+ze,Ze.commandStr),me="2i";break;case 35672:case 35668:ft.command(Ht(De)&&De.length===3,"uniform "+ze,Ze.commandStr),me="3i";break;case 35673:case 35669:ft.command(Ht(De)&&De.length===4,"uniform "+ze,Ze.commandStr),me="4i"}Te(de,".uniform",me,"(",tn,",",Ht(De)?Array.prototype.slice.call(De):De,");")}continue}ce=ke.append(Ze,Te)}else{if(!$t(Qe))continue;ce=Te.def(Zt.uniforms,"[",rn.id(ze),"]")}Ve===35678?(ft(!Array.isArray(ce),"must specify a scalar prop for textures"),Te("if(",ce,"&&",ce,'._reglType==="framebuffer"){',ce,"=",ce,".color[0];","}")):Ve===35680&&(ft(!Array.isArray(ce),"must specify a scalar prop for cube maps"),Te("if(",ce,"&&",ce,'._reglType==="framebufferCube"){',ce,"=",ce,".color[0];","}")),ft.optional(function(){function Le(Ue,ln){Ze.assert(Te,Ue,'bad data or missing for uniform "'+ze+'".  '+ln)}function Be(Ue){ft(!Array.isArray(ce),"must not specify an array type for uniform"),Le("typeof "+ce+'==="'+Ue+'"',"invalid type, expected "+Ue)}function en(Ue,ln){Array.isArray(ce)?ft(ce.length===Ue,"must have length "+Ue):Le(Zt.isArrayLike+"("+ce+")&&"+ce+".length==="+Ue,"invalid vector, should have length "+Ue,Ze.commandStr)}function sn(Ue){ft(!Array.isArray(ce),"must not specify a value type"),Le("typeof "+ce+'==="function"&&'+ce+'._reglType==="texture'+(Ue===3553?"2d":"Cube")+'"',"invalid texture type",Ze.commandStr)}switch(Ve){case 5124:Be("number");break;case 35667:en(2);break;case 35668:en(3);break;case 35669:en(4);break;case 5126:Be("number");break;case 35664:en(2);break;case 35665:en(3);break;case 35666:en(4);break;case 35670:Be("boolean");break;case 35671:en(2);break;case 35672:en(3);break;case 35673:case 35674:en(4);break;case 35675:en(9);break;case 35676:en(16);break;case 35678:sn(3553);break;case 35680:sn(34067)}});var dn=1;switch(Ve){case 35678:case 35680:var Sn=Te.def(ce,"._texture");Te(de,".uniform1i(",tn,",",Sn,".bind());"),Te.exit(Sn,".unbind();");continue;case 5124:case 35670:me="1i";break;case 35667:case 35671:me="2i",dn=2;break;case 35668:case 35672:me="3i",dn=3;break;case 35669:case 35673:me="4i",dn=4;break;case 5126:me="1f";break;case 35664:me="2f",dn=2;break;case 35665:me="3f",dn=3;break;case 35666:me="4f",dn=4;break;case 35674:me="Matrix2fv";break;case 35675:me="Matrix3fv";break;case 35676:me="Matrix4fv"}if(Te(de,".uniform",me,"(",tn,","),me.charAt(0)==="M"){var Pe=Math.pow(Ve-35674+2,2),le=Ze.global.def("new Float32Array(",Pe,")");Array.isArray(ce)?Te("false,(",it(Pe,function(Le){return le+"["+Le+"]="+ce[Le]}),",",le,")"):Te("false,(Array.isArray(",ce,")||",ce," instanceof Float32Array)?",ce,":(",it(Pe,function(Le){return le+"["+Le+"]="+ce+"["+Le+"]"}),",",le,")")}else dn>1?Te(it(dn,function(Le){return Array.isArray(ce)?ce[Le]:ce+"["+Le+"]"})):(ft(!Array.isArray(ce),"uniform value must not be an array"),Te(ce));Te(");")}}function Wt(Ze,Te,N,mt){var $t=Ze.shared,me=$t.gl,Zt=$t.draw,de=mt.draw,he=function(){var dn,Sn=de.elements,Pe=Te;return Sn?((Sn.contextDep&&mt.contextDynamic||Sn.propDep)&&(Pe=N),dn=Sn.append(Ze,Pe)):dn=Pe.def(Zt,".",$r),dn&&Pe("if("+dn+")"+me+".bindBuffer(34963,"+dn+".buffer.buffer);"),dn}();function ce(dn){var Sn=de[dn];return Sn?Sn.contextDep&&mt.contextDynamic||Sn.propDep?Sn.append(Ze,N):Sn.append(Ze,Te):Te.def(Zt,".",dn)}var Me,ze,Ve=ce(ci),ke=ce(gi),tn=function(){var dn,Sn=de.count,Pe=Te;return Sn?((Sn.contextDep&&mt.contextDynamic||Sn.propDep)&&(Pe=N),dn=Sn.append(Ze,Pe),ft.optional(function(){Sn.MISSING&&Ze.assert(Te,"false","missing vertex count"),Sn.DYNAMIC&&Ze.assert(Pe,dn+">=0","missing vertex count")})):(dn=Pe.def(Zt,".",Qr),ft.optional(function(){Ze.assert(Pe,dn+">=0","missing vertex count")})),dn}();if(typeof tn=="number"){if(tn===0)return}else N("if(",tn,"){"),N.exit("}");vi&&(Me=ce(Oi),ze=Ze.instancing);var De=he+".type",cn=de.elements&&Kt(de.elements);function hn(){function dn(){N(ze,".drawElementsInstancedANGLE(",[Ve,tn,De,ke+"<<(("+De+"-5121)>>1)",Me],");")}function Sn(){N(ze,".drawArraysInstancedANGLE(",[Ve,ke,tn,Me],");")}he?cn?dn():(N("if(",he,"){"),dn(),N("}else{"),Sn(),N("}")):Sn()}function nn(){function dn(){N(me+".drawElements("+[Ve,tn,De,ke+"<<(("+De+"-5121)>>1)"]+");")}function Sn(){N(me+".drawArrays("+[Ve,ke,tn]+");")}he?cn?dn():(N("if(",he,"){"),dn(),N("}else{"),Sn(),N("}")):Sn()}vi&&(typeof Me!="number"||Me>=0)?typeof Me=="string"?(N("if(",Me,">0){"),hn(),N("}else if(",Me,"<0){"),nn(),N("}")):hn():nn()}function ue(Ze,Te,N,mt,$t){var me=Jt(),Zt=me.proc("body",$t);return ft.optional(function(){me.commandStr=Te.commandStr,me.command=me.link(Te.commandStr)}),vi&&(me.instancing=Zt.def(me.shared.extensions,".angle_instanced_arrays")),Ze(me,Zt,N,mt),me.compile().body}function vn(Ze,Te,N,mt){xn(Ze,Te),N.useVAO?N.drawVAO?Te(Ze.shared.vao,".setVAO(",N.drawVAO.append(Ze,Te),");"):Te(Ze.shared.vao,".setVAO(",Ze.shared.vao,".targetVAO);"):(Te(Ze.shared.vao,".setVAO(null);"),Yt(Ze,Te,N,mt.attributes,function(){return!0})),Se(Ze,Te,N,mt.uniforms,function(){return!0}),Wt(Ze,Te,Te,N)}function Dn(Ze,Te,N,mt){function $t(){return!0}Ze.batchId="a1",xn(Ze,Te),Yt(Ze,Te,N,mt.attributes,$t),Se(Ze,Te,N,mt.uniforms,$t),Wt(Ze,Te,Te,N)}function zn(Ze,Te,N,mt){xn(Ze,Te);var $t=N.contextDep,me=Te.def(),Zt=Te.def();Ze.shared.props=Zt,Ze.batchId=me;var de=Ze.scope(),he=Ze.scope();function ce(De){return De.contextDep&&$t||De.propDep}function Me(De){return!ce(De)}if(Te(de.entry,"for(",me,"=0;",me,"<","a1",";++",me,"){",Zt,"=","a0","[",me,"];",he,"}",de.exit),N.needsContext&&se(Ze,he,N.context),N.needsFramebuffer&&Ce(Ze,he,N.framebuffer),un(Ze,he,N.state,ce),N.profile&&ce(N.profile)&&zt(Ze,he,N,!1,!0),mt)N.useVAO?N.drawVAO?ce(N.drawVAO)?he(Ze.shared.vao,".setVAO(",N.drawVAO.append(Ze,he),");"):de(Ze.shared.vao,".setVAO(",N.drawVAO.append(Ze,de),");"):de(Ze.shared.vao,".setVAO(",Ze.shared.vao,".targetVAO);"):(de(Ze.shared.vao,".setVAO(null);"),Yt(Ze,de,N,mt.attributes,Me),Yt(Ze,he,N,mt.attributes,ce)),Se(Ze,de,N,mt.uniforms,Me),Se(Ze,he,N,mt.uniforms,ce),Wt(Ze,de,he,N);else{var ze=Ze.global.def("{}"),Ve=N.shader.progVar.append(Ze,he),ke=he.def(Ve,".id"),tn=he.def(ze,"[",ke,"]");he(Ze.shared.gl,".useProgram(",Ve,".program);","if(!",tn,"){",tn,"=",ze,"[",ke,"]=",Ze.link(function(De){return ue(Dn,Ze,N,De,2)}),"(",Ve,");}",tn,".call(this,a0[",me,"],",me,");")}}function _n(Ze,Te,N){var mt=Te.static[N];if(mt&&function(Me){if(S(Me)==="object"&&!Ht(Me)){for(var ze=Object.keys(Me),Ve=0;Ve<ze.length;++Ve)if(ut.isDynamic(Me[ze[Ve]]))return!0;return!1}}(mt)){var $t=Ze.global,me=Object.keys(mt),Zt=!1,de=!1,he=!1,ce=Ze.global.def("{}");me.forEach(function(Me){var ze=mt[Me];if(ut.isDynamic(ze)){typeof ze=="function"&&(ze=mt[Me]=ut.unbox(ze));var Ve=Oe(ze,null);Zt=Zt||Ve.thisDep,he=he||Ve.propDep,de=de||Ve.contextDep}else{switch($t(ce,".",Me,"="),S(ze)){case"number":$t(ze);break;case"string":$t('"',ze,'"');break;case"object":Array.isArray(ze)&&$t("[",ze.join(),"]");break;default:$t(Ze.link(ze))}$t(";")}}),Te.dynamic[N]=new ut.DynamicVariable(4,{thisDep:Zt,contextDep:de,propDep:he,ref:ce,append:function(ze,Ve){me.forEach(function(ke){var tn=mt[ke];if(ut.isDynamic(tn)){var De=ze.invoke(Ve,tn);Ve(ce,".",ke,"=",De,";")}})}}),delete Te.static[N]}}return{next:Ui,current:Si,procs:function(){var Ze=Jt(),Te=Ze.proc("poll"),N=Ze.proc("refresh"),mt=Ze.block();Te(mt),N(mt);var $t,me=Ze.shared,Zt=me.gl,de=me.next,he=me.current;mt(he,".dirty=false;"),Ce(Ze,Te),Ce(Ze,N,null,!0),vi&&($t=Ze.link(vi)),on.oes_vertex_array_object&&N(Ze.link(on.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var ce=0;ce<$n.maxAttributes;++ce){var Me=N.def(me.attributes,"[",ce,"]"),ze=Ze.cond(Me,".buffer");ze.then(Zt,".enableVertexAttribArray(",ce,");",Zt,".bindBuffer(",34962,",",Me,".buffer.buffer);",Zt,".vertexAttribPointer(",ce,",",Me,".size,",Me,".type,",Me,".normalized,",Me,".stride,",Me,".offset);").else(Zt,".disableVertexAttribArray(",ce,");",Zt,".vertexAttrib4f(",ce,",",Me,".x,",Me,".y,",Me,".z,",Me,".w);",Me,".buffer=null;"),N(ze),vi&&N($t,".vertexAttribDivisorANGLE(",ce,",",Me,".divisor);")}return N(Ze.shared.vao,".currentVAO=null;",Ze.shared.vao,".setVAO(",Ze.shared.vao,".targetVAO);"),Object.keys(Bi).forEach(function(Ve){var ke=Bi[Ve],tn=mt.def(de,".",Ve),De=Ze.block();De("if(",tn,"){",Zt,".enable(",ke,")}else{",Zt,".disable(",ke,")}",he,".",Ve,"=",tn,";"),N(De),Te("if(",tn,"!==",he,".",Ve,"){",De,"}")}),Object.keys(Di).forEach(function(Ve){var ke,tn,De=Di[Ve],cn=Si[Ve],hn=Ze.block();if(hn(Zt,".",De,"("),Ht(cn)){var nn=cn.length;ke=Ze.global.def(de,".",Ve),tn=Ze.global.def(he,".",Ve),hn(it(nn,function(dn){return ke+"["+dn+"]"}),");",it(nn,function(dn){return tn+"["+dn+"]="+ke+"["+dn+"];"}).join("")),Te("if(",it(nn,function(dn){return ke+"["+dn+"]!=="+tn+"["+dn+"]"}).join("||"),"){",hn,"}")}else ke=mt.def(de,".",Ve),tn=mt.def(he,".",Ve),hn(ke,");",he,".",Ve,"=",ke,";"),Te("if(",ke,"!==",tn,"){",hn,"}");N(hn)}),Ze.compile()}(),compile:function(Te,N,mt,$t,me){var Zt=Jt();Zt.stats=Zt.link(me),Object.keys(N.static).forEach(function(he){_n(Zt,N,he)}),io.forEach(function(he){_n(Zt,Te,he)});var de=ie(Te,N,mt,$t,Zt);return function(he,ce){var Me=he.proc("draw",1);xn(he,Me),se(he,Me,ce.context),Ce(he,Me,ce.framebuffer),Ee(he,Me,ce),un(he,Me,ce.state),zt(he,Me,ce,!1,!0);var ze=ce.shader.progVar.append(he,Me);if(Me(he.shared.gl,".useProgram(",ze,".program);"),ce.shader.program)vn(he,Me,ce,ce.shader.program);else{Me(he.shared.vao,".setVAO(null);");var Ve=he.global.def("{}"),ke=Me.def(ze,".id"),tn=Me.def(Ve,"[",ke,"]");Me(he.cond(tn).then(tn,".call(this,a0);").else(tn,"=",Ve,"[",ke,"]=",he.link(function(De){return ue(vn,he,ce,De,1)}),"(",ze,");",tn,".call(this,a0);"))}Object.keys(ce.state).length>0&&Me(he.shared.current,".dirty=true;")}(Zt,de),function(he,ce){var Me=he.proc("scope",3);he.batchId="a2";var ze=he.shared,Ve=ze.current;function ke(tn){var De=ce.shader[tn];De&&Me.set(ze.shader,"."+tn,De.append(he,Me))}se(he,Me,ce.context),ce.framebuffer&&ce.framebuffer.append(he,Me),xo(Object.keys(ce.state)).forEach(function(tn){var De=ce.state[tn].append(he,Me);Ht(De)?De.forEach(function(cn,hn){Me.set(he.next[tn],"["+hn+"]",cn)}):Me.set(ze.next,"."+tn,De)}),zt(he,Me,ce,!0,!0),[$r,gi,Qr,Oi,ci].forEach(function(tn){var De=ce.draw[tn];De&&Me.set(ze.draw,"."+tn,""+De.append(he,Me))}),Object.keys(ce.uniforms).forEach(function(tn){var De=ce.uniforms[tn].append(he,Me);Array.isArray(De)&&(De="["+De.join()+"]"),Me.set(ze.uniforms,"["+rn.id(tn)+"]",De)}),Object.keys(ce.attributes).forEach(function(tn){var De=ce.attributes[tn].append(he,Me),cn=he.scopeAttrib(tn);Object.keys(new Dr).forEach(function(hn){Me.set(cn,"."+hn,De[hn])})}),ce.scopeVAO&&Me.set(ze.vao,".targetVAO",ce.scopeVAO.append(he,Me)),ke(ni),ke(fi),Object.keys(ce.state).length>0&&(Me(Ve,".dirty=true;"),Me.exit(Ve,".dirty=true;")),Me("a1(",he.shared.context,",a0,",he.batchId,");")}(Zt,de),function(he,ce){var Me=he.proc("batch",2);he.batchId="0",xn(he,Me);var ze=!1,Ve=!0;Object.keys(ce.context).forEach(function(Pe){ze=ze||ce.context[Pe].propDep}),ze||(se(he,Me,ce.context),Ve=!1);var ke=ce.framebuffer,tn=!1;function De(Pe){return Pe.contextDep&&ze||Pe.propDep}ke?(ke.propDep?ze=tn=!0:ke.contextDep&&ze&&(tn=!0),tn||Ce(he,Me,ke)):Ce(he,Me,null),ce.state.viewport&&ce.state.viewport.propDep&&(ze=!0),Ee(he,Me,ce),un(he,Me,ce.state,function(Pe){return!De(Pe)}),ce.profile&&De(ce.profile)||zt(he,Me,ce,!1,"a1"),ce.contextDep=ze,ce.needsContext=Ve,ce.needsFramebuffer=tn;var cn=ce.shader.progVar;if(cn.contextDep&&ze||cn.propDep)zn(he,Me,ce,null);else{var hn=cn.append(he,Me);if(Me(he.shared.gl,".useProgram(",hn,".program);"),ce.shader.program)zn(he,Me,ce,ce.shader.program);else{Me(he.shared.vao,".setVAO(null);");var nn=he.global.def("{}"),dn=Me.def(hn,".id"),Sn=Me.def(nn,"[",dn,"]");Me(he.cond(Sn).then(Sn,".call(this,a0,a1);").else(Sn,"=",nn,"[",dn,"]=",he.link(function(Pe){return ue(zn,he,ce,Pe,2)}),"(",hn,");",Sn,".call(this,a0,a1);"))}}Object.keys(ce.state).length>0&&Me(he.shared.current,".dirty=true;")}(Zt,de),j(Zt.compile(),{destroy:function(){de.shader.program.destroy()}})}}}var Vn=function(rn,on){if(!on.ext_disjoint_timer_query)return null;var $n=[];function vr(Lr){$n.push(Lr)}var ar=[];function rr(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Fr=[];function Ar(Lr){Fr.push(Lr)}var wr=[];function xr(Lr,Pr,Dr){var ri=Fr.pop()||new rr;ri.startQueryIndex=Lr,ri.endQueryIndex=Pr,ri.sum=0,ri.stats=Dr,wr.push(ri)}var Er=[],Ir=[];return{beginQuery:function(Pr){var Dr=$n.pop()||on.ext_disjoint_timer_query.createQueryEXT();on.ext_disjoint_timer_query.beginQueryEXT(35007,Dr),ar.push(Dr),xr(ar.length-1,ar.length,Pr)},endQuery:function(){on.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:xr,update:function(){var Pr,Dr,ri=ar.length;if(ri!==0){Ir.length=Math.max(Ir.length,ri+1),Er.length=Math.max(Er.length,ri+1),Er[0]=0,Ir[0]=0;var vi=0;for(Pr=0,Dr=0;Dr<ar.length;++Dr){var ii=ar[Dr];on.ext_disjoint_timer_query.getQueryObjectEXT(ii,34919)?(vi+=on.ext_disjoint_timer_query.getQueryObjectEXT(ii,34918),vr(ii)):ar[Pr++]=ii,Er[Dr+1]=vi,Ir[Dr+1]=Pr}for(ar.length=Pr,Pr=0,Dr=0;Dr<wr.length;++Dr){var Si=wr[Dr],Ui=Si.startQueryIndex,Yi=Si.endQueryIndex;Si.sum+=Er[Yi]-Er[Ui];var Bi=Ir[Ui],Di=Ir[Yi];Di===Bi?(Si.stats.gpuTime+=Si.sum/1e6,Ar(Si)):(Si.startQueryIndex=Bi,Si.endQueryIndex=Di,wr[Pr++]=Si)}wr.length=Pr}},getNumPendingQueries:function(){return ar.length},clear:function(){$n.push.apply($n,ar);for(var Pr=0;Pr<$n.length;Pr++)on.ext_disjoint_timer_query.deleteQueryEXT($n[Pr]);ar.length=0,$n.length=0},restore:function(){ar.length=0,$n.length=0}}};function Xn($e,rn){for(var on=0;on<$e.length;++on)if($e[on]===rn)return on;return-1}return function($e){var rn=st($e);if(!rn)return null;var on=rn.gl,$n=on.getContextAttributes(),vr=on.isContextLost(),ar=function(Te,N){var mt={};function $t(de){ft.type(de,"string","extension name must be string");var he,ce=de.toLowerCase();try{he=mt[ce]=Te.getExtension(ce)}catch(Me){}return!!he}for(var me=0;me<N.extensions.length;++me){var Zt=N.extensions[me];if(!$t(Zt))return N.onDestroy(),N.onDone('"'+Zt+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return N.optionalExtensions.forEach($t),{extensions:mt,restore:function(){Object.keys(mt).forEach(function(he){if(mt[he]&&!$t(he))throw new Error("(regl): error restoring extension "+he)})}}}(on,rn);if(!ar)return null;var rr,Fr,Ar=(rr={"":0},Fr=[""],{id:function(N){var mt=rr[N];return mt||(mt=rr[N]=Fr.length,Fr.push(N),mt)},str:function(N){return Fr[N]}}),wr={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},xr=ar.extensions,Er=Vn(0,xr),Ir=pt(),Lr=on.drawingBufferWidth,Pr=on.drawingBufferHeight,Dr={tick:0,time:0,viewportWidth:Lr,viewportHeight:Pr,framebufferWidth:Lr,framebufferHeight:Pr,drawingBufferWidth:Lr,drawingBufferHeight:Pr,pixelRatio:rn.pixelRatio},ri=function(Te,N){var mt=1;N.ext_texture_filter_anisotropic&&(mt=Te.getParameter(34047));var $t=1,me=1;N.webgl_draw_buffers&&($t=Te.getParameter(34852),me=Te.getParameter(36063));var Zt=!!N.oes_texture_float;if(Zt){var de=Te.createTexture();Te.bindTexture(3553,de),Te.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var he=Te.createFramebuffer();if(Te.bindFramebuffer(36160,he),Te.framebufferTexture2D(36160,36064,3553,de,0),Te.bindTexture(3553,null),Te.checkFramebufferStatus(36160)!==36053)Zt=!1;else{Te.viewport(0,0,1,1),Te.clearColor(1,0,0,1),Te.clear(16384);var ce=H.allocType(5126,4);Te.readPixels(0,0,1,1,6408,5126,ce),Te.getError()?Zt=!1:(Te.deleteFramebuffer(he),Te.deleteTexture(de),Zt=ce[0]===1),H.freeType(ce)}}var Me=!0;if(typeof navigator=="undefined"||!(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var ze=Te.createTexture(),Ve=H.allocType(5121,36);Te.activeTexture(33984),Te.bindTexture(34067,ze),Te.texImage2D(34069,0,6408,3,3,0,6408,5121,Ve),H.freeType(Ve),Te.bindTexture(34067,null),Te.deleteTexture(ze),Me=!Te.getError()}return{colorBits:[Te.getParameter(3410),Te.getParameter(3411),Te.getParameter(3412),Te.getParameter(3413)],depthBits:Te.getParameter(3414),stencilBits:Te.getParameter(3415),subpixelBits:Te.getParameter(3408),extensions:Object.keys(N).filter(function(ke){return!!N[ke]}),maxAnisotropic:mt,maxDrawbuffers:$t,maxColorAttachments:me,pointSizeDims:Te.getParameter(33901),lineWidthDims:Te.getParameter(33902),maxViewportDims:Te.getParameter(3386),maxCombinedTextureUnits:Te.getParameter(35661),maxCubeMapSize:Te.getParameter(34076),maxRenderbufferSize:Te.getParameter(34024),maxTextureUnits:Te.getParameter(34930),maxTextureSize:Te.getParameter(3379),maxAttributes:Te.getParameter(34921),maxVertexUniforms:Te.getParameter(36347),maxVertexTextureUnits:Te.getParameter(35660),maxVaryingVectors:Te.getParameter(36348),maxFragmentUniforms:Te.getParameter(36349),glsl:Te.getParameter(35724),renderer:Te.getParameter(7937),vendor:Te.getParameter(7936),version:Te.getParameter(7938),readFloat:Zt,npotTextureCube:Me}}(on,xr),vi=function(Te,N,mt,$t){var me=0,Zt={};function de(Ve){this.id=me++,this.buffer=Te.createBuffer(),this.type=Ve,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,mt.profile&&(this.stats={size:0})}de.prototype.bind=function(){Te.bindBuffer(this.type,this.buffer)},de.prototype.destroy=function(){ze(this)};var he=[];function ce(Ve,ke,tn){Ve.byteLength=ke.byteLength,Te.bufferData(Ve.type,ke,tn)}function Me(Ve,ke,tn,De,cn,hn){var nn,dn;if(Ve.usage=tn,Array.isArray(ke)){if(Ve.dtype=De||5126,ke.length>0)if(Array.isArray(ke[0])){nn=At(ke);for(var Sn=1,Pe=1;Pe<nn.length;++Pe)Sn*=nn[Pe];Ve.dimension=Sn,ce(Ve,dn=at(ke,nn,Ve.dtype),tn),hn?Ve.persistentData=dn:H.freeType(dn)}else if(typeof ke[0]=="number"){Ve.dimension=cn;var le=H.allocType(Ve.dtype,ke.length);bt(le,ke),ce(Ve,le,tn),hn?Ve.persistentData=le:H.freeType(le)}else A(ke[0])?(Ve.dimension=ke[0].length,Ve.dtype=De||gt(ke[0])||5126,ce(Ve,dn=at(ke,[ke.length,ke[0].length],Ve.dtype),tn),hn?Ve.persistentData=dn:H.freeType(dn)):ft.raise("invalid buffer data")}else if(A(ke))Ve.dtype=De||gt(ke),Ve.dimension=cn,ce(Ve,ke,tn),hn&&(Ve.persistentData=new Uint8Array(new Uint8Array(ke.buffer)));else if(k(ke)){nn=ke.shape;var Le=ke.stride,Be=ke.offset,en=0,sn=0,Ue=0,ln=0;nn.length===1?(en=nn[0],sn=1,Ue=Le[0],ln=0):nn.length===2?(en=nn[0],sn=nn[1],Ue=Le[0],ln=Le[1]):ft.raise("invalid shape"),Ve.dtype=De||gt(ke.data)||5126,Ve.dimension=sn;var mn=H.allocType(Ve.dtype,en*sn);Tt(mn,ke.data,en,sn,Ue,ln,Be),ce(Ve,mn,tn),hn?Ve.persistentData=mn:H.freeType(mn)}else ke instanceof ArrayBuffer?(Ve.dtype=5121,Ve.dimension=cn,ce(Ve,ke,tn),hn&&(Ve.persistentData=new Uint8Array(new Uint8Array(ke)))):ft.raise("invalid buffer data")}function ze(Ve){N.bufferCount--,$t(Ve);var ke=Ve.buffer;ft(ke,"buffer must not be deleted already"),Te.deleteBuffer(ke),Ve.buffer=null,delete Zt[Ve.id]}return mt.profile&&(N.getTotalBufferSize=function(){var Ve=0;return Object.keys(Zt).forEach(function(ke){Ve+=Zt[ke].stats.size}),Ve}),{create:function(ke,tn,De,cn){N.bufferCount++;var hn=new de(tn);function nn(Sn){var Pe=35044,le=null,Le=0,Be=0,en=1;return Array.isArray(Sn)||A(Sn)||k(Sn)||Sn instanceof ArrayBuffer?le=Sn:typeof Sn=="number"?Le=0|Sn:Sn&&(ft.type(Sn,"object","buffer arguments must be an object, a number or an array"),"data"in Sn&&(ft(le===null||Array.isArray(le)||A(le)||k(le),"invalid data for buffer"),le=Sn.data),"usage"in Sn&&(ft.parameter(Sn.usage,ot,"invalid buffer usage"),Pe=ot[Sn.usage]),"type"in Sn&&(ft.parameter(Sn.type,tt,"invalid buffer type"),Be=tt[Sn.type]),"dimension"in Sn&&(ft.type(Sn.dimension,"number","invalid dimension"),en=0|Sn.dimension),"length"in Sn&&(ft.nni(Le,"buffer length must be a nonnegative integer"),Le=0|Sn.length)),hn.bind(),le?Me(hn,le,Pe,Be,en,cn):(Le&&Te.bufferData(hn.type,Le,Pe),hn.dtype=Be||5121,hn.usage=Pe,hn.dimension=en,hn.byteLength=Le),mt.profile&&(hn.stats.size=hn.byteLength*yt[hn.dtype]),nn}function dn(Sn,Pe){ft(Pe+Sn.byteLength<=hn.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Sn.byteLength+" starting from offset "+Pe+" to a buffer of size "+hn.byteLength),Te.bufferSubData(hn.type,Pe,Sn)}return Zt[hn.id]=hn,De||nn(ke),nn._reglType="buffer",nn._buffer=hn,nn.subdata=function(Sn,Pe){var le,Le=0|(Pe||0);if(hn.bind(),A(Sn)||Sn instanceof ArrayBuffer)dn(Sn,Le);else if(Array.isArray(Sn)){if(Sn.length>0)if(typeof Sn[0]=="number"){var Be=H.allocType(hn.dtype,Sn.length);bt(Be,Sn),dn(Be,Le),H.freeType(Be)}else if(Array.isArray(Sn[0])||A(Sn[0])){le=At(Sn);var en=at(Sn,le,hn.dtype);dn(en,Le),H.freeType(en)}else ft.raise("invalid buffer data")}else if(k(Sn)){le=Sn.shape;var sn=Sn.stride,Ue=0,ln=0,mn=0,Wn=0;le.length===1?(Ue=le[0],ln=1,mn=sn[0],Wn=0):le.length===2?(Ue=le[0],ln=le[1],mn=sn[0],Wn=sn[1]):ft.raise("invalid shape");var An=Array.isArray(Sn.data)?hn.dtype:gt(Sn.data),In=H.allocType(An,Ue*ln);Tt(In,Sn.data,Ue,ln,mn,Wn,Sn.offset),dn(In,Le),H.freeType(In)}else ft.raise("invalid data for buffer subdata");return nn},mt.profile&&(nn.stats=hn.stats),nn.destroy=function(){ze(hn)},nn},createStream:function(ke,tn){var De=he.pop();return De||(De=new de(ke)),De.bind(),Me(De,tn,35040,0,1,!1),De},destroyStream:function(ke){he.push(ke)},clear:function(){d(Zt).forEach(ze),he.forEach(ze)},getBuffer:function(ke){return ke&&ke._buffer instanceof de?ke._buffer:null},restore:function(){d(Zt).forEach(function(ke){ke.buffer=Te.createBuffer(),Te.bindBuffer(ke.type,ke.buffer),Te.bufferData(ke.type,ke.persistentData||ke.byteLength,ke.usage)})},_initBuffer:Me}}(on,wr,rn,function(Te){return ii.destroyBuffer(Te)}),ii=function(Te,N,mt,$t,me){for(var Zt=mt.maxAttributes,de=new Array(Zt),he=0;he<Zt;++he)de[he]=new Ji;var ce=0,Me={},ze={Record:Ji,scope:{},state:de,currentVAO:null,targetVAO:null,restore:Ve()?function(){Ve()&&d(Me).forEach(function(De){De.refresh()})}:function(){},createVAO:function(cn){var hn=new tn;function nn(dn){ft(Array.isArray(dn),"arguments to vertex array constructor must be an array"),ft(dn.length<Zt,"too many attributes"),ft(dn.length>0,"must specify at least one attribute");var Sn={},Pe=hn.attributes;Pe.length=dn.length;for(var le=0;le<dn.length;++le){var Le,Be=dn[le],en=Pe[le]=new Ji,sn=Be.data||Be;Array.isArray(sn)||A(sn)||k(sn)?(hn.buffers[le]&&(Le=hn.buffers[le],A(sn)&&Le._buffer.byteLength>=sn.byteLength?Le.subdata(sn):(Le.destroy(),hn.buffers[le]=null)),hn.buffers[le]||(Le=hn.buffers[le]=me.create(Be,34962,!1,!0)),en.buffer=me.getBuffer(Le),en.size=0|en.buffer.dimension,en.normalized=!1,en.type=en.buffer.dtype,en.offset=0,en.stride=0,en.divisor=0,en.state=1,Sn[le]=1):me.getBuffer(Be)?(en.buffer=me.getBuffer(Be),en.size=0|en.buffer.dimension,en.normalized=!1,en.type=en.buffer.dtype,en.offset=0,en.stride=0,en.divisor=0,en.state=1):me.getBuffer(Be.buffer)?(en.buffer=me.getBuffer(Be.buffer),en.size=0|(+Be.size||en.buffer.dimension),en.normalized=!!Be.normalized||!1,"type"in Be?(ft.parameter(Be.type,tt,"invalid buffer type"),en.type=tt[Be.type]):en.type=en.buffer.dtype,en.offset=0|(Be.offset||0),en.stride=0|(Be.stride||0),en.divisor=0|(Be.divisor||0),en.state=1,ft(en.size>=1&&en.size<=4,"size must be between 1 and 4"),ft(en.offset>=0,"invalid offset"),ft(en.stride>=0&&en.stride<=255,"stride must be between 0 and 255"),ft(en.divisor>=0,"divisor must be positive"),ft(!en.divisor||!!N.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Be?(ft(le>0,"first attribute must not be a constant"),en.x=+Be.x||0,en.y=+Be.y||0,en.z=+Be.z||0,en.w=+Be.w||0,en.state=2):ft(!1,"invalid attribute spec for location "+le)}for(var Ue=0;Ue<hn.buffers.length;++Ue)!Sn[Ue]&&hn.buffers[Ue]&&(hn.buffers[Ue].destroy(),hn.buffers[Ue]=null);return hn.refresh(),nn}return $t.vaoCount+=1,nn.destroy=function(){for(var dn=0;dn<hn.buffers.length;++dn)hn.buffers[dn]&&hn.buffers[dn].destroy();hn.buffers.length=0,hn.destroy()},nn._vao=hn,nn._reglType="vao",nn(cn)},getVAO:function(cn){return typeof cn=="function"&&cn._vao?cn._vao:null},destroyBuffer:function(cn){for(var hn=0;hn<de.length;++hn){var nn=de[hn];nn.buffer===cn&&(Te.disableVertexAttribArray(hn),nn.buffer=null)}},setVAO:Ve()?function(De){if(De!==ze.currentVAO){var cn=Ve();De?cn.bindVertexArrayOES(De.vao):cn.bindVertexArrayOES(null),ze.currentVAO=De}}:function(De){if(De!==ze.currentVAO){if(De)De.bindAttrs();else for(var cn=ke(),hn=0;hn<de.length;++hn){var nn=de[hn];nn.buffer?(Te.enableVertexAttribArray(hn),Te.vertexAttribPointer(hn,nn.size,nn.type,nn.normalized,nn.stride,nn.offfset),cn&&nn.divisor&&cn.vertexAttribDivisorANGLE(hn,nn.divisor)):(Te.disableVertexAttribArray(hn),Te.vertexAttrib4f(hn,nn.x,nn.y,nn.z,nn.w))}ze.currentVAO=De}},clear:Ve()?function(){d(Me).forEach(function(De){De.destroy()})}:function(){}};function Ve(){return N.oes_vertex_array_object}function ke(){return N.angle_instanced_arrays}function tn(){this.id=++ce,this.attributes=[];var De=Ve();this.vao=De?De.createVertexArrayOES():null,Me[this.id]=this,this.buffers=[]}return tn.prototype.bindAttrs=function(){for(var De=ke(),cn=this.attributes,hn=0;hn<cn.length;++hn){var nn=cn[hn];nn.buffer?(Te.enableVertexAttribArray(hn),Te.bindBuffer(34962,nn.buffer.buffer),Te.vertexAttribPointer(hn,nn.size,nn.type,nn.normalized,nn.stride,nn.offset),De&&nn.divisor&&De.vertexAttribDivisorANGLE(hn,nn.divisor)):(Te.disableVertexAttribArray(hn),Te.vertexAttrib4f(hn,nn.x,nn.y,nn.z,nn.w))}for(var dn=cn.length;dn<Zt;++dn)Te.disableVertexAttribArray(dn)},tn.prototype.refresh=function(){var De=Ve();De&&(De.bindVertexArrayOES(this.vao),this.bindAttrs(),ze.currentVAO=this)},tn.prototype.destroy=function(){if(this.vao){var De=Ve();this===ze.currentVAO&&(ze.currentVAO=null,De.bindVertexArrayOES(null)),De.deleteVertexArrayOES(this.vao),this.vao=null}Me[this.id]&&(delete Me[this.id],$t.vaoCount-=1)},ze}(on,xr,ri,wr,vi),Si=function(Te,N,mt,$t){var me={},Zt=0,de={uint8:5121,uint16:5123};function he(Ve){this.id=Zt++,me[this.id]=this,this.buffer=Ve,this.primType=4,this.vertCount=0,this.type=0}N.oes_element_index_uint&&(de.uint32=5125),he.prototype.bind=function(){this.buffer.bind()};var ce=[];function Me(Ve,ke,tn,De,cn,hn,nn){var dn;if(Ve.buffer.bind(),ke){var Sn=nn;nn||A(ke)&&(!k(ke)||A(ke.data))||(Sn=N.oes_element_index_uint?5125:5123),mt._initBuffer(Ve.buffer,ke,tn,Sn,3)}else Te.bufferData(34963,hn,tn),Ve.buffer.dtype=dn||5121,Ve.buffer.usage=tn,Ve.buffer.dimension=3,Ve.buffer.byteLength=hn;if(dn=nn,!nn){switch(Ve.buffer.dtype){case 5121:case 5120:dn=5121;break;case 5123:case 5122:dn=5123;break;case 5125:case 5124:dn=5125;break;default:ft.raise("unsupported type for element array")}Ve.buffer.dtype=dn}Ve.type=dn,ft(dn!==5125||!!N.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Pe=cn;Pe<0&&(Pe=Ve.buffer.byteLength,dn===5123?Pe>>=1:dn===5125&&(Pe>>=2)),Ve.vertCount=Pe;var le=De;if(De<0){le=4;var Le=Ve.buffer.dimension;Le===1&&(le=0),Le===2&&(le=1),Le===3&&(le=4)}Ve.primType=le}function ze(Ve){$t.elementsCount--,ft(Ve.buffer!==null,"must not double destroy elements"),delete me[Ve.id],Ve.buffer.destroy(),Ve.buffer=null}return{create:function(ke,tn){var De=mt.create(null,34963,!0),cn=new he(De._buffer);function hn(nn){if(nn)if(typeof nn=="number")De(nn),cn.primType=4,cn.vertCount=0|nn,cn.type=5121;else{var dn=null,Sn=35044,Pe=-1,le=-1,Le=0,Be=0;Array.isArray(nn)||A(nn)||k(nn)?dn=nn:(ft.type(nn,"object","invalid arguments for elements"),"data"in nn&&(dn=nn.data,ft(Array.isArray(dn)||A(dn)||k(dn),"invalid data for element buffer")),"usage"in nn&&(ft.parameter(nn.usage,ot,"invalid element buffer usage"),Sn=ot[nn.usage]),"primitive"in nn&&(ft.parameter(nn.primitive,Dt,"invalid element buffer primitive"),Pe=Dt[nn.primitive]),"count"in nn&&(ft(typeof nn.count=="number"&&nn.count>=0,"invalid vertex count for elements"),le=0|nn.count),"type"in nn&&(ft.parameter(nn.type,de,"invalid buffer type"),Be=de[nn.type]),"length"in nn?Le=0|nn.length:(Le=le,Be===5123||Be===5122?Le*=2:Be!==5125&&Be!==5124||(Le*=4))),Me(cn,dn,Sn,Pe,le,Le,Be)}else De(),cn.primType=4,cn.vertCount=0,cn.type=5121;return hn}return $t.elementsCount++,hn(ke),hn._reglType="elements",hn._elements=cn,hn.subdata=function(nn,dn){return De.subdata(nn,dn),hn},hn.destroy=function(){ze(cn)},hn},createStream:function(ke){var tn=ce.pop();return tn||(tn=new he(mt.create(null,34963,!0,!1)._buffer)),Me(tn,ke,35040,-1,-1,0,0),tn},destroyStream:function(ke){ce.push(ke)},getElements:function(ke){return typeof ke=="function"&&ke._elements instanceof he?ke._elements:null},clear:function(){d(me).forEach(ze)}}}(on,xr,vi,wr),Ui=function(Te,N,mt,$t){var me={},Zt={};function de(De,cn,hn,nn){this.name=De,this.id=cn,this.location=hn,this.info=nn}function he(De,cn){for(var hn=0;hn<De.length;++hn)if(De[hn].id===cn.id)return void(De[hn].location=cn.location);De.push(cn)}function ce(De,cn,hn){var nn=De===35632?me:Zt,dn=nn[cn];if(!dn){var Sn=N.str(cn);dn=Te.createShader(De),Te.shaderSource(dn,Sn),Te.compileShader(dn),ft.shaderError(Te,dn,Sn,De,hn),nn[cn]=dn}return dn}var Me={},ze=[],Ve=0;function ke(De,cn){this.id=Ve++,this.fragId=De,this.vertId=cn,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,$t.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function tn(De,cn,hn){var nn,dn,Sn=ce(35632,De.fragId),Pe=ce(35633,De.vertId),le=De.program=Te.createProgram();if(Te.attachShader(le,Sn),Te.attachShader(le,Pe),hn)for(nn=0;nn<hn.length;++nn){var Le=hn[nn];Te.bindAttribLocation(le,Le[0],Le[1])}Te.linkProgram(le),ft.linkError(Te,le,N.str(De.fragId),N.str(De.vertId),cn);var Be=Te.getProgramParameter(le,35718);$t.profile&&(De.stats.uniformsCount=Be);var en=De.uniforms;for(nn=0;nn<Be;++nn)if(dn=Te.getActiveUniform(le,nn))if(dn.size>1)for(var sn=0;sn<dn.size;++sn){var Ue=dn.name.replace("[0]","["+sn+"]");he(en,new de(Ue,N.id(Ue),Te.getUniformLocation(le,Ue),dn))}else he(en,new de(dn.name,N.id(dn.name),Te.getUniformLocation(le,dn.name),dn));var ln=Te.getProgramParameter(le,35721);$t.profile&&(De.stats.attributesCount=ln);var mn=De.attributes;for(nn=0;nn<ln;++nn)(dn=Te.getActiveAttrib(le,nn))&&he(mn,new de(dn.name,N.id(dn.name),Te.getAttribLocation(le,dn.name),dn))}return $t.profile&&(mt.getMaxUniformsCount=function(){var De=0;return ze.forEach(function(cn){cn.stats.uniformsCount>De&&(De=cn.stats.uniformsCount)}),De},mt.getMaxAttributesCount=function(){var De=0;return ze.forEach(function(cn){cn.stats.attributesCount>De&&(De=cn.stats.attributesCount)}),De}),{clear:function(){var cn=Te.deleteShader.bind(Te);d(me).forEach(cn),me={},d(Zt).forEach(cn),Zt={},ze.forEach(function(hn){Te.deleteProgram(hn.program)}),ze.length=0,Me={},mt.shaderCount=0},program:function(cn,hn,nn,dn){ft.command(cn>=0,"missing vertex shader",nn),ft.command(hn>=0,"missing fragment shader",nn);var Sn=Me[hn];Sn||(Sn=Me[hn]={});var Pe=Sn[cn];if(Pe&&(Pe.refCount++,!dn))return Pe;var le=new ke(hn,cn);return mt.shaderCount++,tn(le,nn,dn),Pe||(Sn[cn]=le),ze.push(le),j(le,{destroy:function(){if(le.refCount--,le.refCount<=0){Te.deleteProgram(le.program);var Be=ze.indexOf(le);ze.splice(Be,1),mt.shaderCount--}Sn[le.vertId].refCount<=0&&(Te.deleteShader(Zt[le.vertId]),delete Zt[le.vertId],delete Me[le.fragId][le.vertId]),Object.keys(Me[le.fragId]).length||(Te.deleteShader(me[le.fragId]),delete me[le.fragId],delete Me[le.fragId])}})},restore:function(){me={},Zt={};for(var cn=0;cn<ze.length;++cn)tn(ze[cn],null,ze[cn].attributes.map(function(hn){return[hn.location,hn.name]}))},shader:ce,frag:-1,vert:-1}}(on,Ar,wr,rn),Yi=to(on,xr,ri,function(){ve.procs.poll()},Dr,wr,rn),Bi=function(Te,N,mt,$t,me){var Zt={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};N.ext_srgb&&(Zt.srgba=35907),N.ext_color_buffer_half_float&&(Zt.rgba16f=34842,Zt.rgb16f=34843),N.webgl_color_buffer_float&&(Zt.rgba32f=34836);var de=[];Object.keys(Zt).forEach(function(Ve){var ke=Zt[Ve];de[ke]=Ve});var he=0,ce={};function Me(Ve){this.id=he++,this.refCount=1,this.renderbuffer=Ve,this.format=32854,this.width=0,this.height=0,me.profile&&(this.stats={size:0})}function ze(Ve){var ke=Ve.renderbuffer;ft(ke,"must not double destroy renderbuffer"),Te.bindRenderbuffer(36161,null),Te.deleteRenderbuffer(ke),Ve.renderbuffer=null,Ve.refCount=0,delete ce[Ve.id],$t.renderbufferCount--}return Me.prototype.decRef=function(){--this.refCount<=0&&ze(this)},me.profile&&($t.getTotalRenderbufferSize=function(){var Ve=0;return Object.keys(ce).forEach(function(ke){Ve+=ce[ke].stats.size}),Ve}),{create:function(ke,tn){var De=new Me(Te.createRenderbuffer());function cn(hn,nn){var dn=0,Sn=0,Pe=32854;if(S(hn)==="object"&&hn){var le=hn;if("shape"in le){var Le=le.shape;ft(Array.isArray(Le)&&Le.length>=2,"invalid renderbuffer shape"),dn=0|Le[0],Sn=0|Le[1]}else"radius"in le&&(dn=Sn=0|le.radius),"width"in le&&(dn=0|le.width),"height"in le&&(Sn=0|le.height);"format"in le&&(ft.parameter(le.format,Zt,"invalid renderbuffer format"),Pe=Zt[le.format])}else typeof hn=="number"?(dn=0|hn,Sn=typeof nn=="number"?0|nn:dn):hn?ft.raise("invalid arguments to renderbuffer constructor"):dn=Sn=1;if(ft(dn>0&&Sn>0&&dn<=mt.maxRenderbufferSize&&Sn<=mt.maxRenderbufferSize,"invalid renderbuffer size"),dn!==De.width||Sn!==De.height||Pe!==De.format)return cn.width=De.width=dn,cn.height=De.height=Sn,De.format=Pe,Te.bindRenderbuffer(36161,De.renderbuffer),Te.renderbufferStorage(36161,Pe,dn,Sn),ft(Te.getError()===0,"invalid render buffer format"),me.profile&&(De.stats.size=Ti(De.format,De.width,De.height)),cn.format=de[De.format],cn}return ce[De.id]=De,$t.renderbufferCount++,cn(ke,tn),cn.resize=function(hn,nn){var dn=0|hn,Sn=0|nn||dn;return dn===De.width&&Sn===De.height||(ft(dn>0&&Sn>0&&dn<=mt.maxRenderbufferSize&&Sn<=mt.maxRenderbufferSize,"invalid renderbuffer size"),cn.width=De.width=dn,cn.height=De.height=Sn,Te.bindRenderbuffer(36161,De.renderbuffer),Te.renderbufferStorage(36161,De.format,dn,Sn),ft(Te.getError()===0,"invalid render buffer format"),me.profile&&(De.stats.size=Ti(De.format,De.width,De.height))),cn},cn._reglType="renderbuffer",cn._renderbuffer=De,me.profile&&(cn.stats=De.stats),cn.destroy=function(){De.decRef()},cn},clear:function(){d(ce).forEach(ze)},restore:function(){d(ce).forEach(function(ke){ke.renderbuffer=Te.createRenderbuffer(),Te.bindRenderbuffer(36161,ke.renderbuffer),Te.renderbufferStorage(36161,ke.format,ke.width,ke.height)}),Te.bindRenderbuffer(36161,null)}}}(on,xr,ri,wr,rn),Di=function(Te,N,mt,$t,me,Zt){var de={cur:null,next:null,dirty:!1,setFBO:null},he=["rgba"],ce=["rgba4","rgb565","rgb5 a1"];N.ext_srgb&&ce.push("srgba"),N.ext_color_buffer_half_float&&ce.push("rgba16f","rgb16f"),N.webgl_color_buffer_float&&ce.push("rgba32f");var Me=["uint8"];function ze(sn,Ue,ln){this.target=sn,this.texture=Ue,this.renderbuffer=ln;var mn=0,Wn=0;Ue?(mn=Ue.width,Wn=Ue.height):ln&&(mn=ln.width,Wn=ln.height),this.width=mn,this.height=Wn}function Ve(sn){sn&&(sn.texture&&sn.texture._texture.decRef(),sn.renderbuffer&&sn.renderbuffer._renderbuffer.decRef())}function ke(sn,Ue,ln){if(sn)if(sn.texture){var mn=sn.texture._texture,Wn=Math.max(1,mn.width),An=Math.max(1,mn.height);ft(Wn===Ue&&An===ln,"inconsistent width/height for supplied texture"),mn.refCount+=1}else{var In=sn.renderbuffer._renderbuffer;ft(In.width===Ue&&In.height===ln,"inconsistent width/height for renderbuffer"),In.refCount+=1}}function tn(sn,Ue){Ue&&(Ue.texture?Te.framebufferTexture2D(36160,sn,Ue.target,Ue.texture._texture.texture,0):Te.framebufferRenderbuffer(36160,sn,36161,Ue.renderbuffer._renderbuffer.renderbuffer))}function De(sn){var Ue=3553,ln=null,mn=null,Wn=sn;S(sn)==="object"&&(Wn=sn.data,"target"in sn&&(Ue=0|sn.target)),ft.type(Wn,"function","invalid attachment data");var An=Wn._reglType;return An==="texture2d"?(ln=Wn,ft(Ue===3553)):An==="textureCube"?(ln=Wn,ft(Ue>=34069&&Ue<34075,"invalid cube map target")):An==="renderbuffer"?(mn=Wn,Ue=36161):ft.raise("invalid regl object for attachment"),new ze(Ue,ln,mn)}function cn(sn,Ue,ln,mn,Wn){if(ln){var An=$t.create2D({width:sn,height:Ue,format:mn,type:Wn});return An._texture.refCount=0,new ze(3553,An,null)}var In=me.create({width:sn,height:Ue,format:mn});return In._renderbuffer.refCount=0,new ze(36161,null,In)}function hn(sn){return sn&&(sn.texture||sn.renderbuffer)}function nn(sn,Ue,ln){sn&&(sn.texture?sn.texture.resize(Ue,ln):sn.renderbuffer&&sn.renderbuffer.resize(Ue,ln),sn.width=Ue,sn.height=ln)}N.oes_texture_half_float&&Me.push("half float","float16"),N.oes_texture_float&&Me.push("float","float32");var dn=0,Sn={};function Pe(){this.id=dn++,Sn[this.id]=this,this.framebuffer=Te.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function le(sn){sn.colorAttachments.forEach(Ve),Ve(sn.depthAttachment),Ve(sn.stencilAttachment),Ve(sn.depthStencilAttachment)}function Le(sn){var Ue=sn.framebuffer;ft(Ue,"must not double destroy framebuffer"),Te.deleteFramebuffer(Ue),sn.framebuffer=null,Zt.framebufferCount--,delete Sn[sn.id]}function Be(sn){var Ue;Te.bindFramebuffer(36160,sn.framebuffer);var ln=sn.colorAttachments;for(Ue=0;Ue<ln.length;++Ue)tn(36064+Ue,ln[Ue]);for(Ue=ln.length;Ue<mt.maxColorAttachments;++Ue)Te.framebufferTexture2D(36160,36064+Ue,3553,null,0);Te.framebufferTexture2D(36160,33306,3553,null,0),Te.framebufferTexture2D(36160,36096,3553,null,0),Te.framebufferTexture2D(36160,36128,3553,null,0),tn(36096,sn.depthAttachment),tn(36128,sn.stencilAttachment),tn(33306,sn.depthStencilAttachment);var mn=Te.checkFramebufferStatus(36160);Te.isContextLost()||mn===36053||ft.raise("framebuffer configuration not supported, status = "+jr[mn]),Te.bindFramebuffer(36160,de.next?de.next.framebuffer:null),de.cur=de.next,Te.getError()}function en(sn,Ue){var ln=new Pe;function mn(Wn,An){var In;ft(de.next!==ln,"can not update framebuffer which is currently in use");var lr=0,Hr=0,Gr=!0,Mr=!0,oi=null,ai=!0,Zr="rgba",Xi="uint8",$i=1,Go=null,_o=null,Uo=null,ta=!1;if(typeof Wn=="number")lr=0|Wn,Hr=0|An||lr;else if(Wn){ft.type(Wn,"object","invalid arguments for framebuffer");var li=Wn;if("shape"in li){var Oo=li.shape;ft(Array.isArray(Oo)&&Oo.length>=2,"invalid shape for framebuffer"),lr=Oo[0],Hr=Oo[1]}else"radius"in li&&(lr=Hr=li.radius),"width"in li&&(lr=li.width),"height"in li&&(Hr=li.height);("color"in li||"colors"in li)&&(oi=li.color||li.colors,Array.isArray(oi)&&ft(oi.length===1||N.webgl_draw_buffers,"multiple render targets not supported")),oi||("colorCount"in li&&($i=0|li.colorCount,ft($i>0,"invalid color buffer count")),"colorTexture"in li&&(ai=!!li.colorTexture,Zr="rgba4"),"colorType"in li&&(Xi=li.colorType,ai?(ft(N.oes_texture_float||!(Xi==="float"||Xi==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),ft(N.oes_texture_half_float||!(Xi==="half float"||Xi==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Xi==="half float"||Xi==="float16"?(ft(N.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Zr="rgba16f"):Xi!=="float"&&Xi!=="float32"||(ft(N.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Zr="rgba32f"),ft.oneOf(Xi,Me,"invalid color type")),"colorFormat"in li&&(Zr=li.colorFormat,he.indexOf(Zr)>=0?ai=!0:ce.indexOf(Zr)>=0?ai=!1:ai?ft.oneOf(li.colorFormat,he,"invalid color format for texture"):ft.oneOf(li.colorFormat,ce,"invalid color format for renderbuffer"))),("depthTexture"in li||"depthStencilTexture"in li)&&(ta=!(!li.depthTexture&&!li.depthStencilTexture),ft(!ta||N.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in li&&(typeof li.depth=="boolean"?Gr=li.depth:(Go=li.depth,Mr=!1)),"stencil"in li&&(typeof li.stencil=="boolean"?Mr=li.stencil:(_o=li.stencil,Gr=!1)),"depthStencil"in li&&(typeof li.depthStencil=="boolean"?Gr=Mr=li.depthStencil:(Uo=li.depthStencil,Gr=!1,Mr=!1))}else lr=Hr=1;var qi=null,zo=null,Yo=null,Xo=null;if(Array.isArray(oi))qi=oi.map(De);else if(oi)qi=[De(oi)];else for(qi=new Array($i),In=0;In<$i;++In)qi[In]=cn(lr,Hr,ai,Zr,Xi);ft(N.webgl_draw_buffers||qi.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),ft(qi.length<=mt.maxColorAttachments,"too many color attachments, not supported"),lr=lr||qi[0].width,Hr=Hr||qi[0].height,Go?zo=De(Go):Gr&&!Mr&&(zo=cn(lr,Hr,ta,"depth","uint32")),_o?Yo=De(_o):Mr&&!Gr&&(Yo=cn(lr,Hr,!1,"stencil","uint8")),Uo?Xo=De(Uo):!Go&&!_o&&Mr&&Gr&&(Xo=cn(lr,Hr,ta,"depth stencil","depth stencil")),ft(!!Go+!!_o+!!Uo<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var ua=null;for(In=0;In<qi.length;++In)if(ke(qi[In],lr,Hr),ft(!qi[In]||qi[In].texture&&_i.indexOf(qi[In].texture._texture.format)>=0||qi[In].renderbuffer&&ro.indexOf(qi[In].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+In+" is invalid"),qi[In]&&qi[In].texture){var di=Li[qi[In].texture._texture.format]*Vi[qi[In].texture._texture.type];ua===null?ua=di:ft(ua===di,"all color attachments much have the same number of bits per pixel.")}return ke(zo,lr,Hr),ft(!zo||zo.texture&&zo.texture._texture.format===6402||zo.renderbuffer&&zo.renderbuffer._renderbuffer.format===33189,"invalid depth attachment for framebuffer object"),ke(Yo,lr,Hr),ft(!Yo||Yo.renderbuffer&&Yo.renderbuffer._renderbuffer.format===36168,"invalid stencil attachment for framebuffer object"),ke(Xo,lr,Hr),ft(!Xo||Xo.texture&&Xo.texture._texture.format===34041||Xo.renderbuffer&&Xo.renderbuffer._renderbuffer.format===34041,"invalid depth-stencil attachment for framebuffer object"),le(ln),ln.width=lr,ln.height=Hr,ln.colorAttachments=qi,ln.depthAttachment=zo,ln.stencilAttachment=Yo,ln.depthStencilAttachment=Xo,mn.color=qi.map(hn),mn.depth=hn(zo),mn.stencil=hn(Yo),mn.depthStencil=hn(Xo),mn.width=ln.width,mn.height=ln.height,Be(ln),mn}return Zt.framebufferCount++,mn(sn,Ue),j(mn,{resize:function(An,In){ft(de.next!==ln,"can not resize a framebuffer which is currently in use");var lr=Math.max(0|An,1),Hr=Math.max(0|In||lr,1);if(lr===ln.width&&Hr===ln.height)return mn;for(var Gr=ln.colorAttachments,Mr=0;Mr<Gr.length;++Mr)nn(Gr[Mr],lr,Hr);return nn(ln.depthAttachment,lr,Hr),nn(ln.stencilAttachment,lr,Hr),nn(ln.depthStencilAttachment,lr,Hr),ln.width=mn.width=lr,ln.height=mn.height=Hr,Be(ln),mn},_reglType:"framebuffer",_framebuffer:ln,destroy:function(){Le(ln),le(ln)},use:function(An){de.setFBO({framebuffer:mn},An)}})}return j(de,{getFramebuffer:function(Ue){if(typeof Ue=="function"&&Ue._reglType==="framebuffer"){var ln=Ue._framebuffer;if(ln instanceof Pe)return ln}return null},create:en,createCube:function(Ue){var ln=Array(6);function mn(Wn){var An;ft(ln.indexOf(de.next)<0,"can not update framebuffer which is currently in use");var In,lr={color:null},Hr=0,Gr=null,Mr="rgba",oi="uint8",ai=1;if(typeof Wn=="number")Hr=0|Wn;else if(Wn){ft.type(Wn,"object","invalid arguments for framebuffer");var Zr=Wn;if("shape"in Zr){var Xi=Zr.shape;ft(Array.isArray(Xi)&&Xi.length>=2,"invalid shape for framebuffer"),ft(Xi[0]===Xi[1],"cube framebuffer must be square"),Hr=Xi[0]}else"radius"in Zr&&(Hr=0|Zr.radius),"width"in Zr?(Hr=0|Zr.width,"height"in Zr&&ft(Zr.height===Hr,"must be square")):"height"in Zr&&(Hr=0|Zr.height);("color"in Zr||"colors"in Zr)&&(Gr=Zr.color||Zr.colors,Array.isArray(Gr)&&ft(Gr.length===1||N.webgl_draw_buffers,"multiple render targets not supported")),Gr||("colorCount"in Zr&&(ai=0|Zr.colorCount,ft(ai>0,"invalid color buffer count")),"colorType"in Zr&&(ft.oneOf(Zr.colorType,Me,"invalid color type"),oi=Zr.colorType),"colorFormat"in Zr&&(Mr=Zr.colorFormat,ft.oneOf(Zr.colorFormat,he,"invalid color format for texture"))),"depth"in Zr&&(lr.depth=Zr.depth),"stencil"in Zr&&(lr.stencil=Zr.stencil),"depthStencil"in Zr&&(lr.depthStencil=Zr.depthStencil)}else Hr=1;if(Gr)if(Array.isArray(Gr))for(In=[],An=0;An<Gr.length;++An)In[An]=Gr[An];else In=[Gr];else{In=Array(ai);var $i={radius:Hr,format:Mr,type:oi};for(An=0;An<ai;++An)In[An]=$t.createCube($i)}for(lr.color=Array(In.length),An=0;An<In.length;++An){var Go=In[An];ft(typeof Go=="function"&&Go._reglType==="textureCube","invalid cube map"),Hr=Hr||Go.width,ft(Go.width===Hr&&Go.height===Hr,"invalid cube map shape"),lr.color[An]={target:34069,data:In[An]}}for(An=0;An<6;++An){for(var _o=0;_o<In.length;++_o)lr.color[_o].target=34069+An;An>0&&(lr.depth=ln[0].depth,lr.stencil=ln[0].stencil,lr.depthStencil=ln[0].depthStencil),ln[An]?ln[An](lr):ln[An]=en(lr)}return j(mn,{width:Hr,height:Hr,color:In})}return mn(Ue),j(mn,{faces:ln,resize:function(An){var In,lr=0|An;if(ft(lr>0&&lr<=mt.maxCubeMapSize,"invalid radius for cube fbo"),lr===mn.width)return mn;var Hr=mn.color;for(In=0;In<Hr.length;++In)Hr[In].resize(lr);for(In=0;In<6;++In)ln[In].resize(lr);return mn.width=mn.height=lr,mn},_reglType:"framebufferCube",destroy:function(){ln.forEach(function(An){An.destroy()})}})},clear:function(){d(Sn).forEach(Le)},restore:function(){de.cur=null,de.next=null,de.dirty=!0,d(Sn).forEach(function(Ue){Ue.framebuffer=Te.createFramebuffer(),Be(Ue)})}})}(on,xr,ri,Yi,Bi,wr),ve=On(on,Ar,xr,ri,vi,Si,0,Di,{},ii,Ui,{elements:null,primitive:4,count:-1,offset:0,instances:-1},Dr,Er,rn),G=pr(on,Di,ve.procs.poll,Dr,$n,xr,ri),B=ve.next,$=on.canvas,lt=[],Ft=[],Jt=[],ie=[rn.onDestroy],se=null;function Ce(){if(lt.length===0)return Er&&Er.update(),void(se=null);se=vt.next(Ce),Dn();for(var Te=lt.length-1;Te>=0;--Te){var N=lt[Te];N&&N(Dr,null,0)}on.flush(),Er&&Er.update()}function Ee(){!se&&lt.length>0&&(se=vt.next(Ce))}function un(){se&&(vt.cancel(Ce),se=null)}function xn(Te){Te.preventDefault(),vr=!0,un(),Ft.forEach(function(N){N()})}function zt(Te){on.getError(),vr=!1,ar.restore(),Ui.restore(),vi.restore(),Yi.restore(),Bi.restore(),Di.restore(),ii.restore(),Er&&Er.restore(),ve.procs.refresh(),Ee(),Jt.forEach(function(N){N()})}function Yt(Te){function N(ke,tn){var De={},cn={};return Object.keys(ke).forEach(function(hn){var nn=ke[hn];if(ut.isDynamic(nn))cn[hn]=ut.unbox(nn,hn);else{if(tn&&Array.isArray(nn)){for(var dn=0;dn<nn.length;++dn)if(ut.isDynamic(nn[dn]))return void(cn[hn]=ut.unbox(nn,hn))}De[hn]=nn}}),{dynamic:cn,static:De}}ft(!!Te,"invalid args to regl({...})"),ft.type(Te,"object","invalid args to regl({...})");var mt=N(Te.context||{},!0),$t=N(Te.uniforms||{},!0),me=N(Te.attributes||{},!1),Zt=N(function(ke){var tn=j({},ke);function De(cn){if(cn in tn){var hn=tn[cn];delete tn[cn],Object.keys(hn).forEach(function(nn){tn[cn+"."+nn]=hn[nn]})}}return delete tn.uniforms,delete tn.attributes,delete tn.context,delete tn.vao,"stencil"in tn&&tn.stencil.op&&(tn.stencil.opBack=tn.stencil.opFront=tn.stencil.op,delete tn.stencil.op),De("blend"),De("depth"),De("cull"),De("stencil"),De("polygonOffset"),De("scissor"),De("sample"),"vao"in ke&&(tn.vao=ke.vao),tn}(Te),!1),de={gpuTime:0,cpuTime:0,count:0},he=ve.compile(Zt,me,$t,mt,de),ce=he.draw,Me=he.batch,ze=he.scope,Ve=[];return j(function(ke,tn){var De;if(vr&&ft.raise("context lost"),typeof ke=="function")return ze.call(this,null,ke,0);if(typeof tn=="function")if(typeof ke=="number")for(De=0;De<ke;++De)ze.call(this,null,tn,De);else{if(!Array.isArray(ke))return ze.call(this,ke,tn,0);for(De=0;De<ke.length;++De)ze.call(this,ke[De],tn,De)}else if(typeof ke=="number"){if(ke>0)return Me.call(this,function(cn){for(;Ve.length<cn;)Ve.push(null);return Ve}(0|ke),0|ke)}else{if(!Array.isArray(ke))return ce.call(this,ke);if(ke.length)return Me.call(this,ke,ke.length)}},{stats:de,destroy:function(){he.destroy()}})}$&&($.addEventListener("webglcontextlost",xn,!1),$.addEventListener("webglcontextrestored",zt,!1));var Se=Di.setFBO=Yt({framebuffer:ut.define.call(null,1,"framebuffer")});function Wt(Te,N){var mt=0;ve.procs.poll();var $t=N.color;$t&&(on.clearColor(+$t[0]||0,+$t[1]||0,+$t[2]||0,+$t[3]||0),mt|=16384),"depth"in N&&(on.clearDepth(+N.depth),mt|=256),"stencil"in N&&(on.clearStencil(0|N.stencil),mt|=1024),ft(!!mt,"called regl.clear with no buffer specified"),on.clear(mt)}function ue(Te){return ft.type(Te,"function","regl.frame() callback must be a function"),lt.push(Te),Ee(),{cancel:function(){var mt=Xn(lt,Te);ft(mt>=0,"cannot cancel a frame twice"),lt[mt]=function $t(){var me=Xn(lt,$t);lt[me]=lt[lt.length-1],lt.length-=1,lt.length<=0&&un()}}}}function vn(){var Te=B.viewport,N=B.scissor_box;Te[0]=Te[1]=N[0]=N[1]=0,Dr.viewportWidth=Dr.framebufferWidth=Dr.drawingBufferWidth=Te[2]=N[2]=on.drawingBufferWidth,Dr.viewportHeight=Dr.framebufferHeight=Dr.drawingBufferHeight=Te[3]=N[3]=on.drawingBufferHeight}function Dn(){Dr.tick+=1,Dr.time=_n(),vn(),ve.procs.poll()}function zn(){Yi.refresh(),vn(),ve.procs.refresh(),Er&&Er.update()}function _n(){return(pt()-Ir)/1e3}zn();var Ze=j(Yt,{clear:function(N){if(ft(S(N)==="object"&&N,"regl.clear() takes an object as input"),"framebuffer"in N)if(N.framebuffer&&N.framebuffer_reglType==="framebufferCube")for(var mt=0;mt<6;++mt)Se(j({framebuffer:N.framebuffer.faces[mt]},N),Wt);else Se(N,Wt);else Wt(0,N)},prop:ut.define.bind(null,1),context:ut.define.bind(null,2),this:ut.define.bind(null,3),draw:Yt({}),buffer:function(N){return vi.create(N,34962,!1,!1)},elements:function(N){return Si.create(N,!1)},texture:Yi.create2D,cube:Yi.createCube,renderbuffer:Bi.create,framebuffer:Di.create,framebufferCube:Di.createCube,vao:ii.createVAO,attributes:$n,frame:ue,on:function(N,mt){var $t;switch(ft.type(mt,"function","listener callback must be a function"),N){case"frame":return ue(mt);case"lost":$t=Ft;break;case"restore":$t=Jt;break;case"destroy":$t=ie;break;default:ft.raise("invalid event, must be one of frame,lost,restore,destroy")}return $t.push(mt),{cancel:function(){for(var Zt=0;Zt<$t.length;++Zt)if($t[Zt]===mt)return $t[Zt]=$t[$t.length-1],void $t.pop()}}},limits:ri,hasExtension:function(N){return ri.extensions.indexOf(N.toLowerCase())>=0},read:G,destroy:function(){lt.length=0,un(),$&&($.removeEventListener("webglcontextlost",xn),$.removeEventListener("webglcontextrestored",zt)),Ui.clear(),Di.clear(),Bi.clear(),Yi.clear(),Si.clear(),vi.clear(),ii.clear(),Er&&Er.clear(),ie.forEach(function(N){N()})},_gl:on,_refresh:zn,poll:function(){Dn(),Er&&Er.update()},now:_n,stats:wr});return rn.onDone(null,Ze),Ze}},S(E)==="object"&&a!==void 0?a.exports=b():(p=typeof(r=b)=="function"?r.call(E,e,E,a):r)===void 0||(a.exports=p)},function(a,E,e){"use strict";a.exports=function(r,p,b,S){try{try{var l;try{l=new window.Blob([r])}catch(n){(l=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(r),l=l.getBlob()}var A=window.URL||window.webkitURL,j=A.createObjectURL(l),y=new window[p](j,b);return A.revokeObjectURL(j),y}catch(n){return new window[p]("data:application/javascript,".concat(encodeURIComponent(r)),b)}}catch(n){if(!S)throw Error("Inline worker is not supported");return new window[p](S,b)}}},,,,,,,,function(a,E,e){"use strict";e.r(E),e.d(E,"Minimap",function(){return O}),e.d(E,"Grid",function(){return T}),e.d(E,"Bundling",function(){return v}),e.d(E,"Menu",function(){return m}),e.d(E,"Fisheye",function(){return C}),e.d(E,"ToolBar",function(){return D}),e.d(E,"Tooltip",function(){return Y}),e.d(E,"TimeBar",function(){return Z}),e.d(E,"ImageMinimap",function(){return et}),e.d(E,"EdgeFilterLens",function(){return dt});var r=e(5);e.d(E,"Arrow",function(){return r.d}),e.d(E,"Marker",function(){return r.k}),e.d(E,"Shape",function(){return r.m});var p=e(18);e.d(E,"ICanvas",function(){return p.ICanvas}),e.d(E,"IGroup",function(){return p.IGroup}),e.d(E,"IShape",function(){return p.IShape});var b=e(33);e.d(E,"Algorithm",function(){return b});var S=e(91);e.d(E,"Graph",function(){return S.a});var l=e(152);e.d(E,"TreeGraph",function(){return l.a});var A=e(69);e.d(E,"Layout",function(){return A.a}),e.d(E,"registerLayout",function(){return A.b});var j=e(45);e.d(E,"Global",function(){return j.a});var y=e(38);e.d(E,"Util",function(){return y.a});var n=e(35);e(509),e(508),e.d(E,"G6GraphEvent",function(){return r.i}),e.d(E,"G6Event",function(){return r.h}),e.d(E,"Node",function(){return r.l}),e.d(E,"Edge",function(){return r.g}),e.d(E,"Combo",function(){return r.f}),e.d(E,"Hull",function(){return r.j}),e.d(E,"registerNode",function(){return r.r}),e.d(E,"registerCombo",function(){return r.p}),e.d(E,"AbstractGraph",function(){return r.b}),e.d(E,"registerEdge",function(){return r.q}),e.d(E,"registerBehavior",function(){return r.o}),e.d(E,"AbstractLayout",function(){return r.c}),e.d(E,"AbstractEvent",function(){return r.a}),e.d(E,"BaseGlobal",function(){return r.e});var s=e(245);for(var h in s)["default","Graph","TreeGraph","Util","Layout","registerLayout","Global","Minimap","Grid","Bundling","Menu","Fisheye","Algorithm","ToolBar","Tooltip","TimeBar","ImageMinimap","EdgeFilterLens","Arrow","Marker","Shape","ICanvas","IGroup","IShape","G6GraphEvent","G6Event","Node","Edge","Combo","Hull","registerNode","registerCombo","AbstractGraph","registerEdge","registerBehavior","AbstractLayout","AbstractEvent","BaseGlobal"].indexOf(h)<0&&function(ht){e.d(E,ht,function(){return s[ht]})}(h);var M=e(246);for(var h in M)["default","Graph","TreeGraph","Util","Layout","registerLayout","Global","Minimap","Grid","Bundling","Menu","Fisheye","Algorithm","ToolBar","Tooltip","TimeBar","ImageMinimap","EdgeFilterLens","Arrow","Marker","Shape","ICanvas","IGroup","IShape","G6GraphEvent","G6Event","Node","Edge","Combo","Hull","registerNode","registerCombo","AbstractGraph","registerEdge","registerBehavior","AbstractLayout","AbstractEvent","BaseGlobal"].indexOf(h)<0&&function(St){e.d(E,St,function(){return M[St]})}(h);var O=n.a.Minimap,T=n.a.Grid,v=n.a.Bundling,m=n.a.Menu,C=n.a.Fisheye,D=n.a.ToolBar,Y=n.a.Tooltip,Z=n.a.TimeBar,et=n.a.ImageMinimap,dt=n.a.EdgeFilterLens;E.default={version:j.a.version,Graph:S.a,TreeGraph:l.a,Util:y.a,Layout:A.a,registerLayout:A.b,Global:j.a,registerBehavior:r.o,registerCombo:r.p,registerEdge:r.q,registerNode:r.r,Minimap:n.a.Minimap,Grid:n.a.Grid,Bundling:n.a.Bundling,Menu:n.a.Menu,ToolBar:n.a.ToolBar,Tooltip:n.a.Tooltip,TimeBar:Z,Fisheye:C,ImageMinimap:et,EdgeFilterLens:dt,Algorithm:b,Arrow:r.d,Marker:r.k,Shape:r.m}},function(a,E,e){var r=e(264),p=e(265),b={};for(var S in r)r.hasOwnProperty(S)&&(b[r[S]]=S);var l=a.exports={to:{},get:{}};function A(y,n,s){return Math.min(Math.max(n,y),s)}function j(y){var n=y.toString(16).toUpperCase();return n.length<2?"0"+n:n}l.get=function(y){var n,s;switch(y.substring(0,3).toLowerCase()){case"hsl":n=l.get.hsl(y),s="hsl";break;case"hwb":n=l.get.hwb(y),s="hwb";break;default:n=l.get.rgb(y),s="rgb"}return n?{model:s,value:n}:null},l.get.rgb=function(y){if(!y)return null;var n,s,h,M=[0,0,0,1];if(n=y.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(h=n[2],n=n[1],s=0;s<3;s++){var O=2*s;M[s]=parseInt(n.slice(O,O+2),16)}h&&(M[3]=parseInt(h,16)/255)}else if(n=y.match(/^#([a-f0-9]{3,4})$/i)){for(h=(n=n[1])[3],s=0;s<3;s++)M[s]=parseInt(n[s]+n[s],16);h&&(M[3]=parseInt(h+h,16)/255)}else if(n=y.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(s=0;s<3;s++)M[s]=parseInt(n[s+1],0);n[4]&&(M[3]=parseFloat(n[4]))}else{if(!(n=y.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(n=y.match(/(\D+)/))?n[1]==="transparent"?[0,0,0,0]:(M=r[n[1]])?(M[3]=1,M):null:null;for(s=0;s<3;s++)M[s]=Math.round(2.55*parseFloat(n[s+1]));n[4]&&(M[3]=parseFloat(n[4]))}for(s=0;s<3;s++)M[s]=A(M[s],0,255);return M[3]=A(M[3],0,1),M},l.get.hsl=function(y){if(!y)return null;var n=y.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(n){var s=parseFloat(n[4]);return[(parseFloat(n[1])+360)%360,A(parseFloat(n[2]),0,100),A(parseFloat(n[3]),0,100),A(isNaN(s)?1:s,0,1)]}return null},l.get.hwb=function(y){if(!y)return null;var n=y.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(n){var s=parseFloat(n[4]);return[(parseFloat(n[1])%360+360)%360,A(parseFloat(n[2]),0,100),A(parseFloat(n[3]),0,100),A(isNaN(s)?1:s,0,1)]}return null},l.to.hex=function(){var y=p(arguments);return"#"+j(y[0])+j(y[1])+j(y[2])+(y[3]<1?j(Math.round(255*y[3])):"")},l.to.rgb=function(){var y=p(arguments);return y.length<4||y[3]===1?"rgb("+Math.round(y[0])+", "+Math.round(y[1])+", "+Math.round(y[2])+")":"rgba("+Math.round(y[0])+", "+Math.round(y[1])+", "+Math.round(y[2])+", "+y[3]+")"},l.to.rgb.percent=function(){var y=p(arguments),n=Math.round(y[0]/255*100),s=Math.round(y[1]/255*100),h=Math.round(y[2]/255*100);return y.length<4||y[3]===1?"rgb("+n+"%, "+s+"%, "+h+"%)":"rgba("+n+"%, "+s+"%, "+h+"%, "+y[3]+")"},l.to.hsl=function(){var y=p(arguments);return y.length<4||y[3]===1?"hsl("+y[0]+", "+y[1]+"%, "+y[2]+"%)":"hsla("+y[0]+", "+y[1]+"%, "+y[2]+"%, "+y[3]+")"},l.to.hwb=function(){var y=p(arguments),n="";return y.length>=4&&y[3]!==1&&(n=", "+y[3]),"hwb("+y[0]+", "+y[1]+"%, "+y[2]+"%"+n+")"},l.to.keyword=function(y){return b[y.slice(0,3)]}},function(a,E,e){"use strict";a.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(a,E,e){"use strict";var r=e(266),p=Array.prototype.concat,b=Array.prototype.slice,S=a.exports=function(l){for(var A=[],j=0,y=l.length;j<y;j++){var n=l[j];r(n)?A=p.call(A,b.call(n)):A.push(n)}return A};S.wrap=function(l){return function(){return l(S(arguments))}}},function(a,E){a.exports=function(e){return!(!e||typeof e=="string")&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String"))}},function(a,E,e){function r(l){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(l)}var p=e(161),b=e(269),S={};Object.keys(p).forEach(function(l){S[l]={},Object.defineProperty(S[l],"channels",{value:p[l].channels}),Object.defineProperty(S[l],"labels",{value:p[l].labels});var A=b(l);Object.keys(A).forEach(function(j){var y=A[j];S[l][j]=function(n){var s=function(M){if(M==null)return M;arguments.length>1&&(M=Array.prototype.slice.call(arguments));var O=n(M);if(r(O)==="object")for(var T=O.length,v=0;v<T;v++)O[v]=Math.round(O[v]);return O};return"conversion"in n&&(s.conversion=n.conversion),s}(y),S[l][j].raw=function(n){var s=function(M){return M==null?M:(arguments.length>1&&(M=Array.prototype.slice.call(arguments)),n(M))};return"conversion"in n&&(s.conversion=n.conversion),s}(y)})}),a.exports=S},function(a,E,e){"use strict";a.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(a,E,e){var r=e(161);function p(l){var A=function(){for(var T={},v=Object.keys(r),m=v.length,C=0;C<m;C++)T[v[C]]={distance:-1,parent:null};return T}(),j=[l];for(A[l].distance=0;j.length;)for(var y=j.pop(),n=Object.keys(r[y]),s=n.length,h=0;h<s;h++){var M=n[h],O=A[M];O.distance===-1&&(O.distance=A[y].distance+1,O.parent=y,j.unshift(M))}return A}function b(l,A){return function(j){return A(l(j))}}function S(l,A){for(var j=[A[l].parent,l],y=r[A[l].parent][l],n=A[l].parent;A[n].parent;)j.unshift(A[n].parent),y=b(r[A[n].parent][n],y),n=A[n].parent;return y.conversion=j,y}a.exports=function(l){for(var A=p(l),j={},y=Object.keys(A),n=y.length,s=0;s<n;s++){var h=y[s];A[h].parent!==null&&(j[h]=S(h,A))}return j}},function(a,E,e){var r=e(271);a.exports={Graph:r.Graph,json:e(372),alg:e(373),version:r.version}},function(a,E,e){a.exports={Graph:e(124),version:e(371)}},function(a,E,e){var r=e(162);a.exports=function(p){return r(p,4)}},function(a,E){a.exports=function(){this.__data__=[],this.size=0}},function(a,E,e){var r=e(97),p=Array.prototype.splice;a.exports=function(b){var S=this.__data__,l=r(S,b);return!(l<0)&&(l==S.length-1?S.pop():p.call(S,l,1),--this.size,!0)}},function(a,E,e){var r=e(97);a.exports=function(p){var b=this.__data__,S=r(b,p);return S<0?void 0:b[S][1]}},function(a,E,e){var r=e(97);a.exports=function(p){return r(this.__data__,p)>-1}},function(a,E,e){var r=e(97);a.exports=function(p,b){var S=this.__data__,l=r(S,p);return l<0?(++this.size,S.push([p,b])):S[l][1]=b,this}},function(a,E,e){var r=e(96);a.exports=function(){this.__data__=new r,this.size=0}},function(a,E){a.exports=function(e){var r=this.__data__,p=r.delete(e);return this.size=r.size,p}},function(a,E){a.exports=function(e){return this.__data__.get(e)}},function(a,E){a.exports=function(e){return this.__data__.has(e)}},function(a,E,e){var r=e(96),p=e(125),b=e(126);a.exports=function(S,l){var A=this.__data__;if(A instanceof r){var j=A.__data__;if(!p||j.length<199)return j.push([S,l]),this.size=++A.size,this;A=this.__data__=new b(j)}return A.set(S,l),this.size=A.size,this}},function(a,E,e){var r=e(83),p=e(286),b=e(43),S=e(165),l=/^\[object .+?Constructor\]$/,A=Function.prototype,j=Object.prototype,y=A.toString,n=j.hasOwnProperty,s=RegExp("^"+y.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");a.exports=function(h){return!(!b(h)||p(h))&&(r(h)?s:l).test(S(h))}},function(a,E,e){var r=e(72),p=Object.prototype,b=p.hasOwnProperty,S=p.toString,l=r?r.toStringTag:void 0;a.exports=function(A){var j=b.call(A,l),y=A[l];try{A[l]=void 0;var n=!0}catch(h){}var s=S.call(A);return n&&(j?A[l]=y:delete A[l]),s}},function(a,E){var e=Object.prototype.toString;a.exports=function(r){return e.call(r)}},function(a,E,e){var r,p=e(287),b=(r=/[^.]+$/.exec(p&&p.keys&&p.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";a.exports=function(S){return!!b&&b in S}},function(a,E,e){var r=e(47)["__core-js_shared__"];a.exports=r},function(a,E){a.exports=function(e,r){return e==null?void 0:e[r]}},function(a,E,e){var r=e(290),p=e(96),b=e(125);a.exports=function(){this.size=0,this.__data__={hash:new r,map:new(b||p),string:new r}}},function(a,E,e){var r=e(291),p=e(292),b=e(293),S=e(294),l=e(295);function A(j){var y=-1,n=j==null?0:j.length;for(this.clear();++y<n;){var s=j[y];this.set(s[0],s[1])}}A.prototype.clear=r,A.prototype.delete=p,A.prototype.get=b,A.prototype.has=S,A.prototype.set=l,a.exports=A},function(a,E,e){var r=e(98);a.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(a,E){a.exports=function(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}},function(a,E,e){var r=e(98),p=Object.prototype.hasOwnProperty;a.exports=function(b){var S=this.__data__;if(r){var l=S[b];return l==="__lodash_hash_undefined__"?void 0:l}return p.call(S,b)?S[b]:void 0}},function(a,E,e){var r=e(98),p=Object.prototype.hasOwnProperty;a.exports=function(b){var S=this.__data__;return r?S[b]!==void 0:p.call(S,b)}},function(a,E,e){var r=e(98);a.exports=function(p,b){var S=this.__data__;return this.size+=this.has(p)?0:1,S[p]=r&&b===void 0?"__lodash_hash_undefined__":b,this}},function(a,E,e){var r=e(99);a.exports=function(p){var b=r(this,p).delete(p);return this.size-=b?1:0,b}},function(a,E){function e(r){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(r)}a.exports=function(r){var p=e(r);return p=="string"||p=="number"||p=="symbol"||p=="boolean"?r!=="__proto__":r===null}},function(a,E,e){var r=e(99);a.exports=function(p){return r(this,p).get(p)}},function(a,E,e){var r=e(99);a.exports=function(p){return r(this,p).has(p)}},function(a,E,e){var r=e(99);a.exports=function(p,b){var S=r(this,p),l=S.size;return S.set(p,b),this.size+=S.size==l?0:1,this}},function(a,E,e){var r=e(84),p=e(58);a.exports=function(b,S){return b&&r(S,p(S),b)}},function(a,E){a.exports=function(e,r){for(var p=-1,b=Array(e);++p<e;)b[p]=r(p);return b}},function(a,E,e){var r=e(57),p=e(48);a.exports=function(b){return p(b)&&r(b)=="[object Arguments]"}},function(a,E){a.exports=function(){return!1}},function(a,E,e){var r=e(57),p=e(128),b=e(48),S={};S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S["[object Arguments]"]=S["[object Array]"]=S["[object ArrayBuffer]"]=S["[object Boolean]"]=S["[object DataView]"]=S["[object Date]"]=S["[object Error]"]=S["[object Function]"]=S["[object Map]"]=S["[object Number]"]=S["[object Object]"]=S["[object RegExp]"]=S["[object Set]"]=S["[object String]"]=S["[object WeakMap]"]=!1,a.exports=function(l){return b(l)&&p(l.length)&&!!S[r(l)]}},function(a,E,e){var r=e(168)(Object.keys,Object);a.exports=r},function(a,E,e){var r=e(84),p=e(65);a.exports=function(b,S){return b&&r(S,p(S),b)}},function(a,E,e){var r=e(43),p=e(104),b=e(309),S=Object.prototype.hasOwnProperty;a.exports=function(l){if(!r(l))return b(l);var A=p(l),j=[];for(var y in l)(y!="constructor"||!A&&S.call(l,y))&&j.push(y);return j}},function(a,E){a.exports=function(e){var r=[];if(e!=null)for(var p in Object(e))r.push(p);return r}},function(a,E,e){var r=e(84),p=e(131);a.exports=function(b,S){return r(b,p(b),S)}},function(a,E,e){var r=e(84),p=e(173);a.exports=function(b,S){return r(b,p(b),S)}},function(a,E,e){var r=e(175),p=e(173),b=e(65);a.exports=function(S){return r(S,b,p)}},function(a,E,e){var r=e(64)(e(47),"DataView");a.exports=r},function(a,E,e){var r=e(64)(e(47),"Promise");a.exports=r},function(a,E,e){var r=e(64)(e(47),"WeakMap");a.exports=r},function(a,E){var e=Object.prototype.hasOwnProperty;a.exports=function(r){var p=r.length,b=new r.constructor(p);return p&&typeof r[0]=="string"&&e.call(r,"index")&&(b.index=r.index,b.input=r.input),b}},function(a,E,e){var r=e(133),p=e(318),b=e(319),S=e(320),l=e(178);a.exports=function(A,j,y){var n=A.constructor;switch(j){case"[object ArrayBuffer]":return r(A);case"[object Boolean]":case"[object Date]":return new n(+A);case"[object DataView]":return p(A,y);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return l(A,y);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(A);case"[object RegExp]":return b(A);case"[object Set]":return new n;case"[object Symbol]":return S(A)}}},function(a,E,e){var r=e(133);a.exports=function(p,b){var S=b?r(p.buffer):p.buffer;return new p.constructor(S,p.byteOffset,p.byteLength)}},function(a,E){var e=/\w*$/;a.exports=function(r){var p=new r.constructor(r.source,e.exec(r));return p.lastIndex=r.lastIndex,p}},function(a,E,e){var r=e(72),p=r?r.prototype:void 0,b=p?p.valueOf:void 0;a.exports=function(S){return b?Object(b.call(S)):{}}},function(a,E,e){var r=e(322),p=e(103),b=e(129),S=b&&b.isMap,l=S?p(S):r;a.exports=l},function(a,E,e){var r=e(74),p=e(48);a.exports=function(b){return p(b)&&r(b)=="[object Map]"}},function(a,E,e){var r=e(324),p=e(103),b=e(129),S=b&&b.isSet,l=S?p(S):r;a.exports=l},function(a,E,e){var r=e(74),p=e(48);a.exports=function(b){return p(b)&&r(b)=="[object Set]"}},function(a,E){a.exports=function(e){return function(r,p,b){for(var S=-1,l=Object(r),A=b(r),j=A.length;j--;){var y=A[e?j:++S];if(p(l[y],y,l)===!1)break}return r}}},function(a,E,e){var r=e(53);a.exports=function(p,b){return function(S,l){if(S==null)return S;if(!r(S))return p(S,l);for(var A=S.length,j=b?A:-1,y=Object(S);(b?j--:++j<A)&&l(y[j],j,y)!==!1;);return S}}},function(a,E,e){var r=e(106);a.exports=function(p,b){var S=[];return r(p,function(l,A,j){b(l,A,j)&&S.push(l)}),S}},function(a,E,e){var r=e(329),p=e(337),b=e(190);a.exports=function(S){var l=p(S);return l.length==1&&l[0][2]?b(l[0][0],l[0][1]):function(A){return A===S||r(A,S,l)}}},function(a,E,e){var r=e(95),p=e(185);a.exports=function(b,S,l,A){var j=l.length,y=j,n=!A;if(b==null)return!y;for(b=Object(b);j--;){var s=l[j];if(n&&s[2]?s[1]!==b[s[0]]:!(s[0]in b))return!1}for(;++j<y;){var h=(s=l[j])[0],M=b[h],O=s[1];if(n&&s[2]){if(M===void 0&&!(h in b))return!1}else{var T=new r;if(A)var v=A(M,O,h,b,S,T);if(!(v===void 0?p(O,M,3,A,T):v))return!1}}return!0}},function(a,E,e){var r=e(95),p=e(186),b=e(334),S=e(336),l=e(74),A=e(26),j=e(73),y=e(44),n="[object Object]",s=Object.prototype.hasOwnProperty;a.exports=function(h,M,O,T,v,m){var C=A(h),D=A(M),Y=C?"[object Array]":l(h),Z=D?"[object Array]":l(M),et=(Y=Y=="[object Arguments]"?n:Y)==n,dt=(Z=Z=="[object Arguments]"?n:Z)==n,ht=Y==Z;if(ht&&j(h)){if(!j(M))return!1;C=!0,et=!1}if(ht&&!et)return m||(m=new r),C||y(h)?p(h,M,O,T,v,m):b(h,M,Y,O,T,v,m);if(!(1&O)){var St=et&&s.call(h,"__wrapped__"),wt=dt&&s.call(M,"__wrapped__");if(St||wt){var xt=St?h.value():h,ft=wt?M.value():M;return m||(m=new r),v(xt,ft,O,T,m)}}return!!ht&&(m||(m=new r),S(h,M,O,T,v,m))}},function(a,E){a.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(a,E){a.exports=function(e){return this.__data__.has(e)}},function(a,E){a.exports=function(e,r){for(var p=-1,b=e==null?0:e.length;++p<b;)if(r(e[p],p,e))return!0;return!1}},function(a,E,e){var r=e(72),p=e(177),b=e(71),S=e(186),l=e(335),A=e(137),j=r?r.prototype:void 0,y=j?j.valueOf:void 0;a.exports=function(n,s,h,M,O,T,v){switch(h){case"[object DataView]":if(n.byteLength!=s.byteLength||n.byteOffset!=s.byteOffset)return!1;n=n.buffer,s=s.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=s.byteLength||!T(new p(n),new p(s)));case"[object Boolean]":case"[object Date]":case"[object Number]":return b(+n,+s);case"[object Error]":return n.name==s.name&&n.message==s.message;case"[object RegExp]":case"[object String]":return n==s+"";case"[object Map]":var m=l;case"[object Set]":var C=1&M;if(m||(m=A),n.size!=s.size&&!C)return!1;var D=v.get(n);if(D)return D==s;M|=2,v.set(n,s);var Y=S(m(n),m(s),M,O,T,v);return v.delete(n),Y;case"[object Symbol]":if(y)return y.call(n)==y.call(s)}return!1}},function(a,E){a.exports=function(e){var r=-1,p=Array(e.size);return e.forEach(function(b,S){p[++r]=[S,b]}),p}},function(a,E,e){var r=e(174),p=Object.prototype.hasOwnProperty;a.exports=function(b,S,l,A,j,y){var n=1&l,s=r(b),h=s.length;if(h!=r(S).length&&!n)return!1;for(var M=h;M--;){var O=s[M];if(!(n?O in S:p.call(S,O)))return!1}var T=y.get(b),v=y.get(S);if(T&&v)return T==S&&v==b;var m=!0;y.set(b,S),y.set(S,b);for(var C=n;++M<h;){var D=b[O=s[M]],Y=S[O];if(A)var Z=n?A(Y,D,O,S,b,y):A(D,Y,O,b,S,y);if(!(Z===void 0?D===Y||j(D,Y,l,A,y):Z)){m=!1;break}C||(C=O=="constructor")}if(m&&!C){var et=b.constructor,dt=S.constructor;et==dt||!("constructor"in b)||!("constructor"in S)||typeof et=="function"&&et instanceof et&&typeof dt=="function"&&dt instanceof dt||(m=!1)}return y.delete(b),y.delete(S),m}},function(a,E,e){var r=e(189),p=e(58);a.exports=function(b){for(var S=p(b),l=S.length;l--;){var A=S[l],j=b[A];S[l]=[A,j,r(j)]}return S}},function(a,E,e){var r=e(185),p=e(339),b=e(192),S=e(138),l=e(189),A=e(190),j=e(87);a.exports=function(y,n){return S(y)&&l(n)?A(j(y),n):function(s){var h=p(s,y);return h===void 0&&h===n?b(s,y):r(n,h,3)}}},function(a,E,e){var r=e(107);a.exports=function(p,b,S){var l=p==null?void 0:r(p,b);return l===void 0?S:l}},function(a,E,e){var r=e(341),p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,b=/\\(\\)?/g,S=r(function(l){var A=[];return l.charCodeAt(0)===46&&A.push(""),l.replace(p,function(j,y,n,s){A.push(n?s.replace(b,"$1"):y||j)}),A});a.exports=S},function(a,E,e){var r=e(342);a.exports=function(p){var b=r(p,function(l){return S.size===500&&S.clear(),l}),S=b.cache;return b}},function(a,E,e){var r=e(126);function p(b,S){if(typeof b!="function"||S!=null&&typeof S!="function")throw new TypeError("Expected a function");var l=function A(){var j=arguments,y=S?S.apply(this,j):j[0],n=A.cache;if(n.has(y))return n.get(y);var s=b.apply(this,j);return A.cache=n.set(y,s)||n,s};return l.cache=new(p.Cache||r),l}p.Cache=r,a.exports=p},function(a,E,e){var r=e(72),p=e(109),b=e(26),S=e(75),l=r?r.prototype:void 0,A=l?l.toString:void 0;a.exports=function j(y){if(typeof y=="string")return y;if(b(y))return p(y,j)+"";if(S(y))return A?A.call(y):"";var n=y+"";return n=="0"&&1/y==-1/0?"-0":n}},function(a,E){a.exports=function(e,r){return e!=null&&r in Object(e)}},function(a,E,e){var r=e(194),p=e(346),b=e(138),S=e(87);a.exports=function(l){return b(l)?r(S(l)):p(l)}},function(a,E,e){var r=e(107);a.exports=function(p){return function(b){return r(b,p)}}},function(a,E){var e=Object.prototype.hasOwnProperty;a.exports=function(r,p){return r!=null&&e.call(r,p)}},function(a,E,e){var r=e(130),p=e(74),b=e(85),S=e(26),l=e(53),A=e(73),j=e(104),y=e(44),n=Object.prototype.hasOwnProperty;a.exports=function(s){if(s==null)return!0;if(l(s)&&(S(s)||typeof s=="string"||typeof s.splice=="function"||A(s)||y(s)||b(s)))return!s.length;var h=p(s);if(h=="[object Map]"||h=="[object Set]")return!s.size;if(j(s))return!r(s).length;for(var M in s)if(n.call(s,M))return!1;return!0}},function(a,E){a.exports=function(e,r,p,b){var S=-1,l=e==null?0:e.length;for(b&&l&&(p=e[++S]);++S<l;)p=r(p,e[S],S,e);return p}},function(a,E){a.exports=function(e,r,p,b,S){return S(e,function(l,A,j){p=b?(b=!1,l):r(p,l,A,j)}),p}},function(a,E,e){var r=e(130),p=e(74),b=e(53),S=e(352),l=e(353);a.exports=function(A){if(A==null)return 0;if(b(A))return S(A)?l(A):A.length;var j=p(A);return j=="[object Map]"||j=="[object Set]"?A.size:r(A).length}},function(a,E,e){var r=e(57),p=e(26),b=e(48);a.exports=function(S){return typeof S=="string"||!p(S)&&b(S)&&r(S)=="[object String]"}},function(a,E,e){var r=e(354),p=e(355),b=e(356);a.exports=function(S){return p(S)?b(S):r(S)}},function(a,E,e){var r=e(194)("length");a.exports=r},function(a,E){var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");a.exports=function(r){return e.test(r)}},function(a,E){var e="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",p="\\ud83c[\\udffb-\\udfff]",b="[^\\ud800-\\udfff]",S="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]",A="(?:"+r+"|"+p+")?",j="[\\ufe0e\\ufe0f]?"+A+("(?:\\u200d(?:"+[b,S,l].join("|")+")[\\ufe0e\\ufe0f]?"+A+")*"),y="(?:"+[b+r+"?",r,S,l,e].join("|")+")",n=RegExp(p+"(?="+p+")|"+y+j,"g");a.exports=function(s){for(var h=n.lastIndex=0;n.test(s);)++h;return h}},function(a,E,e){var r=e(127),p=e(180),b=e(135),S=e(54),l=e(105),A=e(26),j=e(73),y=e(83),n=e(43),s=e(44);a.exports=function(h,M,O){var T=A(h),v=T||j(h)||s(h);if(M=S(M,4),O==null){var m=h&&h.constructor;O=v?T?new m:[]:n(h)&&y(m)?p(l(h)):{}}return(v?r:b)(h,function(C,D,Y){return M(O,C,D,Y)}),O}},function(a,E,e){var r=e(139),p=e(110),b=e(202),S=e(204),l=p(function(A){return b(r(A,1,S,!0))});a.exports=l},function(a,E,e){var r=e(72),p=e(85),b=e(26),S=r?r.isConcatSpreadable:void 0;a.exports=function(l){return b(l)||p(l)||!!(S&&l&&l[S])}},function(a,E){a.exports=function(e,r,p){switch(p.length){case 0:return e.call(r);case 1:return e.call(r,p[0]);case 2:return e.call(r,p[0],p[1]);case 3:return e.call(r,p[0],p[1],p[2])}return e.apply(r,p)}},function(a,E,e){var r=e(134),p=e(166),b=e(66),S=p?function(l,A){return p(l,"toString",{configurable:!0,enumerable:!1,value:r(A),writable:!0})}:b;a.exports=S},function(a,E){var e=Date.now;a.exports=function(r){var p=0,b=0;return function(){var S=e(),l=16-(S-b);if(b=S,l>0){if(++p>=800)return arguments[0]}else p=0;return r.apply(void 0,arguments)}}},function(a,E,e){var r=e(364);a.exports=function(p,b){return!!(p==null?0:p.length)&&r(p,b,0)>-1}},function(a,E,e){var r=e(203),p=e(365),b=e(366);a.exports=function(S,l,A){return l==l?b(S,l,A):r(S,p,A)}},function(a,E){a.exports=function(e){return e!=e}},function(a,E){a.exports=function(e,r,p){for(var b=p-1,S=e.length;++b<S;)if(e[b]===r)return b;return-1}},function(a,E){a.exports=function(e,r,p){for(var b=-1,S=e==null?0:e.length;++b<S;)if(p(r,e[b]))return!0;return!1}},function(a,E,e){var r=e(176),p=e(369),b=e(137),S=r&&1/b(new r([,-0]))[1]==1/0?function(l){return new r(l)}:p;a.exports=S},function(a,E){a.exports=function(){}},function(a,E,e){var r=e(109);a.exports=function(p,b){return r(b,function(S){return p[S]})}},function(a,E){a.exports="2.1.8"},function(a,E,e){var r=e(42),p=e(124);function b(l){return r.map(l.nodes(),function(A){var j=l.node(A),y=l.parent(A),n={v:A};return r.isUndefined(j)||(n.value=j),r.isUndefined(y)||(n.parent=y),n})}function S(l){return r.map(l.edges(),function(A){var j=l.edge(A),y={v:A.v,w:A.w};return r.isUndefined(A.name)||(y.name=A.name),r.isUndefined(j)||(y.value=j),y})}a.exports={write:function(A){var j={options:{directed:A.isDirected(),multigraph:A.isMultigraph(),compound:A.isCompound()},nodes:b(A),edges:S(A)};return r.isUndefined(A.graph())||(j.value=r.clone(A.graph())),j},read:function(A){var j=new p(A.options).setGraph(A.value);return r.each(A.nodes,function(y){j.setNode(y.v,y.value),y.parent&&j.setParent(y.v,y.parent)}),r.each(A.edges,function(y){j.setEdge({v:y.v,w:y.w,name:y.name},y.value)}),j}}},function(a,E,e){a.exports={components:e(374),dijkstra:e(206),dijkstraAll:e(375),findCycles:e(376),floydWarshall:e(377),isAcyclic:e(378),postorder:e(379),preorder:e(380),prim:e(381),tarjan:e(208),topsort:e(209)}},function(a,E,e){var r=e(42);a.exports=function(p){var b,S={},l=[];function A(j){r.has(S,j)||(S[j]=!0,b.push(j),r.each(p.successors(j),A),r.each(p.predecessors(j),A))}return r.each(p.nodes(),function(j){b=[],A(j),b.length&&l.push(b)}),l}},function(a,E,e){var r=e(206),p=e(42);a.exports=function(b,S,l){return p.transform(b.nodes(),function(A,j){A[j]=r(b,j,S,l)},{})}},function(a,E,e){var r=e(42),p=e(208);a.exports=function(b){return r.filter(p(b),function(S){return S.length>1||S.length===1&&b.hasEdge(S[0],S[0])})}},function(a,E,e){var r=e(42);a.exports=function(b,S,l){return function(A,j,y){var n={},s=A.nodes();return s.forEach(function(h){n[h]={},n[h][h]={distance:0},s.forEach(function(M){h!==M&&(n[h][M]={distance:Number.POSITIVE_INFINITY})}),y(h).forEach(function(M){var O=M.v===h?M.w:M.v,T=j(M);n[h][O]={distance:T,predecessor:h}})}),s.forEach(function(h){var M=n[h];s.forEach(function(O){var T=n[O];s.forEach(function(v){var m=T[h],C=M[v],D=T[v],Y=m.distance+C.distance;Y<D.distance&&(D.distance=Y,D.predecessor=C.predecessor)})})}),n}(b,S||p,l||function(A){return b.outEdges(A)})};var p=r.constant(1)},function(a,E,e){var r=e(209);a.exports=function(p){try{r(p)}catch(b){if(b instanceof r.CycleException)return!1;throw b}return!0}},function(a,E,e){var r=e(210);a.exports=function(p,b){return r(p,b,"post")}},function(a,E,e){var r=e(210);a.exports=function(p,b){return r(p,b,"pre")}},function(a,E,e){var r=e(42),p=e(124),b=e(207);a.exports=function(S,l){var A,j=new p,y={},n=new b;function s(M){var O=M.v===A?M.w:M.v,T=n.priority(O);if(T!==void 0){var v=l(M);v<T&&(y[O]=A,n.decrease(O,v))}}if(S.nodeCount()===0)return j;r.each(S.nodes(),function(M){n.add(M,Number.POSITIVE_INFINITY),j.setNode(M)}),n.decrease(S.nodes()[0],0);for(var h=!1;n.size()>0;){if(A=n.removeMin(),r.has(y,A))j.setEdge(A,y[A]);else{if(h)throw new Error("Input graph is not connected: "+S);h=!0}S.nodeEdges(A).forEach(s)}return j}},function(a,E,e){"use strict";var r=e(24),p=e(419),b=e(422),S=e(423),l=e(37).normalizeRanks,A=e(425),j=e(37).removeEmptyRanks,y=e(426),n=e(427),s=e(428),h=e(429),M=e(438),O=e(37),T=e(46).Graph;a.exports=function(wt,xt){var ft=xt&&xt.debugTiming?O.time:O.notime;ft("layout",function(){var Bt=ft("  buildLayoutGraph",function(){return function(Rt){var Ot=new T({multigraph:!0,compound:!0}),X=St(Rt.graph());return Ot.setGraph(r.merge({},m,ht(X,v),r.pick(X,C))),r.forEach(Rt.nodes(),function(ut){var vt=St(Rt.node(ut));Ot.setNode(ut,r.defaults(ht(vt,D),Y)),Ot.setParent(ut,Rt.parent(ut))}),r.forEach(Rt.edges(),function(ut){var vt=St(Rt.edge(ut));Ot.setEdge(ut,r.merge({},et,ht(vt,Z),r.pick(vt,dt)))}),Ot}(wt)});ft("  runLayout",function(){(function(Rt,Ot){Ot("    makeSpaceForEdgeLabels",function(){(function(X){var ut=X.graph();ut.ranksep/=2,r.forEach(X.edges(),function(vt){var pt=X.edge(vt);pt.minlen*=2,pt.labelpos.toLowerCase()!=="c"&&(ut.rankdir==="TB"||ut.rankdir==="BT"?pt.width+=pt.labeloffset:pt.height+=pt.labeloffset)})})(Rt)}),Ot("    removeSelfEdges",function(){(function(X){r.forEach(X.edges(),function(ut){if(ut.v===ut.w){var vt=X.node(ut.v);vt.selfEdges||(vt.selfEdges=[]),vt.selfEdges.push({e:ut,label:X.edge(ut)}),X.removeEdge(ut)}})})(Rt)}),Ot("    acyclic",function(){p.run(Rt)}),Ot("    nestingGraph.run",function(){y.run(Rt)}),Ot("    rank",function(){S(O.asNonCompoundGraph(Rt))}),Ot("    injectEdgeLabelProxies",function(){(function(X){r.forEach(X.edges(),function(ut){var vt=X.edge(ut);if(vt.width&&vt.height){var pt=X.node(ut.v),Et={rank:(X.node(ut.w).rank-pt.rank)/2+pt.rank,e:ut};O.addDummyNode(X,"edge-proxy",Et,"_ep")}})})(Rt)}),Ot("    removeEmptyRanks",function(){j(Rt)}),Ot("    nestingGraph.cleanup",function(){y.cleanup(Rt)}),Ot("    normalizeRanks",function(){l(Rt)}),Ot("    assignRankMinMax",function(){(function(X){var ut=0;r.forEach(X.nodes(),function(vt){var pt=X.node(vt);pt.borderTop&&(pt.minRank=X.node(pt.borderTop).rank,pt.maxRank=X.node(pt.borderBottom).rank,ut=r.max(ut,pt.maxRank))}),X.graph().maxRank=ut})(Rt)}),Ot("    removeEdgeLabelProxies",function(){(function(X){r.forEach(X.nodes(),function(ut){var vt=X.node(ut);vt.dummy==="edge-proxy"&&(X.edge(vt.e).labelRank=vt.rank,X.removeNode(ut))})})(Rt)}),Ot("    normalize.run",function(){b.run(Rt)}),Ot("    parentDummyChains",function(){A(Rt)}),Ot("    addBorderSegments",function(){n(Rt)}),Ot("    order",function(){h(Rt)}),Ot("    insertSelfEdges",function(){(function(X){var ut=O.buildLayerMatrix(X);r.forEach(ut,function(vt){var pt=0;r.forEach(vt,function(Et,q){var st=X.node(Et);st.order=q+pt,r.forEach(st.selfEdges,function(it){O.addDummyNode(X,"selfedge",{width:it.label.width,height:it.label.height,rank:st.rank,order:q+ ++pt,e:it.e,label:it.label},"_se")}),delete st.selfEdges})})})(Rt)}),Ot("    adjustCoordinateSystem",function(){s.adjust(Rt)}),Ot("    position",function(){M(Rt)}),Ot("    positionSelfEdges",function(){(function(X){r.forEach(X.nodes(),function(ut){var vt=X.node(ut);if(vt.dummy==="selfedge"){var pt=X.node(vt.e.v),Et=pt.x+pt.width/2,q=pt.y,st=vt.x-Et,it=pt.height/2;X.setEdge(vt.e,vt.label),X.removeNode(ut),vt.label.points=[{x:Et+2*st/3,y:q-it},{x:Et+5*st/6,y:q-it},{x:Et+st,y:q},{x:Et+5*st/6,y:q+it},{x:Et+2*st/3,y:q+it}],vt.label.x=vt.x,vt.label.y=vt.y}})})(Rt)}),Ot("    removeBorderNodes",function(){(function(X){r.forEach(X.nodes(),function(ut){if(X.children(ut).length){var vt=X.node(ut),pt=X.node(vt.borderTop),Et=X.node(vt.borderBottom),q=X.node(r.last(vt.borderLeft)),st=X.node(r.last(vt.borderRight));vt.width=Math.abs(st.x-q.x),vt.height=Math.abs(Et.y-pt.y),vt.x=q.x+vt.width/2,vt.y=pt.y+vt.height/2}}),r.forEach(X.nodes(),function(ut){X.node(ut).dummy==="border"&&X.removeNode(ut)})})(Rt)}),Ot("    normalize.undo",function(){b.undo(Rt)}),Ot("    fixupEdgeLabelCoords",function(){(function(X){r.forEach(X.edges(),function(ut){var vt=X.edge(ut);if(r.has(vt,"x"))switch(vt.labelpos!=="l"&&vt.labelpos!=="r"||(vt.width-=vt.labeloffset),vt.labelpos){case"l":vt.x-=vt.width/2+vt.labeloffset;break;case"r":vt.x+=vt.width/2+vt.labeloffset}})})(Rt)}),Ot("    undoCoordinateSystem",function(){s.undo(Rt)}),Ot("    translateGraph",function(){(function(X){var ut=Number.POSITIVE_INFINITY,vt=0,pt=Number.POSITIVE_INFINITY,Et=0,q=X.graph(),st=q.marginx||0,it=q.marginy||0;function z(P){var H=P.x,k=P.y,d=P.width,g=P.height;ut=Math.min(ut,H-d/2),vt=Math.max(vt,H+d/2),pt=Math.min(pt,k-g/2),Et=Math.max(Et,k+g/2)}r.forEach(X.nodes(),function(P){z(X.node(P))}),r.forEach(X.edges(),function(P){var H=X.edge(P);r.has(H,"x")&&z(H)}),ut-=st,pt-=it,r.forEach(X.nodes(),function(P){var H=X.node(P);H.x-=ut,H.y-=pt}),r.forEach(X.edges(),function(P){var H=X.edge(P);r.forEach(H.points,function(k){k.x-=ut,k.y-=pt}),r.has(H,"x")&&(H.x-=ut),r.has(H,"y")&&(H.y-=pt)}),q.width=vt-ut+st,q.height=Et-pt+it})(Rt)}),Ot("    assignNodeIntersects",function(){(function(X){r.forEach(X.edges(),function(ut){var vt,pt,Et=X.edge(ut),q=X.node(ut.v),st=X.node(ut.w);Et.points?(vt=Et.points[0],pt=Et.points[Et.points.length-1]):(Et.points=[],vt=st,pt=q),Et.points.unshift(O.intersectRect(q,vt)),Et.points.push(O.intersectRect(st,pt))})})(Rt)}),Ot("    reversePoints",function(){(function(X){r.forEach(X.edges(),function(ut){var vt=X.edge(ut);vt.reversed&&vt.points.reverse()})})(Rt)}),Ot("    acyclic.undo",function(){p.undo(Rt)})})(Bt,ft)}),ft("  updateInputGraph",function(){(function(Rt,Ot){r.forEach(Rt.nodes(),function(X){var ut=Rt.node(X),vt=Ot.node(X);ut&&(ut.x=vt.x,ut.y=vt.y,Ot.children(X).length&&(ut.width=vt.width,ut.height=vt.height))}),r.forEach(Rt.edges(),function(X){var ut=Rt.edge(X),vt=Ot.edge(X);ut.points=vt.points,r.has(vt,"x")&&(ut.x=vt.x,ut.y=vt.y)}),Rt.graph().width=Ot.graph().width,Rt.graph().height=Ot.graph().height})(wt,Bt)})})};var v=["nodesep","edgesep","ranksep","marginx","marginy"],m={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},C=["acyclicer","ranker","rankdir","align"],D=["width","height"],Y={width:0,height:0},Z=["minlen","weight","width","height","labeloffset"],et={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},dt=["labelpos"];function ht(wt,xt){return r.mapValues(r.pick(wt,xt),Number)}function St(wt){var xt={};return r.forEach(wt,function(ft,Bt){xt[Bt.toLowerCase()]=ft}),xt}},function(a,E,e){var r=e(162);a.exports=function(p){return r(p,5)}},function(a,E,e){var r=e(110),p=e(71),b=e(111),S=e(65),l=Object.prototype,A=l.hasOwnProperty,j=r(function(y,n){y=Object(y);var s=-1,h=n.length,M=h>2?n[2]:void 0;for(M&&b(n[0],n[1],M)&&(h=1);++s<h;)for(var O=n[s],T=S(O),v=-1,m=T.length;++v<m;){var C=T[v],D=y[C];(D===void 0||p(D,l[C])&&!A.call(y,C))&&(y[C]=O[C])}return y});a.exports=j},function(a,E,e){var r=e(386)(e(387));a.exports=r},function(a,E,e){var r=e(54),p=e(53),b=e(58);a.exports=function(S){return function(l,A,j){var y=Object(l);if(!p(l)){var n=r(A,3);l=b(l),A=function(M){return n(y[M],M,y)}}var s=S(l,A,j);return s>-1?y[n?l[s]:s]:void 0}}},function(a,E,e){var r=e(203),p=e(54),b=e(388),S=Math.max;a.exports=function(l,A,j){var y=l==null?0:l.length;if(!y)return-1;var n=j==null?0:b(j);return n<0&&(n=S(y+n,0)),r(l,p(A,3),n)}},function(a,E,e){var r=e(211);a.exports=function(p){var b=r(p),S=b%1;return b==b?S?b-S:b:0}},function(a,E,e){var r=e(43),p=e(75),b=/^\s+|\s+$/g,S=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,A=/^0o[0-7]+$/i,j=parseInt;a.exports=function(y){if(typeof y=="number")return y;if(p(y))return NaN;if(r(y)){var n=typeof y.valueOf=="function"?y.valueOf():y;y=r(n)?n+"":n}if(typeof y!="string")return y===0?y:+y;y=y.replace(b,"");var s=l.test(y);return s||A.test(y)?j(y.slice(2),s?2:8):S.test(y)?NaN:+y}},function(a,E,e){var r=e(136),p=e(183),b=e(65);a.exports=function(S,l){return S==null?S:r(S,p(l),b)}},function(a,E){a.exports=function(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}},function(a,E,e){var r=e(101),p=e(135),b=e(54);a.exports=function(S,l){var A={};return l=b(l,3),p(S,function(j,y,n){r(A,y,l(j,y,n))}),A}},function(a,E,e){var r=e(140),p=e(394),b=e(66);a.exports=function(S){return S&&S.length?r(S,b,p):void 0}},function(a,E){a.exports=function(e,r){return e>r}},function(a,E,e){var r=e(396),p=e(399)(function(b,S,l){r(b,S,l)});a.exports=p},function(a,E,e){var r=e(95),p=e(213),b=e(136),S=e(397),l=e(43),A=e(65),j=e(214);a.exports=function y(n,s,h,M,O){n!==s&&b(s,function(T,v){if(O||(O=new r),l(T))S(n,s,v,h,y,M,O);else{var m=M?M(j(n,v),T,v+"",n,s,O):void 0;m===void 0&&(m=T),p(n,v,m)}},A)}},function(a,E,e){var r=e(213),p=e(169),b=e(178),S=e(170),l=e(179),A=e(85),j=e(26),y=e(204),n=e(73),s=e(83),h=e(43),M=e(151),O=e(44),T=e(214),v=e(398);a.exports=function(m,C,D,Y,Z,et,dt){var ht=T(m,D),St=T(C,D),wt=dt.get(St);if(wt)r(m,D,wt);else{var xt=et?et(ht,St,D+"",m,C,dt):void 0,ft=xt===void 0;if(ft){var Bt=j(St),Rt=!Bt&&n(St),Ot=!Bt&&!Rt&&O(St);xt=St,Bt||Rt||Ot?j(ht)?xt=ht:y(ht)?xt=S(ht):Rt?(ft=!1,xt=p(St,!0)):Ot?(ft=!1,xt=b(St,!0)):xt=[]:M(St)||A(St)?(xt=ht,A(ht)?xt=v(ht):h(ht)&&!s(ht)||(xt=l(St))):ft=!1}ft&&(dt.set(St,xt),Z(xt,St,Y,et,dt),dt.delete(St)),r(m,D,xt)}}},function(a,E,e){var r=e(84),p=e(65);a.exports=function(b){return r(b,p(b))}},function(a,E,e){var r=e(110),p=e(111);a.exports=function(b){return r(function(S,l){var A=-1,j=l.length,y=j>1?l[j-1]:void 0,n=j>2?l[2]:void 0;for(y=b.length>3&&typeof y=="function"?(j--,y):void 0,n&&p(l[0],l[1],n)&&(y=j<3?void 0:y,j=1),S=Object(S);++A<j;){var s=l[A];s&&b(S,s,A,y)}return S})}},function(a,E,e){var r=e(140),p=e(215),b=e(66);a.exports=function(S){return S&&S.length?r(S,b,p):void 0}},function(a,E,e){var r=e(140),p=e(54),b=e(215);a.exports=function(S,l){return S&&S.length?r(S,p(l,2),b):void 0}},function(a,E,e){var r=e(47);a.exports=function(){return r.Date.now()}},function(a,E,e){var r=e(404),p=e(407)(function(b,S){return b==null?{}:r(b,S)});a.exports=p},function(a,E,e){var r=e(405),p=e(192);a.exports=function(b,S){return r(b,S,function(l,A){return p(b,A)})}},function(a,E,e){var r=e(107),p=e(406),b=e(108);a.exports=function(S,l,A){for(var j=-1,y=l.length,n={};++j<y;){var s=l[j],h=r(S,s);A(h,s)&&p(n,b(s,S),h)}return n}},function(a,E,e){var r=e(100),p=e(108),b=e(102),S=e(43),l=e(87);a.exports=function(A,j,y,n){if(!S(A))return A;for(var s=-1,h=(j=p(j,A)).length,M=h-1,O=A;O!=null&&++s<h;){var T=l(j[s]),v=y;if(T==="__proto__"||T==="constructor"||T==="prototype")return A;if(s!=M){var m=O[T];(v=n?n(m,T,O):void 0)===void 0&&(v=S(m)?m:b(j[s+1])?[]:{})}r(O,T,v),O=O[T]}return A}},function(a,E,e){var r=e(212),p=e(200),b=e(201);a.exports=function(S){return b(p(S,void 0,r),S+"")}},function(a,E,e){var r=e(409)();a.exports=r},function(a,E,e){var r=e(410),p=e(111),b=e(211);a.exports=function(S){return function(l,A,j){return j&&typeof j!="number"&&p(l,A,j)&&(A=j=void 0),l=b(l),A===void 0?(A=l,l=0):A=b(A),j=j===void 0?l<A?1:-1:b(j),r(l,A,j,S)}}},function(a,E){var e=Math.ceil,r=Math.max;a.exports=function(p,b,S,l){for(var A=-1,j=r(e((b-p)/(S||1)),0),y=Array(j);j--;)y[l?j:++A]=p,p+=S;return y}},function(a,E,e){var r=e(139),p=e(412),b=e(110),S=e(111),l=b(function(A,j){if(A==null)return[];var y=j.length;return y>1&&S(A,j[0],j[1])?j=[]:y>2&&S(j[0],j[1],j[2])&&(j=[j[0]]),p(A,r(j,1),[])});a.exports=l},function(a,E,e){var r=e(109),p=e(107),b=e(54),S=e(198),l=e(413),A=e(103),j=e(414),y=e(66),n=e(26);a.exports=function(s,h,M){h=h.length?r(h,function(v){return n(v)?function(m){return p(m,v.length===1?v[0]:v)}:v}):[y];var O=-1;h=r(h,A(b));var T=S(s,function(v,m,C){return{criteria:r(h,function(D){return D(v)}),index:++O,value:v}});return l(T,function(v,m){return j(v,m,M)})}},function(a,E){a.exports=function(e,r){var p=e.length;for(e.sort(r);p--;)e[p]=e[p].value;return e}},function(a,E,e){var r=e(415);a.exports=function(p,b,S){for(var l=-1,A=p.criteria,j=b.criteria,y=A.length,n=S.length;++l<y;){var s=r(A[l],j[l]);if(s)return l>=n?s:s*(S[l]=="desc"?-1:1)}return p.index-b.index}},function(a,E,e){var r=e(75);a.exports=function(p,b){if(p!==b){var S=p!==void 0,l=p===null,A=p==p,j=r(p),y=b!==void 0,n=b===null,s=b==b,h=r(b);if(!n&&!h&&!j&&p>b||j&&y&&s&&!n&&!h||l&&y&&s||!S&&s||!A)return 1;if(!l&&!j&&!h&&p<b||h&&S&&A&&!l&&!j||n&&S&&A||!y&&A||!s)return-1}return 0}},function(a,E,e){var r=e(191),p=0;a.exports=function(b){var S=++p;return r(b)+S}},function(a,E,e){var r=e(100),p=e(418);a.exports=function(b,S){return p(b||[],S||[],r)}},function(a,E){a.exports=function(e,r,p){for(var b=-1,S=e.length,l=r.length,A={};++b<S;){var j=b<l?r[b]:void 0;p(A,e[b],j)}return A}},function(a,E,e){"use strict";var r=e(24),p=e(420);a.exports={run:function(S){var l=S.graph().acyclicer==="greedy"?p(S,function(A){return function(j){return A.edge(j).weight}}(S)):function(A){var j=[],y={},n={};function s(h){r.has(n,h)||(n[h]=!0,y[h]=!0,r.forEach(A.outEdges(h),function(M){r.has(y,M.w)?j.push(M):s(M.w)}),delete y[h])}return r.forEach(A.nodes(),s),j}(S);r.forEach(l,function(A){var j=S.edge(A);S.removeEdge(A),j.forwardName=A.name,j.reversed=!0,S.setEdge(A.w,A.v,j,r.uniqueId("rev"))})},undo:function(S){r.forEach(S.edges(),function(l){var A=S.edge(l);if(A.reversed){S.removeEdge(l);var j=A.forwardName;delete A.reversed,delete A.forwardName,S.setEdge(l.w,l.v,A,j)}})}}},function(a,E,e){var r=e(24),p=e(46).Graph,b=e(421);a.exports=function(j,y){if(j.nodeCount()<=1)return[];var n=function(h,M){var O=new p,T=0,v=0;r.forEach(h.nodes(),function(D){O.setNode(D,{v:D,in:0,out:0})}),r.forEach(h.edges(),function(D){var Y=O.edge(D.v,D.w)||0,Z=M(D),et=Y+Z;O.setEdge(D.v,D.w,et),v=Math.max(v,O.node(D.v).out+=Z),T=Math.max(T,O.node(D.w).in+=Z)});var m=r.range(v+T+3).map(function(){return new b}),C=T+1;return r.forEach(O.nodes(),function(D){A(m,C,O.node(D))}),{graph:O,buckets:m,zeroIdx:C}}(j,y||S),s=function(h,M,O){for(var T,v=[],m=M[M.length-1],C=M[0];h.nodeCount();){for(;T=C.dequeue();)l(h,M,O,T);for(;T=m.dequeue();)l(h,M,O,T);if(h.nodeCount()){for(var D=M.length-2;D>0;--D)if(T=M[D].dequeue()){v=v.concat(l(h,M,O,T,!0));break}}}return v}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(s,function(h){return j.outEdges(h.v,h.w)}),!0)};var S=r.constant(1);function l(j,y,n,s,h){var M=h?[]:void 0;return r.forEach(j.inEdges(s.v),function(O){var T=j.edge(O),v=j.node(O.v);h&&M.push({v:O.v,w:O.w}),v.out-=T,A(y,n,v)}),r.forEach(j.outEdges(s.v),function(O){var T=j.edge(O),v=O.w,m=j.node(v);m.in-=T,A(y,n,m)}),j.removeNode(s.v),M}function A(j,y,n){n.out?n.in?j[n.out-n.in+y].enqueue(n):j[j.length-1].enqueue(n):j[0].enqueue(n)}},function(a,E){function e(){var b={};b._next=b._prev=b,this._sentinel=b}function r(b){b._prev._next=b._next,b._next._prev=b._prev,delete b._next,delete b._prev}function p(b,S){if(b!=="_next"&&b!=="_prev")return S}a.exports=e,e.prototype.dequeue=function(){var b=this._sentinel,S=b._prev;if(S!==b)return r(S),S},e.prototype.enqueue=function(b){var S=this._sentinel;b._prev&&b._next&&r(b),b._next=S._next,S._next._prev=b,S._next=b,b._prev=S},e.prototype.toString=function(){for(var b=[],S=this._sentinel,l=S._prev;l!==S;)b.push(JSON.stringify(l,p)),l=l._prev;return"["+b.join(", ")+"]"}},function(a,E,e){"use strict";var r=e(24),p=e(37);a.exports={run:function(S){S.graph().dummyChains=[],r.forEach(S.edges(),function(l){(function(A,j){var y,n,s,h=j.v,M=A.node(h).rank,O=j.w,T=A.node(O).rank,v=j.name,m=A.edge(j),C=m.labelRank;if(T!==M+1){for(A.removeEdge(j),s=0,++M;M<T;++s,++M)m.points=[],n={width:0,height:0,edgeLabel:m,edgeObj:j,rank:M},y=p.addDummyNode(A,"edge",n,"_d"),M===C&&(n.width=m.width,n.height=m.height,n.dummy="edge-label",n.labelpos=m.labelpos),A.setEdge(h,y,{weight:m.weight},v),s===0&&A.graph().dummyChains.push(y),h=y;A.setEdge(h,O,{weight:m.weight},v)}})(S,l)})},undo:function(S){r.forEach(S.graph().dummyChains,function(l){var A,j=S.node(l),y=j.edgeLabel;for(S.setEdge(j.edgeObj,y);j.dummy;)A=S.successors(l)[0],S.removeNode(l),y.points.push({x:j.x,y:j.y}),j.dummy==="edge-label"&&(y.x=j.x,y.y=j.y,y.width=j.width,y.height=j.height),l=A,j=S.node(l)})}}},function(a,E,e){"use strict";var r=e(112).longestPath,p=e(216),b=e(424);a.exports=function(A){switch(A.graph().ranker){case"network-simplex":l(A);break;case"tight-tree":(function(j){r(j),p(j)})(A);break;case"longest-path":S(A);break;default:l(A)}};var S=r;function l(A){b(A)}},function(a,E,e){"use strict";var r=e(24),p=e(216),b=e(112).slack,S=e(112).longestPath,l=e(46).alg.preorder,A=e(46).alg.postorder,j=e(37).simplify;function y(C){C=j(C),S(C);var D,Y=p(C);for(h(Y),n(Y,C);D=O(Y);)v(Y,C,D,T(Y,C,D))}function n(C,D){var Y=A(C,C.nodes());Y=Y.slice(0,Y.length-1),r.forEach(Y,function(Z){(function(et,dt,ht){var St=et.node(ht).parent;et.edge(ht,St).cutvalue=s(et,dt,ht)})(C,D,Z)})}function s(C,D,Y){var Z=C.node(Y).parent,et=!0,dt=D.edge(Y,Z),ht=0;return dt||(et=!1,dt=D.edge(Z,Y)),ht=dt.weight,r.forEach(D.nodeEdges(Y),function(St){var wt,xt,ft=St.v===Y,Bt=ft?St.w:St.v;if(Bt!==Z){var Rt=ft===et,Ot=D.edge(St).weight;if(ht+=Rt?Ot:-Ot,wt=Y,xt=Bt,C.hasEdge(wt,xt)){var X=C.edge(Y,Bt).cutvalue;ht+=Rt?-X:X}}}),ht}function h(C,D){arguments.length<2&&(D=C.nodes()[0]),M(C,{},1,D)}function M(C,D,Y,Z,et){var dt=Y,ht=C.node(Z);return D[Z]=!0,r.forEach(C.neighbors(Z),function(St){r.has(D,St)||(Y=M(C,D,Y,St,Z))}),ht.low=dt,ht.lim=Y++,et?ht.parent=et:delete ht.parent,Y}function O(C){return r.find(C.edges(),function(D){return C.edge(D).cutvalue<0})}function T(C,D,Y){var Z=Y.v,et=Y.w;D.hasEdge(Z,et)||(Z=Y.w,et=Y.v);var dt=C.node(Z),ht=C.node(et),St=dt,wt=!1;dt.lim>ht.lim&&(St=ht,wt=!0);var xt=r.filter(D.edges(),function(ft){return wt===m(C,C.node(ft.v),St)&&wt!==m(C,C.node(ft.w),St)});return r.minBy(xt,function(ft){return b(D,ft)})}function v(C,D,Y,Z){var et=Y.v,dt=Y.w;C.removeEdge(et,dt),C.setEdge(Z.v,Z.w,{}),h(C),n(C,D),function(ht,St){var wt=r.find(ht.nodes(),function(ft){return!St.node(ft).parent}),xt=l(ht,wt);xt=xt.slice(1),r.forEach(xt,function(ft){var Bt=ht.node(ft).parent,Rt=St.edge(ft,Bt),Ot=!1;Rt||(Rt=St.edge(Bt,ft),Ot=!0),St.node(ft).rank=St.node(Bt).rank+(Ot?Rt.minlen:-Rt.minlen)})}(C,D)}function m(C,D,Y){return Y.low<=D.lim&&D.lim<=Y.lim}a.exports=y,y.initLowLimValues=h,y.initCutValues=n,y.calcCutValue=s,y.leaveEdge=O,y.enterEdge=T,y.exchangeEdges=v},function(a,E,e){var r=e(24);a.exports=function(p){var b=function(S){var l={},A=0;function j(y){var n=A;r.forEach(S.children(y),j),l[y]={low:n,lim:A++}}return r.forEach(S.children(),j),l}(p);r.forEach(p.graph().dummyChains,function(S){for(var l=p.node(S),A=l.edgeObj,j=function(O,T,v,m){var C,D,Y=[],Z=[],et=Math.min(T[v].low,T[m].low),dt=Math.max(T[v].lim,T[m].lim);C=v;do C=O.parent(C),Y.push(C);while(C&&(T[C].low>et||dt>T[C].lim));for(D=C,C=m;(C=O.parent(C))!==D;)Z.push(C);return{path:Y.concat(Z.reverse()),lca:D}}(p,b,A.v,A.w),y=j.path,n=j.lca,s=0,h=y[s],M=!0;S!==A.w;){if(l=p.node(S),M){for(;(h=y[s])!==n&&p.node(h).maxRank<l.rank;)s++;h===n&&(M=!1)}if(!M){for(;s<y.length-1&&p.node(h=y[s+1]).minRank<=l.rank;)s++;h=y[s]}p.setParent(S,h),S=p.successors(S)[0]}})}},function(a,E,e){var r=e(24),p=e(37);a.exports={run:function(S){var l=p.addDummyNode(S,"root",{},"_root"),A=function(s){var h={};return r.forEach(s.children(),function(M){(function O(T,v){var m=s.children(T);m&&m.length&&r.forEach(m,function(C){O(C,v+1)}),h[T]=v})(M,1)}),h}(S),j=r.max(r.values(A))-1,y=2*j+1;S.graph().nestingRoot=l,r.forEach(S.edges(),function(s){S.edge(s).minlen*=y});var n=function(s){return r.reduce(s.edges(),function(h,M){return h+s.edge(M).weight},0)}(S)+1;r.forEach(S.children(),function(s){(function h(M,O,T,v,m,C,D){var Y=M.children(D);if(!Y.length)return void(D!==O&&M.setEdge(O,D,{weight:0,minlen:T}));var Z=p.addBorderNode(M,"_bt"),et=p.addBorderNode(M,"_bb"),dt=M.node(D);M.setParent(Z,D),dt.borderTop=Z,M.setParent(et,D),dt.borderBottom=et,r.forEach(Y,function(ht){h(M,O,T,v,m,C,ht);var St=M.node(ht),wt=St.borderTop?St.borderTop:ht,xt=St.borderBottom?St.borderBottom:ht,ft=St.borderTop?v:2*v,Bt=wt!==xt?1:m-C[D]+1;M.setEdge(Z,wt,{weight:ft,minlen:Bt,nestingEdge:!0}),M.setEdge(xt,et,{weight:ft,minlen:Bt,nestingEdge:!0})}),M.parent(D)||M.setEdge(O,Z,{weight:0,minlen:m+C[D]})})(S,l,y,n,j,A,s)}),S.graph().nodeRankFactor=y},cleanup:function(S){var l=S.graph();S.removeNode(l.nestingRoot),delete l.nestingRoot,r.forEach(S.edges(),function(A){S.edge(A).nestingEdge&&S.removeEdge(A)})}}},function(a,E,e){var r=e(24),p=e(37);function b(S,l,A,j,y,n){var s={width:0,height:0,rank:n,borderType:l},h=y[l][n-1],M=p.addDummyNode(S,"border",s,A);y[l][n]=M,S.setParent(M,j),h&&S.setEdge(h,M,{weight:1})}a.exports=function(S){r.forEach(S.children(),function l(A){var j=S.children(A),y=S.node(A);if(j.length&&r.forEach(j,l),r.has(y,"minRank")){y.borderLeft=[],y.borderRight=[];for(var n=y.minRank,s=y.maxRank+1;n<s;++n)b(S,"borderLeft","_bl",A,y,n),b(S,"borderRight","_br",A,y,n)}})}},function(a,E,e){"use strict";var r=e(24);function p(A){r.forEach(A.nodes(),function(j){b(A.node(j))}),r.forEach(A.edges(),function(j){b(A.edge(j))})}function b(A){var j=A.width;A.width=A.height,A.height=j}function S(A){A.y=-A.y}function l(A){var j=A.x;A.x=A.y,A.y=j}a.exports={adjust:function(j){var y=j.graph().rankdir.toLowerCase();y!=="lr"&&y!=="rl"||p(j)},undo:function(j){var y=j.graph().rankdir.toLowerCase();y!=="bt"&&y!=="rl"||function(n){r.forEach(n.nodes(),function(s){S(n.node(s))}),r.forEach(n.edges(),function(s){var h=n.edge(s);r.forEach(h.points,S),r.has(h,"y")&&S(h)})}(j),y!=="lr"&&y!=="rl"||(function(n){r.forEach(n.nodes(),function(s){l(n.node(s))}),r.forEach(n.edges(),function(s){var h=n.edge(s);r.forEach(h.points,l),r.has(h,"x")&&l(h)})}(j),p(j))}}},function(a,E,e){"use strict";var r=e(24),p=e(430),b=e(431),S=e(432),l=e(436),A=e(437),j=e(46).Graph,y=e(37);function n(M,O,T){return r.map(O,function(v){return l(M,v,T)})}function s(M,O){var T=new j;r.forEach(M,function(v){var m=v.graph().root,C=S(v,m,T,O);r.forEach(C.vs,function(D,Y){v.node(D).order=Y}),A(v,T,C.vs)})}function h(M,O){r.forEach(O,function(T){r.forEach(T,function(v,m){M.node(v).order=m})})}a.exports=function(M){var O=y.maxRank(M),T=n(M,r.range(1,O+1),"inEdges"),v=n(M,r.range(O-1,-1,-1),"outEdges"),m=p(M);h(M,m);for(var C,D=Number.POSITIVE_INFINITY,Y=0,Z=0;Z<4;++Y,++Z){s(Y%2?T:v,Y%4>=2),m=y.buildLayerMatrix(M);var et=b(M,m);et<D&&(Z=0,C=r.cloneDeep(m),D=et)}h(M,C)}},function(a,E,e){"use strict";var r=e(24);a.exports=function(p){var b={},S=r.filter(p.nodes(),function(y){return!p.children(y).length}),l=r.max(r.map(S,function(y){return p.node(y).rank})),A=r.map(r.range(l+1),function(){return[]}),j=r.sortBy(S,function(y){return p.node(y).rank});return r.forEach(j,function y(n){if(!r.has(b,n)){b[n]=!0;var s=p.node(n);A[s.rank].push(n),r.forEach(p.successors(n),y)}}),A}},function(a,E,e){"use strict";var r=e(24);function p(b,S,l){for(var A=r.zipObject(l,r.map(l,function(M,O){return O})),j=r.flatten(r.map(S,function(M){return r.sortBy(r.map(b.outEdges(M),function(O){return{pos:A[O.w],weight:b.edge(O).weight}}),"pos")}),!0),y=1;y<l.length;)y<<=1;var n=2*y-1;y-=1;var s=r.map(new Array(n),function(){return 0}),h=0;return r.forEach(j.forEach(function(M){var O=M.pos+y;s[O]+=M.weight;for(var T=0;O>0;)O%2&&(T+=s[O+1]),s[O=O-1>>1]+=M.weight;h+=M.weight*T})),h}a.exports=function(b,S){for(var l=0,A=1;A<S.length;++A)l+=p(b,S[A-1],S[A]);return l}},function(a,E,e){var r=e(24),p=e(433),b=e(434),S=e(435);a.exports=function l(A,j,y,n){var s=A.children(j),h=A.node(j),M=h?h.borderLeft:void 0,O=h?h.borderRight:void 0,T={};M&&(s=r.filter(s,function(Z){return Z!==M&&Z!==O}));var v=p(A,s);r.forEach(v,function(Z){if(A.children(Z.v).length){var et=l(A,Z.v,y,n);T[Z.v]=et,r.has(et,"barycenter")&&(dt=Z,ht=et,r.isUndefined(dt.barycenter)?(dt.barycenter=ht.barycenter,dt.weight=ht.weight):(dt.barycenter=(dt.barycenter*dt.weight+ht.barycenter*ht.weight)/(dt.weight+ht.weight),dt.weight+=ht.weight))}var dt,ht});var m=b(v,y);(function(Z,et){r.forEach(Z,function(dt){dt.vs=r.flatten(dt.vs.map(function(ht){return et[ht]?et[ht].vs:ht}),!0)})})(m,T);var C=S(m,n);if(M&&(C.vs=r.flatten([M,C.vs,O],!0),A.predecessors(M).length)){var D=A.node(A.predecessors(M)[0]),Y=A.node(A.predecessors(O)[0]);r.has(C,"barycenter")||(C.barycenter=0,C.weight=0),C.barycenter=(C.barycenter*C.weight+D.order+Y.order)/(C.weight+2),C.weight+=2}return C}},function(a,E,e){var r=e(24);a.exports=function(p,b){return r.map(b,function(S){var l=p.inEdges(S);if(l.length){var A=r.reduce(l,function(j,y){var n=p.edge(y),s=p.node(y.v);return{sum:j.sum+n.weight*s.order,weight:j.weight+n.weight}},{sum:0,weight:0});return{v:S,barycenter:A.sum/A.weight,weight:A.weight}}return{v:S}})}},function(a,E,e){"use strict";var r=e(24);a.exports=function(p,b){var S={};return r.forEach(p,function(l,A){var j=S[l.v]={indegree:0,in:[],out:[],vs:[l.v],i:A};r.isUndefined(l.barycenter)||(j.barycenter=l.barycenter,j.weight=l.weight)}),r.forEach(b.edges(),function(l){var A=S[l.v],j=S[l.w];r.isUndefined(A)||r.isUndefined(j)||(j.indegree++,A.out.push(S[l.w]))}),function(l){var A=[];function j(s){return function(h){h.merged||(r.isUndefined(h.barycenter)||r.isUndefined(s.barycenter)||h.barycenter>=s.barycenter)&&function(M,O){var T=0,v=0;M.weight&&(T+=M.barycenter*M.weight,v+=M.weight),O.weight&&(T+=O.barycenter*O.weight,v+=O.weight),M.vs=O.vs.concat(M.vs),M.barycenter=T/v,M.weight=v,M.i=Math.min(O.i,M.i),O.merged=!0}(s,h)}}function y(s){return function(h){h.in.push(s),--h.indegree==0&&l.push(h)}}for(;l.length;){var n=l.pop();A.push(n),r.forEach(n.in.reverse(),j(n)),r.forEach(n.out,y(n))}return r.map(r.filter(A,function(s){return!s.merged}),function(s){return r.pick(s,["vs","i","barycenter","weight"])})}(r.filter(S,function(l){return!l.indegree}))}},function(a,E,e){var r=e(24),p=e(37);function b(S,l,A){for(var j;l.length&&(j=r.last(l)).i<=A;)l.pop(),S.push(j.vs),A++;return A}a.exports=function(S,l){var A=p.partition(S,function(v){return r.has(v,"barycenter")}),j=A.lhs,y=r.sortBy(A.rhs,function(v){return-v.i}),n=[],s=0,h=0,M=0;j.sort((O=!!l,function(v,m){return v.barycenter<m.barycenter?-1:v.barycenter>m.barycenter?1:O?m.i-v.i:v.i-m.i})),M=b(n,y,M),r.forEach(j,function(v){M+=v.vs.length,n.push(v.vs),s+=v.barycenter*v.weight,h+=v.weight,M=b(n,y,M)});var O,T={vs:r.flatten(n,!0)};return h&&(T.barycenter=s/h,T.weight=h),T}},function(a,E,e){var r=e(24),p=e(46).Graph;a.exports=function(b,S,l){var A=function(y){for(var n;y.hasNode(n=r.uniqueId("_root")););return n}(b),j=new p({compound:!0}).setGraph({root:A}).setDefaultNodeLabel(function(y){return b.node(y)});return r.forEach(b.nodes(),function(y){var n=b.node(y),s=b.parent(y);(n.rank===S||n.minRank<=S&&S<=n.maxRank)&&(j.setNode(y),j.setParent(y,s||A),r.forEach(b[l](y),function(h){var M=h.v===y?h.w:h.v,O=j.edge(M,y),T=r.isUndefined(O)?0:O.weight;j.setEdge(M,y,{weight:b.edge(h).weight+T})}),r.has(n,"minRank")&&j.setNode(y,{borderLeft:n.borderLeft[S],borderRight:n.borderRight[S]}))}),j}},function(a,E,e){var r=e(24);a.exports=function(p,b,S){var l,A={};r.forEach(S,function(j){for(var y,n,s=p.parent(j);s;){if((y=p.parent(s))?(n=A[y],A[y]=s):(n=l,l=s),n&&n!==s)return void b.setEdge(n,s);s=y}})}},function(a,E,e){"use strict";var r=e(24),p=e(37),b=e(439).positionX;a.exports=function(S){(function(l){var A=p.buildLayerMatrix(l),j=l.graph().ranksep,y=0;r.forEach(A,function(n){var s=r.max(r.map(n,function(h){return l.node(h).height}));r.forEach(n,function(h){l.node(h).y=y+s/2}),y+=s+j})})(S=p.asNonCompoundGraph(S)),r.forEach(b(S),function(l,A){S.node(A).x=l})}},function(a,E,e){"use strict";var r=e(24),p=e(46).Graph,b=e(37);function S(O,T){var v={};return r.reduce(T,function(m,C){var D=0,Y=0,Z=m.length,et=r.last(C);return r.forEach(C,function(dt,ht){var St=function(xt,ft){if(xt.node(ft).dummy)return r.find(xt.predecessors(ft),function(Bt){return xt.node(Bt).dummy})}(O,dt),wt=St?O.node(St).order:Z;(St||dt===et)&&(r.forEach(C.slice(Y,ht+1),function(xt){r.forEach(O.predecessors(xt),function(ft){var Bt=O.node(ft),Rt=Bt.order;!(Rt<D||wt<Rt)||Bt.dummy&&O.node(xt).dummy||A(v,ft,xt)})}),Y=ht+1,D=wt)}),C}),v}function l(O,T){var v={};function m(C,D,Y,Z,et){var dt;r.forEach(r.range(D,Y),function(ht){dt=C[ht],O.node(dt).dummy&&r.forEach(O.predecessors(dt),function(St){var wt=O.node(St);wt.dummy&&(wt.order<Z||wt.order>et)&&A(v,St,dt)})})}return r.reduce(T,function(C,D){var Y,Z=-1,et=0;return r.forEach(D,function(dt,ht){if(O.node(dt).dummy==="border"){var St=O.predecessors(dt);St.length&&(Y=O.node(St[0]).order,m(D,et,ht,Z,Y),et=ht,Z=Y)}m(D,et,D.length,Y,C.length)}),D}),v}function A(O,T,v){if(T>v){var m=T;T=v,v=m}var C=O[T];C||(O[T]=C={}),C[v]=!0}function j(O,T,v){if(T>v){var m=T;T=v,v=m}return r.has(O[T],v)}function y(O,T,v,m){var C={},D={},Y={};return r.forEach(T,function(Z){r.forEach(Z,function(et,dt){C[et]=et,D[et]=et,Y[et]=dt})}),r.forEach(T,function(Z){var et=-1;r.forEach(Z,function(dt){var ht=m(dt);if(ht.length)for(var St=((ht=r.sortBy(ht,function(Bt){return Y[Bt]})).length-1)/2,wt=Math.floor(St),xt=Math.ceil(St);wt<=xt;++wt){var ft=ht[wt];D[dt]===dt&&et<Y[ft]&&!j(v,dt,ft)&&(D[ft]=dt,D[dt]=C[dt]=C[ft],et=Y[ft])}})}),{root:C,align:D}}function n(O,T,v,m,C){var D={},Y=function(dt,ht,St,wt){var xt=new p,ft=dt.graph(),Bt=function(Rt,Ot,X){return function(ut,vt,pt){var Et,q=ut.node(vt),st=ut.node(pt),it=0;if(it+=q.width/2,r.has(q,"labelpos"))switch(q.labelpos.toLowerCase()){case"l":Et=-q.width/2;break;case"r":Et=q.width/2}if(Et&&(it+=X?Et:-Et),Et=0,it+=(q.dummy?Ot:Rt)/2,it+=(st.dummy?Ot:Rt)/2,it+=st.width/2,r.has(st,"labelpos"))switch(st.labelpos.toLowerCase()){case"l":Et=st.width/2;break;case"r":Et=-st.width/2}return Et&&(it+=X?Et:-Et),Et=0,it}}(ft.nodesep,ft.edgesep,wt);return r.forEach(ht,function(Rt){var Ot;r.forEach(Rt,function(X){var ut=St[X];if(xt.setNode(ut),Ot){var vt=St[Ot],pt=xt.edge(vt,ut);xt.setEdge(vt,ut,Math.max(Bt(dt,X,Ot),pt||0))}Ot=X})}),xt}(O,T,v,C),Z=C?"borderLeft":"borderRight";function et(dt,ht){for(var St=Y.nodes(),wt=St.pop(),xt={};wt;)xt[wt]?dt(wt):(xt[wt]=!0,St.push(wt),St=St.concat(ht(wt))),wt=St.pop()}return et(function(dt){D[dt]=Y.inEdges(dt).reduce(function(ht,St){return Math.max(ht,D[St.v]+Y.edge(St))},0)},Y.predecessors.bind(Y)),et(function(dt){var ht=Y.outEdges(dt).reduce(function(wt,xt){return Math.min(wt,D[xt.w]-Y.edge(xt))},Number.POSITIVE_INFINITY),St=O.node(dt);ht!==Number.POSITIVE_INFINITY&&St.borderType!==Z&&(D[dt]=Math.max(D[dt],ht))},Y.successors.bind(Y)),r.forEach(m,function(dt){D[dt]=D[v[dt]]}),D}function s(O,T){return r.minBy(r.values(T),function(v){var m=Number.NEGATIVE_INFINITY,C=Number.POSITIVE_INFINITY;return r.forIn(v,function(D,Y){var Z=function(et,dt){return et.node(dt).width}(O,Y)/2;m=Math.max(D+Z,m),C=Math.min(D-Z,C)}),m-C})}function h(O,T){var v=r.values(T),m=r.min(v),C=r.max(v);r.forEach(["u","d"],function(D){r.forEach(["l","r"],function(Y){var Z,et=D+Y,dt=O[et];if(dt!==T){var ht=r.values(dt);(Z=Y==="l"?m-r.min(ht):C-r.max(ht))&&(O[et]=r.mapValues(dt,function(St){return St+Z}))}})})}function M(O,T){return r.mapValues(O.ul,function(v,m){if(T)return O[T.toLowerCase()][m];var C=r.sortBy(r.map(O,m));return(C[1]+C[2])/2})}a.exports={positionX:function(T){var v,m=b.buildLayerMatrix(T),C=r.merge(S(T,m),l(T,m)),D={};r.forEach(["u","d"],function(Z){v=Z==="u"?m:r.values(m).reverse(),r.forEach(["l","r"],function(et){et==="r"&&(v=r.map(v,function(wt){return r.values(wt).reverse()}));var dt=(Z==="u"?T.predecessors:T.successors).bind(T),ht=y(T,v,C,dt),St=n(T,v,ht.root,ht.align,et==="r");et==="r"&&(St=r.mapValues(St,function(wt){return-wt})),D[Z+et]=St})});var Y=s(T,D);return h(D,Y),M(D,T.graph().align)},findType1Conflicts:S,findType2Conflicts:l,addConflict:A,hasConflict:j,verticalAlignment:y,horizontalCompaction:n,alignCoordinates:h,findSmallestWidthAlignment:s,balance:M}},function(a,E,e){var r=e(24),p=e(37),b=e(46).Graph;a.exports={debugOrdering:function(l){var A=p.buildLayerMatrix(l),j=new b({compound:!0,multigraph:!0}).setGraph({});return r.forEach(l.nodes(),function(y){j.setNode(y,{label:y}),j.setParent(y,"layer"+l.node(y).rank)}),r.forEach(l.edges(),function(y){j.setEdge(y.v,y.w,{},y.name)}),r.forEach(A,function(y,n){var s="layer"+n;j.setNode(s,{rank:"same"}),r.reduce(y,function(h,M){return j.setEdge(h,M,{style:"invis"}),M})}),j}}},function(a,E){a.exports="0.8.5"},function(a,E,e){(function(r){function p(S){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(S)}var b=function(S){"use strict";var l=Object.prototype,A=l.hasOwnProperty,j=typeof Symbol=="function"?Symbol:{},y=j.iterator||"@@iterator",n=j.asyncIterator||"@@asyncIterator",s=j.toStringTag||"@@toStringTag";function h(Ot,X,ut){return Object.defineProperty(Ot,X,{value:ut,enumerable:!0,configurable:!0,writable:!0}),Ot[X]}try{h({},"")}catch(Ot){h=function(ut,vt,pt){return ut[vt]=pt}}function M(Ot,X,ut,vt){var pt=X&&X.prototype instanceof v?X:v,Et=Object.create(pt.prototype),q=new ft(vt||[]);return Et._invoke=function(st,it,z){var P="suspendedStart";return function(H,k){if(P==="executing")throw new Error("Generator is already running");if(P==="completed"){if(H==="throw")throw k;return Rt()}for(z.method=H,z.arg=k;;){var d=z.delegate;if(d){var g=St(d,z);if(g){if(g===T)continue;return g}}if(z.method==="next")z.sent=z._sent=z.arg;else if(z.method==="throw"){if(P==="suspendedStart")throw P="completed",z.arg;z.dispatchException(z.arg)}else z.method==="return"&&z.abrupt("return",z.arg);P="executing";var F=O(st,it,z);if(F.type==="normal"){if(P=z.done?"completed":"suspendedYield",F.arg===T)continue;return{value:F.arg,done:z.done}}F.type==="throw"&&(P="completed",z.method="throw",z.arg=F.arg)}}}(Ot,ut,q),Et}function O(Ot,X,ut){try{return{type:"normal",arg:Ot.call(X,ut)}}catch(vt){return{type:"throw",arg:vt}}}S.wrap=M;var T={};function v(){}function m(){}function C(){}var D={};D[y]=function(){return this};var Y=Object.getPrototypeOf,Z=Y&&Y(Y(Bt([])));Z&&Z!==l&&A.call(Z,y)&&(D=Z);var et=C.prototype=v.prototype=Object.create(D);function dt(Ot){["next","throw","return"].forEach(function(X){h(Ot,X,function(ut){return this._invoke(X,ut)})})}function ht(Ot,X){var ut;this._invoke=function(vt,pt){function Et(){return new X(function(q,st){(function it(z,P,H,k){var d=O(Ot[z],Ot,P);if(d.type!=="throw"){var g=d.arg,F=g.value;return F&&p(F)==="object"&&A.call(F,"__await")?X.resolve(F.__await).then(function(V){it("next",V,H,k)},function(V){it("throw",V,H,k)}):X.resolve(F).then(function(V){g.value=V,H(g)},function(V){return it("throw",V,H,k)})}k(d.arg)})(vt,pt,q,st)})}return ut=ut?ut.then(Et,Et):Et()}}function St(Ot,X){var ut=Ot.iterator[X.method];if(ut===void 0){if(X.delegate=null,X.method==="throw"){if(Ot.iterator.return&&(X.method="return",X.arg=void 0,St(Ot,X),X.method==="throw"))return T;X.method="throw",X.arg=new TypeError("The iterator does not provide a 'throw' method")}return T}var vt=O(ut,Ot.iterator,X.arg);if(vt.type==="throw")return X.method="throw",X.arg=vt.arg,X.delegate=null,T;var pt=vt.arg;return pt?pt.done?(X[Ot.resultName]=pt.value,X.next=Ot.nextLoc,X.method!=="return"&&(X.method="next",X.arg=void 0),X.delegate=null,T):pt:(X.method="throw",X.arg=new TypeError("iterator result is not an object"),X.delegate=null,T)}function wt(Ot){var X={tryLoc:Ot[0]};1 in Ot&&(X.catchLoc=Ot[1]),2 in Ot&&(X.finallyLoc=Ot[2],X.afterLoc=Ot[3]),this.tryEntries.push(X)}function xt(Ot){var X=Ot.completion||{};X.type="normal",delete X.arg,Ot.completion=X}function ft(Ot){this.tryEntries=[{tryLoc:"root"}],Ot.forEach(wt,this),this.reset(!0)}function Bt(Ot){if(Ot){var X=Ot[y];if(X)return X.call(Ot);if(typeof Ot.next=="function")return Ot;if(!isNaN(Ot.length)){var ut=-1,vt=function pt(){for(;++ut<Ot.length;)if(A.call(Ot,ut))return pt.value=Ot[ut],pt.done=!1,pt;return pt.value=void 0,pt.done=!0,pt};return vt.next=vt}}return{next:Rt}}function Rt(){return{value:void 0,done:!0}}return m.prototype=et.constructor=C,C.constructor=m,m.displayName=h(C,s,"GeneratorFunction"),S.isGeneratorFunction=function(Ot){var X=typeof Ot=="function"&&Ot.constructor;return!!X&&(X===m||(X.displayName||X.name)==="GeneratorFunction")},S.mark=function(Ot){return Object.setPrototypeOf?Object.setPrototypeOf(Ot,C):(Ot.__proto__=C,h(Ot,s,"GeneratorFunction")),Ot.prototype=Object.create(et),Ot},S.awrap=function(Ot){return{__await:Ot}},dt(ht.prototype),ht.prototype[n]=function(){return this},S.AsyncIterator=ht,S.async=function(Ot,X,ut,vt,pt){pt===void 0&&(pt=Promise);var Et=new ht(M(Ot,X,ut,vt),pt);return S.isGeneratorFunction(X)?Et:Et.next().then(function(q){return q.done?q.value:Et.next()})},dt(et),h(et,s,"Generator"),et[y]=function(){return this},et.toString=function(){return"[object Generator]"},S.keys=function(Ot){var X=[];for(var ut in Ot)X.push(ut);return X.reverse(),function vt(){for(;X.length;){var pt=X.pop();if(pt in Ot)return vt.value=pt,vt.done=!1,vt}return vt.done=!0,vt}},S.values=Bt,ft.prototype={constructor:ft,reset:function(X){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(xt),!X)for(var ut in this)ut.charAt(0)==="t"&&A.call(this,ut)&&!isNaN(+ut.slice(1))&&(this[ut]=void 0)},stop:function(){this.done=!0;var X=this.tryEntries[0].completion;if(X.type==="throw")throw X.arg;return this.rval},dispatchException:function(X){if(this.done)throw X;var ut=this;function vt(z,P){return q.type="throw",q.arg=X,ut.next=z,P&&(ut.method="next",ut.arg=void 0),!!P}for(var pt=this.tryEntries.length-1;pt>=0;--pt){var Et=this.tryEntries[pt],q=Et.completion;if(Et.tryLoc==="root")return vt("end");if(Et.tryLoc<=this.prev){var st=A.call(Et,"catchLoc"),it=A.call(Et,"finallyLoc");if(st&&it){if(this.prev<Et.catchLoc)return vt(Et.catchLoc,!0);if(this.prev<Et.finallyLoc)return vt(Et.finallyLoc)}else if(st){if(this.prev<Et.catchLoc)return vt(Et.catchLoc,!0)}else{if(!it)throw new Error("try statement without catch or finally");if(this.prev<Et.finallyLoc)return vt(Et.finallyLoc)}}}},abrupt:function(X,ut){for(var vt=this.tryEntries.length-1;vt>=0;--vt){var pt=this.tryEntries[vt];if(pt.tryLoc<=this.prev&&A.call(pt,"finallyLoc")&&this.prev<pt.finallyLoc){var Et=pt;break}}Et&&(X==="break"||X==="continue")&&Et.tryLoc<=ut&&ut<=Et.finallyLoc&&(Et=null);var q=Et?Et.completion:{};return q.type=X,q.arg=ut,Et?(this.method="next",this.next=Et.finallyLoc,T):this.complete(q)},complete:function(X,ut){if(X.type==="throw")throw X.arg;return X.type==="break"||X.type==="continue"?this.next=X.arg:X.type==="return"?(this.rval=this.arg=X.arg,this.method="return",this.next="end"):X.type==="normal"&&ut&&(this.next=ut),T},finish:function(X){for(var ut=this.tryEntries.length-1;ut>=0;--ut){var vt=this.tryEntries[ut];if(vt.finallyLoc===X)return this.complete(vt.completion,vt.afterLoc),xt(vt),T}},catch:function(X){for(var ut=this.tryEntries.length-1;ut>=0;--ut){var vt=this.tryEntries[ut];if(vt.tryLoc===X){var pt=vt.completion;if(pt.type==="throw"){var Et=pt.arg;xt(vt)}return Et}}throw new Error("illegal catch attempt")},delegateYield:function(X,ut,vt){return this.delegate={iterator:Bt(X),resultName:ut,nextLoc:vt},this.method==="next"&&(this.arg=void 0),T}},S}(p(r)==="object"?r.exports:{});try{regeneratorRuntime=b}catch(S){Function("r","regeneratorRuntime = r")(b)}}).call(this,e(86)(a))},function(a,E){a.exports=function(e){if(Array.isArray(e))return e}},function(a,E){a.exports=function(e,r){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e)){var p=[],b=!0,S=!1,l=void 0;try{for(var A,j=e[Symbol.iterator]();!(b=(A=j.next()).done)&&(p.push(A.value),!r||p.length!==r);b=!0);}catch(y){S=!0,l=y}finally{try{b||j.return==null||j.return()}finally{if(S)throw l}}return p}}},function(a,E){a.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},function(a,E,e){"use strict";function r(C){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(C)}var p=this&&this.__awaiter||function(C,D,Y,Z){return new(Y||(Y=Promise))(function(et,dt){function ht(xt){try{wt(Z.next(xt))}catch(ft){dt(ft)}}function St(xt){try{wt(Z.throw(xt))}catch(ft){dt(ft)}}function wt(xt){var ft;xt.done?et(xt.value):(ft=xt.value,ft instanceof Y?ft:new Y(function(Bt){Bt(ft)})).then(ht,St)}wt((Z=Z.apply(C,D||[])).next())})},b=this&&this.__generator||function(C,D){var Y,Z,et,dt,ht={label:0,sent:function(){if(1&et[0])throw et[1];return et[1]},trys:[],ops:[]};return dt={next:St(0),throw:St(1),return:St(2)},typeof Symbol=="function"&&(dt[Symbol.iterator]=function(){return this}),dt;function St(wt){return function(xt){return function(ft){if(Y)throw new TypeError("Generator is already executing.");for(;ht;)try{if(Y=1,Z&&(et=2&ft[0]?Z.return:ft[0]?Z.throw||((et=Z.return)&&et.call(Z),0):Z.next)&&!(et=et.call(Z,ft[1])).done)return et;switch(Z=0,et&&(ft=[2&ft[0],et.value]),ft[0]){case 0:case 1:et=ft;break;case 4:return ht.label++,{value:ft[1],done:!1};case 5:ht.label++,Z=ft[1],ft=[0];continue;case 7:ft=ht.ops.pop(),ht.trys.pop();continue;default:if(et=ht.trys,!((et=et.length>0&&et[et.length-1])||ft[0]!==6&&ft[0]!==2)){ht=0;continue}if(ft[0]===3&&(!et||ft[1]>et[0]&&ft[1]<et[3])){ht.label=ft[1];break}if(ft[0]===6&&ht.label<et[1]){ht.label=et[1],et=ft;break}if(et&&ht.label<et[2]){ht.label=et[2],ht.ops.push(ft);break}et[2]&&ht.ops.pop(),ht.trys.pop();continue}ft=D.call(C,ht)}catch(Bt){ft=[6,Bt],Z=0}finally{Y=et=0}if(5&ft[0])throw ft[1];return{value:ft[0]?ft[1]:void 0,done:!0}}([wt,xt])}}};Object.defineProperty(E,"__esModule",{value:!0}),E.Container=void 0;var S=e(447),l=e(41),A=e(55),j=e(32),y=e(220),n=e(448),s=e(455),h=e(457),M=e(67),O=e(88),T=e(460),v=e(461),m=function(){function C(D){var Y=D||{};if(r(Y)!=="object")throw new Error(""+l.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(Y.defaultScope===void 0)Y.defaultScope=A.BindingScopeEnum.Transient;else if(Y.defaultScope!==A.BindingScopeEnum.Singleton&&Y.defaultScope!==A.BindingScopeEnum.Transient&&Y.defaultScope!==A.BindingScopeEnum.Request)throw new Error(""+l.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(Y.autoBindInjectable===void 0)Y.autoBindInjectable=!1;else if(typeof Y.autoBindInjectable!="boolean")throw new Error(""+l.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(Y.skipBaseClassChecks===void 0)Y.skipBaseClassChecks=!1;else if(typeof Y.skipBaseClassChecks!="boolean")throw new Error(""+l.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:Y.autoBindInjectable,defaultScope:Y.defaultScope,skipBaseClassChecks:Y.skipBaseClassChecks},this.id=M.id(),this._bindingDictionary=new v.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new y.MetadataReader}return C.merge=function(D,Y){var Z=new C,et=n.getBindingDictionary(Z),dt=n.getBindingDictionary(D),ht=n.getBindingDictionary(Y);function St(wt,xt){wt.traverse(function(ft,Bt){Bt.forEach(function(Rt){xt.add(Rt.serviceIdentifier,Rt.clone())})})}return St(dt,et),St(ht,et),Z},C.prototype.load=function(){for(var D=[],Y=0;Y<arguments.length;Y++)D[Y]=arguments[Y];for(var Z=this._getContainerModuleHelpersFactory(),et=0,dt=D;et<dt.length;et++){var ht=dt[et],St=Z(ht.id);ht.registry(St.bindFunction,St.unbindFunction,St.isboundFunction,St.rebindFunction)}},C.prototype.loadAsync=function(){for(var D=[],Y=0;Y<arguments.length;Y++)D[Y]=arguments[Y];return p(this,void 0,void 0,function(){var Z,et,dt,ht,St;return b(this,function(wt){switch(wt.label){case 0:Z=this._getContainerModuleHelpersFactory(),et=0,dt=D,wt.label=1;case 1:return et<dt.length?(ht=dt[et],St=Z(ht.id),[4,ht.registry(St.bindFunction,St.unbindFunction,St.isboundFunction,St.rebindFunction)]):[3,4];case 2:wt.sent(),wt.label=3;case 3:return et++,[3,1];case 4:return[2]}})})},C.prototype.unload=function(){for(var D=this,Y=[],Z=0;Z<arguments.length;Z++)Y[Z]=arguments[Z];var et=function(ht){return function(St){return St.moduleId===ht}};Y.forEach(function(dt){var ht=et(dt.id);D._bindingDictionary.removeByCondition(ht)})},C.prototype.bind=function(D){var Y=this.options.defaultScope||A.BindingScopeEnum.Transient,Z=new S.Binding(D,Y);return this._bindingDictionary.add(D,Z),new h.BindingToSyntax(Z)},C.prototype.rebind=function(D){return this.unbind(D),this.bind(D)},C.prototype.unbind=function(D){try{this._bindingDictionary.remove(D)}catch(Y){throw new Error(l.CANNOT_UNBIND+" "+O.getServiceIdentifierAsString(D))}},C.prototype.unbindAll=function(){this._bindingDictionary=new v.Lookup},C.prototype.isBound=function(D){var Y=this._bindingDictionary.hasKey(D);return!Y&&this.parent&&(Y=this.parent.isBound(D)),Y},C.prototype.isBoundNamed=function(D,Y){return this.isBoundTagged(D,j.NAMED_TAG,Y)},C.prototype.isBoundTagged=function(D,Y,Z){var et=!1;if(this._bindingDictionary.hasKey(D)){var dt=this._bindingDictionary.get(D),ht=n.createMockRequest(this,D,Y,Z);et=dt.some(function(St){return St.constraint(ht)})}return!et&&this.parent&&(et=this.parent.isBoundTagged(D,Y,Z)),et},C.prototype.snapshot=function(){this._snapshots.push(T.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},C.prototype.restore=function(){var D=this._snapshots.pop();if(D===void 0)throw new Error(l.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=D.bindings,this._middleware=D.middleware},C.prototype.createChild=function(D){var Y=new C(D||this.options);return Y.parent=this,Y},C.prototype.applyMiddleware=function(){for(var D=[],Y=0;Y<arguments.length;Y++)D[Y]=arguments[Y];var Z=this._middleware?this._middleware:this._planAndResolve();this._middleware=D.reduce(function(et,dt){return dt(et)},Z)},C.prototype.applyCustomMetadataReader=function(D){this._metadataReader=D},C.prototype.get=function(D){return this._get(!1,!1,A.TargetTypeEnum.Variable,D)},C.prototype.getTagged=function(D,Y,Z){return this._get(!1,!1,A.TargetTypeEnum.Variable,D,Y,Z)},C.prototype.getNamed=function(D,Y){return this.getTagged(D,j.NAMED_TAG,Y)},C.prototype.getAll=function(D){return this._get(!0,!0,A.TargetTypeEnum.Variable,D)},C.prototype.getAllTagged=function(D,Y,Z){return this._get(!1,!0,A.TargetTypeEnum.Variable,D,Y,Z)},C.prototype.getAllNamed=function(D,Y){return this.getAllTagged(D,j.NAMED_TAG,Y)},C.prototype.resolve=function(D){var Y=this.createChild();return Y.bind(D).toSelf(),Y.get(D)},C.prototype._getContainerModuleHelpersFactory=function(){var D=this,Y=function(dt,ht){dt._binding.moduleId=ht},Z=function(dt){return function(ht){var St=D.rebind.bind(D)(ht);return Y(St,dt),St}};return function(et){return{bindFunction:(dt=et,function(ht){var St=D.bind.bind(D)(ht);return Y(St,dt),St}),isboundFunction:function(St){return D.isBound.bind(D)(St)},rebindFunction:Z(et),unbindFunction:function(St){D.unbind.bind(D)(St)}};var dt}},C.prototype._get=function(D,Y,Z,et,dt,ht){var St=null,wt={avoidConstraints:D,contextInterceptor:function(ft){return ft},isMultiInject:Y,key:dt,serviceIdentifier:et,targetType:Z,value:ht};if(this._middleware){if((St=this._middleware(wt))==null)throw new Error(l.INVALID_MIDDLEWARE_RETURN)}else St=this._planAndResolve()(wt);return St},C.prototype._planAndResolve=function(){var D=this;return function(Y){var Z=n.plan(D._metadataReader,D,Y.isMultiInject,Y.targetType,Y.serviceIdentifier,Y.key,Y.value,Y.avoidConstraints);return Z=Y.contextInterceptor(Z),s.resolve(Z)}},C}();E.Container=m},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.Binding=void 0;var r=e(55),p=e(67),b=function(){function S(l,A){this.id=p.id(),this.activated=!1,this.serviceIdentifier=l,this.scope=A,this.type=r.BindingTypeEnum.Invalid,this.constraint=function(j){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return S.prototype.clone=function(){var l=new S(this.serviceIdentifier,this.scope);return l.activated=!1,l.implementationType=this.implementationType,l.dynamicValue=this.dynamicValue,l.scope=this.scope,l.type=this.type,l.factory=this.factory,l.provider=this.provider,l.constraint=this.constraint,l.onActivation=this.onActivation,l.cache=this.cache,l},S}();E.Binding=b},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.getBindingDictionary=E.createMockRequest=E.plan=void 0;var r=e(449),p=e(41),b=e(55),S=e(32),l=e(221),A=e(88),j=e(450),y=e(49),n=e(451),s=e(452),h=e(454),M=e(223);function O(m){return m._bindingDictionary}function T(m,C,D,Y,Z){var et=v(D.container,Z.serviceIdentifier),dt=[];return et.length===r.BindingCount.NoBindingsAvailable&&D.container.options.autoBindInjectable&&typeof Z.serviceIdentifier=="function"&&m.getConstructorMetadata(Z.serviceIdentifier).compilerGeneratedMetadata&&(D.container.bind(Z.serviceIdentifier).toSelf(),et=v(D.container,Z.serviceIdentifier)),dt=C?et:et.filter(function(ht){var St=new h.Request(ht.serviceIdentifier,D,Y,ht,Z);return ht.constraint(St)}),function(ht,St,wt,xt){switch(St.length){case r.BindingCount.NoBindingsAvailable:if(wt.isOptional())return St;var ft=A.getServiceIdentifierAsString(ht),Bt=p.NOT_REGISTERED;throw Bt+=A.listMetadataForTarget(ft,wt),Bt+=A.listRegisteredBindingsForServiceIdentifier(xt,ft,v),new Error(Bt);case r.BindingCount.OnlyOneBindingAvailable:if(!wt.isArray())return St;case r.BindingCount.MultipleBindingsAvailable:default:if(wt.isArray())return St;throw ft=A.getServiceIdentifierAsString(ht),Bt=p.AMBIGUOUS_MATCH+" "+ft,Bt+=A.listRegisteredBindingsForServiceIdentifier(xt,ft,v),new Error(Bt)}}(Z.serviceIdentifier,dt,Z,D.container),dt}function v(m,C){var D=[],Y=O(m);return Y.hasKey(C)?D=Y.get(C):m.parent!==null&&(D=v(m.parent,C)),D}E.getBindingDictionary=O,E.plan=function(m,C,D,Y,Z,et,dt,ht){ht===void 0&&(ht=!1);var St=new j.Context(C),wt=function(xt,ft,Bt,Rt,Ot,X){var ut=xt?S.MULTI_INJECT_TAG:S.INJECT_TAG,vt=new y.Metadata(ut,Bt),pt=new M.Target(ft,Rt,Bt,vt);if(Ot!==void 0){var Et=new y.Metadata(Ot,X);pt.metadata.push(Et)}return pt}(D,Y,Z,"",et,dt);try{return function xt(ft,Bt,Rt,Ot,X,ut){var vt,pt;if(X===null){vt=T(ft,Bt,Ot,null,ut),pt=new h.Request(Rt,Ot,null,vt,ut);var Et=new n.Plan(Ot,pt);Ot.addPlan(Et)}else vt=T(ft,Bt,Ot,X,ut),pt=X.addChildRequest(ut.serviceIdentifier,vt,ut);vt.forEach(function(q){var st=null;if(ut.isArray())st=pt.addChildRequest(q.serviceIdentifier,q,ut);else{if(q.cache)return;st=pt}if(q.type===b.BindingTypeEnum.Instance&&q.implementationType!==null){var it=s.getDependencies(ft,q.implementationType);if(!Ot.container.options.skipBaseClassChecks){var z=s.getBaseClassDependencyCount(ft,q.implementationType);if(it.length<z){var P=p.ARGUMENTS_LENGTH_MISMATCH(s.getFunctionName(q.implementationType));throw new Error(P)}}it.forEach(function(H){xt(ft,!1,H.serviceIdentifier,Ot,st,H)})}})}(m,ht,Z,St,null,wt),St}catch(xt){throw l.isStackOverflowExeption(xt)&&St.plan&&A.circularDependencyToException(St.plan.rootRequest),xt}},E.createMockRequest=function(m,C,D,Y){var Z=new M.Target(b.TargetTypeEnum.Variable,"",C,new y.Metadata(D,Y)),et=new j.Context(m);return new h.Request(C,et,null,[],Z)}},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.BindingCount=void 0,E.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.Context=void 0;var r=e(67),p=function(){function b(S){this.id=r.id(),this.container=S}return b.prototype.addPlan=function(S){this.plan=S},b.prototype.setCurrentRequest=function(S){this.currentRequest=S},b}();E.Context=p},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.Plan=void 0;var r=function(b,S){this.parentContext=b,this.rootRequest=S};E.Plan=r},function(a,E,e){"use strict";var r=this&&this.__spreadArrays||function(){for(var h=0,M=0,O=arguments.length;M<O;M++)h+=arguments[M].length;var T=Array(h),v=0;for(M=0;M<O;M++)for(var m=arguments[M],C=0,D=m.length;C<D;C++,v++)T[v]=m[C];return T};Object.defineProperty(E,"__esModule",{value:!0}),E.getFunctionName=E.getBaseClassDependencyCount=E.getDependencies=void 0;var p=e(222),b=e(41),S=e(55),l=e(32),A=e(88);Object.defineProperty(E,"getFunctionName",{enumerable:!0,get:function(){return A.getFunctionName}});var j=e(223);function y(h,M,O,T){var v=h.getConstructorMetadata(O),m=v.compilerGeneratedMetadata;if(m===void 0){var C=b.MISSING_INJECTABLE_ANNOTATION+" "+M+".";throw new Error(C)}var D=v.userGeneratedMetadata,Y=Object.keys(D),Z=function(dt,ht,St,wt,xt){for(var ft=[],Bt=0;Bt<xt;Bt++){var Rt=n(Bt,dt,ht,St,wt);Rt!==null&&ft.push(Rt)}return ft}(T,M,m,D,O.length===0&&Y.length>0?Y.length:O.length),et=function dt(ht,St){for(var wt=ht.getPropertiesMetadata(St),xt=[],ft=Object.keys(wt),Bt=0,Rt=ft;Bt<Rt.length;Bt++){var Ot=Rt[Bt],X=wt[Ot],ut=s(wt[Ot]),vt=ut.targetName||Ot,pt=ut.inject||ut.multiInject,Et=new j.Target(S.TargetTypeEnum.ClassProperty,vt,pt);Et.metadata=X,xt.push(Et)}var q=Object.getPrototypeOf(St.prototype).constructor;if(q!==Object){var st=dt(ht,q);xt=r(xt,st)}return xt}(h,O);return r(Z,et)}function n(h,M,O,T,v){var m=v[h.toString()]||[],C=s(m),D=C.unmanaged!==!0,Y=T[h],Z=C.inject||C.multiInject;if((Y=Z||Y)instanceof p.LazyServiceIdentifer&&(Y=Y.unwrap()),D){if(!M&&(Y===Object||Y===Function||Y===void 0)){var et=b.MISSING_INJECT_ANNOTATION+" argument "+h+" in class "+O+".";throw new Error(et)}var dt=new j.Target(S.TargetTypeEnum.ConstructorArgument,C.targetName,Y);return dt.metadata=m,dt}return null}function s(h){var M={};return h.forEach(function(O){M[O.key.toString()]=O.value}),{inject:M[l.INJECT_TAG],multiInject:M[l.MULTI_INJECT_TAG],targetName:M[l.NAME_TAG],unmanaged:M[l.UNMANAGED_TAG]}}E.getDependencies=function(h,M){return y(h,A.getFunctionName(M),M,!1)},E.getBaseClassDependencyCount=function h(M,O){var T=Object.getPrototypeOf(O.prototype).constructor;if(T!==Object){var v=y(M,A.getFunctionName(T),T,!0),m=v.map(function(Y){return Y.metadata.filter(function(Z){return Z.key===l.UNMANAGED_TAG})}),C=[].concat.apply([],m).length,D=v.length-C;return D>0?D:h(M,T)}return 0}},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.QueryableString=void 0;var r=function(){function p(b){this.str=b}return p.prototype.startsWith=function(b){return this.str.indexOf(b)===0},p.prototype.endsWith=function(b){var S,l=b.split("").reverse().join("");return S=this.str.split("").reverse().join(""),this.startsWith.call({str:S},l)},p.prototype.contains=function(b){return this.str.indexOf(b)!==-1},p.prototype.equals=function(b){return this.str===b},p.prototype.value=function(){return this.str},p}();E.QueryableString=r},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.Request=void 0;var r=e(67),p=function(){function b(S,l,A,j,y){this.id=r.id(),this.serviceIdentifier=S,this.parentContext=l,this.parentRequest=A,this.target=y,this.childRequests=[],this.bindings=Array.isArray(j)?j:[j],this.requestScope=A===null?new Map:null}return b.prototype.addChildRequest=function(S,l,A){var j=new b(S,this.parentContext,this,l,A);return this.childRequests.push(j),j},b}();E.Request=p},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.resolve=void 0;var r=e(41),p=e(55),b=e(221),S=e(88),l=e(456),A=function(y,n,s){try{return s()}catch(h){throw b.isStackOverflowExeption(h)?new Error(r.CIRCULAR_DEPENDENCY_IN_FACTORY(y,n.toString())):h}};E.resolve=function(j){return function y(n){return function(s){s.parentContext.setCurrentRequest(s);var h=s.bindings,M=s.childRequests,O=s.target&&s.target.isArray(),T=!(s.parentRequest&&s.parentRequest.target&&s.target&&s.parentRequest.target.matchesArray(s.target.serviceIdentifier));if(O&&T)return M.map(function(Z){return y(n)(Z)});var v=null;if(!s.target.isOptional()||h.length!==0){var m=h[0],C=m.scope===p.BindingScopeEnum.Singleton,D=m.scope===p.BindingScopeEnum.Request;if(C&&m.activated)return m.cache;if(D&&n!==null&&n.has(m.id))return n.get(m.id);if(m.type===p.BindingTypeEnum.ConstantValue)v=m.cache;else if(m.type===p.BindingTypeEnum.Function)v=m.cache;else if(m.type===p.BindingTypeEnum.Constructor)v=m.implementationType;else if(m.type===p.BindingTypeEnum.DynamicValue&&m.dynamicValue!==null)v=A("toDynamicValue",m.serviceIdentifier,function(){return m.dynamicValue(s.parentContext)});else if(m.type===p.BindingTypeEnum.Factory&&m.factory!==null)v=A("toFactory",m.serviceIdentifier,function(){return m.factory(s.parentContext)});else if(m.type===p.BindingTypeEnum.Provider&&m.provider!==null)v=A("toProvider",m.serviceIdentifier,function(){return m.provider(s.parentContext)});else{if(m.type!==p.BindingTypeEnum.Instance||m.implementationType===null){var Y=S.getServiceIdentifierAsString(s.serviceIdentifier);throw new Error(r.INVALID_BINDING_TYPE+" "+Y)}v=l.resolveInstance(m.implementationType,M,y(n))}return typeof m.onActivation=="function"&&(v=m.onActivation(s.parentContext,v)),C&&(m.cache=v,m.activated=!0),D&&n!==null&&!n.has(m.id)&&n.set(m.id,v),v}}}(j.plan.rootRequest.requestScope)(j.plan.rootRequest)}},function(a,E,e){"use strict";var r=this&&this.__spreadArrays||function(){for(var l=0,A=0,j=arguments.length;A<j;A++)l+=arguments[A].length;var y=Array(l),n=0;for(A=0;A<j;A++)for(var s=arguments[A],h=0,M=s.length;h<M;h++,n++)y[n]=s[h];return y};Object.defineProperty(E,"__esModule",{value:!0}),E.resolveInstance=void 0;var p=e(41),b=e(55),S=e(32);E.resolveInstance=function(l,A,j){var y,n,s=null;if(A.length>0){var h=A.filter(function(M){return M.target!==null&&M.target.type===b.TargetTypeEnum.ConstructorArgument}).map(j);n=h,s=function(M,O,T){var v=O.filter(function(C){return C.target!==null&&C.target.type===b.TargetTypeEnum.ClassProperty}),m=v.map(T);return v.forEach(function(C,D){var Y;Y=C.target.name.value();var Z=m[D];M[Y]=Z}),M}(s=new((y=l).bind.apply(y,r([void 0],n))),A,j)}else s=new l;return function(M,O){if(Reflect.hasMetadata(S.POST_CONSTRUCT,M)){var T=Reflect.getMetadata(S.POST_CONSTRUCT,M);try{O[T.value]()}catch(v){throw new Error(p.POST_CONSTRUCT_ERROR(M.name,v.message))}}}(l,s),s}},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.BindingToSyntax=void 0;var r=e(41),p=e(55),b=e(458),S=e(224),l=function(){function A(j){this._binding=j}return A.prototype.to=function(j){return this._binding.type=p.BindingTypeEnum.Instance,this._binding.implementationType=j,new b.BindingInWhenOnSyntax(this._binding)},A.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+r.INVALID_TO_SELF_VALUE);var j=this._binding.serviceIdentifier;return this.to(j)},A.prototype.toConstantValue=function(j){return this._binding.type=p.BindingTypeEnum.ConstantValue,this._binding.cache=j,this._binding.dynamicValue=null,this._binding.implementationType=null,new S.BindingWhenOnSyntax(this._binding)},A.prototype.toDynamicValue=function(j){return this._binding.type=p.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=j,this._binding.implementationType=null,new b.BindingInWhenOnSyntax(this._binding)},A.prototype.toConstructor=function(j){return this._binding.type=p.BindingTypeEnum.Constructor,this._binding.implementationType=j,new S.BindingWhenOnSyntax(this._binding)},A.prototype.toFactory=function(j){return this._binding.type=p.BindingTypeEnum.Factory,this._binding.factory=j,new S.BindingWhenOnSyntax(this._binding)},A.prototype.toFunction=function(j){if(typeof j!="function")throw new Error(r.INVALID_FUNCTION_BINDING);var y=this.toConstantValue(j);return this._binding.type=p.BindingTypeEnum.Function,y},A.prototype.toAutoFactory=function(j){return this._binding.type=p.BindingTypeEnum.Factory,this._binding.factory=function(y){return function(){return y.container.get(j)}},new S.BindingWhenOnSyntax(this._binding)},A.prototype.toProvider=function(j){return this._binding.type=p.BindingTypeEnum.Provider,this._binding.provider=j,new S.BindingWhenOnSyntax(this._binding)},A.prototype.toService=function(j){this.toDynamicValue(function(y){return y.container.get(j)})},A}();E.BindingToSyntax=l},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.BindingInWhenOnSyntax=void 0;var r=e(459),p=e(141),b=e(142),S=function(){function l(A){this._binding=A,this._bindingWhenSyntax=new b.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new p.BindingOnSyntax(this._binding),this._bindingInSyntax=new r.BindingInSyntax(A)}return l.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},l.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},l.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},l.prototype.when=function(A){return this._bindingWhenSyntax.when(A)},l.prototype.whenTargetNamed=function(A){return this._bindingWhenSyntax.whenTargetNamed(A)},l.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},l.prototype.whenTargetTagged=function(A,j){return this._bindingWhenSyntax.whenTargetTagged(A,j)},l.prototype.whenInjectedInto=function(A){return this._bindingWhenSyntax.whenInjectedInto(A)},l.prototype.whenParentNamed=function(A){return this._bindingWhenSyntax.whenParentNamed(A)},l.prototype.whenParentTagged=function(A,j){return this._bindingWhenSyntax.whenParentTagged(A,j)},l.prototype.whenAnyAncestorIs=function(A){return this._bindingWhenSyntax.whenAnyAncestorIs(A)},l.prototype.whenNoAncestorIs=function(A){return this._bindingWhenSyntax.whenNoAncestorIs(A)},l.prototype.whenAnyAncestorNamed=function(A){return this._bindingWhenSyntax.whenAnyAncestorNamed(A)},l.prototype.whenAnyAncestorTagged=function(A,j){return this._bindingWhenSyntax.whenAnyAncestorTagged(A,j)},l.prototype.whenNoAncestorNamed=function(A){return this._bindingWhenSyntax.whenNoAncestorNamed(A)},l.prototype.whenNoAncestorTagged=function(A,j){return this._bindingWhenSyntax.whenNoAncestorTagged(A,j)},l.prototype.whenAnyAncestorMatches=function(A){return this._bindingWhenSyntax.whenAnyAncestorMatches(A)},l.prototype.whenNoAncestorMatches=function(A){return this._bindingWhenSyntax.whenNoAncestorMatches(A)},l.prototype.onActivation=function(A){return this._bindingOnSyntax.onActivation(A)},l}();E.BindingInWhenOnSyntax=S},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.BindingInSyntax=void 0;var r=e(55),p=e(224),b=function(){function S(l){this._binding=l}return S.prototype.inRequestScope=function(){return this._binding.scope=r.BindingScopeEnum.Request,new p.BindingWhenOnSyntax(this._binding)},S.prototype.inSingletonScope=function(){return this._binding.scope=r.BindingScopeEnum.Singleton,new p.BindingWhenOnSyntax(this._binding)},S.prototype.inTransientScope=function(){return this._binding.scope=r.BindingScopeEnum.Transient,new p.BindingWhenOnSyntax(this._binding)},S}();E.BindingInSyntax=b},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.ContainerSnapshot=void 0;var r=function(){function p(){}return p.of=function(b,S){var l=new p;return l.bindings=b,l.middleware=S,l},p}();E.ContainerSnapshot=r},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.Lookup=void 0;var r=e(41),p=function(){function b(){this._map=new Map}return b.prototype.getMap=function(){return this._map},b.prototype.add=function(S,l){if(S==null)throw new Error(r.NULL_ARGUMENT);if(l==null)throw new Error(r.NULL_ARGUMENT);var A=this._map.get(S);A!==void 0?(A.push(l),this._map.set(S,A)):this._map.set(S,[l])},b.prototype.get=function(S){if(S==null)throw new Error(r.NULL_ARGUMENT);var l=this._map.get(S);if(l!==void 0)return l;throw new Error(r.KEY_NOT_FOUND)},b.prototype.remove=function(S){if(S==null)throw new Error(r.NULL_ARGUMENT);if(!this._map.delete(S))throw new Error(r.KEY_NOT_FOUND)},b.prototype.removeByCondition=function(S){var l=this;this._map.forEach(function(A,j){var y=A.filter(function(n){return!S(n)});y.length>0?l._map.set(j,y):l._map.delete(j)})},b.prototype.hasKey=function(S){if(S==null)throw new Error(r.NULL_ARGUMENT);return this._map.has(S)},b.prototype.clone=function(){var S=new b;return this._map.forEach(function(l,A){l.forEach(function(j){return S.add(A,j.clone())})}),S},b.prototype.traverse=function(S){this._map.forEach(function(l,A){S(A,l)})},b}();E.Lookup=p},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.AsyncContainerModule=E.ContainerModule=void 0;var r=e(67),p=function(l){this.id=r.id(),this.registry=l};E.ContainerModule=p;var b=function(l){this.id=r.id(),this.registry=l};E.AsyncContainerModule=b},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.injectable=void 0;var r=e(41),p=e(32);E.injectable=function(){return function(b){if(Reflect.hasOwnMetadata(p.PARAM_TYPES,b))throw new Error(r.DUPLICATED_INJECTABLE_DECORATOR);var S=Reflect.getMetadata(p.DESIGN_PARAM_TYPES,b)||[];return Reflect.defineMetadata(p.PARAM_TYPES,S,b),b}}},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.tagged=void 0;var r=e(49),p=e(59);E.tagged=function(b,S){return function(l,A,j){var y=new r.Metadata(b,S);typeof j=="number"?p.tagParameter(l,A,j,y):p.tagProperty(l,A,y)}}},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.named=void 0;var r=e(32),p=e(49),b=e(59);E.named=function(S){return function(l,A,j){var y=new p.Metadata(r.NAMED_TAG,S);typeof j=="number"?b.tagParameter(l,A,j,y):b.tagProperty(l,A,y)}}},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.optional=void 0;var r=e(32),p=e(49),b=e(59);E.optional=function(){return function(S,l,A){var j=new p.Metadata(r.OPTIONAL_TAG,!0);typeof A=="number"?b.tagParameter(S,l,A,j):b.tagProperty(S,l,j)}}},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.unmanaged=void 0;var r=e(32),p=e(49),b=e(59);E.unmanaged=function(){return function(S,l,A){var j=new p.Metadata(r.UNMANAGED_TAG,!0);b.tagParameter(S,l,A,j)}}},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.multiInject=void 0;var r=e(32),p=e(49),b=e(59);E.multiInject=function(S){return function(l,A,j){var y=new p.Metadata(r.MULTI_INJECT_TAG,S);typeof j=="number"?b.tagParameter(l,A,j,y):b.tagProperty(l,A,y)}}},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.targetName=void 0;var r=e(32),p=e(49),b=e(59);E.targetName=function(S){return function(l,A,j){var y=new p.Metadata(r.NAME_TAG,S);b.tagParameter(l,A,j,y)}}},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.postConstruct=void 0;var r=e(41),p=e(32),b=e(49);E.postConstruct=function(){return function(S,l,A){var j=new b.Metadata(p.POST_CONSTRUCT,l);if(Reflect.hasOwnMetadata(p.POST_CONSTRUCT,S.constructor))throw new Error(r.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(p.POST_CONSTRUCT,j,S.constructor)}}},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.multiBindToService=void 0,E.multiBindToService=function(r){return function(p){return function(){for(var b=[],S=0;S<arguments.length;S++)b[S]=arguments[S];return b.forEach(function(l){return r.bind(l).toService(p)})}}}},function(a,E){function e(r,p){return a.exports=e=Object.setPrototypeOf||function(b,S){return b.__proto__=S,b},e(r,p)}a.exports=e},function(a,E,e){"use strict";Object.defineProperty(E,"__esModule",{value:!0});var r=Symbol.for("INJECTION");function p(b,S,l,A){Object.defineProperty(b,S,{configurable:!0,enumerable:!0,get:function(){return A&&!Reflect.hasMetadata(r,this,S)&&Reflect.defineMetadata(r,l(),this,S),Reflect.hasMetadata(r,this,S)?Reflect.getMetadata(r,this,S):l()},set:function(y){Reflect.defineMetadata(r,y,this,S)}})}E.makePropertyInjectDecorator=function(b,S){return function(l){return function(A,j){p(A,j,function(){return b.get(l)},S)}}},E.makePropertyInjectNamedDecorator=function(b,S){return function(l,A){return function(j,y){p(j,y,function(){return b.getNamed(l,A)},S)}}},E.makePropertyInjectTaggedDecorator=function(b,S){return function(l,A,j){return function(y,n){p(y,n,function(){return b.getTagged(l,A,j)},S)}}},E.makePropertyMultiInjectDecorator=function(b,S){return function(l){return function(A,j){p(A,j,function(){return b.getAll(l)},S)}}}},function(a,E,e){var r=e(219);a.exports=function(p){if(Array.isArray(p))return r(p)}},function(a,E){a.exports=function(e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}},function(a,E){a.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},function(a,E){a.exports=function(e){var r=new Float32Array(2);return r[0]=e[0],r[1]=e[1],r}},function(a,E){a.exports=function(e,r){var p=new Float32Array(2);return p[0]=e,p[1]=r,p}},function(a,E){a.exports=function(e,r){return e[0]=r[0],e[1]=r[1],e}},function(a,E,e){a.exports=function(p,b){var S=p[0],l=p[1],A=b[0],j=b[1];return Math.abs(S-A)<=r*Math.max(1,Math.abs(S),Math.abs(A))&&Math.abs(l-j)<=r*Math.max(1,Math.abs(l),Math.abs(j))};var r=e(233)},function(a,E){a.exports=function(e,r){return e[0]===r[0]&&e[1]===r[1]}},function(a,E,e){a.exports=e(150)},function(a,E,e){a.exports=e(237)},function(a,E,e){a.exports=e(238)},function(a,E){a.exports=function(e,r){return e[0]=1/r[0],e[1]=1/r[1],e}},function(a,E){a.exports=function(e,r,p){return e[0]=Math.min(r[0],p[0]),e[1]=Math.min(r[1],p[1]),e}},function(a,E){a.exports=function(e,r,p){return e[0]=Math.max(r[0],p[0]),e[1]=Math.max(r[1],p[1]),e}},function(a,E){a.exports=function(e,r,p){var b=Math.cos(p),S=Math.sin(p),l=r[0],A=r[1];return e[0]=l*b-A*S,e[1]=l*S+A*b,e}},function(a,E){a.exports=function(e,r){return e[0]=Math.floor(r[0]),e[1]=Math.floor(r[1]),e}},function(a,E){a.exports=function(e,r){return e[0]=Math.ceil(r[0]),e[1]=Math.ceil(r[1]),e}},function(a,E){a.exports=function(e,r){return e[0]=Math.round(r[0]),e[1]=Math.round(r[1]),e}},function(a,E){a.exports=function(e,r,p){return e[0]=r[0]*p,e[1]=r[1]*p,e}},function(a,E){a.exports=function(e,r,p,b){return e[0]=r[0]+p[0]*b,e[1]=r[1]+p[1]*b,e}},function(a,E,e){a.exports=e(239)},function(a,E,e){a.exports=e(240)},function(a,E,e){a.exports=e(241)},function(a,E,e){a.exports=e(242)},function(a,E){a.exports=function(e,r){return e[0]=-r[0],e[1]=-r[1],e}},function(a,E){a.exports=function(e,r,p){var b=r[0]*p[1]-r[1]*p[0];return e[0]=e[1]=0,e[2]=b,e}},function(a,E){a.exports=function(e,r,p,b){var S=r[0],l=r[1];return e[0]=S+b*(p[0]-S),e[1]=l+b*(p[1]-l),e}},function(a,E){a.exports=function(e,r){r=r||1;var p=2*Math.random()*Math.PI;return e[0]=Math.cos(p)*r,e[1]=Math.sin(p)*r,e}},function(a,E){a.exports=function(e,r,p){var b=r[0],S=r[1];return e[0]=p[0]*b+p[2]*S,e[1]=p[1]*b+p[3]*S,e}},function(a,E){a.exports=function(e,r,p){var b=r[0],S=r[1];return e[0]=p[0]*b+p[2]*S+p[4],e[1]=p[1]*b+p[3]*S+p[5],e}},function(a,E){a.exports=function(e,r,p){var b=r[0],S=r[1];return e[0]=p[0]*b+p[3]*S+p[6],e[1]=p[1]*b+p[4]*S+p[7],e}},function(a,E){a.exports=function(e,r,p){var b=r[0],S=r[1];return e[0]=p[0]*b+p[4]*S+p[12],e[1]=p[1]*b+p[5]*S+p[13],e}},function(a,E,e){a.exports=function(p,b,S,l,A,j){var y,n;for(b||(b=2),S||(S=0),n=l?Math.min(l*b+S,p.length):p.length,y=S;y<n;y+=b)r[0]=p[y],r[1]=p[y+1],A(r,r,j),p[y]=r[0],p[y+1]=r[1];return p};var r=e(234)()},function(a,E){a.exports=function(e,r,p){var b=r[0]*r[0]+r[1]*r[1];if(b>p*p){var S=Math.sqrt(b);e[0]=r[0]/S*p,e[1]=r[1]/S*p}else e[0]=r[0],e[1]=r[1];return e}},function(a,E,e){"use strict";var r=e(0),p=e(5),b=e(38),S=b.a.cloneEvent,l=b.a.isNaN,A=Math.abs,j=["shift","ctrl","alt","control"],y={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0}},getEvents:function(){return{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onMouseDown",touchmove:"onMouseMove",touchend:"onMouseUp"}},updateViewport:function(P){var H=this.origin,k=+P.clientX,d=+P.clientY;if(!l(k)&&!l(d)){var g=k-H.x,F=d-H.y;this.get("direction")==="x"?F=0:this.get("direction")==="y"&&(g=0),this.origin={x:k,y:d};var V=this.graph.get("width"),tt=this.graph.get("height"),ot=this.graph.get("canvas").getCanvasBBox();(ot.minX<=V+this.scalableRange&&ot.minX+g>V+this.scalableRange||ot.maxX+this.scalableRange>=0&&ot.maxX+this.scalableRange+g<0)&&(g=0),(ot.minY<=tt+this.scalableRange&&ot.minY+F>tt+this.scalableRange||ot.maxY+this.scalableRange>=0&&ot.maxY+this.scalableRange+F<0)&&(F=0),this.graph.translate(g,F)}},onMouseDown:function(P){var H=P.originalEvent;if((!H||P.name===p.h.TOUCHSTART||H.button===0)&&(P.name===p.h.TOUCHSTART||typeof window=="undefined"||!window.event||window.event.buttons||window.event.button)&&this.shouldBegin.call(this,P)&&!this.keydown&&P.target&&P.target.isCanvas&&P.target.isCanvas()&&(this.origin={x:P.clientX,y:P.clientY},this.dragging=!1,this.enableOptimize)){for(var k=this.graph,d=k.getEdges(),g=0,F=d.length;g<F;g++){var V=d[g].get("group").get("children");V&&V.forEach(function(bt){bt.set("ori-visibility",bt.get("ori-visibility")||bt.get("visible")),bt.hide()})}for(var tt=k.getNodes(),ot=0,at=tt.length;ot<at;ot++)for(var At=0,yt=tt[ot].getContainer().get("children");At<yt.length;At++){var gt=yt[At];gt.get("isKeyShape")||(gt.set("ori-visibility",gt.get("ori-visibility")||gt.get("visible")),gt.hide())}}},onMouseMove:function(P){var H=this.graph;if(!this.keydown&&P.target&&P.target.isCanvas&&P.target.isCanvas()&&(P=S(P),this.origin)){if(this.dragging)P.type="drag",H.emit("canvas:drag",P);else{if(A(this.origin.x-P.clientX)+A(this.origin.y-P.clientY)<10)return;this.shouldBegin.call(this,P)&&(P.type="dragstart",H.emit("canvas:dragstart",P),this.dragging=!0)}this.shouldUpdate.call(this,P)&&this.updateViewport(P)}},onMouseUp:function(P){var H=this.graph;if(!this.keydown){if(this.enableOptimize){for(var k=H.getEdges(),d=0,g=k.length;d<g;d++){var F=k[d].get("group").get("children");F&&F.forEach(function(gt){gt.get("ori-visibility")&&gt.show()})}for(var V=H.getNodes(),tt=0,ot=V.length;tt<ot;tt++)for(var at=0,At=V[tt].getContainer().get("children");at<At.length;at++){var yt=At[at];yt.get("isKeyShape")||yt.get("ori-visibility")&&yt.show()}}this.dragging?(P=S(P),this.shouldEnd.call(this,P)&&this.updateViewport(P),P.type="dragend",H.emit("canvas:dragend",P),this.endDrag()):this.origin=null}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1},onKeyDown:function(P){var H=P.key;H&&(j.indexOf(H.toLowerCase())>-1?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1}},n=e(1),s=e(45),h={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected"}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas"}},validationCombo:function(P){return!(!this.origin||!P||P.destroyed)&&P.getType()==="combo"},onDragStart:function(P){var H=this;if(this.shouldBegin.call(this,P)){var k=P.item;if(k&&!k.destroyed&&!k.hasLocked()){k.getContainer().set("capture",!1);var d=P.target;if(d&&d.get("isAnchorPoint"))return;var g=this.graph;this.targets=[],this.targetCombo=null;var F=g.findAllByState("node",this.selectedState),V=k.get("id");F.filter(function(ot){var at=ot.get("id");return V===at}).length===0?this.targets.push(k):F.length>1?F.forEach(function(ot){ot.hasLocked()||H.targets.push(ot)}):this.targets.push(k);var tt=[];this.targets.forEach(function(ot){tt.push(Object(r.c)(ot.getModel()))}),this.set("beforeDragNodes",tt),this.origin={x:P.x,y:P.y},this.point={},this.originPoint={}}}},onDrag:function(P){var H=this;this.origin&&this.shouldUpdate(this,P)&&(this.get("enableDelegate")?this.updateDelegate(P):this.targets.map(function(k){H.update(k,P)}))},onDragEnd:function(P){if(this.origin&&this.shouldEnd.call(this,P)){var H=P.item;H&&H.getContainer().set("capture",!0),this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.updatePositions(P);var k=this.graph;if(k.get("enabledStack")){var d={before:{nodes:this.get("beforeDragNodes"),edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.targets.forEach(function(g){d.after.nodes.push(g.getModel())}),k.pushStack("update",Object(r.c)(d))}k.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(P){var H=P.item;if(this.validationCombo(H)){this.updatePositions(P);var k=this.graph;if(this.comboActiveState&&k.setItemState(H,this.comboActiveState,!1),this.targetCombo=H,this.onlyChangeComboSize)k.updateCombos();else{var d=H.getModel();this.targets.map(function(g){g.getModel().comboId!==d.id&&k.updateComboTree(g,d.id)}),k.updateCombo(H)}k.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(P){var H=this.graph;this.targets&&this.targets.length!==0&&(this.updatePositions(P),this.onlyChangeComboSize?H.updateCombos():this.targets.map(function(k){k.getModel().comboId&&H.updateComboTree(k)}))},onDropNode:function(P){if(this.targets&&this.targets.length!==0){var H=P.item;this.updatePositions(P);var k=this.graph,d=H.getModel().comboId;if(d){var g=k.findById(d);this.comboActiveState&&k.setItemState(g,this.comboActiveState,!1),this.targets.map(function(F){var V=F.getModel();d!==V.comboId&&k.updateComboTree(F,d)}),k.updateCombo(g)}else this.targets.map(function(F){F.getModel().comboId&&k.updateComboTree(F)});k.emit("dragnodeend",{items:this.targets,targetItem:H})}},onDragEnter:function(P){var H=P.item;if(this.validationCombo(H)){var k=this.graph;this.comboActiveState&&k.setItemState(H,this.comboActiveState,!0)}},onDragLeave:function(P){var H=P.item;if(this.validationCombo(H)){var k=this.graph;this.comboActiveState&&k.setItemState(H,this.comboActiveState,!1)}},updatePositions:function(P){var H=this;this.targets&&this.targets.length!==0&&this.get("enableDelegate")&&this.targets.map(function(k){return H.update(k,P)})},update:function(P,H){var k=this.origin,d=P.get("model"),g=P.get("id");this.point[g]||(this.point[g]={x:d.x||0,y:d.y||0});var F={x:H.x-k.x+this.point[g].x,y:H.y-k.y+this.point[g].y};this.get("updateEdge")?this.graph.updateItem(P,F,!1):P.updatePosition(F)},updateDelegate:function(P){if(this.graph,this.delegateRect){var H=P.x-this.origin.x+this.originPoint.minX,k=P.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:H,y:k})}else{var d=this.graph.get("group"),g=Object(r.e)({},s.a.delegateStyle,this.delegateStyle),F=this.calculationGroupPosition(P),V=F.x,tt=F.y,ot=F.width,at=F.height,At=F.minX,yt=F.minY;this.originPoint={x:V,y:tt,width:ot,height:at,minX:At,minY:yt},this.delegateRect=d.addShape("rect",{attrs:Object(n.a)({width:ot,height:at,x:V,y:tt},g),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(P){var H=this.graph.findAllByState("node",this.selectedState);H.length===0&&H.push(P.item);for(var k=1/0,d=-1/0,g=1/0,F=-1/0,V=0;V<H.length;V++){var tt=H[V].getBBox(),ot=tt.minX,at=tt.minY,At=tt.maxX,yt=tt.maxY;ot<k&&(k=ot),at<g&&(g=at),At>d&&(d=At),yt>F&&(F=yt)}return{x:Math.floor(k),y:Math.floor(g),width:Math.ceil(d)-Math.floor(k),height:Math.ceil(F)-Math.floor(g),minX:k,minY:g}}},M=Math.min,O=Math.max,T=Math.abs,v=["drag","shift","ctrl","alt","control"],m={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return v.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(P){var H=P.item,k=this.brush;H||(this.trigger==="drag"||this.keydown)&&(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),k||(k=this.createBrush()),this.originPoint={x:P.canvasX,y:P.canvasY},k.attr({width:0,height:0}),k.show(),this.dragging=!0)},onMouseMove:function(P){this.dragging&&(this.trigger==="drag"||this.keydown)&&this.updateBrush(P)},onMouseUp:function(P){this.graph,(this.brush||this.dragging)&&(this.trigger==="drag"||this.keydown)&&(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(P),this.dragging=!1)},clearStates:function(){var P=this.graph,H=this.selectedState,k=P.findAllByState("node",H),d=P.findAllByState("edge",H);k.forEach(function(g){return P.setItemState(g,H,!1)}),d.forEach(function(g){return P.setItemState(g,H,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),P.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedNodes:function(P){var H=this,k=this.graph,d=this.originPoint,g=this.shouldUpdate,F=this.selectedState,V={x:P.x,y:P.y},tt=k.getPointByCanvas(d.x,d.y),ot=M(V.x,tt.x),at=O(V.x,tt.x),At=M(V.y,tt.y),yt=O(V.y,tt.y),gt=[],bt=[];k.getNodes().forEach(function(Dt){var Ut=Dt.getBBox();if(Ut.centerX>=ot&&Ut.centerX<=at&&Ut.centerY>=At&&Ut.centerY<=yt&&g(Dt,"select")){gt.push(Dt);var jt=Dt.getModel();bt.push(jt.id),k.setItemState(Dt,F,!0)}});var Tt=[];this.includeEdges&&gt.forEach(function(Dt){Dt.getOutEdges().forEach(function(Ut){var jt=Ut.getModel(),Vt=jt.source,Ht=jt.target;bt.includes(Vt)&&bt.includes(Ht)&&g(Ut,"select")&&(Tt.push(Ut),k.setItemState(Ut,H.selectedState,!0))})}),this.selectedEdges=Tt,this.selectedNodes=gt,this.onSelect&&this.onSelect(gt,Tt),k.emit("nodeselectchange",{selectedItems:{nodes:gt,edges:Tt},select:!0})},createBrush:function(){var P=this.graph.get("canvas").addShape("rect",{attrs:this.brushStyle,capture:!1,name:"brush-shape"});return this.brush=P,this.delegate=P,P},updateBrush:function(P){var H=this.originPoint;this.brush.attr({width:T(P.canvasX-H.x),height:T(P.canvasY-H.y),x:M(P.canvasX,H.x),y:M(P.canvasY,H.y)})},onKeyDown:function(P){var H=P.key;if(H){var k=this.trigger.toLowerCase(),d=H.toLowerCase();this.keydown=d===k||d==="control"&&k==="ctrl"||d==="ctrl"&&k==="control"}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},C=["shift","ctrl","alt","control"],D={getDefaultCfg:function(){return{multiple:!0,trigger:"shift",selectedState:"selected"}},getEvents:function(){return C.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.multiple?{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(P){var H=this,k=P.item;if(k&&!k.destroyed){var d=k.getType(),g=H.graph,F=H.keydown,V=H.multiple,tt=H.shouldUpdate;if(H.shouldBegin.call(H,P)){if(!F||!V){var ot=g.findAllByState(d,H.selectedState);Object(r.f)(ot,function(yt){yt!==k&&g.setItemState(yt,H.selectedState,!1)})}if(k.hasState(H.selectedState)){tt.call(H,P)&&g.setItemState(k,H.selectedState,!1);var at=g.findAllByState("node",H.selectedState),At=g.findAllByState("combo",H.selectedState);g.emit("nodeselectchange",{target:k,selectedItems:{nodes:at,combos:At},select:!1})}else tt.call(H,P)&&g.setItemState(k,H.selectedState,!0),at=g.findAllByState("node",H.selectedState),At=g.findAllByState("combo",H.selectedState),g.emit("nodeselectchange",{target:k,selectedItems:{nodes:at,combos:At},select:!0})}}},onCanvasClick:function(){var P=this,H=this.graph,k=H.findAllByState("node",this.selectedState);Object(r.f)(k,function(g){H.setItemState(g,P.selectedState,!1)});var d=H.findAllByState("combo",this.selectedState);Object(r.f)(d,function(g){H.setItemState(g,P.selectedState,!1)}),H.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},onKeyDown:function(P){var H=P.key;H&&(H.toLowerCase()===this.trigger.toLowerCase()||H.toLowerCase()==="control"?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1}},Y=e(122).a.transform,Z={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"}}},getEvents:function(){var P=this.fixSelectedItems;return P.fixState||(P.fixState="selected"),P.fixAll&&(P.fixLineWidth=!0,P.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(P){var H=P.originalEvent.touches,k=H[0],d=H[1];P.preventDefault(),d&&(this.startPoint={pageX:k.pageX,pageY:k.pageY},this.moveable=!0,d&&(this.endPoint={pageX:d.pageX,pageY:d.pageY}),this.originScale=this.currentScale||1)},onTouchMove:function(P){if(this.moveable){P.preventDefault();var H=P.originalEvent.touches,k=H[0],d=H[1];if(d){this.endPoint||(this.endPoint={pageX:d.pageX,pageY:d.pageY});var g=function(At,yt){return Math.hypot(yt.x-At.x,yt.y-At.y)},F=g({x:k.pageX,y:k.pageY},{x:d.pageX,y:d.pageY})/g({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),V=this.originScale*F;this.currentScale=V;var tt=this.get("minZoom")||this.graph.get("minZoom");if(!(V>(this.get("maxZoom")||this.graph.get("maxZoom"))||V<tt)){var ot=this.graph.get("canvas").getPointByClient(P.clientX,P.clientY);this.graph.zoomTo(V,{x:ot.x,y:ot.y}),this.graph.emit("wheelzoom",P)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(P){var H=this,k=this.graph,d=this.fixSelectedItems;if(this.shouldUpdate.call(this,P)){P.preventDefault();var g,F=k.get("canvas").getPointByClient(P.clientX,P.clientY),V=this.get("sensitivity"),tt=k.getZoom();g=tt*(P.wheelDelta<0?1-.05*V:1/(1-.05*V));var ot=this.get("minZoom")||k.get("minZoom");if(!(g>(this.get("maxZoom")||k.get("maxZoom"))||g<ot)){if(this.get("enableOptimize")){var at=this.get("optimizeZoom"),At=this.get("optimized"),yt=k.getNodes(),gt=k.getEdges(),bt=yt.length,Tt=gt.length;if(!At){for(var Dt=0;Dt<bt;Dt++)if(!(He=yt[Dt]).destroyed)for(var Ut=(_i=He.get("group").get("children")).length,jt=0;jt<Ut;jt++)(tr=_i[jt]).destoryed||tr.get("isKeyShape")||(tr.set("ori-visibility",tr.get("ori-visibility")||tr.get("visible")),tr.hide());for(var Vt=0;Vt<Tt;Vt++)for(Ut=(_i=(Ti=gt[Vt]).get("group").get("children")).length,jt=0;jt<Ut;jt++)(tr=_i[jt]).set("ori-visibility",tr.get("ori-visibility")||tr.get("visible")),tr.hide();this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Ht=setTimeout(function(){var Li=k.getZoom();if(H.get("optimized")){H.set("optimized",!1);for(var Vi=0;Vi<bt;Vi++){var ro=yt[Vi],jr=(Br=ro.get("group").get("children")).length;if(Li<at)(pr=(Nr=ro.getKeyShape()).get("ori-visibility"))&&Nr.show();else for(var Ji=0;Ji<jr;Ji++){var pr=(Kr=Br[Ji]).get("ori-visibility");!Kr.get("visible")&&pr&&pr&&Kr.show()}}for(var Yr=0;Yr<Tt;Yr++){var Br,Nr,Xr=gt[Yr];if(jr=(Br=Xr.get("group").get("children")).length,Li<at)(pr=(Nr=Xr.getKeyShape()).get("ori-visibility"))&&Nr.show();else for(Ji=0;Ji<jr;Ji++){var Kr;(Kr=Br[Ji]).get("visible")||(pr=Kr.get("ori-visibility"))&&Kr.show()}}}},100);this.set("timeout",Ht)}if(tt<=1){var re=void 0,pe=void 0;if(d.fixAll||d.fixLineWidth||d.fixLabel){re=k.findAllByState("node",d.fixState),pe=k.findAllByState("edge",d.fixState);for(var ye=tt/g,we=re.length,Re=0;Re<we;Re++){var He,pn=(He=re[Re]).getContainer(),fn=He.getModel(),Rn=He.getOriginStyle(),Cn=He.getStateStyle(d.fixState),kn=He.get("shapeFactory").getShape(fn.type).getStateStyle(d.fixState,He)[d.fixState];if(d.fixAll){if(g<=1){var Mn=Object(r.c)(pn.getMatrix());Mn||(Mn=[1,0,0,0,1,0,0,0,1]);var Tn=He.getModel(),Un=Tn.x,Kn=Tn.y;Mn=Y(Mn,[["t",-Un,-Kn],["s",ye,ye],["t",Un,Kn]]),pn.setMatrix(Mn)}}else for(Ut=(_i=pn.get("children")).length,jt=0;jt<Ut;jt++){var tr=_i[jt],or=void 0,nr=void 0;if(d.fixLabel&&tr.get("type")==="text"){or=tr.attr("fontSize")||12;var er=Cn[tr.get("name")],Sr=kn[tr.get("name")],Vr=er?er.fontSize:12,ti=Sr?Sr.fontSize:12,hi=Vr||ti||12;if(g<=1&&tr.attr("fontSize",hi/g),nr)break}if(d.fixLineWidth&&tr.get("isKeyShape")){nr=tr.attr("lineWidth")||0;var Fi=Cn.lineWidth||kn.lineWidth||Rn.lineWidth||0;if(g<=1&&tr.attr("lineWidth",Fi/g),or)break}}}for(var to=pe.length,si=0;si<to;si++){var Ti,_i=(pn=(Ti=pe[si]).getContainer()).get("children");for(fn=Ti.getModel(),Cn=Ti.getStateStyle(d.fixState),kn=Ti.get("shapeFactory").getShape(fn.type).getStateStyle(d.fixState,Ti)[d.fixState],Ut=_i.length,jt=0;jt<Ut&&(tr=_i[jt],or=void 0,nr=void 0,!((d.fixLabel||d.fixAll)&&tr.get("type")==="text"&&(or=tr.attr("fontSize")||12,er=Cn[tr.get("name")],Sr=kn[tr.get("name")],Vr=er?er.fontSize:12,ti=Sr?Sr.fontSize:12,hi=Vr||ti||12,g<=1&&tr.attr("fontSize",hi/g),nr)||(d.fixLineWidth||d.fixAll)&&tr.get("isKeyShape")&&(nr=tr.attr("lineWidth")||0,Fi=Cn.lineWidth||kn.lineWidth||1,g<=1&&tr.attr("lineWidth",Fi/g),or)));jt++);}}}k.zoomTo(g,{x:F.x,y:F.y}),k.emit("wheelzoom",P)}}}},et=e(14),dt={onMouseEnter:function(P){var H=P.item;this.currentTarget=H,this.showTooltip(P),this.graph.emit("tooltipchange",{item:P.item,action:"show"})},onMouseMove:function(P){this.shouldUpdate(P)?this.currentTarget&&P.item===this.currentTarget&&this.updatePosition(P):this.hideTooltip()},onMouseLeave:function(P){this.shouldEnd(P)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(P){var H=this.container;if(P.item&&!P.item.destroyed){H||(H=this.createTooltip(this.graph.get("canvas")),this.container=H);var k=this.formatText(P.item.get("model"),P);H.innerHTML=k,Object(et.c)(this.container,{visibility:"visible"}),this.updatePosition(P)}},hideTooltip:function(){Object(et.c)(this.container,{visibility:"hidden"})},updatePosition:function(P){var H=this.get("shouldBegin"),k=this.width,d=this.height,g=this.container,F=this.graph;if(H(P)){var V=F.getPointByClient(P.clientX,P.clientY),tt=F.getCanvasByPoint(V.x,V.y),ot=tt.x,at=tt.y,At=g.getBoundingClientRect();ot>k/2?ot-=At.width:ot+=this.offset,at>d/2?at-=At.height:at+=this.offset;var yt=ot+"px",gt=at+"px";Object(et.c)(this.container,{left:yt,top:gt,visibility:"visible"})}else Object(et.c)(g,{visibility:"hidden"})},createTooltip:function(P){var H=P.get("el");H.style.position="relative";var k=Object(et.b)('<div class="g6-tooltip g6-'+this.item+'-tooltip"></div>');return H.parentNode.appendChild(k),Object(et.c)(k,{position:"absolute",visibility:"visible"}),this.width=P.get("width"),this.height=P.get("height"),this.container=k,this.graph.get("tooltips").push(k),k}},ht=Object(n.a)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(H){return H.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},dt),St=Object(n.a)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(H){return"source: "+H.source+" target: "+H.target}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},dt),wt=["click","dblclick"],xt={getDefaultCfg:function(){return{trigger:"click",onChange:function(){}}},getEvents:function(){var P,H;return wt.includes(this.trigger)?H=this.trigger:(H="click",console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),(P={})["node:"+H]="onNodeClick",P.touchstart="onNodeClick",P},onNodeClick:function(P){var H=P.item,k=this.graph.findDataById(H.get("id"));if(k){var d=k.children;if(d&&d.length!==0){var g=!k.collapsed;this.shouldBegin(P,g)&&(k.collapsed=g,H.getModel().collapsed=g,this.graph.emit("itemcollapsed",{item:P.item,collapsed:g}),this.shouldUpdate(P,g)&&(this.onChange(H,g),this.graph.layout()))}}}},ft=b.a.calculationItemsBBox,Bt=function z(P,H){if(H(P)!==!1&&P){var k=P.get("combos");if(k.length===0)return!1;Object(r.f)(k,function(d){z(d,H)})}},Rt={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected"}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(P){var H=P.item;return!(!H||H.destroyed)&&!!this.shouldUpdate(this,P)&&H.getType()==="combo"},onDragStart:function(P){var H=this,k=this.graph,d=P.item;if(this.validationCombo(P)){this.targets=[];var g=k.findAllByState("combo",this.selectedState),F=d.get("id");g.filter(function(V){var tt=V.get("id");return F===tt}).length===0?this.targets.push(d):this.targets=g,this.activeState&&this.targets.map(function(V){var tt=V.getModel();if(tt.parentId){var ot=k.findById(tt.parentId);ot&&k.setItemState(ot,H.activeState,!0)}}),this.point={},this.originPoint={},this.origin={x:P.x,y:P.y},this.currentItemChildCombos=[],Bt(d,function(V){if(V.destroyed)return!1;var tt=V.getModel();return H.currentItemChildCombos.push(tt.id),!0})}},onDrag:function(P){var H=this;if(this.origin&&this.validationCombo(P))if(this.enableDelegate)this.updateDelegate(P);else{if(this.activeState){var k=this.graph,d=P.item,g=d.getModel(),F=k.getCombos(),V=d.getBBox(),tt=V.centerX,ot=V.centerY,at=V.width;F.filter(function(At){var yt=At.getModel();return g.parentId,yt.id!==g.id&&!H.currentItemChildCombos.includes(yt.id)}).map(function(At){var yt=At.getBBox(),gt=yt.centerX,bt=yt.centerY,Tt=yt.width,Dt=tt-gt,Ut=ot-bt,jt=2*Math.sqrt(Dt*Dt+Ut*Ut);at+Tt-jt>.8*at?k.setItemState(At,H.activeState,!0):k.setItemState(At,H.activeState,!1)})}Object(r.f)(this.targets,function(At){H.updateCombo(At,P)})}},updatePositions:function(P){var H=this;this.enableDelegate&&Object(r.f)(this.targets,function(k){H.updateCombo(k,P)})},onDrop:function(P){var H=this,k=P.item;if(k&&this.targets&&!k.destroyed){this.updatePositions(P);var d=this.graph,g=k.getModel();this.targets.map(function(F){F.getModel().parentId!==g.id?(H.activeState&&d.setItemState(k,H.activeState,!1),H.onlyChangeComboSize?d.updateCombo(F):d.updateComboTree(F,g.id)):d.updateCombo(k)}),this.end(k,P),this.endComparison=!0}},onNodeDrop:function(P){var H=this;if(this.targets&&this.targets.length!==0){this.updatePositions(P);var k,d=this.graph,g=P.item.getModel().comboId;if(g){if(this.activeState){var F=d.findById(g);d.setItemState(F,this.activeState,!1)}this.targets.map(function(V){H.onlyChangeComboSize?d.updateCombo(V):g!==V.getID()&&(k=d.findById(g),g!==V.getModel().parentId&&d.updateComboTree(V,g))})}else this.targets.map(function(V){H.onlyChangeComboSize?d.updateCombo(V):V.getModel().comboId&&d.updateComboTree(V)});this.endComparison=!0,this.end(k,P)}},onDragEnter:function(P){if(this.origin&&this.validationCombo(P)){var H=P.item,k=this.graph;this.activeState&&k.setItemState(H,this.activeState,!0)}},onDragLeave:function(P){if(this.origin&&this.validationCombo(P)){var H=P.item,k=this.graph;this.activeState&&k.setItemState(H,this.activeState,!1)}},onDragEnd:function(P){if(this.targets&&this.targets.length!==0){var H=P.item;this.updatePositions(P);var k=this.getParentCombo(H.getModel().parentId),d=this.graph;k&&this.activeState&&d.setItemState(k,this.activeState,!1),this.end(void 0,P)}},end:function(P,H){var k=this;if(this.origin){var d=this.graph;this.delegateShape&&(d.get("delegateGroup").clear(),this.delegateShape=null),P&&this.activeState&&d.setItemState(P,this.activeState,!1),P||this.targets.map(function(g){k.onlyChangeComboSize?d.updateCombo(g):d.updateComboTree(g)}),this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(P,H){var k=this;if(H(P)!==!1&&P){var d=P.get("combos");Object(r.f)(d,function(F){k.traverse(F,H)});var g=P.get("nodes");Object(r.f)(g,function(F){k.traverse(F,H)})}},updateCombo:function(P,H){var k=this;this.traverse(P,function(d){return!d.destroyed&&(k.updateSignleItem(d,H),!0)})},updateSignleItem:function(P,H){var k=this.origin,d=this.graph,g=P.getModel(),F=P.get("id");this.point[F]||(this.point[F]={x:g.x,y:g.y});var V=H.x-k.x+this.point[F].x,tt=H.y-k.y+this.point[F].y;d.updateItem(P,{x:V,y:tt})},getParentCombo:function(P){var H=this.graph;if(P){var k=H.findById(P);if(k)return k}},updateDelegate:function(P){var H=this.graph;if(this.delegateShape){var k=P.x-this.origin.x+this.originPoint.minX,d=P.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:k,y:d})}else{var g=H.get("delegateGroup"),F=null,V=(F=this.targets.length>1?ft(this.targets):this.targets[0].getBBox()).x,tt=F.y,ot=F.width,at=F.height,At=F.minX,yt=F.minY;this.originPoint={x:V,y:tt,width:ot,height:at,minX:At,minY:yt};var gt=Object(n.a)(Object(n.a)({},s.a.delegateStyle),this.delegateStyle);this.delegateShape=g.addShape("rect",{attrs:Object(n.a)({width:F.width,height:F.height,x:F.x,y:F.y},gt),name:"combo-delegate-shape"}),this.delegate=this.delegateShape}}},Ot=["click","dblclick"],X={getDefaultCfg:function(){return{trigger:"dblclick",relayout:!0}},getEvents:function(){var P,H;return Ot.includes(this.trigger)?H=this.trigger:(H="dblclick",console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),(P={})["combo:"+H]="onComboClick",P},onComboClick:function(P){var H=P.item,k=this.graph,d=this.relayout;if(H&&!H.destroyed&&H.getType()==="combo"){var g=H.getModel().id;g&&(k.collapseExpandCombo(g),d&&k.get("layout")?k.layout():k.refreshPositions())}}},ut=b.a.isPolygonsIntersect,vt=b.a.pathToPoints,pt=["drag","shift","ctrl","alt","control"],Et=["click","drag"],q=["shift","ctrl","control","alt","meta",void 0],st=["shift","ctrl","alt","control"],it={"drag-canvas":y,"zoom-canvas":Z,"drag-node":h,"activate-relations":{getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","canvas:click":"clearAllItemStates"}},setAllItemStates:function(P){var H=P.item,k=this.graph;if(this.item=H,this.shouldUpdate(P.item,{event:P,action:"activate"})){for(var d=this.activeState,g=this.inactiveState,F=k.getNodes(),V=k.getEdges(),tt=F.length,ot=V.length,at=0;at<tt;at++){var At=F[at],yt=At.hasState("selected");this.resetSelected&&yt&&k.setItemState(At,"selected",!1),k.setItemState(At,d,!1),g&&k.setItemState(At,g,!0)}for(at=0;at<ot;at++){var gt=V[at];k.setItemState(gt,d,!1),g&&k.setItemState(gt,g,!0)}g&&k.setItemState(H,g,!1),k.setItemState(H,d,!0);var bt=H.getEdges(),Tt=bt.length;for(at=0;at<Tt;at++){var Dt=void 0;Dt=(gt=bt[at]).getSource()===H?gt.getTarget():gt.getSource(),g&&k.setItemState(Dt,g,!1),k.setItemState(Dt,d,!0),k.setItemState(gt,g,!1),k.setItemState(gt,d,!0),gt.toFront()}k.emit("afteractivaterelations",{item:P.item,action:"activate"})}},clearActiveState:function(P){var H=this.get("graph");if(this.shouldUpdate(P.item,{event:P,action:"deactivate"})){var k=this.activeState,d=this.inactiveState,g=H.get("autoPaint");H.setAutoPaint(!1);for(var F=H.getNodes(),V=H.getEdges(),tt=F.length,ot=V.length,at=0;at<tt;at++){var At=F[at];H.clearItemStates(At,[k,d])}for(at=0;at<ot;at++){var yt=V[at];H.clearItemStates(yt,[k,d,"deactivate"])}H.paint(),H.setAutoPaint(g),H.emit("afteractivaterelations",{item:P.item||this.get("item"),action:"deactivate"})}},clearAllItemStates:function(P){var H=this.graph;if(this.shouldUpdate(P.item,{event:P,action:"deactivate"})){for(var k=this.activeState,d=this.inactiveState,g=H.getNodes(),F=H.getEdges(),V=g.length,tt=F.length,ot=0;ot<V;ot++){var at=g[ot];H.clearItemStates(at,[k,d])}for(ot=0;ot<tt;ot++){var At=F[ot];H.clearItemStates(At,[k,d,"deactivate"])}H.emit("afteractivaterelations",{item:P.item||this.get("item"),action:"deactivate"})}}},"brush-select":m,"click-select":D,"lasso-select":{getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return pt.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(P){var H=this.lasso;P.item||(this.trigger==="drag"||this.keydown)&&(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),H||(H=this.createLasso()),this.dragging=!0,this.originPoint={x:P.x,y:P.y},this.points.push(this.originPoint),H.show())},onDragMove:function(P){this.dragging&&(this.trigger==="drag"||this.keydown)&&(this.points.push({x:P.x,y:P.y}),this.updateLasso(P))},onDragEnd:function(P){(this.lasso||this.dragging)&&(this.trigger==="drag"||this.keydown)&&(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var P=this.points,H=[];return P.length&&(P.forEach(function(k,d){d===0?H.push(["M",k.x,k.y]):H.push(["L",k.x,k.y])}),H.push(["L",P[0].x,P[0].y])),H},clearStates:function(){var P=this.graph,H=this.selectedState,k=P.findAllByState("node",H),d=P.findAllByState("edge",H);k.forEach(function(g){return P.setItemState(g,H,!1)}),d.forEach(function(g){return P.setItemState(g,H,!1)}),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],P.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var P=this,H=this.graph,k=this.shouldUpdate,d=this.points.map(function(ot){return[H.getCanvasByPoint(ot.x,ot.y).x,H.getCanvasByPoint(ot.x,ot.y).y]}),g=this.selectedState,F=[],V=[];H.getNodes().forEach(function(ot){if(function(At,yt){var gt,bt=At.getKeyShape();if(At.get("type")==="path")gt=vt(bt.attr("path"));else{var Tt=bt.getCanvasBBox();gt=[[Tt.minX,Tt.minY],[Tt.maxX,Tt.minY],[Tt.maxX,Tt.maxY],[Tt.minX,Tt.maxY]]}return ut(yt,gt)}(ot,d)&&k(ot,"select")){F.push(ot);var at=ot.getModel();V.push(at.id),H.setItemState(ot,g,!0)}});var tt=[];this.includeEdges&&F.forEach(function(ot){ot.getOutEdges().forEach(function(at){var At=at.getModel(),yt=At.source,gt=At.target;V.includes(yt)&&V.includes(gt)&&k(at,"select")&&(tt.push(at),H.setItemState(at,P.selectedState,!0))})}),this.selectedEdges=tt,this.selectedNodes=F,this.onSelect&&this.onSelect(F,tt),H.emit("nodeselectchange",{selectedItems:{nodes:F,edges:tt},select:!0})},createLasso:function(){var P=this.graph.get("delegateGroup").addShape("path",{attrs:Object(n.a)({path:[]},this.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=P,this.delegate=P,this.points=[],P},updateLasso:function(P){this.lasso.attr({path:this.getLassoPath()})},onKeyDown:function(P){var H=P.key;H&&(H.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},tooltip:ht,"edge-tooltip":St,"collapse-expand":xt,"drag-combo":Rt,"collapse-expand-combo":X,"create-edge":{getDefaultCfg:function(){return{trigger:"click",key:void 0,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var P;return Et.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="click",console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),this.key&&q.indexOf(this.key.toLowerCase())===-1&&(this.trigger=void 0,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined")),this.trigger==="drag"?P={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:this.trigger==="click"&&(P={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),this.key&&(P.keydown="onKeyDown",P.keyup="onKeyUp"),P},onDragEnd:function(P){if(!this.key||this.keydown){var H=P.item;H&&H.getID()!==this.source&&H.getType()==="node"||this.cancelCreating({item:this.edge,x:P.x,y:P.y})}},onClick:function(P){if(!this.key||this.keydown){var H=P.item,k=this.graph,d=H.getModel(),g=this.getEdgeConfig;if(this.addingEdge&&this.edge){if(!this.shouldEnd.call(this,P))return;var F=void 0;F=g&&Object(r.r)(g)?g({source:this.source,target:d.id}):this.edgeConfig;var V=Object(n.a)({target:d.id},F);this.source===d.id&&(V.type="loop"),k.emit("beforecreateedge",{}),k.updateItem(this.edge,V),k.emit("aftercreateedge",{edge:this.edge}),this.edge.getKeyShape().set("capture",!0),this.edge=null,this.addingEdge=!1}else{if(!this.shouldBegin.call(this,P))return;F=void 0,F=g&&Object(r.r)(g)?g({source:d.id,target:d.id}):this.edgeConfig,this.edge=k.addItem("edge",Object(n.a)({source:d.id,target:d.id},F),!1),this.source=d.id,this.addingEdge=!0,this.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(P){if(!this.key||this.keydown){var H={x:P.x,y:P.y};this.graph.findById(this.source)?this.addingEdge&&this.edge&&this.graph.updateItem(this.edge,{target:H},!1):this.addingEdge=!1}},cancelCreating:function(P){if(!this.key||this.keydown){var H=this.graph,k=P.item;if(this.addingEdge&&P.target&&P.target.isCanvas&&P.target.isCanvas())return H.removeItem(this.edge,!1),this.edge=null,void(this.addingEdge=!1);this.addingEdge&&this.edge===k&&(H.removeItem(this.edge,!1),this.edge=null,this.addingEdge=!1)}},onKeyDown:function(P){var H=P.key;H&&(H.toLowerCase()===this.key.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.addingEdge&&this.edge&&(this.graph.removeItem(this.edge,!1),this.addingEdge=!1,this.edge=null),this.keydown=!1}},"shortcuts-call":{getDefaultCfg:function(){return{trigger:"ctrl",combinedKey:"1",functionName:"fitView",functionParams:[]}},getEvents:function(){return st.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="ctrl",console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '"+this.trigger+"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(P){var H=P.key;if(H){var k=this.trigger.toLowerCase(),d=H.toLowerCase();this.triggerKeydown||(this.triggerKeydown=d===k||d==="control"&&k==="ctrl"||d==="ctrl"&&k==="control");var g=this.graph;if(!g[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '"+this.functionName+"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D"),{};if(!this.triggerKeydown||this.combinedKey){var F=this.combinedKey.toLowerCase();this.triggerKeydown&&(d===F||d==="control"&&F==="ctrl"||d==="ctrl"&&F==="control")&&(this.functionParams&&this.functionParams.length?g[this.functionName].apply(g,this.functionParams):g[this.functionName]())}else this.functionParams&&this.functionParams.length?g[this.functionName].apply(g,this.functionParams):g[this.functionName]()}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}}};Object(r.f)(it,function(z,P){Object(p.o)(P,z)})},function(a,E,e){"use strict";var r=e(1),p=e(5),b=e(0);function S(Ot){return(S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X})(Ot)}Object(p.r)("circle",{options:{size:p.e.defaultNode.size,style:{x:0,y:0,stroke:p.e.defaultNode.style.stroke,fill:p.e.defaultNode.style.fill,lineWidth:p.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:p.e.nodeLabel.style.fill,fontSize:p.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:p.e.defaultNode.linkPoints.size,lineWidth:p.e.defaultNode.linkPoints.lineWidth,fill:p.e.defaultNode.linkPoints.fill,stroke:p.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(r.a)({},p.e.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(X,ut){var vt=this.getOptions(X).icon,pt=vt===void 0?{}:vt,Et=this.getShapeStyle(X),q=Object(b.e)({},pt,X.icon),st=ut.addShape("circle",{attrs:Et,className:this.type+"-keyShape",draggable:!0}),it=q.width,z=q.height;return q.show&&ut.addShape("image",{attrs:Object(r.a)({x:-it/2,y:-z/2},q),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(X,ut),st},drawLinkPoints:function(X,ut){var vt=this.getOptions(X).linkPoints,pt=vt===void 0?{}:vt,Et=pt.top,q=pt.left,st=pt.right,it=pt.bottom,z=pt.size,P=pt.r,H=Object(r.c)(pt,["top","left","right","bottom","size","r"]),k=this.getSize(X)[0]/2;q&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},H),{x:-k,y:0,r:z/2||P||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),st&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},H),{x:k,y:0,r:z/2||P||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Et&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},H),{x:0,y:-k,r:z/2||P||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),it&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},H),{x:0,y:k,r:z/2||P||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(X){var ut=this.getOptions(X).style,vt={stroke:X.color},pt=Object(b.e)({},ut,vt),Et=this.getSize(X)[0]/2;return Object(r.a)({x:0,y:0,r:Et},pt)},update:function(X,ut){var vt=ut.getContainer(),pt=this.getSize(X),Et={stroke:X.color,r:pt[0]/2},q=ut.get("keyShape"),st=Object(b.e)({},q.attr(),Et,X.style);this.updateShape(X,ut,st,!0),this.updateLinkPoints(X,vt)}},"single-node"),Object(p.r)("rect",{options:{size:[100,30],style:{radius:0,stroke:p.e.defaultNode.style.stroke,fill:p.e.defaultNode.style.fill,lineWidth:p.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:p.e.nodeLabel.style.fill,fontSize:p.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:p.e.defaultNode.linkPoints.size,lineWidth:p.e.defaultNode.linkPoints.lineWidth,fill:p.e.defaultNode.linkPoints.fill,stroke:p.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(r.a)({},p.e.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(X,ut){var vt=this.getShapeStyle(X),pt=ut.addShape("rect",{attrs:vt,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawLinkPoints(X,ut),pt},drawLinkPoints:function(X,ut){var vt=this.getOptions(X).linkPoints,pt=vt===void 0?{}:vt,Et=pt.top,q=pt.left,st=pt.right,it=pt.bottom,z=pt.size,P=pt.r,H=Object(r.c)(pt,["top","left","right","bottom","size","r"]),k=this.getSize(X),d=k[0],g=k[1];q&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},H),{x:-d/2,y:0,r:z/2||P||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),st&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},H),{x:d/2,y:0,r:z/2||P||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Et&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},H),{x:0,y:-g/2,r:z/2||P||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),it&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},H),{x:0,y:g/2,r:z/2||P||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(X){var ut=this.getOptions(X).style,vt={stroke:X.color},pt=Object(b.A)({},ut,vt),Et=this.getSize(X),q=pt.width||Et[0],st=pt.height||Et[1];return Object(r.a)({x:-q/2,y:-st/2,width:q,height:st},pt)},update:function(X,ut){var vt=ut.getContainer(),pt=this.getOptions({}).style,Et=this.getSize(X),q=ut.get("keyShape");X.size||(Et[0]=q.attr("width")||pt.width,Et[1]=q.attr("height")||pt.height);var st={stroke:X.color,x:-Et[0]/2,y:-Et[1]/2,width:Et[0],height:Et[1]},it=Object(b.A)({},pt,q.attr(),st);it=Object(b.A)(it,X.style),this.updateShape(X,ut,it,!1),this.updateLinkPoints(X,vt)}},"single-node"),Object(p.r)("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:p.e.defaultNode.style.stroke,fill:p.e.defaultNode.style.fill,lineWidth:p.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:p.e.nodeLabel.style.fill,fontSize:p.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:p.e.defaultNode.linkPoints.size,lineWidth:p.e.defaultNode.linkPoints.lineWidth,fill:p.e.defaultNode.linkPoints.fill,stroke:p.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(r.a)({},p.e.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(X,ut){var vt=this.getOptions(X).icon,pt=vt===void 0?{}:vt,Et=this.getShapeStyle(X),q=ut.addShape("ellipse",{attrs:Et,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0}),st=pt.width,it=pt.height;return pt.show&&ut.addShape("image",{attrs:Object(r.a)({x:-st/2,y:-it/2},pt),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(X,ut),q},drawLinkPoints:function(X,ut){var vt=this.getOptions(X).linkPoints,pt=vt===void 0?{}:vt,Et=pt.top,q=pt.left,st=pt.right,it=pt.bottom,z=pt.size,P=pt.r,H=Object(r.c)(pt,["top","left","right","bottom","size","r"]),k=this.getSize(X),d=k[0]/2,g=k[1]/2;q&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},H),{x:-d,y:0,r:z/2||P||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),st&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},H),{x:d,y:0,r:z/2||P||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Et&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},H),{x:0,y:-g,r:z/2||P||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),it&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},H),{x:0,y:g,r:z/2||P||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(X){var ut=this.getOptions(X).style,vt={stroke:X.color},pt=Object(b.A)({},ut,vt),Et=this.getSize(X),q=Et[0]/2,st=Et[1]/2;return Object(r.a)({x:0,y:0,rx:q,ry:st},pt)},update:function(X,ut){var vt=ut.getContainer(),pt=this.getOptions({}).style,Et=this.getSize(X),q={stroke:X.color,rx:Et[0]/2,ry:Et[1]/2},st=ut.get("keyShape"),it=Object(b.A)({},pt,st.attr(),q);it=Object(b.A)(it,X.style),this.updateShape(X,ut,it,!0),this.updateLinkPoints(X,vt)}},"single-node"),Object(p.r)("diamond",{options:{size:[80,80],style:{stroke:p.e.defaultNode.style.stroke,fill:p.e.defaultNode.style.fill,lineWidth:p.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:p.e.nodeLabel.style.fill,fontSize:p.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:p.e.defaultNode.linkPoints.size,lineWidth:p.e.defaultNode.linkPoints.lineWidth,fill:p.e.defaultNode.linkPoints.fill,stroke:p.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(r.a)({},p.e.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(X,ut){var vt=this.getOptions(X).icon,pt=vt===void 0?{}:vt,Et=this.getShapeStyle(X),q=ut.addShape("path",{attrs:Et,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),st=pt.width,it=pt.height;return pt.show&&ut.addShape("image",{attrs:Object(r.a)({x:-st/2,y:-it/2},pt),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(X,ut),q},drawLinkPoints:function(X,ut){var vt=this.getOptions(X).linkPoints,pt=vt===void 0?{}:vt,Et=pt.top,q=pt.left,st=pt.right,it=pt.bottom,z=pt.size,P=pt.r,H=Object(r.c)(pt,["top","left","right","bottom","size","r"]),k=this.getSize(X),d=k[0],g=k[1];q&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},H),{x:-d/2,y:0,r:z/2||P||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),st&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},H),{x:d/2,y:0,r:z/2||P||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Et&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},H),{x:0,y:-g/2,r:z/2||P||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),it&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},H),{x:0,y:g/2,r:z/2||P||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getPath:function(X){var ut=this.getSize(X),vt=ut[0],pt=ut[1];return[["M",0,-pt/2],["L",vt/2,0],["L",0,pt/2],["L",-vt/2,0],["Z"]]},getShapeStyle:function(X){var ut=this.getOptions(X).style,vt={stroke:X.color},pt=Object(b.A)({},ut,vt),Et=this.getPath(X);return Object(r.a)({path:Et},pt)},update:function(X,ut){var vt=ut.getContainer(),pt=this.getOptions({}).style,Et=this.getPath(X),q={stroke:X.color,path:Et},st=ut.get("keyShape"),it=Object(b.A)({},pt,st.attr(),q);it=Object(b.A)(it,X.style),this.updateShape(X,ut,it,!0),this.updateLinkPoints(X,vt)}},"single-node"),Object(p.r)("triangle",{options:{size:40,direction:"up",style:{stroke:p.e.defaultNode.style.stroke,fill:p.e.defaultNode.style.fill,lineWidth:p.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:p.e.nodeLabel.style.fill,fontSize:p.e.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:p.e.defaultNode.linkPoints.size,lineWidth:p.e.defaultNode.linkPoints.lineWidth,fill:p.e.defaultNode.linkPoints.fill,stroke:p.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:Object(r.a)({},p.e.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(X,ut){var vt=this.getOptions(X),pt=vt.icon,Et=pt===void 0?{}:pt,q=vt.direction,st=this.getShapeStyle(X),it=X.direction||q,z=ut.addShape("path",{attrs:st,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),P=Et.width,H=Et.height,k=Et.show,d=Et.offset;if(k){var g=-P/2,F=-H/2;it!=="up"&&it!=="down"||(F+=d),it!=="left"&&it!=="right"||(g+=d),ut.addShape("image",{attrs:Object(r.a)({x:g,y:F},Et),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})}return this.drawLinkPoints(X,ut),z},drawLinkPoints:function(X,ut){var vt=this.getOptions(X),pt=vt.linkPoints,Et=pt===void 0?{}:pt,q=vt.direction,st=X.direction||q,it=Et.top,z=Et.left,P=Et.right,H=Et.bottom,k=Et.size,d=Et.r,g=Object(r.c)(Et,["top","left","right","bottom","size","r"]),F=this.getSize(X)[0];if(z){var V=null,tt=F*Math.sin(1/3*Math.PI),ot=F*Math.sin(1/3*Math.PI);st==="up"?V=[-ot,tt]:st==="down"?V=[-ot,-tt]:st==="left"&&(V=[-ot,ot-tt]),V&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},g),{x:V[0],y:V[1],r:k/2||d||5}),className:"link-point-left",name:"link-point-left"})}if(P){var at=null;tt=F*Math.sin(1/3*Math.PI),ot=F*Math.sin(1/3*Math.PI),st==="up"?at=[ot,tt]:st==="down"?at=[ot,-tt]:st==="right"&&(at=[ot,ot-tt]),at&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},g),{x:at[0],y:at[1],r:k/2||d||5}),className:"link-point-right",name:"link-point-right"})}if(it){var At=null;tt=F*Math.sin(1/3*Math.PI),ot=F*Math.sin(1/3*Math.PI),st==="up"?At=[ot-tt,-tt]:st==="left"?At=[ot,-tt]:st==="right"&&(At=[-ot,-tt]),At&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},g),{x:At[0],y:At[1],r:k/2||d||5}),className:"link-point-top",name:"link-point-top"})}if(H){var yt=null;tt=F*Math.sin(1/3*Math.PI),ot=F*Math.sin(1/3*Math.PI),st==="down"?yt=[-ot+tt,tt]:st==="left"?yt=[ot,tt]:st==="right"&&(yt=[-ot,tt]),yt&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},g),{x:yt[0],y:yt[1],r:k/2||d||5}),className:"link-point-bottom",name:"link-point-bottom"})}},getPath:function(X){var ut=this.getOptions(X).direction,vt=X.direction||ut,pt=this.getSize(X)[0],Et=pt*Math.sin(1/3*Math.PI),q=pt*Math.sin(1/3*Math.PI),st=[["M",-q,Et],["L",0,-Et],["L",q,Et],["Z"]];return vt==="down"?st=[["M",-q,-Et],["L",q,-Et],["L",0,Et],["Z"]]:vt==="left"?st=[["M",-q,q-Et],["L",q,-q],["L",q,q],["Z"]]:vt==="right"&&(st=[["M",q,q-Et],["L",-q,q],["L",-q,-q],["Z"]]),st},getShapeStyle:function(X){var ut=this.getOptions(X).style,vt={stroke:X.color},pt=Object(b.A)({},ut,vt),Et=this.getPath(X);return Object(r.a)({path:Et},pt)},update:function(X,ut){var vt=ut.getContainer(),pt=this.getOptions({}).style,Et=this.getPath(X),q={stroke:X.color,path:Et},st=ut.get("keyShape"),it=Object(b.A)({},pt,st.attr(),q);it=Object(b.A)(it,X.style),this.updateShape(X,ut,it,!0),this.updateLinkPoints(X,vt)},updateLinkPoints:function(X,ut){var vt=this.getOptions({}),pt=vt.linkPoints,Et=vt.direction,q=X.direction||Et,st=ut.find(function(pe){return pe.get("className")==="link-point-left"}),it=ut.find(function(pe){return pe.get("className")==="link-point-right"}),z=ut.find(function(pe){return pe.get("className")==="link-point-top"}),P=ut.find(function(pe){return pe.get("className")==="link-point-bottom"}),H=pt,k=st||it||z||P;k&&(H=k.attr());var d=Object(b.A)({},H,X.linkPoints),g=d.fill,F=d.stroke,V=d.lineWidth,tt=d.size/2;tt||(tt=d.r);var ot=X.linkPoints?X.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},at=ot.left,At=ot.right,yt=ot.top,gt=ot.bottom,bt=this.getSize(X)[0],Tt={r:tt,fill:g,stroke:F,lineWidth:V},Dt=null,Ut=bt*Math.sin(1/3*Math.PI),jt=bt*Math.sin(1/3*Math.PI);q==="up"?Dt=[-jt,Ut]:q==="down"?Dt=[-jt,-Ut]:q==="left"&&(Dt=[-jt,jt-Ut]),Dt&&(st?at||at===void 0?st.attr(Object(r.a)(Object(r.a)({},Tt),{x:Dt[0],y:Dt[1]})):st.remove():at&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Tt),{x:Dt[0],y:Dt[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}));var Vt=null;q==="up"?Vt=[jt,Ut]:q==="down"?Vt=[jt,-Ut]:q==="right"&&(Vt=[jt,jt-Ut]),Vt&&(it?At||At===void 0?it.attr(Object(r.a)(Object(r.a)({},Tt),{x:Vt[0],y:Vt[1]})):it.remove():At&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Tt),{x:Vt[0],y:Vt[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}));var Ht=null;q==="up"?Ht=[jt-Ut,-Ut]:q==="left"?Ht=[jt,-Ut]:q==="right"&&(Ht=[-jt,-Ut]),Ht&&(z?yt||yt===void 0?z.attr(Object(r.a)(Object(r.a)({},Tt),{x:Ht[0],y:Ht[1]})):z.remove():yt&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Tt),{x:Ht[0],y:Ht[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}));var re=null;q==="down"?re=[-jt+Ut,Ut]:q==="left"?re=[jt,Ut]:q==="right"&&(re=[-jt,Ut]),re&&(P?gt||gt===void 0?P.attr(Object(r.a)(Object(r.a)({},Tt),{x:re[0],y:re[1]})):P.remove():gt&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Tt),{x:re[0],y:re[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))}},"single-node"),Object(p.r)("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:p.e.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf"},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(X,ut){var vt=this.getOptions(X).preRect,pt=vt===void 0?{}:vt,Et=this.getShapeStyle(X),q=this.getSize(X),st=q[0],it=q[1],z=ut.addShape("rect",{attrs:Et,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),P=pt.show,H=Object(r.c)(pt,["show"]);return P&&ut.addShape("rect",{attrs:Object(r.a)({x:-st/2,y:-it/2,height:it},H),className:"pre-rect",name:"pre-rect",draggable:!0}),this.drawLogoIcon(X,ut),this.drawStateIcon(X,ut),this.drawLinkPoints(X,ut),z},drawLogoIcon:function(X,ut){var vt=this.getOptions(X).logoIcon,pt=vt===void 0?{}:vt,Et=this.getSize(X)[0];if(pt.show){var q=pt.width,st=pt.height,it=pt.x,z=pt.y,P=pt.offset,H=Object(r.c)(pt,["width","height","x","y","offset"]);ut.addShape("image",{attrs:Object(r.a)(Object(r.a)({},H),{x:it||-Et/2+q+P,y:z||-st/2,width:q,height:st}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(X,ut){var vt=this.getOptions(X).stateIcon,pt=vt===void 0?{}:vt,Et=this.getSize(X)[0];if(pt.show){var q=pt.width,st=pt.height,it=pt.x,z=pt.y,P=pt.offset,H=Object(r.c)(pt,["width","height","x","y","offset"]);ut.addShape("image",{attrs:Object(r.a)(Object(r.a)({},H),{x:it||Et/2-q+P,y:z||-st/2,width:q,height:st}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(X,ut){var vt=this.getOptions(X).linkPoints,pt=vt===void 0?{}:vt,Et=pt.top,q=pt.left,st=pt.right,it=pt.bottom,z=pt.size,P=pt.r,H=Object(r.c)(pt,["top","left","right","bottom","size","r"]),k=this.getSize(X),d=k[0],g=k[1];q&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},H),{x:-d/2,y:0,r:z/2||P||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),st&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},H),{x:d/2,y:0,r:z/2||P||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Et&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},H),{x:0,y:-g/2,r:z/2||P||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),it&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},H),{x:0,y:g/2,r:z/2||P||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},drawLabel:function(X,ut){var vt=this.getOptions(X),pt=vt.labelCfg,Et=pt===void 0?{}:pt,q=vt.logoIcon,st=q===void 0?{}:q,it=vt.descriptionCfg,z=it===void 0?{}:it,P=this.getSize(X)[0],H=null,k=st.show,d=st.width,g=-P/2+Et.offset;k&&(g=-P/2+d+Et.offset);var F=Et.style,V=z.style,tt=z.paddingTop;return Object(b.x)(X.description)?(H=ut.addShape("text",{attrs:Object(r.a)(Object(r.a)({},F),{x:g,y:-5,text:X.label}),className:"text-shape",name:"text-shape",draggable:!0}),ut.addShape("text",{attrs:Object(r.a)(Object(r.a)({},V),{x:g,y:17+(tt||0),text:X.description}),className:"rect-description",name:"rect-description",draggable:!0})):H=ut.addShape("text",{attrs:Object(r.a)(Object(r.a)({},F),{x:g,y:7,text:X.label}),className:"text-shape",name:"text-shape",draggable:!0}),H},getShapeStyle:function(X){var ut=this.getOptions(X).style,vt={stroke:X.color},pt=Object(b.A)({},ut,vt),Et=this.getSize(X),q=pt.width||Et[0],st=pt.height||Et[1];return Object(r.a)({x:-q/2,y:-st/2,width:q,height:st},pt)},update:function(X,ut){var vt=this.getOptions(X),pt=vt.style,Et=pt===void 0?{}:pt,q=vt.labelCfg,st=q===void 0?{}:q,it=vt.descriptionCfg,z=it===void 0?{}:it,P=this.getSize(X),H=P[0],k=P[1];ut.get("keyShape").attr(Object(r.a)(Object(r.a)({},Et),{x:-H/2,y:-k/2,width:H,height:k}));var d=ut.getContainer(),g=d.find(function(Mn){return Mn.get("className")==="rect-logo-icon"}),F=g?g.attr():{},V=Object(b.A)({},F,X.logoIcon),tt=V.width;tt===void 0&&(tt=this.options.logoIcon.width);var ot=X.logoIcon?X.logoIcon.show:void 0,at=st.offset,At=-H/2+tt+at;ot||ot===void 0||(At=-H/2+at);var yt=d.find(function(Mn){return Mn.get("className")==="node-label"}),gt=d.find(function(Mn){return Mn.get("className")==="rect-description"});if(X.label)if(yt){var bt=X.labelCfg?X.labelCfg.style:{},Tt=Object(b.A)({},yt.attr(),bt);X.label&&(Tt.text=X.label),Tt.x=At,Object(b.x)(X.description)&&(Tt.y=-5),gt&&(gt.resetMatrix(),gt.attr({x:At})),yt.resetMatrix(),yt.attr(Tt)}else d.addShape("text",{attrs:Object(r.a)(Object(r.a)({},st.style),{x:At,y:X.description?-5:7,text:X.label}),className:"node-label",name:"node-label",draggable:!0});if(Object(b.x)(X.description)){var Dt=z.paddingTop;if(gt){bt=X.descriptionCfg?X.descriptionCfg.style:{};var Ut=Object(b.A)({},gt.attr(),bt);Object(b.x)(X.description)&&(Ut.text=X.description),Ut.x=At,gt.resetMatrix(),gt.attr(Object(r.a)(Object(r.a)({},Ut),{y:17+(Dt||0)}))}else d.addShape("text",{attrs:Object(r.a)(Object(r.a)({},z.style),{x:At,y:17+(Dt||0),text:X.description}),className:"rect-description",name:"rect-description",draggable:!0})}var jt=d.find(function(Mn){return Mn.get("className")==="pre-rect"});if(jt){var Vt=Object(b.A)({},jt.attr(),X.preRect);jt.attr(Object(r.a)(Object(r.a)({},Vt),{x:-H/2,y:-k/2,height:k}))}if(g)if(ot||ot===void 0){var Ht=V.width,re=V.height,pe=V.x,ye=V.y,we=V.offset,Re=Object(r.c)(V,["width","height","x","y","offset"]);g.attr(Object(r.a)(Object(r.a)({},Re),{x:pe||-H/2+Ht+we,y:ye||-re/2,width:Ht,height:re}))}else g.remove();else ot&&this.drawLogoIcon(X,d);var He=d.find(function(Mn){return Mn.get("className")==="rect-state-icon"}),pn=He?He.attr():{},fn=Object(b.A)({},pn,X.stateIcon);if(He){fn.show||fn.show===void 0||He.remove();var Rn=fn.width,Cn=(re=fn.height,pe=fn.x,ye=fn.y,fn.offset),kn=Object(r.c)(fn,["width","height","x","y","offset"]);He.attr(Object(r.a)(Object(r.a)({},kn),{x:pe||H/2-Rn+Cn,y:ye||-re/2,width:Rn,height:re}))}else fn.show&&this.drawStateIcon(X,d);this.updateLinkPoints(X,d)}},"single-node"),Object(p.r)("star",{options:{size:60,style:{stroke:p.e.defaultNode.style.stroke,fill:p.e.defaultNode.style.fill,lineWidth:p.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:p.e.nodeLabel.style.fill,fontSize:p.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:p.e.defaultNode.linkPoints.size,lineWidth:p.e.defaultNode.linkPoints.lineWidth,fill:p.e.defaultNode.linkPoints.fill,stroke:p.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(r.a)({},p.e.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(X,ut){var vt=this.getOptions(X).icon,pt=vt===void 0?{}:vt,Et=this.getShapeStyle(X),q=ut.addShape("path",{attrs:Et,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),st=pt.width,it=pt.height;return pt.show&&ut.addShape("image",{attrs:Object(r.a)({x:-st/2,y:-it/2},pt),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(X,ut),q},drawLinkPoints:function(X,ut){var vt=this.getOptions(X).linkPoints,pt=vt===void 0?{}:vt,Et=pt.top,q=pt.left,st=pt.right,it=pt.leftBottom,z=pt.rightBottom,P=pt.size,H=pt.r,k=Object(r.c)(pt,["top","left","right","leftBottom","rightBottom","size","r"]),d=this.getSize(X)[0];if(st){var g=Math.cos(.1*Math.PI)*d,F=Math.sin(.1*Math.PI)*d;ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},k),{x:g,y:-F,r:P/2||H||5}),className:"link-point-right",name:"link-point-right"})}Et&&(g=Math.cos(.5*Math.PI)*d,F=Math.sin(.5*Math.PI)*d,ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},k),{x:g,y:-F,r:P/2||H||5}),className:"link-point-top",name:"link-point-top"})),q&&(g=Math.cos(.9*Math.PI)*d,F=Math.sin(.9*Math.PI)*d,ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},k),{x:g,y:-F,r:P/2||H||5}),className:"link-point-left",name:"link-point-left"})),it&&(g=Math.cos(1.3*Math.PI)*d,F=Math.sin(1.3*Math.PI)*d,ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},k),{x:g,y:-F,r:P/2||H||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})),z&&(g=Math.cos(1.7*Math.PI)*d,F=Math.sin(1.7*Math.PI)*d,ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},k),{x:g,y:-F,r:P/2||H||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"}))},getPath:function(X){for(var ut=this.getSize(X)[0],vt=3*ut/8,pt=X.innerR||vt,Et=[],q=0;q<5;q++){var st=Math.cos((18+72*q)/180*Math.PI)*ut,it=Math.sin((18+72*q)/180*Math.PI)*ut,z=Math.cos((54+72*q)/180*Math.PI)*pt,P=Math.sin((54+72*q)/180*Math.PI)*pt;q===0?Et.push(["M",st,-it]):Et.push(["L",st,-it]),Et.push(["L",z,-P])}return Et.push(["Z"]),Et},getShapeStyle:function(X){var ut=this.getOptions(X).style,vt={stroke:X.color},pt=Object(b.A)({},ut,vt),Et=this.getPath(X);return Object(r.a)({path:Et},pt)},update:function(X,ut){var vt=ut.getContainer(),pt=this.getOptions({}).style,Et=this.getPath(X),q={stroke:X.color,path:Et},st=ut.get("keyShape"),it=Object(b.A)({},pt,st.attr(),q);it=Object(b.A)(it,X.style),this.updateShape(X,ut,it,!0),this.updateLinkPoints(X,vt)},updateLinkPoints:function(X,ut){var vt=this.getOptions({}).linkPoints,pt=ut.find(function(Ut){return Ut.get("className")==="link-point-left"}),Et=ut.find(function(Ut){return Ut.get("className")==="link-point-right"}),q=ut.find(function(Ut){return Ut.get("className")==="link-point-top"}),st=ut.find(function(Ut){return Ut.get("className")==="link-point-left-bottom"}),it=ut.find(function(Ut){return Ut.get("className")==="link-point-right-bottom"}),z=vt,P=pt||Et||q||st||it;P&&(z=P.attr());var H=Object(b.A)({},z,X.linkPoints),k=H.fill,d=H.stroke,g=H.lineWidth,F=H.size/2;F||(F=H.r);var V=X.linkPoints?X.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},tt=V.left,ot=V.right,at=V.top,At=V.leftBottom,yt=V.rightBottom,gt=this.getSize(X)[0],bt={r:F,fill:k,stroke:d,lineWidth:g},Tt=Math.cos(.1*Math.PI)*gt,Dt=Math.sin(.1*Math.PI)*gt;Et?ot||ot===void 0?Et.attr(Object(r.a)(Object(r.a)({},bt),{x:Tt,y:-Dt})):Et.remove():ot&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},bt),{x:Tt,y:-Dt}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Tt=Math.cos(.5*Math.PI)*gt,Dt=Math.sin(.5*Math.PI)*gt,q?at||at===void 0?q.attr(Object(r.a)(Object(r.a)({},bt),{x:Tt,y:-Dt})):q.remove():at&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},bt),{x:Tt,y:-Dt}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),Tt=Math.cos(.9*Math.PI)*gt,Dt=Math.sin(.9*Math.PI)*gt,pt?tt||tt===void 0?pt.attr(Object(r.a)(Object(r.a)({},bt),{x:Tt,y:-Dt})):pt.remove():tt&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},bt),{x:Tt,y:-Dt}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),Tt=Math.cos(1.3*Math.PI)*gt,Dt=Math.sin(1.3*Math.PI)*gt,st?At||At===void 0?st.attr(Object(r.a)(Object(r.a)({},bt),{x:Tt,y:-Dt})):st.remove():At&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},bt),{x:Tt,y:-Dt}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0}),Tt=Math.cos(1.7*Math.PI)*gt,Dt=Math.sin(1.7*Math.PI)*gt,it?yt||yt===void 0?it.attr(Object(r.a)(Object(r.a)({},bt),{x:Tt,y:-Dt})):st.remove():yt&&ut.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},bt),{x:Tt,y:-Dt}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0})}},"single-node");var l=function(X){var ut=X.x,vt=X.y;return{x:ut,y:vt,centerX:ut,centerY:vt,minX:ut,minY:vt,maxX:ut,maxY:vt,height:0,width:0}},A=function(X,ut){return 2*Math.abs(X.centerX-ut.centerX)<X.width+ut.width&&2*Math.abs(X.centerY-ut.centerY)<X.height+ut.height},j=function(X){for(var ut=[],vt={},pt=X.length,Et=0;Et<pt;Et++){var q=X[Et];q.id=q.x+"|||"+q.y,vt[q.id]=q,ut.push(q)}return ut},y=function(X){return X=j(X)},n=function(X,ut){return[X,{x:X.x,y:ut.y},ut]},s=function(X,ut){return X.width===0&&X.height===0?X:{centerX:X.centerX,centerY:X.centerY,minX:X.minX-ut,minY:X.minY-ut,maxX:X.maxX+ut,maxY:X.maxY+ut,height:X.height+2*ut,width:X.width+2*ut}},h=function(X,ut,vt){var pt=function(st,it){var z=Math.abs(st.x-it.centerX),P=Math.abs(st.y-it.centerY);return z===0&&P===0?0:z/it.width>P/it.height}(ut,X);if(pt===0){var Et=X.centerX,q=X.centerY;return vt.y<ut.y?q=X.minY:vt.x>ut.x?Et=X.maxX:vt.x<ut.x?Et=X.minX:vt.x===ut.x&&(q=X.maxY),{x:Et,y:q}}return pt?{x:ut.x>X.centerX?X.maxX:X.minX,y:ut.y}:{x:ut.x,y:ut.y>X.centerY?X.maxY:X.minY}},M=function(X,ut){var vt=Math.min(X.minX,ut.minX),pt=Math.min(X.minY,ut.minY),Et=Math.max(X.maxX,ut.maxX),q=Math.max(X.maxY,ut.maxY);return{centerX:(vt+Et)/2,centerY:(pt+q)/2,minX:vt,minY:pt,maxX:Et,maxY:q,height:q-pt,width:Et-vt}},O=function(X){var ut=X.minX,vt=X.minY,pt=X.maxX,Et=X.maxY;return[{x:ut,y:vt},{x:pt,y:vt},{x:pt,y:Et},{x:ut,y:Et}]},T=function(X,ut){var vt=X.x,pt=X.y;return vt<ut.minX||vt>ut.maxX||pt<ut.minY||pt>ut.maxY},v=function(X,ut){return Math.abs(X.x-ut.x)+Math.abs(X.y-ut.y)},m=function(X,ut,vt,pt,Et){return v(X,ut)+v(X,vt)+function(q,st){var it=0;return st.forEach(function(z){z&&(q.x===z.x&&(it+=-2),q.y===z.y&&(it+=-2))}),it}(X,[ut,vt,pt,Et])},C=function(X,ut,vt,pt){var Et=vt.x-X.x,q=vt.y-X.y,st=pt.x-X.x,it=pt.y-X.y,z=vt.x-ut.x,P=vt.y-ut.y,H=pt.x-ut.x,k=pt.y-ut.y;return(Et*it-q*st)*(z*k-P*H)<=0&&(Et*P-q*z)*(st*k-it*H)<=0},D=function(X,ut,vt){if(vt.width===0&&vt.height===0)return!1;var pt=O(vt),Et=pt[0],q=pt[1],st=pt[2],it=pt[3];return C(X,ut,Et,q)||C(X,ut,Et,it)||C(X,ut,q,st)||C(X,ut,st,it)},Y=function(X,ut,vt,pt,Et,q,st){var it=[],z=[ut],P={},H={},k={};H[ut.id]=0,k[ut.id]=m(ut,vt,ut);var d={};X.forEach(function(V){d[V.id]=V});for(var g=function(){var tt,ot,at,At,yt=1/0;if(z.forEach(function(bt){k[bt.id]<yt&&(yt=k[bt.id],tt=bt)}),tt===vt){var gt=[];return function bt(Tt,Dt,Ut,jt,Vt){Vt===void 0&&(Vt=0),Tt.unshift(Dt[jt]),Ut[jt]&&Ut[jt]!==jt&&Vt<=100&&bt(Tt,Dt,Ut,Ut[jt],Vt+1)}(gt,d,P,vt.id),{value:gt}}at=tt,(At=(ot=z).indexOf(at))>-1&&ot.splice(At,1),it.push(tt),function(bt,Tt,Dt,Ut){var jt=[];return bt.forEach(function(Vt){Vt!==Tt&&(Vt.x!==Tt.x&&Vt.y!==Tt.y||D(Vt,Tt,Dt)||D(Vt,Tt,Ut)||jt.push(Vt))}),j(jt)}(X,tt,pt,Et).forEach(function(bt){if(it.indexOf(bt)===-1){z.indexOf(bt)===-1&&z.push(bt);var Tt=k[tt.id]+v(tt,bt);H[bt.id]&&Tt>=H[bt.id]||(P[bt.id]=tt.id,H[bt.id]=Tt,k[bt.id]=H[bt.id]+m(bt,vt,ut,q,st))}})};z.length;){var F=g();if(S(F)==="object")return F.value}return[ut,vt]},Z=function(X,ut){var vt=[],pt=X[0];return vt.push("M"+pt.x+" "+pt.y),X.forEach(function(Et,q){var st=X[q+1],it=X[q+2];if(st&&it)if(function(k,d,g){return!(k.x===d.x&&d.x===g.x||k.y===d.y&&d.y===g.y)}(Et,st,it)){var z=function(k,d,g,F){var V=v(k,d),tt=v(g,d);return V<F&&(F=V),tt<F&&(F=tt),[{x:d.x-F/V*(d.x-k.x),y:d.y-F/V*(d.y-k.y)},{x:d.x-F/tt*(d.x-g.x),y:d.y-F/tt*(d.y-g.y)}]}(Et,st,it,ut),P=z[0],H=z[1];vt.push("L"+P.x+" "+P.y),vt.push("Q"+st.x+" "+st.y+" "+H.x+" "+H.y),vt.push("L"+H.x+" "+H.y)}else vt.push("L"+st.x+" "+st.y);else st&&vt.push("L"+st.x+" "+st.y)}),vt.join("")},et=function(X,ut,vt,pt,Et){var q,st;if(vt&&vt.getType()?vt.getType()==="combo"?((q=vt.getKeyShape().getCanvasBBox()||l(X)).centerX=(q.minX+q.maxX)/2,q.centerY=(q.minY+q.maxY)/2):q=vt.getBBox():q=l(X),pt&&pt.getType()?pt.getType()==="combo"?((st=pt.getKeyShape().getCanvasBBox()||l(ut)).centerX=(st.minX+st.maxX)/2,st.centerY=(st.minY+st.maxY)/2):st=pt&&pt.getBBox():st=l(ut),A(q,st))return y(n(X,ut));var it=s(q,Et),z=s(st,Et);if(A(it,z))return y(n(X,ut));var P=h(it,X,ut),H=h(z,ut,X),k=function(ot){ot===void 0&&(ot=[]);var at=[],At=[];ot.forEach(function(Dt){at.push(Dt.x),At.push(Dt.y)});var yt=Math.min.apply(Math,at),gt=Math.max.apply(Math,at),bt=Math.min.apply(Math,At),Tt=Math.max.apply(Math,At);return{centerX:(yt+gt)/2,centerY:(bt+Tt)/2,maxX:gt,maxY:Tt,minX:yt,minY:bt,height:Tt-bt,width:gt-yt}}([P,H]),d=M(it,k),g=M(z,k),F=[];F=(F=F.concat(O(d))).concat(O(g));var V={x:(X.x+ut.x)/2,y:(X.y+ut.y)/2};[k,d,g].forEach(function(ot){F=F.concat(function(at,At){return function(yt,gt){return gt<yt.minX||gt>yt.maxX?[]:[{x:gt,y:yt.minY},{x:gt,y:yt.maxY}]}(at,At.x).concat(function(yt,gt){return gt<yt.minY||gt>yt.maxY?[]:[{x:yt.minX,y:gt},{x:yt.maxX,y:gt}]}(at,At.y))}(ot,V).filter(function(at){return T(at,it)&&T(at,z)}))}),[{x:P.x,y:H.y},{x:H.x,y:P.y}].forEach(function(ot){T(ot,it)&&T(ot,z)&&F.push(ot)}),F.unshift(P),F.push(H),F=j(F);var tt=Y(F,P,H,q,st,X,ut);return tt.unshift(X),tt.push(ut),y(tt)};function dt(Ot){return(dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X})(Ot)}var ht={offset:20,maxAllowedDirectionChange:90,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:function(X,ut){return Math.abs(X.x-ut.x)+Math.abs(X.y-ut.y)},fallbackRoute:function(X,ut,vt,pt,Et){return y(et(X,ut,vt,pt,Et.offset))}},St=function(X,ut){var vt=Math.floor(Math.abs(X/ut));return vt<0?0:(X<0?-1:1)*vt},wt=function(X,ut){var vt=ut.x-X.x,pt=ut.y-X.y;return vt||pt?(360+180*Math.atan2(pt,vt)/Math.PI)%360:0},xt=function(X,ut){var vt=Math.abs(X-ut);return vt>180?360-vt:vt},ft=function(X,ut,vt){for(var pt=1/0,Et=0,q=ut.length;Et<q;Et++){var st=vt(X,ut[Et]);st<pt&&(pt=st)}return pt},Bt=function(X,ut,vt,pt,Et){var q=[];if(!vt)return q;var st=Et.directions,it=Et.offset,z=vt.getBBox(),P=ut.x>z.minX&&ut.x<z.maxX&&ut.y>z.minY&&ut.y<z.maxY,H=s(z,it);for(var k in H)H[k]=St(H[k],Et.gridSize);if(P)for(var d=0,g=st;d<g.length;d++){var F=g[d],V=[[{x:H.minX,y:H.minY},{x:H.maxX,y:H.minY}],[{x:H.minX,y:H.minY},{x:H.minX,y:H.maxY}],[{x:H.maxX,y:H.minY},{x:H.maxX,y:H.maxY}],[{x:H.minX,y:H.maxY},{x:H.maxX,y:H.maxY}]];for(k=0;k<4;k++){var tt,ot=V[k];(tt=p.n.getLineIntersect(X,{x:X.x+F.stepX*H.width,y:X.y+F.stepY*H.height},ot[0],ot[1]))&&!D(X,tt,z)&&(tt.id=tt.x+"|||"+tt.y,q.push(tt))}}else(tt=h(H,X,pt)).id=tt.x+"|||"+tt.y,q.push(tt);return q},Rt=function(X,ut,vt,pt,Et){var q=Object(b.e)(ht,Et);q.obstacles=q.obstacles||[];var st=function(bt,Tt,Dt){var Ut={};return bt.forEach(function(jt){if(jt)for(var Vt=s(jt.getBBox(),Dt),Ht=St(Vt.minX,Tt);Ht<=St(Vt.maxX,Tt);Ht+=1)for(var re=St(Vt.minY,Tt);re<=St(Vt.maxY,Tt);re+=1)Ut[Ht+"|||"+re]=!0}),Ut}(q.obstacles.concat([vt,pt]),q.gridSize,q.offset),it={x:St(X.x,q.gridSize),y:St(X.y,q.gridSize)},z={x:St(ut.x,q.gridSize),y:St(ut.y,q.gridSize)};X.id=it.x+"|||"+it.y,ut.id=z.x+"|||"+z.y;var P=Bt(it,X,vt,z,q),H=Bt(z,ut,pt,it,q);P.forEach(function(bt){delete st[bt.id]}),H.forEach(function(bt){delete st[bt.id]});for(var k={},d={},g={},F={},V={},tt=0;tt<P.length;tt++){var ot=P[tt];k[ot.id]=ot,F[ot.id]=0,V[ot.id]=ft(ot,H,q.distFunc)}for(var at=function(Tt,Dt){var Ut,jt=wt(Tt,Dt);if(g[Tt.id]){var Vt=wt({x:parseFloat(g[Tt.id].split("|||")[0]),y:parseFloat(g[Tt.id].split("|||")[1])},Tt);Ut=xt(Vt,jt)}else{var Ht=wt(it,Tt);Ut=xt(Ht,jt)}return Ut},At=q.maximumLoops,yt=function(){var Tt,Dt=1/0;for(var Ut in k)V[Ut]<=Dt&&(Dt=V[Ut],Tt=k[Ut]);if(!Tt)return"break";if(H.findIndex(function(we){return we.x===Tt.x&&we.y===Tt.y})>-1)return{value:function(we){var Re=[ut],He={x:parseFloat(we.split("|||")[0]),y:parseFloat(we.split("|||")[1]),id:we};for(at(He,z)&&Re.unshift({x:He.x===z.x?ut.x:He.x*q.gridSize,y:He.y===z.y?ut.y:He.y*q.gridSize});g[we]&&g[we]!==we;){var pn={x:parseFloat(we.split("|||")[0]),y:parseFloat(we.split("|||")[1]),id:we},fn=g[we],Rn={x:parseFloat(fn.split("|||")[0]),y:parseFloat(fn.split("|||")[1]),id:fn};at(Rn,pn)&&Re.unshift({x:Rn.x===pn.x?Re[0].x:Rn.x*q.gridSize,y:Rn.y===pn.y?Re[0].y:Rn.y*q.gridSize}),we=fn}var Cn=parseFloat(we.split("|||")[0]),kn=parseFloat(we.split("|||")[1]);return Re[0].x=Cn===it.x?X.x:Re[0].x,Re[0].y=kn===it.y?X.y:Re[0].y,Re.unshift(X),Re}(Tt.id)};delete k[Tt.id],d[Tt.id]=!0;for(var jt=0;jt<q.directions.length;jt++){var Vt=q.directions[jt],Ht={x:Tt.x+Vt.stepX,y:Tt.y+Vt.stepY,id:Tt.x+Vt.stepX+"|||"+(Tt.y+Vt.stepY)};if(!d[Ht.id]){var re=at(Tt,Ht);if(!(re>q.maxAllowedDirectionChange||st[Ht.id])){k[Ht.id]||(k[Ht.id]=Ht);var pe=q.distFunc(Tt,Ht)+(isNaN(q.penalties[re])?q.gridSize:q.penalties[re]),ye=F[Tt.id]+pe;F[Ht.id]&&ye>=F[Ht.id]||(g[Ht.id]=Tt.id,F[Ht.id]=ye,V[Ht.id]=ye+ft(Ht,H,q.distFunc))}}}At-=1};Object.keys(k).length>0&&At>0;){var gt=yt();if(dt(gt)==="object")return gt.value;if(gt==="break")break}return q.fallbackRoute(X,ut,vt,pt,q)};Object(p.q)("polyline",{options:{color:p.e.defaultEdge.color,size:p.e.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:p.e.defaultEdge.style.stroke,lineAppendWidth:p.e.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:p.e.edgeLabel.style.fill,fontSize:p.e.edgeLabel.style.fontSize}},routeCfg:{obstacles:[],maxAllowedDirectionChange:90,maximumLoops:500,gridSize:10},stateStyles:Object(r.a)({},p.e.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(X,ut){var vt=this.getShapeStyle(X);return vt.radius===0&&delete vt.radius,ut.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:vt})},getShapeStyle:function(X){var ut=this.options.style,vt={stroke:X.color},pt=Object(b.A)({},ut,vt,X.style);X=this.getPathPoints(X),this.radius=pt.radius,this.offset=pt.offset;var Et=X.startPoint,q=X.endPoint,st=this.getControlPoints(X),it=[Et];st&&(it=it.concat(st)),it.push(q);var z=X.sourceNode,P=X.targetNode,H=pt.radius,k=this.options.routeCfg;k||(k={}),k.offset=pt.offset;var d=this.getPath(it,z,P,H,k);return(Object(b.m)(d)&&d.length<=1||Object(b.x)(d)&&d.indexOf("L")===-1)&&(d="M0 0, L0 0"),(isNaN(Et.x)||isNaN(Et.y)||isNaN(q.x)||isNaN(q.y))&&(d="M0 0, L0 0"),Object(b.A)({},p.e.defaultEdge.style,pt,{lineWidth:X.size,path:d})},updateShapeStyle:function(X,ut){var vt=ut.getContainer(),pt={stroke:X.color},Et=vt.find(function(at){return at.get("className")==="edge-shape"})||ut.getKeyShape(),q=X.size,st=(X=this.getPathPoints(X)).startPoint,it=X.endPoint,z=this.getControlPoints(X),P=[st];z&&(P=P.concat(z)),P.push(it);var H=Et.attr(),k=Object(b.A)({},pt,H,X.style),d=X.sourceNode,g=X.targetNode,F=k.radius,V=this.options.routeCfg;V||(V={}),V.offset=k.offset;var tt=this.getPath(P,d,g,F,V);(Object(b.m)(tt)&&tt.length<=1||Object(b.x)(tt)&&tt.indexOf("L")===-1)&&(tt="M0 0, L0 0"),(isNaN(st.x)||isNaN(st.y)||isNaN(it.x)||isNaN(it.y))&&(tt="M0 0, L0 0"),H.endArrow&&k.endArrow===!1&&(X.style.endArrow={path:""}),H.startArrow&&k.startArrow===!1&&(X.style.startArrow={path:""});var ot=Object(b.A)(pt,Et.attr(),{lineWidth:q,path:tt},X.style);Et&&Et.attr(ot)},getPath:function(X,ut,vt,pt,Et){var q;if(!Et.offset||X.length>2){if(pt)return Z(X,pt);var st=[];return Object(b.f)(X,function(it,z){z===0?st.push(["M",it.x,it.y]):st.push(["L",it.x,it.y])}),st}return pt?(q=Rt(X[0],X[X.length-1],ut,vt,Et),Z(q,pt)):(q=Rt(X[0],X[X.length-1],ut,vt,Et),p.n.pointsToPolygon(q))}},"single-edge")}]).default})},Sq3C:function(Fn,Gt,_){var rt=_("sKgW"),a=_("zoYe"),E=_("wy8a"),e=_("quyA"),r=_("Z1HP"),p=_("Em2t"),b=Math.ceil;function S(l,A){A=A===void 0?" ":a(A);var j=A.length;if(j<2)return j?rt(A,l):A;var y=rt(A,b(l/r(A)));return e(A)?E(p(y),0,l).join(""):y.slice(0,l)}Fn.exports=S},Sxd8:function(Fn,Gt,_){var rt=_("ZCgT");function a(E){var e=rt(E),r=e%1;return e===e?r?e-r:e:0}Fn.exports=a},TEat:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return y});var rt=_("mrSG"),a=_("zJSt"),E=_("YuPD"),e=_("w02o"),r=_("tKoa");function p(n,s,h){var M=h.map(function(v){return v[s]}).filter(function(v){return v!==void 0}),O=M.length>0?Math.max.apply(Math,M):0,T=Math.abs(n)%360;return T?O*360/T:O}function b(n){var s=n.chart,h=n.options,M=h.data,O=h.barStyle,T=h.color,v=h.tooltip,m=h.colorField,C=h.type,D=h.xField,Y=h.yField;s.data(M);var Z=Object(E.b)({},n,{options:{tooltip:v,seriesField:m,interval:{style:O,color:T,shape:C==="line"?"line":"intervel"},minColumnWidth:h.minBarWidth,maxColumnWidth:h.maxBarWidth,columnBackground:h.barBackground}});return Object(r.c)(Z),C==="line"&&Object(r.e)({chart:s,options:{xField:D,yField:Y,seriesField:m,point:{shape:"circle",color:T}}}),n}function S(n){var s,h=n.options,M=h.yField,O=h.data,T=h.maxAngle;return Object(E.e)(Object(e.f)((s={},s[M]={min:0,max:p(T,M,O)},s)))(n)}function l(n){var s=n.chart,h=n.options,M=h.radius,O=h.innerRadius,T=h.startAngle,v=h.endAngle;return s.coordinate({type:"polar",cfg:{radius:M,innerRadius:O,startAngle:T,endAngle:v}}).transpose(),n}function A(n){var s=n.chart,h=n.options,M=h.xField,O=h.xAxis;return s.axis(M,O),n}function j(n){return Object(E.e)(b,S,A,l,e.c,e.a,e.j,e.k,e.d,Object(e.b)())(n)}var y=function(n){Object(rt.b)(s,n);function s(){var h=n!==null&&n.apply(this,arguments)||this;return h.type="radial-bar",h}return s.prototype.changeData=function(h){this.updateOption({data:h}),S({chart:this.chart,options:this.options}),this.chart.changeData(h)},s.prototype.getDefaultOptions=function(){return Object(E.b)({},n.prototype.getDefaultOptions.call(this),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240})},s.prototype.getSchemaAdaptor=function(){return j},s}(a.a)},U8jP:function(Fn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"version",function(){return b});var rt=_("R5nb");_.d(Gt,"Shape",function(){return rt});var a=_("aFU3");for(var E in a)["default","Canvas","Group","Shape","getArcParams","version"].indexOf(E)<0&&function(S){_.d(Gt,S,function(){return a[S]})}(E);var e=_("sYIZ");_.d(Gt,"Canvas",function(){return e.a});var r=_("wq2r");_.d(Gt,"Group",function(){return r.a});var p=_("nCnq");_.d(Gt,"getArcParams",function(){return p.a});var b="0.5.6"},Uo7R:function(Fn,Gt,_){"use strict";var rt=_("mrSG"),a=_("zJSt"),E=_("w02o"),e=_("YuPD"),r=_("tKoa"),p=_("iTfj"),b={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(xt){return xt.id},source:function(xt){return xt.source},target:function(xt){return xt.target},sourceWeight:function(xt){return xt.value||1},targetWeight:function(xt){return xt.value||1},sortBy:null};function S(wt,xt,ft){Object(p.forIn)(wt,function(Bt,Rt){Bt.inEdges=xt.filter(function(Ot){return""+ft.target(Ot)==""+Rt}),Bt.outEdges=xt.filter(function(Ot){return""+ft.source(Ot)==""+Rt}),Bt.edges=Bt.outEdges.concat(Bt.inEdges),Bt.frequency=Bt.edges.length,Bt.value=0,Bt.inEdges.forEach(function(Ot){Bt.value+=ft.targetWeight(Ot)}),Bt.outEdges.forEach(function(Ot){Bt.value+=ft.sourceWeight(Ot)})})}function l(wt,xt){var ft={weight:function(Ot,X){return X.value-Ot.value},frequency:function(Ot,X){return X.frequency-Ot.frequency},id:function(Ot,X){return(""+xt.id(Ot)).localeCompare(""+xt.id(X))}},Bt=ft[xt.sortBy];!Bt&&Object(p.isFunction)(xt.sortBy)&&(Bt=xt.sortBy),Bt&&wt.sort(Bt)}function A(wt,xt){var ft=wt.length;if(!ft)throw new TypeError("Invalid nodes: it's empty!");if(xt.weight){var Bt=xt.nodePaddingRatio;if(Bt<0||Bt>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var Rt=Bt/(2*ft),Ot=xt.nodeWidthRatio;if(Ot<=0||Ot>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var X=0;wt.forEach(function(vt){X+=vt.value}),wt.forEach(function(vt){vt.weight=vt.value/X,vt.width=vt.weight*(1-Bt),vt.height=Ot}),wt.forEach(function(vt,pt){for(var Et=0,q=pt-1;q>=0;q--)Et+=wt[q].width+2*Rt;var st=vt.minX=Rt+Et,it=vt.maxX=vt.minX+vt.width,z=vt.minY=xt.y-Ot/2,P=vt.maxY=z+Ot;vt.x=[st,it,it,st],vt.y=[z,z,P,P]})}else{var ut=1/ft;wt.forEach(function(vt,pt){vt.x=(pt+.5)*ut,vt.y=xt.y})}return wt}function j(wt,xt,ft){if(ft.weight){var Bt={};Object(p.forIn)(wt,function(Rt,Ot){Bt[Ot]=Rt.value}),xt.forEach(function(Rt){var Ot=ft.source(Rt),X=ft.target(Rt),ut=wt[Ot],vt=wt[X];if(ut&&vt){var pt=Bt[Ot],Et=ft.sourceWeight(Rt),q=ut.minX+(ut.value-pt)/ut.value*ut.width,st=q+Et/ut.value*ut.width;Bt[Ot]-=Et;var it=Bt[X],z=ft.targetWeight(Rt),P=vt.minX+(vt.value-it)/vt.value*vt.width,H=P+z/vt.value*vt.width;Bt[X]-=z;var k=ft.y;Rt.x=[q,st,P,H],Rt.y=[k,k,k,k],Rt.source=ut,Rt.target=vt}})}else xt.forEach(function(Rt){var Ot=wt[ft.source(Rt)],X=wt[ft.target(Rt)];Ot&&X&&(Rt.x=[Ot.x,X.x],Rt.y=[Ot.y,X.y],Rt.source=Ot,Rt.target=X)});return xt}function y(wt){return Object(p.assign)({},b,wt)}function n(wt,xt){var ft=y(wt),Bt={},Rt=xt.nodes,Ot=xt.links;Rt.forEach(function(vt){var pt=ft.id(vt);Bt[pt]=vt}),S(Bt,Ot,ft),l(Rt,ft);var X=A(Rt,ft),ut=j(Bt,Ot,ft);return{nodes:X,links:ut}}var s=_("DyAw"),h="x",M="y",O="name",T="source";function v(wt){var xt=wt.options,ft=xt.data,Bt=xt.sourceField,Rt=xt.targetField,Ot=xt.weightField,X=xt.nodePaddingRatio,ut=xt.nodeWidthRatio,vt=Object(s.b)(ft,Bt,Rt,Ot),pt=n({weight:!0,nodePaddingRatio:X,nodeWidthRatio:ut},vt),Et=pt.nodes,q=pt.links,st=Et.map(function(z){return{id:z.id,x:z.x,y:z.y,name:z.name}}),it=q.map(function(z){return{source:z.source.name,target:z.target.name,x:z.x,y:z.y,value:z.value}});return Object(rt.a)(Object(rt.a)({},wt),{ext:Object(rt.a)(Object(rt.a)({},wt.ext),{chordData:{nodesData:st,edgesData:it}})})}function m(wt){var xt,ft=wt.chart;return ft.scale((xt={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}},xt[O]={sync:"color"},xt[T]={sync:"color"},xt)),wt}function C(wt){var xt=wt.chart;return xt.axis(!1),wt}function D(wt){var xt=wt.chart;return xt.legend(!1),wt}function Y(wt){var xt=wt.chart;return xt.tooltip({showTitle:!1,showMarkers:!1}),wt}function Z(wt){var xt=wt.chart;return xt.coordinate("polar").reflect("y"),wt}function et(wt){var xt=wt.chart,ft=wt.options,Bt=wt.ext.chordData.nodesData,Rt=ft.nodeStyle,Ot=ft.label,X=xt.createView();return X.data(Bt),Object(r.f)({chart:X,options:{xField:h,yField:M,seriesField:O,polygon:{style:Rt},label:Ot,tooltip:!1}}),wt}function dt(wt){var xt=wt.chart,ft=wt.options,Bt=wt.ext.chordData.edgesData,Rt=ft.edgeStyle,Ot=ft.tooltip,X=xt.createView();X.data(Bt);var ut={xField:h,yField:M,seriesField:T,edge:{style:Rt,shape:"arc"},tooltip:Ot};return Object(r.b)({chart:X,options:ut}),wt}function ht(wt){return Object(e.e)(v,Z,m,C,D,Y,dt,et,E.c,E.a,E.j)(wt)}var St=function(wt){Object(rt.b)(xt,wt);function xt(){var ft=wt!==null&&wt.apply(this,arguments)||this;return ft.type="chord",ft}return xt.prototype.getDefaultOptions=function(){return{nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(Bt,Rt){var Ot=(Bt[0]+Bt[1])/2,X=Ot>.5?-4:4;return{labelEmit:!0,style:{fill:"#8c8c8c"},offsetX:X,content:Rt}}},tooltip:{fields:["source","target","value"],formatter:function(Bt){var Rt=Bt.source,Ot=Bt.target,X=Bt.value;return{name:Rt+" -> "+Ot,value:X}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05}},xt.prototype.getSchemaAdaptor=function(){return ht},xt}(a.a)},WOQw:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return p});var rt=_("mrSG"),a=_("iTfj"),E=_("YuPD");function e(b,S){var l=b.xField,A=b.yField,j=b.colorField,y=b.shapeField,n=b.sizeField,s=b.styleField,h=b.rawFields,M=h===void 0?[]:h,O=[];if(S==="color")O=Object(rt.d)([j||l],M);else if(S==="shape")O=Object(rt.d)([y||l],M);else if(S==="size")O=Object(rt.d)([n||l],M);else{O=Object(rt.d)([l,A,j,y,n,s],M);var T=["x","y","color","shape","size","style"].indexOf(S),v=O[T];O.splice(T,1),O.unshift(v)}return Object(a.uniq)(O.filter(function(m){return!!m}))}function r(b,S){if(!!S)return function(){for(var l=[],A=0;A<arguments.length;A++)l[A]=arguments[A];var j={};return b.forEach(function(y,n){j[y]=l[n]}),delete j.undefined,S(j)}}function p(b){var S=b.chart,l=b.options,A=l.type,j=l.args,y=l.mapping,n=l.xField,s=l.yField,h=l.colorField,M=l.shapeField,O=l.sizeField,T=l.tooltipFields,v=l.label,m=l.state;if(!y)return b;var C=y.color,D=y.shape,Y=y.size,Z=y.style,et=y.tooltip,dt=S[A](j).position(n+"*"+s);if(Object(a.isString)(C))h?dt.color(h,C):dt.color(C);else if(Object(a.isFunction)(C)){var ht=e(l,"color");dt.color(ht.join("*"),r(ht,C))}else h&&dt.color(h,C);if(Object(a.isString)(D))M?dt.shape(M,[D]):dt.shape(D);else if(Object(a.isFunction)(D)){var ht=e(l,"shape");dt.shape(ht.join("*"),r(ht,D))}else M&&dt.shape(M,D);if(Object(a.isNumber)(Y))O?dt.size(O,Y):dt.size(Y);else if(Object(a.isFunction)(Y)){var ht=e(l,"size");dt.size(ht.join("*"),r(ht,Y))}else O&&dt.size(O,Y);if(Object(a.isFunction)(Z)){var ht=e(l,"style");dt.style(ht.join("*"),r(ht,Z))}else Object(a.isObject)(Z)&&dt.style(Z);if(T===!1?dt.tooltip(!1):Object(a.isEmpty)(T)||dt.tooltip(T.join("*"),r(T,et)),v===!1)dt.label(!1);else if(v){var St=v.callback,wt=v.fields,xt=Object(rt.c)(v,["callback","fields"]);dt.label({fields:wt||[s],callback:St,cfg:Object(E.o)(xt)})}return m&&dt.state(m),[n,s].filter(function(ft){return ft!==h}).forEach(function(ft){S.legend(ft,!1)}),Object(rt.a)(Object(rt.a)({},b),{ext:{geometry:dt}})}},WbAE:function(Fn,Gt){},XiRp:function(Fn,Gt){},XloR:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return S});var rt=_("mrSG"),a=_("zJSt"),E=_("YuPD"),e=_("hJqF"),r=_("Ihc8"),p=_("iTfj"),b=function(l){Object(rt.b)(A,l);function A(){return l!==null&&l.apply(this,arguments)||this}return A.prototype.active=function(){var j=this.getView(),y=this.context.event;if(y.data){var n=y.data.items,s=j.geometries.filter(function(h){return h.type==="point"});Object(p.each)(s,function(h){Object(p.each)(h.elements,function(M){var O=Object(p.findIndex)(n,function(T){return T.data===M.data})!==-1;M.setState("active",O)})})}},A.prototype.getView=function(){return this.context.view},A}(r.InteractionAction);Object(r.registerAction)("marker-active",b),Object(r.registerInteraction)("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}]});var S=function(l){Object(rt.b)(A,l);function A(){var j=l!==null&&l.apply(this,arguments)||this;return j.type="line",j}return A.prototype.changeData=function(j){this.updateOption({data:j}),this.chart.changeData(j)},A.prototype.getDefaultOptions=function(){return Object(E.b)({},l.prototype.getDefaultOptions.call(this),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left"},isStack:!1})},A.prototype.getSchemaAdaptor=function(){return e.a},A}(a.a)},XpFM:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return v});var rt=_("mrSG"),a=_("zJSt"),E=_("iTfj"),e=_("w02o"),r=_("n/J0"),p=_("YuPD"),b=_("5kt6");function S(m){return m.map(function(C,D){var Y;return Y={},Y[b.f]=C-(m[D-1]||0),Y[b.e]=""+D,Y}).filter(function(C){return!!C[b.f]})}function l(m){var C;return[(C={},C[b.d]=Object(E.clamp)(m,0,1),C)]}function A(m,C){var D=Object(E.get)(C,["ticks"],[]),Y=Object(E.size)(D)?D:[0,Object(E.clamp)(m,0,1),1];return S(Y)}function j(m){var C=m.chart,D=m.options,Y=D.percent,Z=D.range,et=D.radius,dt=D.innerRadius,ht=D.startAngle,St=D.endAngle,wt=D.axis,xt=D.indicator,ft=Z.color;if(xt){var Bt=l(Y),Rt=C.createView({id:b.b});Rt.data(Bt),Rt.point().position(b.d+"*1").shape("gauge-indicator").customInfo({defaultColor:C.getTheme().defaultColor,indicator:xt}),Rt.coordinate("polar",{startAngle:ht,endAngle:St,radius:dt*et}),Rt.axis(b.d,wt),Rt.scale(b.d,Object(p.k)(wt,r.a))}var Ot=A(Y,D.range),X=C.createView({id:b.g});X.data(Ot);var ut=Object(E.isString)(ft)?[ft,b.a]:ft;return X.interval().position("1*"+b.f).color(b.e,ut).adjust("stack"),X.coordinate("polar",{innerRadius:dt,radius:et,startAngle:ht,endAngle:St}).transpose(),m}function y(m){var C,D=m.chart,Y=m.options,Z=Y.type,et=Y.meter;if(Z==="meter"){var dt=Y.innerRadius,ht=Y.radius,St=Y.startAngle,wt=Y.endAngle,xt=D.getTheme().background,ft=xt;(!ft||ft==="transparent")&&(ft="#fff");var Bt=D.createView({id:b.c});Bt.data([(C={},C[b.e]="1",C[b.f]=1,C)]),Bt.interval().position("1*"+b.f).color(ft).adjust("stack").shape("meter-gauge").customInfo(et||{}),Bt.coordinate("polar",{innerRadius:dt,radius:ht,startAngle:St,endAngle:wt}).transpose()}return m}function n(m){var C;return Object(p.e)(Object(e.f)((C={range:{min:0,max:1,maxLimit:1,minLimit:0}},C[b.d]={},C)))(m)}function s(m,C){var D=m.chart,Y=m.options,Z=Y.statistic,et=Y.percent;if(D.getController("annotation").clear(!0),Z){var dt=Z.content,ht=void 0;dt&&(ht=Object(p.b)({},{formatter:function(wt){var xt=wt.percent;return(xt*100).toFixed(2)+"%"},style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},dt)),Object(p.l)(D,{statistic:Object(rt.a)(Object(rt.a)({},Z),{content:ht})},{percent:et})}return C&&D.render(!0),m}function h(m){var C=m.chart;return C.legend(!1),C.tooltip(!1),m}function M(m){return Object(p.e)(e.a,j,n,s,e.c,e.j,y,h)(m)}var O=_("Ihc8");Object(O.registerShape)("point","gauge-indicator",{draw:function(C,D){var Y=C.customInfo,Z=Y.indicator,et=Y.defaultColor,dt=Z,ht=dt.pointer,St=dt.pin,wt=D.addGroup(),xt=this.parsePoint({x:0,y:0});return ht&&wt.addShape("line",{name:"pointer",attrs:Object(rt.a)({x1:xt.x,y1:xt.y,x2:C.x,y2:C.y,stroke:et},ht.style)}),St&&wt.addShape("circle",{name:"pin",attrs:Object(rt.a)({x:xt.x,y:xt.y,stroke:et},St.style)}),wt}});var T=_("CBiR");Object(O.registerShape)("interval","meter-gauge",{draw:function(C,D){var Y=C.customInfo,Z=Y.steps,et=Z===void 0?50:Z,dt=Y.stepRatio,ht=dt===void 0?.5:dt,St=this.coordinate.endAngle-this.coordinate.startAngle,wt=St/et,xt=0;ht>0&&ht<=1&&(wt=St/((1-ht)/ht*(et-1)+et),xt=wt*(1-ht)/ht);var ft=D.addGroup();if(xt>0)for(var Bt=this.coordinate.getCenter(),Rt=this.coordinate.getRadius(),Ot=O.Util.getAngle(C,this.coordinate),X=Ot.startAngle,ut=Ot.endAngle,vt=X,pt=0;vt<ut&&pt<2*et-1;pt++){var Et=pt%2;if(Et){var q=Object(T.getSectorPath)(Bt.x,Bt.y,Rt,vt,Math.min(vt+xt,ut),Rt*this.coordinate.innerRadius);ft.addShape("path",{name:"meter-gauge-mask",attrs:{path:q,fill:C.color,stroke:C.color,lineWidth:.5},capture:!1})}vt+=Et?xt:wt}return ft}});var v=function(m){Object(rt.b)(C,m);function C(){var D=m!==null&&m.apply(this,arguments)||this;return D.type="gauge",D}return C.prototype.getDefaultOptions=function(){var D;return{percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(D={},D[b.f]={sync:"v"},D[b.d]={sync:"v",tickCount:5,tickInterval:.2},D),animation:!1}},C.prototype.changeData=function(D){this.updateOption({percent:D});var Y=this.chart.views.find(function(et){return et.id===b.b});Y&&Y.data(l(D));var Z=this.chart.views.find(function(et){return et.id===b.g});Z&&Z.data(A(D,this.options.range)),s({chart:this.chart,options:this.options},!0)},C.prototype.getSchemaAdaptor=function(){return M},C}(a.a)},"Y+LX":function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return b});var rt=_("mrSG"),a=_("zJSt"),E=_("YuPD"),e=_("sqD9"),r=_("DMQx");function p(S){var l=S.chart,A=S.options,j=A.xField,y=A.yField,n=A.xAxis,s=A.yAxis,h=A.barStyle,M=A.barWidthRatio,O=A.label,T=A.data,v=A.seriesField,m=A.isStack,C=A.minBarWidth,D=A.maxBarWidth;O&&!O.position&&(O.position="left",O.layout||(O.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]));var Y=A.legend;v?Y!==!1&&(Y=Object(rt.a)({position:m?"top-left":"right-top",reversed:!m},Y||{})):Y=!1,S.options.legend=Y;var Z=A.tooltip;return v&&Z!==!1&&(Z=Object(rt.a)({reversed:!m},Z||{})),S.options.tooltip=Z,l.coordinate().transpose(),Object(r.a)({chart:l,options:Object(rt.a)(Object(rt.a)({},A),{label:O,xField:y,yField:j,xAxis:s,yAxis:n,columnStyle:h,columnWidthRatio:M,minColumnWidth:C,maxColumnWidth:D,columnBackground:A.barBackground,data:T&&T.slice().reverse()})},!0)}var b=function(S){Object(rt.b)(l,S);function l(){var A=S!==null&&S.apply(this,arguments)||this;return A.type="bar",A}return l.prototype.changeData=function(A){this.updateOption({data:A});var j=this.options,y=j.xField,n=j.yField,s=j.isPercent;this.chart.changeData(Object(e.a)(A,y,n,y,s))},l.prototype.getDefaultOptions=function(){return Object(E.b)({},S.prototype.getDefaultOptions.call(this),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]})},l.prototype.getSchemaAdaptor=function(){return p},l}(a.a)},YP77:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return y});var rt=_("mrSG"),a=_("zJSt"),E=_("B3DA"),e=_("iTfj"),r=_("YuPD"),p=_("w02o"),b=_("u9/z"),S=_("5kt6");function l(n){var s=n.chart,h=n.options,M=h.innerRadius,O=h.radius;return s.coordinate("theta",{innerRadius:M,radius:O}),n}function A(n,s){var h=n.chart,M=n.options,O=M.innerRadius,T=M.statistic,v=M.percent,m=M.meta;if(h.getController("annotation").clear(!0),O&&T){var C=T.content;C&&!C.formatter&&(C.formatter=function(D){var Y=D.percent,Z=Object(e.get)(m,[S.d,"formatter"]);return Z?Z(Y):Y}),Object(r.m)(h,{statistic:Object(rt.a)(Object(rt.a)({},T),{content:C}),plotType:"ring-progress"},{percent:v})}return s&&h.render(!0),n}function j(n){return Object(r.e)(b.b,Object(p.f)({}),l,A,p.a,p.j,Object(p.b)())(n)}var y=function(n){Object(rt.b)(s,n);function s(){var h=n!==null&&n.apply(this,arguments)||this;return h.type="ring-process",h}return s.prototype.getDefaultOptions=function(){return{percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"},formatter:function(M){var O=M.percent;return(O*100).toFixed(2)+"%"}}},animation:!0}},s.prototype.changeData=function(h){this.updateOption({percent:h}),this.chart.data(Object(E.a)(h)),A({chart:this.chart,options:this.options},!0)},s.prototype.getSchemaAdaptor=function(){return j},s}(a.a)},YuPD:function(Fn,Gt,_){"use strict";_.d(Gt,"e",function(){return rt}),_.d(Gt,"k",function(){return a}),_.d(Gt,"n",function(){return e}),_.d(Gt,"j",function(){return A}),_.d(Gt,"a",function(){return p}),_.d(Gt,"g",function(){return j}),_.d(Gt,"c",function(){return y}),_.d(Gt,"f",function(){return n}),_.d(Gt,"d",function(){return s.a}),_.d(Gt,"o",function(){return h}),_.d(Gt,"h",function(){return m}),_.d(Gt,"b",function(){return St}),_.d(Gt,"i",function(){return wt}),_.d(Gt,"m",function(){return xt.c}),_.d(Gt,"l",function(){return xt.b});function rt(){for(var Ot=[],X=0;X<arguments.length;X++)Ot[X]=arguments[X];return function(ut){return Ot.reduce(function(vt,pt){return pt(vt)},ut)}}function a(Ot,X){var ut={};return Ot!==null&&typeof Ot=="object"&&X.forEach(function(vt){var pt=Ot[vt];pt!==void 0&&(ut[vt]=pt)}),ut}var E=_("iTfj");function e(Ot,X){return Object(E.reduce)(X,function(ut,vt,pt){return ut.replace(new RegExp("{\\s*"+pt+"\\s*}","g"),vt)},Ot)}var r=_("mrSG"),p;(function(Ot){Ot.ERROR="error",Ot.WARN="warn",Ot.INFO="log"})(p||(p={}));var b="AntV/G2Plot";function S(Ot){for(var X=[],ut=1;ut<arguments.length;ut++)X[ut-1]=arguments[ut];var vt=0;return b+": "+Ot.replace(/%s/g,function(){return""+X[vt++]})}function l(Ot,X){for(var ut=[],vt=2;vt<arguments.length;vt++)ut[vt-2]=arguments[vt];if(!Ot){var pt=new Error(S.apply(void 0,Object(r.d)([X],ut)));throw pt.name=b,pt}}function A(Ot,X,ut){for(var vt=[],pt=3;pt<arguments.length;pt++)vt[pt-3]=arguments[pt];X||console[Ot](S.apply(void 0,Object(r.d)([ut],vt)))}function j(Ot){if(!Ot)return{width:0,height:0};var X=getComputedStyle(Ot);return{width:(Ot.clientWidth||parseInt(X.width,10))-parseInt(X.paddingLeft,10)-parseInt(X.paddingRight,10),height:(Ot.clientHeight||parseInt(X.height,10))-parseInt(X.paddingTop,10)-parseInt(X.paddingBottom,10)}}function y(Ot,X){return Ot.geometries.find(function(ut){return ut.type===X})}function n(Ot){return Object(E.reduce)(Ot.geometries,function(X,ut){return X.concat(ut.elements)},[])}var s=_("4Olw");function h(Ot){if(!Object(E.isType)(Ot,"Object"))return Ot;var X=Object(r.a)({},Ot);return X.formatter&&!X.content&&(X.content=X.formatter),X}var M=_("6JdA");function O(Ot,X){var ut=[];if(Ot.length){ut.push(["M",Ot[0].x,Ot[0].y]);for(var vt=1,pt=Ot.length;vt<pt;vt+=1){var Et=Ot[vt];ut.push(["L",Et.x,Et.y])}X&&ut.push(["Z"])}return ut}var T=function(X,ut,vt,pt){var Et=[],q,st,it=!!pt,z,P;if(it){z=[Infinity,Infinity],P=[-Infinity,-Infinity];for(var H=0,k=X.length;H<k;H++){var d=X[H];z=M.c.min([0,0],z,d),P=M.c.max([0,0],P,d)}z=M.c.min([0,0],z,pt[0]),P=M.c.max([0,0],P,pt[1])}for(var H=0,g=X.length;H<g;H++){var d=X[H];if(vt)q=X[H?H-1:g-1],st=X[(H+1)%g];else if(H===0||H===g-1){Et.push(d);continue}else q=X[H-1],st=X[H+1];var F=[0,0];F=M.c.sub(F,st,q),F=M.c.scale(F,F,ut);var V=M.c.distance(d,q),tt=M.c.distance(d,st),ot=V+tt;ot!==0&&(V/=ot,tt/=ot);var at=M.c.scale([0,0],F,-V),At=M.c.scale([0,0],F,tt),yt=M.c.add([0,0],d,at),gt=M.c.add([0,0],d,At);it&&(yt=M.c.max([0,0],yt,z),yt=M.c.min([0,0],yt,P),gt=M.c.max([0,0],gt,z),gt=M.c.min([0,0],gt,P)),Et.push(yt),Et.push(gt)}return vt&&Et.push(Et.shift()),Et};function v(Ot,X,ut){for(var vt=!!X,pt=[],Et=0,q=Ot.length;Et<q;Et+=2)pt.push([Ot[Et],Ot[Et+1]]);for(var st=T(pt,.4,vt,ut),it=pt.length,z=[],P,H,k,Et=0;Et<it-1;Et++)P=st[Et*2],H=st[Et*2+1],k=pt[Et+1],z.push(["C",P[0],P[1],H[0],H[1],k[0],k[1]]);return vt&&(P=st[it],H=st[it+1],k=pt[0],z.push(["C",P[0],P[1],H[0],H[1],k[0],k[1]])),z}function m(Ot,X,ut){var vt=[],pt=Ot[0],Et=null;if(Ot.length<=2)return O(Ot,X);for(var q=0,st=Ot.length;q<st;q++){var it=Ot[q];(!Et||!(Et.x===it.x&&Et.y===it.y))&&(vt.push(it.x),vt.push(it.y),Et=it)}var z=ut||[[0,0],[1,1]],P=v(vt,X,z);return P.unshift(["M",pt.x,pt.y]),P}var C=5,D={}.toString,Y=function(X,ut){return D.call(X)==="[object "+ut+"]"},Z=function(X){return Y(X,"Array")},et=function(X){return typeof X=="object"&&X!==null},dt=function(X){if(!et(X)||!Y(X,"Object"))return!1;for(var ut=X;Object.getPrototypeOf(ut)!==null;)ut=Object.getPrototypeOf(ut);return Object.getPrototypeOf(X)===ut},ht=function Ot(X,ut,vt,pt){vt=vt||0,pt=pt||C;for(var Et in ut)if(Object.prototype.hasOwnProperty.call(ut,Et)){var q=ut[Et];q?dt(q)?(dt(X[Et])||(X[Et]={}),vt<pt?Ot(X[Et],q,vt+1,pt):X[Et]=ut[Et]):Z(q)?(X[Et]=[],X[Et]=X[Et].concat(q)):X[Et]=q:X[Et]=q}},St=function(X){for(var ut=[],vt=1;vt<arguments.length;vt++)ut[vt-1]=arguments[vt];for(var pt=0;pt<ut.length;pt+=1)ht(X,ut[pt]);return X};function wt(Ot){if(!Ot)return Ot;var X=Ot.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g);return X.map(function(ut){return ut.toLowerCase()}).join("-")}var xt=_("mj6g"),ft;function Bt(){return ft||(ft=document.createElement("canvas").getContext("2d")),ft}var Rt=Object(E.memoize)(function(Ot,X){X===void 0&&(X={});var ut=X.fontSize,vt=X.fontFamily,pt=vt===void 0?"sans-serif":vt,Et=X.fontWeight,q=X.fontStyle,st=X.fontVariant,it=Bt();it.font=[q,Et,st,ut+"px",pt].join(" ");var z=it.measureText(Object(E.isString)(Ot)?Ot:"");return z.width},function(Ot,X){return X===void 0&&(X={}),Object(r.d)([Ot],Object(E.values)(X)).join("")})},Z0cm:function(Fn,Gt){var _=Array.isArray;Fn.exports=_},Z1HP:function(Fn,Gt,_){var rt=_("ycre"),a=_("quyA"),E=_("q4HE");function e(r){return a(r)?E(r):rt(r)}Fn.exports=e},ZCgT:function(Fn,Gt,_){var rt=_("tLB3"),a=1/0,E=17976931348623157e292;function e(r){if(!r)return r===0?r:0;if(r=rt(r),r===a||r===-a){var p=r<0?-1:1;return p*E}return r===r?r:0}Fn.exports=e},ZxFD:function(Fn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"create",function(){return a}),_.d(Gt,"clone",function(){return E}),_.d(Gt,"fromValues",function(){return e}),_.d(Gt,"copy",function(){return r}),_.d(Gt,"set",function(){return p}),_.d(Gt,"add",function(){return b}),_.d(Gt,"subtract",function(){return S}),_.d(Gt,"multiply",function(){return l}),_.d(Gt,"divide",function(){return A}),_.d(Gt,"ceil",function(){return j}),_.d(Gt,"floor",function(){return y}),_.d(Gt,"min",function(){return n}),_.d(Gt,"max",function(){return s}),_.d(Gt,"round",function(){return h}),_.d(Gt,"scale",function(){return M}),_.d(Gt,"scaleAndAdd",function(){return O}),_.d(Gt,"distance",function(){return T}),_.d(Gt,"squaredDistance",function(){return v}),_.d(Gt,"length",function(){return m}),_.d(Gt,"squaredLength",function(){return C}),_.d(Gt,"negate",function(){return D}),_.d(Gt,"inverse",function(){return Y}),_.d(Gt,"normalize",function(){return Z}),_.d(Gt,"dot",function(){return et}),_.d(Gt,"cross",function(){return dt}),_.d(Gt,"lerp",function(){return ht}),_.d(Gt,"random",function(){return St}),_.d(Gt,"transformMat2",function(){return wt}),_.d(Gt,"transformMat2d",function(){return xt}),_.d(Gt,"transformMat3",function(){return ft}),_.d(Gt,"transformMat4",function(){return Bt}),_.d(Gt,"rotate",function(){return Rt}),_.d(Gt,"angle",function(){return Ot}),_.d(Gt,"zero",function(){return X}),_.d(Gt,"str",function(){return ut}),_.d(Gt,"exactEquals",function(){return vt}),_.d(Gt,"equals",function(){return pt}),_.d(Gt,"len",function(){return Et}),_.d(Gt,"sub",function(){return q}),_.d(Gt,"mul",function(){return st}),_.d(Gt,"div",function(){return it}),_.d(Gt,"dist",function(){return z}),_.d(Gt,"sqrDist",function(){return P}),_.d(Gt,"sqrLen",function(){return H}),_.d(Gt,"forEach",function(){return k});var rt=_("yU0y");function a(){var d=new rt.a(2);return rt.a!=Float32Array&&(d[0]=0,d[1]=0),d}function E(d){var g=new rt.a(2);return g[0]=d[0],g[1]=d[1],g}function e(d,g){var F=new rt.a(2);return F[0]=d,F[1]=g,F}function r(d,g){return d[0]=g[0],d[1]=g[1],d}function p(d,g,F){return d[0]=g,d[1]=F,d}function b(d,g,F){return d[0]=g[0]+F[0],d[1]=g[1]+F[1],d}function S(d,g,F){return d[0]=g[0]-F[0],d[1]=g[1]-F[1],d}function l(d,g,F){return d[0]=g[0]*F[0],d[1]=g[1]*F[1],d}function A(d,g,F){return d[0]=g[0]/F[0],d[1]=g[1]/F[1],d}function j(d,g){return d[0]=Math.ceil(g[0]),d[1]=Math.ceil(g[1]),d}function y(d,g){return d[0]=Math.floor(g[0]),d[1]=Math.floor(g[1]),d}function n(d,g,F){return d[0]=Math.min(g[0],F[0]),d[1]=Math.min(g[1],F[1]),d}function s(d,g,F){return d[0]=Math.max(g[0],F[0]),d[1]=Math.max(g[1],F[1]),d}function h(d,g){return d[0]=Math.round(g[0]),d[1]=Math.round(g[1]),d}function M(d,g,F){return d[0]=g[0]*F,d[1]=g[1]*F,d}function O(d,g,F,V){return d[0]=g[0]+F[0]*V,d[1]=g[1]+F[1]*V,d}function T(d,g){var F=g[0]-d[0],V=g[1]-d[1];return Math.hypot(F,V)}function v(d,g){var F=g[0]-d[0],V=g[1]-d[1];return F*F+V*V}function m(d){var g=d[0],F=d[1];return Math.hypot(g,F)}function C(d){var g=d[0],F=d[1];return g*g+F*F}function D(d,g){return d[0]=-g[0],d[1]=-g[1],d}function Y(d,g){return d[0]=1/g[0],d[1]=1/g[1],d}function Z(d,g){var F=g[0],V=g[1],tt=F*F+V*V;return tt>0&&(tt=1/Math.sqrt(tt)),d[0]=g[0]*tt,d[1]=g[1]*tt,d}function et(d,g){return d[0]*g[0]+d[1]*g[1]}function dt(d,g,F){var V=g[0]*F[1]-g[1]*F[0];return d[0]=d[1]=0,d[2]=V,d}function ht(d,g,F,V){var tt=g[0],ot=g[1];return d[0]=tt+V*(F[0]-tt),d[1]=ot+V*(F[1]-ot),d}function St(d,g){g=g||1;var F=rt.c()*2*Math.PI;return d[0]=Math.cos(F)*g,d[1]=Math.sin(F)*g,d}function wt(d,g,F){var V=g[0],tt=g[1];return d[0]=F[0]*V+F[2]*tt,d[1]=F[1]*V+F[3]*tt,d}function xt(d,g,F){var V=g[0],tt=g[1];return d[0]=F[0]*V+F[2]*tt+F[4],d[1]=F[1]*V+F[3]*tt+F[5],d}function ft(d,g,F){var V=g[0],tt=g[1];return d[0]=F[0]*V+F[3]*tt+F[6],d[1]=F[1]*V+F[4]*tt+F[7],d}function Bt(d,g,F){var V=g[0],tt=g[1];return d[0]=F[0]*V+F[4]*tt+F[12],d[1]=F[1]*V+F[5]*tt+F[13],d}function Rt(d,g,F,V){var tt=g[0]-F[0],ot=g[1]-F[1],at=Math.sin(V),At=Math.cos(V);return d[0]=tt*At-ot*at+F[0],d[1]=tt*at+ot*At+F[1],d}function Ot(d,g){var F=d[0],V=d[1],tt=g[0],ot=g[1],at=Math.sqrt(F*F+V*V)*Math.sqrt(tt*tt+ot*ot),At=at&&(F*tt+V*ot)/at;return Math.acos(Math.min(Math.max(At,-1),1))}function X(d){return d[0]=0,d[1]=0,d}function ut(d){return"vec2("+d[0]+", "+d[1]+")"}function vt(d,g){return d[0]===g[0]&&d[1]===g[1]}function pt(d,g){var F=d[0],V=d[1],tt=g[0],ot=g[1];return Math.abs(F-tt)<=rt.b*Math.max(1,Math.abs(F),Math.abs(tt))&&Math.abs(V-ot)<=rt.b*Math.max(1,Math.abs(V),Math.abs(ot))}var Et=m,q=S,st=l,it=A,z=T,P=v,H=C,k=function(){var d=a();return function(g,F,V,tt,ot,at){var At,yt;for(F||(F=2),V||(V=0),tt?yt=Math.min(tt*F+V,g.length):yt=g.length,At=V;At<yt;At+=F)d[0]=g[At],d[1]=g[At+1],ot(d,d,at),g[At]=d[0],g[At+1]=d[1];return g}}()},a8tM:function(Fn,Gt,_){"use strict";_.d(Gt,"c",function(){return C}),_.d(Gt,"b",function(){return dt}),_.d(Gt,"a",function(){return ht});var rt=_("rePB");function a(St){var wt=0,xt=St.children,ft=xt&&xt.length;if(!ft)wt=1;else for(;--ft>=0;)wt+=xt[ft].value;St.value=wt}var E=function(){return this.eachAfter(a)},e=_("uFwe"),r=function(St,wt){var xt=-1,ft=Object(e.a)(this),Bt;try{for(ft.s();!(Bt=ft.n()).done;){var Rt=Bt.value;St.call(wt,Rt,++xt,this)}}catch(Ot){ft.e(Ot)}finally{ft.f()}return this},p=function(St,wt){for(var xt=this,ft=[xt],Bt,Rt,Ot=-1;xt=ft.pop();)if(St.call(wt,xt,++Ot,this),Bt=xt.children)for(Rt=Bt.length-1;Rt>=0;--Rt)ft.push(Bt[Rt]);return this},b=function(St,wt){for(var xt=this,ft=[xt],Bt=[],Rt,Ot,X,ut=-1;xt=ft.pop();)if(Bt.push(xt),Rt=xt.children)for(Ot=0,X=Rt.length;Ot<X;++Ot)ft.push(Rt[Ot]);for(;xt=Bt.pop();)St.call(wt,xt,++ut,this);return this},S=function(St,wt){var xt=-1,ft=Object(e.a)(this),Bt;try{for(ft.s();!(Bt=ft.n()).done;){var Rt=Bt.value;if(St.call(wt,Rt,++xt,this))return Rt}}catch(Ot){ft.e(Ot)}finally{ft.f()}},l=function(St){return this.eachAfter(function(wt){for(var xt=+St(wt.data)||0,ft=wt.children,Bt=ft&&ft.length;--Bt>=0;)xt+=ft[Bt].value;wt.value=xt})},A=function(St){return this.eachBefore(function(wt){wt.children&&wt.children.sort(St)})},j=function(St){for(var wt=this,xt=y(wt,St),ft=[wt];wt!==xt;)wt=wt.parent,ft.push(wt);for(var Bt=ft.length;St!==xt;)ft.splice(Bt,0,St),St=St.parent;return ft};function y(St,wt){if(St===wt)return St;var xt=St.ancestors(),ft=wt.ancestors(),Bt=null;for(St=xt.pop(),wt=ft.pop();St===wt;)Bt=St,St=xt.pop(),wt=ft.pop();return Bt}var n=function(){for(var St=this,wt=[St];St=St.parent;)wt.push(St);return wt},s=function(){return Array.from(this)},h=function(){var St=[];return this.eachBefore(function(wt){wt.children||St.push(wt)}),St},M=function(){var St=this,wt=[];return St.each(function(xt){xt!==St&&wt.push({source:xt.parent,target:xt})}),wt},O=_("o0o1"),T=_.n(O),v=T.a.mark(m);function m(){var St,wt,xt,ft,Bt,Rt;return T.a.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:St=this,xt=[St];case 1:wt=xt.reverse(),xt=[];case 2:if(!(St=wt.pop())){X.next=8;break}return X.next=5,St;case 5:if(ft=St.children)for(Bt=0,Rt=ft.length;Bt<Rt;++Bt)xt.push(ft[Bt]);X.next=2;break;case 8:if(xt.length){X.next=1;break}case 9:case"end":return X.stop()}},v,this)}function C(St,wt){St instanceof Map?(St=[void 0,St],wt===void 0&&(wt=Z)):wt===void 0&&(wt=Y);for(var xt=new ht(St),ft,Bt=[xt],Rt,Ot,X,ut;ft=Bt.pop();)if((Ot=wt(ft.data))&&(ut=(Ot=Array.from(Ot)).length))for(ft.children=Ot,X=ut-1;X>=0;--X)Bt.push(Rt=Ot[X]=new ht(Ot[X])),Rt.parent=ft,Rt.depth=ft.depth+1;return xt.eachBefore(dt)}function D(){return C(this).eachBefore(et)}function Y(St){return St.children}function Z(St){return Array.isArray(St)?St[1]:null}function et(St){St.data.value!==void 0&&(St.value=St.data.value),St.data=St.data.data}function dt(St){var wt=0;do St.height=wt;while((St=St.parent)&&St.height<++wt)}function ht(St){this.data=St,this.depth=this.height=0,this.parent=null}ht.prototype=C.prototype=Object(rt.a)({constructor:ht,count:E,each:r,eachAfter:b,eachBefore:p,find:S,sum:l,sort:A,path:j,ancestors:n,descendants:s,leaves:h,links:M,copy:D},Symbol.iterator,m)},aFU3:function(Fn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"version",function(){return O});var rt=_("tvuL");_.d(Gt,"PathUtil",function(){return rt});var a=_("4cbP"),E=_.n(a);for(var e in a)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","version"].indexOf(e)<0&&function(T){_.d(Gt,T,function(){return a[T]})}(e);var r=_("tdXX"),p=_.n(r);for(var e in r)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","version"].indexOf(e)<0&&function(v){_.d(Gt,v,function(){return r[v]})}(e);var b=_("5eLp");_.d(Gt,"Event",function(){return b.a});var S=_("LmB6");_.d(Gt,"Base",function(){return S.a});var l=_("EkMX");_.d(Gt,"AbstractCanvas",function(){return l.a});var A=_("+DwW");_.d(Gt,"AbstractGroup",function(){return A.a});var j=_("MaEA");_.d(Gt,"AbstractShape",function(){return j.a});var y=_("1MZV");_.d(Gt,"getBBoxMethod",function(){return y.a});var n=_("vIgC");_.d(Gt,"getTextHeight",function(){return n.b}),_.d(Gt,"assembleFont",function(){return n.a});var s=_("sstZ");_.d(Gt,"isAllowCapture",function(){return s.b});var h=_("aSjE");_.d(Gt,"multiplyVec2",function(){return h.c}),_.d(Gt,"invert",function(){return h.a});var M=_("lt7v");_.d(Gt,"getOffScreenContext",function(){return M.a});var O="0.5.4"},aHsQ:function(Fn,Gt,_){"use strict";var rt=_("cIOH"),a=_.n(rt),E=_("6D9b"),e=_.n(E),r=_("cWXX")},aLzy:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return q});var rt=_("mrSG"),a=_("zJSt"),E=_("w02o"),e=_("YuPD"),r=_("5OoT"),p=_("iTfj"),b=_("5HRO"),S=_("WOQw"),l="$$percentage$$",A="$$mappingValue$$",j="$$conversion$$",y="$$totalPercentage$$",n="$$x$$",s="$$y$$";function h(st,it,z){var P=[],H=z.yField,k=z.maxSize,d=z.minSize,g=Object(p.maxBy)(it,H)[H],F=Object(p.isNumber)(k)?k:1,V=Object(p.isNumber)(d)?d:0;return P=Object(p.map)(st,function(tt,ot){var at=(tt[H]||0)/g;return tt[l]=at,tt[A]=(F-V)*at+V,tt[j]=[Object(p.get)(st,[ot-1,H]),tt[H]],tt}),P}function M(st){return function(it){var z=it.chart,P=it.options,H=P.conversionTag,k=z.getOptions().data;if(H){var d=H.formatter;k.forEach(function(g,F){if(!(F<=0)){var V=st(g,F,k,{top:!0,text:{content:Object(p.isFunction)(d)?d(g,k):d,offsetX:H.offsetX,offsetY:H.offsetY,position:"end",autoRotate:!1,style:Object(rt.a)({textAlign:"start",textBaseline:"middle"},H.style)}});z.annotation().line(V)}})}return it}}function O(st){var it=st.chart,z=st.options,P=z.data,H=P===void 0?[]:P,k=z.yField,d=z.maxSize,g=z.minSize,F=h(H,H,{yField:k,maxSize:d,minSize:g});return it.data(F),st}function T(st){var it=st.chart,z=st.options,P=z.xField,H=z.yField,k=z.color,d=z.tooltip,g=z.label,F=Object(b.a)(d,[P,H]),V=F.fields,tt=F.formatter;Object(S.a)({chart:it,options:{type:"interval",xField:P,yField:A,colorField:P,tooltipFields:Object(p.isArray)(V)&&V.concat([l,j]),mapping:{shape:"funnel",tooltip:tt,color:k},label:g}});var ot=Object(e.c)(st.chart,"interval");return ot.adjust("symmetric"),st}function v(st){var it=st.chart,z=st.options,P=z.isTransposed;return it.coordinate({type:"rect",actions:P?[]:[["transpose"],["scale",1,-1]]}),st}function m(st){var it=st.options,z=it.maxSize,P=function(k,d,g,F){var V=z-(z-k[A])/2;return Object(rt.a)(Object(rt.a)({},F),{start:[d-.5,V],end:[d-.5,V+.05]})};return M(P)(st),st}function C(st){return Object(e.e)(O,T,v,m)(st)}function D(st){var it,z=st.chart,P=st.options,H=P.data,k=H===void 0?[]:H,d=P.yField;return z.data(k),z.scale((it={},it[d]={sync:!0},it)),st}function Y(st){var it=st.chart,z=st.options,P=z.data,H=z.xField,k=z.yField,d=z.color,g=z.compareField,F=z.isTransposed,V=z.tooltip,tt=z.maxSize,ot=z.minSize,at=z.label;return it.facet("mirror",{fields:[g],transpose:!F,padding:F?0:[32,0,0,0],eachView:function(yt,gt){var bt=F?gt.rowIndex:gt.columnIndex;F||yt.coordinate({type:"rect",actions:[["transpose"],["scale",bt===0?-1:1,-1]]});var Tt=h(gt.data,P,{yField:k,maxSize:tt,minSize:ot});yt.data(Tt);var Dt=Object(b.a)(V,[H,k,g]),Ut=Dt.fields,jt=Dt.formatter,Vt=F?{offset:bt===0?10:-23,position:bt===0?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:bt===0?"end":"start"}};Object(S.a)({chart:yt,options:{type:"interval",xField:H,yField:A,colorField:H,tooltipFields:Object(p.isArray)(Ut)&&Ut.concat([l,j]),mapping:{shape:"funnel",tooltip:jt,color:d,style:{lineWidth:1,stroke:"#fff"}},label:at===!1?!1:Object(e.b)({},Vt,at)}})}}),st}function Z(st){var it=st.chart,z=st.options,P=z.conversionTag,H=z.isTransposed;return it.once("beforepaint",function(){it.views.forEach(function(k,d){var g=function(V,tt,ot,at){var At=d===0?-1:1;return Object(e.b)({},at,{start:[tt-.5,V[A]],end:[tt-.5,V[A]+.05],text:H?{style:{textAlign:"start"}}:{offsetX:P!==!1?At*P.offsetX:0,style:{textAlign:d===0?"end":"start"}}})};M(g)(Object(e.b)({},{chart:k,options:z}))})}),st}function et(st){return Object(e.e)(D,Y,Z)(st)}function dt(st){var it,z=st.chart,P=st.options,H=P.data,k=H===void 0?[]:H,d=P.yField;return z.data(k),z.scale((it={},it[d]={sync:!0},it)),st}function ht(st){var it=st.chart,z=st.options,P=z.seriesField,H=z.isTransposed;return it.facet("rect",{fields:[P],padding:[H?0:32,10,0,10],eachView:function(d,g){C(Object(e.b)({},st,{chart:d,options:{data:g.data}}))}}),st}function St(st){return Object(e.e)(dt,ht)(st)}function wt(st){var it=st.chart,z=st.options,P=z.data,H=P===void 0?[]:P,k=z.yField,d=Object(p.reduce)(H,function(V,tt){return V+(tt[k]||0)},0),g=Object(p.maxBy)(H,k)[k],F=Object(p.map)(H,function(V,tt){var ot=[],at=[];if(V[y]=(V[k]||0)/d,tt){var At=H[tt-1][n],yt=H[tt-1][s];ot[0]=At[3],at[0]=yt[3],ot[1]=At[2],at[1]=yt[2]}else ot[0]=-.5,at[0]=1,ot[1]=.5,at[1]=1;return at[2]=at[1]-V[y],ot[2]=(at[2]+1)/4,at[3]=at[2],ot[3]=-ot[2],V[n]=ot,V[s]=at,V[l]=(V[k]||0)/g,V[j]=[Object(p.get)(H,[tt-1,k]),V[k]],V});return it.data(F),st}function xt(st){var it=st.chart,z=st.options,P=z.xField,H=z.yField,k=z.color,d=z.tooltip,g=z.label,F=Object(b.a)(d,[P,H]),V=F.fields,tt=F.formatter;return Object(S.a)({chart:it,options:{type:"polygon",xField:n,yField:s,colorField:P,tooltipFields:Object(p.isArray)(V)&&V.concat([l,j]),label:g,mapping:{tooltip:tt,color:k}}}),st}function ft(st){var it=st.chart,z=st.options,P=z.isTransposed;return it.coordinate({type:"rect",actions:P?[["transpose"],["reflect","x"]]:[]}),st}function Bt(st){var it=function(P,H,k,d){return Object(rt.a)(Object(rt.a)({},d),{start:[P[n][1],P[s][1]],end:[P[n][1]+.05,P[s][1]]})};return M(it)(st),st}function Rt(st){return Object(e.e)(wt,xt,ft,Bt)(st)}function Ot(st){var it,z=st.options,P=z.compareField,H=z.xField,k=z.yField,d={minSize:0,maxSize:1,meta:(it={},it[A]={min:0,max:1,nice:!1},it),label:P?{fields:[H,k,P,l,j],style:{fill:"#fff",fontSize:12},formatter:function(F){return""+F[k]}}:{fields:[H,k,l,j],offset:0,position:"middle",style:{fill:"#fff",fontSize:12},formatter:function(F){return F[H]+" "+F[k]}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,title:H,formatter:function(F){return{name:F[H],value:F[k]}}},conversionTag:{offsetX:10,offsetY:0,style:{},formatter:function(F){return"\u8F6C\u5316\u7387: "+r.a.apply(void 0,F[j])}}};return Object(e.b)({options:d},st)}function X(st){var it=st.options,z=it.compareField,P=it.dynamicHeight,H=it.seriesField;return H?St(st):z?et(st):P?Rt(st):C(st)}function ut(st){var it,z=st.options,P=z.xAxis,H=z.yAxis,k=z.xField,d=z.yField;return Object(e.e)(Object(E.f)((it={},it[k]=P,it[d]=H,it)))(st)}function vt(st){var it=st.chart;return it.axis(!1),st}function pt(st){var it=st.chart,z=st.options,P=z.legend;return P===!1?it.legend(!1):it.legend(P),st}function Et(st){return Object(e.e)(Ot,X,ut,vt,E.k,E.c,pt,E.a,E.j,Object(E.b)())(st)}var q=function(st){Object(rt.b)(it,st);function it(){var z=st!==null&&st.apply(this,arguments)||this;return z.type="funnel",z}return it.prototype.getDefaultOptions=function(){return{appendPadding:[0,80]}},it.prototype.getSchemaAdaptor=function(){return Et},it}(a.a)},aN7R:function(Fn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"Base",function(){return A}),_.d(Gt,"Circle",function(){return n}),_.d(Gt,"Dom",function(){return h}),_.d(Gt,"Ellipse",function(){return O}),_.d(Gt,"Image",function(){return v}),_.d(Gt,"Line",function(){return D}),_.d(Gt,"Marker",function(){return dt}),_.d(Gt,"Path",function(){return St}),_.d(Gt,"Polygon",function(){return xt}),_.d(Gt,"Polyline",function(){return Bt}),_.d(Gt,"Rect",function(){return pt}),_.d(Gt,"Text",function(){return H});var rt={};_.r(rt),_.d(rt,"Base",function(){return A}),_.d(rt,"Circle",function(){return n}),_.d(rt,"Dom",function(){return h}),_.d(rt,"Ellipse",function(){return O}),_.d(rt,"Image",function(){return v}),_.d(rt,"Line",function(){return D}),_.d(rt,"Marker",function(){return dt}),_.d(rt,"Path",function(){return St}),_.d(rt,"Polygon",function(){return xt}),_.d(rt,"Polyline",function(){return Bt}),_.d(rt,"Rect",function(){return pt}),_.d(rt,"Text",function(){return H});var a=_("mrSG"),E=_("aFU3"),e=_("APlK"),r=_("c+wO"),p=_("c0lT"),b=_("IvmH"),S=_("5z4m"),l=function(k){Object(a.b)(d,k);function d(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="svg",g.canFill=!1,g.canStroke=!1,g}return d.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},d.prototype.afterAttrsChange=function(g){k.prototype.afterAttrsChange.call(this,g);var F=this.get("canvas");if(F&&F.get("autoDraw")){var V=F.get("context");this.draw(V,g)}},d.prototype.getShapeBase=function(){return rt},d.prototype.getGroupBase=function(){return S.a},d.prototype.onCanvasChange=function(g){Object(p.b)(this,g)},d.prototype.calculateBBox=function(){var g=this.get("el"),F=null;if(g)F=g.getBBox();else{var V=Object(E.getBBoxMethod)(this.get("type"));V&&(F=V(this))}if(F){var tt=F.x,ot=F.y,at=F.width,At=F.height,yt=this.getHitLineWidth(),gt=yt/2,bt=tt-gt,Tt=ot-gt,Dt=tt+at+gt,Ut=ot+At+gt;return{x:bt,y:Tt,minX:bt,minY:Tt,maxX:Dt,maxY:Ut,width:at+yt,height:At+yt}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},d.prototype.isFill=function(){var g=this.attr(),F=g.fill,V=g.fillStyle;return(F||V||this.isClipShape())&&this.canFill},d.prototype.isStroke=function(){var g=this.attr(),F=g.stroke,V=g.strokeStyle;return(F||V)&&this.canStroke},d.prototype.draw=function(g,F){var V=this.get("el");this.get("destroyed")?V&&V.parentNode.removeChild(V):(V||Object(r.a)(this),Object(e.a)(this,g),this.createPath(g,F),this.shadow(g,F),this.strokeAndFill(g,F),this.transform(F))},d.prototype.createPath=function(g,F){},d.prototype.strokeAndFill=function(g,F){var V=F||this.attr(),tt=V.fill,ot=V.fillStyle,at=V.stroke,At=V.strokeStyle,yt=V.fillOpacity,gt=V.strokeOpacity,bt=V.lineWidth,Tt=this.get("el");this.canFill&&(F?"fill"in V?this._setColor(g,"fill",tt):"fillStyle"in V&&this._setColor(g,"fill",ot):this._setColor(g,"fill",tt||ot),yt&&Tt.setAttribute(b.b.fillOpacity,yt)),this.canStroke&&bt>0&&(F?"stroke"in V?this._setColor(g,"stroke",at):"strokeStyle"in V&&this._setColor(g,"stroke",At):this._setColor(g,"stroke",at||At),gt&&Tt.setAttribute(b.b.strokeOpacity,gt),bt&&Tt.setAttribute(b.b.lineWidth,bt))},d.prototype._setColor=function(g,F,V){var tt=this.get("el");if(!V){tt.setAttribute(b.b[F],"none");return}if(V=V.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(V)){var ot=g.find("gradient",V);ot||(ot=g.addGradient(V)),tt.setAttribute(b.b[F],"url(#"+ot+")")}else if(/^[p,P]{1}[\s]*\(/.test(V)){var ot=g.find("pattern",V);ot||(ot=g.addPattern(V)),tt.setAttribute(b.b[F],"url(#"+ot+")")}else tt.setAttribute(b.b[F],V)},d.prototype.shadow=function(g,F){var V=this.attr(),tt=F||V,ot=tt.shadowOffsetX,at=tt.shadowOffsetY,At=tt.shadowBlur,yt=tt.shadowColor;(ot||at||At||yt)&&Object(e.b)(this,g)},d.prototype.transform=function(g){var F=this.attr(),V=(g||F).matrix;V&&Object(e.c)(this)},d.prototype.isInShape=function(g,F){return this.isPointInPath(g,F)},d.prototype.isPointInPath=function(g,F){var V=this.get("el"),tt=this.get("canvas"),ot=tt.get("el").getBoundingClientRect(),at=g+ot.left,At=F+ot.top,yt=document.elementFromPoint(at,At);return!!(yt&&yt.isEqualNode(V))},d.prototype.getHitLineWidth=function(){var g=this.attrs,F=g.lineWidth,V=g.lineAppendWidth;return this.isStroke()?F+V:0},d}(E.AbstractShape),A=l,j=_("iTfj"),y=function(k){Object(a.b)(d,k);function d(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="circle",g.canFill=!0,g.canStroke=!0,g}return d.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{x:0,y:0,r:0})},d.prototype.createPath=function(g,F){var V=this.attr(),tt=this.get("el");Object(j.each)(F||V,function(ot,at){at==="x"||at==="y"?tt.setAttribute("c"+at,ot):b.b[at]&&tt.setAttribute(b.b[at],ot)})},d}(A),n=y,s=function(k){Object(a.b)(d,k);function d(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="dom",g.canFill=!1,g.canStroke=!1,g}return d.prototype.createPath=function(g,F){var V=this.attr(),tt=this.get("el");if(Object(j.each)(F||V,function(yt,gt){b.b[gt]&&tt.setAttribute(b.b[gt],yt)}),typeof V.html=="function"){var ot=V.html.call(this,V);if(ot instanceof Element||ot instanceof HTMLDocument){for(var at=tt.childNodes,At=at.length-1;At>=0;At--)tt.removeChild(at[At]);tt.appendChild(ot)}else tt.innerHTML=ot}else tt.innerHTML=V.html},d}(A),h=s,M=function(k){Object(a.b)(d,k);function d(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="ellipse",g.canFill=!0,g.canStroke=!0,g}return d.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{x:0,y:0,rx:0,ry:0})},d.prototype.createPath=function(g,F){var V=this.attr(),tt=this.get("el");Object(j.each)(F||V,function(ot,at){at==="x"||at==="y"?tt.setAttribute("c"+at,ot):b.b[at]&&tt.setAttribute(b.b[at],ot)})},d}(A),O=M,T=function(k){Object(a.b)(d,k);function d(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="image",g.canFill=!1,g.canStroke=!1,g}return d.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{x:0,y:0,width:0,height:0})},d.prototype.createPath=function(g,F){var V=this,tt=this.attr(),ot=this.get("el");Object(j.each)(F||tt,function(at,At){At==="img"?V._setImage(tt.img):b.b[At]&&ot.setAttribute(b.b[At],at)})},d.prototype.setAttr=function(g,F){this.attrs[g]=F,g==="img"&&this._setImage(F)},d.prototype._setImage=function(g){var F=this.attr(),V=this.get("el");if(Object(j.isString)(g))V.setAttribute("href",g);else if(g instanceof window.Image)F.width||(V.setAttribute("width",g.width),this.attr("width",g.width)),F.height||(V.setAttribute("height",g.height),this.attr("height",g.height)),V.setAttribute("href",g.src);else if(g instanceof HTMLElement&&Object(j.isString)(g.nodeName)&&g.nodeName.toUpperCase()==="CANVAS")V.setAttribute("href",g.toDataURL());else if(g instanceof ImageData){var tt=document.createElement("canvas");tt.setAttribute("width",""+g.width),tt.setAttribute("height",""+g.height),tt.getContext("2d").putImageData(g,0,0),F.width||(V.setAttribute("width",""+g.width),this.attr("width",g.width)),F.height||(V.setAttribute("height",""+g.height),this.attr("height",g.height)),V.setAttribute("href",tt.toDataURL())}},d}(A),v=T,m=_("EYNi"),C=function(k){Object(a.b)(d,k);function d(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="line",g.canFill=!1,g.canStroke=!0,g}return d.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},d.prototype.createPath=function(g,F){var V=this.attr(),tt=this.get("el");Object(j.each)(F||V,function(ot,at){if(at==="startArrow"||at==="endArrow")if(ot){var At=Object(j.isObject)(ot)?g.addArrow(V,b.b[at]):g.getDefaultArrow(V,b.b[at]);tt.setAttribute(b.b[at],"url(#"+At+")")}else tt.removeAttribute(b.b[at]);else b.b[at]&&tt.setAttribute(b.b[at],ot)})},d.prototype.getTotalLength=function(){var g=this.attr(),F=g.x1,V=g.y1,tt=g.x2,ot=g.y2;return m.c.length(F,V,tt,ot)},d.prototype.getPoint=function(g){var F=this.attr(),V=F.x1,tt=F.y1,ot=F.x2,at=F.y2;return m.c.pointAt(V,tt,ot,at,g)},d}(A),D=C,Y={circle:function(d,g,F){return[["M",d,g],["m",-F,0],["a",F,F,0,1,0,F*2,0],["a",F,F,0,1,0,-F*2,0]]},square:function(d,g,F){return[["M",d-F,g-F],["L",d+F,g-F],["L",d+F,g+F],["L",d-F,g+F],["Z"]]},diamond:function(d,g,F){return[["M",d-F,g],["L",d,g-F],["L",d+F,g],["L",d,g+F],["Z"]]},triangle:function(d,g,F){var V=F*Math.sin(1/3*Math.PI);return[["M",d-F,g+V],["L",d,g-V],["L",d+F,g+V],["z"]]},triangleDown:function(d,g,F){var V=F*Math.sin(1/3*Math.PI);return[["M",d-F,g-V],["L",d+F,g-V],["L",d,g+V],["Z"]]}},Z={get:function(d){return Y[d]},register:function(d,g){Y[d]=g},remove:function(d){delete Y[d]},getAll:function(){return Y}},et=function(k){Object(a.b)(d,k);function d(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="marker",g.canFill=!0,g.canStroke=!0,g}return d.prototype.createPath=function(g){var F=this.get("el");F.setAttribute("d",this._assembleMarker())},d.prototype._assembleMarker=function(){var g=this._getPath();return Object(j.isArray)(g)?g.map(function(F){return F.join(" ")}).join(""):g},d.prototype._getPath=function(){var g=this.attr(),F=g.x,V=g.y,tt=g.r||g.radius,ot=g.symbol||"circle",at;return Object(j.isFunction)(ot)?at=ot:at=Z.get(ot),at?at(F,V,tt):(console.warn(at+" symbol is not exist."),null)},d.symbolsFactory=Z,d}(A),dt=et,ht=function(k){Object(a.b)(d,k);function d(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="path",g.canFill=!0,g.canStroke=!0,g}return d.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{startArrow:!1,endArrow:!1})},d.prototype.createPath=function(g,F){var V=this,tt=this.attr(),ot=this.get("el");Object(j.each)(F||tt,function(at,At){if(At==="path"&&Object(j.isArray)(at))ot.setAttribute("d",V._formatPath(at));else if(At==="startArrow"||At==="endArrow")if(at){var yt=Object(j.isObject)(at)?g.addArrow(tt,b.b[At]):g.getDefaultArrow(tt,b.b[At]);ot.setAttribute(b.b[At],"url(#"+yt+")")}else ot.removeAttribute(b.b[At]);else b.b[At]&&ot.setAttribute(b.b[At],at)})},d.prototype._formatPath=function(g){var F=g.map(function(V){return V.join(" ")}).join("");return~F.indexOf("NaN")?"":F},d.prototype.getTotalLength=function(){var g=this.get("el");return g?g.getTotalLength():null},d.prototype.getPoint=function(g){var F=this.get("el"),V=this.getTotalLength();if(V===0)return null;var tt=F?F.getPointAtLength(g*V):null;return tt?{x:tt.x,y:tt.y}:null},d}(A),St=ht,wt=function(k){Object(a.b)(d,k);function d(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="polygon",g.canFill=!0,g.canStroke=!0,g}return d.prototype.createPath=function(g,F){var V=this.attr(),tt=this.get("el");Object(j.each)(F||V,function(ot,at){at==="points"&&Object(j.isArray)(ot)&&ot.length>=2?tt.setAttribute("points",ot.map(function(At){return At[0]+","+At[1]}).join(" ")):b.b[at]&&tt.setAttribute(b.b[at],ot)})},d}(A),xt=wt,ft=function(k){Object(a.b)(d,k);function d(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="polyline",g.canFill=!0,g.canStroke=!0,g}return d.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{startArrow:!1,endArrow:!1})},d.prototype.onAttrChange=function(g,F,V){k.prototype.onAttrChange.call(this,g,F,V),["points"].indexOf(g)!==-1&&this._resetCache()},d.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},d.prototype.createPath=function(g,F){var V=this.attr(),tt=this.get("el");Object(j.each)(F||V,function(ot,at){at==="points"&&Object(j.isArray)(ot)&&ot.length>=2?tt.setAttribute("points",ot.map(function(At){return At[0]+","+At[1]}).join(" ")):b.b[at]&&tt.setAttribute(b.b[at],ot)})},d.prototype.getTotalLength=function(){var g=this.attr().points,F=this.get("totalLength");return Object(j.isNil)(F)?(this.set("totalLength",m.d.length(g)),this.get("totalLength")):F},d.prototype.getPoint=function(g){var F=this.attr().points,V=this.get("tCache");V||(this._setTcache(),V=this.get("tCache"));var tt,ot;return Object(j.each)(V,function(at,At){g>=at[0]&&g<=at[1]&&(tt=(g-at[0])/(at[1]-at[0]),ot=At)}),m.c.pointAt(F[ot][0],F[ot][1],F[ot+1][0],F[ot+1][1],tt)},d.prototype._setTcache=function(){var g=this.attr().points;if(!(!g||g.length===0)){var F=this.getTotalLength();if(!(F<=0)){var V=0,tt=[],ot,at;Object(j.each)(g,function(At,yt){g[yt+1]&&(ot=[],ot[0]=V/F,at=m.c.length(At[0],At[1],g[yt+1][0],g[yt+1][1]),V+=at,ot[1]=V/F,tt.push(ot))}),this.set("tCache",tt)}}},d.prototype.getStartTangent=function(){var g=this.attr().points,F=[];return F.push([g[1][0],g[1][1]]),F.push([g[0][0],g[0][1]]),F},d.prototype.getEndTangent=function(){var g=this.attr().points,F=g.length-1,V=[];return V.push([g[F-1][0],g[F-1][1]]),V.push([g[F][0],g[F][1]]),V},d}(A),Bt=ft,Rt=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,Ot=/[^\s,]+/gi;function X(k){var d=0,g=0,F=0,V=0;return Object(j.isArray)(k)?k.length===1?d=g=F=V=k[0]:k.length===2?(d=F=k[0],g=V=k[1]):k.length===3?(d=k[0],g=V=k[1],F=k[2]):(d=k[0],g=k[1],F=k[2],V=k[3]):d=g=F=V=k,{r1:d,r2:g,r3:F,r4:V}}function ut(k){if(k=k||[],Object(j.isArray)(k))return k;if(Object(j.isString)(k))return k=k.match(Rt),Object(j.each)(k,function(d,g){if(d=d.match(Ot),d[0].length>1){var F=d[0].charAt(0);d.splice(1,0,d[0].substr(1)),d[0]=F}Object(j.each)(d,function(V,tt){isNaN(V)||(d[tt]=+V)}),k[g]=d}),k}var vt=function(k){Object(a.b)(d,k);function d(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="rect",g.canFill=!0,g.canStroke=!0,g}return d.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{x:0,y:0,width:0,height:0,radius:0})},d.prototype.createPath=function(g,F){var V=this,tt=this.attr(),ot=this.get("el"),at=!1,At=["x","y","width","height","radius"];Object(j.each)(F||tt,function(yt,gt){At.indexOf(gt)!==-1&&!at?(ot.setAttribute("d",V._assembleRect(tt)),at=!0):At.indexOf(gt)===-1&&b.b[gt]&&ot.setAttribute(b.b[gt],yt)})},d.prototype._assembleRect=function(g){var F=g.x,V=g.y,tt=g.width,ot=g.height,at=g.radius;if(!at)return"M "+F+","+V+" l "+tt+",0 l 0,"+ot+" l"+-tt+" 0 z";var At=X(at);Object(j.isArray)(at)?at.length===1?At.r1=At.r2=At.r3=At.r4=at[0]:at.length===2?(At.r1=At.r3=at[0],At.r2=At.r4=at[1]):at.length===3?(At.r1=at[0],At.r2=At.r4=at[1],At.r3=at[2]):(At.r1=at[0],At.r2=at[1],At.r3=at[2],At.r4=at[3]):At.r1=At.r2=At.r3=At.r4=at;var yt=[["M "+(F+At.r1)+","+V],["l "+(tt-At.r1-At.r2)+",0"],["a "+At.r2+","+At.r2+",0,0,1,"+At.r2+","+At.r2],["l 0,"+(ot-At.r2-At.r3)],["a "+At.r3+","+At.r3+",0,0,1,"+-At.r3+","+At.r3],["l "+(At.r3+At.r4-tt)+",0"],["a "+At.r4+","+At.r4+",0,0,1,"+-At.r4+","+-At.r4],["l 0,"+(At.r4+At.r1-ot)],["a "+At.r1+","+At.r1+",0,0,1,"+At.r1+","+-At.r1],["z"]];return yt.join(" ")},d}(A),pt=vt,Et=_("e0ae"),q=.3,st={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},it={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},z={left:"left",start:"left",center:"middle",right:"end",end:"end"},P=function(k){Object(a.b)(d,k);function d(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="text",g.canFill=!0,g.canStroke=!0,g}return d.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},d.prototype.createPath=function(g,F){var V=this,tt=this.attr(),ot=this.get("el");this._setFont(),Object(j.each)(F||tt,function(at,At){At==="text"?V._setText(""+at):At==="matrix"&&at?Object(e.c)(V):b.b[At]&&ot.setAttribute(b.b[At],at)}),ot.setAttribute("paint-order","stroke"),ot.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},d.prototype._setFont=function(){var g=this.get("el"),F=this.attr(),V=F.textBaseline,tt=F.textAlign,ot=Object(Et.a)();ot&&ot.name==="firefox"?g.setAttribute("dominant-baseline",it[V]||"alphabetic"):g.setAttribute("alignment-baseline",st[V]||"baseline"),g.setAttribute("text-anchor",z[tt]||"left")},d.prototype._setText=function(g){var F=this.get("el"),V=this.attr(),tt=V.x,ot=V.textBaseline,at=ot===void 0?"bottom":ot;if(!g)F.innerHTML="";else if(~g.indexOf(`
`)){var At=g.split(`
`),yt=At.length-1,gt="";Object(j.each)(At,function(bt,Tt){Tt===0?at==="alphabetic"?gt+='<tspan x="'+tt+'" dy="'+-yt+'em">'+bt+"</tspan>":at==="top"?gt+='<tspan x="'+tt+'" dy="0.9em">'+bt+"</tspan>":at==="middle"?gt+='<tspan x="'+tt+'" dy="'+-(yt-1)/2+'em">'+bt+"</tspan>":at==="bottom"?gt+='<tspan x="'+tt+'" dy="-'+(yt+q)+'em">'+bt+"</tspan>":at==="hanging"&&(gt+='<tspan x="'+tt+'" dy="'+(-(yt-1)-q)+'em">'+bt+"</tspan>"):gt+='<tspan x="'+tt+'" dy="1em">'+bt+"</tspan>"}),F.innerHTML=gt}else F.innerHTML=g},d}(A),H=P},aSjE:function(Fn,Gt,_){"use strict";_.d(Gt,"b",function(){return rt}),_.d(Gt,"c",function(){return a}),_.d(Gt,"a",function(){return E});function rt(e,r){var p=[],b=e[0],S=e[1],l=e[2],A=e[3],j=e[4],y=e[5],n=e[6],s=e[7],h=e[8],M=r[0],O=r[1],T=r[2],v=r[3],m=r[4],C=r[5],D=r[6],Y=r[7],Z=r[8];return p[0]=M*b+O*A+T*n,p[1]=M*S+O*j+T*s,p[2]=M*l+O*y+T*h,p[3]=v*b+m*A+C*n,p[4]=v*S+m*j+C*s,p[5]=v*l+m*y+C*h,p[6]=D*b+Y*A+Z*n,p[7]=D*S+Y*j+Z*s,p[8]=D*l+Y*y+Z*h,p}function a(e,r){var p=[],b=r[0],S=r[1];return p[0]=e[0]*b+e[3]*S+e[6],p[1]=e[1]*b+e[4]*S+e[7],p}function E(e){var r=[],p=e[0],b=e[1],S=e[2],l=e[3],A=e[4],j=e[5],y=e[6],n=e[7],s=e[8],h=s*A-j*n,M=-s*l+j*y,O=n*l-A*y,T=p*h+b*M+S*O;return T?(T=1/T,r[0]=h*T,r[1]=(-s*b+S*n)*T,r[2]=(j*b-S*A)*T,r[3]=M*T,r[4]=(s*p-S*y)*T,r[5]=(-j*p+S*l)*T,r[6]=O*T,r[7]=(-n*p+b*y)*T,r[8]=(A*p-b*l)*T,r):null}},bahg:function(Fn,Gt){function _(rt){return rt.split("")}Fn.exports=_},bx4M:function(Fn,Gt,_){"use strict";var rt=_("rePB"),a=_("wx14"),E=_("q1tI"),e=_("TSYQ"),r=_.n(e),p=_("bT9E"),b=_("H84U"),S=function(D,Y){var Z={};for(var et in D)Object.prototype.hasOwnProperty.call(D,et)&&Y.indexOf(et)<0&&(Z[et]=D[et]);if(D!=null&&typeof Object.getOwnPropertySymbols=="function")for(var dt=0,et=Object.getOwnPropertySymbols(D);dt<et.length;dt++)Y.indexOf(et[dt])<0&&Object.prototype.propertyIsEnumerable.call(D,et[dt])&&(Z[et[dt]]=D[et[dt]]);return Z},l=function(Y){var Z=Y.prefixCls,et=Y.className,dt=Y.hoverable,ht=dt===void 0?!0:dt,St=S(Y,["prefixCls","className","hoverable"]);return E.createElement(b.a,null,function(wt){var xt=wt.getPrefixCls,ft=xt("card",Z),Bt=r()("".concat(ft,"-grid"),et,Object(rt.a)({},"".concat(ft,"-grid-hoverable"),ht));return E.createElement("div",Object(a.a)({},St,{className:Bt}))})},A=l,j=function(D,Y){var Z={};for(var et in D)Object.prototype.hasOwnProperty.call(D,et)&&Y.indexOf(et)<0&&(Z[et]=D[et]);if(D!=null&&typeof Object.getOwnPropertySymbols=="function")for(var dt=0,et=Object.getOwnPropertySymbols(D);dt<et.length;dt++)Y.indexOf(et[dt])<0&&Object.prototype.propertyIsEnumerable.call(D,et[dt])&&(Z[et[dt]]=D[et[dt]]);return Z},y=function(Y){return E.createElement(b.a,null,function(Z){var et=Z.getPrefixCls,dt=Y.prefixCls,ht=Y.className,St=Y.avatar,wt=Y.title,xt=Y.description,ft=j(Y,["prefixCls","className","avatar","title","description"]),Bt=et("card",dt),Rt=r()("".concat(Bt,"-meta"),ht),Ot=St?E.createElement("div",{className:"".concat(Bt,"-meta-avatar")},St):null,X=wt?E.createElement("div",{className:"".concat(Bt,"-meta-title")},wt):null,ut=xt?E.createElement("div",{className:"".concat(Bt,"-meta-description")},xt):null,vt=X||ut?E.createElement("div",{className:"".concat(Bt,"-meta-detail")},X,ut):null;return E.createElement("div",Object(a.a)({},ft,{className:Rt}),Ot,vt)})},n=y,s=_("ZTPi"),h=_("BMrR"),M=_("kPKH"),O=_("3Nzz"),T=function(D,Y){var Z={};for(var et in D)Object.prototype.hasOwnProperty.call(D,et)&&Y.indexOf(et)<0&&(Z[et]=D[et]);if(D!=null&&typeof Object.getOwnPropertySymbols=="function")for(var dt=0,et=Object.getOwnPropertySymbols(D);dt<et.length;dt++)Y.indexOf(et[dt])<0&&Object.prototype.propertyIsEnumerable.call(D,et[dt])&&(Z[et[dt]]=D[et[dt]]);return Z};function v(D){var Y=D.map(function(Z,et){return E.createElement("li",{style:{width:"".concat(100/D.length,"%")},key:"action-".concat(et)},E.createElement("span",null,Z))});return Y}var m=function(Y){var Z,et,dt=E.useContext(b.b),ht=dt.getPrefixCls,St=dt.direction,wt=E.useContext(O.b),xt=function(fn){Y.onTabChange&&Y.onTabChange(fn)},ft=function(){var fn;return E.Children.forEach(Y.children,function(Rn){Rn&&Rn.type&&Rn.type===A&&(fn=!0)}),fn},Bt=Y.prefixCls,Rt=Y.className,Ot=Y.extra,X=Y.headStyle,ut=X===void 0?{}:X,vt=Y.bodyStyle,pt=vt===void 0?{}:vt,Et=Y.title,q=Y.loading,st=Y.bordered,it=st===void 0?!0:st,z=Y.size,P=Y.type,H=Y.cover,k=Y.actions,d=Y.tabList,g=Y.children,F=Y.activeTabKey,V=Y.defaultActiveTabKey,tt=Y.tabBarExtraContent,ot=Y.hoverable,at=Y.tabProps,At=at===void 0?{}:at,yt=T(Y,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),gt=ht("card",Bt),bt=pt.padding===0||pt.padding==="0px"?{padding:24}:void 0,Tt=E.createElement("div",{className:"".concat(gt,"-loading-block")}),Dt=E.createElement("div",{className:"".concat(gt,"-loading-content"),style:bt},E.createElement(h.a,{gutter:8},E.createElement(M.a,{span:22},Tt)),E.createElement(h.a,{gutter:8},E.createElement(M.a,{span:8},Tt),E.createElement(M.a,{span:15},Tt)),E.createElement(h.a,{gutter:8},E.createElement(M.a,{span:6},Tt),E.createElement(M.a,{span:18},Tt)),E.createElement(h.a,{gutter:8},E.createElement(M.a,{span:13},Tt),E.createElement(M.a,{span:9},Tt)),E.createElement(h.a,{gutter:8},E.createElement(M.a,{span:4},Tt),E.createElement(M.a,{span:3},Tt),E.createElement(M.a,{span:16},Tt))),Ut=F!==void 0,jt=Object(a.a)(Object(a.a)({},At),(Z={},Object(rt.a)(Z,Ut?"activeKey":"defaultActiveKey",Ut?F:V),Object(rt.a)(Z,"tabBarExtraContent",tt),Z)),Vt,Ht=d&&d.length?E.createElement(s.a,Object(a.a)({size:"large"},jt,{className:"".concat(gt,"-head-tabs"),onChange:xt}),d.map(function(pn){return E.createElement(s.a.TabPane,{tab:pn.tab,disabled:pn.disabled,key:pn.key})})):null;(Et||Ot||Ht)&&(Vt=E.createElement("div",{className:"".concat(gt,"-head"),style:ut},E.createElement("div",{className:"".concat(gt,"-head-wrapper")},Et&&E.createElement("div",{className:"".concat(gt,"-head-title")},Et),Ot&&E.createElement("div",{className:"".concat(gt,"-extra")},Ot)),Ht));var re=H?E.createElement("div",{className:"".concat(gt,"-cover")},H):null,pe=E.createElement("div",{className:"".concat(gt,"-body"),style:pt},q?Dt:g),ye=k&&k.length?E.createElement("ul",{className:"".concat(gt,"-actions")},v(k)):null,we=Object(p.a)(yt,["onTabChange"]),Re=z||wt,He=r()(gt,(et={},Object(rt.a)(et,"".concat(gt,"-loading"),q),Object(rt.a)(et,"".concat(gt,"-bordered"),it),Object(rt.a)(et,"".concat(gt,"-hoverable"),ot),Object(rt.a)(et,"".concat(gt,"-contain-grid"),ft()),Object(rt.a)(et,"".concat(gt,"-contain-tabs"),d&&d.length),Object(rt.a)(et,"".concat(gt,"-").concat(Re),Re),Object(rt.a)(et,"".concat(gt,"-type-").concat(P),!!P),Object(rt.a)(et,"".concat(gt,"-rtl"),St==="rtl"),et),Rt);return E.createElement("div",Object(a.a)({},we,{className:He}),Vt,re,pe,ye)};m.Grid=A,m.Meta=n;var C=Gt.a=m},"c+wO":function(Fn,Gt,_){"use strict";_.d(Gt,"b",function(){return E}),_.d(Gt,"a",function(){return e}),_.d(Gt,"d",function(){return r}),_.d(Gt,"c",function(){return p});var rt=_("iTfj"),a=_("IvmH");function E(b){return document.createElementNS("http://www.w3.org/2000/svg",b)}function e(b){var S=a.a[b.type],l=b.getParent();if(!S)throw new Error("the type "+b.type+" is not supported by svg");var A=E(S);if(b.get("id")&&(A.id=b.get("id")),b.set("el",A),b.set("attrs",{}),l){var j=l.get("el");j||(j=l.createDom(),l.set("el",j)),j.appendChild(A)}return A}function r(b,S){var l=b.get("el"),A=Object(rt.toArray)(l.children).sort(S),j=document.createDocumentFragment();A.forEach(function(y){j.appendChild(y)}),l.appendChild(j)}function p(b,S){var l=b.parentNode,A=Array.from(l.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),j=A[S],y=A.indexOf(b);if(j){if(y>S)l.insertBefore(b,j);else if(y<S){var n=A[S+1];n?l.insertBefore(b,n):l.appendChild(b)}}else l.appendChild(b)}},c0lT:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return E}),_.d(Gt,"b",function(){return e});var rt=_("APlK"),a=_("c+wO");function E(r,p){p.forEach(function(b){b.draw(r)})}function e(r,p){var b=r.get("canvas");if(b&&b.get("autoDraw")){var S=b.get("context"),l=r.getParent(),A=l?l.getChildren():[b],j=r.get("el");if(p==="remove"){var y=r.get("isClipShape");if(y){var n=j&&j.parentNode,s=n&&n.parentNode;n&&s&&s.removeChild(n)}else j&&j.parentNode&&j.parentNode.removeChild(j)}else if(p==="show")j.setAttribute("visibility","visible");else if(p==="hide")j.setAttribute("visibility","hidden");else if(p==="zIndex")Object(a.c)(j,A.indexOf(r));else if(p==="sort"){var h=r.get("children");h&&h.length&&Object(a.d)(r,function(M,O){return h.indexOf(M)-h.indexOf(O)?1:0})}else p==="clear"?j&&(j.innerHTML=""):p==="matrix"?Object(rt.c)(r):p==="clip"?Object(rt.a)(r,S):p==="attr"||p==="add"&&r.draw(S)}}},cBFB:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return Y});var rt=_("mrSG"),a=_("YuPD"),E=_("zJSt"),e=_("tKoa"),r=_("w02o"),p=_("+Nd1"),b=_("a8tM"),S=_("iTfj"),l=_("I7nc"),A={field:"value",size:[1,1],round:!1,padding:0,sort:!0,as:["x","y"]};function j(Z,et){et=Object(S.assign)({},A,et);var dt=et.as;if(!Object(S.isArray)(dt)||dt.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var ht;try{ht=Object(l.b)(et)}catch(Bt){console.warn(Bt)}var St=function(Rt){return p.a().size(et.size).round(et.round).padding(et.padding)(b.c(Rt).sum(function(Ot){return Ot[ht]}))},wt=St(Z),xt=dt[0],ft=dt[1];return wt.each(function(Bt){Bt[xt]=[Bt.x0,Bt.x1,Bt.x1,Bt.x0],Bt[ft]=[Bt.y1,Bt.y1,Bt.y0,Bt.y0],["x0","x1","y0","y1"].forEach(function(Rt){dt.indexOf(Rt)===-1&&delete Bt[Rt]})}),Object(l.a)(wt)}var y=_("NzZ7");function n(Z){var et=Z.data,dt=Z.type,ht=Z.seriesField,St=Z.colorField,wt=Z.hierarchyConfig,xt={partition:j,treemap:y.a},ft=xt[dt](et,Object(rt.a)(Object(rt.a)({},wt),{type:"hierarchy."+dt,field:ht,as:["x","y"]})),Bt=[];return ft.forEach(function(Rt){var Ot,X,ut,vt,pt;if(Rt.depth===0)return null;var Et=Object(rt.a)((Ot={},Ot[ht]=Rt.data[ht]||((ut=(X=Rt.parent)===null||X===void 0?void 0:X.data)===null||ut===void 0?void 0:ut[ht]),Ot[St]=Rt.data[St]||((pt=(vt=Rt.parent)===null||vt===void 0?void 0:vt.data)===null||pt===void 0?void 0:pt[St]),Ot),Rt);Et.ext=wt,Bt.push(Et)}),Bt}function s(Z){var et=Z.items,dt=Z.formatter,ht=Z.fields,St=et[0]||{},wt=St.color,xt=St.mappingData,ft=St.data,Bt=document.createElement("ul");Bt.className="g2-tooltip";var Rt="",Ot=function(ut,vt){var pt;return dt?dt(Object(rt.a)(Object(rt.a)({},ut),{field:vt})):{name:vt,value:(ut==null?void 0:ut[vt])||((pt=ut==null?void 0:ut.data)===null||pt===void 0?void 0:pt[vt])}};return ht.forEach(function(X){var ut=Ot(ft,X),vt=ut.name,pt=ut.value;Rt+=`<li class="g2-tooltip-list-item" data-index={index} style="margin-bottom:4px;display:flex;align-items: center;">
        <span style="background-color:`+((xt==null?void 0:xt.color)||wt)+`;" class="g2-tooltip-marker"></span>
        <span style="display:inline-flex;flex:1;justify-content:space-between">
        <span style="margin-right: 16px;">`+vt+`:</span>
        <span class="g2-tooltip-list-item-value">`+pt+`</span>
        </span>
    </li>`}),Bt.innerHTML=Rt,Bt}function h(Z){var et=Z.chart,dt=Z.options,ht=dt.color,St=dt.colorField,wt=dt.sunburstStyle,xt=n(dt);return et.data(xt),Object(e.f)(Object(a.b)({},Z,{options:{xField:"x",yField:"y",seriesField:St,polygon:{color:ht,style:wt}}})),Z}function M(Z){var et=Z.chart;return et.axis(!1),Z}function O(Z){var et=Z.chart;return et.legend(!1),Z}function T(Z){var et=Z.chart,dt=Z.options,ht=dt.label,St=dt.seriesField,wt=Object(a.c)(et,"polygon");if(!ht)wt.label(!1);else{var xt=ht.callback,ft=Object(rt.c)(ht,["callback"]);wt.label({fields:[St],callback:xt,cfg:Object(a.o)(ft)})}return Z}function v(Z){var et=Z.chart,dt=Z.options,ht=dt.innerRadius,St=dt.radius,wt=dt.reflect,xt=et.coordinate({type:"polar",cfg:{innerRadius:ht,radius:St}});return wt&&xt.reflect(wt),Z}function m(Z){var et=Z.chart,dt=Z.options,ht=dt.meta;return ht&&et.scale(ht),Z}function C(Z){var et=Z.chart,dt=Z.options,ht=dt.tooltip,St=dt.seriesField,wt=dt.colorField;return ht&&et.tooltip(Object(rt.a)(Object(rt.a)({},ht),{customContent:ht&&ht.customContent?ht.customContent:function(xt,ft){return s({value:xt,items:ft,formatter:ht&&(ht==null?void 0:ht.formatter),fields:ht&&ht.fields||[St,wt]})}})),Z}function D(Z){return Object(a.e)(h,r.j,M,m,O,v,C,T,r.c,r.a,Object(r.b)())(Z)}var Y=function(Z){Object(rt.b)(et,Z);function et(){var dt=Z!==null&&Z.apply(this,arguments)||this;return dt.type="sunburst",dt}return et.prototype.getDefaultOptions=function(){return Object(a.b)({},Z.prototype.getDefaultOptions.call(this),{type:"partition",innerRadius:0,seriesField:"value",tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1}})},et.prototype.getSchemaAdaptor=function(){return D},et}(E.a)},cWXX:function(Fn,Gt,_){"use strict";var rt=_("cIOH"),a=_.n(rt),E=_("oIFs"),e=_.n(E)},chpo:function(Fn,Gt,_){"use strict";Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.default=void 0;var rt=1,a=function(){return"".concat(rt++)};Gt.default=a},cyZq:function(Fn,Gt,_){"use strict";_.d(Gt,"d",function(){return a}),_.d(Gt,"b",function(){return E}),_.d(Gt,"e",function(){return e}),_.d(Gt,"f",function(){return r}),_.d(Gt,"l",function(){return p}),_.d(Gt,"j",function(){return b});var rt=_("iTfj");_.d(Gt,"i",function(){return rt.isNil}),_.d(Gt,"k",function(){return rt.isString}),_.d(Gt,"h",function(){return rt.isFunction}),_.d(Gt,"g",function(){return rt.isArray}),_.d(Gt,"c",function(){return rt.each}),_.d(Gt,"o",function(){return rt.toRadian}),_.d(Gt,"m",function(){return rt.mod}),_.d(Gt,"n",function(){return rt.requestAnimationFrame}),_.d(Gt,"a",function(){return rt.clearAnimationFrame});function a(){return window?window.devicePixelRatio:1}function E(S,l,A,j){var y=S-A,n=l-j;return Math.sqrt(y*y+n*n)}function e(S,l,A,j,y,n){return y>=S&&y<=S+A&&n>=l&&n<=l+j}function r(S,l){return!(l.minX>S.maxX||l.maxX<S.minX||l.minY>S.maxY||l.maxY<S.minY)}function p(S,l){return!S||!l?S||l:{minX:Math.min(S.minX,l.minX),minY:Math.min(S.minY,l.minY),maxX:Math.max(S.maxX,l.maxX),maxY:Math.max(S.maxY,l.maxY)}}function b(S,l){return S[0]===l[0]&&S[1]===l[1]}},de35:function(Fn,Gt,_){"use strict";var rt=_("mrSG"),a=_("fIp6"),E=_("iTfj"),e=_("5UbV"),r=_("NmWf"),p=function(b){Object(rt.b)(S,b);function S(){return b!==null&&b.apply(this,arguments)||this}return S.prototype.getDefaultCfg=function(){var l=b.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},l),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},S.prototype.getContainer=function(){return this.get("container")},S.prototype.show=function(){var l=this.get("container");l.style.display="",this.set("visible",!0)},S.prototype.hide=function(){var l=this.get("container");l.style.display="none",this.set("visible",!1)},S.prototype.setCapture=function(l){var A=this.getContainer(),j=l?"auto":"none";A.style.pointerEvents=j,this.set("capture",l)},S.prototype.getBBox=function(){var l=this.getContainer(),A=parseFloat(l.style.left)||0,j=parseFloat(l.style.top)||0;return Object(e.b)(A,j,l.clientWidth,l.clientHeight)},S.prototype.clear=function(){var l=this.get("container");Object(e.a)(l)},S.prototype.destroy=function(){this.removeEvent(),this.removeDom(),b.prototype.destroy.call(this)},S.prototype.init=function(){b.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},S.prototype.initCapture=function(){this.setCapture(this.get("capture"))},S.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},S.prototype.initDom=function(){},S.prototype.initContainer=function(){var l=this.get("container");if(Object(E.isNil)(l)){l=this.createDom();var A=this.get("parent");Object(E.isString)(A)&&(A=document.getElementById(A),this.set("parent",A)),A.appendChild(l),this.set("container",l)}else Object(E.isString)(l)&&(l=document.getElementById(l),this.set("container",l));this.get("parent")||this.set("parent",l.parentNode)},S.prototype.resetStyles=function(){var l=this.get("domStyles"),A=this.get("defaultStyles");l?l=Object(E.deepMix)({},A,l):l=A,this.set("domStyles",l)},S.prototype.applyStyles=function(){var l=this.get("domStyles");if(!!l){var A=this.getContainer();this.applyChildrenStyles(A,l);var j=this.get("containerClassName");if(j&&Object(e.h)(A,j)){var y=l[j];Object(a.e)(A,y)}}},S.prototype.applyChildrenStyles=function(l,A){Object(E.each)(A,function(j,y){var n=l.getElementsByClassName(y);Object(E.each)(n,function(s){Object(a.e)(s,j)})})},S.prototype.applyStyle=function(l,A){var j=this.get("domStyles");Object(a.e)(A,j[l])},S.prototype.createDom=function(){var l=this.get("containerTpl");return Object(a.b)(l)},S.prototype.initEvent=function(){},S.prototype.removeDom=function(){var l=this.get("container");l&&l.parentNode&&l.parentNode.removeChild(l)},S.prototype.removeEvent=function(){},S.prototype.updateInner=function(l){Object(E.hasKey)(l,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},S.prototype.resetPosition=function(){},S}(r.a);Gt.a=p},dt0z:function(Fn,Gt,_){var rt=_("zoYe");function a(E){return E==null?"":rt(E)}Fn.exports=a},e0ae:function(Fn,Gt,_){"use strict";(function(rt){_.d(Gt,"a",function(){return n});var a=function(){for(var m=0,C=0,D=arguments.length;C<D;C++)m+=arguments[C].length;for(var Y=Array(m),Z=0,C=0;C<D;C++)for(var et=arguments[C],dt=0,ht=et.length;dt<ht;dt++,Z++)Y[Z]=et[dt];return Y},E=function(){function m(C,D,Y){this.name=C,this.version=D,this.os=Y,this.type="browser"}return m}(),e=function(){function m(C){this.version=C,this.type="node",this.name="node",this.os=rt.platform}return m}(),r=function(){function m(C,D,Y,Z){this.name=C,this.version=D,this.os=Y,this.bot=Z,this.type="bot-device"}return m}(),p=function(){function m(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return m}(),b=function(){function m(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return m}(),S=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,l=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,A=3,j=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",S]],y=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function n(m){return m?M(m):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new b:typeof navigator!="undefined"?M(navigator.userAgent):T()}function s(m){return m!==""&&j.reduce(function(C,D){var Y=D[0],Z=D[1];if(C)return C;var et=Z.exec(m);return!!et&&[Y,et]},!1)}function h(m){var C=s(m);return C?C[0]:null}function M(m){var C=s(m);if(!C)return null;var D=C[0],Y=C[1];if(D==="searchbot")return new p;var Z=Y[1]&&Y[1].split(/[._]/).slice(0,3);Z?Z.length<A&&(Z=a(Z,v(A-Z.length))):Z=[];var et=Z.join("."),dt=O(m),ht=l.exec(m);return ht&&ht[1]?new r(D,et,dt,ht[1]):new E(D,et,dt)}function O(m){for(var C=0,D=y.length;C<D;C++){var Y=y[C],Z=Y[0],et=Y[1],dt=et.exec(m);if(dt)return Z}return null}function T(){var m=typeof rt!="undefined"&&rt.version;return m?new e(rt.version.slice(1)):null}function v(m){for(var C=[],D=0;D<m;D++)C.push("0");return C}}).call(this,_("Q2Ig"))},eHqw:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return C});var rt=_("mrSG"),a=_("zJSt"),E=_("KMYG"),e=_("w02o"),r=_("YuPD"),p=_("iTfj"),b=_("NzZ7");function S(D){return Object(p.isArray)(D)?D.findIndex(function(Y){return Y.type==="treemap-drill-down"})>-1:!1}function l(D,Y){var Z=S(D);return Z?D.map(function(et){return et.type==="treemap-drill-down"?Object(r.b)({},et,{cfg:{hierarchyConfig:Y}}):et}):D}function A(D){var Y=D.data,Z=D.colorField,et=D.openDrillDown,dt=D.hierarchyConfig,ht=dt===void 0?{}:dt,St=Object(b.a)(Y,Object(rt.a)(Object(rt.a)({},ht),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),wt=[];return St.forEach(function(xt){if(xt.depth===0||et&&xt.depth!==1||!et&&xt.children)return null;var ft=Object.assign({},xt.data,{x:xt.x,y:xt.y,depth:xt.depth,value:xt.value});if(!xt.data[Z]&&xt.parent){var Bt=xt.ancestors().find(function(Rt){return Rt.data[Z]});ft[Z]=Bt==null?void 0:Bt.data[Z]}else ft[Z]=xt.data[Z];wt.push(ft)}),wt}function j(D){var Y=D.options,Z=Y.colorField;return Object(r.b)({options:{colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapResquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1,fields:["name","value",Z],formatter:function(dt){return{name:dt.name,value:dt.value}}},interactions:[{type:"view-zoom"},{type:"treemap-element-zoom"}]}},D)}function y(D){var Y=D.chart,Z=D.options,et=Z.color,dt=Z.colorField,ht=Z.rectStyle,St=A({data:Z.data,colorField:Z.colorField,openDrillDown:S(Z.interactions)});return Y.data(St),Object(E.a)(Object(r.b)({},D,{options:{xField:"x",yField:"y",seriesField:dt,rawFields:["value"],polygon:{color:et,style:ht}}})),D}function n(D){var Y=D.chart;return Y.axis(!1),D}function s(D){var Y=D.chart,Z=D.options,et=Z.interactions,dt=Z.hierarchyConfig;return Object(e.c)({chart:Y,options:{interactions:l(et,dt)}}),D}function h(D){return Object(r.e)(j,y,n,e.j,e.d,e.k,s,e.a,Object(e.b)())(D)}var M=_("Ihc8"),O=function(D){Object(rt.b)(Y,D);function Y(){var Z=D!==null&&D.apply(this,arguments)||this;return Z.cacheDataStack=[],Z}return Y.prototype.drill=function(Z){console.log(this.context);var et=this.context.view,dt=et.getData(),ht=et.getGroupScales(),St=Object(p.get)(et,["interactions","treemap-drill-down","cfg","hierarchyConfig"],{}),wt=A({data:Z,colorField:Object(p.get)(ht,[0,"field"]),openDrillDown:!0,hierarchyConfig:St});et.changeData(wt),this.cacheDataStack.push(dt)},Y.prototype.click=function(){var Z=Object(p.get)(this.context,["event","data","data"]);if(!Z)return!1;this.drill(Z)},Y.prototype.reset=function(){var Z=this.context.view;if(!(!Object(p.isArray)(this.cacheDataStack)||this.cacheDataStack.length<=0)){var et=this.cacheDataStack.splice(this.cacheDataStack.length-1,1);Z.changeData(et[0])}},Y}(M.Action);function T(D){var Y=Object(p.get)(D,["event","data","data"],{});return Object(p.isArray)(Y.children)&&Y.children.length>0&&Y.depth===1}function v(D){if(!D||!D.getAction)return!1;var Y=D.getAction("treemap-drill-down-action");if(!Y)return!1;var Z=Y.cacheDataStack;return Object(p.isArray)(Z)&&Z.length>0}Object(M.registerAction)("treemap-drill-down-action",O),Object(M.registerInteraction)("treemap-drill-down",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:pointer"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"element:click",isEnable:T,action:["treemap-drill-down-action:click","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["treemap-drill-down-action:reset"]},{trigger:"reset-button:click",action:["reset-button:hide"],isEnable:function(Y){return!v(Y)}}]});var m=_("hag6"),C=function(D){Object(rt.b)(Y,D);function Y(){var Z=D!==null&&D.apply(this,arguments)||this;return Z.type="treemap",Z}return Y.prototype.getSchemaAdaptor=function(){return h},Y}(a.a)},eUgh:function(Fn,Gt){function _(rt,a){for(var E=-1,e=rt==null?0:rt.length,r=Array(e);++E<e;)r[E]=a(rt[E],E,rt);return r}Fn.exports=_},ek7X:function(Fn,Gt,_){"use strict";var rt=_("q1tI"),a={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z"}}]},name:"caret-up",theme:"outlined"},E=a,e=_("6VBw"),r=function(S,l){return rt.createElement(e.a,Object.assign({},S,{ref:l,icon:E}))};r.displayName="CaretUpOutlined";var p=Gt.a=rt.forwardRef(r)},f6Jy:function(Fn,Gt,_){"use strict";var rt="*",a=function(){function E(){this._events={}}return E.prototype.on=function(e,r,p){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:r,once:!!p}),this},E.prototype.once=function(e,r){return this.on(e,r,!0),this},E.prototype.emit=function(e){for(var r=this,p=[],b=1;b<arguments.length;b++)p[b-1]=arguments[b];var S=this._events[e]||[],l=this._events[rt]||[],A=function(y){for(var n=y.length,s=0;s<n;s++)if(!!y[s]){var h=y[s],M=h.callback,O=h.once;O&&(y.splice(s,1),y.length===0&&delete r._events[e],n--,s--),M.apply(r,p)}};A(S),A(l)},E.prototype.off=function(e,r){if(!e)this._events={};else if(!r)delete this._events[e];else{for(var p=this._events[e]||[],b=p.length,S=0;S<b;S++)p[S].callback===r&&(p.splice(S,1),b--,S--);p.length===0&&delete this._events[e]}return this},E.prototype.getEvents=function(){return this._events},E}();Gt.a=a},fD4D:function(Fn,Gt,_){"use strict";var rt=_("ShmH"),a=_.n(rt);a.a.version="4.1.7",Gt.default=a.a;var E="4.1.7"},fFDA:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return dt});var rt=_("mrSG"),a=_("iTfj"),E=_("MeYt"),e={opacity:0},r={stroke:"#C5C5C5",strokeOpacity:.85},p={fill:"#CACED4",opacity:.85},b=_("LvGN"),S=_("8vsG");function l(St){return Object(a.map)(St,function(wt,xt){var ft=xt===0?"M":"L",Bt=wt[0],Rt=wt[1];return[ft,Bt,Rt]})}function A(St){return l(St)}function j(St){if(St.length<=2)return A(St);var wt=[];Object(a.each)(St,function(Ot){Object(a.isEqual)(Ot,wt.slice(wt.length-2))||wt.push(Ot[0],Ot[1])});var xt=Object(b.a)(wt,!1),ft=Object(a.head)(St),Bt=ft[0],Rt=ft[1];return xt.unshift(["M",Bt,Rt]),xt}function y(St,wt,xt,ft){ft===void 0&&(ft=!0);var Bt=new S.b({values:St}),Rt=new S.a({values:Object(a.map)(St,function(X,ut){return ut})}),Ot=Object(a.map)(St,function(X,ut){return[Rt.scale(ut)*wt,xt-Bt.scale(X)*xt]});return ft?j(Ot):A(Ot)}function n(St,wt){var xt=new S.b({values:St}),ft=Math.max(0,xt.min);return wt-xt.scale(ft)*wt}function s(St,wt,xt,ft){var Bt=Object(rt.d)(St),Rt=n(ft,xt);return Bt.push(["L",wt,Rt]),Bt.push(["L",0,Rt]),Bt.push(["Z"]),Bt}var h=function(St){Object(rt.b)(wt,St);function wt(){return St!==null&&St.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var xt=St.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},xt),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:e,lineStyle:r,areaStyle:p})},wt.prototype.renderInner=function(xt){var ft=this.cfg,Bt=ft.width,Rt=ft.height,Ot=ft.data,X=ft.smooth,ut=ft.isArea,vt=ft.backgroundStyle,pt=ft.lineStyle,Et=ft.areaStyle;this.addShape(xt,{id:this.getElementId("background"),type:"rect",attrs:Object(rt.a)({x:0,y:0,width:Bt,height:Rt},vt)});var q=y(Ot,Bt,Rt,X);if(this.addShape(xt,{id:this.getElementId("line"),type:"path",attrs:Object(rt.a)({path:q},pt)}),ut){var st=s(q,Bt,Rt,Ot);this.addShape(xt,{id:this.getElementId("area"),type:"path",attrs:Object(rt.a)({path:st},Et)})}},wt.prototype.applyOffset=function(){var xt=this.cfg,ft=xt.x,Bt=xt.y;this.moveElementTo(this.get("group"),{x:ft,y:Bt})},wt}(E.a),M=h,O={fill:"#416180",opacity:.05},T={fill:"#5B8FF9",opacity:.15,cursor:"move"},v=10,m={width:v,height:24},C={textBaseline:"middle",fill:"#000",opacity:.45},D="sliderchange",Y={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},Z=function(St){Object(rt.b)(wt,St);function wt(){return St!==null&&St.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var xt=St.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},xt),{name:"handler",x:0,y:0,width:10,height:24,style:Y})},wt.prototype.renderInner=function(xt){var ft=this.cfg,Bt=ft.width,Rt=ft.height,Ot=ft.style,X=Ot.fill,ut=Ot.stroke,vt=Ot.radius,pt=Ot.opacity,Et=Ot.cursor;this.addShape(xt,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:Bt,height:Rt,fill:X,stroke:ut,radius:vt,opacity:pt,cursor:Et}});var q=1/3*Bt,st=2/3*Bt,it=1/4*Rt,z=3/4*Rt;this.addShape(xt,{id:this.getElementId("line-left"),type:"line",attrs:{x1:q,y1:it,x2:q,y2:z,stroke:ut,cursor:Et}}),this.addShape(xt,{id:this.getElementId("line-right"),type:"line",attrs:{x1:st,y1:it,x2:st,y2:z,stroke:ut,cursor:Et}})},wt.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},wt.prototype.initEvent=function(){this.bindEvents()},wt.prototype.bindEvents=function(){var xt=this;this.get("group").on("mouseenter",function(){var ft=xt.get("style").highLightFill;xt.getElementByLocalId("background").attr("fill",ft),xt.draw()}),this.get("group").on("mouseleave",function(){var ft=xt.get("style").fill;xt.getElementByLocalId("background").attr("fill",ft),xt.draw()})},wt.prototype.draw=function(){var xt=this.get("container").get("canvas");xt&&xt.draw()},wt}(E.a),et=Z,dt=function(St){Object(rt.b)(wt,St);function wt(){var xt=St!==null&&St.apply(this,arguments)||this;return xt.onMouseDown=function(ft){return function(Bt){xt.currentTarget=ft;var Rt=Bt.originalEvent;Rt.stopPropagation(),Rt.preventDefault(),xt.prevX=Object(a.get)(Rt,"touches.0.pageX",Rt.pageX),xt.prevY=Object(a.get)(Rt,"touches.0.pageY",Rt.pageY);var Ot=xt.getContainerDOM();Ot.addEventListener("mousemove",xt.onMouseMove),Ot.addEventListener("mouseup",xt.onMouseUp),Ot.addEventListener("mouseleave",xt.onMouseUp),Ot.addEventListener("touchmove",xt.onMouseMove),Ot.addEventListener("touchend",xt.onMouseUp),Ot.addEventListener("touchcancel",xt.onMouseUp)}},xt.onMouseMove=function(ft){var Bt=xt.cfg.width,Rt=[xt.get("start"),xt.get("end")];ft.stopPropagation(),ft.preventDefault();var Ot=Object(a.get)(ft,"touches.0.pageX",ft.pageX),X=Object(a.get)(ft,"touches.0.pageY",ft.pageY),ut=Ot-xt.prevX,vt=xt.adjustOffsetRange(ut/Bt);xt.updateStartEnd(vt),xt.updateUI(xt.getElementByLocalId("foreground"),xt.getElementByLocalId("minText"),xt.getElementByLocalId("maxText")),xt.prevX=Ot,xt.prevY=X,xt.draw(),xt.emit(D,[xt.get("start"),xt.get("end")].sort()),xt.delegateEmit("valuechanged",{originValue:Rt,value:[xt.get("start"),xt.get("end")]})},xt.onMouseUp=function(){xt.currentTarget&&(xt.currentTarget=void 0);var ft=xt.getContainerDOM();ft&&(ft.removeEventListener("mousemove",xt.onMouseMove),ft.removeEventListener("mouseup",xt.onMouseUp),ft.removeEventListener("mouseleave",xt.onMouseUp),ft.removeEventListener("touchmove",xt.onMouseMove),ft.removeEventListener("touchend",xt.onMouseUp),ft.removeEventListener("touchcancel",xt.onMouseUp))},xt}return wt.prototype.setRange=function(xt,ft){this.set("minLimit",xt),this.set("maxLimit",ft);var Bt=this.get("start"),Rt=this.get("end"),Ot=Object(a.clamp)(Bt,xt,ft),X=Object(a.clamp)(Rt,xt,ft);!this.get("isInit")&&(Bt!==Ot||Rt!==X)&&this.setValue([Ot,X])},wt.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},wt.prototype.setValue=function(xt){var ft=this.getRange();if(Object(a.isArray)(xt)&&xt.length===2){var Bt=[this.get("start"),this.get("end")];this.update({start:Object(a.clamp)(xt[0],ft.min,ft.max),end:Object(a.clamp)(xt[1],ft.min,ft.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:Bt,value:xt})}},wt.prototype.getValue=function(){return[this.get("start"),this.get("end")]},wt.prototype.getDefaultCfg=function(){var xt=St.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},xt),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:O,foregroundStyle:T,handlerStyle:m,textStyle:C}})},wt.prototype.update=function(xt){var ft=xt.start,Bt=xt.end,Rt=Object(rt.a)({},xt);Object(a.isNil)(ft)||(Rt.start=Object(a.clamp)(ft,0,1)),Object(a.isNil)(Bt)||(Rt.end=Object(a.clamp)(Bt,0,1)),St.prototype.update.call(this,Rt),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler")),this.trend=this.getChildComponentById(this.getElementId("trend"))},wt.prototype.init=function(){this.set("start",Object(a.clamp)(this.get("start"),0,1)),this.set("end",Object(a.clamp)(this.get("end"),0,1)),St.prototype.init.call(this)},wt.prototype.render=function(){St.prototype.render.call(this),this.updateUI(this.getElementByLocalId("foreground"),this.getElementByLocalId("minText"),this.getElementByLocalId("maxText"))},wt.prototype.renderInner=function(xt){var ft=this.cfg,Bt=ft.start,Rt=ft.end,Ot=ft.width,X=ft.height,ut=ft.trendCfg,vt=ut===void 0?{}:ut,pt=ft.minText,Et=ft.maxText,q=ft.backgroundStyle,st=q===void 0?{}:q,it=ft.foregroundStyle,z=it===void 0?{}:it,P=ft.textStyle,H=P===void 0?{}:P,k=ft.handlerStyle,d=k===void 0?{}:k,g=Bt*Ot,F=Rt*Ot;Object(a.size)(Object(a.get)(vt,"data"))&&(this.trend=this.addComponent(xt,Object(rt.a)({component:h,id:this.getElementId("trend"),x:0,y:0,width:Ot,height:X},vt))),this.addShape(xt,{id:this.getElementId("background"),type:"rect",attrs:Object(rt.a)({x:0,y:0,width:Ot,height:X},st)});var V=this.addShape(xt,{id:this.getElementId("minText"),type:"text",attrs:Object(rt.a)({y:X/2,textAlign:"right",text:pt,silent:!1},H)}),tt=this.addShape(xt,{id:this.getElementId("maxText"),type:"text",attrs:Object(rt.a)({y:X/2,textAlign:"left",text:Et,silent:!1},H)}),ot=this.addShape(xt,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:Object(rt.a)({y:0,height:X},z)}),at=Object(a.get)(d,"height",24);this.minHandler=this.addComponent(xt,Object(rt.a)({component:Z,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(X-at)/2,width:Ot,height:at,cursor:"ew-resize"},d)),this.maxHandler=this.addComponent(xt,Object(rt.a)({component:Z,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(X-at)/2,width:Ot,height:at,cursor:"ew-resize"},d))},wt.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},wt.prototype.initEvent=function(){this.bindEvents()},wt.prototype.updateUI=function(xt,ft,Bt){var Rt=this.cfg,Ot=Rt.start,X=Rt.end,ut=Rt.width,vt=Rt.minText,pt=Rt.maxText,Et=Rt.handlerStyle,q=Rt.height,st=Ot*ut,it=X*ut;this.trend&&(this.trend.update({width:ut,height:q}),this.get("updateAutoRender")||this.trend.render()),xt.attr("x",st),xt.attr("width",it-st);var z=Object(a.get)(Et,"width",v);ft.attr("text",vt),Bt.attr("text",pt);var P=this._dodgeText([st,it],ft,Bt),H=P[0],k=P[1];this.minHandler&&(this.minHandler.update({x:st-z/2}),this.get("updateAutoRender")||this.minHandler.render()),Object(a.each)(H,function(d,g){return ft.attr(g,d)}),this.maxHandler&&(this.maxHandler.update({x:it-z/2}),this.get("updateAutoRender")||this.maxHandler.render()),Object(a.each)(k,function(d,g){return Bt.attr(g,d)})},wt.prototype.bindEvents=function(){var xt=this.get("group");xt.on("handler-min:mousedown",this.onMouseDown("minHandler")),xt.on("handler-min:touchstart",this.onMouseDown("minHandler")),xt.on("handler-max:mousedown",this.onMouseDown("maxHandler")),xt.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var ft=xt.findById(this.getElementId("foreground"));ft.on("mousedown",this.onMouseDown("foreground")),ft.on("touchstart",this.onMouseDown("foreground"))},wt.prototype.adjustOffsetRange=function(xt){var ft=this.cfg,Bt=ft.start,Rt=ft.end;switch(this.currentTarget){case"minHandler":{var Ot=0-Bt,X=1-Bt;return Math.min(X,Math.max(Ot,xt))}case"maxHandler":{var Ot=0-Rt,X=1-Rt;return Math.min(X,Math.max(Ot,xt))}case"foreground":{var Ot=0-Bt,X=1-Rt;return Math.min(X,Math.max(Ot,xt))}}},wt.prototype.updateStartEnd=function(xt){var ft=this.cfg,Bt=ft.start,Rt=ft.end;switch(this.currentTarget){case"minHandler":Bt+=xt;break;case"maxHandler":Rt+=xt;break;case"foreground":Bt+=xt,Rt+=xt;break}this.set("start",Bt),this.set("end",Rt)},wt.prototype._dodgeText=function(xt,ft,Bt){var Rt,Ot,X=this.cfg,ut=X.handlerStyle,vt=X.width,pt=2,Et=Object(a.get)(ut,"width",v),q=xt[0],st=xt[1],it=!1;q>st&&(Rt=[st,q],q=Rt[0],st=Rt[1],Ot=[Bt,ft],ft=Ot[0],Bt=Ot[1],it=!0);var z=ft.getBBox(),P=Bt.getBBox(),H=z.width>q-pt?{x:q+Et/2+pt,textAlign:"left"}:{x:q-Et/2-pt,textAlign:"right"},k=P.width>vt-st-pt?{x:st-Et/2-pt,textAlign:"right"}:{x:st+Et/2+pt,textAlign:"left"};return it?[k,H]:[H,k]},wt.prototype.draw=function(){var xt=this.get("container"),ft=xt&&xt.get("canvas");ft&&ft.draw()},wt.prototype.getContainerDOM=function(){var xt=this.get("container"),ft=xt&&xt.get("canvas");return ft&&ft.get("container")},wt}(E.a),ht=dt},fIp6:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return rt}),_.d(Gt,"b",function(){return b}),_.d(Gt,"c",function(){return A}),_.d(Gt,"d",function(){return y}),_.d(Gt,"e",function(){return s});function rt(h,M,O){if(h){if(typeof h.addEventListener=="function")return h.addEventListener(M,O,!1),{remove:function(){h.removeEventListener(M,O,!1)}};if(typeof h.attachEvent=="function")return h.attachEvent("on"+M,O),{remove:function(){h.detachEvent("on"+M,O)}}}}var a,E,e,r;function p(){a=document.createElement("table"),E=document.createElement("tr"),e=/^\s*<(\w+|!)[^>]*>/,r={tr:document.createElement("tbody"),tbody:a,thead:a,tfoot:a,td:E,th:E,"*":document.createElement("div")}}function b(h){a||p();var M=e.test(h)&&RegExp.$1;(!M||!(M in r))&&(M="*");var O=r[M];h=h.replace(/(^\s*)|(\s*$)/g,""),O.innerHTML=""+h;var T=O.childNodes[0];return O.removeChild(T),T}function S(h,M,O){var T;try{T=window.getComputedStyle?window.getComputedStyle(h,null)[M]:h.style[M]}catch(v){}finally{T=T===void 0?O:T}return T}function l(h,M){var O=S(h,"height",M);return O==="auto"&&(O=h.offsetHeight),parseFloat(O)}function A(h,M){var O=l(h,M),T=parseFloat(S(h,"borderTopWidth"))||0,v=parseFloat(S(h,"paddingTop"))||0,m=parseFloat(S(h,"paddingBottom"))||0,C=parseFloat(S(h,"borderBottomWidth"))||0,D=parseFloat(S(h,"marginTop"))||0,Y=parseFloat(S(h,"marginBottom"))||0;return O+T+C+v+m+D+Y}function j(h,M){var O=S(h,"width",M);return O==="auto"&&(O=h.offsetWidth),parseFloat(O)}function y(h,M){var O=j(h,M),T=parseFloat(S(h,"borderLeftWidth"))||0,v=parseFloat(S(h,"paddingLeft"))||0,m=parseFloat(S(h,"paddingRight"))||0,C=parseFloat(S(h,"borderRightWidth"))||0,D=parseFloat(S(h,"marginRight"))||0,Y=parseFloat(S(h,"marginLeft"))||0;return O+T+C+v+m+Y+D}function n(){return window.devicePixelRatio?window.devicePixelRatio:2}function s(h,M){if(h)for(var O in M)M.hasOwnProperty(O)&&(h.style[O]=M[O]);return h}},fP0w:function(Fn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"Line",function(){return pt}),_.d(Gt,"Circle",function(){return q}),_.d(Gt,"Base",function(){return n});var rt={};_.r(rt),_.d(rt,"getDefault",function(){return M}),_.d(rt,"ellipsisHead",function(){return O}),_.d(rt,"ellipsisTail",function(){return T}),_.d(rt,"ellipsisMiddle",function(){return v});var a={};_.r(a),_.d(a,"getDefault",function(){return dt}),_.d(a,"reserveFirst",function(){return ht}),_.d(a,"reserveLast",function(){return St}),_.d(a,"reserveBoth",function(){return wt}),_.d(a,"equidistance",function(){return xt}),_.d(a,"equidistanceWithReverseBoth",function(){return ft});var E={};_.r(E),_.d(E,"getDefault",function(){return Ot}),_.d(E,"fixedAngle",function(){return X}),_.d(E,"unfixedAngle",function(){return ut});var e={};_.r(e),_.d(e,"autoHide",function(){return a}),_.d(e,"autoRotate",function(){return E}),_.d(e,"autoEllipsis",function(){return rt});var r=_("mrSG"),p=_("6JdA"),b=_("iTfj"),S=_("MeYt"),l=_("jqgP"),A=_("l3hu"),j=_("L16w"),y=function(st){Object(r.b)(it,st);function it(){return st!==null&&st.apply(this,arguments)||this}return it.prototype.getDefaultCfg=function(){var z=st.prototype.getDefaultCfg.call(this);return Object(r.a)(Object(r.a)({},z),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:j.a.lineColor}},tickLine:{style:{lineWidth:1,stroke:j.a.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:j.a.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:j.a.textColor,fontFamily:j.a.fontFamily,fontWeight:"normal"},offset:10},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:j.a.textColor,textBaseline:"middle",fontFamily:j.a.fontFamily,textAlign:"center"}},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:j.a.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},it.prototype.renderInner=function(z){this.get("line")&&this.drawLine(z),this.drawTicks(z),this.get("title")&&this.drawTitle(z)},it.prototype.isList=function(){return!0},it.prototype.getItems=function(){return this.get("ticks")},it.prototype.setItems=function(z){this.update({ticks:z})},it.prototype.updateItem=function(z,P){Object(b.mix)(z,P),this.clear(),this.render()},it.prototype.clearItems=function(){var z=this.getElementByLocalId("label-group");z&&z.clear()},it.prototype.setItemState=function(z,P,H){z[P]=H,this.updateTickStates(z)},it.prototype.hasState=function(z,P){return!!z[P]},it.prototype.getItemStates=function(z){var P=this.get("tickStates"),H=[];return Object(b.each)(P,function(k,d){z[d]&&H.push(d)}),H},it.prototype.clearItemsState=function(z){var P=this,H=this.getItemsByState(z);Object(b.each)(H,function(k){P.setItemState(k,z,!1)})},it.prototype.getItemsByState=function(z){var P=this,H=this.getItems();return Object(b.filter)(H,function(k){return P.hasState(k,z)})},it.prototype.getSidePoint=function(z,P){var H=this,k=H.getSideVector(P,z);return{x:z.x+k[0],y:z.y+k[1]}},it.prototype.getTextAnchor=function(z){var P;return Object(b.isNumberEqual)(z[0],0)?P="center":z[0]>0?P="start":z[0]<0&&(P="end"),P},it.prototype.getTextBaseline=function(z){var P;return Object(b.isNumberEqual)(z[1],0)?P="middle":z[1]>0?P="top":z[1]<0&&(P="bottom"),P},it.prototype.processOverlap=function(z){},it.prototype.drawLine=function(z){var P=this.getLinePath(),H=this.get("line");this.addShape(z,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:Object(b.mix)({path:P},H.style)})},it.prototype.getTickLineItems=function(z){var P=this,H=[],k=this.get("tickLine"),d=k.alignTick,g=k.length,F=1,V=z.length;return V>=2&&(F=z[1].value-z[0].value),Object(b.each)(z,function(tt){var ot=tt.point;d||(ot=P.getTickPoint(tt.value-F/2));var at=P.getSidePoint(ot,g);H.push({startPoint:ot,tickValue:tt.value,endPoint:at,tickId:tt.id,id:"tickline-"+tt.id})}),H},it.prototype.getSubTickLineItems=function(z){var P=[],H=this.get("subTickLine"),k=H.count,d=z.length;if(d>=2)for(var g=0;g<d-1;g++)for(var F=z[g],V=z[g+1],tt=0;tt<k;tt++){var ot=(tt+1)/(k+1),at=(1-ot)*F.tickValue+ot*V.tickValue,At=this.getTickPoint(at),yt=this.getSidePoint(At,H.length);P.push({startPoint:At,endPoint:yt,tickValue:at,id:"sub-"+F.id+"-"+tt})}return P},it.prototype.getTickLineAttrs=function(z,P,H,k){var d=this.get(P).style,g={points:[z.startPoint,z.endPoint]},F=Object(b.get)(this.get("theme"),["tickLine","style"],{});d=Object(b.isFunction)(d)?Object(b.mix)({},F,d(g,H,k)):d;var V=z.startPoint,tt=z.endPoint;return Object(r.a)({x1:V.x,y1:V.y,x2:tt.x,y2:tt.y},d)},it.prototype.drawTick=function(z,P,H,k,d){this.addShape(P,{type:"line",id:this.getElementId(z.id),name:"axis-"+H,attrs:this.getTickLineAttrs(z,H,k,d)})},it.prototype.drawTickLines=function(z){var P=this,H=this.get("ticks"),k=this.get("subTickLine"),d=this.getTickLineItems(H),g=this.addGroup(z,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),F=this.get("tickLine");if(Object(b.each)(d,function(tt,ot){if(F.displayWithLabel){var at=P.getElementId("label-"+tt.tickId);z.findById(at)&&P.drawTick(tt,g,"tickLine",ot,d)}else P.drawTick(tt,g,"tickLine",ot,d)}),k){var V=this.getSubTickLineItems(d);Object(b.each)(V,function(tt,ot){P.drawTick(tt,g,"subTickLine",ot,V)})}},it.prototype.processTicks=function(){var z=this,P=this.get("ticks");Object(b.each)(P,function(H){H.point=z.getTickPoint(H.value),Object(b.isNil)(H.id)&&(H.id=H.name)})},it.prototype.drawTicks=function(z){var P=this;this.optimizeTicks(),this.processTicks(),this.get("label")&&this.drawLabels(z),this.get("tickLine")&&this.drawTickLines(z);var H=this.get("ticks");Object(b.each)(H,function(k){P.applyTickStates(k,z)})},it.prototype.optimizeTicks=function(){var z=this.get("optimize"),P=this.get("ticks");if(z&&z.enable&&z.threshold>0){var H=Object(b.size)(P);if(H>z.threshold){var k=Math.ceil(H/z.threshold),d=P.filter(function(g,F){return F%k==0});this.set("ticks",d),this.set("originalTicks",P)}}},it.prototype.getLabelAttrs=function(z,P,H){var k=this.get("label"),d=k.offset,g=k.rotate,F=k.formatter,V=this.getSidePoint(z.point,d),tt=this.getSideVector(d,V),ot=F?F(z.name,z,P):z.name,at=k.style;at=Object(b.isFunction)(at)?Object(b.get)(this.get("theme"),["label","style"],{}):at;var At=Object(b.mix)({x:V.x,y:V.y,text:ot,textAlign:this.getTextAnchor(tt),textBaseline:this.getTextBaseline(tt)},at);return g&&(At.matrix=Object(l.e)(V,g)),At},it.prototype.drawLabels=function(z){var P=this,H=this.get("ticks"),k=this.addGroup(z,{name:"axis-label-group",id:this.getElementId("label-group")});Object(b.each)(H,function(at,At){P.addShape(k,{type:"text",name:"axis-label",id:P.getElementId("label-"+at.id),attrs:P.getLabelAttrs(at,At,H),delegateObject:{tick:at,item:at,index:At}})}),this.processOverlap(k);var d=k.getChildren(),g=Object(b.get)(this.get("theme"),["label","style"],{}),F=this.get("label"),V=F.style,tt=F.formatter;if(Object(b.isFunction)(V)){var ot=d.map(function(at){return Object(b.get)(at.get("delegateObject"),"tick")});Object(b.each)(d,function(at,At){var yt=at.get("delegateObject").tick,gt=tt?tt(yt.name,yt,At):yt.name,bt=Object(b.mix)({},g,V(gt,At,ot));at.attr(bt)})}},it.prototype.getTitleAttrs=function(){var z=this.get("title"),P=z.style,H=z.position,k=z.offset,d=z.spacing,g=d===void 0?0:d,F=z.autoRotate,V=P.fontSize,tt=.5;H==="start"?tt=0:H==="end"&&(tt=1);var ot=this.getTickPoint(tt),at=this.getSidePoint(ot,k||g+V/2),At=Object(b.mix)({x:at.x,y:at.y,text:z.text},P),yt=z.rotate,gt=yt;if(Object(b.isNil)(yt)&&F){var bt=this.getAxisVector(ot),Tt=[1,0];gt=p.a.angleTo(bt,Tt,!0)}if(gt){var Dt=Object(l.e)(at,gt);At.matrix=Dt}return At},it.prototype.drawTitle=function(z){this.addShape(z,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:this.getTitleAttrs()})},it.prototype.applyTickStates=function(z,P){var H=this.getItemStates(z);if(H.length){var k=this.get("tickStates"),d=this.getElementId("label-"+z.id),g=P.findById(d);if(g){var F=Object(A.a)(z,"label",k);F&&g.attr(F)}var V=this.getElementId("tickline-"+z.id),tt=P.findById(V);if(tt){var ot=Object(A.a)(z,"tickLine",k);ot&&tt.attr(ot)}}},it.prototype.updateTickStates=function(z){var P=this.getItemStates(z),H=this.get("tickStates"),k=this.get("label"),d=this.getElementByLocalId("label-"+z.id),g=this.get("tickLine"),F=this.getElementByLocalId("tickline-"+z.id);if(P.length){if(d){var V=Object(A.a)(z,"label",H);V&&d.attr(V)}if(F){var tt=Object(A.a)(z,"tickLine",H);tt&&F.attr(tt)}}else d&&d.attr(k.style),F&&F.attr(g.style)},it}(S.a),n=y,s=_("BgvD");function h(st,it,z,P){var H=it.getChildren(),k=!1;return Object(b.each)(H,function(d){var g=Object(s.a)(st,d,z,P);k=k||g}),k}function M(){return T}function O(st,it,z){return h(st,it,z,"head")}function T(st,it,z){return h(st,it,z,"tail")}function v(st,it,z){return h(st,it,z,"middle")}var m=_("5UbV");function C(st){var it=st.attr("matrix");return it&&it[0]!==1}function D(st){var it=C(st)?Object(l.d)(st.attr("matrix")):0;return it%360}function Y(st,it,z,P){var H=!1,k=D(it),d=Math.abs(st?z.attr("y")-it.attr("y"):z.attr("x")-it.attr("x")),g=(st?z.attr("y")>it.attr("y"):z.attr("x")>it.attr("x"))?it.getBBox():z.getBBox();if(st){var F=Math.abs(Math.cos(k));Object(m.i)(F,0,Math.PI/180)?H=g.width+P>d:H=g.height/F+P>d}else{var F=Math.abs(Math.sin(k));Object(m.i)(F,0,Math.PI/180)?H=g.width+P>d:H=g.height/F+P>d}return H}function Z(st,it,z,P){var H=(P==null?void 0:P.minGap)||0,k=it.getChildren().slice().filter(function(yt){return yt.get("visible")});if(!k.length)return!1;var d=!1;z&&k.reverse();for(var g=k.length,F=k[0],V=F,tt=1;tt<g;tt++){var ot=k[tt],at=ot.getBBox(),At=Y(st,V,ot,H);At?(ot.hide(),d=!0):V=ot}return d}function et(st,it,z){var P=(z==null?void 0:z.minGap)||0,H=it.getChildren().slice();if(H.length<2)return!1;var k=!1,d=H[0],g=d.getBBox(),F=H[1],V=H.length,tt=D(d),ot=Math.abs(st?F.attr("y")-d.attr("y"):F.attr("x")-d.attr("x")),at=0;if(st){var At=Math.abs(Math.cos(tt));if(Object(m.i)(At,0,Math.PI/180)){var yt=Object(s.b)(H);at=(yt+P)/ot}else at=(g.height/At+P)/ot}else{var At=Math.abs(Math.sin(tt));if(Object(m.i)(At,0,Math.PI/180)){var yt=Object(s.b)(H);at=(yt+P)/ot}else at=(g.height/At+P)/ot}if(at>1){at=Math.ceil(at);for(var gt=0;gt<V;gt++)gt%at!=0&&(H[gt].hide(),k=!0)}return k}function dt(){return xt}function ht(st,it,z,P){return Z(st,it,!1,P)}function St(st,it,z,P){return Z(st,it,!0,P)}function wt(st,it,z,P){var H=(P==null?void 0:P.minGap)||0,k=it.getChildren().slice();if(k.length<=2)return!1;for(var d=!1,g=k.length,F=k[0],V=k[g-1],tt=F,ot=1;ot<g-1;ot++){var at=k[ot],At=at.getBBox(),yt=Y(st,tt,at,H);yt?(at.hide(),d=!0):tt=at}var gt=Y(st,tt,V,H);return gt&&(tt.hide(),d=!0),d}function xt(st,it,z,P){var H=et(st,it,P);return Z(st,it,!1)&&(H=!0),H}function ft(st,it,z,P){var H=it.getChildren().slice(),k=et(st,it,P);if(H.length>2){var d=H[0],g=H[H.length-1];d.get("visible")||(d.show(),Z(st,it,!1,P)&&(k=!0)),g.get("visible")||(g.show(),Z(st,it,!0,P)&&(k=!0))}return k}function Bt(st,it){Object(b.each)(st,function(z){var P=z.attr("x"),H=z.attr("y"),k=Object(l.e)({x:P,y:H},it);z.attr("matrix",k)})}function Rt(st,it,z,P){var H=it.getChildren();if(!H.length||!st&&H.length<2)return!1;var k=Object(s.b)(H),d=!1;if(st)d=!!z&&k>z;else{var g=Math.abs(H[1].attr("x")-H[0].attr("x"));d=k>g}if(d){var F=P(z,k);Bt(H,F)}return d}function Ot(){return X}function X(st,it,z,P){return Rt(st,it,z,function(){return Object(b.isNumber)(P)?P:st?j.a.verticalAxisRotate:j.a.horizontalAxisRotate})}function ut(st,it,z){return Rt(st,it,z,function(P,H){if(!P)return st?j.a.verticalAxisRotate:j.a.horizontalAxisRotate;if(st)return-Math.acos(P/H);var k=0;return P>H?k=Math.PI/4:(k=Math.asin(P/H),k>Math.PI/4&&(k=Math.PI/4)),k})}var vt=function(st){Object(r.b)(it,st);function it(){return st!==null&&st.apply(this,arguments)||this}return it.prototype.getDefaultCfg=function(){var z=st.prototype.getDefaultCfg.call(this);return Object(r.a)(Object(r.a)({},z),{type:"line",locationType:"region",start:null,end:null})},it.prototype.getLinePath=function(){var z=this.get("start"),P=this.get("end"),H=[];return H.push(["M",z.x,z.y]),H.push(["L",P.x,P.y]),H},it.prototype.getInnerLayoutBBox=function(){var z=this.get("start"),P=this.get("end"),H=st.prototype.getInnerLayoutBBox.call(this),k=Math.min(z.x,P.x,H.x),d=Math.min(z.y,P.y,H.y),g=Math.max(z.x,P.x,H.maxX),F=Math.max(z.y,P.y,H.maxY);return{x:k,y:d,minX:k,minY:d,maxX:g,maxY:F,width:g-k,height:F-d}},it.prototype.isVertical=function(){var z=this.get("start"),P=this.get("end");return Object(b.isNumberEqual)(z.x,P.x)},it.prototype.isHorizontal=function(){var z=this.get("start"),P=this.get("end");return Object(b.isNumberEqual)(z.y,P.y)},it.prototype.getTickPoint=function(z){var P=this,H=P.get("start"),k=P.get("end"),d=k.x-H.x,g=k.y-H.y;return{x:H.x+d*z,y:H.y+g*z}},it.prototype.getSideVector=function(z){var P=this.getAxisVector(),H=p.c.normalize([0,0],P),k=this.get("verticalFactor"),d=[H[1],H[0]*-1];return p.c.scale([0,0],d,z*k)},it.prototype.getAxisVector=function(){var z=this.get("start"),P=this.get("end");return[P.x-z.x,P.y-z.y]},it.prototype.processOverlap=function(z){var P=this,H=this.isVertical(),k=this.isHorizontal();if(!(!H&&!k)){var d=this.get("label"),g=this.get("title"),F=this.get("verticalLimitLength"),V=d.offset,tt=F,ot=0,at=0;g&&(ot=g.style.fontSize,at=g.spacing),tt&&(tt=tt-V-at-ot);var At=this.get("overlapOrder");if(Object(b.each)(At,function(bt){d[bt]&&P.canProcessOverlap(bt)&&P.autoProcessOverlap(bt,d[bt],z,tt)}),g&&Object(b.isNil)(g.offset)){var yt=z.getCanvasBBox(),gt=H?yt.width:yt.height;g.offset=V+gt+at+ot/2}}},it.prototype.canProcessOverlap=function(z){var P=this.get("label");return z==="autoRotate"?Object(b.isNil)(P.rotate):!0},it.prototype.autoProcessOverlap=function(z,P,H,k){var d=this,g=this.isVertical(),F=!1,V=e[z];if(P===!0){var tt=this.get("label");F=V.getDefault()(g,H,k)}else if(Object(b.isFunction)(P))F=P(g,H,k);else if(Object(b.isObject)(P)){var ot=P;V[ot.type]&&(F=V[ot.type](g,H,k,ot.cfg))}else V[P]&&(F=V[P](g,H,k));if(z==="autoRotate"){if(F){var at=H.getChildren(),At=this.get("verticalFactor");Object(b.each)(at,function(gt){var bt=gt.attr("textAlign");if(bt==="center"){var Tt=At>0?"end":"start";gt.attr("textAlign",Tt)}})}}else if(z==="autoHide"){var yt=H.getChildren().slice(0);Object(b.each)(yt,function(gt){gt.get("visible")||(d.get("isRegister")&&d.unregisterElement(gt),gt.remove())})}},it}(n),pt=vt,Et=function(st){Object(r.b)(it,st);function it(){return st!==null&&st.apply(this,arguments)||this}return it.prototype.getDefaultCfg=function(){var z=st.prototype.getDefaultCfg.call(this);return Object(r.a)(Object(r.a)({},z),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},it.prototype.getLinePath=function(){var z=this.get("center"),P=z.x,H=z.y,k=this.get("radius"),d=k,g=this.get("startAngle"),F=this.get("endAngle"),V=[];if(Math.abs(F-g)===Math.PI*2)V=[["M",P,H-d],["A",k,d,0,1,1,P,H+d],["A",k,d,0,1,1,P,H-d],["Z"]];else{var tt=this.getCirclePoint(g),ot=this.getCirclePoint(F),at=Math.abs(F-g)>Math.PI?1:0,At=g>F?0:1;V=[["M",P,H],["L",tt.x,tt.y],["A",k,d,0,at,At,ot.x,ot.y],["L",P,H]]}return V},it.prototype.getTickPoint=function(z){var P=this.get("startAngle"),H=this.get("endAngle"),k=P+(H-P)*z;return this.getCirclePoint(k)},it.prototype.getSideVector=function(z,P){var H=this.get("center"),k=[P.x-H.x,P.y-H.y],d=this.get("verticalFactor"),g=p.c.length(k);return p.c.scale(k,k,d*z/g),k},it.prototype.getAxisVector=function(z){var P=this.get("center"),H=[z.x-P.x,z.y-P.y];return[H[1],-1*H[0]]},it.prototype.getCirclePoint=function(z,P){var H=this.get("center");return P=P||this.get("radius"),{x:H.x+Math.cos(z)*P,y:H.y+Math.sin(z)*P}},it}(n),q=Et},"h4/5":function(Fn,Gt){},hJqF:function(Fn,Gt,_){"use strict";_.d(Gt,"d",function(){return S}),_.d(Gt,"b",function(){return l}),_.d(Gt,"c",function(){return A}),_.d(Gt,"a",function(){return n});var rt=_("mrSG"),a=_("iTfj"),E=_("w02o"),e=_("YuPD"),r=_("tKoa"),p=_("DyAw");function b(s){var h=s.chart,M=s.options,O=M.data,T=M.color,v=M.lineStyle,m=M.lineShape,C=M.point,D=M.seriesField;h.data(O);var Y=Object(e.b)({},s,{options:{shapeField:D,line:{color:T,style:v,shape:m},point:C&&Object(rt.a)({color:T,shape:"circle"},C),label:void 0}}),Z=Object(e.b)({},Y,{options:{tooltip:!1}});return Object(r.d)(Y),Object(r.e)(Z),s}function S(s){var h,M,O=s.options,T=O.xAxis,v=O.yAxis,m=O.xField,C=O.yField,D=O.data;return Object(e.e)(Object(E.f)((h={},h[m]=T,h[C]=v,h),(M={},M[m]={type:"cat"},M[C]=Object(p.a)(D,C),M)))(s)}function l(s){var h=s.chart,M=s.options,O=M.xAxis,T=M.yAxis,v=M.xField,m=M.yField;return O===!1?h.axis(v,!1):h.axis(v,O),T===!1?h.axis(m,!1):h.axis(m,T),s}function A(s){var h=s.chart,M=s.options,O=M.legend,T=M.seriesField;return O&&T?h.legend(T,O):O===!1&&h.legend(!1),s}function j(s){var h=s.chart,M=s.options,O=M.label,T=M.yField,v=Object(e.c)(h,"line");if(!O)v.label(!1);else{var m=O.callback,C=Object(rt.c)(O,["callback"]);v.label({fields:[T],callback:m,cfg:Object(rt.a)({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Object(e.o)(C))})}return s}function y(s){var h=s.chart,M=s.options,O=M.isStack;return O&&Object(a.each)(h.geometries,function(T){T.adjust("stack")}),s}function n(s){return Object(e.e)(b,S,y,E.j,l,A,E.k,j,E.h,E.c,E.a,Object(E.b)(),E.e)(s)}},hag6:function(Fn,Gt,_){"use strict";var rt=_("Ihc8");Object(rt.registerInteraction)("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]})},iTfj:function(Fn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"contains",function(){return e}),_.d(Gt,"includes",function(){return e}),_.d(Gt,"difference",function(){return S}),_.d(Gt,"find",function(){return St}),_.d(Gt,"findIndex",function(){return xt}),_.d(Gt,"firstValue",function(){return Bt}),_.d(Gt,"flatten",function(){return Ot}),_.d(Gt,"flattenDeep",function(){return ut}),_.d(Gt,"getRange",function(){return pt}),_.d(Gt,"pull",function(){return z}),_.d(Gt,"pullAt",function(){return k}),_.d(Gt,"reduce",function(){return g}),_.d(Gt,"remove",function(){return V}),_.d(Gt,"sortBy",function(){return at}),_.d(Gt,"union",function(){return bt}),_.d(Gt,"uniq",function(){return yt}),_.d(Gt,"valuesOfKey",function(){return Tt}),_.d(Gt,"head",function(){return Dt}),_.d(Gt,"last",function(){return Ut}),_.d(Gt,"startsWith",function(){return Vt}),_.d(Gt,"endsWith",function(){return re}),_.d(Gt,"filter",function(){return p}),_.d(Gt,"every",function(){return ye}),_.d(Gt,"some",function(){return Re}),_.d(Gt,"group",function(){return kn}),_.d(Gt,"groupBy",function(){return fn}),_.d(Gt,"groupToMap",function(){return Cn}),_.d(Gt,"getWrapBehavior",function(){return Tn}),_.d(Gt,"wrapBehavior",function(){return Kn}),_.d(Gt,"number2color",function(){return nr}),_.d(Gt,"parseRadius",function(){return Sr}),_.d(Gt,"clamp",function(){return ti}),_.d(Gt,"fixedBase",function(){return Fi}),_.d(Gt,"isDecimal",function(){return _i}),_.d(Gt,"isEven",function(){return Vi}),_.d(Gt,"isInteger",function(){return jr}),_.d(Gt,"isNegative",function(){return pr}),_.d(Gt,"isNumberEqual",function(){return Br}),_.d(Gt,"isOdd",function(){return Xr}),_.d(Gt,"isPositive",function(){return ni}),_.d(Gt,"maxBy",function(){return fi}),_.d(Gt,"minBy",function(){return $r}),_.d(Gt,"mod",function(){return Qr}),_.d(Gt,"toDegree",function(){return bi}),_.d(Gt,"toInteger",function(){return zi}),_.d(Gt,"toRadian",function(){return Wi}),_.d(Gt,"forIn",function(){return Zi}),_.d(Gt,"has",function(){return Pi}),_.d(Gt,"hasKey",function(){return no}),_.d(Gt,"hasValue",function(){return uo}),_.d(Gt,"keys",function(){return m}),_.d(Gt,"isMatch",function(){return D}),_.d(Gt,"values",function(){return ao}),_.d(Gt,"lowerCase",function(){return Kt}),_.d(Gt,"lowerFirst",function(){return Oe}),_.d(Gt,"substitute",function(){return On}),_.d(Gt,"upperCase",function(){return Xn}),_.d(Gt,"upperFirst",function(){return rn}),_.d(Gt,"getType",function(){return vr}),_.d(Gt,"isArguments",function(){return rr}),_.d(Gt,"isArray",function(){return h}),_.d(Gt,"isArrayLike",function(){return a}),_.d(Gt,"isBoolean",function(){return Ar}),_.d(Gt,"isDate",function(){return xr}),_.d(Gt,"isError",function(){return Ir}),_.d(Gt,"isFunction",function(){return y}),_.d(Gt,"isFinite",function(){return Lr}),_.d(Gt,"isNil",function(){return s}),_.d(Gt,"isNull",function(){return Dr}),_.d(Gt,"isNumber",function(){return si}),_.d(Gt,"isObject",function(){return M}),_.d(Gt,"isObjectLike",function(){return Z}),_.d(Gt,"isPlainObject",function(){return dt}),_.d(Gt,"isPrototype",function(){return ii}),_.d(Gt,"isRegExp",function(){return Ui}),_.d(Gt,"isString",function(){return tt}),_.d(Gt,"isType",function(){return j}),_.d(Gt,"isUndefined",function(){return Bi}),_.d(Gt,"isElement",function(){return ve}),_.d(Gt,"requestAnimationFrame",function(){return G}),_.d(Gt,"clearAnimationFrame",function(){return B}),_.d(Gt,"augment",function(){return Jt}),_.d(Gt,"clone",function(){return se}),_.d(Gt,"debounce",function(){return Ee}),_.d(Gt,"memoize",function(){return un}),_.d(Gt,"deepMix",function(){return Se}),_.d(Gt,"each",function(){return T}),_.d(Gt,"extend",function(){return ue}),_.d(Gt,"indexOf",function(){return Dn}),_.d(Gt,"isEmpty",function(){return Ze}),_.d(Gt,"isEqual",function(){return N}),_.d(Gt,"isEqualWith",function(){return mt}),_.d(Gt,"map",function(){return me}),_.d(Gt,"mapValues",function(){return de}),_.d(Gt,"mix",function(){return lt}),_.d(Gt,"assign",function(){return lt}),_.d(Gt,"get",function(){return he}),_.d(Gt,"set",function(){return ce}),_.d(Gt,"pick",function(){return ze}),_.d(Gt,"throttle",function(){return Ve}),_.d(Gt,"toArray",function(){return ke}),_.d(Gt,"toString",function(){return xo}),_.d(Gt,"uniqueId",function(){return De}),_.d(Gt,"noop",function(){return cn}),_.d(Gt,"identity",function(){return hn}),_.d(Gt,"size",function(){return nn}),_.d(Gt,"Cache",function(){return Sn});var rt=function(le){return le!==null&&typeof le!="function"&&isFinite(le.length)},a=rt,E=function(le,Le){return a(le)?le.indexOf(Le)>-1:!1},e=E,r=function(le,Le){if(!a(le))return le;for(var Be=[],en=0;en<le.length;en++){var sn=le[en];Le(sn,en)&&Be.push(sn)}return Be},p=r,b=function(le,Le){return Le===void 0&&(Le=[]),p(le,function(Be){return!e(Le,Be)})},S=b,l={}.toString,A=function(le,Le){return l.call(le)==="[object "+Le+"]"},j=A,y=function(Pe){return j(Pe,"Function")},n=function(le){return le==null},s=n,h=function(Pe){return Array.isArray?Array.isArray(Pe):j(Pe,"Array")},M=function(Pe){var le=typeof Pe;return Pe!==null&&le==="object"||le==="function"};function O(Pe,le){if(!!Pe){var Le;if(h(Pe))for(var Be=0,en=Pe.length;Be<en&&(Le=le(Pe[Be],Be),Le!==!1);Be++);else if(M(Pe)){for(var sn in Pe)if(Pe.hasOwnProperty(sn)&&(Le=le(Pe[sn],sn),Le===!1))break}}}var T=O,v=Object.keys?function(Pe){return Object.keys(Pe)}:function(Pe){var le=[];return T(Pe,function(Le,Be){y(Pe)&&Be==="prototype"||le.push(Be)}),le},m=v;function C(Pe,le){var Le=m(le),Be=Le.length;if(s(Pe))return!Be;for(var en=0;en<Be;en+=1){var sn=Le[en];if(le[sn]!==Pe[sn]||!(sn in Pe))return!1}return!0}var D=C,Y=function(le){return typeof le=="object"&&le!==null},Z=Y,et=function(le){if(!Z(le)||!j(le,"Object"))return!1;if(Object.getPrototypeOf(le)===null)return!0;for(var Le=le;Object.getPrototypeOf(Le)!==null;)Le=Object.getPrototypeOf(Le);return Object.getPrototypeOf(le)===Le},dt=et;function ht(Pe,le){if(!h(Pe))return null;var Le;if(y(le)&&(Le=le),dt(le)&&(Le=function(sn){return D(sn,le)}),Le){for(var Be=0;Be<Pe.length;Be+=1)if(Le(Pe[Be]))return Pe[Be]}return null}var St=ht;function wt(Pe,le,Le){Le===void 0&&(Le=0);for(var Be=Le;Be<Pe.length;Be++)if(le(Pe[Be],Be))return Be;return-1}var xt=wt,ft=function(le,Le){for(var Be=null,en=0;en<le.length;en++){var sn=le[en],Ue=sn[Le];if(!s(Ue)){h(Ue)?Be=Ue[0]:Be=Ue;break}}return Be},Bt=ft,Rt=function(le){if(!h(le))return[];for(var Le=[],Be=0;Be<le.length;Be++)Le=Le.concat(le[Be]);return Le},Ot=Rt,X=function Pe(le,Le){if(Le===void 0&&(Le=[]),!h(le))Le.push(le);else for(var Be=0;Be<le.length;Be+=1)Pe(le[Be],Le);return Le},ut=X,vt=function(le){var Le=le.filter(function(ln){return!isNaN(ln)});if(!Le.length)return{min:0,max:0};if(h(le[0])){for(var Be=[],en=0;en<le.length;en++)Be=Be.concat(le[en]);Le=Be}var sn=Math.max.apply(null,Le),Ue=Math.min.apply(null,Le);return{min:Ue,max:sn}},pt=vt,Et=Array.prototype,q=Et.splice,st=Et.indexOf,it=function(le){for(var Le=[],Be=1;Be<arguments.length;Be++)Le[Be-1]=arguments[Be];for(var en=0;en<Le.length;en++)for(var sn=Le[en],Ue=-1;(Ue=st.call(le,sn))>-1;)q.call(le,Ue,1);return le},z=it,P=Array.prototype.splice,H=function(le,Le){if(!a(le))return[];for(var Be=le?Le.length:0,en=Be-1;Be--;){var sn=void 0,Ue=Le[Be];(Be===en||Ue!==sn)&&(sn=Ue,P.call(le,Ue,1))}return le},k=H,d=function(le,Le,Be){if(!h(le)&&!dt(le))return le;var en=Be;return T(le,function(sn,Ue){en=Le(en,sn,Ue)}),en},g=d,F=function(le,Le){var Be=[];if(!a(le))return Be;for(var en=-1,sn=[],Ue=le.length;++en<Ue;){var ln=le[en];Le(ln,en,le)&&(Be.push(ln),sn.push(en))}return k(le,sn),Be},V=F,tt=function(Pe){return j(Pe,"String")};function ot(Pe,le){var Le;if(y(le))Le=function(sn,Ue){return le(sn)-le(Ue)};else{var Be=[];tt(le)?Be.push(le):h(le)&&(Be=le),Le=function(sn,Ue){for(var ln=0;ln<Be.length;ln+=1){var mn=Be[ln];if(sn[mn]>Ue[mn])return 1;if(sn[mn]<Ue[mn])return-1}return 0}}return Pe.sort(Le),Pe}var at=ot,At=function(le){var Le=[];return T(le,function(Be){e(Le,Be)||Le.push(Be)}),Le},yt=At,gt=function(){for(var le=[],Le=0;Le<arguments.length;Le++)le[Le]=arguments[Le];return yt([].concat.apply([],le))},bt=gt,Tt=function(Pe,le){for(var Le=[],Be={},en=0;en<Pe.length;en++){var sn=Pe[en],Ue=sn[le];if(!s(Ue)){h(Ue)||(Ue=[Ue]);for(var ln=0;ln<Ue.length;ln++){var mn=Ue[ln];Be[mn]||(Le.push(mn),Be[mn]=!0)}}}return Le};function Dt(Pe){if(a(Pe))return Pe[0]}function Ut(Pe){if(a(Pe)){var le=Pe;return le[le.length-1]}}function jt(Pe,le){return h(Pe)||tt(Pe)?Pe[0]===le:!1}var Vt=jt;function Ht(Pe,le){return h(Pe)||tt(Pe)?Pe[Pe.length-1]===le:!1}var re=Ht,pe=function(le,Le){for(var Be=0;Be<le.length;Be++)if(!Le(le[Be],Be))return!1;return!0},ye=pe,we=function(le,Le){for(var Be=0;Be<le.length;Be++)if(Le(le[Be],Be))return!0;return!1},Re=we,He=Object.prototype.hasOwnProperty;function pn(Pe,le){if(!le||!h(Pe))return{};for(var Le={},Be=y(le)?le:function(ln){return ln[le]},en,sn=0;sn<Pe.length;sn++){var Ue=Pe[sn];en=Be(Ue),He.call(Le,en)?Le[en].push(Ue):Le[en]=[Ue]}return Le}var fn=pn,Rn=function(le,Le){if(!Le)return{0:le};if(!y(Le)){var Be=h(Le)?Le:Le.replace(/\s+/g,"").split("*");Le=function(Ue){for(var ln="_",mn=0,Wn=Be.length;mn<Wn;mn++)ln+=Ue[Be[mn]]&&Ue[Be[mn]].toString();return ln}}var en=fn(le,Le);return en},Cn=Rn,kn=function(Pe,le){if(!le)return[Pe];var Le=Cn(Pe,le),Be=[];for(var en in Le)Be.push(Le[en]);return Be};function Mn(Pe,le){return Pe["_wrap_"+le]}var Tn=Mn;function Un(Pe,le){if(Pe["_wrap_"+le])return Pe["_wrap_"+le];var Le=function(en){Pe[le](en)};return Pe["_wrap_"+le]=Le,Le}var Kn=Un,tr={};function or(Pe){var le=tr[Pe];if(!le){for(var Le=Pe.toString(16),Be=Le.length;Be<6;Be++)Le="0"+Le;le="#"+Le,tr[Pe]=le}return le}var nr=or;function er(Pe){var le=0,Le=0,Be=0,en=0;return h(Pe)?Pe.length===1?le=Le=Be=en=Pe[0]:Pe.length===2?(le=Be=Pe[0],Le=en=Pe[1]):Pe.length===3?(le=Pe[0],Le=en=Pe[1],Be=Pe[2]):(le=Pe[0],Le=Pe[1],Be=Pe[2],en=Pe[3]):le=Le=Be=en=Pe,{r1:le,r2:Le,r3:Be,r4:en}}var Sr=er,Vr=function(le,Le,Be){return le<Le?Le:le>Be?Be:le},ti=Vr,hi=function(le,Le){var Be=Le.toString(),en=Be.indexOf(".");if(en===-1)return Math.round(le);var sn=Be.substr(en+1).length;return sn>20&&(sn=20),parseFloat(le.toFixed(sn))},Fi=hi,to=function(le){return j(le,"Number")},si=to,Ti=function(le){return si(le)&&le%1!=0},_i=Ti,Li=function(le){return si(le)&&le%2==0},Vi=Li,ro=Number.isInteger?Number.isInteger:function(Pe){return si(Pe)&&Pe%1==0},jr=ro,Ji=function(le){return si(le)&&le<0},pr=Ji,Yr=1e-5;function Br(Pe,le,Le){return Le===void 0&&(Le=Yr),Math.abs(Pe-le)<Le}var Nr=function(le){return si(le)&&le%2!=0},Xr=Nr,Kr=function(le){return si(le)&&le>0},ni=Kr,fi=function(Pe,le){if(!!h(Pe)){var Le=Pe[0],Be;y(le)?Be=le(Pe[0]):Be=Pe[0][le];var en;return T(Pe,function(sn){y(le)?en=le(sn):en=sn[le],en>Be&&(Le=sn,Be=en)}),Le}},$r=function(Pe,le){if(!!h(Pe)){var Le=Pe[0],Be;y(le)?Be=le(Pe[0]):Be=Pe[0][le];var en;return T(Pe,function(sn){y(le)?en=le(sn):en=sn[le],en<Be&&(Le=sn,Be=en)}),Le}},ci=function(le,Le){return(le%Le+Le)%Le},Qr=ci,gi=180/Math.PI,Oi=function(le){return gi*le},bi=Oi,zi=parseInt,Qi=Math.PI/180,io=function(le){return Qi*le},Wi=io,Zi=T,Pi=function(Pe,le){return Pe.hasOwnProperty(le)},no=Pi,Mo=Object.values?function(Pe){return Object.values(Pe)}:function(Pe){var le=[];return T(Pe,function(Le,Be){y(Pe)&&Be==="prototype"||le.push(Le)}),le},ao=Mo,uo=function(Pe,le){return e(ao(Pe),le)},xo=function(Pe){return s(Pe)?"":Pe.toString()},oe=function(le){return xo(le).toLowerCase()},Kt=oe,te=function(le){var Le=xo(le);return Le.charAt(0).toLowerCase()+Le.substring(1)},Oe=te;function Qe(Pe,le){return!Pe||!le?Pe:Pe.replace(/\\?\{([^{}]+)\}/g,function(Le,Be){return Le.charAt(0)==="\\"?Le.slice(1):le[Be]===void 0?"":le[Be]})}var On=Qe,Vn=function(le){return xo(le).toUpperCase()},Xn=Vn,$e=function(le){var Le=xo(le);return Le.charAt(0).toUpperCase()+Le.substring(1)},rn=$e,on={}.toString,$n=function(le){return on.call(le).replace(/^\[object /,"").replace(/]$/,"")},vr=$n,ar=function(le){return j(le,"Arguments")},rr=ar,Fr=function(le){return j(le,"Boolean")},Ar=Fr,wr=function(le){return j(le,"Date")},xr=wr,Er=function(le){return j(le,"Error")},Ir=Er,Lr=function(Pe){return si(Pe)&&isFinite(Pe)},Pr=function(le){return le===null},Dr=Pr,ri=Object.prototype,vi=function(le){var Le=le&&le.constructor,Be=typeof Le=="function"&&Le.prototype||ri;return le===Be},ii=vi,Si=function(le){return j(le,"RegExp")},Ui=Si,Yi=function(le){return le===void 0},Bi=Yi,Di=function(le){return le instanceof Element||le instanceof HTMLDocument},ve=Di;function G(Pe){var le=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Le){return setTimeout(Le,16)};return le(Pe)}function B(Pe){var le=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;le(Pe)}function $(Pe,le){for(var Le in le)le.hasOwnProperty(Le)&&Le!=="constructor"&&le[Le]!==void 0&&(Pe[Le]=le[Le])}function lt(Pe,le,Le,Be){return le&&$(Pe,le),Le&&$(Pe,Le),Be&&$(Pe,Be),Pe}var Ft=function(){for(var le=[],Le=0;Le<arguments.length;Le++)le[Le]=arguments[Le];for(var Be=le[0],en=1;en<le.length;en++){var sn=le[en];y(sn)&&(sn=sn.prototype),lt(Be.prototype,sn)}},Jt=Ft,ie=function Pe(le){if(typeof le!="object"||le===null)return le;var Le;if(h(le)){Le=[];for(var Be=0,en=le.length;Be<en;Be++)typeof le[Be]=="object"&&le[Be]!=null?Le[Be]=Pe(le[Be]):Le[Be]=le[Be]}else{Le={};for(var sn in le)typeof le[sn]=="object"&&le[sn]!=null?Le[sn]=Pe(le[sn]):Le[sn]=le[sn]}return Le},se=ie;function Ce(Pe,le,Le){var Be;return function(){var en=this,sn=arguments,Ue=function(){Be=null,Le||Pe.apply(en,sn)},ln=Le&&!Be;clearTimeout(Be),Be=setTimeout(Ue,le),ln&&Pe.apply(en,sn)}}var Ee=Ce,un=function(Pe,le){if(!y(Pe))throw new TypeError("Expected a function");var Le=function Be(){for(var en=[],sn=0;sn<arguments.length;sn++)en[sn]=arguments[sn];var Ue=le?le.apply(this,en):en[0],ln=Be.cache;if(ln.has(Ue))return ln.get(Ue);var mn=Pe.apply(this,en);return ln.set(Ue,mn),mn};return Le.cache=new Map,Le},xn=5;function zt(Pe,le,Le,Be){Le=Le||0,Be=Be||xn;for(var en in le)if(le.hasOwnProperty(en)){var sn=le[en];sn!==null&&dt(sn)?(dt(Pe[en])||(Pe[en]={}),Le<Be?zt(Pe[en],sn,Le+1,Be):Pe[en]=le[en]):h(sn)?(Pe[en]=[],Pe[en]=Pe[en].concat(sn)):sn!==void 0&&(Pe[en]=sn)}}var Yt=function(le){for(var Le=[],Be=1;Be<arguments.length;Be++)Le[Be-1]=arguments[Be];for(var en=0;en<Le.length;en+=1)zt(le,Le[en]);return le},Se=Yt,Wt=function(le,Le,Be,en){y(Le)||(Be=Le,Le=le,le=function(){});var sn=Object.create?function(ln,mn){return Object.create(ln,{constructor:{value:mn}})}:function(ln,mn){function Wn(){}Wn.prototype=ln;var An=new Wn;return An.constructor=mn,An},Ue=sn(Le.prototype,le);return le.prototype=lt(Ue,le.prototype),le.superclass=sn(Le.prototype,Le),lt(Ue,Be),lt(le,en),le},ue=Wt,vn=function(le,Le){if(!a(le))return-1;var Be=Array.prototype.indexOf;if(Be)return Be.call(le,Le);for(var en=-1,sn=0;sn<le.length;sn++)if(le[sn]===Le){en=sn;break}return en},Dn=vn,zn=Object.prototype.hasOwnProperty;function _n(Pe){if(s(Pe))return!0;if(a(Pe))return!Pe.length;var le=vr(Pe);if(le==="Map"||le==="Set")return!Pe.size;if(ii(Pe))return!Object.keys(Pe).length;for(var Le in Pe)if(zn.call(Pe,Le))return!1;return!0}var Ze=_n,Te=function Pe(le,Le){if(le===Le)return!0;if(!le||!Le||tt(le)||tt(Le))return!1;if(a(le)||a(Le)){if(le.length!==Le.length)return!1;for(var Be=!0,en=0;en<le.length&&(Be=Pe(le[en],Le[en]),!!Be);en++);return Be}if(Z(le)||Z(Le)){var sn=Object.keys(le),Ue=Object.keys(Le);if(sn.length!==Ue.length)return!1;for(var Be=!0,en=0;en<sn.length&&(Be=Pe(le[sn[en]],Le[sn[en]]),!!Be);en++);return Be}return!1},N=Te,mt=function(Pe,le,Le){return y(Le)?!!Le(Pe,le):N(Pe,le)},$t=function(le,Le){if(!a(le))return le;for(var Be=[],en=0;en<le.length;en++){var sn=le[en];Be.push(Le(sn,en))}return Be},me=$t,Zt=function(le){return le},de=function(Pe,le){le===void 0&&(le=Zt);var Le={};return M(Pe)&&!s(Pe)&&Object.keys(Pe).forEach(function(Be){Le[Be]=le(Pe[Be],Be)}),Le},he=function(Pe,le,Le){for(var Be=0,en=tt(le)?le.split("."):le;Pe&&Be<en.length;)Pe=Pe[en[Be++]];return Pe===void 0||Be<en.length?Le:Pe},ce=function(Pe,le,Le){var Be=Pe,en=tt(le)?le.split("."):le;return en.forEach(function(sn,Ue){Ue<en.length-1?(M(Be[sn])||(Be[sn]=si(en[Ue+1])?[]:{}),Be=Be[sn]):Be[sn]=Le}),Pe},Me=Object.prototype.hasOwnProperty,ze=function(Pe,le){if(Pe===null||!dt(Pe))return{};var Le={};return T(le,function(Be){Me.call(Pe,Be)&&(Le[Be]=Pe[Be])}),Le},Ve=function(Pe,le,Le){var Be,en,sn,Ue,ln=0;Le||(Le={});var mn=function(){ln=Le.leading===!1?0:Date.now(),Be=null,Ue=Pe.apply(en,sn),Be||(en=sn=null)},Wn=function(){var In=Date.now();!ln&&Le.leading===!1&&(ln=In);var lr=le-(In-ln);return en=this,sn=arguments,lr<=0||lr>le?(Be&&(clearTimeout(Be),Be=null),ln=In,Ue=Pe.apply(en,sn),Be||(en=sn=null)):!Be&&Le.trailing!==!1&&(Be=setTimeout(mn,lr)),Ue};return Wn.cancel=function(){clearTimeout(Be),ln=0,Be=en=sn=null},Wn},ke=function(Pe){return a(Pe)?Array.prototype.slice.call(Pe):[]},tn={},De=function(Pe){return Pe=Pe||"g",tn[Pe]?tn[Pe]+=1:tn[Pe]=1,Pe+tn[Pe]},cn=function(){},hn=function(Pe){return Pe};function nn(Pe){return s(Pe)?0:a(Pe)?Pe.length:Object.keys(Pe).length}var dn=function(){function Pe(){this.map={}}return Pe.prototype.has=function(le){return this.map[le]!==void 0},Pe.prototype.get=function(le,Le){var Be=this.map[le];return Be===void 0?Le:Be},Pe.prototype.set=function(le,Le){this.map[le]=Le},Pe.prototype.clear=function(){this.map={}},Pe.prototype.delete=function(le){delete this.map[le]},Pe.prototype.size=function(){return Object.keys(this.map).length},Pe}(),Sn=dn},j5sG:function(Fn,Gt,_){"use strict";Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.createSensor=void 0;var rt=a(_("NohK"));function a(e){return e&&e.__esModule?e:{default:e}}var E=function(r){var p=void 0,b=[],S=(0,rt.default)(function(){b.forEach(function(n){n(r)})}),l=function(){var s=new ResizeObserver(S);return s.observe(r),S(),s},A=function(s){p||(p=l()),b.indexOf(s)===-1&&b.push(s)},j=function(){p.disconnect(),b=[],p=void 0},y=function(s){var h=b.indexOf(s);h!==-1&&b.splice(h,1),b.length===0&&p&&j()};return{element:r,bind:A,destroy:j,unbind:y}};Gt.createSensor=E},jCWc:function(Fn,Gt,_){"use strict";var rt=_("cIOH"),a=_.n(rt),E=_("1GLa")},jqgP:function(Fn,Gt,_){"use strict";_.d(Gt,"e",function(){return E}),_.d(Gt,"f",function(){return e}),_.d(Gt,"d",function(){return r}),_.d(Gt,"a",function(){return b}),_.d(Gt,"b",function(){return S}),_.d(Gt,"c",function(){return l});var rt=_("6JdA"),a=[1,0,0,0,1,0,0,0,1];function E(A,j,y){if(y===void 0&&(y=a),!j)return null;var n=rt.a.transform(y,[["t",-A.x,-A.y],["r",j],["t",A.x,A.y]]);return n}function e(A,j){return!A.x&&!A.y?null:rt.a.transform(j||a,[["t",A.x,A.y]])}function r(A){var j=[1,0,0],y=[0,0,0];return rt.d.transformMat3(y,j,A),Math.atan2(y[1],y[0])}function p(A,j){var y=[0,0];return rt.c.transformMat3(y,j,A),y}function b(A,j){var y=p(A,[j.minX,j.minY]),n=p(A,[j.maxX,j.minY]),s=p(A,[j.minX,j.maxY]),h=p(A,[j.maxX,j.maxY]),M=Math.min(y[0],n[0],s[0],h[0]),O=Math.max(y[0],n[0],s[0],h[0]),T=Math.min(y[1],n[1],s[1],h[1]),v=Math.max(y[1],n[1],s[1],h[1]);return{x:M,y:T,minX:M,minY:T,maxX:O,maxY:v,width:O-M,height:v-T}}function S(A,j,y,n){if(j){var s=E({x:y,y:n},j,A.getMatrix());A.setMatrix(s)}}function l(A,j,y){var n=e({x:j,y});A.attr("matrix",n)}},kPKH:function(Fn,Gt,_){"use strict";var rt=_("rePB"),a=_("wx14"),E=_("U8pU"),e=_("q1tI"),r=_("TSYQ"),p=_.n(r),b=_("o/2+"),S=_("H84U"),l=function(h,M){var O={};for(var T in h)Object.prototype.hasOwnProperty.call(h,T)&&M.indexOf(T)<0&&(O[T]=h[T]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,T=Object.getOwnPropertySymbols(h);v<T.length;v++)M.indexOf(T[v])<0&&Object.prototype.propertyIsEnumerable.call(h,T[v])&&(O[T[v]]=h[T[v]]);return O};function A(h){return typeof h=="number"?"".concat(h," ").concat(h," auto"):/^\d+(\.\d+)?(px|em|rem|%)$/.test(h)?"0 0 ".concat(h):h}var j=["xs","sm","md","lg","xl","xxl"],y=e.forwardRef(function(h,M){var O,T=e.useContext(S.b),v=T.getPrefixCls,m=T.direction,C=e.useContext(b.a),D=C.gutter,Y=C.wrap,Z=h.prefixCls,et=h.span,dt=h.order,ht=h.offset,St=h.push,wt=h.pull,xt=h.className,ft=h.children,Bt=h.flex,Rt=h.style,Ot=l(h,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),X=v("col",Z),ut={};j.forEach(function(Et){var q,st={},it=h[Et];typeof it=="number"?st.span=it:Object(E.a)(it)==="object"&&(st=it||{}),delete Ot[Et],ut=Object(a.a)(Object(a.a)({},ut),(q={},Object(rt.a)(q,"".concat(X,"-").concat(Et,"-").concat(st.span),st.span!==void 0),Object(rt.a)(q,"".concat(X,"-").concat(Et,"-order-").concat(st.order),st.order||st.order===0),Object(rt.a)(q,"".concat(X,"-").concat(Et,"-offset-").concat(st.offset),st.offset||st.offset===0),Object(rt.a)(q,"".concat(X,"-").concat(Et,"-push-").concat(st.push),st.push||st.push===0),Object(rt.a)(q,"".concat(X,"-").concat(Et,"-pull-").concat(st.pull),st.pull||st.pull===0),Object(rt.a)(q,"".concat(X,"-rtl"),m==="rtl"),q))});var vt=p()(X,(O={},Object(rt.a)(O,"".concat(X,"-").concat(et),et!==void 0),Object(rt.a)(O,"".concat(X,"-order-").concat(dt),dt),Object(rt.a)(O,"".concat(X,"-offset-").concat(ht),ht),Object(rt.a)(O,"".concat(X,"-push-").concat(St),St),Object(rt.a)(O,"".concat(X,"-pull-").concat(wt),wt),O),xt,ut),pt=Object(a.a)({},Rt);return D&&(pt=Object(a.a)(Object(a.a)(Object(a.a)({},D[0]>0?{paddingLeft:D[0]/2,paddingRight:D[0]/2}:{}),D[1]>0?{paddingTop:D[1]/2,paddingBottom:D[1]/2}:{}),pt)),Bt&&(pt.flex=A(Bt),Bt==="auto"&&Y===!1&&!pt.minWidth&&(pt.minWidth=0)),e.createElement("div",Object(a.a)({},Ot,{style:pt,className:vt,ref:M}),ft)});y.displayName="Col";var n=y,s=Gt.a=n},kwiP:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return p});var rt=_("mrSG"),a=_("zJSt"),E=_("u9/z"),e=_("SZbK"),r=_("B3DA"),p=function(b){Object(rt.b)(S,b);function S(){var l=b!==null&&b.apply(this,arguments)||this;return l.type="process",l}return S.prototype.getDefaultOptions=function(){return{percent:.2,color:e.a,animation:!0}},S.prototype.changeData=function(l){this.updateOption({percent:l}),this.chart.changeData(Object(r.a)(l))},S.prototype.getSchemaAdaptor=function(){return E.a},S}(a.a)},l3hu:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return a});var rt=_("iTfj");function a(E,e,r){var p=e+"Style",b=null;return Object(rt.each)(r,function(S,l){E[l]&&S[p]&&(b||(b={}),Object(rt.mix)(b,S[p]))}),b}},lFe4:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return a});var rt=_("iTfj");function a(E){return Object(rt.map)(E||[],function(e,r){return{x:""+r,y:e}})}},lOPJ:function(Fn,Gt,_){"use strict";var rt=_("AA7f"),a=_("iTfj"),E=_("0Xep"),e=_("Qci9"),r=function(p){Object(rt.b)(b,p);function b(S){var l=p.call(this,S)||this;l.cacheMap={},l.adjustDataArray=[],l.mergeData=[];var A=S.marginRatio,j=A===void 0?E.d:A,y=S.dodgeRatio,n=y===void 0?E.b:y,s=S.dodgeBy,h=S.intervalPadding,M=S.dodgePadding,O=S.xDimensionLength,T=S.groupNum,v=S.defaultSize,m=S.maxColumnWidth,C=S.minColumnWidth,D=S.columnWidthRatio;return l.marginRatio=j,l.dodgeRatio=n,l.dodgeBy=s,l.intervalPadding=h,l.dodgePadding=M,l.xDimensionLegenth=O,l.groupNum=T,l.defaultSize=v,l.maxColumnWidth=m,l.minColumnWidth=C,l.columnWidthRatio=D,l}return b.prototype.process=function(S){var l=a.clone(S),A=a.flatten(l),j=this.dodgeBy,y=j?a.group(A,j):l;return this.cacheMap={},this.adjustDataArray=y,this.mergeData=A,this.adjustData(y,A),this.adjustDataArray=[],this.mergeData=[],l},b.prototype.adjustDim=function(S,l,A,j){var y=this,n=this.getDistribution(S),s=this.groupData(A,S);return a.each(s,function(h,M){var O;l.length===1?O={pre:l[0]-1,next:l[0]+1}:O=y.getAdjustRange(S,parseFloat(M),l),a.each(h,function(T){var v=T[S],m=n[v],C=m.indexOf(j);T[S]=y.getDodgeOffset(O,C,m.length)})}),[]},b.prototype.getDodgeOffset=function(S,l,A){var j=this,y=j.dodgeRatio,n=j.marginRatio,s=j.intervalPadding,h=j.dodgePadding,M=S.pre,O=S.next,T=O-M,v;if(!a.isNil(s)&&a.isNil(h)&&s>=0){var m=this.getIntervalOnlyOffset(A,l);v=M+m}else if(!a.isNil(h)&&a.isNil(s)&&h>=0){var m=this.getDodgeOnlyOffset(A,l);v=M+m}else if(!a.isNil(s)&&!a.isNil(h)&&s>=0&&h>=0){var m=this.getIntervalAndDodgeOffset(A,l);v=M+m}else{var C=T*y/A,D=n*C,m=1/2*(T-A*C-(A-1)*D)+((l+1)*C+l*D)-1/2*C-1/2*T;v=(M+O)/2+m}return v},b.prototype.getIntervalOnlyOffset=function(S,l){var A=this,j=A.defaultSize,y=A.intervalPadding,n=A.xDimensionLegenth,s=A.groupNum,h=A.dodgeRatio,M=A.maxColumnWidth,O=A.minColumnWidth,T=A.columnWidthRatio,v=y/n,m=(1-(s-1)*v)/s*h/(S-1),C=((1-v*(s-1))/s-m*(S-1))/S;if(C=a.isNil(T)?C:1/s/S*T,!a.isNil(M)){var D=M/n;C=Math.min(C,D)}if(!a.isNil(O)){var Y=O/n;C=Math.max(C,Y)}C=j?j/n:C,m=((1-(s-1)*v)/s-S*C)/(S-1);var Z=((1/2+l)*C+l*m+1/2*v)*s-v/2;return Z},b.prototype.getDodgeOnlyOffset=function(S,l){var A=this,j=A.defaultSize,y=A.dodgePadding,n=A.xDimensionLegenth,s=A.groupNum,h=A.marginRatio,M=A.maxColumnWidth,O=A.minColumnWidth,T=A.columnWidthRatio,v=y/n,m=1*h/(s-1),C=((1-m*(s-1))/s-v*(S-1))/S;if(C=T?1/s/S*T:C,!a.isNil(M)){var D=M/n;C=Math.min(C,D)}if(!a.isNil(O)){var Y=O/n;C=Math.max(C,Y)}C=j?j/n:C,m=(1-(C*S+v*(S-1))*s)/(s-1);var Z=((1/2+l)*C+l*v+1/2*m)*s-m/2;return Z},b.prototype.getIntervalAndDodgeOffset=function(S,l){var A=this,j=A.intervalPadding,y=A.dodgePadding,n=A.xDimensionLegenth,s=A.groupNum,h=j/n,M=y/n,O=((1-h*(s-1))/s-M*(S-1))/S,T=((1/2+l)*O+l*M+1/2*h)*s-h/2;return T},b.prototype.getDistribution=function(S){var l=this.adjustDataArray,A=this.cacheMap,j=A[S];return j||(j={},a.each(l,function(y,n){var s=a.valuesOfKey(y,S);s.length||s.push(0),a.each(s,function(h){j[h]||(j[h]=[]),j[h].push(n)})}),A[S]=j),j},b}(e.a);Gt.a=r},lnY3:function(Fn,Gt,_){},lr9b:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return T});var rt=_("mrSG"),a=_("zJSt"),E=_("YuPD"),e=_("iTfj"),r=_("w02o"),p=_("n/J0"),b="$$range$$",S="low-q1-median-q3-high",l="$$y_outliers$$";function A(v){var m=v.chart,C=v.options,D=C.xField,Y=C.yField,Z=C.groupField,et=C.color,dt=Array.isArray(Y)?b:Y,ht=m.schema().position(D+"*"+dt).shape("box");Z&&ht.color(Z,et).adjust("dodge");var St=C.data;if(Array.isArray(Y)){var wt=Y[0],xt=Y[1],ft=Y[2],Bt=Y[3],Rt=Y[4];St=Object(e.map)(St,function(Ot){return Ot[b]=[Ot[wt],Ot[xt],Ot[ft],Ot[Bt],Ot[Rt]],Ot})}return m.data(St),v}function j(v){var m=v.chart,C=v.options,D=C.xField,Y=C.data,Z=C.outliersField,et=C.outliersStyle,dt=C.padding;if(!Z)return v;var ht=m.createView({padding:dt});ht.data(Y),ht.axis(!1);var St=ht.point().position(D+"*"+Z).shape("circle");return Object(e.isFunction)(et)?St.style(D+"*"+Z,function(wt,xt){var ft;return et((ft={},ft[D]=wt,ft[Z]=xt,ft))}):Object(e.isObject)(et)&&St.style(et),v}function y(v){var m,C,D=v.chart,Y=v.options,Z=Y.meta,et=Y.xAxis,dt=Y.yAxis,ht=Y.xField,St=Y.yField,wt=Y.outliersField,xt=Array.isArray(St)?b:St,ft={};if(wt){var Bt=l;ft=(m={},m[wt]={sync:Bt},m[xt]={sync:Bt},m)}var Rt=Object(E.b)(ft,Z,(C={},C[ht]=Object(E.k)(et,p.a),C[xt]=Object(E.k)(dt,p.a),C));return D.scale(Rt),v}function n(v){var m=v.chart,C=v.options,D=C.xAxis,Y=C.yAxis,Z=C.xField,et=C.yField,dt=Array.isArray(et)?b:et;return D===!1?m.axis(Z,!1):m.axis(Z,D),Y===!1?m.axis(b,!1):m.axis(dt,Y),v}function s(v){var m=v.chart,C=v.options,D=C.legend,Y=C.groupField;return Y?D?m.legend(Y,D):m.legend(Y,{position:"bottom"}):m.legend(!1),v}function h(v){var m=v.chart,C=v.options,D=C.xField,Y=C.yField,Z=C.boxStyle,et=Object(E.c)(m,"schema"),dt=Array.isArray(Y)?b:Y;return Object(e.isFunction)(Z)?et.style(D+"*"+dt,function(ht,St){var wt;return Z((wt={},wt[D]=ht,wt[dt]=St,wt))}):Object(e.isObject)(Z)&&et.style(Z),v}function M(v){var m=v.chart,C=v.options,D=C.tooltip;return D!==void 0&&m.tooltip(D),v}function O(v){return Object(E.e)(A,j,y,n,h,s,M,r.c,r.a,r.j)(v)}var T=function(v){Object(rt.b)(m,v);function m(){var C=v!==null&&v.apply(this,arguments)||this;return C.type="box",C}return m.prototype.getDefaultOptions=function(){var C;return Object(E.b)({},v.prototype.getDefaultOptions.call(this),{meta:(C={},C[b]={min:0,alias:S},C),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,showCrosshairs:!0,shared:!0}})},m.prototype.getSchemaAdaptor=function(){return O},m}(a.a)},lt7v:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return a});var rt=null;function a(){if(!rt){var E=document.createElement("canvas");E.width=1,E.height=1,rt=E.getContext("2d")}return rt}},"ma/q":function(Fn,Gt,_){"use strict";var rt=_("Ihc8");_.d(Gt,"G2",function(){return rt});var a=_("zJSt"),E=_("Djfg"),e=_("XloR");_.d(Gt,"Line",function(){return e.a});var r=_("uw/B");_.d(Gt,"Area",function(){return r.a});var p=_("u9VJ");_.d(Gt,"Column",function(){return p.a});var b=_("Y+LX");_.d(Gt,"Bar",function(){return b.a});var S=_("Cr25");_.d(Gt,"Pie",function(){return S.a});var l=_("z4Vf");_.d(Gt,"Rose",function(){return l.a});var A=_("Mj7Y");_.d(Gt,"WordCloud",function(){return A.a});var j=_("tE4n");_.d(Gt,"Scatter",function(){return j.a});var y=_("y753");_.d(Gt,"Radar",function(){return y.a});var n=_("yqCL");_.d(Gt,"DualAxes",function(){return n.a});var s=_("mttH");_.d(Gt,"TinyLine",function(){return s.a});var h=_("027J");_.d(Gt,"TinyColumn",function(){return h.a});var M=_("05BJ");_.d(Gt,"TinyArea",function(){return M.a});var O=_("BwSJ");_.d(Gt,"Histogram",function(){return O.a});var T=_("kwiP");_.d(Gt,"Progress",function(){return T.a});var v=_("YP77");_.d(Gt,"RingProgress",function(){return v.a});var m=_("+wVF");_.d(Gt,"Heatmap",function(){return m.a});var C=_("lr9b");_.d(Gt,"Box",function(){return C.a});var D=_("/+3i");_.d(Gt,"Stock",function(){return D.a});var Y=_("aLzy");_.d(Gt,"Funnel",function(){return Y.a});var Z=_("FAXy");_.d(Gt,"Liquid",function(){return Z.a});var et=_("BYeR");_.d(Gt,"Bullet",function(){return et.a});var dt=_("cBFB");_.d(Gt,"Sunburst",function(){return dt.a});var ht=_("XpFM");_.d(Gt,"Gauge",function(){return ht.a});var St=_("FLLP");_.d(Gt,"Waterfall",function(){return St.a});var wt=_("TEat");_.d(Gt,"RadialBar",function(){return wt.a});var xt=_("7ZbV");_.d(Gt,"BidirectionalBar",function(){return xt.a});var ft=_("eHqw");_.d(Gt,"Treemap",function(){return ft.a});var Bt=_("rtSP");_.d(Gt,"Sankey",function(){return Bt.a});var Rt=_("Uo7R"),Ot=_("7+4w"),X=_("QG4C");_.d(Gt,"MultiView",function(){return X.a});var ut=_("YuPD"),vt=_("tKoa"),pt=_("w02o"),Et=_("46lQ"),q="2.3.10",st={scale:pt.f,legend:pt.d,tooltip:pt.k,annotation:pt.b,interaction:pt.c,theme:pt.j,animation:pt.a}},mj6g:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return e}),_.d(Gt,"d",function(){return r}),_.d(Gt,"c",function(){return p}),_.d(Gt,"b",function(){return b});var rt=_("mrSG"),a=_("iTfj"),E=_("YuPD");function e(S){var l={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},A=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];Object(a.get)(S,"fill")&&(l.color=S.fill);var j=Object(E.k)(S,A),y=j.shadowColor,n=j.shadowBlur,s=n===void 0?0:n,h=j.shadowOffsetX,M=h===void 0?0:h,O=j.shadowOffsetY,T=O===void 0?0:O;l["text-shadow"]=""+[y,M+"px",T+"px",s+"px"].join(" ");var v=Object(E.k)(S,A),m=v.stroke,C=v.lineWidth,D=C===void 0?0:C;return l["-webkit-text-stroke"]=""+[D+"px",m].join(" "),Object(a.each)(S,function(Y,Z){["fontSize"].includes(Z)&&Object(a.isNumber)(Y)?l[Object(E.i)(Z)]=Y+"px":Z&&!A.includes(Z)&&(l[Object(E.i)(Z)]=""+Y)}),l}function r(S,l){S.style["pointer-events"]="none",Object(a.each)(l,function(A,j){j&&A&&(S.style[j]=A)})}var p=function(l,A,j){var y=A.statistic,n=A.plotType,s=y.title,h=y.content;[s,h].forEach(function(M,O){if(!!M){var T="",v="";O===0?v=h?"translate(-50%, -100%)":"translate(-50%, -50%)":v=s?"translate(-50%, 0)":"translate(-50%, -50%)";var m=Object(a.isFunction)(M.style)?M.style(j):M.style;l.annotation().html(Object(rt.a)({position:["50%","50%"],html:function(D,Y){var Z=Y.getCoordinate(),et=0;if(n==="pie"||n==="ring-progress")et=Z.getRadius()*Z.innerRadius*2;else if(n==="liquid"){var dt=Object(a.get)(Y.geometries,[0,"elements",0,"shape"]);if(dt){var ht=dt.find(function(xt){return xt.get("type")==="circle"}),St=ht.getCanvasBBox().width;et=St}}else et||(et=Z.getWidth());r(D,Object(rt.a)({width:et+"px",transform:v},e(m)));var wt=Y.getData();return M.customHtml?M.customHtml(D,Y,j,wt):(M.formatter&&(T=M.formatter(j,wt)),T?Object(a.isString)(T)?T:""+T:"<div></div>")},key:(O===0?"top":"bottom")+"-statistic"},Object(E.k)(M,["offsetX","offsetY","rotate","style","formatter"])))}})},b=function(l,A,j){var y=A.statistic,n=y.title,s=y.content;[n,s].forEach(function(h){if(!!h){var M="",O=Object(a.isFunction)(h.style)?h.style(j):h.style;l.annotation().html(Object(rt.a)({position:["50%","100%"],html:function(v,m){var C=m.getCoordinate(),D=m.views[0].getCoordinate(),Y=D.getCenter(),Z=D.getRadius(),et=Math.max(Math.sin(D.startAngle),Math.sin(D.endAngle))*Z,dt=Y.y+et-C.y.start-parseFloat(Object(a.get)(O,"fontSize",0)),ht=C.getRadius()*C.innerRadius*2;r(v,Object(rt.a)({width:ht+"px",transform:"translate(-50%, "+dt+"px)"},e(O)));var St=m.getData();return h.customHtml?h.customHtml(v,m,j,St):(h.formatter&&(M=h.formatter(j,St)),M?Object(a.isString)(M)?M:""+M:"<div></div>")}},Object(E.k)(h,["offsetX","offsetY","rotate","style","formatter"])))}})}},mrSG:function(Fn,Gt,_){"use strict";_.d(Gt,"b",function(){return a}),_.d(Gt,"a",function(){return E}),_.d(Gt,"c",function(){return e}),_.d(Gt,"d",function(){return h});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var rt=function(St,wt){return rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(xt,ft){xt.__proto__=ft}||function(xt,ft){for(var Bt in ft)Object.prototype.hasOwnProperty.call(ft,Bt)&&(xt[Bt]=ft[Bt])},rt(St,wt)};function a(ht,St){if(typeof St!="function"&&St!==null)throw new TypeError("Class extends value "+String(St)+" is not a constructor or null");rt(ht,St);function wt(){this.constructor=ht}ht.prototype=St===null?Object.create(St):(wt.prototype=St.prototype,new wt)}var E=function(){return E=Object.assign||function(wt){for(var xt,ft=1,Bt=arguments.length;ft<Bt;ft++){xt=arguments[ft];for(var Rt in xt)Object.prototype.hasOwnProperty.call(xt,Rt)&&(wt[Rt]=xt[Rt])}return wt},E.apply(this,arguments)};function e(ht,St){var wt={};for(var xt in ht)Object.prototype.hasOwnProperty.call(ht,xt)&&St.indexOf(xt)<0&&(wt[xt]=ht[xt]);if(ht!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ft=0,xt=Object.getOwnPropertySymbols(ht);ft<xt.length;ft++)St.indexOf(xt[ft])<0&&Object.prototype.propertyIsEnumerable.call(ht,xt[ft])&&(wt[xt[ft]]=ht[xt[ft]]);return wt}function r(ht,St,wt,xt){var ft=arguments.length,Bt=ft<3?St:xt===null?xt=Object.getOwnPropertyDescriptor(St,wt):xt,Rt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Bt=Reflect.decorate(ht,St,wt,xt);else for(var Ot=ht.length-1;Ot>=0;Ot--)(Rt=ht[Ot])&&(Bt=(ft<3?Rt(Bt):ft>3?Rt(St,wt,Bt):Rt(St,wt))||Bt);return ft>3&&Bt&&Object.defineProperty(St,wt,Bt),Bt}function p(ht,St){return function(wt,xt){St(wt,xt,ht)}}function b(ht,St){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(ht,St)}function S(ht,St,wt,xt){function ft(Bt){return Bt instanceof wt?Bt:new wt(function(Rt){Rt(Bt)})}return new(wt||(wt=Promise))(function(Bt,Rt){function Ot(vt){try{ut(xt.next(vt))}catch(pt){Rt(pt)}}function X(vt){try{ut(xt.throw(vt))}catch(pt){Rt(pt)}}function ut(vt){vt.done?Bt(vt.value):ft(vt.value).then(Ot,X)}ut((xt=xt.apply(ht,St||[])).next())})}function l(ht,St){var wt={label:0,sent:function(){if(Bt[0]&1)throw Bt[1];return Bt[1]},trys:[],ops:[]},xt,ft,Bt,Rt;return Rt={next:Ot(0),throw:Ot(1),return:Ot(2)},typeof Symbol=="function"&&(Rt[Symbol.iterator]=function(){return this}),Rt;function Ot(ut){return function(vt){return X([ut,vt])}}function X(ut){if(xt)throw new TypeError("Generator is already executing.");for(;wt;)try{if(xt=1,ft&&(Bt=ut[0]&2?ft.return:ut[0]?ft.throw||((Bt=ft.return)&&Bt.call(ft),0):ft.next)&&!(Bt=Bt.call(ft,ut[1])).done)return Bt;switch(ft=0,Bt&&(ut=[ut[0]&2,Bt.value]),ut[0]){case 0:case 1:Bt=ut;break;case 4:return wt.label++,{value:ut[1],done:!1};case 5:wt.label++,ft=ut[1],ut=[0];continue;case 7:ut=wt.ops.pop(),wt.trys.pop();continue;default:if(Bt=wt.trys,!(Bt=Bt.length>0&&Bt[Bt.length-1])&&(ut[0]===6||ut[0]===2)){wt=0;continue}if(ut[0]===3&&(!Bt||ut[1]>Bt[0]&&ut[1]<Bt[3])){wt.label=ut[1];break}if(ut[0]===6&&wt.label<Bt[1]){wt.label=Bt[1],Bt=ut;break}if(Bt&&wt.label<Bt[2]){wt.label=Bt[2],wt.ops.push(ut);break}Bt[2]&&wt.ops.pop(),wt.trys.pop();continue}ut=St.call(ht,wt)}catch(vt){ut=[6,vt],ft=0}finally{xt=Bt=0}if(ut[0]&5)throw ut[1];return{value:ut[0]?ut[1]:void 0,done:!0}}}var A=Object.create?function(ht,St,wt,xt){xt===void 0&&(xt=wt),Object.defineProperty(ht,xt,{enumerable:!0,get:function(){return St[wt]}})}:function(ht,St,wt,xt){xt===void 0&&(xt=wt),ht[xt]=St[wt]};function j(ht,St){for(var wt in ht)wt!=="default"&&!Object.prototype.hasOwnProperty.call(St,wt)&&A(St,ht,wt)}function y(ht){var St=typeof Symbol=="function"&&Symbol.iterator,wt=St&&ht[St],xt=0;if(wt)return wt.call(ht);if(ht&&typeof ht.length=="number")return{next:function(){return ht&&xt>=ht.length&&(ht=void 0),{value:ht&&ht[xt++],done:!ht}}};throw new TypeError(St?"Object is not iterable.":"Symbol.iterator is not defined.")}function n(ht,St){var wt=typeof Symbol=="function"&&ht[Symbol.iterator];if(!wt)return ht;var xt=wt.call(ht),ft,Bt=[],Rt;try{for(;(St===void 0||St-- >0)&&!(ft=xt.next()).done;)Bt.push(ft.value)}catch(Ot){Rt={error:Ot}}finally{try{ft&&!ft.done&&(wt=xt.return)&&wt.call(xt)}finally{if(Rt)throw Rt.error}}return Bt}function s(){for(var ht=[],St=0;St<arguments.length;St++)ht=ht.concat(n(arguments[St]));return ht}function h(){for(var ht=0,St=0,wt=arguments.length;St<wt;St++)ht+=arguments[St].length;for(var xt=Array(ht),ft=0,St=0;St<wt;St++)for(var Bt=arguments[St],Rt=0,Ot=Bt.length;Rt<Ot;Rt++,ft++)xt[ft]=Bt[Rt];return xt}function M(ht,St){for(var wt=0,xt=St.length,ft=ht.length;wt<xt;wt++,ft++)ht[ft]=St[wt];return ht}function O(ht){return this instanceof O?(this.v=ht,this):new O(ht)}function T(ht,St,wt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xt=wt.apply(ht,St||[]),ft,Bt=[];return ft={},Rt("next"),Rt("throw"),Rt("return"),ft[Symbol.asyncIterator]=function(){return this},ft;function Rt(Et){xt[Et]&&(ft[Et]=function(q){return new Promise(function(st,it){Bt.push([Et,q,st,it])>1||Ot(Et,q)})})}function Ot(Et,q){try{X(xt[Et](q))}catch(st){pt(Bt[0][3],st)}}function X(Et){Et.value instanceof O?Promise.resolve(Et.value.v).then(ut,vt):pt(Bt[0][2],Et)}function ut(Et){Ot("next",Et)}function vt(Et){Ot("throw",Et)}function pt(Et,q){Et(q),Bt.shift(),Bt.length&&Ot(Bt[0][0],Bt[0][1])}}function v(ht){var St,wt;return St={},xt("next"),xt("throw",function(ft){throw ft}),xt("return"),St[Symbol.iterator]=function(){return this},St;function xt(ft,Bt){St[ft]=ht[ft]?function(Rt){return(wt=!wt)?{value:O(ht[ft](Rt)),done:ft==="return"}:Bt?Bt(Rt):Rt}:Bt}}function m(ht){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var St=ht[Symbol.asyncIterator],wt;return St?St.call(ht):(ht=typeof y=="function"?y(ht):ht[Symbol.iterator](),wt={},xt("next"),xt("throw"),xt("return"),wt[Symbol.asyncIterator]=function(){return this},wt);function xt(Bt){wt[Bt]=ht[Bt]&&function(Rt){return new Promise(function(Ot,X){Rt=ht[Bt](Rt),ft(Ot,X,Rt.done,Rt.value)})}}function ft(Bt,Rt,Ot,X){Promise.resolve(X).then(function(ut){Bt({value:ut,done:Ot})},Rt)}}function C(ht,St){return Object.defineProperty?Object.defineProperty(ht,"raw",{value:St}):ht.raw=St,ht}var D=Object.create?function(ht,St){Object.defineProperty(ht,"default",{enumerable:!0,value:St})}:function(ht,St){ht.default=St};function Y(ht){if(ht&&ht.__esModule)return ht;var St={};if(ht!=null)for(var wt in ht)wt!=="default"&&Object.prototype.hasOwnProperty.call(ht,wt)&&A(St,ht,wt);return D(St,ht),St}function Z(ht){return ht&&ht.__esModule?ht:{default:ht}}function et(ht,St){if(!St.has(ht))throw new TypeError("attempted to get private field on non-instance");return St.get(ht)}function dt(ht,St,wt){if(!St.has(ht))throw new TypeError("attempted to set private field on non-instance");return St.set(ht,wt),wt}},mttH:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return j});var rt=_("mrSG"),a=_("zJSt"),E=_("YuPD"),e=_("w02o"),r=_("tKoa"),p=_("DyAw"),b=_("lFe4"),S=_("7cv3");function l(y){var n,s,h=y.chart,M=y.options,O=M.data,T=M.xAxis,v=M.yAxis,m=M.color,C=M.lineStyle,D=M.point,Y=Object(b.a)(O);h.data(Y);var Z=Object(E.b)({},y,{options:{xField:S.b,yField:S.c,line:{color:m,style:C},point:D}}),et=Object(E.b)({},Z,{options:{tooltip:!1}});return Object(r.d)(Z),Object(r.e)(et),h.axis(!1),h.legend(!1),Object(e.f)((n={},n[S.b]=T,n[S.c]=v,n),(s={},s[S.b]={type:"cat"},s[S.c]=Object(p.a)(Y,S.c),s))(y),y}function A(y){return Object(E.e)(l,e.j,e.k,e.a,Object(e.b)())(y)}var j=function(y){Object(rt.b)(n,y);function n(){var s=y!==null&&y.apply(this,arguments)||this;return s.type="tiny-line",s}return n.prototype.changeData=function(s){this.updateOption({data:s}),this.chart.changeData(Object(b.a)(s))},n.prototype.getDefaultOptions=function(){return{appendPadding:2,tooltip:Object(rt.a)({},S.a),animation:!0}},n.prototype.getSchemaAdaptor=function(){return A},n}(a.a)},"n+fv":function(Fn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"create",function(){return a}),_.d(Gt,"clone",function(){return E}),_.d(Gt,"length",function(){return e}),_.d(Gt,"fromValues",function(){return r}),_.d(Gt,"copy",function(){return p}),_.d(Gt,"set",function(){return b}),_.d(Gt,"add",function(){return S}),_.d(Gt,"subtract",function(){return l}),_.d(Gt,"multiply",function(){return A}),_.d(Gt,"divide",function(){return j}),_.d(Gt,"ceil",function(){return y}),_.d(Gt,"floor",function(){return n}),_.d(Gt,"min",function(){return s}),_.d(Gt,"max",function(){return h}),_.d(Gt,"round",function(){return M}),_.d(Gt,"scale",function(){return O}),_.d(Gt,"scaleAndAdd",function(){return T}),_.d(Gt,"distance",function(){return v}),_.d(Gt,"squaredDistance",function(){return m}),_.d(Gt,"squaredLength",function(){return C}),_.d(Gt,"negate",function(){return D}),_.d(Gt,"inverse",function(){return Y}),_.d(Gt,"normalize",function(){return Z}),_.d(Gt,"dot",function(){return et}),_.d(Gt,"cross",function(){return dt}),_.d(Gt,"lerp",function(){return ht}),_.d(Gt,"hermite",function(){return St}),_.d(Gt,"bezier",function(){return wt}),_.d(Gt,"random",function(){return xt}),_.d(Gt,"transformMat4",function(){return ft}),_.d(Gt,"transformMat3",function(){return Bt}),_.d(Gt,"transformQuat",function(){return Rt}),_.d(Gt,"rotateX",function(){return Ot}),_.d(Gt,"rotateY",function(){return X}),_.d(Gt,"rotateZ",function(){return ut}),_.d(Gt,"angle",function(){return vt}),_.d(Gt,"zero",function(){return pt}),_.d(Gt,"str",function(){return Et}),_.d(Gt,"exactEquals",function(){return q}),_.d(Gt,"equals",function(){return st}),_.d(Gt,"sub",function(){return it}),_.d(Gt,"mul",function(){return z}),_.d(Gt,"div",function(){return P}),_.d(Gt,"dist",function(){return H}),_.d(Gt,"sqrDist",function(){return k}),_.d(Gt,"len",function(){return d}),_.d(Gt,"sqrLen",function(){return g}),_.d(Gt,"forEach",function(){return F});var rt=_("yU0y");function a(){var V=new rt.a(3);return rt.a!=Float32Array&&(V[0]=0,V[1]=0,V[2]=0),V}function E(V){var tt=new rt.a(3);return tt[0]=V[0],tt[1]=V[1],tt[2]=V[2],tt}function e(V){var tt=V[0],ot=V[1],at=V[2];return Math.hypot(tt,ot,at)}function r(V,tt,ot){var at=new rt.a(3);return at[0]=V,at[1]=tt,at[2]=ot,at}function p(V,tt){return V[0]=tt[0],V[1]=tt[1],V[2]=tt[2],V}function b(V,tt,ot,at){return V[0]=tt,V[1]=ot,V[2]=at,V}function S(V,tt,ot){return V[0]=tt[0]+ot[0],V[1]=tt[1]+ot[1],V[2]=tt[2]+ot[2],V}function l(V,tt,ot){return V[0]=tt[0]-ot[0],V[1]=tt[1]-ot[1],V[2]=tt[2]-ot[2],V}function A(V,tt,ot){return V[0]=tt[0]*ot[0],V[1]=tt[1]*ot[1],V[2]=tt[2]*ot[2],V}function j(V,tt,ot){return V[0]=tt[0]/ot[0],V[1]=tt[1]/ot[1],V[2]=tt[2]/ot[2],V}function y(V,tt){return V[0]=Math.ceil(tt[0]),V[1]=Math.ceil(tt[1]),V[2]=Math.ceil(tt[2]),V}function n(V,tt){return V[0]=Math.floor(tt[0]),V[1]=Math.floor(tt[1]),V[2]=Math.floor(tt[2]),V}function s(V,tt,ot){return V[0]=Math.min(tt[0],ot[0]),V[1]=Math.min(tt[1],ot[1]),V[2]=Math.min(tt[2],ot[2]),V}function h(V,tt,ot){return V[0]=Math.max(tt[0],ot[0]),V[1]=Math.max(tt[1],ot[1]),V[2]=Math.max(tt[2],ot[2]),V}function M(V,tt){return V[0]=Math.round(tt[0]),V[1]=Math.round(tt[1]),V[2]=Math.round(tt[2]),V}function O(V,tt,ot){return V[0]=tt[0]*ot,V[1]=tt[1]*ot,V[2]=tt[2]*ot,V}function T(V,tt,ot,at){return V[0]=tt[0]+ot[0]*at,V[1]=tt[1]+ot[1]*at,V[2]=tt[2]+ot[2]*at,V}function v(V,tt){var ot=tt[0]-V[0],at=tt[1]-V[1],At=tt[2]-V[2];return Math.hypot(ot,at,At)}function m(V,tt){var ot=tt[0]-V[0],at=tt[1]-V[1],At=tt[2]-V[2];return ot*ot+at*at+At*At}function C(V){var tt=V[0],ot=V[1],at=V[2];return tt*tt+ot*ot+at*at}function D(V,tt){return V[0]=-tt[0],V[1]=-tt[1],V[2]=-tt[2],V}function Y(V,tt){return V[0]=1/tt[0],V[1]=1/tt[1],V[2]=1/tt[2],V}function Z(V,tt){var ot=tt[0],at=tt[1],At=tt[2],yt=ot*ot+at*at+At*At;return yt>0&&(yt=1/Math.sqrt(yt)),V[0]=tt[0]*yt,V[1]=tt[1]*yt,V[2]=tt[2]*yt,V}function et(V,tt){return V[0]*tt[0]+V[1]*tt[1]+V[2]*tt[2]}function dt(V,tt,ot){var at=tt[0],At=tt[1],yt=tt[2],gt=ot[0],bt=ot[1],Tt=ot[2];return V[0]=At*Tt-yt*bt,V[1]=yt*gt-at*Tt,V[2]=at*bt-At*gt,V}function ht(V,tt,ot,at){var At=tt[0],yt=tt[1],gt=tt[2];return V[0]=At+at*(ot[0]-At),V[1]=yt+at*(ot[1]-yt),V[2]=gt+at*(ot[2]-gt),V}function St(V,tt,ot,at,At,yt){var gt=yt*yt,bt=gt*(2*yt-3)+1,Tt=gt*(yt-2)+yt,Dt=gt*(yt-1),Ut=gt*(3-2*yt);return V[0]=tt[0]*bt+ot[0]*Tt+at[0]*Dt+At[0]*Ut,V[1]=tt[1]*bt+ot[1]*Tt+at[1]*Dt+At[1]*Ut,V[2]=tt[2]*bt+ot[2]*Tt+at[2]*Dt+At[2]*Ut,V}function wt(V,tt,ot,at,At,yt){var gt=1-yt,bt=gt*gt,Tt=yt*yt,Dt=bt*gt,Ut=3*yt*bt,jt=3*Tt*gt,Vt=Tt*yt;return V[0]=tt[0]*Dt+ot[0]*Ut+at[0]*jt+At[0]*Vt,V[1]=tt[1]*Dt+ot[1]*Ut+at[1]*jt+At[1]*Vt,V[2]=tt[2]*Dt+ot[2]*Ut+at[2]*jt+At[2]*Vt,V}function xt(V,tt){tt=tt||1;var ot=rt.c()*2*Math.PI,at=rt.c()*2-1,At=Math.sqrt(1-at*at)*tt;return V[0]=Math.cos(ot)*At,V[1]=Math.sin(ot)*At,V[2]=at*tt,V}function ft(V,tt,ot){var at=tt[0],At=tt[1],yt=tt[2],gt=ot[3]*at+ot[7]*At+ot[11]*yt+ot[15];return gt=gt||1,V[0]=(ot[0]*at+ot[4]*At+ot[8]*yt+ot[12])/gt,V[1]=(ot[1]*at+ot[5]*At+ot[9]*yt+ot[13])/gt,V[2]=(ot[2]*at+ot[6]*At+ot[10]*yt+ot[14])/gt,V}function Bt(V,tt,ot){var at=tt[0],At=tt[1],yt=tt[2];return V[0]=at*ot[0]+At*ot[3]+yt*ot[6],V[1]=at*ot[1]+At*ot[4]+yt*ot[7],V[2]=at*ot[2]+At*ot[5]+yt*ot[8],V}function Rt(V,tt,ot){var at=ot[0],At=ot[1],yt=ot[2],gt=ot[3],bt=tt[0],Tt=tt[1],Dt=tt[2],Ut=At*Dt-yt*Tt,jt=yt*bt-at*Dt,Vt=at*Tt-At*bt,Ht=At*Vt-yt*jt,re=yt*Ut-at*Vt,pe=at*jt-At*Ut,ye=gt*2;return Ut*=ye,jt*=ye,Vt*=ye,Ht*=2,re*=2,pe*=2,V[0]=bt+Ut+Ht,V[1]=Tt+jt+re,V[2]=Dt+Vt+pe,V}function Ot(V,tt,ot,at){var At=[],yt=[];return At[0]=tt[0]-ot[0],At[1]=tt[1]-ot[1],At[2]=tt[2]-ot[2],yt[0]=At[0],yt[1]=At[1]*Math.cos(at)-At[2]*Math.sin(at),yt[2]=At[1]*Math.sin(at)+At[2]*Math.cos(at),V[0]=yt[0]+ot[0],V[1]=yt[1]+ot[1],V[2]=yt[2]+ot[2],V}function X(V,tt,ot,at){var At=[],yt=[];return At[0]=tt[0]-ot[0],At[1]=tt[1]-ot[1],At[2]=tt[2]-ot[2],yt[0]=At[2]*Math.sin(at)+At[0]*Math.cos(at),yt[1]=At[1],yt[2]=At[2]*Math.cos(at)-At[0]*Math.sin(at),V[0]=yt[0]+ot[0],V[1]=yt[1]+ot[1],V[2]=yt[2]+ot[2],V}function ut(V,tt,ot,at){var At=[],yt=[];return At[0]=tt[0]-ot[0],At[1]=tt[1]-ot[1],At[2]=tt[2]-ot[2],yt[0]=At[0]*Math.cos(at)-At[1]*Math.sin(at),yt[1]=At[0]*Math.sin(at)+At[1]*Math.cos(at),yt[2]=At[2],V[0]=yt[0]+ot[0],V[1]=yt[1]+ot[1],V[2]=yt[2]+ot[2],V}function vt(V,tt){var ot=V[0],at=V[1],At=V[2],yt=tt[0],gt=tt[1],bt=tt[2],Tt=Math.sqrt(ot*ot+at*at+At*At),Dt=Math.sqrt(yt*yt+gt*gt+bt*bt),Ut=Tt*Dt,jt=Ut&&et(V,tt)/Ut;return Math.acos(Math.min(Math.max(jt,-1),1))}function pt(V){return V[0]=0,V[1]=0,V[2]=0,V}function Et(V){return"vec3("+V[0]+", "+V[1]+", "+V[2]+")"}function q(V,tt){return V[0]===tt[0]&&V[1]===tt[1]&&V[2]===tt[2]}function st(V,tt){var ot=V[0],at=V[1],At=V[2],yt=tt[0],gt=tt[1],bt=tt[2];return Math.abs(ot-yt)<=rt.b*Math.max(1,Math.abs(ot),Math.abs(yt))&&Math.abs(at-gt)<=rt.b*Math.max(1,Math.abs(at),Math.abs(gt))&&Math.abs(At-bt)<=rt.b*Math.max(1,Math.abs(At),Math.abs(bt))}var it=l,z=A,P=j,H=v,k=m,d=e,g=C,F=function(){var V=a();return function(tt,ot,at,At,yt,gt){var bt,Tt;for(ot||(ot=3),at||(at=0),At?Tt=Math.min(At*ot+at,tt.length):Tt=tt.length,bt=at;bt<Tt;bt+=ot)V[0]=tt[bt],V[1]=tt[bt+1],V[2]=tt[bt+2],yt(V,V,gt),tt[bt]=V[0],tt[bt+1]=V[1],tt[bt+2]=V[2];return tt}}()},"n/J0":function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return rt}),_.d(Gt,"b",function(){return a});var rt=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask"],a={GRADIENT:{CONTINUOUS:"#BAE7FF-#1890FF-#0050B3"}}},nCnq:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return r});var rt=_("cyZq");function a(p){return Math.sqrt(p[0]*p[0]+p[1]*p[1])}function E(p,b){return a(p)*a(b)?(p[0]*b[0]+p[1]*b[1])/(a(p)*a(b)):1}function e(p,b){return(p[0]*b[1]<p[1]*b[0]?-1:1)*Math.acos(E(p,b))}function r(p,b){var S=b[1],l=b[2],A=Object(rt.m)(Object(rt.o)(b[3]),Math.PI*2),j=b[4],y=b[5],n=p[0],s=p[1],h=b[6],M=b[7],O=Math.cos(A)*(n-h)/2+Math.sin(A)*(s-M)/2,T=-1*Math.sin(A)*(n-h)/2+Math.cos(A)*(s-M)/2,v=O*O/(S*S)+T*T/(l*l);v>1&&(S*=Math.sqrt(v),l*=Math.sqrt(v));var m=S*S*(T*T)+l*l*(O*O),C=m?Math.sqrt((S*S*(l*l)-m)/m):1;j===y&&(C*=-1),isNaN(C)&&(C=0);var D=l?C*S*T/l:0,Y=S?C*-l*O/S:0,Z=(n+h)/2+Math.cos(A)*D-Math.sin(A)*Y,et=(s+M)/2+Math.sin(A)*D+Math.cos(A)*Y,dt=[(O-D)/S,(T-Y)/l],ht=[(-1*O-D)/S,(-1*T-Y)/l],St=e([1,0],dt),wt=e(dt,ht);return E(dt,ht)<=-1&&(wt=Math.PI),E(dt,ht)>=1&&(wt=0),y===0&&wt>0&&(wt=wt-2*Math.PI),y===1&&wt<0&&(wt=wt+2*Math.PI),{cx:Z,cy:et,rx:Object(rt.j)(p,[h,M])?0:S,ry:Object(rt.j)(p,[h,M])?0:l,startAngle:St,endAngle:St+wt,xRotation:A,arcFlag:j,sweepFlag:y}}},nycV:function(Fn,Gt,_){"use strict";_.d(Gt,"c",function(){return l}),_.d(Gt,"b",function(){return A}),_.d(Gt,"a",function(){return j});var rt=_("mrSG"),a=_("R5nb"),E=Math.sin,e=Math.cos,r=Math.atan2,p=Math.PI;function b(y,n,s,h,M,O,T){var v=n.stroke,m=n.lineWidth,C=s-M,D=h-O,Y=r(D,C),Z=new a.Path({type:"path",canvas:y.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*e(p/6)+","+10*E(p/6)+" L0,0 L"+10*e(p/6)+",-"+10*E(p/6),stroke:v,lineWidth:m}});Z.translate(M,O),Z.rotateAtPoint(M,O,Y),y.set(T?"startArrowShape":"endArrowShape",Z)}function S(y,n,s,h,M,O,T){var v=n.startArrow,m=n.endArrow,C=n.stroke,D=n.lineWidth,Y=T?v:m,Z=Y.d,et=Y.fill,dt=Y.stroke,ht=Y.lineWidth,St=Object(rt.c)(Y,["d","fill","stroke","lineWidth"]),wt=s-M,xt=h-O,ft=r(xt,wt);Z&&(M=M-e(ft)*Z,O=O-E(ft)*Z);var Bt=new a.Path({type:"path",canvas:y.get("canvas"),isArrowShape:!0,attrs:Object(rt.a)(Object(rt.a)({},St),{stroke:dt||C,lineWidth:ht||D,fill:et})});Bt.translate(M,O),Bt.rotateAtPoint(M,O,ft),y.set(T?"startArrowShape":"endArrowShape",Bt)}function l(y,n,s,h,M){var O=r(h-n,s-y);return{dx:e(O)*M,dy:E(O)*M}}function A(y,n,s,h,M,O){typeof n.startArrow=="object"?S(y,n,s,h,M,O,!0):n.startArrow?b(y,n,s,h,M,O,!0):y.set("startArrowShape",null)}function j(y,n,s,h,M,O){typeof n.endArrow=="object"?S(y,n,s,h,M,O,!1):n.endArrow?b(y,n,s,h,M,O,!1):y.set("startArrowShape",null)}},"o/2+":function(Fn,Gt,_){"use strict";var rt=_("q1tI"),a=_.n(rt),E=Object(rt.createContext)({});Gt.a=E},oIFs:function(Fn,Gt,_){},q4HE:function(Fn,Gt){var _="\\ud800-\\udfff",rt="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",E="\\u20d0-\\u20ff",e=rt+a+E,r="\\ufe0e\\ufe0f",p="["+_+"]",b="["+e+"]",S="\\ud83c[\\udffb-\\udfff]",l="(?:"+b+"|"+S+")",A="[^"+_+"]",j="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",n="\\u200d",s=l+"?",h="["+r+"]?",M="(?:"+n+"(?:"+[A,j,y].join("|")+")"+h+s+")*",O=h+s+M,T="(?:"+[A+b+"?",b,j,y,p].join("|")+")",v=RegExp(S+"(?="+S+")|"+T+O,"g");function m(C){for(var D=v.lastIndex=0;v.test(C);)++D;return D}Fn.exports=m},qaDU:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return e});var rt=_("mrSG"),a=_("Ihc8"),E=[1,0,0,0,1,0,0,0,1];function e(r,p){var b=p?Object(rt.d)(p):Object(rt.d)(E);return a.Util.transform(b,r)}},quyA:function(Fn,Gt){var _="\\ud800-\\udfff",rt="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",E="\\u20d0-\\u20ff",e=rt+a+E,r="\\ufe0e\\ufe0f",p="\\u200d",b=RegExp("["+p+_+e+r+"]");function S(l){return b.test(l)}Fn.exports=S},r0DC:function(Fn,Gt,_){"use strict";_.d(Gt,"b",function(){return A}),_.d(Gt,"a",function(){return j});var rt=_("cyZq"),a=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,E=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,e=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,r=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function p(y,n){var s=y.match(r);Object(rt.c)(s,function(h){var M=h.split(":");n.addColorStop(M[0],M[1])})}function b(y,n,s){var h=a.exec(s),M=parseFloat(h[1])%360*(Math.PI/180),O=h[2],T=n.getBBox(),v,m;M>=0&&M<1/2*Math.PI?(v={x:T.minX,y:T.minY},m={x:T.maxX,y:T.maxY}):1/2*Math.PI<=M&&M<Math.PI?(v={x:T.maxX,y:T.minY},m={x:T.minX,y:T.maxY}):Math.PI<=M&&M<3/2*Math.PI?(v={x:T.maxX,y:T.maxY},m={x:T.minX,y:T.minY}):(v={x:T.minX,y:T.maxY},m={x:T.maxX,y:T.minY});var C=Math.tan(M),D=C*C,Y=(m.x-v.x+C*(m.y-v.y))/(D+1)+v.x,Z=C*(m.x-v.x+C*(m.y-v.y))/(D+1)+v.y,et=y.createLinearGradient(v.x,v.y,Y,Z);return p(O,et),et}function S(y,n,s){var h=E.exec(s),M=parseFloat(h[1]),O=parseFloat(h[2]),T=parseFloat(h[3]),v=h[4];if(T===0){var m=v.match(r);return m[m.length-1].split(":")[1]}var C=n.getBBox(),D=C.maxX-C.minX,Y=C.maxY-C.minY,Z=Math.sqrt(D*D+Y*Y)/2,et=y.createRadialGradient(C.minX+D*M,C.minY+Y*O,0,C.minX+D/2,C.minY+Y/2,T*Z);return p(v,et),et}function l(y,n,s){if(n.get("patternSource")&&n.get("patternSource")===s)return n.get("pattern");var h,M,O=e.exec(s),T=O[1],v=O[2];function m(){h=y.createPattern(M,T),n.set("pattern",h),n.set("patternSource",s)}switch(T){case"a":T="repeat";break;case"x":T="repeat-x";break;case"y":T="repeat-y";break;case"n":T="no-repeat";break;default:T="no-repeat"}return M=new Image,v.match(/^data:/i)||(M.crossOrigin="Anonymous"),M.src=v,M.complete?m():(M.onload=m,M.src=M.src),h}function A(y,n,s){if(Object(rt.k)(s)){if(s[1]==="("||s[2]==="("){if(s[0]==="l")return b(y,n,s);if(s[0]==="r")return S(y,n,s);if(s[0]==="p")return l(y,n,s)}return s}}function j(y){var n=0,s=0,h=0,M=0;return Object(rt.g)(y)?y.length===1?n=s=h=M=y[0]:y.length===2?(n=h=y[0],s=M=y[1]):y.length===3?(n=y[0],s=M=y[1],h=y[2]):(n=y[0],s=y[1],h=y[2],M=y[3]):n=s=h=M=y,[n,s,h,M]}},rtSP:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return pe});var rt=_("mrSG"),a=_("zJSt"),E=_("w02o"),e=_("YuPD"),r=_("iTfj"),p=_("ODXe"),b=_("uFwe");function S(ye,we){var Re=0;if(we===void 0){var He=Object(b.a)(ye),pn;try{for(He.s();!(pn=He.n()).done;){var fn=pn.value;(fn=+fn)&&(Re+=fn)}}catch(Tn){He.e(Tn)}finally{He.f()}}else{var Rn=-1,Cn=Object(b.a)(ye),kn;try{for(Cn.s();!(kn=Cn.n()).done;){var Mn=kn.value;(Mn=+we(Mn,++Rn,ye))&&(Re+=Mn)}}catch(Tn){Cn.e(Tn)}finally{Cn.f()}}return Re}function l(ye,we){var Re;if(we===void 0){var He=Object(b.a)(ye),pn;try{for(He.s();!(pn=He.n()).done;){var fn=pn.value;fn!=null&&(Re<fn||Re===void 0&&fn>=fn)&&(Re=fn)}}catch(Tn){He.e(Tn)}finally{He.f()}}else{var Rn=-1,Cn=Object(b.a)(ye),kn;try{for(Cn.s();!(kn=Cn.n()).done;){var Mn=kn.value;(Mn=we(Mn,++Rn,ye))!=null&&(Re<Mn||Re===void 0&&Mn>=Mn)&&(Re=Mn)}}catch(Tn){Cn.e(Tn)}finally{Cn.f()}}return Re}function A(ye,we){var Re;if(we===void 0){var He=Object(b.a)(ye),pn;try{for(He.s();!(pn=He.n()).done;){var fn=pn.value;fn!=null&&(Re>fn||Re===void 0&&fn>=fn)&&(Re=fn)}}catch(Tn){He.e(Tn)}finally{He.f()}}else{var Rn=-1,Cn=Object(b.a)(ye),kn;try{for(Cn.s();!(kn=Cn.n()).done;){var Mn=kn.value;(Mn=we(Mn,++Rn,ye))!=null&&(Re>Mn||Re===void 0&&Mn>=Mn)&&(Re=Mn)}}catch(Tn){Cn.e(Tn)}finally{Cn.f()}}return Re}function j(ye){return ye.target.depth}function y(ye){return ye.depth}function n(ye,we){return we-1-ye.height}function s(ye,we){return ye.sourceLinks.length?ye.depth:we-1}function h(ye){return ye.targetLinks.length?ye.depth:ye.sourceLinks.length?A(ye.sourceLinks,j)-1:0}function M(ye){return function(){return ye}}function O(ye,we){return v(ye.source,we.source)||ye.index-we.index}function T(ye,we){return v(ye.target,we.target)||ye.index-we.index}function v(ye,we){return ye.y0-we.y0}function m(ye){return ye.value}function C(ye){return ye.index}function D(ye){return ye.nodes}function Y(ye){return ye.links}function Z(ye,we){var Re=ye.get(we);if(!Re)throw new Error("missing: "+we);return Re}function et(ye){var we=ye.nodes,Re=Object(b.a)(we),He;try{for(Re.s();!(He=Re.n()).done;){var pn=He.value,fn=pn.y0,Rn=fn,Cn=Object(b.a)(pn.sourceLinks),kn;try{for(Cn.s();!(kn=Cn.n()).done;){var Mn=kn.value;Mn.y0=fn+Mn.width/2,fn+=Mn.width}}catch(tr){Cn.e(tr)}finally{Cn.f()}var Tn=Object(b.a)(pn.targetLinks),Un;try{for(Tn.s();!(Un=Tn.n()).done;){var Kn=Un.value;Kn.y1=Rn+Kn.width/2,Rn+=Kn.width}}catch(tr){Tn.e(tr)}finally{Tn.f()}}}catch(tr){Re.e(tr)}finally{Re.f()}}function dt(){var ye=0,we=0,Re=1,He=1,pn=24,fn=8,Rn,Cn=C,kn=s,Mn,Tn,Un=D,Kn=Y,tr=6;function or(){var pr={nodes:Un.apply(null,arguments),links:Kn.apply(null,arguments)};return nr(pr),er(pr),Sr(pr),Vr(pr),Fi(pr),et(pr),pr}or.update=function(pr){return et(pr),pr},or.nodeId=function(pr){return arguments.length?(Cn=typeof pr=="function"?pr:M(pr),or):Cn},or.nodeAlign=function(pr){return arguments.length?(kn=typeof pr=="function"?pr:M(pr),or):kn},or.nodeSort=function(pr){return arguments.length?(Mn=pr,or):Mn},or.nodeWidth=function(pr){return arguments.length?(pn=+pr,or):pn},or.nodePadding=function(pr){return arguments.length?(fn=Rn=+pr,or):fn},or.nodes=function(pr){return arguments.length?(Un=typeof pr=="function"?pr:M(pr),or):Un},or.links=function(pr){return arguments.length?(Kn=typeof pr=="function"?pr:M(pr),or):Kn},or.linkSort=function(pr){return arguments.length?(Tn=pr,or):Tn},or.size=function(pr){return arguments.length?(ye=we=0,Re=+pr[0],He=+pr[1],or):[Re-ye,He-we]},or.extent=function(pr){return arguments.length?(ye=+pr[0][0],Re=+pr[1][0],we=+pr[0][1],He=+pr[1][1],or):[[ye,we],[Re,He]]},or.iterations=function(pr){return arguments.length?(tr=+pr,or):tr};function nr(pr){var Yr=pr.nodes,Br=pr.links,Nr=Object(b.a)(Yr.entries()),Xr;try{for(Nr.s();!(Xr=Nr.n()).done;){var Kr=Xr.value,ni=Object(p.a)(Kr,2),fi=ni[0],$r=ni[1];$r.index=fi,$r.sourceLinks=[],$r.targetLinks=[]}}catch(uo){Nr.e(uo)}finally{Nr.f()}var ci=new Map(Yr.map(function(uo,xo){return[Cn(uo,xo,Yr),uo]})),Qr=Object(b.a)(Br.entries()),gi;try{for(Qr.s();!(gi=Qr.n()).done;){var Oi=gi.value,bi=Object(p.a)(Oi,2),zi=bi[0],Qi=bi[1];Qi.index=zi;var io=Qi.source,Wi=Qi.target;typeof io!="object"&&(io=Qi.source=Z(ci,io)),typeof Wi!="object"&&(Wi=Qi.target=Z(ci,Wi)),io.sourceLinks.push(Qi),Wi.targetLinks.push(Qi)}}catch(uo){Qr.e(uo)}finally{Qr.f()}if(Tn!=null){var Zi=Object(b.a)(Yr),Pi;try{for(Zi.s();!(Pi=Zi.n()).done;){var no=Pi.value,Mo=no.sourceLinks,ao=no.targetLinks;Mo.sort(Tn),ao.sort(Tn)}}catch(uo){Zi.e(uo)}finally{Zi.f()}}}function er(pr){var Yr=pr.nodes,Br=Object(b.a)(Yr),Nr;try{for(Br.s();!(Nr=Br.n()).done;){var Xr=Nr.value;Xr.value=Xr.fixedValue===void 0?Math.max(S(Xr.sourceLinks,m),S(Xr.targetLinks,m)):Xr.fixedValue}}catch(Kr){Br.e(Kr)}finally{Br.f()}}function Sr(pr){for(var Yr=pr.nodes,Br=Yr.length,Nr=new Set(Yr),Xr=new Set,Kr=0;Nr.size;){var ni=Object(b.a)(Nr),fi;try{for(ni.s();!(fi=ni.n()).done;){var $r=fi.value;$r.depth=Kr;var ci=Object(b.a)($r.sourceLinks),Qr;try{for(ci.s();!(Qr=ci.n()).done;){var gi=Qr.value,Oi=gi.target;Xr.add(Oi)}}catch(bi){ci.e(bi)}finally{ci.f()}}}catch(bi){ni.e(bi)}finally{ni.f()}if(++Kr>Br)throw new Error("circular link");Nr=Xr,Xr=new Set}}function Vr(pr){for(var Yr=pr.nodes,Br=Yr.length,Nr=new Set(Yr),Xr=new Set,Kr=0;Nr.size;){var ni=Object(b.a)(Nr),fi;try{for(ni.s();!(fi=ni.n()).done;){var $r=fi.value;$r.height=Kr;var ci=Object(b.a)($r.targetLinks),Qr;try{for(ci.s();!(Qr=ci.n()).done;){var gi=Qr.value,Oi=gi.source;Xr.add(Oi)}}catch(bi){ci.e(bi)}finally{ci.f()}}}catch(bi){ni.e(bi)}finally{ni.f()}if(++Kr>Br)throw new Error("circular link");Nr=Xr,Xr=new Set}}function ti(pr){var Yr=pr.nodes,Br=l(Yr,function(Oi){return Oi.depth})+1,Nr=(Re-ye-pn)/(Br-1),Xr=new Array(Br),Kr=Object(b.a)(Yr),ni;try{for(Kr.s();!(ni=Kr.n()).done;){var fi=ni.value,$r=Math.max(0,Math.min(Br-1,Math.floor(kn.call(null,fi,Br))));fi.layer=$r,fi.x0=ye+$r*Nr,fi.x1=fi.x0+pn,Xr[$r]?Xr[$r].push(fi):Xr[$r]=[fi]}}catch(Oi){Kr.e(Oi)}finally{Kr.f()}if(Mn){var ci=Object(b.a)(Xr),Qr;try{for(ci.s();!(Qr=ci.n()).done;){var gi=Qr.value;gi.sort(Mn)}}catch(Oi){ci.e(Oi)}finally{ci.f()}}return Xr}function hi(pr){var Yr=A(pr,function(zi){return(He-we-(zi.length-1)*Rn)/S(zi,m)}),Br=Object(b.a)(pr),Nr;try{for(Br.s();!(Nr=Br.n()).done;){var Xr=Nr.value,Kr=we,ni=Object(b.a)(Xr),fi;try{for(ni.s();!(fi=ni.n()).done;){var $r=fi.value;$r.y0=Kr,$r.y1=Kr+$r.value*Yr,Kr=$r.y1+Rn;var ci=Object(b.a)($r.sourceLinks),Qr;try{for(ci.s();!(Qr=ci.n()).done;){var gi=Qr.value;gi.width=gi.value*Yr}}catch(zi){ci.e(zi)}finally{ci.f()}}}catch(zi){ni.e(zi)}finally{ni.f()}Kr=(He-Kr+Rn)/(Xr.length+1);for(var Oi=0;Oi<Xr.length;++Oi){var bi=Xr[Oi];bi.y0+=Kr*(Oi+1),bi.y1+=Kr*(Oi+1)}ro(Xr)}}catch(zi){Br.e(zi)}finally{Br.f()}}function Fi(pr){var Yr=ti(pr);Rn=Math.min(fn,(He-we)/(l(Yr,function(Kr){return Kr.length})-1)),hi(Yr);for(var Br=0;Br<tr;++Br){var Nr=Math.pow(.99,Br),Xr=Math.max(1-Nr,(Br+1)/tr);si(Yr,Nr,Xr),to(Yr,Nr,Xr)}}function to(pr,Yr,Br){for(var Nr=1,Xr=pr.length;Nr<Xr;++Nr){var Kr=pr[Nr],ni=Object(b.a)(Kr),fi;try{for(ni.s();!(fi=ni.n()).done;){var $r=fi.value,ci=0,Qr=0,gi=Object(b.a)($r.targetLinks),Oi;try{for(gi.s();!(Oi=gi.n()).done;){var bi=Oi.value,zi=bi.source,Qi=bi.value,io=Qi*($r.layer-zi.layer);ci+=jr(zi,$r)*io,Qr+=io}}catch(Zi){gi.e(Zi)}finally{gi.f()}if(Qr>0){var Wi=(ci/Qr-$r.y0)*Yr;$r.y0+=Wi,$r.y1+=Wi,Vi($r)}}}catch(Zi){ni.e(Zi)}finally{ni.f()}Mn===void 0&&Kr.sort(v),Ti(Kr,Br)}}function si(pr,Yr,Br){for(var Nr=pr.length,Xr=Nr-2;Xr>=0;--Xr){var Kr=pr[Xr],ni=Object(b.a)(Kr),fi;try{for(ni.s();!(fi=ni.n()).done;){var $r=fi.value,ci=0,Qr=0,gi=Object(b.a)($r.sourceLinks),Oi;try{for(gi.s();!(Oi=gi.n()).done;){var bi=Oi.value,zi=bi.target,Qi=bi.value,io=Qi*(zi.layer-$r.layer);ci+=Ji($r,zi)*io,Qr+=io}}catch(Zi){gi.e(Zi)}finally{gi.f()}if(Qr>0){var Wi=(ci/Qr-$r.y0)*Yr;$r.y0+=Wi,$r.y1+=Wi,Vi($r)}}}catch(Zi){ni.e(Zi)}finally{ni.f()}Mn===void 0&&Kr.sort(v),Ti(Kr,Br)}}function Ti(pr,Yr){var Br=pr.length>>1,Nr=pr[Br];Li(pr,Nr.y0-Rn,Br-1,Yr),_i(pr,Nr.y1+Rn,Br+1,Yr),Li(pr,He,pr.length-1,Yr),_i(pr,we,0,Yr)}function _i(pr,Yr,Br,Nr){for(;Br<pr.length;++Br){var Xr=pr[Br],Kr=(Yr-Xr.y0)*Nr;Kr>1e-6&&(Xr.y0+=Kr,Xr.y1+=Kr),Yr=Xr.y1+Rn}}function Li(pr,Yr,Br,Nr){for(;Br>=0;--Br){var Xr=pr[Br],Kr=(Xr.y1-Yr)*Nr;Kr>1e-6&&(Xr.y0-=Kr,Xr.y1-=Kr),Yr=Xr.y0-Rn}}function Vi(pr){var Yr=pr.sourceLinks,Br=pr.targetLinks;if(Tn===void 0){var Nr=Object(b.a)(Br),Xr;try{for(Nr.s();!(Xr=Nr.n()).done;){var Kr=Xr.value,ni=Kr.source.sourceLinks;ni.sort(T)}}catch(gi){Nr.e(gi)}finally{Nr.f()}var fi=Object(b.a)(Yr),$r;try{for(fi.s();!($r=fi.n()).done;){var ci=$r.value,Qr=ci.target.targetLinks;Qr.sort(O)}}catch(gi){fi.e(gi)}finally{fi.f()}}}function ro(pr){if(Tn===void 0){var Yr=Object(b.a)(pr),Br;try{for(Yr.s();!(Br=Yr.n()).done;){var Nr=Br.value,Xr=Nr.sourceLinks,Kr=Nr.targetLinks;Xr.sort(T),Kr.sort(O)}}catch(ni){Yr.e(ni)}finally{Yr.f()}}}function jr(pr,Yr){var Br=pr.y0-(pr.sourceLinks.length-1)*Rn/2,Nr=Object(b.a)(pr.sourceLinks),Xr;try{for(Nr.s();!(Xr=Nr.n()).done;){var Kr=Xr.value,ni=Kr.target,fi=Kr.width;if(ni===Yr)break;Br+=fi+Rn}}catch(bi){Nr.e(bi)}finally{Nr.f()}var $r=Object(b.a)(Yr.targetLinks),ci;try{for($r.s();!(ci=$r.n()).done;){var Qr=ci.value,gi=Qr.source,Oi=Qr.width;if(gi===pr)break;Br-=Oi}}catch(bi){$r.e(bi)}finally{$r.f()}return Br}function Ji(pr,Yr){var Br=Yr.y0-(Yr.targetLinks.length-1)*Rn/2,Nr=Object(b.a)(Yr.targetLinks),Xr;try{for(Nr.s();!(Xr=Nr.n()).done;){var Kr=Xr.value,ni=Kr.source,fi=Kr.width;if(ni===pr)break;Br+=fi+Rn}}catch(bi){Nr.e(bi)}finally{Nr.f()}var $r=Object(b.a)(pr.sourceLinks),ci;try{for($r.s();!(ci=$r.n()).done;){var Qr=ci.value,gi=Qr.target,Oi=Qr.width;if(gi===Yr)break;Br-=Oi}}catch(bi){$r.e(bi)}finally{$r.f()}return Br}return or}var ht=Math.PI,St=2*ht,wt=1e-6,xt=St-wt;function ft(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Bt(){return new ft}ft.prototype=Bt.prototype={constructor:ft,moveTo:function(we,Re){this._+="M"+(this._x0=this._x1=+we)+","+(this._y0=this._y1=+Re)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(we,Re){this._+="L"+(this._x1=+we)+","+(this._y1=+Re)},quadraticCurveTo:function(we,Re,He,pn){this._+="Q"+ +we+","+ +Re+","+(this._x1=+He)+","+(this._y1=+pn)},bezierCurveTo:function(we,Re,He,pn,fn,Rn){this._+="C"+ +we+","+ +Re+","+ +He+","+ +pn+","+(this._x1=+fn)+","+(this._y1=+Rn)},arcTo:function(we,Re,He,pn,fn){we=+we,Re=+Re,He=+He,pn=+pn,fn=+fn;var Rn=this._x1,Cn=this._y1,kn=He-we,Mn=pn-Re,Tn=Rn-we,Un=Cn-Re,Kn=Tn*Tn+Un*Un;if(fn<0)throw new Error("negative radius: "+fn);if(this._x1===null)this._+="M"+(this._x1=we)+","+(this._y1=Re);else if(Kn>wt)if(!(Math.abs(Un*kn-Mn*Tn)>wt)||!fn)this._+="L"+(this._x1=we)+","+(this._y1=Re);else{var tr=He-Rn,or=pn-Cn,nr=kn*kn+Mn*Mn,er=tr*tr+or*or,Sr=Math.sqrt(nr),Vr=Math.sqrt(Kn),ti=fn*Math.tan((ht-Math.acos((nr+Kn-er)/(2*Sr*Vr)))/2),hi=ti/Vr,Fi=ti/Sr;Math.abs(hi-1)>wt&&(this._+="L"+(we+hi*Tn)+","+(Re+hi*Un)),this._+="A"+fn+","+fn+",0,0,"+ +(Un*tr>Tn*or)+","+(this._x1=we+Fi*kn)+","+(this._y1=Re+Fi*Mn)}},arc:function(we,Re,He,pn,fn,Rn){we=+we,Re=+Re,He=+He,Rn=!!Rn;var Cn=He*Math.cos(pn),kn=He*Math.sin(pn),Mn=we+Cn,Tn=Re+kn,Un=1^Rn,Kn=Rn?pn-fn:fn-pn;if(He<0)throw new Error("negative radius: "+He);this._x1===null?this._+="M"+Mn+","+Tn:(Math.abs(this._x1-Mn)>wt||Math.abs(this._y1-Tn)>wt)&&(this._+="L"+Mn+","+Tn),!!He&&(Kn<0&&(Kn=Kn%St+St),Kn>xt?this._+="A"+He+","+He+",0,1,"+Un+","+(we-Cn)+","+(Re-kn)+"A"+He+","+He+",0,1,"+Un+","+(this._x1=Mn)+","+(this._y1=Tn):Kn>wt&&(this._+="A"+He+","+He+",0,"+ +(Kn>=ht)+","+Un+","+(this._x1=we+He*Math.cos(fn))+","+(this._y1=Re+He*Math.sin(fn))))},rect:function(we,Re,He,pn){this._+="M"+(this._x0=this._x1=+we)+","+(this._y0=this._y1=+Re)+"h"+ +He+"v"+ +pn+"h"+-He+"Z"},toString:function(){return this._}};var Rt=Bt,Ot=Array.prototype.slice,X=function(ye){return function(){return ye}};function ut(ye){return ye[0]}function vt(ye){return ye[1]}var pt=function(ye,we){return[(we=+we)*Math.cos(ye-=Math.PI/2),we*Math.sin(ye)]};function Et(ye){return ye.source}function q(ye){return ye.target}function st(ye){var we=Et,Re=q,He=ut,pn=vt,fn=null;function Rn(){var Cn,kn=Ot.call(arguments),Mn=we.apply(this,kn),Tn=Re.apply(this,kn);if(fn||(fn=Cn=Rt()),ye(fn,+He.apply(this,(kn[0]=Mn,kn)),+pn.apply(this,kn),+He.apply(this,(kn[0]=Tn,kn)),+pn.apply(this,kn)),Cn)return fn=null,Cn+""||null}return Rn.source=function(Cn){return arguments.length?(we=Cn,Rn):we},Rn.target=function(Cn){return arguments.length?(Re=Cn,Rn):Re},Rn.x=function(Cn){return arguments.length?(He=typeof Cn=="function"?Cn:X(+Cn),Rn):He},Rn.y=function(Cn){return arguments.length?(pn=typeof Cn=="function"?Cn:X(+Cn),Rn):pn},Rn.context=function(Cn){return arguments.length?(fn=Cn==null?null:Cn,Rn):fn},Rn}function it(ye,we,Re,He,pn){ye.moveTo(we,Re),ye.bezierCurveTo(we=(we+He)/2,Re,we,pn,He,pn)}function z(ye,we,Re,He,pn){ye.moveTo(we,Re),ye.bezierCurveTo(we,Re=(Re+pn)/2,He,Re,He,pn)}function P(ye,we,Re,He,pn){var fn=pt(we,Re),Rn=pt(we,Re=(Re+pn)/2),Cn=pt(He,Re),kn=pt(He,pn);ye.moveTo(fn[0],fn[1]),ye.bezierCurveTo(Rn[0],Rn[1],Cn[0],Cn[1],kn[0],kn[1])}function H(){return st(it)}function k(){return st(z)}function d(){var ye=st(P);return ye.angle=ye.x,delete ye.x,ye.radius=ye.y,delete ye.y,ye}function g(ye){return[ye.source.x1,ye.y0]}function F(ye){return[ye.target.x0,ye.y1]}var V=function(){return H().source(g).target(F)},tt={left:y,right:n,center:h,justify:s},ot={nodeId:function(we){return we.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function at(ye){var we=Object(r.isString)(ye)?tt[ye]:Object(r.isFunction)(ye)?ye:null;return we||s}function At(ye){return Object(r.assign)({},ot,ye)}function yt(ye,we){var Re=At(ye),He=Re.nodeId,pn=Re.nodeSort,fn=Re.nodeAlign,Rn=Re.nodeWidth,Cn=Re.nodePadding,kn=dt().nodeSort(pn).links(function(Tn){return Tn.links}).nodeWidth(Rn).nodePadding(Cn).nodeAlign(at(fn)).extent([[0,0],[1,1]]).nodeId(He),Mn=kn(we);return Mn.nodes.forEach(function(Tn){var Un=Tn.x0,Kn=Tn.x1,tr=Tn.y0,or=Tn.y1;Tn.x=[Un,Kn,Kn,Un],Tn.y=[tr,tr,or,or]}),Mn.links.forEach(function(Tn){var Un=Tn.source,Kn=Tn.target,tr=Un.x1,or=Kn.x0;Tn.x=[tr,tr,or,or];var nr=Tn.width/2;Tn.y=[Tn.y0+nr,Tn.y0-nr,Tn.y1+nr,Tn.y1-nr]}),Mn}var gt=_("tKoa"),bt=_("DyAw"),Tt="x",Dt="y",Ut="name";function jt(ye,we,Re){return Object(r.size)(we)===0?!1:we.includes(Re)?!0:we.some(function(He){return jt(ye,ye.get(He),Re)})}function Vt(ye,we,Re){var He=[],pn=[],fn=new Map;return Object(r.each)(ye,function(Rn){var Cn=Rn[we],kn=Rn[Re];jt(fn,[Cn],kn)?pn.push(Rn):(He.push(Rn),fn.has(kn)||fn.set(kn,[]),fn.get(kn).push(Cn))}),pn.length!==0&&console.warn("sankey data contains circle, "+pn.length+" records removed.",pn),He}function Ht(ye){var we=ye.chart,Re=ye.options,He=Re.data,pn=Re.sourceField,fn=Re.targetField,Rn=Re.weightField,Cn=Re.color,kn=Re.nodeStyle,Mn=Re.edgeStyle,Tn=Re.label,Un=Re.tooltip,Kn=Re.nodeAlign,tr=Re.nodePaddingRatio,or=Re.nodeWidthRatio,nr=Re.nodeSort;we.legend(!1),we.tooltip(Un),we.axis(!1);var er=Object(bt.b)(Vt(He,pn,fn),pn,fn,Rn),Sr=yt({nodeAlign:Kn,nodePadding:tr,nodeWidth:or,nodeSort:nr},er),Vr=Sr.nodes,ti=Sr.links,hi=Vr.map(function(Ti){return{x:Ti.x,y:Ti.y,name:Ti.name}}),Fi=ti.map(function(Ti){return{source:Ti.source.name,target:Ti.target.name,name:Ti.source.name||Ti.target.name,x:Ti.x,y:Ti.y,value:Ti.value}}),to=we.createView();to.data(hi),Object(gt.f)({chart:to,options:{xField:Tt,yField:Dt,seriesField:Ut,polygon:{color:Cn,style:kn},label:Tn,tooltip:!1}});var si=we.createView();return si.data(Fi),Object(gt.b)({chart:si,options:{xField:Tt,yField:Dt,seriesField:Ut,edge:{color:Cn,style:Mn,shape:"arc"},tooltip:Un,state:{active:{style:{opacity:.8,lineWidth:0}}}}}),we.interaction("element-active"),we.scale({x:{sync:!0,nice:!0},y:{sync:!0,nice:!0},name:{sync:"color"}}),ye}function re(ye){return Object(e.e)(Ht,E.c,E.a,E.j)(ye)}var pe=function(ye){Object(rt.b)(we,ye);function we(){var Re=ye!==null&&ye.apply(this,arguments)||this;return Re.type="sankey",Re}return we.prototype.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},label:{fields:["x","name"],callback:function(He,pn){var fn=He[1]===1;return{style:{fill:"#545454",textAlign:fn?"end":"start"},offsetX:fn?-8:8,content:pn}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value"],formatter:function(He){var pn=He.source,fn=He.target,Rn=He.value;return{name:pn+" -> "+fn,value:Rn}}},nodeWidthRatio:.008,nodePaddingRatio:.01}},we.prototype.getSchemaAdaptor=function(){return re},we}(a.a)},sGsY:function(Fn,Gt,_){"use strict";var rt=_("rePB"),a=_("wx14"),E=_("q1tI"),e=_("TSYQ"),r=_.n(e),p=_("H84U"),b=_("/ezw"),S=_("B6l+"),l=_.n(S),A=function(Bt){var Rt=Bt.value,Ot=Bt.formatter,X=Bt.precision,ut=Bt.decimalSeparator,vt=Bt.groupSeparator,pt=vt===void 0?"":vt,Et=Bt.prefixCls,q;if(typeof Ot=="function")q=Ot(Rt);else{var st=String(Rt),it=st.match(/^(-?)(\d*)(\.(\d+))?$/);if(!it||st==="-")q=st;else{var z=it[1],P=it[2]||"0",H=it[4]||"";P=P.replace(/\B(?=(\d{3})+(?!\d))/g,pt),typeof X=="number"&&(H=l()(H,X,"0").slice(0,X)),H&&(H="".concat(ut).concat(H)),q=[E.createElement("span",{key:"int",className:"".concat(Et,"-content-value-int")},z,P),H&&E.createElement("span",{key:"decimal",className:"".concat(Et,"-content-value-decimal")},H)]}}return E.createElement("span",{className:"".concat(Et,"-content-value")},q)},j=A,y=function(Bt){var Rt=Bt.prefixCls,Ot=Bt.className,X=Bt.style,ut=Bt.valueStyle,vt=Bt.value,pt=vt===void 0?0:vt,Et=Bt.title,q=Bt.valueRender,st=Bt.prefix,it=Bt.suffix,z=Bt.loading,P=Bt.direction,H=Bt.onMouseEnter,k=Bt.onMouseLeave,d=E.createElement(j,Object(a.a)({},Bt,{value:pt})),g=r()(Rt,Object(rt.a)({},"".concat(Rt,"-rtl"),P==="rtl"),Ot);return E.createElement("div",{className:g,style:X,onMouseEnter:H,onMouseLeave:k},Et&&E.createElement("div",{className:"".concat(Rt,"-title")},Et),E.createElement(b.a,{paragraph:!1,loading:z},E.createElement("div",{style:ut,className:"".concat(Rt,"-content")},st&&E.createElement("span",{className:"".concat(Rt,"-content-prefix")},st),q?q(d):d,it&&E.createElement("span",{className:"".concat(Rt,"-content-suffix")},it))))};y.defaultProps={decimalSeparator:".",groupSeparator:",",loading:!1};var n=Object(p.c)({prefixCls:"statistic"})(y),s=n,h=_("1OyB"),M=_("vuIU"),O=_("Ji7U"),T=_("LK+K"),v=_("ODXe"),m=_("QQZ/"),C=_.n(m),D=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function Y(ft,Bt){var Rt=ft,Ot=/\[[^\]]*]/g,X=(Bt.match(Ot)||[]).map(function(Et){return Et.slice(1,-1)}),ut=Bt.replace(Ot,"[]"),vt=D.reduce(function(Et,q){var st=Object(v.a)(q,2),it=st[0],z=st[1];if(Et.indexOf(it)!==-1){var P=Math.floor(Rt/z);return Rt-=P*z,Et.replace(new RegExp("".concat(it,"+"),"g"),function(H){var k=H.length;return C()(P.toString(),k,"0")})}return Et},ut),pt=0;return vt.replace(Ot,function(){var Et=X[pt];return pt+=1,Et})}function Z(ft,Bt){var Rt=Bt.format,Ot=Rt===void 0?"":Rt,X=new Date(ft).getTime(),ut=Date.now(),vt=Math.max(X-ut,0);return Y(vt,Ot)}var et=_("0n0R"),dt=1e3/30;function ht(ft){return new Date(ft).getTime()}var St=function(ft){Object(O.a)(Rt,ft);var Bt=Object(T.a)(Rt);function Rt(){var Ot;return Object(h.a)(this,Rt),Ot=Bt.apply(this,arguments),Ot.syncTimer=function(){var X=Ot.props.value,ut=ht(X);ut>=Date.now()?Ot.startTimer():Ot.stopTimer()},Ot.startTimer=function(){Ot.countdownId||(Ot.countdownId=window.setInterval(function(){Ot.forceUpdate()},dt))},Ot.stopTimer=function(){var X=Ot.props,ut=X.onFinish,vt=X.value;if(Ot.countdownId){clearInterval(Ot.countdownId),Ot.countdownId=void 0;var pt=ht(vt);ut&&pt<Date.now()&&ut()}},Ot.formatCountdown=function(X,ut){var vt=Ot.props.format;return Z(X,Object(a.a)(Object(a.a)({},ut),{format:vt}))},Ot.valueRender=function(X){return Object(et.a)(X,{title:void 0})},Ot}return Object(M.a)(Rt,[{key:"componentDidMount",value:function(){this.syncTimer()}},{key:"componentDidUpdate",value:function(){this.syncTimer()}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"render",value:function(){return E.createElement(s,Object(a.a)({valueRender:this.valueRender},this.props,{formatter:this.formatCountdown}))}}]),Rt}(E.Component);St.defaultProps={format:"HH:mm:ss"};var wt=St;s.Countdown=wt;var xt=Gt.a=s},sKgW:function(Fn,Gt){var _=9007199254740991,rt=Math.floor;function a(E,e){var r="";if(!E||e<1||e>_)return r;do e%2&&(r+=E),e=rt(e/2),e&&(E+=E);while(e);return r}Fn.exports=a},sYIZ:function(Fn,Gt,_){"use strict";var rt=_("mrSG"),a=_("aFU3");function E(n,s){if(s){var h=Object(a.invert)(s);return Object(a.multiplyVec2)(h,n)}return n}function e(n,s,h){var M=n.getTotalMatrix();if(M){var O=E([s,h,1],M),T=O[0],v=O[1];return[T,v]}return[s,h]}function r(n,s,h){if(n.isCanvas&&n.isCanvas())return!0;if(!Object(a.isAllowCapture)(n)||n.cfg.isInView===!1)return!1;if(n.cfg.clipShape){var M=e(n,s,h),O=M[0],T=M[1];if(n.isClipped(O,T))return!1}var v=n.cfg.cacheCanvasBBox||n.getCanvasBBox();return s>=v.minX&&s<=v.maxX&&h>=v.minY&&h<=v.maxY}function p(n,s,h){if(!r(n,s,h))return null;for(var M=null,O=n.getChildren(),T=O.length,v=T-1;v>=0;v--){var m=O[v];if(m.isGroup())M=p(m,s,h);else if(r(m,s,h)){var C=m,D=e(m,s,h),Y=D[0],Z=D[1];C.isInShape(Y,Z)&&(M=m)}if(M)break}return M}var b=_("R5nb"),S=_("wq2r"),l=_("cyZq"),A=_("9eUa"),j=function(n){Object(rt.b)(s,n);function s(){return n!==null&&n.apply(this,arguments)||this}return s.prototype.getDefaultCfg=function(){var h=n.prototype.getDefaultCfg.call(this);return h.renderer="canvas",h.autoDraw=!0,h.localRefresh=!0,h.refreshElements=[],h.clipView=!0,h.quickHit=!1,h},s.prototype.onCanvasChange=function(h){(h==="attr"||h==="sort"||h==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},s.prototype.getShapeBase=function(){return b},s.prototype.getGroupBase=function(){return S.a},s.prototype.getPixelRatio=function(){var h=this.get("pixelRatio")||Object(l.d)();return h>=1?Math.ceil(h):1},s.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},s.prototype.createDom=function(){var h=document.createElement("canvas"),M=h.getContext("2d");return this.set("context",M),h},s.prototype.setDOMSize=function(h,M){n.prototype.setDOMSize.call(this,h,M);var O=this.get("context"),T=this.get("el"),v=this.getPixelRatio();T.width=v*h,T.height=v*M,v>1&&O.scale(v,v)},s.prototype.clear=function(){n.prototype.clear.call(this),this._clearFrame();var h=this.get("context"),M=this.get("el");h.clearRect(0,0,M.width,M.height)},s.prototype.getShape=function(h,M){var O;return this.get("quickHit")?O=p(this,h,M):O=n.prototype.getShape.call(this,h,M,null),O},s.prototype._getRefreshRegion=function(){var h=this.get("refreshElements"),M=this.getViewRange(),O;if(h.length&&h[0]===this)O=M;else if(O=Object(A.f)(h),O){O.minX=Math.floor(O.minX),O.minY=Math.floor(O.minY),O.maxX=Math.ceil(O.maxX),O.maxY=Math.ceil(O.maxY),O.maxY+=1;var T=this.get("clipView");T&&(O=Object(A.g)(O,M))}return O},s.prototype.refreshElement=function(h){var M=this.get("refreshElements");M.push(h)},s.prototype._clearFrame=function(){var h=this.get("drawFrame");h&&(Object(l.a)(h),this.set("drawFrame",null),this.set("refreshElements",[]))},s.prototype.draw=function(){var h=this.get("drawFrame");this.get("autoDraw")&&h||this._startDraw()},s.prototype._drawAll=function(){var h=this.get("context"),M=this.get("el"),O=this.getChildren();h.clearRect(0,0,M.width,M.height),Object(A.a)(h,this),Object(A.d)(h,O),this.set("refreshElements",[])},s.prototype._drawRegion=function(){var h=this.get("context"),M=this.get("refreshElements"),O=this.getChildren(),T=this._getRefreshRegion();T?(h.clearRect(T.minX,T.minY,T.maxX-T.minX,T.maxY-T.minY),h.save(),h.beginPath(),h.rect(T.minX,T.minY,T.maxX-T.minX,T.maxY-T.minY),h.clip(),Object(A.a)(h,this),Object(A.b)(this,O,T),Object(A.d)(h,O,T),h.restore()):M.length&&Object(A.c)(M),Object(l.c)(M,function(v){v.get("hasChanged")&&v.set("hasChanged",!1)}),this.set("refreshElements",[])},s.prototype._startDraw=function(){var h=this,M=this.get("drawFrame");M||(M=Object(l.n)(function(){h.get("localRefresh")?h._drawRegion():h._drawAll(),h.set("drawFrame",null)}),this.set("drawFrame",M))},s.prototype.skipDraw=function(){},s}(a.AbstractCanvas),y=Gt.a=j},sqD9:function(Fn,Gt,_){"use strict";_.d(Gt,"b",function(){return e}),_.d(Gt,"a",function(){return r});var rt=_("mrSG"),a=_("iTfj"),E=_("F/eT");function e(p,b,S,l){var A=Object(a.reduce)(p,function(j,y){var n=y[S],s=j.has(n)?j.get(n):0,h=y[b];return s=Object(E.a)(h)?s+h:s,j.set(n,s),j},new Map);return Object(a.map)(p,function(j){var y,n=j[b],s=j[S],h=Object(E.a)(n)?n/A.get(s):0;return Object(rt.a)(Object(rt.a)({},j),(y={},y[l]=h,y))})}function r(p,b,S,l,A){return A?e(p,b,S,l):p}},sstZ:function(Fn,Gt,_){"use strict";_.d(Gt,"j",function(){return a}),_.d(Gt,"c",function(){return E}),_.d(Gt,"g",function(){return e}),_.d(Gt,"b",function(){return r});var rt=_("iTfj");_.d(Gt,"e",function(){return rt.isNil}),_.d(Gt,"d",function(){return rt.isFunction}),_.d(Gt,"h",function(){return rt.isString}),_.d(Gt,"f",function(){return rt.isObject}),_.d(Gt,"i",function(){return rt.mix}),_.d(Gt,"a",function(){return rt.each}),_.d(Gt,"k",function(){return rt.upperFirst});function a(p,b){var S=p.indexOf(b);S!==-1&&p.splice(S,1)}var E=typeof window!="undefined"&&typeof window.document!="undefined";function e(p,b){if(p.isCanvas())return!0;for(var S=b.getParent(),l=!1;S;){if(S===p){l=!0;break}S=S.getParent()}return l}function r(p){return p.cfg.visible&&p.cfg.capture}},tE4n:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return k});var rt=_("mrSG"),a=_("zJSt"),E=_("YuPD"),e=_("iTfj"),r=_("tKoa"),p=_("w02o"),b=_("ODXe");function S(d,g,F,V){d=d.filter(function(jt){var Vt=g(jt),Ht=F(jt);return Vt!=null&&isFinite(Vt)&&Ht!=null&&isFinite(Ht)}),V&&d.sort(function(jt,Vt){return g(jt)-g(Vt)});for(var tt=d.length,ot=new Float64Array(tt),at=new Float64Array(tt),At=0,yt=0,gt,bt,Tt,Dt=0;Dt<tt;)Tt=d[Dt],ot[Dt]=gt=+g(Tt),at[Dt]=bt=+F(Tt),++Dt,At+=(gt-At)/Dt,yt+=(bt-yt)/Dt;for(var Ut=0;Ut<tt;++Ut)ot[Ut]-=At,at[Ut]-=yt;return[ot,at,At,yt]}function l(d,g,F,V){for(var tt=0,ot=0,at=d.length;ot<at;ot++){var At=d[ot],yt=+g(At),gt=+F(At);yt!=null&&isFinite(yt)&&gt!=null&&isFinite(gt)&&V(yt,gt,tt++)}}function A(d,g,F,V,tt){var ot=0,at=0;return l(d,g,F,function(At,yt){var gt=yt-tt(At),bt=yt-V;ot+=gt*gt,at+=bt*bt}),1-ot/at}function j(d){return Math.atan2(d[1][1]-d[0][1],d[1][0]-d[0][0])*180/Math.PI}function y(d){return[(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2]}function n(d,g,F){for(var V=Math.log(g-d)*Math.LOG10E+1|0,tt=1*Math.pow(10,-V/2-1),ot=1e4,at=[yt(d),yt(g)],At=0;gt(at)&&At<ot;);return at;function yt(bt){return[bt,F(bt)]}function gt(bt){At++;for(var Tt=bt.length,Dt=!1,Ut=0;Ut<Tt-1;Ut++){var jt=bt[Ut],Vt=bt[Ut+1],Ht=y([jt,Vt]),re=yt(Ht[0]),pe=j([jt,Ht]),ye=j([jt,re]),we=Math.abs(pe-ye);we>tt&&(bt.splice(Ut+1,0,re),Dt=!0)}return Dt}}function s(d,g,F,V){var tt=V-d*d,ot=Math.abs(tt)<1e-24?0:(F-d*g)/tt,at=g-ot*d;return[at,ot]}var h=function(){var d=function(ot){return ot[0]},g=function(ot){return ot[1]},F;function V(tt){var ot=0,at=0,At=0,yt=0,gt=0,bt=0,Tt=F?+F[0]:Infinity,Dt=F?+F[1]:-Infinity;l(tt,d,g,function(ye,we){var Re=Math.log(we),He=ye*we;++ot,at+=(we-at)/ot,yt+=(He-yt)/ot,bt+=(ye*He-bt)/ot,At+=(we*Re-At)/ot,gt+=(He*Re-gt)/ot,F||(ye<Tt&&(Tt=ye),ye>Dt&&(Dt=ye))});var Ut=s(yt/at,At/at,gt/at,bt/at),jt=Object(b.a)(Ut,2),Vt=jt[0],Ht=jt[1];Vt=Math.exp(Vt);var re=function(we){return Vt*Math.exp(Ht*we)},pe=n(Tt,Dt,re);return pe.a=Vt,pe.b=Ht,pe.predict=re,pe.rSquared=A(tt,d,g,at,re),pe}return V.domain=function(tt){return arguments.length?(F=tt,V):F},V.x=function(tt){return arguments.length?(d=tt,V):d},V.y=function(tt){return arguments.length?(g=tt,V):g},V},M=function(){var d=function(ot){return ot[0]},g=function(ot){return ot[1]},F;function V(tt){var ot=0,at=0,At=0,yt=0,gt=0,bt=F?+F[0]:Infinity,Tt=F?+F[1]:-Infinity;l(tt,d,g,function(pe,ye){++ot,at+=(pe-at)/ot,At+=(ye-At)/ot,yt+=(pe*ye-yt)/ot,gt+=(pe*pe-gt)/ot,F||(pe<bt&&(bt=pe),pe>Tt&&(Tt=pe))});var Dt=s(at,At,yt,gt),Ut=Object(b.a)(Dt,2),jt=Ut[0],Vt=Ut[1],Ht=function(ye){return Vt*ye+jt},re=[[bt,Ht(bt)],[Tt,Ht(Tt)]];return re.a=Vt,re.b=jt,re.predict=Ht,re.rSquared=A(tt,d,g,At,Ht),re}return V.domain=function(tt){return arguments.length?(F=tt,V):F},V.x=function(tt){return arguments.length?(d=tt,V):d},V.y=function(tt){return arguments.length?(g=tt,V):g},V};function O(d){d.sort(function(F,V){return F-V});var g=d.length/2;return g%1==0?(d[g-1]+d[g])/2:d[Math.floor(g)]}var T=2,v=1e-12,m=function(){var d=function(ot){return ot[0]},g=function(ot){return ot[1]},F=.3;function V(tt){for(var ot=S(tt,d,g,!0),at=Object(b.a)(ot,4),At=at[0],yt=at[1],gt=at[2],bt=at[3],Tt=At.length,Dt=Math.max(2,~~(F*Tt)),Ut=new Float64Array(Tt),jt=new Float64Array(Tt),Vt=new Float64Array(Tt).fill(1),Ht=-1;++Ht<=T;){for(var re=[0,Dt-1],pe=0;pe<Tt;++pe){for(var ye=At[pe],we=re[0],Re=re[1],He=ye-At[we]>At[Re]-ye?we:Re,pn=0,fn=0,Rn=0,Cn=0,kn=0,Mn=1/Math.abs(At[He]-ye||1),Tn=we;Tn<=Re;++Tn){var Un=At[Tn],Kn=yt[Tn],tr=C(Math.abs(ye-Un)*Mn)*Vt[Tn],or=Un*tr;pn+=tr,fn+=or,Rn+=Kn*tr,Cn+=Kn*or,kn+=Un*or}var nr=s(fn/pn,Rn/pn,Cn/pn,kn/pn),er=Object(b.a)(nr,2),Sr=er[0],Vr=er[1];Ut[pe]=Sr+Vr*ye,jt[pe]=Math.abs(yt[pe]-Ut[pe]),D(At,pe+1,re)}if(Ht===T)break;var ti=O(jt);if(Math.abs(ti)<v)break;for(var hi=0,Fi,to;hi<Tt;++hi)Fi=jt[hi]/(6*ti),Vt[hi]=Fi>=1?v:(to=1-Fi*Fi)*to}return Y(At,Ut,gt,bt)}return V.bandwidth=function(tt){return arguments.length?(F=tt,V):F},V.x=function(tt){return arguments.length?(d=tt,V):d},V.y=function(tt){return arguments.length?(g=tt,V):g},V};function C(d){return(d=1-d*d*d)*d*d}function D(d,g,F){var V=d[g],tt=F[0],ot=F[1]+1;if(!(ot>=d.length))for(;g>tt&&d[ot]-V<=V-d[tt];)F[0]=++tt,F[1]=ot,++ot}function Y(d,g,F,V){for(var tt=d.length,ot=[],at=0,At=0,yt=[],gt;at<tt;++at)gt=d[at]+F,yt[0]===gt?yt[1]+=(g[at]-yt[1])/++At:(At=0,yt[1]+=V,yt=[gt,g[at]],ot.push(yt));return yt[1]+=V,ot}var Z=function(){var d=function(ot){return ot[0]},g=function(ot){return ot[1]},F;function V(tt){var ot=0,at=0,At=0,yt=0,gt=0,bt=F?+F[0]:Infinity,Tt=F?+F[1]:-Infinity;l(tt,d,g,function(pe,ye){var we=Math.log(pe);++ot,at+=(we-at)/ot,At+=(ye-At)/ot,yt+=(we*ye-yt)/ot,gt+=(we*we-gt)/ot,F||(pe<bt&&(bt=pe),pe>Tt&&(Tt=pe))});var Dt=s(at,At,yt,gt),Ut=Object(b.a)(Dt,2),jt=Ut[0],Vt=Ut[1],Ht=function(ye){return Vt*Math.log(ye)+jt},re=n(bt,Tt,Ht);return re.a=Vt,re.b=jt,re.predict=Ht,re.rSquared=A(tt,d,g,At,Ht),re}return V.domain=function(tt){return arguments.length?(F=tt,V):F},V.x=function(tt){return arguments.length?(d=tt,V):d},V.y=function(tt){return arguments.length?(g=tt,V):g},V},et=function(){var d=function(ot){return ot[0]},g=function(ot){return ot[1]},F;function V(tt){var ot=S(tt,d,g),at=Object(b.a)(ot,4),At=at[0],yt=at[1],gt=at[2],bt=at[3],Tt=At.length,Dt=0,Ut=0,jt=0,Vt=0,Ht=0,re,pe,ye,we;for(re=0;re<Tt;)pe=At[re],ye=yt[re++],we=pe*pe,Dt+=(we-Dt)/re,Ut+=(we*pe-Ut)/re,jt+=(we*we-jt)/re,Vt+=(pe*ye-Vt)/re,Ht+=(we*ye-Ht)/re;var Re=0,He=0,pn=F?+F[0]:Infinity,fn=F?+F[1]:-Infinity;l(tt,d,g,function(tr,or){He++,Re+=(or-Re)/He,F||(tr<pn&&(pn=tr),tr>fn&&(fn=tr))});var Rn=jt-Dt*Dt,Cn=Dt*Rn-Ut*Ut,kn=(Ht*Dt-Vt*Ut)/Cn,Mn=(Vt*Rn-Ht*Ut)/Cn,Tn=-kn*Dt,Un=function(or){return or=or-gt,kn*or*or+Mn*or+Tn+bt},Kn=n(pn,fn,Un);return Kn.a=kn,Kn.b=Mn-2*kn*gt,Kn.c=Tn-Mn*gt+kn*gt*gt+bt,Kn.predict=Un,Kn.rSquared=A(tt,d,g,Re,Un),Kn}return V.domain=function(tt){return arguments.length?(F=tt,V):F},V.x=function(tt){return arguments.length?(d=tt,V):d},V.y=function(tt){return arguments.length?(g=tt,V):g},V},dt=function(){var d=function(at){return at[0]},g=function(at){return at[1]},F=3,V;function tt(ot){if(F===1){var at=M().x(d).y(g).domain(V)(ot);return at.coefficients=[at.b,at.a],delete at.a,delete at.b,at}if(F===2){var At=et().x(d).y(g).domain(V)(ot);return At.coefficients=[At.c,At.b,At.a],delete At.a,delete At.b,delete At.c,At}var yt=S(ot,d,g),gt=Object(b.a)(yt,4),bt=gt[0],Tt=gt[1],Dt=gt[2],Ut=gt[3],jt=bt.length,Vt=[],Ht=[],re=F+1,pe=0,ye=0,we=V?+V[0]:Infinity,Re=V?+V[1]:-Infinity;l(ot,d,g,function(Un,Kn){++ye,pe+=(Kn-pe)/ye,V||(Un<we&&(we=Un),Un>Re&&(Re=Un))});var He,pn,fn,Rn,Cn;for(He=0;He<re;++He){for(fn=0,Rn=0;fn<jt;++fn)Rn+=Math.pow(bt[fn],He)*Tt[fn];for(Vt.push(Rn),Cn=new Float64Array(re),pn=0;pn<re;++pn){for(fn=0,Rn=0;fn<jt;++fn)Rn+=Math.pow(bt[fn],He+pn);Cn[pn]=Rn}Ht.push(Cn)}Ht.push(Vt);var kn=St(Ht),Mn=function(Kn){Kn-=Dt;var tr=Ut+kn[0]+kn[1]*Kn+kn[2]*Kn*Kn;for(He=3;He<re;++He)tr+=kn[He]*Math.pow(Kn,He);return tr},Tn=n(we,Re,Mn);return Tn.coefficients=ht(re,kn,-Dt,Ut),Tn.predict=Mn,Tn.rSquared=A(ot,d,g,pe,Mn),Tn}return tt.domain=function(ot){return arguments.length?(V=ot,tt):V},tt.x=function(ot){return arguments.length?(d=ot,tt):d},tt.y=function(ot){return arguments.length?(g=ot,tt):g},tt.order=function(ot){return arguments.length?(F=ot,tt):F},tt};function ht(d,g,F,V){var tt=Array(d),ot,at,At,yt;for(ot=0;ot<d;++ot)tt[ot]=0;for(ot=d-1;ot>=0;--ot)for(At=g[ot],yt=1,tt[ot]+=At,at=1;at<=ot;++at)yt*=(ot+1-at)/at,tt[ot-at]+=At*Math.pow(F,at)*yt;return tt[0]+=V,tt}function St(d){var g=d.length-1,F=[],V,tt,ot,at,At;for(V=0;V<g;++V){for(at=V,tt=V+1;tt<g;++tt)Math.abs(d[V][tt])>Math.abs(d[V][at])&&(at=tt);for(ot=V;ot<g+1;++ot)At=d[ot][V],d[ot][V]=d[ot][at],d[ot][at]=At;for(tt=V+1;tt<g;++tt)for(ot=g;ot>=V;ot--)d[ot][tt]-=d[ot][V]*d[V][tt]/d[V][V]}for(tt=g-1;tt>=0;--tt){for(At=0,ot=tt+1;ot<g;++ot)At+=d[ot][tt]*F[ot];F[tt]=(d[g][tt]-At)/d[tt][tt]}return F}var wt=function(){var d=function(ot){return ot[0]},g=function(ot){return ot[1]},F;function V(tt){var ot=0,at=0,At=0,yt=0,gt=0,bt=0,Tt=F?+F[0]:Infinity,Dt=F?+F[1]:-Infinity;l(tt,d,g,function(ye,we){var Re=Math.log(ye),He=Math.log(we);++ot,at+=(Re-at)/ot,At+=(He-At)/ot,yt+=(Re*He-yt)/ot,gt+=(Re*Re-gt)/ot,bt+=(we-bt)/ot,F||(ye<Tt&&(Tt=ye),ye>Dt&&(Dt=ye))});var Ut=s(at,At,yt,gt),jt=Object(b.a)(Ut,2),Vt=jt[0],Ht=jt[1];Vt=Math.exp(Vt);var re=function(we){return Vt*Math.pow(we,Ht)},pe=n(Tt,Dt,re);return pe.a=Vt,pe.b=Ht,pe.predict=re,pe.rSquared=A(tt,d,g,bt,re),pe}return V.domain=function(tt){return arguments.length?(F=tt,V):F},V.x=function(tt){return arguments.length?(d=tt,V):d},V.y=function(tt){return arguments.length?(g=tt,V):g},V},xt={exp:h,linear:M,loess:m,log:Z,poly:dt,pow:wt,quad:et};function ft(d,g){var F=10,V={regionStyle:[{position:{start:[d,"max"],end:["max",g]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[d,g]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",g],end:[d,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[d,g],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",g],offsetX:-F,offsetY:-F,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",g],offsetX:F,offsetY:-F,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",g],offsetX:F,offsetY:F,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",g],offsetX:-F,offsetY:F,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]};return V}var Bt=function(g,F){var V=F.view,tt=F.options,ot=tt.xField,at=tt.yField,At=V.getScaleByField(ot),yt=V.getScaleByField(at),gt=g.map(function(bt){return V.getCoordinate().convert({x:At.scale(bt[0]),y:yt.scale(bt[1])})});return Object(E.h)(gt,!1)},Rt=function(g){var F=g.options,V=F.xField,tt=F.yField,ot=F.data,at=F.regressionLine,At=at.type,yt=At===void 0?"linear":At,gt=at.algorithm,bt;if(gt)bt=Object(e.isArray)(gt)?gt:gt(ot);else{var Tt=xt[yt]().x(function(Dt){return Dt[V]}).y(function(Dt){return Dt[tt]});bt=Tt(ot)}return Bt(bt,g)},Ot=function(g){var F,V=g.meta,tt=V===void 0?{}:V,ot=g.xField,at=g.yField,At=g.data,yt=At[0][ot],gt=At[0][at],bt=yt>0,Tt=gt>0,Dt=function(jt,Vt,Ht){var re=Object(e.get)(tt,[jt,Vt]);if(Object(e.isNumber)(re))return re;if(Ht==="x"){var pe={min:bt?0:yt*2,max:bt?yt*2:0};return pe[Vt]}var ye={min:Tt?0:gt*2,max:Tt?gt*2:0};return ye[Vt]};return Object(rt.a)(Object(rt.a)({},tt),(F={},F[ot]=Object(rt.a)(Object(rt.a)({},tt[ot]),{min:Dt(ot,"min","x"),max:Dt(ot,"max","x")}),F[at]=Object(rt.a)(Object(rt.a)({},tt[at]),{min:Dt(at,"min","y"),max:Dt(at,"max","y")}),F))};function X(d){var g=d.data,F=g===void 0?[]:g;return F.length===1?Object(E.b)({},d,{meta:Ot(d)}):d}function ut(d){var g=d.chart,F=d.options,V=F.data,tt=F.type,ot=F.color,at=F.shape,At=F.pointStyle,yt=F.shapeField,gt=F.colorField,bt=F.xField,Tt=F.yField,Dt=F.sizeField,Ut=F.size,jt=F.tooltip;Dt&&(Ut||(Ut=[2,8]),Object(e.isNumber)(Ut)&&(Ut=[Ut,Ut])),jt&&!jt.fields&&(jt=Object(rt.a)(Object(rt.a)({},jt),{fields:[bt,Tt,gt,Dt,yt]})),g.data(V),Object(r.e)(Object(E.b)({},d,{options:{seriesField:gt,point:{color:ot,shape:at,size:Ut,style:At},tooltip:jt}}));var Vt=Object(E.c)(g,"point");return tt&&Vt.adjust(tt),d}function vt(d){var g,F=d.options,V=F.data,tt=F.xAxis,ot=F.yAxis,at=F.xField,At=F.yField,yt=F;return V.length===1&&(yt=X(Object(E.b)({},F,{meta:Ot(F)}))),Object(E.e)(Object(p.f)((g={},g[at]=tt,g[At]=ot,g)))(Object(E.b)({},d,{options:yt}))}function pt(d){var g=d.chart,F=d.options,V=F.xAxis,tt=F.yAxis,ot=F.xField,at=F.yField;return g.axis(ot,V),g.axis(at,tt),d}function Et(d){var g=d.chart,F=d.options,V=F.legend,tt=F.colorField,ot=F.shapeField,at=F.sizeField,At=Object(e.isBoolean)(V)?V:V||!!(ot||tt);return At?(g.legend(tt||ot,V),at&&g.legend(at,!1)):g.legend(!1),d}function q(d){var g=d.chart,F=d.options,V=F.label,tt=F.yField,ot=Object(E.c)(g,"point");if(!V)ot.label(!1);else{var at=V.callback,At=Object(rt.c)(V,["callback"]);ot.label({fields:[tt],callback:at,cfg:Object(E.o)(At)})}return d}function st(d){var g=d.options,F=g.quadrant,V=[];if(F){var tt=F.xBaseline,ot=tt===void 0?0:tt,at=F.yBaseline,At=at===void 0?0:at,yt=F.labels,gt=F.regionStyle,bt=F.lineStyle,Tt=ft(ot,At),Dt=new Array(4).join(",").split(",");Dt.forEach(function(Ut,jt){V.push(Object(rt.a)(Object(rt.a)({type:"region",top:!1},Tt.regionStyle[jt].position),{style:Object(E.b)({},Tt.regionStyle[jt].style,gt==null?void 0:gt[jt])}),Object(rt.a)({type:"text",top:!0},Object(E.b)({},Tt.labelStyle[jt],yt==null?void 0:yt[jt])))}),V.push({type:"line",top:!1,start:["min",At],end:["max",At],style:Object(E.b)({},Tt.lineStyle,bt)},{type:"line",top:!1,start:[ot,"min"],end:[ot,"max"],style:Object(E.b)({},Tt.lineStyle,bt)})}return Object(E.e)(Object(p.b)(V))(d)}function it(d){var g=d.options,F=d.chart,V=g.regressionLine;if(V){var tt=V.style,ot=V.top,at=ot===void 0?!1:ot,At={stroke:"#9ba29a",lineWidth:2,opacity:.5};F.annotation().shape({top:at,render:function(gt,bt){var Tt=gt.addGroup({id:F.id+"-regression-line",name:"regression-line-group"}),Dt=Rt({view:bt,options:g});Tt.addShape("path",{name:"regression-line",attrs:Object(rt.a)(Object(rt.a)({path:Dt},At),tt)})}})}return d}function z(d){var g=d.chart,F=d.options,V=F.tooltip;return V?g.tooltip(V):V===!1&&g.tooltip(!1),d}function P(d){return Object(E.e)(ut,vt,pt,Et,z,q,p.c,st,p.a,p.j,it)(d)}var H=_("hag6"),k=function(d){Object(rt.b)(g,d);function g(){var F=d!==null&&d.apply(this,arguments)||this;return F.type="point",F}return g.prototype.changeData=function(F){this.updateOption(X(Object(E.b)({},this.options,{data:F})));var V=this,tt=V.options,ot=V.chart;vt({chart:ot,options:tt}),this.chart.changeData(F)},g.prototype.getSchemaAdaptor=function(){return P},g.prototype.getDefaultOptions=function(){return Object(E.b)({},d.prototype.getDefaultOptions.call(this),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}})},g}(a.a)},tKoa:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return r}),_.d(Gt,"d",function(){return b}),_.d(Gt,"e",function(){return S}),_.d(Gt,"c",function(){return j}),_.d(Gt,"f",function(){return y.a}),_.d(Gt,"b",function(){return n});var rt=_("mrSG"),a=_("5HRO"),E=_("YuPD"),e=_("WOQw");function r(s){var h=s.options,M=h.area,O=h.xField,T=h.yField,v=h.seriesField,m=h.smooth,C=h.tooltip,D=Object(a.a)(C,[O,T,v]),Y=D.fields,Z=D.formatter;return M?Object(e.a)(Object(E.b)({},s,{options:{type:"area",colorField:v,tooltipFields:Y,mapping:Object(rt.a)({shape:m?"smooth":"area",tooltip:Z},M)}})):s}var p=_("iTfj");function b(s){var h=s.options,M=h.line,O=h.stepType,T=h.xField,v=h.yField,m=h.seriesField,C=h.smooth,D=h.connectNulls,Y=h.tooltip,Z=Object(a.a)(Y,[T,v,m]),et=Z.fields,dt=Z.formatter;return M?Object(e.a)(Object(E.b)({},s,{options:{type:"line",colorField:m,tooltipFields:et,mapping:Object(p.deepMix)({shape:O||(C?"smooth":"line"),tooltip:dt},M),args:{connectNulls:D}}})):s}function S(s){var h=s.options,M=h.point,O=h.xField,T=h.yField,v=h.seriesField,m=h.sizeField,C=h.shapeField,D=h.tooltip,Y=Object(a.a)(D,[O,T,v,m,C]),Z=Y.fields,et=Y.formatter;return M?Object(e.a)(Object(E.b)({},s,{options:{type:"point",colorField:v,shapeField:C,tooltipFields:Z,mapping:Object(rt.a)({tooltip:et},M)}})):s}var l=_("Ihc8");function A(s){var h=s.chart,M=s.options,O=s.ext,T=M.seriesField,v=M.isGroup,m=M.isStack,C=M.marginRatio,D=M.widthRatio,Y=M.groupField,Z=M.theme,et=[];if(T&&(v&&et.push({type:"dodge",dodgeBy:Y||T,marginRatio:C}),m&&et.push({type:"stack",marginRatio:C})),et.length&&(O==null?void 0:O.geometry)){var dt=O==null?void 0:O.geometry;dt.adjust(et)}return Object(p.isNil)(D)||h.theme(Object(E.b)({},Object(p.isObject)(Z)?Z:Object(l.getTheme)(Z),{columnWidthRatio:D})),s}function j(s){var h=s.options,M=h.xField,O=h.yField,T=h.interval,v=h.seriesField,m=h.tooltip,C=h.minColumnWidth,D=h.maxColumnWidth,Y=h.columnBackground,Z=Object(a.a)(m,[M,O,v]),et=Z.fields,dt=Z.formatter,ht=(T?Object(e.a)(Object(E.b)({},s,{options:{type:"interval",colorField:v,tooltipFields:et,mapping:Object(rt.a)({tooltip:dt},T),args:{minColumnWidth:C,maxColumnWidth:D,background:Y}}})):s).ext;return A(Object(rt.a)(Object(rt.a)({},s),{ext:ht}))}var y=_("KMYG");function n(s){var h=s.options,M=h.edge,O=h.xField,T=h.yField,v=h.seriesField,m=h.tooltip,C=Object(a.a)(m,[O,T,v]),D=C.fields,Y=C.formatter;return M?Object(e.a)(Object(E.b)({},s,{options:{type:"edge",colorField:v,tooltipFields:D,mapping:Object(rt.a)({tooltip:Y},M)}})):s}},tdXX:function(Fn,Gt){},"tvR+":function(Fn,Gt,_){"use strict";var rt=_("DdT1"),a=_("I4jL"),E=_("IeU1"),e=_("CSvP");Gt.a=function(){var r=a.a,p=!1,b=1,S=1,l=[0],A=e.a,j=e.a,y=e.a,n=e.a,s=e.a;function h(O){return O.x0=O.y0=0,O.x1=b,O.y1=S,O.eachBefore(M),l=[0],p&&O.eachBefore(rt.a),O}function M(O){var T=l[O.depth],v=O.x0+T,m=O.y0+T,C=O.x1-T,D=O.y1-T;C<v&&(v=C=(v+C)/2),D<m&&(m=D=(m+D)/2),O.x0=v,O.y0=m,O.x1=C,O.y1=D,O.children&&(T=l[O.depth+1]=A(O)/2,v+=s(O)-T,m+=j(O)-T,C-=y(O)-T,D-=n(O)-T,C<v&&(v=C=(v+C)/2),D<m&&(m=D=(m+D)/2),r(O,v,m,C,D))}return h.round=function(O){return arguments.length?(p=!!O,h):p},h.size=function(O){return arguments.length?(b=+O[0],S=+O[1],h):[b,S]},h.tile=function(O){return arguments.length?(r=Object(E.b)(O),h):r},h.padding=function(O){return arguments.length?h.paddingInner(O).paddingOuter(O):h.paddingInner()},h.paddingInner=function(O){return arguments.length?(A=typeof O=="function"?O:Object(e.b)(+O),h):A},h.paddingOuter=function(O){return arguments.length?h.paddingTop(O).paddingRight(O).paddingBottom(O).paddingLeft(O):h.paddingTop()},h.paddingTop=function(O){return arguments.length?(j=typeof O=="function"?O:Object(e.b)(+O),h):j},h.paddingRight=function(O){return arguments.length?(y=typeof O=="function"?O:Object(e.b)(+O),h):y},h.paddingBottom=function(O){return arguments.length?(n=typeof O=="function"?O:Object(e.b)(+O),h):n},h.paddingLeft=function(O){return arguments.length?(s=typeof O=="function"?O:Object(e.b)(+O),h):s},h}},tvuL:function(Fn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"catmullRomToBezier",function(){return p}),_.d(Gt,"fillPath",function(){return ft}),_.d(Gt,"fillPathByDiff",function(){return X}),_.d(Gt,"formatPath",function(){return pt}),_.d(Gt,"intersection",function(){return ht}),_.d(Gt,"parsePathArray",function(){return s}),_.d(Gt,"parsePathString",function(){return r}),_.d(Gt,"pathToAbsolute",function(){return S}),_.d(Gt,"pathToCurve",function(){return y}),_.d(Gt,"rectPath",function(){return m});var rt=_("iTfj"),a=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,E=new RegExp("([a-z])["+a+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+a+"]*,?["+a+"]*)+)","ig"),e=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+a+"]*,?["+a+"]*","ig"),r=function(q){if(!q)return null;if(Object(rt.isArray)(q))return q;var st={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},it=[];return String(q).replace(E,function(z,P,H){var k=[],d=P.toLowerCase();if(H.replace(e,function(g,F){F&&k.push(+F)}),d==="m"&&k.length>2&&(it.push([P].concat(k.splice(0,2))),d="l",P=P==="m"?"l":"L"),d==="o"&&k.length===1&&it.push([P,k[0]]),d==="r")it.push([P].concat(k));else for(;k.length>=st[d]&&(it.push([P].concat(k.splice(0,st[d]))),!!st[d]););return q}),it},p=function(q,st){for(var it=[],z=0,P=q.length;P-2*!st>z;z+=2){var H=[{x:+q[z-2],y:+q[z-1]},{x:+q[z],y:+q[z+1]},{x:+q[z+2],y:+q[z+3]},{x:+q[z+4],y:+q[z+5]}];st?z?P-4===z?H[3]={x:+q[0],y:+q[1]}:P-2===z&&(H[2]={x:+q[0],y:+q[1]},H[3]={x:+q[2],y:+q[3]}):H[0]={x:+q[P-2],y:+q[P-1]}:P-4===z?H[3]=H[2]:z||(H[0]={x:+q[z],y:+q[z+1]}),it.push(["C",(-H[0].x+6*H[1].x+H[2].x)/6,(-H[0].y+6*H[1].y+H[2].y)/6,(H[1].x+6*H[2].x-H[3].x)/6,(H[1].y+6*H[2].y-H[3].y)/6,H[2].x,H[2].y])}return it},b=function(q,st,it,z,P){var H=[];if(P===null&&z===null&&(z=it),q=+q,st=+st,it=+it,z=+z,P!==null){var k=Math.PI/180,d=q+it*Math.cos(-z*k),g=q+it*Math.cos(-P*k),F=st+it*Math.sin(-z*k),V=st+it*Math.sin(-P*k);H=[["M",d,F],["A",it,it,0,+(P-z>180),0,g,V]]}else H=[["M",q,st],["m",0,-z],["a",it,z,0,1,1,0,2*z],["a",it,z,0,1,1,0,-2*z],["z"]];return H},S=function(q){if(q=r(q),!q||!q.length)return[["M",0,0]];var st=[],it=0,z=0,P=0,H=0,k=0,d,g;q[0][0]==="M"&&(it=+q[0][1],z=+q[0][2],P=it,H=z,k++,st[0]=["M",it,z]);for(var F=q.length===3&&q[0][0]==="M"&&q[1][0].toUpperCase()==="R"&&q[2][0].toUpperCase()==="Z",V=void 0,tt=void 0,ot=k,at=q.length;ot<at;ot++){if(st.push(V=[]),tt=q[ot],d=tt[0],d!==d.toUpperCase())switch(V[0]=d.toUpperCase(),V[0]){case"A":V[1]=tt[1],V[2]=tt[2],V[3]=tt[3],V[4]=tt[4],V[5]=tt[5],V[6]=+tt[6]+it,V[7]=+tt[7]+z;break;case"V":V[1]=+tt[1]+z;break;case"H":V[1]=+tt[1]+it;break;case"R":g=[it,z].concat(tt.slice(1));for(var At=2,yt=g.length;At<yt;At++)g[At]=+g[At]+it,g[++At]=+g[At]+z;st.pop(),st=st.concat(p(g,F));break;case"O":st.pop(),g=b(it,z,tt[1],tt[2]),g.push(g[0]),st=st.concat(g);break;case"U":st.pop(),st=st.concat(b(it,z,tt[1],tt[2],tt[3])),V=["U"].concat(st[st.length-1].slice(-2));break;case"M":P=+tt[1]+it,H=+tt[2]+z;break;default:for(var At=1,yt=tt.length;At<yt;At++)V[At]=+tt[At]+(At%2?it:z)}else if(d==="R")g=[it,z].concat(tt.slice(1)),st.pop(),st=st.concat(p(g,F)),V=["R"].concat(tt.slice(-2));else if(d==="O")st.pop(),g=b(it,z,tt[1],tt[2]),g.push(g[0]),st=st.concat(g);else if(d==="U")st.pop(),st=st.concat(b(it,z,tt[1],tt[2],tt[3])),V=["U"].concat(st[st.length-1].slice(-2));else for(var gt=0,bt=tt.length;gt<bt;gt++)V[gt]=tt[gt];if(d=d.toUpperCase(),d!=="O")switch(V[0]){case"Z":it=+P,z=+H;break;case"H":it=V[1];break;case"V":z=V[1];break;case"M":P=V[V.length-2],H=V[V.length-1];break;default:it=V[V.length-2],z=V[V.length-1]}}return st},l=function(q,st,it,z){return[q,st,it,z,it,z]},A=function(q,st,it,z,P,H){var k=1/3,d=2/3;return[k*q+d*it,k*st+d*z,k*P+d*it,k*H+d*z,P,H]},j=function Et(q,st,it,z,P,H,k,d,g,F){it===z&&(it+=1);var V=Math.PI*120/180,tt=Math.PI/180*(+P||0),ot=[],at,At,yt,gt,bt,Tt=function(Vr,ti,hi){var Fi=Vr*Math.cos(hi)-ti*Math.sin(hi),to=Vr*Math.sin(hi)+ti*Math.cos(hi);return{x:Fi,y:to}};if(F)At=F[0],yt=F[1],gt=F[2],bt=F[3];else{at=Tt(q,st,-tt),q=at.x,st=at.y,at=Tt(d,g,-tt),d=at.x,g=at.y,q===d&&st===g&&(d+=1,g+=1);var Dt=(q-d)/2,Ut=(st-g)/2,jt=Dt*Dt/(it*it)+Ut*Ut/(z*z);jt>1&&(jt=Math.sqrt(jt),it=jt*it,z=jt*z);var Vt=it*it,Ht=z*z,re=(H===k?-1:1)*Math.sqrt(Math.abs((Vt*Ht-Vt*Ut*Ut-Ht*Dt*Dt)/(Vt*Ut*Ut+Ht*Dt*Dt)));gt=re*it*Ut/z+(q+d)/2,bt=re*-z*Dt/it+(st+g)/2,At=Math.asin(((st-bt)/z).toFixed(9)),yt=Math.asin(((g-bt)/z).toFixed(9)),At=q<gt?Math.PI-At:At,yt=d<gt?Math.PI-yt:yt,At<0&&(At=Math.PI*2+At),yt<0&&(yt=Math.PI*2+yt),k&&At>yt&&(At=At-Math.PI*2),!k&&yt>At&&(yt=yt-Math.PI*2)}var pe=yt-At;if(Math.abs(pe)>V){var ye=yt,we=d,Re=g;yt=At+V*(k&&yt>At?1:-1),d=gt+it*Math.cos(yt),g=bt+z*Math.sin(yt),ot=Et(d,g,it,z,P,0,k,we,Re,[yt,ye,gt,bt])}pe=yt-At;var He=Math.cos(At),pn=Math.sin(At),fn=Math.cos(yt),Rn=Math.sin(yt),Cn=Math.tan(pe/4),kn=4/3*it*Cn,Mn=4/3*z*Cn,Tn=[q,st],Un=[q+kn*pn,st-Mn*He],Kn=[d+kn*Rn,g-Mn*fn],tr=[d,g];if(Un[0]=2*Tn[0]-Un[0],Un[1]=2*Tn[1]-Un[1],F)return[Un,Kn,tr].concat(ot);ot=[Un,Kn,tr].concat(ot).join().split(",");for(var or=[],nr=0,er=ot.length;nr<er;nr++)or[nr]=nr%2?Tt(ot[nr-1],ot[nr],tt).y:Tt(ot[nr],ot[nr+1],tt).x;return or},y=function(q,st){var it=S(q),z=st&&S(st),P={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},H={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k=[],d=[],g="",F="",V,tt=function(Ut,jt,Vt){var Ht,re;if(!Ut)return["C",jt.x,jt.y,jt.x,jt.y,jt.x,jt.y];switch(!(Ut[0]in{T:1,Q:1})&&(jt.qx=jt.qy=null),Ut[0]){case"M":jt.X=Ut[1],jt.Y=Ut[2];break;case"A":Ut=["C"].concat(j.apply(0,[jt.x,jt.y].concat(Ut.slice(1))));break;case"S":Vt==="C"||Vt==="S"?(Ht=jt.x*2-jt.bx,re=jt.y*2-jt.by):(Ht=jt.x,re=jt.y),Ut=["C",Ht,re].concat(Ut.slice(1));break;case"T":Vt==="Q"||Vt==="T"?(jt.qx=jt.x*2-jt.qx,jt.qy=jt.y*2-jt.qy):(jt.qx=jt.x,jt.qy=jt.y),Ut=["C"].concat(A(jt.x,jt.y,jt.qx,jt.qy,Ut[1],Ut[2]));break;case"Q":jt.qx=Ut[1],jt.qy=Ut[2],Ut=["C"].concat(A(jt.x,jt.y,Ut[1],Ut[2],Ut[3],Ut[4]));break;case"L":Ut=["C"].concat(l(jt.x,jt.y,Ut[1],Ut[2]));break;case"H":Ut=["C"].concat(l(jt.x,jt.y,Ut[1],jt.y));break;case"V":Ut=["C"].concat(l(jt.x,jt.y,jt.x,Ut[1]));break;case"Z":Ut=["C"].concat(l(jt.x,jt.y,jt.X,jt.Y));break;default:break}return Ut},ot=function(Ut,jt){if(Ut[jt].length>7){Ut[jt].shift();for(var Vt=Ut[jt];Vt.length;)k[jt]="A",z&&(d[jt]="A"),Ut.splice(jt++,0,["C"].concat(Vt.splice(0,6)));Ut.splice(jt,1),V=Math.max(it.length,z&&z.length||0)}},at=function(Ut,jt,Vt,Ht,re){Ut&&jt&&Ut[re][0]==="M"&&jt[re][0]!=="M"&&(jt.splice(re,0,["M",Ht.x,Ht.y]),Vt.bx=0,Vt.by=0,Vt.x=Ut[re][1],Vt.y=Ut[re][2],V=Math.max(it.length,z&&z.length||0))};V=Math.max(it.length,z&&z.length||0);for(var At=0;At<V;At++){it[At]&&(g=it[At][0]),g!=="C"&&(k[At]=g,At&&(F=k[At-1])),it[At]=tt(it[At],P,F),k[At]!=="A"&&g==="C"&&(k[At]="C"),ot(it,At),z&&(z[At]&&(g=z[At][0]),g!=="C"&&(d[At]=g,At&&(F=d[At-1])),z[At]=tt(z[At],H,F),d[At]!=="A"&&g==="C"&&(d[At]="C"),ot(z,At)),at(it,z,P,H,At),at(z,it,H,P,At);var yt=it[At],gt=z&&z[At],bt=yt.length,Tt=z&&gt.length;P.x=yt[bt-2],P.y=yt[bt-1],P.bx=parseFloat(yt[bt-4])||P.x,P.by=parseFloat(yt[bt-3])||P.y,H.bx=z&&(parseFloat(gt[Tt-4])||H.x),H.by=z&&(parseFloat(gt[Tt-3])||H.y),H.x=z&&gt[Tt-2],H.y=z&&gt[Tt-1]}return z?[it,z]:it},n=/,?([a-z]),?/gi,s=function(q){return q.join(",").replace(n,"$1")},h=function(q,st,it,z,P){var H=-3*st+9*it-9*z+3*P,k=q*H+6*st-12*it+6*z;return q*k-3*st+3*it},M=function(q,st,it,z,P,H,k,d,g){g===null&&(g=1),g=g>1?1:g<0?0:g;for(var F=g/2,V=12,tt=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],ot=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],at=0,At=0;At<V;At++){var yt=F*tt[At]+F,gt=h(yt,q,it,P,k),bt=h(yt,st,z,H,d),Tt=gt*gt+bt*bt;at+=ot[At]*Math.sqrt(Tt)}return F*at},O=function(q,st,it,z,P,H,k,d){for(var g=[],F=[[],[]],V,tt,ot,at,At=0;At<2;++At){if(At===0?(tt=6*q-12*it+6*P,V=-3*q+9*it-9*P+3*k,ot=3*it-3*q):(tt=6*st-12*z+6*H,V=-3*st+9*z-9*H+3*d,ot=3*z-3*st),Math.abs(V)<1e-12){if(Math.abs(tt)<1e-12)continue;at=-ot/tt,at>0&&at<1&&g.push(at);continue}var yt=tt*tt-4*ot*V,gt=Math.sqrt(yt);if(!(yt<0)){var bt=(-tt+gt)/(2*V);bt>0&&bt<1&&g.push(bt);var Tt=(-tt-gt)/(2*V);Tt>0&&Tt<1&&g.push(Tt)}}for(var Dt=g.length,Ut=Dt,jt;Dt--;)at=g[Dt],jt=1-at,F[0][Dt]=jt*jt*jt*q+3*jt*jt*at*it+3*jt*at*at*P+at*at*at*k,F[1][Dt]=jt*jt*jt*st+3*jt*jt*at*z+3*jt*at*at*H+at*at*at*d;return F[0][Ut]=q,F[1][Ut]=st,F[0][Ut+1]=k,F[1][Ut+1]=d,F[0].length=F[1].length=Ut+2,{min:{x:Math.min.apply(0,F[0]),y:Math.min.apply(0,F[1])},max:{x:Math.max.apply(0,F[0]),y:Math.max.apply(0,F[1])}}},T=function(q,st,it,z,P,H,k,d){if(!(Math.max(q,it)<Math.min(P,k)||Math.min(q,it)>Math.max(P,k)||Math.max(st,z)<Math.min(H,d)||Math.min(st,z)>Math.max(H,d))){var g=(q*z-st*it)*(P-k)-(q-it)*(P*d-H*k),F=(q*z-st*it)*(H-d)-(st-z)*(P*d-H*k),V=(q-it)*(H-d)-(st-z)*(P-k);if(!!V){var tt=g/V,ot=F/V,at=+tt.toFixed(2),At=+ot.toFixed(2);if(!(at<+Math.min(q,it).toFixed(2)||at>+Math.max(q,it).toFixed(2)||at<+Math.min(P,k).toFixed(2)||at>+Math.max(P,k).toFixed(2)||At<+Math.min(st,z).toFixed(2)||At>+Math.max(st,z).toFixed(2)||At<+Math.min(H,d).toFixed(2)||At>+Math.max(H,d).toFixed(2)))return{x:tt,y:ot}}}},v=function(q,st,it){return st>=q.x&&st<=q.x+q.width&&it>=q.y&&it<=q.y+q.height},m=function(q,st,it,z,P){if(P)return[["M",+q+ +P,st],["l",it-P*2,0],["a",P,P,0,0,1,P,P],["l",0,z-P*2],["a",P,P,0,0,1,-P,P],["l",P*2-it,0],["a",P,P,0,0,1,-P,-P],["l",0,P*2-z],["a",P,P,0,0,1,P,-P],["z"]];var H=[["M",q,st],["l",it,0],["l",0,z],["l",-it,0],["z"]];return H.parsePathArray=s,H},C=function(q,st,it,z){return q===null&&(q=st=it=z=0),st===null&&(st=q.y,it=q.width,z=q.height,q=q.x),{x:q,y:st,width:it,w:it,height:z,h:z,x2:q+it,y2:st+z,cx:q+it/2,cy:st+z/2,r1:Math.min(it,z)/2,r2:Math.max(it,z)/2,r0:Math.sqrt(it*it+z*z)/2,path:m(q,st,it,z),vb:[q,st,it,z].join(" ")}},D=function(q,st){return q=C(q),st=C(st),v(st,q.x,q.y)||v(st,q.x2,q.y)||v(st,q.x,q.y2)||v(st,q.x2,q.y2)||v(q,st.x,st.y)||v(q,st.x2,st.y)||v(q,st.x,st.y2)||v(q,st.x2,st.y2)||(q.x<st.x2&&q.x>st.x||st.x<q.x2&&st.x>q.x)&&(q.y<st.y2&&q.y>st.y||st.y<q.y2&&st.y>q.y)},Y=function(q,st,it,z,P,H,k,d){Object(rt.isArray)(q)||(q=[q,st,it,z,P,H,k,d]);var g=O.apply(null,q);return C(g.min.x,g.min.y,g.max.x-g.min.x,g.max.y-g.min.y)},Z=function(q,st,it,z,P,H,k,d,g){var F=1-g,V=Math.pow(F,3),tt=Math.pow(F,2),ot=g*g,at=ot*g,At=V*q+tt*3*g*it+F*3*g*g*P+at*k,yt=V*st+tt*3*g*z+F*3*g*g*H+at*d,gt=q+2*g*(it-q)+ot*(P-2*it+q),bt=st+2*g*(z-st)+ot*(H-2*z+st),Tt=it+2*g*(P-it)+ot*(k-2*P+it),Dt=z+2*g*(H-z)+ot*(d-2*H+z),Ut=F*q+g*it,jt=F*st+g*z,Vt=F*P+g*k,Ht=F*H+g*d,re=90-Math.atan2(gt-Tt,bt-Dt)*180/Math.PI;return{x:At,y:yt,m:{x:gt,y:bt},n:{x:Tt,y:Dt},start:{x:Ut,y:jt},end:{x:Vt,y:Ht},alpha:re}},et=function(q,st,it){var z=Y(q),P=Y(st);if(!D(z,P))return it?0:[];for(var H=M.apply(0,q),k=M.apply(0,st),d=~~(H/8),g=~~(k/8),F=[],V=[],tt={},ot=it?0:[],at=0;at<d+1;at++){var At=Z.apply(0,q.concat(at/d));F.push({x:At.x,y:At.y,t:at/d})}for(var at=0;at<g+1;at++){var At=Z.apply(0,st.concat(at/g));V.push({x:At.x,y:At.y,t:at/g})}for(var at=0;at<d;at++)for(var yt=0;yt<g;yt++){var gt=F[at],bt=F[at+1],Tt=V[yt],Dt=V[yt+1],Ut=Math.abs(bt.x-gt.x)<.001?"y":"x",jt=Math.abs(Dt.x-Tt.x)<.001?"y":"x",Vt=T(gt.x,gt.y,bt.x,bt.y,Tt.x,Tt.y,Dt.x,Dt.y);if(Vt){if(tt[Vt.x.toFixed(4)]===Vt.y.toFixed(4))continue;tt[Vt.x.toFixed(4)]=Vt.y.toFixed(4);var Ht=gt.t+Math.abs((Vt[Ut]-gt[Ut])/(bt[Ut]-gt[Ut]))*(bt.t-gt.t),re=Tt.t+Math.abs((Vt[jt]-Tt[jt])/(Dt[jt]-Tt[jt]))*(Dt.t-Tt.t);Ht>=0&&Ht<=1&&re>=0&&re<=1&&(it?ot+=1:ot.push({x:Vt.x,y:Vt.y,t1:Ht,t2:re}))}}return ot},dt=function(q,st,it){q=y(q),st=y(st);for(var z,P,H,k,d,g,F,V,tt,ot,at=it?0:[],At=0,yt=q.length;At<yt;At++){var gt=q[At];if(gt[0]==="M")z=d=gt[1],P=g=gt[2];else{gt[0]==="C"?(tt=[z,P].concat(gt.slice(1)),z=tt[6],P=tt[7]):(tt=[z,P,z,P,d,g,d,g],z=d,P=g);for(var bt=0,Tt=st.length;bt<Tt;bt++){var Dt=st[bt];if(Dt[0]==="M")H=F=Dt[1],k=V=Dt[2];else{Dt[0]==="C"?(ot=[H,k].concat(Dt.slice(1)),H=ot[6],k=ot[7]):(ot=[H,k,H,k,F,V,F,V],H=F,k=V);var Ut=et(tt,ot,it);if(it)at+=Ut;else{for(var jt=0,Vt=Ut.length;jt<Vt;jt++)Ut[jt].segment1=At,Ut[jt].segment2=bt,Ut[jt].bez1=tt,Ut[jt].bez2=ot;at=at.concat(Ut)}}}}}return at},ht=function(q,st){return dt(q,st)};function St(Et,q){var st=[],it=[];function z(P,H){if(P.length===1)st.push(P[0]),it.push(P[0]);else{for(var k=[],d=0;d<P.length-1;d++)d===0&&st.push(P[0]),d===P.length-2&&it.push(P[d+1]),k[d]=[(1-H)*P[d][0]+H*P[d+1][0],(1-H)*P[d][1]+H*P[d+1][1]];z(k,H)}}return Et.length&&z(Et,q),{left:st,right:it.reverse()}}function wt(Et,q,st){var it=[[Et[1],Et[2]]];st=st||2;var z=[];q[0]==="A"?(it.push(q[6]),it.push(q[7])):q[0]==="C"?(it.push([q[1],q[2]]),it.push([q[3],q[4]]),it.push([q[5],q[6]])):q[0]==="S"||q[0]==="Q"?(it.push([q[1],q[2]]),it.push([q[3],q[4]])):it.push([q[1],q[2]]);for(var P=it,H=1/st,k=0;k<st-1;k++){var d=H/(1-H*k),g=St(P,d);z.push(g.left),P=g.right}z.push(P);var F=z.map(function(V){var tt=[];return V.length===4&&(tt.push("C"),tt=tt.concat(V[2])),V.length>=3&&(V.length===3&&tt.push("Q"),tt=tt.concat(V[1])),V.length===2&&tt.push("L"),tt=tt.concat(V[V.length-1]),tt});return F}var xt=function(q,st,it){if(it===1)return[[].concat(q)];var z=[];if(st[0]==="L"||st[0]==="C"||st[0]==="Q")z=z.concat(wt(q,st,it));else{var P=[].concat(q);P[0]==="M"&&(P[0]="L");for(var H=0;H<=it-1;H++)z.push(P)}return z},ft=function(q,st){if(q.length===1)return q;var it=q.length-1,z=st.length-1,P=it/z,H=[];if(q.length===1&&q[0][0]==="M"){for(var k=0;k<z-it;k++)q.push(q[0]);return q}for(var k=0;k<z;k++){var d=Math.floor(P*k);H[d]=(H[d]||0)+1}var g=H.reduce(function(F,V,tt){return tt===it?F.concat(q[it]):F.concat(xt(q[tt],q[tt+1],V))},[]);return g.unshift(q[0]),(st[z]==="Z"||st[z]==="z")&&g.push("Z"),g},Bt=function(q,st){if(q.length!==st.length)return!1;var it=!0;return Object(rt.each)(q,function(z,P){if(z!==st[P])return it=!1,!1}),it};function Rt(Et,q,st){var it=null,z=st;return q<z&&(z=q,it="add"),Et<z&&(z=Et,it="del"),{type:it,min:z}}var Ot=function(q,st){var it=q.length,z=st.length,P,H,k=0;if(it===0||z===0)return null;for(var d=[],g=0;g<=it;g++)d[g]=[],d[g][0]={min:g};for(var F=0;F<=z;F++)d[0][F]={min:F};for(var g=1;g<=it;g++){P=q[g-1];for(var F=1;F<=z;F++){H=st[F-1],Bt(P,H)?k=0:k=1;var V=d[g-1][F].min+1,tt=d[g][F-1].min+1,ot=d[g-1][F-1].min+k;d[g][F]=Rt(V,tt,ot)}}return d},X=function(q,st){var it=Ot(q,st),z=q.length,P=st.length,H=[],k=1,d=1;if(it[z][P].min!==z){for(var g=1;g<=z;g++){var F=it[g][g].min;d=g;for(var V=k;V<=P;V++)it[g][V].min<F&&(F=it[g][V].min,d=V);k=d,it[g][k].type&&H.push({index:g-1,type:it[g][k].type})}for(var g=H.length-1;g>=0;g--)k=H[g].index,H[g].type==="add"?q.splice(k,0,[].concat(q[k])):q.splice(k,1)}z=q.length;var tt=P-z;if(z<P)for(var g=0;g<tt;g++)q[z-1][0]==="z"||q[z-1][0]==="Z"?q.splice(z-2,0,q[z-2]):q.push(q[z-1]),z+=1;return q};function ut(Et,q,st){for(var it=[].concat(Et),z,P=1/(st+1),H=vt(q)[0],k=1;k<=st;k++)P*=k,z=Math.floor(Et.length*P),z===0?it.unshift([H[0]*P+Et[z][0]*(1-P),H[1]*P+Et[z][1]*(1-P)]):it.splice(z,0,[H[0]*P+Et[z][0]*(1-P),H[1]*P+Et[z][1]*(1-P)]);return it}function vt(Et){var q=[];switch(Et[0]){case"M":q.push([Et[1],Et[2]]);break;case"L":q.push([Et[1],Et[2]]);break;case"A":q.push([Et[6],Et[7]]);break;case"Q":q.push([Et[3],Et[4]]),q.push([Et[1],Et[2]]);break;case"T":q.push([Et[1],Et[2]]);break;case"C":q.push([Et[5],Et[6]]),q.push([Et[1],Et[2]]),q.push([Et[3],Et[4]]);break;case"S":q.push([Et[3],Et[4]]),q.push([Et[1],Et[2]]);break;case"H":q.push([Et[1],Et[1]]);break;case"V":q.push([Et[1],Et[1]]);break;default:}return q}var pt=function(q,st){if(q.length<=1)return q;for(var it,z=0;z<st.length;z++)if(q[z][0]!==st[z][0])switch(it=vt(q[z]),st[z][0]){case"M":q[z]=["M"].concat(it[0]);break;case"L":q[z]=["L"].concat(it[0]);break;case"A":q[z]=[].concat(st[z]),q[z][6]=it[0][0],q[z][7]=it[0][1];break;case"Q":if(it.length<2)if(z>0)it=ut(it,q[z-1],1);else{q[z]=st[z];break}q[z]=["Q"].concat(it.reduce(function(P,H){return P.concat(H)},[]));break;case"T":q[z]=["T"].concat(it[0]);break;case"C":if(it.length<3)if(z>0)it=ut(it,q[z-1],2);else{q[z]=st[z];break}q[z]=["C"].concat(it.reduce(function(P,H){return P.concat(H)},[]));break;case"S":if(it.length<2)if(z>0)it=ut(it,q[z-1],1);else{q[z]=st[z];break}q[z]=["S"].concat(it.reduce(function(P,H){return P.concat(H)},[]));break;default:q[z]=st[z]}return q}},u3os:function(Fn,Gt,_){"use strict";Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.ver=Gt.clear=Gt.bind=void 0;var rt=_("P4Qj"),a=function(p,b){var S=(0,rt.getSensor)(p);return S.bind(b),function(){S.unbind(b)}};Gt.bind=a;var E=function(p){var b=(0,rt.getSensor)(p);(0,rt.removeSensor)(b)};Gt.clear=E;var e="1.0.1";Gt.ver=e},u60a:function(Fn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"CONTAINER_CLASS",function(){return rt}),_.d(Gt,"TITLE_CLASS",function(){return a}),_.d(Gt,"LIST_CLASS",function(){return E}),_.d(Gt,"LIST_ITEM_CLASS",function(){return e}),_.d(Gt,"MARKER_CLASS",function(){return r}),_.d(Gt,"VALUE_CLASS",function(){return p}),_.d(Gt,"NAME_CLASS",function(){return b}),_.d(Gt,"CROSSHAIR_X",function(){return S}),_.d(Gt,"CROSSHAIR_Y",function(){return l});var rt="g2-tooltip",a="g2-tooltip-title",E="g2-tooltip-list",e="g2-tooltip-list-item",r="g2-tooltip-marker",p="g2-tooltip-value",b="g2-tooltip-name",S="g2-tooltip-crosshair-x",l="g2-tooltip-crosshair-y"},"u9/z":function(Fn,Gt,_){"use strict";_.d(Gt,"b",function(){return b}),_.d(Gt,"a",function(){return l});var rt=_("iTfj"),a=_("YuPD"),E=_("w02o"),e=_("tKoa"),r=_("SZbK"),p=_("B3DA");function b(A){var j=A.chart,y=A.options,n=y.percent,s=y.progressStyle,h=y.color,M=y.barWidthRatio;j.data(Object(p.a)(n));var O=Object(a.b)({},A,{options:{xField:"1",yField:"percent",seriesField:"type",isStack:!0,widthRatio:M,interval:{style:s,color:Object(rt.isString)(h)?[h,r.a[1]]:h}}});return Object(e.c)(O),j.tooltip(!1),j.axis(!1),j.legend(!1),A}function S(A){var j=A.chart;return j.coordinate("rect").transpose(),A}function l(A){return Object(a.e)(b,Object(E.f)({}),S,E.a,E.j,Object(E.b)())(A)}},u9VJ:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return p});var rt=_("mrSG"),a=_("zJSt"),E=_("YuPD"),e=_("sqD9"),r=_("DMQx"),p=function(b){Object(rt.b)(S,b);function S(){var l=b!==null&&b.apply(this,arguments)||this;return l.type="column",l}return S.prototype.changeData=function(l){this.updateOption({data:l});var A=this.options,j=A.yField,y=A.xField,n=A.isPercent;this.chart.changeData(Object(e.a)(l,j,y,j,n))},S.prototype.getDefaultOptions=function(){return Object(E.b)({},b.prototype.getDefaultOptions.call(this),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]})},S.prototype.getSchemaAdaptor=function(){return r.a},S}(a.a)},uCX8:function(Fn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"Line",function(){return A}),_.d(Gt,"Text",function(){return y}),_.d(Gt,"Arc",function(){return s}),_.d(Gt,"Region",function(){return M}),_.d(Gt,"Image",function(){return T}),_.d(Gt,"DataMarker",function(){return m}),_.d(Gt,"DataRegion",function(){return D}),_.d(Gt,"RegionFilter",function(){return Z}),_.d(Gt,"Shape",function(){return dt}),_.d(Gt,"Html",function(){return xt});var rt=_("mrSG"),a=_("iTfj"),E=_("MeYt"),e=_("BgvD"),r=_("jqgP"),p=_("5UbV");function b(ft,Bt){var Rt=Bt.x,Ot=Bt.y,X=Bt.content,ut=Bt.style,vt=Bt.id,pt=Bt.name,Et=Bt.rotate,q=Bt.maxLength,st=Bt.autoEllipsis,it=Bt.isVertical,z=Bt.ellipsisPosition,P=Bt.background,H=ft.addGroup({id:vt+"-group",name:pt+"-group",attrs:{x:Rt,y:Ot}}),k=H.addShape({type:"text",id:vt,name:pt,attrs:Object(rt.a)({x:0,y:0,text:X},ut)}),d=Object(p.c)(Object(a.get)(P,"padding",0));if(q&&st){var g=q-(d[1]+d[3]);Object(e.a)(!it,k,g,z)}if(P){var F=Object(a.get)(P,"style",{}),V=k.getCanvasBBox(),tt=V.minX,ot=V.minY,at=V.width,At=V.height,yt=H.addShape("rect",{id:vt+"-bg",name:vt+"-bg",attrs:Object(rt.a)({x:tt-d[3],y:ot-d[0],width:at+d[1]+d[3],height:At+d[0]+d[2]},F)});yt.toBack()}Object(r.c)(H,Rt,Ot),Object(r.b)(H,Et,Rt,Ot)}var S=_("L16w"),l=function(ft){Object(rt.b)(Bt,ft);function Bt(){return ft!==null&&ft.apply(this,arguments)||this}return Bt.prototype.getDefaultCfg=function(){var Rt=ft.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},Rt),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:S.a.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:S.a.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:S.a.lineColor,lineWidth:1}}}})},Bt.prototype.renderInner=function(Rt){this.renderLine(Rt),this.get("text")&&this.renderLabel(Rt)},Bt.prototype.renderLine=function(Rt){var Ot=this.get("start"),X=this.get("end"),ut=this.get("style");this.addShape(Rt,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:Object(rt.a)({x1:Ot.x,y1:Ot.y,x2:X.x,y2:X.y},ut)})},Bt.prototype.getLabelPoint=function(Rt,Ot,X){var ut;return X==="start"?ut=0:X==="center"?ut=.5:Object(a.isString)(X)&&X.indexOf("%")!==-1?ut=parseInt(X,10)/100:Object(a.isNumber)(X)?ut=X:ut=1,(ut>1||ut<0)&&(ut=1),{x:Object(p.g)(Rt.x,Ot.x,ut),y:Object(p.g)(Rt.y,Ot.y,ut)}},Bt.prototype.renderLabel=function(Rt){var Ot=this.get("text"),X=this.get("start"),ut=this.get("end"),vt=Ot.position,pt=Ot.content,Et=Ot.style,q=Ot.offsetX,st=Ot.offsetY,it=Ot.autoRotate,z=Ot.maxLength,P=Ot.autoEllipsis,H=Ot.ellipsisPosition,k=Ot.background,d=Ot.isVertical,g=d===void 0?!1:d,F=this.getLabelPoint(X,ut,vt),V=F.x+q,tt=F.y+st,ot={id:this.getElementId("line-text"),name:"annotation-line-text",x:V,y:tt,content:pt,style:Et,maxLength:z,autoEllipsis:P,ellipsisPosition:H,background:k,isVertical:g};if(it){var at=[ut.x-X.x,ut.y-X.y];ot.rotate=Math.atan2(at[1],at[0])}b(Rt,ot)},Bt}(E.a),A=l,j=function(ft){Object(rt.b)(Bt,ft);function Bt(){return ft!==null&&ft.apply(this,arguments)||this}return Bt.prototype.getDefaultCfg=function(){var Rt=ft.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},Rt),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:S.a.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:S.a.fontFamily}}})},Bt.prototype.setLocation=function(Rt){this.set("x",Rt.x),this.set("y",Rt.y),this.resetLocation()},Bt.prototype.renderInner=function(Rt){var Ot=this.getLocation(),X=Ot.x,ut=Ot.y,vt=this.get("content"),pt=this.get("style"),Et=this.getElementId("text"),q=this.get("name")+"-text",st=this.get("maxLength"),it=this.get("autoEllipsis"),z=this.get("isVertical"),P=this.get("ellipsisPosition"),H=this.get("background"),k=this.get("rotate"),d={id:Et,name:q,x:X,y:ut,content:vt,style:pt,maxLength:st,autoEllipsis:it,isVertical:z,ellipsisPosition:P,background:H,rotate:k};b(Rt,d)},Bt.prototype.resetLocation=function(){var Rt=this.getElementByLocalId("text-group");if(Rt){var Ot=this.getLocation(),X=Ot.x,ut=Ot.y,vt=this.get("rotate");Object(r.c)(Rt,X,ut),Object(r.b)(Rt,vt,X,ut)}},Bt}(E.a),y=j,n=function(ft){Object(rt.b)(Bt,ft);function Bt(){return ft!==null&&ft.apply(this,arguments)||this}return Bt.prototype.getDefaultCfg=function(){var Rt=ft.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},Rt),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,style:{stroke:"#999",lineWidth:1}})},Bt.prototype.renderInner=function(Rt){this.renderArc(Rt)},Bt.prototype.getArcPath=function(){var Rt=this.getLocation(),Ot=Rt.center,X=Rt.radius,ut=Rt.startAngle,vt=Rt.endAngle,pt=Object(p.e)(Ot,X,ut),Et=Object(p.e)(Ot,X,vt),q=vt-ut>Math.PI?1:0,st=[["M",pt.x,pt.y]];if(vt-ut==Math.PI*2){var it=Object(p.e)(Ot,X,ut+Math.PI);st.push(["A",X,X,0,q,1,it.x,it.y]),st.push(["A",X,X,0,q,1,Et.x,Et.y])}else st.push(["A",X,X,0,q,1,Et.x,Et.y]);return st},Bt.prototype.renderArc=function(Rt){var Ot=this.getArcPath(),X=this.get("style");this.addShape(Rt,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:Object(rt.a)({path:Ot},X)})},Bt}(E.a),s=n,h=function(ft){Object(rt.b)(Bt,ft);function Bt(){return ft!==null&&ft.apply(this,arguments)||this}return Bt.prototype.getDefaultCfg=function(){var Rt=ft.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},Rt),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:S.a.regionColor,opacity:.4}}})},Bt.prototype.renderInner=function(Rt){this.renderRegion(Rt)},Bt.prototype.renderRegion=function(Rt){var Ot=this.get("start"),X=this.get("end"),ut=this.get("style"),vt=Object(p.k)({start:Ot,end:X});this.addShape(Rt,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:Object(rt.a)({x:vt.x,y:vt.y,width:vt.width,height:vt.height},ut)})},Bt}(E.a),M=h,O=function(ft){Object(rt.b)(Bt,ft);function Bt(){return ft!==null&&ft.apply(this,arguments)||this}return Bt.prototype.getDefaultCfg=function(){var Rt=ft.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},Rt),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},Bt.prototype.renderInner=function(Rt){this.renderImage(Rt)},Bt.prototype.getImageAttrs=function(){var Rt=this.get("start"),Ot=this.get("end"),X=this.get("style"),ut=Object(p.k)({start:Rt,end:Ot}),vt=this.get("src");return Object(rt.a)({x:ut.x,y:ut.y,img:vt,width:ut.width,height:ut.height},X)},Bt.prototype.renderImage=function(Rt){this.addShape(Rt,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},Bt}(E.a),T=O,v=function(ft){Object(rt.b)(Bt,ft);function Bt(){return ft!==null&&ft.apply(this,arguments)||this}return Bt.prototype.getDefaultCfg=function(){var Rt=ft.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},Rt),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:S.a.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:S.a.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:S.a.fontFamily}}}})},Bt.prototype.renderInner=function(Rt){Object(a.get)(this.get("line"),"display")&&this.renderLine(Rt),Object(a.get)(this.get("text"),"display")&&this.renderText(Rt),Object(a.get)(this.get("point"),"display")&&this.renderPoint(Rt),this.get("autoAdjust")&&this.autoAdjust(Rt)},Bt.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},Bt.prototype.renderPoint=function(Rt){var Ot=this.getShapeAttrs().point;this.addShape(Rt,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:Ot})},Bt.prototype.renderLine=function(Rt){var Ot=this.getShapeAttrs().line;this.addShape(Rt,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:Ot})},Bt.prototype.renderText=function(Rt){var Ot=this.getShapeAttrs().text,X=Ot.x,ut=Ot.y,vt=Ot.text,pt=Object(rt.c)(Ot,["x","y","text"]),Et=this.get("text"),q=Et.background,st=Et.maxLength,it=Et.autoEllipsis,z=Et.isVertival,P=Et.ellipsisPosition,H={x:X,y:ut,id:this.getElementId("text"),name:"annotation-text",content:vt,style:pt,background:q,maxLength:st,autoEllipsis:it,isVertival:z,ellipsisPosition:P};b(Rt,H)},Bt.prototype.autoAdjust=function(Rt){var Ot=this.get("direction"),X=this.get("x"),ut=this.get("y"),vt=Object(a.get)(this.get("line"),"length",0),pt=this.get("coordinateBBox"),Et=Rt.getBBox(),q=Et.minX,st=Et.maxX,it=Et.minY,z=Et.maxY,P=Rt.findById(this.getElementId("text-group")),H=Rt.findById(this.getElementId("text")),k=Rt.findById(this.getElementId("line"));if(!!pt){if(P){if(X+q<=pt.minX){var d=pt.minX-(X+q);Object(r.c)(P,P.attr("x")+d,P.attr("y"))}if(X+st>=pt.maxX){var d=X+st-pt.maxX;Object(r.c)(P,P.attr("x")-d,P.attr("y"))}}if(Ot==="upward"&&ut+it<=pt.minY||Ot!=="upward"&&ut+z>=pt.maxY){var g=void 0,F=void 0;Ot==="upward"&&ut+it<=pt.minY?(g="top",F=1):(g="bottom",F=-1),H.attr("textBaseline",g),k&&k.attr("path",[["M",0,0],["L",0,vt*F]]),Object(r.c)(P,P.attr("x"),(vt+2)*F)}}},Bt.prototype.getShapeAttrs=function(){var Rt=Object(a.get)(this.get("line"),"display"),Ot=Object(a.get)(this.get("point"),"style",{}),X=Object(a.get)(this.get("line"),"style",{}),ut=Object(a.get)(this.get("text"),"style",{}),vt=this.get("direction"),pt=Rt?Object(a.get)(this.get("line"),"length",0):0,Et=vt==="upward"?-1:1;return{point:Object(rt.a)({x:0,y:0},Ot),line:Object(rt.a)({path:[["M",0,0],["L",0,pt*Et]]},X),text:Object(rt.a)({x:0,y:(pt+2)*Et,text:Object(a.get)(this.get("text"),"content",""),textBaseline:vt==="upward"?"bottom":"top"},ut)}},Bt}(E.a),m=v,C=function(ft){Object(rt.b)(Bt,ft);function Bt(){return ft!==null&&ft.apply(this,arguments)||this}return Bt.prototype.getDefaultCfg=function(){var Rt=ft.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},Rt),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:S.a.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:S.a.textColor,fontFamily:S.a.fontFamily}}}})},Bt.prototype.renderInner=function(Rt){var Ot=Object(a.get)(this.get("region"),"style",{}),X=Object(a.get)(this.get("text"),"style",{}),ut=this.get("lineLength")||0,vt=this.get("points");if(!!vt.length){var pt=Object(p.j)(vt),Et=[];Et.push(["M",vt[0].x,pt.minY-ut]),vt.forEach(function(st){Et.push(["L",st.x,st.y])}),Et.push(["L",vt[vt.length-1].x,vt[vt.length-1].y-ut]),this.addShape(Rt,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:Object(rt.a)({path:Et},Ot)});var q=Object(rt.a)({id:this.getElementId("text"),name:"annotation-text",x:(pt.minX+pt.maxX)/2,y:pt.minY-ut},this.get("text"));b(Rt,q)}},Bt}(E.a),D=C,Y=function(ft){Object(rt.b)(Bt,ft);function Bt(){return ft!==null&&ft.apply(this,arguments)||this}return Bt.prototype.getDefaultCfg=function(){var Rt=ft.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},Rt),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},Bt.prototype.renderInner=function(Rt){var Ot=this,X=this.get("start"),ut=this.get("end"),vt=this.addGroup(Rt,{id:this.getElementId("region-filter"),capture:!1});Object(a.each)(this.get("shapes"),function(Et,q){var st=Et.get("type"),it=Object(a.clone)(Et.attr());Ot.adjustShapeAttrs(it),Ot.addShape(vt,{id:Ot.getElementId("shape-"+st+"-"+q),capture:!1,type:st,attrs:it})});var pt=Object(p.k)({start:X,end:ut});vt.setClip({type:"rect",attrs:{x:pt.minX,y:pt.minY,width:pt.width,height:pt.height}})},Bt.prototype.adjustShapeAttrs=function(Rt){var Ot=this.get("color");Rt.fill&&(Rt.fill=Rt.fillStyle=Ot),Rt.stroke=Rt.strokeStyle=Ot},Bt}(E.a),Z=Y,et=function(ft){Object(rt.b)(Bt,ft);function Bt(){return ft!==null&&ft.apply(this,arguments)||this}return Bt.prototype.getDefaultCfg=function(){var Rt=ft.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},Rt),{name:"annotation",type:"shape",draw:a.noop})},Bt.prototype.renderInner=function(Rt){var Ot=this.get("render");Object(a.isFunction)(Ot)&&Ot(Rt)},Bt}(E.a),dt=et,ht=_("fIp6"),St=_("de35"),wt=function(ft){Object(rt.b)(Bt,ft);function Bt(){return ft!==null&&ft.apply(this,arguments)||this}return Bt.prototype.getDefaultCfg=function(){var Rt=ft.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},Rt),{name:"annotation",type:"html",locationType:"point",x:0,y:0,containerTpl:'<div class="g2-html-annotation"></div>',alignX:"left",alignY:"top",html:"",zIndex:7})},Bt.prototype.render=function(){var Rt=this.getContainer(),Ot=this.get("html");Object(p.a)(Rt);var X=Object(a.isFunction)(Ot)?Ot(Rt):Ot;Object(a.isElement)(X)?Rt.appendChild(X):Object(a.isString)(X)&&Rt.appendChild(Object(ht.b)(X)),this.resetPosition()},Bt.prototype.resetPosition=function(){var Rt=this.getContainer(),Ot=this.getLocation(),X=Ot.x,ut=Ot.y,vt=this.get("alignX"),pt=this.get("alignY"),Et=this.get("offsetX"),q=this.get("offsetY"),st=Object(ht.d)(Rt),it=Object(ht.c)(Rt),z={x:X,y:ut};vt==="middle"?z.x-=Math.round(st/2):vt==="right"&&(z.x-=Math.round(st)),pt==="middle"?z.y-=Math.round(it/2):pt==="bottom"&&(z.y-=Math.round(it)),Et&&(z.x+=Et),q&&(z.y+=q),Object(ht.e)(Rt,{position:"absolute",left:z.x+"px",top:z.y+"px",zIndex:this.get("zIndex")})},Bt}(St.a),xt=wt},uFwe:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return a});var rt=_("BsWD");function a(E,e){var r;if(typeof Symbol=="undefined"||E[Symbol.iterator]==null){if(Array.isArray(E)||(r=Object(rt.a)(E))||e&&E&&typeof E.length=="number"){r&&(E=r);var p=0,b=function(){};return{s:b,n:function(){return p>=E.length?{done:!0}:{done:!1,value:E[p++]}},e:function(y){throw y},f:b}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S=!0,l=!1,A;return{s:function(){r=E[Symbol.iterator]()},n:function(){var y=r.next();return S=y.done,y},e:function(y){l=!0,A=y},f:function(){try{!S&&r.return!=null&&r.return()}finally{if(l)throw A}}}}},"uw/B":function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return n});var rt=_("mrSG"),a=_("zJSt"),E=_("YuPD"),e=_("sqD9"),r=_("iTfj"),p=_("w02o"),b=_("tKoa"),S=_("hJqF");function l(s){var h=s.chart,M=s.options,O=M.data,T=M.areaStyle,v=M.color,m=M.point,C=M.line,D=M.isPercent,Y=M.xField,Z=M.yField,et=M.tooltip,dt=M.seriesField,ht=Object(e.a)(O,Z,Y,Z,D);h.data(ht);var St=D?Object(rt.a)({formatter:function(Bt){return{name:Bt[dt]||Bt[Y],value:(Number(Bt[Z])*100).toFixed(2)+"%"}}},et):et,wt=Object(E.b)({},s,{options:{area:{color:v,style:T},line:C&&Object(rt.a)({color:v},C),point:m&&Object(rt.a)({color:v},m),tooltip:St,label:void 0}}),xt=Object(E.b)({},wt,{options:{tooltip:!1}});return Object(b.a)(wt),Object(b.d)(xt),Object(b.e)(xt),s}function A(s){var h=s.chart,M=s.options,O=M.label,T=M.yField,v=Object(E.c)(h,"area");if(!O)v.label(!1);else{var m=O.callback,C=Object(rt.c)(O,["callback"]);v.label({fields:[T],callback:m,cfg:Object(rt.a)({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Object(E.o)(C))})}return s}function j(s){var h=s.chart,M=s.options,O=M.isStack,T=M.isPercent;return(T||O)&&Object(r.each)(h.geometries,function(v){v.adjust("stack")}),s}function y(s){return Object(E.e)(l,S.d,j,p.j,S.b,S.c,p.k,A,p.h,Object(p.b)(),p.c,p.a,p.e)(s)}var n=function(s){Object(rt.b)(h,s);function h(){var M=s!==null&&s.apply(this,arguments)||this;return M.type="area",M}return h.prototype.getDefaultOptions=function(){return Object(E.b)({},s.prototype.getDefaultOptions.call(this),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left"}})},h.prototype.changeData=function(M){this.updateOption({data:M});var O=this.options,T=O.isPercent,v=O.xField,m=O.yField;this.chart.changeData(Object(e.a)(M,m,v,m,T))},h.prototype.getSchemaAdaptor=function(){return y},h}(a.a)},uzHj:function(Fn,Gt){},v7Ed:function(Fn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"version",function(){return p});var rt=_("aN7R");_.d(Gt,"Shape",function(){return rt});var a=_("aFU3");for(var E in a)["default","Canvas","Group","Shape","version"].indexOf(E)<0&&function(b){_.d(Gt,b,function(){return a[b]})}(E);var e=_("wClo");_.d(Gt,"Canvas",function(){return e.a});var r=_("5z4m");_.d(Gt,"Group",function(){return r.a});var p="0.5.6"},vIgC:function(Fn,Gt,_){"use strict";_.d(Gt,"b",function(){return E}),_.d(Gt,"c",function(){return r}),_.d(Gt,"a",function(){return p});var rt=_("sstZ"),a=_("lt7v");function E(b,S,l){var A=1;if(Object(rt.h)(b)&&(A=b.split(`
`).length),A>1){var j=e(S,l);return S*A+j*(A-1)}return S}function e(b,S){return S?S-b:b*.14}function r(b,S){var l=Object(a.a)(),A=0;if(Object(rt.e)(b)||b==="")return A;if(l.save(),l.font=S,Object(rt.h)(b)&&b.includes(`
`)){var j=b.split(`
`);Object(rt.a)(j,function(y){var n=l.measureText(y).width;A<n&&(A=n)})}else A=l.measureText(b).width;return l.restore(),A}function p(b){var S=b.fontSize,l=b.fontFamily,A=b.fontWeight,j=b.fontStyle,y=b.fontVariant;return[j,y,A,S+"px",l].join(" ").trim()}},vk7d:function(Fn,Gt){},w02o:function(Fn,Gt,_){"use strict";_.d(Gt,"d",function(){return r}),_.d(Gt,"k",function(){return p}),_.d(Gt,"c",function(){return b}),_.d(Gt,"a",function(){return S}),_.d(Gt,"j",function(){return l}),_.d(Gt,"i",function(){return A}),_.d(Gt,"h",function(){return j}),_.d(Gt,"g",function(){return y}),_.d(Gt,"f",function(){return n}),_.d(Gt,"b",function(){return s}),_.d(Gt,"e",function(){return h});var rt=_("mrSG"),a=_("iTfj"),E=_("n/J0"),e=_("YuPD");function r(M){var O=M.chart,T=M.options,v=T.legend,m=T.colorField,C=T.seriesField;return v===!1?O.legend(!1):(m||C)&&O.legend(m||C,v),M}function p(M){var O=M.chart,T=M.options,v=T.tooltip;return v!==void 0&&O.tooltip(v),M}function b(M){var O=M.chart,T=M.options,v=T.interactions;return Object(a.each)(v,function(m){m.enable===!1?O.removeInteraction(m.type):O.interaction(m.type,m.cfg||{})}),M}function S(M){var O=M.chart,T=M.options,v=T.animation;return typeof v=="boolean"?O.animate(v):O.animate(!0),Object(a.each)(O.geometries,function(m){m.animate(v)}),M}function l(M){var O=M.chart,T=M.options,v=T.theme;return v&&O.theme(v),M}function A(M){var O=M.chart,T=M.options,v=T.state;return v&&Object(a.each)(O.geometries,function(m){m.state(v)}),M}function j(M){var O=M.chart,T=M.options,v=T.slider;return O.option("slider",v),M}function y(M){var O=M.chart,T=M.options,v=T.scrollbar;return O.option("scrollbar",v),M}function n(M,O){return function(T){var v=T.chart,m=T.options,C={};return Object(a.each)(M,function(D,Y){C[Y]=Object(e.k)(D,E.a)}),C=Object(e.b)({},O,m.meta,C),v.scale(C),T}}function s(M){return function(O){var T=O.chart,v=O.options,m=T.getController("annotation");return Object(a.each)(Object(rt.d)(v.annotations||[],M||[]),function(C){m.annotation(C)}),O}}function h(M){var O=M.chart,T=M.options,v=T.yAxis,m=T.limitInPlot,C=m;return Object(a.isObject)(v)&&Object(a.isNil)(m)&&(Object.values(Object(e.k)(v,["min","max","minLimit","maxLimit"])).some(function(D){return!Object(a.isNil)(D)})?C=!0:C=!1),O.limitInPlot=C,M}},wClo:function(Fn,Gt,_){"use strict";var rt=_("mrSG"),a=_("aFU3"),E=_("IvmH"),e=_("c0lT"),r=_("APlK"),p=_("c+wO"),b=_("aN7R"),S=_("5z4m"),l=_("iTfj"),A=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,j=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,y=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function n(Rt){var Ot=Rt.match(y);if(!Ot)return"";var X="";return Ot.sort(function(ut,vt){return ut=ut.split(":"),vt=vt.split(":"),Number(ut[0])-Number(vt[0])}),Object(l.each)(Ot,function(ut){ut=ut.split(":"),X+='<stop offset="'+ut[0]+'" stop-color="'+ut[1]+'"></stop>'}),X}function s(Rt,Ot){var X=A.exec(Rt),ut=Object(l.mod)(Object(l.toRadian)(parseFloat(X[1])),Math.PI*2),vt=X[2],pt,Et;ut>=0&&ut<.5*Math.PI?(pt={x:0,y:0},Et={x:1,y:1}):.5*Math.PI<=ut&&ut<Math.PI?(pt={x:1,y:0},Et={x:0,y:1}):Math.PI<=ut&&ut<1.5*Math.PI?(pt={x:1,y:1},Et={x:0,y:0}):(pt={x:0,y:1},Et={x:1,y:0});var q=Math.tan(ut),st=q*q,it=(Et.x-pt.x+q*(Et.y-pt.y))/(st+1)+pt.x,z=q*(Et.x-pt.x+q*(Et.y-pt.y))/(st+1)+pt.y;Ot.setAttribute("x1",pt.x),Ot.setAttribute("y1",pt.y),Ot.setAttribute("x2",it),Ot.setAttribute("y2",z),Ot.innerHTML=n(vt)}function h(Rt,Ot){var X=j.exec(Rt),ut=parseFloat(X[1]),vt=parseFloat(X[2]),pt=parseFloat(X[3]),Et=X[4];Ot.setAttribute("cx",ut),Ot.setAttribute("cy",vt),Ot.setAttribute("r",pt),Ot.innerHTML=n(Et)}var M=function(){function Rt(Ot){this.cfg={};var X=null,ut=Object(l.uniqueId)("gradient_");return Ot.toLowerCase()[0]==="l"?(X=Object(p.b)("linearGradient"),s(Ot,X)):(X=Object(p.b)("radialGradient"),h(Ot,X)),X.setAttribute("id",ut),this.el=X,this.id=ut,this.cfg=Ot,this}return Rt.prototype.match=function(Ot,X){return this.cfg===X},Rt}(),O=M,T={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},v={x:"-40%",y:"-40%",width:"200%",height:"200%"},m=function(){function Rt(Ot){this.type="filter",this.cfg={},this.type="filter";var X=Object(p.b)("filter");return Object(l.each)(v,function(ut,vt){X.setAttribute(vt,ut)}),this.el=X,this.id=Object(l.uniqueId)("filter_"),this.el.id=this.id,this.cfg=Ot,this._parseShadow(Ot,X),this}return Rt.prototype.match=function(Ot,X){if(this.type!==Ot)return!1;var ut=!0,vt=this.cfg;return Object(l.each)(Object.keys(vt),function(pt){if(vt[pt]!==X[pt])return ut=!1,!1}),ut},Rt.prototype.update=function(Ot,X){var ut=this.cfg;return ut[T[Ot]]=X,this._parseShadow(ut,this.el),this},Rt.prototype._parseShadow=function(Ot,X){var ut=`<feDropShadow
      dx="`+(Ot.dx||0)+`"
      dy="`+(Ot.dy||0)+`"
      stdDeviation="`+(Ot.blur?Ot.blur/10:0)+`"
      flood-color="`+(Ot.color?Ot.color:"#000")+`"
      flood-opacity="`+(Ot.opacity?Ot.opacity:1)+`"
      />`;X.innerHTML=ut},Rt}(),C=m,D=function(){function Rt(Ot,X){this.cfg={};var ut=Object(p.b)("marker"),vt=Object(l.uniqueId)("marker_");ut.setAttribute("id",vt);var pt=Object(p.b)("path");pt.setAttribute("stroke",Ot.stroke||"none"),pt.setAttribute("fill",Ot.fill||"none"),ut.appendChild(pt),ut.setAttribute("overflow","visible"),ut.setAttribute("orient","auto-start-reverse"),this.el=ut,this.child=pt,this.id=vt;var Et=Ot[X==="marker-start"?"startArrow":"endArrow"];return this.stroke=Ot.stroke||"#000",Et===!0?this._setDefaultPath(X,pt):(this.cfg=Et,this._setMarker(Ot.lineWidth,pt)),this}return Rt.prototype.match=function(){return!1},Rt.prototype._setDefaultPath=function(Ot,X){var ut=this.el;X.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),ut.setAttribute("refX",""+10*Math.cos(Math.PI/6)),ut.setAttribute("refY",""+5)},Rt.prototype._setMarker=function(Ot,X){var ut=this.el,vt=this.cfg.path,pt=this.cfg.d;Object(l.isArray)(vt)&&(vt=vt.map(function(Et){return Et.join(" ")}).join("")),X.setAttribute("d",vt),ut.appendChild(X),pt&&ut.setAttribute("refX",""+pt/Ot)},Rt.prototype.update=function(Ot){var X=this.child;X.attr?X.attr("fill",Ot):X.setAttribute("fill",Ot)},Rt}(),Y=D,Z=function(){function Rt(Ot){this.type="clip",this.cfg={};var X=Object(p.b)("clipPath");this.el=X,this.id=Object(l.uniqueId)("clip_"),X.id=this.id;var ut=Ot.cfg.el;return X.appendChild(ut),this.cfg=Ot,this}return Rt.prototype.match=function(){return!1},Rt.prototype.remove=function(){var Ot=this.el;Ot.parentNode.removeChild(Ot)},Rt}(),et=Z,dt=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,ht=function(){function Rt(Ot){this.cfg={};var X=Object(p.b)("pattern");X.setAttribute("patternUnits","userSpaceOnUse");var ut=Object(p.b)("image");X.appendChild(ut);var vt=Object(l.uniqueId)("pattern_");X.id=vt,this.el=X,this.id=vt,this.cfg=Ot;var pt=dt.exec(Ot),Et=pt[2];ut.setAttribute("href",Et);var q=new Image;Et.match(/^data:/i)||(q.crossOrigin="Anonymous"),q.src=Et;function st(){X.setAttribute("width",""+q.width),X.setAttribute("height",""+q.height)}return q.complete?st():(q.onload=st,q.src=q.src),this}return Rt.prototype.match=function(Ot,X){return this.cfg===X},Rt}(),St=ht,wt=function(){function Rt(Ot){var X=Object(p.b)("defs"),ut=Object(l.uniqueId)("defs_");X.id=ut,Ot.appendChild(X),this.children=[],this.defaultArrow={},this.el=X,this.canvas=Ot}return Rt.prototype.find=function(Ot,X){for(var ut=this.children,vt=null,pt=0;pt<ut.length;pt++)if(ut[pt].match(Ot,X)){vt=ut[pt].id;break}return vt},Rt.prototype.findById=function(Ot){for(var X=this.children,ut=null,vt=0;vt<X.length;vt++)if(X[vt].id===Ot){ut=X[vt];break}return ut},Rt.prototype.add=function(Ot){this.children.push(Ot),Ot.canvas=this.canvas,Ot.parent=this},Rt.prototype.getDefaultArrow=function(Ot,X){var ut=Ot.stroke||Ot.strokeStyle;if(this.defaultArrow[ut])return this.defaultArrow[ut].id;var vt=new Y(Ot,X);return this.defaultArrow[ut]=vt,this.el.appendChild(vt.el),this.add(vt),vt.id},Rt.prototype.addGradient=function(Ot){var X=new O(Ot);return this.el.appendChild(X.el),this.add(X),X.id},Rt.prototype.addArrow=function(Ot,X){var ut=new Y(Ot,X);return this.el.appendChild(ut.el),this.add(ut),ut.id},Rt.prototype.addShadow=function(Ot){var X=new C(Ot);return this.el.appendChild(X.el),this.add(X),X.id},Rt.prototype.addPattern=function(Ot){var X=new St(Ot);return this.el.appendChild(X.el),this.add(X),X.id},Rt.prototype.addClip=function(Ot){var X=new et(Ot);return this.el.appendChild(X.el),this.add(X),X.id},Rt}(),xt=wt,ft=function(Rt){Object(rt.b)(Ot,Rt);function Ot(X){return Rt.call(this,Object(rt.a)(Object(rt.a)({},X),{autoDraw:!0,renderer:"svg"}))||this}return Ot.prototype.getShapeBase=function(){return b},Ot.prototype.getGroupBase=function(){return S.a},Ot.prototype.getShape=function(X,ut,vt){var pt=vt.target||vt.srcElement;if(!E.a[pt.tagName]){for(var Et=pt.parentNode;Et&&!E.a[Et.tagName];)Et=Et.parentNode;pt=Et}return this.find(function(q){return q.get("el")===pt})},Ot.prototype.createDom=function(){var X=Object(p.b)("svg"),ut=new xt(X);return X.setAttribute("width",""+this.get("width")),X.setAttribute("height",""+this.get("height")),this.set("context",ut),X},Ot.prototype.onCanvasChange=function(X){var ut=this.get("context"),vt=this.get("el");if(X==="sort"){var pt=this.get("children");pt&&pt.length&&Object(p.d)(this,function(q,st){return pt.indexOf(q)-pt.indexOf(st)?1:0})}else if(X==="clear"){if(vt){vt.innerHTML="";var Et=ut.el;Et.innerHTML="",vt.appendChild(Et)}}else X==="matrix"?Object(r.c)(this):X==="clip"?Object(r.a)(this,ut):X==="changeSize"&&(vt.setAttribute("width",""+this.get("width")),vt.setAttribute("height",""+this.get("height")))},Ot.prototype.draw=function(){var X=this.get("context"),ut=this.getChildren();Object(r.a)(this,X),ut.length&&Object(e.a)(X,ut)},Ot}(a.AbstractCanvas),Bt=Gt.a=ft},wq2r:function(Fn,Gt,_){"use strict";var rt=_("mrSG"),a=_("aFU3"),E=_("R5nb"),e=_("9eUa"),r=_("iTfj"),p=_("cyZq"),b=function(S){Object(rt.b)(l,S);function l(){return S!==null&&S.apply(this,arguments)||this}return l.prototype.onCanvasChange=function(A){Object(e.h)(this,A)},l.prototype.getShapeBase=function(){return E},l.prototype.getGroupBase=function(){return l},l.prototype._applyClip=function(A,j){j&&(A.save(),Object(e.a)(A,j),j.createPath(A),A.restore(),A.clip(),j._afterDraw())},l.prototype.cacheCanvasBBox=function(){var A=this.cfg.children,j=[],y=[];Object(r.each)(A,function(m){var C=m.cfg.cacheCanvasBBox;C&&m.cfg.isInView&&(j.push(C.minX,C.maxX),y.push(C.minY,C.maxY))});var n=null;if(j.length){var s=Math.min.apply(null,j),h=Math.max.apply(null,j),M=Math.min.apply(null,y),O=Math.max.apply(null,y);n={minX:s,minY:M,x:s,y:M,maxX:h,maxY:O,width:h-s,height:O-M};var T=this.cfg.canvas;if(T){var v=T.getViewRange();this.set("isInView",Object(p.f)(n,v))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",n)},l.prototype.draw=function(A,j){var y=this.cfg.children,n=j?this.cfg.refresh:!0;y.length&&n&&(A.save(),Object(e.a)(A,this),this._applyClip(A,this.getClip()),Object(e.d)(A,y,j),A.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},l.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},l}(a.AbstractGroup);Gt.a=b},wy8a:function(Fn,Gt,_){var rt=_("KxBF");function a(E,e,r){var p=E.length;return r=r===void 0?p:r,!e&&r>=p?E:rt(E,e,r)}Fn.exports=a},x3EW:function(Fn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"Base",function(){return p}),_.d(Gt,"Circle",function(){return l}),_.d(Gt,"Line",function(){return j});var rt=_("mrSG"),a=_("iTfj"),E=_("MeYt"),e=_("L16w"),r=function(y){Object(rt.b)(n,y);function n(){return y!==null&&y.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var s=y.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},s),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:e.a.lineColor}}}})},n.prototype.getLineType=function(){var s=this.get("line")||this.get("defaultCfg").line;return s.type},n.prototype.renderInner=function(s){this.drawGrid(s)},n.prototype.getAlternatePath=function(s,h){var M=this.getGridPath(s),O=h.slice(0).reverse(),T=this.getGridPath(O,!0),v=this.get("closed");return v?M=M.concat(T):(T[0][0]="L",M=M.concat(T),M.push(["Z"])),M},n.prototype.getPathStyle=function(){return this.get("line").style},n.prototype.drawGrid=function(s){var h=this,M=this.get("line"),O=this.get("items"),T=this.get("alternateColor"),v=null;Object(a.each)(O,function(m,C){var D=m.id||C;if(M){var Y=h.getPathStyle();Y=Object(a.isFunction)(Y)?Y(m,C,O):Y;var Z=h.getElementId("line-"+D),et=h.getGridPath(m.points);h.addShape(s,{type:"path",name:"grid-line",id:Z,attrs:Object(a.mix)({path:et},Y)})}if(T&&C>0){var dt=h.getElementId("region-"+D),ht=C%2==0;if(Object(a.isString)(T))ht&&h.drawAlternateRegion(dt,s,v.points,m.points,T);else{var St=ht?T[1]:T[0];h.drawAlternateRegion(dt,s,v.points,m.points,St)}}v=m})},n.prototype.drawAlternateRegion=function(s,h,M,O,T){var v=this.getAlternatePath(M,O);this.addShape(h,{type:"path",id:s,name:"grid-region",attrs:{path:v,fill:T}})},n}(E.a),p=r;function b(y,n,s,h){var M=s-y,O=h-n;return Math.sqrt(M*M+O*O)}var S=function(y){Object(rt.b)(n,y);function n(){return y!==null&&y.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var s=y.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},s),{type:"circle",center:null,closed:!0})},n.prototype.getGridPath=function(s,h){var M=this.getLineType(),O=this.get("closed"),T=[];if(s.length)if(M==="circle"){var v=this.get("center"),m=s[0],C=b(v.x,v.y,m.x,m.y),D=h?0:1;O?(T.push(["M",v.x,v.y-C]),T.push(["A",C,C,0,0,D,v.x,v.y+C]),T.push(["A",C,C,0,0,D,v.x,v.y-C]),T.push(["Z"])):Object(a.each)(s,function(Y,Z){Z===0?T.push(["M",Y.x,Y.y]):T.push(["A",C,C,0,0,D,Y.x,Y.y])})}else Object(a.each)(s,function(Y,Z){Z===0?T.push(["M",Y.x,Y.y]):T.push(["L",Y.x,Y.y])}),O&&T.push(["Z"]);return T},n}(p),l=S,A=function(y){Object(rt.b)(n,y);function n(){return y!==null&&y.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var s=y.prototype.getDefaultCfg.call(this);return Object(rt.a)(Object(rt.a)({},s),{type:"line"})},n.prototype.getGridPath=function(s){var h=[];return Object(a.each)(s,function(M,O){O===0?h.push(["M",M.x,M.y]):h.push(["L",M.x,M.y])}),h},n}(p),j=A},y753:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return M});var rt=_("mrSG"),a=_("zJSt"),E=_("YuPD"),e=_("w02o"),r=_("tKoa");function p(O){var T=O.chart,v=O.options,m=v.data,C=v.lineStyle,D=v.color,Y=v.point,Z=v.area;T.data(m);var et=Object(E.b)({},O,{options:{line:{style:C,color:D},point:Y&&Object(rt.a)({color:D},Y),area:Z&&Object(rt.a)({color:D},Z),label:void 0}}),dt=Object(E.b)({},et,{options:{tooltip:!1}});return Object(r.d)(et),Object(r.e)(dt),Object(r.a)(dt),O}function b(O){var T,v=O.options,m=v.xAxis,C=v.yAxis,D=v.xField,Y=v.yField;return Object(E.e)(Object(e.f)((T={},T[D]=m,T[Y]=C,T)))(O)}function S(O){var T=O.chart,v=O.options,m=v.radius;return T.coordinate("polar",{radius:m}),O}function l(O){var T=O.chart,v=O.options,m=v.xField,C=v.xAxis,D=v.yField,Y=v.yAxis;return T.axis(m,C),T.axis(D,Y),O}function A(O){var T=O.chart,v=O.options,m=v.label,C=v.yField,D=Object(E.c)(T,"line");if(!m)D.label(!1);else{var Y=m.callback,Z=Object(rt.c)(m,["callback"]);D.label({fields:[C],callback:Y,cfg:Object(E.o)(Z)})}return O}function j(O){return Object(E.e)(p,b,e.j,S,l,e.d,e.k,A,e.c,e.a,Object(e.b)())(O)}var y=_("Ihc8"),n=_("iTfj"),s=function(O){Object(rt.b)(T,O);function T(){return O!==null&&O.apply(this,arguments)||this}return Object.defineProperty(T.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),T.prototype.getTooltipItems=function(v){var m=this.getTooltipCfg(),C=m.shared,D=m.title,Y=O.prototype.getTooltipItems.call(this,v);if(Y.length>0){var Z=this.view.geometries[0],et=Z.dataArray,dt=Y[0].name,ht=[];return et.forEach(function(St){St.forEach(function(wt){var xt=y.Util.getTooltipItems(wt,Z),ft=xt[0];if(!C&&ft&&ft.name===dt){var Bt=Object(n.isNil)(D)?dt:D;ht.push(Object(rt.a)(Object(rt.a)({},ft),{name:ft.title,title:Bt}))}else if(C&&ft){var Bt=Object(n.isNil)(D)?ft.name||dt:D;ht.push(Object(rt.a)(Object(rt.a)({},ft),{name:ft.title,title:Bt}))}})}),ht}return[]},T}(y.TooltipController);Object(y.registerComponentController)("radar-tooltip",s);var h=function(O){Object(rt.b)(T,O);function T(){return O!==null&&O.apply(this,arguments)||this}return T.prototype.init=function(){var v=this.context.view;v.removeInteraction("tooltip")},T.prototype.show=function(){var v=this.context.event,m=this.getTooltipController();m.showTooltip({x:v.x,y:v.y})},T.prototype.hide=function(){var v=this.getTooltipController();v.hideTooltip()},T.prototype.getTooltipController=function(){var v=this.context.view;return v.getController("radar-tooltip")},T}(y.Action);Object(y.registerAction)("radar-tooltip",h),Object(y.registerInteraction)("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]});var M=function(O){Object(rt.b)(T,O);function T(){var v=O!==null&&O.apply(this,arguments)||this;return v.type="radar",v}return T.prototype.changeData=function(v){this.updateOption({data:v}),this.chart.changeData(v)},T.prototype.getDefaultOptions=function(){return Object(E.b)({},O.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},T.prototype.getSchemaAdaptor=function(){return j},T}(a.a)},yU0y:function(Fn,Gt,_){"use strict";_.d(Gt,"b",function(){return rt}),_.d(Gt,"a",function(){return a}),_.d(Gt,"c",function(){return E});var rt=1e-6,a=typeof Float32Array!="undefined"?Float32Array:Array,E=Math.random;function e(S){a=S}var r=Math.PI/180;function p(S){return S*r}function b(S,l){return Math.abs(S-l)<=rt*Math.max(1,Math.abs(S),Math.abs(l))}Math.hypot||(Math.hypot=function(){for(var S=0,l=arguments.length;l--;)S+=arguments[l]*arguments[l];return Math.sqrt(S)})},yUfG:function(Fn,Gt,_){"use strict";_.r(Gt),_.d(Gt,"cluster",function(){return S}),_.d(Gt,"hierarchy",function(){return l.c}),_.d(Gt,"pack",function(){return xt}),_.d(Gt,"packSiblings",function(){return dt}),_.d(Gt,"packEnclose",function(){return y}),_.d(Gt,"partition",function(){return Ot.a}),_.d(Gt,"stratify",function(){return Et}),_.d(Gt,"tree",function(){return g}),_.d(Gt,"treemap",function(){return F.a}),_.d(Gt,"treemapBinary",function(){return V}),_.d(Gt,"treemapDice",function(){return tt.a}),_.d(Gt,"treemapSlice",function(){return ot.a}),_.d(Gt,"treemapSliceDice",function(){return at}),_.d(Gt,"treemapSquarify",function(){return At.a}),_.d(Gt,"treemapResquarify",function(){return yt});function rt(gt,bt){return gt.parent===bt.parent?1:2}function a(gt){return gt.reduce(E,0)/gt.length}function E(gt,bt){return gt+bt.x}function e(gt){return 1+gt.reduce(r,0)}function r(gt,bt){return Math.max(gt,bt.y)}function p(gt){for(var bt;bt=gt.children;)gt=bt[0];return gt}function b(gt){for(var bt;bt=gt.children;)gt=bt[bt.length-1];return gt}var S=function(){var gt=rt,bt=1,Tt=1,Dt=!1;function Ut(jt){var Vt,Ht=0;jt.eachAfter(function(Re){var He=Re.children;He?(Re.x=a(He),Re.y=e(He)):(Re.x=Vt?Ht+=gt(Re,Vt):0,Re.y=0,Vt=Re)});var re=p(jt),pe=b(jt),ye=re.x-gt(re,pe)/2,we=pe.x+gt(pe,re)/2;return jt.eachAfter(Dt?function(Re){Re.x=(Re.x-jt.x)*bt,Re.y=(jt.y-Re.y)*Tt}:function(Re){Re.x=(Re.x-ye)/(we-ye)*bt,Re.y=(1-(jt.y?Re.y/jt.y:1))*Tt})}return Ut.separation=function(jt){return arguments.length?(gt=jt,Ut):gt},Ut.size=function(jt){return arguments.length?(Dt=!1,bt=+jt[0],Tt=+jt[1],Ut):Dt?null:[bt,Tt]},Ut.nodeSize=function(jt){return arguments.length?(Dt=!0,bt=+jt[0],Tt=+jt[1],Ut):Dt?[bt,Tt]:null},Ut},l=_("a8tM"),A=function(gt){return typeof gt=="object"&&"length"in gt?gt:Array.from(gt)};function j(gt){for(var bt=gt.length,Tt,Dt;bt;)Dt=Math.random()*bt--|0,Tt=gt[bt],gt[bt]=gt[Dt],gt[Dt]=Tt;return gt}var y=function(gt){for(var bt=0,Tt=(gt=j(Array.from(gt))).length,Dt=[],Ut,jt;bt<Tt;)Ut=gt[bt],jt&&h(jt,Ut)?++bt:(jt=O(Dt=n(Dt,Ut)),bt=0);return jt};function n(gt,bt){var Tt,Dt;if(M(bt,gt))return[bt];for(Tt=0;Tt<gt.length;++Tt)if(s(bt,gt[Tt])&&M(v(gt[Tt],bt),gt))return[gt[Tt],bt];for(Tt=0;Tt<gt.length-1;++Tt)for(Dt=Tt+1;Dt<gt.length;++Dt)if(s(v(gt[Tt],gt[Dt]),bt)&&s(v(gt[Tt],bt),gt[Dt])&&s(v(gt[Dt],bt),gt[Tt])&&M(m(gt[Tt],gt[Dt],bt),gt))return[gt[Tt],gt[Dt],bt];throw new Error}function s(gt,bt){var Tt=gt.r-bt.r,Dt=bt.x-gt.x,Ut=bt.y-gt.y;return Tt<0||Tt*Tt<Dt*Dt+Ut*Ut}function h(gt,bt){var Tt=gt.r-bt.r+Math.max(gt.r,bt.r,1)*1e-9,Dt=bt.x-gt.x,Ut=bt.y-gt.y;return Tt>0&&Tt*Tt>Dt*Dt+Ut*Ut}function M(gt,bt){for(var Tt=0;Tt<bt.length;++Tt)if(!h(gt,bt[Tt]))return!1;return!0}function O(gt){switch(gt.length){case 1:return T(gt[0]);case 2:return v(gt[0],gt[1]);case 3:return m(gt[0],gt[1],gt[2])}}function T(gt){return{x:gt.x,y:gt.y,r:gt.r}}function v(gt,bt){var Tt=gt.x,Dt=gt.y,Ut=gt.r,jt=bt.x,Vt=bt.y,Ht=bt.r,re=jt-Tt,pe=Vt-Dt,ye=Ht-Ut,we=Math.sqrt(re*re+pe*pe);return{x:(Tt+jt+re/we*ye)/2,y:(Dt+Vt+pe/we*ye)/2,r:(we+Ut+Ht)/2}}function m(gt,bt,Tt){var Dt=gt.x,Ut=gt.y,jt=gt.r,Vt=bt.x,Ht=bt.y,re=bt.r,pe=Tt.x,ye=Tt.y,we=Tt.r,Re=Dt-Vt,He=Dt-pe,pn=Ut-Ht,fn=Ut-ye,Rn=re-jt,Cn=we-jt,kn=Dt*Dt+Ut*Ut-jt*jt,Mn=kn-Vt*Vt-Ht*Ht+re*re,Tn=kn-pe*pe-ye*ye+we*we,Un=He*pn-Re*fn,Kn=(pn*Tn-fn*Mn)/(Un*2)-Dt,tr=(fn*Rn-pn*Cn)/Un,or=(He*Mn-Re*Tn)/(Un*2)-Ut,nr=(Re*Cn-He*Rn)/Un,er=tr*tr+nr*nr-1,Sr=2*(jt+Kn*tr+or*nr),Vr=Kn*Kn+or*or-jt*jt,ti=-(er?(Sr+Math.sqrt(Sr*Sr-4*er*Vr))/(2*er):Vr/Sr);return{x:Dt+Kn+tr*ti,y:Ut+or+nr*ti,r:ti}}function C(gt,bt,Tt){var Dt=gt.x-bt.x,Ut,jt,Vt=gt.y-bt.y,Ht,re,pe=Dt*Dt+Vt*Vt;pe?(jt=bt.r+Tt.r,jt*=jt,re=gt.r+Tt.r,re*=re,jt>re?(Ut=(pe+re-jt)/(2*pe),Ht=Math.sqrt(Math.max(0,re/pe-Ut*Ut)),Tt.x=gt.x-Ut*Dt-Ht*Vt,Tt.y=gt.y-Ut*Vt+Ht*Dt):(Ut=(pe+jt-re)/(2*pe),Ht=Math.sqrt(Math.max(0,jt/pe-Ut*Ut)),Tt.x=bt.x+Ut*Dt-Ht*Vt,Tt.y=bt.y+Ut*Vt+Ht*Dt)):(Tt.x=bt.x+Tt.r,Tt.y=bt.y)}function D(gt,bt){var Tt=gt.r+bt.r-1e-6,Dt=bt.x-gt.x,Ut=bt.y-gt.y;return Tt>0&&Tt*Tt>Dt*Dt+Ut*Ut}function Y(gt){var bt=gt._,Tt=gt.next._,Dt=bt.r+Tt.r,Ut=(bt.x*Tt.r+Tt.x*bt.r)/Dt,jt=(bt.y*Tt.r+Tt.y*bt.r)/Dt;return Ut*Ut+jt*jt}function Z(gt){this._=gt,this.next=null,this.previous=null}function et(gt){if(!(Ut=(gt=A(gt)).length))return 0;var bt,Tt,Dt,Ut,jt,Vt,Ht,re,pe,ye,we;if(bt=gt[0],bt.x=0,bt.y=0,!(Ut>1))return bt.r;if(Tt=gt[1],bt.x=-Tt.r,Tt.x=bt.r,Tt.y=0,!(Ut>2))return bt.r+Tt.r;C(Tt,bt,Dt=gt[2]),bt=new Z(bt),Tt=new Z(Tt),Dt=new Z(Dt),bt.next=Dt.previous=Tt,Tt.next=bt.previous=Dt,Dt.next=Tt.previous=bt;t:for(Ht=3;Ht<Ut;++Ht){C(bt._,Tt._,Dt=gt[Ht]),Dt=new Z(Dt),re=Tt.next,pe=bt.previous,ye=Tt._.r,we=bt._.r;do if(ye<=we){if(D(re._,Dt._)){Tt=re,bt.next=Tt,Tt.previous=bt,--Ht;continue t}ye+=re._.r,re=re.next}else{if(D(pe._,Dt._)){bt=pe,bt.next=Tt,Tt.previous=bt,--Ht;continue t}we+=pe._.r,pe=pe.previous}while(re!==pe.next);for(Dt.previous=bt,Dt.next=Tt,bt.next=Tt.previous=Tt=Dt,jt=Y(bt);(Dt=Dt.next)!==Tt;)(Vt=Y(Dt))<jt&&(bt=Dt,jt=Vt);Tt=bt.next}for(bt=[Tt._],Dt=Tt;(Dt=Dt.next)!==Tt;)bt.push(Dt._);for(Dt=y(bt),Ht=0;Ht<Ut;++Ht)bt=gt[Ht],bt.x-=Dt.x,bt.y-=Dt.y;return Dt.r}var dt=function(gt){return et(gt),gt},ht=_("IeU1"),St=_("CSvP");function wt(gt){return Math.sqrt(gt.value)}var xt=function(){var gt=null,bt=1,Tt=1,Dt=St.a;function Ut(jt){return jt.x=bt/2,jt.y=Tt/2,gt?jt.eachBefore(ft(gt)).eachAfter(Bt(Dt,.5)).eachBefore(Rt(1)):jt.eachBefore(ft(wt)).eachAfter(Bt(St.a,1)).eachAfter(Bt(Dt,jt.r/Math.min(bt,Tt))).eachBefore(Rt(Math.min(bt,Tt)/(2*jt.r))),jt}return Ut.radius=function(jt){return arguments.length?(gt=Object(ht.a)(jt),Ut):gt},Ut.size=function(jt){return arguments.length?(bt=+jt[0],Tt=+jt[1],Ut):[bt,Tt]},Ut.padding=function(jt){return arguments.length?(Dt=typeof jt=="function"?jt:Object(St.b)(+jt),Ut):Dt},Ut};function ft(gt){return function(bt){bt.children||(bt.r=Math.max(0,+gt(bt)||0))}}function Bt(gt,bt){return function(Tt){if(Dt=Tt.children){var Dt,Ut,jt=Dt.length,Vt=gt(Tt)*bt||0,Ht;if(Vt)for(Ut=0;Ut<jt;++Ut)Dt[Ut].r+=Vt;if(Ht=et(Dt),Vt)for(Ut=0;Ut<jt;++Ut)Dt[Ut].r-=Vt;Tt.r=Ht+Vt}}}function Rt(gt){return function(bt){var Tt=bt.parent;bt.r*=gt,Tt&&(bt.x=Tt.x+gt*bt.x,bt.y=Tt.y+gt*bt.y)}}var Ot=_("+Nd1"),X={depth:-1},ut={};function vt(gt){return gt.id}function pt(gt){return gt.parentId}var Et=function(){var gt=vt,bt=pt;function Tt(Dt){var Ut=Array.from(Dt),jt=Ut.length,Vt,Ht,re,pe,ye,we,Re,He=new Map;for(Ht=0;Ht<jt;++Ht)Vt=Ut[Ht],ye=Ut[Ht]=new l.a(Vt),(we=gt(Vt,Ht,Dt))!=null&&(we+="")&&(Re=ye.id=we,He.set(Re,He.has(Re)?ut:ye)),(we=bt(Vt,Ht,Dt))!=null&&(we+="")&&(ye.parent=we);for(Ht=0;Ht<jt;++Ht)if(ye=Ut[Ht],we=ye.parent){if(pe=He.get(we),!pe)throw new Error("missing: "+we);if(pe===ut)throw new Error("ambiguous: "+we);pe.children?pe.children.push(ye):pe.children=[ye],ye.parent=pe}else{if(re)throw new Error("multiple roots");re=ye}if(!re)throw new Error("no root");if(re.parent=X,re.eachBefore(function(pn){pn.depth=pn.parent.depth+1,--jt}).eachBefore(l.b),re.parent=null,jt>0)throw new Error("cycle");return re}return Tt.id=function(Dt){return arguments.length?(gt=Object(ht.b)(Dt),Tt):gt},Tt.parentId=function(Dt){return arguments.length?(bt=Object(ht.b)(Dt),Tt):bt},Tt};function q(gt,bt){return gt.parent===bt.parent?1:2}function st(gt){var bt=gt.children;return bt?bt[0]:gt.t}function it(gt){var bt=gt.children;return bt?bt[bt.length-1]:gt.t}function z(gt,bt,Tt){var Dt=Tt/(bt.i-gt.i);bt.c-=Dt,bt.s+=Tt,gt.c+=Dt,bt.z+=Tt,bt.m+=Tt}function P(gt){for(var bt=0,Tt=0,Dt=gt.children,Ut=Dt.length,jt;--Ut>=0;)jt=Dt[Ut],jt.z+=bt,jt.m+=bt,bt+=jt.s+(Tt+=jt.c)}function H(gt,bt,Tt){return gt.a.parent===bt.parent?gt.a:Tt}function k(gt,bt){this._=gt,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=bt}k.prototype=Object.create(l.a.prototype);function d(gt){for(var bt=new k(gt,0),Tt,Dt=[bt],Ut,jt,Vt,Ht;Tt=Dt.pop();)if(jt=Tt._.children)for(Tt.children=new Array(Ht=jt.length),Vt=Ht-1;Vt>=0;--Vt)Dt.push(Ut=Tt.children[Vt]=new k(jt[Vt],Vt)),Ut.parent=Tt;return(bt.parent=new k(null,0)).children=[bt],bt}var g=function(){var gt=q,bt=1,Tt=1,Dt=null;function Ut(pe){var ye=d(pe);if(ye.eachAfter(jt),ye.parent.m=-ye.z,ye.eachBefore(Vt),Dt)pe.eachBefore(re);else{var we=pe,Re=pe,He=pe;pe.eachBefore(function(kn){kn.x<we.x&&(we=kn),kn.x>Re.x&&(Re=kn),kn.depth>He.depth&&(He=kn)});var pn=we===Re?1:gt(we,Re)/2,fn=pn-we.x,Rn=bt/(Re.x+pn+fn),Cn=Tt/(He.depth||1);pe.eachBefore(function(kn){kn.x=(kn.x+fn)*Rn,kn.y=kn.depth*Cn})}return pe}function jt(pe){var ye=pe.children,we=pe.parent.children,Re=pe.i?we[pe.i-1]:null;if(ye){P(pe);var He=(ye[0].z+ye[ye.length-1].z)/2;Re?(pe.z=Re.z+gt(pe._,Re._),pe.m=pe.z-He):pe.z=He}else Re&&(pe.z=Re.z+gt(pe._,Re._));pe.parent.A=Ht(pe,Re,pe.parent.A||we[0])}function Vt(pe){pe._.x=pe.z+pe.parent.m,pe.m+=pe.parent.m}function Ht(pe,ye,we){if(ye){for(var Re=pe,He=pe,pn=ye,fn=Re.parent.children[0],Rn=Re.m,Cn=He.m,kn=pn.m,Mn=fn.m,Tn;pn=it(pn),Re=st(Re),pn&&Re;)fn=st(fn),He=it(He),He.a=pe,Tn=pn.z+kn-Re.z-Rn+gt(pn._,Re._),Tn>0&&(z(H(pn,pe,we),pe,Tn),Rn+=Tn,Cn+=Tn),kn+=pn.m,Rn+=Re.m,Mn+=fn.m,Cn+=He.m;pn&&!it(He)&&(He.t=pn,He.m+=kn-Cn),Re&&!st(fn)&&(fn.t=Re,fn.m+=Rn-Mn,we=pe)}return we}function re(pe){pe.x*=bt,pe.y=pe.depth*Tt}return Ut.separation=function(pe){return arguments.length?(gt=pe,Ut):gt},Ut.size=function(pe){return arguments.length?(Dt=!1,bt=+pe[0],Tt=+pe[1],Ut):Dt?null:[bt,Tt]},Ut.nodeSize=function(pe){return arguments.length?(Dt=!0,bt=+pe[0],Tt=+pe[1],Ut):Dt?[bt,Tt]:null},Ut},F=_("tvR+"),V=function(gt,bt,Tt,Dt,Ut){var jt=gt.children,Vt,Ht=jt.length,re,pe=new Array(Ht+1);for(pe[0]=re=Vt=0;Vt<Ht;++Vt)pe[Vt+1]=re+=jt[Vt].value;ye(0,Ht,gt.value,bt,Tt,Dt,Ut);function ye(we,Re,He,pn,fn,Rn,Cn){if(we>=Re-1){var kn=jt[we];kn.x0=pn,kn.y0=fn,kn.x1=Rn,kn.y1=Cn;return}for(var Mn=pe[we],Tn=He/2+Mn,Un=we+1,Kn=Re-1;Un<Kn;){var tr=Un+Kn>>>1;pe[tr]<Tn?Un=tr+1:Kn=tr}Tn-pe[Un-1]<pe[Un]-Tn&&we+1<Un&&--Un;var or=pe[Un]-Mn,nr=He-or;if(Rn-pn>Cn-fn){var er=He?(pn*nr+Rn*or)/He:Rn;ye(we,Un,or,pn,fn,er,Cn),ye(Un,Re,nr,er,fn,Rn,Cn)}else{var Sr=He?(fn*nr+Cn*or)/He:Cn;ye(we,Un,or,pn,fn,Rn,Sr),ye(Un,Re,nr,pn,Sr,Rn,Cn)}}},tt=_("FPPI"),ot=_("7IPS"),at=function(gt,bt,Tt,Dt,Ut){(gt.depth&1?ot.a:tt.a)(gt,bt,Tt,Dt,Ut)},At=_("I4jL"),yt=function gt(bt){function Tt(Dt,Ut,jt,Vt,Ht){if((re=Dt._squarify)&&re.ratio===bt)for(var re,pe,ye,we,Re=-1,He,pn=re.length,fn=Dt.value;++Re<pn;){for(pe=re[Re],ye=pe.children,we=pe.value=0,He=ye.length;we<He;++we)pe.value+=ye[we].value;pe.dice?Object(tt.a)(pe,Ut,jt,Vt,fn?jt+=(Ht-jt)*pe.value/fn:Ht):Object(ot.a)(pe,Ut,jt,fn?Ut+=(Vt-Ut)*pe.value/fn:Vt,Ht),fn-=pe.value}else Dt._squarify=re=Object(At.c)(bt,Dt,Ut,jt,Vt,Ht),re.ratio=bt}return Tt.ratio=function(Dt){return gt((Dt=+Dt)>1?Dt:1)},Tt}(At.b)},ycre:function(Fn,Gt,_){var rt=_("711d"),a=rt("length");Fn.exports=a},yqCL:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return ut});var rt=_("mrSG"),a=_("zJSt"),E=_("YuPD"),e=_("iTfj"),r=_("w02o"),p=_("sqD9"),b=_("4Olw"),S;(function(vt){vt.Left="Left",vt.Right="Right"})(S||(S={}));var l;(function(vt){vt.Line="line",vt.Column="column"})(l||(l={}));var A="left-axes-view",j="right-axes-view",y={nice:!0,label:{autoHide:!0,autoRotate:!1}},n=Object(rt.a)(Object(rt.a)({},y),{position:"left"}),s=Object(rt.a)(Object(rt.a)({},y),{position:"right",grid:null});function h(vt){return Object(e.get)(vt,"geometry")===l.Line}function M(vt){return Object(e.get)(vt,"geometry")===l.Column}function O(vt,pt,Et){return M(Et)?Object(E.b)({},{geometry:l.Column,label:Et.label&&Et.isRange?{content:function(st){var it;return(it=st[pt])===null||it===void 0?void 0:it.join("-")}}:void 0},Et):Object(rt.a)({geometry:l.Line},Et)}function T(vt,pt){var Et=vt[0],q=vt[1];if(Object(e.isArray)(pt)){var st=pt[0],it=pt[1];return[st,it]}var z=Object(e.get)(pt,Et),P=Object(e.get)(pt,q);return[z,P]}function v(vt,pt){return pt===S.Left?vt===!1?!1:Object(E.b)({},n,vt):pt===S.Right?vt===!1?!1:Object(E.b)({},s,vt):vt}var m=_("Ihc8");function C(vt){var pt=vt.view,Et=vt.geometryOption,q=vt.yField,st=vt.legend,it=Object(e.get)(st,"marker"),z=Object(E.c)(pt,h(Et)?"line":"interval");if(!Et.seriesField){var P=z.getAttribute("color"),H=P.values[0],k=it||(h(Et)?{symbol:function(F,V,tt){return[["M",F-tt,V],["L",F+tt,V]]},style:{lineWidth:2,r:6,stroke:H}}:{symbol:"square",style:{fill:H}});return[{value:q,name:Object(e.get)(pt,"options.scales."+q+".alias")||q,marker:k,isGeometry:!0,viewId:pt.id}]}var d=z.getGroupAttributes();return Object(e.reduce)(d,function(g,F){var V=m.Util.getLegendItems(pt,z,F,pt.getTheme(),it);return g.concat(V)},[])}var D=_("tKoa");function Y(vt){var pt=vt.options,Et=vt.chart,q=pt.geometryOption,st=q.isStack,it=q.color,z=q.seriesField,P=q.groupField,H=q.isGroup,k=["xField","yField"];if(h(q)){Object(D.d)(Object(E.b)({},vt,{options:Object(rt.a)(Object(rt.a)(Object(rt.a)({},Object(E.k)(pt,k)),q),{line:{color:q.color,style:q.lineStyle}})})),Object(D.e)(Object(E.b)({},vt,{options:Object(rt.a)(Object(rt.a)(Object(rt.a)({},Object(E.k)(pt,k)),q),{point:q.point&&Object(rt.a)({color:it,shape:"circle"},q.point)})}));var d=[];H&&d.push({type:"dodge",dodgeBy:P||z,customOffset:0}),st&&d.push({type:"stack"}),d.length&&Object(e.each)(Et.geometries,function(g){g.adjust(d)})}return M(q)&&Object(D.c)(Object(E.b)({},vt,{options:Object(rt.a)(Object(rt.a)(Object(rt.a)({},Object(E.k)(pt,k)),q),{widthRatio:q.columnWidthRatio,interval:Object(rt.a)(Object(rt.a)({},Object(E.k)(q,["color"])),{style:q.columnStyle})})})),vt}function Z(vt){var pt,Et=vt.options,q=Et.geometryOptions,st=q===void 0?[]:q,it=Et.xField,z=Et.yField,P=Object(e.every)(st,function(H){var k=H.geometry;return k===l.Line||k===void 0});return Object(E.b)({},{options:{geometryOptions:[],meta:(pt={},pt[it]={type:"cat",sync:!0,range:P?[0,1]:void 0},pt),tooltip:{showMarkers:P,showCrosshairs:P,shared:!0,crosshairs:{type:"x"}},interactions:P?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},vt,{options:{yAxis:T(z,Et.yAxis),geometryOptions:[O(it,z[0],st[0]),O(it,z[1],st[1])],annotations:T(z,Et.annotations)}})}function et(vt){var pt=vt.chart,Et=vt.options,q=Et.xField,st=Et.yField,it=Et.geometryOptions,z=Et.data,P=Et.tooltip,H={line:0,column:1},k=[Object(rt.a)(Object(rt.a)({},it[0]),{id:A,data:z[0],yField:st[0]}),Object(rt.a)(Object(rt.a)({},it[1]),{id:j,data:z[1],yField:st[1]})];return k.sort(function(d,g){return-H[d.geometry]+H[g.geometry]}).forEach(function(d){var g=d.id,F=d.data,V=d.yField,tt=M(d)&&d.isPercent,ot=tt?Object(p.b)(F,V,q,V):F,at=pt.createView({id:g}).data(ot),At=tt?Object(rt.a)({formatter:function(gt){return{name:gt[d.seriesField]||V,value:(Number(gt[V])*100).toFixed(2)+"%"}}},P):P;Y({chart:at,options:{xField:q,yField:V,tooltip:At,geometryOption:d}})}),vt}function dt(vt){var pt,Et=vt.chart,q=vt.options,st=q.geometryOptions,it=((pt=Et.getTheme())===null||pt===void 0?void 0:pt.colors10)||[],z=0;return Et.once("beforepaint",function(){Object(e.each)(st,function(P,H){var k=Object(b.a)(Et,H===0?A:j);if(!P.color){var d=k.getGroupScales(),g=Object(e.get)(d,[0,"values","length"],1),F=it.slice(z,z+g).concat(H===0?[]:it);k.geometries.forEach(function(V){P.seriesField?V.color(P.seriesField,F):V.color(F[0])}),z+=g}}),Et.render(!0)}),vt}function ht(vt){var pt,Et,q=vt.chart,st=vt.options,it=st.xAxis,z=st.yAxis,P=st.xField,H=st.yField;return Object(r.f)((pt={},pt[P]=it,pt[H[0]]=z[0],pt))(Object(E.b)({},vt,{chart:Object(b.a)(q,A)})),Object(r.f)((Et={},Et[P]=it,Et[H[1]]=z[1],Et))(Object(E.b)({},vt,{chart:Object(b.a)(q,j)})),vt}function St(vt){var pt=vt.chart,Et=vt.options,q=Object(b.a)(pt,A),st=Object(b.a)(pt,j),it=Et.xField,z=Et.yField,P=Et.xAxis,H=Et.yAxis;return pt.axis(it,!1),pt.axis(z[0],!1),pt.axis(z[1],!1),q.axis(it,P),q.axis(z[0],v(H[0],S.Left)),st.axis(it,!1),st.axis(z[1],v(H[1],S.Right)),vt}function wt(vt){var pt=vt.chart,Et=vt.options,q=Et.tooltip,st=Object(b.a)(pt,A),it=Object(b.a)(pt,j);return pt.tooltip(q),st.tooltip({shared:!0}),it.tooltip({shared:!0}),vt}function xt(vt){var pt=vt.chart;return Object(r.c)(Object(E.b)({},vt,{chart:Object(b.a)(pt,A)})),Object(r.c)(Object(E.b)({},vt,{chart:Object(b.a)(pt,j)})),vt}function ft(vt){var pt=vt.chart,Et=vt.options,q=Et.annotations,st=Object(e.get)(q,[0]),it=Object(e.get)(q,[1]);return Object(r.b)(st)(Object(E.b)({},vt,{chart:Object(b.a)(pt,A),options:{annotations:st}})),Object(r.b)(it)(Object(E.b)({},vt,{chart:Object(b.a)(pt,j),options:{annotations:it}})),vt}function Bt(vt){var pt=vt.chart;return Object(r.a)(Object(E.b)({},vt,{chart:Object(b.a)(pt,A)})),Object(r.a)(Object(E.b)({},vt,{chart:Object(b.a)(pt,j)})),vt}function Rt(vt){var pt=vt.chart,Et=vt.options,q=Et.yAxis;return Object(r.e)(Object(E.b)({},vt,{chart:Object(b.a)(pt,A),options:{yAxis:q[0]}})),Object(r.e)(Object(E.b)({},vt,{chart:Object(b.a)(pt,j),options:{yAxis:q[1]}})),vt}function Ot(vt){var pt=vt.chart,Et=vt.options,q=Et.legend,st=Et.geometryOptions,it=Et.yField,z=Et.data,P=Object(b.a)(pt,A),H=Object(b.a)(pt,j);return q===!1?pt.legend(!1):Object(e.isObject)(q)&&q.custom===!0?pt.legend(q):(pt.once("beforepaint",function(){var k=z[0].length?C({view:P,geometryOption:st[0],yField:it[0],legend:q}):[],d=z[1].length?C({view:H,geometryOption:st[1],yField:it[1],legend:q}):[];pt.legend(Object(E.b)({},q,{custom:!0,items:k.concat(d)}))}),pt.on("legend-item:click",function(k){var d=Object(e.get)(k,"gEvent.delegateObject",{});if(d&&d.item){var g=d.item,F=g.value,V=g.isGeometry,tt=g.viewId;if(V){var ot=Object(e.findIndex)(it,function(yt){return yt===F});if(ot>-1){var at=Object(e.get)(Object(b.a)(pt,tt),"geometries");Object(e.each)(at,function(yt){yt.changeVisible(!d.item.unchecked)})}}else{var At=Object(e.get)(pt.getController("legend"),"option.items",[]);Object(e.each)(pt.views,function(yt){var gt=yt.getGroupScales();Object(e.each)(gt,function(bt){bt.values&&bt.values.indexOf(F)>-1&&yt.filter(bt.field,function(Tt){var Dt=Object(e.find)(At,function(Ut){return Ut.value===Tt});return!Dt.unchecked})}),pt.render(!0)})}}})),vt}function X(vt){return Object(E.e)(Z,et,ht,St,Rt,wt,xt,ft,r.j,Bt,dt,Ot)(vt)}var ut=function(vt){Object(rt.b)(pt,vt);function pt(){var Et=vt!==null&&vt.apply(this,arguments)||this;return Et.type="dual-axes",Et}return pt.prototype.getDefaultOptions=function(){return Object(E.b)({},vt.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},pt.prototype.getSchemaAdaptor=function(){return X},pt}(a.a)},z4Vf:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return s});var rt=_("mrSG"),a=_("zJSt"),E=_("YuPD"),e=_("iTfj"),r=_("w02o"),p=_("tKoa");function b(h){var M=h.chart,O=h.options,T=O.data,v=O.sectorStyle,m=O.color;return M.data(T),Object(E.e)(p.c)(Object(E.b)({},h,{options:{marginRatio:1,interval:{style:v,color:m}}})),h}function S(h){var M=h.chart,O=h.options,T=O.label,v=O.xField,m=Object(E.c)(M,"interval");if(T===!1)m.label(!1);else if(Object(e.isObject)(T)){var C=T.callback,D=T.fields,Y=Object(rt.c)(T,["callback","fields"]),Z=Y.offset,et=Y.layout;(Z===void 0||Z>=0)&&(et=et?Object(e.isArray)(et)?et:[et]:[],Y.layout=Object(e.filter)(et,function(dt){return dt.type!=="limit-in-shape"}),Y.layout.length||delete Y.layout),m.label({fields:D||[v],callback:C,cfg:Object(E.o)(Y)})}else Object(E.j)(E.a.WARN,T===null,"the label option must be an Object."),m.label({fields:[v]});return h}function l(h){var M=h.chart,O=h.options,T=O.legend,v=O.seriesField;return T===!1?M.legend(!1):v&&M.legend(v,T),h}function A(h){var M=h.chart,O=h.options,T=O.radius,v=O.innerRadius;return M.coordinate({type:"polar",cfg:{radius:T,innerRadius:v}}),h}function j(h){var M,O=h.options,T=O.xAxis,v=O.yAxis,m=O.xField,C=O.yField;return Object(E.e)(Object(r.f)((M={},M[m]=T,M[C]=v,M)))(h)}function y(h){var M=h.chart,O=h.options,T=O.xAxis,v=O.yAxis,m=O.xField,C=O.yField;return T?M.axis(m,T):M.axis(m,!1),v?M.axis(C,v):M.axis(C,!1),h}function n(h){Object(E.e)(b,j,S,A,y,l,r.k,r.c,r.a,r.j,Object(r.b)(),r.i)(h)}var s=function(h){Object(rt.b)(M,h);function M(){var O=h!==null&&h.apply(this,arguments)||this;return O.type="rose",O}return M.prototype.changeData=function(O){this.updateOption({data:O}),this.chart.changeData(O)},M.prototype.getDefaultOptions=function(){return Object(E.b)({},h.prototype.getDefaultOptions.call(this),{xAxis:!1,yAxis:!1,legend:{position:"right",offsetX:-10},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]})},M.prototype.getSchemaAdaptor=function(){return n},M}(a.a)},zJSt:function(Fn,Gt,_){"use strict";_.d(Gt,"a",function(){return l});var rt=_("mrSG"),a=_("Ihc8"),E=_("iTfj"),e=_("f6Jy"),r=_("u3os"),p=_.n(r),b=_("YuPD"),S="data-chart-source-type",l=function(A){Object(rt.b)(j,A);function j(y,n){var s=A.call(this)||this;return s.type="base",s.container=typeof y=="string"?document.getElementById(y):y,s.options=Object(b.b)({},s.getDefaultOptions(),n),s.createG2(),s.bindEvents(),s}return j.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},j.prototype.createG2=function(){var y=this.options,n=y.width,s=y.height,h=y.padding,M=y.appendPadding,O=y.renderer,T=y.pixelRatio,v=y.syncViewPadding,m=y.supportCSSTransform,C=y.limitInPlot;this.chart=new a.Chart(Object(rt.a)(Object(rt.a)({container:this.container,autoFit:!1},this.getChartSize(n,s)),{padding:h,appendPadding:M,renderer:O,pixelRatio:T,localRefresh:!1,syncViewPadding:v,supportCSSTransform:m,limitInPlot:C})),this.container.setAttribute(S,"G2Plot")},j.prototype.getChartSize=function(y,n){var s=Object(b.g)(this.container);return{width:y||s.width||400,height:n||s.height||400}},j.prototype.bindEvents=function(){var y=this;this.chart&&this.chart.on("*",function(n){(n==null?void 0:n.type)&&y.emit(n.type,n)})},j.prototype.getDefaultOptions=function(){return j.getDefaultOptions()},j.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},j.prototype.update=function(y){this.updateOption(y),this.render()},j.prototype.updateOption=function(y){this.options=Object(b.b)({},this.options,y)},j.prototype.setState=function(y,n,s){s===void 0&&(s=!0);var h=Object(b.f)(this.chart);Object(E.each)(h,function(M){n(M.getData())&&M.setState(y,s)})},j.prototype.getStates=function(){var y=Object(b.f)(this.chart),n=[];return Object(E.each)(y,function(s){var h=s.getData(),M=s.getStates();Object(E.each)(M,function(O){n.push({data:h,state:O,geometry:s.geometry,element:s})})}),n},j.prototype.changeData=function(y){this.update({data:y})},j.prototype.changeSize=function(y,n){this.chart.changeSize(y,n)},j.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute(S)},j.prototype.execAdaptor=function(){var y=this.getSchemaAdaptor(),n=this.options,s=n.padding,h=n.appendPadding;this.chart.padding=s,this.chart.appendPadding=h,y({chart:this.chart,options:this.options})},j.prototype.triggerResize=function(){this.chart.forceFit()},j.prototype.bindSizeSensor=function(){var y=this;if(!this.unbind){var n=this.options.autoFit,s=n===void 0?!0:n;s&&(this.unbind=Object(r.bind)(this.container,function(){var h=Object(b.g)(y.container),M=h.width,O=h.height;(M!==y.chart.width||O!==y.chart.height)&&y.triggerResize()}))}},j.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},j}(e.a)},zK8m:function(Fn,Gt,_){"use strict";var rt=_("mrSG"),a=_("iTfj"),E=_("6JdA"),e=_("sstZ"),r=_("aSjE"),p=_("LmB6"),b=E.a.transform,S="matrix",l=["zIndex","capture","visible","type"],A=["repeat"],j=":",y="*";function n(T){for(var v=[],m=0;m<T.length;m++)Object(a.isArray)(T[m])?v.push([].concat(T[m])):v.push(T[m]);return v}function s(T,v){var m={},C=v.attrs;for(var D in T)m[D]=C[D];return m}function h(T,v){var m={},C=v.attr();return Object(a.each)(T,function(D,Y){A.indexOf(Y)===-1&&!Object(a.isEqual)(C[Y],D)&&(m[Y]=D)}),m}function M(T,v){if(v.onFrame)return T;var m=v.startTime,C=v.delay,D=v.duration,Y=Object.prototype.hasOwnProperty;return Object(a.each)(T,function(Z){m+C<Z.startTime+Z.delay+Z.duration&&D>Z.delay&&Object(a.each)(v.toAttrs,function(et,dt){Y.call(Z.toAttrs,dt)&&(delete Z.toAttrs[dt],delete Z.fromAttrs[dt])})}),T}var O=function(T){Object(rt.b)(v,T);function v(m){var C=T.call(this,m)||this;C.attrs={};var D=C.getDefaultAttrs();return Object(a.mix)(D,m.attrs),C.attrs=D,C.initAttrs(D),C.initAnimate(),C}return v.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},v.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},v.prototype.onCanvasChange=function(m){},v.prototype.initAttrs=function(m){},v.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},v.prototype.isGroup=function(){return!1},v.prototype.getParent=function(){return this.get("parent")},v.prototype.getCanvas=function(){return this.get("canvas")},v.prototype.attr=function(){for(var m,C=[],D=0;D<arguments.length;D++)C[D]=arguments[D];var Y=C[0],Z=C[1];if(!Y)return this.attrs;if(Object(a.isObject)(Y)){for(var et in Y)this.setAttr(et,Y[et]);return this.afterAttrsChange(Y),this}return C.length===2?(this.setAttr(Y,Z),this.afterAttrsChange((m={},m[Y]=Z,m)),this):this.attrs[Y]},v.prototype.isClipped=function(m,C){var D=this.getClip();return D&&!D.isHit(m,C)},v.prototype.setAttr=function(m,C){var D=this.attrs[m];D!==C&&(this.attrs[m]=C,this.onAttrChange(m,C,D))},v.prototype.onAttrChange=function(m,C,D){m==="matrix"&&this.set("totalMatrix",null)},v.prototype.afterAttrsChange=function(m){if(this.cfg.isClipShape){var C=this.cfg.applyTo;C&&C.onCanvasChange("clip")}else this.onCanvasChange("attr")},v.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},v.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},v.prototype.setZIndex=function(m){this.set("zIndex",m);var C=this.getParent();return C&&C.sort(),this},v.prototype.toFront=function(){var m=this.getParent();if(!!m){var C=m.getChildren(),D=this.get("el"),Y=C.indexOf(this);C.splice(Y,1),C.push(this),this.onCanvasChange("zIndex")}},v.prototype.toBack=function(){var m=this.getParent();if(!!m){var C=m.getChildren(),D=this.get("el"),Y=C.indexOf(this);C.splice(Y,1),C.unshift(this),this.onCanvasChange("zIndex")}},v.prototype.remove=function(m){m===void 0&&(m=!0);var C=this.getParent();C?(Object(e.j)(C.getChildren(),this),C.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),m&&this.destroy()},v.prototype.resetMatrix=function(){this.attr(S,this.getDefaultMatrix()),this.onCanvasChange("matrix")},v.prototype.getMatrix=function(){return this.attr(S)},v.prototype.setMatrix=function(m){this.attr(S,m),this.onCanvasChange("matrix")},v.prototype.getTotalMatrix=function(){var m=this.cfg.totalMatrix;if(!m){var C=this.attr("matrix"),D=this.cfg.parentMatrix;D&&C?m=Object(r.b)(D,C):m=C||D,this.set("totalMatrix",m)}return m},v.prototype.applyMatrix=function(m){var C=this.attr("matrix"),D=null;m&&C?D=Object(r.b)(m,C):D=C||m,this.set("totalMatrix",D),this.set("parentMatrix",m)},v.prototype.getDefaultMatrix=function(){return null},v.prototype.applyToMatrix=function(m){var C=this.attr("matrix");return C?Object(r.c)(C,m):m},v.prototype.invertFromMatrix=function(m){var C=this.attr("matrix");if(C){var D=Object(r.a)(C);if(D)return Object(r.c)(D,m)}return m},v.prototype.setClip=function(m){var C=this.getCanvas(),D=null;if(m){var Y=this.getShapeBase(),Z=Object(a.upperFirst)(m.type),et=Y[Z];et&&(D=new et({type:m.type,isClipShape:!0,applyTo:this,attrs:m.attrs,canvas:C}))}return this.set("clipShape",D),this.onCanvasChange("clip"),D},v.prototype.getClip=function(){var m=this.cfg.clipShape;return m||null},v.prototype.clone=function(){var m=this,C=this.attrs,D={};Object(a.each)(C,function(et,dt){Object(a.isArray)(C[dt])?D[dt]=n(C[dt]):D[dt]=C[dt]});var Y=this.constructor,Z=new Y({attrs:D});return Object(a.each)(l,function(et){Z.set(et,m.get(et))}),Z},v.prototype.destroy=function(){var m=this.destroyed;m||(this.attrs={},T.prototype.destroy.call(this))},v.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},v.prototype.animate=function(){for(var m=[],C=0;C<arguments.length;C++)m[C]=arguments[C];var D=this.isCanvas&&this.isCanvas();if(!(!D&&!this.get("canvas"))){this.set("animating",!0);var Y=this.get("timeline");Y||(Y=this.get("canvas").get("timeline"),this.set("timeline",Y));var Z=this.get("animations")||[];Y.timer||Y.initTimer();var et=m[0],dt=m[1],ht=m[2],St=ht===void 0?"easeLinear":ht,wt=m[3],xt=wt===void 0?a.noop:wt,ft=m[4],Bt=ft===void 0?0:ft,Rt,Ot,X,ut,vt;Object(a.isFunction)(et)?(Rt=et,et={}):Object(a.isObject)(et)&&et.onFrame&&(Rt=et.onFrame,Ot=et.repeat),Object(a.isObject)(dt)?(vt=dt,dt=vt.duration,St=vt.easing||"easeLinear",Bt=vt.delay||0,Ot=vt.repeat||Ot||!1,xt=vt.callback||a.noop,X=vt.pauseCallback||a.noop,ut=vt.resumeCallback||a.noop):(Object(a.isNumber)(xt)&&(Bt=xt,xt=null),Object(a.isFunction)(St)?(xt=St,St="easeLinear"):St=St||"easeLinear");var pt=h(et,this),Et={fromAttrs:s(pt,this),toAttrs:pt,duration:dt,easing:St,repeat:Ot,callback:xt,pauseCallback:X,resumeCallback:ut,delay:Bt,startTime:Y.getTime(),id:Object(a.uniqueId)(),onFrame:Rt,pathFormatted:!1};Z.length>0?Z=M(Z,Et):Y.addAnimator(this),Z.push(Et),this.set("animations",Z),this.set("_pause",{isPaused:!1})}},v.prototype.stopAnimate=function(m){var C=this;m===void 0&&(m=!0);var D=this.get("animations");Object(a.each)(D,function(Y){m&&(Y.onFrame?C.attr(Y.onFrame(1)):C.attr(Y.toAttrs)),Y.callback&&Y.callback()}),this.set("animating",!1),this.set("animations",[])},v.prototype.pauseAnimate=function(){var m=this.get("timeline"),C=this.get("animations"),D=m.getTime();return Object(a.each)(C,function(Y){Y._paused=!0,Y._pauseTime=D,Y.pauseCallback&&Y.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:D}),this},v.prototype.resumeAnimate=function(){var m=this.get("timeline"),C=m.getTime(),D=this.get("animations"),Y=this.get("_pause").pauseTime;return Object(a.each)(D,function(Z){Z.startTime=Z.startTime+(C-Y),Z._paused=!1,Z._pauseTime=null,Z.resumeCallback&&Z.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",D),this},v.prototype.emitDelegation=function(m,C){var D=this,Y=C.propagationPath,Z=this.getEvents(),et;m==="mouseenter"?et=C.fromShape:m==="mouseleave"&&(et=C.toShape);for(var dt=function(ft){var Bt=Y[ft],Rt=Bt.get("name");if(Rt){if((Bt.isGroup()||Bt.isCanvas&&Bt.isCanvas())&&et&&Object(e.g)(Bt,et))return"break";Object(a.isArray)(Rt)?Object(a.each)(Rt,function(Ot){D.emitDelegateEvent(Bt,Ot,C)}):ht.emitDelegateEvent(Bt,Rt,C)}},ht=this,St=0;St<Y.length;St++){var wt=dt(St);if(wt==="break")break}},v.prototype.emitDelegateEvent=function(m,C,D){var Y=this.getEvents(),Z=C+j+D.type;(Y[Z]||Y[y])&&(D.name=Z,D.currentTarget=m,D.delegateTarget=this,D.delegateObject=m.get("delegateObject"),this.emit(Z,D))},v.prototype.translate=function(m,C){m===void 0&&(m=0),C===void 0&&(C=0);var D=this.getMatrix(),Y=b(D,[["t",m,C]]);return this.setMatrix(Y),this},v.prototype.move=function(m,C){var D=this.attr("x")||0,Y=this.attr("y")||0;return this.translate(m-D,C-Y),this},v.prototype.moveTo=function(m,C){return this.move(m,C)},v.prototype.scale=function(m,C){var D=this.getMatrix(),Y=b(D,[["s",m,C||m]]);return this.setMatrix(Y),this},v.prototype.rotate=function(m){var C=this.getMatrix(),D=b(C,[["r",m]]);return this.setMatrix(D),this},v.prototype.rotateAtStart=function(m){var C=this.attr(),D=C.x,Y=C.y,Z=this.getMatrix(),et=b(Z,[["t",-D,-Y],["r",m],["t",D,Y]]);return this.setMatrix(et),this},v.prototype.rotateAtPoint=function(m,C,D){var Y=this.getMatrix(),Z=b(Y,[["t",-m,-C],["r",D],["t",m,C]]);return this.setMatrix(Z),this},v}(p.a);Gt.a=O},zoYe:function(Fn,Gt,_){var rt=_("nmnc"),a=_("eUgh"),E=_("Z0cm"),e=_("/9aa"),r=1/0,p=rt?rt.prototype:void 0,b=p?p.toString:void 0;function S(l){if(typeof l=="string")return l;if(E(l))return a(l,S)+"";if(e(l))return b?b.call(l):"";var A=l+"";return A=="0"&&1/l==-r?"-0":A}Fn.exports=S}}]);
