(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"+DwW":function(zn,Ut,z){"use strict";var at=z("mrSG"),a=z("Mw2x"),A=function(e){Object(at.b)(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.isGroup=function(){return!0},r.prototype.isEntityGroup=function(){return!1},r.prototype.clone=function(){for(var p=e.prototype.clone.call(this),m=this.getChildren(),O=0;O<m.length;O++){var l=m[O];p.add(l.clone())}return p},r}(a.a);Ut.a=A},"+Nd1":function(zn,Ut,z){"use strict";var at=z("DdT1"),a=z("FPPI");Ut.a=function(){var A=1,e=1,r=0,p=!1;function m(l){var E=l.height+1;return l.x0=l.y0=r,l.x1=A,l.y1=e/E,l.eachBefore(O(e,E)),p&&l.eachBefore(at.a),l}function O(l,E){return function(j){j.children&&Object(a.a)(j,j.x0,l*(j.depth+1)/E,j.x1,l*(j.depth+2)/E);var y=j.x0,n=j.y0,s=j.x1-r,d=j.y1-r;s<y&&(y=s=(y+s)/2),d<n&&(n=d=(n+d)/2),j.x0=y,j.y0=n,j.x1=s,j.y1=d}}return m.round=function(l){return arguments.length?(p=!!l,m):p},m.size=function(l){return arguments.length?(A=+l[0],e=+l[1],m):[A,e]},m.padding=function(l){return arguments.length?(r=+l,m):r},m}},"+Oe8":function(zn,Ut,z){"use strict";Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.getReplaceAttrs=Ut.getPolygonCentroid=Ut.getAngle=Ut.getArcPath=Ut.getSectorPath=Ut.polarToCartesian=void 0;var at=z("iTfj");function a(l){if(at.isEmpty(l))return null;var E=l[0].x,j=l[0].x,y=l[0].y,n=l[0].y;return at.each(l,function(s){E=E>s.x?s.x:E,j=j<s.x?s.x:j,y=y>s.y?s.y:y,n=n<s.y?s.y:n}),{minX:E,maxX:j,minY:y,maxY:n,centerX:(E+j)/2,centerY:(y+n)/2}}function A(l,E,j,y){return{x:l+j*Math.cos(y),y:E+j*Math.sin(y)}}Ut.polarToCartesian=A;function e(l,E,j,y,n,s){s===void 0&&(s=0);var d=A(l,E,j,y),M=A(l,E,j,n),S=A(l,E,s,y),T=A(l,E,s,n);if(n-y==Math.PI*2){var v=A(l,E,j,y+Math.PI),x=A(l,E,s,y+Math.PI),C=[["M",d.x,d.y],["A",j,j,0,1,1,v.x,v.y],["A",j,j,0,1,1,M.x,M.y],["M",S.x,S.y]];return s&&(C.push(["A",s,s,0,1,0,x.x,x.y]),C.push(["A",s,s,0,1,0,T.x,T.y])),C.push(["M",d.x,d.y]),C.push(["Z"]),C}var N=n-y<=Math.PI?0:1,X=[["M",d.x,d.y],["A",j,j,0,N,1,M.x,M.y],["L",T.x,T.y]];return s&&X.push(["A",s,s,0,N,0,S.x,S.y]),X.push(["L",d.x,d.y]),X.push(["Z"]),X}Ut.getSectorPath=e;function r(l,E,j,y,n){var s=A(l,E,j,y),d=A(l,E,j,n);if(at.isNumberEqual(n-y,Math.PI*2)){var M=A(l,E,j,y+Math.PI);return[["M",s.x,s.y],["A",j,j,0,1,1,M.x,M.y],["A",j,j,0,1,1,s.x,s.y],["A",j,j,0,1,0,M.x,M.y],["A",j,j,0,1,0,s.x,s.y],["Z"]]}var S=n-y<=Math.PI?0:1;return[["M",s.x,s.y],["A",j,j,0,S,1,d.x,d.y]]}Ut.getArcPath=r;function p(l,E){var j=l.points,y=a(j),n,s,d=E.startAngle,M=E.endAngle,S=M-d;return E.isTransposed?(n=y.maxY*S,s=y.minY*S):(n=y.maxX*S,s=y.minX*S),n+=d,s+=d,{startAngle:s,endAngle:n}}Ut.getAngle=p;function m(l,E){if(at.isNumber(l)&&at.isNumber(E))return[l,E];for(var j=-1,y=0,n=0,s,d=l.length-1,M,S=0;++j<l.length;)s=d,d=j,S+=M=l[s]*E[d]-l[d]*E[s],y+=(l[s]+l[d])*M,n+=(E[s]+E[d])*M;return S*=3,[y/S,n/S]}Ut.getPolygonCentroid=m;function O(l,E){var j=l.attr(),y=E.attr();return at.each(j,function(n,s){y[s]===void 0&&(y[s]=void 0)}),y}Ut.getReplaceAttrs=O},"+wVF":function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return d});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("iTfj"),r=z("n/J0"),p=z("w02o");function m(M){var S=M.chart,T=M.options,v=T.data,x=T.type,C=T.reflect,N=T.xField,X=T.yField,tt=T.colorField,it=T.sizeField,pt=T.sizeRatio,ft=T.shape,Ot=T.color;S.data(v);var wt;x==="density"?wt=S.heatmap().position(N+"*"+X):wt=S.polygon().position(N+"*"+X),tt&&wt.color(tt,Ot||r.b.GRADIENT.CONTINUOUS),C&&S.coordinate().reflect(C);var xt=1;if((pt||pt===0)&&(!ft&&!it?console.warn("sizeRatio is not in effect: Must define shape or sizeField first"):pt<0||pt>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):xt=pt),ft&&(it||wt.shape("",function(){return[ft,1,xt]}),it)){var lt=v.map(function(Et){return Et[it]}),Vt=Math.min.apply(Math,lt),Lt=Math.max.apply(Math,lt);wt.shape(it,function(Et){return[ft,(Et-Vt)/(Lt-Vt),xt]})}return M}function O(M){var S,T=M.options,v=T.xAxis,x=T.yAxis,C=T.xField,N=T.yField;return Object(A.e)(Object(p.f)((S={},S[C]=v,S[N]=x,S)))(M)}function l(M){var S=M.chart,T=M.options,v=T.xAxis,x=T.yAxis,C=T.xField,N=T.yField;return v===!1?S.axis(C,!1):S.axis(C,v),x===!1?S.axis(N,!1):S.axis(N,x),M}function E(M){var S=M.chart,T=M.options,v=T.legend,x=T.colorField;return v?S.legend(x,v):S.legend(!1),M}function j(M){var S=M.chart,T=M.options,v=T.xField,x=T.yField,C=T.colorField,N=T.sizeField,X=T.heatmapStyle,tt=S.geometries[0];return X&&tt&&(Object(e.isFunction)(X)?tt.style(v+"*"+x+"*"+C+"*"+N,X):Object(e.isObject)(X)&&tt.style(X)),M}function y(M){var S=M.chart,T=M.options,v=T.label,x=T.colorField,C=T.type,N=Object(A.c)(S,C==="density"?"heatmap":"polygon");if(!v)N.label(!1);else if(x){var X=v.callback,tt=Object(at.c)(v,["callback"]);N.label({fields:[x],callback:X,cfg:Object(A.o)(tt)})}return M}function n(M){return Object(A.e)(m,O,p.j,l,E,p.k,j,y,Object(p.b)(),p.c,p.a)(M)}var s=z("kXyF");Object(s.registerShape)("polygon","circle",{draw:function(S,T){var v,x,C=S.x,N=S.y,X=this.parsePoints(S.points),tt=Math.abs(X[2].x-X[1].x),it=Math.abs(X[1].y-X[0].y),pt=Math.min(tt,it)/2,ft=Number(S.shape[1]),Ot=Number(S.shape[2]),wt=Math.sqrt(Ot),xt=pt*wt*Math.sqrt(ft),lt=((v=S.style)===null||v===void 0?void 0:v.fill)||S.color||((x=S.defaultStyle)===null||x===void 0?void 0:x.fill),Vt=T.addShape("circle",{attrs:Object(at.a)(Object(at.a)(Object(at.a)({x:C,y:N,r:xt},S.defaultStyle),S.style),{fill:lt})});return Vt}}),Object(s.registerShape)("polygon","square",{draw:function(S,T){var v,x,C=S.x,N=S.y,X=this.parsePoints(S.points),tt=Math.abs(X[2].x-X[1].x),it=Math.abs(X[1].y-X[0].y),pt=Math.min(tt,it),ft=Number(S.shape[1]),Ot=Number(S.shape[2]),wt=Math.sqrt(Ot),xt=pt*wt*Math.sqrt(ft),lt=((v=S.style)===null||v===void 0?void 0:v.fill)||S.color||((x=S.defaultStyle)===null||x===void 0?void 0:x.fill),Vt=T.addShape("rect",{attrs:Object(at.a)(Object(at.a)(Object(at.a)({x:C-xt/2,y:N-xt/2,width:xt,height:xt},S.defaultStyle),S.style),{fill:lt})});return Vt}});var d=function(M){Object(at.b)(S,M);function S(){var T=M!==null&&M.apply(this,arguments)||this;return T.type="heatmap",T}return S.prototype.getSchemaAdaptor=function(){return n},S.prototype.getDefaultOptions=function(){return Object(A.b)({},M.prototype.getDefaultOptions.call(this),{type:"polygon",legend:!1,xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}})},S}(a.a)},"/+3i":function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return x});var at=z("mrSG"),a=z("YuPD"),A=z("zJSt"),e=z("iTfj"),r=z("w02o"),p=z("n/J0"),m="$$stock-range$$",O="trend",l="up",E="down",j=["#ef5350","#26a69a"],y={showTitle:!1,showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0},itemTpl:'<li class="g2-tooltip-list-item" data-index={index}><span style="background-color:{color};" class="g2-tooltip-marker"></span>{name}{value}</li>'};function n(C,N){return Object(e.map)(C,function(X){if(Object(e.isArray)(N)){var tt=N[0],it=N[1],pt=N[2],ft=N[3];X[O]=X[tt]<=X[it]?l:E,X[m]=[X[tt],X[it],X[pt],X[ft]]}return X})}function s(C){var N=C.chart,X=C.options,tt=X.xField,it=X.yField,pt=X.data;N.data(n(pt,it));var ft=N.schema().position(tt+"*"+m).shape("candle");return ft.color(O,j),C}function d(C){var N,X,tt=C.chart,it=C.options,pt=it.meta,ft=it.xAxis,Ot=it.yAxis,wt=it.xField,xt=(N={},N[wt]={type:"timeCat",tickCount:6},N[O]={values:[l,E]},N),lt=Object(a.b)(xt,pt,(X={},X[wt]=Object(a.k)(ft,p.a),X[m]=Object(a.k)(Ot,p.a),X));return tt.scale(lt),C}function M(C){var N=C.chart,X=C.options,tt=X.xAxis,it=X.yAxis,pt=X.xField;return tt===!1?N.axis(pt,!1):N.axis(pt,tt),it===!1?N.axis(m,!1):N.axis(m,it),C}function S(C){var N=C.chart,X=C.options,tt=X.xField,it=X.yField,pt=X.meta,ft=pt===void 0?{}:pt,Ot=X.tooltip,wt=Ot===void 0?{}:Ot,xt=Object(a.c)(N,"schema"),lt=it[0],Vt=it[1],Lt=it[2],Et=it[3],J=ft[lt]&&ft[lt].alias||lt,ht=ft[Vt]?ft[Vt].alias||lt:Vt,vt=ft[Lt]&&ft[Lt].alias||Lt,bt=ft[Et]&&ft[Et].alias||Et,At={fields:[tt,lt,Vt,Lt,Et],callback:function(_,P,Y,k,h){var g={name:_,value:`
          <br><span data-label="`+J+'" style="padding-left: 16px">'+J+"\uFF1A"+P+`</span>
          <br><span data-label="`+ht+'" style="padding-left: 16px">'+ht+"\uFF1A"+Y+`</span>
          <br><span data-label="`+vt+'" style="padding-left: 16px">'+vt+"\uFF1A"+k+`</span>
          <br><span data-label="`+bt+'" style="padding-left: 16px">'+bt+"\uFF1A"+h+`</span>
        `};return g}},q={crosshairs:{text:function(_,P,Y){var k={position:"end"};if(_==="x"){var h=Y[0];k.content=h?h.data[tt]:P}else k.content=P;return k}}};if(wt){if(Object(e.isObject)(wt)){var ct=Object(a.b)({},q,wt);N.tooltip(ct),xt.tooltip(At)}}else N.tooltip(!1);return C}function T(C){var N=C.chart,X=C.options,tt=X.legend;return tt?N.legend(O,tt):tt===!1&&N.legend(!1),C}function v(C){Object(a.e)(s,d,r.j,M,S,T,r.c,r.a)(C)}var x=function(C){Object(at.b)(N,C);function N(){var X=C!==null&&C.apply(this,arguments)||this;return X.type="stock",X}return N.prototype.getDefaultOptions=function(){return Object(a.b)({},C.prototype.getDefaultOptions.call(this),{tooltip:y,interactions:[{type:"tooltip"}],legend:{position:"top-left"}})},N.prototype.getSchemaAdaptor=function(){return v},N.prototype.changeData=function(X){this.updateOption({data:X});var tt=this.options.yField;this.chart.changeData(n(X,tt))},N}(A.a)},"/3+T":function(zn,Ut,z){"use strict";z.r(Ut),z.d(Ut,"Line",function(){return E}),z.d(Ut,"Circle",function(){return y}),z.d(Ut,"Base",function(){return O}),z.d(Ut,"Html",function(){return C});var at=z("mrSG"),a=z("5UbV"),A=z("iTfj"),e=z("MeYt"),r=z("jqgP"),p=z("L16w"),m=function(N){Object(at.b)(X,N);function X(){return N!==null&&N.apply(this,arguments)||this}return X.prototype.getDefaultCfg=function(){var tt=N.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},tt),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:p.a.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:p.a.textColor,textAlign:"center",textBaseline:"middle",fontFamily:p.a.fontFamily}},textBackground:{padding:5,style:{stroke:p.a.lineColor}}}})},X.prototype.renderInner=function(tt){this.get("line")&&this.renderLine(tt),this.get("text")&&(this.renderText(tt),this.renderBackground(tt))},X.prototype.renderText=function(tt){var it=this.get("text"),pt=it.style,ft=it.autoRotate,Ot=it.content;if(!Object(A.isNil)(Ot)){var wt=this.getTextPoint(),xt=null;if(ft){var lt=this.getRotateAngle();xt=Object(r.e)(wt,lt)}this.addShape(tt,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:Object(at.a)(Object(at.a)(Object(at.a)({},wt),{text:Ot,matrix:xt}),pt)})}},X.prototype.renderLine=function(tt){var it=this.getLinePath(),pt=this.get("line"),ft=pt.style;this.addShape(tt,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:Object(at.a)({path:it},ft)})},X.prototype.renderBackground=function(tt){var it=this.getElementId("text"),pt=tt.findById(it),ft=this.get("textBackground");if(ft&&pt){var Ot=pt.getBBox(),wt=Object(a.c)(ft.padding),xt=ft.style,lt=this.addShape(tt,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:Object(at.a)({x:Ot.x-wt[3],y:Ot.y-wt[0],width:Ot.width+wt[1]+wt[3],height:Ot.height+wt[0]+wt[2],matrix:pt.attr("matrix")},xt)});lt.toBack()}},X}(e.a),O=m,l=function(N){Object(at.b)(X,N);function X(){return N!==null&&N.apply(this,arguments)||this}return X.prototype.getDefaultCfg=function(){var tt=N.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},tt),{type:"line",locationType:"region",start:null,end:null})},X.prototype.getRotateAngle=function(){var tt=this.getLocation(),it=tt.start,pt=tt.end,ft=this.get("text").position,Ot=Math.atan2(pt.y-it.y,pt.x-it.x),wt=ft==="start"?Ot-Math.PI/2:Ot+Math.PI/2;return wt},X.prototype.getTextPoint=function(){var tt=this.getLocation(),it=tt.start,pt=tt.end,ft=this.get("text"),Ot=ft.position,wt=ft.offset;return Object(a.f)(it,pt,Ot,wt)},X.prototype.getLinePath=function(){var tt=this.getLocation(),it=tt.start,pt=tt.end;return[["M",it.x,it.y],["L",pt.x,pt.y]]},X}(O),E=l,j=function(N){Object(at.b)(X,N);function X(){return N!==null&&N.apply(this,arguments)||this}return X.prototype.getDefaultCfg=function(){var tt=N.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},tt),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},X.prototype.getRotateAngle=function(){var tt=this.getLocation(),it=tt.startAngle,pt=tt.endAngle,ft=this.get("text").position,Ot=ft==="start"?it+Math.PI/2:pt-Math.PI/2;return Ot},X.prototype.getTextPoint=function(){var tt=this.get("text"),it=tt.position,pt=tt.offset,ft=this.getLocation(),Ot=ft.center,wt=ft.radius,xt=ft.startAngle,lt=ft.endAngle,Vt=it==="start"?xt:lt,Lt=this.getRotateAngle()-Math.PI,Et=Object(a.e)(Ot,wt,Vt),J=Math.cos(Lt)*pt,ht=Math.sin(Lt)*pt;return{x:Et.x+J,y:Et.y+ht}},X.prototype.getLinePath=function(){var tt=this.getLocation(),it=tt.center,pt=tt.radius,ft=tt.startAngle,Ot=tt.endAngle,wt=null;if(Ot-ft==Math.PI*2){var xt=it.x,lt=it.y;wt=[["M",xt,lt-pt],["A",pt,pt,0,1,1,xt,lt+pt],["A",pt,pt,0,1,1,xt,lt-pt],["Z"]]}else{var Vt=Object(a.e)(it,pt,ft),Lt=Object(a.e)(it,pt,Ot),Et=Math.abs(Ot-ft)>Math.PI?1:0,J=ft>Ot?0:1;wt=[["M",Vt.x,Vt.y],["A",pt,pt,0,Et,J,Lt.x,Lt.y]]}return wt},X}(O),y=j,n=z("fIp6"),s=z("de35"),d="g2-crosshair",M=d+"-line",S=d+"-text",T,v=(T={},T[""+d]={position:"relative"},T[""+M]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},T[""+S]={position:"absolute",color:p.a.textColor,fontFamily:p.a.fontFamily},T),x=function(N){Object(at.b)(X,N);function X(){return N!==null&&N.apply(this,arguments)||this}return X.prototype.getDefaultCfg=function(){var tt=N.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},tt),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+d+'"></div>',crosshairTpl:'<div class="'+M+'"></div>',textTpl:'<span class="'+S+'">{content}</span>',domStyles:null,containerClassName:d,defaultStyles:v,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},X.prototype.render=function(){this.resetText(),this.resetPosition()},X.prototype.initCrossHair=function(){var tt=this.getContainer(),it=this.get("crosshairTpl"),pt=Object(n.b)(it);tt.appendChild(pt),this.applyStyle(M,pt),this.set("crosshairEl",pt)},X.prototype.getTextPoint=function(){var tt=this.getLocation(),it=tt.start,pt=tt.end,ft=this.get("text"),Ot=ft.position,wt=ft.offset;return Object(a.f)(it,pt,Ot,wt)},X.prototype.resetText=function(){var tt=this.get("text"),it=this.get("textEl");if(tt){var pt=tt.content;if(!it){var ft=this.getContainer(),Ot=Object(A.substitute)(this.get("textTpl"),tt);it=Object(n.b)(Ot),ft.appendChild(it),this.applyStyle(S,it),this.set("textEl",it)}it.innerHTML=pt}else it&&it.remove()},X.prototype.isVertical=function(tt,it){return tt.x===it.x},X.prototype.resetPosition=function(){var tt=this.get("crosshairEl");tt||(this.initCrossHair(),tt=this.get("crosshairEl"));var it=this.get("start"),pt=this.get("end"),ft=Math.min(it.x,pt.x),Ot=Math.min(it.y,pt.y);this.isVertical(it,pt)?Object(n.e)(tt,{width:"1px",height:Object(a.l)(Math.abs(pt.y-it.y))}):Object(n.e)(tt,{height:"1px",width:Object(a.l)(Math.abs(pt.x-it.x))}),Object(n.e)(tt,{top:Object(a.l)(Ot),left:Object(a.l)(ft)}),this.alignText()},X.prototype.alignText=function(){var tt=this.get("textEl");if(tt){var it=this.get("text").align,pt=tt.clientWidth,ft=this.getTextPoint();switch(it){case"center":ft.x=ft.x-pt/2;break;case"right":ft.x=ft.x-pt;case"left":break}Object(n.e)(tt,{top:Object(a.l)(ft.y),left:Object(a.l)(ft.x)})}},X.prototype.updateInner=function(tt){Object(A.hasKey)(tt,"text")&&this.resetText(),N.prototype.updateInner.call(this,tt)},X}(s.a),C=x},"027J":function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return n});var at=z("mrSG"),a=z("zJSt"),A=z("lFe4"),e=z("w02o"),r=z("YuPD"),p=z("tKoa"),m=z("7cv3"),O=z("DyAw");function l(s){var d,M,S=s.chart,T=s.options,v=T.data,x=T.xAxis,C=T.yAxis,N=T.color,X=T.columnStyle,tt=T.columnWidthRatio,it=Object(A.a)(v);S.data(it);var pt=Object(r.b)({},s,{options:{xField:m.b,yField:m.c,widthRatio:tt,interval:{style:X,color:N}}});return Object(p.c)(pt),S.axis(!1),S.legend(!1),S.interaction("element-active"),Object(e.f)((d={},d[m.b]=x,d[m.c]=C,d),(M={},M[m.b]={type:"cat"},M[m.c]=Object(O.a)(it,m.c),M))(s),s}function E(s){return Object(r.e)(l,e.k,e.j,e.a,Object(e.b)())(s)}var j=z("iTfj"),y={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(d,M){return""+Object(j.get)(M,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}},n=function(s){Object(at.b)(d,s);function d(){var M=s!==null&&s.apply(this,arguments)||this;return M.type="tiny-column",M}return d.prototype.changeData=function(M){this.updateOption({data:M}),this.chart.changeData(Object(A.a)(M))},d.prototype.getDefaultOptions=function(){return{appendPadding:2,tooltip:Object(at.a)({},y),animation:!0}},d.prototype.getSchemaAdaptor=function(){return E},d}(a.a)},"05BJ":function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return j});var at=z("mrSG"),a=z("zJSt"),A=z("7cv3"),e=z("lFe4"),r=z("w02o"),p=z("YuPD"),m=z("tKoa"),O=z("DyAw");function l(y){var n,s,d=y.chart,M=y.options,S=M.data,T=M.xAxis,v=M.yAxis,x=M.color,C=M.areaStyle,N=M.point,X=M.line,tt=Object(e.a)(S);d.data(tt);var it=Object(p.b)({},y,{options:{xField:A.b,yField:A.c,area:{color:x,style:C},line:X,point:N}}),pt=Object(p.b)({},it,{options:{tooltip:!1}});return Object(m.a)(it),Object(m.d)(pt),Object(m.e)(pt),d.axis(!1),d.legend(!1),Object(r.f)((n={},n[A.b]=T,n[A.c]=v,n),(s={},s[A.b]={type:"cat"},s[A.c]=Object(O.a)(tt,A.c),s))(y),y}function E(y){return Object(p.e)(l,r.k,r.j,r.a,Object(r.b)())(y)}var j=function(y){Object(at.b)(n,y);function n(){var s=y!==null&&y.apply(this,arguments)||this;return s.type="tiny-area",s}return n.prototype.changeData=function(s){this.updateOption({data:s}),this.chart.changeData(Object(e.a)(s))},n.prototype.getDefaultOptions=function(){return{appendPadding:2,tooltip:Object(at.a)({},A.a),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:!0}},n.prototype.getSchemaAdaptor=function(){return E},n}(a.a)},"06Lf":function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return Y}),z.d(Ut,"b",function(){return St}),z.d(Ut,"c",function(){return ye});var at=z("q1tI"),a=z.n(at),A=z("ma/q"),e=z("iTfj"),r=function(Yt,Se){var Wt={}.toString;return Wt.call(Yt)==="[object "+Se+"]"},p=function(Yt){if(!Yt)return Yt;var Se={};for(var Wt in Yt)Se[Wt]=Yt[Wt];return Se},m=function(Yt,Se){for(var Wt=Yt,ue=0;ue<Se.length;ue++)if(Wt==null?void 0:Wt[Se[ue]])Wt=Wt[Se[ue]];else{Wt=void 0;break}return Wt},O=function(Yt,Se,Wt){if(!Yt)return Yt;var ue=Yt;return Se.forEach(function(vn,kn){kn<Se.length-1?ue=ue[vn]:ue[vn]=Wt}),Yt},l=function(Yt,Se){!Yt||(Object(e.isFunction)(Yt)?Yt(Se):Yt.current=Se)},E={isType:r,clone:p,hasPath:m,setPath:O},j=z("i8i4"),y=z.n(j),n=function(Yt,Se){var Wt=document.createElement("div");return Se==="tooltip"&&(Wt.className="g2-tooltip"),y.a.render(Yt,Wt),Wt},s=n,d=function(){return d=Object.assign||function(_t){for(var Yt,Se=1,Wt=arguments.length;Se<Wt;Se++){Yt=arguments[Se];for(var ue in Yt)Object.prototype.hasOwnProperty.call(Yt,ue)&&(_t[ue]=Yt[ue])}return _t},d.apply(this,arguments)},M=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se};function S(_t,Yt){var Se=Object(at.useRef)(),Wt=Object(at.useRef)(),ue=Object(at.useRef)(null),vn=Yt.onReady,kn=Yt.onEvent,_n=function(mt,$t){var me;return mt===void 0&&(mt="image/png"),(me=Se.current)===null||me===void 0?void 0:me.chart.canvas.cfg.el.toDataURL(mt,$t)},Un=function(mt,$t,me){var Zt;mt===void 0&&(mt="download"),$t===void 0&&($t="image/png");var ve=mt;mt.indexOf(".")===-1&&(ve=mt+"."+$t.split("/")[1]);var he=(Zt=Se.current)===null||Zt===void 0?void 0:Zt.chart.canvas.cfg.el.toDataURL($t,me),ce=document.createElement("a");return ce.href=he,ce.download=ve,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce),ce=null,ve},Ze=function(mt,$t,me){var Zt=E.hasPath,ve=E.setPath,he=Zt(mt,$t);ve(mt,$t,function(){for(var ce=[],Me=0;Me<arguments.length;Me++)ce[Me]=arguments[Me];var _e=E.isType(he,"Function")?he.apply(void 0,ce):he;return E.isType(_e,"String")||E.isType(_e,"Number")||E.isType(_e,"HTMLDivElement")?_e:s(_e,me)})},Te=function(){var mt=E.hasPath;mt(Yt,["statistic","content","customHtml"])&&Ze(Yt,["statistic","content","customHtml"]),mt(Yt,["statistic","title","customHtml"])&&Ze(Yt,["statistic","title","customHtml"]),typeof Yt.tooltip=="object"&&(mt(Yt,["tooltip","container"])&&Ze(Yt,["tooltip","container"],"tooltip"),mt(Yt,["tooltip","customContent"])&&Ze(Yt,["tooltip","customContent"],"tooltip"))};return Object(at.useEffect)(function(){if(Se.current&&!Object(e.isEqual)(Wt.current,Yt)){var R=!1;if(Wt.current){var mt=Wt.current,$t=mt.data,me=mt.value,Zt=mt.percent,ve=M(mt,["data","value","percent"]),he=Yt.data,ce=Yt.value,Me=Yt.percent,_e=M(Yt,["data","value","percent"]);R=Object(e.isEqual)(ve,_e)}if(R){var We="data",Re=["percent"],tn=Object.keys(Yt);Re.forEach(function(ke){tn.includes(ke)&&(We=ke)}),Se.current.changeData((Yt==null?void 0:Yt[We])||[])}else Te(),Se.current.update(Yt);Wt.current=Yt}},[Yt]),Object(at.useEffect)(function(){if(!ue.current)return function(){return null};Te();var R=new _t(ue.current,d({},Yt));R.__proto__.toDataURL=function($t,me){return _n($t,me)},R.__proto__.downloadImage=function($t,me,Zt){return Un($t,me,Zt)},R.render(),Wt.current||(Wt.current=Yt),Se.current=E.clone(R),vn&&vn(R);var mt=function(me){kn&&kn(R,me)};return R.on("*",mt),function(){Se.current&&(Se.current.destroy(),Se.current.off("*",mt),Se.current=void 0)}},[]),{chart:Se,container:ue}}var T=function(){var _t=function(Se,Wt){return _t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ue,vn){ue.__proto__=vn}||function(ue,vn){for(var kn in vn)Object.prototype.hasOwnProperty.call(vn,kn)&&(ue[kn]=vn[kn])},_t(Se,Wt)};return function(Yt,Se){_t(Yt,Se);function Wt(){this.constructor=Yt}Yt.prototype=Se===null?Object.create(Se):(Wt.prototype=Se.prototype,new Wt)}}(),v=function(_t){T(Yt,_t);function Yt(){var Se=_t!==null&&_t.apply(this,arguments)||this;return Se.state={hasError:!1},Se.renderError=function(Wt){var ue=Se.props.errorTemplate;switch(Wt){default:return ue&&typeof ue=="function"?ue(Wt):a.a.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",Wt.message)}},Se}return Yt.getDerivedStateFromError=function(Se){return{hasError:!0,error:Se}},Yt.getDerivedStateFromProps=function(Se,Wt){return Wt.children!==Se.children?{children:Se.children,hasError:!1,error:void 0}:null},Yt.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):a.a.createElement(at.Fragment,null,this.props.children)},Yt}(a.a.Component),x=v;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var C=function(){return C=Object.assign||function(Se){for(var Wt,ue=1,vn=arguments.length;ue<vn;ue++){Wt=arguments[ue];for(var kn in Wt)Object.prototype.hasOwnProperty.call(Wt,kn)&&(Se[kn]=Wt[kn])}return Se},C.apply(this,arguments)};function N(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se}var X=function(){return Math.random().toString(36).substring(6)},tt=function(Yt){var Se=Yt.animate,Wt=Yt.backgroundColor,ue=Yt.backgroundOpacity,vn=Yt.baseUrl,kn=Yt.children,_n=Yt.foregroundColor,Un=Yt.foregroundOpacity,Ze=Yt.gradientRatio,Te=Yt.uniqueKey,R=Yt.interval,mt=Yt.rtl,$t=Yt.speed,me=Yt.style,Zt=Yt.title,ve=N(Yt,["animate","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","interval","rtl","speed","style","title"]),he=Te||X(),ce=he+"-diff",Me=he+"-animated-diff",_e=he+"-aria",We=mt?{transform:"scaleX(-1)"}:null,Re="0; "+R+"; 1",tn=$t+"s";return Object(at.createElement)("svg",C({"aria-labelledby":_e,role:"img",style:C(C({},me),We)},ve),Zt?Object(at.createElement)("title",{id:_e},Zt):null,Object(at.createElement)("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+vn+"#"+ce+")",style:{fill:"url("+vn+"#"+Me+")"}}),Object(at.createElement)("defs",{role:"presentation"},Object(at.createElement)("clipPath",{id:ce},kn),Object(at.createElement)("linearGradient",{id:Me},Object(at.createElement)("stop",{offset:"0%",stopColor:Wt,stopOpacity:ue},Se&&Object(at.createElement)("animate",{attributeName:"offset",values:-Ze+"; "+-Ze+"; 1",keyTimes:Re,dur:tn,repeatCount:"indefinite"})),Object(at.createElement)("stop",{offset:"50%",stopColor:_n,stopOpacity:Un},Se&&Object(at.createElement)("animate",{attributeName:"offset",values:-Ze/2+"; "+-Ze/2+"; "+(1+Ze/2),keyTimes:Re,dur:tn,repeatCount:"indefinite"})),Object(at.createElement)("stop",{offset:"100%",stopColor:Wt,stopOpacity:ue},Se&&Object(at.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+Ze),keyTimes:Re,dur:tn,repeatCount:"indefinite"})))))};tt.defaultProps={animate:!0,backgroundColor:"#f5f6f7",backgroundOpacity:1,baseUrl:"",foregroundColor:"#eee",foregroundOpacity:1,gradientRatio:2,id:null,interval:.25,rtl:!1,speed:1.2,style:{},title:"Loading..."};var it=function(Yt){return Yt.children?Object(at.createElement)(tt,C({},Yt)):Object(at.createElement)(pt,C({},Yt))},pt=function(Yt){return Object(at.createElement)(it,C({viewBox:"0 0 476 124"},Yt),Object(at.createElement)("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),Object(at.createElement)("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),Object(at.createElement)("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),Object(at.createElement)("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),Object(at.createElement)("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),Object(at.createElement)("circle",{cx:"20",cy:"20",r:"20"}))},ft=function(Yt){return Object(at.createElement)(it,C({viewBox:"0 0 400 460"},Yt),Object(at.createElement)("circle",{cx:"31",cy:"31",r:"15"}),Object(at.createElement)("rect",{x:"58",y:"18",rx:"2",ry:"2",width:"140",height:"10"}),Object(at.createElement)("rect",{x:"58",y:"34",rx:"2",ry:"2",width:"140",height:"10"}),Object(at.createElement)("rect",{x:"0",y:"60",rx:"2",ry:"2",width:"400",height:"400"}))},Ot=function(Yt){return Object(at.createElement)(it,C({viewBox:"0 0 340 84"},Yt),Object(at.createElement)("rect",{x:"0",y:"0",width:"67",height:"11",rx:"3"}),Object(at.createElement)("rect",{x:"76",y:"0",width:"140",height:"11",rx:"3"}),Object(at.createElement)("rect",{x:"127",y:"48",width:"53",height:"11",rx:"3"}),Object(at.createElement)("rect",{x:"187",y:"48",width:"72",height:"11",rx:"3"}),Object(at.createElement)("rect",{x:"18",y:"48",width:"100",height:"11",rx:"3"}),Object(at.createElement)("rect",{x:"0",y:"71",width:"37",height:"11",rx:"3"}),Object(at.createElement)("rect",{x:"18",y:"23",width:"140",height:"11",rx:"3"}),Object(at.createElement)("rect",{x:"166",y:"23",width:"173",height:"11",rx:"3"}))},wt=function(Yt){return Object(at.createElement)(it,C({viewBox:"0 0 400 110"},Yt),Object(at.createElement)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"250",height:"10"}),Object(at.createElement)("rect",{x:"20",y:"20",rx:"3",ry:"3",width:"220",height:"10"}),Object(at.createElement)("rect",{x:"20",y:"40",rx:"3",ry:"3",width:"170",height:"10"}),Object(at.createElement)("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"250",height:"10"}),Object(at.createElement)("rect",{x:"20",y:"80",rx:"3",ry:"3",width:"200",height:"10"}),Object(at.createElement)("rect",{x:"20",y:"100",rx:"3",ry:"3",width:"80",height:"10"}))},xt=function(Yt){return Object(at.createElement)(it,C({viewBox:"0 0 245 125"},Yt),Object(at.createElement)("circle",{cx:"10",cy:"20",r:"8"}),Object(at.createElement)("rect",{x:"25",y:"15",rx:"5",ry:"5",width:"220",height:"10"}),Object(at.createElement)("circle",{cx:"10",cy:"50",r:"8"}),Object(at.createElement)("rect",{x:"25",y:"45",rx:"5",ry:"5",width:"220",height:"10"}),Object(at.createElement)("circle",{cx:"10",cy:"80",r:"8"}),Object(at.createElement)("rect",{x:"25",y:"75",rx:"5",ry:"5",width:"220",height:"10"}),Object(at.createElement)("circle",{cx:"10",cy:"110",r:"8"}),Object(at.createElement)("rect",{x:"25",y:"105",rx:"5",ry:"5",width:"220",height:"10"}))},lt=it,Vt=function(Yt){var Se=Yt.loadingTemplate,Wt=function(){return Se||a.a.createElement(lt,{viewBox:"0 0 400 180",width:200,height:90,speed:1},a.a.createElement("rect",{x:"20",y:"5",rx:"0",ry:"0",width:"1",height:"170"}),a.a.createElement("rect",{x:"20",y:"175",rx:"0",ry:"0",width:"360",height:"1"}),a.a.createElement("rect",{x:"40",y:"75",rx:"0",ry:"0",width:"35",height:"100"}),a.a.createElement("rect",{x:"80",y:"125",rx:"0",ry:"0",width:"35",height:"50"}),a.a.createElement("rect",{x:"120",y:"105",rx:"0",ry:"0",width:"35",height:"70"}),a.a.createElement("rect",{x:"160",y:"35",rx:"0",ry:"0",width:"35",height:"140"}),a.a.createElement("rect",{x:"200",y:"55",rx:"0",ry:"0",width:"35",height:"120"}),a.a.createElement("rect",{x:"240",y:"15",rx:"0",ry:"0",width:"35",height:"160"}),a.a.createElement("rect",{x:"280",y:"135",rx:"0",ry:"0",width:"35",height:"40"}),a.a.createElement("rect",{x:"320",y:"85",rx:"0",ry:"0",width:"35",height:"90"}))};return a.a.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:"#fff"}},Wt())},Lt=Vt,Et=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},J=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=Et(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.Area,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),ht=J,vt=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},bt=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=vt(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.Bar,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),At=bt,q=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},ct=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=q(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.Bullet,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),ot=ct,_=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},P=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=_(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.Column,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Y=P,k=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},h=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=k(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.Funnel,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),g=h,F=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},V=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=F(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.Histogram,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),H=V,et=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},nt=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=et(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.Line,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),St=nt,dt=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},gt=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=dt(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.Box,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),yt=gt,Ct=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},Pt=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=Ct(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.Liquid,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Ft=Pt,Tt=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},zt=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=Tt(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.Heatmap,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Xt=zt,re=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},de=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=re(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.Pie,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),ye=de,we=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},De=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=we(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.Gauge,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Ve=De,pn=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},sn=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=pn(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.Progress,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),In=sn,An=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},Rn=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=An(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.Radar,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Mn=Rn,Cn=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},Gn=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=Cn(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.RingProgress,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Xn=Gn,tr=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},or=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=tr(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.Rose,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),nr=or,er=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},Sr=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=er(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.Scatter,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Vr=Sr,ti=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},hi=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=ti(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.TinyArea,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Fi=hi,to=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},si=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=to(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.TinyColumn,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Ti=si,Ui=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},Li=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=Ui(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.DualAxes,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Vi=Li,ro=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},jr=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=ro(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.TinyLine,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Ji=jr,pr=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},Xr=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=pr(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.Waterfall,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Br=Xr,Nr=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},Yr=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=Nr(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.WordCloud,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Kr=Yr,ni=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},fi=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=ni(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.Sunburst,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),$r=fi,ci=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},Qr=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=ci(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.Stock,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),gi=Qr,Oi=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},bi=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=Oi(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.RadialBar,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),_i=bi,Qi=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},io=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=Qi(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.Sankey,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Wi=io,Zi=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},Pi=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=Zi(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.Treemap,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),no=Pi,Mo=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},ao=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=Mo(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.MultiView,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),uo=ao,xo=function(_t,Yt){var Se={};for(var Wt in _t)Object.prototype.hasOwnProperty.call(_t,Wt)&&Yt.indexOf(Wt)<0&&(Se[Wt]=_t[Wt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ue=0,Wt=Object.getOwnPropertySymbols(_t);ue<Wt.length;ue++)Yt.indexOf(Wt[ue])<0&&Object.prototype.propertyIsEnumerable.call(_t,Wt[ue])&&(Se[Wt[ue]]=_t[Wt[ue]]);return Se},oe=Object(at.forwardRef)(function(_t,Yt){var Se=_t.chartRef,Wt=_t.style,ue=Wt===void 0?{height:"100%"}:Wt,vn=_t.className,kn=_t.loading,_n=_t.loadingTemplate,Un=_t.errorTemplate,Ze=xo(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),Te=S(A.BidirectionalBar,Ze),R=Te.chart,mt=Te.container;return Object(at.useEffect)(function(){l(Se,R.current)},[R.current]),Object(at.useImperativeHandle)(Yt,function(){return{getChart:function(){return R.current}}}),a.a.createElement(x,{errorTemplate:Un},kn&&a.a.createElement(Lt,{loadingTemplate:_n}),a.a.createElement("div",{className:vn,style:ue,ref:mt}))}),Kt=oe,te=z("fD4D"),Oe=function(){return Oe=Object.assign||function(_t){for(var Yt,Se=1,Wt=arguments.length;Se<Wt;Se++){Yt=arguments[Se];for(var ue in Yt)Object.prototype.hasOwnProperty.call(Yt,ue)&&(_t[ue]=Yt[ue])}return _t},Oe.apply(this,arguments)};te.default.registerNode("card-node",{draw:function(Yt,Se){var Wt=Yt&&Yt.color?Yt.color:"#5B8FF9",ue=Yt&&Yt.size?Yt.size:[100,30];typeof ue=="number"&&(ue=[ue,ue]);var vn=Yt&&Yt.style?Yt.style:{};vn=Object.assign({radius:2,fill:"#fff"},vn),Wt=vn.stroke||"#5B8FF9";var kn=vn.radius||0,_n=Se.addShape("rect",{attrs:Oe({x:-ue[0]/2,y:-ue[1]/2,width:ue[0],height:ue[1],stroke:Wt},vn),name:"main-box",draggable:!0}),Un=(Yt==null?void 0:Yt.title)||(Yt==null?void 0:Yt.label),Ze,Te=Yt&&Yt.labelCfg&&Yt.labelCfg.style?Yt.labelCfg.style:{};if(Un){var R=Object.assign({fill:"#fff"},Te);Ze=Se.addShape("text",{attrs:Oe(Oe({textBaseline:"top",x:-ue[0]/2+8,y:-ue[1]/2+2,text:Un},R),{fill:"#fff"}),name:"title"})}var mt=Ze?Ze.getBBox():{height:ue[1]/2},$t=Se.addShape("rect",{attrs:{x:-ue[0]/2,y:-ue[1]/2,width:ue[0],height:mt.height+4,fill:Wt,radius:[kn,kn,0,0]},name:"title-rect",draggable:!0});Ze&&Ze.toFront();var me;(Yt==null?void 0:Yt.children)&&(me=Se.addShape("marker",{attrs:{x:ue[0]/2,y:0,r:6,cursor:"pointer",symbol:Yt.collapsed?te.default.Marker.expand:te.default.Marker.collapse,stroke:Wt,lineWidth:1,fill:"#fff"},name:"collapse-icon"}));var Zt=Yt&&Yt.description?Yt.description:void 0,ve=$t.getBBox(),he;if(Zt&&(he=Se.addShape("text",{attrs:Oe({textBaseline:"top",x:-ue[0]/2+8,y:-ue[1]/2+ve.height+8,text:Zt},Te),name:"description"})),he){var ce=he.getBBox(),Me=ve.height+16+ce.height,_e=ue[0]>ce.width+16?ue[0]:ce.width+16;_n.attr({width:_e,height:Me}),$t==null||$t.attr("width",_e),me==null||me.attr({x:_e-ue[0]/2,y:Me/2-ue[1]/2})}return _n},update:void 0},"single-node"),te.default.registerNode("round-rect",{drawShape:function(Yt,Se){var Wt=Yt&&Yt.color?Yt.color:"#5B8FF9",ue=Yt&&Yt.size?Yt.size:[100,30];typeof ue=="number"&&(ue=[ue,ue]);var vn=Yt&&Yt.style?Yt.style:{};vn.stroke&&(Wt=vn.stroke);var kn=vn&&vn.fill?vn.fill:"#fff";vn=Object.assign({width:ue[0],height:ue[1],radius:ue[1]/2,fill:kn,lineWidth:1.2,stroke:Wt},vn);var _n=Se.addShape("rect",{attrs:Oe({x:-ue[0]/2,y:-ue[1]/2},vn),name:"rect-shape"});return Se.addShape("circle",{attrs:{x:-ue[0]/2,y:0,r:3,fill:vn.stroke},name:"circle-shape"}),Se.addShape("circle",{attrs:{x:ue[0]/2,y:0,r:3,fill:vn.stroke},name:"circle-shape2"}),_n},getAnchorPoints:function(){return[[0,.5],[1,.5]]},update:function(Yt,Se){var Wt=Se.getContainer(),ue=Wt.get("children"),vn=ue[0],kn=ue[1],_n=ue[2],Un=Yt.style&&Yt.style.stroke?Yt.style.stroke:"#5B8FF9";Un&&(vn.attr("stroke",Un),kn.attr("fill",Un),_n.attr("fill",Un))}},"single-node");var Qe=function(Yt){te.default.registerNode("icon-node",{options:{size:[60,20],stroke:"#91d5ff",fill:"#91d5ff"},draw:function(Wt,ue){var vn=this.getShapeStyle(Wt),kn=(Wt||{}).labelCfg,_n=kn===void 0?{}:kn,Un=ue.addShape("rect",{attrs:Oe(Oe({},vn),{x:0,y:0})}),Ze={fill:"#e6fffb"},Te="https://g.alicdn.com/cm-design/arms-trace/1.0.155/styles/armsTrace/images/TAIR.png";return(Wt==null?void 0:Wt.leftIcon)&&(Ze=Object.assign({},Ze,Wt.leftIcon.style),Te=Wt.leftIcon.img),ue.addShape("rect",{attrs:Oe({x:1,y:1,width:38,height:vn.height-2},Ze)}),ue.addShape("image",{attrs:{x:8,y:8,width:24,height:24,img:Te},name:"image-shape"}),Yt.enableEdit&&(ue.addShape("marker",{attrs:{x:vn.width/3,y:vn.height+6,r:6,stroke:"#73d13d",cursor:"pointer",symbol:te.default.Marker.expand},name:"add-item"}),ue.addShape("marker",{attrs:{x:vn.width*2/3,y:vn.height+6,r:6,stroke:"#ff4d4f",cursor:"pointer",symbol:te.default.Marker.collapse},name:"remove-item"})),(Wt==null?void 0:Wt.label)&&ue.addShape("text",{attrs:Oe(Oe({},_n.style),{text:Wt.label,x:vn.width/2,y:vn.height/1.5})}),Un}},"rect")};te.default.registerEdge("fund-polyline",{draw:function(Yt,Se){var Wt=Yt==null?void 0:Yt.startPoint,ue=Yt==null?void 0:Yt.endPoint,vn=ue.y-Wt.y,kn=vn!==0?500/Math.abs(vn):0,_n=16,Un=vn<0?_n:-_n,Ze={x:Wt.x+kn,y:ue.y+Un},Te={x:Ze.x+_n,y:ue.y},R={x:(Ze.x-Wt.x)*(ue.y-Wt.y)/(Ze.y-Wt.y)+Wt.x,y:ue.y},mt=[["M",Wt.x,Wt.y],["L",Ze.x,Ze.y],["Q",R.x,R.y,Te.x,Te.y],["L",ue.x,ue.y]];vn===0&&(mt=[["M",Wt.x,Wt.y],["L",ue.x,ue.y]]);var $t=(Yt||{}).style,me=Se.addShape("path",{attrs:{path:mt,stroke:$t.stroke||(Yt==null?void 0:Yt.colorMap)&&Yt.colorMap[Yt.dataType]?(Yt==null?void 0:Yt.colorMap)[Yt==null?void 0:Yt.dataType]:"#5B8FF9",lineWidth:$t.lineWidth||1.2,endArrow:!1},name:"path-shape"}),Zt=0,ve=8,he;if((Yt==null?void 0:Yt.label)&&(he=Se.addShape("text",{attrs:{text:Yt.label,x:Te.x+Zt,y:ue.y-ve-2,fontSize:14,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-label"})),Yt==null?void 0:Yt.dataType){var ce=he?he.getBBox():{height:0};Se.addShape("text",{attrs:{text:Yt.dataType,x:Te.x+Zt,y:ue.y-ve-ce.height-2,fontSize:10,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-type"})}return(Yt==null?void 0:Yt.subLabel)&&Se.addShape("text",{attrs:{text:Yt.subLabel,x:Te.x+Zt,y:ue.y+ve+4,fontSize:12,fontWeight:300,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-sub-label"}),me},update:void 0},"single-edge"),te.default.registerEdge("flow-line",{draw:function(Yt,Se){var Wt=Yt==null?void 0:Yt.startPoint,ue=Yt==null?void 0:Yt.endPoint,vn=(Yt||{}).style,kn=vn===void 0?{}:vn,_n=Se.addShape("path",{attrs:{stroke:kn.stroke,endArrow:kn.endArrow,path:[["M",Wt.x,Wt.y],["L",Wt.x,(Wt.y+ue.y)/2],["L",ue.x,(Wt.y+ue.y)/2],["L",ue.x,ue.y]]}});return _n}});var On=function(){return On=Object.assign||function(_t){for(var Yt,Se=1,Wt=arguments.length;Se<Wt;Se++){Yt=arguments[Se];for(var ue in Yt)Object.prototype.hasOwnProperty.call(Yt,ue)&&(_t[ue]=Yt[ue])}return _t},On.apply(this,arguments)},Vn={show:!1,size:[150,100],type:"keyShape"},Hn=function(Yt,Se,Wt){var ue,vn;return Wt&&Wt.current&&(ue=Wt.current.offsetWidth,vn=Wt.current.offsetHeight||500),!Yt&&!ue||!Se&&!vn?(console.warn("\u8BF7\u4E3A Graph \u6307\u5B9A width \u4E0E height\uFF01\u5426\u5219\u5C06\u4F7F\u7528\u9ED8\u8BA4\u503C 500 * 500"),[500,500]):[Yt||ue||500,Se||vn||500]},$e=function(Yt,Se){if(!(!Se||Se.destroyed)&&Yt&&Yt.show){var Wt=Object.assign(Vn,Yt),ue=new te.default.Minimap(On({},Wt));return Se.addPlugin(ue),ue}};function rn(_t,Yt,Se){var Wt=Object(at.useRef)(),ue=Yt.data,vn=Yt.nodeStyle,kn=Yt.nodeAnchorPoints,_n=Yt.nodeType,Un=Yt.edgeType,Ze=Yt.edgeStyle,Te=Yt.width,R=Yt.height,mt=Yt.layout,$t=Yt.minimapCfg,me=Yt.behaviors,Zt=Yt.nodeLabelCfg,ve=Yt.edgeLabelCfg,he;return Object(at.useEffect)(function(){_t&&!_t.destroyed&&(_t.changeData(ue),_t.layout())},[ue]),Object(at.useEffect)(function(){_t&&!_t.destroyed&&_t.getNodes().forEach(function(ce){_t.updateItem(ce,{type:_n,style:vn,anchorPoints:kn,labelCfg:Zt})})},[vn,kn,_n]),Object(at.useEffect)(function(){_t&&!_t.destroyed&&_t.getEdges().forEach(function(ce){_t.updateItem(ce,{type:Un,style:Ze,labelCfg:ve})})},[Ze,Un]),Object(at.useEffect)(function(){if(_t&&!_t.destroyed){var ce=Hn(Te,R,Se);_t.changeSize(ce[0],ce[1])}},[Se,Te,R]),Object(at.useEffect)(function(){_t&&!_t.destroyed&&_t.updateLayout(mt)},[mt]),Object(at.useEffect)(function(){if(!(!$t||!_t||_t.destroyed))if($t.show)he=$e($t,_t),he&&he.updateCanvas();else{var ce=_t.get("plugins")[0];ce&&_t.removePlugin(ce)}},[$t]),Object(at.useEffect)(function(){if(_t&&!_t.destroyed){var ce=_t.get("modes").default,Me=[];ce.forEach(function(_e){Object(e.isObject)(_e)?Me.push(_e.type):Object(e.isString)(_e)&&Me.push(_e)}),_t.removeBehaviors(Me,"default"),_t.addBehaviors(me,"default")}},[me]),Object(at.useEffect)(function(){if(Wt.current=_t,_t&&!_t.destroyed)return function(){_t.destroy(),_t=void 0}},[]),{graphHook:Wt}}var on={hover:{stroke:"#1890ff",lineWidth:2}},$n={fill:"#91d5ff",stroke:"#40a9ff",radius:5},vr={stroke:"#91d5ff",endArrow:{path:"M 0,0 L 12, 6 L 9,0 L 12, -6 Z",fill:"#91d5ff",d:-20}},ar={type:"compactBox",direction:"TB",getId:function(Yt){return Yt.id},getHeight:function(){return 16},getWidth:function(){return 16},getVGap:function(){return 40},getHGap:function(){return 70}},rr={style:{fill:"#000",fontSize:12}},Fr=function(Yt){var Se=Yt.data,Wt=Yt.className,ue=Yt.style,vn=Yt.width,kn=Yt.height,_n=Yt.nodeType,Un=_n===void 0?"rect":_n,Ze=Yt.edgeType,Te=Ze===void 0?"flow-line":Ze,R=Yt.collapseExpand,mt=R===void 0?!1:R,$t=Yt.nodeSize,me=$t===void 0?[120,40]:$t,Zt=Yt.nodeLabelCfg,ve=Zt===void 0?rr:Zt,he=Yt.edgeLabelCfg,ce=he===void 0?rr:he,Me=Yt.layout,_e=Me===void 0?ar:Me,We=Yt.enableEdit,Re=We===void 0?!1:We,tn=Yt.minimapCfg,ke=Yt.nodeStyle,ln=ke===void 0?$n:ke,hn=Yt.edgeStyle,nn=hn===void 0?vr:hn,dn=Yt.nodeStateStyles,Sn=dn===void 0?on:dn,Pe=Yt.edgeStateStyles,le=Pe===void 0?on:Pe,Le=Yt.handleNodeClick,Be=Yt.handleEdgeClick,en=Yt.handleNodeHover,un=Yt.handleNodeUnHover,ze=Yt.handleEdgeHover,fn=Yt.handleEdgeUnHover,mn=Yt.handleCanvasClick,Wn=Yt.graphRef,Tn,Pn={data:Se,className:Wt,style:ue,width:vn,height:kn,nodeType:Un,edgeType:Te,collapseExpand:mt,nodeSize:me,nodeLabelCfg:ve,edgeLabelCfg:ce,layout:_e,enableEdit:Re,minimapCfg:tn,nodeStyle:ln,edgeStyle:nn,nodeStateStyles:Sn,edgeStateStyles:le,handleNodeClick:Le,handleEdgeClick:Be,handleNodeHover:en,handleNodeUnHover:un,handleEdgeHover:ze,handleEdgeUnHover:fn,handleCanvasClick:mn,graphRef:Wn},lr=a.a.useRef(null);return rn(Tn,Pn,lr),Object(at.useEffect)(function(){var Hr=Hn(vn,kn,lr);return(!Tn||Tn.destroyed)&&(Un==="icon-node"&&Qe({enableEdit:Re}),Tn=new te.default.TreeGraph({container:lr.current,width:Hr[0],height:Hr[1],linkCenter:!0,modes:{default:["drag-canvas","zoom-canvas"]},defaultNode:{type:Un,size:me,style:ln,labelCfg:ve},defaultEdge:{type:Te,style:nn,labelCfg:ce},nodeStateStyles:Sn,edgeStateStyles:le,layout:_e}),Wn&&(Wn.current=Tn)),$e(tn,Tn),Tn.data(Se),Tn.render(),Tn.fitView(),mt&&Tn.addBehaviors({type:"collapse-expand"},"default"),Tn.on("node:mouseenter",function(Gr){var Mr=Gr.item;Tn.setItemState(Mr,"hover",!0),en&&en(Mr,Tn)}),Tn.on("node:mouseleave",function(Gr){var Mr=Gr.item;Tn.setItemState(Mr,"hover",!1),un&&un(Mr,Tn)}),Tn.on("node:click",function(Gr){var Mr=Gr.item,oi=Gr.target,ai=oi.get("type"),Zr=oi.get("name");if(ai==="marker"){var Yi=Mr.getModel();if(Zr==="add-item"){Yi.children||(Yi.children=[]);var $i=Math.random().toString(36).slice(-8);Yi.children.push({id:$i,label:$i}),Tn.updateChild(Yi,Yi.id)}else Zr==="remove-item"&&Tn.removeChild(Yi.id)}Le&&Le(Mr,Tn)}),Tn.on("edge:mouseenter",function(Gr){var Mr=Gr.item;Tn.setItemState(Mr,"hover",!0),ze&&ze(Mr,Tn)}),Tn.on("edge:mouseleave",function(Gr){var Mr=Gr.item;Tn.setItemState(Mr,"hover",!1),fn&&fn(Mr,Tn)}),Tn.on("edge:click",function(Gr){var Mr=Gr.item;Be&&Be(Mr,Tn)}),Tn.on("canvas:click",function(Gr){mn&&mn(Tn)}),function(){return Tn.destroy()}},[]),a.a.createElement(x,null,a.a.createElement("div",{className:Wt,style:ue,ref:lr}))},Ar=Fr,wr={hover:{stroke:"#1890ff",lineWidth:2}},xr=[120,40],Er={stroke:"#40a9ff"},Ir=[[.5,0],[.5,1]],Lr={stroke:"#91d5ff",endArrow:{path:te.default.Arrow.vee(10,10),fill:"#91d5ff"}},Pr={type:"dagre",rankdir:"TB",nodesepFunc:function(Yt){return 0},ranksepFunc:function(Yt){return 0},controlPoints:!0},Dr={style:{fill:"#000",fontSize:12}},ri=function(Yt){var Se=Yt.data,Wt=Yt.className,ue=Yt.style,vn=Yt.width,kn=Yt.height,_n=Yt.nodeType,Un=_n===void 0?"modelRect":_n,Ze=Yt.edgeType,Te=Ze===void 0?"polyline":Ze,R=Yt.behaviors,mt=R===void 0?["zoom-canvas","drag-canvas"]:R,$t=Yt.nodeSize,me=$t===void 0?xr:$t,Zt=Yt.nodeLabelCfg,ve=Zt===void 0?Dr:Zt,he=Yt.edgeLabelCfg,ce=he===void 0?Dr:he,Me=Yt.nodeAnchorPoints,_e=Me===void 0?Ir:Me,We=Yt.layout,Re=We===void 0?Pr:We,tn=Yt.minimapCfg,ke=Yt.nodeStyle,ln=ke===void 0?Er:ke,hn=Yt.edgeStyle,nn=hn===void 0?Lr:hn,dn=Yt.nodeStateStyles,Sn=dn===void 0?wr:dn,Pe=Yt.edgeStateStyles,le=Pe===void 0?wr:Pe,Le=Yt.handleEdgeClick,Be=Yt.handleEdgeHover,en=Yt.handleEdgeUnHover,un=Yt.handleNodeClick,ze=Yt.handleNodeHover,fn=Yt.handleNodeUnHover,mn=Yt.handleCanvasClick,Wn=Yt.graphRef,Tn,Pn={data:Se,className:Wt,style:ue,width:vn,height:kn,nodeType:Un,edgeType:Te,behaviors:mt,nodeSize:me,nodeLabelCfg:ve,edgeLabelCfg:ce,nodeAnchorPoints:_e,layout:Re,minimapCfg:tn,nodeStyle:ln,edgeStyle:nn,nodeStateStyles:Sn,edgeStateStyles:le,handleEdgeClick:Le,handleEdgeHover:Be,handleEdgeUnHover:en,handleNodeClick:un,handleNodeHover:ze,handleNodeUnHover:fn,handleCanvasClick:mn,graphRef:Wn},lr=a.a.useRef(null);return rn(Tn,Pn,lr),Object(at.useEffect)(function(){var Hr=Hn(vn,kn,lr);return(!Tn||Tn.destroyed)&&(Tn=new te.default.Graph({container:lr.current,width:Hr[0],height:Hr[1],modes:{default:mt},defaultNode:{type:Un,size:me,style:ln,anchorPoints:_e,labelCfg:ve},defaultEdge:{type:Te,style:nn,labelCfg:ce},nodeStateStyles:Sn,edgeStateStyles:le,layout:Re}),Wn&&(Wn.current=Tn)),$e(tn,Tn),Tn.data(Se),Tn.render(),Tn.fitView(),Tn.on("edge:mouseenter",function(Gr){var Mr=Gr.item;Tn.setItemState(Mr,"hover",!0),Be&&Be(Mr,Tn)}),Tn.on("node:mouseenter",function(Gr){var Mr=Gr.item;Tn.setItemState(Mr,"hover",!1),ze&&ze(Mr,Tn)}),Tn.on("edge:mouseleave",function(Gr){var Mr=Gr.item;Tn.setItemState(Mr,"hover",!1),en&&en(Mr,Tn)}),Tn.on("node:mouseleave",function(Gr){var Mr=Gr.item;Tn.setItemState(Mr,"hover",!1),fn&&fn(Mr,Tn)}),Tn.on("edge:click",function(Gr){var Mr=Gr.item;Le&&Le(Mr,Tn)}),Tn.on("node:click",function(Gr){var Mr=Gr.item;un&&un(Mr,Tn)}),Tn.on("canvas:click",function(Gr){mn&&mn(Tn)}),function(){return Tn.destroy()}},[]),a.a.createElement(x,null,a.a.createElement("div",{className:Wt,style:ue,ref:lr}))},vi=ri,ii={hover:{stroke:"#1890ff",lineWidth:2}},Si=[150,30],zi={stroke:"#72CC4A",fill:"#f00"},Xi=[[.5,0],[.5,1]],Bi={stroke:"#91d5ff",endArrow:{path:te.default.Arrow.vee(10,10),fill:"#91d5ff"}},Di={type:"dagre",rankdir:"LR",nodesep:30,ranksep:50},pe={style:{fill:"#000000A6",fontSize:10}},G=function(Yt){var Se=Yt.data,Wt=Yt.className,ue=Yt.style,vn=Yt.width,kn=Yt.height,_n=Yt.nodeType,Un=_n===void 0?"round-rect":_n,Ze=Yt.edgeType,Te=Ze===void 0?"fund-polyline":Ze,R=Yt.behaviors,mt=R===void 0?["zoom-canvas","drag-canvas"]:R,$t=Yt.nodeSize,me=$t===void 0?Si:$t,Zt=Yt.nodeLabelCfg,ve=Zt===void 0?pe:Zt,he=Yt.edgeLabelCfg,ce=he===void 0?pe:he,Me=Yt.nodeAnchorPoints,_e=Me===void 0?Xi:Me,We=Yt.layout,Re=We===void 0?Di:We,tn=Yt.minimapCfg,ke=Yt.nodeStyle,ln=ke===void 0?zi:ke,hn=Yt.edgeStyle,nn=hn===void 0?Bi:hn,dn=Yt.nodeStateStyles,Sn=dn===void 0?ii:dn,Pe=Yt.edgeStateStyles,le=Pe===void 0?ii:Pe,Le=Yt.colorMap,Be=Le===void 0?{}:Le,en=Yt.handleEdgeClick,un=Yt.handleEdgeHover,ze=Yt.handleEdgeUnHover,fn=Yt.handleNodeClick,mn=Yt.handleNodeHover,Wn=Yt.handleNodeUnHover,Tn=Yt.handleCanvasClick,Pn=Yt.graphRef,lr,Hr=a.a.useRef(null),Gr={data:Se,className:Wt,style:ue,width:vn,height:kn,nodeType:Un,edgeType:Te,behaviors:mt,nodeSize:me,nodeLabelCfg:ve,edgeLabelCfg:ce,nodeAnchorPoints:_e,layout:Re,minimapCfg:tn,nodeStyle:ln,edgeStyle:nn,nodeStateStyles:Sn,edgeStateStyles:le,colorMap:Be,handleEdgeClick:en,handleEdgeHover:un,handleEdgeUnHover:ze,handleNodeClick:fn,handleNodeHover:mn,handleNodeUnHover:Wn,handleCanvasClick:Tn,graphRef:Pn};return rn(lr,Gr,Hr),Object(at.useEffect)(function(){var Mr=Hn(vn,kn,Hr);(!lr||lr.destroyed)&&(lr=new te.default.Graph({container:Hr.current,width:Mr[0],height:Mr[1],modes:{default:mt},defaultNode:{type:Un,size:me,style:ln,anchorPoints:_e,labelCfg:ve},defaultEdge:{type:Te,style:nn,colorMap:Be,labelCfg:ce},nodeStateStyles:Sn,edgeStateStyles:le,layout:Re}),Pn&&(Pn.current=lr)),$e(tn,lr),lr.data(Se),lr.render();var oi=lr.getEdges();return oi.forEach(function(ai){var Zr=ai.getKeyShape(),Yi=Zr.attr("stroke"),$i=ai.getTarget();$i.update({style:{stroke:Yi}})}),lr.fitView(),lr.on("edge:mouseenter",function(ai){var Zr=ai.item;lr.setItemState(Zr,"hover",!0),un&&un(Zr,lr)}),lr.on("edge:mouseleave",function(ai){var Zr=ai.item;lr.setItemState(Zr,"hover",!1),ze&&ze(Zr,lr)}),lr.on("edge:click",function(ai){var Zr=ai.item;en&&en(Zr,lr)}),lr.on("node:mouseenter",function(ai){var Zr=ai.item;lr.setItemState(Zr,"hover",!1),mn&&mn(Zr,lr)}),lr.on("node:mouseleave",function(ai){var Zr=ai.item;lr.setItemState(Zr,"hover",!1),Wn&&Wn(Zr,lr)}),lr.on("node:click",function(ai){var Zr=ai.item;fn&&fn(Zr,lr)}),lr.on("canvas:click",function(ai){Tn&&Tn(lr)}),function(){return lr.destroy()}},[]),a.a.createElement(x,null,a.a.createElement("div",{className:Wt,style:ue,ref:Hr}))},B=G,$={hover:{stroke:"#1890ff",lineWidth:2}},ut=[120,40],Bt={stroke:"#40a9ff"},Jt=[[0,.5],[1,.5]],ie={stroke:"#ccc",endArrow:{path:te.default.Arrow.vee(10,10),fill:"#ccc"}},se={type:"indented",direction:"LR",dropCap:!1,indent:250,getHeight:function(){return 60},getWidth:function(Yt){return 100}},Ce={style:{fill:"#000",fontSize:12}},Ee=function(Yt){var Se=Yt.data,Wt=Yt.className,ue=Yt.style,vn=Yt.width,kn=Yt.height,_n=Yt.nodeType,Un=_n===void 0?"card-node":_n,Ze=Yt.edgeType,Te=Ze===void 0?"cubic-horizontal":Ze,R=Yt.behaviors,mt=R===void 0?["zoom-canvas","drag-canvas"]:R,$t=Yt.nodeSize,me=$t===void 0?ut:$t,Zt=Yt.nodeLabelCfg,ve=Zt===void 0?Ce:Zt,he=Yt.nodeAnchorPoints,ce=he===void 0?Jt:he,Me=Yt.layout,_e=Me===void 0?se:Me,We=Yt.minimapCfg,Re=Yt.nodeStyle,tn=Re===void 0?Bt:Re,ke=Yt.edgeStyle,ln=ke===void 0?ie:ke,hn=Yt.nodeStateStyles,nn=hn===void 0?$:hn,dn=Yt.edgeStateStyles,Sn=dn===void 0?$:dn,Pe=Yt.collapseExpand,le=Pe===void 0?!0:Pe,Le=Yt.handleEdgeClick,Be=Yt.handleEdgeHover,en=Yt.handleEdgeUnHover,un=Yt.handleNodeClick,ze=Yt.handleNodeHover,fn=Yt.handleNodeUnHover,mn=Yt.handleCanvasClick,Wn=Yt.graphRef,Tn,Pn=a.a.useRef(null),lr={data:Se,className:Wt,style:ue,width:vn,height:kn,nodeType:Un,edgeType:Te,behaviors:mt,nodeSize:me,nodeLabelCfg:ve,nodeAnchorPoints:ce,layout:_e,minimapCfg:We,nodeStyle:tn,edgeStyle:ln,nodeStateStyles:nn,edgeStateStyles:Sn,collapseExpand:le,handleEdgeClick:Le,handleEdgeHover:Be,handleEdgeUnHover:en,handleNodeClick:un,handleNodeHover:ze,handleNodeUnHover:fn,handleCanvasClick:mn,graphRef:Wn};return rn(Tn,lr,Pn),Object(at.useEffect)(function(){var Hr=Hn(vn,kn,Pn);if((!Tn||Tn.destroyed)&&(Tn=new te.default.TreeGraph({container:Pn.current,width:Hr[0],height:Hr[1],modes:{default:mt},defaultNode:{type:Un,size:me,style:tn,anchorPoints:ce,labelCfg:ve},defaultEdge:{type:Te,style:ln},nodeStateStyles:nn,edgeStateStyles:Sn,layout:_e}),Wn&&(Wn.current=Tn)),$e(We,Tn),Tn.data(Se),Tn.render(),Tn.fitView(),le){var Gr=function(oi){var ai=oi.item;oi.target.get("name")==="collapse-icon"?(Tn.updateItem(ai,{collapsed:!ai.getModel().collapsed}),Tn.layout()):un&&un(ai,Tn)};Tn.on("node:click",function(Mr){Gr(Mr)}),Tn.on("node:touchstart",function(Mr){Gr(Mr)})}return Tn.on("edge:mouseenter",function(Mr){var oi=Mr.item;Tn.setItemState(oi,"hover",!0),Be&&Be(oi,Tn)}),Tn.on("edge:mouseleave",function(Mr){var oi=Mr.item;Tn.setItemState(oi,"hover",!1),en&&en(oi,Tn)}),Tn.on("edge:click",function(Mr){var oi=Mr.item;Le&&Le(oi,Tn)}),Tn.on("edge:touchstart",function(Mr){var oi=Mr.item;Le&&Le(oi,Tn)}),Tn.on("node:mouseenter",function(Mr){var oi=Mr.item;Tn.setItemState(oi,"hover",!1),ze&&ze(oi,Tn)}),Tn.on("node:mouseleave",function(Mr){var oi=Mr.item;Tn.setItemState(oi,"hover",!1),fn&&fn(oi,Tn)}),Tn.on("canvas:click",function(Mr){mn&&mn(Tn)}),Tn.on("canvas:touchstart",function(Mr){mn&&mn(Tn)}),function(){return Tn.destroy()}},[]),a.a.createElement(x,null,a.a.createElement("div",{className:Wt,style:ue,ref:Pn}))},cn=Ee,xn={Area:ht,Bar:At,Box:yt,Bullet:ot,Column:Y,Funnel:g,Histogram:H,Line:St,Liquid:Ft,Heatmap:Xt,Pie:ye,Progress:In,Radar:Mn,RingProgress:Xn,Rose:nr,Scatter:Vr,TinyArea:Fi,TinyColumn:Ti,TinyLine:Ji,Waterfall:Br,WordCloud:Kr,Sunburst:$r,DualAxes:Vi,Stock:gi,RadialBar:_i,Gauge:Ve,Sankey:Wi,Treemap:no,MultiView:uo,BidirectionalBar:Kt,OrganizationTreeGraph:Ar,DagreGraph:vi,IndentedTree:cn,DagreFundFlowGraph:B,G2:A.G2}},"0JQy":function(zn,Ut){var z="\\ud800-\\udfff",at="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",A="\\u20d0-\\u20ff",e=at+a+A,r="\\ufe0e\\ufe0f",p="["+z+"]",m="["+e+"]",O="\\ud83c[\\udffb-\\udfff]",l="(?:"+m+"|"+O+")",E="[^"+z+"]",j="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",n="\\u200d",s=l+"?",d="["+r+"]?",M="(?:"+n+"(?:"+[E,j,y].join("|")+")"+d+s+")*",S=d+s+M,T="(?:"+[E+m+"?",m,j,y,p].join("|")+")",v=RegExp(O+"(?="+O+")|"+T+S,"g");function x(C){return C.match(v)||[]}zn.exports=x},"0Xep":function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return at}),z.d(Ut,"d",function(){return a}),z.d(Ut,"b",function(){return A}),z.d(Ut,"c",function(){return e});var at=0,a=1/2,A=1/2,e=.05},"1//c":function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return a});var at=z("aFU3");function a(A,e,r){var p=new at.Event(e,r);p.target=A,p.propagationPath.push(A),A.emitDelegation(e,p);for(var m=A.getParent();m;)m.emitDelegation(e,p),p.propagationPath.push(m),m=m.getParent()}},"17Tr":function(zn,Ut,z){"use strict";var at=z("uCX8");z.d(Ut,"Annotation",function(){return at});var a=z("fP0w");z.d(Ut,"Axis",function(){return a});var A=z("/3+T");z.d(Ut,"Crosshair",function(){return A});var e=z("x3EW");z.d(Ut,"Grid",function(){return e});var r=z("5bFI");z.d(Ut,"Legend",function(){return r});var p=z("Ch+T");z.d(Ut,"Tooltip",function(){return p});var m=z("NmWf"),O=z("MeYt"),l=z("de35"),E=z("fFDA");z.d(Ut,"Slider",function(){return E.a});var j=z("3u8d");z.d(Ut,"Scrollbar",function(){return j.a});var y=z("vk7d"),n=z.n(y),s=z("uzHj"),d=z.n(s),M=z("1//c");z.d(Ut,"propagationDelegate",function(){return M.a});var S=z("u60a");z.d(Ut,"TOOLTIP_CSS_CONST",function(){return S})},"1MZV":function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return A});var at=new Map;function a(x,C){at.set(x,C)}function A(x){return at.get(x)}var e=function(x){var C=x.attr(),N=C.x,X=C.y,tt=C.width,it=C.height;return{x:N,y:X,width:tt,height:it}},r=function(x){var C=x.attr(),N=C.x,X=C.y,tt=C.r;return{x:N-tt,y:X-tt,width:tt*2,height:tt*2}},p=z("EYNi");function m(x,C){return!x||!C?x||C:{minX:Math.min(x.minX,C.minX),minY:Math.min(x.minY,C.minY),maxX:Math.max(x.maxX,C.maxX),maxY:Math.max(x.maxY,C.maxY)}}function O(x,C){var N=x.get("startArrowShape"),X=x.get("endArrowShape"),tt=null,it=null;return N&&(tt=N.getCanvasBBox(),C=m(C,tt)),X&&(it=X.getCanvasBBox(),C=m(C,it)),C}var l=function(x){for(var C=x.attr(),N=C.points,X=[],tt=[],it=0;it<N.length;it++){var pt=N[it];X.push(pt[0]),tt.push(pt[1])}var ft=p.f.getBBoxByArray(X,tt),Ot=ft.x,wt=ft.y,xt=ft.width,lt=ft.height,Vt={minX:Ot,minY:wt,maxX:Ot+xt,maxY:wt+lt};return Vt=O(x,Vt),{x:Vt.minX,y:Vt.minY,width:Vt.maxX-Vt.minX,height:Vt.maxY-Vt.minY}},E=function(x){for(var C=x.attr(),N=C.points,X=[],tt=[],it=0;it<N.length;it++){var pt=N[it];X.push(pt[0]),tt.push(pt[1])}return p.f.getBBoxByArray(X,tt)},j=z("vIgC"),y=function(x){var C=x.attr(),N=C.x,X=C.y,tt=C.text,it=C.fontSize,pt=C.lineHeight,ft=C.font;ft||(ft=Object(j.a)(C));var Ot=Object(j.c)(tt,ft),wt;if(!Ot)wt={x:N,y:X,width:0,height:0};else{var xt=C.textAlign,lt=C.textBaseline,Vt=Object(j.b)(tt,it,pt),Lt={x:N,y:X-Vt};xt&&(xt==="end"||xt==="right"?Lt.x-=Ot:xt==="center"&&(Lt.x-=Ot/2)),lt&&(lt==="top"?Lt.y+=Vt:lt==="middle"&&(Lt.y+=Vt/2)),wt={x:Lt.x,y:Lt.y,width:Ot,height:Vt}}return wt},n=z("LvGN"),s=z("iTfj");function d(x,C){for(var N=[],X=[],tt=[],it=0;it<x.length;it++){var pt=x[it],ft=pt.currentPoint,Ot=pt.params,wt=pt.prePoint,xt=void 0;switch(pt.command){case"Q":xt=p.e.box(wt[0],wt[1],Ot[1],Ot[2],Ot[3],Ot[4]);break;case"C":xt=p.b.box(wt[0],wt[1],Ot[1],Ot[2],Ot[3],Ot[4],Ot[5],Ot[6]);break;case"A":var lt=pt.arcParams;xt=p.a.box(lt.cx,lt.cy,lt.rx,lt.ry,lt.xRotation,lt.startAngle,lt.endAngle);break;default:N.push(ft[0]),X.push(ft[1]);break}xt&&(pt.box=xt,N.push(xt.x,xt.x+xt.width),X.push(xt.y,xt.y+xt.height)),C&&(pt.command==="L"||pt.command==="M")&&pt.prePoint&&pt.nextPoint&&tt.push(pt)}N=N.filter(function(vt){return!Number.isNaN(vt)}),X=X.filter(function(vt){return!Number.isNaN(vt)});var Vt=Math.min.apply(null,N),Lt=Math.min.apply(null,X),Et=Math.max.apply(null,N),J=Math.max.apply(null,X);if(tt.length===0)return{x:Vt,y:Lt,width:Et-Vt,height:J-Lt};for(var it=0;it<tt.length;it++){var pt=tt[it],ft=pt.currentPoint,ht=void 0;ft[0]===Vt?(ht=M(pt,C),Vt=Vt-ht.xExtra):ft[0]===Et&&(ht=M(pt,C),Et=Et+ht.xExtra),ft[1]===Lt?(ht=M(pt,C),Lt=Lt-ht.yExtra):ft[1]===J&&(ht=M(pt,C),J=J+ht.yExtra)}return{x:Vt,y:Lt,width:Et-Vt,height:J-Lt}}function M(x,C){var N=x.prePoint,X=x.currentPoint,tt=x.nextPoint,it=Math.pow(X[0]-N[0],2)+Math.pow(X[1]-N[1],2),pt=Math.pow(X[0]-tt[0],2)+Math.pow(X[1]-tt[1],2),ft=Math.pow(N[0]-tt[0],2)+Math.pow(N[1]-tt[1],2),Ot=Math.acos((it+pt-ft)/(2*Math.sqrt(it)*Math.sqrt(pt)));if(!Ot||Math.sin(Ot)===0||Object(s.isNumberEqual)(Ot,0))return{xExtra:0,yExtra:0};var wt=Math.abs(Math.atan2(tt[1]-X[1],tt[0]-X[0])),xt=Math.abs(Math.atan2(tt[0]-X[0],tt[1]-X[1]));wt=wt>Math.PI/2?Math.PI-wt:wt,xt=xt>Math.PI/2?Math.PI-xt:xt;var lt={xExtra:Math.cos(Ot/2-wt)*(C/2*(1/Math.sin(Ot/2)))-C/2||0,yExtra:Math.cos(xt-Ot/2)*(C/2*(1/Math.sin(Ot/2)))-C/2||0};return lt}var S=function(x){var C=x.attr(),N=C.path,X=C.stroke,tt=X?C.lineWidth:0,it=x.get("segments")||Object(n.e)(N),pt=d(it,tt),ft=pt.x,Ot=pt.y,wt=pt.width,xt=pt.height,lt={minX:ft,minY:Ot,maxX:ft+wt,maxY:Ot+xt};return lt=O(x,lt),{x:lt.minX,y:lt.minY,width:lt.maxX-lt.minX,height:lt.maxY-lt.minY}},T=function(x){var C=x.attr(),N=C.x1,X=C.y1,tt=C.x2,it=C.y2,pt=Math.min(N,tt),ft=Math.max(N,tt),Ot=Math.min(X,it),wt=Math.max(X,it),xt={minX:pt,maxX:ft,minY:Ot,maxY:wt};return xt=O(x,xt),{x:xt.minX,y:xt.minY,width:xt.maxX-xt.minX,height:xt.maxY-xt.minY}},v=function(x){var C=x.attr(),N=C.x,X=C.y,tt=C.rx,it=C.ry;return{x:N-tt,y:X-it,width:tt*2,height:it*2}};a("rect",e),a("image",e),a("circle",r),a("marker",r),a("polyline",l),a("polygon",E),a("text",y),a("path",S),a("line",T),a("ellipse",v)},"24YM":function(zn,Ut,z){"use strict";Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.SensorTabIndex=Ut.SensorClassName=Ut.SizeSensorId=void 0;var at="size-sensor-id";Ut.SizeSensorId=at;var a="size-sensor-object";Ut.SensorClassName=a;var A="-1";Ut.SensorTabIndex=A},"3T7b":function(zn,Ut){},"3u8d":function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return m});var at=z("mrSG"),a=z("fIp6"),A=z("iTfj"),e=z("MeYt"),r={trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},p={default:r,hover:{thumbColor:"rgba(0,0,0,0.2)"}},m=function(O){Object(at.b)(l,O);function l(){var E=O!==null&&O.apply(this,arguments)||this;return E.clearEvents=A.noop,E.onStartEvent=function(j){return function(y){E.isMobile=j,y.originalEvent.preventDefault();var n=j?Object(A.get)(y.originalEvent,"touches.0.clientX"):y.clientX,s=j?Object(A.get)(y.originalEvent,"touches.0.clientY"):y.clientY;E.startPos=E.cfg.isHorizontal?n:s,E.bindLaterEvent()}},E.bindLaterEvent=function(){var j=E.getContainerDOM(),y=[];E.isMobile?y=[Object(a.a)(j,"touchmove",E.onMouseMove),Object(a.a)(j,"touchend",E.onMouseUp),Object(a.a)(j,"touchcancel",E.onMouseUp)]:y=[Object(a.a)(j,"mousemove",E.onMouseMove),Object(a.a)(j,"mouseup",E.onMouseUp),Object(a.a)(j,"mouseleave",E.onMouseUp)],E.clearEvents=function(){y.forEach(function(n){n.remove()})}},E.onMouseMove=function(j){var y=E.cfg,n=y.isHorizontal,s=y.thumbOffset;j.preventDefault();var d=E.isMobile?Object(A.get)(j,"touches.0.clientX"):j.clientX,M=E.isMobile?Object(A.get)(j,"touches.0.clientY"):j.clientY,S=n?d:M,T=S-E.startPos;E.startPos=S,E.updateThumbOffset(s+T)},E.onMouseUp=function(j){j.preventDefault(),E.clearEvents()},E.onTrackClick=function(j){var y=E.cfg,n=y.isHorizontal,s=y.x,d=y.y,M=y.thumbLen,S=E.getContainerDOM(),T=S.getBoundingClientRect(),v=j.clientX,x=j.clientY,C=n?v-T.left-s-M/2:x-T.top-d-M/2,N=E.validateRange(C);E.updateThumbOffset(N)},E.onThumbMouseOver=function(){var j=E.cfg.theme.hover.thumbColor;E.getElementByLocalId("thumb").attr("stroke",j),E.draw()},E.onThumbMouseOut=function(){var j=E.cfg.theme.default.thumbColor;E.getElementByLocalId("thumb").attr("stroke",j),E.draw()},E}return l.prototype.setRange=function(E,j){this.set("minLimit",E),this.set("maxLimit",j);var y=this.getValue(),n=Object(A.clamp)(y,E,j);y!==n&&!this.get("isInit")&&this.setValue(n)},l.prototype.getRange=function(){var E=this.get("minLimit")||0,j=this.get("maxLimit")||1;return{min:E,max:j}},l.prototype.setValue=function(E){var j=this.getRange(),y=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*Object(A.clamp)(E,j.min,j.max)}),this.delegateEmit("valuechange",{originalValue:y,value:this.getValue()})},l.prototype.getValue=function(){return Object(A.clamp)(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},l.prototype.getDefaultCfg=function(){var E=O.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},E),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:p})},l.prototype.renderInner=function(E){this.renderTrackShape(E),this.renderThumbShape(E)},l.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},l.prototype.initEvent=function(){this.bindEvents()},l.prototype.renderTrackShape=function(E){var j=this.cfg,y=j.trackLen,n=j.theme,s=n===void 0?{default:{}}:n,d=s.default,M=d.lineCap,S=d.trackColor,T=d.size,v=this.get("isHorizontal")?{x1:0+T/2,y1:T/2,x2:y-T/2,y2:T/2,lineWidth:T,stroke:S,lineCap:M}:{x1:T/2,y1:0+T/2,x2:T/2,y2:y-T/2,lineWidth:T,stroke:S,lineCap:M};return this.addShape(E,{id:this.getElementId("track"),name:"track",type:"line",attrs:v})},l.prototype.renderThumbShape=function(E){var j=this.cfg,y=j.thumbOffset,n=j.thumbLen,s=j.theme,d=s===void 0?{default:{}}:s,M=d.default,S=M.size,T=M.lineCap,v=M.thumbColor,x=this.get("isHorizontal")?{x1:y+S/2,y1:S/2,x2:y+n-S/2,y2:S/2,lineWidth:S,stroke:v,lineCap:T,cursor:"default"}:{x1:S/2,y1:y+S/2,x2:S/2,y2:y+n-S/2,lineWidth:S,stroke:v,lineCap:T,cursor:"default"};return this.addShape(E,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:x})},l.prototype.bindEvents=function(){var E=this.get("group");E.on("mousedown",this.onStartEvent(!1)),E.on("mouseup",this.onMouseUp),E.on("touchstart",this.onStartEvent(!0)),E.on("touchend",this.onMouseUp);var j=E.findById(this.getElementId("track"));j.on("click",this.onTrackClick);var y=E.findById(this.getElementId("thumb"));y.on("mouseover",this.onThumbMouseOver),y.on("mouseout",this.onThumbMouseOut)},l.prototype.getContainerDOM=function(){var E=this.get("container"),j=E&&E.get("canvas");return j&&j.get("container")},l.prototype.validateRange=function(E){var j=this.cfg,y=j.thumbLen,n=j.trackLen,s=E;return E+y>n?s=n-y:E+y<y&&(s=0),s},l.prototype.draw=function(){var E=this.get("container"),j=E&&E.get("canvas");j&&j.draw()},l.prototype.updateThumbOffset=function(E){var j=this.cfg,y=j.thumbOffset,n=j.isHorizontal,s=j.thumbLen,d=j.size,M=this.validateRange(E);if(M!==y){var S=this.getElementByLocalId("thumb");n?S.attr({x1:M+d/2,x2:M+s-d/2}):S.attr({y1:M+d/2,y2:M+s-d/2}),this.emitOffsetChange(M)}},l.prototype.emitOffsetChange=function(E){var j=this.cfg,y=j.thumbOffset,n=j.trackLen,s=j.thumbLen;this.cfg.thumbOffset=E,this.emit("scrollchange",{thumbOffset:E,ratio:Object(A.clamp)(E/(n-s),0,1)}),this.delegateEmit("valuechange",{originalValue:y,value:E})},l}(e.a)},"46lQ":function(zn,Ut,z){"use strict";var at=z("QG4C"),a;(function(r){r.DEV="DEV",r.BETA="BETA",r.STABLE="STABLE"})(a||(a={}));function A(r,p){console.warn(r===a.DEV?"Plot '"+p+"' is in DEV stage, just give us issues.":r===a.BETA?"Plot '"+p+"' is in BETA stage, DO NOT use it in production env.":r===a.STABLE?"Plot '"+p+`' is in STABLE stage, import it by "import { `+p+` } from '@antv/g2plot'".`:"invalid Stage type.")}var e=function(){function r(){}return Object.defineProperty(r,"MultiView",{get:function(){return A(a.STABLE,"MultiView"),at.a},enumerable:!1,configurable:!0}),r}()},"4Olw":function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return at});function at(a,A){return a.views.find(function(e){return e.id===A})}},"4cbP":function(zn,Ut){},"5HRO":function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return a});var at=z("iTfj");function a(A,e){if(A===!1)return{fields:!1};var r=Object(at.get)(A,"fields"),p=Object(at.get)(A,"formatter");return p&&!r&&(r=e),{fields:r,formatter:p}}},"5OoT":function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return a});var at=z("iTfj");function a(A,e){return!Object(at.isNumber)(A)||!Object(at.isNumber)(e)?"-":A===e?"100%":A===0?"\u221E":e===0?"-\u221E":(100*e/A).toFixed(2)+"%"}},"5UbV":function(zn,Ut,z){"use strict";z.d(Ut,"c",function(){return a}),z.d(Ut,"a",function(){return A}),z.d(Ut,"h",function(){return e}),z.d(Ut,"k",function(){return r}),z.d(Ut,"j",function(){return p}),z.d(Ut,"b",function(){return m}),z.d(Ut,"g",function(){return O}),z.d(Ut,"e",function(){return l}),z.d(Ut,"i",function(){return y}),z.d(Ut,"d",function(){return d}),z.d(Ut,"m",function(){return M}),z.d(Ut,"l",function(){return S}),z.d(Ut,"f",function(){return T});var at=z("iTfj");function a(v){var x=0,C=0,N=0,X=0;return Object(at.isNumber)(v)?x=C=N=X=v:Object(at.isArray)(v)&&(x=v[0],N=Object(at.isNil)(v[1])?v[0]:v[1],X=Object(at.isNil)(v[2])?v[0]:v[2],C=Object(at.isNil)(v[3])?N:v[3]),[x,N,X,C]}function A(v){for(var x=v.childNodes,C=x.length,N=C-1;N>=0;N--)v.removeChild(x[N])}function e(v,x){return!!v.className.match(new RegExp("(\\s|^)"+x+"(\\s|$)"))}function r(v){var x=v.start,C=v.end,N=Math.min(x.x,C.x),X=Math.min(x.y,C.y),tt=Math.max(x.x,C.x),it=Math.max(x.y,C.y);return{x:N,y:X,minX:N,minY:X,maxX:tt,maxY:it,width:tt-N,height:it-X}}function p(v){var x=v.map(function(pt){return pt.x}),C=v.map(function(pt){return pt.y}),N=Math.min.apply(Math,x),X=Math.min.apply(Math,C),tt=Math.max.apply(Math,x),it=Math.max.apply(Math,C);return{x:N,y:X,minX:N,minY:X,maxX:tt,maxY:it,width:tt-N,height:it-X}}function m(v,x,C,N){var X=v+C,tt=x+N;return{x:v,y:x,width:C,height:N,minX:v,minY:x,maxX:isNaN(X)?0:X,maxY:isNaN(tt)?0:tt}}function O(v,x,C){return(1-C)*v+x*C}function l(v,x,C){return{x:v.x+Math.cos(C)*x,y:v.y+Math.sin(C)*x}}function E(v,x){var C=x.x-v.x,N=x.y-v.y;return Math.sqrt(C*C+N*N)}var j=function(x){return new Promise(function(C){setTimeout(C,x)})},y=function(x,C,N){return N===void 0&&(N=Math.pow(Number.EPSILON,.5)),[x,C].includes(Infinity)?Math.abs(x)===Math.abs(C):Math.abs(x-C)<N};function n(v,x){var C=Math.max(v.minX,x.minX),N=Math.max(v.minY,x.minY),X=Math.min(v.maxX,x.maxX),tt=Math.min(v.maxY,x.maxY);return m(C,N,X-C,tt-N)}function s(v,x){var C=Math.min(v.minX,x.minX),N=Math.min(v.minY,x.minY),X=Math.max(v.maxX,x.maxX),tt=Math.max(v.maxY,x.maxY);return m(C,N,X-C,tt-N)}function d(v){var x=v.getClip(),C=x&&x.getBBox(),N;if(!v.isGroup())N=v.getBBox();else{var X=Infinity,tt=-Infinity,it=Infinity,pt=-Infinity,ft=v.getChildren();ft.length>0?Object(at.each)(ft,function(Ot){if(Ot.get("visible")){if(Ot.isGroup()&&Ot.get("children").length===0)return!0;var wt=d(Ot),xt=Ot.applyToMatrix([wt.minX,wt.minY,1]),lt=Ot.applyToMatrix([wt.minX,wt.maxY,1]),Vt=Ot.applyToMatrix([wt.maxX,wt.minY,1]),Lt=Ot.applyToMatrix([wt.maxX,wt.maxY,1]),Et=Math.min(xt[0],lt[0],Vt[0],Lt[0]),J=Math.max(xt[0],lt[0],Vt[0],Lt[0]),ht=Math.min(xt[1],lt[1],Vt[1],Lt[1]),vt=Math.max(xt[1],lt[1],Vt[1],Lt[1]);Et<X&&(X=Et),J>tt&&(tt=J),ht<it&&(it=ht),vt>pt&&(pt=vt)}}):(X=0,tt=0,it=0,pt=0),N=m(X,it,tt-X,pt-it)}return C?n(N,C):N}function M(v,x){if(!(!v.getClip()&&!x.getClip())){var C=x.getClip();if(!C){v.setClip(null);return}var N={type:C.get("type"),attrs:C.attr()};v.setClip(N)}}function S(v){return v+"px"}function T(v,x,C,N){var X=E(v,x),tt=N/X,it=0;return C==="start"?it=0-tt:C==="end"&&(it=1+tt),{x:O(v.x,x.x,it),y:O(v.y,x.y,it)}}},"5bFI":function(zn,Ut,z){"use strict";z.r(Ut),z.d(Ut,"Category",function(){return y}),z.d(Ut,"Continuous",function(){return M}),z.d(Ut,"Base",function(){return E});var at=z("mrSG"),a=z("iTfj"),A=z("BgvD"),e=z("jqgP"),r=z("l3hu"),p=z("L16w"),m=z("MeYt"),O=z("5UbV"),l=function(S){Object(at.b)(T,S);function T(){return S!==null&&S.apply(this,arguments)||this}return T.prototype.getDefaultCfg=function(){var v=S.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},v),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},T.prototype.getLayoutBBox=function(){var v=S.prototype.getLayoutBBox.call(this),x=this.get("maxWidth"),C=this.get("maxHeight"),N=v.width,X=v.height;return x&&(N=Math.min(N,x)),C&&(X=Math.min(X,C)),Object(O.b)(v.minX,v.minY,N,X)},T.prototype.setLocation=function(v){this.set("x",v.x),this.set("y",v.y),this.resetLocation()},T.prototype.resetLocation=function(){var v=this.get("x"),x=this.get("y"),C=this.get("offsetX"),N=this.get("offsetY");this.moveElementTo(this.get("group"),{x:v+C,y:x+N})},T.prototype.applyOffset=function(){this.resetLocation()},T.prototype.getDrawPoint=function(){return this.get("currentPoint")},T.prototype.setDrawPoint=function(v){return this.set("currentPoint",v)},T.prototype.renderInner=function(v){this.resetDraw(),this.get("title")&&this.drawTitle(v),this.drawLegendContent(v),this.get("background")&&this.drawBackground(v)},T.prototype.drawBackground=function(v){var x=this.get("background"),C=v.getBBox(),N=Object(O.c)(x.padding),X=Object(at.a)({x:0,y:0,width:C.width+N[1]+N[3],height:C.height+N[0]+N[2]},x.style),tt=this.addShape(v,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:X});tt.toBack()},T.prototype.drawTitle=function(v){var x=this.get("currentPoint"),C=this.get("title"),N=C.spacing,X=C.style,tt=C.text,it=this.addShape(v,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:Object(at.a)({text:tt,x:x.x,y:x.y},X)}),pt=it.getBBox();this.set("currentPoint",{x:x.x,y:pt.maxY+N})},T.prototype.resetDraw=function(){var v=this.get("background"),x={x:0,y:0};if(v){var C=Object(O.c)(v.padding);x.x=C[3],x.y=C[0]}this.set("currentPoint",x)},T}(m.a),E=l,j=function(S){Object(at.b)(T,S);function T(){var v=S!==null&&S.apply(this,arguments)||this;return v.currentPageIndex=1,v.totalPagesCnt=1,v.pageWidth=0,v.pageHeight=0,v.startX=0,v.startY=0,v.onNavigationBack=function(){var x=v.getElementByLocalId("item-group");if(v.currentPageIndex>1){v.currentPageIndex-=1,v.updateNavigation();var C=v.getCurrentNavigationMatrix();v.get("animate")?x.animate({matrix:C},100):x.attr({matrix:C})}},v.onNavigationAfter=function(){var x=v.getElementByLocalId("item-group");if(v.currentPageIndex<v.totalPagesCnt){v.currentPageIndex+=1,v.updateNavigation();var C=v.getCurrentNavigationMatrix();v.get("animate")?x.animate({matrix:C},100):x.attr({matrix:C})}},v}return T.prototype.getDefaultCfg=function(){var v=S.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},v),{name:"legend",type:"category",itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},items:[],itemStates:{},itemBackground:{},defaultCfg:{title:{spacing:5,style:{fill:p.a.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:p.a.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},itemName:{spacing:16,style:{fill:p.a.textColor,fontSize:12,textAlign:"start",textBaseline:"middle"}},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:{fill:p.a.textColor,fontSize:12,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:p.a.uncheckedColor},markerStyle:{fill:p.a.uncheckedColor,stroke:p.a.uncheckedColor}},inactive:{nameStyle:{fill:p.a.uncheckedColor},markerStyle:{opacity:.2}}}}})},T.prototype.isList=function(){return!0},T.prototype.getItems=function(){return this.get("items")},T.prototype.setItems=function(v){this.update({items:v})},T.prototype.updateItem=function(v,x){Object(a.mix)(v,x),this.clear(),this.render()},T.prototype.clearItems=function(){var v=this.getElementByLocalId("item-group");v&&v.clear()},T.prototype.setItemState=function(v,x,C){v[x]=C;var N=this.getElementByLocalId("item-"+v.id);if(N){var X=this.getItems(),tt=X.indexOf(v),it=this.createOffScreenGroup(),pt=this.drawItem(v,tt,this.getItemHeight(),it);this.updateElements(pt,N),this.clearUpdateStatus(N)}},T.prototype.hasState=function(v,x){return!!v[x]},T.prototype.getItemStates=function(v){var x=this.get("itemStates"),C=[];return Object(a.each)(x,function(N,X){v[X]&&C.push(X)}),C},T.prototype.clearItemsState=function(v){var x=this,C=this.getItemsByState(v);Object(a.each)(C,function(N){x.setItemState(N,v,!1)})},T.prototype.getItemsByState=function(v){var x=this,C=this.getItems();return Object(a.filter)(C,function(N){return x.hasState(N,v)})},T.prototype.drawLegendContent=function(v){this.processItems(),this.drawItems(v)},T.prototype.processItems=function(){var v=this.get("items");Object(a.each)(v,function(x){x.id||(x.id=x.name)})},T.prototype.drawItems=function(v){var x=this,C=this.addGroup(v,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),N=this.addGroup(C,{id:this.getElementId("item-group"),name:"legend-item-group"}),X=this.getItemHeight(),tt=this.get("itemWidth"),it=this.get("itemSpacing"),pt=this.get("itemMarginBottom"),ft=this.get("currentPoint"),Ot=ft.x,wt=ft.y,xt=this.get("layout"),lt=this.get("items"),Vt=!1,Lt=0,Et=this.get("maxWidth"),J=this.get("maxHeight");Object(a.each)(lt,function(ht,vt){var bt=x.drawItem(ht,vt,X,N),At=bt.getBBox(),q=tt||At.width;q>Lt&&(Lt=q),xt==="horizontal"?(Et&&Et<ft.x+q-Ot&&(Vt=!0,ft.x=Ot,ft.y+=X+pt),x.moveElementTo(bt,ft),ft.x+=q+it):(J&&J<ft.y+X+pt-wt&&(Vt=!0,ft.x+=Lt+it,ft.y=wt,Lt=0),x.moveElementTo(bt,ft),ft.y+=X+pt)}),Vt&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=Ot,this.startY=wt,this.adjustNavigation(v,N))},T.prototype.getItemHeight=function(){var v=this.get("itemHeight");if(!v){var x=this.get("itemName");x&&(v=x.style.fontSize)}return v},T.prototype.drawMarker=function(v,x,C,N){var X=Object(at.a)(Object(at.a)(Object(at.a)({x:0,y:N/2},x.style),{symbol:Object(a.get)(C.marker,"symbol","circle")}),Object(a.get)(C.marker,"style",{})),tt=this.addShape(v,{type:"marker",id:this.getElementId("item-"+C.id+"-marker"),name:"legend-item-marker",attrs:X}),it=tt.getBBox();tt.attr("x",it.width/2);var pt=tt.attr(),ft=pt.stroke,Ot=pt.fill;return ft&&tt.set("isStroke",!0),Ot&&tt.set("isFill",!0),tt},T.prototype.drawItemText=function(v,x,C,N,X,tt,it){var pt=C.formatter,ft=Object(at.a)({x:tt,y:X/2,text:pt?pt(N[x],N,it):N[x]},C.style);return this.addShape(v,{type:"text",id:this.getElementId("item-"+N.id+"-"+x),name:"legend-item-"+x,attrs:ft})},T.prototype.drawItem=function(v,x,C,N){var X="item-"+v.id,tt=this.addGroup(N,{name:"legend-item-container",id:this.getElementId("item-container-"+X),delegateObject:{item:v,index:x}}),it=this.addGroup(tt,{name:"legend-item",id:this.getElementId(X),delegateObject:{item:v,index:x}}),pt=this.get("marker"),ft=this.get("itemName"),Ot=this.get("itemValue"),wt=this.get("itemBackground"),xt=this.getLimitItemWidth(),lt=0;if(pt){var Vt=this.drawMarker(it,pt,v,C);lt=Vt.getBBox().maxX+pt.spacing}if(ft){var Lt=this.drawItemText(it,"name",ft,v,C,lt,x);xt&&Object(A.a)(!0,Lt,Object(a.clamp)(xt-lt,0,xt)),lt=Lt.getBBox().maxX+ft.spacing}if(Ot){var Et=this.drawItemText(it,"value",Ot,v,C,lt,x);xt&&(Ot.alignRight?(Et.attr({textAlign:"right",x:xt}),Object(A.a)(!0,Et,Object(a.clamp)(xt-lt,0,xt),"head")):Object(A.a)(!0,Et,Object(a.clamp)(xt-lt,0,xt)))}if(wt){var J=it.getBBox(),ht=this.addShape(it,{type:"rect",name:"legend-item-background",id:this.getElementId(X+"-background"),attrs:Object(at.a)({x:0,y:0,width:J.width,height:C},wt.style)});ht.toBack()}return this.applyItemStates(v,it),it},T.prototype.adjustNavigation=function(v,x){var C=this,N=this.startX,X=this.startY,tt=this.get("layout"),it=x.findAll(function(q){return q.get("name")==="legend-item"}),pt=this.get("maxWidth"),ft=this.get("maxHeight"),Ot=this.get("itemWidth"),wt=this.get("itemSpacing"),xt=this.getItemHeight(),lt=this.drawNavigation(v,tt,"00/00",12),Vt=lt.getBBox(),Lt={x:N,y:X},Et=1,J=0,ht=0,vt=0;if(tt==="horizontal")this.pageHeight=xt,Object(a.each)(it,function(q){var ct=q.getBBox(),ot=Ot||ct.width;(J&&J<Lt.x+ot+wt||pt<Lt.x+ot+wt+Vt.width)&&(Et===1&&(J=Lt.x+wt,C.pageWidth=J,C.moveElementTo(lt,{x:pt-wt-Vt.width-Vt.minX,y:Lt.y+xt/2-Vt.height/2-Vt.minY})),Et+=1,Lt.x=N,Lt.y+=xt),C.moveElementTo(q,Lt),q.getParent().setClip({type:"rect",attrs:{x:Lt.x,y:Lt.y,width:ot+wt,height:xt}}),Lt.x+=ot+wt});else{var bt=this.get("itemMarginBottom");Object(a.each)(it,function(q){var ct=q.getBBox();ct.width>ht&&(ht=ct.width)}),vt=ht,ht+=wt,pt&&(ht=Math.min(pt,ht),vt=Math.min(pt,vt)),this.pageWidth=ht,this.pageHeight=ft-Math.max(Vt.height,xt+bt);var At=Math.floor(this.pageHeight/(xt+bt));Object(a.each)(it,function(q,ct){ct!==0&&ct%At==0&&(Et+=1,Lt.x+=ht,Lt.y=X),C.moveElementTo(q,Lt),q.getParent().setClip({type:"rect",attrs:{x:Lt.x,y:Lt.y,width:ht,height:xt}}),Lt.y+=xt+bt}),this.totalPagesCnt=Et,this.moveElementTo(lt,{x:N+vt/2-Vt.width/2-Vt.minX,y:ft-Vt.height-Vt.minY})}this.pageHeight&&this.pageWidth&&x.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),this.totalPagesCnt=Et,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(lt),x.attr("matrix",this.getCurrentNavigationMatrix())},T.prototype.drawNavigation=function(v,x,C,N){var X={x:0,y:0},tt=this.addGroup(v,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),it=this.drawArrow(tt,X,"navigation-arrow-left",x==="horizontal"?"up":"left",N);it.on("click",this.onNavigationBack);var pt=it.getBBox();X.x+=pt.width+2;var ft=this.addShape(tt,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:{x:X.x,y:X.y+N/2,text:C,fontSize:12,fill:"#ccc",textBaseline:"middle"}}),Ot=ft.getBBox();X.x+=Ot.width+2;var wt=this.drawArrow(tt,X,"navigation-arrow-right",x==="horizontal"?"down":"right",N);return wt.on("click",this.onNavigationAfter),tt},T.prototype.updateNavigation=function(v){var x=this.currentPageIndex+"/"+this.totalPagesCnt,C=v?v.getChildren()[1]:this.getElementByLocalId("navigation-text"),N=v?v.findById(this.getElementId("navigation-arrow-left")):this.getElementByLocalId("navigation-arrow-left"),X=v?v.findById(this.getElementId("navigation-arrow-right")):this.getElementByLocalId("navigation-arrow-right"),tt=C.getBBox();C.attr("text",x);var it=C.getBBox();C.attr("x",C.attr("x")-(it.width-tt.width)/2),N.attr("opacity",this.currentPageIndex===1?.45:1),N.attr("cursor",this.currentPageIndex===1?"not-allowed":"pointer"),X.attr("opacity",this.currentPageIndex===this.totalPagesCnt?.45:1),X.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer")},T.prototype.drawArrow=function(v,x,C,N,X){var tt=x.x,it=x.y,pt={right:90*Math.PI/180,left:(360-90)*Math.PI/180,up:0,down:180*Math.PI/180},ft=this.addShape(v,{type:"path",id:this.getElementId(C),name:C,attrs:{path:[["M",tt+X/2,it],["L",tt,it+X],["L",tt+X,it+X],["Z"]],fill:"#000",cursor:"pointer"}});return ft.attr("matrix",Object(e.e)({x:tt+X/2,y:it+X/2},pt[N])),ft},T.prototype.getCurrentNavigationMatrix=function(){var v=this,x=v.currentPageIndex,C=v.pageWidth,N=v.pageHeight,X=this.get("layout"),tt=X==="horizontal"?{x:0,y:N*(1-x)}:{x:C*(1-x),y:0};return Object(e.f)(tt)},T.prototype.applyItemStates=function(v,x){var C=this.getItemStates(v),N=C.length>0;if(N){var X=x.getChildren(),tt=this.get("itemStates");Object(a.each)(X,function(it){var pt=it.get("name"),ft=pt.split("-")[2],Ot=Object(r.a)(v,ft,tt);Ot&&(it.attr(Ot),ft==="marker"&&!(it.get("isStroke")&&it.get("isFill"))&&(it.get("isStroke")&&it.attr("fill",null),it.get("isFill")&&it.attr("stroke",null)))})}},T.prototype.getLimitItemWidth=function(){var v=this.get("itemWidth"),x=this.get("maxItemWidth");return x?v&&(x=v<=x?v:x):v&&(x=v),x},T}(E),y=j,n=1.4,s=.4,d=function(S){Object(at.b)(T,S);function T(){return S!==null&&S.apply(this,arguments)||this}return T.prototype.getDefaultCfg=function(){var v=S.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},v),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:p.a.textColor,textBaseline:"middle",fontFamily:p.a.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:p.a.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},T.prototype.isSlider=function(){return!0},T.prototype.getValue=function(){return this.getCurrentValue()},T.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},T.prototype.setRange=function(v,x){this.update({min:v,max:x})},T.prototype.setValue=function(v){var x=this.getValue();this.set("value",v);var C=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(C),this.delegateEmit("valuechanged",{originValue:x,value:v})},T.prototype.initEvent=function(){var v=this.get("group");this.bindSliderEvent(v),this.bindRailEvent(v),this.bindTrackEvent(v)},T.prototype.drawLegendContent=function(v){this.drawRail(v),this.drawLabels(v),this.fixedElements(v),this.resetTrack(v),this.resetTrackClip(v),this.get("slidable")&&this.resetHandlers(v)},T.prototype.bindSliderEvent=function(v){this.bindHandlersEvent(v)},T.prototype.bindHandlersEvent=function(v){var x=this;v.on("legend-handler-min:drag",function(C){var N=x.getValueByCanvasPoint(C.x,C.y),X=x.getCurrentValue(),tt=X[1];tt<N&&(tt=N),x.setValue([N,tt])}),v.on("legend-handler-max:drag",function(C){var N=x.getValueByCanvasPoint(C.x,C.y),X=x.getCurrentValue(),tt=X[0];tt>N&&(tt=N),x.setValue([tt,N])})},T.prototype.bindRailEvent=function(v){},T.prototype.bindTrackEvent=function(v){var x=this,C=null;v.on("legend-track:dragstart",function(N){C={x:N.x,y:N.y}}),v.on("legend-track:drag",function(N){if(!!C){var X=x.getValueByCanvasPoint(C.x,C.y),tt=x.getValueByCanvasPoint(N.x,N.y),it=x.getCurrentValue(),pt=it[1]-it[0],ft=x.getRange(),Ot=tt-X;Ot<0?it[0]+Ot>ft.min?x.setValue([it[0]+Ot,it[1]+Ot]):x.setValue([ft.min,ft.min+pt]):Ot>0&&(Ot>0&&it[1]+Ot<ft.max?x.setValue([it[0]+Ot,it[1]+Ot]):x.setValue([ft.max-pt,ft.max])),C={x:N.x,y:N.y}}}),v.on("legend-track:dragend",function(N){C=null})},T.prototype.drawLabels=function(v){this.drawLabel("min",v),this.drawLabel("max",v)},T.prototype.drawLabel=function(v,x){var C=this.get("label"),N=C.style,X=C.align,tt=this.get(v),it=this.getLabelAlignAttrs(v,X),pt="label-"+v;this.addShape(x,{type:"text",id:this.getElementId(pt),name:"legend-label-"+v,attrs:Object(at.a)(Object(at.a)({x:0,y:0,text:tt},N),it)})},T.prototype.getLabelAlignAttrs=function(v,x){var C=this.isVertical(),N="center",X="middle";return C?(N="start",x!=="rail"?v==="min"?X="top":X="bottom":X="top"):x!=="rail"?(X="top",v==="min"?N="start":N="end"):(N="start",X="middle"),{textAlign:N,textBaseline:X}},T.prototype.getRailPath=function(v,x,C,N){var X=this.get("rail"),tt=X.size,it=X.defaultLength,pt=X.type,ft=this.isVertical(),Ot=it,wt=C,xt=N;wt||(wt=ft?tt:Ot),xt||(xt=ft?Ot:tt);var lt=[];return pt==="color"?(lt.push(["M",v,x]),lt.push(["L",v+wt,x]),lt.push(["L",v+wt,x+xt]),lt.push(["L",v,x+xt]),lt.push(["Z"])):(lt.push(["M",v+wt,x]),lt.push(["L",v+wt,x+xt]),lt.push(["L",v,x+xt]),lt.push(["Z"])),lt},T.prototype.drawRail=function(v){var x=this.get("rail"),C=x.style;this.addShape(v,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:Object(at.a)({path:this.getRailPath(0,0)},C)})},T.prototype.getTrackColor=function(v){var x=v.length;if(!x)return null;if(x===1)return v[0];var C;this.isVertical()?C="l(90)":C="l(0)";for(var N=0;N<x;N++){var X=N/(x-1);C+=" "+X+":"+v[N]}return C},T.prototype.getTrackPath=function(v){var x=this.getRailShape(v),C=x.attr("path");return Object(a.clone)(C)},T.prototype.getClipTrackAttrs=function(v){var x=this.getCurrentValue(),C=x[0],N=x[1],X=this.getRailBBox(v),tt=this.getPointByValue(C,v),it=this.getPointByValue(N,v),pt=this.isVertical(),ft,Ot,wt,xt;return pt?(ft=X.minX,Ot=tt.y,wt=X.width,xt=it.y-tt.y):(ft=tt.x,Ot=X.minY,wt=it.x-tt.x,xt=X.height),{x:ft,y:Ot,width:wt,height:xt}},T.prototype.getTrackAttrs=function(v){var x=this.get("track"),C=this.get("colors"),N=this.getTrackPath(v);return Object(a.mix)({path:N,fill:this.getTrackColor(C)},x.style)},T.prototype.resetTrackClip=function(v){var x=v||this.get("group"),C=this.getElementId("track"),N=x.findById(C),X=N.getClip(),tt=this.getClipTrackAttrs(v);X?X.attr(tt):N.setClip({type:"rect",attrs:tt})},T.prototype.resetTrack=function(v){var x=this.getElementId("track"),C=v.findById(x),N=this.getTrackAttrs(v);C?C.attr(N):this.addShape(v,{type:"path",id:x,draggable:this.get("slidable"),name:"legend-track",attrs:N})},T.prototype.getPointByValue=function(v,x){var C=this.getRange(),N=C.min,X=C.max,tt=(v-N)/(X-N),it=this.getRailBBox(x),pt=this.isVertical(),ft={x:0,y:0};return pt?(ft.x=it.minX+it.width/2,ft.y=Object(O.g)(it.minY,it.maxY,tt)):(ft.x=Object(O.g)(it.minX,it.maxX,tt),ft.y=it.minY+it.height/2),ft},T.prototype.getRailShape=function(v){var x=v||this.get("group");return x.findById(this.getElementId("rail"))},T.prototype.getRailBBox=function(v){var x=this.getRailShape(v),C=x.getBBox();return C},T.prototype.getRailCanvasBBox=function(){var v=this.get("group"),x=v.findById(this.getElementId("rail")),C=x.getCanvasBBox();return C},T.prototype.isVertical=function(){return this.get("layout")==="vertical"},T.prototype.getValueByCanvasPoint=function(v,x){var C=this.getRange(),N=C.min,X=C.max,tt=this.getRailCanvasBBox(),it=this.isVertical(),pt=this.get("step"),ft;it?ft=(x-tt.minY)/tt.height:ft=(v-tt.minX)/tt.width;var Ot=Object(O.g)(N,X,ft);if(pt){var wt=Math.round((Ot-N)/pt);Ot=N+wt*pt}return Ot>X&&(Ot=X),Ot<N&&(Ot=N),Ot},T.prototype.getCurrentValue=function(){var v=this.get("value");return v||(v=[this.get("min"),this.get("max")]),v},T.prototype.resetHandlers=function(v){var x=this.getCurrentValue(),C=x[0],N=x[1];this.resetHandler(v,"min",C),this.resetHandler(v,"max",N)},T.prototype.getHandlerPath=function(v,x){var C=this.isVertical(),N=[],X=v.size,tt=x.x,it=x.y,pt=X*n,ft=X/2,Ot=X/6;if(C){var wt=tt+pt*s;N.push(["M",tt,it]),N.push(["L",wt,it+ft]),N.push(["L",tt+pt,it+ft]),N.push(["L",tt+pt,it-ft]),N.push(["L",wt,it-ft]),N.push(["Z"]),N.push(["M",wt,it+Ot]),N.push(["L",tt+pt-2,it+Ot]),N.push(["M",wt,it-Ot]),N.push(["L",tt+pt-2,it-Ot])}else{var xt=it+pt*s;N.push(["M",tt,it]),N.push(["L",tt-ft,xt]),N.push(["L",tt-ft,it+pt]),N.push(["L",tt+ft,it+pt]),N.push(["L",tt+ft,xt]),N.push(["Z"]),N.push(["M",tt-Ot,xt]),N.push(["L",tt-Ot,it+pt-2]),N.push(["M",tt+Ot,xt]),N.push(["L",tt+Ot,it+pt-2])}return N},T.prototype.resetHandler=function(v,x,C){var N=this.getPointByValue(C,v),X=this.get("handler"),tt=this.getHandlerPath(X,N),it=this.getElementId("handler-"+x),pt=v.findById(it),ft=this.isVertical();pt?pt.attr("path",tt):this.addShape(v,{type:"path",name:"legend-handler-"+x,draggable:!0,id:it,attrs:Object(at.a)(Object(at.a)({path:tt},X.style),{cursor:ft?"ns-resize":"ew-resize"})})},T.prototype.fixedElements=function(v){var x=v.findById(this.getElementId("rail")),C=v.findById(this.getElementId("label-min")),N=v.findById(this.getElementId("label-max")),X=this.getDrawPoint();this.isVertical()?this.fixedVertail(C,N,x,X):this.fixedHorizontal(C,N,x,X)},T.prototype.fitRailLength=function(v,x,C,N){var X=this.isVertical(),tt=X?"height":"width",it=this.get("label"),pt=it.align,ft=it.spacing,Ot=this.get("max"+Object(a.upperFirst)(tt));if(Ot){var wt=pt==="rail"?C[tt]+v[tt]+x[tt]+ft*2:C[tt],xt=wt-Ot;xt>0&&this.changeRailLength(N,tt,C[tt]-xt)}},T.prototype.changeRailLength=function(v,x,C){var N=v.getBBox(),X;x==="height"?X=this.getRailPath(N.x,N.y,N.width,C):X=this.getRailPath(N.x,N.y,C,N.height),v.attr("path",X)},T.prototype.changeRailPosition=function(v,x,C){var N=v.getBBox(),X=this.getRailPath(x,C,N.width,N.height);v.attr("path",X)},T.prototype.fixedHorizontal=function(v,x,C,N){var X=this.get("label"),tt=X.align,it=X.spacing,pt=C.getBBox(),ft=v.getBBox(),Ot=x.getBBox(),wt=pt.height;this.fitRailLength(ft,Ot,pt,C),pt=C.getBBox(),tt==="rail"?(v.attr({x:N.x,y:N.y+wt/2}),this.changeRailPosition(C,N.x+ft.width+it,N.y),x.attr({x:N.x+ft.width+pt.width+it*2,y:N.y+wt/2})):tt==="top"?(v.attr({x:N.x,y:N.y}),x.attr({x:N.x+pt.width,y:N.y}),this.changeRailPosition(C,N.x,N.y+ft.height+it)):(this.changeRailPosition(C,N.x,N.y),v.attr({x:N.x,y:N.y+pt.height+it}),x.attr({x:N.x+pt.width,y:N.y+pt.height+it}))},T.prototype.fixedVertail=function(v,x,C,N){var X=this.get("label"),tt=X.align,it=X.spacing,pt=C.getBBox(),ft=v.getBBox(),Ot=x.getBBox();if(this.fitRailLength(ft,Ot,pt,C),pt=C.getBBox(),tt==="rail")v.attr({x:N.x,y:N.y}),this.changeRailPosition(C,N.x,N.y+ft.height+it),x.attr({x:N.x,y:N.y+ft.height+pt.height+it*2});else if(tt==="right")v.attr({x:N.x+pt.width+it,y:N.y}),this.changeRailPosition(C,N.x,N.y),x.attr({x:N.x+pt.width+it,y:N.y+pt.height});else{var wt=Math.max(ft.width,Ot.width);v.attr({x:N.x,y:N.y}),this.changeRailPosition(C,N.x+wt+it,N.y),x.attr({x:N.x,y:N.y+pt.height})}},T}(E),M=d},"5eLp":function(zn,Ut,z){"use strict";var at=function(){function a(A,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=A,this.name=A,this.originalEvent=e,this.timeStamp=e.timeStamp}return a.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},a.prototype.stopPropagation=function(){this.propagationStopped=!0},a.prototype.toString=function(){var A=this.type;return"[Event (type="+A+")]"},a.prototype.save=function(){},a.prototype.restore=function(){},a}();Ut.a=at},"5kt6":function(zn,Ut,z){"use strict";z.d(Ut,"f",function(){return at}),z.d(Ut,"e",function(){return a}),z.d(Ut,"d",function(){return A}),z.d(Ut,"a",function(){return e}),z.d(Ut,"b",function(){return r}),z.d(Ut,"g",function(){return p}),z.d(Ut,"c",function(){return m});var at="range",a="type",A="percent",e="#f0f0f0",r="indicator-view",p="range-view",m="range-mask-view"},"5nFI":function(zn,Ut,z){"use strict";var at=z("VTBJ"),a=z("cIOH"),A=z("6D9b"),e=z("cWXX"),r=z("rePB"),p=z("wx14"),m=z("q1tI"),O=z("TSYQ"),l=z.n(O),E=z("H84U"),j=z("/ezw"),y=z("B6l+"),n=z.n(y),s=function(q){var ct=q.value,ot=q.formatter,_=q.precision,P=q.decimalSeparator,Y=q.groupSeparator,k=Y===void 0?"":Y,h=q.prefixCls,g;if(typeof ot=="function")g=ot(ct);else{var F=String(ct),V=F.match(/^(-?)(\d*)(\.(\d+))?$/);if(!V||F==="-")g=F;else{var H=V[1],et=V[2]||"0",nt=V[4]||"";et=et.replace(/\B(?=(\d{3})+(?!\d))/g,k),typeof _=="number"&&(nt=n()(nt,_,"0").slice(0,_)),nt&&(nt="".concat(P).concat(nt)),g=[m.createElement("span",{key:"int",className:"".concat(h,"-content-value-int")},H,et),nt&&m.createElement("span",{key:"decimal",className:"".concat(h,"-content-value-decimal")},nt)]}}return m.createElement("span",{className:"".concat(h,"-content-value")},g)},d=s,M=function(q){var ct=q.prefixCls,ot=q.className,_=q.style,P=q.valueStyle,Y=q.value,k=Y===void 0?0:Y,h=q.title,g=q.valueRender,F=q.prefix,V=q.suffix,H=q.loading,et=q.direction,nt=q.onMouseEnter,St=q.onMouseLeave,dt=m.createElement(d,Object(p.a)({},q,{value:k})),gt=l()(ct,Object(r.a)({},"".concat(ct,"-rtl"),et==="rtl"),ot);return m.createElement("div",{className:gt,style:_,onMouseEnter:nt,onMouseLeave:St},h&&m.createElement("div",{className:"".concat(ct,"-title")},h),m.createElement(j.a,{paragraph:!1,loading:H},m.createElement("div",{style:P,className:"".concat(ct,"-content")},F&&m.createElement("span",{className:"".concat(ct,"-content-prefix")},F),g?g(dt):dt,V&&m.createElement("span",{className:"".concat(ct,"-content-suffix")},V))))};M.defaultProps={decimalSeparator:".",groupSeparator:",",loading:!1};var S=Object(E.c)({prefixCls:"statistic"})(M),T=S,v=z("1OyB"),x=z("vuIU"),C=z("Ji7U"),N=z("LK+K"),X=z("ODXe"),tt=z("QQZ/"),it=z.n(tt),pt=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function ft(At,q){var ct=At,ot=/\[[^\]]*]/g,_=(q.match(ot)||[]).map(function(h){return h.slice(1,-1)}),P=q.replace(ot,"[]"),Y=pt.reduce(function(h,g){var F=Object(X.a)(g,2),V=F[0],H=F[1];if(h.indexOf(V)!==-1){var et=Math.floor(ct/H);return ct-=et*H,h.replace(new RegExp("".concat(V,"+"),"g"),function(nt){var St=nt.length;return it()(et.toString(),St,"0")})}return h},P),k=0;return Y.replace(ot,function(){var h=_[k];return k+=1,h})}function Ot(At,q){var ct=q.format,ot=ct===void 0?"":ct,_=new Date(At).getTime(),P=Date.now(),Y=Math.max(_-P,0);return ft(Y,ot)}var wt=z("0n0R"),xt=1e3/30;function lt(At){return new Date(At).getTime()}var Vt=function(At){Object(C.a)(ct,At);var q=Object(N.a)(ct);function ct(){var ot;return Object(v.a)(this,ct),ot=q.apply(this,arguments),ot.syncTimer=function(){var _=ot.props.value,P=lt(_);P>=Date.now()?ot.startTimer():ot.stopTimer()},ot.startTimer=function(){ot.countdownId||(ot.countdownId=window.setInterval(function(){ot.forceUpdate()},xt))},ot.stopTimer=function(){var _=ot.props,P=_.onFinish,Y=_.value;if(ot.countdownId){clearInterval(ot.countdownId),ot.countdownId=void 0;var k=lt(Y);P&&k<Date.now()&&P()}},ot.formatCountdown=function(_,P){var Y=ot.props.format;return Ot(_,Object(p.a)(Object(p.a)({},P),{format:Y}))},ot.valueRender=function(_){return Object(wt.a)(_,{title:void 0})},ot}return Object(x.a)(ct,[{key:"componentDidMount",value:function(){this.syncTimer()}},{key:"componentDidUpdate",value:function(){this.syncTimer()}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"render",value:function(){return m.createElement(T,Object(p.a)({valueRender:this.valueRender},this.props,{formatter:this.formatCountdown}))}}]),ct}(m.Component);Vt.defaultProps={format:"HH:mm:ss"};var Lt=Vt;T.Countdown=Lt;var Et=T,J=z("nKUr"),ht=z("Ff2n"),vt=function(q){var ct=q.title,ot=ct===void 0?"title":ct,_=q.value,P=_===void 0?0:_,Y=q.precision,k=Y===void 0?2:Y,h=q.isNormal,g=h===void 0?!0:h,F=Object(ht.a)(q,["title","value","precision","isNormal"]),V=function(){return g?"#000":P>=0?"#389e0d":"#cf1322"};return Object(J.jsx)(Et,Object(at.a)({title:ot,value:P,precision:k,valueStyle:{color:V(),fontWeight:600},prefix:!g&&Number(P)>=0?"+":""},F))},bt=Ut.a=vt},"5z4m":function(zn,Ut,z){"use strict";var at=z("mrSG"),a=z("aFU3"),A=z("iTfj"),e=z("aN7R"),r=z("c0lT"),p=z("APlK"),m=z("IvmH"),O=z("c+wO"),l=function(E){Object(at.b)(j,E);function j(){return E!==null&&E.apply(this,arguments)||this}return j.prototype.isEntityGroup=function(){return!0},j.prototype.createDom=function(){var y=Object(O.b)("g");this.set("el",y);var n=this.getParent();if(n){var s=n.get("el");s||(s=n.createDom(),n.set("el",s)),s.appendChild(y)}return y},j.prototype.afterAttrsChange=function(y){E.prototype.afterAttrsChange.call(this,y);var n=this.get("canvas");if(n&&n.get("autoDraw")){var s=n.get("context");this.createPath(s,y)}},j.prototype.onCanvasChange=function(y){Object(r.b)(this,y)},j.prototype.getShapeBase=function(){return e},j.prototype.getGroupBase=function(){return j},j.prototype.draw=function(y){var n=this.getChildren(),s=this.get("el");this.get("destroyed")?s&&s.parentNode.removeChild(s):(s||this.createDom(),Object(p.a)(this,y),this.createPath(y),n.length&&Object(r.a)(y,n))},j.prototype.createPath=function(y,n){var s=this.attr(),d=this.get("el");Object(A.each)(n||s,function(M,S){m.b[S]&&d.setAttribute(m.b[S],M)}),Object(p.c)(this)},j}(a.AbstractGroup);Ut.a=l},"6D9b":function(zn,Ut,z){},"6JdA":function(zn,Ut,z){"use strict";z.d(Ut,"b",function(){return at}),z.d(Ut,"c",function(){return ht}),z.d(Ut,"d",function(){return vt}),z.d(Ut,"a",function(){return a});var at={};z.r(at),z.d(at,"create",function(){return e}),z.d(at,"fromMat4",function(){return r}),z.d(at,"clone",function(){return p}),z.d(at,"copy",function(){return m}),z.d(at,"fromValues",function(){return O}),z.d(at,"set",function(){return l}),z.d(at,"identity",function(){return E}),z.d(at,"transpose",function(){return j}),z.d(at,"invert",function(){return y}),z.d(at,"adjoint",function(){return n}),z.d(at,"determinant",function(){return s}),z.d(at,"multiply",function(){return d}),z.d(at,"translate",function(){return M}),z.d(at,"rotate",function(){return S}),z.d(at,"scale",function(){return T}),z.d(at,"fromTranslation",function(){return v}),z.d(at,"fromRotation",function(){return x}),z.d(at,"fromScaling",function(){return C}),z.d(at,"fromMat2d",function(){return N}),z.d(at,"fromQuat",function(){return X}),z.d(at,"normalFromMat4",function(){return tt}),z.d(at,"projection",function(){return it}),z.d(at,"str",function(){return pt}),z.d(at,"frob",function(){return ft}),z.d(at,"add",function(){return Ot}),z.d(at,"subtract",function(){return wt}),z.d(at,"multiplyScalar",function(){return xt}),z.d(at,"multiplyScalarAndAdd",function(){return lt}),z.d(at,"exactEquals",function(){return Vt}),z.d(at,"equals",function(){return Lt}),z.d(at,"mul",function(){return Et}),z.d(at,"sub",function(){return J});var a={};z.r(a),z.d(a,"leftTranslate",function(){return bt}),z.d(a,"leftRotate",function(){return At}),z.d(a,"leftScale",function(){return q}),z.d(a,"transform",function(){return ot}),z.d(a,"direction",function(){return _}),z.d(a,"angleTo",function(){return P}),z.d(a,"vertical",function(){return Y});var A=z("yU0y");function e(){var k=new A.a(9);return A.a!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[5]=0,k[6]=0,k[7]=0),k[0]=1,k[4]=1,k[8]=1,k}function r(k,h){return k[0]=h[0],k[1]=h[1],k[2]=h[2],k[3]=h[4],k[4]=h[5],k[5]=h[6],k[6]=h[8],k[7]=h[9],k[8]=h[10],k}function p(k){var h=new A.a(9);return h[0]=k[0],h[1]=k[1],h[2]=k[2],h[3]=k[3],h[4]=k[4],h[5]=k[5],h[6]=k[6],h[7]=k[7],h[8]=k[8],h}function m(k,h){return k[0]=h[0],k[1]=h[1],k[2]=h[2],k[3]=h[3],k[4]=h[4],k[5]=h[5],k[6]=h[6],k[7]=h[7],k[8]=h[8],k}function O(k,h,g,F,V,H,et,nt,St){var dt=new A.a(9);return dt[0]=k,dt[1]=h,dt[2]=g,dt[3]=F,dt[4]=V,dt[5]=H,dt[6]=et,dt[7]=nt,dt[8]=St,dt}function l(k,h,g,F,V,H,et,nt,St,dt){return k[0]=h,k[1]=g,k[2]=F,k[3]=V,k[4]=H,k[5]=et,k[6]=nt,k[7]=St,k[8]=dt,k}function E(k){return k[0]=1,k[1]=0,k[2]=0,k[3]=0,k[4]=1,k[5]=0,k[6]=0,k[7]=0,k[8]=1,k}function j(k,h){if(k===h){var g=h[1],F=h[2],V=h[5];k[1]=h[3],k[2]=h[6],k[3]=g,k[5]=h[7],k[6]=F,k[7]=V}else k[0]=h[0],k[1]=h[3],k[2]=h[6],k[3]=h[1],k[4]=h[4],k[5]=h[7],k[6]=h[2],k[7]=h[5],k[8]=h[8];return k}function y(k,h){var g=h[0],F=h[1],V=h[2],H=h[3],et=h[4],nt=h[5],St=h[6],dt=h[7],gt=h[8],yt=gt*et-nt*dt,Ct=-gt*H+nt*St,Pt=dt*H-et*St,Ft=g*yt+F*Ct+V*Pt;return Ft?(Ft=1/Ft,k[0]=yt*Ft,k[1]=(-gt*F+V*dt)*Ft,k[2]=(nt*F-V*et)*Ft,k[3]=Ct*Ft,k[4]=(gt*g-V*St)*Ft,k[5]=(-nt*g+V*H)*Ft,k[6]=Pt*Ft,k[7]=(-dt*g+F*St)*Ft,k[8]=(et*g-F*H)*Ft,k):null}function n(k,h){var g=h[0],F=h[1],V=h[2],H=h[3],et=h[4],nt=h[5],St=h[6],dt=h[7],gt=h[8];return k[0]=et*gt-nt*dt,k[1]=V*dt-F*gt,k[2]=F*nt-V*et,k[3]=nt*St-H*gt,k[4]=g*gt-V*St,k[5]=V*H-g*nt,k[6]=H*dt-et*St,k[7]=F*St-g*dt,k[8]=g*et-F*H,k}function s(k){var h=k[0],g=k[1],F=k[2],V=k[3],H=k[4],et=k[5],nt=k[6],St=k[7],dt=k[8];return h*(dt*H-et*St)+g*(-dt*V+et*nt)+F*(St*V-H*nt)}function d(k,h,g){var F=h[0],V=h[1],H=h[2],et=h[3],nt=h[4],St=h[5],dt=h[6],gt=h[7],yt=h[8],Ct=g[0],Pt=g[1],Ft=g[2],Tt=g[3],zt=g[4],Xt=g[5],re=g[6],de=g[7],ye=g[8];return k[0]=Ct*F+Pt*et+Ft*dt,k[1]=Ct*V+Pt*nt+Ft*gt,k[2]=Ct*H+Pt*St+Ft*yt,k[3]=Tt*F+zt*et+Xt*dt,k[4]=Tt*V+zt*nt+Xt*gt,k[5]=Tt*H+zt*St+Xt*yt,k[6]=re*F+de*et+ye*dt,k[7]=re*V+de*nt+ye*gt,k[8]=re*H+de*St+ye*yt,k}function M(k,h,g){var F=h[0],V=h[1],H=h[2],et=h[3],nt=h[4],St=h[5],dt=h[6],gt=h[7],yt=h[8],Ct=g[0],Pt=g[1];return k[0]=F,k[1]=V,k[2]=H,k[3]=et,k[4]=nt,k[5]=St,k[6]=Ct*F+Pt*et+dt,k[7]=Ct*V+Pt*nt+gt,k[8]=Ct*H+Pt*St+yt,k}function S(k,h,g){var F=h[0],V=h[1],H=h[2],et=h[3],nt=h[4],St=h[5],dt=h[6],gt=h[7],yt=h[8],Ct=Math.sin(g),Pt=Math.cos(g);return k[0]=Pt*F+Ct*et,k[1]=Pt*V+Ct*nt,k[2]=Pt*H+Ct*St,k[3]=Pt*et-Ct*F,k[4]=Pt*nt-Ct*V,k[5]=Pt*St-Ct*H,k[6]=dt,k[7]=gt,k[8]=yt,k}function T(k,h,g){var F=g[0],V=g[1];return k[0]=F*h[0],k[1]=F*h[1],k[2]=F*h[2],k[3]=V*h[3],k[4]=V*h[4],k[5]=V*h[5],k[6]=h[6],k[7]=h[7],k[8]=h[8],k}function v(k,h){return k[0]=1,k[1]=0,k[2]=0,k[3]=0,k[4]=1,k[5]=0,k[6]=h[0],k[7]=h[1],k[8]=1,k}function x(k,h){var g=Math.sin(h),F=Math.cos(h);return k[0]=F,k[1]=g,k[2]=0,k[3]=-g,k[4]=F,k[5]=0,k[6]=0,k[7]=0,k[8]=1,k}function C(k,h){return k[0]=h[0],k[1]=0,k[2]=0,k[3]=0,k[4]=h[1],k[5]=0,k[6]=0,k[7]=0,k[8]=1,k}function N(k,h){return k[0]=h[0],k[1]=h[1],k[2]=0,k[3]=h[2],k[4]=h[3],k[5]=0,k[6]=h[4],k[7]=h[5],k[8]=1,k}function X(k,h){var g=h[0],F=h[1],V=h[2],H=h[3],et=g+g,nt=F+F,St=V+V,dt=g*et,gt=F*et,yt=F*nt,Ct=V*et,Pt=V*nt,Ft=V*St,Tt=H*et,zt=H*nt,Xt=H*St;return k[0]=1-yt-Ft,k[3]=gt-Xt,k[6]=Ct+zt,k[1]=gt+Xt,k[4]=1-dt-Ft,k[7]=Pt-Tt,k[2]=Ct-zt,k[5]=Pt+Tt,k[8]=1-dt-yt,k}function tt(k,h){var g=h[0],F=h[1],V=h[2],H=h[3],et=h[4],nt=h[5],St=h[6],dt=h[7],gt=h[8],yt=h[9],Ct=h[10],Pt=h[11],Ft=h[12],Tt=h[13],zt=h[14],Xt=h[15],re=g*nt-F*et,de=g*St-V*et,ye=g*dt-H*et,we=F*St-V*nt,De=F*dt-H*nt,Ve=V*dt-H*St,pn=gt*Tt-yt*Ft,sn=gt*zt-Ct*Ft,In=gt*Xt-Pt*Ft,An=yt*zt-Ct*Tt,Rn=yt*Xt-Pt*Tt,Mn=Ct*Xt-Pt*zt,Cn=re*Mn-de*Rn+ye*An+we*In-De*sn+Ve*pn;return Cn?(Cn=1/Cn,k[0]=(nt*Mn-St*Rn+dt*An)*Cn,k[1]=(St*In-et*Mn-dt*sn)*Cn,k[2]=(et*Rn-nt*In+dt*pn)*Cn,k[3]=(V*Rn-F*Mn-H*An)*Cn,k[4]=(g*Mn-V*In+H*sn)*Cn,k[5]=(F*In-g*Rn-H*pn)*Cn,k[6]=(Tt*Ve-zt*De+Xt*we)*Cn,k[7]=(zt*ye-Ft*Ve-Xt*de)*Cn,k[8]=(Ft*De-Tt*ye+Xt*re)*Cn,k):null}function it(k,h,g){return k[0]=2/h,k[1]=0,k[2]=0,k[3]=0,k[4]=-2/g,k[5]=0,k[6]=-1,k[7]=1,k[8]=1,k}function pt(k){return"mat3("+k[0]+", "+k[1]+", "+k[2]+", "+k[3]+", "+k[4]+", "+k[5]+", "+k[6]+", "+k[7]+", "+k[8]+")"}function ft(k){return Math.hypot(k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],k[8])}function Ot(k,h,g){return k[0]=h[0]+g[0],k[1]=h[1]+g[1],k[2]=h[2]+g[2],k[3]=h[3]+g[3],k[4]=h[4]+g[4],k[5]=h[5]+g[5],k[6]=h[6]+g[6],k[7]=h[7]+g[7],k[8]=h[8]+g[8],k}function wt(k,h,g){return k[0]=h[0]-g[0],k[1]=h[1]-g[1],k[2]=h[2]-g[2],k[3]=h[3]-g[3],k[4]=h[4]-g[4],k[5]=h[5]-g[5],k[6]=h[6]-g[6],k[7]=h[7]-g[7],k[8]=h[8]-g[8],k}function xt(k,h,g){return k[0]=h[0]*g,k[1]=h[1]*g,k[2]=h[2]*g,k[3]=h[3]*g,k[4]=h[4]*g,k[5]=h[5]*g,k[6]=h[6]*g,k[7]=h[7]*g,k[8]=h[8]*g,k}function lt(k,h,g,F){return k[0]=h[0]+g[0]*F,k[1]=h[1]+g[1]*F,k[2]=h[2]+g[2]*F,k[3]=h[3]+g[3]*F,k[4]=h[4]+g[4]*F,k[5]=h[5]+g[5]*F,k[6]=h[6]+g[6]*F,k[7]=h[7]+g[7]*F,k[8]=h[8]+g[8]*F,k}function Vt(k,h){return k[0]===h[0]&&k[1]===h[1]&&k[2]===h[2]&&k[3]===h[3]&&k[4]===h[4]&&k[5]===h[5]&&k[6]===h[6]&&k[7]===h[7]&&k[8]===h[8]}function Lt(k,h){var g=k[0],F=k[1],V=k[2],H=k[3],et=k[4],nt=k[5],St=k[6],dt=k[7],gt=k[8],yt=h[0],Ct=h[1],Pt=h[2],Ft=h[3],Tt=h[4],zt=h[5],Xt=h[6],re=h[7],de=h[8];return Math.abs(g-yt)<=A.b*Math.max(1,Math.abs(g),Math.abs(yt))&&Math.abs(F-Ct)<=A.b*Math.max(1,Math.abs(F),Math.abs(Ct))&&Math.abs(V-Pt)<=A.b*Math.max(1,Math.abs(V),Math.abs(Pt))&&Math.abs(H-Ft)<=A.b*Math.max(1,Math.abs(H),Math.abs(Ft))&&Math.abs(et-Tt)<=A.b*Math.max(1,Math.abs(et),Math.abs(Tt))&&Math.abs(nt-zt)<=A.b*Math.max(1,Math.abs(nt),Math.abs(zt))&&Math.abs(St-Xt)<=A.b*Math.max(1,Math.abs(St),Math.abs(Xt))&&Math.abs(dt-re)<=A.b*Math.max(1,Math.abs(dt),Math.abs(re))&&Math.abs(gt-de)<=A.b*Math.max(1,Math.abs(gt),Math.abs(de))}var Et=d,J=wt,ht=z("ZxFD"),vt=z("n+fv");function bt(k,h,g){var F=[0,0,0,0,0,0,0,0,0];return at.fromTranslation(F,g),at.multiply(k,F,h)}function At(k,h,g){var F=[0,0,0,0,0,0,0,0,0];return at.fromRotation(F,g),at.multiply(k,F,h)}function q(k,h,g){var F=[0,0,0,0,0,0,0,0,0];return at.fromScaling(F,g),at.multiply(k,F,h)}function ct(k,h,g){return at.multiply(k,g,h)}function ot(k,h){for(var g=k?[].concat(k):[1,0,0,0,1,0,0,0,1],F=0,V=h.length;F<V;F++){var H=h[F];switch(H[0]){case"t":bt(g,g,[H[1],H[2]]);break;case"s":q(g,g,[H[1],H[2]]);break;case"r":At(g,g,H[1]);break;case"m":ct(g,g,H[1]);break;default:break}}return g}function _(k,h){return k[0]*h[1]-h[0]*k[1]}function P(k,h,g){var F=ht.angle(k,h),V=_(k,h)>=0;return g?V?Math.PI*2-F:F:V?F:Math.PI*2-F}function Y(k,h,g){return g?(k[0]=h[1],k[1]=-1*h[0]):(k[0]=-1*h[1],k[1]=h[0]),k}},"6UX8":function(zn,Ut,z){"use strict";var at=z("iTfj"),a=/rgba?\(([\s.,0-9]+)\)/,A=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,e=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,r=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,p=function(T){return/^[r,R,L,l]{1}[\s]*\(/.test(T)},m=function(){var T=document.createElement("i");return T.title="Web Colour Picker",T.style.display="none",document.body.appendChild(T),T},O=function(T,v,x,C){return T[C]+(v[C]-T[C])*x};function l(S){return"#"+j(S[0])+j(S[1])+j(S[2])}var E=function(T){return[parseInt(T.substr(1,2),16),parseInt(T.substr(3,2),16),parseInt(T.substr(5,2),16)]},j=function(T){var v=Math.round(T).toString(16);return v.length===1?"0"+v:v},y=function(T,v){var x=isNaN(Number(v))||v<0?0:v>1?1:Number(v),C=T.length-1,N=Math.floor(C*x),X=C*x-N,tt=T[N],it=N===C?tt:T[N+1];return l([O(tt,it,X,0),O(tt,it,X,1),O(tt,it,X,2)])},n,s=function(T){if(T[0]==="#"&&T.length===7)return T;n||(n=m()),n.style.color=T;var v=document.defaultView.getComputedStyle(n,"").getPropertyValue("color"),x=a.exec(v),C=x[1].split(/\s*,\s*/).map(function(N){return Number(N)});return v=l(C),v},d=function(T){var v=Object(at.isString)(T)?T.split("-"):T,x=Object(at.map)(v,function(C){return E(C.indexOf("#")===-1?s(C):C)});return function(C){return y(x,C)}},M=function(T){if(p(T)){var v,x=void 0;if(T[0]==="l"){var C=A.exec(T),N=+C[1]+90;x=C[2],v="linear-gradient("+N+"deg, "}else if(T[0]==="r"){v="radial-gradient(";var C=e.exec(T);x=C[4]}var X=x.match(r);return Object(at.each)(X,function(tt,it){var pt=tt.split(":");v+=pt[1]+" "+pt[0]*100+"%",it!==X.length-1&&(v+=", ")}),v+=")",v}return T};Ut.a={rgb2arr:E,gradient:d,toRGB:Object(at.memoize)(s),toCSSGradient:M}},"7+4w":function(zn,Ut,z){"use strict";var at=z("mrSG"),a=z("YuPD"),A=z("zJSt"),e=function(r){Object(at.b)(p,r);function p(m,O,l,E){var j=r.call(this,m,Object(a.b)({},E,O))||this;return j.type="g2-plot",j.defaultOptions=E,j.adaptor=l,j}return p.prototype.getDefaultOptions=function(){return this.defaultOptions},p.prototype.getSchemaAdaptor=function(){return this.adaptor},p}(A.a)},"711d":function(zn,Ut){function z(at){return function(a){return a==null?void 0:a[at]}}zn.exports=z},"7IPS":function(zn,Ut,z){"use strict";Ut.a=function(at,a,A,e,r){for(var p=at.children,m,O=-1,l=p.length,E=at.value&&(r-A)/at.value;++O<l;)m=p[O],m.x0=a,m.x1=e,m.y0=A,m.y1=A+=m.value*E}},"7ZbV":function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return N});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("iTfj"),r=z("w02o"),p=z("tKoa"),m="first-axes-view",O="second-axes-view",l="series-field-key";function E(X,tt,it,pt,ft){var Ot=[];tt.forEach(function(Et){pt.forEach(function(J){var ht,vt=(ht={},ht[X]=J[X],ht[it]=Et,ht[Et]=J[Et],ht);Ot.push(vt)})});var wt=Object.values(Object(e.groupBy)(Ot,it)),xt=wt[0],lt=xt===void 0?[]:xt,Vt=wt[1],Lt=Vt===void 0?[]:Vt;return ft?[lt.reverse(),Lt.reverse()]:[lt,Lt]}function j(X){return X!=="vertical"}function y(X,tt,it){var pt=tt[0],ft=tt[1],Ot=pt.autoPadding,wt=ft.autoPadding,xt=X.__axisPosition,lt=xt.layout,Vt=xt.position;if(j(lt)&&Vt==="top"&&(pt.autoPadding=it.instance(Ot.top,0,Ot.bottom,Ot.left),ft.autoPadding=it.instance(wt.top,Ot.left,wt.bottom,0)),j(lt)&&Vt==="bottom"&&(pt.autoPadding=it.instance(Ot.top,Ot.right/2+5,Ot.bottom,Ot.left),ft.autoPadding=it.instance(wt.top,wt.right,wt.bottom,Ot.right/2+5)),!j(lt)&&Vt==="bottom"){var Lt=Ot.left>=wt.left?Ot.left:wt.left;pt.autoPadding=it.instance(Ot.top,Ot.right,Ot.bottom/2+5,Lt),ft.autoPadding=it.instance(Ot.bottom/2+5,wt.right,wt.bottom,Lt)}if(!j(lt)&&Vt==="top"){var Lt=Ot.left>=wt.left?Ot.left:wt.left;pt.autoPadding=it.instance(Ot.top,Ot.right,0,Lt),ft.autoPadding=it.instance(0,wt.right,Ot.top,Lt)}}function n(X){var tt=X.chart,it=X.options,pt=it.data,ft=it.xField,Ot=it.yField,wt=it.color,xt=it.barStyle,lt=it.widthRatio,Vt=it.legend,Lt=it.layout,Et=E(ft,Ot,l,pt,j(Lt));Vt?tt.legend(l,Vt):Vt===!1&&tt.legend(!1);var J,ht,vt=Et[0],bt=Et[1];j(Lt)?(J=tt.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:m}),J.coordinate().transpose().reflect("x"),ht=tt.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:O}),ht.coordinate().transpose(),J.data(vt),ht.data(bt)):(J=tt.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:m}),ht=tt.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:O}),ht.coordinate().reflect("y").rotate(Math.PI*0),J.data(vt),ht.data(bt));var At=Object(A.b)({},X,{chart:J,options:{widthRatio:lt,xField:ft,yField:Ot[0],seriesField:l,interval:{color:wt,style:xt}}});Object(p.c)(At);var q=Object(A.b)({},X,{chart:ht,options:{xField:ft,yField:Ot[1],seriesField:l,widthRatio:lt,interval:{color:wt,style:xt}}});return Object(p.c)(q),X}function s(X){var tt,it,pt,ft=X.options,Ot=X.chart,wt=ft.xAxis,xt=ft.yAxis,lt=ft.xField,Vt=ft.yField,Lt=Object(A.d)(Ot,m),Et=Object(A.d)(Ot,O),J={};return Object(e.keys)((ft==null?void 0:ft.meta)||{}).map(function(ht){Object(e.get)(ft==null?void 0:ft.meta,[ht,"alias"])&&(J[ht]=ft.meta[ht].alias)}),Ot.scale((tt={},tt[l]={sync:!0,formatter:function(vt){return Object(e.get)(J,vt,vt)}},tt)),Object(r.f)((it={},it[lt]=wt,it[Vt[0]]=xt[Vt[0]],it))(Object(A.b)({},X,{chart:Lt})),Object(r.f)((pt={},pt[lt]=wt,pt[Vt[1]]=xt[Vt[1]],pt))(Object(A.b)({},X,{chart:Et})),X}function d(X){var tt=X.chart,it=X.options,pt=it.xAxis,ft=it.yAxis,Ot=it.xField,wt=it.yField,xt=it.layout,lt=Object(A.d)(tt,m),Vt=Object(A.d)(tt,O);return Vt.axis(Ot,!1),pt===!1?lt.axis(Ot,!1):lt.axis(Ot,Object(at.a)({position:j(xt)?"top":"bottom"},pt)),ft===!1?(lt.axis(wt[0],!1),Vt.axis(wt[1],!1)):(lt.axis(wt[0],ft[wt[0]]),Vt.axis(wt[1],ft[wt[1]])),tt.__axisPosition={position:lt.getOptions().axes[Ot].position,layout:xt},X}function M(X){var tt=X.chart;return Object(r.c)(Object(A.b)({},X,{chart:Object(A.d)(tt,m)})),Object(r.c)(Object(A.b)({},X,{chart:Object(A.d)(tt,O)})),X}function S(X){var tt=X.chart,it=X.options,pt=it.yField,ft=it.yAxis;return Object(r.e)(Object(A.b)({},X,{chart:Object(A.d)(tt,m),options:{yAxis:ft[pt[0]]}})),Object(r.e)(Object(A.b)({},X,{chart:Object(A.d)(tt,O),options:{yAxis:ft[pt[1]]}})),X}function T(X){var tt=X.chart;return Object(r.j)(Object(A.b)({},X,{chart:Object(A.d)(tt,m)})),Object(r.j)(Object(A.b)({},X,{chart:Object(A.d)(tt,O)})),X}function v(X){var tt=X.chart;return Object(r.a)(Object(A.b)({},X,{chart:Object(A.d)(tt,m)})),Object(r.a)(Object(A.b)({},X,{chart:Object(A.d)(tt,O)})),X}function x(X){var tt=X.chart,it=X.options,pt=it.label,ft=it.yField,Ot=Object(A.d)(tt,m),wt=Object(A.d)(tt,O),xt=Object(A.c)(Ot,"interval"),lt=Object(A.c)(wt,"interval");if(!pt)xt.label(!1),lt.label(!1);else{var Vt=pt.callback,Lt=Object(at.c)(pt,["callback"]);xt.label({fields:[ft[0]],callback:Vt,cfg:Object(A.o)(Lt)}),lt.label({fields:[ft[1]],callback:Vt,cfg:Object(A.o)(Lt)})}return X}function C(X){return Object(A.e)(n,s,d,S,T,x,r.k,M,v)(X)}var N=function(X){Object(at.b)(tt,X);function tt(){var it=X!==null&&X.apply(this,arguments)||this;return it.type="bidirectional-bar",it}return tt.prototype.getDefaultOptions=function(){return Object(A.b)({},X.prototype.getDefaultOptions.call(this),{syncViewPadding:y})},tt.prototype.getSchemaAdaptor=function(){return C},tt}(a.a)},"7cv3":function(zn,Ut,z){"use strict";z.d(Ut,"b",function(){return a}),z.d(Ut,"c",function(){return A}),z.d(Ut,"a",function(){return e});var at=z("iTfj"),a="x",A="y",e={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(p,m){return""+Object(at.get)(m,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}}},"7s0d":function(zn,Ut,z){"use strict";var at=z("FH2j");z.d(Ut,"getAdjust",function(){return at.getAdjust});var a=z("Qci9"),A=z("lOPJ"),e=z("KavR"),r=z("8FoI"),p=z("96lr"),m=z("WbAE"),O=z.n(m);Object(at.registerAdjust)("Dodge",A.a),Object(at.registerAdjust)("Jitter",e.a),Object(at.registerAdjust)("Stack",r.a),Object(at.registerAdjust)("Symmetric",p.a)},"8FoI":function(zn,Ut,z){"use strict";var at=z("AA7f"),a=z("iTfj"),A=z("Qci9"),e=a.Cache,r=function(p){Object(at.b)(m,p);function m(O){var l=p.call(this,O)||this,E=O.adjustNames,j=E===void 0?["y"]:E,y=O.height,n=y===void 0?NaN:y,s=O.size,d=s===void 0?10:s,M=O.reverseOrder,S=M===void 0?!1:M;return l.adjustNames=j,l.height=n,l.size=d,l.reverseOrder=S,l}return m.prototype.process=function(O){var l=this,E=l.yField,j=l.reverseOrder,y=E?this.processStack(O):this.processOneDimStack(O);return j?this.reverse(y):y},m.prototype.reverse=function(O){return O.slice(0).reverse()},m.prototype.processStack=function(O){var l=this,E=l.xField,j=l.yField,y=l.reverseOrder,n=y?this.reverse(O):O,s=new e,d=new e;return n.map(function(M){return M.map(function(S){var T,v=a.get(S,E,0),x=a.get(S,[j]),C=v.toString();if(x=a.isArray(x)?x[1]:x,!a.isNil(x)){var N=x>=0?s:d;N.has(C)||N.set(C,0);var X=N.get(C),tt=x+X;return N.set(C,tt),Object(at.a)(Object(at.a)({},S),(T={},T[j]=[X,tt],T))}return S})})},m.prototype.processOneDimStack=function(O){var l=this,E=this,j=E.xField,y=E.height,n=E.reverseOrder,s="y",d=n?this.reverse(O):O,M=new e;return d.map(function(S){return S.map(function(T){var v,x=l.size,C=T[j],N=x*2/y;M.has(C)||M.set(C,N/2);var X=M.get(C);return M.set(C,X+N),Object(at.a)(Object(at.a)({},T),(v={},v[s]=X,v))})})},m}(A.a);Ut.a=r},"8vsG":function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return E}),z.d(Ut,"b",function(){return Ft}),z.d(Ut,"c",function(){return m}),z.d(Ut,"d",function(){return Mn});var at={};z.r(at),z.d(at,"default",function(){return ot}),z.d(at,"assign",function(){return x}),z.d(at,"format",function(){return At}),z.d(at,"parse",function(){return q}),z.d(at,"defaultI18n",function(){return it}),z.d(at,"setGlobalDateI18n",function(){return ft}),z.d(at,"setGlobalDateMasks",function(){return bt});var a=z("iTfj"),A={};function e(oe){return A[oe]}function r(oe,Kt){A[oe]=Kt}var p=function(){function oe(Kt){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=Kt,this.initCfg(),this.init()}return oe.prototype.translate=function(Kt){return Kt},oe.prototype.change=function(Kt){Object(a.assign)(this.__cfg__,Kt),this.init()},oe.prototype.clone=function(){return this.constructor(this.__cfg__)},oe.prototype.getTicks=function(){var Kt=this;return Object(a.map)(this.ticks,function(te,Oe){return Object(a.isObject)(te)?te:{text:Kt.getText(te,Oe),tickValue:te,value:Kt.scale(te)}})},oe.prototype.getText=function(Kt,te){var Oe=this.formatter,Qe=Oe?Oe(Kt,te):Kt;return Object(a.isNil)(Qe)||!Object(a.isFunction)(Qe.toString)?"":Qe.toString()},oe.prototype.getConfig=function(Kt){return this.__cfg__[Kt]},oe.prototype.init=function(){Object(a.assign)(this,this.__cfg__),this.setDomain(),Object(a.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},oe.prototype.initCfg=function(){},oe.prototype.setDomain=function(){},oe.prototype.calculateTicks=function(){var Kt=this.tickMethod,te=[];if(Object(a.isString)(Kt)){var Oe=e(Kt);if(!Oe)throw new Error("There is no method to to calculate ticks!");te=Oe(this)}else Object(a.isFunction)(Kt)&&(te=Kt(this));return te},oe.prototype.rangeMin=function(){return Object(a.head)(this.range)},oe.prototype.rangeMax=function(){return Object(a.last)(this.range)},oe.prototype.calcPercent=function(Kt,te,Oe){return Object(a.isNumber)(Kt)?(Kt-te)/(Oe-te):NaN},oe.prototype.calcValue=function(Kt,te,Oe){return te+Kt*(Oe-te)},oe}(),m=p,O=z("mrSG"),l=function(oe){Object(O.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="cat",te.isCategory=!0,te.cache=new Map,te}return Kt.prototype.translate=function(te){if(this.cache.has(te))return this.cache.get(te);var Oe=Object(a.indexOf)(this.values,te);return Oe===-1&&(Oe=Object(a.isNumber)(te)?te:NaN),this.cache.set(te,Oe),Oe},Kt.prototype.scale=function(te){var Oe=this.translate(te),Qe=this.calcPercent(Oe,this.min,this.max);return this.calcValue(Qe,this.rangeMin(),this.rangeMax())},Kt.prototype.invert=function(te){var Oe=this.max-this.min,Qe=this.calcPercent(te,this.rangeMin(),this.rangeMax()),On=Math.round(Oe*Qe)+this.min;return On<this.min||On>this.max?NaN:this.values[On]},Kt.prototype.getText=function(te){for(var Oe=[],Qe=1;Qe<arguments.length;Qe++)Oe[Qe-1]=arguments[Qe];var On=te;return Object(a.isNumber)(te)&&!this.values.includes(te)&&(On=this.values[On]),oe.prototype.getText.apply(this,Object(O.d)([On],Oe))},Kt.prototype.initCfg=function(){this.tickMethod="cat"},Kt.prototype.setDomain=function(){if(Object(a.isNil)(this.getConfig("min"))&&(this.min=0),Object(a.isNil)(this.getConfig("max"))){var te=this.values.length;this.max=te>1?te-1:te}this.cache&&this.cache.clear()},Kt}(m),E=l,j=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,y="[1-9]\\d?",n="\\d\\d",s="\\d{3}",d="\\d{4}",M="[^\\s]+",S=/\[([^]*?)\]/gm;function T(oe,Kt){for(var te=[],Oe=0,Qe=oe.length;Oe<Qe;Oe++)te.push(oe[Oe].substr(0,Kt));return te}var v=function(Kt){return function(te,Oe){var Qe=Oe[Kt].map(function(Vn){return Vn.toLowerCase()}),On=Qe.indexOf(te.toLowerCase());return On>-1?On:null}};function x(oe){for(var Kt=[],te=1;te<arguments.length;te++)Kt[te-1]=arguments[te];for(var Oe=0,Qe=Kt;Oe<Qe.length;Oe++){var On=Qe[Oe];for(var Vn in On)oe[Vn]=On[Vn]}return oe}var C=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],N=["January","February","March","April","May","June","July","August","September","October","November","December"],X=T(N,3),tt=T(C,3),it={dayNamesShort:tt,dayNames:C,monthNamesShort:X,monthNames:N,amPm:["am","pm"],DoFn:function(Kt){return Kt+["th","st","nd","rd"][Kt%10>3?0:(Kt-Kt%10!=10?1:0)*Kt%10]}},pt=x({},it),ft=function(Kt){return pt=x(pt,Kt)},Ot=function(Kt){return Kt.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},wt=function(Kt,te){for(te===void 0&&(te=2),Kt=String(Kt);Kt.length<te;)Kt="0"+Kt;return Kt},xt={D:function(Kt){return String(Kt.getDate())},DD:function(Kt){return wt(Kt.getDate())},Do:function(Kt,te){return te.DoFn(Kt.getDate())},d:function(Kt){return String(Kt.getDay())},dd:function(Kt){return wt(Kt.getDay())},ddd:function(Kt,te){return te.dayNamesShort[Kt.getDay()]},dddd:function(Kt,te){return te.dayNames[Kt.getDay()]},M:function(Kt){return String(Kt.getMonth()+1)},MM:function(Kt){return wt(Kt.getMonth()+1)},MMM:function(Kt,te){return te.monthNamesShort[Kt.getMonth()]},MMMM:function(Kt,te){return te.monthNames[Kt.getMonth()]},YY:function(Kt){return wt(String(Kt.getFullYear()),4).substr(2)},YYYY:function(Kt){return wt(Kt.getFullYear(),4)},h:function(Kt){return String(Kt.getHours()%12||12)},hh:function(Kt){return wt(Kt.getHours()%12||12)},H:function(Kt){return String(Kt.getHours())},HH:function(Kt){return wt(Kt.getHours())},m:function(Kt){return String(Kt.getMinutes())},mm:function(Kt){return wt(Kt.getMinutes())},s:function(Kt){return String(Kt.getSeconds())},ss:function(Kt){return wt(Kt.getSeconds())},S:function(Kt){return String(Math.round(Kt.getMilliseconds()/100))},SS:function(Kt){return wt(Math.round(Kt.getMilliseconds()/10),2)},SSS:function(Kt){return wt(Kt.getMilliseconds(),3)},a:function(Kt,te){return Kt.getHours()<12?te.amPm[0]:te.amPm[1]},A:function(Kt,te){return Kt.getHours()<12?te.amPm[0].toUpperCase():te.amPm[1].toUpperCase()},ZZ:function(Kt){var te=Kt.getTimezoneOffset();return(te>0?"-":"+")+wt(Math.floor(Math.abs(te)/60)*100+Math.abs(te)%60,4)},Z:function(Kt){var te=Kt.getTimezoneOffset();return(te>0?"-":"+")+wt(Math.floor(Math.abs(te)/60),2)+":"+wt(Math.abs(te)%60,2)}},lt=function(Kt){return+Kt-1},Vt=[null,y],Lt=[null,M],Et=["isPm",M,function(oe,Kt){var te=oe.toLowerCase();return te===Kt.amPm[0]?0:te===Kt.amPm[1]?1:null}],J=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(oe){var Kt=(oe+"").match(/([+-]|\d\d)/gi);if(Kt){var te=+Kt[1]*60+parseInt(Kt[2],10);return Kt[0]==="+"?te:-te}return 0}],ht={D:["day",y],DD:["day",n],Do:["day",y+M,function(oe){return parseInt(oe,10)}],M:["month",y,lt],MM:["month",n,lt],YY:["year",n,function(oe){var Kt=new Date,te=+(""+Kt.getFullYear()).substr(0,2);return+(""+(+oe>68?te-1:te)+oe)}],h:["hour",y,void 0,"isPm"],hh:["hour",n,void 0,"isPm"],H:["hour",y],HH:["hour",n],m:["minute",y],mm:["minute",n],s:["second",y],ss:["second",n],YYYY:["year",d],S:["millisecond","\\d",function(oe){return+oe*100}],SS:["millisecond",n,function(oe){return+oe*10}],SSS:["millisecond",s],d:Vt,dd:Vt,ddd:Lt,dddd:Lt,MMM:["month",M,v("monthNamesShort")],MMMM:["month",M,v("monthNames")],a:Et,A:Et,ZZ:J,Z:J},vt={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},bt=function(Kt){return x(vt,Kt)},At=function(Kt,te,Oe){if(te===void 0&&(te=vt.default),Oe===void 0&&(Oe={}),typeof Kt=="number"&&(Kt=new Date(Kt)),Object.prototype.toString.call(Kt)!=="[object Date]"||isNaN(Kt.getTime()))throw new Error("Invalid Date pass to format");te=vt[te]||te;var Qe=[];te=te.replace(S,function(Vn,Hn){return Qe.push(Hn),"@@@"});var On=x(x({},pt),Oe);return te=te.replace(j,function(Vn){return xt[Vn](Kt,On)}),te.replace(/@@@/g,function(){return Qe.shift()})};function q(oe,Kt,te){if(te===void 0&&(te={}),typeof Kt!="string")throw new Error("Invalid format in fecha parse");if(Kt=vt[Kt]||Kt,oe.length>1e3)return null;var Oe=new Date,Qe={year:Oe.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},On=[],Vn=[],Hn=Kt.replace(S,function(Ir,Lr){return Vn.push(Ot(Lr)),"@@@"}),$e={},rn={};Hn=Ot(Hn).replace(j,function(Ir){var Lr=ht[Ir],Pr=Lr[0],Dr=Lr[1],ri=Lr[3];if($e[Pr])throw new Error("Invalid format. "+Pr+" specified twice in format");return $e[Pr]=!0,ri&&(rn[ri]=!0),On.push(Lr),"("+Dr+")"}),Object.keys(rn).forEach(function(Ir){if(!$e[Ir])throw new Error("Invalid format. "+Ir+" is required in specified format")}),Hn=Hn.replace(/@@@/g,function(){return Vn.shift()});var on=oe.match(new RegExp(Hn,"i"));if(!on)return null;for(var $n=x(x({},pt),te),vr=1;vr<on.length;vr++){var ar=On[vr-1],rr=ar[0],Fr=ar[2],Ar=Fr?Fr(on[vr],$n):+on[vr];if(Ar==null)return null;Qe[rr]=Ar}Qe.isPm===1&&Qe.hour!=null&&+Qe.hour!=12?Qe.hour=+Qe.hour+12:Qe.isPm===0&&+Qe.hour==12&&(Qe.hour=0);for(var wr=new Date(Qe.year,Qe.month,Qe.day,Qe.hour,Qe.minute,Qe.second,Qe.millisecond),xr=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],vr=0,Er=xr.length;vr<Er;vr++)if($e[xr[vr][0]]&&Qe[xr[vr][0]]!==wr[xr[vr][1]]())return null;return Qe.timezoneOffset==null?wr:new Date(Date.UTC(Qe.year,Qe.month,Qe.day,Qe.hour,Qe.minute-Qe.timezoneOffset,Qe.second,Qe.millisecond))}var ct={format:At,parse:q,defaultI18n:it,setGlobalDateI18n:ft,setGlobalDateMasks:bt},ot=ct,_=function(oe){return function(Kt,te,Oe,Qe){for(var On=Object(a.isNil)(Oe)?0:Oe,Vn=Object(a.isNil)(Qe)?Kt.length:Qe;On<Vn;){var Hn=On+Vn>>>1;oe(Kt[Hn])>te?Vn=Hn:On=Hn+1}return On}},P="format";function Y(oe,Kt){var te=at[P]||ot[P];return te(oe,Kt)}function k(oe){return Object(a.isString)(oe)&&(oe.indexOf("T")>0?oe=new Date(oe).getTime():oe=new Date(oe.replace(/-/gi,"/")).getTime()),Object(a.isDate)(oe)&&(oe=oe.getTime()),oe}var h=1e3,g=60*h,F=60*g,V=24*F,H=V*31,et=V*365,nt=[["HH:mm:ss",h],["HH:mm:ss",h*10],["HH:mm:ss",h*30],["HH:mm",g],["HH:mm",g*10],["HH:mm",g*30],["HH",F],["HH",F*6],["HH",F*12],["YYYY-MM-DD",V],["YYYY-MM-DD",V*4],["YYYY-WW",V*7],["YYYY-MM",H],["YYYY-MM",H*4],["YYYY-MM",H*6],["YYYY",V*380]];function St(oe,Kt,te){var Oe=(Kt-oe)/te,Qe=_(function(Vn){return Vn[1]})(nt,Oe)-1,On=nt[Qe];return Qe<0?On=nt[0]:Qe>=nt.length&&(On=Object(a.last)(nt)),On}var dt=function(oe){Object(O.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="timeCat",te}return Kt.prototype.translate=function(te){te=k(te);var Oe=this.values.indexOf(te);return Oe===-1&&(Object(a.isNumber)(te)&&te<this.values.length?Oe=te:Oe=NaN),Oe},Kt.prototype.getText=function(te,Oe){var Qe=this.translate(te);if(Qe>-1){var On=this.values[Qe],Vn=this.formatter;return On=Vn?Vn(On,Oe):Y(On,this.mask),On}return te},Kt.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},Kt.prototype.setDomain=function(){var te=this.values;Object(a.each)(te,function(Oe,Qe){te[Qe]=k(Oe)}),te.sort(function(Oe,Qe){return Oe-Qe}),oe.prototype.setDomain.call(this)},Kt}(E),gt=dt,yt=function(oe){Object(O.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.isContinuous=!0,te}return Kt.prototype.scale=function(te){if(Object(a.isNil)(te))return NaN;var Oe=this.rangeMin(),Qe=this.rangeMax(),On=this.max,Vn=this.min;if(On===Vn)return Oe;var Hn=this.getScalePercent(te);return Oe+Hn*(Qe-Oe)},Kt.prototype.init=function(){oe.prototype.init.call(this);var te=this.ticks,Oe=Object(a.head)(te),Qe=Object(a.last)(te);Oe<this.min&&(this.min=Oe),Qe>this.max&&(this.max=Qe),Object(a.isNil)(this.minLimit)||(this.min=Oe),Object(a.isNil)(this.maxLimit)||(this.max=Qe)},Kt.prototype.setDomain=function(){var te=Object(a.getRange)(this.values),Oe=te.min,Qe=te.max;Object(a.isNil)(this.min)&&(this.min=Oe),Object(a.isNil)(this.max)&&(this.max=Qe),this.min>this.max&&(this.min=Oe,this.max=Qe)},Kt.prototype.calculateTicks=function(){var te=this,Oe=oe.prototype.calculateTicks.call(this);return this.nice||(Oe=Object(a.filter)(Oe,function(Qe){return Qe>=te.min&&Qe<=te.max})),Oe},Kt.prototype.getScalePercent=function(te){var Oe=this.max,Qe=this.min;return(te-Qe)/(Oe-Qe)},Kt.prototype.getInvertPercent=function(te){return(te-this.rangeMin())/(this.rangeMax()-this.rangeMin())},Kt}(m),Ct=yt,Pt=function(oe){Object(O.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="linear",te.isLinear=!0,te}return Kt.prototype.invert=function(te){var Oe=this.getInvertPercent(te);return this.min+Oe*(this.max-this.min)},Kt.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},Kt}(Ct),Ft=Pt;function Tt(oe,Kt){var te=Math.E,Oe;return Kt>=0?Oe=Math.pow(te,Math.log(Kt)/oe):Oe=Math.pow(te,Math.log(-Kt)/oe)*-1,Oe}function zt(oe,Kt){return oe===1?1:Math.log(Kt)/Math.log(oe)}function Xt(oe,Kt,te){Object(a.isNil)(te)&&(te=Math.max.apply(null,oe));var Oe=te;return Object(a.each)(oe,function(Qe){Qe>0&&Qe<Oe&&(Oe=Qe)}),Oe===te&&(Oe=te/Kt),Oe>1&&(Oe=1),Oe}var re=function(oe){Object(O.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="log",te}return Kt.prototype.invert=function(te){var Oe=this.base,Qe=zt(Oe,this.max),On=this.rangeMin(),Vn=this.rangeMax()-On,Hn,$e=this.positiveMin;if($e){if(te===0)return 0;Hn=zt(Oe,$e/Oe);var rn=1/(Qe-Hn)*Vn;if(te<rn)return te/rn*$e}else Hn=zt(Oe,this.min);var on=(te-On)/Vn,$n=on*(Qe-Hn)+Hn;return Math.pow(Oe,$n)},Kt.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},Kt.prototype.setDomain=function(){oe.prototype.setDomain.call(this);var te=this.min;if(te<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");te===0&&(this.positiveMin=Xt(this.values,this.base,this.max))},Kt.prototype.getScalePercent=function(te){var Oe=this.max,Qe=this.min;if(Oe===Qe||te<=0)return 0;var On=this.base,Vn=this.positiveMin;Vn&&(Qe=Vn*1/On);var Hn;return te<Vn?Hn=te/Vn/(zt(On,Oe)-zt(On,Qe)):Hn=(zt(On,te)-zt(On,Qe))/(zt(On,Oe)-zt(On,Qe)),Hn},Kt}(Ct),de=re,ye=function(oe){Object(O.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="pow",te}return Kt.prototype.invert=function(te){var Oe=this.getInvertPercent(te),Qe=this.exponent,On=Tt(Qe,this.max),Vn=Tt(Qe,this.min),Hn=Oe*(On-Vn)+Vn,$e=Hn>=0?1:-1;return Math.pow(Hn,Qe)*$e},Kt.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},Kt.prototype.getScalePercent=function(te){var Oe=this.max,Qe=this.min;if(Oe===Qe)return 0;var On=this.exponent,Vn=(Tt(On,te)-Tt(On,Qe))/(Tt(On,Oe)-Tt(On,Qe));return Vn},Kt}(Ct),we=ye,De=function(oe){Object(O.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="time",te}return Kt.prototype.getText=function(te,Oe){var Qe=this.translate(te),On=this.formatter;return On?On(Qe,Oe):Y(Qe,this.mask)},Kt.prototype.scale=function(te){var Oe=te;return(Object(a.isString)(Oe)||Object(a.isDate)(Oe))&&(Oe=this.translate(Oe)),oe.prototype.scale.call(this,Oe)},Kt.prototype.translate=function(te){return k(te)},Kt.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},Kt.prototype.setDomain=function(){var te=this.values,Oe=this.getConfig("min"),Qe=this.getConfig("max");if((!Object(a.isNil)(Oe)||!Object(a.isNumber)(Oe))&&(this.min=this.translate(this.min)),(!Object(a.isNil)(Qe)||!Object(a.isNumber)(Qe))&&(this.max=this.translate(this.max)),te&&te.length){var On=[],Vn=Infinity,Hn=Vn,$e=0;Object(a.each)(te,function(rn){var on=k(rn);if(isNaN(on))throw new TypeError("Invalid Time: "+rn+" in time scale!");Vn>on?(Hn=Vn,Vn=on):Hn>on&&(Hn=on),$e<on&&($e=on),On.push(on)}),te.length>1&&(this.minTickInterval=Hn-Vn),Object(a.isNil)(Oe)&&(this.min=Vn),Object(a.isNil)(Qe)&&(this.max=$e)}},Kt}(Ft),Ve=De,pn=function(oe){Object(O.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="quantize",te}return Kt.prototype.invert=function(te){var Oe=this.ticks,Qe=Oe.length,On=this.getInvertPercent(te),Vn=Math.floor(On*(Qe-1));if(Vn>=Qe-1)return Object(a.last)(Oe);if(Vn<0)return Object(a.head)(Oe);var Hn=Oe[Vn],$e=Oe[Vn+1],rn=Vn/(Qe-1),on=(Vn+1)/(Qe-1);return Hn+(On-rn)/(on-rn)*($e-Hn)},Kt.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},Kt.prototype.calculateTicks=function(){var te=oe.prototype.calculateTicks.call(this);return this.nice||(Object(a.last)(te)!==this.max&&te.push(this.max),Object(a.head)(te)!==this.min&&te.unshift(this.min)),te},Kt.prototype.getScalePercent=function(te){var Oe=this.ticks;if(te<Object(a.head)(Oe))return 0;if(te>Object(a.last)(Oe))return 1;var Qe=0;return Object(a.each)(Oe,function(On,Vn){if(te>=On)Qe=Vn;else return!1}),Qe/(Oe.length-1)},Kt}(Ct),sn=pn,In=function(oe){Object(O.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="quantile",te}return Kt.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},Kt}(sn),An=In,Rn={};function Mn(oe){return Rn[oe]}function Cn(oe,Kt){if(Mn(oe))throw new Error("type '"+oe+"' existed.");Rn[oe]=Kt}var Gn=function(oe){Object(O.b)(Kt,oe);function Kt(){var te=oe!==null&&oe.apply(this,arguments)||this;return te.type="identity",te.isIdentity=!0,te}return Kt.prototype.calculateTicks=function(){return this.values},Kt.prototype.scale=function(te){return this.values[0]!==te&&Object(a.isNumber)(te)?te:this.range[0]},Kt.prototype.invert=function(te){var Oe=this.range;return te<Oe[0]||te>Oe[1]?NaN:this.values[0]},Kt}(m),Xn=Gn,tr=[1,5,2,2.5,4,3],or=[1,5,2,2.5,4,3,1.5,7,6,8,9],nr=Number.EPSILON*100;function er(oe,Kt){return(oe%Kt+Kt)%Kt}function Sr(oe,Kt,te,Oe,Qe,On){var Vn=Object(a.size)(Kt),Hn=Object(a.indexOf)(Kt,oe),$e=0,rn=er(Oe,On);return(rn<nr||On-rn<nr)&&Oe<=0&&Qe>=0&&($e=1),1-Hn/(Vn-1)-te+$e}function Vr(oe,Kt,te){var Oe=Object(a.size)(Kt),Qe=Object(a.indexOf)(Kt,oe),On=1;return 1-Qe/(Oe-1)-te+On}function ti(oe,Kt,te,Oe,Qe,On){var Vn=(oe-1)/(On-Qe),Hn=(Kt-1)/(Math.max(On,Oe)-Math.min(te,Qe));return 2-Math.max(Vn/Hn,Hn/Vn)}function hi(oe,Kt){return oe>=Kt?2-(oe-1)/(Kt-1):1}function Fi(oe,Kt,te,Oe){var Qe=Kt-oe;return 1-.5*(Math.pow(Kt-Oe,2)+Math.pow(oe-te,2))/Math.pow(.1*Qe,2)}function to(oe,Kt,te){var Oe=Kt-oe;if(te>Oe){var Qe=(te-Oe)/2;return 1-Math.pow(Qe,2)/Math.pow(.1*Oe,2)}return 1}function si(){return 1}function Ti(oe,Kt,te,Oe,Qe,On){if(te===void 0&&(te=5),Oe===void 0&&(Oe=!0),Qe===void 0&&(Qe=tr),On===void 0&&(On=[.25,.2,.5,.05]),typeof oe!="number"||typeof Kt!="number")return{min:0,max:0,ticks:[]};if(oe===Kt||te===1)return{min:oe,max:Kt,ticks:[oe]};for(var Vn={score:-2,lmin:0,lmax:0,lstep:0},Hn=1;Hn<Infinity;){for(var $e=0,rn=Qe;$e<rn.length;$e++){var on=rn[$e],$n=Vr(on,Qe,Hn);if(Number.isNaN($n))throw new Error("NaN");if(On[0]*$n+On[1]+On[2]+On[3]<Vn.score){Hn=Infinity;break}for(var vr=2;vr<Infinity;){var ar=hi(vr,te);if(On[0]*$n+On[1]+On[2]*ar+On[3]<Vn.score)break;for(var rr=(Kt-oe)/(vr+1)/Hn/on,Fr=Math.ceil(Math.log10(rr));Fr<Infinity;){var Ar=Hn*on*Math.pow(10,Fr),wr=to(oe,Kt,Ar*(vr-1));if(On[0]*$n+On[1]*wr+On[2]*ar+On[3]<Vn.score)break;var xr=Math.floor(Kt/Ar)*Hn-(vr-1)*Hn,Er=Math.ceil(oe/Ar)*Hn;if(xr>Er){Fr=Fr+1;continue}for(var Ir=xr;Ir<=Er;Ir=Ir+1){var Lr=Ir*(Ar/Hn),Pr=Lr+Ar*(vr-1),Dr=Ar,ri=Sr(on,Qe,Hn,Lr,Pr,Dr),vi=Fi(oe,Kt,Lr,Pr),ii=ti(vr,te,oe,Kt,Lr,Pr),Si=si(),zi=On[0]*ri+On[1]*vi+On[2]*ii+On[3]*Si;zi>Vn.score&&(!Oe||Lr<=oe&&Pr>=Kt)&&(Vn.lmin=Lr,Vn.lmax=Pr,Vn.lstep=Dr,Vn.score=zi)}Fr=Fr+1}vr=vr+1}}Hn=Hn+1}for(var Xi=Number.isInteger(Vn.lstep)?0:Math.ceil(Math.abs(Math.log10(Vn.lstep))),Bi=[],Di=Vn.lmin;Di<=Vn.lmax;Di+=Vn.lstep)Bi.push(Di);var pe=Xi?Object(a.map)(Bi,function(G){return Number.parseFloat(G.toFixed(Xi))}):Bi;return{min:Math.min(oe,Object(a.head)(pe)),max:Math.max(Kt,Object(a.last)(pe)),ticks:pe}}function Ui(oe){var Kt=oe.values,te=oe.tickInterval,Oe=oe.tickCount,Qe=Kt;if(Object(a.isNumber)(te))return Object(a.filter)(Qe,function(rn,on){return on%te==0});var On=oe.min,Vn=oe.max;if(Object(a.isNil)(On)&&(On=0),Object(a.isNil)(Vn)&&(Vn=Kt.length-1),Object(a.isNumber)(Oe)&&Oe<Vn-On){var Hn=Ti(On,Vn,Oe,!1,[1,2,5,3,4,7,6,8,9]).ticks,$e=Object(a.filter)(Hn,function(rn){return rn>=On&&rn<=Vn});return $e.map(function(rn){return Kt[rn]})}return Kt.slice(On,Vn+1)}function Li(oe){var Kt=oe.min,te=oe.max,Oe=oe.nice,Qe=oe.tickCount,On=new pr;return On.domain([Kt,te]),Oe&&On.nice(Qe),On.ticks(Qe)}var Vi=5,ro=Math.sqrt(50),jr=Math.sqrt(10),Ji=Math.sqrt(2),pr=function(){function oe(){this._domain=[0,1]}return oe.prototype.domain=function(Kt){return Kt?(this._domain=Array.from(Kt,Number),this):this._domain.slice()},oe.prototype.nice=function(Kt){var te,Oe;Kt===void 0&&(Kt=Vi);var Qe=this._domain.slice(),On=0,Vn=this._domain.length-1,Hn=this._domain[On],$e=this._domain[Vn],rn;return $e<Hn&&(te=[$e,Hn],Hn=te[0],$e=te[1],Oe=[Vn,On],On=Oe[0],Vn=Oe[1]),rn=Br(Hn,$e,Kt),rn>0?(Hn=Math.floor(Hn/rn)*rn,$e=Math.ceil($e/rn)*rn,rn=Br(Hn,$e,Kt)):rn<0&&(Hn=Math.ceil(Hn*rn)/rn,$e=Math.floor($e*rn)/rn,rn=Br(Hn,$e,Kt)),rn>0?(Qe[On]=Math.floor(Hn/rn)*rn,Qe[Vn]=Math.ceil($e/rn)*rn,this.domain(Qe)):rn<0&&(Qe[On]=Math.ceil(Hn*rn)/rn,Qe[Vn]=Math.floor($e*rn)/rn,this.domain(Qe)),this},oe.prototype.ticks=function(Kt){return Kt===void 0&&(Kt=Vi),Xr(this._domain[0],this._domain[this._domain.length-1],Kt||Vi)},oe}();function Xr(oe,Kt,te){var Oe,Qe=-1,On,Vn,Hn;if(Kt=+Kt,oe=+oe,te=+te,oe===Kt&&te>0)return[oe];if((Oe=Kt<oe)&&(On=oe,oe=Kt,Kt=On),(Hn=Br(oe,Kt,te))===0||!isFinite(Hn))return[];if(Hn>0)for(oe=Math.ceil(oe/Hn),Kt=Math.floor(Kt/Hn),Vn=new Array(On=Math.ceil(Kt-oe+1));++Qe<On;)Vn[Qe]=(oe+Qe)*Hn;else for(oe=Math.floor(oe*Hn),Kt=Math.ceil(Kt*Hn),Vn=new Array(On=Math.ceil(oe-Kt+1));++Qe<On;)Vn[Qe]=(oe-Qe)/Hn;return Oe&&Vn.reverse(),Vn}function Br(oe,Kt,te){var Oe=(Kt-oe)/Math.max(0,te),Qe=Math.floor(Math.log(Oe)/Math.LN10),On=Oe/Math.pow(10,Qe);return Qe>=0?(On>=ro?10:On>=jr?5:On>=Ji?2:1)*Math.pow(10,Qe):-Math.pow(10,-Qe)/(On>=ro?10:On>=jr?5:On>=Ji?2:1)}function Nr(oe,Kt,te){var Oe;return te==="ceil"?Oe=Math.ceil(oe/Kt):te==="floor"?Oe=Math.floor(oe/Kt):Oe=Math.round(oe/Kt),Oe*Kt}function Yr(oe,Kt,te){var Oe=Nr(oe,te,"floor"),Qe=Nr(Kt,te,"ceil");Oe=Object(a.fixedBase)(Oe,te),Qe=Object(a.fixedBase)(Qe,te);for(var On=[],Vn=Oe;Vn<=Qe;Vn=Vn+te){var Hn=Object(a.fixedBase)(Vn,te);On.push(Hn)}return{min:Oe,max:Qe,ticks:On}}function Kr(oe,Kt,te){var Oe,Qe=oe.minLimit,On=oe.maxLimit,Vn=oe.min,Hn=oe.max,$e=oe.tickCount,rn=$e===void 0?5:$e,on=Object(a.isNil)(Qe)?Object(a.isNil)(Kt)?Vn:Kt:Qe,$n=Object(a.isNil)(On)?Object(a.isNil)(te)?Hn:te:On;if(on>$n&&(Oe=[on,$n],$n=Oe[0],on=Oe[1]),rn<=2)return[on,$n];for(var vr=($n-on)/(rn-1),ar=[],rr=0;rr<rn;rr++)ar.push(on+vr*rr);return ar}function ni(oe){var Kt=oe.min,te=oe.max,Oe=oe.tickInterval,Qe=oe.minLimit,On=oe.maxLimit,Vn=Li(oe);return!Object(a.isNil)(Qe)||!Object(a.isNil)(On)?Kr(oe,Object(a.head)(Vn),Object(a.last)(Vn)):Oe?Yr(Kt,te,Oe).ticks:Vn}function fi(oe){var Kt=oe.min,te=oe.max,Oe=oe.tickCount,Qe=oe.nice,On=oe.tickInterval,Vn=oe.minLimit,Hn=oe.maxLimit,$e=Ti(Kt,te,Oe,Qe).ticks;return!Object(a.isNil)(Vn)||!Object(a.isNil)(Hn)?Kr(oe,Object(a.head)($e),Object(a.last)($e)):On?Yr(Kt,te,On).ticks:$e}function $r(oe){var Kt=oe.base,te=oe.tickCount,Oe=oe.min,Qe=oe.max,On=oe.values,Vn,Hn=zt(Kt,Qe);if(Oe>0)Vn=Math.floor(zt(Kt,Oe));else{var $e=Xt(On,Kt,Qe);Vn=Math.floor(zt(Kt,$e))}for(var rn=Hn-Vn,on=Math.ceil(rn/te),$n=[],vr=Vn;vr<Hn+on;vr=vr+on)$n.push(Math.pow(Kt,vr));return Oe<=0&&$n.unshift(0),$n}function ci(oe,Kt,te){te===void 0&&(te=5);var Oe={max:0,min:0,ticks:[]};if(oe===Kt)return{max:Kt,min:oe,ticks:[oe]};var Qe=1.5,On=.5+1.5*Qe,Vn=Kt-oe,Hn=Vn/te,$e=Math.pow(10,Math.floor(Math.log10(Hn))),rn=$e<1?Math.ceil(Math.abs(Math.log10($e))):0,on=$e;2*$e-Hn<Qe*(Hn-on)&&(on=2*$e,5*$e-Hn<On*(Hn-on)&&(on=5*$e,10*$e-Hn<Qe*(Hn-on)&&(on=10*$e)));var $n=Math.ceil(Kt/on),vr=Math.floor(oe/on);Oe.max=Math.max($n*on,Kt),Oe.min=Math.min(vr*on,oe);for(var ar=Number.parseFloat((vr*on).toFixed(rn));ar<Kt;)Oe.ticks.push(ar),ar+=on,rn&&(ar=Number.parseFloat(ar.toFixed(rn)));return Oe.ticks.push(ar),Oe}function Qr(oe){var Kt=oe.exponent,te=oe.tickCount,Oe=Math.ceil(Tt(Kt,oe.max)),Qe=Math.floor(Tt(Kt,oe.min)),On=ci(Qe,Oe,te).ticks;return On.map(function(Vn){var Hn=Vn>=0?1:-1;return Math.pow(Vn,Kt)*Hn})}function gi(oe,Kt){var te=oe.length*Kt;return Kt===1?oe[oe.length-1]:Kt===0?oe[0]:te%1!=0?oe[Math.ceil(te)-1]:oe.length%2==0?(oe[te-1]+oe[te])/2:oe[te]}function Oi(oe){var Kt=oe.tickCount,te=oe.values;if(!te||!te.length)return[];for(var Oe=te.slice().sort(function(Hn,$e){return Hn-$e}),Qe=[],On=0;On<Kt;On++){var Vn=On/(Kt-1);Qe.push(gi(Oe,Vn))}return Qe}function bi(oe){var Kt=oe.min,te=oe.max,Oe=oe.tickCount,Qe=oe.tickInterval,On=oe.minLimit,Vn=oe.maxLimit,Hn=ci(Kt,te,Oe).ticks;return!Object(a.isNil)(On)||!Object(a.isNil)(Vn)?Kr(oe,Object(a.head)(Hn),Object(a.last)(Hn)):Qe?Yr(Kt,te,Qe).ticks:Hn}function _i(oe){var Kt=oe.min,te=oe.max,Oe=oe.minTickInterval,Qe=oe.tickInterval,On=oe.tickCount;if(Qe)On=Math.ceil((te-Kt)/Qe);else{Qe=St(Kt,te,On)[1];var Vn=(te-Kt)/Qe,Hn=Vn/On;Hn>1&&(Qe=Qe*Math.ceil(Hn)),Oe&&Qe<Oe&&(Qe=Oe)}for(var $e=[],rn=Kt;rn<te+Qe;rn+=Qe)$e.push(rn);return $e}function Qi(oe){var Kt=Ui(oe),te=Object(a.last)(oe.values);return te!==Object(a.last)(Kt)&&Kt.push(te),Kt}function io(oe){return new Date(oe).getFullYear()}function Wi(oe){return new Date(oe,0,1).getTime()}function Zi(oe){return new Date(oe).getMonth()}function Pi(oe,Kt){var te=io(oe),Oe=io(Kt),Qe=Zi(oe),On=Zi(Kt);return(Oe-te)*12+(On-Qe)%12}function no(oe,Kt){return new Date(oe,Kt,1).getTime()}function Mo(oe,Kt){return Math.ceil((Kt-oe)/V)}function ao(oe,Kt){return Math.ceil((Kt-oe)/F)}function uo(oe,Kt){return Math.ceil((Kt-oe)/(60*1e3))}function xo(oe){var Kt=oe.min,te=oe.max,Oe=oe.minTickInterval,Qe=oe.tickCount,On=oe.tickInterval,Vn=[];On||(On=(te-Kt)/Qe,Oe&&On<Oe&&(On=Oe));var Hn=io(Kt);if(On>et)for(var $e=io(te),rn=Math.ceil(On/et),on=Hn;on<=$e+rn;on=on+rn)Vn.push(Wi(on));else if(On>H)for(var $n=Math.ceil(On/H),vr=Zi(Kt),ar=Pi(Kt,te),on=0;on<=ar+$n;on=on+$n)Vn.push(no(Hn,on+vr));else if(On>V)for(var rr=new Date(Kt),Fr=rr.getFullYear(),Ar=rr.getMonth(),wr=rr.getDate(),xr=Math.ceil(On/V),Er=Mo(Kt,te),on=0;on<Er+xr;on=on+xr)Vn.push(new Date(Fr,Ar,wr+on).getTime());else if(On>F)for(var rr=new Date(Kt),Fr=rr.getFullYear(),Ar=rr.getMonth(),xr=rr.getDate(),Ir=rr.getHours(),Lr=Math.ceil(On/F),Pr=ao(Kt,te),on=0;on<=Pr+Lr;on=on+Lr)Vn.push(new Date(Fr,Ar,xr,Ir+on).getTime());else if(On>g)for(var Dr=uo(Kt,te),ri=Math.ceil(On/g),on=0;on<=Dr+ri;on=on+ri)Vn.push(Kt+on*g);else{var vi=On;vi<h&&(vi=h);for(var ii=Math.floor(Kt/h)*h,Si=Math.ceil((te-Kt)/h),zi=Math.ceil(vi/h),on=0;on<Si+zi;on=on+zi)Vn.push(ii+on*h)}return Vn.length>=512&&console.warn("Notice: current ticks length("+Vn.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+On+") is too small, increase the value to solve the problem!"),Vn}r("cat",Ui),r("time-cat",Qi),r("wilkinson-extended",fi),r("r-pretty",bi),r("time",_i),r("time-pretty",xo),r("log",$r),r("pow",Qr),r("quantile",Oi),r("d3-linear",ni),Cn("cat",E),Cn("category",E),Cn("identity",Xn),Cn("linear",Ft),Cn("log",de),Cn("pow",we),Cn("time",Ve),Cn("timeCat",gt),Cn("quantize",sn),Cn("quantile",An)},"96lr":function(zn,Ut,z){"use strict";var at=z("AA7f"),a=z("iTfj"),A=z("Qci9"),e=function(r){Object(at.b)(p,r);function p(){return r!==null&&r.apply(this,arguments)||this}return p.prototype.process=function(m){var O=a.flatten(m),l=this,E=l.xField,j=l.yField,y=this.getXValuesMaxMap(O),n=Math.max.apply(Math,Object.keys(y).map(function(s){return y[s]}));return a.map(m,function(s){return a.map(s,function(d){var M,S,T=d[j],v=d[E];if(a.isArray(T)){var x=(n-y[v])/2;return Object(at.a)(Object(at.a)({},d),(M={},M[j]=a.map(T,function(N){return x+N}),M))}var C=(n-T)/2;return Object(at.a)(Object(at.a)({},d),(S={},S[j]=[C,T+C],S))})})},p.prototype.getXValuesMaxMap=function(m){var O=this,l=this,E=l.xField,j=l.yField,y=a.groupBy(m,function(n){return n[E]});return a.mapValues(y,function(n){return O.getDimMaxValue(n,j)})},p.prototype.getDimMaxValue=function(m,O){var l=a.map(m,function(j){return a.get(j,O,[])}),E=a.flatten(l);return Math.max.apply(Math,E)},p}(A.a);Ut.a=e},"9eUa":function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return m}),z.d(Ut,"d",function(){return O}),z.d(Ut,"b",function(){return l}),z.d(Ut,"c",function(){return j}),z.d(Ut,"e",function(){return s}),z.d(Ut,"h",function(){return d}),z.d(Ut,"f",function(){return S}),z.d(Ut,"g",function(){return T});var at=z("iTfj"),a=z("r0DC"),A=z("nCnq"),e=z("cyZq"),r=z("nycV"),p={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function m(v,x){var C=x.attr();for(var N in C){var X=C[N],tt=p[N]?p[N]:N;tt==="matrix"&&X?v.transform(X[0],X[1],X[3],X[4],X[6],X[7]):tt==="lineDash"&&v.setLineDash?Object(at.isArray)(X)&&v.setLineDash(X):(tt==="strokeStyle"||tt==="fillStyle"?X=Object(a.b)(v,x,X):tt==="globalAlpha"&&(X=X*v.globalAlpha),v[tt]=X)}}function O(v,x,C){for(var N=0;N<x.length;N++){var X=x[N];X.cfg.visible?X.draw(v,C):X.skipDraw()}}function l(v,x,C){var N=v.get("refreshElements");Object(at.each)(N,function(X){if(X!==v)for(var tt=X.cfg.parent;tt&&tt!==v&&!tt.cfg.refresh;)tt.cfg.refresh=!0,tt=tt.cfg.parent}),N[0]===v?y(x,C):E(x,C)}function E(v,x){for(var C=0;C<v.length;C++){var N=v[C];if(N.cfg.visible)if(N.cfg.hasChanged)N.cfg.refresh=!0,N.isGroup()&&y(N.cfg.children,x);else if(N.cfg.refresh)N.isGroup()&&E(N.cfg.children,x);else{var X=n(N,x);N.cfg.refresh=X,X&&N.isGroup()&&E(N.cfg.children,x)}}}function j(v){for(var x=0;x<v.length;x++){var C=v[x];C.cfg.hasChanged=!1,C.isGroup()&&!C.destroyed&&j(C.cfg.children)}}function y(v,x){for(var C=0;C<v.length;C++){var N=v[C];N.cfg.refresh=!0,N.isGroup()&&y(N.get("children"),x)}}function n(v,x){var C=v.cfg.cacheCanvasBBox,N=v.cfg.isInView&&C&&Object(e.f)(C,x);return N}function s(v,x,C,N){var X=C.path,tt=C.startArrow,it=C.endArrow;if(!!X){var pt=[0,0],ft=[0,0],Ot={dx:0,dy:0};x.beginPath();for(var wt=0;wt<X.length;wt++){var xt=X[wt],lt=xt[0];if(wt===0&&tt&&tt.d){var Vt=v.getStartTangent();Ot=r.c(Vt[0][0],Vt[0][1],Vt[1][0],Vt[1][1],tt.d)}else if(wt===X.length-2&&X[wt+1][0]==="Z"&&it&&it.d){var Lt=X[wt+1];if(Lt[0]==="Z"){var Vt=v.getEndTangent();Ot=r.c(Vt[0][0],Vt[0][1],Vt[1][0],Vt[1][1],it.d)}}else if(wt===X.length-1&&it&&it.d&&X[0]!=="Z"){var Vt=v.getEndTangent();Ot=r.c(Vt[0][0],Vt[0][1],Vt[1][0],Vt[1][1],it.d)}var Et=Ot.dx,J=Ot.dy;switch(lt){case"M":x.moveTo(xt[1]-Et,xt[2]-J),ft=[xt[1],xt[2]];break;case"L":x.lineTo(xt[1]-Et,xt[2]-J);break;case"Q":x.quadraticCurveTo(xt[1],xt[2],xt[3]-Et,xt[4]-J);break;case"C":x.bezierCurveTo(xt[1],xt[2],xt[3],xt[4],xt[5]-Et,xt[6]-J);break;case"A":{var ht=void 0;N?(ht=N[wt],ht||(ht=Object(A.a)(pt,xt),N[wt]=ht)):ht=Object(A.a)(pt,xt);var vt=ht.cx,bt=ht.cy,At=ht.rx,q=ht.ry,ct=ht.startAngle,ot=ht.endAngle,_=ht.xRotation,P=ht.sweepFlag;if(x.ellipse)x.ellipse(vt,bt,At,q,_,ct,ot,1-P);else{var Y=At>q?At:q,k=At>q?1:At/q,h=At>q?q/At:1;x.translate(vt,bt),x.rotate(_),x.scale(k,h),x.arc(0,0,Y,ct,ot,1-P),x.scale(1/k,1/h),x.rotate(-_),x.translate(-vt,-bt)}break}case"Z":x.closePath();break;default:break}if(lt==="Z")pt=ft;else{var g=xt.length;pt=[xt[g-2],xt[g-1]]}}}}function d(v,x){var C=v.get("canvas");C&&(x==="remove"&&(v._cacheCanvasBBox=v.get("cacheCanvasBBox")),v.get("hasChanged")||(v.set("hasChanged",!0),v.cfg.parent&&v.cfg.parent.get("hasChanged")||(C.refreshElement(v,x,C),C.get("autoDraw")&&C.draw())))}function M(v){var x;if(v.destroyed)x=v._cacheCanvasBBox;else{var C=v.get("cacheCanvasBBox"),N=C&&!!(C.width&&C.height),X=v.getCanvasBBox(),tt=X&&!!(X.width&&X.height);N&&tt?x=Object(e.l)(C,X):N?x=C:tt&&(x=X)}return x}function S(v){if(!v.length)return null;var x=[],C=[],N=[],X=[];return Object(at.each)(v,function(tt){var it=M(tt);it&&(x.push(it.minX),C.push(it.minY),N.push(it.maxX),X.push(it.maxY))}),{minX:Math.min.apply(null,x),minY:Math.min.apply(null,C),maxX:Math.max.apply(null,N),maxY:Math.max.apply(null,X)}}function T(v,x){return!v||!x||!Object(e.f)(v,x)?null:{minX:Math.max(v.minX,x.minX),minY:Math.max(v.minY,x.minY),maxX:Math.min(v.maxX,x.maxX),maxY:Math.min(v.maxY,x.maxY)}}},AA7f:function(zn,Ut,z){"use strict";z.d(Ut,"b",function(){return a}),z.d(Ut,"a",function(){return A});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var at=function(pt,ft){return at=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ot,wt){Ot.__proto__=wt}||function(Ot,wt){for(var xt in wt)wt.hasOwnProperty(xt)&&(Ot[xt]=wt[xt])},at(pt,ft)};function a(it,pt){at(it,pt);function ft(){this.constructor=it}it.prototype=pt===null?Object.create(pt):(ft.prototype=pt.prototype,new ft)}var A=function(){return A=Object.assign||function(ft){for(var Ot,wt=1,xt=arguments.length;wt<xt;wt++){Ot=arguments[wt];for(var lt in Ot)Object.prototype.hasOwnProperty.call(Ot,lt)&&(ft[lt]=Ot[lt])}return ft},A.apply(this,arguments)};function e(it,pt){var ft={};for(var Ot in it)Object.prototype.hasOwnProperty.call(it,Ot)&&pt.indexOf(Ot)<0&&(ft[Ot]=it[Ot]);if(it!=null&&typeof Object.getOwnPropertySymbols=="function")for(var wt=0,Ot=Object.getOwnPropertySymbols(it);wt<Ot.length;wt++)pt.indexOf(Ot[wt])<0&&Object.prototype.propertyIsEnumerable.call(it,Ot[wt])&&(ft[Ot[wt]]=it[Ot[wt]]);return ft}function r(it,pt,ft,Ot){var wt=arguments.length,xt=wt<3?pt:Ot===null?Ot=Object.getOwnPropertyDescriptor(pt,ft):Ot,lt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")xt=Reflect.decorate(it,pt,ft,Ot);else for(var Vt=it.length-1;Vt>=0;Vt--)(lt=it[Vt])&&(xt=(wt<3?lt(xt):wt>3?lt(pt,ft,xt):lt(pt,ft))||xt);return wt>3&&xt&&Object.defineProperty(pt,ft,xt),xt}function p(it,pt){return function(ft,Ot){pt(ft,Ot,it)}}function m(it,pt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(it,pt)}function O(it,pt,ft,Ot){function wt(xt){return xt instanceof ft?xt:new ft(function(lt){lt(xt)})}return new(ft||(ft=Promise))(function(xt,lt){function Vt(J){try{Et(Ot.next(J))}catch(ht){lt(ht)}}function Lt(J){try{Et(Ot.throw(J))}catch(ht){lt(ht)}}function Et(J){J.done?xt(J.value):wt(J.value).then(Vt,Lt)}Et((Ot=Ot.apply(it,pt||[])).next())})}function l(it,pt){var ft={label:0,sent:function(){if(xt[0]&1)throw xt[1];return xt[1]},trys:[],ops:[]},Ot,wt,xt,lt;return lt={next:Vt(0),throw:Vt(1),return:Vt(2)},typeof Symbol=="function"&&(lt[Symbol.iterator]=function(){return this}),lt;function Vt(Et){return function(J){return Lt([Et,J])}}function Lt(Et){if(Ot)throw new TypeError("Generator is already executing.");for(;ft;)try{if(Ot=1,wt&&(xt=Et[0]&2?wt.return:Et[0]?wt.throw||((xt=wt.return)&&xt.call(wt),0):wt.next)&&!(xt=xt.call(wt,Et[1])).done)return xt;switch(wt=0,xt&&(Et=[Et[0]&2,xt.value]),Et[0]){case 0:case 1:xt=Et;break;case 4:return ft.label++,{value:Et[1],done:!1};case 5:ft.label++,wt=Et[1],Et=[0];continue;case 7:Et=ft.ops.pop(),ft.trys.pop();continue;default:if(xt=ft.trys,!(xt=xt.length>0&&xt[xt.length-1])&&(Et[0]===6||Et[0]===2)){ft=0;continue}if(Et[0]===3&&(!xt||Et[1]>xt[0]&&Et[1]<xt[3])){ft.label=Et[1];break}if(Et[0]===6&&ft.label<xt[1]){ft.label=xt[1],xt=Et;break}if(xt&&ft.label<xt[2]){ft.label=xt[2],ft.ops.push(Et);break}xt[2]&&ft.ops.pop(),ft.trys.pop();continue}Et=pt.call(it,ft)}catch(J){Et=[6,J],wt=0}finally{Ot=xt=0}if(Et[0]&5)throw Et[1];return{value:Et[0]?Et[1]:void 0,done:!0}}}function E(it,pt,ft,Ot){Ot===void 0&&(Ot=ft),it[Ot]=pt[ft]}function j(it,pt){for(var ft in it)ft!=="default"&&!pt.hasOwnProperty(ft)&&(pt[ft]=it[ft])}function y(it){var pt=typeof Symbol=="function"&&Symbol.iterator,ft=pt&&it[pt],Ot=0;if(ft)return ft.call(it);if(it&&typeof it.length=="number")return{next:function(){return it&&Ot>=it.length&&(it=void 0),{value:it&&it[Ot++],done:!it}}};throw new TypeError(pt?"Object is not iterable.":"Symbol.iterator is not defined.")}function n(it,pt){var ft=typeof Symbol=="function"&&it[Symbol.iterator];if(!ft)return it;var Ot=ft.call(it),wt,xt=[],lt;try{for(;(pt===void 0||pt-- >0)&&!(wt=Ot.next()).done;)xt.push(wt.value)}catch(Vt){lt={error:Vt}}finally{try{wt&&!wt.done&&(ft=Ot.return)&&ft.call(Ot)}finally{if(lt)throw lt.error}}return xt}function s(){for(var it=[],pt=0;pt<arguments.length;pt++)it=it.concat(n(arguments[pt]));return it}function d(){for(var it=0,pt=0,ft=arguments.length;pt<ft;pt++)it+=arguments[pt].length;for(var Ot=Array(it),wt=0,pt=0;pt<ft;pt++)for(var xt=arguments[pt],lt=0,Vt=xt.length;lt<Vt;lt++,wt++)Ot[wt]=xt[lt];return Ot}function M(it){return this instanceof M?(this.v=it,this):new M(it)}function S(it,pt,ft){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ot=ft.apply(it,pt||[]),wt,xt=[];return wt={},lt("next"),lt("throw"),lt("return"),wt[Symbol.asyncIterator]=function(){return this},wt;function lt(vt){Ot[vt]&&(wt[vt]=function(bt){return new Promise(function(At,q){xt.push([vt,bt,At,q])>1||Vt(vt,bt)})})}function Vt(vt,bt){try{Lt(Ot[vt](bt))}catch(At){ht(xt[0][3],At)}}function Lt(vt){vt.value instanceof M?Promise.resolve(vt.value.v).then(Et,J):ht(xt[0][2],vt)}function Et(vt){Vt("next",vt)}function J(vt){Vt("throw",vt)}function ht(vt,bt){vt(bt),xt.shift(),xt.length&&Vt(xt[0][0],xt[0][1])}}function T(it){var pt,ft;return pt={},Ot("next"),Ot("throw",function(wt){throw wt}),Ot("return"),pt[Symbol.iterator]=function(){return this},pt;function Ot(wt,xt){pt[wt]=it[wt]?function(lt){return(ft=!ft)?{value:M(it[wt](lt)),done:wt==="return"}:xt?xt(lt):lt}:xt}}function v(it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pt=it[Symbol.asyncIterator],ft;return pt?pt.call(it):(it=typeof y=="function"?y(it):it[Symbol.iterator](),ft={},Ot("next"),Ot("throw"),Ot("return"),ft[Symbol.asyncIterator]=function(){return this},ft);function Ot(xt){ft[xt]=it[xt]&&function(lt){return new Promise(function(Vt,Lt){lt=it[xt](lt),wt(Vt,Lt,lt.done,lt.value)})}}function wt(xt,lt,Vt,Lt){Promise.resolve(Lt).then(function(Et){xt({value:Et,done:Vt})},lt)}}function x(it,pt){return Object.defineProperty?Object.defineProperty(it,"raw",{value:pt}):it.raw=pt,it}function C(it){if(it&&it.__esModule)return it;var pt={};if(it!=null)for(var ft in it)Object.hasOwnProperty.call(it,ft)&&(pt[ft]=it[ft]);return pt.default=it,pt}function N(it){return it&&it.__esModule?it:{default:it}}function X(it,pt){if(!pt.has(it))throw new TypeError("attempted to get private field on non-instance");return pt.get(it)}function tt(it,pt,ft){if(!pt.has(it))throw new TypeError("attempted to set private field on non-instance");return pt.set(it,ft),ft}},APlK:function(zn,Ut,z){"use strict";z.d(Ut,"b",function(){return a}),z.d(Ut,"c",function(){return A}),z.d(Ut,"a",function(){return e});var at=z("c+wO");function a(r,p){var m=r.cfg.el,O=r.attr(),l={dx:O.shadowOffsetX,dy:O.shadowOffsetY,blur:O.shadowBlur,color:O.shadowColor};if(!l.dx&&!l.dy&&!l.blur&&!l.color)m.removeAttribute("filter");else{var E=p.find("filter",l);E||(E=p.addShadow(l)),m.setAttribute("filter","url(#"+E+")")}}function A(r){var p=r.attr().matrix;if(p){for(var m=r.cfg.el,O=[],l=0;l<9;l+=3)O.push(p[l]+","+p[l+1]);O=O.join(","),O.indexOf("NaN")===-1?m.setAttribute("transform","matrix("+O+")"):console.warn("invalid matrix:",p)}}function e(r,p){var m=r.getClip(),O=r.get("el");if(!m)O.removeAttribute("clip-path");else if(m&&!O.hasAttribute("clip-path")){Object(at.a)(m),m.createPath(p);var l=p.addClip(m);O.setAttribute("clip-path","url(#"+l+")")}}},B0vJ:function(zn,Ut){},"B2d+":function(zn,Ut){},B3DA:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return A});var at=z("iTfj"),a=z("F/eT");function A(e){var r=Object(at.clamp)(Object(a.a)(e)?e:0,0,1);return[{type:"current",percent:r},{type:"target",percent:1-r}]}},"B6l+":function(zn,Ut,z){var at=z("Sq3C"),a=z("Z1HP"),A=z("Sxd8"),e=z("dt0z");function r(p,m,O){p=e(p),m=A(m);var l=m?a(p):0;return m&&l<m?p+at(m-l,O):p}zn.exports=r},BYeR:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return s});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("iTfj"),r=z("w02o"),p=z("tKoa");function m(d){var M=d.data,S=d.xField,T=d.measureField,v=d.rangeField,x=d.targetField,C=d.layout,N=[],X=[];M.forEach(function(pt,ft){var Ot;pt[v].sort(function(wt,xt){return wt-xt}),pt[v].forEach(function(wt,xt){var lt,Vt=xt===0?wt:pt[v][xt]-pt[v][xt-1];N.push((lt={rKey:v+"_"+xt},lt[S]=S?pt[S]:String(ft),lt[v]=Vt,lt))}),pt[T].forEach(function(wt,xt){var lt;N.push((lt={mKey:pt[T].length>1?T+"_"+xt:""+T},lt[S]=S?pt[S]:String(ft),lt[T]=wt,lt))}),N.push((Ot={tKey:""+x},Ot[S]=S?pt[S]:String(ft),Ot[x]=pt[x],Ot)),X.push(pt[v],pt[T],pt[x])});var tt=Math.min.apply(Math,X.flat(Infinity)),it=Math.max.apply(Math,X.flat(Infinity));return tt=tt>0?0:tt,C==="vertical"&&N.reverse(),{min:tt,max:it,ds:N}}function O(d){var M=d.chart,S=d.options,T=S.bulletStyle,v=S.targetField,x=S.rangeField,C=S.measureField,N=S.xField,X=S.color,tt=S.layout,it=S.size,pt=S.label,ft=m(S),Ot=ft.min,wt=ft.max,xt=ft.ds;M.data(xt);var lt=Object(A.b)({},d,{options:{xField:N,yField:x,seriesField:"rKey",isStack:!0,label:Object(e.get)(pt,"range"),interval:{color:Object(e.get)(X,"range"),style:Object(e.get)(T,"range"),size:Object(e.get)(it,"range")}}});Object(p.c)(lt),M.geometries[0].tooltip(!1);var Vt=Object(A.b)({},d,{options:{xField:N,yField:C,seriesField:"mKey",isStack:!0,label:Object(e.get)(pt,"measure"),interval:{color:Object(e.get)(X,"measure"),style:Object(e.get)(T,"measure"),size:Object(e.get)(it,"measure")}}});Object(p.c)(Vt);var Lt=Object(A.b)({},d,{options:{xField:N,yField:v,seriesField:"tKey",label:Object(e.get)(pt,"target"),point:{color:Object(e.get)(X,"target"),style:Object(e.get)(T,"target"),size:Object(e.get)(it,"target")/2,shape:tt==="horizontal"?"line":"hyphen"}}});return Object(p.e)(Lt),tt==="horizontal"&&M.coordinate().transpose(),Object(at.a)(Object(at.a)({},d),{ext:{data:{min:Ot,max:wt}}})}function l(d){var M,S,T=d.options,v=d.ext,x=T.xAxis,C=T.yAxis,N=T.targetField,X=T.rangeField,tt=T.measureField,it=T.xField,pt=v.data;return Object(A.e)(Object(r.f)((M={},M[it]=x,M[tt]=C,M),(S={},S[tt]={min:pt==null?void 0:pt.min,max:pt==null?void 0:pt.max},S[N]={sync:""+tt},S[X]={sync:""+tt},S)))(d)}function E(d){var M=d.chart,S=d.options,T=S.xAxis,v=S.yAxis,x=S.xField,C=S.measureField,N=S.rangeField,X=S.targetField;return M.axis(""+N,!1),M.axis(""+X,!1),T===!1?M.axis(""+x,!1):M.axis(""+x,T),v===!1?M.axis(""+C,!1):M.axis(""+C,v),d}function j(d){var M=d.chart,S=d.options,T=S.legend;return M.removeInteraction("legend-filter"),M.legend(T),M.legend("rKey",!1),M.legend("mKey",!1),M.legend("tKey",!1),d}function y(d){var M=d.chart,S=d.options,T=S.label,v=S.measureField,x=S.targetField,C=S.rangeField,N=M.geometries,X=N[0],tt=N[1],it=N[2];return Object(e.get)(T,"range")?X.label(""+C,Object(at.a)({layout:[{type:"limit-in-plot"}]},Object(A.o)(T.range))):X.label(!1),Object(e.get)(T,"measure")?tt.label(""+v,Object(at.a)({layout:[{type:"limit-in-plot"}]},Object(A.o)(T.measure))):tt.label(!1),Object(e.get)(T,"target")?it.label(""+x,Object(at.a)({layout:[{type:"limit-in-plot"}]},Object(A.o)(T.target))):it.label(!1),d}function n(d){Object(A.e)(O,l,E,j,r.j,y,r.k,r.c,r.a)(d)}var s=function(d){Object(at.b)(M,d);function M(){var S=d!==null&&d.apply(this,arguments)||this;return S.type="bullet",S}return M.prototype.changeData=function(S){this.updateOption({data:S});var T=m(this.options),v=T.min,x=T.max,C=T.ds;l({options:this.options,ext:{data:{min:v,max:x}},chart:this.chart}),this.chart.changeData(C)},M.prototype.getSchemaAdaptor=function(){return n},M.prototype.getDefaultOptions=function(){return Object(A.b)({},d.prototype.getDefaultOptions.call(this),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}})},M}(a.a)},BgvD:function(zn,Ut,z){"use strict";z.d(Ut,"b",function(){return E}),z.d(Ut,"a",function(){return n});var at=z("iTfj"),a="\u2026";function A(s){for(var d=0,M=0;M<s.length;M++)d+=e(s,M);return d}function e(s,d){return s.charCodeAt(d)>0&&s.charCodeAt(d)<128?1:2}function r(s,d,M){M===void 0&&(M="tail");var S=s.length,T="";if(M==="tail"){for(var v=0,x=0;v<d;){var C=e(s,x);if(v+C<=d)T+=s[x],v+=e(s,x),x++;else break}T+=a}else if(M==="head"){for(var v=0,x=S-1;v<d;){var C=e(s,x);if(v+C<=d)T+=s[x],v+=e(s,x),x--;else break}T=a+T}else{for(var N="",X="",v=0,tt=0,it=S-1;v<d;){var pt=e(s,tt),ft=!1;pt+v<=d&&(N+=s[tt],tt++,v+=pt,ft=!0);var Ot=e(s,it);if(Ot+v<=d&&(X=s[it]+X,v+=Ot,it--,ft=!0),!ft)break}T=N+a+X}return T}var p="\u2026",m=2,O=400;function l(s){for(var d=s.map(function(N){var X=N.attr("text");return Object(at.isNil)(X)?"":""+X}),M=0,S=0,T=0;T<d.length;T+=1){for(var v=0,x=0;x<=d[T].length;x+=1){var C=d[T].charCodeAt(x);C>=19968&&C<=40869?v+=2:v+=1}v>M&&(M=v,S=T)}return s[S].getBBox().width}function E(s){if(s.length>O)return l(s);var d=0;return Object(at.each)(s,function(M){var S=M.getBBox(),T=S.width;d<T&&(d=T)}),d}function j(s,d){var M=d.getCanvasBBox();return s?M.width:M.height}function y(s,d){return s.getBBox().width<d}function n(s,d,M,S){S===void 0&&(S="tail");var T=d.attr("text"),v=j(s,d),x=A(T),C=!1;if(M<v){var N=Math.floor(M/v*x)-m,X=void 0;N>=0?X=r(T,N,S):X=p,X&&(d.attr("text",X),C=!0)}return C?d.set("tip",T):d.set("tip",null),C}},BwSJ:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return d});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("iTfj");function r(M,S){var T=Math.floor(M/S);return[S*T,S*(T+1)]}function p(M){return Math.ceil(Math.log(M.length)/Math.LN2)+1}function m(M,S,T,v,x){var C=Object(e.clone)(M);Object(e.sortBy)(C,S);var N=Object(e.valuesOfKey)(C,S),X=Object(e.getRange)(N),tt=X.max-X.min,it=T;if(!T&&v&&(it=tt/v),!T&&!v){var pt=p(N);it=tt/pt}var ft={},Ot=Object(e.groupBy)(C,x);Object(e.isEmpty)(Ot)?Object(e.each)(C,function(xt){var lt=xt[S],Vt=r(lt,it),Lt=Vt[0]+"-"+Vt[1];Object(e.hasKey)(ft,Lt)||(ft[Lt]={range:Vt,count:0}),ft[Lt].count+=1}):Object.keys(Ot).forEach(function(xt){Object(e.each)(Ot[xt],function(lt){var Vt=lt[S],Lt=r(Vt,it),Et=Lt[0]+"-"+Lt[1],J=Et+"-"+xt;Object(e.hasKey)(ft,J)||(ft[J]={range:Lt,count:0},ft[J][x]=xt),ft[J].count+=1})});var wt=[];return Object(e.each)(ft,function(xt){wt.push(xt)}),wt}var O=z("w02o"),l=z("tKoa");function E(M){var S=M.chart,T=M.options,v=T.data,x=T.binField,C=T.binNumber,N=T.binWidth,X=T.color,tt=T.stackField,it=T.legend,pt=T.columnStyle,ft=m(v,x,N,C,tt);S.data(ft);var Ot=Object(A.b)({},M,{options:{xField:"range",yField:"count",seriesField:tt,isStack:!0,interval:{color:X,style:pt}}});return Object(l.c)(Ot),it&&tt&&S.legend(tt,it),M}function j(M){var S=M.options,T=S.xAxis,v=S.yAxis;return Object(A.e)(Object(O.f)({range:T,count:v}))(M)}function y(M){var S=M.chart,T=M.options,v=T.xAxis,x=T.yAxis;return v===!1?S.axis("range",!1):S.axis("range",v),x===!1?S.axis("count",!1):S.axis("count",x),M}function n(M){var S=M.chart,T=M.options,v=T.label,x=Object(A.c)(S,"interval");if(!v)x.label(!1);else{var C=v.callback,N=Object(at.c)(v,["callback"]);x.label({fields:["count"],callback:C,cfg:Object(A.o)(N)})}return M}function s(M){return Object(A.e)(E,j,y,O.j,n,O.k,O.c,O.a)(M)}var d=function(M){Object(at.b)(S,M);function S(){var T=M!==null&&M.apply(this,arguments)||this;return T.type="histogram",T}return S.prototype.changeData=function(T){this.updateOption({data:T});var v=this.options,x=v.binField,C=v.binNumber,N=v.binWidth,X=v.stackField;this.chart.changeData(m(T,x,N,C,X))},S.prototype.getDefaultOptions=function(){return Object(A.b)({},M.prototype.getDefaultOptions.call(this),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]})},S.prototype.getSchemaAdaptor=function(){return s},S}(a.a)},CFYs:function(zn,Ut,z){"use strict";var at=z("rePB"),a=z("wx14"),A=z("1OyB"),e=z("vuIU"),r=z("JX7q"),p=z("Ji7U"),m=z("LK+K"),O=z("q1tI"),l=z("TSYQ"),E=z.n(l),j=z("bT9E"),y=z("4i/N"),n=z("bRQS"),s=z("jO45"),d=z("jN4g"),M=z("H84U"),S=z("CWQg"),T=z("uaoM"),v=z("AJpP");function x(H){return!H||H<0?0:H>100?100:H}function C(H){var et=H.success,nt=H.successPercent,St=nt;return et&&"progress"in et&&(Object(T.a)(!1,"Progress","`success.progress` is deprecated. Please use `success.percent` instead."),St=et.progress),et&&"percent"in et&&(St=et.percent),St}var N=function(H,et){var nt={};for(var St in H)Object.prototype.hasOwnProperty.call(H,St)&&et.indexOf(St)<0&&(nt[St]=H[St]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var dt=0,St=Object.getOwnPropertySymbols(H);dt<St.length;dt++)et.indexOf(St[dt])<0&&Object.prototype.propertyIsEnumerable.call(H,St[dt])&&(nt[St[dt]]=H[St[dt]]);return nt},X=function(et){var nt=[];return Object.keys(et).forEach(function(St){var dt=parseFloat(St.replace(/%/g,""));isNaN(dt)||nt.push({key:dt,value:et[St]})}),nt=nt.sort(function(St,dt){return St.key-dt.key}),nt.map(function(St){var dt=St.key,gt=St.value;return"".concat(gt," ").concat(dt,"%")}).join(", ")},tt=function(et,nt){var St=et.from,dt=St===void 0?v.presetPrimaryColors.blue:St,gt=et.to,yt=gt===void 0?v.presetPrimaryColors.blue:gt,Ct=et.direction,Pt=Ct===void 0?nt==="rtl"?"to left":"to right":Ct,Ft=N(et,["from","to","direction"]);if(Object.keys(Ft).length!==0){var Tt=X(Ft);return{backgroundImage:"linear-gradient(".concat(Pt,", ").concat(Tt,")")}}return{backgroundImage:"linear-gradient(".concat(Pt,", ").concat(dt,", ").concat(yt,")")}},it=function(et){var nt=et.prefixCls,St=et.direction,dt=et.percent,gt=et.strokeWidth,yt=et.size,Ct=et.strokeColor,Pt=et.strokeLinecap,Ft=et.children,Tt=et.trailColor,zt=et.success,Xt=Ct&&typeof Ct!="string"?tt(Ct,St):{background:Ct},re=Tt?{backgroundColor:Tt}:void 0,de=Object(a.a)({width:"".concat(x(dt),"%"),height:gt||(yt==="small"?6:8),borderRadius:Pt==="square"?0:""},Xt),ye=C(et),we={width:"".concat(x(ye),"%"),height:gt||(yt==="small"?6:8),borderRadius:Pt==="square"?0:"",backgroundColor:zt==null?void 0:zt.strokeColor},De=ye!==void 0?O.createElement("div",{className:"".concat(nt,"-success-bg"),style:we}):null;return O.createElement(O.Fragment,null,O.createElement("div",{className:"".concat(nt,"-outer")},O.createElement("div",{className:"".concat(nt,"-inner"),style:re},O.createElement("div",{className:"".concat(nt,"-bg"),style:de}),De)),Ft)},pt=it,ft=z("ODXe"),Ot=z("Ff2n"),wt={className:"",percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,style:{},trailColor:"#D9D9D9",trailWidth:1},xt=function(et){var nt=et.map(function(){return Object(O.useRef)()}),St=Object(O.useRef)(null);return Object(O.useEffect)(function(){var dt=Date.now(),gt=!1;Object.keys(nt).forEach(function(yt){var Ct=nt[yt].current;if(!!Ct){gt=!0;var Pt=Ct.style;Pt.transitionDuration=".3s, .3s, .3s, .06s",St.current&&dt-St.current<100&&(Pt.transitionDuration="0s, 0s")}}),gt&&(St.current=Date.now())}),[nt]},lt=function(et){var nt=et.className,St=et.percent,dt=et.prefixCls,gt=et.strokeColor,yt=et.strokeLinecap,Ct=et.strokeWidth,Pt=et.style,Ft=et.trailColor,Tt=et.trailWidth,zt=et.transition,Xt=Object(Ot.a)(et,["className","percent","prefixCls","strokeColor","strokeLinecap","strokeWidth","style","trailColor","trailWidth","transition"]);delete Xt.gapPosition;var re=Array.isArray(St)?St:[St],de=Array.isArray(gt)?gt:[gt],ye=xt(re),we=Object(ft.a)(ye,1),De=we[0],Ve=Ct/2,pn=100-Ct/2,sn="M ".concat(yt==="round"?Ve:0,",").concat(Ve,`
         L `).concat(yt==="round"?pn:100,",").concat(Ve),In="0 0 100 ".concat(Ct),An=0;return O.createElement("svg",Object(a.a)({className:E()("".concat(dt,"-line"),nt),viewBox:In,preserveAspectRatio:"none",style:Pt},Xt),O.createElement("path",{className:"".concat(dt,"-line-trail"),d:sn,strokeLinecap:yt,stroke:Ft,strokeWidth:Tt||Ct,fillOpacity:"0"}),re.map(function(Rn,Mn){var Cn=1;switch(yt){case"round":Cn=1-Ct/100;break;case"square":Cn=1-Ct/2/100;break;default:Cn=1;break}var Gn={strokeDasharray:"".concat(Rn*Cn,"px, 100px"),strokeDashoffset:"-".concat(An,"px"),transition:zt||"stroke-dashoffset 0.3s ease 0s, stroke-dasharray .3s ease 0s, stroke 0.3s linear"},Xn=de[Mn]||de[de.length-1];return An+=Rn,O.createElement("path",{key:Mn,className:"".concat(dt,"-line-path"),d:sn,strokeLinecap:yt,stroke:Xn,strokeWidth:Ct,fillOpacity:"0",ref:De[Mn],style:Gn})}))};lt.defaultProps=wt,lt.displayName="Line";var Vt=lt,Lt=0;function Et(H){return+H.replace("%","")}function J(H){return Array.isArray(H)?H:[H]}function ht(H,et,nt,St){var dt=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,gt=arguments.length>5?arguments[5]:void 0,yt=50-St/2,Ct=0,Pt=-yt,Ft=0,Tt=-2*yt;switch(gt){case"left":Ct=-yt,Pt=0,Ft=2*yt,Tt=0;break;case"right":Ct=yt,Pt=0,Ft=-2*yt,Tt=0;break;case"bottom":Pt=yt,Tt=2*yt;break;default:}var zt="M 50,50 m ".concat(Ct,",").concat(Pt,`
   a `).concat(yt,",").concat(yt," 0 1 1 ").concat(Ft,",").concat(-Tt,`
   a `).concat(yt,",").concat(yt," 0 1 1 ").concat(-Ft,",").concat(Tt),Xt=Math.PI*2*yt,re={stroke:nt,strokeDasharray:"".concat(et/100*(Xt-dt),"px ").concat(Xt,"px"),strokeDashoffset:"-".concat(dt/2+H/100*(Xt-dt),"px"),transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s"};return{pathString:zt,pathStyle:re}}var vt=function(et){var nt=et.prefixCls,St=et.strokeWidth,dt=et.trailWidth,gt=et.gapDegree,yt=et.gapPosition,Ct=et.trailColor,Pt=et.strokeLinecap,Ft=et.style,Tt=et.className,zt=et.strokeColor,Xt=et.percent,re=Object(Ot.a)(et,["prefixCls","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"]),de=O.useMemo(function(){return Lt+=1,Lt},[]),ye=ht(0,100,Ct,St,gt,yt),we=ye.pathString,De=ye.pathStyle,Ve=J(Xt),pn=J(zt),sn=pn.find(function(Cn){return Object.prototype.toString.call(Cn)==="[object Object]"}),In=xt(Ve),An=Object(ft.a)(In,1),Rn=An[0],Mn=function(){var Gn=0;return Ve.map(function(Xn,tr){var or=pn[tr]||pn[pn.length-1],nr=Object.prototype.toString.call(or)==="[object Object]"?"url(#".concat(nt,"-gradient-").concat(de,")"):"",er=ht(Gn,Xn,or,St,gt,yt);return Gn+=Xn,O.createElement("path",{key:tr,className:"".concat(nt,"-circle-path"),d:er.pathString,stroke:nr,strokeLinecap:Pt,strokeWidth:St,opacity:Xn===0?0:1,fillOpacity:"0",style:er.pathStyle,ref:Rn[tr]})})};return O.createElement("svg",Object(a.a)({className:E()("".concat(nt,"-circle"),Tt),viewBox:"0 0 100 100",style:Ft},re),sn&&O.createElement("defs",null,O.createElement("linearGradient",{id:"".concat(nt,"-gradient-").concat(de),x1:"100%",y1:"0%",x2:"0%",y2:"0%"},Object.keys(sn).sort(function(Cn,Gn){return Et(Cn)-Et(Gn)}).map(function(Cn,Gn){return O.createElement("stop",{key:Gn,offset:Cn,stopColor:sn[Cn]})}))),O.createElement("path",{className:"".concat(nt,"-circle-trail"),d:we,stroke:Ct,strokeLinecap:Pt,strokeWidth:dt||St,fillOpacity:"0",style:De}),Mn().reverse())};vt.defaultProps=wt,vt.displayName="Circle";var bt=vt,At={Line:Vt,Circle:bt};function q(H){var et=H.percent,nt=H.success,St=H.successPercent,dt=x(et),gt=C({success:nt,successPercent:St});return gt?[x(gt),x(dt-x(gt))]:dt}function ct(H){var et=H.success,nt=H.strokeColor,St=H.successPercent,dt=nt||null,gt=C({success:et,successPercent:St});return gt?[v.presetPrimaryColors.green,dt]:dt}var ot=function(et){var nt=et.prefixCls,St=et.width,dt=et.strokeWidth,gt=et.trailColor,yt=et.strokeLinecap,Ct=et.gapPosition,Pt=et.gapDegree,Ft=et.type,Tt=et.children,zt=St||120,Xt={width:zt,height:zt,fontSize:zt*.15+6},re=dt||6,de=Ct||Ft==="dashboard"&&"bottom"||"top",ye=function(){if(Pt||Pt===0)return Pt;if(Ft==="dashboard")return 75},we=ct(et),De=Object.prototype.toString.call(we)==="[object Object]",Ve=E()("".concat(nt,"-inner"),Object(at.a)({},"".concat(nt,"-circle-gradient"),De));return O.createElement("div",{className:Ve,style:Xt},O.createElement(bt,{percent:q(et),strokeWidth:re,trailWidth:re,strokeColor:we,strokeLinecap:yt,trailColor:gt,prefixCls:nt,gapDegree:ye(),gapPosition:de}),Tt)},_=ot,P=function(et){for(var nt=et.size,St=et.steps,dt=et.percent,gt=dt===void 0?0:dt,yt=et.strokeWidth,Ct=yt===void 0?8:yt,Pt=et.strokeColor,Ft=et.trailColor,Tt=et.prefixCls,zt=et.children,Xt=Math.round(St*(gt/100)),re=nt==="small"?2:14,de=[],ye=0;ye<St;ye+=1)de.push(O.createElement("div",{key:ye,className:E()("".concat(Tt,"-steps-item"),Object(at.a)({},"".concat(Tt,"-steps-item-active"),ye<=Xt-1)),style:{backgroundColor:ye<=Xt-1?Pt:Ft,width:re,height:Ct}}));return O.createElement("div",{className:"".concat(Tt,"-steps-outer")},de,zt)},Y=P,k=function(H,et){var nt={};for(var St in H)Object.prototype.hasOwnProperty.call(H,St)&&et.indexOf(St)<0&&(nt[St]=H[St]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var dt=0,St=Object.getOwnPropertySymbols(H);dt<St.length;dt++)et.indexOf(St[dt])<0&&Object.prototype.propertyIsEnumerable.call(H,St[dt])&&(nt[St[dt]]=H[St[dt]]);return nt},h=Object(S.a)("line","circle","dashboard"),g=Object(S.a)("normal","exception","active","success"),F=function(H){Object(p.a)(nt,H);var et=Object(m.a)(nt);function nt(){var St;return Object(A.a)(this,nt),St=et.apply(this,arguments),St.renderProgress=function(dt){var gt,yt=dt.getPrefixCls,Ct=dt.direction,Pt=Object(r.a)(St),Ft=Pt.props,Tt=Ft.prefixCls,zt=Ft.className,Xt=Ft.size,re=Ft.type,de=Ft.steps,ye=Ft.showInfo,we=Ft.strokeColor,De=k(Ft,["prefixCls","className","size","type","steps","showInfo","strokeColor"]),Ve=yt("progress",Tt),pn=St.getProgressStatus(),sn=St.renderProcessInfo(Ve,pn);Object(T.a)(!("successPercent"in Ft),"Progress","`successPercent` is deprecated. Please use `success.percent` instead.");var In;re==="line"?In=de?O.createElement(Y,Object(a.a)({},St.props,{strokeColor:typeof we=="string"?we:void 0,prefixCls:Ve,steps:de}),sn):O.createElement(pt,Object(a.a)({},St.props,{prefixCls:Ve,direction:Ct}),sn):(re==="circle"||re==="dashboard")&&(In=O.createElement(_,Object(a.a)({},St.props,{prefixCls:Ve,progressStatus:pn}),sn));var An=E()(Ve,(gt={},Object(at.a)(gt,"".concat(Ve,"-").concat(re==="dashboard"&&"circle"||de&&"steps"||re),!0),Object(at.a)(gt,"".concat(Ve,"-status-").concat(pn),!0),Object(at.a)(gt,"".concat(Ve,"-show-info"),ye),Object(at.a)(gt,"".concat(Ve,"-").concat(Xt),Xt),Object(at.a)(gt,"".concat(Ve,"-rtl"),Ct==="rtl"),gt),zt);return O.createElement("div",Object(a.a)({},Object(j.a)(De,["status","format","trailColor","strokeWidth","width","gapDegree","gapPosition","strokeLinecap","percent","success","successPercent"]),{className:An}),In)},St}return Object(e.a)(nt,[{key:"getPercentNumber",value:function(){var dt=this.props.percent,gt=dt===void 0?0:dt,yt=C(this.props);return parseInt(yt!==void 0?yt.toString():gt.toString(),10)}},{key:"getProgressStatus",value:function(){var dt=this.props.status;return g.indexOf(dt)<0&&this.getPercentNumber()>=100?"success":dt||"normal"}},{key:"renderProcessInfo",value:function(dt,gt){var yt=this.props,Ct=yt.showInfo,Pt=yt.format,Ft=yt.type,Tt=yt.percent,zt=C(this.props);if(!Ct)return null;var Xt,re=Pt||function(ye){return"".concat(ye,"%")},de=Ft==="line";return Pt||gt!=="exception"&&gt!=="success"?Xt=re(x(Tt),x(zt)):gt==="exception"?Xt=de?O.createElement(d.a,null):O.createElement(y.a,null):gt==="success"&&(Xt=de?O.createElement(s.a,null):O.createElement(n.a,null)),O.createElement("span",{className:"".concat(dt,"-text"),title:typeof Xt=="string"?Xt:void 0},Xt)}},{key:"render",value:function(){return O.createElement(M.a,null,this.renderProgress)}}]),nt}(O.Component);F.defaultProps={type:"line",percent:0,showInfo:!0,trailColor:null,size:"default",gapDegree:void 0,strokeLinecap:"round"};var V=Ut.a=F},CSvP:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return at});function at(){return 0}Ut.b=function(a){return function(){return a}}},"Ch+T":function(zn,Ut,z){"use strict";z.r(Ut),z.d(Ut,"Html",function(){return M});var at=z("mrSG"),a=z("6UX8"),A=z("fIp6"),e=z("iTfj"),r=z("de35"),p=z("5UbV"),m=z("u60a"),O=z("L16w"),l,E=(l={},l[""+m.CONTAINER_CLASS]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:O.a.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},l[""+m.TITLE_CLASS]={marginBottom:"4px"},l[""+m.LIST_CLASS]={margin:"0px",listStyleType:"none",padding:"0px"},l[""+m.LIST_ITEM_CLASS]={listStyleType:"none",marginBottom:"4px"},l[""+m.MARKER_CLASS]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},l[""+m.VALUE_CLASS]={display:"inline-block",float:"right",marginLeft:"30px"},l[""+m.CROSSHAIR_X]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},l[""+m.CROSSHAIR_Y]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},l);function j(S,T,v,x,C){var N={left:S<C.x,right:S+v>C.x+C.width,top:T<C.y,bottom:T+x>C.y+C.height};return N}function y(S,T,v,x,C,N){var X=S,tt=T;switch(N){case"left":X=S-x-v,tt=T-C/2;break;case"right":X=S+v,tt=T-C/2;break;case"top":X=S-x/2,tt=T-C-v;break;case"bottom":X=S-x/2,tt=T+v;break;default:X=S+v,tt=T-C-v;break}return{x:X,y:tt}}function n(S,T,v,x,C,N,X){var tt=y(S,T,v,x,C,N);if(X){var it=j(tt.x,tt.y,x,C,X);N==="auto"?(it.right&&(tt.x=Math.max(0,S-x-v)),it.top&&(tt.y=Math.max(0,T-C-v))):N==="top"||N==="bottom"?(it.left&&(tt.x=X.x),it.right&&(tt.x=X.x+X.width-x),N==="top"&&it.top&&(tt.y=T+v),N==="bottom"&&it.bottom&&(tt.y=T-C-v)):(it.top&&(tt.y=X.y),it.bottom&&(tt.y=X.y+X.height-C),N==="left"&&it.left&&(tt.x=S+v),N==="right"&&it.right&&(tt.x=S-x-v))}return tt}function s(S,T){var v=!1;return Object(e.each)(T,function(x){if(Object(e.hasKey)(S,x))return v=!0,!1}),v}var d=function(S){Object(at.b)(T,S);function T(){return S!==null&&S.apply(this,arguments)||this}return T.prototype.getDefaultCfg=function(){var v=S.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},v),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+m.CONTAINER_CLASS+'"><div class="'+m.TITLE_CLASS+'"></div><ul class="'+m.LIST_CLASS+'"></ul></div>',itemTpl:'<li class="'+m.LIST_ITEM_CLASS+`" data-index={index}>
          <span class="`+m.MARKER_CLASS+`" style="background:{color}"></span>
          <span class="`+m.NAME_CLASS+`">{name}</span>:
          <span class="`+m.VALUE_CLASS+`">{value}</span>
        </li>`,xCrosshairTpl:'<div class="'+m.CROSSHAIR_X+'"></div>',yCrosshairTpl:'<div class="'+m.CROSSHAIR_Y+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:m.CONTAINER_CLASS,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:E})},T.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},T.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},T.prototype.show=function(){var v=this.getContainer();!v||this.destroyed||(this.set("visible",!0),Object(A.e)(v,{visibility:"visible"}),this.setCrossHairsVisible(!0))},T.prototype.hide=function(){var v=this.getContainer();!v||this.destroyed||(this.set("visible",!1),Object(A.e)(v,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},T.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},T.prototype.setLocation=function(v){this.set("x",v.x),this.set("y",v.y),this.resetPosition()},T.prototype.setCrossHairsVisible=function(v){var x=v?"":"none",C=this.get("xCrosshairDom"),N=this.get("yCrosshairDom");C&&Object(A.e)(C,{display:x}),N&&Object(A.e)(N,{display:x})},T.prototype.initContainer=function(){if(S.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var v=this.getHtmlContentNode();this.get("parent").appendChild(v),this.set("container",v),this.resetStyles(),this.applyStyles()}},T.prototype.updateInner=function(v){this.get("customContent")?this.renderCustomContent():(s(v,["title","showTitle"])&&this.resetTitle(),Object(e.hasKey)(v,"items")&&this.renderItems()),S.prototype.updateInner.call(this,v)},T.prototype.initDom=function(){this.cacheDoms()},T.prototype.removeDom=function(){S.prototype.removeDom.call(this),this.clearCrosshairs()},T.prototype.resetPosition=function(){var v=this.get("x"),x=this.get("y"),C=this.get("offset"),N=this.getOffset(),X=N.offsetX,tt=N.offsetY,it=this.get("position"),pt=this.get("region"),ft=this.getContainer(),Ot=this.getBBox(),wt=Ot.width,xt=Ot.height,lt;pt&&(lt=Object(p.k)(pt));var Vt=n(v,x,C,wt,xt,it,lt);Object(A.e)(ft,{left:Object(p.l)(Vt.x+X),top:Object(p.l)(Vt.y+tt)}),this.resetCrosshairs()},T.prototype.renderCustomContent=function(){var v=this.getHtmlContentNode(),x=this.get("parent"),C=this.get("container");C&&C.parentNode===x?x.replaceChild(v,C):x.appendChild(v),this.set("container",v),this.resetStyles(),this.applyStyles()},T.prototype.getHtmlContentNode=function(){var v,x=this.get("customContent");if(x){var C=x(this.get("title"),this.get("items"));Object(e.isElement)(C)?v=C:v=Object(A.b)(C)}return v},T.prototype.cacheDoms=function(){var v=this.getContainer(),x=v.getElementsByClassName(m.TITLE_CLASS)[0],C=v.getElementsByClassName(m.LIST_CLASS)[0];this.set("titleDom",x),this.set("listDom",C)},T.prototype.resetTitle=function(){var v=this.get("title"),x=this.get("showTitle");x&&v?this.setTitle(v):this.setTitle("")},T.prototype.setTitle=function(v){var x=this.get("titleDom");x&&(x.innerText=v)},T.prototype.resetCrosshairs=function(){var v=this.get("crosshairsRegion"),x=this.get("crosshairs");if(!v||!x)this.clearCrosshairs();else{var C=Object(p.k)(v),N=this.get("xCrosshairDom"),X=this.get("yCrosshairDom");x==="x"?(this.resetCrosshair("x",C),X&&(X.remove(),this.set("yCrosshairDom",null))):x==="y"?(this.resetCrosshair("y",C),N&&(N.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",C),this.resetCrosshair("y",C)),this.setCrossHairsVisible(this.get("visible"))}},T.prototype.resetCrosshair=function(v,x){var C=this.checkCrosshair(v),N=this.get(v);v==="x"?Object(A.e)(C,{left:Object(p.l)(N),top:Object(p.l)(x.y),height:Object(p.l)(x.height)}):Object(A.e)(C,{top:Object(p.l)(N),left:Object(p.l)(x.x),width:Object(p.l)(x.width)})},T.prototype.checkCrosshair=function(v){var x=v+"CrosshairDom",C=v+"CrosshairTpl",N="CROSSHAIR_"+v.toUpperCase(),X=m[N],tt=this.get(x),it=this.get("parent");return tt||(tt=Object(A.b)(this.get(C)),this.applyStyle(X,tt),it.appendChild(tt),this.set(x,tt)),tt},T.prototype.renderItems=function(){this.clearItemDoms();var v=this.get("items"),x=this.get("itemTpl"),C=this.get("listDom");C&&(Object(e.each)(v,function(N){var X=a.a.toCSSGradient(N.color),tt=Object(at.a)(Object(at.a)({},N),{color:X}),it=Object(e.substitute)(x,tt),pt=Object(A.b)(it);C.appendChild(pt)}),this.applyChildrenStyles(C,this.get("domStyles")))},T.prototype.clearItemDoms=function(){this.get("listDom")&&Object(p.a)(this.get("listDom"))},T.prototype.clearCrosshairs=function(){var v=this.get("xCrosshairDom"),x=this.get("yCrosshairDom");v&&v.remove(),x&&x.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},T}(r.a),M=d},CmcY:function(zn,Ut,z){"use strict";var at=z("nKUr"),a=z("q1tI"),A=z("ek7X"),e=z("0NbB"),r=function(j){var y=j.direction,n=y===void 0?"up":y;return Object(at.jsx)(at.Fragment,{children:n==="up"?Object(at.jsx)(A.a,{className:"up"}):Object(at.jsx)(e.a,{className:"down"})})},p=r,m=z("5nFI"),O=function(j){var y=j.title,n=j.value,s=j.percent,d=j.precision,M=d===void 0?0:d,S=j.text,T=S===void 0?"\u6628\u65E5":S,v=s>=0?"up":"down";return Object(at.jsxs)(at.Fragment,{children:[Object(at.jsx)(m.a,{title:y,value:n,precision:M}),Object(at.jsxs)("div",{children:[T," ",Object(at.jsx)(p,{direction:v}),Object(at.jsxs)("span",{className:v,children:[Math.abs(s),"%"]})]})]})},l=Ut.a=O},Cr25:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return tt});var at=z("mrSG"),a=z("zJSt"),A=z("iTfj"),e=z("w02o"),r=z("tKoa"),p=z("YuPD"),m=Object(p.b)({},a.a.getDefaultOptions(),{legend:{position:"right"},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}});function O(it,pt){var ft=null;return Object(A.each)(it,function(Ot){typeof Ot[pt]=="number"&&(ft+=Ot[pt])}),ft}function l(it,pt){var ft;switch(it){case"inner":return ft="-30%",Object(A.isString)(pt)&&pt.endsWith("%")?parseFloat(pt)*.01>0?ft:pt:pt<0?pt:ft;case"outer":return ft=12,Object(A.isString)(pt)&&pt.endsWith("%")?parseFloat(pt)*.01<0?ft:pt:pt>0?pt:ft;default:return pt}}function E(it,pt){var ft=Object(A.filter)(it,function(Ot){var wt=Ot[pt];return typeof wt=="number"&&!isNaN(wt)||wt===null});return Object(p.j)(p.a.WARN,ft.length===it.length,"illegal data existed in chart data."),ft}function j(it,pt){return Object(A.every)(it,function(ft){return ft[pt]===0})}function y(it){var pt=it.chart,ft=it.options,Ot=ft.data,wt=ft.angleField,xt=ft.colorField,lt=ft.color,Vt=ft.pieStyle,Lt=E(Ot,wt);if(j(Lt,wt)){var Et="$$percentage$$";Lt=Lt.map(function(ht){var vt;return Object(at.a)(Object(at.a)({},ht),(vt={},vt[Et]=1/Lt.length,vt))}),pt.data(Lt);var J=Object(p.b)({},it,{options:{xField:"1",yField:Et,seriesField:xt,isStack:!0,interval:{color:lt,style:Vt},args:{zIndexReversed:!0}}});Object(r.c)(J),pt.geometries[0].tooltip(xt+"*"+wt)}else{pt.data(Lt);var J=Object(p.b)({},it,{options:{xField:"1",yField:wt,seriesField:xt,isStack:!0,interval:{color:lt,style:Vt},args:{zIndexReversed:!0}}});Object(r.c)(J)}return it}function n(it){var pt,ft=it.chart,Ot=it.options,wt=Ot.meta,xt=Ot.colorField,lt=Object(p.b)({},wt);return ft.scale(lt,(pt={},pt[xt]={type:"cat"},pt)),it}function s(it){var pt=it.chart,ft=it.options,Ot=ft.radius,wt=ft.innerRadius,xt=ft.startAngle,lt=ft.endAngle;return pt.coordinate({type:"theta",cfg:{radius:Ot,innerRadius:wt,startAngle:xt,endAngle:lt}}),it}function d(it){var pt=it.chart,ft=it.options,Ot=ft.label,wt=ft.colorField,xt=ft.angleField,lt=pt.geometries[0];if(!Ot)lt.label(!1);else{var Vt=Ot.callback,Lt=Object(at.c)(Ot,["callback"]),Et=Object(p.o)(Lt);if(Et.content){var J=Et.content;Et.content=function(At,q,ct){var ot=At[wt],_=At[xt],P=pt.getScaleByField(xt),Y=P==null?void 0:P.scale(_);return Object(A.isFunction)(J)?J(Object(at.a)(Object(at.a)({},At),{percent:Y}),q,ct):Object(A.isString)(J)?Object(p.n)(J,{value:_,name:ot,percentage:Object(A.isNumber)(Y)&&!Object(A.isNil)(_)?(Y*100).toFixed(2)+"%":null}):J}}var ht={inner:"",outer:"pie-outer",spider:"pie-spider"},vt=Et.type?ht[Et.type]:"pie-outer",bt=Et.layout?Object(A.isArray)(Et.layout)?Et.layout:[Et.layout]:[];Et.layout=(vt?[{type:vt}]:[]).concat(bt),lt.label({fields:wt?[xt,wt]:[xt],callback:Vt,cfg:Object(at.a)(Object(at.a)({},Et),{offset:l(Et.type,Et.offset),type:"pie"})})}return it}function M(it){var pt=it.chart,ft=it.options,Ot=ft.innerRadius,wt=ft.statistic,xt=ft.angleField,lt=ft.colorField,Vt=ft.meta;if(pt.getController("annotation").clear(!0),Object(p.e)(Object(e.b)())(it),Ot&&wt){var Lt=Object(p.b)({},m.statistic,wt),Et=Lt.title,J=Lt.content;Et!==!1&&(Et=Object(p.b)({},{formatter:function(vt){return vt?vt[lt]:"\u603B\u8BA1"}},Et)),J!==!1&&(J=Object(p.b)({},{formatter:function(vt,bt){var At=Object(A.get)(Vt,[xt,"formatter"]),q=vt?vt[xt]:O(bt,xt);return At?At(q):q}},J)),Object(p.m)(pt,{statistic:{title:Et,content:J},plotType:"pie"})}return it}function S(it){return Object(A.get)(it,["options","tooltip"])!==!1?Object(p.b)({},it,{options:{tooltip:{shared:!1}}}):it}function T(it){return Object(p.e)(y,n,e.j,s,e.d,function(pt){return Object(e.k)(S(pt))},d,e.i,M,e.c,e.a)(it)}var v=z("kXyF"),x=z("qaDU"),C=function(it){Object(at.b)(pt,it);function pt(){return it!==null&&it.apply(this,arguments)||this}return pt.prototype.getActiveElements=function(){var ft=v.Util.getDelegationObject(this.context);if(ft){var Ot=this.context.view,wt=ft.component,xt=ft.item,lt=wt.get("field");if(lt){var Vt=Ot.geometries[0].elements;return Vt.filter(function(Lt){return Lt.getModel().data[lt]===xt.value})}}return[]},pt.prototype.getActiveElementLabels=function(){var ft=this.context.view,Ot=this.getActiveElements(),wt=ft.geometries[0].labelsContainer.getChildren();return wt.filter(function(xt){return Ot.find(function(lt){return Object(A.isEqual)(lt.getData(),xt.get("data"))})})},pt.prototype.transfrom=function(ft){ft===void 0&&(ft=7.5);var Ot=this.getActiveElements(),wt=this.getActiveElementLabels();Ot.forEach(function(xt,lt){var Vt=wt[lt],Lt=xt.geometry.coordinate;if(Lt.isPolar&&Lt.isTransposed){var Et=v.Util.getAngle(xt.getModel(),Lt),J=Et.startAngle,ht=Et.endAngle,vt=(J+ht)/2,bt=ft,At=bt*Math.cos(vt),q=bt*Math.sin(vt);xt.shape.setMatrix(Object(x.a)([["t",At,q]])),Vt.setMatrix(Object(x.a)([["t",At,q]]))}})},pt.prototype.active=function(){this.transfrom()},pt.prototype.reset=function(){this.transfrom(0)},pt}(v.Action),N=z("mj6g"),X=function(it){Object(at.b)(pt,it);function pt(){return it!==null&&it.apply(this,arguments)||this}return pt.prototype.getAnnotations=function(ft){var Ot=ft||this.context.view;return Ot.getController("annotation").option},pt.prototype.getInitialAnnotation=function(){return this.initialAnnotation},pt.prototype.init=function(){var ft=this,Ot=this.context.view;Ot.removeInteraction("tooltip"),Ot.on("afterchangesize",function(){var wt=ft.getAnnotations(Ot);ft.initialAnnotation=wt})},pt.prototype.change=function(){var ft=this.context,Ot=ft.view,wt=ft.event,xt=this.getAnnotations();this.initialAnnotation||(this.initialAnnotation=xt);var lt=((wt==null?void 0:wt.data)||{}).data;if(wt.type.match("legend-item")){var Vt=v.Util.getDelegationObject(this.context),Lt=Ot.getGroupedFields()[0];if(Vt&&Lt){var Et=Vt.item;lt=Ot.getData().find(function(Y){return Y[Lt]===Et.value})}}if(lt){var J=Ot.getController("annotation");J.clear(!0);var ht=Ot.getScaleFields(),vt=ht[1],bt=ht[2],At=Ot.getScaleByField(vt),q=Ot.getScaleByField(bt),ct=xt.filter(function(Y){return!Object(A.get)(Y,"key","").match("statistic")}),ot=xt.filter(function(Y){return Object(A.get)(Y,"key","").match("statistic")}),_=ot.filter(function(Y){return Y.key==="top-statistic"}),P=ot.filter(function(Y){return Y.key==="bottom-statistic"});Object(A.each)(ot,function(Y){var k,h;Y.key==="top-statistic"?(k=q?q.getText(lt[bt]):null,h=P?"translate(-50%, -100%)":"translate(-50%, -50%)"):(k=At?At.getText(lt[vt]):lt[vt],h=_?"translate(-50%, 0)":"translate(-50%,-50%)"),ct.push(Object(at.a)(Object(at.a)({},Y),{html:function(F,V){var H=V.getCoordinate(),et=H.getRadius()*H.innerRadius*2,nt=Object(A.isFunction)(Y.style)?Y.style():Y.style;Object(N.d)(F,Object(at.a)({width:et+"px",transform:h},Object(N.a)(nt)));var St=V.getData();return Y.customHtml?Y.customHtml(F,V,lt,St):(Y.formatter&&(k=Y.formatter(lt,St)),k?Object(A.isString)(k)?k:""+k:"<div></div>")}})),ct.forEach(function(g){J.annotation(g)}),Ot.render(!0)})}},pt.prototype.reset=function(){var ft=this.context.view,Ot=ft.getController("annotation");Ot.clear(!0);var wt=this.getInitialAnnotation();Object(A.each)(wt,function(xt){ft.annotation()[xt.type](xt)}),ft.render(!0)},pt}(v.Action);Object(v.registerAction)("pie-statistic",X),Object(v.registerInteraction)("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]}),Object(v.registerAction)("pie-legend",C),Object(v.registerInteraction)("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});var tt=function(it){Object(at.b)(pt,it);function pt(){var ft=it!==null&&it.apply(this,arguments)||this;return ft.type="pie",ft}return pt.getDefaultOptions=function(){return m},pt.prototype.changeData=function(ft){var Ot=this.options,wt=this.options.angleField,xt=E(Ot.data,wt),lt=E(ft,wt);j(xt,wt)||j(lt,wt)?this.update({data:ft}):(this.updateOption({data:ft}),this.chart.data(lt),M({chart:this.chart,options:this.options}),this.chart.render(!0))},pt.prototype.getDefaultOptions=function(){return pt.getDefaultOptions()},pt.prototype.getSchemaAdaptor=function(){return T},pt}(a.a)},DMQx:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return tt});var at=z("mrSG"),a=z("YuPD"),A=z("w02o"),e=z("iTfj"),r=z("kXyF"),p=z("5OoT");function m(it,pt){return Object(a.b)({size:pt?32:80,spacing:pt?8:12,offset:pt?32:0,arrow:it.arrow!==!1&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:it.text!==!1&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:p.a}},it)}function O(it,pt){return Object(e.map)(pt.getModel().points,function(ft){return it.convertPoint(ft)})}function l(it,pt,ft){var Ot=it.view,wt=it.geometry,xt=it.group,lt=it.options,Vt=it.horizontal,Lt=lt.offset,Et=lt.size,J=lt.arrow,ht=Ot.getCoordinate(),vt=O(ht,pt)[Vt?3:0],bt=O(ht,ft)[Vt?0:3],At=bt.y-vt.y,q=bt.x-vt.x;if(typeof J!="boolean"){var ct=J.headSize,ot=lt.spacing,_;Vt?(q-ct)/2<ot?(ot=Math.max(1,(q-ct)/2),_=[[vt.x+ot,vt.y-Lt],[vt.x+ot,vt.y-Lt-Et],[bt.x-ot,bt.y-Lt-Et/2]]):_=[[vt.x+ot,vt.y-Lt],[vt.x+ot,vt.y-Lt-Et],[bt.x-ot-ct,bt.y-Lt-Et],[bt.x-ot,bt.y-Lt-Et/2],[bt.x-ot-ct,bt.y-Lt]]:(At-ct)/2<ot?(ot=Math.max(1,(At-ct)/2),_=[[vt.x+Lt,vt.y+ot],[vt.x+Lt+Et,vt.y+ot],[bt.x+Lt+Et/2,bt.y-ot]]):_=[[vt.x+Lt,vt.y+ot],[vt.x+Lt+Et,vt.y+ot],[bt.x+Lt+Et,bt.y-ot-ct],[bt.x+Lt+Et/2,bt.y-ot],[bt.x+Lt,bt.y-ot-ct]],xt.addShape("polygon",{id:Ot.id+"-conversion-tag-arrow-"+wt.getElementId(pt.getModel().mappingData),name:"conversion-tag-arrow",attrs:Object(at.a)(Object(at.a)({},J.style||{}),{points:_})})}}function E(it,pt,ft){var Ot,wt,xt,lt=it.view,Vt=it.geometry,Lt=it.group,Et=it.options,J=it.field,ht=it.horizontal,vt=Et.offset,bt=Et.size;if(typeof Et.text!="boolean"){var At=lt.getCoordinate(),q=((Ot=Et.text)===null||Ot===void 0?void 0:Ot.formatter)&&((wt=Et.text)===null||wt===void 0?void 0:wt.formatter(pt.getData()[J],ft.getData()[J])),ct=O(At,pt)[ht?3:0],ot=O(At,ft)[ht?0:3],_=Lt.addShape("text",{id:lt.id+"-conversion-tag-text-"+Vt.getElementId(pt.getModel().mappingData),name:"conversion-tag-text",attrs:Object(at.a)(Object(at.a)({},((xt=Et.text)===null||xt===void 0?void 0:xt.style)||{}),{text:q,x:ht?(ct.x+ot.x)/2:ct.x+vt+bt/2,y:ht?ct.y-vt-bt/2:(ct.y+ot.y)/2})});if(ht){var P=ot.x-ct.x,Y=_.getBBox().width;if(Y>P){var k=Y/q.length,h=Math.max(1,Math.ceil(P/k)-1),g=q.slice(0,h)+"...";_.attr("text",g)}}}}function j(it,pt,ft){l(it,pt,ft),E(it,pt,ft)}function y(it,pt,ft){return pt===void 0&&(pt=!0),ft===void 0&&(ft=!1),function(Ot){var wt=Ot.options,xt=Ot.chart,lt=wt.conversionTag,Vt=wt.theme;return lt&&!ft&&(xt.theme(Object(a.b)({},Object(e.isObject)(Vt)?Vt:Object(r.getTheme)(Vt),{columnWidthRatio:1/3})),xt.annotation().shape({render:function(Et,J){var ht=Et.addGroup({id:xt.id+"-conversion-tag-group",name:"conversion-tag-group"}),vt=Object(e.find)(xt.geometries,function(q){return q.type==="interval"}),bt={view:J,geometry:vt,group:ht,field:it,horizontal:pt,options:m(lt,pt)},At=pt?vt.elements:vt.elements.slice().reverse();Object(e.each)(At,function(q,ct){ct>0&&j(bt,At[ct-1],q)})}})),Ot}}var n={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"};Object(r.registerInteraction)(n.hover,{start:[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"]}],end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]}),Object(r.registerInteraction)(n.click,{start:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"]}],end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});function s(it){return it===void 0&&(it=!1),function(pt){var ft=pt.chart,Ot=pt.options,wt=Ot.connectedArea,xt=function(){ft.removeInteraction(n.hover),ft.removeInteraction(n.click)};if(!it&&wt){var lt=wt.trigger||"hover";xt(),ft.interaction(n[lt])}else xt();return pt}}var d=z("tKoa"),M=z("sqD9"),S=z("DyAw");function T(it){var pt=it.options,ft=pt.legend,Ot=pt.seriesField,wt=pt.isStack;return Ot?ft!==!1&&(ft=Object(at.a)({position:wt?"right-top":"top-left"},ft)):ft=!1,it.options.legend=ft,it}function v(it){var pt=it.chart,ft=it.options,Ot=ft.data,wt=ft.columnStyle,xt=ft.color,lt=ft.columnWidthRatio,Vt=ft.isPercent,Lt=ft.xField,Et=ft.yField,J=ft.seriesField,ht=ft.tooltip;pt.data(Object(M.a)(Ot,Et,Lt,Et,Vt));var vt=Vt?Object(at.a)({formatter:function(q){return{name:q[J]||q[Lt],value:(Number(q[Et])*100).toFixed(2)+"%"}}},ht):ht,bt=Object(a.b)({},it,{options:{widthRatio:lt,tooltip:vt,interval:{style:wt,color:xt}}});return Object(d.c)(bt),it}function x(it){var pt,ft,Ot=it.options,wt=Ot.xAxis,xt=Ot.yAxis,lt=Ot.xField,Vt=Ot.yField,Lt=Ot.data,Et=Ot.isPercent,J=Et?{max:1,min:0,minLimit:0,maxLimit:1}:{};return Object(a.e)(Object(A.f)((pt={},pt[lt]=wt,pt[Vt]=xt,pt),(ft={},ft[lt]={type:"cat"},ft[Vt]=Object(at.a)(Object(at.a)({},Object(S.a)(Lt,Vt)),J),ft)))(it)}function C(it){var pt=it.chart,ft=it.options,Ot=ft.xAxis,wt=ft.yAxis,xt=ft.xField,lt=ft.yField;return Ot===!1?pt.axis(xt,!1):pt.axis(xt,Ot),wt===!1?pt.axis(lt,!1):pt.axis(lt,wt),it}function N(it){var pt=it.chart,ft=it.options,Ot=ft.legend,wt=ft.seriesField;return Ot&&wt?pt.legend(wt,Ot):Ot===!1&&pt.legend(!1),it}function X(it){var pt=it.chart,ft=it.options,Ot=ft.label,wt=ft.yField,xt=ft.isRange,lt=Object(a.c)(pt,"interval");if(!Ot)lt.label(!1);else{var Vt=Ot.callback,Lt=Object(at.c)(Ot,["callback"]);lt.label({fields:[wt],callback:Vt,cfg:Object(at.a)({layout:(Lt==null?void 0:Lt.position)?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Object(a.o)(xt?Object(at.a)({content:function(J){var ht;return(ht=J[wt])===null||ht===void 0?void 0:ht.join("-")}},Lt):Lt))})}return it}function tt(it,pt){pt===void 0&&(pt=!1);var ft=it.options,Ot=ft.seriesField;return Object(a.e)(T,A.j,v,x,C,N,A.k,A.h,A.g,X,A.c,A.a,Object(A.b)(),y(ft.yField,!pt,!!Ot),s(!ft.isStack),A.e)(it)}},DdT1:function(zn,Ut,z){"use strict";Ut.a=function(at){at.x0=Math.round(at.x0),at.y0=Math.round(at.y0),at.x1=Math.round(at.x1),at.y1=Math.round(at.y1)}},Djfg:function(zn,Ut,z){"use strict";var at=z("XiRp"),a=z.n(at),A=z("h4/5"),e=z.n(A),r=z("N9hJ"),p=z.n(r),m=z("3T7b"),O=z.n(m),l=z("B0vJ"),E=z.n(l),j=z("B2d+"),y=z.n(j)},DyAw:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return a}),z.d(Ut,"b",function(){return A});var at=z("iTfj");function a(e,r){var p=e.filter(function(l){var E=Object(at.get)(l,[r]);return Object(at.isNumber)(E)&&!isNaN(E)}),m=p.every(function(l){return Object(at.get)(l,[r])>=0}),O=p.every(function(l){return Object(at.get)(l,[r])<=0});return m?{min:0}:O?{max:0}:{}}function A(e,r,p,m){if(!Array.isArray(e))return{nodes:[],links:[]};var O=[],l={},E=-1;return e.forEach(function(j){var y=j[r],n=j[p],s=j[m];l[y]||(l[y]={id:++E,name:y}),l[n]||(l[n]={id:++E,name:n}),O.push({source:l[y].id,target:l[n].id,value:s})}),{nodes:Object.values(l),links:O}}},EYNi:function(zn,Ut,z){"use strict";z.d(Ut,"e",function(){return v}),z.d(Ut,"b",function(){return it}),z.d(Ut,"a",function(){return vt}),z.d(Ut,"c",function(){return E}),z.d(Ut,"d",function(){return _}),z.d(Ut,"f",function(){return at});var at={};z.r(at),z.d(at,"distance",function(){return e}),z.d(at,"isNumberEqual",function(){return r}),z.d(at,"getBBoxByArray",function(){return p}),z.d(at,"getBBoxRange",function(){return m}),z.d(at,"piMod",function(){return O});function a(k){return Math.min.apply(null,k)}function A(k){return Math.max.apply(null,k)}function e(k,h,g,F){var V=k-g,H=h-F;return Math.sqrt(V*V+H*H)}function r(k,h){return Math.abs(k-h)<.001}function p(k,h){var g=a(k),F=a(h),V=A(k),H=A(h);return{x:g,y:F,width:V-g,height:H-F}}function m(k,h,g,F){return{minX:a([k,g]),maxX:A([k,g]),minY:a([h,F]),maxY:A([h,F])}}function O(k){return(k+Math.PI*2)%(Math.PI*2)}var l=z("ZxFD"),E={box:function(h,g,F,V){return p([h,F],[g,V])},length:function(h,g,F,V){return e(h,g,F,V)},pointAt:function(h,g,F,V,H){return{x:(1-H)*h+H*F,y:(1-H)*g+H*V}},pointDistance:function(h,g,F,V,H,et){var nt=(F-h)*(H-h)+(V-g)*(et-g);if(nt<0)return e(h,g,H,et);var St=(F-h)*(F-h)+(V-g)*(V-g);return nt>St?e(F,V,H,et):this.pointToLine(h,g,F,V,H,et)},pointToLine:function(h,g,F,V,H,et){var nt=[F-h,V-g];if(l.exactEquals(nt,[0,0]))return Math.sqrt((H-h)*(H-h)+(et-g)*(et-g));var St=[-nt[1],nt[0]];l.normalize(St,St);var dt=[H-h,et-g];return Math.abs(l.dot(dt,St))},tangentAngle:function(h,g,F,V){return Math.atan2(V-g,F-h)}},j=1e-4;function y(k,h,g,F,V,H){var et,nt=Infinity,St=[g,F],dt=20;H&&H>200&&(dt=H/10);for(var gt=1/dt,yt=gt/10,Ct=0;Ct<=dt;Ct++){var Pt=Ct*gt,Ft=[V.apply(null,k.concat([Pt])),V.apply(null,h.concat([Pt]))],Tt=e(St[0],St[1],Ft[0],Ft[1]);Tt<nt&&(et=Pt,nt=Tt)}if(et===0)return{x:k[0],y:h[0]};if(et===1){var zt=k.length;return{x:k[zt-1],y:h[zt-1]}}nt=Infinity;for(var Ct=0;Ct<32&&!(yt<j);Ct++){var Xt=et-yt,re=et+yt,Ft=[V.apply(null,k.concat([Xt])),V.apply(null,h.concat([Xt]))],Tt=e(St[0],St[1],Ft[0],Ft[1]);if(Xt>=0&&Tt<nt)et=Xt,nt=Tt;else{var de=[V.apply(null,k.concat([re])),V.apply(null,h.concat([re]))],ye=e(St[0],St[1],de[0],de[1]);re<=1&&ye<nt?(et=re,nt=ye):yt*=.5}}return{x:V.apply(null,k.concat([et])),y:V.apply(null,h.concat([et]))}}function n(k,h){for(var g=0,F=k.length,V=0;V<F;V++){var H=k[V],et=h[V],nt=k[(V+1)%F],St=h[(V+1)%F];g+=e(H,et,nt,St)}return g/2}function s(k,h,g,F){var V=1-F;return V*V*k+2*F*V*h+F*F*g}function d(k,h,g){var F=k+g-2*h;if(r(F,0))return[.5];var V=(k-h)/F;return V<=1&&V>=0?[V]:[]}function M(k,h,g,F){return 2*(1-F)*(h-k)+2*F*(g-h)}function S(k,h,g,F,V,H,et){var nt=s(k,g,V,et),St=s(h,F,H,et),dt=E.pointAt(k,h,g,F,et),gt=E.pointAt(g,F,V,H,et);return[[k,h,dt.x,dt.y,nt,St],[nt,St,gt.x,gt.y,V,H]]}function T(k,h,g,F,V,H,et){if(et===0)return(e(k,h,g,F)+e(g,F,V,H)+e(k,h,V,H))/2;var nt=S(k,h,g,F,V,H,.5),St=nt[0],dt=nt[1];return St.push(et-1),dt.push(et-1),T.apply(null,St)+T.apply(null,dt)}var v={box:function(h,g,F,V,H,et){var nt=d(h,F,H)[0],St=d(g,V,et)[0],dt=[h,H],gt=[g,et];return nt!==void 0&&dt.push(s(h,F,H,nt)),St!==void 0&&gt.push(s(g,V,et,St)),p(dt,gt)},length:function(h,g,F,V,H,et){return T(h,g,F,V,H,et,3)},nearestPoint:function(h,g,F,V,H,et,nt,St){return y([h,F,H],[g,V,et],nt,St,s)},pointDistance:function(h,g,F,V,H,et,nt,St){var dt=this.nearestPoint(h,g,F,V,H,et,nt,St);return e(dt.x,dt.y,nt,St)},interpolationAt:s,pointAt:function(h,g,F,V,H,et,nt){return{x:s(h,F,H,nt),y:s(g,V,et,nt)}},divide:function(h,g,F,V,H,et,nt){return S(h,g,F,V,H,et,nt)},tangentAngle:function(h,g,F,V,H,et,nt){var St=M(h,F,H,nt),dt=M(g,V,et,nt),gt=Math.atan2(dt,St);return O(gt)}};function x(k,h,g,F,V){var H=1-V;return H*H*H*k+3*h*V*H*H+3*g*V*V*H+F*V*V*V}function C(k,h,g,F,V){var H=1-V;return 3*(H*H*(h-k)+2*H*V*(g-h)+V*V*(F-g))}function N(k,h,g,F){var V=-3*k+9*h-9*g+3*F,H=6*k-12*h+6*g,et=3*h-3*k,nt=[],St,dt,gt;if(r(V,0))r(H,0)||(St=-et/H,St>=0&&St<=1&&nt.push(St));else{var yt=H*H-4*V*et;r(yt,0)?nt.push(-H/(2*V)):yt>0&&(gt=Math.sqrt(yt),St=(-H+gt)/(2*V),dt=(-H-gt)/(2*V),St>=0&&St<=1&&nt.push(St),dt>=0&&dt<=1&&nt.push(dt))}return nt}function X(k,h,g,F,V,H,et,nt,St){var dt=x(k,g,V,et,St),gt=x(h,F,H,nt,St),yt=E.pointAt(k,h,g,F,St),Ct=E.pointAt(g,F,V,H,St),Pt=E.pointAt(V,H,et,nt,St),Ft=E.pointAt(yt.x,yt.y,Ct.x,Ct.y,St),Tt=E.pointAt(Ct.x,Ct.y,Pt.x,Pt.y,St);return[[k,h,yt.x,yt.y,Ft.x,Ft.y,dt,gt],[dt,gt,Tt.x,Tt.y,Pt.x,Pt.y,et,nt]]}function tt(k,h,g,F,V,H,et,nt,St){if(St===0)return n([k,g,V,et],[h,F,H,nt]);var dt=X(k,h,g,F,V,H,et,nt,.5),gt=dt[0],yt=dt[1];return gt.push(St-1),yt.push(St-1),tt.apply(null,gt)+tt.apply(null,yt)}var it={extrema:N,box:function(h,g,F,V,H,et,nt,St){for(var dt=[h,nt],gt=[g,St],yt=N(h,F,H,nt),Ct=N(g,V,et,St),Pt=0;Pt<yt.length;Pt++)dt.push(x(h,F,H,nt,yt[Pt]));for(var Pt=0;Pt<Ct.length;Pt++)gt.push(x(g,V,et,St,Ct[Pt]));return p(dt,gt)},length:function(h,g,F,V,H,et,nt,St){return tt(h,g,F,V,H,et,nt,St,3)},nearestPoint:function(h,g,F,V,H,et,nt,St,dt,gt,yt){return y([h,F,H,nt],[g,V,et,St],dt,gt,x,yt)},pointDistance:function(h,g,F,V,H,et,nt,St,dt,gt,yt){var Ct=this.nearestPoint(h,g,F,V,H,et,nt,St,dt,gt,yt);return e(Ct.x,Ct.y,dt,gt)},interpolationAt:x,pointAt:function(h,g,F,V,H,et,nt,St,dt){return{x:x(h,F,H,nt,dt),y:x(g,V,et,St,dt)}},divide:function(h,g,F,V,H,et,nt,St,dt){return X(h,g,F,V,H,et,nt,St,dt)},tangentAngle:function(h,g,F,V,H,et,nt,St,dt){var gt=C(h,F,H,nt,dt),yt=C(g,V,et,St,dt);return O(Math.atan2(yt,gt))}};function pt(k,h){var g=Math.abs(k);return h>0?g:g*-1}var ft={box:function(h,g,F,V){return{x:h-F,y:g-V,width:F*2,height:V*2}},length:function(h,g,F,V){return Math.PI*(3*(F+V)-Math.sqrt((3*F+V)*(F+3*V)))},nearestPoint:function(h,g,F,V,H,et){var nt=F,St=V;if(nt===0||St===0)return{x:h,y:g};for(var dt=H-h,gt=et-g,yt=Math.abs(dt),Ct=Math.abs(gt),Pt=nt*nt,Ft=St*St,Tt=Math.PI/4,zt,Xt,re=0;re<4;re++){zt=nt*Math.cos(Tt),Xt=St*Math.sin(Tt);var de=(Pt-Ft)*Math.pow(Math.cos(Tt),3)/nt,ye=(Ft-Pt)*Math.pow(Math.sin(Tt),3)/St,we=zt-de,De=Xt-ye,Ve=yt-de,pn=Ct-ye,sn=Math.hypot(De,we),In=Math.hypot(pn,Ve),An=sn*Math.asin((we*pn-De*Ve)/(sn*In)),Rn=An/Math.sqrt(Pt+Ft-zt*zt-Xt*Xt);Tt+=Rn,Tt=Math.min(Math.PI/2,Math.max(0,Tt))}return{x:h+pt(zt,dt),y:g+pt(Xt,gt)}},pointDistance:function(h,g,F,V,H,et){var nt=this.nearestPoint(h,g,F,V,H,et);return e(nt.x,nt.y,H,et)},pointAt:function(h,g,F,V,H){var et=2*Math.PI*H;return{x:h+F*Math.cos(et),y:g+V*Math.sin(et)}},tangentAngle:function(h,g,F,V,H){var et=2*Math.PI*H,nt=Math.atan2(V*Math.cos(et),-F*Math.sin(et));return O(nt)}};function Ot(k,h,g,F,V,H,et,nt){return-1*g*Math.cos(V)*Math.sin(nt)-F*Math.sin(V)*Math.cos(nt)}function wt(k,h,g,F,V,H,et,nt){return-1*g*Math.sin(V)*Math.sin(nt)+F*Math.cos(V)*Math.cos(nt)}function xt(k,h,g){return Math.atan(-h/k*Math.tan(g))}function lt(k,h,g){return Math.atan(h/(k*Math.tan(g)))}function Vt(k,h,g,F,V,H){return g*Math.cos(V)*Math.cos(H)-F*Math.sin(V)*Math.sin(H)+k}function Lt(k,h,g,F,V,H){return g*Math.sin(V)*Math.cos(H)+F*Math.cos(V)*Math.sin(H)+h}function Et(k,h,g,F){var V=Math.atan2(F*k,g*h);return(V+Math.PI*2)%(Math.PI*2)}function J(k,h,g){return{x:k*Math.cos(g),y:h*Math.sin(g)}}function ht(k,h,g){var F=Math.cos(g),V=Math.sin(g);return[k*F-h*V,k*V+h*F]}var vt={box:function(h,g,F,V,H,et,nt){for(var St=xt(F,V,H),dt=Infinity,gt=-Infinity,yt=[et,nt],Ct=-Math.PI*2;Ct<=Math.PI*2;Ct+=Math.PI){var Pt=St+Ct;et<nt?et<Pt&&Pt<nt&&yt.push(Pt):nt<Pt&&Pt<et&&yt.push(Pt)}for(var Ct=0;Ct<yt.length;Ct++){var Ft=Vt(h,g,F,V,H,yt[Ct]);Ft<dt&&(dt=Ft),Ft>gt&&(gt=Ft)}for(var Tt=lt(F,V,H),zt=Infinity,Xt=-Infinity,re=[et,nt],Ct=-Math.PI*2;Ct<=Math.PI*2;Ct+=Math.PI){var de=Tt+Ct;et<nt?et<de&&de<nt&&re.push(de):nt<de&&de<et&&re.push(de)}for(var Ct=0;Ct<re.length;Ct++){var ye=Lt(h,g,F,V,H,re[Ct]);ye<zt&&(zt=ye),ye>Xt&&(Xt=ye)}return{x:dt,y:zt,width:gt-dt,height:Xt-zt}},length:function(h,g,F,V,H,et,nt){},nearestPoint:function(h,g,F,V,H,et,nt,St,dt){var gt=ht(St-h,dt-g,-H),yt=gt[0],Ct=gt[1],Pt=ft.nearestPoint(0,0,F,V,yt,Ct),Ft=Et(F,V,Pt.x,Pt.y);Ft<et?Pt=J(F,V,et):Ft>nt&&(Pt=J(F,V,nt));var Tt=ht(Pt.x,Pt.y,H);return{x:Tt[0]+h,y:Tt[1]+g}},pointDistance:function(h,g,F,V,H,et,nt,St,dt){var gt=this.nearestPoint(h,g,F,V,St,dt);return e(gt.x,gt.y,St,dt)},pointAt:function(h,g,F,V,H,et,nt,St){var dt=(nt-et)*St+et;return{x:Vt(h,g,F,V,H,dt),y:Lt(h,g,F,V,H,dt)}},tangentAngle:function(h,g,F,V,H,et,nt,St){var dt=(nt-et)*St+et,gt=Ot(h,g,F,V,H,et,nt,dt),yt=wt(h,g,F,V,H,et,nt,dt);return O(Math.atan2(yt,gt))}};function bt(k){for(var h=0,g=[],F=0;F<k.length-1;F++){var V=k[F],H=k[F+1],et=e(V[0],V[1],H[0],H[1]),nt={from:V,to:H,length:et};g.push(nt),h+=et}return{segments:g,totalLength:h}}function At(k){if(k.length<2)return 0;for(var h=0,g=0;g<k.length-1;g++){var F=k[g],V=k[g+1];h+=e(F[0],F[1],V[0],V[1])}return h}function q(k,h){if(h>1||h<0||k.length<2)return null;var g=bt(k),F=g.segments,V=g.totalLength;if(V===0)return{x:k[0][0],y:k[0][1]};for(var H=0,et=null,nt=0;nt<F.length;nt++){var St=F[nt],dt=St.from,gt=St.to,yt=St.length/V;if(h>=H&&h<=H+yt){var Ct=(h-H)/yt;et=E.pointAt(dt[0],dt[1],gt[0],gt[1],Ct);break}H+=yt}return et}function ct(k,h){if(h>1||h<0||k.length<2)return 0;for(var g=bt(k),F=g.segments,V=g.totalLength,H=0,et=0,nt=0;nt<F.length;nt++){var St=F[nt],dt=St.from,gt=St.to,yt=St.length/V;if(h>=H&&h<=H+yt){et=Math.atan2(gt[1]-dt[1],gt[0]-dt[0]);break}H+=yt}return et}function ot(k,h,g){for(var F=Infinity,V=0;V<k.length-1;V++){var H=k[V],et=k[V+1],nt=E.pointDistance(H[0],H[1],et[0],et[1],h,g);nt<F&&(F=nt)}return F}var _={box:function(h){for(var g=[],F=[],V=0;V<h.length;V++){var H=h[V];g.push(H[0]),F.push(H[1])}return p(g,F)},length:function(h){return At(h)},pointAt:function(h,g){return q(h,g)},pointDistance:function(h,g,F){return ot(h,g,F)},tangentAngle:function(h,g){return ct(h,g)}};function P(k){var h=k.slice(0);return k.length&&h.push(k[0]),h}var Y={box:function(h){return _.box(h)},length:function(h){return At(P(h))},pointAt:function(h,g){return q(P(h),g)},pointDistance:function(h,g,F){return ot(P(h),g,F)},tangentAngle:function(h,g){return ct(P(h),g)}}},EkMX:function(zn,Ut,z){"use strict";var at={};z.r(at),z.d(at,"easeLinear",function(){return ft}),z.d(at,"easeQuad",function(){return xt}),z.d(at,"easeQuadIn",function(){return Ot}),z.d(at,"easeQuadOut",function(){return wt}),z.d(at,"easeQuadInOut",function(){return xt}),z.d(at,"easeCubic",function(){return Lt}),z.d(at,"easeCubicIn",function(){return lt}),z.d(at,"easeCubicOut",function(){return Vt}),z.d(at,"easeCubicInOut",function(){return Lt}),z.d(at,"easePoly",function(){return vt}),z.d(at,"easePolyIn",function(){return J}),z.d(at,"easePolyOut",function(){return ht}),z.d(at,"easePolyInOut",function(){return vt}),z.d(at,"easeSin",function(){return ot}),z.d(at,"easeSinIn",function(){return q}),z.d(at,"easeSinOut",function(){return ct}),z.d(at,"easeSinInOut",function(){return ot}),z.d(at,"easeExp",function(){return k}),z.d(at,"easeExpIn",function(){return P}),z.d(at,"easeExpOut",function(){return Y}),z.d(at,"easeExpInOut",function(){return k}),z.d(at,"easeCircle",function(){return F}),z.d(at,"easeCircleIn",function(){return h}),z.d(at,"easeCircleOut",function(){return g}),z.d(at,"easeCircleInOut",function(){return F}),z.d(at,"easeBounce",function(){return Tt}),z.d(at,"easeBounceIn",function(){return Ft}),z.d(at,"easeBounceOut",function(){return Tt}),z.d(at,"easeBounceInOut",function(){return zt}),z.d(at,"easeBack",function(){return ye}),z.d(at,"easeBackIn",function(){return re}),z.d(at,"easeBackOut",function(){return de}),z.d(at,"easeBackInOut",function(){return ye}),z.d(at,"easeElastic",function(){return sn}),z.d(at,"easeElasticIn",function(){return pn}),z.d(at,"easeElasticOut",function(){return sn}),z.d(at,"easeElasticInOut",function(){return In});var a=z("mrSG"),A=z("e0ae"),e=z("Mw2x"),r=z("sstZ"),p=z("iTfj"),m=0,O=0,l=0,E=1e3,j,y,n=0,s=0,d=0,M=typeof performance=="object"&&performance.now?performance:Date,S=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(G){setTimeout(G,17)};function T(){return s||(S(v),s=M.now()+d)}function v(){s=0}function x(){this._call=this._time=this._next=null}x.prototype=C.prototype={constructor:x,restart:function(B,$,ut){if(typeof B!="function")throw new TypeError("callback is not a function");ut=(ut==null?T():+ut)+($==null?0:+$),!this._next&&y!==this&&(y?y._next=this:j=this,y=this),this._call=B,this._time=ut,pt()},stop:function(){this._call&&(this._call=null,this._time=Infinity,pt())}};function C(G,B,$){var ut=new x;return ut.restart(G,B,$),ut}function N(){T(),++m;for(var G=j,B;G;)(B=s-G._time)>=0&&G._call.call(null,B),G=G._next;--m}function X(){s=(n=M.now())+d,m=O=0;try{N()}finally{m=0,it(),s=0}}function tt(){var G=M.now(),B=G-n;B>E&&(d-=B,n=G)}function it(){for(var G,B=j,$,ut=Infinity;B;)B._call?(ut>B._time&&(ut=B._time),G=B,B=B._next):($=B._next,B._next=null,B=G?G._next=$:j=$);y=G,pt(ut)}function pt(G){if(!m){O&&(O=clearTimeout(O));var B=G-s;B>24?(G<Infinity&&(O=setTimeout(X,G-M.now()-d)),l&&(l=clearInterval(l))):(l||(n=M.now(),l=setInterval(tt,E)),m=1,S(X))}}function ft(G){return+G}function Ot(G){return G*G}function wt(G){return G*(2-G)}function xt(G){return((G*=2)<=1?G*G:--G*(2-G)+1)/2}function lt(G){return G*G*G}function Vt(G){return--G*G*G+1}function Lt(G){return((G*=2)<=1?G*G*G:(G-=2)*G*G+2)/2}var Et=3,J=function G(B){B=+B;function $(ut){return Math.pow(ut,B)}return $.exponent=G,$}(Et),ht=function G(B){B=+B;function $(ut){return 1-Math.pow(1-ut,B)}return $.exponent=G,$}(Et),vt=function G(B){B=+B;function $(ut){return((ut*=2)<=1?Math.pow(ut,B):2-Math.pow(2-ut,B))/2}return $.exponent=G,$}(Et),bt=Math.PI,At=bt/2;function q(G){return+G==1?1:1-Math.cos(G*At)}function ct(G){return Math.sin(G*At)}function ot(G){return(1-Math.cos(bt*G))/2}function _(G){return(Math.pow(2,-10*G)-.0009765625)*1.0009775171065494}function P(G){return _(1-+G)}function Y(G){return 1-_(G)}function k(G){return((G*=2)<=1?_(1-G):2-_(G-1))/2}function h(G){return 1-Math.sqrt(1-G*G)}function g(G){return Math.sqrt(1- --G*G)}function F(G){return((G*=2)<=1?1-Math.sqrt(1-G*G):Math.sqrt(1-(G-=2)*G)+1)/2}var V=4/11,H=6/11,et=8/11,nt=3/4,St=9/11,dt=10/11,gt=15/16,yt=21/22,Ct=63/64,Pt=1/V/V;function Ft(G){return 1-Tt(1-G)}function Tt(G){return(G=+G)<V?Pt*G*G:G<et?Pt*(G-=H)*G+nt:G<dt?Pt*(G-=St)*G+gt:Pt*(G-=yt)*G+Ct}function zt(G){return((G*=2)<=1?1-Tt(1-G):Tt(G-1)+1)/2}var Xt=1.70158,re=function G(B){B=+B;function $(ut){return(ut=+ut)*ut*(B*(ut-1)+ut)}return $.overshoot=G,$}(Xt),de=function G(B){B=+B;function $(ut){return--ut*ut*((ut+1)*B+ut)+1}return $.overshoot=G,$}(Xt),ye=function G(B){B=+B;function $(ut){return((ut*=2)<1?ut*ut*((B+1)*ut-B):(ut-=2)*ut*((B+1)*ut+B)+2)/2}return $.overshoot=G,$}(Xt),we=2*Math.PI,De=1,Ve=.3,pn=function G(B,$){var ut=Math.asin(1/(B=Math.max(1,B)))*($/=we);function Bt(Jt){return B*_(- --Jt)*Math.sin((ut-Jt)/$)}return Bt.amplitude=function(Jt){return G(Jt,$*we)},Bt.period=function(Jt){return G(B,Jt)},Bt}(De,Ve),sn=function G(B,$){var ut=Math.asin(1/(B=Math.max(1,B)))*($/=we);function Bt(Jt){return 1-B*_(Jt=+Jt)*Math.sin((Jt+ut)/$)}return Bt.amplitude=function(Jt){return G(Jt,$*we)},Bt.period=function(Jt){return G(B,Jt)},Bt}(De,Ve),In=function G(B,$){var ut=Math.asin(1/(B=Math.max(1,B)))*($/=we);function Bt(Jt){return((Jt=Jt*2-1)<0?B*_(-Jt)*Math.sin((ut-Jt)/$):2-B*_(Jt)*Math.sin((ut+Jt)/$))/2}return Bt.amplitude=function(Jt){return G(Jt,$*we)},Bt.period=function(Jt){return G(B,Jt)},Bt}(De,Ve),An=function(G,B,$){G.prototype=B.prototype=$,$.constructor=G};function Rn(G,B){var $=Object.create(G.prototype);for(var ut in B)$[ut]=B[ut];return $}function Mn(){}var Cn=.7,Gn=1/Cn,Xn="\\s*([+-]?\\d+)\\s*",tr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",or="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nr=/^#([0-9a-f]{3,8})$/,er=new RegExp("^rgb\\("+[Xn,Xn,Xn]+"\\)$"),Sr=new RegExp("^rgb\\("+[or,or,or]+"\\)$"),Vr=new RegExp("^rgba\\("+[Xn,Xn,Xn,tr]+"\\)$"),ti=new RegExp("^rgba\\("+[or,or,or,tr]+"\\)$"),hi=new RegExp("^hsl\\("+[tr,or,or]+"\\)$"),Fi=new RegExp("^hsla\\("+[tr,or,or,tr]+"\\)$"),to={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};An(Mn,Li,{copy:function(B){return Object.assign(new this.constructor,this,B)},displayable:function(){return this.rgb().displayable()},hex:si,formatHex:si,formatHsl:Ti,formatRgb:Ui,toString:Ui});function si(){return this.rgb().formatHex()}function Ti(){return Kr(this).formatHsl()}function Ui(){return this.rgb().formatRgb()}function Li(G){var B,$;return G=(G+"").trim().toLowerCase(),(B=nr.exec(G))?($=B[1].length,B=parseInt(B[1],16),$===6?Vi(B):$===3?new pr(B>>8&15|B>>4&240,B>>4&15|B&240,(B&15)<<4|B&15,1):$===8?ro(B>>24&255,B>>16&255,B>>8&255,(B&255)/255):$===4?ro(B>>12&15|B>>8&240,B>>8&15|B>>4&240,B>>4&15|B&240,((B&15)<<4|B&15)/255):null):(B=er.exec(G))?new pr(B[1],B[2],B[3],1):(B=Sr.exec(G))?new pr(B[1]*255/100,B[2]*255/100,B[3]*255/100,1):(B=Vr.exec(G))?ro(B[1],B[2],B[3],B[4]):(B=ti.exec(G))?ro(B[1]*255/100,B[2]*255/100,B[3]*255/100,B[4]):(B=hi.exec(G))?Yr(B[1],B[2]/100,B[3]/100,1):(B=Fi.exec(G))?Yr(B[1],B[2]/100,B[3]/100,B[4]):to.hasOwnProperty(G)?Vi(to[G]):G==="transparent"?new pr(NaN,NaN,NaN,0):null}function Vi(G){return new pr(G>>16&255,G>>8&255,G&255,1)}function ro(G,B,$,ut){return ut<=0&&(G=B=$=NaN),new pr(G,B,$,ut)}function jr(G){return G instanceof Mn||(G=Li(G)),G?(G=G.rgb(),new pr(G.r,G.g,G.b,G.opacity)):new pr}function Ji(G,B,$,ut){return arguments.length===1?jr(G):new pr(G,B,$,ut==null?1:ut)}function pr(G,B,$,ut){this.r=+G,this.g=+B,this.b=+$,this.opacity=+ut}An(pr,Ji,Rn(Mn,{brighter:function(B){return B=B==null?Gn:Math.pow(Gn,B),new pr(this.r*B,this.g*B,this.b*B,this.opacity)},darker:function(B){return B=B==null?Cn:Math.pow(Cn,B),new pr(this.r*B,this.g*B,this.b*B,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xr,formatHex:Xr,formatRgb:Br,toString:Br}));function Xr(){return"#"+Nr(this.r)+Nr(this.g)+Nr(this.b)}function Br(){var G=this.opacity;return G=isNaN(G)?1:Math.max(0,Math.min(1,G)),(G===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(G===1?")":", "+G+")")}function Nr(G){return G=Math.max(0,Math.min(255,Math.round(G)||0)),(G<16?"0":"")+G.toString(16)}function Yr(G,B,$,ut){return ut<=0?G=B=$=NaN:$<=0||$>=1?G=B=NaN:B<=0&&(G=NaN),new fi(G,B,$,ut)}function Kr(G){if(G instanceof fi)return new fi(G.h,G.s,G.l,G.opacity);if(G instanceof Mn||(G=Li(G)),!G)return new fi;if(G instanceof fi)return G;G=G.rgb();var B=G.r/255,$=G.g/255,ut=G.b/255,Bt=Math.min(B,$,ut),Jt=Math.max(B,$,ut),ie=NaN,se=Jt-Bt,Ce=(Jt+Bt)/2;return se?(B===Jt?ie=($-ut)/se+($<ut)*6:$===Jt?ie=(ut-B)/se+2:ie=(B-$)/se+4,se/=Ce<.5?Jt+Bt:2-Jt-Bt,ie*=60):se=Ce>0&&Ce<1?0:ie,new fi(ie,se,Ce,G.opacity)}function ni(G,B,$,ut){return arguments.length===1?Kr(G):new fi(G,B,$,ut==null?1:ut)}function fi(G,B,$,ut){this.h=+G,this.s=+B,this.l=+$,this.opacity=+ut}An(fi,ni,Rn(Mn,{brighter:function(B){return B=B==null?Gn:Math.pow(Gn,B),new fi(this.h,this.s,this.l*B,this.opacity)},darker:function(B){return B=B==null?Cn:Math.pow(Cn,B),new fi(this.h,this.s,this.l*B,this.opacity)},rgb:function(){var B=this.h%360+(this.h<0)*360,$=isNaN(B)||isNaN(this.s)?0:this.s,ut=this.l,Bt=ut+(ut<.5?ut:1-ut)*$,Jt=2*ut-Bt;return new pr($r(B>=240?B-240:B+120,Jt,Bt),$r(B,Jt,Bt),$r(B<120?B+240:B-120,Jt,Bt),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var B=this.opacity;return B=isNaN(B)?1:Math.max(0,Math.min(1,B)),(B===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(B===1?")":", "+B+")")}}));function $r(G,B,$){return(G<60?B+($-B)*G/60:G<180?$:G<240?B+($-B)*(240-G)/60:B)*255}function ci(G,B,$,ut,Bt){var Jt=G*G,ie=Jt*G;return((1-3*G+3*Jt-ie)*B+(4-6*Jt+3*ie)*$+(1+3*G+3*Jt-3*ie)*ut+ie*Bt)/6}var Qr=function(G){var B=G.length-1;return function($){var ut=$<=0?$=0:$>=1?($=1,B-1):Math.floor($*B),Bt=G[ut],Jt=G[ut+1],ie=ut>0?G[ut-1]:2*Bt-Jt,se=ut<B-1?G[ut+2]:2*Jt-Bt;return ci(($-ut/B)*B,ie,Bt,Jt,se)}},gi=function(G){var B=G.length;return function($){var ut=Math.floor((($%=1)<0?++$:$)*B),Bt=G[(ut+B-1)%B],Jt=G[ut%B],ie=G[(ut+1)%B],se=G[(ut+2)%B];return ci(($-ut/B)*B,Bt,Jt,ie,se)}},Oi=function(G){return function(){return G}};function bi(G,B){return function($){return G+$*B}}function _i(G,B,$){return G=Math.pow(G,$),B=Math.pow(B,$)-G,$=1/$,function(ut){return Math.pow(G+ut*B,$)}}function Qi(G,B){var $=B-G;return $?bi(G,$>180||$<-180?$-360*Math.round($/360):$):Oi(isNaN(G)?B:G)}function io(G){return(G=+G)==1?Wi:function(B,$){return $-B?_i(B,$,G):Oi(isNaN(B)?$:B)}}function Wi(G,B){var $=B-G;return $?bi(G,$):Oi(isNaN(G)?B:G)}var Zi=function G(B){var $=io(B);function ut(Bt,Jt){var ie=$((Bt=Ji(Bt)).r,(Jt=Ji(Jt)).r),se=$(Bt.g,Jt.g),Ce=$(Bt.b,Jt.b),Ee=Wi(Bt.opacity,Jt.opacity);return function(cn){return Bt.r=ie(cn),Bt.g=se(cn),Bt.b=Ce(cn),Bt.opacity=Ee(cn),Bt+""}}return ut.gamma=G,ut}(1);function Pi(G){return function(B){var $=B.length,ut=new Array($),Bt=new Array($),Jt=new Array($),ie,se;for(ie=0;ie<$;++ie)se=Ji(B[ie]),ut[ie]=se.r||0,Bt[ie]=se.g||0,Jt[ie]=se.b||0;return ut=G(ut),Bt=G(Bt),Jt=G(Jt),se.opacity=1,function(Ce){return se.r=ut(Ce),se.g=Bt(Ce),se.b=Jt(Ce),se+""}}}var no=Pi(Qr),Mo=Pi(gi),ao=function(G,B){B||(B=[]);var $=G?Math.min(B.length,G.length):0,ut=B.slice(),Bt;return function(Jt){for(Bt=0;Bt<$;++Bt)ut[Bt]=G[Bt]*(1-Jt)+B[Bt]*Jt;return ut}};function uo(G){return ArrayBuffer.isView(G)&&!(G instanceof DataView)}var xo=function(G,B){return(uo(B)?ao:oe)(G,B)};function oe(G,B){var $=B?B.length:0,ut=G?Math.min($,G.length):0,Bt=new Array(ut),Jt=new Array($),ie;for(ie=0;ie<ut;++ie)Bt[ie]=rn(G[ie],B[ie]);for(;ie<$;++ie)Jt[ie]=B[ie];return function(se){for(ie=0;ie<ut;++ie)Jt[ie]=Bt[ie](se);return Jt}}var Kt=function(G,B){var $=new Date;return G=+G,B=+B,function(ut){return $.setTime(G*(1-ut)+B*ut),$}},te=function(G,B){return G=+G,B=+B,function($){return G*(1-$)+B*$}},Oe=function(G,B){var $={},ut={},Bt;(G===null||typeof G!="object")&&(G={}),(B===null||typeof B!="object")&&(B={});for(Bt in B)Bt in G?$[Bt]=rn(G[Bt],B[Bt]):ut[Bt]=B[Bt];return function(Jt){for(Bt in $)ut[Bt]=$[Bt](Jt);return ut}},Qe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,On=new RegExp(Qe.source,"g");function Vn(G){return function(){return G}}function Hn(G){return function(B){return G(B)+""}}var $e=function(G,B){var $=Qe.lastIndex=On.lastIndex=0,ut,Bt,Jt,ie=-1,se=[],Ce=[];for(G=G+"",B=B+"";(ut=Qe.exec(G))&&(Bt=On.exec(B));)(Jt=Bt.index)>$&&(Jt=B.slice($,Jt),se[ie]?se[ie]+=Jt:se[++ie]=Jt),(ut=ut[0])===(Bt=Bt[0])?se[ie]?se[ie]+=Bt:se[++ie]=Bt:(se[++ie]=null,Ce.push({i:ie,x:te(ut,Bt)})),$=On.lastIndex;return $<B.length&&(Jt=B.slice($),se[ie]?se[ie]+=Jt:se[++ie]=Jt),se.length<2?Ce[0]?Hn(Ce[0].x):Vn(B):(B=Ce.length,function(Ee){for(var cn=0,xn;cn<B;++cn)se[(xn=Ce[cn]).i]=xn.x(Ee);return se.join("")})},rn=function(G,B){var $=typeof B,ut;return B==null||$==="boolean"?Oi(B):($==="number"?te:$==="string"?(ut=Li(B))?(B=ut,Zi):$e:B instanceof Li?Zi:B instanceof Date?Kt:uo(B)?ao:Array.isArray(B)?oe:typeof B.valueOf!="function"&&typeof B.toString!="function"||isNaN(B)?Oe:te)(G,B)},on=z("tvuL"),$n=function(B){return["fill","stroke","fillStyle","strokeStyle"].includes(B)},vr=function(B){return/^[r,R,L,l]{1}[\s]*\(/.test(B)},ar=[1,0,0,0,1,0,0,0,1];function rr(G,B,$){var ut={},Bt=B.fromAttrs,Jt=B.toAttrs;if(!G.destroyed){var ie;for(var se in Jt)if(!Object(p.isEqual)(Bt[se],Jt[se]))if(se==="path"){var Ce=Jt[se],Ee=Bt[se];Ce.length>Ee.length?(Ce=on.parsePathString(Jt[se]),Ee=on.parsePathString(Bt[se]),Ee=on.fillPathByDiff(Ee,Ce),Ee=on.formatPath(Ee,Ce),B.fromAttrs.path=Ee,B.toAttrs.path=Ce):B.pathFormatted||(Ce=on.parsePathString(Jt[se]),Ee=on.parsePathString(Bt[se]),Ee=on.formatPath(Ee,Ce),B.fromAttrs.path=Ee,B.toAttrs.path=Ce,B.pathFormatted=!0),ut[se]=[];for(var cn=0;cn<Ce.length;cn++){for(var xn=Ce[cn],_t=Ee[cn],Yt=[],Se=0;Se<xn.length;Se++)Object(p.isNumber)(xn[Se])&&_t&&Object(p.isNumber)(_t[Se])?(ie=rn(_t[Se],xn[Se]),Yt.push(ie($))):Yt.push(xn[Se]);ut[se].push(Yt)}}else if(se==="matrix"){var Wt=xo(Bt[se]||ar,Jt[se]||ar),ue=Wt($);ut[se]=ue}else $n(se)&&vr(Jt[se])?ut[se]=Jt[se]:Object(p.isFunction)(Jt[se])||(ie=rn(Bt[se],Jt[se]),ut[se]=ie($));G.attr(ut)}}function Fr(G,B,$){var ut=B.startTime,Bt=B.delay;if($<ut+Bt||B._paused)return!1;var Jt,ie=B.duration,se=B.easing;if($=$-ut-B.delay,B.repeat)Jt=$%ie/ie,Jt=at[se](Jt);else if(Jt=$/ie,Jt<1)Jt=at[se](Jt);else return B.onFrame?G.attr(B.onFrame(1)):G.attr(B.toAttrs),!0;if(B.onFrame){var Ce=B.onFrame(Jt);G.attr(Ce)}else rr(G,B,Jt);return!1}var Ar=function(){function G(B){this.animators=[],this.current=0,this.timer=null,this.canvas=B}return G.prototype.initTimer=function(){var B=this,$=!1,ut,Bt,Jt;this.timer=C(function(ie){if(B.current=ie,B.animators.length>0){for(var se=B.animators.length-1;se>=0;se--){if(ut=B.animators[se],ut.destroyed){B.removeAnimator(se);continue}if(!ut.isAnimatePaused()){Bt=ut.get("animations");for(var Ce=Bt.length-1;Ce>=0;Ce--)Jt=Bt[Ce],$=Fr(ut,Jt,ie),$&&(Bt.splice(Ce,1),$=!1,Jt.callback&&Jt.callback())}Bt.length===0&&B.removeAnimator(se)}var Ee=B.canvas.get("autoDraw");Ee||B.canvas.draw()}})},G.prototype.addAnimator=function(B){this.animators.push(B)},G.prototype.removeAnimator=function(B){this.animators.splice(B,1)},G.prototype.isAnimating=function(){return!!this.animators.length},G.prototype.stop=function(){this.timer&&this.timer.stop()},G.prototype.stopAllAnimations=function(B){B===void 0&&(B=!0),this.animators.forEach(function($){$.stopAnimate(B)}),this.animators=[],this.canvas.draw()},G.prototype.getTime=function(){return this.current},G}(),wr=Ar,xr=z("5eLp"),Er=40,Ir=0,Lr=":",Pr=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Dr(G,B){for(var $ in G)if(G.hasOwnProperty($)&&$.indexOf(Lr+B)>=0)return!0;return!1}function ri(G,B,$){$.name=B,$.target=G,$.currentTarget=G,$.delegateTarget=G,G.emit(B,$)}function vi(G,B,$){if($.bubbles){var ut=void 0,Bt=!1;if(B==="mouseenter"?(ut=$.fromShape,Bt=!0):B==="mouseleave"&&(Bt=!0,ut=$.toShape),G.isCanvas()&&Bt)return;if(ut&&Object(r.g)(G,ut)){$.bubbles=!1;return}$.name=B,$.currentTarget=G,$.delegateTarget=G,G.emit(B,$)}}var ii=function(){function G(B){var $=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(ut){var Bt=ut.type;$._triggerEvent(Bt,ut)},this._onDocumentMove=function(ut){var Bt=$.canvas,Jt=Bt.get("el");if(Jt!==ut.target&&($.dragging||$.currentShape)){var ie=$._getPointInfo(ut);$.dragging&&$._emitEvent("drag",ut,ie,$.draggingShape)}},this._onDocumentMouseUp=function(ut){var Bt=$.canvas,Jt=Bt.get("el");if(Jt!==ut.target&&$.dragging){var ie=$._getPointInfo(ut);$.draggingShape&&$._emitEvent("drop",ut,ie,null),$._emitEvent("dragend",ut,ie,$.draggingShape),$._afterDrag($.draggingShape,ie,ut)}},this.canvas=B.canvas}return G.prototype.init=function(){this._bindEvents()},G.prototype._bindEvents=function(){var B=this,$=this.canvas.get("el");Object(r.a)(Pr,function(ut){$.addEventListener(ut,B._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},G.prototype._clearEvents=function(){var B=this,$=this.canvas.get("el");Object(r.a)(Pr,function(ut){$.removeEventListener(ut,B._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},G.prototype._getEventObj=function(B,$,ut,Bt,Jt,ie){var se=new xr.a(B,$);return se.fromShape=Jt,se.toShape=ie,se.x=ut.x,se.y=ut.y,se.clientX=ut.clientX,se.clientY=ut.clientY,se.propagationPath.push(Bt),se},G.prototype._getShape=function(B,$){return this.canvas.getShape(B.x,B.y,$)},G.prototype._getPointInfo=function(B){var $=this.canvas,ut=$.getClientByEvent(B),Bt=$.getPointByEvent(B);return{x:Bt.x,y:Bt.y,clientX:ut.x,clientY:ut.y}},G.prototype._triggerEvent=function(B,$){var ut=this._getPointInfo($),Bt=this._getShape(ut,$),Jt=this["_on"+B],ie=!1;if(Jt)Jt.call(this,ut,Bt,$);else{var se=this.currentShape;B==="mouseenter"||B==="dragenter"||B==="mouseover"?(this._emitEvent(B,$,ut,null,null,Bt),Bt&&this._emitEvent(B,$,ut,Bt,null,Bt),B==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",$,ut,null)):B==="mouseleave"||B==="dragleave"||B==="mouseout"?(ie=!0,se&&this._emitEvent(B,$,ut,se,se,null),this._emitEvent(B,$,ut,null,se,null),B==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",$,ut,null)):this._emitEvent(B,$,ut,Bt,null,null)}if(ie||(this.currentShape=Bt),Bt&&!Bt.get("destroyed")){var Ce=this.canvas,Ee=Ce.get("el");Ee.style.cursor=Bt.attr("cursor")||Ce.get("cursor")}},G.prototype._onmousedown=function(B,$,ut){ut.button===Ir&&(this.mousedownShape=$,this.mousedownPoint=B,this.mousedownTimeStamp=ut.timeStamp),this._emitEvent("mousedown",ut,B,$,null,null)},G.prototype._emitMouseoverEvents=function(B,$,ut,Bt){var Jt=this.canvas.get("el");ut!==Bt&&(ut&&(this._emitEvent("mouseout",B,$,ut,ut,Bt),this._emitEvent("mouseleave",B,$,ut,ut,Bt),(!Bt||Bt.get("destroyed"))&&(Jt.style.cursor=this.canvas.get("cursor"))),Bt&&(this._emitEvent("mouseover",B,$,Bt,ut,Bt),this._emitEvent("mouseenter",B,$,Bt,ut,Bt)))},G.prototype._emitDragoverEvents=function(B,$,ut,Bt,Jt){Bt?(Bt!==ut&&(ut&&this._emitEvent("dragleave",B,$,ut,ut,Bt),this._emitEvent("dragenter",B,$,Bt,ut,Bt)),Jt||this._emitEvent("dragover",B,$,Bt)):ut&&this._emitEvent("dragleave",B,$,ut,ut,Bt),Jt&&this._emitEvent("dragover",B,$,Bt)},G.prototype._afterDrag=function(B,$,ut){B&&(B.set("capture",!0),this.draggingShape=null),this.dragging=!1;var Bt=this._getShape($,ut);Bt!==B&&this._emitMouseoverEvents(ut,$,B,Bt),this.currentShape=Bt},G.prototype._onmouseup=function(B,$,ut){if(ut.button===Ir){var Bt=this.draggingShape;this.dragging?(Bt&&this._emitEvent("drop",ut,B,$),this._emitEvent("dragend",ut,B,Bt),this._afterDrag(Bt,B,ut)):(this._emitEvent("mouseup",ut,B,$),$===this.mousedownShape&&this._emitEvent("click",ut,B,$),this.mousedownShape=null,this.mousedownPoint=null)}},G.prototype._ondragover=function(B,$,ut){ut.preventDefault();var Bt=this.currentShape;this._emitDragoverEvents(ut,B,Bt,$,!0)},G.prototype._onmousemove=function(B,$,ut){var Bt=this.canvas,Jt=this.currentShape,ie=this.draggingShape;if(this.dragging)ie&&this._emitDragoverEvents(ut,B,Jt,$,!1),this._emitEvent("drag",ut,B,ie);else{var se=this.mousedownPoint;if(se){var Ce=this.mousedownShape,Ee=ut.timeStamp,cn=Ee-this.mousedownTimeStamp,xn=se.clientX-B.clientX,_t=se.clientY-B.clientY,Yt=xn*xn+_t*_t;cn>120||Yt>Er?Ce&&Ce.get("draggable")?(ie=this.mousedownShape,ie.set("capture",!1),this.draggingShape=ie,this.dragging=!0,this._emitEvent("dragstart",ut,B,ie),this.mousedownShape=null,this.mousedownPoint=null):!Ce&&Bt.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",ut,B,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(ut,B,Jt,$),this._emitEvent("mousemove",ut,B,$)):(this._emitMouseoverEvents(ut,B,Jt,$),this._emitEvent("mousemove",ut,B,$))}else this._emitMouseoverEvents(ut,B,Jt,$),this._emitEvent("mousemove",ut,B,$)}},G.prototype._emitEvent=function(B,$,ut,Bt,Jt,ie){var se=this._getEventObj(B,$,ut,Bt,Jt,ie);if(Bt){se.shape=Bt,ri(Bt,B,se);for(var Ce=Bt.getParent();Ce;)Ce.emitDelegation(B,se),se.propagationStopped||vi(Ce,B,se),se.propagationPath.push(Ce),Ce=Ce.getParent()}else{var Ee=this.canvas;ri(Ee,B,se)}},G.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},G}(),Si=ii,zi="px",Xi=Object(A.a)(),Bi=Xi&&Xi.name==="firefox",Di=function(G){Object(a.b)(B,G);function B($){var ut=G.call(this,$)||this;return ut.initContainer(),ut.initDom(),ut.initEvents(),ut.initTimeline(),ut}return B.prototype.getDefaultCfg=function(){var $=G.prototype.getDefaultCfg.call(this);return $.cursor="default",$.supportCSSTransform=!1,$},B.prototype.initContainer=function(){var $=this.get("container");Object(r.h)($)&&($=document.getElementById($),this.set("container",$))},B.prototype.initDom=function(){var $=this.createDom();this.set("el",$);var ut=this.get("container");ut.appendChild($),this.setDOMSize(this.get("width"),this.get("height"))},B.prototype.initEvents=function(){var $=new Si({canvas:this});$.init(),this.set("eventController",$)},B.prototype.initTimeline=function(){var $=new wr(this);this.set("timeline",$)},B.prototype.setDOMSize=function($,ut){var Bt=this.get("el");r.c&&(Bt.style.width=$+zi,Bt.style.height=ut+zi)},B.prototype.changeSize=function($,ut){this.setDOMSize($,ut),this.set("width",$),this.set("height",ut),this.onCanvasChange("changeSize")},B.prototype.getRenderer=function(){return this.get("renderer")},B.prototype.getCursor=function(){return this.get("cursor")},B.prototype.setCursor=function($){this.set("cursor",$);var ut=this.get("el");r.c&&ut&&(ut.style.cursor=$)},B.prototype.getPointByEvent=function($){var ut=this.get("supportCSSTransform");if(ut){if(Bi&&!Object(r.e)($.layerX)&&$.layerX!==$.offsetX)return{x:$.layerX,y:$.layerY};if(!Object(r.e)($.offsetX))return{x:$.offsetX,y:$.offsetY}}var Bt=this.getClientByEvent($),Jt=Bt.x,ie=Bt.y;return this.getPointByClient(Jt,ie)},B.prototype.getClientByEvent=function($){var ut=$;return $.touches&&($.type==="touchend"?ut=$.changedTouches[0]:ut=$.touches[0]),{x:ut.clientX,y:ut.clientY}},B.prototype.getPointByClient=function($,ut){var Bt=this.get("el"),Jt=Bt.getBoundingClientRect();return{x:$-Jt.left,y:ut-Jt.top}},B.prototype.getClientByPoint=function($,ut){var Bt=this.get("el"),Jt=Bt.getBoundingClientRect();return{x:$+Jt.left,y:ut+Jt.top}},B.prototype.draw=function(){},B.prototype.removeDom=function(){var $=this.get("el");$.parentNode.removeChild($)},B.prototype.clearEvents=function(){var $=this.get("eventController");$.destroy()},B.prototype.isCanvas=function(){return!0},B.prototype.getParent=function(){return null},B.prototype.destroy=function(){var $=this.get("timeline");this.get("destroyed")||(this.clear(),$&&$.stop(),this.clearEvents(),this.removeDom(),G.prototype.destroy.call(this))},B}(e.a),pe=Ut.a=Di},Em2t:function(zn,Ut,z){var at=z("bahg"),a=z("quyA"),A=z("0JQy");function e(r){return a(r)?A(r):at(r)}zn.exports=e},"F/eT":function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return at});function at(a){return typeof a=="number"&&!isNaN(a)}},FAXy:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return C});var at=z("mrSG"),a=z("zJSt"),A=z("iTfj"),e=z("w02o"),r=z("YuPD"),p=z("tKoa"),m="liquid";function O(N){return[{percent:N,type:m}]}function l(N){var X=N.chart,tt=N.options,it=tt.percent,pt=tt.color,ft=tt.liquidStyle,Ot=tt.radius,wt=tt.outline,xt=tt.wave;X.scale({percent:{min:0,max:1}}),X.data(O(it));var lt=Object(r.b)({},N,{options:{xField:"type",yField:"percent",widthRatio:Ot,interval:{color:pt,style:ft,shape:"liquid-fill-gauge"}}}),Vt=Object(p.c)(lt).ext,Lt=Vt.geometry;return Lt.customInfo({radius:Ot,outline:wt,wave:xt}),X.legend(!1),X.axis(!1),X.tooltip(!1),N}function E(N,X){var tt=N.chart,it=N.options,pt=it.statistic,ft=it.percent,Ot=it.meta;if(tt.getController("annotation").clear(!0),pt.content&&!pt.content.formatter){var wt=Object(A.get)(Ot,["percent","formatter"]);pt.content.formatter=function(xt){var lt=xt.percent;return wt?wt(lt):(lt*100).toFixed(2)+"%"}}return Object(r.m)(tt,{statistic:pt,plotType:"liquid"},{percent:ft}),X&&tt.render(!0),N}function j(N){return Object(r.e)(l,E,Object(e.f)({}),e.a,e.j,e.c)(N)}var y=z("kXyF"),n=z("qaDU"),s=5e3;function d(N,X,tt){return N+(X-N)*tt}function M(N){var X=Object(at.a)({opacity:1},N.style);return N.color&&!X.fill&&(X.fill=N.color),X}function S(N){var X={fill:"#fff",fillOpacity:0,lineWidth:4},tt=Object(A.mix)({},X,N.style);return N.color&&!tt.stroke&&(tt.stroke=N.color),Object(A.isNumber)(N.opacity)&&(tt.opacity=tt.strokeOpacity=N.opacity),tt}function T(N,X,tt,it){return X===0?[[N+1/2*tt/Math.PI/2,it/2],[N+1/2*tt/Math.PI,it],[N+tt/4,it]]:X===1?[[N+1/2*tt/Math.PI/2*(Math.PI-2),it],[N+1/2*tt/Math.PI/2*(Math.PI-1),it/2],[N+tt/4,0]]:X===2?[[N+1/2*tt/Math.PI/2,-it/2],[N+1/2*tt/Math.PI,-it],[N+tt/4,-it]]:[[N+1/2*tt/Math.PI/2*(Math.PI-2),-it],[N+1/2*tt/Math.PI/2*(Math.PI-1),-it/2],[N+tt/4,0]]}function v(N,X,tt,it,pt,ft,Ot){for(var wt=Math.ceil(2*N/tt*4)*4,xt=[],lt=it;lt<-Math.PI*2;)lt+=Math.PI*2;for(;lt>0;)lt-=Math.PI*2;lt=lt/Math.PI/2*tt;var Vt=ft-N+lt-N*2;xt.push(["M",Vt,X]);for(var Lt=0,Et=0;Et<wt;++Et){var J=Et%4,ht=T(Et*tt/4,J,tt,pt);xt.push(["C",ht[0][0]+Vt,-ht[0][1]+X,ht[1][0]+Vt,-ht[1][1]+X,ht[2][0]+Vt,-ht[2][1]+X]),Et===wt-1&&(Lt=ht[2][0])}return xt.push(["L",Lt+Vt,Ot+N]),xt.push(["L",Vt,Ot+N]),xt.push(["Z"]),xt}function x(N,X,tt,it,pt,ft,Ot,wt,xt){for(var lt=pt.fill,Vt=pt.opacity,Lt=Ot.getBBox(),Et=Lt.maxX-Lt.minX,J=Lt.maxY-Lt.minY,ht=0;ht<it;ht++){var vt=it<=1?0:ht/(it-1),bt=ft.addShape("path",{name:"waterwave-path",attrs:{path:v(wt,Lt.minY+J*tt,xt,0,Et/32,N,X),fill:lt,opacity:d(.2,.9,vt)*Vt}});try{var At=Object(n.a)([["t",xt,0]]);bt.stopAnimate(),bt.animate({matrix:At},{duration:d(.5*s,s,vt),repeat:!0})}catch(q){console.warn("off-screen group animate error!")}}}Object(y.registerShape)("interval","liquid-fill-gauge",{draw:function(X,tt){var it=.5,pt=.5,ft=X.customInfo,Ot=ft.radius,wt=ft.outline,xt=ft.wave,lt=wt.border,Vt=wt.distance,Lt=xt.count,Et=xt.length,J=Object(A.reduce)(X.points,function(P,Y){return Math.min(P,Y.x)},Infinity),ht=this.parsePoint({x:it,y:pt}),vt=this.parsePoint({x:J,y:pt}),bt=ht.x-vt.x,At=Math.min(bt,vt.y*Ot),q=M(X),ct=S(X);tt.addShape("circle",{name:"wrap",attrs:Object(A.mix)(ct,{x:ht.x,y:ht.y,r:At,fill:"transparent",lineWidth:lt})});var ot=tt.addGroup({name:"waves"}),_=ot.setClip({type:"circle",attrs:{x:ht.x,y:ht.y,r:At-Vt-lt/2}});return x(ht.x,ht.y,1-X.points[1].y,Lt,q,ot,_,At*2,Et),tt}});var C=function(N){Object(at.b)(X,N);function X(){var tt=N!==null&&N.apply(this,arguments)||this;return tt.type="liquid",tt}return X.prototype.getDefaultOptions=function(){return{color:"#6a99f9",radius:.9,statistic:{title:!1,content:{formatter:function(it){var pt=it.percent;return(pt*100).toFixed(2)+"%"},style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192}}},X.prototype.changeData=function(tt){this.updateOption({percent:tt}),this.chart.data(O(tt)),E({chart:this.chart,options:this.options},!0)},X.prototype.getSchemaAdaptor=function(){return j},X}(a.a)},FH2j:function(zn,Ut,z){"use strict";z.d(Ut,"getAdjust",function(){return r}),z.d(Ut,"registerAdjust",function(){return p});var at=z("Qci9"),a=z("WbAE"),A=z.n(a),e={},r=function(O){return e[O.toLowerCase()]},p=function(O,l){if(r(O))throw new Error("Adjust type '"+O+"' existed.");e[O.toLowerCase()]=l}},FLLP:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return X});var at=z("mrSG"),a=z("zJSt"),A=z("iTfj"),e=z("w02o"),r=z("tKoa"),p=z("YuPD"),m="$$yField$$",O="$$diffField$$",l="$$absoluteField$$",E="$$isTotal$$";function j(tt,it,pt,ft,Ot){var wt,xt=[];if(Object(A.reduce)(tt,function(Vt,Lt){var Et;Object(p.j)(p.a.WARN,Object(A.isNumber)(Lt[pt]),Lt[pt]+" is not a valid number");var J=Object(A.isUndefined)(Lt[pt])?null:Lt[pt];return xt.push(Object(at.a)(Object(at.a)({},Lt),(Et={},Et[ft]=[Vt,Vt+J],Et))),Vt+J},0),xt.length&&Ot){var lt=Object(A.get)(xt,[[tt.length-1],ft,[1]]);xt.push((wt={},wt[it]=Ot.label,wt[pt]=lt,wt[ft]=[0,lt],wt))}return xt}function y(tt,it,pt,ft){var Ot=j(tt,it,pt,m,ft);return Ot.map(function(wt,xt){var lt;return Object(A.isObject)(wt)?Object(at.a)(Object(at.a)({},wt),(lt={},lt[l]=wt[m][1],lt[O]=wt[m][1]-wt[m][0],lt[E]=xt===tt.length,lt)):wt})}var n=z("kXyF");function s(tt){for(var it=[],pt=0;pt<tt.length;pt++){var ft=tt[pt];if(ft){var Ot=pt===0?"M":"L";it.push([Ot,ft.x,ft.y])}}var wt=tt[0];return it.push(["L",wt.x,wt.y]),it.push(["z"]),it}function d(tt){return Object(p.b)({},tt.defaultStyle,tt.style,{fill:tt.color})}Object(n.registerShape)("interval","waterfall",{draw:function(it,pt){var ft=it.customInfo,Ot=it.points,wt=it.nextPoints,xt=pt.addGroup(),lt=this.parsePath(s(Ot)),Vt=d(it);xt.addShape("path",{attrs:Object(at.a)(Object(at.a)({},Vt),{path:lt})});var Lt=Object(A.get)(ft,"leaderLine");if(Lt&&wt){var Et=[["M",Ot[2].x,Ot[2].y],["L",wt[0].x,wt[0].y]];Ot[2].y===wt[1].y&&(Et[1]=["L",wt[1].x,wt[1].y]),Et=this.parsePath(Et),xt.addShape("path",{attrs:Object(at.a)({path:Et},Lt.style||{})})}return xt}});function M(tt){var it=tt.chart,pt=tt.options,ft=pt.data,Ot=pt.xField,wt=pt.yField,xt=pt.total,lt=pt.leaderLine,Vt=pt.columnWidthRatio,Lt=pt.waterfallStyle,Et=pt.risingFill,J=pt.fallingFill,ht=pt.color;it.data(y(ft,Ot,wt,xt));var vt=ht||function(ct){return Object(A.get)(ct,[E])?Object(A.get)(xt,["style","fill"],""):Object(A.get)(ct,[m,1])-Object(A.get)(ct,[m,0])>0?Et:J},bt=Object(p.b)({},tt,{options:{xField:Ot,yField:m,seriesField:Ot,rawFields:[wt,O,E,m],widthRatio:Vt,interval:{style:Lt,shape:"waterfall",color:vt}}}),At=Object(r.c)(bt).ext,q=At.geometry;return q.customInfo({leaderLine:lt}),tt}function S(tt){var it,pt,ft=tt.options,Ot=ft.xAxis,wt=ft.yAxis,xt=ft.xField,lt=ft.yField,Vt=ft.meta,Lt=Object(p.b)({},{alias:lt},Object(A.get)(Vt,lt));return Object(p.e)(Object(e.f)((it={},it[xt]=Ot,it[lt]=wt,it[m]=wt,it),Object(p.b)({},Vt,(pt={},pt[m]=Lt,pt[O]=Lt,pt[l]=Lt,pt))))(tt)}function T(tt){var it=tt.chart,pt=tt.options,ft=pt.xAxis,Ot=pt.yAxis,wt=pt.xField,xt=pt.yField;return ft===!1?it.axis(wt,!1):it.axis(wt,ft),Ot===!1?(it.axis(xt,!1),it.axis(m,!1)):(it.axis(xt,Ot),it.axis(m,Ot)),tt}function v(tt){var it=tt.chart,pt=tt.options,ft=pt.legend,Ot=pt.total,wt=pt.risingFill,xt=pt.fallingFill;if(ft===!1)it.legend(!1);else{var lt=[{name:"\u589E\u52A0",value:"increase",marker:{symbol:"square",style:{r:5,fill:wt}}},{name:"\u51CF\u5C11",value:"decrease",marker:{symbol:"square",style:{r:5,fill:xt}}}];Ot&&lt.push({name:Ot.label||"",value:"total",marker:{symbol:"square",style:Object(p.b)({},{r:5},Object(A.get)(Ot,"style"))}}),it.legend(Object(p.b)({},{custom:!0,position:"top",items:lt},ft)),it.removeInteraction("legend-filter")}return tt}function x(tt){var it=tt.chart,pt=tt.options,ft=pt.label,Ot=pt.labelMode,wt=pt.xField,xt=Object(p.c)(it,"interval");if(!ft)xt.label(!1);else{var lt=ft.callback,Vt=Object(at.c)(ft,["callback"]);xt.label({fields:Ot==="absolute"?[l,wt]:[O,wt],callback:lt,cfg:Object(p.o)(Vt)})}return tt}function C(tt){var it=tt.chart,pt=tt.options,ft=pt.tooltip,Ot=pt.xField,wt=pt.yField;if(ft!==!1){it.tooltip(Object(at.a)({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[wt]},ft));var xt=it.geometries[0];(ft==null?void 0:ft.formatter)?xt.tooltip(Ot+"*"+wt,ft.formatter):xt.tooltip(wt)}else it.tooltip(!1);return tt}function N(tt){return Object(p.e)(M,S,T,v,C,x,e.i,e.j,e.c,e.a,Object(e.b)())(tt)}var X=function(tt){Object(at.b)(it,tt);function it(){var pt=tt!==null&&tt.apply(this,arguments)||this;return pt.type="waterfall",pt}return it.prototype.changeData=function(pt){var ft=this.options,Ot=ft.xField,wt=ft.yField,xt=ft.total;this.updateOption({data:pt}),this.chart.changeData(y(pt,Ot,wt,xt))},it.prototype.getSchemaAdaptor=function(){return N},it.prototype.getDefaultOptions=function(){return{label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{label:"\u603B\u8BA1",style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}}},it}(a.a)},FPPI:function(zn,Ut,z){"use strict";Ut.a=function(at,a,A,e,r){for(var p=at.children,m,O=-1,l=p.length,E=at.value&&(e-a)/at.value;++O<l;)m=p[O],m.y0=A,m.y1=r,m.x0=a,m.x1=a+=m.value*E}},FxDU:function(zn,Ut,z){"use strict";Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.createSensor=void 0;var at=z("QO+J"),a=z("j5sG"),A=typeof ResizeObserver!="undefined"?a.createSensor:at.createSensor;Ut.createSensor=A},I4jL:function(zn,Ut,z){"use strict";z.d(Ut,"b",function(){return A}),z.d(Ut,"c",function(){return e});var at=z("FPPI"),a=z("7IPS"),A=(1+Math.sqrt(5))/2;function e(r,p,m,O,l,E){for(var j=[],y=p.children,n,s,d=0,M=0,S=y.length,T,v,x=p.value,C,N,X,tt,it,pt,ft;d<S;){T=l-m,v=E-O;do C=y[M++].value;while(!C&&M<S);for(N=X=C,pt=Math.max(v/T,T/v)/(x*r),ft=C*C*pt,it=Math.max(X/ft,ft/N);M<S;++M){if(C+=s=y[M].value,s<N&&(N=s),s>X&&(X=s),ft=C*C*pt,tt=Math.max(X/ft,ft/N),tt>it){C-=s;break}it=tt}j.push(n={value:C,dice:T<v,children:y.slice(d,M)}),n.dice?Object(at.a)(n,m,O,l,x?O+=v*C/x:E):Object(a.a)(n,m,O,x?m+=T*C/x:l,E),x-=C,d=M}return j}Ut.a=function r(p){function m(O,l,E,j,y){e(p,O,l,E,j,y)}return m.ratio=function(O){return r((O=+O)>1?O:1)},m}(A)},I7nc:function(zn,Ut,z){"use strict";z.d(Ut,"b",function(){return A}),z.d(Ut,"a",function(){return e});var at=z("iTfj"),a="Invalid field: it must be a string!";function A(r,p){var m=r.field,O=r.fields;if(Object(at.isString)(m))return m;if(Object(at.isArray)(m))return console.warn(a),m[0];if(console.warn(a+" will try to get fields instead."),Object(at.isString)(O))return O;if(Object(at.isArray)(O)&&O.length)return O[0];if(p)return p;throw new TypeError(a)}function e(r){var p=[];return r&&r.each?r.each(function(m){p.push(m)}):r&&r.eachNode&&r.eachNode(function(m){p.push(m)}),p}},IeU1:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return at}),z.d(Ut,"b",function(){return a});function at(A){return A==null?null:a(A)}function a(A){if(typeof A!="function")throw new Error;return A}},IvmH:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return at}),z.d(Ut,"b",function(){return a});var at={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},a={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},A=["click","mousedown","mouseup","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","wheel"]},KMYG:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return r});var at=z("mrSG"),a=z("5HRO"),A=z("YuPD"),e=z("WOQw");function r(p){var m=p.options,O=m.polygon,l=m.xField,E=m.yField,j=m.seriesField,y=m.tooltip,n=Object(a.a)(y,[l,E,j]),s=n.fields,d=n.formatter;return O?Object(e.a)(Object(A.b)({},p,{options:{type:"polygon",colorField:j,tooltipFields:s,mapping:Object(at.a)({tooltip:d},O)}})):p}},KavR:function(zn,Ut,z){"use strict";var at=z("AA7f"),a=z("iTfj"),A=z("0Xep"),e=z("Qci9");function r(m,O){return(O-m)*Math.random()+m}var p=function(m){Object(at.b)(O,m);function O(){return m!==null&&m.apply(this,arguments)||this}return O.prototype.process=function(l){var E=a.clone(l),j=a.flatten(E);return this.adjustData(E,j),E},O.prototype.adjustDim=function(l,E,j){var y=this,n=this.groupData(j,l);return a.each(n,function(s,d){return y.adjustGroup(s,l,parseFloat(d),E)})},O.prototype.getAdjustOffset=function(l){var E=l.pre,j=l.next,y=(j-E)*A.c;return r(E+y,j-y)},O.prototype.adjustGroup=function(l,E,j,y){var n=this,s=this.getAdjustRange(E,j,y);return a.each(l,function(d){d[E]=n.getAdjustOffset(s)}),l},O}(e.a);Ut.a=p},Kvyg:function(zn,Ut,z){},KxBF:function(zn,Ut){function z(at,a,A){var e=-1,r=at.length;a<0&&(a=-a>r?0:r+a),A=A>r?r:A,A<0&&(A+=r),r=a>A?0:A-a>>>0,a>>>=0;for(var p=Array(r);++e<r;)p[e]=at[e+a];return p}zn.exports=z},L16w:function(zn,Ut,z){"use strict";Ut.a={fontFamily:`
  "-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4}},LmB6:function(zn,Ut,z){"use strict";var at=z("mrSG"),a=z("f6Jy"),A=z("sstZ"),e=function(r){Object(at.b)(p,r);function p(m){var O=r.call(this)||this;O.destroyed=!1;var l=O.getDefaultCfg();return O.cfg=Object(A.i)(l,m),O}return p.prototype.getDefaultCfg=function(){return{}},p.prototype.get=function(m){return this.cfg[m]},p.prototype.set=function(m,O){this.cfg[m]=O},p.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},p}(a.a);Ut.a=e},LvGN:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return p}),z.d(Ut,"c",function(){return C}),z.d(Ut,"d",function(){return tt}),z.d(Ut,"e",function(){return F}),z.d(Ut,"b",function(){return Ft});var at=z("iTfj"),a=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,A=/[^\s\,]+/ig;function e(Tt){var zt=Tt||[];if(Object(at.isArray)(zt))return zt;if(Object(at.isString)(zt))return zt=zt.match(a),Object(at.each)(zt,function(Xt,re){if(Xt=Xt.match(A),Xt[0].length>1){var de=Xt[0].charAt(0);Xt.splice(1,0,Xt[0].substr(1)),Xt[0]=de}Object(at.each)(Xt,function(ye,we){isNaN(ye)||(Xt[we]=+ye)}),zt[re]=Xt}),zt}var r=e;function p(Tt,zt){for(var Xt=[],re=0,de=Tt.length;de-2*!zt>re;re+=2){var ye=[{x:+Tt[re-2],y:+Tt[re-1]},{x:+Tt[re],y:+Tt[re+1]},{x:+Tt[re+2],y:+Tt[re+3]},{x:+Tt[re+4],y:+Tt[re+5]}];zt?re?de-4===re?ye[3]={x:+Tt[0],y:+Tt[1]}:de-2===re&&(ye[2]={x:+Tt[0],y:+Tt[1]},ye[3]={x:+Tt[2],y:+Tt[3]}):ye[0]={x:+Tt[de-2],y:+Tt[de-1]}:de-4===re?ye[3]=ye[2]:re||(ye[0]={x:+Tt[re],y:+Tt[re+1]}),Xt.push(["C",(-ye[0].x+6*ye[1].x+ye[2].x)/6,(-ye[0].y+6*ye[1].y+ye[2].y)/6,(ye[1].x+6*ye[2].x-ye[3].x)/6,(ye[1].y+6*ye[2].y-ye[3].y)/6,ye[2].x,ye[2].y])}return Xt}function m(Tt,zt){var Xt=[],re=[];function de(ye,we){if(ye.length===1)Xt.push(ye[0]),re.push(ye[0]);else{for(var De=[],Ve=0;Ve<ye.length-1;Ve++)Ve===0&&Xt.push(ye[0]),Ve===ye.length-2&&re.push(ye[Ve+1]),De[Ve]=[(1-we)*ye[Ve][0]+we*ye[Ve+1][0],(1-we)*ye[Ve][1]+we*ye[Ve+1][1]];de(De,we)}}return Tt.length&&de(Tt,zt),{left:Xt,right:re.reverse()}}function O(Tt,zt,Xt){var re=[[Tt[1],Tt[2]]];Xt=Xt||2;var de=[];zt[0]==="A"?(re.push(zt[6]),re.push(zt[7])):zt[0]==="C"?(re.push([zt[1],zt[2]]),re.push([zt[3],zt[4]]),re.push([zt[5],zt[6]])):zt[0]==="S"||zt[0]==="Q"?(re.push([zt[1],zt[2]]),re.push([zt[3],zt[4]])):re.push([zt[1],zt[2]]);for(var ye=re,we=1/Xt,De=0;De<Xt-1;De++){var Ve=we/(1-we*De),pn=m(ye,Ve);de.push(pn.left),ye=pn.right}de.push(ye);var sn=de.map(function(In){var An=[];return In.length===4&&(An.push("C"),An=An.concat(In[2])),In.length>=3&&(In.length===3&&An.push("Q"),An=An.concat(In[1])),In.length===2&&An.push("L"),An=An.concat(In[In.length-1]),An});return sn}function l(Tt,zt,Xt){if(Xt===1)return[[].concat(Tt)];var re=[];if(zt[0]==="L"||zt[0]==="C"||zt[0]==="Q")re=re.concat(O(Tt,zt,Xt));else{var de=[].concat(Tt);de[0]==="M"&&(de[0]="L");for(var ye=0;ye<=Xt-1;ye++)re.push(de)}return re}function E(Tt,zt){if(Tt.length===1)return Tt;var Xt=Tt.length-1,re=zt.length-1,de=Xt/re,ye=[];if(Tt.length===1&&Tt[0][0]==="M"){for(var we=0;we<re-Xt;we++)Tt.push(Tt[0]);return Tt}for(var we=0;we<re;we++){var De=Math.floor(de*we);ye[De]=(ye[De]||0)+1}var Ve=ye.reduce(function(pn,sn,In){return In===Xt?pn.concat(Tt[Xt]):pn.concat(l(Tt[In],Tt[In+1],sn))},[]);return Ve.unshift(Tt[0]),(zt[re]==="Z"||zt[re]==="z")&&Ve.push("Z"),Ve}function j(Tt,zt,Xt){var re=null,de=Xt;return zt<de&&(de=zt,re="add"),Tt<de&&(de=Tt,re="del"),{type:re,min:de}}var y=function(zt,Xt){var re=zt.length,de=Xt.length,ye,we,De=0;if(re===0||de===0)return null;for(var Ve=[],pn=0;pn<=re;pn++)Ve[pn]=[],Ve[pn][0]={min:pn};for(var sn=0;sn<=de;sn++)Ve[0][sn]={min:sn};for(var pn=1;pn<=re;pn++){ye=zt[pn-1];for(var sn=1;sn<=de;sn++){we=Xt[sn-1],Object(at.isEqual)(ye,we)?De=0:De=1;var In=Ve[pn-1][sn].min+1,An=Ve[pn][sn-1].min+1,Rn=Ve[pn-1][sn-1].min+De;Ve[pn][sn]=j(In,An,Rn)}}return Ve};function n(Tt,zt){var Xt=y(Tt,zt),re=Tt.length,de=zt.length,ye=[],we=1,De=1;if(Xt[re][de]!==re){for(var Ve=1;Ve<=re;Ve++){var pn=Xt[Ve][Ve].min;De=Ve;for(var sn=we;sn<=de;sn++)Xt[Ve][sn].min<pn&&(pn=Xt[Ve][sn].min,De=sn);we=De,Xt[Ve][we].type&&ye.push({index:Ve-1,type:Xt[Ve][we].type})}for(var Ve=ye.length-1;Ve>=0;Ve--)we=ye[Ve].index,ye[Ve].type==="add"?Tt.splice(we,0,[].concat(Tt[we])):Tt.splice(we,1)}if(re=Tt.length,re<de)for(var Ve=0;Ve<de-re;Ve++)Tt[re-1][0]==="z"||Tt[re-1][0]==="Z"?Tt.splice(re-2,0,Tt[re-2]):Tt.push(Tt[re-1]);return Tt}function s(Tt){var zt=[];switch(Tt[0]){case"M":zt.push([Tt[1],Tt[2]]);break;case"L":zt.push([Tt[1],Tt[2]]);break;case"A":zt.push([Tt[6],Tt[7]]);break;case"Q":zt.push([Tt[3],Tt[4]]),zt.push([Tt[1],Tt[2]]);break;case"T":zt.push([Tt[1],Tt[2]]);break;case"C":zt.push([Tt[5],Tt[6]]),zt.push([Tt[1],Tt[2]]),zt.push([Tt[3],Tt[4]]);break;case"S":zt.push([Tt[3],Tt[4]]),zt.push([Tt[1],Tt[2]]);break;case"H":zt.push([Tt[1],Tt[1]]);break;case"V":zt.push([Tt[1],Tt[1]]);break;default:}return zt}function d(Tt,zt,Xt){for(var re=[].concat(Tt),de,ye=1/(Xt+1),we=s(zt)[0],De=1;De<=Xt;De++)ye*=De,de=Math.floor(Tt.length*ye),de===0?re.unshift([we[0]*ye+Tt[de][0]*(1-ye),we[1]*ye+Tt[de][1]*(1-ye)]):re.splice(de,0,[we[0]*ye+Tt[de][0]*(1-ye),we[1]*ye+Tt[de][1]*(1-ye)]);return re}function M(Tt,zt){if(Tt.length<=1)return Tt;for(var Xt,re=0;re<zt.length;re++)if(Tt[re][0]!==zt[re][0])switch(Xt=s(Tt[re]),zt[re][0]){case"M":Tt[re]=["M"].concat(Xt[0]);break;case"L":Tt[re]=["L"].concat(Xt[0]);break;case"A":Tt[re]=[].concat(zt[re]),Tt[re][6]=Xt[0][0],Tt[re][7]=Xt[0][1];break;case"Q":if(Xt.length<2)if(re>0)Xt=d(Xt,Tt[re-1],1);else{Tt[re]=zt[re];break}Tt[re]=["Q"].concat(Xt.reduce(function(de,ye){return de.concat(ye)},[]));break;case"T":Tt[re]=["T"].concat(Xt[0]);break;case"C":if(Xt.length<3)if(re>0)Xt=d(Xt,Tt[re-1],2);else{Tt[re]=zt[re];break}Tt[re]=["C"].concat(Xt.reduce(function(de,ye){return de.concat(ye)},[]));break;case"S":if(Xt.length<2)if(re>0)Xt=d(Xt,Tt[re-1],1);else{Tt[re]=zt[re];break}Tt[re]=["S"].concat(Xt.reduce(function(de,ye){return de.concat(ye)},[]));break;default:Tt[re]=zt[re]}return Tt}function S(Tt,zt,Xt,re,de){return de?[["M",+Tt+ +de,zt],["l",Xt-de*2,0],["a",de,de,0,0,1,de,de],["l",0,re-de*2],["a",de,de,0,0,1,-de,de],["l",de*2-Xt,0],["a",de,de,0,0,1,-de,-de],["l",0,de*2-re],["a",de,de,0,0,1,de,-de],["z"]]:[["M",Tt,zt],["l",Xt,0],["l",0,re],["l",-Xt,0],["z"]]}var T=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,v=new RegExp("([a-z])["+T+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+T+"]*,?["+T+"]*)+)","ig"),x=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+T+"]*,?["+T+"]*","ig");function C(Tt){if(!Tt)return null;if(Object(at.isArray)(Tt))return Tt;var zt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},Xt=[];return String(Tt).replace(v,function(re,de,ye){var we=[],De=de.toLowerCase();if(ye.replace(x,function(Ve,pn){pn&&we.push(+pn)}),De==="m"&&we.length>2&&(Xt.push([de].concat(we.splice(0,2))),De="l",de=de==="m"?"l":"L"),De==="o"&&we.length===1&&Xt.push([de,we[0]]),De==="r")Xt.push([de].concat(we));else for(;we.length>=zt[De]&&(Xt.push([de].concat(we.splice(0,zt[De]))),!!zt[De]););return""}),Xt}var N=/[a-z]/;function X(Tt,zt){return[zt[0]+(zt[0]-Tt[0]),zt[1]+(zt[1]-Tt[1])]}function tt(Tt){var zt=C(Tt);if(!zt||!zt.length)return[["M",0,0]];for(var Xt=!1,re=0;re<zt.length;re++){var de=zt[re][0];if(N.test(de)||["V","H","T","S"].indexOf(de)>=0){Xt=!0;break}}if(!Xt)return zt;var ye=[],we=0,De=0,Ve=0,pn=0,sn=0,In,An,Rn=zt[0];(Rn[0]==="M"||Rn[0]==="m")&&(we=+Rn[1],De=+Rn[2],Ve=we,pn=De,sn++,ye[0]=["M",we,De]);for(var re=sn,Mn=zt.length;re<Mn;re++){var Cn=zt[re],Gn=ye[re-1],Xn=[],de=Cn[0],tr=de.toUpperCase();if(de!==tr)switch(Xn[0]=tr,tr){case"A":Xn[1]=Cn[1],Xn[2]=Cn[2],Xn[3]=Cn[3],Xn[4]=Cn[4],Xn[5]=Cn[5],Xn[6]=+Cn[6]+we,Xn[7]=+Cn[7]+De;break;case"V":Xn[1]=+Cn[1]+De;break;case"H":Xn[1]=+Cn[1]+we;break;case"M":Ve=+Cn[1]+we,pn=+Cn[2]+De;break;default:for(var or=1,nr=Cn.length;or<nr;or++)Xn[or]=+Cn[or]+(or%2?we:De)}else Xn=zt[re];switch(tr){case"Z":we=+Ve,De=+pn;break;case"H":we=Xn[1],Xn=["L",we,De];break;case"V":De=Xn[1],Xn=["L",we,De];break;case"T":we=Xn[1],De=Xn[2];var er=X([Gn[1],Gn[2]],[Gn[3],Gn[4]]);Xn=["Q",er[0],er[1],we,De];break;case"S":we=Xn[Xn.length-2],De=Xn[Xn.length-1];var Sr=Gn.length,Vr=X([Gn[Sr-4],Gn[Sr-3]],[Gn[Sr-2],Gn[Sr-1]]);Xn=["C",Vr[0],Vr[1],Xn[1],Xn[2],we,De];break;case"M":Ve=Xn[Xn.length-2],pn=Xn[Xn.length-1];break;default:we=Xn[Xn.length-2],De=Xn[Xn.length-1]}ye.push(Xn)}return ye}var it=function Tt(zt,Xt,re,de,ye,we,De,Ve,pn,sn){re===de&&(re+=1);var In=Math.PI*120/180,An=Math.PI/180*(+ye||0),Rn=[],Mn,Cn,Gn,Xn,tr,or=function(ci,Qr,gi){var Oi=ci*Math.cos(gi)-Qr*Math.sin(gi),bi=ci*Math.sin(gi)+Qr*Math.cos(gi);return{x:Oi,y:bi}};if(sn)Cn=sn[0],Gn=sn[1],Xn=sn[2],tr=sn[3];else{Mn=or(zt,Xt,-An),zt=Mn.x,Xt=Mn.y,Mn=or(Ve,pn,-An),Ve=Mn.x,pn=Mn.y,zt===Ve&&Xt===pn&&(Ve+=1,pn+=1);var nr=(zt-Ve)/2,er=(Xt-pn)/2,Sr=nr*nr/(re*re)+er*er/(de*de);Sr>1&&(Sr=Math.sqrt(Sr),re=Sr*re,de=Sr*de);var Vr=re*re,ti=de*de,hi=(we===De?-1:1)*Math.sqrt(Math.abs((Vr*ti-Vr*er*er-ti*nr*nr)/(Vr*er*er+ti*nr*nr)));Xn=hi*re*er/de+(zt+Ve)/2,tr=hi*-de*nr/re+(Xt+pn)/2,Cn=Math.asin(Number(((Xt-tr)/de).toFixed(9))),Gn=Math.asin(Number(((pn-tr)/de).toFixed(9))),Cn=zt<Xn?Math.PI-Cn:Cn,Gn=Ve<Xn?Math.PI-Gn:Gn,Cn<0&&(Cn=Math.PI*2+Cn),Gn<0&&(Gn=Math.PI*2+Gn),De&&Cn>Gn&&(Cn=Cn-Math.PI*2),!De&&Gn>Cn&&(Gn=Gn-Math.PI*2)}var Fi=Gn-Cn;if(Math.abs(Fi)>In){var to=Gn,si=Ve,Ti=pn;Gn=Cn+In*(De&&Gn>Cn?1:-1),Ve=Xn+re*Math.cos(Gn),pn=tr+de*Math.sin(Gn),Rn=Tt(Ve,pn,re,de,ye,0,De,si,Ti,[Gn,to,Xn,tr])}Fi=Gn-Cn;var Ui=Math.cos(Cn),Li=Math.sin(Cn),Vi=Math.cos(Gn),ro=Math.sin(Gn),jr=Math.tan(Fi/4),Ji=4/3*re*jr,pr=4/3*de*jr,Xr=[zt,Xt],Br=[zt+Ji*Li,Xt-pr*Ui],Nr=[Ve+Ji*ro,pn-pr*Vi],Yr=[Ve,pn];if(Br[0]=2*Xr[0]-Br[0],Br[1]=2*Xr[1]-Br[1],sn)return[Br,Nr,Yr].concat(Rn);Rn=[Br,Nr,Yr].concat(Rn).join().split(",");for(var Kr=[],ni=0,fi=Rn.length;ni<fi;ni++)Kr[ni]=ni%2?or(Rn[ni-1],Rn[ni],An).y:or(Rn[ni],Rn[ni+1],An).x;return Kr},pt=function(zt,Xt,re,de){return[zt,Xt,re,de,re,de]},ft=function(zt,Xt,re,de,ye,we){var De=1/3,Ve=2/3;return[De*zt+Ve*re,De*Xt+Ve*de,De*ye+Ve*re,De*we+Ve*de,ye,we]};function Ot(Tt,zt){var Xt=tt(Tt),re=zt&&tt(zt),de={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ye={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},we=[],De=[],Ve="",pn="",sn,In=function(nr,er,Sr){var Vr,ti;if(!nr)return["C",er.x,er.y,er.x,er.y,er.x,er.y];switch(!(nr[0]in{T:1,Q:1})&&(er.qx=er.qy=null),nr[0]){case"M":er.X=nr[1],er.Y=nr[2];break;case"A":nr=["C"].concat(it.apply(0,[er.x,er.y].concat(nr.slice(1))));break;case"S":Sr==="C"||Sr==="S"?(Vr=er.x*2-er.bx,ti=er.y*2-er.by):(Vr=er.x,ti=er.y),nr=["C",Vr,ti].concat(nr.slice(1));break;case"T":Sr==="Q"||Sr==="T"?(er.qx=er.x*2-er.qx,er.qy=er.y*2-er.qy):(er.qx=er.x,er.qy=er.y),nr=["C"].concat(ft(er.x,er.y,er.qx,er.qy,nr[1],nr[2]));break;case"Q":er.qx=nr[1],er.qy=nr[2],nr=["C"].concat(ft(er.x,er.y,nr[1],nr[2],nr[3],nr[4]));break;case"L":nr=["C"].concat(pt(er.x,er.y,nr[1],nr[2]));break;case"H":nr=["C"].concat(pt(er.x,er.y,nr[1],er.y));break;case"V":nr=["C"].concat(pt(er.x,er.y,er.x,nr[1]));break;case"Z":nr=["C"].concat(pt(er.x,er.y,er.X,er.Y));break;default:break}return nr},An=function(nr,er){if(nr[er].length>7){nr[er].shift();for(var Sr=nr[er];Sr.length;)we[er]="A",re&&(De[er]="A"),nr.splice(er++,0,["C"].concat(Sr.splice(0,6)));nr.splice(er,1),sn=Math.max(Xt.length,re&&re.length||0)}},Rn=function(nr,er,Sr,Vr,ti){nr&&er&&nr[ti][0]==="M"&&er[ti][0]!=="M"&&(er.splice(ti,0,["M",Vr.x,Vr.y]),Sr.bx=0,Sr.by=0,Sr.x=nr[ti][1],Sr.y=nr[ti][2],sn=Math.max(Xt.length,re&&re.length||0))};sn=Math.max(Xt.length,re&&re.length||0);for(var Mn=0;Mn<sn;Mn++){Xt[Mn]&&(Ve=Xt[Mn][0]),Ve!=="C"&&(we[Mn]=Ve,Mn&&(pn=we[Mn-1])),Xt[Mn]=In(Xt[Mn],de,pn),we[Mn]!=="A"&&Ve==="C"&&(we[Mn]="C"),An(Xt,Mn),re&&(re[Mn]&&(Ve=re[Mn][0]),Ve!=="C"&&(De[Mn]=Ve,Mn&&(pn=De[Mn-1])),re[Mn]=In(re[Mn],ye,pn),De[Mn]!=="A"&&Ve==="C"&&(De[Mn]="C"),An(re,Mn)),Rn(Xt,re,de,ye,Mn),Rn(re,Xt,ye,de,Mn);var Cn=Xt[Mn],Gn=re&&re[Mn],Xn=Cn.length,tr=re&&Gn.length;de.x=Cn[Xn-2],de.y=Cn[Xn-1],de.bx=parseFloat(Cn[Xn-4])||de.x,de.by=parseFloat(Cn[Xn-3])||de.y,ye.bx=re&&(parseFloat(Gn[tr-4])||ye.x),ye.by=re&&(parseFloat(Gn[tr-3])||ye.y),ye.x=re&&Gn[tr-2],ye.y=re&&Gn[tr-1]}return re?[Xt,re]:Xt}var wt=function(zt,Xt,re,de,ye){var we=-3*Xt+9*re-9*de+3*ye,De=zt*we+6*Xt-12*re+6*de;return zt*De-3*Xt+3*re},xt=function(zt,Xt,re,de,ye,we,De,Ve,pn){pn===null&&(pn=1),pn=pn>1?1:pn<0?0:pn;for(var sn=pn/2,In=12,An=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Rn=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Mn=0,Cn=0;Cn<In;Cn++){var Gn=sn*An[Cn]+sn,Xn=wt(Gn,zt,re,ye,De),tr=wt(Gn,Xt,de,we,Ve),or=Xn*Xn+tr*tr;Mn+=Rn[Cn]*Math.sqrt(or)}return sn*Mn},lt=function(zt,Xt,re,de,ye,we,De,Ve){for(var pn=[],sn=[[],[]],In,An,Rn,Mn,Cn=0;Cn<2;++Cn){if(Cn===0?(An=6*zt-12*re+6*ye,In=-3*zt+9*re-9*ye+3*De,Rn=3*re-3*zt):(An=6*Xt-12*de+6*we,In=-3*Xt+9*de-9*we+3*Ve,Rn=3*de-3*Xt),Math.abs(In)<1e-12){if(Math.abs(An)<1e-12)continue;Mn=-Rn/An,Mn>0&&Mn<1&&pn.push(Mn);continue}var Gn=An*An-4*Rn*In,Xn=Math.sqrt(Gn);if(!(Gn<0)){var tr=(-An+Xn)/(2*In);tr>0&&tr<1&&pn.push(tr);var or=(-An-Xn)/(2*In);or>0&&or<1&&pn.push(or)}}for(var nr=pn.length,er=nr,Sr;nr--;)Mn=pn[nr],Sr=1-Mn,sn[0][nr]=Sr*Sr*Sr*zt+3*Sr*Sr*Mn*re+3*Sr*Mn*Mn*ye+Mn*Mn*Mn*De,sn[1][nr]=Sr*Sr*Sr*Xt+3*Sr*Sr*Mn*de+3*Sr*Mn*Mn*we+Mn*Mn*Mn*Ve;return sn[0][er]=zt,sn[1][er]=Xt,sn[0][er+1]=De,sn[1][er+1]=Ve,sn[0].length=sn[1].length=er+2,{min:{x:Math.min.apply(0,sn[0]),y:Math.min.apply(0,sn[1])},max:{x:Math.max.apply(0,sn[0]),y:Math.max.apply(0,sn[1])}}},Vt=function(zt,Xt,re,de,ye,we,De,Ve){if(!(Math.max(zt,re)<Math.min(ye,De)||Math.min(zt,re)>Math.max(ye,De)||Math.max(Xt,de)<Math.min(we,Ve)||Math.min(Xt,de)>Math.max(we,Ve))){var pn=(zt*de-Xt*re)*(ye-De)-(zt-re)*(ye*Ve-we*De),sn=(zt*de-Xt*re)*(we-Ve)-(Xt-de)*(ye*Ve-we*De),In=(zt-re)*(we-Ve)-(Xt-de)*(ye-De);if(!!In){var An=pn/In,Rn=sn/In,Mn=+An.toFixed(2),Cn=+Rn.toFixed(2);if(!(Mn<+Math.min(zt,re).toFixed(2)||Mn>+Math.max(zt,re).toFixed(2)||Mn<+Math.min(ye,De).toFixed(2)||Mn>+Math.max(ye,De).toFixed(2)||Cn<+Math.min(Xt,de).toFixed(2)||Cn>+Math.max(Xt,de).toFixed(2)||Cn<+Math.min(we,Ve).toFixed(2)||Cn>+Math.max(we,Ve).toFixed(2)))return{x:An,y:Rn}}}},Lt=function(zt,Xt,re){return Xt>=zt.x&&Xt<=zt.x+zt.width&&re>=zt.y&&re<=zt.y+zt.height},Et=function(zt,Xt,re,de){return zt===null&&(zt=Xt=re=de=0),Xt===null&&(Xt=zt.y,re=zt.width,de=zt.height,zt=zt.x),{x:zt,y:Xt,width:re,w:re,height:de,h:de,x2:zt+re,y2:Xt+de,cx:zt+re/2,cy:Xt+de/2,r1:Math.min(re,de)/2,r2:Math.max(re,de)/2,r0:Math.sqrt(re*re+de*de)/2,path:S(zt,Xt,re,de),vb:[zt,Xt,re,de].join(" ")}},J=function(zt,Xt){return zt=Et(zt),Xt=Et(Xt),Lt(Xt,zt.x,zt.y)||Lt(Xt,zt.x2,zt.y)||Lt(Xt,zt.x,zt.y2)||Lt(Xt,zt.x2,zt.y2)||Lt(zt,Xt.x,Xt.y)||Lt(zt,Xt.x2,Xt.y)||Lt(zt,Xt.x,Xt.y2)||Lt(zt,Xt.x2,Xt.y2)||(zt.x<Xt.x2&&zt.x>Xt.x||Xt.x<zt.x2&&Xt.x>zt.x)&&(zt.y<Xt.y2&&zt.y>Xt.y||Xt.y<zt.y2&&Xt.y>zt.y)},ht=function(zt,Xt,re,de,ye,we,De,Ve){Object(at.isArray)(zt)||(zt=[zt,Xt,re,de,ye,we,De,Ve]);var pn=lt.apply(null,zt);return Et(pn.min.x,pn.min.y,pn.max.x-pn.min.x,pn.max.y-pn.min.y)},vt=function(zt,Xt,re,de,ye,we,De,Ve,pn){var sn=1-pn,In=Math.pow(sn,3),An=Math.pow(sn,2),Rn=pn*pn,Mn=Rn*pn,Cn=In*zt+An*3*pn*re+sn*3*pn*pn*ye+Mn*De,Gn=In*Xt+An*3*pn*de+sn*3*pn*pn*we+Mn*Ve,Xn=zt+2*pn*(re-zt)+Rn*(ye-2*re+zt),tr=Xt+2*pn*(de-Xt)+Rn*(we-2*de+Xt),or=re+2*pn*(ye-re)+Rn*(De-2*ye+re),nr=de+2*pn*(we-de)+Rn*(Ve-2*we+de),er=sn*zt+pn*re,Sr=sn*Xt+pn*de,Vr=sn*ye+pn*De,ti=sn*we+pn*Ve,hi=90-Math.atan2(Xn-or,tr-nr)*180/Math.PI;return{x:Cn,y:Gn,m:{x:Xn,y:tr},n:{x:or,y:nr},start:{x:er,y:Sr},end:{x:Vr,y:ti},alpha:hi}},bt=function(zt,Xt,re){var de=ht(zt),ye=ht(Xt);if(!J(de,ye))return re?0:[];for(var we=xt.apply(0,zt),De=xt.apply(0,Xt),Ve=~~(we/8),pn=~~(De/8),sn=[],In=[],An={},Rn=re?0:[],Mn=0;Mn<Ve+1;Mn++){var Cn=vt.apply(0,zt.concat(Mn/Ve));sn.push({x:Cn.x,y:Cn.y,t:Mn/Ve})}for(var Mn=0;Mn<pn+1;Mn++){var Cn=vt.apply(0,Xt.concat(Mn/pn));In.push({x:Cn.x,y:Cn.y,t:Mn/pn})}for(var Mn=0;Mn<Ve;Mn++)for(var Gn=0;Gn<pn;Gn++){var Xn=sn[Mn],tr=sn[Mn+1],or=In[Gn],nr=In[Gn+1],er=Math.abs(tr.x-Xn.x)<.001?"y":"x",Sr=Math.abs(nr.x-or.x)<.001?"y":"x",Vr=Vt(Xn.x,Xn.y,tr.x,tr.y,or.x,or.y,nr.x,nr.y);if(Vr){if(An[Vr.x.toFixed(4)]===Vr.y.toFixed(4))continue;An[Vr.x.toFixed(4)]=Vr.y.toFixed(4);var ti=Xn.t+Math.abs((Vr[er]-Xn[er])/(tr[er]-Xn[er]))*(tr.t-Xn.t),hi=or.t+Math.abs((Vr[Sr]-or[Sr])/(nr[Sr]-or[Sr]))*(nr.t-or.t);ti>=0&&ti<=1&&hi>=0&&hi<=1&&(re?Rn++:Rn.push({x:Vr.x,y:Vr.y,t1:ti,t2:hi}))}}return Rn},At=function(zt,Xt,re){zt=Ot(zt),Xt=Ot(Xt);for(var de,ye,we,De,Ve,pn,sn,In,An,Rn,Mn=re?0:[],Cn=0,Gn=zt.length;Cn<Gn;Cn++){var Xn=zt[Cn];if(Xn[0]==="M")de=Ve=Xn[1],ye=pn=Xn[2];else{Xn[0]==="C"?(An=[de,ye].concat(Xn.slice(1)),de=An[6],ye=An[7]):(An=[de,ye,de,ye,Ve,pn,Ve,pn],de=Ve,ye=pn);for(var tr=0,or=Xt.length;tr<or;tr++){var nr=Xt[tr];if(nr[0]==="M")we=sn=nr[1],De=In=nr[2];else{nr[0]==="C"?(Rn=[we,De].concat(nr.slice(1)),we=Rn[6],De=Rn[7]):(Rn=[we,De,we,De,sn,In,sn,In],we=sn,De=In);var er=bt(An,Rn,re);if(re)Mn+=er;else{for(var Sr=0,Vr=er.length;Sr<Vr;Sr++)er[Sr].segment1=Cn,er[Sr].segment2=tr,er[Sr].bez1=An,er[Sr].bez2=Rn;Mn=Mn.concat(er)}}}}}return Mn};function q(Tt,zt){return At(Tt,zt)}var ct=/,?([a-z]),?/gi;function ot(Tt){return Tt.join(",").replace(ct,"$1")}function _(Tt){return Math.sqrt(Tt[0]*Tt[0]+Tt[1]*Tt[1])}function P(Tt,zt){return _(Tt)*_(zt)?(Tt[0]*zt[0]+Tt[1]*zt[1])/(_(Tt)*_(zt)):1}function Y(Tt,zt){return(Tt[0]*zt[1]<Tt[1]*zt[0]?-1:1)*Math.acos(P(Tt,zt))}function k(Tt,zt){return Tt[0]===zt[0]&&Tt[1]===zt[1]}function h(Tt,zt){var Xt=zt[1],re=zt[2],de=Object(at.mod)(Object(at.toRadian)(zt[3]),Math.PI*2),ye=zt[4],we=zt[5],De=Tt[0],Ve=Tt[1],pn=zt[6],sn=zt[7],In=Math.cos(de)*(De-pn)/2+Math.sin(de)*(Ve-sn)/2,An=-1*Math.sin(de)*(De-pn)/2+Math.cos(de)*(Ve-sn)/2,Rn=In*In/(Xt*Xt)+An*An/(re*re);Rn>1&&(Xt*=Math.sqrt(Rn),re*=Math.sqrt(Rn));var Mn=Xt*Xt*(An*An)+re*re*(In*In),Cn=Mn?Math.sqrt((Xt*Xt*(re*re)-Mn)/Mn):1;ye===we&&(Cn*=-1),isNaN(Cn)&&(Cn=0);var Gn=re?Cn*Xt*An/re:0,Xn=Xt?Cn*-re*In/Xt:0,tr=(De+pn)/2+Math.cos(de)*Gn-Math.sin(de)*Xn,or=(Ve+sn)/2+Math.sin(de)*Gn+Math.cos(de)*Xn,nr=[(In-Gn)/Xt,(An-Xn)/re],er=[(-1*In-Gn)/Xt,(-1*An-Xn)/re],Sr=Y([1,0],nr),Vr=Y(nr,er);return P(nr,er)<=-1&&(Vr=Math.PI),P(nr,er)>=1&&(Vr=0),we===0&&Vr>0&&(Vr=Vr-2*Math.PI),we===1&&Vr<0&&(Vr=Vr+2*Math.PI),{cx:tr,cy:or,rx:k(Tt,[pn,sn])?0:Xt,ry:k(Tt,[pn,sn])?0:re,startAngle:Sr,endAngle:Sr+Vr,xRotation:de,arcFlag:ye,sweepFlag:we}}function g(Tt,zt){return[zt[0]+(zt[0]-Tt[0]),zt[1]+(zt[1]-Tt[1])]}function F(Tt){Tt=r(Tt);for(var zt=[],Xt=null,re=null,de=null,ye=0,we=Tt.length,De=0;De<we;De++){var Ve=Tt[De];re=Tt[De+1];var pn=Ve[0],sn={command:pn,prePoint:Xt,params:Ve,startTangent:null,endTangent:null};switch(pn){case"M":de=[Ve[1],Ve[2]],ye=De;break;case"A":var In=h(Xt,Ve);sn.arcParams=In;break;default:break}if(pn==="Z")Xt=de,re=Tt[ye+1];else{var An=Ve.length;Xt=[Ve[An-2],Ve[An-1]]}re&&re[0]==="Z"&&(re=Tt[ye],zt[ye]&&(zt[ye].prePoint=Xt)),sn.currentPoint=Xt,zt[ye]&&k(Xt,zt[ye].currentPoint)&&(zt[ye].prePoint=sn.prePoint);var Rn=re?[re[re.length-2],re[re.length-1]]:null;sn.nextPoint=Rn;var Mn=sn.prePoint;if(["L","H","V"].includes(pn))sn.startTangent=[Mn[0]-Xt[0],Mn[1]-Xt[1]],sn.endTangent=[Xt[0]-Mn[0],Xt[1]-Mn[1]];else if(pn==="Q"){var Cn=[Ve[1],Ve[2]];sn.startTangent=[Mn[0]-Cn[0],Mn[1]-Cn[1]],sn.endTangent=[Xt[0]-Cn[0],Xt[1]-Cn[1]]}else if(pn==="T"){var Gn=zt[De-1],Cn=g(Gn.currentPoint,Mn);Gn.command==="Q"?(sn.command="Q",sn.startTangent=[Mn[0]-Cn[0],Mn[1]-Cn[1]],sn.endTangent=[Xt[0]-Cn[0],Xt[1]-Cn[1]]):(sn.command="TL",sn.startTangent=[Mn[0]-Xt[0],Mn[1]-Xt[1]],sn.endTangent=[Xt[0]-Mn[0],Xt[1]-Mn[1]])}else if(pn==="C"){var Xn=[Ve[1],Ve[2]],tr=[Ve[3],Ve[4]];sn.startTangent=[Mn[0]-Xn[0],Mn[1]-Xn[1]],sn.endTangent=[Xt[0]-tr[0],Xt[1]-tr[1]]}else if(pn==="S"){var Gn=zt[De-1],Xn=g(Gn.currentPoint,Mn),tr=[Ve[1],Ve[2]];Gn.command==="C"?(sn.command="C",sn.startTangent=[Mn[0]-Xn[0],Mn[1]-Xn[1]],sn.endTangent=[Xt[0]-tr[0],Xt[1]-tr[1]]):(sn.command="SQ",sn.startTangent=[Mn[0]-tr[0],Mn[1]-tr[1]],sn.endTangent=[Xt[0]-tr[0],Xt[1]-tr[1]])}else if(pn==="A"){var or=.001,nr=sn.arcParams||{},er=nr.cx,Sr=er===void 0?0:er,Vr=nr.cy,ti=Vr===void 0?0:Vr,hi=nr.rx,Fi=hi===void 0?0:hi,to=nr.ry,si=to===void 0?0:to,Ti=nr.sweepFlag,Ui=Ti===void 0?0:Ti,Li=nr.startAngle,Vi=Li===void 0?0:Li,ro=nr.endAngle,jr=ro===void 0?0:ro;Ui===0&&(or*=-1);var Ji=Fi*Math.cos(Vi-or)+Sr,pr=si*Math.sin(Vi-or)+ti;sn.startTangent=[Ji-de[0],pr-de[1]];var Xr=Fi*Math.cos(Vi+jr+or)+Sr,Br=si*Math.sin(Vi+jr-or)+ti;sn.endTangent=[Mn[0]-Xr,Mn[1]-Br]}zt.push(sn)}return zt}var V=function(zt,Xt,re){return zt>=Xt&&zt<=re};function H(Tt,zt,Xt,re){var de=.001,ye={x:Xt.x-Tt.x,y:Xt.y-Tt.y},we={x:zt.x-Tt.x,y:zt.y-Tt.y},De={x:re.x-Xt.x,y:re.y-Xt.y},Ve=we.x*De.y-we.y*De.x,pn=Ve*Ve,sn=we.x*we.x+we.y*we.y,In=De.x*De.x+De.y*De.y,An=null;if(pn>de*sn*In){var Rn=(ye.x*De.y-ye.y*De.x)/Ve,Mn=(ye.x*we.y-ye.y*we.x)/Ve;V(Rn,0,1)&&V(Mn,0,1)&&(An={x:Tt.x+Rn*we.x,y:Tt.y+Rn*we.y})}return An}var et=1e-6;function nt(Tt){return Math.abs(Tt)<et?0:Tt<0?-1:1}function St(Tt,zt,Xt){return(Xt[0]-Tt[0])*(zt[1]-Tt[1])==(zt[0]-Tt[0])*(Xt[1]-Tt[1])&&Math.min(Tt[0],zt[0])<=Xt[0]&&Xt[0]<=Math.max(Tt[0],zt[0])&&Math.min(Tt[1],zt[1])<=Xt[1]&&Xt[1]<=Math.max(Tt[1],zt[1])}function dt(Tt,zt,Xt){var re=!1,de=Tt.length;if(de<=2)return!1;for(var ye=0;ye<de;ye++){var we=Tt[ye],De=Tt[(ye+1)%de];if(St(we,De,[zt,Xt]))return!0;nt(we[1]-Xt)>0!=nt(De[1]-Xt)>0&&nt(zt-(Xt-we[1])*(we[0]-De[0])/(we[1]-De[1])-we[0])<0&&(re=!re)}return re}function gt(Tt){for(var zt=[],Xt=Tt.length,re=0;re<Xt-1;re++){var de=Tt[re],ye=Tt[re+1];zt.push({from:{x:de[0],y:de[1]},to:{x:ye[0],y:ye[1]}})}if(zt.length>1){var we=Tt[0],De=Tt[Xt-1];zt.push({from:{x:De[0],y:De[1]},to:{x:we[0],y:we[1]}})}return zt}function yt(Tt,zt){var Xt=!1;return Object(at.each)(Tt,function(re){if(H(re.from,re.to,zt.from,zt.to))return Xt=!0,!1}),Xt}function Ct(Tt){var zt=Tt.map(function(re){return re[0]}),Xt=Tt.map(function(re){return re[1]});return{minX:Math.min.apply(null,zt),maxX:Math.max.apply(null,zt),minY:Math.min.apply(null,Xt),maxY:Math.max.apply(null,Xt)}}function Pt(Tt,zt){return!(zt.minX>Tt.maxX||zt.maxX<Tt.minX||zt.minY>Tt.maxY||zt.maxY<Tt.minY)}function Ft(Tt,zt){if(Tt.length<2||zt.length<2)return!1;var Xt=Ct(Tt),re=Ct(zt);if(!Pt(Xt,re))return!1;var de=!1;if(Object(at.each)(zt,function(Ve){if(dt(Tt,Ve[0],Ve[1]))return de=!0,!1}),de||(Object(at.each)(Tt,function(Ve){if(dt(zt,Ve[0],Ve[1]))return de=!0,!1}),de))return!0;var ye=gt(Tt),we=gt(zt),De=!1;return Object(at.each)(we,function(Ve){if(yt(ye,Ve))return De=!0,!1}),De}},MXD1:function(zn,Ut,z){"use strict";var at=z("cIOH"),a=z.n(at),A=z("Kvyg"),e=z.n(A)},MaEA:function(zn,Ut,z){"use strict";var at=z("mrSG"),a=z("zK8m"),A=z("aSjE"),e=function(r){Object(at.b)(p,r);function p(m){return r.call(this,m)||this}return p.prototype._isInBBox=function(m,O){var l=this.getBBox();return l.minX<=m&&l.maxX>=m&&l.minY<=O&&l.maxY>=O},p.prototype.afterAttrsChange=function(m){r.prototype.afterAttrsChange.call(this,m),this.clearCacheBBox()},p.prototype.getBBox=function(){var m=this.cfg.bbox;return m||(m=this.calculateBBox(),this.set("bbox",m)),m},p.prototype.getCanvasBBox=function(){var m=this.cfg.canvasBBox;return m||(m=this.calculateCanvasBBox(),this.set("canvasBBox",m)),m},p.prototype.applyMatrix=function(m){r.prototype.applyMatrix.call(this,m),this.set("canvasBBox",null)},p.prototype.calculateCanvasBBox=function(){var m=this.getBBox(),O=this.getTotalMatrix(),l=m.minX,E=m.minY,j=m.maxX,y=m.maxY;if(O){var n=Object(A.c)(O,[m.minX,m.minY]),s=Object(A.c)(O,[m.maxX,m.minY]),d=Object(A.c)(O,[m.minX,m.maxY]),M=Object(A.c)(O,[m.maxX,m.maxY]);l=Math.min(n[0],s[0],d[0],M[0]),j=Math.max(n[0],s[0],d[0],M[0]),E=Math.min(n[1],s[1],d[1],M[1]),y=Math.max(n[1],s[1],d[1],M[1])}var S=this.attrs;if(S.shadowColor){var T=S.shadowBlur,v=T===void 0?0:T,x=S.shadowOffsetX,C=x===void 0?0:x,N=S.shadowOffsetY,X=N===void 0?0:N,tt=l-v+C,it=j+v+C,pt=E-v+X,ft=y+v+X;l=Math.min(l,tt),j=Math.max(j,it),E=Math.min(E,pt),y=Math.max(y,ft)}return{x:l,y:E,minX:l,minY:E,maxX:j,maxY:y,width:j-l,height:y-E}},p.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},p.prototype.isClipShape=function(){return this.get("isClipShape")},p.prototype.isInShape=function(m,O){return!1},p.prototype.isOnlyHitBox=function(){return!1},p.prototype.isHit=function(m,O){var l=this.get("startArrowShape"),E=this.get("endArrowShape"),j=[m,O,1];j=this.invertFromMatrix(j);var y=j[0],n=j[1],s=this._isInBBox(y,n);return this.isOnlyHitBox()?s:!!(s&&!this.isClipped(y,n)&&(this.isInShape(y,n)||l&&l.isHit(y,n)||E&&E.isHit(y,n)))},p}(a.a);Ut.a=e},MeYt:function(zn,Ut,z){"use strict";var at=z("mrSG"),a=z("iTfj"),A=z("1//c"),e=z("jqgP"),r=z("5UbV"),p=z("NmWf"),m="update_status",O=["visible","tip","delegateObject"],l=["container","group","shapesMap","isRegister","isUpdating","destroyed"],E=function(j){Object(at.b)(y,j);function y(){return j!==null&&j.apply(this,arguments)||this}return y.prototype.getDefaultCfg=function(){var n=j.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},n),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},y.prototype.remove=function(){this.clear();var n=this.get("group");n.remove()},y.prototype.clear=function(){var n=this.get("group");n.clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},y.prototype.getChildComponentById=function(n){var s=this.getElementById(n),d=s&&s.get("component");return d},y.prototype.getElementById=function(n){return this.get("shapesMap")[n]},y.prototype.getElementByLocalId=function(n){var s=this.getElementId(n);return this.getElementById(s)},y.prototype.getElementsByName=function(n){var s=[];return Object(a.each)(this.get("shapesMap"),function(d){d.get("name")===n&&s.push(d)}),s},y.prototype.getContainer=function(){return this.get("container")},y.prototype.updateInner=function(n){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},y.prototype.render=function(){var n=this.get("offScreenGroup");n||(n=this.offScreenRender());var s=this.get("group");this.updateElements(n,s),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},y.prototype.show=function(){var n=this.get("group");n.show(),this.set("visible",!0)},y.prototype.hide=function(){var n=this.get("group");n.hide(),this.set("visible",!1)},y.prototype.setCapture=function(n){var s=this.get("group");s.set("capture",n),this.set("capture",n)},y.prototype.destroy=function(){this.removeEvent(),this.remove(),j.prototype.destroy.call(this)},y.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},y.prototype.getLayoutBBox=function(){var n=this.get("group"),s=this.getInnerLayoutBBox(),d=n.getTotalMatrix();return d&&(s=Object(e.a)(d,s)),s},y.prototype.on=function(n,s,d){var M=this.get("group");return M.on(n,s,d),this},y.prototype.off=function(n,s){var d=this.get("group");return d&&d.off(n,s),this},y.prototype.emit=function(n,s){var d=this.get("group");d.emit(n,s)},y.prototype.init=function(){j.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},y.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},y.prototype.delegateEmit=function(n,s){var d=this.get("group");s.target=d,d.emit(n,s),Object(A.a)(d,n,s)},y.prototype.createOffScreenGroup=function(){var n=this.get("group"),s=n.getGroupBase(),d=new s({delegateObject:this.getDelegateObject()});return d},y.prototype.applyOffset=function(){var n=this.get("offsetX"),s=this.get("offsetY");this.moveElementTo(this.get("group"),{x:n,y:s})},y.prototype.initGroup=function(){var n=this.get("container");this.set("group",n.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},y.prototype.offScreenRender=function(){this.clearOffScreenCache();var n=this.createOffScreenGroup();return this.renderInner(n),this.set("offScreenGroup",n),this.set("offScreenBBox",Object(r.d)(n)),n},y.prototype.addGroup=function(n,s){this.appendDelegateObject(n,s);var d=n.addGroup(s);return this.get("isRegister")&&this.registerElement(d),d},y.prototype.addShape=function(n,s){this.appendDelegateObject(n,s);var d=n.addShape(s);return this.get("isRegister")&&this.registerElement(d),d},y.prototype.addComponent=function(n,s){var d=s.id,M=s.component,S=Object(at.c)(s,["id","component"]),T=new M(Object(at.a)(Object(at.a)({},S),{id:d,container:n,updateAutoRender:this.get("updateAutoRender")}));return T.init(),T.render(),this.get("isRegister")&&this.registerElement(T.get("group")),T},y.prototype.initEvent=function(){},y.prototype.removeEvent=function(){var n=this.get("group");n.off()},y.prototype.getElementId=function(n){var s=this.get("id"),d=this.get("name");return s+"-"+d+"-"+n},y.prototype.registerElement=function(n){var s=n.get("id");this.get("shapesMap")[s]=n},y.prototype.unregisterElement=function(n){var s=n.get("id");delete this.get("shapesMap")[s]},y.prototype.moveElementTo=function(n,s){var d=Object(e.f)(s);n.attr("matrix",d)},y.prototype.addAnimation=function(n,s,d){var M=s.attr("opacity");Object(a.isNil)(M)&&(M=1),s.attr("opacity",0),s.animate({opacity:M},d)},y.prototype.removeAnimation=function(n,s,d){s.animate({opacity:0},d)},y.prototype.updateAnimation=function(n,s,d,M){s.animate(d,M)},y.prototype.updateElements=function(n,s){var d=this,M=this.get("animate"),S=this.get("animateOption"),T=n.getChildren().slice(0),v;Object(a.each)(T,function(x){var C=x.get("id"),N=d.getElementById(C),X=x.get("name");if(N)if(x.get("isComponent")){var tt=x.get("component"),it=N.get("component"),pt=Object(a.pick)(tt.cfg,Object(a.difference)(Object(a.keys)(tt.cfg),l));it.update(pt),N.set(m,"update")}else{var ft=d.getReplaceAttrs(N,x);M&&S.update?d.updateAnimation(X,N,ft,S.update):N.attr(ft),x.isGroup()&&d.updateElements(x,N),Object(a.each)(O,function(lt){N.set(lt,x.get(lt))}),Object(r.m)(N,x),v=N,N.set(m,"update")}else{s.add(x);var Ot=s.getChildren();if(Ot.splice(Ot.length-1,1),v){var wt=Ot.indexOf(v);Ot.splice(wt+1,0,x)}else Ot.unshift(x);if(d.registerElement(x),x.set(m,"add"),x.get("isComponent")){var tt=x.get("component");tt.set("container",s)}else x.isGroup()&&d.registerNewGroup(x);if(v=x,M){var xt=d.get("isInit")?S.appear:S.enter;xt&&d.addAnimation(X,x,xt)}}})},y.prototype.clearUpdateStatus=function(n){var s=n.getChildren();Object(a.each)(s,function(d){d.set(m,null)})},y.prototype.clearOffScreenCache=function(){var n=this.get("offScreenGroup");n&&n.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},y.prototype.getDelegateObject=function(){var n,s=this.get("name"),d=(n={},n[s]=this,n.component=this,n);return d},y.prototype.appendDelegateObject=function(n,s){var d=n.get("delegateObject");s.delegateObject||(s.delegateObject={}),Object(a.mix)(s.delegateObject,d)},y.prototype.getReplaceAttrs=function(n,s){var d=n.attr(),M=s.attr();return Object(a.each)(d,function(S,T){M[T]===void 0&&(M[T]=void 0)}),M},y.prototype.registerNewGroup=function(n){var s=this,d=n.getChildren();Object(a.each)(d,function(M){s.registerElement(M),M.set(m,"add"),M.isGroup()&&s.registerNewGroup(M)})},y.prototype.deleteElements=function(){var n=this,s=this.get("shapesMap"),d=[];Object(a.each)(s,function(T,v){!T.get(m)||T.destroyed?d.push([v,T]):T.set(m,null)});var M=this.get("animate"),S=this.get("animateOption");Object(a.each)(d,function(T){var v=T[0],x=T[1];if(!x.destroyed){var C=x.get("name");if(M&&S.leave){var N=Object(a.mix)({callback:function(){n.removeElement(x)}},S.leave);n.removeAnimation(C,x,N)}else n.removeElement(x)}delete s[v]})},y.prototype.removeElement=function(n){if(n.get("isGroup")){var s=n.get("component");s&&s.destroy()}n.remove()},y}(p.a);Ut.a=E},Mj7Y:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return k});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("w02o"),r=z("tKoa"),p=z("iTfj"),m={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function O(h,g){return g=Object(p.assign)({},m,g),l(h,g)}function l(h,g){var F=wt();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach(function(dt){Object(p.isNil)(g[dt])||F[dt](g[dt])}),F.words(h),g.imageMask&&F.createMask(g.imageMask);var V=F.start(),H=V._tags;H.forEach(function(dt){dt.x+=g.size[0]/2,dt.y+=g.size[1]/2});var et=g.size,nt=et[0],St=et[1];return H.push({text:"",value:0,x:0,y:0,opacity:0}),H.push({text:"",value:0,x:nt,y:St,opacity:0}),H}var E=Math.PI/180,j=1<<11>>5,y=1<<11;function n(h){return h.text}function s(){return"serif"}function d(){return"normal"}function M(h){return h.value}function S(){return~~(Math.random()*2)*90}function T(){return 1}function v(h,g,F,V){if(!g.sprite){var H=h.context,et=h.ratio;H.clearRect(0,0,(j<<5)/et,y/et);var nt=0,St=0,dt=0,gt=F.length;for(--V;++V<gt;){g=F[V],H.save(),H.font=g.style+" "+g.weight+" "+~~((g.size+1)/et)+"px "+g.font;var yt=H.measureText(g.text+"m").width*et,Ct=g.size<<1;if(g.rotate){var Pt=Math.sin(g.rotate*E),Ft=Math.cos(g.rotate*E),Tt=yt*Ft,zt=yt*Pt,Xt=Ct*Ft,re=Ct*Pt;yt=Math.max(Math.abs(Tt+re),Math.abs(Tt-re))+31>>5<<5,Ct=~~Math.max(Math.abs(zt+Xt),Math.abs(zt-Xt))}else yt=yt+31>>5<<5;if(Ct>dt&&(dt=Ct),nt+yt>=j<<5&&(nt=0,St+=dt,dt=0),St+Ct>=y)break;H.translate((nt+(yt>>1))/et,(St+(Ct>>1))/et),g.rotate&&H.rotate(g.rotate*E),H.fillText(g.text,0,0),g.padding&&(H.lineWidth=2*g.padding,H.strokeText(g.text,0,0)),H.restore(),g.width=yt,g.height=Ct,g.xoff=nt,g.yoff=St,g.x1=yt>>1,g.y1=Ct>>1,g.x0=-g.x1,g.y0=-g.y1,g.hasText=!0,nt+=yt}for(var de=H.getImageData(0,0,(j<<5)/et,y/et).data,ye=[];--V>=0;)if(g=F[V],!!g.hasText){for(var yt=g.width,we=yt>>5,Ct=g.y1-g.y0,De=0;De<Ct*we;De++)ye[De]=0;if(nt=g.xoff,nt==null)return;St=g.yoff;for(var Ve=0,pn=-1,sn=0;sn<Ct;sn++){for(var De=0;De<yt;De++){var In=we*sn+(De>>5),An=de[(St+sn)*(j<<5)+(nt+De)<<2]?1<<31-De%32:0;ye[In]|=An,Ve|=An}Ve?pn=sn:(g.y0++,Ct--,sn--,St++)}g.y1=g.y0+pn,g.sprite=ye.slice(0,(g.y1-g.y0)*we)}}}function x(h,g,F){F>>=5;for(var V=h.sprite,H=h.width>>5,et=h.x-(H<<4),nt=et&127,St=32-nt,dt=h.y1-h.y0,gt=(h.y+h.y0)*F+(et>>5),yt,Ct=0;Ct<dt;Ct++){yt=0;for(var Pt=0;Pt<=H;Pt++)if((yt<<St|(Pt<H?(yt=V[Ct*H+Pt])>>>nt:0))&g[gt+Pt])return!0;gt+=F}return!1}function C(h,g){var F=h[0],V=h[1];g.x+g.x0<F.x&&(F.x=g.x+g.x0),g.y+g.y0<F.y&&(F.y=g.y+g.y0),g.x+g.x1>V.x&&(V.x=g.x+g.x1),g.y+g.y1>V.y&&(V.y=g.y+g.y1)}function N(h,g){return h.x+h.x1>g[0].x&&h.x+h.x0<g[1].x&&h.y+h.y1>g[0].y&&h.y+h.y0<g[1].y}function X(h){var g=h[0]/h[1];return function(F){return[g*(F*=.1)*Math.cos(F),F*Math.sin(F)]}}function tt(h){var g=4,F=g*h[0]/h[1],V=0,H=0;return function(et){var nt=et<0?-1:1;switch(Math.sqrt(1+4*nt*et)-nt&3){case 0:V+=F;break;case 1:H+=g;break;case 2:V-=F;break;default:H-=g;break}return[V,H]}}function it(h){for(var g=[],F=-1;++F<h;)g[F]=0;return g}function pt(){return document.createElement("canvas")}function ft(h){return Object(p.isFunction)(h)?h:function(){return h}}var Ot={archimedean:X,rectangular:tt};function wt(){var h=[256,256],g=s,F=M,V=d,H=S,et=T,nt=X,St=Math.random,dt=[],gt=Infinity,yt=n,Ct=d,Pt=pt,Ft={};Ft.start=function(){var Xt=h[0],re=h[1],de=Tt(Pt()),ye=Ft.board?Ft.board:it((h[0]>>5)*h[1]),we=dt.length,De=[],Ve=dt.map(function(An,Rn,Mn){return An.text=yt.call(this,An,Rn,Mn),An.font=g.call(this,An,Rn,Mn),An.style=Ct.call(this,An,Rn,Mn),An.weight=V.call(this,An,Rn,Mn),An.rotate=H.call(this,An,Rn,Mn),An.size=~~F.call(this,An,Rn,Mn),An.padding=et.call(this,An,Rn,Mn),An}).sort(function(An,Rn){return Rn.size-An.size}),pn=-1,sn=Ft.board?[{x:0,y:0},{x:Xt,y:re}]:null;In();function In(){for(var An=Date.now();Date.now()-An<gt&&++pn<we;){var Rn=Ve[pn];Rn.x=Xt*(St()+.5)>>1,Rn.y=re*(St()+.5)>>1,v(de,Rn,Ve,pn),Rn.hasText&&zt(ye,Rn,sn)&&(De.push(Rn),sn?Ft.hasImage||C(sn,Rn):sn=[{x:Rn.x+Rn.x0,y:Rn.y+Rn.y0},{x:Rn.x+Rn.x1,y:Rn.y+Rn.y1}],Rn.x-=h[0]>>1,Rn.y-=h[1]>>1)}Ft._tags=De,Ft._bounds=sn}return Ft};function Tt(Xt){Xt.width=Xt.height=1;var re=Math.sqrt(Xt.getContext("2d").getImageData(0,0,1,1).data.length>>2);Xt.width=(j<<5)/re,Xt.height=y/re;var de=Xt.getContext("2d");return de.fillStyle=de.strokeStyle="red",de.textAlign="center",{context:de,ratio:re}}function zt(Xt,re,de){for(var ye=re.x,we=re.y,De=Math.sqrt(h[0]*h[0]+h[1]*h[1]),Ve=nt(h),pn=St()<.5?1:-1,sn,In=-pn,An,Rn;(sn=Ve(In+=pn))&&(An=~~sn[0],Rn=~~sn[1],!(Math.min(Math.abs(An),Math.abs(Rn))>=De));)if(re.x=ye+An,re.y=we+Rn,!(re.x+re.x0<0||re.y+re.y0<0||re.x+re.x1>h[0]||re.y+re.y1>h[1])&&(!de||!x(re,Xt,h[0]))&&(!de||N(re,de))){for(var Mn=re.sprite,Cn=re.width>>5,Gn=h[0]>>5,Xn=re.x-(Cn<<4),tr=Xn&127,or=32-tr,nr=re.y1-re.y0,er=void 0,Sr=(re.y+re.y0)*Gn+(Xn>>5),Vr=0;Vr<nr;Vr++){er=0;for(var ti=0;ti<=Cn;ti++)Xt[Sr+ti]|=er<<or|(ti<Cn?(er=Mn[Vr*Cn+ti])>>>tr:0);Sr+=Gn}return delete re.sprite,!0}return!1}return Ft.createMask=function(Xt){var re=document.createElement("canvas"),de=h[0],ye=h[1];if(!(!de||!ye)){var we=de>>5,De=it((de>>5)*ye);re.width=de,re.height=ye;var Ve=re.getContext("2d");Ve.drawImage(Xt,0,0,Xt.width,Xt.height,0,0,de,ye);for(var pn=Ve.getImageData(0,0,de,ye).data,sn=0;sn<ye;sn++)for(var In=0;In<de;In++){var An=we*sn+(In>>5),Rn=sn*de+In<<2,Mn=pn[Rn]>=250&&pn[Rn+1]>=250&&pn[Rn+2]>=250,Cn=Mn?1<<31-In%32:0;De[An]|=Cn}Ft.board=De,Ft.hasImage=!0}},Ft.timeInterval=function(Xt){gt=Xt==null?Infinity:Xt},Ft.words=function(Xt){dt=Xt},Ft.size=function(Xt){h=[+Xt[0],+Xt[1]]},Ft.font=function(Xt){g=ft(Xt)},Ft.fontWeight=function(Xt){V=ft(Xt)},Ft.rotate=function(Xt){H=ft(Xt)},Ft.spiral=function(Xt){nt=Ot[Xt]||Xt},Ft.fontSize=function(Xt){F=ft(Xt)},Ft.padding=function(Xt){et=ft(Xt)},Ft.random=function(Xt){St=ft(Xt)},Ft}function xt(h){var g=h.options,F=h.chart,V=F,H=V.width,et=V.height,nt=V.padding,St=V.appendPadding,dt=V.ele,gt=g.data,yt=g.imageMask,Ct=g.wordField,Pt=g.weightField,Ft=g.colorField,Tt=g.wordStyle,zt=g.timeInterval,Xt=g.random,re=g.spiral,de=g.autoFit,ye=de===void 0?!0:de,we=g.placementStrategy;if(!gt||!gt.length)return[];var De=Tt.fontFamily,Ve=Tt.fontWeight,pn=Tt.padding,sn=Tt.fontSize,In=ht(gt,Pt),An=[At(In),q(In)],Rn=gt.map(function(Gn){return{text:Gn[Ct],value:Gn[Pt],color:Gn[Ft],datum:Gn}}),Mn={imageMask:yt,font:De,fontSize:J(sn,An),fontWeight:Ve,size:lt({width:H,height:et,padding:nt,appendPadding:St,autoFit:ye,container:dt}),padding:pn,timeInterval:zt,random:Xt,spiral:re,rotate:vt(g)};if(Object(p.isFunction)(we)){var Cn=Rn.map(function(Gn,Xn,tr){return Object(at.a)(Object(at.a)(Object(at.a)({},Gn),{hasText:!!Gn.text,font:ft(Mn.font)(Gn,Xn,tr),weight:ft(Mn.fontWeight)(Gn,Xn,tr),rotate:ft(Mn.rotate)(Gn,Xn,tr),size:ft(Mn.fontSize)(Gn,Xn,tr),style:"normal"}),we.call(F,Gn,Xn,tr))});return Cn.push({text:"",value:0,x:0,y:0,opacity:0}),Cn.push({text:"",value:0,x:Mn.size[0],y:Mn.size[1],opacity:0}),Cn}return O(Rn,Mn)}function lt(h){var g=h.width,F=h.height,V=h.container,H=h.autoFit,et=h.padding,nt=h.appendPadding;if(H){var St=Object(A.g)(V);g=St.width,F=St.height}g=g||400,F=F||400;var dt=Vt({padding:et,appendPadding:nt}),gt=dt[0],yt=dt[1],Ct=dt[2],Pt=dt[3],Ft=[g-(Pt+yt),F-(gt+Ct)];return Ft}function Vt(h){var g=Lt(h.padding),F=Lt(h.appendPadding),V=g[0]+F[0],H=g[1]+F[1],et=g[2]+F[2],nt=g[3]+F[3];return[V,H,et,nt]}function Lt(h){if(Object(p.isNumber)(h))return[h,h,h,h];if(Object(p.isArray)(h)){var g=h.length;if(g===1)return[h[0],h[0],h[0],h[0]];if(g===2)return[h[0],h[1],h[0],h[1]];if(g===3)return[h[0],h[1],h[2],h[1]];if(g===4)return h}return[0,0,0,0]}function Et(h){return new Promise(function(g,F){if(h instanceof HTMLImageElement){g(h);return}if(Object(p.isString)(h)){var V=new Image;V.crossOrigin="anonymous",V.src=h,V.onload=function(){g(V)},V.onerror=function(){Object(A.j)(A.a.ERROR,!1,"image %s load failed !!!",h),F()};return}Object(A.j)(A.a.WARN,h===void 0,"The type of imageMask option must be String or HTMLImageElement."),F()})}function J(h,g){if(Object(p.isFunction)(h))return h;if(Object(p.isArray)(h)){var F=h[0],V=h[1];if(!g)return function(){return(V+F)/2};var H=g[0],et=g[1];return et===H?function(){return(V+F)/2}:function(St){var dt=St.value;return(V-F)/(et-H)*(dt-H)+F}}return function(){return h}}function ht(h,g){return h.map(function(F){return F[g]}).filter(function(F){return typeof F=="number"&&!isNaN(F)})}function vt(h){var g=bt(h),F=g.rotation,V=g.rotationSteps;if(!Object(p.isArray)(F))return F;var H=F[0],et=F[1],nt=V===1?0:(et-H)/(V-1);return function(){return et===H?et:Math.floor(Math.random()*V)*nt}}function bt(h){var g=h.wordStyle.rotationSteps;return g<1&&(Object(A.j)(A.a.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),g=1),{rotation:h.wordStyle.rotation,rotationSteps:g}}function At(h){return Math.min.apply(Math,h)}function q(h){return Math.max.apply(Math,h)}function ct(h){var g=h.chart,F=h.options,V=F.colorField,H=F.color,et=xt(h);g.data(et);var nt=Object(A.b)({},h,{options:{xField:"x",yField:"y",seriesField:V&&"color",point:{color:H,shape:"word-cloud"}}}),St=Object(r.e)(nt).ext;return St.geometry.label(!1),g.coordinate().reflect("y"),g.axis(!1),h}function ot(h){return Object(A.e)(Object(e.f)({x:{nice:!1},y:{nice:!1}}))(h)}function _(h){Object(A.e)(ct,ot,e.k,e.d,e.c,e.a,e.j,e.i)(h)}var P=z("kXyF");Object(P.registerShape)("point","word-cloud",{draw:function(g,F){var V=g.x,H=g.y,et=F.addShape("text",{attrs:Object(at.a)(Object(at.a)({},Y(g)),{x:V,y:H})}),nt=g.data.rotate;return typeof nt=="number"&&P.Util.rotate(et,nt*Math.PI/180),et}});function Y(h){return{fontSize:h.data.size,text:h.data.text,textAlign:"center",fontFamily:h.data.font,fontWeight:h.data.weight,fill:h.color||h.defaultStyle.stroke,textBaseline:"alphabetic"}}var k=function(h){Object(at.b)(g,h);function g(){var F=h!==null&&h.apply(this,arguments)||this;return F.type="word-cloud",F}return g.prototype.changeData=function(F){this.updateOption({data:F}),this.options.imageMask?this.render():this.chart.changeData(xt({chart:this.chart,options:this.options}))},g.prototype.getDefaultOptions=function(){return Object(A.b)({},h.prototype.getDefaultOptions.call(this),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value","color"],formatter:function(V){return{name:V.text,value:V.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}})},g.prototype.render=function(){var F=this;return new Promise(function(V){var H=F.options.imageMask;if(!H){h.prototype.render.call(F),V();return}var et=function(St){F.options=Object(at.a)(Object(at.a)({},F.options),{imageMask:St||null}),h.prototype.render.call(F),V()};Et(H).then(et).catch(et)})},g.prototype.getSchemaAdaptor=function(){return _},g.prototype.triggerResize=function(){var F=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout(function(){h.prototype.triggerResize.call(F)}))},g}(a.a)},Mw2x:function(zn,Ut,z){"use strict";var at=z("mrSG"),a=z("zK8m"),A=z("sstZ"),e={},r="_INDEX";function p(y,n){if(y.set("canvas",n),y.isGroup()){var s=y.get("children");s.length&&s.forEach(function(d){p(d,n)})}}function m(y,n){if(y.set("timeline",n),y.isGroup()){var s=y.get("children");s.length&&s.forEach(function(d){m(d,n)})}}function O(y,n){var s=y.getChildren();return s.indexOf(n)>=0}function l(y,n,s){s===void 0&&(s=!0),s?n.destroy():(n.set("parent",null),n.set("canvas",null)),Object(A.j)(y.getChildren(),n)}function E(y){return function(n,s){var d=y(n,s);return d===0?n[r]-s[r]:d}}var j=function(y){Object(at.b)(n,y);function n(){return y!==null&&y.apply(this,arguments)||this}return n.prototype.isCanvas=function(){return!1},n.prototype.getBBox=function(){var s=Infinity,d=-Infinity,M=Infinity,S=-Infinity,T=[],v=[],x=this.getChildren().filter(function(N){return N.get("visible")&&(!N.isGroup()||N.isGroup()&&N.getChildren().length>0)});x.length>0?(Object(A.a)(x,function(N){var X=N.getBBox();T.push(X.minX,X.maxX),v.push(X.minY,X.maxY)}),s=Math.min.apply(null,T),d=Math.max.apply(null,T),M=Math.min.apply(null,v),S=Math.max.apply(null,v)):(s=0,d=0,M=0,S=0);var C={x:s,y:M,minX:s,minY:M,maxX:d,maxY:S,width:d-s,height:S-M};return C},n.prototype.getCanvasBBox=function(){var s=Infinity,d=-Infinity,M=Infinity,S=-Infinity,T=[],v=[],x=this.getChildren().filter(function(N){return N.get("visible")&&(!N.isGroup()||N.isGroup()&&N.getChildren().length>0)});x.length>0?(Object(A.a)(x,function(N){var X=N.getCanvasBBox();T.push(X.minX,X.maxX),v.push(X.minY,X.maxY)}),s=Math.min.apply(null,T),d=Math.max.apply(null,T),M=Math.min.apply(null,v),S=Math.max.apply(null,v)):(s=0,d=0,M=0,S=0);var C={x:s,y:M,minX:s,minY:M,maxX:d,maxY:S,width:d-s,height:S-M};return C},n.prototype.getDefaultCfg=function(){var s=y.prototype.getDefaultCfg.call(this);return s.children=[],s},n.prototype.onAttrChange=function(s,d,M){if(y.prototype.onAttrChange.call(this,s,d,M),s==="matrix"){var S=this.getTotalMatrix();this._applyChildrenMarix(S)}},n.prototype.applyMatrix=function(s){var d=this.getTotalMatrix();y.prototype.applyMatrix.call(this,s);var M=this.getTotalMatrix();M!==d&&this._applyChildrenMarix(M)},n.prototype._applyChildrenMarix=function(s){var d=this.getChildren();Object(A.a)(d,function(M){M.applyMatrix(s)})},n.prototype.addShape=function(){for(var s=[],d=0;d<arguments.length;d++)s[d]=arguments[d];var M=s[0],S=s[1];Object(A.f)(M)?S=M:S.type=M;var T=e[S.type];T||(T=Object(A.k)(S.type),e[S.type]=T);var v=this.getShapeBase(),x=new v[T](S);return this.add(x),x},n.prototype.addGroup=function(){for(var s=[],d=0;d<arguments.length;d++)s[d]=arguments[d];var M=s[0],S=s[1],T;if(Object(A.d)(M))S?T=new M(S):T=new M({parent:this});else{var v=M||{},x=this.getGroupBase();T=new x(v)}return this.add(T),T},n.prototype.getCanvas=function(){var s;return this.isCanvas()?s=this:s=this.get("canvas"),s},n.prototype.getShape=function(s,d,M){if(!Object(A.b)(this))return null;var S=this.getChildren(),T;if(this.isCanvas())T=this._findShape(S,s,d,M);else{var v=[s,d,1];v=this.invertFromMatrix(v),this.isClipped(v[0],v[1])||(T=this._findShape(S,v[0],v[1],M))}return T},n.prototype._findShape=function(s,d,M,S){for(var T=null,v=s.length-1;v>=0;v--){var x=s[v];if(Object(A.b)(x)&&(x.isGroup()?T=x.getShape(d,M,S):x.isHit(d,M)&&(T=x)),T)break}return T},n.prototype.add=function(s){var d=this.getCanvas(),M=this.getChildren(),S=this.get("timeline"),T=s.getParent();T&&l(T,s,!1),s.set("parent",this),d&&p(s,d),S&&m(s,S),M.push(s),s.onCanvasChange("add"),this._applyElementMatrix(s)},n.prototype._applyElementMatrix=function(s){var d=this.getTotalMatrix();d&&s.applyMatrix(d)},n.prototype.getChildren=function(){return this.get("children")},n.prototype.sort=function(){var s=this.getChildren();Object(A.a)(s,function(d,M){return d[r]=M,d}),s.sort(E(function(d,M){return d.get("zIndex")-M.get("zIndex")})),this.onCanvasChange("sort")},n.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var s=this.getChildren(),d=s.length-1;d>=0;d--)s[d].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},n.prototype.destroy=function(){this.get("destroyed")||(this.clear(),y.prototype.destroy.call(this))},n.prototype.getFirst=function(){return this.getChildByIndex(0)},n.prototype.getLast=function(){var s=this.getChildren();return this.getChildByIndex(s.length-1)},n.prototype.getChildByIndex=function(s){var d=this.getChildren();return d[s]},n.prototype.getCount=function(){var s=this.getChildren();return s.length},n.prototype.contain=function(s){var d=this.getChildren();return d.indexOf(s)>-1},n.prototype.removeChild=function(s,d){d===void 0&&(d=!0),this.contain(s)&&s.remove(d)},n.prototype.findAll=function(s){var d=[],M=this.getChildren();return Object(A.a)(M,function(S){s(S)&&d.push(S),S.isGroup()&&(d=d.concat(S.findAll(s)))}),d},n.prototype.find=function(s){var d=null,M=this.getChildren();return Object(A.a)(M,function(S){if(s(S)?d=S:S.isGroup()&&(d=S.find(s)),d)return!1}),d},n.prototype.findById=function(s){return this.find(function(d){return d.get("id")===s})},n.prototype.findByClassName=function(s){return this.find(function(d){return d.get("className")===s})},n.prototype.findAllByName=function(s){return this.findAll(function(d){return d.get("name")===s})},n}(a.a);Ut.a=j},N9hJ:function(zn,Ut){},NmWf:function(zn,Ut,z){"use strict";var at=z("mrSG"),a=z("aFU3"),A=z("iTfj"),e={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},r=function(p){Object(at.b)(m,p);function m(O){var l=p.call(this,O)||this;return l.initCfg(),l}return m.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},m.prototype.clear=function(){},m.prototype.update=function(O){var l=this,E=this.get("defaultCfg");Object(A.each)(O,function(j,y){var n=l.get(y),s=j;n!==j&&(Object(A.isObject)(j)&&E[y]&&(s=Object(A.deepMix)({},E[y],j)),l.set(y,s))}),this.updateInner(O),this.afterUpdate(O)},m.prototype.updateInner=function(O){},m.prototype.afterUpdate=function(O){Object(A.hasKey)(O,"visible")&&(O.visible?this.show():this.hide()),Object(A.hasKey)(O,"capture")&&this.setCapture(O.capture)},m.prototype.getLayoutBBox=function(){return this.getBBox()},m.prototype.getLocationType=function(){return this.get("locationType")},m.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},m.prototype.setOffset=function(O,l){this.update({offsetX:O,offsetY:l})},m.prototype.setLocation=function(O){var l=Object(at.a)({},O);this.update(l)},m.prototype.getLocation=function(){var O=this,l={},E=this.get("locationType"),j=e[E];return Object(A.each)(j,function(y){l[y]=O.get(y)}),l},m.prototype.isList=function(){return!1},m.prototype.isSlider=function(){return!1},m.prototype.init=function(){},m.prototype.initCfg=function(){var O=this,l=this.get("defaultCfg");Object(A.each)(l,function(E,j){var y=O.get(j);if(Object(A.isObject)(y)){var n=Object(A.deepMix)({},E,y);O.set(j,n)}})},m}(a.Base);Ut.a=r},NohK:function(zn,Ut,z){"use strict";Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.default=void 0;var at=function(A){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,r=null;return function(){for(var p=this,m=arguments.length,O=new Array(m),l=0;l<m;l++)O[l]=arguments[l];clearTimeout(r),r=setTimeout(function(){A.apply(p,O)},e)}};Ut.default=at},NzZ7:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return m});var at=z("tvR+"),a=z("yUfG"),A=z("a8tM"),e=z("iTfj"),r=z("I7nc"),p={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"]};function m(O,l){l=Object(e.assign)({},p,l);var E=l.as;if(!Object(e.isArray)(E)||E.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var j;try{j=Object(r.b)(l)}catch(M){console.warn(M)}var y=function(S){return at.a().tile(a[l.tile]).size(l.size).round(l.round).padding(l.padding).paddingInner(l.paddingInner).paddingOuter(l.paddingOuter).paddingTop(l.paddingTop).paddingRight(l.paddingRight).paddingBottom(l.paddingBottom).paddingLeft(l.paddingLeft)(A.c(S).sum(function(T){return l.ignoreParentValue&&T.children?0:T[j]}))},n=y(O),s=E[0],d=E[1];return n.each(function(M){M[s]=[M.x0,M.x1,M.x1,M.x0],M[d]=[M.y1,M.y1,M.y0,M.y0],["x0","x1","y0","y1"].forEach(function(S){E.indexOf(S)===-1&&delete M[S]})}),Object(r.a)(n)}},P4Qj:function(zn,Ut,z){"use strict";Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.removeSensor=Ut.getSensor=void 0;var at=e(z("chpo")),a=z("FxDU"),A=z("24YM");function e(O){return O&&O.__esModule?O:{default:O}}var r={},p=function(l){var E=l.getAttribute(A.SizeSensorId);if(E&&r[E])return r[E];var j=(0,at.default)();l.setAttribute(A.SizeSensorId,j);var y=(0,a.createSensor)(l);return r[j]=y,y};Ut.getSensor=p;var m=function(l){var E=l.element.getAttribute(A.SizeSensorId);l.element.removeAttribute(A.SizeSensorId),l.destroy(),E&&r[E]&&delete r[E]};Ut.removeSensor=m},QG4C:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return E});var at=z("mrSG"),a=z("zJSt"),A=z("iTfj"),e=z("WOQw"),r=z("w02o"),p=z("YuPD"),m=z("n/J0");function O(j){var y=j.chart,n=j.options,s=n.views,d=n.legend,M=n.tooltip;return Object(A.each)(s,function(S){var T=S.region,v=S.data,x=S.meta,C=S.axes,N=S.coordinate,X=S.interactions,tt=S.annotations,it=S.geometries,pt=y.createView({region:T});pt.data(v);var ft={};C&&Object(A.each)(C,function(Ot,wt){ft[wt]=Object(p.k)(Ot,m.a)}),ft=Object(p.b)({},x,ft),pt.scale(ft),C?Object(A.each)(C,function(Ot,wt){pt.axis(wt,Ot)}):pt.axis(!1),pt.coordinate(N),Object(A.each)(it,function(Ot){var wt=Object(e.a)({chart:pt,options:Ot}).ext,xt=Ot.adjust;xt&&wt.geometry.adjust(xt)}),Object(A.each)(X,function(Ot){Ot.enable===!1?pt.removeInteraction(Ot.type):pt.interaction(Ot.type,Ot.cfg)}),Object(A.each)(tt,function(Ot){pt.annotation()[Ot.type](Object(at.a)({},Ot))})}),d?Object(A.each)(d,function(S,T){y.legend(T,S)}):y.legend(!1),y.tooltip(M),j}function l(j){return Object(p.e)(r.a,O,r.c,r.a,r.j,r.k)(j)}var E=function(j){Object(at.b)(y,j);function y(){var n=j!==null&&j.apply(this,arguments)||this;return n.type="multi-view",n}return y.prototype.getSchemaAdaptor=function(){return l},y}(a.a)},"QO+J":function(zn,Ut,z){"use strict";Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.createSensor=void 0;var at=A(z("NohK")),a=z("24YM");function A(r){return r&&r.__esModule?r:{default:r}}var e=function(p){var m=void 0,O=[],l=function(){getComputedStyle(p).position==="static"&&(p.style.position="relative");var d=document.createElement("object");return d.onload=function(){d.contentDocument.defaultView.addEventListener("resize",E),E()},d.style.display="block",d.style.position="absolute",d.style.top="0",d.style.left="0",d.style.height="100%",d.style.width="100%",d.style.overflow="hidden",d.style.pointerEvents="none",d.style.zIndex="-1",d.style.opacity="0",d.setAttribute("class",a.SensorClassName),d.setAttribute("tabindex",a.SensorTabIndex),d.type="text/html",p.appendChild(d),d.data="about:blank",d},E=(0,at.default)(function(){O.forEach(function(s){s(p)})}),j=function(d){m||(m=l()),O.indexOf(d)===-1&&O.push(d)},y=function(){m&&m.parentNode&&(m.contentDocument&&m.contentDocument.defaultView.removeEventListener("resize",E),m.parentNode.removeChild(m),m=void 0,O=[])},n=function(d){var M=O.indexOf(d);M!==-1&&O.splice(M,1),O.length===0&&m&&y()};return{element:p,bind:j,destroy:y,unbind:n}};Ut.createSensor=e},"QQZ/":function(zn,Ut,z){var at=z("Sq3C"),a=z("Z1HP"),A=z("Sxd8"),e=z("dt0z");function r(p,m,O){p=e(p),m=A(m);var l=m?a(p):0;return m&&l<m?at(m-l,O)+p:p}zn.exports=r},Qci9:function(zn,Ut,z){"use strict";var at=z("iTfj"),a=z("0Xep"),A=function(){function e(r){var p=r.xField,m=r.yField,O=r.adjustNames,l=O===void 0?["x","y"]:O;this.adjustNames=l,this.xField=p,this.yField=m}return e.prototype.isAdjust=function(r){return this.adjustNames.indexOf(r)>=0},e.prototype.getAdjustRange=function(r,p,m){var O=this.yField,l=m.indexOf(p),E=m.length,j,y;return!O&&this.isAdjust("y")?(j=0,y=1):E>1?(j=m[l===0?0:l-1],y=m[l===E-1?E-1:l+1],l!==0?j+=(p-j)/2:j-=(y-p)/2,l!==E-1?y-=(y-p)/2:y+=(p-m[E-2])/2):(j=p===0?0:p-.5,y=p===0?1:p+.5),{pre:j,next:y}},e.prototype.adjustData=function(r,p){var m=this,O=this.getDimValues(p);at.each(r,function(l,E){at.each(O,function(j,y){m.adjustDim(y,j,l,E)})})},e.prototype.groupData=function(r,p){return at.each(r,function(m){m[p]===void 0&&(m[p]=a.a)}),at.groupBy(r,p)},e.prototype.adjustDim=function(r,p,m,O){},e.prototype.getDimValues=function(r){var p=this,m=p.xField,O=p.yField,l={},E=[];if(m&&this.isAdjust("x")&&E.push(m),O&&this.isAdjust("y")&&E.push(O),E.forEach(function(y){l[y]=at.valuesOfKey(r,y).sort(function(n,s){return n-s})}),!O&&this.isAdjust("y")){var j="y";l[j]=[a.a,1]}return l},e}();Ut.a=A},R5nb:function(zn,Ut,z){"use strict";z.r(Ut),z.d(Ut,"Base",function(){return O}),z.d(Ut,"Circle",function(){return E}),z.d(Ut,"Ellipse",function(){return n}),z.d(Ut,"Image",function(){return M}),z.d(Ut,"Line",function(){return C}),z.d(Ut,"Marker",function(){return pt}),z.d(Ut,"Path",function(){return ot}),z.d(Ut,"Polygon",function(){return Y}),z.d(Ut,"Polyline",function(){return h}),z.d(Ut,"Rect",function(){return et}),z.d(Ut,"Text",function(){return St});var at={};z.r(at),z.d(at,"Base",function(){return O}),z.d(at,"Circle",function(){return E}),z.d(at,"Ellipse",function(){return n}),z.d(at,"Image",function(){return M}),z.d(at,"Line",function(){return C}),z.d(at,"Marker",function(){return pt}),z.d(at,"Path",function(){return ot}),z.d(at,"Polygon",function(){return Y}),z.d(at,"Polyline",function(){return h}),z.d(at,"Rect",function(){return et}),z.d(at,"Text",function(){return St});var a=z("mrSG"),A=z("aFU3"),e=z("cyZq"),r=z("9eUa"),p=z("wq2r"),m=function(dt){Object(a.b)(gt,dt);function gt(){return dt!==null&&dt.apply(this,arguments)||this}return gt.prototype.getDefaultAttrs=function(){var yt=dt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},yt),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},gt.prototype.getShapeBase=function(){return at},gt.prototype.getGroupBase=function(){return p.a},gt.prototype.onCanvasChange=function(yt){Object(r.h)(this,yt)},gt.prototype.calculateBBox=function(){var yt=this.get("type"),Ct=this.getHitLineWidth(),Pt=Object(A.getBBoxMethod)(yt),Ft=Pt(this),Tt=Ct/2,zt=Ft.x-Tt,Xt=Ft.y-Tt,re=Ft.x+Ft.width+Tt,de=Ft.y+Ft.height+Tt;return{x:zt,minX:zt,y:Xt,minY:Xt,width:Ft.width+Ct,height:Ft.height+Ct,maxX:re,maxY:de}},gt.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},gt.prototype.isStroke=function(){return!!this.attrs.stroke},gt.prototype._applyClip=function(yt,Ct){Ct&&(yt.save(),Object(r.a)(yt,Ct),Ct.createPath(yt),yt.restore(),yt.clip(),Ct._afterDraw())},gt.prototype.draw=function(yt,Ct){var Pt=this.cfg.clipShape;if(Ct){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var Ft=this.getCanvasBBox();if(!Object(e.f)(Ct,Ft)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}yt.save(),Object(r.a)(yt,this),this._applyClip(yt,Pt),this.drawPath(yt),yt.restore(),this._afterDraw()},gt.prototype.getCanvasViewBox=function(){var yt=this.cfg.canvas;return yt?yt.getViewRange():null},gt.prototype.cacheCanvasBBox=function(){var yt=this.getCanvasViewBox();if(yt){var Ct=this.getCanvasBBox(),Pt=Object(e.f)(Ct,yt);this.set("isInView",Pt),Pt?this.set("cacheCanvasBBox",Ct):this.set("cacheCanvasBBox",null)}},gt.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},gt.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},gt.prototype.drawPath=function(yt){this.createPath(yt),this.strokeAndFill(yt),this.afterDrawPath(yt)},gt.prototype.fill=function(yt){yt.fill()},gt.prototype.stroke=function(yt){yt.stroke()},gt.prototype.strokeAndFill=function(yt){var Ct=this.attrs,Pt=Ct.lineWidth,Ft=Ct.opacity,Tt=Ct.strokeOpacity,zt=Ct.fillOpacity;this.isFill()&&(!Object(e.i)(zt)&&zt!==1?(yt.globalAlpha=zt,this.fill(yt),yt.globalAlpha=Ft):this.fill(yt)),this.isStroke()&&Pt>0&&(!Object(e.i)(Tt)&&Tt!==1&&(yt.globalAlpha=Tt),this.stroke(yt)),this.afterDrawPath(yt)},gt.prototype.createPath=function(yt){},gt.prototype.afterDrawPath=function(yt){},gt.prototype.isInShape=function(yt,Ct){var Pt=this.isStroke(),Ft=this.isFill(),Tt=this.getHitLineWidth();return this.isInStrokeOrPath(yt,Ct,Pt,Ft,Tt)},gt.prototype.isInStrokeOrPath=function(yt,Ct,Pt,Ft,Tt){return!1},gt.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var yt=this.attrs;return yt.lineWidth+yt.lineAppendWidth},gt}(A.AbstractShape),O=m,l=function(dt){Object(a.b)(gt,dt);function gt(){return dt!==null&&dt.apply(this,arguments)||this}return gt.prototype.getDefaultAttrs=function(){var yt=dt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},yt),{x:0,y:0,r:0})},gt.prototype.isInStrokeOrPath=function(yt,Ct,Pt,Ft,Tt){var zt=this.attr(),Xt=zt.x,re=zt.y,de=zt.r,ye=Tt/2,we=Object(e.b)(Xt,re,yt,Ct);return Ft&&Pt?we<=de+ye:Ft?we<=de:Pt?we>=de-ye&&we<=de+ye:!1},gt.prototype.createPath=function(yt){var Ct=this.attr(),Pt=Ct.x,Ft=Ct.y,Tt=Ct.r;yt.beginPath(),yt.arc(Pt,Ft,Tt,0,Math.PI*2,!1),yt.closePath()},gt}(O),E=l;function j(dt,gt,yt,Ct){return dt/(yt*yt)+gt/(Ct*Ct)}var y=function(dt){Object(a.b)(gt,dt);function gt(){return dt!==null&&dt.apply(this,arguments)||this}return gt.prototype.getDefaultAttrs=function(){var yt=dt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},yt),{x:0,y:0,rx:0,ry:0})},gt.prototype.isInStrokeOrPath=function(yt,Ct,Pt,Ft,Tt){var zt=this.attr(),Xt=Tt/2,re=zt.x,de=zt.y,ye=zt.rx,we=zt.ry,De=(yt-re)*(yt-re),Ve=(Ct-de)*(Ct-de);return Ft&&Pt?j(De,Ve,ye+Xt,we+Xt)<=1:Ft?j(De,Ve,ye,we)<=1:Pt?j(De,Ve,ye-Xt,we-Xt)>=1&&j(De,Ve,ye+Xt,we+Xt)<=1:!1},gt.prototype.createPath=function(yt){var Ct=this.attr(),Pt=Ct.x,Ft=Ct.y,Tt=Ct.rx,zt=Ct.ry;if(yt.beginPath(),yt.ellipse)yt.ellipse(Pt,Ft,Tt,zt,0,0,Math.PI*2,!1);else{var Xt=Tt>zt?Tt:zt,re=Tt>zt?1:Tt/zt,de=Tt>zt?zt/Tt:1;yt.save(),yt.translate(Pt,Ft),yt.scale(re,de),yt.arc(0,0,Xt,0,Math.PI*2),yt.restore(),yt.closePath()}},gt}(O),n=y;function s(dt){return dt instanceof HTMLElement&&Object(e.k)(dt.nodeName)&&dt.nodeName.toUpperCase()==="CANVAS"}var d=function(dt){Object(a.b)(gt,dt);function gt(){return dt!==null&&dt.apply(this,arguments)||this}return gt.prototype.getDefaultAttrs=function(){var yt=dt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},yt),{x:0,y:0,width:0,height:0})},gt.prototype.initAttrs=function(yt){this._setImage(yt.img)},gt.prototype.isStroke=function(){return!1},gt.prototype.isOnlyHitBox=function(){return!0},gt.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var yt=this.get("canvas");yt?yt.draw():this.createPath(this.get("context"))}},gt.prototype._setImage=function(yt){var Ct=this,Pt=this.attrs;if(Object(e.k)(yt)){var Ft=new Image;Ft.onload=function(){if(Ct.destroyed)return!1;Ct.attr("img",Ft),Ct.set("loading",!1),Ct._afterLoading();var Tt=Ct.get("callback");Tt&&Tt.call(Ct)},Ft.crossOrigin="Anonymous",Ft.src=yt,this.set("loading",!0)}else yt instanceof Image?(Pt.width||(Pt.width=yt.width),Pt.height||(Pt.height=yt.height)):s(yt)&&(Pt.width||(Pt.width=Number(yt.getAttribute("width"))),Pt.height||(Pt.height,Number(yt.getAttribute("height"))))},gt.prototype.onAttrChange=function(yt,Ct,Pt){dt.prototype.onAttrChange.call(this,yt,Ct,Pt),yt==="img"&&this._setImage(Ct)},gt.prototype.createPath=function(yt){if(this.get("loading")){this.set("toDraw",!0),this.set("context",yt);return}var Ct=this.attr(),Pt=Ct.x,Ft=Ct.y,Tt=Ct.width,zt=Ct.height,Xt=Ct.sx,re=Ct.sy,de=Ct.swidth,ye=Ct.sheight,we=Ct.img;(we instanceof Image||s(we))&&(!Object(e.i)(Xt)&&!Object(e.i)(re)&&!Object(e.i)(de)&&!Object(e.i)(ye)?yt.drawImage(we,Xt,re,de,ye,Pt,Ft,Tt,zt):yt.drawImage(we,Pt,Ft,Tt,zt))},gt}(O),M=d,S=z("EYNi");function T(dt,gt,yt,Ct,Pt,Ft,Tt){var zt=Math.min(dt,yt),Xt=Math.max(dt,yt),re=Math.min(gt,Ct),de=Math.max(gt,Ct),ye=Pt/2;return Ft>=zt-ye&&Ft<=Xt+ye&&Tt>=re-ye&&Tt<=de+ye?S.c.pointToLine(dt,gt,yt,Ct,Ft,Tt)<=Pt/2:!1}var v=z("nycV"),x=function(dt){Object(a.b)(gt,dt);function gt(){return dt!==null&&dt.apply(this,arguments)||this}return gt.prototype.getDefaultAttrs=function(){var yt=dt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},yt),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},gt.prototype.initAttrs=function(yt){this.setArrow()},gt.prototype.onAttrChange=function(yt,Ct,Pt){dt.prototype.onAttrChange.call(this,yt,Ct,Pt),this.setArrow()},gt.prototype.setArrow=function(){var yt=this.attr(),Ct=yt.x1,Pt=yt.y1,Ft=yt.x2,Tt=yt.y2,zt=yt.startArrow,Xt=yt.endArrow;zt&&v.b(this,yt,Ft,Tt,Ct,Pt),Xt&&v.a(this,yt,Ct,Pt,Ft,Tt)},gt.prototype.isInStrokeOrPath=function(yt,Ct,Pt,Ft,Tt){if(!Pt||!Tt)return!1;var zt=this.attr(),Xt=zt.x1,re=zt.y1,de=zt.x2,ye=zt.y2;return T(Xt,re,de,ye,Tt,yt,Ct)},gt.prototype.createPath=function(yt){var Ct=this.attr(),Pt=Ct.x1,Ft=Ct.y1,Tt=Ct.x2,zt=Ct.y2,Xt=Ct.startArrow,re=Ct.endArrow,de={dx:0,dy:0},ye={dx:0,dy:0};Xt&&Xt.d&&(de=v.c(Pt,Ft,Tt,zt,Ct.startArrow.d)),re&&re.d&&(ye=v.c(Pt,Ft,Tt,zt,Ct.endArrow.d)),yt.beginPath(),yt.moveTo(Pt+de.dx,Ft+de.dy),yt.lineTo(Tt-ye.dx,zt-ye.dy)},gt.prototype.afterDrawPath=function(yt){var Ct=this.get("startArrowShape"),Pt=this.get("endArrowShape");Ct&&Ct.draw(yt),Pt&&Pt.draw(yt)},gt.prototype.getTotalLength=function(){var yt=this.attr(),Ct=yt.x1,Pt=yt.y1,Ft=yt.x2,Tt=yt.y2;return S.c.length(Ct,Pt,Ft,Tt)},gt.prototype.getPoint=function(yt){var Ct=this.attr(),Pt=Ct.x1,Ft=Ct.y1,Tt=Ct.x2,zt=Ct.y2;return S.c.pointAt(Pt,Ft,Tt,zt,yt)},gt}(O),C=x,N=z("iTfj"),X=z("LvGN"),tt={circle:function(gt,yt,Ct){return[["M",gt-Ct,yt],["A",Ct,Ct,0,1,0,gt+Ct,yt],["A",Ct,Ct,0,1,0,gt-Ct,yt]]},square:function(gt,yt,Ct){return[["M",gt-Ct,yt-Ct],["L",gt+Ct,yt-Ct],["L",gt+Ct,yt+Ct],["L",gt-Ct,yt+Ct],["Z"]]},diamond:function(gt,yt,Ct){return[["M",gt-Ct,yt],["L",gt,yt-Ct],["L",gt+Ct,yt],["L",gt,yt+Ct],["Z"]]},triangle:function(gt,yt,Ct){var Pt=Ct*Math.sin(1/3*Math.PI);return[["M",gt-Ct,yt+Pt],["L",gt,yt-Pt],["L",gt+Ct,yt+Pt],["Z"]]},"triangle-down":function(gt,yt,Ct){var Pt=Ct*Math.sin(1/3*Math.PI);return[["M",gt-Ct,yt-Pt],["L",gt+Ct,yt-Pt],["L",gt,yt+Pt],["Z"]]}},it=function(dt){Object(a.b)(gt,dt);function gt(){return dt!==null&&dt.apply(this,arguments)||this}return gt.prototype.initAttrs=function(yt){this._resetParamsCache()},gt.prototype._resetParamsCache=function(){this.set("paramsCache",{})},gt.prototype.onAttrChange=function(yt,Ct,Pt){dt.prototype.onAttrChange.call(this,yt,Ct,Pt),["symbol","x","y","r","radius"].indexOf(yt)!==-1&&this._resetParamsCache()},gt.prototype.isOnlyHitBox=function(){return!0},gt.prototype._getR=function(yt){return Object(N.isNil)(yt.r)?yt.radius:yt.r},gt.prototype._getPath=function(){var yt=this.attr(),Ct=yt.x,Pt=yt.y,Ft=yt.symbol||"circle",Tt=this._getR(yt),zt,Xt;if(Object(e.h)(Ft))zt=Ft,Xt=zt(Ct,Pt,Tt),Xt=Object(X.d)(Xt);else{if(zt=gt.Symbols[Ft],!zt)return console.warn(Ft+" marker is not supported."),null;Xt=zt(Ct,Pt,Tt)}return Xt},gt.prototype.createPath=function(yt){var Ct=this._getPath(),Pt=this.get("paramsCache");Object(r.e)(this,yt,{path:Ct},Pt)},gt.Symbols=tt,gt}(O),pt=it;function ft(dt,gt,yt){var Ct=Object(A.getOffScreenContext)();return dt.createPath(Ct),Ct.isPointInPath(gt,yt)}var Ot=1e-6;function wt(dt){return Math.abs(dt)<Ot?0:dt<0?-1:1}function xt(dt,gt,yt){return(yt[0]-dt[0])*(gt[1]-dt[1])==(gt[0]-dt[0])*(yt[1]-dt[1])&&Math.min(dt[0],gt[0])<=yt[0]&&yt[0]<=Math.max(dt[0],gt[0])&&Math.min(dt[1],gt[1])<=yt[1]&&yt[1]<=Math.max(dt[1],gt[1])}function lt(dt,gt,yt){var Ct=!1,Pt=dt.length;if(Pt<=2)return!1;for(var Ft=0;Ft<Pt;Ft++){var Tt=dt[Ft],zt=dt[(Ft+1)%Pt];if(xt(Tt,zt,[gt,yt]))return!0;wt(Tt[1]-yt)>0!=wt(zt[1]-yt)>0&&wt(gt-(yt-Tt[1])*(Tt[0]-zt[0])/(Tt[1]-zt[1])-Tt[0])<0&&(Ct=!Ct)}return Ct}var Vt=z("6JdA"),Lt=z("n+fv");function Et(dt,gt,yt,Ct,Pt,Ft,Tt,zt){var Xt=(Math.atan2(zt-gt,Tt-dt)+Math.PI*2)%(Math.PI*2);if(Xt<Ct||Xt>Pt)return!1;var re={x:dt+yt*Math.cos(Xt),y:gt+yt*Math.sin(Xt)};return Object(e.b)(re.x,re.y,Tt,zt)<=Ft/2}var J=Vt.a.transform;function ht(dt){for(var gt=!1,yt=dt.length,Ct=0;Ct<yt;Ct++){var Pt=dt[Ct],Ft=Pt[0];if(Ft==="C"||Ft==="A"||Ft==="Q"){gt=!0;break}}return gt}function vt(dt,gt,yt,Ct,Pt){for(var Ft=!1,Tt=gt/2,zt=0;zt<dt.length;zt++){var Xt=dt[zt],re=Xt.currentPoint,de=Xt.params,ye=Xt.prePoint,we=Xt.box;if(!(we&&!Object(e.e)(we.x-Tt,we.y-Tt,we.width+gt,we.height+gt,yt,Ct))){switch(Xt.command){case"L":case"Z":Ft=T(ye[0],ye[1],re[0],re[1],gt,yt,Ct);break;case"Q":var De=S.e.pointDistance(ye[0],ye[1],de[1],de[2],de[3],de[4],yt,Ct);Ft=De<=gt/2;break;case"C":var Ve=S.b.pointDistance(ye[0],ye[1],de[1],de[2],de[3],de[4],de[5],de[6],yt,Ct,Pt);Ft=Ve<=gt/2;break;case"A":var pn=Xt.arcParams,sn=pn.cx,In=pn.cy,An=pn.rx,Rn=pn.ry,Mn=pn.startAngle,Cn=pn.endAngle,Gn=pn.xRotation,Xn=[yt,Ct,1],tr=An>Rn?An:Rn,or=An>Rn?1:An/Rn,nr=An>Rn?Rn/An:1,er=J(null,[["t",-sn,-In],["r",-Gn],["s",1/or,1/nr]]);Lt.transformMat3(Xn,Xn,er),Ft=Et(0,0,tr,Mn,Cn,gt,Xn[0],Xn[1]);break;default:break}if(Ft)break}}return Ft}function bt(dt){for(var gt=dt.length,yt=[],Ct=[],Pt=[],Ft=0;Ft<gt;Ft++){var Tt=dt[Ft],zt=Tt[0];zt==="M"?(Pt.length&&(Ct.push(Pt),Pt=[]),Pt.push([Tt[1],Tt[2]])):zt==="Z"?Pt.length&&(yt.push(Pt),Pt=[]):Pt.push([Tt[1],Tt[2]])}return Pt.length>0&&Ct.push(Pt),{polygons:yt,polylines:Ct}}var At=Object(a.a)({hasArc:ht,extractPolygons:bt,isPointInStroke:vt},A.PathUtil);function q(dt,gt,yt){for(var Ct=!1,Pt=0;Pt<dt.length;Pt++){var Ft=dt[Pt];if(Ct=lt(Ft,gt,yt),Ct)break}return Ct}var ct=function(dt){Object(a.b)(gt,dt);function gt(){return dt!==null&&dt.apply(this,arguments)||this}return gt.prototype.getDefaultAttrs=function(){var yt=dt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},yt),{startArrow:!1,endArrow:!1})},gt.prototype.initAttrs=function(yt){this._setPathArr(yt.path),this.setArrow()},gt.prototype.onAttrChange=function(yt,Ct,Pt){dt.prototype.onAttrChange.call(this,yt,Ct,Pt),yt==="path"&&this._setPathArr(Ct),this.setArrow()},gt.prototype._setPathArr=function(yt){this.attrs.path=Object(X.d)(yt);var Ct=At.hasArc(yt);this.set("hasArc",Ct),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},gt.prototype.getSegments=function(){var yt=this.get("segements");return yt||(yt=Object(X.e)(this.attr("path")),this.set("segments",yt)),yt},gt.prototype.setArrow=function(){var yt=this.attr(),Ct=yt.startArrow,Pt=yt.endArrow;if(Ct){var Ft=this.getStartTangent();v.b(this,yt,Ft[0][0],Ft[0][1],Ft[1][0],Ft[1][1])}if(Pt){var Ft=this.getEndTangent();v.a(this,yt,Ft[0][0],Ft[0][1],Ft[1][0],Ft[1][1])}},gt.prototype.isInStrokeOrPath=function(yt,Ct,Pt,Ft,Tt){var zt=this.getSegments(),Xt=this.get("hasArc"),re=!1;if(Pt){var de=this.getTotalLength();re=At.isPointInStroke(zt,Tt,yt,Ct,de)}if(!re&&Ft)if(Xt)re=ft(this,yt,Ct);else{var ye=this.attr("path"),we=At.extractPolygons(ye);re=q(we.polygons,yt,Ct)||q(we.polylines,yt,Ct)}return re},gt.prototype.createPath=function(yt){var Ct=this.attr(),Pt=this.get("paramsCache");Object(r.e)(this,yt,Ct,Pt)},gt.prototype.afterDrawPath=function(yt){var Ct=this.get("startArrowShape"),Pt=this.get("endArrowShape");Ct&&Ct.draw(yt),Pt&&Pt.draw(yt)},gt.prototype.getTotalLength=function(){var yt=this.get("totalLength");return Object(N.isNil)(yt)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):yt},gt.prototype.getPoint=function(yt){var Ct=this.get("tCache");Ct||(this._calculateCurve(),this._setTcache(),Ct=this.get("tCache"));var Pt,Ft,Tt=this.get("curve");if(!Ct||Ct.length===0)return Tt?{x:Tt[0][1],y:Tt[0][2]}:null;Object(N.each)(Ct,function(de,ye){yt>=de[0]&&yt<=de[1]&&(Pt=(yt-de[0])/(de[1]-de[0]),Ft=ye)});var zt=Tt[Ft];if(Object(N.isNil)(zt)||Object(N.isNil)(Ft))return null;var Xt=zt.length,re=Tt[Ft+1];return S.b.pointAt(zt[Xt-2],zt[Xt-1],re[1],re[2],re[3],re[4],re[5],re[6],Pt)},gt.prototype._calculateCurve=function(){var yt=this.attr().path;this.set("curve",At.pathToCurve(yt))},gt.prototype._setTcache=function(){var yt=0,Ct=0,Pt=[],Ft,Tt,zt,Xt,re=this.get("curve");if(!!re){if(Object(N.each)(re,function(de,ye){zt=re[ye+1],Xt=de.length,zt&&(yt+=S.b.length(de[Xt-2],de[Xt-1],zt[1],zt[2],zt[3],zt[4],zt[5],zt[6])||0)}),this.set("totalLength",yt),yt===0){this.set("tCache",[]);return}Object(N.each)(re,function(de,ye){zt=re[ye+1],Xt=de.length,zt&&(Ft=[],Ft[0]=Ct/yt,Tt=S.b.length(de[Xt-2],de[Xt-1],zt[1],zt[2],zt[3],zt[4],zt[5],zt[6]),Ct+=Tt||0,Ft[1]=Ct/yt,Pt.push(Ft))}),this.set("tCache",Pt)}},gt.prototype.getStartTangent=function(){var yt=this.getSegments(),Ct;if(yt.length>1){var Pt=yt[0].currentPoint,Ft=yt[1].currentPoint,Tt=yt[1].startTangent;Ct=[],Tt?(Ct.push([Pt[0]-Tt[0],Pt[1]-Tt[1]]),Ct.push([Pt[0],Pt[1]])):(Ct.push([Ft[0],Ft[1]]),Ct.push([Pt[0],Pt[1]]))}return Ct},gt.prototype.getEndTangent=function(){var yt=this.getSegments(),Ct=yt.length,Pt;if(Ct>1){var Ft=yt[Ct-2].currentPoint,Tt=yt[Ct-1].currentPoint,zt=yt[Ct-1].endTangent;Pt=[],zt?(Pt.push([Tt[0]-zt[0],Tt[1]-zt[1]]),Pt.push([Tt[0],Tt[1]])):(Pt.push([Ft[0],Ft[1]]),Pt.push([Tt[0],Tt[1]]))}return Pt},gt}(O),ot=ct;function _(dt,gt,yt,Ct,Pt){var Ft=dt.length;if(Ft<2)return!1;for(var Tt=0;Tt<Ft-1;Tt++){var zt=dt[Tt][0],Xt=dt[Tt][1],re=dt[Tt+1][0],de=dt[Tt+1][1];if(T(zt,Xt,re,de,gt,yt,Ct))return!0}if(Pt){var ye=dt[0],we=dt[Ft-1];if(T(ye[0],ye[1],we[0],we[1],gt,yt,Ct))return!0}return!1}var P=function(dt){Object(a.b)(gt,dt);function gt(){return dt!==null&&dt.apply(this,arguments)||this}return gt.prototype.isInStrokeOrPath=function(yt,Ct,Pt,Ft,Tt){var zt=this.attr().points,Xt=!1;return Pt&&(Xt=_(zt,Tt,yt,Ct,!0)),!Xt&&Ft&&(Xt=lt(zt,yt,Ct)),Xt},gt.prototype.createPath=function(yt){var Ct=this.attr(),Pt=Ct.points;if(!(Pt.length<2)){yt.beginPath();for(var Ft=0;Ft<Pt.length;Ft++){var Tt=Pt[Ft];Ft===0?yt.moveTo(Tt[0],Tt[1]):yt.lineTo(Tt[0],Tt[1])}yt.closePath()}},gt}(O),Y=P,k=function(dt){Object(a.b)(gt,dt);function gt(){return dt!==null&&dt.apply(this,arguments)||this}return gt.prototype.getDefaultAttrs=function(){var yt=dt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},yt),{startArrow:!1,endArrow:!1})},gt.prototype.initAttrs=function(yt){this.setArrow()},gt.prototype.onAttrChange=function(yt,Ct,Pt){dt.prototype.onAttrChange.call(this,yt,Ct,Pt),this.setArrow(),["points"].indexOf(yt)!==-1&&this._resetCache()},gt.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},gt.prototype.setArrow=function(){var yt=this.attr(),Ct=this.attrs,Pt=Ct.points,Ft=Ct.startArrow,Tt=Ct.endArrow,zt=Pt.length,Xt=Pt[0][0],re=Pt[0][1],de=Pt[zt-1][0],ye=Pt[zt-1][1];Ft&&v.b(this,yt,Pt[1][0],Pt[1][1],Xt,re),Tt&&v.a(this,yt,Pt[zt-2][0],Pt[zt-2][1],de,ye)},gt.prototype.isFill=function(){return!1},gt.prototype.isInStrokeOrPath=function(yt,Ct,Pt,Ft,Tt){if(!Pt||!Tt)return!1;var zt=this.attr().points;return _(zt,Tt,yt,Ct,!1)},gt.prototype.isStroke=function(){return!0},gt.prototype.createPath=function(yt){var Ct=this.attr(),Pt=Ct.points,Ft=Ct.startArrow,Tt=Ct.endArrow,zt=Pt.length;if(!(Pt.length<2)){var Xt=Pt[0][0],re=Pt[0][1],de=Pt[zt-1][0],ye=Pt[zt-1][1];if(Ft&&Ft.d){var we=v.c(Xt,re,Pt[1][0],Pt[1][1],Ft.d);Xt+=we.dx,re+=we.dy}if(Tt&&Tt.d){var we=v.c(Pt[zt-2][0],Pt[zt-2][1],de,ye,Tt.d);de-=we.dx,ye-=we.dy}yt.beginPath(),yt.moveTo(Xt,re);for(var De=0;De<zt-1;De++){var Ve=Pt[De];yt.lineTo(Ve[0],Ve[1])}yt.lineTo(de,ye)}},gt.prototype.afterDrawPath=function(yt){var Ct=this.get("startArrowShape"),Pt=this.get("endArrowShape");Ct&&Ct.draw(yt),Pt&&Pt.draw(yt)},gt.prototype.getTotalLength=function(){var yt=this.attr().points,Ct=this.get("totalLength");return Object(N.isNil)(Ct)?(this.set("totalLength",S.d.length(yt)),this.get("totalLength")):Ct},gt.prototype.getPoint=function(yt){var Ct=this.attr().points,Pt=this.get("tCache");Pt||(this._setTcache(),Pt=this.get("tCache"));var Ft,Tt;return Object(N.each)(Pt,function(zt,Xt){yt>=zt[0]&&yt<=zt[1]&&(Ft=(yt-zt[0])/(zt[1]-zt[0]),Tt=Xt)}),S.c.pointAt(Ct[Tt][0],Ct[Tt][1],Ct[Tt+1][0],Ct[Tt+1][1],Ft)},gt.prototype._setTcache=function(){var yt=this.attr().points;if(!(!yt||yt.length===0)){var Ct=this.getTotalLength();if(!(Ct<=0)){var Pt=0,Ft=[],Tt,zt;Object(N.each)(yt,function(Xt,re){yt[re+1]&&(Tt=[],Tt[0]=Pt/Ct,zt=S.c.length(Xt[0],Xt[1],yt[re+1][0],yt[re+1][1]),Pt+=zt,Tt[1]=Pt/Ct,Ft.push(Tt))}),this.set("tCache",Ft)}}},gt.prototype.getStartTangent=function(){var yt=this.attr().points,Ct=[];return Ct.push([yt[1][0],yt[1][1]]),Ct.push([yt[0][0],yt[0][1]]),Ct},gt.prototype.getEndTangent=function(){var yt=this.attr().points,Ct=yt.length-1,Pt=[];return Pt.push([yt[Ct-1][0],yt[Ct-1][1]]),Pt.push([yt[Ct][0],yt[Ct][1]]),Pt},gt}(O),h=k,g=z("r0DC");function F(dt,gt,yt,Ct,Pt,Ft,Tt){var zt=Pt/2;return Object(e.e)(dt-zt,gt-zt,yt,Pt,Ft,Tt)||Object(e.e)(dt+yt-zt,gt-zt,Pt,Ct,Ft,Tt)||Object(e.e)(dt+zt,gt+Ct-zt,yt,Pt,Ft,Tt)||Object(e.e)(dt-zt,gt+zt,Pt,Ct,Ft,Tt)}function V(dt,gt,yt,Ct,Pt,Ft,Tt,zt){var Xt=Ft/2;return T(dt+Pt,gt,dt+yt-Pt,gt,Ft,Tt,zt)||T(dt+yt,gt+Pt,dt+yt,gt+Ct-Pt,Ft,Tt,zt)||T(dt+yt-Pt,gt+Ct,dt+Pt,gt+Ct,Ft,Tt,zt)||T(dt,gt+Ct-Pt,dt,gt+Pt,Ft,Tt,zt)||Et(dt+yt-Pt,gt+Pt,Pt,1.5*Math.PI,2*Math.PI,Ft,Tt,zt)||Et(dt+yt-Pt,gt+Ct-Pt,Pt,0,.5*Math.PI,Ft,Tt,zt)||Et(dt+Pt,gt+Ct-Pt,Pt,.5*Math.PI,Math.PI,Ft,Tt,zt)||Et(dt+Pt,gt+Pt,Pt,Math.PI,1.5*Math.PI,Ft,Tt,zt)}var H=function(dt){Object(a.b)(gt,dt);function gt(){return dt!==null&&dt.apply(this,arguments)||this}return gt.prototype.getDefaultAttrs=function(){var yt=dt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},yt),{x:0,y:0,width:0,height:0,radius:0})},gt.prototype.isInStrokeOrPath=function(yt,Ct,Pt,Ft,Tt){var zt=this.attr(),Xt=zt.x,re=zt.y,de=zt.width,ye=zt.height,we=zt.radius;if(we){var Ve=!1;return Pt&&(Ve=V(Xt,re,de,ye,we,Tt,yt,Ct)),!Ve&&Ft&&(Ve=ft(this,yt,Ct)),Ve}else{var De=Tt/2;if(Ft&&Pt)return Object(e.e)(Xt-De,re-De,de+De,ye+De,yt,Ct);if(Ft)return Object(e.e)(Xt,re,de,ye,yt,Ct);if(Pt)return F(Xt,re,de,ye,Tt,yt,Ct)}},gt.prototype.createPath=function(yt){var Ct=this.attr(),Pt=Ct.x,Ft=Ct.y,Tt=Ct.width,zt=Ct.height,Xt=Ct.radius;if(yt.beginPath(),Xt===0)yt.rect(Pt,Ft,Tt,zt);else{var re=Object(g.a)(Xt),de=re[0],ye=re[1],we=re[2],De=re[3];yt.moveTo(Pt+de,Ft),yt.lineTo(Pt+Tt-ye,Ft),ye!==0&&yt.arc(Pt+Tt-ye,Ft+ye,ye,-Math.PI/2,0),yt.lineTo(Pt+Tt,Ft+zt-we),we!==0&&yt.arc(Pt+Tt-we,Ft+zt-we,we,0,Math.PI/2),yt.lineTo(Pt+De,Ft+zt),De!==0&&yt.arc(Pt+De,Ft+zt-De,De,Math.PI/2,Math.PI),yt.lineTo(Pt,Ft+de),de!==0&&yt.arc(Pt+de,Ft+de,de,Math.PI,Math.PI*1.5),yt.closePath()}},gt}(O),et=H,nt=function(dt){Object(a.b)(gt,dt);function gt(){return dt!==null&&dt.apply(this,arguments)||this}return gt.prototype.getDefaultAttrs=function(){var yt=dt.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},yt),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},gt.prototype.isOnlyHitBox=function(){return!0},gt.prototype.initAttrs=function(yt){this._assembleFont(),yt.text&&this._setText(yt.text)},gt.prototype._assembleFont=function(){var yt=this.attrs;yt.font=Object(A.assembleFont)(yt)},gt.prototype._setText=function(yt){var Ct=null;Object(e.k)(yt)&&yt.indexOf(`
`)!==-1&&(Ct=yt.split(`
`)),this.set("textArr",Ct)},gt.prototype.onAttrChange=function(yt,Ct,Pt){dt.prototype.onAttrChange.call(this,yt,Ct,Pt),yt.startsWith("font")&&this._assembleFont(),yt==="text"&&this._setText(Ct)},gt.prototype._getSpaceingY=function(){var yt=this.attrs,Ct=yt.lineHeight,Pt=yt.fontSize*1;return Ct?Ct-Pt:Pt*.14},gt.prototype._drawTextArr=function(yt,Ct,Pt){var Ft=this.attrs,Tt=Ft.textBaseline,zt=Ft.x,Xt=Ft.y,re=Ft.fontSize*1,de=this._getSpaceingY(),ye=Object(A.getTextHeight)(Ft.text,Ft.fontSize,Ft.lineHeight),we;Object(e.c)(Ct,function(De,Ve){we=Xt+Ve*(de+re)-ye+re,Tt==="middle"&&(we+=ye-re-(ye-re)/2),Tt==="top"&&(we+=ye-re),Pt?yt.fillText(De,zt,we):yt.strokeText(De,zt,we)})},gt.prototype._drawText=function(yt,Ct){var Pt=this.attr(),Ft=Pt.x,Tt=Pt.y,zt=this.get("textArr");if(zt)this._drawTextArr(yt,zt,Ct);else{var Xt=Pt.text;Ct?yt.fillText(Xt,Ft,Tt):yt.strokeText(Xt,Ft,Tt)}},gt.prototype.strokeAndFill=function(yt){var Ct=this.attrs,Pt=Ct.lineWidth,Ft=Ct.opacity,Tt=Ct.strokeOpacity,zt=Ct.fillOpacity;this.isStroke()&&Pt>0&&(!Object(e.i)(Tt)&&Tt!==1&&(yt.globalAlpha=Ft),this.stroke(yt)),this.isFill()&&(!Object(e.i)(zt)&&zt!==1?(yt.globalAlpha=zt,this.fill(yt),yt.globalAlpha=Ft):this.fill(yt)),this.afterDrawPath(yt)},gt.prototype.fill=function(yt){this._drawText(yt,!0)},gt.prototype.stroke=function(yt){this._drawText(yt,!1)},gt}(O),St=nt},SZbK:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return at});var at=["#FAAD14","#E8EDF3"]},ShmH:function(zn,Ut,z){var at=z("o0o1");(function(a,A){zn.exports=A()})(this,function(){return function(a){var A={};function e(r){if(A[r])return A[r].exports;var p=A[r]={i:r,l:!1,exports:{}};return a[r].call(p.exports,p,p.exports,e),p.l=!0,p.exports}return e.m=a,e.c=A,e.d=function(r,p,m){e.o(r,p)||Object.defineProperty(r,p,{enumerable:!0,get:m})},e.r=function(r){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},e.t=function(r,p){if(1&p&&(r=e(r)),8&p||4&p&&typeof r=="object"&&r&&r.__esModule)return r;var m=Object.create(null);if(e.r(m),Object.defineProperty(m,"default",{enumerable:!0,value:r}),2&p&&typeof r!="string")for(var O in r)e.d(m,O,function(l){return r[l]}.bind(null,O));return m},e.n=function(r){var p=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(p,"a",p),p},e.o=function(r,p){return Object.prototype.hasOwnProperty.call(r,p)},e.p="",e(e.s=262)}([function(a,A,e){"use strict";e.d(A,"j",function(){return T}),e.d(A,"k",function(){return C}),e.d(A,"y",function(){return N}),e.d(A,"g",function(){return p}),e.d(A,"J",function(){return X}),e.d(A,"h",function(){return tt}),e.d(A,"u",function(){return pt}),e.d(A,"B",function(){return ft}),e.d(A,"G",function(){return wt}),e.d(A,"I",function(){return lt}),e.d(A,"m",function(){return j}),e.d(A,"n",function(){return Et}),e.d(A,"o",function(){return J}),e.d(A,"r",function(){return l}),e.d(A,"s",function(){return E}),e.d(A,"t",function(){return it}),e.d(A,"v",function(){return n}),e.d(A,"w",function(){return S}),e.d(A,"x",function(){return x}),e.d(A,"D",function(){return bt}),e.d(A,"b",function(){return At}),e.d(A,"c",function(){return _}),e.d(A,"d",function(){return P}),e.d(A,"e",function(){return k}),e.d(A,"f",function(){return s}),e.d(A,"l",function(){return h}),e.d(A,"p",function(){return F}),e.d(A,"q",function(){return V}),e.d(A,"z",function(){return H}),e.d(A,"A",function(){return ct}),e.d(A,"a",function(){return ct}),e.d(A,"i",function(){return et}),e.d(A,"F",function(){return nt}),e.d(A,"H",function(){return dt}),e.d(A,"C",function(){return gt}),e.d(A,"E",function(){return yt});var r=function(Pt){return Pt!==null&&typeof Pt!="function"&&isFinite(Pt.length)},p=function(Pt,Ft){if(!r(Pt))return Pt;for(var Tt=[],zt=0;zt<Pt.length;zt++){var Xt=Pt[zt];Ft(Xt,zt)&&Tt.push(Xt)}return Tt},m={}.toString,O=function(Pt,Ft){return m.call(Pt)==="[object "+Ft+"]"},l=function(Pt){return O(Pt,"Function")},E=function(Pt){return Pt==null},j=function(Pt){return Array.isArray?Array.isArray(Pt):O(Pt,"Array")};function y(Ct){return(y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Pt){return typeof Pt}:function(Pt){return Pt&&typeof Symbol=="function"&&Pt.constructor===Symbol&&Pt!==Symbol.prototype?"symbol":typeof Pt})(Ct)}var n=function(Pt){var Ft=y(Pt);return Pt!==null&&Ft==="object"||Ft==="function"},s=function(Pt,Ft){if(Pt){if(j(Pt))for(var Tt=0,zt=Pt.length;Tt<zt&&Ft(Pt[Tt],Tt)!==!1;Tt++);else if(n(Pt)){for(var Xt in Pt)if(Pt.hasOwnProperty(Xt)&&Ft(Pt[Xt],Xt)===!1)break}}};function d(Ct){return(d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Pt){return typeof Pt}:function(Pt){return Pt&&typeof Symbol=="function"&&Pt.constructor===Symbol&&Pt!==Symbol.prototype?"symbol":typeof Pt})(Ct)}var M=function(Pt){return d(Pt)==="object"&&Pt!==null},S=function(Pt){if(!M(Pt)||!O(Pt,"Object"))return!1;if(Object.getPrototypeOf(Pt)===null)return!0;for(var Ft=Pt;Object.getPrototypeOf(Ft)!==null;)Ft=Object.getPrototypeOf(Ft);return Object.getPrototypeOf(Pt)===Ft},T=function(Pt){var Ft=Pt.filter(function(re){return!isNaN(re)});if(!Ft.length)return{min:0,max:0};if(j(Pt[0])){for(var Tt=[],zt=0;zt<Pt.length;zt++)Tt=Tt.concat(Pt[zt]);Ft=Tt}var Xt=Math.max.apply(null,Ft);return{min:Math.min.apply(null,Ft),max:Xt}},v=Array.prototype,x=(v.splice,v.indexOf,Array.prototype.splice,function(Ct){return O(Ct,"String")});function C(Ct){if(r(Ct))return Ct[0]}function N(Ct){if(r(Ct))return Ct[Ct.length-1]}var X=function(Pt,Ft){if(Pt["_wrap_"+Ft])return Pt["_wrap_"+Ft];var Tt=function(Xt){Pt[Ft](Xt)};return Pt["_wrap_"+Ft]=Tt,Tt},tt=function(Pt,Ft){var Tt=Ft.toString(),zt=Tt.indexOf(".");if(zt===-1)return Math.round(Pt);var Xt=Tt.substr(zt+1).length;return Xt>20&&(Xt=20),parseFloat(Pt.toFixed(Xt))},it=function(Pt){return O(Pt,"Number")};Number.isInteger&&Number.isInteger;function pt(Ct,Pt,Ft){return Ft===void 0&&(Ft=1e-5),Math.abs(Ct-Pt)<Ft}var ft=function(Pt,Ft){return(Pt%Ft+Ft)%Ft},Ot=(parseInt,Math.PI/180),wt=function(Pt){return Ot*Pt},xt=function(Ct){return E(Ct)?"":Ct.toString()},lt=function(Pt){var Ft=xt(Pt);return Ft.charAt(0).toUpperCase()+Ft.substring(1)},Vt={}.toString,Lt=function(Pt){return Vt.call(Pt).replace(/^\[object /,"").replace(/]$/,"")},Et=function(Pt){return O(Pt,"Boolean")},J=function(Pt){return O(Pt,"Date")},ht=Object.prototype,vt=function(Pt){var Ft=Pt&&Pt.constructor;return Pt===(typeof Ft=="function"&&Ft.prototype||ht)};function bt(Ct){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Pt){return setTimeout(Pt,16)})(Ct)}function At(Ct){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(Ct)}function q(Ct,Pt){for(var Ft in Pt)Pt.hasOwnProperty(Ft)&&Ft!=="constructor"&&Pt[Ft]!==void 0&&(Ct[Ft]=Pt[Ft])}function ct(Ct,Pt,Ft,Tt){return Pt&&q(Ct,Pt),Ft&&q(Ct,Ft),Tt&&q(Ct,Tt),Ct}function ot(Ct){return(ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Pt){return typeof Pt}:function(Pt){return Pt&&typeof Symbol=="function"&&Pt.constructor===Symbol&&Pt!==Symbol.prototype?"symbol":typeof Pt})(Ct)}var _=function Ct(Pt){if(ot(Pt)!=="object"||Pt===null)return Pt;var Ft;if(j(Pt)){Ft=[];for(var Tt=0,zt=Pt.length;Tt<zt;Tt++)ot(Pt[Tt])==="object"&&Pt[Tt]!=null?Ft[Tt]=Ct(Pt[Tt]):Ft[Tt]=Pt[Tt]}else for(var Xt in Ft={},Pt)ot(Pt[Xt])==="object"&&Pt[Xt]!=null?Ft[Xt]=Ct(Pt[Xt]):Ft[Xt]=Pt[Xt];return Ft},P=function(Pt,Ft,Tt){var zt;return function(){var Xt=this,re=arguments,de=function(){zt=null,Tt||Pt.apply(Xt,re)},ye=Tt&&!zt;clearTimeout(zt),zt=setTimeout(de,Ft),ye&&Pt.apply(Xt,re)}};function Y(Ct,Pt,Ft,Tt){for(var zt in Ft=Ft||0,Tt=Tt||5,Pt)if(Pt.hasOwnProperty(zt)){var Xt=Pt[zt];Xt!==null&&S(Xt)?(S(Ct[zt])||(Ct[zt]={}),Ft<Tt?Y(Ct[zt],Xt,Ft+1,Tt):Ct[zt]=Pt[zt]):j(Xt)?(Ct[zt]=[],Ct[zt]=Ct[zt].concat(Xt)):Xt!==void 0&&(Ct[zt]=Xt)}}var k=function(Pt){for(var Ft=[],Tt=1;Tt<arguments.length;Tt++)Ft[Tt-1]=arguments[Tt];for(var zt=0;zt<Ft.length;zt+=1)Y(Pt,Ft[zt]);return Pt},h=function(Pt,Ft){if(!r(Pt))return-1;var Tt=Array.prototype.indexOf;if(Tt)return Tt.call(Pt,Ft);for(var zt=-1,Xt=0;Xt<Pt.length;Xt++)if(Pt[Xt]===Ft){zt=Xt;break}return zt},g=Object.prototype.hasOwnProperty,F=function(Pt){if(E(Pt))return!0;if(r(Pt))return!Pt.length;var Ft=Lt(Pt);if(Ft==="Map"||Ft==="Set")return!Pt.size;if(vt(Pt))return!Object.keys(Pt).length;for(var Tt in Pt)if(g.call(Pt,Tt))return!1;return!0},V=function Ct(Pt,Ft){if(Pt===Ft)return!0;if(!Pt||!Ft||x(Pt)||x(Ft))return!1;if(r(Pt)||r(Ft)){if(Pt.length!==Ft.length)return!1;for(var Tt=!0,zt=0;zt<Pt.length&&(Tt=Ct(Pt[zt],Ft[zt]));zt++);return Tt}if(M(Pt)||M(Ft)){var Xt=Object.keys(Pt),re=Object.keys(Ft);if(Xt.length!==re.length)return!1;for(Tt=!0,zt=0;zt<Xt.length&&(Tt=Ct(Pt[Xt[zt]],Ft[Xt[zt]]));zt++);return Tt}return!1},H=function(Pt,Ft){if(!r(Pt))return Pt;for(var Tt=[],zt=0;zt<Pt.length;zt++){var Xt=Pt[zt];Tt.push(Ft(Xt,zt))}return Tt},et=function(Pt,Ft,Tt){for(var zt=0,Xt=x(Ft)?Ft.split("."):Ft;Pt&&zt<Xt.length;)Pt=Pt[Xt[zt++]];return Pt===void 0||zt<Xt.length?Tt:Pt},nt=function(Ct){return r(Ct)?Array.prototype.slice.call(Ct):[]},St={},dt=function(Pt){return St[Pt=Pt||"g"]?St[Pt]+=1:St[Pt]=1,Pt+St[Pt]},gt=function(){};function yt(Ct){return E(Ct)?0:r(Ct)?Ct.length:Object.keys(Ct).length}(function(){function Ct(){this.map={}}Ct.prototype.has=function(Pt){return this.map[Pt]!==void 0},Ct.prototype.get=function(Pt,Ft){var Tt=this.map[Pt];return Tt===void 0?Ft:Tt},Ct.prototype.set=function(Pt,Ft){this.map[Pt]=Ft},Ct.prototype.clear=function(){this.map={}},Ct.prototype.delete=function(Pt){delete this.map[Pt]},Ct.prototype.size=function(){return Object.keys(this.map).length}})()},function(a,A,e){"use strict";e.d(A,"b",function(){return p}),e.d(A,"a",function(){return m}),e.d(A,"c",function(){return O}),e.d(A,"d",function(){return l});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var r=function(j,y){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(n[d]=s[d])})(j,y)};function p(E,j){if(typeof j!="function"&&j!==null)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");function y(){this.constructor=E}r(E,j),E.prototype=j===null?Object.create(j):(y.prototype=j.prototype,new y)}var m=function(){return(m=Object.assign||function(j){for(var y,n=1,s=arguments.length;n<s;n++)for(var d in y=arguments[n])Object.prototype.hasOwnProperty.call(y,d)&&(j[d]=y[d]);return j}).apply(this,arguments)};function O(E,j){var y={};for(var n in E)Object.prototype.hasOwnProperty.call(E,n)&&j.indexOf(n)<0&&(y[n]=E[n]);if(E!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(E);s<n.length;s++)j.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(E,n[s])&&(y[n[s]]=E[n[s]])}return y}function l(){for(var E=0,j=0,y=arguments.length;j<y;j++)E+=arguments[j].length;var n=Array(E),s=0;for(j=0;j<y;j++)for(var d=arguments[j],M=0,S=d.length;M<S;M++,s++)n[s]=d[M];return n}},function(a,A,e){"use strict";e.d(A,"a",function(){return r}),e.d(A,"b",function(){return p}),e.d(A,"c",function(){return O}),e.d(A,"d",function(){return Te}),e.d(A,"e",function(){return si}),e.d(A,"f",function(){return m});var r={};e.r(r),e.d(r,"create",function(){return E}),e.d(r,"fromMat4",function(){return j}),e.d(r,"clone",function(){return y}),e.d(r,"copy",function(){return n}),e.d(r,"fromValues",function(){return s}),e.d(r,"set",function(){return d}),e.d(r,"identity",function(){return M}),e.d(r,"transpose",function(){return S}),e.d(r,"invert",function(){return T}),e.d(r,"adjoint",function(){return v}),e.d(r,"determinant",function(){return x}),e.d(r,"multiply",function(){return C}),e.d(r,"translate",function(){return N}),e.d(r,"rotate",function(){return X}),e.d(r,"scale",function(){return tt}),e.d(r,"fromTranslation",function(){return it}),e.d(r,"fromRotation",function(){return pt}),e.d(r,"fromScaling",function(){return ft}),e.d(r,"fromMat2d",function(){return Ot}),e.d(r,"fromQuat",function(){return wt}),e.d(r,"normalFromMat4",function(){return xt}),e.d(r,"projection",function(){return lt}),e.d(r,"str",function(){return Vt}),e.d(r,"frob",function(){return Lt}),e.d(r,"add",function(){return Et}),e.d(r,"subtract",function(){return J}),e.d(r,"multiplyScalar",function(){return ht}),e.d(r,"multiplyScalarAndAdd",function(){return vt}),e.d(r,"exactEquals",function(){return bt}),e.d(r,"equals",function(){return At}),e.d(r,"mul",function(){return q}),e.d(r,"sub",function(){return ct});var p={};e.r(p),e.d(p,"create",function(){return ot}),e.d(p,"clone",function(){return _}),e.d(p,"copy",function(){return P}),e.d(p,"fromValues",function(){return Y}),e.d(p,"set",function(){return k}),e.d(p,"identity",function(){return h}),e.d(p,"transpose",function(){return g}),e.d(p,"invert",function(){return F}),e.d(p,"adjoint",function(){return V}),e.d(p,"determinant",function(){return H}),e.d(p,"multiply",function(){return et}),e.d(p,"translate",function(){return nt}),e.d(p,"scale",function(){return St}),e.d(p,"rotate",function(){return dt}),e.d(p,"rotateX",function(){return gt}),e.d(p,"rotateY",function(){return yt}),e.d(p,"rotateZ",function(){return Ct}),e.d(p,"fromTranslation",function(){return Pt}),e.d(p,"fromScaling",function(){return Ft}),e.d(p,"fromRotation",function(){return Tt}),e.d(p,"fromXRotation",function(){return zt}),e.d(p,"fromYRotation",function(){return Xt}),e.d(p,"fromZRotation",function(){return re}),e.d(p,"fromRotationTranslation",function(){return de}),e.d(p,"fromQuat2",function(){return ye}),e.d(p,"getTranslation",function(){return we}),e.d(p,"getScaling",function(){return De}),e.d(p,"getRotation",function(){return Ve}),e.d(p,"fromRotationTranslationScale",function(){return pn}),e.d(p,"fromRotationTranslationScaleOrigin",function(){return sn}),e.d(p,"fromQuat",function(){return In}),e.d(p,"frustum",function(){return An}),e.d(p,"perspective",function(){return Rn}),e.d(p,"perspectiveFromFieldOfView",function(){return Mn}),e.d(p,"ortho",function(){return Cn}),e.d(p,"lookAt",function(){return Gn}),e.d(p,"targetTo",function(){return Xn}),e.d(p,"str",function(){return tr}),e.d(p,"frob",function(){return or}),e.d(p,"add",function(){return nr}),e.d(p,"subtract",function(){return er}),e.d(p,"multiplyScalar",function(){return Sr}),e.d(p,"multiplyScalarAndAdd",function(){return Vr}),e.d(p,"exactEquals",function(){return ti}),e.d(p,"equals",function(){return hi}),e.d(p,"mul",function(){return Fi}),e.d(p,"sub",function(){return to});var m={};e.r(m),e.d(m,"create",function(){return Ti}),e.d(m,"clone",function(){return Ui}),e.d(m,"fromValues",function(){return Li}),e.d(m,"copy",function(){return Vi}),e.d(m,"set",function(){return ro}),e.d(m,"add",function(){return jr}),e.d(m,"subtract",function(){return Ji}),e.d(m,"multiply",function(){return pr}),e.d(m,"divide",function(){return Xr}),e.d(m,"ceil",function(){return Br}),e.d(m,"floor",function(){return Nr}),e.d(m,"min",function(){return Yr}),e.d(m,"max",function(){return Kr}),e.d(m,"round",function(){return ni}),e.d(m,"scale",function(){return fi}),e.d(m,"scaleAndAdd",function(){return $r}),e.d(m,"distance",function(){return ci}),e.d(m,"squaredDistance",function(){return Qr}),e.d(m,"length",function(){return gi}),e.d(m,"squaredLength",function(){return Oi}),e.d(m,"negate",function(){return bi}),e.d(m,"inverse",function(){return _i}),e.d(m,"normalize",function(){return Qi}),e.d(m,"dot",function(){return io}),e.d(m,"cross",function(){return Wi}),e.d(m,"lerp",function(){return Zi}),e.d(m,"random",function(){return Pi}),e.d(m,"transformMat4",function(){return no}),e.d(m,"transformQuat",function(){return Mo}),e.d(m,"zero",function(){return ao}),e.d(m,"str",function(){return uo}),e.d(m,"exactEquals",function(){return xo}),e.d(m,"equals",function(){return oe}),e.d(m,"sub",function(){return te}),e.d(m,"mul",function(){return Oe}),e.d(m,"div",function(){return Qe}),e.d(m,"dist",function(){return On}),e.d(m,"sqrDist",function(){return Vn}),e.d(m,"len",function(){return Hn}),e.d(m,"sqrLen",function(){return $e}),e.d(m,"forEach",function(){return rn});var O={};e.r(O),e.d(O,"create",function(){return on}),e.d(O,"identity",function(){return $n}),e.d(O,"setAxisAngle",function(){return vr}),e.d(O,"getAxisAngle",function(){return ar}),e.d(O,"getAngle",function(){return rr}),e.d(O,"multiply",function(){return Fr}),e.d(O,"rotateX",function(){return Ar}),e.d(O,"rotateY",function(){return wr}),e.d(O,"rotateZ",function(){return xr}),e.d(O,"calculateW",function(){return Er}),e.d(O,"exp",function(){return Ir}),e.d(O,"ln",function(){return Lr}),e.d(O,"pow",function(){return Pr}),e.d(O,"slerp",function(){return Dr}),e.d(O,"random",function(){return ri}),e.d(O,"invert",function(){return vi}),e.d(O,"conjugate",function(){return ii}),e.d(O,"fromMat3",function(){return Si}),e.d(O,"fromEuler",function(){return zi}),e.d(O,"str",function(){return Xi}),e.d(O,"clone",function(){return ut}),e.d(O,"fromValues",function(){return Bt}),e.d(O,"copy",function(){return Jt}),e.d(O,"set",function(){return ie}),e.d(O,"add",function(){return se}),e.d(O,"mul",function(){return Ce}),e.d(O,"scale",function(){return Ee}),e.d(O,"dot",function(){return cn}),e.d(O,"lerp",function(){return xn}),e.d(O,"length",function(){return _t}),e.d(O,"len",function(){return Yt}),e.d(O,"squaredLength",function(){return Se}),e.d(O,"sqrLen",function(){return Wt}),e.d(O,"normalize",function(){return ue}),e.d(O,"exactEquals",function(){return vn}),e.d(O,"equals",function(){return kn}),e.d(O,"rotationTo",function(){return _n}),e.d(O,"sqlerp",function(){return Un}),e.d(O,"setAxes",function(){return Ze});var l=e(11);function E(){var R=new l.a(9);return l.a!=Float32Array&&(R[1]=0,R[2]=0,R[3]=0,R[5]=0,R[6]=0,R[7]=0),R[0]=1,R[4]=1,R[8]=1,R}function j(R,mt){return R[0]=mt[0],R[1]=mt[1],R[2]=mt[2],R[3]=mt[4],R[4]=mt[5],R[5]=mt[6],R[6]=mt[8],R[7]=mt[9],R[8]=mt[10],R}function y(R){var mt=new l.a(9);return mt[0]=R[0],mt[1]=R[1],mt[2]=R[2],mt[3]=R[3],mt[4]=R[4],mt[5]=R[5],mt[6]=R[6],mt[7]=R[7],mt[8]=R[8],mt}function n(R,mt){return R[0]=mt[0],R[1]=mt[1],R[2]=mt[2],R[3]=mt[3],R[4]=mt[4],R[5]=mt[5],R[6]=mt[6],R[7]=mt[7],R[8]=mt[8],R}function s(R,mt,$t,me,Zt,ve,he,ce,Me){var _e=new l.a(9);return _e[0]=R,_e[1]=mt,_e[2]=$t,_e[3]=me,_e[4]=Zt,_e[5]=ve,_e[6]=he,_e[7]=ce,_e[8]=Me,_e}function d(R,mt,$t,me,Zt,ve,he,ce,Me,_e){return R[0]=mt,R[1]=$t,R[2]=me,R[3]=Zt,R[4]=ve,R[5]=he,R[6]=ce,R[7]=Me,R[8]=_e,R}function M(R){return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=1,R[5]=0,R[6]=0,R[7]=0,R[8]=1,R}function S(R,mt){if(R===mt){var $t=mt[1],me=mt[2],Zt=mt[5];R[1]=mt[3],R[2]=mt[6],R[3]=$t,R[5]=mt[7],R[6]=me,R[7]=Zt}else R[0]=mt[0],R[1]=mt[3],R[2]=mt[6],R[3]=mt[1],R[4]=mt[4],R[5]=mt[7],R[6]=mt[2],R[7]=mt[5],R[8]=mt[8];return R}function T(R,mt){var $t=mt[0],me=mt[1],Zt=mt[2],ve=mt[3],he=mt[4],ce=mt[5],Me=mt[6],_e=mt[7],We=mt[8],Re=We*he-ce*_e,tn=-We*ve+ce*Me,ke=_e*ve-he*Me,ln=$t*Re+me*tn+Zt*ke;return ln?(ln=1/ln,R[0]=Re*ln,R[1]=(-We*me+Zt*_e)*ln,R[2]=(ce*me-Zt*he)*ln,R[3]=tn*ln,R[4]=(We*$t-Zt*Me)*ln,R[5]=(-ce*$t+Zt*ve)*ln,R[6]=ke*ln,R[7]=(-_e*$t+me*Me)*ln,R[8]=(he*$t-me*ve)*ln,R):null}function v(R,mt){var $t=mt[0],me=mt[1],Zt=mt[2],ve=mt[3],he=mt[4],ce=mt[5],Me=mt[6],_e=mt[7],We=mt[8];return R[0]=he*We-ce*_e,R[1]=Zt*_e-me*We,R[2]=me*ce-Zt*he,R[3]=ce*Me-ve*We,R[4]=$t*We-Zt*Me,R[5]=Zt*ve-$t*ce,R[6]=ve*_e-he*Me,R[7]=me*Me-$t*_e,R[8]=$t*he-me*ve,R}function x(R){var mt=R[0],$t=R[1],me=R[2],Zt=R[3],ve=R[4],he=R[5],ce=R[6],Me=R[7],_e=R[8];return mt*(_e*ve-he*Me)+$t*(-_e*Zt+he*ce)+me*(Me*Zt-ve*ce)}function C(R,mt,$t){var me=mt[0],Zt=mt[1],ve=mt[2],he=mt[3],ce=mt[4],Me=mt[5],_e=mt[6],We=mt[7],Re=mt[8],tn=$t[0],ke=$t[1],ln=$t[2],hn=$t[3],nn=$t[4],dn=$t[5],Sn=$t[6],Pe=$t[7],le=$t[8];return R[0]=tn*me+ke*he+ln*_e,R[1]=tn*Zt+ke*ce+ln*We,R[2]=tn*ve+ke*Me+ln*Re,R[3]=hn*me+nn*he+dn*_e,R[4]=hn*Zt+nn*ce+dn*We,R[5]=hn*ve+nn*Me+dn*Re,R[6]=Sn*me+Pe*he+le*_e,R[7]=Sn*Zt+Pe*ce+le*We,R[8]=Sn*ve+Pe*Me+le*Re,R}function N(R,mt,$t){var me=mt[0],Zt=mt[1],ve=mt[2],he=mt[3],ce=mt[4],Me=mt[5],_e=mt[6],We=mt[7],Re=mt[8],tn=$t[0],ke=$t[1];return R[0]=me,R[1]=Zt,R[2]=ve,R[3]=he,R[4]=ce,R[5]=Me,R[6]=tn*me+ke*he+_e,R[7]=tn*Zt+ke*ce+We,R[8]=tn*ve+ke*Me+Re,R}function X(R,mt,$t){var me=mt[0],Zt=mt[1],ve=mt[2],he=mt[3],ce=mt[4],Me=mt[5],_e=mt[6],We=mt[7],Re=mt[8],tn=Math.sin($t),ke=Math.cos($t);return R[0]=ke*me+tn*he,R[1]=ke*Zt+tn*ce,R[2]=ke*ve+tn*Me,R[3]=ke*he-tn*me,R[4]=ke*ce-tn*Zt,R[5]=ke*Me-tn*ve,R[6]=_e,R[7]=We,R[8]=Re,R}function tt(R,mt,$t){var me=$t[0],Zt=$t[1];return R[0]=me*mt[0],R[1]=me*mt[1],R[2]=me*mt[2],R[3]=Zt*mt[3],R[4]=Zt*mt[4],R[5]=Zt*mt[5],R[6]=mt[6],R[7]=mt[7],R[8]=mt[8],R}function it(R,mt){return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=1,R[5]=0,R[6]=mt[0],R[7]=mt[1],R[8]=1,R}function pt(R,mt){var $t=Math.sin(mt),me=Math.cos(mt);return R[0]=me,R[1]=$t,R[2]=0,R[3]=-$t,R[4]=me,R[5]=0,R[6]=0,R[7]=0,R[8]=1,R}function ft(R,mt){return R[0]=mt[0],R[1]=0,R[2]=0,R[3]=0,R[4]=mt[1],R[5]=0,R[6]=0,R[7]=0,R[8]=1,R}function Ot(R,mt){return R[0]=mt[0],R[1]=mt[1],R[2]=0,R[3]=mt[2],R[4]=mt[3],R[5]=0,R[6]=mt[4],R[7]=mt[5],R[8]=1,R}function wt(R,mt){var $t=mt[0],me=mt[1],Zt=mt[2],ve=mt[3],he=$t+$t,ce=me+me,Me=Zt+Zt,_e=$t*he,We=me*he,Re=me*ce,tn=Zt*he,ke=Zt*ce,ln=Zt*Me,hn=ve*he,nn=ve*ce,dn=ve*Me;return R[0]=1-Re-ln,R[3]=We-dn,R[6]=tn+nn,R[1]=We+dn,R[4]=1-_e-ln,R[7]=ke-hn,R[2]=tn-nn,R[5]=ke+hn,R[8]=1-_e-Re,R}function xt(R,mt){var $t=mt[0],me=mt[1],Zt=mt[2],ve=mt[3],he=mt[4],ce=mt[5],Me=mt[6],_e=mt[7],We=mt[8],Re=mt[9],tn=mt[10],ke=mt[11],ln=mt[12],hn=mt[13],nn=mt[14],dn=mt[15],Sn=$t*ce-me*he,Pe=$t*Me-Zt*he,le=$t*_e-ve*he,Le=me*Me-Zt*ce,Be=me*_e-ve*ce,en=Zt*_e-ve*Me,un=We*hn-Re*ln,ze=We*nn-tn*ln,fn=We*dn-ke*ln,mn=Re*nn-tn*hn,Wn=Re*dn-ke*hn,Tn=tn*dn-ke*nn,Pn=Sn*Tn-Pe*Wn+le*mn+Le*fn-Be*ze+en*un;return Pn?(Pn=1/Pn,R[0]=(ce*Tn-Me*Wn+_e*mn)*Pn,R[1]=(Me*fn-he*Tn-_e*ze)*Pn,R[2]=(he*Wn-ce*fn+_e*un)*Pn,R[3]=(Zt*Wn-me*Tn-ve*mn)*Pn,R[4]=($t*Tn-Zt*fn+ve*ze)*Pn,R[5]=(me*fn-$t*Wn-ve*un)*Pn,R[6]=(hn*en-nn*Be+dn*Le)*Pn,R[7]=(nn*le-ln*en-dn*Pe)*Pn,R[8]=(ln*Be-hn*le+dn*Sn)*Pn,R):null}function lt(R,mt,$t){return R[0]=2/mt,R[1]=0,R[2]=0,R[3]=0,R[4]=-2/$t,R[5]=0,R[6]=-1,R[7]=1,R[8]=1,R}function Vt(R){return"mat3("+R[0]+", "+R[1]+", "+R[2]+", "+R[3]+", "+R[4]+", "+R[5]+", "+R[6]+", "+R[7]+", "+R[8]+")"}function Lt(R){return Math.hypot(R[0],R[1],R[2],R[3],R[4],R[5],R[6],R[7],R[8])}function Et(R,mt,$t){return R[0]=mt[0]+$t[0],R[1]=mt[1]+$t[1],R[2]=mt[2]+$t[2],R[3]=mt[3]+$t[3],R[4]=mt[4]+$t[4],R[5]=mt[5]+$t[5],R[6]=mt[6]+$t[6],R[7]=mt[7]+$t[7],R[8]=mt[8]+$t[8],R}function J(R,mt,$t){return R[0]=mt[0]-$t[0],R[1]=mt[1]-$t[1],R[2]=mt[2]-$t[2],R[3]=mt[3]-$t[3],R[4]=mt[4]-$t[4],R[5]=mt[5]-$t[5],R[6]=mt[6]-$t[6],R[7]=mt[7]-$t[7],R[8]=mt[8]-$t[8],R}function ht(R,mt,$t){return R[0]=mt[0]*$t,R[1]=mt[1]*$t,R[2]=mt[2]*$t,R[3]=mt[3]*$t,R[4]=mt[4]*$t,R[5]=mt[5]*$t,R[6]=mt[6]*$t,R[7]=mt[7]*$t,R[8]=mt[8]*$t,R}function vt(R,mt,$t,me){return R[0]=mt[0]+$t[0]*me,R[1]=mt[1]+$t[1]*me,R[2]=mt[2]+$t[2]*me,R[3]=mt[3]+$t[3]*me,R[4]=mt[4]+$t[4]*me,R[5]=mt[5]+$t[5]*me,R[6]=mt[6]+$t[6]*me,R[7]=mt[7]+$t[7]*me,R[8]=mt[8]+$t[8]*me,R}function bt(R,mt){return R[0]===mt[0]&&R[1]===mt[1]&&R[2]===mt[2]&&R[3]===mt[3]&&R[4]===mt[4]&&R[5]===mt[5]&&R[6]===mt[6]&&R[7]===mt[7]&&R[8]===mt[8]}function At(R,mt){var $t=R[0],me=R[1],Zt=R[2],ve=R[3],he=R[4],ce=R[5],Me=R[6],_e=R[7],We=R[8],Re=mt[0],tn=mt[1],ke=mt[2],ln=mt[3],hn=mt[4],nn=mt[5],dn=mt[6],Sn=mt[7],Pe=mt[8];return Math.abs($t-Re)<=l.b*Math.max(1,Math.abs($t),Math.abs(Re))&&Math.abs(me-tn)<=l.b*Math.max(1,Math.abs(me),Math.abs(tn))&&Math.abs(Zt-ke)<=l.b*Math.max(1,Math.abs(Zt),Math.abs(ke))&&Math.abs(ve-ln)<=l.b*Math.max(1,Math.abs(ve),Math.abs(ln))&&Math.abs(he-hn)<=l.b*Math.max(1,Math.abs(he),Math.abs(hn))&&Math.abs(ce-nn)<=l.b*Math.max(1,Math.abs(ce),Math.abs(nn))&&Math.abs(Me-dn)<=l.b*Math.max(1,Math.abs(Me),Math.abs(dn))&&Math.abs(_e-Sn)<=l.b*Math.max(1,Math.abs(_e),Math.abs(Sn))&&Math.abs(We-Pe)<=l.b*Math.max(1,Math.abs(We),Math.abs(Pe))}var q=C,ct=J;function ot(){var R=new l.a(16);return l.a!=Float32Array&&(R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[11]=0,R[12]=0,R[13]=0,R[14]=0),R[0]=1,R[5]=1,R[10]=1,R[15]=1,R}function _(R){var mt=new l.a(16);return mt[0]=R[0],mt[1]=R[1],mt[2]=R[2],mt[3]=R[3],mt[4]=R[4],mt[5]=R[5],mt[6]=R[6],mt[7]=R[7],mt[8]=R[8],mt[9]=R[9],mt[10]=R[10],mt[11]=R[11],mt[12]=R[12],mt[13]=R[13],mt[14]=R[14],mt[15]=R[15],mt}function P(R,mt){return R[0]=mt[0],R[1]=mt[1],R[2]=mt[2],R[3]=mt[3],R[4]=mt[4],R[5]=mt[5],R[6]=mt[6],R[7]=mt[7],R[8]=mt[8],R[9]=mt[9],R[10]=mt[10],R[11]=mt[11],R[12]=mt[12],R[13]=mt[13],R[14]=mt[14],R[15]=mt[15],R}function Y(R,mt,$t,me,Zt,ve,he,ce,Me,_e,We,Re,tn,ke,ln,hn){var nn=new l.a(16);return nn[0]=R,nn[1]=mt,nn[2]=$t,nn[3]=me,nn[4]=Zt,nn[5]=ve,nn[6]=he,nn[7]=ce,nn[8]=Me,nn[9]=_e,nn[10]=We,nn[11]=Re,nn[12]=tn,nn[13]=ke,nn[14]=ln,nn[15]=hn,nn}function k(R,mt,$t,me,Zt,ve,he,ce,Me,_e,We,Re,tn,ke,ln,hn,nn){return R[0]=mt,R[1]=$t,R[2]=me,R[3]=Zt,R[4]=ve,R[5]=he,R[6]=ce,R[7]=Me,R[8]=_e,R[9]=We,R[10]=Re,R[11]=tn,R[12]=ke,R[13]=ln,R[14]=hn,R[15]=nn,R}function h(R){return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}function g(R,mt){if(R===mt){var $t=mt[1],me=mt[2],Zt=mt[3],ve=mt[6],he=mt[7],ce=mt[11];R[1]=mt[4],R[2]=mt[8],R[3]=mt[12],R[4]=$t,R[6]=mt[9],R[7]=mt[13],R[8]=me,R[9]=ve,R[11]=mt[14],R[12]=Zt,R[13]=he,R[14]=ce}else R[0]=mt[0],R[1]=mt[4],R[2]=mt[8],R[3]=mt[12],R[4]=mt[1],R[5]=mt[5],R[6]=mt[9],R[7]=mt[13],R[8]=mt[2],R[9]=mt[6],R[10]=mt[10],R[11]=mt[14],R[12]=mt[3],R[13]=mt[7],R[14]=mt[11],R[15]=mt[15];return R}function F(R,mt){var $t=mt[0],me=mt[1],Zt=mt[2],ve=mt[3],he=mt[4],ce=mt[5],Me=mt[6],_e=mt[7],We=mt[8],Re=mt[9],tn=mt[10],ke=mt[11],ln=mt[12],hn=mt[13],nn=mt[14],dn=mt[15],Sn=$t*ce-me*he,Pe=$t*Me-Zt*he,le=$t*_e-ve*he,Le=me*Me-Zt*ce,Be=me*_e-ve*ce,en=Zt*_e-ve*Me,un=We*hn-Re*ln,ze=We*nn-tn*ln,fn=We*dn-ke*ln,mn=Re*nn-tn*hn,Wn=Re*dn-ke*hn,Tn=tn*dn-ke*nn,Pn=Sn*Tn-Pe*Wn+le*mn+Le*fn-Be*ze+en*un;return Pn?(Pn=1/Pn,R[0]=(ce*Tn-Me*Wn+_e*mn)*Pn,R[1]=(Zt*Wn-me*Tn-ve*mn)*Pn,R[2]=(hn*en-nn*Be+dn*Le)*Pn,R[3]=(tn*Be-Re*en-ke*Le)*Pn,R[4]=(Me*fn-he*Tn-_e*ze)*Pn,R[5]=($t*Tn-Zt*fn+ve*ze)*Pn,R[6]=(nn*le-ln*en-dn*Pe)*Pn,R[7]=(We*en-tn*le+ke*Pe)*Pn,R[8]=(he*Wn-ce*fn+_e*un)*Pn,R[9]=(me*fn-$t*Wn-ve*un)*Pn,R[10]=(ln*Be-hn*le+dn*Sn)*Pn,R[11]=(Re*le-We*Be-ke*Sn)*Pn,R[12]=(ce*ze-he*mn-Me*un)*Pn,R[13]=($t*mn-me*ze+Zt*un)*Pn,R[14]=(hn*Pe-ln*Le-nn*Sn)*Pn,R[15]=(We*Le-Re*Pe+tn*Sn)*Pn,R):null}function V(R,mt){var $t=mt[0],me=mt[1],Zt=mt[2],ve=mt[3],he=mt[4],ce=mt[5],Me=mt[6],_e=mt[7],We=mt[8],Re=mt[9],tn=mt[10],ke=mt[11],ln=mt[12],hn=mt[13],nn=mt[14],dn=mt[15];return R[0]=ce*(tn*dn-ke*nn)-Re*(Me*dn-_e*nn)+hn*(Me*ke-_e*tn),R[1]=-(me*(tn*dn-ke*nn)-Re*(Zt*dn-ve*nn)+hn*(Zt*ke-ve*tn)),R[2]=me*(Me*dn-_e*nn)-ce*(Zt*dn-ve*nn)+hn*(Zt*_e-ve*Me),R[3]=-(me*(Me*ke-_e*tn)-ce*(Zt*ke-ve*tn)+Re*(Zt*_e-ve*Me)),R[4]=-(he*(tn*dn-ke*nn)-We*(Me*dn-_e*nn)+ln*(Me*ke-_e*tn)),R[5]=$t*(tn*dn-ke*nn)-We*(Zt*dn-ve*nn)+ln*(Zt*ke-ve*tn),R[6]=-($t*(Me*dn-_e*nn)-he*(Zt*dn-ve*nn)+ln*(Zt*_e-ve*Me)),R[7]=$t*(Me*ke-_e*tn)-he*(Zt*ke-ve*tn)+We*(Zt*_e-ve*Me),R[8]=he*(Re*dn-ke*hn)-We*(ce*dn-_e*hn)+ln*(ce*ke-_e*Re),R[9]=-($t*(Re*dn-ke*hn)-We*(me*dn-ve*hn)+ln*(me*ke-ve*Re)),R[10]=$t*(ce*dn-_e*hn)-he*(me*dn-ve*hn)+ln*(me*_e-ve*ce),R[11]=-($t*(ce*ke-_e*Re)-he*(me*ke-ve*Re)+We*(me*_e-ve*ce)),R[12]=-(he*(Re*nn-tn*hn)-We*(ce*nn-Me*hn)+ln*(ce*tn-Me*Re)),R[13]=$t*(Re*nn-tn*hn)-We*(me*nn-Zt*hn)+ln*(me*tn-Zt*Re),R[14]=-($t*(ce*nn-Me*hn)-he*(me*nn-Zt*hn)+ln*(me*Me-Zt*ce)),R[15]=$t*(ce*tn-Me*Re)-he*(me*tn-Zt*Re)+We*(me*Me-Zt*ce),R}function H(R){var mt=R[0],$t=R[1],me=R[2],Zt=R[3],ve=R[4],he=R[5],ce=R[6],Me=R[7],_e=R[8],We=R[9],Re=R[10],tn=R[11],ke=R[12],ln=R[13],hn=R[14],nn=R[15];return(mt*he-$t*ve)*(Re*nn-tn*hn)-(mt*ce-me*ve)*(We*nn-tn*ln)+(mt*Me-Zt*ve)*(We*hn-Re*ln)+($t*ce-me*he)*(_e*nn-tn*ke)-($t*Me-Zt*he)*(_e*hn-Re*ke)+(me*Me-Zt*ce)*(_e*ln-We*ke)}function et(R,mt,$t){var me=mt[0],Zt=mt[1],ve=mt[2],he=mt[3],ce=mt[4],Me=mt[5],_e=mt[6],We=mt[7],Re=mt[8],tn=mt[9],ke=mt[10],ln=mt[11],hn=mt[12],nn=mt[13],dn=mt[14],Sn=mt[15],Pe=$t[0],le=$t[1],Le=$t[2],Be=$t[3];return R[0]=Pe*me+le*ce+Le*Re+Be*hn,R[1]=Pe*Zt+le*Me+Le*tn+Be*nn,R[2]=Pe*ve+le*_e+Le*ke+Be*dn,R[3]=Pe*he+le*We+Le*ln+Be*Sn,Pe=$t[4],le=$t[5],Le=$t[6],Be=$t[7],R[4]=Pe*me+le*ce+Le*Re+Be*hn,R[5]=Pe*Zt+le*Me+Le*tn+Be*nn,R[6]=Pe*ve+le*_e+Le*ke+Be*dn,R[7]=Pe*he+le*We+Le*ln+Be*Sn,Pe=$t[8],le=$t[9],Le=$t[10],Be=$t[11],R[8]=Pe*me+le*ce+Le*Re+Be*hn,R[9]=Pe*Zt+le*Me+Le*tn+Be*nn,R[10]=Pe*ve+le*_e+Le*ke+Be*dn,R[11]=Pe*he+le*We+Le*ln+Be*Sn,Pe=$t[12],le=$t[13],Le=$t[14],Be=$t[15],R[12]=Pe*me+le*ce+Le*Re+Be*hn,R[13]=Pe*Zt+le*Me+Le*tn+Be*nn,R[14]=Pe*ve+le*_e+Le*ke+Be*dn,R[15]=Pe*he+le*We+Le*ln+Be*Sn,R}function nt(R,mt,$t){var me,Zt,ve,he,ce,Me,_e,We,Re,tn,ke,ln,hn=$t[0],nn=$t[1],dn=$t[2];return mt===R?(R[12]=mt[0]*hn+mt[4]*nn+mt[8]*dn+mt[12],R[13]=mt[1]*hn+mt[5]*nn+mt[9]*dn+mt[13],R[14]=mt[2]*hn+mt[6]*nn+mt[10]*dn+mt[14],R[15]=mt[3]*hn+mt[7]*nn+mt[11]*dn+mt[15]):(me=mt[0],Zt=mt[1],ve=mt[2],he=mt[3],ce=mt[4],Me=mt[5],_e=mt[6],We=mt[7],Re=mt[8],tn=mt[9],ke=mt[10],ln=mt[11],R[0]=me,R[1]=Zt,R[2]=ve,R[3]=he,R[4]=ce,R[5]=Me,R[6]=_e,R[7]=We,R[8]=Re,R[9]=tn,R[10]=ke,R[11]=ln,R[12]=me*hn+ce*nn+Re*dn+mt[12],R[13]=Zt*hn+Me*nn+tn*dn+mt[13],R[14]=ve*hn+_e*nn+ke*dn+mt[14],R[15]=he*hn+We*nn+ln*dn+mt[15]),R}function St(R,mt,$t){var me=$t[0],Zt=$t[1],ve=$t[2];return R[0]=mt[0]*me,R[1]=mt[1]*me,R[2]=mt[2]*me,R[3]=mt[3]*me,R[4]=mt[4]*Zt,R[5]=mt[5]*Zt,R[6]=mt[6]*Zt,R[7]=mt[7]*Zt,R[8]=mt[8]*ve,R[9]=mt[9]*ve,R[10]=mt[10]*ve,R[11]=mt[11]*ve,R[12]=mt[12],R[13]=mt[13],R[14]=mt[14],R[15]=mt[15],R}function dt(R,mt,$t,me){var Zt,ve,he,ce,Me,_e,We,Re,tn,ke,ln,hn,nn,dn,Sn,Pe,le,Le,Be,en,un,ze,fn,mn,Wn=me[0],Tn=me[1],Pn=me[2],lr=Math.hypot(Wn,Tn,Pn);return lr<l.b?null:(Wn*=lr=1/lr,Tn*=lr,Pn*=lr,Zt=Math.sin($t),he=1-(ve=Math.cos($t)),ce=mt[0],Me=mt[1],_e=mt[2],We=mt[3],Re=mt[4],tn=mt[5],ke=mt[6],ln=mt[7],hn=mt[8],nn=mt[9],dn=mt[10],Sn=mt[11],Pe=Wn*Wn*he+ve,le=Tn*Wn*he+Pn*Zt,Le=Pn*Wn*he-Tn*Zt,Be=Wn*Tn*he-Pn*Zt,en=Tn*Tn*he+ve,un=Pn*Tn*he+Wn*Zt,ze=Wn*Pn*he+Tn*Zt,fn=Tn*Pn*he-Wn*Zt,mn=Pn*Pn*he+ve,R[0]=ce*Pe+Re*le+hn*Le,R[1]=Me*Pe+tn*le+nn*Le,R[2]=_e*Pe+ke*le+dn*Le,R[3]=We*Pe+ln*le+Sn*Le,R[4]=ce*Be+Re*en+hn*un,R[5]=Me*Be+tn*en+nn*un,R[6]=_e*Be+ke*en+dn*un,R[7]=We*Be+ln*en+Sn*un,R[8]=ce*ze+Re*fn+hn*mn,R[9]=Me*ze+tn*fn+nn*mn,R[10]=_e*ze+ke*fn+dn*mn,R[11]=We*ze+ln*fn+Sn*mn,mt!==R&&(R[12]=mt[12],R[13]=mt[13],R[14]=mt[14],R[15]=mt[15]),R)}function gt(R,mt,$t){var me=Math.sin($t),Zt=Math.cos($t),ve=mt[4],he=mt[5],ce=mt[6],Me=mt[7],_e=mt[8],We=mt[9],Re=mt[10],tn=mt[11];return mt!==R&&(R[0]=mt[0],R[1]=mt[1],R[2]=mt[2],R[3]=mt[3],R[12]=mt[12],R[13]=mt[13],R[14]=mt[14],R[15]=mt[15]),R[4]=ve*Zt+_e*me,R[5]=he*Zt+We*me,R[6]=ce*Zt+Re*me,R[7]=Me*Zt+tn*me,R[8]=_e*Zt-ve*me,R[9]=We*Zt-he*me,R[10]=Re*Zt-ce*me,R[11]=tn*Zt-Me*me,R}function yt(R,mt,$t){var me=Math.sin($t),Zt=Math.cos($t),ve=mt[0],he=mt[1],ce=mt[2],Me=mt[3],_e=mt[8],We=mt[9],Re=mt[10],tn=mt[11];return mt!==R&&(R[4]=mt[4],R[5]=mt[5],R[6]=mt[6],R[7]=mt[7],R[12]=mt[12],R[13]=mt[13],R[14]=mt[14],R[15]=mt[15]),R[0]=ve*Zt-_e*me,R[1]=he*Zt-We*me,R[2]=ce*Zt-Re*me,R[3]=Me*Zt-tn*me,R[8]=ve*me+_e*Zt,R[9]=he*me+We*Zt,R[10]=ce*me+Re*Zt,R[11]=Me*me+tn*Zt,R}function Ct(R,mt,$t){var me=Math.sin($t),Zt=Math.cos($t),ve=mt[0],he=mt[1],ce=mt[2],Me=mt[3],_e=mt[4],We=mt[5],Re=mt[6],tn=mt[7];return mt!==R&&(R[8]=mt[8],R[9]=mt[9],R[10]=mt[10],R[11]=mt[11],R[12]=mt[12],R[13]=mt[13],R[14]=mt[14],R[15]=mt[15]),R[0]=ve*Zt+_e*me,R[1]=he*Zt+We*me,R[2]=ce*Zt+Re*me,R[3]=Me*Zt+tn*me,R[4]=_e*Zt-ve*me,R[5]=We*Zt-he*me,R[6]=Re*Zt-ce*me,R[7]=tn*Zt-Me*me,R}function Pt(R,mt){return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=mt[0],R[13]=mt[1],R[14]=mt[2],R[15]=1,R}function Ft(R,mt){return R[0]=mt[0],R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=mt[1],R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=mt[2],R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}function Tt(R,mt,$t){var me,Zt,ve,he=$t[0],ce=$t[1],Me=$t[2],_e=Math.hypot(he,ce,Me);return _e<l.b?null:(he*=_e=1/_e,ce*=_e,Me*=_e,me=Math.sin(mt),ve=1-(Zt=Math.cos(mt)),R[0]=he*he*ve+Zt,R[1]=ce*he*ve+Me*me,R[2]=Me*he*ve-ce*me,R[3]=0,R[4]=he*ce*ve-Me*me,R[5]=ce*ce*ve+Zt,R[6]=Me*ce*ve+he*me,R[7]=0,R[8]=he*Me*ve+ce*me,R[9]=ce*Me*ve-he*me,R[10]=Me*Me*ve+Zt,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R)}function zt(R,mt){var $t=Math.sin(mt),me=Math.cos(mt);return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=me,R[6]=$t,R[7]=0,R[8]=0,R[9]=-$t,R[10]=me,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}function Xt(R,mt){var $t=Math.sin(mt),me=Math.cos(mt);return R[0]=me,R[1]=0,R[2]=-$t,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=$t,R[9]=0,R[10]=me,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}function re(R,mt){var $t=Math.sin(mt),me=Math.cos(mt);return R[0]=me,R[1]=$t,R[2]=0,R[3]=0,R[4]=-$t,R[5]=me,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}function de(R,mt,$t){var me=mt[0],Zt=mt[1],ve=mt[2],he=mt[3],ce=me+me,Me=Zt+Zt,_e=ve+ve,We=me*ce,Re=me*Me,tn=me*_e,ke=Zt*Me,ln=Zt*_e,hn=ve*_e,nn=he*ce,dn=he*Me,Sn=he*_e;return R[0]=1-(ke+hn),R[1]=Re+Sn,R[2]=tn-dn,R[3]=0,R[4]=Re-Sn,R[5]=1-(We+hn),R[6]=ln+nn,R[7]=0,R[8]=tn+dn,R[9]=ln-nn,R[10]=1-(We+ke),R[11]=0,R[12]=$t[0],R[13]=$t[1],R[14]=$t[2],R[15]=1,R}function ye(R,mt){var $t=new l.a(3),me=-mt[0],Zt=-mt[1],ve=-mt[2],he=mt[3],ce=mt[4],Me=mt[5],_e=mt[6],We=mt[7],Re=me*me+Zt*Zt+ve*ve+he*he;return Re>0?($t[0]=2*(ce*he+We*me+Me*ve-_e*Zt)/Re,$t[1]=2*(Me*he+We*Zt+_e*me-ce*ve)/Re,$t[2]=2*(_e*he+We*ve+ce*Zt-Me*me)/Re):($t[0]=2*(ce*he+We*me+Me*ve-_e*Zt),$t[1]=2*(Me*he+We*Zt+_e*me-ce*ve),$t[2]=2*(_e*he+We*ve+ce*Zt-Me*me)),de(R,mt,$t),R}function we(R,mt){return R[0]=mt[12],R[1]=mt[13],R[2]=mt[14],R}function De(R,mt){var $t=mt[0],me=mt[1],Zt=mt[2],ve=mt[4],he=mt[5],ce=mt[6],Me=mt[8],_e=mt[9],We=mt[10];return R[0]=Math.hypot($t,me,Zt),R[1]=Math.hypot(ve,he,ce),R[2]=Math.hypot(Me,_e,We),R}function Ve(R,mt){var $t=new l.a(3);De($t,mt);var me=1/$t[0],Zt=1/$t[1],ve=1/$t[2],he=mt[0]*me,ce=mt[1]*Zt,Me=mt[2]*ve,_e=mt[4]*me,We=mt[5]*Zt,Re=mt[6]*ve,tn=mt[8]*me,ke=mt[9]*Zt,ln=mt[10]*ve,hn=he+We+ln,nn=0;return hn>0?(nn=2*Math.sqrt(hn+1),R[3]=.25*nn,R[0]=(Re-ke)/nn,R[1]=(tn-Me)/nn,R[2]=(ce-_e)/nn):he>We&&he>ln?(nn=2*Math.sqrt(1+he-We-ln),R[3]=(Re-ke)/nn,R[0]=.25*nn,R[1]=(ce+_e)/nn,R[2]=(tn+Me)/nn):We>ln?(nn=2*Math.sqrt(1+We-he-ln),R[3]=(tn-Me)/nn,R[0]=(ce+_e)/nn,R[1]=.25*nn,R[2]=(Re+ke)/nn):(nn=2*Math.sqrt(1+ln-he-We),R[3]=(ce-_e)/nn,R[0]=(tn+Me)/nn,R[1]=(Re+ke)/nn,R[2]=.25*nn),R}function pn(R,mt,$t,me){var Zt=mt[0],ve=mt[1],he=mt[2],ce=mt[3],Me=Zt+Zt,_e=ve+ve,We=he+he,Re=Zt*Me,tn=Zt*_e,ke=Zt*We,ln=ve*_e,hn=ve*We,nn=he*We,dn=ce*Me,Sn=ce*_e,Pe=ce*We,le=me[0],Le=me[1],Be=me[2];return R[0]=(1-(ln+nn))*le,R[1]=(tn+Pe)*le,R[2]=(ke-Sn)*le,R[3]=0,R[4]=(tn-Pe)*Le,R[5]=(1-(Re+nn))*Le,R[6]=(hn+dn)*Le,R[7]=0,R[8]=(ke+Sn)*Be,R[9]=(hn-dn)*Be,R[10]=(1-(Re+ln))*Be,R[11]=0,R[12]=$t[0],R[13]=$t[1],R[14]=$t[2],R[15]=1,R}function sn(R,mt,$t,me,Zt){var ve=mt[0],he=mt[1],ce=mt[2],Me=mt[3],_e=ve+ve,We=he+he,Re=ce+ce,tn=ve*_e,ke=ve*We,ln=ve*Re,hn=he*We,nn=he*Re,dn=ce*Re,Sn=Me*_e,Pe=Me*We,le=Me*Re,Le=me[0],Be=me[1],en=me[2],un=Zt[0],ze=Zt[1],fn=Zt[2],mn=(1-(hn+dn))*Le,Wn=(ke+le)*Le,Tn=(ln-Pe)*Le,Pn=(ke-le)*Be,lr=(1-(tn+dn))*Be,Hr=(nn+Sn)*Be,Gr=(ln+Pe)*en,Mr=(nn-Sn)*en,oi=(1-(tn+hn))*en;return R[0]=mn,R[1]=Wn,R[2]=Tn,R[3]=0,R[4]=Pn,R[5]=lr,R[6]=Hr,R[7]=0,R[8]=Gr,R[9]=Mr,R[10]=oi,R[11]=0,R[12]=$t[0]+un-(mn*un+Pn*ze+Gr*fn),R[13]=$t[1]+ze-(Wn*un+lr*ze+Mr*fn),R[14]=$t[2]+fn-(Tn*un+Hr*ze+oi*fn),R[15]=1,R}function In(R,mt){var $t=mt[0],me=mt[1],Zt=mt[2],ve=mt[3],he=$t+$t,ce=me+me,Me=Zt+Zt,_e=$t*he,We=me*he,Re=me*ce,tn=Zt*he,ke=Zt*ce,ln=Zt*Me,hn=ve*he,nn=ve*ce,dn=ve*Me;return R[0]=1-Re-ln,R[1]=We+dn,R[2]=tn-nn,R[3]=0,R[4]=We-dn,R[5]=1-_e-ln,R[6]=ke+hn,R[7]=0,R[8]=tn+nn,R[9]=ke-hn,R[10]=1-_e-Re,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}function An(R,mt,$t,me,Zt,ve,he){var ce=1/($t-mt),Me=1/(Zt-me),_e=1/(ve-he);return R[0]=2*ve*ce,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=2*ve*Me,R[6]=0,R[7]=0,R[8]=($t+mt)*ce,R[9]=(Zt+me)*Me,R[10]=(he+ve)*_e,R[11]=-1,R[12]=0,R[13]=0,R[14]=he*ve*2*_e,R[15]=0,R}function Rn(R,mt,$t,me,Zt){var ve,he=1/Math.tan(mt/2);return R[0]=he/$t,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=he,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[11]=-1,R[12]=0,R[13]=0,R[15]=0,Zt!=null&&Zt!==1/0?(ve=1/(me-Zt),R[10]=(Zt+me)*ve,R[14]=2*Zt*me*ve):(R[10]=-1,R[14]=-2*me),R}function Mn(R,mt,$t,me){var Zt=Math.tan(mt.upDegrees*Math.PI/180),ve=Math.tan(mt.downDegrees*Math.PI/180),he=Math.tan(mt.leftDegrees*Math.PI/180),ce=Math.tan(mt.rightDegrees*Math.PI/180),Me=2/(he+ce),_e=2/(Zt+ve);return R[0]=Me,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=_e,R[6]=0,R[7]=0,R[8]=-(he-ce)*Me*.5,R[9]=(Zt-ve)*_e*.5,R[10]=me/($t-me),R[11]=-1,R[12]=0,R[13]=0,R[14]=me*$t/($t-me),R[15]=0,R}function Cn(R,mt,$t,me,Zt,ve,he){var ce=1/(mt-$t),Me=1/(me-Zt),_e=1/(ve-he);return R[0]=-2*ce,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=-2*Me,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=2*_e,R[11]=0,R[12]=(mt+$t)*ce,R[13]=(Zt+me)*Me,R[14]=(he+ve)*_e,R[15]=1,R}function Gn(R,mt,$t,me){var Zt,ve,he,ce,Me,_e,We,Re,tn,ke,ln=mt[0],hn=mt[1],nn=mt[2],dn=me[0],Sn=me[1],Pe=me[2],le=$t[0],Le=$t[1],Be=$t[2];return Math.abs(ln-le)<l.b&&Math.abs(hn-Le)<l.b&&Math.abs(nn-Be)<l.b?h(R):(We=ln-le,Re=hn-Le,tn=nn-Be,Zt=Sn*(tn*=ke=1/Math.hypot(We,Re,tn))-Pe*(Re*=ke),ve=Pe*(We*=ke)-dn*tn,he=dn*Re-Sn*We,(ke=Math.hypot(Zt,ve,he))?(Zt*=ke=1/ke,ve*=ke,he*=ke):(Zt=0,ve=0,he=0),ce=Re*he-tn*ve,Me=tn*Zt-We*he,_e=We*ve-Re*Zt,(ke=Math.hypot(ce,Me,_e))?(ce*=ke=1/ke,Me*=ke,_e*=ke):(ce=0,Me=0,_e=0),R[0]=Zt,R[1]=ce,R[2]=We,R[3]=0,R[4]=ve,R[5]=Me,R[6]=Re,R[7]=0,R[8]=he,R[9]=_e,R[10]=tn,R[11]=0,R[12]=-(Zt*ln+ve*hn+he*nn),R[13]=-(ce*ln+Me*hn+_e*nn),R[14]=-(We*ln+Re*hn+tn*nn),R[15]=1,R)}function Xn(R,mt,$t,me){var Zt=mt[0],ve=mt[1],he=mt[2],ce=me[0],Me=me[1],_e=me[2],We=Zt-$t[0],Re=ve-$t[1],tn=he-$t[2],ke=We*We+Re*Re+tn*tn;ke>0&&(We*=ke=1/Math.sqrt(ke),Re*=ke,tn*=ke);var ln=Me*tn-_e*Re,hn=_e*We-ce*tn,nn=ce*Re-Me*We;return(ke=ln*ln+hn*hn+nn*nn)>0&&(ln*=ke=1/Math.sqrt(ke),hn*=ke,nn*=ke),R[0]=ln,R[1]=hn,R[2]=nn,R[3]=0,R[4]=Re*nn-tn*hn,R[5]=tn*ln-We*nn,R[6]=We*hn-Re*ln,R[7]=0,R[8]=We,R[9]=Re,R[10]=tn,R[11]=0,R[12]=Zt,R[13]=ve,R[14]=he,R[15]=1,R}function tr(R){return"mat4("+R[0]+", "+R[1]+", "+R[2]+", "+R[3]+", "+R[4]+", "+R[5]+", "+R[6]+", "+R[7]+", "+R[8]+", "+R[9]+", "+R[10]+", "+R[11]+", "+R[12]+", "+R[13]+", "+R[14]+", "+R[15]+")"}function or(R){return Math.hypot(R[0],R[1],R[2],R[3],R[4],R[5],R[6],R[7],R[8],R[9],R[10],R[11],R[12],R[13],R[14],R[15])}function nr(R,mt,$t){return R[0]=mt[0]+$t[0],R[1]=mt[1]+$t[1],R[2]=mt[2]+$t[2],R[3]=mt[3]+$t[3],R[4]=mt[4]+$t[4],R[5]=mt[5]+$t[5],R[6]=mt[6]+$t[6],R[7]=mt[7]+$t[7],R[8]=mt[8]+$t[8],R[9]=mt[9]+$t[9],R[10]=mt[10]+$t[10],R[11]=mt[11]+$t[11],R[12]=mt[12]+$t[12],R[13]=mt[13]+$t[13],R[14]=mt[14]+$t[14],R[15]=mt[15]+$t[15],R}function er(R,mt,$t){return R[0]=mt[0]-$t[0],R[1]=mt[1]-$t[1],R[2]=mt[2]-$t[2],R[3]=mt[3]-$t[3],R[4]=mt[4]-$t[4],R[5]=mt[5]-$t[5],R[6]=mt[6]-$t[6],R[7]=mt[7]-$t[7],R[8]=mt[8]-$t[8],R[9]=mt[9]-$t[9],R[10]=mt[10]-$t[10],R[11]=mt[11]-$t[11],R[12]=mt[12]-$t[12],R[13]=mt[13]-$t[13],R[14]=mt[14]-$t[14],R[15]=mt[15]-$t[15],R}function Sr(R,mt,$t){return R[0]=mt[0]*$t,R[1]=mt[1]*$t,R[2]=mt[2]*$t,R[3]=mt[3]*$t,R[4]=mt[4]*$t,R[5]=mt[5]*$t,R[6]=mt[6]*$t,R[7]=mt[7]*$t,R[8]=mt[8]*$t,R[9]=mt[9]*$t,R[10]=mt[10]*$t,R[11]=mt[11]*$t,R[12]=mt[12]*$t,R[13]=mt[13]*$t,R[14]=mt[14]*$t,R[15]=mt[15]*$t,R}function Vr(R,mt,$t,me){return R[0]=mt[0]+$t[0]*me,R[1]=mt[1]+$t[1]*me,R[2]=mt[2]+$t[2]*me,R[3]=mt[3]+$t[3]*me,R[4]=mt[4]+$t[4]*me,R[5]=mt[5]+$t[5]*me,R[6]=mt[6]+$t[6]*me,R[7]=mt[7]+$t[7]*me,R[8]=mt[8]+$t[8]*me,R[9]=mt[9]+$t[9]*me,R[10]=mt[10]+$t[10]*me,R[11]=mt[11]+$t[11]*me,R[12]=mt[12]+$t[12]*me,R[13]=mt[13]+$t[13]*me,R[14]=mt[14]+$t[14]*me,R[15]=mt[15]+$t[15]*me,R}function ti(R,mt){return R[0]===mt[0]&&R[1]===mt[1]&&R[2]===mt[2]&&R[3]===mt[3]&&R[4]===mt[4]&&R[5]===mt[5]&&R[6]===mt[6]&&R[7]===mt[7]&&R[8]===mt[8]&&R[9]===mt[9]&&R[10]===mt[10]&&R[11]===mt[11]&&R[12]===mt[12]&&R[13]===mt[13]&&R[14]===mt[14]&&R[15]===mt[15]}function hi(R,mt){var $t=R[0],me=R[1],Zt=R[2],ve=R[3],he=R[4],ce=R[5],Me=R[6],_e=R[7],We=R[8],Re=R[9],tn=R[10],ke=R[11],ln=R[12],hn=R[13],nn=R[14],dn=R[15],Sn=mt[0],Pe=mt[1],le=mt[2],Le=mt[3],Be=mt[4],en=mt[5],un=mt[6],ze=mt[7],fn=mt[8],mn=mt[9],Wn=mt[10],Tn=mt[11],Pn=mt[12],lr=mt[13],Hr=mt[14],Gr=mt[15];return Math.abs($t-Sn)<=l.b*Math.max(1,Math.abs($t),Math.abs(Sn))&&Math.abs(me-Pe)<=l.b*Math.max(1,Math.abs(me),Math.abs(Pe))&&Math.abs(Zt-le)<=l.b*Math.max(1,Math.abs(Zt),Math.abs(le))&&Math.abs(ve-Le)<=l.b*Math.max(1,Math.abs(ve),Math.abs(Le))&&Math.abs(he-Be)<=l.b*Math.max(1,Math.abs(he),Math.abs(Be))&&Math.abs(ce-en)<=l.b*Math.max(1,Math.abs(ce),Math.abs(en))&&Math.abs(Me-un)<=l.b*Math.max(1,Math.abs(Me),Math.abs(un))&&Math.abs(_e-ze)<=l.b*Math.max(1,Math.abs(_e),Math.abs(ze))&&Math.abs(We-fn)<=l.b*Math.max(1,Math.abs(We),Math.abs(fn))&&Math.abs(Re-mn)<=l.b*Math.max(1,Math.abs(Re),Math.abs(mn))&&Math.abs(tn-Wn)<=l.b*Math.max(1,Math.abs(tn),Math.abs(Wn))&&Math.abs(ke-Tn)<=l.b*Math.max(1,Math.abs(ke),Math.abs(Tn))&&Math.abs(ln-Pn)<=l.b*Math.max(1,Math.abs(ln),Math.abs(Pn))&&Math.abs(hn-lr)<=l.b*Math.max(1,Math.abs(hn),Math.abs(lr))&&Math.abs(nn-Hr)<=l.b*Math.max(1,Math.abs(nn),Math.abs(Hr))&&Math.abs(dn-Gr)<=l.b*Math.max(1,Math.abs(dn),Math.abs(Gr))}var Fi=et,to=er,si=e(40);function Ti(){var R=new l.a(4);return l.a!=Float32Array&&(R[0]=0,R[1]=0,R[2]=0,R[3]=0),R}function Ui(R){var mt=new l.a(4);return mt[0]=R[0],mt[1]=R[1],mt[2]=R[2],mt[3]=R[3],mt}function Li(R,mt,$t,me){var Zt=new l.a(4);return Zt[0]=R,Zt[1]=mt,Zt[2]=$t,Zt[3]=me,Zt}function Vi(R,mt){return R[0]=mt[0],R[1]=mt[1],R[2]=mt[2],R[3]=mt[3],R}function ro(R,mt,$t,me,Zt){return R[0]=mt,R[1]=$t,R[2]=me,R[3]=Zt,R}function jr(R,mt,$t){return R[0]=mt[0]+$t[0],R[1]=mt[1]+$t[1],R[2]=mt[2]+$t[2],R[3]=mt[3]+$t[3],R}function Ji(R,mt,$t){return R[0]=mt[0]-$t[0],R[1]=mt[1]-$t[1],R[2]=mt[2]-$t[2],R[3]=mt[3]-$t[3],R}function pr(R,mt,$t){return R[0]=mt[0]*$t[0],R[1]=mt[1]*$t[1],R[2]=mt[2]*$t[2],R[3]=mt[3]*$t[3],R}function Xr(R,mt,$t){return R[0]=mt[0]/$t[0],R[1]=mt[1]/$t[1],R[2]=mt[2]/$t[2],R[3]=mt[3]/$t[3],R}function Br(R,mt){return R[0]=Math.ceil(mt[0]),R[1]=Math.ceil(mt[1]),R[2]=Math.ceil(mt[2]),R[3]=Math.ceil(mt[3]),R}function Nr(R,mt){return R[0]=Math.floor(mt[0]),R[1]=Math.floor(mt[1]),R[2]=Math.floor(mt[2]),R[3]=Math.floor(mt[3]),R}function Yr(R,mt,$t){return R[0]=Math.min(mt[0],$t[0]),R[1]=Math.min(mt[1],$t[1]),R[2]=Math.min(mt[2],$t[2]),R[3]=Math.min(mt[3],$t[3]),R}function Kr(R,mt,$t){return R[0]=Math.max(mt[0],$t[0]),R[1]=Math.max(mt[1],$t[1]),R[2]=Math.max(mt[2],$t[2]),R[3]=Math.max(mt[3],$t[3]),R}function ni(R,mt){return R[0]=Math.round(mt[0]),R[1]=Math.round(mt[1]),R[2]=Math.round(mt[2]),R[3]=Math.round(mt[3]),R}function fi(R,mt,$t){return R[0]=mt[0]*$t,R[1]=mt[1]*$t,R[2]=mt[2]*$t,R[3]=mt[3]*$t,R}function $r(R,mt,$t,me){return R[0]=mt[0]+$t[0]*me,R[1]=mt[1]+$t[1]*me,R[2]=mt[2]+$t[2]*me,R[3]=mt[3]+$t[3]*me,R}function ci(R,mt){var $t=mt[0]-R[0],me=mt[1]-R[1],Zt=mt[2]-R[2],ve=mt[3]-R[3];return Math.hypot($t,me,Zt,ve)}function Qr(R,mt){var $t=mt[0]-R[0],me=mt[1]-R[1],Zt=mt[2]-R[2],ve=mt[3]-R[3];return $t*$t+me*me+Zt*Zt+ve*ve}function gi(R){var mt=R[0],$t=R[1],me=R[2],Zt=R[3];return Math.hypot(mt,$t,me,Zt)}function Oi(R){var mt=R[0],$t=R[1],me=R[2],Zt=R[3];return mt*mt+$t*$t+me*me+Zt*Zt}function bi(R,mt){return R[0]=-mt[0],R[1]=-mt[1],R[2]=-mt[2],R[3]=-mt[3],R}function _i(R,mt){return R[0]=1/mt[0],R[1]=1/mt[1],R[2]=1/mt[2],R[3]=1/mt[3],R}function Qi(R,mt){var $t=mt[0],me=mt[1],Zt=mt[2],ve=mt[3],he=$t*$t+me*me+Zt*Zt+ve*ve;return he>0&&(he=1/Math.sqrt(he)),R[0]=$t*he,R[1]=me*he,R[2]=Zt*he,R[3]=ve*he,R}function io(R,mt){return R[0]*mt[0]+R[1]*mt[1]+R[2]*mt[2]+R[3]*mt[3]}function Wi(R,mt,$t,me){var Zt=$t[0]*me[1]-$t[1]*me[0],ve=$t[0]*me[2]-$t[2]*me[0],he=$t[0]*me[3]-$t[3]*me[0],ce=$t[1]*me[2]-$t[2]*me[1],Me=$t[1]*me[3]-$t[3]*me[1],_e=$t[2]*me[3]-$t[3]*me[2],We=mt[0],Re=mt[1],tn=mt[2],ke=mt[3];return R[0]=Re*_e-tn*Me+ke*ce,R[1]=-We*_e+tn*he-ke*ve,R[2]=We*Me-Re*he+ke*Zt,R[3]=-We*ce+Re*ve-tn*Zt,R}function Zi(R,mt,$t,me){var Zt=mt[0],ve=mt[1],he=mt[2],ce=mt[3];return R[0]=Zt+me*($t[0]-Zt),R[1]=ve+me*($t[1]-ve),R[2]=he+me*($t[2]-he),R[3]=ce+me*($t[3]-ce),R}function Pi(R,mt){var $t,me,Zt,ve,he,ce;mt=mt||1;do he=($t=2*l.c()-1)*$t+(me=2*l.c()-1)*me;while(he>=1);do ce=(Zt=2*l.c()-1)*Zt+(ve=2*l.c()-1)*ve;while(ce>=1);var Me=Math.sqrt((1-he)/ce);return R[0]=mt*$t,R[1]=mt*me,R[2]=mt*Zt*Me,R[3]=mt*ve*Me,R}function no(R,mt,$t){var me=mt[0],Zt=mt[1],ve=mt[2],he=mt[3];return R[0]=$t[0]*me+$t[4]*Zt+$t[8]*ve+$t[12]*he,R[1]=$t[1]*me+$t[5]*Zt+$t[9]*ve+$t[13]*he,R[2]=$t[2]*me+$t[6]*Zt+$t[10]*ve+$t[14]*he,R[3]=$t[3]*me+$t[7]*Zt+$t[11]*ve+$t[15]*he,R}function Mo(R,mt,$t){var me=mt[0],Zt=mt[1],ve=mt[2],he=$t[0],ce=$t[1],Me=$t[2],_e=$t[3],We=_e*me+ce*ve-Me*Zt,Re=_e*Zt+Me*me-he*ve,tn=_e*ve+he*Zt-ce*me,ke=-he*me-ce*Zt-Me*ve;return R[0]=We*_e+ke*-he+Re*-Me-tn*-ce,R[1]=Re*_e+ke*-ce+tn*-he-We*-Me,R[2]=tn*_e+ke*-Me+We*-ce-Re*-he,R[3]=mt[3],R}function ao(R){return R[0]=0,R[1]=0,R[2]=0,R[3]=0,R}function uo(R){return"vec4("+R[0]+", "+R[1]+", "+R[2]+", "+R[3]+")"}function xo(R,mt){return R[0]===mt[0]&&R[1]===mt[1]&&R[2]===mt[2]&&R[3]===mt[3]}function oe(R,mt){var $t=R[0],me=R[1],Zt=R[2],ve=R[3],he=mt[0],ce=mt[1],Me=mt[2],_e=mt[3];return Math.abs($t-he)<=l.b*Math.max(1,Math.abs($t),Math.abs(he))&&Math.abs(me-ce)<=l.b*Math.max(1,Math.abs(me),Math.abs(ce))&&Math.abs(Zt-Me)<=l.b*Math.max(1,Math.abs(Zt),Math.abs(Me))&&Math.abs(ve-_e)<=l.b*Math.max(1,Math.abs(ve),Math.abs(_e))}var Kt,te=Ji,Oe=pr,Qe=Xr,On=ci,Vn=Qr,Hn=gi,$e=Oi,rn=(Kt=Ti(),function(R,mt,$t,me,Zt,ve){var he,ce;for(mt||(mt=4),$t||($t=0),ce=me?Math.min(me*mt+$t,R.length):R.length,he=$t;he<ce;he+=mt)Kt[0]=R[he],Kt[1]=R[he+1],Kt[2]=R[he+2],Kt[3]=R[he+3],Zt(Kt,Kt,ve),R[he]=Kt[0],R[he+1]=Kt[1],R[he+2]=Kt[2],R[he+3]=Kt[3];return R});function on(){var R=new l.a(4);return l.a!=Float32Array&&(R[0]=0,R[1]=0,R[2]=0),R[3]=1,R}function $n(R){return R[0]=0,R[1]=0,R[2]=0,R[3]=1,R}function vr(R,mt,$t){$t*=.5;var me=Math.sin($t);return R[0]=me*mt[0],R[1]=me*mt[1],R[2]=me*mt[2],R[3]=Math.cos($t),R}function ar(R,mt){var $t=2*Math.acos(mt[3]),me=Math.sin($t/2);return me>l.b?(R[0]=mt[0]/me,R[1]=mt[1]/me,R[2]=mt[2]/me):(R[0]=1,R[1]=0,R[2]=0),$t}function rr(R,mt){var $t=cn(R,mt);return Math.acos(2*$t*$t-1)}function Fr(R,mt,$t){var me=mt[0],Zt=mt[1],ve=mt[2],he=mt[3],ce=$t[0],Me=$t[1],_e=$t[2],We=$t[3];return R[0]=me*We+he*ce+Zt*_e-ve*Me,R[1]=Zt*We+he*Me+ve*ce-me*_e,R[2]=ve*We+he*_e+me*Me-Zt*ce,R[3]=he*We-me*ce-Zt*Me-ve*_e,R}function Ar(R,mt,$t){$t*=.5;var me=mt[0],Zt=mt[1],ve=mt[2],he=mt[3],ce=Math.sin($t),Me=Math.cos($t);return R[0]=me*Me+he*ce,R[1]=Zt*Me+ve*ce,R[2]=ve*Me-Zt*ce,R[3]=he*Me-me*ce,R}function wr(R,mt,$t){$t*=.5;var me=mt[0],Zt=mt[1],ve=mt[2],he=mt[3],ce=Math.sin($t),Me=Math.cos($t);return R[0]=me*Me-ve*ce,R[1]=Zt*Me+he*ce,R[2]=ve*Me+me*ce,R[3]=he*Me-Zt*ce,R}function xr(R,mt,$t){$t*=.5;var me=mt[0],Zt=mt[1],ve=mt[2],he=mt[3],ce=Math.sin($t),Me=Math.cos($t);return R[0]=me*Me+Zt*ce,R[1]=Zt*Me-me*ce,R[2]=ve*Me+he*ce,R[3]=he*Me-ve*ce,R}function Er(R,mt){var $t=mt[0],me=mt[1],Zt=mt[2];return R[0]=$t,R[1]=me,R[2]=Zt,R[3]=Math.sqrt(Math.abs(1-$t*$t-me*me-Zt*Zt)),R}function Ir(R,mt){var $t=mt[0],me=mt[1],Zt=mt[2],ve=mt[3],he=Math.sqrt($t*$t+me*me+Zt*Zt),ce=Math.exp(ve),Me=he>0?ce*Math.sin(he)/he:0;return R[0]=$t*Me,R[1]=me*Me,R[2]=Zt*Me,R[3]=ce*Math.cos(he),R}function Lr(R,mt){var $t=mt[0],me=mt[1],Zt=mt[2],ve=mt[3],he=Math.sqrt($t*$t+me*me+Zt*Zt),ce=he>0?Math.atan2(he,ve)/he:0;return R[0]=$t*ce,R[1]=me*ce,R[2]=Zt*ce,R[3]=.5*Math.log($t*$t+me*me+Zt*Zt+ve*ve),R}function Pr(R,mt,$t){return Lr(R,mt),Ee(R,R,$t),Ir(R,R),R}function Dr(R,mt,$t,me){var Zt,ve,he,ce,Me,_e=mt[0],We=mt[1],Re=mt[2],tn=mt[3],ke=$t[0],ln=$t[1],hn=$t[2],nn=$t[3];return(ve=_e*ke+We*ln+Re*hn+tn*nn)<0&&(ve=-ve,ke=-ke,ln=-ln,hn=-hn,nn=-nn),1-ve>l.b?(Zt=Math.acos(ve),he=Math.sin(Zt),ce=Math.sin((1-me)*Zt)/he,Me=Math.sin(me*Zt)/he):(ce=1-me,Me=me),R[0]=ce*_e+Me*ke,R[1]=ce*We+Me*ln,R[2]=ce*Re+Me*hn,R[3]=ce*tn+Me*nn,R}function ri(R){var mt=l.c(),$t=l.c(),me=l.c(),Zt=Math.sqrt(1-mt),ve=Math.sqrt(mt);return R[0]=Zt*Math.sin(2*Math.PI*$t),R[1]=Zt*Math.cos(2*Math.PI*$t),R[2]=ve*Math.sin(2*Math.PI*me),R[3]=ve*Math.cos(2*Math.PI*me),R}function vi(R,mt){var $t=mt[0],me=mt[1],Zt=mt[2],ve=mt[3],he=$t*$t+me*me+Zt*Zt+ve*ve,ce=he?1/he:0;return R[0]=-$t*ce,R[1]=-me*ce,R[2]=-Zt*ce,R[3]=ve*ce,R}function ii(R,mt){return R[0]=-mt[0],R[1]=-mt[1],R[2]=-mt[2],R[3]=mt[3],R}function Si(R,mt){var $t,me=mt[0]+mt[4]+mt[8];if(me>0)$t=Math.sqrt(me+1),R[3]=.5*$t,$t=.5/$t,R[0]=(mt[5]-mt[7])*$t,R[1]=(mt[6]-mt[2])*$t,R[2]=(mt[1]-mt[3])*$t;else{var Zt=0;mt[4]>mt[0]&&(Zt=1),mt[8]>mt[3*Zt+Zt]&&(Zt=2);var ve=(Zt+1)%3,he=(Zt+2)%3;$t=Math.sqrt(mt[3*Zt+Zt]-mt[3*ve+ve]-mt[3*he+he]+1),R[Zt]=.5*$t,$t=.5/$t,R[3]=(mt[3*ve+he]-mt[3*he+ve])*$t,R[ve]=(mt[3*ve+Zt]+mt[3*Zt+ve])*$t,R[he]=(mt[3*he+Zt]+mt[3*Zt+he])*$t}return R}function zi(R,mt,$t,me){var Zt=.5*Math.PI/180;mt*=Zt,$t*=Zt,me*=Zt;var ve=Math.sin(mt),he=Math.cos(mt),ce=Math.sin($t),Me=Math.cos($t),_e=Math.sin(me),We=Math.cos(me);return R[0]=ve*Me*We-he*ce*_e,R[1]=he*ce*We+ve*Me*_e,R[2]=he*Me*_e-ve*ce*We,R[3]=he*Me*We+ve*ce*_e,R}function Xi(R){return"quat("+R[0]+", "+R[1]+", "+R[2]+", "+R[3]+")"}var Bi,Di,pe,G,B,$,ut=Ui,Bt=Li,Jt=Vi,ie=ro,se=jr,Ce=Fr,Ee=fi,cn=io,xn=Zi,_t=gi,Yt=_t,Se=Oi,Wt=Se,ue=Qi,vn=xo,kn=oe,_n=(Bi=si.create(),Di=si.fromValues(1,0,0),pe=si.fromValues(0,1,0),function(R,mt,$t){var me=si.dot(mt,$t);return me<-.999999?(si.cross(Bi,Di,mt),si.len(Bi)<1e-6&&si.cross(Bi,pe,mt),si.normalize(Bi,Bi),vr(R,Bi,Math.PI),R):me>.999999?(R[0]=0,R[1]=0,R[2]=0,R[3]=1,R):(si.cross(Bi,mt,$t),R[0]=Bi[0],R[1]=Bi[1],R[2]=Bi[2],R[3]=1+me,ue(R,R))}),Un=(G=on(),B=on(),function(R,mt,$t,me,Zt,ve){return Dr(G,mt,Zt,ve),Dr(B,$t,me,ve),Dr(R,G,B,2*ve*(1-ve)),R}),Ze=($=E(),function(R,mt,$t,me){return $[0]=$t[0],$[3]=$t[1],$[6]=$t[2],$[1]=me[0],$[4]=me[1],$[7]=me[2],$[2]=-mt[0],$[5]=-mt[1],$[8]=-mt[2],ue(R,Si(R,$))}),Te=e(80)},function(a,A){a.exports=function(e,r,p){return r in e?Object.defineProperty(e,r,{value:p,enumerable:!0,configurable:!0,writable:!0}):e[r]=p,e}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.METADATA_KEY=void 0;var r=e(32);A.METADATA_KEY=r;var p=e(446);Object.defineProperty(A,"Container",{enumerable:!0,get:function(){return p.Container}});var m=e(55);Object.defineProperty(A,"BindingScopeEnum",{enumerable:!0,get:function(){return m.BindingScopeEnum}}),Object.defineProperty(A,"BindingTypeEnum",{enumerable:!0,get:function(){return m.BindingTypeEnum}}),Object.defineProperty(A,"TargetTypeEnum",{enumerable:!0,get:function(){return m.TargetTypeEnum}});var O=e(462);Object.defineProperty(A,"AsyncContainerModule",{enumerable:!0,get:function(){return O.AsyncContainerModule}}),Object.defineProperty(A,"ContainerModule",{enumerable:!0,get:function(){return O.ContainerModule}});var l=e(463);Object.defineProperty(A,"injectable",{enumerable:!0,get:function(){return l.injectable}});var E=e(464);Object.defineProperty(A,"tagged",{enumerable:!0,get:function(){return E.tagged}});var j=e(465);Object.defineProperty(A,"named",{enumerable:!0,get:function(){return j.named}});var y=e(222);Object.defineProperty(A,"inject",{enumerable:!0,get:function(){return y.inject}}),Object.defineProperty(A,"LazyServiceIdentifer",{enumerable:!0,get:function(){return y.LazyServiceIdentifer}});var n=e(466);Object.defineProperty(A,"optional",{enumerable:!0,get:function(){return n.optional}});var s=e(467);Object.defineProperty(A,"unmanaged",{enumerable:!0,get:function(){return s.unmanaged}});var d=e(468);Object.defineProperty(A,"multiInject",{enumerable:!0,get:function(){return d.multiInject}});var M=e(469);Object.defineProperty(A,"targetName",{enumerable:!0,get:function(){return M.targetName}});var S=e(470);Object.defineProperty(A,"postConstruct",{enumerable:!0,get:function(){return S.postConstruct}});var T=e(220);Object.defineProperty(A,"MetadataReader",{enumerable:!0,get:function(){return T.MetadataReader}});var v=e(67);Object.defineProperty(A,"id",{enumerable:!0,get:function(){return v.id}});var x=e(59);Object.defineProperty(A,"decorate",{enumerable:!0,get:function(){return x.decorate}});var C=e(225);Object.defineProperty(A,"traverseAncerstors",{enumerable:!0,get:function(){return C.traverseAncerstors}}),Object.defineProperty(A,"taggedConstraint",{enumerable:!0,get:function(){return C.taggedConstraint}}),Object.defineProperty(A,"namedConstraint",{enumerable:!0,get:function(){return C.namedConstraint}}),Object.defineProperty(A,"typeConstraint",{enumerable:!0,get:function(){return C.typeConstraint}});var N=e(88);Object.defineProperty(A,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return N.getServiceIdentifierAsString}});var X=e(471);Object.defineProperty(A,"multiBindToService",{enumerable:!0,get:function(){return X.multiBindToService}})},function(a,A,e){"use strict";e.d(A,"i",function(){return Ct}),e.d(A,"h",function(){return Er}),e.d(A,"d",function(){return Ir}),e.d(A,"m",function(){return Pr}),e.d(A,"l",function(){return Nr}),e.d(A,"g",function(){return Br}),e.d(A,"f",function(){return Yr}),e.d(A,"j",function(){return Qe}),e.d(A,"k",function(){return Lr}),e.d(A,"r",function(){return Si}),e.d(A,"p",function(){return Xi}),e.d(A,"b",function(){return Vn}),e.d(A,"n",function(){return ri}),e.d(A,"q",function(){return zi}),e.d(A,"o",function(){return Bi}),e.d(A,"c",function(){return vi}),e.d(A,"a",function(){return ii}),e.d(A,"e",function(){return Di});var r={};e.r(r),e.d(r,"compare",function(){return T}),e.d(r,"getLineIntersect",function(){return x}),e.d(r,"getRectIntersectByPoint",function(){return C}),e.d(r,"getCircleIntersectByPoint",function(){return N}),e.d(r,"getEllipseIntersectByPoint",function(){return X}),e.d(r,"applyMatrix",function(){return tt}),e.d(r,"invertMatrix",function(){return it}),e.d(r,"getCircleCenterByPoints",function(){return pt}),e.d(r,"distance",function(){return ft}),e.d(r,"scaleMatrix",function(){return Ot}),e.d(r,"floydWarshall",function(){return wt}),e.d(r,"getAdjMatrix",function(){return xt}),e.d(r,"translate",function(){return lt}),e.d(r,"move",function(){return Vt}),e.d(r,"scale",function(){return Lt}),e.d(r,"rotate",function(){return Et}),e.d(r,"getDegree",function(){return J}),e.d(r,"isPointInPolygon",function(){return vt}),e.d(r,"intersectBBox",function(){return bt}),e.d(r,"isPolygonsIntersect",function(){return At}),e.d(r,"Line",function(){return q}),e.d(r,"getBBoxBoundLine",function(){return ct}),e.d(r,"itemIntersectByLine",function(){return _}),e.d(r,"fractionToLine",function(){return P}),e.d(r,"getPointsCenter",function(){return Y}),e.d(r,"squareDist",function(){return k}),e.d(r,"pointLineSquareDist",function(){return h}),e.d(r,"isPointsOverlap",function(){return g}),e.d(r,"pointRectSquareDist",function(){return F});var p={};e.r(p),e.d(p,"uniqueId",function(){return Pt}),e.d(p,"formatPadding",function(){return Ft}),e.d(p,"cloneEvent",function(){return Tt}),e.d(p,"isViewportChanged",function(){return zt}),e.d(p,"isNaN",function(){return Xt}),e.d(p,"calculationItemsBBox",function(){return re}),e.d(p,"processParallelEdges",function(){return de});var m={};e.r(m),e.d(m,"getBBox",function(){return An}),e.d(m,"getLoopCfgs",function(){return Rn}),e.d(m,"getLabelPosition",function(){return Mn}),e.d(m,"traverseTree",function(){return Gn}),e.d(m,"traverseTreeUp",function(){return Xn}),e.d(m,"getLetterWidth",function(){return tr}),e.d(m,"getTextSize",function(){return or}),e.d(m,"plainCombosToTrees",function(){return nr}),e.d(m,"reconstructTree",function(){return er}),e.d(m,"getComboBBox",function(){return Sr}),e.d(m,"shouldRefreshEdge",function(){return Vr}),e.d(m,"cloneBesidesImg",function(){return ti});var O={};e.r(O),e.d(O,"getSpline",function(){return Qr}),e.d(O,"getControlPoint",function(){return gi}),e.d(O,"pointsToPolygon",function(){return Oi}),e.d(O,"pathToPoints",function(){return bi}),e.d(O,"getClosedSpline",function(){return _i}),e.d(O,"roundedHull",function(){return Zi}),e.d(O,"paddedHull",function(){return Pi});var l=e(0),E={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(G){return Object.assign(this,G),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(G){var B=this,$=this.events;this.graph=G,this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||G.get("canvas").set("draggable",!0),Object(l.f)($,function(ut,Bt){G.on(Bt,ut)}),document.addEventListener("visibilitychange",function(){B.keydown=!1})},unbind:function(G){var B=this.events;this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||G.get("canvas").set("draggable",!1),Object(l.f)(B,function($,ut){G.off(ut,$)})},get:function(G){return this[G]},set:function(G,B){return this[G]=B,this}},j=function(){function pe(){}return pe.registerBehavior=function(G,B){if(!B)throw new Error("please specify handler for this behavior: "+G);var $=Object(l.c)(E);Object.assign($,B);var ut=function(Jt){var ie=this;Object.assign(this,this.getDefaultCfg(),Jt);var se=this.getEvents();this.events=null;var Ce={};se&&(Object(l.f)(se,function(Ee,cn){Ce[cn]=Object(l.J)(ie,Ee)}),this.events=Ce)};ut.prototype=$,pe.types[G]=ut},pe.hasBehavior=function(G){return!!pe.types[G]},pe.getBehavior=function(G){return pe.types[G]},pe.types={},pe}(),y=j,n=e(1),s=e(79),d=e(10),M=e(33),S=d.a.transform,T=function(G){return function(B,$){return B[G]-$[G]}},v=function(G,B,$){return G>=B&&G<=$},x=function(G,B,$,ut){var Bt=$.x-G.x,Jt=$.y-G.y,ie=B.x-G.x,se=B.y-G.y,Ce=ut.x-$.x,Ee=ut.y-$.y,cn=ie*Ee-se*Ce,xn=1/cn,_t=null;if(cn*cn>1e-4*(ie*ie+se*se)*(Ce*Ce+Ee*Ee)){var Yt=(Bt*Ee-Jt*Ce)*xn,Se=(Bt*se-Jt*ie)*xn;v(Yt,0,1)&&v(Se,0,1)&&(_t={x:G.x+Yt*ie,y:G.y+Yt*se})}return _t},C=function(G,B){var $=G.x,ut=G.y,Bt=G.width,Jt=G.height,ie=[],se={x:$+Bt/2,y:ut+Jt/2};ie.push({x:$,y:ut}),ie.push({x:$+Bt,y:ut}),ie.push({x:$+Bt,y:ut+Jt}),ie.push({x:$,y:ut+Jt}),ie.push({x:$,y:ut});for(var Ce=null,Ee=1;Ee<ie.length&&!(Ce=x(ie[Ee-1],ie[Ee],se,B));Ee++);return Ce},N=function(G,B){var $=G.x,ut=G.y,Bt=G.r,Jt=B.x-$,ie=B.y-ut;if(Math.sqrt(Jt*Jt+ie*ie)<Bt)return null;var se=Math.sign(Jt),Ce=Math.sign(ie),Ee=Math.atan(ie/Jt);return{x:$+Math.abs(Bt*Math.cos(Ee))*se,y:ut+Math.abs(Bt*Math.sin(Ee))*Ce}},X=function(G,B){var $=G.rx,ut=G.ry,Bt=G.x,Jt=G.y,ie=B.x-Bt,se=B.y-Jt,Ce=Math.atan2(se/ut,ie/$);return Ce<0&&(Ce+=2*Math.PI),{x:Bt+$*Math.cos(Ce),y:Jt+ut*Math.sin(Ce)}},tt=function(G,B,$){$===void 0&&($=1);var ut=[G.x,G.y,$];return B&&!isNaN(B[0])||(B=[1,0,0,0,1,0,0,0,1]),d.d.transformMat3(ut,ut,B),{x:ut[0],y:ut[1]}},it=function(G,B,$){$===void 0&&($=1),B&&!isNaN(B[0])||(B=[1,0,0,0,1,0,0,0,1]);var ut=d.b.invert([1,0,0,0,1,0,0,0,1],B);ut||(ut=[1,0,0,0,1,0,0,0,1]);var Bt=[G.x,G.y,$];return d.d.transformMat3(Bt,Bt,ut),{x:Bt[0],y:Bt[1]}},pt=function(G,B,$){var ut=G.x-B.x,Bt=G.y-B.y,Jt=G.x-$.x,ie=G.y-$.y,se=(G.x*G.x-B.x*B.x-B.y*B.y+G.y*G.y)/2,Ce=(G.x*G.x-$.x*$.x-$.y*$.y+G.y*G.y)/2,Ee=Bt*Jt-ut*ie;return{x:-(ie*se-Bt*Ce)/Ee,y:-(ut*Ce-Jt*se)/Ee}},ft=function(G,B){var $=G.x-B.x,ut=G.y-B.y;return Math.sqrt($*$+ut*ut)},Ot=function(G,B){var $=[];return G.forEach(function(ut){var Bt=[];ut.forEach(function(Jt){Bt.push(Jt*B)}),$.push(Bt)}),$},wt=function(G){for(var B=[],$=G.length,ut=0;ut<$;ut+=1){B[ut]=[];for(var Bt=0;Bt<$;Bt+=1)ut===Bt?B[ut][Bt]=0:G[ut][Bt]!==0&&G[ut][Bt]?B[ut][Bt]=G[ut][Bt]:B[ut][Bt]=1/0}for(var Jt=0;Jt<$;Jt+=1)for(ut=0;ut<$;ut+=1)for(Bt=0;Bt<$;Bt+=1)B[ut][Bt]>B[ut][Jt]+B[Jt][Bt]&&(B[ut][Bt]=B[ut][Jt]+B[Jt][Bt]);return B},xt=function(G,B){var $=G.nodes,ut=G.edges,Bt=[],Jt={};if(!$)throw new Error("invalid nodes data!");return $&&$.forEach(function(ie,se){Jt[ie.id]=se,Bt.push([])}),ut&&ut.forEach(function(ie){var se=ie.source,Ce=ie.target,Ee=Jt[se],cn=Jt[Ce];Bt[Ee][cn]=1,B||(Bt[cn][Ee]=1)}),Bt},lt=function(G,B){G.translate(B.x,B.y)},Vt=function(G,B){var $=G.getMatrix();$||($=[1,0,0,0,1,0,0,0,1]);var ut=G.getCanvasBBox(),Bt=B.x-ut.minX,Jt=B.y-ut.minY,ie=S($,[["t",Bt,Jt]]);G.setMatrix(ie)},Lt=function(G,B){var $=G.getMatrix();$||($=[1,0,0,0,1,0,0,0,1]);var ut=B;Object(l.m)(B)||(ut=[B,B]),Object(l.m)(B)&&B.length===1&&(ut=[B[0],B[0]]),$=S($,[["s",ut[0],ut[1]]]),G.setMatrix($)},Et=function(G,B){var $=G.getMatrix();$||($=[1,0,0,0,1,0,0,0,1]),$=S($,[["r",B]]),G.setMatrix($)},J=function(G,B,$){for(var ut=[],Bt=0;Bt<G;Bt++)ut[Bt]=0;return $.forEach(function(Jt){Jt.source&&(ut[B[Jt.source]]+=1),Jt.target&&(ut[B[Jt.target]]+=1)}),ut};function ht(pe,G,B){return(B[0]-pe[0])*(G[1]-pe[1])==(G[0]-pe[0])*(B[1]-pe[1])&&Math.min(pe[0],G[0])<=B[0]&&B[0]<=Math.max(pe[0],G[0])&&Math.min(pe[1],G[1])<=B[1]&&B[1]<=Math.max(pe[1],G[1])}var vt=function(G,B,$){var ut=!1,Bt=G.length;function Jt(Ee){return Math.abs(Ee)<1e-6?0:Ee<0?-1:1}if(Bt<=2)return!1;for(var ie=0;ie<Bt;ie++){var se=G[ie],Ce=G[(ie+1)%Bt];if(ht(se,Ce,[B,$]))return!0;Jt(se[1]-$)>0!=Jt(Ce[1]-$)>0&&Jt(B-($-se[1])*(se[0]-Ce[0])/(se[1]-Ce[1])-se[0])<0&&(ut=!ut)}return ut},bt=function(G,B){return!(B.minX>G.maxX||B.maxX<G.minX||B.minY>G.maxY||B.maxY<G.minY)},At=function(G,B){var $=function(xn){var _t=xn.map(function(Se){return Se[0]}),Yt=xn.map(function(Se){return Se[1]});return{minX:Math.min.apply(null,_t),maxX:Math.max.apply(null,_t),minY:Math.min.apply(null,Yt),maxY:Math.max.apply(null,Yt)}},ut=function(xn){for(var _t=[],Yt=xn.length,Se=0;Se<Yt-1;Se++){var Wt=xn[Se],ue=xn[Se+1];_t.push({from:{x:Wt[0],y:Wt[1]},to:{x:ue[0],y:ue[1]}})}if(_t.length>1){var vn=xn[0],kn=xn[Yt-1];_t.push({from:{x:kn[0],y:kn[1]},to:{x:vn[0],y:vn[1]}})}return _t};if(G.length<2||B.length<2)return!1;var Bt=$(G),Jt=$(B);if(!bt(Bt,Jt))return!1;var ie=!1;if(Object(l.f)(B,function(cn){if(vt(G,cn[0],cn[1]))return ie=!0,!1}),ie||(Object(l.f)(G,function(cn){if(vt(B,cn[0],cn[1]))return ie=!0,!1}),ie))return!0;var se=ut(G),Ce=ut(B),Ee=!1;return Object(l.f)(Ce,function(cn){if(function(xn,_t){var Yt=!1;return Object(l.f)(xn,function(Se){if(x(Se.from,Se.to,_t.from,_t.to))return Yt=!0,!1}),Yt}(se,cn))return Ee=!0,!1}),Ee},q=function(){function pe(G,B,$,ut){this.x1=G,this.y1=B,this.x2=$,this.y2=ut}return pe.prototype.getBBox=function(){var G=Math.min(this.x1,this.x2),B=Math.min(this.y1,this.y2),$=Math.max(this.x1,this.x2),ut=Math.max(this.y1,this.y2);return{x:G,y:B,minX:G,minY:B,maxX:$,maxY:ut,width:$-G,height:ut-B}},pe}(),ct=function(G,B){return{top:[G.minX,G.minY,G.maxX,G.minY],left:[G.minX,G.minY,G.minX,G.maxY],bottom:[G.minX,G.maxY,G.maxX,G.maxY],right:[G.maxX,G.minY,G.maxX,G.maxY]}[B]},ot=function(G,B){var $=(B.x2-B.x1)*(G.y1-B.y1)-(B.y2-B.y1)*(G.x1-B.x1),ut=(G.x2-G.x1)*(G.y1-B.y1)-(G.y2-G.y1)*(G.x1-B.x1),Bt=(B.y2-B.y1)*(G.x2-G.x1)-(B.x2-B.x1)*(G.y2-G.y1);if(Bt){var Jt=$/Bt,ie=ut/Bt;if(Jt>=0&&Jt<=1&&ie>=0&&ie<=1)return Jt}return Number.POSITIVE_INFINITY},_=function(G,B){for(var $=["top","left","bottom","right"],ut=G.getBBox(),Bt=0,Jt=[],ie=0;ie<4;ie++){var se=ct(ut,$[ie]),Ce=se[0],Ee=se[1],cn=se[2],xn=se[3];Jt[ie]=x({x:B.x1,y:B.y1},{x:B.x2,y:B.y2},{x:Ce,y:Ee},{x:cn,y:xn}),Jt[ie]&&(Bt+=1)}return[Jt,Bt]},P=function(G,B){for(var $=["top","left","bottom","right"],ut=G.getBBox(),Bt=Number.POSITIVE_INFINITY,Jt=0,ie=0;ie<4;ie++){var se=ct(ut,$[ie]),Ce=se[0],Ee=se[1],cn=se[2],xn=se[3],_t=ot(B,new q(Ce,Ee,cn,xn));(_t=Math.abs(_t-.5))>=0&&_t<=1&&(Jt+=1,Bt=_t<Bt?_t:Bt)}return Jt===0?-1:Bt},Y=function(G){var B=0,$=0;if(G.length>0){for(var ut=0,Bt=G;ut<Bt.length;ut++){var Jt=Bt[ut];B+=Jt.x,$+=Jt.y}B/=G.length,$/=G.length}return{x:B,y:$}},k=function(G,B){return Math.pow(G.x-B.x,2)+Math.pow(G.y-B.y,2)},h=function(G,B){var $,ut=B.x1,Bt=B.y1,Jt=B.x2-ut,ie=B.y2-Bt,se=G.x-ut,Ce=G.y-Bt,Ee=se*Jt+Ce*ie;$=Ee<=0||(Ee=(se=Jt-se)*Jt+(Ce=ie-Ce)*ie)<=0?0:Ee*Ee/(Jt*Jt+ie*ie);var cn=se*se+Ce*Ce-$;return cn<0&&(cn=0),cn},g=function(G,B,$){return $===void 0&&($=.001),Math.pow(G.x-B.x,2)+Math.pow(G.y-B.y,2)<Math.pow($,2)},F=function(G,B){var $=G.x<B.x,ut=G.x>B.x+B.width,Bt=G.y>B.y+B.height,Jt=G.y<B.y;if(!($||ut||Bt||Jt))return 0;if(Bt&&!$&&!ut)return Math.pow(B.y+B.height-G.y,2);if(Jt&&!$&&!ut)return Math.pow(G.y-B.y,2);if($&&!Bt&&!Jt)return Math.pow(B.x-G.x,2);if(ut&&!Bt&&!Jt)return Math.pow(B.x+B.width-G.x,2);var ie=Math.min(Math.abs(B.x-G.x),Math.abs(B.x+B.width-G.x)),se=Math.min(Math.abs(B.y-G.y),Math.abs(B.y+B.height-G.y));return ie*ie+se*se},V="rgb(95, 149, 255)",H="rgb(253, 253, 253)",et="rgb(247, 250, 255)",nt="rgb(224, 224, 224)",St="rgb(224, 224, 224)",dt={version:"0.0.9",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:V,fill:"rgb(239, 244, 255)"},size:20,color:V,linkPoints:{size:8,lineWidth:1,fill:et,stroke:V}},nodeStateStyles:{active:{fill:et,stroke:V,lineWidth:2,shadowColor:V,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:V,lineWidth:4,shadowColor:V,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:"#4572d9",lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:"rgb(247, 250, 255)",stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:"rgb(250, 250, 250)",stroke:"rgb(224, 224, 224)",lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:nt,lineAppendWidth:2},color:nt},edgeStateStyles:{active:{stroke:V,lineWidth:1},selected:{stroke:V,lineWidth:2,shadowColor:V,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:V,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(234, 234, 234)",lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:H,lineWidth:1,stroke:St,r:5,width:20,height:10},size:[20,5],color:St,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:V,lineWidth:1,fill:"rgb(247, 250, 255)"},selected:{stroke:V,lineWidth:2,fill:H,shadowColor:V,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:"#4572d9",lineWidth:2,fill:H,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(224, 224, 224)",fill:H,lineWidth:1},disable:{stroke:"rgb(234, 234, 234)",fill:"rgb(250, 250, 250)",lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]}},gt=function(){function pe(G){this.graph=G,this.destroyed=!1,this.modes=G.get("modes")||{default:[]},this.formatModes(),this.mode=G.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return pe.prototype.formatModes=function(){var G=this.modes;Object(l.f)(G,function(B){Object(l.f)(B,function($,ut){Object(l.x)($)&&(B[ut]={type:$})})})},pe.prototype.setBehaviors=function(G){var B,$=this.graph,ut=this.modes[G],Bt=[];Object(l.f)(ut||[],function(Jt){var ie=j.getBehavior(Jt.type||Jt);ie&&(B=new ie(Jt))&&(B.bind($),Bt.push(B))}),this.currentBehaves=Bt},pe.mergeBehaviors=function(G,B){return Object(l.f)(B,function($){G.indexOf($)<0&&(Object(l.x)($)&&($={type:$}),G.push($))}),G},pe.filterBehaviors=function(G,B){var $=[];return G.forEach(function(ut){var Bt="";Bt=Object(l.x)(ut)?ut:ut.type,B.indexOf(Bt)<0&&$.push(ut)}),$},pe.prototype.setMode=function(G){var B=this.modes,$=this.graph,ut=G;B[ut]&&($.emit("beforemodechange",{mode:G}),Object(l.f)(this.currentBehaves,function(Bt){Bt.delegate&&Bt.delegate.remove(),Bt.unbind($)}),this.setBehaviors(ut),$.emit("aftermodechange",{mode:G}),this.mode=G)},pe.prototype.getMode=function(){return this.mode},pe.prototype.manipulateBehaviors=function(G,B,$){var ut,Bt=this;if(ut=Object(l.m)(G)?G:[G],Object(l.m)(B))return Object(l.f)(B,function(ie){Bt.modes[ie]?Bt.modes[ie]=$?pe.mergeBehaviors(Bt.modes[ie]||[],ut):pe.filterBehaviors(Bt.modes[ie]||[],ut):$&&(Bt.modes[ie]=ut)}),this;var Jt=B;return B||(Jt=this.mode),this.modes[Jt]||$&&(this.modes[Jt]=ut),this.modes[Jt]=$?pe.mergeBehaviors(this.modes[Jt]||[],ut):pe.filterBehaviors(this.modes[Jt]||[],ut),this.setMode(this.mode),this},pe.prototype.updateBehavior=function(G,B,$){Object(l.x)(G)&&(G={type:G});var ut=[];if($&&$!==this.mode&&$!=="default"){if(!(ut=this.modes[$])||!ut.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;var Bt=ut.length;for(ie=0;ie<Bt;ie++){if((se=ut[ie]).type===G.type||se===G.type)return se===G.type&&(se={type:se}),Object.assign(se,B),ut[ie]=se,this;ie===Bt-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(!(ut=this.currentBehaves)||!ut.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var Jt=ut.length,ie=0;ie<Jt;ie++){var se;if((se=ut[ie]).type===G.type)return se.updateCfg(B),this;ie===Jt-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},pe.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},pe}(),yt=e(14),Ct=function(pe){function G(B,$){var ut=pe.call(this,B,$)||this;return ut.item=$.item,ut.canvasX=$.canvasX,ut.canvasY=$.canvasY,ut.wheelDelta=$.wheelDelta,ut.detail=$.detail,ut}return Object(n.b)(G,pe),G}(e(18).Event),Pt=function(G){return G+"-"+Math.random()+Date.now()},Ft=function(G){var B=0,$=0,ut=0,Bt=0;return Object(l.t)(G)?B=$=ut=Bt=G:Object(l.x)(G)?B=$=ut=Bt=parseInt(G,10):Object(l.m)(G)&&(B=G[0],ut=Object(l.s)(G[1])?G[0]:G[1],Bt=Object(l.s)(G[2])?G[0]:G[2],$=Object(l.s)(G[3])?ut:G[3]),[B,ut,Bt,$]},Tt=function(G){var B=new Ct(G.type,G);return B.clientX=G.clientX,B.clientY=G.clientY,B.x=G.x,B.y=G.y,B.target=G.target,B.currentTarget=G.currentTarget,B.bubbles=!0,B.item=G.item,B},zt=function(G){if(!G)return!1;for(var B=[1,0,0,0,1,0,0,0,1],$=0;$<9;$++)if(G[$]!==B[$])return!0;return!1},Xt=function(G){return Number.isNaN(Number(G))},re=function(G){for(var B=1/0,$=-1/0,ut=1/0,Bt=-1/0,Jt=0;Jt<G.length;Jt++){var ie=G[Jt].getBBox(),se=ie.minX,Ce=ie.minY,Ee=ie.maxX,cn=ie.maxY;se<B&&(B=se),Ce<ut&&(ut=Ce),Ee>$&&($=Ee),cn>Bt&&(Bt=cn)}return{x:Math.floor(B),y:Math.floor(ut),width:Math.ceil($)-Math.floor(B),height:Math.ceil(Bt)-Math.floor(ut),minX:B,minY:ut,maxX:$,maxY:Bt}},de=function(G,B,$,ut,Bt){B===void 0&&(B=15),$===void 0&&($="quadratic");for(var Jt=G.length,ie=2*B,se=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],Ce={},Ee=[],cn={},xn=0;xn<Jt;xn++){var _t=G[xn],Yt=_t.source,Se=_t.target,Wt=Yt+"-"+Se;if(!Ee[xn]){Ce[Wt]||(Ce[Wt]=[]),Ee[xn]=!0,Ce[Wt].push(_t);for(var ue=0;ue<Jt;ue++)if(xn!==ue){var vn=G[ue],kn=vn.source,_n=vn.target;Ee[ue]||(Yt===_n&&Se===kn?(Ce[Wt].push(vn),Ee[ue]=!0,cn[kn+"|"+_n+"|"+(Ce[Wt].length-1)]=!0):Yt===kn&&Se===_n&&(Ce[Wt].push(vn),Ee[ue]=!0))}}}for(var Un in Ce)for(var Ze=Ce[Un],Te=Ze.length,R=0;R<Te;R++){var mt=Ze[R];if(mt.source!==mt.target)if(Te===1&&ut&&mt.source!==mt.target)mt.type=ut;else{mt.type=$;var $t=(R%2==0?1:-1)*(cn[mt.source+"|"+mt.target+"|"+R]?-1:1);mt.curveOffset=Te%2==1?$t*Math.ceil(R/2)*ie:$t*(Math.floor(R/2)*ie+B)}else Bt&&(mt.type=Bt),mt.loopCfg={position:se[R%8],dist:20*Math.floor(R/8)+50}}return G},ye=function(){function pe(G){this.destroyed=!1,this.graph=G,this.destroyed=!1}return pe.prototype.getViewCenter=function(){var G=this.getFormatPadding(),B=this.graph,$=this.graph.get("width"),ut=B.get("height");return{x:($-G[1]-G[3])/2+G[3],y:(ut-G[0]-G[2])/2+G[0]}},pe.prototype.fitCenter=function(){var G=this.graph,B=G.get("group");B.resetMatrix();var $=B.getCanvasBBox();if($.width!==0&&$.height!==0){var ut=this.getViewCenter(),Bt=$.x+$.width/2,Jt=$.y+$.height/2;G.translate(ut.x-Bt,ut.y-Jt)}},pe.prototype.fitView=function(){var G=this.graph,B=this.getFormatPadding(),$=G.get("width"),ut=G.get("height"),Bt=G.get("group");Bt.resetMatrix();var Jt=Bt.getCanvasBBox();if(Jt.width!==0&&Jt.height!==0){var ie=this.getViewCenter(),se=Jt.x+Jt.width/2,Ce=Jt.y+Jt.height/2;G.translate(ie.x-se,ie.y-Ce);var Ee=($-B[1]-B[3])/Jt.width,cn=(ut-B[0]-B[2])/Jt.height,xn=Ee;Ee>cn&&(xn=cn),G.zoom(xn,ie)}},pe.prototype.getFormatPadding=function(){var G=this.graph.get("fitViewPadding");return Ft(G)},pe.prototype.focusPoint=function(G,B,$){var ut=this,Bt=this.getViewCenter(),Jt=this.getPointByCanvas(Bt.x,Bt.y),ie=this.graph.get("group").getMatrix();if(ie||(ie=[1,0,0,0,1,0,0,0,1]),B){var se=(Jt.x-G.x)*ie[0],Ce=(Jt.y-G.y)*ie[4],Ee=0,cn=0,xn=0,_t=0;this.graph.get("canvas").animate(function(Yt){xn=se*Yt,_t=Ce*Yt,ut.graph.translate(xn-Ee,_t-cn),Ee=xn,cn=_t},Object(n.a)({},$))}else this.graph.translate((Jt.x-G.x)*ie[0],(Jt.y-G.y)*ie[4])},pe.prototype.getPointByCanvas=function(G,B){var $=this.graph.get("group").getMatrix();return $||($=[1,0,0,0,1,0,0,0,1]),it({x:G,y:B},$)},pe.prototype.getPointByClient=function(G,B){var $=this.graph.get("canvas").getPointByClient(G,B);return this.getPointByCanvas($.x,$.y)},pe.prototype.getClientByPoint=function(G,B){var $=this.graph.get("canvas"),ut=this.getCanvasByPoint(G,B),Bt=$.getClientByPoint(ut.x,ut.y);return{x:Bt.x,y:Bt.y}},pe.prototype.getCanvasByPoint=function(G,B){var $=this.graph.get("group").getMatrix();return $||($=[1,0,0,0,1,0,0,0,1]),tt({x:G,y:B},$)},pe.prototype.focus=function(G,B,$){Object(l.x)(G)&&(G=this.graph.findById(G));var ut=G.get("group").getMatrix();ut||(ut=[1,0,0,0,1,0,0,0,1]),G&&this.focusPoint({x:ut[6],y:ut[7]},B,$)},pe.prototype.changeSize=function(G,B){var $=this.graph;if(!Object(l.t)(G)||!Object(l.t)(B))throw Error("invalid canvas width & height, please make sure width & height type is number");$.set({width:G,height:B}),$.get("canvas").changeSize(G,B),$.get("plugins").forEach(function(ut){if(ut.get("gridContainer")){var Bt=$.get("minZoom");Object(yt.c)(ut.get("container"),{width:G+"px",height:B+"px"}),Object(yt.c)(ut.get("gridContainer"),{width:G/Bt+"px",height:B/Bt+"px",left:0,top:0})}})},pe.prototype.destroy=function(){this.graph=null,this.destroyed=!1},pe}(),we={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},De=Math.PI,Ve=Math.sin,pn=Math.cos,sn=Ve(De/8),In=pn(De/8),An=function(G,B){var $=G.getBBox(),ut={x:$.minX,y:$.minY},Bt={x:$.maxX,y:$.maxY};if(B){var Jt=B.getMatrix();Jt||(Jt=[1,0,0,0,1,0,0,0,1]),ut=tt(ut,Jt),Bt=tt(Bt,Jt)}var ie=ut.x,se=ut.y,Ce=Bt.x,Ee=Bt.y;return{x:ie,y:se,minX:ie,minY:se,maxX:Ce,maxY:Ee,width:Ce-ie,height:Ee-se}},Rn=function(G){var B=G.sourceNode||G.targetNode,$=B.get("group").getMatrix();$||($=[1,0,0,0,1,0,0,0,1]);var ut=B.getKeyShape().getBBox(),Bt=G.loopCfg||{},Jt=Bt.dist||2*Math.max(ut.width,ut.height),ie=Bt.position||dt.defaultLoopPosition,se=[$[6],$[7]],Ce=[G.startPoint.x,G.startPoint.y],Ee=[G.endPoint.x,G.endPoint.y],cn=ut.height/2,xn=ut.height/2,_t=cn*sn,Yt=cn*In,Se=xn*sn,Wt=xn*In;if(Ce[0]===Ee[0]&&Ce[1]===Ee[1]){switch(ie){case"top":Ce=[se[0]-_t,se[1]-Yt],Ee=[se[0]+Se,se[1]-Wt];break;case"top-right":cn=ut.height/2,xn=ut.width/2,Ce=[se[0]+(_t=cn*sn),se[1]-(Yt=cn*In)],Ee=[se[0]+(Wt=xn*In),se[1]-(Se=xn*sn)];break;case"right":cn=ut.width/2,xn=ut.width/2,Ce=[se[0]+(Yt=cn*In),se[1]-(_t=cn*sn)],Ee=[se[0]+(Wt=xn*In),se[1]+(Se=xn*sn)];break;case"bottom-right":cn=ut.width/2,xn=ut.height/2,Ce=[se[0]+(Yt=cn*In),se[1]+(_t=cn*sn)],Ee=[se[0]+(Se=xn*sn),se[1]+(Wt=xn*In)];break;case"bottom":cn=ut.height/2,xn=ut.height/2,Ce=[se[0]+(_t=cn*sn),se[1]+(Yt=cn*In)],Ee=[se[0]-(Se=xn*sn),se[1]+(Wt=xn*In)];break;case"bottom-left":cn=ut.height/2,xn=ut.width/2,Ce=[se[0]-(_t=cn*sn),se[1]+(Yt=cn*In)],Ee=[se[0]-(Wt=xn*In),se[1]+(Se=xn*sn)];break;case"left":cn=ut.width/2,xn=ut.width/2,Ce=[se[0]-(Yt=cn*In),se[1]+(_t=cn*sn)],Ee=[se[0]-(Wt=xn*In),se[1]-(Se=xn*sn)];break;case"top-left":cn=ut.width/2,xn=ut.height/2,Ce=[se[0]-(Yt=cn*In),se[1]-(_t=cn*sn)],Ee=[se[0]-(Se=xn*sn),se[1]-(Wt=xn*In)];break;default:cn=ut.width/2,xn=ut.width/2,Ce=[se[0]-(_t=cn*sn),se[1]-(Yt=cn*In)],Ee=[se[0]+(Se=xn*sn),se[1]-(Wt=xn*In)]}if(Bt.clockwise===!1){var ue=[Ce[0],Ce[1]];Ce=[Ee[0],Ee[1]],Ee=[ue[0],ue[1]]}}var vn=[Ce[0]-se[0],Ce[1]-se[1]],kn=(cn+Jt)/cn,_n=(xn+Jt)/xn;Bt.clockwise===!1&&(kn=(xn+Jt)/xn,_n=(cn+Jt)/cn);var Un=d.c.scale([0,0],vn,kn),Ze=[se[0]+Un[0],se[1]+Un[1]],Te=[Ee[0]-se[0],Ee[1]-se[1]],R=d.c.scale([0,0],Te,_n),mt=[se[0]+R[0],se[1]+R[1]];return G.startPoint={x:Ce[0],y:Ce[1]},G.endPoint={x:Ee[0],y:Ee[1]},G.controlPoints=[{x:Ze[0],y:Ze[1]},{x:mt[0],y:mt[1]}],G},Mn=function(G,B,$,ut,Bt){var Jt=[],ie=G.getPoint(B);if(ie===null)return{x:0,y:0,angle:0};if(B<1e-4)Jt=G.getStartTangent().reverse();else if(B>.9999)Jt=G.getEndTangent();else{var se=G.getPoint(B+1e-4);Jt.push([ie.x,ie.y]),Jt.push([se.x,se.y])}var Ce=Math.atan2(Jt[1][1]-Jt[0][1],Jt[1][0]-Jt[0][0]);if(Ce<0&&(Ce+=2*De),$&&(ie.x+=pn(Ce)*$,ie.y+=Ve(Ce)*$),ut){var Ee=Ce-De/2;Ce>.5*De&&Ce<1.5*De&&(Ee-=De),ie.x+=pn(Ee)*ut,ie.y+=Ve(Ee)*ut}var cn={x:ie.x,y:ie.y,angle:Ce};return Bt?(Ce>.5*De&&Ce<1.5*De&&(Ce-=De),Object(n.a)({rotate:Ce},cn)):cn},Cn=function pe(G,B){if(B(G)===!1)return!1;if(G&&G.children){for(var $=G.children.length-1;$>=0;$--)if(!pe(G.children[$],B))return!1}return!0},Gn=function(G,B){typeof B=="function"&&Cn(G,B)},Xn=function(G,B){typeof B=="function"&&function $(ut,Bt){if(ut&&ut.children){for(var Jt=ut.children.length-1;Jt>=0;Jt--)if(!$(ut.children[Jt],Bt))return}return Bt(ut)!==!1}(G,B)},tr=function(G,B){return B*(we[G]||1)},or=function(G,B){var $=0,ut=new RegExp("[\u4E00-\u9FA5]+");return G.split("").forEach(function(Bt){ut.test(Bt)?$+=B:$+=tr(Bt,B)}),[$,B]},nr=function(G,B){var $=[],ut={},Bt={};G.forEach(function(se){Bt[se.id]=se}),G.forEach(function(se,Ce){var Ee=Object(l.c)(se);Ee.itemType="combo",Ee.children=void 0,Ee.parentId===Ee.id?(console.warn("The parentId for combo "+Ee.id+" can not be the same as the combo's id"),delete Ee.parentId):Ee.parentId&&!Bt[Ee.parentId]&&(console.warn("The parent combo for combo "+Ee.id+" does not exist!"),delete Ee.parentId);var cn=ut[Ee.id];if(cn){if(Ee.children=cn.children,ut[Ee.id]=Ee,!(cn=Ee).parentId)return void $.push(cn);var xn=ut[cn.parentId];if(xn)xn.children?xn.children.push(Ee):xn.children=[Ee];else{var _t={id:cn.parentId,children:[cn]};ut[cn.parentId]=_t,ut[Ee.id]=Ee}}else if(Object(l.x)(se.parentId)){var Yt=ut[se.parentId];if(Yt)Yt.children?Yt.children.push(Ee):Yt.children=[Ee],ut[Ee.id]=Ee;else{var Se={id:se.parentId,children:[Ee]};ut[Se.id]=Se,ut[Ee.id]=Ee}}else $.push(Ee),ut[Ee.id]=Ee});var Jt={};(B||[]).forEach(function(se){Jt[se.id]=se;var Ce=ut[se.comboId];if(Ce){var Ee={id:se.id,comboId:se.comboId};Ce.children?Ce.children.push(Ee):Ce.children=[Ee],Ee.itemType="node",ut[se.id]=Ee}});var ie=0;return $.forEach(function(se){se.depth=ie+10,Cn(se,function(Ce){var Ee,cn=ut[Ce.id].itemType;Ee=cn==="node"?ut[Ce.comboId]:ut[Ce.parentId],Ce.depth=Ee&&cn==="node"?ie+1:ie+10,ie<Ce.depth&&(ie=Ce.depth);var xn=Jt[Ce.id];return xn&&(xn.depth=Ce.depth),!0})}),$},er=function(G,B,$){var ut,Bt=G,Jt={root:{children:G}},ie=!1,se="root";(G||[]).forEach(function(_t){if(!ie)return _t.id===B?(ut=_t,_t.itemType==="combo"?ut.parentId=$:ut.comboId=$,void(ie=!0)):void Gn(_t,function(Yt){return Jt[Yt.id]={children:Yt.children},Bt=Jt[Yt.parentId||Yt.comboId||"root"].children,!Yt||!Yt.removed&&B!==Yt.id||!Bt||(se=Yt.parentId||Yt.comboId||"root",ut=Yt,Yt.itemType==="combo"?ut.parentId=$:ut.comboId=$,ie=!0,!1)})});var Ce=(Bt=Jt[se].children)?Bt.indexOf(ut):-1;if(Ce>-1&&Bt.splice(Ce,1),ie||(ut={id:B,itemType:"node",comboId:$},Jt[B]={children:void 0}),B){var Ee=!1;if($){var cn=0;(G||[]).forEach(function(_t){Ee||Gn(_t,function(Yt){return $!==Yt.id||(Ee=!0,Yt.children?Yt.children.push(ut):Yt.children=[ut],cn=Yt.depth,ut.itemType==="node"?ut.depth=cn+2:ut.depth=cn+1,!1)})})}else $&&Ee||ut.itemType==="node"||G.push(ut);var xn=ut.depth;Gn(ut,function(_t){return _t.itemType==="node"?xn+=2:xn+=1,_t.depth=xn,!0})}return G},Sr=function(G,B){var $={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return G&&G.length!==0&&(G.forEach(function(ut){var Bt=B.findById(ut.id);if(Bt&&Bt.isVisible()){Bt.set("bboxCanvasCache",void 0);var Jt=Bt.getCanvasBBox();Jt.x&&$.minX>Jt.minX&&($.minX=Jt.minX),Jt.y&&$.minY>Jt.minY&&($.minY=Jt.minY),Jt.x&&$.maxX<Jt.maxX&&($.maxX=Jt.maxX),Jt.y&&$.maxY<Jt.maxY&&($.maxY=Jt.maxY)}}),$.x=($.minX+$.maxX)/2,$.y=($.minY+$.maxY)/2,$.width=$.maxX-$.minX,$.height=$.maxY-$.minY,$.centerX=($.minX+$.maxX)/2,$.centerY=($.minY+$.maxY)/2,Object.keys($).forEach(function(ut){$[ut]!==1/0&&$[ut]!==-1/0||($[ut]=void 0)})),$},Vr=function(G){var B=Object(l.t)(G.x)||Object(l.t)(G.y)||G.type||G.anchorPoints||G.size;return G.style&&(B=B||Object(l.t)(G.style.r)||Object(l.t)(G.style.width)||Object(l.t)(G.style.height)||Object(l.t)(G.style.rx)||Object(l.t)(G.style.ry)),B},ti=function(G){var B={};return Object.keys(G).forEach(function($){var ut=G[$];if(Object(l.v)(ut)){var Bt={};Object.keys(ut).forEach(function(Jt){var ie=ut[Jt];(Jt!=="img"||Object(l.x)(ie))&&(Bt[Jt]=Object(l.c)(ie))}),B[$]=Bt}else B[$]=Object(l.c)(ut)}),B};function hi(pe){return(hi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G})(pe)}function Fi(pe){if(typeof pe!="string")return pe;var G=function(Ze){if(typeof Ze!="string")return Ze;try{return JSON.parse(Ze.trim())}catch(Te){return Ze.trim()}},B=G(pe);if(typeof B!="string")return B;for(var $=function(Ze){return Ze[Ze.length-1]},ut=pe.trim(),Bt=[],Jt=[],ie=function(){for(var Ze=[],Te=0;Te<arguments.length;Te++)Ze[Te]=arguments[Te];return Ze.some(function(R){return $(Jt)===R})},se=null,Ce=0,Ee="";Ce<ut.length;){var cn=ut[Ce],xn=ie('"',"'");if(xn||cn.trim()){var _t=ut[Ce-1]==="\\",Yt=ie("}"),Se=ie("]"),Wt=ie(","),ue=$(Bt);if(xn)if($(Jt)!==cn||_t)Ee+=cn;else{Jt.pop();var vn=G(Ee);ue.push(vn),se=vn,Ee=""}else if(Se&&cn===",")Ee&&(ue.push(G(Ee)),Ee="");else if(Yt&&cn===":")Jt.push(","),Ee&&(ue.push(Ee),Ee="");else if(Wt&&cn===",")Ee&&(ue.push(G(Ee)),Ee=""),Jt.pop();else if(cn==="}"&&(Yt||Wt)){Ee&&(ue.push(G(Ee)),Ee=""),Wt&&Jt.pop();for(var kn={},_n=1;_n<ue.length;_n+=2)kn[ue[_n-1]]=ue[_n];Bt.pop(),Bt.length&&$(Bt).push(kn),Jt.pop(),se=kn}else cn==="]"&&Se?(Ee&&(ue.push(G(Ee)),Ee=""),Bt.pop(),Bt.length&&$(Bt).push(ue),Jt.pop(),se=ue):cn==="{"?(Bt.push([]),Jt.push("}")):cn==="["?(Bt.push([]),Jt.push("]")):cn==='"'?Jt.push('"'):cn==="'"?Jt.push("'"):Ee+=cn;Ce+=1}else Ce+=1}return se||Ee}function to(pe,G){var B;G===void 0&&(G={x:0,y:0});var $=Object(n.a)({x:0,y:0,width:0,height:0},G);if((B=pe.children)===null||B===void 0?void 0:B.length){var ut=pe.attrs,Bt=ut===void 0?{}:ut,Jt=Bt.marginTop,ie=Object(n.a)({},G);Jt&&(ie.y+=Jt);for(var se=0;se<pe.children.length;se++){pe.children[se].attrs.key=(Bt.key||"root")+" -"+se+" ";var Ce=to(pe.children[se],ie);if(Ce.bbox){var Ee=Ce.bbox;Ce.attrs.next==="inline"?ie.x+=Ce.bbox.width:ie.y+=Ce.bbox.height,Ee.width+Ee.x>$.width&&($.width=Ee.width+Ee.x),Ee.height+Ee.y>$.height&&($.height=Ee.height+Ee.y)}}}return pe.bbox=function(cn,xn,_t){var Yt,Se,Wt=cn.attrs,ue=Wt===void 0?{}:Wt,vn={x:xn.x||0,y:xn.y||0,width:_t.width||0,height:_t.height||0};switch(cn.type){case"maker":case"circle":ue.r&&(Se=2*ue.r,Yt=2*ue.r);break;case"text":ue.text&&(Se=or(ue.text,ue.fontSize||12)[0],Yt=16,vn.y+=Yt,vn.height=Yt,vn.width=Se,cn.attrs=Object(n.a)({fontSize:12,fill:"#000"},ue));break;default:ue.width&&(Se=ue.width),ue.height&&(Yt=ue.height)}return Yt>=0&&(vn.height=Yt),Se>=0&&(vn.width=Se),ue.marginTop&&(vn.y+=ue.marginTop),ue.marginLeft&&(vn.x+=ue.marginLeft),vn}(pe,G,$),pe.attrs=Object(n.a)(Object(n.a)({},pe.attrs),pe.bbox),pe}function si(pe){var G={},B=function(ut){var Bt=function(se){return function(Ce){for(var Ee=se.length,cn=[],xn=0,_t="";xn<Ee;)if(se[xn]==="{"&&se[xn+1]==="{")cn.push(_t),_t="",xn+=2;else if(se[xn]==="}"&&se[xn+1]==="}"){if(cn.length){var Yt=cn.pop();_t=Object(l.i)(Ce,_t,Yt.endsWith("=")?'"{'+_t+'}"':_t),cn.push(Yt+_t)}xn+=2,_t=""}else _t+=se[xn],xn+=1;return cn.push(_t),cn.map(function(Se,Wt){return cn[Wt-1]&&cn[Wt-1].endsWith("=")?'"{'+Se+'}"':Se}).join("")}}(typeof pe=="function"?pe(ut):pe)(ut),Jt=document.createElement("div");Jt.innerHTML=Bt;var ie=to(function se(Ce,Ee){var cn={},xn=Ce.getAttributeNames&&Ce.getAttributeNames()||[],_t=Ce.children&&Array.from(Ce.children).map(function(Wt){return se(Wt,Ee)}),Yt={},Se=Ce.tagName?Ce.tagName.toLowerCase():"group";return Se==="text"&&(cn.text=Ce.innerText),Yt.type=Se,Se==="img"&&(Yt.type="image"),Array.from(xn).forEach(function(Wt){var ue=Wt.split("-").reduce(function(_n,Un){return _n+Un.charAt(0).toUpperCase()+Un.slice(1)}),vn=Ce.getAttribute(Wt);try{if(ue==="style"||ue==="attrs"){var kn=Fi(vn);cn=Object(n.a)(Object(n.a)({},cn),kn)}else Yt[ue]=Fi(vn)}catch(_n){if(ue==="style")throw _n;Yt[ue]=vn}}),Yt.attrs=cn,Ee&&Ee.style&&Yt.name&&hi(Ee.style[Yt.name])==="object"&&(Yt.attrs=Object(n.a)(Object(n.a)({},Yt.attrs),Ee.style[Yt.name])),Ee&&Ee.style&&Yt.keyshape&&(Yt.attrs=Object(n.a)(Object(n.a)({},Yt.attrs),Ee.style)),_t.length&&(Yt.children=_t),Yt}(Jt.children[0],ut));return Jt.remove(),ie};return{draw:function(ut,Bt){var Jt=B(ut),ie=Bt;return function se(Ce){var Ee=Ce.attrs,cn=Ee===void 0?{}:Ee,xn=Ce.bbox,_t=Ce.type,Yt=Ce.children,Se=Object(n.c)(Ce,["attrs","bbox","type","children"]);if(Ce.type!=="group"){var Wt=Bt.addShape(Ce.type,Object(n.a)({attrs:cn,origin:{bbox:xn,type:_t,children:Yt}},Se));Ce.keyshape&&(ie=Wt)}Ce.children&&Ce.children.forEach(function(ue){return se(ue)})}(Jt),G[ut.id]=[Jt],ie},update:function(ut,Bt){G[ut.id]||(G[ut.id]=[]);var Jt=Bt.getContainer(),ie=Jt.get("children"),se=B(ut),Ce=function xn(_t,Yt){var Se,Wt,ue,vn,kn=(_t||{}).type,_n=((Yt==null?void 0:Yt.attrs)||{}).key;if(_n&&_t&&(_t.attrs.key=_n),!_t&&Yt)return{action:"delete",val:Yt,type:kn,key:_n};if(_t&&!Yt)return{action:"add",val:_t,type:kn};if(!_t&&!Yt)return{action:"same",type:kn};var Un=[];if(((Se=_t.children)===null||Se===void 0?void 0:Se.length)>0||((Wt=Yt.children)===null||Wt===void 0?void 0:Wt.length)>0)for(var Ze=Math.max((ue=_t.children)===null||ue===void 0?void 0:ue.length,(vn=Yt.children)===null||vn===void 0?void 0:vn.length),Te=Yt.children||[],R=_t.children||[],mt=0;mt<Ze;mt+=1)Un.push(xn(R[mt],Te[mt]));var $t=Object.keys(Yt.attrs),me=Object.keys(_t.attrs);return Yt.type!==_t.type?{action:"restructure",nowTarget:_t,formerTarget:Yt,key:_n,children:Un}:$t.filter(function(Zt){return Zt!=="children"}).some(function(Zt){return _t.attrs[Zt]!==Yt.attrs[Zt]||!me.includes(Zt)})?{action:"change",val:_t,children:Un,type:kn,key:_n}:{action:"same",children:Un,type:kn,key:_n}}(se,G[ut.id].pop()),Ee=function xn(_t){var Yt;_t.type!=="group"&&Jt.addShape(_t.type,{attrs:_t.attrs}),((Yt=_t.children)===null||Yt===void 0?void 0:Yt.length)&&_t.children.map(function(Se){return xn(Se)})},cn=function xn(_t){var Yt,Se=ie.find(function(Wt){return Wt.attrs.key===_t.attrs.key});Se&&Jt.removeChild(Se),((Yt=_t.children)===null||Yt===void 0?void 0:Yt.length)&&_t.children.map(function(Wt){return xn(Wt)})};(function xn(_t){var Yt=_t.key;if(_t.type!=="group"){var Se=ie.find(function(ue){return ue.attrs.key===Yt});switch(_t.action){case"change":if(Se){var Wt=_t.val.keyshape?Bt.getOriginStyle():{};Se.attr(Object(n.a)(Object(n.a)({},Wt),_t.val.attrs))}break;case"add":Ee(_t.val);break;case"delete":cn(_t.val);break;case"restructure":cn(_t.formerTarget),Ee(_t.nowTarget)}}_t.children&&_t.children.forEach(function(ue){return xn(ue)})})(Ce),G[ut.id].push(se)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Ti={};function Ui(pe){return Ti[pe]||(Ti[pe]=Object(l.I)(pe)),Ti[pe]}var Li={defaultShapeType:"defaultType",className:null,getShape:function(G){return this[G]||this[this.defaultShapeType]||this["simple-circle"]},draw:function(G,B,$){var ut=this.getShape(G),Bt=ut.draw(B,$);return ut.afterDraw&&ut.afterDraw(B,$,Bt),Bt},baseUpdate:function(G,B,$){var ut=this.getShape(G);ut.update&&ut.update(B,$),ut.afterUpdate&&ut.afterUpdate(B,$)},setState:function(G,B,$,ut){this.getShape(G).setState(B,$,ut)},shouldUpdate:function(G){return!!this.getShape(G).update},getControlPoints:function(G,B){return this.getShape(G).getControlPoints(B)},getAnchorPoints:function(G,B){return this.getShape(G).getAnchorPoints(B)}},Vi={options:{},draw:function(G,B){return this.drawShape(G,B)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(G){return G.controlPoints},getAnchorPoints:function(G){var B=this.options.anchorPoints;return G.anchorPoints||B}},ro=function(){function pe(){}return pe.registerFactory=function(G,B){var $=Ui(G),ut=Li,Bt=Object(n.a)(Object(n.a)({},ut),B);return pe[$]=Bt,Bt.className=$,Bt},pe.getFactory=function(G){return pe[Ui(G)]},pe.registerNode=function(G,B,$){var ut,Bt=pe.Node;if(typeof B=="string"||typeof B=="function"){var Jt=si(B);ut=Object(n.a)(Object(n.a)({},Bt.getShape("single-node")),Jt)}else if(B.jsx)Jt=si(B.jsx),ut=Object(n.a)(Object(n.a)(Object(n.a)({},Bt.getShape("single-node")),Jt),B);else{Bt.getShape($);var ie=$?Bt.getShape($):Vi;ut=Object(n.a)(Object(n.a)({},ie),B)}return ut.type=G,ut.itemType="node",Bt[G]=ut,ut},pe.registerEdge=function(G,B,$){var ut=pe.Edge,Bt=$?ut.getShape($):Vi,Jt=Object(n.a)(Object(n.a)({},Bt),B);return Jt.type=G,Jt.itemType="edge",ut[G]=Jt,Jt},pe.registerCombo=function(G,B,$){var ut=pe.Combo,Bt=$?ut.getShape($):Vi,Jt=Object(n.a)(Object(n.a)({},Bt),B);return Jt.type=G,Jt.itemType="combo",ut[G]=Jt,Jt},pe}(),jr=ro;ro.registerFactory("node",{defaultShapeType:"circle"}),ro.registerFactory("edge",{defaultShapeType:"line"}),ro.registerFactory("combo",{defaultShapeType:"circle"});var Ji=["startArrow","endArrow"],pr=function(){function pe(G){this._cfg={},this.destroyed=!1;var B={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(B,this.getDefaultCfg(),G);var $=this.get("model"),ut=$.id,Bt=this.get("type");ut||(ut=Pt(Bt),this.get("model").id=ut),this.set("id",ut);var Jt=G.group;Jt&&(Jt.set("item",this),Jt.set("id",ut)),this.init(),this.draw();var ie=$.shape||$.type||(Bt==="edge"?"line":"circle"),se=this.get("shapeFactory");if(se&&se[ie]){var Ce=se[ie].options;if(Ce&&Ce.stateStyles){var Ee=this.get("styles")||$.stateStyles;Ee=Object(l.e)({},Ce.stateStyles,Ee),this.set("styles",Ee)}}}return pe.prototype.calculateBBox=function(){var G=this.get("keyShape"),B=this.get("group"),$=An(G,B);return $.x=$.minX,$.y=$.minY,$.width=$.maxX-$.minX,$.height=$.maxY-$.minY,$.centerX=($.minX+$.maxX)/2,$.centerY=($.minY+$.maxY)/2,$},pe.prototype.calculateCanvasBBox=function(){var G=this.get("keyShape"),B=this.get("group"),$=An(G,B);return $.x=$.minX,$.y=$.minY,$.width=$.maxX-$.minX,$.height=$.maxY-$.minY,$.centerX=($.minX+$.maxX)/2,$.centerY=($.minY+$.maxY)/2,$},pe.prototype.drawInner=function(){var G=this.get("shapeFactory"),B=this.get("group"),$=this.get("model");B.clear();var ut=$.visible;if(ut===void 0||ut||this.changeVisibility(ut),G){this.updatePosition($);var Bt=this.getShapeCfg($),Jt=Bt.type,ie=G.draw(Jt,Bt,B);ie&&(this.set("keyShape",ie),ie.set("isKeyShape",!0),ie.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",Jt),this.restoreStates(G,Jt)}},pe.prototype.setOriginStyle=function(G){var B=this.get("group").get("children"),$=this.getKeyShape(),ut=this,Bt=$.get("name");if(this.get("originStyle")){var Jt=this.getOriginStyle();Bt&&!Jt[Bt]&&(Jt[Bt]={});var ie=this.getCurrentStatesStyle();Object(l.f)(B,function(Ce){var Ee=Ce.get("name"),cn=Ce.attr();if(Ee&&Ee!==Bt){var xn=ie[Ee];Jt[Ee]||(Jt[Ee]={}),xn?Object.keys(cn).forEach(function(Se){var Wt=cn[Se];Wt!==xn[Se]&&(Jt[Ee][Se]=Wt)}):Jt[Ee]=Object(l.c)(cn)}else{var _t=Ce.attr(),Yt=Object(n.a)(Object(n.a)({},ie),ie[Bt]);Object.keys(_t).forEach(function(Se){var Wt=_t[Se];Object(l.w)(Wt)&&Ji.indexOf(Ee)===-1||Yt[Se]!==Wt&&(Bt?Jt[Bt][Se]=Wt:Jt[Se]=Wt)})}}),Jt.path&&delete Jt.path,Jt.matrix&&delete Jt.matrix,ut.set("originStyle",Jt)}else{var se={};Object(l.f)(B,function(Ce){var Ee=Ce.get("type"),cn=Ce.get("name");if(cn&&cn!==Bt)se[cn]=Ee!=="image"?Object(l.c)(Ce.attr()):ut.getShapeStyleByName(cn);else{var xn=ut.getShapeStyleByName();if(xn.path&&delete xn.path,xn.matrix&&delete xn.matrix,Bt)if(cn)se[Bt]=xn;else{var _t=Pt("shape");Ce.set("name",_t),se[_t]=Ee!=="image"?Object(l.c)(Ce.attr()):ut.getShapeStyleByName(cn)}else Object.assign(se,xn)}}),ut.set("originStyle",se)}},pe.prototype.restoreStates=function(G,B){var $=this,ut=$.get("states");Object(l.f)(ut,function(Bt){G.setState(B,Bt,!0,$)})},pe.prototype.init=function(){var G=jr.getFactory(this.get("type"));this.set("shapeFactory",G)},pe.prototype.get=function(G){return this._cfg[G]},pe.prototype.set=function(G,B){Object(l.w)(G)?this._cfg=Object(n.a)(Object(n.a)({},this._cfg),G):this._cfg[G]=B},pe.prototype.getDefaultCfg=function(){return{}},pe.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null)},pe.prototype.beforeDraw=function(){},pe.prototype.afterDraw=function(){},pe.prototype.afterUpdate=function(){},pe.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},pe.prototype.getShapeStyleByName=function(G){var B,$=this.get("group");if(B=G?$.find(function(Bt){return Bt.get("name")===G}):this.getKeyShape()){var ut={};return Object(l.f)(B.attr(),function(Bt,Jt){Jt!=="img"&&(ut[Jt]=Bt)}),ut}return{}},pe.prototype.getShapeCfg=function(G){var B=this.get("styles");if(B){var $=G;return $.style=Object(n.a)(Object(n.a)({},B),G.style),$}return G},pe.prototype.getStateStyle=function(G){var B=this.get("styles");return B&&B[G]},pe.prototype.getOriginStyle=function(){return this.get("originStyle")},pe.prototype.getCurrentStatesStyle=function(){var G=this,B={},$=G.getStates();return $&&$.length?(Object(l.f)(G.getStates(),function(ut){B=Object.assign(B,G.getStateStyle(ut))}),B):this.getOriginStyle()},pe.prototype.setState=function(G,B){var $=this.get("states"),ut=this.get("shapeFactory"),Bt=G,Jt=G;Object(l.x)(B)&&(Bt=G+":"+B,Jt=G+":");var ie=$;if(Object(l.n)(B)){var se=$.indexOf(Jt);if(B){if(se>-1)return;$.push(Bt)}else se>-1&&$.splice(se,1)}else if(Object(l.x)(B)){var Ce=$.filter(function(cn){return cn.includes(Jt)});Ce.length>0&&this.clearStates(Ce),(ie=ie.filter(function(cn){return!cn.includes(Jt)})).push(Bt),this.set("states",ie)}if(ut){var Ee=this.get("model").type;ut.setState(Ee,G,B,this)}},pe.prototype.clearStates=function(G){var B=this,$=B.getStates(),ut=B.get("shapeFactory"),Bt=B.get("model").type;G||(G=$),Object(l.x)(G)&&(G=[G]);var Jt=$.filter(function(ie){return G.indexOf(ie)===-1});B.set("states",Jt),G.forEach(function(ie){ut.setState(Bt,ie,!1,B)})},pe.prototype.getContainer=function(){return this.get("group")},pe.prototype.getKeyShape=function(){return this.get("keyShape")},pe.prototype.getModel=function(){return this.get("model")},pe.prototype.getType=function(){return this.get("type")},pe.prototype.getID=function(){return this.get("id")},pe.prototype.isItem=function(){return!0},pe.prototype.getStates=function(){return this.get("states")},pe.prototype.hasState=function(G){return this.getStates().indexOf(G)>=0},pe.prototype.refresh=function(){var G=this.get("model");this.updatePosition(G),this.updateShape(),this.afterUpdate(),this.clearCache()},pe.prototype.isOnlyMove=function(G){return!1},pe.prototype.update=function(G,B){B===void 0&&(B=!1);var $=this.get("model"),ut=$.visible,Bt=G.visible;ut!==Bt&&Bt!==void 0&&this.changeVisibility(Bt);var Jt=$.x,ie=$.y;G.x=isNaN(G.x)?$.x:G.x,G.y=isNaN(G.y)?$.y:G.y;var se=this.get("styles");if(G.stateStyles){var Ce=G.stateStyles;Object(l.A)(se,Ce),delete G.stateStyles}Object.assign($,G),B?this.updatePosition(G):(Jt===G.x&&ie===G.y||this.updatePosition(G),this.updateShape()),this.afterUpdate(),this.clearCache()},pe.prototype.updateShape=function(){var G=this.get("shapeFactory"),B=this.get("model"),$=B.type;if(G.shouldUpdate($)&&$===this.get("currentShape")){var ut=this.getShapeCfg(B);G.baseUpdate($,ut,this)}else this.draw();this.setOriginStyle(B),this.restoreStates(G,$)},pe.prototype.updatePosition=function(G){var B=this.get("model"),$=Object(l.s)(G.x)?B.x:G.x,ut=Object(l.s)(G.y)?B.y:G.y,Bt=this.get("group");Object(l.s)($)||Object(l.s)(ut)||(Bt.resetMatrix(),lt(Bt,{x:$,y:ut}),B.x=$,B.y=ut,this.clearCache())},pe.prototype.getBBox=function(){var G=this.get("bboxCache");return G||(G=this.calculateBBox(),this.set("bboxCache",G)),G},pe.prototype.getCanvasBBox=function(){var G=this.get("bboxCanvasCache");return G||(G=this.calculateCanvasBBox(),this.set("bboxCanvasCache",G)),G},pe.prototype.toFront=function(){this.get("group").toFront()},pe.prototype.toBack=function(){this.get("group").toBack()},pe.prototype.show=function(){this.changeVisibility(!0)},pe.prototype.hide=function(){this.changeVisibility(!1)},pe.prototype.changeVisibility=function(G){var B=this.get("group");G?B.show():B.hide(),this.set("visible",G)},pe.prototype.isVisible=function(){return this.get("visible")},pe.prototype.enableCapture=function(G){var B=this.get("group");B&&B.set("capture",G)},pe.prototype.destroy=function(){if(!this.destroyed){var G=this.get("animate"),B=this.get("group");G&&B.stopAnimate(),this.clearCache(),B.remove(),this._cfg=null,this.destroyed=!0}},pe}(),Xr={source:"start",target:"end"},Br=function(pe){function G(){return pe!==null&&pe.apply(this,arguments)||this}return Object(n.b)(G,pe),G.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},G.prototype.setEnd=function(B,$){var ut=Xr[B]+"Point",Bt=B+"Node",Jt=this.get(Bt);Jt&&!Jt.destroyed&&Jt.removeEdge(this),Object(l.w)($)?(this.set(ut,$),this.set(Bt,null)):($.addEdge(this),this.set(Bt,$),this.set(ut,null))},G.prototype.getLinkPoint=function(B,$,ut){var Bt=Xr[B]+"Point",Jt=B+"Node",ie=this.get(Bt);if(!ie){var se=this.get(Jt),Ce=B+"Anchor",Ee=this.getPrePoint(B,ut),cn=$[Ce];Object(l.s)(cn)||(ie=se.getLinkPointByAnchor(cn)),ie=ie||se.getLinkPoint(Ee),Object(l.s)(ie.index)||this.set(B+"AnchorIndex",ie.index)}return ie},G.prototype.getPrePoint=function(B,$){if($&&$.length)return $[B==="source"?0:$.length-1];var ut=B==="source"?"target":"source";return this.getEndPoint(ut)},G.prototype.getEndPoint=function(B){var $=B+"Node",ut=Xr[B]+"Point",Bt=this.get($);return Bt?Bt.get("model"):this.get(ut)},G.prototype.getControlPointsByCenter=function(B){var $=this.getEndPoint("source"),ut=this.getEndPoint("target"),Bt=this.get("shapeFactory"),Jt=B.type;return Bt.getControlPoints(Jt,{startPoint:$,endPoint:ut})},G.prototype.getEndCenter=function(B){var $=B+"Node",ut=Xr[B]+"Point",Bt=this.get($);if(Bt){var Jt=Bt.getBBox();return{x:Jt.centerX,y:Jt.centerY}}return this.get(ut)},G.prototype.init=function(){pe.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},G.prototype.getShapeCfg=function(B){var $=this.get("linkCenter"),ut=pe.prototype.getShapeCfg.call(this,B);if($)ut.startPoint=this.getEndCenter("source"),ut.endPoint=this.getEndCenter("target");else{var Bt=ut.controlPoints||this.getControlPointsByCenter(ut);ut.startPoint=this.getLinkPoint("source",B,Bt),ut.endPoint=this.getLinkPoint("target",B,Bt)}return ut.sourceNode=this.get("sourceNode"),ut.targetNode=this.get("targetNode"),ut},G.prototype.getModel=function(){var B=this.get("model"),$=this.get("sourceNode"),ut=this.get("targetNode");return $?delete B.sourceNode:B.source=this.get("startPoint"),ut?delete B.targetNode:B.target=this.get("endPoint"),Object(l.x)(B.source)||Object(l.w)(B.source)||(B.source=B.source.getID()),Object(l.x)(B.target)||Object(l.w)(B.target)||(B.target=B.target.getID()),B},G.prototype.setSource=function(B){this.setEnd("source",B),this.set("source",B)},G.prototype.setTarget=function(B){this.setEnd("target",B),this.set("target",B)},G.prototype.getSource=function(){return this.get("source")},G.prototype.getTarget=function(){return this.get("target")},G.prototype.updatePosition=function(){},G.prototype.update=function(B,$){$===void 0&&($=!1);var ut=this.get("model"),Bt=ut.visible,Jt=B.visible;Bt!==Jt&&Jt!==void 0&&this.changeVisibility(Jt);var ie=this.get("styles");if(B.stateStyles){var se=B.stateStyles;Object(l.A)(ie,se),delete B.stateStyles}Object.assign(ut,B),this.updateShape(),this.afterUpdate(),this.clearCache()},G.prototype.destroy=function(){var B=this.get("sourceNode"),$=this.get("targetNode");B&&!B.destroyed&&B.removeEdge(this),$&&!$.destroyed&&$.removeEdge(this),pe.prototype.destroy.call(this)},G}(pr),Nr=function(pe){function G(){return pe!==null&&pe.apply(this,arguments)||this}return Object(n.b)(G,pe),G.prototype.getNearestPoint=function(B,$){for(var ut=0,Bt=B[0],Jt=ft(B[0],$),ie=0;ie<B.length;ie++){var se=B[ie],Ce=ft(se,$);Ce<Jt&&(Bt=se,Jt=Ce,ut=ie)}return Bt.anchorIndex=ut,Bt},G.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},G.prototype.getEdges=function(){return this.get("edges")},G.prototype.getInEdges=function(){var B=this;return this.get("edges").filter(function($){return $.get("target")===B})},G.prototype.getOutEdges=function(){var B=this;return this.get("edges").filter(function($){return $.get("source")===B})},G.prototype.getNeighbors=function(B){var $=this,ut=this.get("edges");return B==="target"?ut.filter(function(Bt){return Bt.getSource()===$}).map(function(Bt){return Bt.getTarget()}):B==="source"?ut.filter(function(Bt){return Bt.getTarget()===$}).map(function(Bt){return Bt.getSource()}):ut.map(function(Bt){return Bt.getSource()===$?Bt.getTarget():Bt.getSource()})},G.prototype.getLinkPointByAnchor=function(B){return this.getAnchorPoints()[B]},G.prototype.getLinkPoint=function(B){var $,ut,Bt=this.get("keyShape").get("type"),Jt=this.get("type"),ie=this.getBBox();Jt==="combo"?($=ie.centerX||(ie.maxX+ie.minX)/2,ut=ie.centerY||(ie.maxY+ie.minY)/2):($=ie.centerX,ut=ie.centerY);var se,Ce=this.getAnchorPoints();switch(Bt){case"circle":se=N({x:$,y:ut,r:ie.width/2},B);break;case"ellipse":se=X({x:$,y:ut,rx:ie.width/2,ry:ie.height/2},B);break;default:se=C(ie,B)}var Ee=se;return Ce.length&&(Ee||(Ee=B),Ee=this.getNearestPoint(Ce,Ee)),Ee||(Ee={x:$,y:ut}),Ee},G.prototype.getAnchorPoints=function(){var B=this.get("anchorPointsCache");if(!B){B=[];var $=this.get("shapeFactory"),ut=this.getBBox(),Bt=this.get("model"),Jt=this.getShapeCfg(Bt),ie=Bt.type,se=$.getAnchorPoints(ie,Jt)||[];Object(l.f)(se,function(Ce,Ee){var cn={x:ut.minX+Ce[0]*ut.width,y:ut.minY+Ce[1]*ut.height,anchorIndex:Ee};B.push(cn)}),this.set("anchorPointsCache",B)}return B},G.prototype.addEdge=function(B){this.get("edges").push(B)},G.prototype.lock=function(){this.set("locked",!0)},G.prototype.unlock=function(){this.set("locked",!1)},G.prototype.hasLocked=function(){return this.get("locked")},G.prototype.removeEdge=function(B){var $=this.getEdges(),ut=$.indexOf(B);ut>-1&&$.splice(ut,1)},G.prototype.clearCache=function(){this.set("bboxCache",null),this.set("anchorPointsCache",null)},G.prototype.isOnlyMove=function(B){if(!B)return!1;var $=!Object(l.s)(B.x),ut=!Object(l.s)(B.y),Bt=Object.keys(B);return Bt.length===1&&($||ut)||Bt.length===2&&$&&ut},G}(pr),Yr=function(pe){function G(){return pe!==null&&pe.apply(this,arguments)||this}return Object(n.b)(G,pe),G.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},G.prototype.getShapeCfg=function(B){var $=this.get("styles"),ut=this.get("bbox");if($&&ut){var Bt=B,Jt={r:Math.hypot(ut.height,ut.width)/2||dt.defaultCombo.size[0]/2,width:ut.width||dt.defaultCombo.size[0],height:ut.height||dt.defaultCombo.size[1]};Bt.style=Object(n.a)(Object(n.a)(Object(n.a)({},$),B.style),Jt);var ie=B.padding||dt.defaultCombo.padding;return Object(l.t)(ie)?(Jt.r+=ie,Jt.width+=2*ie,Jt.height+=2*ie):(Jt.r+=ie[0],Jt.width+=ie[1]+ie[3]||2*ie[1],Jt.height+=ie[0]+ie[2]||2*ie[0]),this.set("sizeCache",Jt),Bt}return B},G.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var B=this.get("keyShape"),$=this.get("group"),ut=An(B,$);ut.centerX=(ut.minX+ut.maxX)/2,ut.centerY=(ut.minY+ut.maxY)/2;var Bt=this.get("sizeCache"),Jt=this.get("bboxCache")||{},ie=Jt.x,se=Jt.x;return Bt?(B.get("type")==="circle"?(ut.width=2*Bt.r,ut.height=2*Bt.r):(ut.width=Bt.width,ut.height=Bt.height),ut.minX=ut.centerX-ut.width/2,ut.minY=ut.centerY-ut.height/2,ut.maxX=ut.centerX+ut.width/2,ut.maxY=ut.centerY+ut.height/2):(ut.width=ut.maxX-ut.minX,ut.height=ut.maxY-ut.minY,ut.centerX=(ut.minX+ut.maxX)/2,ut.centerY=(ut.minY+ut.maxY)/2),ut.x=ut.minX,ut.y=ut.minY,ut.x===ie&&ut.y===se||this.set("anchorPointsCache",null),ut}},G.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},G.prototype.getNodes=function(){return this.get("nodes")},G.prototype.getCombos=function(){return this.get("combos")},G.prototype.addChild=function(B){switch(B.getType()){case"node":this.addNode(B);break;case"combo":this.addCombo(B);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},G.prototype.addCombo=function(B){return this.get("combos").push(B),!0},G.prototype.addNode=function(B){return this.get("nodes").push(B),!0},G.prototype.removeChild=function(B){switch(B.getType()){case"node":this.removeNode(B);break;case"combo":this.removeCombo(B);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},G.prototype.removeCombo=function(B){if(B){var $=this.getCombos(),ut=$.indexOf(B);return ut>-1&&($.splice(ut,1),!0)}},G.prototype.removeNode=function(B){if(B){var $=this.getNodes(),ut=$.indexOf(B);return ut>-1&&($.splice(ut,1),!0)}},G.prototype.isOnlyMove=function(B){return!1},G.prototype.getBBox=function(){return this.set("bboxCanvasCache",null),this.calculateCanvasBBox()},G.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null),this.set("anchorPointsCache",null)},G.prototype.destroy=function(){if(!this.destroyed){var B=this.get("animate"),$=this.get("group");B&&$.stopAnimate(),this.clearCache(),this.set("sizeCache",null),this.set("bbox",null),$.remove(),this._cfg=null,this.destroyed=!0}},G}(Nr),Kr=function(){function pe(G){this.graph=G,this.destroyed=!1}return pe.prototype.addItem=function(G,B){var $=this,ut=this.graph,Bt=G==="vedge"?"edge":G,Jt=ut.get(Bt+"Group")||ut.get("group"),ie=Object(l.I)(Bt),se=null,Ce=ut.get(Bt+Object(l.I)("stateStyles"))||{},Ee=ut.get("default"+ie);B.stateStyles&&(Ce=B.stateStyles),Ee&&Object(l.f)(Ee,function(kn,_n){Object(l.v)(kn)&&!Object(l.m)(kn)?B[_n]=Object(l.e)({},kn,B[_n]):Object(l.m)(kn)?B[_n]=B[_n]||Object(l.c)(Ee[_n]):B[_n]=B[_n]||Ee[_n]});var cn=ut.get(Bt+"Mapper");if(cn){var xn=cn(B);xn.stateStyles&&(Ce=xn.stateStyles,delete xn.stateStyles),Object(l.f)(xn,function(kn,_n){Object(l.v)(kn)&&!Object(l.m)(kn)?B[_n]=Object(l.e)({},B[_n],kn):B[_n]=xn[_n]||B[_n]})}if(ut.emit("beforeadditem",{type:G,model:B}),G==="edge"||G==="vedge"){var _t=void 0,Yt=void 0;if(_t=B.source,Yt=B.target,_t&&Object(l.x)(_t)&&(_t=ut.findById(_t)),Yt&&Object(l.x)(Yt)&&(Yt=ut.findById(Yt)),!_t||!Yt)return void console.warn("The source or target node of edge "+B.id+" does not exist!");_t.getType&&_t.getType()==="combo"&&(B.isComboEdge=!0),Yt.getType&&Yt.getType()==="combo"&&(B.isComboEdge=!0),se=new Br({model:B,source:_t,target:Yt,styles:Ce,linkCenter:ut.get("linkCenter"),group:Jt.addGroup()})}else if(G==="node")se=new Nr({model:B,styles:Ce,group:Jt.addGroup()});else if(G==="combo"){var Se=B.children,Wt=Sr(Se,ut);B.x=Wt.x||B.x||100*Math.random(),B.y=Wt.y||B.y||100*Math.random();var ue=Jt.addGroup();ue.setZIndex(B.depth);var vn=(se=new Yr({model:B,styles:Ce,bbox:Wt,group:ue})).getModel();(Se||[]).forEach(function(kn){var _n=ut.findById(kn.id);se.addChild(_n),kn.depth=vn.depth+2}),B.collapsed&&setTimeout(function(){ut.collapseCombo(se),$.updateCombo(se,[])},250)}if(se)return ut.get(G+"s").push(se),ut.get("itemMap")[se.get("id")]=se,ut.emit("afteradditem",{item:se,model:B}),se},pe.prototype.updateItem=function(G,B){var $,ut,Bt=this.graph;if(Object(l.x)(G)&&(G=Bt.findById(G)),G&&!G.destroyed){var Jt="";G.getType&&(Jt=G.getType());var ie=Bt.get(Jt+"Mapper"),se=G.getModel(),Ce=G.isOnlyMove(B);if(ie){var Ee=ie(Object(l.e)({},se,B)),cn=Object(l.e)({},se,Ee,B);Ee.stateStyles&&(G.set("styles",cn.stateStyles),delete cn.stateStyles),Object(l.f)(cn,function(vn,kn){B[kn]=vn})}else Object(l.f)(B,function(vn,kn){se[kn]&&Object(l.v)(vn)&&!Object(l.m)(vn)&&(B[kn]=Object(n.a)(Object(n.a)({},se[kn]),B[kn]))});if(Bt.emit("beforeupdateitem",{item:G,cfg:B}),Jt==="edge"){if(B.source){var xn=B.source;Object(l.x)(xn)&&(xn=Bt.findById(xn)),G.setSource(xn)}if(B.target){var _t=B.target;Object(l.x)(_t)&&(_t=Bt.findById(_t)),G.setTarget(_t)}G.update(B)}if(Jt==="node"||Jt==="combo"){G.update(B,Ce);var Yt=G.getEdges(),Se=Vr(B);if(Se&&Jt==="node")Object(l.f)(Yt,function(vn){vn.refresh()});else if(Se&&Jt==="combo"){var Wt=G.get("shapeFactory"),ue=se.type||"circle";(se.animate===void 0||B.animate===void 0?(ut=($=Wt[ue])===null||$===void 0?void 0:$.options)===null||ut===void 0?void 0:ut.animate:se.animate||B.animate)?setTimeout(function(){if(G&&!G.destroyed){var vn=G.getKeyShape();vn&&!vn.destroyed&&Object(l.f)(Yt,function(kn){kn&&!kn.destroyed&&kn.refresh()})}},201):Object(l.f)(Yt,function(vn){vn.refresh()})}}Bt.emit("afterupdateitem",{item:G,cfg:B})}},pe.prototype.updateCombo=function(G,B){var $,ut,Bt=this.graph;if(Object(l.x)(G)&&(G=Bt.findById(G)),G&&!G.destroyed){var Jt=Sr(B,Bt);G.set("bbox",Jt),G.update({x:Jt.x,y:Jt.y});var ie=G.getEdges()||[],se=ie.length,Ce=G.getModel(),Ee=G.get("shapeFactory"),cn=Ce.type||"circle";if(Ce.animate===void 0?(ut=($=Ee[cn])===null||$===void 0?void 0:$.options)===null||ut===void 0?void 0:ut.animate:Ce.animate)setTimeout(function(){if(G&&!G.destroyed){var Yt=G.getKeyShape();if(Yt&&!Yt.destroyed)for(var Se=0;Se<se;Se++){var Wt=ie[Se];Wt&&!Wt.destroyed&&Wt.refresh()}}},201);else for(var xn=0;xn<se;xn++){var _t=ie[xn];_t&&!_t.destroyed&&_t.refresh()}}},pe.prototype.collapseCombo=function(G){var B=this.graph;Object(l.x)(G)&&(G=B.findById(G));var $=G.getChildren();$.nodes.forEach(function(ut){B.hideItem(ut)}),$.combos.forEach(function(ut){B.hideItem(ut)})},pe.prototype.expandCombo=function(G){var B=this.graph;Object(l.x)(G)&&(G=B.findById(G));var $=G.getChildren();$.nodes.forEach(function(ut){B.showItem(ut)}),$.combos.forEach(function(ut){ut.getModel().collapsed?ut.show():B.showItem(ut)})},pe.prototype.removeItem=function(G){var B=this,$=this.graph;if(Object(l.x)(G)&&(G=$.findById(G)),G&&!G.destroyed){var ut=Object(l.c)(G.getModel());$.emit("beforeremoveitem",{item:ut});var Bt="";G.getType&&(Bt=G.getType());var Jt=$.get(Bt+"s"),ie=Jt.indexOf(G);if(ie>-1&&Jt.splice(ie,1),Bt==="edge"){var se=$.get("v"+Bt+"s"),Ce=se.indexOf(G);Ce>-1&&se.splice(Ce,1)}var Ee=G.get("id");delete $.get("itemMap")[Ee];var cn=$.get("comboTrees"),xn=G.get("id");if(Bt==="node"){var _t=G.getModel().comboId;if(cn){var Yt=cn,Se=!1;cn.forEach(function(Un){Se||Gn(Un,function(Ze){if(Ze.id===xn&&Yt){var Te=Yt.indexOf(Ze);return Yt.splice(Te,1),Se=!0,!1}return Yt=Ze.children,!0})})}for(var Wt=(_n=G.getEdges()).length-1;Wt>=0;Wt--)$.removeItem(_n[Wt],!1);_t&&$.updateCombo(_t)}else if(Bt==="combo"){var ue,vn=G.getModel().parentId,kn=!1;(cn||[]).forEach(function(Un){kn||Gn(Un,function(Ze){return Ze.id!==xn||(ue=Ze,kn=!0,!1)})}),ue.removed=!0,ue&&ue.children&&ue.children.forEach(function(Un){B.removeItem(Un.id)});var _n;for(Wt=(_n=G.getEdges()).length;Wt>=0;Wt--)$.removeItem(_n[Wt],!1);vn&&$.updateCombo(vn)}G.destroy(),$.emit("afterremoveitem",{item:ut})}},pe.prototype.setItemState=function(G,B,$){var ut=this.graph,Bt=B;Object(l.x)($)&&(Bt=B+":"+$),G.hasState(Bt)===$&&$||Object(l.x)($)&&G.hasState(Bt)||(ut.emit("beforeitemstatechange",{item:G,state:Bt,enabled:$}),G.setState(B,$),ut.autoPaint(),ut.emit("afteritemstatechange",{item:G,state:Bt,enabled:$}))},pe.prototype.priorityState=function(G,B){var $=this.graph,ut=G;Object(l.x)(G)&&(ut=$.findById(G)),this.setItemState(ut,B,!1),this.setItemState(ut,B,!0)},pe.prototype.clearItemStates=function(G,B){var $=this.graph;Object(l.x)(G)&&(G=$.findById(G)),$.emit("beforeitemstatesclear",{item:G,states:B}),G.clearStates(B),$.emit("afteritemstatesclear",{item:G,states:B})},pe.prototype.refreshItem=function(G){var B=this.graph;Object(l.x)(G)&&(G=B.findById(G)),B.emit("beforeitemrefresh",{item:G}),G.refresh(),B.emit("afteritemrefresh",{item:G})},pe.prototype.addCombos=function(G,B){var $=this,ut=this.graph;(G||[]).forEach(function(Jt){Xn(Jt,function(ie){var se;return B.forEach(function(Ce){Ce.id===ie.id&&(Ce.children=ie.children,Ce.depth=ie.depth,se=Ce)}),se&&$.addItem("combo",se),!0})});var Bt=ut.get("comboGroup");Bt&&Bt.sort()},pe.prototype.changeItemVisibility=function(G,B){var $=this,ut=this.graph;if(Object(l.x)(G)&&(G=ut.findById(G)),G){if(ut.emit("beforeitemvisibilitychange",{item:G,visible:B}),G.changeVisibility(B),G.getType&&G.getType()==="node"){var Bt=G.getEdges();Object(l.f)(Bt,function(Ee){(!B||Ee.get("source").isVisible()&&Ee.get("target").isVisible())&&$.changeItemVisibility(Ee,B)})}else if(G.getType&&G.getType()==="combo"){var Jt=ut.get("comboTrees"),ie=G.get("id"),se=[],Ce=!1;(Jt||[]).forEach(function(Ee){Ce||Ee.children&&Ee.children.length!==0&&Gn(Ee,function(cn){return cn.id!==ie||(se=cn.children,Ce=!0,!1)})}),se&&se.forEach(function(Ee){var cn=ut.findById(Ee.id);$.changeItemVisibility(cn,B)}),Bt=G.getEdges(),Object(l.f)(Bt,function(Ee){(!B||Ee.get("source").isVisible()&&Ee.get("target").isVisible())&&$.changeItemVisibility(Ee,B)})}return ut.emit("afteritemvisibilitychange",{item:G,visible:B}),G}console.warn("The item to be shown or hidden does not exist!")},pe.prototype.destroy=function(){this.graph=null,this.destroyed=!0},pe}(),ni=null,fi=function(){function pe(G){this.graph=G,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return pe.checkCache=function(G,B,$){if($[B]){var ut=$[B].indexOf(G);ut>=0&&$[B].splice(ut,1)}},pe.cacheState=function(G,B,$){$[B]||($[B]=[]),$[B].push(G)},pe.prototype.updateState=function(G,B,$){var ut=this,Bt=pe.checkCache,Jt=pe.cacheState;if(!G.destroyed){var ie=this.cachedStates,se=ie.enabled,Ce=ie.disabled;$?(Bt(G,B,Ce),Jt(G,B,se)):(Bt(G,B,se),Jt(G,B,Ce)),ni&&clearTimeout(ni),ni=setTimeout(function(){ni=null,ut.updateGraphStates()},16)}},pe.prototype.updateStates=function(G,B,$){var ut=this;Object(l.x)(B)?this.updateState(G,B,$):B.forEach(function(Bt){ut.updateState(G,Bt,$)})},pe.prototype.updateGraphStates=function(){var G=this.graph.get("states"),B=this.cachedStates;Object(l.f)(B.disabled,function($,ut){G[ut]&&(G[ut]=G[ut].filter(function(Bt){return $.indexOf(Bt)<0&&!$.destroyed}))}),Object(l.f)(B.enabled,function($,ut){if(G[ut]){var Bt={};G[ut].forEach(function(Jt){Jt.destroyed||(Bt[Jt.get("id")]=!0)}),$.forEach(function(Jt){if(!Jt.destroyed){var ie=Jt.get("id");Bt[ie]||(Bt[ie]=!0,G[ut].push(Jt))}})}else G[ut]=$}),this.graph.emit("graphstatechange",{states:G}),this.cachedStates={enabled:{},disabled:{}}},pe.prototype.destroy=function(){this.graph=null,this.cachedStates=null,ni&&clearTimeout(ni),ni=null,this.destroyed=!0},pe}(),$r=e(31),ci=function(G,B){return G&&B?G.replace(/\\?\{([^{}]+)\}/g,function($,ut){if($.charAt(0)==="\\")return $.slice(1);var Bt=B[ut];return Bt===0&&(Bt="0"),Bt||""}):G},Qr=function(G){var B=[];if(G.length<2)throw new Error("point length must largn than 2, now it's "+G.length);for(var $=0,ut=G;$<ut.length;$++){var Bt=ut[$],Jt=Bt.x,ie=Bt.y;B.push(Jt),B.push(ie)}var se=Object($r.a)(B);return se.unshift(["M",G[0].x,G[0].y]),se},gi=function(G,B,$,ut){$===void 0&&($=0),ut===void 0&&(ut=0);var Bt={x:(1-$)*G.x+$*B.x,y:(1-$)*G.y+$*B.y},Jt=[0,0];d.c.normalize(Jt,[B.x-G.x,B.y-G.y]),Jt&&(Jt[0]||Jt[1])||(Jt=[0,0]);var ie=[-Jt[1]*ut,Jt[0]*ut];return Bt.x+=ie[0],Bt.y+=ie[1],Bt},Oi=function(G,B){var $=G.length;if(!$)return"";for(var ut="",Bt=0;Bt<$;Bt++){var Jt=G[Bt];ut+=ci(Bt===0?"M{x} {y}":"L{x} {y}",Jt)}return B&&(ut+="Z"),ut},bi=function(G){var B=[];return G.forEach(function($){if($[0]!=="A")for(var ut=1;ut<$.length;ut+=2)B.push([$[ut],$[ut+1]]);else{var Bt=$.length;B.push([$[Bt-2],$[Bt-1]])}}),B},_i=function(G){if(G.length<2)throw new Error("point length must largn than 2, now it's "+G.length);var B=G[0],$=G[1],ut=G[G.length-1],Bt=G[G.length-2];G.unshift(ut),G.unshift(Bt),G.push(B),G.push($);for(var Jt=[],ie=1;ie<G.length-2;ie+=1){var se=G[ie-1].x,Ce=G[ie-1].y,Ee=G[ie].x,cn=G[ie].y,xn=G[ie+1].x,_t=G[ie+1].y,Yt=Ee+(xn-se)/6,Se=cn+(_t-Ce)/6,Wt=xn-((ie!==G.length-2?G[ie+2].x:xn)-Ee)/6,ue=_t-((ie!==G.length-2?G[ie+2].y:_t)-cn)/6;Jt.push(["C",Yt,Se,Wt,ue,xn,_t])}return Jt.unshift(["M",ut.x,ut.y]),Jt},Qi=function(G,B){return d.c.scale([0,0],d.c.normalize([0,0],G),B)},io=function(G,B){var $=[G[1]-B[1],B[0]-G[0]],ut=Math.sqrt($[0]*$[0]+$[1]*$[1]);if(ut===0)throw new Error("p0 should not be equal to p1");return[$[0]/ut,$[1]/ut]},Wi=function(G,B){return[B[0]-G[0],B[1]-G[1]]};function Zi(pe,G){if(!pe||pe.length<1)return"";if(pe.length===1)return function(se){var Ce=[se[0][0],se[0][1]-G],Ee=[se[0][0],se[0][1]+G];return"M "+Ce+" A "+G+","+G+",0,0,0,"+Ee+" A "+G+","+G+",0,0,0,"+Ce}(pe);if(pe.length===2)return function(se){var Ce=d.c.scale([0,0],io(se[0],se[1]),G),Ee=d.c.scale([0,0],Ce,-1),cn=d.c.add([0,0],se[0],Ce),xn=d.c.add([0,0],se[1],Ce),_t=d.c.add([0,0],se[1],Ee),Yt=d.c.add([0,0],se[0],Ee);return"M "+cn+" L "+xn+" A "+[G,G,"0,0,0",_t].join(",")+" L "+Yt+" A "+[G,G,"0,0,0",cn].join(",")}(pe);for(var B=new Array(pe.length),$=0;$<B.length;++$){var ut=$===0?pe[pe.length-1]:pe[$-1],Bt=pe[$],Jt=d.c.scale([0,0],io(ut,Bt),G);B[$]=[d.c.add([0,0],ut,Jt),d.c.add([0,0],Bt,Jt)]}var ie="A "+[G,G,"0,0,0,"].join(",");return(B=B.map(function(se,Ce){var Ee="";return Ce===0&&(Ee="M "+B[B.length-1][1]+" "),Ee+=ie+se[0]+" L "+se[1]})).join(" ")}function Pi(pe,G){var B,$,ut,Bt=pe.length;if(!pe||Bt<1)return"";if(Bt===1)return $=[(B=pe)[0][0],B[0][1]-G],ut=[B[0][0],B[0][1]+G],"M "+$+" A "+[G,G,"0,0,0",ut].join(",")+" A "+[G,G,"0,0,0",$].join(",");if(Bt===2)return function(Ee){var cn=Wi(Ee[0],Ee[1]),xn=Qi(cn,G),_t=d.c.add([0,0],Ee[0],d.c.scale([0,0],xn,-1)),Yt=d.c.add([0,0],Ee[1],xn),Se=1.2*G,Wt=Qi(d.c.normalize([0,0],cn),Se),ue=d.c.scale([0,0],Wt,-1),vn=d.c.add([0,0],_t,ue),kn=d.c.add([0,0],Yt,ue),_n=d.c.add([0,0],_t,Wt);return"M "+_t+" C "+[vn,kn,Yt].join(",")+" S "+[_n,_t].join(",")+" Z"}(pe);for(var Jt=pe.map(function(Ee,cn){var xn=pe[(cn+1)%Bt];return{p:Ee,v:d.c.normalize([0,0],Wi(Ee,xn))}}),ie=0;ie<Jt.length;++ie){var se=ie>0?ie-1:Bt-1,Ce=d.c.normalize([0,0],d.c.add([0,0],Jt[se].v,d.c.scale([0,0],Jt[ie].v,-1)));Jt[ie].p=d.c.add([0,0],Jt[ie].p,d.c.scale([0,0],Ce,G))}return Jt.map(function(Ee){var cn=Ee.p;return{x:cn[0],y:cn[1]}})}var no=function(G,B,$){return(G.y-$.y)*(B.x-$.x)-(G.x-$.x)*(B.y-$.y)},Mo=function(G){var B=G.map(function(Jt){return{x:Jt.getModel().x,y:Jt.getModel().y}});if(B.sort(function(Jt,ie){return Jt.x===ie.x?Jt.y-ie.y:Jt.x-ie.x}),B.length===1)return B;for(var $=[],ut=0;ut<B.length;ut++){for(;$.length>=2&&no($[$.length-2],$[$.length-1],B[ut])<=0;)$.pop();$.push(B[ut])}var Bt=[];for(ut=B.length-1;ut>=0;ut--){for(;Bt.length>=2&&no(Bt[Bt.length-2],Bt[Bt.length-1],B[ut])<=0;)Bt.pop();Bt.push(B[ut])}return Bt.pop(),$.pop(),$.concat(Bt)},ao={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function uo(pe,G,B){var $=!1,ut=function(se,Ce){return G.cells[se+Ce*G.width]},Bt=function(se,Ce){var Ee=0;return ut(se-1,Ce-1)>=B&&(Ee+=1),ut(se,Ce-1)>B&&(Ee+=2),ut(se-1,Ce)>B&&(Ee+=4),ut(se,Ce)>B&&(Ee+=8),Ee},Jt=function(se,Ce){for(var Ee,cn,xn=se,_t=Ce,Yt=0;Yt<G.width*G.height;Yt++){if(Ee=xn,cn=_t,pe.findIndex(function(Wt){return Wt.x===xn&&Wt.y===_t})>-1){if(pe[0].x===xn&&pe[0].y===_t)return!0}else pe.push({x:xn,y:_t});var Se=Bt(xn,_t);switch(Se){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:xn++;break;case 12:case 14:case 4:xn--;break;case 6:Ee===0&&(cn===-1?xn-=1:xn+=1);break;case 1:case 13:case 5:_t--;break;case 9:Ee===1&&(cn===0?_t-=1:_t+=1);break;case 10:case 8:case 11:_t++;break;default:return console.warn("Marching squares invalid state: "+Se),!0}}};this.march=function(){for(var ie=0;ie<G.width&&!$;ie+=1)for(var se=0;se<G.height&&!$;se+=1)ut(ie,se)>B&&Bt(ie,se)!==15&&($=Jt(ie,se));return $}}var xo=function(G,B){var $=Number.POSITIVE_INFINITY,ut=null;return G.forEach(function(Bt){var Jt=P(Bt,B);Jt>=0&&Jt<$&&(ut=Bt,$=Jt)}),ut};function oe(pe,G,B,$,ut){var Bt=function(Jt,ie,se){var Ce=null,Ee=Number.POSITIVE_INFINITY;return ie.forEach(function(cn){var xn={x:Jt.getModel().x,y:Jt.getModel().y},_t={x:cn.getModel().x,y:cn.getModel().y},Yt=k(xn,_t),Se=new q(xn.x,xn.y,_t.x,_t.y),Wt=se.reduce(function(ue,vn){return P(vn,Se)>0?ue+1:ue},0);Yt*Math.pow(Wt+1,2)<Ee&&(Ce=cn,Ee=Yt*Math.pow(Wt+1,2))}),Ce}(pe,B,G);return Bt===null?[]:function(Jt){for(var ie=[];Jt.length>0;){var se=Jt.pop();if(Jt.length===0){ie.push(se);break}var Ce=Jt.pop(),Ee=new q(se.x1,se.y1,Ce.x2,Ce.y2);xo(G,Ee)?(ie.push(se),Jt.push(Ce)):Jt.push(Ee)}return ie}(function(Jt,ie,se,Ce){var Ee=[],cn=[];cn.push(Jt);for(var xn=!0,_t=0,Yt=function(vn,kn){var _n=!1;return kn.forEach(function(Un){_n||(g(vn,{x:Un.x1,y:Un.y1})||g(vn,{x:Un.x2,y:Un.y2}))&&(_n=!0)}),_n},Se=function(vn,kn){for(var _n=0,Un=kn;_n<Un.length;_n++){var Ze=Un[_n].getBBox(),Te=[[Ze.x,Ze.y],[Ze.x+Ze.width,Ze.y],[Ze.x,Ze.y+Ze.height],[Ze.x+Ze.width,Ze.y+Ze.height]];if(vt(Te,vn.x,vn.y))return!0}return!1};xn&&_t<se;){xn=!1;for(var Wt=function(){var vn=cn.pop(),kn=xo(ie,vn);if(kn){var _n=_(kn,vn),Un=_n[0];if(_n[1]===2){var Ze=function(R){for(var mt=Ce,$t=Oe(kn,mt,Un,R),me=Yt($t,cn)||Yt($t,Ee),Zt=Se($t,ie);!me&&Zt&&mt>=1;)$t=Oe(kn,mt/=1.5,Un,R),me=Yt($t,cn)||Yt($t,Ee),Zt=Se($t,ie);!$t||me||R&&Zt||(cn.push(new q(vn.x1,vn.y1,$t.x,$t.y)),cn.push(new q($t.x,$t.y,vn.x2,vn.y2)),xn=!0)};Ze(!0),xn||Ze(!1)}}xn||Ee.push(vn),_t+=1};!xn&&cn.length;)Wt()}for(;cn.length;)Ee.push(cn.pop());return Ee}(new q(pe.getModel().x,pe.getModel().y,Bt.getModel().x,Bt.getModel().y),G,$,ut))}var Kt=function(G,B,$){var ut=Object.assign(ao,$),Bt=Y(G.map(function(Ze){return{x:Ze.getModel().x,y:Ze.getModel().y}}));G=G.sort(function(Ze,Te){return k({x:Ze.getModel().x,y:Ze.getModel().y},Bt)-k({x:Te.getModel().x,y:Te.getModel().y},Bt)});var Jt=[],ie=[];G.forEach(function(Ze){oe(Ze,B,Jt,ut.maxRoutingIterations,ut.morphBuffer).forEach(function(Te){ie.push(Te)}),Jt.push(Ze)});for(var se,Ce,Ee,cn,xn,_t=function(Ze,Te,R){var mt={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},$t=[];Ze.forEach(function(he){$t.push(he.getBBox())}),Te.forEach(function(he){$t.push(he.getBBox())});for(var me=0,Zt=$t;me<Zt.length;me++){var ve=Zt[me];mt.minX=(ve.minX<mt.minX?ve.minX:mt.minX)-R,mt.minY=(ve.minY<mt.minY?ve.minY:mt.minY)-R,mt.maxX=(ve.maxX>mt.maxX?ve.maxX:mt.maxX)+R,mt.maxY=(ve.maxY>mt.maxY?ve.maxY:mt.maxY)+R}return mt.width=mt.maxX-mt.minX,mt.height=mt.maxY-mt.minY,mt.x=mt.minX,mt.y=mt.minY,mt}(G,ie,ut.nodeR0),Yt=(se=_t.width,Ce=_t.height,Ee=ut.pixelGroupSize,cn=Math.ceil(se/Ee),xn=Math.ceil(Ce/Ee),{cells:new Float32Array(Math.max(0,cn*xn)).fill(0),width:cn,height:xn}),Se=[],Wt=[],ue=0;ue<ut.maxMarchingIterations;ue++)if(te(G,B,ie,_t,Yt,ut),Wt=[],new uo(Se=[],Yt,ut.threshold).march()){var vn=Se.map(function(Ze){return{x:Math.round(Ze.x*ut.pixelGroupSize+_t.minX),y:Math.round(Ze.y*ut.pixelGroupSize+_t.minY)}});if(vn){var kn=vn.length;if(ut.skip>1)for(kn=Math.floor(vn.length/ut.skip);kn<3&&ut.skip>1;)ut.skip-=1,kn=Math.floor(vn.length/ut.skip);for(var _n=0,Un=0;Un<kn;Un+=1,_n+=ut.skip)Wt.push({x:vn[_n].x,y:vn[_n].y})}if(Wt&&function(){for(var Ze=0,Te=G;Ze<Te.length;Ze++){var R=Te[Ze],mt=Wt.map(function($t){return[$t.x,$t.y]});if(!vt(mt,R.getBBox().centerX,R.getBBox().centerY))return!1}return!0}())return Wt;if(ut.threshold*=.9,ue<=.5*ut.maxMarchingIterations)ut.memberInfluenceFactor*=1.2,ut.edgeInfluenceFactor*=1.2;else{if(!(ut.nonMemberInfluenceFactor!==0&&B.length>0))break;ut.nonMemberInfluenceFactor*=.8}}return Wt};function te(pe,G,B,$,ut,Bt){function Jt(xn,_t){var Yt=Math.floor((xn-_t)/Bt.pixelGroupSize);return Yt<0?0:Yt}function ie(xn,_t){return xn*Bt.pixelGroupSize+_t}var se=(Bt.nodeR0-Bt.nodeR1)*(Bt.nodeR0-Bt.nodeR1),Ce=(Bt.edgeR0-Bt.edgeR1)*(Bt.edgeR0-Bt.edgeR1),Ee=function(_t,Yt){return[Math.min(Jt(_t.minX,Yt+$.minX),ut.width),Math.min(Jt(_t.minY,Yt+$.minY),ut.height),Math.min(Jt(_t.maxX,-Yt+$.minX),ut.width),Math.min(Jt(_t.maxY,-Yt+$.minY),ut.height)]},cn=function(_t,Yt){for(var Se=_t.getBBox(),Wt=Ee(Se,Bt.nodeR1),ue=Wt[0],vn=Wt[1],kn=Wt[2],_n=Wt[3],Un=vn;Un<_n;Un+=1)for(var Ze=ue;Ze<kn;Ze+=1)if(!(Yt<0&&ut[Ze+Un*ut.width]<=0)){var Te=ie(Ze,$.minX),R=ie(Un,$.minY),mt=F({x:Te,y:R},{x:Se.minX,y:Se.minY,width:Se.width,height:Se.height});if(mt<Math.pow(Bt.nodeR1,2)){var $t=Math.sqrt(mt)-Bt.nodeR1;ut.cells[Ze+Un*ut.width]+=Yt*$t*$t}}};Bt.nodeInfluenceFactor&&pe.forEach(function(xn){cn(xn,Bt.nodeInfluenceFactor/se)}),Bt.edgeInfluenceFactor&&B.forEach(function(xn){(function(_t,Yt){for(var Se=_t.getBBox(),Wt=Ee(Se,Bt.edgeR1),ue=Wt[0],vn=Wt[1],kn=Wt[2],_n=Wt[3],Un=vn;Un<_n;Un+=1)for(var Ze=ue;Ze<kn;Ze+=1)if(!(Yt<0&&ut.cells[Ze+Un*ut.width]<=0)){var Te=ie(Ze,$.minX),R=ie(Un,$.minY),mt=h({x:Te,y:R},_t);if(mt<Math.pow(Bt.edgeR1,2)){var $t=Math.sqrt(mt)-Bt.edgeR1;ut.cells[Ze+Un*ut.width]+=Yt*$t*$t}}})(xn,Bt.edgeInfluenceFactor/Ce)}),Bt.negativeNodeInfluenceFactor&&G.forEach(function(xn){cn(xn,Bt.negativeNodeInfluenceFactor/se)})}function Oe(pe,G,B,$){var ut=pe.getBBox(),Bt=B[0],Jt=B[1],ie=B[2],se=B[3],Ce={topLeft:{x:ut.minX-G,y:ut.minY-G},topRight:{x:ut.maxX+G,y:ut.minY-G},bottomLeft:{x:ut.minX-G,y:ut.maxY+G},bottomRight:{x:ut.maxX+G,y:ut.maxY+G}},Ee=ut.height*ut.width;function cn(xn,_t){return ut.width*(.5*(xn.y-ut.minY+(_t.y-ut.minY)))}if(Jt)return Bt?$?Ce.topLeft:Ce.bottomRight:ie?$?Ce.bottomLeft:Ce.topRight:cn(Jt,se)<.5*Ee?Jt.y>se.y?$?Ce.topLeft:Ce.bottomRight:$?Ce.topRight:Ce.bottomLeft:Jt.y<se.y?$?Ce.bottomLeft:Ce.topRight:$?Ce.bottomRight:Ce.topLeft;if(se){if(Bt)return $?Ce.topRight:Ce.bottomLeft;if(ie)return $?Ce.bottomRight:Ce.topLeft}return cn(Bt,ie)<.5*Ee?Bt.x>ie.x?$?Ce.topLeft:Ce.bottomRight:$?Ce.bottomLeft:Ce.topRight:Bt.x<ie.x?$?Ce.topRight:Ce.bottomLeft:$?Ce.bottomRight:Ce.topLeft}var Qe=function(){function pe(G,B){this.cfg=Object(l.e)(this.getDefaultCfg(),B),this.graph=G,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function($){return Object(l.x)($)?G.findById($):$}),this.nonMembers=this.cfg.nonMembers.map(function($){return Object(l.x)($)?G.findById($):$}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return pe.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},pe.prototype.setPadding=function(){var G=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+G:10+G,this.cfg.bubbleCfg={nodeR0:this.padding-G,nodeR1:this.padding-G,morphBuffer:this.padding-G}},pe.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},pe.prototype.calcPath=function(G,B){var $,ut,Bt;switch(this.type){case"round-convex":Bt=Zi(($=Mo(G)).map(function(Jt){return[Jt.x,Jt.y]}),this.padding),ut=Object($r.b)(Bt);break;case"smooth-convex":($=Mo(G)).length===2?(Bt=Zi($.map(function(Jt){return[Jt.x,Jt.y]}),this.padding),ut=Object($r.b)(Bt)):$.length>2&&(Bt=Pi($.map(function(Jt){return[Jt.x,Jt.y]}),this.padding),ut=_i(Bt));break;case"bubble":ut=($=Kt(G,B,this.cfg.bubbleCfg)).length>=2&&_i($)}return ut},pe.prototype.render=function(){this.group.addShape("path",{attrs:Object(n.a)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id}),this.group.toBack()},pe.prototype.addMember=function(G){if(G){Object(l.x)(G)&&(G=this.graph.findById(G)),this.members.push(G);var B=this.nonMembers.indexOf(G);return B>-1&&this.nonMembers.splice(B,1),this.updateData(this.members,this.nonMembers),!0}},pe.prototype.addNonMember=function(G){if(G){Object(l.x)(G)&&(G=this.graph.findById(G)),this.nonMembers.push(G);var B=this.members.indexOf(G);return B>-1&&this.members.splice(B,1),this.updateData(this.members,this.nonMembers),!0}},pe.prototype.removeMember=function(G){if(G){Object(l.x)(G)&&(G=this.graph.findById(G));var B=this.members.indexOf(G);return B>-1&&(this.members.splice(B,1),this.updateData(this.members,this.nonMembers),!0)}},pe.prototype.removeNonMember=function(G){if(G){Object(l.x)(G)&&(G=this.graph.findById(G));var B=this.nonMembers.indexOf(G);return B>-1&&(this.nonMembers.splice(B,1),this.updateData(this.members,this.nonMembers),!0)}},pe.prototype.updateData=function(G,B){var $=this;this.group.findById(this.id).remove(),G&&(this.members=G.map(function(ut){return Object(l.x)(ut)?$.graph.findById(ut):ut})),B&&(this.nonMembers=B.map(function(ut){return Object(l.x)(ut)?$.graph.findById(ut):ut})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},pe.prototype.updateStyle=function(G){this.group.findById(this.id).attr(Object(n.a)({},G))},pe.prototype.updateCfg=function(G){var B=this;this.cfg=Object(l.e)(this.cfg,G),this.id=this.cfg.id,this.group=this.cfg.group,G.members&&(this.members=this.cfg.members.map(function($){return Object(l.x)($)?B.graph.findById($):$})),G.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function($){return Object(l.x)($)?B.graph.findById($):$})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},pe.prototype.contain=function(G){var B,$,ut=this,Bt=(B=Object(l.x)(G)?this.graph.findById(G):G).getKeyShape();if(B.get("type")==="path")$=bi(Bt.attr("path"));else{var Jt=Bt.getCanvasBBox();$=[[Jt.minX,Jt.minY],[Jt.maxX,Jt.minY],[Jt.maxX,Jt.maxY],[Jt.minX,Jt.maxY]]}return $=$.map(function(ie){var se=ut.graph.getPointByCanvas(ie[0],ie[1]);return[se.x,se.y]}),At($,bi(this.path))},pe.prototype.destroy=function(){this.group.remove(),this.cfg=null},pe}(),On=d.a.transform,Vn=function(pe){function G(B){var $=pe.call(this)||this;return $.cfg=Object(l.e)($.getDefaultCfg(),B),$.init(),$.animating=!1,$.destroyed=!1,$.cfg.enabledStack&&($.undoStack=new M.Stack($.cfg.maxStep),$.redoStack=new M.Stack($.cfg.maxStep)),$}return Object(n.b)(G,pe),G.prototype.init=function(){this.initCanvas();var B=new ye(this),$=new gt(this),ut=new Kr(this),Bt=new fi(this);this.set({viewController:B,modeController:$,itemController:ut,stateController:Bt}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},G.prototype.initGroups=function(){var B=this.get("canvas"),$=this.get("canvas").get("el").id,ut=B.addGroup({id:$+"-root",className:dt.rootContainerClassName});if(this.get("groupByTypes")){var Bt=ut.addGroup({id:$+"-edge",className:dt.edgeContainerClassName}),Jt=ut.addGroup({id:$+"-node",className:dt.nodeContainerClassName}),ie=ut.addGroup({id:$+"-combo",className:dt.comboContainerClassName});ie.toBack(),this.set({nodeGroup:Jt,edgeGroup:Bt,comboGroup:ie})}var se=ut.addGroup({id:$+"-delegate",className:dt.delegateContainerClassName});this.set({delegateGroup:se}),this.set("group",ut)},G.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[]}},G.prototype.set=function(B,$){return Object(l.w)(B)?this.cfg=Object(n.a)(Object(n.a)({},this.cfg),B):this.cfg[B]=$,this},G.prototype.get=function(B){return this.cfg[B]},G.prototype.getGroup=function(){return this.get("group")},G.prototype.getContainer=function(){return this.get("container")},G.prototype.getMinZoom=function(){return this.get("minZoom")},G.prototype.setMinZoom=function(B){return this.set("minZoom",B)},G.prototype.getMaxZoom=function(){return this.get("maxZoom")},G.prototype.setMaxZoom=function(B){return this.set("maxZoom",B)},G.prototype.getWidth=function(){return this.get("width")},G.prototype.getHeight=function(){return this.get("height")},G.prototype.clearItemStates=function(B,$){Object(l.x)(B)&&(B=this.findById(B));var ut=this.get("itemController");$||($=B.get("states")),ut.clearItemStates(B,$),this.get("stateController").updateStates(B,$,!1)},G.prototype.node=function(B){typeof B=="function"&&this.set("nodeMapper",B)},G.prototype.edge=function(B){typeof B=="function"&&this.set("edgeMapper",B)},G.prototype.combo=function(B){typeof B=="function"&&this.set("comboMapper",B)},G.prototype.findById=function(B){return this.get("itemMap")[B]},G.prototype.find=function(B,$){var ut,Bt=this.get(B+"s");return Object(l.f)(Bt,function(Jt,ie){if($(Jt,ie))return ut=Jt}),ut},G.prototype.findAll=function(B,$){var ut=[];return Object(l.f)(this.get(B+"s"),function(Bt,Jt){$(Bt,Jt)&&ut.push(Bt)}),ut},G.prototype.findAllByState=function(B,$){return this.findAll(B,function(ut){return ut.hasState($)})},G.prototype.translate=function(B,$){var ut=this.get("group"),Bt=Object(l.c)(ut.getMatrix());Bt||(Bt=[1,0,0,0,1,0,0,0,1]),Bt=On(Bt,[["t",B,$]]),ut.setMatrix(Bt),this.emit("viewportchange",{action:"translate",matrix:ut.getMatrix()}),this.autoPaint()},G.prototype.moveTo=function(B,$){var ut=this.get("group");Vt(ut,{x:B,y:$}),this.emit("viewportchange",{action:"move",matrix:ut.getMatrix()})},G.prototype.fitView=function(B){B&&this.set("fitViewPadding",B),this.get("viewController").fitView(),this.autoPaint()},G.prototype.fitCenter=function(){this.get("viewController").fitCenter(),this.autoPaint()},G.prototype.addBehaviors=function(B,$){return this.get("modeController").manipulateBehaviors(B,$,!0),this},G.prototype.removeBehaviors=function(B,$){return this.get("modeController").manipulateBehaviors(B,$,!1),this},G.prototype.updateBehavior=function(B,$,ut){return this.get("modeController").updateBehavior(B,$,ut),this},G.prototype.zoom=function(B,$){var ut=this.get("group"),Bt=Object(l.c)(ut.getMatrix()),Jt=this.get("minZoom"),ie=this.get("maxZoom");Bt||(Bt=[1,0,0,0,1,0,0,0,1]),Bt=On(Bt,$?[["t",-$.x,-$.y],["s",B,B],["t",$.x,$.y]]:[["s",B,B]]),Jt&&Bt[0]<Jt||ie&&Bt[0]>ie||(ut.setMatrix(Bt),this.emit("viewportchange",{action:"zoom",matrix:Bt}),this.autoPaint())},G.prototype.zoomTo=function(B,$){var ut=B/this.getZoom();this.zoom(ut,$)},G.prototype.focusItem=function(B,$,ut){var Bt=this.get("viewController"),Jt=!1;$?Jt=!0:$===void 0&&(Jt=this.get("animate"));var ie={};ut?ie=ut:ut===void 0&&(ie=this.get("animateCfg")),Bt.focus(B,Jt,ie),this.autoPaint()},G.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},G.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},G.prototype.getPointByClient=function(B,$){return this.get("viewController").getPointByClient(B,$)},G.prototype.getClientByPoint=function(B,$){return this.get("viewController").getClientByPoint(B,$)},G.prototype.getPointByCanvas=function(B,$){return this.get("viewController").getPointByCanvas(B,$)},G.prototype.getCanvasByPoint=function(B,$){return this.get("viewController").getCanvasByPoint(B,$)},G.prototype.showItem=function(B,$){$===void 0&&($=!0);var ut=this.get("itemController").changeItemVisibility(B,!0);if($&&this.get("enabledStack")){var Bt=ut.getID(),Jt={},ie={};switch(ut.getType()){case"node":Jt.nodes=[{id:Bt,visible:!1}],ie.nodes=[{id:Bt,visible:!0}];break;case"edge":Jt.nodes=[{id:Bt,visible:!1}],ie.edges=[{id:Bt,visible:!0}];break;case"combo":Jt.nodes=[{id:Bt,visible:!1}],ie.combos=[{id:Bt,visible:!0}]}this.pushStack("visible",{before:Jt,after:ie})}},G.prototype.hideItem=function(B,$){$===void 0&&($=!0);var ut=this.get("itemController").changeItemVisibility(B,!1);if($&&this.get("enabledStack")){var Bt=ut.getID(),Jt={},ie={};switch(ut.getType()){case"node":Jt.nodes=[{id:Bt,visible:!0}],ie.nodes=[{id:Bt,visible:!1}];break;case"edge":Jt.nodes=[{id:Bt,visible:!0}],ie.edges=[{id:Bt,visible:!1}];break;case"combo":Jt.nodes=[{id:Bt,visible:!0}],ie.combos=[{id:Bt,visible:!1}]}this.pushStack("visible",{before:Jt,after:ie})}},G.prototype.refreshItem=function(B){this.get("itemController").refreshItem(B)},G.prototype.setAutoPaint=function(B){this.set("autoPaint",B),this.get("canvas").set("autoDraw",B)},G.prototype.remove=function(B,$){$===void 0&&($=!0),this.removeItem(B,$)},G.prototype.removeItem=function(B,$){$===void 0&&($=!0);var ut=B;if(Object(l.x)(B)&&(ut=this.findById(B)),!ut&&Object(l.x)(B))console.warn("The item to be removed does not exist!");else if(ut){var Bt="";if(ut.getType&&(Bt=ut.getType()),$&&this.get("enabledStack")){var Jt=Object(n.a)(Object(n.a)({},ut.getModel()),{itemType:Bt}),ie={};switch(Bt){case"node":ie.nodes=[Jt],ie.edges=[];for(var se=ut.getEdges(),Ce=se.length-1;Ce>=0;Ce--)ie.edges.push(Object(n.a)(Object(n.a)({},se[Ce].getModel()),{itemType:"edge"}));break;case"edge":ie.edges=[Jt];break;case"combo":ie.combos=[Jt]}this.pushStack("delete",{before:ie,after:{}})}if(Bt==="node"&&ut.getModel().comboId&&this.updateComboTree(ut),this.get("itemController").removeItem(ut),Bt==="combo"){var Ee=er(this.get("comboTrees"));this.set("comboTrees",Ee)}}},G.prototype.addItem=function(B,$,ut,Bt){ut===void 0&&(ut=!0),Bt===void 0&&(Bt=!0);var Jt=this.get("comboSorted");this.set("comboSorted",Jt&&!Bt);var ie=this.get("itemController");if(!$.id||!this.findById($.id)){var se,Ce=this.get("comboTrees");if(Ce||(Ce=[]),B==="combo"){var Ee=this.get("itemMap"),cn=!1;if(Ce.forEach(function(_n){cn||Xn(_n,function(Un){if($.parentId===Un.id){cn=!0;var Ze=Object(n.a)({id:$.id,depth:Un.depth+2},$);Un.children?Un.children.push(Ze):Un.children=[Ze],$.depth=Ze.depth,se=ie.addItem(B,$)}var Te=Ee[Un.id];return cn&&Te&&Te.getType&&Te.getType()==="combo"&&ie.updateCombo(Te,Un.children),!0})}),!cn){var xn=Object(n.a)({id:$.id,depth:0},$);$.depth=xn.depth,Ce.push(xn),se=ie.addItem(B,$)}this.set("comboTrees",Ce)}else if(B==="node"&&Object(l.x)($.comboId)&&Ce){var _t;if((_t=this.findById($.comboId))&&_t.getType&&_t.getType()!=="combo")return void console.warn("'"+$.comboId+"' is a not id of a combo in the graph, the node will be added without combo.");se=ie.addItem(B,$);var Yt=this.get("itemMap"),Se=!1,Wt=!1;(Ce||[]).forEach(function(_n){Wt||Se||Xn(_n,function(Un){if(Un.id===$.id)return Wt=!0,!1;if($.comboId===Un.id&&!Wt){Se=!0;var Ze=Object(l.c)($);Ze.itemType="node",Un.children?Un.children.push(Ze):Un.children=[Ze],$.depth=Un.depth+1}return Se&&Yt[Un.id].getType&&Yt[Un.id].getType()==="combo"&&ie.updateCombo(Yt[Un.id],Un.children),!0})})}else se=ie.addItem(B,$);(B==="node"&&$.comboId||B==="combo"&&$.parentId)&&(_t=this.findById($.comboId||$.parentId))&&_t.addChild(se);var ue=this.get("combos");if(ue&&ue.length>0&&this.sortCombos(),this.autoPaint(),ut&&this.get("enabledStack")){var vn=Object(n.a)(Object(n.a)({},se.getModel()),{itemType:B}),kn={};switch(B){case"node":kn.nodes=[vn];break;case"edge":kn.edges=[vn];break;case"combo":kn.combos=[vn]}this.pushStack("add",{before:{},after:kn})}return se}console.warn("This item exists already. Be sure the id %c"+$.id+"%c is unique.","font-size: 20px; color: red;","")},G.prototype.add=function(B,$,ut,Bt){return ut===void 0&&(ut=!0),Bt===void 0&&(Bt=!0),this.addItem(B,$,ut,Bt)},G.prototype.updateItem=function(B,$,ut){var Bt=this;ut===void 0&&(ut=!0);var Jt,ie=this.get("itemController");Jt=Object(l.x)(B)?this.findById(B):B;var se=Object(l.c)(Jt.getModel()),Ce="";Jt.getType&&(Ce=Jt.getType());var Ee=Object(n.d)(Jt.getStates());if(Ce==="combo"&&Object(l.f)(Ee,function(Yt){return Bt.setItemState(Jt,Yt,!1)}),ie.updateItem(Jt,$),Ce==="combo"&&Object(l.f)(Ee,function(Yt){return Bt.setItemState(Jt,Yt,!0)}),ut&&this.get("enabledStack")){var cn={nodes:[],edges:[],combos:[]},xn={nodes:[],edges:[],combos:[]},_t=Object(n.a)({id:se.id},$);switch(Ce){case"node":cn.nodes.push(se),xn.nodes.push(_t);break;case"edge":cn.edges.push(se),xn.edges.push(_t);break;case"combo":cn.combos.push(se),xn.combos.push(_t)}Ce==="node"&&cn.nodes.push(se),this.pushStack("update",{before:cn,after:xn})}},G.prototype.update=function(B,$,ut){ut===void 0&&(ut=!0),this.updateItem(B,$,ut)},G.prototype.setItemState=function(B,$,ut){Object(l.x)(B)&&(B=this.findById(B)),this.get("itemController").setItemState(B,$,ut);var Bt=this.get("stateController");Object(l.x)(ut)?Bt.updateState(B,$+":"+ut,!0):Bt.updateState(B,$,ut)},G.prototype.priorityState=function(B,$){this.get("itemController").priorityState(B,$)},G.prototype.data=function(B){this.set("data",B)},G.prototype.render=function(){var B=this;this.set("comboSorted",!1);var $=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!$)throw new Error("data must be defined first");var ut=$.nodes,Bt=ut===void 0?[]:ut,Jt=$.edges,ie=Jt===void 0?[]:Jt,se=$.combos,Ce=se===void 0?[]:se;if(this.clear(),this.emit("beforerender"),Object(l.f)(Bt,function(_t){B.add("node",_t,!1,!1)}),Ce&&Ce.length!==0){var Ee=nr(Ce,Bt);this.set("comboTrees",Ee),B.addCombos(Ce)}Object(l.f)(ie,function(_t){B.add("edge",_t,!1,!1)});var cn=B.get("animate");(B.get("fitView")||B.get("fitCenter"))&&B.set("animate",!1);var xn=B.get("layoutController");if(xn){if(xn.layout(function(){B.get("fitView")?B.fitView():B.get("fitCenter")&&B.fitCenter(),B.autoPaint(),B.emit("afterrender"),(B.get("fitView")||B.get("fitCenter"))&&B.set("animate",cn)}),this.destroyed)return}else B.get("fitView")&&B.fitView(),B.get("fitCenter")&&B.fitCenter(),B.emit("afterrender"),B.set("animate",cn);this.get("groupByTypes")||(Ce&&Ce.length!==0?this.sortCombos():$.nodes&&$.edges&&$.nodes.length<$.edges.length?this.getNodes().forEach(function(_t){_t.toFront()}):this.getEdges().forEach(function(_t){_t.toBack()})),this.get("enabledStack")&&this.pushStack("render")},G.prototype.read=function(B){this.data(B),this.render()},G.prototype.diffItems=function(B,$,ut){var Bt,Jt=this,ie=this.get("itemMap");Object(l.f)(ut,function(se){if(Bt=ie[se.id]){if(Jt.get("animate")&&B==="node"){var Ce=Bt.getContainer().getMatrix();Ce||(Ce=[1,0,0,0,1,0,0,0,1]),Bt.set("originAttrs",{x:Ce[6],y:Ce[7]})}Jt.updateItem(Bt,se,!1)}else Bt=Jt.addItem(B,se,!1);Bt&&$[B+"s"].push(Bt)})},G.prototype.changeData=function(B,$){$===void 0&&($=!0);var ut=this;if(!B)return this;$&&this.get("enabledStack")&&this.pushStack("changedata",{before:ut.save(),after:B}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(Yt){return ut.clearItemStates(Yt)}),this.getEdges().map(function(Yt){return ut.clearItemStates(Yt)});var Bt=this.get("canvas"),Jt=Bt.get("localRefresh");Bt.set("localRefresh",!1),ut.get("data")||(ut.data(B),ut.render());var ie=this.get("itemMap"),se={nodes:[],edges:[]},Ce=B.combos;if(Ce){var Ee=nr(Ce,B.nodes);this.set("comboTrees",Ee)}this.diffItems("node",se,B.nodes),Object(l.f)(ie,function(Yt,Se){ie[Se].getModel().depth=0,Yt.getType&&Yt.getType()==="edge"||(Yt.getType&&Yt.getType()==="combo"?(delete ie[Se],Yt.destroy()):se.nodes.indexOf(Yt)<0&&(delete ie[Se],ut.remove(Yt,!1)))});for(var cn=this.getCombos(),xn=cn.length-1;xn>=0;xn--)cn[xn].destroyed&&cn.splice(xn,1);Ce&&(ut.addCombos(Ce),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",se,B.edges),Object(l.f)(ie,function(Yt,Se){(!Yt.getType||Yt.getType()!=="node"&&Yt.getType()!=="combo")&&se.edges.indexOf(Yt)<0&&(delete ie[Se],ut.remove(Yt,!1))}),this.set({nodes:se.nodes,edges:se.edges});var _t=this.get("layoutController");return _t&&(_t.changeData(),ut.get("animate")&&!_t.getLayoutType()?ut.positionsAnimate():ut.autoPaint()),setTimeout(function(){Bt.set("localRefresh",Jt)},16),this},G.prototype.addCombos=function(B){var $=this.get("comboTrees");this.get("itemController").addCombos($,B)},G.prototype.createCombo=function(B,$){var ut=this;this.set("comboSorted",!1);var Bt,Jt="";if(B){if(Object(l.x)(B))Jt=B,Bt={id:B};else{if(!(Jt=B.id))return void console.warn("Create combo failed. Please assign a unique string id for the adding combo.");Bt=B}var ie=$.map(function(Ce){var Ee=ut.findById(Ce),cn="";Ee.getType&&(cn=Ee.getType());var xn={id:Ee.getID(),itemType:cn};return cn==="combo"?xn.parentId=Jt:cn==="node"&&(xn.comboId=Jt),xn});Bt.children=ie,this.addItem("combo",Bt,!1),this.set("comboSorted",!1);var se=this.get("comboTrees");(se||[]).forEach(function(Ce){Xn(Ce,function(Ee){return Ee.id!==Jt||(Ee.itemType="combo",Ee.children=ie,!1)})}),se&&this.sortCombos()}},G.prototype.uncombo=function(B){var $=this,ut=B;if(Object(l.x)(B)&&(ut=this.findById(B)),!ut||ut.getType&&ut.getType()!=="combo")console.warn("The item is not a combo!");else{var Bt=ut.getModel().parentId,Jt=this.get("comboTrees");Jt||(Jt=[]);var ie,se=this.get("itemMap"),Ce=ut.get("id"),Ee=[],cn=this.get("combos"),xn=this.findById(Bt);if(Jt.forEach(function(Yt){ie||Xn(Yt,function(Se){if(Se.id===Ce){ie=Se,ut.getEdges().forEach(function(ue){$.removeItem(ue,!1)});var Wt=cn.indexOf(B);cn.splice(Wt,1),delete se[Ce],ut.destroy()}return!Bt||!ie||Se.id!==Bt||(xn.removeCombo(ut),(Wt=(Ee=Se.children).indexOf(ie))!==-1&&Ee.splice(Wt,1),ie.children.forEach(function(ue){var vn=$.findById(ue.id),kn=vn.getModel();vn.getType&&vn.getType()==="combo"?(ue.parentId=Bt,delete ue.comboId,kn.parentId=Bt,delete kn.comboId):vn.getType&&vn.getType()==="node"&&(ue.comboId=Bt,kn.comboId=Bt),xn.addChild(vn),Ee.push(ue)}),!1)})}),!Bt&&ie){var _t=Jt.indexOf(ie);Jt.splice(_t,1),ie.children.forEach(function(Yt){Yt.parentId=void 0,$.findById(Yt.id).getModel().parentId=void 0,Yt.itemType!=="node"&&Jt.push(Yt)})}}},G.prototype.updateCombos=function(){var B=this,$=this.get("comboTrees"),ut=this.get("itemController"),Bt=this.get("itemMap");($||[]).forEach(function(Jt){Xn(Jt,function(ie){if(!ie)return!0;var se=Bt[ie.id];if(se&&se.getType&&se.getType()==="combo"){var Ce=Object(n.d)(se.getStates());Object(l.f)(Ce,function(Ee){return B.setItemState(se,Ee,!1)}),ut.updateCombo(se,ie.children),Object(l.f)(Ce,function(Ee){return B.setItemState(se,Ee,!0)})}return!0})}),this.sortCombos()},G.prototype.updateCombo=function(B){var $,ut=this,Bt=B;if(Object(l.x)(B)&&(Bt=this.findById(B)),!Bt||Bt.getType&&Bt.getType()!=="combo")console.warn("The item to be updated is not a combo!");else{$=Bt.get("id");var Jt=this.get("comboTrees"),ie=this.get("itemController"),se=this.get("itemMap");(Jt||[]).forEach(function(Ce){Xn(Ce,function(Ee){if(!Ee)return!0;var cn=se[Ee.id];if($===Ee.id&&cn&&cn.getType&&cn.getType()==="combo"){var xn=Object(n.d)(cn.getStates());Object(l.f)(xn,function(_t){cn.getStateStyle(_t)&&ut.setItemState(cn,_t,!1)}),ie.updateCombo(cn,Ee.children),Object(l.f)(xn,function(_t){cn.getStateStyle(_t)&&ut.setItemState(cn,_t,!0)}),$&&($=Ee.parentId)}return!0})})}},G.prototype.updateComboTree=function(B,$,ut){ut===void 0&&(ut=!0);var Bt;this.set("comboSorted",!1);var Jt,ie=(Bt=Object(l.x)(B)?this.findById(B):B).getModel(),se=ie.comboId||ie.parentId,Ce="";if(Bt.getType&&(Ce=Bt.getType()),$&&Ce==="combo"){var Ee,cn=this.get("comboTrees"),xn=!0;if((cn||[]).forEach(function(ue){Ee||Gn(ue,function(vn){if(!Ee)return vn.id===Bt.getID()&&(Ee=vn),!0})}),Gn(Ee,function(ue){return ue.id!==$||(xn=!1,!1)}),!xn)return void console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!")}if(ut&&this.get("enabledStack")){var _t={},Yt={};Ce==="combo"?(_t.combos=[{id:ie.id,parentId:ie.parentId}],Yt.combos=[{id:ie.id,parentId:$}]):Ce==="node"&&(_t.nodes=[{id:ie.id,parentId:ie.comboId}],Yt.nodes=[{id:ie.id,parentId:$}]),this.pushStack("updateComboTree",{before:_t,after:Yt})}if(ie.parentId||ie.comboId){var Se=this.findById(ie.parentId||ie.comboId);Se&&Se.removeChild(Bt)}Ce==="combo"?ie.parentId=$:Ce==="node"&&(ie.comboId=$),$&&(Jt=this.findById($))&&Jt.addChild(Bt),se&&(Jt=this.findById(se))&&Jt.removeChild(Bt);var Wt=er(this.get("comboTrees"),ie.id,$);this.set("comboTrees",Wt),this.updateCombos()},G.prototype.save=function(){var B=[],$=[],ut=[];return Object(l.f)(this.get("nodes"),function(Bt){B.push(Bt.getModel())}),Object(l.f)(this.get("edges"),function(Bt){$.push(Bt.getModel())}),Object(l.f)(this.get("combos"),function(Bt){ut.push(Bt.getModel())}),{nodes:B,edges:$,combos:ut}},G.prototype.changeSize=function(B,$){return this.get("viewController").changeSize(B,$),this},G.prototype.refresh=function(){if(this.emit("beforegraphrefresh"),this.get("animate"))this.positionsAnimate();else{var B=this.get("nodes"),$=this.get("edges"),ut=this.get("edges");Object(l.f)(B,function(Bt){Bt.refresh()}),Object(l.f)($,function(Bt){Bt.refresh()}),Object(l.f)(ut,function(Bt){Bt.refresh()})}this.emit("aftergraphrefresh"),this.autoPaint()},G.prototype.getNodes=function(){return this.get("nodes")},G.prototype.getEdges=function(){return this.get("edges")},G.prototype.getCombos=function(){return this.get("combos")},G.prototype.getComboChildren=function(B){if(Object(l.x)(B)&&(B=this.findById(B)),B&&(!B.getType||B.getType()==="combo"))return B.getChildren();console.warn("The combo does not exist!")},G.prototype.positionsAnimate=function(){var B=this;B.emit("beforeanimate");var $=B.get("animateCfg"),ut=$.onFrame,Bt=B.getNodes(),Jt=Bt.map(function(ie){var se=ie.getModel();return{id:se.id,x:se.x,y:se.y}});B.isAnimating()&&B.stopAnimate(),B.get("canvas").animate(function(ie){Object(l.f)(Jt,function(se){var Ce=B.findById(se.id);if(Ce&&!Ce.destroyed){var Ee=Ce.get("originAttrs"),cn=Ce.get("model");if(!Ee){var xn=Ce.getContainer().getMatrix();xn||(xn=[1,0,0,0,1,0,0,0,1]),Ee={x:xn[6],y:xn[7]},Ce.set("originAttrs",Ee)}if(ut){var _t=ut(Ce,ie,se,Ee);Ce.set("model",Object.assign(cn,_t))}else cn.x=Ee.x+(se.x-Ee.x)*ie,cn.y=Ee.y+(se.y-Ee.y)*ie}}),B.refreshPositions()},{duration:$.duration,easing:$.easing,callback:function(){Object(l.f)(Bt,function(se){se.set("originAttrs",null)}),$.callback&&$.callback(),B.emit("afteranimate"),B.animating=!1}})},G.prototype.refreshPositions=function(){this.emit("beforegraphrefreshposition");var B,$=this.get("nodes"),ut=this.get("edges"),Bt=this.get("vedges"),Jt=this.get("combos"),ie={};Object(l.f)($,function(se){B=se.getModel();var Ce=se.get("originAttrs");Ce&&B.x===Ce.x&&B.y===Ce.y||(se.updatePosition({x:B.x,y:B.y}),ie[B.id]=!0,B.comboId&&(ie[B.comboId]=!0))}),Jt&&Jt.length!==0&&this.updateCombos(),Object(l.f)(ut,function(se){var Ce=se.getSource().getModel(),Ee=se.getTarget().getModel();(ie[Ce.id]||ie[Ee.id]||se.getModel().isComboEdge)&&se.refresh()}),Object(l.f)(Bt,function(se){se.refresh()}),this.emit("aftergraphrefreshposition"),this.autoPaint()},G.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},G.prototype.isAnimating=function(){return this.animating},G.prototype.getZoom=function(){var B=this.get("group").getMatrix();return B?B[0]:1},G.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},G.prototype.setMode=function(B){return this.get("modeController").setMode(B),this},G.prototype.clear=function(){return this.get("canvas").clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),this.emit("afterrender"),this},G.prototype.updateLayout=function(B){var $,ut=this.get("layoutController");Object(l.x)(B)?B={type:$=B}:$=B.type;var Bt=this.get("layout"),Jt=Bt?Bt.type:void 0;if($&&Jt!==$||B.gpuEnabled!==void 0&&B.gpuEnabled!==Bt.gpuEnabled)$||($=Jt),this.set("layout",B),ut.changeLayout($);else{var ie={};Object.assign(ie,Bt,B),ie.type=Jt||"random",this.set("layout",ie),ut.updateLayoutCfg(ie)}},G.prototype.destroyLayout=function(){this.get("layoutController").destroyLayout()},G.prototype.layout=function(){var B=this.get("layoutController"),$=this.get("layout");$&&B&&($.workerEnabled?B.layout():B.layoutMethod?B.relayout(!0):B.layout())},G.prototype.collapseCombo=function(B){var $=this;if(Object(l.x)(B)&&(B=this.findById(B)),B){this.emit("beforecollapseexpandcombo",{action:"expand",item:B});var ut=B.getModel();this.get("itemController").collapseCombo(B),ut.collapsed=!0;var Bt=this.getEdges().concat(this.get("vedges")),Jt=[],ie=[],se=this.get("comboTrees"),Ce=!1,Ee={};(se||[]).forEach(function(_t){Ee[_t.id]=_t}),(se||[]).forEach(function(_t){Ce||Gn(_t,function(Yt){if(Ce&&Ee[Yt.id])return!1;if(ut.parentId===Yt.id?(Ee={},Yt.children.forEach(function(Wt){Ee[Wt.id]=Wt})):ut.id===Yt.id&&(Ce=!0),Ce){var Se=$.findById(Yt.id);Se&&Se.getType&&Se.getType()==="combo"&&(Jt=Jt.concat(Se.getNodes()),ie=ie.concat(Se.getCombos()))}return!0})});var cn={},xn=[];Bt.forEach(function(_t){if(!_t.isVisible()||_t.getModel().isVEdge){var Yt=_t.getSource(),Se=_t.getTarget();if((Jt.includes(Yt)||ie.includes(Yt))&&!Jt.includes(Se)&&!ie.includes(Se)||Yt.getModel().id===ut.id){if((kn=_t.getModel()).isVEdge)return void $.removeItem(_t,!1);for(var Wt=Se.getModel();!Se.isVisible();){if(!(Se=$.findById(Wt.parentId||Wt.comboId))||!Wt.parentId&&!Wt.comboId)return;Wt=Se.getModel()}var ue=Wt.id;if(cn[ut.id+"-"+ue])return void(cn[ut.id+"-"+ue]+=kn.size||1);var vn=$.addItem("vedge",{source:ut.id,target:ue,isVEdge:!0},!1);cn[ut.id+"-"+ue]=kn.size||1,xn.push(vn)}else if(!Jt.includes(Yt)&&!ie.includes(Yt)&&(Jt.includes(Se)||ie.includes(Se))||Se.getModel().id===ut.id){var kn;if((kn=_t.getModel()).isVEdge)return void $.removeItem(_t,!1);for(var _n=Yt.getModel();!Yt.isVisible();){if(!(Yt=$.findById(_n.parentId||_n.comboId))||!_n.parentId&&!_n.comboId)return;_n=Yt.getModel()}var Un=_n.id;if(cn[Un+"-"+ut.id])return void(cn[Un+"-"+ut.id]+=kn.size||1);vn=$.addItem("vedge",{target:ut.id,source:Un,isVEdge:!0},!1),cn[Un+"-"+ut.id]=kn.size||1,xn.push(vn)}}}),xn.forEach(function(_t){var Yt=_t.getModel();$.updateItem(_t,{size:cn[Yt.source+"-"+Yt.target]},!1)}),this.emit("aftercollapseexpandcombo",{action:"collapse",item:B})}else console.warn("The combo to be collapsed does not exist!")},G.prototype.expandCombo=function(B){var $=this;if(Object(l.x)(B)&&(B=this.findById(B)),!B||B.getType&&B.getType()!=="combo")console.warn("The combo to be collapsed does not exist!");else{this.emit("beforecollapseexpandcombo",{action:"expand",item:B});var ut=B.getModel();this.get("itemController").expandCombo(B),ut.collapsed=!1;var Bt=this.getEdges().concat(this.get("vedges")),Jt=[],ie=[],se=this.get("comboTrees"),Ce=!1,Ee={};(se||[]).forEach(function(_t){Ee[_t.id]=_t}),(se||[]).forEach(function(_t){Ce||Gn(_t,function(Yt){if(Ce&&Ee[Yt.id])return!1;if(ut.parentId===Yt.id?(Ee={},Yt.children.forEach(function(Wt){Ee[Wt.id]=Wt})):ut.id===Yt.id&&(Ce=!0),Ce){var Se=$.findById(Yt.id);Se&&Se.getType&&Se.getType()==="combo"&&(Jt=Jt.concat(Se.getNodes()),ie=ie.concat(Se.getCombos()))}return!0})});var cn={},xn={};Bt.forEach(function(_t){if(!_t.isVisible()||_t.getModel().isVEdge){var Yt=_t.getSource(),Se=_t.getTarget(),Wt=Yt.get("id"),ue=Se.get("id");if((Jt.includes(Yt)||ie.includes(Yt))&&!Jt.includes(Se)&&!ie.includes(Se)||Wt===ut.id){if(_t.getModel().isVEdge)return void $.removeItem(_t,!1);for(var vn=Se.getModel();!Se.isVisible();){if(!(Se=$.findById(vn.comboId||vn.parentId))||!vn.parentId&&!vn.comboId)return;vn=Se.getModel()}ue=vn.id;for(var kn=Yt.getModel();!Yt.isVisible();){if(!(Yt=$.findById(kn.comboId||kn.parentId))||!kn.parentId&&!kn.comboId)return;if(kn.comboId===ut.id||kn.parentId===ut.id)break;kn=Yt.getModel()}if(Wt=kn.id,ue){if(cn[Un=Wt+"-"+ue])return cn[Un]+=_t.getModel().size||1,void $.updateItem(xn[Un],{size:cn[Un]},!1);var _n=$.addItem("vedge",{source:Wt,target:ue,isVEdge:!0},!1);cn[Un]=_t.getModel().size||1,xn[Un]=_n}}else if(!Jt.includes(Yt)&&!ie.includes(Yt)&&(Jt.includes(Se)||ie.includes(Se))||ue===ut.id){if(_t.getModel().isVEdge)return void $.removeItem(_t,!1);for(kn=Yt.getModel();!Yt.isVisible();){if(!(Yt=$.findById(kn.comboId||kn.parentId))||!kn.parentId&&!kn.comboId)return;kn=Yt.getModel()}for(Wt=kn.id,vn=Se.getModel();!Se.isVisible();){if(!(Se=$.findById(vn.comboId||vn.parentId))||!vn.parentId&&!vn.comboId)return;if(vn.comboId===ut.id||vn.parentId===ut.id)break;vn=Se.getModel()}if(ue=vn.id,Wt){var Un;if(cn[Un=Wt+"-"+ue])return cn[Un]+=_t.getModel().size||1,void $.updateItem(xn[Un],{size:cn[Un]},!1);_n=$.addItem("vedge",{target:ue,source:Wt,isVEdge:!0},!1),cn[Un]=_t.getModel().size||1,xn[Un]=_n}}else(Jt.includes(Yt)||ie.includes(Yt))&&(Jt.includes(Se)||ie.includes(Se))&&Yt.isVisible()&&Se.isVisible()&&_t.show()}}),this.emit("aftercollapseexpandcombo",{action:"expand",item:B})}},G.prototype.collapseExpandCombo=function(B){if(Object(l.x)(B)&&(B=this.findById(B)),!B.getType||B.getType()==="combo"){for(var $=B.getModel(),ut=this.findById($.parentId);ut;){var Bt=ut.getModel();if(Bt.collapsed)return console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),void(ut=void 0);ut=this.findById(Bt.parentId)}$.collapsed?this.expandCombo(B):this.collapseCombo(B),this.updateCombo(B)}},G.prototype.sortCombos=function(){var B=this;if(!this.get("comboSorted")){this.set("comboSorted",!0);var $=[],ut={};(this.get("comboTrees")||[]).forEach(function(Bt){Gn(Bt,function(Jt){return $[Jt.depth]?$[Jt.depth].push(Jt.id):$[Jt.depth]=[Jt.id],ut[Jt.id]=Jt.depth,!0})}),(this.getEdges().concat(this.get("vedges"))||[]).forEach(function(Bt){var Jt=Bt.getModel(),ie=ut[Jt.source]||0,se=ut[Jt.target]||0,Ce=Math.max(ie,se);$[Ce]?$[Ce].push(Jt.id):$[Ce]=[Jt.id]}),$.forEach(function(Bt){if(Bt&&Bt.length)for(var Jt=Bt.length-1;Jt>=0;Jt--){var ie=B.findById(Bt[Jt]);ie&&ie.toFront()}})}},G.prototype.getNeighbors=function(B,$){var ut=B;return Object(l.x)(B)&&(ut=this.findById(B)),ut.getNeighbors($)},G.prototype.getNodeDegree=function(B,$){$===void 0&&($=void 0);var ut=B;Object(l.x)(B)&&(ut=this.findById(B));var Bt=this.get("degrees");Bt||(Bt=Object(M.getDegree)(this.get("data"))),this.set("degees",Bt);var Jt,ie=Bt[ut.getID()];switch($){case"in":Jt=ie.inDegree;break;case"out":Jt=ie.outDegree;break;case"all":Jt=ie;break;default:Jt=ie.degree}return Jt},G.prototype.getUndoStack=function(){return this.undoStack},G.prototype.getRedoStack=function(){return this.redoStack},G.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},G.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},G.prototype.pushStack=function(B,$,ut){if(B===void 0&&(B="update"),ut===void 0&&(ut="undo"),this.get("enabledStack")){var Bt=$?Object(l.c)($):{before:{},after:Object(l.c)(this.save())};ut==="redo"?this.redoStack.push({action:B,data:Bt}):this.undoStack.push({action:B,data:Bt}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})}else console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !")},G.prototype.getAdjMatrix=function(B,$){B===void 0&&(B=!0),$===void 0&&($=this.get("directed"));var ut=this.get("adjMatrix");return ut&&B||(ut=Object(M.getAdjMatrix)(this.save(),$),this.set("adjMatrix",ut)),ut},G.prototype.getShortestPathMatrix=function(B,$){B===void 0&&(B=!0),$===void 0&&($=this.get("directed"));var ut=this.get("adjMatrix"),Bt=this.get("shortestPathMatrix");return ut&&B||(ut=Object(M.getAdjMatrix)(this.save(),$),this.set("adjMatrix",ut)),Bt&&B||(Bt=Object(M.floydWarshall)(this.save(),$),this.set("shortestPathMatrix",Bt)),Bt},G.prototype.on=function(B,$,ut){return pe.prototype.on.call(this,B,$,ut)},G.prototype.destroy=function(){this.clear(),this.clearStack(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("canvas").destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},G.prototype.createHull=function(B){if(B.members&&!(B.members.length<1)){var $=this.get("hullGroup"),ut=this.get("hullMap");if(ut||(ut={},this.set("hullMap",ut)),$||(($=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",$)),ut[B.id])return console.warn("Existed hull id."),ut[B.id];var Bt=$.addGroup({id:B.id+"-container"}),Jt=new Qe(this,Object(n.a)(Object(n.a)({},B),{group:Bt}));return ut[Jt.id]=Jt,Jt}console.warn("Create hull failed! The members is empty.")},G.prototype.getHulls=function(){return this.get("hullMap")},G.prototype.getHullById=function(B){return this.get("hullMap")[B]},G.prototype.removeHull=function(B){var $;$=Object(l.x)(B)?this.getHullById(B):B,delete this.get("hullMap")[$.id],$.destroy()},G.prototype.removeHulls=function(){var B=this.getHulls();B&&Object.keys(B).length&&(B.forEach(function($){$.destroy()}),this.set("hullMap",{}))},G}(s.a);function Hn(pe){return(Hn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G})(pe)}var $e=d.a.transform,rn=["startArrow","endArrow"],on={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},$n={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:on,combo:on},vr={options:{},itemType:"",type:"",getCustomConfig:function(G){return{}},getOptions:function(G){return Object(l.e)({labelCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}},descriptionCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}}},this.options,this.getCustomConfig(G)||{},G)},draw:function(G,B){var $=this.drawShape(G,B);return $.set("className",this.itemType+"-shape"),G.label&&this.drawLabel(G,B).set("className",this.itemType+"-label"),$},afterDraw:function(G,B,$){},drawShape:function(G,B){return null},drawLabel:function(G,B){var $=this.getOptions(G).labelCfg||{},ut=this.getLabelStyle(G,$,B),Bt=ut.rotate;delete ut.rotate;var Jt=B.addShape("text",{attrs:ut,draggable:!0,className:"text-shape",name:"text-shape"});if(Bt){var ie=Jt.getBBox(),se=Jt.getMatrix();if(se||(se=[1,0,0,0,1,0,0,0,1]),ut.rotateCenter)switch(ut.rotateCenter){case"center":se=$e(se,[["t",-ie.width/2,-ie.height/2],["r",Bt],["t",ie.width/2,ie.height/2]]);break;case"lefttop":se=$e(se,[["t",-ut.x,-ut.y],["r",Bt],["t",ut.x,ut.y]]);break;case"leftcenter":se=$e(se,[["t",-ut.x,-ut.y-ie.height/2],["r",Bt],["t",ut.x,ut.y+ie.height/2]]);break;default:se=$e(se,[["t",-ie.width/2,-ie.height/2],["r",Bt],["t",ie.width/2,ie.height/2]])}else se=$e(se,[["t",-ut.x,-ut.y-ie.height/2],["r",Bt],["t",ut.x,ut.y+ie.height/2]]);Jt.setMatrix(se)}if(ut.background){var Ce=this.drawLabelBg(G,B,Jt),Ee=this.itemType+"-label-bg";Ce.set("classname",Ee),Jt.toFront()}return Jt},drawLabelBg:function(G,B,$){var ut=this.options.labelCfg,Bt=Object(l.A)({},ut,G.labelCfg),Jt=this.getLabelBgStyleByPosition($,G,Bt,B);return B.addShape("rect",{name:"text-bg-shape",attrs:Jt})},getLabelStyleByPosition:function(G,B,$){return{text:G.label}},getLabelBgStyleByPosition:function(G,B,$,ut){return{}},getLabelStyle:function(G,B,$){var ut=this.getLabelStyleByPosition(G,B,$),Bt=this.itemType+"Label",Jt=dt[Bt]?dt[Bt].style:null;return Object(n.a)(Object(n.a)(Object(n.a)({},Jt),ut),B.style)},getShapeStyle:function(G){return G.style},update:function(G,B){this.updateShapeStyle(G,B),this.updateLabel(G,B)},updateShapeStyle:function(G,B){var $=B.getContainer(),ut=B.getKeyShape(),Bt=Object(l.A)({},ut.attr(),G.style),Jt=function(Ce){var Ee,cn=Bt[Ce];if(Object(l.w)(cn)){var xn=$.find(function(_t){return _t.get("name")===Ce});xn&&xn.attr(cn)}else ut.attr(((Ee={})[Ce]=cn,Ee))};for(var ie in Bt)Jt(ie)},updateLabel:function(G,B){var $=B.getContainer(),ut=this.getOptions({}).labelCfg,Bt=this.itemType+"-label",Jt=$.find(function(_n){return _n.get("className")===Bt}),ie=this.itemType+"-label-bg",se=$.find(function(_n){return _n.get("classname")===ie});if(G.label||G.label==="")if(Jt){var Ce={};B.getModel&&(Ce=B.getModel().labelCfg);var Ee=Object(l.e)({},ut,Ce,G.labelCfg),cn=this.getLabelStyleByPosition(G,Ee,$),xn=G.labelCfg?G.labelCfg.style:void 0,_t=Ee.style&&Ee.style.background,Yt=Object(n.a)(Object(n.a)(Object(n.a)({},Jt.attr()),cn),xn),Se=Yt.rotate;if(delete Yt.rotate,Se){var Wt=[1,0,0,0,1,0,0,0,1];Wt=$e(Wt,[["t",-Yt.x,-Yt.y],["r",Se],["t",Yt.x,Yt.y]]),Jt.resetMatrix(),Jt.attr(Object(n.a)(Object(n.a)({},Yt),{matrix:Wt}))}else Jt.resetMatrix(),Jt.attr(Yt);if(se)if(Yt.background){var ue=this.getLabelBgStyleByPosition(Jt,G,Ee,$),vn=Object(n.a)(Object(n.a)({},ue),_t);if(se.resetMatrix(),Se){var kn=[1,0,0,0,1,0,0,0,1];kn=$e(kn,[["t",-vn.x,-vn.y],["r",Se],["t",vn.x,vn.y]]),vn.matrix=kn}se.attr(vn)}else $.removeChild(se);else Yt.background&&((se=this.drawLabelBg(G,$,Jt)).set("classname",ie),Jt.toFront())}else this.drawLabel(G,$).set("className",Bt)},afterUpdate:function(G,B){},setState:function(G,B,$){var ut,Bt,Jt=$.get("keyShape");if(Jt){var ie=$.getType(),se=Object(l.n)(B)?G:G+":"+B,Ce=this.getStateStyle(se,$),Ee=$.getStateStyle(se);if(Ee||Ce){var cn=Object(l.A)({},Ee||Ce),xn=$.getContainer(),_t={x:1,y:1,cx:1,cy:1};if(ie==="combo"&&(_t.r=1,_t.width=1,_t.height=1),B){var Yt=function(ce){var Me,_e=cn[ce];if(Object(l.w)(_e)&&!rn.includes(ce)){var We=xn.find(function(Re){return Re.get("name")===ce});We&&We.attr(_e)}else Jt.attr(((Me={})[ce]=_e,Me))};for(var Se in cn)Yt(Se)}else{var Wt=ti($.getCurrentStatesStyle()),ue=$.getModel(),vn=Object(l.A)({},ue.style,ti($.getOriginStyle())),kn=Jt.get("name"),_n=Jt.attr(),Un={};Object.keys(_n).forEach(function(he){if(he!=="img"){var ce=_n[he];ce&&Hn(ce)==="object"?Un[he]=Object(l.c)(ce):Un[he]=ce}});var Ze={},Te=function(ce){var Me=cn[ce];if(Object(l.w)(Me)&&!rn.includes(ce)){var _e=xn.find(function(tn){return tn.get("name")===ce});if(_e){var We=Object(l.c)(_e.attr());Object(l.f)(Me,function(tn,ke){if(ce===kn&&Un[ke]&&!_t[ke]){delete Un[ke];var ln=vn[ce][ke]||$n[ie][ke];Jt.attr(ke,ln)}else if(We[ke]||We[ke]===0){delete We[ke];var hn=vn[ce][ke]||$n[ie][ke];_e.attr(ke,hn)}}),Ze[ce]=We}}else if(Un[ce]&&!_t[ce]){delete Un[ce];var Re=vn[ce]||(vn[kn]?vn[kn][ce]:void 0)||$n[ie][ce];Jt.attr(ce,Re)}};for(var R in cn)Te(R);for(var Se in kn?Ze[kn]=Un:Object(l.A)(Ze,Un),Wt)if(!_t[Se]){var mt=Wt[Se];Object(l.w)(mt)&&!rn.includes(Se)||(kn?(Object(l.A)(vn[kn],((Bt={})[Se]=mt,Bt)),delete vn[Se]):Object(l.A)(vn,((ut={})[Se]=mt,ut)),delete Wt[Se])}var $t={};Object(l.e)($t,vn,Ze,Wt);var me=!1,Zt=function(ce){var Me,_e,We=$t[ce];if(Object(l.w)(We)&&!rn.includes(ce)){var Re=xn.find(function(ke){return ke.get("name")===ce});Re&&(ce===kn&&(ie==="combo"&&(delete We.r,delete We.width,delete We.height),me=!0),Re.attr(We))}else if(!me){var tn=We||$n[ie][ce];ie==="combo"?kn||Jt.attr(((Me={})[ce]=tn,Me)):Jt.attr(((_e={})[ce]=tn,_e))}};for(var ve in $t)Zt(ve)}}}},getStateStyle:function(G,B){var $=B.getModel(),ut=B.getType(),Bt=this.getOptions($),Jt=Bt.stateStyles,ie=Bt.style,se=ie===void 0?{}:ie,Ce=$.stateStyles?$.stateStyles[G]:Jt&&Jt[G];return ut==="combo"?Object(l.c)(Ce):Object(l.A)({},se,Ce)},getControlPoints:function(G){return G.controlPoints},getAnchorPoints:function(G){return this.getOptions(G).anchorPoints}},ar={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:dt.nodeLabel.offset,getSize:function(G){var B=G.size||this.getOptions({}).size||dt.defaultNode.size;return Object(l.m)(B)&&B.length===1&&(B=[B[0],B[0]]),Object(l.m)(B)||(B=[B,B]),B},getLabelStyleByPosition:function(G,B){var $=B.position||this.labelPosition;if($==="center")return{x:0,y:0,text:G.label};var ut=B.offset;Object(l.s)(ut)&&(ut=this.offset);var Bt,Jt=this.getSize(G),ie=Jt[0],se=Jt[1];switch($){case"top":Bt={x:0,y:0-se/2-ut,textBaseline:"bottom"};break;case"bottom":Bt={x:0,y:se/2+ut,textBaseline:"top"};break;case"left":Bt={x:0-ie/2-ut,y:0,textAlign:"right"};break;default:Bt={x:ie/2+ut,y:0,textAlign:"left"}}return Bt.text=G.label,Bt},getLabelBgStyleByPosition:function(G,B,$,ut){if(!G)return{};var Bt=G.getBBox(),Jt=$.style&&$.style.background;if(!Jt)return{};var ie,se=Ft(Jt.padding),Ce=Bt.width+se[1]+se[3],Ee=Bt.height+se[0]+se[2],cn=$.offset;return Object(l.s)(cn)&&(cn=this.offset),ie={x:Bt.minX-se[3],y:Bt.minY-se[0]},ie=Object(n.a)(Object(n.a)(Object(n.a)({},ie),Jt),{width:Ce,height:Ee})},drawShape:function(G,B){var $=this.shapeType,ut=this.getShapeStyle(G);return B.addShape($,{attrs:ut,draggable:!0,name:"node-shape"})},updateLinkPoints:function(G,B){var $,ut=this.getOptions(G).linkPoints,Bt=B.find(function(Te){return Te.get("className")==="link-point-left"}),Jt=B.find(function(Te){return Te.get("className")==="link-point-right"}),ie=B.find(function(Te){return Te.get("className")==="link-point-top"}),se=B.find(function(Te){return Te.get("className")==="link-point-bottom"});Bt&&($=Bt.attr()),Jt&&!$&&($=Jt.attr()),ie&&!$&&($=ie.attr()),se&&!$&&($=se.attr()),$||($=ut);var Ce=Object(l.A)({},$,G.linkPoints),Ee=Ce.fill,cn=Ce.stroke,xn=Ce.lineWidth,_t=Ce.size/2;_t||(_t=Ce.r);var Yt=G.linkPoints?G.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},Se=Yt.left,Wt=Yt.right,ue=Yt.top,vn=Yt.bottom,kn=this.getSize(G),_n=kn[0],Un=kn[1],Ze={r:_t,fill:Ee,stroke:cn,lineWidth:xn};Bt?Se||Se===void 0?Bt.attr(Object(n.a)(Object(n.a)({},Ze),{x:-_n/2,y:0})):Bt.remove():Se&&B.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Ze),{x:-_n/2,y:0}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),Jt?(Wt||Wt===void 0||Jt.remove(),Jt.attr(Object(n.a)(Object(n.a)({},Ze),{x:_n/2,y:0}))):Wt&&B.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Ze),{x:_n/2,y:0}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),ie?(ue||ue===void 0||ie.remove(),ie.attr(Object(n.a)(Object(n.a)({},Ze),{x:0,y:-Un/2}))):ue&&B.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Ze),{x:0,y:-Un/2}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),se?vn||vn===void 0?se.attr(Object(n.a)(Object(n.a)({},Ze),{x:0,y:Un/2})):se.remove():vn&&B.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Ze),{x:0,y:Un/2}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},updateShape:function(G,B,$,ut){B.get("keyShape").attr(Object(n.a)({},$)),this.updateLabel(G,B),ut&&this.updateIcon(G,B)},updateIcon:function(G,B){var $=this,ut=B.getContainer(),Bt=this.getOptions(G).icon,Jt=(G.icon?G.icon:{show:void 0}).show,ie=ut.find(function(xn){return xn.get("className")===$.type+"-icon"});if(ie)if(Jt||Jt===void 0){var se=Object(l.A)({},ie.attr(),Bt),Ce=se.width,Ee=se.height;ie.attr(Object(n.a)(Object(n.a)({},se),{x:-Ce/2,y:-Ee/2}))}else ie.remove();else if(Jt){Ce=Bt.width,Ee=Bt.height,ut.addShape("image",{attrs:Object(n.a)(Object(n.a)({},Bt),{x:-Ce/2,y:-Ee/2}),className:this.type+"-icon",name:this.type+"-icon"});var cn=ut.find(function(xn){return xn.get("className")==="node-label"});cn&&cn.toFront()}}},rr=Object(n.a)(Object(n.a)({},vr),ar);jr.registerNode("single-node",rr);var Fr={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:dt.defaultEdge.size,style:{x:0,y:0,stroke:dt.defaultEdge.style.stroke,lineAppendWidth:dt.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:dt.edgeLabel.style.fill,fontSize:dt.edgeLabel.style.fontSize}},stateStyles:Object(n.a)({},dt.edgeStateStyles)},getPath:function(G){var B=[];return Object(l.f)(G,function($,ut){ut===0?B.push(["M",$.x,$.y]):B.push(["L",$.x,$.y])}),B},getShapeStyle:function(G){var B=this.options.style,$={stroke:G.color},ut=Object(l.A)({},B,$,G.style),Bt=G.size||dt.defaultEdge.size,Jt=(G=this.getPathPoints(G)).startPoint,ie=G.endPoint,se=this.getControlPoints(G),Ce=[Jt];se&&(Ce=Ce.concat(se)),Ce.push(ie);var Ee=this.getPath(Ce);return Object(l.A)({},dt.defaultEdge.style,{stroke:dt.defaultEdge.color,lineWidth:Bt,path:Ee},ut)},updateShapeStyle:function(G,B){var $=B.getContainer(),ut={stroke:G.color},Bt=$.find(function(vn){return vn.get("className")==="edge-shape"})||B.getKeyShape(),Jt=G.size,ie=(G=this.getPathPoints(G)).startPoint,se=G.endPoint,Ce=this.getControlPoints(G),Ee=[ie];Ce&&(Ee=Ee.concat(Ce)),Ee.push(se);var cn=Bt.attr(),xn=Object(l.A)({},ut,cn,G.style),_t=G.sourceNode,Yt=G.targetNode,Se={radius:xn.radius};Ce||(Se={source:_t,target:Yt,offset:xn.offset,radius:xn.radius}),cn.endArrow&&xn.endArrow===!1&&(G.style.endArrow={path:""}),cn.startArrow&&xn.startArrow===!1&&(G.style.startArrow={path:""});var Wt=this.getPath(Ee,Se),ue=Object(l.A)(ut,Bt.attr(),{lineWidth:Jt,path:Wt},G.style);Bt&&Bt.attr(ue)},getLabelStyleByPosition:function(G,B,$){var ut,Bt=B.position||this.labelPosition,Jt={},ie=$&&$.find(function(xn){return xn.get("className")==="edge-shape"});ut=Bt==="start"?0:Bt==="end"?1:.5;var se=B.refX||this.refX,Ce=B.refY||this.refY;if(G.startPoint.x===G.endPoint.x&&G.startPoint.y===G.endPoint.y)return Jt.x=G.startPoint.x+se,Jt.y=G.startPoint.y+Ce,Jt.text=G.label,Jt;var Ee=Object(l.s)(B.autoRotate)?this.labelAutoRotate:B.autoRotate,cn=Mn(ie,ut,se,Ce,Ee);return Jt.x=cn.x,Jt.y=cn.y,Jt.rotate=cn.rotate,Jt.textAlign=this._getTextAlign(Bt,cn.angle),Jt.text=G.label,Jt},getLabelBgStyleByPosition:function(G,B,$,ut){if(!G)return{};var Bt=G.getBBox(),Jt=$.style&&$.style.background;if(!Jt)return{};var ie,se=Jt.padding,Ce=Bt.width+se[1]+se[3],Ee=Bt.height+se[0]+se[2],cn=$.position||this.labelPosition,xn=Object(n.a)(Object(n.a)({},Jt),{width:Ce,height:Ee,x:Bt.minX-se[2],y:Bt.minY-se[0],rotate:0}),_t=Object(l.s)($.autoRotate)?this.labelAutoRotate:$.autoRotate,Yt=ut&&ut.find(function(kn){return kn.get("className")==="edge-shape"});ie=cn==="start"?0:cn==="end"?1:.5;var Se=$.refX||this.refX,Wt=$.refY||this.refY;if(B.startPoint.x===B.endPoint.x&&B.startPoint.y===B.endPoint.y)return xn.x=B.startPoint.x+Se-Ce/2,xn.y=B.startPoint.y+Wt-Ee/2,xn;var ue=Mn(Yt,ie,Se-Ce/2,Wt+Ee/2,_t),vn=ue.angle;return vn>.5*Math.PI&&vn<1.5*Math.PI&&(ue=Mn(Yt,ie,Se+Ce/2,Wt+Ee/2,_t)),_t&&(xn.x=ue.x,xn.y=ue.y),xn.rotate=ue.rotate,xn},_getTextAlign:function(G,B){var $="center";return B?(B%=2*Math.PI,G!=="center"&&($=B>=0&&B<=Math.PI/2||B>=1.5*Math.PI&&B<2*Math.PI?G:function(ut){var Bt=ut;return ut==="start"?Bt="end":ut==="end"&&(Bt="start"),Bt}(G)),$):G},getControlPoints:function(G){return G.controlPoints},getPathPoints:function(G){return G},drawShape:function(G,B){var $=this.getShapeStyle(G);return B.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:$})},drawLabel:function(G,B){var $=this.options.labelCfg,ut=Object(l.e)({fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},$,G.labelCfg),Bt=this.getLabelStyle(G,ut,B),Jt=Bt.rotate;delete Bt.rotate;var ie=B.addShape("text",{attrs:Bt,name:"text-shape"});if(Jt&&ie.rotateAtStart(Jt),Bt.background){var se=this.drawLabelBg(G,B,ie),Ce=this.itemType+"-label-bg";se.set("classname",Ce),ie.toFront()}return ie},drawLabelBg:function(G,B,$){var ut=this.options.labelCfg,Bt=Object(l.e)({},ut,G.labelCfg),Jt=this.getLabelStyle(G,Bt,B).rotate,ie=this.getLabelBgStyleByPosition($,G,Bt,B);delete ie.rotate;var se=B.addShape("rect",{name:"text-bg-shape",attrs:ie});return Jt&&se.rotateAtStart(Jt),se}},Ar=Object(n.a)(Object(n.a)({},vr),Fr);jr.registerEdge("single-edge",Ar),jr.registerEdge("line",{getControlPoints:function(){}},"single-edge"),jr.registerEdge("spline",{getPath:function(G){return Qr(G)}},"single-edge"),jr.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(G){var B,$,ut=G.startPoint,Bt=G.endPoint,Jt=(ut.x+Bt.x)/2,ie=(ut.y+Bt.y)/2;if(G.controlPoints!==void 0){if($=G.controlPoints[0],B=pt(ut,$,Bt),ut.x<=Bt.x&&ut.y>Bt.y?this.clockwise=B.x>$.x?0:1:ut.x<=Bt.x&&ut.y<Bt.y?this.clockwise=B.x>$.x?1:0:ut.x>Bt.x&&ut.y<=Bt.y?this.clockwise=B.y<$.y?0:1:this.clockwise=B.y<$.y?1:0,($.x-ut.x)/($.y-ut.y)==(Bt.x-ut.x)/(Bt.y-ut.y))return[]}else{G.curveOffset===void 0&&(G.curveOffset=this.curveOffset),Object(l.m)(G.curveOffset)&&(G.curveOffset=G.curveOffset[0]),G.curveOffset<0?this.clockwise=0:this.clockwise=1;var se={x:Bt.x-ut.x,y:Bt.y-ut.y},Ce=Math.atan2(se.y,se.x);$={x:G.curveOffset*Math.cos(-Math.PI/2+Ce)+Jt,y:G.curveOffset*Math.sin(-Math.PI/2+Ce)+ie},B=pt(ut,$,Bt)}var Ee=ft(ut,B);return[{x:Ee,y:Ee}]},getPath:function(G){var B=[];return B.push(["M",G[0].x,G[0].y]),G.length===2?B.push(["L",G[1].x,G[1].y]):B.push(["A",G[1].x,G[1].y,0,0,this.clockwise,G[2].x,G[2].y]),B}},"single-edge"),jr.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(G){var B=G.controlPoints;if(!B||!B.length){var $=G.startPoint,ut=G.endPoint;G.curveOffset===void 0&&(G.curveOffset=this.curveOffset),G.curvePosition===void 0&&(G.curvePosition=this.curvePosition),Object(l.m)(this.curveOffset)&&(G.curveOffset=G.curveOffset[0]),Object(l.m)(this.curvePosition)&&(G.curvePosition=G.curveOffset[0]),B=[gi($,ut,G.curvePosition,G.curveOffset)]}return B},getPath:function(G){var B=[];return B.push(["M",G[0].x,G[0].y]),B.push(["Q",G[1].x,G[1].y,G[2].x,G[2].y]),B}},"single-edge"),jr.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(G){var B=G.controlPoints;if(G.curveOffset===void 0&&(G.curveOffset=this.curveOffset),G.curvePosition===void 0&&(G.curvePosition=this.curvePosition),Object(l.t)(G.curveOffset)&&(G.curveOffset=[G.curveOffset,-G.curveOffset]),Object(l.t)(G.curvePosition)&&(G.curvePosition=[G.curvePosition,1-G.curvePosition]),!B||!B.length||B.length<2){var $=G.startPoint,ut=G.endPoint;B=[gi($,ut,G.curvePosition[0],G.curveOffset[0]),gi($,ut,G.curvePosition[1],G.curveOffset[1])]}return B},getPath:function(G){var B=[];return B.push(["M",G[0].x,G[0].y]),B.push(["C",G[1].x,G[1].y,G[2].x,G[2].y,G[3].x,G[3].y]),B}},"single-edge"),jr.registerEdge("cubic-vertical",{curvePosition:[.5,.5],getControlPoints:function(G){var B=G.startPoint,$=G.endPoint;return G.curvePosition!==void 0&&(this.curvePosition=G.curvePosition),Object(l.t)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]),[{x:B.x,y:($.y-B.y)*this.curvePosition[0]+B.y},{x:$.x,y:($.y-B.y)*this.curvePosition[1]+B.y}]}},"cubic"),jr.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],getControlPoints:function(G){var B=G.startPoint,$=G.endPoint;return G.curvePosition!==void 0&&(this.curvePosition=G.curvePosition),Object(l.t)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]),[{x:($.x-B.x)*this.curvePosition[0]+B.x,y:B.y},{x:($.x-B.x)*this.curvePosition[1]+B.x,y:$.y}]}},"cubic"),jr.registerEdge("loop",{getPathPoints:function(G){return Rn(G)},getControlPoints:function(G){return G.controlPoints},afterDraw:function(G){G.controlPoints=void 0},afterUpdate:function(G){G.controlPoints=void 0}},"cubic");var wr={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:dt.comboLabel.refX,refY:dt.comboLabel.refY,options:{style:{stroke:dt.defaultCombo.style.stroke,fill:dt.defaultCombo.style.fill,lineWidth:dt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:dt.comboLabel.style.fill,fontSize:dt.comboLabel.style.fontSize}},stateStyles:Object(n.a)({},dt.comboStateStyles)},getSize:function(G){var B=Object(l.c)(G.size||this.options.size||dt.defaultCombo.size);return Object(l.m)(B)&&B.length===1&&(B=[B[0],B[0]]),Object(l.m)(B)||(B=[B,B]),B},getLabelStyleByPosition:function(G,B){var $=B.position||this.labelPosition,ut=G.style,Bt=G.padding||this.options.padding;Object(l.m)(Bt)&&(Bt=Bt[0]);var Jt=B.refX,ie=B.refY;Object(l.s)(Jt)&&(Jt=this.refX),Object(l.s)(ie)&&(ie=this.refY);var se,Ce=this.getSize(G),Ee=(Math.max(ut.r,Ce[0]/2)||Ce[0]/2)+Bt;switch($){case"top":se={x:0,y:-Ee-ie,textBaseline:"bottom",textAlign:"center"};break;case"bottom":se={x:0,y:Ee+ie,textBaseline:"bottom",textAlign:"center"};break;case"left":se={x:-Ee+Jt,y:0,textAlign:"left"};break;case"center":se={x:0,y:0,text:G.label,textAlign:"center"};break;default:se={x:Ee+Jt,y:0,textAlign:"right"}}return se.text=G.label,se},drawShape:function(G,B){var $=this.shapeType,ut=this.getShapeStyle(G);return B.addShape($,{attrs:ut,draggable:!0,name:"combo-shape"})},updateShape:function(G,B,$){var ut=B.get("keyShape");(G.animate===void 0?this.options.animate:G.animate)&&ut.animate?ut.animate($,{duration:200,easing:"easeLinear"}):ut.attr(Object(n.a)({},$)),this.updateLabel(G,B)}},xr=Object(n.a)(Object(n.a)({},vr),wr);jr.registerCombo("single-combo",xr),jr.registerCombo("circle",{options:{size:[dt.defaultCombo.size[0],dt.defaultCombo.size[0]],padding:dt.defaultCombo.padding[0],animate:!0,style:{stroke:dt.defaultCombo.style.stroke,fill:dt.defaultCombo.style.fill,lineWidth:dt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:dt.comboLabel.style.fill,fontSize:dt.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:Object(n.a)({},dt.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function(G,B){var $=this.getShapeStyle(G);return delete $.height,delete $.width,B.addShape("circle",{attrs:$,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(G){var B=this.options.style,$=G.padding||this.options.padding;Object(l.m)($)&&($=$[0]);var ut,Bt={stroke:G.color},Jt=Object(l.A)({},B,Bt,G.style),ie=this.getSize(G);ut=!Object(l.t)(Jt.r)||isNaN(Jt.r)?ie[0]/2||dt.defaultCombo.style.r:Math.max(Jt.r,ie[0]/2)||ie[0]/2,Jt.r=ut+$;var se=Object(n.a)({x:0,y:0},Jt);return G.style?G.style.r=ut:G.style={r:ut},se},update:function(G,B){var $=this.getSize(G),ut=G.padding||this.options.padding;Object(l.m)(ut)&&(ut=ut[0]);var Bt=Object(l.c)(G.style),Jt=Math.max(Bt.r,$[0]/2)||$[0]/2;Bt.r=Jt+ut;var ie=B.get("sizeCache");ie&&(ie.r=Bt.r);var se={stroke:G.color},Ce=B.get("keyShape"),Ee=Object(l.A)({},Ce.attr(),se,Bt);G.style?G.style.r=Jt:G.style={r:Jt},this.updateShape(G,B,Ee,!0)}},"single-combo"),jr.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:dt.defaultCombo.style.stroke,fill:dt.defaultCombo.style.fill,lineWidth:dt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:dt.comboLabel.style.fill,fontSize:dt.comboLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(n.a)({},dt.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function(G,B){var $=this.getShapeStyle(G);return B.addShape("rect",{attrs:$,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(G,B){var $=B.position||this.labelPosition,ut=G.style,Bt=G.padding||this.options.padding;Object(l.t)(Bt)&&(Bt=[Bt,Bt,Bt,Bt]);var Jt=B.refX,ie=B.refY;Object(l.s)(Jt)&&(Jt=this.refX),Object(l.s)(ie)&&(ie=this.refY);var se,Ce=ut.width/2+Bt[3],Ee=ut.height/2+Bt[0];switch($){case"top":se={x:0-Ce+Jt,y:0-Ee+ie,textBaseline:"top",textAlign:"left"};break;case"bottom":se={x:0,y:Ee+ie,textBaseline:"bottom",textAlign:"center"};break;case"left":se={x:0-Ce+ie,y:0,textAlign:"left"};break;case"center":se={x:0,y:0,text:G.label,textAlign:"center"};break;default:se={x:Ce+Jt,y:0,textAlign:"right"}}return se.text=G.label,se},getShapeStyle:function(G){var B=this.options.style,$=G.padding||this.options.padding;Object(l.t)($)&&($=[$,$,$,$]);var ut,Bt,Jt={stroke:G.color},ie=Object(l.A)({},B,Jt,G.style),se=this.getSize(G);ut=!Object(l.t)(ie.width)||isNaN(ie.width)?se[0]||dt.defaultCombo.style.width:Math.max(ie.width,se[0])||se[0],Bt=!Object(l.t)(ie.height)||isNaN(ie.height)?se[1]||dt.defaultCombo.style.height:Math.max(ie.height,se[1])||se[1];var Ce=-ut/2-$[3],Ee=-Bt/2-$[0];ie.width=ut+$[1]+$[3],ie.height=Bt+$[0]+$[2];var cn=Object(n.a)({x:Ce,y:Ee},ie);return G.style?(G.style.width=ut,G.style.height=Bt):G.style={width:ut,height:Bt},cn},update:function(G,B){var $=this.getSize(G),ut=G.padding||this.options.padding;Object(l.t)(ut)&&(ut=[ut,ut,ut,ut]);var Bt=Object(l.c)(G.style),Jt=Math.max(Bt.width,$[0])||$[0],ie=Math.max(Bt.height,$[1])||$[1];Bt.width=Jt+ut[1]+ut[3],Bt.height=ie+ut[0]+ut[2];var se=B.get("sizeCache");se&&(se.width=Bt.width,se.height=Bt.height),Bt.x=-Jt/2-ut[3],Bt.y=-ie/2-ut[0];var Ce={stroke:G.color},Ee=B.get("keyShape"),cn=Object(l.A)({},Ee.attr(),Ce,Bt);G.style?(G.style.width=Jt,G.style.height=ie):G.style={width:Jt,height:ie},this.updateShape(G,B,cn,!1)},updateShape:function(G,B,$){var ut=B.get("keyShape");(G.animate===void 0?this.options.animate:G.animate)&&ut.animate?ut.animate($,{duration:200,easing:"easeLinear"}):ut.attr(Object(n.a)({},$)),this.updateLabel(G,B)}},"single-combo"),jr.registerNode("simple-circle",{options:{size:dt.defaultNode.size,style:{x:0,y:0,stroke:dt.defaultNode.style.stroke,fill:dt.defaultNode.style.fill,lineWidth:dt.defaultNode.style.lineWidth},labelCfg:{style:{fill:dt.nodeLabel.style.fill,fontSize:dt.nodeLabel.style.fontSize}},stateStyles:Object(n.a)({},dt.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",drawShape:function(G,B){var $=this.getShapeStyle(G);return B.addShape("circle",{attrs:$,className:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(G){var B=this.getOptions(G).style,$={stroke:G.color},ut=Object(l.e)({},B,$),Bt=this.getSize(G)[0]/2;return Object(n.a)({x:0,y:0,r:Bt},ut)},update:function(G,B){var $=this.getSize(G),ut={stroke:G.color,r:$[0]/2},Bt=B.get("keyShape"),Jt=Object(l.e)({},Bt.attr(),ut,G.style);this.updateShape(G,B,Jt,!0)}},"single-node"),jr.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:dt.defaultNode.style.stroke,fill:dt.defaultNode.style.fill,lineWidth:dt.defaultNode.style.lineWidth},labelCfg:{style:{fill:dt.nodeLabel.style.fill,fontSize:dt.nodeLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(n.a)({},dt.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(G,B){var $=this.getShapeStyle(G);return B.addShape("rect",{attrs:$,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(G){var B=this.getOptions(G).style,$={stroke:G.color},ut=Object(l.A)({},B,$),Bt=this.getSize(G),Jt=ut.width||Bt[0],ie=ut.height||Bt[1];return Object(n.a)({x:-Jt/2,y:-ie/2,width:Jt,height:ie},ut)},update:function(G,B){B.getContainer();var $=this.getOptions({}).style,ut=this.getSize(G),Bt=B.get("keyShape");G.size||(ut[0]=Bt.attr("width")||$.width,ut[1]=Bt.attr("height")||$.height);var Jt={stroke:G.color,x:-ut[0]/2,y:-ut[1]/2,width:ut[0],height:ut[1]},ie=Object(l.A)({},$,Bt.attr(),Jt);ie=Object(l.A)(ie,G.style),this.updateShape(G,B,ie,!1)}},"single-node"),jr.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(G,B){var $=this.shapeType,ut=this.getShapeStyle(G);delete ut.fill;var Bt=B.addShape($,{attrs:ut,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(G,Bt),Bt},drawClip:function(G,B){var $=this.getOptions(G).clipCfg;if($.show){var ut=$.type,Bt=$.x,Jt=$.y,ie=$.style;if(ut==="circle"){var se=$.r;B.setClip({type:"circle",attrs:Object(n.a)({r:se,x:Bt,y:Jt},ie)})}else if(ut==="rect"){var Ce=$.width,Ee=$.height,cn=Bt-Ce/2,xn=Jt-Ee/2;B.setClip({type:"rect",attrs:Object(n.a)({x:cn,y:xn,width:Ce,height:Ee},ie)})}else if(ut==="ellipse"){var _t=$.rx,Yt=$.ry;B.setClip({type:"ellipse",attrs:Object(n.a)({x:Bt,y:Jt,rx:_t,ry:Yt},ie)})}else if(ut==="polygon"){var Se=$.points;B.setClip({type:"polygon",attrs:Object(n.a)({points:Se},ie)})}else if(ut==="path"){var Wt=$.path;B.setClip({type:"path",attrs:Object(n.a)({path:Wt},ie)})}}},getShapeStyle:function(G){var B=this.getOptions(G).style,$=this.getSize(G),ut=this.getOptions(G).img,Bt=$[0],Jt=$[1];return B&&(Bt=B.width||$[0],Jt=B.height||$[1]),Object(n.a)({x:-Bt/2,y:-Jt/2,width:Bt,height:Jt,img:ut},B)},updateShapeStyle:function(G,B){var $=B.getContainer(),ut=this.itemType+"-shape",Bt=$.find(function(ie){return ie.get("className")===ut})||B.getKeyShape(),Jt=this.getShapeStyle(G);Bt&&Bt.attr(Jt)}},"single-node");var Er,Ir={triangle:function(G,B,$){G===void 0&&(G=10),B===void 0&&(B=15),$===void 0&&($=0);var ut=2*$;return"M "+ut+",0 L "+(ut+B)+",-"+G/2+" L "+(ut+B)+","+G/2+" Z"},vee:function(G,B,$){G===void 0&&(G=15),B===void 0&&(B=20),$===void 0&&($=0);var ut=2*$;return"M "+ut+",0 L "+(ut+B)+",-"+G/2+`
        L `+(ut+2*B/3)+",0 L "+(ut+B)+","+G/2+" Z"},circle:function(G,B){return G===void 0&&(G=5),B===void 0&&(B=0),"M "+2*B+`, 0
            a `+G+","+G+" 0 1,0 "+2*G+`,0
            a `+G+","+G+" 0 1,0 "+2*-G+",0"},rect:function(G,B,$){G===void 0&&(G=10),B===void 0&&(B=10),$===void 0&&($=0);var ut=2*$;return"M "+ut+","+-G/2+` 
        L `+(ut+B)+","+-G/2+` 
        L `+(ut+B)+","+G/2+` 
        L `+ut+","+G/2+" Z"},diamond:function(G,B,$){G===void 0&&(G=15),B===void 0&&(B=15),$===void 0&&($=0);var ut=2*$;return"M "+ut+`,0 
        L `+(ut+B/2)+","+-G/2+` 
        L `+(ut+B)+`,0 
        L `+(ut+B/2)+","+G/2+" Z"},triangleRect:function(G,B,$,ut,Bt,Jt){G===void 0&&(G=15),B===void 0&&(B=15),$===void 0&&($=15),ut===void 0&&(ut=3),Bt===void 0&&(Bt=5),Jt===void 0&&(Jt=0);var ie=2*Jt,se=ie+B+Bt;return"M "+ie+",0 L "+(ie+B)+",-"+G/2+" L "+(ie+B)+","+G/2+` Z
            M `+se+", -"+$/2+`
            L `+(se+ut)+" -"+$/2+`
            L `+(se+ut)+" "+$/2+`
            L `+se+" "+$/2+`
            Z`}},Lr={collapse:function(G,B,$){return[["M",G-$,B],["a",$,$,0,1,0,2*$,0],["a",$,$,0,1,0,2*-$,0],["M",G-$+4,B],["L",G+$-4,B]]},expand:function(G,B,$){return[["M",G-$,B],["a",$,$,0,1,0,2*$,0],["a",$,$,0,1,0,2*-$,0],["M",G-$+4,B],["L",G-$+2*$-4,B],["M",G-$+$,B-$+4],["L",G,B+$-4]]},upTriangle:function(G,B,$){var ut=$*Math.cos(Math.PI/6),Bt=$*Math.sin(Math.PI/6);return[["M",G-ut,B+Bt],["L",G+ut,B+Bt],["L",G,B-$],["Z"]]},downTriangle:function(G,B,$){var ut=$*Math.cos(Math.PI/6),Bt=$*Math.sin(Math.PI/6);return[["M",G-ut,B-Bt],["L",G+ut,B-Bt],["L",G,B+$],["Z"]]}},Pr=jr,Dr=d.a.transform,ri=Object(n.a)(Object(n.a)(Object(n.a)(Object(n.a)(Object(n.a)({},p),m),O),r),{transform:Dr,mat3:d.b}),vi=function(){function pe(G){this.graph=G,this.layoutCfg=G.get("layout")||{},this.layoutType=this.layoutCfg.type,this.initLayout()}return pe.prototype.initLayout=function(){},pe.prototype.getLayoutType=function(){return this.layoutCfg.type},pe.prototype.refreshLayout=function(){var G=this.graph;G&&(G.get("animate")?G.positionsAnimate():G.refreshPositions())},pe.prototype.changeLayout=function(G){var B=this.graph,$=this.layoutMethod;this.layoutType=G,this.layoutCfg=B.get("layout")||{},this.layoutCfg.type=G,$&&$.destroy(),this.layout()},pe.prototype.changeData=function(){var G=this.layoutMethod;G&&G.destroy(),this.layout()},pe.prototype.destroyLayout=function(){var G=this.layoutMethod,B=this.graph;G&&G.destroy(),B.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethod=void 0},pe.prototype.setDataFromGraph=function(){for(var G=[],B=[],$=[],ut=this.graph.getNodes(),Bt=this.graph.getEdges(),Jt=this.graph.getCombos(),ie=ut.length,se=0;se<ie;se++){var Ce=ut[se];if(Ce.isVisible()){var Ee=Ce.getModel();G.push(Ee)}}var cn=Bt.length;for(se=0;se<cn;se++){var xn=Bt[se];xn&&!xn.destroyed&&xn.isVisible()&&((Ee=xn.getModel()).isComboEdge||B.push(Ee))}var _t=Jt.length;for(se=0;se<_t;se++){var Yt=Jt[se];!Yt.destroyed&&Yt.isVisible()&&(Ee=Yt.getModel(),$.push(Ee))}return{nodes:G,edges:B,combos:$}},pe.prototype.relayout=function(G){var B=this.graph,$=this.layoutMethod,ut=this.layoutCfg;if(G){this.data=this.setDataFromGraph();var Bt=this.data.nodes;if(!Bt)return!1;this.initPositions(ut.center,Bt),$.init(this.data)}this.layoutType==="force"&&($.ticking=!1,$.forceSimulation.stop()),B.emit("beforelayout"),$.execute(G),$.isCustomLayout&&ut.onLayoutEnd&&ut.onLayoutEnd()},pe.prototype.layoutAnimate=function(){},pe.prototype.moveToZero=function(){var G=this.graph.get("data").nodes;if(G[0].x!==void 0&&G[0].x!==null&&!Xt(G[0].x)){for(var B=[0,0],$=G.length,ut=0;ut<$;ut++){var Bt=G[ut];B[0]+=Bt.x,B[1]+=Bt.y}for(B[0]/=G.length,B[1]/=G.length,ut=0;ut<$;ut++)(Bt=G[ut]).x-=B[0],Bt.y-=B[1]}},pe.prototype.initPositions=function(G,B){var $=this.graph;if(!B)return!1;var ut=!0,Bt=.85*$.get("width"),Jt=.85*$.get("height"),ie=B.length,se=Math.ceil(Math.sqrt(ie)*(Bt/Jt)),Ce=Bt/(se-1),Ee=Jt/(Math.ceil(ie/se)-1);isFinite(Ce)&&Ce||(Ce=0),isFinite(Ee)&&Ce||(Ee=0);for(var cn=G[0]-Bt/2,xn=G[1]-Jt/2,_t=B.length,Yt=0;Yt<_t;Yt++){var Se=B[Yt];Xt(Se.x)&&(ut=!1,Se.x=Yt%se*Ce+cn),Xt(Se.y)&&(ut=!1,Se.y=Math.floor(Yt/se)*Ee+xn)}return ut},pe.prototype.destroy=function(){var G=this.layoutMethod;this.graph=null,G&&(G.destroy(),G.destroyed=!0),this.destroyed=!0},pe}(),ii=function(G){this.graph=G,this.destroyed=!1,this.initEvents()};(function(pe){pe.CLICK="click",pe.DBLCLICK="dblclick",pe.MOUSEDOWN="mousedown",pe.MOUDEUP="mouseup",pe.CONTEXTMENU="contextmenu",pe.MOUSEENTER="mouseenter",pe.MOUSEOUT="mouseout",pe.MOUSEOVER="mouseover",pe.MOUSEMOVE="mousemove",pe.MOUSELEAVE="mouseleave",pe.DRAGSTART="dragstart",pe.DRAGEND="dragend",pe.DRAG="drag",pe.DRAGENTER="dragenter",pe.DRAGLEAVE="dragleave",pe.DRAGOVER="dragover",pe.DRAGOUT="dragout",pe.DDROP="drop",pe.KEYUP="keyup",pe.KEYDOWN="keydown",pe.WHEEL="wheel",pe.FOCUS="focus",pe.BLUR="blur",pe.TOUCHSTART="touchstart",pe.TOUCHMOVE="touchmove",pe.TOUCHEND="touchend",pe.NODE_CONTEXTMENU="node:contextmenu",pe.NODE_CLICK="node:click",pe.NODE_DBLCLICK="node:dblclick",pe.NODE_MOUSEDOWN="node:mousedown",pe.NODE_MOUSEUP="node:mouseup",pe.NODE_MOUSEENTER="node:mouseenter",pe.NODE_MOUSELEAVE="node:mouseleave",pe.NODE_MOUSEMOVE="node:mousemove",pe.NODE_MOUSEOUT="node:mouseout",pe.NODE_MOUSEOVER="node:mouseover",pe.NODE_DROP="node:drop",pe.NODE_DRAGOVER="node:dragover",pe.NODE_DRAGENTER="node:dragenter",pe.NODE_DRAGLEAVE="node:dragleave",pe.NODE_DRAGSTART="node:dragstart",pe.NODE_DRAG="node:drag",pe.NODE_DRAGEND="node:dragend",pe.COMBO_CONTEXTMENU="combo:contextmenu",pe.COMBO_CLICK="combo:click",pe.COMBO_DBLCLICK="combo:dblclick",pe.COMBO_MOUSEDOWN="combo:mousedown",pe.COMBO_MOUSEUP="combo:mouseup",pe.COMBO_MOUSEENTER="combo:mouseenter",pe.COMBO_MOUSELEAVE="combo:mouseleave",pe.COMBO_MOUSEMOVE="combo:mousemove",pe.COMBO_MOUSEOUT="combo:mouseout",pe.COMBO_MOUSEOVER="combo:mouseover",pe.COMBO_DROP="combo:drop",pe.COMBO_DRAGOVER="combo:dragover",pe.COMBO_DRAGENTER="combo:dragenter",pe.COMBO_DRAGLEAVE="combo:dragleave",pe.COMBO_DRAGSTART="combo:dragstart",pe.COMBO_DRAG="combo:drag",pe.COMBO_DRAGEND="combo:dragend",pe.EDGE_CONTEXTMENU="edge:contextmenu",pe.EDGE_CLICK="edge:click",pe.EDGE_DBLCLICK="edge:dblclick",pe.EDGE_MOUSEDOWN="edge:mousedown",pe.EDGE_MOUSEUP="edge:mouseup",pe.EDGE_MOUSEENTER="edge:mouseenter",pe.EDGE_MOUSELEAVE="edge:mouseleave",pe.EDGE_MOUSEMOVE="edge:mousemove",pe.EDGE_MOUSEOUT="edge:mouseout",pe.EDGE_MOUSEOVER="edge:mouseover",pe.EDGE_DROP="edge:drop",pe.EDGE_DRAGOVER="edge:dragover",pe.EDGE_DRAGENTER="edge:dragenter",pe.EDGE_DRAGLEAVE="edge:dragleave",pe.CANVAS_CONTEXTMENU="canvas:contextmenu",pe.CANVAS_CLICK="canvas:click",pe.CANVAS_DBLCLICK="canvas:dblclick",pe.CANVAS_MOUSEDOWN="canvas:mousedown",pe.CANVAS_MOUSEUP="canvas:mouseup",pe.CANVAS_MOUSEENTER="canvas:mouseenter",pe.CANVAS_MOUSELEAVE="canvas:mouseleave",pe.CANVAS_MOUSEMOVE="canvas:mousemove",pe.CANVAS_MOUSEOUT="canvas:mouseout",pe.CANVAS_MOUSEOVER="canvas:mouseover",pe.CANVAS_DROP="canvas:drop",pe.CANVAS_DRAGENTER="canvas:dragenter",pe.CANVAS_DRAGLEAVE="canvas:dragleave",pe.CANVAS_DRAGSTART="canvas:dragstart",pe.CANVAS_DRAG="canvas:drag",pe.CANVAS_DRAGEND="canvas:dragend",pe.BEFORERENDER="beforerender",pe.AFTERRENDER="afterrender",pe.BEFOREADDITEM="beforeadditem",pe.AFTERADDITEM="afteradditem",pe.BEFOREREMOVEITEM="beforeremoveitem",pe.AFTERREMOVEITEM="afterremoveitem",pe.BEFOREUPDATEITEM="beforeupdateitem",pe.AFTERUPDATEITEM="afterupdateitem",pe.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",pe.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",pe.BEFOREITEMSTATECHANGE="beforeitemstatechange",pe.AFTERITEMSTATECHANGE="afteritemstatechange",pe.BEFOREITEMREFRESH="beforeitemrefresh",pe.AFTERITEMREFRESH="afteritemrefresh",pe.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",pe.AFTERITEMSTATESCLEAR="afteritemstatesclear",pe.BEFOREMODECHANGE="beforemodechange",pe.AFTERMODECHANGE="aftermodechange",pe.BEFORELAYOUT="beforelayout",pe.AFTERLAYOUT="afterlayout",pe.BEFORECREATEEDGE="beforecreateedge",pe.AFTERCREATEEDGE="aftercreateedge",pe.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",pe.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",pe.BEFOREGRAPHREFRESH="beforegraphrefresh",pe.AFTERGRAPHREFRESH="aftergraphrefresh",pe.BEFOREANIMATE="beforeanimate",pe.AFTERANIMATE="afteranimate",pe.BEFOREPAINT="beforepaint",pe.AFTERPAINT="afterpaint",pe.BEFORECOLLAPSEEXPANDCOMBO="beforecollapseexpandcombo",pe.AFTERCOLLAPSEEXPANDCOMBO="aftercollapseexpandcombo",pe.GRAPHSTATECHANGE="graphstatechange",pe.AFTERACTIVATERELATIONS="afteractivaterelations",pe.NODESELECTCHANGE="nodeselectchange",pe.TOOLTIPCHANGE="tooltipchange",pe.WHEELZOOM="wheelzoom",pe.VIEWPORTCHANGE="viewportchange",pe.DRAGNODEEND="dragnodeend",pe.STACKCHANGE="stackchange"})(Er||(Er={}));var Si=Pr.registerNode,zi=Pr.registerEdge,Xi=Pr.registerCombo,Bi=y.registerBehavior,Di=dt;Pr.registerNode,Pr.registerEdge,Pr.registerCombo,y.registerBehavior},function(a,A){a.exports=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),function(r){r.TextureCompressionBC="texture-compression-bc"}(A.ExtensionName||(A.ExtensionName={})),function(r){r.ClampToEdge="clamp-to-edge",r.Repeat="repeat",r.MirrorRepeat="mirror-repeat"}(A.AddressMode||(A.AddressMode={})),function(r){r.UniformBuffer="uniform-buffer",r.StorageBuffer="storage-buffer",r.ReadonlyStorageBuffer="readonly-storage-buffer",r.Sampler="sampler",r.ComparisonSampler="comparison-sampler",r.SampledTexture="sampled-texture",r.ReadonlyStorageTexture="readonly-storage-texture",r.WriteonlyStorageTexture="writeonly-storage-texture"}(A.BindingType||(A.BindingType={})),function(r){r.Zero="zero",r.One="one",r.SrcColor="src-color",r.OneMinusSrcColor="one-minus-src-color",r.SrcAlpha="src-alpha",r.OneMinusSrcAlpha="one-minus-src-alpha",r.DstColor="dst-color",r.OneMinusDstColor="one-minus-dst-color",r.DstAlpha="dst-alpha",r.OneMinusDstAlpha="one-minus-dst-alpha",r.SrcAlphaSaturated="src-alpha-saturated",r.BlendColor="blend-color",r.OneMinusBlendColor="one-minus-blend-color"}(A.BlendFactor||(A.BlendFactor={})),function(r){r.Add="add",r.Subtract="subtract",r.ReverseSubtract="reverse-subtract",r.Min="min",r.Max="max"}(A.BlendOperation||(A.BlendOperation={})),function(r){r.Never="never",r.Less="less",r.Equal="equal",r.LessEqual="less-equal",r.Greater="greater",r.NotEqual="not-equal",r.GreaterEqual="greater-equal",r.Always="always"}(A.CompareFunction||(A.CompareFunction={})),function(r){r.None="none",r.Front="front",r.Back="back"}(A.CullMode||(A.CullMode={})),function(r){r.Nearest="nearest",r.Linear="linear"}(A.FilterMode||(A.FilterMode={})),function(r){r.CCW="ccw",r.CW="cw"}(A.FrontFace||(A.FrontFace={})),function(r){r.Uint16="uint16",r.Uint32="uint32"}(A.IndexFormat||(A.IndexFormat={})),function(r){r.Vertex="vertex",r.Instance="instance"}(A.InputStepMode||(A.InputStepMode={})),function(r){r.Load="load"}(A.LoadOp||(A.LoadOp={})),function(r){r.PointList="point-list",r.LineList="line-list",r.LineStrip="line-strip",r.TriangleList="triangle-list",r.TriangleStrip="triangle-strip"}(A.PrimitiveTopology||(A.PrimitiveTopology={})),function(r){r.Keep="keep",r.Zero="zero",r.Replace="replace",r.Invert="invert",r.IncrementClamp="increment-clamp",r.DecrementClamp="decrement-clamp",r.IncrementWrap="increment-wrap",r.DecrementWrap="decrement-wrap"}(A.StencilOperation||(A.StencilOperation={})),function(r){r.Store="store",r.Clear="clear"}(A.StoreOp||(A.StoreOp={})),function(r){r.E1d="1d",r.E2d="2d",r.E3d="3d"}(A.TextureDimension||(A.TextureDimension={})),function(r){r.R8Unorm="r8unorm",r.R8Snorm="r8snorm",r.R8Uint="r8uint",r.R8Sint="r8sint",r.R16Uint="r16uint",r.R16Sint="r16sint",r.R16Float="r16float",r.RG8Unorm="rg8unorm",r.RG8Snorm="rg8snorm",r.RG8Uint="rg8uint",r.RG8Sint="rg8sint",r.R32Uint="r32uint",r.R32Sint="r32sint",r.R32Float="r32float",r.RG16Uint="rg16uint",r.RG16Sint="rg16sint",r.RG16Float="rg16float",r.RGBA8Unorm="rgba8unorm",r.RGBA8UnormSRGB="rgba8unorm-srgb",r.RGBA8Snorm="rgba8snorm",r.RGBA8Uint="rgba8uint",r.RGBA8Sint="rgba8sint",r.BGRA8Unorm="bgra8unorm",r.BGRA8UnormSRGB="bgra8unorm-srgb",r.RGB10A2Unorm="rgb10a2unorm",r.RG11B10Float="rg11b10float",r.RG32Uint="rg32uint",r.RG32Sint="rg32sint",r.RG32Float="rg32float",r.RGBA16Uint="rgba16uint",r.RGBA16Sint="rgba16sint",r.RGBA16Float="rgba16float",r.RGBA32Uint="rgba32uint",r.RGBA32Sint="rgba32sint",r.RGBA32Float="rgba32float",r.Depth32Float="depth32float",r.Depth24Plus="depth24plus",r.Depth24PlusStencil8="depth24plus-stencil8"}(A.TextureFormat||(A.TextureFormat={})),function(r){r.Float="float",r.Sint="sint",r.Uint="uint"}(A.TextureComponentType||(A.TextureComponentType={})),function(r){r.E1d="1d",r.E2d="2d",r.E2dArray="2d-array",r.Cube="cube",r.CubeArray="cube-array",r.E3d="3d"}(A.TextureViewDimension||(A.TextureViewDimension={})),function(r){r.Uchar2="uchar2",r.Uchar4="uchar4",r.Char2="char2",r.Char4="char4",r.Uchar2Norm="uchar2norm",r.Uchar4Norm="uchar4norm",r.Char2Norm="char2norm",r.Char4Norm="char4norm",r.Ushort2="ushort2",r.Ushort4="ushort4",r.Short2="short2",r.Short4="short4",r.Ushort2Norm="ushort2norm",r.Ushort4Norm="ushort4norm",r.Short2Norm="short2norm",r.Short4Norm="short4norm",r.Half2="half2",r.Half4="half4",r.Float="float",r.Float2="float2",r.Float3="float3",r.Float4="float4",r.Uint="uint",r.Uint2="uint2",r.Uint3="uint3",r.Uint4="uint4",r.Int="int",r.Int2="int2",r.Int3="int3",r.Int4="int4"}(A.VertexFormat||(A.VertexFormat={})),function(r){r.All="all",r.StencilOnly="stencil-only",r.DepthOnly="depth-only"}(A.TextureAspect||(A.TextureAspect={})),function(r){r.Error="error",r.Warning="warning",r.Info="info"}(A.CompilationMessageType||(A.CompilationMessageType={})),function(r){r.Occlusion="occlusion"}(A.QueryType||(A.QueryType={})),function(r){r[r.MapRead=1]="MapRead",r[r.MapWrite=2]="MapWrite",r[r.CopySrc=4]="CopySrc",r[r.CopyDst=8]="CopyDst",r[r.Index=16]="Index",r[r.Vertex=32]="Vertex",r[r.Uniform=64]="Uniform",r[r.Storage=128]="Storage",r[r.Indirect=256]="Indirect",r[r.QueryResolve=512]="QueryResolve"}(A.BufferUsage||(A.BufferUsage={})),function(r){r[r.Red=1]="Red",r[r.Green=2]="Green",r[r.Blue=4]="Blue",r[r.Alpha=8]="Alpha",r[r.All=15]="All"}(A.ColorWrite||(A.ColorWrite={})),function(r){r[r.Vertex=1]="Vertex",r[r.Fragment=2]="Fragment",r[r.Compute=4]="Compute"}(A.ShaderStage||(A.ShaderStage={})),function(r){r[r.CopySrc=1]="CopySrc",r[r.CopyDst=2]="CopyDst",r[r.Sampled=4]="Sampled",r[r.Storage=8]="Storage",r[r.OutputAttachment=16]="OutputAttachment"}(A.TextureUsage||(A.TextureUsage={})),function(r){r[r.Read=1]="Read",r[r.Write=2]="Write"}(A.MapMode||(A.MapMode={}))},function(a,A){function e(r,p){for(var m=0;m<p.length;m++){var O=p[m];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(r,O.key,O)}}a.exports=function(r,p,m){return p&&e(r.prototype,p),m&&e(r,m),r}},function(a,A,e){a.exports=e(442)},function(a,A,e){"use strict";e.d(A,"b",function(){return p.a}),e.d(A,"c",function(){return p.d}),e.d(A,"d",function(){return p.e}),e.d(A,"a",function(){return r});var r={};e.r(r),e.d(r,"leftTranslate",function(){return m}),e.d(r,"leftRotate",function(){return O}),e.d(r,"leftScale",function(){return l}),e.d(r,"transform",function(){return E}),e.d(r,"direction",function(){return j}),e.d(r,"angleTo",function(){return y}),e.d(r,"vertical",function(){return n});var p=e(2);function m(s,d,M){var S=[0,0,0,0,0,0,0,0,0];return p.a.fromTranslation(S,M),p.a.multiply(s,S,d)}function O(s,d,M){var S=[0,0,0,0,0,0,0,0,0];return p.a.fromRotation(S,M),p.a.multiply(s,S,d)}function l(s,d,M){var S=[0,0,0,0,0,0,0,0,0];return p.a.fromScaling(S,M),p.a.multiply(s,S,d)}function E(s,d){for(var M,S,T,v=s?[].concat(s):[1,0,0,0,1,0,0,0,1],x=0,C=d.length;x<C;x++){var N=d[x];switch(N[0]){case"t":m(v,v,[N[1],N[2]]);break;case"s":l(v,v,[N[1],N[2]]);break;case"r":O(v,v,N[1]);break;case"m":M=v,S=v,T=N[1],p.a.multiply(M,T,S)}}return v}function j(s,d){return s[0]*d[1]-d[0]*s[1]}function y(s,d,M){var S=p.d.angle(s,d),T=j(s,d)>=0;return M?T?2*Math.PI-S:S:T?S:2*Math.PI-S}function n(s,d,M){return M?(s[0]=d[1],s[1]=-1*d[0]):(s[0]=-1*d[1],s[1]=d[0]),s}},function(a,A,e){"use strict";e.d(A,"b",function(){return r}),e.d(A,"a",function(){return p}),e.d(A,"c",function(){return m});var r=1e-6,p=typeof Float32Array!="undefined"?Float32Array:Array,m=Math.random;Math.hypot||(Math.hypot=function(){for(var O=0,l=arguments.length;l--;)O+=arguments[l]*arguments[l];return Math.sqrt(O)})},function(a,A){a.exports=function(e,r,p,m){p&&Object.defineProperty(e,r,{enumerable:p.enumerable,configurable:p.configurable,writable:p.writable,value:p.initializer?p.initializer.call(m):void 0})}},function(a,A){a.exports=function(e,r,p,m,O){var l={};return Object.keys(m).forEach(function(E){l[E]=m[E]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=p.slice().reverse().reduce(function(E,j){return j(e,r,E)||E},l),O&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(O):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(e,r,l),l=null),l}},function(a,A,e){"use strict";function r(y,n,s){if(y){if(typeof y.addEventListener=="function")return y.addEventListener(n,s,!1),{remove:function(){y.removeEventListener(n,s,!1)}};if(typeof y.attachEvent=="function")return y.attachEvent("on"+n,s),{remove:function(){y.detachEvent("on"+n,s)}}}}var p,m,O,l;function E(y){p||(p=document.createElement("table"),m=document.createElement("tr"),O=/^\s*<(\w+|!)[^>]*>/,l={tr:document.createElement("tbody"),tbody:p,thead:p,tfoot:p,td:m,th:m,"*":document.createElement("div")});var n=O.test(y)&&RegExp.$1;n&&n in l||(n="*");var s=l[n];y=y.replace(/(^\s*)|(\s*$)/g,""),s.innerHTML=""+y;var d=s.childNodes[0];return s.removeChild(d),d}function j(y,n){if(y)for(var s in n)n.hasOwnProperty(s)&&(y.style[s]=n[s]);return y}e.d(A,"a",function(){return r}),e.d(A,"b",function(){return E}),e.d(A,"c",function(){return j})},function(a,A){function e(r,p,m,O,l,E,j){try{var y=r[E](j),n=y.value}catch(s){return void m(s)}y.done?p(n):Promise.resolve(n).then(O,l)}a.exports=function(r){return function(){var p=this,m=arguments;return new Promise(function(O,l){var E=r.apply(p,m);function j(n){e(E,O,l,j,y,"next",n)}function y(n){e(E,O,l,j,y,"throw",n)}j(void 0)})}}},function(a,A,e){"use strict";e.d(A,"a",function(){return r}),e.d(A,"b",function(){return p});var r={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},p={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"}},function(a,A,e){"use strict";e.d(A,"d",function(){return p}),e.d(A,"b",function(){return m}),e.d(A,"e",function(){return O}),e.d(A,"f",function(){return l}),e.d(A,"l",function(){return E}),e.d(A,"j",function(){return j});var r=e(0);function p(){return window?window.devicePixelRatio:1}function m(y,n,s,d){var M=y-s,S=n-d;return Math.sqrt(M*M+S*S)}function O(y,n,s,d,M,S){return M>=y&&M<=y+s&&S>=n&&S<=n+d}function l(y,n){return!(n.minX>y.maxX||n.maxX<y.minX||n.minY>y.maxY||n.maxY<y.minY)}function E(y,n){return y&&n?{minX:Math.min(y.minX,n.minX),minY:Math.min(y.minY,n.minY),maxX:Math.max(y.maxX,n.maxX),maxY:Math.max(y.maxY,n.maxY)}:y||n}function j(y,n){return y[0]===n[0]&&y[1]===n[1]}e.d(A,"i",function(){return r.s}),e.d(A,"k",function(){return r.x}),e.d(A,"h",function(){return r.r}),e.d(A,"g",function(){return r.m}),e.d(A,"c",function(){return r.f}),e.d(A,"o",function(){return r.G}),e.d(A,"m",function(){return r.B}),e.d(A,"n",function(){return r.D}),e.d(A,"a",function(){return r.b})},function(a,A,e){"use strict";var r=e(51);e.d(A,"PathUtil",function(){return r});var p=e(156);e.o(p,"ICanvas")&&e.d(A,"ICanvas",function(){return p.ICanvas}),e.o(p,"IGroup")&&e.d(A,"IGroup",function(){return p.IGroup}),e.o(p,"IShape")&&e.d(A,"IShape",function(){return p.IShape});var m=e(157);e.o(m,"ICanvas")&&e.d(A,"ICanvas",function(){return m.ICanvas}),e.o(m,"IGroup")&&e.d(A,"IGroup",function(){return m.IGroup}),e.o(m,"IShape")&&e.d(A,"IShape",function(){return m.IShape});var O=e(114);e.d(A,"Event",function(){return O.a}),e(115);var l=e(247);e.d(A,"AbstractCanvas",function(){return l.a});var E=e(159);e.d(A,"AbstractGroup",function(){return E.a});var j=e(160);e.d(A,"AbstractShape",function(){return j.a});var y=e(248);e.d(A,"getBBoxMethod",function(){return y.a});var n=e(68);e.d(A,"getTextHeight",function(){return n.b}),e.d(A,"assembleFont",function(){return n.a});var s=e(19);e.d(A,"isAllowCapture",function(){return s.b});var d=e(39);e.d(A,"multiplyVec2",function(){return d.c}),e.d(A,"invert",function(){return d.a});var M=e(116);e.d(A,"getOffScreenContext",function(){return M.a})},function(a,A,e){"use strict";e.d(A,"j",function(){return p}),e.d(A,"c",function(){return m}),e.d(A,"g",function(){return O}),e.d(A,"b",function(){return l});var r=e(0);function p(E,j){var y=E.indexOf(j);y!==-1&&E.splice(y,1)}e.d(A,"e",function(){return r.s}),e.d(A,"d",function(){return r.r}),e.d(A,"h",function(){return r.x}),e.d(A,"f",function(){return r.v}),e.d(A,"i",function(){return r.A}),e.d(A,"a",function(){return r.f}),e.d(A,"k",function(){return r.I});var m=typeof window!="undefined"&&window.document!==void 0;function O(E,j){if(E.isCanvas())return!0;for(var y=j.getParent(),n=!1;y;){if(y===E){n=!0;break}y=y.getParent()}return n}function l(E){return E.cfg.visible&&E.cfg.capture}},function(a,A,e){"use strict";e.d(A,"e",function(){return x}),e.d(A,"b",function(){return pt}),e.d(A,"a",function(){return Lt}),e.d(A,"c",function(){return s}),e.d(A,"d",function(){return At}),e.d(A,"f",function(){return r});var r={};function p(q){return Math.min.apply(null,q)}function m(q){return Math.max.apply(null,q)}function O(q,ct,ot,_){var P=q-ot,Y=ct-_;return Math.sqrt(P*P+Y*Y)}function l(q,ct){return Math.abs(q-ct)<.001}function E(q,ct){var ot=p(q),_=p(ct);return{x:ot,y:_,width:m(q)-ot,height:m(ct)-_}}function j(q,ct,ot,_){return{minX:p([q,ot]),maxX:m([q,ot]),minY:p([ct,_]),maxY:m([ct,_])}}function y(q){return(q+2*Math.PI)%(2*Math.PI)}e.r(r),e.d(r,"distance",function(){return O}),e.d(r,"isNumberEqual",function(){return l}),e.d(r,"getBBoxByArray",function(){return E}),e.d(r,"getBBoxRange",function(){return j}),e.d(r,"piMod",function(){return y});var n=e(80),s={box:function(ct,ot,_,P){return E([ct,_],[ot,P])},length:function(ct,ot,_,P){return O(ct,ot,_,P)},pointAt:function(ct,ot,_,P,Y){return{x:(1-Y)*ct+Y*_,y:(1-Y)*ot+Y*P}},pointDistance:function(ct,ot,_,P,Y,k){var h=(_-ct)*(Y-ct)+(P-ot)*(k-ot);return h<0?O(ct,ot,Y,k):h>(_-ct)*(_-ct)+(P-ot)*(P-ot)?O(_,P,Y,k):this.pointToLine(ct,ot,_,P,Y,k)},pointToLine:function(ct,ot,_,P,Y,k){var h=[_-ct,P-ot];if(n.exactEquals(h,[0,0]))return Math.sqrt((Y-ct)*(Y-ct)+(k-ot)*(k-ot));var g=[-h[1],h[0]];n.normalize(g,g);var F=[Y-ct,k-ot];return Math.abs(n.dot(F,g))},tangentAngle:function(ct,ot,_,P){return Math.atan2(P-ot,_-ct)}};function d(q,ct,ot,_,P,Y){var k,h=1/0,g=[ot,_],F=20;Y&&Y>200&&(F=Y/10);for(var V=1/F,H=V/10,et=0;et<=F;et++){var nt=et*V,St=[P.apply(null,q.concat([nt])),P.apply(null,ct.concat([nt]))];(Ct=O(g[0],g[1],St[0],St[1]))<h&&(k=nt,h=Ct)}if(k===0)return{x:q[0],y:ct[0]};if(k===1){var dt=q.length;return{x:q[dt-1],y:ct[dt-1]}}for(h=1/0,et=0;et<32&&!(H<1e-4);et++){var gt=k-H,yt=k+H,Ct=(St=[P.apply(null,q.concat([gt])),P.apply(null,ct.concat([gt]))],O(g[0],g[1],St[0],St[1]));if(gt>=0&&Ct<h)k=gt,h=Ct;else{var Pt=[P.apply(null,q.concat([yt])),P.apply(null,ct.concat([yt]))],Ft=O(g[0],g[1],Pt[0],Pt[1]);yt<=1&&Ft<h?(k=yt,h=Ft):H*=.5}}return{x:P.apply(null,q.concat([k])),y:P.apply(null,ct.concat([k]))}}function M(q,ct,ot,_){var P=1-_;return P*P*q+2*_*P*ct+_*_*ot}function S(q,ct,ot){var _=q+ot-2*ct;if(l(_,0))return[.5];var P=(q-ct)/_;return P<=1&&P>=0?[P]:[]}function T(q,ct,ot,_){return 2*(1-_)*(ct-q)+2*_*(ot-ct)}function v(q,ct,ot,_,P,Y,k){var h=M(q,ot,P,k),g=M(ct,_,Y,k),F=s.pointAt(q,ct,ot,_,k),V=s.pointAt(ot,_,P,Y,k);return[[q,ct,F.x,F.y,h,g],[h,g,V.x,V.y,P,Y]]}var x={box:function(ct,ot,_,P,Y,k){var h=S(ct,_,Y)[0],g=S(ot,P,k)[0],F=[ct,Y],V=[ot,k];return h!==void 0&&F.push(M(ct,_,Y,h)),g!==void 0&&V.push(M(ot,P,k,g)),E(F,V)},length:function(ct,ot,_,P,Y,k){return function h(g,F,V,H,et,nt,St){if(St===0)return(O(g,F,V,H)+O(V,H,et,nt)+O(g,F,et,nt))/2;var dt=v(g,F,V,H,et,nt,.5),gt=dt[0],yt=dt[1];return gt.push(St-1),yt.push(St-1),h.apply(null,gt)+h.apply(null,yt)}(ct,ot,_,P,Y,k,3)},nearestPoint:function(ct,ot,_,P,Y,k,h,g){return d([ct,_,Y],[ot,P,k],h,g,M)},pointDistance:function(ct,ot,_,P,Y,k,h,g){var F=this.nearestPoint(ct,ot,_,P,Y,k,h,g);return O(F.x,F.y,h,g)},interpolationAt:M,pointAt:function(ct,ot,_,P,Y,k,h){return{x:M(ct,_,Y,h),y:M(ot,P,k,h)}},divide:function(ct,ot,_,P,Y,k,h){return v(ct,ot,_,P,Y,k,h)},tangentAngle:function(ct,ot,_,P,Y,k,h){var g=T(ct,_,Y,h),F=T(ot,P,k,h);return y(Math.atan2(F,g))}};function C(q,ct,ot,_,P){var Y=1-P;return Y*Y*Y*q+3*ct*P*Y*Y+3*ot*P*P*Y+_*P*P*P}function N(q,ct,ot,_,P){var Y=1-P;return 3*(Y*Y*(ct-q)+2*Y*P*(ot-ct)+P*P*(_-ot))}function X(q,ct,ot,_){var P,Y,k,h=-3*q+9*ct-9*ot+3*_,g=6*q-12*ct+6*ot,F=3*ct-3*q,V=[];if(l(h,0))l(g,0)||(P=-F/g)>=0&&P<=1&&V.push(P);else{var H=g*g-4*h*F;l(H,0)?V.push(-g/(2*h)):H>0&&(Y=(-g-(k=Math.sqrt(H)))/(2*h),(P=(-g+k)/(2*h))>=0&&P<=1&&V.push(P),Y>=0&&Y<=1&&V.push(Y))}return V}function tt(q,ct,ot,_,P,Y,k,h,g){var F=C(q,ot,P,k,g),V=C(ct,_,Y,h,g),H=s.pointAt(q,ct,ot,_,g),et=s.pointAt(ot,_,P,Y,g),nt=s.pointAt(P,Y,k,h,g),St=s.pointAt(H.x,H.y,et.x,et.y,g),dt=s.pointAt(et.x,et.y,nt.x,nt.y,g);return[[q,ct,H.x,H.y,St.x,St.y,F,V],[F,V,dt.x,dt.y,nt.x,nt.y,k,h]]}function it(q,ct,ot,_,P,Y,k,h,g){if(g===0)return function(et,nt){for(var St=0,dt=et.length,gt=0;gt<dt;gt++)St+=O(et[gt],nt[gt],et[(gt+1)%dt],nt[(gt+1)%dt]);return St/2}([q,ot,P,k],[ct,_,Y,h]);var F=tt(q,ct,ot,_,P,Y,k,h,.5),V=F[0],H=F[1];return V.push(g-1),H.push(g-1),it.apply(null,V)+it.apply(null,H)}var pt={extrema:X,box:function(ct,ot,_,P,Y,k,h,g){for(var F=[ct,h],V=[ot,g],H=X(ct,_,Y,h),et=X(ot,P,k,g),nt=0;nt<H.length;nt++)F.push(C(ct,_,Y,h,H[nt]));for(nt=0;nt<et.length;nt++)V.push(C(ot,P,k,g,et[nt]));return E(F,V)},length:function(ct,ot,_,P,Y,k,h,g){return it(ct,ot,_,P,Y,k,h,g,3)},nearestPoint:function(ct,ot,_,P,Y,k,h,g,F,V,H){return d([ct,_,Y,h],[ot,P,k,g],F,V,C,H)},pointDistance:function(ct,ot,_,P,Y,k,h,g,F,V,H){var et=this.nearestPoint(ct,ot,_,P,Y,k,h,g,F,V,H);return O(et.x,et.y,F,V)},interpolationAt:C,pointAt:function(ct,ot,_,P,Y,k,h,g,F){return{x:C(ct,_,Y,h,F),y:C(ot,P,k,g,F)}},divide:function(ct,ot,_,P,Y,k,h,g,F){return tt(ct,ot,_,P,Y,k,h,g,F)},tangentAngle:function(ct,ot,_,P,Y,k,h,g,F){var V=N(ct,_,Y,h,F),H=N(ot,P,k,g,F);return y(Math.atan2(H,V))}};function ft(q,ct){var ot=Math.abs(q);return ct>0?ot:-1*ot}var Ot=function(ct,ot,_,P,Y,k){var h=_,g=P;if(h===0||g===0)return{x:ct,y:ot};for(var F,V,H=Y-ct,et=k-ot,nt=Math.abs(H),St=Math.abs(et),dt=h*h,gt=g*g,yt=Math.PI/4,Ct=0;Ct<4;Ct++){F=h*Math.cos(yt),V=g*Math.sin(yt);var Pt=(dt-gt)*Math.pow(Math.cos(yt),3)/h,Ft=(gt-dt)*Math.pow(Math.sin(yt),3)/g,Tt=F-Pt,zt=V-Ft,Xt=nt-Pt,re=St-Ft,de=Math.hypot(zt,Tt),ye=Math.hypot(re,Xt);yt+=de*Math.asin((Tt*re-zt*Xt)/(de*ye))/Math.sqrt(dt+gt-F*F-V*V),yt=Math.min(Math.PI/2,Math.max(0,yt))}return{x:ct+ft(F,H),y:ot+ft(V,et)}};function wt(q,ct,ot,_,P,Y){return ot*Math.cos(P)*Math.cos(Y)-_*Math.sin(P)*Math.sin(Y)+q}function xt(q,ct,ot,_,P,Y){return ot*Math.sin(P)*Math.cos(Y)+_*Math.cos(P)*Math.sin(Y)+ct}function lt(q,ct,ot){return{x:q*Math.cos(ot),y:ct*Math.sin(ot)}}function Vt(q,ct,ot){var _=Math.cos(ot),P=Math.sin(ot);return[q*_-ct*P,q*P+ct*_]}var Lt={box:function(ct,ot,_,P,Y,k,h){for(var g=function(Tt,zt,Xt){return Math.atan(-zt/Tt*Math.tan(Xt))}(_,P,Y),F=1/0,V=-1/0,H=[k,h],et=2*-Math.PI;et<=2*Math.PI;et+=Math.PI){var nt=g+et;k<h?k<nt&&nt<h&&H.push(nt):h<nt&&nt<k&&H.push(nt)}for(et=0;et<H.length;et++){var St=wt(ct,0,_,P,Y,H[et]);St<F&&(F=St),St>V&&(V=St)}var dt=function(Tt,zt,Xt){return Math.atan(zt/(Tt*Math.tan(Xt)))}(_,P,Y),gt=1/0,yt=-1/0,Ct=[k,h];for(et=2*-Math.PI;et<=2*Math.PI;et+=Math.PI){var Pt=dt+et;k<h?k<Pt&&Pt<h&&Ct.push(Pt):h<Pt&&Pt<k&&Ct.push(Pt)}for(et=0;et<Ct.length;et++){var Ft=xt(0,ot,_,P,Y,Ct[et]);Ft<gt&&(gt=Ft),Ft>yt&&(yt=Ft)}return{x:F,y:gt,width:V-F,height:yt-gt}},length:function(ct,ot,_,P,Y,k,h){},nearestPoint:function(ct,ot,_,P,Y,k,h,g,F){var V=Vt(g-ct,F-ot,-Y),H=V[0],et=V[1],nt=Ot(0,0,_,P,H,et),St=function(gt,yt,Ct,Pt){return(Math.atan2(Pt*gt,Ct*yt)+2*Math.PI)%(2*Math.PI)}(_,P,nt.x,nt.y);St<k?nt=lt(_,P,k):St>h&&(nt=lt(_,P,h));var dt=Vt(nt.x,nt.y,Y);return{x:dt[0]+ct,y:dt[1]+ot}},pointDistance:function(ct,ot,_,P,Y,k,h,g,F){var V=this.nearestPoint(ct,ot,_,P,g,F);return O(V.x,V.y,g,F)},pointAt:function(ct,ot,_,P,Y,k,h,g){var F=(h-k)*g+k;return{x:wt(ct,0,_,P,Y,F),y:xt(0,ot,_,P,Y,F)}},tangentAngle:function(ct,ot,_,P,Y,k,h,g){var F=(h-k)*g+k,V=function(et,nt,St,dt,gt,yt,Ct,Pt){return-1*St*Math.cos(gt)*Math.sin(Pt)-dt*Math.sin(gt)*Math.cos(Pt)}(0,0,_,P,Y,0,0,F),H=function(et,nt,St,dt,gt,yt,Ct,Pt){return-1*St*Math.sin(gt)*Math.sin(Pt)+dt*Math.cos(gt)*Math.cos(Pt)}(0,0,_,P,Y,0,0,F);return y(Math.atan2(H,V))}};function Et(q){for(var ct=0,ot=[],_=0;_<q.length-1;_++){var P=q[_],Y=q[_+1],k=O(P[0],P[1],Y[0],Y[1]),h={from:P,to:Y,length:k};ot.push(h),ct+=k}return{segments:ot,totalLength:ct}}function J(q){if(q.length<2)return 0;for(var ct=0,ot=0;ot<q.length-1;ot++){var _=q[ot],P=q[ot+1];ct+=O(_[0],_[1],P[0],P[1])}return ct}function ht(q,ct){if(ct>1||ct<0||q.length<2)return null;var ot=Et(q),_=ot.segments,P=ot.totalLength;if(P===0)return{x:q[0][0],y:q[0][1]};for(var Y=0,k=null,h=0;h<_.length;h++){var g=_[h],F=g.from,V=g.to,H=g.length/P;if(ct>=Y&&ct<=Y+H){var et=(ct-Y)/H;k=s.pointAt(F[0],F[1],V[0],V[1],et);break}Y+=H}return k}function vt(q,ct){if(ct>1||ct<0||q.length<2)return 0;for(var ot=Et(q),_=ot.segments,P=ot.totalLength,Y=0,k=0,h=0;h<_.length;h++){var g=_[h],F=g.from,V=g.to,H=g.length/P;if(ct>=Y&&ct<=Y+H){k=Math.atan2(V[1]-F[1],V[0]-F[0]);break}Y+=H}return k}function bt(q,ct,ot){for(var _=1/0,P=0;P<q.length-1;P++){var Y=q[P],k=q[P+1],h=s.pointDistance(Y[0],Y[1],k[0],k[1],ct,ot);h<_&&(_=h)}return _}var At={box:function(ct){for(var ot=[],_=[],P=0;P<ct.length;P++){var Y=ct[P];ot.push(Y[0]),_.push(Y[1])}return E(ot,_)},length:function(ct){return J(ct)},pointAt:function(ct,ot){return ht(ct,ot)},pointDistance:function(ct,ot,_){return bt(ct,ot,_)},tangentAngle:function(ct,ot){return vt(ct,ot)}}},function(a,A){function e(r){return a.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(p){return p.__proto__||Object.getPrototypeOf(p)},e(r)}a.exports=e},function(a,A,e){"use strict";e.d(A,"b",function(){return m}),e.d(A,"a",function(){return O}),e.d(A,"d",function(){return l}),e.d(A,"c",function(){return E});var r=e(0),p=e(16);function m(j){return document.createElementNS("http://www.w3.org/2000/svg",j)}function O(j){var y=p.a[j.type],n=j.getParent();if(!y)throw new Error("the type "+j.type+" is not supported by svg");var s=m(y);if(j.get("id")&&(s.id=j.get("id")),j.set("el",s),j.set("attrs",{}),n){var d=n.get("el");d||(d=n.createDom(),n.set("el",d)),d.appendChild(s)}return s}function l(j,y){var n=j.get("el"),s=Object(r.F)(n.children).sort(y),d=document.createDocumentFragment();s.forEach(function(M){d.appendChild(M)}),n.appendChild(d)}function E(j,y){var n=j.parentNode,s=Array.from(n.childNodes).filter(function(T){return T.nodeType===1&&T.nodeName.toLowerCase()!=="defs"}),d=s[y],M=s.indexOf(j);if(d){if(M>y)n.insertBefore(j,d);else if(M<y){var S=s[y+1];S?n.insertBefore(j,S):n.appendChild(j)}}else n.appendChild(j)}},function(a,A,e){var r=e(474),p=e(475),m=e(218),O=e(476);a.exports=function(l){return r(l)||p(l)||m(l)||O()}},function(a,A,e){var r;try{r={cloneDeep:e(383),constant:e(134),defaults:e(384),each:e(181),filter:e(184),find:e(385),flatten:e(212),forEach:e(182),forIn:e(390),has:e(195),isUndefined:e(196),last:e(391),map:e(197),mapValues:e(392),max:e(393),merge:e(395),min:e(400),minBy:e(401),now:e(402),pick:e(403),range:e(408),reduce:e(199),sortBy:e(411),uniqueId:e(416),values:e(205),zipObject:e(417)}}catch(p){}r||(r=window._),a.exports=r},function(a,A){a.exports=function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(a,A){var e=Array.isArray;a.exports=e},function(a,A,e){var r=e(472);a.exports=function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),m&&r(p,m)}},function(a,A,e){var r=e(90),p=e(25);a.exports=function(m,O){return!O||r(O)!=="object"&&typeof O!="function"?p(m):O}},function(a,A,e){"use strict";e.d(A,"a",function(){return j}),e.d(A,"d",function(){return y}),e.d(A,"b",function(){return n}),e.d(A,"c",function(){return s}),e.d(A,"e",function(){return S}),e.d(A,"h",function(){return T}),e.d(A,"f",function(){return v}),e.d(A,"g",function(){return x});var r=e(0),p=e(120),m=e(89),O=e(17),l=e(34),E={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function j(C,N){var X=N.attr();for(var tt in X){var it=X[tt],pt=E[tt]?E[tt]:tt;pt==="matrix"&&it?C.transform(it[0],it[1],it[3],it[4],it[6],it[7]):pt==="lineDash"&&C.setLineDash?Object(r.m)(it)&&C.setLineDash(it):(pt==="strokeStyle"||pt==="fillStyle"?it=Object(p.b)(C,N,it):pt==="globalAlpha"&&(it*=C.globalAlpha),C[pt]=it)}}function y(C,N,X){for(var tt=0;tt<N.length;tt++){var it=N[tt];it.cfg.visible?it.draw(C,X):it.skipDraw()}}function n(C,N,X){var tt=C.get("refreshElements");Object(r.f)(tt,function(it){if(it!==C)for(var pt=it.cfg.parent;pt&&pt!==C&&!pt.cfg.refresh;)pt.cfg.refresh=!0,pt=pt.cfg.parent}),tt[0]===C?d(N,X):function it(pt,ft){for(var Ot=0;Ot<pt.length;Ot++){var wt=pt[Ot];if(wt.cfg.visible)if(wt.cfg.hasChanged)wt.cfg.refresh=!0,wt.isGroup()&&d(wt.cfg.children,ft);else if(wt.cfg.refresh)wt.isGroup()&&it(wt.cfg.children,ft);else{var xt=M(wt,ft);wt.cfg.refresh=xt,xt&&wt.isGroup()&&it(wt.cfg.children,ft)}}}(N,X)}function s(C){for(var N=0;N<C.length;N++){var X=C[N];X.cfg.hasChanged=!1,X.isGroup()&&!X.destroyed&&s(X.cfg.children)}}function d(C,N){for(var X=0;X<C.length;X++){var tt=C[X];tt.cfg.refresh=!0,tt.isGroup()&&d(tt.get("children"),N)}}function M(C,N){var X=C.cfg.cacheCanvasBBox;return C.cfg.isInView&&X&&Object(O.f)(X,N)}function S(C,N,X,tt){var it=X.path,pt=X.startArrow,ft=X.endArrow;if(it){var Ot=[0,0],wt=[0,0],xt={dx:0,dy:0};N.beginPath();for(var lt=0;lt<it.length;lt++){var Vt=it[lt],Lt=Vt[0];if(lt===0&&pt&&pt.d){var Et=C.getStartTangent();xt=l.c(Et[0][0],Et[0][1],Et[1][0],Et[1][1],pt.d)}else lt===it.length-2&&it[lt+1][0]==="Z"&&ft&&ft.d?it[lt+1][0]==="Z"&&(Et=C.getEndTangent(),xt=l.c(Et[0][0],Et[0][1],Et[1][0],Et[1][1],ft.d)):lt===it.length-1&&ft&&ft.d&&it[0]!=="Z"&&(Et=C.getEndTangent(),xt=l.c(Et[0][0],Et[0][1],Et[1][0],Et[1][1],ft.d));var J=xt.dx,ht=xt.dy;switch(Lt){case"M":N.moveTo(Vt[1]-J,Vt[2]-ht),wt=[Vt[1],Vt[2]];break;case"L":N.lineTo(Vt[1]-J,Vt[2]-ht);break;case"Q":N.quadraticCurveTo(Vt[1],Vt[2],Vt[3]-J,Vt[4]-ht);break;case"C":N.bezierCurveTo(Vt[1],Vt[2],Vt[3],Vt[4],Vt[5]-J,Vt[6]-ht);break;case"A":var vt=void 0;tt?(vt=tt[lt])||(vt=Object(m.a)(Ot,Vt),tt[lt]=vt):vt=Object(m.a)(Ot,Vt);var bt=vt.cx,At=vt.cy,q=vt.rx,ct=vt.ry,ot=vt.startAngle,_=vt.endAngle,P=vt.xRotation,Y=vt.sweepFlag;if(N.ellipse)N.ellipse(bt,At,q,ct,P,ot,_,1-Y);else{var k=q>ct?q:ct,h=q>ct?1:q/ct,g=q>ct?ct/q:1;N.translate(bt,At),N.rotate(P),N.scale(h,g),N.arc(0,0,k,ot,_,1-Y),N.scale(1/h,1/g),N.rotate(-P),N.translate(-bt,-At)}break;case"Z":N.closePath()}if(Lt==="Z")Ot=wt;else{var F=Vt.length;Ot=[Vt[F-2],Vt[F-1]]}}}}function T(C,N){var X=C.get("canvas");X&&(N==="remove"&&(C._cacheCanvasBBox=C.get("cacheCanvasBBox")),C.get("hasChanged")||(C.set("hasChanged",!0),C.cfg.parent&&C.cfg.parent.get("hasChanged")||(X.refreshElement(C,N,X),X.get("autoDraw")&&X.draw())))}function v(C){if(!C.length)return null;var N=[],X=[],tt=[],it=[];return Object(r.f)(C,function(pt){var ft=function(Ot){var wt;if(Ot.destroyed)wt=Ot._cacheCanvasBBox;else{var xt=Ot.get("cacheCanvasBBox"),lt=xt&&!(!xt.width||!xt.height),Vt=Ot.getCanvasBBox(),Lt=Vt&&!(!Vt.width||!Vt.height);lt&&Lt?wt=Object(O.l)(xt,Vt):lt?wt=xt:Lt&&(wt=Vt)}return wt}(pt);ft&&(N.push(ft.minX),X.push(ft.minY),tt.push(ft.maxX),it.push(ft.maxY))}),{minX:Math.min.apply(null,N),minY:Math.min.apply(null,X),maxX:Math.max.apply(null,tt),maxY:Math.max.apply(null,it)}}function x(C,N){return C&&N&&Object(O.f)(C,N)?{minX:Math.max(C.minX,N.minX),minY:Math.max(C.minY,N.minY),maxX:Math.min(C.maxX,N.maxX),maxY:Math.min(C.maxY,N.maxY)}:null}},function(a,A){a.exports=function(e,r){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}},function(a,A,e){"use strict";e.d(A,"a",function(){return l}),e.d(A,"b",function(){return n}),e.d(A,"c",function(){return M}),e.d(A,"d",function(){return X});var r=e(0),p=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,m=/[^\s\,]+/gi,O=function(it){var pt=it||[];return Object(r.m)(pt)?pt:Object(r.x)(pt)?(pt=pt.match(p),Object(r.f)(pt,function(ft,Ot){if((ft=ft.match(m))[0].length>1){var wt=ft[0].charAt(0);ft.splice(1,0,ft[0].substr(1)),ft[0]=wt}Object(r.f)(ft,function(xt,lt){isNaN(xt)||(ft[lt]=+xt)}),pt[Ot]=ft}),pt):void 0};function l(tt,it){for(var pt=[],ft=0,Ot=tt.length;Ot-2*!it>ft;ft+=2){var wt=[{x:+tt[ft-2],y:+tt[ft-1]},{x:+tt[ft],y:+tt[ft+1]},{x:+tt[ft+2],y:+tt[ft+3]},{x:+tt[ft+4],y:+tt[ft+5]}];it?ft?Ot-4===ft?wt[3]={x:+tt[0],y:+tt[1]}:Ot-2===ft&&(wt[2]={x:+tt[0],y:+tt[1]},wt[3]={x:+tt[2],y:+tt[3]}):wt[0]={x:+tt[Ot-2],y:+tt[Ot-1]}:Ot-4===ft?wt[3]=wt[2]:ft||(wt[0]={x:+tt[ft],y:+tt[ft+1]}),pt.push(["C",(-wt[0].x+6*wt[1].x+wt[2].x)/6,(-wt[0].y+6*wt[1].y+wt[2].y)/6,(wt[1].x+6*wt[2].x-wt[3].x)/6,(wt[1].y+6*wt[2].y-wt[3].y)/6,wt[2].x,wt[2].y])}return pt}var E=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,j=new RegExp("([a-z])["+E+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+E+"]*,?["+E+"]*)+)","ig"),y=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+E+"]*,?["+E+"]*","ig");function n(tt){if(!tt)return null;if(Object(r.m)(tt))return tt;var it={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},pt=[];return String(tt).replace(j,function(ft,Ot,wt){var xt=[],lt=Ot.toLowerCase();if(wt.replace(y,function(Vt,Lt){Lt&&xt.push(+Lt)}),lt==="m"&&xt.length>2&&(pt.push([Ot].concat(xt.splice(0,2))),lt="l",Ot=Ot==="m"?"l":"L"),lt==="o"&&xt.length===1&&pt.push([Ot,xt[0]]),lt==="r")pt.push([Ot].concat(xt));else for(;xt.length>=it[lt]&&(pt.push([Ot].concat(xt.splice(0,it[lt]))),it[lt]););return""}),pt}var s=/[a-z]/;function d(tt,it){return[it[0]+(it[0]-tt[0]),it[1]+(it[1]-tt[1])]}function M(tt){var it=n(tt);if(!it||!it.length)return[["M",0,0]];for(var pt=!1,ft=0;ft<it.length;ft++){var Ot=it[ft][0];if(s.test(Ot)||["V","H","T","S"].indexOf(Ot)>=0){pt=!0;break}}if(!pt)return it;var wt=[],xt=0,lt=0,Vt=0,Lt=0,Et=0,J=it[0];J[0]!=="M"&&J[0]!=="m"||(Vt=xt=+J[1],Lt=lt=+J[2],Et++,wt[0]=["M",xt,lt]),ft=Et;for(var ht=it.length;ft<ht;ft++){var vt=it[ft],bt=wt[ft-1],At=[],q=(Ot=vt[0]).toUpperCase();if(Ot!==q)switch(At[0]=q,q){case"A":At[1]=vt[1],At[2]=vt[2],At[3]=vt[3],At[4]=vt[4],At[5]=vt[5],At[6]=+vt[6]+xt,At[7]=+vt[7]+lt;break;case"V":At[1]=+vt[1]+lt;break;case"H":At[1]=+vt[1]+xt;break;case"M":Vt=+vt[1]+xt,Lt=+vt[2]+lt;break;default:for(var ct=1,ot=vt.length;ct<ot;ct++)At[ct]=+vt[ct]+(ct%2?xt:lt)}else At=it[ft];switch(q){case"Z":xt=+Vt,lt=+Lt;break;case"H":At=["L",xt=At[1],lt];break;case"V":At=["L",xt,lt=At[1]];break;case"T":xt=At[1],lt=At[2];var _=d([bt[1],bt[2]],[bt[3],bt[4]]);At=["Q",_[0],_[1],xt,lt];break;case"S":xt=At[At.length-2],lt=At[At.length-1];var P=bt.length,Y=d([bt[P-4],bt[P-3]],[bt[P-2],bt[P-1]]);At=["C",Y[0],Y[1],At[1],At[2],xt,lt];break;case"M":Vt=At[At.length-2],Lt=At[At.length-1];break;default:xt=At[At.length-2],lt=At[At.length-1]}wt.push(At)}return wt}function S(tt){return Math.sqrt(tt[0]*tt[0]+tt[1]*tt[1])}function T(tt,it){return S(tt)*S(it)?(tt[0]*it[0]+tt[1]*it[1])/(S(tt)*S(it)):1}function v(tt,it){return(tt[0]*it[1]<tt[1]*it[0]?-1:1)*Math.acos(T(tt,it))}function x(tt,it){return tt[0]===it[0]&&tt[1]===it[1]}function C(tt,it){var pt=it[1],ft=it[2],Ot=Object(r.B)(Object(r.G)(it[3]),2*Math.PI),wt=it[4],xt=it[5],lt=tt[0],Vt=tt[1],Lt=it[6],Et=it[7],J=Math.cos(Ot)*(lt-Lt)/2+Math.sin(Ot)*(Vt-Et)/2,ht=-1*Math.sin(Ot)*(lt-Lt)/2+Math.cos(Ot)*(Vt-Et)/2,vt=J*J/(pt*pt)+ht*ht/(ft*ft);vt>1&&(pt*=Math.sqrt(vt),ft*=Math.sqrt(vt));var bt=pt*pt*(ht*ht)+ft*ft*(J*J),At=bt?Math.sqrt((pt*pt*(ft*ft)-bt)/bt):1;wt===xt&&(At*=-1),isNaN(At)&&(At=0);var q=ft?At*pt*ht/ft:0,ct=pt?At*-ft*J/pt:0,ot=(lt+Lt)/2+Math.cos(Ot)*q-Math.sin(Ot)*ct,_=(Vt+Et)/2+Math.sin(Ot)*q+Math.cos(Ot)*ct,P=[(J-q)/pt,(ht-ct)/ft],Y=[(-1*J-q)/pt,(-1*ht-ct)/ft],k=v([1,0],P),h=v(P,Y);return T(P,Y)<=-1&&(h=Math.PI),T(P,Y)>=1&&(h=0),xt===0&&h>0&&(h-=2*Math.PI),xt===1&&h<0&&(h+=2*Math.PI),{cx:ot,cy:_,rx:x(tt,[Lt,Et])?0:pt,ry:x(tt,[Lt,Et])?0:ft,startAngle:k,endAngle:k+h,xRotation:Ot,arcFlag:wt,sweepFlag:xt}}function N(tt,it){return[it[0]+(it[0]-tt[0]),it[1]+(it[1]-tt[1])]}function X(tt){for(var it=[],pt=null,ft=null,Ot=null,wt=0,xt=(tt=O(tt)).length,lt=0;lt<xt;lt++){var Vt=tt[lt];ft=tt[lt+1];var Lt=Vt[0],Et={command:Lt,prePoint:pt,params:Vt,startTangent:null,endTangent:null};switch(Lt){case"M":Ot=[Vt[1],Vt[2]],wt=lt;break;case"A":var J=C(pt,Vt);Et.arcParams=J}if(Lt==="Z")pt=Ot,ft=tt[wt+1];else{var ht=Vt.length;pt=[Vt[ht-2],Vt[ht-1]]}ft&&ft[0]==="Z"&&(ft=tt[wt],it[wt]&&(it[wt].prePoint=pt)),Et.currentPoint=pt,it[wt]&&x(pt,it[wt].currentPoint)&&(it[wt].prePoint=Et.prePoint);var vt=ft?[ft[ft.length-2],ft[ft.length-1]]:null;Et.nextPoint=vt;var bt=Et.prePoint;if(["L","H","V"].includes(Lt))Et.startTangent=[bt[0]-pt[0],bt[1]-pt[1]],Et.endTangent=[pt[0]-bt[0],pt[1]-bt[1]];else if(Lt==="Q"){var At=[Vt[1],Vt[2]];Et.startTangent=[bt[0]-At[0],bt[1]-At[1]],Et.endTangent=[pt[0]-At[0],pt[1]-At[1]]}else if(Lt==="T")At=N((ot=it[lt-1]).currentPoint,bt),ot.command==="Q"?(Et.command="Q",Et.startTangent=[bt[0]-At[0],bt[1]-At[1]],Et.endTangent=[pt[0]-At[0],pt[1]-At[1]]):(Et.command="TL",Et.startTangent=[bt[0]-pt[0],bt[1]-pt[1]],Et.endTangent=[pt[0]-bt[0],pt[1]-bt[1]]);else if(Lt==="C"){var q=[Vt[1],Vt[2]],ct=[Vt[3],Vt[4]];Et.startTangent=[bt[0]-q[0],bt[1]-q[1]],Et.endTangent=[pt[0]-ct[0],pt[1]-ct[1]]}else if(Lt==="S"){var ot;q=N((ot=it[lt-1]).currentPoint,bt),ct=[Vt[1],Vt[2]],ot.command==="C"?(Et.command="C",Et.startTangent=[bt[0]-q[0],bt[1]-q[1]],Et.endTangent=[pt[0]-ct[0],pt[1]-ct[1]]):(Et.command="SQ",Et.startTangent=[bt[0]-ct[0],bt[1]-ct[1]],Et.endTangent=[pt[0]-ct[0],pt[1]-ct[1]])}else if(Lt==="A"){var _=.001,P=Et.arcParams||{},Y=P.cx,k=Y===void 0?0:Y,h=P.cy,g=h===void 0?0:h,F=P.rx,V=F===void 0?0:F,H=P.ry,et=H===void 0?0:H,nt=P.sweepFlag,St=nt===void 0?0:nt,dt=P.startAngle,gt=dt===void 0?0:dt,yt=P.endAngle,Ct=yt===void 0?0:yt;St===0&&(_*=-1);var Pt=V*Math.cos(gt-_)+k,Ft=et*Math.sin(gt-_)+g;Et.startTangent=[Pt-Ot[0],Ft-Ot[1]];var Tt=V*Math.cos(gt+Ct+_)+k,zt=et*Math.sin(gt+Ct-_)+g;Et.endTangent=[bt[0]-Tt,bt[1]-zt]}it.push(Et)}return it}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.POST_CONSTRUCT=A.DESIGN_PARAM_TYPES=A.PARAM_TYPES=A.TAGGED_PROP=A.TAGGED=A.MULTI_INJECT_TAG=A.INJECT_TAG=A.OPTIONAL_TAG=A.UNMANAGED_TAG=A.NAME_TAG=A.NAMED_TAG=void 0,A.NAMED_TAG="named",A.NAME_TAG="name",A.UNMANAGED_TAG="unmanaged",A.OPTIONAL_TAG="optional",A.INJECT_TAG="inject",A.MULTI_INJECT_TAG="multi_inject",A.TAGGED="inversify:tagged",A.TAGGED_PROP="inversify:tagged_props",A.PARAM_TYPES="inversify:paramtypes",A.DESIGN_PARAM_TYPES="design:paramtypes",A.POST_CONSTRUCT="post_construct"},function(a,A,e){var r,p,m;function O(l){return(O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(l)}(function(l,E){O(A)=="object"&&a!==void 0?E(A):(p=[A],(m=typeof(r=E)=="function"?r.apply(A,p):r)===void 0||(a.exports=m))})(0,function(l){"use strict";var E=function(ht,vt){var bt=ht.nodes,At=ht.edges,q=[],ct={};if(!bt)throw Error("invalid nodes data!");return bt&&bt.forEach(function(ot,_){ct[ot.id]=_,q.push([])}),At&&At.forEach(function(ot){var _=ct[ot.source],P=ct[ot.target];q[_][P]=1,vt||(q[P][_]=1)}),q};function j(J,ht){if(!(J instanceof ht))throw new TypeError("Cannot call a class as a function")}function y(J,ht){for(var vt=0;ht.length>vt;vt++){var bt=ht[vt];bt.enumerable=bt.enumerable||!1,bt.configurable=!0,"value"in bt&&(bt.writable=!0),Object.defineProperty(J,bt.key,bt)}}function n(J,ht,vt){return ht&&y(J.prototype,ht),vt&&y(J,vt),J}function s(J){return function(ht){if(Array.isArray(ht))return M(ht)}(J)||function(ht){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(ht))return Array.from(ht)}(J)||d(J)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(J,ht){if(J){if(typeof J=="string")return M(J,ht);var vt=Object.prototype.toString.call(J).slice(8,-1);return vt==="Object"&&J.constructor&&(vt=J.constructor.name),vt==="Map"||vt==="Set"?Array.from(J):vt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(vt)?M(J,ht):void 0}}function M(J,ht){(ht==null||ht>J.length)&&(ht=J.length);for(var vt=0,bt=Array(ht);ht>vt;vt++)bt[vt]=J[vt];return bt}function S(J,ht){var vt;if(typeof Symbol=="undefined"||J[Symbol.iterator]==null){if(Array.isArray(J)||(vt=d(J))||ht&&J&&typeof J.length=="number"){vt&&(J=vt);var bt=0,At=function(){};return{s:At,n:function(){return J.length>bt?{done:!1,value:J[bt++]}:{done:!0}},e:function(P){throw P},f:At}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var q,ct=!0,ot=!1;return{s:function(){vt=J[Symbol.iterator]()},n:function(){var P=vt.next();return ct=P.done,P},e:function(P){ot=!0,q=P},f:function(){try{ct||vt.return==null||vt.return()}finally{if(ot)throw q}}}}var T=function(ht,vt){return ht===vt},v=function(){function J(ht){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;j(this,J),this.value=ht,this.next=vt}return n(J,[{key:"toString",value:function(vt){return vt?vt(this.value):"".concat(this.value)}}]),J}(),x=function(){function J(){var ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:T;j(this,J),this.head=null,this.tail=null,this.compare=ht}return n(J,[{key:"prepend",value:function(vt){var bt=new v(vt,this.head);return this.head=bt,this.tail||(this.tail=bt),this}},{key:"append",value:function(vt){var bt=new v(vt);return this.head?(this.tail.next=bt,this.tail=bt,this):(this.head=bt,this.tail=bt,this)}},{key:"delete",value:function(vt){if(!this.head)return null;for(var bt=null;this.head&&this.compare(this.head.value,vt);)bt=this.head,this.head=this.head.next;var At=this.head;if(At!==null)for(;At.next;)this.compare(At.next.value,vt)?(bt=At.next,At.next=At.next.next):At=At.next;return this.compare(this.tail.value,vt)&&(this.tail=At),bt}},{key:"find",value:function(vt){var bt=vt.value,At=bt===void 0?void 0:bt,q=vt.callback,ct=q===void 0?void 0:q;if(!this.head)return null;for(var ot=this.head;ot;){if(ct&&ct(ot.value)||At!==void 0&&this.compare(ot.value,At))return ot;ot=ot.next}return null}},{key:"deleteTail",value:function(){var vt=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,vt;for(var bt=this.head;bt.next;)bt.next.next?bt=bt.next:bt.next=null;return this.tail=bt,vt}},{key:"deleteHead",value:function(){if(!this.head)return null;var vt=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),vt}},{key:"fromArray",value:function(vt){var bt=this;return vt.forEach(function(At){return bt.append(At)}),this}},{key:"toArray",value:function(){for(var vt=[],bt=this.head;bt;)vt.push(bt),bt=bt.next;return vt}},{key:"reverse",value:function(){for(var vt=this.head,bt=null,At=null;vt;)At=vt.next,vt.next=bt,bt=vt,vt=At;this.tail=this.head,this.head=bt}},{key:"toString",value:function(){var vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;return""+this.toArray().map(function(bt){return bt.toString(vt)})}}]),J}(),C=function(){function J(){j(this,J),this.linkedList=new x}return n(J,[{key:"isEmpty",value:function(){return!this.linkedList.head}},{key:"peek",value:function(){return this.linkedList.head?this.linkedList.head.value:null}},{key:"enqueue",value:function(vt){this.linkedList.append(vt)}},{key:"dequeue",value:function(){var vt=this.linkedList.deleteHead();return vt?vt.value:null}},{key:"toString",value:function(vt){return this.linkedList.toString(vt)}}]),J}(),N=function(ht){var vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],bt=arguments.length>2?arguments[2]:void 0,At=vt.filter(function(_){return _.source===ht||_.target===ht});if(bt==="target"){var q=function(P){return P.source===ht};return At.filter(q).map(function(_){return _.target})}if(bt==="source"){var ct=function(P){return P.target===ht};return At.filter(ct).map(function(_){return _.source})}var ot=function(P){return P.source===ht?P.target:P.source};return At.map(ot)},X=function(ht,vt){return vt.filter(function(bt){return bt.source===ht||bt.target===ht})},tt=function(){var ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,vt="".concat(Math.random()).split(".")[1].substr(0,5),bt="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(ht,"-").concat(vt).concat(bt)},it=function(ht){var vt={},bt=ht.nodes,At=ht.edges,q=At===void 0?[]:At;return(bt===void 0?[]:bt).forEach(function(ct){vt[ct.id]={degree:0,inDegree:0,outDegree:0}}),q.forEach(function(ct){vt[ct.source].degree++,vt[ct.source].outDegree++,vt[ct.target].degree++,vt[ct.target].inDegree++}),vt};function pt(J,ht,vt){(function bt(At,q,ct,ot){ot.enter({current:q,previous:ct});var _=At.edges;N(q,_===void 0?[]:_,"target").forEach(function(P){ot.allowTraversal({previous:ct,current:q,next:P})&&bt(At,P,q,ot)}),ot.leave({current:q,previous:ct})})(J,ht,"",function(){var bt,At=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=At,ct=function(){},ot=(bt={},function(_){var P=_.next;return!bt[P]&&(bt[P]=!0,!0)});return q.allowTraversal=At.allowTraversal||ot,q.enter=At.enter||ct,q.leave=At.leave||ct,q}(vt))}var ft=function(ht,vt,bt,At){var q=ht.nodes,ct=q===void 0?[]:q,ot=ht.edges,_=ot===void 0?[]:ot,P={},Y={},k={};ct.forEach(function(St,dt){var gt=St.id;Y[gt]=1/0,gt===vt&&(Y[gt]=0)});for(var h=ct.length,g=function(dt){var gt=function(Ct,Pt,Ft){for(var Tt,zt=1/0,Xt=0;Pt.length>Xt;Xt++){var re=Pt[Xt].id;Ft[re]||Ct[re]>zt||(zt=Ct[re],Tt=Pt[Xt])}return Tt}(Y,ct,P),yt=gt.id;if(P[yt]=!0,Y[yt]===1/0)return"continue";(bt?function(Ct,Pt){return Pt.filter(function(Ft){return Ft.source===Ct})}(yt,_):X(yt,_)).forEach(function(Ct){var Pt=Ct.target,Ft=Pt===yt?Ct.source:Pt,Tt=At&&Ct[At]?Ct[At]:1;Y[Ft]>Y[gt.id]+Tt?(Y[Ft]=Y[gt.id]+Tt,k[Ft]=[gt.id]):Y[Ft]===Y[gt.id]+Tt&&k[Ft].push(gt.id)})},F=0;h>F;F++)g();k[vt]=[vt];var V={};for(var H in Y)Y[H]!==1/0&&Ot(vt,H,k,V);var et={};for(var nt in V)et[nt]=V[nt][0];return{length:Y,path:et,allPaths:V}};function Ot(J,ht,vt,bt){if(J===ht)return[J];if(bt[ht])return bt[ht];var At,q=[],ct=S(vt[ht]);try{for(ct.s();!(At=ct.n()).done;){var ot,_=S(Ot(J,At.value,vt,bt));try{for(_.s();!(ot=_.n()).done;)q.push([].concat(s(ot.value),[ht]))}catch(P){_.e(P)}finally{_.f()}}}catch(P){ct.e(P)}finally{ct.f()}bt[ht]=q}var wt=function(ht,vt,bt,At){for(var q=vt.length,ct=2*At,ot=0,_=0;q>_;_++)for(var P=ht[_].clusterId,Y=0;q>Y;Y++)P===ht[Y].clusterId&&(ot+=(vt[_][Y]||0)-(bt[_]||0)*(bt[Y]||0)/ct);return ot*(1/ct)},xt=function(){function J(ht){j(this,J),this.count=ht.length,this.parent={};var vt,bt=S(ht);try{for(bt.s();!(vt=bt.n()).done;){var At=vt.value;this.parent[At]=At}}catch(q){bt.e(q)}finally{bt.f()}}return n(J,[{key:"find",value:function(vt){for(;this.parent[vt]!==vt;)vt=this.parent[vt];return vt}},{key:"union",value:function(vt,bt){var At=this.find(vt),q=this.find(bt);At!==q&&(q>At?(this.parent[bt]!==bt&&this.union(this.parent[bt],vt),this.parent[bt]=this.parent[vt]):(this.parent[vt]!==vt&&this.union(this.parent[vt],bt),this.parent[vt]=this.parent[bt]))}},{key:"connected",value:function(vt,bt){return this.find(vt)===this.find(bt)}}]),J}(),lt=function(ht,vt){return ht-vt},Vt=function(){function J(){var ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:lt;j(this,J),this.compareFn=ht,this.list=[]}return n(J,[{key:"getLeft",value:function(vt){return 2*vt+1}},{key:"getRight",value:function(vt){return 2*vt+2}},{key:"getParent",value:function(vt){return vt===0?null:Math.floor((vt-1)/2)}},{key:"isEmpty",value:function(){return 0>=this.list.length}},{key:"top",value:function(){return this.isEmpty()?void 0:this.list[0]}},{key:"delMin",value:function(){var vt=this.top(),bt=this.list.pop();return this.list.length>0&&(this.list[0]=bt,this.moveDown(0)),vt}},{key:"insert",value:function(vt){return vt!==null&&(this.list.push(vt),this.moveUp(this.list.length-1),!0)}},{key:"moveUp",value:function(vt){for(var bt=this.getParent(vt);vt&&vt>0&&this.compareFn(this.list[bt],this.list[vt])>0;){var At=this.list[bt];this.list[bt]=this.list[vt],this.list[vt]=At,bt=this.getParent(vt=bt)}}},{key:"moveDown",value:function(vt){var bt=vt,At=this.getLeft(vt),q=this.getRight(vt),ct=this.list.length;if(At!==null&&ct>At&&this.compareFn(this.list[bt],this.list[At])>0?bt=At:q!==null&&ct>q&&this.compareFn(this.list[bt],this.list[q])>0&&(bt=q),vt!==bt){var ot=[this.list[bt],this.list[vt]];this.list[vt]=ot[0],this.list[bt]=ot[1],this.moveDown(bt)}}}]),J}(),Lt=function(ht,vt){var bt=[],At=ht.nodes,q=At===void 0?[]:At,ct=ht.edges,ot=ct===void 0?[]:ct;if(q.length===0)return bt;var _=q[0],P=new Set;P.add(_);var Y=new Vt(function(F,V){return vt?F.weight-V.weight:0});for(X(_.id,ot).forEach(function(F){Y.insert(F)});!Y.isEmpty();){var k=Y.delMin(),h=k.source,g=k.target;P.has(h)&&P.has(g)||(bt.push(k),P.has(h)||(P.add(h),X(h,ot).forEach(function(F){Y.insert(F)})),P.has(g)||(P.add(g),X(g,ot).forEach(function(F){Y.insert(F)})))}return bt},Et=function(ht,vt){var bt=[],At=ht.nodes,q=At===void 0?[]:At,ct=ht.edges;if(q.length===0)return bt;var ot=(ct===void 0?[]:ct).map(function(h){return h});vt&&ot.sort(function(h,g){return h.weight-g.weight});for(var _=new xt(q.map(function(h){return h.id}));ot.length>0;){var P=ot.shift(),Y=P.source,k=P.target;_.connected(Y,k)||(bt.push(P),_.union(Y,k))}return bt};l.Stack=function(){function J(){var ht=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10;j(this,J),this.linkedList=new x,this.maxStep=ht}return n(J,[{key:"isEmpty",value:function(){return!this.linkedList.head}},{key:"isMaxStack",value:function(){return this.toArray().length>=this.maxStep}},{key:"peek",value:function(){return this.isEmpty()?null:this.linkedList.head.value}},{key:"push",value:function(vt){this.linkedList.prepend(vt),this.length>this.maxStep&&this.linkedList.deleteTail()}},{key:"pop",value:function(){var vt=this.linkedList.deleteHead();return vt?vt.value:null}},{key:"toArray",value:function(){return this.linkedList.toArray().map(function(vt){return vt.value})}},{key:"clear",value:function(){for(;!this.isEmpty();)this.pop()}},{key:"length",get:function(){return this.linkedList.toArray().length}}]),J}(),l.breadthFirstSearch=function(J,ht,vt){var bt=function(){var P,Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},k=Y,h=function(){},g=(P={},function(F){var V=F.next;return!P[V]&&(P[V]=!0,!0)});return k.allowTraversal=Y.allowTraversal||g,k.enter=Y.enter||h,k.leave=Y.leave||h,k}(vt),At=new C,q=J.edges,ct=q===void 0?[]:q;At.enqueue(ht);for(var ot="",_=function(){var Y=At.dequeue();bt.enter({current:Y,previous:ot}),N(Y,ct,"target").forEach(function(k){bt.allowTraversal({previous:ot,current:Y,next:k})&&At.enqueue(k)}),bt.leave({current:Y,previous:ot}),ot=Y};!At.isEmpty();)_()},l.connectedComponent=function(J,ht){return ht?function(vt){var bt,At=vt.nodes,q=At===void 0?[]:At,ct=vt.edges,ot=ct===void 0?[]:ct,_=[],P={},Y={},k={},h=[],g=0,F=function et(nt){Y[nt.id]=g,k[nt.id]=g,g+=1,_.push(nt),P[nt.id]=!0;for(var St=N(nt.id,ot,"target").filter(function(Pt){return q.map(function(Ft){return Ft.id}).indexOf(Pt)>-1}),dt=function(Ft){var Tt=St[Ft];if(Y[Tt]||Y[Tt]===0)P[Tt]&&(k[nt.id]=Math.min(k[nt.id],Y[Tt]));else{var zt=q.filter(function(Xt){return Xt.id===Tt});zt.length>0&&et(zt[0]),k[nt.id]=Math.min(k[nt.id],k[Tt])}},gt=0;St.length>gt;gt++)dt(gt);if(k[nt.id]===Y[nt.id]){for(var yt=[];_.length>0;){var Ct=_.pop();if(P[Ct.id]=!1,yt.push(Ct),Ct===nt)break}yt.length>0&&h.push(yt)}},V=S(q);try{for(V.s();!(bt=V.n()).done;){var H=bt.value;Y[H.id]||Y[H.id]===0||F(H)}}catch(et){V.e(et)}finally{V.f()}return h}(J):function(vt){for(var bt=vt.nodes,At=bt===void 0?[]:bt,q=vt.edges,ct=q===void 0?[]:q,ot=[],_={},P=[],Y=function F(V){P.push(V),_[V.id]=!0;for(var H=N(V.id,ct),et=function(dt){var gt=H[dt];if(!_[gt]){var yt=At.filter(function(Ct){return Ct.id===gt});yt.length>0&&F(yt[0])}},nt=0;H.length>nt;++nt)et(nt)},k=0;At.length>k;k++){var h=At[k];if(!_[h.id]){Y(h);for(var g=[];P.length>0;)g.push(P.pop());ot.push(g)}}return ot}(J)},l.depthFirstSearch=pt,l.detectCycle=function(J){var ht=null,vt=J.nodes,bt={},At={},q={},ct={};(vt===void 0?[]:vt).forEach(function(_){At[_.id]=_});for(var ot={enter:function(P){var Y=P.current,k=P.previous;if(q[Y]){ht={};for(var h=Y,g=k;g!==Y;)ht[h]=g,h=g,g=bt[g];ht[h]=g}else q[Y]=Y,delete At[Y],bt[Y]=k},leave:function(P){var Y=P.current;ct[Y]=Y,delete q[Y]},allowTraversal:function(P){return!ht&&!ct[P.next]}};Object.keys(At).length;)pt(J,Object.keys(At)[0],ot);return ht},l.dijkstra=ft,l.findAllPath=function(J,ht,vt,bt){if(ht===vt)return[[ht]];var At,q,ct=J.edges,ot=ct===void 0?[]:ct,_=[ht],P=((q=ht)in(At={})?Object.defineProperty(At,q,{value:!0,enumerable:!0,configurable:!0,writable:!0}):At[q]=!0,At),Y=[],k=[],h=bt?N(ht,ot,"target"):N(ht,ot);for(Y.push(h);_.length>0&&Y.length>0;){var g=Y[Y.length-1];if(g.length){var F=g.shift();if(F&&(_.push(F),P[F]=!0,h=bt?N(F,ot,"target"):N(F,ot),Y.push(h.filter(function(nt){return!P[nt]}))),_[_.length-1]===vt){var V=_.map(function(nt){return nt});k.push(V);var H=_.pop();P[H]=!1,Y.pop()}}else{var et=_.pop();P[et]=!1,Y.pop()}}return k},l.findShortestPath=function(J,ht,vt,bt,At){var q=ft(J,ht,bt,At);return{length:q.length[vt],path:q.path[vt],allPath:q.allPaths[vt]}},l.floydWarshall=function(J,ht){for(var vt=E(J,ht),bt=[],At=vt.length,q=0;At>q;q+=1){bt[q]=[];for(var ct=0;At>ct;ct+=1)bt[q][ct]=q===ct?0:vt[q][ct]!==0&&vt[q][ct]?vt[q][ct]:1/0}for(var ot=0;At>ot;ot+=1)for(var _=0;At>_;_+=1)for(var P=0;At>P;P+=1)bt[_][P]>bt[_][ot]+bt[ot][P]&&(bt[_][P]=bt[_][ot]+bt[ot][P]);return bt},l.getAdjMatrix=E,l.getDegree=it,l.getInDegree=function(J,ht){return it(J)[ht]?it(J)[ht].inDegree:0},l.getNeighbors=N,l.getOutDegree=function(J,ht){return it(J)[ht]?it(J)[ht].outDegree:0},l.labelPropagation=function(J){var ht=arguments.length>1&&arguments[1]!==void 0&&arguments[1],vt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"weight",bt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e3,At=J.nodes,q=At===void 0?[]:At,ct=J.edges,ot=ct===void 0?[]:ct,_={},P={};q.forEach(function(et,nt){var St=tt();et.clusterId=St,_[St]={id:St,nodes:[et]},P[et.id]={node:et,idx:nt}});var Y=E(J,ht),k={};Y.forEach(function(et,nt){var St=q[nt].id;k[St]={},et.forEach(function(dt,gt){dt&&(k[St][q[gt].id]=dt)})});for(var h=0;bt>h;){var g=!1;if(q.forEach(function(et){var nt={};Object.keys(k[et.id]).forEach(function(Tt){var zt=k[et.id][Tt],Xt=P[Tt].node.clusterId;nt[Xt]||(nt[Xt]=0),nt[Xt]+=zt});var St=-1/0,dt=[];if(Object.keys(nt).forEach(function(Tt){nt[Tt]>St?(St=nt[Tt],dt=[Tt]):St===nt[Tt]&&dt.push(Tt)}),dt.length!==1||dt[0]!==et.clusterId){var gt=dt.indexOf(et.clusterId);if(0>gt||dt.splice(gt,1),dt&&dt.length){g=!0;var yt=_[et.clusterId],Ct=yt.nodes.indexOf(et);yt.nodes.splice(Ct,1);var Pt=Math.floor(Math.random()*dt.length),Ft=_[dt[Pt]];Ft.nodes.push(et),et.clusterId=Ft.id}}}),!g)break;h++}Object.keys(_).forEach(function(et){var nt=_[et];nt.nodes&&nt.nodes.length||delete _[et]});var F=[],V={};ot.forEach(function(et){var nt=et[vt]||1,St=P[et.source].node.clusterId,dt=P[et.target].node.clusterId,gt="".concat(St,"---").concat(dt);if(V[gt])V[gt].weight+=nt,V[gt].count++;else{var yt={source:St,target:dt,weight:nt,count:1};V[gt]=yt,F.push(yt)}});var H=[];return Object.keys(_).forEach(function(et){H.push(_[et])}),{clusters:H,clusterEdges:F}},l.louvain=function(J){var ht=arguments.length>1&&arguments[1]!==void 0&&arguments[1],vt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"weight",bt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e-4,At=J.nodes,q=At===void 0?[]:At,ct=J.edges,ot=ct===void 0?[]:ct,_={},P={};q.forEach(function(dt,gt){var yt=tt();dt.clusterId=yt,_[yt]={id:yt,nodes:[dt]},P[dt.id]={node:dt,idx:gt}});var Y=E(J,ht),k=[],h={},g=0;Y.forEach(function(dt,gt){var yt=0,Ct=q[gt].id;h[Ct]={},dt.forEach(function(Pt,Ft){Pt&&(yt+=Pt,h[Ct][q[Ft].id]=Pt,g+=Pt)}),k.push(yt)}),g/=2;for(var F=1/0,V=1/0,H=0;F=wt(q,Y,k,g),Math.abs(F-V)>=bt&&100>=H;)V=F,H++,Object.keys(_).forEach(function(dt){var gt=0;ot.forEach(function(yt){var Ct=P[yt.source].node.clusterId,Pt=P[yt.target].node.clusterId;(Ct===dt&&Pt!==dt||Pt===dt&&Ct!==dt)&&(gt+=yt[vt]||1)}),_[dt].sumTot=gt}),q.forEach(function(dt,gt){var yt,Ct=_[dt.clusterId],Pt=0,Ft=k[gt]/(2*g),Tt=0;Ct.nodes.forEach(function(we){Tt+=Y[gt][P[we.id].idx]||0});var zt=Tt-Ct.sumTot*Ft;if(Object.keys(h[dt.id]).forEach(function(we){var De=P[we].node.clusterId;if(De!==dt.clusterId){var Ve=_[De],pn=Ve.nodes;if(pn&&pn.length){var sn=0;pn.forEach(function(An){sn+=Y[gt][P[An.id].idx]||0});var In=sn-Ve.sumTot*Ft-zt;In>Pt&&(Pt=In,yt=Ve)}}}),Pt>0){yt.nodes.push(dt);var Xt=dt.clusterId;dt.clusterId=yt.id;var re=Ct.nodes.indexOf(dt);Ct.nodes.splice(re,1);var de=0,ye=0;ot.forEach(function(we){var De=P[we.source].node.clusterId,Ve=P[we.target].node.clusterId;(De===yt.id&&Ve!==yt.id||Ve===yt.id&&De!==yt.id)&&(de+=we[vt]||1),(De===Xt&&Ve!==Xt||Ve===Xt&&De!==Xt)&&(ye+=we[vt]||1)}),yt.sumTot=de,Ct.sumTot=ye}});Object.keys(_).forEach(function(dt){var gt=_[dt];gt.nodes&&gt.nodes.length||delete _[dt]});var et=[],nt={};ot.forEach(function(dt){var gt=dt[vt]||1,yt=P[dt.source].node.clusterId,Ct=P[dt.target].node.clusterId,Pt="".concat(yt,"---").concat(Ct);if(nt[Pt])nt[Pt].weight+=gt,nt[Pt].count++;else{var Ft={source:yt,target:Ct,weight:gt,count:1};nt[Pt]=Ft,et.push(Ft)}});var St=[];return Object.keys(_).forEach(function(dt){St.push(_[dt])}),{clusters:St,clusterEdges:et}},l.minimumSpanningTree=function(J,ht,vt){return vt?{prim:Lt,kruskal:Et}[vt](J,ht):Et(J,ht)},l.pageRank=function(J,ht,vt){typeof ht!="number"&&(ht=1e-6),typeof vt!="number"&&(vt=.85);for(var bt,At=1,q=0,ct=1e3,ot=J.nodes,_=ot===void 0?[]:ot,P=J.edges,Y=P===void 0?[]:P,k=_.length,h={},g={},F=0;k>F;++F){var V=_[F].id;h[V]=1/k,g[V]=1/k}for(var H=it(J);ct>0&&At>ht;){q=0;for(var et=0;k>et;++et){var nt=_[et],St=nt.id;if(bt=0,H[nt.id].inDegree===0)h[St]=0;else{for(var dt=N(St,Y,"source"),gt=0;dt.length>gt;++gt){var yt=dt[gt],Ct=H[yt].outDegree;Ct>0&&(bt+=g[yt]/Ct)}h[St]=vt*bt,q+=h[St]}}q=(1-q)/k,At=0;for(var Pt=0;k>Pt;++Pt){var Ft=_[Pt].id;At+=Math.abs((bt=h[Ft]+q)-g[Ft]),g[Ft]=bt}ct-=1}return g},Object.defineProperty(l,"__esModule",{value:!0})})},function(a,A,e){"use strict";e.d(A,"c",function(){return s}),e.d(A,"b",function(){return d}),e.d(A,"a",function(){return M});var r=e(1),p=e(56);function m(S){return(m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T})(S)}var O=Math.sin,l=Math.cos,E=Math.atan2,j=Math.PI;function y(S,T,v,x,C,N,X){var tt=T.stroke,it=T.lineWidth,pt=E(x-N,v-C),ft=new p.Path({type:"path",canvas:S.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*l(j/6)+","+10*O(j/6)+" L0,0 L"+10*l(j/6)+",-"+10*O(j/6),stroke:tt,lineWidth:it}});ft.translate(C,N),ft.rotateAtPoint(C,N,pt),S.set(X?"startArrowShape":"endArrowShape",ft)}function n(S,T,v,x,C,N,X){var tt=T.startArrow,it=T.endArrow,pt=T.stroke,ft=T.lineWidth,Ot=X?tt:it,wt=Ot.d,xt=Ot.fill,lt=Ot.stroke,Vt=Ot.lineWidth,Lt=Object(r.c)(Ot,["d","fill","stroke","lineWidth"]),Et=E(x-N,v-C);wt&&(C-=l(Et)*wt,N-=O(Et)*wt);var J=new p.Path({type:"path",canvas:S.get("canvas"),isArrowShape:!0,attrs:Object(r.a)(Object(r.a)({},Lt),{stroke:lt||pt,lineWidth:Vt||ft,fill:xt})});J.translate(C,N),J.rotateAtPoint(C,N,Et),S.set(X?"startArrowShape":"endArrowShape",J)}function s(S,T,v,x,C){var N=E(x-T,v-S);return{dx:l(N)*C,dy:O(N)*C}}function d(S,T,v,x,C,N){m(T.startArrow)==="object"?n(S,T,v,x,C,N,!0):T.startArrow?y(S,T,v,x,C,N,!0):S.set("startArrowShape",null)}function M(S,T,v,x,C,N){m(T.endArrow)==="object"?n(S,T,v,x,C,N,!1):T.endArrow?y(S,T,v,x,C,N,!1):S.set("startArrowShape",null)}},function(a,A,e){"use strict";var r={};e.r(r),e.d(r,"leftTranslate",function(){return it}),e.d(r,"leftRotate",function(){return pt}),e.d(r,"leftScale",function(){return ft}),e.d(r,"transform",function(){return Ot}),e.d(r,"direction",function(){return wt}),e.d(r,"angleTo",function(){return xt}),e.d(r,"vertical",function(){return lt});var p={};e.r(p),e.d(p,"default",function(){return or}),e.d(p,"assign",function(){return Ft}),e.d(p,"format",function(){return Xn}),e.d(p,"parse",function(){return tr}),e.d(p,"defaultI18n",function(){return re}),e.d(p,"setGlobalDateI18n",function(){return ye}),e.d(p,"setGlobalDateMasks",function(){return Gn});var m={};e.r(m),e.d(m,"compare",function(){return ue}),e.d(m,"getLineIntersect",function(){return kn}),e.d(m,"getRectIntersectByPoint",function(){return _n}),e.d(m,"getCircleIntersectByPoint",function(){return Un}),e.d(m,"getEllipseIntersectByPoint",function(){return Ze}),e.d(m,"applyMatrix",function(){return Te}),e.d(m,"invertMatrix",function(){return R}),e.d(m,"getCircleCenterByPoints",function(){return mt}),e.d(m,"distance",function(){return $t}),e.d(m,"scaleMatrix",function(){return me}),e.d(m,"floydWarshall",function(){return Zt}),e.d(m,"getAdjMatrix",function(){return ve}),e.d(m,"translate",function(){return he}),e.d(m,"move",function(){return ce}),e.d(m,"scale",function(){return Me}),e.d(m,"rotate",function(){return _e}),e.d(m,"getDegree",function(){return We}),e.d(m,"isPointInPolygon",function(){return tn}),e.d(m,"intersectBBox",function(){return ke}),e.d(m,"isPolygonsIntersect",function(){return ln}),e.d(m,"Line",function(){return hn}),e.d(m,"getBBoxBoundLine",function(){return nn}),e.d(m,"itemIntersectByLine",function(){return Sn}),e.d(m,"fractionToLine",function(){return Pe}),e.d(m,"getPointsCenter",function(){return le}),e.d(m,"squareDist",function(){return Le}),e.d(m,"pointLineSquareDist",function(){return Be}),e.d(m,"isPointsOverlap",function(){return en}),e.d(m,"pointRectSquareDist",function(){return un});var O={};e.r(O),e.d(O,"uniqueId",function(){return Gr}),e.d(O,"formatPadding",function(){return Mr}),e.d(O,"cloneEvent",function(){return oi}),e.d(O,"isViewportChanged",function(){return ai}),e.d(O,"isNaN",function(){return Zr}),e.d(O,"calculationItemsBBox",function(){return Yi}),e.d(O,"processParallelEdges",function(){return $i});var l={};e.r(l),e.d(l,"getBBox",function(){return _o}),e.d(l,"getLoopCfgs",function(){return Xo}),e.d(l,"getLabelPosition",function(){return Yo}),e.d(l,"traverseTree",function(){return di}),e.d(l,"traverseTreeUp",function(){return ea}),e.d(l,"getLetterWidth",function(){return xi}),e.d(l,"getTextSize",function(){return ks}),e.d(l,"plainCombosToTrees",function(){return Ri}),e.d(l,"reconstructTree",function(){return Rs}),e.d(l,"getComboBBox",function(){return Mi}),e.d(l,"shouldRefreshEdge",function(){return hu}),e.d(l,"cloneBesidesImg",function(){return ui});var E={};e.r(E),e.d(E,"getSpline",function(){return Ns}),e.d(E,"getControlPoint",function(){return ts}),e.d(E,"pointsToPolygon",function(){return Ls}),e.d(E,"pathToPoints",function(){return Ho}),e.d(E,"getClosedSpline",function(){return es}),e.d(E,"roundedHull",function(){return ps}),e.d(E,"paddedHull",function(){return yu});var j,y=e(14),n=e(0),s=function(){function kt(f){this._cfgs=Object(n.e)(this.getDefaultCfgs(),f),this._events={},this.destroyed=!1}return kt.prototype.getDefaultCfgs=function(){return{}},kt.prototype.initPlugin=function(f){var u=this;u.set("graph",f);var I=u.getEvents(),W={};Object(n.f)(I,function(st,jt){var Gt=Object(n.J)(u,st);W[jt]=Gt,f.on(jt,Gt)}),this._events=W,this.init()},kt.prototype.getEvents=function(){return{}},kt.prototype.get=function(f){return this._cfgs[f]},kt.prototype.set=function(f,u){this._cfgs[f]=u},kt.prototype.destroy=function(){},kt.prototype.destroyPlugin=function(){this.destroy();var f=this.get("graph"),u=this._events;Object(n.f)(u,function(I,W){f.off(W,I)}),this._events=null,this._cfgs=null,this.destroyed=!0},kt}(),d=(j=function(f,u){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,W){I.__proto__=W}||function(I,W){for(var st in W)Object.prototype.hasOwnProperty.call(W,st)&&(I[st]=W[st])})(f,u)},function(kt,f){function u(){this.constructor=kt}j(kt,f),kt.prototype=f===null?Object.create(f):(u.prototype=f.prototype,new u)}),M="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",S=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return d(f,kt),f.prototype.getDefaultCfgs=function(){return{img:M}},f.prototype.init=function(){var u=this.get("graph"),I=u.get("minZoom"),W=u.get("container"),st=u.get("canvas").get("el"),jt=u.get("width"),Gt=u.get("height"),Ht=this.get("img")||M,ee=Object(y.b)(`<div class='g6-grid-container' style="position: absolute; left:0;top:0;right:0;bottom:0;overflow: hidden;z-index: -1;"></div>`),ae=Object(y.b)(`<div 
        class='g6-grid' 
        style='position:absolute;
        transform-origin: 0% 0% 0px;
        background-image: `+Ht+`;
        user-select: none
        '></div>`);ee.appendChild(ae),Object(y.c)(ee,{width:jt+"px",height:Gt+"px",left:W.offsetLeft+"px",top:W.offsetTop+"px"}),Object(y.c)(ae,{width:jt/I+"px",height:Gt/I+"px",left:"0px",top:"0px"}),W.insertBefore(ee,st),this.set("container",ee),this.set("gridContainer",ae)},f.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},f.prototype.updateGrid=function(u){var I=this.get("gridContainer"),W=u.matrix;W||(W=[1,0,0,0,1,0,0,0,1]);var st="matrix("+W[0]+", "+W[1]+", "+W[3]+", "+W[4]+", 0, 0)";Object(y.c)(I,{transform:st})},f.prototype.getContainer=function(){return this.get("container")},f.prototype.destroy=function(){var u=this.get("graph").get("container"),I=this.get("container");u.removeChild(I)},f}(s),T=e(81),v=e.n(T),x=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var jt in st)Object.prototype.hasOwnProperty.call(st,jt)&&(W[jt]=st[jt])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}();v()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var C=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return x(f,kt),f.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(I){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(I){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"]}},f.prototype.getEvents=function(){return{contextmenu:"onMenuShow"}},f.prototype.init=function(){var u=this.get("className"),I=Object(y.b)("<div class="+(u||"g6-component-contextmenu")+"></div>");Object(y.c)(I,{top:"0px",position:"absolute",visibility:"hidden"});var W=this.get("container");W||(W=this.get("graph").get("container")),Object(n.x)(W)&&(W=document.getElementById(W)),W.appendChild(I),this.set("menu",I)},f.prototype.onMenuShow=function(u){var I=this;u.preventDefault(),u.stopPropagation();var W=this.get("itemTypes");if(u.item){if(u.item&&u.item.getType&&W.indexOf(u.item.getType())===-1)return void I.onMenuHide()}else if(W.indexOf("canvas")===-1)return;if(this.get("shouldBegin")(u)){var st=this.get("menu"),jt=this.get("getContent"),Gt=this.get("graph"),Ht=jt(u,Gt);Object(n.x)(Ht)?st.innerHTML=Ht:st.innerHTML=Ht.outerHTML,this.removeMenuEventListener();var ee=this.get("handleMenuClick");if(ee){var ae=function(Or){ee(Or.target,u.item,Gt)};this.set("handleMenuClickWrapper",ae),st.addEventListener("click",ae)}var je=Gt.get("width"),Fe=Gt.get("height"),Ue=st.getBoundingClientRect(),Ke=this.get("offsetX")||0,bn=this.get("offsetY")||0,wn=Gt.getContainer().offsetTop,Nn=Gt.getContainer().offsetLeft,Bn=u.canvasX+Nn+Ke,Fn=u.canvasY+wn+bn;Bn+Ue.width>je&&(Bn=u.canvasX-Ue.width-Ke+Nn),Fn+Ue.height>Fe&&(Fn=u.canvasY-Ue.height-bn+wn),Object(y.c)(st,{top:Fn+"px",left:Bn+"px",visibility:"visible"});var sr=function(Or){I.onMenuHide()};document.body.addEventListener("click",sr),this.set("handler",sr)}},f.prototype.removeMenuEventListener=function(){var u=this.get("handleMenuClickWrapper"),I=this.get("handler");u&&(this.get("menu").removeEventListener("click",u),this.set("handleMenuClickWrapper",null)),I&&document.body.removeEventListener("click",I)},f.prototype.onMenuHide=function(){var u=this.get("menu");u&&Object(y.c)(u,{visibility:"hidden"}),this.removeMenuEventListener()},f.prototype.destroy=function(){var u=this.get("menu");if(this.removeMenuEventListener(),u){var I=this.get("container");I||(I=this.get("graph").get("container")),Object(n.x)(I)&&(I=document.getElementById(I)),I.removeChild(u)}},f}(s),N=e(52),X=e(62),tt=e(2);function it(kt,f,u){var I=[0,0,0,0,0,0,0,0,0];return tt.a.fromTranslation(I,u),tt.a.multiply(kt,I,f)}function pt(kt,f,u){var I=[0,0,0,0,0,0,0,0,0];return tt.a.fromRotation(I,u),tt.a.multiply(kt,I,f)}function ft(kt,f,u){var I=[0,0,0,0,0,0,0,0,0];return tt.a.fromScaling(I,u),tt.a.multiply(kt,I,f)}function Ot(kt,f){for(var u,I,W,st=kt?[].concat(kt):[1,0,0,0,1,0,0,0,1],jt=0,Gt=f.length;jt<Gt;jt++){var Ht=f[jt];switch(Ht[0]){case"t":it(st,st,[Ht[1],Ht[2]]);break;case"s":ft(st,st,[Ht[1],Ht[2]]);break;case"r":pt(st,st,Ht[1]);break;case"m":u=st,I=st,W=Ht[1],tt.a.multiply(u,W,I)}}return st}function wt(kt,f){return kt[0]*f[1]-f[0]*kt[1]}function xt(kt,f,u){var I=tt.d.angle(kt,f),W=wt(kt,f)>=0;return u?W?2*Math.PI-I:I:W?I:2*Math.PI-I}function lt(kt,f,u){return u?(kt[0]=f[1],kt[1]=-1*f[0]):(kt[0]=-1*f[1],kt[1]=f[0]),kt}var Vt=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var jt in st)Object.prototype.hasOwnProperty.call(st,jt)&&(W[jt]=st[jt])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}(),Lt=function(){return(Lt=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var st in u=arguments[I])Object.prototype.hasOwnProperty.call(u,st)&&(f[st]=u[st]);return f}).apply(this,arguments)},Et=Math.max,J=r.transform,ht=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.handleUpdateCanvas=Object(n.d)(function(I){var W=u;W.destroyed||W.updateCanvas()},100,!1),u}return Vt(f,kt),f.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},f.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},f.prototype.disableRefresh=function(){this.set("refresh",!1)},f.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},f.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},f.prototype.initViewport=function(){var u=this,I=this._cfgs,W=I.size,st=I.graph;if(!this.destroyed){var jt=this.get("canvas").get("container"),Gt=Object(y.b)(`
      <div
        class=`+I.viewportClassName+`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff'
        draggable=true>
      </div>`),Ht=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,ee=0,ae=0,je=!1,Fe=0,Ue=0,Ke=0,bn=0,wn=0,Nn=0;Gt.addEventListener("dragstart",function(Bn){var Fn,sr;if(Bn.dataTransfer){var ur=new Image;ur.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(sr=(Fn=Bn.dataTransfer).setDragImage)===null||sr===void 0||sr.call(Fn,ur,0,0);try{Bn.dataTransfer.setData("text/html","view-port-minimap")}catch(ei){Bn.dataTransfer.setData("text","view-port-minimap")}}if(I.refresh=!1,Bn.target===Gt){var Or=Gt.style;Fe=parseInt(Or.left,10),Ue=parseInt(Or.top,10),Ke=parseInt(Or.width,10),bn=parseInt(Or.height,10),Ke>W[0]||bn>W[1]||(Nn=st.getZoom(),wn=u.get("ratio"),je=!0,ee=Bn.clientX,ae=Bn.clientY)}},!1),Gt.addEventListener(Ht?"dragover":"drag",function(Bn){if(je&&!Object(n.s)(Bn.clientX)&&!Object(n.s)(Bn.clientY)){var Fn=ee-Bn.clientX,sr=ae-Bn.clientY;(Fe-Fn<0||Fe-Fn+Ke>=W[0])&&(Fn=0),(Ue-sr<0||Ue-sr+bn>=W[1])&&(sr=0),Fe-=Fn,Ue-=sr,Object(y.c)(Gt,{left:Fe+"px",top:Ue+"px"}),st.translate(Fn*Nn/wn,sr*Nn/wn),ee=Bn.clientX,ae=Bn.clientY}},!1),Gt.addEventListener("dragend",function(){je=!1,I.refresh=!0},!1),this.set("viewport",Gt),jt.appendChild(Gt)}},f.prototype.updateViewport=function(){if(!this.destroyed){var u=this.get("ratio"),I=(this.get("dx"),this.get("dy"),this.get("totaldx")),W=this.get("totaldy"),st=this.get("graph"),jt=this.get("size"),Gt=st.get("width"),Ht=st.get("height"),ee=st.getPointByCanvas(0,0),ae=st.getPointByCanvas(Gt,Ht),je=this.get("viewport");je||this.initViewport(),st.getZoom();var Fe=(ae.x-ee.x)*u,Ue=(ae.y-ee.y)*u,Ke=ee.x*u+I,bn=ee.y*u+W,wn=Ke+Fe,Nn=bn+Ue;Ke<0&&(Fe+=Ke,Ke=0),wn>jt[0]&&(Fe-=wn-jt[0]),bn<0&&(Ue+=bn,bn=0),Nn>jt[1]&&(Ue-=Nn-jt[1]),this.set("ratio",u);var Bn=Ke+"px",Fn=bn+"px";Object(y.c)(je,{left:Bn,top:Fn,width:Fe+"px",height:Ue+"px"})}},f.prototype.updateGraphShapes=function(){var u=this._cfgs.graph,I=this.get("canvas"),W=u.get("group");if(!W.destroyed){var st=W.clone();st.resetMatrix(),I.clear(),I.add(st),u.get("renderer")==="svg"&&this.updateVisible(st)}},f.prototype.updateVisible=function(u){var I=this;if(u.isGroup()||u.get("visible")){var W=u.get("children");if(!W||!W.length)return;W.forEach(function(st){st.get("visible")||st.hide(),I.updateVisible(st)})}else u.hide()},f.prototype.updateKeyShapes=function(){var u=this,I=this._cfgs.graph;Object(n.f)(I.getEdges(),function(W){u.updateOneEdgeKeyShape(W)}),Object(n.f)(I.getNodes(),function(W){u.updateOneNodeKeyShape(W)}),this.clearDestroyedShapes()},f.prototype.updateOneNodeKeyShape=function(u){var I=this.get("canvas"),W=I.get("children")[0]||I.addGroup(),st=this.get("itemMap")||{},jt=st[u.get("id")],Gt=u.getBBox(),Ht=u.get("keyShape").clone(),ee=Ht.attr(),ae={x:Gt.centerX,y:Gt.centerY};jt?ae=Object.assign(ee,ae):(jt=Ht,W.add(jt));var je=jt.get("type");je!=="rect"&&je!=="image"||(ae.x=Gt.minX,ae.y=Gt.minY),jt.attr(ae),u.isVisible()||jt.hide(),jt.exist=!0,st[u.get("id")]=jt,this.set("itemMap",st)},f.prototype.updateDelegateShapes=function(){var u=this,I=this._cfgs.graph;Object(n.f)(I.getEdges(),function(W){u.updateOneEdgeKeyShape(W)}),Object(n.f)(I.getNodes(),function(W){u.updateOneNodeDelegateShape(W)}),this.clearDestroyedShapes()},f.prototype.clearDestroyedShapes=function(){var u=this.get("itemMap")||{},I=Object.keys(u);if(I&&I.length!==0)for(var W=I.length-1;W>=0;W--){var st=u[I[W]],jt=st.exist;st.exist=!1,jt||(st.remove(),delete u[I[W]])}},f.prototype.updateOneEdgeKeyShape=function(u){var I=this.get("canvas"),W=I.get("children")[0]||I.addGroup(),st=this.get("itemMap")||{},jt=st[u.get("id")];if(jt){var Gt=u.get("keyShape").attr("path");jt.attr("path",Gt)}else jt=u.get("keyShape").clone(),W.add(jt),jt.toBack();u.isVisible()||jt.hide(),jt.exist=!0,st[u.get("id")]=jt,this.set("itemMap",st)},f.prototype.updateOneNodeDelegateShape=function(u){var I=this.get("canvas"),W=I.get("children")[0]||I.addGroup(),st=this.get("delegateStyle"),jt=this.get("itemMap")||{},Gt=jt[u.get("id")],Ht=u.getBBox();if(Gt){var ee={x:Ht.minX,y:Ht.minY,width:Ht.width,height:Ht.height};Gt.attr(ee)}else Gt=W.addShape("rect",{attrs:Lt({x:Ht.minX,y:Ht.minY,width:Ht.width,height:Ht.height},st),name:"minimap-node-shape"});u.isVisible()||Gt.hide(),Gt.exist=!0,jt[u.get("id")]=Gt,this.set("itemMap",jt)},f.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},f.prototype.initContainer=function(){var u=this.get("graph"),I=this.get("size"),W=this.get("className"),st=this.get("container"),jt=Object(y.b)("<div class='"+W+"' style='width: "+I[0]+"px; height: "+I[1]+"px; overflow: hidden'></div>");Object(n.x)(st)&&(st=document.getElementById(st)),st?st.appendChild(jt):u.get("container").appendChild(jt),this.set("container",jt);var Gt,Ht=Object(y.b)('<div class="g6-minimap-container" style="position: relative;"></div>');jt.appendChild(Ht),Gt=u.get("renderer")==="svg"?new X.Canvas({container:Ht,width:I[0],height:I[1]}):new N.Canvas({container:Ht,width:I[0],height:I[1]}),this.set("canvas",Gt),this.updateCanvas()},f.prototype.updateCanvas=function(){if(this.get("refresh")){var u=this.get("graph");if(!u.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var I=this.get("size"),W=this.get("canvas"),st=this.get("type"),jt=this.get("padding");if(!W.destroyed){switch(st){case"default":this.updateGraphShapes();break;case"keyShape":this.updateKeyShapes();break;case"delegate":this.updateDelegateShapes()}var Gt=W.get("children")[0];if(Gt){Gt.resetMatrix();var Ht=Gt.getCanvasBBox(),ee=u.get("canvas").getCanvasBBox(),ae=ee.width,je=ee.height;Number.isFinite(Ht.width)&&(ae=Et(Ht.width,ae),je=Et(Ht.height,je)),ae+=2*jt,je+=2*jt;var Fe=Math.min(I[0]/ae,I[1]/je),Ue=[1,0,0,0,1,0,0,0,1],Ke=0,bn=0;Number.isFinite(Ht.minX)&&(Ke=-Ht.minX),Number.isFinite(Ht.minY)&&(bn=-Ht.minY);var wn=(I[0]-(ae-2*jt)*Fe)/2,Nn=(I[1]-(je-2*jt)*Fe)/2;Ue=J(Ue,[["t",Ke,bn],["s",Fe,Fe],["t",wn,Nn]]),Gt.setMatrix(Ue),this.set("ratio",Fe),this.set("totaldx",wn+Ke*Fe),this.set("totaldy",Nn+bn*Fe),this.set("dx",wn),this.set("dy",Nn),this.updateViewport()}}}}},f.prototype.getCanvas=function(){return this.get("canvas")},f.prototype.getViewport=function(){return this.get("viewport")},f.prototype.getContainer=function(){return this.get("container")},f.prototype.destroy=function(){this.get("canvas").destroy();var u=this.get("container");u.parentNode.removeChild(u)},f}(s),vt=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var jt in st)Object.prototype.hasOwnProperty.call(st,jt)&&(W[jt]=st[jt])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}();function bt(kt,f,u){var I=kt.x-f.x,W=kt.y-f.y;return!u||Math.abs(I)>u||Math.abs(W)>u?Math.sqrt(I*I+W*W):u}function At(kt,f){var u=(f.source.y-f.target.y)/(f.source.x-f.target.x),I=(u*u*f.source.x+u*(kt.y-f.source.y)+kt.x)/(u*u+1);return{x:I,y:u*(I-f.source.x)+f.source.y}}var q=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return vt(f,kt),f.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},f.prototype.init=function(){var u=this.get("graph"),I=this.get("onTick");this.set("tick",function(){I&&I(),u.refreshPositions()})},f.prototype.bundling=function(u){var I=this;if(I.set("data",u),!I.isTicking()){var W=u.edges||[],st=u.nodes||[],jt={},Gt=!1;if(st.forEach(function(Fn){Fn.x!==null&&!Fn.y!==null&&Fn.x!==void 0&&!Fn.y!==void 0||(Gt=!0),jt[Fn.id]=Fn}),Gt)throw new Error("please layout the graph or assign x and y for nodes first");I.set("nodeIdMap",jt);var Ht=I.get("divisions"),ee=I.get("divRate"),ae=I.divideEdges(Ht);I.set("edgePoints",ae);var je=I.getEdgeBundles();I.set("edgeBundles",je);for(var Fe=I.get("cycles"),Ue=I.get("iterations"),Ke=I.get("iterRate"),bn=I.get("lambda"),wn=0;wn<Fe;wn++){for(var Nn=function(sr){var ur=[];W.forEach(function(Or,ei){if(Or.source!==Or.target){var Ci=jt[Or.source],kr=jt[Or.target];ur[ei]=I.getEdgeForces({source:Ci,target:kr},ei,Ht,bn);for(var yi=0;yi<Ht+1;yi++)ae[ei][yi].x+=ur[ei][yi].x,ae[ei][yi].y+=ur[ei][yi].y}})},Bn=0;Bn<Ue;Bn++)Nn();bn/=2,Ht*=ee,Ue*=Ke,ae=I.divideEdges(Ht),I.set("edgePoints",ae)}W.forEach(function(Fn,sr){Fn.source!==Fn.target&&(Fn.type="polyline",Fn.controlPoints=ae[sr].slice(1,ae[sr].length-1))}),I.get("graph").refresh()}},f.prototype.updateBundling=function(u){var I=this,W=u.data;if(W&&I.set("data",W),I.get("ticking")&&I.set("ticking",!1),Object.keys(u).forEach(function(jt){I.set(jt,u[jt])}),u.onTick){var st=this.get("graph");I.set("tick",function(){u.onTick(),st.refresh()})}I.bundling(W)},f.prototype.divideEdges=function(u){var I=this,W=I.get("data").edges,st=I.get("nodeIdMap"),jt=I.get("edgePoints");return jt&&jt!==void 0||(jt=[]),W.forEach(function(Gt,Ht){jt[Ht]&&jt[Ht]!==void 0||(jt[Ht]=[]);var ee=st[Gt.source],ae=st[Gt.target];if(u===1)jt[Ht].push({x:ee.x,y:ee.y}),jt[Ht].push({x:.5*(ee.x+ae.x),y:.5*(ee.y+ae.y)}),jt[Ht].push({x:ae.x,y:ae.y});else{var je=(jt[Ht]&&jt[Ht]!==[]?I.getEdgeLength(jt[Ht]):bt({x:ee.x,y:ee.y},{x:ae.x,y:ae.y}))/(u+1),Fe=je,Ue=[{x:ee.x,y:ee.y}];jt[Ht].forEach(function(Ke,bn){if(bn!==0){for(var wn=bt(Ke,jt[Ht][bn-1]);wn>Fe;){var Nn=Fe/wn,Bn={x:jt[Ht][bn-1].x,y:jt[Ht][bn-1].y};Bn.x+=Nn*(Ke.x-jt[Ht][bn-1].x),Bn.y+=Nn*(Ke.y-jt[Ht][bn-1].y),Ue.push(Bn),wn-=Fe,Fe=je}Fe-=wn}}),Ue.push({x:ae.x,y:ae.y}),jt[Ht]=Ue}}),jt},f.prototype.getEdgeLength=function(u){var I=0;return u.forEach(function(W,st){st!==0&&(I+=bt(W,u[st-1]))}),I},f.prototype.getEdgeBundles=function(){var u=this,I=u.get("data").edges||[],W=u.get("bundleThreshold"),st=u.get("nodeIdMap"),jt=u.get("edgeBundles");return jt||(jt=[]),I.forEach(function(Gt,Ht){jt[Ht]&&jt[Ht]!==void 0||(jt[Ht]=[])}),I.forEach(function(Gt,Ht){var ee=st[Gt.source],ae=st[Gt.target];I.forEach(function(je,Fe){if(!(Fe<=Ht)){var Ue=st[je.source],Ke=st[je.target];u.getBundleScore({source:ee,target:ae},{source:Ue,target:Ke})>=W&&(jt[Ht].push(Fe),jt[Fe].push(Ht))}})}),jt},f.prototype.getBundleScore=function(u,I){return u.vx=u.target.x-u.source.x,u.vy=u.target.y-u.source.y,I.vx=I.target.x-I.source.x,I.vy=I.target.y-I.source.y,u.length=bt({x:u.source.x,y:u.source.y},{x:u.target.x,y:u.target.y}),I.length=bt({x:I.source.x,y:I.source.y},{x:I.target.x,y:I.target.y}),this.getAngleScore(u,I)*this.getScaleScore(u,I)*this.getPositionScore(u,I)*this.getVisibilityScore(u,I)},f.prototype.getAngleScore=function(u,I){return function(W,st){return W.x*st.x+W.y*st.y}({x:u.vx,y:u.vy},{x:I.vx,y:I.vy})/(u.length*I.length)},f.prototype.getScaleScore=function(u,I){var W=(u.length+I.length)/2;return 2/(W/Math.min(u.length,I.length)+Math.max(u.length,I.length)/W)},f.prototype.getPositionScore=function(u,I){var W=(u.length+I.length)/2;return W/(W+bt({x:(u.source.x+u.target.x)/2,y:(u.source.y+u.target.y)/2},{x:(I.source.x+I.target.x)/2,y:(I.source.y+I.target.y)/2}))},f.prototype.getVisibilityScore=function(u,I){var W=this.getEdgeVisibility(u,I),st=this.getEdgeVisibility(I,u);return W<st?W:st},f.prototype.getEdgeVisibility=function(u,I){var W=At(I.source,u),st=At(I.target,u),jt={x:(W.x+st.x)/2,y:(W.y+st.y)/2},Gt={x:(u.source.x+u.target.x)/2,y:(u.source.y+u.target.y)/2};return Math.max(0,1-2*bt(jt,Gt)/bt(W,st))},f.prototype.getEdgeForces=function(u,I,W,st){for(var jt=this.get("edgePoints"),Gt=this.get("K")/(bt(u.source,u.target)*(W+1)),Ht=[{x:0,y:0}],ee=1;ee<W;ee++){var ae={x:0,y:0},je=this.getSpringForce({pre:jt[I][ee-1],cur:jt[I][ee],next:jt[I][ee+1]},Gt),Fe=this.getElectrostaticForce(ee,I);ae.x=st*(je.x+Fe.x),ae.y=st*(je.y+Fe.y),Ht.push(ae)}return Ht.push({x:0,y:0}),Ht},f.prototype.getSpringForce=function(u,I){var W=u.pre.x+u.next.x-2*u.cur.x,st=u.pre.y+u.next.y-2*u.cur.y;return{x:W*=I,y:st*=I}},f.prototype.getElectrostaticForce=function(u,I){var W=this.get("eps"),st=this.get("edgeBundles"),jt=this.get("edgePoints"),Gt=st[I],Ht={x:0,y:0};return Gt.forEach(function(ee){var ae={x:jt[ee][u].x-jt[I][u].x,y:jt[ee][u].y-jt[I][u].y};if(Math.abs(ae.x)>W||Math.abs(ae.y)>W){var je=1/bt(jt[ee][u],jt[I][u]);Ht.x+=ae.x*je,Ht.y+=ae.y*je}}),Ht},f.prototype.isTicking=function(){return this.get("ticking")},f.prototype.getSimulation=function(){return this.get("forceSimulation")},f.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),kt.prototype.destroy.call(this)},f}(s),ct=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var jt in st)Object.prototype.hasOwnProperty.call(st,jt)&&(W[jt]=st[jt])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}(),ot=function(){return(ot=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var st in u=arguments[I])Object.prototype.hasOwnProperty.call(u,st)&&(f[st]=u[st]);return f}).apply(this,arguments)},_={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},P=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return ct(f,kt),f.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:Object(n.c)(_),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},f.prototype.getEvents=function(){var u;switch(this.get("trigger")){case"click":u={click:"magnify"};break;case"drag":u={click:"createDelegate"};break;default:u={mousemove:"magnify"}}return u},f.prototype.init=function(){var u=this.get("r");this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{}),this.set("r2",u*u);var I=this.get("d");this.set("molecularParam",(I+1)*u)},f.prototype.createDelegate=function(u){var I=this,W=this,st=W.get("delegate");st&&!st.destroyed||(W.magnify(u),(st=W.get("delegate")).on("dragstart",function(jt){W.set("delegateCenterDiff",{x:st.attr("x")-jt.x,y:st.attr("y")-jt.y})}),st.on("drag",function(jt){W.magnify(jt)}),this.get("scaleDBy")==="wheel"&&st.on("mousewheel",function(jt){I.scaleDByWheel(jt)}),this.get("scaleRBy")==="wheel"&&st.on("mousewheel",function(jt){W.scaleRByWheel(jt)}))},f.prototype.scaleRByWheel=function(u){if(u&&u.originalEvent){u.preventDefault&&u.preventDefault();var I,W=this.get("graph"),st=this.get("delegate"),jt=(st?{x:st.attr("x"),y:st.attr("y")}:void 0)||W.getPointByClient(u.clientX,u.clientY);I=u.originalEvent.wheelDelta<0?.95:1/.95;var Gt=this.get("maxR"),Ht=this.get("minR"),ee=this.get("r");(ee>(Gt||W.get("height"))&&I>1||ee<(Ht||.05*W.get("height"))&&I<1)&&(I=1),ee*=I,this.set("r",ee),this.set("r2",ee*ee);var ae=this.get("d");this.set("molecularParam",(ae+1)*ee),this.set("delegateCenterDiff",void 0),this.magnify(u,jt)}},f.prototype.scaleRByDrag=function(u){if(u){var I,W=this.get("dragPrePos"),st=this.get("graph"),jt=st.getPointByClient(u.clientX,u.clientY);I=u.x-W.x<0?.95:1/.95;var Gt=this.get("maxR"),Ht=this.get("minR"),ee=this.get("r");(ee>(Gt||st.get("height"))&&I>1||ee<(Ht||.05*st.get("height"))&&I<1)&&(I=1),ee*=I,this.set("r",ee),this.set("r2",ee*ee);var ae=this.get("d");this.set("molecularParam",(ae+1)*ee),this.magnify(u,jt),this.set("dragPrePos",{x:u.x,y:u.y})}},f.prototype.scaleDByWheel=function(u){if(u||u.originalEvent){u.preventDefault&&u.preventDefault();var I=0;I=u.originalEvent.wheelDelta<0?-.1:.1;var W=this.get("d")+I,st=this.get("maxD"),jt=this.get("minD");if(W<st&&W>jt){this.set("d",W);var Gt=this.get("r");this.set("molecularParam",(W+1)*Gt);var Ht=this.get("delegate"),ee=Ht?{x:Ht.attr("x"),y:Ht.attr("y")}:void 0;this.set("delegateCenterDiff",void 0),this.magnify(u,ee)}}},f.prototype.scaleDByDrag=function(u){var I=this.get("dragPrePos"),W=u.x-I.x>0?.1:-.1,st=this.get("d")+W,jt=this.get("maxD"),Gt=this.get("minD");if(st<jt&&st>Gt){this.set("d",st);var Ht=this.get("r");this.set("molecularParam",(st+1)*Ht),this.magnify(u)}this.set("dragPrePos",{x:u.x,y:u.y})},f.prototype.magnify=function(u,I){this.restoreCache();var W=this.get("graph"),st=this.get("cachedMagnifiedModels"),jt=this.get("cachedOriginPositions"),Gt=this.get("showLabel"),Ht=this.get("r"),ee=this.get("r2"),ae=this.get("d"),je=this.get("molecularParam"),Fe=W.getNodes(),Ue=Fe.length,Ke=I?{x:I.x,y:I.y}:{x:u.x,y:u.y};!this.get("dragging")||this.get("trigger")!=="mousemove"&&this.get("trigger")!=="click"||(Ke=this.get("cacheCenter"));var bn=this.get("delegateCenterDiff");bn&&(Ke.x+=bn.x,Ke.y+=bn.y),this.updateDelegate(Ke,Ht);for(var wn=0;wn<Ue;wn++){var Nn=Fe[wn].getModel(),Bn=Nn.x,Fn=Nn.y;if(!isNaN(Bn)&&!isNaN(Fn)){var sr=(Bn-Ke.x)*(Bn-Ke.x)+(Fn-Ke.y)*(Fn-Ke.y);if(!isNaN(sr)&&sr<ee&&sr!==0){var ur=Math.sqrt(sr),Or=je*ur/(ae*ur+Ht),ei=(Bn-Ke.x)/ur,Ci=(Fn-Ke.y)/ur;if(Nn.x=ei*Or+Ke.x,Nn.y=Ci*Or+Ke.y,jt[Nn.id]||(jt[Nn.id]={x:Bn,y:Fn,texts:[]}),st.push(Nn),Gt&&2*ur<Ht)for(var kr=Fe[wn].getContainer().getChildren(),yi=kr.length,oo=0;oo<yi;oo++){var so=kr[oo];so.get("type")==="text"&&(jt[Nn.id].texts.push({visible:so.get("visible"),shape:so}),so.set("visible",!0))}}}}W.refreshPositions()},f.prototype.restoreCache=function(){for(var u=this.get("cachedMagnifiedModels"),I=this.get("cachedOriginPositions"),W=u.length,st=0;st<W;st++){var jt=u[st],Gt=I[jt.id];jt.x=Gt.x,jt.y=Gt.y;for(var Ht=Gt.texts.length,ee=0;ee<Ht;ee++){var ae=Gt.texts[ee];ae.shape.set("visible",ae.visible)}}this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{})},f.prototype.updateParams=function(u){var I=u.r,W=u.d,st=u.trigger,jt=u.minD,Gt=u.maxD,Ht=u.minR,ee=u.maxR,ae=u.scaleDBy,je=u.scaleRBy;isNaN(u.r)||(this.set("r",I),this.set("r2",I*I)),isNaN(W)||this.set("d",W),isNaN(Gt)||this.set("maxD",Gt),isNaN(jt)||this.set("minD",jt),isNaN(ee)||this.set("maxR",ee),isNaN(Ht)||this.set("minR",Ht);var Fe,Ue=this.get("d"),Ke=this.get("r");this.set("molecularParam",(Ue+1)*Ke),st!=="mousemove"&&st!=="click"&&st!=="drag"||this.set("trigger",st),(ae==="drag"||ae==="wheel"||ae==="unset")&&(this.set("scaleDBy",ae),this.get("delegate").remove(),this.get("delegate").destroy(),(Fe=this.get("dPercentText"))&&(Fe.remove(),Fe.destroy())),je!=="drag"&&je!=="wheel"&&je!=="unset"||(this.set("scaleRBy",je),this.get("delegate").remove(),this.get("delegate").destroy(),(Fe=this.get("dPercentText"))&&(Fe.remove(),Fe.destroy()))},f.prototype.updateDelegate=function(u,I){var W=this,st=this,jt=st.get("graph"),Gt=st.get("delegate");if(!Gt||Gt.destroyed){var Ht=jt.get("group"),ee=st.get("delegateStyle")||_;Gt=Ht.addShape("circle",{attrs:ot({r:I/1.5,x:u.x,y:u.y},ee),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?Gt.on("mousewheel",function(Ue){st.scaleRByWheel(Ue)}):this.get("scaleRBy")==="drag"&&(Gt.on("dragstart",function(Ue){st.set("dragging",!0),st.set("cacheCenter",{x:Ue.x,y:Ue.y}),st.set("dragPrePos",{x:Ue.x,y:Ue.y})}),Gt.on("drag",function(Ue){st.scaleRByDrag(Ue)}),Gt.on("dragend",function(Ue){st.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?Gt.on("mousewheel",function(Ue){W.scaleDByWheel(Ue)}):this.get("scaleDBy")==="drag"&&(Gt.on("dragstart",function(Ue){st.set("dragging",!0),st.set("cacheCenter",{x:Ue.x,y:Ue.y}),st.set("dragPrePos",{x:Ue.x,y:Ue.y})}),Gt.on("drag",function(Ue){W.scaleDByDrag(Ue)}),Gt.on("dragend",function(Ue){st.set("dragging",!1)})))}else Gt.attr({x:u.x,y:u.y,r:I/1.5});if(st.get("showDPercent")){var ae=Math.round((st.get("d")-st.get("minD"))/(st.get("maxD")-st.get("minD"))*100),je=st.get("dPercentText"),Fe=u.y+I/1.5+16;!je||je.destroyed?(je=jt.get("group").addShape("text",{attrs:{text:ae+"%",x:u.x,y:Fe,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),st.set("dPercentText",je)):je.attr({text:ae+"%",x:u.x,y:Fe})}st.set("delegate",Gt)},f.prototype.clear=function(){var u=this.get("graph");this.restoreCache(),u.refreshPositions();var I=this.get("delegate");I&&!I.destroyed&&(I.remove(),I.destroy());var W=this.get("dPercentText");W&&!W.destroyed&&(W.remove(),W.destroy())},f.prototype.destroy=function(){this.clear()},f}(s),Y=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var jt in st)Object.prototype.hasOwnProperty.call(st,jt)&&(W[jt]=st[jt])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}();v()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var k=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return Y(f,kt),f.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(I){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},f.prototype.init=function(){var u=this,I=this.get("graph"),W=this.get("getContent")(I),st=W;Object(n.x)(W)&&(st=Object(y.b)(W));var jt=this.get("className");st.setAttribute("class",jt||"g6-component-toolbar");var Gt=this.get("container");Gt||(Gt=this.get("graph").get("container")),Object(n.x)(Gt)&&(Gt=document.getElementById(Gt)),Gt.appendChild(st),this.set("toolBar",st);var Ht=this.get("handleClick");st.addEventListener("click",function(ae){var je=function(Ue){if(!Ue)return[];if(Ue.composedPath)return Ue.composedPath();for(var Ke=[],bn=Ue.target;bn;){if(Ke.push(bn),bn.tagName==="HTML")return Ke.push(document,window),Ke;bn=bn.parentElement}return Ke}(ae).filter(function(Ue){return Ue.nodeName==="LI"});if(je.length!==0){var Fe=je[0].getAttribute("code");Fe&&(Ht?Ht(Fe,I):u.handleDefaultOperator(Fe,I))}});var ee=this.get("position");ee&&Object(y.c)(st,{top:ee.y+"px",left:ee.x+"px"}),this.bindUndoRedo()},f.prototype.bindUndoRedo=function(){var u=this.get("graph"),I=document.querySelector('.g6-component-toolbar li[code="undo"]'),W=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),st=document.querySelector('.g6-component-toolbar li[code="redo"]'),jt=document.querySelector('.g6-component-toolbar li[code="redo"] svg');I&&W&&st&&jt&&u.on("stackchange",function(Gt){var Ht=Gt.undoStack,ee=Gt.redoStack,ae=Ht.length,je=ee.length;ae===1?(I.setAttribute("style","cursor: not-allowed"),W.setAttribute("style","opacity: 0.4")):(I.removeAttribute("style"),W.removeAttribute("style")),je===0?(st.setAttribute("style","cursor: not-allowed"),jt.setAttribute("style","opacity: 0.4")):(st.removeAttribute("style"),jt.removeAttribute("style"))})},f.prototype.undo=function(){var u=this.get("graph"),I=u.getUndoStack();if(I&&I.length!==0){var W=I.pop();if(W){var st=W.action;u.pushStack(st,Object(n.c)(W.data),"redo");var jt=W.data.before;if(st==="add"&&(jt=W.data.after),!jt)return;switch(st){case"visible":Object.keys(jt).forEach(function(Gt){var Ht=jt[Gt];Ht&&Ht.forEach(function(ee){var ae=u.findById(ee.id);ee.visible?u.showItem(ae,!1):u.hideItem(ae,!1)})});break;case"render":case"update":Object.keys(jt).forEach(function(Gt){var Ht=jt[Gt];Ht&&Ht.forEach(function(ee){u.updateItem(ee.id,ee,!1)})});break;case"changedata":u.changeData(jt,!1);break;case"delete":Object.keys(jt).forEach(function(Gt){var Ht=jt[Gt];Ht&&Ht.forEach(function(ee){var ae=ee.itemType;delete ee.itemType,u.addItem(ae,ee,!1)})});break;case"add":Object.keys(jt).forEach(function(Gt){var Ht=jt[Gt];Ht&&Ht.forEach(function(ee){u.removeItem(ee.id,!1)})});break;case"updateComboTree":Object.keys(jt).forEach(function(Gt){var Ht=jt[Gt];Ht&&Ht.forEach(function(ee){u.updateComboTree(ee.id,ee.parentId,!1)})})}}}},f.prototype.redo=function(){var u=this.get("graph"),I=u.getRedoStack();if(I&&I.length!==0){var W=I.pop();if(W){var st=W.action,jt=W.data.after;if(u.pushStack(st,Object(n.c)(W.data)),st==="delete"&&(jt=W.data.before),!jt)return;switch(st){case"visible":Object.keys(jt).forEach(function(Gt){var Ht=jt[Gt];Ht&&Ht.forEach(function(ee){var ae=u.findById(ee.id);ee.visible?u.showItem(ae,!1):u.hideItem(ae,!1)})});break;case"render":case"update":Object.keys(jt).forEach(function(Gt){var Ht=jt[Gt];Ht&&Ht.forEach(function(ee){u.updateItem(ee.id,ee,!1)})});break;case"changedata":u.changeData(jt,!1);break;case"delete":jt.edges&&jt.edges.forEach(function(Gt){u.removeItem(Gt.id,!1)}),jt.nodes&&jt.nodes.forEach(function(Gt){u.removeItem(Gt.id,!1)}),jt.combos&&jt.combos.forEach(function(Gt){u.removeItem(Gt.id,!1)});break;case"add":Object.keys(jt).forEach(function(Gt){var Ht=jt[Gt];Ht&&Ht.forEach(function(ee){var ae=ee.itemType;delete ee.itemType,u.addItem(ae,ee,!1)})});break;case"updateComboTree":Object.keys(jt).forEach(function(Gt){var Ht=jt[Gt];Ht&&Ht.forEach(function(ee){u.updateComboTree(ee.id,ee.parentId,!1)})})}}}},f.prototype.handleDefaultOperator=function(u,I){var W=I.getZoom();switch(u){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":var st=1/(1-.05*this.get("zoomSensitivity"));if(st*W>(this.get("maxZoom")||I.get("maxZoom")))return;I.zoomTo(W*st);break;case"zoomIn":var jt=1-.05*this.get("zoomSensitivity");if(jt*W<(this.get("minZoom")||I.get("minZoom")))return;I.zoomTo(W*jt);break;case"realZoom":I.zoomTo(1);break;case"autoZoom":I.fitView([20,20])}},f.prototype.destroy=function(){var u=this.get("toolBar");if(u){var I=this.get("container");I||(I=this.get("graph").get("container")),Object(n.x)(I)&&(I=document.getElementById(I)),I.removeChild(u)}var W=this.get("handleClick");W&&u.removeEventListener("click",W)},f}(s),h=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var jt in st)Object.prototype.hasOwnProperty.call(st,jt)&&(W[jt]=st[jt])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}();v()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var g=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return h(f,kt),f.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(I){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`+I.item.getType()+`</h4>
          <span class='tooltip-id'>ID\uFF1A`+I.item.getID()+`</span>
        `},shouldBegin:function(I){return!0},itemTypes:["node","edge","combo"]}},f.prototype.getEvents=function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},f.prototype.init=function(){var u=this.get("className")||"g6-component-tooltip",I=Object(y.b)("<div class="+u+"></div>"),W=this.get("container");W||(W=this.get("graph").get("container")),Object(n.x)(W)&&(W=document.getElementById(W)),Object(y.c)(I,{position:"absolute",visibility:"hidden"}),W.appendChild(I),this.set("tooltip",I)},f.prototype.onMouseEnter=function(u){var I=this.get("itemTypes");if(!u.item||!u.item.getType||I.indexOf(u.item.getType())!==-1){var W=u.item,st=this.get("graph");this.currentTarget=W,this.showTooltip(u),st.emit("tooltipchange",{item:u.item,action:"show"})}},f.prototype.onMouseMove=function(u){var I=this.get("itemTypes");u.item&&u.item.getType&&I.indexOf(u.item.getType())===-1||this.currentTarget&&u.item===this.currentTarget&&this.showTooltip(u)},f.prototype.onMouseLeave=function(){this.hideTooltip(),this.get("graph").emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},f.prototype.showTooltip=function(u){if(u.item){var I=this.get("itemTypes");if(!u.item.getType||I.indexOf(u.item.getType())!==-1){var W=this.get("tooltip"),st=this.get("getContent")(u);Object(n.x)(st)?W.innerHTML=st:W.innerHTML=st.outerHTML,this.updatePosition(u)}}},f.prototype.hideTooltip=function(){var u=this.get("tooltip");u&&Object(y.c)(u,{visibility:"hidden"})},f.prototype.updatePosition=function(u){var I=this.get("shouldBegin"),W=this.get("tooltip");if(I(u)){var st=this.get("graph"),jt=st.get("width"),Gt=st.get("height"),Ht=this.get("offsetX")||0,ee=this.get("offsetY")||0,ae=st.getPointByClient(u.clientX,u.clientY),je=st.getCanvasByPoint(ae.x,ae.y),Fe=je.x,Ue=je.y;Fe+=Ht,Ue+=ee;var Ke=W.getBoundingClientRect();Fe+Ke.width>jt&&(Fe=Fe-Ke.width-Ht),Ue+Ke.height>Gt&&(Ue=Ue-Ke.height-ee),Object(y.c)(W,{left:Fe+"px",top:Ue+"px",visibility:"visible"})}else Object(y.c)(W,{visibility:"hidden"})},f.prototype.hide=function(){this.onMouseLeave()},f.prototype.destroy=function(){var u=this.get("tooltip");if(u){var I=this.get("container");I||(I=this.get("graph").get("container")),Object(n.x)(I)&&(I=document.getElementById(I)),I.removeChild(u)}},f}(s),F=e(31),V={};function H(kt,f){V[kt]=f}var et=function(){function kt(f){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=f,this.initCfg(),this.init()}return kt.prototype.translate=function(f){return f},kt.prototype.change=function(f){Object(n.a)(this.__cfg__,f),this.init()},kt.prototype.clone=function(){return this.constructor(this.__cfg__)},kt.prototype.getTicks=function(){var f=this;return Object(n.z)(this.ticks,function(u,I){return Object(n.v)(u)?u:{text:f.getText(u,I),tickValue:u,value:f.scale(u)}})},kt.prototype.getText=function(f,u){var I=this.formatter,W=I?I(f,u):f;return Object(n.s)(W)||!Object(n.r)(W.toString)?"":W.toString()},kt.prototype.getConfig=function(f){return this.__cfg__[f]},kt.prototype.init=function(){Object(n.a)(this,this.__cfg__),this.setDomain(),Object(n.p)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},kt.prototype.initCfg=function(){},kt.prototype.setDomain=function(){},kt.prototype.calculateTicks=function(){var f=this.tickMethod,u=[];if(Object(n.x)(f)){var I=V[f];if(!I)throw new Error("There is no method to to calculate ticks!");u=I(this)}else Object(n.r)(f)&&(u=f(this));return u},kt.prototype.rangeMin=function(){return Object(n.k)(this.range)},kt.prototype.rangeMax=function(){return Object(n.y)(this.range)},kt.prototype.calcPercent=function(f,u,I){return Object(n.t)(f)?(f-u)/(I-u):NaN},kt.prototype.calcValue=function(f,u,I){return u+f*(I-u)},kt}(),nt=e(1),St=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="cat",u.isCategory=!0,u.cache=new Map,u}return Object(nt.b)(f,kt),f.prototype.translate=function(u){if(this.cache.has(u))return this.cache.get(u);var I=Object(n.l)(this.values,u);return I===-1&&(I=Object(n.t)(u)?u:NaN),this.cache.set(u,I),I},f.prototype.scale=function(u){var I=this.translate(u),W=this.calcPercent(I,this.min,this.max);return this.calcValue(W,this.rangeMin(),this.rangeMax())},f.prototype.invert=function(u){var I=this.max-this.min,W=this.calcPercent(u,this.rangeMin(),this.rangeMax()),st=Math.round(I*W)+this.min;return st<this.min||st>this.max?NaN:this.values[st]},f.prototype.getText=function(u){for(var I=[],W=1;W<arguments.length;W++)I[W-1]=arguments[W];var st=u;return Object(n.t)(u)&&!this.values.includes(u)&&(st=this.values[st]),kt.prototype.getText.apply(this,Object(nt.d)([st],I))},f.prototype.initCfg=function(){this.tickMethod="cat"},f.prototype.setDomain=function(){if(Object(n.s)(this.getConfig("min"))&&(this.min=0),Object(n.s)(this.getConfig("max"))){var u=this.values.length;this.max=u>1?u-1:u}this.cache&&this.cache.clear()},f}(et),dt=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,gt="[^\\s]+",yt=/\[([^]*?)\]/gm;function Ct(kt,f){for(var u=[],I=0,W=kt.length;I<W;I++)u.push(kt[I].substr(0,f));return u}var Pt=function(f){return function(u,I){var W=I[f].map(function(st){return st.toLowerCase()}).indexOf(u.toLowerCase());return W>-1?W:null}};function Ft(kt){for(var f=[],u=1;u<arguments.length;u++)f[u-1]=arguments[u];for(var I=0,W=f;I<W.length;I++){var st=W[I];for(var jt in st)kt[jt]=st[jt]}return kt}var Tt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],zt=["January","February","March","April","May","June","July","August","September","October","November","December"],Xt=Ct(zt,3),re={dayNamesShort:Ct(Tt,3),dayNames:Tt,monthNamesShort:Xt,monthNames:zt,amPm:["am","pm"],DoFn:function(f){return f+["th","st","nd","rd"][f%10>3?0:(f-f%10!=10?1:0)*f%10]}},de=Ft({},re),ye=function(f){return de=Ft(de,f)},we=function(f){return f.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},De=function(f,u){for(u===void 0&&(u=2),f=String(f);f.length<u;)f="0"+f;return f},Ve={D:function(f){return String(f.getDate())},DD:function(f){return De(f.getDate())},Do:function(f,u){return u.DoFn(f.getDate())},d:function(f){return String(f.getDay())},dd:function(f){return De(f.getDay())},ddd:function(f,u){return u.dayNamesShort[f.getDay()]},dddd:function(f,u){return u.dayNames[f.getDay()]},M:function(f){return String(f.getMonth()+1)},MM:function(f){return De(f.getMonth()+1)},MMM:function(f,u){return u.monthNamesShort[f.getMonth()]},MMMM:function(f,u){return u.monthNames[f.getMonth()]},YY:function(f){return De(String(f.getFullYear()),4).substr(2)},YYYY:function(f){return De(f.getFullYear(),4)},h:function(f){return String(f.getHours()%12||12)},hh:function(f){return De(f.getHours()%12||12)},H:function(f){return String(f.getHours())},HH:function(f){return De(f.getHours())},m:function(f){return String(f.getMinutes())},mm:function(f){return De(f.getMinutes())},s:function(f){return String(f.getSeconds())},ss:function(f){return De(f.getSeconds())},S:function(f){return String(Math.round(f.getMilliseconds()/100))},SS:function(f){return De(Math.round(f.getMilliseconds()/10),2)},SSS:function(f){return De(f.getMilliseconds(),3)},a:function(f,u){return f.getHours()<12?u.amPm[0]:u.amPm[1]},A:function(f,u){return f.getHours()<12?u.amPm[0].toUpperCase():u.amPm[1].toUpperCase()},ZZ:function(f){var u=f.getTimezoneOffset();return(u>0?"-":"+")+De(100*Math.floor(Math.abs(u)/60)+Math.abs(u)%60,4)},Z:function(f){var u=f.getTimezoneOffset();return(u>0?"-":"+")+De(Math.floor(Math.abs(u)/60),2)+":"+De(Math.abs(u)%60,2)}},pn=function(f){return+f-1},sn=[null,"[1-9]\\d?"],In=[null,gt],An=["isPm",gt,function(kt,f){var u=kt.toLowerCase();return u===f.amPm[0]?0:u===f.amPm[1]?1:null}],Rn=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(kt){var f=(kt+"").match(/([+-]|\d\d)/gi);if(f){var u=60*+f[1]+parseInt(f[2],10);return f[0]==="+"?u:-u}return 0}],Mn={D:["day","[1-9]\\d?"],DD:["day","\\d\\d"],Do:["day","[1-9]\\d?"+gt,function(kt){return parseInt(kt,10)}],M:["month","[1-9]\\d?",pn],MM:["month","\\d\\d",pn],YY:["year","\\d\\d",function(kt){var f=+(""+new Date().getFullYear()).substr(0,2);return+(""+(+kt>68?f-1:f)+kt)}],h:["hour","[1-9]\\d?",void 0,"isPm"],hh:["hour","\\d\\d",void 0,"isPm"],H:["hour","[1-9]\\d?"],HH:["hour","\\d\\d"],m:["minute","[1-9]\\d?"],mm:["minute","\\d\\d"],s:["second","[1-9]\\d?"],ss:["second","\\d\\d"],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(kt){return 100*+kt}],SS:["millisecond","\\d\\d",function(kt){return 10*+kt}],SSS:["millisecond","\\d{3}"],d:sn,dd:sn,ddd:In,dddd:In,MMM:["month",gt,Pt("monthNamesShort")],MMMM:["month",gt,Pt("monthNames")],a:An,A:An,ZZ:Rn,Z:Rn},Cn={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Gn=function(f){return Ft(Cn,f)},Xn=function(f,u,I){if(u===void 0&&(u=Cn.default),I===void 0&&(I={}),typeof f=="number"&&(f=new Date(f)),Object.prototype.toString.call(f)!=="[object Date]"||isNaN(f.getTime()))throw new Error("Invalid Date pass to format");var W=[];u=(u=Cn[u]||u).replace(yt,function(jt,Gt){return W.push(Gt),"@@@"});var st=Ft(Ft({},de),I);return(u=u.replace(dt,function(jt){return Ve[jt](f,st)})).replace(/@@@/g,function(){return W.shift()})};function tr(kt,f,u){if(u===void 0&&(u={}),typeof f!="string")throw new Error("Invalid format in fecha parse");if(f=Cn[f]||f,kt.length>1e3)return null;var I={year:new Date().getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},W=[],st=[],jt=f.replace(yt,function(Fn,sr){return st.push(we(sr)),"@@@"}),Gt={},Ht={};jt=we(jt).replace(dt,function(Fn){var sr=Mn[Fn],ur=sr[0],Or=sr[1],ei=sr[3];if(Gt[ur])throw new Error("Invalid format. "+ur+" specified twice in format");return Gt[ur]=!0,ei&&(Ht[ei]=!0),W.push(sr),"("+Or+")"}),Object.keys(Ht).forEach(function(Fn){if(!Gt[Fn])throw new Error("Invalid format. "+Fn+" is required in specified format")}),jt=jt.replace(/@@@/g,function(){return st.shift()});var ee=kt.match(new RegExp(jt,"i"));if(!ee)return null;for(var ae=Ft(Ft({},de),u),je=1;je<ee.length;je++){var Fe=W[je-1],Ue=Fe[0],Ke=Fe[2],bn=Ke?Ke(ee[je],ae):+ee[je];if(bn==null)return null;I[Ue]=bn}I.isPm===1&&I.hour!=null&&+I.hour!=12?I.hour=+I.hour+12:I.isPm===0&&+I.hour==12&&(I.hour=0);for(var wn=new Date(I.year,I.month,I.day,I.hour,I.minute,I.second,I.millisecond),Nn=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],Bn=(je=0,Nn.length);je<Bn;je++)if(Gt[Nn[je][0]]&&I[Nn[je][0]]!==wn[Nn[je][1]]())return null;return I.timezoneOffset==null?wn:new Date(Date.UTC(I.year,I.month,I.day,I.hour,I.minute-I.timezoneOffset,I.second,I.millisecond))}var or={format:Xn,parse:tr,defaultI18n:re,setGlobalDateI18n:ye,setGlobalDateMasks:Gn};function nr(kt,f){return(p.format||or.format)(kt,f)}function er(kt){return Object(n.x)(kt)&&(kt=kt.indexOf("T")>0?new Date(kt).getTime():new Date(kt.replace(/-/gi,"/")).getTime()),Object(n.o)(kt)&&(kt=kt.getTime()),kt}var Sr=36e5,Vr=24*Sr,ti=31*Vr,hi=[["HH:mm:ss",1e3],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",6e4],["HH:mm",6e5],["HH:mm",18e5],["HH",Sr],["HH",6*Sr],["HH",12*Sr],["YYYY-MM-DD",Vr],["YYYY-MM-DD",4*Vr],["YYYY-WW",7*Vr],["YYYY-MM",ti],["YYYY-MM",4*ti],["YYYY-MM",6*ti],["YYYY",380*Vr]];function Fi(kt,f,u){var I,W=(I=function(Gt){return Gt[1]},function(jt,Gt,Ht,ee){for(var ae=Object(n.s)(Ht)?0:Ht,je=Object(n.s)(ee)?jt.length:ee;ae<je;){var Fe=ae+je>>>1;I(jt[Fe])>Gt?je=Fe:ae=Fe+1}return ae})(hi,(f-kt)/u)-1,st=hi[W];return W<0?st=hi[0]:W>=hi.length&&(st=Object(n.y)(hi)),st}var to=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="timeCat",u}return Object(nt.b)(f,kt),f.prototype.translate=function(u){u=er(u);var I=this.values.indexOf(u);return I===-1&&(I=Object(n.t)(u)&&u<this.values.length?u:NaN),I},f.prototype.getText=function(u,I){var W=this.translate(u);if(W>-1){var st=this.values[W],jt=this.formatter;return st=jt?jt(st,I):nr(st,this.mask)}return u},f.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},f.prototype.setDomain=function(){var u=this.values;Object(n.f)(u,function(I,W){u[W]=er(I)}),u.sort(function(I,W){return I-W}),kt.prototype.setDomain.call(this)},f}(St),si=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.isContinuous=!0,u}return Object(nt.b)(f,kt),f.prototype.scale=function(u){if(Object(n.s)(u))return NaN;var I=this.rangeMin(),W=this.rangeMax();return this.max===this.min?I:I+this.getScalePercent(u)*(W-I)},f.prototype.init=function(){kt.prototype.init.call(this);var u=this.ticks,I=Object(n.k)(u),W=Object(n.y)(u);I<this.min&&(this.min=I),W>this.max&&(this.max=W),Object(n.s)(this.minLimit)||(this.min=I),Object(n.s)(this.maxLimit)||(this.max=W)},f.prototype.setDomain=function(){var u=Object(n.j)(this.values),I=u.min,W=u.max;Object(n.s)(this.min)&&(this.min=I),Object(n.s)(this.max)&&(this.max=W),this.min>this.max&&(this.min=I,this.max=W)},f.prototype.calculateTicks=function(){var u=this,I=kt.prototype.calculateTicks.call(this);return this.nice||(I=Object(n.g)(I,function(W){return W>=u.min&&W<=u.max})),I},f.prototype.getScalePercent=function(u){var I=this.max,W=this.min;return(u-W)/(I-W)},f.prototype.getInvertPercent=function(u){return(u-this.rangeMin())/(this.rangeMax()-this.rangeMin())},f}(et),Ti=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="linear",u.isLinear=!0,u}return Object(nt.b)(f,kt),f.prototype.invert=function(u){var I=this.getInvertPercent(u);return this.min+I*(this.max-this.min)},f.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},f}(si);function Ui(kt,f){var u=Math.E;return f>=0?Math.pow(u,Math.log(f)/kt):-1*Math.pow(u,Math.log(-f)/kt)}function Li(kt,f){return kt===1?1:Math.log(f)/Math.log(kt)}function Vi(kt,f,u){Object(n.s)(u)&&(u=Math.max.apply(null,kt));var I=u;return Object(n.f)(kt,function(W){W>0&&W<I&&(I=W)}),I===u&&(I=u/f),I>1&&(I=1),I}var ro=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="log",u}return Object(nt.b)(f,kt),f.prototype.invert=function(u){var I,W=this.base,st=Li(W,this.max),jt=this.rangeMin(),Gt=this.rangeMax()-jt,Ht=this.positiveMin;if(Ht){if(u===0)return 0;var ee=1/(st-(I=Li(W,Ht/W)))*Gt;if(u<ee)return u/ee*Ht}else I=Li(W,this.min);var ae=(u-jt)/Gt*(st-I)+I;return Math.pow(W,ae)},f.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},f.prototype.setDomain=function(){kt.prototype.setDomain.call(this);var u=this.min;if(u<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");u===0&&(this.positiveMin=Vi(this.values,this.base,this.max))},f.prototype.getScalePercent=function(u){var I=this.max,W=this.min;if(I===W||u<=0)return 0;var st=this.base,jt=this.positiveMin;return jt&&(W=1*jt/st),u<jt?u/jt/(Li(st,I)-Li(st,W)):(Li(st,u)-Li(st,W))/(Li(st,I)-Li(st,W))},f}(si),jr=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="pow",u}return Object(nt.b)(f,kt),f.prototype.invert=function(u){var I=this.getInvertPercent(u),W=this.exponent,st=Ui(W,this.max),jt=Ui(W,this.min),Gt=I*(st-jt)+jt,Ht=Gt>=0?1:-1;return Math.pow(Gt,W)*Ht},f.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},f.prototype.getScalePercent=function(u){var I=this.max,W=this.min;if(I===W)return 0;var st=this.exponent;return(Ui(st,u)-Ui(st,W))/(Ui(st,I)-Ui(st,W))},f}(si),Ji=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="time",u}return Object(nt.b)(f,kt),f.prototype.getText=function(u,I){var W=this.translate(u),st=this.formatter;return st?st(W,I):nr(W,this.mask)},f.prototype.scale=function(u){var I=u;return(Object(n.x)(I)||Object(n.o)(I))&&(I=this.translate(I)),kt.prototype.scale.call(this,I)},f.prototype.translate=function(u){return er(u)},f.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},f.prototype.setDomain=function(){var u=this.values,I=this.getConfig("min"),W=this.getConfig("max");if(Object(n.s)(I)&&Object(n.t)(I)||(this.min=this.translate(this.min)),Object(n.s)(W)&&Object(n.t)(W)||(this.max=this.translate(this.max)),u&&u.length){var st=[],jt=1/0,Gt=jt,Ht=0;Object(n.f)(u,function(ee){var ae=er(ee);if(isNaN(ae))throw new TypeError("Invalid Time: "+ee+" in time scale!");jt>ae?(Gt=jt,jt=ae):Gt>ae&&(Gt=ae),Ht<ae&&(Ht=ae),st.push(ae)}),u.length>1&&(this.minTickInterval=Gt-jt),Object(n.s)(I)&&(this.min=jt),Object(n.s)(W)&&(this.max=Ht)}},f}(Ti),pr=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="quantize",u}return Object(nt.b)(f,kt),f.prototype.invert=function(u){var I=this.ticks,W=I.length,st=this.getInvertPercent(u),jt=Math.floor(st*(W-1));if(jt>=W-1)return Object(n.y)(I);if(jt<0)return Object(n.k)(I);var Gt=I[jt],Ht=jt/(W-1);return Gt+(st-Ht)/((jt+1)/(W-1)-Ht)*(I[jt+1]-Gt)},f.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},f.prototype.calculateTicks=function(){var u=kt.prototype.calculateTicks.call(this);return this.nice||(Object(n.y)(u)!==this.max&&u.push(this.max),Object(n.k)(u)!==this.min&&u.unshift(this.min)),u},f.prototype.getScalePercent=function(u){var I=this.ticks;if(u<Object(n.k)(I))return 0;if(u>Object(n.y)(I))return 1;var W=0;return Object(n.f)(I,function(st,jt){if(!(u>=st))return!1;W=jt}),W/(I.length-1)},f}(si),Xr=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="quantile",u}return Object(nt.b)(f,kt),f.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},f}(pr),Br={};function Nr(kt,f){if(function(u){return Br[u]}(kt))throw new Error("type '"+kt+"' existed.");Br[kt]=f}var Yr=function(kt){function f(){var u=kt!==null&&kt.apply(this,arguments)||this;return u.type="identity",u.isIdentity=!0,u}return Object(nt.b)(f,kt),f.prototype.calculateTicks=function(){return this.values},f.prototype.scale=function(u){return this.values[0]!==u&&Object(n.t)(u)?u:this.range[0]},f.prototype.invert=function(u){var I=this.range;return u<I[0]||u>I[1]?NaN:this.values[0]},f}(et),Kr=[1,5,2,2.5,4,3],ni=100*Number.EPSILON;function fi(kt,f,u,I,W,st){var jt=Object(n.E)(f),Gt=Object(n.l)(f,kt),Ht=0,ee=function(ae,je){return(ae%je+je)%je}(I,st);return(ee<ni||st-ee<ni)&&I<=0&&W>=0&&(Ht=1),1-Gt/(jt-1)-u+Ht}function $r(kt,f,u){var I=Object(n.E)(f);return 1-Object(n.l)(f,kt)/(I-1)-u+1}function ci(kt,f,u,I,W,st){var jt=(kt-1)/(st-W),Gt=(f-1)/(Math.max(st,I)-Math.min(u,W));return 2-Math.max(jt/Gt,Gt/jt)}function Qr(kt,f){return kt>=f?2-(kt-1)/(f-1):1}function gi(kt,f,u,I){var W=f-kt;return 1-.5*(Math.pow(f-I,2)+Math.pow(kt-u,2))/Math.pow(.1*W,2)}function Oi(kt,f,u){var I=f-kt;if(u>I){var W=(u-I)/2;return 1-Math.pow(W,2)/Math.pow(.1*I,2)}return 1}function bi(kt,f,u,I,W,st){if(u===void 0&&(u=5),I===void 0&&(I=!0),W===void 0&&(W=Kr),st===void 0&&(st=[.25,.2,.5,.05]),typeof kt!="number"||typeof f!="number")return{min:0,max:0,ticks:[]};if(kt===f||u===1)return{min:kt,max:f,ticks:[kt]};for(var jt={score:-2,lmin:0,lmax:0,lstep:0},Gt=1;Gt<1/0;){for(var Ht=0,ee=W;Ht<ee.length;Ht++){var ae=ee[Ht],je=$r(ae,W,Gt);if(Number.isNaN(je))throw new Error("NaN");if(st[0]*je+st[1]+st[2]+st[3]<jt.score){Gt=1/0;break}for(var Fe=2;Fe<1/0;){var Ue=Qr(Fe,u);if(st[0]*je+st[1]+st[2]*Ue+st[3]<jt.score)break;for(var Ke=(f-kt)/(Fe+1)/Gt/ae,bn=Math.ceil(Math.log10(Ke));bn<1/0;){var wn=Gt*ae*Math.pow(10,bn),Nn=Oi(kt,f,wn*(Fe-1));if(st[0]*je+st[1]*Nn+st[2]*Ue+st[3]<jt.score)break;var Bn=Math.floor(f/wn)*Gt-(Fe-1)*Gt,Fn=Math.ceil(kt/wn)*Gt;if(Bn>Fn)bn+=1;else{for(var sr=Bn;sr<=Fn;sr+=1){var ur=sr*(wn/Gt),Or=ur+wn*(Fe-1),ei=wn,Ci=fi(ae,W,Gt,ur,Or,ei),kr=gi(kt,f,ur,Or),yi=ci(Fe,u,kt,f,ur,Or),oo=st[0]*Ci+st[1]*kr+st[2]*yi+1*st[3];oo>jt.score&&(!I||ur<=kt&&Or>=f)&&(jt.lmin=ur,jt.lmax=Or,jt.lstep=ei,jt.score=oo)}bn+=1}}Fe+=1}}Gt+=1}for(var so=Number.isInteger(jt.lstep)?0:Math.ceil(Math.abs(Math.log10(jt.lstep))),co=[],lo=jt.lmin;lo<=jt.lmax;lo+=jt.lstep)co.push(lo);var Hi=so?Object(n.z)(co,function(Io){return Number.parseFloat(Io.toFixed(so))}):co;return{min:Math.min(kt,Object(n.k)(Hi)),max:Math.max(f,Object(n.y)(Hi)),ticks:Hi}}function _i(kt){var f=kt.values,u=kt.tickInterval,I=kt.tickCount,W=f;if(Object(n.t)(u))return Object(n.g)(W,function(Ht,ee){return ee%u==0});var st=kt.min,jt=kt.max;if(Object(n.s)(st)&&(st=0),Object(n.s)(jt)&&(jt=f.length-1),Object(n.t)(I)&&I<jt-st){var Gt=bi(st,jt,I,!1,[1,2,5,3,4,7,6,8,9]).ticks;return Object(n.g)(Gt,function(Ht){return Ht>=st&&Ht<=jt}).map(function(Ht){return f[Ht]})}return f.slice(st,jt+1)}var Qi=Math.sqrt(50),io=Math.sqrt(10),Wi=Math.sqrt(2),Zi=function(){function kt(){this._domain=[0,1]}return kt.prototype.domain=function(f){return f?(this._domain=Array.from(f,Number),this):this._domain.slice()},kt.prototype.nice=function(f){var u,I;f===void 0&&(f=5);var W,st=this._domain.slice(),jt=0,Gt=this._domain.length-1,Ht=this._domain[jt],ee=this._domain[Gt];return ee<Ht&&(Ht=(u=[ee,Ht])[0],ee=u[1],jt=(I=[Gt,jt])[0],Gt=I[1]),(W=Pi(Ht,ee,f))>0?W=Pi(Ht=Math.floor(Ht/W)*W,ee=Math.ceil(ee/W)*W,f):W<0&&(W=Pi(Ht=Math.ceil(Ht*W)/W,ee=Math.floor(ee*W)/W,f)),W>0?(st[jt]=Math.floor(Ht/W)*W,st[Gt]=Math.ceil(ee/W)*W,this.domain(st)):W<0&&(st[jt]=Math.ceil(Ht*W)/W,st[Gt]=Math.floor(ee*W)/W,this.domain(st)),this},kt.prototype.ticks=function(f){return f===void 0&&(f=5),function(u,I,W){var st,jt,Gt,Ht,ee=-1;if(W=+W,(u=+u)==(I=+I)&&W>0)return[u];if((st=I<u)&&(jt=u,u=I,I=jt),(Ht=Pi(u,I,W))===0||!isFinite(Ht))return[];if(Ht>0)for(u=Math.ceil(u/Ht),I=Math.floor(I/Ht),Gt=new Array(jt=Math.ceil(I-u+1));++ee<jt;)Gt[ee]=(u+ee)*Ht;else for(u=Math.floor(u*Ht),I=Math.ceil(I*Ht),Gt=new Array(jt=Math.ceil(u-I+1));++ee<jt;)Gt[ee]=(u-ee)/Ht;return st&&Gt.reverse(),Gt}(this._domain[0],this._domain[this._domain.length-1],f||5)},kt}();function Pi(kt,f,u){var I=(f-kt)/Math.max(0,u),W=Math.floor(Math.log(I)/Math.LN10),st=I/Math.pow(10,W);return W>=0?(st>=Qi?10:st>=io?5:st>=Wi?2:1)*Math.pow(10,W):-Math.pow(10,-W)/(st>=Qi?10:st>=io?5:st>=Wi?2:1)}function no(kt,f,u){return(u==="ceil"?Math.ceil(kt/f):u==="floor"?Math.floor(kt/f):Math.round(kt/f))*f}function Mo(kt,f,u){var I=no(kt,u,"floor"),W=no(f,u,"ceil");I=Object(n.h)(I,u),W=Object(n.h)(W,u);for(var st=[],jt=I;jt<=W;jt+=u){var Gt=Object(n.h)(jt,u);st.push(Gt)}return{min:I,max:W,ticks:st}}function ao(kt,f,u){var I,W=kt.minLimit,st=kt.maxLimit,jt=kt.min,Gt=kt.max,Ht=kt.tickCount,ee=Ht===void 0?5:Ht,ae=Object(n.s)(W)?Object(n.s)(f)?jt:f:W,je=Object(n.s)(st)?Object(n.s)(u)?Gt:u:st;if(ae>je&&(je=(I=[ae,je])[0],ae=I[1]),ee<=2)return[ae,je];for(var Fe=(je-ae)/(ee-1),Ue=[],Ke=0;Ke<ee;Ke++)Ue.push(ae+Fe*Ke);return Ue}function uo(kt,f,u){u===void 0&&(u=5);var I={max:0,min:0,ticks:[]};if(kt===f)return{max:f,min:kt,ticks:[kt]};var W=(f-kt)/u,st=Math.pow(10,Math.floor(Math.log10(W))),jt=st<1?Math.ceil(Math.abs(Math.log10(st))):0,Gt=st;2*st-W<1.5*(W-Gt)&&5*st-W<2.75*(W-(Gt=2*st))&&10*st-W<1.5*(W-(Gt=5*st))&&(Gt=10*st);var Ht=Math.ceil(f/Gt),ee=Math.floor(kt/Gt);I.max=Math.max(Ht*Gt,f),I.min=Math.min(ee*Gt,kt);for(var ae=Number.parseFloat((ee*Gt).toFixed(jt));ae<f;)I.ticks.push(ae),ae+=Gt,jt&&(ae=Number.parseFloat(ae.toFixed(jt)));return I.ticks.push(ae),I}function xo(kt,f){var u=kt.length*f;return f===1?kt[kt.length-1]:f===0?kt[0]:u%1!=0?kt[Math.ceil(u)-1]:kt.length%2==0?(kt[u-1]+kt[u])/2:kt[u]}function oe(kt){return new Date(kt).getFullYear()}function Kt(kt){return new Date(kt,0,1).getTime()}function te(kt){return new Date(kt).getMonth()}function Oe(kt,f){return new Date(kt,f,1).getTime()}H("cat",_i),H("time-cat",function(kt){var f=_i(kt),u=Object(n.y)(kt.values);return u!==Object(n.y)(f)&&f.push(u),f}),H("wilkinson-extended",function(kt){var f=kt.min,u=kt.max,I=kt.tickCount,W=kt.nice,st=kt.tickInterval,jt=kt.minLimit,Gt=kt.maxLimit,Ht=bi(f,u,I,W).ticks;return Object(n.s)(jt)&&Object(n.s)(Gt)?st?Mo(f,u,st).ticks:Ht:ao(kt,Object(n.k)(Ht),Object(n.y)(Ht))}),H("r-pretty",function(kt){var f=kt.min,u=kt.max,I=kt.tickCount,W=kt.tickInterval,st=kt.minLimit,jt=kt.maxLimit,Gt=uo(f,u,I).ticks;return Object(n.s)(st)&&Object(n.s)(jt)?W?Mo(f,u,W).ticks:Gt:ao(kt,Object(n.k)(Gt),Object(n.y)(Gt))}),H("time",function(kt){var f=kt.min,u=kt.max,I=kt.minTickInterval,W=kt.tickInterval,st=kt.tickCount;if(W)st=Math.ceil((u-f)/W);else{var jt=(u-f)/(W=Fi(f,u,st)[1])/st;jt>1&&(W*=Math.ceil(jt)),I&&W<I&&(W=I)}for(var Gt=[],Ht=f;Ht<u+W;Ht+=W)Gt.push(Ht);return Gt}),H("time-pretty",function(kt){var f=kt.min,u=kt.max,I=kt.minTickInterval,W=kt.tickCount,st=kt.tickInterval,jt=[];st||(st=(u-f)/W,I&&st<I&&(st=I));var Gt=oe(f);if(st>31536e6)for(var Ht=oe(u),ee=Math.ceil(st/31536e6),ae=Gt;ae<=Ht+ee;ae+=ee)jt.push(Kt(ae));else if(st>ti){var je=Math.ceil(st/ti),Fe=te(f),Ue=function(co,lo){var Hi=oe(co),Io=oe(lo),ko=te(co);return 12*(Io-Hi)+(te(lo)-ko)%12}(f,u);for(ae=0;ae<=Ue+je;ae+=je)jt.push(Oe(Gt,ae+Fe))}else if(st>Vr){var Ke=(Fn=new Date(f)).getFullYear(),bn=Fn.getMonth(),wn=Fn.getDate(),Nn=Math.ceil(st/Vr),Bn=function(co,lo){return Math.ceil((lo-co)/Vr)}(f,u);for(ae=0;ae<Bn+Nn;ae+=Nn)jt.push(new Date(Ke,bn,wn+ae).getTime())}else if(st>Sr){Ke=(Fn=new Date(f)).getFullYear(),bn=Fn.getMonth(),Nn=Fn.getDate();var Fn,sr=Fn.getHours(),ur=Math.ceil(st/Sr),Or=function(co,lo){return Math.ceil((lo-co)/Sr)}(f,u);for(ae=0;ae<=Or+ur;ae+=ur)jt.push(new Date(Ke,bn,Nn,sr+ae).getTime())}else if(st>6e4){var ei=function(co,lo){return Math.ceil((lo-co)/6e4)}(f,u),Ci=Math.ceil(st/6e4);for(ae=0;ae<=ei+Ci;ae+=Ci)jt.push(f+6e4*ae)}else{var kr=st;kr<1e3&&(kr=1e3);var yi=1e3*Math.floor(f/1e3),oo=Math.ceil((u-f)/1e3),so=Math.ceil(kr/1e3);for(ae=0;ae<oo+so;ae+=so)jt.push(yi+1e3*ae)}return jt.length>=512&&console.warn("Notice: current ticks length("+jt.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+st+") is too small, increase the value to solve the problem!"),jt}),H("log",function(kt){var f,u=kt.base,I=kt.tickCount,W=kt.min,st=kt.max,jt=kt.values,Gt=Li(u,st);if(W>0)f=Math.floor(Li(u,W));else{var Ht=Vi(jt,u,st);f=Math.floor(Li(u,Ht))}for(var ee=Gt-f,ae=Math.ceil(ee/I),je=[],Fe=f;Fe<Gt+ae;Fe+=ae)je.push(Math.pow(u,Fe));return W<=0&&je.unshift(0),je}),H("pow",function(kt){var f=kt.exponent,u=kt.tickCount,I=Math.ceil(Ui(f,kt.max));return uo(Math.floor(Ui(f,kt.min)),I,u).ticks.map(function(W){var st=W>=0?1:-1;return Math.pow(W,f)*st})}),H("quantile",function(kt){var f=kt.tickCount,u=kt.values;if(!u||!u.length)return[];for(var I=u.slice().sort(function(Gt,Ht){return Gt-Ht}),W=[],st=0;st<f;st++){var jt=st/(f-1);W.push(xo(I,jt))}return W}),H("d3-linear",function(kt){var f=kt.min,u=kt.max,I=kt.tickInterval,W=kt.minLimit,st=kt.maxLimit,jt=function(Gt){var Ht=Gt.min,ee=Gt.max,ae=Gt.nice,je=Gt.tickCount,Fe=new Zi;return Fe.domain([Ht,ee]),ae&&Fe.nice(je),Fe.ticks(je)}(kt);return Object(n.s)(W)&&Object(n.s)(st)?I?Mo(f,u,I).ticks:jt:ao(kt,Object(n.k)(jt),Object(n.y)(jt))}),Nr("cat",St),Nr("category",St),Nr("identity",Yr),Nr("linear",Ti),Nr("log",ro),Nr("pow",jr),Nr("time",Ji),Nr("timeCat",to),Nr("quantize",pr),Nr("quantile",Xr);var Qe=function(){for(var f=0,u=0,I=arguments.length;u<I;u++)f+=arguments[u].length;var W=Array(f),st=0;for(u=0;u<I;u++)for(var jt=arguments[u],Gt=0,Ht=jt.length;Gt<Ht;Gt++,st++)W[st]=jt[Gt];return W};function On(kt){return function(f){return Object(n.z)(f,function(u,I){return[I===0?"M":"L",u[0],u[1]]})}(kt)}function Vn(kt,f,u,I){I===void 0&&(I=!0);var W=new Ti({values:kt}),st=new St({values:Object(n.z)(kt,function(Gt,Ht){return Ht})}),jt=Object(n.z)(kt,function(Gt,Ht){return[st.scale(Ht)*f,u-W.scale(Gt)*u]});return I?function(Gt){if(Gt.length<=2)return On(Gt);var Ht=[];Object(n.f)(Gt,function(Ue){Object(n.q)(Ue,Ht.slice(Ht.length-2))||Ht.push(Ue[0],Ue[1])});var ee=F.a(Ht,!1),ae=Object(n.k)(Gt),je=ae[0],Fe=ae[1];return ee.unshift(["M",je,Fe]),ee}(jt):On(jt)}function Hn(kt,f,u){for(var I=new Ti({values:kt}),W=new St({values:Object(n.z)(kt,function(ae,je){return je})}),st=Object(n.z)(kt,function(ae,je){return[W.scale(je)*f,u-I.scale(ae)*u]}),jt=[],Gt=0;Gt<st.length;Gt++){var Ht=st[Gt],ee=rn({x:Ht[0],y:Ht[1],y0:u,size:5});jt.push.apply(jt,ee)}return function(ae,je){je===void 0&&(je=!0);var Fe=[],Ue=ae[0];Fe.push(["M",Ue.x,Ue.y]);for(var Ke=1,bn=ae.length;Ke<bn;Ke++)Fe.push(["L",ae[Ke].x,ae[Ke].y]);return je&&(Fe.push(["L",Ue.x,Ue.y]),Fe.push(["z"])),Fe}(jt)}function $e(kt,f,u,I){var W=Qe(kt),st=function(jt,Gt){var Ht=new Ti({values:jt}),ee=Math.max(0,Ht.min);return Gt-Ht.scale(ee)*Gt}(I,u);return W.push(["L",f,st]),W.push(["L",0,st]),W.push(["Z"]),W}function rn(kt){var f,u,I,W,st=kt.x,jt=kt.y,Gt=kt.y0,Ht=kt.size;Object(n.m)(jt)?(f=jt[0],u=jt[1]):(f=Gt,u=jt),Object(n.m)(st)?(I=st[0],W=st[1]):(I=st-Ht/2,W=st+Ht/2);var ee=[{x:I,y:f},{x:I,y:u}];return ee.push({x:W,y:u},{x:W,y:f}),ee}var on=function(){return(on=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var st in u=arguments[I])Object.prototype.hasOwnProperty.call(u,st)&&(f[st]=u[st]);return f}).apply(this,arguments)},$n={stroke:"#C5C5C5",strokeOpacity:.85},vr={fill:"#CACED4",opacity:.85},ar=function(){function kt(f){var u=f.x,I=u===void 0?0:u,W=f.y,st=W===void 0?0:W,jt=f.width,Gt=jt===void 0?200:jt,Ht=f.height,ee=Ht===void 0?26:Ht,ae=f.smooth,je=ae===void 0||ae,Fe=f.isArea,Ue=Fe!==void 0&&Fe,Ke=f.data,bn=Ke===void 0?[]:Ke,wn=f.lineStyle,Nn=f.areaStyle,Bn=f.group,Fn=f.interval,sr=Fn===void 0?null:Fn;this.group=Bn,this.x=I,this.y=st,this.width=Gt,this.height=ee,this.data=bn,this.smooth=je,this.isArea=Ue,this.lineStyle=Object.assign({},$n,wn),this.areaStyle=Object.assign({},vr,Nn),this.intervalConfig=sr,this.renderLine()}return kt.prototype.renderLine=function(){var f=this,u=f.x,I=f.y,W=f.width,st=f.height,jt=f.data,Gt=f.smooth,Ht=f.isArea,ee=(f.backgroundStyle,f.lineStyle),ae=f.areaStyle,je=this.group.addGroup({name:"trend-group"});if(jt){var Fe=Vn(jt,W,st,Gt);if(je.addShape("path",{attrs:on({path:Fe},ee)}),Ht){var Ue=$e(Fe,W,st,jt);je.addShape("path",{attrs:on({path:Ue},ae)})}}this.intervalConfig&&je.addShape("path",{attrs:on({path:Hn(this.intervalConfig.data,W,st)},this.intervalConfig.style)}),je.move(u,I)},kt.prototype.destory=function(){this.group.destroy()},kt}(),rr=function(){return(rr=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var st in u=arguments[I])Object.prototype.hasOwnProperty.call(u,st)&&(f[st]=u[st]);return f}).apply(this,arguments)},Fr={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},Ar={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},wr=function(){function kt(f){var u=f.group,I=f.name,W=f.type,st=f.x,jt=st===void 0?0:st,Gt=f.y,Ht=Gt===void 0?0:Gt,ee=f.width,ae=ee===void 0?2:ee,je=f.height,Fe=je===void 0?24:je,Ue=f.style,Ke=Ue===void 0?{}:Ue;this.group=u,this.name=I,this.handleType=W,this.x=jt,this.y=Ht,this.width=ae,this.height=Fe,W==="trend"?this.style=rr(rr({},Fr),Ke):W==="simple"&&(this.style=rr(rr({},Ar),Ke)),this.renderHandle()}return kt.prototype.setX=function(f){this.setXY(f,void 0)},kt.prototype.setY=function(f){this.setXY(void 0,f)},kt.prototype.setXY=function(f,u){Object(n.t)(f)&&(this.x=f),Object(n.t)(u)&&(this.y=u),this.updateXY()},kt.prototype.renderHandle=function(){var f=this.width,u=this.height,I=this.style,W=this.name,st=I.fill,jt=I.stroke,Gt=I.radius,Ht=I.opacity,ee=I.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.background=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:f,height:u,fill:st,stroke:jt,radius:Gt,opacity:Ht,cursor:ee},name:W+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:f/2,y:0,r:2*f,fill:st,stroke:jt,radius:Gt,opacity:Ht,cursor:ee},name:W+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:f/2,y:u,r:2*f,fill:st,stroke:jt,radius:Gt,opacity:Ht,cursor:ee},name:W+"-handler"})):this.handleType==="simple"&&(this.handleGroup.addShape("circle",{attrs:{x:f/2,y:u/2,r:2*f,fill:st,stroke:jt,radius:Gt,opacity:Ht,cursor:ee},name:W+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:f/2,y:u/2,r:2*f,fill:st,stroke:jt,radius:Gt,opacity:Ht,cursor:ee},name:W+"-handler"})),this.updateXY(),this.handleType==="trend"&&this.bindEvents()},kt.prototype.bindEvents=function(){var f=this,u=this.name;this.handleGroup.on(u+"-handler:mouseenter",function(){var I=f.style.highLightFill;f.background.attr("fill",I)}),this.handleGroup.on(u+"-handler:mouseleave",function(){var I=f.style.fill;f.background.attr("fill",I)})},kt.prototype.show=function(){this.handleGroup.show()},kt.prototype.hide=function(){this.handleGroup.hide()},kt.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},kt}(),xr=function(){return(xr=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var st in u=arguments[I])Object.prototype.hasOwnProperty.call(u,st)&&(f[st]=u[st]);return f}).apply(this,arguments)},Er=function(){function kt(f){this.config=Object(n.e)({},f),this.init()}return kt.prototype.update=function(f){this.config=Object(n.e)({},this.config,f),this.updateElement(),this.renderMarker()},kt.prototype.init=function(){this.initElement(),this.renderMarker()},kt.prototype.initElement=function(){var f=this.config,u=f.group,I=f.style;this.circle=u.addShape("circle",{attrs:xr({x:this.config.x,y:this.config.y,r:this.config.r},I)}),this.startMarker=u.addShape("path",{attrs:{path:this.getStartMarkerPath(),fill:"#ccc"},name:"playPauseBtn"}),this.pauseGroupMarker=u.addGroup();var W=1/4*this.config.r,st=.5*this.config.r*Math.sqrt(3);this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x-.375*this.config.r,y:this.config.y-st/2,width:2.5*W,height:st,fill:"#fff"},name:"playPauseBtn"}),this.pauseLeftMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x-.375*this.config.r,y:this.config.y-st/2,width:W,height:st,fill:"#ccc"},name:"playPauseBtn"}),this.pauseRightMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x+1/8*this.config.r,y:this.config.y-st/2,width:W,height:st,fill:"#ccc"},name:"playPauseBtn"})},kt.prototype.updateElement=function(){this.circle.attr("x",this.config.x),this.circle.attr("y",this.config.y),this.circle.attr("r",this.config.r),this.startMarker.attr("path",this.getStartMarkerPath());var f=1/4*this.config.r,u=.5*this.config.r*Math.sqrt(3);this.pauseLeftMarker.attr("x",this.config.x-.375*this.config.r),this.pauseLeftMarker.attr("y",this.config.y-u/2),this.pauseLeftMarker.attr("width",f),this.pauseLeftMarker.attr("height",u),this.pauseRightMarker.attr("x",this.config.x+1/8*this.config.r),this.pauseRightMarker.attr("y",this.config.y-u/2),this.pauseRightMarker.attr("width",f),this.pauseRightMarker.attr("height",u)},kt.prototype.renderMarker=function(){this.config.isPlay?(this.startMarker.hide(),this.pauseGroupMarker.show()):(this.startMarker.show(),this.pauseGroupMarker.hide())},kt.prototype.getStartMarkerPath=function(){var f=.5*this.config.r*Math.sqrt(3);return[["M",this.config.x-f/Math.sqrt(3)/2,this.config.y-f/2],["L",this.config.x+f/Math.sqrt(3),this.config.y],["L",this.config.x-f/Math.sqrt(3)/2,this.config.y+f/2]]},kt}(),Ir=function(){return(Ir=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var st in u=arguments[I])Object.prototype.hasOwnProperty.call(u,st)&&(f[st]=u[st]);return f}).apply(this,arguments)},Lr={fill:"#607889",stroke:"#607889"},Pr={fill:"#fff"},Dr={fill:"green"},ri={speed:2,loop:!1,fill:"#fff",stroke:"#fff",hiddleToggle:!1,preBtnStyle:{fill:"#ccc",stroke:"#ccc"},nextBtnStyle:{fill:"#ccc",stroke:"#ccc"},playBtnStyle:{fill:"#fff",stroke:"#ccc"}},vi=function(){function kt(f){this.controllerCfg=Object(n.e)({},ri,f),this.group=f.group,this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType="range",this.fontFamily=f.fontFamily||"Arial, sans-serif",this.init()}return kt.prototype.init=function(){this.renderPlayButton()},kt.prototype.getNextMarkerPath=function(f,u,I){return[["M",f,u-I],["L",f+I,u],["L",f,u+I]]},kt.prototype.getPreMarkerPath=function(f,u,I){return[["M",f,u-I],["L",f-I,u],["L",f,u+I]]},kt.prototype.renderPlayButton=function(){var f=this.controllerCfg,u=f.width,I=f.height,W=f.x,st=f.y,jt=f.hiddleToggle,Gt=f.fill,Ht=Gt===void 0?"#ccc":Gt,ee=f.stroke,ae=ee===void 0?"green":ee,je=f.playBtnStyle,Fe=je===void 0?Lr:je,Ue=f.preBtnStyle,Ke=Ue===void 0?Pr:Ue,bn=f.nextBtnStyle,wn=bn===void 0?Dr:bn,Nn=I/2-5,Bn=st+10,Fn=this.group.addShape("rect",{attrs:{x:W,y:Bn,width:u,height:I,stroke:ae,fill:Ht},name:"container-rect"});this.playButton?this.playButton.update({x:u/2,y:Bn,r:Nn}):this.playButton=new Er({group:this.group,x:u/2,y:Bn+Nn+5,r:Nn,isPlay:this.isPlay,style:Fe}),this.group.addShape("path",{attrs:Ir({path:this.getPreMarkerPath(u/2-5*Nn,Bn+Nn+5,.5*Nn)},Ke),name:"preStepBtn"}),this.group.addShape("path",{attrs:Ir({path:this.getPreMarkerPath(u/2-4.5*Nn,Bn+Nn+5,.5*Nn)},Ke),name:"preStepBtn"}),this.group.addShape("path",{attrs:Ir({path:this.getNextMarkerPath(u/2+5*Nn,Bn+Nn+5,.5*Nn)},wn),name:"nextStepBtn"}),this.group.addShape("path",{attrs:Ir({path:this.getNextMarkerPath(u/2+4.5*Nn,Bn+Nn+5,.5*Nn)},wn),name:"nextStepBtn"}),Fn.toBack(),this.renderSpeedBtn(),jt||this.renderToggleTime(),this.bindEvent()},kt.prototype.renderSpeedBtn=function(){var f=this.controllerCfg,u=f.y,I=f.width,W=f.hiddleToggle,st=this.group.addGroup({name:"speed-group"});this.speedGroup=st;for(var jt=1,Gt=[],Ht=9,ee=0;ee<5;ee++){var ae=u+15+ee*(ee+1)+jt;st.addShape("rect",{attrs:{x:I-(W?50:110),y:ae,width:15,height:2,fill:"#ccc"},speed:Ht,name:"speed-rect"}),this.speedAxisY.push(ae),Gt.push(Ht),Ht-=2,jt++}for(ee=0;ee<4;ee++)st.addShape("rect",{attrs:{x:I-(W?50:110),y:this.speedAxisY[ee]+2,width:15,height:2*ee+1,fill:"#fff",opacity:.3},speed:Gt[ee]-1,name:"speed-rect"});this.speedText=st.addShape("text",{attrs:{x:I-(W?50:110)+20,y:this.speedAxisY[1]+15,text:"1.0X",fill:"#ccc",fontFamily:this.fontFamily||"Arial, sans-serif"}}),this.speedPoint=st.addShape("path",{attrs:{path:this.getPath(I-(W?50:110),this.speedAxisY[4]),fill:"#ccc"}})},kt.prototype.getPath=function(f,u){return[["M",f,u],["L",f-12,u-6],["L",f-12,u+6],["Z"]]},kt.prototype.renderToggleTime=function(){var f,u=this.controllerCfg.width;this.toggleGroup=this.group.addGroup({name:"toggle-group"}),this.toggleGroup.addShape("rect",{attrs:{width:14,height:14,x:u-50,y:this.speedAxisY[1],fill:"#fff",stroke:"#ccc",lineWidth:2,radius:3},isChecked:!1,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:{path:[["M",u-50+3,this.speedAxisY[1]+6],["L",u-50+7,this.speedAxisY[1]+10],["L",u-50+12,this.speedAxisY[1]+4]],stroke:"green",lineWidth:3},capture:!1}),this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:{text:((f=this.controllerCfg)===null||f===void 0?void 0:f.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:u-50+20,y:this.speedAxisY[1]+15,fill:"#ccc",fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}})},kt.prototype.bindEvent=function(){var f=this,u=this.controllerCfg,I=u.width,W=u.hiddleToggle;this.speedGroup.on("speed-rect:click",function(st){f.speedPoint.attr("path",f.getPath(I-(W?50:110),st.y)),f.currentSpeed=st.target.get("speed"),f.speedText.attr("text",f.currentSpeed+".0X"),f.group.emit("timebarConfigChanged",{speed:f.currentSpeed,type:f.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(st){var jt,Gt,Ht=st.target.get("isChecked");Ht?(f.checkedIcon.hide(),f.checkedText.attr("text",((Gt=f.controllerCfg)===null||Gt===void 0?void 0:Gt.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),f.currentType="range"):(f.checkedIcon.show(),f.checkedText.attr("text",((jt=f.controllerCfg)===null||jt===void 0?void 0:jt.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),f.currentType="single"),st.target.set("isChecked",!Ht),f.group.emit("timebarConfigChanged",{type:f.currentType,speed:f.currentSpeed})})},kt.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},kt}(),ii=function(){return(ii=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var st in u=arguments[I])Object.prototype.hasOwnProperty.call(u,st)&&(f[st]=u[st]);return f}).apply(this,arguments)},Si={fill:"#416180",opacity:.05},zi={fill:"#416180",opacity:.15,radius:5},Xi={fill:"#5B8FF9",opacity:.3,cursor:"move"},Bi={width:2,height:24},Di={textBaseline:"middle",fill:"#000",opacity:.45},pe=function(){function kt(f){var u=this;this.prevX=0,this.onMouseDown=function(jo){return function(ho){u.currentHandler=jo;var fa=ho.originalEvent;fa.stopPropagation(),fa.preventDefault(),u.prevX=Object(n.i)(fa,"touches.0.pageX",fa.pageX);var Zo=u.canvas.get("container");Zo.addEventListener("mousemove",u.onMouseMove),Zo.addEventListener("mouseup",u.onMouseUp),Zo.addEventListener("mouseleave",u.onMouseUp),Zo.addEventListener("touchmove",u.onMouseMove),Zo.addEventListener("touchend",u.onMouseUp),Zo.addEventListener("touchcancel",u.onMouseUp)}},this.onMouseMove=function(jo){jo.stopPropagation(),jo.preventDefault();var ho=Object(n.i)(jo,"touches.0.pageX",jo.pageX),fa=ho-u.prevX,Zo=u.adjustOffsetRange(fa/u.width);u.updateStartEnd(Zo),u.updateUI(),u.prevX=ho},this.onMouseUp=function(){u.currentHandler&&(u.currentHandler=void 0);var jo=u.canvas.get("container");jo&&(jo.removeEventListener("mousemove",u.onMouseMove),jo.removeEventListener("mouseup",u.onMouseUp),jo.removeEventListener("mouseleave",u.onMouseUp),jo.removeEventListener("touchmove",u.onMouseMove),jo.removeEventListener("touchend",u.onMouseUp),jo.removeEventListener("touchcancel",u.onMouseUp))};var I=f.x,W=I===void 0?0:I,st=f.y,jt=st===void 0?0:st,Gt=f.width,Ht=Gt===void 0?100:Gt,ee=f.height,ae=f.padding,je=ae===void 0?10:ae,Fe=f.trendCfg,Ue=f.controllerCfg,Ke=Ue===void 0?{speed:1}:Ue,bn=f.backgroundStyle,wn=bn===void 0?{}:bn,Nn=f.foregroundStyle,Bn=Nn===void 0?{}:Nn,Fn=f.handlerStyle,sr=Fn===void 0?{}:Fn,ur=f.textStyle,Or=ur===void 0?{}:ur,ei=f.start,Ci=ei===void 0?0:ei,kr=f.end,yi=kr===void 0?1:kr,oo=f.minText,so=oo===void 0?"":oo,co=f.maxText,lo=co===void 0?"":co,Hi=f.group,Io=f.graph,ko=f.canvas,Ro=f.ticks,bo=f.type;this.graph=Io,this.canvas=ko,this.group=Hi,this.timeBarType=bo,this.x=W,this.y=jt,this.width=Ht,this.height=ee,this.padding=je,this.ticks=Ro,this.trendCfg=Fe,this.controllerCfg=Ke,this.currentSpeed=Ke.speed||1,bo==="trend"?this.backgroundStyle=ii(ii({},Si),wn):bo==="simple"&&(this.backgroundStyle=ii(ii({},zi),wn)),this.foregroundStyle=ii(ii({},Xi),Bn),this.handlerStyle=ii(ii({},Bi),sr),this.textStyle=ii(ii({},Di),Or),this.currentMode="range",this.start=Ci,this.end=yi,this.minText=so,this.maxText=lo,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return kt.prototype.update=function(f){var u=f.x,I=f.y,W=f.width,st=f.height,jt=f.minText,Gt=f.maxText,Ht=f.start,ee=f.end;this.start=Math.min(1,Math.max(Ht,0)),this.end=Math.min(1,Math.max(ee,0)),Object(n.a)(this,{x:u,y:I,width:W,height:st,minText:jt,maxText:Gt}),this.updateUI()},kt.prototype.setText=function(f,u){this.minTextShape.attr("text",f),this.maxTextShape.attr("text",u)},kt.prototype.renderSlider=function(){var f=this,u=this.width,I=this.height,W=this.timeBarType;if(W==="trend"&&Object(n.E)(Object(n.i)(this.trendCfg,"data"))){var st=new ar(ii(ii({x:this.x,y:this.y,width:u,height:I},this.trendCfg),{group:this.group}));this.trendComponent=st}var jt=this.group.addGroup({name:"slider-group"});jt.addShape("rect",{attrs:ii({x:0,y:0,width:u,height:I},this.backgroundStyle)});var Gt=this.group.addGroup();W==="trend"?(this.minTextShape=Gt.addShape("text",{attrs:ii({x:0,y:I/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=Gt.addShape("text",{attrs:ii({y:I/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})):(this.minTextShape=Gt.addShape("text",{attrs:ii({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=Gt.addShape("text",{attrs:ii({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:ii({x:0,y:this.y,height:I},this.foregroundStyle)});var Ht=Object(n.i)(this.handlerStyle,"width",2),ee=Object(n.i)(this.handlerStyle,"height",24),ae=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new wr(ii({name:"minHandlerShape",group:ae,type:W,x:this.x,y:this.y,width:Ht,height:ee,cursor:"ew-resize"},this.handlerStyle));var je=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new wr(ii({name:"maxHandlerShape",group:je,type:W,x:this.x,y:this.y,width:Ht,height:ee,cursor:"ew-resize"},this.handlerStyle));var Fe=this.ticks,Ue=u/(Fe.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(bn){bn.destroy()});var Ke=-1/0;this.textList=Fe.map(function(bn,wn){f.tickPosList.push(f.x+wn*Ue);var Nn=f.group.addShape("text",{attrs:{x:f.x+wn*Ue,y:f.y+I+5,text:bn,textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35,fontFamily:f.fontFamily||"Arial, sans-serif"}}),Bn=f.group.addShape("line",{attrs:{x1:f.x+wn*Ue,y1:f.y+I+2,x2:f.x+wn*Ue,y2:f.y+I+6,lineWidth:1,stroke:"#ccc"}}),Fn=Nn.getBBox();return Fn.minX>Ke?(Nn.show(),Bn.show(),Ke=Fn.minX+Fn.width+10):(Nn.hide(),Bn.hide()),Nn}),this.controllerBtnGroup=new vi(ii({group:this.group,x:this.x,y:this.y+I+25,width:u,height:40},this.controllerCfg)),this.updateUI(),jt.move(this.x,this.y),this.bindEvents()},kt.prototype.bindEvents=function(){var f=this,u=this.group.find(function(W){return W.get("name")==="minHandlerShape"});u&&(u.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),u.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var I=this.group.find(function(W){return W.get("name")==="maxHandlerShape"});I&&(I.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),I.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("playPauseBtn:click",function(){f.isPlay=!f.isPlay,f.currentHandler=f.maxHandlerShape,f.changePlayStatus()}),this.group.on("nextStepBtn:click",function(){f.currentHandler=f.maxHandlerShape,f.updateStartEnd(.01),f.updateUI()}),this.group.on("preStepBtn:click",function(){f.currentHandler=f.maxHandlerShape,f.updateStartEnd(-.01),f.updateUI()}),this.group.on("timebarConfigChanged",function(W){var st=W.type,jt=W.speed;f.currentSpeed=jt,f.currentMode=st,st==="single"?(f.minHandlerShape.hide(),f.foregroundShape.hide(),f.minTextShape.hide()):st==="range"&&(f.minHandlerShape.show(),f.foregroundShape.show(),f.minTextShape.show())})},kt.prototype.adjustTickIndex=function(f){for(var u=0;u<this.tickPosList.length-1;u++)if(this.tickPosList[u]<=f&&f<=this.tickPosList[u+1])return Math.abs(this.tickPosList[u]-f)<Math.abs(f-this.tickPosList[u+1])?u:u+1},kt.prototype.adjustOffsetRange=function(f){switch(this.currentHandler){case this.minHandlerShape:var u=0-this.start,I=1-this.start;return Math.min(I,Math.max(u,f));case this.maxHandlerShape:return u=0-this.end,I=1-this.end,Math.min(I,Math.max(u,f));case this.foregroundShape:return u=0-this.start,I=1-this.end,Math.min(I,Math.max(u,f));default:return 0}},kt.prototype.updateStartEnd=function(f){switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=f,this.minText=this.ticks[this.adjustTickIndex(this.start*this.width)];break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=f,this.maxText=this.ticks[this.adjustTickIndex(this.end*this.width)];break;case this.foregroundShape:this.start+=f,this.end+=f,this.minText=this.ticks[this.adjustTickIndex(this.start*this.width)],this.maxText=this.ticks[this.adjustTickIndex(this.end*this.width)]}},kt.prototype.updateUI=function(){var f=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var u=this.start*this.width,I=this.end*this.width;this.foregroundShape.attr("x",u),this.foregroundShape.attr("width",I-u);var W=Object(n.i)(this.handlerStyle,"width",2);this.setText(this.minText,this.maxText);var st=this.dodgeText([u,I]),jt=st[0],Gt=st[1];this.minHandlerShape.setX(u-W/2),Object(n.f)(jt,function(Ht,ee){return f.minTextShape.attr(ee,Ht)}),this.maxHandlerShape.setX(I-W/2),Object(n.f)(Gt,function(Ht,ee){return f.maxTextShape.attr(ee,Ht)}),this.currentMode==="range"?this.graph.emit("valueChange",{value:[this.start,this.end].sort()}):this.currentMode==="single"&&this.graph.emit("valueChange",{value:[this.end,this.end]})},kt.prototype.dodgeText=function(f){var u,I,W=Object(n.i)(this.handlerStyle,"width",2),st=this.minTextShape,jt=this.maxTextShape,Gt=f[0],Ht=f[1],ee=!1;Gt>Ht&&(Gt=(u=[Ht,Gt])[0],Ht=u[1],st=(I=[jt,st])[0],jt=I[1],ee=!0);var ae=st.getBBox(),je=jt.getBBox(),Fe=null,Ue=null;return this.timeBarType==="trend"?(Fe=ae.width>Gt-2?{x:Gt+W/2+2,textAlign:"left"}:{x:Gt-W/2-2,textAlign:"right"},Ue=je.width>this.width-Ht-2?{x:Ht-W/2-2,textAlign:"right"}:{x:Ht+W/2+2,textAlign:"left"}):this.timeBarType==="simple"&&(Fe=ae.width>Gt-2?{x:Gt+W/2+2,textAlign:"center"}:{x:Gt-W/2-2,textAlign:"center"},Ue=je.width>this.width-Ht-2?{x:Ht-W/2-2,textAlign:"center"}:{x:Ht+W/2+2,textAlign:"center"}),ee?[Ue,Fe]:[Fe,Ue]},kt.prototype.startPlay=function(){var f=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var u=f,I=u.ticks,W=u.width,st=f.currentSpeed,jt=W/I.length/(1e3*(10-st)/60),Gt=f.adjustOffsetRange(jt/f.width);f.updateStartEnd(Gt),f.updateUI(),f.isPlay&&(f.playHandler=f.startPlay())}):void 0},kt.prototype.changePlayStatus=function(f){f===void 0&&(f=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit("timelinestart",null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),f&&this.graph.emit("timelineend",null))},kt.prototype.destory=function(){this.graph.off("valueChange");var f=this.group,u=f.find(function(W){return W.get("name")==="minHandlerShape"});u&&(u.off("minHandlerShape-handler:mousedown"),u.off("minHandlerShape-handler:touchstart"),u.destroy());var I=f.find(function(W){return W.get("name")==="maxHandlerShape"});I&&(I.off("maxHandlerShape-handler:mousedown"),I.off("maxHandlerShape-handler:touchstart"),I.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),f.off("playPauseBtn:click"),f.off("nextStepBtn:click"),f.off("preStepBtn:click"),f.off("timebarConfigChanged"),f.destroy(),this.trendComponent&&this.trendComponent.destory()},kt}(),G=function(){function kt(f){var u=f.x,I=u===void 0?0:u,W=f.y,st=W===void 0?0:W,jt=f.container,Gt=f.text,Ht=f.padding,ee=Ht===void 0?[4,4,4,4]:Ht,ae=f.className,je=ae===void 0?"g6-component-timebar-tooltip":ae,Fe=f.backgroundColor,Ue=Fe===void 0?"#000":Fe,Ke=f.textColor,bn=Ke===void 0?"#fff":Ke,wn=f.opacity,Nn=wn===void 0?.8:wn,Bn=f.fontSize,Fn=Bn===void 0?12:Bn;this.container=jt,this.className=je,this.backgroundColor=Ue,this.textColor=bn,this.x=I,this.y=st,this.text=Gt,this.padding=ee,this.opacity=Nn,this.fontSize=Fn,this.render()}return kt.prototype.render=function(){var f=this.className,u=(this.x,this.y,this.backgroundColor),I=this.textColor,W=this.text,st=this.padding,jt=this.opacity,Gt=this.fontSize,Ht=this.container,ee=Object(y.b)("<div class='"+f+`' style="position: absolute; width: fit-content; height: fit-content; opacity: `+jt+'"></div>');Object(n.x)(Ht)&&(Ht=document.getElementById(Ht)),Ht.appendChild(ee),this.parentHeight=Ht.offsetHeight,this.parentWidth=Ht.offsetWidth,Object(y.c)(ee,{visibility:"hidden",top:0,left:0});var ae=Object(y.b)(`
      <div style='position: absolute; white-space:nowrap; background-color: `+u+"; font-size: "+Gt+"px; border-radius: 4px; width: fit-content; height: fit-content; color: "+I+"; padding: "+st[0]+"px "+st[1]+"px "+st[2]+"px "+st[3]+"px'></div>");ae.innerHTML=W,ee.appendChild(ae),this.backgroundDOM=ae;var je=Object(y.b)("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid "+u+"'></div>");ee.appendChild(je),this.arrowDOM=je,this.container=ee},kt.prototype.show=function(f){var u=f.text,I=f.x;f.y,f.clientX,f.clientY,this.backgroundDOM.innerHTML=u;var W=this.backgroundDOM.offsetWidth,st=this.backgroundDOM.offsetHeight,jt=this.arrowDOM.offsetWidth,Gt=this.arrowDOM.offsetHeight;Object(y.c)(this.container,{top:-st-Gt+"px",left:I+"px",visibility:"visible"}),Object(y.c)(this.backgroundDOM,{marginLeft:-W/2+"px"}),Object(y.c)(this.arrowDOM,{marginLeft:-jt/2+"px",top:st+"px"});var Ht=I-W/2,ee=I+W/2;Ht<0?Object(y.c)(this.backgroundDOM,{marginLeft:-W/2-Ht+"px"}):ee>this.parentWidth&&Object(y.c)(this.backgroundDOM,{marginLeft:-W/2-ee+this.parentWidth+12+"px"})},kt.prototype.hide=function(){Object(y.c)(this.container,{top:0,left:0,visibility:"hidden"})},kt}(),B=function(){return(B=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var st in u=arguments[I])Object.prototype.hasOwnProperty.call(u,st)&&(f[st]=u[st]);return f}).apply(this,arguments)},$={fill:"#5B8FF9"},ut={fill:"#e6e8e9"},Bt=function(){function kt(f){this.frameCount=0,this.fontFamily="Arial, sans-serif";var u=f.graph,I=f.canvas,W=f.group,st=f.width,jt=f.height,Gt=f.padding,Ht=f.data,ee=f.start,ae=f.end,je=f.x,Fe=je===void 0?0:je,Ue=f.y,Ke=Ue===void 0?0:Ue,bn=f.tickLabelFormatter,wn=f.selectedTickStyle,Nn=wn===void 0?$:wn,Bn=f.unselectedTickStyle,Fn=Bn===void 0?ut:Bn,sr=f.tooltipBackgroundColor,ur=f.tooltipFomatter;this.graph=u,this.group=W,this.sliceGroup=W.addGroup({name:"slice-group"}),this.canvas=I,this.width=st,this.height=jt,this.padding=Gt,this.data=Ht,this.start=ee,this.end=ae,this.tickLabelFormatter=bn,this.selectedTickStyle=Nn,this.unselectedTickStyle=Fn,this.x=Fe,this.y=Ke,this.tooltipBackgroundColor=sr,this.tooltipFomatter=ur,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return kt.prototype.renderSlices=function(){var f=this,u=this,I=u.width,W=u.height,st=u.padding,jt=u.data,Gt=u.start,Ht=u.end,ee=u.tickLabelFormatter,ae=u.selectedTickStyle,je=u.unselectedTickStyle,Fe=I-2*st,Ue=W-(3*st+4+10)-2*st,Ke=jt.length,bn=(Fe-2*(Ke-1))/Ke;this.tickWidth=bn;var wn=this.sliceGroup,Nn=[],Bn=[],Fn=Math.round(Ke*Gt),sr=Math.round(Ke*Ht);this.startTickRectId=Fn,this.endTickRectId=sr,jt.forEach(function(Or,ei){var Ci=ei>=Fn&&ei<=sr?ae:je,kr=wn.addShape("rect",{attrs:B({x:st+ei*(bn+2),y:st,width:bn,height:Ue},Ci),draggable:!0,name:"tick-rect-"+ei}),yi=wn.addShape("rect",{attrs:{x:st+ei*bn+2*(2*ei-1)/2,y:st,width:ei===0||ei===Ke-1?bn+1:bn+2,height:Ue,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-"+ei});yi.toFront();var oo,so=kr.getBBox(),co=(so.minX+so.maxX)/2;if(Nn.push({rect:kr,pickRect:yi,value:Or.date,x:co,y:so.minY}),ee?(oo=ee(Or),!Object(n.x)(oo)&&oo&&(oo=Or.date)):ei%Math.round(Ke/10)==0&&(oo=Or.date),oo){Bn.push(oo);var lo=so.maxY+2*st;wn.addShape("line",{attrs:{stroke:"#BFBFBF",x1:co,y1:lo,x2:co,y2:lo+4}});var Hi=lo+4+st,Io=wn.addShape("text",{attrs:{fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:co,y:Hi,textAlign:"center",text:oo,textBaseline:"top",fontSize:10,fontFamily:f.fontFamily||"Arial, sans-serif"},capture:!1}),ko=Io.getBBox();ko.maxX>I?Io.attr("textAlign","right"):ko.minX<0&&Io.attr("textAlign","left")}}),this.tickRects=Nn;var ur=this.group;this.currentSpeed=1,this.controllerBtnGroup=new vi({group:ur,x:this.x,y:this.y+W+5,width:I,height:40,hiddleToggle:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"})},kt.prototype.initEvent=function(){var f=this,u=this.sliceGroup;u.on("click",function(ee){var ae=ee.target;if(ae.get("type")==="rect"&&ae.get("name")){var je=parseInt(ae.get("name").split("-")[2],10);if(!isNaN(je)){var Fe=f.tickRects,Ue=f.unselectedTickStyle;Fe.forEach(function(wn){wn.rect.attr(Ue)});var Ke=f.selectedTickStyle;Fe[je].rect.attr(Ke),f.startTickRectId=je,f.endTickRectId=je;var bn=je/Fe.length;f.graph.emit("valueChange",{value:[bn,bn]})}}}),u.on("dragstart",function(ee){var ae=f.tickRects,je=f.unselectedTickStyle;ae.forEach(function(wn){wn.rect.attr(je)});var Fe=ee.target,Ue=parseInt(Fe.get("name").split("-")[2],10),Ke=f.selectedTickStyle;ae[Ue].rect.attr(Ke),f.startTickRectId=Ue;var bn=Ue/ae.length;f.graph.emit("valueChange",{value:[bn,bn]}),f.dragging=!0}),u.on("dragover",function(ee){if(f.dragging&&ee.target.get("type")==="rect"){for(var ae=parseInt(ee.target.get("name").split("-")[2],10),je=f.startTickRectId,Fe=f.tickRects,Ue=f.selectedTickStyle,Ke=f.unselectedTickStyle,bn=0;bn<Fe.length;bn++){var wn=bn>=je&&bn<=ae?Ue:Ke;Fe[bn].rect.attr(wn)}var Nn=Fe.length;f.endTickRectId=ae;var Bn=je/Nn,Fn=ae/Nn;f.graph.emit("valueChange",{value:[Bn,Fn]})}}),u.on("drop",function(ee){if(f.dragging&&(f.dragging=!1,ee.target.get("type")==="rect")){var ae=f.startTickRectId,je=parseInt(ee.target.get("name").split("-")[2],10);if(!(je<ae)){var Fe=f.selectedTickStyle,Ue=f.tickRects;Ue[je].rect.attr(Fe),f.endTickRectId=je;var Ke=Ue.length,bn=ae/Ke,wn=je/Ke;f.graph.emit("valueChange",{value:[bn,wn]})}}});var I=this.tooltipBackgroundColor,W=this.tooltipFomatter,st=this.canvas,jt=new G({container:st.get("container"),backgroundColor:I}),Gt=this.tickRects;Gt.forEach(function(ee){var ae=ee.pickRect;ae.on("mouseenter",function(je){var Fe=je.target;if(Fe.get("type")==="rect"){var Ue=parseInt(Fe.get("name").split("-")[2],10),Ke=st.getClientByPoint(Gt[Ue].x,Gt[Ue].y);jt.show({x:Gt[Ue].x,y:Gt[Ue].y,clientX:Ke.x,clientY:Ke.y,text:W?W(Gt[Ue].value):Gt[Ue].value})}}),ae.on("mouseleave",function(je){jt.hide()})});var Ht=this.group;Ht.on("playPauseBtn:click",function(){f.isPlay=!f.isPlay,f.changePlayStatus()}),Ht.on("nextStepBtn:click",function(){f.updateStartEnd(1)}),Ht.on("preStepBtn:click",function(){f.updateStartEnd(-1)}),Ht.on("timebarConfigChanged",function(ee){ee.type;var ae=ee.speed;f.currentSpeed=ae})},kt.prototype.changePlayStatus=function(f){f===void 0&&(f=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit("timelinestart",null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),f&&this.graph.emit("timelineend",null))},kt.prototype.startPlay=function(){var f=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var u=f.currentSpeed;f.frameCount%(60/u)==0&&(f.frameCount=0,f.updateStartEnd(1)),f.frameCount++,f.isPlay&&(f.playHandler=f.startPlay())}):void 0},kt.prototype.updateStartEnd=function(f){var u=this.tickRects,I=u.length,W=this.unselectedTickStyle,st=this.selectedTickStyle,jt=this.endTickRectId;if(f>0?this.endTickRectId++:(u[this.endTickRectId].rect.attr(W),this.endTickRectId--),jt!==this.startTickRectId)this.endTickRectId<this.startTickRectId&&(this.startTickRectId=this.endTickRectId);else{for(var Gt=this.startTickRectId;Gt<=this.endTickRectId-1;Gt++)u[Gt].rect.attr(W);this.startTickRectId=this.endTickRectId}if(u[this.endTickRectId]){u[this.endTickRectId].rect.attr(st);var Ht=this.startTickRectId/I,ee=this.endTickRectId/I;this.graph.emit("valueChange",{value:[Ht,ee]})}},kt.prototype.destory=function(){this.graph.off("valueChange");var f=this.sliceGroup;f.off("click"),f.off("dragstart"),f.off("dragover"),f.off("drop"),this.tickRects.forEach(function(u){var I=u.pickRect;I.off("mouseenter"),I.off("mouseleave")}),this.tickRects.length=0,f.off("playPauseBtn:click"),f.off("nextStepBtn:click"),f.off("preStepBtn:click"),f.off("timebarConfigChanged"),this.sliceGroup.destroy()},kt}(),Jt=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var jt in st)Object.prototype.hasOwnProperty.call(st,jt)&&(W[jt]=st[jt])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}(),ie=function(){return(ie=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var st in u=arguments[I])Object.prototype.hasOwnProperty.call(u,st)&&(f[st]=u[st]);return f}).apply(this,arguments)},se=function(f,u){var I={};for(var W in f)Object.prototype.hasOwnProperty.call(f,W)&&u.indexOf(W)<0&&(I[W]=f[W]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function"){var st=0;for(W=Object.getOwnPropertySymbols(f);st<W.length;st++)u.indexOf(W[st])<0&&Object.prototype.propertyIsEnumerable.call(f,W[st])&&(I[W[st]]=f[W[st]])}return I},Ce=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return Jt(f,kt),f.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:2,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{}}},f.prototype.initContainer=function(){var u,I,W=this.get("graph"),st=this._cfgs,jt=st.width,Gt=st.height,Ht=this.get("className")||"g6-component-timebar",ee=this.get("container"),ae=this.get("graph").get("container");ee?(Object(n.x)(ee)&&(ee=document.getElementById(ee)),u=ee):(u=Object(y.b)("<div class='"+Ht+"'></div>"),Object(y.c)(u,{position:"relative"})),ae.appendChild(u),this.set("timeBarContainer",u),I=W.get("renderer")==="SVG"?new X.Canvas({container:u,width:jt,height:Gt}):new N.Canvas({container:u,width:jt,height:Gt}),this.set("canvas",I)},f.prototype.init=function(){this.initContainer();var u=this.get("canvas").addGroup({name:"timebar-group"});this.set("timeBarGroup",u),this.renderTrend(),this.initEvent();var I=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",I)},f.prototype.renderTrend=function(){var u=this._cfgs,I=u.width,W=u.x,st=u.y,jt=u.padding,Gt=u.type,Ht=u.trend,ee=u.slider,ae=u.controllerCfg,je=u.textStyle,Fe=Ht.data,Ue=se(Ht,["data"]),Ke=I-2*jt,bn=Gt==="trend"?26:8,wn=this.get("graph"),Nn=this.get("timeBarGroup"),Bn=this.get("canvas"),Fn=null;if(Gt==="trend"||Gt==="simple")Fn=new pe(ie(ie({graph:wn,canvas:Bn,group:Nn,type:Gt,x:W+jt,y:Gt==="trend"?st+jt:st+jt+15,width:Ke,height:bn,padding:jt,trendCfg:ie(ie({},Ue),{data:Fe.map(function(ur){return ur.value})})},ee),{ticks:Fe.map(function(ur){return ur.date}),handlerStyle:ie(ie({},ee.handlerStyle),{height:ee.height||bn}),controllerCfg:ae,textStyle:je}));else if(Gt==="tick"){var sr=this._cfgs.tick;Fn=new Bt(ie({graph:wn,canvas:Bn,group:Nn,x:W+jt,y:st+jt},sr))}this.set("timebar",Fn)},f.prototype.filterData=function(u){var I=u.value,W=null,st=this._cfgs.type;if(st==="trend"||st==="simple"?W=this._cfgs.trend.data:st==="tick"&&(W=this._cfgs.tick.data),W&&W.length!==0){var jt=this.get("rangeChange"),Gt=this.get("graph"),Ht=Math.round(W.length*I[0]),ee=Math.round(W.length*I[1]);ee=ee>=W.length?W.length-1:ee;var ae=W[Ht].date,je=W[ee].date;if(st!=="tick"&&this.get("timebar").setText(ae,je),jt)jt(Gt,ae,je);else{var Fe=Gt.save();(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=Fe);var Ue=this.cacheGraphData.nodes.filter(function(wn){return wn.date>=ae&&wn.date<=je}),Ke=Ue.map(function(wn){return wn.id}),bn=this.cacheGraphData.edges.filter(function(wn){return Ke.includes(wn.source)&&Ke.includes(wn.target)});Gt.changeData({nodes:Ue,edges:bn})}}else console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E")},f.prototype.initEvent=function(){var u=this,I=0,W=0,st=this._cfgs.type;st&&st!=="trend"&&st!=="simple"?st==="tick"&&(I=this._cfgs.tick.start,W=this._cfgs.tick.end):(I=this._cfgs.slider.start,W=this._cfgs.slider.end);var jt=this.get("graph");jt.on("afterrender",function(){u.filterData({value:[I,W]})}),jt.on("valueChange",function(Gt){u.filterData(Gt)})},f.prototype.destroy=function(){var u=this.get("timebar");u&&u.destory&&u.destory(),kt.prototype.destroy.call(this);var I=this.get("timeBarContainer");if(I){var W=this.get("container");W||(W=this.get("graph").get("container")),Object(n.x)(W)&&(W=document.getElementById(W)),W.removeChild(I)}},f}(s),Ee={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(f){return Object.assign(this,f),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(f){var u=this,I=this.events;this.graph=f,this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||f.get("canvas").set("draggable",!0),Object(n.f)(I,function(W,st){f.on(st,W)}),document.addEventListener("visibilitychange",function(){u.keydown=!1})},unbind:function(f){var u=this.events;this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||f.get("canvas").set("draggable",!1),Object(n.f)(u,function(I,W){f.off(W,I)})},get:function(f){return this[f]},set:function(f,u){return this[f]=u,this}},cn=function(){function kt(){}return kt.registerBehavior=function(f,u){if(!u)throw new Error("please specify handler for this behavior: "+f);var I=Object(n.c)(Ee);Object.assign(I,u);var W=function(jt){var Gt=this;Object.assign(this,this.getDefaultCfg(),jt);var Ht=this.getEvents();this.events=null;var ee={};Ht&&(Object(n.f)(Ht,function(ae,je){ee[je]=Object(n.J)(Gt,ae)}),this.events=ee)};W.prototype=I,kt.types[f]=W},kt.hasBehavior=function(f){return!!kt.types[f]},kt.getBehavior=function(f){return kt.types[f]},kt.types={},kt}(),xn=cn,_t=e(79),Yt=e(10),Se=e(33),Wt=Yt.a.transform,ue=function(f){return function(u,I){return u[f]-I[f]}},vn=function(f,u,I){return f>=u&&f<=I},kn=function(f,u,I,W){var st=I.x-f.x,jt=I.y-f.y,Gt=u.x-f.x,Ht=u.y-f.y,ee=W.x-I.x,ae=W.y-I.y,je=Gt*ae-Ht*ee,Fe=null;if(je*je>.001*(Gt*Gt+Ht*Ht)*(ee*ee+ae*ae)){var Ue=(st*ae-jt*ee)/je,Ke=(st*Ht-jt*Gt)/je;vn(Ue,0,1)&&vn(Ke,0,1)&&(Fe={x:f.x+Ue*Gt,y:f.y+Ue*Ht})}return Fe},_n=function(f,u){var I=f.x,W=f.y,st=f.width,jt=f.height,Gt=[],Ht={x:I+st/2,y:W+jt/2};Gt.push({x:I,y:W}),Gt.push({x:I+st,y:W}),Gt.push({x:I+st,y:W+jt}),Gt.push({x:I,y:W+jt}),Gt.push({x:I,y:W});for(var ee=null,ae=1;ae<Gt.length&&!(ee=kn(Gt[ae-1],Gt[ae],Ht,u));ae++);return ee},Un=function(f,u){var I=f.x,W=f.y,st=f.r,jt=u.x-I,Gt=u.y-W;if(Math.sqrt(jt*jt+Gt*Gt)<st)return null;var Ht=Math.sign(jt),ee=Math.sign(Gt),ae=Math.atan(Gt/jt);return{x:I+Math.abs(st*Math.cos(ae))*Ht,y:W+Math.abs(st*Math.sin(ae))*ee}},Ze=function(f,u){var I=f.rx,W=f.ry,st=f.x,jt=f.y,Gt=u.x-st,Ht=u.y-jt,ee=Math.atan2(Ht/W,Gt/I);return ee<0&&(ee+=2*Math.PI),{x:st+I*Math.cos(ee),y:jt+W*Math.sin(ee)}},Te=function(f,u,I){I===void 0&&(I=1);var W=[f.x,f.y,I];return u&&!isNaN(u[0])||(u=[1,0,0,0,1,0,0,0,1]),Yt.d.transformMat3(W,W,u),{x:W[0],y:W[1]}},R=function(f,u,I){I===void 0&&(I=1),u&&!isNaN(u[0])||(u=[1,0,0,0,1,0,0,0,1]);var W=Yt.b.invert([1,0,0,0,1,0,0,0,1],u);W||(W=[1,0,0,0,1,0,0,0,1]);var st=[f.x,f.y,I];return Yt.d.transformMat3(st,st,W),{x:st[0],y:st[1]}},mt=function(f,u,I){var W=f.x-u.x,st=f.y-u.y,jt=f.x-I.x,Gt=f.y-I.y,Ht=(f.x*f.x-u.x*u.x-u.y*u.y+f.y*f.y)/2,ee=(f.x*f.x-I.x*I.x-I.y*I.y+f.y*f.y)/2,ae=st*jt-W*Gt;return{x:-(Gt*Ht-st*ee)/ae,y:-(W*ee-jt*Ht)/ae}},$t=function(f,u){var I=f.x-u.x,W=f.y-u.y;return Math.sqrt(I*I+W*W)},me=function(f,u){var I=[];return f.forEach(function(W){var st=[];W.forEach(function(jt){st.push(jt*u)}),I.push(st)}),I},Zt=function(f){for(var u=[],I=f.length,W=0;W<I;W+=1){u[W]=[];for(var st=0;st<I;st+=1)W===st?u[W][st]=0:f[W][st]!==0&&f[W][st]?u[W][st]=f[W][st]:u[W][st]=1/0}for(var jt=0;jt<I;jt+=1)for(W=0;W<I;W+=1)for(st=0;st<I;st+=1)u[W][st]>u[W][jt]+u[jt][st]&&(u[W][st]=u[W][jt]+u[jt][st]);return u},ve=function(f,u){var I=f.nodes,W=f.edges,st=[],jt={};if(!I)throw new Error("invalid nodes data!");return I&&I.forEach(function(Gt,Ht){jt[Gt.id]=Ht,st.push([])}),W&&W.forEach(function(Gt){var Ht=Gt.source,ee=Gt.target,ae=jt[Ht],je=jt[ee];st[ae][je]=1,u||(st[je][ae]=1)}),st},he=function(f,u){f.translate(u.x,u.y)},ce=function(f,u){var I=f.getMatrix();I||(I=[1,0,0,0,1,0,0,0,1]);var W=f.getCanvasBBox(),st=u.x-W.minX,jt=u.y-W.minY,Gt=Wt(I,[["t",st,jt]]);f.setMatrix(Gt)},Me=function(f,u){var I=f.getMatrix();I||(I=[1,0,0,0,1,0,0,0,1]);var W=u;Object(n.m)(u)||(W=[u,u]),Object(n.m)(u)&&u.length===1&&(W=[u[0],u[0]]),I=Wt(I,[["s",W[0],W[1]]]),f.setMatrix(I)},_e=function(f,u){var I=f.getMatrix();I||(I=[1,0,0,0,1,0,0,0,1]),I=Wt(I,[["r",u]]),f.setMatrix(I)},We=function(f,u,I){for(var W=[],st=0;st<f;st++)W[st]=0;return I.forEach(function(jt){jt.source&&(W[u[jt.source]]+=1),jt.target&&(W[u[jt.target]]+=1)}),W};function Re(kt,f,u){return(u[0]-kt[0])*(f[1]-kt[1])==(f[0]-kt[0])*(u[1]-kt[1])&&Math.min(kt[0],f[0])<=u[0]&&u[0]<=Math.max(kt[0],f[0])&&Math.min(kt[1],f[1])<=u[1]&&u[1]<=Math.max(kt[1],f[1])}var tn=function(f,u,I){var W=!1,st=f.length;function jt(ae){return Math.abs(ae)<1e-6?0:ae<0?-1:1}if(st<=2)return!1;for(var Gt=0;Gt<st;Gt++){var Ht=f[Gt],ee=f[(Gt+1)%st];if(Re(Ht,ee,[u,I]))return!0;jt(Ht[1]-I)>0!=jt(ee[1]-I)>0&&jt(u-(I-Ht[1])*(Ht[0]-ee[0])/(Ht[1]-ee[1])-Ht[0])<0&&(W=!W)}return W},ke=function(f,u){return!(u.minX>f.maxX||u.maxX<f.minX||u.minY>f.maxY||u.maxY<f.minY)},ln=function(f,u){var I=function(Fe){var Ue=Fe.map(function(bn){return bn[0]}),Ke=Fe.map(function(bn){return bn[1]});return{minX:Math.min.apply(null,Ue),maxX:Math.max.apply(null,Ue),minY:Math.min.apply(null,Ke),maxY:Math.max.apply(null,Ke)}},W=function(Fe){for(var Ue=[],Ke=Fe.length,bn=0;bn<Ke-1;bn++){var wn=Fe[bn],Nn=Fe[bn+1];Ue.push({from:{x:wn[0],y:wn[1]},to:{x:Nn[0],y:Nn[1]}})}if(Ue.length>1){var Bn=Fe[0],Fn=Fe[Ke-1];Ue.push({from:{x:Fn[0],y:Fn[1]},to:{x:Bn[0],y:Bn[1]}})}return Ue};if(f.length<2||u.length<2)return!1;var st=I(f),jt=I(u);if(!ke(st,jt))return!1;var Gt=!1;if(Object(n.f)(u,function(je){if(tn(f,je[0],je[1]))return Gt=!0,!1}),Gt||(Object(n.f)(f,function(je){if(tn(u,je[0],je[1]))return Gt=!0,!1}),Gt))return!0;var Ht=W(f),ee=W(u),ae=!1;return Object(n.f)(ee,function(je){if(function(Fe,Ue){var Ke=!1;return Object(n.f)(Fe,function(bn){if(kn(bn.from,bn.to,Ue.from,Ue.to))return Ke=!0,!1}),Ke}(Ht,je))return ae=!0,!1}),ae},hn=function(){function kt(f,u,I,W){this.x1=f,this.y1=u,this.x2=I,this.y2=W}return kt.prototype.getBBox=function(){var f=Math.min(this.x1,this.x2),u=Math.min(this.y1,this.y2),I=Math.max(this.x1,this.x2),W=Math.max(this.y1,this.y2);return{x:f,y:u,minX:f,minY:u,maxX:I,maxY:W,width:I-f,height:W-u}},kt}(),nn=function(f,u){return{top:[f.minX,f.minY,f.maxX,f.minY],left:[f.minX,f.minY,f.minX,f.maxY],bottom:[f.minX,f.maxY,f.maxX,f.maxY],right:[f.maxX,f.minY,f.maxX,f.maxY]}[u]},dn=function(f,u){var I=(u.x2-u.x1)*(f.y1-u.y1)-(u.y2-u.y1)*(f.x1-u.x1),W=(f.x2-f.x1)*(f.y1-u.y1)-(f.y2-f.y1)*(f.x1-u.x1),st=(u.y2-u.y1)*(f.x2-f.x1)-(u.x2-u.x1)*(f.y2-f.y1);if(st){var jt=I/st,Gt=W/st;if(jt>=0&&jt<=1&&Gt>=0&&Gt<=1)return jt}return Number.POSITIVE_INFINITY},Sn=function(f,u){for(var I=["top","left","bottom","right"],W=f.getBBox(),st=0,jt=[],Gt=0;Gt<4;Gt++){var Ht=nn(W,I[Gt]),ee=Ht[0],ae=Ht[1],je=Ht[2],Fe=Ht[3];jt[Gt]=kn({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},{x:ee,y:ae},{x:je,y:Fe}),jt[Gt]&&(st+=1)}return[jt,st]},Pe=function(f,u){for(var I=["top","left","bottom","right"],W=f.getBBox(),st=Number.POSITIVE_INFINITY,jt=0,Gt=0;Gt<4;Gt++){var Ht=nn(W,I[Gt]),ee=Ht[0],ae=Ht[1],je=Ht[2],Fe=Ht[3],Ue=dn(u,new hn(ee,ae,je,Fe));(Ue=Math.abs(Ue-.5))>=0&&Ue<=1&&(jt+=1,st=Ue<st?Ue:st)}return jt===0?-1:st},le=function(f){var u=0,I=0;if(f.length>0){for(var W=0,st=f;W<st.length;W++){var jt=st[W];u+=jt.x,I+=jt.y}u/=f.length,I/=f.length}return{x:u,y:I}},Le=function(f,u){return Math.pow(f.x-u.x,2)+Math.pow(f.y-u.y,2)},Be=function(f,u){var I,W=u.x1,st=u.y1,jt=u.x2-W,Gt=u.y2-st,Ht=f.x-W,ee=f.y-st,ae=Ht*jt+ee*Gt;I=ae<=0||(ae=(Ht=jt-Ht)*jt+(ee=Gt-ee)*Gt)<=0?0:ae*ae/(jt*jt+Gt*Gt);var je=Ht*Ht+ee*ee-I;return je<0&&(je=0),je},en=function(f,u,I){return I===void 0&&(I=.001),Math.pow(f.x-u.x,2)+Math.pow(f.y-u.y,2)<Math.pow(I,2)},un=function(f,u){var I=f.x<u.x,W=f.x>u.x+u.width,st=f.y>u.y+u.height,jt=f.y<u.y;if(!(I||W||st||jt))return 0;if(st&&!I&&!W)return Math.pow(u.y+u.height-f.y,2);if(jt&&!I&&!W)return Math.pow(f.y-u.y,2);if(I&&!st&&!jt)return Math.pow(u.x-f.x,2);if(W&&!st&&!jt)return Math.pow(u.x+u.width-f.x,2);var Gt=Math.min(Math.abs(u.x-f.x),Math.abs(u.x+u.width-f.x)),Ht=Math.min(Math.abs(u.y-f.y),Math.abs(u.y+u.height-f.y));return Gt*Gt+Ht*Ht},ze="rgb(95, 149, 255)",fn="rgb(253, 253, 253)",mn="rgb(247, 250, 255)",Wn="rgb(224, 224, 224)",Tn="rgb(224, 224, 224)",Pn={version:"0.0.8",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:ze,fill:"rgb(239, 244, 255)"},size:20,color:ze,linkPoints:{size:8,lineWidth:1,fill:mn,stroke:ze}},nodeStateStyles:{active:{fill:mn,stroke:ze,lineWidth:2,shadowColor:ze,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:ze,lineWidth:4,shadowColor:ze,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:"#4572d9",lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:"rgb(247, 250, 255)",stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:"rgb(250, 250, 250)",stroke:"rgb(224, 224, 224)",lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Wn,lineAppendWidth:2},color:Wn},edgeStateStyles:{active:{stroke:ze,lineWidth:1},selected:{stroke:ze,lineWidth:2,shadowColor:ze,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:ze,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(234, 234, 234)",lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:fn,lineWidth:1,stroke:Tn,r:5,width:20,height:10},size:[20,5],color:Tn,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:ze,lineWidth:1,fill:"rgb(247, 250, 255)"},selected:{stroke:ze,lineWidth:2,fill:fn,shadowColor:ze,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:"#4572d9",lineWidth:2,fill:fn,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(224, 224, 224)",fill:fn,lineWidth:1},disable:{stroke:"rgb(234, 234, 234)",fill:"rgb(250, 250, 250)",lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]}},lr=function(){function kt(f){this.graph=f,this.destroyed=!1,this.modes=f.get("modes")||{default:[]},this.formatModes(),this.mode=f.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return kt.prototype.formatModes=function(){var f=this.modes;Object(n.f)(f,function(u){Object(n.f)(u,function(I,W){Object(n.x)(I)&&(u[W]={type:I})})})},kt.prototype.setBehaviors=function(f){var u,I=this.graph,W=this.modes[f],st=[];Object(n.f)(W||[],function(jt){var Gt=cn.getBehavior(jt.type||jt);Gt&&(u=new Gt(jt))&&(u.bind(I),st.push(u))}),this.currentBehaves=st},kt.mergeBehaviors=function(f,u){return Object(n.f)(u,function(I){f.indexOf(I)<0&&(Object(n.x)(I)&&(I={type:I}),f.push(I))}),f},kt.filterBehaviors=function(f,u){var I=[];return f.forEach(function(W){var st="";st=Object(n.x)(W)?W:W.type,u.indexOf(st)<0&&I.push(W)}),I},kt.prototype.setMode=function(f){var u=this.modes,I=this.graph,W=f;u[W]&&(I.emit("beforemodechange",{mode:f}),Object(n.f)(this.currentBehaves,function(st){st.delegate&&st.delegate.remove(),st.unbind(I)}),this.setBehaviors(W),I.emit("aftermodechange",{mode:f}),this.mode=f)},kt.prototype.getMode=function(){return this.mode},kt.prototype.manipulateBehaviors=function(f,u,I){var W,st=this;if(W=Object(n.m)(f)?f:[f],Object(n.m)(u))return Object(n.f)(u,function(Gt){st.modes[Gt]?st.modes[Gt]=I?kt.mergeBehaviors(st.modes[Gt]||[],W):kt.filterBehaviors(st.modes[Gt]||[],W):I&&(st.modes[Gt]=W)}),this;var jt=u;return u||(jt=this.mode),this.modes[jt]||I&&(this.modes[jt]=W),this.modes[jt]=I?kt.mergeBehaviors(this.modes[jt]||[],W):kt.filterBehaviors(this.modes[jt]||[],W),this.setMode(this.mode),this},kt.prototype.updateBehavior=function(f,u,I){Object(n.x)(f)&&(f={type:f});var W=[];if(I&&I!==this.mode&&I!=="default"){if(!(W=this.modes[I])||!W.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;var st=W.length;for(Gt=0;Gt<st;Gt++){if((Ht=W[Gt]).type===f.type||Ht===f.type)return Ht===f.type&&(Ht={type:Ht}),Object.assign(Ht,u),W[Gt]=Ht,this;Gt===st-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(!(W=this.currentBehaves)||!W.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var jt=W.length,Gt=0;Gt<jt;Gt++){var Ht;if((Ht=W[Gt]).type===f.type)return Ht.updateCfg(u),this;Gt===jt-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},kt.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},kt}(),Hr=function(kt){function f(u,I){var W=kt.call(this,u,I)||this;return W.item=I.item,W.canvasX=I.canvasX,W.canvasY=I.canvasY,W.wheelDelta=I.wheelDelta,W.detail=I.detail,W}return Object(nt.b)(f,kt),f}(e(18).Event),Gr=function(f){return f+"-"+Math.random()+Date.now()},Mr=function(f){var u=0,I=0,W=0,st=0;return Object(n.t)(f)?u=I=W=st=f:Object(n.x)(f)?u=I=W=st=parseInt(f,10):Object(n.m)(f)&&(u=f[0],W=Object(n.s)(f[1])?f[0]:f[1],st=Object(n.s)(f[2])?f[0]:f[2],I=Object(n.s)(f[3])?W:f[3]),[u,W,st,I]},oi=function(f){var u=new Hr(f.type,f);return u.clientX=f.clientX,u.clientY=f.clientY,u.x=f.x,u.y=f.y,u.target=f.target,u.currentTarget=f.currentTarget,u.bubbles=!0,u.item=f.item,u},ai=function(f){if(!f)return!1;for(var u=[1,0,0,0,1,0,0,0,1],I=0;I<9;I++)if(f[I]!==u[I])return!0;return!1},Zr=function(f){return Number.isNaN(Number(f))},Yi=function(f){for(var u=1/0,I=-1/0,W=1/0,st=-1/0,jt=0;jt<f.length;jt++){var Gt=f[jt].getBBox(),Ht=Gt.minX,ee=Gt.minY,ae=Gt.maxX,je=Gt.maxY;Ht<u&&(u=Ht),ee<W&&(W=ee),ae>I&&(I=ae),je>st&&(st=je)}return{x:Math.floor(u),y:Math.floor(W),width:Math.ceil(I)-Math.floor(u),height:Math.ceil(st)-Math.floor(W),minX:u,minY:W,maxX:I,maxY:st}},$i=function(f,u,I,W,st){u===void 0&&(u=15),I===void 0&&(I="quadratic");for(var jt=f.length,Gt=2*u,Ht=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],ee={},ae=[],je={},Fe=0;Fe<jt;Fe++){var Ue=f[Fe],Ke=Ue.source,bn=Ue.target,wn=Ke+"-"+bn;if(!ae[Fe]){ee[wn]||(ee[wn]=[]),ae[Fe]=!0,ee[wn].push(Ue);for(var Nn=0;Nn<jt;Nn++)if(Fe!==Nn){var Bn=f[Nn],Fn=Bn.source,sr=Bn.target;ae[Nn]||(Ke===sr&&bn===Fn?(ee[wn].push(Bn),ae[Nn]=!0,je[Fn+"|"+sr+"|"+(ee[wn].length-1)]=!0):Ke===Fn&&bn===sr&&(ee[wn].push(Bn),ae[Nn]=!0))}}}for(var ur in ee)for(var Or=ee[ur],ei=Or.length,Ci=0;Ci<ei;Ci++){var kr=Or[Ci];if(kr.source!==kr.target)if(ei===1&&W&&kr.source!==kr.target)kr.type=W;else{kr.type=I;var yi=(Ci%2==0?1:-1)*(je[kr.source+"|"+kr.target+"|"+Ci]?-1:1);kr.curveOffset=ei%2==1?yi*Math.ceil(Ci/2)*Gt:yi*(Math.floor(Ci/2)*Gt+u)}else st&&(kr.type=st),kr.loopCfg={position:Ht[Ci%8],dist:20*Math.floor(Ci/8)+50}}return f},Go=function(){function kt(f){this.destroyed=!1,this.graph=f,this.destroyed=!1}return kt.prototype.getViewCenter=function(){var f=this.getFormatPadding(),u=this.graph,I=this.graph.get("width"),W=u.get("height");return{x:(I-f[1]-f[3])/2+f[3],y:(W-f[0]-f[2])/2+f[0]}},kt.prototype.fitCenter=function(){var f=this.graph,u=f.get("group");u.resetMatrix();var I=u.getCanvasBBox();if(I.width!==0&&I.height!==0){var W=this.getViewCenter(),st=I.x+I.width/2,jt=I.y+I.height/2;f.translate(W.x-st,W.y-jt)}},kt.prototype.fitView=function(){var f=this.graph,u=this.getFormatPadding(),I=f.get("width"),W=f.get("height"),st=f.get("group");st.resetMatrix();var jt=st.getCanvasBBox();if(jt.width!==0&&jt.height!==0){var Gt=this.getViewCenter(),Ht=jt.x+jt.width/2,ee=jt.y+jt.height/2;f.translate(Gt.x-Ht,Gt.y-ee);var ae=(I-u[1]-u[3])/jt.width,je=(W-u[0]-u[2])/jt.height,Fe=ae;ae>je&&(Fe=je),f.zoom(Fe,Gt)}},kt.prototype.getFormatPadding=function(){var f=this.graph.get("fitViewPadding");return Mr(f)},kt.prototype.focusPoint=function(f,u,I){var W=this,st=this.getViewCenter(),jt=this.getPointByCanvas(st.x,st.y),Gt=this.graph.get("group").getMatrix();if(Gt||(Gt=[1,0,0,0,1,0,0,0,1]),u){var Ht=(jt.x-f.x)*Gt[0],ee=(jt.y-f.y)*Gt[4],ae=0,je=0,Fe=0,Ue=0;this.graph.get("canvas").animate(function(Ke){Fe=Ht*Ke,Ue=ee*Ke,W.graph.translate(Fe-ae,Ue-je),ae=Fe,je=Ue},Object(nt.a)({},I))}else this.graph.translate((jt.x-f.x)*Gt[0],(jt.y-f.y)*Gt[4])},kt.prototype.getPointByCanvas=function(f,u){var I=this.graph.get("group").getMatrix();return I||(I=[1,0,0,0,1,0,0,0,1]),R({x:f,y:u},I)},kt.prototype.getPointByClient=function(f,u){var I=this.graph.get("canvas").getPointByClient(f,u);return this.getPointByCanvas(I.x,I.y)},kt.prototype.getClientByPoint=function(f,u){var I=this.graph.get("canvas"),W=this.getCanvasByPoint(f,u),st=I.getClientByPoint(W.x,W.y);return{x:st.x,y:st.y}},kt.prototype.getCanvasByPoint=function(f,u){var I=this.graph.get("group").getMatrix();return I||(I=[1,0,0,0,1,0,0,0,1]),Te({x:f,y:u},I)},kt.prototype.focus=function(f,u,I){Object(n.x)(f)&&(f=this.graph.findById(f));var W=f.get("group").getMatrix();W||(W=[1,0,0,0,1,0,0,0,1]),f&&this.focusPoint({x:W[6],y:W[7]},u,I)},kt.prototype.changeSize=function(f,u){var I=this.graph;if(!Object(n.t)(f)||!Object(n.t)(u))throw Error("invalid canvas width & height, please make sure width & height type is number");I.set({width:f,height:u}),I.get("canvas").changeSize(f,u),I.get("plugins").forEach(function(W){if(W.get("gridContainer")){var st=I.get("minZoom");Object(y.c)(W.get("container"),{width:f+"px",height:u+"px"}),Object(y.c)(W.get("gridContainer"),{width:f/st+"px",height:u/st+"px",left:0,top:0})}})},kt.prototype.destroy=function(){this.graph=null,this.destroyed=!1},kt}(),Uo={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},zo=Math.PI,ta=Math.sin,li=Math.cos,Oo=ta(zo/8),qi=li(zo/8),_o=function(f,u){var I=f.getBBox(),W={x:I.minX,y:I.minY},st={x:I.maxX,y:I.maxY};if(u){var jt=u.getMatrix();jt||(jt=[1,0,0,0,1,0,0,0,1]),W=Te(W,jt),st=Te(st,jt)}var Gt=W.x,Ht=W.y,ee=st.x,ae=st.y;return{x:Gt,y:Ht,minX:Gt,minY:Ht,maxX:ee,maxY:ae,width:ee-Gt,height:ae-Ht}},Xo=function(f){var u=f.sourceNode||f.targetNode,I=u.get("group").getMatrix();I||(I=[1,0,0,0,1,0,0,0,1]);var W=u.getKeyShape().getBBox(),st=f.loopCfg||{},jt=st.dist||2*Math.max(W.width,W.height),Gt=st.position||Pn.defaultLoopPosition,Ht=[I[6],I[7]],ee=[f.startPoint.x,f.startPoint.y],ae=[f.endPoint.x,f.endPoint.y],je=W.height/2,Fe=W.height/2,Ue=je*Oo,Ke=je*qi,bn=Fe*Oo,wn=Fe*qi;if(ee[0]===ae[0]&&ee[1]===ae[1]){switch(Gt){case"top":ee=[Ht[0]-Ue,Ht[1]-Ke],ae=[Ht[0]+bn,Ht[1]-wn];break;case"top-right":je=W.height/2,Fe=W.width/2,ee=[Ht[0]+(Ue=je*Oo),Ht[1]-(Ke=je*qi)],ae=[Ht[0]+(wn=Fe*qi),Ht[1]-(bn=Fe*Oo)];break;case"right":je=W.width/2,Fe=W.width/2,ee=[Ht[0]+(Ke=je*qi),Ht[1]-(Ue=je*Oo)],ae=[Ht[0]+(wn=Fe*qi),Ht[1]+(bn=Fe*Oo)];break;case"bottom-right":je=W.width/2,Fe=W.height/2,ee=[Ht[0]+(Ke=je*qi),Ht[1]+(Ue=je*Oo)],ae=[Ht[0]+(bn=Fe*Oo),Ht[1]+(wn=Fe*qi)];break;case"bottom":je=W.height/2,Fe=W.height/2,ee=[Ht[0]+(Ue=je*Oo),Ht[1]+(Ke=je*qi)],ae=[Ht[0]-(bn=Fe*Oo),Ht[1]+(wn=Fe*qi)];break;case"bottom-left":je=W.height/2,Fe=W.width/2,ee=[Ht[0]-(Ue=je*Oo),Ht[1]+(Ke=je*qi)],ae=[Ht[0]-(wn=Fe*qi),Ht[1]+(bn=Fe*Oo)];break;case"left":je=W.width/2,Fe=W.width/2,ee=[Ht[0]-(Ke=je*qi),Ht[1]+(Ue=je*Oo)],ae=[Ht[0]-(wn=Fe*qi),Ht[1]-(bn=Fe*Oo)];break;case"top-left":je=W.width/2,Fe=W.height/2,ee=[Ht[0]-(Ke=je*qi),Ht[1]-(Ue=je*Oo)],ae=[Ht[0]-(bn=Fe*Oo),Ht[1]-(wn=Fe*qi)];break;default:je=W.width/2,Fe=W.width/2,ee=[Ht[0]-(Ue=je*Oo),Ht[1]-(Ke=je*qi)],ae=[Ht[0]+(bn=Fe*Oo),Ht[1]-(wn=Fe*qi)]}if(st.clockwise===!1){var Nn=[ee[0],ee[1]];ee=[ae[0],ae[1]],ae=[Nn[0],Nn[1]]}}var Bn=[ee[0]-Ht[0],ee[1]-Ht[1]],Fn=(je+jt)/je,sr=(Fe+jt)/Fe;st.clockwise===!1&&(Fn=(Fe+jt)/Fe,sr=(je+jt)/je);var ur=Yt.c.scale([0,0],Bn,Fn),Or=[Ht[0]+ur[0],Ht[1]+ur[1]],ei=[ae[0]-Ht[0],ae[1]-Ht[1]],Ci=Yt.c.scale([0,0],ei,sr),kr=[Ht[0]+Ci[0],Ht[1]+Ci[1]];return f.startPoint={x:ee[0],y:ee[1]},f.endPoint={x:ae[0],y:ae[1]},f.controlPoints=[{x:Or[0],y:Or[1]},{x:kr[0],y:kr[1]}],f},Yo=function(f,u,I,W,st){var jt=[],Gt=f.getPoint(u);if(Gt===null)return{x:0,y:0,angle:0};if(u<1e-4)jt=f.getStartTangent().reverse();else if(u>.9999)jt=f.getEndTangent();else{var Ht=f.getPoint(u+1e-4);jt.push([Gt.x,Gt.y]),jt.push([Ht.x,Ht.y])}var ee=Math.atan2(jt[1][1]-jt[0][1],jt[1][0]-jt[0][0]);if(ee<0&&(ee+=2*zo),I&&(Gt.x+=li(ee)*I,Gt.y+=ta(ee)*I),W){var ae=ee-zo/2;ee>.5*zo&&ee<1.5*zo&&(ae-=zo),Gt.x+=li(ae)*W,Gt.y+=ta(ae)*W}var je={x:Gt.x,y:Gt.y,angle:ee};return st?(ee>.5*zo&&ee<1.5*zo&&(ee-=zo),Object(nt.a)({rotate:ee},je)):je},ua=function kt(f,u){if(u(f)===!1)return!1;if(f&&f.children){for(var I=f.children.length-1;I>=0;I--)if(!kt(f.children[I],u))return!1}return!0},di=function(f,u){typeof u=="function"&&ua(f,u)},ea=function(f,u){typeof u=="function"&&function I(W,st){if(W&&W.children){for(var jt=W.children.length-1;jt>=0;jt--)if(!I(W.children[jt],st))return}return st(W)!==!1}(f,u)},xi=function(f,u){return u*(Uo[f]||1)},ks=function(f,u){var I=0,W=new RegExp("[\u4E00-\u9FA5]+");return f.split("").forEach(function(st){W.test(st)?I+=u:I+=xi(st,u)}),[I,u]},Ri=function(f,u){var I=[],W={},st={};f.forEach(function(Ht){st[Ht.id]=Ht}),f.forEach(function(Ht,ee){var ae=Object(n.c)(Ht);ae.itemType="combo",ae.children=void 0,ae.parentId===ae.id?(console.warn("The parentId for combo "+ae.id+" can not be the same as the combo's id"),delete ae.parentId):ae.parentId&&!st[ae.parentId]&&(console.warn("The parent combo for combo "+ae.id+" does not exist!"),delete ae.parentId);var je=W[ae.id];if(je){if(ae.children=je.children,W[ae.id]=ae,!(je=ae).parentId)return void I.push(je);var Fe=W[je.parentId];if(Fe)Fe.children?Fe.children.push(ae):Fe.children=[ae];else{var Ue={id:je.parentId,children:[je]};W[je.parentId]=Ue,W[ae.id]=ae}}else if(Object(n.x)(Ht.parentId)){var Ke=W[Ht.parentId];if(Ke)Ke.children?Ke.children.push(ae):Ke.children=[ae],W[ae.id]=ae;else{var bn={id:Ht.parentId,children:[ae]};W[bn.id]=bn,W[ae.id]=ae}}else I.push(ae),W[ae.id]=ae});var jt={};(u||[]).forEach(function(Ht){jt[Ht.id]=Ht;var ee=W[Ht.comboId];if(ee){var ae={id:Ht.id,comboId:Ht.comboId};ee.children?ee.children.push(ae):ee.children=[ae],ae.itemType="node",W[Ht.id]=ae}});var Gt=0;return I.forEach(function(Ht){Ht.depth=Gt+10,ua(Ht,function(ee){var ae,je=W[ee.id].itemType;ae=je==="node"?W[ee.comboId]:W[ee.parentId],ee.depth=ae&&je==="node"?Gt+1:Gt+10,Gt<ee.depth&&(Gt=ee.depth);var Fe=jt[ee.id];return Fe&&(Fe.depth=ee.depth),!0})}),I},Rs=function(f,u,I){var W,st=f,jt={root:{children:f}},Gt=!1,Ht="root";(f||[]).forEach(function(Ue){if(!Gt)return Ue.id===u?(W=Ue,Ue.itemType==="combo"?W.parentId=I:W.comboId=I,void(Gt=!0)):void di(Ue,function(Ke){return jt[Ke.id]={children:Ke.children},st=jt[Ke.parentId||Ke.comboId||"root"].children,!Ke||!Ke.removed&&u!==Ke.id||!st||(Ht=Ke.parentId||Ke.comboId||"root",W=Ke,Ke.itemType==="combo"?W.parentId=I:W.comboId=I,Gt=!0,!1)})});var ee=(st=jt[Ht].children)?st.indexOf(W):-1;if(ee>-1&&st.splice(ee,1),Gt||(W={id:u,itemType:"node",comboId:I},jt[u]={children:void 0}),u){var ae=!1;if(I){var je=0;(f||[]).forEach(function(Ue){ae||di(Ue,function(Ke){return I!==Ke.id||(ae=!0,Ke.children?Ke.children.push(W):Ke.children=[W],je=Ke.depth,W.itemType==="node"?W.depth=je+2:W.depth=je+1,!1)})})}else I&&ae||W.itemType==="node"||f.push(W);var Fe=W.depth;di(W,function(Ue){return Ue.itemType==="node"?Fe+=2:Fe+=1,Ue.depth=Fe,!0})}return f},Mi=function(f,u){var I={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return f&&f.length!==0&&(f.forEach(function(W){var st=u.findById(W.id);if(st&&st.isVisible()){st.set("bboxCanvasCache",void 0);var jt=st.getCanvasBBox();jt.x&&I.minX>jt.minX&&(I.minX=jt.minX),jt.y&&I.minY>jt.minY&&(I.minY=jt.minY),jt.x&&I.maxX<jt.maxX&&(I.maxX=jt.maxX),jt.y&&I.maxY<jt.maxY&&(I.maxY=jt.maxY)}}),I.x=(I.minX+I.maxX)/2,I.y=(I.minY+I.maxY)/2,I.width=I.maxX-I.minX,I.height=I.maxY-I.minY,I.centerX=(I.minX+I.maxX)/2,I.centerY=(I.minY+I.maxY)/2,Object.keys(I).forEach(function(W){I[W]!==1/0&&I[W]!==-1/0||(I[W]=void 0)})),I},hu=function(f){var u=Object(n.t)(f.x)||Object(n.t)(f.y)||f.type||f.anchorPoints||f.size;return f.style&&(u=u||Object(n.t)(f.style.r)||Object(n.t)(f.style.width)||Object(n.t)(f.style.height)||Object(n.t)(f.style.rx)||Object(n.t)(f.style.ry)),u},ui=function(f){var u={};return Object.keys(f).forEach(function(I){var W=f[I];if(Object(n.v)(W)){var st={};Object.keys(W).forEach(function(jt){var Gt=W[jt];(jt!=="img"||Object(n.x)(Gt))&&(st[jt]=Object(n.c)(Gt))}),u[I]=st}else u[I]=Object(n.c)(W)}),u};function du(kt){return(du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(kt)}function eo(kt){if(typeof kt!="string")return kt;var f=function(Or){if(typeof Or!="string")return Or;try{return JSON.parse(Or.trim())}catch(ei){return Or.trim()}},u=f(kt);if(typeof u!="string")return u;for(var I=function(Or){return Or[Or.length-1]},W=kt.trim(),st=[],jt=[],Gt=function(){for(var Or=[],ei=0;ei<arguments.length;ei++)Or[ei]=arguments[ei];return Or.some(function(Ci){return I(jt)===Ci})},Ht=null,ee=0,ae="";ee<W.length;){var je=W[ee],Fe=Gt('"',"'");if(Fe||je.trim()){var Ue=W[ee-1]==="\\",Ke=Gt("}"),bn=Gt("]"),wn=Gt(","),Nn=I(st);if(Fe)if(I(jt)!==je||Ue)ae+=je;else{jt.pop();var Bn=f(ae);Nn.push(Bn),Ht=Bn,ae=""}else if(bn&&je===",")ae&&(Nn.push(f(ae)),ae="");else if(Ke&&je===":")jt.push(","),ae&&(Nn.push(ae),ae="");else if(wn&&je===",")ae&&(Nn.push(f(ae)),ae=""),jt.pop();else if(je==="}"&&(Ke||wn)){ae&&(Nn.push(f(ae)),ae=""),wn&&jt.pop();for(var Fn={},sr=1;sr<Nn.length;sr+=2)Fn[Nn[sr-1]]=Nn[sr];st.pop(),st.length&&I(st).push(Fn),jt.pop(),Ht=Fn}else je==="]"&&bn?(ae&&(Nn.push(f(ae)),ae=""),st.pop(),st.length&&I(st).push(Nn),jt.pop(),Ht=Nn):je==="{"?(st.push([]),jt.push("}")):je==="["?(st.push([]),jt.push("]")):je==='"'?jt.push('"'):je==="'"?jt.push("'"):ae+=je;ee+=1}else ee+=1}return Ht||ae}function vu(kt,f){var u;f===void 0&&(f={x:0,y:0});var I=Object(nt.a)({x:0,y:0,width:0,height:0},f);if((u=kt.children)===null||u===void 0?void 0:u.length){var W=kt.attrs,st=W===void 0?{}:W,jt=st.marginTop,Gt=Object(nt.a)({},f);jt&&(Gt.y+=jt);for(var Ht=0;Ht<kt.children.length;Ht++){kt.children[Ht].attrs.key=(st.key||"root")+" -"+Ht+" ";var ee=vu(kt.children[Ht],Gt);if(ee.bbox){var ae=ee.bbox;ee.attrs.next==="inline"?Gt.x+=ee.bbox.width:Gt.y+=ee.bbox.height,ae.width+ae.x>I.width&&(I.width=ae.width+ae.x),ae.height+ae.y>I.height&&(I.height=ae.height+ae.y)}}}return kt.bbox=function(je,Fe,Ue){var Ke,bn,wn=je.attrs,Nn=wn===void 0?{}:wn,Bn={x:Fe.x||0,y:Fe.y||0,width:Ue.width||0,height:Ue.height||0};switch(je.type){case"maker":case"circle":Nn.r&&(bn=2*Nn.r,Ke=2*Nn.r);break;case"text":Nn.text&&(bn=ks(Nn.text,Nn.fontSize||12)[0],Ke=16,Bn.y+=Ke,Bn.height=Ke,Bn.width=bn,je.attrs=Object(nt.a)({fontSize:12,fill:"#000"},Nn));break;default:Nn.width&&(bn=Nn.width),Nn.height&&(Ke=Nn.height)}return Ke>=0&&(Bn.height=Ke),bn>=0&&(Bn.width=bn),Nn.marginTop&&(Bn.y+=Nn.marginTop),Nn.marginLeft&&(Bn.x+=Nn.marginLeft),Bn}(kt,f,I),kt.attrs=Object(nt.a)(Object(nt.a)({},kt.attrs),kt.bbox),kt}function na(kt){var f={},u=function(W){var st=function(Ht){return function(ee){for(var ae=Ht.length,je=[],Fe=0,Ue="";Fe<ae;)if(Ht[Fe]==="{"&&Ht[Fe+1]==="{")je.push(Ue),Ue="",Fe+=2;else if(Ht[Fe]==="}"&&Ht[Fe+1]==="}"){if(je.length){var Ke=je.pop();Ue=Object(n.i)(ee,Ue,Ke.endsWith("=")?'"{'+Ue+'}"':Ue),je.push(Ke+Ue)}Fe+=2,Ue=""}else Ue+=Ht[Fe],Fe+=1;return je.push(Ue),je.map(function(bn,wn){return je[wn-1]&&je[wn-1].endsWith("=")?'"{'+bn+'}"':bn}).join("")}}(typeof kt=="function"?kt(W):kt)(W),jt=document.createElement("div");jt.innerHTML=st;var Gt=vu(function Ht(ee,ae){var je={},Fe=ee.getAttributeNames&&ee.getAttributeNames()||[],Ue=ee.children&&Array.from(ee.children).map(function(wn){return Ht(wn,ae)}),Ke={},bn=ee.tagName?ee.tagName.toLowerCase():"group";return bn==="text"&&(je.text=ee.innerText),Ke.type=bn,bn==="img"&&(Ke.type="image"),Array.from(Fe).forEach(function(wn){var Nn=wn.split("-").reduce(function(sr,ur){return sr+ur.charAt(0).toUpperCase()+ur.slice(1)}),Bn=ee.getAttribute(wn);try{if(Nn==="style"||Nn==="attrs"){var Fn=eo(Bn);je=Object(nt.a)(Object(nt.a)({},je),Fn)}else Ke[Nn]=eo(Bn)}catch(sr){if(Nn==="style")throw sr;Ke[Nn]=Bn}}),Ke.attrs=je,ae&&ae.style&&Ke.name&&du(ae.style[Ke.name])==="object"&&(Ke.attrs=Object(nt.a)(Object(nt.a)({},Ke.attrs),ae.style[Ke.name])),ae&&ae.style&&Ke.keyshape&&(Ke.attrs=Object(nt.a)(Object(nt.a)({},Ke.attrs),ae.style)),Ue.length&&(Ke.children=Ue),Ke}(jt.children[0],W));return jt.remove(),Gt};return{draw:function(W,st){var jt=u(W),Gt=st;return function Ht(ee){var ae=ee.attrs,je=ae===void 0?{}:ae,Fe=ee.bbox,Ue=ee.type,Ke=ee.children,bn=Object(nt.c)(ee,["attrs","bbox","type","children"]);if(ee.type!=="group"){var wn=st.addShape(ee.type,Object(nt.a)({attrs:je,origin:{bbox:Fe,type:Ue,children:Ke}},bn));ee.keyshape&&(Gt=wn)}ee.children&&ee.children.forEach(function(Nn){return Ht(Nn)})}(jt),f[W.id]=[jt],Gt},update:function(W,st){f[W.id]||(f[W.id]=[]);var jt=st.getContainer(),Gt=jt.get("children"),Ht=u(W),ee=function Fe(Ue,Ke){var bn,wn,Nn,Bn,Fn=(Ue||{}).type,sr=((Ke==null?void 0:Ke.attrs)||{}).key;if(sr&&Ue&&(Ue.attrs.key=sr),!Ue&&Ke)return{action:"delete",val:Ke,type:Fn,key:sr};if(Ue&&!Ke)return{action:"add",val:Ue,type:Fn};if(!Ue&&!Ke)return{action:"same",type:Fn};var ur=[];if(((bn=Ue.children)===null||bn===void 0?void 0:bn.length)>0||((wn=Ke.children)===null||wn===void 0?void 0:wn.length)>0)for(var Or=Math.max((Nn=Ue.children)===null||Nn===void 0?void 0:Nn.length,(Bn=Ke.children)===null||Bn===void 0?void 0:Bn.length),ei=Ke.children||[],Ci=Ue.children||[],kr=0;kr<Or;kr+=1)ur.push(Fe(Ci[kr],ei[kr]));var yi=Object.keys(Ke.attrs),oo=Object.keys(Ue.attrs);return Ke.type!==Ue.type?{action:"restructure",nowTarget:Ue,formerTarget:Ke,key:sr,children:ur}:yi.filter(function(so){return so!=="children"}).some(function(so){return Ue.attrs[so]!==Ke.attrs[so]||!oo.includes(so)})?{action:"change",val:Ue,children:ur,type:Fn,key:sr}:{action:"same",children:ur,type:Fn,key:sr}}(Ht,f[W.id].pop()),ae=function Fe(Ue){var Ke;Ue.type!=="group"&&jt.addShape(Ue.type,{attrs:Ue.attrs}),((Ke=Ue.children)===null||Ke===void 0?void 0:Ke.length)&&Ue.children.map(function(bn){return Fe(bn)})},je=function Fe(Ue){var Ke,bn=Gt.find(function(wn){return wn.attrs.key===Ue.attrs.key});bn&&jt.removeChild(bn),((Ke=Ue.children)===null||Ke===void 0?void 0:Ke.length)&&Ue.children.map(function(wn){return Fe(wn)})};(function Fe(Ue){var Ke=Ue.key;if(Ue.type!=="group"){var bn=Gt.find(function(Nn){return Nn.attrs.key===Ke});switch(Ue.action){case"change":if(bn){var wn=Ue.val.keyshape?st.getOriginStyle():{};bn.attr(Object(nt.a)(Object(nt.a)({},wn),Ue.val.attrs))}break;case"add":ae(Ue.val);break;case"delete":je(Ue.val);break;case"restructure":je(Ue.formerTarget),ae(Ue.nowTarget)}}Ue.children&&Ue.children.forEach(function(Nn){return Fe(Nn)})})(ee),f[W.id].push(Ht)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var ra={};function ia(kt){return ra[kt]||(ra[kt]=Object(n.I)(kt)),ra[kt]}var tc={defaultShapeType:"defaultType",className:null,getShape:function(f){return this[f]||this[this.defaultShapeType]||this["simple-circle"]},draw:function(f,u,I){var W=this.getShape(f),st=W.draw(u,I);return W.afterDraw&&W.afterDraw(u,I,st),st},baseUpdate:function(f,u,I){var W=this.getShape(f);W.update&&W.update(u,I),W.afterUpdate&&W.afterUpdate(u,I)},setState:function(f,u,I,W){this.getShape(f).setState(u,I,W)},shouldUpdate:function(f){return!!this.getShape(f).update},getControlPoints:function(f,u){return this.getShape(f).getControlPoints(u)},getAnchorPoints:function(f,u){return this.getShape(f).getAnchorPoints(u)}},ya={options:{},draw:function(f,u){return this.drawShape(f,u)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(f){return f.controlPoints},getAnchorPoints:function(f){var u=this.options.anchorPoints;return f.anchorPoints||u}},Ur=function(){function kt(){}return kt.registerFactory=function(f,u){var I=ia(f),W=tc,st=Object(nt.a)(Object(nt.a)({},W),u);return kt[I]=st,st.className=I,st},kt.getFactory=function(f){return kt[ia(f)]},kt.registerNode=function(f,u,I){var W,st=kt.Node;if(typeof u=="string"||typeof u=="function"){var jt=na(u);W=Object(nt.a)(Object(nt.a)({},st.getShape("single-node")),jt)}else if(u.jsx)jt=na(u.jsx),W=Object(nt.a)(Object(nt.a)(Object(nt.a)({},st.getShape("single-node")),jt),u);else{st.getShape(I);var Gt=I?st.getShape(I):ya;W=Object(nt.a)(Object(nt.a)({},Gt),u)}return W.type=f,W.itemType="node",st[f]=W,W},kt.registerEdge=function(f,u,I){var W=kt.Edge,st=I?W.getShape(I):ya,jt=Object(nt.a)(Object(nt.a)({},st),u);return jt.type=f,jt.itemType="edge",W[f]=jt,jt},kt.registerCombo=function(f,u,I){var W=kt.Combo,st=I?W.getShape(I):ya,jt=Object(nt.a)(Object(nt.a)({},st),u);return jt.type=f,jt.itemType="combo",W[f]=jt,jt},kt}(),yr=Ur;Ur.registerFactory("node",{defaultShapeType:"circle"}),Ur.registerFactory("edge",{defaultShapeType:"line"}),Ur.registerFactory("combo",{defaultShapeType:"circle"});var Yc=["startArrow","endArrow"],pu=function(){function kt(f){this._cfg={},this.destroyed=!1;var u={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(u,this.getDefaultCfg(),f);var I=this.get("model"),W=I.id,st=this.get("type");W||(W=Gr(st),this.get("model").id=W),this.set("id",W);var jt=f.group;jt&&(jt.set("item",this),jt.set("id",W)),this.init(),this.draw();var Gt=I.shape||I.type||(st==="edge"?"line":"circle"),Ht=this.get("shapeFactory");if(Ht&&Ht[Gt]){var ee=Ht[Gt].options;if(ee&&ee.stateStyles){var ae=this.get("styles")||I.stateStyles;ae=Object(n.e)({},ee.stateStyles,ae),this.set("styles",ae)}}}return kt.prototype.calculateBBox=function(){var f=this.get("keyShape"),u=this.get("group"),I=_o(f,u);return I.x=I.minX,I.y=I.minY,I.width=I.maxX-I.minX,I.height=I.maxY-I.minY,I.centerX=(I.minX+I.maxX)/2,I.centerY=(I.minY+I.maxY)/2,I},kt.prototype.calculateCanvasBBox=function(){var f=this.get("keyShape"),u=this.get("group"),I=_o(f,u);return I.x=I.minX,I.y=I.minY,I.width=I.maxX-I.minX,I.height=I.maxY-I.minY,I.centerX=(I.minX+I.maxX)/2,I.centerY=(I.minY+I.maxY)/2,I},kt.prototype.drawInner=function(){var f=this.get("shapeFactory"),u=this.get("group"),I=this.get("model");u.clear();var W=I.visible;if(W===void 0||W||this.changeVisibility(W),f){this.updatePosition(I);var st=this.getShapeCfg(I),jt=st.type,Gt=f.draw(jt,st,u);Gt&&(this.set("keyShape",Gt),Gt.set("isKeyShape",!0),Gt.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",jt),this.restoreStates(f,jt)}},kt.prototype.setOriginStyle=function(f){var u=this.get("group").get("children"),I=this.getKeyShape(),W=this,st=I.get("name");if(this.get("originStyle")){var jt=this.getOriginStyle();st&&!jt[st]&&(jt[st]={});var Gt=this.getCurrentStatesStyle();Object(n.f)(u,function(ee){var ae=ee.get("name"),je=ee.attr();if(ae&&ae!==st){var Fe=Gt[ae];jt[ae]||(jt[ae]={}),Fe?Object.keys(je).forEach(function(bn){var wn=je[bn];wn!==Fe[bn]&&(jt[ae][bn]=wn)}):jt[ae]=Object(n.c)(je)}else{var Ue=ee.attr(),Ke=Object(nt.a)(Object(nt.a)({},Gt),Gt[st]);Object.keys(Ue).forEach(function(bn){var wn=Ue[bn];Object(n.w)(wn)&&Yc.indexOf(ae)===-1||Ke[bn]!==wn&&(st?jt[st][bn]=wn:jt[bn]=wn)})}}),jt.path&&delete jt.path,jt.matrix&&delete jt.matrix,W.set("originStyle",jt)}else{var Ht={};Object(n.f)(u,function(ee){var ae=ee.get("type"),je=ee.get("name");if(je&&je!==st)Ht[je]=ae!=="image"?Object(n.c)(ee.attr()):W.getShapeStyleByName(je);else{var Fe=W.getShapeStyleByName();if(Fe.path&&delete Fe.path,Fe.matrix&&delete Fe.matrix,st)if(je)Ht[st]=Fe;else{var Ue=Gr("shape");ee.set("name",Ue),Ht[Ue]=ae!=="image"?Object(n.c)(ee.attr()):W.getShapeStyleByName(je)}else Object.assign(Ht,Fe)}}),W.set("originStyle",Ht)}},kt.prototype.restoreStates=function(f,u){var I=this,W=I.get("states");Object(n.f)(W,function(st){f.setState(u,st,!0,I)})},kt.prototype.init=function(){var f=yr.getFactory(this.get("type"));this.set("shapeFactory",f)},kt.prototype.get=function(f){return this._cfg[f]},kt.prototype.set=function(f,u){Object(n.w)(f)?this._cfg=Object(nt.a)(Object(nt.a)({},this._cfg),f):this._cfg[f]=u},kt.prototype.getDefaultCfg=function(){return{}},kt.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null)},kt.prototype.beforeDraw=function(){},kt.prototype.afterDraw=function(){},kt.prototype.afterUpdate=function(){},kt.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},kt.prototype.getShapeStyleByName=function(f){var u,I=this.get("group");if(u=f?I.find(function(st){return st.get("name")===f}):this.getKeyShape()){var W={};return Object(n.f)(u.attr(),function(st,jt){jt!=="img"&&(W[jt]=st)}),W}return{}},kt.prototype.getShapeCfg=function(f){var u=this.get("styles");if(u){var I=f;return I.style=Object(nt.a)(Object(nt.a)({},u),f.style),I}return f},kt.prototype.getStateStyle=function(f){var u=this.get("styles");return u&&u[f]},kt.prototype.getOriginStyle=function(){return this.get("originStyle")},kt.prototype.getCurrentStatesStyle=function(){var f=this,u={},I=f.getStates();return I&&I.length?(Object(n.f)(f.getStates(),function(W){u=Object.assign(u,f.getStateStyle(W))}),u):this.getOriginStyle()},kt.prototype.setState=function(f,u){var I=this.get("states"),W=this.get("shapeFactory"),st=f,jt=f;Object(n.x)(u)&&(st=f+":"+u,jt=f+":");var Gt=I;if(Object(n.n)(u)){var Ht=I.indexOf(jt);if(u){if(Ht>-1)return;I.push(st)}else Ht>-1&&I.splice(Ht,1)}else if(Object(n.x)(u)){var ee=I.filter(function(je){return je.includes(jt)});ee.length>0&&this.clearStates(ee),(Gt=Gt.filter(function(je){return!je.includes(jt)})).push(st),this.set("states",Gt)}if(W){var ae=this.get("model").type;W.setState(ae,f,u,this)}},kt.prototype.clearStates=function(f){var u=this,I=u.getStates(),W=u.get("shapeFactory"),st=u.get("model").type;f||(f=I),Object(n.x)(f)&&(f=[f]);var jt=I.filter(function(Gt){return f.indexOf(Gt)===-1});u.set("states",jt),f.forEach(function(Gt){W.setState(st,Gt,!1,u)})},kt.prototype.getContainer=function(){return this.get("group")},kt.prototype.getKeyShape=function(){return this.get("keyShape")},kt.prototype.getModel=function(){return this.get("model")},kt.prototype.getType=function(){return this.get("type")},kt.prototype.getID=function(){return this.get("id")},kt.prototype.isItem=function(){return!0},kt.prototype.getStates=function(){return this.get("states")},kt.prototype.hasState=function(f){return this.getStates().indexOf(f)>=0},kt.prototype.refresh=function(){var f=this.get("model");this.updatePosition(f),this.updateShape(),this.afterUpdate(),this.clearCache()},kt.prototype.isOnlyMove=function(f){return!1},kt.prototype.update=function(f,u){u===void 0&&(u=!1);var I=this.get("model"),W=I.visible,st=f.visible;W!==st&&st!==void 0&&this.changeVisibility(st);var jt=I.x,Gt=I.y;f.x=isNaN(f.x)?I.x:f.x,f.y=isNaN(f.y)?I.y:f.y;var Ht=this.get("styles");if(f.stateStyles){var ee=f.stateStyles;Object(n.A)(Ht,ee),delete f.stateStyles}Object.assign(I,f),u?this.updatePosition(f):(jt===f.x&&Gt===f.y||this.updatePosition(f),this.updateShape()),this.afterUpdate(),this.clearCache()},kt.prototype.updateShape=function(){var f=this.get("shapeFactory"),u=this.get("model"),I=u.type;if(f.shouldUpdate(I)&&I===this.get("currentShape")){var W=this.getShapeCfg(u);f.baseUpdate(I,W,this)}else this.draw();this.setOriginStyle(u),this.restoreStates(f,I)},kt.prototype.updatePosition=function(f){var u=this.get("model"),I=Object(n.s)(f.x)?u.x:f.x,W=Object(n.s)(f.y)?u.y:f.y,st=this.get("group");Object(n.s)(I)||Object(n.s)(W)||(st.resetMatrix(),he(st,{x:I,y:W}),u.x=I,u.y=W,this.clearCache())},kt.prototype.getBBox=function(){var f=this.get("bboxCache");return f||(f=this.calculateBBox(),this.set("bboxCache",f)),f},kt.prototype.getCanvasBBox=function(){var f=this.get("bboxCanvasCache");return f||(f=this.calculateCanvasBBox(),this.set("bboxCanvasCache",f)),f},kt.prototype.toFront=function(){this.get("group").toFront()},kt.prototype.toBack=function(){this.get("group").toBack()},kt.prototype.show=function(){this.changeVisibility(!0)},kt.prototype.hide=function(){this.changeVisibility(!1)},kt.prototype.changeVisibility=function(f){var u=this.get("group");f?u.show():u.hide(),this.set("visible",f)},kt.prototype.isVisible=function(){return this.get("visible")},kt.prototype.enableCapture=function(f){var u=this.get("group");u&&u.set("capture",f)},kt.prototype.destroy=function(){if(!this.destroyed){var f=this.get("animate"),u=this.get("group");f&&u.stopAnimate(),this.clearCache(),u.remove(),this._cfg=null,this.destroyed=!0}},kt}(),ds={source:"start",target:"end"},ec=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return Object(nt.b)(f,kt),f.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},f.prototype.setEnd=function(u,I){var W=ds[u]+"Point",st=u+"Node",jt=this.get(st);jt&&!jt.destroyed&&jt.removeEdge(this),Object(n.w)(I)?(this.set(W,I),this.set(st,null)):(I.addEdge(this),this.set(st,I),this.set(W,null))},f.prototype.getLinkPoint=function(u,I,W){var st=ds[u]+"Point",jt=u+"Node",Gt=this.get(st);if(!Gt){var Ht=this.get(jt),ee=u+"Anchor",ae=this.getPrePoint(u,W),je=I[ee];Object(n.s)(je)||(Gt=Ht.getLinkPointByAnchor(je)),Gt=Gt||Ht.getLinkPoint(ae),Object(n.s)(Gt.index)||this.set(u+"AnchorIndex",Gt.index)}return Gt},f.prototype.getPrePoint=function(u,I){if(I&&I.length)return I[u==="source"?0:I.length-1];var W=u==="source"?"target":"source";return this.getEndPoint(W)},f.prototype.getEndPoint=function(u){var I=u+"Node",W=ds[u]+"Point",st=this.get(I);return st?st.get("model"):this.get(W)},f.prototype.getControlPointsByCenter=function(u){var I=this.getEndPoint("source"),W=this.getEndPoint("target"),st=this.get("shapeFactory"),jt=u.type;return st.getControlPoints(jt,{startPoint:I,endPoint:W})},f.prototype.getEndCenter=function(u){var I=u+"Node",W=ds[u]+"Point",st=this.get(I);if(st){var jt=st.getBBox();return{x:jt.centerX,y:jt.centerY}}return this.get(W)},f.prototype.init=function(){kt.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},f.prototype.getShapeCfg=function(u){var I=this.get("linkCenter"),W=kt.prototype.getShapeCfg.call(this,u);if(I)W.startPoint=this.getEndCenter("source"),W.endPoint=this.getEndCenter("target");else{var st=W.controlPoints||this.getControlPointsByCenter(W);W.startPoint=this.getLinkPoint("source",u,st),W.endPoint=this.getLinkPoint("target",u,st)}return W.sourceNode=this.get("sourceNode"),W.targetNode=this.get("targetNode"),W},f.prototype.getModel=function(){var u=this.get("model"),I=this.get("sourceNode"),W=this.get("targetNode");return I?delete u.sourceNode:u.source=this.get("startPoint"),W?delete u.targetNode:u.target=this.get("endPoint"),Object(n.x)(u.source)||Object(n.w)(u.source)||(u.source=u.source.getID()),Object(n.x)(u.target)||Object(n.w)(u.target)||(u.target=u.target.getID()),u},f.prototype.setSource=function(u){this.setEnd("source",u),this.set("source",u)},f.prototype.setTarget=function(u){this.setEnd("target",u),this.set("target",u)},f.prototype.getSource=function(){return this.get("source")},f.prototype.getTarget=function(){return this.get("target")},f.prototype.updatePosition=function(){},f.prototype.update=function(u,I){I===void 0&&(I=!1);var W=this.get("model"),st=W.visible,jt=u.visible;st!==jt&&jt!==void 0&&this.changeVisibility(jt);var Gt=this.get("styles");if(u.stateStyles){var Ht=u.stateStyles;Object(n.A)(Gt,Ht),delete u.stateStyles}Object.assign(W,u),this.updateShape(),this.afterUpdate(),this.clearCache()},f.prototype.destroy=function(){var u=this.get("sourceNode"),I=this.get("targetNode");u&&!u.destroyed&&u.removeEdge(this),I&&!I.destroyed&&I.removeEdge(this),kt.prototype.destroy.call(this)},f}(pu),Qo=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return Object(nt.b)(f,kt),f.prototype.getNearestPoint=function(u,I){for(var W=0,st=u[0],jt=$t(u[0],I),Gt=0;Gt<u.length;Gt++){var Ht=u[Gt],ee=$t(Ht,I);ee<jt&&(st=Ht,jt=ee,W=Gt)}return st.anchorIndex=W,st},f.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},f.prototype.getEdges=function(){return this.get("edges")},f.prototype.getInEdges=function(){var u=this;return this.get("edges").filter(function(I){return I.get("target")===u})},f.prototype.getOutEdges=function(){var u=this;return this.get("edges").filter(function(I){return I.get("source")===u})},f.prototype.getNeighbors=function(u){var I=this,W=this.get("edges");return u==="target"?W.filter(function(st){return st.getSource()===I}).map(function(st){return st.getTarget()}):u==="source"?W.filter(function(st){return st.getTarget()===I}).map(function(st){return st.getSource()}):W.map(function(st){return st.getSource()===I?st.getTarget():st.getSource()})},f.prototype.getLinkPointByAnchor=function(u){return this.getAnchorPoints()[u]},f.prototype.getLinkPoint=function(u){var I,W,st=this.get("keyShape").get("type"),jt=this.get("type"),Gt=this.getBBox();jt==="combo"?(I=Gt.centerX||(Gt.maxX+Gt.minX)/2,W=Gt.centerY||(Gt.maxY+Gt.minY)/2):(I=Gt.centerX,W=Gt.centerY);var Ht,ee=this.getAnchorPoints();switch(st){case"circle":Ht=Un({x:I,y:W,r:Gt.width/2},u);break;case"ellipse":Ht=Ze({x:I,y:W,rx:Gt.width/2,ry:Gt.height/2},u);break;default:Ht=_n(Gt,u)}var ae=Ht;return ee.length&&(ae||(ae=u),ae=this.getNearestPoint(ee,ae)),ae||(ae={x:I,y:W}),ae},f.prototype.getAnchorPoints=function(){var u=this.get("anchorPointsCache");if(!u){u=[];var I=this.get("shapeFactory"),W=this.getBBox(),st=this.get("model"),jt=this.getShapeCfg(st),Gt=st.type,Ht=I.getAnchorPoints(Gt,jt)||[];Object(n.f)(Ht,function(ee,ae){var je={x:W.minX+ee[0]*W.width,y:W.minY+ee[1]*W.height,anchorIndex:ae};u.push(je)}),this.set("anchorPointsCache",u)}return u},f.prototype.addEdge=function(u){this.get("edges").push(u)},f.prototype.lock=function(){this.set("locked",!0)},f.prototype.unlock=function(){this.set("locked",!1)},f.prototype.hasLocked=function(){return this.get("locked")},f.prototype.removeEdge=function(u){var I=this.getEdges(),W=I.indexOf(u);W>-1&&I.splice(W,1)},f.prototype.clearCache=function(){this.set("bboxCache",null),this.set("anchorPointsCache",null)},f.prototype.isOnlyMove=function(u){if(!u)return!1;var I=!Object(n.s)(u.x),W=!Object(n.s)(u.y),st=Object.keys(u);return st.length===1&&(I||W)||st.length===2&&I&&W},f}(pu),nc=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return Object(nt.b)(f,kt),f.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},f.prototype.getShapeCfg=function(u){var I=this.get("styles"),W=this.get("bbox");if(I&&W){var st=u,jt={r:Math.hypot(W.height,W.width)/2||Pn.defaultCombo.size[0]/2,width:W.width||Pn.defaultCombo.size[0],height:W.height||Pn.defaultCombo.size[1]};st.style=Object(nt.a)(Object(nt.a)(Object(nt.a)({},I),u.style),jt);var Gt=u.padding||Pn.defaultCombo.padding;return Object(n.t)(Gt)?(jt.r+=Gt,jt.width+=2*Gt,jt.height+=2*Gt):(jt.r+=Gt[0],jt.width+=Gt[1]+Gt[3]||2*Gt[1],jt.height+=Gt[0]+Gt[2]||2*Gt[0]),this.set("sizeCache",jt),st}return u},f.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var u=this.get("keyShape"),I=this.get("group"),W=_o(u,I);W.centerX=(W.minX+W.maxX)/2,W.centerY=(W.minY+W.maxY)/2;var st=this.get("sizeCache"),jt=this.get("bboxCache")||{},Gt=jt.x,Ht=jt.x;return st?(u.get("type")==="circle"?(W.width=2*st.r,W.height=2*st.r):(W.width=st.width,W.height=st.height),W.minX=W.centerX-W.width/2,W.minY=W.centerY-W.height/2,W.maxX=W.centerX+W.width/2,W.maxY=W.centerY+W.height/2):(W.width=W.maxX-W.minX,W.height=W.maxY-W.minY,W.centerX=(W.minX+W.maxX)/2,W.centerY=(W.minY+W.maxY)/2),W.x=W.minX,W.y=W.minY,W.x===Gt&&W.y===Ht||this.set("anchorPointsCache",null),W}},f.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},f.prototype.getNodes=function(){return this.get("nodes")},f.prototype.getCombos=function(){return this.get("combos")},f.prototype.addChild=function(u){switch(u.getType()){case"node":this.addNode(u);break;case"combo":this.addCombo(u);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},f.prototype.addCombo=function(u){return this.get("combos").push(u),!0},f.prototype.addNode=function(u){return this.get("nodes").push(u),!0},f.prototype.removeChild=function(u){switch(u.getType()){case"node":this.removeNode(u);break;case"combo":this.removeCombo(u);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},f.prototype.removeCombo=function(u){if(u){var I=this.getCombos(),W=I.indexOf(u);return W>-1&&(I.splice(W,1),!0)}},f.prototype.removeNode=function(u){if(u){var I=this.getNodes(),W=I.indexOf(u);return W>-1&&(I.splice(W,1),!0)}},f.prototype.isOnlyMove=function(u){return!1},f.prototype.getBBox=function(){return this.set("bboxCanvasCache",null),this.calculateCanvasBBox()},f.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null),this.set("anchorPointsCache",null)},f.prototype.destroy=function(){if(!this.destroyed){var u=this.get("animate"),I=this.get("group");u&&I.stopAnimate(),this.clearCache(),this.set("sizeCache",null),this.set("bbox",null),I.remove(),this._cfg=null,this.destroyed=!0}},f}(Qo),Vo=function(){function kt(f){this.graph=f,this.destroyed=!1}return kt.prototype.addItem=function(f,u){var I=this,W=this.graph,st=f==="vedge"?"edge":f,jt=W.get(st+"Group")||W.get("group"),Gt=Object(n.I)(st),Ht=null,ee=W.get(st+Object(n.I)("stateStyles"))||{},ae=W.get("default"+Gt);u.stateStyles&&(ee=u.stateStyles),ae&&Object(n.f)(ae,function(Fn,sr){Object(n.v)(Fn)&&!Object(n.m)(Fn)?u[sr]=Object(n.e)({},Fn,u[sr]):Object(n.m)(Fn)?u[sr]=u[sr]||Object(n.c)(ae[sr]):u[sr]=u[sr]||ae[sr]});var je=W.get(st+"Mapper");if(je){var Fe=je(u);Fe.stateStyles&&(ee=Fe.stateStyles,delete Fe.stateStyles),Object(n.f)(Fe,function(Fn,sr){Object(n.v)(Fn)&&!Object(n.m)(Fn)?u[sr]=Object(n.e)({},u[sr],Fn):u[sr]=Fe[sr]||u[sr]})}if(W.emit("beforeadditem",{type:f,model:u}),f==="edge"||f==="vedge"){var Ue=void 0,Ke=void 0;if(Ue=u.source,Ke=u.target,Ue&&Object(n.x)(Ue)&&(Ue=W.findById(Ue)),Ke&&Object(n.x)(Ke)&&(Ke=W.findById(Ke)),!Ue||!Ke)return void console.warn("The source or target node of edge "+u.id+" does not exist!");Ue.getType&&Ue.getType()==="combo"&&(u.isComboEdge=!0),Ke.getType&&Ke.getType()==="combo"&&(u.isComboEdge=!0),Ht=new ec({model:u,source:Ue,target:Ke,styles:ee,linkCenter:W.get("linkCenter"),group:jt.addGroup()})}else if(f==="node")Ht=new Qo({model:u,styles:ee,group:jt.addGroup()});else if(f==="combo"){var bn=u.children,wn=Mi(bn,W);u.x=wn.x||u.x||100*Math.random(),u.y=wn.y||u.y||100*Math.random();var Nn=jt.addGroup();Nn.setZIndex(u.depth);var Bn=(Ht=new nc({model:u,styles:ee,bbox:wn,group:Nn})).getModel();(bn||[]).forEach(function(Fn){var sr=W.findById(Fn.id);Ht.addChild(sr),Fn.depth=Bn.depth+2}),u.collapsed&&setTimeout(function(){W.collapseCombo(Ht),I.updateCombo(Ht,[])},250)}if(Ht)return W.get(f+"s").push(Ht),W.get("itemMap")[Ht.get("id")]=Ht,W.emit("afteradditem",{item:Ht,model:u}),Ht},kt.prototype.updateItem=function(f,u){var I,W,st=this.graph;if(Object(n.x)(f)&&(f=st.findById(f)),f&&!f.destroyed){var jt="";f.getType&&(jt=f.getType());var Gt=st.get(jt+"Mapper"),Ht=f.getModel(),ee=f.isOnlyMove(u);if(Gt){var ae=Gt(Object(n.e)({},Ht,u)),je=Object(n.e)({},Ht,ae,u);ae.stateStyles&&(f.set("styles",je.stateStyles),delete je.stateStyles),Object(n.f)(je,function(Bn,Fn){u[Fn]=Bn})}else Object(n.f)(u,function(Bn,Fn){Ht[Fn]&&Object(n.v)(Bn)&&!Object(n.m)(Bn)&&(u[Fn]=Object(nt.a)(Object(nt.a)({},Ht[Fn]),u[Fn]))});if(st.emit("beforeupdateitem",{item:f,cfg:u}),jt==="edge"){if(u.source){var Fe=u.source;Object(n.x)(Fe)&&(Fe=st.findById(Fe)),f.setSource(Fe)}if(u.target){var Ue=u.target;Object(n.x)(Ue)&&(Ue=st.findById(Ue)),f.setTarget(Ue)}f.update(u)}if(jt==="node"||jt==="combo"){f.update(u,ee);var Ke=f.getEdges(),bn=hu(u);if(bn&&jt==="node")Object(n.f)(Ke,function(Bn){Bn.refresh()});else if(bn&&jt==="combo"){var wn=f.get("shapeFactory"),Nn=Ht.type||"circle";(Ht.animate===void 0||u.animate===void 0?(W=(I=wn[Nn])===null||I===void 0?void 0:I.options)===null||W===void 0?void 0:W.animate:Ht.animate||u.animate)?setTimeout(function(){if(f&&!f.destroyed){var Bn=f.getKeyShape();Bn&&!Bn.destroyed&&Object(n.f)(Ke,function(Fn){Fn&&!Fn.destroyed&&Fn.refresh()})}},201):Object(n.f)(Ke,function(Bn){Bn.refresh()})}}st.emit("afterupdateitem",{item:f,cfg:u})}},kt.prototype.updateCombo=function(f,u){var I,W,st=this.graph;if(Object(n.x)(f)&&(f=st.findById(f)),f&&!f.destroyed){var jt=Mi(u,st);f.set("bbox",jt),f.update({x:jt.x,y:jt.y});var Gt=f.getEdges()||[],Ht=Gt.length,ee=f.getModel(),ae=f.get("shapeFactory"),je=ee.type||"circle";if(ee.animate===void 0?(W=(I=ae[je])===null||I===void 0?void 0:I.options)===null||W===void 0?void 0:W.animate:ee.animate)setTimeout(function(){if(f&&!f.destroyed){var Ke=f.getKeyShape();if(Ke&&!Ke.destroyed)for(var bn=0;bn<Ht;bn++){var wn=Gt[bn];wn&&!wn.destroyed&&wn.refresh()}}},201);else for(var Fe=0;Fe<Ht;Fe++){var Ue=Gt[Fe];Ue&&!Ue.destroyed&&Ue.refresh()}}},kt.prototype.collapseCombo=function(f){var u=this.graph;Object(n.x)(f)&&(f=u.findById(f));var I=f.getChildren();I.nodes.forEach(function(W){u.hideItem(W)}),I.combos.forEach(function(W){u.hideItem(W)})},kt.prototype.expandCombo=function(f){var u=this.graph;Object(n.x)(f)&&(f=u.findById(f));var I=f.getChildren();I.nodes.forEach(function(W){u.showItem(W)}),I.combos.forEach(function(W){W.getModel().collapsed?W.show():u.showItem(W)})},kt.prototype.removeItem=function(f){var u=this,I=this.graph;if(Object(n.x)(f)&&(f=I.findById(f)),f&&!f.destroyed){var W=Object(n.c)(f.getModel());I.emit("beforeremoveitem",{item:W});var st="";f.getType&&(st=f.getType());var jt=I.get(st+"s"),Gt=jt.indexOf(f);if(Gt>-1&&jt.splice(Gt,1),st==="edge"){var Ht=I.get("v"+st+"s"),ee=Ht.indexOf(f);ee>-1&&Ht.splice(ee,1)}var ae=f.get("id");delete I.get("itemMap")[ae];var je=I.get("comboTrees"),Fe=f.get("id");if(st==="node"){var Ue=f.getModel().comboId;if(je){var Ke=je,bn=!1;je.forEach(function(ur){bn||di(ur,function(Or){if(Or.id===Fe&&Ke){var ei=Ke.indexOf(Or);return Ke.splice(ei,1),bn=!0,!1}return Ke=Or.children,!0})})}for(var wn=(sr=f.getEdges()).length-1;wn>=0;wn--)I.removeItem(sr[wn],!1);Ue&&I.updateCombo(Ue)}else if(st==="combo"){var Nn,Bn=f.getModel().parentId,Fn=!1;(je||[]).forEach(function(ur){Fn||di(ur,function(Or){return Or.id!==Fe||(Nn=Or,Fn=!0,!1)})}),Nn.removed=!0,Nn&&Nn.children&&Nn.children.forEach(function(ur){u.removeItem(ur.id)});var sr;for(wn=(sr=f.getEdges()).length;wn>=0;wn--)I.removeItem(sr[wn],!1);Bn&&I.updateCombo(Bn)}f.destroy(),I.emit("afterremoveitem",{item:W})}},kt.prototype.setItemState=function(f,u,I){var W=this.graph,st=u;Object(n.x)(I)&&(st=u+":"+I),f.hasState(st)===I&&I||Object(n.x)(I)&&f.hasState(st)||(W.emit("beforeitemstatechange",{item:f,state:st,enabled:I}),f.setState(u,I),W.autoPaint(),W.emit("afteritemstatechange",{item:f,state:st,enabled:I}))},kt.prototype.priorityState=function(f,u){var I=this.graph,W=f;Object(n.x)(f)&&(W=I.findById(f)),this.setItemState(W,u,!1),this.setItemState(W,u,!0)},kt.prototype.clearItemStates=function(f,u){var I=this.graph;Object(n.x)(f)&&(f=I.findById(f)),I.emit("beforeitemstatesclear",{item:f,states:u}),f.clearStates(u),I.emit("afteritemstatesclear",{item:f,states:u})},kt.prototype.refreshItem=function(f){var u=this.graph;Object(n.x)(f)&&(f=u.findById(f)),u.emit("beforeitemrefresh",{item:f}),f.refresh(),u.emit("afteritemrefresh",{item:f})},kt.prototype.addCombos=function(f,u){var I=this,W=this.graph;(f||[]).forEach(function(jt){ea(jt,function(Gt){var Ht;return u.forEach(function(ee){ee.id===Gt.id&&(ee.children=Gt.children,ee.depth=Gt.depth,Ht=ee)}),Ht&&I.addItem("combo",Ht),!0})});var st=W.get("comboGroup");st&&st.sort()},kt.prototype.changeItemVisibility=function(f,u){var I=this,W=this.graph;if(Object(n.x)(f)&&(f=W.findById(f)),f){if(W.emit("beforeitemvisibilitychange",{item:f,visible:u}),f.changeVisibility(u),f.getType&&f.getType()==="node"){var st=f.getEdges();Object(n.f)(st,function(ae){(!u||ae.get("source").isVisible()&&ae.get("target").isVisible())&&I.changeItemVisibility(ae,u)})}else if(f.getType&&f.getType()==="combo"){var jt=W.get("comboTrees"),Gt=f.get("id"),Ht=[],ee=!1;(jt||[]).forEach(function(ae){ee||ae.children&&ae.children.length!==0&&di(ae,function(je){return je.id!==Gt||(Ht=je.children,ee=!0,!1)})}),Ht&&Ht.forEach(function(ae){var je=W.findById(ae.id);I.changeItemVisibility(je,u)}),st=f.getEdges(),Object(n.f)(st,function(ae){(!u||ae.get("source").isVisible()&&ae.get("target").isVisible())&&I.changeItemVisibility(ae,u)})}return W.emit("afteritemvisibilitychange",{item:f,visible:u}),f}console.warn("The item to be shown or hidden does not exist!")},kt.prototype.destroy=function(){this.graph=null,this.destroyed=!0},kt}(),Aa=null,To=function(){function kt(f){this.graph=f,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return kt.checkCache=function(f,u,I){if(I[u]){var W=I[u].indexOf(f);W>=0&&I[u].splice(W,1)}},kt.cacheState=function(f,u,I){I[u]||(I[u]=[]),I[u].push(f)},kt.prototype.updateState=function(f,u,I){var W=this,st=kt.checkCache,jt=kt.cacheState;if(!f.destroyed){var Gt=this.cachedStates,Ht=Gt.enabled,ee=Gt.disabled;I?(st(f,u,ee),jt(f,u,Ht)):(st(f,u,Ht),jt(f,u,ee)),Aa&&clearTimeout(Aa),Aa=setTimeout(function(){Aa=null,W.updateGraphStates()},16)}},kt.prototype.updateStates=function(f,u,I){var W=this;Object(n.x)(u)?this.updateState(f,u,I):u.forEach(function(st){W.updateState(f,st,I)})},kt.prototype.updateGraphStates=function(){var f=this.graph.get("states"),u=this.cachedStates;Object(n.f)(u.disabled,function(I,W){f[W]&&(f[W]=f[W].filter(function(st){return I.indexOf(st)<0&&!I.destroyed}))}),Object(n.f)(u.enabled,function(I,W){if(f[W]){var st={};f[W].forEach(function(jt){jt.destroyed||(st[jt.get("id")]=!0)}),I.forEach(function(jt){if(!jt.destroyed){var Gt=jt.get("id");st[Gt]||(st[Gt]=!0,f[W].push(jt))}})}else f[W]=I}),this.graph.emit("graphstatechange",{states:f}),this.cachedStates={enabled:{},disabled:{}}},kt.prototype.destroy=function(){this.graph=null,this.cachedStates=null,Aa&&clearTimeout(Aa),Aa=null,this.destroyed=!0},kt}(),vs=function(f,u){return f&&u?f.replace(/\\?\{([^{}]+)\}/g,function(I,W){if(I.charAt(0)==="\\")return I.slice(1);var st=u[W];return st===0&&(st="0"),st||""}):f},Ns=function(f){var u=[];if(f.length<2)throw new Error("point length must largn than 2, now it's "+f.length);for(var I=0,W=f;I<W.length;I++){var st=W[I],jt=st.x,Gt=st.y;u.push(jt),u.push(Gt)}var Ht=Object(F.a)(u);return Ht.unshift(["M",f[0].x,f[0].y]),Ht},ts=function(f,u,I,W){I===void 0&&(I=0),W===void 0&&(W=0);var st={x:(1-I)*f.x+I*u.x,y:(1-I)*f.y+I*u.y},jt=[0,0];Yt.c.normalize(jt,[u.x-f.x,u.y-f.y]),jt&&(jt[0]||jt[1])||(jt=[0,0]);var Gt=[-jt[1]*W,jt[0]*W];return st.x+=Gt[0],st.y+=Gt[1],st},Ls=function(f,u){var I=f.length;if(!I)return"";for(var W="",st=0;st<I;st++){var jt=f[st];W+=vs(st===0?"M{x} {y}":"L{x} {y}",jt)}return u&&(W+="Z"),W},Ho=function(f){var u=[];return f.forEach(function(I){if(I[0]!=="A")for(var W=1;W<I.length;W+=2)u.push([I[W],I[W+1]]);else{var st=I.length;u.push([I[st-2],I[st-1]])}}),u},es=function(f){if(f.length<2)throw new Error("point length must largn than 2, now it's "+f.length);var u=f[0],I=f[1],W=f[f.length-1],st=f[f.length-2];f.unshift(W),f.unshift(st),f.push(u),f.push(I);for(var jt=[],Gt=1;Gt<f.length-2;Gt+=1){var Ht=f[Gt-1].x,ee=f[Gt-1].y,ae=f[Gt].x,je=f[Gt].y,Fe=f[Gt+1].x,Ue=f[Gt+1].y,Ke=ae+(Fe-Ht)/6,bn=je+(Ue-ee)/6,wn=Fe-((Gt!==f.length-2?f[Gt+2].x:Fe)-ae)/6,Nn=Ue-((Gt!==f.length-2?f[Gt+2].y:Ue)-je)/6;jt.push(["C",Ke,bn,wn,Nn,Fe,Ue])}return jt.unshift(["M",W.x,W.y]),jt},Bs=function(f,u){return Yt.c.scale([0,0],Yt.c.normalize([0,0],f),u)},gu=function(f,u){var I=[f[1]-u[1],u[0]-f[0]],W=Math.sqrt(I[0]*I[0]+I[1]*I[1]);if(W===0)throw new Error("p0 should not be equal to p1");return[I[0]/W,I[1]/W]},Do=function(f,u){return[u[0]-f[0],u[1]-f[1]]};function ps(kt,f){if(!kt||kt.length<1)return"";if(kt.length===1)return function(Ht){var ee=[Ht[0][0],Ht[0][1]-f],ae=[Ht[0][0],Ht[0][1]+f];return"M "+ee+" A "+f+","+f+",0,0,0,"+ae+" A "+f+","+f+",0,0,0,"+ee}(kt);if(kt.length===2)return function(Ht){var ee=Yt.c.scale([0,0],gu(Ht[0],Ht[1]),f),ae=Yt.c.scale([0,0],ee,-1),je=Yt.c.add([0,0],Ht[0],ee),Fe=Yt.c.add([0,0],Ht[1],ee),Ue=Yt.c.add([0,0],Ht[1],ae),Ke=Yt.c.add([0,0],Ht[0],ae);return"M "+je+" L "+Fe+" A "+[f,f,"0,0,0",Ue].join(",")+" L "+Ke+" A "+[f,f,"0,0,0",je].join(",")}(kt);for(var u=new Array(kt.length),I=0;I<u.length;++I){var W=I===0?kt[kt.length-1]:kt[I-1],st=kt[I],jt=Yt.c.scale([0,0],gu(W,st),f);u[I]=[Yt.c.add([0,0],W,jt),Yt.c.add([0,0],st,jt)]}var Gt="A "+[f,f,"0,0,0,"].join(",");return(u=u.map(function(Ht,ee){var ae="";return ee===0&&(ae="M "+u[u.length-1][1]+" "),ae+=Gt+Ht[0]+" L "+Ht[1]})).join(" ")}function yu(kt,f){var u,I,W,st=kt.length;if(!kt||st<1)return"";if(st===1)return I=[(u=kt)[0][0],u[0][1]-f],W=[u[0][0],u[0][1]+f],"M "+I+" A "+[f,f,"0,0,0",W].join(",")+" A "+[f,f,"0,0,0",I].join(",");if(st===2)return function(ae){var je=Do(ae[0],ae[1]),Fe=Bs(je,f),Ue=Yt.c.add([0,0],ae[0],Yt.c.scale([0,0],Fe,-1)),Ke=Yt.c.add([0,0],ae[1],Fe),bn=1.2*f,wn=Bs(Yt.c.normalize([0,0],je),bn),Nn=Yt.c.scale([0,0],wn,-1),Bn=Yt.c.add([0,0],Ue,Nn),Fn=Yt.c.add([0,0],Ke,Nn),sr=Yt.c.add([0,0],Ue,wn);return"M "+Ue+" C "+[Bn,Fn,Ke].join(",")+" S "+[sr,Ue].join(",")+" Z"}(kt);for(var jt=kt.map(function(ae,je){var Fe=kt[(je+1)%st];return{p:ae,v:Yt.c.normalize([0,0],Do(ae,Fe))}}),Gt=0;Gt<jt.length;++Gt){var Ht=Gt>0?Gt-1:st-1,ee=Yt.c.normalize([0,0],Yt.c.add([0,0],jt[Ht].v,Yt.c.scale([0,0],jt[Gt].v,-1)));jt[Gt].p=Yt.c.add([0,0],jt[Gt].p,Yt.c.scale([0,0],ee,f))}return jt.map(function(ae){var je=ae.p;return{x:je[0],y:je[1]}})}var Fs=function(f,u,I){return(f.y-I.y)*(u.x-I.x)-(f.x-I.x)*(u.y-I.y)},mr=function(f){var u=f.map(function(jt){return{x:jt.getModel().x,y:jt.getModel().y}});if(u.sort(function(jt,Gt){return jt.x===Gt.x?jt.y-Gt.y:jt.x-Gt.x}),u.length===1)return u;for(var I=[],W=0;W<u.length;W++){for(;I.length>=2&&Fs(I[I.length-2],I[I.length-1],u[W])<=0;)I.pop();I.push(u[W])}var st=[];for(W=u.length-1;W>=0;W--){for(;st.length>=2&&Fs(st[st.length-2],st[st.length-1],u[W])<=0;)st.pop();st.push(u[W])}return st.pop(),I.pop(),I.concat(st)},Gs={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function Eo(kt,f,u){var I=!1,W=function(Ht,ee){return f.cells[Ht+ee*f.width]},st=function(Ht,ee){var ae=0;return W(Ht-1,ee-1)>=u&&(ae+=1),W(Ht,ee-1)>u&&(ae+=2),W(Ht-1,ee)>u&&(ae+=4),W(Ht,ee)>u&&(ae+=8),ae},jt=function(Ht,ee){for(var ae,je,Fe=Ht,Ue=ee,Ke=0;Ke<f.width*f.height;Ke++){if(ae=Fe,je=Ue,kt.findIndex(function(wn){return wn.x===Fe&&wn.y===Ue})>-1){if(kt[0].x===Fe&&kt[0].y===Ue)return!0}else kt.push({x:Fe,y:Ue});var bn=st(Fe,Ue);switch(bn){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:Fe++;break;case 12:case 14:case 4:Fe--;break;case 6:ae===0&&(je===-1?Fe-=1:Fe+=1);break;case 1:case 13:case 5:Ue--;break;case 9:ae===1&&(je===0?Ue-=1:Ue+=1);break;case 10:case 8:case 11:Ue++;break;default:return console.warn("Marching squares invalid state: "+bn),!0}}};this.march=function(){for(var Gt=0;Gt<f.width&&!I;Gt+=1)for(var Ht=0;Ht<f.height&&!I;Ht+=1)W(Gt,Ht)>u&&st(Gt,Ht)!==15&&(I=jt(Gt,Ht));return I}}var ma=function(f,u){var I=Number.POSITIVE_INFINITY,W=null;return f.forEach(function(st){var jt=Pe(st,u);jt>=0&&jt<I&&(W=st,I=jt)}),W};function mu(kt,f,u,I,W){var st=function(jt,Gt,Ht){var ee=null,ae=Number.POSITIVE_INFINITY;return Gt.forEach(function(je){var Fe={x:jt.getModel().x,y:jt.getModel().y},Ue={x:je.getModel().x,y:je.getModel().y},Ke=Le(Fe,Ue),bn=new hn(Fe.x,Fe.y,Ue.x,Ue.y),wn=Ht.reduce(function(Nn,Bn){return Pe(Bn,bn)>0?Nn+1:Nn},0);Ke*Math.pow(wn+1,2)<ae&&(ee=je,ae=Ke*Math.pow(wn+1,2))}),ee}(kt,u,f);return st===null?[]:function(jt){for(var Gt=[];jt.length>0;){var Ht=jt.pop();if(jt.length===0){Gt.push(Ht);break}var ee=jt.pop(),ae=new hn(Ht.x1,Ht.y1,ee.x2,ee.y2);ma(f,ae)?(Gt.push(Ht),jt.push(ee)):jt.push(ae)}return Gt}(function(jt,Gt,Ht,ee){var ae=[],je=[];je.push(jt);for(var Fe=!0,Ue=0,Ke=function(Bn,Fn){var sr=!1;return Fn.forEach(function(ur){sr||(en(Bn,{x:ur.x1,y:ur.y1})||en(Bn,{x:ur.x2,y:ur.y2}))&&(sr=!0)}),sr},bn=function(Bn,Fn){for(var sr=0,ur=Fn;sr<ur.length;sr++){var Or=ur[sr].getBBox(),ei=[[Or.x,Or.y],[Or.x+Or.width,Or.y],[Or.x,Or.y+Or.height],[Or.x+Or.width,Or.y+Or.height]];if(tn(ei,Bn.x,Bn.y))return!0}return!1};Fe&&Ue<Ht;){Fe=!1;for(var wn=function(){var Bn=je.pop(),Fn=ma(Gt,Bn);if(Fn){var sr=Sn(Fn,Bn),ur=sr[0];if(sr[1]===2){var Or=function(Ci){for(var kr=ee,yi=fe(Fn,kr,ur,Ci),oo=Ke(yi,je)||Ke(yi,ae),so=bn(yi,Gt);!oo&&so&&kr>=1;)yi=fe(Fn,kr/=1.5,ur,Ci),oo=Ke(yi,je)||Ke(yi,ae),so=bn(yi,Gt);!yi||oo||Ci&&so||(je.push(new hn(Bn.x1,Bn.y1,yi.x,yi.y)),je.push(new hn(yi.x,yi.y,Bn.x2,Bn.y2)),Fe=!0)};Or(!0),Fe||Or(!1)}}Fe||ae.push(Bn),Ue+=1};!Fe&&je.length;)wn()}for(;je.length;)ae.push(je.pop());return ae}(new hn(kt.getModel().x,kt.getModel().y,st.getModel().x,st.getModel().y),f,I,W))}var bu=function(f,u,I){var W=Object.assign(Gs,I),st=le(f.map(function(Or){return{x:Or.getModel().x,y:Or.getModel().y}}));f=f.sort(function(Or,ei){return Le({x:Or.getModel().x,y:Or.getModel().y},st)-Le({x:ei.getModel().x,y:ei.getModel().y},st)});var jt=[],Gt=[];f.forEach(function(Or){mu(Or,u,jt,W.maxRoutingIterations,W.morphBuffer).forEach(function(ei){Gt.push(ei)}),jt.push(Or)});for(var Ht,ee,ae,je,Fe,Ue=function(Or,ei,Ci){var kr={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},yi=[];Or.forEach(function(lo){yi.push(lo.getBBox())}),ei.forEach(function(lo){yi.push(lo.getBBox())});for(var oo=0,so=yi;oo<so.length;oo++){var co=so[oo];kr.minX=(co.minX<kr.minX?co.minX:kr.minX)-Ci,kr.minY=(co.minY<kr.minY?co.minY:kr.minY)-Ci,kr.maxX=(co.maxX>kr.maxX?co.maxX:kr.maxX)+Ci,kr.maxY=(co.maxY>kr.maxY?co.maxY:kr.maxY)+Ci}return kr.width=kr.maxX-kr.minX,kr.height=kr.maxY-kr.minY,kr.x=kr.minX,kr.y=kr.minY,kr}(f,Gt,W.nodeR0),Ke=(Ht=Ue.width,ee=Ue.height,ae=W.pixelGroupSize,je=Math.ceil(Ht/ae),Fe=Math.ceil(ee/ae),{cells:new Float32Array(Math.max(0,je*Fe)).fill(0),width:je,height:Fe}),bn=[],wn=[],Nn=0;Nn<W.maxMarchingIterations;Nn++)if(Jn(f,u,Gt,Ue,Ke,W),wn=[],new Eo(bn=[],Ke,W.threshold).march()){var Bn=bn.map(function(Or){return{x:Math.round(Or.x*W.pixelGroupSize+Ue.minX),y:Math.round(Or.y*W.pixelGroupSize+Ue.minY)}});if(Bn){var Fn=Bn.length;if(W.skip>1)for(Fn=Math.floor(Bn.length/W.skip);Fn<3&&W.skip>1;)W.skip-=1,Fn=Math.floor(Bn.length/W.skip);for(var sr=0,ur=0;ur<Fn;ur+=1,sr+=W.skip)wn.push({x:Bn[sr].x,y:Bn[sr].y})}if(wn&&function(){for(var Or=0,ei=f;Or<ei.length;Or++){var Ci=ei[Or],kr=wn.map(function(yi){return[yi.x,yi.y]});if(!tn(kr,Ci.getBBox().centerX,Ci.getBBox().centerY))return!1}return!0}())return wn;if(W.threshold*=.9,Nn<=.5*W.maxMarchingIterations)W.memberInfluenceFactor*=1.2,W.edgeInfluenceFactor*=1.2;else{if(!(W.nonMemberInfluenceFactor!==0&&u.length>0))break;W.nonMemberInfluenceFactor*=.8}}return wn};function Jn(kt,f,u,I,W,st){function jt(Fe,Ue){var Ke=Math.floor((Fe-Ue)/st.pixelGroupSize);return Ke<0?0:Ke}function Gt(Fe,Ue){return Fe*st.pixelGroupSize+Ue}var Ht=(st.nodeR0-st.nodeR1)*(st.nodeR0-st.nodeR1),ee=(st.edgeR0-st.edgeR1)*(st.edgeR0-st.edgeR1),ae=function(Ue,Ke){return[Math.min(jt(Ue.minX,Ke+I.minX),W.width),Math.min(jt(Ue.minY,Ke+I.minY),W.height),Math.min(jt(Ue.maxX,-Ke+I.minX),W.width),Math.min(jt(Ue.maxY,-Ke+I.minY),W.height)]},je=function(Ue,Ke){for(var bn=Ue.getBBox(),wn=ae(bn,st.nodeR1),Nn=wn[0],Bn=wn[1],Fn=wn[2],sr=wn[3],ur=Bn;ur<sr;ur+=1)for(var Or=Nn;Or<Fn;Or+=1)if(!(Ke<0&&W[Or+ur*W.width]<=0)){var ei=Gt(Or,I.minX),Ci=Gt(ur,I.minY),kr=un({x:ei,y:Ci},{x:bn.minX,y:bn.minY,width:bn.width,height:bn.height});if(kr<Math.pow(st.nodeR1,2)){var yi=Math.sqrt(kr)-st.nodeR1;W.cells[Or+ur*W.width]+=Ke*yi*yi}}};st.nodeInfluenceFactor&&kt.forEach(function(Fe){je(Fe,st.nodeInfluenceFactor/Ht)}),st.edgeInfluenceFactor&&u.forEach(function(Fe){(function(Ue,Ke){for(var bn=Ue.getBBox(),wn=ae(bn,st.edgeR1),Nn=wn[0],Bn=wn[1],Fn=wn[2],sr=wn[3],ur=Bn;ur<sr;ur+=1)for(var Or=Nn;Or<Fn;Or+=1)if(!(Ke<0&&W.cells[Or+ur*W.width]<=0)){var ei=Gt(Or,I.minX),Ci=Gt(ur,I.minY),kr=Be({x:ei,y:Ci},Ue);if(kr<Math.pow(st.edgeR1,2)){var yi=Math.sqrt(kr)-st.edgeR1;W.cells[Or+ur*W.width]+=Ke*yi*yi}}})(Fe,st.edgeInfluenceFactor/ee)}),st.negativeNodeInfluenceFactor&&f.forEach(function(Fe){je(Fe,st.negativeNodeInfluenceFactor/Ht)})}function fe(kt,f,u,I){var W=kt.getBBox(),st=u[0],jt=u[1],Gt=u[2],Ht=u[3],ee={topLeft:{x:W.minX-f,y:W.minY-f},topRight:{x:W.maxX+f,y:W.minY-f},bottomLeft:{x:W.minX-f,y:W.maxY+f},bottomRight:{x:W.maxX+f,y:W.maxY+f}},ae=W.height*W.width;function je(Fe,Ue){return W.width*(.5*(Fe.y-W.minY+(Ue.y-W.minY)))}if(jt)return st?I?ee.topLeft:ee.bottomRight:Gt?I?ee.bottomLeft:ee.topRight:je(jt,Ht)<.5*ae?jt.y>Ht.y?I?ee.topLeft:ee.bottomRight:I?ee.topRight:ee.bottomLeft:jt.y<Ht.y?I?ee.bottomLeft:ee.topRight:I?ee.bottomRight:ee.topLeft;if(Ht){if(st)return I?ee.topRight:ee.bottomLeft;if(Gt)return I?ee.bottomRight:ee.topLeft}return je(st,Gt)<.5*ae?st.x>Gt.x?I?ee.topLeft:ee.bottomRight:I?ee.bottomLeft:ee.topRight:st.x<Gt.x?I?ee.topRight:ee.bottomLeft:I?ee.bottomRight:ee.topLeft}var Ca=function(){function kt(f,u){this.cfg=Object(n.e)(this.getDefaultCfg(),u),this.graph=f,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(I){return Object(n.x)(I)?f.findById(I):I}),this.nonMembers=this.cfg.nonMembers.map(function(I){return Object(n.x)(I)?f.findById(I):I}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return kt.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},kt.prototype.setPadding=function(){var f=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+f:10+f,this.cfg.bubbleCfg={nodeR0:this.padding-f,nodeR1:this.padding-f,morphBuffer:this.padding-f}},kt.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},kt.prototype.calcPath=function(f,u){var I,W,st;switch(this.type){case"round-convex":st=ps((I=mr(f)).map(function(jt){return[jt.x,jt.y]}),this.padding),W=Object(F.b)(st);break;case"smooth-convex":(I=mr(f)).length===2?(st=ps(I.map(function(jt){return[jt.x,jt.y]}),this.padding),W=Object(F.b)(st)):I.length>2&&(st=yu(I.map(function(jt){return[jt.x,jt.y]}),this.padding),W=es(st));break;case"bubble":W=(I=bu(f,u,this.cfg.bubbleCfg)).length>=2&&es(I)}return W},kt.prototype.render=function(){this.group.addShape("path",{attrs:Object(nt.a)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id}),this.group.toBack()},kt.prototype.addMember=function(f){if(f){Object(n.x)(f)&&(f=this.graph.findById(f)),this.members.push(f);var u=this.nonMembers.indexOf(f);return u>-1&&this.nonMembers.splice(u,1),this.updateData(this.members,this.nonMembers),!0}},kt.prototype.addNonMember=function(f){if(f){Object(n.x)(f)&&(f=this.graph.findById(f)),this.nonMembers.push(f);var u=this.members.indexOf(f);return u>-1&&this.members.splice(u,1),this.updateData(this.members,this.nonMembers),!0}},kt.prototype.removeMember=function(f){if(f){Object(n.x)(f)&&(f=this.graph.findById(f));var u=this.members.indexOf(f);return u>-1&&(this.members.splice(u,1),this.updateData(this.members,this.nonMembers),!0)}},kt.prototype.removeNonMember=function(f){if(f){Object(n.x)(f)&&(f=this.graph.findById(f));var u=this.nonMembers.indexOf(f);return u>-1&&(this.nonMembers.splice(u,1),this.updateData(this.members,this.nonMembers),!0)}},kt.prototype.updateData=function(f,u){var I=this;this.group.findById(this.id).remove(),f&&(this.members=f.map(function(W){return Object(n.x)(W)?I.graph.findById(W):W})),u&&(this.nonMembers=u.map(function(W){return Object(n.x)(W)?I.graph.findById(W):W})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},kt.prototype.updateStyle=function(f){this.group.findById(this.id).attr(Object(nt.a)({},f))},kt.prototype.updateCfg=function(f){var u=this;this.cfg=Object(n.e)(this.cfg,f),this.id=this.cfg.id,this.group=this.cfg.group,f.members&&(this.members=this.cfg.members.map(function(I){return Object(n.x)(I)?u.graph.findById(I):I})),f.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(I){return Object(n.x)(I)?u.graph.findById(I):I})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},kt.prototype.contain=function(f){var u,I,W=this,st=(u=Object(n.x)(f)?this.graph.findById(f):f).getKeyShape();if(u.get("type")==="path")I=Ho(st.attr("path"));else{var jt=st.getCanvasBBox();I=[[jt.minX,jt.minY],[jt.maxX,jt.minY],[jt.maxX,jt.maxY],[jt.minX,jt.maxY]]}return I=I.map(function(Gt){var Ht=W.graph.getPointByCanvas(Gt[0],Gt[1]);return[Ht.x,Ht.y]}),ln(I,Ho(this.path))},kt.prototype.destroy=function(){this.group.remove(),this.cfg=null},kt}(),Us=Yt.a.transform;(function(kt){function f(u){var I=kt.call(this)||this;return I.cfg=Object(n.e)(I.getDefaultCfg(),u),I.init(),I.animating=!1,I.destroyed=!1,I.cfg.enabledStack&&(I.undoStack=new Se.Stack(I.cfg.maxStep),I.redoStack=new Se.Stack(I.cfg.maxStep)),I}Object(nt.b)(f,kt),f.prototype.init=function(){this.initCanvas();var u=new Go(this),I=new lr(this),W=new Vo(this),st=new To(this);this.set({viewController:u,modeController:I,itemController:W,stateController:st}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},f.prototype.initGroups=function(){var u=this.get("canvas"),I=this.get("canvas").get("el").id,W=u.addGroup({id:I+"-root",className:Pn.rootContainerClassName});if(this.get("groupByTypes")){var st=W.addGroup({id:I+"-edge",className:Pn.edgeContainerClassName}),jt=W.addGroup({id:I+"-node",className:Pn.nodeContainerClassName}),Gt=W.addGroup({id:I+"-combo",className:Pn.comboContainerClassName});Gt.toBack(),this.set({nodeGroup:jt,edgeGroup:st,comboGroup:Gt})}var Ht=W.addGroup({id:I+"-delegate",className:Pn.delegateContainerClassName});this.set({delegateGroup:Ht}),this.set("group",W)},f.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[]}},f.prototype.set=function(u,I){return Object(n.w)(u)?this.cfg=Object(nt.a)(Object(nt.a)({},this.cfg),u):this.cfg[u]=I,this},f.prototype.get=function(u){return this.cfg[u]},f.prototype.getGroup=function(){return this.get("group")},f.prototype.getContainer=function(){return this.get("container")},f.prototype.getMinZoom=function(){return this.get("minZoom")},f.prototype.setMinZoom=function(u){return this.set("minZoom",u)},f.prototype.getMaxZoom=function(){return this.get("maxZoom")},f.prototype.setMaxZoom=function(u){return this.set("maxZoom",u)},f.prototype.getWidth=function(){return this.get("width")},f.prototype.getHeight=function(){return this.get("height")},f.prototype.clearItemStates=function(u,I){Object(n.x)(u)&&(u=this.findById(u));var W=this.get("itemController");I||(I=u.get("states")),W.clearItemStates(u,I),this.get("stateController").updateStates(u,I,!1)},f.prototype.node=function(u){typeof u=="function"&&this.set("nodeMapper",u)},f.prototype.edge=function(u){typeof u=="function"&&this.set("edgeMapper",u)},f.prototype.combo=function(u){typeof u=="function"&&this.set("comboMapper",u)},f.prototype.findById=function(u){return this.get("itemMap")[u]},f.prototype.find=function(u,I){var W,st=this.get(u+"s");return Object(n.f)(st,function(jt,Gt){if(I(jt,Gt))return W=jt}),W},f.prototype.findAll=function(u,I){var W=[];return Object(n.f)(this.get(u+"s"),function(st,jt){I(st,jt)&&W.push(st)}),W},f.prototype.findAllByState=function(u,I){return this.findAll(u,function(W){return W.hasState(I)})},f.prototype.translate=function(u,I){var W=this.get("group"),st=Object(n.c)(W.getMatrix());st||(st=[1,0,0,0,1,0,0,0,1]),st=Us(st,[["t",u,I]]),W.setMatrix(st),this.emit("viewportchange",{action:"translate",matrix:W.getMatrix()}),this.autoPaint()},f.prototype.moveTo=function(u,I){var W=this.get("group");ce(W,{x:u,y:I}),this.emit("viewportchange",{action:"move",matrix:W.getMatrix()})},f.prototype.fitView=function(u){u&&this.set("fitViewPadding",u),this.get("viewController").fitView(),this.autoPaint()},f.prototype.fitCenter=function(){this.get("viewController").fitCenter(),this.autoPaint()},f.prototype.addBehaviors=function(u,I){return this.get("modeController").manipulateBehaviors(u,I,!0),this},f.prototype.removeBehaviors=function(u,I){return this.get("modeController").manipulateBehaviors(u,I,!1),this},f.prototype.updateBehavior=function(u,I,W){return this.get("modeController").updateBehavior(u,I,W),this},f.prototype.zoom=function(u,I){var W=this.get("group"),st=Object(n.c)(W.getMatrix()),jt=this.get("minZoom"),Gt=this.get("maxZoom");st||(st=[1,0,0,0,1,0,0,0,1]),st=Us(st,I?[["t",-I.x,-I.y],["s",u,u],["t",I.x,I.y]]:[["s",u,u]]),jt&&st[0]<jt||Gt&&st[0]>Gt||(W.setMatrix(st),this.emit("viewportchange",{action:"zoom",matrix:st}),this.autoPaint())},f.prototype.zoomTo=function(u,I){var W=u/this.getZoom();this.zoom(W,I)},f.prototype.focusItem=function(u,I,W){var st=this.get("viewController"),jt=!1;I?jt=!0:I===void 0&&(jt=this.get("animate"));var Gt={};W?Gt=W:W===void 0&&(Gt=this.get("animateCfg")),st.focus(u,jt,Gt),this.autoPaint()},f.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},f.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},f.prototype.getPointByClient=function(u,I){return this.get("viewController").getPointByClient(u,I)},f.prototype.getClientByPoint=function(u,I){return this.get("viewController").getClientByPoint(u,I)},f.prototype.getPointByCanvas=function(u,I){return this.get("viewController").getPointByCanvas(u,I)},f.prototype.getCanvasByPoint=function(u,I){return this.get("viewController").getCanvasByPoint(u,I)},f.prototype.showItem=function(u,I){I===void 0&&(I=!0);var W=this.get("itemController").changeItemVisibility(u,!0);if(I&&this.get("enabledStack")){var st=W.getID(),jt={},Gt={};switch(W.getType()){case"node":jt.nodes=[{id:st,visible:!1}],Gt.nodes=[{id:st,visible:!0}];break;case"edge":jt.nodes=[{id:st,visible:!1}],Gt.edges=[{id:st,visible:!0}];break;case"combo":jt.nodes=[{id:st,visible:!1}],Gt.combos=[{id:st,visible:!0}]}this.pushStack("visible",{before:jt,after:Gt})}},f.prototype.hideItem=function(u,I){I===void 0&&(I=!0);var W=this.get("itemController").changeItemVisibility(u,!1);if(I&&this.get("enabledStack")){var st=W.getID(),jt={},Gt={};switch(W.getType()){case"node":jt.nodes=[{id:st,visible:!0}],Gt.nodes=[{id:st,visible:!1}];break;case"edge":jt.nodes=[{id:st,visible:!0}],Gt.edges=[{id:st,visible:!1}];break;case"combo":jt.nodes=[{id:st,visible:!0}],Gt.combos=[{id:st,visible:!1}]}this.pushStack("visible",{before:jt,after:Gt})}},f.prototype.refreshItem=function(u){this.get("itemController").refreshItem(u)},f.prototype.setAutoPaint=function(u){this.set("autoPaint",u),this.get("canvas").set("autoDraw",u)},f.prototype.remove=function(u,I){I===void 0&&(I=!0),this.removeItem(u,I)},f.prototype.removeItem=function(u,I){I===void 0&&(I=!0);var W=u;if(Object(n.x)(u)&&(W=this.findById(u)),!W&&Object(n.x)(u))console.warn("The item to be removed does not exist!");else if(W){var st="";if(W.getType&&(st=W.getType()),I&&this.get("enabledStack")){var jt=Object(nt.a)(Object(nt.a)({},W.getModel()),{itemType:st}),Gt={};switch(st){case"node":Gt.nodes=[jt],Gt.edges=[];for(var Ht=W.getEdges(),ee=Ht.length-1;ee>=0;ee--)Gt.edges.push(Object(nt.a)(Object(nt.a)({},Ht[ee].getModel()),{itemType:"edge"}));break;case"edge":Gt.edges=[jt];break;case"combo":Gt.combos=[jt]}this.pushStack("delete",{before:Gt,after:{}})}if(st==="node"&&W.getModel().comboId&&this.updateComboTree(W),this.get("itemController").removeItem(W),st==="combo"){var ae=Rs(this.get("comboTrees"));this.set("comboTrees",ae)}}},f.prototype.addItem=function(u,I,W,st){W===void 0&&(W=!0),st===void 0&&(st=!0);var jt=this.get("comboSorted");this.set("comboSorted",jt&&!st);var Gt=this.get("itemController");if(!I.id||!this.findById(I.id)){var Ht,ee=this.get("comboTrees");if(ee||(ee=[]),u==="combo"){var ae=this.get("itemMap"),je=!1;if(ee.forEach(function(sr){je||ea(sr,function(ur){if(I.parentId===ur.id){je=!0;var Or=Object(nt.a)({id:I.id,depth:ur.depth+2},I);ur.children?ur.children.push(Or):ur.children=[Or],I.depth=Or.depth,Ht=Gt.addItem(u,I)}var ei=ae[ur.id];return je&&ei&&ei.getType&&ei.getType()==="combo"&&Gt.updateCombo(ei,ur.children),!0})}),!je){var Fe=Object(nt.a)({id:I.id,depth:0},I);I.depth=Fe.depth,ee.push(Fe),Ht=Gt.addItem(u,I)}this.set("comboTrees",ee)}else if(u==="node"&&Object(n.x)(I.comboId)&&ee){var Ue;if((Ue=this.findById(I.comboId))&&Ue.getType&&Ue.getType()!=="combo")return void console.warn("'"+I.comboId+"' is a not id of a combo in the graph, the node will be added without combo.");Ht=Gt.addItem(u,I);var Ke=this.get("itemMap"),bn=!1,wn=!1;(ee||[]).forEach(function(sr){wn||bn||ea(sr,function(ur){if(ur.id===I.id)return wn=!0,!1;if(I.comboId===ur.id&&!wn){bn=!0;var Or=Object(n.c)(I);Or.itemType="node",ur.children?ur.children.push(Or):ur.children=[Or],I.depth=ur.depth+1}return bn&&Ke[ur.id].getType&&Ke[ur.id].getType()==="combo"&&Gt.updateCombo(Ke[ur.id],ur.children),!0})})}else Ht=Gt.addItem(u,I);(u==="node"&&I.comboId||u==="combo"&&I.parentId)&&(Ue=this.findById(I.comboId||I.parentId))&&Ue.addChild(Ht);var Nn=this.get("combos");if(Nn&&Nn.length>0&&this.sortCombos(),this.autoPaint(),W&&this.get("enabledStack")){var Bn=Object(nt.a)(Object(nt.a)({},Ht.getModel()),{itemType:u}),Fn={};switch(u){case"node":Fn.nodes=[Bn];break;case"edge":Fn.edges=[Bn];break;case"combo":Fn.combos=[Bn]}this.pushStack("add",{before:{},after:Fn})}return Ht}console.warn("This item exists already. Be sure the id %c"+I.id+"%c is unique.","font-size: 20px; color: red;","")},f.prototype.add=function(u,I,W,st){return W===void 0&&(W=!0),st===void 0&&(st=!0),this.addItem(u,I,W,st)},f.prototype.updateItem=function(u,I,W){var st=this;W===void 0&&(W=!0);var jt,Gt=this.get("itemController");jt=Object(n.x)(u)?this.findById(u):u;var Ht=Object(n.c)(jt.getModel()),ee="";jt.getType&&(ee=jt.getType());var ae=Object(nt.d)(jt.getStates());if(ee==="combo"&&Object(n.f)(ae,function(Ke){return st.setItemState(jt,Ke,!1)}),Gt.updateItem(jt,I),ee==="combo"&&Object(n.f)(ae,function(Ke){return st.setItemState(jt,Ke,!0)}),W&&this.get("enabledStack")){var je={nodes:[],edges:[],combos:[]},Fe={nodes:[],edges:[],combos:[]},Ue=Object(nt.a)({id:Ht.id},I);switch(ee){case"node":je.nodes.push(Ht),Fe.nodes.push(Ue);break;case"edge":je.edges.push(Ht),Fe.edges.push(Ue);break;case"combo":je.combos.push(Ht),Fe.combos.push(Ue)}ee==="node"&&je.nodes.push(Ht),this.pushStack("update",{before:je,after:Fe})}},f.prototype.update=function(u,I,W){W===void 0&&(W=!0),this.updateItem(u,I,W)},f.prototype.setItemState=function(u,I,W){Object(n.x)(u)&&(u=this.findById(u)),this.get("itemController").setItemState(u,I,W);var st=this.get("stateController");Object(n.x)(W)?st.updateState(u,I+":"+W,!0):st.updateState(u,I,W)},f.prototype.priorityState=function(u,I){this.get("itemController").priorityState(u,I)},f.prototype.data=function(u){this.set("data",u)},f.prototype.render=function(){var u=this;this.set("comboSorted",!1);var I=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!I)throw new Error("data must be defined first");var W=I.nodes,st=W===void 0?[]:W,jt=I.edges,Gt=jt===void 0?[]:jt,Ht=I.combos,ee=Ht===void 0?[]:Ht;if(this.clear(),this.emit("beforerender"),Object(n.f)(st,function(Ue){u.add("node",Ue,!1,!1)}),ee&&ee.length!==0){var ae=Ri(ee,st);this.set("comboTrees",ae),u.addCombos(ee)}Object(n.f)(Gt,function(Ue){u.add("edge",Ue,!1,!1)});var je=u.get("animate");(u.get("fitView")||u.get("fitCenter"))&&u.set("animate",!1);var Fe=u.get("layoutController");if(Fe){if(Fe.layout(function(){u.get("fitView")?u.fitView():u.get("fitCenter")&&u.fitCenter(),u.autoPaint(),u.emit("afterrender"),(u.get("fitView")||u.get("fitCenter"))&&u.set("animate",je)}),this.destroyed)return}else u.get("fitView")&&u.fitView(),u.get("fitCenter")&&u.fitCenter(),u.emit("afterrender"),u.set("animate",je);this.get("groupByTypes")||(ee&&ee.length!==0?this.sortCombos():I.nodes&&I.edges&&I.nodes.length<I.edges.length?this.getNodes().forEach(function(Ue){Ue.toFront()}):this.getEdges().forEach(function(Ue){Ue.toBack()})),this.get("enabledStack")&&this.pushStack("render")},f.prototype.read=function(u){this.data(u),this.render()},f.prototype.diffItems=function(u,I,W){var st,jt=this,Gt=this.get("itemMap");Object(n.f)(W,function(Ht){if(st=Gt[Ht.id]){if(jt.get("animate")&&u==="node"){var ee=st.getContainer().getMatrix();ee||(ee=[1,0,0,0,1,0,0,0,1]),st.set("originAttrs",{x:ee[6],y:ee[7]})}jt.updateItem(st,Ht,!1)}else st=jt.addItem(u,Ht,!1);st&&I[u+"s"].push(st)})},f.prototype.changeData=function(u,I){I===void 0&&(I=!0);var W=this;if(!u)return this;I&&this.get("enabledStack")&&this.pushStack("changedata",{before:W.save(),after:u}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(Ke){return W.clearItemStates(Ke)}),this.getEdges().map(function(Ke){return W.clearItemStates(Ke)});var st=this.get("canvas"),jt=st.get("localRefresh");st.set("localRefresh",!1),W.get("data")||(W.data(u),W.render());var Gt=this.get("itemMap"),Ht={nodes:[],edges:[]},ee=u.combos;if(ee){var ae=Ri(ee,u.nodes);this.set("comboTrees",ae)}this.diffItems("node",Ht,u.nodes),Object(n.f)(Gt,function(Ke,bn){Gt[bn].getModel().depth=0,Ke.getType&&Ke.getType()==="edge"||(Ke.getType&&Ke.getType()==="combo"?(delete Gt[bn],Ke.destroy()):Ht.nodes.indexOf(Ke)<0&&(delete Gt[bn],W.remove(Ke,!1)))});for(var je=this.getCombos(),Fe=je.length-1;Fe>=0;Fe--)je[Fe].destroyed&&je.splice(Fe,1);ee&&(W.addCombos(ee),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",Ht,u.edges),Object(n.f)(Gt,function(Ke,bn){(!Ke.getType||Ke.getType()!=="node"&&Ke.getType()!=="combo")&&Ht.edges.indexOf(Ke)<0&&(delete Gt[bn],W.remove(Ke,!1))}),this.set({nodes:Ht.nodes,edges:Ht.edges});var Ue=this.get("layoutController");return Ue&&(Ue.changeData(),W.get("animate")&&!Ue.getLayoutType()?W.positionsAnimate():W.autoPaint()),setTimeout(function(){st.set("localRefresh",jt)},16),this},f.prototype.addCombos=function(u){var I=this.get("comboTrees");this.get("itemController").addCombos(I,u)},f.prototype.createCombo=function(u,I){var W=this;this.set("comboSorted",!1);var st,jt="";if(u){if(Object(n.x)(u))jt=u,st={id:u};else{if(!(jt=u.id))return void console.warn("Create combo failed. Please assign a unique string id for the adding combo.");st=u}var Gt=I.map(function(ee){var ae=W.findById(ee),je="";ae.getType&&(je=ae.getType());var Fe={id:ae.getID(),itemType:je};return je==="combo"?Fe.parentId=jt:je==="node"&&(Fe.comboId=jt),Fe});st.children=Gt,this.addItem("combo",st,!1),this.set("comboSorted",!1);var Ht=this.get("comboTrees");(Ht||[]).forEach(function(ee){ea(ee,function(ae){return ae.id!==jt||(ae.itemType="combo",ae.children=Gt,!1)})}),Ht&&this.sortCombos()}},f.prototype.uncombo=function(u){var I=this,W=u;if(Object(n.x)(u)&&(W=this.findById(u)),!W||W.getType&&W.getType()!=="combo")console.warn("The item is not a combo!");else{var st=W.getModel().parentId,jt=this.get("comboTrees");jt||(jt=[]);var Gt,Ht=this.get("itemMap"),ee=W.get("id"),ae=[],je=this.get("combos"),Fe=this.findById(st);if(jt.forEach(function(Ke){Gt||ea(Ke,function(bn){if(bn.id===ee){Gt=bn,W.getEdges().forEach(function(Nn){I.removeItem(Nn,!1)});var wn=je.indexOf(u);je.splice(wn,1),delete Ht[ee],W.destroy()}return!st||!Gt||bn.id!==st||(Fe.removeCombo(W),(wn=(ae=bn.children).indexOf(Gt))!==-1&&ae.splice(wn,1),Gt.children.forEach(function(Nn){var Bn=I.findById(Nn.id),Fn=Bn.getModel();Bn.getType&&Bn.getType()==="combo"?(Nn.parentId=st,delete Nn.comboId,Fn.parentId=st,delete Fn.comboId):Bn.getType&&Bn.getType()==="node"&&(Nn.comboId=st,Fn.comboId=st),Fe.addChild(Bn),ae.push(Nn)}),!1)})}),!st&&Gt){var Ue=jt.indexOf(Gt);jt.splice(Ue,1),Gt.children.forEach(function(Ke){Ke.parentId=void 0,I.findById(Ke.id).getModel().parentId=void 0,Ke.itemType!=="node"&&jt.push(Ke)})}}},f.prototype.updateCombos=function(){var u=this,I=this.get("comboTrees"),W=this.get("itemController"),st=this.get("itemMap");(I||[]).forEach(function(jt){ea(jt,function(Gt){if(!Gt)return!0;var Ht=st[Gt.id];if(Ht&&Ht.getType&&Ht.getType()==="combo"){var ee=Object(nt.d)(Ht.getStates());Object(n.f)(ee,function(ae){return u.setItemState(Ht,ae,!1)}),W.updateCombo(Ht,Gt.children),Object(n.f)(ee,function(ae){return u.setItemState(Ht,ae,!0)})}return!0})}),this.sortCombos()},f.prototype.updateCombo=function(u){var I,W=this,st=u;if(Object(n.x)(u)&&(st=this.findById(u)),!st||st.getType&&st.getType()!=="combo")console.warn("The item to be updated is not a combo!");else{I=st.get("id");var jt=this.get("comboTrees"),Gt=this.get("itemController"),Ht=this.get("itemMap");(jt||[]).forEach(function(ee){ea(ee,function(ae){if(!ae)return!0;var je=Ht[ae.id];if(I===ae.id&&je&&je.getType&&je.getType()==="combo"){var Fe=Object(nt.d)(je.getStates());Object(n.f)(Fe,function(Ue){je.getStateStyle(Ue)&&W.setItemState(je,Ue,!1)}),Gt.updateCombo(je,ae.children),Object(n.f)(Fe,function(Ue){je.getStateStyle(Ue)&&W.setItemState(je,Ue,!0)}),I&&(I=ae.parentId)}return!0})})}},f.prototype.updateComboTree=function(u,I,W){W===void 0&&(W=!0);var st;this.set("comboSorted",!1);var jt,Gt=(st=Object(n.x)(u)?this.findById(u):u).getModel(),Ht=Gt.comboId||Gt.parentId,ee="";if(st.getType&&(ee=st.getType()),I&&ee==="combo"){var ae,je=this.get("comboTrees"),Fe=!0;if((je||[]).forEach(function(Nn){ae||di(Nn,function(Bn){if(!ae)return Bn.id===st.getID()&&(ae=Bn),!0})}),di(ae,function(Nn){return Nn.id!==I||(Fe=!1,!1)}),!Fe)return void console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!")}if(W&&this.get("enabledStack")){var Ue={},Ke={};ee==="combo"?(Ue.combos=[{id:Gt.id,parentId:Gt.parentId}],Ke.combos=[{id:Gt.id,parentId:I}]):ee==="node"&&(Ue.nodes=[{id:Gt.id,parentId:Gt.comboId}],Ke.nodes=[{id:Gt.id,parentId:I}]),this.pushStack("updateComboTree",{before:Ue,after:Ke})}if(Gt.parentId||Gt.comboId){var bn=this.findById(Gt.parentId||Gt.comboId);bn&&bn.removeChild(st)}ee==="combo"?Gt.parentId=I:ee==="node"&&(Gt.comboId=I),I&&(jt=this.findById(I))&&jt.addChild(st),Ht&&(jt=this.findById(Ht))&&jt.removeChild(st);var wn=Rs(this.get("comboTrees"),Gt.id,I);this.set("comboTrees",wn),this.updateCombos()},f.prototype.save=function(){var u=[],I=[],W=[];return Object(n.f)(this.get("nodes"),function(st){u.push(st.getModel())}),Object(n.f)(this.get("edges"),function(st){I.push(st.getModel())}),Object(n.f)(this.get("combos"),function(st){W.push(st.getModel())}),{nodes:u,edges:I,combos:W}},f.prototype.changeSize=function(u,I){return this.get("viewController").changeSize(u,I),this},f.prototype.refresh=function(){if(this.emit("beforegraphrefresh"),this.get("animate"))this.positionsAnimate();else{var u=this.get("nodes"),I=this.get("edges"),W=this.get("edges");Object(n.f)(u,function(st){st.refresh()}),Object(n.f)(I,function(st){st.refresh()}),Object(n.f)(W,function(st){st.refresh()})}this.emit("aftergraphrefresh"),this.autoPaint()},f.prototype.getNodes=function(){return this.get("nodes")},f.prototype.getEdges=function(){return this.get("edges")},f.prototype.getCombos=function(){return this.get("combos")},f.prototype.getComboChildren=function(u){if(Object(n.x)(u)&&(u=this.findById(u)),u&&(!u.getType||u.getType()==="combo"))return u.getChildren();console.warn("The combo does not exist!")},f.prototype.positionsAnimate=function(){var u=this;u.emit("beforeanimate");var I=u.get("animateCfg"),W=I.onFrame,st=u.getNodes(),jt=st.map(function(Gt){var Ht=Gt.getModel();return{id:Ht.id,x:Ht.x,y:Ht.y}});u.isAnimating()&&u.stopAnimate(),u.get("canvas").animate(function(Gt){Object(n.f)(jt,function(Ht){var ee=u.findById(Ht.id);if(ee&&!ee.destroyed){var ae=ee.get("originAttrs"),je=ee.get("model");if(!ae){var Fe=ee.getContainer().getMatrix();Fe||(Fe=[1,0,0,0,1,0,0,0,1]),ae={x:Fe[6],y:Fe[7]},ee.set("originAttrs",ae)}if(W){var Ue=W(ee,Gt,Ht,ae);ee.set("model",Object.assign(je,Ue))}else je.x=ae.x+(Ht.x-ae.x)*Gt,je.y=ae.y+(Ht.y-ae.y)*Gt}}),u.refreshPositions()},{duration:I.duration,easing:I.easing,callback:function(){Object(n.f)(st,function(Ht){Ht.set("originAttrs",null)}),I.callback&&I.callback(),u.emit("afteranimate"),u.animating=!1}})},f.prototype.refreshPositions=function(){this.emit("beforegraphrefreshposition");var u,I=this.get("nodes"),W=this.get("edges"),st=this.get("vedges"),jt=this.get("combos"),Gt={};Object(n.f)(I,function(Ht){u=Ht.getModel();var ee=Ht.get("originAttrs");ee&&u.x===ee.x&&u.y===ee.y||(Ht.updatePosition({x:u.x,y:u.y}),Gt[u.id]=!0,u.comboId&&(Gt[u.comboId]=!0))}),jt&&jt.length!==0&&this.updateCombos(),Object(n.f)(W,function(Ht){var ee=Ht.getSource().getModel(),ae=Ht.getTarget().getModel();(Gt[ee.id]||Gt[ae.id]||Ht.getModel().isComboEdge)&&Ht.refresh()}),Object(n.f)(st,function(Ht){Ht.refresh()}),this.emit("aftergraphrefreshposition"),this.autoPaint()},f.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},f.prototype.isAnimating=function(){return this.animating},f.prototype.getZoom=function(){var u=this.get("group").getMatrix();return u?u[0]:1},f.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},f.prototype.setMode=function(u){return this.get("modeController").setMode(u),this},f.prototype.clear=function(){return this.get("canvas").clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),this.emit("afterrender"),this},f.prototype.updateLayout=function(u){var I,W=this.get("layoutController");Object(n.x)(u)?u={type:I=u}:I=u.type;var st=this.get("layout"),jt=st?st.type:void 0;if(I&&jt!==I||u.gpuEnabled!==void 0&&u.gpuEnabled!==st.gpuEnabled)I||(I=jt),this.set("layout",u),W.changeLayout(I);else{var Gt={};Object.assign(Gt,st,u),Gt.type=jt||"random",this.set("layout",Gt),W.updateLayoutCfg(Gt)}},f.prototype.destroyLayout=function(){this.get("layoutController").destroyLayout()},f.prototype.layout=function(){var u=this.get("layoutController"),I=this.get("layout");I&&u&&(I.workerEnabled?u.layout():u.layoutMethod?u.relayout(!0):u.layout())},f.prototype.collapseCombo=function(u){var I=this;if(Object(n.x)(u)&&(u=this.findById(u)),u){this.emit("beforecollapseexpandcombo",{action:"expand",item:u});var W=u.getModel();this.get("itemController").collapseCombo(u),W.collapsed=!0;var st=this.getEdges().concat(this.get("vedges")),jt=[],Gt=[],Ht=this.get("comboTrees"),ee=!1,ae={};(Ht||[]).forEach(function(Ue){ae[Ue.id]=Ue}),(Ht||[]).forEach(function(Ue){ee||di(Ue,function(Ke){if(ee&&ae[Ke.id])return!1;if(W.parentId===Ke.id?(ae={},Ke.children.forEach(function(wn){ae[wn.id]=wn})):W.id===Ke.id&&(ee=!0),ee){var bn=I.findById(Ke.id);bn&&bn.getType&&bn.getType()==="combo"&&(jt=jt.concat(bn.getNodes()),Gt=Gt.concat(bn.getCombos()))}return!0})});var je={},Fe=[];st.forEach(function(Ue){if(!Ue.isVisible()||Ue.getModel().isVEdge){var Ke=Ue.getSource(),bn=Ue.getTarget();if((jt.includes(Ke)||Gt.includes(Ke))&&!jt.includes(bn)&&!Gt.includes(bn)||Ke.getModel().id===W.id){if((Fn=Ue.getModel()).isVEdge)return void I.removeItem(Ue,!1);for(var wn=bn.getModel();!bn.isVisible();){if(!(bn=I.findById(wn.parentId||wn.comboId))||!wn.parentId&&!wn.comboId)return;wn=bn.getModel()}var Nn=wn.id;if(je[W.id+"-"+Nn])return void(je[W.id+"-"+Nn]+=Fn.size||1);var Bn=I.addItem("vedge",{source:W.id,target:Nn,isVEdge:!0},!1);je[W.id+"-"+Nn]=Fn.size||1,Fe.push(Bn)}else if(!jt.includes(Ke)&&!Gt.includes(Ke)&&(jt.includes(bn)||Gt.includes(bn))||bn.getModel().id===W.id){var Fn;if((Fn=Ue.getModel()).isVEdge)return void I.removeItem(Ue,!1);for(var sr=Ke.getModel();!Ke.isVisible();){if(!(Ke=I.findById(sr.parentId||sr.comboId))||!sr.parentId&&!sr.comboId)return;sr=Ke.getModel()}var ur=sr.id;if(je[ur+"-"+W.id])return void(je[ur+"-"+W.id]+=Fn.size||1);Bn=I.addItem("vedge",{target:W.id,source:ur,isVEdge:!0},!1),je[ur+"-"+W.id]=Fn.size||1,Fe.push(Bn)}}}),Fe.forEach(function(Ue){var Ke=Ue.getModel();I.updateItem(Ue,{size:je[Ke.source+"-"+Ke.target]},!1)}),this.emit("aftercollapseexpandcombo",{action:"collapse",item:u})}else console.warn("The combo to be collapsed does not exist!")},f.prototype.expandCombo=function(u){var I=this;if(Object(n.x)(u)&&(u=this.findById(u)),!u||u.getType&&u.getType()!=="combo")console.warn("The combo to be collapsed does not exist!");else{this.emit("beforecollapseexpandcombo",{action:"expand",item:u});var W=u.getModel();this.get("itemController").expandCombo(u),W.collapsed=!1;var st=this.getEdges().concat(this.get("vedges")),jt=[],Gt=[],Ht=this.get("comboTrees"),ee=!1,ae={};(Ht||[]).forEach(function(Ue){ae[Ue.id]=Ue}),(Ht||[]).forEach(function(Ue){ee||di(Ue,function(Ke){if(ee&&ae[Ke.id])return!1;if(W.parentId===Ke.id?(ae={},Ke.children.forEach(function(wn){ae[wn.id]=wn})):W.id===Ke.id&&(ee=!0),ee){var bn=I.findById(Ke.id);bn&&bn.getType&&bn.getType()==="combo"&&(jt=jt.concat(bn.getNodes()),Gt=Gt.concat(bn.getCombos()))}return!0})});var je={},Fe={};st.forEach(function(Ue){if(!Ue.isVisible()||Ue.getModel().isVEdge){var Ke=Ue.getSource(),bn=Ue.getTarget(),wn=Ke.get("id"),Nn=bn.get("id");if((jt.includes(Ke)||Gt.includes(Ke))&&!jt.includes(bn)&&!Gt.includes(bn)||wn===W.id){if(Ue.getModel().isVEdge)return void I.removeItem(Ue,!1);for(var Bn=bn.getModel();!bn.isVisible();){if(!(bn=I.findById(Bn.comboId||Bn.parentId))||!Bn.parentId&&!Bn.comboId)return;Bn=bn.getModel()}Nn=Bn.id;for(var Fn=Ke.getModel();!Ke.isVisible();){if(!(Ke=I.findById(Fn.comboId||Fn.parentId))||!Fn.parentId&&!Fn.comboId)return;if(Fn.comboId===W.id||Fn.parentId===W.id)break;Fn=Ke.getModel()}if(wn=Fn.id,Nn){if(je[ur=wn+"-"+Nn])return je[ur]+=Ue.getModel().size||1,void I.updateItem(Fe[ur],{size:je[ur]},!1);var sr=I.addItem("vedge",{source:wn,target:Nn,isVEdge:!0},!1);je[ur]=Ue.getModel().size||1,Fe[ur]=sr}}else if(!jt.includes(Ke)&&!Gt.includes(Ke)&&(jt.includes(bn)||Gt.includes(bn))||Nn===W.id){if(Ue.getModel().isVEdge)return void I.removeItem(Ue,!1);for(Fn=Ke.getModel();!Ke.isVisible();){if(!(Ke=I.findById(Fn.comboId||Fn.parentId))||!Fn.parentId&&!Fn.comboId)return;Fn=Ke.getModel()}for(wn=Fn.id,Bn=bn.getModel();!bn.isVisible();){if(!(bn=I.findById(Bn.comboId||Bn.parentId))||!Bn.parentId&&!Bn.comboId)return;if(Bn.comboId===W.id||Bn.parentId===W.id)break;Bn=bn.getModel()}if(Nn=Bn.id,wn){var ur;if(je[ur=wn+"-"+Nn])return je[ur]+=Ue.getModel().size||1,void I.updateItem(Fe[ur],{size:je[ur]},!1);sr=I.addItem("vedge",{target:Nn,source:wn,isVEdge:!0},!1),je[ur]=Ue.getModel().size||1,Fe[ur]=sr}}else(jt.includes(Ke)||Gt.includes(Ke))&&(jt.includes(bn)||Gt.includes(bn))&&Ke.isVisible()&&bn.isVisible()&&Ue.show()}}),this.emit("aftercollapseexpandcombo",{action:"expand",item:u})}},f.prototype.collapseExpandCombo=function(u){if(Object(n.x)(u)&&(u=this.findById(u)),!u.getType||u.getType()==="combo"){for(var I=u.getModel(),W=this.findById(I.parentId);W;){var st=W.getModel();if(st.collapsed)return console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),void(W=void 0);W=this.findById(st.parentId)}I.collapsed?this.expandCombo(u):this.collapseCombo(u),this.updateCombo(u)}},f.prototype.sortCombos=function(){var u=this;if(!this.get("comboSorted")){this.set("comboSorted",!0);var I=[],W={};(this.get("comboTrees")||[]).forEach(function(st){di(st,function(jt){return I[jt.depth]?I[jt.depth].push(jt.id):I[jt.depth]=[jt.id],W[jt.id]=jt.depth,!0})}),(this.getEdges().concat(this.get("vedges"))||[]).forEach(function(st){var jt=st.getModel(),Gt=W[jt.source]||0,Ht=W[jt.target]||0,ee=Math.max(Gt,Ht);I[ee]?I[ee].push(jt.id):I[ee]=[jt.id]}),I.forEach(function(st){if(st&&st.length)for(var jt=st.length-1;jt>=0;jt--){var Gt=u.findById(st[jt]);Gt&&Gt.toFront()}})}},f.prototype.getNeighbors=function(u,I){var W=u;return Object(n.x)(u)&&(W=this.findById(u)),W.getNeighbors(I)},f.prototype.getNodeDegree=function(u,I){I===void 0&&(I=void 0);var W=u;Object(n.x)(u)&&(W=this.findById(u));var st=this.get("degrees");st||(st=Object(Se.getDegree)(this.get("data"))),this.set("degees",st);var jt,Gt=st[W.getID()];switch(I){case"in":jt=Gt.inDegree;break;case"out":jt=Gt.outDegree;break;case"all":jt=Gt;break;default:jt=Gt.degree}return jt},f.prototype.getUndoStack=function(){return this.undoStack},f.prototype.getRedoStack=function(){return this.redoStack},f.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},f.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},f.prototype.pushStack=function(u,I,W){if(u===void 0&&(u="update"),W===void 0&&(W="undo"),this.get("enabledStack")){var st=I?Object(n.c)(I):{before:{},after:Object(n.c)(this.save())};W==="redo"?this.redoStack.push({action:u,data:st}):this.undoStack.push({action:u,data:st}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})}else console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !")},f.prototype.getAdjMatrix=function(u,I){u===void 0&&(u=!0),I===void 0&&(I=this.get("directed"));var W=this.get("adjMatrix");return W&&u||(W=Object(Se.getAdjMatrix)(this.save(),I),this.set("adjMatrix",W)),W},f.prototype.getShortestPathMatrix=function(u,I){u===void 0&&(u=!0),I===void 0&&(I=this.get("directed"));var W=this.get("adjMatrix"),st=this.get("shortestPathMatrix");return W&&u||(W=Object(Se.getAdjMatrix)(this.save(),I),this.set("adjMatrix",W)),st&&u||(st=Object(Se.floydWarshall)(this.save(),I),this.set("shortestPathMatrix",st)),st},f.prototype.on=function(u,I,W){return kt.prototype.on.call(this,u,I,W)},f.prototype.destroy=function(){this.clear(),this.clearStack(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("canvas").destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},f.prototype.createHull=function(u){if(u.members&&!(u.members.length<1)){var I=this.get("hullGroup"),W=this.get("hullMap");if(W||(W={},this.set("hullMap",W)),I||((I=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",I)),W[u.id])return console.warn("Existed hull id."),W[u.id];var st=I.addGroup({id:u.id+"-container"}),jt=new Ca(this,Object(nt.a)(Object(nt.a)({},u),{group:st}));return W[jt.id]=jt,jt}console.warn("Create hull failed! The members is empty.")},f.prototype.getHulls=function(){return this.get("hullMap")},f.prototype.getHullById=function(u){return this.get("hullMap")[u]},f.prototype.removeHull=function(u){var I;I=Object(n.x)(u)?this.getHullById(u):u,delete this.get("hullMap")[I.id],I.destroy()},f.prototype.removeHulls=function(){var u=this.getHulls();u&&Object.keys(u).length&&(u.forEach(function(I){I.destroy()}),this.set("hullMap",{}))}})(_t.a);function ns(kt){return(ns=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(kt)}var ba=Yt.a.transform,ca=["startArrow","endArrow"],gs={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Fa={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:gs,combo:gs},ys={options:{},itemType:"",type:"",getCustomConfig:function(f){return{}},getOptions:function(f){return Object(n.e)({labelCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}},descriptionCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}}},this.options,this.getCustomConfig(f)||{},f)},draw:function(f,u){var I=this.drawShape(f,u);return I.set("className",this.itemType+"-shape"),f.label&&this.drawLabel(f,u).set("className",this.itemType+"-label"),I},afterDraw:function(f,u,I){},drawShape:function(f,u){return null},drawLabel:function(f,u){var I=this.getOptions(f).labelCfg||{},W=this.getLabelStyle(f,I,u),st=W.rotate;delete W.rotate;var jt=u.addShape("text",{attrs:W,draggable:!0,className:"text-shape",name:"text-shape"});if(st){var Gt=jt.getBBox(),Ht=jt.getMatrix();if(Ht||(Ht=[1,0,0,0,1,0,0,0,1]),W.rotateCenter)switch(W.rotateCenter){case"center":Ht=ba(Ht,[["t",-Gt.width/2,-Gt.height/2],["r",st],["t",Gt.width/2,Gt.height/2]]);break;case"lefttop":Ht=ba(Ht,[["t",-W.x,-W.y],["r",st],["t",W.x,W.y]]);break;case"leftcenter":Ht=ba(Ht,[["t",-W.x,-W.y-Gt.height/2],["r",st],["t",W.x,W.y+Gt.height/2]]);break;default:Ht=ba(Ht,[["t",-Gt.width/2,-Gt.height/2],["r",st],["t",Gt.width/2,Gt.height/2]])}else Ht=ba(Ht,[["t",-W.x,-W.y-Gt.height/2],["r",st],["t",W.x,W.y+Gt.height/2]]);jt.setMatrix(Ht)}if(W.background){var ee=this.drawLabelBg(f,u,jt),ae=this.itemType+"-label-bg";ee.set("classname",ae),jt.toFront()}return jt},drawLabelBg:function(f,u,I){var W=this.options.labelCfg,st=Object(n.A)({},W,f.labelCfg),jt=this.getLabelBgStyleByPosition(I,f,st,u);return u.addShape("rect",{name:"text-bg-shape",attrs:jt})},getLabelStyleByPosition:function(f,u,I){return{text:f.label}},getLabelBgStyleByPosition:function(f,u,I,W){return{}},getLabelStyle:function(f,u,I){var W=this.getLabelStyleByPosition(f,u,I),st=this.itemType+"Label",jt=Pn[st]?Pn[st].style:null;return Object(nt.a)(Object(nt.a)(Object(nt.a)({},jt),W),u.style)},getShapeStyle:function(f){return f.style},update:function(f,u){this.updateShapeStyle(f,u),this.updateLabel(f,u)},updateShapeStyle:function(f,u){var I=u.getContainer(),W=u.getKeyShape(),st=Object(n.A)({},W.attr(),f.style),jt=function(ee){var ae,je=st[ee];if(Object(n.w)(je)){var Fe=I.find(function(Ue){return Ue.get("name")===ee});Fe&&Fe.attr(je)}else W.attr(((ae={})[ee]=je,ae))};for(var Gt in st)jt(Gt)},updateLabel:function(f,u){var I=u.getContainer(),W=this.getOptions({}).labelCfg,st=this.itemType+"-label",jt=I.find(function(sr){return sr.get("className")===st}),Gt=this.itemType+"-label-bg",Ht=I.find(function(sr){return sr.get("classname")===Gt});if(f.label||f.label==="")if(jt){var ee={};u.getModel&&(ee=u.getModel().labelCfg);var ae=Object(n.e)({},W,ee,f.labelCfg),je=this.getLabelStyleByPosition(f,ae,I),Fe=f.labelCfg?f.labelCfg.style:void 0,Ue=ae.style&&ae.style.background,Ke=Object(nt.a)(Object(nt.a)(Object(nt.a)({},jt.attr()),je),Fe),bn=Ke.rotate;if(delete Ke.rotate,bn){var wn=[1,0,0,0,1,0,0,0,1];wn=ba(wn,[["t",-Ke.x,-Ke.y],["r",bn],["t",Ke.x,Ke.y]]),jt.resetMatrix(),jt.attr(Object(nt.a)(Object(nt.a)({},Ke),{matrix:wn}))}else jt.resetMatrix(),jt.attr(Ke);if(Ht)if(Ke.background){var Nn=this.getLabelBgStyleByPosition(jt,f,ae,I),Bn=Object(nt.a)(Object(nt.a)({},Nn),Ue);if(Ht.resetMatrix(),bn){var Fn=[1,0,0,0,1,0,0,0,1];Fn=ba(Fn,[["t",-Bn.x,-Bn.y],["r",bn],["t",Bn.x,Bn.y]]),Bn.matrix=Fn}Ht.attr(Bn)}else I.removeChild(Ht);else Ke.background&&((Ht=this.drawLabelBg(f,I,jt)).set("classname",Gt),jt.toFront())}else this.drawLabel(f,I).set("className",st)},afterUpdate:function(f,u){},setState:function(f,u,I){var W,st,jt=I.get("keyShape");if(jt){var Gt=I.getType(),Ht=Object(n.n)(u)?f:f+":"+u,ee=this.getStateStyle(Ht,I),ae=I.getStateStyle(Ht);if(ae||ee){var je=Object(n.A)({},ae||ee),Fe=I.getContainer(),Ue={x:1,y:1,cx:1,cy:1};if(Gt==="combo"&&(Ue.r=1,Ue.width=1,Ue.height=1),u){var Ke=function(Hi){var Io,ko=je[Hi];if(Object(n.w)(ko)&&!ca.includes(Hi)){var Ro=Fe.find(function(bo){return bo.get("name")===Hi});Ro&&Ro.attr(ko)}else jt.attr(((Io={})[Hi]=ko,Io))};for(var bn in je)Ke(bn)}else{var wn=ui(I.getCurrentStatesStyle()),Nn=I.getModel(),Bn=Object(n.A)({},Nn.style,ui(I.getOriginStyle())),Fn=jt.get("name"),sr=jt.attr(),ur={};Object.keys(sr).forEach(function(lo){if(lo!=="img"){var Hi=sr[lo];Hi&&ns(Hi)==="object"?ur[lo]=Object(n.c)(Hi):ur[lo]=Hi}});var Or={},ei=function(Hi){var Io=je[Hi];if(Object(n.w)(Io)&&!ca.includes(Hi)){var ko=Fe.find(function(jo){return jo.get("name")===Hi});if(ko){var Ro=Object(n.c)(ko.attr());Object(n.f)(Io,function(jo,ho){if(Hi===Fn&&ur[ho]&&!Ue[ho]){delete ur[ho];var fa=Bn[Hi][ho]||Fa[Gt][ho];jt.attr(ho,fa)}else if(Ro[ho]||Ro[ho]===0){delete Ro[ho];var Zo=Bn[Hi][ho]||Fa[Gt][ho];ko.attr(ho,Zo)}}),Or[Hi]=Ro}}else if(ur[Hi]&&!Ue[Hi]){delete ur[Hi];var bo=Bn[Hi]||(Bn[Fn]?Bn[Fn][Hi]:void 0)||Fa[Gt][Hi];jt.attr(Hi,bo)}};for(var Ci in je)ei(Ci);for(var bn in Fn?Or[Fn]=ur:Object(n.A)(Or,ur),wn)if(!Ue[bn]){var kr=wn[bn];Object(n.w)(kr)&&!ca.includes(bn)||(Fn?(Object(n.A)(Bn[Fn],((st={})[bn]=kr,st)),delete Bn[bn]):Object(n.A)(Bn,((W={})[bn]=kr,W)),delete wn[bn])}var yi={};Object(n.e)(yi,Bn,Or,wn);var oo=!1,so=function(Hi){var Io,ko,Ro=yi[Hi];if(Object(n.w)(Ro)&&!ca.includes(Hi)){var bo=Fe.find(function(ho){return ho.get("name")===Hi});bo&&(Hi===Fn&&(Gt==="combo"&&(delete Ro.r,delete Ro.width,delete Ro.height),oo=!0),bo.attr(Ro))}else if(!oo){var jo=Ro||Fa[Gt][Hi];Gt==="combo"?Fn||jt.attr(((Io={})[Hi]=jo,Io)):jt.attr(((ko={})[Hi]=jo,ko))}};for(var co in yi)so(co)}}}},getStateStyle:function(f,u){var I=u.getModel(),W=u.getType(),st=this.getOptions(I),jt=st.stateStyles,Gt=st.style,Ht=Gt===void 0?{}:Gt,ee=I.stateStyles?I.stateStyles[f]:jt&&jt[f];return W==="combo"?Object(n.c)(ee):Object(n.A)({},Ht,ee)},getControlPoints:function(f){return f.controlPoints},getAnchorPoints:function(f){return this.getOptions(f).anchorPoints}},jn={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:Pn.nodeLabel.offset,getSize:function(f){var u=f.size||this.getOptions({}).size||Pn.defaultNode.size;return Object(n.m)(u)&&u.length===1&&(u=[u[0],u[0]]),Object(n.m)(u)||(u=[u,u]),u},getLabelStyleByPosition:function(f,u){var I=u.position||this.labelPosition;if(I==="center")return{x:0,y:0,text:f.label};var W=u.offset;Object(n.s)(W)&&(W=this.offset);var st,jt=this.getSize(f),Gt=jt[0],Ht=jt[1];switch(I){case"top":st={x:0,y:0-Ht/2-W,textBaseline:"bottom"};break;case"bottom":st={x:0,y:Ht/2+W,textBaseline:"top"};break;case"left":st={x:0-Gt/2-W,y:0,textAlign:"right"};break;default:st={x:Gt/2+W,y:0,textAlign:"left"}}return st.text=f.label,st},getLabelBgStyleByPosition:function(f,u,I,W){if(!f)return{};var st=f.getBBox(),jt=I.style&&I.style.background;if(!jt)return{};var Gt,Ht=Mr(jt.padding),ee=st.width+Ht[1]+Ht[3],ae=st.height+Ht[0]+Ht[2],je=I.offset;return Object(n.s)(je)&&(je=this.offset),Gt={x:st.minX-Ht[3],y:st.minY-Ht[0]},Gt=Object(nt.a)(Object(nt.a)(Object(nt.a)({},Gt),jt),{width:ee,height:ae})},drawShape:function(f,u){var I=this.shapeType,W=this.getShapeStyle(f);return u.addShape(I,{attrs:W,draggable:!0,name:"node-shape"})},updateLinkPoints:function(f,u){var I,W=this.getOptions(f).linkPoints,st=u.find(function(ei){return ei.get("className")==="link-point-left"}),jt=u.find(function(ei){return ei.get("className")==="link-point-right"}),Gt=u.find(function(ei){return ei.get("className")==="link-point-top"}),Ht=u.find(function(ei){return ei.get("className")==="link-point-bottom"});st&&(I=st.attr()),jt&&!I&&(I=jt.attr()),Gt&&!I&&(I=Gt.attr()),Ht&&!I&&(I=Ht.attr()),I||(I=W);var ee=Object(n.A)({},I,f.linkPoints),ae=ee.fill,je=ee.stroke,Fe=ee.lineWidth,Ue=ee.size/2;Ue||(Ue=ee.r);var Ke=f.linkPoints?f.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},bn=Ke.left,wn=Ke.right,Nn=Ke.top,Bn=Ke.bottom,Fn=this.getSize(f),sr=Fn[0],ur=Fn[1],Or={r:Ue,fill:ae,stroke:je,lineWidth:Fe};st?bn||bn===void 0?st.attr(Object(nt.a)(Object(nt.a)({},Or),{x:-sr/2,y:0})):st.remove():bn&&u.addShape("circle",{attrs:Object(nt.a)(Object(nt.a)({},Or),{x:-sr/2,y:0}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),jt?(wn||wn===void 0||jt.remove(),jt.attr(Object(nt.a)(Object(nt.a)({},Or),{x:sr/2,y:0}))):wn&&u.addShape("circle",{attrs:Object(nt.a)(Object(nt.a)({},Or),{x:sr/2,y:0}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Gt?(Nn||Nn===void 0||Gt.remove(),Gt.attr(Object(nt.a)(Object(nt.a)({},Or),{x:0,y:-ur/2}))):Nn&&u.addShape("circle",{attrs:Object(nt.a)(Object(nt.a)({},Or),{x:0,y:-ur/2}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),Ht?Bn||Bn===void 0?Ht.attr(Object(nt.a)(Object(nt.a)({},Or),{x:0,y:ur/2})):Ht.remove():Bn&&u.addShape("circle",{attrs:Object(nt.a)(Object(nt.a)({},Or),{x:0,y:ur/2}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},updateShape:function(f,u,I,W){u.get("keyShape").attr(Object(nt.a)({},I)),this.updateLabel(f,u),W&&this.updateIcon(f,u)},updateIcon:function(f,u){var I=this,W=u.getContainer(),st=this.getOptions(f).icon,jt=(f.icon?f.icon:{show:void 0}).show,Gt=W.find(function(Fe){return Fe.get("className")===I.type+"-icon"});if(Gt)if(jt||jt===void 0){var Ht=Object(n.A)({},Gt.attr(),st),ee=Ht.width,ae=Ht.height;Gt.attr(Object(nt.a)(Object(nt.a)({},Ht),{x:-ee/2,y:-ae/2}))}else Gt.remove();else if(jt){ee=st.width,ae=st.height,W.addShape("image",{attrs:Object(nt.a)(Object(nt.a)({},st),{x:-ee/2,y:-ae/2}),className:this.type+"-icon",name:this.type+"-icon"});var je=W.find(function(Fe){return Fe.get("className")==="node-label"});je&&je.toFront()}}},zs=Object(nt.a)(Object(nt.a)({},ys),jn);yr.registerNode("single-node",zs);var Wo={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:Pn.defaultEdge.size,style:{x:0,y:0,stroke:Pn.defaultEdge.style.stroke,lineAppendWidth:Pn.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Pn.edgeLabel.style.fill,fontSize:Pn.edgeLabel.style.fontSize}},stateStyles:Object(nt.a)({},Pn.edgeStateStyles)},getPath:function(f){var u=[];return Object(n.f)(f,function(I,W){W===0?u.push(["M",I.x,I.y]):u.push(["L",I.x,I.y])}),u},getShapeStyle:function(f){var u=this.options.style,I={stroke:f.color},W=Object(n.A)({},u,I,f.style),st=f.size||Pn.defaultEdge.size,jt=(f=this.getPathPoints(f)).startPoint,Gt=f.endPoint,Ht=this.getControlPoints(f),ee=[jt];Ht&&(ee=ee.concat(Ht)),ee.push(Gt);var ae=this.getPath(ee);return Object(n.A)({},Pn.defaultEdge.style,{stroke:Pn.defaultEdge.color,lineWidth:st,path:ae},W)},updateShapeStyle:function(f,u){var I=u.getContainer(),W={stroke:f.color},st=I.find(function(Bn){return Bn.get("className")==="edge-shape"})||u.getKeyShape(),jt=f.size,Gt=(f=this.getPathPoints(f)).startPoint,Ht=f.endPoint,ee=this.getControlPoints(f),ae=[Gt];ee&&(ae=ae.concat(ee)),ae.push(Ht);var je=st.attr(),Fe=Object(n.A)({},W,je,f.style),Ue=f.sourceNode,Ke=f.targetNode,bn={radius:Fe.radius};ee||(bn={source:Ue,target:Ke,offset:Fe.offset,radius:Fe.radius}),je.endArrow&&Fe.endArrow===!1&&(f.style.endArrow={path:""}),je.startArrow&&Fe.startArrow===!1&&(f.style.startArrow={path:""});var wn=this.getPath(ae,bn),Nn=Object(n.A)(W,st.attr(),{lineWidth:jt,path:wn},f.style);st&&st.attr(Nn)},getLabelStyleByPosition:function(f,u,I){var W,st=u.position||this.labelPosition,jt={},Gt=I&&I.find(function(Fe){return Fe.get("className")==="edge-shape"});W=st==="start"?0:st==="end"?1:.5;var Ht=u.refX||this.refX,ee=u.refY||this.refY;if(f.startPoint.x===f.endPoint.x&&f.startPoint.y===f.endPoint.y)return jt.x=f.startPoint.x+Ht,jt.y=f.startPoint.y+ee,jt.text=f.label,jt;var ae=Object(n.s)(u.autoRotate)?this.labelAutoRotate:u.autoRotate,je=Yo(Gt,W,Ht,ee,ae);return jt.x=je.x,jt.y=je.y,jt.rotate=je.rotate,jt.textAlign=this._getTextAlign(st,je.angle),jt.text=f.label,jt},getLabelBgStyleByPosition:function(f,u,I,W){if(!f)return{};var st=f.getBBox(),jt=I.style&&I.style.background;if(!jt)return{};var Gt,Ht=jt.padding,ee=st.width+Ht[1]+Ht[3],ae=st.height+Ht[0]+Ht[2],je=I.position||this.labelPosition,Fe=Object(nt.a)(Object(nt.a)({},jt),{width:ee,height:ae,x:st.minX-Ht[2],y:st.minY-Ht[0],rotate:0}),Ue=Object(n.s)(I.autoRotate)?this.labelAutoRotate:I.autoRotate,Ke=W&&W.find(function(Fn){return Fn.get("className")==="edge-shape"});Gt=je==="start"?0:je==="end"?1:.5;var bn=I.refX||this.refX,wn=I.refY||this.refY;if(u.startPoint.x===u.endPoint.x&&u.startPoint.y===u.endPoint.y)return Fe.x=u.startPoint.x+bn-ee/2,Fe.y=u.startPoint.y+wn-ae/2,Fe;var Nn=Yo(Ke,Gt,bn-ee/2,wn+ae/2,Ue),Bn=Nn.angle;return Bn>.5*Math.PI&&Bn<1.5*Math.PI&&(Nn=Yo(Ke,Gt,bn+ee/2,wn+ae/2,Ue)),Ue&&(Fe.x=Nn.x,Fe.y=Nn.y),Fe.rotate=Nn.rotate,Fe},_getTextAlign:function(f,u){var I="center";return u?(u%=2*Math.PI,f!=="center"&&(I=u>=0&&u<=Math.PI/2||u>=1.5*Math.PI&&u<2*Math.PI?f:function(W){var st=W;return W==="start"?st="end":W==="end"&&(st="start"),st}(f)),I):f},getControlPoints:function(f){return f.controlPoints},getPathPoints:function(f){return f},drawShape:function(f,u){var I=this.getShapeStyle(f);return u.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:I})},drawLabel:function(f,u){var I=this.options.labelCfg,W=Object(n.e)({fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},I,f.labelCfg),st=this.getLabelStyle(f,W,u),jt=st.rotate;delete st.rotate;var Gt=u.addShape("text",{attrs:st,name:"text-shape"});if(jt&&Gt.rotateAtStart(jt),st.background){var Ht=this.drawLabelBg(f,u,Gt),ee=this.itemType+"-label-bg";Ht.set("classname",ee),Gt.toFront()}return Gt},drawLabelBg:function(f,u,I){var W=this.options.labelCfg,st=Object(n.e)({},W,f.labelCfg),jt=this.getLabelStyle(f,st,u).rotate,Gt=this.getLabelBgStyleByPosition(I,f,st,u);delete Gt.rotate;var Ht=u.addShape("rect",{name:"text-bg-shape",attrs:Gt});return jt&&Ht.rotateAtStart(jt),Ht}},rc=Object(nt.a)(Object(nt.a)({},ys),Wo);yr.registerEdge("single-edge",rc),yr.registerEdge("line",{getControlPoints:function(){}},"single-edge"),yr.registerEdge("spline",{getPath:function(f){return Ns(f)}},"single-edge"),yr.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(f){var u,I,W=f.startPoint,st=f.endPoint,jt=(W.x+st.x)/2,Gt=(W.y+st.y)/2;if(f.controlPoints!==void 0){if(I=f.controlPoints[0],u=mt(W,I,st),W.x<=st.x&&W.y>st.y?this.clockwise=u.x>I.x?0:1:W.x<=st.x&&W.y<st.y?this.clockwise=u.x>I.x?1:0:W.x>st.x&&W.y<=st.y?this.clockwise=u.y<I.y?0:1:this.clockwise=u.y<I.y?1:0,(I.x-W.x)/(I.y-W.y)==(st.x-W.x)/(st.y-W.y))return[]}else{f.curveOffset===void 0&&(f.curveOffset=this.curveOffset),Object(n.m)(f.curveOffset)&&(f.curveOffset=f.curveOffset[0]),f.curveOffset<0?this.clockwise=0:this.clockwise=1;var Ht={x:st.x-W.x,y:st.y-W.y},ee=Math.atan2(Ht.y,Ht.x);I={x:f.curveOffset*Math.cos(-Math.PI/2+ee)+jt,y:f.curveOffset*Math.sin(-Math.PI/2+ee)+Gt},u=mt(W,I,st)}var ae=$t(W,u);return[{x:ae,y:ae}]},getPath:function(f){var u=[];return u.push(["M",f[0].x,f[0].y]),f.length===2?u.push(["L",f[1].x,f[1].y]):u.push(["A",f[1].x,f[1].y,0,0,this.clockwise,f[2].x,f[2].y]),u}},"single-edge"),yr.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(f){var u=f.controlPoints;if(!u||!u.length){var I=f.startPoint,W=f.endPoint;f.curveOffset===void 0&&(f.curveOffset=this.curveOffset),f.curvePosition===void 0&&(f.curvePosition=this.curvePosition),Object(n.m)(this.curveOffset)&&(f.curveOffset=f.curveOffset[0]),Object(n.m)(this.curvePosition)&&(f.curvePosition=f.curveOffset[0]),u=[ts(I,W,f.curvePosition,f.curveOffset)]}return u},getPath:function(f){var u=[];return u.push(["M",f[0].x,f[0].y]),u.push(["Q",f[1].x,f[1].y,f[2].x,f[2].y]),u}},"single-edge"),yr.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(f){var u=f.controlPoints;if(f.curveOffset===void 0&&(f.curveOffset=this.curveOffset),f.curvePosition===void 0&&(f.curvePosition=this.curvePosition),Object(n.t)(f.curveOffset)&&(f.curveOffset=[f.curveOffset,-f.curveOffset]),Object(n.t)(f.curvePosition)&&(f.curvePosition=[f.curvePosition,1-f.curvePosition]),!u||!u.length||u.length<2){var I=f.startPoint,W=f.endPoint;u=[ts(I,W,f.curvePosition[0],f.curveOffset[0]),ts(I,W,f.curvePosition[1],f.curveOffset[1])]}return u},getPath:function(f){var u=[];return u.push(["M",f[0].x,f[0].y]),u.push(["C",f[1].x,f[1].y,f[2].x,f[2].y,f[3].x,f[3].y]),u}},"single-edge"),yr.registerEdge("cubic-vertical",{curvePosition:[.5,.5],getControlPoints:function(f){var u=f.startPoint,I=f.endPoint;return f.curvePosition!==void 0&&(this.curvePosition=f.curvePosition),Object(n.t)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]),[{x:u.x,y:(I.y-u.y)*this.curvePosition[0]+u.y},{x:I.x,y:(I.y-u.y)*this.curvePosition[1]+u.y}]}},"cubic"),yr.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],getControlPoints:function(f){var u=f.startPoint,I=f.endPoint;return f.curvePosition!==void 0&&(this.curvePosition=f.curvePosition),Object(n.t)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]),[{x:(I.x-u.x)*this.curvePosition[0]+u.x,y:u.y},{x:(I.x-u.x)*this.curvePosition[1]+u.x,y:I.y}]}},"cubic"),yr.registerEdge("loop",{getPathPoints:function(f){return Xo(f)},getControlPoints:function(f){return f.controlPoints},afterDraw:function(f){f.controlPoints=void 0},afterUpdate:function(f){f.controlPoints=void 0}},"cubic");var ic={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:Pn.comboLabel.refX,refY:Pn.comboLabel.refY,options:{style:{stroke:Pn.defaultCombo.style.stroke,fill:Pn.defaultCombo.style.fill,lineWidth:Pn.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Pn.comboLabel.style.fill,fontSize:Pn.comboLabel.style.fontSize}},stateStyles:Object(nt.a)({},Pn.comboStateStyles)},getSize:function(f){var u=Object(n.c)(f.size||this.options.size||Pn.defaultCombo.size);return Object(n.m)(u)&&u.length===1&&(u=[u[0],u[0]]),Object(n.m)(u)||(u=[u,u]),u},getLabelStyleByPosition:function(f,u){var I=u.position||this.labelPosition,W=f.style,st=f.padding||this.options.padding;Object(n.m)(st)&&(st=st[0]);var jt=u.refX,Gt=u.refY;Object(n.s)(jt)&&(jt=this.refX),Object(n.s)(Gt)&&(Gt=this.refY);var Ht,ee=this.getSize(f),ae=(Math.max(W.r,ee[0]/2)||ee[0]/2)+st;switch(I){case"top":Ht={x:0,y:-ae-Gt,textBaseline:"bottom",textAlign:"center"};break;case"bottom":Ht={x:0,y:ae+Gt,textBaseline:"bottom",textAlign:"center"};break;case"left":Ht={x:-ae+jt,y:0,textAlign:"left"};break;case"center":Ht={x:0,y:0,text:f.label,textAlign:"center"};break;default:Ht={x:ae+jt,y:0,textAlign:"right"}}return Ht.text=f.label,Ht},drawShape:function(f,u){var I=this.shapeType,W=this.getShapeStyle(f);return u.addShape(I,{attrs:W,draggable:!0,name:"combo-shape"})},updateShape:function(f,u,I){var W=u.get("keyShape");(f.animate===void 0?this.options.animate:f.animate)&&W.animate?W.animate(I,{duration:200,easing:"easeLinear"}):W.attr(Object(nt.a)({},I)),this.updateLabel(f,u)}},ms=Object(nt.a)(Object(nt.a)({},ys),ic);yr.registerCombo("single-combo",ms),yr.registerCombo("circle",{options:{size:[Pn.defaultCombo.size[0],Pn.defaultCombo.size[0]],padding:Pn.defaultCombo.padding[0],animate:!0,style:{stroke:Pn.defaultCombo.style.stroke,fill:Pn.defaultCombo.style.fill,lineWidth:Pn.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Pn.comboLabel.style.fill,fontSize:Pn.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:Object(nt.a)({},Pn.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function(f,u){var I=this.getShapeStyle(f);return delete I.height,delete I.width,u.addShape("circle",{attrs:I,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(f){var u=this.options.style,I=f.padding||this.options.padding;Object(n.m)(I)&&(I=I[0]);var W,st={stroke:f.color},jt=Object(n.A)({},u,st,f.style),Gt=this.getSize(f);W=!Object(n.t)(jt.r)||isNaN(jt.r)?Gt[0]/2||Pn.defaultCombo.style.r:Math.max(jt.r,Gt[0]/2)||Gt[0]/2,jt.r=W+I;var Ht=Object(nt.a)({x:0,y:0},jt);return f.style?f.style.r=W:f.style={r:W},Ht},update:function(f,u){var I=this.getSize(f),W=f.padding||this.options.padding;Object(n.m)(W)&&(W=W[0]);var st=Object(n.c)(f.style),jt=Math.max(st.r,I[0]/2)||I[0]/2;st.r=jt+W;var Gt=u.get("sizeCache");Gt&&(Gt.r=st.r);var Ht={stroke:f.color},ee=u.get("keyShape"),ae=Object(n.A)({},ee.attr(),Ht,st);f.style?f.style.r=jt:f.style={r:jt},this.updateShape(f,u,ae,!0)}},"single-combo"),yr.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:Pn.defaultCombo.style.stroke,fill:Pn.defaultCombo.style.fill,lineWidth:Pn.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Pn.comboLabel.style.fill,fontSize:Pn.comboLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(nt.a)({},Pn.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function(f,u){var I=this.getShapeStyle(f);return u.addShape("rect",{attrs:I,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(f,u){var I=u.position||this.labelPosition,W=f.style,st=f.padding||this.options.padding;Object(n.t)(st)&&(st=[st,st,st,st]);var jt=u.refX,Gt=u.refY;Object(n.s)(jt)&&(jt=this.refX),Object(n.s)(Gt)&&(Gt=this.refY);var Ht,ee=W.width/2+st[3],ae=W.height/2+st[0];switch(I){case"top":Ht={x:0-ee+jt,y:0-ae+Gt,textBaseline:"top",textAlign:"left"};break;case"bottom":Ht={x:0,y:ae+Gt,textBaseline:"bottom",textAlign:"center"};break;case"left":Ht={x:0-ee+Gt,y:0,textAlign:"left"};break;case"center":Ht={x:0,y:0,text:f.label,textAlign:"center"};break;default:Ht={x:ee+jt,y:0,textAlign:"right"}}return Ht.text=f.label,Ht},getShapeStyle:function(f){var u=this.options.style,I=f.padding||this.options.padding;Object(n.t)(I)&&(I=[I,I,I,I]);var W,st,jt={stroke:f.color},Gt=Object(n.A)({},u,jt,f.style),Ht=this.getSize(f);W=!Object(n.t)(Gt.width)||isNaN(Gt.width)?Ht[0]||Pn.defaultCombo.style.width:Math.max(Gt.width,Ht[0])||Ht[0],st=!Object(n.t)(Gt.height)||isNaN(Gt.height)?Ht[1]||Pn.defaultCombo.style.height:Math.max(Gt.height,Ht[1])||Ht[1];var ee=-W/2-I[3],ae=-st/2-I[0];Gt.width=W+I[1]+I[3],Gt.height=st+I[0]+I[2];var je=Object(nt.a)({x:ee,y:ae},Gt);return f.style?(f.style.width=W,f.style.height=st):f.style={width:W,height:st},je},update:function(f,u){var I=this.getSize(f),W=f.padding||this.options.padding;Object(n.t)(W)&&(W=[W,W,W,W]);var st=Object(n.c)(f.style),jt=Math.max(st.width,I[0])||I[0],Gt=Math.max(st.height,I[1])||I[1];st.width=jt+W[1]+W[3],st.height=Gt+W[0]+W[2];var Ht=u.get("sizeCache");Ht&&(Ht.width=st.width,Ht.height=st.height),st.x=-jt/2-W[3],st.y=-Gt/2-W[0];var ee={stroke:f.color},ae=u.get("keyShape"),je=Object(n.A)({},ae.attr(),ee,st);f.style?(f.style.width=jt,f.style.height=Gt):f.style={width:jt,height:Gt},this.updateShape(f,u,je,!1)},updateShape:function(f,u,I){var W=u.get("keyShape");(f.animate===void 0?this.options.animate:f.animate)&&W.animate?W.animate(I,{duration:200,easing:"easeLinear"}):W.attr(Object(nt.a)({},I)),this.updateLabel(f,u)}},"single-combo"),yr.registerNode("simple-circle",{options:{size:Pn.defaultNode.size,style:{x:0,y:0,stroke:Pn.defaultNode.style.stroke,fill:Pn.defaultNode.style.fill,lineWidth:Pn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Pn.nodeLabel.style.fill,fontSize:Pn.nodeLabel.style.fontSize}},stateStyles:Object(nt.a)({},Pn.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",drawShape:function(f,u){var I=this.getShapeStyle(f);return u.addShape("circle",{attrs:I,className:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(f){var u=this.getOptions(f).style,I={stroke:f.color},W=Object(n.e)({},u,I),st=this.getSize(f)[0]/2;return Object(nt.a)({x:0,y:0,r:st},W)},update:function(f,u){var I=this.getSize(f),W={stroke:f.color,r:I[0]/2},st=u.get("keyShape"),jt=Object(n.e)({},st.attr(),W,f.style);this.updateShape(f,u,jt,!0)}},"single-node"),yr.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:Pn.defaultNode.style.stroke,fill:Pn.defaultNode.style.fill,lineWidth:Pn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Pn.nodeLabel.style.fill,fontSize:Pn.nodeLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(nt.a)({},Pn.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(f,u){var I=this.getShapeStyle(f);return u.addShape("rect",{attrs:I,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(f){var u=this.getOptions(f).style,I={stroke:f.color},W=Object(n.A)({},u,I),st=this.getSize(f),jt=W.width||st[0],Gt=W.height||st[1];return Object(nt.a)({x:-jt/2,y:-Gt/2,width:jt,height:Gt},W)},update:function(f,u){u.getContainer();var I=this.getOptions({}).style,W=this.getSize(f),st=u.get("keyShape");f.size||(W[0]=st.attr("width")||I.width,W[1]=st.attr("height")||I.height);var jt={stroke:f.color,x:-W[0]/2,y:-W[1]/2,width:W[0],height:W[1]},Gt=Object(n.A)({},I,st.attr(),jt);Gt=Object(n.A)(Gt,f.style),this.updateShape(f,u,Gt,!1)}},"single-node"),yr.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(f,u){var I=this.shapeType,W=this.getShapeStyle(f);delete W.fill;var st=u.addShape(I,{attrs:W,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(f,st),st},drawClip:function(f,u){var I=this.getOptions(f).clipCfg;if(I.show){var W=I.type,st=I.x,jt=I.y,Gt=I.style;if(W==="circle"){var Ht=I.r;u.setClip({type:"circle",attrs:Object(nt.a)({r:Ht,x:st,y:jt},Gt)})}else if(W==="rect"){var ee=I.width,ae=I.height,je=st-ee/2,Fe=jt-ae/2;u.setClip({type:"rect",attrs:Object(nt.a)({x:je,y:Fe,width:ee,height:ae},Gt)})}else if(W==="ellipse"){var Ue=I.rx,Ke=I.ry;u.setClip({type:"ellipse",attrs:Object(nt.a)({x:st,y:jt,rx:Ue,ry:Ke},Gt)})}else if(W==="polygon"){var bn=I.points;u.setClip({type:"polygon",attrs:Object(nt.a)({points:bn},Gt)})}else if(W==="path"){var wn=I.path;u.setClip({type:"path",attrs:Object(nt.a)({path:wn},Gt)})}}},getShapeStyle:function(f){var u=this.getOptions(f).style,I=this.getSize(f),W=this.getOptions(f).img,st=I[0],jt=I[1];return u&&(st=u.width||I[0],jt=u.height||I[1]),Object(nt.a)({x:-st/2,y:-jt/2,width:st,height:jt,img:W},u)},updateShapeStyle:function(f,u){var I=u.getContainer(),W=this.itemType+"-shape",st=I.find(function(Gt){return Gt.get("className")===W})||u.getKeyShape(),jt=this.getShapeStyle(f);st&&st.attr(jt)}},"single-node");var oa,fo=yr,bs=Yt.a.transform,_s=Object(nt.a)(Object(nt.a)(Object(nt.a)(Object(nt.a)(Object(nt.a)({},O),l),E),m),{transform:bs,mat3:Yt.b});(function(){function kt(f){this.graph=f,this.layoutCfg=f.get("layout")||{},this.layoutType=this.layoutCfg.type,this.initLayout()}kt.prototype.initLayout=function(){},kt.prototype.getLayoutType=function(){return this.layoutCfg.type},kt.prototype.refreshLayout=function(){var f=this.graph;f&&(f.get("animate")?f.positionsAnimate():f.refreshPositions())},kt.prototype.changeLayout=function(f){var u=this.graph,I=this.layoutMethod;this.layoutType=f,this.layoutCfg=u.get("layout")||{},this.layoutCfg.type=f,I&&I.destroy(),this.layout()},kt.prototype.changeData=function(){var f=this.layoutMethod;f&&f.destroy(),this.layout()},kt.prototype.destroyLayout=function(){var f=this.layoutMethod,u=this.graph;f&&f.destroy(),u.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethod=void 0},kt.prototype.setDataFromGraph=function(){for(var f=[],u=[],I=[],W=this.graph.getNodes(),st=this.graph.getEdges(),jt=this.graph.getCombos(),Gt=W.length,Ht=0;Ht<Gt;Ht++){var ee=W[Ht];if(ee.isVisible()){var ae=ee.getModel();f.push(ae)}}var je=st.length;for(Ht=0;Ht<je;Ht++){var Fe=st[Ht];Fe&&!Fe.destroyed&&Fe.isVisible()&&((ae=Fe.getModel()).isComboEdge||u.push(ae))}var Ue=jt.length;for(Ht=0;Ht<Ue;Ht++){var Ke=jt[Ht];!Ke.destroyed&&Ke.isVisible()&&(ae=Ke.getModel(),I.push(ae))}return{nodes:f,edges:u,combos:I}},kt.prototype.relayout=function(f){var u=this.graph,I=this.layoutMethod,W=this.layoutCfg;if(f){this.data=this.setDataFromGraph();var st=this.data.nodes;if(!st)return!1;this.initPositions(W.center,st),I.init(this.data)}this.layoutType==="force"&&(I.ticking=!1,I.forceSimulation.stop()),u.emit("beforelayout"),I.execute(f),I.isCustomLayout&&W.onLayoutEnd&&W.onLayoutEnd()},kt.prototype.layoutAnimate=function(){},kt.prototype.moveToZero=function(){var f=this.graph.get("data").nodes;if(f[0].x!==void 0&&f[0].x!==null&&!Zr(f[0].x)){for(var u=[0,0],I=f.length,W=0;W<I;W++){var st=f[W];u[0]+=st.x,u[1]+=st.y}for(u[0]/=f.length,u[1]/=f.length,W=0;W<I;W++)(st=f[W]).x-=u[0],st.y-=u[1]}},kt.prototype.initPositions=function(f,u){var I=this.graph;if(!u)return!1;var W=!0,st=.85*I.get("width"),jt=.85*I.get("height"),Gt=u.length,Ht=Math.ceil(Math.sqrt(Gt)*(st/jt)),ee=st/(Ht-1),ae=jt/(Math.ceil(Gt/Ht)-1);isFinite(ee)&&ee||(ee=0),isFinite(ae)&&ee||(ae=0);for(var je=f[0]-st/2,Fe=f[1]-jt/2,Ue=u.length,Ke=0;Ke<Ue;Ke++){var bn=u[Ke];Zr(bn.x)&&(W=!1,bn.x=Ke%Ht*ee+je),Zr(bn.y)&&(W=!1,bn.y=Math.floor(Ke/Ht)*ae+Fe)}return W},kt.prototype.destroy=function(){var f=this.layoutMethod;this.graph=null,f&&(f.destroy(),f.destroyed=!0),this.destroyed=!0}})(),function(kt){kt.CLICK="click",kt.DBLCLICK="dblclick",kt.MOUSEDOWN="mousedown",kt.MOUDEUP="mouseup",kt.CONTEXTMENU="contextmenu",kt.MOUSEENTER="mouseenter",kt.MOUSEOUT="mouseout",kt.MOUSEOVER="mouseover",kt.MOUSEMOVE="mousemove",kt.MOUSELEAVE="mouseleave",kt.DRAGSTART="dragstart",kt.DRAGEND="dragend",kt.DRAG="drag",kt.DRAGENTER="dragenter",kt.DRAGLEAVE="dragleave",kt.DRAGOVER="dragover",kt.DRAGOUT="dragout",kt.DDROP="drop",kt.KEYUP="keyup",kt.KEYDOWN="keydown",kt.WHEEL="wheel",kt.FOCUS="focus",kt.BLUR="blur",kt.TOUCHSTART="touchstart",kt.TOUCHMOVE="touchmove",kt.TOUCHEND="touchend",kt.NODE_CONTEXTMENU="node:contextmenu",kt.NODE_CLICK="node:click",kt.NODE_DBLCLICK="node:dblclick",kt.NODE_MOUSEDOWN="node:mousedown",kt.NODE_MOUSEUP="node:mouseup",kt.NODE_MOUSEENTER="node:mouseenter",kt.NODE_MOUSELEAVE="node:mouseleave",kt.NODE_MOUSEMOVE="node:mousemove",kt.NODE_MOUSEOUT="node:mouseout",kt.NODE_MOUSEOVER="node:mouseover",kt.NODE_DROP="node:drop",kt.NODE_DRAGOVER="node:dragover",kt.NODE_DRAGENTER="node:dragenter",kt.NODE_DRAGLEAVE="node:dragleave",kt.NODE_DRAGSTART="node:dragstart",kt.NODE_DRAG="node:drag",kt.NODE_DRAGEND="node:dragend",kt.COMBO_CONTEXTMENU="combo:contextmenu",kt.COMBO_CLICK="combo:click",kt.COMBO_DBLCLICK="combo:dblclick",kt.COMBO_MOUSEDOWN="combo:mousedown",kt.COMBO_MOUSEUP="combo:mouseup",kt.COMBO_MOUSEENTER="combo:mouseenter",kt.COMBO_MOUSELEAVE="combo:mouseleave",kt.COMBO_MOUSEMOVE="combo:mousemove",kt.COMBO_MOUSEOUT="combo:mouseout",kt.COMBO_MOUSEOVER="combo:mouseover",kt.COMBO_DROP="combo:drop",kt.COMBO_DRAGOVER="combo:dragover",kt.COMBO_DRAGENTER="combo:dragenter",kt.COMBO_DRAGLEAVE="combo:dragleave",kt.COMBO_DRAGSTART="combo:dragstart",kt.COMBO_DRAG="combo:drag",kt.COMBO_DRAGEND="combo:dragend",kt.EDGE_CONTEXTMENU="edge:contextmenu",kt.EDGE_CLICK="edge:click",kt.EDGE_DBLCLICK="edge:dblclick",kt.EDGE_MOUSEDOWN="edge:mousedown",kt.EDGE_MOUSEUP="edge:mouseup",kt.EDGE_MOUSEENTER="edge:mouseenter",kt.EDGE_MOUSELEAVE="edge:mouseleave",kt.EDGE_MOUSEMOVE="edge:mousemove",kt.EDGE_MOUSEOUT="edge:mouseout",kt.EDGE_MOUSEOVER="edge:mouseover",kt.EDGE_DROP="edge:drop",kt.EDGE_DRAGOVER="edge:dragover",kt.EDGE_DRAGENTER="edge:dragenter",kt.EDGE_DRAGLEAVE="edge:dragleave",kt.CANVAS_CONTEXTMENU="canvas:contextmenu",kt.CANVAS_CLICK="canvas:click",kt.CANVAS_DBLCLICK="canvas:dblclick",kt.CANVAS_MOUSEDOWN="canvas:mousedown",kt.CANVAS_MOUSEUP="canvas:mouseup",kt.CANVAS_MOUSEENTER="canvas:mouseenter",kt.CANVAS_MOUSELEAVE="canvas:mouseleave",kt.CANVAS_MOUSEMOVE="canvas:mousemove",kt.CANVAS_MOUSEOUT="canvas:mouseout",kt.CANVAS_MOUSEOVER="canvas:mouseover",kt.CANVAS_DROP="canvas:drop",kt.CANVAS_DRAGENTER="canvas:dragenter",kt.CANVAS_DRAGLEAVE="canvas:dragleave",kt.CANVAS_DRAGSTART="canvas:dragstart",kt.CANVAS_DRAG="canvas:drag",kt.CANVAS_DRAGEND="canvas:dragend",kt.BEFORERENDER="beforerender",kt.AFTERRENDER="afterrender",kt.BEFOREADDITEM="beforeadditem",kt.AFTERADDITEM="afteradditem",kt.BEFOREREMOVEITEM="beforeremoveitem",kt.AFTERREMOVEITEM="afterremoveitem",kt.BEFOREUPDATEITEM="beforeupdateitem",kt.AFTERUPDATEITEM="afterupdateitem",kt.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",kt.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",kt.BEFOREITEMSTATECHANGE="beforeitemstatechange",kt.AFTERITEMSTATECHANGE="afteritemstatechange",kt.BEFOREITEMREFRESH="beforeitemrefresh",kt.AFTERITEMREFRESH="afteritemrefresh",kt.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",kt.AFTERITEMSTATESCLEAR="afteritemstatesclear",kt.BEFOREMODECHANGE="beforemodechange",kt.AFTERMODECHANGE="aftermodechange",kt.BEFORELAYOUT="beforelayout",kt.AFTERLAYOUT="afterlayout",kt.BEFORECREATEEDGE="beforecreateedge",kt.AFTERCREATEEDGE="aftercreateedge",kt.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",kt.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",kt.BEFOREGRAPHREFRESH="beforegraphrefresh",kt.AFTERGRAPHREFRESH="aftergraphrefresh",kt.BEFOREANIMATE="beforeanimate",kt.AFTERANIMATE="afteranimate",kt.BEFOREPAINT="beforepaint",kt.AFTERPAINT="afterpaint",kt.BEFORECOLLAPSEEXPANDCOMBO="beforecollapseexpandcombo",kt.AFTERCOLLAPSEEXPANDCOMBO="aftercollapseexpandcombo",kt.GRAPHSTATECHANGE="graphstatechange",kt.AFTERACTIVATERELATIONS="afteractivaterelations",kt.NODESELECTCHANGE="nodeselectchange",kt.TOOLTIPCHANGE="tooltipchange",kt.WHEELZOOM="wheelzoom",kt.VIEWPORTCHANGE="viewportchange",kt.DRAGNODEEND="dragnodeend",kt.STACKCHANGE="stackchange"}(oa||(oa={})),fo.registerNode,fo.registerEdge,fo.registerCombo,xn.registerBehavior,fo.registerNode,fo.registerEdge,fo.registerCombo,xn.registerBehavior;var Ga=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var jt in st)Object.prototype.hasOwnProperty.call(st,jt)&&(W[jt]=st[jt])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}(),Ua=_s.applyMatrix,xu=function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return Ga(f,kt),f.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},f.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},f.prototype.disableRefresh=function(){this.set("refresh",!1)},f.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},f.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},f.prototype.initViewport=function(){var u=this,I=this._cfgs,W=I.graph;if(!this.destroyed){var st=this.get("container");Object(n.x)(st)&&(st=document.getElementById(st));var jt=Object(y.b)("<div class="+I.viewportClassName+`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff'>
      </div>`),Gt=0,Ht=0,ee=!1,ae=0,je=0,Fe=0,Ue=0,Ke=0,bn=0;st.addEventListener("mousedown",function(wn){if(I.refresh=!1,wn.target===jt){var Nn=jt.style;Fe=parseInt(Nn.width,10),Ue=parseInt(Nn.height,10);var Bn=u.get("width"),Fn=u.get("height");Fe>Bn||Ue>Fn||(bn=W.getZoom(),Ke=u.get("ratio"),ee=!0,Gt=wn.clientX,Ht=wn.clientY)}},!1),st.addEventListener("mousemove",function(wn){if(ee&&!Object(n.s)(wn.clientX)&&!Object(n.s)(wn.clientY)){var Nn=u.get("width"),Bn=u.get("height"),Fn=jt.style;ae=parseInt(Fn.left,10),je=parseInt(Fn.top,10),Fe=parseInt(Fn.width,10),Ue=parseInt(Fn.height,10);var sr=Gt-wn.clientX,ur=Ht-wn.clientY;ae-sr<0?sr=ae:ae-sr+Fe>=Nn&&(sr=0),je-ur<0?ur=je:je-ur+Ue>=Bn&&(ur=0),ae-=sr,je-=ur,Object(y.c)(jt,{left:ae+"px",top:je+"px"}),W.translate(sr*bn/Ke,ur*bn/Ke),Gt=wn.clientX,Ht=wn.clientY}},!1),st.addEventListener("mouseleave",function(){ee=!1,I.refresh=!0},!1),st.addEventListener("mouseup",function(){ee=!1,I.refresh=!0},!1),this.set("viewport",jt),st.appendChild(jt)}},f.prototype.updateViewport=function(){if(!this.destroyed){var u=this.get("ratio"),I=this.get("width"),W=this.get("height"),st=this.get("graph"),jt=st.get("width"),Gt=jt/st.get("height"),Ht=st.getGroup(),ee=Ht.getCanvasBBox(),ae=[(ee.minX+ee.maxX)/2,(ee.minY+ee.maxY)/2],je=[ee.maxX-ee.minX,ee.maxY-ee.minY],Fe={centerX:ae[0],centerY:ae[1],width:0,height:0,minX:0,minY:0};ee[0]/ee[1]>Gt?(Fe.width=je[0],Fe.height=Fe.width/Gt):(Fe.height=je[1],Fe.width=Fe.height*Gt),Fe.minX=ae[0]-Fe.width/2,Fe.minY=ae[1]-Fe.height/2;var Ue=Ht.getMatrix();Ue||(Ue=[1,0,0,0,1,0,0,0,1]);var Ke=tt.a.invert([1,0,0,0,1,0,0,0,1],Ue),bn=Ua({x:Fe.minX,y:Fe.minY},Ke),wn=st.getCanvasByPoint(bn.x,bn.y),Nn=this.get("viewport");Nn||this.initViewport();var Bn=jt/Fe.width,Fn=Bn*I,sr=Bn*W,ur=I*-wn.x/Fe.width,Or=W*-wn.y/Fe.height,ei=ur+Fn,Ci=Or+sr;ur<0&&(Fn+=ur,ur=0),ei>I&&(Fn-=ei-I),Or<0&&(sr+=Or,Or=0),Ci>W&&(sr-=Ci-W),this.set("ratio",u);var kr=ur+"px",yi=Or+"px";Object(y.c)(Nn,{left:kr,top:yi,width:Fn+"px",height:sr+"px"})}},f.prototype.init=function(){this.initContainer()},f.prototype.initContainer=function(){var u=this.get("graph"),I=u.get("width"),W=u.get("height")/I,st=this.get("className"),jt=this.get("container"),Gt=this.get("width"),Ht=this.get("height");Gt||Ht||(Gt=200),Gt?(Ht=W*Gt,this.set("height",Ht)):(Gt=1/W*Ht,this.set("width",Gt));var ee=Object(y.b)("<div class='"+st+"' style='width: "+Gt+"px; height: "+Ht+"px; overflow: hidden; position: relative;'></div>");Object(n.x)(jt)&&(jt=document.getElementById(jt)),jt?jt.appendChild(ee):u.get("container").appendChild(ee),this.set("container",ee);var ae=Object(y.b)('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');ee.appendChild(ae);var je=Object(y.b)('<span style="display: table-cell; vertical-align: middle; "></span>');ae.appendChild(je),this.set("containerDOM",ae),this.set("containerSpan",je);var Fe=Object(y.b)('<img alt="" src="'+this.get("graphImg")+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');this.set("imgDOM",Fe),this.updateImgSize(),je.appendChild(Fe),this.updateCanvas()},f.prototype.updateImgSize=function(){var u=this.get("imgDOM"),I=this.get("width"),W=this.get("height");u.onload=function(){var st=function(jt,Gt){var Ht,ee;if(jt.naturalWidth)Ht=jt.naturalWidth,ee=jt.naturalHeight;else{var ae=new Image;ae.src=jt.src,ae.onload=function(){Gt&&Gt(ae.width,ae.height)}}return[Ht,ee]}(u);st[0]>st[1]?u.width=I:u.height=W}},f.prototype.updateCanvas=function(){if(this.get("refresh")){var u=this.get("graph");if(!u.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var I=this.get("width")/u.get("canvas").getCanvasBBox().width;this.set("ratio",I),this.updateViewport()}}},f.prototype.getViewport=function(){return this.get("viewport")},f.prototype.getContainer=function(){return this.get("container")},f.prototype.updateGraphImg=function(u){this.get("imgDOM").remove(),this.set("graphImg",u);var I=Object(y.b)('<img alt="" src="'+u+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');this.set("imgDOM",I),I.src=u,this.updateImgSize(),this.get("containerSpan").appendChild(I),this.updateCanvas()},f.prototype.destroy=function(){var u=this.get("container");u.parentNode.removeChild(u)},f}(s),Ou=function(){var kt=function(u,I){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,st){W.__proto__=st}||function(W,st){for(var jt in st)Object.prototype.hasOwnProperty.call(st,jt)&&(W[jt]=st[jt])})(u,I)};return function(f,u){function I(){this.constructor=f}kt(f,u),f.prototype=u===null?Object.create(u):(I.prototype=u.prototype,new I)}}(),la=function(){return(la=Object.assign||function(f){for(var u,I=1,W=arguments.length;I<W;I++)for(var st in u=arguments[I])Object.prototype.hasOwnProperty.call(u,st)&&(f[st]=u[st]);return f}).apply(this,arguments)},rs=_s.distance,Ta={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},Vs={PluginBase:s,Menu:C,Grid:S,Minimap:ht,Bundling:q,ToolBar:k,Tooltip:g,Fisheye:P,TimeBar:Ce,ImageMinimap:xu,EdgeFilterLens:function(kt){function f(){return kt!==null&&kt.apply(this,arguments)||this}return Ou(f,kt),f.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:Object(n.c)(Ta),showLabel:"edge",scaleRBy:"wheel"}},f.prototype.getEvents=function(){var u;switch(this.get("trigger")){case"click":u={click:"filter"};break;case"drag":u={click:"createDelegate"};break;default:u={mousemove:"filter"}}return u},f.prototype.init=function(){var u=this.get("showLabel"),I=u==="node"||u==="both",W=u==="edge"||u==="both";this.set("showNodeLabel",I),this.set("showEdgeLabel",W),this.get("shouldShow")||this.set("shouldShow",function(){return!0})},f.prototype.createDelegate=function(u){var I=this,W=I.get("delegate");W&&!W.destroyed||(I.filter(u),(W=I.get("delegate")).on("dragstart",function(st){}),W.on("drag",function(st){I.filter(st)}),this.get("scaleRBy")==="wheel"&&W.on("mousewheel",function(st){I.scaleRByWheel(st)}))},f.prototype.scaleRByWheel=function(u){if(u&&u.originalEvent){u.preventDefault&&u.preventDefault();var I,W=this.get("graph"),st=this.get("delegate");(st?{x:st.attr("x"),y:st.attr("y")}:void 0)||W.getPointByClient(u.clientX,u.clientY),I=u.originalEvent.wheelDelta<0?.95:1/.95;var jt=this.get("maxR"),Gt=this.get("minR"),Ht=this.get("r");(Ht>(jt||W.get("height"))&&I>1||Ht<(Gt||.05*W.get("height"))&&I<1)&&(I=1),Ht*=I,this.set("r",Ht),this.filter(u)}},f.prototype.filter=function(u){var I=this.get("graph"),W=I.getNodes(),st={},jt=this.get("r"),Gt=this.get("type"),Ht={x:u.x,y:u.y};this.updateDelegate(Ht,jt);var ee=this.get("shouldShow"),ae=this.get("vShapes");ae&&ae.forEach(function(wn){wn.remove(),wn.destroy()}),ae=[],W.forEach(function(wn){var Nn=wn.getModel(),Bn=Nn.x,Fn=Nn.y;rs({x:Bn,y:Fn},Ht)<jt&&(st[Nn.id]=wn)});var je=I.getEdges(),Fe=[];je.forEach(function(wn){var Nn=wn.getModel(),Bn=Nn.source,Fn=Nn.target;ee(Nn)&&(Gt==="only-source"||Gt==="one"?st[Bn]&&!st[Fn]&&Fe.push(wn):Gt==="only-target"||Gt==="one"?st[Fn]&&!st[Bn]&&Fe.push(wn):Gt==="both"&&st[Bn]&&st[Fn]&&Fe.push(wn))});var Ue=this.get("showNodeLabel"),Ke=this.get("showEdgelabel"),bn=I.get("group");Fe.forEach(function(wn){wn.get("group").get("children").forEach(function(Nn){var Bn=Nn.get("type"),Fn=bn.addShape(Bn,{attrs:Nn.attr()});ae.push(Fn),Ue&&Bn==="text"&&Fn.set("visible",!0)})}),Object.keys(st).forEach(function(wn){var Nn=st[wn].get("group").clone();if(bn.add(Nn),ae.push(Nn),Ke)for(var Bn=Nn.get("children"),Fn=0;Fn<Bn.length;Fn++){var sr=Bn[Fn];sr.get("type")==="text"&&sr.set("visible",!0)}}),this.set("vShapes",ae)},f.prototype.updateParams=function(u){var I=u.r,W=u.trigger,st=u.minR,jt=u.maxR,Gt=u.scaleRBy,Ht=u.showLabel,ee=u.shouldShow;if(isNaN(u.r)||this.set("r",I),isNaN(jt)||this.set("maxR",jt),isNaN(st)||this.set("minR",st),W!=="mousemove"&&W!=="click"||this.set("trigger",W),Gt==="wheel"||Gt==="unset"){this.set("scaleRBy",Gt),this.get("delegate").remove(),this.get("delegate").destroy();var ae=this.get("dPercentText");ae&&(ae.remove(),ae.destroy())}Ht!=="node"&&Ht!=="both"||this.set("showNodeLabel",!0),Ht!=="edge"&&Ht!=="both"||this.set("showEdgeLabel",!0),ee&&this.set("shouldShow",ee)},f.prototype.updateDelegate=function(u,I){var W=this,st=W.get("graph"),jt=W.get("delegate");if(!jt||jt.destroyed){var Gt=st.get("group"),Ht=W.get("delegateStyle")||Ta;jt=Gt.addShape("circle",{attrs:la({r:I,x:u.x,y:u.y},Ht),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&jt.on("mousewheel",function(ee){W.scaleRByWheel(ee)})}else jt.attr({x:u.x,y:u.y,r:I});W.set("delegate",jt)},f.prototype.clear=function(){var u=this.get("vShapes");u&&u.forEach(function(W){W.remove(),W.destroy()}),u=[],this.set("vShapes",u);var I=this.get("delegate");I&&!I.destroyed&&(I.remove(),I.destroy())},f.prototype.destroy=function(){this.clear()},f}(s)};A.a=Vs},function(a,A,e){"use strict";e.d(A,"b",function(){return p}),e.d(A,"c",function(){return m}),e.d(A,"a",function(){return O});var r=e(22);function p(l,E){var j=l.cfg.el,y=l.attr(),n={dx:y.shadowOffsetX,dy:y.shadowOffsetY,blur:y.shadowBlur,color:y.shadowColor};if(n.dx||n.dy||n.blur||n.color){var s=E.find("filter",n);s||(s=E.addShadow(n)),j.setAttribute("filter","url(#"+s+")")}else j.removeAttribute("filter")}function m(l){var E=l.attr().matrix;if(E){for(var j=l.cfg.el,y=[],n=0;n<9;n+=3)y.push(E[n]+","+E[n+1]);(y=y.join(",")).indexOf("NaN")===-1?j.setAttribute("transform","matrix("+y+")"):console.warn("invalid matrix:",E)}}function O(l,E){var j=l.getClip(),y=l.get("el");if(j){if(j&&!y.hasAttribute("clip-path")){Object(r.a)(j),j.createPath(E);var n=E.addClip(j);y.setAttribute("clip-path","url(#"+n+")")}}else y.removeAttribute("clip-path")}},function(a,A,e){"use strict";var r=e(24),p=e(46).Graph;function m(l,E,j,y){var n;do n=r.uniqueId(y);while(l.hasNode(n));return j.dummy=E,l.setNode(n,j),n}function O(l){return r.max(r.map(l.nodes(),function(E){var j=l.node(E).rank;if(!r.isUndefined(j))return j}))}a.exports={addDummyNode:m,simplify:function(E){var j=new p().setGraph(E.graph());return r.forEach(E.nodes(),function(y){j.setNode(y,E.node(y))}),r.forEach(E.edges(),function(y){var n=j.edge(y.v,y.w)||{weight:0,minlen:1},s=E.edge(y);j.setEdge(y.v,y.w,{weight:n.weight+s.weight,minlen:Math.max(n.minlen,s.minlen)})}),j},asNonCompoundGraph:function(E){var j=new p({multigraph:E.isMultigraph()}).setGraph(E.graph());return r.forEach(E.nodes(),function(y){E.children(y).length||j.setNode(y,E.node(y))}),r.forEach(E.edges(),function(y){j.setEdge(y,E.edge(y))}),j},successorWeights:function(E){var j=r.map(E.nodes(),function(y){var n={};return r.forEach(E.outEdges(y),function(s){n[s.w]=(n[s.w]||0)+E.edge(s).weight}),n});return r.zipObject(E.nodes(),j)},predecessorWeights:function(E){var j=r.map(E.nodes(),function(y){var n={};return r.forEach(E.inEdges(y),function(s){n[s.v]=(n[s.v]||0)+E.edge(s).weight}),n});return r.zipObject(E.nodes(),j)},intersectRect:function(E,j){var y,n,s=E.x,d=E.y,M=j.x-s,S=j.y-d,T=E.width/2,v=E.height/2;if(!M&&!S)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(S)*T>Math.abs(M)*v?(S<0&&(v=-v),y=v*M/S,n=v):(M<0&&(T=-T),y=T,n=T*S/M),{x:s+y,y:d+n}},buildLayerMatrix:function(E){var j=r.map(r.range(O(E)+1),function(){return[]});return r.forEach(E.nodes(),function(y){var n=E.node(y),s=n.rank;r.isUndefined(s)||(j[s][n.order]=y)}),j},normalizeRanks:function(E){var j=r.min(r.map(E.nodes(),function(y){return E.node(y).rank}));r.forEach(E.nodes(),function(y){var n=E.node(y);r.has(n,"rank")&&(n.rank-=j)})},removeEmptyRanks:function(E){var j=r.min(r.map(E.nodes(),function(d){return E.node(d).rank})),y=[];r.forEach(E.nodes(),function(d){var M=E.node(d).rank-j;y[M]||(y[M]=[]),y[M].push(d)});var n=0,s=E.graph().nodeRankFactor;r.forEach(y,function(d,M){r.isUndefined(d)&&M%s!=0?--n:n&&r.forEach(d,function(S){E.node(S).rank+=n})})},addBorderNode:function(E,j,y,n){var s={width:0,height:0};return arguments.length>=4&&(s.rank=y,s.order=n),m(E,"border",s,j)},maxRank:O,partition:function(E,j){var y={lhs:[],rhs:[]};return r.forEach(E,function(n){j(n)?y.lhs.push(n):y.rhs.push(n)}),y},time:function(E,j){var y=r.now();try{return j()}finally{console.log(E+" time: "+(r.now()-y)+"ms")}},notime:function(E,j){return j()}}},function(a,A,e){"use strict";var r={};e.r(r),e.d(r,"proccessToFunc",function(){return j}),e.d(r,"buildTextureData",function(){return y}),e.d(r,"buildTextureDataWithOneEdgeAttr",function(){return n}),e.d(r,"buildTextureDataWithTwoEdgeAttr",function(){return s}),e.d(r,"attributesToTextureData",function(){return d}),e.d(r,"arrayToTextureData",function(){return M}),e.d(r,"radialLayout",function(){return S});var p=e(1),m=e(123),O=e(5),l=e(0),E=O.n.traverseTree,j=function(C,N){return C?Object(l.t)(C)?function(X){return C}:C:function(X){return N||1}},y=function(C,N){var X=[],tt=[],it={},pt=0;for(pt=0;pt<C.length;pt++){var ft=C[pt];it[ft.id]=pt,X.push(ft.x),X.push(ft.y),X.push(0),X.push(0),tt.push([])}for(pt=0;pt<N.length;pt++){var Ot=N[pt];tt[it[Ot.source]].push(it[Ot.target]),tt[it[Ot.target]].push(it[Ot.source])}var wt=0;for(pt=0;pt<C.length;pt++){var xt=X.length,lt=tt[pt],Vt=lt.length;X[4*pt+2]=xt,X[4*pt+3]=lt.length,wt=Math.max(wt,lt.length);for(var Lt=0;Lt<Vt;++Lt){var Et=lt[Lt];X.push(+Et)}}for(;X.length%4!=0;)X.push(0);return{array:new Float32Array(X),maxEdgePerVetex:wt}},n=function(C,N,X){var tt=[],it=[],pt={},ft=0;for(ft=0;ft<C.length;ft++){var Ot=C[ft];pt[Ot.id]=ft,tt.push(Ot.x),tt.push(Ot.y),tt.push(0),tt.push(0),it.push([])}for(ft=0;ft<N.length;ft++){var wt=N[ft];it[pt[wt.source]].push(pt[wt.target]),it[pt[wt.source]].push(X(wt)),it[pt[wt.target]].push(pt[wt.source]),it[pt[wt.target]].push(X(wt))}var xt=0;for(ft=0;ft<C.length;ft++){var lt=tt.length,Vt=it[ft],Lt=Vt.length;tt[4*ft+2]=lt,tt[4*ft+3]=Lt/2,xt=Math.max(xt,Lt/2);for(var Et=0;Et<Lt;++Et){var J=Vt[Et];tt.push(+J)}}for(;tt.length%4!=0;)tt.push(0);return{array:new Float32Array(tt),maxEdgePerVetex:xt}},s=function(C,N,X,tt){var it=[],pt=[],ft={},Ot=0;for(Ot=0;Ot<C.length;Ot++){var wt=C[Ot];ft[wt.id]=Ot,it.push(wt.x),it.push(wt.y),it.push(0),it.push(0),pt.push([])}for(Ot=0;Ot<N.length;Ot++){var xt=N[Ot];pt[ft[xt.source]].push(ft[xt.target]),pt[ft[xt.source]].push(X(xt)),pt[ft[xt.source]].push(tt(xt)),pt[ft[xt.source]].push(0),pt[ft[xt.target]].push(ft[xt.source]),pt[ft[xt.target]].push(X(xt)),pt[ft[xt.target]].push(tt(xt)),pt[ft[xt.target]].push(0)}var lt=0;for(Ot=0;Ot<C.length;Ot++){var Vt=it.length,Lt=pt[Ot],Et=Lt.length;it[4*Ot+2]=Vt+1048576*Et/4,it[4*Ot+3]=0,lt=Math.max(lt,Et/4);for(var J=0;J<Et;++J){var ht=Lt[J];it.push(+ht)}}for(;it.length%4!=0;)it.push(0);return{array:new Float32Array(it),maxEdgePerVetex:lt}},d=function(C,N){var X=[],tt=C.length,it={};return N.forEach(function(pt){C.forEach(function(ft,Ot){if(it[pt[ft]]===void 0&&(it[pt[ft]]=Object.keys(it).length),X.push(it[pt[ft]]),Ot===tt-1)for(;X.length%4!=0;)X.push(0)})}),{array:new Float32Array(X),count:Object.keys(it).length}},M=function(C){for(var N=[],X=C.length,tt=C[0].length,it=function(Ot){C.forEach(function(wt,xt){if(N.push(wt[Ot]),xt===X-1)for(;N.length%4!=0;)N.push(0)})},pt=0;pt<tt;pt++)it(pt);return new Float32Array(N)},S=function(C,N){var X={x:1/0,y:1/0},tt={x:-1/0,y:-1/0},it="x",pt="y";N&&["V","TB","BT"].indexOf(N)>=0&&(pt="x",it="y");var ft=0;E(C,function(xt){return ft++,xt.x>tt.x&&(tt.x=xt.x),xt.x<X.x&&(X.x=xt.x),xt.y>tt.y&&(tt.y=xt.y),xt.y<X.y&&(X.y=xt.y),!0});var Ot=2*Math.PI/ft,wt=tt[pt]-X[pt];return wt===0||E(C,function(xt){var lt=(xt[pt]-X[pt])/wt*(2*Math.PI-Ot)+Ot,Vt=Math.abs(it==="x"?xt.x-C.x:xt.y-C.y);return xt.x=Vt*Math.cos(lt),xt.y=Vt*Math.sin(lt),!0}),C},T=e(121),v=Object(p.a)(Object(p.a)(Object(p.a)(Object(p.a)({},O.n),m),r),T);A.a=v},function(a,A,e){"use strict";function r(O,l){var E=[],j=O[0],y=O[1],n=O[2],s=O[3],d=O[4],M=O[5],S=O[6],T=O[7],v=O[8],x=l[0],C=l[1],N=l[2],X=l[3],tt=l[4],it=l[5],pt=l[6],ft=l[7],Ot=l[8];return E[0]=x*j+C*s+N*S,E[1]=x*y+C*d+N*T,E[2]=x*n+C*M+N*v,E[3]=X*j+tt*s+it*S,E[4]=X*y+tt*d+it*T,E[5]=X*n+tt*M+it*v,E[6]=pt*j+ft*s+Ot*S,E[7]=pt*y+ft*d+Ot*T,E[8]=pt*n+ft*M+Ot*v,E}function p(O,l){var E=[],j=l[0],y=l[1];return E[0]=O[0]*j+O[3]*y+O[6],E[1]=O[1]*j+O[4]*y+O[7],E}function m(O){var l=[],E=O[0],j=O[1],y=O[2],n=O[3],s=O[4],d=O[5],M=O[6],S=O[7],T=O[8],v=T*s-d*S,x=-T*n+d*M,C=S*n-s*M,N=E*v+j*x+y*C;return N?(N=1/N,l[0]=v*N,l[1]=(-T*j+y*S)*N,l[2]=(d*j-y*s)*N,l[3]=x*N,l[4]=(T*E-y*M)*N,l[5]=(-d*E+y*n)*N,l[6]=C*N,l[7]=(-S*E+j*M)*N,l[8]=(s*E-j*n)*N,l):null}e.d(A,"b",function(){return r}),e.d(A,"c",function(){return p}),e.d(A,"a",function(){return m})},function(a,A,e){"use strict";e.r(A),e.d(A,"create",function(){return p}),e.d(A,"clone",function(){return m}),e.d(A,"length",function(){return O}),e.d(A,"fromValues",function(){return l}),e.d(A,"copy",function(){return E}),e.d(A,"set",function(){return j}),e.d(A,"add",function(){return y}),e.d(A,"subtract",function(){return n}),e.d(A,"multiply",function(){return s}),e.d(A,"divide",function(){return d}),e.d(A,"ceil",function(){return M}),e.d(A,"floor",function(){return S}),e.d(A,"min",function(){return T}),e.d(A,"max",function(){return v}),e.d(A,"round",function(){return x}),e.d(A,"scale",function(){return C}),e.d(A,"scaleAndAdd",function(){return N}),e.d(A,"distance",function(){return X}),e.d(A,"squaredDistance",function(){return tt}),e.d(A,"squaredLength",function(){return it}),e.d(A,"negate",function(){return pt}),e.d(A,"inverse",function(){return ft}),e.d(A,"normalize",function(){return Ot}),e.d(A,"dot",function(){return wt}),e.d(A,"cross",function(){return xt}),e.d(A,"lerp",function(){return lt}),e.d(A,"hermite",function(){return Vt}),e.d(A,"bezier",function(){return Lt}),e.d(A,"random",function(){return Et}),e.d(A,"transformMat4",function(){return J}),e.d(A,"transformMat3",function(){return ht}),e.d(A,"transformQuat",function(){return vt}),e.d(A,"rotateX",function(){return bt}),e.d(A,"rotateY",function(){return At}),e.d(A,"rotateZ",function(){return q}),e.d(A,"angle",function(){return ct}),e.d(A,"zero",function(){return ot}),e.d(A,"str",function(){return _}),e.d(A,"exactEquals",function(){return P}),e.d(A,"equals",function(){return Y}),e.d(A,"sub",function(){return h}),e.d(A,"mul",function(){return g}),e.d(A,"div",function(){return F}),e.d(A,"dist",function(){return V}),e.d(A,"sqrDist",function(){return H}),e.d(A,"len",function(){return et}),e.d(A,"sqrLen",function(){return nt}),e.d(A,"forEach",function(){return St});var r=e(11);function p(){var dt=new r.a(3);return r.a!=Float32Array&&(dt[0]=0,dt[1]=0,dt[2]=0),dt}function m(dt){var gt=new r.a(3);return gt[0]=dt[0],gt[1]=dt[1],gt[2]=dt[2],gt}function O(dt){var gt=dt[0],yt=dt[1],Ct=dt[2];return Math.hypot(gt,yt,Ct)}function l(dt,gt,yt){var Ct=new r.a(3);return Ct[0]=dt,Ct[1]=gt,Ct[2]=yt,Ct}function E(dt,gt){return dt[0]=gt[0],dt[1]=gt[1],dt[2]=gt[2],dt}function j(dt,gt,yt,Ct){return dt[0]=gt,dt[1]=yt,dt[2]=Ct,dt}function y(dt,gt,yt){return dt[0]=gt[0]+yt[0],dt[1]=gt[1]+yt[1],dt[2]=gt[2]+yt[2],dt}function n(dt,gt,yt){return dt[0]=gt[0]-yt[0],dt[1]=gt[1]-yt[1],dt[2]=gt[2]-yt[2],dt}function s(dt,gt,yt){return dt[0]=gt[0]*yt[0],dt[1]=gt[1]*yt[1],dt[2]=gt[2]*yt[2],dt}function d(dt,gt,yt){return dt[0]=gt[0]/yt[0],dt[1]=gt[1]/yt[1],dt[2]=gt[2]/yt[2],dt}function M(dt,gt){return dt[0]=Math.ceil(gt[0]),dt[1]=Math.ceil(gt[1]),dt[2]=Math.ceil(gt[2]),dt}function S(dt,gt){return dt[0]=Math.floor(gt[0]),dt[1]=Math.floor(gt[1]),dt[2]=Math.floor(gt[2]),dt}function T(dt,gt,yt){return dt[0]=Math.min(gt[0],yt[0]),dt[1]=Math.min(gt[1],yt[1]),dt[2]=Math.min(gt[2],yt[2]),dt}function v(dt,gt,yt){return dt[0]=Math.max(gt[0],yt[0]),dt[1]=Math.max(gt[1],yt[1]),dt[2]=Math.max(gt[2],yt[2]),dt}function x(dt,gt){return dt[0]=Math.round(gt[0]),dt[1]=Math.round(gt[1]),dt[2]=Math.round(gt[2]),dt}function C(dt,gt,yt){return dt[0]=gt[0]*yt,dt[1]=gt[1]*yt,dt[2]=gt[2]*yt,dt}function N(dt,gt,yt,Ct){return dt[0]=gt[0]+yt[0]*Ct,dt[1]=gt[1]+yt[1]*Ct,dt[2]=gt[2]+yt[2]*Ct,dt}function X(dt,gt){var yt=gt[0]-dt[0],Ct=gt[1]-dt[1],Pt=gt[2]-dt[2];return Math.hypot(yt,Ct,Pt)}function tt(dt,gt){var yt=gt[0]-dt[0],Ct=gt[1]-dt[1],Pt=gt[2]-dt[2];return yt*yt+Ct*Ct+Pt*Pt}function it(dt){var gt=dt[0],yt=dt[1],Ct=dt[2];return gt*gt+yt*yt+Ct*Ct}function pt(dt,gt){return dt[0]=-gt[0],dt[1]=-gt[1],dt[2]=-gt[2],dt}function ft(dt,gt){return dt[0]=1/gt[0],dt[1]=1/gt[1],dt[2]=1/gt[2],dt}function Ot(dt,gt){var yt=gt[0],Ct=gt[1],Pt=gt[2],Ft=yt*yt+Ct*Ct+Pt*Pt;return Ft>0&&(Ft=1/Math.sqrt(Ft)),dt[0]=gt[0]*Ft,dt[1]=gt[1]*Ft,dt[2]=gt[2]*Ft,dt}function wt(dt,gt){return dt[0]*gt[0]+dt[1]*gt[1]+dt[2]*gt[2]}function xt(dt,gt,yt){var Ct=gt[0],Pt=gt[1],Ft=gt[2],Tt=yt[0],zt=yt[1],Xt=yt[2];return dt[0]=Pt*Xt-Ft*zt,dt[1]=Ft*Tt-Ct*Xt,dt[2]=Ct*zt-Pt*Tt,dt}function lt(dt,gt,yt,Ct){var Pt=gt[0],Ft=gt[1],Tt=gt[2];return dt[0]=Pt+Ct*(yt[0]-Pt),dt[1]=Ft+Ct*(yt[1]-Ft),dt[2]=Tt+Ct*(yt[2]-Tt),dt}function Vt(dt,gt,yt,Ct,Pt,Ft){var Tt=Ft*Ft,zt=Tt*(2*Ft-3)+1,Xt=Tt*(Ft-2)+Ft,re=Tt*(Ft-1),de=Tt*(3-2*Ft);return dt[0]=gt[0]*zt+yt[0]*Xt+Ct[0]*re+Pt[0]*de,dt[1]=gt[1]*zt+yt[1]*Xt+Ct[1]*re+Pt[1]*de,dt[2]=gt[2]*zt+yt[2]*Xt+Ct[2]*re+Pt[2]*de,dt}function Lt(dt,gt,yt,Ct,Pt,Ft){var Tt=1-Ft,zt=Tt*Tt,Xt=Ft*Ft,re=zt*Tt,de=3*Ft*zt,ye=3*Xt*Tt,we=Xt*Ft;return dt[0]=gt[0]*re+yt[0]*de+Ct[0]*ye+Pt[0]*we,dt[1]=gt[1]*re+yt[1]*de+Ct[1]*ye+Pt[1]*we,dt[2]=gt[2]*re+yt[2]*de+Ct[2]*ye+Pt[2]*we,dt}function Et(dt,gt){gt=gt||1;var yt=2*r.c()*Math.PI,Ct=2*r.c()-1,Pt=Math.sqrt(1-Ct*Ct)*gt;return dt[0]=Math.cos(yt)*Pt,dt[1]=Math.sin(yt)*Pt,dt[2]=Ct*gt,dt}function J(dt,gt,yt){var Ct=gt[0],Pt=gt[1],Ft=gt[2],Tt=yt[3]*Ct+yt[7]*Pt+yt[11]*Ft+yt[15];return Tt=Tt||1,dt[0]=(yt[0]*Ct+yt[4]*Pt+yt[8]*Ft+yt[12])/Tt,dt[1]=(yt[1]*Ct+yt[5]*Pt+yt[9]*Ft+yt[13])/Tt,dt[2]=(yt[2]*Ct+yt[6]*Pt+yt[10]*Ft+yt[14])/Tt,dt}function ht(dt,gt,yt){var Ct=gt[0],Pt=gt[1],Ft=gt[2];return dt[0]=Ct*yt[0]+Pt*yt[3]+Ft*yt[6],dt[1]=Ct*yt[1]+Pt*yt[4]+Ft*yt[7],dt[2]=Ct*yt[2]+Pt*yt[5]+Ft*yt[8],dt}function vt(dt,gt,yt){var Ct=yt[0],Pt=yt[1],Ft=yt[2],Tt=yt[3],zt=gt[0],Xt=gt[1],re=gt[2],de=Pt*re-Ft*Xt,ye=Ft*zt-Ct*re,we=Ct*Xt-Pt*zt,De=Pt*we-Ft*ye,Ve=Ft*de-Ct*we,pn=Ct*ye-Pt*de,sn=2*Tt;return de*=sn,ye*=sn,we*=sn,De*=2,Ve*=2,pn*=2,dt[0]=zt+de+De,dt[1]=Xt+ye+Ve,dt[2]=re+we+pn,dt}function bt(dt,gt,yt,Ct){var Pt=[],Ft=[];return Pt[0]=gt[0]-yt[0],Pt[1]=gt[1]-yt[1],Pt[2]=gt[2]-yt[2],Ft[0]=Pt[0],Ft[1]=Pt[1]*Math.cos(Ct)-Pt[2]*Math.sin(Ct),Ft[2]=Pt[1]*Math.sin(Ct)+Pt[2]*Math.cos(Ct),dt[0]=Ft[0]+yt[0],dt[1]=Ft[1]+yt[1],dt[2]=Ft[2]+yt[2],dt}function At(dt,gt,yt,Ct){var Pt=[],Ft=[];return Pt[0]=gt[0]-yt[0],Pt[1]=gt[1]-yt[1],Pt[2]=gt[2]-yt[2],Ft[0]=Pt[2]*Math.sin(Ct)+Pt[0]*Math.cos(Ct),Ft[1]=Pt[1],Ft[2]=Pt[2]*Math.cos(Ct)-Pt[0]*Math.sin(Ct),dt[0]=Ft[0]+yt[0],dt[1]=Ft[1]+yt[1],dt[2]=Ft[2]+yt[2],dt}function q(dt,gt,yt,Ct){var Pt=[],Ft=[];return Pt[0]=gt[0]-yt[0],Pt[1]=gt[1]-yt[1],Pt[2]=gt[2]-yt[2],Ft[0]=Pt[0]*Math.cos(Ct)-Pt[1]*Math.sin(Ct),Ft[1]=Pt[0]*Math.sin(Ct)+Pt[1]*Math.cos(Ct),Ft[2]=Pt[2],dt[0]=Ft[0]+yt[0],dt[1]=Ft[1]+yt[1],dt[2]=Ft[2]+yt[2],dt}function ct(dt,gt){var yt=dt[0],Ct=dt[1],Pt=dt[2],Ft=gt[0],Tt=gt[1],zt=gt[2],Xt=Math.sqrt(yt*yt+Ct*Ct+Pt*Pt)*Math.sqrt(Ft*Ft+Tt*Tt+zt*zt),re=Xt&&wt(dt,gt)/Xt;return Math.acos(Math.min(Math.max(re,-1),1))}function ot(dt){return dt[0]=0,dt[1]=0,dt[2]=0,dt}function _(dt){return"vec3("+dt[0]+", "+dt[1]+", "+dt[2]+")"}function P(dt,gt){return dt[0]===gt[0]&&dt[1]===gt[1]&&dt[2]===gt[2]}function Y(dt,gt){var yt=dt[0],Ct=dt[1],Pt=dt[2],Ft=gt[0],Tt=gt[1],zt=gt[2];return Math.abs(yt-Ft)<=r.b*Math.max(1,Math.abs(yt),Math.abs(Ft))&&Math.abs(Ct-Tt)<=r.b*Math.max(1,Math.abs(Ct),Math.abs(Tt))&&Math.abs(Pt-zt)<=r.b*Math.max(1,Math.abs(Pt),Math.abs(zt))}var k,h=n,g=s,F=d,V=X,H=tt,et=O,nt=it,St=(k=p(),function(dt,gt,yt,Ct,Pt,Ft){var Tt,zt;for(gt||(gt=3),yt||(yt=0),zt=Ct?Math.min(Ct*gt+yt,dt.length):dt.length,Tt=yt;Tt<zt;Tt+=gt)k[0]=dt[Tt],k[1]=dt[Tt+1],k[2]=dt[Tt+2],Pt(k,k,Ft),dt[Tt]=k[0],dt[Tt+1]=k[1],dt[Tt+2]=k[2];return dt})},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.STACK_OVERFLOW=A.CIRCULAR_DEPENDENCY_IN_FACTORY=A.POST_CONSTRUCT_ERROR=A.MULTIPLE_POST_CONSTRUCT_METHODS=A.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=A.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=A.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=A.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=A.ARGUMENTS_LENGTH_MISMATCH=A.INVALID_DECORATOR_OPERATION=A.INVALID_TO_SELF_VALUE=A.INVALID_FUNCTION_BINDING=A.INVALID_MIDDLEWARE_RETURN=A.NO_MORE_SNAPSHOTS_AVAILABLE=A.INVALID_BINDING_TYPE=A.NOT_IMPLEMENTED=A.CIRCULAR_DEPENDENCY=A.UNDEFINED_INJECT_ANNOTATION=A.MISSING_INJECT_ANNOTATION=A.MISSING_INJECTABLE_ANNOTATION=A.NOT_REGISTERED=A.CANNOT_UNBIND=A.AMBIGUOUS_MATCH=A.KEY_NOT_FOUND=A.NULL_ARGUMENT=A.DUPLICATED_METADATA=A.DUPLICATED_INJECTABLE_DECORATOR=void 0,A.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",A.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",A.NULL_ARGUMENT="NULL argument",A.KEY_NOT_FOUND="Key Not Found",A.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",A.CANNOT_UNBIND="Could not unbind serviceIdentifier:",A.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",A.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",A.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",A.UNDEFINED_INJECT_ANNOTATION=function(r){return"@inject called with undefined this could mean that the class "+r+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},A.CIRCULAR_DEPENDENCY="Circular dependency found:",A.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",A.INVALID_BINDING_TYPE="Invalid binding type:",A.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",A.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",A.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",A.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",A.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",A.ARGUMENTS_LENGTH_MISMATCH=function(){for(var r=[],p=0;p<arguments.length;p++)r[p]=arguments[p];return"The number of constructor arguments in the derived class "+r[0]+" must be >= than the number of constructor arguments of its base class."},A.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",A.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",A.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",A.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",A.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",A.POST_CONSTRUCT_ERROR=function(){for(var r=[],p=0;p<arguments.length;p++)r[p]=arguments[p];return"@postConstruct error in class "+r[0]+": "+r[1]},A.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var r=[],p=0;p<arguments.length;p++)r[p]=arguments[p];return"It looks like there is a circular dependency in one of the '"+r[0]+"' bindings. Please investigate bindings withservice identifier '"+r[1]+"'."},A.STACK_OVERFLOW="Maximum call stack size exceeded"},function(a,A,e){var r;try{r={clone:e(272),constant:e(134),each:e(181),filter:e(184),has:e(195),isArray:e(26),isEmpty:e(348),isFunction:e(83),isUndefined:e(196),keys:e(58),map:e(197),reduce:e(199),size:e(351),transform:e(357),union:e(358),values:e(205)}}catch(p){}r||(r=window._),a.exports=r},function(a,A){function e(r){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(r)}a.exports=function(r){var p=e(r);return r!=null&&(p=="object"||p=="function")}},function(a,A,e){var r=e(305),p=e(103),m=e(129),O=m&&m.isTypedArray,l=O?p(O):r;a.exports=l},function(a,A,e){"use strict";var r=e(123),p=Object(r.getColorsWithSubjectColor)("rgb(95, 149, 255)","rgb(255, 255, 255)");A.a={version:"0.0.12",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:p.mainStroke,fill:p.mainFill},size:20,color:p.mainStroke,linkPoints:{size:8,lineWidth:1,fill:p.activeFill,stroke:p.activeStroke}},nodeStateStyles:{active:{fill:p.activeFill,stroke:p.activeStroke,lineWidth:2,shadowColor:p.mainStroke,shadowBlur:10},selected:{fill:p.selectedFill,stroke:p.selectedStroke,lineWidth:4,shadowColor:p.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:p.highlightFill,stroke:p.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:p.inactiveFill,stroke:p.inactiveStroke,lineWidth:1},disable:{fill:p.disableFill,stroke:p.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:p.edgeMainStroke,lineAppendWidth:2},color:p.edgeMainStroke},edgeStateStyles:{active:{stroke:p.edgeActiveStroke,lineWidth:1},selected:{stroke:p.edgeSelectedStroke,lineWidth:2,shadowColor:p.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:p.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:p.edgeInactiveStroke,lineWidth:1},disable:{stroke:p.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:p.comboMainFill,lineWidth:1,stroke:p.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:p.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:p.comboActiveStroke,lineWidth:1,fill:p.comboActiveFill},selected:{stroke:p.comboSelectedStroke,lineWidth:2,fill:p.comboSelectedFill,shadowColor:p.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:p.comboHighlightStroke,lineWidth:2,fill:p.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:p.comboInactiveStroke,fill:p.comboInactiveFill,lineWidth:1},disable:{stroke:p.comboDisableStroke,fill:p.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"}},function(a,A,e){var r;try{r=e(270)}catch(p){}r||(r=window.graphlib),a.exports=r},function(a,A,e){function r(l){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(l)}var p=e(163),m=(typeof self=="undefined"?"undefined":r(self))=="object"&&self&&self.Object===Object&&self,O=p||m||Function("return this")();a.exports=O},function(a,A){function e(r){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(r)}a.exports=function(r){return r!=null&&e(r)=="object"}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Metadata=void 0;var r=e(32),p=function(){function m(O,l){this.key=O,this.value=l}return m.prototype.toString=function(){return this.key===r.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},m}();A.Metadata=p},function(a,A){},function(a,A,e){"use strict";e.r(A),e.d(A,"catmullRomToBezier",function(){return E}),e.d(A,"fillPath",function(){return Vt}),e.d(A,"fillPathByDiff",function(){return J}),e.d(A,"formatPath",function(){return bt}),e.d(A,"intersection",function(){return wt}),e.d(A,"parsePathArray",function(){return T}),e.d(A,"parsePathString",function(){return l}),e.d(A,"pathToAbsolute",function(){return y}),e.d(A,"pathToCurve",function(){return M}),e.d(A,"rectPath",function(){return tt});var r=e(0),p=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,m=new RegExp("([a-z])["+p+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+p+"]*,?["+p+"]*)+)","ig"),O=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+p+"]*,?["+p+"]*","ig"),l=function(q){if(!q)return null;if(Object(r.m)(q))return q;var ct={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},ot=[];return String(q).replace(m,function(_,P,Y){var k=[],h=P.toLowerCase();if(Y.replace(O,function(g,F){F&&k.push(+F)}),h==="m"&&k.length>2&&(ot.push([P].concat(k.splice(0,2))),h="l",P=P==="m"?"l":"L"),h==="o"&&k.length===1&&ot.push([P,k[0]]),h==="r")ot.push([P].concat(k));else for(;k.length>=ct[h]&&(ot.push([P].concat(k.splice(0,ct[h]))),ct[h]););return q}),ot},E=function(q,ct){for(var ot=[],_=0,P=q.length;P-2*!ct>_;_+=2){var Y=[{x:+q[_-2],y:+q[_-1]},{x:+q[_],y:+q[_+1]},{x:+q[_+2],y:+q[_+3]},{x:+q[_+4],y:+q[_+5]}];ct?_?P-4===_?Y[3]={x:+q[0],y:+q[1]}:P-2===_&&(Y[2]={x:+q[0],y:+q[1]},Y[3]={x:+q[2],y:+q[3]}):Y[0]={x:+q[P-2],y:+q[P-1]}:P-4===_?Y[3]=Y[2]:_||(Y[0]={x:+q[_],y:+q[_+1]}),ot.push(["C",(-Y[0].x+6*Y[1].x+Y[2].x)/6,(-Y[0].y+6*Y[1].y+Y[2].y)/6,(Y[1].x+6*Y[2].x-Y[3].x)/6,(Y[1].y+6*Y[2].y-Y[3].y)/6,Y[2].x,Y[2].y])}return ot},j=function(q,ct,ot,_,P){var Y=[];if(P===null&&_===null&&(_=ot),q=+q,ct=+ct,ot=+ot,_=+_,P!==null){var k=Math.PI/180,h=q+ot*Math.cos(-_*k),g=q+ot*Math.cos(-P*k);Y=[["M",h,ct+ot*Math.sin(-_*k)],["A",ot,ot,0,+(P-_>180),0,g,ct+ot*Math.sin(-P*k)]]}else Y=[["M",q,ct],["m",0,-_],["a",ot,_,0,1,1,0,2*_],["a",ot,_,0,1,1,0,-2*_],["z"]];return Y},y=function(q){if(!(q=l(q))||!q.length)return[["M",0,0]];var ct,ot,_=[],P=0,Y=0,k=0,h=0,g=0;q[0][0]==="M"&&(k=P=+q[0][1],h=Y=+q[0][2],g++,_[0]=["M",P,Y]);for(var F=q.length===3&&q[0][0]==="M"&&q[1][0].toUpperCase()==="R"&&q[2][0].toUpperCase()==="Z",V=void 0,H=void 0,et=g,nt=q.length;et<nt;et++){if(_.push(V=[]),(ct=(H=q[et])[0])!==ct.toUpperCase())switch(V[0]=ct.toUpperCase(),V[0]){case"A":V[1]=H[1],V[2]=H[2],V[3]=H[3],V[4]=H[4],V[5]=H[5],V[6]=+H[6]+P,V[7]=+H[7]+Y;break;case"V":V[1]=+H[1]+Y;break;case"H":V[1]=+H[1]+P;break;case"R":for(var St=2,dt=(ot=[P,Y].concat(H.slice(1))).length;St<dt;St++)ot[St]=+ot[St]+P,ot[++St]=+ot[St]+Y;_.pop(),_=_.concat(E(ot,F));break;case"O":_.pop(),(ot=j(P,Y,H[1],H[2])).push(ot[0]),_=_.concat(ot);break;case"U":_.pop(),_=_.concat(j(P,Y,H[1],H[2],H[3])),V=["U"].concat(_[_.length-1].slice(-2));break;case"M":k=+H[1]+P,h=+H[2]+Y;break;default:for(St=1,dt=H.length;St<dt;St++)V[St]=+H[St]+(St%2?P:Y)}else if(ct==="R")ot=[P,Y].concat(H.slice(1)),_.pop(),_=_.concat(E(ot,F)),V=["R"].concat(H.slice(-2));else if(ct==="O")_.pop(),(ot=j(P,Y,H[1],H[2])).push(ot[0]),_=_.concat(ot);else if(ct==="U")_.pop(),_=_.concat(j(P,Y,H[1],H[2],H[3])),V=["U"].concat(_[_.length-1].slice(-2));else for(var gt=0,yt=H.length;gt<yt;gt++)V[gt]=H[gt];if((ct=ct.toUpperCase())!=="O")switch(V[0]){case"Z":P=+k,Y=+h;break;case"H":P=V[1];break;case"V":Y=V[1];break;case"M":k=V[V.length-2],h=V[V.length-1];break;default:P=V[V.length-2],Y=V[V.length-1]}}return _},n=function(q,ct,ot,_){return[q,ct,ot,_,ot,_]},s=function(q,ct,ot,_,P,Y){return[1/3*q+2/3*ot,1/3*ct+2/3*_,1/3*P+2/3*ot,1/3*Y+2/3*_,P,Y]},d=function At(q,ct,ot,_,P,Y,k,h,g,F){ot===_&&(ot+=1);var V,H,et,nt,St,dt=120*Math.PI/180,gt=Math.PI/180*(+P||0),yt=[],Ct=function(Vr,ti,hi){return{x:Vr*Math.cos(hi)-ti*Math.sin(hi),y:Vr*Math.sin(hi)+ti*Math.cos(hi)}};if(F)H=F[0],et=F[1],nt=F[2],St=F[3];else{q=(V=Ct(q,ct,-gt)).x,ct=V.y,h=(V=Ct(h,g,-gt)).x,g=V.y,q===h&&ct===g&&(h+=1,g+=1);var Pt=(q-h)/2,Ft=(ct-g)/2,Tt=Pt*Pt/(ot*ot)+Ft*Ft/(_*_);Tt>1&&(ot*=Tt=Math.sqrt(Tt),_*=Tt);var zt=ot*ot,Xt=_*_,re=(Y===k?-1:1)*Math.sqrt(Math.abs((zt*Xt-zt*Ft*Ft-Xt*Pt*Pt)/(zt*Ft*Ft+Xt*Pt*Pt)));nt=re*ot*Ft/_+(q+h)/2,St=re*-_*Pt/ot+(ct+g)/2,H=Math.asin(((ct-St)/_).toFixed(9)),et=Math.asin(((g-St)/_).toFixed(9)),H=q<nt?Math.PI-H:H,et=h<nt?Math.PI-et:et,H<0&&(H=2*Math.PI+H),et<0&&(et=2*Math.PI+et),k&&H>et&&(H-=2*Math.PI),!k&&et>H&&(et-=2*Math.PI)}var de=et-H;if(Math.abs(de)>dt){var ye=et,we=h,De=g;et=H+dt*(k&&et>H?1:-1),yt=At(h=nt+ot*Math.cos(et),g=St+_*Math.sin(et),ot,_,P,0,k,we,De,[et,ye,nt,St])}de=et-H;var Ve=Math.cos(H),pn=Math.sin(H),sn=Math.cos(et),In=Math.sin(et),An=Math.tan(de/4),Rn=4/3*ot*An,Mn=4/3*_*An,Cn=[q,ct],Gn=[q+Rn*pn,ct-Mn*Ve],Xn=[h+Rn*In,g-Mn*sn],tr=[h,g];if(Gn[0]=2*Cn[0]-Gn[0],Gn[1]=2*Cn[1]-Gn[1],F)return[Gn,Xn,tr].concat(yt);for(var or=[],nr=0,er=(yt=[Gn,Xn,tr].concat(yt).join().split(",")).length;nr<er;nr++)or[nr]=nr%2?Ct(yt[nr-1],yt[nr],gt).y:Ct(yt[nr],yt[nr+1],gt).x;return or},M=function(q,ct){var ot,_=y(q),P=ct&&y(ct),Y={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h=[],g=[],F="",V="",H=function(Ft,Tt,zt){var Xt,re;if(!Ft)return["C",Tt.x,Tt.y,Tt.x,Tt.y,Tt.x,Tt.y];switch(!(Ft[0]in{T:1,Q:1})&&(Tt.qx=Tt.qy=null),Ft[0]){case"M":Tt.X=Ft[1],Tt.Y=Ft[2];break;case"A":Ft=["C"].concat(d.apply(0,[Tt.x,Tt.y].concat(Ft.slice(1))));break;case"S":zt==="C"||zt==="S"?(Xt=2*Tt.x-Tt.bx,re=2*Tt.y-Tt.by):(Xt=Tt.x,re=Tt.y),Ft=["C",Xt,re].concat(Ft.slice(1));break;case"T":zt==="Q"||zt==="T"?(Tt.qx=2*Tt.x-Tt.qx,Tt.qy=2*Tt.y-Tt.qy):(Tt.qx=Tt.x,Tt.qy=Tt.y),Ft=["C"].concat(s(Tt.x,Tt.y,Tt.qx,Tt.qy,Ft[1],Ft[2]));break;case"Q":Tt.qx=Ft[1],Tt.qy=Ft[2],Ft=["C"].concat(s(Tt.x,Tt.y,Ft[1],Ft[2],Ft[3],Ft[4]));break;case"L":Ft=["C"].concat(n(Tt.x,Tt.y,Ft[1],Ft[2]));break;case"H":Ft=["C"].concat(n(Tt.x,Tt.y,Ft[1],Tt.y));break;case"V":Ft=["C"].concat(n(Tt.x,Tt.y,Tt.x,Ft[1]));break;case"Z":Ft=["C"].concat(n(Tt.x,Tt.y,Tt.X,Tt.Y))}return Ft},et=function(Ft,Tt){if(Ft[Tt].length>7){Ft[Tt].shift();for(var zt=Ft[Tt];zt.length;)h[Tt]="A",P&&(g[Tt]="A"),Ft.splice(Tt++,0,["C"].concat(zt.splice(0,6)));Ft.splice(Tt,1),ot=Math.max(_.length,P&&P.length||0)}},nt=function(Ft,Tt,zt,Xt,re){Ft&&Tt&&Ft[re][0]==="M"&&Tt[re][0]!=="M"&&(Tt.splice(re,0,["M",Xt.x,Xt.y]),zt.bx=0,zt.by=0,zt.x=Ft[re][1],zt.y=Ft[re][2],ot=Math.max(_.length,P&&P.length||0))};ot=Math.max(_.length,P&&P.length||0);for(var St=0;St<ot;St++){_[St]&&(F=_[St][0]),F!=="C"&&(h[St]=F,St&&(V=h[St-1])),_[St]=H(_[St],Y,V),h[St]!=="A"&&F==="C"&&(h[St]="C"),et(_,St),P&&(P[St]&&(F=P[St][0]),F!=="C"&&(g[St]=F,St&&(V=g[St-1])),P[St]=H(P[St],k,V),g[St]!=="A"&&F==="C"&&(g[St]="C"),et(P,St)),nt(_,P,Y,k,St),nt(P,_,k,Y,St);var dt=_[St],gt=P&&P[St],yt=dt.length,Ct=P&&gt.length;Y.x=dt[yt-2],Y.y=dt[yt-1],Y.bx=parseFloat(dt[yt-4])||Y.x,Y.by=parseFloat(dt[yt-3])||Y.y,k.bx=P&&(parseFloat(gt[Ct-4])||k.x),k.by=P&&(parseFloat(gt[Ct-3])||k.y),k.x=P&&gt[Ct-2],k.y=P&&gt[Ct-1]}return P?[_,P]:_},S=/,?([a-z]),?/gi,T=function(q){return q.join(",").replace(S,"$1")},v=function(q,ct,ot,_,P){return q*(q*(-3*ct+9*ot-9*_+3*P)+6*ct-12*ot+6*_)-3*ct+3*ot},x=function(q,ct,ot,_,P,Y,k,h,g){g===null&&(g=1);for(var F=(g=g>1?1:g<0?0:g)/2,V=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],H=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],et=0,nt=0;nt<12;nt++){var St=F*V[nt]+F,dt=v(St,q,ot,P,k),gt=v(St,ct,_,Y,h),yt=dt*dt+gt*gt;et+=H[nt]*Math.sqrt(yt)}return F*et},C=function(q,ct,ot,_,P,Y,k,h){for(var g,F,V,H,et=[],nt=[[],[]],St=0;St<2;++St)if(St===0?(F=6*q-12*ot+6*P,g=-3*q+9*ot-9*P+3*k,V=3*ot-3*q):(F=6*ct-12*_+6*Y,g=-3*ct+9*_-9*Y+3*h,V=3*_-3*ct),Math.abs(g)<1e-12){if(Math.abs(F)<1e-12)continue;(H=-V/F)>0&&H<1&&et.push(H)}else{var dt=F*F-4*V*g,gt=Math.sqrt(dt);if(!(dt<0)){var yt=(-F+gt)/(2*g);yt>0&&yt<1&&et.push(yt);var Ct=(-F-gt)/(2*g);Ct>0&&Ct<1&&et.push(Ct)}}for(var Pt,Ft=et.length,Tt=Ft;Ft--;)Pt=1-(H=et[Ft]),nt[0][Ft]=Pt*Pt*Pt*q+3*Pt*Pt*H*ot+3*Pt*H*H*P+H*H*H*k,nt[1][Ft]=Pt*Pt*Pt*ct+3*Pt*Pt*H*_+3*Pt*H*H*Y+H*H*H*h;return nt[0][Tt]=q,nt[1][Tt]=ct,nt[0][Tt+1]=k,nt[1][Tt+1]=h,nt[0].length=nt[1].length=Tt+2,{min:{x:Math.min.apply(0,nt[0]),y:Math.min.apply(0,nt[1])},max:{x:Math.max.apply(0,nt[0]),y:Math.max.apply(0,nt[1])}}},N=function(q,ct,ot,_,P,Y,k,h){if(!(Math.max(q,ot)<Math.min(P,k)||Math.min(q,ot)>Math.max(P,k)||Math.max(ct,_)<Math.min(Y,h)||Math.min(ct,_)>Math.max(Y,h))){var g=(q-ot)*(Y-h)-(ct-_)*(P-k);if(g){var F=((q*_-ct*ot)*(P-k)-(q-ot)*(P*h-Y*k))/g,V=((q*_-ct*ot)*(Y-h)-(ct-_)*(P*h-Y*k))/g,H=+F.toFixed(2),et=+V.toFixed(2);if(!(H<+Math.min(q,ot).toFixed(2)||H>+Math.max(q,ot).toFixed(2)||H<+Math.min(P,k).toFixed(2)||H>+Math.max(P,k).toFixed(2)||et<+Math.min(ct,_).toFixed(2)||et>+Math.max(ct,_).toFixed(2)||et<+Math.min(Y,h).toFixed(2)||et>+Math.max(Y,h).toFixed(2)))return{x:F,y:V}}}},X=function(q,ct,ot){return ct>=q.x&&ct<=q.x+q.width&&ot>=q.y&&ot<=q.y+q.height},tt=function(q,ct,ot,_,P){if(P)return[["M",+q+ +P,ct],["l",ot-2*P,0],["a",P,P,0,0,1,P,P],["l",0,_-2*P],["a",P,P,0,0,1,-P,P],["l",2*P-ot,0],["a",P,P,0,0,1,-P,-P],["l",0,2*P-_],["a",P,P,0,0,1,P,-P],["z"]];var Y=[["M",q,ct],["l",ot,0],["l",0,_],["l",-ot,0],["z"]];return Y.parsePathArray=T,Y},it=function(q,ct,ot,_){return q===null&&(q=ct=ot=_=0),ct===null&&(ct=q.y,ot=q.width,_=q.height,q=q.x),{x:q,y:ct,width:ot,w:ot,height:_,h:_,x2:q+ot,y2:ct+_,cx:q+ot/2,cy:ct+_/2,r1:Math.min(ot,_)/2,r2:Math.max(ot,_)/2,r0:Math.sqrt(ot*ot+_*_)/2,path:tt(q,ct,ot,_),vb:[q,ct,ot,_].join(" ")}},pt=function(q,ct,ot,_,P,Y,k,h){Object(r.m)(q)||(q=[q,ct,ot,_,P,Y,k,h]);var g=C.apply(null,q);return it(g.min.x,g.min.y,g.max.x-g.min.x,g.max.y-g.min.y)},ft=function(q,ct,ot,_,P,Y,k,h,g){var F=1-g,V=Math.pow(F,3),H=Math.pow(F,2),et=g*g,nt=et*g,St=q+2*g*(ot-q)+et*(P-2*ot+q),dt=ct+2*g*(_-ct)+et*(Y-2*_+ct),gt=ot+2*g*(P-ot)+et*(k-2*P+ot),yt=_+2*g*(Y-_)+et*(h-2*Y+_);return{x:V*q+3*H*g*ot+3*F*g*g*P+nt*k,y:V*ct+3*H*g*_+3*F*g*g*Y+nt*h,m:{x:St,y:dt},n:{x:gt,y:yt},start:{x:F*q+g*ot,y:F*ct+g*_},end:{x:F*P+g*k,y:F*Y+g*h},alpha:90-180*Math.atan2(St-gt,dt-yt)/Math.PI}},Ot=function(q,ct,ot){if(!function(Tt,zt){return Tt=it(Tt),zt=it(zt),X(zt,Tt.x,Tt.y)||X(zt,Tt.x2,Tt.y)||X(zt,Tt.x,Tt.y2)||X(zt,Tt.x2,Tt.y2)||X(Tt,zt.x,zt.y)||X(Tt,zt.x2,zt.y)||X(Tt,zt.x,zt.y2)||X(Tt,zt.x2,zt.y2)||(Tt.x<zt.x2&&Tt.x>zt.x||zt.x<Tt.x2&&zt.x>Tt.x)&&(Tt.y<zt.y2&&Tt.y>zt.y||zt.y<Tt.y2&&zt.y>Tt.y)}(pt(q),pt(ct)))return ot?0:[];for(var _=~~(x.apply(0,q)/8),P=~~(x.apply(0,ct)/8),Y=[],k=[],h={},g=ot?0:[],F=0;F<_+1;F++){var V=ft.apply(0,q.concat(F/_));Y.push({x:V.x,y:V.y,t:F/_})}for(F=0;F<P+1;F++)V=ft.apply(0,ct.concat(F/P)),k.push({x:V.x,y:V.y,t:F/P});for(F=0;F<_;F++)for(var H=0;H<P;H++){var et=Y[F],nt=Y[F+1],St=k[H],dt=k[H+1],gt=Math.abs(nt.x-et.x)<.001?"y":"x",yt=Math.abs(dt.x-St.x)<.001?"y":"x",Ct=N(et.x,et.y,nt.x,nt.y,St.x,St.y,dt.x,dt.y);if(Ct){if(h[Ct.x.toFixed(4)]===Ct.y.toFixed(4))continue;h[Ct.x.toFixed(4)]=Ct.y.toFixed(4);var Pt=et.t+Math.abs((Ct[gt]-et[gt])/(nt[gt]-et[gt]))*(nt.t-et.t),Ft=St.t+Math.abs((Ct[yt]-St[yt])/(dt[yt]-St[yt]))*(dt.t-St.t);Pt>=0&&Pt<=1&&Ft>=0&&Ft<=1&&(ot?g+=1:g.push({x:Ct.x,y:Ct.y,t1:Pt,t2:Ft}))}}return g},wt=function(q,ct){return function(ot,_,P){var Y,k,h,g,F,V,H,et,nt,St;ot=M(ot),_=M(_);for(var dt=P?0:[],gt=0,yt=ot.length;gt<yt;gt++){var Ct=ot[gt];if(Ct[0]==="M")Y=F=Ct[1],k=V=Ct[2];else{Ct[0]==="C"?(nt=[Y,k].concat(Ct.slice(1)),Y=nt[6],k=nt[7]):(nt=[Y,k,Y,k,F,V,F,V],Y=F,k=V);for(var Pt=0,Ft=_.length;Pt<Ft;Pt++){var Tt=_[Pt];if(Tt[0]==="M")h=H=Tt[1],g=et=Tt[2];else{Tt[0]==="C"?(St=[h,g].concat(Tt.slice(1)),h=St[6],g=St[7]):(St=[h,g,h,g,H,et,H,et],h=H,g=et);var zt=Ot(nt,St,P);if(P)dt+=zt;else{for(var Xt=0,re=zt.length;Xt<re;Xt++)zt[Xt].segment1=gt,zt[Xt].segment2=Pt,zt[Xt].bez1=nt,zt[Xt].bez2=St;dt=dt.concat(zt)}}}}}return dt}(q,ct)};function xt(At,q){var ct=[],ot=[];return At.length&&function _(P,Y){if(P.length===1)ct.push(P[0]),ot.push(P[0]);else{for(var k=[],h=0;h<P.length-1;h++)h===0&&ct.push(P[0]),h===P.length-2&&ot.push(P[h+1]),k[h]=[(1-Y)*P[h][0]+Y*P[h+1][0],(1-Y)*P[h][1]+Y*P[h+1][1]];_(k,Y)}}(At,q),{left:ct,right:ot.reverse()}}var lt=function(q,ct,ot){if(ot===1)return[[].concat(q)];var _=[];if(ct[0]==="L"||ct[0]==="C"||ct[0]==="Q")_=_.concat(function(k,h,g){var F=[[k[1],k[2]]];g=g||2;var V=[];h[0]==="A"?(F.push(h[6]),F.push(h[7])):h[0]==="C"?(F.push([h[1],h[2]]),F.push([h[3],h[4]]),F.push([h[5],h[6]])):h[0]==="S"||h[0]==="Q"?(F.push([h[1],h[2]]),F.push([h[3],h[4]])):F.push([h[1],h[2]]);for(var H=F,et=1/g,nt=0;nt<g-1;nt++){var St=xt(H,et/(1-et*nt));V.push(St.left),H=St.right}return V.push(H),V.map(function(dt){var gt=[];return dt.length===4&&(gt.push("C"),gt=gt.concat(dt[2])),dt.length>=3&&(dt.length===3&&gt.push("Q"),gt=gt.concat(dt[1])),dt.length===2&&gt.push("L"),gt=gt.concat(dt[dt.length-1])})}(q,ct,ot));else{var P=[].concat(q);P[0]==="M"&&(P[0]="L");for(var Y=0;Y<=ot-1;Y++)_.push(P)}return _},Vt=function(q,ct){if(q.length===1)return q;var ot=q.length-1,_=ct.length-1,P=ot/_,Y=[];if(q.length===1&&q[0][0]==="M"){for(var k=0;k<_-ot;k++)q.push(q[0]);return q}for(k=0;k<_;k++){var h=Math.floor(P*k);Y[h]=(Y[h]||0)+1}var g=Y.reduce(function(F,V,H){return H===ot?F.concat(q[ot]):F.concat(lt(q[H],q[H+1],V))},[]);return g.unshift(q[0]),ct[_]!=="Z"&&ct[_]!=="z"||g.push("Z"),g},Lt=function(q,ct){if(q.length!==ct.length)return!1;var ot=!0;return Object(r.f)(q,function(_,P){if(_!==ct[P])return ot=!1,!1}),ot};function Et(At,q,ct){var ot=null,_=ct;return q<_&&(_=q,ot="add"),At<_&&(_=At,ot="del"),{type:ot,min:_}}var J=function(q,ct){var ot=function(et,nt){var St,dt,gt=et.length,yt=nt.length,Ct=0;if(gt===0||yt===0)return null;for(var Pt=[],Ft=0;Ft<=gt;Ft++)Pt[Ft]=[],Pt[Ft][0]={min:Ft};for(var Tt=0;Tt<=yt;Tt++)Pt[0][Tt]={min:Tt};for(Ft=1;Ft<=gt;Ft++)for(St=et[Ft-1],Tt=1;Tt<=yt;Tt++){dt=nt[Tt-1],Ct=Lt(St,dt)?0:1;var zt=Pt[Ft-1][Tt].min+1,Xt=Pt[Ft][Tt-1].min+1,re=Pt[Ft-1][Tt-1].min+Ct;Pt[Ft][Tt]=Et(zt,Xt,re)}return Pt}(q,ct),_=q.length,P=ct.length,Y=[],k=1,h=1;if(ot[_][P].min!==_){for(var g=1;g<=_;g++){var F=ot[g][g].min;h=g;for(var V=k;V<=P;V++)ot[g][V].min<F&&(F=ot[g][V].min,h=V);k=h,ot[g][k].type&&Y.push({index:g-1,type:ot[g][k].type})}for(g=Y.length-1;g>=0;g--)k=Y[g].index,Y[g].type==="add"?q.splice(k,0,[].concat(q[k])):q.splice(k,1)}var H=P-(_=q.length);if(_<P)for(g=0;g<H;g++)q[_-1][0]==="z"||q[_-1][0]==="Z"?q.splice(_-2,0,q[_-2]):q.push(q[_-1]),_+=1;return q};function ht(At,q,ct){for(var ot,_=[].concat(At),P=1/(ct+1),Y=vt(q)[0],k=1;k<=ct;k++)P*=k,(ot=Math.floor(At.length*P))===0?_.unshift([Y[0]*P+At[ot][0]*(1-P),Y[1]*P+At[ot][1]*(1-P)]):_.splice(ot,0,[Y[0]*P+At[ot][0]*(1-P),Y[1]*P+At[ot][1]*(1-P)]);return _}function vt(At){var q=[];switch(At[0]){case"M":case"L":q.push([At[1],At[2]]);break;case"A":q.push([At[6],At[7]]);break;case"Q":q.push([At[3],At[4]]),q.push([At[1],At[2]]);break;case"T":q.push([At[1],At[2]]);break;case"C":q.push([At[5],At[6]]),q.push([At[1],At[2]]),q.push([At[3],At[4]]);break;case"S":q.push([At[3],At[4]]),q.push([At[1],At[2]]);break;case"H":case"V":q.push([At[1],At[1]])}return q}var bt=function(q,ct){if(q.length<=1)return q;for(var ot,_=0;_<ct.length;_++)if(q[_][0]!==ct[_][0])switch(ot=vt(q[_]),ct[_][0]){case"M":q[_]=["M"].concat(ot[0]);break;case"L":q[_]=["L"].concat(ot[0]);break;case"A":q[_]=[].concat(ct[_]),q[_][6]=ot[0][0],q[_][7]=ot[0][1];break;case"Q":if(ot.length<2){if(!(_>0)){q[_]=ct[_];break}ot=ht(ot,q[_-1],1)}q[_]=["Q"].concat(ot.reduce(function(P,Y){return P.concat(Y)},[]));break;case"T":q[_]=["T"].concat(ot[0]);break;case"C":if(ot.length<3){if(!(_>0)){q[_]=ct[_];break}ot=ht(ot,q[_-1],2)}q[_]=["C"].concat(ot.reduce(function(P,Y){return P.concat(Y)},[]));break;case"S":if(ot.length<2){if(!(_>0)){q[_]=ct[_];break}ot=ht(ot,q[_-1],1)}q[_]=["S"].concat(ot.reduce(function(P,Y){return P.concat(Y)},[]));break;default:q[_]=ct[_]}return q}},function(a,A,e){"use strict";e(56),e(18);var r=e(250);e.d(A,"Canvas",function(){return r.a}),e(76),e(89)},function(a,A,e){var r=e(83),p=e(128);a.exports=function(m){return m!=null&&p(m.length)&&!r(m)}},function(a,A,e){function r(j){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(j)}var p=e(328),m=e(338),O=e(66),l=e(26),E=e(345);a.exports=function(j){return typeof j=="function"?j:j==null?O:r(j)=="object"?l(j)?m(j[0],j[1]):p(j):E(j)}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.TargetTypeEnum=A.BindingTypeEnum=A.BindingScopeEnum=void 0,A.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"},A.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},A.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},function(a,A,e){"use strict";e.r(A),e.d(A,"Base",function(){return j}),e.d(A,"Circle",function(){return y}),e.d(A,"Ellipse",function(){return s}),e.d(A,"Image",function(){return M}),e.d(A,"Line",function(){return x}),e.d(A,"Marker",function(){return tt}),e.d(A,"Path",function(){return J}),e.d(A,"Polygon",function(){return vt}),e.d(A,"Polyline",function(){return bt}),e.d(A,"Rect",function(){return q}),e.d(A,"Text",function(){return ct});var r={};e.r(r),e.d(r,"Base",function(){return j}),e.d(r,"Circle",function(){return y}),e.d(r,"Ellipse",function(){return s}),e.d(r,"Image",function(){return M}),e.d(r,"Line",function(){return x}),e.d(r,"Marker",function(){return tt}),e.d(r,"Path",function(){return J}),e.d(r,"Polygon",function(){return vt}),e.d(r,"Polyline",function(){return bt}),e.d(r,"Rect",function(){return q}),e.d(r,"Text",function(){return ct});var p=e(1),m=e(18),O=e(17),l=e(29),E=e(76),j=function(ot){function _(){return ot!==null&&ot.apply(this,arguments)||this}return Object(p.b)(_,ot),_.prototype.getDefaultAttrs=function(){var P=ot.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},_.prototype.getShapeBase=function(){return r},_.prototype.getGroupBase=function(){return E.a},_.prototype.onCanvasChange=function(P){Object(l.h)(this,P)},_.prototype.calculateBBox=function(){var P=this.get("type"),Y=this.getHitLineWidth(),k=Object(m.getBBoxMethod)(P)(this),h=Y/2,g=k.x-h,F=k.y-h,V=k.x+k.width+h,H=k.y+k.height+h;return{x:g,minX:g,y:F,minY:F,width:k.width+Y,height:k.height+Y,maxX:V,maxY:H}},_.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},_.prototype.isStroke=function(){return!!this.attrs.stroke},_.prototype._applyClip=function(P,Y){Y&&(P.save(),Object(l.a)(P,Y),Y.createPath(P),P.restore(),P.clip(),Y._afterDraw())},_.prototype.draw=function(P,Y){var k=this.cfg.clipShape;if(Y){if(this.cfg.refresh===!1)return void this.set("hasChanged",!1);var h=this.getCanvasBBox();if(!Object(O.f)(Y,h))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}P.save(),Object(l.a)(P,this),this._applyClip(P,k),this.drawPath(P),P.restore(),this._afterDraw()},_.prototype.getCanvasViewBox=function(){var P=this.cfg.canvas;return P?P.getViewRange():null},_.prototype.cacheCanvasBBox=function(){var P=this.getCanvasViewBox();if(P){var Y=this.getCanvasBBox(),k=Object(O.f)(Y,P);this.set("isInView",k),k?this.set("cacheCanvasBBox",Y):this.set("cacheCanvasBBox",null)}},_.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},_.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},_.prototype.drawPath=function(P){this.createPath(P),this.strokeAndFill(P),this.afterDrawPath(P)},_.prototype.fill=function(P){P.fill()},_.prototype.stroke=function(P){P.stroke()},_.prototype.strokeAndFill=function(P){var Y=this.attrs,k=Y.lineWidth,h=Y.opacity,g=Y.strokeOpacity,F=Y.fillOpacity;this.isFill()&&(Object(O.i)(F)||F===1?this.fill(P):(P.globalAlpha=F,this.fill(P),P.globalAlpha=h)),this.isStroke()&&k>0&&(Object(O.i)(g)||g===1||(P.globalAlpha=g),this.stroke(P)),this.afterDrawPath(P)},_.prototype.createPath=function(P){},_.prototype.afterDrawPath=function(P){},_.prototype.isInShape=function(P,Y){var k=this.isStroke(),h=this.isFill(),g=this.getHitLineWidth();return this.isInStrokeOrPath(P,Y,k,h,g)},_.prototype.isInStrokeOrPath=function(P,Y,k,h,g){return!1},_.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var P=this.attrs;return P.lineWidth+P.lineAppendWidth},_}(m.AbstractShape),y=function(ot){function _(){return ot!==null&&ot.apply(this,arguments)||this}return Object(p.b)(_,ot),_.prototype.getDefaultAttrs=function(){var P=ot.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{x:0,y:0,r:0})},_.prototype.isInStrokeOrPath=function(P,Y,k,h,g){var F=this.attr(),V=F.x,H=F.y,et=F.r,nt=g/2,St=Object(O.b)(V,H,P,Y);return h&&k?St<=et+nt:h?St<=et:!!k&&St>=et-nt&&St<=et+nt},_.prototype.createPath=function(P){var Y=this.attr(),k=Y.x,h=Y.y,g=Y.r;P.beginPath(),P.arc(k,h,g,0,2*Math.PI,!1),P.closePath()},_}(j);function n(ot,_,P,Y){return ot/(P*P)+_/(Y*Y)}var s=function(ot){function _(){return ot!==null&&ot.apply(this,arguments)||this}return Object(p.b)(_,ot),_.prototype.getDefaultAttrs=function(){var P=ot.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{x:0,y:0,rx:0,ry:0})},_.prototype.isInStrokeOrPath=function(P,Y,k,h,g){var F=this.attr(),V=g/2,H=F.x,et=F.y,nt=F.rx,St=F.ry,dt=(P-H)*(P-H),gt=(Y-et)*(Y-et);return h&&k?n(dt,gt,nt+V,St+V)<=1:h?n(dt,gt,nt,St)<=1:!!k&&n(dt,gt,nt-V,St-V)>=1&&n(dt,gt,nt+V,St+V)<=1},_.prototype.createPath=function(P){var Y=this.attr(),k=Y.x,h=Y.y,g=Y.rx,F=Y.ry;if(P.beginPath(),P.ellipse)P.ellipse(k,h,g,F,0,0,2*Math.PI,!1);else{var V=g>F?g:F,H=g>F?1:g/F,et=g>F?F/g:1;P.save(),P.translate(k,h),P.scale(H,et),P.arc(0,0,V,0,2*Math.PI),P.restore(),P.closePath()}},_}(j);function d(ot){return ot instanceof HTMLElement&&Object(O.k)(ot.nodeName)&&ot.nodeName.toUpperCase()==="CANVAS"}var M=function(ot){function _(){return ot!==null&&ot.apply(this,arguments)||this}return Object(p.b)(_,ot),_.prototype.getDefaultAttrs=function(){var P=ot.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{x:0,y:0,width:0,height:0})},_.prototype.initAttrs=function(P){this._setImage(P.img)},_.prototype.isStroke=function(){return!1},_.prototype.isOnlyHitBox=function(){return!0},_.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var P=this.get("canvas");P?P.draw():this.createPath(this.get("context"))}},_.prototype._setImage=function(P){var Y=this,k=this.attrs;if(Object(O.k)(P)){var h=new Image;h.onload=function(){if(Y.destroyed)return!1;Y.attr("img",h),Y.set("loading",!1),Y._afterLoading();var g=Y.get("callback");g&&g.call(Y)},h.crossOrigin="Anonymous",h.src=P,this.set("loading",!0)}else P instanceof Image?(k.width||(k.width=P.width),k.height||(k.height=P.height)):d(P)&&(k.width||(k.width=Number(P.getAttribute("width"))),k.height||(k.height,Number(P.getAttribute("height"))))},_.prototype.onAttrChange=function(P,Y,k){ot.prototype.onAttrChange.call(this,P,Y,k),P==="img"&&this._setImage(Y)},_.prototype.createPath=function(P){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",P);var Y=this.attr(),k=Y.x,h=Y.y,g=Y.width,F=Y.height,V=Y.sx,H=Y.sy,et=Y.swidth,nt=Y.sheight,St=Y.img;(St instanceof Image||d(St))&&(Object(O.i)(V)||Object(O.i)(H)||Object(O.i)(et)||Object(O.i)(nt)?P.drawImage(St,k,h,g,F):P.drawImage(St,V,H,et,nt,k,h,g,F))},_}(j),S=e(20);function T(ot,_,P,Y,k,h,g){var F=Math.min(ot,P),V=Math.max(ot,P),H=Math.min(_,Y),et=Math.max(_,Y),nt=k/2;return h>=F-nt&&h<=V+nt&&g>=H-nt&&g<=et+nt&&S.c.pointToLine(ot,_,P,Y,h,g)<=k/2}var v=e(34),x=function(ot){function _(){return ot!==null&&ot.apply(this,arguments)||this}return Object(p.b)(_,ot),_.prototype.getDefaultAttrs=function(){var P=ot.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},_.prototype.initAttrs=function(P){this.setArrow()},_.prototype.onAttrChange=function(P,Y,k){ot.prototype.onAttrChange.call(this,P,Y,k),this.setArrow()},_.prototype.setArrow=function(){var P=this.attr(),Y=P.x1,k=P.y1,h=P.x2,g=P.y2,F=P.startArrow,V=P.endArrow;F&&v.b(this,P,h,g,Y,k),V&&v.a(this,P,Y,k,h,g)},_.prototype.isInStrokeOrPath=function(P,Y,k,h,g){if(!k||!g)return!1;var F=this.attr();return T(F.x1,F.y1,F.x2,F.y2,g,P,Y)},_.prototype.createPath=function(P){var Y=this.attr(),k=Y.x1,h=Y.y1,g=Y.x2,F=Y.y2,V=Y.startArrow,H=Y.endArrow,et={dx:0,dy:0},nt={dx:0,dy:0};V&&V.d&&(et=v.c(k,h,g,F,Y.startArrow.d)),H&&H.d&&(nt=v.c(k,h,g,F,Y.endArrow.d)),P.beginPath(),P.moveTo(k+et.dx,h+et.dy),P.lineTo(g-nt.dx,F-nt.dy)},_.prototype.afterDrawPath=function(P){var Y=this.get("startArrowShape"),k=this.get("endArrowShape");Y&&Y.draw(P),k&&k.draw(P)},_.prototype.getTotalLength=function(){var P=this.attr(),Y=P.x1,k=P.y1,h=P.x2,g=P.y2;return S.c.length(Y,k,h,g)},_.prototype.getPoint=function(P){var Y=this.attr(),k=Y.x1,h=Y.y1,g=Y.x2,F=Y.y2;return S.c.pointAt(k,h,g,F,P)},_}(j),C=e(0),N=e(31),X={circle:function(_,P,Y){return[["M",_-Y,P],["A",Y,Y,0,1,0,_+Y,P],["A",Y,Y,0,1,0,_-Y,P]]},square:function(_,P,Y){return[["M",_-Y,P-Y],["L",_+Y,P-Y],["L",_+Y,P+Y],["L",_-Y,P+Y],["Z"]]},diamond:function(_,P,Y){return[["M",_-Y,P],["L",_,P-Y],["L",_+Y,P],["L",_,P+Y],["Z"]]},triangle:function(_,P,Y){var k=Y*Math.sin(1/3*Math.PI);return[["M",_-Y,P+k],["L",_,P-k],["L",_+Y,P+k],["Z"]]},"triangle-down":function(_,P,Y){var k=Y*Math.sin(1/3*Math.PI);return[["M",_-Y,P-k],["L",_+Y,P-k],["L",_,P+k],["Z"]]}},tt=function(ot){function _(){return ot!==null&&ot.apply(this,arguments)||this}return Object(p.b)(_,ot),_.prototype.initAttrs=function(P){this._resetParamsCache()},_.prototype._resetParamsCache=function(){this.set("paramsCache",{})},_.prototype.onAttrChange=function(P,Y,k){ot.prototype.onAttrChange.call(this,P,Y,k),["symbol","x","y","r","radius"].indexOf(P)!==-1&&this._resetParamsCache()},_.prototype.isOnlyHitBox=function(){return!0},_.prototype._getR=function(P){return Object(C.s)(P.r)?P.radius:P.r},_.prototype._getPath=function(){var P,Y,k=this.attr(),h=k.x,g=k.y,F=k.symbol||"circle",V=this._getR(k);if(Object(O.h)(F))Y=(P=F)(h,g,V),Y=Object(N.c)(Y);else{if(!(P=_.Symbols[F]))return console.warn(F+" marker is not supported."),null;Y=P(h,g,V)}return Y},_.prototype.createPath=function(P){var Y=this._getPath(),k=this.get("paramsCache");Object(l.e)(this,P,{path:Y},k)},_.Symbols=X,_}(j);function it(ot,_,P){var Y=Object(m.getOffScreenContext)();return ot.createPath(Y),Y.isPointInPath(_,P)}function pt(ot){return Math.abs(ot)<1e-6?0:ot<0?-1:1}function ft(ot,_,P){return(P[0]-ot[0])*(_[1]-ot[1])==(_[0]-ot[0])*(P[1]-ot[1])&&Math.min(ot[0],_[0])<=P[0]&&P[0]<=Math.max(ot[0],_[0])&&Math.min(ot[1],_[1])<=P[1]&&P[1]<=Math.max(ot[1],_[1])}function Ot(ot,_,P){var Y=!1,k=ot.length;if(k<=2)return!1;for(var h=0;h<k;h++){var g=ot[h],F=ot[(h+1)%k];if(ft(g,F,[_,P]))return!0;pt(g[1]-P)>0!=pt(F[1]-P)>0&&pt(_-(P-g[1])*(g[0]-F[0])/(g[1]-F[1])-g[0])<0&&(Y=!Y)}return Y}var wt=e(10),xt=e(40);function lt(ot,_,P,Y,k,h,g,F){var V=(Math.atan2(F-_,g-ot)+2*Math.PI)%(2*Math.PI);if(V<Y||V>k)return!1;var H={x:ot+P*Math.cos(V),y:_+P*Math.sin(V)};return Object(O.b)(H.x,H.y,g,F)<=h/2}var Vt=wt.a.transform,Lt=Object(p.a)({hasArc:function(_){for(var P=!1,Y=_.length,k=0;k<Y;k++){var h=_[k][0];if(h==="C"||h==="A"||h==="Q"){P=!0;break}}return P},extractPolygons:function(_){for(var P=_.length,Y=[],k=[],h=[],g=0;g<P;g++){var F=_[g],V=F[0];V==="M"?(h.length&&(k.push(h),h=[]),h.push([F[1],F[2]])):V==="Z"?h.length&&(Y.push(h),h=[]):h.push([F[1],F[2]])}return h.length>0&&k.push(h),{polygons:Y,polylines:k}},isPointInStroke:function(_,P,Y,k,h){for(var g=!1,F=P/2,V=0;V<_.length;V++){var H=_[V],et=H.currentPoint,nt=H.params,St=H.prePoint,dt=H.box;if(!dt||Object(O.e)(dt.x-F,dt.y-F,dt.width+P,dt.height+P,Y,k)){switch(H.command){case"L":case"Z":g=T(St[0],St[1],et[0],et[1],P,Y,k);break;case"Q":g=S.e.pointDistance(St[0],St[1],nt[1],nt[2],nt[3],nt[4],Y,k)<=P/2;break;case"C":g=S.b.pointDistance(St[0],St[1],nt[1],nt[2],nt[3],nt[4],nt[5],nt[6],Y,k,h)<=P/2;break;case"A":var gt=H.arcParams,yt=gt.cx,Ct=gt.cy,Pt=gt.rx,Ft=gt.ry,Tt=gt.startAngle,zt=gt.endAngle,Xt=gt.xRotation,re=[Y,k,1],de=Pt>Ft?Pt:Ft,ye=Vt(null,[["t",-yt,-Ct],["r",-Xt],["s",1/(Pt>Ft?1:Pt/Ft),1/(Pt>Ft?Ft/Pt:1)]]);xt.transformMat3(re,re,ye),g=lt(0,0,de,Tt,zt,P,re[0],re[1])}if(g)break}}return g}},m.PathUtil);function Et(ot,_,P){for(var Y=!1,k=0;k<ot.length&&!(Y=Ot(ot[k],_,P));k++);return Y}var J=function(ot){function _(){return ot!==null&&ot.apply(this,arguments)||this}return Object(p.b)(_,ot),_.prototype.getDefaultAttrs=function(){var P=ot.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{startArrow:!1,endArrow:!1})},_.prototype.initAttrs=function(P){this._setPathArr(P.path),this.setArrow()},_.prototype.onAttrChange=function(P,Y,k){ot.prototype.onAttrChange.call(this,P,Y,k),P==="path"&&this._setPathArr(Y),this.setArrow()},_.prototype._setPathArr=function(P){this.attrs.path=Object(N.c)(P);var Y=Lt.hasArc(P);this.set("hasArc",Y),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},_.prototype.getSegments=function(){var P=this.get("segements");return P||(P=Object(N.d)(this.attr("path")),this.set("segments",P)),P},_.prototype.setArrow=function(){var P=this.attr(),Y=P.startArrow,k=P.endArrow;if(Y){var h=this.getStartTangent();v.b(this,P,h[0][0],h[0][1],h[1][0],h[1][1])}k&&(h=this.getEndTangent(),v.a(this,P,h[0][0],h[0][1],h[1][0],h[1][1]))},_.prototype.isInStrokeOrPath=function(P,Y,k,h,g){var F=this.getSegments(),V=this.get("hasArc"),H=!1;if(k){var et=this.getTotalLength();H=Lt.isPointInStroke(F,g,P,Y,et)}if(!H&&h)if(V)H=it(this,P,Y);else{var nt=this.attr("path"),St=Lt.extractPolygons(nt);H=Et(St.polygons,P,Y)||Et(St.polylines,P,Y)}return H},_.prototype.createPath=function(P){var Y=this.attr(),k=this.get("paramsCache");Object(l.e)(this,P,Y,k)},_.prototype.afterDrawPath=function(P){var Y=this.get("startArrowShape"),k=this.get("endArrowShape");Y&&Y.draw(P),k&&k.draw(P)},_.prototype.getTotalLength=function(){var P=this.get("totalLength");return Object(C.s)(P)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):P},_.prototype.getPoint=function(P){var Y,k,h=this.get("tCache");h||(this._calculateCurve(),this._setTcache(),h=this.get("tCache"));var g=this.get("curve");if(!h||h.length===0)return g?{x:g[0][1],y:g[0][2]}:null;Object(C.f)(h,function(et,nt){P>=et[0]&&P<=et[1]&&(Y=(P-et[0])/(et[1]-et[0]),k=nt)});var F=g[k];if(Object(C.s)(F)||Object(C.s)(k))return null;var V=F.length,H=g[k+1];return S.b.pointAt(F[V-2],F[V-1],H[1],H[2],H[3],H[4],H[5],H[6],Y)},_.prototype._calculateCurve=function(){var P=this.attr().path;this.set("curve",Lt.pathToCurve(P))},_.prototype._setTcache=function(){var P,Y,k,h,g=0,F=0,V=[],H=this.get("curve");H&&(Object(C.f)(H,function(et,nt){k=H[nt+1],h=et.length,k&&(g+=S.b.length(et[h-2],et[h-1],k[1],k[2],k[3],k[4],k[5],k[6])||0)}),this.set("totalLength",g),g!==0?(Object(C.f)(H,function(et,nt){k=H[nt+1],h=et.length,k&&((P=[])[0]=F/g,Y=S.b.length(et[h-2],et[h-1],k[1],k[2],k[3],k[4],k[5],k[6]),F+=Y||0,P[1]=F/g,V.push(P))}),this.set("tCache",V)):this.set("tCache",[]))},_.prototype.getStartTangent=function(){var P,Y=this.getSegments();if(Y.length>1){var k=Y[0].currentPoint,h=Y[1].currentPoint,g=Y[1].startTangent;P=[],g?(P.push([k[0]-g[0],k[1]-g[1]]),P.push([k[0],k[1]])):(P.push([h[0],h[1]]),P.push([k[0],k[1]]))}return P},_.prototype.getEndTangent=function(){var P,Y=this.getSegments(),k=Y.length;if(k>1){var h=Y[k-2].currentPoint,g=Y[k-1].currentPoint,F=Y[k-1].endTangent;P=[],F?(P.push([g[0]-F[0],g[1]-F[1]]),P.push([g[0],g[1]])):(P.push([h[0],h[1]]),P.push([g[0],g[1]]))}return P},_}(j);function ht(ot,_,P,Y,k){var h=ot.length;if(h<2)return!1;for(var g=0;g<h-1;g++)if(T(ot[g][0],ot[g][1],ot[g+1][0],ot[g+1][1],_,P,Y))return!0;if(k){var F=ot[0],V=ot[h-1];if(T(F[0],F[1],V[0],V[1],_,P,Y))return!0}return!1}var vt=function(ot){function _(){return ot!==null&&ot.apply(this,arguments)||this}return Object(p.b)(_,ot),_.prototype.isInStrokeOrPath=function(P,Y,k,h,g){var F=this.attr().points,V=!1;return k&&(V=ht(F,g,P,Y,!0)),!V&&h&&(V=Ot(F,P,Y)),V},_.prototype.createPath=function(P){var Y=this.attr().points;if(!(Y.length<2)){P.beginPath();for(var k=0;k<Y.length;k++){var h=Y[k];k===0?P.moveTo(h[0],h[1]):P.lineTo(h[0],h[1])}P.closePath()}},_}(j),bt=function(ot){function _(){return ot!==null&&ot.apply(this,arguments)||this}return Object(p.b)(_,ot),_.prototype.getDefaultAttrs=function(){var P=ot.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{startArrow:!1,endArrow:!1})},_.prototype.initAttrs=function(P){this.setArrow()},_.prototype.onAttrChange=function(P,Y,k){ot.prototype.onAttrChange.call(this,P,Y,k),this.setArrow(),["points"].indexOf(P)!==-1&&this._resetCache()},_.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},_.prototype.setArrow=function(){var P=this.attr(),Y=this.attrs,k=Y.points,h=Y.startArrow,g=Y.endArrow,F=k.length,V=k[0][0],H=k[0][1],et=k[F-1][0],nt=k[F-1][1];h&&v.b(this,P,k[1][0],k[1][1],V,H),g&&v.a(this,P,k[F-2][0],k[F-2][1],et,nt)},_.prototype.isFill=function(){return!1},_.prototype.isInStrokeOrPath=function(P,Y,k,h,g){return!(!k||!g)&&ht(this.attr().points,g,P,Y,!1)},_.prototype.isStroke=function(){return!0},_.prototype.createPath=function(P){var Y=this.attr(),k=Y.points,h=Y.startArrow,g=Y.endArrow,F=k.length;if(!(k.length<2)){var V,H=k[0][0],et=k[0][1],nt=k[F-1][0],St=k[F-1][1];h&&h.d&&(H+=(V=v.c(H,et,k[1][0],k[1][1],h.d)).dx,et+=V.dy),g&&g.d&&(nt-=(V=v.c(k[F-2][0],k[F-2][1],nt,St,g.d)).dx,St-=V.dy),P.beginPath(),P.moveTo(H,et);for(var dt=0;dt<F-1;dt++){var gt=k[dt];P.lineTo(gt[0],gt[1])}P.lineTo(nt,St)}},_.prototype.afterDrawPath=function(P){var Y=this.get("startArrowShape"),k=this.get("endArrowShape");Y&&Y.draw(P),k&&k.draw(P)},_.prototype.getTotalLength=function(){var P=this.attr().points,Y=this.get("totalLength");return Object(C.s)(Y)?(this.set("totalLength",S.d.length(P)),this.get("totalLength")):Y},_.prototype.getPoint=function(P){var Y,k,h=this.attr().points,g=this.get("tCache");return g||(this._setTcache(),g=this.get("tCache")),Object(C.f)(g,function(F,V){P>=F[0]&&P<=F[1]&&(Y=(P-F[0])/(F[1]-F[0]),k=V)}),S.c.pointAt(h[k][0],h[k][1],h[k+1][0],h[k+1][1],Y)},_.prototype._setTcache=function(){var P=this.attr().points;if(P&&P.length!==0){var Y=this.getTotalLength();if(!(Y<=0)){var k,h,g=0,F=[];Object(C.f)(P,function(V,H){P[H+1]&&((k=[])[0]=g/Y,h=S.c.length(V[0],V[1],P[H+1][0],P[H+1][1]),g+=h,k[1]=g/Y,F.push(k))}),this.set("tCache",F)}}},_.prototype.getStartTangent=function(){var P=this.attr().points,Y=[];return Y.push([P[1][0],P[1][1]]),Y.push([P[0][0],P[0][1]]),Y},_.prototype.getEndTangent=function(){var P=this.attr().points,Y=P.length-1,k=[];return k.push([P[Y-1][0],P[Y-1][1]]),k.push([P[Y][0],P[Y][1]]),k},_}(j),At=e(120),q=function(ot){function _(){return ot!==null&&ot.apply(this,arguments)||this}return Object(p.b)(_,ot),_.prototype.getDefaultAttrs=function(){var P=ot.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{x:0,y:0,width:0,height:0,radius:0})},_.prototype.isInStrokeOrPath=function(P,Y,k,h,g){var F=this.attr(),V=F.x,H=F.y,et=F.width,nt=F.height,St=F.radius;if(St){var dt=!1;return k&&(dt=function(yt,Ct,Pt,Ft,Tt,zt,Xt,re){return T(yt+Tt,Ct,yt+Pt-Tt,Ct,zt,Xt,re)||T(yt+Pt,Ct+Tt,yt+Pt,Ct+Ft-Tt,zt,Xt,re)||T(yt+Pt-Tt,Ct+Ft,yt+Tt,Ct+Ft,zt,Xt,re)||T(yt,Ct+Ft-Tt,yt,Ct+Tt,zt,Xt,re)||lt(yt+Pt-Tt,Ct+Tt,Tt,1.5*Math.PI,2*Math.PI,zt,Xt,re)||lt(yt+Pt-Tt,Ct+Ft-Tt,Tt,0,.5*Math.PI,zt,Xt,re)||lt(yt+Tt,Ct+Ft-Tt,Tt,.5*Math.PI,Math.PI,zt,Xt,re)||lt(yt+Tt,Ct+Tt,Tt,Math.PI,1.5*Math.PI,zt,Xt,re)}(V,H,et,nt,St,g,P,Y)),!dt&&h&&(dt=it(this,P,Y)),dt}var gt=g/2;return h&&k?Object(O.e)(V-gt,H-gt,et+gt,nt+gt,P,Y):h?Object(O.e)(V,H,et,nt,P,Y):k?function(yt,Ct,Pt,Ft,Tt,zt,Xt){var re=Tt/2;return Object(O.e)(yt-re,Ct-re,Pt,Tt,zt,Xt)||Object(O.e)(yt+Pt-re,Ct-re,Tt,Ft,zt,Xt)||Object(O.e)(yt+re,Ct+Ft-re,Pt,Tt,zt,Xt)||Object(O.e)(yt-re,Ct+re,Tt,Ft,zt,Xt)}(V,H,et,nt,g,P,Y):void 0},_.prototype.createPath=function(P){var Y=this.attr(),k=Y.x,h=Y.y,g=Y.width,F=Y.height,V=Y.radius;if(P.beginPath(),V===0)P.rect(k,h,g,F);else{var H=Object(At.a)(V),et=H[0],nt=H[1],St=H[2],dt=H[3];P.moveTo(k+et,h),P.lineTo(k+g-nt,h),nt!==0&&P.arc(k+g-nt,h+nt,nt,-Math.PI/2,0),P.lineTo(k+g,h+F-St),St!==0&&P.arc(k+g-St,h+F-St,St,0,Math.PI/2),P.lineTo(k+dt,h+F),dt!==0&&P.arc(k+dt,h+F-dt,dt,Math.PI/2,Math.PI),P.lineTo(k,h+et),et!==0&&P.arc(k+et,h+et,et,Math.PI,1.5*Math.PI),P.closePath()}},_}(j),ct=function(ot){function _(){return ot!==null&&ot.apply(this,arguments)||this}return Object(p.b)(_,ot),_.prototype.getDefaultAttrs=function(){var P=ot.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},P),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},_.prototype.isOnlyHitBox=function(){return!0},_.prototype.initAttrs=function(P){this._assembleFont(),P.text&&this._setText(P.text)},_.prototype._assembleFont=function(){var P=this.attrs;P.font=Object(m.assembleFont)(P)},_.prototype._setText=function(P){var Y=null;Object(O.k)(P)&&P.indexOf(`
`)!==-1&&(Y=P.split(`
`)),this.set("textArr",Y)},_.prototype.onAttrChange=function(P,Y,k){ot.prototype.onAttrChange.call(this,P,Y,k),P.startsWith("font")&&this._assembleFont(),P==="text"&&this._setText(Y)},_.prototype._getSpaceingY=function(){var P=this.attrs,Y=P.lineHeight,k=1*P.fontSize;return Y?Y-k:.14*k},_.prototype._drawTextArr=function(P,Y,k){var h,g=this.attrs,F=g.textBaseline,V=g.x,H=g.y,et=1*g.fontSize,nt=this._getSpaceingY(),St=Object(m.getTextHeight)(g.text,g.fontSize,g.lineHeight);Object(O.c)(Y,function(dt,gt){h=H+gt*(nt+et)-St+et,F==="middle"&&(h+=St-et-(St-et)/2),F==="top"&&(h+=St-et),k?P.fillText(dt,V,h):P.strokeText(dt,V,h)})},_.prototype._drawText=function(P,Y){var k=this.attr(),h=k.x,g=k.y,F=this.get("textArr");if(F)this._drawTextArr(P,F,Y);else{var V=k.text;Y?P.fillText(V,h,g):P.strokeText(V,h,g)}},_.prototype.strokeAndFill=function(P){var Y=this.attrs,k=Y.lineWidth,h=Y.opacity,g=Y.strokeOpacity,F=Y.fillOpacity;this.isStroke()&&k>0&&(Object(O.i)(g)||g===1||(P.globalAlpha=h),this.stroke(P)),this.isFill()&&(Object(O.i)(F)||F===1?this.fill(P):(P.globalAlpha=F,this.fill(P),P.globalAlpha=h)),this.afterDrawPath(P)},_.prototype.fill=function(P){this._drawText(P,!0)},_.prototype.stroke=function(P){this._drawText(P,!1)},_}(j)},function(a,A,e){var r=e(72),p=e(284),m=e(285),O=r?r.toStringTag:void 0;a.exports=function(l){return l==null?l===void 0?"[object Undefined]":"[object Null]":O&&O in Object(l)?p(l):m(l)}},function(a,A,e){var r=e(167),p=e(130),m=e(53);a.exports=function(O){return m(O)?r(O):p(O)}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.tagProperty=A.tagParameter=A.decorate=void 0;var r=e(41),p=e(32);function m(E,j,y,n,s){var d={},M=typeof s=="number",S=s!==void 0&&M?s.toString():y;if(M&&y!==void 0)throw new Error(r.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(E,j)&&(d=Reflect.getMetadata(E,j));var T=d[S];if(Array.isArray(T))for(var v=0,x=T;v<x.length;v++){var C=x[v];if(C.key===n.key)throw new Error(r.DUPLICATED_METADATA+" "+C.key.toString())}else T=[];T.push(n),d[S]=T,Reflect.defineMetadata(E,d,j)}function O(E,j){Reflect.decorate(E,j)}function l(E,j){return function(y,n){j(y,n,E)}}A.tagParameter=function(E,j,y,n){m(p.TAGGED,E,j,n,y)},A.tagProperty=function(E,j,y){m(p.TAGGED_PROP,E.constructor,j,y)},A.decorate=function(E,j,y){typeof y=="number"?O([l(y,E)],j):typeof y=="string"?Reflect.decorate([E],j,y):O([E],j)}},function(a,A,e){var r=e(443),p=e(444),m=e(218),O=e(445);a.exports=function(l,E){return r(l)||p(l,E)||m(l,E)||O()}},function(a,A,e){var r=e(57),p=e(48);a.exports=function(m){return typeof m=="number"||p(m)&&r(m)=="[object Number]"}},function(a,A,e){"use strict";e(78),e(18);var r=e(249);e.d(A,"Canvas",function(){return r.a}),e(77)},function(a,A,e){var r=e(236),p=e(235),m=e(243),O=e(150),l=e(244),E=[0,0];a.exports.computeMiter=function(j,y,n,s,d){return r(j,n,s),m(j,j),p(y,-j[1],j[0]),p(E,-n[1],n[0]),d/l(y,E)},a.exports.normal=function(j,y){return p(j,-y[1],y[0]),j},a.exports.direction=function(j,y,n){return O(j,y,n),m(j,j),j}},function(a,A,e){var r=e(283),p=e(288);a.exports=function(m,O){var l=p(m,O);return r(l)?l:void 0}},function(a,A,e){var r=e(167),p=e(308),m=e(53);a.exports=function(O){return m(O)?r(O,!0):p(O)}},function(a,A){a.exports=function(e){return e}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.id=void 0;var r=0;A.id=function(){return r++}},function(a,A,e){"use strict";e.d(A,"b",function(){return m}),e.d(A,"c",function(){return O}),e.d(A,"a",function(){return l});var r=e(19),p=e(116);function m(E,j,y){var n=1;return Object(r.h)(E)&&(n=E.split(`
`).length),n>1?j*n+function(s,d){return d?d-s:.14*s}(j,y)*(n-1):j}function O(E,j){var y=Object(p.a)(),n=0;if(Object(r.e)(E)||E==="")return n;if(y.save(),y.font=j,Object(r.h)(E)&&E.includes(`
`)){var s=E.split(`
`);Object(r.a)(s,function(d){var M=y.measureText(d).width;n<M&&(n=M)})}else n=y.measureText(E).width;return y.restore(),n}function l(E){var j=E.fontSize,y=E.fontFamily,n=E.fontWeight;return[E.fontStyle,E.fontVariant,n,j+"px",y].join(" ").trim()}},function(a,A,e){"use strict";e.d(A,"a",function(){return po}),e.d(A,"b",function(){return wo});var r,p,m=function(U){return typeof U=="string"},O=/-(\w)/g,l=(r=function(U){return U.replace(O,function(w,L){return L?L.toUpperCase():""})},p=Object.create(null),Array.isArray),E=function(U){return typeof U=="number"},j=function(U){return Number.isNaN(Number(U))},y=function(U,w,L){for(var Q=[],It=0;It<U;It++)Q[It]=0;return L&&L.forEach(function(Rt){Rt.source&&(Q[w[Rt.source]]+=1),Rt.target&&(Q[w[Rt.target]]+=1)}),Q},n=function(U){for(var w=[],L=U.length,Q=0;Q<L;Q+=1){w[Q]=[];for(var It=0;It<L;It+=1)Q===It?w[Q][It]=0:U[Q][It]!==0&&U[Q][It]?w[Q][It]=U[Q][It]:w[Q][It]=1/0}for(var Rt=0;Rt<L;Rt+=1)for(var K=0;K<L;K+=1)for(var Dt=0;Dt<L;Dt+=1)w[K][Dt]>w[K][Rt]+w[Rt][Dt]&&(w[K][Dt]=w[K][Rt]+w[Rt][Dt]);return w},s=function(U,w){var L=U.nodes,Q=U.edges,It=[],Rt={};if(!L)throw new Error("invalid nodes data!");return L&&L.forEach(function(K,Dt){Rt[K.id]=Dt,It.push([])}),Q&&Q.forEach(function(K){var Dt=K.source,Qt=K.target,qt=Rt[Dt],xe=Rt[Qt];It[qt][xe]=1,w||(It[xe][qt]=1)}),It},d=function(U,w){typeof w=="function"&&function L(Q,It){if(Q&&Q.children){for(var Rt=Q.children.length-1;Rt>=0;Rt--)if(!L(Q.children[Rt],It))return}return!!It(Q)}(U,w)};function M(Z){return(M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Z)}var S=function Z(U){if(U===null)return U;if(U instanceof Date)return new Date(U.getTime());if(U instanceof Array){var w=[];return U.forEach(function(Q){w.push(Q)}),w.map(function(Q){return Z(Q)})}if(M(U)==="object"&&U!=={}){var L=Object.assign({},U);return Object.keys(L).forEach(function(Q){L[Q]=Z(L[Q])}),L}return U},T=function(U){return typeof U=="function"};function v(Z,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Z,L.key,L)}}var x=function(){function Z(){(function(Q,It){if(!(Q instanceof It))throw new TypeError("Cannot call a class as a function")})(this,Z),this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}var U,w,L;return U=Z,(w=[{key:"layout",value:function(It){return this.init(It),this.execute(!0)}},{key:"init",value:function(It){this.nodes=It.nodes||[],this.edges=It.edges||[],this.combos=It.combos||[]}},{key:"execute",value:function(It){}},{key:"executeWithWorker",value:function(){}},{key:"getDefaultCfg",value:function(){return{}}},{key:"updateCfg",value:function(It){It&&Object.assign(this,It)}},{key:"getType",value:function(){return"base"}},{key:"destroy",value:function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}])&&v(U.prototype,w),L&&v(U,L),Z}();function C(Z){return(C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Z)}function N(Z,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Z,L.key,L)}}function X(Z,U){return(X=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Z,U)}function tt(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=pt(Z);if(U){var Q=pt(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return it(this,w)}}function it(Z,U){return!U||C(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Z):U}function pt(Z){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Z)}var ft=function(Z){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&X(Rt,K)})(It,Z);var U,w,L,Q=tt(It);function It(Rt){var K;return function(Dt,Qt){if(!(Dt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=Q.call(this)).begin=[0,0],K.preventOverlap=!0,K.preventOverlapPadding=10,K.condense=!1,K.sortBy="degree",K.nodeSize=30,K.nodes=[],K.edges=[],K.width=300,K.height=300,K.row=0,K.col=0,K.cellWidth=0,K.cellHeight=0,K.cellUsed={},K.id2manPos={},K.onLayoutEnd=function(){},K.updateCfg(Rt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}},{key:"execute",value:function(){var K=this,Dt=K.nodes,Qt=Dt.length,qt=K.begin;if(Qt!==0){if(Qt===1)return Dt[0].x=qt[0],Dt[0].y=qt[1],void(K.onLayoutEnd&&K.onLayoutEnd());var xe=K.edges,Ie=[];Dt.forEach(function(qn){Ie.push(qn)});var Ye={};if(Ie.forEach(function(qn,fr){Ye[qn.id]=fr}),(K.sortBy==="degree"||!m(K.sortBy)||Ie[0][K.sortBy]===void 0)&&(K.sortBy="degree",j(Dt[0].degree))){var Ne=y(Ie.length,Ye,xe);Ie.forEach(function(qn,fr){qn.degree=Ne[fr]})}Ie.sort(function(qn,fr){return fr[K.sortBy]-qn[K.sortBy]}),K.width||typeof window=="undefined"||(K.width=window.innerWidth),K.height||typeof window=="undefined"||(K.height=window.innerHeight);var He=K.rows,Je=K.cols!=null?K.cols:K.columns;if(K.cells=Qt,He!=null&&Je!=null?(K.rows=He,K.cols=Je):He!=null&&Je==null?(K.rows=He,K.cols=Math.ceil(K.cells/K.rows)):He==null&&Je!=null?(K.cols=Je,K.rows=Math.ceil(K.cells/K.cols)):(K.splits=Math.sqrt(K.cells*K.height/K.width),K.rows=Math.round(K.splits),K.cols=Math.round(K.width/K.height*K.splits)),K.cols*K.rows>K.cells){var Ge=K.small(),qe=K.large();(Ge-1)*qe>=K.cells?K.small(Ge-1):(qe-1)*Ge>=K.cells&&K.large(qe-1)}else for(;K.cols*K.rows<K.cells;){var yn=K.small(),Dn=K.large();(Dn+1)*yn>=K.cells?K.large(Dn+1):K.small(yn+1)}K.cellWidth=K.width/K.cols,K.cellHeight=K.height/K.rows,K.condense&&(K.cellWidth=0,K.cellHeight=0),K.preventOverlap&&Ie.forEach(function(qn){var fr,br;qn.x&&qn.y||(qn.x=0,qn.y=0),l(qn.size)?(fr=qn.size[0],br=qn.size[1]):E(qn.size)&&(fr=qn.size,br=qn.size),fr!==void 0&&br!==void 0||(l(K.nodeSize)?(fr=K.nodeSize[0],br=K.nodeSize[1]):E(K.nodeSize)?(fr=K.nodeSize,br=K.nodeSize):(fr=30,br=30));var gr=K.preventOverlapPadding,hr=fr+gr,Cr=br+gr;K.cellWidth=Math.max(K.cellWidth,hr),K.cellHeight=Math.max(K.cellHeight,Cr)}),K.cellUsed={},K.row=0,K.col=0,K.id2manPos={};for(var En=0;En<Ie.length;En++){var Ln=Ie[En],Zn=void 0;if(K.position&&(Zn=K.position(Ln)),Zn&&(Zn.row!==void 0||Zn.col!==void 0)){var Qn={row:Zn.row,col:Zn.col};if(Qn.col===void 0)for(Qn.col=0;K.used(Qn.row,Qn.col);)Qn.col++;else if(Qn.row===void 0)for(Qn.row=0;K.used(Qn.row,Qn.col);)Qn.row++;K.id2manPos[Ln.id]=Qn,K.use(Qn.row,Qn.col)}K.getPos(Ln)}return K.onLayoutEnd&&K.onLayoutEnd(),{edges:xe,nodes:Ie}}K.onLayoutEnd&&K.onLayoutEnd()}},{key:"small",value:function(K){var Dt,Qt=this.rows||5,qt=this.cols||5;return K==null?Dt=Math.min(Qt,qt):Math.min(Qt,qt)===this.rows?this.rows=K:this.cols=K,Dt}},{key:"large",value:function(K){var Dt,Qt=this.rows||5,qt=this.cols||5;return K==null?Dt=Math.max(Qt,qt):Math.max(Qt,qt)===this.rows?this.rows=K:this.cols=K,Dt}},{key:"used",value:function(K,Dt){return this.cellUsed["c-".concat(K,"-").concat(Dt)]||!1}},{key:"use",value:function(K,Dt){this.cellUsed["c-".concat(K,"-").concat(Dt)]=!0}},{key:"moveToNextCell",value:function(){var K=this.cols||5;this.col++,this.col>=K&&(this.col=0,this.row++)}},{key:"getPos",value:function(K){var Dt,Qt,qt=this.begin,xe=this.cellWidth,Ie=this.cellHeight,Ye=this.id2manPos[K.id];if(Ye)Dt=Ye.col*xe+xe/2+qt[0],Qt=Ye.row*Ie+Ie/2+qt[1];else{for(;this.used(this.row,this.col);)this.moveToNextCell();Dt=this.col*xe+xe/2+qt[0],Qt=this.row*Ie+Ie/2+qt[1],this.use(this.row,this.col),this.moveToNextCell()}K.x=Dt,K.y=Qt}},{key:"getType",value:function(){return"grid"}}])&&N(U.prototype,w),L&&N(U,L),It}(x);function Ot(Z){return(Ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Z)}function wt(Z,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Z,L.key,L)}}function xt(Z,U){return(xt=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Z,U)}function lt(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Lt(Z);if(U){var Q=Lt(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return Vt(this,w)}}function Vt(Z,U){return!U||Ot(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Z):U}function Lt(Z){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Z)}var Et=function(Z){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&xt(Rt,K)})(It,Z);var U,w,L,Q=lt(It);function It(Rt){var K;return function(Dt,Qt){if(!(Dt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=Q.call(this)).center=[0,0],K.width=300,K.height=300,K.nodes=[],K.edges=[],K.onLayoutEnd=function(){},K.updateCfg(Rt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{center:[0,0],width:300,height:300}}},{key:"execute",value:function(){var K=this,Dt=K.nodes,Qt=K.center;return K.width||typeof window=="undefined"||(K.width=window.innerWidth),K.height||typeof window=="undefined"||(K.height=window.innerHeight),Dt&&Dt.forEach(function(qt){qt.x=.9*(Math.random()-.5)*K.width+Qt[0],qt.y=.9*(Math.random()-.5)*K.height+Qt[1]}),K.onLayoutEnd&&K.onLayoutEnd(),{nodes:Dt,edges:this.edges}}},{key:"getType",value:function(){return"random"}}])&&wt(U.prototype,w),L&&wt(U,L),It}(x);function J(Z){return(J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Z)}function ht(Z,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Z,L.key,L)}}function vt(Z,U){return(vt=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Z,U)}function bt(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=q(Z);if(U){var Q=q(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return At(this,w)}}function At(Z,U){return!U||J(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Z):U}function q(Z){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Z)}var ct=function(U,w){return U?E(U)?function(L){return U}:U:function(L){return w||1}},ot=function(Z){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&vt(Rt,K)})(It,Z);var U,w,L,Q=bt(It);function It(Rt){var K;return function(Dt,Qt){if(!(Dt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=Q.call(this)).maxIteration=1e3,K.edgeStrength=200,K.nodeStrength=1e3,K.coulombDisScale=.005,K.damping=.9,K.maxSpeed=1e3,K.minMovement=.5,K.interval=.02,K.factor=1,K.linkDistance=1,K.gravity=10,K.preventOverlap=!0,K.tick=function(){},K.nodes=[],K.edges=[],K.width=300,K.height=300,K.nodeMap={},K.nodeIdxMap={},K.updateCfg(Rt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{maxIteration:500,gravity:10,enableTick:!0}}},{key:"execute",value:function(){var K=this,Dt=K.nodes;if(K.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(K.timeInterval),Dt&&Dt.length!==0){K.width||typeof window=="undefined"||(K.width=window.innerWidth),K.height||typeof window=="undefined"||(K.height=window.innerHeight),K.center||(K.center=[K.width/2,K.height/2]);var Qt=K.center;if(Dt.length===1)return Dt[0].x=Qt[0],Dt[0].y=Qt[1],void(K.onLayoutEnd&&K.onLayoutEnd());var qt={},xe={};Dt.forEach(function(Ge,qe){E(Ge.x)||(Ge.x=Math.random()*K.width),E(Ge.y)||(Ge.y=Math.random()*K.height),qt[Ge.id]=Ge,xe[Ge.id]=qe}),K.nodeMap=qt,K.nodeIdxMap=xe,K.linkDistance=ct(K.linkDistance,1),K.nodeStrength=ct(K.nodeStrength,1),K.edgeStrength=ct(K.edgeStrength,1);var Ie,Ye=K.nodeSize;if(K.preventOverlap){var Ne,He=K.nodeSpacing;Ne=E(He)?function(){return He}:T(He)?He:function(){return 0},Ie=Ye?l(Ye)?function(Ge){return(Ye[0]>Ye[1]?Ye[0]:Ye[1])+Ne(Ge)}:function(Ge){return Ye+Ne(Ge)}:function(Ge){return Ge.size?l(Ge.size)?(Ge.size[0]>Ge.size[1]?Ge.size[0]:Ge.size[1])+Ne(Ge):Ge.size+Ne(Ge):10+Ne(Ge)}}K.nodeSize=Ie;var Je=K.edges;K.degrees=y(Dt.length,K.nodeIdxMap,Je),K.getMass||(K.getMass=function(Ge){return K.degrees[K.nodeIdxMap[Ge.id]]}),K.run()}else K.onLayoutEnd&&K.onLayoutEnd()}},{key:"run",value:function(){var K=this,Dt=K.nodes,Qt=K.edges,qt=K.maxIteration;if(typeof window!="undefined"){var xe=0;this.timeInterval=window.setInterval(function(){var Ie=[],Ye=[];if(Dt){Dt.forEach(function(Ge,qe){Ie[2*qe]=0,Ie[2*qe+1]=0,Ye[2*qe]=0,Ye[2*qe+1]=0}),K.calRepulsive(Ie,Dt),Qt&&K.calAttractive(Ie,Qt),K.calGravity(Ie,Dt);var Ne=Math.max(.02,K.interval-.002*xe);K.updateVelocity(Ie,Ye,Ne,Dt);var He=[];Dt.forEach(function(Ge){He.push({x:Ge.x,y:Ge.y})}),K.updatePosition(Ye,Ne,Dt),K.tick&&K.tick();var Je=0;Dt.forEach(function(Ge,qe){var yn=Ge.x-He[qe].x,Dn=Ge.y-He[qe].y;Je+=Math.sqrt(yn*yn+Dn*Dn)}),(Je/=Dt.length)<K.minMovement&&(window.clearInterval(K.timeInterval),K.onLayoutEnd&&K.onLayoutEnd()),++xe>qt&&(window.clearInterval(K.timeInterval),K.onLayoutEnd&&K.onLayoutEnd())}},0)}}},{key:"calRepulsive",value:function(K,Dt){var Qt=this.getMass,qt=this.nodeStrength,xe=this.factor,Ie=this.coulombDisScale,Ye=this.preventOverlap,Ne=this.nodeSize;Dt.forEach(function(He,Je){var Ge=Qt?Qt(He):1;Dt.forEach(function(qe,yn){if(!(Je>=yn)){var Dn=He.x-qe.x,En=He.y-qe.y,Ln=Math.sqrt(Dn*Dn+En*En)+.01,Zn=(Ln+.1)*Ie,Qn=Dn/Ln,qn=En/Ln,fr=(qt(He)+qt(qe))/2*xe/(Zn*Zn),br=Qt?Qt(qe):1;if(K[2*Je]+=Qn*fr/Ge,K[2*Je+1]+=qn*fr/Ge,K[2*yn]-=Qn*fr/br,K[2*yn+1]-=qn*fr/br,Ye&&Ln<(Ne(He)+Ne(qe))/2){var gr=(qt(He)+qt(qe))/2/(Ln*Ln);K[2*Je]+=Qn*gr/Ge,K[2*Je+1]+=qn*gr/Ge,K[2*yn]-=Qn*gr/br,K[2*yn+1]-=qn*gr/br}}})})}},{key:"calAttractive",value:function(K,Dt){var Qt=this.nodeMap,qt=this.nodeIdxMap,xe=this.linkDistance,Ie=this.edgeStrength,Ye=this.getMass;Dt.forEach(function(Ne,He){var Je=Qt[Ne.source],Ge=Qt[Ne.target],qe=Ge.x-Je.x,yn=Ge.y-Je.y,Dn=Math.sqrt(qe*qe+yn*yn)+.01,En=qe/Dn,Ln=yn/Dn,Zn=((xe(Ne)||1)-Dn)*Ie(Ne),Qn=qt[Ne.source],qn=qt[Ne.target],fr=Ye?Ye(Je):1,br=Ye?Ye(Ge):1;K[2*Qn]-=En*Zn/fr,K[2*Qn+1]-=Ln*Zn/fr,K[2*qn]+=En*Zn/br,K[2*qn+1]+=Ln*Zn/br})}},{key:"calGravity",value:function(K,Dt){for(var Qt=this.center,qt=this.gravity,xe=this.degrees,Ie=Dt.length,Ye=0;Ye<Ie;Ye++){var Ne=Dt[Ye],He=Ne.x-Qt[0],Je=Ne.y-Qt[1],Ge=qt;if(this.getCenter){var qe=this.getCenter(Ne,xe[Ye]);qe&&E(qe[0])&&E(qe[1])&&E(qe[2])&&(He=Ne.x-qe[0],Je=Ne.y-qe[1],Ge=qe[2])}Ge&&(K[2*Ye]-=Ge*He,K[2*Ye+1]-=Ge*Je)}}},{key:"updateVelocity",value:function(K,Dt,Qt,qt){var xe=this,Ie=Qt*xe.damping;qt.forEach(function(Ye,Ne){var He=K[2*Ne]*Ie||.01,Je=K[2*Ne+1]*Ie||.01,Ge=Math.sqrt(He*He+Je*Je);if(Ge>xe.maxSpeed){var qe=xe.maxSpeed/Ge;He*=qe,Je*=qe}Dt[2*Ne]=He,Dt[2*Ne+1]=Je})}},{key:"updatePosition",value:function(K,Dt,Qt){Qt.forEach(function(qt,xe){var Ie=K[2*xe]*Dt,Ye=K[2*xe+1]*Dt;qt.x+=Ie,qt.y+=Ye})}},{key:"stop",value:function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}},{key:"destroy",value:function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0}},{key:"getType",value:function(){return"gForce"}}])&&ht(U.prototype,w),L&&ht(U,L),It}(x);function _(Z,U,w,L){if(isNaN(U)||isNaN(w))return Z;var Q,It,Rt,K,Dt,Qt,qt,xe,Ie,Ye=Z._root,Ne={data:L},He=Z._x0,Je=Z._y0,Ge=Z._x1,qe=Z._y1;if(!Ye)return Z._root=Ne,Z;for(;Ye.length;)if((Qt=U>=(It=(He+Ge)/2))?He=It:Ge=It,(qt=w>=(Rt=(Je+qe)/2))?Je=Rt:qe=Rt,Q=Ye,!(Ye=Ye[xe=qt<<1|Qt]))return Q[xe]=Ne,Z;if(K=+Z._x.call(null,Ye.data),Dt=+Z._y.call(null,Ye.data),U===K&&w===Dt)return Ne.next=Ye,Q?Q[xe]=Ne:Z._root=Ne,Z;do Q=Q?Q[xe]=new Array(4):Z._root=new Array(4),(Qt=U>=(It=(He+Ge)/2))?He=It:Ge=It,(qt=w>=(Rt=(Je+qe)/2))?Je=Rt:qe=Rt;while((xe=qt<<1|Qt)==(Ie=(Dt>=Rt)<<1|K>=It));return Q[Ie]=Ye,Q[xe]=Ne,Z}var P=function(U,w,L,Q,It){this.node=U,this.x0=w,this.y0=L,this.x1=Q,this.y1=It};function Y(Z){return Z[0]}function k(Z){return Z[1]}function h(Z,U,w){var L=new g(U==null?Y:U,w==null?k:w,NaN,NaN,NaN,NaN);return Z==null?L:L.addAll(Z)}function g(Z,U,w,L,Q,It){this._x=Z,this._y=U,this._x0=w,this._y0=L,this._x1=Q,this._y1=It,this._root=void 0}function F(Z){for(var U={data:Z.data},w=U;Z=Z.next;)w=w.next={data:Z.data};return U}var V=h.prototype=g.prototype;V.copy=function(){var Z,U,w=new g(this._x,this._y,this._x0,this._y0,this._x1,this._y1),L=this._root;if(!L)return w;if(!L.length)return w._root=F(L),w;for(Z=[{source:L,target:w._root=new Array(4)}];L=Z.pop();)for(var Q=0;Q<4;++Q)(U=L.source[Q])&&(U.length?Z.push({source:U,target:L.target[Q]=new Array(4)}):L.target[Q]=F(U));return w},V.add=function(Z){var U=+this._x.call(null,Z),w=+this._y.call(null,Z);return _(this.cover(U,w),U,w,Z)},V.addAll=function(Z){var U,w,L,Q,It=Z.length,Rt=new Array(It),K=new Array(It),Dt=1/0,Qt=1/0,qt=-1/0,xe=-1/0;for(w=0;w<It;++w)isNaN(L=+this._x.call(null,U=Z[w]))||isNaN(Q=+this._y.call(null,U))||(Rt[w]=L,K[w]=Q,L<Dt&&(Dt=L),L>qt&&(qt=L),Q<Qt&&(Qt=Q),Q>xe&&(xe=Q));if(Dt>qt||Qt>xe)return this;for(this.cover(Dt,Qt).cover(qt,xe),w=0;w<It;++w)_(this,Rt[w],K[w],Z[w]);return this},V.cover=function(Z,U){if(isNaN(Z=+Z)||isNaN(U=+U))return this;var w=this._x0,L=this._y0,Q=this._x1,It=this._y1;if(isNaN(w))Q=(w=Math.floor(Z))+1,It=(L=Math.floor(U))+1;else{for(var Rt,K,Dt=Q-w||1,Qt=this._root;w>Z||Z>=Q||L>U||U>=It;)switch(K=(U<L)<<1|Z<w,(Rt=new Array(4))[K]=Qt,Qt=Rt,Dt*=2,K){case 0:Q=w+Dt,It=L+Dt;break;case 1:w=Q-Dt,It=L+Dt;break;case 2:Q=w+Dt,L=It-Dt;break;case 3:w=Q-Dt,L=It-Dt}this._root&&this._root.length&&(this._root=Qt)}return this._x0=w,this._y0=L,this._x1=Q,this._y1=It,this},V.data=function(){var Z=[];return this.visit(function(U){if(!U.length)do Z.push(U.data);while(U=U.next)}),Z},V.extent=function(Z){return arguments.length?this.cover(+Z[0][0],+Z[0][1]).cover(+Z[1][0],+Z[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},V.find=function(Z,U,w){var L,Q,It,Rt,K,Dt,Qt,qt=this._x0,xe=this._y0,Ie=this._x1,Ye=this._y1,Ne=[],He=this._root;for(He&&Ne.push(new P(He,qt,xe,Ie,Ye)),w==null?w=1/0:(qt=Z-w,xe=U-w,Ie=Z+w,Ye=U+w,w*=w);Dt=Ne.pop();)if(!(!(He=Dt.node)||(Q=Dt.x0)>Ie||(It=Dt.y0)>Ye||(Rt=Dt.x1)<qt||(K=Dt.y1)<xe))if(He.length){var Je=(Q+Rt)/2,Ge=(It+K)/2;Ne.push(new P(He[3],Je,Ge,Rt,K),new P(He[2],Q,Ge,Je,K),new P(He[1],Je,It,Rt,Ge),new P(He[0],Q,It,Je,Ge)),(Qt=(U>=Ge)<<1|Z>=Je)&&(Dt=Ne[Ne.length-1],Ne[Ne.length-1]=Ne[Ne.length-1-Qt],Ne[Ne.length-1-Qt]=Dt)}else{var qe=Z-+this._x.call(null,He.data),yn=U-+this._y.call(null,He.data),Dn=qe*qe+yn*yn;if(Dn<w){var En=Math.sqrt(w=Dn);qt=Z-En,xe=U-En,Ie=Z+En,Ye=U+En,L=He.data}}return L},V.remove=function(Z){if(isNaN(It=+this._x.call(null,Z))||isNaN(Rt=+this._y.call(null,Z)))return this;var U,w,L,Q,It,Rt,K,Dt,Qt,qt,xe,Ie,Ye=this._root,Ne=this._x0,He=this._y0,Je=this._x1,Ge=this._y1;if(!Ye)return this;if(Ye.length)for(;;){if((Qt=It>=(K=(Ne+Je)/2))?Ne=K:Je=K,(qt=Rt>=(Dt=(He+Ge)/2))?He=Dt:Ge=Dt,U=Ye,!(Ye=Ye[xe=qt<<1|Qt]))return this;if(!Ye.length)break;(U[xe+1&3]||U[xe+2&3]||U[xe+3&3])&&(w=U,Ie=xe)}for(;Ye.data!==Z;)if(L=Ye,!(Ye=Ye.next))return this;return(Q=Ye.next)&&delete Ye.next,L?(Q?L.next=Q:delete L.next,this):U?(Q?U[xe]=Q:delete U[xe],(Ye=U[0]||U[1]||U[2]||U[3])&&Ye===(U[3]||U[2]||U[1]||U[0])&&!Ye.length&&(w?w[Ie]=Ye:this._root=Ye),this):(this._root=Q,this)},V.removeAll=function(Z){for(var U=0,w=Z.length;U<w;++U)this.remove(Z[U]);return this},V.root=function(){return this._root},V.size=function(){var Z=0;return this.visit(function(U){if(!U.length)do++Z;while(U=U.next)}),Z},V.visit=function(Z){var U,w,L,Q,It,Rt,K=[],Dt=this._root;for(Dt&&K.push(new P(Dt,this._x0,this._y0,this._x1,this._y1));U=K.pop();)if(!Z(Dt=U.node,L=U.x0,Q=U.y0,It=U.x1,Rt=U.y1)&&Dt.length){var Qt=(L+It)/2,qt=(Q+Rt)/2;(w=Dt[3])&&K.push(new P(w,Qt,qt,It,Rt)),(w=Dt[2])&&K.push(new P(w,L,qt,Qt,Rt)),(w=Dt[1])&&K.push(new P(w,Qt,Q,It,qt)),(w=Dt[0])&&K.push(new P(w,L,Q,Qt,qt))}return this},V.visitAfter=function(Z){var U,w=[],L=[];for(this._root&&w.push(new P(this._root,this._x0,this._y0,this._x1,this._y1));U=w.pop();){var Q=U.node;if(Q.length){var It,Rt=U.x0,K=U.y0,Dt=U.x1,Qt=U.y1,qt=(Rt+Dt)/2,xe=(K+Qt)/2;(It=Q[0])&&w.push(new P(It,Rt,K,qt,xe)),(It=Q[1])&&w.push(new P(It,qt,K,Dt,xe)),(It=Q[2])&&w.push(new P(It,Rt,xe,qt,Qt)),(It=Q[3])&&w.push(new P(It,qt,xe,Dt,Qt))}L.push(U)}for(;U=L.pop();)Z(U.node,U.x0,U.y0,U.x1,U.y1);return this},V.x=function(Z){return arguments.length?(this._x=Z,this):this._x},V.y=function(Z){return arguments.length?(this._y=Z,this):this._y};var H=function(U){return function(){return U}},et=function(U){return 1e-6*(U()-.5)},nt={value:function(){}};function St(){for(var Z,U=0,w=arguments.length,L={};U<w;++U){if(!(Z=arguments[U]+"")||Z in L||/[\s.]/.test(Z))throw new Error("illegal type: "+Z);L[Z]=[]}return new dt(L)}function dt(Z){this._=Z}function gt(Z,U){return Z.trim().split(/^|\s+/).map(function(w){var L="",Q=w.indexOf(".");if(Q>=0&&(L=w.slice(Q+1),w=w.slice(0,Q)),w&&!U.hasOwnProperty(w))throw new Error("unknown type: "+w);return{type:w,name:L}})}function yt(Z,U){for(var w,L=0,Q=Z.length;L<Q;++L)if((w=Z[L]).name===U)return w.value}function Ct(Z,U,w){for(var L=0,Q=Z.length;L<Q;++L)if(Z[L].name===U){Z[L]=nt,Z=Z.slice(0,L).concat(Z.slice(L+1));break}return w!=null&&Z.push({name:U,value:w}),Z}dt.prototype=St.prototype={constructor:dt,on:function(U,w){var L,Q=this._,It=gt(U+"",Q),Rt=-1,K=It.length;if(!(arguments.length<2)){if(w!=null&&typeof w!="function")throw new Error("invalid callback: "+w);for(;++Rt<K;)if(L=(U=It[Rt]).type)Q[L]=Ct(Q[L],U.name,w);else if(w==null)for(L in Q)Q[L]=Ct(Q[L],U.name,null);return this}for(;++Rt<K;)if((L=(U=It[Rt]).type)&&(L=yt(Q[L],U.name)))return L},copy:function(){var U={},w=this._;for(var L in w)U[L]=w[L].slice();return new dt(U)},call:function(U,w){if((L=arguments.length-2)>0)for(var L,Q,It=new Array(L),Rt=0;Rt<L;++Rt)It[Rt]=arguments[Rt+2];if(!this._.hasOwnProperty(U))throw new Error("unknown type: "+U);for(Rt=0,L=(Q=this._[U]).length;Rt<L;++Rt)Q[Rt].value.apply(w,It)},apply:function(U,w,L){if(!this._.hasOwnProperty(U))throw new Error("unknown type: "+U);for(var Q=this._[U],It=0,Rt=Q.length;It<Rt;++It)Q[It].value.apply(w,L)}};var Pt=St;function Ft(Z){return(Ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Z)}var Tt,zt,Xt=0,re=0,de=0,ye=0,we=0,De=0,Ve=(typeof performance=="undefined"?"undefined":Ft(performance))==="object"&&performance.now?performance:Date,pn=(typeof window=="undefined"?"undefined":Ft(window))==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(Z){setTimeout(Z,17)};function sn(){return we||(pn(In),we=Ve.now()+De)}function In(){we=0}function An(){this._call=this._time=this._next=null}function Rn(Z,U,w){var L=new An;return L.restart(Z,U,w),L}function Mn(){we=(ye=Ve.now())+De,Xt=re=0;try{(function(){sn(),++Xt;for(var Z,U=Tt;U;)(Z=we-U._time)>=0&&U._call.call(null,Z),U=U._next;--Xt})()}finally{Xt=0,function(){for(var Z,U,w=Tt,L=1/0;w;)w._call?(L>w._time&&(L=w._time),Z=w,w=w._next):(U=w._next,w._next=null,w=Z?Z._next=U:Tt=U);zt=Z,Gn(L)}(),we=0}}function Cn(){var Z=Ve.now(),U=Z-ye;U>1e3&&(De-=U,ye=Z)}function Gn(Z){Xt||(re&&(re=clearTimeout(re)),Z-we>24?(Z<1/0&&(re=setTimeout(Mn,Z-Ve.now()-De)),de&&(de=clearInterval(de))):(de||(ye=Ve.now(),de=setInterval(Cn,1e3)),Xt=1,pn(Mn)))}An.prototype=Rn.prototype={constructor:An,restart:function(U,w,L){if(typeof U!="function")throw new TypeError("callback is not a function");L=(L==null?sn():+L)+(w==null?0:+w),this._next||zt===this||(zt?zt._next=this:Tt=this,zt=this),this._call=U,this._time=L,Gn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Gn())}};function Xn(Z){return Z.x}function tr(Z){return Z.y}var or=Math.PI*(3-Math.sqrt(5)),nr=function(U){var w,L,Q=1,It=.001,Rt=1-Math.pow(It,1/300),K=0,Dt=.6,Qt=new Map,qt=Rn(Ye),xe=Pt("tick","end"),Ie=(L=1,function(){return(L=(1664525*L+1013904223)%4294967296)/4294967296});function Ye(){Ne(),xe.call("tick",w),Q<It&&(qt.stop(),xe.call("end",w))}function Ne(Ge){var qe,yn,Dn=U.length;Ge===void 0&&(Ge=1);for(var En=0;En<Ge;++En)for(Q+=(K-Q)*Rt,Qt.forEach(function(Ln){Ln(Q)}),qe=0;qe<Dn;++qe)(yn=U[qe]).fx==null?yn.x+=yn.vx*=Dt:(yn.x=yn.fx,yn.vx=0),yn.fy==null?yn.y+=yn.vy*=Dt:(yn.y=yn.fy,yn.vy=0);return w}function He(){for(var Ge,qe=0,yn=U.length;qe<yn;++qe){if((Ge=U[qe]).index=qe,Ge.fx!=null&&(Ge.x=Ge.fx),Ge.fy!=null&&(Ge.y=Ge.fy),isNaN(Ge.x)||isNaN(Ge.y)){var Dn=10*Math.sqrt(.5+qe),En=qe*or;Ge.x=Dn*Math.cos(En),Ge.y=Dn*Math.sin(En)}(isNaN(Ge.vx)||isNaN(Ge.vy))&&(Ge.vx=Ge.vy=0)}}function Je(Ge){return Ge.initialize&&Ge.initialize(U,Ie),Ge}return U==null&&(U=[]),He(),w={tick:Ne,restart:function(){return qt.restart(Ye),w},stop:function(){return qt.stop(),w},nodes:function(qe){return arguments.length?(U=qe,He(),Qt.forEach(Je),w):U},alpha:function(qe){return arguments.length?(Q=+qe,w):Q},alphaMin:function(qe){return arguments.length?(It=+qe,w):It},alphaDecay:function(qe){return arguments.length?(Rt=+qe,w):+Rt},alphaTarget:function(qe){return arguments.length?(K=+qe,w):K},velocityDecay:function(qe){return arguments.length?(Dt=1-qe,w):1-Dt},randomSource:function(qe){return arguments.length?(Ie=qe,Qt.forEach(Je),w):Ie},force:function(qe,yn){return arguments.length>1?(yn==null?Qt.delete(qe):Qt.set(qe,Je(yn)),w):Qt.get(qe)},find:function(qe,yn,Dn){var En,Ln,Zn,Qn,qn,fr=0,br=U.length;for(Dn==null?Dn=1/0:Dn*=Dn,fr=0;fr<br;++fr)(Zn=(En=qe-(Qn=U[fr]).x)*En+(Ln=yn-Qn.y)*Ln)<Dn&&(qn=Qn,Dn=Zn);return qn},on:function(qe,yn){return arguments.length>1?(xe.on(qe,yn),w):xe.on(qe)}}},er=function(){var U,w,L,Q,It,Rt=H(-30),K=1,Dt=1/0,Qt=.81;function qt(Ne){var He,Je=U.length,Ge=h(U,Xn,tr).visitAfter(Ie);for(Q=Ne,He=0;He<Je;++He)w=U[He],Ge.visit(Ye)}function xe(){if(U){var Ne,He,Je=U.length;for(It=new Array(Je),Ne=0;Ne<Je;++Ne)He=U[Ne],It[He.index]=+Rt(He,Ne,U)}}function Ie(Ne){var He,Je,Ge,qe,yn,Dn=0,En=0;if(Ne.length){for(Ge=qe=yn=0;yn<4;++yn)(He=Ne[yn])&&(Je=Math.abs(He.value))&&(Dn+=He.value,En+=Je,Ge+=Je*He.x,qe+=Je*He.y);Ne.x=Ge/En,Ne.y=qe/En}else{(He=Ne).x=He.data.x,He.y=He.data.y;do Dn+=It[He.data.index];while(He=He.next)}Ne.value=Dn}function Ye(Ne,He,Je,Ge){if(!Ne.value)return!0;var qe=Ne.x-w.x,yn=Ne.y-w.y,Dn=Ge-He,En=qe*qe+yn*yn;if(Dn*Dn/Qt<En)return En<Dt&&(qe===0&&(En+=(qe=et(L))*qe),yn===0&&(En+=(yn=et(L))*yn),En<K&&(En=Math.sqrt(K*En)),w.vx+=qe*Ne.value*Q/En,w.vy+=yn*Ne.value*Q/En),!0;if(!(Ne.length||En>=Dt)){(Ne.data!==w||Ne.next)&&(qe===0&&(En+=(qe=et(L))*qe),yn===0&&(En+=(yn=et(L))*yn),En<K&&(En=Math.sqrt(K*En)));do Ne.data!==w&&(Dn=It[Ne.data.index]*Q/En,w.vx+=qe*Dn,w.vy+=yn*Dn);while(Ne=Ne.next)}}return qt.initialize=function(Ne,He){U=Ne,L=He,xe()},qt.strength=function(Ne){return arguments.length?(Rt=typeof Ne=="function"?Ne:H(+Ne),xe(),qt):Rt},qt.distanceMin=function(Ne){return arguments.length?(K=Ne*Ne,qt):Math.sqrt(K)},qt.distanceMax=function(Ne){return arguments.length?(Dt=Ne*Ne,qt):Math.sqrt(Dt)},qt.theta=function(Ne){return arguments.length?(Qt=Ne*Ne,qt):Math.sqrt(Qt)},qt};function Sr(Z){return(Sr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Z)}function Vr(Z){return Z.index}function ti(Z,U){var w=Z.get(U);if(!w)throw new Error("node not found: "+U);return w}var hi=function(U){var w,L,Q,It,Rt,K,Dt=Vr,Qt=function(Ge){return 1/Math.min(It[Ge.source.index],It[Ge.target.index])},qt=H(30),xe=1;function Ie(Je){for(var Ge=0,qe=U.length;Ge<xe;++Ge)for(var yn,Dn,En,Ln,Zn,Qn,qn,fr=0;fr<qe;++fr)Dn=(yn=U[fr]).source,Ln=(En=yn.target).x+En.vx-Dn.x-Dn.vx||et(K),Zn=En.y+En.vy-Dn.y-Dn.vy||et(K),Ln*=Qn=((Qn=Math.sqrt(Ln*Ln+Zn*Zn))-L[fr])/Qn*Je*w[fr],Zn*=Qn,En.vx-=Ln*(qn=Rt[fr]),En.vy-=Zn*qn,Dn.vx+=Ln*(qn=1-qn),Dn.vy+=Zn*qn}function Ye(){if(Q){var Je,Ge,qe=Q.length,yn=U.length,Dn=new Map(Q.map(function(En,Ln){return[Dt(En,Ln,Q),En]}));for(Je=0,It=new Array(qe);Je<yn;++Je)(Ge=U[Je]).index=Je,Sr(Ge.source)!=="object"&&(Ge.source=ti(Dn,Ge.source)),Sr(Ge.target)!=="object"&&(Ge.target=ti(Dn,Ge.target)),It[Ge.source.index]=(It[Ge.source.index]||0)+1,It[Ge.target.index]=(It[Ge.target.index]||0)+1;for(Je=0,Rt=new Array(yn);Je<yn;++Je)Ge=U[Je],Rt[Je]=It[Ge.source.index]/(It[Ge.source.index]+It[Ge.target.index]);w=new Array(yn),Ne(),L=new Array(yn),He()}}function Ne(){if(Q)for(var Je=0,Ge=U.length;Je<Ge;++Je)w[Je]=+Qt(U[Je],Je,U)}function He(){if(Q)for(var Je=0,Ge=U.length;Je<Ge;++Je)L[Je]=+qt(U[Je],Je,U)}return U==null&&(U=[]),Ie.initialize=function(Je,Ge){Q=Je,K=Ge,Ye()},Ie.links=function(Je){return arguments.length?(U=Je,Ye(),Ie):U},Ie.id=function(Je){return arguments.length?(Dt=Je,Ie):Dt},Ie.iterations=function(Je){return arguments.length?(xe=+Je,Ie):xe},Ie.strength=function(Je){return arguments.length?(Qt=typeof Je=="function"?Je:H(+Je),Ne(),Ie):Qt},Ie.distance=function(Je){return arguments.length?(qt=typeof Je=="function"?Je:H(+Je),He(),Ie):qt},Ie};function Fi(Z){return Z.x+Z.vx}function to(Z){return Z.y+Z.vy}var si=function(U){var w,L,Q,It=1,Rt=1;function K(){for(var qt,xe,Ie,Ye,Ne,He,Je,Ge=w.length,qe=0;qe<Rt;++qe)for(xe=h(w,Fi,to).visitAfter(Dt),qt=0;qt<Ge;++qt)Ie=w[qt],He=L[Ie.index],Je=He*He,Ye=Ie.x+Ie.vx,Ne=Ie.y+Ie.vy,xe.visit(yn);function yn(Dn,En,Ln,Zn,Qn){var qn=Dn.data,fr=Dn.r,br=He+fr;if(!qn)return En>Ye+br||Zn<Ye-br||Ln>Ne+br||Qn<Ne-br;if(qn.index>Ie.index){var gr=Ye-qn.x-qn.vx,hr=Ne-qn.y-qn.vy,Cr=gr*gr+hr*hr;Cr<br*br&&(gr===0&&(Cr+=(gr=et(Q))*gr),hr===0&&(Cr+=(hr=et(Q))*hr),Cr=(br-(Cr=Math.sqrt(Cr)))/Cr*It,Ie.vx+=(gr*=Cr)*(br=(fr*=fr)/(Je+fr)),Ie.vy+=(hr*=Cr)*br,qn.vx-=gr*(br=1-br),qn.vy-=hr*br)}}}function Dt(qt){if(qt.data)return qt.r=L[qt.data.index];for(var xe=qt.r=0;xe<4;++xe)qt[xe]&&qt[xe].r>qt.r&&(qt.r=qt[xe].r)}function Qt(){if(w){var qt,xe,Ie=w.length;for(L=new Array(Ie),qt=0;qt<Ie;++qt)xe=w[qt],L[xe.index]=+U(xe,qt,w)}}return typeof U!="function"&&(U=H(U==null?1:+U)),K.initialize=function(qt,xe){w=qt,Q=xe,Qt()},K.iterations=function(qt){return arguments.length?(Rt=+qt,K):Rt},K.strength=function(qt){return arguments.length?(It=+qt,K):It},K.radius=function(qt){return arguments.length?(U=typeof qt=="function"?qt:H(+qt),Qt(),K):U},K};function Ti(Z,U){return function(w){if(Array.isArray(w))return w}(Z)||function(w,L){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(w)))){var Q=[],It=!0,Rt=!1,K=void 0;try{for(var Dt,Qt=w[Symbol.iterator]();!(It=(Dt=Qt.next()).done)&&(Q.push(Dt.value),!L||Q.length!==L);It=!0);}catch(qt){Rt=!0,K=qt}finally{try{It||Qt.return==null||Qt.return()}finally{if(Rt)throw K}}return Q}}(Z,U)||function(w,L){if(!!w){if(typeof w=="string")return Ui(w,L);var Q=Object.prototype.toString.call(w).slice(8,-1);if(Q==="Object"&&w.constructor&&(Q=w.constructor.name),Q==="Map"||Q==="Set")return Array.from(w);if(Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return Ui(w,L)}}(Z,U)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ui(Z,U){(U==null||U>Z.length)&&(U=Z.length);for(var w=0,L=new Array(U);w<U;w++)L[w]=Z[w];return L}function Li(){function Z(Ln){return function(){return Ln}}var U,w=function(Zn){return Zn.cluster},L=Z(1),Q=Z(-1),It=Z(100),Rt=Z(.1),K=[0,0],Dt=[],Qt={},qt=[],xe=100,Ie=100,Ye={none:{x:0,y:0}},Ne=[],He="force",Je=!0,Ge=.1;function qe(Ln){if(!Je)return qe;U.tick(),Dn();for(var Zn,Qn=0,qn=Dt.length,fr=Ln*Ge;Qn<qn;++Qn)(Zn=Dt[Qn]).vx+=(Ye[w(Zn)].x-Zn.x)*fr,Zn.vy+=(Ye[w(Zn)].y-Zn.y)*fr}function yn(){Dt&&function(){if(!(!Dt||!Dt.length)){if(w(Dt[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Ln=(Qn=[],qn=[],fr={},br=[],Zn=function(gr){var hr={};return gr.forEach(function(Cr){var dr=w(Cr);hr[dr]||(hr[dr]={count:0,sumforceNodeSize:0})}),gr.forEach(function(Cr){var dr=w(Cr),Jr=L(Cr),qr=hr[dr];qr.count=qr.count+1,qr.sumforceNodeSize=qr.sumforceNodeSize+Math.PI*(Jr*Jr)*1.3,hr[dr]=qr}),hr}(Dt),br=function(gr){var hr={},Cr=[];return gr.forEach(function(dr){var Jr=function(wi){var Tr=w(Qt[wi.source]),pi=w(Qt[wi.target]);return Tr<=pi?"".concat(Tr,"~").concat(pi):"".concat(pi,"~").concat(Tr)}(dr),qr=0;hr[Jr]!==void 0&&(qr=hr[Jr]),qr+=1,hr[Jr]=qr}),Object.entries(hr).forEach(function(dr){var Jr=Ti(dr,2),qr=Jr[0],wi=Jr[1],Tr=qr.split("~")[0],pi=qr.split("~")[1];Tr!==void 0&&pi!==void 0&&Cr.push({source:Tr,target:pi,count:wi})}),Cr}(qt),Object.keys(Zn).forEach(function(gr,hr){var Cr=Zn[gr];Qn.push({id:gr,size:Cr.count,r:Math.sqrt(Cr.sumforceNodeSize/Math.PI)}),fr[gr]=hr}),br.forEach(function(gr){var hr=fr[gr.source],Cr=fr[gr.target];hr!==void 0&&Cr!==void 0&&qn.push({source:hr,target:Cr,count:gr.count})}),{nodes:Qn,links:qn}),Zn,Qn,qn,fr,br;U=nr(Ln.nodes).force("x",function(gr){var hr,Cr,dr,Jr=H(.1);function qr(Tr){for(var pi,Ei=0,ji=hr.length;Ei<ji;++Ei)(pi=hr[Ei]).vx+=(dr[Ei]-pi.x)*Cr[Ei]*Tr}function wi(){if(hr){var Tr,pi=hr.length;for(Cr=new Array(pi),dr=new Array(pi),Tr=0;Tr<pi;++Tr)Cr[Tr]=isNaN(dr[Tr]=+gr(hr[Tr],Tr,hr))?0:+Jr(hr[Tr],Tr,hr)}}return typeof gr!="function"&&(gr=H(gr==null?0:+gr)),qr.initialize=function(Tr){hr=Tr,wi()},qr.strength=function(Tr){return arguments.length?(Jr=typeof Tr=="function"?Tr:H(+Tr),wi(),qr):Jr},qr.x=function(Tr){return arguments.length?(gr=typeof Tr=="function"?Tr:H(+Tr),wi(),qr):gr},qr}(xe).strength(.1)).force("y",function(gr){var hr,Cr,dr,Jr=H(.1);function qr(Tr){for(var pi,Ei=0,ji=hr.length;Ei<ji;++Ei)(pi=hr[Ei]).vy+=(dr[Ei]-pi.y)*Cr[Ei]*Tr}function wi(){if(hr){var Tr,pi=hr.length;for(Cr=new Array(pi),dr=new Array(pi),Tr=0;Tr<pi;++Tr)Cr[Tr]=isNaN(dr[Tr]=+gr(hr[Tr],Tr,hr))?0:+Jr(hr[Tr],Tr,hr)}}return typeof gr!="function"&&(gr=H(gr==null?0:+gr)),qr.initialize=function(Tr){hr=Tr,wi()},qr.strength=function(Tr){return arguments.length?(Jr=typeof Tr=="function"?Tr:H(+Tr),wi(),qr):Jr},qr.y=function(Tr){return arguments.length?(gr=typeof Tr=="function"?Tr:H(+Tr),wi(),qr):gr},qr}(Ie).strength(.1)).force("collide",si(function(gr){return gr.r}).iterations(4)).force("charge",er().strength(Q)).force("links",hi(Ln.nodes.length?Ln.links:[]).distance(It).strength(Rt)),Ne=U.nodes(),Dn()}}()}function Dn(){return Ye={none:{x:0,y:0}},Ne.forEach(function(Ln){Ye[Ln.id]={x:Ln.x-K[0],y:Ln.y-K[1]}}),Ye}function En(Ln){Qt={},Ln.forEach(function(Zn){Qt[Zn.id]=Zn})}return qe.initialize=function(Ln){Dt=Ln,yn()},qe.template=function(Ln){return arguments.length?(He=Ln,yn(),qe):He},qe.groupBy=function(Ln){return arguments.length?typeof Ln=="string"?(w=function(Qn){return Qn[Ln]},qe):(w=Ln,qe):w},qe.enableGrouping=function(Ln){return arguments.length?(Je=Ln,qe):Je},qe.strength=function(Ln){return arguments.length?(Ge=Ln,qe):Ge},qe.centerX=function(Ln){return arguments.length?(xe=Ln,qe):xe},qe.centerY=function(Ln){return arguments.length?(Ie=Ln,qe):Ie},qe.nodes=function(Ln){return arguments.length?(En(Ln||[]),Dt=Ln||[],qe):Dt},qe.links=function(Ln){return arguments.length?(qt=Ln||[],yn(),qe):qt},qe.forceNodeSize=function(Ln){return arguments.length?(L=typeof Ln=="function"?Ln:Z(+Ln),yn(),qe):L},qe.nodeSize=qe.forceNodeSize,qe.forceCharge=function(Ln){return arguments.length?(Q=typeof Ln=="function"?Ln:Z(+Ln),yn(),qe):Q},qe.forceLinkDistance=function(Ln){return arguments.length?(It=typeof Ln=="function"?Ln:Z(+Ln),yn(),qe):It},qe.forceLinkStrength=function(Ln){return arguments.length?(Rt=typeof Ln=="function"?Ln:Z(+Ln),yn(),qe):Rt},qe.offset=function(Ln){return arguments.length?(K=Ln,qe):K},qe.getFocis=Dn,qe}var Vi="LAYOUT_RUN",ro="LAYOUT_END",jr="LAYOUT_ERROR",Ji="LAYOUT_TICK",pr="GPU_LAYOUT_RUN",Xr="GPU_LAYOUT_END";function Br(Z){return(Br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Z)}function Nr(Z,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Z,L.key,L)}}function Yr(Z,U){return(Yr=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Z,U)}function Kr(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=fi(Z);if(U){var Q=fi(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return ni(this,w)}}function ni(Z,U){return!U||Br(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Z):U}function fi(Z){return(fi=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Z)}var $r=function(Z){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&Yr(Rt,K)})(It,Z);var U,w,L,Q=Kr(It);function It(Rt){var K;return function(Dt,Qt){if(!(Dt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=Q.call(this)).center=[0,0],K.nodeStrength=null,K.edgeStrength=null,K.preventOverlap=!1,K.clusterNodeStrength=null,K.clusterEdgeStrength=null,K.clusterEdgeDistance=null,K.clusterNodeSize=null,K.clusterFociStrength=null,K.linkDistance=50,K.alphaDecay=.028,K.alphaMin=.001,K.alpha=.3,K.collideStrength=1,K.workerEnabled=!1,K.tick=function(){},K.onLayoutEnd=function(){},K.ticking=void 0,Rt&&K.updateCfg(Rt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}}},{key:"init",value:function(K){this.nodes=K.nodes||[];var Dt=K.edges||[];this.edges=Dt.map(function(Qt){var qt={},xe=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(Qt).forEach(function(Ie){xe.indexOf(Ie)>-1||(qt[Ie]=Qt[Ie])}),qt}),this.ticking=!1}},{key:"execute",value:function(K){var Dt=this,Qt=Dt.nodes,qt=Dt.edges;if(!Dt.ticking){var xe=Dt.forceSimulation,Ie=Dt.alphaMin,Ye=Dt.alphaDecay,Ne=Dt.alpha;if(xe){if(K){if(Dt.clustering&&Dt.clusterForce&&(Dt.clusterForce.nodes(Qt),Dt.clusterForce.links(qt)),xe.nodes(Qt),qt&&Dt.edgeForce)Dt.edgeForce.links(qt);else if(qt&&!Dt.edgeForce){var He=hi().id(function(En){return En.id}).links(qt);Dt.edgeStrength&&He.strength(Dt.edgeStrength),Dt.linkDistance&&He.distance(Dt.linkDistance),Dt.edgeForce=He,xe.force("link",He)}}Dt.preventOverlap&&Dt.overlapProcess(xe),xe.alpha(Ne).restart(),this.ticking=!0}else try{var Je=er();if(Dt.nodeStrength&&Je.strength(Dt.nodeStrength),xe=nr().nodes(Qt),Dt.clustering){var Ge=Li();Ge.centerX(Dt.center[0]).centerY(Dt.center[1]).template("force").strength(Dt.clusterFociStrength),qt&&Ge.links(qt),Qt&&Ge.nodes(Qt),Ge.forceLinkDistance(Dt.clusterEdgeDistance).forceLinkStrength(Dt.clusterEdgeStrength).forceCharge(Dt.clusterNodeStrength).forceNodeSize(Dt.clusterNodeSize),Dt.clusterForce=Ge,xe.force("group",Ge)}if(xe.force("center",function(En,Ln){var Zn,Qn=1;function qn(){var fr,br,gr=Zn.length,hr=0,Cr=0;for(fr=0;fr<gr;++fr)hr+=(br=Zn[fr]).x,Cr+=br.y;for(hr=(hr/gr-En)*Qn,Cr=(Cr/gr-Ln)*Qn,fr=0;fr<gr;++fr)(br=Zn[fr]).x-=hr,br.y-=Cr}return En==null&&(En=0),Ln==null&&(Ln=0),qn.initialize=function(fr){Zn=fr},qn.x=function(fr){return arguments.length?(En=+fr,qn):En},qn.y=function(fr){return arguments.length?(Ln=+fr,qn):Ln},qn.strength=function(fr){return arguments.length?(Qn=+fr,qn):Qn},qn}(Dt.center[0],Dt.center[1])).force("charge",Je).alpha(Ne).alphaDecay(Ye).alphaMin(Ie),Dt.preventOverlap&&Dt.overlapProcess(xe),qt){var qe=hi().id(function(En){return En.id}).links(qt);Dt.edgeStrength&&qe.strength(Dt.edgeStrength),Dt.linkDistance&&qe.distance(Dt.linkDistance),Dt.edgeForce=qe,xe.force("link",qe)}if(Dt.workerEnabled&&!ci()&&(Dt.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),Dt.workerEnabled){xe.stop();for(var yn=function(En){var Ln=En.alphaMin(),Zn=En.alphaTarget(),Qn=En.alpha(),qn=Math.log((Ln-Zn)/(Qn-Zn))/Math.log(1-En.alphaDecay());return Math.ceil(qn)}(xe),Dn=1;Dn<=yn;Dn++)xe.tick(),postMessage({nodes:Qt,currentTick:Dn,totalTicks:yn,type:Ji},void 0);Dt.ticking=!1}else xe.on("tick",function(){Dt.tick()}).on("end",function(){Dt.ticking=!1,Dt.onLayoutEnd&&Dt.onLayoutEnd()}),Dt.ticking=!0;Dt.forceSimulation=xe,Dt.ticking=!0}catch(En){Dt.ticking=!1,console.warn(En)}}}},{key:"overlapProcess",value:function(K){var Dt,Qt,qt=this.nodeSize,xe=this.nodeSpacing,Ie=this.collideStrength;if(Qt=E(xe)?function(){return xe}:T(xe)?xe:function(){return 0},qt)if(T(qt))Dt=function(Je){return qt(Je)+Qt(Je)};else if(l(qt)){var Ye=(qt[0]>qt[1]?qt[0]:qt[1])/2;Dt=function(Je){return Ye+Qt(Je)}}else if(E(qt)){var Ne=qt/2;Dt=function(Je){return Ne+Qt(Je)}}else Dt=function(){return 10};else Dt=function(Je){return Je.size?l(Je.size)?(Je.size[0]>Je.size[1]?Je.size[0]:Je.size[1])/2+Qt(Je):Je.size/2+Qt(Je):10+Qt(Je)};K.force("collisionForce",si(Dt).strength(Ie))}},{key:"updateCfg",value:function(K){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.forceSimulation=null,Object.assign(this,K)}},{key:"destroy",value:function(){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.nodes=null,this.edges=null,this.destroyed=!0}}])&&Nr(U.prototype,w),L&&Nr(U,L),It}(x);function ci(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function Qr(Z){return(Qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Z)}function gi(Z,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Z,L.key,L)}}function Oi(Z,U){return(Oi=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Z,U)}function bi(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Qi(Z);if(U){var Q=Qi(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return _i(this,w)}}function _i(Z,U){return!U||Qr(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Z):U}function Qi(Z){return(Qi=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Z)}function io(Z,U,w,L){Z.forEach(function(Q,It){Z[It].children=[],Z[It].parent=[]}),L?U.forEach(function(Q){var It=0;Q.source&&(It=w[Q.source]);var Rt=0;Q.target&&(Rt=w[Q.target]);var K=Z[It].children,Dt=Z[Rt].parent;K.push(Z[Rt].id),Dt.push(Z[It].id)}):U.forEach(function(Q){var It=0;Q.source&&(It=w[Q.source]);var Rt=0;Q.target&&(Rt=w[Q.target]);var K=Z[It].children,Dt=Z[Rt].children;K.push(Z[Rt].id),Dt.push(Z[It].id)})}function Wi(Z,U,w){for(var L=w.length,Q=0;Q<L;Q++)if(Z.id===w[Q].source&&U.id===w[Q].target||U.id===w[Q].source&&Z.id===w[Q].target)return!0;return!1}function Zi(Z,U){var w=Z.degree,L=U.degree;return w<L?-1:w>L?1:0}var Pi=function(Z){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&Oi(Rt,K)})(It,Z);var U,w,L,Q=bi(It);function It(Rt){var K;return function(Dt,Qt){if(!(Dt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=Q.call(this)).radius=null,K.startRadius=null,K.endRadius=null,K.startAngle=0,K.endAngle=2*Math.PI,K.clockwise=!0,K.divisions=1,K.ordering=null,K.angleRatio=1,K.nodes=[],K.edges=[],K.nodeMap={},K.degrees=[],K.width=300,K.height=300,K.updateCfg(Rt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}},{key:"execute",value:function(){var K=this.nodes,Dt=this.edges,Qt=K.length;if(Qt!==0){this.width||typeof window=="undefined"||(this.width=window.innerWidth),this.height||typeof window=="undefined"||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var qt=this.center;if(Qt===1)return K[0].x=qt[0],K[0].y=qt[1],void(this.onLayoutEnd&&this.onLayoutEnd());var xe=this.radius,Ie=this.startRadius,Ye=this.endRadius,Ne=this.divisions,He=this.startAngle,Je=this.endAngle,Ge=(Je-He)/Qt,qe={};K.forEach(function(gr,hr){qe[gr.id]=hr}),this.nodeMap=qe;var yn=y(K.length,qe,Dt);this.degrees=yn,xe||Ie||Ye?!Ie&&Ye?Ie=Ye:Ie&&!Ye&&(Ye=Ie):xe=this.height>this.width?this.width/2:this.height/2;var Dn=Ge*this.angleRatio,En=this.ordering,Ln=[];Ln=En==="topology"?this.topologyOrdering():En==="topology-directed"?this.topologyOrdering(!0):En==="degree"?this.degreeOrdering():K;for(var Zn=this.clockwise,Qn=Math.ceil(Qt/Ne),qn=0;qn<Qt;++qn){var fr=xe;fr||Ie===null||Ye===null||(fr=Ie+qn*(Ye-Ie)/(Qt-1)),fr||(fr=10+100*qn/(Qt-1));var br=He+qn%Qn*Dn+2*Math.PI/Ne*Math.floor(qn/Qn);Zn||(br=Je-qn%Qn*Dn-2*Math.PI/Ne*Math.floor(qn/Qn)),Ln[qn].x=qt[0]+Math.cos(br)*fr,Ln[qn].y=qt[1]+Math.sin(br)*fr,Ln[qn].weight=yn[qn]}return this.onLayoutEnd&&this.onLayoutEnd(),{nodes:Ln,edges:this.edges}}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"topologyOrdering",value:function(){var K=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Dt=this,Qt=Dt.degrees,qt=Dt.edges,xe=Dt.nodes,Ie=S(xe),Ye=Dt.nodeMap,Ne=[Ie[0]],He=[xe[0]],Je=[],Ge=xe.length;Je[0]=!0,io(Ie,qt,Ye,K);var qe=0;return Ie.forEach(function(yn,Dn){if(Dn!==0)if(Dn!==Ge-1&&Qt[Dn]===Qt[Dn+1]&&!Wi(Ne[qe],yn,qt)||Je[Dn]){for(var En=Ne[qe].children,Ln=!1,Zn=0;Zn<En.length;Zn++){var Qn=Ye[En[Zn]];if(Qt[Qn]===Qt[Dn]&&!Je[Qn]){Ne.push(Ie[Qn]),He.push(xe[Ye[Ie[Qn].id]]),Je[Qn]=!0,Ln=!0;break}}for(var qn=0;!Ln&&(Je[qn]||(Ne.push(Ie[qn]),He.push(xe[Ye[Ie[qn].id]]),Je[qn]=!0,Ln=!0),++qn!==Ge););}else Ne.push(yn),He.push(xe[Ye[yn.id]]),Je[Dn]=!0,qe++}),He}},{key:"degreeOrdering",value:function(){var K=this.nodes,Dt=[],Qt=this.degrees;return K.forEach(function(qt,xe){qt.degree=Qt[xe],Dt.push(qt)}),Dt.sort(Zi),Dt}},{key:"getType",value:function(){return"circular"}}])&&gi(U.prototype,w),L&&gi(U,L),It}(x),no=e(153),Mo=e.n(no);function ao(Z){return(ao=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Z)}function uo(Z,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Z,L.key,L)}}function xo(Z,U){return(xo=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Z,U)}function oe(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=te(Z);if(U){var Q=te(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return Kt(this,w)}}function Kt(Z,U){return!U||ao(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Z):U}function te(Z){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Z)}var Oe=function(Z){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&xo(Rt,K)})(It,Z);var U,w,L,Q=oe(It);function It(Rt){var K;return function(Dt,Qt){if(!(Dt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=Q.call(this)).rankdir="TB",K.nodesep=50,K.ranksep=50,K.controlPoints=!1,K.sortByCombo=!1,K.nodes=[],K.edges=[],K.onLayoutEnd=function(){},K.updateCfg(Rt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}},{key:"execute",value:function(){var K=this,Dt=K.nodes,Qt=K.nodeSize,qt=K.rankdir;if(Dt){var xe,Ie=K.edges||[],Ye=new Mo.a.graphlib.Graph;xe=Qt?l(Qt)?function(){return Qt}:function(){return[Qt,Qt]}:function(Ge){return Ge.size?l(Ge.size)?Ge.size:[Ge.size,Ge.size]:[40,40]};var Ne,He=Qe(K.nodesepFunc,K.nodesep,50),Je=Qe(K.ranksepFunc,K.ranksep,50);return qt!=="LR"&&qt!=="RL"||(He=Qe(K.ranksepFunc,K.ranksep,50),Je=Qe(K.nodesepFunc,K.nodesep,50)),Ye.setDefaultEdgeLabel(function(){return{}}),Ye.setGraph(K),Dt.forEach(function(Ge){var qe=xe(Ge),yn=Je(Ge),Dn=He(Ge),En=qe[0]+2*Dn,Ln=qe[1]+2*yn;Ye.setNode(Ge.id,{width:En,height:Ln})}),Ie.forEach(function(Ge){Ye.setEdge(Ge.source,Ge.target,{weight:Ge.weight||1})}),Mo.a.layout(Ye),Ye.nodes().forEach(function(Ge){Ne=Ye.node(Ge);var qe=Dt.findIndex(function(yn){return yn.id===Ge});Dt[qe].x=Ne.x,Dt[qe].y=Ne.y}),Ye.edges().forEach(function(Ge){Ne=Ye.edge(Ge);var qe=Ie.findIndex(function(yn){return yn.source===Ge.v&&yn.target===Ge.w});K.controlPoints&&Ie[qe].type!=="loop"&&(Ie[qe].controlPoints=Ne.points.slice(1,Ne.points.length-1))}),K.sortByCombo&&K.sortLevel("comboId"),K.onLayoutEnd&&K.onLayoutEnd(),{nodes:Dt,edges:Ie}}}},{key:"sortLevel",value:function(K){var Dt=this,Qt=Dt.nodes,qt={};Qt.forEach(function(xe){qt[xe.y]||(qt[xe.y]={y:xe.y,nodes:[]}),qt[xe.y].nodes.push(xe)}),Object.keys(qt).forEach(function(xe){var Ie=qt[xe].nodes,Ye=Ie.length,Ne={};if(Ie.forEach(function(qe){var yn=qe.comboId;Ne[yn]||(Ne[yn]={x:0,y:0,count:0}),Ne[yn].x+=qe.x,Ne[yn].y+=qe.y,Ne[yn].count++}),Object.keys(Ne).forEach(function(qe){Ne[qe].x/=Ne[qe].count,Ne[qe].y/=Ne[qe].count}),Ye!==1){var He=Ie.sort(function(qe,yn){return qe.x-yn.x}),Je=He[0].x,Ge=(He[Ye-1].x-Je)/(Ye-1);Ie.sort(function(qe,yn){var Dn=qe[K]||"undefined",En=yn[K]||"undefined";return Dn<En?-1:Dn>En?1:0}).forEach(function(qe,yn){qe.x=Je+yn*Ge})}else Dt.onLayoutEnd&&Dt.onLayoutEnd()})}},{key:"getType",value:function(){return"dagre"}}])&&uo(U.prototype,w),L&&uo(U,L),It}(x);function Qe(Z,U,w){return Z||(E(U)?function(){return U}:function(){return w})}var On=Object.prototype.toString;function Vn(Z){return On.call(Z).endsWith("Array]")}var Hn=function(U){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Vn(U))throw new TypeError("input must be an array");if(U.length===0)throw new TypeError("input must not be empty");var L=w.fromIndex,Q=L===void 0?0:L,It=w.toIndex,Rt=It===void 0?U.length:It;if(Q<0||Q>=U.length||!Number.isInteger(Q))throw new Error("fromIndex must be a positive integer smaller than length");if(Rt<=Q||Rt>U.length||!Number.isInteger(Rt))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var K=U[Q],Dt=Q+1;Dt<Rt;Dt++)U[Dt]>K&&(K=U[Dt]);return K},$e=function(U){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Vn(U))throw new TypeError("input must be an array");if(U.length===0)throw new TypeError("input must not be empty");var L=w.fromIndex,Q=L===void 0?0:L,It=w.toIndex,Rt=It===void 0?U.length:It;if(Q<0||Q>=U.length||!Number.isInteger(Q))throw new Error("fromIndex must be a positive integer smaller than length");if(Rt<=Q||Rt>U.length||!Number.isInteger(Rt))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var K=U[Q],Dt=Q+1;Dt<Rt;Dt++)U[Dt]<K&&(K=U[Dt]);return K},rn=function(U){var w,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Vn(U))throw new TypeError("input must be an array");if(U.length===0)throw new TypeError("input must not be empty");if(L.output!==void 0){if(!Vn(L.output))throw new TypeError("output option must be an array if specified");w=L.output}else w=new Array(U.length);var Q=$e(U),It=Hn(U);if(Q===It)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var Rt=L.min,K=Rt===void 0?L.autoMinMax?Q:0:Rt,Dt=L.max,Qt=Dt===void 0?L.autoMinMax?It:1:Dt;if(K>=Qt)throw new RangeError("min option must be smaller than max option");for(var qt=(Qt-K)/(It-Q),xe=0;xe<U.length;xe++)w[xe]=(U[xe]-Q)*qt+K;return w},on=" ".repeat(2),$n=" ".repeat(4);function vr(Z){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},w=U.maxRows,L=w===void 0?15:w,Q=U.maxColumns,It=Q===void 0?10:Q,Rt=U.maxNumSize,K=Rt===void 0?8:Rt;return"".concat(Z.constructor.name,` {
`).concat(on,`[
`).concat($n).concat(ar(Z,L,It,K),`
`).concat(on,`]
`).concat(on,"rows: ").concat(Z.rows,`
`).concat(on,"columns: ").concat(Z.columns,`
}`)}function ar(Z,U,w,L){for(var Q=Z.rows,It=Z.columns,Rt=Math.min(Q,U),K=Math.min(It,w),Dt=[],Qt=0;Qt<Rt;Qt++){for(var qt=[],xe=0;xe<K;xe++)qt.push(rr(Z.get(Qt,xe),L));Dt.push("".concat(qt.join(" ")))}return K!==It&&(Dt[Dt.length-1]+=" ... ".concat(It-w," more columns")),Rt!==Q&&Dt.push("... ".concat(Q-U," more rows")),Dt.join(`
`.concat($n))}function rr(Z,U){var w=String(Z);if(w.length<=U)return w.padEnd(U," ");var L=Z.toPrecision(U-2);if(L.length<=U)return L;var Q=Z.toExponential(U-2),It=Q.indexOf("e"),Rt=Q.slice(It);return Q.slice(0,U-Rt.length)+Rt}function Fr(Z){return(Fr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Z)}function Ar(Z,U,w){var L=w?Z.rows:Z.rows-1;if(U<0||U>L)throw new RangeError("Row index out of range")}function wr(Z,U,w){var L=w?Z.columns:Z.columns-1;if(U<0||U>L)throw new RangeError("Column index out of range")}function xr(Z,U){if(U.to1DArray&&(U=U.to1DArray()),U.length!==Z.columns)throw new RangeError("vector size must be the same as the number of columns");return U}function Er(Z,U){if(U.to1DArray&&(U=U.to1DArray()),U.length!==Z.rows)throw new RangeError("vector size must be the same as the number of rows");return U}function Ir(Z,U){if(Fr(U)!=="object")throw new TypeError("unexpected type for row indices");if(U.some(function(w){return w<0||w>=Z.rows}))throw new RangeError("row indices are out of range");return Array.isArray(U)||(U=Array.from(U)),U}function Lr(Z,U){if(Fr(U)!=="object")throw new TypeError("unexpected type for column indices");if(U.some(function(w){return w<0||w>=Z.columns}))throw new RangeError("column indices are out of range");return Array.isArray(U)||(U=Array.from(U)),U}function Pr(Z,U,w,L,Q){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(ri("startRow",U),ri("endRow",w),ri("startColumn",L),ri("endColumn",Q),U>w||L>Q||U<0||U>=Z.rows||w<0||w>=Z.rows||L<0||L>=Z.columns||Q<0||Q>=Z.columns)throw new RangeError("Submatrix indices are out of range")}function Dr(Z){for(var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,w=[],L=0;L<Z;L++)w.push(U);return w}function ri(Z,U){if(typeof U!="number")throw new TypeError("".concat(Z," must be a number"))}function vi(Z){if(Z.isEmpty())throw new Error("Empty matrix has no elements to index")}function ii(Z,U,w){for(var L=Z.rows,Q=Z.columns,It=[],Rt=0;Rt<L;Rt++){for(var K=0,Dt=0,Qt=0,qt=0;qt<Q;qt++)K+=Qt=Z.get(Rt,qt)-w[Rt],Dt+=Qt*Qt;U?It.push((Dt-K*K/Q)/(Q-1)):It.push((Dt-K*K/Q)/Q)}return It}function Si(Z,U,w){for(var L=Z.rows,Q=Z.columns,It=[],Rt=0;Rt<Q;Rt++){for(var K=0,Dt=0,Qt=0,qt=0;qt<L;qt++)K+=Qt=Z.get(qt,Rt)-w[Rt],Dt+=Qt*Qt;U?It.push((Dt-K*K/L)/(L-1)):It.push((Dt-K*K/L)/L)}return It}function zi(Z,U,w){for(var L=Z.rows,Q=Z.columns,It=L*Q,Rt=0,K=0,Dt=0,Qt=0;Qt<L;Qt++)for(var qt=0;qt<Q;qt++)Rt+=Dt=Z.get(Qt,qt)-w,K+=Dt*Dt;return U?(K-Rt*Rt/It)/(It-1):(K-Rt*Rt/It)/It}function Xi(Z,U){for(var w=0;w<Z.rows;w++)for(var L=0;L<Z.columns;L++)Z.set(w,L,Z.get(w,L)-U[w])}function Bi(Z,U){for(var w=0;w<Z.rows;w++)for(var L=0;L<Z.columns;L++)Z.set(w,L,Z.get(w,L)-U[L])}function Di(Z,U){for(var w=0;w<Z.rows;w++)for(var L=0;L<Z.columns;L++)Z.set(w,L,Z.get(w,L)-U)}function pe(Z){for(var U=[],w=0;w<Z.rows;w++){for(var L=0,Q=0;Q<Z.columns;Q++)L+=Math.pow(Z.get(w,Q),2)/(Z.columns-1);U.push(Math.sqrt(L))}return U}function G(Z,U){for(var w=0;w<Z.rows;w++)for(var L=0;L<Z.columns;L++)Z.set(w,L,Z.get(w,L)/U[w])}function B(Z){for(var U=[],w=0;w<Z.columns;w++){for(var L=0,Q=0;Q<Z.rows;Q++)L+=Math.pow(Z.get(Q,w),2)/(Z.rows-1);U.push(Math.sqrt(L))}return U}function $(Z,U){for(var w=0;w<Z.rows;w++)for(var L=0;L<Z.columns;L++)Z.set(w,L,Z.get(w,L)/U[L])}function ut(Z){for(var U=Z.size-1,w=0,L=0;L<Z.columns;L++)for(var Q=0;Q<Z.rows;Q++)w+=Math.pow(Z.get(Q,L),2)/U;return Math.sqrt(w)}function Bt(Z,U){for(var w=0;w<Z.rows;w++)for(var L=0;L<Z.columns;L++)Z.set(w,L,Z.get(w,L)/U)}function Jt(Z,U){return(Jt=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Z,U)}function ie(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Ce(Z);if(U){var Q=Ce(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return se(this,w)}}function se(Z,U){return!U||Ee(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Z):U}function Ce(Z){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Z)}function Ee(Z){return(Ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Z)}function cn(Z,U){if(!(Z instanceof U))throw new TypeError("Cannot call a class as a function")}function xn(Z,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Z,L.key,L)}}function _t(Z,U,w){return U&&xn(Z.prototype,U),w&&xn(Z,w),Z}var Yt=function(){function Z(){cn(this,Z)}return _t(Z,[{key:"apply",value:function(w){if(typeof w!="function")throw new TypeError("callback must be a function");for(var L=0;L<this.rows;L++)for(var Q=0;Q<this.columns;Q++)w.call(this,L,Q);return this}},{key:"to1DArray",value:function(){for(var w=[],L=0;L<this.rows;L++)for(var Q=0;Q<this.columns;Q++)w.push(this.get(L,Q));return w}},{key:"to2DArray",value:function(){for(var w=[],L=0;L<this.rows;L++){w.push([]);for(var Q=0;Q<this.columns;Q++)w[L].push(this.get(L,Q))}return w}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var w=0;w<this.rows;w++)for(var L=0;L<=w;L++)if(this.get(w,L)!==this.get(L,w))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var w=0,L=0,Q=-1,It=!0,Rt=!1;w<this.rows&&It;){for(L=0,Rt=!1;L<this.columns&&Rt===!1;)this.get(w,L)===0?L++:this.get(w,L)===1&&L>Q?(Rt=!0,Q=L):(It=!1,Rt=!0);w++}return It}},{key:"isReducedEchelonForm",value:function(){for(var w=0,L=0,Q=-1,It=!0,Rt=!1;w<this.rows&&It;){for(L=0,Rt=!1;L<this.columns&&Rt===!1;)this.get(w,L)===0?L++:this.get(w,L)===1&&L>Q?(Rt=!0,Q=L):(It=!1,Rt=!0);for(var K=L+1;K<this.rows;K++)this.get(w,K)!==0&&(It=!1);w++}return It}},{key:"echelonForm",value:function(){for(var w=this.clone(),L=0,Q=0;L<w.rows&&Q<w.columns;){for(var It=L,Rt=L;Rt<w.rows;Rt++)w.get(Rt,Q)>w.get(It,Q)&&(It=Rt);if(w.get(It,Q)===0)Q++;else{w.swapRows(L,It);for(var K=w.get(L,Q),Dt=Q;Dt<w.columns;Dt++)w.set(L,Dt,w.get(L,Dt)/K);for(var Qt=L+1;Qt<w.rows;Qt++){var qt=w.get(Qt,Q)/w.get(L,Q);w.set(Qt,Q,0);for(var xe=Q+1;xe<w.columns;xe++)w.set(Qt,xe,w.get(Qt,xe)-w.get(L,xe)*qt)}L++,Q++}}return w}},{key:"reducedEchelonForm",value:function(){for(var w=this.echelonForm(),L=w.columns,Q=w.rows,It=Q-1;It>=0;)if(w.maxRow(It)===0)It--;else{for(var Rt=0,K=!1;Rt<Q&&K===!1;)w.get(It,Rt)===1?K=!0:Rt++;for(var Dt=0;Dt<It;Dt++)for(var Qt=w.get(Dt,Rt),qt=Rt;qt<L;qt++){var xe=w.get(Dt,qt)-Qt*w.get(It,qt);w.set(Dt,qt,xe)}It--}return w}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ee(w)!=="object")throw new TypeError("options must be an object");var L=w.rows,Q=L===void 0?1:L,It=w.columns,Rt=It===void 0?1:It;if(!Number.isInteger(Q)||Q<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(Rt)||Rt<=0)throw new TypeError("columns must be a positive integer");for(var K=new vn(this.rows*Q,this.columns*Rt),Dt=0;Dt<Q;Dt++)for(var Qt=0;Qt<Rt;Qt++)K.setSubMatrix(this,this.rows*Dt,this.columns*Qt);return K}},{key:"fill",value:function(w){for(var L=0;L<this.rows;L++)for(var Q=0;Q<this.columns;Q++)this.set(L,Q,w);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(w){Ar(this,w);for(var L=[],Q=0;Q<this.columns;Q++)L.push(this.get(w,Q));return L}},{key:"getRowVector",value:function(w){return vn.rowVector(this.getRow(w))}},{key:"setRow",value:function(w,L){Ar(this,w),L=xr(this,L);for(var Q=0;Q<this.columns;Q++)this.set(w,Q,L[Q]);return this}},{key:"swapRows",value:function(w,L){Ar(this,w),Ar(this,L);for(var Q=0;Q<this.columns;Q++){var It=this.get(w,Q);this.set(w,Q,this.get(L,Q)),this.set(L,Q,It)}return this}},{key:"getColumn",value:function(w){wr(this,w);for(var L=[],Q=0;Q<this.rows;Q++)L.push(this.get(Q,w));return L}},{key:"getColumnVector",value:function(w){return vn.columnVector(this.getColumn(w))}},{key:"setColumn",value:function(w,L){wr(this,w),L=Er(this,L);for(var Q=0;Q<this.rows;Q++)this.set(Q,w,L[Q]);return this}},{key:"swapColumns",value:function(w,L){wr(this,w),wr(this,L);for(var Q=0;Q<this.rows;Q++){var It=this.get(Q,w);this.set(Q,w,this.get(Q,L)),this.set(Q,L,It)}return this}},{key:"addRowVector",value:function(w){w=xr(this,w);for(var L=0;L<this.rows;L++)for(var Q=0;Q<this.columns;Q++)this.set(L,Q,this.get(L,Q)+w[Q]);return this}},{key:"subRowVector",value:function(w){w=xr(this,w);for(var L=0;L<this.rows;L++)for(var Q=0;Q<this.columns;Q++)this.set(L,Q,this.get(L,Q)-w[Q]);return this}},{key:"mulRowVector",value:function(w){w=xr(this,w);for(var L=0;L<this.rows;L++)for(var Q=0;Q<this.columns;Q++)this.set(L,Q,this.get(L,Q)*w[Q]);return this}},{key:"divRowVector",value:function(w){w=xr(this,w);for(var L=0;L<this.rows;L++)for(var Q=0;Q<this.columns;Q++)this.set(L,Q,this.get(L,Q)/w[Q]);return this}},{key:"addColumnVector",value:function(w){w=Er(this,w);for(var L=0;L<this.rows;L++)for(var Q=0;Q<this.columns;Q++)this.set(L,Q,this.get(L,Q)+w[L]);return this}},{key:"subColumnVector",value:function(w){w=Er(this,w);for(var L=0;L<this.rows;L++)for(var Q=0;Q<this.columns;Q++)this.set(L,Q,this.get(L,Q)-w[L]);return this}},{key:"mulColumnVector",value:function(w){w=Er(this,w);for(var L=0;L<this.rows;L++)for(var Q=0;Q<this.columns;Q++)this.set(L,Q,this.get(L,Q)*w[L]);return this}},{key:"divColumnVector",value:function(w){w=Er(this,w);for(var L=0;L<this.rows;L++)for(var Q=0;Q<this.columns;Q++)this.set(L,Q,this.get(L,Q)/w[L]);return this}},{key:"mulRow",value:function(w,L){Ar(this,w);for(var Q=0;Q<this.columns;Q++)this.set(w,Q,this.get(w,Q)*L);return this}},{key:"mulColumn",value:function(w,L){wr(this,w);for(var Q=0;Q<this.rows;Q++)this.set(Q,w,this.get(Q,w)*L);return this}},{key:"max",value:function(){if(this.isEmpty())return NaN;for(var w=this.get(0,0),L=0;L<this.rows;L++)for(var Q=0;Q<this.columns;Q++)this.get(L,Q)>w&&(w=this.get(L,Q));return w}},{key:"maxIndex",value:function(){vi(this);for(var w=this.get(0,0),L=[0,0],Q=0;Q<this.rows;Q++)for(var It=0;It<this.columns;It++)this.get(Q,It)>w&&(w=this.get(Q,It),L[0]=Q,L[1]=It);return L}},{key:"min",value:function(){if(this.isEmpty())return NaN;for(var w=this.get(0,0),L=0;L<this.rows;L++)for(var Q=0;Q<this.columns;Q++)this.get(L,Q)<w&&(w=this.get(L,Q));return w}},{key:"minIndex",value:function(){vi(this);for(var w=this.get(0,0),L=[0,0],Q=0;Q<this.rows;Q++)for(var It=0;It<this.columns;It++)this.get(Q,It)<w&&(w=this.get(Q,It),L[0]=Q,L[1]=It);return L}},{key:"maxRow",value:function(w){if(Ar(this,w),this.isEmpty())return NaN;for(var L=this.get(w,0),Q=1;Q<this.columns;Q++)this.get(w,Q)>L&&(L=this.get(w,Q));return L}},{key:"maxRowIndex",value:function(w){Ar(this,w),vi(this);for(var L=this.get(w,0),Q=[w,0],It=1;It<this.columns;It++)this.get(w,It)>L&&(L=this.get(w,It),Q[1]=It);return Q}},{key:"minRow",value:function(w){if(Ar(this,w),this.isEmpty())return NaN;for(var L=this.get(w,0),Q=1;Q<this.columns;Q++)this.get(w,Q)<L&&(L=this.get(w,Q));return L}},{key:"minRowIndex",value:function(w){Ar(this,w),vi(this);for(var L=this.get(w,0),Q=[w,0],It=1;It<this.columns;It++)this.get(w,It)<L&&(L=this.get(w,It),Q[1]=It);return Q}},{key:"maxColumn",value:function(w){if(wr(this,w),this.isEmpty())return NaN;for(var L=this.get(0,w),Q=1;Q<this.rows;Q++)this.get(Q,w)>L&&(L=this.get(Q,w));return L}},{key:"maxColumnIndex",value:function(w){wr(this,w),vi(this);for(var L=this.get(0,w),Q=[0,w],It=1;It<this.rows;It++)this.get(It,w)>L&&(L=this.get(It,w),Q[0]=It);return Q}},{key:"minColumn",value:function(w){if(wr(this,w),this.isEmpty())return NaN;for(var L=this.get(0,w),Q=1;Q<this.rows;Q++)this.get(Q,w)<L&&(L=this.get(Q,w));return L}},{key:"minColumnIndex",value:function(w){wr(this,w),vi(this);for(var L=this.get(0,w),Q=[0,w],It=1;It<this.rows;It++)this.get(It,w)<L&&(L=this.get(It,w),Q[0]=It);return Q}},{key:"diag",value:function(){for(var w=Math.min(this.rows,this.columns),L=[],Q=0;Q<w;Q++)L.push(this.get(Q,Q));return L}},{key:"norm",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",L=0;if(w==="max")return this.max();if(w==="frobenius"){for(var Q=0;Q<this.rows;Q++)for(var It=0;It<this.columns;It++)L+=this.get(Q,It)*this.get(Q,It);return Math.sqrt(L)}throw new RangeError("unknown norm type: ".concat(w))}},{key:"cumulativeSum",value:function(){for(var w=0,L=0;L<this.rows;L++)for(var Q=0;Q<this.columns;Q++)w+=this.get(L,Q),this.set(L,Q,w);return this}},{key:"dot",value:function(w){Z.isMatrix(w)&&(w=w.to1DArray());var L=this.to1DArray();if(L.length!==w.length)throw new RangeError("vectors do not have the same size");for(var Q=0,It=0;It<L.length;It++)Q+=L[It]*w[It];return Q}},{key:"mmul",value:function(w){w=vn.checkMatrix(w);for(var L=this.rows,Q=this.columns,It=w.columns,Rt=new vn(L,It),K=new Float64Array(Q),Dt=0;Dt<It;Dt++){for(var Qt=0;Qt<Q;Qt++)K[Qt]=w.get(Qt,Dt);for(var qt=0;qt<L;qt++){for(var xe=0,Ie=0;Ie<Q;Ie++)xe+=this.get(qt,Ie)*K[Ie];Rt.set(qt,Dt,xe)}}return Rt}},{key:"strassen2x2",value:function(w){w=vn.checkMatrix(w);var L=new vn(2,2),Q=this.get(0,0),It=w.get(0,0),Rt=this.get(0,1),K=w.get(0,1),Dt=this.get(1,0),Qt=w.get(1,0),qt=this.get(1,1),xe=w.get(1,1),Ie=(Q+qt)*(It+xe),Ye=(Dt+qt)*It,Ne=Q*(K-xe),He=qt*(Qt-It),Je=(Q+Rt)*xe,Ge=Ie+He-Je+(Rt-qt)*(Qt+xe),qe=Ne+Je,yn=Ye+He,Dn=Ie-Ye+Ne+(Dt-Q)*(It+K);return L.set(0,0,Ge),L.set(0,1,qe),L.set(1,0,yn),L.set(1,1,Dn),L}},{key:"strassen3x3",value:function(w){w=vn.checkMatrix(w);var L=new vn(3,3),Q=this.get(0,0),It=this.get(0,1),Rt=this.get(0,2),K=this.get(1,0),Dt=this.get(1,1),Qt=this.get(1,2),qt=this.get(2,0),xe=this.get(2,1),Ie=this.get(2,2),Ye=w.get(0,0),Ne=w.get(0,1),He=w.get(0,2),Je=w.get(1,0),Ge=w.get(1,1),qe=w.get(1,2),yn=w.get(2,0),Dn=w.get(2,1),En=w.get(2,2),Ln=(Q-K)*(-Ne+Ge),Zn=(-Q+K+Dt)*(Ye-Ne+Ge),Qn=(K+Dt)*(-Ye+Ne),qn=Q*Ye,fr=(-Q+qt+xe)*(Ye-He+qe),br=(-Q+qt)*(He-qe),gr=(qt+xe)*(-Ye+He),hr=(-Rt+xe+Ie)*(Ge+yn-Dn),Cr=(Rt-Ie)*(Ge-Dn),dr=Rt*yn,Jr=(xe+Ie)*(-yn+Dn),qr=(-Rt+Dt+Qt)*(qe+yn-En),wi=(Rt-Qt)*(qe-En),Tr=(Dt+Qt)*(-yn+En),pi=qn+dr+It*Je,Ei=(Q+It+Rt-K-Dt-xe-Ie)*Ge+Zn+Qn+qn+hr+dr+Jr,ji=qn+fr+gr+(Q+It+Rt-Dt-Qt-qt-xe)*qe+dr+qr+Tr,Ao=Ln+Dt*(-Ye+Ne+Je-Ge-qe-yn+En)+Zn+qn+dr+qr+wi,go=Ln+Zn+Qn+qn+Qt*Dn,Ii=dr+qr+wi+Tr+K*He,Gi=qn+fr+br+xe*(-Ye+He+Je-Ge-qe-yn+Dn)+hr+Cr+dr,Po=hr+Cr+dr+Jr+qt*Ne,Fo=qn+fr+br+gr+Ie*En;return L.set(0,0,pi),L.set(0,1,Ei),L.set(0,2,ji),L.set(1,0,Ao),L.set(1,1,go),L.set(1,2,Ii),L.set(2,0,Gi),L.set(2,1,Po),L.set(2,2,Fo),L}},{key:"mmulStrassen",value:function(w){w=vn.checkMatrix(w);var L=this.clone(),Q=L.rows,It=L.columns,Rt=w.rows,K=w.columns;function Dt(xe,Ie,Ye){var Ne=xe.rows,He=xe.columns;if(Ne===Ie&&He===Ye)return xe;var Je=Z.zeros(Ie,Ye);return Je=Je.setSubMatrix(xe,0,0)}It!==Rt&&console.warn("Multiplying ".concat(Q," x ").concat(It," and ").concat(Rt," x ").concat(K," matrix: dimensions do not match."));var Qt=Math.max(Q,Rt),qt=Math.max(It,K);return function xe(Ie,Ye,Ne,He){if(Ne<=512||He<=512)return Ie.mmul(Ye);Ne%2==1&&He%2==1?(Ie=Dt(Ie,Ne+1,He+1),Ye=Dt(Ye,Ne+1,He+1)):Ne%2==1?(Ie=Dt(Ie,Ne+1,He),Ye=Dt(Ye,Ne+1,He)):He%2==1&&(Ie=Dt(Ie,Ne,He+1),Ye=Dt(Ye,Ne,He+1));var Je=parseInt(Ie.rows/2,10),Ge=parseInt(Ie.columns/2,10),qe=Ie.subMatrix(0,Je-1,0,Ge-1),yn=Ye.subMatrix(0,Je-1,0,Ge-1),Dn=Ie.subMatrix(0,Je-1,Ge,Ie.columns-1),En=Ye.subMatrix(0,Je-1,Ge,Ye.columns-1),Ln=Ie.subMatrix(Je,Ie.rows-1,0,Ge-1),Zn=Ye.subMatrix(Je,Ye.rows-1,0,Ge-1),Qn=Ie.subMatrix(Je,Ie.rows-1,Ge,Ie.columns-1),qn=Ye.subMatrix(Je,Ye.rows-1,Ge,Ye.columns-1),fr=xe(Z.add(qe,Qn),Z.add(yn,qn),Je,Ge),br=xe(Z.add(Ln,Qn),yn,Je,Ge),gr=xe(qe,Z.sub(En,qn),Je,Ge),hr=xe(Qn,Z.sub(Zn,yn),Je,Ge),Cr=xe(Z.add(qe,Dn),qn,Je,Ge),dr=xe(Z.sub(Ln,qe),Z.add(yn,En),Je,Ge),Jr=xe(Z.sub(Dn,Qn),Z.add(Zn,qn),Je,Ge),qr=Z.add(fr,hr);qr.sub(Cr),qr.add(Jr);var wi=Z.add(gr,Cr),Tr=Z.add(br,hr),pi=Z.sub(fr,br);pi.add(gr),pi.add(dr);var Ei=Z.zeros(2*qr.rows,2*qr.columns);return(Ei=(Ei=(Ei=(Ei=Ei.setSubMatrix(qr,0,0)).setSubMatrix(wi,qr.rows,0)).setSubMatrix(Tr,0,qr.columns)).setSubMatrix(pi,qr.rows,qr.columns)).subMatrix(0,Ne-1,0,He-1)}(L=Dt(L,Qt,qt),w=Dt(w,Qt,qt),Qt,qt)}},{key:"scaleRows",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ee(w)!=="object")throw new TypeError("options must be an object");var L=w.min,Q=L===void 0?0:L,It=w.max,Rt=It===void 0?1:It;if(!Number.isFinite(Q))throw new TypeError("min must be a number");if(!Number.isFinite(Rt))throw new TypeError("max must be a number");if(Q>=Rt)throw new RangeError("min must be smaller than max");for(var K=new vn(this.rows,this.columns),Dt=0;Dt<this.rows;Dt++){var Qt=this.getRow(Dt);Qt.length>0&&rn(Qt,{min:Q,max:Rt,output:Qt}),K.setRow(Dt,Qt)}return K}},{key:"scaleColumns",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ee(w)!=="object")throw new TypeError("options must be an object");var L=w.min,Q=L===void 0?0:L,It=w.max,Rt=It===void 0?1:It;if(!Number.isFinite(Q))throw new TypeError("min must be a number");if(!Number.isFinite(Rt))throw new TypeError("max must be a number");if(Q>=Rt)throw new RangeError("min must be smaller than max");for(var K=new vn(this.rows,this.columns),Dt=0;Dt<this.columns;Dt++){var Qt=this.getColumn(Dt);Qt.length&&rn(Qt,{min:Q,max:Rt,output:Qt}),K.setColumn(Dt,Qt)}return K}},{key:"flipRows",value:function(){for(var w=Math.ceil(this.columns/2),L=0;L<this.rows;L++)for(var Q=0;Q<w;Q++){var It=this.get(L,Q),Rt=this.get(L,this.columns-1-Q);this.set(L,Q,Rt),this.set(L,this.columns-1-Q,It)}return this}},{key:"flipColumns",value:function(){for(var w=Math.ceil(this.rows/2),L=0;L<this.columns;L++)for(var Q=0;Q<w;Q++){var It=this.get(Q,L),Rt=this.get(this.rows-1-Q,L);this.set(Q,L,Rt),this.set(this.rows-1-Q,L,It)}return this}},{key:"kroneckerProduct",value:function(w){w=vn.checkMatrix(w);for(var L=this.rows,Q=this.columns,It=w.rows,Rt=w.columns,K=new vn(L*It,Q*Rt),Dt=0;Dt<L;Dt++)for(var Qt=0;Qt<Q;Qt++)for(var qt=0;qt<It;qt++)for(var xe=0;xe<Rt;xe++)K.set(It*Dt+qt,Rt*Qt+xe,this.get(Dt,Qt)*w.get(qt,xe));return K}},{key:"transpose",value:function(){for(var w=new vn(this.columns,this.rows),L=0;L<this.rows;L++)for(var Q=0;Q<this.columns;Q++)w.set(Q,L,this.get(L,Q));return w}},{key:"sortRows",value:function(){for(var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Se,L=0;L<this.rows;L++)this.setRow(L,this.getRow(L).sort(w));return this}},{key:"sortColumns",value:function(){for(var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Se,L=0;L<this.columns;L++)this.setColumn(L,this.getColumn(L).sort(w));return this}},{key:"subMatrix",value:function(w,L,Q,It){Pr(this,w,L,Q,It);for(var Rt=new vn(L-w+1,It-Q+1),K=w;K<=L;K++)for(var Dt=Q;Dt<=It;Dt++)Rt.set(K-w,Dt-Q,this.get(K,Dt));return Rt}},{key:"subMatrixRow",value:function(w,L,Q){if(L===void 0&&(L=0),Q===void 0&&(Q=this.columns-1),L>Q||L<0||L>=this.columns||Q<0||Q>=this.columns)throw new RangeError("Argument out of range");for(var It=new vn(w.length,Q-L+1),Rt=0;Rt<w.length;Rt++)for(var K=L;K<=Q;K++){if(w[Rt]<0||w[Rt]>=this.rows)throw new RangeError("Row index out of range: ".concat(w[Rt]));It.set(Rt,K-L,this.get(w[Rt],K))}return It}},{key:"subMatrixColumn",value:function(w,L,Q){if(L===void 0&&(L=0),Q===void 0&&(Q=this.rows-1),L>Q||L<0||L>=this.rows||Q<0||Q>=this.rows)throw new RangeError("Argument out of range");for(var It=new vn(Q-L+1,w.length),Rt=0;Rt<w.length;Rt++)for(var K=L;K<=Q;K++){if(w[Rt]<0||w[Rt]>=this.columns)throw new RangeError("Column index out of range: ".concat(w[Rt]));It.set(K-L,Rt,this.get(K,w[Rt]))}return It}},{key:"setSubMatrix",value:function(w,L,Q){if((w=vn.checkMatrix(w)).isEmpty())return this;Pr(this,L,L+w.rows-1,Q,Q+w.columns-1);for(var It=0;It<w.rows;It++)for(var Rt=0;Rt<w.columns;Rt++)this.set(L+It,Q+Rt,w.get(It,Rt));return this}},{key:"selection",value:function(w,L){for(var Q=function(qt,xe,Ie){return{row:Ir(qt,xe),column:Lr(qt,Ie)}}(this,w,L),It=new vn(w.length,L.length),Rt=0;Rt<Q.row.length;Rt++)for(var K=Q.row[Rt],Dt=0;Dt<Q.column.length;Dt++){var Qt=Q.column[Dt];It.set(Rt,Dt,this.get(K,Qt))}return It}},{key:"trace",value:function(){for(var w=Math.min(this.rows,this.columns),L=0,Q=0;Q<w;Q++)L+=this.get(Q,Q);return L}},{key:"clone",value:function(){for(var w=new vn(this.rows,this.columns),L=0;L<this.rows;L++)for(var Q=0;Q<this.columns;Q++)w.set(L,Q,this.get(L,Q));return w}},{key:"sum",value:function(w){switch(w){case"row":return function(L){for(var Q=Dr(L.rows),It=0;It<L.rows;++It)for(var Rt=0;Rt<L.columns;++Rt)Q[It]+=L.get(It,Rt);return Q}(this);case"column":return function(L){for(var Q=Dr(L.columns),It=0;It<L.rows;++It)for(var Rt=0;Rt<L.columns;++Rt)Q[Rt]+=L.get(It,Rt);return Q}(this);case void 0:return function(L){for(var Q=0,It=0;It<L.rows;It++)for(var Rt=0;Rt<L.columns;Rt++)Q+=L.get(It,Rt);return Q}(this);default:throw new Error("invalid option: ".concat(w))}}},{key:"product",value:function(w){switch(w){case"row":return function(L){for(var Q=Dr(L.rows,1),It=0;It<L.rows;++It)for(var Rt=0;Rt<L.columns;++Rt)Q[It]*=L.get(It,Rt);return Q}(this);case"column":return function(L){for(var Q=Dr(L.columns,1),It=0;It<L.rows;++It)for(var Rt=0;Rt<L.columns;++Rt)Q[Rt]*=L.get(It,Rt);return Q}(this);case void 0:return function(L){for(var Q=1,It=0;It<L.rows;It++)for(var Rt=0;Rt<L.columns;Rt++)Q*=L.get(It,Rt);return Q}(this);default:throw new Error("invalid option: ".concat(w))}}},{key:"mean",value:function(w){var L=this.sum(w);switch(w){case"row":for(var Q=0;Q<this.rows;Q++)L[Q]/=this.columns;return L;case"column":for(var It=0;It<this.columns;It++)L[It]/=this.rows;return L;case void 0:return L/this.size;default:throw new Error("invalid option: ".concat(w))}}},{key:"variance",value:function(w){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ee(w)==="object"&&(L=w,w=void 0),Ee(L)!=="object")throw new TypeError("options must be an object");var Q=L,It=Q.unbiased,Rt=It===void 0||It,K=Q.mean,Dt=K===void 0?this.mean(w):K;if(typeof Rt!="boolean")throw new TypeError("unbiased must be a boolean");switch(w){case"row":if(!Array.isArray(Dt))throw new TypeError("mean must be an array");return ii(this,Rt,Dt);case"column":if(!Array.isArray(Dt))throw new TypeError("mean must be an array");return Si(this,Rt,Dt);case void 0:if(typeof Dt!="number")throw new TypeError("mean must be a number");return zi(this,Rt,Dt);default:throw new Error("invalid option: ".concat(w))}}},{key:"standardDeviation",value:function(w,L){Ee(w)==="object"&&(L=w,w=void 0);var Q=this.variance(w,L);if(w===void 0)return Math.sqrt(Q);for(var It=0;It<Q.length;It++)Q[It]=Math.sqrt(Q[It]);return Q}},{key:"center",value:function(w){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ee(w)==="object"&&(L=w,w=void 0),Ee(L)!=="object")throw new TypeError("options must be an object");var Q=L,It=Q.center,Rt=It===void 0?this.mean(w):It;switch(w){case"row":if(!Array.isArray(Rt))throw new TypeError("center must be an array");return Xi(this,Rt),this;case"column":if(!Array.isArray(Rt))throw new TypeError("center must be an array");return Bi(this,Rt),this;case void 0:if(typeof Rt!="number")throw new TypeError("center must be a number");return Di(this,Rt),this;default:throw new Error("invalid option: ".concat(w))}}},{key:"scale",value:function(w){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ee(w)==="object"&&(L=w,w=void 0),Ee(L)!=="object")throw new TypeError("options must be an object");var Q=L.scale;switch(w){case"row":if(Q===void 0)Q=pe(this);else if(!Array.isArray(Q))throw new TypeError("scale must be an array");return G(this,Q),this;case"column":if(Q===void 0)Q=B(this);else if(!Array.isArray(Q))throw new TypeError("scale must be an array");return $(this,Q),this;case void 0:if(Q===void 0)Q=ut(this);else if(typeof Q!="number")throw new TypeError("scale must be a number");return Bt(this,Q),this;default:throw new Error("invalid option: ".concat(w))}}},{key:"toString",value:function(w){return vr(this,w)}},{key:"size",get:function(){return this.rows*this.columns}}],[{key:"from1DArray",value:function(w,L,Q){if(w*L!==Q.length)throw new RangeError("data length does not match given dimensions");for(var It=new vn(w,L),Rt=0;Rt<w;Rt++)for(var K=0;K<L;K++)It.set(Rt,K,Q[Rt*L+K]);return It}},{key:"rowVector",value:function(w){for(var L=new vn(1,w.length),Q=0;Q<w.length;Q++)L.set(0,Q,w[Q]);return L}},{key:"columnVector",value:function(w){for(var L=new vn(w.length,1),Q=0;Q<w.length;Q++)L.set(Q,0,w[Q]);return L}},{key:"zeros",value:function(w,L){return new vn(w,L)}},{key:"ones",value:function(w,L){return new vn(w,L).fill(1)}},{key:"rand",value:function(w,L){var Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Ee(Q)!=="object")throw new TypeError("options must be an object");for(var It=Q.random,Rt=It===void 0?Math.random:It,K=new vn(w,L),Dt=0;Dt<w;Dt++)for(var Qt=0;Qt<L;Qt++)K.set(Dt,Qt,Rt());return K}},{key:"randInt",value:function(w,L){var Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Ee(Q)!=="object")throw new TypeError("options must be an object");var It=Q.min,Rt=It===void 0?0:It,K=Q.max,Dt=K===void 0?1e3:K,Qt=Q.random,qt=Qt===void 0?Math.random:Qt;if(!Number.isInteger(Rt))throw new TypeError("min must be an integer");if(!Number.isInteger(Dt))throw new TypeError("max must be an integer");if(Rt>=Dt)throw new RangeError("min must be smaller than max");for(var xe=Dt-Rt,Ie=new vn(w,L),Ye=0;Ye<w;Ye++)for(var Ne=0;Ne<L;Ne++){var He=Rt+Math.round(qt()*xe);Ie.set(Ye,Ne,He)}return Ie}},{key:"eye",value:function(w,L,Q){L===void 0&&(L=w),Q===void 0&&(Q=1);for(var It=Math.min(w,L),Rt=this.zeros(w,L),K=0;K<It;K++)Rt.set(K,K,Q);return Rt}},{key:"diag",value:function(w,L,Q){var It=w.length;L===void 0&&(L=It),Q===void 0&&(Q=L);for(var Rt=Math.min(It,L,Q),K=this.zeros(L,Q),Dt=0;Dt<Rt;Dt++)K.set(Dt,Dt,w[Dt]);return K}},{key:"min",value:function(w,L){w=this.checkMatrix(w),L=this.checkMatrix(L);for(var Q=w.rows,It=w.columns,Rt=new vn(Q,It),K=0;K<Q;K++)for(var Dt=0;Dt<It;Dt++)Rt.set(K,Dt,Math.min(w.get(K,Dt),L.get(K,Dt)));return Rt}},{key:"max",value:function(w,L){w=this.checkMatrix(w),L=this.checkMatrix(L);for(var Q=w.rows,It=w.columns,Rt=new this(Q,It),K=0;K<Q;K++)for(var Dt=0;Dt<It;Dt++)Rt.set(K,Dt,Math.max(w.get(K,Dt),L.get(K,Dt)));return Rt}},{key:"checkMatrix",value:function(w){return Z.isMatrix(w)?w:new vn(w)}},{key:"isMatrix",value:function(w){return w!=null&&w.klass==="Matrix"}}]),Z}();function Se(Z,U){return Z-U}Yt.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Yt.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return vr(this)}),Yt.random=Yt.rand,Yt.randomInt=Yt.randInt,Yt.diagonal=Yt.diag,Yt.prototype.diagonal=Yt.prototype.diag,Yt.identity=Yt.eye,Yt.prototype.negate=Yt.prototype.neg,Yt.prototype.tensorProduct=Yt.prototype.kroneckerProduct;var Wt,ue,vn=function(Z){(function(L,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(Q&&Q.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),Q&&Jt(L,Q)})(w,Z);var U=ie(w);function w(L,Q){var It;if(cn(this,w),It=U.call(this),w.isMatrix(L))return se(It,L.clone());if(Number.isInteger(L)&&L>=0){if(It.data=[],!(Number.isInteger(Q)&&Q>=0))throw new TypeError("nColumns must be a positive integer");for(var Rt=0;Rt<L;Rt++)It.data.push(new Float64Array(Q))}else{if(!Array.isArray(L))throw new TypeError("First argument must be a positive number or an array");var K=L;if(typeof(Q=(L=K.length)?K[0].length:0)!="number")throw new TypeError("Data must be a 2D array with at least one element");It.data=[];for(var Dt=0;Dt<L;Dt++){if(K[Dt].length!==Q)throw new RangeError("Inconsistent array dimensions");It.data.push(Float64Array.from(K[Dt]))}}return It.rows=L,It.columns=Q,It}return _t(w,[{key:"set",value:function(Q,It,Rt){return this.data[Q][It]=Rt,this}},{key:"get",value:function(Q,It){return this.data[Q][It]}},{key:"removeRow",value:function(Q){return Ar(this,Q),this.data.splice(Q,1),this.rows-=1,this}},{key:"addRow",value:function(Q,It){return It===void 0&&(It=Q,Q=this.rows),Ar(this,Q,!0),It=Float64Array.from(xr(this,It)),this.data.splice(Q,0,It),this.rows+=1,this}},{key:"removeColumn",value:function(Q){wr(this,Q);for(var It=0;It<this.rows;It++){for(var Rt=new Float64Array(this.columns-1),K=0;K<Q;K++)Rt[K]=this.data[It][K];for(var Dt=Q+1;Dt<this.columns;Dt++)Rt[Dt-1]=this.data[It][Dt];this.data[It]=Rt}return this.columns-=1,this}},{key:"addColumn",value:function(Q,It){It===void 0&&(It=Q,Q=this.columns),wr(this,Q,!0),It=Er(this,It);for(var Rt=0;Rt<this.rows;Rt++){for(var K=new Float64Array(this.columns+1),Dt=0;Dt<Q;Dt++)K[Dt]=this.data[Rt][Dt];for(K[Dt++]=It[Rt];Dt<this.columns+1;Dt++)K[Dt]=this.data[Rt][Dt-1];this.data[Rt]=K}return this.columns+=1,this}}]),w}(Yt);function kn(Z){return(kn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Z)}function _n(Z,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Z,L.key,L)}}function Un(Z,U){return(Un=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Z,U)}function Ze(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=R(Z);if(U){var Q=R(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return Te(this,w)}}function Te(Z,U){return!U||kn(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Z):U}function R(Z){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Z)}ue=vn,(Wt=Yt).prototype.add=function(Z){return typeof Z=="number"?this.addS(Z):this.addM(Z)},Wt.prototype.addS=function(Z){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)+Z);return this},Wt.prototype.addM=function(Z){if(Z=ue.checkMatrix(Z),this.rows!==Z.rows||this.columns!==Z.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)+Z.get(U,w));return this},Wt.add=function(Z,U){return new ue(Z).add(U)},Wt.prototype.sub=function(Z){return typeof Z=="number"?this.subS(Z):this.subM(Z)},Wt.prototype.subS=function(Z){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)-Z);return this},Wt.prototype.subM=function(Z){if(Z=ue.checkMatrix(Z),this.rows!==Z.rows||this.columns!==Z.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)-Z.get(U,w));return this},Wt.sub=function(Z,U){return new ue(Z).sub(U)},Wt.prototype.subtract=Wt.prototype.sub,Wt.prototype.subtractS=Wt.prototype.subS,Wt.prototype.subtractM=Wt.prototype.subM,Wt.subtract=Wt.sub,Wt.prototype.mul=function(Z){return typeof Z=="number"?this.mulS(Z):this.mulM(Z)},Wt.prototype.mulS=function(Z){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)*Z);return this},Wt.prototype.mulM=function(Z){if(Z=ue.checkMatrix(Z),this.rows!==Z.rows||this.columns!==Z.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)*Z.get(U,w));return this},Wt.mul=function(Z,U){return new ue(Z).mul(U)},Wt.prototype.multiply=Wt.prototype.mul,Wt.prototype.multiplyS=Wt.prototype.mulS,Wt.prototype.multiplyM=Wt.prototype.mulM,Wt.multiply=Wt.mul,Wt.prototype.div=function(Z){return typeof Z=="number"?this.divS(Z):this.divM(Z)},Wt.prototype.divS=function(Z){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)/Z);return this},Wt.prototype.divM=function(Z){if(Z=ue.checkMatrix(Z),this.rows!==Z.rows||this.columns!==Z.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)/Z.get(U,w));return this},Wt.div=function(Z,U){return new ue(Z).div(U)},Wt.prototype.divide=Wt.prototype.div,Wt.prototype.divideS=Wt.prototype.divS,Wt.prototype.divideM=Wt.prototype.divM,Wt.divide=Wt.div,Wt.prototype.mod=function(Z){return typeof Z=="number"?this.modS(Z):this.modM(Z)},Wt.prototype.modS=function(Z){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)%Z);return this},Wt.prototype.modM=function(Z){if(Z=ue.checkMatrix(Z),this.rows!==Z.rows||this.columns!==Z.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)%Z.get(U,w));return this},Wt.mod=function(Z,U){return new ue(Z).mod(U)},Wt.prototype.modulus=Wt.prototype.mod,Wt.prototype.modulusS=Wt.prototype.modS,Wt.prototype.modulusM=Wt.prototype.modM,Wt.modulus=Wt.mod,Wt.prototype.and=function(Z){return typeof Z=="number"?this.andS(Z):this.andM(Z)},Wt.prototype.andS=function(Z){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)&Z);return this},Wt.prototype.andM=function(Z){if(Z=ue.checkMatrix(Z),this.rows!==Z.rows||this.columns!==Z.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)&Z.get(U,w));return this},Wt.and=function(Z,U){return new ue(Z).and(U)},Wt.prototype.or=function(Z){return typeof Z=="number"?this.orS(Z):this.orM(Z)},Wt.prototype.orS=function(Z){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)|Z);return this},Wt.prototype.orM=function(Z){if(Z=ue.checkMatrix(Z),this.rows!==Z.rows||this.columns!==Z.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)|Z.get(U,w));return this},Wt.or=function(Z,U){return new ue(Z).or(U)},Wt.prototype.xor=function(Z){return typeof Z=="number"?this.xorS(Z):this.xorM(Z)},Wt.prototype.xorS=function(Z){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)^Z);return this},Wt.prototype.xorM=function(Z){if(Z=ue.checkMatrix(Z),this.rows!==Z.rows||this.columns!==Z.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)^Z.get(U,w));return this},Wt.xor=function(Z,U){return new ue(Z).xor(U)},Wt.prototype.leftShift=function(Z){return typeof Z=="number"?this.leftShiftS(Z):this.leftShiftM(Z)},Wt.prototype.leftShiftS=function(Z){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)<<Z);return this},Wt.prototype.leftShiftM=function(Z){if(Z=ue.checkMatrix(Z),this.rows!==Z.rows||this.columns!==Z.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)<<Z.get(U,w));return this},Wt.leftShift=function(Z,U){return new ue(Z).leftShift(U)},Wt.prototype.signPropagatingRightShift=function(Z){return typeof Z=="number"?this.signPropagatingRightShiftS(Z):this.signPropagatingRightShiftM(Z)},Wt.prototype.signPropagatingRightShiftS=function(Z){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)>>Z);return this},Wt.prototype.signPropagatingRightShiftM=function(Z){if(Z=ue.checkMatrix(Z),this.rows!==Z.rows||this.columns!==Z.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)>>Z.get(U,w));return this},Wt.signPropagatingRightShift=function(Z,U){return new ue(Z).signPropagatingRightShift(U)},Wt.prototype.rightShift=function(Z){return typeof Z=="number"?this.rightShiftS(Z):this.rightShiftM(Z)},Wt.prototype.rightShiftS=function(Z){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)>>>Z);return this},Wt.prototype.rightShiftM=function(Z){if(Z=ue.checkMatrix(Z),this.rows!==Z.rows||this.columns!==Z.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,this.get(U,w)>>>Z.get(U,w));return this},Wt.rightShift=function(Z,U){return new ue(Z).rightShift(U)},Wt.prototype.zeroFillRightShift=Wt.prototype.rightShift,Wt.prototype.zeroFillRightShiftS=Wt.prototype.rightShiftS,Wt.prototype.zeroFillRightShiftM=Wt.prototype.rightShiftM,Wt.zeroFillRightShift=Wt.rightShift,Wt.prototype.not=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,~this.get(Z,U));return this},Wt.not=function(Z){return new ue(Z).not()},Wt.prototype.abs=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.abs(this.get(Z,U)));return this},Wt.abs=function(Z){return new ue(Z).abs()},Wt.prototype.acos=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.acos(this.get(Z,U)));return this},Wt.acos=function(Z){return new ue(Z).acos()},Wt.prototype.acosh=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.acosh(this.get(Z,U)));return this},Wt.acosh=function(Z){return new ue(Z).acosh()},Wt.prototype.asin=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.asin(this.get(Z,U)));return this},Wt.asin=function(Z){return new ue(Z).asin()},Wt.prototype.asinh=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.asinh(this.get(Z,U)));return this},Wt.asinh=function(Z){return new ue(Z).asinh()},Wt.prototype.atan=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.atan(this.get(Z,U)));return this},Wt.atan=function(Z){return new ue(Z).atan()},Wt.prototype.atanh=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.atanh(this.get(Z,U)));return this},Wt.atanh=function(Z){return new ue(Z).atanh()},Wt.prototype.cbrt=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.cbrt(this.get(Z,U)));return this},Wt.cbrt=function(Z){return new ue(Z).cbrt()},Wt.prototype.ceil=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.ceil(this.get(Z,U)));return this},Wt.ceil=function(Z){return new ue(Z).ceil()},Wt.prototype.clz32=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.clz32(this.get(Z,U)));return this},Wt.clz32=function(Z){return new ue(Z).clz32()},Wt.prototype.cos=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.cos(this.get(Z,U)));return this},Wt.cos=function(Z){return new ue(Z).cos()},Wt.prototype.cosh=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.cosh(this.get(Z,U)));return this},Wt.cosh=function(Z){return new ue(Z).cosh()},Wt.prototype.exp=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.exp(this.get(Z,U)));return this},Wt.exp=function(Z){return new ue(Z).exp()},Wt.prototype.expm1=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.expm1(this.get(Z,U)));return this},Wt.expm1=function(Z){return new ue(Z).expm1()},Wt.prototype.floor=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.floor(this.get(Z,U)));return this},Wt.floor=function(Z){return new ue(Z).floor()},Wt.prototype.fround=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.fround(this.get(Z,U)));return this},Wt.fround=function(Z){return new ue(Z).fround()},Wt.prototype.log=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.log(this.get(Z,U)));return this},Wt.log=function(Z){return new ue(Z).log()},Wt.prototype.log1p=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.log1p(this.get(Z,U)));return this},Wt.log1p=function(Z){return new ue(Z).log1p()},Wt.prototype.log10=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.log10(this.get(Z,U)));return this},Wt.log10=function(Z){return new ue(Z).log10()},Wt.prototype.log2=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.log2(this.get(Z,U)));return this},Wt.log2=function(Z){return new ue(Z).log2()},Wt.prototype.round=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.round(this.get(Z,U)));return this},Wt.round=function(Z){return new ue(Z).round()},Wt.prototype.sign=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.sign(this.get(Z,U)));return this},Wt.sign=function(Z){return new ue(Z).sign()},Wt.prototype.sin=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.sin(this.get(Z,U)));return this},Wt.sin=function(Z){return new ue(Z).sin()},Wt.prototype.sinh=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.sinh(this.get(Z,U)));return this},Wt.sinh=function(Z){return new ue(Z).sinh()},Wt.prototype.sqrt=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.sqrt(this.get(Z,U)));return this},Wt.sqrt=function(Z){return new ue(Z).sqrt()},Wt.prototype.tan=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.tan(this.get(Z,U)));return this},Wt.tan=function(Z){return new ue(Z).tan()},Wt.prototype.tanh=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.tanh(this.get(Z,U)));return this},Wt.tanh=function(Z){return new ue(Z).tanh()},Wt.prototype.trunc=function(){for(var Z=0;Z<this.rows;Z++)for(var U=0;U<this.columns;U++)this.set(Z,U,Math.trunc(this.get(Z,U)));return this},Wt.trunc=function(Z){return new ue(Z).trunc()},Wt.pow=function(Z,U){return new ue(Z).pow(U)},Wt.prototype.pow=function(Z){return typeof Z=="number"?this.powS(Z):this.powM(Z)},Wt.prototype.powS=function(Z){for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,Math.pow(this.get(U,w),Z));return this},Wt.prototype.powM=function(Z){if(Z=ue.checkMatrix(Z),this.rows!==Z.rows||this.columns!==Z.columns)throw new RangeError("Matrices dimensions must be equal");for(var U=0;U<this.rows;U++)for(var w=0;w<this.columns;w++)this.set(U,w,Math.pow(this.get(U,w),Z.get(U,w)));return this};var mt=function(Z){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&Un(Rt,K)})(It,Z);var U,w,L,Q=Ze(It);function It(Rt){var K;return function(Dt,Qt){if(!(Dt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=Q.call(this)).data=Rt,K.rows=Rt.length,K.columns=Rt[0].length,K}return U=It,(w=[{key:"set",value:function(K,Dt,Qt){return this.data[K][Dt]=Qt,this}},{key:"get",value:function(K,Dt){return this.data[K][Dt]}}])&&_n(U.prototype,w),L&&_n(U,L),It}(Yt);function $t(Z,U){var w=0;return Math.abs(Z)>Math.abs(U)?(w=U/Z,Math.abs(Z)*Math.sqrt(1+w*w)):U!==0?(w=Z/U,Math.abs(U)*Math.sqrt(1+w*w)):0}function me(Z,U){if(!(Z instanceof U))throw new TypeError("Cannot call a class as a function")}function Zt(Z,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Z,L.key,L)}}var ve=function(){function Z(Q){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(me(this,Z),(Q=mt.checkMatrix(Q)).isEmpty())throw new Error("Matrix must be non-empty");var Rt,K=Q.rows,Dt=Q.columns,Qt=It.computeLeftSingularVectors,qt=Qt===void 0||Qt,xe=It.computeRightSingularVectors,Ie=xe===void 0||xe,Ye=It.autoTranspose,Ne=Ye!==void 0&&Ye,He=Boolean(qt),Je=Boolean(Ie),Ge=!1;if(K<Dt)if(Ne){K=(Rt=Q.transpose()).rows,Dt=Rt.columns,Ge=!0;var qe=He;He=Je,Je=qe}else Rt=Q.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else Rt=Q.clone();for(var yn=Math.min(K,Dt),Dn=Math.min(K+1,Dt),En=new Float64Array(Dn),Ln=new vn(K,yn),Zn=new vn(Dt,Dt),Qn=new Float64Array(Dt),qn=new Float64Array(K),fr=new Float64Array(Dn),br=0;br<Dn;br++)fr[br]=br;for(var gr=Math.min(K-1,Dt),hr=Math.max(0,Math.min(Dt-2,K)),Cr=Math.max(gr,hr),dr=0;dr<Cr;dr++){if(dr<gr){En[dr]=0;for(var Jr=dr;Jr<K;Jr++)En[dr]=$t(En[dr],Rt.get(Jr,dr));if(En[dr]!==0){Rt.get(dr,dr)<0&&(En[dr]=-En[dr]);for(var qr=dr;qr<K;qr++)Rt.set(qr,dr,Rt.get(qr,dr)/En[dr]);Rt.set(dr,dr,Rt.get(dr,dr)+1)}En[dr]=-En[dr]}for(var wi=dr+1;wi<Dt;wi++){if(dr<gr&&En[dr]!==0){for(var Tr=0,pi=dr;pi<K;pi++)Tr+=Rt.get(pi,dr)*Rt.get(pi,wi);Tr=-Tr/Rt.get(dr,dr);for(var Ei=dr;Ei<K;Ei++)Rt.set(Ei,wi,Rt.get(Ei,wi)+Tr*Rt.get(Ei,dr))}Qn[wi]=Rt.get(dr,wi)}if(He&&dr<gr)for(var ji=dr;ji<K;ji++)Ln.set(ji,dr,Rt.get(ji,dr));if(dr<hr){Qn[dr]=0;for(var Ao=dr+1;Ao<Dt;Ao++)Qn[dr]=$t(Qn[dr],Qn[Ao]);if(Qn[dr]!==0){Qn[dr+1]<0&&(Qn[dr]=0-Qn[dr]);for(var go=dr+1;go<Dt;go++)Qn[go]/=Qn[dr];Qn[dr+1]+=1}if(Qn[dr]=-Qn[dr],dr+1<K&&Qn[dr]!==0){for(var Ii=dr+1;Ii<K;Ii++)qn[Ii]=0;for(var Gi=dr+1;Gi<K;Gi++)for(var Po=dr+1;Po<Dt;Po++)qn[Gi]+=Qn[Po]*Rt.get(Gi,Po);for(var Fo=dr+1;Fo<Dt;Fo++)for(var Ra=-Qn[Fo]/Qn[dr+1],pa=dr+1;pa<K;pa++)Rt.set(pa,Fo,Rt.get(pa,Fo)+Ra*qn[pa])}if(Je)for(var qa=dr+1;qa<Dt;qa++)Zn.set(qa,dr,Qn[qa])}}var Co=Math.min(Dt,K+1);if(gr<Dt&&(En[gr]=Rt.get(gr,gr)),K<Co&&(En[Co-1]=0),hr+1<Co&&(Qn[hr]=Rt.get(hr,Co-1)),Qn[Co-1]=0,He){for(var Lc=gr;Lc<yn;Lc++){for(var yd=0;yd<K;yd++)Ln.set(yd,Lc,0);Ln.set(Lc,Lc,1)}for(var Lo=gr-1;Lo>=0;Lo--)if(En[Lo]!==0){for(var Bc=Lo+1;Bc<yn;Bc++){for(var lh=0,fh=Lo;fh<K;fh++)lh+=Ln.get(fh,Lo)*Ln.get(fh,Bc);lh=-lh/Ln.get(Lo,Lo);for(var Fc=Lo;Fc<K;Fc++)Ln.set(Fc,Bc,Ln.get(Fc,Bc)+lh*Ln.get(Fc,Lo))}for(var hh=Lo;hh<K;hh++)Ln.set(hh,Lo,-Ln.get(hh,Lo));Ln.set(Lo,Lo,1+Ln.get(Lo,Lo));for(var md=0;md<Lo-1;md++)Ln.set(md,Lo,0)}else{for(var bd=0;bd<K;bd++)Ln.set(bd,Lo,0);Ln.set(Lo,Lo,1)}}if(Je)for(var aa=Dt-1;aa>=0;aa--){if(aa<hr&&Qn[aa]!==0)for(var Gc=aa+1;Gc<Dt;Gc++){for(var dh=0,vh=aa+1;vh<Dt;vh++)dh+=Zn.get(vh,aa)*Zn.get(vh,Gc);dh=-dh/Zn.get(aa+1,aa);for(var Uc=aa+1;Uc<Dt;Uc++)Zn.set(Uc,Gc,Zn.get(Uc,Gc)+dh*Zn.get(Uc,aa))}for(var xd=0;xd<Dt;xd++)Zn.set(xd,aa,0);Zn.set(aa,aa,1)}for(var Id=Co-1,Pd=Number.EPSILON;Co>0;){var Ni=void 0,zc=void 0;for(Ni=Co-2;Ni>=-1&&Ni!==-1;Ni--){var kd=Number.MIN_VALUE+Pd*Math.abs(En[Ni]+Math.abs(En[Ni+1]));if(Math.abs(Qn[Ni])<=kd||Number.isNaN(Qn[Ni])){Qn[Ni]=0;break}}if(Ni===Co-2)zc=4;else{var ga=void 0;for(ga=Co-1;ga>=Ni&&ga!==Ni;ga--){var Rd=(ga!==Co?Math.abs(Qn[ga]):0)+(ga!==Ni+1?Math.abs(Qn[ga-1]):0);if(Math.abs(En[ga])<=Pd*Rd){En[ga]=0;break}}ga===Ni?zc=3:ga===Co-1?zc=1:(zc=2,Ni=ga)}switch(Ni++,zc){case 1:var Od=Qn[Co-2];Qn[Co-2]=0;for(var Ma=Co-2;Ma>=Ni;Ma--){var _c=$t(En[Ma],Od),Sd=En[Ma]/_c,wd=Od/_c;if(En[Ma]=_c,Ma!==Ni&&(Od=-wd*Qn[Ma-1],Qn[Ma-1]=Sd*Qn[Ma-1]),Je)for(var js=0;js<Dt;js++)_c=Sd*Zn.get(js,Ma)+wd*Zn.get(js,Co-1),Zn.set(js,Co-1,-wd*Zn.get(js,Ma)+Sd*Zn.get(js,Co-1)),Zn.set(js,Ma,_c)}break;case 2:var Ed=Qn[Ni-1];Qn[Ni-1]=0;for(var Na=Ni;Na<Co;Na++){var Vc=$t(En[Na],Ed),Md=En[Na]/Vc,Ad=Ed/Vc;if(En[Na]=Vc,Ed=-Ad*Qn[Na],Qn[Na]=Md*Qn[Na],He)for(var Is=0;Is<K;Is++)Vc=Md*Ln.get(Is,Na)+Ad*Ln.get(Is,Ni-1),Ln.set(Is,Ni-1,-Ad*Ln.get(Is,Na)+Md*Ln.get(Is,Ni-1)),Ln.set(Is,Na,Vc)}break;case 3:var Wc=Math.max(Math.abs(En[Co-1]),Math.abs(En[Co-2]),Math.abs(Qn[Co-2]),Math.abs(En[Ni]),Math.abs(Qn[Ni])),Qu=En[Co-1]/Wc,Dd=En[Co-2]/Wc,ph=Qn[Co-2]/Wc,Cd=En[Ni]/Wc,Nd=Qn[Ni]/Wc,lu=((Dd+Qu)*(Dd-Qu)+ph*ph)/2,gh=Qu*ph*(Qu*ph),Td=0;lu===0&&gh===0||(Td=gh/(lu+(Td=lu<0?0-Math.sqrt(lu*lu+gh):Math.sqrt(lu*lu+gh))));for(var fu=(Cd+Qu)*(Cd-Qu)+Td,Zu=Cd*Nd,mo=Ni;mo<Co-1;mo++){var sa=$t(fu,Zu);sa===0&&(sa=Number.MIN_VALUE);var La=fu/sa,Ba=Zu/sa;if(mo!==Ni&&(Qn[mo-1]=sa),fu=La*En[mo]+Ba*Qn[mo],Qn[mo]=La*Qn[mo]-Ba*En[mo],Zu=Ba*En[mo+1],En[mo+1]=La*En[mo+1],Je)for(var Ps=0;Ps<Dt;Ps++)sa=La*Zn.get(Ps,mo)+Ba*Zn.get(Ps,mo+1),Zn.set(Ps,mo+1,-Ba*Zn.get(Ps,mo)+La*Zn.get(Ps,mo+1)),Zn.set(Ps,mo,sa);if((sa=$t(fu,Zu))===0&&(sa=Number.MIN_VALUE),La=fu/sa,Ba=Zu/sa,En[mo]=sa,fu=La*Qn[mo]+Ba*En[mo+1],En[mo+1]=-Ba*Qn[mo]+La*En[mo+1],Zu=Ba*Qn[mo+1],Qn[mo+1]=La*Qn[mo+1],He&&mo<K-1)for(var Ds=0;Ds<K;Ds++)sa=La*Ln.get(Ds,mo)+Ba*Ln.get(Ds,mo+1),Ln.set(Ds,mo+1,-Ba*Ln.get(Ds,mo)+La*Ln.get(Ds,mo+1)),Ln.set(Ds,mo,sa)}Qn[Co-2]=fu;break;case 4:if(En[Ni]<=0&&(En[Ni]=En[Ni]<0?-En[Ni]:0,Je))for(var yh=0;yh<=Id;yh++)Zn.set(yh,Ni,-Zn.get(yh,Ni));for(;Ni<Id&&!(En[Ni]>=En[Ni+1]);){var Xc=En[Ni];if(En[Ni]=En[Ni+1],En[Ni+1]=Xc,Je&&Ni<Dt-1)for(var $u=0;$u<Dt;$u++)Xc=Zn.get($u,Ni+1),Zn.set($u,Ni+1,Zn.get($u,Ni)),Zn.set($u,Ni,Xc);if(He&&Ni<K-1)for(var qu=0;qu<K;qu++)Xc=Ln.get(qu,Ni+1),Ln.set(qu,Ni+1,Ln.get(qu,Ni)),Ln.set(qu,Ni,Xc);Ni++}Co--}}if(Ge){var Ld=Zn;Zn=Ln,Ln=Ld}this.m=K,this.n=Dt,this.s=En,this.U=Ln,this.V=Zn}var U,w,L;return U=Z,(w=[{key:"solve",value:function(It){for(var Rt=It,K=this.threshold,Dt=this.s.length,Qt=vn.zeros(Dt,Dt),qt=0;qt<Dt;qt++)Math.abs(this.s[qt])<=K?Qt.set(qt,qt,0):Qt.set(qt,qt,1/this.s[qt]);for(var xe=this.U,Ie=this.rightSingularVectors,Ye=Ie.mmul(Qt),Ne=Ie.rows,He=xe.rows,Je=vn.zeros(Ne,He),Ge=0;Ge<Ne;Ge++)for(var qe=0;qe<He;qe++){for(var yn=0,Dn=0;Dn<Dt;Dn++)yn+=Ye.get(Ge,Dn)*xe.get(qe,Dn);Je.set(Ge,qe,yn)}return Je.mmul(Rt)}},{key:"solveForDiagonal",value:function(It){return this.solve(vn.diag(It))}},{key:"inverse",value:function(){for(var It=this.V,Rt=this.threshold,K=It.rows,Dt=It.columns,Qt=new vn(K,this.s.length),qt=0;qt<K;qt++)for(var xe=0;xe<Dt;xe++)Math.abs(this.s[xe])>Rt&&Qt.set(qt,xe,It.get(qt,xe)/this.s[xe]);for(var Ie=this.U,Ye=Ie.rows,Ne=Ie.columns,He=new vn(K,Ye),Je=0;Je<K;Je++)for(var Ge=0;Ge<Ye;Ge++){for(var qe=0,yn=0;yn<Ne;yn++)qe+=Qt.get(Je,yn)*Ie.get(Ge,yn);He.set(Je,Ge,qe)}return He}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var It=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,Rt=0,K=this.s,Dt=0,Qt=K.length;Dt<Qt;Dt++)K[Dt]>It&&Rt++;return Rt}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return vn.diag(this.s)}}])&&Zt(U.prototype,w),L&&Zt(U,L),Z}();function he(Z,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Z,L.key,L)}}var ce=function(){function Z(Q){(function(It,Rt){if(!(It instanceof Rt))throw new TypeError("Cannot call a class as a function")})(this,Z),this.distances=Q.distances,this.dimension=Q.dimension||2,this.linkDistance=Q.linkDistance}var U,w,L;return U=Z,(w=[{key:"layout",value:function(){var It=this.dimension,Rt=this.distances,K=this.linkDistance;try{var Dt=vn.mul(vn.pow(Rt,2),-.5),Qt=Dt.mean("row"),qt=Dt.mean("column"),xe=Dt.mean();Dt.add(xe).subRowVector(Qt).subColumnVector(qt);var Ie=new ve(Dt),Ye=vn.sqrt(Ie.diagonalMatrix).diagonal();return Ie.leftSingularVectors.toJSON().map(function(qe){return vn.mul([qe],[Ye]).toJSON()[0].splice(0,It)})}catch(qe){for(var Ne=[],He=0;He<Rt.length;He++){var Je=Math.random()*K,Ge=Math.random()*K;Ne.push([Je,Ge])}return Ne}}}])&&he(U.prototype,w),L&&he(U,L),Z}();function Me(Z,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Z,L.key,L)}}var _e=function(){function Z(Q){(function(It,Rt){if(!(It instanceof Rt))throw new TypeError("Cannot call a class as a function")})(this,Z),this.disp=[],this.positions=Q.positions,this.adjMatrix=Q.adjMatrix,this.focusID=Q.focusID,this.radii=Q.radii,this.iterations=Q.iterations||10,this.height=Q.height||10,this.width=Q.width||10,this.speed=Q.speed||100,this.gravity=Q.gravity||10,this.nodeSizeFunc=Q.nodeSizeFunc,this.k=Q.k||5,this.strictRadial=Q.strictRadial,this.nodes=Q.nodes}var U,w,L;return U=Z,(w=[{key:"layout",value:function(){var It=this.positions,Rt=[],K=this.iterations,Dt=this.width/10;this.maxDisplace=Dt,this.disp=Rt;for(var Qt=0;Qt<K;Qt++)It.forEach(function(qt,xe){Rt[xe]={x:0,y:0}}),this.getRepulsion(),this.updatePositions();return It}},{key:"getRepulsion",value:function(){var It=this,Rt=It.positions,K=It.nodes,Dt=It.disp,Qt=It.k,qt=It.radii||[];Rt.forEach(function(xe,Ie){Dt[Ie]={x:0,y:0},Rt.forEach(function(Ye,Ne){if(Ie!==Ne&&qt[Ie]===qt[Ne]){var He=xe[0]-Ye[0],Je=xe[1]-Ye[1],Ge=Math.sqrt(He*He+Je*Je);if(Ge===0){Ge=1;var qe=Ie>Ne?1:-1;He=.01*qe,Je=.01*qe}if(Ge<It.nodeSizeFunc(K[Ie])/2+It.nodeSizeFunc(K[Ne])/2){var yn=Qt*Qt/Ge;Dt[Ie].x+=He/Ge*yn,Dt[Ie].y+=Je/Ge*yn}}})})}},{key:"updatePositions",value:function(){var It=this.positions,Rt=this.disp,K=this.speed,Dt=this.strictRadial,Qt=this.focusID,qt=this.maxDisplace||this.width/10;Dt&&Rt.forEach(function(Ie,Ye){var Ne=It[Ye][0]-It[Qt][0],He=It[Ye][1]-It[Qt][1],Je=Math.sqrt(Ne*Ne+He*He),Ge=He/Je,qe=-Ne/Je,yn=Math.sqrt(Ie.x*Ie.x+Ie.y*Ie.y),Dn=Math.acos((Ge*Ie.x+qe*Ie.y)/yn);Dn>Math.PI/2&&(Dn-=Math.PI/2,Ge*=-1,qe*=-1);var En=Math.cos(Dn)*yn;Ie.x=Ge*En,Ie.y=qe*En});var xe=this.radii;It.forEach(function(Ie,Ye){if(Ye!==Qt){var Ne=Math.sqrt(Rt[Ye].x*Rt[Ye].x+Rt[Ye].y*Rt[Ye].y);if(Ne>0&&Ye!==Qt){var He=Math.min(qt*(K/800),Ne);if(Ie[0]+=Rt[Ye].x/Ne*He,Ie[1]+=Rt[Ye].y/Ne*He,Dt){var Je=Ie[0]-It[Qt][0],Ge=Ie[1]-It[Qt][1],qe=Math.sqrt(Je*Je+Ge*Ge);Je=Je/qe*xe[Ye],Ge=Ge/qe*xe[Ye],Ie[0]=It[Qt][0]+Je,Ie[1]=It[Qt][1]+Ge}}}})}}])&&Me(U.prototype,w),L&&Me(U,L),Z}();function We(Z){return(We=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Z)}function Re(Z){return function(U){if(Array.isArray(U))return tn(U)}(Z)||function(U){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(U))return Array.from(U)}(Z)||function(U,w){if(!!U){if(typeof U=="string")return tn(U,w);var L=Object.prototype.toString.call(U).slice(8,-1);if(L==="Object"&&U.constructor&&(L=U.constructor.name),L==="Map"||L==="Set")return Array.from(U);if(L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L))return tn(U,w)}}(Z)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function tn(Z,U){(U==null||U>Z.length)&&(U=Z.length);for(var w=0,L=new Array(U);w<U;w++)L[w]=Z[w];return L}function ke(Z,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Z,L.key,L)}}function ln(Z,U){return(ln=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Z,U)}function hn(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=dn(Z);if(U){var Q=dn(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return nn(this,w)}}function nn(Z,U){return!U||We(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Z):U}function dn(Z){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Z)}function Sn(Z,U){return Math.sqrt((Z[0]-U[0])*(Z[0]-U[0])+(Z[1]-U[1])*(Z[1]-U[1]))}var Pe=function(Z){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&ln(Rt,K)})(It,Z);var U,w,L,Q=hn(It);function It(Rt){var K;return function(Dt,Qt){if(!(Dt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=Q.call(this)).maxIteration=1e3,K.focusNode=null,K.unitRadius=null,K.linkDistance=50,K.preventOverlap=!1,K.strictRadial=!0,K.maxPreventOverlapIteration=200,K.sortStrength=10,K.nodes=[],K.edges=[],K.updateCfg(Rt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}},{key:"execute",value:function(){var K=this,Dt=K.nodes,Qt=K.edges||[];if(Dt&&Dt.length!==0){K.width||typeof window=="undefined"||(K.width=window.innerWidth),K.height||typeof window=="undefined"||(K.height=window.innerHeight),K.center||(K.center=[K.width/2,K.height/2]);var qt=K.center;if(Dt.length===1)return Dt[0].x=qt[0],Dt[0].y=qt[1],void(K.onLayoutEnd&&K.onLayoutEnd());var xe=K.linkDistance,Ie=null;if(m(K.focusNode)){for(var Ye=!1,Ne=0;Ne<Dt.length;Ne++)Dt[Ne].id===K.focusNode&&(Ie=Dt[Ne],K.focusNode=Ie,Ye=!0,Ne=Dt.length);Ye||(Ie=null)}else Ie=K.focusNode;Ie||(Ie=Dt[0],K.focusNode=Ie);var He,Je,Ge,qe=(He=Dt,Je=Ie.id,Ge=-1,He.forEach(function(Ii,Gi){Ii.id===Je&&(Ge=Gi)}),Ge);K.focusIndex=qe;var yn=s({nodes:Dt,edges:Qt},!1),Dn=n(yn),En=K.maxToFocus(Dn,qe);K.handleInfinity(Dn,qe,En+1),K.distances=Dn;var Ln=Dn[qe],Zn=K.width||500,Qn=K.height||500,qn=Zn-qt[0]>qt[0]?qt[0]:Zn-qt[0],fr=Qn-qt[1]>qt[1]?qt[1]:Qn-qt[1];qn===0&&(qn=Zn/2),fr===0&&(fr=Qn/2);var br=fr>qn?qn:fr,gr=Math.max.apply(Math,Re(Ln)),hr=[];Ln.forEach(function(Ii,Gi){K.unitRadius||(K.unitRadius=br/gr),hr[Gi]=Ii*K.unitRadius}),K.radii=hr;var Cr=K.eIdealDisMatrix();K.eIdealDistances=Cr;var dr=function(Ii){for(var Gi=Ii.length,Po=Ii[0].length,Fo=[],Ra=0;Ra<Gi;Ra++){for(var pa=[],qa=0;qa<Po;qa++)Ii[Ra][qa]!==0?pa.push(1/(Ii[Ra][qa]*Ii[Ra][qa])):pa.push(0);Fo.push(pa)}return Fo}(Cr);K.weights=dr;var Jr=new ce({linkDistance:xe,distances:Cr}).layout();Jr.forEach(function(Ii){j(Ii[0])&&(Ii[0]=Math.random()*xe),j(Ii[1])&&(Ii[1]=Math.random()*xe)}),K.positions=Jr,Jr.forEach(function(Ii,Gi){Dt[Gi].x=Ii[0]+qt[0],Dt[Gi].y=Ii[1]+qt[1]}),Jr.forEach(function(Ii){Ii[0]-=Jr[qe][0],Ii[1]-=Jr[qe][1]}),K.run();var qr,wi=K.preventOverlap,Tr=K.nodeSize,pi=K.strictRadial;if(wi){var Ei,ji=K.nodeSpacing;Ei=E(ji)?function(){return ji}:T(ji)?ji:function(){return 0},qr=Tr?l(Tr)?function(Ii){return(Tr[0]>Tr[1]?Tr[0]:Tr[1])+Ei(Ii)}:function(Ii){return Tr+Ei(Ii)}:function(Ii){return Ii.size?l(Ii.size)?(Ii.size[0]>Ii.size[1]?Ii.size[0]:Ii.size[1])+Ei(Ii):Ii.size+Ei(Ii):10+Ei(Ii)};var Ao={nodes:Dt,nodeSizeFunc:qr,adjMatrix:yn,positions:Jr,radii:hr,height:Qn,width:Zn,strictRadial:pi,focusID:qe,iterations:K.maxPreventOverlapIteration||200,k:Jr.length/4.5},go=new _e(Ao);Jr=go.layout()}return Jr.forEach(function(Ii,Gi){Dt[Gi].x=Ii[0]+qt[0],Dt[Gi].y=Ii[1]+qt[1]}),K.onLayoutEnd&&K.onLayoutEnd(),{nodes:Dt,edges:Qt}}K.onLayoutEnd&&K.onLayoutEnd()}},{key:"run",value:function(){for(var K=this.maxIteration,Dt=this.positions||[],Qt=this.weights||[],qt=this.eIdealDistances||[],xe=this.radii||[],Ie=0;Ie<=K;Ie++){var Ye=Ie/K;this.oneIteration(Ye,Dt,xe,qt,Qt)}}},{key:"oneIteration",value:function(K,Dt,Qt,qt,xe){var Ie=1-K,Ye=this.focusIndex;Dt.forEach(function(Ne,He){var Je=Sn(Ne,[0,0]),Ge=Je===0?0:1/Je;if(He!==Ye){var qe=0,yn=0,Dn=0;Dt.forEach(function(Ln,Zn){if(He!==Zn){var Qn=Sn(Ne,Ln),qn=Qn===0?0:1/Qn,fr=qt[Zn][He];Dn+=xe[He][Zn],qe+=xe[He][Zn]*(Ln[0]+fr*(Ne[0]-Ln[0])*qn),yn+=xe[He][Zn]*(Ln[1]+fr*(Ne[1]-Ln[1])*qn)}});var En=Qt[He]===0?0:1/Qt[He];Dn*=Ie,Dn+=K*En*En,qe*=Ie,qe+=K*En*Ne[0]*Ge,Ne[0]=qe/Dn,yn*=Ie,yn+=K*En*Ne[1]*Ge,Ne[1]=yn/Dn}})}},{key:"eIdealDisMatrix",value:function(){var K=this,Dt=K.nodes;if(!Dt)return[];var Qt=K.distances,qt=K.linkDistance,xe=K.radii||[],Ie=K.unitRadius||50,Ye=[];return Qt&&Qt.forEach(function(Ne,He){var Je=[];Ne.forEach(function(Ge,qe){if(He===qe)Je.push(0);else if(xe[He]===xe[qe])if(K.sortBy==="data")Je.push(Ge*(Math.abs(He-qe)*K.sortStrength)/(xe[He]/Ie));else if(K.sortBy){var yn=Dt[He][K.sortBy]||0,Dn=Dt[qe][K.sortBy]||0;m(yn)&&(yn=yn.charCodeAt(0)),m(Dn)&&(Dn=Dn.charCodeAt(0)),Je.push(Ge*(Math.abs(yn-Dn)*K.sortStrength)/(xe[He]/Ie))}else Je.push(Ge*qt/(xe[He]/Ie));else{var En=(qt+Ie)/2;Je.push(Ge*En)}}),Ye.push(Je)}),Ye}},{key:"handleInfinity",value:function(K,Dt,Qt){for(var qt=K.length,xe=0;xe<qt;xe++)if(K[Dt][xe]===1/0){K[Dt][xe]=Qt,K[xe][Dt]=Qt;for(var Ie=0;Ie<qt;Ie++)K[xe][Ie]!==1/0&&K[Dt][Ie]===1/0&&(K[Dt][Ie]=Qt+K[xe][Ie],K[Ie][Dt]=Qt+K[xe][Ie])}for(var Ye=0;Ye<qt;Ye++)if(Ye!==Dt){for(var Ne=0;Ne<qt;Ne++)if(K[Ye][Ne]===1/0){var He=Math.abs(K[Dt][Ye]-K[Dt][Ne]);He=He===0?1:He,K[Ye][Ne]=He}}}},{key:"maxToFocus",value:function(K,Dt){for(var Qt=0,qt=0;qt<K[Dt].length;qt++)K[Dt][qt]!==1/0&&(Qt=K[Dt][qt]>Qt?K[Dt][qt]:Qt);return Qt}},{key:"getType",value:function(){return"radial"}}])&&ke(U.prototype,w),L&&ke(U,L),It}(x);function le(Z){return(le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Z)}function Le(Z,U){return(Le=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Z,U)}function Be(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=ze(Z);if(U){var Q=ze(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return en(this,w)}}function en(Z,U){return!U||le(U)!=="object"&&typeof U!="function"?un(Z):U}function un(Z){if(Z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Z}function ze(Z){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Z)}var fn=new Map,mn=function(U,w){if(fn.get(U)&&console.warn("The layout with the name ".concat(U," exists already, it will be overridden")),(Q=w)!==null&&M(Q)==="object"){var L=function(It){(function(Dt,Qt){if(typeof Qt!="function"&&Qt!==null)throw new TypeError("Super expression must either be null or a function");Dt.prototype=Object.create(Qt&&Qt.prototype,{constructor:{value:Dt,writable:!0,configurable:!0}}),Qt&&Le(Dt,Qt)})(K,It);var Rt=Be(K);function K(Dt){var Qt;(function(Ye,Ne){if(!(Ye instanceof Ne))throw new TypeError("Cannot call a class as a function")})(this,K);var qt=un(Qt=Rt.call(this)),xe={},Ie=qt.getDefaultCfg();return Object.assign(xe,Ie,w,Dt),Object.keys(xe).forEach(function(Ye){var Ne=xe[Ye];qt[Ye]=Ne}),Qt}return K}(x);fn.set(U,L)}else fn.set(U,w);var Q},Wn=function(U){return fn.has(U)?fn.get(U):null};function Tn(Z){return(Tn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Z)}function Pn(Z,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Z,L.key,L)}}function lr(Z,U){return(lr=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Z,U)}function Hr(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Mr(Z);if(U){var Q=Mr(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return Gr(this,w)}}function Gr(Z,U){return!U||Tn(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Z):U}function Mr(Z){return(Mr=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Z)}var oi=function(Z){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&lr(Rt,K)})(It,Z);var U,w,L,Q=Hr(It);function It(Rt){var K;return function(Dt,Qt){if(!(Dt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=Q.call(this)).nodeSize=30,K.minNodeSpacing=10,K.preventOverlap=!1,K.equidistant=!1,K.startAngle=1.5*Math.PI,K.clockwise=!0,K.sortBy="degree",K.nodes=[],K.edges=[],K.width=300,K.height=300,K.onLayoutEnd=function(){},K.updateCfg(Rt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}},{key:"execute",value:function(){var K=this,Dt=K.nodes,Qt=K.edges,qt=Dt.length;if(qt!==0){K.width||typeof window=="undefined"||(K.width=window.innerWidth),K.height||typeof window=="undefined"||(K.height=window.innerHeight),K.center||(K.center=[K.width/2,K.height/2]);var xe=K.center;if(qt===1)return Dt[0].x=xe[0],Dt[0].y=xe[1],void(K.onLayoutEnd&&K.onLayoutEnd());var Ie,Ye=[];Ie=l(K.nodeSize)?Math.max(K.nodeSize[0],K.nodeSize[1]):K.nodeSize,Dt.forEach(function(br){Ye.push(br);var gr=Ie;l(br.size)?gr=Math.max(br.size[0],br.size[1]):E(br.size)&&(gr=br.size),Ie=Math.max(Ie,gr)}),K.clockwise=K.counterclockwise!==void 0?!K.counterclockwise:K.clockwise;var Ne={},He={};if(Ye.forEach(function(br,gr){Ne[br.id]=br,He[br.id]=gr}),!(K.sortBy!=="degree"&&m(K.sortBy)&&Ye[0][K.sortBy]!==void 0||(K.sortBy="degree",E(Dt[0].degree)))){var Je=y(Dt.length,He,Qt);Ye.forEach(function(br,gr){br.degree=Je[gr]})}Ye.sort(function(br,gr){return gr[K.sortBy]-br[K.sortBy]}),K.maxValueNode=Ye[0],K.maxLevelDiff=K.maxLevelDiff||K.maxValueNode[K.sortBy]/4;var Ge=[[]],qe=Ge[0];Ye.forEach(function(br){if(qe.length>0){var gr=Math.abs(qe[0][K.sortBy]-br[K.sortBy]);K.maxLevelDiff&&gr>=K.maxLevelDiff&&(qe=[],Ge.push(qe))}qe.push(br)});var yn=Ie+K.minNodeSpacing;if(!K.preventOverlap){var Dn=Ge.length>0&&Ge[0].length>1,En=(Math.min(K.width,K.height)/2-yn)/(Ge.length+(Dn?1:0));yn=Math.min(yn,En)}var Ln=0;if(Ge.forEach(function(br){var gr=K.sweep;gr===void 0&&(gr=2*Math.PI-2*Math.PI/br.length);var hr=br.dTheta=gr/Math.max(1,br.length-1);if(br.length>1&&K.preventOverlap){var Cr=Math.cos(hr)-Math.cos(0),dr=Math.sin(hr)-Math.sin(0),Jr=Math.sqrt(yn*yn/(Cr*Cr+dr*dr));Ln=Math.max(Jr,Ln)}br.r=Ln,Ln+=yn}),K.equidistant){for(var Zn=0,Qn=0,qn=0;qn<Ge.length;qn++){var fr=Ge[qn].r-Qn;Zn=Math.max(Zn,fr)}Qn=0,Ge.forEach(function(br,gr){gr===0&&(Qn=br.r),br.r=Qn,Qn+=Zn})}return Ge.forEach(function(br){var gr=br.dTheta,hr=br.r;br.forEach(function(Cr,dr){var Jr=K.startAngle+(K.clockwise?1:-1)*gr*dr;Cr.x=xe[0]+hr*Math.cos(Jr),Cr.y=xe[1]+hr*Math.sin(Jr)})}),K.onLayoutEnd&&K.onLayoutEnd(),{nodes:Dt,edges:Qt}}K.onLayoutEnd&&K.onLayoutEnd()}},{key:"getType",value:function(){return"concentric"}}])&&Pn(U.prototype,w),L&&Pn(U,L),It}(x);function ai(Z){return(ai=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Z)}function Zr(Z,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Z,L.key,L)}}function Yi(Z,U){return(Yi=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Z,U)}function $i(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Uo(Z);if(U){var Q=Uo(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return Go(this,w)}}function Go(Z,U){return!U||ai(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Z):U}function Uo(Z){return(Uo=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Z)}var zo=function(Z){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&Yi(Rt,K)})(It,Z);var U,w,L,Q=$i(It);function It(Rt){var K;return function(Dt,Qt){if(!(Dt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=Q.call(this)).center=[0,0],K.linkDistance=50,K.nodes=[],K.edges=[],K.onLayoutEnd=function(){},K.updateCfg(Rt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{center:[0,0],linkDistance:50}}},{key:"execute",value:function(){var K=this.nodes,Dt=this.edges,Qt=Dt===void 0?[]:Dt,qt=this.center;if(K&&K.length!==0){if(K.length===1)return K[0].x=qt[0],K[0].y=qt[1],void(this.onLayoutEnd&&this.onLayoutEnd());var xe=this.linkDistance,Ie=s({nodes:K,edges:Qt},!1),Ye=n(Ie);this.handleInfinity(Ye);var Ne,He,Je=(Ne=xe,He=[],Ye.forEach(function(qe){var yn=[];qe.forEach(function(Dn){yn.push(Dn*Ne)}),He.push(yn)}),He);this.scaledDistances=Je;var Ge=this.runMDS();return this.positions=Ge,Ge.forEach(function(qe,yn){K[yn].x=qe[0]+qt[0],K[yn].y=qe[1]+qt[1]}),this.onLayoutEnd&&this.onLayoutEnd(),{nodes:K,edges:Qt}}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"runMDS",value:function(){var K=this.scaledDistances,Dt=vn.mul(vn.pow(K,2),-.5),Qt=Dt.mean("row"),qt=Dt.mean("column"),xe=Dt.mean();Dt.add(xe).subRowVector(Qt).subColumnVector(qt);var Ie=new ve(Dt),Ye=vn.sqrt(Ie.diagonalMatrix).diagonal();return Ie.leftSingularVectors.toJSON().map(function(Ne){return vn.mul([Ne],[Ye]).toJSON()[0].splice(0,2)})}},{key:"handleInfinity",value:function(K){var Dt=-999999;K.forEach(function(Qt){Qt.forEach(function(qt){qt!==1/0&&Dt<qt&&(Dt=qt)})}),K.forEach(function(Qt,qt){Qt.forEach(function(xe,Ie){xe===1/0&&(K[qt][Ie]=Dt)})})}},{key:"getType",value:function(){return"mds"}}])&&Zr(U.prototype,w),L&&Zr(U,L),It}(x);function ta(Z){return(ta=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Z)}function li(Z,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Z,L.key,L)}}function Oo(Z,U){return(Oo=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Z,U)}function qi(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Xo(Z);if(U){var Q=Xo(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return _o(this,w)}}function _o(Z,U){return!U||ta(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Z):U}function Xo(Z){return(Xo=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Z)}var Yo=function(Z){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&Oo(Rt,K)})(It,Z);var U,w,L,Q=qi(It);function It(Rt){var K;return function(Dt,Qt){if(!(Dt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=Q.call(this)).maxIteration=1e3,K.gravity=10,K.speed=1,K.clustering=!1,K.clusterGravity=10,K.nodes=[],K.edges=[],K.width=300,K.height=300,K.nodeMap={},K.nodeIdxMap={},K.onLayoutEnd=function(){},K.updateCfg(Rt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){var K=this,Dt=this.nodes;if(Dt&&Dt.length!==0){this.width||typeof window=="undefined"||(this.width=window.innerWidth),this.height||typeof window=="undefined"||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var Qt=this.center;if(Dt.length===1)return Dt[0].x=Qt[0],Dt[0].y=Qt[1],void(this.onLayoutEnd&&this.onLayoutEnd());var qt={},xe={};return Dt.forEach(function(Ie,Ye){E(Ie.x)||(Ie.x=Math.random()*K.width),E(Ie.y)||(Ie.y=Math.random()*K.height),qt[Ie.id]=Ie,xe[Ie.id]=Ye}),this.nodeMap=qt,this.nodeIdxMap=xe,this.run()}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"run",value:function(){var K=this,Dt=K.nodes,Qt=K.edges,qt=K.maxIteration,xe=K.center,Ie=K.height*K.width,Ye=Math.sqrt(Ie)/10,Ne=Ie/(Dt.length+1),He=Math.sqrt(Ne),Je=K.gravity,Ge=K.speed,qe=K.clustering,yn={};if(qe)for(var Dn in Dt.forEach(function(Zn){if(yn[Zn.cluster]===void 0){var Qn={name:Zn.cluster,cx:0,cy:0,count:0};yn[Zn.cluster]=Qn}var qn=yn[Zn.cluster];E(Zn.x)&&(qn.cx+=Zn.x),E(Zn.y)&&(qn.cy+=Zn.y),qn.count++}),yn)yn[Dn].cx/=yn[Dn].count,yn[Dn].cy/=yn[Dn].count;for(var En=function(Qn){var qn=[];if(Dt.forEach(function(hr,Cr){qn[Cr]={x:0,y:0}}),K.applyCalculate(Dt,Qt,qn,He,Ne),qe){var fr=K.clusterGravity||Je;for(var br in Dt.forEach(function(hr,Cr){if(E(hr.x)&&E(hr.y)){var dr=yn[hr.cluster],Jr=Math.sqrt((hr.x-dr.cx)*(hr.x-dr.cx)+(hr.y-dr.cy)*(hr.y-dr.cy)),qr=He*fr;qn[Cr].x-=qr*(hr.x-dr.cx)/Jr,qn[Cr].y-=qr*(hr.y-dr.cy)/Jr}}),yn)yn[br].cx=0,yn[br].cy=0,yn[br].count=0;for(var gr in Dt.forEach(function(hr){var Cr=yn[hr.cluster];E(hr.x)&&(Cr.cx+=hr.x),E(hr.y)&&(Cr.cy+=hr.y),Cr.count++}),yn)yn[gr].cx/=yn[gr].count,yn[gr].cy/=yn[gr].count}Dt.forEach(function(hr,Cr){if(E(hr.x)&&E(hr.y)){var dr=.01*He*Je;qn[Cr].x-=dr*(hr.x-xe[0]),qn[Cr].y-=dr*(hr.y-xe[1])}}),Dt.forEach(function(hr,Cr){if(E(hr.x)&&E(hr.y)){var dr=Math.sqrt(qn[Cr].x*qn[Cr].x+qn[Cr].y*qn[Cr].y);if(dr>0){var Jr=Math.min(Ye*(Ge/800),dr);hr.x+=qn[Cr].x/dr*Jr,hr.y+=qn[Cr].y/dr*Jr}}})},Ln=0;Ln<qt;Ln++)En();return K.onLayoutEnd&&K.onLayoutEnd(),{nodes:Dt,edges:Qt}}},{key:"applyCalculate",value:function(K,Dt,Qt,qt,xe){this.calRepulsive(K,Qt,xe),this.calAttractive(Dt,Qt,qt)}},{key:"calRepulsive",value:function(K,Dt,Qt){K.forEach(function(qt,xe){Dt[xe]={x:0,y:0},K.forEach(function(Ie,Ye){if(xe!==Ye&&E(qt.x)&&E(Ie.x)&&E(qt.y)&&E(Ie.y)){var Ne=qt.x-Ie.x,He=qt.y-Ie.y,Je=Ne*Ne+He*He;if(Je===0){Je=1;var Ge=xe>Ye?1:-1;Ne=.01*Ge,He=.01*Ge}var qe=Qt/Je;Dt[xe].x+=Ne*qe,Dt[xe].y+=He*qe}})})}},{key:"calAttractive",value:function(K,Dt,Qt){var qt=this;K.forEach(function(xe){if(xe.source&&xe.target){var Ie=qt.nodeIdxMap[xe.source],Ye=qt.nodeIdxMap[xe.target];if(Ie!==Ye){var Ne=qt.nodeMap[xe.source],He=qt.nodeMap[xe.target];if(E(He.x)&&E(Ne.x)&&E(He.y)&&E(Ne.y)){var Je=He.x-Ne.x,Ge=He.y-Ne.y,qe=Math.sqrt(Je*Je+Ge*Ge),yn=qe*qe/Qt;Dt[Ye].x-=Je/qe*yn,Dt[Ye].y-=Ge/qe*yn,Dt[Ie].x+=Je/qe*yn,Dt[Ie].y+=Ge/qe*yn}}}})}},{key:"getType",value:function(){return"fruchterman"}}])&&li(U.prototype,w),L&&li(U,L),It}(x),ua=e(12),di=e.n(ua),ea=e(6),xi=e.n(ea),ks=e(8),Ri=e.n(ks),Rs=e(13),Mi=e.n(Rs),hu=(e(30),e(217),e(9)),ui=e.n(hu),du=e(15),eo=e.n(du),vu=1;function na(){return vu++}var ra=function Z(U){xi()(this,Z)},ia=function(){function Z(w){xi()(this,Z),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=w}var U;return Ri()(Z,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(L){return this.lookup[L]>-1}},{key:"create",value:function(L,Q){this.lookup[L]=this.components.length;var It=new this.clazz(Q||{});return this.components.push(It),this.entities.push(L),It}},{key:"remove",value:function(L){var Q=this.lookup[L];Q>-1&&Q<this.components.length-1&&(this.components[Q]=this.components[this.components.length-1],this.entities[Q]=this.entities[this.entities.length-1],this.lookup[this.entities[Q]]=Q),this.components.pop(),this.entities.pop(),delete this.lookup[L]}},{key:"removeKeepSorted",value:function(L){var Q=this.lookup[L];if(Q>-1){var It=this.entities[Q];if(Q<this.components.length-1){for(var Rt=Q+1;Rt<this.components.length;++Rt)this.components[Rt-1]=this.components[Rt];for(var K=Q+1;K<this.entities.length;++K)this.entities[K-1]=this.entities[K],this.lookup[this.entities[K-1]]=K-1}this.components.pop(),this.entities.pop(),delete this.lookup[It]}}},{key:"moveItem",value:function(L,Q){if(L!==Q){for(var It=this.components[L],Rt=this.entities[L],K=L<Q?1:-1,Dt=L;Dt!==Q;Dt+=K){var Qt=Dt+K;this.components[Dt]=this.components[Qt],this.entities[Dt]=this.entities[Qt],this.lookup[this.entities[Dt]]=Dt}this.components[Q]=It,this.entities[Q]=Rt,this.lookup[Rt]=Q}}},{key:"getEntity",value:function(L){return this.entities[L]}},{key:"getComponent",value:function(L){return this.components[L]}},{key:"getComponentByEntity",value:function(L){var Q=this.lookup[L];return Q>-1?this.components[Q]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(L){for(var Q=0,It=Object.keys(this.lookup);Q<It.length;Q++){var Rt=It[Q],K=Number(Rt);if(this.lookup[K]===L)return K}return-1}},{key:"find",value:function(L){for(var Q=0;Q<this.getCount();Q++){var It=this.getComponent(Q);if(L(It,Q))return It}return null}},{key:"findIndex",value:function(L){for(var Q=0;Q<this.getCount();Q++)if(L(this.getComponent(Q),Q))return Q;return-1}},{key:"forEach",value:function(L){for(var Q=0,It=Object.keys(this.lookup);Q<It.length;Q++){var Rt=It[Q],K=Number(Rt),Dt=this.lookup[K];L(K,this.getComponent(Dt))}}},{key:"forEachAsync",value:(U=eo()(ui.a.mark(function w(L){var Q,It,Rt,K,Dt;return ui.a.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:Q=0,It=Object.keys(this.lookup);case 1:if(!(Q<It.length)){Qt.next=10;break}return Rt=It[Q],K=Number(Rt),Dt=this.lookup[K],Qt.next=7,L(K,this.getComponent(Dt));case 7:Q++,Qt.next=1;break;case 10:case"end":return Qt.stop()}},w,this)})),function(w){return U.apply(this,arguments)})},{key:"map",value:function(L){for(var Q=[],It=0,Rt=Object.keys(this.lookup);It<Rt.length;It++){var K=Rt[It],Dt=Number(K),Qt=this.lookup[Dt];Q.push(L(Dt,this.getComponent(Qt)))}return Q}}]),Z}(),tc=e(60),ya=e.n(tc),Ur=e(4),yr={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")},Yc=function Z(){xi()(this,Z),this.index=void 0},pu=function Z(){xi()(this,Z),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},ds=function(){function Z(){xi()(this,Z),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return Ri()(Z,[{key:"read",value:function(w){return this.reads.find(function(L){return L.index===w.index})||this.reads.push(w),w}},{key:"sample",value:function(w){return this.read(w),w}},{key:"write",value:function(w,L){if(this.writes.find(function(Rt){return Rt.index===L.index}))return L;var Q=w.getResourceNode(L);Q.resource.version++,Q.resource.imported&&(this.hasSideEffect=!0);var It=w.createResourceNode(Q.resource);return w.getResourceNode(It).writer=this,this.writes.push(It),It}}]),Z}(),ec=e(27),Qo=e.n(ec),nc=e(28),Vo=e.n(nc),Aa=e(21),To=e.n(Aa);function vs(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=To()(Z);if(U){var Q=To()(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return Vo()(this,w)}}var Ns,ts,Ls,Ho,es,Bs=function(Z){Qo()(w,Z);var U=vs(w);function w(){var L;xi()(this,w);for(var Q=arguments.length,It=new Array(Q),Rt=0;Rt<Q;Rt++)It[Rt]=arguments[Rt];return(L=U.call.apply(U,[this].concat(It))).version=0,L.refs=0,L.name=void 0,L.imported=void 0,L.priority=void 0,L.discardStart=!0,L.discardEnd=!1,L.descriptor=void 0,L.resource=void 0,L}return Ri()(w,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){this.imported}}]),w}(function Z(){xi()(this,Z),this.first=void 0,this.last=void 0}),gu=function Z(){xi()(this,Z),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0};function Do(Z,U){var w;if(typeof Symbol=="undefined"||Z[Symbol.iterator]==null){if(Array.isArray(Z)||(w=function(Dt,Qt){if(!!Dt){if(typeof Dt=="string")return ps(Dt,Qt);var qt=Object.prototype.toString.call(Dt).slice(8,-1);if(qt==="Object"&&Dt.constructor&&(qt=Dt.constructor.name),qt==="Map"||qt==="Set")return Array.from(Dt);if(qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qt))return ps(Dt,Qt)}}(Z))||U&&Z&&typeof Z.length=="number"){w&&(Z=w);var L=0,Q=function(){};return{s:Q,n:function(){return L>=Z.length?{done:!0}:{done:!1,value:Z[L++]}},e:function(Qt){throw Qt},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var It,Rt=!0,K=!1;return{s:function(){w=Z[Symbol.iterator]()},n:function(){var Qt=w.next();return Rt=Qt.done,Qt},e:function(Qt){K=!0,It=Qt},f:function(){try{Rt||w.return==null||w.return()}finally{if(K)throw It}}}}function ps(Z,U){(U==null||U>Z.length)&&(U=Z.length);for(var w=0,L=new Array(U);w<U;w++)L[w]=Z[w];return L}var yu=(Ns=Object(Ur.injectable)(),ts=Object(Ur.inject)(yr.RenderEngine),Ns((Ho=function(){function Z(){xi()(this,Z),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],di()(this,"engine",es,this)}var U,w;return Ri()(Z,[{key:"execute",value:(w=eo()(ui.a.mark(function L(Q){return ui.a.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:return this.compile(),It.next=3,this.executePassNodes(Q);case 3:case"end":return It.stop()}},L,this)})),function(L){return w.apply(this,arguments)})},{key:"tearDown",value:function(){this.frameGraphPasses.forEach(function(Q){Q.tearDown&&Q.tearDown()}),this.reset()}},{key:"addPass",value:function(Q,It,Rt,K){var Dt=new pu;Dt.execute=Rt,K&&(Dt.tearDown=K),Dt.name=Q;var Qt=new ds;return Qt.name=Q,this.passNodes.push(Qt),this.frameGraphPasses.push(Dt),It(this,Qt,Dt),Dt}},{key:"getPass",value:function(Q){return this.frameGraphPasses.find(function(It){return It.name===Q})}},{key:"compile",value:function(){var Q,It=this,Rt=Do(this.passNodes);try{for(Rt.s();!(Q=Rt.n()).done;){var K=Q.value;K.refCount=K.writes.length+(K.hasSideEffect?1:0),K.reads.forEach(function(Tr){It.resourceNodes[Tr.index].readerCount++})}}catch(Tr){Rt.e(Tr)}finally{Rt.f()}var Dt,Qt=[],qt=Do(this.resourceNodes);try{for(qt.s();!(Dt=qt.n()).done;){var xe=Dt.value;xe.readerCount===0&&Qt.push(xe)}}catch(Tr){qt.e(Tr)}finally{qt.f()}for(;Qt.length;){var Ie=Qt.pop(),Ye=Ie&&Ie.writer;if(Ye&&--Ye.refCount==0){var Ne,He=Do(Ye.reads);try{for(He.s();!(Ne=He.n()).done;){var Je=Ne.value,Ge=this.resourceNodes[Je.index];--Ge.readerCount==0&&Qt.push(Ge)}}catch(Tr){He.e(Tr)}finally{He.f()}}}this.resourceNodes.forEach(function(Tr){Tr.resource.refs+=Tr.readerCount});var qe,yn=Do(this.passNodes);try{for(yn.s();!(qe=yn.n()).done;){var Dn=qe.value;if(Dn.refCount){var En,Ln=Do(Dn.reads);try{for(Ln.s();!(En=Ln.n()).done;){var Zn=En.value,Qn=this.resourceNodes[Zn.index].resource;Qn.first=Qn.first?Qn.first:Dn,Qn.last=Dn}}catch(Tr){Ln.e(Tr)}finally{Ln.f()}var qn,fr=Do(Dn.writes);try{for(fr.s();!(qn=fr.n()).done;){var br=qn.value,gr=this.resourceNodes[br.index].resource;gr.first=gr.first?gr.first:Dn,gr.last=Dn}}catch(Tr){fr.e(Tr)}finally{fr.f()}}}}catch(Tr){yn.e(Tr)}finally{yn.f()}for(var hr=0;hr<2;hr++){var Cr,dr=Do(this.resourceNodes);try{for(dr.s();!(Cr=dr.n()).done;){var Jr=Cr.value.resource;if(Jr.priority===hr&&Jr.refs){var qr=Jr.first,wi=Jr.last;qr&&wi&&(qr.devirtualize.push(Jr),wi.destroy.push(Jr))}}}catch(Tr){dr.e(Tr)}finally{dr.f()}}}},{key:"executePassNodes",value:(U=eo()(ui.a.mark(function L(Q){var It,Rt,K,Dt,Qt,qt,xe,Ie,Ye,Ne,He,Je,Ge;return ui.a.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:It=Do(this.passNodes.entries()),qe.prev=1,It.s();case 3:if((Rt=It.n()).done){qe.next=18;break}if(K=ya()(Rt.value,2),Dt=K[0],!(Qt=K[1]).refCount){qe.next=16;break}qt=Do(Qt.devirtualize);try{for(qt.s();!(xe=qt.n()).done;)xe.value.preExecuteDevirtualize(this.engine)}catch(yn){qt.e(yn)}finally{qt.f()}Ie=Do(Qt.destroy);try{for(Ie.s();!(Ye=Ie.n()).done;)Ye.value.preExecuteDestroy(this.engine)}catch(yn){Ie.e(yn)}finally{Ie.f()}return qe.next=12,this.frameGraphPasses[Dt].execute(this,this.frameGraphPasses[Dt],Q);case 12:Ne=Do(Qt.devirtualize);try{for(Ne.s();!(He=Ne.n()).done;)He.value.postExecuteDevirtualize(this.engine)}catch(yn){Ne.e(yn)}finally{Ne.f()}Je=Do(Qt.destroy);try{for(Je.s();!(Ge=Je.n()).done;)Ge.value.postExecuteDestroy(this.engine)}catch(yn){Je.e(yn)}finally{Je.f()}case 16:qe.next=3;break;case 18:qe.next=23;break;case 20:qe.prev=20,qe.t0=qe.catch(1),It.e(qe.t0);case 23:return qe.prev=23,It.f(),qe.finish(23);case 26:this.reset();case 27:case"end":return qe.stop()}},L,this,[[1,20,23,26]])})),function(L){return U.apply(this,arguments)})},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(Q){return this.resourceNodes[Q.index]}},{key:"createResourceNode",value:function(Q){var It=new gu;It.resource=Q,It.version=Q.version,this.resourceNodes.push(It);var Rt=new Yc;return Rt.index=this.resourceNodes.length-1,Rt}},{key:"createTexture",value:function(Q,It,Rt){var K=new Bs;return K.name=It,K.descriptor=Rt,this.createResourceNode(K)}},{key:"createRenderTarget",value:function(Q,It,Rt){var K=new Bs;return K.name=It,K.descriptor=Rt,this.createResourceNode(K)}},{key:"present",value:function(Q){this.addPass("Present",function(It,Rt){Rt.read(Q),Rt.hasSideEffect=!0},eo()(ui.a.mark(function It(){return ui.a.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:case"end":return Rt.stop()}},It)})))}}]),Z}(),es=Mi()(Ho.prototype,"engine",[ts],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ls=Ho))||Ls),Fs=e(3),mr=e.n(Fs),Gs=e(25),Eo=e.n(Gs);function ma(Z,U){var w=Object.keys(Z);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Z);U&&(L=L.filter(function(Q){return Object.getOwnPropertyDescriptor(Z,Q).enumerable})),w.push.apply(w,L)}return w}function mu(Z){for(var U=1;U<arguments.length;U++){var w=arguments[U]!=null?arguments[U]:{};U%2?ma(Object(w),!0).forEach(function(L){mr()(Z,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(w)):ma(Object(w)).forEach(function(L){Object.defineProperty(Z,L,Object.getOwnPropertyDescriptor(w,L))})}return Z}function bu(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=To()(Z);if(U){var Q=To()(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return Vo()(this,w)}}var Jn,fe,Ca,Us,ns,ba,ca,gs,Fa,ys=function(Z){Qo()(w,Z);var U=bu(w);function w(L){var Q;return xi()(this,w),(Q=U.call(this,L)).dirty=!0,Q.attributes=[],Q.indices=void 0,Q.indicesBuffer=void 0,Q.vertexCount=void 0,Q.maxInstancedCount=void 0,Q.aabb=void 0,Object.assign(Eo()(Q),L),Q}return Ri()(w,[{key:"setAttribute",value:function(Q,It,Rt,K){var Dt=this.attributes.find(function(Qt){return Qt.name===Q});return Dt?(Dt.data=It,Dt.dirty=!0):this.attributes.push(mu(mu({dirty:!0,name:Q,data:It},Rt),{},{bufferGetter:K})),this.dirty=!0,this}},{key:"setIndex",value:function(Q){return this.indices=new Uint32Array(Q.buffer?Q.buffer:Q),this.dirty=!0,this}}]),w}(ra),jn=(e(226),e(2)),zs=function(){function Z(U,w){xi()(this,Z),this.center=void 0,this.halfExtents=void 0,this.min=jn.e.create(),this.max=jn.e.create(),this.update(U,w)}return Ri()(Z,[{key:"update",value:function(w,L){this.center=w||jn.e.create(),this.halfExtents=L||jn.e.fromValues(.5,.5,.5),this.min=jn.e.sub(this.min,this.center,this.halfExtents),this.max=jn.e.add(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(w,L){jn.e.add(this.center,L,w),jn.e.scale(this.center,this.center,.5),jn.e.sub(this.halfExtents,L,w),jn.e.scale(this.halfExtents,this.halfExtents,.5),jn.e.copy(this.min,w),jn.e.copy(this.max,L)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(w){var L=this.center,Q=L[0],It=L[1],Rt=L[2],K=this.halfExtents,Dt=K[0],Qt=K[1],qt=K[2],xe=Q-Dt,Ie=Q+Dt,Ye=It-Qt,Ne=It+Qt,He=Rt-qt,Je=Rt+qt,Ge=w.center,qe=Ge[0],yn=Ge[1],Dn=Ge[2],En=w.halfExtents,Ln=En[0],Zn=En[1],Qn=En[2],qn=qe-Ln,fr=qe+Ln,br=yn-Zn,gr=yn+Zn,hr=Dn-Qn,Cr=Dn+Qn;qn<xe&&(xe=qn),fr>Ie&&(Ie=fr),br<Ye&&(Ye=br),gr>Ne&&(Ne=gr),hr<He&&(He=hr),Cr>Je&&(Je=Cr),L[0]=.5*(xe+Ie),L[1]=.5*(Ye+Ne),L[2]=.5*(He+Je),K[0]=.5*(Ie-xe),K[1]=.5*(Ne-Ye),K[2]=.5*(Je-He),this.min[0]=xe,this.min[1]=Ye,this.min[2]=He,this.max[0]=Ie,this.max[1]=Ne,this.max[2]=Je}},{key:"intersects",value:function(w){var L=this.getMax(),Q=this.getMin(),It=w.getMax(),Rt=w.getMin();return Q[0]<=It[0]&&L[0]>=Rt[0]&&Q[1]<=It[1]&&L[1]>=Rt[1]&&Q[2]<=It[2]&&L[2]>=Rt[2]}},{key:"containsPoint",value:function(w){var L=this.getMin(),Q=this.getMax();return!(w[0]<L[0]||w[0]>Q[0]||w[1]<L[1]||w[1]>Q[1]||w[2]<L[2]||w[2]>Q[2])}},{key:"getNegativeFarPoint",value:function(w){return w.pnVertexFlag===273?jn.e.copy(jn.e.create(),this.min):w.pnVertexFlag===272?jn.e.fromValues(this.min[0],this.min[1],this.max[2]):w.pnVertexFlag===257?jn.e.fromValues(this.min[0],this.max[1],this.min[2]):w.pnVertexFlag===256?jn.e.fromValues(this.min[0],this.max[1],this.max[2]):w.pnVertexFlag===17?jn.e.fromValues(this.max[0],this.min[1],this.min[2]):w.pnVertexFlag===16?jn.e.fromValues(this.max[0],this.min[1],this.max[2]):w.pnVertexFlag===1?jn.e.fromValues(this.max[0],this.max[1],this.min[2]):jn.e.fromValues(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(w){return w.pnVertexFlag===273?jn.e.copy(jn.e.create(),this.max):w.pnVertexFlag===272?jn.e.fromValues(this.max[0],this.max[1],this.min[2]):w.pnVertexFlag===257?jn.e.fromValues(this.max[0],this.min[1],this.max[2]):w.pnVertexFlag===256?jn.e.fromValues(this.max[0],this.min[1],this.min[2]):w.pnVertexFlag===17?jn.e.fromValues(this.min[0],this.max[1],this.max[2]):w.pnVertexFlag===16?jn.e.fromValues(this.min[0],this.max[1],this.min[2]):w.pnVertexFlag===1?jn.e.fromValues(this.min[0],this.min[1],this.max[2]):jn.e.fromValues(this.min[0],this.min[1],this.min[2])}}]),Z}();function Wo(Z){for(var U=new zs,w=jn.e.fromValues(Z[0],Z[1],Z[2]),L=jn.e.fromValues(Z[0],Z[1],Z[2]),Q=3;Q<Z.length;){var It=Z[Q++],Rt=Z[Q++],K=Z[Q++];It<w[0]&&(w[0]=It),Rt<w[1]&&(w[1]=Rt),K<w[2]&&(w[2]=K),It>L[0]&&(L[0]=It),Rt>L[1]&&(L[1]=Rt),K>L[2]&&(L[2]=K)}return U.setMinMax(w,L),U}(fe=Jn||(Jn={}))[fe.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",fe[fe.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",fe[fe.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",fe[fe.POINTS=0]="POINTS",fe[fe.LINES=1]="LINES",fe[fe.LINE_LOOP=2]="LINE_LOOP",fe[fe.LINE_STRIP=3]="LINE_STRIP",fe[fe.TRIANGLES=4]="TRIANGLES",fe[fe.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",fe[fe.TRIANGLE_FAN=6]="TRIANGLE_FAN",fe[fe.ZERO=0]="ZERO",fe[fe.ONE=1]="ONE",fe[fe.SRC_COLOR=768]="SRC_COLOR",fe[fe.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",fe[fe.SRC_ALPHA=770]="SRC_ALPHA",fe[fe.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",fe[fe.DST_ALPHA=772]="DST_ALPHA",fe[fe.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",fe[fe.DST_COLOR=774]="DST_COLOR",fe[fe.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",fe[fe.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",fe[fe.FUNC_ADD=32774]="FUNC_ADD",fe[fe.BLEND_EQUATION=32777]="BLEND_EQUATION",fe[fe.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",fe[fe.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",fe[fe.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",fe[fe.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",fe[fe.MAX_EXT=32776]="MAX_EXT",fe[fe.MIN_EXT=32775]="MIN_EXT",fe[fe.BLEND_DST_RGB=32968]="BLEND_DST_RGB",fe[fe.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",fe[fe.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",fe[fe.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",fe[fe.CONSTANT_COLOR=32769]="CONSTANT_COLOR",fe[fe.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",fe[fe.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",fe[fe.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",fe[fe.BLEND_COLOR=32773]="BLEND_COLOR",fe[fe.ARRAY_BUFFER=34962]="ARRAY_BUFFER",fe[fe.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",fe[fe.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",fe[fe.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",fe[fe.STREAM_DRAW=35040]="STREAM_DRAW",fe[fe.STATIC_DRAW=35044]="STATIC_DRAW",fe[fe.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",fe[fe.BUFFER_SIZE=34660]="BUFFER_SIZE",fe[fe.BUFFER_USAGE=34661]="BUFFER_USAGE",fe[fe.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",fe[fe.FRONT=1028]="FRONT",fe[fe.BACK=1029]="BACK",fe[fe.FRONT_AND_BACK=1032]="FRONT_AND_BACK",fe[fe.CULL_FACE=2884]="CULL_FACE",fe[fe.BLEND=3042]="BLEND",fe[fe.DITHER=3024]="DITHER",fe[fe.STENCIL_TEST=2960]="STENCIL_TEST",fe[fe.DEPTH_TEST=2929]="DEPTH_TEST",fe[fe.SCISSOR_TEST=3089]="SCISSOR_TEST",fe[fe.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",fe[fe.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",fe[fe.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",fe[fe.NO_ERROR=0]="NO_ERROR",fe[fe.INVALID_ENUM=1280]="INVALID_ENUM",fe[fe.INVALID_VALUE=1281]="INVALID_VALUE",fe[fe.INVALID_OPERATION=1282]="INVALID_OPERATION",fe[fe.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",fe[fe.CW=2304]="CW",fe[fe.CCW=2305]="CCW",fe[fe.LINE_WIDTH=2849]="LINE_WIDTH",fe[fe.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",fe[fe.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",fe[fe.CULL_FACE_MODE=2885]="CULL_FACE_MODE",fe[fe.FRONT_FACE=2886]="FRONT_FACE",fe[fe.DEPTH_RANGE=2928]="DEPTH_RANGE",fe[fe.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",fe[fe.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",fe[fe.DEPTH_FUNC=2932]="DEPTH_FUNC",fe[fe.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",fe[fe.STENCIL_FUNC=2962]="STENCIL_FUNC",fe[fe.STENCIL_FAIL=2964]="STENCIL_FAIL",fe[fe.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",fe[fe.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",fe[fe.STENCIL_REF=2967]="STENCIL_REF",fe[fe.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",fe[fe.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",fe[fe.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",fe[fe.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",fe[fe.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",fe[fe.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",fe[fe.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",fe[fe.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",fe[fe.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",fe[fe.VIEWPORT=2978]="VIEWPORT",fe[fe.SCISSOR_BOX=3088]="SCISSOR_BOX",fe[fe.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",fe[fe.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",fe[fe.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",fe[fe.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",fe[fe.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",fe[fe.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",fe[fe.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",fe[fe.RED_BITS=3410]="RED_BITS",fe[fe.GREEN_BITS=3411]="GREEN_BITS",fe[fe.BLUE_BITS=3412]="BLUE_BITS",fe[fe.ALPHA_BITS=3413]="ALPHA_BITS",fe[fe.DEPTH_BITS=3414]="DEPTH_BITS",fe[fe.STENCIL_BITS=3415]="STENCIL_BITS",fe[fe.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",fe[fe.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",fe[fe.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",fe[fe.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",fe[fe.SAMPLES=32937]="SAMPLES",fe[fe.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",fe[fe.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",fe[fe.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",fe[fe.DONT_CARE=4352]="DONT_CARE",fe[fe.FASTEST=4353]="FASTEST",fe[fe.NICEST=4354]="NICEST",fe[fe.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",fe[fe.BYTE=5120]="BYTE",fe[fe.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",fe[fe.SHORT=5122]="SHORT",fe[fe.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",fe[fe.INT=5124]="INT",fe[fe.UNSIGNED_INT=5125]="UNSIGNED_INT",fe[fe.FLOAT=5126]="FLOAT",fe[fe.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",fe[fe.ALPHA=6406]="ALPHA",fe[fe.RGB=6407]="RGB",fe[fe.RGBA=6408]="RGBA",fe[fe.LUMINANCE=6409]="LUMINANCE",fe[fe.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",fe[fe.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",fe[fe.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",fe[fe.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",fe[fe.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",fe[fe.VERTEX_SHADER=35633]="VERTEX_SHADER",fe[fe.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",fe[fe.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",fe[fe.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",fe[fe.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",fe[fe.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",fe[fe.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",fe[fe.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",fe[fe.SHADER_TYPE=35663]="SHADER_TYPE",fe[fe.DELETE_STATUS=35712]="DELETE_STATUS",fe[fe.LINK_STATUS=35714]="LINK_STATUS",fe[fe.VALIDATE_STATUS=35715]="VALIDATE_STATUS",fe[fe.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",fe[fe.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",fe[fe.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",fe[fe.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",fe[fe.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",fe[fe.NEVER=512]="NEVER",fe[fe.LESS=513]="LESS",fe[fe.EQUAL=514]="EQUAL",fe[fe.LEQUAL=515]="LEQUAL",fe[fe.GREATER=516]="GREATER",fe[fe.NOTEQUAL=517]="NOTEQUAL",fe[fe.GEQUAL=518]="GEQUAL",fe[fe.ALWAYS=519]="ALWAYS",fe[fe.KEEP=7680]="KEEP",fe[fe.REPLACE=7681]="REPLACE",fe[fe.INCR=7682]="INCR",fe[fe.DECR=7683]="DECR",fe[fe.INVERT=5386]="INVERT",fe[fe.INCR_WRAP=34055]="INCR_WRAP",fe[fe.DECR_WRAP=34056]="DECR_WRAP",fe[fe.VENDOR=7936]="VENDOR",fe[fe.RENDERER=7937]="RENDERER",fe[fe.VERSION=7938]="VERSION",fe[fe.NEAREST=9728]="NEAREST",fe[fe.LINEAR=9729]="LINEAR",fe[fe.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",fe[fe.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",fe[fe.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",fe[fe.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",fe[fe.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",fe[fe.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",fe[fe.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",fe[fe.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",fe[fe.TEXTURE_2D=3553]="TEXTURE_2D",fe[fe.TEXTURE=5890]="TEXTURE",fe[fe.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",fe[fe.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",fe[fe.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",fe[fe.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",fe[fe.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",fe[fe.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",fe[fe.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",fe[fe.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",fe[fe.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",fe[fe.TEXTURE0=33984]="TEXTURE0",fe[fe.TEXTURE1=33985]="TEXTURE1",fe[fe.TEXTURE2=33986]="TEXTURE2",fe[fe.TEXTURE3=33987]="TEXTURE3",fe[fe.TEXTURE4=33988]="TEXTURE4",fe[fe.TEXTURE5=33989]="TEXTURE5",fe[fe.TEXTURE6=33990]="TEXTURE6",fe[fe.TEXTURE7=33991]="TEXTURE7",fe[fe.TEXTURE8=33992]="TEXTURE8",fe[fe.TEXTURE9=33993]="TEXTURE9",fe[fe.TEXTURE10=33994]="TEXTURE10",fe[fe.TEXTURE11=33995]="TEXTURE11",fe[fe.TEXTURE12=33996]="TEXTURE12",fe[fe.TEXTURE13=33997]="TEXTURE13",fe[fe.TEXTURE14=33998]="TEXTURE14",fe[fe.TEXTURE15=33999]="TEXTURE15",fe[fe.TEXTURE16=34e3]="TEXTURE16",fe[fe.TEXTURE17=34001]="TEXTURE17",fe[fe.TEXTURE18=34002]="TEXTURE18",fe[fe.TEXTURE19=34003]="TEXTURE19",fe[fe.TEXTURE20=34004]="TEXTURE20",fe[fe.TEXTURE21=34005]="TEXTURE21",fe[fe.TEXTURE22=34006]="TEXTURE22",fe[fe.TEXTURE23=34007]="TEXTURE23",fe[fe.TEXTURE24=34008]="TEXTURE24",fe[fe.TEXTURE25=34009]="TEXTURE25",fe[fe.TEXTURE26=34010]="TEXTURE26",fe[fe.TEXTURE27=34011]="TEXTURE27",fe[fe.TEXTURE28=34012]="TEXTURE28",fe[fe.TEXTURE29=34013]="TEXTURE29",fe[fe.TEXTURE30=34014]="TEXTURE30",fe[fe.TEXTURE31=34015]="TEXTURE31",fe[fe.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",fe[fe.REPEAT=10497]="REPEAT",fe[fe.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",fe[fe.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",fe[fe.FLOAT_VEC2=35664]="FLOAT_VEC2",fe[fe.FLOAT_VEC3=35665]="FLOAT_VEC3",fe[fe.FLOAT_VEC4=35666]="FLOAT_VEC4",fe[fe.INT_VEC2=35667]="INT_VEC2",fe[fe.INT_VEC3=35668]="INT_VEC3",fe[fe.INT_VEC4=35669]="INT_VEC4",fe[fe.BOOL=35670]="BOOL",fe[fe.BOOL_VEC2=35671]="BOOL_VEC2",fe[fe.BOOL_VEC3=35672]="BOOL_VEC3",fe[fe.BOOL_VEC4=35673]="BOOL_VEC4",fe[fe.FLOAT_MAT2=35674]="FLOAT_MAT2",fe[fe.FLOAT_MAT3=35675]="FLOAT_MAT3",fe[fe.FLOAT_MAT4=35676]="FLOAT_MAT4",fe[fe.SAMPLER_2D=35678]="SAMPLER_2D",fe[fe.SAMPLER_CUBE=35680]="SAMPLER_CUBE",fe[fe.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",fe[fe.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",fe[fe.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",fe[fe.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",fe[fe.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",fe[fe.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",fe[fe.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",fe[fe.COMPILE_STATUS=35713]="COMPILE_STATUS",fe[fe.LOW_FLOAT=36336]="LOW_FLOAT",fe[fe.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",fe[fe.HIGH_FLOAT=36338]="HIGH_FLOAT",fe[fe.LOW_INT=36339]="LOW_INT",fe[fe.MEDIUM_INT=36340]="MEDIUM_INT",fe[fe.HIGH_INT=36341]="HIGH_INT",fe[fe.FRAMEBUFFER=36160]="FRAMEBUFFER",fe[fe.RENDERBUFFER=36161]="RENDERBUFFER",fe[fe.RGBA4=32854]="RGBA4",fe[fe.RGB5_A1=32855]="RGB5_A1",fe[fe.RGB565=36194]="RGB565",fe[fe.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",fe[fe.STENCIL_INDEX=6401]="STENCIL_INDEX",fe[fe.STENCIL_INDEX8=36168]="STENCIL_INDEX8",fe[fe.DEPTH_STENCIL=34041]="DEPTH_STENCIL",fe[fe.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",fe[fe.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",fe[fe.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",fe[fe.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",fe[fe.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",fe[fe.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",fe[fe.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",fe[fe.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",fe[fe.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",fe[fe.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",fe[fe.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",fe[fe.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",fe[fe.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",fe[fe.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",fe[fe.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",fe[fe.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",fe[fe.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",fe[fe.NONE=0]="NONE",fe[fe.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",fe[fe.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",fe[fe.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",fe[fe.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",fe[fe.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",fe[fe.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",fe[fe.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",fe[fe.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",fe[fe.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",fe[fe.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",fe[fe.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",fe[fe.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",fe[fe.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",fe[fe.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",fe[fe.COPY_SRC=1]="COPY_SRC",fe[fe.COPY_DST=2]="COPY_DST",fe[fe.SAMPLED=4]="SAMPLED",fe[fe.STORAGE=8]="STORAGE",fe[fe.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT";var rc=(Ca=Object(Ur.injectable)(),Us=Object(Ur.inject)(yr.GeometryComponentManager),ns=Object(Ur.inject)(yr.RenderEngine),Ca((ca=function(){function Z(){xi()(this,Z),di()(this,"geometry",gs,this),di()(this,"engine",Fa,this)}var U;return Ri()(Z,[{key:"execute",value:(U=eo()(ui.a.mark(function w(){var L=this;return ui.a.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:this.geometry.forEach(function(It,Rt){Rt.dirty&&(Rt.attributes.forEach(function(K){var Dt;K.dirty&&K.data&&(K.buffer?(Dt=K.buffer)===null||Dt===void 0||Dt.subData({data:K.data,offset:0}):K.buffer=L.engine.createBuffer({data:K.data,type:Jn.FLOAT}),K.dirty=!1)}),Rt.indices&&(Rt.indicesBuffer?Rt.indicesBuffer.subData({data:Rt.indices,offset:0}):Rt.indicesBuffer=L.engine.createElements({data:Rt.indices,count:Rt.indices.length,type:Jn.UNSIGNED_INT,usage:Jn.STATIC_DRAW})),Rt.dirty=!1)});case 1:case"end":return Q.stop()}},w,this)})),function(){return U.apply(this,arguments)})},{key:"tearDown",value:function(){this.geometry.forEach(function(L,Q){Q.indicesBuffer&&Q.indicesBuffer.destroy(),Q.attributes.forEach(function(It){It.buffer&&It.buffer.destroy()})}),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{vertexCount:3},Q=L.vertexCount,It=na();return this.geometry.create(It,{vertexCount:Q})}},{key:"createInstancedBufferGeometry",value:function(L){var Q=L.maxInstancedCount,It=L.vertexCount,Rt=na();return this.geometry.create(Rt,{maxInstancedCount:Q,vertexCount:It})}},{key:"createBox",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Q=L.widthSegments||1,It=L.heightSegments||1,Rt=L.depthSegments||1,K=L.halfExtents||jn.e.fromValues(.5,.5,.5),Dt=ya()(K,3),Qt=Dt[0],qt=Dt[1],xe=Dt[2],Ie=[jn.e.fromValues(-Qt,-qt,xe),jn.e.fromValues(Qt,-qt,xe),jn.e.fromValues(Qt,qt,xe),jn.e.fromValues(-Qt,qt,xe),jn.e.fromValues(Qt,-qt,-xe),jn.e.fromValues(-Qt,-qt,-xe),jn.e.fromValues(-Qt,qt,-xe),jn.e.fromValues(Qt,qt,-xe)],Ye=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],Ne=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],He={FRONT:0,BACK:1,TOP:2,BOTTOM:3,RIGHT:4,LEFT:5},Je=[],Ge=[],qe=[],yn=[],Dn=[],En=0,Ln=function(fr,br,gr){var hr,Cr,dr,Jr;for(dr=0;dr<=br;dr++)for(Jr=0;Jr<=gr;Jr++){var qr=jn.e.create(),wi=jn.e.create(),Tr=jn.e.create(),pi=jn.e.create();jn.e.lerp(qr,Ie[Ye[fr][0]],Ie[Ye[fr][1]],dr/br),jn.e.lerp(wi,Ie[Ye[fr][0]],Ie[Ye[fr][2]],Jr/gr),jn.e.sub(Tr,wi,Ie[Ye[fr][0]]),jn.e.add(pi,qr,Tr),hr=dr/br,Cr=Jr/gr,Je.push(pi[0],pi[1],pi[2]),Ge.push(Ne[fr][0],Ne[fr][1],Ne[fr][2]),qe.push(hr,Cr),hr=.875*(hr/=3)+4/64,Cr=.875*(Cr/=3)+4/64,hr+=fr%3/3,Cr+=Math.floor(fr/3)/3,yn.push(hr,Cr),dr<br&&Jr<gr&&(Dn.push(En+gr+1,En+1,En),Dn.push(En+gr+1,En+gr+2,En+1)),En++}};Ln(He.FRONT,Q,It),Ln(He.BACK,Q,It),Ln(He.TOP,Q,Rt),Ln(He.BOTTOM,Q,Rt),Ln(He.RIGHT,Rt,It),Ln(He.LEFT,Rt,It);var Zn=Wo(Je),Qn=na();return this.geometry.create(Qn,{indices:Uint32Array.from(Dn),aabb:Zn,attributes:[{dirty:!0,name:"position",data:Float32Array.from(Je),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]}]})}}]),Z}(),gs=Mi()(ca.prototype,"geometry",[Us],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fa=Mi()(ca.prototype,"engine",[ns],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ba=ca))||ba);e(227);function ic(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=To()(Z);if(U){var Q=To()(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return Vo()(this,w)}}var ms,oa,fo,bs,_s,Ga,Ua,xu,Ou,la=function(Z){Qo()(w,Z);var U=ic(w);function w(L){var Q;return xi()(this,w),(Q=U.call(this,L)).vertexShaderGLSL=void 0,Q.fragmentShaderGLSL=void 0,Q.dirty=!0,Q.uniforms=[],Q.cull={enable:!0,face:Jn.BACK},Q.depth={enable:!0},Q.blend=void 0,Object.assign(Eo()(Q),L),Q}return Ri()(w,[{key:"setCull",value:function(Q){return this.cull=Q,this}},{key:"setDepth",value:function(Q){return this.depth=Q,this}},{key:"setBlend",value:function(Q){return this.blend=Q,this}},{key:"setUniform",value:function(Q,It){var Rt=this;if(typeof Q!="string")return Object.keys(Q).forEach(function(Dt){return Rt.setUniform(Dt,Q[Dt])}),this;var K=this.uniforms.find(function(Dt){return Dt.name===Q});return K?(K.dirty=!0,K.data=It):this.uniforms.push({name:Q,dirty:!0,data:It}),this.dirty=!0,this}}]),w}(ra);function rs(Z,U){var w=Object.keys(Z);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Z);U&&(L=L.filter(function(Q){return Object.getOwnPropertyDescriptor(Z,Q).enumerable})),w.push.apply(w,L)}return w}function Ta(Z){for(var U=1;U<arguments.length;U++){var w=arguments[U]!=null?arguments[U]:{};U%2?rs(Object(w),!0).forEach(function(L){mr()(Z,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(w)):rs(Object(w)).forEach(function(L){Object.defineProperty(Z,L,Object.getOwnPropertyDescriptor(w,L))})}return Z}var Vs,kt=(ms=Object(Ur.injectable)(),oa=Object(Ur.inject)(yr.MaterialComponentManager),fo=Object(Ur.inject)(yr.RenderEngine),bs=Object(Ur.inject)(yr.ShaderModuleService),ms((Ga=function(){function Z(){xi()(this,Z),di()(this,"material",Ua,this),di()(this,"engine",xu,this),di()(this,"shaderModule",Ou,this)}var U;return Ri()(Z,[{key:"execute",value:(U=eo()(ui.a.mark(function w(){return ui.a.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,Promise.all(this.material.map(function(){var Q=eo()(ui.a.mark(function It(Rt,K){return ui.a.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:case"end":return Dt.stop()}},It)}));return function(It,Rt){return Q.apply(this,arguments)}}()));case 2:case"end":return L.stop()}},w,this)})),function(){return U.apply(this,arguments)})},{key:"tearDown",value:function(){this.material.clear()}},{key:"createBasicMaterial",value:function(){var L=na();return this.material.create(L,{vertexShaderGLSL:this.engine.supportWebGPU?`layout(set = 0, binding = 0) uniform Uniforms {
  vec4 color;
  mat4 projectionMatrix;
  mat4 modelViewMatrix;
} uniforms;

layout(location = 0) in vec3 position;
// layout(location = 1) in vec3 barycentric;

layout(location = 0) out vec4 fragColor;
// layout(location = 1) out vec3 v_Barycentric;

void main() {
  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);
  fragColor = uniforms.color;
  // v_Barycentric = barycentric;
}`:`attribute vec3 position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform vec4 color;

varying vec4 fragColor;

void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  fragColor = color;
}`,fragmentShaderGLSL:this.engine.supportWebGPU?`// layout(set = 0, binding = 1) uniform WireframeUniforms {
//   float lineWidth;
//   vec4 lineColor;
// } wireframe;

layout(location = 0) in vec4 fragColor;
// layout(location = 1) in vec3 v_Barycentric;

layout(location = 0) out vec4 outColor;

// wireframe
// float edgeFactor() {
//   vec3 d = fwidth(v_Barycentric);
//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);
//   return min(min(a3.x, a3.y), a3.z);
// }

void main() {
  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));
  outColor = fragColor;
}`:`varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`})}},{key:"createShaderMaterial",value:function(L){var Q=na(),It=L.vertexShader,Rt=L.fragmentShader,K=[];if(!this.engine.supportWebGPU){var Dt="material-".concat(Q);this.shaderModule.registerModule(Dt,{vs:L.vertexShader,fs:L.fragmentShader});var Qt=this.shaderModule.getModule(Dt);It=Qt.vs,Rt=Qt.fs,Qt.uniforms&&(K=Object.keys(Qt.uniforms).map(function(qt){return{dirty:!0,name:qt,data:Qt.uniforms[qt]}}))}return this.material.create(Q,Ta(Ta({vertexShaderGLSL:It,fragmentShaderGLSL:Rt},L),{},{uniforms:K}))}}]),Z}(),Ua=Mi()(Ga.prototype,"material",[oa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xu=Mi()(Ga.prototype,"engine",[fo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ou=Mi()(Ga.prototype,"shaderModule",[bs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_s=Ga))||_s);function f(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=To()(Z);if(U){var Q=To()(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return Vo()(this,w)}}(function(Z){Z[Z.Standard=0]="Standard"})(Vs||(Vs={}));var u=function(Z){Qo()(w,Z);var U=f(w);function w(L){var Q;return xi()(this,w),(Q=U.call(this,L)).strategy=Vs.Standard,Q.visibilityPlaneMask=0,Q.visible=!1,Object.assign(Eo()(Q),L),Q}return w}(ra);e(228);function I(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=To()(Z);if(U){var Q=To()(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return Vo()(this,w)}}var W,st=function(Z){Qo()(w,Z);var U=I(w);function w(L){var Q;return xi()(this,w),(Q=U.call(this,L)).material=void 0,Q.geometry=void 0,Q.aabb=new zs,Q.aabbDirty=!0,Q.model=void 0,Q.visible=!0,Object.assign(Eo()(Q),L),Q}return w}(ra),jt=function(){function Z(U,w){xi()(this,Z),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=U||0,this.normal=w||jn.e.fromValues(0,1,0),this.updatePNVertexFlag()}return Ri()(Z,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(w){return jn.e.dot(w,this.normal)-this.distance}},{key:"normalize",value:function(){var w=1/jn.e.len(this.normal);jn.e.scale(this.normal,this.normal,w),this.distance*=w}},{key:"intersectsLine",value:function(w,L,Q){var It=this.distanceToPoint(w),Rt=It/(It-this.distanceToPoint(L)),K=Rt>=0&&Rt<=1;return K&&Q&&jn.e.lerp(Q,w,L,Rt),K}}]),Z}();(function(Z){Z[Z.OUTSIDE=4294967295]="OUTSIDE",Z[Z.INSIDE=0]="INSIDE",Z[Z.INDETERMINATE=2147483647]="INDETERMINATE"})(W||(W={}));var Gt,Ht,ee,ae,je,Fe,Ue,Ke,bn,wn,Nn,Bn,Fn,sr=function(){function Z(U){if(xi()(this,Z),this.planes=[],U)this.planes=U;else for(var w=0;w<6;w++)this.planes.push(new jt)}return Ri()(Z,[{key:"extractFromVPMatrix",value:function(w){var L=ya()(w,16),Q=L[0],It=L[1],Rt=L[2],K=L[3],Dt=L[4],Qt=L[5],qt=L[6],xe=L[7],Ie=L[8],Ye=L[9],Ne=L[10],He=L[11],Je=L[12],Ge=L[13],qe=L[14],yn=L[15];jn.e.set(this.planes[0].normal,K-Q,xe-Dt,He-Ie),this.planes[0].distance=-(yn-Je),jn.e.set(this.planes[1].normal,K+Q,xe+Dt,He+Ie),this.planes[1].distance=-(yn+Je),jn.e.set(this.planes[2].normal,K+It,xe+Qt,He+Ye),this.planes[2].distance=-(yn+Ge),jn.e.set(this.planes[3].normal,K-It,xe-Qt,He-Ye),this.planes[3].distance=-(yn-Ge),jn.e.set(this.planes[4].normal,K-Rt,xe-qt,He-Ne),this.planes[4].distance=-(yn-qe),jn.e.set(this.planes[5].normal,K+Rt,xe+qt,He+Ne),this.planes[5].distance=-(yn+qe),this.planes.forEach(function(Dn){Dn.normalize(),Dn.updatePNVertexFlag()})}}]),Z}(),ur=e(61),Or=e.n(ur);function ei(Z,U){var w;if(typeof Symbol=="undefined"||Z[Symbol.iterator]==null){if(Array.isArray(Z)||(w=function(Dt,Qt){if(!!Dt){if(typeof Dt=="string")return Ci(Dt,Qt);var qt=Object.prototype.toString.call(Dt).slice(8,-1);if(qt==="Object"&&Dt.constructor&&(qt=Dt.constructor.name),qt==="Map"||qt==="Set")return Array.from(Dt);if(qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qt))return Ci(Dt,Qt)}}(Z))||U&&Z&&typeof Z.length=="number"){w&&(Z=w);var L=0,Q=function(){};return{s:Q,n:function(){return L>=Z.length?{done:!0}:{done:!1,value:Z[L++]}},e:function(Qt){throw Qt},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var It,Rt=!0,K=!1;return{s:function(){w=Z[Symbol.iterator]()},n:function(){var Qt=w.next();return Rt=Qt.done,Qt},e:function(Qt){K=!0,It=Qt},f:function(){try{Rt||w.return==null||w.return()}finally{if(K)throw It}}}}function Ci(Z,U){(U==null||U>Z.length)&&(U=Z.length);for(var w=0,L=new Array(U);w<U;w++)L[w]=Z[w];return L}var kr,yi,oo,so,co,lo,Hi,Io,ko,Ro,bo,jo,ho,fa,Zo,Hc,Su,Kc,Jc,Qc,mh,Zc,wu,$c,Eu=(Gt=Object(Ur.injectable)(),Ht=Object(Ur.inject)(yr.MeshComponentManager),ee=Object(Ur.inject)(yr.CullableComponentManager),ae=Object(Ur.inject)(yr.GeometryComponentManager),je=Object(Ur.inject)(yr.HierarchyComponentManager),Fe=Object(Ur.inject)(yr.TransformComponentManager),Gt((Ke=function(){function Z(){xi()(this,Z),di()(this,"mesh",bn,this),di()(this,"cullable",wn,this),di()(this,"geometry",Nn,this),di()(this,"hierarchy",Bn,this),di()(this,"transform",Fn,this),this.planes=void 0}var U;return Ri()(Z,[{key:"setFrustumPlanes",value:function(L){this.planes=L}},{key:"execute",value:(U=eo()(ui.a.mark(function w(L){var Q,It,Rt,K=this;return ui.a.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:Q=ei(L);try{for(Rt=function(){var qt=It.value,xe=(qt.getScene(),qt.getCamera());K.mesh.forEach(function(Ie,Ye){var Ne,He,Je=K.hierarchy.getComponentByEntity(Ie),Ge=K.cullable.getComponentByEntity(Ie),qe=Ye.geometry,yn=K.transform.getComponentByEntity(Ie);if(qe&&qe.aabb&&yn&&Ye.aabbDirty){var Dn=yn.worldTransform,En=qe.aabb,Ln=En.center,Zn=En.halfExtents,Qn=jn.e.transformMat4(jn.e.create(),Ln,Dn),qn=(Ne=Dn,(He=jn.a.create())[0]=Ne[0],He[1]=Ne[1],He[2]=Ne[2],He[3]=Ne[4],He[4]=Ne[5],He[5]=Ne[6],He[6]=Ne[8],He[7]=Ne[9],He[8]=Ne[10],He),fr=jn.e.transformMat3(jn.e.create(),Zn,qn);Ye.aabb.update(Qn,fr),Ye.aabbDirty=!1}if(Ge&&qe){var br=K.cullable.getComponentByEntity((Je==null?void 0:Je.parentID)||-1);Ge.visibilityPlaneMask=K.computeVisibilityWithPlaneMask(Ye.aabb,(br==null?void 0:br.visibilityPlaneMask)||W.INDETERMINATE,K.planes||xe.getFrustum().planes),Ge.visible=Ge.visibilityPlaneMask!==W.OUTSIDE}})},Q.s();!(It=Q.n()).done;)Rt()}catch(Qt){Q.e(Qt)}finally{Q.f()}case 2:case"end":return Dt.stop()}},w)})),function(w){return U.apply(this,arguments)})},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(L,Q,It){if(Q===W.OUTSIDE||Q===W.INSIDE)return Q;for(var Rt=W.INSIDE,K=0,Dt=It.length;K<Dt;++K){var Qt=K<31?1<<K:0;if(!(K<31&&(Q&Qt)==0)){var qt=It[K],xe=qt.normal,Ie=qt.distance;if(jn.e.dot(xe,L.getNegativeFarPoint(It[K]))+Ie>0)return W.OUTSIDE;jn.e.dot(xe,L.getPositiveFarPoint(It[K]))+Ie>0&&(Rt|=Qt)}}return Rt}}]),Z}(),bn=Mi()(Ke.prototype,"mesh",[Ht],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wn=Mi()(Ke.prototype,"cullable",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nn=Mi()(Ke.prototype,"geometry",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bn=Mi()(Ke.prototype,"hierarchy",[je],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fn=Mi()(Ke.prototype,"transform",[Fe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ue=Ke))||Ue);function Ws(Z,U){var w;if(typeof Symbol=="undefined"||Z[Symbol.iterator]==null){if(Array.isArray(Z)||(w=function(Dt,Qt){if(!!Dt){if(typeof Dt=="string")return qc(Dt,Qt);var qt=Object.prototype.toString.call(Dt).slice(8,-1);if(qt==="Object"&&Dt.constructor&&(qt=Dt.constructor.name),qt==="Map"||qt==="Set")return Array.from(Dt);if(qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qt))return qc(Dt,Qt)}}(Z))||U&&Z&&typeof Z.length=="number"){w&&(Z=w);var L=0,Q=function(){};return{s:Q,n:function(){return L>=Z.length?{done:!0}:{done:!1,value:Z[L++]}},e:function(Qt){throw Qt},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var It,Rt=!0,K=!1;return{s:function(){w=Z[Symbol.iterator]()},n:function(){var Qt=w.next();return Rt=Qt.done,Qt},e:function(Qt){K=!0,It=Qt},f:function(){try{Rt||w.return==null||w.return()}finally{if(K)throw It}}}}function qc(Z,U){(U==null||U>Z.length)&&(U=Z.length);for(var w=0,L=new Array(U);w<U;w++)L[w]=Z[w];return L}var bh,tl,el,nl,oc,rl,il,ol,al,Mu,Au,xs,ac,sl,sc,Os,ul,xh,cl,ll,uc,fl,Ss=(kr=Object(Ur.injectable)(),yi=Object(Ur.inject)(yr.MeshComponentManager),oo=Object(Ur.inject)(yr.GeometryComponentManager),so=Object(Ur.inject)(yr.MaterialComponentManager),co=Object(Ur.inject)(yr.CullableComponentManager),lo=Object(Ur.inject)(yr.TransformComponentManager),Hi=Object(Ur.inject)(yr.HierarchyComponentManager),Io=Object(Ur.inject)(yr.Systems),ko=Object(Ur.named)(yr.FrameGraphSystem),Ro=Object(Ur.inject)(yr.RenderEngine),bo=Object(Ur.inject)(yr.ResourcePool),kr(($c=wu=function(){function Z(){var L=this;xi()(this,Z),di()(this,"mesh",fa,this),di()(this,"geometry",Zo,this),di()(this,"material",Hc,this),di()(this,"cullable",Su,this),di()(this,"transform",Kc,this),di()(this,"hierarchy",Jc,this),di()(this,"frameGraphSystem",Qc,this),di()(this,"engine",mh,this),di()(this,"resourcePool",Zc,this),this.setup=function(Q,It,Rt){var K=Q.createRenderTarget(It,"color buffer",{width:1,height:1,usage:Jn.RENDER_ATTACHMENT|Jn.SAMPLED|Jn.COPY_SRC});Rt.data={output:It.write(Q,K)}},this.execute=function(){var Q=eo()(ui.a.mark(function It(Rt,K,Dt){var Qt,qt,xe,Ie,Ye,Ne;return ui.a.wrap(function(He){for(;;)switch(He.prev=He.next){case 0:Qt=Rt.getResourceNode(K.data.output),qt=L.resourcePool.getOrCreateResource(Qt.resource),xe=Ws(Dt),He.prev=3,xe.s();case 5:if((Ie=xe.n()).done){He.next=11;break}return Ye=Ie.value,He.next=9,L.initView(Ye);case 9:He.next=5;break;case 11:He.next=16;break;case 13:He.prev=13,He.t0=He.catch(3),xe.e(He.t0);case 16:return He.prev=16,xe.f(),He.finish(16);case 19:Ne=L.engine.getCanvas(),qt.resize({width:Ne.width,height:Ne.height}),L.engine.setScissor({enable:!1}),L.engine.clear({framebuffer:qt,color:Dt[0].getClearColor(),depth:1}),L.engine.useFramebuffer(qt,function(){var Je,Ge=Ws(Dt);try{for(Ge.s();!(Je=Ge.n()).done;){var qe=Je.value;L.renderView(qe)}}catch(yn){Ge.e(yn)}finally{Ge.f()}});case 24:case"end":return He.stop()}},It,null,[[3,13,16,19]])}));return function(It,Rt,K){return Q.apply(this,arguments)}}()}var U,w;return Ri()(Z,[{key:"renderView",value:function(Q){var It=Q.getScene(),Rt=Q.getCamera(),K=Rt.getViewTransform(),Dt=jn.b.multiply(jn.b.create(),Rt.getPerspective(),K);Rt.getFrustum().extractFromVPMatrix(Dt);var Qt=Q.getViewport(),qt=Qt.x,xe=Qt.y,Ie=Qt.width,Ye=Qt.height;this.engine.viewport({x:qt,y:xe,width:Ie,height:Ye});var Ne,He=Ws(It.getEntities());try{for(He.s();!(Ne=He.n()).done;){var Je=Ne.value;this.renderMesh(Je,{camera:Rt,view:Q,viewMatrix:K})}}catch(Ge){He.e(Ge)}finally{He.f()}}},{key:"renderMesh",value:function(Q,It){var Rt=this,K=It.camera,Dt=It.view,Qt=It.viewMatrix,qt=this.mesh.getComponentByEntity(Q);if(qt.visible){this.hierarchy.forEach(function(qe,yn){yn.parentID===Q&&Rt.renderMesh(qe,{camera:K,view:Dt,viewMatrix:Qt})});var xe=qt.material,Ie=qt.geometry;if(Ie&&!Ie.dirty&&xe){var Ye=this.transform.getComponentByEntity(Q),Ne=jn.b.multiply(jn.b.create(),Qt,Ye.worldTransform),He=Dt.getViewport(),Je=He.width,Ge=He.height;xe.setUniform({projectionMatrix:K.getPerspective(),modelViewMatrix:Ne,modelMatrix:Ye.worldTransform,viewMatrix:Qt,cameraPosition:K.getPosition(),u_viewport:[Je,Ge]}),qt.model&&(qt.model.draw({uniforms:xe.uniforms.reduce(function(qe,yn){return qe[yn.name]=yn.data,qe},{})}),xe.uniforms.forEach(function(qe){qe.dirty=!1}),xe.dirty=!1)}}}},{key:"initMesh",value:(w=eo()(ui.a.mark(function L(Q,It){var Rt,K,Dt,Qt,qt,xe,Ie,Ye=this;return ui.a.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(Rt=this.mesh.getComponentByEntity(Q)){Ne.next=3;break}return Ne.abrupt("return");case 3:return K=Rt.material,Dt=Rt.geometry,Ne.next=7,this.hierarchy.forEachAsync(function(){var He=eo()(ui.a.mark(function Je(Ge,qe){return ui.a.wrap(function(yn){for(;;)switch(yn.prev=yn.next){case 0:if(qe.parentID!==Q){yn.next=4;break}return yn.next=4,Ye.initMesh(Ge,It);case 4:case"end":return yn.stop()}},Je)}));return function(Je,Ge){return He.apply(this,arguments)}}());case 7:if(Dt&&!Dt.dirty&&K){Ne.next=9;break}return Ne.abrupt("return");case 9:if(Rt.model){Ne.next=21;break}return K.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),Qt=this.engine,qt=Qt.createModel,xe=Qt.createAttribute,Ie={vs:K.vertexShaderGLSL,fs:K.fragmentShaderGLSL,attributes:Dt.attributes.reduce(function(He,Je){return Je.data&&Je.buffer&&(He[Je.name]=xe({buffer:Je.buffer,attributes:Je.attributes,arrayStride:Je.arrayStride,stepMode:Je.stepMode,divisor:Je.stepMode==="vertex"?0:1})),He},{}),uniforms:K.uniforms.reduce(function(He,Je){return He[Je.name]=Je.data,He},{}),scissor:{enable:!0,box:function(){return It.getViewport()}}},K.cull&&(Ie.cull=K.cull),K.depth&&(Ie.depth=K.depth),K.blend&&(Ie.blend=K.blend),Dt.indicesBuffer&&(Ie.elements=Dt.indicesBuffer),Dt.maxInstancedCount&&(Ie.instances=Dt.maxInstancedCount,Ie.count=Dt.vertexCount||3),Ne.next=20,qt(Ie);case 20:Rt.model=Ne.sent;case 21:case"end":return Ne.stop()}},L,this)})),function(L,Q){return w.apply(this,arguments)})},{key:"initView",value:(U=eo()(ui.a.mark(function L(Q){var It,Rt,K,Dt;return ui.a.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:It=Q.getScene(),Rt=Ws(It.getEntities()),Qt.prev=2,Rt.s();case 4:if((K=Rt.n()).done){Qt.next=10;break}return Dt=K.value,Qt.next=8,this.initMesh(Dt,Q);case 8:Qt.next=4;break;case 10:Qt.next=15;break;case 12:Qt.prev=12,Qt.t0=Qt.catch(2),Rt.e(Qt.t0);case 15:return Qt.prev=15,Rt.f(),Qt.finish(15);case 18:case"end":return Qt.stop()}},L,this,[[2,12,15,18]])})),function(L){return U.apply(this,arguments)})}]),Z}(),wu.IDENTIFIER="Render Pass",ho=$c,fa=Mi()(ho.prototype,"mesh",[yi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zo=Mi()(ho.prototype,"geometry",[oo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hc=Mi()(ho.prototype,"material",[so],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Su=Mi()(ho.prototype,"cullable",[co],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kc=Mi()(ho.prototype,"transform",[lo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jc=Mi()(ho.prototype,"hierarchy",[Hi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qc=Mi()(ho.prototype,"frameGraphSystem",[Io,ko],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mh=Mi()(ho.prototype,"engine",[Ro],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zc=Mi()(ho.prototype,"resourcePool",[bo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jo=ho))||jo),Cu=(bh=Object(Ur.injectable)(),tl=Object(Ur.inject)(yr.RenderEngine),el=Object(Ur.inject)(yr.ResourcePool),bh((al=ol=function Z(){var U=this;xi()(this,Z),di()(this,"engine",rl,this),di()(this,"resourcePool",il,this),this.model=void 0,this.setup=function(w,L,Q){var It=w.getPass(Ss.IDENTIFIER);if(It){var Rt=w.createRenderTarget(L,"render to screen",{width:1,height:1});Q.data={input:L.read(It.data.output),output:L.write(w,Rt)}}},this.execute=function(){var w=eo()(ui.a.mark(function L(Q,It){var Rt,K,Dt,Qt,qt,xe,Ie;return ui.a.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(Rt=U.engine,K=Rt.createModel,Dt=Rt.createAttribute,Qt=Rt.createBuffer,U.model){Ye.next=6;break}return Ye.next=4,K({vs:U.engine.supportWebGPU?`layout(location = 0) in vec2 a_Position;
layout(location = 0) out vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`:`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,fs:U.engine.supportWebGPU?`layout(set = 0, binding = 0) uniform sampler u_TextureSampler;
layout(set = 0, binding = 1) uniform texture2D u_Texture;

layout(location = 0) in vec2 v_UV;
layout(location = 0) out vec4 outColor;

void main() {
  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);
}`:`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,attributes:{a_Position:Dt({buffer:Qt({data:[-4,-4,4,-4,0,4],type:Jn.FLOAT}),size:2,arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:qt=Ye.sent,U.model=qt;case 6:xe=Q.getResourceNode(It.data.input),Ie=U.resourcePool.getOrCreateResource(xe.resource),U.engine.useFramebuffer(null,function(){U.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),U.model.draw({uniforms:{u_Texture:Ie}})});case 9:case"end":return Ye.stop()}},L)}));return function(L,Q){return w.apply(this,arguments)}}(),this.tearDown=function(){U.model=void 0}},ol.IDENTIFIER="Copy Pass",oc=al,rl=Mi()(oc.prototype,"engine",[tl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),il=Mi()(oc.prototype,"resourcePool",[el],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nl=oc))||nl);function cc(Z,U){var w;if(typeof Symbol=="undefined"||Z[Symbol.iterator]==null){if(Array.isArray(Z)||(w=function(Dt,Qt){if(!!Dt){if(typeof Dt=="string")return lc(Dt,Qt);var qt=Object.prototype.toString.call(Dt).slice(8,-1);if(qt==="Object"&&Dt.constructor&&(qt=Dt.constructor.name),qt==="Map"||qt==="Set")return Array.from(Dt);if(qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qt))return lc(Dt,Qt)}}(Z))||U&&Z&&typeof Z.length=="number"){w&&(Z=w);var L=0,Q=function(){};return{s:Q,n:function(){return L>=Z.length?{done:!0}:{done:!1,value:Z[L++]}},e:function(Qt){throw Qt},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var It,Rt=!0,K=!1;return{s:function(){w=Z[Symbol.iterator]()},n:function(){var Qt=w.next();return Rt=Qt.done,Qt},e:function(Qt){K=!0,It=Qt},f:function(){try{Rt||w.return==null||w.return()}finally{if(K)throw It}}}}function lc(Z,U){(U==null||U>Z.length)&&(U=Z.length);for(var w=0,L=new Array(U);w<U;w++)L[w]=Z[w];return L}var hl,Tu,dl,Oh,vl,pl,gl,ws,Sh,yl,ml,bl,jd=1,xl=2,fc=(Mu=Object(Ur.injectable)(),Au=Object(Ur.inject)(yr.RenderEngine),xs=Object(Ur.inject)(yr.ResourcePool),ac=Object(Ur.inject)(yr.RenderPassFactory),sl=Object(Ur.inject)(yr.MeshComponentManager),Mu((fl=uc=function(){function Z(){var U=this;xi()(this,Z),di()(this,"engine",ul,this),di()(this,"resourcePool",xh,this),di()(this,"renderPassFactory",cl,this),di()(this,"mesh",ll,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(w,L,Q){var It=w.createRenderTarget(L,"picking fbo",{width:1,height:1});Q.data={output:L.write(w,It)},L.hasSideEffect=!0},this.execute=function(){var w=eo()(ui.a.mark(function L(Q,It,Rt){var K,Dt,Qt;return ui.a.wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:if(U.views=Rt,!U.alreadyInRendering){qt.next=3;break}return qt.abrupt("return");case 3:K=cc(Rt);try{for(Qt=function(){var Ie=Dt.value,Ye=Ie.getViewport(),Ne=Ye.width,He=Ye.height;U.alreadyInRendering=!0;var Je=Q.getResourceNode(It.data.output);U.pickingFBO=U.resourcePool.getOrCreateResource(Je.resource),U.pickingFBO.resize({width:Ne,height:He}),U.engine.useFramebuffer(U.pickingFBO,function(){U.engine.clear({framebuffer:U.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var Ge,qe=U.renderPassFactory(Ss.IDENTIFIER),yn=[],Dn=cc(Ie.getScene().getEntities());try{for(Dn.s();!(Ge=Dn.n()).done;){var En=Ge.value,Ln=U.mesh.getComponentByEntity(En);Ln.material.setUniform("u_PickingStage",jd),yn.push(Ln)}}catch(Zn){Dn.e(Zn)}finally{Dn.f()}qe.renderView(Ie),yn.forEach(function(Zn){Zn.material.setUniform("u_PickingStage",xl)}),U.alreadyInRendering=!1})},K.s();!(Dt=K.n()).done;)Qt()}catch(xe){K.e(xe)}finally{K.f()}case 5:case"end":return qt.stop()}},L)}));return function(L,Q,It){return w.apply(this,arguments)}}(),this.pick=function(w,L){var Q,It,Rt=w.x,K=w.y,Dt=U.engine,Qt=Dt.readPixels,qt=Dt.useFramebuffer,xe=L.getViewport(),Ie=xe.width,Ye=xe.height,Ne=Rt*window.devicePixelRatio,He=K*window.devicePixelRatio;if(!(Ne>Ie||Ne<0||He>Ye||He<0))return qt(U.pickingFBO,function(){var Je,Ge;(Q=Qt({x:Math.round(Ne),y:Math.round(Ye-(K+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(4),framebuffer:U.pickingFBO}))[0]===0&&Q[1]===0&&Q[2]===0||(Je=Q,Ge=ya()(Je,3),It=Ge[0]+256*Ge[1]+65536*Ge[2]-1,U.highlightEnabled&&U.highlightPickedFeature(Q,L))}),It}}return Ri()(Z,[{key:"enableHighlight",value:function(w){this.highlightEnabled=w}},{key:"setHighlightColor",value:function(w){this.highlightColor=w}},{key:"highlightPickedFeature",value:function(w,L){if(w){var Q,It=cc(L.getScene().getEntities());try{for(It.s();!(Q=It.n()).done;){var Rt=Q.value,K=this.mesh.getComponentByEntity(Rt).material;K.setUniform("u_PickingStage",xl),K.setUniform("u_PickingColor",[w[0],w[1],w[2]]),K.setUniform("u_HighlightColor",this.highlightColor)}}catch(Dt){It.e(Dt)}finally{It.f()}}}}]),Z}(),uc.IDENTIFIER="PixelPicking Pass",Os=fl,ul=Mi()(Os.prototype,"engine",[Au],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xh=Mi()(Os.prototype,"resourcePool",[xs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cl=Mi()(Os.prototype,"renderPassFactory",[ac],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ll=Mi()(Os.prototype,"mesh",[sl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sc=Os))||sc),hc=(hl=Object(Ur.injectable)(),Tu=Object(Ur.inject)(yr.Systems),dl=Object(Ur.named)(yr.FrameGraphSystem),Oh=Object(Ur.inject)(yr.RenderPassFactory),vl=Object(Ur.inject)(yr.ConfigService),pl=Object(Ur.inject)(yr.ResourcePool),hl((ws=function(){function Z(){xi()(this,Z),di()(this,"frameGraphSystem",Sh,this),di()(this,"renderPassFactory",yl,this),di()(this,"configService",ml,this),di()(this,"resourcePool",bl,this)}var U;return Ri()(Z,[{key:"execute",value:(U=eo()(ui.a.mark(function w(L){var Q,It,Rt,K,Dt,Qt,qt,xe;return ui.a.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:Q=this.renderPassFactory(Ss.IDENTIFIER),It=Q.setup,Rt=Q.execute,this.frameGraphSystem.addPass(Ss.IDENTIFIER,It,Rt),K=this.renderPassFactory(Cu.IDENTIFIER),Dt=K.setup,Qt=K.execute,qt=K.tearDown,xe=this.frameGraphSystem.addPass(Cu.IDENTIFIER,Dt,Qt,qt),this.frameGraphSystem.present(xe.data.output);case 5:case"end":return Ie.stop()}},w,this)})),function(w){return U.apply(this,arguments)})},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(L,Q){return this.renderPassFactory(fc.IDENTIFIER).pick(L,Q)}}]),Z}(),Sh=Mi()(ws.prototype,"frameGraphSystem",[Tu,dl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yl=Mi()(ws.prototype,"renderPassFactory",[Oh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ml=Mi()(ws.prototype,"configService",[vl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bl=Mi()(ws.prototype,"resourcePool",[pl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gl=ws))||gl);function dc(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=To()(Z);if(U){var Q=To()(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return Vo()(this,w)}}var Ol,Sl,wl,Xs,El,Ys,Ml,Al,Cl,wh=function(Z){Qo()(w,Z);var U=dc(w);function w(L){var Q;return xi()(this,w),(Q=U.call(this,L)).parentID=void 0,Object.assign(Eo()(Q),L),Q}return w}(ra),Eh=(Ol=Object(Ur.injectable)(),Sl=Object(Ur.inject)(yr.HierarchyComponentManager),wl=Object(Ur.inject)(yr.TransformComponentManager),Xs=Object(Ur.inject)(yr.MeshComponentManager),Ol((Ys=function(){function Z(){xi()(this,Z),di()(this,"hierarchy",Ml,this),di()(this,"transform",Al,this),di()(this,"mesh",Cl,this)}var U;return Ri()(Z,[{key:"execute",value:(U=eo()(ui.a.mark(function w(){return ui.a.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return L.stop()}},w,this)})),function(){return U.apply(this,arguments)})},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var L=this;this.transform.forEach(function(Q,It){It.isDirty()&&(L.setMeshAABBDirty(Q),It.updateTransform())})}},{key:"runHierarchyUpdateSystem",value:function(){var L=this;this.hierarchy.forEach(function(Q,It){var Rt=L.transform.getComponentByEntity(Q),K=L.transform.getComponentByEntity(It.parentID);Rt!==null&&K!==null&&Rt.updateTransformWithParent(K)})}},{key:"attach",value:function(L,Q,It){if(this.hierarchy.contains(L)&&this.detach(L),this.hierarchy.create(L,{parentID:Q}),this.setMeshAABBDirty(Q),this.hierarchy.getCount()>1){for(var Rt=this.hierarchy.getCount()-1;Rt>0;--Rt)for(var K=this.hierarchy.getEntity(Rt),Dt=0;Dt<Rt;++Dt)if(this.hierarchy.getComponent(Dt).parentID===K){this.hierarchy.moveItem(Rt,Dt),++Rt;break}}this.hierarchy.getComponentByEntity(L);var Qt=this.transform.getComponentByEntity(Q);Qt===null&&(Qt=this.transform.create(Q));var qt=this.transform.getComponentByEntity(L);qt===null&&(qt=this.transform.create(L),Qt=this.transform.getComponentByEntity(Q)),!It&&Qt&&(qt.matrixTransform(jn.b.invert(jn.b.create(),Qt.worldTransform)),qt.updateTransform()),Qt&&qt.updateTransformWithParent(Qt)}},{key:"detach",value:function(L){if(this.hierarchy.getComponentByEntity(L)!==null){var Q=this.transform.getComponentByEntity(L);Q!==null&&Q.applyTransform(),this.hierarchy.removeKeepSorted(L),this.setMeshAABBDirty(L)}}},{key:"detachChildren",value:function(L){for(var Q=0;Q<this.hierarchy.getCount();){var It;if(((It=this.hierarchy.getComponent(Q))===null||It===void 0?void 0:It.parentID)===L){var Rt=this.hierarchy.getEntity(Q);this.detach(Rt)}else++Q}}},{key:"setMeshAABBDirty",value:function(L){var Q=this.mesh.getComponentByEntity(L);Q&&(Q.aabbDirty=!0)}}]),Z}(),Ml=Mi()(Ys.prototype,"hierarchy",[Sl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Al=Mi()(Ys.prototype,"transform",[wl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cl=Mi()(Ys.prototype,"mesh",[Xs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),El=Ys))||El);function Mh(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=To()(Z);if(U){var Q=To()(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return Vo()(this,w)}}var vc=function(Z){Qo()(w,Z);var U=Mh(w);function w(L){var Q,It,Rt,K,Dt,Qt,qt,xe,Ie,Ye,Ne,He,Je,Ge,qe;return xi()(this,w),(Q=U.call(this,L)).dirtyFlag=void 0,Q.localTranslation=jn.e.fromValues(0,0,0),Q.localRotation=jn.c.fromValues(0,0,0,1),Q.localScale=jn.e.fromValues(1,1,1),Q.localTransform=jn.b.create(),Q.worldTransform=jn.b.create(),Q.getRotation=(It=jn.c.create(),function(){return jn.b.getRotation(It,Q.worldTransform),It}),Q.getScale=(Rt=jn.e.create(),function(){return jn.b.getScaling(Rt,Q.worldTransform),Rt}),Q.getPosition=(K=jn.e.create(),function(){return jn.b.getTranslation(K,Q.worldTransform),K}),Q.getLocalMatrix=(Dt=jn.b.create(),function(){return jn.b.fromRotationTranslationScale(Dt,Q.localRotation,Q.localTranslation,Q.localScale),Dt}),Q.matrixTransform=(Qt=jn.b.create(),function(yn){jn.b.multiply(Qt,Q.getLocalMatrix(),yn),jn.b.getScaling(Q.localScale,Qt),jn.b.getTranslation(Q.localTranslation,Qt),jn.b.getRotation(Q.localRotation,Qt)}),Q.rotateRollPitchYaw=(qt=jn.c.create(),xe=jn.c.create(),Ie=jn.c.create(),function(yn,Dn,En){Q.setDirty(),jn.c.fromEuler(qt,yn,0,0),jn.c.fromEuler(xe,0,Dn,0),jn.c.fromEuler(Ie,0,0,En),jn.c.multiply(Q.localRotation,qt,Q.localRotation),jn.c.multiply(Q.localRotation,Q.localRotation,xe),jn.c.multiply(Q.localRotation,Ie,Q.localRotation),jn.c.normalize(Q.localRotation,Q.localRotation)}),Q.lerp=(Ye=jn.e.create(),Ne=jn.c.create(),He=jn.e.create(),Je=jn.e.create(),Ge=jn.c.create(),qe=jn.e.create(),function(yn,Dn,En){Q.setDirty(),jn.b.getScaling(Ye,yn.worldTransform),jn.b.getTranslation(He,yn.worldTransform),jn.b.getRotation(Ne,yn.worldTransform),jn.b.getScaling(Je,Dn.worldTransform),jn.b.getTranslation(qe,Dn.worldTransform),jn.b.getRotation(Ge,Dn.worldTransform),jn.e.lerp(Q.localScale,Ye,Je,En),jn.c.slerp(Q.localRotation,Ne,Ge,En),jn.e.lerp(Q.localTranslation,He,qe,En)}),Q}return Ri()(w,[{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var Q=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];Q?this.dirtyFlag|=w.DIRTY:this.dirtyFlag&=~w.DIRTY}},{key:"updateTransform",value:function(){this.isDirty()&&(this.setDirty(!1),jn.b.copy(this.worldTransform,this.getLocalMatrix()))}},{key:"updateTransformWithParent",value:function(Q){jn.b.multiply(this.worldTransform,this.getLocalMatrix(),Q.worldTransform)}},{key:"applyTransform",value:function(){this.setDirty(),jn.b.getScaling(this.localScale,this.worldTransform),jn.b.getTranslation(this.localTranslation,this.worldTransform),jn.b.getRotation(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localTranslation=jn.e.fromValues(0,0,0),this.localRotation=jn.c.fromValues(0,0,0,1),this.localScale=jn.e.fromValues(1,1,1)}},{key:"translate",value:function(Q){return this.setDirty(),jn.e.add(this.localTranslation,this.localTranslation,Q),this}},{key:"scale",value:function(Q){return this.setDirty(),jn.e.multiply(this.localScale,this.localScale,Q),this}},{key:"rotate",value:function(Q){return this.setDirty(),jn.c.multiply(this.localRotation,this.localRotation,Q),jn.c.normalize(this.localRotation,this.localRotation),this}}]),w}(ra);vc.DIRTY=1,e(143),e(144),e(229),e(145),e(146),e(113),e(147),e(50),e(148),e(230);var pc,Tl,jl,ju,Il,Pl=e(154),Ah=e(251),Ch=e.n(Ah),Iu=(pc=Object(Ur.injectable)(),Tl=Object(Ur.inject)(yr.RenderEngine),pc((ju=function(){function Z(){xi()(this,Z),di()(this,"engine",Il,this),this.resourcePool={}}return Ri()(Z,[{key:"getOrCreateResource",value:function(w){if(!this.resourcePool[w.name]){var L=w.descriptor,Q=L.width,It=L.height,Rt=L.usage;this.resourcePool[w.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:Q,height:It,wrapS:Jn.CLAMP_TO_EDGE,wrapT:Jn.CLAMP_TO_EDGE,usage:Rt})})}return this.resourcePool[w.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),Z}(),Il=Mi()(ju.prototype,"engine",[Tl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jl=ju))||jl);function Th(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=To()(Z);if(U){var Q=To()(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return Vo()(this,w)}}var gc,Dl,jh=function(Z){Qo()(w,Z);var U=Th(w);function w(L){var Q;return xi()(this,w),(Q=U.call(this,L)).name=void 0,Q.name=L.name||"",Q}return w}(ra),kl=Object(Ur.injectable)()(gc=function(){function Z(){xi()(this,Z),this.config=void 0}return Ri()(Z,[{key:"get",value:function(){return this.config}},{key:"set",value:function(w){this.config=w}}]),Z}())||gc,Ih=Object(Ur.injectable)()(Dl=function(){function Z(){xi()(this,Z)}return Ri()(Z,[{key:"listen",value:function(w){}},{key:"on",value:function(w,L){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),Z}())||Dl,Ph=e(252),Rl=e.n(Ph),yc,Dh=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function Nl(Z){var U={};return{content:Z=Z.replace(Dh,function(w,L,Q){var It=Q.split(":"),Rt=It[0].trim(),K="";switch(It.length>1&&(K=It[1].trim()),L){case"bool":K=K==="true";break;case"float":case"int":K=Number(K);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":K=K?K.replace("[","").replace("]","").split(",").reduce(function(Dt,Qt){return Dt.push(Number(Qt.trim())),Dt},[]):new Array(function(Dt){var Qt=0;switch(Dt){case"vec2":case"ivec2":Qt=2;break;case"vec3":case"ivec3":Qt=3;break;case"vec4":case"ivec4":case"mat2":Qt=4;break;case"mat3":Qt=9;break;case"mat4":Qt=16}return Qt}(L)).fill(0)}return U[Rt]=K,"uniform ".concat(L," ").concat(Rt,`;
`)}),uniforms:U}}function Pu(Z,U){var w=Object.keys(Z);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Z);U&&(L=L.filter(function(Q){return Object.getOwnPropertyDescriptor(Z,Q).enumerable})),w.push.apply(w,L)}return w}function Hs(Z){for(var U=1;U<arguments.length;U++){var w=arguments[U]!=null?arguments[U]:{};U%2?Pu(Object(w),!0).forEach(function(L){mr()(Z,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(w)):Pu(Object(w)).forEach(function(L){Object.defineProperty(Z,L,Object.getOwnPropertyDescriptor(w,L))})}return Z}var Ll=/precision\s+(high|low|medium)p\s+float/,kh=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,Rh=Object(Ur.injectable)()(yc=function(){function Z(){xi()(this,Z),this.moduleCache={},this.rawContentCache={}}return Ri()(Z,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}`,fs:`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`}),this.registerModule("sdf2d",{vs:"",fs:`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}`})}},{key:"registerModule",value:function(w,L){if(!this.rawContentCache[w]){var Q=L.vs,It=L.fs,Rt=L.uniforms,K=Nl(Q),Dt=K.content,Qt=K.uniforms,qt=Nl(It),xe=qt.content,Ie=qt.uniforms;this.rawContentCache[w]={fs:xe,uniforms:Hs(Hs(Hs({},Qt),Ie),Rt),vs:Dt}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(w){var L=this;if(this.moduleCache[w])return this.moduleCache[w];var Q=this.rawContentCache[w].vs,It=this.rawContentCache[w].fs,Rt=this.processModule(Q,[],"vs"),K=Rt.content,Dt=Rt.includeList,Qt=this.processModule(It,[],"fs"),qt=Qt.content,xe=Qt.includeList,Ie=qt,Ye=Rl()(Dt.concat(xe).concat(w)).reduce(function(Ne,He){return Hs(Hs({},Ne),L.rawContentCache[He].uniforms)},{});return Ll.test(qt)||(Ie=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`+qt),this.moduleCache[w]={fs:Ie.trim(),uniforms:Ye,vs:K.trim()},this.moduleCache[w]}},{key:"processModule",value:function(w,L,Q){var It=this;return{content:w.replace(kh,function(Rt,K){var Dt=K.split(" ")[0].replace(/"/g,"");if(L.indexOf(Dt)>-1)return"";var Qt=It.rawContentCache[Dt][Q];return L.push(Dt),It.processModule(Qt,L,Q).content}),includeList:L}}}]),Z}())||yc,ha=new Ur.Container;Object(Ur.decorate)(Object(Ur.injectable)(),Pl.EventEmitter),ha.bind(yr.IEventEmitter).to(Pl.EventEmitter),Ch()(ha,!1);function Nh(){var Z=new Ur.Container;return Z.parent=ha,Z.bind(yr.Systems).to(Eh).inSingletonScope().whenTargetNamed(yr.SceneGraphSystem),Z.bind(yr.Systems).to(yu).inSingletonScope().whenTargetNamed(yr.FrameGraphSystem),Z.bind(yr.Systems).to(Eu).inSingletonScope().whenTargetNamed(yr.MeshSystem),Z.bind(yr.Systems).to(rc).inSingletonScope().whenTargetNamed(yr.GeometrySystem),Z.bind(yr.Systems).to(kt).inSingletonScope().whenTargetNamed(yr.MaterialSystem),Z.bind(yr.Systems).to(hc).inSingletonScope().whenTargetNamed(yr.RendererSystem),Z.bind(yr.ResourcePool).to(Iu).inSingletonScope(),Z.bind(yr.ConfigService).to(kl).inSingletonScope(),Z.bind(yr.InteractorService).to(Ih).inSingletonScope(),Z.bind(yr.RenderPass).to(Ss).inSingletonScope().whenTargetNamed(Ss.IDENTIFIER),Z.bind(yr.RenderPass).to(Cu).inSingletonScope().whenTargetNamed(Cu.IDENTIFIER),Z.bind(yr.RenderPass).to(fc).inSingletonScope().whenTargetNamed(fc.IDENTIFIER),Z.bind(yr.RenderPassFactory).toFactory(function(U){return function(w){return U.container.getNamed(yr.RenderPass,w)}}),Z}ha.bind(yr.ShaderModuleService).to(Rh).inSingletonScope(),ha.bind(yr.NameComponentManager).toConstantValue(new ia(jh)),ha.bind(yr.HierarchyComponentManager).toConstantValue(new ia(wh)),ha.bind(yr.TransformComponentManager).toConstantValue(new ia(vc)),ha.bind(yr.MeshComponentManager).toConstantValue(new ia(st)),ha.bind(yr.CullableComponentManager).toConstantValue(new ia(u)),ha.bind(yr.GeometryComponentManager).toConstantValue(new ia(ys)),ha.bind(yr.MaterialComponentManager).toConstantValue(new ia(la));var Bl;e(231),e(149),function(Z){Z.PANSTART="PANSTART",Z.PANEND="PANEND",Z.PANMOVE="PANMOVE",Z.PINCH="PINCH",Z.KEYDOWN="KEYDOWN",Z.KEYUP="KEYUP",Z.HOVER="HOVER"}(Bl||(Bl={})),e(232);var za,Fl,_a,Ks,$o=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);(function(Z){Z.Void="Void",Z.Boolean="Boolean",Z.Float="Float",Z.Uint32="Uint32",Z.Int32="Int32",Z.Vector="Vector",Z.Vector2Float="vec2<f32>",Z.Vector3Float="vec3<f32>",Z.Vector4Float="vec4<f32>",Z.Vector2Boolean="vec2<bool>",Z.Vector3Boolean="vec3<bool>",Z.Vector4Boolean="vec4<bool>",Z.Vector2Uint="vec2<u32>",Z.Vector3Uint="vec3<u32>",Z.Vector4Uint="vec4<u32>",Z.Vector2Int="vec2<i32>",Z.Vector3Int="vec3<i32>",Z.Vector4Int="vec4<i32>",Z.Matrix="Matrix",Z.Matrix3x3Float="mat3x3<f32>",Z.Matrix4x4Float="mat4x4<i32>",Z.Struct="Struct",Z.FloatArray="Float[]",Z.Vector4FloatArray="vec4<f32>[]"})(za||(za={})),function(Z){Z.Program="Program",Z.Identifier="Identifier",Z.VariableDeclaration="VariableDeclaration",Z.BlockStatement="BlockStatement",Z.ReturnStatement="ReturnStatement",Z.FunctionDeclaration="FunctionDeclaration",Z.VariableDeclarator="VariableDeclarator",Z.AssignmentExpression="AssignmentExpression",Z.LogicalExpression="LogicalExpression",Z.BinaryExpression="BinaryExpression",Z.ArrayExpression="ArrayExpression",Z.UnaryExpression="UnaryExpression",Z.UpdateExpression="UpdateExpression",Z.FunctionExpression="FunctionExpression",Z.MemberExpression="MemberExpression",Z.ConditionalExpression="ConditionalExpression",Z.ExpressionStatement="ExpressionStatement",Z.CallExpression="CallExpression",Z.NumThreadStatement="NumThreadStatement",Z.StorageStatement="StorageStatement",Z.DoWhileStatement="DoWhileStatement",Z.WhileStatement="WhileStatement",Z.ForStatement="ForStatement",Z.BreakStatement="BreakStatement",Z.ContinueStatement="ContinueStatement",Z.IfStatement="IfStatement",Z.ImportedFunctionStatement="ImportedFunctionStatement"}(Fl||(Fl={})),function(Z){Z.Input="Input",Z.Output="Output",Z.Uniform="Uniform",Z.Workgroup="Workgroup",Z.UniformConstant="UniformConstant",Z.Image="Image",Z.StorageBuffer="StorageBuffer",Z.Private="Private",Z.Function="Function"}(_a||(_a={})),function(Z){Z.GLSL100="GLSL100",Z.GLSL450="GLSL450",Z.WGSL="WGSL"}(Ks||(Ks={}));function ja(Z){return Z===void 0?0:Z>360||Z<-360?Z%360:Z}function Va(Z,U,w){return Or()(Z)?jn.e.fromValues(Z,U,w):Z.length===3?jn.e.clone(Z):jn.e.fromValues(Z[0],Z[1],Z[2])}var Js,mc,bc,xc,Gl,So,Du,Wa,Ul=function(){function Z(U,w){xi()(this,Z),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=U,this.matrix=jn.b.clone(w.matrix),this.right=jn.e.clone(w.right),this.up=jn.e.clone(w.up),this.forward=jn.e.clone(w.forward),this.position=jn.e.clone(w.position),this.focalPoint=jn.e.clone(w.focalPoint),this.distanceVector=jn.e.clone(w.distanceVector),this.azimuth=w.azimuth,this.elevation=w.elevation,this.roll=w.roll,this.relAzimuth=w.relAzimuth,this.relElevation=w.relElevation,this.relRoll=w.relRoll,this.dollyingStep=w.dollyingStep,this.distance=w.distance}return Ri()(Z,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(w){w.matrix=jn.b.copy(w.matrix,this.matrix),w.right=jn.e.copy(w.right,this.right),w.up=jn.e.copy(w.up,this.up),w.forward=jn.e.copy(w.forward,this.forward),w.position=jn.e.copy(w.position,this.position),w.focalPoint=jn.e.copy(w.focalPoint,this.focalPoint),w.distanceVector=jn.e.copy(w.distanceVector,this.distanceVector),w.azimuth=this.azimuth,w.elevation=this.elevation,w.roll=this.roll,w.relAzimuth=this.relAzimuth,w.relElevation=this.relElevation,w.relRoll=this.relRoll,w.dollyingStep=this.dollyingStep,w.distance=this.distance}}]),Z}();(function(Z){Z.ORBITING="ORBITING",Z.EXPLORING="EXPLORING",Z.TRACKING="TRACKING"})(So||(So={})),function(Z){Z.DEFAULT="DEFAULT",Z.ROTATIONAL="ROTATIONAL",Z.TRANSLATIONAL="TRANSLATIONAL",Z.CINEMATIC="CINEMATIC"}(Du||(Du={})),function(Z){Z.ORTHOGRAPHIC="ORTHOGRAPHIC",Z.PERSPECTIVE="PERSPECTIVE"}(Wa||(Wa={}));var zl,_l,Vl,Wl,ku,Xl,Yl,Ia=Math.PI/180,is=180/Math.PI,Hl=(Js=Object(Ur.injectable)(),mc=Object(Ur.inject)(yr.InteractorService),Js((xc=function(){function Z(){xi()(this,Z),this.matrix=jn.b.create(),this.right=jn.e.fromValues(1,0,0),this.up=jn.e.fromValues(0,1,0),this.forward=jn.e.fromValues(0,0,1),this.position=jn.e.fromValues(0,0,1),this.focalPoint=jn.e.fromValues(0,0,0),this.distanceVector=jn.e.fromValues(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.rotateWorld=!1,di()(this,"interactor",Gl,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=jn.b.create(),this.view=void 0,this.following=void 0,this.type=So.EXPLORING,this.trackingMode=Du.DEFAULT,this.projectionMode=Wa.PERSPECTIVE,this.frustum=new sr,this.landmarks=[],this.landmarkAnimationID=void 0}return Ri()(Z,[{key:"clone",value:function(){var w=new Z;return w.setType(this.type,void 0),w.interactor=this.interactor,w}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(w,L){return this.type=w,this.type===So.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===So.TRACKING&&L!==void 0&&this.setTrackingMode(L),this}},{key:"setProjectionMode",value:function(w){return this.projectionMode=w,this}},{key:"setTrackingMode",value:function(w){if(this.type!==So.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=w,this}},{key:"setWorldRotation",value:function(w){this.rotateWorld=w,this._getAngles()}},{key:"getViewTransform",value:function(){return jn.b.invert(jn.b.create(),this.matrix)}},{key:"setMatrix",value:function(w){return this.matrix=w,this._update(),this}},{key:"setAspect",value:function(w){return this.setPerspective(this.near,this.far,this.fov,w),this}},{key:"setViewOffset",value:function(w,L,Q,It,Rt,K){return this.aspect=w/L,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=w,this.view.fullHeight=L,this.view.offsetX=Q,this.view.offsetY=It,this.view.width=Rt,this.view.height=K,this.projectionMode===Wa.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===Wa.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(w,L,Q,It){return this.projectionMode=Wa.PERSPECTIVE,this.fov=Q,this.near=w,this.far=L,this.aspect=It,jn.b.perspective(this.perspective,this.fov*Ia,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(w,L,Q,It,Rt,K){this.projectionMode=Wa.ORTHOGRAPHIC,this.rright=L,this.left=w,this.top=Q,this.bottom=It,this.near=Rt,this.far=K;var Dt=(this.rright-this.left)/(2*this.zoom),Qt=(this.top-this.bottom)/(2*this.zoom),qt=(this.rright+this.left)/2,xe=(this.top+this.bottom)/2,Ie=qt-Dt,Ye=qt+Dt,Ne=xe+Qt,He=xe-Qt;if(this.view!==void 0&&this.view.enabled){var Je=(this.rright-this.left)/this.view.fullWidth/this.zoom,Ge=(this.top-this.bottom)/this.view.fullHeight/this.zoom;Ye=(Ie+=Je*this.view.offsetX)+Je*this.view.width,He=(Ne-=Ge*this.view.offsetY)-Ge*this.view.height}return jn.b.ortho(this.perspective,Ie,Ye,Ne,He,Rt,K),this}},{key:"setPosition",value:function(w,L,Q){return this._setPosition(w,L,Q),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(w,L,Q){var It=jn.e.fromValues(0,1,0);if(this.focalPoint=Va(w,L,Q),this.trackingMode===Du.CINEMATIC){var Rt=jn.e.subtract(jn.e.create(),this.focalPoint,this.position);w=Rt[0],L=Rt[1],Q=Rt[2];var K=jn.e.length(Rt),Dt=Math.asin(L/K)*is,Qt=90+Math.atan2(Q,w)*is,qt=jn.b.create();jn.b.rotateY(qt,qt,Qt*Ia),jn.b.rotateX(qt,qt,Dt*Ia),It=jn.e.transformMat4(jn.e.create(),[0,1,0],qt)}return jn.b.invert(this.matrix,jn.b.lookAt(jn.b.create(),this.position,this.focalPoint,It)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(w){if(!(this.distance===w||w<0)){this.distance=w,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var L=jn.e.create();w=this.distance;var Q=this.forward,It=this.focalPoint;return L[0]=w*Q[0]+It[0],L[1]=w*Q[1]+It[1],L[2]=w*Q[2]+It[2],this._setPosition(L),this}}},{key:"changeAzimuth",value:function(w){return this.setAzimuth(this.azimuth+w),this}},{key:"changeElevation",value:function(w){return this.setElevation(this.elevation+w),this}},{key:"changeRoll",value:function(w){return this.setRoll(this.roll+w),this}},{key:"setAzimuth",value:function(w){return this.azimuth=ja(w),this.computeMatrix(),this._getAxes(),this.type===So.ORBITING||this.type===So.EXPLORING?this._getPosition():this.type===So.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(w){return this.elevation=ja(w),this.computeMatrix(),this._getAxes(),this.type===So.ORBITING||this.type===So.EXPLORING?this._getPosition():this.type===So.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(w){return this.roll=ja(w),this.computeMatrix(),this._getAxes(),this.type===So.ORBITING||this.type===So.EXPLORING?this._getPosition():this.type===So.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(w,L,Q){if(this.type===So.EXPLORING){w=ja(w),L=ja(L),Q=ja(Q);var It=jn.c.setAxisAngle(jn.c.create(),[1,0,0],(this.rotateWorld?1:-1)*L*Ia),Rt=jn.c.setAxisAngle(jn.c.create(),[0,1,0],(this.rotateWorld?1:-1)*w*Ia),K=jn.c.setAxisAngle(jn.c.create(),[0,0,1],Q*Ia),Dt=jn.c.multiply(jn.c.create(),Rt,It);Dt=jn.c.multiply(jn.c.create(),Dt,K);var Qt=jn.b.fromQuat(jn.b.create(),Dt);jn.b.translate(this.matrix,this.matrix,[0,0,-this.distance]),jn.b.multiply(this.matrix,this.matrix,Qt),jn.b.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+L)>90)return;this.relElevation=ja(L),this.relAzimuth=ja(w),this.relRoll=ja(Q),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===So.ORBITING||this.type===So.EXPLORING?this._getPosition():this.type===So.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(w,L){var Q=Va(w,L,0),It=jn.e.clone(this.position);return jn.e.add(It,It,jn.e.scale(jn.e.create(),this.right,Q[0])),jn.e.add(It,It,jn.e.scale(jn.e.create(),this.up,Q[1])),this._setPosition(It),this}},{key:"dolly",value:function(w){var L=this.forward,Q=jn.e.clone(this.position),It=w*this.dollyingStep;return Q[0]+=It*L[0],Q[1]+=It*L[1],Q[2]+=It*L[2],this._setPosition(Q),this.type===So.ORBITING||this.type===So.EXPLORING?this._getDistance():this.type===So.TRACKING&&jn.e.add(this.focalPoint,Q,this.distanceVector),this}},{key:"createLandmark",value:function(w,L){var Q=this.clone();Q.setPosition(L.position),Q.setFocalPoint(L.focalPoint),L.roll!==void 0&&Q.setRoll(L.roll);var It=new Ul(w,Q);return this.landmarks.push(It),It}},{key:"setLandmark",value:function(w){var L=new Ul(w,this);return this.landmarks.push(L),this}},{key:"gotoLandmark",value:function(w){var L=this,Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,It=this.landmarks.find(function(xe){return xe.name===w});if(It){if(Q===0)return void It.retrieve(this);this.landmarkAnimationID!==void 0&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var Rt,K=It.getPosition(),Dt=It.getFocalPoint(),Qt=It.getRoll(),qt=function xe(Ie){Rt===void 0&&(Rt=Ie);var Ye,Ne=Ie-Rt,He=(1-Math.cos(Ne/Q*Math.PI))/2,Je=jn.e.create(),Ge=jn.e.create();if(jn.e.lerp(Je,L.focalPoint,Dt,He),jn.e.lerp(Ge,L.position,K,He),Ye=L.roll*(1-He)+Qt*He,L.setFocalPoint(Je),L.setPosition(Ge),L.setRoll(Ye),L.computeMatrix(),!(jn.e.dist(Je,Dt)+jn.e.dist(Ge,K)>.01))return L.setFocalPoint(Je),L.setPosition(Ge),L.setRoll(Ye),L.computeMatrix(),void L.interactor.connect();Ne<Q&&(L.landmarkAnimationID=window.requestAnimationFrame(xe))};window.requestAnimationFrame(qt)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var w,L,Q=jn.c.setAxisAngle(jn.c.create(),[0,0,1],this.roll*Ia);jn.b.identity(this.matrix),w=jn.c.setAxisAngle(jn.c.create(),[1,0,0],(this.rotateWorld&&this.type!==So.TRACKING||this.type===So.TRACKING?1:-1)*this.elevation*Ia),L=jn.c.setAxisAngle(jn.c.create(),[0,1,0],(this.rotateWorld&&this.type!==So.TRACKING||this.type===So.TRACKING?1:-1)*this.azimuth*Ia);var It=jn.c.multiply(jn.c.create(),L,w);It=jn.c.multiply(jn.c.create(),It,Q);var Rt=jn.b.fromQuat(jn.b.create(),It);this.type===So.ORBITING||this.type===So.EXPLORING?(jn.b.translate(this.matrix,this.matrix,this.focalPoint),jn.b.multiply(this.matrix,this.matrix,Rt),jn.b.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===So.TRACKING&&(jn.b.translate(this.matrix,this.matrix,this.position),jn.b.multiply(this.matrix,this.matrix,Rt))}},{key:"_setPosition",value:function(w,L,Q){this.position=Va(w,L,Q);var It=this.matrix;It[12]=this.position[0],It[13]=this.position[1],It[14]=this.position[2],It[15]=1}},{key:"_getAxes",value:function(){jn.e.copy(this.right,Va(jn.f.transformMat4(jn.f.create(),[1,0,0,0],this.matrix))),jn.e.copy(this.up,Va(jn.f.transformMat4(jn.f.create(),[0,1,0,0],this.matrix))),jn.e.copy(this.forward,Va(jn.f.transformMat4(jn.f.create(),[0,0,1,0],this.matrix))),jn.e.normalize(this.right,this.right),jn.e.normalize(this.up,this.up),jn.e.normalize(this.forward,this.forward)}},{key:"_getAngles",value:function(){var w=this.distanceVector[0],L=this.distanceVector[1],Q=this.distanceVector[2],It=jn.e.length(this.distanceVector);if(It===0)return this.elevation=0,void(this.azimuth=0);this.type===So.TRACKING||this.rotateWorld?(this.elevation=Math.asin(L/It)*is,this.azimuth=Math.atan2(-w,-Q)*is):(this.elevation=-Math.asin(L/It)*is,this.azimuth=-Math.atan2(-w,-Q)*is)}},{key:"_getPosition",value:function(){jn.e.copy(this.position,Va(jn.f.transformMat4(jn.f.create(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){jn.e.transformMat3(this.distanceVector,[0,0,-this.distance],jn.a.fromMat4(jn.a.create(),this.matrix)),jn.e.add(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=jn.e.subtract(jn.e.create(),this.focalPoint,this.position),this.distance=jn.e.length(this.distanceVector),this.dollyingStep=this.distance/100}}]),Z}(),Gl=Mi()(xc.prototype,"interactor",[mc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bc=xc))||bc),Kl=e(44),Ru=e.n(Kl),Lh=e(26),Jl=e.n(Lh),Wr=e(7);function Oc(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Ql(Z,U){var w=Object.keys(Z);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Z);U&&(L=L.filter(function(Q){return Object.getOwnPropertyDescriptor(Z,Q).enumerable})),w.push.apply(w,L)}return w}function Nu(Z){for(var U=1;U<arguments.length;U++){var w=arguments[U]!=null?arguments[U]:{};U%2?Ql(Object(w),!0).forEach(function(L){mr()(Z,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(w)):Ql(Object(w)).forEach(function(L){Object.defineProperty(Z,L,Object.getOwnPropertyDescriptor(w,L))})}return Z}var Zl,Qs,$l,ql,tf,ef,nf,Xa,rf,of,af,sf,Lu,uf,Pa,Es,xa,qo,Zs,Ya,os,Bu,Oa,Ko,Bo,Sa,wa,Fu,cf=(zl=Object(Ur.injectable)(),_l=Object(Ur.inject)(yr.RenderEngine),Vl=Object(Ur.inject)(yr.ConfigService),zl((ku=function(){function Z(){xi()(this,Z),di()(this,"engine",Xl,this),di()(this,"configService",Yl,this),this.entity=na(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}var U,w,L;return Ri()(Z,[{key:"init",value:function(){var It=this.configService.get(),Rt=It.canvas,K=It.engineOptions;this.initPromise=this.engine.init(Nu({canvas:Rt||Oc(),swapChainFormat:Wr.TextureFormat.BGRA8Unorm,antialiasing:!1},K))}},{key:"setBundle",value:function(It){this.compiledBundle=JSON.parse(JSON.stringify(It))}},{key:"setDispatch",value:function(It){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=It),this}},{key:"setMaxIteration",value:function(It){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=It),this}},{key:"setBinding",value:function(It,Rt){var K=this;if(typeof It=="string"){var Dt=Or()(Rt)||Ru()(Rt)||Jl()(Rt);if(this.compiledBundle&&this.compiledBundle.context){var Qt=this.compiledBundle.context.defines.find(function(xe){return xe.name===It});if(Qt)return Qt.value=Rt,this;var qt=this.compiledBundle.context.uniforms.find(function(xe){return xe.name===It});qt&&(Dt?(qt.data=Rt,qt.isReferer=!1,qt.storageClass===_a.Uniform?this.model&&this.model.updateUniform(It,Rt):this.model&&this.model.updateBuffer(It,Rt)):(qt.isReferer=!0,qt.data=Rt))}}else Object.keys(It).forEach(function(xe){K.setBinding(xe,It[xe])});return this}},{key:"execute",value:(L=eo()(ui.a.mark(function Q(){var It,Rt,K=this,Dt=arguments;return ui.a.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:if(It=Dt.length>0&&Dt[0]!==void 0?Dt[0]:1,!this.dirty){Qt.next=6;break}return this.compiledBundle.context&&(It>1?this.compiledBundle.context.maxIteration=It:this.compiledBundle.context.maxIteration++),Qt.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(qt){return qt.isReferer}).forEach(function(qt){var xe=qt.data,Ie=qt.name;K.model.confirmInput(xe.model,Ie)}),Rt=0;Rt<It;Rt++)this.model.run();return this.engine.endFrame(),Qt.abrupt("return",this);case 12:case"end":return Qt.stop()}},Q,this)})),function(){return L.apply(this,arguments)})},{key:"getOutput",value:(w=eo()(ui.a.mark(function Q(){return ui.a.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:return It.abrupt("return",this.model.readData());case 1:case"end":return It.stop()}},Q,this)})),function(){return w.apply(this,arguments)})},{key:"compile",value:(U=eo()(ui.a.mark(function Q(){var It,Rt,K;return ui.a.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return Dt.next=2,this.initPromise;case 2:return It=Nu({},this.compiledBundle.context),Rt=this.engine.supportWebGPU?this.engine.useWGSL?Ks.WGSL:Ks.GLSL450:Ks.GLSL100,K=this.compiledBundle.shaders[Rt],It.defines.filter(function(Qt){return Qt.runtime}).forEach(function(Qt){var qt="".concat("__DefineValuePlaceholder__").concat(Qt.name);K=K.replace(qt,"".concat(Qt.value))}),It.shader=K,It.uniforms.forEach(function(Qt){if(!Qt.data&&Qt.storageClass===_a.StorageBuffer){var qt=1;Qt.type===za.FloatArray?qt=1:Qt.type===za.Vector4FloatArray&&(qt=4),Qt.data=new Float32Array(It.output.length*qt).fill(0)}}),this.compiledBundle.context=It,Dt.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=Dt.sent;case 12:case"end":return Dt.stop()}},Q,this)})),function(){return U.apply(this,arguments)})}]),Z}(),Xl=Mi()(ku.prototype,"engine",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yl=Mi()(ku.prototype,"configService",[Vl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wl=ku))||Wl),Ha=(Zl=Object(Ur.injectable)(),Qs=Object(Ur.inject)(yr.MeshComponentManager),$l=Object(Ur.inject)(yr.CullableComponentManager),ql=Object(Ur.inject)(yr.TransformComponentManager),tf=Object(Ur.inject)(yr.Systems),ef=Object(Ur.named)(yr.SceneGraphSystem),Zl((uf=Lu=function(){function Z(){xi()(this,Z),this.attributes={},this.config=void 0,di()(this,"mesh",rf,this),di()(this,"cullable",of,this),di()(this,"transform",af,this),di()(this,"sceneGraphSystem",sf,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return Ri()(Z,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(w){this.config=w}},{key:"setEntity",value:function(w){this.entity=w,this.cullable.create(w),this.meshComponent=this.mesh.create(w),this.transformComponent=this.transform.create(w),this.onEntityCreated()}},{key:"setMaterial",value:function(w){return this.meshComponent.material=w,this}},{key:"setGeometry",value:function(w){return this.meshComponent.geometry=w,this}},{key:"setAttributes",value:function(w){var L=this;Object.keys(w).forEach(function(Q){w[Q]!==void 0&&w[Q]!==L.attributes[Q]&&(L.onAttributeChanged({name:Q,data:w[Q]}),L.attributes[Q]=w[Q])})}},{key:"setVisible",value:function(w){return this.meshComponent.visible=w,this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(w){return this.sceneGraphSystem.attach(this.entity,w.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(w){var L=w.name,Q=w.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(L),Q)}},{key:"convertAttributeName2UniformName",value:function(w){return w}}]),Z}(),Lu.POINT="point",Lu.LINE="line",Lu.GRID="grid",Xa=uf,rf=Mi()(Xa.prototype,"mesh",[Qs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),of=Mi()(Xa.prototype,"cullable",[$l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),af=Mi()(Xa.prototype,"transform",[ql],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sf=Mi()(Xa.prototype,"sceneGraphSystem",[tf,ef],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nf=Xa))||nf),Bh=e(253),Fh=e.n(Bh),Gh=function(){function Z(U,w){xi()(this,Z),this.attribute=void 0,this.buffer=void 0;var L=w.buffer,Q=w.offset,It=w.stride,Rt=w.normalized,K=w.size,Dt=w.divisor;this.buffer=L,this.attribute={buffer:L.get(),offset:Q||0,stride:It||0,normalized:Rt||!1,divisor:Dt||0},K&&(this.attribute.size=K)}return Ri()(Z,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(w){this.buffer.subData(w)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),Z}(),Uh=(Pa={},mr()(Pa,Jn.POINTS,"points"),mr()(Pa,Jn.LINES,"lines"),mr()(Pa,Jn.LINE_LOOP,"line loop"),mr()(Pa,Jn.LINE_STRIP,"line strip"),mr()(Pa,Jn.TRIANGLES,"triangles"),mr()(Pa,Jn.TRIANGLE_FAN,"triangle fan"),mr()(Pa,Jn.TRIANGLE_STRIP,"triangle strip"),Pa),lf=(Es={},mr()(Es,Jn.STATIC_DRAW,"static"),mr()(Es,Jn.DYNAMIC_DRAW,"dynamic"),mr()(Es,Jn.STREAM_DRAW,"stream"),Es),Sc=(xa={},mr()(xa,Jn.BYTE,"int8"),mr()(xa,Jn.UNSIGNED_INT,"int16"),mr()(xa,Jn.INT,"int32"),mr()(xa,Jn.UNSIGNED_BYTE,"uint8"),mr()(xa,Jn.UNSIGNED_SHORT,"uint16"),mr()(xa,Jn.UNSIGNED_INT,"uint32"),mr()(xa,Jn.FLOAT,"float"),xa),zh=(qo={},mr()(qo,Jn.ALPHA,"alpha"),mr()(qo,Jn.LUMINANCE,"luminance"),mr()(qo,Jn.LUMINANCE_ALPHA,"luminance alpha"),mr()(qo,Jn.RGB,"rgb"),mr()(qo,Jn.RGBA,"rgba"),mr()(qo,Jn.RGBA4,"rgba4"),mr()(qo,Jn.RGB5_A1,"rgb5 a1"),mr()(qo,Jn.RGB565,"rgb565"),mr()(qo,Jn.DEPTH_COMPONENT,"depth"),mr()(qo,Jn.DEPTH_STENCIL,"depth stencil"),qo),ff=(Zs={},mr()(Zs,Jn.DONT_CARE,"dont care"),mr()(Zs,Jn.NICEST,"nice"),mr()(Zs,Jn.FASTEST,"fast"),Zs),hf=(Ya={},mr()(Ya,Jn.NEAREST,"nearest"),mr()(Ya,Jn.LINEAR,"linear"),mr()(Ya,Jn.LINEAR_MIPMAP_LINEAR,"mipmap"),mr()(Ya,Jn.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),mr()(Ya,Jn.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),mr()(Ya,Jn.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Ya),$s=(os={},mr()(os,Jn.REPEAT,"repeat"),mr()(os,Jn.CLAMP_TO_EDGE,"clamp"),mr()(os,Jn.MIRRORED_REPEAT,"mirror"),os),Gu=(Bu={},mr()(Bu,Jn.NONE,"none"),mr()(Bu,Jn.BROWSER_DEFAULT_WEBGL,"browser"),Bu),_h=(Oa={},mr()(Oa,Jn.NEVER,"never"),mr()(Oa,Jn.ALWAYS,"always"),mr()(Oa,Jn.LESS,"less"),mr()(Oa,Jn.LEQUAL,"lequal"),mr()(Oa,Jn.GREATER,"greater"),mr()(Oa,Jn.GEQUAL,"gequal"),mr()(Oa,Jn.EQUAL,"equal"),mr()(Oa,Jn.NOTEQUAL,"notequal"),Oa),df=(Ko={},mr()(Ko,Jn.FUNC_ADD,"add"),mr()(Ko,Jn.MIN_EXT,"min"),mr()(Ko,Jn.MAX_EXT,"max"),mr()(Ko,Jn.FUNC_SUBTRACT,"subtract"),mr()(Ko,Jn.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Ko),qs=(Bo={},mr()(Bo,Jn.ZERO,"zero"),mr()(Bo,Jn.ONE,"one"),mr()(Bo,Jn.SRC_COLOR,"src color"),mr()(Bo,Jn.ONE_MINUS_SRC_COLOR,"one minus src color"),mr()(Bo,Jn.SRC_ALPHA,"src alpha"),mr()(Bo,Jn.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),mr()(Bo,Jn.DST_COLOR,"dst color"),mr()(Bo,Jn.ONE_MINUS_DST_COLOR,"one minus dst color"),mr()(Bo,Jn.DST_ALPHA,"dst alpha"),mr()(Bo,Jn.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),mr()(Bo,Jn.CONSTANT_COLOR,"constant color"),mr()(Bo,Jn.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),mr()(Bo,Jn.CONSTANT_ALPHA,"constant alpha"),mr()(Bo,Jn.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),mr()(Bo,Jn.SRC_ALPHA_SATURATE,"src alpha saturate"),Bo),Uu=(Sa={},mr()(Sa,Jn.NEVER,"never"),mr()(Sa,Jn.ALWAYS,"always"),mr()(Sa,Jn.LESS,"less"),mr()(Sa,Jn.LEQUAL,"lequal"),mr()(Sa,Jn.GREATER,"greater"),mr()(Sa,Jn.GEQUAL,"gequal"),mr()(Sa,Jn.EQUAL,"equal"),mr()(Sa,Jn.NOTEQUAL,"notequal"),Sa),Ka=(wa={},mr()(wa,Jn.ZERO,"zero"),mr()(wa,Jn.KEEP,"keep"),mr()(wa,Jn.REPLACE,"replace"),mr()(wa,Jn.INVERT,"invert"),mr()(wa,Jn.INCR,"increment"),mr()(wa,Jn.DECR,"decrement"),mr()(wa,Jn.INCR_WRAP,"increment wrap"),mr()(wa,Jn.DECR_WRAP,"decrement wrap"),wa),vf=(Fu={},mr()(Fu,Jn.FRONT,"front"),mr()(Fu,Jn.BACK,"back"),Fu),Ja=function(){function Z(U,w){xi()(this,Z),this.buffer=void 0;var L=w.data,Q=w.usage,It=w.type;this.buffer=U.buffer({data:L,usage:lf[Q||Jn.STATIC_DRAW],type:Sc[It||Jn.UNSIGNED_BYTE]})}return Ri()(Z,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(w){var L=w.data,Q=w.offset;this.buffer.subdata(L,Q)}}]),Z}(),pf=e(23),No=e.n(pf);function gf(Z,U){var w=Object.keys(Z);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Z);U&&(L=L.filter(function(Q){return Object.getOwnPropertyDescriptor(Z,Q).enumerable})),w.push.apply(w,L)}return w}function Da(Z){for(var U=1;U<arguments.length;U++){var w=arguments[U]!=null?arguments[U]:{};U%2?gf(Object(w),!0).forEach(function(L){mr()(Z,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(w)):gf(Object(w)).forEach(function(L){Object.defineProperty(Z,L,Object.getOwnPropertyDescriptor(w,L))})}return Z}var yf=0,mf=function(){function Z(w,L){var Q=this;xi()(this,Z),this.reGl=w,this.context=L,this.entity=na(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var It={};this.context.uniforms.forEach(function(qt){var xe=qt.name,Ie=qt.type,Ye=qt.data,Ne=qt.isReferer,He=qt.storageClass;if(He===_a.StorageBuffer){if(Ne)Q.textureCache[xe]={data:void 0},It["".concat(xe,"Size")]=function(){return Ye.compiledBundle.context.output.textureSize};else{Q.textureCache[xe]=Q.calcDataTexture(xe,Ie,Ye);var Je=Q.textureCache[xe],Ge=Je.textureWidth,qe=Je.isOutput;It["".concat(xe,"Size")]=[Ge,Ge],qe&&(Q.outputTextureName=xe,Q.context.needPingpong&&(Q.outputTextureName="".concat(xe,"Output"),Q.textureCache[Q.outputTextureName]=Q.calcDataTexture(xe,Ie,Ye)))}It[xe]=function(){return Q.textureCache[xe].texture}}else if(He===_a.Uniform){if(Ye&&(Array.isArray(Ye)||Ru()(Ye))&&Ye.length>16)throw new Error("invalid data type ".concat(Ie));It[xe]=function(){return qt.data}}});var Rt=this.getOuputDataTexture(),K=Rt.textureWidth,Dt=Rt.texelCount;It.u_OutputTextureSize=[K,K],It.u_OutputTexelCount=Dt,this.context.output.textureSize=[K,K];var Qt={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:It,vert:`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(Qt)}var U;return Ri()(Z,[{key:"run",value:function(){var L=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){L.computeCommand()})}},{key:"readData",value:(U=eo()(ui.a.mark(function w(){var L,Q,It,Rt,K,Dt,Qt,qt,xe=this;return ui.a.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){L=xe.reGl.read()}),!L){Ie.next=6;break}if(Q=this.getOuputDataTexture(),It=Q.originalDataLength,Rt=Q.elementsPerTexel,K=Q.typedArrayConstructor,Dt=K===void 0?Float32Array:K,Qt=[],Rt!==4)for(qt=0;qt<L.length;qt+=4)Rt===1?Qt.push(L[qt]):Rt===2?Qt.push(L[qt],L[qt+1]):Qt.push(L[qt],L[qt+1],L[qt+2]);else Qt=L;return Ie.abrupt("return",new Dt(Qt.slice(0,It)));case 6:return Ie.abrupt("return",new Float32Array);case 7:case"end":return Ie.stop()}},w,this)})),function(){return U.apply(this,arguments)})},{key:"confirmInput",value:function(L,Q){var It;this.entity===L.entity?(this.dynamicPingpong=!0,It=this):It=L,this.textureCache[Q].id=It.getOuputDataTexture().id,this.textureCache[Q].texture=It.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(L,Q){var It=this.context.uniforms.find(function(Qt){return Qt.name===L});if(It){var Rt=this.calcDataTexture(L,It.type,Q),K=Rt.texture,Dt=Rt.data;this.textureCache[L].data=Dt,this.textureCache[L].texture=K}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var L=this.context.output.name;this.textureCache[L].id=this.getOuputDataTexture().id,this.textureCache[L].texture=this.getOuputDataTexture().texture}var Q=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=Q}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var L=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=L}},{key:"cloneDataTexture",value:function(L){var Q=L.data,It=L.textureWidth;return Da(Da({},L),{},{id:yf++,texture:this.reGl.texture({width:It,height:It,data:Q,type:"float"})})}},{key:"calcDataTexture",value:function(L,Q,It){var Rt=1;Q===za.Vector4FloatArray&&(Rt=4);for(var K=[],Dt=0;Dt<It.length;Dt+=Rt)Rt===1?K.push(It[Dt],0,0,0):Rt===2?K.push(It[Dt],It[Dt+1],0,0):Rt===3?K.push(It[Dt],It[Dt+1],It[Dt+2],0):Rt===4&&K.push(It[Dt],It[Dt+1],It[Dt+2],It[Dt+3]);var Qt=It.length,qt=Math.ceil(Qt/Rt),xe=Math.ceil(Math.sqrt(qt)),Ie=xe*xe;qt<Ie&&K.push.apply(K,No()(new Array(4*(Ie-qt)).fill(0)));var Ye=this.reGl.texture({width:xe,height:xe,data:K,type:"float"});return{id:yf++,data:K,originalDataLength:Qt,typedArrayConstructor:Ru()(It)?It.constructor:void 0,textureWidth:xe,texture:Ye,texelCount:qt,elementsPerTexel:Rt,isOutput:L===this.context.output.name}}}]),Z}(),bf=function(){function Z(U,w){xi()(this,Z),this.elements=void 0;var L=w.data,Q=w.usage,It=w.type,Rt=w.count;this.elements=U.elements({data:L,usage:lf[Q||Jn.STATIC_DRAW],type:Sc[It||Jn.UNSIGNED_BYTE],count:Rt})}return Ri()(Z,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(w){var L=w.data;this.elements.subdata(L)}},{key:"destroy",value:function(){this.elements.destroy()}}]),Z}(),Vh=function(){function Z(U,w){xi()(this,Z),this.framebuffer=void 0;var L=w.width,Q=w.height,It=w.color,Rt=w.colors,K=(w.depth,w.stencil,{width:L,height:Q});Array.isArray(Rt)&&(K.colors=Rt.map(function(Dt){return Dt.get()})),It&&typeof It!="boolean"&&(K.color=It.get()),this.framebuffer=U.framebuffer(K)}return Ri()(Z,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(w){var L=w.width,Q=w.height;this.framebuffer.resize(L,Q)}}]),Z}(),Wh=e(90),Xh=e.n(Wh),xf=e(151),zu=e.n(xf);function tu(Z){var U={};return Object.keys(Z).forEach(function(w){(function L(Q,It,Rt,K){if(It===null||typeof It=="number"||typeof It=="boolean"||Array.isArray(It)&&typeof It[0]=="number"||Ru()(It)||It===""||"resize"in It)return void(Rt["".concat(K&&K+".").concat(Q)]=It);zu()(It)&&Object.keys(It).forEach(function(Dt){L(Dt,It[Dt],Rt,"".concat(K&&K+".").concat(Q))}),Array.isArray(It)&&It.forEach(function(Dt,Qt){Object.keys(Dt).forEach(function(qt){L(qt,Dt[qt],Rt,"".concat(K&&K+".").concat(Q,"[").concat(Qt,"]"))})})})(w,Z[w],U,"")}),U}function Of(Z,U){var w=Object.keys(Z);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Z);U&&(L=L.filter(function(Q){return Object.getOwnPropertyDescriptor(Z,Q).enumerable})),w.push.apply(w,L)}return w}function Ms(Z){for(var U=1;U<arguments.length;U++){var w=arguments[U]!=null?arguments[U]:{};U%2?Of(Object(w),!0).forEach(function(L){mr()(Z,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(w)):Of(Object(w)).forEach(function(L){Object.defineProperty(Z,L,Object.getOwnPropertyDescriptor(w,L))})}return Z}var Sf,as,wf=function(){function Z(U,w){xi()(this,Z),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=U;var L=w.vs,Q=w.fs,It=w.attributes,Rt=w.uniforms,K=w.primitive,Dt=w.count,Qt=w.elements,qt=w.depth,xe=w.blend,Ie=w.stencil,Ye=w.cull,Ne=w.instances,He=w.scissor,Je=w.viewport,Ge={};Rt&&(this.uniforms=tu(Rt),Object.keys(Rt).forEach(function(Dn){Ge[Dn]=U.prop(Dn)}));var qe={};Object.keys(It).forEach(function(Dn){qe[Dn]=It[Dn].get()});var yn={attributes:qe,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(Q),uniforms:Ge,vert:L,primitive:Uh[K===void 0?Jn.TRIANGLES:K]};Ne&&(yn.instances=Ne),Dt&&(yn.count=Dt),Qt&&(yn.elements=Qt.get()),He&&(yn.scissor=He),Je&&(yn.viewport=Je),this.initDepthDrawParams({depth:qt},yn),this.initBlendDrawParams({blend:xe},yn),this.initStencilDrawParams({stencil:Ie},yn),this.initCullDrawParams({cull:Ye},yn),this.drawCommand=U(yn)}return Ri()(Z,[{key:"addUniforms",value:function(w){this.uniforms=Ms(Ms({},this.uniforms),tu(w))}},{key:"draw",value:function(w){var L=Ms(Ms({},this.uniforms),tu(w.uniforms||{})),Q={};Object.keys(L).forEach(function(It){var Rt=Xh()(L[It]);Rt==="boolean"||Rt==="number"||Array.isArray(L[It])||L[It].BYTES_PER_ELEMENT?Q[It]=L[It]:Q[It]=L[It].get()}),this.drawCommand(Q)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(w,L){var Q=w.depth;Q&&(L.depth={enable:Q.enable===void 0||!!Q.enable,mask:Q.mask===void 0||!!Q.mask,func:_h[Q.func||Jn.LESS],range:Q.range||[0,1]})}},{key:"initBlendDrawParams",value:function(w,L){var Q=w.blend;if(Q){var It=Q.enable,Rt=Q.func,K=Q.equation,Dt=Q.color,Qt=Dt===void 0?[0,0,0,0]:Dt;L.blend={enable:!!It,func:{srcRGB:qs[Rt&&Rt.srcRGB||Jn.SRC_ALPHA],srcAlpha:qs[Rt&&Rt.srcAlpha||Jn.SRC_ALPHA],dstRGB:qs[Rt&&Rt.dstRGB||Jn.ONE_MINUS_SRC_ALPHA],dstAlpha:qs[Rt&&Rt.dstAlpha||Jn.ONE_MINUS_SRC_ALPHA]},equation:{rgb:df[K&&K.rgb||Jn.FUNC_ADD],alpha:df[K&&K.alpha||Jn.FUNC_ADD]},color:Qt}}}},{key:"initStencilDrawParams",value:function(w,L){var Q=w.stencil;if(Q){var It=Q.enable,Rt=Q.mask,K=Rt===void 0?-1:Rt,Dt=Q.func,Qt=Dt===void 0?{cmp:Jn.ALWAYS,ref:0,mask:-1}:Dt,qt=Q.opFront,xe=qt===void 0?{fail:Jn.KEEP,zfail:Jn.KEEP,zpass:Jn.KEEP}:qt,Ie=Q.opBack,Ye=Ie===void 0?{fail:Jn.KEEP,zfail:Jn.KEEP,zpass:Jn.KEEP}:Ie;L.stencil={enable:!!It,mask:K,func:Ms(Ms({},Qt),{},{cmp:Uu[Qt.cmp]}),opFront:{fail:Ka[xe.fail],zfail:Ka[xe.zfail],zpass:Ka[xe.zpass]},opBack:{fail:Ka[Ye.fail],zfail:Ka[Ye.zfail],zpass:Ka[Ye.zpass]}}}}},{key:"initCullDrawParams",value:function(w,L){var Q=w.cull;if(Q){var It=Q.enable,Rt=Q.face,K=Rt===void 0?Jn.BACK:Rt;L.cull={enable:!!It,face:vf[K]}}}}]),Z}(),Yh=function(){function Z(U,w){xi()(this,Z),this.texture=void 0,this.width=void 0,this.height=void 0;var L=w.data,Q=w.type,It=Q===void 0?Jn.UNSIGNED_BYTE:Q,Rt=w.width,K=w.height,Dt=w.flipY,Qt=Dt!==void 0&&Dt,qt=w.format,xe=qt===void 0?Jn.RGBA:qt,Ie=w.mipmap,Ye=Ie!==void 0&&Ie,Ne=w.wrapS,He=Ne===void 0?Jn.CLAMP_TO_EDGE:Ne,Je=w.wrapT,Ge=Je===void 0?Jn.CLAMP_TO_EDGE:Je,qe=w.aniso,yn=qe===void 0?0:qe,Dn=w.alignment,En=Dn===void 0?1:Dn,Ln=w.premultiplyAlpha,Zn=Ln!==void 0&&Ln,Qn=w.mag,qn=Qn===void 0?Jn.NEAREST:Qn,fr=w.min,br=fr===void 0?Jn.NEAREST:fr,gr=w.colorSpace,hr=gr===void 0?Jn.BROWSER_DEFAULT_WEBGL:gr;this.width=Rt,this.height=K;var Cr={width:Rt,height:K,type:Sc[It],format:zh[xe],wrapS:$s[He],wrapT:$s[Ge],mag:hf[qn],min:hf[br],alignment:En,flipY:Qt,colorSpace:Gu[hr],premultiplyAlpha:Zn,aniso:yn};L&&(Cr.data=L),typeof Ye=="number"?Cr.mipmap=ff[Ye]:typeof Ye=="boolean"&&(Cr.mipmap=Ye),this.texture=U.texture(Cr)}return Ri()(Z,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(w){var L=w.width,Q=w.height;this.texture.resize(L,Q),this.width=L,this.height=Q}},{key:"destroy",value:function(){this.texture.destroy()}}]),Z}(),Hh=Object(Ur.injectable)()(Sf=function(){function Z(){var w=this;xi()(this,Z),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var L=eo()(ui.a.mark(function Q(It){return ui.a.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return Rt.abrupt("return",new wf(w.gl,It));case 1:case"end":return Rt.stop()}},Q)}));return function(Q){return L.apply(this,arguments)}}(),this.createAttribute=function(L){return new Gh(w.gl,L)},this.createBuffer=function(L){return new Ja(w.gl,L)},this.createElements=function(L){return new bf(w.gl,L)},this.createTexture2D=function(L){return new Yh(w.gl,L)},this.createFramebuffer=function(L){return new Vh(w.gl,L)},this.useFramebuffer=function(L,Q){w.gl({framebuffer:L?L.get():null})(Q)},this.createComputeModel=function(){var L=eo()(ui.a.mark(function Q(It){return ui.a.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return Rt.abrupt("return",new mf(w.gl,It));case 1:case"end":return Rt.stop()}},Q)}));return function(Q){return L.apply(this,arguments)}}(),this.clear=function(L){var Q=L.color,It=L.depth,Rt=L.stencil,K=L.framebuffer,Dt=K===void 0?null:K,Qt={color:Q,depth:It,stencil:Rt};Qt.framebuffer=Dt===null?Dt:Dt.get(),w.gl.clear(Qt)},this.setScissor=function(L){w.gl&&w.gl._gl&&(L.enable&&L.box?(w.gl._gl.enable(Jn.SCISSOR_TEST),w.gl._gl.scissor(L.box.x,L.box.y,L.box.width,L.box.height)):w.gl._gl.disable(Jn.SCISSOR_TEST),w.gl._refresh())},this.viewport=function(L){var Q=L.x,It=L.y,Rt=L.width,K=L.height;w.gl&&w.gl._gl&&(w.gl._gl.viewport(Q,It,Rt,K),w.gl._refresh())},this.readPixels=function(L){var Q=L.framebuffer,It={x:L.x,y:L.y,width:L.width,height:L.height};return Q&&(It.framebuffer=Q.get()),w.gl.read(It)},this.getCanvas=function(){return w.$canvas},this.getGLContext=function(){return w.gl._gl},this.destroy=function(){w.gl&&(w.gl.destroy(),w.inited=!1)}}var U;return Ri()(Z,[{key:"init",value:(U=eo()(ui.a.mark(function w(L){return ui.a.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(!this.inited){Q.next=2;break}return Q.abrupt("return");case 2:return this.$canvas=L.canvas,Q.next=5,new Promise(function(It,Rt){Fh()({canvas:L.canvas,attributes:{alpha:!0,antialias:L.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(Dt,Qt){!Dt&&Qt||Rt(Dt),It(Qt)}})});case 5:this.gl=Q.sent,this.inited=!0;case 7:case"end":return Q.stop()}},w,this)})),function(w){return U.apply(this,arguments)})},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),Z}())||Sf;function Kh(Z,U,w,L){if(typeof window!="undefined"){var Q=document.getElementsByTagName("head")[0],It=document.createElement("script");It.setAttribute("type","text/javascript"),It.setAttribute("src",Z),L&&(It.id=L),It.onload=function(){U&&U()},It.onerror=function(Rt){w&&w("Unable to load script '".concat(Z,"'"),Rt)},Q.appendChild(It)}}function Jh(Z,U){return new Promise(function(w,L){Kh(Z,function(){w()},function(Q,It){L(It)})})}var Qh=function(){return Ef.apply(this,arguments)};function Ef(){return(Ef=eo()(ui.a.mark(function Z(){return ui.a.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(!as){U.next=2;break}return U.abrupt("return",as);case 2:return U.next=4,Jh("https://preview.babylonjs.com/glslang/glslang.js");case 4:return as=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),U.abrupt("return",as);case 6:case"end":return U.stop()}},Z)}))).apply(this,arguments)}var ka,da,ss,Jo,As,_u,eu,wc=function(){function Z(U,w){xi()(this,Z),this.engine=U,this.options=w,this.attribute=void 0,this.buffer=void 0;var L=w,Q=L.buffer,It=L.offset,Rt=L.stride,K=L.normalized,Dt=L.size,Qt=L.divisor,qt=L.arrayStride,xe=L.attributes,Ie=L.stepMode;this.buffer=Q,this.attribute={buffer:Q.get(),offset:It||0,stride:Rt||0,normalized:K||!1,divisor:Qt||0,arrayStride:qt||0,attributes:xe,stepMode:Ie||"vertex"},Dt&&(this.attribute.size=Dt)}return Ri()(Z,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(w){this.buffer.subData(w)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),Z}(),us=function(){function Z(U,w){xi()(this,Z),this.engine=U,this.options=w,this.buffer=void 0;var L=w,Q=L.data,It=L.usage;L.type,this.buffer=this.createBuffer(Q instanceof Array?new Float32Array(Q):Q,It||Wr.BufferUsage.Vertex|Wr.BufferUsage.CopyDst)}return Ri()(Z,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(w){var L=w.data,Q=w.offset;this.setSubData(this.buffer,Q,L instanceof Array?new Float32Array(L):L)}},{key:"createBuffer",value:function(w,L){var Q=w.byteLength%4,It={size:w.byteLength+Q,usage:L},Rt=this.engine.device.createBuffer(It);return this.setSubData(Rt,0,w),Rt}},{key:"setSubData",value:function(w,L,Q){($o?this.engine.device.getQueue():this.engine.device.defaultQueue).writeBuffer(w,L,Q)}}]),Z}(),Zh=e(92),nu=e.n(Zh),$h=function(){function Z(Q,It){xi()(this,Z),this.engine=Q,this.context=It,this.entity=na(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}var U,w,L;return Ri()(Z,[{key:"init",value:(L=eo()(ui.a.mark(function Q(){var It,Rt,K,Dt,Qt,qt,xe,Ie=this;return ui.a.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return Ye.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:It=Ye.sent,Rt=It.computeStage,K=this.context.uniforms.filter(function(Ne){return Ne.storageClass===_a.StorageBuffer}),Dt=this.context.uniforms.filter(function(Ne){return Ne.storageClass===_a.Uniform}),Qt=Dt.length?1:0,this.bindGroupEntries=[],Qt&&(qt=0,xe=[],Dt.forEach(function(Ne){if(Or()(Ne.data))Ie.uniformGPUBufferLayout.push({name:Ne.name,offset:qt}),qt+=4,xe.push(Ne.data);else{var He,Je=((He=Ne.data)===null||He===void 0?void 0:He.length)||1;Je===3&&(Je=4,Ne.data.push(0));var Ge=qt/4%4;if(Ge>0){var qe=4-Ge;if(Je>1&&Je<=qe)Je===2&&(qe===3&&(qt+=4,xe.push(0)),xe.push.apply(xe,No()(Ne.data)),Ie.uniformGPUBufferLayout.push({name:Ne.name,offset:qt}));else{for(var yn=0;yn<qe;yn++)qt+=4,xe.push(0);xe.push.apply(xe,No()(Ne.data)),Ie.uniformGPUBufferLayout.push({name:Ne.name,offset:qt})}}qt+=4*Je}}),this.uniformBuffer=new us(this.engine,{data:xe instanceof Array?new Float32Array(xe):xe,usage:Wr.BufferUsage.Uniform|Wr.BufferUsage.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),K.forEach(function(Ne){var He;nu()(Ne.data)||Ne.type!==za.Vector4FloatArray&&Ne.type!==za.FloatArray||(Ne.name===Ie.context.output.name?(He=new us(Ie.engine,{data:isFinite(Number(Ne.data))?[Ne.data]:Ne.data,usage:Wr.BufferUsage.Storage|Wr.BufferUsage.CopyDst|Wr.BufferUsage.CopySrc}),Ie.outputBuffer=He,Ie.context.output={name:Ne.name,length:isFinite(Number(Ne.data))?1:Ne.data.length,typedArrayConstructor:Float32Array,gpuBuffer:He.get()}):Ne.isReferer?Ne.data.model&&Ne.data.model.outputBuffer&&(He=Ne.data.model.outputBuffer):He=new us(Ie.engine,{data:isFinite(Number(Ne.data))?[Ne.data]:Ne.data,usage:Wr.BufferUsage.Storage|Wr.BufferUsage.CopyDst|Wr.BufferUsage.CopySrc}),Ie.vertexBuffers[Ne.name]=He,Ie.bindGroupEntries.push({binding:Qt,resource:{name:Ne.name,refer:He?void 0:Ne.data,buffer:He?He.get():void 0}}),Qt++)}),this.computePipeline=this.engine.device.createComputePipeline({computeStage:Rt}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return Ye.stop()}},Q,this)})),function(){return L.apply(this,arguments)})},{key:"destroy",value:function(){var It=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach(function(Rt){return It.vertexBuffers[Rt].destroy()})}},{key:"readData",value:(w=eo()(ui.a.mark(function Q(){var It,Rt,K,Dt,Qt,qt,xe,Ie,Ye;return ui.a.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(!(It=this.context.output)){Ne.next=16;break}if(Rt=It.length,K=It.typedArrayConstructor,!(Dt=It.gpuBuffer)){Ne.next=16;break}return Qt=Rt*K.BYTES_PER_ELEMENT,qt=this.engine.device.createBuffer({size:Qt,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),(xe=this.engine.device.createCommandEncoder()).copyBufferToBuffer(Dt,0,qt,0,Qt),($o?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([xe.finish()]),Ne.next=12,qt.mapAsync(Wr.MapMode.Read);case 12:return Ie=qt.getMappedRange(),Ye=new K(Ie.slice(0)),qt.unmap(),Ne.abrupt("return",Ye);case 16:return Ne.abrupt("return",new Float32Array);case 17:case"end":return Ne.stop()}},Q,this)})),function(){return w.apply(this,arguments)})},{key:"run",value:function(){var It;this.engine.currentComputePass&&(this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(It=this.engine.currentComputePass).dispatch.apply(It,No()(this.context.dispatch)))}},{key:"updateBuffer",value:function(It,Rt){var K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Dt=this.vertexBuffers[It];Dt&&Dt.subData({data:Rt,offset:K})}},{key:"updateUniform",value:function(It,Rt){var K=this.uniformGPUBufferLayout.find(function(Dt){return Dt.name===It});K&&this.uniformBuffer.subData({data:Number.isFinite(Rt)?new Float32Array([Rt]):new Float32Array(Rt),offset:K.offset})}},{key:"confirmInput",value:function(It,Rt){var K=this.vertexBuffers[Rt],Dt=It.outputBuffer;if(K&&Dt&&K!==Dt){var Qt=this.engine.device.createCommandEncoder(),qt=It.context.output,xe=qt.length*qt.typedArrayConstructor.BYTES_PER_ELEMENT;Qt.copyBufferToBuffer(Dt.get(),0,K.get(),0,xe),($o?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([Qt.finish()])}}},{key:"compileShaderToSpirV",value:function(It,Rt,K){return this.compileRawShaderToSpirV(K+It,Rt)}},{key:"compileRawShaderToSpirV",value:function(It,Rt){return this.engine.glslang.compileGLSL(It,Rt)}},{key:"compileComputePipelineStageDescriptor",value:(U=eo()(ui.a.mark(function Q(It){var Rt;return ui.a.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(Rt=It,this.engine.options.useWGSL){K.next=6;break}return K.next=5,this.compileShaderToSpirV(It,"compute",`#version 450
`);case 5:Rt=K.sent;case 6:return K.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:Rt,isWHLSL:$o}),entryPoint:"main"}});case 7:case"end":return K.stop()}},Q,this)})),function(Q){return U.apply(this,arguments)})}]),Z}(),qh=function(){function Z(U,w){xi()(this,Z),this.engine=U,this.options=w,this.indexCount=void 0,this.buffer=void 0;var L=w,Q=L.data,It=(L.usage,L.type,L.count);this.indexCount=It||0,this.buffer=new us(U,{data:Q instanceof Array?new Uint16Array(Q):Q,usage:Wr.BufferUsage.Index|Wr.BufferUsage.CopyDst})}return Ri()(Z,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(w){this.buffer.subData(w)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),Z}(),td=function(){function Z(U,w){xi()(this,Z),this.engine=U,this.options=w,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var L=w,Q=(L.width,L.height,L.color),It=(L.colors,L.depth);L.stencil,Q&&(this.colorTexture=Q),It&&(this.depthTexture=It)}return Ri()(Z,[{key:"get",value:function(){var w,L;return{color:(w=this.colorTexture)===null||w===void 0?void 0:w.get(),depth:(L=this.depthTexture)===null||L===void 0?void 0:L.get()}}},{key:"destroy",value:function(){var w,L;(w=this.colorTexture)===null||w===void 0||w.destroy(),(L=this.depthTexture)===null||L===void 0||L.destroy()}},{key:"resize",value:function(w){var L,Q,It=w.width,Rt=w.height;It===this.width&&Rt===this.height||((L=this.colorTexture)===null||L===void 0||L.resize({width:It,height:Rt}),(Q=this.depthTexture)===null||Q===void 0||Q.resize({width:It,height:Rt})),this.width=It,this.height=Rt}}]),Z}(),ed=(ka={},mr()(ka,Jn.POINTS,Wr.PrimitiveTopology.PointList),mr()(ka,Jn.LINES,Wr.PrimitiveTopology.LineList),mr()(ka,Jn.LINE_LOOP,Wr.PrimitiveTopology.LineList),mr()(ka,Jn.LINE_STRIP,Wr.PrimitiveTopology.LineStrip),mr()(ka,Jn.TRIANGLES,Wr.PrimitiveTopology.TriangleList),mr()(ka,Jn.TRIANGLE_FAN,Wr.PrimitiveTopology.TriangleList),mr()(ka,Jn.TRIANGLE_STRIP,Wr.PrimitiveTopology.TriangleStrip),ka),nd=(da={},mr()(da,Jn.NEVER,Wr.CompareFunction.Never),mr()(da,Jn.ALWAYS,Wr.CompareFunction.Always),mr()(da,Jn.LESS,Wr.CompareFunction.Less),mr()(da,Jn.LEQUAL,Wr.CompareFunction.LessEqual),mr()(da,Jn.GREATER,Wr.CompareFunction.Greater),mr()(da,Jn.GEQUAL,Wr.CompareFunction.GreaterEqual),mr()(da,Jn.EQUAL,Wr.CompareFunction.Equal),mr()(da,Jn.NOTEQUAL,Wr.CompareFunction.NotEqual),da),Vu=(ss={},mr()(ss,Jn.FUNC_ADD,Wr.BlendOperation.Add),mr()(ss,Jn.MIN_EXT,Wr.BlendOperation.Min),mr()(ss,Jn.MAX_EXT,Wr.BlendOperation.Max),mr()(ss,Jn.FUNC_SUBTRACT,Wr.BlendOperation.Subtract),mr()(ss,Jn.FUNC_REVERSE_SUBTRACT,Wr.BlendOperation.ReverseSubtract),ss),Wu=(Jo={},mr()(Jo,Jn.ZERO,Wr.BlendFactor.Zero),mr()(Jo,Jn.ONE,Wr.BlendFactor.One),mr()(Jo,Jn.SRC_COLOR,Wr.BlendFactor.SrcColor),mr()(Jo,Jn.ONE_MINUS_SRC_COLOR,Wr.BlendFactor.OneMinusSrcColor),mr()(Jo,Jn.SRC_ALPHA,Wr.BlendFactor.SrcAlpha),mr()(Jo,Jn.ONE_MINUS_SRC_ALPHA,Wr.BlendFactor.OneMinusSrcAlpha),mr()(Jo,Jn.DST_COLOR,Wr.BlendFactor.DstColor),mr()(Jo,Jn.ONE_MINUS_DST_COLOR,Wr.BlendFactor.OneMinusDstColor),mr()(Jo,Jn.DST_ALPHA,Wr.BlendFactor.DstAlpha),mr()(Jo,Jn.ONE_MINUS_DST_ALPHA,Wr.BlendFactor.OneMinusDstAlpha),mr()(Jo,Jn.CONSTANT_COLOR,Wr.BlendFactor.BlendColor),mr()(Jo,Jn.ONE_MINUS_CONSTANT_COLOR,Wr.BlendFactor.OneMinusBlendColor),mr()(Jo,Jn.SRC_ALPHA_SATURATE,Wr.BlendFactor.SrcAlphaSaturated),Jo),rd=(As={},mr()(As,Jn.ALPHA,"r8unorm"),mr()(As,Jn.RGBA,"rgba8unorm"),mr()(As,Jn.DEPTH_COMPONENT,"depth32float"),mr()(As,Jn.DEPTH_STENCIL,"depth24plus-stencil8"),As),Mf=(_u={},mr()(_u,Jn.NEAREST,"nearest"),mr()(_u,Jn.LINEAR,"linear"),_u),ru=(eu={},mr()(eu,Jn.REPEAT,"repeat"),mr()(eu,Jn.CLAMP_TO_EDGE,"clamp-to-edge"),mr()(eu,Jn.MIRRORED_REPEAT,"mirror-repeat"),eu);function id(Z){var U=Z.cull;return U&&U.enable?U.face?U.face===Jn.FRONT?Wr.CullMode.Front:Wr.CullMode.Back:void 0:Wr.CullMode.None}function od(Z){var U=Z.depth,w=(Z.stencil,{compare:Wr.CompareFunction.Always,depthFailOp:Wr.StencilOperation.Keep,failOp:Wr.StencilOperation.Keep,passOp:Wr.StencilOperation.Keep});return{depthWriteEnabled:U&&U.enable,depthCompare:nd[(U==null?void 0:U.func)||Jn.ALWAYS],format:Wr.TextureFormat.Depth24PlusStencil8,stencilFront:w,stencilBack:w,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function iu(Z,U){var w=Z.blend;return[{format:U,alphaBlend:{srcFactor:Wu[w&&w.func&&w.func.srcAlpha||Jn.ONE],dstFactor:Wu[w&&w.func&&w.func.dstAlpha||Jn.ZERO],operation:Vu[w&&w.equation&&w.equation.alpha||Jn.FUNC_ADD]},colorBlend:{srcFactor:Wu[w&&w.func&&w.func.srcRGB||Jn.ONE],dstFactor:Wu[w&&w.func&&w.func.dstRGB||Jn.ZERO],operation:Vu[w&&w.equation&&w.equation.rgb||Jn.FUNC_ADD]},writeMask:Wr.ColorWrite.All}]}function Cs(Z,U){var w=Object.keys(Z);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Z);U&&(L=L.filter(function(Q){return Object.getOwnPropertyDescriptor(Z,Q).enumerable})),w.push.apply(w,L)}return w}function Qa(Z){for(var U=1;U<arguments.length;U++){var w=arguments[U]!=null?arguments[U]:{};U%2?Cs(Object(w),!0).forEach(function(L){mr()(Z,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(w)):Cs(Object(w)).forEach(function(L){Object.defineProperty(Z,L,Object.getOwnPropertyDescriptor(w,L))})}return Z}function Af(Z){for(var U=0,w=arguments.length,L=new Array(w>1?w-1:0),Q=1;Q<w;Q++)L[Q-1]=arguments[Q];for(var It=0,Rt=L;It<Rt.length;It++){var K=Rt[It];U+=K.length}for(var Dt=new Z(U),Qt=0,qt=0,xe=L;qt<xe.length;qt++){var Ie=xe[qt];Dt.set(Ie,Qt),Qt+=Ie.length}return Dt}var Za,Ea,Cf,Xu,Tf,jf,If,Pf,ou,Ec,Df,kf,ad=function(){function Z(L,Q){xi()(this,Z),this.engine=L,this.options=Q,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}var U,w;return Ri()(Z,[{key:"init",value:(w=eo()(ui.a.mark(function L(){var Q,It,Rt,K,Dt,Qt,qt,xe,Ie,Ye,Ne,He,Je,Ge,qe,yn,Dn=this;return ui.a.wrap(function(En){for(;;)switch(En.prev=En.next){case 0:return Q=this.options,It=Q.vs,Rt=Q.fs,K=Q.attributes,Dt=Q.uniforms,Qt=Q.primitive,Q.count,qt=Q.elements,xe=Q.depth,Ie=Q.blend,Ye=Q.stencil,Ne=Q.cull,Q.instances,En.next=3,this.compilePipelineStageDescriptor(It,Rt,null);case 3:He=En.sent,Je=He.vertexStage,Ge=He.fragmentStage,Dt&&this.buildUniformBindGroup(Dt),qt&&(this.indexBuffer=qt.get(),this.indexCount=qt.indexCount),qe={vertexBuffers:Object.keys(K).map(function(Ln,Zn){var Qn=K[Ln],qn=Qn.get(),fr=qn.arrayStride,br=qn.stepMode,gr=qn.attributes;return Dn.attributeCache[Ln]=Qn,{arrayStride:fr,stepMode:br,attributes:gr}})},yn={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:ed[Qt||Jn.TRIANGLES],rasterizationState:Qa(Qa({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:id({cull:Ne})}),depthStencilState:od({depth:xe,stencil:Ye}),colorStates:iu({blend:Ie},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:Je,fragmentStage:Ge,vertexState:qe},this.renderPipeline=this.engine.device.createRenderPipeline(yn);case 11:case"end":return En.stop()}},L,this)})),function(){return w.apply(this,arguments)})},{key:"addUniforms",value:function(Q){this.uniforms=Qa(Qa({},this.uniforms),tu(Q))}},{key:"draw",value:function(Q){var It=this,Rt=this.engine.getCurrentRenderPass(),K=Qa(Qa({},this.uniforms),tu(Q.uniforms||{})),Dt=[];Object.keys(K).forEach(function(Qt){var qt=Xh()(K[Qt]);if(qt==="boolean"||qt==="number"||Array.isArray(K[Qt])||K[Qt].BYTES_PER_ELEMENT){var xe,Ie=(xe=It.uniformGPUBufferLayout.find(function(yn){return yn.name===Qt}))===null||xe===void 0?void 0:xe.offset;nu()(Ie)||It.uniformBuffer.subData({data:K[Qt],offset:Ie})}else{var Ye,Ne=(Ye=It.uniformGPUBufferLayout.find(function(yn){return yn.name===Qt}))===null||Ye===void 0?void 0:Ye.offset;if(!nu()(Ne)){var He=K[Qt].get(),Je=He.color||He,Ge=Je.texture,qe=Je.sampler;qe&&(Dt.push({binding:Ne,resource:qe}),Ne++),Dt.push({binding:Ne,resource:Ge.createView()})}}}),this.uniformBuffer&&(Dt[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:Dt}),this.renderPipeline&&Rt.setPipeline(this.renderPipeline),Rt.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&Rt.setIndexBuffer(this.indexBuffer.get(),Wr.IndexFormat.Uint32,0),Object.keys(this.attributeCache).forEach(function(Qt,qt){Rt.setVertexBuffer(0+qt,It.attributeCache[Qt].get().buffer,0)}),this.indexBuffer?Rt.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):Rt.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:(U=eo()(ui.a.mark(function L(Q,It,Rt){var K,Dt,Qt;return ui.a.wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:if(K=`#version 450
`,Dt=Q,Qt=It,this.engine.options.useWGSL){qt.next=10;break}return qt.next=6,this.compileShaderToSpirV(Q,"vertex",K);case 6:return Dt=qt.sent,qt.next=9,this.compileShaderToSpirV(It,"fragment",K);case 9:Qt=qt.sent;case 10:return qt.abrupt("return",this.createPipelineStageDescriptor(Dt,Qt));case 11:case"end":return qt.stop()}},L,this)})),function(L,Q,It){return U.apply(this,arguments)})},{key:"compileShaderToSpirV",value:function(Q,It,Rt){return this.compileRawShaderToSpirV(Rt+Q,It)}},{key:"compileRawShaderToSpirV",value:function(Q,It){return this.engine.glslang.compileGLSL(Q,It)}},{key:"createPipelineStageDescriptor",value:function(Q,It){return{vertexStage:{module:this.engine.device.createShaderModule({code:Q,isWHLSL:$o}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:It,isWHLSL:$o}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:Wr.FrontFace.CCW,cullMode:Wr.CullMode.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(Q){var It=this,Rt=0,K=Af.apply(void 0,[Float32Array].concat(No()(Object.keys(Q).map(function(qt){return Q[qt]?(It.uniformGPUBufferLayout.push({name:qt,offset:Rt}),Rt+=4*(Q[qt].length||1),Q[qt]):[]})))),Dt=[],Qt=!1;K.length&&(Qt=!0,Dt.push({binding:0,visibility:Wr.ShaderStage.Fragment|Wr.ShaderStage.Vertex,type:Wr.BindingType.UniformBuffer})),Object.keys(Q).filter(function(qt){return Q[qt]===null}).forEach(function(qt,xe){It.uniformGPUBufferLayout.push({name:qt,offset:2*xe+(Qt?1:0)}),Dt.push({binding:2*xe+(Qt?1:0),visibility:Wr.ShaderStage.Fragment,type:Wr.BindingType.Sampler},{binding:2*xe+(Qt?1:0)+1,visibility:Wr.ShaderStage.Fragment,type:Wr.BindingType.SampledTexture})}),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:Dt}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),Qt&&(this.uniformBuffer=new us(this.engine,{data:K instanceof Array?new Float32Array(K):K,usage:Wr.BufferUsage.Uniform|Wr.BufferUsage.CopyDst}))}}]),Z}(),sd=function(){function Z(U,w){xi()(this,Z),this.engine=U,this.options=w,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return Ri()(Z,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(w){var L=w.width,Q=w.height;L===this.width&&Q===this.height||(this.destroy(),this.createTexture()),this.width=L,this.height=Q}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var w=this.options,L=(w.data,w.type),Q=(L===void 0&&Jn.UNSIGNED_BYTE,w.width),It=w.height,Rt=(w.flipY,w.format),K=Rt===void 0?Jn.RGBA:Rt,Dt=(w.mipmap,w.wrapS),Qt=Dt===void 0?Jn.CLAMP_TO_EDGE:Dt,qt=w.wrapT,xe=qt===void 0?Jn.CLAMP_TO_EDGE:qt,Ie=w.aniso,Ye=Ie===void 0?0:Ie,Ne=(w.alignment,w.premultiplyAlpha,w.mag),He=Ne===void 0?Jn.NEAREST:Ne,Je=w.min,Ge=Je===void 0?Jn.NEAREST:Je,qe=w.colorSpace,yn=(qe===void 0&&Jn.BROWSER_DEFAULT_WEBGL,w.usage);this.width=Q,this.height=It,this.texture=this.engine.device.createTexture({size:[Q,It,1],mipLevelCount:1,sampleCount:1,dimension:Wr.TextureDimension.E2d,format:rd[K],usage:yn||Wr.TextureUsage.Sampled|Wr.TextureUsage.CopyDst}),(!yn||yn&Wr.TextureUsage.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:ru[Qt],addressModeV:ru[xe],addressModeW:ru[Qt],magFilter:Mf[He],minFilter:Mf[Ge],maxAnisotropy:Ye}))}}]),Z}(),ud=Object(Ur.injectable)()(Za=function(){function Z(){var L=this;xi()(this,Z),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(Q){Q.framebuffer;var It=Q.color,Rt=Q.depth,K=Q.stencil;L.options.supportCompute&&L.startComputePass(),L.currentRenderTarget?(L.currentRenderPass&&L.endRenderTargetRenderPass(),L.startRenderTargetRenderPass(L.currentRenderTarget,It||null,!!Rt,!!K)):(L.mainColorAttachments[0].loadValue=It||Wr.LoadOp.Load,L.mainDepthAttachment.depthLoadValue=Rt||Wr.LoadOp.Load,L.mainDepthAttachment.stencilLoadValue=K?L.clearStencilValue:Wr.LoadOp.Load,L.mainRenderPass&&L.endMainRenderPass(),L.startMainRenderPass())},this.createModel=function(){var Q=eo()(ui.a.mark(function It(Rt){var K;return ui.a.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return K=new ad(L,Rt),Dt.next=3,K.init();case 3:return Dt.abrupt("return",K);case 4:case"end":return Dt.stop()}},It)}));return function(It){return Q.apply(this,arguments)}}(),this.createAttribute=function(Q){return new wc(L,Q)},this.createBuffer=function(Q){return new us(L,Q)},this.createElements=function(Q){return new qh(L,Q)},this.createTexture2D=function(Q){return new sd(L,Q)},this.createFramebuffer=function(Q){return new td(L,Q)},this.useFramebuffer=function(Q,It){L.currentRenderTarget&&L.unbindFramebuffer(L.currentRenderTarget),L.currentRenderTarget=Q,L.currentRenderTargetViewDescriptor={dimension:Wr.TextureViewDimension.E2d,arrayLayerCount:1,aspect:Wr.TextureAspect.All},L.currentRenderPass=null,It()},this.createComputeModel=function(){var Q=eo()(ui.a.mark(function It(Rt){var K;return ui.a.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return K=new $h(L,Rt),Dt.next=3,K.init();case 3:return Dt.abrupt("return",K);case 4:case"end":return Dt.stop()}},It)}));return function(It){return Q.apply(this,arguments)}}(),this.getCanvas=function(){return L.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(Q){var It=Q.x,Rt=Q.y,K=Q.width,Dt=Q.height;L.currentRenderPass?L.transientViewport.x!==1/0?L.getCurrentRenderPass().setViewport(L.transientViewport.x,L.transientViewport.y,L.transientViewport.width,L.transientViewport.height,0,1):(It!==L.cachedViewport.x||Rt!==L.cachedViewport.y||K!==L.cachedViewport.width||Dt!==L.cachedViewport.height)&&(L.cachedViewport={x:It,y:Rt,width:K,height:Dt},L.getCurrentRenderPass().setViewport(It,Rt,K,Dt,0,1)):L.transientViewport={x:It,y:Rt,width:K,height:Dt}},this.readPixels=function(Q){throw new Error("Method not implemented.")}}var U,w;return Ri()(Z,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:(w=eo()(ui.a.mark(function L(Q){return ui.a.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:return this.canvas=Q.canvas,this.options=Q,this.useWGSL=!!Q.useWGSL,this.mainPassSampleCount=Q.antialiasing?this.defaultSampleCount:1,It.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return It.stop()}},L,this)})),function(L){return w.apply(this,arguments)})},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach(function(Q){return Q.destroy()}),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),$o?this.device.getQueue().submit(this.commandBuffers.filter(function(Q){return Q})):this.device.defaultQueue.submit(this.commandBuffers.filter(function(Q){return Q}))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:(U=eo()(ui.a.mark(function L(){var Q,It;return ui.a.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return Rt.next=2,Qh();case 2:return this.glslang=Rt.sent,Rt.next=5,(Q=navigator)===null||Q===void 0||(It=Q.gpu)===null||It===void 0?void 0:It.requestAdapter();case 5:return this.adapter=Rt.sent,Rt.next=8,this.adapter.requestDevice();case 8:this.device=Rt.sent;case 9:case"end":return Rt.stop()}},L,this)})),function(){return U.apply(this,arguments)})},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext($o?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:Wr.TextureUsage.OutputAttachment|Wr.TextureUsage.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var Q={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:Wr.TextureDimension.E2d,format:Wr.TextureFormat.BGRA8Unorm,usage:Wr.TextureUsage.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(Q),this.mainColorAttachments=[{attachment:$o?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:Wr.StoreOp.Store}]}else this.mainColorAttachments=[{attachment:$o?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:Wr.StoreOp.Store}];var It={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:Wr.TextureDimension.E2d,format:$o?"depth32float-stencil8":Wr.TextureFormat.Depth24PlusStencil8,usage:Wr.TextureUsage.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(It),this.mainDepthAttachment={attachment:$o?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:Wr.StoreOp.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:Wr.StoreOp.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=$o?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=$o?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(Q,It,Rt){var K,Dt,Qt,qt=arguments.length>3&&arguments[3]!==void 0&&arguments[3],xe=(K=Q.get().color)===null||K===void 0?void 0:K.texture;xe&&(Qt=xe.createView(this.currentRenderTargetViewDescriptor));var Ie,Ye=(Dt=Q.get().depth)===null||Dt===void 0?void 0:Dt.texture;Ye&&(Ie=Ye.createView());var Ne=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:Qt,loadValue:It!==null?It:Wr.LoadOp.Load,storeOp:Wr.StoreOp.Store}],depthStencilAttachment:Ye&&Ie?{attachment:Ie,depthLoadValue:Rt?this.clearDepthValue:Wr.LoadOp.Load,depthStoreOp:Wr.StoreOp.Store,stencilLoadValue:qt?this.clearStencilValue:Wr.LoadOp.Load,stencilStoreOp:Wr.StoreOp.Store}:void 0});this.currentRenderPass=Ne,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&this.currentRenderPass!==null&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(Q){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),Z}())||Za;function cd(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=To()(Z);if(U){var Q=To()(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return Vo()(this,w)}}var ld=(Ea=Object(Ur.injectable)(),Cf=Object(Ur.inject)(yr.Systems),Xu=Object(Ur.named)(yr.MaterialSystem),Tf=Object(Ur.inject)(yr.Systems),jf=Object(Ur.named)(yr.GeometrySystem),If=Object(Ur.inject)(yr.ShaderModuleService),Ea((ou=function(Z){Qo()(w,Z);var U=cd(w);function w(){var L;xi()(this,w);for(var Q=arguments.length,It=new Array(Q),Rt=0;Rt<Q;Rt++)It[Rt]=arguments[Rt];return L=U.call.apply(U,[this].concat(It)),di()(L,"materialSystem",Ec,Eo()(L)),di()(L,"geometrySystem",Df,Eo()(L)),di()(L,"shaderModuleService",kf,Eo()(L)),L}return Ri()(w,[{key:"onAttributeChanged",value:function(Q){var It=Q.name,Rt=Q.data,K=this.getMeshComponent();K&&K.material&&(It==="gridColor"?(K.material.setUniform("u_GridColor",Rt),K.material.setUniform("u_GridColor2",Rt)):It==="gridSize"&&(K.material.setUniform("u_GridSize",Rt),K.material.setUniform("u_GridSize2",Rt)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:`attribute vec3 a_Position;

varying vec3 v_Position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

void main() {
  v_Position = a_Position;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);
}`,fs:`// generate grid, borrow from clay.gl viewer
// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl
#extension GL_OES_standard_derivatives : enable

varying vec3 v_Position;
// varying vec3 v_Normal;

uniform float u_GridSize : 5;
uniform float u_GridSize2 : .5;
uniform vec4 u_GridColor : [0, 0, 0, 1];
uniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];
uniform bool u_GridEnabled : true;

// uniform vec3 u_LightDirection;
// uniform vec3 u_LightColor;
// uniform vec3 u_Camera;

void main() {
  // vec3 n = v_Normal;
  // vec3 l = normalize(u_LightDirection);
  // float NdotL = clamp(dot(n, l), 0.001, 1.0);

  gl_FragColor = vec4(1.);

  if (u_GridEnabled) {
    float wx = v_Position.x;
    float wz = v_Position.z;
    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;
    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;

    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;
    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;

    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);
    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);
    // if (v0 > 0.1) {
        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);
    // }
    // else {
        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);
    // }
  }

  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);
  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;

  // gl_FragColor.rgb *= diffuseColor;
}`});var Q=this.shaderModuleService.getModule("grid"),It=Q.vs,Rt=Q.fs,K=Q.uniforms,Dt=this.materialSystem.createShaderMaterial({vertexShader:It,fragmentShader:Rt});this.setMaterial(Dt);var Qt=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(Qt),Dt.setCull({enable:!1,face:Jn.BACK}).setDepth({enable:!0,func:Jn.LESS}),Dt.setUniform(K),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),Qt.setIndex([0,3,2,2,1,0]),Qt.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),w}(Ha),Ec=Mi()(ou.prototype,"materialSystem",[Cf,Xu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Df=Mi()(ou.prototype,"geometrySystem",[Tf,jf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kf=Mi()(ou.prototype,"shaderModuleService",[If],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pf=ou))||Pf),Yu=e(94),cs=e(63);function ls(Z,U,w,L,Q){au(U,L,-Q),au(U,L,Q),Z.push(w),Z.push(w)}function au(Z,U,w){Z.push([[U[0],U[1]],w])}var Rf,Mc,Ac,Nf,Ts,$a,Lf,fs,Bf,Ff,Gf;function fd(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=To()(Z);if(U){var Q=To()(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return Vo()(this,w)}}var Uf,Hu,zf,_f,Vf,Cc,Tc,su,jc,Wf,Ic,hd=(Rf=Object(Ur.injectable)(),Mc=Object(Ur.inject)(yr.Systems),Ac=Object(Ur.named)(yr.MaterialSystem),Nf=Object(Ur.inject)(yr.Systems),Ts=Object(Ur.named)(yr.GeometrySystem),$a=Object(Ur.inject)(yr.ShaderModuleService),Rf((fs=function(Z){Qo()(w,Z);var U=fd(w);function w(){var L;xi()(this,w);for(var Q=arguments.length,It=new Array(Q),Rt=0;Rt<Q;Rt++)It[Rt]=arguments[Rt];return L=U.call.apply(U,[this].concat(It)),di()(L,"materialSystem",Bf,Eo()(L)),di()(L,"geometrySystem",Ff,Eo()(L)),di()(L,"shaderModuleService",Gf,Eo()(L)),L.vertexCount=void 0,L}return Ri()(w,[{key:"onAttributeChanged",value:function(Q){var It=Q.name,Rt=Q.data,K=this.getMeshComponent();if(K&&K.material)switch(It){case"dashArray":K.material.setUniform("u_dash_array",Rt);break;case"dashOffset":K.material.setUniform("u_dash_offset",Rt);break;case"dashRatio":K.material.setUniform("u_dash_ratio",Rt);break;case"thickness":K.material.setUniform("u_thickness",Rt);break;case"color":var Dt=new Array(this.vertexCount).fill(void 0).map(function(){return Rt}).reduce(function(Qt,qt){return[].concat(No()(Qt),No()(qt))},[]);K.geometry.setAttribute("a_color",Float32Array.from(Dt),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]})}}},{key:"onEntityCreated",value:function(){var Q=this;this.shaderModuleService.registerModule("line",{vs:`attribute vec2 a_pos;
attribute vec4 a_color;
attribute float a_line_miter;
attribute vec2 a_line_normal;
attribute float a_counters;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform float u_thickness : 0.02;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
  v_color = a_color;
  v_counters = a_counters;

  vec3 normal = normalize(vec3(a_line_normal, 0.0));

  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);

  v_normal = vec2(normal * sign(a_line_miter));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;
}
`,fs:`uniform float u_dash_array : 0.02;
uniform float u_dash_offset : 0;
uniform float u_dash_ratio : 0;
uniform float u_thickness : 0.02;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
    float blur = 1. - smoothstep(0.98, 1., length(v_normal));

    gl_FragColor = v_color;
    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));
}`});var It=this.shaderModuleService.getModule("line"),Rt=It.vs,K=It.fs,Dt=It.uniforms,Qt=this.materialSystem.createShaderMaterial({vertexShader:Rt,fragmentShader:K}),qt=function(Dn,En,Ln){var Zn=[0,0],Qn=[0,0],qn=[0,0],fr=[0,0],br=-1,gr=!1,hr=null,Cr=Object(Yu.create)(),dr=Ln||0,Jr=[],qr=[],wi=[],Tr=[0,0];En&&(Dn=Dn.slice()).push(Dn[0]);for(var pi=Dn.length,Ei=1;Ei<pi;Ei++){var ji=dr,Ao=Dn[Ei-1],go=Dn[Ei],Ii=Ei<Dn.length-1?Dn[Ei+1]:null;if(Tr.push(Ei/pi,Ei/pi),Object(cs.direction)(Zn,go,Ao),hr||(hr=[0,0],Object(cs.normal)(hr,Zn)),gr||(gr=!0,ls(qr,Jr,Ao,hr,1)),wi.push([ji+0,ji+1,ji+2]),Ii){Object(cs.direction)(Qn,Ii,go);var Gi=Object(cs.computeMiter)(qn,fr,Zn,Qn,1),Po=Object(Yu.dot)(qn,hr)<0?-1:1,Fo=Gi>3;if(!isFinite(Gi)){Object(cs.normal)(hr,Zn),ls(qr,Jr,go,hr,1),wi.push(br===1?[ji,ji+2,ji+3]:[ji+2,ji+1,ji+3]),dr+=2,br=Po;continue}Fo?(Gi=3,Tr.push(Ei/pi),au(Jr,hr,-Po),qr.push(go),au(Jr,fr,Gi*Po),qr.push(go),wi.push(br!==-Po?[ji,ji+2,ji+3]:[ji+2,ji+1,ji+3]),wi.push([ji+2,ji+3,ji+4]),Object(cs.normal)(Cr,Qn),Object(Yu.copy)(hr,Cr),au(Jr,hr,-Po),qr.push(go),dr+=3):(ls(qr,Jr,go,fr,Gi),wi.push(br===1?[ji,ji+2,ji+3]:[ji+2,ji+1,ji+3]),Po=-1,Object(Yu.copy)(hr,fr),dr+=2),br=Po}else Object(cs.normal)(hr,Zn),ls(qr,Jr,go,hr,1),wi.push(br===1?[ji,ji+2,ji+3]:[ji+2,ji+1,ji+3]),dr+=2}return{normals:Jr,attrIndex:wi,attrPos:qr,attrCounters:Tr}}(this.config.points,!1),xe=qt.normals,Ie=qt.attrIndex,Ye=qt.attrPos,Ne=qt.attrCounters,He=Ye.length;this.vertexCount=He;var Je=this.geometrySystem.createBufferGeometry({vertexCount:He});this.setMaterial(Qt),this.setGeometry(Je),Qt.setCull({enable:!1,face:Jn.BACK}).setUniform(Dt),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var Ge=[],qe=[];xe.forEach(function(Dn){var En=Dn[0],Ln=Dn[1];Ge.push([En[0],En[1]]),qe.push(Ln)}),Je.setIndex(Ie.reduce(function(Dn,En){return[].concat(No()(Dn),No()(En))},[])),Je.setAttribute("a_pos",Float32Array.from(Ye.reduce(function(Dn,En){return[].concat(No()(Dn),No()(En))},[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var yn=new Array(He).fill(void 0).map(function(){return No()(Q.config.color)}).reduce(function(Dn,En){return[].concat(No()(Dn),No()(En))},[]);Je.setAttribute("a_color",Float32Array.from(yn),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),Je.setAttribute("a_line_miter",Float32Array.from(qe),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),Je.setAttribute("a_line_normal",Float32Array.from(Ge.reduce(function(Dn,En){return[].concat(No()(Dn),No()(En))},[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),Je.setAttribute("a_counters",Float32Array.from(Ne),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),w}(Ha),Bf=Mi()(fs.prototype,"materialSystem",[Mc,Ac],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ff=Mi()(fs.prototype,"geometrySystem",[Nf,Ts],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gf=Mi()(fs.prototype,"shaderModuleService",[$a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lf=fs))||Lf);function Xf(Z,U){var w=Object.keys(Z);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Z);U&&(L=L.filter(function(Q){return Object.getOwnPropertyDescriptor(Z,Q).enumerable})),w.push.apply(w,L)}return w}function dd(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=To()(Z);if(U){var Q=To()(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return Vo()(this,w)}}var vd=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"];console.log();var Yf,Hf,Pc,Kf,uu,cu,Ku,Jf,Qf,pd=(Uf=Object(Ur.injectable)(),Hu=Object(Ur.inject)(yr.Systems),zf=Object(Ur.named)(yr.MaterialSystem),_f=Object(Ur.inject)(yr.Systems),Vf=Object(Ur.named)(yr.GeometrySystem),Cc=Object(Ur.inject)(yr.ShaderModuleService),Uf((su=function(Z){Qo()(w,Z);var U=dd(w);function w(){var L;xi()(this,w);for(var Q=arguments.length,It=new Array(Q),Rt=0;Rt<Q;Rt++)It[Rt]=arguments[Rt];return L=U.call.apply(U,[this].concat(It)),di()(L,"materialSystem",jc,Eo()(L)),di()(L,"geometrySystem",Wf,Eo()(L)),di()(L,"shaderModuleService",Ic,Eo()(L)),L}return Ri()(w,[{key:"onAttributeChanged",value:function(Q){var It=Q.name,Rt=Q.data,K=this.getMeshComponent();K&&K.material&&(It==="strokeWidth"?K.material.setUniform("u_stroke_width",Rt):It==="strokeColor"?K.material.setUniform("u_stroke_color",Rt):It==="strokeOpacity"?K.material.setUniform("u_stroke_opacity",Rt):It==="opacity"?K.material.setUniform("u_opacity",Rt):It==="blur"&&K.material.setUniform("u_blur",Rt))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:`attribute vec2 position;
attribute vec4 color;
attribute float shape;
attribute vec2 offset;
attribute float size;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

uniform float u_stroke_width : 0.01;
uniform float u_device_pixel_ratio;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "picking"

void main() {
  v_color = color;
  v_radius = size;

  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);

  // construct point coords
  v_data = vec4(position, antialiasblur, shape);

  gl_Position = projectionMatrix * modelViewMatrix
    * vec4(position * size + offset, 0.0, 1.0);

  setPickingColor(a_PickingColor);
}`,fs:`uniform float u_blur : 0.05;
uniform float u_opacity : 0.7;
uniform float u_stroke_width : 0.01;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "sdf2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  // if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  // } else if (shape == 1) {
  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  // } else if (shape == 2) {
  //   outer_df = sdBox(v_data.xy, vec2(1.));
  //   inner_df = sdBox(v_data.xy, vec2(r));
  // } else if (shape == 3) {
  //   outer_df = sdPentagon(v_data.xy, 0.8);
  //   inner_df = sdPentagon(v_data.xy, r * 0.8);
  // } else if (shape == 4) {
  //   outer_df = sdHexagon(v_data.xy, 0.8);
  //   inner_df = sdHexagon(v_data.xy, r * 0.8);
  // } else if (shape == 5) {
  //   outer_df = sdOctogon(v_data.xy, 1.0);
  //   inner_df = sdOctogon(v_data.xy, r);
  // } else if (shape == 6) {
  //   outer_df = sdHexagram(v_data.xy, 0.52);
  //   inner_df = sdHexagram(v_data.xy, r * 0.52);
  // } else if (shape == 7) {
  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));
  //   inner_df = sdRhombus(v_data.xy, vec2(r));
  // } else if (shape == 8) {
  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);
  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  // }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;

  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;

  gl_FragColor = filterColor(gl_FragColor);
}`});var Q=this.shaderModuleService.getModule("grid"),It=Q.vs,Rt=Q.fs,K=Q.uniforms,Dt=this.materialSystem.createShaderMaterial({vertexShader:It,fragmentShader:Rt,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:Jn.SRC_ALPHA,dstRGB:Jn.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});Dt.setUniform(function(xe){for(var Ie=1;Ie<arguments.length;Ie++){var Ye=arguments[Ie]!=null?arguments[Ie]:{};Ie%2?Xf(Object(Ye),!0).forEach(function(Ne){mr()(xe,Ne,Ye[Ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(xe,Object.getOwnPropertyDescriptors(Ye)):Xf(Object(Ye)).forEach(function(Ne){Object.defineProperty(xe,Ne,Object.getOwnPropertyDescriptor(Ye,Ne))})}return xe}({u_device_pixel_ratio:window.devicePixelRatio},K));var Qt=this.buildAttributes(),qt=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:Qt.instancedOffsets.length/2,vertexCount:6});qt.setIndex([0,2,1,0,3,2]),qt.setAttribute("position",Float32Array.from(Qt.positions),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),qt.setAttribute("offset",Float32Array.from(Qt.instancedOffsets),{arrayStride:8,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),qt.setAttribute("color",Float32Array.from(Qt.instancedColors),{arrayStride:16,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),qt.setAttribute("size",Float32Array.from(Qt.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),qt.setAttribute("shape",Float32Array.from(Qt.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),qt.setAttribute("a_PickingColor",Float32Array.from(Qt.instancedPickingColors),{arrayStride:12,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(Dt),this.setGeometry(qt)}},{key:"buildAttribute",value:function(Q,It,Rt){var K,Dt,Qt,qt,xe;(K=It.instancedPickingColors).push.apply(K,No()([(xe=Q.id||Rt)+1&255,xe+1>>8&255,xe+1>>8>>8&255])),It.instancedShapes.push(vd.indexOf(Q.shape||"circle")),(Dt=It.instancedColors).push.apply(Dt,No()(Q.color||[1,0,0,1])),(Qt=It.instancedOffsets).push.apply(Qt,No()(Q.position||[0,0])),(qt=It.instancedSizes).push.apply(qt,No()(Q.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var Q=this,It={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach(function(Rt,K){Q.buildAttribute(Rt,It,K)}):this.buildAttribute(this.config,It,0),It}}]),w}(Ha),jc=Mi()(su.prototype,"materialSystem",[Hu,zf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wf=Mi()(su.prototype,"geometrySystem",[_f,Vf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ic=Mi()(su.prototype,"shaderModuleService",[Cc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tc=su))||Tc);function Dc(Z,U){var w;if(typeof Symbol=="undefined"||Z[Symbol.iterator]==null){if(Array.isArray(Z)||(w=function(Dt,Qt){if(!!Dt){if(typeof Dt=="string")return Zf(Dt,Qt);var qt=Object.prototype.toString.call(Dt).slice(8,-1);if(qt==="Object"&&Dt.constructor&&(qt=Dt.constructor.name),qt==="Map"||qt==="Set")return Array.from(Dt);if(qt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(qt))return Zf(Dt,Qt)}}(Z))||U&&Z&&typeof Z.length=="number"){w&&(Z=w);var L=0,Q=function(){};return{s:Q,n:function(){return L>=Z.length?{done:!0}:{done:!1,value:Z[L++]}},e:function(Qt){throw Qt},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var It,Rt=!0,K=!1;return{s:function(){w=Z[Symbol.iterator]()},n:function(){var Qt=w.next();return Rt=Qt.done,Qt},e:function(Qt){K=!0,It=Qt},f:function(){try{Rt||w.return==null||w.return()}finally{if(K)throw It}}}}function Zf(Z,U){(U==null||U>Z.length)&&(U=Z.length);for(var w=0,L=new Array(U);w<U;w++)L[w]=Z[w];return L}var $f,qf,th,eh,nh,kc,rh,ih,oh,Rc,Ju,ah,Nc=(Yf=Object(Ur.injectable)(),Hf=Object(Ur.inject)(yr.RenderEngine),Pc=Object(Ur.inject)(yr.ShaderModuleService),Kf=Object(Ur.inject)(yr.ConfigService),Yf((cu=function(){function Z(){xi()(this,Z),di()(this,"engine",Ku,this),di()(this,"shaderModule",Jf,this),di()(this,"configService",Qf,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0,this.container=void 0}var U,w;return Ri()(Z,[{key:"init",value:(w=eo()(ui.a.mark(function L(){var Q,It,Rt,K,Dt;return ui.a.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:if(this.shaderModule.registerBuiltinModules(),Q=this.container.getAll(yr.Systems),!(It=this.configService.get()).canvas){Qt.next=25;break}return Qt.next=6,this.engine.init({canvas:It.canvas,swapChainFormat:Wr.TextureFormat.BGRA8Unorm,antialiasing:!1});case 6:Rt=Dc(Q),Qt.prev=7,Rt.s();case 9:if((K=Rt.n()).done){Qt.next=16;break}if(!(Dt=K.value).initialize){Qt.next=14;break}return Qt.next=14,Dt.initialize();case 14:Qt.next=9;break;case 16:Qt.next=21;break;case 18:Qt.prev=18,Qt.t0=Qt.catch(7),Rt.e(Qt.t0);case 21:return Qt.prev=21,Rt.f(),Qt.finish(21);case 24:this.inited=!0;case 25:case"end":return Qt.stop()}},L,this,[[7,18,21,24]])})),function(){return w.apply(this,arguments)})},{key:"render",value:(U=eo()(ui.a.mark(function L(){var Q,It,Rt,K,Dt,Qt,qt,xe=arguments;return ui.a.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(this.inited&&!this.rendering){Ie.next=2;break}return Ie.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach(function(Ye){Ye()}),this.rendering=!0,this.engine.beginFrame(),Q=this.container.getAll(yr.Systems),It=xe.length,Rt=new Array(It),K=0;K<It;K++)Rt[K]=xe[K];Dt=Dc(Q),Ie.prev=8,Dt.s();case 10:if((Qt=Dt.n()).done){Ie.next=17;break}if(!(qt=Qt.value).execute){Ie.next=15;break}return Ie.next=15,qt.execute(Rt);case 15:Ie.next=10;break;case 17:Ie.next=22;break;case 19:Ie.prev=19,Ie.t0=Ie.catch(8),Dt.e(Ie.t0);case 22:return Ie.prev=22,Dt.f(),Ie.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return Ie.stop()}},L,this,[[8,19,22,25]])})),function(){return U.apply(this,arguments)})},{key:"clear",value:function(Q){var It=this;return this.inited?this.engine.clear(Q):this.pendings.unshift(function(){It.engine.clear(Q),It.pendings.shift()}),this}},{key:"setSize",value:function(Q){var It=Q.width,Rt=Q.height,K=this.engine.getCanvas();return this.size={width:It,height:Rt},K.width=It,K.height=Rt,this}},{key:"getSize",value:function(){return this.size}}]),Z}(),Ku=Mi()(cu.prototype,"engine",[Hf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jf=Mi()(cu.prototype,"shaderModule",[Pc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qf=Mi()(cu.prototype,"configService",[Kf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uu=cu))||uu),sh=Object(Ur.injectable)()($f=function(){function Z(){xi()(this,Z),this.entities=[]}return Ri()(Z,[{key:"getEntities",value:function(){return this.entities}},{key:"addEntity",value:function(w){return this.entities.indexOf(w)===-1&&this.entities.push(w),this}},{key:"removeEntity",value:function(w){var L=this.entities.indexOf(w);return this.entities.splice(L,1),this}}]),Z}())||$f,uh=(qf=Object(Ur.injectable)(),th=Object(Ur.inject)(yr.Systems),eh=Object(Ur.named)(yr.RendererSystem),qf((kc=function(){function Z(){xi()(this,Z),di()(this,"rendererSystem",rh,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return Ri()(Z,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(w){return this.camera=w,this}},{key:"setScene",value:function(w){return this.scene=w,this}},{key:"setViewport",value:function(w){return this.viewport=w,this}},{key:"setClearColor",value:function(w){return this.clearColor=w,this}},{key:"pick",value:function(w){return this.rendererSystem.pick(w,this)}}]),Z}(),rh=Mi()(kc.prototype,"rendererSystem",[th,eh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nh=kc))||nh);function ch(Z,U){var w=Object.keys(Z);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(Z);U&&(L=L.filter(function(Q){return Object.getOwnPropertyDescriptor(Z,Q).enumerable})),w.push.apply(w,L)}return w}function gd(Z){for(var U=1;U<arguments.length;U++){var w=arguments[U]!=null?arguments[U]:{};U%2?ch(Object(w),!0).forEach(function(L){mr()(Z,L,w[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(w)):ch(Object(w)).forEach(function(L){Object.defineProperty(Z,L,Object.getOwnPropertyDescriptor(w,L))})}return Z}var va=(ih=Object(Ur.injectable)(),oh=Object(Ur.inject)(yr.ConfigService),ih((Ju=function(){function Z(){xi()(this,Z),di()(this,"configService",ah,this),this.container=void 0}var U;return Ri()(Z,[{key:"getEngine",value:(U=eo()(ui.a.mark(function w(){var L,Q,It,Rt;return ui.a.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return L=this.container.get(yr.RenderEngine),Q=this.configService.get(),It=Q.canvas,Rt=Q.engineOptions,K.next=4,L.init(gd({canvas:It||Oc(),swapChainFormat:Wr.TextureFormat.BGRA8Unorm,antialiasing:!1},Rt));case 4:return K.abrupt("return",L);case 5:case"end":return K.stop()}},w,this)})),function(){return U.apply(this,arguments)})},{key:"getTransformComponent",value:function(L){return this.container.get(yr.TransformComponentManager).getComponentByEntity(L)}},{key:"getMeshComponent",value:function(L){return this.container.get(yr.MeshComponentManager).getComponentByEntity(L)}},{key:"setConfig",value:function(L){this.configService.set(L)}},{key:"setContainer",value:function(L){this.container=L}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return na()}},{key:"createScene",value:function(){return this.container.get(sh)}},{key:"createCamera",value:function(){return this.container.get(Hl)}},{key:"createView",value:function(){return this.container.get(uh)}},{key:"createRenderable",value:function(L,Q,It){var Rt=Q?this.container.getNamed(yr.Renderable,Q):this.container.get(Ha);return Rt.setConfig(It||{}),Rt.setEntity(L),Rt}},{key:"createBoxGeometry",value:function(L){return this.container.getNamed(yr.Systems,yr.GeometrySystem).createBox(L)}},{key:"createBufferGeometry",value:function(L){return this.container.getNamed(yr.Systems,yr.GeometrySystem).createBufferGeometry(L)}},{key:"createInstancedBufferGeometry",value:function(L){return this.container.getNamed(yr.Systems,yr.GeometrySystem).createInstancedBufferGeometry(L)}},{key:"createBasicMaterial",value:function(){return this.container.getNamed(yr.Systems,yr.MaterialSystem).createBasicMaterial()}},{key:"createShaderMaterial",value:function(L){return this.container.getNamed(yr.Systems,yr.MaterialSystem).createShaderMaterial(L)}},{key:"createKernel",value:function(L){var Q=this.container.get(cf);return typeof L=="string"?Q.setBundle(JSON.parse(L)):Q.setBundle(L),Q.init(),Q}},{key:"createRenderer",value:function(){var L=this.container.get(Nc);return L.container=this.container,L.init(),L}},{key:"destroy",value:function(){this.container.getAll(yr.Systems).forEach(function(L){L.tearDown&&L.tearDown()}),this.container.get(yr.RenderEngine).destroy(),this.container.get(yr.InteractorService).destroy()}}],[{key:"create",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Q=Nh(),It=navigator.gpu?ud:Hh;Q.isBound(yr.RenderEngine)||Q.bind(yr.RenderEngine).to(It).inSingletonScope(),Q.bind(Nc).toSelf(),Q.bind(cf).toSelf(),Q.bind(Ha).toSelf(),Q.bind(uh).toSelf(),Q.bind(Hl).toSelf(),Q.bind(sh).toSelf(),Q.bind(Z).toSelf(),Q.bind(yr.Renderable).to(pd).whenTargetNamed(Ha.POINT),Q.bind(yr.Renderable).to(hd).whenTargetNamed(Ha.LINE),Q.bind(yr.Renderable).to(ld).whenTargetNamed(Ha.GRID);var Rt=Q.get(Z);return Rt.setContainer(Q),Rt.setConfig(L),Rt}}]),Z}(),ah=Mi()(Ju.prototype,"configService",[oh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rc=Ju))||Rc),hs=function(U,w){return U?E(U)?function(){return U}:U:function(){return w||1}},c=function(U,w){var L=[],Q=[],It={},Rt=0;for(Rt=0;Rt<U.length;Rt++){var K=U[Rt];It[K.id]=Rt,L.push(K.x),L.push(K.y),L.push(0),L.push(0),Q.push([])}for(Rt=0;Rt<w.length;Rt++){var Dt=w[Rt];Q[It[Dt.source]].push(It[Dt.target]),Q[It[Dt.target]].push(It[Dt.source])}var Qt=0;for(Rt=0;Rt<U.length;Rt++){var qt=L.length,xe=Q[Rt],Ie=xe.length;L[4*Rt+2]=qt,L[4*Rt+3]=xe.length,Qt=Math.max(Qt,xe.length);for(var Ye=0;Ye<Ie;++Ye){var Ne=xe[Ye];L.push(+Ne)}}for(;L.length%4!=0;)L.push(0);return{maxEdgePerVetex:Qt,array:new Float32Array(L)}},o=function(U,w,L,Q){var It=[],Rt=[],K={},Dt=0;for(Dt=0;Dt<U.length;Dt++){var Qt=U[Dt];K[Qt.id]=Dt,It.push(Qt.x),It.push(Qt.y),It.push(0),It.push(0),Rt.push([])}for(Dt=0;Dt<w.length;Dt++){var qt=w[Dt];Rt[K[qt.source]].push(K[qt.target]),Rt[K[qt.source]].push(L(qt)),Rt[K[qt.source]].push(Q(qt)),Rt[K[qt.source]].push(0),Rt[K[qt.target]].push(K[qt.source]),Rt[K[qt.target]].push(L(qt)),Rt[K[qt.target]].push(Q(qt)),Rt[K[qt.target]].push(0)}var xe=0;for(Dt=0;Dt<U.length;Dt++){var Ie=It.length,Ye=Rt[Dt],Ne=Ye.length;It[4*Dt+2]=Ie+1048576*Ne/4,It[4*Dt+3]=0,xe=Math.max(xe,Ne/4);for(var He=0;He<Ne;++He){var Je=Ye[He];It.push(+Je)}}for(;It.length%4!=0;)It.push(0);return{maxEdgePerVetex:xe,array:new Float32Array(It)}},t=function(U,w){var L=[],Q=U.length,It={};return w.forEach(function(Rt){U.forEach(function(K,Dt){if(It[Rt[K]]===void 0&&(It[Rt[K]]=Object.keys(It).length),L.push(It[Rt[K]]),Dt===Q-1)for(;L.length%4!=0;)L.push(0)})}),{array:new Float32Array(L),count:Object.keys(It).length}},i=function(U){for(var w=[],L=U.length,Q=U[0].length,It=function(Dt){U.forEach(function(Qt,qt){if(w.push(Qt[Dt]),qt===L-1)for(;w.length%4!=0;)w.push(0)})},Rt=0;Rt<Q;Rt++)It(Rt);return new Float32Array(w)};function b(Z){return(b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Z)}function D(Z,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Z,L.key,L)}}function rt(Z,U){return(rt=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Z,U)}function Mt(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=ne(Z);if(U){var Q=ne(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return Nt(this,w)}}function Nt(Z,U){return!U||b(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Z):U}function ne(Z){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Z)}var ge=function(U,w,L,Q){return new(L||(L=Promise))(function(It,Rt){function K(qt){try{Qt(Q.next(qt))}catch(xe){Rt(xe)}}function Dt(qt){try{Qt(Q.throw(qt))}catch(xe){Rt(xe)}}function Qt(qt){var xe;qt.done?It(qt.value):(xe=qt.value,xe instanceof L?xe:new L(function(Ie){Ie(xe)})).then(K,Dt)}Qt((Q=Q.apply(U,w||[])).next())})},be=function(Z){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&rt(Rt,K)})(It,Z);var U,w,L,Q=Mt(It);function It(Rt){var K;return function(Dt,Qt){if(!(Dt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=Q.call(this)).maxIteration=1e3,K.gravity=10,K.speed=1,K.clustering=!1,K.clusterField="cluster",K.clusterGravity=10,K.workerEnabled=!1,K.nodes=[],K.edges=[],K.width=300,K.height=300,K.nodeMap={},K.nodeIdxMap={},K.updateCfg(Rt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return ge(this,void 0,void 0,at.mark(function K(){var Dt,Qt,qt,xe,Ie,Ye=this;return at.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if((Qt=(Dt=this).nodes)&&Qt.length!==0){Ne.next=5;break}return Dt.onLayoutEnd&&Dt.onLayoutEnd(),Ne.abrupt("return");case 5:if(Dt.width||typeof window=="undefined"||(Dt.width=window.innerWidth),Dt.height||typeof window=="undefined"||(Dt.height=window.innerHeight),Dt.center||(Dt.center=[Dt.width/2,Dt.height/2]),qt=Dt.center,Qt.length!==1){Ne.next=14;break}return Qt[0].x=qt[0],Qt[0].y=qt[1],Dt.onLayoutEnd&&Dt.onLayoutEnd(),Ne.abrupt("return");case 14:return xe={},Ie={},Qt.forEach(function(He,Je){E(He.x)||(He.x=Math.random()*Ye.width),E(He.y)||(He.y=Math.random()*Ye.height),xe[He.id]=He,Ie[He.id]=Je}),Dt.nodeMap=xe,Dt.nodeIdxMap=Ie,Ne.next=21,Dt.run();case 21:case"end":return Ne.stop()}},K,this)}))}},{key:"executeWithWorker",value:function(K,Dt){return ge(this,void 0,void 0,at.mark(function Qt(){var qt,xe,Ie,Ye,Ne,He=this;return at.wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:if(xe=(qt=this).nodes,Ie=qt.center,xe&&xe.length!==0){Je.next=5;break}return Je.abrupt("return");case 5:if(xe.length!==1){Je.next=9;break}return xe[0].x=Ie[0],xe[0].y=Ie[1],Je.abrupt("return");case 9:return Ye={},Ne={},xe.forEach(function(Ge,qe){E(Ge.x)||(Ge.x=Math.random()*He.width),E(Ge.y)||(Ge.y=Math.random()*He.height),Ye[Ge.id]=Ge,Ne[Ge.id]=qe}),qt.nodeMap=Ye,qt.nodeIdxMap=Ne,Je.next=16,qt.run(K,Dt);case 16:case"end":return Je.stop()}},Qt,this)}))}},{key:"run",value:function(K,Dt){return ge(this,void 0,void 0,at.mark(function Qt(){var qt,xe,Ie,Ye,Ne,He,Je,Ge,qe,yn,Dn,En,Ln,Zn,Qn,qn,fr,br,gr,hr,Cr,dr,Jr,qr,wi,Tr,pi=this;return at.wrap(function(Ei){for(;;)switch(Ei.prev=Ei.next){case 0:for(xe=(qt=this).nodes,Ie=qt.edges,Ye=qt.maxIteration,Ne=qt.center,He=qt.height*qt.width,Je=Math.sqrt(He)/10,Ge=He/(xe.length+1),qe=Math.sqrt(Ge),yn=qt.speed,Dn=qt.clustering,En=t([qt.clusterField],xe),Ln=En.array,Zn=En.count,Qn=xe.length,qn=c(xe,Ie),fr=qn.maxEdgePerVetex,br=qn.array,gr=qt.workerEnabled,hr=gr?va.create({canvas:K,engineOptions:{supportCompute:!0}}):va.create({engineOptions:{supportCompute:!0}}),Cr=qt.onLayoutEnd,dr=[],Jr=0;Jr<Zn;Jr++)dr.push(0,0,0,0);return qr=hr.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([Qn,1,1]).setBinding({u_Data:br,u_K:qe,u_K2:Ge,u_Gravity:qt.gravity,u_ClusterGravity:qt.clusterGravity||qt.gravity||1,u_Speed:yn,u_MaxDisplace:Je,u_Clustering:Dn?1:0,u_Center:Ne,u_AttributeArray:Ln,u_ClusterCenters:dr,MAX_EDGE_PER_VERTEX:fr,VERTEX_COUNT:Qn}),Dn&&(wi=hr.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([Zn,1,1]).setBinding({u_Data:br,u_NodeAttributes:Ln,u_ClusterCenters:dr,VERTEX_COUNT:Qn,CLUSTER_COUNT:Zn})),Tr=function(){return ge(pi,void 0,void 0,at.mark(function Ao(){var go,Ii;return at.wrap(function(Gi){for(;;)switch(Gi.prev=Gi.next){case 0:go=0;case 1:if(!(go<Ye)){Gi.next=13;break}return Gi.next=4,qr.execute();case 4:if(!Dn){Gi.next=9;break}return wi.setBinding({u_Data:qr}),Gi.next=8,wi.execute();case 8:qr.setBinding({u_ClusterCenters:wi});case 9:qr.setBinding({u_MaxDisplace:Je*=.99});case 10:go++,Gi.next=1;break;case 13:return Gi.next=15,qr.getOutput();case 15:Ii=Gi.sent,K?Dt.postMessage({type:Xr,vertexEdgeData:Ii}):xe.forEach(function(Po,Fo){var Ra=Ii[4*Fo],pa=Ii[4*Fo+1];Po.x=Ra,Po.y=pa}),Cr&&Cr();case 18:case"end":return Gi.stop()}},Ao)}))},Ei.next=24,Tr();case 24:case"end":return Ei.stop()}},Qt,this)}))}},{key:"getType",value:function(){return"fruchterman-gpu"}}])&&D(U.prototype,w),L&&D(U,L),It}(x);function Ae(Z){return(Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Z)}function Xe(Z,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Z,L.key,L)}}function an(Z,U){return(an=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Z,U)}function gn(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=Kn(Z);if(U){var Q=Kn(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return Yn(this,w)}}function Yn(Z,U){return!U||Ae(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Z):U}function Kn(Z){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Z)}var ir=function(U,w,L,Q){return new(L||(L=Promise))(function(It,Rt){function K(qt){try{Qt(Q.next(qt))}catch(xe){Rt(xe)}}function Dt(qt){try{Qt(Q.throw(qt))}catch(xe){Rt(xe)}}function Qt(qt){var xe;qt.done?It(qt.value):(xe=qt.value,xe instanceof L?xe:new L(function(Ie){Ie(xe)})).then(K,Dt)}Qt((Q=Q.apply(U,w||[])).next())})},cr=function(Z){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&an(Rt,K)})(It,Z);var U,w,L,Q=gn(It);function It(Rt){var K;return function(Dt,Qt){if(!(Dt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=Q.call(this)).maxIteration=1e3,K.edgeStrength=200,K.nodeStrength=1e3,K.coulombDisScale=.005,K.damping=.9,K.maxSpeed=1e3,K.minMovement=1,K.interval=.02,K.factor=1,K.linkDistance=1,K.gravity=10,K.workerEnabled=!1,K.nodes=[],K.edges=[],K.width=300,K.height=300,K.nodeMap={},K.nodeIdxMap={},K.updateCfg(Rt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return ir(this,void 0,void 0,at.mark(function K(){var Dt,Qt,qt,xe,Ie;return at.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if((Qt=(Dt=this).nodes)&&Qt.length!==0){Ye.next=5;break}return Dt.onLayoutEnd&&Dt.onLayoutEnd(),Ye.abrupt("return");case 5:if(Dt.width||typeof window=="undefined"||(Dt.width=window.innerWidth),Dt.height||typeof window=="undefined"||(Dt.height=window.innerHeight),Dt.center||(Dt.center=[Dt.width/2,Dt.height/2]),qt=Dt.center,Qt.length!==1){Ye.next=14;break}return Qt[0].x=qt[0],Qt[0].y=qt[1],Dt.onLayoutEnd&&Dt.onLayoutEnd(),Ye.abrupt("return");case 14:return xe={},Ie={},Qt.forEach(function(Ne,He){E(Ne.x)||(Ne.x=Math.random()*Dt.width),E(Ne.y)||(Ne.y=Math.random()*Dt.height),xe[Ne.id]=Ne,Ie[Ne.id]=He}),Dt.nodeMap=xe,Dt.nodeIdxMap=Ie,Dt.nodeStrength=hs(Dt.nodeStrength,1),Dt.edgeStrength=hs(Dt.edgeStrength,1),Ye.next=23,Dt.run();case 23:case"end":return Ye.stop()}},K,this)}))}},{key:"executeWithWorker",value:function(K,Dt){var Qt=this,qt=Qt.nodes,xe=Qt.center;if(qt&&qt.length!==0){if(qt.length===1)return qt[0].x=xe[0],void(qt[0].y=xe[1]);var Ie={},Ye={};qt.forEach(function(Ne,He){E(Ne.x)||(Ne.x=Math.random()*Qt.width),E(Ne.y)||(Ne.y=Math.random()*Qt.height),Ie[Ne.id]=Ne,Ye[Ne.id]=He}),Qt.nodeMap=Ie,Qt.nodeIdxMap=Ye,Qt.nodeStrength=hs(Qt.nodeStrength,1),Qt.edgeStrength=hs(Qt.edgeStrength,1),Qt.run(K,Dt)}}},{key:"run",value:function(K,Dt){return ir(this,void 0,void 0,at.mark(function Qt(){var qt,xe,Ie,Ye,Ne,He,Je,Ge,qe,yn,Dn,En,Ln,Zn,Qn,qn,fr,br,gr,hr,Cr,dr,Jr,qr,wi,Tr=this;return at.wrap(function(pi){for(;;)switch(pi.prev=pi.next){case 0:for(xe=(qt=this).nodes,Ie=qt.edges,Ye=qt.maxIteration,qt.width||typeof window=="undefined"||(qt.width=window.innerWidth),qt.height||typeof window=="undefined"||(qt.height=window.innerHeight),Ne=xe.length,qt.linkDistance=hs(qt.linkDistance),qt.edgeStrength=hs(qt.edgeStrength),He=o(xe,Ie,qt.linkDistance,qt.edgeStrength),Je=He.maxEdgePerVetex,Ge=He.array,qt.degrees=y(xe.length,qt.nodeIdxMap,Ie),qe=[],yn=[],Dn=[],En=[],Ln=[],qt.getMass||(qt.getMass=function(Ei){return qt.degrees[qt.nodeIdxMap[Ei.id]]||1}),Zn=qt.gravity,Qn=qt.center,xe.forEach(function(Ei,ji){qe.push(qt.getMass(Ei)),yn.push(qt.nodeStrength(Ei)),qt.degrees[ji]||(qt.degrees[ji]=0);var Ao=[Qn[0],Qn[1],Zn];if(qt.getCenter){var go=qt.getCenter(Ei,qt.degrees[ji]);go&&E(go[0])&&E(go[1])&&E(go[2])&&(Ao=go)}Dn.push(Ao[0]),En.push(Ao[1]),Ln.push(Ao[2])}),qn=i([qe,qt.degrees,yn]),fr=i([Dn,En,Ln]),br=qt.workerEnabled,gr=br?va.create({canvas:K,engineOptions:{supportCompute:!0}}):va.create({engineOptions:{supportCompute:!0}}),hr=qt.onLayoutEnd,Cr=[],Ge.forEach(function(Ei){Cr.push(Ei)}),dr=0;dr<4;dr++)Cr.push(0);return Jr=gr.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = dist * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (1000.0 * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.w;\\nvar ay : f32 = vy * attributes2.w;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = dist * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (1000.0 * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.w;\\nfloat ay = vy * attributes2.w;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = dist * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (1000.0 * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.w;\\nfloat ay = vy * attributes2.w;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([Ne,1,1]).setBinding({u_Data:Ge,u_damping:qt.damping,u_maxSpeed:qt.maxSpeed,u_minMovement:qt.minMovement,u_coulombDisScale:qt.coulombDisScale,u_factor:qt.factor,u_NodeAttributeArray1:qn,u_NodeAttributeArray2:fr,MAX_EDGE_PER_VERTEX:Je,VERTEX_COUNT:Ne,u_AveMovement:Cr,u_interval:qt.interval}),qr=gr.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([1,1,1]).setBinding({u_Data:Ge,VERTEX_COUNT:Ne,u_AveMovement:[0,0,0,0]}),wi=function(){return ir(Tr,void 0,void 0,at.mark(function ji(){var Ao,go,Ii;return at.wrap(function(Gi){for(;;)switch(Gi.prev=Gi.next){case 0:Ao=0;case 1:if(!(Ao<Ye)){Gi.next=12;break}return Gi.next=4,Jr.execute();case 4:return qr.setBinding({u_Data:Jr}),Gi.next=7,qr.execute();case 7:go=Math.max(.02,qt.interval-.002*Ao),Jr.setBinding({u_interval:go,u_AveMovement:qr});case 9:Ao++,Gi.next=1;break;case 12:return Gi.next=14,Jr.getOutput();case 14:Ii=Gi.sent,K?Dt.postMessage({type:Xr,vertexEdgeData:Ii}):xe.forEach(function(Po,Fo){var Ra=Ii[4*Fo],pa=Ii[4*Fo+1];Po.x=Ra,Po.y=pa}),hr&&hr();case 17:case"end":return Gi.stop()}},ji)}))},pi.next=33,wi();case 33:case"end":return pi.stop()}},Qt,this)}))}},{key:"getType",value:function(){return"gForce-gpu"}}])&&Xe(U.prototype,w),L&&Xe(U,L),It}(x);function Rr(Z){return(Rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(Z)}function _r(Z,U){for(var w=0;w<U.length;w++){var L=U[w];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(Z,L.key,L)}}function zr(Z,U){return(zr=Object.setPrototypeOf||function(w,L){return w.__proto__=L,w})(Z,U)}function ki(Z){var U=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(w){return!1}}();return function(){var w,L=mi(Z);if(U){var Q=mi(this).constructor;w=Reflect.construct(L,arguments,Q)}else w=L.apply(this,arguments);return Ai(this,w)}}function Ai(Z,U){return!U||Rr(U)!=="object"&&typeof U!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(Z):U}function mi(Z){return(mi=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(Z)}var Ki=function(Z){(function(Rt,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(K&&K.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),K&&zr(Rt,K)})(It,Z);var U,w,L,Q=ki(It);function It(Rt){var K;return function(Dt,Qt){if(!(Dt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(K=Q.call(this)).center=[0,0],K.maxIteration=100,K.gravity=10,K.comboGravity=10,K.linkDistance=10,K.alpha=1,K.alphaMin=.001,K.alphaDecay=1-Math.pow(K.alphaMin,1/300),K.alphaTarget=0,K.velocityDecay=.6,K.edgeStrength=.6,K.nodeStrength=30,K.preventOverlap=!1,K.preventNodeOverlap=!1,K.preventComboOverlap=!1,K.collideStrength=void 0,K.nodeCollideStrength=.5,K.comboCollideStrength=.5,K.comboSpacing=20,K.comboPadding=10,K.optimizeRangeFactor=1,K.onTick=function(){},K.onLayoutEnd=function(){},K.depthAttractiveForceScale=1,K.depthRepulsiveForceScale=2,K.nodes=[],K.edges=[],K.combos=[],K.comboTrees=[],K.width=300,K.height=300,K.bias=[],K.nodeMap={},K.oriComboMap={},K.indexMap={},K.comboMap={},K.previousLayouted=!1,K.updateCfg(Rt),K}return U=It,(w=[{key:"getDefaultCfg",value:function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}},{key:"execute",value:function(){var K=this.nodes,Dt=this.center;if(this.comboTree={id:"comboTreeRoot",depth:-1,children:this.comboTrees},K&&K.length!==0){if(K.length===1)return K[0].x=Dt[0],K[0].y=Dt[1],void(this.onLayoutEnd&&this.onLayoutEnd());this.initVals(),this.run(),this.onLayoutEnd&&this.onLayoutEnd()}else this.onLayoutEnd&&this.onLayoutEnd()}},{key:"run",value:function(){var K=this,Dt=K.nodes,Qt=K.previousLayouted?K.maxIteration/5:K.maxIteration;K.width||typeof window=="undefined"||(K.width=window.innerWidth),K.height||typeof window=="undefined"||(K.height=window.innerHeight);var qt=K.center,xe=K.velocityDecay,Ie=K.comboMap;K.previousLayouted||K.initPos(Ie);for(var Ye=function(qe){var yn=[];Dt.forEach(function(Dn,En){yn[En]={x:0,y:0}}),K.applyCalculate(yn),K.applyComboCenterForce(yn),Dt.forEach(function(Dn,En){E(Dn.x)&&E(Dn.y)&&(Dn.x+=yn[En].x*xe,Dn.y+=yn[En].y*xe)}),K.alpha+=(K.alphaTarget-K.alpha)*K.alphaDecay,K.onTick()},Ne=0;Ne<Qt;Ne++)Ye();var He=[0,0];Dt.forEach(function(Ge){E(Ge.x)&&E(Ge.y)&&(He[0]+=Ge.x,He[1]+=Ge.y)}),He[0]/=Dt.length,He[1]/=Dt.length;var Je=[qt[0]-He[0],qt[1]-He[1]];Dt.forEach(function(Ge,qe){E(Ge.x)&&E(Ge.y)&&(Ge.x+=Je[0],Ge.y+=Je[1])}),K.combos.forEach(function(Ge){var qe=Ie[Ge.id];qe&&qe.empty&&(Ge.x=qe.cx||Ge.x,Ge.y=qe.cy||Ge.y)}),K.previousLayouted=!0}},{key:"initVals",value:function(){var K=this.edges,Dt=this.nodes,Qt=this.combos,qt={},xe={},Ie={};Dt.forEach(function(Tr,pi){xe[Tr.id]=Tr,Ie[Tr.id]=pi}),this.nodeMap=xe,this.indexMap=Ie;var Ye={};Qt.forEach(function(Tr){Ye[Tr.id]=Tr}),this.oriComboMap=Ye,this.comboMap=this.getComboMap();var Ne=this.preventOverlap;this.preventComboOverlap=this.preventComboOverlap||Ne,this.preventNodeOverlap=this.preventNodeOverlap||Ne;var He=this.collideStrength;He&&(this.comboCollideStrength=He,this.nodeCollideStrength=He),this.comboCollideStrength=this.comboCollideStrength?this.comboCollideStrength:0,this.nodeCollideStrength=this.nodeCollideStrength?this.nodeCollideStrength:0;for(var Je=0;Je<K.length;++Je)qt[K[Je].source]?qt[K[Je].source]++:qt[K[Je].source]=1,qt[K[Je].target]?qt[K[Je].target]++:qt[K[Je].target]=1;for(var Ge=[],qe=0;qe<K.length;++qe)Ge[qe]=qt[K[qe].source]/(qt[K[qe].source]+qt[K[qe].target]);this.bias=Ge;var yn,Dn,En=this.nodeSize,Ln=this.nodeSpacing;if(Dn=E(Ln)?function(){return Ln}:T(Ln)?Ln:function(){return 0},this.nodeSpacing=Dn,En)if(T(En))yn=function(pi){return En(pi)};else if(l(En)){var Zn=(En[0]>En[1]?En[0]:En[1])/2;yn=function(pi){return Zn}}else{var Qn=En/2;yn=function(pi){return Qn}}else yn=function(pi){return pi.size?l(pi.size)?(pi.size[0]>pi.size[1]?pi.size[0]:pi.size[1])/2:pi.size/2:10};this.nodeSize=yn;var qn,fr=this.comboSpacing;qn=E(fr)?function(){return fr}:T(fr)?fr:function(){return 0},this.comboSpacing=qn;var br,gr=this.comboPadding;br=E(gr)?function(){return gr}:l(gr)?function(){return Math.max.apply(null,gr)}:T(gr)?gr:function(){return 0},this.comboPadding=br;var hr,Cr=this.linkDistance;Cr||(Cr=10),hr=E(Cr)?function(Tr){return Cr}:Cr,this.linkDistance=hr;var dr,Jr=this.edgeStrength;Jr||(Jr=1),dr=E(Jr)?function(Tr){return Jr}:Jr,this.edgeStrength=dr;var qr,wi=this.nodeStrength;wi||(wi=30),qr=E(wi)?function(Tr){return wi}:wi,this.nodeStrength=qr}},{key:"initPos",value:function(K){this.nodes.forEach(function(Dt,Qt){var qt=Dt.comboId,xe=K[qt];qt&&xe?(Dt.x=xe.cx+100/(Qt+1),Dt.y=xe.cy+100/(Qt+1)):(Dt.x=100/(Qt+1),Dt.y=100/(Qt+1))})}},{key:"getComboMap",value:function(){var K=this,Dt=K.nodeMap,Qt=K.indexMap,qt=K.comboTrees,xe=K.oriComboMap,Ie={};return(qt||[]).forEach(function(Ye){var Ne=[];d(Ye,function(He){if(He.itemType==="node"||!xe[He.id])return!0;if(Ie[He.id]===void 0){var Je={id:He.id,name:He.id,cx:0,cy:0,count:0,depth:K.oriComboMap[He.id].depth,children:[]};Ie[He.id]=Je}var Ge=He.children;Ge&&Ge.forEach(function(Zn){if(!Ie[Zn.id]&&!Dt[Zn.id])return!0;Ne.push(Zn)});var qe=Ie[He.id];if(qe.cx=0,qe.cy=0,Ne.length===0){qe.empty=!0;var yn=xe[He.id],Dn=Object.keys(Dt).length,En="".concat(He.id,"-visual-child-").concat(Dn),Ln={id:En,x:yn.x,y:yn.y,depth:qe.depth+1,itemType:"node"};K.nodes.push(Ln),Dt[En]=Ln,Qt[En]=Dn,qe.cx=yn.x,qe.cy=yn.y,Ne.push(Ln)}return Ne.forEach(function(Zn){if(qe.count++,Zn.itemType!=="node"){var Qn=Ie[Zn.id];return E(Qn.cx)&&(qe.cx+=Qn.cx),void(E(Qn.cy)&&(qe.cy+=Qn.cy))}var qn=Dt[Zn.id];qn&&(E(qn.x)&&(qe.cx+=qn.x),E(qn.y)&&(qe.cy+=qn.y))}),qe.cx/=qe.count,qe.cy/=qe.count,qe.children=Ne,!0})}),Ie}},{key:"applyComboCenterForce",value:function(K){var Dt=this.gravity,Qt=this.comboGravity||Dt,qt=this.alpha,xe=this.comboTrees,Ie=this.indexMap,Ye=this.nodeMap,Ne=this.comboMap;(xe||[]).forEach(function(He){d(He,function(Je){if(Je.itemType==="node"||!Ne[Je.id])return!0;var Ge=Ne[Je.id],qe=(Ge.depth+1)/10*.5,yn=Ge.cx,Dn=Ge.cy;return Ge.cx=0,Ge.cy=0,Ge.children.forEach(function(En){if(En.itemType!=="node"){var Ln=Ne[En.id];return Ln&&E(Ln.cx)&&(Ge.cx+=Ln.cx),void(Ln&&E(Ln.cy)&&(Ge.cy+=Ln.cy))}var Zn=Ye[En.id],Qn=Zn.x-yn||.005,qn=Zn.y-Dn||.005,fr=Math.sqrt(Qn*Qn+qn*qn),br=Ie[Zn.id],gr=Qt*qt/fr*qe;K[br].x-=Qn*gr,K[br].y-=qn*gr,E(Zn.x)&&(Ge.cx+=Zn.x),E(Zn.y)&&(Ge.cy+=Zn.y)}),Ge.cx/=Ge.count,Ge.cy/=Ge.count,!0})})}},{key:"applyCalculate",value:function(K){var Dt=this.comboMap,Qt=this.nodes,qt={};Qt.forEach(function(xe,Ie){Qt.forEach(function(Ye,Ne){if(!(Ie<Ne)){var He=xe.x-Ye.x||.005,Je=xe.y-Ye.y||.005,Ge=He*He+Je*Je,qe=Math.sqrt(Ge);Ge<1&&(Ge=qe),qt["".concat(xe.id,"-").concat(Ye.id)]={vx:He,vy:Je,vl2:Ge,vl:qe},qt["".concat(Ye.id,"-").concat(xe.id)]={vl2:Ge,vl:qe,vx:-He,vy:-Je}}})}),this.updateComboSizes(Dt),this.calRepulsive(K,qt),this.calAttractive(K,qt),this.preventComboOverlap&&this.comboNonOverlapping(K,Dt)}},{key:"updateComboSizes",value:function(K){var Dt=this,Qt=Dt.comboTrees,qt=Dt.nodeMap,xe=Dt.nodeSize,Ie=Dt.comboSpacing,Ye=Dt.comboPadding;(Qt||[]).forEach(function(Ne){var He=[];d(Ne,function(Je){if(Je.itemType==="node")return!0;var Ge=K[Je.id];if(!Ge)return!1;var qe=Je.children;qe&&qe.forEach(function(En){(K[En.id]||qt[En.id])&&He.push(En)}),Ge.minX=1/0,Ge.minY=1/0,Ge.maxX=-1/0,Ge.maxY=-1/0,He.forEach(function(En){if(En.itemType!=="node")return!0;var Ln=qt[En.id];if(!Ln)return!0;var Zn=xe(Ln),Qn=Ln.x-Zn,qn=Ln.y-Zn,fr=Ln.x+Zn,br=Ln.y+Zn;Ge.minX>Qn&&(Ge.minX=Qn),Ge.minY>qn&&(Ge.minY=qn),Ge.maxX<fr&&(Ge.maxX=fr),Ge.maxY<br&&(Ge.maxY=br)});var yn=Dt.oriComboMap[Je.id].size||10;l(yn)&&(yn=yn[0]);var Dn=Math.max(Ge.maxX-Ge.minX,Ge.maxY-Ge.minY,yn);return Ge.r=Dn/2+Ie(Ge)/2+Ye(Ge),!0})})}},{key:"comboNonOverlapping",value:function(K,Dt){var Qt=this.comboTree,qt=this.comboCollideStrength,xe=this.indexMap,Ie=this.nodeMap;d(Qt,function(Ye){if(!Dt[Ye.id]&&!Ie[Ye.id]&&Ye.id!=="comboTreeRoot")return!1;var Ne=Ye.children;return Ne&&Ne.length>1&&Ne.forEach(function(He,Je){if(He.itemType==="node")return!1;var Ge=Dt[He.id];Ge&&Ne.forEach(function(qe,yn){if(Je<=yn||qe.itemType==="node")return!1;var Dn=Dt[qe.id];if(!Dn)return!1;var En=Ge.cx-Dn.cx||.005,Ln=Ge.cy-Dn.cy||.005,Zn=En*En+Ln*Ln,Qn=Ge.r,qn=Dn.r,fr=Qn+qn,br=qn*qn,gr=Qn*Qn;if(Zn<fr*fr){var hr=He.children;if(!hr||hr.length===0)return!1;var Cr=qe.children;if(!Cr||Cr.length===0)return!1;var dr=Math.sqrt(Zn),Jr=(fr-dr)/dr*qt,qr=En*Jr,wi=Ln*Jr,Tr=br/(gr+br),pi=1-Tr;hr.forEach(function(Ei){if(Ei.itemType!=="node")return!1;if(Ie[Ei.id]){var ji=xe[Ei.id];Cr.forEach(function(Ao){if(Ao.itemType!=="node"||!Ie[Ao.id])return!1;var go=xe[Ao.id];K[ji].x+=qr*Tr,K[ji].y+=wi*Tr,K[go].x-=qr*pi,K[go].y-=wi*pi})}})}})}),!0})}},{key:"calRepulsive",value:function(K,Dt){var Qt=this,qt=Qt.nodes,xe=Qt.width*Qt.optimizeRangeFactor,Ie=Qt.nodeStrength,Ye=Qt.alpha,Ne=Qt.nodeCollideStrength,He=Qt.preventNodeOverlap,Je=Qt.nodeSize,Ge=Qt.nodeSpacing,qe=Qt.depthRepulsiveForceScale,yn=Qt.center;qt.forEach(function(Dn,En){if(Dn.x&&Dn.y){if(yn){var Ln=Qt.gravity,Zn=Dn.x-yn[0]||.005,Qn=Dn.y-yn[1]||.005,qn=Math.sqrt(Zn*Zn+Qn*Qn);K[En].x-=Zn*Ln*Ye/qn,K[En].y-=Qn*Ln*Ye/qn}qt.forEach(function(fr,br){if(En!==br&&fr.x&&fr.y){var gr=Dt["".concat(Dn.id,"-").concat(fr.id)],hr=gr.vl2,Cr=gr.vl;if(!(Cr>xe)){var dr=Dt["".concat(Dn.id,"-").concat(fr.id)],Jr=dr.vx,qr=dr.vy,wi=Math.log(Math.abs(fr.depth-Dn.depth)/10)+1||1;wi=wi<1?1:wi,fr.comboId!==Dn.comboId&&(wi+=1);var Tr=wi?Math.pow(qe,wi):1,pi=Ie(fr)*Ye/hr*Tr;if(K[En].x+=Jr*pi,K[En].y+=qr*pi,En<br&&He){var Ei=Je(Dn)+Ge(Dn),ji=Je(fr)+Ge(fr),Ao=Ei+ji;if(hr<Ao*Ao){var go=(Ao-Cr)/Cr*Ne,Ii=ji*ji,Gi=Ii/(Ei*Ei+Ii),Po=Jr*go,Fo=qr*go;K[En].x+=Po*Gi,K[En].y+=Fo*Gi,Gi=1-Gi,K[br].x-=Po*Gi,K[br].y-=Fo*Gi}}}}})}})}},{key:"calAttractive",value:function(K,Dt){var Qt=this,qt=Qt.edges,xe=Qt.linkDistance,Ie=Qt.alpha,Ye=Qt.edgeStrength,Ne=Qt.bias,He=Qt.depthAttractiveForceScale;qt.forEach(function(Je,Ge){if(Je.source&&Je.target&&Je.source!==Je.target){var qe=Qt.indexMap[Je.source],yn=Qt.indexMap[Je.target],Dn=Qt.nodeMap[Je.source],En=Qt.nodeMap[Je.target];if(Dn&&En){var Ln=Math.log(Math.abs(Dn.depth-En.depth)/10);Dn.comboId===En.comboId&&(Ln/=2);var Zn=Ln?Math.pow(He,Ln):1;if(Dn.comboId!==En.comboId&&Zn===1?Zn=He/2:Dn.comboId===En.comboId&&(Zn=2),E(En.x)&&E(Dn.x)&&E(En.y)&&E(Dn.y)){var Qn=Dt["".concat(Je.target,"-").concat(Je.source)],qn=Qn.vl,fr=Qn.vx,br=Qn.vy,gr=(qn-xe(Je))/qn*Ie*Ye(Je)*Zn,hr=fr*gr,Cr=br*gr,dr=Ne[Ge];K[yn].x-=hr*dr,K[yn].y-=Cr*dr,K[qe].x+=hr*(1-dr),K[qe].y+=Cr*(1-dr)}}}})}},{key:"getType",value:function(){return"comboForce"}}])&&_r(U.prototype,w),L&&_r(U,L),It}(x),vo,po=new Proxy({},{get:function(U,w){return Wn(w)},set:function(U,w,L){return mn(w,L),!0}});vo||(vo={}),mn("grid",ft),mn("random",Et),mn("force",$r),mn("circular",Pi),mn("dagre",Oe),mn("radial",Pe),mn("concentric",oi),mn("mds",zo),mn("fruchterman",Yo),mn("fruchterman-gpu",be),mn("gForce",ot),mn("gForce-gpu",cr),mn("comboForce",Ki);var yo=self;yo.onmessage=function(Z){(function(U){var w=U.data.type;return w===Vi||w===pr})(Z)&&function(U){switch(U.data.type){case Vi:var w=U.data,L=w.nodes,Q=w.edges,It=w.layoutCfg,Rt=It===void 0?{}:It,K=Rt.type,Dt=Wn(K);if(!Dt){yo.postMessage({type:jr,message:"layout ".concat(K," not found")});break}var Qt=new Dt(Rt);Qt.init({nodes:L,edges:Q}),Qt.execute(),yo.postMessage({nodes:L,type:ro}),Qt.destroy();break;case pr:var qt=U.data,xe=qt.nodes,Ie=qt.edges,Ye=qt.layoutCfg,Ne=Ye===void 0?{}:Ye,He=qt.canvas,Je=Ne.type,Ge=Wn(Je);if(!Ge){yo.postMessage({type:jr,message:"layout ".concat(Je," not found")});break}if(Je.split("-")[1]!=="gpu"){yo.postMessage({type:jr,message:"layout ".concat(Je," does not support GPU")});break}var qe=new Ge(Ne);qe.init({nodes:xe,edges:Ie}),qe.executeWithWorker(He,yo)}}(Z)};var wo=function(U,w){w.isCustomLayout=!0,mn(U,w)}},function(a,A,e){"use strict";e.d(A,"a",function(){return m}),e.d(A,"b",function(){return O});var r=e(36),p=e(22);function m(l,E){E.forEach(function(j){j.draw(l)})}function O(l,E){var j=l.get("canvas");if(j&&j.get("autoDraw")){var y=j.get("context"),n=l.getParent(),s=n?n.getChildren():[j],d=l.get("el");if(E==="remove")if(l.get("isClipShape")){var M=d&&d.parentNode,S=M&&M.parentNode;M&&S&&S.removeChild(M)}else d&&d.parentNode&&d.parentNode.removeChild(d);else if(E==="show")d.setAttribute("visibility","visible");else if(E==="hide")d.setAttribute("visibility","hidden");else if(E==="zIndex")Object(p.c)(d,s.indexOf(l));else if(E==="sort"){var T=l.get("children");T&&T.length&&Object(p.d)(l,function(v,x){return T.indexOf(v)-T.indexOf(x)?1:0})}else E==="clear"?d&&(d.innerHTML=""):E==="matrix"?Object(r.c)(l):E==="clip"?Object(r.a)(l,y):E==="attr"||E==="add"&&l.draw(y)}}},function(a,A){a.exports=function(e,r){return e===r||e!=e&&r!=r}},function(a,A,e){var r=e(47).Symbol;a.exports=r},function(a,A,e){(function(r){function p(n){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(n)}var m=e(47),O=e(304),l=p(A)=="object"&&A&&!A.nodeType&&A,E=l&&p(r)=="object"&&r&&!r.nodeType&&r,j=E&&E.exports===l?m.Buffer:void 0,y=(j?j.isBuffer:void 0)||O;r.exports=y}).call(this,e(86)(a))},function(a,A,e){var r=e(313),p=e(125),m=e(314),O=e(176),l=e(315),E=e(57),j=e(165),y=j(r),n=j(p),s=j(m),d=j(O),M=j(l),S=E;(r&&S(new r(new ArrayBuffer(1)))!="[object DataView]"||p&&S(new p)!="[object Map]"||m&&S(m.resolve())!="[object Promise]"||O&&S(new O)!="[object Set]"||l&&S(new l)!="[object WeakMap]")&&(S=function(v){var x=E(v),C=x=="[object Object]"?v.constructor:void 0,N=C?j(C):"";if(N)switch(N){case y:return"[object DataView]";case n:return"[object Map]";case s:return"[object Promise]";case d:return"[object Set]";case M:return"[object WeakMap]"}return x}),a.exports=S},function(a,A,e){function r(O){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(O)}var p=e(57),m=e(48);a.exports=function(O){return r(O)=="symbol"||m(O)&&p(O)=="[object Symbol]"}},function(a,A,e){"use strict";var r=e(1),p=e(18),m=e(56),O=e(29),l=e(0),E=e(17),j=function(y){function n(){return y!==null&&y.apply(this,arguments)||this}return Object(r.b)(n,y),n.prototype.onCanvasChange=function(s){Object(O.h)(this,s)},n.prototype.getShapeBase=function(){return m},n.prototype.getGroupBase=function(){return n},n.prototype._applyClip=function(s,d){d&&(s.save(),Object(O.a)(s,d),d.createPath(s),s.restore(),s.clip(),d._afterDraw())},n.prototype.cacheCanvasBBox=function(){var s=this.cfg.children,d=[],M=[];Object(l.f)(s,function(tt){var it=tt.cfg.cacheCanvasBBox;it&&tt.cfg.isInView&&(d.push(it.minX,it.maxX),M.push(it.minY,it.maxY))});var S=null;if(d.length){var T=Math.min.apply(null,d),v=Math.max.apply(null,d),x=Math.min.apply(null,M),C=Math.max.apply(null,M);S={minX:T,minY:x,x:T,y:x,maxX:v,maxY:C,width:v-T,height:C-x};var N=this.cfg.canvas;if(N){var X=N.getViewRange();this.set("isInView",Object(E.f)(S,X))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",S)},n.prototype.draw=function(s,d){var M=this.cfg.children,S=!d||this.cfg.refresh;M.length&&S&&(s.save(),Object(O.a)(s,this),this._applyClip(s,this.getClip()),Object(O.d)(s,M,d),s.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},n.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},n}(p.AbstractGroup);A.a=j},function(a,A,e){"use strict";var r=e(1),p=e(18),m=e(0),O=e(78),l=e(70),E=e(36),j=e(16),y=e(22),n=function(s){function d(){return s!==null&&s.apply(this,arguments)||this}return Object(r.b)(d,s),d.prototype.isEntityGroup=function(){return!0},d.prototype.createDom=function(){var M=Object(y.b)("g");this.set("el",M);var S=this.getParent();if(S){var T=S.get("el");T||(T=S.createDom(),S.set("el",T)),T.appendChild(M)}return M},d.prototype.afterAttrsChange=function(M){s.prototype.afterAttrsChange.call(this,M);var S=this.get("canvas");if(S&&S.get("autoDraw")){var T=S.get("context");this.createPath(T,M)}},d.prototype.onCanvasChange=function(M){Object(l.b)(this,M)},d.prototype.getShapeBase=function(){return O},d.prototype.getGroupBase=function(){return d},d.prototype.draw=function(M){var S=this.getChildren(),T=this.get("el");this.get("destroyed")?T&&T.parentNode.removeChild(T):(T||this.createDom(),Object(E.a)(this,M),this.createPath(M),S.length&&Object(l.a)(M,S))},d.prototype.createPath=function(M,S){var T=this.attr(),v=this.get("el");Object(m.f)(S||T,function(x,C){j.b[C]&&v.setAttribute(j.b[C],x)}),Object(E.c)(this)},d}(p.AbstractGroup);A.a=n},function(a,A,e){"use strict";e.r(A),e.d(A,"Base",function(){return n}),e.d(A,"Circle",function(){return d}),e.d(A,"Dom",function(){return M}),e.d(A,"Ellipse",function(){return S}),e.d(A,"Image",function(){return T}),e.d(A,"Line",function(){return x}),e.d(A,"Marker",function(){return X}),e.d(A,"Path",function(){return tt}),e.d(A,"Polygon",function(){return it}),e.d(A,"Polyline",function(){return pt}),e.d(A,"Rect",function(){return ft}),e.d(A,"Text",function(){return Vt});var r={};e.r(r),e.d(r,"Base",function(){return n}),e.d(r,"Circle",function(){return d}),e.d(r,"Dom",function(){return M}),e.d(r,"Ellipse",function(){return S}),e.d(r,"Image",function(){return T}),e.d(r,"Line",function(){return x}),e.d(r,"Marker",function(){return X}),e.d(r,"Path",function(){return tt}),e.d(r,"Polygon",function(){return it}),e.d(r,"Polyline",function(){return pt}),e.d(r,"Rect",function(){return ft}),e.d(r,"Text",function(){return Vt});var p=e(1),m=e(18),O=e(36),l=e(22),E=e(70),j=e(16),y=e(77),n=function(Lt){function Et(){var J=Lt!==null&&Lt.apply(this,arguments)||this;return J.type="svg",J.canFill=!1,J.canStroke=!1,J}return Object(p.b)(Et,Lt),Et.prototype.getDefaultAttrs=function(){var J=Lt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},J),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},Et.prototype.afterAttrsChange=function(J){Lt.prototype.afterAttrsChange.call(this,J);var ht=this.get("canvas");if(ht&&ht.get("autoDraw")){var vt=ht.get("context");this.draw(vt,J)}},Et.prototype.getShapeBase=function(){return r},Et.prototype.getGroupBase=function(){return y.a},Et.prototype.onCanvasChange=function(J){Object(E.b)(this,J)},Et.prototype.calculateBBox=function(){var J=this.get("el"),ht=null;if(J)ht=J.getBBox();else{var vt=Object(m.getBBoxMethod)(this.get("type"));vt&&(ht=vt(this))}if(ht){var bt=ht.x,At=ht.y,q=ht.width,ct=ht.height,ot=this.getHitLineWidth(),_=ot/2,P=bt-_,Y=At-_;return{x:P,y:Y,minX:P,minY:Y,maxX:bt+q+_,maxY:At+ct+_,width:q+ot,height:ct+ot}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},Et.prototype.isFill=function(){var J=this.attr(),ht=J.fill,vt=J.fillStyle;return(ht||vt||this.isClipShape())&&this.canFill},Et.prototype.isStroke=function(){var J=this.attr(),ht=J.stroke,vt=J.strokeStyle;return(ht||vt)&&this.canStroke},Et.prototype.draw=function(J,ht){var vt=this.get("el");this.get("destroyed")?vt&&vt.parentNode.removeChild(vt):(vt||Object(l.a)(this),Object(O.a)(this,J),this.createPath(J,ht),this.shadow(J,ht),this.strokeAndFill(J,ht),this.transform(ht))},Et.prototype.createPath=function(J,ht){},Et.prototype.strokeAndFill=function(J,ht){var vt=ht||this.attr(),bt=vt.fill,At=vt.fillStyle,q=vt.stroke,ct=vt.strokeStyle,ot=vt.fillOpacity,_=vt.strokeOpacity,P=vt.lineWidth,Y=this.get("el");this.canFill&&(ht?"fill"in vt?this._setColor(J,"fill",bt):"fillStyle"in vt&&this._setColor(J,"fill",At):this._setColor(J,"fill",bt||At),ot&&Y.setAttribute(j.b.fillOpacity,ot)),this.canStroke&&P>0&&(ht?"stroke"in vt?this._setColor(J,"stroke",q):"strokeStyle"in vt&&this._setColor(J,"stroke",ct):this._setColor(J,"stroke",q||ct),_&&Y.setAttribute(j.b.strokeOpacity,_),P&&Y.setAttribute(j.b.lineWidth,P))},Et.prototype._setColor=function(J,ht,vt){var bt=this.get("el");if(vt)if(vt=vt.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(vt))(At=J.find("gradient",vt))||(At=J.addGradient(vt)),bt.setAttribute(j.b[ht],"url(#"+At+")");else if(/^[p,P]{1}[\s]*\(/.test(vt)){var At;(At=J.find("pattern",vt))||(At=J.addPattern(vt)),bt.setAttribute(j.b[ht],"url(#"+At+")")}else bt.setAttribute(j.b[ht],vt);else bt.setAttribute(j.b[ht],"none")},Et.prototype.shadow=function(J,ht){var vt=this.attr(),bt=ht||vt,At=bt.shadowOffsetX,q=bt.shadowOffsetY,ct=bt.shadowBlur,ot=bt.shadowColor;(At||q||ct||ot)&&Object(O.b)(this,J)},Et.prototype.transform=function(J){var ht=this.attr();(J||ht).matrix&&Object(O.c)(this)},Et.prototype.isInShape=function(J,ht){return this.isPointInPath(J,ht)},Et.prototype.isPointInPath=function(J,ht){var vt=this.get("el"),bt=this.get("canvas").get("el").getBoundingClientRect(),At=J+bt.left,q=ht+bt.top,ct=document.elementFromPoint(At,q);return!(!ct||!ct.isEqualNode(vt))},Et.prototype.getHitLineWidth=function(){var J=this.attrs,ht=J.lineWidth,vt=J.lineAppendWidth;return this.isStroke()?ht+vt:0},Et}(m.AbstractShape),s=e(0),d=function(Lt){function Et(){var J=Lt!==null&&Lt.apply(this,arguments)||this;return J.type="circle",J.canFill=!0,J.canStroke=!0,J}return Object(p.b)(Et,Lt),Et.prototype.getDefaultAttrs=function(){var J=Lt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},J),{x:0,y:0,r:0})},Et.prototype.createPath=function(J,ht){var vt=this.attr(),bt=this.get("el");Object(s.f)(ht||vt,function(At,q){q==="x"||q==="y"?bt.setAttribute("c"+q,At):j.b[q]&&bt.setAttribute(j.b[q],At)})},Et}(n),M=function(Lt){function Et(){var J=Lt!==null&&Lt.apply(this,arguments)||this;return J.type="dom",J.canFill=!1,J.canStroke=!1,J}return Object(p.b)(Et,Lt),Et.prototype.createPath=function(J,ht){var vt=this.attr(),bt=this.get("el");if(Object(s.f)(ht||vt,function(ot,_){j.b[_]&&bt.setAttribute(j.b[_],ot)}),typeof vt.html=="function"){var At=vt.html.call(this,vt);if(At instanceof Element||At instanceof HTMLDocument){for(var q=bt.childNodes,ct=q.length-1;ct>=0;ct--)bt.removeChild(q[ct]);bt.appendChild(At)}else bt.innerHTML=At}else bt.innerHTML=vt.html},Et}(n),S=function(Lt){function Et(){var J=Lt!==null&&Lt.apply(this,arguments)||this;return J.type="ellipse",J.canFill=!0,J.canStroke=!0,J}return Object(p.b)(Et,Lt),Et.prototype.getDefaultAttrs=function(){var J=Lt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},J),{x:0,y:0,rx:0,ry:0})},Et.prototype.createPath=function(J,ht){var vt=this.attr(),bt=this.get("el");Object(s.f)(ht||vt,function(At,q){q==="x"||q==="y"?bt.setAttribute("c"+q,At):j.b[q]&&bt.setAttribute(j.b[q],At)})},Et}(n),T=function(Lt){function Et(){var J=Lt!==null&&Lt.apply(this,arguments)||this;return J.type="image",J.canFill=!1,J.canStroke=!1,J}return Object(p.b)(Et,Lt),Et.prototype.getDefaultAttrs=function(){var J=Lt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},J),{x:0,y:0,width:0,height:0})},Et.prototype.createPath=function(J,ht){var vt=this,bt=this.attr(),At=this.get("el");Object(s.f)(ht||bt,function(q,ct){ct==="img"?vt._setImage(bt.img):j.b[ct]&&At.setAttribute(j.b[ct],q)})},Et.prototype.setAttr=function(J,ht){this.attrs[J]=ht,J==="img"&&this._setImage(ht)},Et.prototype._setImage=function(J){var ht=this.attr(),vt=this.get("el");if(Object(s.x)(J))vt.setAttribute("href",J);else if(J instanceof window.Image)ht.width||(vt.setAttribute("width",J.width),this.attr("width",J.width)),ht.height||(vt.setAttribute("height",J.height),this.attr("height",J.height)),vt.setAttribute("href",J.src);else if(J instanceof HTMLElement&&Object(s.x)(J.nodeName)&&J.nodeName.toUpperCase()==="CANVAS")vt.setAttribute("href",J.toDataURL());else if(J instanceof ImageData){var bt=document.createElement("canvas");bt.setAttribute("width",""+J.width),bt.setAttribute("height",""+J.height),bt.getContext("2d").putImageData(J,0,0),ht.width||(vt.setAttribute("width",""+J.width),this.attr("width",J.width)),ht.height||(vt.setAttribute("height",""+J.height),this.attr("height",J.height)),vt.setAttribute("href",bt.toDataURL())}},Et}(n),v=e(20),x=function(Lt){function Et(){var J=Lt!==null&&Lt.apply(this,arguments)||this;return J.type="line",J.canFill=!1,J.canStroke=!0,J}return Object(p.b)(Et,Lt),Et.prototype.getDefaultAttrs=function(){var J=Lt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},J),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},Et.prototype.createPath=function(J,ht){var vt=this.attr(),bt=this.get("el");Object(s.f)(ht||vt,function(At,q){if(q==="startArrow"||q==="endArrow")if(At){var ct=Object(s.v)(At)?J.addArrow(vt,j.b[q]):J.getDefaultArrow(vt,j.b[q]);bt.setAttribute(j.b[q],"url(#"+ct+")")}else bt.removeAttribute(j.b[q]);else j.b[q]&&bt.setAttribute(j.b[q],At)})},Et.prototype.getTotalLength=function(){var J=this.attr(),ht=J.x1,vt=J.y1,bt=J.x2,At=J.y2;return v.c.length(ht,vt,bt,At)},Et.prototype.getPoint=function(J){var ht=this.attr(),vt=ht.x1,bt=ht.y1,At=ht.x2,q=ht.y2;return v.c.pointAt(vt,bt,At,q,J)},Et}(n),C={circle:function(Et,J,ht){return[["M",Et,J],["m",-ht,0],["a",ht,ht,0,1,0,2*ht,0],["a",ht,ht,0,1,0,2*-ht,0]]},square:function(Et,J,ht){return[["M",Et-ht,J-ht],["L",Et+ht,J-ht],["L",Et+ht,J+ht],["L",Et-ht,J+ht],["Z"]]},diamond:function(Et,J,ht){return[["M",Et-ht,J],["L",Et,J-ht],["L",Et+ht,J],["L",Et,J+ht],["Z"]]},triangle:function(Et,J,ht){var vt=ht*Math.sin(1/3*Math.PI);return[["M",Et-ht,J+vt],["L",Et,J-vt],["L",Et+ht,J+vt],["z"]]},triangleDown:function(Et,J,ht){var vt=ht*Math.sin(1/3*Math.PI);return[["M",Et-ht,J-vt],["L",Et+ht,J-vt],["L",Et,J+vt],["Z"]]}},N={get:function(Et){return C[Et]},register:function(Et,J){C[Et]=J},remove:function(Et){delete C[Et]},getAll:function(){return C}},X=function(Lt){function Et(){var J=Lt!==null&&Lt.apply(this,arguments)||this;return J.type="marker",J.canFill=!0,J.canStroke=!0,J}return Object(p.b)(Et,Lt),Et.prototype.createPath=function(J){this.get("el").setAttribute("d",this._assembleMarker())},Et.prototype._assembleMarker=function(){var J=this._getPath();return Object(s.m)(J)?J.map(function(ht){return ht.join(" ")}).join(""):J},Et.prototype._getPath=function(){var J,ht=this.attr(),vt=ht.x,bt=ht.y,At=ht.r||ht.radius,q=ht.symbol||"circle";return(J=Object(s.r)(q)?q:N.get(q))?J(vt,bt,At):(console.warn(J+" symbol is not exist."),null)},Et.symbolsFactory=N,Et}(n),tt=function(Lt){function Et(){var J=Lt!==null&&Lt.apply(this,arguments)||this;return J.type="path",J.canFill=!0,J.canStroke=!0,J}return Object(p.b)(Et,Lt),Et.prototype.getDefaultAttrs=function(){var J=Lt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},J),{startArrow:!1,endArrow:!1})},Et.prototype.createPath=function(J,ht){var vt=this,bt=this.attr(),At=this.get("el");Object(s.f)(ht||bt,function(q,ct){if(ct==="path"&&Object(s.m)(q))At.setAttribute("d",vt._formatPath(q));else if(ct==="startArrow"||ct==="endArrow")if(q){var ot=Object(s.v)(q)?J.addArrow(bt,j.b[ct]):J.getDefaultArrow(bt,j.b[ct]);At.setAttribute(j.b[ct],"url(#"+ot+")")}else At.removeAttribute(j.b[ct]);else j.b[ct]&&At.setAttribute(j.b[ct],q)})},Et.prototype._formatPath=function(J){var ht=J.map(function(vt){return vt.join(" ")}).join("");return~ht.indexOf("NaN")?"":ht},Et.prototype.getTotalLength=function(){var J=this.get("el");return J?J.getTotalLength():null},Et.prototype.getPoint=function(J){var ht=this.get("el"),vt=this.getTotalLength();if(vt===0)return null;var bt=ht?ht.getPointAtLength(J*vt):null;return bt?{x:bt.x,y:bt.y}:null},Et}(n),it=function(Lt){function Et(){var J=Lt!==null&&Lt.apply(this,arguments)||this;return J.type="polygon",J.canFill=!0,J.canStroke=!0,J}return Object(p.b)(Et,Lt),Et.prototype.createPath=function(J,ht){var vt=this.attr(),bt=this.get("el");Object(s.f)(ht||vt,function(At,q){q==="points"&&Object(s.m)(At)&&At.length>=2?bt.setAttribute("points",At.map(function(ct){return ct[0]+","+ct[1]}).join(" ")):j.b[q]&&bt.setAttribute(j.b[q],At)})},Et}(n),pt=function(Lt){function Et(){var J=Lt!==null&&Lt.apply(this,arguments)||this;return J.type="polyline",J.canFill=!0,J.canStroke=!0,J}return Object(p.b)(Et,Lt),Et.prototype.getDefaultAttrs=function(){var J=Lt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},J),{startArrow:!1,endArrow:!1})},Et.prototype.onAttrChange=function(J,ht,vt){Lt.prototype.onAttrChange.call(this,J,ht,vt),["points"].indexOf(J)!==-1&&this._resetCache()},Et.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},Et.prototype.createPath=function(J,ht){var vt=this.attr(),bt=this.get("el");Object(s.f)(ht||vt,function(At,q){q==="points"&&Object(s.m)(At)&&At.length>=2?bt.setAttribute("points",At.map(function(ct){return ct[0]+","+ct[1]}).join(" ")):j.b[q]&&bt.setAttribute(j.b[q],At)})},Et.prototype.getTotalLength=function(){var J=this.attr().points,ht=this.get("totalLength");return Object(s.s)(ht)?(this.set("totalLength",v.d.length(J)),this.get("totalLength")):ht},Et.prototype.getPoint=function(J){var ht,vt,bt=this.attr().points,At=this.get("tCache");return At||(this._setTcache(),At=this.get("tCache")),Object(s.f)(At,function(q,ct){J>=q[0]&&J<=q[1]&&(ht=(J-q[0])/(q[1]-q[0]),vt=ct)}),v.c.pointAt(bt[vt][0],bt[vt][1],bt[vt+1][0],bt[vt+1][1],ht)},Et.prototype._setTcache=function(){var J=this.attr().points;if(J&&J.length!==0){var ht=this.getTotalLength();if(!(ht<=0)){var vt,bt,At=0,q=[];Object(s.f)(J,function(ct,ot){J[ot+1]&&((vt=[])[0]=At/ht,bt=v.c.length(ct[0],ct[1],J[ot+1][0],J[ot+1][1]),At+=bt,vt[1]=At/ht,q.push(vt))}),this.set("tCache",q)}}},Et.prototype.getStartTangent=function(){var J=this.attr().points,ht=[];return ht.push([J[1][0],J[1][1]]),ht.push([J[0][0],J[0][1]]),ht},Et.prototype.getEndTangent=function(){var J=this.attr().points,ht=J.length-1,vt=[];return vt.push([J[ht-1][0],J[ht-1][1]]),vt.push([J[ht][0],J[ht][1]]),vt},Et}(n),ft=function(Lt){function Et(){var J=Lt!==null&&Lt.apply(this,arguments)||this;return J.type="rect",J.canFill=!0,J.canStroke=!0,J}return Object(p.b)(Et,Lt),Et.prototype.getDefaultAttrs=function(){var J=Lt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},J),{x:0,y:0,width:0,height:0,radius:0})},Et.prototype.createPath=function(J,ht){var vt=this,bt=this.attr(),At=this.get("el"),q=!1,ct=["x","y","width","height","radius"];Object(s.f)(ht||bt,function(ot,_){ct.indexOf(_)===-1||q?ct.indexOf(_)===-1&&j.b[_]&&At.setAttribute(j.b[_],ot):(At.setAttribute("d",vt._assembleRect(bt)),q=!0)})},Et.prototype._assembleRect=function(J){var ht=J.x,vt=J.y,bt=J.width,At=J.height,q=J.radius;if(!q)return"M "+ht+","+vt+" l "+bt+",0 l 0,"+At+" l"+-bt+" 0 z";var ct=function(ot){var _=0,P=0,Y=0,k=0;return Object(s.m)(ot)?ot.length===1?_=P=Y=k=ot[0]:ot.length===2?(_=Y=ot[0],P=k=ot[1]):ot.length===3?(_=ot[0],P=k=ot[1],Y=ot[2]):(_=ot[0],P=ot[1],Y=ot[2],k=ot[3]):_=P=Y=k=ot,{r1:_,r2:P,r3:Y,r4:k}}(q);return Object(s.m)(q)?q.length===1?ct.r1=ct.r2=ct.r3=ct.r4=q[0]:q.length===2?(ct.r1=ct.r3=q[0],ct.r2=ct.r4=q[1]):q.length===3?(ct.r1=q[0],ct.r2=ct.r4=q[1],ct.r3=q[2]):(ct.r1=q[0],ct.r2=q[1],ct.r3=q[2],ct.r4=q[3]):ct.r1=ct.r2=ct.r3=ct.r4=q,[["M "+(ht+ct.r1)+","+vt],["l "+(bt-ct.r1-ct.r2)+",0"],["a "+ct.r2+","+ct.r2+",0,0,1,"+ct.r2+","+ct.r2],["l 0,"+(At-ct.r2-ct.r3)],["a "+ct.r3+","+ct.r3+",0,0,1,"+-ct.r3+","+ct.r3],["l "+(ct.r3+ct.r4-bt)+",0"],["a "+ct.r4+","+ct.r4+",0,0,1,"+-ct.r4+","+-ct.r4],["l 0,"+(ct.r4+ct.r1-At)],["a "+ct.r1+","+ct.r1+",0,0,1,"+ct.r1+","+-ct.r1],["z"]].join(" ")},Et}(n),Ot=e(119),wt={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},xt={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},lt={left:"left",start:"left",center:"middle",right:"end",end:"end"},Vt=function(Lt){function Et(){var J=Lt!==null&&Lt.apply(this,arguments)||this;return J.type="text",J.canFill=!0,J.canStroke=!0,J}return Object(p.b)(Et,Lt),Et.prototype.getDefaultAttrs=function(){var J=Lt.prototype.getDefaultAttrs.call(this);return Object(p.a)(Object(p.a)({},J),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},Et.prototype.createPath=function(J,ht){var vt=this,bt=this.attr(),At=this.get("el");this._setFont(),Object(s.f)(ht||bt,function(q,ct){ct==="text"?vt._setText(""+q):ct==="matrix"&&q?Object(O.c)(vt):j.b[ct]&&At.setAttribute(j.b[ct],q)}),At.setAttribute("paint-order","stroke"),At.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},Et.prototype._setFont=function(){var J=this.get("el"),ht=this.attr(),vt=ht.textBaseline,bt=ht.textAlign,At=Object(Ot.a)();At&&At.name==="firefox"?J.setAttribute("dominant-baseline",xt[vt]||"alphabetic"):J.setAttribute("alignment-baseline",wt[vt]||"baseline"),J.setAttribute("text-anchor",lt[bt]||"left")},Et.prototype._setText=function(J){var ht=this.get("el"),vt=this.attr(),bt=vt.x,At=vt.textBaseline,q=At===void 0?"bottom":At;if(J)if(~J.indexOf(`
`)){var ct=J.split(`
`),ot=ct.length-1,_="";Object(s.f)(ct,function(P,Y){Y===0?q==="alphabetic"?_+='<tspan x="'+bt+'" dy="'+-ot+'em">'+P+"</tspan>":q==="top"?_+='<tspan x="'+bt+'" dy="0.9em">'+P+"</tspan>":q==="middle"?_+='<tspan x="'+bt+'" dy="'+-(ot-1)/2+'em">'+P+"</tspan>":q==="bottom"?_+='<tspan x="'+bt+'" dy="-'+(ot+.3)+'em">'+P+"</tspan>":q==="hanging"&&(_+='<tspan x="'+bt+'" dy="'+(-(ot-1)-.3)+'em">'+P+"</tspan>"):_+='<tspan x="'+bt+'" dy="1em">'+P+"</tspan>"}),ht.innerHTML=_}else ht.innerHTML=J;else ht.innerHTML=""},Et}(n)},function(a,A,e){"use strict";var r=function(){function p(){this._events={}}return p.prototype.on=function(m,O,l){return this._events[m]||(this._events[m]=[]),this._events[m].push({callback:O,once:!!l}),this},p.prototype.once=function(m,O){return this.on(m,O,!0),this},p.prototype.emit=function(m){for(var O=this,l=[],E=1;E<arguments.length;E++)l[E-1]=arguments[E];var j=this._events[m]||[],y=this._events["*"]||[],n=function(d){for(var M=d.length,S=0;S<M;S++)if(d[S]){var T=d[S],v=T.callback;T.once&&(d.splice(S,1),d.length===0&&delete O._events[m],M--,S--),v.apply(O,l)}};n(j),n(y)},p.prototype.off=function(m,O){if(m)if(O){for(var l=this._events[m]||[],E=l.length,j=0;j<E;j++)l[j].callback===O&&(l.splice(j,1),E--,j--);l.length===0&&delete this._events[m]}else delete this._events[m];else this._events={};return this},p.prototype.getEvents=function(){return this._events},p}();A.a=r},function(a,A,e){"use strict";e.r(A),e.d(A,"create",function(){return p}),e.d(A,"clone",function(){return m}),e.d(A,"fromValues",function(){return O}),e.d(A,"copy",function(){return l}),e.d(A,"set",function(){return E}),e.d(A,"add",function(){return j}),e.d(A,"subtract",function(){return y}),e.d(A,"multiply",function(){return n}),e.d(A,"divide",function(){return s}),e.d(A,"ceil",function(){return d}),e.d(A,"floor",function(){return M}),e.d(A,"min",function(){return S}),e.d(A,"max",function(){return T}),e.d(A,"round",function(){return v}),e.d(A,"scale",function(){return x}),e.d(A,"scaleAndAdd",function(){return C}),e.d(A,"distance",function(){return N}),e.d(A,"squaredDistance",function(){return X}),e.d(A,"length",function(){return tt}),e.d(A,"squaredLength",function(){return it}),e.d(A,"negate",function(){return pt}),e.d(A,"inverse",function(){return ft}),e.d(A,"normalize",function(){return Ot}),e.d(A,"dot",function(){return wt}),e.d(A,"cross",function(){return xt}),e.d(A,"lerp",function(){return lt}),e.d(A,"random",function(){return Vt}),e.d(A,"transformMat2",function(){return Lt}),e.d(A,"transformMat2d",function(){return Et}),e.d(A,"transformMat3",function(){return J}),e.d(A,"transformMat4",function(){return ht}),e.d(A,"rotate",function(){return vt}),e.d(A,"angle",function(){return bt}),e.d(A,"zero",function(){return At}),e.d(A,"str",function(){return q}),e.d(A,"exactEquals",function(){return ct}),e.d(A,"equals",function(){return ot}),e.d(A,"len",function(){return P}),e.d(A,"sub",function(){return Y}),e.d(A,"mul",function(){return k}),e.d(A,"div",function(){return h}),e.d(A,"dist",function(){return g}),e.d(A,"sqrDist",function(){return F}),e.d(A,"sqrLen",function(){return V}),e.d(A,"forEach",function(){return H});var r=e(11);function p(){var et=new r.a(2);return r.a!=Float32Array&&(et[0]=0,et[1]=0),et}function m(et){var nt=new r.a(2);return nt[0]=et[0],nt[1]=et[1],nt}function O(et,nt){var St=new r.a(2);return St[0]=et,St[1]=nt,St}function l(et,nt){return et[0]=nt[0],et[1]=nt[1],et}function E(et,nt,St){return et[0]=nt,et[1]=St,et}function j(et,nt,St){return et[0]=nt[0]+St[0],et[1]=nt[1]+St[1],et}function y(et,nt,St){return et[0]=nt[0]-St[0],et[1]=nt[1]-St[1],et}function n(et,nt,St){return et[0]=nt[0]*St[0],et[1]=nt[1]*St[1],et}function s(et,nt,St){return et[0]=nt[0]/St[0],et[1]=nt[1]/St[1],et}function d(et,nt){return et[0]=Math.ceil(nt[0]),et[1]=Math.ceil(nt[1]),et}function M(et,nt){return et[0]=Math.floor(nt[0]),et[1]=Math.floor(nt[1]),et}function S(et,nt,St){return et[0]=Math.min(nt[0],St[0]),et[1]=Math.min(nt[1],St[1]),et}function T(et,nt,St){return et[0]=Math.max(nt[0],St[0]),et[1]=Math.max(nt[1],St[1]),et}function v(et,nt){return et[0]=Math.round(nt[0]),et[1]=Math.round(nt[1]),et}function x(et,nt,St){return et[0]=nt[0]*St,et[1]=nt[1]*St,et}function C(et,nt,St,dt){return et[0]=nt[0]+St[0]*dt,et[1]=nt[1]+St[1]*dt,et}function N(et,nt){var St=nt[0]-et[0],dt=nt[1]-et[1];return Math.hypot(St,dt)}function X(et,nt){var St=nt[0]-et[0],dt=nt[1]-et[1];return St*St+dt*dt}function tt(et){var nt=et[0],St=et[1];return Math.hypot(nt,St)}function it(et){var nt=et[0],St=et[1];return nt*nt+St*St}function pt(et,nt){return et[0]=-nt[0],et[1]=-nt[1],et}function ft(et,nt){return et[0]=1/nt[0],et[1]=1/nt[1],et}function Ot(et,nt){var St=nt[0],dt=nt[1],gt=St*St+dt*dt;return gt>0&&(gt=1/Math.sqrt(gt)),et[0]=nt[0]*gt,et[1]=nt[1]*gt,et}function wt(et,nt){return et[0]*nt[0]+et[1]*nt[1]}function xt(et,nt,St){var dt=nt[0]*St[1]-nt[1]*St[0];return et[0]=et[1]=0,et[2]=dt,et}function lt(et,nt,St,dt){var gt=nt[0],yt=nt[1];return et[0]=gt+dt*(St[0]-gt),et[1]=yt+dt*(St[1]-yt),et}function Vt(et,nt){nt=nt||1;var St=2*r.c()*Math.PI;return et[0]=Math.cos(St)*nt,et[1]=Math.sin(St)*nt,et}function Lt(et,nt,St){var dt=nt[0],gt=nt[1];return et[0]=St[0]*dt+St[2]*gt,et[1]=St[1]*dt+St[3]*gt,et}function Et(et,nt,St){var dt=nt[0],gt=nt[1];return et[0]=St[0]*dt+St[2]*gt+St[4],et[1]=St[1]*dt+St[3]*gt+St[5],et}function J(et,nt,St){var dt=nt[0],gt=nt[1];return et[0]=St[0]*dt+St[3]*gt+St[6],et[1]=St[1]*dt+St[4]*gt+St[7],et}function ht(et,nt,St){var dt=nt[0],gt=nt[1];return et[0]=St[0]*dt+St[4]*gt+St[12],et[1]=St[1]*dt+St[5]*gt+St[13],et}function vt(et,nt,St,dt){var gt=nt[0]-St[0],yt=nt[1]-St[1],Ct=Math.sin(dt),Pt=Math.cos(dt);return et[0]=gt*Pt-yt*Ct+St[0],et[1]=gt*Ct+yt*Pt+St[1],et}function bt(et,nt){var St=et[0],dt=et[1],gt=nt[0],yt=nt[1],Ct=Math.sqrt(St*St+dt*dt)*Math.sqrt(gt*gt+yt*yt),Pt=Ct&&(St*gt+dt*yt)/Ct;return Math.acos(Math.min(Math.max(Pt,-1),1))}function At(et){return et[0]=0,et[1]=0,et}function q(et){return"vec2("+et[0]+", "+et[1]+")"}function ct(et,nt){return et[0]===nt[0]&&et[1]===nt[1]}function ot(et,nt){var St=et[0],dt=et[1],gt=nt[0],yt=nt[1];return Math.abs(St-gt)<=r.b*Math.max(1,Math.abs(St),Math.abs(gt))&&Math.abs(dt-yt)<=r.b*Math.max(1,Math.abs(dt),Math.abs(yt))}var _,P=tt,Y=y,k=n,h=s,g=N,F=X,V=it,H=(_=p(),function(et,nt,St,dt,gt,yt){var Ct,Pt;for(nt||(nt=2),St||(St=0),Pt=dt?Math.min(dt*nt+St,et.length):et.length,Ct=St;Ct<Pt;Ct+=nt)_[0]=et[Ct],_[1]=et[Ct+1],gt(_,_,yt),et[Ct]=_[0],et[Ct+1]=_[1];return et})},function(a,A){var e=[],r=[];function p(m,O){if(O=O||{},m===void 0)throw new Error("insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).");var l,E=O.prepend===!0?"prepend":"append",j=O.container!==void 0?O.container:document.querySelector("head"),y=e.indexOf(j);return y===-1&&(y=e.push(j)-1,r[y]={}),r[y]!==void 0&&r[y][E]!==void 0?l=r[y][E]:(l=r[y][E]=function(){var n=document.createElement("style");return n.setAttribute("type","text/css"),n}(),E==="prepend"?j.insertBefore(l,j.childNodes[0]):j.appendChild(l)),m.charCodeAt(0)===65279&&(m=m.substr(1,m.length)),l.styleSheet?l.styleSheet.cssText+=m:l.textContent+=m,l}a.exports=p,a.exports.insertCss=p},function(a,A,e){"use strict";function r(S){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T})(S)}var p=e(263),m=e(267),O=[].slice,l=["keyword","gray","hex"],E={};Object.keys(m).forEach(function(S){E[O.call(m[S].labels).sort().join("")]=S});var j={};function y(S,T){if(!(this instanceof y))return new y(S,T);if(T&&T in l&&(T=null),T&&!(T in m))throw new Error("Unknown model: "+T);var v,x;if(S==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(S instanceof y)this.model=S.model,this.color=S.color.slice(),this.valpha=S.valpha;else if(typeof S=="string"){var C=p.get(S);if(C===null)throw new Error("Unable to parse color from string: "+S);this.model=C.model,x=m[this.model].channels,this.color=C.value.slice(0,x),this.valpha=typeof C.value[x]=="number"?C.value[x]:1}else if(S.length){this.model=T||"rgb",x=m[this.model].channels;var N=O.call(S,0,x);this.color=M(N,x),this.valpha=typeof S[x]=="number"?S[x]:1}else if(typeof S=="number")S&=16777215,this.model="rgb",this.color=[S>>16&255,S>>8&255,255&S],this.valpha=1;else{this.valpha=1;var X=Object.keys(S);"alpha"in S&&(X.splice(X.indexOf("alpha"),1),this.valpha=typeof S.alpha=="number"?S.alpha:0);var tt=X.sort().join("");if(!(tt in E))throw new Error("Unable to parse color from object: "+JSON.stringify(S));this.model=E[tt];var it=m[this.model].labels,pt=[];for(v=0;v<it.length;v++)pt.push(S[it[v]]);this.color=M(pt)}if(j[this.model])for(x=m[this.model].channels,v=0;v<x;v++){var ft=j[this.model][v];ft&&(this.color[v]=ft(this.color[v]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function n(S,T,v){return(S=Array.isArray(S)?S:[S]).forEach(function(x){(j[x]||(j[x]=[]))[T]=v}),S=S[0],function(x){var C;return arguments.length?(v&&(x=v(x)),(C=this[S]()).color[T]=x,C):(C=this[S]().color[T],v&&(C=v(C)),C)}}function s(S){return function(T){return Math.max(0,Math.min(S,T))}}function d(S){return Array.isArray(S)?S:[S]}function M(S,T){for(var v=0;v<T;v++)typeof S[v]!="number"&&(S[v]=0);return S}y.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(T){var v=this.model in p.to?this:this.rgb(),x=(v=v.round(typeof T=="number"?T:1)).valpha===1?v.color:v.color.concat(this.valpha);return p.to[v.model](x)},percentString:function(T){var v=this.rgb().round(typeof T=="number"?T:1),x=v.valpha===1?v.color:v.color.concat(this.valpha);return p.to.rgb.percent(x)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var T={},v=m[this.model].channels,x=m[this.model].labels,C=0;C<v;C++)T[x[C]]=this.color[C];return this.valpha!==1&&(T.alpha=this.valpha),T},unitArray:function(){var T=this.rgb().color;return T[0]/=255,T[1]/=255,T[2]/=255,this.valpha!==1&&T.push(this.valpha),T},unitObject:function(){var T=this.rgb().object();return T.r/=255,T.g/=255,T.b/=255,this.valpha!==1&&(T.alpha=this.valpha),T},round:function(T){return T=Math.max(T||0,0),new y(this.color.map(function(v){return function(x){return function(C,N){return Number(C.toFixed(N))}(x,v)}}(T)).concat(this.valpha),this.model)},alpha:function(T){return arguments.length?new y(this.color.concat(Math.max(0,Math.min(1,T))),this.model):this.valpha},red:n("rgb",0,s(255)),green:n("rgb",1,s(255)),blue:n("rgb",2,s(255)),hue:n(["hsl","hsv","hsl","hwb","hcg"],0,function(S){return(S%360+360)%360}),saturationl:n("hsl",1,s(100)),lightness:n("hsl",2,s(100)),saturationv:n("hsv",1,s(100)),value:n("hsv",2,s(100)),chroma:n("hcg",1,s(100)),gray:n("hcg",2,s(100)),white:n("hwb",1,s(100)),wblack:n("hwb",2,s(100)),cyan:n("cmyk",0,s(100)),magenta:n("cmyk",1,s(100)),yellow:n("cmyk",2,s(100)),black:n("cmyk",3,s(100)),x:n("xyz",0,s(100)),y:n("xyz",1,s(100)),z:n("xyz",2,s(100)),l:n("lab",0,s(100)),a:n("lab",1),b:n("lab",2),keyword:function(T){return arguments.length?new y(T):m[this.model].keyword(this.color)},hex:function(T){return arguments.length?new y(T):p.to.hex(this.rgb().round().color)},rgbNumber:function(){var T=this.rgb().color;return(255&T[0])<<16|(255&T[1])<<8|255&T[2]},luminosity:function(){for(var T=this.rgb().color,v=[],x=0;x<T.length;x++){var C=T[x]/255;v[x]=C<=.03928?C/12.92:Math.pow((C+.055)/1.055,2.4)}return .2126*v[0]+.7152*v[1]+.0722*v[2]},contrast:function(T){var v=this.luminosity(),x=T.luminosity();return v>x?(v+.05)/(x+.05):(x+.05)/(v+.05)},level:function(T){var v=this.contrast(T);return v>=7.1?"AAA":v>=4.5?"AA":""},isDark:function(){var T=this.rgb().color;return(299*T[0]+587*T[1]+114*T[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var T=this.rgb(),v=0;v<3;v++)T.color[v]=255-T.color[v];return T},lighten:function(T){var v=this.hsl();return v.color[2]+=v.color[2]*T,v},darken:function(T){var v=this.hsl();return v.color[2]-=v.color[2]*T,v},saturate:function(T){var v=this.hsl();return v.color[1]+=v.color[1]*T,v},desaturate:function(T){var v=this.hsl();return v.color[1]-=v.color[1]*T,v},whiten:function(T){var v=this.hwb();return v.color[1]+=v.color[1]*T,v},blacken:function(T){var v=this.hwb();return v.color[2]+=v.color[2]*T,v},grayscale:function(){var T=this.rgb().color,v=.3*T[0]+.59*T[1]+.11*T[2];return y.rgb(v,v,v)},fade:function(T){return this.alpha(this.valpha-this.valpha*T)},opaquer:function(T){return this.alpha(this.valpha+this.valpha*T)},rotate:function(T){var v=this.hsl(),x=v.color[0];return x=(x=(x+T)%360)<0?360+x:x,v.color[0]=x,v},mix:function(T,v){if(!T||!T.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+r(T));var x=T.rgb(),C=this.rgb(),N=v===void 0?.5:v,X=2*N-1,tt=x.alpha()-C.alpha(),it=((X*tt==-1?X:(X+tt)/(1+X*tt))+1)/2,pt=1-it;return y.rgb(it*x.red()+pt*C.red(),it*x.green()+pt*C.green(),it*x.blue()+pt*C.blue(),x.alpha()*N+C.alpha()*(1-N))}},Object.keys(m).forEach(function(S){if(l.indexOf(S)===-1){var T=m[S].channels;y.prototype[S]=function(){if(this.model===S)return new y(this);if(arguments.length)return new y(arguments,S);var v=typeof arguments[T]=="number"?T:this.valpha;return new y(d(m[this.model][S].raw(this.color)).concat(v),S)},y[S]=function(v){return typeof v=="number"&&(v=M(O.call(arguments),T)),new y(v,S)}}}),a.exports=y},function(a,A,e){var r=e(57),p=e(43);a.exports=function(m){if(!p(m))return!1;var O=r(m);return O=="[object Function]"||O=="[object GeneratorFunction]"||O=="[object AsyncFunction]"||O=="[object Proxy]"}},function(a,A,e){var r=e(100),p=e(101);a.exports=function(m,O,l,E){var j=!l;l||(l={});for(var y=-1,n=O.length;++y<n;){var s=O[y],d=E?E(l[s],m[s],s,l,m):void 0;d===void 0&&(d=m[s]),j?p(l,s,d):r(l,s,d)}return l}},function(a,A,e){var r=e(303),p=e(48),m=Object.prototype,O=m.hasOwnProperty,l=m.propertyIsEnumerable,E=r(function(){return arguments}())?r:function(j){return p(j)&&O.call(j,"callee")&&!l.call(j,"callee")};a.exports=E},function(a,A){a.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(a,A,e){var r=e(75);a.exports=function(p){if(typeof p=="string"||r(p))return p;var m=p+"";return m=="0"&&1/p==-1/0?"-0":m}},function(a,A,e){"use strict";function r(l){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(l)}Object.defineProperty(A,"__esModule",{value:!0}),A.circularDependencyToException=A.listMetadataForTarget=A.listRegisteredBindingsForServiceIdentifier=A.getServiceIdentifierAsString=A.getFunctionName=void 0;var p=e(41);function m(l){return typeof l=="function"?l.name:r(l)==="symbol"?l.toString():l}function O(l){if(l.name)return l.name;var E=l.toString(),j=E.match(/^function\s*([^\s(]+)/);return j?j[1]:"Anonymous function: "+E}A.getServiceIdentifierAsString=m,A.listRegisteredBindingsForServiceIdentifier=function(l,E,j){var y="",n=j(l,E);return n.length!==0&&(y=`
Registered bindings:`,n.forEach(function(s){var d="Object";s.implementationType!==null&&(d=O(s.implementationType)),y=y+`
 `+d,s.constraint.metaData&&(y=y+" - "+s.constraint.metaData)})),y},A.circularDependencyToException=function l(E){E.childRequests.forEach(function(j){if(function n(s,d){return s.parentRequest!==null&&(s.parentRequest.serviceIdentifier===d||n(s.parentRequest,d))}(j,j.serviceIdentifier)){var y=function(n){return function s(d,M){M===void 0&&(M=[]);var S=m(d.serviceIdentifier);return M.push(S),d.parentRequest!==null?s(d.parentRequest,M):M}(n).reverse().join(" --> ")}(j);throw new Error(p.CIRCULAR_DEPENDENCY+" "+y)}l(j)})},A.listMetadataForTarget=function(l,E){if(E.isTagged()||E.isNamed()){var j="",y=E.getNamedTag(),n=E.getCustomTags();return y!==null&&(j+=y.toString()+`
`),n!==null&&n.forEach(function(s){j+=s.toString()+`
`})," "+l+`
 `+l+" - "+j}return" "+l},A.getFunctionName=O},function(a,A,e){"use strict";e.d(A,"a",function(){return l});var r=e(17);function p(E){return Math.sqrt(E[0]*E[0]+E[1]*E[1])}function m(E,j){return p(E)*p(j)?(E[0]*j[0]+E[1]*j[1])/(p(E)*p(j)):1}function O(E,j){return(E[0]*j[1]<E[1]*j[0]?-1:1)*Math.acos(m(E,j))}function l(E,j){var y=j[1],n=j[2],s=Object(r.m)(Object(r.o)(j[3]),2*Math.PI),d=j[4],M=j[5],S=E[0],T=E[1],v=j[6],x=j[7],C=Math.cos(s)*(S-v)/2+Math.sin(s)*(T-x)/2,N=-1*Math.sin(s)*(S-v)/2+Math.cos(s)*(T-x)/2,X=C*C/(y*y)+N*N/(n*n);X>1&&(y*=Math.sqrt(X),n*=Math.sqrt(X));var tt=y*y*(N*N)+n*n*(C*C),it=tt?Math.sqrt((y*y*(n*n)-tt)/tt):1;d===M&&(it*=-1),isNaN(it)&&(it=0);var pt=n?it*y*N/n:0,ft=y?it*-n*C/y:0,Ot=(S+v)/2+Math.cos(s)*pt-Math.sin(s)*ft,wt=(T+x)/2+Math.sin(s)*pt+Math.cos(s)*ft,xt=[(C-pt)/y,(N-ft)/n],lt=[(-1*C-pt)/y,(-1*N-ft)/n],Vt=O([1,0],xt),Lt=O(xt,lt);return m(xt,lt)<=-1&&(Lt=Math.PI),m(xt,lt)>=1&&(Lt=0),M===0&&Lt>0&&(Lt-=2*Math.PI),M===1&&Lt<0&&(Lt+=2*Math.PI),{cx:Ot,cy:wt,rx:Object(r.j)(E,[v,x])?0:y,ry:Object(r.j)(E,[v,x])?0:n,startAngle:Vt,endAngle:Vt+Lt,xRotation:s,arcFlag:d,sweepFlag:M}}},function(a,A){function e(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a.exports=e=function(m){return typeof m}:a.exports=e=function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},e(r)}a.exports=e},function(a,A,e){"use strict";var r=e(1),p=e(52),m=e(62),O=e(122),l=e(0),E=e(5),j=e(45),y=e(14),n=E.n.cloneEvent,s=E.n.isViewportChanged,d=function(ht){function vt(bt){var At=ht.call(this,bt)||this;return At.extendEvents=[],At.dragging=!1,At.preItem=null,At.graph=bt,At.destroyed=!1,At.initEvents(),At}return Object(r.b)(vt,ht),vt.prototype.initEvents=function(){var bt=this.graph,At=this.extendEvents,q=At===void 0?[]:At,ct=bt.get("canvas"),ot=ct.get("el"),_=Object(l.J)(this,"onCanvasEvents"),P=Object(l.J)(this,"onExtendEvents"),Y=Object(l.J)(this,"onWheelEvent");ct.off("*").on("*",_),this.canvasHandler=_,q.push(Object(y.a)(ot,"DOMMouseScroll",Y)),q.push(Object(y.a)(ot,"mousewheel",Y)),typeof window!="undefined"&&(q.push(Object(y.a)(window,"keydown",P)),q.push(Object(y.a)(window,"keyup",P)),q.push(Object(y.a)(window,"focus",P)))},vt.getItemRoot=function(bt){for(;bt&&!bt.get("item");)bt=bt.get("parent");return bt},vt.prototype.onCanvasEvents=function(bt){var At=this.graph,q=At.get("canvas"),ct=bt.target,ot=bt.type;bt.canvasX=bt.x,bt.canvasY=bt.y;var _={x:bt.canvasX,y:bt.canvasY},P=At.get("group").getMatrix();if(P||(P=[1,0,0,0,1,0,0,0,1]),s(P)&&(_=At.getPointByClient(bt.clientX,bt.clientY)),bt.x=_.x,bt.y=_.y,bt.currentTarget=At,ct===q)return ot==="mousemove"&&this.handleMouseMove(bt,"canvas"),bt.target=q,bt.item=null,At.emit(ot,bt),void At.emit("canvas:"+ot,bt);var Y=vt.getItemRoot(ct);if(Y){var k=Y.get("item");if(!k.destroyed){var h=k.getType();if(bt.target=ct,bt.item=k,bt.canvasX===bt.x&&bt.canvasY===bt.y){var g=At.getCanvasByPoint(bt.x,bt.y);bt.canvasX=g.x,bt.canvasY=g.y}At.emit(ot,bt),bt.name&&!bt.name.includes(":")?At.emit(h+":"+ot,bt):At.emit(bt.name,bt),ot==="dragstart"&&(this.dragging=!0),ot==="dragend"&&(this.dragging=!1),ot==="mousemove"&&this.handleMouseMove(bt,h)}}else At.emit(ot,bt)},vt.prototype.onExtendEvents=function(bt){this.graph.emit(bt.type,bt)},vt.prototype.onWheelEvent=function(bt){Object(l.s)(bt.wheelDelta)&&(bt.wheelDelta=-bt.detail),this.graph.emit("wheel",bt)},vt.prototype.handleMouseMove=function(bt,At){var q=this.graph,ct=this.preItem,ot=q.get("canvas"),_=bt.target===ot?null:bt.item;bt=n(bt),ct&&ct!==_&&!ct.destroyed&&(bt.item=ct,this.emitCustomEvent(ct.getType(),"mouseleave",bt),this.dragging&&this.emitCustomEvent(ct.getType(),"dragleave",bt)),_&&ct!==_&&(bt.item=_,this.emitCustomEvent(At,"mouseenter",bt),this.dragging&&this.emitCustomEvent(At,"dragenter",bt)),this.preItem=_},vt.prototype.emitCustomEvent=function(bt,At,q){q.type=At,this.graph.emit(bt+":"+At,q)},vt.prototype.destroy=function(){var bt=this.graph,At=this.canvasHandler,q=this.extendEvents;bt.get("canvas").off("*",At),Object(l.f)(q,function(ct){ct.remove()}),this.dragging=!1,this.preItem=null,this.extendEvents.length=0,this.canvasHandler=null,this.destroyed=!0},vt}(E.a),M=e(69),S=e(254),T=e.n(S);function v(){return T()(`!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=436)}([function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.METADATA_KEY=void 0;var r=n(17);e.METADATA_KEY=r;var o=n(374);Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return o.Container}});var i=n(30);Object.defineProperty(e,"BindingScopeEnum",{enumerable:!0,get:function(){return i.BindingScopeEnum}}),Object.defineProperty(e,"BindingTypeEnum",{enumerable:!0,get:function(){return i.BindingTypeEnum}}),Object.defineProperty(e,"TargetTypeEnum",{enumerable:!0,get:function(){return i.TargetTypeEnum}});var a=n(390);Object.defineProperty(e,"AsyncContainerModule",{enumerable:!0,get:function(){return a.AsyncContainerModule}}),Object.defineProperty(e,"ContainerModule",{enumerable:!0,get:function(){return a.ContainerModule}});var u=n(391);Object.defineProperty(e,"injectable",{enumerable:!0,get:function(){return u.injectable}});var s=n(392);Object.defineProperty(e,"tagged",{enumerable:!0,get:function(){return s.tagged}});var c=n(393);Object.defineProperty(e,"named",{enumerable:!0,get:function(){return c.named}});var f=n(164);Object.defineProperty(e,"inject",{enumerable:!0,get:function(){return f.inject}}),Object.defineProperty(e,"LazyServiceIdentifer",{enumerable:!0,get:function(){return f.LazyServiceIdentifer}});var l=n(394);Object.defineProperty(e,"optional",{enumerable:!0,get:function(){return l.optional}});var h=n(395);Object.defineProperty(e,"unmanaged",{enumerable:!0,get:function(){return h.unmanaged}});var d=n(396);Object.defineProperty(e,"multiInject",{enumerable:!0,get:function(){return d.multiInject}});var p=n(397);Object.defineProperty(e,"targetName",{enumerable:!0,get:function(){return p.targetName}});var v=n(398);Object.defineProperty(e,"postConstruct",{enumerable:!0,get:function(){return v.postConstruct}});var m=n(162);Object.defineProperty(e,"MetadataReader",{enumerable:!0,get:function(){return m.MetadataReader}});var y=n(40);Object.defineProperty(e,"id",{enumerable:!0,get:function(){return y.id}});var g=n(33);Object.defineProperty(e,"decorate",{enumerable:!0,get:function(){return g.decorate}});var b=n(167);Object.defineProperty(e,"traverseAncerstors",{enumerable:!0,get:function(){return b.traverseAncerstors}}),Object.defineProperty(e,"taggedConstraint",{enumerable:!0,get:function(){return b.taggedConstraint}}),Object.defineProperty(e,"namedConstraint",{enumerable:!0,get:function(){return b.namedConstraint}}),Object.defineProperty(e,"typeConstraint",{enumerable:!0,get:function(){return b.typeConstraint}});var _=n(50);Object.defineProperty(e,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return _.getServiceIdentifierAsString}});var x=n(399);Object.defineProperty(e,"multiBindToService",{enumerable:!0,get:function(){return x.multiBindToService}})},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.TextureCompressionBC="texture-compression-bc"}(e.ExtensionName||(e.ExtensionName={})),function(t){t.ClampToEdge="clamp-to-edge",t.Repeat="repeat",t.MirrorRepeat="mirror-repeat"}(e.AddressMode||(e.AddressMode={})),function(t){t.UniformBuffer="uniform-buffer",t.StorageBuffer="storage-buffer",t.ReadonlyStorageBuffer="readonly-storage-buffer",t.Sampler="sampler",t.ComparisonSampler="comparison-sampler",t.SampledTexture="sampled-texture",t.ReadonlyStorageTexture="readonly-storage-texture",t.WriteonlyStorageTexture="writeonly-storage-texture"}(e.BindingType||(e.BindingType={})),function(t){t.Zero="zero",t.One="one",t.SrcColor="src-color",t.OneMinusSrcColor="one-minus-src-color",t.SrcAlpha="src-alpha",t.OneMinusSrcAlpha="one-minus-src-alpha",t.DstColor="dst-color",t.OneMinusDstColor="one-minus-dst-color",t.DstAlpha="dst-alpha",t.OneMinusDstAlpha="one-minus-dst-alpha",t.SrcAlphaSaturated="src-alpha-saturated",t.BlendColor="blend-color",t.OneMinusBlendColor="one-minus-blend-color"}(e.BlendFactor||(e.BlendFactor={})),function(t){t.Add="add",t.Subtract="subtract",t.ReverseSubtract="reverse-subtract",t.Min="min",t.Max="max"}(e.BlendOperation||(e.BlendOperation={})),function(t){t.Never="never",t.Less="less",t.Equal="equal",t.LessEqual="less-equal",t.Greater="greater",t.NotEqual="not-equal",t.GreaterEqual="greater-equal",t.Always="always"}(e.CompareFunction||(e.CompareFunction={})),function(t){t.None="none",t.Front="front",t.Back="back"}(e.CullMode||(e.CullMode={})),function(t){t.Nearest="nearest",t.Linear="linear"}(e.FilterMode||(e.FilterMode={})),function(t){t.CCW="ccw",t.CW="cw"}(e.FrontFace||(e.FrontFace={})),function(t){t.Uint16="uint16",t.Uint32="uint32"}(e.IndexFormat||(e.IndexFormat={})),function(t){t.Vertex="vertex",t.Instance="instance"}(e.InputStepMode||(e.InputStepMode={})),function(t){t.Load="load"}(e.LoadOp||(e.LoadOp={})),function(t){t.PointList="point-list",t.LineList="line-list",t.LineStrip="line-strip",t.TriangleList="triangle-list",t.TriangleStrip="triangle-strip"}(e.PrimitiveTopology||(e.PrimitiveTopology={})),function(t){t.Keep="keep",t.Zero="zero",t.Replace="replace",t.Invert="invert",t.IncrementClamp="increment-clamp",t.DecrementClamp="decrement-clamp",t.IncrementWrap="increment-wrap",t.DecrementWrap="decrement-wrap"}(e.StencilOperation||(e.StencilOperation={})),function(t){t.Store="store",t.Clear="clear"}(e.StoreOp||(e.StoreOp={})),function(t){t.E1d="1d",t.E2d="2d",t.E3d="3d"}(e.TextureDimension||(e.TextureDimension={})),function(t){t.R8Unorm="r8unorm",t.R8Snorm="r8snorm",t.R8Uint="r8uint",t.R8Sint="r8sint",t.R16Uint="r16uint",t.R16Sint="r16sint",t.R16Float="r16float",t.RG8Unorm="rg8unorm",t.RG8Snorm="rg8snorm",t.RG8Uint="rg8uint",t.RG8Sint="rg8sint",t.R32Uint="r32uint",t.R32Sint="r32sint",t.R32Float="r32float",t.RG16Uint="rg16uint",t.RG16Sint="rg16sint",t.RG16Float="rg16float",t.RGBA8Unorm="rgba8unorm",t.RGBA8UnormSRGB="rgba8unorm-srgb",t.RGBA8Snorm="rgba8snorm",t.RGBA8Uint="rgba8uint",t.RGBA8Sint="rgba8sint",t.BGRA8Unorm="bgra8unorm",t.BGRA8UnormSRGB="bgra8unorm-srgb",t.RGB10A2Unorm="rgb10a2unorm",t.RG11B10Float="rg11b10float",t.RG32Uint="rg32uint",t.RG32Sint="rg32sint",t.RG32Float="rg32float",t.RGBA16Uint="rgba16uint",t.RGBA16Sint="rgba16sint",t.RGBA16Float="rgba16float",t.RGBA32Uint="rgba32uint",t.RGBA32Sint="rgba32sint",t.RGBA32Float="rgba32float",t.Depth32Float="depth32float",t.Depth24Plus="depth24plus",t.Depth24PlusStencil8="depth24plus-stencil8"}(e.TextureFormat||(e.TextureFormat={})),function(t){t.Float="float",t.Sint="sint",t.Uint="uint"}(e.TextureComponentType||(e.TextureComponentType={})),function(t){t.E1d="1d",t.E2d="2d",t.E2dArray="2d-array",t.Cube="cube",t.CubeArray="cube-array",t.E3d="3d"}(e.TextureViewDimension||(e.TextureViewDimension={})),function(t){t.Uchar2="uchar2",t.Uchar4="uchar4",t.Char2="char2",t.Char4="char4",t.Uchar2Norm="uchar2norm",t.Uchar4Norm="uchar4norm",t.Char2Norm="char2norm",t.Char4Norm="char4norm",t.Ushort2="ushort2",t.Ushort4="ushort4",t.Short2="short2",t.Short4="short4",t.Ushort2Norm="ushort2norm",t.Ushort4Norm="ushort4norm",t.Short2Norm="short2norm",t.Short4Norm="short4norm",t.Half2="half2",t.Half4="half4",t.Float="float",t.Float2="float2",t.Float3="float3",t.Float4="float4",t.Uint="uint",t.Uint2="uint2",t.Uint3="uint3",t.Uint4="uint4",t.Int="int",t.Int2="int2",t.Int3="int3",t.Int4="int4"}(e.VertexFormat||(e.VertexFormat={})),function(t){t.All="all",t.StencilOnly="stencil-only",t.DepthOnly="depth-only"}(e.TextureAspect||(e.TextureAspect={})),function(t){t.Error="error",t.Warning="warning",t.Info="info"}(e.CompilationMessageType||(e.CompilationMessageType={})),function(t){t.Occlusion="occlusion"}(e.QueryType||(e.QueryType={})),function(t){t[t.MapRead=1]="MapRead",t[t.MapWrite=2]="MapWrite",t[t.CopySrc=4]="CopySrc",t[t.CopyDst=8]="CopyDst",t[t.Index=16]="Index",t[t.Vertex=32]="Vertex",t[t.Uniform=64]="Uniform",t[t.Storage=128]="Storage",t[t.Indirect=256]="Indirect",t[t.QueryResolve=512]="QueryResolve"}(e.BufferUsage||(e.BufferUsage={})),function(t){t[t.Red=1]="Red",t[t.Green=2]="Green",t[t.Blue=4]="Blue",t[t.Alpha=8]="Alpha",t[t.All=15]="All"}(e.ColorWrite||(e.ColorWrite={})),function(t){t[t.Vertex=1]="Vertex",t[t.Fragment=2]="Fragment",t[t.Compute=4]="Compute"}(e.ShaderStage||(e.ShaderStage={})),function(t){t[t.CopySrc=1]="CopySrc",t[t.CopyDst=2]="CopyDst",t[t.Sampled=4]="Sampled",t[t.Storage=8]="Storage",t[t.OutputAttachment=16]="OutputAttachment"}(e.TextureUsage||(e.TextureUsage={})),function(t){t[t.Read=1]="Read",t[t.Write=2]="Write"}(e.MapMode||(e.MapMode={}))},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){t.exports=n(370)},function(t,e){t.exports=function(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}},function(t,e){t.exports=function(t,e,n,r,o){var i={};return Object.keys(r).forEach((function(t){i[t]=r[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}},function(t,e){function n(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function u(t){n(a,o,i,u,s,"next",t)}function s(t){n(a,o,i,u,s,"throw",t)}u(void 0)}))}}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(402),o=n(403),i=n(160),a=n(404);t.exports=function(t){return r(t)||o(t)||i(t)||a()}},function(t,e,n){var r;try{r={cloneDeep:n(310),constant:n(84),defaults:n(311),each:n(123),filter:n(126),find:n(312),flatten:n(154),forEach:n(124),forIn:n(317),has:n(137),isUndefined:n(138),last:n(318),map:n(139),mapValues:n(319),max:n(320),merge:n(322),min:n(327),minBy:n(328),now:n(329),pick:n(330),range:n(335),reduce:n(141),sortBy:n(338),uniqueId:n(343),values:n(147),zipObject:n(344)}}catch(t){}r||(r=window._),t.exports=r},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(400);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){var r=n(51),o=n(12);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e}},function(t,e){t.exports=function(t,e){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.POST_CONSTRUCT=e.DESIGN_PARAM_TYPES=e.PARAM_TYPES=e.TAGGED_PROP=e.TAGGED=e.MULTI_INJECT_TAG=e.INJECT_TAG=e.OPTIONAL_TAG=e.UNMANAGED_TAG=e.NAME_TAG=e.NAMED_TAG=void 0,e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct"},function(t,e,n){"use strict";var r=n(11),o=n(23).Graph;function i(t,e,n,o){var i;do{i=r.uniqueId(o)}while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function a(t){return r.max(r.map(t.nodes(),(function(e){var n=t.node(e).rank;if(!r.isUndefined(n))return n})))}t.exports={addDummyNode:i,simplify:function(t){var e=(new o).setGraph(t.graph());return r.forEach(t.nodes(),(function(n){e.setNode(n,t.node(n))})),r.forEach(t.edges(),(function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},o=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})})),e},asNonCompoundGraph:function(t){var e=new o({multigraph:t.isMultigraph()}).setGraph(t.graph());return r.forEach(t.nodes(),(function(n){t.children(n).length||e.setNode(n,t.node(n))})),r.forEach(t.edges(),(function(n){e.setEdge(n,t.edge(n))})),e},successorWeights:function(t){var e=r.map(t.nodes(),(function(e){var n={};return r.forEach(t.outEdges(e),(function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight})),n}));return r.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=r.map(t.nodes(),(function(e){var n={};return r.forEach(t.inEdges(e),(function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight})),n}));return r.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,o=t.x,i=t.y,a=e.x-o,u=e.y-i,s=t.width/2,c=t.height/2;if(!a&&!u)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(u)*s>Math.abs(a)*c?(u<0&&(c=-c),n=c*a/u,r=c):(a<0&&(s=-s),n=s,r=s*u/a);return{x:o+n,y:i+r}},buildLayerMatrix:function(t){var e=r.map(r.range(a(t)+1),(function(){return[]}));return r.forEach(t.nodes(),(function(n){var o=t.node(n),i=o.rank;r.isUndefined(i)||(e[i][o.order]=n)})),e},normalizeRanks:function(t){var e=r.min(r.map(t.nodes(),(function(e){return t.node(e).rank})));r.forEach(t.nodes(),(function(n){var o=t.node(n);r.has(o,"rank")&&(o.rank-=e)}))},removeEmptyRanks:function(t){var e=r.min(r.map(t.nodes(),(function(e){return t.node(e).rank}))),n=[];r.forEach(t.nodes(),(function(r){var o=t.node(r).rank-e;n[o]||(n[o]=[]),n[o].push(r)}));var o=0,i=t.graph().nodeRankFactor;r.forEach(n,(function(e,n){r.isUndefined(e)&&n%i!=0?--o:o&&r.forEach(e,(function(e){t.node(e).rank+=o}))}))},addBorderNode:function(t,e,n,r){var o={width:0,height:0};arguments.length>=4&&(o.rank=n,o.order=r);return i(t,"border",o,e)},maxRank:a,partition:function(t,e){var n={lhs:[],rhs:[]};return r.forEach(t,(function(t){e(t)?n.lhs.push(t):n.rhs.push(t)})),n},time:function(t,e){var n=r.now();try{return e()}finally{console.log(t+" time: "+(r.now()-n)+"ms")}},notime:function(t,e){return e()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STACK_OVERFLOW=e.CIRCULAR_DEPENDENCY_IN_FACTORY=e.POST_CONSTRUCT_ERROR=e.MULTIPLE_POST_CONSTRUCT_METHODS=e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=e.ARGUMENTS_LENGTH_MISMATCH=e.INVALID_DECORATOR_OPERATION=e.INVALID_TO_SELF_VALUE=e.INVALID_FUNCTION_BINDING=e.INVALID_MIDDLEWARE_RETURN=e.NO_MORE_SNAPSHOTS_AVAILABLE=e.INVALID_BINDING_TYPE=e.NOT_IMPLEMENTED=e.CIRCULAR_DEPENDENCY=e.UNDEFINED_INJECT_ANNOTATION=e.MISSING_INJECT_ANNOTATION=e.MISSING_INJECTABLE_ANNOTATION=e.NOT_REGISTERED=e.CANNOT_UNBIND=e.AMBIGUOUS_MATCH=e.KEY_NOT_FOUND=e.NULL_ARGUMENT=e.DUPLICATED_METADATA=e.DUPLICATED_INJECTABLE_DECORATOR=void 0,e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",e.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",e.ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",e.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]},e.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.STACK_OVERFLOW="Maximum call stack size exceeded"},function(t,e,n){var r;try{r={clone:n(199),constant:n(84),each:n(123),filter:n(126),has:n(137),isArray:n(13),isEmpty:n(275),isFunction:n(46),isUndefined:n(138),keys:n(32),map:n(139),reduce:n(141),size:n(278),transform:n(284),union:n(285),values:n(147)}}catch(t){}r||(r=window._),t.exports=r},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e=n(t);return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var r=n(232),o=n(63),i=n(79),a=i&&i.isTypedArray,u=a?o(a):r;t.exports=u},function(t,e,n){var r;try{r=n(197)}catch(t){}r||(r=window.graphlib),t.exports=r},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(105),i="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,a=o||i||Function("return this")();t.exports=a},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return null!=t&&"object"==n(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var r=n(17),o=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===r.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();e.Metadata=o},function(t,e){},function(t,e,n){var r=n(46),o=n(78);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(255),i=n(265),a=n(39),u=n(13),s=n(272);t.exports=function(t){return"function"==typeof t?t:null==t?a:"object"==r(t)?u(t)?i(t[0],t[1]):o(t):s(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TargetTypeEnum=e.BindingTypeEnum=e.BindingScopeEnum=void 0;e.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};e.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};e.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},function(t,e,n){var r=n(42),o=n(211),i=n(212),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?o(t):i(t)}},function(t,e,n){var r=n(109),o=n(80),i=n(28);t.exports=function(t){return i(t)?r(t):o(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagProperty=e.tagParameter=e.decorate=void 0;var r=n(19),o=n(17);function i(t,e,n,o,i){var a={},u="number"==typeof i,s=void 0!==i&&u?i.toString():n;if(u&&void 0!==n)throw new Error(r.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(a=Reflect.getMetadata(t,e));var c=a[s];if(Array.isArray(c))for(var f=0,l=c;f<l.length;f++){var h=l[f];if(h.key===o.key)throw new Error(r.DUPLICATED_METADATA+" "+h.key.toString())}else c=[];c.push(o),a[s]=c,Reflect.defineMetadata(t,a,e)}function a(t,e){Reflect.decorate(t,e)}function u(t,e){return function(n,r){e(n,r,t)}}e.tagParameter=function(t,e,n,r){i(o.TAGGED,t,e,r,n)},e.tagProperty=function(t,e,n){i(o.TAGGED_PROP,t.constructor,e,n)},e.decorate=function(t,e,n){"number"==typeof n?a([u(n,t)],e):"string"==typeof n?Reflect.decorate([t],e,n):a([t],e)}},function(t,e,n){var r=n(371),o=n(372),i=n(160),a=n(373);t.exports=function(t,e){return r(t)||o(t,e)||i(t,e)||a()}},function(t,e,n){var r=n(31),o=n(25);t.exports=function(t){return"number"==typeof t||o(t)&&"[object Number]"==r(t)}},function(t,e,n){var r=n(178),o=n(177),i=n(185),a=n(100),u=n(186),s=[0,0];t.exports.computeMiter=function(t,e,n,a,c){return r(t,n,a),i(t,t),o(e,-t[1],t[0]),o(s,-n[1],n[0]),c/u(e,s)},t.exports.normal=function(t,e){return o(t,-e[1],e[0]),t},t.exports.direction=function(t,e,n){return a(t,e,n),i(t,t),t}},function(t,e,n){var r=n(210),o=n(215);t.exports=function(t,e){var n=o(t,e);return r(n)?n:void 0}},function(t,e,n){var r=n(109),o=n(235),i=n(28);t.exports=function(t){return i(t)?r(t,!0):o(t)}},function(t,e){t.exports=function(t){return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.id=void 0;var r=0;e.id=function(){return r++}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(24).Symbol;t.exports=r},function(t,e,n){(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(24),i=n(231),a="object"==r(e)&&e&&!e.nodeType&&e,u=a&&"object"==r(t)&&t&&!t.nodeType&&t,s=u&&u.exports===a?o.Buffer:void 0,c=(s?s.isBuffer:void 0)||i;t.exports=c}).call(this,n(61)(t))},function(t,e,n){var r=n(240),o=n(75),i=n(241),a=n(118),u=n(242),s=n(31),c=n(107),f=c(r),l=c(o),h=c(i),d=c(a),p=c(u),v=s;(r&&"[object DataView]"!=v(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=v(new o)||i&&"[object Promise]"!=v(i.resolve())||a&&"[object Set]"!=v(new a)||u&&"[object WeakMap]"!=v(new u))&&(v=function(t){var e=s(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case f:return"[object DataView]";case l:return"[object Map]";case h:return"[object Promise]";case d:return"[object Set]";case p:return"[object WeakMap]"}return e}),t.exports=v},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(31),i=n(25);t.exports=function(t){return"symbol"==r(t)||i(t)&&"[object Symbol]"==o(t)}},function(t,e,n){var r=n(31),o=n(21);t.exports=function(t){if(!o(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){var r=n(59),o=n(60);t.exports=function(t,e,n,i){var a=!n;n||(n={});for(var u=-1,s=e.length;++u<s;){var c=e[u],f=i?i(n[c],t[c],c,n,t):void 0;void 0===f&&(f=t[c]),a?o(n,c,f):r(n,c,f)}return n}},function(t,e,n){var r=n(230),o=n(25),i=Object.prototype,a=i.hasOwnProperty,u=i.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(t){return o(t)&&a.call(t,"callee")&&!u.call(t,"callee")};t.exports=s},function(t,e,n){var r=n(45);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.circularDependencyToException=e.listMetadataForTarget=e.listRegisteredBindingsForServiceIdentifier=e.getServiceIdentifierAsString=e.getFunctionName=void 0;var o=n(19);function i(t){return"function"==typeof t?t.name:"symbol"===r(t)?t.toString():t}function a(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\\s*([^\\s(]+)/);return n?n[1]:"Anonymous function: "+e}e.getServiceIdentifierAsString=i,e.listRegisteredBindingsForServiceIdentifier=function(t,e,n){var r="",o=n(t,e);return 0!==o.length&&(r="\\nRegistered bindings:",o.forEach((function(t){var e="Object";null!==t.implementationType&&(e=a(t.implementationType)),r=r+"\\n "+e,t.constraint.metaData&&(r=r+" - "+t.constraint.metaData)}))),r},e.circularDependencyToException=function t(e){e.childRequests.forEach((function(e){if(function t(e,n){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===n||t(e.parentRequest,n))}(e,e.serviceIdentifier)){var n=function(t){return function t(e,n){void 0===n&&(n=[]);var r=i(e.serviceIdentifier);return n.push(r),null!==e.parentRequest?t(e.parentRequest,n):n}(t).reverse().join(" --\\x3e ")}(e);throw new Error(o.CIRCULAR_DEPENDENCY+" "+n)}t(e)}))},e.listMetadataForTarget=function(t,e){if(e.isTagged()||e.isNamed()){var n="",r=e.getNamedTag(),o=e.getCustomTags();return null!==r&&(n+=r.toString()+"\\n"),null!==o&&o.forEach((function(t){n+=t.toString()+"\\n"}))," "+t+"\\n "+t+" - "+n}return" "+t},e.getFunctionName=a},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e){t.exports=function(t){return null==t}},function(t,e,n){t.exports={EPSILON:n(175),create:n(176),clone:n(405),fromValues:n(406),copy:n(407),set:n(177),equals:n(408),exactEquals:n(409),add:n(178),subtract:n(100),sub:n(410),multiply:n(179),mul:n(411),divide:n(180),div:n(412),inverse:n(413),min:n(414),max:n(415),rotate:n(416),floor:n(417),ceil:n(418),round:n(419),scale:n(420),scaleAndAdd:n(421),distance:n(181),dist:n(422),squaredDistance:n(182),sqrDist:n(423),length:n(183),len:n(424),squaredLength:n(184),sqrLen:n(425),negate:n(426),normalize:n(185),dot:n(186),cross:n(427),lerp:n(428),random:n(429),transformMat2:n(430),transformMat2d:n(431),transformMat3:n(432),transformMat4:n(433),forEach:n(434),limit:n(435)}},function(t,e,n){var r=n(55),o=n(205),i=n(206),a=n(207),u=n(208),s=n(209);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=u,c.prototype.set=s,t.exports=c},function(t,e,n){var r=n(200),o=n(201),i=n(202),a=n(203),u=n(204);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e,n){var r=n(41);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(37)(Object,"create");t.exports=r},function(t,e,n){var r=n(224);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(60),o=n(41),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];i.call(t,e)&&o(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(108);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=/^(?:0|[1-9]\\d*)$/;t.exports=function(t,e){var o=n(t);return!!(e=null==e?9007199254740991:e)&&("number"==o||"symbol"!=o&&r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(110)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){var r=n(85),o=n(253)(r);t.exports=o},function(t,e,n){var r=n(68),o=n(49);t.exports=function(t,e){for(var n=0,i=(e=r(e,t)).length;null!=t&&n<i;)t=t[o(e[n++])];return n&&n==i?t:void 0}},function(t,e,n){var r=n(13),o=n(88),i=n(267),a=n(133);t.exports=function(t,e){return r(t)?t:o(t,e)?[t]:i(a(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},function(t,e,n){var r=n(39),o=n(142),i=n(143);t.exports=function(t,e){return i(o(t,e,r),t+"")}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(41),i=n(28),a=n(62),u=n(21);t.exports=function(t,e,n){if(!u(n))return!1;var s=r(e);return!!("number"==s?i(n)&&a(e,n.length):"string"==s&&e in n)&&o(n[e],t)}},function(t,e,n){"use strict";var r=n(11);t.exports={longestPath:function(t){var e={};r.forEach(t.sources(),(function n(o){var i=t.node(o);if(r.has(e,o))return i.rank;e[o]=!0;var a=r.min(r.map(t.outEdges(o),(function(e){return n(e.w)-t.edge(e).minlen})));return a!==Number.POSITIVE_INFINITY&&null!=a||(a=0),i.rank=a}))},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},function(t,e){},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(20);t.exports=i;function i(t){this._isDirected=!o.has(t,"directed")||t.directed,this._isMultigraph=!!o.has(t,"multigraph")&&t.multigraph,this._isCompound=!!o.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=o.constant(void 0),this._defaultEdgeLabelFn=o.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function a(t,e){t[e]?t[e]++:t[e]=1}function u(t,e){--t[e]||delete t[e]}function s(t,e,n,r){var i=""+e,a=""+n;if(!t&&i>a){var u=i;i=a,a=u}return i+""+a+""+(o.isUndefined(r)?"\\0":r)}function c(t,e,n,r){var o=""+e,i=""+n;if(!t&&o>i){var a=o;o=i,i=a}var u={v:o,w:i};return r&&(u.name=r),u}function f(t,e){return s(t,e.v,e.w,e.name)}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(t){return this._label=t,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(t){return o.isFunction(t)||(t=o.constant(t)),this._defaultNodeLabelFn=t,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return o.keys(this._nodes)},i.prototype.sources=function(){var t=this;return o.filter(this.nodes(),(function(e){return o.isEmpty(t._in[e])}))},i.prototype.sinks=function(){var t=this;return o.filter(this.nodes(),(function(e){return o.isEmpty(t._out[e])}))},i.prototype.setNodes=function(t,e){var n=arguments,r=this;return o.each(t,(function(t){n.length>1?r.setNode(t,e):r.setNode(t)})),this},i.prototype.setNode=function(t,e){return o.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]="\\0",this._children[t]={},this._children["\\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},i.prototype.node=function(t){return this._nodes[t]},i.prototype.hasNode=function(t){return o.has(this._nodes,t)},i.prototype.removeNode=function(t){var e=this;if(o.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],o.each(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),o.each(o.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],o.each(o.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},i.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(o.isUndefined(e))e="\\0";else{for(var n=e+="";!o.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},i.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},i.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if("\\0"!==e)return e}},i.prototype.children=function(t){if(o.isUndefined(t)&&(t="\\0"),this._isCompound){var e=this._children[t];if(e)return o.keys(e)}else{if("\\0"===t)return this.nodes();if(this.hasNode(t))return[]}},i.prototype.predecessors=function(t){var e=this._preds[t];if(e)return o.keys(e)},i.prototype.successors=function(t){var e=this._sucs[t];if(e)return o.keys(e)},i.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return o.union(e,this.successors(t))},i.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},i.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;o.each(this._nodes,(function(n,r){t(r)&&e.setNode(r,n)})),o.each(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))}));var r={};return this._isCompound&&o.each(e.nodes(),(function(t){e.setParent(t,function t(o){var i=n.parent(o);return void 0===i||e.hasNode(i)?(r[o]=i,i):i in r?r[i]:t(i)}(t))})),e},i.prototype.setDefaultEdgeLabel=function(t){return o.isFunction(t)||(t=o.constant(t)),this._defaultEdgeLabelFn=t,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return o.values(this._edgeObjs)},i.prototype.setPath=function(t,e){var n=this,r=arguments;return o.reduce(t,(function(t,o){return r.length>1?n.setEdge(t,o,e):n.setEdge(t,o),o})),this},i.prototype.setEdge=function(){var t,e,n,i,u=!1,f=arguments[0];"object"===r(f)&&null!==f&&"v"in f?(t=f.v,e=f.w,n=f.name,2===arguments.length&&(i=arguments[1],u=!0)):(t=f,e=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],u=!0)),t=""+t,e=""+e,o.isUndefined(n)||(n=""+n);var l=s(this._isDirected,t,e,n);if(o.has(this._edgeLabels,l))return u&&(this._edgeLabels[l]=i),this;if(!o.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[l]=u?i:this._defaultEdgeLabelFn(t,e,n);var h=c(this._isDirected,t,e,n);return t=h.v,e=h.w,Object.freeze(h),this._edgeObjs[l]=h,a(this._preds[e],t),a(this._sucs[t],e),this._in[e][l]=h,this._out[t][l]=h,this._edgeCount++,this},i.prototype.edge=function(t,e,n){var r=1===arguments.length?f(this._isDirected,arguments[0]):s(this._isDirected,t,e,n);return this._edgeLabels[r]},i.prototype.hasEdge=function(t,e,n){var r=1===arguments.length?f(this._isDirected,arguments[0]):s(this._isDirected,t,e,n);return o.has(this._edgeLabels,r)},i.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?f(this._isDirected,arguments[0]):s(this._isDirected,t,e,n),o=this._edgeObjs[r];return o&&(t=o.v,e=o.w,delete this._edgeLabels[r],delete this._edgeObjs[r],u(this._preds[e],t),u(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},i.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var r=o.values(n);return e?o.filter(r,(function(t){return t.v===e})):r}},i.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var r=o.values(n);return e?o.filter(r,(function(t){return t.w===e})):r}},i.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},function(t,e,n){var r=n(37)(n(24),"Map");t.exports=r},function(t,e,n){var r=n(216),o=n(223),i=n(225),a=n(226),u=n(227);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e,n){(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(105),i="object"==r(e)&&e&&!e.nodeType&&e,a=i&&"object"==r(t)&&t&&!t.nodeType&&t,u=a&&a.exports===i&&o.process,s=function(){try{var t=a&&a.require&&a.require("util").types;return t||u&&u.binding&&u.binding("util")}catch(t){}}();t.exports=s}).call(this,n(61)(t))},function(t,e,n){var r=n(64),o=n(233),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=[];for(var n in Object(t))i.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var r=n(113),o=n(114),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,u=a?function(t){return null==t?[]:(t=Object(t),r(a(t),(function(e){return i.call(t,e)})))}:o;t.exports=u},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},function(t,e,n){var r=n(119);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e,n){var r=n(86),o=n(32);t.exports=function(t,e){return t&&r(t,e,o)}},function(t,e,n){var r=n(252)();t.exports=r},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(13),i=n(45),a=/\\.|\\[(?:[^[\\]]*|(["'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,u=/^\\w*$/;t.exports=function(t,e){if(o(t))return!1;var n=r(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(u.test(t)||!a.test(t)||null!=e&&t in Object(e))}},function(t,e,n){var r=n(82),o=n(286);t.exports=function t(e,n,i,a,u){var s=-1,c=e.length;for(i||(i=o),u||(u=[]);++s<c;){var f=e[s];n>0&&i(f)?n>1?t(f,n-1,i,a,u):r(u,f):a||(u[u.length]=f)}return u}},function(t,e,n){var r=n(45);t.exports=function(t,e,n){for(var o=-1,i=t.length;++o<i;){var a=t[o],u=e(a);if(null!=u&&(void 0===s?u==u&&!r(u):n(u,s)))var s=u,c=a}return c}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingOnSyntax=void 0;var r=n(92),o=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new r.BindingWhenSyntax(this._binding)},t}();e.BindingOnSyntax=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenSyntax=void 0;var r=n(91),o=n(167),i=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=o.namedConstraint(t),new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=o.taggedConstraint(t)(e),new r.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return o.typeConstraint(t)(e.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return o.namedConstraint(t)(e.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return o.taggedConstraint(t)(e)(n.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return o.traverseAncerstors(e,o.typeConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!o.traverseAncerstors(e,o.typeConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return o.traverseAncerstors(e,o.namedConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!o.traverseAncerstors(e,o.namedConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return o.traverseAncerstors(n,o.taggedConstraint(t)(e))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!o.traverseAncerstors(n,o.taggedConstraint(t)(e))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return o.traverseAncerstors(e,t)},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!o.traverseAncerstors(e,t)},new r.BindingOnSyntax(this._binding)},t}();e.BindingWhenSyntax=i},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}},function(t,e,n){var r=n(31),o=n(65),i=n(25),a=Function.prototype,u=Object.prototype,s=a.toString,c=u.hasOwnProperty,f=s.call(Object);t.exports=function(t){if(!i(t)||"[object Object]"!=r(t))return!1;var e=o(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==f}},function(t,e,n){t.exports={graphlib:n(23),layout:n(309),debug:n(367),util:{time:n(18).time,notime:n(18).notime},version:n(368)}},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,o="~";function i(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function u(t,e,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var u=new a(n,r||t,i),s=o?o+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],u]:t._events[s].push(u):(t._events[s]=u,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function c(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),c.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(o?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},c.prototype.listeners=function(t){var e=o?o+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,a=new Array(i);r<i;r++)a[r]=n[r].fn;return a},c.prototype.listenerCount=function(t){var e=o?o+t:t,n=this._events[e];return n?n.fn?1:n.length:0},c.prototype.emit=function(t,e,n,r,i,a){var u=o?o+t:t;if(!this._events[u])return!1;var s,c,f=this._events[u],l=arguments.length;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),l){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,e),!0;case 3:return f.fn.call(f.context,e,n),!0;case 4:return f.fn.call(f.context,e,n,r),!0;case 5:return f.fn.call(f.context,e,n,r,i),!0;case 6:return f.fn.call(f.context,e,n,r,i,a),!0}for(c=1,s=new Array(l-1);c<l;c++)s[c-1]=arguments[c];f.fn.apply(f.context,s)}else{var h,d=f.length;for(c=0;c<d;c++)switch(f[c].once&&this.removeListener(t,f[c].fn,void 0,!0),l){case 1:f[c].fn.call(f[c].context);break;case 2:f[c].fn.call(f[c].context,e);break;case 3:f[c].fn.call(f[c].context,e,n);break;case 4:f[c].fn.call(f[c].context,e,n,r);break;default:if(!s)for(h=1,s=new Array(l-1);h<l;h++)s[h-1]=arguments[h];f[c].fn.apply(f[c].context,s)}}return!0},c.prototype.on=function(t,e,n){return u(this,t,e,n,!1)},c.prototype.once=function(t,e,n){return u(this,t,e,n,!0)},c.prototype.removeListener=function(t,e,n,r){var i=o?o+t:t;if(!this._events[i])return this;if(!e)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||r&&!a.once||n&&a.context!==n||s(this,i);else{for(var u=0,c=[],f=a.length;u<f;u++)(a[u].fn!==e||r&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[i]=1===c.length?c[0]:c:s(this,i)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=o?o+t:t,this._events[e]&&s(this,e)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=o,c.EventEmitter=c,t.exports=c},function(t,e,n){var r=n(54),o=n(77),i=n(59),a=n(228),u=n(234),s=n(111),c=n(112),f=n(237),l=n(238),h=n(116),d=n(239),p=n(44),v=n(243),m=n(244),y=n(121),g=n(13),b=n(43),_=n(248),x=n(21),w=n(250),E=n(32),S=n(38),T={};T["[object Arguments]"]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T["[object Object]"]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T["[object Function]"]=T["[object WeakMap]"]=!1,t.exports=function t(e,n,A,I,k,O){var D,R=1&n,M=2&n,C=4&n;if(A&&(D=k?A(e,I,k,O):A(e)),void 0!==D)return D;if(!x(e))return e;var N=g(e);if(N){if(D=v(e),!R)return c(e,D)}else{var P=p(e),G="[object Function]"==P||"[object GeneratorFunction]"==P;if(b(e))return s(e,R);if("[object Object]"==P||"[object Arguments]"==P||G&&!k){if(D=M||G?{}:y(e),!R)return M?l(e,u(D,e)):f(e,a(D,e))}else{if(!T[P])return k?e:{};D=m(e,P,R)}}O||(O=new r);var j=O.get(e);if(j)return j;O.set(e,D),w(e)?e.forEach((function(r){D.add(t(r,n,A,r,e,O))})):_(e)&&e.forEach((function(r,o){D.set(o,t(r,n,A,o,e,O))}));var L=N?void 0:(C?M?d:h:M?S:E)(e);return o(L||e,(function(r,o){L&&(r=e[o=r]),i(D,o,t(r,n,A,o,e,O))})),D}},function(t,e,n){(function(e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r="object"==(void 0===e?"undefined":n(e))&&e&&e.Object===Object&&e;t.exports=r}).call(this,n(106))},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}t.exports=r},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var r=n(37),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e,n){var r=n(229),o=n(48),i=n(13),a=n(43),u=n(62),s=n(22),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=i(t),f=!n&&o(t),l=!n&&!f&&a(t),h=!n&&!f&&!l&&s(t),d=n||f||l||h,p=d?r(t.length,String):[],v=p.length;for(var m in t)!e&&!c.call(t,m)||d&&("length"==m||l&&("offset"==m||"parent"==m)||h&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||u(m,v))||p.push(m);return p}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(24),i="object"==r(e)&&e&&!e.nodeType&&e,a=i&&"object"==r(t)&&t&&!t.nodeType&&t,u=a&&a.exports===i?o.Buffer:void 0,s=u?u.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(61)(t))},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(82),o=n(65),i=n(81),a=n(114),u=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,i(t)),t=o(t);return e}:a;t.exports=u},function(t,e,n){var r=n(117),o=n(81),i=n(32);t.exports=function(t){return r(t,i,o)}},function(t,e,n){var r=n(82),o=n(13);t.exports=function(t,e,n){var i=e(t);return o(t)?i:r(i,n(t))}},function(t,e,n){var r=n(37)(n(24),"Set");t.exports=r},function(t,e,n){var r=n(24).Uint8Array;t.exports=r},function(t,e,n){var r=n(83);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(122),o=n(65),i=n(64);t.exports=function(t){return"function"!=typeof t.constructor||i(t)?{}:r(o(t))}},function(t,e,n){var r=n(21),o=Object.create,i=function(){function t(){}return function(e){if(!r(e))return{};if(o)return o(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=i},function(t,e,n){t.exports=n(124)},function(t,e,n){var r=n(77),o=n(66),i=n(125),a=n(13);t.exports=function(t,e){return(a(t)?r:o)(t,i(e))}},function(t,e,n){var r=n(39);t.exports=function(t){return"function"==typeof t?t:r}},function(t,e,n){var r=n(113),o=n(254),i=n(29),a=n(13);t.exports=function(t,e){return(a(t)?r:o)(t,i(e,3))}},function(t,e,n){var r=n(257),o=n(25);t.exports=function t(e,n,i,a,u){return e===n||(null==e||null==n||!o(e)&&!o(n)?e!=e&&n!=n:r(e,n,i,a,t,u))}},function(t,e,n){var r=n(129),o=n(260),i=n(130);t.exports=function(t,e,n,a,u,s){var c=1&n,f=t.length,l=e.length;if(f!=l&&!(c&&l>f))return!1;var h=s.get(t),d=s.get(e);if(h&&d)return h==e&&d==t;var p=-1,v=!0,m=2&n?new r:void 0;for(s.set(t,e),s.set(e,t);++p<f;){var y=t[p],g=e[p];if(a)var b=c?a(g,y,p,e,t,s):a(y,g,p,t,e,s);if(void 0!==b){if(b)continue;v=!1;break}if(m){if(!o(e,(function(t,e){if(!i(m,e)&&(y===t||u(y,t,n,a,s)))return m.push(e)}))){v=!1;break}}else if(y!==g&&!u(y,g,n,a,s)){v=!1;break}}return s.delete(t),s.delete(e),v}},function(t,e,n){var r=n(76),o=n(258),i=n(259);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,t.exports=a},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(21);t.exports=function(t){return t==t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},function(t,e,n){var r=n(270);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(271),o=n(135);t.exports=function(t,e){return null!=t&&o(t,e,r)}},function(t,e,n){var r=n(68),o=n(48),i=n(13),a=n(62),u=n(78),s=n(49);t.exports=function(t,e,n){for(var c=-1,f=(e=r(e,t)).length,l=!1;++c<f;){var h=s(e[c]);if(!(l=null!=t&&n(t,h)))break;t=t[h]}return l||++c!=f?l:!!(f=null==t?0:t.length)&&u(f)&&a(h,f)&&(i(t)||o(t))}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(274),o=n(135);t.exports=function(t,e){return null!=t&&o(t,e,r)}},function(t,e){t.exports=function(t){return void 0===t}},function(t,e,n){var r=n(69),o=n(29),i=n(140),a=n(13);t.exports=function(t,e){return(a(t)?r:i)(t,o(e,3))}},function(t,e,n){var r=n(66),o=n(28);t.exports=function(t,e){var n=-1,i=o(t)?Array(t.length):[];return r(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}},function(t,e,n){var r=n(276),o=n(66),i=n(29),a=n(277),u=n(13);t.exports=function(t,e,n){var s=u(t)?r:a,c=arguments.length<3;return s(t,i(e,4),n,c,o)}},function(t,e,n){var r=n(287),o=Math.max;t.exports=function(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var i=arguments,a=-1,u=o(i.length-e,0),s=Array(u);++a<u;)s[a]=i[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=i[a];return c[e]=n(s),r(t,this,c)}}},function(t,e,n){var r=n(288),o=n(289)(r);t.exports=o},function(t,e,n){var r=n(129),o=n(290),i=n(294),a=n(130),u=n(295),s=n(87);t.exports=function(t,e,n){var c=-1,f=o,l=t.length,h=!0,d=[],p=d;if(n)h=!1,f=i;else if(l>=200){var v=e?null:u(t);if(v)return s(v);h=!1,f=a,p=new r}else p=e?[]:d;t:for(;++c<l;){var m=t[c],y=e?e(m):m;if(m=n||0!==m?m:0,h&&y==y){for(var g=p.length;g--;)if(p[g]===y)continue t;e&&p.push(y),d.push(m)}else f(p,y,n)||(p!==d&&p.push(y),d.push(m))}return d}},function(t,e){t.exports=function(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}},function(t,e,n){var r=n(28),o=n(25);t.exports=function(t){return o(t)&&r(t)}},function(t,e,n){var r=n(297),o=n(32);t.exports=function(t){return null==t?[]:r(t,o(t))}},function(t,e,n){var r=n(20),o=n(149);t.exports=function(t,e,n,r){return function(t,e,n,r){var i,a,u={},s=new o,c=function(t){var e=t.v!==i?t.v:t.w,r=u[e],o=n(t),c=a.distance+o;if(o<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+o);c<r.distance&&(r.distance=c,r.predecessor=i,s.decrease(e,c))};t.nodes().forEach((function(t){var n=t===e?0:Number.POSITIVE_INFINITY;u[t]={distance:n},s.add(t,n)}));for(;s.size()>0&&(i=s.removeMin(),(a=u[i]).distance!==Number.POSITIVE_INFINITY);)r(i).forEach(c);return u}(t,String(e),n||i,r||function(e){return t.outEdges(e)})};var i=r.constant(1)},function(t,e,n){var r=n(20);function o(){this._arr=[],this._keyIndices={}}t.exports=o,o.prototype.size=function(){return this._arr.length},o.prototype.keys=function(){return this._arr.map((function(t){return t.key}))},o.prototype.has=function(t){return r.has(this._keyIndices,t)},o.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},o.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},o.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!r.has(n,t)){var o=this._arr,i=o.length;return n[t]=i,o.push({key:t,priority:e}),this._decrease(i),!0}return!1},o.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},o.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},o.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,o=t;n<e.length&&(o=e[n].priority<e[o].priority?n:o,r<e.length&&(o=e[r].priority<e[o].priority?r:o),o!==t&&(this._swap(t,o),this._heapify(o)))},o.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},o.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,o=n[t],i=n[e];n[t]=i,n[e]=o,r[i.key]=t,r[o.key]=e}},function(t,e,n){var r=n(20);t.exports=function(t){var e=0,n=[],o={},i=[];return t.nodes().forEach((function(a){r.has(o,a)||function a(u){var s=o[u]={onStack:!0,lowlink:e,index:e++};if(n.push(u),t.successors(u).forEach((function(t){r.has(o,t)?o[t].onStack&&(s.lowlink=Math.min(s.lowlink,o[t].index)):(a(t),s.lowlink=Math.min(s.lowlink,o[t].lowlink))})),s.lowlink===s.index){var c,f=[];do{c=n.pop(),o[c].onStack=!1,f.push(c)}while(u!==c);i.push(f)}}(a)})),i}},function(t,e,n){var r=n(20);function o(t){var e={},n={},o=[];if(r.each(t.sinks(),(function a(u){if(r.has(n,u))throw new i;r.has(e,u)||(n[u]=!0,e[u]=!0,r.each(t.predecessors(u),a),delete n[u],o.push(u))})),r.size(e)!==t.nodeCount())throw new i;return o}function i(){}t.exports=o,o.CycleException=i,i.prototype=new Error},function(t,e,n){var r=n(20);t.exports=function(t,e,n){r.isArray(e)||(e=[e]);var o=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],a={};return r.each(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);!function t(e,n,o,i,a,u){r.has(i,n)||(i[n]=!0,o||u.push(n),r.each(a(n),(function(n){t(e,n,o,i,a,u)})),o&&u.push(n))}(t,e,"post"===n,a,o,i)})),i}},function(t,e,n){var r=n(316);t.exports=function(t){return t?(t=r(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},function(t,e,n){var r=n(89);t.exports=function(t){return(null==t?0:t.length)?r(t,1):[]}},function(t,e,n){var r=n(60),o=n(41);t.exports=function(t,e,n){(void 0!==n&&!o(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}},function(t,e){t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},function(t,e){t.exports=function(t,e){return t<e}},function(t,e,n){"use strict";var r=n(11),o=n(23).Graph,i=n(72).slack;function a(t,e){return r.forEach(t.nodes(),(function n(o){r.forEach(e.nodeEdges(o),(function(r){var a=r.v,u=o===a?r.w:a;t.hasNode(u)||i(e,r)||(t.setNode(u,{}),t.setEdge(o,u,{}),n(u))}))})),t.nodeCount()}function u(t,e){return r.minBy(e.edges(),(function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return i(e,n)}))}function s(t,e,n){r.forEach(t.nodes(),(function(t){e.node(t).rank+=n}))}t.exports=function(t){var e,n,r=new o({directed:!1}),c=t.nodes()[0],f=t.nodeCount();r.setNode(c,{});for(;a(r,t)<f;)e=u(r,t),n=r.hasNode(e.v)?i(t,e):-i(t,e),s(r,t,n);return r}},function(t,e,n){(function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var r;!function(r){!function(o){var i="object"===(void 0===e?"undefined":n(e))?e:"object"===("undefined"==typeof self?"undefined":n(self))?self:"object"===n(this)?this:Function("return this;")(),a=u(r);function u(t,e){return function(n,r){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}void 0===i.Reflect?i.Reflect=r:a=u(i.Reflect,a),function(e){var r=Object.prototype.hasOwnProperty,o="function"==typeof Symbol,i=o&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",a=o&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",u="function"==typeof Object.create,s={__proto__:[]}instanceof Array,c=!u&&!s,f={create:u?function(){return N(Object.create(null))}:s?function(){return N({__proto__:null})}:function(){return N({})},has:c?function(t,e){return r.call(t,e)}:function(t,e){return e in t},get:c?function(t,e){return r.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},l=Object.getPrototypeOf(Function),h="object"===(void 0===t?"undefined":n(t))&&t.env&&"true"===t.env.REFLECT_METADATA_USE_MAP_POLYFILL,d=h||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[a]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var r=this._keys.length,o=n+1;o<r;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,r)},e.prototype.values=function(){return new n(this._keys,this._values,o)},e.prototype.entries=function(){return new n(this._keys,this._values,i)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[a]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function r(t,e){return t}function o(t,e){return e}function i(t,e){return[t,e]}}():Map,p=h||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new d}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[a]=function(){return this.keys()},t}():Set,v=new(h||"function"!=typeof WeakMap?function(){var t=f.create(),e=n();return function(){function t(){this._key=n()}return t.prototype.has=function(t){var e=o(t,!1);return void 0!==e&&f.has(e,this._key)},t.prototype.get=function(t){var e=o(t,!1);return void 0!==e?f.get(e,this._key):void 0},t.prototype.set=function(t,e){return o(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=o(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=n()},t}();function n(){var e;do{e="@@WeakMap@@"+a()}while(f.has(t,e));return t[e]=!0,e}function o(t,n){if(!r.call(t,e)){if(!n)return;Object.defineProperty(t,e,{value:f.create()})}return t[e]}function i(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function a(){var t,e=(t=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):i(new Uint8Array(t),t):i(new Array(t),t));e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",r=0;r<16;++r){var o=e[r];4!==r&&6!==r&&8!==r||(n+="-"),o<16&&(n+="0"),n+=o.toString(16).toLowerCase()}return n}}():WeakMap);function m(t,e,n){var r=v.get(t);if(w(r)){if(!n)return;r=new d,v.set(t,r)}var o=r.get(e);if(w(o)){if(!n)return;o=new d,r.set(e,o)}return o}function y(t,e,n){var r=m(e,n,!1);return!w(r)&&!!r.has(t)}function g(t,e,n){var r=m(e,n,!1);if(!w(r))return r.get(t)}function b(t,e,n,r){m(n,r,!0).set(t,e)}function _(t,e){var n=[],r=m(t,e,!1);if(w(r))return n;for(var o=function(t){var e=D(t,a);if(!k(e))throw new TypeError;var n=e.call(t);if(!S(n))throw new TypeError;return n}(r.keys()),i=0;;){var u=R(o);if(!u)return n.length=i,n;var s=u.value;try{n[i]=s}catch(t){try{M(o)}finally{throw t}}i++}}function x(t){if(null===t)return 1;switch(n(t)){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function w(t){return void 0===t}function E(t){return null===t}function S(t){return"object"===n(t)?null!==t:"function"==typeof t}function T(t,e){switch(x(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",r=D(t,i);if(void 0!==r){var o=r.call(t,n);if(S(o))throw new TypeError;return o}return function(t,e){if("string"===e){var n=t.toString;if(k(n))if(!S(o=n.call(t)))return o;if(k(r=t.valueOf))if(!S(o=r.call(t)))return o}else{var r;if(k(r=t.valueOf))if(!S(o=r.call(t)))return o;var o,i=t.toString;if(k(i))if(!S(o=i.call(t)))return o}throw new TypeError}(t,"default"===n?"number":n)}function A(t){var e=T(t,3);return"symbol"===n(e)?e:function(t){return""+t}(e)}function I(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function k(t){return"function"==typeof t}function O(t){return"function"==typeof t}function D(t,e){var n=t[e];if(null!=n){if(!k(n))throw new TypeError;return n}}function R(t){var e=t.next();return!e.done&&e}function M(t){var e=t.return;e&&e.call(t)}function C(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===l)return e;if(e!==l)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var o=r.constructor;return"function"!=typeof o||o===t?e:o}function N(t){return t.__=void 0,delete t.__,t}e("decorate",(function(t,e,n,r){if(w(n)){if(!I(t))throw new TypeError;if(!O(e))throw new TypeError;return function(t,e){for(var n=t.length-1;n>=0;--n){var r=(0,t[n])(e);if(!w(r)&&!E(r)){if(!O(r))throw new TypeError;e=r}}return e}(t,e)}if(!I(t))throw new TypeError;if(!S(e))throw new TypeError;if(!S(r)&&!w(r)&&!E(r))throw new TypeError;return E(r)&&(r=void 0),function(t,e,n,r){for(var o=t.length-1;o>=0;--o){var i=(0,t[o])(e,n,r);if(!w(i)&&!E(i)){if(!S(i))throw new TypeError;r=i}}return r}(t,e,n=A(n),r)})),e("metadata",(function(t,e){return function(n,r){if(!S(n))throw new TypeError;if(!w(r)&&!function(t){switch(x(t)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;b(t,e,n,r)}})),e("defineMetadata",(function(t,e,n,r){if(!S(n))throw new TypeError;return w(r)||(r=A(r)),b(t,e,n,r)})),e("hasMetadata",(function(t,e,n){if(!S(e))throw new TypeError;return w(n)||(n=A(n)),function t(e,n,r){if(y(e,n,r))return!0;var o=C(n);return!E(o)&&t(e,o,r)}(t,e,n)})),e("hasOwnMetadata",(function(t,e,n){if(!S(e))throw new TypeError;return w(n)||(n=A(n)),y(t,e,n)})),e("getMetadata",(function(t,e,n){if(!S(e))throw new TypeError;return w(n)||(n=A(n)),function t(e,n,r){if(y(e,n,r))return g(e,n,r);var o=C(n);return E(o)?void 0:t(e,o,r)}(t,e,n)})),e("getOwnMetadata",(function(t,e,n){if(!S(e))throw new TypeError;return w(n)||(n=A(n)),g(t,e,n)})),e("getMetadataKeys",(function(t,e){if(!S(t))throw new TypeError;return w(e)||(e=A(e)),function t(e,n){var r=_(e,n),o=C(e);if(null===o)return r;var i=t(o,n);if(i.length<=0)return r;if(r.length<=0)return i;for(var a=new p,u=[],s=0,c=r;s<c.length;s++){var f=c[s];a.has(f)||(a.add(f),u.push(f))}for(var l=0,h=i;l<h.length;l++){f=h[l];a.has(f)||(a.add(f),u.push(f))}return u}(t,e)})),e("getOwnMetadataKeys",(function(t,e){if(!S(t))throw new TypeError;return w(e)||(e=A(e)),_(t,e)})),e("deleteMetadata",(function(t,e,n){if(!S(e))throw new TypeError;w(n)||(n=A(n));var r=m(e,n,!1);if(w(r))return!1;if(!r.delete(t))return!1;if(r.size>0)return!0;var o=v.get(e);return o.delete(n),o.size>0||v.delete(e),!0}))}(a)}()}(r||(r={}))}).call(this,n(369),n(106))},function(t,e,n){var r=n(161);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MetadataReader=void 0;var r=n(17),o=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(r.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(r.TAGGED,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(r.TAGGED_PROP,t)||[]},t}();e.MetadataReader=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isStackOverflowExeption=void 0;var r=n(19);e.isStackOverflowExeption=function(t){return t instanceof RangeError||t.message===r.STACK_OVERFLOW}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.inject=e.LazyServiceIdentifer=void 0;var r=n(19),o=n(17),i=n(26),a=n(33),u=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();e.LazyServiceIdentifer=u,e.inject=function(t){return function(e,n,u){if(void 0===t)throw new Error(r.UNDEFINED_INJECT_ANNOTATION(e.name));var s=new i.Metadata(o.INJECT_TAG,t);"number"==typeof u?a.tagParameter(e,n,u,s):a.tagProperty(e,n,s)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Target=void 0;var r=n(17),o=n(40),i=n(26),a=n(381),u=function(){function t(t,e,n,u){this.id=o.id(),this.type=t,this.serviceIdentifier=n,this.name=new a.QueryableString(e||""),this.metadata=new Array;var s=null;"string"==typeof u?s=new i.Metadata(r.NAMED_TAG,u):u instanceof i.Metadata&&(s=u),null!==s&&this.metadata.push(s)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){if(n[e].key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(r.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(t){return this.matchesTag(r.MULTI_INJECT_TAG)(t)},t.prototype.isNamed=function(){return this.hasTag(r.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some((function(t){return t.key!==r.INJECT_TAG&&t.key!==r.MULTI_INJECT_TAG&&t.key!==r.NAME_TAG&&t.key!==r.UNMANAGED_TAG&&t.key!==r.NAMED_TAG}))},t.prototype.isOptional=function(){return this.matchesTag(r.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===r.NAMED_TAG}))[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return t.key!==r.INJECT_TAG&&t.key!==r.MULTI_INJECT_TAG&&t.key!==r.NAME_TAG&&t.key!==r.UNMANAGED_TAG&&t.key!==r.NAMED_TAG})):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(r.NAMED_TAG)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var r=0,o=e.metadata;r<o.length;r++){var i=o[r];if(i.key===t&&i.value===n)return!0}return!1}},t}();e.Target=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenOnSyntax=void 0;var r=n(91),o=n(92),i=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingWhenOnSyntax=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.typeConstraint=e.namedConstraint=e.taggedConstraint=e.traverseAncerstors=void 0;var r=n(17),o=n(26);e.traverseAncerstors=function t(e,n){var r=e.parentRequest;return null!==r&&(!!n(r)||t(r,n))};var i=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new o.Metadata(t,e),n}};e.taggedConstraint=i;var a=i(r.NAMED_TAG);e.namedConstraint=a;e.typeConstraint=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"==typeof t)return n.serviceIdentifier===t;var r=e.bindings[0].implementationType;return t===r}return!1}}},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){t.exports=1e-6},function(t,e){t.exports=function(){var t=new Float32Array(2);return t[0]=0,t[1]=0,t}},function(t,e){t.exports=function(t,e,n){return t[0]=e,t[1]=n,t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}},function(t,e){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}},function(t,e){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}},function(t,e){t.exports=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}},function(t,e){t.exports=function(t){var e=t[0],n=t[1];return e*e+n*n}},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o);return t}},function(t,e){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(401);e.default=function(t,e){return void 0===e&&(e=!0),{lazyInject:r.makePropertyInjectDecorator(t,e),lazyInjectNamed:r.makePropertyInjectNamedDecorator(t,e),lazyInjectTagged:r.makePropertyInjectTaggedDecorator(t,e),lazyMultiInject:r.makePropertyMultiInjectDecorator(t,e)}}},function(t,e,n){var r=n(144);t.exports=function(t){return t&&t.length?r(t):[]}},function(t,e,n){var r,o,i;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i=function(){"use strict";var t=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},e=function(t,e){for(var n=Object.keys(e),r=0;r<n.length;++r)t[n[r]]=e[n[r]];return t};function n(t){var e=new Error("(regl) "+t);throw console.error(e),e}function r(t,e){t||n(e)}function o(t){return t?": "+t:""}function i(t,e){switch(e){case"number":return"number"==typeof t;case"object":return"object"===a(t);case"string":return"string"==typeof t;case"boolean":return"boolean"==typeof t;case"function":return"function"==typeof t;case"undefined":return void 0===t;case"symbol":return"symbol"===a(t)}}function u(t,e,r){e.indexOf(t)<0&&n("invalid value"+o(r)+". must be one of: "+e)}var s=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function c(t,e){for(t+="";t.length<e;)t=" "+t;return t}function f(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function l(t,e){this.number=t,this.line=e,this.errors=[]}function h(t,e,n){this.file=t,this.line=e,this.message=n}function d(){var t=new Error,e=(t.stack||t).toString(),n=/compileProcedure.*\\n\\s*at.*\\((.*)\\)/.exec(e);if(n)return n[1];var r=/compileProcedure.*\\n\\s*at\\s+(.*)(\\n|$)/.exec(e);return r?r[1]:"unknown"}function p(){var t=new Error,e=(t.stack||t).toString(),n=/at REGLCommand.*\\n\\s+at.*\\((.*)\\)/.exec(e);if(n)return n[1];var r=/at REGLCommand.*\\n\\s+at\\s+(.*)\\n/.exec(e);return r?r[1]:"unknown"}function v(t,e){var n,r=t.split("\\n"),o=1,i=0,a={unknown:new f,0:new f};a.unknown.name=a[0].name=e||d(),a.unknown.lines.push(new l(0,""));for(var u=0;u<r.length;++u){var s=r[u],c=/^\\s*#\\s*(\\w+)\\s+(.+)\\s*$/.exec(s);if(c)switch(c[1]){case"line":var h=/(\\d+)(\\s+\\d+)?/.exec(c[2]);h&&(o=0|h[1],h[2]&&((i=0|h[2])in a||(a[i]=new f)));break;case"define":var p=/SHADER_NAME(_B64)?\\s+(.*)$/.exec(c[2]);p&&(a[i].name=p[1]?(n=p[2],"undefined"!=typeof atob?atob(n):"base64:"+n):p[2])}a[i].lines.push(new l(o++,s))}return Object.keys(a).forEach((function(t){var e=a[t];e.lines.forEach((function(t){e.index[t.number]=t}))})),a}function m(t){t._commandRef=d()}function y(t,e){var r=p();n(t+" in command "+(e||d())+("unknown"===r?"":" called from "+r))}function g(t,e,n,r){i(t,e)||y("invalid parameter type"+o(n)+". expected "+e+", got "+a(t),r||d())}var b={};function _(t,e){return 32820===t||32819===t||33635===t?2:34042===t?4:b[t]*e}function x(t){return!(t&t-1||!t)}b[5120]=b[5121]=1,b[5122]=b[5123]=b[36193]=b[33635]=b[32819]=b[32820]=2,b[5124]=b[5125]=b[5126]=b[34042]=4;var w=e(r,{optional:function(t){t()},raise:n,commandRaise:y,command:function(t,e,n){t||y(e,n||d())},parameter:function(t,e,r){t in e||n("unknown parameter ("+t+")"+o(r)+". possible values: "+Object.keys(e).join())},commandParameter:function(t,e,n,r){t in e||y("unknown parameter ("+t+")"+o(n)+". possible values: "+Object.keys(e).join(),r||d())},constructor:function(t){Object.keys(t).forEach((function(t){s.indexOf(t)<0&&n('invalid regl constructor argument "'+t+'". must be one of '+s)}))},type:function(t,e,r){i(t,e)||n("invalid parameter type"+o(r)+". expected "+e+", got "+a(t))},commandType:g,isTypedArray:function(e,r){t(e)||n("invalid parameter type"+o(r)+". must be a typed array")},nni:function(t,e){t>=0&&(0|t)===t||n("invalid parameter type, ("+t+")"+o(e)+". must be a nonnegative integer")},oneOf:u,shaderError:function(t,e,n,o,i){if(!t.getShaderParameter(e,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(e),u=o===t.FRAGMENT_SHADER?"fragment":"vertex";g(n,"string",u+" shader source must be a string",i);var s=v(n,i),f=function(t){var e=[];return t.split("\\n").forEach((function(t){if(!(t.length<5)){var n=/^ERROR:\\s+(\\d+):(\\d+):\\s*(.*)$/.exec(t);n?e.push(new h(0|n[1],0|n[2],n[3].trim())):t.length>0&&e.push(new h("unknown",0,t))}})),e}(a);!function(t,e){e.forEach((function(e){var n=t[e.file];if(n){var r=n.index[e.line];if(r)return r.errors.push(e),void(n.hasErrors=!0)}t.unknown.hasErrors=!0,t.unknown.lines[0].errors.push(e)}))}(s,f),Object.keys(s).forEach((function(t){var e=s[t];if(e.hasErrors){var n=[""],r=[""];o("file number "+t+": "+e.name+"\\n","color:red;text-decoration:underline;font-weight:bold"),e.lines.forEach((function(t){if(t.errors.length>0){o(c(t.number,4)+"|  ","background-color:yellow; font-weight:bold"),o(t.line+"\\n","color:red; background-color:yellow; font-weight:bold");var e=0;t.errors.forEach((function(n){var r=n.message,i=/^\\s*'(.*)'\\s*:\\s*(.*)$/.exec(r);if(i){var a=i[1];switch(r=i[2],a){case"assign":a="="}e=Math.max(t.line.indexOf(a,e),0)}else e=0;o(c("| ",6)),o(c("^^^",e+3)+"\\n","font-weight:bold"),o(c("| ",6)),o(r+"\\n","font-weight:bold")})),o(c("| ",6)+"\\n")}else o(c(t.number,4)+"|  "),o(t.line+"\\n","color:red")})),"undefined"==typeof document||window.chrome?console.log(n.join("")):(r[0]=n.join("%c"),console.log.apply(console,r))}function o(t,e){n.push(t),r.push(e||"")}})),r.raise("Error compiling "+u+" shader, "+s[0].name)}},linkError:function(t,e,n,o,i){if(!t.getProgramParameter(e,t.LINK_STATUS)){var a=t.getProgramInfoLog(e),u=v(n,i),s='Error linking program with vertex shader, "'+v(o,i)[0].name+'", and fragment shader "'+u[0].name+'"';"undefined"!=typeof document?console.log("%c"+s+"\\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(s+"\\n"+a),r.raise(s)}},callSite:p,saveCommandRef:m,saveDrawInfo:function(t,e,n,r){function o(t){return t?r.id(t):0}function i(t,e){Object.keys(e).forEach((function(e){t[r.id(e)]=!0}))}m(t),t._fragId=o(t.static.frag),t._vertId=o(t.static.vert);var a=t._uniformSet={};i(a,e.static),i(a,e.dynamic);var u=t._attributeSet={};i(u,n.static),i(u,n.dynamic),t._hasCount="count"in t.static||"count"in t.dynamic||"elements"in t.static||"elements"in t.dynamic},framebufferFormat:function(t,e,n){t.texture?u(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):u(t.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")},guessCommand:d,texture2D:function(t,e,n){var o,i=e.width,a=e.height,u=e.channels;r(i>0&&i<=n.maxTextureSize&&a>0&&a<=n.maxTextureSize,"invalid texture shape"),33071===t.wrapS&&33071===t.wrapT||r(x(i)&&x(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==i&&1!==a&&r(9984!==t.minFilter&&9986!==t.minFilter&&9985!==t.minFilter&&9987!==t.minFilter,"min filter requires mipmap"):(r(x(i)&&x(a),"texture must be a square power of 2 to support mipmapping"),r(e.mipmask===(i<<1)-1,"missing or incomplete mipmap data")),5126===e.type&&(n.extensions.indexOf("oes_texture_float_linear")<0&&r(9728===t.minFilter&&9728===t.magFilter,"filter not supported, must enable oes_texture_float_linear"),r(!t.genMipmaps,"mipmap generation not supported with float textures"));var s=e.images;for(o=0;o<16;++o)if(s[o]){var c=i>>o,f=a>>o;r(e.mipmask&1<<o,"missing mipmap data");var l=s[o];if(r(l.width===c&&l.height===f,"invalid shape for mip images"),r(l.format===e.format&&l.internalformat===e.internalformat&&l.type===e.type,"incompatible type for mip image"),l.compressed);else if(l.data){var h=Math.ceil(_(l.type,u)*c/l.unpackAlignment)*l.unpackAlignment;r(l.data.byteLength===h*f,"invalid data for image, buffer size is inconsistent with image format")}else l.element||l.copy}else t.genMipmaps||r(0==(e.mipmask&1<<o),"extra mipmap data");e.compressed&&r(!t.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(t,e,n,o){var i=t.width,a=t.height,u=t.channels;r(i>0&&i<=o.maxTextureSize&&a>0&&a<=o.maxTextureSize,"invalid texture shape"),r(i===a,"cube map must be square"),r(33071===e.wrapS&&33071===e.wrapT,"wrap mode not supported by cube map");for(var s=0;s<n.length;++s){var c=n[s];r(c.width===i&&c.height===a,"inconsistent cube map face shape"),e.genMipmaps&&(r(!c.compressed,"can not generate mipmap for compressed textures"),r(1===c.mipmask,"can not specify mipmaps and generate mipmaps"));for(var f=c.images,l=0;l<16;++l){var h=f[l];if(h){var d=i>>l,p=a>>l;r(c.mipmask&1<<l,"missing mipmap data"),r(h.width===d&&h.height===p,"invalid shape for mip images"),r(h.format===t.format&&h.internalformat===t.internalformat&&h.type===t.type,"incompatible type for mip image"),h.compressed||(h.data?r(h.data.byteLength===d*p*Math.max(_(h.type,u),h.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):h.element||h.copy)}}}}}),E=0;function S(t,e){this.id=E++,this.type=t,this.data=e}function T(t){return t.replace(/\\\\/g,"\\\\\\\\").replace(/"/g,'\\\\"')}function A(t){return"["+function t(e){if(0===e.length)return[];var n=e.charAt(0),r=e.charAt(e.length-1);if(e.length>1&&n===r&&('"'===n||"'"===n))return['"'+T(e.substr(1,e.length-2))+'"'];var o=/\\[(false|true|null|\\d+|'[^']*'|"[^"]*")\\]/.exec(e);if(o)return t(e.substr(0,o.index)).concat(t(o[1])).concat(t(e.substr(o.index+o[0].length)));var i=e.split(".");if(1===i.length)return['"'+T(e)+'"'];for(var a=[],u=0;u<i.length;++u)a=a.concat(t(i[u]));return a}(t).join("][")+"]"}var I={DynamicVariable:S,define:function(t,e){return new S(t,A(e+""))},isDynamic:function(t){return"function"==typeof t&&!t._reglType||t instanceof S},unbox:function t(e,n){return"function"==typeof e?new S(0,e):"number"==typeof e||"boolean"==typeof e?new S(5,e):Array.isArray(e)?new S(6,e.map((function(e,r){return t(e,n+"["+r+"]")}))):e instanceof S?e:void w(!1,"invalid option type in uniform "+n)},accessor:A},k={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},O="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function D(t){return"string"==typeof t?t.split():(w(Array.isArray(t),"invalid extension array"),t)}function R(t){return"string"==typeof t?(w("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function M(t){var n,r,o,i,u,s=t||{},c={},f=[],l=[],h="undefined"==typeof window?1:window.devicePixelRatio,d=!1,p=function(t){t&&w.raise(t)},v=function(){};if("string"==typeof s?(w("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),n=document.querySelector(s),w(n,"invalid query string for element")):"object"===a(s)?"string"==typeof(u=s).nodeName&&"function"==typeof u.appendChild&&"function"==typeof u.getBoundingClientRect?n=s:function(t){return"function"==typeof t.drawArrays||"function"==typeof t.drawElements}(s)?o=(i=s).canvas:(w.constructor(s),"gl"in s?i=s.gl:"canvas"in s?o=R(s.canvas):"container"in s&&(r=R(s.container)),"attributes"in s&&(c=s.attributes,w.type(c,"object","invalid context attributes")),"extensions"in s&&(f=D(s.extensions)),"optionalExtensions"in s&&(l=D(s.optionalExtensions)),"onDone"in s&&(w.type(s.onDone,"function","invalid or missing onDone callback"),p=s.onDone),"profile"in s&&(d=!!s.profile),"pixelRatio"in s&&(h=+s.pixelRatio,w(h>0,"invalid pixel ratio"))):w.raise("invalid arguments to regl"),n&&("canvas"===n.nodeName.toLowerCase()?o=n:r=n),!i){if(!o){w("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var m=function(t,n,r){var o,i=document.createElement("canvas");function a(){var n=window.innerWidth,o=window.innerHeight;if(t!==document.body){var a=t.getBoundingClientRect();n=a.right-a.left,o=a.bottom-a.top}i.width=r*n,i.height=r*o,e(i.style,{width:n+"px",height:o+"px"})}return e(i.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(i),t===document.body&&(i.style.position="absolute",e(t.style,{margin:0,padding:0})),t!==document.body&&"function"==typeof ResizeObserver?(o=new ResizeObserver((function(){setTimeout(a)}))).observe(t):window.addEventListener("resize",a,!1),a(),{canvas:i,onDestroy:function(){o?o.disconnect():window.removeEventListener("resize",a),t.removeChild(i)}}}(r||document.body,0,h);if(!m)return null;o=m.canvas,v=m.onDestroy}void 0===c.premultipliedAlpha&&(c.premultipliedAlpha=!0),i=function(t,e){function n(n){try{return t.getContext(n,e)}catch(t){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}(o,c)}return i?{gl:i,canvas:o,container:r,extensions:f,optionalExtensions:l,pixelRatio:h,profile:d,onDone:p,onDestroy:v}:(v(),p("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function C(t,e){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r);return n}function N(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1}function P(){var t=C(8,(function(){return[]}));function e(e){var n=function(t){for(var e=16;e<=1<<28;e*=16)if(t<=e)return e;return 0}(e),r=t[N(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(e){t[N(e.byteLength)>>2].push(e)}return{alloc:e,free:n,allocType:function(t,n){var r=null;switch(t){case 5120:r=new Int8Array(e(n),0,n);break;case 5121:r=new Uint8Array(e(n),0,n);break;case 5122:r=new Int16Array(e(2*n),0,n);break;case 5123:r=new Uint16Array(e(2*n),0,n);break;case 5124:r=new Int32Array(e(4*n),0,n);break;case 5125:r=new Uint32Array(e(4*n),0,n);break;case 5126:r=new Float32Array(e(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r},freeType:function(t){n(t.buffer)}}}var G=P();function j(e){return!!e&&"object"===a(e)&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||t(e.data))}G.zero=P();var L=function(t){return Object.keys(t).map((function(e){return t[e]}))},U={shape:function(t){for(var e=[],n=t;n.length;n=n[0])e.push(n.length);return e},flatten:function(t,e,n,r){var o=1;if(e.length)for(var i=0;i<e.length;++i)o*=e[i];else o=0;var a=r||G.allocType(n,o);switch(e.length){case 0:break;case 1:!function(t,e,n){for(var r=0;r<e;++r)n[r]=t[r]}(t,e[0],a);break;case 2:!function(t,e,n,r){for(var o=0,i=0;i<e;++i)for(var a=t[i],u=0;u<n;++u)r[o++]=a[u]}(t,e[0],e[1],a);break;case 3:B(t,e[0],e[1],e[2],a,0);break;default:!function t(e,n,r,o,i){for(var a=1,u=r+1;u<n.length;++u)a*=n[u];var s=n[r];if(n.length-r==4){var c=n[r+1],f=n[r+2],l=n[r+3];for(u=0;u<s;++u)B(e[u],c,f,l,o,i),i+=a}else for(u=0;u<s;++u)t(e[u],n,r+1,o,i),i+=a}(t,e,0,a,0)}return a}};function B(t,e,n,r,o,i){for(var a=i,u=0;u<e;++u)for(var s=t[u],c=0;c<n;++c)for(var f=s[c],l=0;l<r;++l)o[a++]=f[l]}var F={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},z={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},V={dynamic:35048,stream:35040,static:35044},W=U.flatten,X=U.shape,H=[];function q(t){return 0|F[Object.prototype.toString.call(t)]}function Y(t,e){for(var n=0;n<e.length;++n)t[n]=e[n]}function K(t,e,n,r,o,i,a){for(var u=0,s=0;s<n;++s)for(var c=0;c<r;++c)t[u++]=e[o*s+i*c+a]}H[5120]=1,H[5122]=2,H[5124]=4,H[5121]=1,H[5123]=2,H[5125]=4,H[5126]=4;var Z={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Q=new Float32Array(1),J=new Uint32Array(Q.buffer);function $(t){for(var e=G.allocType(5123,t.length),n=0;n<t.length;++n)if(isNaN(t[n]))e[n]=65535;else if(t[n]===1/0)e[n]=31744;else if(t[n]===-1/0)e[n]=64512;else{Q[0]=t[n];var r=J[0],o=r>>>31<<15,i=(r<<1>>>24)-127,a=r>>13&1023;if(i<-24)e[n]=o;else if(i<-14){var u=-14-i;e[n]=o+(a+1024>>u)}else e[n]=i>15?o+31744:o+(i+15<<10)+a}return e}function tt(e){return Array.isArray(e)||t(e)}var et=function(t){return!(t&t-1||!t)},nt=[9984,9986,9985,9987],rt=[0,6409,6410,6407,6408],ot={};function it(t){return"[object "+t+"]"}ot[6409]=ot[6406]=ot[6402]=1,ot[34041]=ot[6410]=2,ot[6407]=ot[35904]=3,ot[6408]=ot[35906]=4;var at=it("HTMLCanvasElement"),ut=it("OffscreenCanvas"),st=it("CanvasRenderingContext2D"),ct=it("ImageBitmap"),ft=it("HTMLImageElement"),lt=it("HTMLVideoElement"),ht=Object.keys(F).concat([at,ut,st,ct,ft,lt]),dt=[];dt[5121]=1,dt[5126]=4,dt[36193]=2,dt[5123]=2,dt[5125]=4;var pt=[];function vt(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function mt(t){return!!Array.isArray(t)&&!(0===t.length||!tt(t[0]))}function yt(t){return Object.prototype.toString.call(t)}function gt(t){return yt(t)===at}function bt(t){return yt(t)===ut}function _t(t){if(!t)return!1;var e=yt(t);return ht.indexOf(e)>=0||vt(t)||mt(t)||j(t)}function xt(t){return 0|F[Object.prototype.toString.call(t)]}function wt(t,e){return G.allocType(36193===t.type?5126:t.type,e)}function Et(t,e){36193===t.type?(t.data=$(e),G.freeType(e)):t.data=e}function St(t,e,n,r,o,i){var a;if(a=void 0!==pt[t]?pt[t]:ot[t]*dt[e],i&&(a*=6),o){for(var u=0,s=n;s>=1;)u+=a*s*s,s/=2;return u}return a*n*r}function Tt(n,r,o,i,u,s,c){var f={"don't care":4352,"dont care":4352,nice:4354,fast:4353},l={repeat:10497,clamp:33071,mirror:33648},h={nearest:9728,linear:9729},d=e({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},h),p={none:0,browser:37444},v={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},m={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},y={};r.ext_srgb&&(m.srgb=35904,m.srgba=35906),r.oes_texture_float&&(v.float32=v.float=5126),r.oes_texture_half_float&&(v.float16=v["half float"]=36193),r.webgl_depth_texture&&(e(m,{depth:6402,"depth stencil":34041}),e(v,{uint16:5123,uint32:5125,"depth stencil":34042})),r.webgl_compressed_texture_s3tc&&e(y,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),r.webgl_compressed_texture_atc&&e(y,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),r.webgl_compressed_texture_pvrtc&&e(y,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),r.webgl_compressed_texture_etc1&&(y["rgb etc1"]=36196);var g=Array.prototype.slice.call(n.getParameter(34467));Object.keys(y).forEach((function(t){var e=y[t];g.indexOf(e)>=0&&(m[t]=e)}));var b=Object.keys(m);o.textureFormats=b;var _=[];Object.keys(m).forEach((function(t){var e=m[t];_[e]=t}));var x=[];Object.keys(v).forEach((function(t){var e=v[t];x[e]=t}));var E=[];Object.keys(h).forEach((function(t){E[h[t]]=t}));var S=[];Object.keys(d).forEach((function(t){var e=d[t];S[e]=t}));var T=[];Object.keys(l).forEach((function(t){T[l[t]]=t}));var A=b.reduce((function(t,e){var n=m[e];return 6409===n||6406===n||6409===n||6410===n||6402===n||34041===n||r.ext_srgb&&(35904===n||35906===n)?t[n]=n:32855===n||e.indexOf("rgba")>=0?t[n]=6408:t[n]=6407,t}),{});function I(){this.internalformat=6408,this.format=6408,this.type=5121,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0}function k(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function O(t,e){if("object"===a(e)&&e){if("premultiplyAlpha"in e&&(w.type(e.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=e.premultiplyAlpha),"flipY"in e&&(w.type(e.flipY,"boolean","invalid texture flip"),t.flipY=e.flipY),"alignment"in e&&(w.oneOf(e.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=e.alignment),"colorSpace"in e&&(w.parameter(e.colorSpace,p,"invalid colorSpace"),t.colorSpace=p[e.colorSpace]),"type"in e){var n=e.type;w(r.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),w(r.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),w(r.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),w.parameter(n,v,"invalid texture type"),t.type=v[n]}var i=t.width,u=t.height,s=t.channels,c=!1;"shape"in e?(w(Array.isArray(e.shape)&&e.shape.length>=2,"shape must be an array"),i=e.shape[0],u=e.shape[1],3===e.shape.length&&(s=e.shape[2],w(s>0&&s<=4,"invalid number of channels"),c=!0),w(i>=0&&i<=o.maxTextureSize,"invalid width"),w(u>=0&&u<=o.maxTextureSize,"invalid height")):("radius"in e&&(i=u=e.radius,w(i>=0&&i<=o.maxTextureSize,"invalid radius")),"width"in e&&(i=e.width,w(i>=0&&i<=o.maxTextureSize,"invalid width")),"height"in e&&(u=e.height,w(u>=0&&u<=o.maxTextureSize,"invalid height")),"channels"in e&&(s=e.channels,w(s>0&&s<=4,"invalid number of channels"),c=!0)),t.width=0|i,t.height=0|u,t.channels=0|s;var f=!1;if("format"in e){var l=e.format;w(r.webgl_depth_texture||!("depth"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),w.parameter(l,m,"invalid texture format");var h=t.internalformat=m[l];t.format=A[h],l in v&&("type"in e||(t.type=v[l])),l in y&&(t.compressed=!0),f=!0}!c&&f?t.channels=ot[t.format]:c&&!f?t.channels!==rt[t.format]&&(t.format=t.internalformat=rt[t.channels]):f&&c&&w(t.channels===ot[t.format],"number of channels inconsistent with specified format")}}function D(t){n.pixelStorei(37440,t.flipY),n.pixelStorei(37441,t.premultiplyAlpha),n.pixelStorei(37443,t.colorSpace),n.pixelStorei(3317,t.unpackAlignment)}function R(){I.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function M(e,n){var r=null;if(_t(n)?r=n:n&&(w.type(n,"object","invalid pixel data type"),O(e,n),"x"in n&&(e.xOffset=0|n.x),"y"in n&&(e.yOffset=0|n.y),_t(n.data)&&(r=n.data)),w(!e.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){w(!r,"can not specify copy and data field for the same texture");var i=u.viewportWidth,a=u.viewportHeight;e.width=e.width||i-e.xOffset,e.height=e.height||a-e.yOffset,e.needsCopy=!0,w(e.xOffset>=0&&e.xOffset<i&&e.yOffset>=0&&e.yOffset<a&&e.width>0&&e.width<=i&&e.height>0&&e.height<=a,"copy texture read out of bounds")}else if(r){if(t(r))e.channels=e.channels||4,e.data=r,"type"in n||5121!==e.type||(e.type=xt(r));else if(vt(r))e.channels=e.channels||4,function(t,e){var n=e.length;switch(t.type){case 5121:case 5123:case 5125:case 5126:var r=G.allocType(t.type,n);r.set(e),t.data=r;break;case 36193:t.data=$(e);break;default:w.raise("unsupported texture type, must specify a typed array")}}(e,r),e.alignment=1,e.needsFree=!0;else if(j(r)){var s=r.data;Array.isArray(s)||5121!==e.type||(e.type=xt(s));var c,f,l,h,d,p,v=r.shape,m=r.stride;3===v.length?(l=v[2],p=m[2]):(w(2===v.length,"invalid ndarray pixel data, must be 2 or 3D"),l=1,p=1),c=v[0],f=v[1],h=m[0],d=m[1],e.alignment=1,e.width=c,e.height=f,e.channels=l,e.format=e.internalformat=rt[l],e.needsFree=!0,function(t,e,n,r,o,i){for(var a=t.width,u=t.height,s=t.channels,c=wt(t,a*u*s),f=0,l=0;l<u;++l)for(var h=0;h<a;++h)for(var d=0;d<s;++d)c[f++]=e[n*h+r*l+o*d+i];Et(t,c)}(e,s,h,d,p,r.offset)}else if(gt(r)||bt(r)||yt(r)===st)gt(r)||bt(r)?e.element=r:e.element=r.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(function(t){return yt(t)===ct}(r))e.element=r,e.width=r.width,e.height=r.height,e.channels=4;else if(function(t){return yt(t)===ft}(r))e.element=r,e.width=r.naturalWidth,e.height=r.naturalHeight,e.channels=4;else if(function(t){return yt(t)===lt}(r))e.element=r,e.width=r.videoWidth,e.height=r.videoHeight,e.channels=4;else if(mt(r)){var y=e.width||r[0].length,g=e.height||r.length,b=e.channels;b=tt(r[0][0])?b||r[0][0].length:b||1;for(var _=U.shape(r),x=1,E=0;E<_.length;++E)x*=_[E];var S=wt(e,x);U.flatten(r,_,"",S),Et(e,S),e.alignment=1,e.width=y,e.height=g,e.channels=b,e.format=e.internalformat=rt[b],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;5126===e.type?w(o.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):36193===e.type&&w(o.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function C(t,e,r){var o=t.element,a=t.data,u=t.internalformat,s=t.format,c=t.type,f=t.width,l=t.height;D(t),o?n.texImage2D(e,r,s,s,c,o):t.compressed?n.compressedTexImage2D(e,r,u,f,l,0,a):t.needsCopy?(i(),n.copyTexImage2D(e,r,s,t.xOffset,t.yOffset,f,l,0)):n.texImage2D(e,r,s,f,l,0,s,c,a||null)}function N(t,e,r,o,a){var u=t.element,s=t.data,c=t.internalformat,f=t.format,l=t.type,h=t.width,d=t.height;D(t),u?n.texSubImage2D(e,a,r,o,f,l,u):t.compressed?n.compressedTexSubImage2D(e,a,r,o,c,h,d,s):t.needsCopy?(i(),n.copyTexSubImage2D(e,a,r,o,t.xOffset,t.yOffset,h,d)):n.texSubImage2D(e,a,r,o,h,d,f,l,s)}var P=[];function B(){return P.pop()||new R}function F(t){t.needsFree&&G.freeType(t.data),R.call(t),P.push(t)}function z(){I.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function V(t,e,n){var r=t.images[0]=B();t.mipmask=1,r.width=t.width=e,r.height=t.height=n,r.channels=t.channels=4}function W(t,e){var n=null;if(_t(e))k(n=t.images[0]=B(),t),M(n,e),t.mipmask=1;else if(O(t,e),Array.isArray(e.mipmap))for(var r=e.mipmap,o=0;o<r.length;++o)k(n=t.images[o]=B(),t),n.width>>=o,n.height>>=o,M(n,r[o]),t.mipmask|=1<<o;else k(n=t.images[0]=B(),t),M(n,e),t.mipmask=1;k(t,t.images[0]),!t.compressed||33776!==t.internalformat&&33777!==t.internalformat&&33778!==t.internalformat&&33779!==t.internalformat||w(t.width%4==0&&t.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function X(t,e){for(var n=t.images,r=0;r<n.length;++r){if(!n[r])return;C(n[r],e,r)}}var H=[];function q(){var t=H.pop()||new z;I.call(t),t.mipmask=0;for(var e=0;e<16;++e)t.images[e]=null;return t}function Y(t){for(var e=t.images,n=0;n<e.length;++n)e[n]&&F(e[n]),e[n]=null;H.push(t)}function K(){this.minFilter=9728,this.magFilter=9728,this.wrapS=33071,this.wrapT=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Z(t,e){if("min"in e){var n=e.min;w.parameter(n,d),t.minFilter=d[n],nt.indexOf(t.minFilter)>=0&&!("faces"in e)&&(t.genMipmaps=!0)}if("mag"in e){var r=e.mag;w.parameter(r,h),t.magFilter=h[r]}var i=t.wrapS,u=t.wrapT;if("wrap"in e){var s=e.wrap;"string"==typeof s?(w.parameter(s,l),i=u=l[s]):Array.isArray(s)&&(w.parameter(s[0],l),w.parameter(s[1],l),i=l[s[0]],u=l[s[1]])}else{if("wrapS"in e){var c=e.wrapS;w.parameter(c,l),i=l[c]}if("wrapT"in e){var p=e.wrapT;w.parameter(p,l),u=l[p]}}if(t.wrapS=i,t.wrapT=u,"anisotropic"in e){var v=e.anisotropic;w("number"==typeof v&&v>=1&&v<=o.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic}if("mipmap"in e){var m=!1;switch(a(e.mipmap)){case"string":w.parameter(e.mipmap,f,"invalid mipmap hint"),t.mipmapHint=f[e.mipmap],t.genMipmaps=!0,m=!0;break;case"boolean":m=t.genMipmaps=e.mipmap;break;case"object":w(Array.isArray(e.mipmap),"invalid mipmap type"),t.genMipmaps=!1,m=!0;break;default:w.raise("invalid mipmap type")}m&&!("min"in e)&&(t.minFilter=9984)}}function Q(t,e){n.texParameteri(e,10241,t.minFilter),n.texParameteri(e,10240,t.magFilter),n.texParameteri(e,10242,t.wrapS),n.texParameteri(e,10243,t.wrapT),r.ext_texture_filter_anisotropic&&n.texParameteri(e,34046,t.anisotropic),t.genMipmaps&&(n.hint(33170,t.mipmapHint),n.generateMipmap(e))}var J=0,it={},at=o.maxTextureUnits,ut=Array(at).map((function(){return null}));function ht(t){I.call(this),this.mipmask=0,this.internalformat=6408,this.id=J++,this.refCount=1,this.target=t,this.texture=n.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new K,c.profile&&(this.stats={size:0})}function dt(t){n.activeTexture(33984),n.bindTexture(t.target,t.texture)}function pt(){var t=ut[0];t?n.bindTexture(t.target,t.texture):n.bindTexture(3553,null)}function Tt(t){var e=t.texture;w(e,"must not double destroy texture");var r=t.unit,o=t.target;r>=0&&(n.activeTexture(33984+r),n.bindTexture(o,null),ut[r]=null),n.deleteTexture(e),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete it[t.id],s.textureCount--}return e(ht.prototype,{bind:function(){this.bindCount+=1;var t=this.unit;if(t<0){for(var e=0;e<at;++e){var r=ut[e];if(r){if(r.bindCount>0)continue;r.unit=-1}ut[e]=this,t=e;break}t>=at&&w.raise("insufficient number of texture units"),c.profile&&s.maxTextureUnits<t+1&&(s.maxTextureUnits=t+1),this.unit=t,n.activeTexture(33984+t),n.bindTexture(this.target,this.texture)}return t},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Tt(this)}}),c.profile&&(s.getTotalTextureSize=function(){var t=0;return Object.keys(it).forEach((function(e){t+=it[e].stats.size})),t}),{create2D:function(t,e){var r=new ht(3553);function i(t,e){var n=r.texInfo;K.call(n);var a=q();return"number"==typeof t?V(a,0|t,"number"==typeof e?0|e:0|t):t?(w.type(t,"object","invalid arguments to regl.texture"),Z(n,t),W(a,t)):V(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),r.mipmask=a.mipmask,k(r,a),w.texture2D(n,a,o),r.internalformat=a.internalformat,i.width=a.width,i.height=a.height,dt(r),X(a,3553),Q(n,3553),pt(),Y(a),c.profile&&(r.stats.size=St(r.internalformat,r.type,a.width,a.height,n.genMipmaps,!1)),i.format=_[r.internalformat],i.type=x[r.type],i.mag=E[n.magFilter],i.min=S[n.minFilter],i.wrapS=T[n.wrapS],i.wrapT=T[n.wrapT],i}return it[r.id]=r,s.textureCount++,i(t,e),i.subimage=function(t,e,n,o){w(!!t,"must specify image data");var a=0|e,u=0|n,s=0|o,c=B();return k(c,r),c.width=0,c.height=0,M(c,t),c.width=c.width||(r.width>>s)-a,c.height=c.height||(r.height>>s)-u,w(r.type===c.type&&r.format===c.format&&r.internalformat===c.internalformat,"incompatible format for texture.subimage"),w(a>=0&&u>=0&&a+c.width<=r.width&&u+c.height<=r.height,"texture.subimage write out of bounds"),w(r.mipmask&1<<s,"missing mipmap data"),w(c.data||c.element||c.needsCopy,"missing image data"),dt(r),N(c,3553,a,u,s),pt(),F(c),i},i.resize=function(t,e){var o=0|t,a=0|e||o;if(o===r.width&&a===r.height)return i;i.width=r.width=o,i.height=r.height=a,dt(r);for(var u=0;r.mipmask>>u;++u){var s=o>>u,f=a>>u;if(!s||!f)break;n.texImage2D(3553,u,r.format,s,f,0,r.format,r.type,null)}return pt(),c.profile&&(r.stats.size=St(r.internalformat,r.type,o,a,!1,!1)),i},i._reglType="texture2d",i._texture=r,c.profile&&(i.stats=r.stats),i.destroy=function(){r.decRef()},i},createCube:function(t,e,r,i,u,f){var l=new ht(34067);it[l.id]=l,s.cubeCount++;var h=new Array(6);function d(t,e,n,r,i,u){var s,f=l.texInfo;for(K.call(f),s=0;s<6;++s)h[s]=q();if("number"!=typeof t&&t)if("object"===a(t))if(e)W(h[0],t),W(h[1],e),W(h[2],n),W(h[3],r),W(h[4],i),W(h[5],u);else if(Z(f,t),O(l,t),"faces"in t){var p=t.faces;for(w(Array.isArray(p)&&6===p.length,"cube faces must be a length 6 array"),s=0;s<6;++s)w("object"===a(p[s])&&!!p[s],"invalid input for cube map face"),k(h[s],l),W(h[s],p[s])}else for(s=0;s<6;++s)W(h[s],t);else w.raise("invalid arguments to cube map");else{var v=0|t||1;for(s=0;s<6;++s)V(h[s],v,v)}for(k(l,h[0]),o.npotTextureCube||w(et(l.width)&&et(l.height),"your browser does not support non power or two texture dimensions"),f.genMipmaps?l.mipmask=(h[0].width<<1)-1:l.mipmask=h[0].mipmask,w.textureCube(l,f,h,o),l.internalformat=h[0].internalformat,d.width=h[0].width,d.height=h[0].height,dt(l),s=0;s<6;++s)X(h[s],34069+s);for(Q(f,34067),pt(),c.profile&&(l.stats.size=St(l.internalformat,l.type,d.width,d.height,f.genMipmaps,!0)),d.format=_[l.internalformat],d.type=x[l.type],d.mag=E[f.magFilter],d.min=S[f.minFilter],d.wrapS=T[f.wrapS],d.wrapT=T[f.wrapT],s=0;s<6;++s)Y(h[s]);return d}return d(t,e,r,i,u,f),d.subimage=function(t,e,n,r,o){w(!!e,"must specify image data"),w("number"==typeof t&&t===(0|t)&&t>=0&&t<6,"invalid face");var i=0|n,a=0|r,u=0|o,s=B();return k(s,l),s.width=0,s.height=0,M(s,e),s.width=s.width||(l.width>>u)-i,s.height=s.height||(l.height>>u)-a,w(l.type===s.type&&l.format===s.format&&l.internalformat===s.internalformat,"incompatible format for texture.subimage"),w(i>=0&&a>=0&&i+s.width<=l.width&&a+s.height<=l.height,"texture.subimage write out of bounds"),w(l.mipmask&1<<u,"missing mipmap data"),w(s.data||s.element||s.needsCopy,"missing image data"),dt(l),N(s,34069+t,i,a,u),pt(),F(s),d},d.resize=function(t){var e=0|t;if(e!==l.width){d.width=l.width=e,d.height=l.height=e,dt(l);for(var r=0;r<6;++r)for(var o=0;l.mipmask>>o;++o)n.texImage2D(34069+r,o,l.format,e>>o,e>>o,0,l.format,l.type,null);return pt(),c.profile&&(l.stats.size=St(l.internalformat,l.type,d.width,d.height,!1,!0)),d}},d._reglType="textureCube",d._texture=l,c.profile&&(d.stats=l.stats),d.destroy=function(){l.decRef()},d},clear:function(){for(var t=0;t<at;++t)n.activeTexture(33984+t),n.bindTexture(3553,null),ut[t]=null;L(it).forEach(Tt),s.cubeCount=0,s.textureCount=0},getTexture:function(t){return null},restore:function(){for(var t=0;t<at;++t){var e=ut[t];e&&(e.bindCount=0,e.unit=-1,ut[t]=null)}L(it).forEach((function(t){t.texture=n.createTexture(),n.bindTexture(t.target,t.texture);for(var e=0;e<32;++e)if(0!=(t.mipmask&1<<e))if(3553===t.target)n.texImage2D(3553,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);else for(var r=0;r<6;++r)n.texImage2D(34069+r,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);Q(t.texInfo,t.target)}))},refresh:function(){for(var t=0;t<at;++t){var e=ut[t];e&&(e.bindCount=0,e.unit=-1,ut[t]=null),n.activeTexture(33984+t),n.bindTexture(3553,null),n.bindTexture(34067,null)}}}}pt[32854]=2,pt[32855]=2,pt[36194]=2,pt[34041]=4,pt[33776]=.5,pt[33777]=.5,pt[33778]=1,pt[33779]=1,pt[35986]=.5,pt[35987]=1,pt[34798]=1,pt[35840]=.5,pt[35841]=.25,pt[35842]=.5,pt[35843]=.25,pt[36196]=.5;var At=[];function It(t,e,n){return At[t]*e*n}At[32854]=2,At[32855]=2,At[36194]=2,At[33189]=2,At[36168]=1,At[34041]=4,At[35907]=4,At[34836]=16,At[34842]=8,At[34843]=6;var kt=[6407,6408],Ot=[];Ot[6408]=4,Ot[6407]=3;var Dt=[];Dt[5121]=1,Dt[5126]=4,Dt[36193]=2;var Rt=[32854,32855,36194,35907,34842,34843,34836],Mt={};function Ct(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0}function Nt(e,n,r,o,i,a,u){function s(s){var c;null===n.next?(w(i.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),c=5121):(w(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),c=n.next.colorAttachments[0].texture._texture.type,a.oes_texture_float?(w(5121===c||5126===c,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===c&&w(u.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):w(5121===c,"Reading from a framebuffer is only allowed for the type 'uint8'"));var f=0,l=0,h=o.framebufferWidth,d=o.framebufferHeight,p=null;t(s)?p=s:s&&(w.type(s,"object","invalid arguments to regl.read()"),f=0|s.x,l=0|s.y,w(f>=0&&f<o.framebufferWidth,"invalid x offset for regl.read"),w(l>=0&&l<o.framebufferHeight,"invalid y offset for regl.read"),h=0|(s.width||o.framebufferWidth-f),d=0|(s.height||o.framebufferHeight-l),p=s.data||null),p&&(5121===c?w(p instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===c&&w(p instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),w(h>0&&h+f<=o.framebufferWidth,"invalid width for read pixels"),w(d>0&&d+l<=o.framebufferHeight,"invalid height for read pixels"),r();var v=h*d*4;return p||(5121===c?p=new Uint8Array(v):5126===c&&(p=p||new Float32Array(v))),w.isTypedArray(p,"data buffer for regl.read() must be a typedarray"),w(p.byteLength>=v,"data buffer for regl.read() too small"),e.pixelStorei(3333,4),e.readPixels(f,l,h,d,6408,c,p),p}return function(t){return t&&"framebuffer"in t?function(t){var e;return n.setFBO({framebuffer:t.framebuffer},(function(){e=s(t)})),e}(t):s(t)}}function Pt(t){return Array.prototype.slice.call(t)}function Gt(t){return Pt(t).join("")}Mt[36053]="complete",Mt[36054]="incomplete attachment",Mt[36057]="incomplete dimensions",Mt[36055]="incomplete, missing attachment",Mt[36061]="unsupported";var jt="xyzw".split(""),Lt="profile",Ut="framebuffer",Bt="vert",Ft="frag",zt="elements",Vt="primitive",Wt="count",Xt="offset",Ht="instances",qt="vao",Yt=Ut+"Width",Kt=Ut+"Height",Zt=["blend.func","blend.equation","stencil.func","stencil.opFront","stencil.opBack","sample.coverage","viewport","scissor.box","polygonOffset.offset"],Qt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Jt=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],$t={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},te={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ee={frag:35632,vert:35633},ne={cw:2304,ccw:2305};function re(e){return Array.isArray(e)||t(e)||j(e)}function oe(t){return t.sort((function(t,e){return"viewport"===t?-1:"viewport"===e?1:t<e?-1:1}))}function ie(t,e,n,r){this.thisDep=t,this.contextDep=e,this.propDep=n,this.append=r}function ae(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function ue(t){return new ie(!1,!1,!1,t)}function se(t,e){var n=t.type;if(0===n){var r=t.data.length;return new ie(!0,r>=1,r>=2,e)}if(4===n){var o=t.data;return new ie(o.thisDep,o.contextDep,o.propDep,e)}if(5===n)return new ie(!1,!1,!1,e);if(6===n){for(var i=!1,a=!1,u=!1,s=0;s<t.data.length;++s){var c=t.data[s];if(1===c.type)u=!0;else if(2===c.type)a=!0;else if(3===c.type)i=!0;else if(0===c.type){i=!0;var f=c.data;f>=1&&(a=!0),f>=2&&(u=!0)}else 4===c.type&&(i=i||c.data.thisDep,a=a||c.data.contextDep,u=u||c.data.propDep)}return new ie(i,a,u,e)}return new ie(3===n,2===n,1===n,e)}var ce=new ie(!1,!1,!1,(function(){}));function fe(t,n,r,o,i,u,s,c,f,l,h,d,p,v,m){var y=l.Record,g={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(g.min=32775,g.max=32776);var b=r.angle_instanced_arrays,_=r.webgl_draw_buffers,x={dirty:!0,profile:m.profile},E={},S=[],T={},A={};function k(t){return t.replace(".","_")}function O(t,e,n){var r=k(t);S.push(t),E[r]=x[r]=!!n,T[r]=e}function D(t,e,n){var r=k(t);S.push(t),Array.isArray(n)?(x[r]=n.slice(),E[r]=n.slice()):x[r]=E[r]=n,A[r]=e}O("dither",3024),O("blend.enable",3042),D("blend.color","blendColor",[0,0,0,0]),D("blend.equation","blendEquationSeparate",[32774,32774]),D("blend.func","blendFuncSeparate",[1,0,1,0]),O("depth.enable",2929,!0),D("depth.func","depthFunc",513),D("depth.range","depthRange",[0,1]),D("depth.mask","depthMask",!0),D("colorMask","colorMask",[!0,!0,!0,!0]),O("cull.enable",2884),D("cull.face","cullFace",1029),D("frontFace","frontFace",2305),D("lineWidth","lineWidth",1),O("polygonOffset.enable",32823),D("polygonOffset.offset","polygonOffset",[0,0]),O("sample.alpha",32926),O("sample.enable",32928),D("sample.coverage","sampleCoverage",[1,!1]),O("stencil.enable",2960),D("stencil.mask","stencilMask",-1),D("stencil.func","stencilFunc",[519,0,-1]),D("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),D("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),O("scissor.enable",3089),D("scissor.box","scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),D("viewport","viewport",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var R={gl:t,context:p,strings:n,next:E,current:x,draw:d,elements:u,buffer:i,shader:h,attributes:l.state,vao:l,uniforms:f,framebuffer:c,extensions:r,timer:v,isBufferArgs:re},M={primTypes:Z,compareFuncs:$t,blendFuncs:Qt,blendEquations:g,stencilOps:te,glTypes:z,orientationType:ne};w.optional((function(){R.isArrayLike=tt})),_&&(M.backBuffer=[1029],M.drawBuffer=C(o.maxDrawbuffers,(function(t){return 0===t?[0]:C(t,(function(t){return 36064+t}))})));var N=0;function P(){var t=function(){var t=0,n=[],r=[];function o(){var n=[],r=[];return e((function(){n.push.apply(n,Pt(arguments))}),{def:function(){var e="v"+t++;return r.push(e),arguments.length>0&&(n.push(e,"="),n.push.apply(n,Pt(arguments)),n.push(";")),e},toString:function(){return Gt([r.length>0?"var "+r.join(",")+";":"",Gt(n)])}})}function i(){var t=o(),n=o(),r=t.toString,i=n.toString;function a(e,r){n(e,r,"=",t.def(e,r),";")}return e((function(){t.apply(t,Pt(arguments))}),{def:t.def,entry:t,exit:n,save:a,set:function(e,n,r){a(e,n),t(e,n,"=",r,";")},toString:function(){return r()+i()}})}var a=o(),u={};return{global:a,link:function(e){for(var o=0;o<r.length;++o)if(r[o]===e)return n[o];var i="g"+t++;return n.push(i),r.push(e),i},block:o,proc:function(t,n){var r=[];function o(){var t="a"+r.length;return r.push(t),t}n=n||0;for(var a=0;a<n;++a)o();var s=i(),c=s.toString;return u[t]=e(s,{arg:o,toString:function(){return Gt(["function(",r.join(),"){",c(),"}"])}})},scope:i,cond:function(){var t=Gt(arguments),n=i(),r=i(),o=n.toString,a=r.toString;return e(n,{then:function(){return n.apply(n,Pt(arguments)),this},else:function(){return r.apply(r,Pt(arguments)),this},toString:function(){var e=a();return e&&(e="else{"+e+"}"),Gt(["if(",t,"){",o(),"}",e])}})},compile:function(){var t=['"use strict";',a,"return {"];Object.keys(u).forEach((function(e){t.push('"',e,'":',u[e].toString(),",")})),t.push("}");var e=Gt(t).replace(/;/g,";\\n").replace(/}/g,"}\\n").replace(/{/g,"{\\n");return Function.apply(null,n.concat(e)).apply(null,r)}}}(),r=t.link,o=t.global;t.id=N++,t.batchId="0";var i=r(R),a=t.shared={props:"a0"};Object.keys(R).forEach((function(t){a[t]=o.def(i,".",t)})),w.optional((function(){t.CHECK=r(w),t.commandStr=w.guessCommand(),t.command=r(t.commandStr),t.assert=function(t,e,n){t("if(!(",e,"))",this.CHECK,".commandRaise(",r(n),",",this.command,");")},M.invalidBlendCombinations=Jt}));var u=t.next={},s=t.current={};Object.keys(A).forEach((function(t){Array.isArray(x[t])&&(u[t]=o.def(a.next,".",t),s[t]=o.def(a.current,".",t))}));var c=t.constants={};Object.keys(M).forEach((function(t){c[t]=o.def(JSON.stringify(M[t]))})),t.invoke=function(e,n){switch(n.type){case 0:var o=["this",a.context,a.props,t.batchId];return e.def(r(n.data),".call(",o.slice(0,Math.max(n.data.length+1,4)),")");case 1:return e.def(a.props,n.data);case 2:return e.def(a.context,n.data);case 3:return e.def("this",n.data);case 4:return n.data.append(t,e),n.data.ref;case 5:return n.data.toString();case 6:return n.data.map((function(n){return t.invoke(e,n)}))}},t.attribCache={};var f={};return t.scopeAttrib=function(t){var e=n.id(t);if(e in f)return f[e];var o=l.scope[e];return o||(o=l.scope[e]=new y),f[e]=r(o)},t}function G(t,e,s,f,d){var p=t.static,v=t.dynamic;w.optional((function(){var t=[Ut,Bt,Ft,zt,Vt,Xt,Wt,Ht,Lt,qt].concat(S);function e(e){Object.keys(e).forEach((function(e){w.command(t.indexOf(e)>=0,'unknown parameter "'+e+'"',d.commandStr)}))}e(p),e(v)}));var m=function(t,e){var n=t.static;if("string"==typeof n[Ft]&&"string"==typeof n[Bt]){if(Object.keys(e.dynamic).length>0)return null;var r=e.static,o=Object.keys(r);if(o.length>0&&"number"==typeof r[o[0]]){for(var i=[],a=0;a<o.length;++a)w("number"==typeof r[o[a]],"must specify all vertex attribute locations when using vaos"),i.push([0|r[o[a]],o[a]]);return i}}return null}(t,e),_=function(t,e){var n=t.static,r=t.dynamic;if(Ut in n){var o=n[Ut];return o?(o=c.getFramebuffer(o),w.command(o,"invalid framebuffer object"),ue((function(t,e){var n=t.link(o),r=t.shared;e.set(r.framebuffer,".next",n);var i=r.context;return e.set(i,"."+Yt,n+".width"),e.set(i,"."+Kt,n+".height"),n}))):ue((function(t,e){var n=t.shared;e.set(n.framebuffer,".next","null");var r=n.context;return e.set(r,"."+Yt,r+".drawingBufferWidth"),e.set(r,"."+Kt,r+".drawingBufferHeight"),"null"}))}if(Ut in r){var i=r[Ut];return se(i,(function(t,e){var n=t.invoke(e,i),r=t.shared,o=r.framebuffer,a=e.def(o,".getFramebuffer(",n,")");w.optional((function(){t.assert(e,"!"+n+"||"+a,"invalid framebuffer object")})),e.set(o,".next",a);var u=r.context;return e.set(u,"."+Yt,a+"?"+a+".width:"+u+".drawingBufferWidth"),e.set(u,"."+Kt,a+"?"+a+".height:"+u+".drawingBufferHeight"),a}))}return null}(t),x=function(t,e,n){var r=t.static,o=t.dynamic;function i(t){if(t in r){var i=r[t];w.commandType(i,"object","invalid "+t,n.commandStr);var a,u,s=!0,c=0|i.x,f=0|i.y;return"width"in i?(a=0|i.width,w.command(a>=0,"invalid "+t,n.commandStr)):s=!1,"height"in i?(u=0|i.height,w.command(u>=0,"invalid "+t,n.commandStr)):s=!1,new ie(!s&&e&&e.thisDep,!s&&e&&e.contextDep,!s&&e&&e.propDep,(function(t,e){var n=t.shared.context,r=a;"width"in i||(r=e.def(n,".",Yt,"-",c));var o=u;return"height"in i||(o=e.def(n,".",Kt,"-",f)),[c,f,r,o]}))}if(t in o){var l=o[t],h=se(l,(function(e,n){var r=e.invoke(n,l);w.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}));var o=e.shared.context,i=n.def(r,".x|0"),a=n.def(r,".y|0"),u=n.def('"width" in ',r,"?",r,".width|0:","(",o,".",Yt,"-",i,")"),s=n.def('"height" in ',r,"?",r,".height|0:","(",o,".",Kt,"-",a,")");return w.optional((function(){e.assert(n,u+">=0&&"+s+">=0","invalid "+t)})),[i,a,u,s]}));return e&&(h.thisDep=h.thisDep||e.thisDep,h.contextDep=h.contextDep||e.contextDep,h.propDep=h.propDep||e.propDep),h}return e?new ie(e.thisDep,e.contextDep,e.propDep,(function(t,e){var n=t.shared.context;return[0,0,e.def(n,".",Yt),e.def(n,".",Kt)]})):null}var a=i("viewport");if(a){var u=a;a=new ie(a.thisDep,a.contextDep,a.propDep,(function(t,e){var n=u.append(t,e),r=t.shared.context;return e.set(r,".viewportWidth",n[2]),e.set(r,".viewportHeight",n[3]),n}))}return{viewport:a,scissor_box:i("scissor.box")}}(t,_,d),E=function(t,e){var n=t.static,r=t.dynamic,o=function(){if(zt in n){var t=n[zt];re(t)?t=u.getElements(u.create(t,!0)):t&&(t=u.getElements(t),w.command(t,"invalid elements",e.commandStr));var o=ue((function(e,n){if(t){var r=e.link(t);return e.ELEMENTS=r,r}return e.ELEMENTS=null,null}));return o.value=t,o}if(zt in r){var i=r[zt];return se(i,(function(t,e){var n=t.shared,r=n.isBufferArgs,o=n.elements,a=t.invoke(e,i),u=e.def("null"),s=e.def(r,"(",a,")"),c=t.cond(s).then(u,"=",o,".createStream(",a,");").else(u,"=",o,".getElements(",a,");");return w.optional((function(){t.assert(c.else,"!"+a+"||"+u,"invalid elements")})),e.entry(c),e.exit(t.cond(s).then(o,".destroyStream(",u,");")),t.ELEMENTS=u,u}))}return null}();function i(t,i){if(t in n){var a=0|n[t];return w.command(!i||a>=0,"invalid "+t,e.commandStr),ue((function(t,e){return i&&(t.OFFSET=a),a}))}if(t in r){var u=r[t];return se(u,(function(e,n){var r=e.invoke(n,u);return i&&(e.OFFSET=r,w.optional((function(){e.assert(n,r+">=0","invalid "+t)}))),r}))}return i&&o?ue((function(t,e){return t.OFFSET="0",0})):null}var a=i(Xt,!0);return{elements:o,primitive:function(){if(Vt in n){var t=n[Vt];return w.commandParameter(t,Z,"invalid primitve",e.commandStr),ue((function(e,n){return Z[t]}))}if(Vt in r){var i=r[Vt];return se(i,(function(t,e){var n=t.constants.primTypes,r=t.invoke(e,i);return w.optional((function(){t.assert(e,r+" in "+n,"invalid primitive, must be one of "+Object.keys(Z))})),e.def(n,"[",r,"]")}))}return o?ae(o)?o.value?ue((function(t,e){return e.def(t.ELEMENTS,".primType")})):ue((function(){return 4})):new ie(o.thisDep,o.contextDep,o.propDep,(function(t,e){var n=t.ELEMENTS;return e.def(n,"?",n,".primType:",4)})):null}(),count:function(){if(Wt in n){var t=0|n[Wt];return w.command("number"==typeof t&&t>=0,"invalid vertex count",e.commandStr),ue((function(){return t}))}if(Wt in r){var i=r[Wt];return se(i,(function(t,e){var n=t.invoke(e,i);return w.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")})),n}))}if(o){if(ae(o)){if(o)return a?new ie(a.thisDep,a.contextDep,a.propDep,(function(t,e){var n=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return w.optional((function(){t.assert(e,n+">=0","invalid vertex offset/element buffer too small")})),n})):ue((function(t,e){return e.def(t.ELEMENTS,".vertCount")}));var u=ue((function(){return-1}));return w.optional((function(){u.MISSING=!0})),u}var s=new ie(o.thisDep||a.thisDep,o.contextDep||a.contextDep,o.propDep||a.propDep,(function(t,e){var n=t.ELEMENTS;return t.OFFSET?e.def(n,"?",n,".vertCount-",t.OFFSET,":-1"):e.def(n,"?",n,".vertCount:-1")}));return w.optional((function(){s.DYNAMIC=!0})),s}return null}(),instances:i(Ht,!1),offset:a}}(t,d),T=function(t,e){var n=t.static,r=t.dynamic,i={};return S.forEach((function(t){var u=k(t);function s(e,o){if(t in n){var a=e(n[t]);i[u]=ue((function(){return a}))}else if(t in r){var s=r[t];i[u]=se(s,(function(t,e){return o(t,e,t.invoke(e,s))}))}}switch(t){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return s((function(n){return w.commandType(n,"boolean",t,e.commandStr),n}),(function(e,n,r){return w.optional((function(){e.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+t,e.commandStr)})),r}));case"depth.func":return s((function(n){return w.commandParameter(n,$t,"invalid "+t,e.commandStr),$t[n]}),(function(e,n,r){var o=e.constants.compareFuncs;return w.optional((function(){e.assert(n,r+" in "+o,"invalid "+t+", must be one of "+Object.keys($t))})),n.def(o,"[",r,"]")}));case"depth.range":return s((function(t){return w.command(tt(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]&&t[0]<=t[1],"depth range is 2d array",e.commandStr),t}),(function(t,e,n){return w.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")})),[e.def("+",n,"[0]"),e.def("+",n,"[1]")]}));case"blend.func":return s((function(t){w.commandType(t,"object","blend.func",e.commandStr);var n="srcRGB"in t?t.srcRGB:t.src,r="srcAlpha"in t?t.srcAlpha:t.src,o="dstRGB"in t?t.dstRGB:t.dst,i="dstAlpha"in t?t.dstAlpha:t.dst;return w.commandParameter(n,Qt,u+".srcRGB",e.commandStr),w.commandParameter(r,Qt,u+".srcAlpha",e.commandStr),w.commandParameter(o,Qt,u+".dstRGB",e.commandStr),w.commandParameter(i,Qt,u+".dstAlpha",e.commandStr),w.command(-1===Jt.indexOf(n+", "+o),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+o+")",e.commandStr),[Qt[n],Qt[o],Qt[r],Qt[i]]}),(function(e,n,r){var o=e.constants.blendFuncs;function i(i,a){var u=n.def('"',i,a,'" in ',r,"?",r,".",i,a,":",r,".",i);return w.optional((function(){e.assert(n,u+" in "+o,"invalid "+t+"."+i+a+", must be one of "+Object.keys(Qt))})),u}w.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")}));var a=i("src","RGB"),u=i("dst","RGB");w.optional((function(){var t=e.constants.invalidBlendCombinations;e.assert(n,t+".indexOf("+a+'+", "+'+u+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}));var s=n.def(o,"[",a,"]"),c=n.def(o,"[",i("src","Alpha"),"]");return[s,n.def(o,"[",u,"]"),c,n.def(o,"[",i("dst","Alpha"),"]")]}));case"blend.equation":return s((function(n){return"string"==typeof n?(w.commandParameter(n,g,"invalid "+t,e.commandStr),[g[n],g[n]]):"object"===a(n)?(w.commandParameter(n.rgb,g,t+".rgb",e.commandStr),w.commandParameter(n.alpha,g,t+".alpha",e.commandStr),[g[n.rgb],g[n.alpha]]):void w.commandRaise("invalid blend.equation",e.commandStr)}),(function(e,n,r){var o=e.constants.blendEquations,i=n.def(),a=n.def(),u=e.cond("typeof ",r,'==="string"');return w.optional((function(){function n(t,n,r){e.assert(t,r+" in "+o,"invalid "+n+", must be one of "+Object.keys(g))}n(u.then,t,r),e.assert(u.else,r+"&&typeof "+r+'==="object"',"invalid "+t),n(u.else,t+".rgb",r+".rgb"),n(u.else,t+".alpha",r+".alpha")})),u.then(i,"=",a,"=",o,"[",r,"];"),u.else(i,"=",o,"[",r,".rgb];",a,"=",o,"[",r,".alpha];"),n(u),[i,a]}));case"blend.color":return s((function(t){return w.command(tt(t)&&4===t.length,"blend.color must be a 4d array",e.commandStr),C(4,(function(e){return+t[e]}))}),(function(t,e,n){return w.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")})),C(4,(function(t){return e.def("+",n,"[",t,"]")}))}));case"stencil.mask":return s((function(t){return w.commandType(t,"number",u,e.commandStr),0|t}),(function(t,e,n){return w.optional((function(){t.assert(e,"typeof "+n+'==="number"',"invalid stencil.mask")})),e.def(n,"|0")}));case"stencil.func":return s((function(n){w.commandType(n,"object",u,e.commandStr);var r=n.cmp||"keep",o=n.ref||0,i="mask"in n?n.mask:-1;return w.commandParameter(r,$t,t+".cmp",e.commandStr),w.commandType(o,"number",t+".ref",e.commandStr),w.commandType(i,"number",t+".mask",e.commandStr),[$t[r],o,i]}),(function(t,e,n){var r=t.constants.compareFuncs;return w.optional((function(){function o(){t.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}o(n+"&&typeof ",n,'==="object"'),o('!("cmp" in ',n,")||(",n,".cmp in ",r,")")})),[e.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",7680),e.def(n,".ref|0"),e.def('"mask" in ',n,"?",n,".mask|0:-1")]}));case"stencil.opFront":case"stencil.opBack":return s((function(n){w.commandType(n,"object",u,e.commandStr);var r=n.fail||"keep",o=n.zfail||"keep",i=n.zpass||"keep";return w.commandParameter(r,te,t+".fail",e.commandStr),w.commandParameter(o,te,t+".zfail",e.commandStr),w.commandParameter(i,te,t+".zpass",e.commandStr),["stencil.opBack"===t?1029:1028,te[r],te[o],te[i]]}),(function(e,n,r){var o=e.constants.stencilOps;function i(i){return w.optional((function(){e.assert(n,'!("'+i+'" in '+r+")||("+r+"."+i+" in "+o+")","invalid "+t+"."+i+", must be one of "+Object.keys(te))})),n.def('"',i,'" in ',r,"?",o,"[",r,".",i,"]:",7680)}return w.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)})),["stencil.opBack"===t?1029:1028,i("fail"),i("zfail"),i("zpass")]}));case"polygonOffset.offset":return s((function(t){w.commandType(t,"object",u,e.commandStr);var n=0|t.factor,r=0|t.units;return w.commandType(n,"number",u+".factor",e.commandStr),w.commandType(r,"number",u+".units",e.commandStr),[n,r]}),(function(e,n,r){return w.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)})),[n.def(r,".factor|0"),n.def(r,".units|0")]}));case"cull.face":return s((function(t){var n=0;return"front"===t?n=1028:"back"===t&&(n=1029),w.command(!!n,u,e.commandStr),n}),(function(t,e,n){return w.optional((function(){t.assert(e,n+'==="front"||'+n+'==="back"',"invalid cull.face")})),e.def(n,'==="front"?',1028,":",1029)}));case"lineWidth":return s((function(t){return w.command("number"==typeof t&&t>=o.lineWidthDims[0]&&t<=o.lineWidthDims[1],"invalid line width, must be a positive number between "+o.lineWidthDims[0]+" and "+o.lineWidthDims[1],e.commandStr),t}),(function(t,e,n){return w.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">="+o.lineWidthDims[0]+"&&"+n+"<="+o.lineWidthDims[1],"invalid line width")})),n}));case"frontFace":return s((function(t){return w.commandParameter(t,ne,u,e.commandStr),ne[t]}),(function(t,e,n){return w.optional((function(){t.assert(e,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")})),e.def(n+'==="cw"?2304:2305')}));case"colorMask":return s((function(t){return w.command(tt(t)&&4===t.length,"color.mask must be length 4 array",e.commandStr),t.map((function(t){return!!t}))}),(function(t,e,n){return w.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")})),C(4,(function(t){return"!!"+n+"["+t+"]"}))}));case"sample.coverage":return s((function(t){w.command("object"===a(t)&&t,u,e.commandStr);var n="value"in t?t.value:1,r=!!t.invert;return w.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",e.commandStr),[n,r]}),(function(t,e,n){return w.optional((function(){t.assert(e,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")})),[e.def('"value" in ',n,"?+",n,".value:1"),e.def("!!",n,".invert")]}))}})),i}(t,d),A=function(t,e,r){var o=t.static,i=t.dynamic;function a(t){if(t in o){var e=n.id(o[t]);w.optional((function(){h.shader(ee[t],e,w.guessCommand())}));var r=ue((function(){return e}));return r.id=e,r}if(t in i){var a=i[t];return se(a,(function(e,n){var r=e.invoke(n,a),o=n.def(e.shared.strings,".id(",r,")");return w.optional((function(){n(e.shared.shader,".shader(",ee[t],",",o,",",e.command,");")})),o}))}return null}var u,s=a(Ft),c=a(Bt),f=null;return ae(s)&&ae(c)?(f=h.program(c.id,s.id,null,r),u=ue((function(t,e){return t.link(f)}))):u=new ie(s&&s.thisDep||c&&c.thisDep,s&&s.contextDep||c&&c.contextDep,s&&s.propDep||c&&c.propDep,(function(t,e){var n,r=t.shared.shader;n=s?s.append(t,e):e.def(r,".",Ft);var o=r+".program("+(c?c.append(t,e):e.def(r,".",Bt))+","+n;return w.optional((function(){o+=","+t.command})),e.def(o+")")})),{frag:s,vert:c,progVar:u,program:f}}(t,0,m);function I(t){var e=x[t];e&&(T[t]=e)}I("viewport"),I(k("scissor.box"));var O=Object.keys(T).length>0,D={framebuffer:_,draw:E,shader:A,state:T,dirty:O,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(D.profile=function(t){var e,n=t.static,r=t.dynamic;if(Lt in n){var o=!!n[Lt];(e=ue((function(t,e){return o}))).enable=o}else if(Lt in r){var i=r[Lt];e=se(i,(function(t,e){return t.invoke(e,i)}))}return e}(t),D.uniforms=function(t,e){var n=t.static,r=t.dynamic,o={};return Object.keys(n).forEach((function(t){var r,i=n[t];if("number"==typeof i||"boolean"==typeof i)r=ue((function(){return i}));else if("function"==typeof i){var a=i._reglType;"texture2d"===a||"textureCube"===a?r=ue((function(t){return t.link(i)})):"framebuffer"===a||"framebufferCube"===a?(w.command(i.color.length>0,'missing color attachment for framebuffer sent to uniform "'+t+'"',e.commandStr),r=ue((function(t){return t.link(i.color[0])}))):w.commandRaise('invalid data for uniform "'+t+'"',e.commandStr)}else tt(i)?r=ue((function(e){return e.global.def("[",C(i.length,(function(n){return w.command("number"==typeof i[n]||"boolean"==typeof i[n],"invalid uniform "+t,e.commandStr),i[n]})),"]")})):w.commandRaise('invalid or missing data for uniform "'+t+'"',e.commandStr);r.value=i,o[t]=r})),Object.keys(r).forEach((function(t){var e=r[t];o[t]=se(e,(function(t,n){return t.invoke(n,e)}))})),o}(s,d),D.drawVAO=D.scopeVAO=function(t,e){var n=t.static,r=t.dynamic;if(qt in n){var o=n[qt];return null!==o&&null===l.getVAO(o)&&(o=l.createVAO(o)),ue((function(t){return t.link(l.getVAO(o))}))}if(qt in r){var i=r[qt];return se(i,(function(t,e){var n=t.invoke(e,i);return e.def(t.shared.vao+".getVAO("+n+")")}))}return null}(t),!D.drawVAO&&A.program&&!m&&r.angle_instanced_arrays){var R=!0,M=A.program.attributes.map((function(t){var n=e.static[t];return R=R&&!!n,n}));if(R&&M.length>0){var N=l.getVAO(l.createVAO(M));D.drawVAO=new ie(null,null,null,(function(t,e){return t.link(N)})),D.useVAO=!0}}return m?D.useVAO=!0:D.attributes=function(t,e){var r=t.static,o=t.dynamic,u={};return Object.keys(r).forEach((function(t){var o=r[t],s=n.id(t),c=new y;if(re(o))c.state=1,c.buffer=i.getBuffer(i.create(o,34962,!1,!0)),c.type=0;else{var f=i.getBuffer(o);if(f)c.state=1,c.buffer=f,c.type=0;else if(w.command("object"===a(o)&&o,"invalid data for attribute "+t,e.commandStr),"constant"in o){var l=o.constant;c.buffer="null",c.state=2,"number"==typeof l?c.x=l:(w.command(tt(l)&&l.length>0&&l.length<=4,"invalid constant for attribute "+t,e.commandStr),jt.forEach((function(t,e){e<l.length&&(c[t]=l[e])})))}else{f=re(o.buffer)?i.getBuffer(i.create(o.buffer,34962,!1,!0)):i.getBuffer(o.buffer),w.command(!!f,'missing buffer for attribute "'+t+'"',e.commandStr);var h=0|o.offset;w.command(h>=0,'invalid offset for attribute "'+t+'"',e.commandStr);var d=0|o.stride;w.command(d>=0&&d<256,'invalid stride for attribute "'+t+'", must be integer betweeen [0, 255]',e.commandStr);var p=0|o.size;w.command(!("size"in o)||p>0&&p<=4,'invalid size for attribute "'+t+'", must be 1,2,3,4',e.commandStr);var v=!!o.normalized,m=0;"type"in o&&(w.commandParameter(o.type,z,"invalid type for attribute "+t,e.commandStr),m=z[o.type]);var g=0|o.divisor;"divisor"in o&&(w.command(0===g||b,'cannot specify divisor for attribute "'+t+'", instancing not supported',e.commandStr),w.command(g>=0,'invalid divisor for attribute "'+t+'"',e.commandStr)),w.optional((function(){var n=e.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(o).forEach((function(e){w.command(r.indexOf(e)>=0,'unknown parameter "'+e+'" for attribute pointer "'+t+'" (valid parameters are '+r+")",n)}))})),c.buffer=f,c.state=1,c.size=p,c.normalized=v,c.type=m||f.dtype,c.offset=h,c.stride=d,c.divisor=g}}u[t]=ue((function(t,e){var n=t.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(c).forEach((function(t){r[t]=c[t]})),c.buffer&&(r.buffer=t.link(c.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r}))})),Object.keys(o).forEach((function(t){var e=o[t];u[t]=se(e,(function(n,r){var o=n.invoke(r,e),i=n.shared,a=n.constants,u=i.isBufferArgs,s=i.buffer;w.optional((function(){n.assert(r,o+"&&(typeof "+o+'==="object"||typeof '+o+'==="function")&&('+u+"("+o+")||"+s+".getBuffer("+o+")||"+s+".getBuffer("+o+".buffer)||"+u+"("+o+'.buffer)||("constant" in '+o+"&&(typeof "+o+'.constant==="number"||'+i.isArrayLike+"("+o+".constant))))",'invalid dynamic attribute "'+t+'"')}));var c={isStream:r.def(!1)},f=new y;f.state=1,Object.keys(f).forEach((function(t){c[t]=r.def(""+f[t])}));var l=c.buffer,h=c.type;function d(t){r(c[t],"=",o,".",t,"|0;")}return r("if(",u,"(",o,")){",c.isStream,"=true;",l,"=",s,".createStream(",34962,",",o,");",h,"=",l,".dtype;","}else{",l,"=",s,".getBuffer(",o,");","if(",l,"){",h,"=",l,".dtype;",'}else if("constant" in ',o,"){",c.state,"=",2,";","if(typeof "+o+'.constant === "number"){',c[jt[0]],"=",o,".constant;",jt.slice(1).map((function(t){return c[t]})).join("="),"=0;","}else{",jt.map((function(t,e){return c[t]+"="+o+".constant.length>"+e+"?"+o+".constant["+e+"]:0;"})).join(""),"}}else{","if(",u,"(",o,".buffer)){",l,"=",s,".createStream(",34962,",",o,".buffer);","}else{",l,"=",s,".getBuffer(",o,".buffer);","}",h,'="type" in ',o,"?",a.glTypes,"[",o,".type]:",l,".dtype;",c.normalized,"=!!",o,".normalized;"),d("size"),d("offset"),d("stride"),d("divisor"),r("}}"),r.exit("if(",c.isStream,"){",s,".destroyStream(",l,");","}"),c}))})),u}(e,d),D.context=function(t){var e=t.static,n=t.dynamic,r={};return Object.keys(e).forEach((function(t){var n=e[t];r[t]=ue((function(t,e){return"number"==typeof n||"boolean"==typeof n?""+n:t.link(n)}))})),Object.keys(n).forEach((function(t){var e=n[t];r[t]=se(e,(function(t,n){return t.invoke(n,e)}))})),r}(f),D}function j(t,e,n){var r=t.shared.context,o=t.scope();Object.keys(n).forEach((function(i){e.save(r,"."+i);var a=n[i].append(t,e);Array.isArray(a)?o(r,".",i,"=[",a.join(),"];"):o(r,".",i,"=",a,";")})),e(o)}function L(t,e,n,r){var o,i=t.shared,a=i.gl,u=i.framebuffer;_&&(o=e.def(i.extensions,".webgl_draw_buffers"));var s,c=t.constants,f=c.drawBuffer,l=c.backBuffer;s=n?n.append(t,e):e.def(u,".next"),r||e("if(",s,"!==",u,".cur){"),e("if(",s,"){",a,".bindFramebuffer(",36160,",",s,".framebuffer);"),_&&e(o,".drawBuffersWEBGL(",f,"[",s,".colorAttachments.length]);"),e("}else{",a,".bindFramebuffer(",36160,",null);"),_&&e(o,".drawBuffersWEBGL(",l,");"),e("}",u,".cur=",s,";"),r||e("}")}function U(t,e,n){var r=t.shared,o=r.gl,i=t.current,a=t.next,u=r.current,s=r.next,c=t.cond(u,".dirty");S.forEach((function(e){var r,f,l=k(e);if(!(l in n.state))if(l in a){r=a[l],f=i[l];var h=C(x[l].length,(function(t){return c.def(r,"[",t,"]")}));c(t.cond(h.map((function(t,e){return t+"!=="+f+"["+e+"]"})).join("||")).then(o,".",A[l],"(",h,");",h.map((function(t,e){return f+"["+e+"]="+t})).join(";"),";"))}else{r=c.def(s,".",l);var d=t.cond(r,"!==",u,".",l);c(d),l in T?d(t.cond(r).then(o,".enable(",T[l],");").else(o,".disable(",T[l],");"),u,".",l,"=",r,";"):d(o,".",A[l],"(",r,");",u,".",l,"=",r,";")}})),0===Object.keys(n.state).length&&c(u,".dirty=false;"),e(c)}function B(t,e,n,r){var o=t.shared,i=t.current,a=o.current,u=o.gl;oe(Object.keys(n)).forEach((function(o){var s=n[o];if(!r||r(s)){var c=s.append(t,e);if(T[o]){var f=T[o];ae(s)?e(u,c?".enable(":".disable(",f,");"):e(t.cond(c).then(u,".enable(",f,");").else(u,".disable(",f,");")),e(a,".",o,"=",c,";")}else if(tt(c)){var l=i[o];e(u,".",A[o],"(",c,");",c.map((function(t,e){return l+"["+e+"]="+t})).join(";"),";")}else e(u,".",A[o],"(",c,");",a,".",o,"=",c,";")}}))}function F(t,e){b&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function V(t,e,n,r,o){var i,a,u,s=t.shared,c=t.stats,f=s.current,l=s.timer,h=n.profile;function d(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function p(t){t(i=e.def(),"=",d(),";"),"string"==typeof o?t(c,".count+=",o,";"):t(c,".count++;"),v&&(r?t(a=e.def(),"=",l,".getNumPendingQueries();"):t(l,".beginQuery(",c,");"))}function m(t){t(c,".cpuTime+=",d(),"-",i,";"),v&&(r?t(l,".pushScopeStats(",a,",",l,".getNumPendingQueries(),",c,");"):t(l,".endQuery();"))}function y(t){var n=e.def(f,".profile");e(f,".profile=",t,";"),e.exit(f,".profile=",n,";")}if(h){if(ae(h))return void(h.enable?(p(e),m(e.exit),y("true")):y("false"));y(u=h.append(t,e))}else u=e.def(f,".profile");var g=t.block();p(g),e("if(",u,"){",g,"}");var b=t.block();m(b),e.exit("if(",u,"){",b,"}")}function W(t,e,n,r,o){var i=t.shared;r.forEach((function(r){var a,u=r.name,s=n.attributes[u];if(s){if(!o(s))return;a=s.append(t,e)}else{if(!o(ce))return;var c=t.scopeAttrib(u);w.optional((function(){t.assert(e,c+".state","missing attribute "+u)})),a={},Object.keys(new y).forEach((function(t){a[t]=e.def(c,".",t)}))}!function(n,r,o){var a=i.gl,u=e.def(n,".location"),s=e.def(i.attributes,"[",u,"]"),c=o.state,f=o.buffer,l=[o.x,o.y,o.z,o.w],h=["buffer","normalized","offset","stride"];function d(){e("if(!",s,".buffer){",a,".enableVertexAttribArray(",u,");}");var n,i=o.type;if(n=o.size?e.def(o.size,"||",r):r,e("if(",s,".type!==",i,"||",s,".size!==",n,"||",h.map((function(t){return s+"."+t+"!=="+o[t]})).join("||"),"){",a,".bindBuffer(",34962,",",f,".buffer);",a,".vertexAttribPointer(",[u,n,i,o.normalized,o.stride,o.offset],");",s,".type=",i,";",s,".size=",n,";",h.map((function(t){return s+"."+t+"="+o[t]+";"})).join(""),"}"),b){var c=o.divisor;e("if(",s,".divisor!==",c,"){",t.instancing,".vertexAttribDivisorANGLE(",[u,c],");",s,".divisor=",c,";}")}}function p(){e("if(",s,".buffer){",a,".disableVertexAttribArray(",u,");",s,".buffer=null;","}if(",jt.map((function(t,e){return s+"."+t+"!=="+l[e]})).join("||"),"){",a,".vertexAttrib4f(",u,",",l,");",jt.map((function(t,e){return s+"."+t+"="+l[e]+";"})).join(""),"}")}1===c?d():2===c?p():(e("if(",c,"===",1,"){"),d(),e("}else{"),p(),e("}"))}(t.link(r),function(t){switch(t){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(r.info.type),a)}))}function X(t,e,r,o,i){for(var a,u=t.shared,s=u.gl,c=0;c<o.length;++c){var f,l=o[c],h=l.name,d=l.info.type,p=r.uniforms[h],v=t.link(l)+".location";if(p){if(!i(p))continue;if(ae(p)){var m=p.value;if(w.command(null!=m,'missing uniform "'+h+'"',t.commandStr),35678===d||35680===d){w.command("function"==typeof m&&(35678===d&&("texture2d"===m._reglType||"framebuffer"===m._reglType)||35680===d&&("textureCube"===m._reglType||"framebufferCube"===m._reglType)),"invalid texture for uniform "+h,t.commandStr);var y=t.link(m._texture||m.color[0]._texture);e(s,".uniform1i(",v,",",y+".bind());"),e.exit(y,".unbind();")}else if(35674===d||35675===d||35676===d){w.optional((function(){w.command(tt(m),"invalid matrix for uniform "+h,t.commandStr),w.command(35674===d&&4===m.length||35675===d&&9===m.length||35676===d&&16===m.length,"invalid length for matrix uniform "+h,t.commandStr)}));var g=t.global.def("new Float32Array(["+Array.prototype.slice.call(m)+"])"),b=2;35675===d?b=3:35676===d&&(b=4),e(s,".uniformMatrix",b,"fv(",v,",false,",g,");")}else{switch(d){case 5126:w.commandType(m,"number","uniform "+h,t.commandStr),a="1f";break;case 35664:w.command(tt(m)&&2===m.length,"uniform "+h,t.commandStr),a="2f";break;case 35665:w.command(tt(m)&&3===m.length,"uniform "+h,t.commandStr),a="3f";break;case 35666:w.command(tt(m)&&4===m.length,"uniform "+h,t.commandStr),a="4f";break;case 35670:w.commandType(m,"boolean","uniform "+h,t.commandStr),a="1i";break;case 5124:w.commandType(m,"number","uniform "+h,t.commandStr),a="1i";break;case 35671:case 35667:w.command(tt(m)&&2===m.length,"uniform "+h,t.commandStr),a="2i";break;case 35672:case 35668:w.command(tt(m)&&3===m.length,"uniform "+h,t.commandStr),a="3i";break;case 35673:case 35669:w.command(tt(m)&&4===m.length,"uniform "+h,t.commandStr),a="4i"}e(s,".uniform",a,"(",v,",",tt(m)?Array.prototype.slice.call(m):m,");")}continue}f=p.append(t,e)}else{if(!i(ce))continue;f=e.def(u.uniforms,"[",n.id(h),"]")}35678===d?(w(!Array.isArray(f),"must specify a scalar prop for textures"),e("if(",f,"&&",f,'._reglType==="framebuffer"){',f,"=",f,".color[0];","}")):35680===d&&(w(!Array.isArray(f),"must specify a scalar prop for cube maps"),e("if(",f,"&&",f,'._reglType==="framebufferCube"){',f,"=",f,".color[0];","}")),w.optional((function(){function n(n,r){t.assert(e,n,'bad data or missing for uniform "'+h+'".  '+r)}function r(t){w(!Array.isArray(f),"must not specify an array type for uniform"),n("typeof "+f+'==="'+t+'"',"invalid type, expected "+t)}function o(e,r){Array.isArray(f)?w(f.length===e,"must have length "+e):n(u.isArrayLike+"("+f+")&&"+f+".length==="+e,"invalid vector, should have length "+e,t.commandStr)}function i(e){w(!Array.isArray(f),"must not specify a value type"),n("typeof "+f+'==="function"&&'+f+'._reglType==="texture'+(3553===e?"2d":"Cube")+'"',"invalid texture type",t.commandStr)}switch(d){case 5124:r("number");break;case 35667:o(2);break;case 35668:o(3);break;case 35669:o(4);break;case 5126:r("number");break;case 35664:o(2);break;case 35665:o(3);break;case 35666:o(4);break;case 35670:r("boolean");break;case 35671:o(2);break;case 35672:o(3);break;case 35673:case 35674:o(4);break;case 35675:o(9);break;case 35676:o(16);break;case 35678:i(3553);break;case 35680:i(34067)}}));var _=1;switch(d){case 35678:case 35680:var x=e.def(f,"._texture");e(s,".uniform1i(",v,",",x,".bind());"),e.exit(x,".unbind();");continue;case 5124:case 35670:a="1i";break;case 35667:case 35671:a="2i",_=2;break;case 35668:case 35672:a="3i",_=3;break;case 35669:case 35673:a="4i",_=4;break;case 5126:a="1f";break;case 35664:a="2f",_=2;break;case 35665:a="3f",_=3;break;case 35666:a="4f",_=4;break;case 35674:a="Matrix2fv";break;case 35675:a="Matrix3fv";break;case 35676:a="Matrix4fv"}if(e(s,".uniform",a,"(",v,","),"M"===a.charAt(0)){var E=Math.pow(d-35674+2,2),S=t.global.def("new Float32Array(",E,")");Array.isArray(f)?e("false,(",C(E,(function(t){return S+"["+t+"]="+f[t]})),",",S,")"):e("false,(Array.isArray(",f,")||",f," instanceof Float32Array)?",f,":(",C(E,(function(t){return S+"["+t+"]="+f+"["+t+"]"})),",",S,")")}else _>1?e(C(_,(function(t){return Array.isArray(f)?f[t]:f+"["+t+"]"}))):(w(!Array.isArray(f),"uniform value must not be an array"),e(f));e(");")}}function H(t,e,n,r){var o=t.shared,i=o.gl,a=o.draw,u=r.draw,s=function(){var o,s=u.elements,c=e;return s?((s.contextDep&&r.contextDynamic||s.propDep)&&(c=n),o=s.append(t,c)):o=c.def(a,".",zt),o&&c("if("+o+")"+i+".bindBuffer(34963,"+o+".buffer.buffer);"),o}();function c(o){var i=u[o];return i?i.contextDep&&r.contextDynamic||i.propDep?i.append(t,n):i.append(t,e):e.def(a,".",o)}var f,l,h=c(Vt),d=c(Xt),p=function(){var o,i=u.count,s=e;return i?((i.contextDep&&r.contextDynamic||i.propDep)&&(s=n),o=i.append(t,s),w.optional((function(){i.MISSING&&t.assert(e,"false","missing vertex count"),i.DYNAMIC&&t.assert(s,o+">=0","missing vertex count")}))):(o=s.def(a,".",Wt),w.optional((function(){t.assert(s,o+">=0","missing vertex count")}))),o}();if("number"==typeof p){if(0===p)return}else n("if(",p,"){"),n.exit("}");b&&(f=c(Ht),l=t.instancing);var v=s+".type",m=u.elements&&ae(u.elements);function y(){function t(){n(l,".drawElementsInstancedANGLE(",[h,p,v,d+"<<(("+v+"-5121)>>1)",f],");")}function e(){n(l,".drawArraysInstancedANGLE(",[h,d,p,f],");")}s?m?t():(n("if(",s,"){"),t(),n("}else{"),e(),n("}")):e()}function g(){function t(){n(i+".drawElements("+[h,p,v,d+"<<(("+v+"-5121)>>1)"]+");")}function e(){n(i+".drawArrays("+[h,d,p]+");")}s?m?t():(n("if(",s,"){"),t(),n("}else{"),e(),n("}")):e()}b&&("number"!=typeof f||f>=0)?"string"==typeof f?(n("if(",f,">0){"),y(),n("}else if(",f,"<0){"),g(),n("}")):y():g()}function q(t,e,n,r,o){var i=P(),a=i.proc("body",o);return w.optional((function(){i.commandStr=e.commandStr,i.command=i.link(e.commandStr)})),b&&(i.instancing=a.def(i.shared.extensions,".angle_instanced_arrays")),t(i,a,n,r),i.compile().body}function Y(t,e,n,r){F(t,e),n.useVAO?n.drawVAO?e(t.shared.vao,".setVAO(",n.drawVAO.append(t,e),");"):e(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(e(t.shared.vao,".setVAO(null);"),W(t,e,n,r.attributes,(function(){return!0}))),X(t,e,n,r.uniforms,(function(){return!0})),H(t,e,e,n)}function K(t,e,n,r){function o(){return!0}t.batchId="a1",F(t,e),W(t,e,n,r.attributes,o),X(t,e,n,r.uniforms,o),H(t,e,e,n)}function Q(t,e,n,r){F(t,e);var o=n.contextDep,i=e.def(),a=e.def();t.shared.props=a,t.batchId=i;var u=t.scope(),s=t.scope();function c(t){return t.contextDep&&o||t.propDep}function f(t){return!c(t)}if(e(u.entry,"for(",i,"=0;",i,"<","a1",";++",i,"){",a,"=","a0","[",i,"];",s,"}",u.exit),n.needsContext&&j(t,s,n.context),n.needsFramebuffer&&L(t,s,n.framebuffer),B(t,s,n.state,c),n.profile&&c(n.profile)&&V(t,s,n,!1,!0),r)n.useVAO?n.drawVAO?c(n.drawVAO)?s(t.shared.vao,".setVAO(",n.drawVAO.append(t,s),");"):u(t.shared.vao,".setVAO(",n.drawVAO.append(t,u),");"):u(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(u(t.shared.vao,".setVAO(null);"),W(t,u,n,r.attributes,f),W(t,s,n,r.attributes,c)),X(t,u,n,r.uniforms,f),X(t,s,n,r.uniforms,c),H(t,u,s,n);else{var l=t.global.def("{}"),h=n.shader.progVar.append(t,s),d=s.def(h,".id"),p=s.def(l,"[",d,"]");s(t.shared.gl,".useProgram(",h,".program);","if(!",p,"){",p,"=",l,"[",d,"]=",t.link((function(e){return q(K,t,n,e,2)})),"(",h,");}",p,".call(this,a0[",i,"],",i,");")}}function J(t,e,n){var r=e.static[n];if(r&&function(t){if("object"===a(t)&&!tt(t)){for(var e=Object.keys(t),n=0;n<e.length;++n)if(I.isDynamic(t[e[n]]))return!0;return!1}}(r)){var o=t.global,i=Object.keys(r),u=!1,s=!1,c=!1,f=t.global.def("{}");i.forEach((function(e){var n=r[e];if(I.isDynamic(n)){"function"==typeof n&&(n=r[e]=I.unbox(n));var i=se(n,null);u=u||i.thisDep,c=c||i.propDep,s=s||i.contextDep}else{switch(o(f,".",e,"="),a(n)){case"number":o(n);break;case"string":o('"',n,'"');break;case"object":Array.isArray(n)&&o("[",n.join(),"]");break;default:o(t.link(n))}o(";")}})),e.dynamic[n]=new I.DynamicVariable(4,{thisDep:u,contextDep:s,propDep:c,ref:f,append:function(t,e){i.forEach((function(n){var o=r[n];if(I.isDynamic(o)){var i=t.invoke(e,o);e(f,".",n,"=",i,";")}}))}}),delete e.static[n]}}return{next:E,current:x,procs:function(){var t=P(),e=t.proc("poll"),n=t.proc("refresh"),i=t.block();e(i),n(i);var a,u=t.shared,s=u.gl,c=u.next,f=u.current;i(f,".dirty=false;"),L(t,e),L(t,n,null,!0),b&&(a=t.link(b)),r.oes_vertex_array_object&&n(t.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var l=0;l<o.maxAttributes;++l){var h=n.def(u.attributes,"[",l,"]"),d=t.cond(h,".buffer");d.then(s,".enableVertexAttribArray(",l,");",s,".bindBuffer(",34962,",",h,".buffer.buffer);",s,".vertexAttribPointer(",l,",",h,".size,",h,".type,",h,".normalized,",h,".stride,",h,".offset);").else(s,".disableVertexAttribArray(",l,");",s,".vertexAttrib4f(",l,",",h,".x,",h,".y,",h,".z,",h,".w);",h,".buffer=null;"),n(d),b&&n(a,".vertexAttribDivisorANGLE(",l,",",h,".divisor);")}return n(t.shared.vao,".currentVAO=null;",t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"),Object.keys(T).forEach((function(r){var o=T[r],a=i.def(c,".",r),u=t.block();u("if(",a,"){",s,".enable(",o,")}else{",s,".disable(",o,")}",f,".",r,"=",a,";"),n(u),e("if(",a,"!==",f,".",r,"){",u,"}")})),Object.keys(A).forEach((function(r){var o,a,u=A[r],l=x[r],h=t.block();if(h(s,".",u,"("),tt(l)){var d=l.length;o=t.global.def(c,".",r),a=t.global.def(f,".",r),h(C(d,(function(t){return o+"["+t+"]"})),");",C(d,(function(t){return a+"["+t+"]="+o+"["+t+"];"})).join("")),e("if(",C(d,(function(t){return o+"["+t+"]!=="+a+"["+t+"]"})).join("||"),"){",h,"}")}else o=i.def(c,".",r),a=i.def(f,".",r),h(o,");",f,".",r,"=",o,";"),e("if(",o,"!==",a,"){",h,"}");n(h)})),t.compile()}(),compile:function(t,r,o,i,a){var u=P();u.stats=u.link(a),Object.keys(r.static).forEach((function(t){J(u,r,t)})),Zt.forEach((function(e){J(u,t,e)}));var s=G(t,r,o,i,u);return function(t,e){var n=t.proc("draw",1);F(t,n),j(t,n,e.context),L(t,n,e.framebuffer),U(t,n,e),B(t,n,e.state),V(t,n,e,!1,!0);var r=e.shader.progVar.append(t,n);if(n(t.shared.gl,".useProgram(",r,".program);"),e.shader.program)Y(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var o=t.global.def("{}"),i=n.def(r,".id"),a=n.def(o,"[",i,"]");n(t.cond(a).then(a,".call(this,a0);").else(a,"=",o,"[",i,"]=",t.link((function(n){return q(Y,t,e,n,1)})),"(",r,");",a,".call(this,a0);"))}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}(u,s),function(t,e){var r=t.proc("scope",3);t.batchId="a2";var o=t.shared,i=o.current;function a(n){var i=e.shader[n];i&&r.set(o.shader,"."+n,i.append(t,r))}j(t,r,e.context),e.framebuffer&&e.framebuffer.append(t,r),oe(Object.keys(e.state)).forEach((function(n){var i=e.state[n].append(t,r);tt(i)?i.forEach((function(e,o){r.set(t.next[n],"["+o+"]",e)})):r.set(o.next,"."+n,i)})),V(t,r,e,!0,!0),[zt,Xt,Wt,Ht,Vt].forEach((function(n){var i=e.draw[n];i&&r.set(o.draw,"."+n,""+i.append(t,r))})),Object.keys(e.uniforms).forEach((function(i){var a=e.uniforms[i].append(t,r);Array.isArray(a)&&(a="["+a.join()+"]"),r.set(o.uniforms,"["+n.id(i)+"]",a)})),Object.keys(e.attributes).forEach((function(n){var o=e.attributes[n].append(t,r),i=t.scopeAttrib(n);Object.keys(new y).forEach((function(t){r.set(i,"."+t,o[t])}))})),e.scopeVAO&&r.set(o.vao,".targetVAO",e.scopeVAO.append(t,r)),a(Bt),a(Ft),Object.keys(e.state).length>0&&(r(i,".dirty=true;"),r.exit(i,".dirty=true;")),r("a1(",t.shared.context,",a0,",t.batchId,");")}(u,s),function(t,e){var n=t.proc("batch",2);t.batchId="0",F(t,n);var r=!1,o=!0;Object.keys(e.context).forEach((function(t){r=r||e.context[t].propDep})),r||(j(t,n,e.context),o=!1);var i=e.framebuffer,a=!1;function u(t){return t.contextDep&&r||t.propDep}i?(i.propDep?r=a=!0:i.contextDep&&r&&(a=!0),a||L(t,n,i)):L(t,n,null),e.state.viewport&&e.state.viewport.propDep&&(r=!0),U(t,n,e),B(t,n,e.state,(function(t){return!u(t)})),e.profile&&u(e.profile)||V(t,n,e,!1,"a1"),e.contextDep=r,e.needsContext=o,e.needsFramebuffer=a;var s=e.shader.progVar;if(s.contextDep&&r||s.propDep)Q(t,n,e,null);else{var c=s.append(t,n);if(n(t.shared.gl,".useProgram(",c,".program);"),e.shader.program)Q(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var f=t.global.def("{}"),l=n.def(c,".id"),h=n.def(f,"[",l,"]");n(t.cond(h).then(h,".call(this,a0,a1);").else(h,"=",f,"[",l,"]=",t.link((function(n){return q(Q,t,e,n,2)})),"(",c,");",h,".call(this,a0,a1);"))}}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}(u,s),e(u.compile(),{destroy:function(){s.shader.program.destroy()}})}}}var le=function(t,e){if(!e.ext_disjoint_timer_query)return null;var n=[];function r(t){n.push(t)}var o=[];function i(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var a=[];function u(t){a.push(t)}var s=[];function c(t,e,n){var r=a.pop()||new i;r.startQueryIndex=t,r.endQueryIndex=e,r.sum=0,r.stats=n,s.push(r)}var f=[],l=[];return{beginQuery:function(t){var r=n.pop()||e.ext_disjoint_timer_query.createQueryEXT();e.ext_disjoint_timer_query.beginQueryEXT(35007,r),o.push(r),c(o.length-1,o.length,t)},endQuery:function(){e.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:c,update:function(){var t,n,i=o.length;if(0!==i){l.length=Math.max(l.length,i+1),f.length=Math.max(f.length,i+1),f[0]=0,l[0]=0;var a=0;for(t=0,n=0;n<o.length;++n){var c=o[n];e.ext_disjoint_timer_query.getQueryObjectEXT(c,34919)?(a+=e.ext_disjoint_timer_query.getQueryObjectEXT(c,34918),r(c)):o[t++]=c,f[n+1]=a,l[n+1]=t}for(o.length=t,t=0,n=0;n<s.length;++n){var h=s[n],d=h.startQueryIndex,p=h.endQueryIndex;h.sum+=f[p]-f[d];var v=l[d],m=l[p];m===v?(h.stats.gpuTime+=h.sum/1e6,u(h)):(h.startQueryIndex=v,h.endQueryIndex=m,s[t++]=h)}s.length=t}},getNumPendingQueries:function(){return o.length},clear:function(){n.push.apply(n,o);for(var t=0;t<n.length;t++)e.ext_disjoint_timer_query.deleteQueryEXT(n[t]);o.length=0,n.length=0},restore:function(){o.length=0,n.length=0}}};function he(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}return function(n){var r=M(n);if(!r)return null;var o=r.gl,i=o.getContextAttributes(),u=o.isContextLost(),s=function(t,e){var n={};function r(e){w.type(e,"string","extension name must be string");var r,o=e.toLowerCase();try{r=n[o]=t.getExtension(o)}catch(t){}return!!r}for(var o=0;o<e.extensions.length;++o){var i=e.extensions[o];if(!r(i))return e.onDestroy(),e.onDone('"'+i+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach((function(t){if(n[t]&&!r(t))throw new Error("(regl): error restoring extension "+t)}))}}}(o,r);if(!s)return null;var c,f,l=(c={"":0},f=[""],{id:function(t){var e=c[t];return e||(e=c[t]=f.length,f.push(t),e)},str:function(t){return f[t]}}),h={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},d=s.extensions,p=le(0,d),v=O(),m=o.drawingBufferWidth,y=o.drawingBufferHeight,g={tick:0,time:0,viewportWidth:m,viewportHeight:y,framebufferWidth:m,framebufferHeight:y,drawingBufferWidth:m,drawingBufferHeight:y,pixelRatio:r.pixelRatio},b=function(t,e){var n=1;e.ext_texture_filter_anisotropic&&(n=t.getParameter(34047));var r=1,o=1;e.webgl_draw_buffers&&(r=t.getParameter(34852),o=t.getParameter(36063));var i=!!e.oes_texture_float;if(i){var a=t.createTexture();t.bindTexture(3553,a),t.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var u=t.createFramebuffer();if(t.bindFramebuffer(36160,u),t.framebufferTexture2D(36160,36064,3553,a,0),t.bindTexture(3553,null),36053!==t.checkFramebufferStatus(36160))i=!1;else{t.viewport(0,0,1,1),t.clearColor(1,0,0,1),t.clear(16384);var s=G.allocType(5126,4);t.readPixels(0,0,1,1,6408,5126,s),t.getError()?i=!1:(t.deleteFramebuffer(u),t.deleteTexture(a),i=1===s[0]),G.freeType(s)}}var c=!0;if("undefined"==typeof navigator||!(/MSIE/.test(navigator.userAgent)||/Trident\\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var f=t.createTexture(),l=G.allocType(5121,36);t.activeTexture(33984),t.bindTexture(34067,f),t.texImage2D(34069,0,6408,3,3,0,6408,5121,l),G.freeType(l),t.bindTexture(34067,null),t.deleteTexture(f),c=!t.getError()}return{colorBits:[t.getParameter(3410),t.getParameter(3411),t.getParameter(3412),t.getParameter(3413)],depthBits:t.getParameter(3414),stencilBits:t.getParameter(3415),subpixelBits:t.getParameter(3408),extensions:Object.keys(e).filter((function(t){return!!e[t]})),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:o,pointSizeDims:t.getParameter(33901),lineWidthDims:t.getParameter(33902),maxViewportDims:t.getParameter(3386),maxCombinedTextureUnits:t.getParameter(35661),maxCubeMapSize:t.getParameter(34076),maxRenderbufferSize:t.getParameter(34024),maxTextureUnits:t.getParameter(34930),maxTextureSize:t.getParameter(3379),maxAttributes:t.getParameter(34921),maxVertexUniforms:t.getParameter(36347),maxVertexTextureUnits:t.getParameter(35660),maxVaryingVectors:t.getParameter(36348),maxFragmentUniforms:t.getParameter(36349),glsl:t.getParameter(35724),renderer:t.getParameter(7937),vendor:t.getParameter(7936),version:t.getParameter(7938),readFloat:i,npotTextureCube:c}}(o,d),_=function(e,n,r,o){var i=0,a={};function u(t){this.id=i++,this.buffer=e.createBuffer(),this.type=t,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,r.profile&&(this.stats={size:0})}u.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},u.prototype.destroy=function(){l(this)};var s=[];function c(t,n,r){t.byteLength=n.byteLength,e.bufferData(t.type,n,r)}function f(e,n,r,o,i,a){var u,s;if(e.usage=r,Array.isArray(n)){if(e.dtype=o||5126,n.length>0)if(Array.isArray(n[0])){u=X(n);for(var f=1,l=1;l<u.length;++l)f*=u[l];e.dimension=f,c(e,s=W(n,u,e.dtype),r),a?e.persistentData=s:G.freeType(s)}else if("number"==typeof n[0]){e.dimension=i;var h=G.allocType(e.dtype,n.length);Y(h,n),c(e,h,r),a?e.persistentData=h:G.freeType(h)}else t(n[0])?(e.dimension=n[0].length,e.dtype=o||q(n[0])||5126,c(e,s=W(n,[n.length,n[0].length],e.dtype),r),a?e.persistentData=s:G.freeType(s)):w.raise("invalid buffer data")}else if(t(n))e.dtype=o||q(n),e.dimension=i,c(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(j(n)){u=n.shape;var d=n.stride,p=n.offset,v=0,m=0,y=0,g=0;1===u.length?(v=u[0],m=1,y=d[0],g=0):2===u.length?(v=u[0],m=u[1],y=d[0],g=d[1]):w.raise("invalid shape"),e.dtype=o||q(n.data)||5126,e.dimension=m;var b=G.allocType(e.dtype,v*m);K(b,n.data,v,m,y,g,p),c(e,b,r),a?e.persistentData=b:G.freeType(b)}else n instanceof ArrayBuffer?(e.dtype=5121,e.dimension=i,c(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n)))):w.raise("invalid buffer data")}function l(t){n.bufferCount--,o(t);var r=t.buffer;w(r,"buffer must not be deleted already"),e.deleteBuffer(r),t.buffer=null,delete a[t.id]}return r.profile&&(n.getTotalBufferSize=function(){var t=0;return Object.keys(a).forEach((function(e){t+=a[e].stats.size})),t}),{create:function(o,i,s,c){n.bufferCount++;var h=new u(i);function d(n){var o=35044,i=null,a=0,u=0,s=1;return Array.isArray(n)||t(n)||j(n)||n instanceof ArrayBuffer?i=n:"number"==typeof n?a=0|n:n&&(w.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(w(null===i||Array.isArray(i)||t(i)||j(i),"invalid data for buffer"),i=n.data),"usage"in n&&(w.parameter(n.usage,V,"invalid buffer usage"),o=V[n.usage]),"type"in n&&(w.parameter(n.type,z,"invalid buffer type"),u=z[n.type]),"dimension"in n&&(w.type(n.dimension,"number","invalid dimension"),s=0|n.dimension),"length"in n&&(w.nni(a,"buffer length must be a nonnegative integer"),a=0|n.length)),h.bind(),i?f(h,i,o,u,s,c):(a&&e.bufferData(h.type,a,o),h.dtype=u||5121,h.usage=o,h.dimension=s,h.byteLength=a),r.profile&&(h.stats.size=h.byteLength*H[h.dtype]),d}function p(t,n){w(n+t.byteLength<=h.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+n+" to a buffer of size "+h.byteLength),e.bufferSubData(h.type,n,t)}return a[h.id]=h,s||d(o),d._reglType="buffer",d._buffer=h,d.subdata=function(e,n){var r,o=0|(n||0);if(h.bind(),t(e)||e instanceof ArrayBuffer)p(e,o);else if(Array.isArray(e)){if(e.length>0)if("number"==typeof e[0]){var i=G.allocType(h.dtype,e.length);Y(i,e),p(i,o),G.freeType(i)}else if(Array.isArray(e[0])||t(e[0])){r=X(e);var a=W(e,r,h.dtype);p(a,o),G.freeType(a)}else w.raise("invalid buffer data")}else if(j(e)){r=e.shape;var u=e.stride,s=0,c=0,f=0,l=0;1===r.length?(s=r[0],c=1,f=u[0],l=0):2===r.length?(s=r[0],c=r[1],f=u[0],l=u[1]):w.raise("invalid shape");var v=Array.isArray(e.data)?h.dtype:q(e.data),m=G.allocType(v,s*c);K(m,e.data,s,c,f,l,e.offset),p(m,o),G.freeType(m)}else w.raise("invalid data for buffer subdata");return d},r.profile&&(d.stats=h.stats),d.destroy=function(){l(h)},d},createStream:function(t,e){var n=s.pop();return n||(n=new u(t)),n.bind(),f(n,e,35040,0,1,!1),n},destroyStream:function(t){s.push(t)},clear:function(){L(a).forEach(l),s.forEach(l)},getBuffer:function(t){return t&&t._buffer instanceof u?t._buffer:null},restore:function(){L(a).forEach((function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)}))},_initBuffer:f}}(o,h,r,(function(t){return x.destroyBuffer(t)})),x=function(e,n,r,o,i){for(var a=r.maxAttributes,u=new Array(a),s=0;s<a;++s)u[s]=new Ct;var c=0,f={},l={Record:Ct,scope:{},state:u,currentVAO:null,targetVAO:null,restore:h()?function(){h()&&L(f).forEach((function(t){t.refresh()}))}:function(){},createVAO:function(e){var r=new p;function u(e){w(Array.isArray(e),"arguments to vertex array constructor must be an array"),w(e.length<a,"too many attributes"),w(e.length>0,"must specify at least one attribute");var o={},s=r.attributes;s.length=e.length;for(var c=0;c<e.length;++c){var f,l=e[c],h=s[c]=new Ct,d=l.data||l;Array.isArray(d)||t(d)||j(d)?(r.buffers[c]&&(f=r.buffers[c],t(d)&&f._buffer.byteLength>=d.byteLength?f.subdata(d):(f.destroy(),r.buffers[c]=null)),r.buffers[c]||(f=r.buffers[c]=i.create(l,34962,!1,!0)),h.buffer=i.getBuffer(f),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1,o[c]=1):i.getBuffer(l)?(h.buffer=i.getBuffer(l),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1):i.getBuffer(l.buffer)?(h.buffer=i.getBuffer(l.buffer),h.size=0|(+l.size||h.buffer.dimension),h.normalized=!!l.normalized||!1,"type"in l?(w.parameter(l.type,z,"invalid buffer type"),h.type=z[l.type]):h.type=h.buffer.dtype,h.offset=0|(l.offset||0),h.stride=0|(l.stride||0),h.divisor=0|(l.divisor||0),h.state=1,w(h.size>=1&&h.size<=4,"size must be between 1 and 4"),w(h.offset>=0,"invalid offset"),w(h.stride>=0&&h.stride<=255,"stride must be between 0 and 255"),w(h.divisor>=0,"divisor must be positive"),w(!h.divisor||!!n.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in l?(w(c>0,"first attribute must not be a constant"),h.x=+l.x||0,h.y=+l.y||0,h.z=+l.z||0,h.w=+l.w||0,h.state=2):w(!1,"invalid attribute spec for location "+c)}for(var p=0;p<r.buffers.length;++p)!o[p]&&r.buffers[p]&&(r.buffers[p].destroy(),r.buffers[p]=null);return r.refresh(),u}return o.vaoCount+=1,u.destroy=function(){for(var t=0;t<r.buffers.length;++t)r.buffers[t]&&r.buffers[t].destroy();r.buffers.length=0,r.destroy()},u._vao=r,u._reglType="vao",u(e)},getVAO:function(t){return"function"==typeof t&&t._vao?t._vao:null},destroyBuffer:function(t){for(var n=0;n<u.length;++n){var r=u[n];r.buffer===t&&(e.disableVertexAttribArray(n),r.buffer=null)}},setVAO:h()?function(t){if(t!==l.currentVAO){var e=h();t?e.bindVertexArrayOES(t.vao):e.bindVertexArrayOES(null),l.currentVAO=t}}:function(t){if(t!==l.currentVAO){if(t)t.bindAttrs();else for(var n=d(),r=0;r<u.length;++r){var o=u[r];o.buffer?(e.enableVertexAttribArray(r),e.vertexAttribPointer(r,o.size,o.type,o.normalized,o.stride,o.offfset),n&&o.divisor&&n.vertexAttribDivisorANGLE(r,o.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,o.x,o.y,o.z,o.w))}l.currentVAO=t}},clear:h()?function(){L(f).forEach((function(t){t.destroy()}))}:function(){}};function h(){return n.oes_vertex_array_object}function d(){return n.angle_instanced_arrays}function p(){this.id=++c,this.attributes=[];var t=h();this.vao=t?t.createVertexArrayOES():null,f[this.id]=this,this.buffers=[]}return p.prototype.bindAttrs=function(){for(var t=d(),n=this.attributes,r=0;r<n.length;++r){var o=n[r];o.buffer?(e.enableVertexAttribArray(r),e.bindBuffer(34962,o.buffer.buffer),e.vertexAttribPointer(r,o.size,o.type,o.normalized,o.stride,o.offset),t&&o.divisor&&t.vertexAttribDivisorANGLE(r,o.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,o.x,o.y,o.z,o.w))}for(var i=n.length;i<a;++i)e.disableVertexAttribArray(i)},p.prototype.refresh=function(){var t=h();t&&(t.bindVertexArrayOES(this.vao),this.bindAttrs(),l.currentVAO=this)},p.prototype.destroy=function(){if(this.vao){var t=h();this===l.currentVAO&&(l.currentVAO=null,t.bindVertexArrayOES(null)),t.deleteVertexArrayOES(this.vao),this.vao=null}f[this.id]&&(delete f[this.id],o.vaoCount-=1)},l}(o,d,b,h,_),E=function(e,n,r,o){var i={},a=0,u={uint8:5121,uint16:5123};function s(t){this.id=a++,i[this.id]=this,this.buffer=t,this.primType=4,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(u.uint32=5125),s.prototype.bind=function(){this.buffer.bind()};var c=[];function f(o,i,a,u,s,c,f){var l;if(o.buffer.bind(),i){var h=f;f||t(i)&&(!j(i)||t(i.data))||(h=n.oes_element_index_uint?5125:5123),r._initBuffer(o.buffer,i,a,h,3)}else e.bufferData(34963,c,a),o.buffer.dtype=l||5121,o.buffer.usage=a,o.buffer.dimension=3,o.buffer.byteLength=c;if(l=f,!f){switch(o.buffer.dtype){case 5121:case 5120:l=5121;break;case 5123:case 5122:l=5123;break;case 5125:case 5124:l=5125;break;default:w.raise("unsupported type for element array")}o.buffer.dtype=l}o.type=l,w(5125!==l||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var d=s;d<0&&(d=o.buffer.byteLength,5123===l?d>>=1:5125===l&&(d>>=2)),o.vertCount=d;var p=u;if(u<0){p=4;var v=o.buffer.dimension;1===v&&(p=0),2===v&&(p=1),3===v&&(p=4)}o.primType=p}function l(t){o.elementsCount--,w(null!==t.buffer,"must not double destroy elements"),delete i[t.id],t.buffer.destroy(),t.buffer=null}return{create:function(e,n){var i=r.create(null,34963,!0),a=new s(i._buffer);function c(e){if(e)if("number"==typeof e)i(e),a.primType=4,a.vertCount=0|e,a.type=5121;else{var n=null,r=35044,o=-1,s=-1,l=0,h=0;Array.isArray(e)||t(e)||j(e)?n=e:(w.type(e,"object","invalid arguments for elements"),"data"in e&&(n=e.data,w(Array.isArray(n)||t(n)||j(n),"invalid data for element buffer")),"usage"in e&&(w.parameter(e.usage,V,"invalid element buffer usage"),r=V[e.usage]),"primitive"in e&&(w.parameter(e.primitive,Z,"invalid element buffer primitive"),o=Z[e.primitive]),"count"in e&&(w("number"==typeof e.count&&e.count>=0,"invalid vertex count for elements"),s=0|e.count),"type"in e&&(w.parameter(e.type,u,"invalid buffer type"),h=u[e.type]),"length"in e?l=0|e.length:(l=s,5123===h||5122===h?l*=2:5125!==h&&5124!==h||(l*=4))),f(a,n,r,o,s,l,h)}else i(),a.primType=4,a.vertCount=0,a.type=5121;return c}return o.elementsCount++,c(e),c._reglType="elements",c._elements=a,c.subdata=function(t,e){return i.subdata(t,e),c},c.destroy=function(){l(a)},c},createStream:function(t){var e=c.pop();return e||(e=new s(r.create(null,34963,!0,!1)._buffer)),f(e,t,35040,-1,-1,0,0),e},destroyStream:function(t){c.push(t)},getElements:function(t){return"function"==typeof t&&t._elements instanceof s?t._elements:null},clear:function(){L(i).forEach(l)}}}(o,d,_,h),S=function(t,n,r,o){var i={},a={};function u(t,e,n,r){this.name=t,this.id=e,this.location=n,this.info=r}function s(t,e){for(var n=0;n<t.length;++n)if(t[n].id===e.id)return void(t[n].location=e.location);t.push(e)}function c(e,r,o){var u=35632===e?i:a,s=u[r];if(!s){var c=n.str(r);s=t.createShader(e),t.shaderSource(s,c),t.compileShader(s),w.shaderError(t,s,c,e,o),u[r]=s}return s}var f={},l=[],h=0;function d(t,e){this.id=h++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,o.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function p(e,r,i){var a,f,l=c(35632,e.fragId),h=c(35633,e.vertId),d=e.program=t.createProgram();if(t.attachShader(d,l),t.attachShader(d,h),i)for(a=0;a<i.length;++a){var p=i[a];t.bindAttribLocation(d,p[0],p[1])}t.linkProgram(d),w.linkError(t,d,n.str(e.fragId),n.str(e.vertId),r);var v=t.getProgramParameter(d,35718);o.profile&&(e.stats.uniformsCount=v);var m=e.uniforms;for(a=0;a<v;++a)if(f=t.getActiveUniform(d,a))if(f.size>1)for(var y=0;y<f.size;++y){var g=f.name.replace("[0]","["+y+"]");s(m,new u(g,n.id(g),t.getUniformLocation(d,g),f))}else s(m,new u(f.name,n.id(f.name),t.getUniformLocation(d,f.name),f));var b=t.getProgramParameter(d,35721);o.profile&&(e.stats.attributesCount=b);var _=e.attributes;for(a=0;a<b;++a)(f=t.getActiveAttrib(d,a))&&s(_,new u(f.name,n.id(f.name),t.getAttribLocation(d,f.name),f))}return o.profile&&(r.getMaxUniformsCount=function(){var t=0;return l.forEach((function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)})),t},r.getMaxAttributesCount=function(){var t=0;return l.forEach((function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)})),t}),{clear:function(){var e=t.deleteShader.bind(t);L(i).forEach(e),i={},L(a).forEach(e),a={},l.forEach((function(e){t.deleteProgram(e.program)})),l.length=0,f={},r.shaderCount=0},program:function(n,o,u,s){w.command(n>=0,"missing vertex shader",u),w.command(o>=0,"missing fragment shader",u);var c=f[o];c||(c=f[o]={});var h=c[n];if(h&&(h.refCount++,!s))return h;var v=new d(o,n);return r.shaderCount++,p(v,u,s),h||(c[n]=v),l.push(v),e(v,{destroy:function(){if(v.refCount--,v.refCount<=0){t.deleteProgram(v.program);var e=l.indexOf(v);l.splice(e,1),r.shaderCount--}c[v.vertId].refCount<=0&&(t.deleteShader(a[v.vertId]),delete a[v.vertId],delete f[v.fragId][v.vertId]),Object.keys(f[v.fragId]).length||(t.deleteShader(i[v.fragId]),delete i[v.fragId],delete f[v.fragId])}})},restore:function(){i={},a={};for(var t=0;t<l.length;++t)p(l[t],null,l[t].attributes.map((function(t){return[t.location,t.name]})))},shader:c,frag:-1,vert:-1}}(o,l,h,r),T=Tt(o,d,b,(function(){R.procs.poll()}),g,h,r),A=function(t,e,n,r,o){var i={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(i.srgba=35907),e.ext_color_buffer_half_float&&(i.rgba16f=34842,i.rgb16f=34843),e.webgl_color_buffer_float&&(i.rgba32f=34836);var u=[];Object.keys(i).forEach((function(t){var e=i[t];u[e]=t}));var s=0,c={};function f(t){this.id=s++,this.refCount=1,this.renderbuffer=t,this.format=32854,this.width=0,this.height=0,o.profile&&(this.stats={size:0})}function l(e){var n=e.renderbuffer;w(n,"must not double destroy renderbuffer"),t.bindRenderbuffer(36161,null),t.deleteRenderbuffer(n),e.renderbuffer=null,e.refCount=0,delete c[e.id],r.renderbufferCount--}return f.prototype.decRef=function(){--this.refCount<=0&&l(this)},o.profile&&(r.getTotalRenderbufferSize=function(){var t=0;return Object.keys(c).forEach((function(e){t+=c[e].stats.size})),t}),{create:function(e,s){var l=new f(t.createRenderbuffer());function h(e,r){var s=0,c=0,f=32854;if("object"===a(e)&&e){var d=e;if("shape"in d){var p=d.shape;w(Array.isArray(p)&&p.length>=2,"invalid renderbuffer shape"),s=0|p[0],c=0|p[1]}else"radius"in d&&(s=c=0|d.radius),"width"in d&&(s=0|d.width),"height"in d&&(c=0|d.height);"format"in d&&(w.parameter(d.format,i,"invalid renderbuffer format"),f=i[d.format])}else"number"==typeof e?(s=0|e,c="number"==typeof r?0|r:s):e?w.raise("invalid arguments to renderbuffer constructor"):s=c=1;if(w(s>0&&c>0&&s<=n.maxRenderbufferSize&&c<=n.maxRenderbufferSize,"invalid renderbuffer size"),s!==l.width||c!==l.height||f!==l.format)return h.width=l.width=s,h.height=l.height=c,l.format=f,t.bindRenderbuffer(36161,l.renderbuffer),t.renderbufferStorage(36161,f,s,c),w(0===t.getError(),"invalid render buffer format"),o.profile&&(l.stats.size=It(l.format,l.width,l.height)),h.format=u[l.format],h}return c[l.id]=l,r.renderbufferCount++,h(e,s),h.resize=function(e,r){var i=0|e,a=0|r||i;return i===l.width&&a===l.height||(w(i>0&&a>0&&i<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),h.width=l.width=i,h.height=l.height=a,t.bindRenderbuffer(36161,l.renderbuffer),t.renderbufferStorage(36161,l.format,i,a),w(0===t.getError(),"invalid render buffer format"),o.profile&&(l.stats.size=It(l.format,l.width,l.height))),h},h._reglType="renderbuffer",h._renderbuffer=l,o.profile&&(h.stats=l.stats),h.destroy=function(){l.decRef()},h},clear:function(){L(c).forEach(l)},restore:function(){L(c).forEach((function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,e.renderbuffer),t.renderbufferStorage(36161,e.format,e.width,e.height)})),t.bindRenderbuffer(36161,null)}}}(o,d,b,h,r),D=function(t,n,r,o,i,u){var s={cur:null,next:null,dirty:!1,setFBO:null},c=["rgba"],f=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&f.push("srgba"),n.ext_color_buffer_half_float&&f.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&f.push("rgba32f");var l=["uint8"];function h(t,e,n){this.target=t,this.texture=e,this.renderbuffer=n;var r=0,o=0;e?(r=e.width,o=e.height):n&&(r=n.width,o=n.height),this.width=r,this.height=o}function d(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function p(t,e,n){if(t)if(t.texture){var r=t.texture._texture,o=Math.max(1,r.width),i=Math.max(1,r.height);w(o===e&&i===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=t.renderbuffer._renderbuffer;w(a.width===e&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function v(e,n){n&&(n.texture?t.framebufferTexture2D(36160,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(36160,e,36161,n.renderbuffer._renderbuffer.renderbuffer))}function m(t){var e=3553,n=null,r=null,o=t;"object"===a(t)&&(o=t.data,"target"in t&&(e=0|t.target)),w.type(o,"function","invalid attachment data");var i=o._reglType;return"texture2d"===i?(n=o,w(3553===e)):"textureCube"===i?(n=o,w(e>=34069&&e<34075,"invalid cube map target")):"renderbuffer"===i?(r=o,e=36161):w.raise("invalid regl object for attachment"),new h(e,n,r)}function y(t,e,n,r,a){if(n){var u=o.create2D({width:t,height:e,format:r,type:a});return u._texture.refCount=0,new h(3553,u,null)}var s=i.create({width:t,height:e,format:r});return s._renderbuffer.refCount=0,new h(36161,null,s)}function g(t){return t&&(t.texture||t.renderbuffer)}function b(t,e,n){t&&(t.texture?t.texture.resize(e,n):t.renderbuffer&&t.renderbuffer.resize(e,n),t.width=e,t.height=n)}n.oes_texture_half_float&&l.push("half float","float16"),n.oes_texture_float&&l.push("float","float32");var _=0,x={};function E(){this.id=_++,x[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function S(t){t.colorAttachments.forEach(d),d(t.depthAttachment),d(t.stencilAttachment),d(t.depthStencilAttachment)}function T(e){var n=e.framebuffer;w(n,"must not double destroy framebuffer"),t.deleteFramebuffer(n),e.framebuffer=null,u.framebufferCount--,delete x[e.id]}function A(e){var n;t.bindFramebuffer(36160,e.framebuffer);var o=e.colorAttachments;for(n=0;n<o.length;++n)v(36064+n,o[n]);for(n=o.length;n<r.maxColorAttachments;++n)t.framebufferTexture2D(36160,36064+n,3553,null,0);t.framebufferTexture2D(36160,33306,3553,null,0),t.framebufferTexture2D(36160,36096,3553,null,0),t.framebufferTexture2D(36160,36128,3553,null,0),v(36096,e.depthAttachment),v(36128,e.stencilAttachment),v(33306,e.depthStencilAttachment);var i=t.checkFramebufferStatus(36160);t.isContextLost()||36053===i||w.raise("framebuffer configuration not supported, status = "+Mt[i]),t.bindFramebuffer(36160,s.next?s.next.framebuffer:null),s.cur=s.next,t.getError()}function I(t,o){var i=new E;function a(t,e){var o;w(s.next!==i,"can not update framebuffer which is currently in use");var u=0,h=0,d=!0,v=!0,b=null,_=!0,x="rgba",E="uint8",T=1,I=null,k=null,O=null,D=!1;if("number"==typeof t)u=0|t,h=0|e||u;else if(t){w.type(t,"object","invalid arguments for framebuffer");var R=t;if("shape"in R){var M=R.shape;w(Array.isArray(M)&&M.length>=2,"invalid shape for framebuffer"),u=M[0],h=M[1]}else"radius"in R&&(u=h=R.radius),"width"in R&&(u=R.width),"height"in R&&(h=R.height);("color"in R||"colors"in R)&&(b=R.color||R.colors,Array.isArray(b)&&w(1===b.length||n.webgl_draw_buffers,"multiple render targets not supported")),b||("colorCount"in R&&(T=0|R.colorCount,w(T>0,"invalid color buffer count")),"colorTexture"in R&&(_=!!R.colorTexture,x="rgba4"),"colorType"in R&&(E=R.colorType,_?(w(n.oes_texture_float||!("float"===E||"float32"===E),"you must enable OES_texture_float in order to use floating point framebuffer objects"),w(n.oes_texture_half_float||!("half float"===E||"float16"===E),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===E||"float16"===E?(w(n.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),x="rgba16f"):"float"!==E&&"float32"!==E||(w(n.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),x="rgba32f"),w.oneOf(E,l,"invalid color type")),"colorFormat"in R&&(x=R.colorFormat,c.indexOf(x)>=0?_=!0:f.indexOf(x)>=0?_=!1:_?w.oneOf(R.colorFormat,c,"invalid color format for texture"):w.oneOf(R.colorFormat,f,"invalid color format for renderbuffer"))),("depthTexture"in R||"depthStencilTexture"in R)&&(D=!(!R.depthTexture&&!R.depthStencilTexture),w(!D||n.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in R&&("boolean"==typeof R.depth?d=R.depth:(I=R.depth,v=!1)),"stencil"in R&&("boolean"==typeof R.stencil?v=R.stencil:(k=R.stencil,d=!1)),"depthStencil"in R&&("boolean"==typeof R.depthStencil?d=v=R.depthStencil:(O=R.depthStencil,d=!1,v=!1))}else u=h=1;var C=null,N=null,P=null,G=null;if(Array.isArray(b))C=b.map(m);else if(b)C=[m(b)];else for(C=new Array(T),o=0;o<T;++o)C[o]=y(u,h,_,x,E);w(n.webgl_draw_buffers||C.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),w(C.length<=r.maxColorAttachments,"too many color attachments, not supported"),u=u||C[0].width,h=h||C[0].height,I?N=m(I):d&&!v&&(N=y(u,h,D,"depth","uint32")),k?P=m(k):v&&!d&&(P=y(u,h,!1,"stencil","uint8")),O?G=m(O):!I&&!k&&v&&d&&(G=y(u,h,D,"depth stencil","depth stencil")),w(!!I+!!k+!!O<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var j=null;for(o=0;o<C.length;++o)if(p(C[o],u,h),w(!C[o]||C[o].texture&&kt.indexOf(C[o].texture._texture.format)>=0||C[o].renderbuffer&&Rt.indexOf(C[o].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+o+" is invalid"),C[o]&&C[o].texture){var L=Ot[C[o].texture._texture.format]*Dt[C[o].texture._texture.type];null===j?j=L:w(j===L,"all color attachments much have the same number of bits per pixel.")}return p(N,u,h),w(!N||N.texture&&6402===N.texture._texture.format||N.renderbuffer&&33189===N.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object"),p(P,u,h),w(!P||P.renderbuffer&&36168===P.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object"),p(G,u,h),w(!G||G.texture&&34041===G.texture._texture.format||G.renderbuffer&&34041===G.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object"),S(i),i.width=u,i.height=h,i.colorAttachments=C,i.depthAttachment=N,i.stencilAttachment=P,i.depthStencilAttachment=G,a.color=C.map(g),a.depth=g(N),a.stencil=g(P),a.depthStencil=g(G),a.width=i.width,a.height=i.height,A(i),a}return u.framebufferCount++,a(t,o),e(a,{resize:function(t,e){w(s.next!==i,"can not resize a framebuffer which is currently in use");var n=Math.max(0|t,1),r=Math.max(0|e||n,1);if(n===i.width&&r===i.height)return a;for(var o=i.colorAttachments,u=0;u<o.length;++u)b(o[u],n,r);return b(i.depthAttachment,n,r),b(i.stencilAttachment,n,r),b(i.depthStencilAttachment,n,r),i.width=a.width=n,i.height=a.height=r,A(i),a},_reglType:"framebuffer",_framebuffer:i,destroy:function(){T(i),S(i)},use:function(t){s.setFBO({framebuffer:a},t)}})}return e(s,{getFramebuffer:function(t){if("function"==typeof t&&"framebuffer"===t._reglType){var e=t._framebuffer;if(e instanceof E)return e}return null},create:I,createCube:function(t){var i=Array(6);function a(t){var r;w(i.indexOf(s.next)<0,"can not update framebuffer which is currently in use");var u,f={color:null},h=0,d=null,p="rgba",v="uint8",m=1;if("number"==typeof t)h=0|t;else if(t){w.type(t,"object","invalid arguments for framebuffer");var y=t;if("shape"in y){var g=y.shape;w(Array.isArray(g)&&g.length>=2,"invalid shape for framebuffer"),w(g[0]===g[1],"cube framebuffer must be square"),h=g[0]}else"radius"in y&&(h=0|y.radius),"width"in y?(h=0|y.width,"height"in y&&w(y.height===h,"must be square")):"height"in y&&(h=0|y.height);("color"in y||"colors"in y)&&(d=y.color||y.colors,Array.isArray(d)&&w(1===d.length||n.webgl_draw_buffers,"multiple render targets not supported")),d||("colorCount"in y&&(m=0|y.colorCount,w(m>0,"invalid color buffer count")),"colorType"in y&&(w.oneOf(y.colorType,l,"invalid color type"),v=y.colorType),"colorFormat"in y&&(p=y.colorFormat,w.oneOf(y.colorFormat,c,"invalid color format for texture"))),"depth"in y&&(f.depth=y.depth),"stencil"in y&&(f.stencil=y.stencil),"depthStencil"in y&&(f.depthStencil=y.depthStencil)}else h=1;if(d)if(Array.isArray(d))for(u=[],r=0;r<d.length;++r)u[r]=d[r];else u=[d];else{u=Array(m);var b={radius:h,format:p,type:v};for(r=0;r<m;++r)u[r]=o.createCube(b)}for(f.color=Array(u.length),r=0;r<u.length;++r){var _=u[r];w("function"==typeof _&&"textureCube"===_._reglType,"invalid cube map"),h=h||_.width,w(_.width===h&&_.height===h,"invalid cube map shape"),f.color[r]={target:34069,data:u[r]}}for(r=0;r<6;++r){for(var x=0;x<u.length;++x)f.color[x].target=34069+r;r>0&&(f.depth=i[0].depth,f.stencil=i[0].stencil,f.depthStencil=i[0].depthStencil),i[r]?i[r](f):i[r]=I(f)}return e(a,{width:h,height:h,color:u})}return a(t),e(a,{faces:i,resize:function(t){var e,n=0|t;if(w(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===a.width)return a;var o=a.color;for(e=0;e<o.length;++e)o[e].resize(n);for(e=0;e<6;++e)i[e].resize(n);return a.width=a.height=n,a},_reglType:"framebufferCube",destroy:function(){i.forEach((function(t){t.destroy()}))}})},clear:function(){L(x).forEach(T)},restore:function(){s.cur=null,s.next=null,s.dirty=!0,L(x).forEach((function(e){e.framebuffer=t.createFramebuffer(),A(e)}))}})}(o,d,b,T,A,h),R=fe(o,l,d,b,_,E,0,D,{},x,S,{elements:null,primitive:4,count:-1,offset:0,instances:-1},g,p,r),C=Nt(o,D,R.procs.poll,g,i,d,b),N=R.next,P=o.canvas,U=[],B=[],F=[],Q=[r.onDestroy],J=null;function $(){if(0===U.length)return p&&p.update(),void(J=null);J=k.next($),ct();for(var t=U.length-1;t>=0;--t){var e=U[t];e&&e(g,null,0)}o.flush(),p&&p.update()}function tt(){!J&&U.length>0&&(J=k.next($))}function et(){J&&(k.cancel($),J=null)}function nt(t){t.preventDefault(),u=!0,et(),B.forEach((function(t){t()}))}function rt(t){o.getError(),u=!1,s.restore(),S.restore(),_.restore(),T.restore(),A.restore(),D.restore(),x.restore(),p&&p.restore(),R.procs.refresh(),tt(),F.forEach((function(t){t()}))}function ot(t){function n(t,e){var n={},r={};return Object.keys(t).forEach((function(o){var i=t[o];if(I.isDynamic(i))r[o]=I.unbox(i,o);else{if(e&&Array.isArray(i))for(var a=0;a<i.length;++a)if(I.isDynamic(i[a]))return void(r[o]=I.unbox(i,o));n[o]=i}})),{dynamic:r,static:n}}w(!!t,"invalid args to regl({...})"),w.type(t,"object","invalid args to regl({...})");var r=n(t.context||{},!0),o=n(t.uniforms||{},!0),i=n(t.attributes||{},!1),a=n(function(t){var n=e({},t);function r(t){if(t in n){var e=n[t];delete n[t],Object.keys(e).forEach((function(r){n[t+"."+r]=e[r]}))}}return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),"vao"in t&&(n.vao=t.vao),n}(t),!1),s={gpuTime:0,cpuTime:0,count:0},c=R.compile(a,i,o,r,s),f=c.draw,l=c.batch,h=c.scope,d=[];return e((function(t,e){var n;if(u&&w.raise("context lost"),"function"==typeof t)return h.call(this,null,t,0);if("function"==typeof e)if("number"==typeof t)for(n=0;n<t;++n)h.call(this,null,e,n);else{if(!Array.isArray(t))return h.call(this,t,e,0);for(n=0;n<t.length;++n)h.call(this,t[n],e,n)}else if("number"==typeof t){if(t>0)return l.call(this,function(t){for(;d.length<t;)d.push(null);return d}(0|t),0|t)}else{if(!Array.isArray(t))return f.call(this,t);if(t.length)return l.call(this,t,t.length)}}),{stats:s,destroy:function(){c.destroy()}})}P&&(P.addEventListener("webglcontextlost",nt,!1),P.addEventListener("webglcontextrestored",rt,!1));var it=D.setFBO=ot({framebuffer:I.define.call(null,1,"framebuffer")});function at(t,e){var n=0;R.procs.poll();var r=e.color;r&&(o.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=16384),"depth"in e&&(o.clearDepth(+e.depth),n|=256),"stencil"in e&&(o.clearStencil(0|e.stencil),n|=1024),w(!!n,"called regl.clear with no buffer specified"),o.clear(n)}function ut(t){return w.type(t,"function","regl.frame() callback must be a function"),U.push(t),tt(),{cancel:function(){var e=he(U,t);w(e>=0,"cannot cancel a frame twice"),U[e]=function t(){var e=he(U,t);U[e]=U[U.length-1],U.length-=1,U.length<=0&&et()}}}}function st(){var t=N.viewport,e=N.scissor_box;t[0]=t[1]=e[0]=e[1]=0,g.viewportWidth=g.framebufferWidth=g.drawingBufferWidth=t[2]=e[2]=o.drawingBufferWidth,g.viewportHeight=g.framebufferHeight=g.drawingBufferHeight=t[3]=e[3]=o.drawingBufferHeight}function ct(){g.tick+=1,g.time=lt(),st(),R.procs.poll()}function ft(){T.refresh(),st(),R.procs.refresh(),p&&p.update()}function lt(){return(O()-v)/1e3}ft();var ht=e(ot,{clear:function(t){if(w("object"===a(t)&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var n=0;n<6;++n)it(e({framebuffer:t.framebuffer.faces[n]},t),at);else it(t,at);else at(0,t)},prop:I.define.bind(null,1),context:I.define.bind(null,2),this:I.define.bind(null,3),draw:ot({}),buffer:function(t){return _.create(t,34962,!1,!1)},elements:function(t){return E.create(t,!1)},texture:T.create2D,cube:T.createCube,renderbuffer:A.create,framebuffer:D.create,framebufferCube:D.createCube,vao:x.createVAO,attributes:i,frame:ut,on:function(t,e){var n;switch(w.type(e,"function","listener callback must be a function"),t){case"frame":return ut(e);case"lost":n=B;break;case"restore":n=F;break;case"destroy":n=Q;break;default:w.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(e),{cancel:function(){for(var t=0;t<n.length;++t)if(n[t]===e)return n[t]=n[n.length-1],void n.pop()}}},limits:b,hasExtension:function(t){return b.extensions.indexOf(t.toLowerCase())>=0},read:C,destroy:function(){U.length=0,et(),P&&(P.removeEventListener("webglcontextlost",nt),P.removeEventListener("webglcontextrestored",rt)),S.clear(),D.clear(),A.clear(),T.clear(),E.clear(),_.clear(),x.clear(),p&&p.clear(),Q.forEach((function(t){t()}))},_gl:o,_refresh:ft,poll:function(){ct(),p&&p.update()},now:lt,stats:h});return r.onDone(null,ht),ht}},"object"===a(e)&&void 0!==t?t.exports=i():void 0===(o="function"==typeof(r=i)?r.call(e,n,e,t):r)||(t.exports=o)},,,,,,,,function(t,e,n){var r=n(198);t.exports={Graph:r.Graph,json:n(299),alg:n(300),version:r.version}},function(t,e,n){t.exports={Graph:n(74),version:n(298)}},function(t,e,n){var r=n(104);t.exports=function(t){return r(t,4)}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(56),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():o.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(56);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(56);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(56);t.exports=function(t,e){var n=this.__data__,o=r(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}},function(t,e,n){var r=n(55);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(55),o=n(75),i=n(76);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!o||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new i(a)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(46),o=n(213),i=n(21),a=n(107),u=/^\\[object .+?Constructor\\]$/,s=Function.prototype,c=Object.prototype,f=s.toString,l=c.hasOwnProperty,h=RegExp("^"+f.call(l).replace(/[\\\\^$.*+?()[\\]{}|]/g,"\\\\$&").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(r(t)?h:u).test(a(t))}},function(t,e,n){var r=n(42),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,u=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(t){}var o=a.call(t);return r&&(e?t[u]=n:delete t[u]),o}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r,o=n(214),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(24)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(217),o=n(55),i=n(75);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},function(t,e,n){var r=n(218),o=n(219),i=n(220),a=n(221),u=n(222);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e,n){var r=n(57);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(57),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(57),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)}},function(t,e,n){var r=n(57);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var r=n(58);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e=n(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(58);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(58);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(58);t.exports=function(t,e){var n=r(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this}},function(t,e,n){var r=n(47),o=n(32);t.exports=function(t,e){return t&&r(e,o(e),t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(31),o=n(25);t.exports=function(t){return o(t)&&"[object Arguments]"==r(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(31),o=n(78),i=n(25),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!a[r(t)]}},function(t,e,n){var r=n(110)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(47),o=n(38);t.exports=function(t,e){return t&&r(e,o(e),t)}},function(t,e,n){var r=n(21),o=n(64),i=n(236),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=o(t),n=[];for(var u in t)("constructor"!=u||!e&&a.call(t,u))&&n.push(u);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var r=n(47),o=n(81);t.exports=function(t,e){return r(t,o(t),e)}},function(t,e,n){var r=n(47),o=n(115);t.exports=function(t,e){return r(t,o(t),e)}},function(t,e,n){var r=n(117),o=n(115),i=n(38);t.exports=function(t){return r(t,i,o)}},function(t,e,n){var r=n(37)(n(24),"DataView");t.exports=r},function(t,e,n){var r=n(37)(n(24),"Promise");t.exports=r},function(t,e,n){var r=n(37)(n(24),"WeakMap");t.exports=r},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(83),o=n(245),i=n(246),a=n(247),u=n(120);t.exports=function(t,e,n){var s=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new s(+t);case"[object DataView]":return o(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return u(t,n);case"[object Map]":return new s;case"[object Number]":case"[object String]":return new s(t);case"[object RegExp]":return i(t);case"[object Set]":return new s;case"[object Symbol]":return a(t)}}},function(t,e,n){var r=n(83);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(42),o=r?r.prototype:void 0,i=o?o.valueOf:void 0;t.exports=function(t){return i?Object(i.call(t)):{}}},function(t,e,n){var r=n(249),o=n(63),i=n(79),a=i&&i.isMap,u=a?o(a):r;t.exports=u},function(t,e,n){var r=n(44),o=n(25);t.exports=function(t){return o(t)&&"[object Map]"==r(t)}},function(t,e,n){var r=n(251),o=n(63),i=n(79),a=i&&i.isSet,u=a?o(a):r;t.exports=u},function(t,e,n){var r=n(44),o=n(25);t.exports=function(t){return o(t)&&"[object Set]"==r(t)}},function(t,e){t.exports=function(t){return function(e,n,r){for(var o=-1,i=Object(e),a=r(e),u=a.length;u--;){var s=a[t?u:++o];if(!1===n(i[s],s,i))break}return e}}},function(t,e,n){var r=n(28);t.exports=function(t,e){return function(n,o){if(null==n)return n;if(!r(n))return t(n,o);for(var i=n.length,a=e?i:-1,u=Object(n);(e?a--:++a<i)&&!1!==o(u[a],a,u););return n}}},function(t,e,n){var r=n(66);t.exports=function(t,e){var n=[];return r(t,(function(t,r,o){e(t,r,o)&&n.push(t)})),n}},function(t,e,n){var r=n(256),o=n(264),i=n(132);t.exports=function(t){var e=o(t);return 1==e.length&&e[0][2]?i(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(54),o=n(127);t.exports=function(t,e,n,i){var a=n.length,u=a,s=!i;if(null==t)return!u;for(t=Object(t);a--;){var c=n[a];if(s&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++a<u;){var f=(c=n[a])[0],l=t[f],h=c[1];if(s&&c[2]){if(void 0===l&&!(f in t))return!1}else{var d=new r;if(i)var p=i(l,h,f,t,e,d);if(!(void 0===p?o(h,l,3,i,d):p))return!1}}return!0}},function(t,e,n){var r=n(54),o=n(128),i=n(261),a=n(263),u=n(44),s=n(13),c=n(43),f=n(22),l="[object Object]",h=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,d,p,v){var m=s(t),y=s(e),g=m?"[object Array]":u(t),b=y?"[object Array]":u(e),_=(g="[object Arguments]"==g?l:g)==l,x=(b="[object Arguments]"==b?l:b)==l,w=g==b;if(w&&c(t)){if(!c(e))return!1;m=!0,_=!1}if(w&&!_)return v||(v=new r),m||f(t)?o(t,e,n,d,p,v):i(t,e,g,n,d,p,v);if(!(1&n)){var E=_&&h.call(t,"__wrapped__"),S=x&&h.call(e,"__wrapped__");if(E||S){var T=E?t.value():t,A=S?e.value():e;return v||(v=new r),p(T,A,n,d,v)}}return!!w&&(v||(v=new r),a(t,e,n,d,p,v))}},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e,n){var r=n(42),o=n(119),i=n(41),a=n(128),u=n(262),s=n(87),c=r?r.prototype:void 0,f=c?c.valueOf:void 0;t.exports=function(t,e,n,r,c,l,h){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!l(new o(t),new o(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var d=u;case"[object Set]":var p=1&r;if(d||(d=s),t.size!=e.size&&!p)return!1;var v=h.get(t);if(v)return v==e;r|=2,h.set(t,e);var m=a(d(t),d(e),r,c,l,h);return h.delete(t),m;case"[object Symbol]":if(f)return f.call(t)==f.call(e)}return!1}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},function(t,e,n){var r=n(116),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,i,a,u){var s=1&n,c=r(t),f=c.length;if(f!=r(e).length&&!s)return!1;for(var l=f;l--;){var h=c[l];if(!(s?h in e:o.call(e,h)))return!1}var d=u.get(t),p=u.get(e);if(d&&p)return d==e&&p==t;var v=!0;u.set(t,e),u.set(e,t);for(var m=s;++l<f;){var y=t[h=c[l]],g=e[h];if(i)var b=s?i(g,y,h,e,t,u):i(y,g,h,t,e,u);if(!(void 0===b?y===g||a(y,g,n,i,u):b)){v=!1;break}m||(m="constructor"==h)}if(v&&!m){var _=t.constructor,x=e.constructor;_==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x||(v=!1)}return u.delete(t),u.delete(e),v}},function(t,e,n){var r=n(131),o=n(32);t.exports=function(t){for(var e=o(t),n=e.length;n--;){var i=e[n],a=t[i];e[n]=[i,a,r(a)]}return e}},function(t,e,n){var r=n(127),o=n(266),i=n(134),a=n(88),u=n(131),s=n(132),c=n(49);t.exports=function(t,e){return a(t)&&u(e)?s(c(t),e):function(n){var a=o(n,t);return void 0===a&&a===e?i(n,t):r(e,a,3)}}},function(t,e,n){var r=n(67);t.exports=function(t,e,n){var o=null==t?void 0:r(t,e);return void 0===o?n:o}},function(t,e,n){var r=n(268),o=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,i=/\\\\(\\\\)?/g,a=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,(function(t,n,r,o){e.push(r?o.replace(i,"$1"):n||t)})),e}));t.exports=a},function(t,e,n){var r=n(269);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var r=n(76);function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(o.Cache||r),n}o.Cache=r,t.exports=o},function(t,e,n){var r=n(42),o=n(69),i=n(13),a=n(45),u=r?r.prototype:void 0,s=u?u.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(a(e))return s?s.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(136),o=n(273),i=n(88),a=n(49);t.exports=function(t){return i(t)?r(a(t)):o(t)}},function(t,e,n){var r=n(67);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t,e){return null!=t&&n.call(t,e)}},function(t,e,n){var r=n(80),o=n(44),i=n(48),a=n(13),u=n(28),s=n(43),c=n(64),f=n(22),l=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(u(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||s(t)||f(t)||i(t)))return!t.length;var e=o(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(c(t))return!r(t).length;for(var n in t)if(l.call(t,n))return!1;return!0}},function(t,e){t.exports=function(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}},function(t,e){t.exports=function(t,e,n,r,o){return o(t,(function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)})),n}},function(t,e,n){var r=n(80),o=n(44),i=n(28),a=n(279),u=n(280);t.exports=function(t){if(null==t)return 0;if(i(t))return a(t)?u(t):t.length;var e=o(t);return"[object Map]"==e||"[object Set]"==e?t.size:r(t).length}},function(t,e,n){var r=n(31),o=n(13),i=n(25);t.exports=function(t){return"string"==typeof t||!o(t)&&i(t)&&"[object String]"==r(t)}},function(t,e,n){var r=n(281),o=n(282),i=n(283);t.exports=function(t){return o(t)?i(t):r(t)}},function(t,e,n){var r=n(136)("length");t.exports=r},function(t,e){var n=RegExp("[\\\\u200d\\\\ud800-\\\\udfff\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe2f\\\\u20d0-\\\\u20ff\\\\ufe0e\\\\ufe0f]");t.exports=function(t){return n.test(t)}},function(t,e){var n="[\\\\ud800-\\\\udfff]",r="[\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe2f\\\\u20d0-\\\\u20ff]",o="\\\\ud83c[\\\\udffb-\\\\udfff]",i="[^\\\\ud800-\\\\udfff]",a="(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}",u="[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]",s="(?:"+r+"|"+o+")"+"?",c="[\\\\ufe0e\\\\ufe0f]?"+s+("(?:\\\\u200d(?:"+[i,a,u].join("|")+")[\\\\ufe0e\\\\ufe0f]?"+s+")*"),f="(?:"+[i+r+"?",r,a,u,n].join("|")+")",l=RegExp(o+"(?="+o+")|"+f+c,"g");t.exports=function(t){for(var e=l.lastIndex=0;l.test(t);)++e;return e}},function(t,e,n){var r=n(77),o=n(122),i=n(85),a=n(29),u=n(65),s=n(13),c=n(43),f=n(46),l=n(21),h=n(22);t.exports=function(t,e,n){var d=s(t),p=d||c(t)||h(t);if(e=a(e,4),null==n){var v=t&&t.constructor;n=p?d?new v:[]:l(t)&&f(v)?o(u(t)):{}}return(p?r:i)(t,(function(t,r,o){return e(n,t,r,o)})),n}},function(t,e,n){var r=n(89),o=n(70),i=n(144),a=n(146),u=o((function(t){return i(r(t,1,a,!0))}));t.exports=u},function(t,e,n){var r=n(42),o=n(48),i=n(13),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return i(t)||o(t)||!!(a&&t&&t[a])}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(84),o=n(108),i=n(39),a=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:i;t.exports=a},function(t,e){var n=Date.now;t.exports=function(t){var e=0,r=0;return function(){var o=n(),i=16-(o-r);if(r=o,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var r=n(291);t.exports=function(t,e){return!!(null==t?0:t.length)&&r(t,e,0)>-1}},function(t,e,n){var r=n(145),o=n(292),i=n(293);t.exports=function(t,e,n){return e==e?i(t,e,n):r(t,o,n)}},function(t,e){t.exports=function(t){return t!=t}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}},function(t,e){t.exports=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}},function(t,e,n){var r=n(118),o=n(296),i=n(87),a=r&&1/i(new r([,-0]))[1]==1/0?function(t){return new r(t)}:o;t.exports=a},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(69);t.exports=function(t,e){return r(e,(function(e){return t[e]}))}},function(t,e){t.exports="2.1.8"},function(t,e,n){var r=n(20),o=n(74);function i(t){return r.map(t.nodes(),(function(e){var n=t.node(e),o=t.parent(e),i={v:e};return r.isUndefined(n)||(i.value=n),r.isUndefined(o)||(i.parent=o),i}))}function a(t){return r.map(t.edges(),(function(e){var n=t.edge(e),o={v:e.v,w:e.w};return r.isUndefined(e.name)||(o.name=e.name),r.isUndefined(n)||(o.value=n),o}))}t.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:i(t),edges:a(t)};r.isUndefined(t.graph())||(e.value=r.clone(t.graph()));return e},read:function(t){var e=new o(t.options).setGraph(t.value);return r.each(t.nodes,(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)})),r.each(t.edges,(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)})),e}}},function(t,e,n){t.exports={components:n(301),dijkstra:n(148),dijkstraAll:n(302),findCycles:n(303),floydWarshall:n(304),isAcyclic:n(305),postorder:n(306),preorder:n(307),prim:n(308),tarjan:n(150),topsort:n(151)}},function(t,e,n){var r=n(20);t.exports=function(t){var e,n={},o=[];function i(o){r.has(n,o)||(n[o]=!0,e.push(o),r.each(t.successors(o),i),r.each(t.predecessors(o),i))}return r.each(t.nodes(),(function(t){e=[],i(t),e.length&&o.push(e)})),o}},function(t,e,n){var r=n(148),o=n(20);t.exports=function(t,e,n){return o.transform(t.nodes(),(function(o,i){o[i]=r(t,i,e,n)}),{})}},function(t,e,n){var r=n(20),o=n(150);t.exports=function(t){return r.filter(o(t),(function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))}},function(t,e,n){var r=n(20);t.exports=function(t,e,n){return function(t,e,n){var r={},o=t.nodes();return o.forEach((function(t){r[t]={},r[t][t]={distance:0},o.forEach((function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})})),n(t).forEach((function(n){var o=n.v===t?n.w:n.v,i=e(n);r[t][o]={distance:i,predecessor:t}}))})),o.forEach((function(t){var e=r[t];o.forEach((function(n){var i=r[n];o.forEach((function(n){var r=i[t],o=e[n],a=i[n],u=r.distance+o.distance;u<a.distance&&(a.distance=u,a.predecessor=o.predecessor)}))}))})),r}(t,e||o,n||function(e){return t.outEdges(e)})};var o=r.constant(1)},function(t,e,n){var r=n(151);t.exports=function(t){try{r(t)}catch(t){if(t instanceof r.CycleException)return!1;throw t}return!0}},function(t,e,n){var r=n(152);t.exports=function(t,e){return r(t,e,"post")}},function(t,e,n){var r=n(152);t.exports=function(t,e){return r(t,e,"pre")}},function(t,e,n){var r=n(20),o=n(74),i=n(149);t.exports=function(t,e){var n,a=new o,u={},s=new i;function c(t){var r=t.v===n?t.w:t.v,o=s.priority(r);if(void 0!==o){var i=e(t);i<o&&(u[r]=n,s.decrease(r,i))}}if(0===t.nodeCount())return a;r.each(t.nodes(),(function(t){s.add(t,Number.POSITIVE_INFINITY),a.setNode(t)})),s.decrease(t.nodes()[0],0);var f=!1;for(;s.size()>0;){if(n=s.removeMin(),r.has(u,n))a.setEdge(n,u[n]);else{if(f)throw new Error("Input graph is not connected: "+t);f=!0}t.nodeEdges(n).forEach(c)}return a}},function(t,e,n){"use strict";var r=n(11),o=n(346),i=n(349),a=n(350),u=n(18).normalizeRanks,s=n(352),c=n(18).removeEmptyRanks,f=n(353),l=n(354),h=n(355),d=n(356),p=n(365),v=n(18),m=n(23).Graph;t.exports=function(t,e){var n=e&&e.debugTiming?v.time:v.notime;n("layout",(function(){var e=n("  buildLayoutGraph",(function(){return function(t){var e=new m({multigraph:!0,compound:!0}),n=A(t.graph());return e.setGraph(r.merge({},g,T(n,y),r.pick(n,b))),r.forEach(t.nodes(),(function(n){var o=A(t.node(n));e.setNode(n,r.defaults(T(o,_),x)),e.setParent(n,t.parent(n))})),r.forEach(t.edges(),(function(n){var o=A(t.edge(n));e.setEdge(n,r.merge({},E,T(o,w),r.pick(o,S)))})),e}(t)}));n("  runLayout",(function(){!function(t,e){e("    makeSpaceForEdgeLabels",(function(){!function(t){var e=t.graph();e.ranksep/=2,r.forEach(t.edges(),(function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(t)})),e("    removeSelfEdges",(function(){!function(t){r.forEach(t.edges(),(function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}}))}(t)})),e("    acyclic",(function(){o.run(t)})),e("    nestingGraph.run",(function(){f.run(t)})),e("    rank",(function(){a(v.asNonCompoundGraph(t))})),e("    injectEdgeLabelProxies",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),o={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e:e};v.addDummyNode(t,"edge-proxy",o,"_ep")}}))}(t)})),e("    removeEmptyRanks",(function(){c(t)})),e("    nestingGraph.cleanup",(function(){f.cleanup(t)})),e("    normalizeRanks",(function(){u(t)})),e("    assignRankMinMax",(function(){!function(t){var e=0;r.forEach(t.nodes(),(function(n){var o=t.node(n);o.borderTop&&(o.minRank=t.node(o.borderTop).rank,o.maxRank=t.node(o.borderBottom).rank,e=r.max(e,o.maxRank))})),t.graph().maxRank=e}(t)})),e("    removeEdgeLabelProxies",(function(){!function(t){r.forEach(t.nodes(),(function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))}))}(t)})),e("    normalize.run",(function(){i.run(t)})),e("    parentDummyChains",(function(){s(t)})),e("    addBorderSegments",(function(){l(t)})),e("    order",(function(){d(t)})),e("    insertSelfEdges",(function(){!function(t){var e=v.buildLayerMatrix(t);r.forEach(e,(function(e){var n=0;r.forEach(e,(function(e,o){var i=t.node(e);i.order=o+n,r.forEach(i.selfEdges,(function(e){v.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:o+ ++n,e:e.e,label:e.label},"_se")})),delete i.selfEdges}))}))}(t)})),e("    adjustCoordinateSystem",(function(){h.adjust(t)})),e("    position",(function(){p(t)})),e("    positionSelfEdges",(function(){!function(t){r.forEach(t.nodes(),(function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),o=r.x+r.width/2,i=r.y,a=n.x-o,u=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:o+2*a/3,y:i-u},{x:o+5*a/6,y:i-u},{x:o+a,y:i},{x:o+5*a/6,y:i+u},{x:o+2*a/3,y:i+u}],n.label.x=n.x,n.label.y=n.y}}))}(t)})),e("    removeBorderNodes",(function(){!function(t){r.forEach(t.nodes(),(function(e){if(t.children(e).length){var n=t.node(e),o=t.node(n.borderTop),i=t.node(n.borderBottom),a=t.node(r.last(n.borderLeft)),u=t.node(r.last(n.borderRight));n.width=Math.abs(u.x-a.x),n.height=Math.abs(i.y-o.y),n.x=a.x+n.width/2,n.y=o.y+n.height/2}})),r.forEach(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))}(t)})),e("    normalize.undo",(function(){i.undo(t)})),e("    fixupEdgeLabelCoords",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(t)})),e("    undoCoordinateSystem",(function(){h.undo(t)})),e("    translateGraph",(function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,o=Number.POSITIVE_INFINITY,i=0,a=t.graph(),u=a.marginx||0,s=a.marginy||0;function c(t){var r=t.x,a=t.y,u=t.width,s=t.height;e=Math.min(e,r-u/2),n=Math.max(n,r+u/2),o=Math.min(o,a-s/2),i=Math.max(i,a+s/2)}r.forEach(t.nodes(),(function(e){c(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.has(n,"x")&&c(n)})),e-=u,o-=s,r.forEach(t.nodes(),(function(n){var r=t.node(n);r.x-=e,r.y-=o})),r.forEach(t.edges(),(function(n){var i=t.edge(n);r.forEach(i.points,(function(t){t.x-=e,t.y-=o})),r.has(i,"x")&&(i.x-=e),r.has(i,"y")&&(i.y-=o)})),a.width=n-e+u,a.height=i-o+s}(t)})),e("    assignNodeIntersects",(function(){!function(t){r.forEach(t.edges(),(function(e){var n,r,o=t.edge(e),i=t.node(e.v),a=t.node(e.w);o.points?(n=o.points[0],r=o.points[o.points.length-1]):(o.points=[],n=a,r=i),o.points.unshift(v.intersectRect(i,n)),o.points.push(v.intersectRect(a,r))}))}(t)})),e("    reversePoints",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);n.reversed&&n.points.reverse()}))}(t)})),e("    acyclic.undo",(function(){o.undo(t)}))}(e,n)})),n("  updateInputGraph",(function(){!function(t,e){r.forEach(t.nodes(),(function(n){var r=t.node(n),o=e.node(n);r&&(r.x=o.x,r.y=o.y,e.children(n).length&&(r.width=o.width,r.height=o.height))})),r.forEach(t.edges(),(function(n){var o=t.edge(n),i=e.edge(n);o.points=i.points,r.has(i,"x")&&(o.x=i.x,o.y=i.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)}))}))};var y=["nodesep","edgesep","ranksep","marginx","marginy"],g={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],_=["width","height"],x={width:0,height:0},w=["minlen","weight","width","height","labeloffset"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},S=["labelpos"];function T(t,e){return r.mapValues(r.pick(t,e),Number)}function A(t){var e={};return r.forEach(t,(function(t,n){e[n.toLowerCase()]=t})),e}},function(t,e,n){var r=n(104);t.exports=function(t){return r(t,5)}},function(t,e,n){var r=n(70),o=n(41),i=n(71),a=n(38),u=Object.prototype,s=u.hasOwnProperty,c=r((function(t,e){t=Object(t);var n=-1,r=e.length,c=r>2?e[2]:void 0;for(c&&i(e[0],e[1],c)&&(r=1);++n<r;)for(var f=e[n],l=a(f),h=-1,d=l.length;++h<d;){var p=l[h],v=t[p];(void 0===v||o(v,u[p])&&!s.call(t,p))&&(t[p]=f[p])}return t}));t.exports=c},function(t,e,n){var r=n(313)(n(314));t.exports=r},function(t,e,n){var r=n(29),o=n(28),i=n(32);t.exports=function(t){return function(e,n,a){var u=Object(e);if(!o(e)){var s=r(n,3);e=i(e),n=function(t){return s(u[t],t,u)}}var c=t(e,n,a);return c>-1?u[s?e[c]:c]:void 0}}},function(t,e,n){var r=n(145),o=n(29),i=n(315),a=Math.max;t.exports=function(t,e,n){var u=null==t?0:t.length;if(!u)return-1;var s=null==n?0:i(n);return s<0&&(s=a(u+s,0)),r(t,o(e,3),s)}},function(t,e,n){var r=n(153);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},function(t,e,n){var r=n(21),o=n(45),i=/^\\s+|\\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var n=u.test(t);return n||s.test(t)?c(t.slice(2),n?2:8):a.test(t)?NaN:+t}},function(t,e,n){var r=n(86),o=n(125),i=n(38);t.exports=function(t,e){return null==t?t:r(t,o(e),i)}},function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},function(t,e,n){var r=n(60),o=n(85),i=n(29);t.exports=function(t,e){var n={};return e=i(e,3),o(t,(function(t,o,i){r(n,o,e(t,o,i))})),n}},function(t,e,n){var r=n(90),o=n(321),i=n(39);t.exports=function(t){return t&&t.length?r(t,i,o):void 0}},function(t,e){t.exports=function(t,e){return t>e}},function(t,e,n){var r=n(323),o=n(326)((function(t,e,n){r(t,e,n)}));t.exports=o},function(t,e,n){var r=n(54),o=n(155),i=n(86),a=n(324),u=n(21),s=n(38),c=n(156);t.exports=function t(e,n,f,l,h){e!==n&&i(n,(function(i,s){if(h||(h=new r),u(i))a(e,n,s,f,t,l,h);else{var d=l?l(c(e,s),i,s+"",e,n,h):void 0;void 0===d&&(d=i),o(e,s,d)}}),s)}},function(t,e,n){var r=n(155),o=n(111),i=n(120),a=n(112),u=n(121),s=n(48),c=n(13),f=n(146),l=n(43),h=n(46),d=n(21),p=n(101),v=n(22),m=n(156),y=n(325);t.exports=function(t,e,n,g,b,_,x){var w=m(t,n),E=m(e,n),S=x.get(E);if(S)r(t,n,S);else{var T=_?_(w,E,n+"",t,e,x):void 0,A=void 0===T;if(A){var I=c(E),k=!I&&l(E),O=!I&&!k&&v(E);T=E,I||k||O?c(w)?T=w:f(w)?T=a(w):k?(A=!1,T=o(E,!0)):O?(A=!1,T=i(E,!0)):T=[]:p(E)||s(E)?(T=w,s(w)?T=y(w):d(w)&&!h(w)||(T=u(E))):A=!1}A&&(x.set(E,T),b(T,E,g,_,x),x.delete(E)),r(t,n,T)}}},function(t,e,n){var r=n(47),o=n(38);t.exports=function(t){return r(t,o(t))}},function(t,e,n){var r=n(70),o=n(71);t.exports=function(t){return r((function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,u=i>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(i--,a):void 0,u&&o(n[0],n[1],u)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,a)}return e}))}},function(t,e,n){var r=n(90),o=n(157),i=n(39);t.exports=function(t){return t&&t.length?r(t,i,o):void 0}},function(t,e,n){var r=n(90),o=n(29),i=n(157);t.exports=function(t,e){return t&&t.length?r(t,o(e,2),i):void 0}},function(t,e,n){var r=n(24);t.exports=function(){return r.Date.now()}},function(t,e,n){var r=n(331),o=n(334)((function(t,e){return null==t?{}:r(t,e)}));t.exports=o},function(t,e,n){var r=n(332),o=n(134);t.exports=function(t,e){return r(t,e,(function(e,n){return o(t,n)}))}},function(t,e,n){var r=n(67),o=n(333),i=n(68);t.exports=function(t,e,n){for(var a=-1,u=e.length,s={};++a<u;){var c=e[a],f=r(t,c);n(f,c)&&o(s,i(c,t),f)}return s}},function(t,e,n){var r=n(59),o=n(68),i=n(62),a=n(21),u=n(49);t.exports=function(t,e,n,s){if(!a(t))return t;for(var c=-1,f=(e=o(e,t)).length,l=f-1,h=t;null!=h&&++c<f;){var d=u(e[c]),p=n;if("__proto__"===d||"constructor"===d||"prototype"===d)return t;if(c!=l){var v=h[d];void 0===(p=s?s(v,d,h):void 0)&&(p=a(v)?v:i(e[c+1])?[]:{})}r(h,d,p),h=h[d]}return t}},function(t,e,n){var r=n(154),o=n(142),i=n(143);t.exports=function(t){return i(o(t,void 0,r),t+"")}},function(t,e,n){var r=n(336)();t.exports=r},function(t,e,n){var r=n(337),o=n(71),i=n(153);t.exports=function(t){return function(e,n,a){return a&&"number"!=typeof a&&o(e,n,a)&&(n=a=void 0),e=i(e),void 0===n?(n=e,e=0):n=i(n),a=void 0===a?e<n?1:-1:i(a),r(e,n,a,t)}}},function(t,e){var n=Math.ceil,r=Math.max;t.exports=function(t,e,o,i){for(var a=-1,u=r(n((e-t)/(o||1)),0),s=Array(u);u--;)s[i?u:++a]=t,t+=o;return s}},function(t,e,n){var r=n(89),o=n(339),i=n(70),a=n(71),u=i((function(t,e){if(null==t)return[];var n=e.length;return n>1&&a(t,e[0],e[1])?e=[]:n>2&&a(e[0],e[1],e[2])&&(e=[e[0]]),o(t,r(e,1),[])}));t.exports=u},function(t,e,n){var r=n(69),o=n(67),i=n(29),a=n(140),u=n(340),s=n(63),c=n(341),f=n(39),l=n(13);t.exports=function(t,e,n){e=e.length?r(e,(function(t){return l(t)?function(e){return o(e,1===t.length?t[0]:t)}:t})):[f];var h=-1;e=r(e,s(i));var d=a(t,(function(t,n,o){return{criteria:r(e,(function(e){return e(t)})),index:++h,value:t}}));return u(d,(function(t,e){return c(t,e,n)}))}},function(t,e){t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},function(t,e,n){var r=n(342);t.exports=function(t,e,n){for(var o=-1,i=t.criteria,a=e.criteria,u=i.length,s=n.length;++o<u;){var c=r(i[o],a[o]);if(c)return o>=s?c:c*("desc"==n[o]?-1:1)}return t.index-e.index}},function(t,e,n){var r=n(45);t.exports=function(t,e){if(t!==e){var n=void 0!==t,o=null===t,i=t==t,a=r(t),u=void 0!==e,s=null===e,c=e==e,f=r(e);if(!s&&!f&&!a&&t>e||a&&u&&c&&!s&&!f||o&&u&&c||!n&&c||!i)return 1;if(!o&&!a&&!f&&t<e||f&&n&&i&&!o&&!a||s&&n&&i||!u&&i||!c)return-1}return 0}},function(t,e,n){var r=n(133),o=0;t.exports=function(t){var e=++o;return r(t)+e}},function(t,e,n){var r=n(59),o=n(345);t.exports=function(t,e){return o(t||[],e||[],r)}},function(t,e){t.exports=function(t,e,n){for(var r=-1,o=t.length,i=e.length,a={};++r<o;){var u=r<i?e[r]:void 0;n(a,t[r],u)}return a}},function(t,e,n){"use strict";var r=n(11),o=n(347);t.exports={run:function(t){var e="greedy"===t.graph().acyclicer?o(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},o={};function i(a){r.has(o,a)||(o[a]=!0,n[a]=!0,r.forEach(t.outEdges(a),(function(t){r.has(n,t.w)?e.push(t):i(t.w)})),delete n[a])}return r.forEach(t.nodes(),i),e}(t);r.forEach(e,(function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,r.uniqueId("rev"))}))},undo:function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}}))}}},function(t,e,n){var r=n(11),o=n(23).Graph,i=n(348);t.exports=function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new o,a=0,u=0;r.forEach(t.nodes(),(function(t){n.setNode(t,{v:t,in:0,out:0})})),r.forEach(t.edges(),(function(t){var r=n.edge(t.v,t.w)||0,o=e(t),i=r+o;n.setEdge(t.v,t.w,i),u=Math.max(u,n.node(t.v).out+=o),a=Math.max(a,n.node(t.w).in+=o)}));var c=r.range(u+a+3).map((function(){return new i})),f=a+1;return r.forEach(n.nodes(),(function(t){s(c,f,n.node(t))})),{graph:n,buckets:c,zeroIdx:f}}(t,e||a),c=function(t,e,n){var r,o=[],i=e[e.length-1],a=e[0];for(;t.nodeCount();){for(;r=a.dequeue();)u(t,e,n,r);for(;r=i.dequeue();)u(t,e,n,r);if(t.nodeCount())for(var s=e.length-2;s>0;--s)if(r=e[s].dequeue()){o=o.concat(u(t,e,n,r,!0));break}}return o}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(c,(function(e){return t.outEdges(e.v,e.w)})),!0)};var a=r.constant(1);function u(t,e,n,o,i){var a=i?[]:void 0;return r.forEach(t.inEdges(o.v),(function(r){var o=t.edge(r),u=t.node(r.v);i&&a.push({v:r.v,w:r.w}),u.out-=o,s(e,n,u)})),r.forEach(t.outEdges(o.v),(function(r){var o=t.edge(r),i=r.w,a=t.node(i);a.in-=o,s(e,n,a)})),t.removeNode(o.v),a}function s(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}},function(t,e){function n(){var t={};t._next=t._prev=t,this._sentinel=t}function r(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function o(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=n,n.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return r(e),e},n.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&r(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},n.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,o)),n=n._prev;return"["+t.join(", ")+"]"}},function(t,e,n){"use strict";var r=n(11),o=n(18);t.exports={run:function(t){t.graph().dummyChains=[],r.forEach(t.edges(),(function(e){!function(t,e){var n,r,i,a=e.v,u=t.node(a).rank,s=e.w,c=t.node(s).rank,f=e.name,l=t.edge(e),h=l.labelRank;if(c===u+1)return;for(t.removeEdge(e),i=0,++u;u<c;++i,++u)l.points=[],r={width:0,height:0,edgeLabel:l,edgeObj:e,rank:u},n=o.addDummyNode(t,"edge",r,"_d"),u===h&&(r.width=l.width,r.height=l.height,r.dummy="edge-label",r.labelpos=l.labelpos),t.setEdge(a,n,{weight:l.weight},f),0===i&&t.graph().dummyChains.push(n),a=n;t.setEdge(a,s,{weight:l.weight},f)}(t,e)}))},undo:function(t){r.forEach(t.graph().dummyChains,(function(e){var n,r=t.node(e),o=r.edgeLabel;for(t.setEdge(r.edgeObj,o);r.dummy;)n=t.successors(e)[0],t.removeNode(e),o.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(o.x=r.x,o.y=r.y,o.width=r.width,o.height=r.height),e=n,r=t.node(e)}))}}},function(t,e,n){"use strict";var r=n(72).longestPath,o=n(158),i=n(351);t.exports=function(t){switch(t.graph().ranker){case"network-simplex":u(t);break;case"tight-tree":!function(t){r(t),o(t)}(t);break;case"longest-path":a(t);break;default:u(t)}};var a=r;function u(t){i(t)}},function(t,e,n){"use strict";var r=n(11),o=n(158),i=n(72).slack,a=n(72).longestPath,u=n(23).alg.preorder,s=n(23).alg.postorder,c=n(18).simplify;function f(t){t=c(t),a(t);var e,n=o(t);for(d(n),l(n,t);e=v(n);)y(n,t,e,m(n,t,e))}function l(t,e){var n=s(t,t.nodes());n=n.slice(0,n.length-1),r.forEach(n,(function(n){!function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=h(t,e,n)}(t,e,n)}))}function h(t,e,n){var o=t.node(n).parent,i=!0,a=e.edge(n,o),u=0;return a||(i=!1,a=e.edge(o,n)),u=a.weight,r.forEach(e.nodeEdges(n),(function(r){var a,s,c=r.v===n,f=c?r.w:r.v;if(f!==o){var l=c===i,h=e.edge(r).weight;if(u+=l?h:-h,a=n,s=f,t.hasEdge(a,s)){var d=t.edge(n,f).cutvalue;u+=l?-d:d}}})),u}function d(t,e){arguments.length<2&&(e=t.nodes()[0]),p(t,{},1,e)}function p(t,e,n,o,i){var a=n,u=t.node(o);return e[o]=!0,r.forEach(t.neighbors(o),(function(i){r.has(e,i)||(n=p(t,e,n,i,o))})),u.low=a,u.lim=n++,i?u.parent=i:delete u.parent,n}function v(t){return r.find(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function m(t,e,n){var o=n.v,a=n.w;e.hasEdge(o,a)||(o=n.w,a=n.v);var u=t.node(o),s=t.node(a),c=u,f=!1;u.lim>s.lim&&(c=s,f=!0);var l=r.filter(e.edges(),(function(e){return f===g(t,t.node(e.v),c)&&f!==g(t,t.node(e.w),c)}));return r.minBy(l,(function(t){return i(e,t)}))}function y(t,e,n,o){var i=n.v,a=n.w;t.removeEdge(i,a),t.setEdge(o.v,o.w,{}),d(t),l(t,e),function(t,e){var n=r.find(t.nodes(),(function(t){return!e.node(t).parent})),o=u(t,n);o=o.slice(1),r.forEach(o,(function(n){var r=t.node(n).parent,o=e.edge(n,r),i=!1;o||(o=e.edge(r,n),i=!0),e.node(n).rank=e.node(r).rank+(i?o.minlen:-o.minlen)}))}(t,e)}function g(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}t.exports=f,f.initLowLimValues=d,f.initCutValues=l,f.calcCutValue=h,f.leaveEdge=v,f.enterEdge=m,f.exchangeEdges=y},function(t,e,n){var r=n(11);t.exports=function(t){var e=function(t){var e={},n=0;function o(i){var a=n;r.forEach(t.children(i),o),e[i]={low:a,lim:n++}}return r.forEach(t.children(),o),e}(t);r.forEach(t.graph().dummyChains,(function(n){for(var r=t.node(n),o=r.edgeObj,i=function(t,e,n,r){var o,i,a=[],u=[],s=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);o=n;do{o=t.parent(o),a.push(o)}while(o&&(e[o].low>s||c>e[o].lim));i=o,o=r;for(;(o=t.parent(o))!==i;)u.push(o);return{path:a.concat(u.reverse()),lca:i}}(t,e,o.v,o.w),a=i.path,u=i.lca,s=0,c=a[s],f=!0;n!==o.w;){if(r=t.node(n),f){for(;(c=a[s])!==u&&t.node(c).maxRank<r.rank;)s++;c===u&&(f=!1)}if(!f){for(;s<a.length-1&&t.node(c=a[s+1]).minRank<=r.rank;)s++;c=a[s]}t.setParent(n,c),n=t.successors(n)[0]}}))}},function(t,e,n){var r=n(11),o=n(18);t.exports={run:function(t){var e=o.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};return r.forEach(t.children(),(function(n){!function n(o,i){var a=t.children(o);a&&a.length&&r.forEach(a,(function(t){n(t,i+1)}));e[o]=i}(n,1)})),e}(t),i=r.max(r.values(n))-1,a=2*i+1;t.graph().nestingRoot=e,r.forEach(t.edges(),(function(e){t.edge(e).minlen*=a}));var u=function(t){return r.reduce(t.edges(),(function(e,n){return e+t.edge(n).weight}),0)}(t)+1;r.forEach(t.children(),(function(s){!function t(e,n,i,a,u,s,c){var f=e.children(c);if(!f.length)return void(c!==n&&e.setEdge(n,c,{weight:0,minlen:i}));var l=o.addBorderNode(e,"_bt"),h=o.addBorderNode(e,"_bb"),d=e.node(c);e.setParent(l,c),d.borderTop=l,e.setParent(h,c),d.borderBottom=h,r.forEach(f,(function(r){t(e,n,i,a,u,s,r);var o=e.node(r),f=o.borderTop?o.borderTop:r,d=o.borderBottom?o.borderBottom:r,p=o.borderTop?a:2*a,v=f!==d?1:u-s[c]+1;e.setEdge(l,f,{weight:p,minlen:v,nestingEdge:!0}),e.setEdge(d,h,{weight:p,minlen:v,nestingEdge:!0})})),e.parent(c)||e.setEdge(n,l,{weight:0,minlen:u+s[c]})}(t,e,a,u,i,n,s)})),t.graph().nodeRankFactor=a},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,r.forEach(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))}}},function(t,e,n){var r=n(11),o=n(18);function i(t,e,n,r,i,a){var u={width:0,height:0,rank:a,borderType:e},s=i[e][a-1],c=o.addDummyNode(t,"border",u,n);i[e][a]=c,t.setParent(c,r),s&&t.setEdge(s,c,{weight:1})}t.exports=function(t){r.forEach(t.children(),(function e(n){var o=t.children(n),a=t.node(n);if(o.length&&r.forEach(o,e),r.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var u=a.minRank,s=a.maxRank+1;u<s;++u)i(t,"borderLeft","_bl",n,a,u),i(t,"borderRight","_br",n,a,u)}}))}},function(t,e,n){"use strict";var r=n(11);function o(t){r.forEach(t.nodes(),(function(e){i(t.node(e))})),r.forEach(t.edges(),(function(e){i(t.edge(e))}))}function i(t){var e=t.width;t.width=t.height,t.height=e}function a(t){t.y=-t.y}function u(t){var e=t.x;t.x=t.y,t.y=e}t.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||o(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){r.forEach(t.nodes(),(function(e){a(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.forEach(n.points,a),r.has(n,"y")&&a(n)}))}(t);"lr"!==e&&"rl"!==e||(!function(t){r.forEach(t.nodes(),(function(e){u(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.forEach(n.points,u),r.has(n,"x")&&u(n)}))}(t),o(t))}}},function(t,e,n){"use strict";var r=n(11),o=n(357),i=n(358),a=n(359),u=n(363),s=n(364),c=n(23).Graph,f=n(18);function l(t,e,n){return r.map(e,(function(e){return u(t,e,n)}))}function h(t,e){var n=new c;r.forEach(t,(function(t){var o=t.graph().root,i=a(t,o,n,e);r.forEach(i.vs,(function(e,n){t.node(e).order=n})),s(t,n,i.vs)}))}function d(t,e){r.forEach(e,(function(e){r.forEach(e,(function(e,n){t.node(e).order=n}))}))}t.exports=function(t){var e=f.maxRank(t),n=l(t,r.range(1,e+1),"inEdges"),a=l(t,r.range(e-1,-1,-1),"outEdges"),u=o(t);d(t,u);for(var s,c=Number.POSITIVE_INFINITY,p=0,v=0;v<4;++p,++v){h(p%2?n:a,p%4>=2),u=f.buildLayerMatrix(t);var m=i(t,u);m<c&&(v=0,s=r.cloneDeep(u),c=m)}d(t,s)}},function(t,e,n){"use strict";var r=n(11);t.exports=function(t){var e={},n=r.filter(t.nodes(),(function(e){return!t.children(e).length})),o=r.max(r.map(n,(function(e){return t.node(e).rank}))),i=r.map(r.range(o+1),(function(){return[]}));var a=r.sortBy(n,(function(e){return t.node(e).rank}));return r.forEach(a,(function n(o){if(r.has(e,o))return;e[o]=!0;var a=t.node(o);i[a.rank].push(o),r.forEach(t.successors(o),n)})),i}},function(t,e,n){"use strict";var r=n(11);function o(t,e,n){for(var o=r.zipObject(n,r.map(n,(function(t,e){return e}))),i=r.flatten(r.map(e,(function(e){return r.sortBy(r.map(t.outEdges(e),(function(e){return{pos:o[e.w],weight:t.edge(e).weight}})),"pos")})),!0),a=1;a<n.length;)a<<=1;var u=2*a-1;a-=1;var s=r.map(new Array(u),(function(){return 0})),c=0;return r.forEach(i.forEach((function(t){var e=t.pos+a;s[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=s[e+1]),s[e=e-1>>1]+=t.weight;c+=t.weight*n}))),c}t.exports=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=o(t,e[r-1],e[r]);return n}},function(t,e,n){var r=n(11),o=n(360),i=n(361),a=n(362);t.exports=function t(e,n,u,s){var c=e.children(n),f=e.node(n),l=f?f.borderLeft:void 0,h=f?f.borderRight:void 0,d={};l&&(c=r.filter(c,(function(t){return t!==l&&t!==h})));var p=o(e,c);r.forEach(p,(function(n){if(e.children(n.v).length){var o=t(e,n.v,u,s);d[n.v]=o,r.has(o,"barycenter")&&(i=n,a=o,r.isUndefined(i.barycenter)?(i.barycenter=a.barycenter,i.weight=a.weight):(i.barycenter=(i.barycenter*i.weight+a.barycenter*a.weight)/(i.weight+a.weight),i.weight+=a.weight))}var i,a}));var v=i(p,u);!function(t,e){r.forEach(t,(function(t){t.vs=r.flatten(t.vs.map((function(t){return e[t]?e[t].vs:t})),!0)}))}(v,d);var m=a(v,s);if(l&&(m.vs=r.flatten([l,m.vs,h],!0),e.predecessors(l).length)){var y=e.node(e.predecessors(l)[0]),g=e.node(e.predecessors(h)[0]);r.has(m,"barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+y.order+g.order)/(m.weight+2),m.weight+=2}return m}},function(t,e,n){var r=n(11);t.exports=function(t,e){return r.map(e,(function(e){var n=t.inEdges(e);if(n.length){var o=r.reduce(n,(function(e,n){var r=t.edge(n),o=t.node(n.v);return{sum:e.sum+r.weight*o.order,weight:e.weight+r.weight}}),{sum:0,weight:0});return{v:e,barycenter:o.sum/o.weight,weight:o.weight}}return{v:e}}))}},function(t,e,n){"use strict";var r=n(11);t.exports=function(t,e){var n={};return r.forEach(t,(function(t,e){var o=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};r.isUndefined(t.barycenter)||(o.barycenter=t.barycenter,o.weight=t.weight)})),r.forEach(e.edges(),(function(t){var e=n[t.v],o=n[t.w];r.isUndefined(e)||r.isUndefined(o)||(o.indegree++,e.out.push(n[t.w]))})),function(t){var e=[];function n(t){return function(e){e.merged||(r.isUndefined(e.barycenter)||r.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&function(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight);e.weight&&(n+=e.barycenter*e.weight,r+=e.weight);t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}(t,e)}}function o(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}for(;t.length;){var i=t.pop();e.push(i),r.forEach(i.in.reverse(),n(i)),r.forEach(i.out,o(i))}return r.map(r.filter(e,(function(t){return!t.merged})),(function(t){return r.pick(t,["vs","i","barycenter","weight"])}))}(r.filter(n,(function(t){return!t.indegree})))}},function(t,e,n){var r=n(11),o=n(18);function i(t,e,n){for(var o;e.length&&(o=r.last(e)).i<=n;)e.pop(),t.push(o.vs),n++;return n}t.exports=function(t,e){var n=o.partition(t,(function(t){return r.has(t,"barycenter")})),a=n.lhs,u=r.sortBy(n.rhs,(function(t){return-t.i})),s=[],c=0,f=0,l=0;a.sort((h=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:h?e.i-t.i:t.i-e.i})),l=i(s,u,l),r.forEach(a,(function(t){l+=t.vs.length,s.push(t.vs),c+=t.barycenter*t.weight,f+=t.weight,l=i(s,u,l)}));var h;var d={vs:r.flatten(s,!0)};f&&(d.barycenter=c/f,d.weight=f);return d}},function(t,e,n){var r=n(11),o=n(23).Graph;t.exports=function(t,e,n){var i=function(t){var e;for(;t.hasNode(e=r.uniqueId("_root")););return e}(t),a=new o({compound:!0}).setGraph({root:i}).setDefaultNodeLabel((function(e){return t.node(e)}));return r.forEach(t.nodes(),(function(o){var u=t.node(o),s=t.parent(o);(u.rank===e||u.minRank<=e&&e<=u.maxRank)&&(a.setNode(o),a.setParent(o,s||i),r.forEach(t[n](o),(function(e){var n=e.v===o?e.w:e.v,i=a.edge(n,o),u=r.isUndefined(i)?0:i.weight;a.setEdge(n,o,{weight:t.edge(e).weight+u})})),r.has(u,"minRank")&&a.setNode(o,{borderLeft:u.borderLeft[e],borderRight:u.borderRight[e]}))})),a}},function(t,e,n){var r=n(11);t.exports=function(t,e,n){var o,i={};r.forEach(n,(function(n){for(var r,a,u=t.parent(n);u;){if((r=t.parent(u))?(a=i[r],i[r]=u):(a=o,o=u),a&&a!==u)return void e.setEdge(a,u);u=r}}))}},function(t,e,n){"use strict";var r=n(11),o=n(18),i=n(366).positionX;t.exports=function(t){(function(t){var e=o.buildLayerMatrix(t),n=t.graph().ranksep,i=0;r.forEach(e,(function(e){var o=r.max(r.map(e,(function(e){return t.node(e).height})));r.forEach(e,(function(e){t.node(e).y=i+o/2})),i+=o+n}))})(t=o.asNonCompoundGraph(t)),r.forEach(i(t),(function(e,n){t.node(n).x=e}))}},function(t,e,n){"use strict";var r=n(11),o=n(23).Graph,i=n(18);function a(t,e){var n={};return r.reduce(e,(function(e,o){var i=0,a=0,u=e.length,c=r.last(o);return r.forEach(o,(function(e,f){var l=function(t,e){if(t.node(e).dummy)return r.find(t.predecessors(e),(function(e){return t.node(e).dummy}))}(t,e),h=l?t.node(l).order:u;(l||e===c)&&(r.forEach(o.slice(a,f+1),(function(e){r.forEach(t.predecessors(e),(function(r){var o=t.node(r),a=o.order;!(a<i||h<a)||o.dummy&&t.node(e).dummy||s(n,r,e)}))})),a=f+1,i=h)})),o})),n}function u(t,e){var n={};function o(e,o,i,a,u){var c;r.forEach(r.range(o,i),(function(o){c=e[o],t.node(c).dummy&&r.forEach(t.predecessors(c),(function(e){var r=t.node(e);r.dummy&&(r.order<a||r.order>u)&&s(n,e,c)}))}))}return r.reduce(e,(function(e,n){var i,a=-1,u=0;return r.forEach(n,(function(r,s){if("border"===t.node(r).dummy){var c=t.predecessors(r);c.length&&(i=t.node(c[0]).order,o(n,u,s,a,i),u=s,a=i)}o(n,u,n.length,i,e.length)})),n})),n}function s(t,e,n){if(e>n){var r=e;e=n,n=r}var o=t[e];o||(t[e]=o={}),o[n]=!0}function c(t,e,n){if(e>n){var o=e;e=n,n=o}return r.has(t[e],n)}function f(t,e,n,o){var i={},a={},u={};return r.forEach(e,(function(t){r.forEach(t,(function(t,e){i[t]=t,a[t]=t,u[t]=e}))})),r.forEach(e,(function(t){var e=-1;r.forEach(t,(function(t){var s=o(t);if(s.length)for(var f=((s=r.sortBy(s,(function(t){return u[t]}))).length-1)/2,l=Math.floor(f),h=Math.ceil(f);l<=h;++l){var d=s[l];a[t]===t&&e<u[d]&&!c(n,t,d)&&(a[d]=t,a[t]=i[t]=i[d],e=u[d])}}))})),{root:i,align:a}}function l(t,e,n,i,a){var u={},s=function(t,e,n,i){var a=new o,u=t.graph(),s=function(t,e,n){return function(o,i,a){var u,s=o.node(i),c=o.node(a),f=0;if(f+=s.width/2,r.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=-s.width/2;break;case"r":u=s.width/2}if(u&&(f+=n?u:-u),u=0,f+=(s.dummy?e:t)/2,f+=(c.dummy?e:t)/2,f+=c.width/2,r.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":u=c.width/2;break;case"r":u=-c.width/2}return u&&(f+=n?u:-u),u=0,f}}(u.nodesep,u.edgesep,i);return r.forEach(e,(function(e){var o;r.forEach(e,(function(e){var r=n[e];if(a.setNode(r),o){var i=n[o],u=a.edge(i,r);a.setEdge(i,r,Math.max(s(t,e,o),u||0))}o=e}))})),a}(t,e,n,a),c=a?"borderLeft":"borderRight";function f(t,e){for(var n=s.nodes(),r=n.pop(),o={};r;)o[r]?t(r):(o[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return f((function(t){u[t]=s.inEdges(t).reduce((function(t,e){return Math.max(t,u[e.v]+s.edge(e))}),0)}),s.predecessors.bind(s)),f((function(e){var n=s.outEdges(e).reduce((function(t,e){return Math.min(t,u[e.w]-s.edge(e))}),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==c&&(u[e]=Math.max(u[e],n))}),s.successors.bind(s)),r.forEach(i,(function(t){u[t]=u[n[t]]})),u}function h(t,e){return r.minBy(r.values(e),(function(e){var n=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return r.forIn(e,(function(e,r){var i=function(t,e){return t.node(e).width}(t,r)/2;n=Math.max(e+i,n),o=Math.min(e-i,o)})),n-o}))}function d(t,e){var n=r.values(e),o=r.min(n),i=r.max(n);r.forEach(["u","d"],(function(n){r.forEach(["l","r"],(function(a){var u,s=n+a,c=t[s];if(c!==e){var f=r.values(c);(u="l"===a?o-r.min(f):i-r.max(f))&&(t[s]=r.mapValues(c,(function(t){return t+u})))}}))}))}function p(t,e){return r.mapValues(t.ul,(function(n,o){if(e)return t[e.toLowerCase()][o];var i=r.sortBy(r.map(t,o));return(i[1]+i[2])/2}))}t.exports={positionX:function(t){var e,n=i.buildLayerMatrix(t),o=r.merge(a(t,n),u(t,n)),s={};r.forEach(["u","d"],(function(i){e="u"===i?n:r.values(n).reverse(),r.forEach(["l","r"],(function(n){"r"===n&&(e=r.map(e,(function(t){return r.values(t).reverse()})));var a=("u"===i?t.predecessors:t.successors).bind(t),u=f(t,e,o,a),c=l(t,e,u.root,u.align,"r"===n);"r"===n&&(c=r.mapValues(c,(function(t){return-t}))),s[i+n]=c}))}));var c=h(t,s);return d(s,c),p(s,t.graph().align)},findType1Conflicts:a,findType2Conflicts:u,addConflict:s,hasConflict:c,verticalAlignment:f,horizontalCompaction:l,alignCoordinates:d,findSmallestWidthAlignment:h,balance:p}},function(t,e,n){var r=n(11),o=n(18),i=n(23).Graph;t.exports={debugOrdering:function(t){var e=o.buildLayerMatrix(t),n=new i({compound:!0,multigraph:!0}).setGraph({});return r.forEach(t.nodes(),(function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)})),r.forEach(t.edges(),(function(t){n.setEdge(t.v,t.w,{},t.name)})),r.forEach(e,(function(t,e){var o="layer"+e;n.setNode(o,{rank:"same"}),r.reduce(t,(function(t,e){return n.setEdge(t,e,{style:"invis"}),e}))})),n}}},function(t,e){t.exports="0.8.5"},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var s,c=[],f=!1,l=-1;function h(){f&&s&&(f=!1,s.length?c=s.concat(c):l=-1,c.length&&d())}function d(){if(!f){var t=u(h);f=!0;for(var e=c.length;e;){for(s=c,c=[];++l<e;)s&&s[l].run();l=-1,e=c.length}s=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||f||u(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=function(t){"use strict";var n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=x(a,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=f(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function h(){}function d(){}function p(){}var v={};v[i]=function(){return this};var m=Object.getPrototypeOf,y=m&&m(m(T([])));y&&y!==n&&r.call(y,i)&&(v=y);var g=p.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,n){var o;this._invoke=function(i,a){function u(){return new n((function(o,u){!function o(i,a,u,s){var c=f(t[i],t,a);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"===e(h)&&r.call(h,"__await")?n.resolve(h.__await).then((function(t){o("next",t,u,s)}),(function(t){o("throw",t,u,s)})):n.resolve(h).then((function(t){l.value=t,u(l)}),(function(t){return o("throw",t,u,s)}))}s(c.arg)}(i,a,o,u)}))}return o=o?o.then(u,u):u()}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=f(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return d.prototype=g.constructor=p,p.constructor=d,d.displayName=s(p,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(_.prototype),_.prototype[a]=function(){return this},t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),s(g,u,"Generator"),g[i]=function(){return this},g.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}("object"===e(t)?t.exports:{});try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}}).call(this,n(61)(t))},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var a=n(375),u=n(19),s=n(30),c=n(17),f=n(162),l=n(376),h=n(383),d=n(385),p=n(40),v=n(50),m=n(388),y=n(389),g=function(){function t(t){var e=t||{};if("object"!==r(e))throw new Error(""+u.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===e.defaultScope)e.defaultScope=s.BindingScopeEnum.Transient;else if(e.defaultScope!==s.BindingScopeEnum.Singleton&&e.defaultScope!==s.BindingScopeEnum.Transient&&e.defaultScope!==s.BindingScopeEnum.Request)throw new Error(""+u.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!=typeof e.autoBindInjectable)throw new Error(""+u.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!=typeof e.skipBaseClassChecks)throw new Error(""+u.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=p.id(),this._bindingDictionary=new y.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new f.MetadataReader}return t.merge=function(e,n){var r=new t,o=l.getBindingDictionary(r),i=l.getBindingDictionary(e),a=l.getBindingDictionary(n);function u(t,e){t.traverse((function(t,n){n.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))}return u(i,o),u(a,o),r},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),r=0,o=t;r<o.length;r++){var i=o[r],a=n(i.id);i.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(this,void 0,void 0,(function(){var e,n,r,o,a;return i(this,(function(i){switch(i.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,r=t,i.label=1;case 1:return n<r.length?(o=r[n],a=e(o.id),[4,o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(t){return function(e){return e.moduleId===t}};e.forEach((function(e){var n=r(e.id);t._bindingDictionary.removeByCondition(n)}))},t.prototype.bind=function(t){var e=this.options.defaultScope||s.BindingScopeEnum.Transient,n=new a.Binding(t,e);return this._bindingDictionary.add(t,n),new d.BindingToSyntax(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error(u.CANNOT_UNBIND+" "+v.getServiceIdentifierAsString(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new y.Lookup},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,c.NAMED_TAG,e)},t.prototype.isBoundTagged=function(t,e,n){var r=!1;if(this._bindingDictionary.hasKey(t)){var o=this._bindingDictionary.get(t),i=l.createMockRequest(this,t,e,n);r=o.some((function(t){return t.constraint(i)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(t,e,n)),r},t.prototype.snapshot=function(){this._snapshots.push(m.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(u.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,s.TargetTypeEnum.Variable,t)},t.prototype.getTagged=function(t,e,n){return this._get(!1,!1,s.TargetTypeEnum.Variable,t,e,n)},t.prototype.getNamed=function(t,e){return this.getTagged(t,c.NAMED_TAG,e)},t.prototype.getAll=function(t){return this._get(!0,!0,s.TargetTypeEnum.Variable,t)},t.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,s.TargetTypeEnum.Variable,t,e,n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,c.NAMED_TAG,e)},t.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),e.get(t)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(r){var o=t.rebind.bind(t)(r);return e(o,n),o}};return function(r){return{bindFunction:(o=r,function(n){var r=t.bind.bind(t)(n);return e(r,o),r}),isboundFunction:function(e){return t.isBound.bind(t)(e)},rebindFunction:n(r),unbindFunction:function(e){t.unbind.bind(t)(e)}};var o}},t.prototype._get=function(t,e,n,r,o,i){var a=null,s={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:o,serviceIdentifier:r,targetType:n,value:i};if(this._middleware){if(null==(a=this._middleware(s)))throw new Error(u.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(s);return a},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=l.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return n=e.contextInterceptor(n),h.resolve(n)}},t}();e.Container=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Binding=void 0;var r=n(30),o=n(40),i=function(){function t(t,e){this.id=o.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=r.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=!1,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();e.Binding=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBindingDictionary=e.createMockRequest=e.plan=void 0;var r=n(377),o=n(19),i=n(30),a=n(17),u=n(163),s=n(50),c=n(378),f=n(26),l=n(379),h=n(380),d=n(382),p=n(165);function v(t){return t._bindingDictionary}function m(t,e,n,i,a){var u=y(n.container,a.serviceIdentifier),c=[];return u.length===r.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof a.serviceIdentifier&&t.getConstructorMetadata(a.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(a.serviceIdentifier).toSelf(),u=y(n.container,a.serviceIdentifier)),c=e?u:u.filter((function(t){var e=new d.Request(t.serviceIdentifier,n,i,t,a);return t.constraint(e)})),function(t,e,n,i){switch(e.length){case r.BindingCount.NoBindingsAvailable:if(n.isOptional())return e;var a=s.getServiceIdentifierAsString(t),u=o.NOT_REGISTERED;throw u+=s.listMetadataForTarget(a,n),u+=s.listRegisteredBindingsForServiceIdentifier(i,a,y),new Error(u);case r.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return e;case r.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return e;a=s.getServiceIdentifierAsString(t),u=o.AMBIGUOUS_MATCH+" "+a;throw u+=s.listRegisteredBindingsForServiceIdentifier(i,a,y),new Error(u)}}(a.serviceIdentifier,c,a,n.container),c}function y(t,e){var n=[],r=v(t);return r.hasKey(e)?n=r.get(e):null!==t.parent&&(n=y(t.parent,e)),n}e.getBindingDictionary=v,e.plan=function(t,e,n,r,v,y,g,b){void 0===b&&(b=!1);var _=new c.Context(e),x=function(t,e,n,r,o,i){var u=t?a.MULTI_INJECT_TAG:a.INJECT_TAG,s=new f.Metadata(u,n),c=new p.Target(e,r,n,s);if(void 0!==o){var l=new f.Metadata(o,i);c.metadata.push(l)}return c}(n,r,v,"",y,g);try{return function t(e,n,r,a,u,s){var c,f;if(null===u){c=m(e,n,a,null,s),f=new d.Request(r,a,null,c,s);var p=new l.Plan(a,f);a.addPlan(p)}else c=m(e,n,a,u,s),f=u.addChildRequest(s.serviceIdentifier,c,s);c.forEach((function(n){var r=null;if(s.isArray())r=f.addChildRequest(n.serviceIdentifier,n,s);else{if(n.cache)return;r=f}if(n.type===i.BindingTypeEnum.Instance&&null!==n.implementationType){var u=h.getDependencies(e,n.implementationType);if(!a.container.options.skipBaseClassChecks){var c=h.getBaseClassDependencyCount(e,n.implementationType);if(u.length<c){var l=o.ARGUMENTS_LENGTH_MISMATCH(h.getFunctionName(n.implementationType));throw new Error(l)}}u.forEach((function(n){t(e,!1,n.serviceIdentifier,a,r,n)}))}}))}(t,b,v,_,null,x),_}catch(t){throw u.isStackOverflowExeption(t)&&_.plan&&s.circularDependencyToException(_.plan.rootRequest),t}},e.createMockRequest=function(t,e,n,r){var o=new p.Target(i.TargetTypeEnum.Variable,"",e,new f.Metadata(n,r)),a=new c.Context(t);return new d.Request(e,a,null,[],o)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingCount=void 0;e.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Context=void 0;var r=n(40),o=function(){function t(t){this.id=r.id(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}();e.Context=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Plan=void 0;var r=function(t,e){this.parentContext=t,this.rootRequest=e};e.Plan=r},function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.getFunctionName=e.getBaseClassDependencyCount=e.getDependencies=void 0;var o=n(164),i=n(19),a=n(30),u=n(17),s=n(50);Object.defineProperty(e,"getFunctionName",{enumerable:!0,get:function(){return s.getFunctionName}});var c=n(165);function f(t,e,n,o){var u=t.getConstructorMetadata(n),s=u.compilerGeneratedMetadata;if(void 0===s){var f=i.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(f)}var d=u.userGeneratedMetadata,p=Object.keys(d),v=function(t,e,n,r,o){for(var i=[],a=0;a<o;a++){var u=l(a,t,e,n,r);null!==u&&i.push(u)}return i}(o,e,s,d,0===n.length&&p.length>0?p.length:n.length),m=function t(e,n){for(var o=e.getPropertiesMetadata(n),i=[],u=Object.keys(o),s=0,f=u;s<f.length;s++){var l=f[s],d=o[l],p=h(o[l]),v=p.targetName||l,m=p.inject||p.multiInject,y=new c.Target(a.TargetTypeEnum.ClassProperty,v,m);y.metadata=d,i.push(y)}var g=Object.getPrototypeOf(n.prototype).constructor;if(g!==Object){var b=t(e,g);i=r(i,b)}return i}(t,n);return r(v,m)}function l(t,e,n,r,u){var s=u[t.toString()]||[],f=h(s),l=!0!==f.unmanaged,d=r[t],p=f.inject||f.multiInject;if((d=p||d)instanceof o.LazyServiceIdentifer&&(d=d.unwrap()),l){if(!e&&(d===Object||d===Function||void 0===d)){var v=i.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".";throw new Error(v)}var m=new c.Target(a.TargetTypeEnum.ConstructorArgument,f.targetName,d);return m.metadata=s,m}return null}function h(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e[u.INJECT_TAG],multiInject:e[u.MULTI_INJECT_TAG],targetName:e[u.NAME_TAG],unmanaged:e[u.UNMANAGED_TAG]}}e.getDependencies=function(t,e){return f(t,s.getFunctionName(e),e,!1)},e.getBaseClassDependencyCount=function t(e,n){var r=Object.getPrototypeOf(n.prototype).constructor;if(r!==Object){var o=f(e,s.getFunctionName(r),r,!0),i=o.map((function(t){return t.metadata.filter((function(t){return t.key===u.UNMANAGED_TAG}))})),a=[].concat.apply([],i).length,c=o.length-a;return c>0?c:t(e,r)}return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryableString=void 0;var r=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e,n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();e.QueryableString=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Request=void 0;var r=n(40),o=function(){function t(t,e,n,o,i){this.id=r.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=i,this.childRequests=[],this.bindings=Array.isArray(o)?o:[o],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,r){var o=new t(e,this.parentContext,this,n,r);return this.childRequests.push(o),o},t}();e.Request=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolve=void 0;var r=n(19),o=n(30),i=n(163),a=n(50),u=n(384),s=function(t,e,n){try{return n()}catch(n){throw i.isStackOverflowExeption(n)?new Error(r.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):n}};e.resolve=function(t){return function t(e){return function(n){n.parentContext.setCurrentRequest(n);var i=n.bindings,c=n.childRequests,f=n.target&&n.target.isArray(),l=!(n.parentRequest&&n.parentRequest.target&&n.target&&n.parentRequest.target.matchesArray(n.target.serviceIdentifier));if(f&&l)return c.map((function(n){return t(e)(n)}));var h=null;if(!n.target.isOptional()||0!==i.length){var d=i[0],p=d.scope===o.BindingScopeEnum.Singleton,v=d.scope===o.BindingScopeEnum.Request;if(p&&d.activated)return d.cache;if(v&&null!==e&&e.has(d.id))return e.get(d.id);if(d.type===o.BindingTypeEnum.ConstantValue)h=d.cache;else if(d.type===o.BindingTypeEnum.Function)h=d.cache;else if(d.type===o.BindingTypeEnum.Constructor)h=d.implementationType;else if(d.type===o.BindingTypeEnum.DynamicValue&&null!==d.dynamicValue)h=s("toDynamicValue",d.serviceIdentifier,(function(){return d.dynamicValue(n.parentContext)}));else if(d.type===o.BindingTypeEnum.Factory&&null!==d.factory)h=s("toFactory",d.serviceIdentifier,(function(){return d.factory(n.parentContext)}));else if(d.type===o.BindingTypeEnum.Provider&&null!==d.provider)h=s("toProvider",d.serviceIdentifier,(function(){return d.provider(n.parentContext)}));else{if(d.type!==o.BindingTypeEnum.Instance||null===d.implementationType){var m=a.getServiceIdentifierAsString(n.serviceIdentifier);throw new Error(r.INVALID_BINDING_TYPE+" "+m)}h=u.resolveInstance(d.implementationType,c,t(e))}return"function"==typeof d.onActivation&&(h=d.onActivation(n.parentContext,h)),p&&(d.cache=h,d.activated=!0),v&&null!==e&&!e.has(d.id)&&e.set(d.id,h),h}}}(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}},function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveInstance=void 0;var o=n(19),i=n(30),a=n(17);e.resolveInstance=function(t,e,n){var u,s,c=null;if(e.length>0){var f=e.filter((function(t){return null!==t.target&&t.target.type===i.TargetTypeEnum.ConstructorArgument})).map(n);s=f,c=function(t,e,n){var r=e.filter((function(t){return null!==t.target&&t.target.type===i.TargetTypeEnum.ClassProperty})),o=r.map(n);return r.forEach((function(e,n){var r;r=e.target.name.value();var i=o[n];t[r]=i})),t}(c=new((u=t).bind.apply(u,r([void 0],s))),e,n)}else c=new t;return function(t,e){if(Reflect.hasMetadata(a.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(a.POST_CONSTRUCT,t);try{e[n.value]()}catch(e){throw new Error(o.POST_CONSTRUCT_ERROR(t.name,e.message))}}}(t,c),c}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingToSyntax=void 0;var r=n(19),o=n(30),i=n(386),a=n(166),u=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=o.BindingTypeEnum.Instance,this._binding.implementationType=t,new i.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+r.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=o.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=o.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new i.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=o.BindingTypeEnum.Constructor,this._binding.implementationType=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=o.BindingTypeEnum.Factory,this._binding.factory=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error(r.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=o.BindingTypeEnum.Function,e},t.prototype.toAutoFactory=function(t){return this._binding.type=o.BindingTypeEnum.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},new a.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=o.BindingTypeEnum.Provider,this._binding.provider=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},t}();e.BindingToSyntax=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInWhenOnSyntax=void 0;var r=n(387),o=n(91),i=n(92),a=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new o.BindingOnSyntax(this._binding),this._bindingInSyntax=new r.BindingInSyntax(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingInWhenOnSyntax=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInSyntax=void 0;var r=n(30),o=n(166),i=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=r.BindingScopeEnum.Request,new o.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=r.BindingScopeEnum.Singleton,new o.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=r.BindingScopeEnum.Transient,new o.BindingWhenOnSyntax(this._binding)},t}();e.BindingInSyntax=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContainerSnapshot=void 0;var r=function(){function t(){}return t.of=function(e,n){var r=new t;return r.bindings=e,r.middleware=n,r},t}();e.ContainerSnapshot=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Lookup=void 0;var r=n(19),o=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null==t)throw new Error(r.NULL_ARGUMENT);if(null==e)throw new Error(r.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},t.prototype.get=function(t){if(null==t)throw new Error(r.NULL_ARGUMENT);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(r.KEY_NOT_FOUND)},t.prototype.remove=function(t){if(null==t)throw new Error(r.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(r.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach((function(n,r){var o=n.filter((function(e){return!t(e)}));o.length>0?e._map.set(r,o):e._map.delete(r)}))},t.prototype.hasKey=function(t){if(null==t)throw new Error(r.NULL_ARGUMENT);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){t.forEach((function(t){return e.add(n,t.clone())}))})),e},t.prototype.traverse=function(t){this._map.forEach((function(e,n){t(n,e)}))},t}();e.Lookup=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncContainerModule=e.ContainerModule=void 0;var r=n(40),o=function(t){this.id=r.id(),this.registry=t};e.ContainerModule=o;var i=function(t){this.id=r.id(),this.registry=t};e.AsyncContainerModule=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.injectable=void 0;var r=n(19),o=n(17);e.injectable=function(){return function(t){if(Reflect.hasOwnMetadata(o.PARAM_TYPES,t))throw new Error(r.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(o.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(o.PARAM_TYPES,e,t),t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagged=void 0;var r=n(26),o=n(33);e.tagged=function(t,e){return function(n,i,a){var u=new r.Metadata(t,e);"number"==typeof a?o.tagParameter(n,i,a,u):o.tagProperty(n,i,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.named=void 0;var r=n(17),o=n(26),i=n(33);e.named=function(t){return function(e,n,a){var u=new o.Metadata(r.NAMED_TAG,t);"number"==typeof a?i.tagParameter(e,n,a,u):i.tagProperty(e,n,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.optional=void 0;var r=n(17),o=n(26),i=n(33);e.optional=function(){return function(t,e,n){var a=new o.Metadata(r.OPTIONAL_TAG,!0);"number"==typeof n?i.tagParameter(t,e,n,a):i.tagProperty(t,e,a)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unmanaged=void 0;var r=n(17),o=n(26),i=n(33);e.unmanaged=function(){return function(t,e,n){var a=new o.Metadata(r.UNMANAGED_TAG,!0);i.tagParameter(t,e,n,a)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiInject=void 0;var r=n(17),o=n(26),i=n(33);e.multiInject=function(t){return function(e,n,a){var u=new o.Metadata(r.MULTI_INJECT_TAG,t);"number"==typeof a?i.tagParameter(e,n,a,u):i.tagProperty(e,n,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.targetName=void 0;var r=n(17),o=n(26),i=n(33);e.targetName=function(t){return function(e,n,a){var u=new o.Metadata(r.NAME_TAG,t);i.tagParameter(e,n,a,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.postConstruct=void 0;var r=n(19),o=n(17),i=n(26);e.postConstruct=function(){return function(t,e,n){var a=new i.Metadata(o.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(o.POST_CONSTRUCT,t.constructor))throw new Error(r.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(o.POST_CONSTRUCT,a,t.constructor)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=void 0,e.multiBindToService=function(t){return function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach((function(n){return t.bind(n).toService(e)}))}}}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Symbol.for("INJECTION");function o(t,e,n,o){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return o&&!Reflect.hasMetadata(r,this,e)&&Reflect.defineMetadata(r,n(),this,e),Reflect.hasMetadata(r,this,e)?Reflect.getMetadata(r,this,e):n()},set:function(t){Reflect.defineMetadata(r,t,this,e)}})}e.makePropertyInjectDecorator=function(t,e){return function(n){return function(r,i){o(r,i,(function(){return t.get(n)}),e)}}},e.makePropertyInjectNamedDecorator=function(t,e){return function(n,r){return function(i,a){o(i,a,(function(){return t.getNamed(n,r)}),e)}}},e.makePropertyInjectTaggedDecorator=function(t,e){return function(n,r,i){return function(a,u){o(a,u,(function(){return t.getTagged(n,r,i)}),e)}}},e.makePropertyMultiInjectDecorator=function(t,e){return function(n){return function(r,i){o(r,i,(function(){return t.getAll(n)}),e)}}}},function(t,e,n){var r=n(161);t.exports=function(t){if(Array.isArray(t))return r(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e){t.exports=function(t){var e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}},function(t,e){t.exports=function(t,e){var n=new Float32Array(2);return n[0]=t,n[1]=e,n}},function(t,e){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t}},function(t,e,n){t.exports=function(t,e){var n=t[0],o=t[1],i=e[0],a=e[1];return Math.abs(n-i)<=r*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(o-a)<=r*Math.max(1,Math.abs(o),Math.abs(a))};var r=n(175)},function(t,e){t.exports=function(t,e){return t[0]===e[0]&&t[1]===e[1]}},function(t,e,n){t.exports=n(100)},function(t,e,n){t.exports=n(179)},function(t,e,n){t.exports=n(180)},function(t,e){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}},function(t,e){t.exports=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}},function(t,e){t.exports=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}},function(t,e){t.exports=function(t,e,n){var r=Math.cos(n),o=Math.sin(n),i=e[0],a=e[1];return t[0]=i*r-a*o,t[1]=i*o+a*r,t}},function(t,e){t.exports=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}},function(t,e){t.exports=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}},function(t,e){t.exports=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}},function(t,e){t.exports=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}},function(t,e,n){t.exports=n(181)},function(t,e,n){t.exports=n(182)},function(t,e,n){t.exports=n(183)},function(t,e,n){t.exports=n(184)},function(t,e){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t}},function(t,e){t.exports=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}},function(t,e){t.exports=function(t,e,n,r){var o=e[0],i=e[1];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t}},function(t,e){t.exports=function(t,e){e=e||1;var n=2*Math.random()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o,t[1]=n[1]*r+n[3]*o,t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o+n[4],t[1]=n[1]*r+n[3]*o+n[5],t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[3]*o+n[6],t[1]=n[1]*r+n[4]*o+n[7],t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[4]*o+n[12],t[1]=n[1]*r+n[5]*o+n[13],t}},function(t,e,n){t.exports=function(t,e,n,o,i,a){var u,s;e||(e=2);n||(n=0);s=o?Math.min(o*e+n,t.length):t.length;for(u=n;u<s;u+=e)r[0]=t[u],r[1]=t[u+1],i(r,r,a),t[u]=r[0],t[u+1]=r[1];return t};var r=n(176)()},function(t,e){t.exports=function(t,e,n){var r=e[0]*e[0]+e[1]*e[1];if(r>n*n){var o=Math.sqrt(r);t[0]=e[0]/o*n,t[1]=e[1]/o*n}else t[0]=e[0],t[1]=e[1];return t}},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"create",(function(){return go})),n.d(r,"fromMat4",(function(){return bo})),n.d(r,"clone",(function(){return _o})),n.d(r,"copy",(function(){return xo})),n.d(r,"fromValues",(function(){return wo})),n.d(r,"set",(function(){return Eo})),n.d(r,"identity",(function(){return So})),n.d(r,"transpose",(function(){return To})),n.d(r,"invert",(function(){return Ao})),n.d(r,"adjoint",(function(){return Io})),n.d(r,"determinant",(function(){return ko})),n.d(r,"multiply",(function(){return Oo})),n.d(r,"translate",(function(){return Do})),n.d(r,"rotate",(function(){return Ro})),n.d(r,"scale",(function(){return Mo})),n.d(r,"fromTranslation",(function(){return Co})),n.d(r,"fromRotation",(function(){return No})),n.d(r,"fromScaling",(function(){return Po})),n.d(r,"fromMat2d",(function(){return Go})),n.d(r,"fromQuat",(function(){return jo})),n.d(r,"normalFromMat4",(function(){return Lo})),n.d(r,"projection",(function(){return Uo})),n.d(r,"str",(function(){return Bo})),n.d(r,"frob",(function(){return Fo})),n.d(r,"add",(function(){return zo})),n.d(r,"subtract",(function(){return Vo})),n.d(r,"multiplyScalar",(function(){return Wo})),n.d(r,"multiplyScalarAndAdd",(function(){return Xo})),n.d(r,"exactEquals",(function(){return Ho})),n.d(r,"equals",(function(){return qo})),n.d(r,"mul",(function(){return Yo})),n.d(r,"sub",(function(){return Ko}));var o={};n.r(o),n.d(o,"create",(function(){return Zo})),n.d(o,"clone",(function(){return Qo})),n.d(o,"copy",(function(){return Jo})),n.d(o,"fromValues",(function(){return $o})),n.d(o,"set",(function(){return ti})),n.d(o,"identity",(function(){return ei})),n.d(o,"transpose",(function(){return ni})),n.d(o,"invert",(function(){return ri})),n.d(o,"adjoint",(function(){return oi})),n.d(o,"determinant",(function(){return ii})),n.d(o,"multiply",(function(){return ai})),n.d(o,"translate",(function(){return ui})),n.d(o,"scale",(function(){return si})),n.d(o,"rotate",(function(){return ci})),n.d(o,"rotateX",(function(){return fi})),n.d(o,"rotateY",(function(){return li})),n.d(o,"rotateZ",(function(){return hi})),n.d(o,"fromTranslation",(function(){return di})),n.d(o,"fromScaling",(function(){return pi})),n.d(o,"fromRotation",(function(){return vi})),n.d(o,"fromXRotation",(function(){return mi})),n.d(o,"fromYRotation",(function(){return yi})),n.d(o,"fromZRotation",(function(){return gi})),n.d(o,"fromRotationTranslation",(function(){return bi})),n.d(o,"fromQuat2",(function(){return _i})),n.d(o,"getTranslation",(function(){return xi})),n.d(o,"getScaling",(function(){return wi})),n.d(o,"getRotation",(function(){return Ei})),n.d(o,"fromRotationTranslationScale",(function(){return Si})),n.d(o,"fromRotationTranslationScaleOrigin",(function(){return Ti})),n.d(o,"fromQuat",(function(){return Ai})),n.d(o,"frustum",(function(){return Ii})),n.d(o,"perspective",(function(){return ki})),n.d(o,"perspectiveFromFieldOfView",(function(){return Oi})),n.d(o,"ortho",(function(){return Di})),n.d(o,"lookAt",(function(){return Ri})),n.d(o,"targetTo",(function(){return Mi})),n.d(o,"str",(function(){return Ci})),n.d(o,"frob",(function(){return Ni})),n.d(o,"add",(function(){return Pi})),n.d(o,"subtract",(function(){return Gi})),n.d(o,"multiplyScalar",(function(){return ji})),n.d(o,"multiplyScalarAndAdd",(function(){return Li})),n.d(o,"exactEquals",(function(){return Ui})),n.d(o,"equals",(function(){return Bi})),n.d(o,"mul",(function(){return Fi})),n.d(o,"sub",(function(){return zi}));var i={};n.r(i),n.d(i,"create",(function(){return Vi})),n.d(i,"clone",(function(){return Wi})),n.d(i,"length",(function(){return Xi})),n.d(i,"fromValues",(function(){return Hi})),n.d(i,"copy",(function(){return qi})),n.d(i,"set",(function(){return Yi})),n.d(i,"add",(function(){return Ki})),n.d(i,"subtract",(function(){return Zi})),n.d(i,"multiply",(function(){return Qi})),n.d(i,"divide",(function(){return Ji})),n.d(i,"ceil",(function(){return $i})),n.d(i,"floor",(function(){return ta})),n.d(i,"min",(function(){return ea})),n.d(i,"max",(function(){return na})),n.d(i,"round",(function(){return ra})),n.d(i,"scale",(function(){return oa})),n.d(i,"scaleAndAdd",(function(){return ia})),n.d(i,"distance",(function(){return aa})),n.d(i,"squaredDistance",(function(){return ua})),n.d(i,"squaredLength",(function(){return sa})),n.d(i,"negate",(function(){return ca})),n.d(i,"inverse",(function(){return fa})),n.d(i,"normalize",(function(){return la})),n.d(i,"dot",(function(){return ha})),n.d(i,"cross",(function(){return da})),n.d(i,"lerp",(function(){return pa})),n.d(i,"hermite",(function(){return va})),n.d(i,"bezier",(function(){return ma})),n.d(i,"random",(function(){return ya})),n.d(i,"transformMat4",(function(){return ga})),n.d(i,"transformMat3",(function(){return ba})),n.d(i,"transformQuat",(function(){return _a})),n.d(i,"rotateX",(function(){return xa})),n.d(i,"rotateY",(function(){return wa})),n.d(i,"rotateZ",(function(){return Ea})),n.d(i,"angle",(function(){return Sa})),n.d(i,"zero",(function(){return Ta})),n.d(i,"str",(function(){return Aa})),n.d(i,"exactEquals",(function(){return Ia})),n.d(i,"equals",(function(){return ka})),n.d(i,"sub",(function(){return Da})),n.d(i,"mul",(function(){return Ra})),n.d(i,"div",(function(){return Ma})),n.d(i,"dist",(function(){return Ca})),n.d(i,"sqrDist",(function(){return Na})),n.d(i,"len",(function(){return Pa})),n.d(i,"sqrLen",(function(){return Ga})),n.d(i,"forEach",(function(){return ja}));var a={};n.r(a),n.d(a,"create",(function(){return La})),n.d(a,"clone",(function(){return Ua})),n.d(a,"fromValues",(function(){return Ba})),n.d(a,"copy",(function(){return Fa})),n.d(a,"set",(function(){return za})),n.d(a,"add",(function(){return Va})),n.d(a,"subtract",(function(){return Wa})),n.d(a,"multiply",(function(){return Xa})),n.d(a,"divide",(function(){return Ha})),n.d(a,"ceil",(function(){return qa})),n.d(a,"floor",(function(){return Ya})),n.d(a,"min",(function(){return Ka})),n.d(a,"max",(function(){return Za})),n.d(a,"round",(function(){return Qa})),n.d(a,"scale",(function(){return Ja})),n.d(a,"scaleAndAdd",(function(){return $a})),n.d(a,"distance",(function(){return tu})),n.d(a,"squaredDistance",(function(){return eu})),n.d(a,"length",(function(){return nu})),n.d(a,"squaredLength",(function(){return ru})),n.d(a,"negate",(function(){return ou})),n.d(a,"inverse",(function(){return iu})),n.d(a,"normalize",(function(){return au})),n.d(a,"dot",(function(){return uu})),n.d(a,"cross",(function(){return su})),n.d(a,"lerp",(function(){return cu})),n.d(a,"random",(function(){return fu})),n.d(a,"transformMat4",(function(){return lu})),n.d(a,"transformQuat",(function(){return hu})),n.d(a,"zero",(function(){return du})),n.d(a,"str",(function(){return pu})),n.d(a,"exactEquals",(function(){return vu})),n.d(a,"equals",(function(){return mu})),n.d(a,"sub",(function(){return yu})),n.d(a,"mul",(function(){return gu})),n.d(a,"div",(function(){return bu})),n.d(a,"dist",(function(){return _u})),n.d(a,"sqrDist",(function(){return xu})),n.d(a,"len",(function(){return wu})),n.d(a,"sqrLen",(function(){return Eu})),n.d(a,"forEach",(function(){return Su}));var u={};n.r(u),n.d(u,"create",(function(){return Tu})),n.d(u,"identity",(function(){return Au})),n.d(u,"setAxisAngle",(function(){return Iu})),n.d(u,"getAxisAngle",(function(){return ku})),n.d(u,"getAngle",(function(){return Ou})),n.d(u,"multiply",(function(){return Du})),n.d(u,"rotateX",(function(){return Ru})),n.d(u,"rotateY",(function(){return Mu})),n.d(u,"rotateZ",(function(){return Cu})),n.d(u,"calculateW",(function(){return Nu})),n.d(u,"exp",(function(){return Pu})),n.d(u,"ln",(function(){return Gu})),n.d(u,"pow",(function(){return ju})),n.d(u,"slerp",(function(){return Lu})),n.d(u,"random",(function(){return Uu})),n.d(u,"invert",(function(){return Bu})),n.d(u,"conjugate",(function(){return Fu})),n.d(u,"fromMat3",(function(){return zu})),n.d(u,"fromEuler",(function(){return Vu})),n.d(u,"str",(function(){return Wu})),n.d(u,"clone",(function(){return as})),n.d(u,"fromValues",(function(){return us})),n.d(u,"copy",(function(){return ss})),n.d(u,"set",(function(){return cs})),n.d(u,"add",(function(){return fs})),n.d(u,"mul",(function(){return ls})),n.d(u,"scale",(function(){return hs})),n.d(u,"dot",(function(){return ds})),n.d(u,"lerp",(function(){return ps})),n.d(u,"length",(function(){return vs})),n.d(u,"len",(function(){return ms})),n.d(u,"squaredLength",(function(){return ys})),n.d(u,"sqrLen",(function(){return gs})),n.d(u,"normalize",(function(){return bs})),n.d(u,"exactEquals",(function(){return _s})),n.d(u,"equals",(function(){return xs})),n.d(u,"rotationTo",(function(){return ws})),n.d(u,"sqlerp",(function(){return Es})),n.d(u,"setAxes",(function(){return Ss}));var s,c,f="LAYOUT_RUN",l="LAYOUT_END",h="LAYOUT_ERROR",d="GPU_LAYOUT_RUN",p=function(t){return"string"==typeof t},v=/-(\\w)/g,m=(s=function(t){return t.replace(v,(function(t,e){return e?e.toUpperCase():""}))},c=Object.create(null),Array.isArray),y=function(t){return"number"==typeof t},g=function(t){return Number.isNaN(Number(t))},b=function(t,e,n){for(var r=[],o=0;o<t;o++)r[o]=0;return n?(n.forEach((function(t){t.source&&(r[e[t.source]]+=1),t.target&&(r[e[t.target]]+=1)})),r):r},_=function(t){for(var e=[],n=t.length,r=0;r<n;r+=1){e[r]=[];for(var o=0;o<n;o+=1)r===o?e[r][o]=0:0!==t[r][o]&&t[r][o]?e[r][o]=t[r][o]:e[r][o]=1/0}for(var i=0;i<n;i+=1)for(var a=0;a<n;a+=1)for(var u=0;u<n;u+=1)e[a][u]>e[a][i]+e[i][u]&&(e[a][u]=e[a][i]+e[i][u]);return e},x=function(t,e){var n=t.nodes,r=t.edges,o=[],i={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(t,e){i[t.id]=e;o.push([])})),r&&r.forEach((function(t){var n=t.source,r=t.target,a=i[n],u=i[r];o[a][u]=1,e||(o[u][a]=1)})),o},w=function(t,e){"function"==typeof e&&function t(e,n){if(e&&e.children)for(var r=e.children.length-1;r>=0;r--)if(!t(e.children[r],n))return;return!!n(e)}(t,e)};function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var S=function t(e){if(null===e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){var n=[];return e.forEach((function(t){n.push(t)})),n.map((function(e){return t(e)}))}if("object"===E(e)&&e!=={}){var r=Object.assign({},e);return Object.keys(r).forEach((function(e){r[e]=t(r[e])})),r}return e},T=function(t){return"function"==typeof t};function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var I=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}var e,n,r;return e=t,(n=[{key:"layout",value:function(t){return this.init(t),this.execute(!0)}},{key:"init",value:function(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[]}},{key:"execute",value:function(t){}},{key:"executeWithWorker",value:function(){}},{key:"getDefaultCfg",value:function(){return{}}},{key:"updateCfg",value:function(t){t&&Object.assign(this,t)}},{key:"getType",value:function(){return"base"}},{key:"destroy",value:function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}])&&A(e.prototype,n),r&&A(e,r),t}();function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C(t);if(e){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return M(this,n)}}function M(t,e){return!e||"object"!==k(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(i,t);var e,n,r,o=R(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).begin=[0,0],e.preventOverlap=!0,e.preventOverlapPadding=10,e.condense=!1,e.sortBy="degree",e.nodeSize=30,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.row=0,e.col=0,e.cellWidth=0,e.cellHeight=0,e.cellUsed={},e.id2manPos={},e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=e.length,r=t.begin;if(0!==n){if(1===n)return e[0].x=r[0],e[0].y=r[1],void(t.onLayoutEnd&&t.onLayoutEnd());var o=t.edges,i=[];e.forEach((function(t){i.push(t)}));var a={};if(i.forEach((function(t,e){a[t.id]=e})),("degree"===t.sortBy||!p(t.sortBy)||void 0===i[0][t.sortBy])&&(t.sortBy="degree",g(e[0].degree))){var u=b(i.length,a,o);i.forEach((function(t,e){t.degree=u[e]}))}i.sort((function(e,n){return n[t.sortBy]-e[t.sortBy]})),t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);var s=t.rows,c=null!=t.cols?t.cols:t.columns;if(t.cells=n,null!=s&&null!=c?(t.rows=s,t.cols=c):null!=s&&null==c?(t.rows=s,t.cols=Math.ceil(t.cells/t.rows)):null==s&&null!=c?(t.cols=c,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.cols*t.rows>t.cells){var f=t.small(),l=t.large();(f-1)*l>=t.cells?t.small(f-1):(l-1)*f>=t.cells&&t.large(l-1)}else for(;t.cols*t.rows<t.cells;){var h=t.small(),d=t.large();(d+1)*h>=t.cells?t.large(d+1):t.small(h+1)}t.cellWidth=t.width/t.cols,t.cellHeight=t.height/t.rows,t.condense&&(t.cellWidth=0,t.cellHeight=0),t.preventOverlap&&i.forEach((function(e){var n,r;e.x&&e.y||(e.x=0,e.y=0),m(e.size)?(n=e.size[0],r=e.size[1]):y(e.size)&&(n=e.size,r=e.size),void 0!==n&&void 0!==r||(m(t.nodeSize)?(n=t.nodeSize[0],r=t.nodeSize[1]):y(t.nodeSize)?(n=t.nodeSize,r=t.nodeSize):(n=30,r=30));var o=t.preventOverlapPadding,i=n+o,a=r+o;t.cellWidth=Math.max(t.cellWidth,i),t.cellHeight=Math.max(t.cellHeight,a)})),t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(var v=0;v<i.length;v++){var _=i[v],x=void 0;if(t.position&&(x=t.position(_)),x&&(void 0!==x.row||void 0!==x.col)){var w={row:x.row,col:x.col};if(void 0===w.col)for(w.col=0;t.used(w.row,w.col);)w.col++;else if(void 0===w.row)for(w.row=0;t.used(w.row,w.col);)w.row++;t.id2manPos[_.id]=w,t.use(w.row,w.col)}t.getPos(_)}return t.onLayoutEnd&&t.onLayoutEnd(),{edges:o,nodes:i}}t.onLayoutEnd&&t.onLayoutEnd()}},{key:"small",value:function(t){var e,n=this.rows||5,r=this.cols||5;return null==t?e=Math.min(n,r):Math.min(n,r)===this.rows?this.rows=t:this.cols=t,e}},{key:"large",value:function(t){var e,n=this.rows||5,r=this.cols||5;return null==t?e=Math.max(n,r):Math.max(n,r)===this.rows?this.rows=t:this.cols=t,e}},{key:"used",value:function(t,e){return this.cellUsed["c-".concat(t,"-").concat(e)]||!1}},{key:"use",value:function(t,e){this.cellUsed["c-".concat(t,"-").concat(e)]=!0}},{key:"moveToNextCell",value:function(){var t=this.cols||5;this.col++,this.col>=t&&(this.col=0,this.row++)}},{key:"getPos",value:function(t){var e,n,r=this.begin,o=this.cellWidth,i=this.cellHeight,a=this.id2manPos[t.id];if(a)e=a.col*o+o/2+r[0],n=a.row*i+i/2+r[1];else{for(;this.used(this.row,this.col);)this.moveToNextCell();e=this.col*o+o/2+r[0],n=this.row*i+i/2+r[1],this.use(this.row,this.col),this.moveToNextCell()}t.x=e,t.y=n}},{key:"getType",value:function(){return"grid"}}])&&O(e.prototype,n),r&&O(e,r),i}(I);function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function L(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=B(t);if(e){var o=B(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return U(this,n)}}function U(t,e){return!e||"object"!==P(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}(i,t);var e,n,r,o=L(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).center=[0,0],e.width=300,e.height=300,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{center:[0,0],width:300,height:300}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=t.center;return t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),e&&e.forEach((function(e){e.x=.9*(Math.random()-.5)*t.width+n[0],e.y=.9*(Math.random()-.5)*t.height+n[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:this.edges}}},{key:"getType",value:function(){return"random"}}])&&G(e.prototype,n),r&&G(e,r),i}(I);function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function W(t,e){return(W=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function X(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=q(t);if(e){var o=q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return H(this,n)}}function H(t,e){return!e||"object"!==z(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Y=function(t,e){return t?y(t)?function(e){return t}:t:function(t){return e||1}},K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&W(t,e)}(i,t);var e,n,r,o=X(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.edgeStrength=200,e.nodeStrength=1e3,e.coulombDisScale=.005,e.damping=.9,e.maxSpeed=1e3,e.minMovement=.5,e.interval=.02,e.factor=1,e.linkDistance=1,e.gravity=10,e.preventOverlap=!0,e.tick=function(){},e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:500,gravity:10,enableTick:!0}}},{key:"execute",value:function(){var t=this,e=t.nodes;if(void 0!==t.timeInterval&&"undefined"!=typeof window&&window.clearInterval(t.timeInterval),e&&0!==e.length){t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var n=t.center;if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(t.onLayoutEnd&&t.onLayoutEnd());var r={},o={};e.forEach((function(e,n){y(e.x)||(e.x=Math.random()*t.width),y(e.y)||(e.y=Math.random()*t.height),r[e.id]=e,o[e.id]=n})),t.nodeMap=r,t.nodeIdxMap=o,t.linkDistance=Y(t.linkDistance,1),t.nodeStrength=Y(t.nodeStrength,1),t.edgeStrength=Y(t.edgeStrength,1);var i,a=t.nodeSize;if(t.preventOverlap){var u,s=t.nodeSpacing;u=y(s)?function(){return s}:T(s)?s:function(){return 0},i=a?m(a)?function(t){return(a[0]>a[1]?a[0]:a[1])+u(t)}:function(t){return a+u(t)}:function(t){return t.size?m(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])+u(t):t.size+u(t):10+u(t)}}t.nodeSize=i;var c=t.edges;t.degrees=b(e.length,t.nodeIdxMap,c),t.getMass||(t.getMass=function(e){return t.degrees[t.nodeIdxMap[e.id]]}),t.run()}else t.onLayoutEnd&&t.onLayoutEnd()}},{key:"run",value:function(){var t=this,e=t.nodes,n=t.edges,r=t.maxIteration;if("undefined"!=typeof window){var o=0;this.timeInterval=window.setInterval((function(){var i=[],a=[];if(e){e.forEach((function(t,e){i[2*e]=0,i[2*e+1]=0,a[2*e]=0,a[2*e+1]=0})),t.calRepulsive(i,e),n&&t.calAttractive(i,n),t.calGravity(i,e);var u=Math.max(.02,t.interval-.002*o);t.updateVelocity(i,a,u,e);var s=[];e.forEach((function(t){s.push({x:t.x,y:t.y})})),t.updatePosition(a,u,e),t.tick&&t.tick();var c=0;e.forEach((function(t,e){var n=t.x-s[e].x,r=t.y-s[e].y;c+=Math.sqrt(n*n+r*r)})),(c/=e.length)<t.minMovement&&(window.clearInterval(t.timeInterval),t.onLayoutEnd&&t.onLayoutEnd()),++o>r&&(window.clearInterval(t.timeInterval),t.onLayoutEnd&&t.onLayoutEnd())}}),0)}}},{key:"calRepulsive",value:function(t,e){var n=this.getMass,r=this.nodeStrength,o=this.factor,i=this.coulombDisScale,a=this.preventOverlap,u=this.nodeSize;e.forEach((function(s,c){var f=n?n(s):1;e.forEach((function(e,l){if(!(c>=l)){var h=s.x-e.x,d=s.y-e.y,p=Math.sqrt(h*h+d*d)+.01,v=(p+.1)*i,m=h/p,y=d/p,g=(r(s)+r(e))/2*o/(v*v),b=n?n(e):1;if(t[2*c]+=m*g/f,t[2*c+1]+=y*g/f,t[2*l]-=m*g/b,t[2*l+1]-=y*g/b,a&&p<(u(s)+u(e))/2){var _=(r(s)+r(e))/2/(p*p);t[2*c]+=m*_/f,t[2*c+1]+=y*_/f,t[2*l]-=m*_/b,t[2*l+1]-=y*_/b}}}))}))}},{key:"calAttractive",value:function(t,e){var n=this.nodeMap,r=this.nodeIdxMap,o=this.linkDistance,i=this.edgeStrength,a=this.getMass;e.forEach((function(e,u){var s=n[e.source],c=n[e.target],f=c.x-s.x,l=c.y-s.y,h=Math.sqrt(f*f+l*l)+.01,d=f/h,p=l/h,v=((o(e)||1)-h)*i(e),m=r[e.source],y=r[e.target],g=a?a(s):1,b=a?a(c):1;t[2*m]-=d*v/g,t[2*m+1]-=p*v/g,t[2*y]+=d*v/b,t[2*y+1]+=p*v/b}))}},{key:"calGravity",value:function(t,e){for(var n=this.center,r=this.gravity,o=this.degrees,i=e.length,a=0;a<i;a++){var u=e[a],s=u.x-n[0],c=u.y-n[1],f=r;if(this.getCenter){var l=this.getCenter(u,o[a]);l&&y(l[0])&&y(l[1])&&y(l[2])&&(s=u.x-l[0],c=u.y-l[1],f=l[2])}f&&(t[2*a]-=f*s,t[2*a+1]-=f*c)}}},{key:"updateVelocity",value:function(t,e,n,r){var o=this,i=n*o.damping;r.forEach((function(n,r){var a=t[2*r]*i||.01,u=t[2*r+1]*i||.01,s=Math.sqrt(a*a+u*u);if(s>o.maxSpeed){var c=o.maxSpeed/s;a*=c,u*=c}e[2*r]=a,e[2*r+1]=u}))}},{key:"updatePosition",value:function(t,e,n){n.forEach((function(n,r){var o=t[2*r]*e,i=t[2*r+1]*e;n.x+=o,n.y+=i}))}},{key:"stop",value:function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)}},{key:"destroy",value:function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0}},{key:"getType",value:function(){return"gForce"}}])&&V(e.prototype,n),r&&V(e,r),i}(I);function Z(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var o,i,a,u,s,c,f,l,h,d=t._root,p={data:r},v=t._x0,m=t._y0,y=t._x1,g=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=e>=(i=(v+y)/2))?v=i:y=i,(f=n>=(a=(m+g)/2))?m=a:g=a,o=d,!(d=d[l=f<<1|c]))return o[l]=p,t;if(u=+t._x.call(null,d.data),s=+t._y.call(null,d.data),e===u&&n===s)return p.next=d,o?o[l]=p:t._root=p,t;do{o=o?o[l]=new Array(4):t._root=new Array(4),(c=e>=(i=(v+y)/2))?v=i:y=i,(f=n>=(a=(m+g)/2))?m=a:g=a}while((l=f<<1|c)==(h=(s>=a)<<1|u>=i));return o[h]=d,o[l]=p,t}var Q=function(t,e,n,r,o){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=o};function J(t){return t[0]}function $(t){return t[1]}function tt(t,e,n){var r=new et(null==e?J:e,null==n?$:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function et(t,e,n,r,o,i){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=o,this._y1=i,this._root=void 0}function nt(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var rt=tt.prototype=et.prototype;rt.copy=function(){var t,e,n=new et(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=nt(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var o=0;o<4;++o)(e=r.source[o])&&(e.length?t.push({source:e,target:r.target[o]=new Array(4)}):r.target[o]=nt(e));return n},rt.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Z(this.cover(e,n),e,n,t)},rt.addAll=function(t){var e,n,r,o,i=t.length,a=new Array(i),u=new Array(i),s=1/0,c=1/0,f=-1/0,l=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(a[n]=r,u[n]=o,r<s&&(s=r),r>f&&(f=r),o<c&&(c=o),o>l&&(l=o));if(s>f||c>l)return this;for(this.cover(s,c).cover(f,l),n=0;n<i;++n)Z(this,a[n],u[n],t[n]);return this},rt.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,o=this._x1,i=this._y1;if(isNaN(n))o=(n=Math.floor(t))+1,i=(r=Math.floor(e))+1;else{for(var a,u,s=o-n||1,c=this._root;n>t||t>=o||r>e||e>=i;)switch(u=(e<r)<<1|t<n,(a=new Array(4))[u]=c,c=a,s*=2,u){case 0:o=n+s,i=r+s;break;case 1:n=o-s,i=r+s;break;case 2:o=n+s,r=i-s;break;case 3:n=o-s,r=i-s}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=o,this._y1=i,this},rt.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},rt.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},rt.find=function(t,e,n){var r,o,i,a,u,s,c,f=this._x0,l=this._y0,h=this._x1,d=this._y1,p=[],v=this._root;for(v&&p.push(new Q(v,f,l,h,d)),null==n?n=1/0:(f=t-n,l=e-n,h=t+n,d=e+n,n*=n);s=p.pop();)if(!(!(v=s.node)||(o=s.x0)>h||(i=s.y0)>d||(a=s.x1)<f||(u=s.y1)<l))if(v.length){var m=(o+a)/2,y=(i+u)/2;p.push(new Q(v[3],m,y,a,u),new Q(v[2],o,y,m,u),new Q(v[1],m,i,a,y),new Q(v[0],o,i,m,y)),(c=(e>=y)<<1|t>=m)&&(s=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=s)}else{var g=t-+this._x.call(null,v.data),b=e-+this._y.call(null,v.data),_=g*g+b*b;if(_<n){var x=Math.sqrt(n=_);f=t-x,l=e-x,h=t+x,d=e+x,r=v.data}}return r},rt.remove=function(t){if(isNaN(i=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,o,i,a,u,s,c,f,l,h,d=this._root,p=this._x0,v=this._y0,m=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((c=i>=(u=(p+m)/2))?p=u:m=u,(f=a>=(s=(v+y)/2))?v=s:y=s,e=d,!(d=d[l=f<<1|c]))return this;if(!d.length)break;(e[l+1&3]||e[l+2&3]||e[l+3&3])&&(n=e,h=l)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(o=d.next)&&delete d.next,r?(o?r.next=o:delete r.next,this):e?(o?e[l]=o:delete e[l],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=o,this)},rt.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},rt.root=function(){return this._root},rt.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},rt.visit=function(t){var e,n,r,o,i,a,u=[],s=this._root;for(s&&u.push(new Q(s,this._x0,this._y0,this._x1,this._y1));e=u.pop();)if(!t(s=e.node,r=e.x0,o=e.y0,i=e.x1,a=e.y1)&&s.length){var c=(r+i)/2,f=(o+a)/2;(n=s[3])&&u.push(new Q(n,c,f,i,a)),(n=s[2])&&u.push(new Q(n,r,f,c,a)),(n=s[1])&&u.push(new Q(n,c,o,i,f)),(n=s[0])&&u.push(new Q(n,r,o,c,f))}return this},rt.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Q(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var o=e.node;if(o.length){var i,a=e.x0,u=e.y0,s=e.x1,c=e.y1,f=(a+s)/2,l=(u+c)/2;(i=o[0])&&n.push(new Q(i,a,u,f,l)),(i=o[1])&&n.push(new Q(i,f,u,s,l)),(i=o[2])&&n.push(new Q(i,a,l,f,c)),(i=o[3])&&n.push(new Q(i,f,l,s,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},rt.x=function(t){return arguments.length?(this._x=t,this):this._x},rt.y=function(t){return arguments.length?(this._y=t,this):this._y};var ot=function(t){return function(){return t}},it=function(t){return 1e-6*(t()-.5)},at={value:function(){}};function ut(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new st(r)}function st(t){this._=t}function ct(t,e){return t.trim().split(/^|\\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function ft(t,e){for(var n,r=0,o=t.length;r<o;++r)if((n=t[r]).name===e)return n.value}function lt(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=at,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}st.prototype=ut.prototype={constructor:st,on:function(t,e){var n,r=this._,o=ct(t+"",r),i=-1,a=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++i<a;)if(n=(t=o[i]).type)r[n]=lt(r[n],t.name,e);else if(null==e)for(n in r)r[n]=lt(r[n],t.name,null);return this}for(;++i<a;)if((n=(t=o[i]).type)&&(n=ft(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new st(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,n=(r=this._[t]).length;i<n;++i)r[i].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(e,n)}};var ht=ut;function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var pt,vt,mt=0,yt=0,gt=0,bt=0,_t=0,xt=0,wt="object"===("undefined"==typeof performance?"undefined":dt(performance))&&performance.now?performance:Date,Et="object"===("undefined"==typeof window?"undefined":dt(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function St(){return _t||(Et(Tt),_t=wt.now()+xt)}function Tt(){_t=0}function At(){this._call=this._time=this._next=null}function It(t,e,n){var r=new At;return r.restart(t,e,n),r}function kt(){_t=(bt=wt.now())+xt,mt=yt=0;try{!function(){St(),++mt;for(var t,e=pt;e;)(t=_t-e._time)>=0&&e._call.call(null,t),e=e._next;--mt}()}finally{mt=0,function(){var t,e,n=pt,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:pt=e);vt=t,Dt(r)}(),_t=0}}function Ot(){var t=wt.now(),e=t-bt;e>1e3&&(xt-=e,bt=t)}function Dt(t){mt||(yt&&(yt=clearTimeout(yt)),t-_t>24?(t<1/0&&(yt=setTimeout(kt,t-wt.now()-xt)),gt&&(gt=clearInterval(gt))):(gt||(bt=wt.now(),gt=setInterval(Ot,1e3)),mt=1,Et(kt)))}At.prototype=It.prototype={constructor:At,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?St():+n)+(null==e?0:+e),this._next||vt===this||(vt?vt._next=this:pt=this,vt=this),this._call=t,this._time=n,Dt()},stop:function(){this._call&&(this._call=null,this._time=1/0,Dt())}};function Rt(t){return t.x}function Mt(t){return t.y}var Ct=Math.PI*(3-Math.sqrt(5)),Nt=function(t){var e,n,r=1,o=.001,i=1-Math.pow(o,1/300),a=0,u=.6,s=new Map,c=It(h),f=ht("tick","end"),l=(n=1,function(){return(n=(1664525*n+1013904223)%4294967296)/4294967296});function h(){d(),f.call("tick",e),r<o&&(c.stop(),f.call("end",e))}function d(n){var o,c,f=t.length;void 0===n&&(n=1);for(var l=0;l<n;++l)for(r+=(a-r)*i,s.forEach((function(t){t(r)})),o=0;o<f;++o)null==(c=t[o]).fx?c.x+=c.vx*=u:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=u:(c.y=c.fy,c.vy=0);return e}function p(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var o=10*Math.sqrt(.5+n),i=n*Ct;e.x=o*Math.cos(i),e.y=o*Math.sin(i)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function v(e){return e.initialize&&e.initialize(t,l),e}return null==t&&(t=[]),p(),e={tick:d,restart:function(){return c.restart(h),e},stop:function(){return c.stop(),e},nodes:function(n){return arguments.length?(t=n,p(),s.forEach(v),e):t},alpha:function(t){return arguments.length?(r=+t,e):r},alphaMin:function(t){return arguments.length?(o=+t,e):o},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(u=1-t,e):1-u},randomSource:function(t){return arguments.length?(l=t,s.forEach(v),e):l},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,v(n)),e):s.get(t)},find:function(e,n,r){var o,i,a,u,s,c=0,f=t.length;for(null==r?r=1/0:r*=r,c=0;c<f;++c)(a=(o=e-(u=t[c]).x)*o+(i=n-u.y)*i)<r&&(s=u,r=a);return s},on:function(t,n){return arguments.length>1?(f.on(t,n),e):f.on(t)}}},Pt=function(){var t,e,n,r,o,i=ot(-30),a=1,u=1/0,s=.81;function c(n){var o,i=t.length,a=tt(t,Rt,Mt).visitAfter(l);for(r=n,o=0;o<i;++o)e=t[o],a.visit(h)}function f(){if(t){var e,n,r=t.length;for(o=new Array(r),e=0;e<r;++e)n=t[e],o[n.index]=+i(n,e,t)}}function l(t){var e,n,r,i,a,u=0,s=0;if(t.length){for(r=i=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(u+=e.value,s+=n,r+=n*e.x,i+=n*e.y);t.x=r/s,t.y=i/s}else{(e=t).x=e.data.x,e.y=e.data.y;do{u+=o[e.data.index]}while(e=e.next)}t.value=u}function h(t,i,c,f){if(!t.value)return!0;var l=t.x-e.x,h=t.y-e.y,d=f-i,p=l*l+h*h;if(d*d/s<p)return p<u&&(0===l&&(p+=(l=it(n))*l),0===h&&(p+=(h=it(n))*h),p<a&&(p=Math.sqrt(a*p)),e.vx+=l*t.value*r/p,e.vy+=h*t.value*r/p),!0;if(!(t.length||p>=u)){(t.data!==e||t.next)&&(0===l&&(p+=(l=it(n))*l),0===h&&(p+=(h=it(n))*h),p<a&&(p=Math.sqrt(a*p)));do{t.data!==e&&(d=o[t.data.index]*r/p,e.vx+=l*d,e.vy+=h*d)}while(t=t.next)}}return c.initialize=function(e,r){t=e,n=r,f()},c.strength=function(t){return arguments.length?(i="function"==typeof t?t:ot(+t),f(),c):i},c.distanceMin=function(t){return arguments.length?(a=t*t,c):Math.sqrt(a)},c.distanceMax=function(t){return arguments.length?(u=t*t,c):Math.sqrt(u)},c.theta=function(t){return arguments.length?(s=t*t,c):Math.sqrt(s)},c};function Gt(t){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t){return t.index}function Lt(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}var Ut=function(t){var e,n,r,o,i,a,u=jt,s=function(t){return 1/Math.min(o[t.source.index],o[t.target.index])},c=ot(30),f=1;function l(r){for(var o=0,u=t.length;o<f;++o)for(var s,c,l,h,d,p,v,m=0;m<u;++m)c=(s=t[m]).source,h=(l=s.target).x+l.vx-c.x-c.vx||it(a),d=l.y+l.vy-c.y-c.vy||it(a),h*=p=((p=Math.sqrt(h*h+d*d))-n[m])/p*r*e[m],d*=p,l.vx-=h*(v=i[m]),l.vy-=d*v,c.vx+=h*(v=1-v),c.vy+=d*v}function h(){if(r){var a,s,c=r.length,f=t.length,l=new Map(r.map((function(t,e){return[u(t,e,r),t]})));for(a=0,o=new Array(c);a<f;++a)(s=t[a]).index=a,"object"!==Gt(s.source)&&(s.source=Lt(l,s.source)),"object"!==Gt(s.target)&&(s.target=Lt(l,s.target)),o[s.source.index]=(o[s.source.index]||0)+1,o[s.target.index]=(o[s.target.index]||0)+1;for(a=0,i=new Array(f);a<f;++a)s=t[a],i[a]=o[s.source.index]/(o[s.source.index]+o[s.target.index]);e=new Array(f),d(),n=new Array(f),p()}}function d(){if(r)for(var n=0,o=t.length;n<o;++n)e[n]=+s(t[n],n,t)}function p(){if(r)for(var e=0,o=t.length;e<o;++e)n[e]=+c(t[e],e,t)}return null==t&&(t=[]),l.initialize=function(t,e){r=t,a=e,h()},l.links=function(e){return arguments.length?(t=e,h(),l):t},l.id=function(t){return arguments.length?(u=t,l):u},l.iterations=function(t){return arguments.length?(f=+t,l):f},l.strength=function(t){return arguments.length?(s="function"==typeof t?t:ot(+t),d(),l):s},l.distance=function(t){return arguments.length?(c="function"==typeof t?t:ot(+t),p(),l):c},l};function Bt(t){return t.x+t.vx}function Ft(t){return t.y+t.vy}var zt=function(t){var e,n,r,o=1,i=1;function a(){for(var t,a,s,c,f,l,h,d=e.length,p=0;p<i;++p)for(a=tt(e,Bt,Ft).visitAfter(u),t=0;t<d;++t)s=e[t],l=n[s.index],h=l*l,c=s.x+s.vx,f=s.y+s.vy,a.visit(v);function v(t,e,n,i,a){var u=t.data,d=t.r,p=l+d;if(!u)return e>c+p||i<c-p||n>f+p||a<f-p;if(u.index>s.index){var v=c-u.x-u.vx,m=f-u.y-u.vy,y=v*v+m*m;y<p*p&&(0===v&&(y+=(v=it(r))*v),0===m&&(y+=(m=it(r))*m),y=(p-(y=Math.sqrt(y)))/y*o,s.vx+=(v*=y)*(p=(d*=d)/(h+d)),s.vy+=(m*=y)*p,u.vx-=v*(p=1-p),u.vy-=m*p)}}}function u(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var r,o,i=e.length;for(n=new Array(i),r=0;r<i;++r)o=e[r],n[o.index]=+t(o,r,e)}}return"function"!=typeof t&&(t=ot(null==t?1:+t)),a.initialize=function(t,n){e=t,r=n,s()},a.iterations=function(t){return arguments.length?(i=+t,a):i},a.strength=function(t){return arguments.length?(o=+t,a):o},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:ot(+e),s(),a):t},a};function Vt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Wt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xt(){function t(t){return function(){return t}}var e,n=function(t){return t.cluster},r=t(1),o=t(-1),i=t(100),a=t(.1),u=[0,0],s=[],c={},f=[],l=100,h=100,d={none:{x:0,y:0}},p=[],v="force",m=!0,y=.1;function g(t){if(!m)return g;e.tick(),_();for(var r,o=0,i=s.length,a=t*y;o<i;++o)(r=s[o]).vx+=(d[n(r)].x-r.x)*a,r.vy+=(d[n(r)].y-r.y)*a}function b(){s&&function(){if(!s||!s.length)return;if(void 0===n(s[0]))throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var t=(d=[],v=[],m={},y=[],u=function(t){var e={};return t.forEach((function(t){var r=n(t);e[r]||(e[r]={count:0,sumforceNodeSize:0})})),t.forEach((function(t){var o=n(t),i=r(t),a=e[o];a.count=a.count+1,a.sumforceNodeSize=a.sumforceNodeSize+Math.PI*(i*i)*1.3,e[o]=a})),e}(s),y=function(t){var e={},r=[];return t.forEach((function(t){var r=function(t){var e=n(c[t.source]),r=n(c[t.target]);return e<=r?"".concat(e,"~").concat(r):"".concat(r,"~").concat(e)}(t),o=0;void 0!==e[r]&&(o=e[r]),o+=1,e[r]=o})),Object.entries(e).forEach((function(t){var e=Vt(t,2),n=e[0],o=e[1],i=n.split("~")[0],a=n.split("~")[1];void 0!==i&&void 0!==a&&r.push({source:i,target:a,count:o})})),r}(f),Object.keys(u).forEach((function(t,e){var n=u[t];d.push({id:t,size:n.count,r:Math.sqrt(n.sumforceNodeSize/Math.PI)}),m[t]=e})),y.forEach((function(t){var e=m[t.source],n=m[t.target];void 0!==e&&void 0!==n&&v.push({source:e,target:n,count:t.count})})),{nodes:d,links:v});var u,d,v,m,y;e=Nt(t.nodes).force("x",function(t){var e,n,r,o=ot(.1);function i(t){for(var o,i=0,a=e.length;i<a;++i)(o=e[i]).vx+=(r[i]-o.x)*n[i]*t}function a(){if(e){var i,a=e.length;for(n=new Array(a),r=new Array(a),i=0;i<a;++i)n[i]=isNaN(r[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=ot(null==t?0:+t)),i.initialize=function(t){e=t,a()},i.strength=function(t){return arguments.length?(o="function"==typeof t?t:ot(+t),a(),i):o},i.x=function(e){return arguments.length?(t="function"==typeof e?e:ot(+e),a(),i):t},i}(l).strength(.1)).force("y",function(t){var e,n,r,o=ot(.1);function i(t){for(var o,i=0,a=e.length;i<a;++i)(o=e[i]).vy+=(r[i]-o.y)*n[i]*t}function a(){if(e){var i,a=e.length;for(n=new Array(a),r=new Array(a),i=0;i<a;++i)n[i]=isNaN(r[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=ot(null==t?0:+t)),i.initialize=function(t){e=t,a()},i.strength=function(t){return arguments.length?(o="function"==typeof t?t:ot(+t),a(),i):o},i.y=function(e){return arguments.length?(t="function"==typeof e?e:ot(+e),a(),i):t},i}(h).strength(.1)).force("collide",zt((function(t){return t.r})).iterations(4)).force("charge",Pt().strength(o)).force("links",Ut(t.nodes.length?t.links:[]).distance(i).strength(a)),p=e.nodes(),_()}()}function _(){return d={none:{x:0,y:0}},p.forEach((function(t){d[t.id]={x:t.x-u[0],y:t.y-u[1]}})),d}function x(t){c={},t.forEach((function(t){c[t.id]=t}))}return g.initialize=function(t){s=t,b()},g.template=function(t){return arguments.length?(v=t,b(),g):v},g.groupBy=function(t){return arguments.length?"string"==typeof t?(n=function(e){return e[t]},g):(n=t,g):n},g.enableGrouping=function(t){return arguments.length?(m=t,g):m},g.strength=function(t){return arguments.length?(y=t,g):y},g.centerX=function(t){return arguments.length?(l=t,g):l},g.centerY=function(t){return arguments.length?(h=t,g):h},g.nodes=function(t){return arguments.length?(x(t||[]),s=t||[],g):s},g.links=function(t){return arguments.length?(f=t||[],b(),g):f},g.forceNodeSize=function(e){return arguments.length?(r="function"==typeof e?e:t(+e),b(),g):r},g.nodeSize=g.forceNodeSize,g.forceCharge=function(e){return arguments.length?(o="function"==typeof e?e:t(+e),b(),g):o},g.forceLinkDistance=function(e){return arguments.length?(i="function"==typeof e?e:t(+e),b(),g):i},g.forceLinkStrength=function(e){return arguments.length?(a="function"==typeof e?e:t(+e),b(),g):a},g.offset=function(t){return arguments.length?(u=t,g):u},g.getFocis=_,g}var Ht="LAYOUT_RUN",qt="LAYOUT_END",Yt="LAYOUT_ERROR",Kt="LAYOUT_TICK",Zt="GPU_LAYOUT_RUN",Qt="GPU_LAYOUT_END";function Jt(t){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function te(t,e){return(te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ee(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=re(t);if(e){var o=re(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ne(this,n)}}function ne(t,e){return!e||"object"!==Jt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function re(t){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var oe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&te(t,e)}(i,t);var e,n,r,o=ee(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).center=[0,0],e.nodeStrength=null,e.edgeStrength=null,e.preventOverlap=!1,e.clusterNodeStrength=null,e.clusterEdgeStrength=null,e.clusterEdgeDistance=null,e.clusterNodeSize=null,e.clusterFociStrength=null,e.linkDistance=50,e.alphaDecay=.028,e.alphaMin=.001,e.alpha=.3,e.collideStrength=1,e.workerEnabled=!1,e.tick=function(){},e.onLayoutEnd=function(){},e.ticking=void 0,t&&e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}}},{key:"init",value:function(t){this.nodes=t.nodes||[];var e=t.edges||[];this.edges=e.map((function(t){var e={},n=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(t).forEach((function(r){n.indexOf(r)>-1||(e[r]=t[r])})),e})),this.ticking=!1}},{key:"execute",value:function(t){var e=this,n=e.nodes,r=e.edges;if(!e.ticking){var o=e.forceSimulation,i=e.alphaMin,a=e.alphaDecay,u=e.alpha;if(o){if(t)if(e.clustering&&e.clusterForce&&(e.clusterForce.nodes(n),e.clusterForce.links(r)),o.nodes(n),r&&e.edgeForce)e.edgeForce.links(r);else if(r&&!e.edgeForce){var s=Ut().id((function(t){return t.id})).links(r);e.edgeStrength&&s.strength(e.edgeStrength),e.linkDistance&&s.distance(e.linkDistance),e.edgeForce=s,o.force("link",s)}e.preventOverlap&&e.overlapProcess(o),o.alpha(u).restart(),this.ticking=!0}else try{var c=Pt();if(e.nodeStrength&&c.strength(e.nodeStrength),o=Nt().nodes(n),e.clustering){var f=Xt();f.centerX(e.center[0]).centerY(e.center[1]).template("force").strength(e.clusterFociStrength),r&&f.links(r),n&&f.nodes(n),f.forceLinkDistance(e.clusterEdgeDistance).forceLinkStrength(e.clusterEdgeStrength).forceCharge(e.clusterNodeStrength).forceNodeSize(e.clusterNodeSize),e.clusterForce=f,o.force("group",f)}if(o.force("center",function(t,e){var n,r=1;function o(){var o,i,a=n.length,u=0,s=0;for(o=0;o<a;++o)u+=(i=n[o]).x,s+=i.y;for(u=(u/a-t)*r,s=(s/a-e)*r,o=0;o<a;++o)(i=n[o]).x-=u,i.y-=s}return null==t&&(t=0),null==e&&(e=0),o.initialize=function(t){n=t},o.x=function(e){return arguments.length?(t=+e,o):t},o.y=function(t){return arguments.length?(e=+t,o):e},o.strength=function(t){return arguments.length?(r=+t,o):r},o}(e.center[0],e.center[1])).force("charge",c).alpha(u).alphaDecay(a).alphaMin(i),e.preventOverlap&&e.overlapProcess(o),r){var l=Ut().id((function(t){return t.id})).links(r);e.edgeStrength&&l.strength(e.edgeStrength),e.linkDistance&&l.distance(e.linkDistance),e.edgeForce=l,o.force("link",l)}if(e.workerEnabled&&!ie()&&(e.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),e.workerEnabled){o.stop();for(var h=function(t){var e=t.alphaMin(),n=t.alphaTarget(),r=t.alpha(),o=Math.log((e-n)/(r-n))/Math.log(1-t.alphaDecay());return Math.ceil(o)}(o),d=1;d<=h;d++)o.tick(),postMessage({nodes:n,currentTick:d,totalTicks:h,type:Kt},void 0);e.ticking=!1}else o.on("tick",(function(){e.tick()})).on("end",(function(){e.ticking=!1,e.onLayoutEnd&&e.onLayoutEnd()})),e.ticking=!0;e.forceSimulation=o,e.ticking=!0}catch(t){e.ticking=!1,console.warn(t)}}}},{key:"overlapProcess",value:function(t){var e,n,r=this.nodeSize,o=this.nodeSpacing,i=this.collideStrength;if(n=y(o)?function(){return o}:T(o)?o:function(){return 0},r)if(T(r))e=function(t){return r(t)+n(t)};else if(m(r)){var a=(r[0]>r[1]?r[0]:r[1])/2;e=function(t){return a+n(t)}}else if(y(r)){var u=r/2;e=function(t){return u+n(t)}}else e=function(){return 10};else e=function(t){return t.size?m(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2+n(t):t.size/2+n(t):10+n(t)};t.force("collisionForce",zt(e).strength(i))}},{key:"updateCfg",value:function(t){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.forceSimulation=null,Object.assign(this,t)}},{key:"destroy",value:function(){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.nodes=null,this.edges=null,this.destroyed=!0}}])&&$t(e.prototype,n),r&&$t(e,r),i}(I);function ie(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}function ae(t){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function se(t,e){return(se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ce(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=le(t);if(e){var o=le(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fe(this,n)}}function fe(t,e){return!e||"object"!==ae(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function le(t){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function he(t,e,n,r){t.forEach((function(e,n){t[n].children=[],t[n].parent=[]})),r?e.forEach((function(e){var r=0;e.source&&(r=n[e.source]);var o=0;e.target&&(o=n[e.target]);var i=t[r].children,a=t[o].parent;i.push(t[o].id),a.push(t[r].id)})):e.forEach((function(e){var r=0;e.source&&(r=n[e.source]);var o=0;e.target&&(o=n[e.target]);var i=t[r].children,a=t[o].children;i.push(t[o].id),a.push(t[r].id)}))}function de(t,e,n){for(var r=n.length,o=0;o<r;o++)if(t.id===n[o].source&&e.id===n[o].target||e.id===n[o].source&&t.id===n[o].target)return!0;return!1}function pe(t,e){var n=t.degree,r=e.degree;return n<r?-1:n>r?1:0}var ve=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&se(t,e)}(i,t);var e,n,r,o=ce(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).radius=null,e.startRadius=null,e.endRadius=null,e.startAngle=0,e.endAngle=2*Math.PI,e.clockwise=!0,e.divisions=1,e.ordering=null,e.angleRatio=1,e.nodes=[],e.edges=[],e.nodeMap={},e.degrees=[],e.width=300,e.height=300,e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}},{key:"execute",value:function(){var t=this.nodes,e=this.edges,n=t.length;if(0!==n){this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var r=this.center;if(1===n)return t[0].x=r[0],t[0].y=r[1],void(this.onLayoutEnd&&this.onLayoutEnd());var o=this.radius,i=this.startRadius,a=this.endRadius,u=this.divisions,s=this.startAngle,c=this.endAngle,f=(c-s)/n,l={};t.forEach((function(t,e){l[t.id]=e})),this.nodeMap=l;var h=b(t.length,l,e);this.degrees=h,o||i||a?!i&&a?i=a:i&&!a&&(a=i):o=this.height>this.width?this.width/2:this.height/2;var d=f*this.angleRatio,p=this.ordering,v=[];v="topology"===p?this.topologyOrdering():"topology-directed"===p?this.topologyOrdering(!0):"degree"===p?this.degreeOrdering():t;for(var m=this.clockwise,y=Math.ceil(n/u),g=0;g<n;++g){var _=o;_||null===i||null===a||(_=i+g*(a-i)/(n-1)),_||(_=10+100*g/(n-1));var x=s+g%y*d+2*Math.PI/u*Math.floor(g/y);m||(x=c-g%y*d-2*Math.PI/u*Math.floor(g/y)),v[g].x=r[0]+Math.cos(x)*_,v[g].y=r[1]+Math.sin(x)*_,v[g].weight=h[g]}return this.onLayoutEnd&&this.onLayoutEnd(),{nodes:v,edges:this.edges}}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"topologyOrdering",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this,n=e.degrees,r=e.edges,o=e.nodes,i=S(o),a=e.nodeMap,u=[i[0]],s=[o[0]],c=[],f=o.length;c[0]=!0,he(i,r,a,t);var l=0;return i.forEach((function(t,e){if(0!==e)if(e!==f-1&&n[e]===n[e+1]&&!de(u[l],t,r)||c[e]){for(var h=u[l].children,d=!1,p=0;p<h.length;p++){var v=a[h[p]];if(n[v]===n[e]&&!c[v]){u.push(i[v]),s.push(o[a[i[v].id]]),c[v]=!0,d=!0;break}}for(var m=0;!d&&(c[m]||(u.push(i[m]),s.push(o[a[i[m].id]]),c[m]=!0,d=!0),++m!==f););}else u.push(t),s.push(o[a[t.id]]),c[e]=!0,l++})),s}},{key:"degreeOrdering",value:function(){var t=this.nodes,e=[],n=this.degrees;return t.forEach((function(t,r){t.degree=n[r],e.push(t)})),e.sort(pe),e}},{key:"getType",value:function(){return"circular"}}])&&ue(e.prototype,n),r&&ue(e,r),i}(I),me=n(102),ye=n.n(me);function ge(t){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _e(t,e){return(_e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ee(t);if(e){var o=Ee(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return we(this,n)}}function we(t,e){return!e||"object"!==ge(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ee(t){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Se=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_e(t,e)}(i,t);var e,n,r,o=xe(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).rankdir="TB",e.nodesep=50,e.ranksep=50,e.controlPoints=!1,e.sortByCombo=!1,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=t.nodeSize,r=t.rankdir;if(e){var o,i=t.edges||[],a=new ye.a.graphlib.Graph;o=n?m(n)?function(){return n}:function(){return[n,n]}:function(t){return t.size?m(t.size)?t.size:[t.size,t.size]:[40,40]};var u,s=Te(t.nodesepFunc,t.nodesep,50),c=Te(t.ranksepFunc,t.ranksep,50);return"LR"!==r&&"RL"!==r||(s=Te(t.ranksepFunc,t.ranksep,50),c=Te(t.nodesepFunc,t.nodesep,50)),a.setDefaultEdgeLabel((function(){return{}})),a.setGraph(t),e.forEach((function(t){var e=o(t),n=c(t),r=s(t),i=e[0]+2*r,u=e[1]+2*n;a.setNode(t.id,{width:i,height:u})})),i.forEach((function(t){a.setEdge(t.source,t.target,{weight:t.weight||1})})),ye.a.layout(a),a.nodes().forEach((function(t){u=a.node(t);var n=e.findIndex((function(e){return e.id===t}));e[n].x=u.x,e[n].y=u.y})),a.edges().forEach((function(e){u=a.edge(e);var n=i.findIndex((function(t){return t.source===e.v&&t.target===e.w}));t.controlPoints&&"loop"!==i[n].type&&(i[n].controlPoints=u.points.slice(1,u.points.length-1))})),t.sortByCombo&&t.sortLevel("comboId"),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:i}}}},{key:"sortLevel",value:function(t){var e=this,n=e.nodes,r={};n.forEach((function(t){r[t.y]||(r[t.y]={y:t.y,nodes:[]}),r[t.y].nodes.push(t)})),Object.keys(r).forEach((function(n){var o=r[n].nodes,i=o.length,a={};if(o.forEach((function(t){var e=t.comboId;a[e]||(a[e]={x:0,y:0,count:0}),a[e].x+=t.x,a[e].y+=t.y,a[e].count++})),Object.keys(a).forEach((function(t){a[t].x/=a[t].count,a[t].y/=a[t].count})),1!==i){var u=o.sort((function(t,e){return t.x-e.x})),s=u[0].x,c=(u[i-1].x-s)/(i-1);o.sort((function(e,n){var r=e[t]||"undefined",o=n[t]||"undefined";return r<o?-1:r>o?1:0})).forEach((function(t,e){t.x=s+e*c}))}else e.onLayoutEnd&&e.onLayoutEnd()}))}},{key:"getType",value:function(){return"dagre"}}])&&be(e.prototype,n),r&&be(e,r),i}(I);function Te(t,e,n){return t||(y(e)?function(){return e}:function(){return n})}var Ae=Object.prototype.toString;function Ie(t){return Ae.call(t).endsWith("Array]")}var ke=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ie(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,r=void 0===n?0:n,o=e.toIndex,i=void 0===o?t.length:o;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=r||i>t.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[r],u=r+1;u<i;u++)t[u]>a&&(a=t[u]);return a};var Oe=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ie(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,r=void 0===n?0:n,o=e.toIndex,i=void 0===o?t.length:o;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=r||i>t.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[r],u=r+1;u<i;u++)t[u]<a&&(a=t[u]);return a};var De=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ie(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!Ie(n.output))throw new TypeError("output option must be an array if specified");e=n.output}else e=new Array(t.length);var r=Oe(t),o=ke(t);if(r===o)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var i=n.min,a=void 0===i?n.autoMinMax?r:0:i,u=n.max,s=void 0===u?n.autoMinMax?o:1:u;if(a>=s)throw new RangeError("min option must be smaller than max option");for(var c=(s-a)/(o-r),f=0;f<t.length;f++)e[f]=(t[f]-r)*c+a;return e},Re=" ".repeat(2),Me=" ".repeat(4);function Ce(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.maxRows,r=void 0===n?15:n,o=e.maxColumns,i=void 0===o?10:o,a=e.maxNumSize,u=void 0===a?8:a;return"".concat(t.constructor.name," {\\n").concat(Re,"[\\n").concat(Me).concat(Ne(t,r,i,u),"\\n").concat(Re,"]\\n").concat(Re,"rows: ").concat(t.rows,"\\n").concat(Re,"columns: ").concat(t.columns,"\\n}")}function Ne(t,e,n,r){for(var o=t.rows,i=t.columns,a=Math.min(o,e),u=Math.min(i,n),s=[],c=0;c<a;c++){for(var f=[],l=0;l<u;l++)f.push(Pe(t.get(c,l),r));s.push("".concat(f.join(" ")))}return u!==i&&(s[s.length-1]+=" ... ".concat(i-n," more columns")),a!==o&&s.push("... ".concat(o-e," more rows")),s.join("\\n".concat(Me))}function Pe(t,e){var n=String(t);if(n.length<=e)return n.padEnd(e," ");var r=t.toPrecision(e-2);if(r.length<=e)return r;var o=t.toExponential(e-2),i=o.indexOf("e"),a=o.slice(i);return o.slice(0,e-a.length)+a}function Ge(t){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function je(t,e,n){var r=n?t.rows:t.rows-1;if(e<0||e>r)throw new RangeError("Row index out of range")}function Le(t,e,n){var r=n?t.columns:t.columns-1;if(e<0||e>r)throw new RangeError("Column index out of range")}function Ue(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function Be(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function Fe(t,e){if("object"!==Ge(e))throw new TypeError("unexpected type for row indices");if(e.some((function(e){return e<0||e>=t.rows})))throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function ze(t,e){if("object"!==Ge(e))throw new TypeError("unexpected type for column indices");if(e.some((function(e){return e<0||e>=t.columns})))throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function Ve(t,e,n,r,o){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(Xe("startRow",e),Xe("endRow",n),Xe("startColumn",r),Xe("endColumn",o),e>n||r>o||e<0||e>=t.rows||n<0||n>=t.rows||r<0||r>=t.columns||o<0||o>=t.columns)throw new RangeError("Submatrix indices are out of range")}function We(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=0;r<t;r++)n.push(e);return n}function Xe(t,e){if("number"!=typeof e)throw new TypeError("".concat(t," must be a number"))}function He(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}function qe(t,e,n){for(var r=t.rows,o=t.columns,i=[],a=0;a<r;a++){for(var u=0,s=0,c=0,f=0;f<o;f++)u+=c=t.get(a,f)-n[a],s+=c*c;e?i.push((s-u*u/o)/(o-1)):i.push((s-u*u/o)/o)}return i}function Ye(t,e,n){for(var r=t.rows,o=t.columns,i=[],a=0;a<o;a++){for(var u=0,s=0,c=0,f=0;f<r;f++)u+=c=t.get(f,a)-n[a],s+=c*c;e?i.push((s-u*u/r)/(r-1)):i.push((s-u*u/r)/r)}return i}function Ke(t,e,n){for(var r=t.rows,o=t.columns,i=r*o,a=0,u=0,s=0,c=0;c<r;c++)for(var f=0;f<o;f++)a+=s=t.get(c,f)-n,u+=s*s;return e?(u-a*a/i)/(i-1):(u-a*a/i)/i}function Ze(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[n])}function Qe(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[r])}function Je(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e)}function $e(t){for(var e=[],n=0;n<t.rows;n++){for(var r=0,o=0;o<t.columns;o++)r+=Math.pow(t.get(n,o),2)/(t.columns-1);e.push(Math.sqrt(r))}return e}function tn(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[n])}function en(t){for(var e=[],n=0;n<t.columns;n++){for(var r=0,o=0;o<t.rows;o++)r+=Math.pow(t.get(o,n),2)/(t.rows-1);e.push(Math.sqrt(r))}return e}function nn(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[r])}function rn(t){for(var e=t.size-1,n=0,r=0;r<t.columns;r++)for(var o=0;o<t.rows;o++)n+=Math.pow(t.get(o,r),2)/e;return Math.sqrt(n)}function on(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e)}function an(t,e){return(an=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function un(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=cn(t);if(e){var o=cn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return sn(this,n)}}function sn(t,e){return!e||"object"!==fn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cn(t){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fn(t){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ln(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dn(t,e,n){return e&&hn(t.prototype,e),n&&hn(t,n),t}var pn=function(){function t(){ln(this,t)}return dn(t,[{key:"apply",value:function(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.call(this,e,n);return this}},{key:"to1DArray",value:function(){for(var t=[],e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.push(this.get(e,n));return t}},{key:"to2DArray",value:function(){for(var t=[],e=0;e<this.rows;e++){t.push([]);for(var n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return 1===this.rows}},{key:"isColumnVector",value:function(){return 1===this.columns}},{key:"isVector",value:function(){return 1===this.rows||1===this.columns}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return 0===this.rows||0===this.columns}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var t=0,e=0,n=-1,r=!0,o=!1;t<this.rows&&r;){for(e=0,o=!1;e<this.columns&&!1===o;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(o=!0,n=e):(r=!1,o=!0);t++}return r}},{key:"isReducedEchelonForm",value:function(){for(var t=0,e=0,n=-1,r=!0,o=!1;t<this.rows&&r;){for(e=0,o=!1;e<this.columns&&!1===o;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(o=!0,n=e):(r=!1,o=!0);for(var i=e+1;i<this.rows;i++)0!==this.get(t,i)&&(r=!1);t++}return r}},{key:"echelonForm",value:function(){for(var t=this.clone(),e=0,n=0;e<t.rows&&n<t.columns;){for(var r=e,o=e;o<t.rows;o++)t.get(o,n)>t.get(r,n)&&(r=o);if(0===t.get(r,n))n++;else{t.swapRows(e,r);for(var i=t.get(e,n),a=n;a<t.columns;a++)t.set(e,a,t.get(e,a)/i);for(var u=e+1;u<t.rows;u++){var s=t.get(u,n)/t.get(e,n);t.set(u,n,0);for(var c=n+1;c<t.columns;c++)t.set(u,c,t.get(u,c)-t.get(e,c)*s)}e++,n++}}return t}},{key:"reducedEchelonForm",value:function(){for(var t=this.echelonForm(),e=t.columns,n=t.rows,r=n-1;r>=0;)if(0===t.maxRow(r))r--;else{for(var o=0,i=!1;o<n&&!1===i;)1===t.get(r,o)?i=!0:o++;for(var a=0;a<r;a++)for(var u=t.get(a,o),s=o;s<e;s++){var c=t.get(a,s)-u*t.get(r,s);t.set(a,s,c)}r--}return t}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==fn(t))throw new TypeError("options must be an object");var e=t.rows,n=void 0===e?1:e,r=t.columns,o=void 0===r?1:r;if(!Number.isInteger(n)||n<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(o)||o<=0)throw new TypeError("columns must be a positive integer");for(var i=new gn(this.rows*n,this.columns*o),a=0;a<n;a++)for(var u=0;u<o;u++)i.setSubMatrix(this,this.rows*a,this.columns*u);return i}},{key:"fill",value:function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,t);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(t){je(this,t);for(var e=[],n=0;n<this.columns;n++)e.push(this.get(t,n));return e}},{key:"getRowVector",value:function(t){return gn.rowVector(this.getRow(t))}},{key:"setRow",value:function(t,e){je(this,t),e=Ue(this,e);for(var n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}},{key:"swapRows",value:function(t,e){je(this,t),je(this,e);for(var n=0;n<this.columns;n++){var r=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,r)}return this}},{key:"getColumn",value:function(t){Le(this,t);for(var e=[],n=0;n<this.rows;n++)e.push(this.get(n,t));return e}},{key:"getColumnVector",value:function(t){return gn.columnVector(this.getColumn(t))}},{key:"setColumn",value:function(t,e){Le(this,t),e=Be(this,e);for(var n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}},{key:"swapColumns",value:function(t,e){Le(this,t),Le(this,e);for(var n=0;n<this.rows;n++){var r=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,r)}return this}},{key:"addRowVector",value:function(t){t=Ue(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}},{key:"subRowVector",value:function(t){t=Ue(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}},{key:"mulRowVector",value:function(t){t=Ue(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}},{key:"divRowVector",value:function(t){t=Ue(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}},{key:"addColumnVector",value:function(t){t=Be(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}},{key:"subColumnVector",value:function(t){t=Be(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}},{key:"mulColumnVector",value:function(t){t=Be(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}},{key:"divColumnVector",value:function(t){t=Be(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}},{key:"mulRow",value:function(t,e){je(this,t);for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}},{key:"mulColumn",value:function(t,e){Le(this,t);for(var n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}},{key:"max",value:function(){if(this.isEmpty())return NaN;for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}},{key:"maxIndex",value:function(){He(this);for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}},{key:"min",value:function(){if(this.isEmpty())return NaN;for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}},{key:"minIndex",value:function(){He(this);for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}},{key:"maxRow",value:function(t){if(je(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}},{key:"maxRowIndex",value:function(t){je(this,t),He(this);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}},{key:"minRow",value:function(t){if(je(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}},{key:"minRowIndex",value:function(t){je(this,t),He(this);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}},{key:"maxColumn",value:function(t){if(Le(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}},{key:"maxColumnIndex",value:function(t){Le(this,t),He(this);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}},{key:"minColumn",value:function(t){if(Le(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}},{key:"minColumnIndex",value:function(t){Le(this,t),He(this);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}},{key:"diag",value:function(){for(var t=Math.min(this.rows,this.columns),e=[],n=0;n<t;n++)e.push(this.get(n,n));return e}},{key:"norm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frobenius",e=0;if("max"===t)return this.max();if("frobenius"===t){for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)e+=this.get(n,r)*this.get(n,r);return Math.sqrt(e)}throw new RangeError("unknown norm type: ".concat(t))}},{key:"cumulativeSum",value:function(){for(var t=0,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}},{key:"dot",value:function(e){t.isMatrix(e)&&(e=e.to1DArray());var n=this.to1DArray();if(n.length!==e.length)throw new RangeError("vectors do not have the same size");for(var r=0,o=0;o<n.length;o++)r+=n[o]*e[o];return r}},{key:"mmul",value:function(t){t=gn.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.columns,o=new gn(e,r),i=new Float64Array(n),a=0;a<r;a++){for(var u=0;u<n;u++)i[u]=t.get(u,a);for(var s=0;s<e;s++){for(var c=0,f=0;f<n;f++)c+=this.get(s,f)*i[f];o.set(s,a,c)}}return o}},{key:"strassen2x2",value:function(t){t=gn.checkMatrix(t);var e=new gn(2,2),n=this.get(0,0),r=t.get(0,0),o=this.get(0,1),i=t.get(0,1),a=this.get(1,0),u=t.get(1,0),s=this.get(1,1),c=t.get(1,1),f=(n+s)*(r+c),l=(a+s)*r,h=n*(i-c),d=s*(u-r),p=(n+o)*c,v=f+d-p+(o-s)*(u+c),m=h+p,y=l+d,g=f-l+h+(a-n)*(r+i);return e.set(0,0,v),e.set(0,1,m),e.set(1,0,y),e.set(1,1,g),e}},{key:"strassen3x3",value:function(t){t=gn.checkMatrix(t);var e=new gn(3,3),n=this.get(0,0),r=this.get(0,1),o=this.get(0,2),i=this.get(1,0),a=this.get(1,1),u=this.get(1,2),s=this.get(2,0),c=this.get(2,1),f=this.get(2,2),l=t.get(0,0),h=t.get(0,1),d=t.get(0,2),p=t.get(1,0),v=t.get(1,1),m=t.get(1,2),y=t.get(2,0),g=t.get(2,1),b=t.get(2,2),_=(n-i)*(-h+v),x=(-n+i+a)*(l-h+v),w=(i+a)*(-l+h),E=n*l,S=(-n+s+c)*(l-d+m),T=(-n+s)*(d-m),A=(s+c)*(-l+d),I=(-o+c+f)*(v+y-g),k=(o-f)*(v-g),O=o*y,D=(c+f)*(-y+g),R=(-o+a+u)*(m+y-b),M=(o-u)*(m-b),C=(a+u)*(-y+b),N=E+O+r*p,P=(n+r+o-i-a-c-f)*v+x+w+E+I+O+D,G=E+S+A+(n+r+o-a-u-s-c)*m+O+R+C,j=_+a*(-l+h+p-v-m-y+b)+x+E+O+R+M,L=_+x+w+E+u*g,U=O+R+M+C+i*d,B=E+S+T+c*(-l+d+p-v-m-y+g)+I+k+O,F=I+k+O+D+s*h,z=E+S+T+A+f*b;return e.set(0,0,N),e.set(0,1,P),e.set(0,2,G),e.set(1,0,j),e.set(1,1,L),e.set(1,2,U),e.set(2,0,B),e.set(2,1,F),e.set(2,2,z),e}},{key:"mmulStrassen",value:function(e){e=gn.checkMatrix(e);var n=this.clone(),r=n.rows,o=n.columns,i=e.rows,a=e.columns;function u(e,n,r){var o=e.rows,i=e.columns;if(o===n&&i===r)return e;var a=t.zeros(n,r);return a=a.setSubMatrix(e,0,0)}o!==i&&console.warn("Multiplying ".concat(r," x ").concat(o," and ").concat(i," x ").concat(a," matrix: dimensions do not match."));var s=Math.max(r,i),c=Math.max(o,a);return function e(n,r,o,i){if(o<=512||i<=512)return n.mmul(r);o%2==1&&i%2==1?(n=u(n,o+1,i+1),r=u(r,o+1,i+1)):o%2==1?(n=u(n,o+1,i),r=u(r,o+1,i)):i%2==1&&(n=u(n,o,i+1),r=u(r,o,i+1));var a=parseInt(n.rows/2,10),s=parseInt(n.columns/2,10),c=n.subMatrix(0,a-1,0,s-1),f=r.subMatrix(0,a-1,0,s-1),l=n.subMatrix(0,a-1,s,n.columns-1),h=r.subMatrix(0,a-1,s,r.columns-1),d=n.subMatrix(a,n.rows-1,0,s-1),p=r.subMatrix(a,r.rows-1,0,s-1),v=n.subMatrix(a,n.rows-1,s,n.columns-1),m=r.subMatrix(a,r.rows-1,s,r.columns-1),y=e(t.add(c,v),t.add(f,m),a,s),g=e(t.add(d,v),f,a,s),b=e(c,t.sub(h,m),a,s),_=e(v,t.sub(p,f),a,s),x=e(t.add(c,l),m,a,s),w=e(t.sub(d,c),t.add(f,h),a,s),E=e(t.sub(l,v),t.add(p,m),a,s),S=t.add(y,_);S.sub(x),S.add(E);var T=t.add(b,x),A=t.add(g,_),I=t.sub(y,g);I.add(b),I.add(w);var k=t.zeros(2*S.rows,2*S.columns);return(k=(k=(k=(k=k.setSubMatrix(S,0,0)).setSubMatrix(T,S.rows,0)).setSubMatrix(A,0,S.columns)).setSubMatrix(I,S.rows,S.columns)).subMatrix(0,o-1,0,i-1)}(n=u(n,s,c),e=u(e,s,c),s,c)}},{key:"scaleRows",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==fn(t))throw new TypeError("options must be an object");var e=t.min,n=void 0===e?0:e,r=t.max,o=void 0===r?1:r;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(n>=o)throw new RangeError("min must be smaller than max");for(var i=new gn(this.rows,this.columns),a=0;a<this.rows;a++){var u=this.getRow(a);u.length>0&&De(u,{min:n,max:o,output:u}),i.setRow(a,u)}return i}},{key:"scaleColumns",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==fn(t))throw new TypeError("options must be an object");var e=t.min,n=void 0===e?0:e,r=t.max,o=void 0===r?1:r;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(n>=o)throw new RangeError("min must be smaller than max");for(var i=new gn(this.rows,this.columns),a=0;a<this.columns;a++){var u=this.getColumn(a);u.length&&De(u,{min:n,max:o,output:u}),i.setColumn(a,u)}return i}},{key:"flipRows",value:function(){for(var t=Math.ceil(this.columns/2),e=0;e<this.rows;e++)for(var n=0;n<t;n++){var r=this.get(e,n),o=this.get(e,this.columns-1-n);this.set(e,n,o),this.set(e,this.columns-1-n,r)}return this}},{key:"flipColumns",value:function(){for(var t=Math.ceil(this.rows/2),e=0;e<this.columns;e++)for(var n=0;n<t;n++){var r=this.get(n,e),o=this.get(this.rows-1-n,e);this.set(n,e,o),this.set(this.rows-1-n,e,r)}return this}},{key:"kroneckerProduct",value:function(t){t=gn.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.rows,o=t.columns,i=new gn(e*r,n*o),a=0;a<e;a++)for(var u=0;u<n;u++)for(var s=0;s<r;s++)for(var c=0;c<o;c++)i.set(r*a+s,o*u+c,this.get(a,u)*t.get(s,c));return i}},{key:"transpose",value:function(){for(var t=new gn(this.columns,this.rows),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}},{key:"sortRows",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn,e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}},{key:"sortColumns",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn,e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}},{key:"subMatrix",value:function(t,e,n,r){Ve(this,t,e,n,r);for(var o=new gn(e-t+1,r-n+1),i=t;i<=e;i++)for(var a=n;a<=r;a++)o.set(i-t,a-n,this.get(i,a));return o}},{key:"subMatrixRow",value:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");for(var r=new gn(t.length,n-e+1),o=0;o<t.length;o++)for(var i=e;i<=n;i++){if(t[o]<0||t[o]>=this.rows)throw new RangeError("Row index out of range: ".concat(t[o]));r.set(o,i-e,this.get(t[o],i))}return r}},{key:"subMatrixColumn",value:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");for(var r=new gn(n-e+1,t.length),o=0;o<t.length;o++)for(var i=e;i<=n;i++){if(t[o]<0||t[o]>=this.columns)throw new RangeError("Column index out of range: ".concat(t[o]));r.set(i-e,o,this.get(i,t[o]))}return r}},{key:"setSubMatrix",value:function(t,e,n){if((t=gn.checkMatrix(t)).isEmpty())return this;Ve(this,e,e+t.rows-1,n,n+t.columns-1);for(var r=0;r<t.rows;r++)for(var o=0;o<t.columns;o++)this.set(e+r,n+o,t.get(r,o));return this}},{key:"selection",value:function(t,e){for(var n=function(t,e,n){return{row:Fe(t,e),column:ze(t,n)}}(this,t,e),r=new gn(t.length,e.length),o=0;o<n.row.length;o++)for(var i=n.row[o],a=0;a<n.column.length;a++){var u=n.column[a];r.set(o,a,this.get(i,u))}return r}},{key:"trace",value:function(){for(var t=Math.min(this.rows,this.columns),e=0,n=0;n<t;n++)e+=this.get(n,n);return e}},{key:"clone",value:function(){for(var t=new gn(this.rows,this.columns),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}},{key:"sum",value:function(t){switch(t){case"row":return function(t){for(var e=We(t.rows),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[n]+=t.get(n,r);return e}(this);case"column":return function(t){for(var e=We(t.columns),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[r]+=t.get(n,r);return e}(this);case void 0:return function(t){for(var e=0,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e+=t.get(n,r);return e}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"product",value:function(t){switch(t){case"row":return function(t){for(var e=We(t.rows,1),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[n]*=t.get(n,r);return e}(this);case"column":return function(t){for(var e=We(t.columns,1),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[r]*=t.get(n,r);return e}(this);case void 0:return function(t){for(var e=1,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e*=t.get(n,r);return e}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"mean",value:function(t){var e=this.sum(t);switch(t){case"row":for(var n=0;n<this.rows;n++)e[n]/=this.columns;return e;case"column":for(var r=0;r<this.columns;r++)e[r]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error("invalid option: ".concat(t))}}},{key:"variance",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===fn(t)&&(e=t,t=void 0),"object"!==fn(e))throw new TypeError("options must be an object");var n=e,r=n.unbiased,o=void 0===r||r,i=n.mean,a=void 0===i?this.mean(t):i;if("boolean"!=typeof o)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!Array.isArray(a))throw new TypeError("mean must be an array");return qe(this,o,a);case"column":if(!Array.isArray(a))throw new TypeError("mean must be an array");return Ye(this,o,a);case void 0:if("number"!=typeof a)throw new TypeError("mean must be a number");return Ke(this,o,a);default:throw new Error("invalid option: ".concat(t))}}},{key:"standardDeviation",value:function(t,e){"object"===fn(t)&&(e=t,t=void 0);var n=this.variance(t,e);if(void 0===t)return Math.sqrt(n);for(var r=0;r<n.length;r++)n[r]=Math.sqrt(n[r]);return n}},{key:"center",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===fn(t)&&(e=t,t=void 0),"object"!==fn(e))throw new TypeError("options must be an object");var n=e,r=n.center,o=void 0===r?this.mean(t):r;switch(t){case"row":if(!Array.isArray(o))throw new TypeError("center must be an array");return Ze(this,o),this;case"column":if(!Array.isArray(o))throw new TypeError("center must be an array");return Qe(this,o),this;case void 0:if("number"!=typeof o)throw new TypeError("center must be a number");return Je(this,o),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"scale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===fn(t)&&(e=t,t=void 0),"object"!==fn(e))throw new TypeError("options must be an object");var n=e.scale;switch(t){case"row":if(void 0===n)n=$e(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return tn(this,n),this;case"column":if(void 0===n)n=en(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return nn(this,n),this;case void 0:if(void 0===n)n=rn(this);else if("number"!=typeof n)throw new TypeError("scale must be a number");return on(this,n),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"toString",value:function(t){return Ce(this,t)}},{key:"size",get:function(){return this.rows*this.columns}}],[{key:"from1DArray",value:function(t,e,n){if(t*e!==n.length)throw new RangeError("data length does not match given dimensions");for(var r=new gn(t,e),o=0;o<t;o++)for(var i=0;i<e;i++)r.set(o,i,n[o*e+i]);return r}},{key:"rowVector",value:function(t){for(var e=new gn(1,t.length),n=0;n<t.length;n++)e.set(0,n,t[n]);return e}},{key:"columnVector",value:function(t){for(var e=new gn(t.length,1),n=0;n<t.length;n++)e.set(n,0,t[n]);return e}},{key:"zeros",value:function(t,e){return new gn(t,e)}},{key:"ones",value:function(t,e){return new gn(t,e).fill(1)}},{key:"rand",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==fn(n))throw new TypeError("options must be an object");for(var r=n.random,o=void 0===r?Math.random:r,i=new gn(t,e),a=0;a<t;a++)for(var u=0;u<e;u++)i.set(a,u,o());return i}},{key:"randInt",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==fn(n))throw new TypeError("options must be an object");var r=n.min,o=void 0===r?0:r,i=n.max,a=void 0===i?1e3:i,u=n.random,s=void 0===u?Math.random:u;if(!Number.isInteger(o))throw new TypeError("min must be an integer");if(!Number.isInteger(a))throw new TypeError("max must be an integer");if(o>=a)throw new RangeError("min must be smaller than max");for(var c=a-o,f=new gn(t,e),l=0;l<t;l++)for(var h=0;h<e;h++){var d=o+Math.round(s()*c);f.set(l,h,d)}return f}},{key:"eye",value:function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);for(var r=Math.min(t,e),o=this.zeros(t,e),i=0;i<r;i++)o.set(i,i,n);return o}},{key:"diag",value:function(t,e,n){var r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);for(var o=Math.min(r,e,n),i=this.zeros(e,n),a=0;a<o;a++)i.set(a,a,t[a]);return i}},{key:"min",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,o=new gn(n,r),i=0;i<n;i++)for(var a=0;a<r;a++)o.set(i,a,Math.min(t.get(i,a),e.get(i,a)));return o}},{key:"max",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,o=new this(n,r),i=0;i<n;i++)for(var a=0;a<r;a++)o.set(i,a,Math.max(t.get(i,a),e.get(i,a)));return o}},{key:"checkMatrix",value:function(e){return t.isMatrix(e)?e:new gn(e)}},{key:"isMatrix",value:function(t){return null!=t&&"Matrix"===t.klass}}]),t}();function vn(t,e){return t-e}pn.prototype.klass="Matrix","undefined"!=typeof Symbol&&(pn.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return Ce(this)}),pn.random=pn.rand,pn.randomInt=pn.randInt,pn.diagonal=pn.diag,pn.prototype.diagonal=pn.prototype.diag,pn.identity=pn.eye,pn.prototype.negate=pn.prototype.neg,pn.prototype.tensorProduct=pn.prototype.kroneckerProduct;var mn,yn,gn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&an(t,e)}(n,t);var e=un(n);function n(t,r){var o;if(ln(this,n),o=e.call(this),n.isMatrix(t))return sn(o,t.clone());if(Number.isInteger(t)&&t>=0){if(o.data=[],!(Number.isInteger(r)&&r>=0))throw new TypeError("nColumns must be a positive integer");for(var i=0;i<t;i++)o.data.push(new Float64Array(r))}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");var a=t;if("number"!=typeof(r=(t=a.length)?a[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");o.data=[];for(var u=0;u<t;u++){if(a[u].length!==r)throw new RangeError("Inconsistent array dimensions");o.data.push(Float64Array.from(a[u]))}}return o.rows=t,o.columns=r,o}return dn(n,[{key:"set",value:function(t,e,n){return this.data[t][e]=n,this}},{key:"get",value:function(t,e){return this.data[t][e]}},{key:"removeRow",value:function(t){return je(this,t),this.data.splice(t,1),this.rows-=1,this}},{key:"addRow",value:function(t,e){return void 0===e&&(e=t,t=this.rows),je(this,t,!0),e=Float64Array.from(Ue(this,e)),this.data.splice(t,0,e),this.rows+=1,this}},{key:"removeColumn",value:function(t){Le(this,t);for(var e=0;e<this.rows;e++){for(var n=new Float64Array(this.columns-1),r=0;r<t;r++)n[r]=this.data[e][r];for(var o=t+1;o<this.columns;o++)n[o-1]=this.data[e][o];this.data[e]=n}return this.columns-=1,this}},{key:"addColumn",value:function(t,e){void 0===e&&(e=t,t=this.columns),Le(this,t,!0),e=Be(this,e);for(var n=0;n<this.rows;n++){for(var r=new Float64Array(this.columns+1),o=0;o<t;o++)r[o]=this.data[n][o];for(r[o++]=e[n];o<this.columns+1;o++)r[o]=this.data[n][o-1];this.data[n]=r}return this.columns+=1,this}}]),n}(pn);function bn(t){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xn(t,e){return(xn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Sn(t);if(e){var o=Sn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return En(this,n)}}function En(t,e){return!e||"object"!==bn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Sn(t){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}yn=gn,(mn=pn).prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},mn.prototype.addS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t);return this},mn.prototype.addM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t.get(e,n));return this},mn.add=function(t,e){return new yn(t).add(e)},mn.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},mn.prototype.subS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t);return this},mn.prototype.subM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t.get(e,n));return this},mn.sub=function(t,e){return new yn(t).sub(e)},mn.prototype.subtract=mn.prototype.sub,mn.prototype.subtractS=mn.prototype.subS,mn.prototype.subtractM=mn.prototype.subM,mn.subtract=mn.sub,mn.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},mn.prototype.mulS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this},mn.prototype.mulM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t.get(e,n));return this},mn.mul=function(t,e){return new yn(t).mul(e)},mn.prototype.multiply=mn.prototype.mul,mn.prototype.multiplyS=mn.prototype.mulS,mn.prototype.multiplyM=mn.prototype.mulM,mn.multiply=mn.mul,mn.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},mn.prototype.divS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t);return this},mn.prototype.divM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t.get(e,n));return this},mn.div=function(t,e){return new yn(t).div(e)},mn.prototype.divide=mn.prototype.div,mn.prototype.divideS=mn.prototype.divS,mn.prototype.divideM=mn.prototype.divM,mn.divide=mn.div,mn.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},mn.prototype.modS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t);return this},mn.prototype.modM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t.get(e,n));return this},mn.mod=function(t,e){return new yn(t).mod(e)},mn.prototype.modulus=mn.prototype.mod,mn.prototype.modulusS=mn.prototype.modS,mn.prototype.modulusM=mn.prototype.modM,mn.modulus=mn.mod,mn.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},mn.prototype.andS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t);return this},mn.prototype.andM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t.get(e,n));return this},mn.and=function(t,e){return new yn(t).and(e)},mn.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},mn.prototype.orS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t);return this},mn.prototype.orM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t.get(e,n));return this},mn.or=function(t,e){return new yn(t).or(e)},mn.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},mn.prototype.xorS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t);return this},mn.prototype.xorM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t.get(e,n));return this},mn.xor=function(t,e){return new yn(t).xor(e)},mn.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},mn.prototype.leftShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t);return this},mn.prototype.leftShiftM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t.get(e,n));return this},mn.leftShift=function(t,e){return new yn(t).leftShift(e)},mn.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},mn.prototype.signPropagatingRightShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t);return this},mn.prototype.signPropagatingRightShiftM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t.get(e,n));return this},mn.signPropagatingRightShift=function(t,e){return new yn(t).signPropagatingRightShift(e)},mn.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},mn.prototype.rightShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t);return this},mn.prototype.rightShiftM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t.get(e,n));return this},mn.rightShift=function(t,e){return new yn(t).rightShift(e)},mn.prototype.zeroFillRightShift=mn.prototype.rightShift,mn.prototype.zeroFillRightShiftS=mn.prototype.rightShiftS,mn.prototype.zeroFillRightShiftM=mn.prototype.rightShiftM,mn.zeroFillRightShift=mn.rightShift,mn.prototype.not=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},mn.not=function(t){return new yn(t).not()},mn.prototype.abs=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},mn.abs=function(t){return new yn(t).abs()},mn.prototype.acos=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},mn.acos=function(t){return new yn(t).acos()},mn.prototype.acosh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},mn.acosh=function(t){return new yn(t).acosh()},mn.prototype.asin=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},mn.asin=function(t){return new yn(t).asin()},mn.prototype.asinh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},mn.asinh=function(t){return new yn(t).asinh()},mn.prototype.atan=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},mn.atan=function(t){return new yn(t).atan()},mn.prototype.atanh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},mn.atanh=function(t){return new yn(t).atanh()},mn.prototype.cbrt=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},mn.cbrt=function(t){return new yn(t).cbrt()},mn.prototype.ceil=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},mn.ceil=function(t){return new yn(t).ceil()},mn.prototype.clz32=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},mn.clz32=function(t){return new yn(t).clz32()},mn.prototype.cos=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},mn.cos=function(t){return new yn(t).cos()},mn.prototype.cosh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},mn.cosh=function(t){return new yn(t).cosh()},mn.prototype.exp=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},mn.exp=function(t){return new yn(t).exp()},mn.prototype.expm1=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},mn.expm1=function(t){return new yn(t).expm1()},mn.prototype.floor=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},mn.floor=function(t){return new yn(t).floor()},mn.prototype.fround=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},mn.fround=function(t){return new yn(t).fround()},mn.prototype.log=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},mn.log=function(t){return new yn(t).log()},mn.prototype.log1p=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},mn.log1p=function(t){return new yn(t).log1p()},mn.prototype.log10=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},mn.log10=function(t){return new yn(t).log10()},mn.prototype.log2=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},mn.log2=function(t){return new yn(t).log2()},mn.prototype.round=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},mn.round=function(t){return new yn(t).round()},mn.prototype.sign=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},mn.sign=function(t){return new yn(t).sign()},mn.prototype.sin=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},mn.sin=function(t){return new yn(t).sin()},mn.prototype.sinh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},mn.sinh=function(t){return new yn(t).sinh()},mn.prototype.sqrt=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},mn.sqrt=function(t){return new yn(t).sqrt()},mn.prototype.tan=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},mn.tan=function(t){return new yn(t).tan()},mn.prototype.tanh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},mn.tanh=function(t){return new yn(t).tanh()},mn.prototype.trunc=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},mn.trunc=function(t){return new yn(t).trunc()},mn.pow=function(t,e){return new yn(t).pow(e)},mn.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},mn.prototype.powS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t));return this},mn.prototype.powM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t.get(e,n)));return this};var Tn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xn(t,e)}(i,t);var e,n,r,o=wn(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).data=t,e.rows=t.length,e.columns=t[0].length,e}return e=i,(n=[{key:"set",value:function(t,e,n){return this.data[t][e]=n,this}},{key:"get",value:function(t,e){return this.data[t][e]}}])&&_n(e.prototype,n),r&&_n(e,r),i}(pn);function An(t,e){var n=0;return Math.abs(t)>Math.abs(e)?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0!==e?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0}function In(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var On=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(In(this,t),(e=Tn.checkMatrix(e)).isEmpty())throw new Error("Matrix must be non-empty");var r,o=e.rows,i=e.columns,a=n.computeLeftSingularVectors,u=void 0===a||a,s=n.computeRightSingularVectors,c=void 0===s||s,f=n.autoTranspose,l=void 0!==f&&f,h=Boolean(u),d=Boolean(c),p=!1;if(o<i)if(l){o=(r=e.transpose()).rows,i=r.columns,p=!0;var v=h;h=d,d=v}else r=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else r=e.clone();for(var m=Math.min(o,i),y=Math.min(o+1,i),g=new Float64Array(y),b=new gn(o,m),_=new gn(i,i),x=new Float64Array(i),w=new Float64Array(o),E=new Float64Array(y),S=0;S<y;S++)E[S]=S;for(var T=Math.min(o-1,i),A=Math.max(0,Math.min(i-2,o)),I=Math.max(T,A),k=0;k<I;k++){if(k<T){g[k]=0;for(var O=k;O<o;O++)g[k]=An(g[k],r.get(O,k));if(0!==g[k]){r.get(k,k)<0&&(g[k]=-g[k]);for(var D=k;D<o;D++)r.set(D,k,r.get(D,k)/g[k]);r.set(k,k,r.get(k,k)+1)}g[k]=-g[k]}for(var R=k+1;R<i;R++){if(k<T&&0!==g[k]){for(var M=0,C=k;C<o;C++)M+=r.get(C,k)*r.get(C,R);M=-M/r.get(k,k);for(var N=k;N<o;N++)r.set(N,R,r.get(N,R)+M*r.get(N,k))}x[R]=r.get(k,R)}if(h&&k<T)for(var P=k;P<o;P++)b.set(P,k,r.get(P,k));if(k<A){x[k]=0;for(var G=k+1;G<i;G++)x[k]=An(x[k],x[G]);if(0!==x[k]){x[k+1]<0&&(x[k]=0-x[k]);for(var j=k+1;j<i;j++)x[j]/=x[k];x[k+1]+=1}if(x[k]=-x[k],k+1<o&&0!==x[k]){for(var L=k+1;L<o;L++)w[L]=0;for(var U=k+1;U<o;U++)for(var B=k+1;B<i;B++)w[U]+=x[B]*r.get(U,B);for(var F=k+1;F<i;F++)for(var z=-x[F]/x[k+1],V=k+1;V<o;V++)r.set(V,F,r.get(V,F)+z*w[V])}if(d)for(var W=k+1;W<i;W++)_.set(W,k,x[W])}}var X=Math.min(i,o+1);if(T<i&&(g[T]=r.get(T,T)),o<X&&(g[X-1]=0),A+1<X&&(x[A]=r.get(A,X-1)),x[X-1]=0,h){for(var H=T;H<m;H++){for(var q=0;q<o;q++)b.set(q,H,0);b.set(H,H,1)}for(var Y=T-1;Y>=0;Y--)if(0!==g[Y]){for(var K=Y+1;K<m;K++){for(var Z=0,Q=Y;Q<o;Q++)Z+=b.get(Q,Y)*b.get(Q,K);Z=-Z/b.get(Y,Y);for(var J=Y;J<o;J++)b.set(J,K,b.get(J,K)+Z*b.get(J,Y))}for(var $=Y;$<o;$++)b.set($,Y,-b.get($,Y));b.set(Y,Y,1+b.get(Y,Y));for(var tt=0;tt<Y-1;tt++)b.set(tt,Y,0)}else{for(var et=0;et<o;et++)b.set(et,Y,0);b.set(Y,Y,1)}}if(d)for(var nt=i-1;nt>=0;nt--){if(nt<A&&0!==x[nt])for(var rt=nt+1;rt<i;rt++){for(var ot=0,it=nt+1;it<i;it++)ot+=_.get(it,nt)*_.get(it,rt);ot=-ot/_.get(nt+1,nt);for(var at=nt+1;at<i;at++)_.set(at,rt,_.get(at,rt)+ot*_.get(at,nt))}for(var ut=0;ut<i;ut++)_.set(ut,nt,0);_.set(nt,nt,1)}for(var st=X-1,ct=Number.EPSILON;X>0;){var ft=void 0,lt=void 0;for(ft=X-2;ft>=-1&&-1!==ft;ft--){var ht=Number.MIN_VALUE+ct*Math.abs(g[ft]+Math.abs(g[ft+1]));if(Math.abs(x[ft])<=ht||Number.isNaN(x[ft])){x[ft]=0;break}}if(ft===X-2)lt=4;else{var dt=void 0;for(dt=X-1;dt>=ft&&dt!==ft;dt--){var pt=(dt!==X?Math.abs(x[dt]):0)+(dt!==ft+1?Math.abs(x[dt-1]):0);if(Math.abs(g[dt])<=ct*pt){g[dt]=0;break}}dt===ft?lt=3:dt===X-1?lt=1:(lt=2,ft=dt)}switch(ft++,lt){case 1:var vt=x[X-2];x[X-2]=0;for(var mt=X-2;mt>=ft;mt--){var yt=An(g[mt],vt),gt=g[mt]/yt,bt=vt/yt;if(g[mt]=yt,mt!==ft&&(vt=-bt*x[mt-1],x[mt-1]=gt*x[mt-1]),d)for(var _t=0;_t<i;_t++)yt=gt*_.get(_t,mt)+bt*_.get(_t,X-1),_.set(_t,X-1,-bt*_.get(_t,mt)+gt*_.get(_t,X-1)),_.set(_t,mt,yt)}break;case 2:var xt=x[ft-1];x[ft-1]=0;for(var wt=ft;wt<X;wt++){var Et=An(g[wt],xt),St=g[wt]/Et,Tt=xt/Et;if(g[wt]=Et,xt=-Tt*x[wt],x[wt]=St*x[wt],h)for(var At=0;At<o;At++)Et=St*b.get(At,wt)+Tt*b.get(At,ft-1),b.set(At,ft-1,-Tt*b.get(At,wt)+St*b.get(At,ft-1)),b.set(At,wt,Et)}break;case 3:var It=Math.max(Math.abs(g[X-1]),Math.abs(g[X-2]),Math.abs(x[X-2]),Math.abs(g[ft]),Math.abs(x[ft])),kt=g[X-1]/It,Ot=g[X-2]/It,Dt=x[X-2]/It,Rt=g[ft]/It,Mt=x[ft]/It,Ct=((Ot+kt)*(Ot-kt)+Dt*Dt)/2,Nt=kt*Dt*(kt*Dt),Pt=0;0===Ct&&0===Nt||(Pt=Nt/(Ct+(Pt=Ct<0?0-Math.sqrt(Ct*Ct+Nt):Math.sqrt(Ct*Ct+Nt))));for(var Gt=(Rt+kt)*(Rt-kt)+Pt,jt=Rt*Mt,Lt=ft;Lt<X-1;Lt++){var Ut=An(Gt,jt);0===Ut&&(Ut=Number.MIN_VALUE);var Bt=Gt/Ut,Ft=jt/Ut;if(Lt!==ft&&(x[Lt-1]=Ut),Gt=Bt*g[Lt]+Ft*x[Lt],x[Lt]=Bt*x[Lt]-Ft*g[Lt],jt=Ft*g[Lt+1],g[Lt+1]=Bt*g[Lt+1],d)for(var zt=0;zt<i;zt++)Ut=Bt*_.get(zt,Lt)+Ft*_.get(zt,Lt+1),_.set(zt,Lt+1,-Ft*_.get(zt,Lt)+Bt*_.get(zt,Lt+1)),_.set(zt,Lt,Ut);if(0===(Ut=An(Gt,jt))&&(Ut=Number.MIN_VALUE),Bt=Gt/Ut,Ft=jt/Ut,g[Lt]=Ut,Gt=Bt*x[Lt]+Ft*g[Lt+1],g[Lt+1]=-Ft*x[Lt]+Bt*g[Lt+1],jt=Ft*x[Lt+1],x[Lt+1]=Bt*x[Lt+1],h&&Lt<o-1)for(var Vt=0;Vt<o;Vt++)Ut=Bt*b.get(Vt,Lt)+Ft*b.get(Vt,Lt+1),b.set(Vt,Lt+1,-Ft*b.get(Vt,Lt)+Bt*b.get(Vt,Lt+1)),b.set(Vt,Lt,Ut)}x[X-2]=Gt,1;break;case 4:if(g[ft]<=0&&(g[ft]=g[ft]<0?-g[ft]:0,d))for(var Wt=0;Wt<=st;Wt++)_.set(Wt,ft,-_.get(Wt,ft));for(;ft<st&&!(g[ft]>=g[ft+1]);){var Xt=g[ft];if(g[ft]=g[ft+1],g[ft+1]=Xt,d&&ft<i-1)for(var Ht=0;Ht<i;Ht++)Xt=_.get(Ht,ft+1),_.set(Ht,ft+1,_.get(Ht,ft)),_.set(Ht,ft,Xt);if(h&&ft<o-1)for(var qt=0;qt<o;qt++)Xt=b.get(qt,ft+1),b.set(qt,ft+1,b.get(qt,ft)),b.set(qt,ft,Xt);ft++}0,X--}}if(p){var Yt=_;_=b,b=Yt}this.m=o,this.n=i,this.s=g,this.U=b,this.V=_}var e,n,r;return e=t,(n=[{key:"solve",value:function(t){for(var e=t,n=this.threshold,r=this.s.length,o=gn.zeros(r,r),i=0;i<r;i++)Math.abs(this.s[i])<=n?o.set(i,i,0):o.set(i,i,1/this.s[i]);for(var a=this.U,u=this.rightSingularVectors,s=u.mmul(o),c=u.rows,f=a.rows,l=gn.zeros(c,f),h=0;h<c;h++)for(var d=0;d<f;d++){for(var p=0,v=0;v<r;v++)p+=s.get(h,v)*a.get(d,v);l.set(h,d,p)}return l.mmul(e)}},{key:"solveForDiagonal",value:function(t){return this.solve(gn.diag(t))}},{key:"inverse",value:function(){for(var t=this.V,e=this.threshold,n=t.rows,r=t.columns,o=new gn(n,this.s.length),i=0;i<n;i++)for(var a=0;a<r;a++)Math.abs(this.s[a])>e&&o.set(i,a,t.get(i,a)/this.s[a]);for(var u=this.U,s=u.rows,c=u.columns,f=new gn(n,s),l=0;l<n;l++)for(var h=0;h<s;h++){for(var d=0,p=0;p<c;p++)d+=o.get(l,p)*u.get(h,p);f.set(l,h,d)}return f}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,n=this.s,r=0,o=n.length;r<o;r++)n[r]>t&&e++;return e}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return gn.diag(this.s)}}])&&kn(e.prototype,n),r&&kn(e,r),t}();function Dn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Rn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.distances=e.distances,this.dimension=e.dimension||2,this.linkDistance=e.linkDistance}var e,n,r;return e=t,(n=[{key:"layout",value:function(){var t=this.dimension,e=this.distances,n=this.linkDistance;try{var r=gn.mul(gn.pow(e,2),-.5),o=r.mean("row"),i=r.mean("column"),a=r.mean();r.add(a).subRowVector(o).subColumnVector(i);var u=new On(r),s=gn.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map((function(e){return gn.mul([e],[s]).toJSON()[0].splice(0,t)}))}catch(t){for(var c=[],f=0;f<e.length;f++){var l=Math.random()*n,h=Math.random()*n;c.push([l,h])}return c}}}])&&Dn(e.prototype,n),r&&Dn(e,r),t}();function Mn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Cn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.disp=[],this.positions=e.positions,this.adjMatrix=e.adjMatrix,this.focusID=e.focusID,this.radii=e.radii,this.iterations=e.iterations||10,this.height=e.height||10,this.width=e.width||10,this.speed=e.speed||100,this.gravity=e.gravity||10,this.nodeSizeFunc=e.nodeSizeFunc,this.k=e.k||5,this.strictRadial=e.strictRadial,this.nodes=e.nodes}var e,n,r;return e=t,(n=[{key:"layout",value:function(){var t=this.positions,e=[],n=this.iterations,r=this.width/10;this.maxDisplace=r,this.disp=e;for(var o=0;o<n;o++)t.forEach((function(t,n){e[n]={x:0,y:0}})),this.getRepulsion(),this.updatePositions();return t}},{key:"getRepulsion",value:function(){var t=this,e=t.positions,n=t.nodes,r=t.disp,o=t.k,i=t.radii||[];e.forEach((function(a,u){r[u]={x:0,y:0},e.forEach((function(e,s){if(u!==s&&i[u]===i[s]){var c=a[0]-e[0],f=a[1]-e[1],l=Math.sqrt(c*c+f*f);if(0===l){l=1;var h=u>s?1:-1;c=.01*h,f=.01*h}if(l<t.nodeSizeFunc(n[u])/2+t.nodeSizeFunc(n[s])/2){var d=o*o/l;r[u].x+=c/l*d,r[u].y+=f/l*d}}}))}))}},{key:"updatePositions",value:function(){var t=this.positions,e=this.disp,n=this.speed,r=this.strictRadial,o=this.focusID,i=this.maxDisplace||this.width/10;r&&e.forEach((function(e,n){var r=t[n][0]-t[o][0],i=t[n][1]-t[o][1],a=Math.sqrt(r*r+i*i),u=i/a,s=-r/a,c=Math.sqrt(e.x*e.x+e.y*e.y),f=Math.acos((u*e.x+s*e.y)/c);f>Math.PI/2&&(f-=Math.PI/2,u*=-1,s*=-1);var l=Math.cos(f)*c;e.x=u*l,e.y=s*l}));var a=this.radii;t.forEach((function(u,s){if(s!==o){var c=Math.sqrt(e[s].x*e[s].x+e[s].y*e[s].y);if(c>0&&s!==o){var f=Math.min(i*(n/800),c);if(u[0]+=e[s].x/c*f,u[1]+=e[s].y/c*f,r){var l=u[0]-t[o][0],h=u[1]-t[o][1],d=Math.sqrt(l*l+h*h);l=l/d*a[s],h=h/d*a[s],u[0]=t[o][0]+l,u[1]=t[o][1]+h}}}}))}}])&&Mn(e.prototype,n),r&&Mn(e,r),t}();function Nn(t){return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pn(t){return function(t){if(Array.isArray(t))return Gn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Gn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gn(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ln(t,e){return(Ln=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Un(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Fn(t);if(e){var o=Fn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Bn(this,n)}}function Bn(t,e){return!e||"object"!==Nn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fn(t){return(Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zn(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var Vn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ln(t,e)}(i,t);var e,n,r,o=Un(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.focusNode=null,e.unitRadius=null,e.linkDistance=50,e.preventOverlap=!1,e.strictRadial=!0,e.maxPreventOverlapIteration=200,e.sortStrength=10,e.nodes=[],e.edges=[],e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=t.edges||[];if(e&&0!==e.length){t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var r=t.center;if(1===e.length)return e[0].x=r[0],e[0].y=r[1],void(t.onLayoutEnd&&t.onLayoutEnd());var o=t.linkDistance,i=null;if(p(t.focusNode)){for(var a=!1,u=0;u<e.length;u++)e[u].id===t.focusNode&&(i=e[u],t.focusNode=i,a=!0,u=e.length);a||(i=null)}else i=t.focusNode;i||(i=e[0],t.focusNode=i);var s,c,f,l=(s=e,c=i.id,f=-1,s.forEach((function(t,e){t.id===c&&(f=e)})),f);t.focusIndex=l;var h=x({nodes:e,edges:n},!1),d=_(h),v=t.maxToFocus(d,l);t.handleInfinity(d,l,v+1),t.distances=d;var b=d[l],w=t.width||500,E=t.height||500,S=w-r[0]>r[0]?r[0]:w-r[0],A=E-r[1]>r[1]?r[1]:E-r[1];0===S&&(S=w/2),0===A&&(A=E/2);var I=A>S?S:A,k=Math.max.apply(Math,Pn(b)),O=[];b.forEach((function(e,n){t.unitRadius||(t.unitRadius=I/k),O[n]=e*t.unitRadius})),t.radii=O;var D=t.eIdealDisMatrix();t.eIdealDistances=D;var R=function(t){for(var e=t.length,n=t[0].length,r=[],o=0;o<e;o++){for(var i=[],a=0;a<n;a++)0!==t[o][a]?i.push(1/(t[o][a]*t[o][a])):i.push(0);r.push(i)}return r}(D);t.weights=R;var M=new Rn({linkDistance:o,distances:D}).layout();M.forEach((function(t){g(t[0])&&(t[0]=Math.random()*o),g(t[1])&&(t[1]=Math.random()*o)})),t.positions=M,M.forEach((function(t,n){e[n].x=t[0]+r[0],e[n].y=t[1]+r[1]})),M.forEach((function(t){t[0]-=M[l][0],t[1]-=M[l][1]})),t.run();var C,N=t.preventOverlap,P=t.nodeSize,G=t.strictRadial;if(N){var j,L=t.nodeSpacing;j=y(L)?function(){return L}:T(L)?L:function(){return 0},C=P?m(P)?function(t){return(P[0]>P[1]?P[0]:P[1])+j(t)}:function(t){return P+j(t)}:function(t){return t.size?m(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])+j(t):t.size+j(t):10+j(t)};var U={nodes:e,nodeSizeFunc:C,adjMatrix:h,positions:M,radii:O,height:E,width:w,strictRadial:G,focusID:l,iterations:t.maxPreventOverlapIteration||200,k:M.length/4.5},B=new Cn(U);M=B.layout()}return M.forEach((function(t,n){e[n].x=t[0]+r[0],e[n].y=t[1]+r[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}t.onLayoutEnd&&t.onLayoutEnd()}},{key:"run",value:function(){for(var t=this.maxIteration,e=this.positions||[],n=this.weights||[],r=this.eIdealDistances||[],o=this.radii||[],i=0;i<=t;i++){var a=i/t;this.oneIteration(a,e,o,r,n)}}},{key:"oneIteration",value:function(t,e,n,r,o){var i=1-t,a=this.focusIndex;e.forEach((function(u,s){var c=zn(u,[0,0]),f=0===c?0:1/c;if(s!==a){var l=0,h=0,d=0;e.forEach((function(t,e){if(s!==e){var n=zn(u,t),i=0===n?0:1/n,a=r[e][s];d+=o[s][e],l+=o[s][e]*(t[0]+a*(u[0]-t[0])*i),h+=o[s][e]*(t[1]+a*(u[1]-t[1])*i)}}));var p=0===n[s]?0:1/n[s];d*=i,d+=t*p*p,l*=i,l+=t*p*u[0]*f,u[0]=l/d,h*=i,h+=t*p*u[1]*f,u[1]=h/d}}))}},{key:"eIdealDisMatrix",value:function(){var t=this,e=t.nodes;if(!e)return[];var n=t.distances,r=t.linkDistance,o=t.radii||[],i=t.unitRadius||50,a=[];return n&&n.forEach((function(n,u){var s=[];n.forEach((function(n,a){if(u===a)s.push(0);else if(o[u]===o[a])if("data"===t.sortBy)s.push(n*(Math.abs(u-a)*t.sortStrength)/(o[u]/i));else if(t.sortBy){var c=e[u][t.sortBy]||0,f=e[a][t.sortBy]||0;p(c)&&(c=c.charCodeAt(0)),p(f)&&(f=f.charCodeAt(0)),s.push(n*(Math.abs(c-f)*t.sortStrength)/(o[u]/i))}else s.push(n*r/(o[u]/i));else{var l=(r+i)/2;s.push(n*l)}})),a.push(s)})),a}},{key:"handleInfinity",value:function(t,e,n){for(var r=t.length,o=0;o<r;o++)if(t[e][o]===1/0){t[e][o]=n,t[o][e]=n;for(var i=0;i<r;i++)t[o][i]!==1/0&&t[e][i]===1/0&&(t[e][i]=n+t[o][i],t[i][e]=n+t[o][i])}for(var a=0;a<r;a++)if(a!==e)for(var u=0;u<r;u++)if(t[a][u]===1/0){var s=Math.abs(t[e][a]-t[e][u]);s=0===s?1:s,t[a][u]=s}}},{key:"maxToFocus",value:function(t,e){for(var n=0,r=0;r<t[e].length;r++)t[e][r]!==1/0&&(n=t[e][r]>n?t[e][r]:n);return n}},{key:"getType",value:function(){return"radial"}}])&&jn(e.prototype,n),r&&jn(e,r),i}(I);function Wn(t){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xn(t,e){return(Xn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Hn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Kn(t);if(e){var o=Kn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qn(this,n)}}function qn(t,e){return!e||"object"!==Wn(e)&&"function"!=typeof e?Yn(t):e}function Yn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kn(t){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zn=new Map,Qn=function(t,e){if(Zn.get(t)&&console.warn("The layout with the name ".concat(t," exists already, it will be overridden")),null!==(r=e)&&"object"===E(r)){var n=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xn(t,e)}(r,t);var n=Hn(r);function r(t){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var i=Yn(o=n.call(this)),a={},u=i.getDefaultCfg();return Object.assign(a,u,e,t),Object.keys(a).forEach((function(t){var e=a[t];i[t]=e})),o}return r}(I);Zn.set(t,n)}else Zn.set(t,e);var r},Jn=function(t){return Zn.has(t)?Zn.get(t):null};function $n(t){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function er(t,e){return(er=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=or(t);if(e){var o=or(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return rr(this,n)}}function rr(t,e){return!e||"object"!==$n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function or(t){return(or=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ir=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&er(t,e)}(i,t);var e,n,r,o=nr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).nodeSize=30,e.minNodeSpacing=10,e.preventOverlap=!1,e.equidistant=!1,e.startAngle=1.5*Math.PI,e.clockwise=!0,e.sortBy="degree",e.nodes=[],e.edges=[],e.width=300,e.height=300,e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=t.edges,r=e.length;if(0!==r){t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var o=t.center;if(1===r)return e[0].x=o[0],e[0].y=o[1],void(t.onLayoutEnd&&t.onLayoutEnd());var i,a=[];i=m(t.nodeSize)?Math.max(t.nodeSize[0],t.nodeSize[1]):t.nodeSize,e.forEach((function(t){a.push(t);var e=i;m(t.size)?e=Math.max(t.size[0],t.size[1]):y(t.size)&&(e=t.size),i=Math.max(i,e)})),t.clockwise=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise;var u={},s={};if(a.forEach((function(t,e){u[t.id]=t,s[t.id]=e})),!("degree"!==t.sortBy&&p(t.sortBy)&&void 0!==a[0][t.sortBy]||(t.sortBy="degree",y(e[0].degree)))){var c=b(e.length,s,n);a.forEach((function(t,e){t.degree=c[e]}))}a.sort((function(e,n){return n[t.sortBy]-e[t.sortBy]})),t.maxValueNode=a[0],t.maxLevelDiff=t.maxLevelDiff||t.maxValueNode[t.sortBy]/4;var f=[[]],l=f[0];a.forEach((function(e){if(l.length>0){var n=Math.abs(l[0][t.sortBy]-e[t.sortBy]);t.maxLevelDiff&&n>=t.maxLevelDiff&&(l=[],f.push(l))}l.push(e)}));var h=i+t.minNodeSpacing;if(!t.preventOverlap){var d=f.length>0&&f[0].length>1,v=(Math.min(t.width,t.height)/2-h)/(f.length+(d?1:0));h=Math.min(h,v)}var g=0;if(f.forEach((function(e){var n=t.sweep;void 0===n&&(n=2*Math.PI-2*Math.PI/e.length);var r=e.dTheta=n/Math.max(1,e.length-1);if(e.length>1&&t.preventOverlap){var o=Math.cos(r)-Math.cos(0),i=Math.sin(r)-Math.sin(0),a=Math.sqrt(h*h/(o*o+i*i));g=Math.max(a,g)}e.r=g,g+=h})),t.equidistant){for(var _=0,x=0,w=0;w<f.length;w++){var E=f[w].r-x;_=Math.max(_,E)}x=0,f.forEach((function(t,e){0===e&&(x=t.r),t.r=x,x+=_}))}return f.forEach((function(e){var n=e.dTheta,r=e.r;e.forEach((function(e,i){var a=t.startAngle+(t.clockwise?1:-1)*n*i;e.x=o[0]+r*Math.cos(a),e.y=o[1]+r*Math.sin(a)}))})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}t.onLayoutEnd&&t.onLayoutEnd()}},{key:"getType",value:function(){return"concentric"}}])&&tr(e.prototype,n),r&&tr(e,r),i}(I);function ar(t){return(ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sr(t,e){return(sr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=lr(t);if(e){var o=lr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fr(this,n)}}function fr(t,e){return!e||"object"!==ar(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lr(t){return(lr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sr(t,e)}(i,t);var e,n,r,o=cr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).center=[0,0],e.linkDistance=50,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{center:[0,0],linkDistance:50}}},{key:"execute",value:function(){var t=this.nodes,e=this.edges,n=void 0===e?[]:e,r=this.center;if(t&&0!==t.length){if(1===t.length)return t[0].x=r[0],t[0].y=r[1],void(this.onLayoutEnd&&this.onLayoutEnd());var o=this.linkDistance,i=x({nodes:t,edges:n},!1),a=_(i);this.handleInfinity(a);var u,s,c=(u=o,s=[],a.forEach((function(t){var e=[];t.forEach((function(t){e.push(t*u)})),s.push(e)})),s);this.scaledDistances=c;var f=this.runMDS();return this.positions=f,f.forEach((function(e,n){t[n].x=e[0]+r[0],t[n].y=e[1]+r[1]})),this.onLayoutEnd&&this.onLayoutEnd(),{nodes:t,edges:n}}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"runMDS",value:function(){var t=this.scaledDistances,e=gn.mul(gn.pow(t,2),-.5),n=e.mean("row"),r=e.mean("column"),o=e.mean();e.add(o).subRowVector(n).subColumnVector(r);var i=new On(e),a=gn.sqrt(i.diagonalMatrix).diagonal();return i.leftSingularVectors.toJSON().map((function(t){return gn.mul([t],[a]).toJSON()[0].splice(0,2)}))}},{key:"handleInfinity",value:function(t){var e=-999999;t.forEach((function(t){t.forEach((function(t){t!==1/0&&e<t&&(e=t)}))})),t.forEach((function(n,r){n.forEach((function(n,o){n===1/0&&(t[r][o]=e)}))}))}},{key:"getType",value:function(){return"mds"}}])&&ur(e.prototype,n),r&&ur(e,r),i}(I);function dr(t){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vr(t,e){return(vr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=gr(t);if(e){var o=gr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return yr(this,n)}}function yr(t,e){return!e||"object"!==dr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gr(t){return(gr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var br=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vr(t,e)}(i,t);var e,n,r,o=mr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.gravity=10,e.speed=1,e.clustering=!1,e.clusterGravity=10,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){var t=this,e=this.nodes;if(e&&0!==e.length){this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var n=this.center;if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(this.onLayoutEnd&&this.onLayoutEnd());var r={},o={};return e.forEach((function(e,n){y(e.x)||(e.x=Math.random()*t.width),y(e.y)||(e.y=Math.random()*t.height),r[e.id]=e,o[e.id]=n})),this.nodeMap=r,this.nodeIdxMap=o,this.run()}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"run",value:function(){var t=this,e=t.nodes,n=t.edges,r=t.maxIteration,o=t.center,i=t.height*t.width,a=Math.sqrt(i)/10,u=i/(e.length+1),s=Math.sqrt(u),c=t.gravity,f=t.speed,l=t.clustering,h={};if(l)for(var d in e.forEach((function(t){if(void 0===h[t.cluster]){var e={name:t.cluster,cx:0,cy:0,count:0};h[t.cluster]=e}var n=h[t.cluster];y(t.x)&&(n.cx+=t.x),y(t.y)&&(n.cy+=t.y),n.count++})),h)h[d].cx/=h[d].count,h[d].cy/=h[d].count;for(var p=function(r){var i=[];if(e.forEach((function(t,e){i[e]={x:0,y:0}})),t.applyCalculate(e,n,i,s,u),l){var d=t.clusterGravity||c;for(var p in e.forEach((function(t,e){if(y(t.x)&&y(t.y)){var n=h[t.cluster],r=Math.sqrt((t.x-n.cx)*(t.x-n.cx)+(t.y-n.cy)*(t.y-n.cy)),o=s*d;i[e].x-=o*(t.x-n.cx)/r,i[e].y-=o*(t.y-n.cy)/r}})),h)h[p].cx=0,h[p].cy=0,h[p].count=0;for(var v in e.forEach((function(t){var e=h[t.cluster];y(t.x)&&(e.cx+=t.x),y(t.y)&&(e.cy+=t.y),e.count++})),h)h[v].cx/=h[v].count,h[v].cy/=h[v].count}e.forEach((function(t,e){if(y(t.x)&&y(t.y)){var n=.01*s*c;i[e].x-=n*(t.x-o[0]),i[e].y-=n*(t.y-o[1])}})),e.forEach((function(t,e){if(y(t.x)&&y(t.y)){var n=Math.sqrt(i[e].x*i[e].x+i[e].y*i[e].y);if(n>0){var r=Math.min(a*(f/800),n);t.x+=i[e].x/n*r,t.y+=i[e].y/n*r}}}))},v=0;v<r;v++)p();return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}},{key:"applyCalculate",value:function(t,e,n,r,o){this.calRepulsive(t,n,o),this.calAttractive(e,n,r)}},{key:"calRepulsive",value:function(t,e,n){t.forEach((function(r,o){e[o]={x:0,y:0},t.forEach((function(t,i){if(o!==i&&y(r.x)&&y(t.x)&&y(r.y)&&y(t.y)){var a=r.x-t.x,u=r.y-t.y,s=a*a+u*u;if(0===s){s=1;var c=o>i?1:-1;a=.01*c,u=.01*c}var f=n/s;e[o].x+=a*f,e[o].y+=u*f}}))}))}},{key:"calAttractive",value:function(t,e,n){var r=this;t.forEach((function(t){if(t.source&&t.target){var o=r.nodeIdxMap[t.source],i=r.nodeIdxMap[t.target];if(o!==i){var a=r.nodeMap[t.source],u=r.nodeMap[t.target];if(y(u.x)&&y(a.x)&&y(u.y)&&y(a.y)){var s=u.x-a.x,c=u.y-a.y,f=Math.sqrt(s*s+c*c),l=f*f/n;e[i].x-=s/f*l,e[i].y-=c/f*l,e[o].x+=s/f*l,e[o].y+=c/f*l}}}}))}},{key:"getType",value:function(){return"fruchterman"}}])&&pr(e.prototype,n),r&&pr(e,r),i}(I),_r=n(6),xr=n.n(_r),wr=n(2),Er=n.n(wr),Sr=n(4),Tr=n.n(Sr),Ar=n(7),Ir=n.n(Ar),kr=(n(16),n(159),n(5)),Or=n.n(kr),Dr=n(8),Rr=n.n(Dr),Mr=1;function Cr(){return Mr++}var Nr=function t(e){Er()(this,t)},Pr=function(){function t(e){Er()(this,t),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=e}var e;return Tr()(t,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(t){return this.lookup[t]>-1}},{key:"create",value:function(t,e){this.lookup[t]=this.components.length;var n=new this.clazz(e||{});return this.components.push(n),this.entities.push(t),n}},{key:"remove",value:function(t){var e=this.lookup[t];e>-1&&e<this.components.length-1&&(this.components[e]=this.components[this.components.length-1],this.entities[e]=this.entities[this.entities.length-1],this.lookup[this.entities[e]]=e),this.components.pop(),this.entities.pop(),delete this.lookup[t]}},{key:"removeKeepSorted",value:function(t){var e=this.lookup[t];if(e>-1){var n=this.entities[e];if(e<this.components.length-1){for(var r=e+1;r<this.components.length;++r)this.components[r-1]=this.components[r];for(var o=e+1;o<this.entities.length;++o)this.entities[o-1]=this.entities[o],this.lookup[this.entities[o-1]]=o-1}this.components.pop(),this.entities.pop(),delete this.lookup[n]}}},{key:"moveItem",value:function(t,e){if(t!==e){for(var n=this.components[t],r=this.entities[t],o=t<e?1:-1,i=t;i!==e;i+=o){var a=i+o;this.components[i]=this.components[a],this.entities[i]=this.entities[a],this.lookup[this.entities[i]]=i}this.components[e]=n,this.entities[e]=r,this.lookup[r]=e}}},{key:"getEntity",value:function(t){return this.entities[t]}},{key:"getComponent",value:function(t){return this.components[t]}},{key:"getComponentByEntity",value:function(t){var e=this.lookup[t];return e>-1?this.components[e]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(t){for(var e=0,n=Object.keys(this.lookup);e<n.length;e++){var r=n[e],o=Number(r);if(this.lookup[o]===t)return o}return-1}},{key:"find",value:function(t){for(var e=0;e<this.getCount();e++){var n=this.getComponent(e);if(t(n,e))return n}return null}},{key:"findIndex",value:function(t){for(var e=0;e<this.getCount();e++){if(t(this.getComponent(e),e))return e}return-1}},{key:"forEach",value:function(t){for(var e=0,n=Object.keys(this.lookup);e<n.length;e++){var r=n[e],o=Number(r),i=this.lookup[o];t(o,this.getComponent(i))}}},{key:"forEachAsync",value:(e=Rr()(Or.a.mark((function t(e){var n,r,o,i,a;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=0,r=Object.keys(this.lookup);case 1:if(!(n<r.length)){t.next=10;break}return o=r[n],i=Number(o),a=this.lookup[i],t.next=7,e(i,this.getComponent(a));case 7:n++,t.next=1;break;case 10:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"map",value:function(t){for(var e=[],n=0,r=Object.keys(this.lookup);n<r.length;n++){var o=r[n],i=Number(o),a=this.lookup[i];e.push(t(i,this.getComponent(a)))}return e}}]),t}(),Gr=n(34),jr=n.n(Gr),Lr=n(1),Ur={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")},Br=function t(){Er()(this,t),this.index=void 0},Fr=function t(){Er()(this,t),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},zr=function(){function t(){Er()(this,t),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return Tr()(t,[{key:"read",value:function(t){return this.reads.find((function(e){return e.index===t.index}))||this.reads.push(t),t}},{key:"sample",value:function(t){return this.read(t),t}},{key:"write",value:function(t,e){if(this.writes.find((function(t){return t.index===e.index})))return e;var n=t.getResourceNode(e);n.resource.version++,n.resource.imported&&(this.hasSideEffect=!0);var r=t.createResourceNode(n.resource);return t.getResourceNode(r).writer=this,this.writes.push(r),r}}]),t}(),Vr=n(14),Wr=n.n(Vr),Xr=n(15),Hr=n.n(Xr),qr=n(9),Yr=n.n(qr);function Kr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Zr,Qr,Jr,$r,to,eo=function(t){Wr()(n,t);var e=Kr(n);function n(){var t;Er()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).version=0,t.refs=0,t.name=void 0,t.imported=void 0,t.priority=void 0,t.discardStart=!0,t.discardEnd=!1,t.descriptor=void 0,t.resource=void 0,t}return Tr()(n,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){this.imported}}]),n}((function t(){Er()(this,t),this.first=void 0,this.last=void 0})),no=function t(){Er()(this,t),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0};function ro(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return oo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oo(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function oo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var io=(Zr=Object(Lr.injectable)(),Qr=Object(Lr.inject)(Ur.RenderEngine),Zr(($r=function(){function t(){Er()(this,t),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],xr()(this,"engine",to,this)}var e,n;return Tr()(t,[{key:"execute",value:(n=Rr()(Or.a.mark((function t(e){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.compile(),t.next=3,this.executePassNodes(e);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"tearDown",value:function(){this.frameGraphPasses.forEach((function(t){t.tearDown&&t.tearDown()})),this.reset()}},{key:"addPass",value:function(t,e,n,r){var o=new Fr;o.execute=n,r&&(o.tearDown=r),o.name=t;var i=new zr;return i.name=t,this.passNodes.push(i),this.frameGraphPasses.push(o),e(this,i,o),o}},{key:"getPass",value:function(t){return this.frameGraphPasses.find((function(e){return e.name===t}))}},{key:"compile",value:function(){var t,e=this,n=ro(this.passNodes);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.refCount=r.writes.length+(r.hasSideEffect?1:0),r.reads.forEach((function(t){e.resourceNodes[t.index].readerCount++}))}}catch(t){n.e(t)}finally{n.f()}var o,i=[],a=ro(this.resourceNodes);try{for(a.s();!(o=a.n()).done;){var u=o.value;0===u.readerCount&&i.push(u)}}catch(t){a.e(t)}finally{a.f()}for(;i.length;){var s=i.pop(),c=s&&s.writer;if(c&&0==--c.refCount){var f,l=ro(c.reads);try{for(l.s();!(f=l.n()).done;){var h=f.value,d=this.resourceNodes[h.index];0==--d.readerCount&&i.push(d)}}catch(t){l.e(t)}finally{l.f()}}}this.resourceNodes.forEach((function(t){t.resource.refs+=t.readerCount}));var p,v=ro(this.passNodes);try{for(v.s();!(p=v.n()).done;){var m=p.value;if(m.refCount){var y,g=ro(m.reads);try{for(g.s();!(y=g.n()).done;){var b=y.value,_=this.resourceNodes[b.index].resource;_.first=_.first?_.first:m,_.last=m}}catch(t){g.e(t)}finally{g.f()}var x,w=ro(m.writes);try{for(w.s();!(x=w.n()).done;){var E=x.value,S=this.resourceNodes[E.index].resource;S.first=S.first?S.first:m,S.last=m}}catch(t){w.e(t)}finally{w.f()}}}}catch(t){v.e(t)}finally{v.f()}for(var T=0;T<2;T++){var A,I=ro(this.resourceNodes);try{for(I.s();!(A=I.n()).done;){var k=A.value.resource;if(k.priority===T&&k.refs){var O=k.first,D=k.last;O&&D&&(O.devirtualize.push(k),D.destroy.push(k))}}}catch(t){I.e(t)}finally{I.f()}}}},{key:"executePassNodes",value:(e=Rr()(Or.a.mark((function t(e){var n,r,o,i,a,u,s,c,f,l,h,d,p;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=ro(this.passNodes.entries()),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=18;break}if(o=jr()(r.value,2),i=o[0],!(a=o[1]).refCount){t.next=16;break}u=ro(a.devirtualize);try{for(u.s();!(s=u.n()).done;)s.value.preExecuteDevirtualize(this.engine)}catch(t){u.e(t)}finally{u.f()}c=ro(a.destroy);try{for(c.s();!(f=c.n()).done;)f.value.preExecuteDestroy(this.engine)}catch(t){c.e(t)}finally{c.f()}return t.next=12,this.frameGraphPasses[i].execute(this,this.frameGraphPasses[i],e);case 12:l=ro(a.devirtualize);try{for(l.s();!(h=l.n()).done;)h.value.postExecuteDevirtualize(this.engine)}catch(t){l.e(t)}finally{l.f()}d=ro(a.destroy);try{for(d.s();!(p=d.n()).done;)p.value.postExecuteDestroy(this.engine)}catch(t){d.e(t)}finally{d.f()}case 16:t.next=3;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(1),n.e(t.t0);case 23:return t.prev=23,n.f(),t.finish(23);case 26:this.reset();case 27:case"end":return t.stop()}}),t,this,[[1,20,23,26]])}))),function(t){return e.apply(this,arguments)})},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(t){return this.resourceNodes[t.index]}},{key:"createResourceNode",value:function(t){var e=new no;e.resource=t,e.version=t.version,this.resourceNodes.push(e);var n=new Br;return n.index=this.resourceNodes.length-1,n}},{key:"createTexture",value:function(t,e,n){var r=new eo;return r.name=e,r.descriptor=n,this.createResourceNode(r)}},{key:"createRenderTarget",value:function(t,e,n){var r=new eo;return r.name=e,r.descriptor=n,this.createResourceNode(r)}},{key:"present",value:function(t){this.addPass("Present",(function(e,n){n.read(t),n.hasSideEffect=!0}),Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))))}}]),t}(),to=Ir()($r.prototype,"engine",[Qr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jr=$r))||Jr),ao=n(0),uo=n.n(ao),so=n(12),co=n.n(so);function fo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fo(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ho(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var po=function(t){Wr()(n,t);var e=ho(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).dirty=!0,r.attributes=[],r.indices=void 0,r.indicesBuffer=void 0,r.vertexCount=void 0,r.maxInstancedCount=void 0,r.aabb=void 0,Object.assign(co()(r),t),r}return Tr()(n,[{key:"setAttribute",value:function(t,e,n,r){var o=this.attributes.find((function(e){return e.name===t}));return o?(o.data=e,o.dirty=!0):this.attributes.push(lo(lo({dirty:!0,name:t,data:e},n),{},{bufferGetter:r})),this.dirty=!0,this}},{key:"setIndex",value:function(t){return this.indices=new Uint32Array(t.buffer?t.buffer:t),this.dirty=!0,this}}]),n}(Nr),vo=(n(168),1e-6),mo="undefined"!=typeof Float32Array?Float32Array:Array,yo=Math.random;Math.PI;function go(){var t=new mo(9);return mo!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function bo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function _o(t){var e=new mo(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function xo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function wo(t,e,n,r,o,i,a,u,s){var c=new mo(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=o,c[5]=i,c[6]=a,c[7]=u,c[8]=s,c}function Eo(t,e,n,r,o,i,a,u,s,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=u,t[7]=s,t[8]=c,t}function So(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function To(t,e){if(t===e){var n=e[1],r=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Ao(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=f*a-u*c,h=-f*i+u*s,d=c*i-a*s,p=n*l+r*h+o*d;return p?(p=1/p,t[0]=l*p,t[1]=(-f*r+o*c)*p,t[2]=(u*r-o*a)*p,t[3]=h*p,t[4]=(f*n-o*s)*p,t[5]=(-u*n+o*i)*p,t[6]=d*p,t[7]=(-c*n+r*s)*p,t[8]=(a*n-r*i)*p,t):null}function Io(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8];return t[0]=a*f-u*c,t[1]=o*c-r*f,t[2]=r*u-o*a,t[3]=u*s-i*f,t[4]=n*f-o*s,t[5]=o*i-n*u,t[6]=i*c-a*s,t[7]=r*s-n*c,t[8]=n*a-r*i,t}function ko(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5],u=t[6],s=t[7],c=t[8];return e*(c*i-a*s)+n*(-c*o+a*u)+r*(s*o-i*u)}function Oo(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=n[0],d=n[1],p=n[2],v=n[3],m=n[4],y=n[5],g=n[6],b=n[7],_=n[8];return t[0]=h*r+d*a+p*c,t[1]=h*o+d*u+p*f,t[2]=h*i+d*s+p*l,t[3]=v*r+m*a+y*c,t[4]=v*o+m*u+y*f,t[5]=v*i+m*s+y*l,t[6]=g*r+b*a+_*c,t[7]=g*o+b*u+_*f,t[8]=g*i+b*s+_*l,t}function Do(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=n[0],d=n[1];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=u,t[5]=s,t[6]=h*r+d*a+c,t[7]=h*o+d*u+f,t[8]=h*i+d*s+l,t}function Ro(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=Math.sin(n),d=Math.cos(n);return t[0]=d*r+h*a,t[1]=d*o+h*u,t[2]=d*i+h*s,t[3]=d*a-h*r,t[4]=d*u-h*o,t[5]=d*s-h*i,t[6]=c,t[7]=f,t[8]=l,t}function Mo(t,e,n){var r=n[0],o=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Co(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function No(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Po(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Go(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function jo(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n+n,u=r+r,s=o+o,c=n*a,f=r*a,l=r*u,h=o*a,d=o*u,p=o*s,v=i*a,m=i*u,y=i*s;return t[0]=1-l-p,t[3]=f-y,t[6]=h+m,t[1]=f+y,t[4]=1-c-p,t[7]=d-v,t[2]=h-m,t[5]=d+v,t[8]=1-c-l,t}function Lo(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],d=e[11],p=e[12],v=e[13],m=e[14],y=e[15],g=n*u-r*a,b=n*s-o*a,_=n*c-i*a,x=r*s-o*u,w=r*c-i*u,E=o*c-i*s,S=f*v-l*p,T=f*m-h*p,A=f*y-d*p,I=l*m-h*v,k=l*y-d*v,O=h*y-d*m,D=g*O-b*k+_*I+x*A-w*T+E*S;return D?(D=1/D,t[0]=(u*O-s*k+c*I)*D,t[1]=(s*A-a*O-c*T)*D,t[2]=(a*k-u*A+c*S)*D,t[3]=(o*k-r*O-i*I)*D,t[4]=(n*O-o*A+i*T)*D,t[5]=(r*A-n*k-i*S)*D,t[6]=(v*E-m*w+y*x)*D,t[7]=(m*_-p*E-y*b)*D,t[8]=(p*w-v*_+y*g)*D,t):null}function Uo(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Bo(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Fo(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function zo(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function Vo(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function Wo(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function Xo(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function Ho(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function qo(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=e[0],h=e[1],d=e[2],p=e[3],v=e[4],m=e[5],y=e[6],g=e[7],b=e[8];return Math.abs(n-l)<=vo*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-h)<=vo*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(o-d)<=vo*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(i-p)<=vo*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-v)<=vo*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(u-m)<=vo*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(s-y)<=vo*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(c-g)<=vo*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(f-b)<=vo*Math.max(1,Math.abs(f),Math.abs(b))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Yo=Oo,Ko=Vo;function Zo(){var t=new mo(16);return mo!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Qo(t){var e=new mo(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Jo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function $o(t,e,n,r,o,i,a,u,s,c,f,l,h,d,p,v){var m=new mo(16);return m[0]=t,m[1]=e,m[2]=n,m[3]=r,m[4]=o,m[5]=i,m[6]=a,m[7]=u,m[8]=s,m[9]=c,m[10]=f,m[11]=l,m[12]=h,m[13]=d,m[14]=p,m[15]=v,m}function ti(t,e,n,r,o,i,a,u,s,c,f,l,h,d,p,v,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=u,t[7]=s,t[8]=c,t[9]=f,t[10]=l,t[11]=h,t[12]=d,t[13]=p,t[14]=v,t[15]=m,t}function ei(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ni(t,e){if(t===e){var n=e[1],r=e[2],o=e[3],i=e[6],a=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=o,t[13]=a,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ri(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],d=e[11],p=e[12],v=e[13],m=e[14],y=e[15],g=n*u-r*a,b=n*s-o*a,_=n*c-i*a,x=r*s-o*u,w=r*c-i*u,E=o*c-i*s,S=f*v-l*p,T=f*m-h*p,A=f*y-d*p,I=l*m-h*v,k=l*y-d*v,O=h*y-d*m,D=g*O-b*k+_*I+x*A-w*T+E*S;return D?(D=1/D,t[0]=(u*O-s*k+c*I)*D,t[1]=(o*k-r*O-i*I)*D,t[2]=(v*E-m*w+y*x)*D,t[3]=(h*w-l*E-d*x)*D,t[4]=(s*A-a*O-c*T)*D,t[5]=(n*O-o*A+i*T)*D,t[6]=(m*_-p*E-y*b)*D,t[7]=(f*E-h*_+d*b)*D,t[8]=(a*k-u*A+c*S)*D,t[9]=(r*A-n*k-i*S)*D,t[10]=(p*w-v*_+y*g)*D,t[11]=(l*_-f*w-d*g)*D,t[12]=(u*T-a*I-s*S)*D,t[13]=(n*I-r*T+o*S)*D,t[14]=(v*b-p*x-m*g)*D,t[15]=(f*x-l*b+h*g)*D,t):null}function oi(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],d=e[11],p=e[12],v=e[13],m=e[14],y=e[15];return t[0]=u*(h*y-d*m)-l*(s*y-c*m)+v*(s*d-c*h),t[1]=-(r*(h*y-d*m)-l*(o*y-i*m)+v*(o*d-i*h)),t[2]=r*(s*y-c*m)-u*(o*y-i*m)+v*(o*c-i*s),t[3]=-(r*(s*d-c*h)-u*(o*d-i*h)+l*(o*c-i*s)),t[4]=-(a*(h*y-d*m)-f*(s*y-c*m)+p*(s*d-c*h)),t[5]=n*(h*y-d*m)-f*(o*y-i*m)+p*(o*d-i*h),t[6]=-(n*(s*y-c*m)-a*(o*y-i*m)+p*(o*c-i*s)),t[7]=n*(s*d-c*h)-a*(o*d-i*h)+f*(o*c-i*s),t[8]=a*(l*y-d*v)-f*(u*y-c*v)+p*(u*d-c*l),t[9]=-(n*(l*y-d*v)-f*(r*y-i*v)+p*(r*d-i*l)),t[10]=n*(u*y-c*v)-a*(r*y-i*v)+p*(r*c-i*u),t[11]=-(n*(u*d-c*l)-a*(r*d-i*l)+f*(r*c-i*u)),t[12]=-(a*(l*m-h*v)-f*(u*m-s*v)+p*(u*h-s*l)),t[13]=n*(l*m-h*v)-f*(r*m-o*v)+p*(r*h-o*l),t[14]=-(n*(u*m-s*v)-a*(r*m-o*v)+p*(r*s-o*u)),t[15]=n*(u*h-s*l)-a*(r*h-o*l)+f*(r*s-o*u),t}function ii(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5],u=t[6],s=t[7],c=t[8],f=t[9],l=t[10],h=t[11],d=t[12],p=t[13],v=t[14],m=t[15];return(e*a-n*i)*(l*m-h*v)-(e*u-r*i)*(f*m-h*p)+(e*s-o*i)*(f*v-l*p)+(n*u-r*a)*(c*m-h*d)-(n*s-o*a)*(c*v-l*d)+(r*s-o*u)*(c*p-f*d)}function ai(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],d=e[10],p=e[11],v=e[12],m=e[13],y=e[14],g=e[15],b=n[0],_=n[1],x=n[2],w=n[3];return t[0]=b*r+_*u+x*l+w*v,t[1]=b*o+_*s+x*h+w*m,t[2]=b*i+_*c+x*d+w*y,t[3]=b*a+_*f+x*p+w*g,b=n[4],_=n[5],x=n[6],w=n[7],t[4]=b*r+_*u+x*l+w*v,t[5]=b*o+_*s+x*h+w*m,t[6]=b*i+_*c+x*d+w*y,t[7]=b*a+_*f+x*p+w*g,b=n[8],_=n[9],x=n[10],w=n[11],t[8]=b*r+_*u+x*l+w*v,t[9]=b*o+_*s+x*h+w*m,t[10]=b*i+_*c+x*d+w*y,t[11]=b*a+_*f+x*p+w*g,b=n[12],_=n[13],x=n[14],w=n[15],t[12]=b*r+_*u+x*l+w*v,t[13]=b*o+_*s+x*h+w*m,t[14]=b*i+_*c+x*d+w*y,t[15]=b*a+_*f+x*p+w*g,t}function ui(t,e,n){var r,o,i,a,u,s,c,f,l,h,d,p,v=n[0],m=n[1],y=n[2];return e===t?(t[12]=e[0]*v+e[4]*m+e[8]*y+e[12],t[13]=e[1]*v+e[5]*m+e[9]*y+e[13],t[14]=e[2]*v+e[6]*m+e[10]*y+e[14],t[15]=e[3]*v+e[7]*m+e[11]*y+e[15]):(r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],d=e[10],p=e[11],t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=u,t[5]=s,t[6]=c,t[7]=f,t[8]=l,t[9]=h,t[10]=d,t[11]=p,t[12]=r*v+u*m+l*y+e[12],t[13]=o*v+s*m+h*y+e[13],t[14]=i*v+c*m+d*y+e[14],t[15]=a*v+f*m+p*y+e[15]),t}function si(t,e,n){var r=n[0],o=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ci(t,e,n,r){var o,i,a,u,s,c,f,l,h,d,p,v,m,y,g,b,_,x,w,E,S,T,A,I,k=r[0],O=r[1],D=r[2],R=Math.hypot(k,O,D);return R<vo?null:(k*=R=1/R,O*=R,D*=R,o=Math.sin(n),a=1-(i=Math.cos(n)),u=e[0],s=e[1],c=e[2],f=e[3],l=e[4],h=e[5],d=e[6],p=e[7],v=e[8],m=e[9],y=e[10],g=e[11],b=k*k*a+i,_=O*k*a+D*o,x=D*k*a-O*o,w=k*O*a-D*o,E=O*O*a+i,S=D*O*a+k*o,T=k*D*a+O*o,A=O*D*a-k*o,I=D*D*a+i,t[0]=u*b+l*_+v*x,t[1]=s*b+h*_+m*x,t[2]=c*b+d*_+y*x,t[3]=f*b+p*_+g*x,t[4]=u*w+l*E+v*S,t[5]=s*w+h*E+m*S,t[6]=c*w+d*E+y*S,t[7]=f*w+p*E+g*S,t[8]=u*T+l*A+v*I,t[9]=s*T+h*A+m*I,t[10]=c*T+d*A+y*I,t[11]=f*T+p*A+g*I,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function fi(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[4],a=e[5],u=e[6],s=e[7],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*o+c*r,t[5]=a*o+f*r,t[6]=u*o+l*r,t[7]=s*o+h*r,t[8]=c*o-i*r,t[9]=f*o-a*r,t[10]=l*o-u*r,t[11]=h*o-s*r,t}function li(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[0],a=e[1],u=e[2],s=e[3],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o-c*r,t[1]=a*o-f*r,t[2]=u*o-l*r,t[3]=s*o-h*r,t[8]=i*r+c*o,t[9]=a*r+f*o,t[10]=u*r+l*o,t[11]=s*r+h*o,t}function hi(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[0],a=e[1],u=e[2],s=e[3],c=e[4],f=e[5],l=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o+c*r,t[1]=a*o+f*r,t[2]=u*o+l*r,t[3]=s*o+h*r,t[4]=c*o-i*r,t[5]=f*o-a*r,t[6]=l*o-u*r,t[7]=h*o-s*r,t}function di(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function pi(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function vi(t,e,n){var r,o,i,a=n[0],u=n[1],s=n[2],c=Math.hypot(a,u,s);return c<vo?null:(a*=c=1/c,u*=c,s*=c,r=Math.sin(e),i=1-(o=Math.cos(e)),t[0]=a*a*i+o,t[1]=u*a*i+s*r,t[2]=s*a*i-u*r,t[3]=0,t[4]=a*u*i-s*r,t[5]=u*u*i+o,t[6]=s*u*i+a*r,t[7]=0,t[8]=a*s*i+u*r,t[9]=u*s*i-a*r,t[10]=s*s*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function mi(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function yi(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function gi(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function bi(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=r+r,s=o+o,c=i+i,f=r*u,l=r*s,h=r*c,d=o*s,p=o*c,v=i*c,m=a*u,y=a*s,g=a*c;return t[0]=1-(d+v),t[1]=l+g,t[2]=h-y,t[3]=0,t[4]=l-g,t[5]=1-(f+v),t[6]=p+m,t[7]=0,t[8]=h+y,t[9]=p-m,t[10]=1-(f+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function _i(t,e){var n=new mo(3),r=-e[0],o=-e[1],i=-e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=r*r+o*o+i*i+a*a;return l>0?(n[0]=2*(u*a+f*r+s*i-c*o)/l,n[1]=2*(s*a+f*o+c*r-u*i)/l,n[2]=2*(c*a+f*i+u*o-s*r)/l):(n[0]=2*(u*a+f*r+s*i-c*o),n[1]=2*(s*a+f*o+c*r-u*i),n[2]=2*(c*a+f*i+u*o-s*r)),bi(t,e,n),t}function xi(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function wi(t,e){var n=e[0],r=e[1],o=e[2],i=e[4],a=e[5],u=e[6],s=e[8],c=e[9],f=e[10];return t[0]=Math.hypot(n,r,o),t[1]=Math.hypot(i,a,u),t[2]=Math.hypot(s,c,f),t}function Ei(t,e){var n=new mo(3);wi(n,e);var r=1/n[0],o=1/n[1],i=1/n[2],a=e[0]*r,u=e[1]*o,s=e[2]*i,c=e[4]*r,f=e[5]*o,l=e[6]*i,h=e[8]*r,d=e[9]*o,p=e[10]*i,v=a+f+p,m=0;return v>0?(m=2*Math.sqrt(v+1),t[3]=.25*m,t[0]=(l-d)/m,t[1]=(h-s)/m,t[2]=(u-c)/m):a>f&&a>p?(m=2*Math.sqrt(1+a-f-p),t[3]=(l-d)/m,t[0]=.25*m,t[1]=(u+c)/m,t[2]=(h+s)/m):f>p?(m=2*Math.sqrt(1+f-a-p),t[3]=(h-s)/m,t[0]=(u+c)/m,t[1]=.25*m,t[2]=(l+d)/m):(m=2*Math.sqrt(1+p-a-f),t[3]=(u-c)/m,t[0]=(h+s)/m,t[1]=(l+d)/m,t[2]=.25*m),t}function Si(t,e,n,r){var o=e[0],i=e[1],a=e[2],u=e[3],s=o+o,c=i+i,f=a+a,l=o*s,h=o*c,d=o*f,p=i*c,v=i*f,m=a*f,y=u*s,g=u*c,b=u*f,_=r[0],x=r[1],w=r[2];return t[0]=(1-(p+m))*_,t[1]=(h+b)*_,t[2]=(d-g)*_,t[3]=0,t[4]=(h-b)*x,t[5]=(1-(l+m))*x,t[6]=(v+y)*x,t[7]=0,t[8]=(d+g)*w,t[9]=(v-y)*w,t[10]=(1-(l+p))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Ti(t,e,n,r,o){var i=e[0],a=e[1],u=e[2],s=e[3],c=i+i,f=a+a,l=u+u,h=i*c,d=i*f,p=i*l,v=a*f,m=a*l,y=u*l,g=s*c,b=s*f,_=s*l,x=r[0],w=r[1],E=r[2],S=o[0],T=o[1],A=o[2],I=(1-(v+y))*x,k=(d+_)*x,O=(p-b)*x,D=(d-_)*w,R=(1-(h+y))*w,M=(m+g)*w,C=(p+b)*E,N=(m-g)*E,P=(1-(h+v))*E;return t[0]=I,t[1]=k,t[2]=O,t[3]=0,t[4]=D,t[5]=R,t[6]=M,t[7]=0,t[8]=C,t[9]=N,t[10]=P,t[11]=0,t[12]=n[0]+S-(I*S+D*T+C*A),t[13]=n[1]+T-(k*S+R*T+N*A),t[14]=n[2]+A-(O*S+M*T+P*A),t[15]=1,t}function Ai(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n+n,u=r+r,s=o+o,c=n*a,f=r*a,l=r*u,h=o*a,d=o*u,p=o*s,v=i*a,m=i*u,y=i*s;return t[0]=1-l-p,t[1]=f+y,t[2]=h-m,t[3]=0,t[4]=f-y,t[5]=1-c-p,t[6]=d+v,t[7]=0,t[8]=h+m,t[9]=d-v,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ii(t,e,n,r,o,i,a){var u=1/(n-e),s=1/(o-r),c=1/(i-a);return t[0]=2*i*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*s,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(o+r)*s,t[10]=(a+i)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*i*2*c,t[15]=0,t}function ki(t,e,n,r,o){var i,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(i=1/(r-o),t[10]=(o+r)*i,t[14]=2*o*r*i):(t[10]=-1,t[14]=-2*r),t}function Oi(t,e,n,r){var o=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(a+u),c=2/(o+i);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-u)*s*.5,t[9]=(o-i)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Di(t,e,n,r,o,i,a){var u=1/(e-n),s=1/(r-o),c=1/(i-a);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*u,t[13]=(o+r)*s,t[14]=(a+i)*c,t[15]=1,t}function Ri(t,e,n,r){var o,i,a,u,s,c,f,l,h,d,p=e[0],v=e[1],m=e[2],y=r[0],g=r[1],b=r[2],_=n[0],x=n[1],w=n[2];return Math.abs(p-_)<vo&&Math.abs(v-x)<vo&&Math.abs(m-w)<vo?ei(t):(f=p-_,l=v-x,h=m-w,o=g*(h*=d=1/Math.hypot(f,l,h))-b*(l*=d),i=b*(f*=d)-y*h,a=y*l-g*f,(d=Math.hypot(o,i,a))?(o*=d=1/d,i*=d,a*=d):(o=0,i=0,a=0),u=l*a-h*i,s=h*o-f*a,c=f*i-l*o,(d=Math.hypot(u,s,c))?(u*=d=1/d,s*=d,c*=d):(u=0,s=0,c=0),t[0]=o,t[1]=u,t[2]=f,t[3]=0,t[4]=i,t[5]=s,t[6]=l,t[7]=0,t[8]=a,t[9]=c,t[10]=h,t[11]=0,t[12]=-(o*p+i*v+a*m),t[13]=-(u*p+s*v+c*m),t[14]=-(f*p+l*v+h*m),t[15]=1,t)}function Mi(t,e,n,r){var o=e[0],i=e[1],a=e[2],u=r[0],s=r[1],c=r[2],f=o-n[0],l=i-n[1],h=a-n[2],d=f*f+l*l+h*h;d>0&&(f*=d=1/Math.sqrt(d),l*=d,h*=d);var p=s*h-c*l,v=c*f-u*h,m=u*l-s*f;return(d=p*p+v*v+m*m)>0&&(p*=d=1/Math.sqrt(d),v*=d,m*=d),t[0]=p,t[1]=v,t[2]=m,t[3]=0,t[4]=l*m-h*v,t[5]=h*p-f*m,t[6]=f*v-l*p,t[7]=0,t[8]=f,t[9]=l,t[10]=h,t[11]=0,t[12]=o,t[13]=i,t[14]=a,t[15]=1,t}function Ci(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Ni(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Pi(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Gi(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function ji(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Li(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Ui(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Bi(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=t[9],h=t[10],d=t[11],p=t[12],v=t[13],m=t[14],y=t[15],g=e[0],b=e[1],_=e[2],x=e[3],w=e[4],E=e[5],S=e[6],T=e[7],A=e[8],I=e[9],k=e[10],O=e[11],D=e[12],R=e[13],M=e[14],C=e[15];return Math.abs(n-g)<=vo*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-b)<=vo*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(o-_)<=vo*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(i-x)<=vo*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(a-w)<=vo*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(u-E)<=vo*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(s-S)<=vo*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(c-T)<=vo*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(f-A)<=vo*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(l-I)<=vo*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(h-k)<=vo*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(d-O)<=vo*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(p-D)<=vo*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(v-R)<=vo*Math.max(1,Math.abs(v),Math.abs(R))&&Math.abs(m-M)<=vo*Math.max(1,Math.abs(m),Math.abs(M))&&Math.abs(y-C)<=vo*Math.max(1,Math.abs(y),Math.abs(C))}var Fi=ai,zi=Gi;function Vi(){var t=new mo(3);return mo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Wi(t){var e=new mo(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Xi(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function Hi(t,e,n){var r=new mo(3);return r[0]=t,r[1]=e,r[2]=n,r}function qi(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Yi(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Ki(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Zi(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Qi(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Ji(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function $i(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function ta(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function ea(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function na(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function ra(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function oa(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function ia(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function aa(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return Math.hypot(n,r,o)}function ua(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return n*n+r*r+o*o}function sa(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function ca(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function fa(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function la(t,e){var n=e[0],r=e[1],o=e[2],i=n*n+r*r+o*o;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function ha(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function da(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],u=n[1],s=n[2];return t[0]=o*s-i*u,t[1]=i*a-r*s,t[2]=r*u-o*a,t}function pa(t,e,n,r){var o=e[0],i=e[1],a=e[2];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t[2]=a+r*(n[2]-a),t}function va(t,e,n,r,o,i){var a=i*i,u=a*(2*i-3)+1,s=a*(i-2)+i,c=a*(i-1),f=a*(3-2*i);return t[0]=e[0]*u+n[0]*s+r[0]*c+o[0]*f,t[1]=e[1]*u+n[1]*s+r[1]*c+o[1]*f,t[2]=e[2]*u+n[2]*s+r[2]*c+o[2]*f,t}function ma(t,e,n,r,o,i){var a=1-i,u=a*a,s=i*i,c=u*a,f=3*i*u,l=3*s*a,h=s*i;return t[0]=e[0]*c+n[0]*f+r[0]*l+o[0]*h,t[1]=e[1]*c+n[1]*f+r[1]*l+o[1]*h,t[2]=e[2]*c+n[2]*f+r[2]*l+o[2]*h,t}function ya(t,e){e=e||1;var n=2*yo()*Math.PI,r=2*yo()-1,o=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=r*e,t}function ga(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[3]*r+n[7]*o+n[11]*i+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*o+n[8]*i+n[12])/a,t[1]=(n[1]*r+n[5]*o+n[9]*i+n[13])/a,t[2]=(n[2]*r+n[6]*o+n[10]*i+n[14])/a,t}function ba(t,e,n){var r=e[0],o=e[1],i=e[2];return t[0]=r*n[0]+o*n[3]+i*n[6],t[1]=r*n[1]+o*n[4]+i*n[7],t[2]=r*n[2]+o*n[5]+i*n[8],t}function _a(t,e,n){var r=n[0],o=n[1],i=n[2],a=n[3],u=e[0],s=e[1],c=e[2],f=o*c-i*s,l=i*u-r*c,h=r*s-o*u,d=o*h-i*l,p=i*f-r*h,v=r*l-o*f,m=2*a;return f*=m,l*=m,h*=m,d*=2,p*=2,v*=2,t[0]=u+f+d,t[1]=s+l+p,t[2]=c+h+v,t}function xa(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[0],i[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),i[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function wa(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),i[1]=o[1],i[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Ea(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),i[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),i[2]=o[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Sa(t,e){var n=t[0],r=t[1],o=t[2],i=e[0],a=e[1],u=e[2],s=Math.sqrt(n*n+r*r+o*o)*Math.sqrt(i*i+a*a+u*u),c=s&&ha(t,e)/s;return Math.acos(Math.min(Math.max(c,-1),1))}function Ta(t){return t[0]=0,t[1]=0,t[2]=0,t}function Aa(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Ia(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function ka(t,e){var n=t[0],r=t[1],o=t[2],i=e[0],a=e[1],u=e[2];return Math.abs(n-i)<=vo*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-a)<=vo*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-u)<=vo*Math.max(1,Math.abs(o),Math.abs(u))}var Oa,Da=Zi,Ra=Qi,Ma=Ji,Ca=aa,Na=ua,Pa=Xi,Ga=sa,ja=(Oa=Vi(),function(t,e,n,r,o,i){var a,u;for(e||(e=3),n||(n=0),u=r?Math.min(r*e+n,t.length):t.length,a=n;a<u;a+=e)Oa[0]=t[a],Oa[1]=t[a+1],Oa[2]=t[a+2],o(Oa,Oa,i),t[a]=Oa[0],t[a+1]=Oa[1],t[a+2]=Oa[2];return t});function La(){var t=new mo(4);return mo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Ua(t){var e=new mo(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Ba(t,e,n,r){var o=new mo(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o}function Fa(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function za(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t}function Va(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function Wa(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Xa(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function Ha(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function qa(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Ya(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Ka(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function Za(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function Qa(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Ja(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function $a(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function tu(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],i=e[3]-t[3];return Math.hypot(n,r,o,i)}function eu(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],i=e[3]-t[3];return n*n+r*r+o*o+i*i}function nu(t){var e=t[0],n=t[1],r=t[2],o=t[3];return Math.hypot(e,n,r,o)}function ru(t){var e=t[0],n=t[1],r=t[2],o=t[3];return e*e+n*n+r*r+o*o}function ou(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function iu(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function au(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*n+r*r+o*o+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=o*a,t[3]=i*a,t}function uu(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function su(t,e,n,r){var o=n[0]*r[1]-n[1]*r[0],i=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],u=n[1]*r[2]-n[2]*r[1],s=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],f=e[0],l=e[1],h=e[2],d=e[3];return t[0]=l*c-h*s+d*u,t[1]=-f*c+h*a-d*i,t[2]=f*s-l*a+d*o,t[3]=-f*u+l*i-h*o,t}function cu(t,e,n,r){var o=e[0],i=e[1],a=e[2],u=e[3];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t[2]=a+r*(n[2]-a),t[3]=u+r*(n[3]-u),t}function fu(t,e){var n,r,o,i,a,u;e=e||1;do{a=(n=2*yo()-1)*n+(r=2*yo()-1)*r}while(a>=1);do{u=(o=2*yo()-1)*o+(i=2*yo()-1)*i}while(u>=1);var s=Math.sqrt((1-a)/u);return t[0]=e*n,t[1]=e*r,t[2]=e*o*s,t[3]=e*i*s,t}function lu(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3];return t[0]=n[0]*r+n[4]*o+n[8]*i+n[12]*a,t[1]=n[1]*r+n[5]*o+n[9]*i+n[13]*a,t[2]=n[2]*r+n[6]*o+n[10]*i+n[14]*a,t[3]=n[3]*r+n[7]*o+n[11]*i+n[15]*a,t}function hu(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],u=n[1],s=n[2],c=n[3],f=c*r+u*i-s*o,l=c*o+s*r-a*i,h=c*i+a*o-u*r,d=-a*r-u*o-s*i;return t[0]=f*c+d*-a+l*-s-h*-u,t[1]=l*c+d*-u+h*-a-f*-s,t[2]=h*c+d*-s+f*-u-l*-a,t[3]=e[3],t}function du(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function pu(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function vu(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function mu(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=e[0],u=e[1],s=e[2],c=e[3];return Math.abs(n-a)<=vo*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-u)<=vo*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-s)<=vo*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-c)<=vo*Math.max(1,Math.abs(i),Math.abs(c))}var yu=Wa,gu=Xa,bu=Ha,_u=tu,xu=eu,wu=nu,Eu=ru,Su=function(){var t=La();return function(e,n,r,o,i,a){var u,s;for(n||(n=4),r||(r=0),s=o?Math.min(o*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],i(t,t,a),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}();function Tu(){var t=new mo(4);return mo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Au(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Iu(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function ku(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>vo?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Ou(t,e){var n=ds(t,e);return Math.acos(2*n*n-1)}function Du(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=n[0],s=n[1],c=n[2],f=n[3];return t[0]=r*f+a*u+o*c-i*s,t[1]=o*f+a*s+i*u-r*c,t[2]=i*f+a*c+r*s-o*u,t[3]=a*f-r*u-o*s-i*c,t}function Ru(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+a*u,t[1]=o*s+i*u,t[2]=i*s-o*u,t[3]=a*s-r*u,t}function Mu(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s-i*u,t[1]=o*s+a*u,t[2]=i*s+r*u,t[3]=a*s-o*u,t}function Cu(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+o*u,t[1]=o*s-r*u,t[2]=i*s+a*u,t[3]=a*s-i*u,t}function Nu(t,e){var n=e[0],r=e[1],o=e[2];return t[0]=n,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),t}function Pu(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=Math.sqrt(n*n+r*r+o*o),u=Math.exp(i),s=a>0?u*Math.sin(a)/a:0;return t[0]=n*s,t[1]=r*s,t[2]=o*s,t[3]=u*Math.cos(a),t}function Gu(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=Math.sqrt(n*n+r*r+o*o),u=a>0?Math.atan2(a,i)/a:0;return t[0]=n*u,t[1]=r*u,t[2]=o*u,t[3]=.5*Math.log(n*n+r*r+o*o+i*i),t}function ju(t,e,n){return Gu(t,e),hs(t,t,n),Pu(t,t),t}function Lu(t,e,n,r){var o,i,a,u,s,c=e[0],f=e[1],l=e[2],h=e[3],d=n[0],p=n[1],v=n[2],m=n[3];return(i=c*d+f*p+l*v+h*m)<0&&(i=-i,d=-d,p=-p,v=-v,m=-m),1-i>vo?(o=Math.acos(i),a=Math.sin(o),u=Math.sin((1-r)*o)/a,s=Math.sin(r*o)/a):(u=1-r,s=r),t[0]=u*c+s*d,t[1]=u*f+s*p,t[2]=u*l+s*v,t[3]=u*h+s*m,t}function Uu(t){var e=yo(),n=yo(),r=yo(),o=Math.sqrt(1-e),i=Math.sqrt(e);return t[0]=o*Math.sin(2*Math.PI*n),t[1]=o*Math.cos(2*Math.PI*n),t[2]=i*Math.sin(2*Math.PI*r),t[3]=i*Math.cos(2*Math.PI*r),t}function Bu(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*n+r*r+o*o+i*i,u=a?1/a:0;return t[0]=-n*u,t[1]=-r*u,t[2]=-o*u,t[3]=i*u,t}function Fu(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function zu(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var i=(o+1)%3,a=(o+2)%3;n=Math.sqrt(e[3*o+o]-e[3*i+i]-e[3*a+a]+1),t[o]=.5*n,n=.5/n,t[3]=(e[3*i+a]-e[3*a+i])*n,t[i]=(e[3*i+o]+e[3*o+i])*n,t[a]=(e[3*a+o]+e[3*o+a])*n}return t}function Vu(t,e,n,r){var o=.5*Math.PI/180;e*=o,n*=o,r*=o;var i=Math.sin(e),a=Math.cos(e),u=Math.sin(n),s=Math.cos(n),c=Math.sin(r),f=Math.cos(r);return t[0]=i*s*f-a*u*c,t[1]=a*u*f+i*s*c,t[2]=a*s*c-i*u*f,t[3]=a*s*f+i*u*c,t}function Wu(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Xu,Hu,qu,Yu,Ku,Zu,Qu,Ju,$u,ts,es,ns,rs,os,is,as=Ua,us=Ba,ss=Fa,cs=za,fs=Va,ls=Du,hs=Ja,ds=uu,ps=cu,vs=nu,ms=vs,ys=ru,gs=ys,bs=au,_s=vu,xs=mu,ws=(Xu=Vi(),Hu=Hi(1,0,0),qu=Hi(0,1,0),function(t,e,n){var r=ha(e,n);return r<-.999999?(da(Xu,Hu,e),Pa(Xu)<1e-6&&da(Xu,qu,e),la(Xu,Xu),Iu(t,Xu,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(da(Xu,e,n),t[0]=Xu[0],t[1]=Xu[1],t[2]=Xu[2],t[3]=1+r,bs(t,t))}),Es=(Yu=Tu(),Ku=Tu(),function(t,e,n,r,o,i){return Lu(Yu,e,o,i),Lu(Ku,n,r,i),Lu(t,Yu,Ku,2*i*(1-i)),t}),Ss=(Zu=go(),function(t,e,n,r){return Zu[0]=n[0],Zu[3]=n[1],Zu[6]=n[2],Zu[1]=r[0],Zu[4]=r[1],Zu[7]=r[2],Zu[2]=-e[0],Zu[5]=-e[1],Zu[8]=-e[2],bs(t,zu(t,Zu))}),Ts=function(){function t(e,n){Er()(this,t),this.center=void 0,this.halfExtents=void 0,this.min=i.create(),this.max=i.create(),this.update(e,n)}return Tr()(t,[{key:"update",value:function(t,e){this.center=t||i.create(),this.halfExtents=e||i.fromValues(.5,.5,.5),this.min=i.sub(this.min,this.center,this.halfExtents),this.max=i.add(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(t,e){i.add(this.center,e,t),i.scale(this.center,this.center,.5),i.sub(this.halfExtents,e,t),i.scale(this.halfExtents,this.halfExtents,.5),i.copy(this.min,t),i.copy(this.max,e)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(t){var e=this.center,n=e[0],r=e[1],o=e[2],i=this.halfExtents,a=i[0],u=i[1],s=i[2],c=n-a,f=n+a,l=r-u,h=r+u,d=o-s,p=o+s,v=t.center,m=v[0],y=v[1],g=v[2],b=t.halfExtents,_=b[0],x=b[1],w=b[2],E=m-_,S=m+_,T=y-x,A=y+x,I=g-w,k=g+w;E<c&&(c=E),S>f&&(f=S),T<l&&(l=T),A>h&&(h=A),I<d&&(d=I),k>p&&(p=k),e[0]=.5*(c+f),e[1]=.5*(l+h),e[2]=.5*(d+p),i[0]=.5*(f-c),i[1]=.5*(h-l),i[2]=.5*(p-d),this.min[0]=c,this.min[1]=l,this.min[2]=d,this.max[0]=f,this.max[1]=h,this.max[2]=p}},{key:"intersects",value:function(t){var e=this.getMax(),n=this.getMin(),r=t.getMax(),o=t.getMin();return n[0]<=r[0]&&e[0]>=o[0]&&n[1]<=r[1]&&e[1]>=o[1]&&n[2]<=r[2]&&e[2]>=o[2]}},{key:"containsPoint",value:function(t){var e=this.getMin(),n=this.getMax();return!(t[0]<e[0]||t[0]>n[0]||t[1]<e[1]||t[1]>n[1]||t[2]<e[2]||t[2]>n[2])}},{key:"getNegativeFarPoint",value:function(t){return 273===t.pnVertexFlag?i.copy(i.create(),this.min):272===t.pnVertexFlag?i.fromValues(this.min[0],this.min[1],this.max[2]):257===t.pnVertexFlag?i.fromValues(this.min[0],this.max[1],this.min[2]):256===t.pnVertexFlag?i.fromValues(this.min[0],this.max[1],this.max[2]):17===t.pnVertexFlag?i.fromValues(this.max[0],this.min[1],this.min[2]):16===t.pnVertexFlag?i.fromValues(this.max[0],this.min[1],this.max[2]):1===t.pnVertexFlag?i.fromValues(this.max[0],this.max[1],this.min[2]):i.fromValues(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(t){return 273===t.pnVertexFlag?i.copy(i.create(),this.max):272===t.pnVertexFlag?i.fromValues(this.max[0],this.max[1],this.min[2]):257===t.pnVertexFlag?i.fromValues(this.max[0],this.min[1],this.max[2]):256===t.pnVertexFlag?i.fromValues(this.max[0],this.min[1],this.min[2]):17===t.pnVertexFlag?i.fromValues(this.min[0],this.max[1],this.max[2]):16===t.pnVertexFlag?i.fromValues(this.min[0],this.max[1],this.min[2]):1===t.pnVertexFlag?i.fromValues(this.min[0],this.min[1],this.max[2]):i.fromValues(this.min[0],this.min[1],this.min[2])}}]),t}();function As(t){for(var e=new Ts,n=i.fromValues(t[0],t[1],t[2]),r=i.fromValues(t[0],t[1],t[2]),o=3;o<t.length;){var a=t[o++],u=t[o++],s=t[o++];a<n[0]&&(n[0]=a),u<n[1]&&(n[1]=u),s<n[2]&&(n[2]=s),a>r[0]&&(r[0]=a),u>r[1]&&(r[1]=u),s>r[2]&&(r[2]=s)}return e.setMinMax(n,r),e}(Ju=Qu||(Qu={}))[Ju.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",Ju[Ju.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",Ju[Ju.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",Ju[Ju.POINTS=0]="POINTS",Ju[Ju.LINES=1]="LINES",Ju[Ju.LINE_LOOP=2]="LINE_LOOP",Ju[Ju.LINE_STRIP=3]="LINE_STRIP",Ju[Ju.TRIANGLES=4]="TRIANGLES",Ju[Ju.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",Ju[Ju.TRIANGLE_FAN=6]="TRIANGLE_FAN",Ju[Ju.ZERO=0]="ZERO",Ju[Ju.ONE=1]="ONE",Ju[Ju.SRC_COLOR=768]="SRC_COLOR",Ju[Ju.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",Ju[Ju.SRC_ALPHA=770]="SRC_ALPHA",Ju[Ju.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",Ju[Ju.DST_ALPHA=772]="DST_ALPHA",Ju[Ju.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",Ju[Ju.DST_COLOR=774]="DST_COLOR",Ju[Ju.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",Ju[Ju.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",Ju[Ju.FUNC_ADD=32774]="FUNC_ADD",Ju[Ju.BLEND_EQUATION=32777]="BLEND_EQUATION",Ju[Ju.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",Ju[Ju.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",Ju[Ju.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",Ju[Ju.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",Ju[Ju.MAX_EXT=32776]="MAX_EXT",Ju[Ju.MIN_EXT=32775]="MIN_EXT",Ju[Ju.BLEND_DST_RGB=32968]="BLEND_DST_RGB",Ju[Ju.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",Ju[Ju.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",Ju[Ju.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",Ju[Ju.CONSTANT_COLOR=32769]="CONSTANT_COLOR",Ju[Ju.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",Ju[Ju.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",Ju[Ju.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",Ju[Ju.BLEND_COLOR=32773]="BLEND_COLOR",Ju[Ju.ARRAY_BUFFER=34962]="ARRAY_BUFFER",Ju[Ju.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",Ju[Ju.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",Ju[Ju.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",Ju[Ju.STREAM_DRAW=35040]="STREAM_DRAW",Ju[Ju.STATIC_DRAW=35044]="STATIC_DRAW",Ju[Ju.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",Ju[Ju.BUFFER_SIZE=34660]="BUFFER_SIZE",Ju[Ju.BUFFER_USAGE=34661]="BUFFER_USAGE",Ju[Ju.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",Ju[Ju.FRONT=1028]="FRONT",Ju[Ju.BACK=1029]="BACK",Ju[Ju.FRONT_AND_BACK=1032]="FRONT_AND_BACK",Ju[Ju.CULL_FACE=2884]="CULL_FACE",Ju[Ju.BLEND=3042]="BLEND",Ju[Ju.DITHER=3024]="DITHER",Ju[Ju.STENCIL_TEST=2960]="STENCIL_TEST",Ju[Ju.DEPTH_TEST=2929]="DEPTH_TEST",Ju[Ju.SCISSOR_TEST=3089]="SCISSOR_TEST",Ju[Ju.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",Ju[Ju.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",Ju[Ju.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",Ju[Ju.NO_ERROR=0]="NO_ERROR",Ju[Ju.INVALID_ENUM=1280]="INVALID_ENUM",Ju[Ju.INVALID_VALUE=1281]="INVALID_VALUE",Ju[Ju.INVALID_OPERATION=1282]="INVALID_OPERATION",Ju[Ju.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",Ju[Ju.CW=2304]="CW",Ju[Ju.CCW=2305]="CCW",Ju[Ju.LINE_WIDTH=2849]="LINE_WIDTH",Ju[Ju.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",Ju[Ju.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",Ju[Ju.CULL_FACE_MODE=2885]="CULL_FACE_MODE",Ju[Ju.FRONT_FACE=2886]="FRONT_FACE",Ju[Ju.DEPTH_RANGE=2928]="DEPTH_RANGE",Ju[Ju.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",Ju[Ju.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",Ju[Ju.DEPTH_FUNC=2932]="DEPTH_FUNC",Ju[Ju.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",Ju[Ju.STENCIL_FUNC=2962]="STENCIL_FUNC",Ju[Ju.STENCIL_FAIL=2964]="STENCIL_FAIL",Ju[Ju.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",Ju[Ju.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",Ju[Ju.STENCIL_REF=2967]="STENCIL_REF",Ju[Ju.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",Ju[Ju.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",Ju[Ju.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",Ju[Ju.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",Ju[Ju.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",Ju[Ju.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",Ju[Ju.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",Ju[Ju.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",Ju[Ju.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",Ju[Ju.VIEWPORT=2978]="VIEWPORT",Ju[Ju.SCISSOR_BOX=3088]="SCISSOR_BOX",Ju[Ju.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",Ju[Ju.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",Ju[Ju.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",Ju[Ju.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",Ju[Ju.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",Ju[Ju.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",Ju[Ju.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",Ju[Ju.RED_BITS=3410]="RED_BITS",Ju[Ju.GREEN_BITS=3411]="GREEN_BITS",Ju[Ju.BLUE_BITS=3412]="BLUE_BITS",Ju[Ju.ALPHA_BITS=3413]="ALPHA_BITS",Ju[Ju.DEPTH_BITS=3414]="DEPTH_BITS",Ju[Ju.STENCIL_BITS=3415]="STENCIL_BITS",Ju[Ju.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",Ju[Ju.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",Ju[Ju.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",Ju[Ju.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",Ju[Ju.SAMPLES=32937]="SAMPLES",Ju[Ju.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",Ju[Ju.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",Ju[Ju.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",Ju[Ju.DONT_CARE=4352]="DONT_CARE",Ju[Ju.FASTEST=4353]="FASTEST",Ju[Ju.NICEST=4354]="NICEST",Ju[Ju.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",Ju[Ju.BYTE=5120]="BYTE",Ju[Ju.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",Ju[Ju.SHORT=5122]="SHORT",Ju[Ju.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",Ju[Ju.INT=5124]="INT",Ju[Ju.UNSIGNED_INT=5125]="UNSIGNED_INT",Ju[Ju.FLOAT=5126]="FLOAT",Ju[Ju.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",Ju[Ju.ALPHA=6406]="ALPHA",Ju[Ju.RGB=6407]="RGB",Ju[Ju.RGBA=6408]="RGBA",Ju[Ju.LUMINANCE=6409]="LUMINANCE",Ju[Ju.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",Ju[Ju.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",Ju[Ju.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",Ju[Ju.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",Ju[Ju.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",Ju[Ju.VERTEX_SHADER=35633]="VERTEX_SHADER",Ju[Ju.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",Ju[Ju.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",Ju[Ju.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",Ju[Ju.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",Ju[Ju.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",Ju[Ju.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",Ju[Ju.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",Ju[Ju.SHADER_TYPE=35663]="SHADER_TYPE",Ju[Ju.DELETE_STATUS=35712]="DELETE_STATUS",Ju[Ju.LINK_STATUS=35714]="LINK_STATUS",Ju[Ju.VALIDATE_STATUS=35715]="VALIDATE_STATUS",Ju[Ju.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",Ju[Ju.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",Ju[Ju.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",Ju[Ju.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",Ju[Ju.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",Ju[Ju.NEVER=512]="NEVER",Ju[Ju.LESS=513]="LESS",Ju[Ju.EQUAL=514]="EQUAL",Ju[Ju.LEQUAL=515]="LEQUAL",Ju[Ju.GREATER=516]="GREATER",Ju[Ju.NOTEQUAL=517]="NOTEQUAL",Ju[Ju.GEQUAL=518]="GEQUAL",Ju[Ju.ALWAYS=519]="ALWAYS",Ju[Ju.KEEP=7680]="KEEP",Ju[Ju.REPLACE=7681]="REPLACE",Ju[Ju.INCR=7682]="INCR",Ju[Ju.DECR=7683]="DECR",Ju[Ju.INVERT=5386]="INVERT",Ju[Ju.INCR_WRAP=34055]="INCR_WRAP",Ju[Ju.DECR_WRAP=34056]="DECR_WRAP",Ju[Ju.VENDOR=7936]="VENDOR",Ju[Ju.RENDERER=7937]="RENDERER",Ju[Ju.VERSION=7938]="VERSION",Ju[Ju.NEAREST=9728]="NEAREST",Ju[Ju.LINEAR=9729]="LINEAR",Ju[Ju.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",Ju[Ju.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",Ju[Ju.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",Ju[Ju.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",Ju[Ju.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",Ju[Ju.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",Ju[Ju.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",Ju[Ju.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",Ju[Ju.TEXTURE_2D=3553]="TEXTURE_2D",Ju[Ju.TEXTURE=5890]="TEXTURE",Ju[Ju.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Ju[Ju.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",Ju[Ju.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Ju[Ju.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Ju[Ju.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Ju[Ju.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Ju[Ju.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Ju[Ju.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",Ju[Ju.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",Ju[Ju.TEXTURE0=33984]="TEXTURE0",Ju[Ju.TEXTURE1=33985]="TEXTURE1",Ju[Ju.TEXTURE2=33986]="TEXTURE2",Ju[Ju.TEXTURE3=33987]="TEXTURE3",Ju[Ju.TEXTURE4=33988]="TEXTURE4",Ju[Ju.TEXTURE5=33989]="TEXTURE5",Ju[Ju.TEXTURE6=33990]="TEXTURE6",Ju[Ju.TEXTURE7=33991]="TEXTURE7",Ju[Ju.TEXTURE8=33992]="TEXTURE8",Ju[Ju.TEXTURE9=33993]="TEXTURE9",Ju[Ju.TEXTURE10=33994]="TEXTURE10",Ju[Ju.TEXTURE11=33995]="TEXTURE11",Ju[Ju.TEXTURE12=33996]="TEXTURE12",Ju[Ju.TEXTURE13=33997]="TEXTURE13",Ju[Ju.TEXTURE14=33998]="TEXTURE14",Ju[Ju.TEXTURE15=33999]="TEXTURE15",Ju[Ju.TEXTURE16=34e3]="TEXTURE16",Ju[Ju.TEXTURE17=34001]="TEXTURE17",Ju[Ju.TEXTURE18=34002]="TEXTURE18",Ju[Ju.TEXTURE19=34003]="TEXTURE19",Ju[Ju.TEXTURE20=34004]="TEXTURE20",Ju[Ju.TEXTURE21=34005]="TEXTURE21",Ju[Ju.TEXTURE22=34006]="TEXTURE22",Ju[Ju.TEXTURE23=34007]="TEXTURE23",Ju[Ju.TEXTURE24=34008]="TEXTURE24",Ju[Ju.TEXTURE25=34009]="TEXTURE25",Ju[Ju.TEXTURE26=34010]="TEXTURE26",Ju[Ju.TEXTURE27=34011]="TEXTURE27",Ju[Ju.TEXTURE28=34012]="TEXTURE28",Ju[Ju.TEXTURE29=34013]="TEXTURE29",Ju[Ju.TEXTURE30=34014]="TEXTURE30",Ju[Ju.TEXTURE31=34015]="TEXTURE31",Ju[Ju.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",Ju[Ju.REPEAT=10497]="REPEAT",Ju[Ju.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",Ju[Ju.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",Ju[Ju.FLOAT_VEC2=35664]="FLOAT_VEC2",Ju[Ju.FLOAT_VEC3=35665]="FLOAT_VEC3",Ju[Ju.FLOAT_VEC4=35666]="FLOAT_VEC4",Ju[Ju.INT_VEC2=35667]="INT_VEC2",Ju[Ju.INT_VEC3=35668]="INT_VEC3",Ju[Ju.INT_VEC4=35669]="INT_VEC4",Ju[Ju.BOOL=35670]="BOOL",Ju[Ju.BOOL_VEC2=35671]="BOOL_VEC2",Ju[Ju.BOOL_VEC3=35672]="BOOL_VEC3",Ju[Ju.BOOL_VEC4=35673]="BOOL_VEC4",Ju[Ju.FLOAT_MAT2=35674]="FLOAT_MAT2",Ju[Ju.FLOAT_MAT3=35675]="FLOAT_MAT3",Ju[Ju.FLOAT_MAT4=35676]="FLOAT_MAT4",Ju[Ju.SAMPLER_2D=35678]="SAMPLER_2D",Ju[Ju.SAMPLER_CUBE=35680]="SAMPLER_CUBE",Ju[Ju.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",Ju[Ju.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",Ju[Ju.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",Ju[Ju.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",Ju[Ju.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",Ju[Ju.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",Ju[Ju.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",Ju[Ju.COMPILE_STATUS=35713]="COMPILE_STATUS",Ju[Ju.LOW_FLOAT=36336]="LOW_FLOAT",Ju[Ju.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",Ju[Ju.HIGH_FLOAT=36338]="HIGH_FLOAT",Ju[Ju.LOW_INT=36339]="LOW_INT",Ju[Ju.MEDIUM_INT=36340]="MEDIUM_INT",Ju[Ju.HIGH_INT=36341]="HIGH_INT",Ju[Ju.FRAMEBUFFER=36160]="FRAMEBUFFER",Ju[Ju.RENDERBUFFER=36161]="RENDERBUFFER",Ju[Ju.RGBA4=32854]="RGBA4",Ju[Ju.RGB5_A1=32855]="RGB5_A1",Ju[Ju.RGB565=36194]="RGB565",Ju[Ju.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",Ju[Ju.STENCIL_INDEX=6401]="STENCIL_INDEX",Ju[Ju.STENCIL_INDEX8=36168]="STENCIL_INDEX8",Ju[Ju.DEPTH_STENCIL=34041]="DEPTH_STENCIL",Ju[Ju.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",Ju[Ju.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",Ju[Ju.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",Ju[Ju.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",Ju[Ju.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",Ju[Ju.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",Ju[Ju.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",Ju[Ju.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",Ju[Ju.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",Ju[Ju.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",Ju[Ju.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",Ju[Ju.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",Ju[Ju.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",Ju[Ju.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",Ju[Ju.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",Ju[Ju.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",Ju[Ju.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",Ju[Ju.NONE=0]="NONE",Ju[Ju.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",Ju[Ju.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",Ju[Ju.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",Ju[Ju.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",Ju[Ju.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",Ju[Ju.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",Ju[Ju.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",Ju[Ju.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",Ju[Ju.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",Ju[Ju.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",Ju[Ju.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",Ju[Ju.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",Ju[Ju.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",Ju[Ju.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",Ju[Ju.COPY_SRC=1]="COPY_SRC",Ju[Ju.COPY_DST=2]="COPY_DST",Ju[Ju.SAMPLED=4]="SAMPLED",Ju[Ju.STORAGE=8]="STORAGE",Ju[Ju.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT";var Is=($u=Object(Lr.injectable)(),ts=Object(Lr.inject)(Ur.GeometryComponentManager),es=Object(Lr.inject)(Ur.RenderEngine),$u((rs=function(){function t(){Er()(this,t),xr()(this,"geometry",os,this),xr()(this,"engine",is,this)}var e;return Tr()(t,[{key:"execute",value:(e=Rr()(Or.a.mark((function t(){var e=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.geometry.forEach((function(t,n){n.dirty&&(n.attributes.forEach((function(t){var n;t.dirty&&t.data&&(t.buffer?null===(n=t.buffer)||void 0===n||n.subData({data:t.data,offset:0}):t.buffer=e.engine.createBuffer({data:t.data,type:Qu.FLOAT}),t.dirty=!1)})),n.indices&&(n.indicesBuffer?n.indicesBuffer.subData({data:n.indices,offset:0}):n.indicesBuffer=e.engine.createElements({data:n.indices,count:n.indices.length,type:Qu.UNSIGNED_INT,usage:Qu.STATIC_DRAW})),n.dirty=!1)}));case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.geometry.forEach((function(t,e){e.indicesBuffer&&e.indicesBuffer.destroy(),e.attributes.forEach((function(t){t.buffer&&t.buffer.destroy()}))})),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{vertexCount:3},e=t.vertexCount,n=Cr();return this.geometry.create(n,{vertexCount:e})}},{key:"createInstancedBufferGeometry",value:function(t){var e=t.maxInstancedCount,n=t.vertexCount,r=Cr();return this.geometry.create(r,{maxInstancedCount:e,vertexCount:n})}},{key:"createBox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.widthSegments||1,n=t.heightSegments||1,r=t.depthSegments||1,o=t.halfExtents||i.fromValues(.5,.5,.5),a=jr()(o,3),u=a[0],s=a[1],c=a[2],f=[i.fromValues(-u,-s,c),i.fromValues(u,-s,c),i.fromValues(u,s,c),i.fromValues(-u,s,c),i.fromValues(u,-s,-c),i.fromValues(-u,-s,-c),i.fromValues(-u,s,-c),i.fromValues(u,s,-c)],l=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],h=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],d={FRONT:0,BACK:1,TOP:2,BOTTOM:3,RIGHT:4,LEFT:5},p=[],v=[],m=[],y=[],g=[],b=0,_=function(t,e,n){var r,o,a,u;for(a=0;a<=e;a++)for(u=0;u<=n;u++){var s=i.create(),c=i.create(),d=i.create(),_=i.create();i.lerp(s,f[l[t][0]],f[l[t][1]],a/e),i.lerp(c,f[l[t][0]],f[l[t][2]],u/n),i.sub(d,c,f[l[t][0]]),i.add(_,s,d),r=a/e,o=u/n,p.push(_[0],_[1],_[2]),v.push(h[t][0],h[t][1],h[t][2]),m.push(r,o),r=.875*(r/=3)+4/64,o=.875*(o/=3)+4/64,r+=t%3/3,o+=Math.floor(t/3)/3,y.push(r,o),a<e&&u<n&&(g.push(b+n+1,b+1,b),g.push(b+n+1,b+n+2,b+1)),b++}};_(d.FRONT,e,n),_(d.BACK,e,n),_(d.TOP,e,r),_(d.BOTTOM,e,r),_(d.RIGHT,r,n),_(d.LEFT,r,n);var x=As(p),w=Cr();return this.geometry.create(w,{indices:Uint32Array.from(g),aabb:x,attributes:[{dirty:!0,name:"position",data:Float32Array.from(p),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]}]})}}]),t}(),os=Ir()(rs.prototype,"geometry",[ts],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),is=Ir()(rs.prototype,"engine",[es],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ns=rs))||ns);n(169);function ks(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Os,Ds,Rs,Ms,Cs,Ns,Ps,Gs,js,Ls=function(t){Wr()(n,t);var e=ks(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).vertexShaderGLSL=void 0,r.fragmentShaderGLSL=void 0,r.dirty=!0,r.uniforms=[],r.cull={enable:!0,face:Qu.BACK},r.depth={enable:!0},r.blend=void 0,Object.assign(co()(r),t),r}return Tr()(n,[{key:"setCull",value:function(t){return this.cull=t,this}},{key:"setDepth",value:function(t){return this.depth=t,this}},{key:"setBlend",value:function(t){return this.blend=t,this}},{key:"setUniform",value:function(t,e){var n=this;if("string"!=typeof t)return Object.keys(t).forEach((function(e){return n.setUniform(e,t[e])})),this;var r=this.uniforms.find((function(e){return e.name===t}));return r?(r.dirty=!0,r.data=e):this.uniforms.push({name:t,dirty:!0,data:e}),this.dirty=!0,this}}]),n}(Nr);function Us(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Bs(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Us(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Us(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Fs,zs=(Os=Object(Lr.injectable)(),Ds=Object(Lr.inject)(Ur.MaterialComponentManager),Rs=Object(Lr.inject)(Ur.RenderEngine),Ms=Object(Lr.inject)(Ur.ShaderModuleService),Os((Ns=function(){function t(){Er()(this,t),xr()(this,"material",Ps,this),xr()(this,"engine",Gs,this),xr()(this,"shaderModule",js,this)}var e;return Tr()(t,[{key:"execute",value:(e=Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(this.material.map(function(){var t=Rr()(Or.a.mark((function t(e,n){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.material.clear()}},{key:"createBasicMaterial",value:function(){var t=Cr();return this.material.create(t,{vertexShaderGLSL:this.engine.supportWebGPU?"layout(set = 0, binding = 0) uniform Uniforms {\\n  vec4 color;\\n  mat4 projectionMatrix;\\n  mat4 modelViewMatrix;\\n} uniforms;\\n\\nlayout(location = 0) in vec3 position;\\n// layout(location = 1) in vec3 barycentric;\\n\\nlayout(location = 0) out vec4 fragColor;\\n// layout(location = 1) out vec3 v_Barycentric;\\n\\nvoid main() {\\n  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);\\n  fragColor = uniforms.color;\\n  // v_Barycentric = barycentric;\\n}":"attribute vec3 position;\\n\\nuniform mat4 projectionMatrix;\\nuniform mat4 modelViewMatrix;\\nuniform vec4 color;\\n\\nvarying vec4 fragColor;\\n\\nvoid main() {\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n  fragColor = color;\\n}",fragmentShaderGLSL:this.engine.supportWebGPU?"// layout(set = 0, binding = 1) uniform WireframeUniforms {\\n//   float lineWidth;\\n//   vec4 lineColor;\\n// } wireframe;\\n\\nlayout(location = 0) in vec4 fragColor;\\n// layout(location = 1) in vec3 v_Barycentric;\\n\\nlayout(location = 0) out vec4 outColor;\\n\\n// wireframe\\n// float edgeFactor() {\\n//   vec3 d = fwidth(v_Barycentric);\\n//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);\\n//   return min(min(a3.x, a3.y), a3.z);\\n// }\\n\\nvoid main() {\\n  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));\\n  outColor = fragColor;\\n}":"varying vec4 fragColor;\\n\\nvoid main() {\\n  gl_FragColor = fragColor;\\n}"})}},{key:"createShaderMaterial",value:function(t){var e=Cr(),n=t.vertexShader,r=t.fragmentShader,o=[];if(!this.engine.supportWebGPU){var i="material-".concat(e);this.shaderModule.registerModule(i,{vs:t.vertexShader,fs:t.fragmentShader});var a=this.shaderModule.getModule(i);n=a.vs,r=a.fs,a.uniforms&&(o=Object.keys(a.uniforms).map((function(t){return{dirty:!0,name:t,data:a.uniforms[t]}})))}return this.material.create(e,Bs(Bs({vertexShaderGLSL:n,fragmentShaderGLSL:r},t),{},{uniforms:o}))}}]),t}(),Ps=Ir()(Ns.prototype,"material",[Ds],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gs=Ir()(Ns.prototype,"engine",[Rs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),js=Ir()(Ns.prototype,"shaderModule",[Ms],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cs=Ns))||Cs);function Vs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}!function(t){t[t.Standard=0]="Standard"}(Fs||(Fs={}));var Ws=function(t){Wr()(n,t);var e=Vs(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).strategy=Fs.Standard,r.visibilityPlaneMask=0,r.visible=!1,Object.assign(co()(r),t),r}return n}(Nr);n(170);function Xs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Hs,qs=function(t){Wr()(n,t);var e=Xs(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).material=void 0,r.geometry=void 0,r.aabb=new Ts,r.aabbDirty=!0,r.model=void 0,r.visible=!0,Object.assign(co()(r),t),r}return n}(Nr),Ys=function(){function t(e,n){Er()(this,t),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=e||0,this.normal=n||i.fromValues(0,1,0),this.updatePNVertexFlag()}return Tr()(t,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(t){return i.dot(t,this.normal)-this.distance}},{key:"normalize",value:function(){var t=1/i.len(this.normal);i.scale(this.normal,this.normal,t),this.distance*=t}},{key:"intersectsLine",value:function(t,e,n){var r=this.distanceToPoint(t),o=r/(r-this.distanceToPoint(e)),a=o>=0&&o<=1;return a&&n&&i.lerp(n,t,e,o),a}}]),t}();!function(t){t[t.OUTSIDE=4294967295]="OUTSIDE",t[t.INSIDE=0]="INSIDE",t[t.INDETERMINATE=2147483647]="INDETERMINATE"}(Hs||(Hs={}));var Ks,Zs,Qs,Js,$s,tc,ec,nc,rc,oc,ic,ac,uc,sc=function(){function t(e){if(Er()(this,t),this.planes=[],e)this.planes=e;else for(var n=0;n<6;n++)this.planes.push(new Ys)}return Tr()(t,[{key:"extractFromVPMatrix",value:function(t){var e=jr()(t,16),n=e[0],r=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],d=e[10],p=e[11],v=e[12],m=e[13],y=e[14],g=e[15];i.set(this.planes[0].normal,a-n,f-u,p-l),this.planes[0].distance=-(g-v),i.set(this.planes[1].normal,a+n,f+u,p+l),this.planes[1].distance=-(g+v),i.set(this.planes[2].normal,a+r,f+s,p+h),this.planes[2].distance=-(g+m),i.set(this.planes[3].normal,a-r,f-s,p-h),this.planes[3].distance=-(g-m),i.set(this.planes[4].normal,a-o,f-c,p-d),this.planes[4].distance=-(g-y),i.set(this.planes[5].normal,a+o,f+c,p+d),this.planes[5].distance=-(g+y),this.planes.forEach((function(t){t.normalize(),t.updatePNVertexFlag()}))}}]),t}(),cc=n(35),fc=n.n(cc);function lc(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return hc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hc(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function hc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var dc,pc,vc,mc,yc,gc,bc,_c,xc,wc,Ec,Sc,Tc,Ac,Ic,kc,Oc,Dc,Rc,Mc,Cc,Nc,Pc,Gc,jc=(Ks=Object(Lr.injectable)(),Zs=Object(Lr.inject)(Ur.MeshComponentManager),Qs=Object(Lr.inject)(Ur.CullableComponentManager),Js=Object(Lr.inject)(Ur.GeometryComponentManager),$s=Object(Lr.inject)(Ur.HierarchyComponentManager),tc=Object(Lr.inject)(Ur.TransformComponentManager),Ks((nc=function(){function t(){Er()(this,t),xr()(this,"mesh",rc,this),xr()(this,"cullable",oc,this),xr()(this,"geometry",ic,this),xr()(this,"hierarchy",ac,this),xr()(this,"transform",uc,this),this.planes=void 0}var e;return Tr()(t,[{key:"setFrustumPlanes",value:function(t){this.planes=t}},{key:"execute",value:(e=Rr()(Or.a.mark((function t(e){var n,o,a,u=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=lc(e);try{for(a=function(){var t=o.value,e=(t.getScene(),t.getCamera());u.mesh.forEach((function(t,n){var o,a,s=u.hierarchy.getComponentByEntity(t),c=u.cullable.getComponentByEntity(t),f=n.geometry,l=u.transform.getComponentByEntity(t);if(f&&f.aabb&&l&&n.aabbDirty){var h=l.worldTransform,d=f.aabb,p=d.center,v=d.halfExtents,m=i.transformMat4(i.create(),p,h),y=(o=h,(a=r.create())[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[4],a[4]=o[5],a[5]=o[6],a[6]=o[8],a[7]=o[9],a[8]=o[10],a),g=i.transformMat3(i.create(),v,y);n.aabb.update(m,g),n.aabbDirty=!1}if(c&&f){var b=u.cullable.getComponentByEntity((null==s?void 0:s.parentID)||-1);c.visibilityPlaneMask=u.computeVisibilityWithPlaneMask(n.aabb,(null==b?void 0:b.visibilityPlaneMask)||Hs.INDETERMINATE,u.planes||e.getFrustum().planes),c.visible=c.visibilityPlaneMask!==Hs.OUTSIDE}}))},n.s();!(o=n.n()).done;)a()}catch(t){n.e(t)}finally{n.f()}case 2:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(t,e,n){if(e===Hs.OUTSIDE||e===Hs.INSIDE)return e;for(var r=Hs.INSIDE,o=0,a=n.length;o<a;++o){var u=o<31?1<<o:0;if(!(o<31&&0==(e&u))){var s=n[o],c=s.normal,f=s.distance;if(i.dot(c,t.getNegativeFarPoint(n[o]))+f>0)return Hs.OUTSIDE;i.dot(c,t.getPositiveFarPoint(n[o]))+f>0&&(r|=u)}}return r}}]),t}(),rc=Ir()(nc.prototype,"mesh",[Zs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oc=Ir()(nc.prototype,"cullable",[Qs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ic=Ir()(nc.prototype,"geometry",[Js],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ac=Ir()(nc.prototype,"hierarchy",[$s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uc=Ir()(nc.prototype,"transform",[tc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ec=nc))||ec);function Lc(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Uc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uc(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Uc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Bc,Fc,zc,Vc,Wc,Xc,Hc,qc,Yc,Kc,Zc,Qc,Jc,$c,tf,ef,nf,rf,of,af,uf,sf,cf=(dc=Object(Lr.injectable)(),pc=Object(Lr.inject)(Ur.MeshComponentManager),vc=Object(Lr.inject)(Ur.GeometryComponentManager),mc=Object(Lr.inject)(Ur.MaterialComponentManager),yc=Object(Lr.inject)(Ur.CullableComponentManager),gc=Object(Lr.inject)(Ur.TransformComponentManager),bc=Object(Lr.inject)(Ur.HierarchyComponentManager),_c=Object(Lr.inject)(Ur.Systems),xc=Object(Lr.named)(Ur.FrameGraphSystem),wc=Object(Lr.inject)(Ur.RenderEngine),Ec=Object(Lr.inject)(Ur.ResourcePool),dc((Gc=Pc=function(){function t(){var e=this;Er()(this,t),xr()(this,"mesh",Ac,this),xr()(this,"geometry",Ic,this),xr()(this,"material",kc,this),xr()(this,"cullable",Oc,this),xr()(this,"transform",Dc,this),xr()(this,"hierarchy",Rc,this),xr()(this,"frameGraphSystem",Mc,this),xr()(this,"engine",Cc,this),xr()(this,"resourcePool",Nc,this),this.setup=function(t,e,n){var r=t.createRenderTarget(e,"color buffer",{width:1,height:1,usage:Qu.RENDER_ATTACHMENT|Qu.SAMPLED|Qu.COPY_SRC});n.data={output:e.write(t,r)}},this.execute=function(){var t=Rr()(Or.a.mark((function t(n,r,o){var i,a,u,s,c,f;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=n.getResourceNode(r.data.output),a=e.resourcePool.getOrCreateResource(i.resource),u=Lc(o),t.prev=3,u.s();case 5:if((s=u.n()).done){t.next=11;break}return c=s.value,t.next=9,e.initView(c);case 9:t.next=5;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),u.e(t.t0);case 16:return t.prev=16,u.f(),t.finish(16);case 19:f=e.engine.getCanvas(),a.resize({width:f.width,height:f.height}),e.engine.setScissor({enable:!1}),e.engine.clear({framebuffer:a,color:o[0].getClearColor(),depth:1}),e.engine.useFramebuffer(a,(function(){var t,n=Lc(o);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.renderView(r)}}catch(t){n.e(t)}finally{n.f()}}));case 24:case"end":return t.stop()}}),t,null,[[3,13,16,19]])})));return function(e,n,r){return t.apply(this,arguments)}}()}var e,n;return Tr()(t,[{key:"renderView",value:function(t){var e=t.getScene(),n=t.getCamera(),r=n.getViewTransform(),i=o.multiply(o.create(),n.getPerspective(),r);n.getFrustum().extractFromVPMatrix(i);var a=t.getViewport(),u=a.x,s=a.y,c=a.width,f=a.height;this.engine.viewport({x:u,y:s,width:c,height:f});var l,h=Lc(e.getEntities());try{for(h.s();!(l=h.n()).done;){var d=l.value;this.renderMesh(d,{camera:n,view:t,viewMatrix:r})}}catch(t){h.e(t)}finally{h.f()}}},{key:"renderMesh",value:function(t,e){var n=this,r=e.camera,i=e.view,a=e.viewMatrix,u=this.mesh.getComponentByEntity(t);if(u.visible){this.hierarchy.forEach((function(e,o){o.parentID===t&&n.renderMesh(e,{camera:r,view:i,viewMatrix:a})}));var s=u.material,c=u.geometry;if(c&&!c.dirty&&s){var f=this.transform.getComponentByEntity(t),l=o.multiply(o.create(),a,f.worldTransform),h=i.getViewport(),d=h.width,p=h.height;s.setUniform({projectionMatrix:r.getPerspective(),modelViewMatrix:l,modelMatrix:f.worldTransform,viewMatrix:a,cameraPosition:r.getPosition(),u_viewport:[d,p]}),u.model&&(u.model.draw({uniforms:s.uniforms.reduce((function(t,e){return t[e.name]=e.data,t}),{})}),s.uniforms.forEach((function(t){t.dirty=!1})),s.dirty=!1)}}}},{key:"initMesh",value:(n=Rr()(Or.a.mark((function t(e,n){var r,o,i,a,u,s,c,f=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.mesh.getComponentByEntity(e)){t.next=3;break}return t.abrupt("return");case 3:return o=r.material,i=r.geometry,t.next=7,this.hierarchy.forEachAsync(function(){var t=Rr()(Or.a.mark((function t(r,o){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.parentID!==e){t.next=4;break}return t.next=4,f.initMesh(r,n);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 7:if(i&&!i.dirty&&o){t.next=9;break}return t.abrupt("return");case 9:if(r.model){t.next=21;break}return o.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),a=this.engine,u=a.createModel,s=a.createAttribute,c={vs:o.vertexShaderGLSL,fs:o.fragmentShaderGLSL,attributes:i.attributes.reduce((function(t,e){return e.data&&e.buffer&&(t[e.name]=s({buffer:e.buffer,attributes:e.attributes,arrayStride:e.arrayStride,stepMode:e.stepMode,divisor:"vertex"===e.stepMode?0:1})),t}),{}),uniforms:o.uniforms.reduce((function(t,e){return t[e.name]=e.data,t}),{}),scissor:{enable:!0,box:function(){return n.getViewport()}}},o.cull&&(c.cull=o.cull),o.depth&&(c.depth=o.depth),o.blend&&(c.blend=o.blend),i.indicesBuffer&&(c.elements=i.indicesBuffer),i.maxInstancedCount&&(c.instances=i.maxInstancedCount,c.count=i.vertexCount||3),t.next=20,u(c);case 20:r.model=t.sent;case 21:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"initView",value:(e=Rr()(Or.a.mark((function t(e){var n,r,o,i;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getScene(),r=Lc(n.getEntities()),t.prev=2,r.s();case 4:if((o=r.n()).done){t.next=10;break}return i=o.value,t.next=8,this.initMesh(i,e);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),r.e(t.t0);case 15:return t.prev=15,r.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[2,12,15,18]])}))),function(t){return e.apply(this,arguments)})}]),t}(),Pc.IDENTIFIER="Render Pass",Tc=Gc,Ac=Ir()(Tc.prototype,"mesh",[pc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ic=Ir()(Tc.prototype,"geometry",[vc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kc=Ir()(Tc.prototype,"material",[mc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oc=Ir()(Tc.prototype,"cullable",[yc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dc=Ir()(Tc.prototype,"transform",[gc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rc=Ir()(Tc.prototype,"hierarchy",[bc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mc=Ir()(Tc.prototype,"frameGraphSystem",[_c,xc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cc=Ir()(Tc.prototype,"engine",[wc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nc=Ir()(Tc.prototype,"resourcePool",[Ec],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sc=Tc))||Sc),ff=(Bc=Object(Lr.injectable)(),Fc=Object(Lr.inject)(Ur.RenderEngine),zc=Object(Lr.inject)(Ur.ResourcePool),Bc((Yc=qc=function t(){var e=this;Er()(this,t),xr()(this,"engine",Xc,this),xr()(this,"resourcePool",Hc,this),this.model=void 0,this.setup=function(t,e,n){var r=t.getPass(cf.IDENTIFIER);if(r){var o=t.createRenderTarget(e,"render to screen",{width:1,height:1});n.data={input:e.read(r.data.output),output:e.write(t,o)}}},this.execute=function(){var t=Rr()(Or.a.mark((function t(n,r){var o,i,a,u,s,c,f;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.engine,i=o.createModel,a=o.createAttribute,u=o.createBuffer,e.model){t.next=6;break}return t.next=4,i({vs:e.engine.supportWebGPU?"layout(location = 0) in vec2 a_Position;\\nlayout(location = 0) out vec2 v_UV;\\n\\nvoid main() {\\n  v_UV = 0.5 * (a_Position + 1.0);\\n  gl_Position = vec4(a_Position, 0., 1.);\\n}":"attribute vec2 a_Position;\\n\\nvarying vec2 v_UV;\\n\\nvoid main() {\\n  v_UV = 0.5 * (a_Position + 1.0);\\n  gl_Position = vec4(a_Position, 0., 1.);\\n}",fs:e.engine.supportWebGPU?"layout(set = 0, binding = 0) uniform sampler u_TextureSampler;\\nlayout(set = 0, binding = 1) uniform texture2D u_Texture;\\n\\nlayout(location = 0) in vec2 v_UV;\\nlayout(location = 0) out vec4 outColor;\\n\\nvoid main() {\\n  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);\\n}":"varying vec2 v_UV;\\n\\nuniform sampler2D u_Texture;\\n\\nvoid main() {\\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\\n}",attributes:{a_Position:a({buffer:u({data:[-4,-4,4,-4,0,4],type:Qu.FLOAT}),size:2,arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:s=t.sent,e.model=s;case 6:c=n.getResourceNode(r.data.input),f=e.resourcePool.getOrCreateResource(c.resource),e.engine.useFramebuffer(null,(function(){e.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),e.model.draw({uniforms:{u_Texture:f}})}));case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),this.tearDown=function(){e.model=void 0}},qc.IDENTIFIER="Copy Pass",Wc=Yc,Xc=Ir()(Wc.prototype,"engine",[Fc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hc=Ir()(Wc.prototype,"resourcePool",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vc=Wc))||Vc);function lf(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return hf(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hf(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function hf(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var df,pf,vf,mf,yf,gf,bf,_f,xf,wf,Ef,Sf,Tf=1,Af=2,If=(Kc=Object(Lr.injectable)(),Zc=Object(Lr.inject)(Ur.RenderEngine),Qc=Object(Lr.inject)(Ur.ResourcePool),Jc=Object(Lr.inject)(Ur.RenderPassFactory),$c=Object(Lr.inject)(Ur.MeshComponentManager),Kc((sf=uf=function(){function t(){var e=this;Er()(this,t),xr()(this,"engine",nf,this),xr()(this,"resourcePool",rf,this),xr()(this,"renderPassFactory",of,this),xr()(this,"mesh",af,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(t,e,n){var r=t.createRenderTarget(e,"picking fbo",{width:1,height:1});n.data={output:e.write(t,r)},e.hasSideEffect=!0},this.execute=function(){var t=Rr()(Or.a.mark((function t(n,r,o){var i,a,u;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.views=o,!e.alreadyInRendering){t.next=3;break}return t.abrupt("return");case 3:i=lf(o);try{for(u=function(){var t=a.value,o=t.getViewport(),i=o.width,u=o.height;e.alreadyInRendering=!0;var s=n.getResourceNode(r.data.output);e.pickingFBO=e.resourcePool.getOrCreateResource(s.resource),e.pickingFBO.resize({width:i,height:u}),e.engine.useFramebuffer(e.pickingFBO,(function(){e.engine.clear({framebuffer:e.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var n,r=e.renderPassFactory(cf.IDENTIFIER),o=[],i=lf(t.getScene().getEntities());try{for(i.s();!(n=i.n()).done;){var a=n.value,u=e.mesh.getComponentByEntity(a);u.material.setUniform("u_PickingStage",Tf),o.push(u)}}catch(t){i.e(t)}finally{i.f()}r.renderView(t),o.forEach((function(t){t.material.setUniform("u_PickingStage",Af)})),e.alreadyInRendering=!1}))},i.s();!(a=i.n()).done;)u()}catch(t){i.e(t)}finally{i.f()}case 5:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),this.pick=function(t,n){var r,o,i=t.x,a=t.y,u=e.engine,s=u.readPixels,c=u.useFramebuffer,f=n.getViewport(),l=f.width,h=f.height,d=i*window.devicePixelRatio,p=a*window.devicePixelRatio;if(!(d>l||d<0||p>h||p<0))return c(e.pickingFBO,(function(){var t,i;0===(r=s({x:Math.round(d),y:Math.round(h-(a+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(4),framebuffer:e.pickingFBO}))[0]&&0===r[1]&&0===r[2]||(t=r,i=jr()(t,3),o=i[0]+256*i[1]+65536*i[2]-1,e.highlightEnabled&&e.highlightPickedFeature(r,n))})),o}}return Tr()(t,[{key:"enableHighlight",value:function(t){this.highlightEnabled=t}},{key:"setHighlightColor",value:function(t){this.highlightColor=t}},{key:"highlightPickedFeature",value:function(t,e){if(t){var n,r=lf(e.getScene().getEntities());try{for(r.s();!(n=r.n()).done;){var o=n.value,i=this.mesh.getComponentByEntity(o).material;i.setUniform("u_PickingStage",Af),i.setUniform("u_PickingColor",[t[0],t[1],t[2]]),i.setUniform("u_HighlightColor",this.highlightColor)}}catch(t){r.e(t)}finally{r.f()}}}}]),t}(),uf.IDENTIFIER="PixelPicking Pass",ef=sf,nf=Ir()(ef.prototype,"engine",[Zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rf=Ir()(ef.prototype,"resourcePool",[Qc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),of=Ir()(ef.prototype,"renderPassFactory",[Jc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),af=Ir()(ef.prototype,"mesh",[$c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tf=ef))||tf),kf=(df=Object(Lr.injectable)(),pf=Object(Lr.inject)(Ur.Systems),vf=Object(Lr.named)(Ur.FrameGraphSystem),mf=Object(Lr.inject)(Ur.RenderPassFactory),yf=Object(Lr.inject)(Ur.ConfigService),gf=Object(Lr.inject)(Ur.ResourcePool),df((_f=function(){function t(){Er()(this,t),xr()(this,"frameGraphSystem",xf,this),xr()(this,"renderPassFactory",wf,this),xr()(this,"configService",Ef,this),xr()(this,"resourcePool",Sf,this)}var e;return Tr()(t,[{key:"execute",value:(e=Rr()(Or.a.mark((function t(e){var n,r,o,i,a,u,s,c;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this.renderPassFactory(cf.IDENTIFIER),r=n.setup,o=n.execute,this.frameGraphSystem.addPass(cf.IDENTIFIER,r,o),i=this.renderPassFactory(ff.IDENTIFIER),a=i.setup,u=i.execute,s=i.tearDown,c=this.frameGraphSystem.addPass(ff.IDENTIFIER,a,u,s),this.frameGraphSystem.present(c.data.output);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(t,e){return this.renderPassFactory(If.IDENTIFIER).pick(t,e)}}]),t}(),xf=Ir()(_f.prototype,"frameGraphSystem",[pf,vf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wf=Ir()(_f.prototype,"renderPassFactory",[mf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ef=Ir()(_f.prototype,"configService",[yf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sf=Ir()(_f.prototype,"resourcePool",[gf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bf=_f))||bf);function Of(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Df,Rf,Mf,Cf,Nf,Pf,Gf,jf,Lf,Uf=function(t){Wr()(n,t);var e=Of(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).parentID=void 0,Object.assign(co()(r),t),r}return n}(Nr),Bf=(Df=Object(Lr.injectable)(),Rf=Object(Lr.inject)(Ur.HierarchyComponentManager),Mf=Object(Lr.inject)(Ur.TransformComponentManager),Cf=Object(Lr.inject)(Ur.MeshComponentManager),Df((Pf=function(){function t(){Er()(this,t),xr()(this,"hierarchy",Gf,this),xr()(this,"transform",jf,this),xr()(this,"mesh",Lf,this)}var e;return Tr()(t,[{key:"execute",value:(e=Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var t=this;this.transform.forEach((function(e,n){n.isDirty()&&(t.setMeshAABBDirty(e),n.updateTransform())}))}},{key:"runHierarchyUpdateSystem",value:function(){var t=this;this.hierarchy.forEach((function(e,n){var r=t.transform.getComponentByEntity(e),o=t.transform.getComponentByEntity(n.parentID);null!==r&&null!==o&&r.updateTransformWithParent(o)}))}},{key:"attach",value:function(t,e,n){if(this.hierarchy.contains(t)&&this.detach(t),this.hierarchy.create(t,{parentID:e}),this.setMeshAABBDirty(e),this.hierarchy.getCount()>1)for(var r=this.hierarchy.getCount()-1;r>0;--r)for(var i=this.hierarchy.getEntity(r),a=0;a<r;++a){if(this.hierarchy.getComponent(a).parentID===i){this.hierarchy.moveItem(r,a),++r;break}}this.hierarchy.getComponentByEntity(t);var u=this.transform.getComponentByEntity(e);null===u&&(u=this.transform.create(e));var s=this.transform.getComponentByEntity(t);null===s&&(s=this.transform.create(t),u=this.transform.getComponentByEntity(e)),!n&&u&&(s.matrixTransform(o.invert(o.create(),u.worldTransform)),s.updateTransform()),u&&s.updateTransformWithParent(u)}},{key:"detach",value:function(t){if(null!==this.hierarchy.getComponentByEntity(t)){var e=this.transform.getComponentByEntity(t);null!==e&&e.applyTransform(),this.hierarchy.removeKeepSorted(t),this.setMeshAABBDirty(t)}}},{key:"detachChildren",value:function(t){for(var e=0;e<this.hierarchy.getCount();){var n;if((null===(n=this.hierarchy.getComponent(e))||void 0===n?void 0:n.parentID)===t){var r=this.hierarchy.getEntity(e);this.detach(r)}else++e}}},{key:"setMeshAABBDirty",value:function(t){var e=this.mesh.getComponentByEntity(t);e&&(e.aabbDirty=!0)}}]),t}(),Gf=Ir()(Pf.prototype,"hierarchy",[Rf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jf=Ir()(Pf.prototype,"transform",[Mf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lf=Ir()(Pf.prototype,"mesh",[Cf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nf=Pf))||Nf);function Ff(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var zf=function(t){Wr()(n,t);var e=Ff(n);function n(t){var r,a,s,c,f,l,h,d,p,v,m,y,g,b,_;return Er()(this,n),(r=e.call(this,t)).dirtyFlag=void 0,r.localTranslation=i.fromValues(0,0,0),r.localRotation=u.fromValues(0,0,0,1),r.localScale=i.fromValues(1,1,1),r.localTransform=o.create(),r.worldTransform=o.create(),r.getRotation=(a=u.create(),function(){return o.getRotation(a,r.worldTransform),a}),r.getScale=(s=i.create(),function(){return o.getScaling(s,r.worldTransform),s}),r.getPosition=(c=i.create(),function(){return o.getTranslation(c,r.worldTransform),c}),r.getLocalMatrix=(f=o.create(),function(){return o.fromRotationTranslationScale(f,r.localRotation,r.localTranslation,r.localScale),f}),r.matrixTransform=(l=o.create(),function(t){o.multiply(l,r.getLocalMatrix(),t),o.getScaling(r.localScale,l),o.getTranslation(r.localTranslation,l),o.getRotation(r.localRotation,l)}),r.rotateRollPitchYaw=(h=u.create(),d=u.create(),p=u.create(),function(t,e,n){r.setDirty(),u.fromEuler(h,t,0,0),u.fromEuler(d,0,e,0),u.fromEuler(p,0,0,n),u.multiply(r.localRotation,h,r.localRotation),u.multiply(r.localRotation,r.localRotation,d),u.multiply(r.localRotation,p,r.localRotation),u.normalize(r.localRotation,r.localRotation)}),r.lerp=(v=i.create(),m=u.create(),y=i.create(),g=i.create(),b=u.create(),_=i.create(),function(t,e,n){r.setDirty(),o.getScaling(v,t.worldTransform),o.getTranslation(y,t.worldTransform),o.getRotation(m,t.worldTransform),o.getScaling(g,e.worldTransform),o.getTranslation(_,e.worldTransform),o.getRotation(b,e.worldTransform),i.lerp(r.localScale,v,g,n),u.slerp(r.localRotation,m,b,n),i.lerp(r.localTranslation,y,_,n)}),r}return Tr()(n,[{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?this.dirtyFlag|=n.DIRTY:this.dirtyFlag&=~n.DIRTY}},{key:"updateTransform",value:function(){this.isDirty()&&(this.setDirty(!1),o.copy(this.worldTransform,this.getLocalMatrix()))}},{key:"updateTransformWithParent",value:function(t){o.multiply(this.worldTransform,this.getLocalMatrix(),t.worldTransform)}},{key:"applyTransform",value:function(){this.setDirty(),o.getScaling(this.localScale,this.worldTransform),o.getTranslation(this.localTranslation,this.worldTransform),o.getRotation(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localTranslation=i.fromValues(0,0,0),this.localRotation=u.fromValues(0,0,0,1),this.localScale=i.fromValues(1,1,1)}},{key:"translate",value:function(t){return this.setDirty(),i.add(this.localTranslation,this.localTranslation,t),this}},{key:"scale",value:function(t){return this.setDirty(),i.multiply(this.localScale,this.localScale,t),this}},{key:"rotate",value:function(t){return this.setDirty(),u.multiply(this.localRotation,this.localRotation,t),u.normalize(this.localRotation,this.localRotation),this}}]),n}(Nr);zf.DIRTY=1;n(93),n(94),n(171),n(95),n(96),n(73),n(97),n(27),n(98),n(172);var Vf,Wf,Xf,Hf,qf,Yf=n(103),Kf=n(187),Zf=n.n(Kf),Qf=(Vf=Object(Lr.injectable)(),Wf=Object(Lr.inject)(Ur.RenderEngine),Vf((Hf=function(){function t(){Er()(this,t),xr()(this,"engine",qf,this),this.resourcePool={}}return Tr()(t,[{key:"getOrCreateResource",value:function(t){if(!this.resourcePool[t.name]){var e=t.descriptor,n=e.width,r=e.height,o=e.usage;this.resourcePool[t.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:n,height:r,wrapS:Qu.CLAMP_TO_EDGE,wrapT:Qu.CLAMP_TO_EDGE,usage:o})})}return this.resourcePool[t.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),t}(),qf=Ir()(Hf.prototype,"engine",[Wf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xf=Hf))||Xf);function Jf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var $f,tl,el=function(t){Wr()(n,t);var e=Jf(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).name=void 0,r.name=t.name||"",r}return n}(Nr),nl=Object(Lr.injectable)()($f=function(){function t(){Er()(this,t),this.config=void 0}return Tr()(t,[{key:"get",value:function(){return this.config}},{key:"set",value:function(t){this.config=t}}]),t}())||$f,rl=Object(Lr.injectable)()(tl=function(){function t(){Er()(this,t)}return Tr()(t,[{key:"listen",value:function(t){}},{key:"on",value:function(t,e){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),t}())||tl,ol=n(188),il=n.n(ol);var al,ul=/uniform\\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\\s+([\\s\\S]*?);/g;function sl(t){var e={};return{content:t=t.replace(ul,(function(t,n,r){var o=r.split(":"),i=o[0].trim(),a="";switch(o.length>1&&(a=o[1].trim()),n){case"bool":a="true"===a;break;case"float":case"int":a=Number(a);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":a=a?a.replace("[","").replace("]","").split(",").reduce((function(t,e){return t.push(Number(e.trim())),t}),[]):new Array(function(t){var e=0;switch(t){case"vec2":case"ivec2":e=2;break;case"vec3":case"ivec3":e=3;break;case"vec4":case"ivec4":case"mat2":e=4;break;case"mat3":e=9;break;case"mat4":e=16}return e}(n)).fill(0)}return e[i]=a,"uniform ".concat(n," ").concat(i,";\\n")})),uniforms:e}}function cl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cl(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ll=/precision\\s+(high|low|medium)p\\s+float/,hl=/#pragma include (["^+"]?["\\ "[a-zA-Z_0-9](.*)"]*?)/g,dl=Object(Lr.injectable)()(al=function(){function t(){Er()(this,t),this.moduleCache={},this.rawContentCache={}}return Tr()(t,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:"attribute vec3 a_PickingColor;\\nvarying vec4 v_PickingResult;\\n\\nuniform vec3 u_PickingColor : [0, 0, 0];\\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\\nuniform float u_PickingStage : 0.0;\\nuniform float u_PickingThreshold : 1.0;\\nuniform float u_PickingBuffer: 0.0;\\n\\n#define PICKING_ENCODE 1.0\\n#define PICKING_HIGHLIGHT 2.0\\n#define COLOR_SCALE 1. / 255.\\n\\nbool isVertexPicked(vec3 vertexColor) {\\n  return\\n    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&\\n    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&\\n    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;\\n}\\n\\nvoid setPickingColor(vec3 pickingColor) {\\n  // compares only in highlight stage\\n  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));\\n\\n  // Stores the picking color so that the fragment shader can render it during picking\\n  v_PickingResult.rgb = pickingColor * COLOR_SCALE;\\n}\\n\\nfloat setPickingSize(float x) {\\n   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;\\n}",fs:"varying vec4 v_PickingResult;\\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\\nuniform float u_PickingStage : 0.0;\\n\\n#define PICKING_ENCODE 1.0\\n#define PICKING_HIGHLIGHT 2.0\\n#define COLOR_SCALE 1. / 255.\\n\\n/*\\n * Returns highlight color if this item is selected.\\n */\\nvec4 filterHighlightColor(vec4 color) {\\n  bool selected = bool(v_PickingResult.a);\\n\\n  if (selected) {\\n    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;\\n\\n    float highLightAlpha = highLightColor.a;\\n    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));\\n\\n    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\\n    return vec4(resultRGB, color.a);\\n  } else {\\n    return color;\\n  }\\n}\\n\\n/*\\n * Returns picking color if picking enabled else unmodified argument.\\n */\\nvec4 filterPickingColor(vec4 color) {\\n  vec3 pickingColor = v_PickingResult.rgb;\\n  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {\\n    discard;\\n  }\\n  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;\\n}\\n\\n/*\\n * Returns picking color if picking is enabled if not\\n * highlight color if this item is selected, otherwise unmodified argument.\\n */\\nvec4 filterColor(vec4 color) {\\n  return filterPickingColor(filterHighlightColor(color));\\n}\\n"}),this.registerModule("sdf2d",{vs:"",fs:"/**\\n * 2D signed distance field functions\\n * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\\n */\\n\\nfloat ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }\\n\\nfloat sdCircle(vec2 p, float r) {\\n  return length(p) - r;\\n}\\n\\nfloat sdEquilateralTriangle(vec2 p) {\\n  float k = sqrt(3.0);\\n  p.x = abs(p.x) - 1.0;\\n  p.y = p.y + 1.0/k;\\n  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;\\n  p.x -= clamp( p.x, -2.0, 0.0 );\\n  return -length(p)*sign(p.y);\\n}\\n\\nfloat sdBox(vec2 p, vec2 b) {\\n  vec2 d = abs(p)-b;\\n  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);\\n}\\n\\nfloat sdPentagon(vec2 p, float r) {\\n  vec3 k = vec3(0.809016994,0.587785252,0.726542528);\\n  p.x = abs(p.x);\\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\\n  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);\\n  return length(p)*sign(p.y);\\n}\\n\\nfloat sdHexagon(vec2 p, float r) {\\n  vec3 k = vec3(-0.866025404,0.5,0.577350269);\\n  p = abs(p);\\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\\n  return length(p)*sign(p.y);\\n}\\n\\nfloat sdOctogon(vec2 p, float r) {\\n  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );\\n  p = abs(p);\\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\\n  return length(p)*sign(p.y);\\n}\\n\\nfloat sdHexagram(vec2 p, float r) {\\n  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);\\n  p = abs(p);\\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\\n  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;\\n  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);\\n  return length(p)*sign(p.y);\\n}\\n\\nfloat sdRhombus(vec2 p, vec2 b) {\\n  vec2 q = abs(p);\\n  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);\\n  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );\\n  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );\\n}\\n\\nfloat sdVesica(vec2 p, float r, float d) {\\n  p = abs(p);\\n  float b = sqrt(r*r-d*d); // can delay this sqrt\\n  return ((p.y-b)*d>p.x*b)\\n          ? length(p-vec2(0.0,b))\\n          : length(p-vec2(-d,0.0))-r;\\n}"})}},{key:"registerModule",value:function(t,e){if(!this.rawContentCache[t]){var n=e.vs,r=e.fs,o=e.uniforms,i=sl(n),a=i.content,u=i.uniforms,s=sl(r),c=s.content,f=s.uniforms;this.rawContentCache[t]={fs:c,uniforms:fl(fl(fl({},u),f),o),vs:a}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(t){var e=this;if(this.moduleCache[t])return this.moduleCache[t];var n=this.rawContentCache[t].vs,r=this.rawContentCache[t].fs,o=this.processModule(n,[],"vs"),i=o.content,a=o.includeList,u=this.processModule(r,[],"fs"),s=u.content,c=u.includeList,f=s,l=il()(a.concat(c).concat(t)).reduce((function(t,n){return fl(fl({},t),e.rawContentCache[n].uniforms)}),{});return ll.test(s)||(f="#ifdef GL_FRAGMENT_PRECISION_HIGH\\n precision highp float;\\n #else\\n precision mediump float;\\n#endif\\n"+s),this.moduleCache[t]={fs:f.trim(),uniforms:l,vs:i.trim()},this.moduleCache[t]}},{key:"processModule",value:function(t,e,n){var r=this;return{content:t.replace(hl,(function(t,o){var i=o.split(" ")[0].replace(/"/g,"");if(e.indexOf(i)>-1)return"";var a=r.rawContentCache[i][n];return e.push(i),r.processModule(a,e,n).content})),includeList:e}}}]),t}())||al,pl=new Lr.Container;Object(Lr.decorate)(Object(Lr.injectable)(),Yf.EventEmitter),pl.bind(Ur.IEventEmitter).to(Yf.EventEmitter);Zf()(pl,!1);function vl(){var t=new Lr.Container;return t.parent=pl,t.bind(Ur.Systems).to(Bf).inSingletonScope().whenTargetNamed(Ur.SceneGraphSystem),t.bind(Ur.Systems).to(io).inSingletonScope().whenTargetNamed(Ur.FrameGraphSystem),t.bind(Ur.Systems).to(jc).inSingletonScope().whenTargetNamed(Ur.MeshSystem),t.bind(Ur.Systems).to(Is).inSingletonScope().whenTargetNamed(Ur.GeometrySystem),t.bind(Ur.Systems).to(zs).inSingletonScope().whenTargetNamed(Ur.MaterialSystem),t.bind(Ur.Systems).to(kf).inSingletonScope().whenTargetNamed(Ur.RendererSystem),t.bind(Ur.ResourcePool).to(Qf).inSingletonScope(),t.bind(Ur.ConfigService).to(nl).inSingletonScope(),t.bind(Ur.InteractorService).to(rl).inSingletonScope(),t.bind(Ur.RenderPass).to(cf).inSingletonScope().whenTargetNamed(cf.IDENTIFIER),t.bind(Ur.RenderPass).to(ff).inSingletonScope().whenTargetNamed(ff.IDENTIFIER),t.bind(Ur.RenderPass).to(If).inSingletonScope().whenTargetNamed(If.IDENTIFIER),t.bind(Ur.RenderPassFactory).toFactory((function(t){return function(e){return t.container.getNamed(Ur.RenderPass,e)}})),t}pl.bind(Ur.ShaderModuleService).to(dl).inSingletonScope(),pl.bind(Ur.NameComponentManager).toConstantValue(new Pr(el)),pl.bind(Ur.HierarchyComponentManager).toConstantValue(new Pr(Uf)),pl.bind(Ur.TransformComponentManager).toConstantValue(new Pr(zf)),pl.bind(Ur.MeshComponentManager).toConstantValue(new Pr(qs)),pl.bind(Ur.CullableComponentManager).toConstantValue(new Pr(Ws)),pl.bind(Ur.GeometryComponentManager).toConstantValue(new Pr(po)),pl.bind(Ur.MaterialComponentManager).toConstantValue(new Pr(Ls));var ml;n(173),n(99);!function(t){t.PANSTART="PANSTART",t.PANEND="PANEND",t.PANMOVE="PANMOVE",t.PINCH="PINCH",t.KEYDOWN="KEYDOWN",t.KEYUP="KEYUP",t.HOVER="HOVER"}(ml||(ml={}));n(174);var yl,gl,bl,_l,xl="undefined"!=typeof navigator&&/Version\\/[\\d\\.]+.*Safari/.test(navigator.userAgent);!function(t){t.Void="Void",t.Boolean="Boolean",t.Float="Float",t.Uint32="Uint32",t.Int32="Int32",t.Vector="Vector",t.Vector2Float="vec2<f32>",t.Vector3Float="vec3<f32>",t.Vector4Float="vec4<f32>",t.Vector2Boolean="vec2<bool>",t.Vector3Boolean="vec3<bool>",t.Vector4Boolean="vec4<bool>",t.Vector2Uint="vec2<u32>",t.Vector3Uint="vec3<u32>",t.Vector4Uint="vec4<u32>",t.Vector2Int="vec2<i32>",t.Vector3Int="vec3<i32>",t.Vector4Int="vec4<i32>",t.Matrix="Matrix",t.Matrix3x3Float="mat3x3<f32>",t.Matrix4x4Float="mat4x4<i32>",t.Struct="Struct",t.FloatArray="Float[]",t.Vector4FloatArray="vec4<f32>[]"}(yl||(yl={})),function(t){t.Program="Program",t.Identifier="Identifier",t.VariableDeclaration="VariableDeclaration",t.BlockStatement="BlockStatement",t.ReturnStatement="ReturnStatement",t.FunctionDeclaration="FunctionDeclaration",t.VariableDeclarator="VariableDeclarator",t.AssignmentExpression="AssignmentExpression",t.LogicalExpression="LogicalExpression",t.BinaryExpression="BinaryExpression",t.ArrayExpression="ArrayExpression",t.UnaryExpression="UnaryExpression",t.UpdateExpression="UpdateExpression",t.FunctionExpression="FunctionExpression",t.MemberExpression="MemberExpression",t.ConditionalExpression="ConditionalExpression",t.ExpressionStatement="ExpressionStatement",t.CallExpression="CallExpression",t.NumThreadStatement="NumThreadStatement",t.StorageStatement="StorageStatement",t.DoWhileStatement="DoWhileStatement",t.WhileStatement="WhileStatement",t.ForStatement="ForStatement",t.BreakStatement="BreakStatement",t.ContinueStatement="ContinueStatement",t.IfStatement="IfStatement",t.ImportedFunctionStatement="ImportedFunctionStatement"}(gl||(gl={})),function(t){t.Input="Input",t.Output="Output",t.Uniform="Uniform",t.Workgroup="Workgroup",t.UniformConstant="UniformConstant",t.Image="Image",t.StorageBuffer="StorageBuffer",t.Private="Private",t.Function="Function"}(bl||(bl={})),function(t){t.GLSL100="GLSL100",t.GLSL450="GLSL450",t.WGSL="WGSL"}(_l||(_l={}));function wl(t){return void 0===t?0:t>360||t<-360?t%360:t}function El(t,e,n){return fc()(t)?i.fromValues(t,e,n):3===t.length?i.clone(t):i.fromValues(t[0],t[1],t[2])}var Sl,Tl,Al,Il,kl,Ol,Dl,Rl,Ml=function(){function t(e,n){Er()(this,t),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=e,this.matrix=o.clone(n.matrix),this.right=i.clone(n.right),this.up=i.clone(n.up),this.forward=i.clone(n.forward),this.position=i.clone(n.position),this.focalPoint=i.clone(n.focalPoint),this.distanceVector=i.clone(n.distanceVector),this.azimuth=n.azimuth,this.elevation=n.elevation,this.roll=n.roll,this.relAzimuth=n.relAzimuth,this.relElevation=n.relElevation,this.relRoll=n.relRoll,this.dollyingStep=n.dollyingStep,this.distance=n.distance}return Tr()(t,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(t){t.matrix=o.copy(t.matrix,this.matrix),t.right=i.copy(t.right,this.right),t.up=i.copy(t.up,this.up),t.forward=i.copy(t.forward,this.forward),t.position=i.copy(t.position,this.position),t.focalPoint=i.copy(t.focalPoint,this.focalPoint),t.distanceVector=i.copy(t.distanceVector,this.distanceVector),t.azimuth=this.azimuth,t.elevation=this.elevation,t.roll=this.roll,t.relAzimuth=this.relAzimuth,t.relElevation=this.relElevation,t.relRoll=this.relRoll,t.dollyingStep=this.dollyingStep,t.distance=this.distance}}]),t}();!function(t){t.ORBITING="ORBITING",t.EXPLORING="EXPLORING",t.TRACKING="TRACKING"}(Ol||(Ol={})),function(t){t.DEFAULT="DEFAULT",t.ROTATIONAL="ROTATIONAL",t.TRANSLATIONAL="TRANSLATIONAL",t.CINEMATIC="CINEMATIC"}(Dl||(Dl={})),function(t){t.ORTHOGRAPHIC="ORTHOGRAPHIC",t.PERSPECTIVE="PERSPECTIVE"}(Rl||(Rl={}));var Cl,Nl,Pl,Gl,jl,Ll,Ul,Bl=Math.PI/180,Fl=180/Math.PI,zl=(Sl=Object(Lr.injectable)(),Tl=Object(Lr.inject)(Ur.InteractorService),Sl((Il=function(){function t(){Er()(this,t),this.matrix=o.create(),this.right=i.fromValues(1,0,0),this.up=i.fromValues(0,1,0),this.forward=i.fromValues(0,0,1),this.position=i.fromValues(0,0,1),this.focalPoint=i.fromValues(0,0,0),this.distanceVector=i.fromValues(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.rotateWorld=!1,xr()(this,"interactor",kl,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=o.create(),this.view=void 0,this.following=void 0,this.type=Ol.EXPLORING,this.trackingMode=Dl.DEFAULT,this.projectionMode=Rl.PERSPECTIVE,this.frustum=new sc,this.landmarks=[],this.landmarkAnimationID=void 0}return Tr()(t,[{key:"clone",value:function(){var e=new t;return e.setType(this.type,void 0),e.interactor=this.interactor,e}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(t,e){return this.type=t,this.type===Ol.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Ol.TRACKING&&void 0!==e&&this.setTrackingMode(e),this}},{key:"setProjectionMode",value:function(t){return this.projectionMode=t,this}},{key:"setTrackingMode",value:function(t){if(this.type!==Ol.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this}},{key:"setWorldRotation",value:function(t){this.rotateWorld=t,this._getAngles()}},{key:"getViewTransform",value:function(){return o.invert(o.create(),this.matrix)}},{key:"setMatrix",value:function(t){return this.matrix=t,this._update(),this}},{key:"setAspect",value:function(t){return this.setPerspective(this.near,this.far,this.fov,t),this}},{key:"setViewOffset",value:function(t,e,n,r,o,i){return this.aspect=t/e,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=i,this.projectionMode===Rl.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===Rl.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(t,e,n,r){return this.projectionMode=Rl.PERSPECTIVE,this.fov=n,this.near=t,this.far=e,this.aspect=r,o.perspective(this.perspective,this.fov*Bl,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(t,e,n,r,i,a){this.projectionMode=Rl.ORTHOGRAPHIC,this.rright=e,this.left=t,this.top=n,this.bottom=r,this.near=i,this.far=a;var u=(this.rright-this.left)/(2*this.zoom),s=(this.top-this.bottom)/(2*this.zoom),c=(this.rright+this.left)/2,f=(this.top+this.bottom)/2,l=c-u,h=c+u,d=f+s,p=f-s;if(void 0!==this.view&&this.view.enabled){var v=(this.rright-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;h=(l+=v*this.view.offsetX)+v*this.view.width,p=(d-=m*this.view.offsetY)-m*this.view.height}return o.ortho(this.perspective,l,h,d,p,i,a),this}},{key:"setPosition",value:function(t,e,n){return this._setPosition(t,e,n),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(t,e,n){var r=i.fromValues(0,1,0);if(this.focalPoint=El(t,e,n),this.trackingMode===Dl.CINEMATIC){var a=i.subtract(i.create(),this.focalPoint,this.position);t=a[0],e=a[1],n=a[2];var u=i.length(a),s=Math.asin(e/u)*Fl,c=90+Math.atan2(n,t)*Fl,f=o.create();o.rotateY(f,f,c*Bl),o.rotateX(f,f,s*Bl),r=i.transformMat4(i.create(),[0,1,0],f)}return o.invert(this.matrix,o.lookAt(o.create(),this.position,this.focalPoint,r)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(t){if(!(this.distance===t||t<0)){this.distance=t,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var e=i.create();t=this.distance;var n=this.forward,r=this.focalPoint;return e[0]=t*n[0]+r[0],e[1]=t*n[1]+r[1],e[2]=t*n[2]+r[2],this._setPosition(e),this}}},{key:"changeAzimuth",value:function(t){return this.setAzimuth(this.azimuth+t),this}},{key:"changeElevation",value:function(t){return this.setElevation(this.elevation+t),this}},{key:"changeRoll",value:function(t){return this.setRoll(this.roll+t),this}},{key:"setAzimuth",value:function(t){return this.azimuth=wl(t),this.computeMatrix(),this._getAxes(),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getPosition():this.type===Ol.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(t){return this.elevation=wl(t),this.computeMatrix(),this._getAxes(),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getPosition():this.type===Ol.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(t){return this.roll=wl(t),this.computeMatrix(),this._getAxes(),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getPosition():this.type===Ol.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(t,e,n){if(this.type===Ol.EXPLORING){t=wl(t),e=wl(e),n=wl(n);var r=u.setAxisAngle(u.create(),[1,0,0],(this.rotateWorld?1:-1)*e*Bl),i=u.setAxisAngle(u.create(),[0,1,0],(this.rotateWorld?1:-1)*t*Bl),a=u.setAxisAngle(u.create(),[0,0,1],n*Bl),s=u.multiply(u.create(),i,r);s=u.multiply(u.create(),s,a);var c=o.fromQuat(o.create(),s);o.translate(this.matrix,this.matrix,[0,0,-this.distance]),o.multiply(this.matrix,this.matrix,c),o.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+e)>90)return;this.relElevation=wl(e),this.relAzimuth=wl(t),this.relRoll=wl(n),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getPosition():this.type===Ol.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(t,e){var n=El(t,e,0),r=i.clone(this.position);return i.add(r,r,i.scale(i.create(),this.right,n[0])),i.add(r,r,i.scale(i.create(),this.up,n[1])),this._setPosition(r),this}},{key:"dolly",value:function(t){var e=this.forward,n=i.clone(this.position),r=t*this.dollyingStep;return n[0]+=r*e[0],n[1]+=r*e[1],n[2]+=r*e[2],this._setPosition(n),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getDistance():this.type===Ol.TRACKING&&i.add(this.focalPoint,n,this.distanceVector),this}},{key:"createLandmark",value:function(t,e){var n=this.clone();n.setPosition(e.position),n.setFocalPoint(e.focalPoint),void 0!==e.roll&&n.setRoll(e.roll);var r=new Ml(t,n);return this.landmarks.push(r),r}},{key:"setLandmark",value:function(t){var e=new Ml(t,this);return this.landmarks.push(e),this}},{key:"gotoLandmark",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=this.landmarks.find((function(e){return e.name===t}));if(r){if(0===n)return void r.retrieve(this);void 0!==this.landmarkAnimationID&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var o,a=r.getPosition(),u=r.getFocalPoint(),s=r.getRoll(),c=function t(r){void 0===o&&(o=r);var c,f=r-o,l=(1-Math.cos(f/n*Math.PI))/2,h=i.create(),d=i.create();if(i.lerp(h,e.focalPoint,u,l),i.lerp(d,e.position,a,l),c=e.roll*(1-l)+s*l,e.setFocalPoint(h),e.setPosition(d),e.setRoll(c),e.computeMatrix(),!(i.dist(h,u)+i.dist(d,a)>.01))return e.setFocalPoint(h),e.setPosition(d),e.setRoll(c),e.computeMatrix(),void e.interactor.connect();f<n&&(e.landmarkAnimationID=window.requestAnimationFrame(t))};window.requestAnimationFrame(c)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var t,e,n=u.setAxisAngle(u.create(),[0,0,1],this.roll*Bl);o.identity(this.matrix),t=u.setAxisAngle(u.create(),[1,0,0],(this.rotateWorld&&this.type!==Ol.TRACKING||this.type===Ol.TRACKING?1:-1)*this.elevation*Bl),e=u.setAxisAngle(u.create(),[0,1,0],(this.rotateWorld&&this.type!==Ol.TRACKING||this.type===Ol.TRACKING?1:-1)*this.azimuth*Bl);var r=u.multiply(u.create(),e,t);r=u.multiply(u.create(),r,n);var i=o.fromQuat(o.create(),r);this.type===Ol.ORBITING||this.type===Ol.EXPLORING?(o.translate(this.matrix,this.matrix,this.focalPoint),o.multiply(this.matrix,this.matrix,i),o.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===Ol.TRACKING&&(o.translate(this.matrix,this.matrix,this.position),o.multiply(this.matrix,this.matrix,i))}},{key:"_setPosition",value:function(t,e,n){this.position=El(t,e,n);var r=this.matrix;r[12]=this.position[0],r[13]=this.position[1],r[14]=this.position[2],r[15]=1}},{key:"_getAxes",value:function(){i.copy(this.right,El(a.transformMat4(a.create(),[1,0,0,0],this.matrix))),i.copy(this.up,El(a.transformMat4(a.create(),[0,1,0,0],this.matrix))),i.copy(this.forward,El(a.transformMat4(a.create(),[0,0,1,0],this.matrix))),i.normalize(this.right,this.right),i.normalize(this.up,this.up),i.normalize(this.forward,this.forward)}},{key:"_getAngles",value:function(){var t=this.distanceVector[0],e=this.distanceVector[1],n=this.distanceVector[2],r=i.length(this.distanceVector);if(0===r)return this.elevation=0,void(this.azimuth=0);this.type===Ol.TRACKING||this.rotateWorld?(this.elevation=Math.asin(e/r)*Fl,this.azimuth=Math.atan2(-t,-n)*Fl):(this.elevation=-Math.asin(e/r)*Fl,this.azimuth=-Math.atan2(-t,-n)*Fl)}},{key:"_getPosition",value:function(){i.copy(this.position,El(a.transformMat4(a.create(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){i.transformMat3(this.distanceVector,[0,0,-this.distance],r.fromMat4(r.create(),this.matrix)),i.add(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=i.subtract(i.create(),this.focalPoint,this.position),this.distance=i.length(this.distanceVector),this.dollyingStep=this.distance/100}}]),t}(),kl=Ir()(Il.prototype,"interactor",[Tl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Al=Il))||Al),Vl=n(22),Wl=n.n(Vl),Xl=n(13),Hl=n.n(Xl),ql=n(3);function Yl(){if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Kl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Kl(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ql,Jl,$l,th,eh,nh,rh,oh,ih,ah,uh,sh,ch,fh,lh,hh,dh,ph,vh,mh,yh,gh,bh,_h,xh,wh,Eh,Sh,Th=(Cl=Object(Lr.injectable)(),Nl=Object(Lr.inject)(Ur.RenderEngine),Pl=Object(Lr.inject)(Ur.ConfigService),Cl((jl=function(){function t(){Er()(this,t),xr()(this,"engine",Ll,this),xr()(this,"configService",Ul,this),this.entity=Cr(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}var e,n,r;return Tr()(t,[{key:"init",value:function(){var t=this.configService.get(),e=t.canvas,n=t.engineOptions;this.initPromise=this.engine.init(Zl({canvas:e||Yl(),swapChainFormat:ql.TextureFormat.BGRA8Unorm,antialiasing:!1},n))}},{key:"setBundle",value:function(t){this.compiledBundle=JSON.parse(JSON.stringify(t))}},{key:"setDispatch",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=t),this}},{key:"setMaxIteration",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=t),this}},{key:"setBinding",value:function(t,e){var n=this;if("string"==typeof t){var r=fc()(e)||Wl()(e)||Hl()(e);if(this.compiledBundle&&this.compiledBundle.context){var o=this.compiledBundle.context.defines.find((function(e){return e.name===t}));if(o)return o.value=e,this;var i=this.compiledBundle.context.uniforms.find((function(e){return e.name===t}));i&&(r?(i.data=e,i.isReferer=!1,i.storageClass===bl.Uniform?this.model&&this.model.updateUniform(t,e):this.model&&this.model.updateBuffer(t,e)):(i.isReferer=!0,i.data=e))}}else Object.keys(t).forEach((function(e){n.setBinding(e,t[e])}));return this}},{key:"execute",value:(r=Rr()(Or.a.mark((function t(){var e,n,r=this,o=arguments;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=o.length>0&&void 0!==o[0]?o[0]:1,!this.dirty){t.next=6;break}return this.compiledBundle.context&&(e>1?this.compiledBundle.context.maxIteration=e:this.compiledBundle.context.maxIteration++),t.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter((function(t){return t.isReferer})).forEach((function(t){var e=t.data,n=t.name;r.model.confirmInput(e.model,n)})),n=0;n<e;n++)this.model.run();return this.engine.endFrame(),t.abrupt("return",this);case 12:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"getOutput",value:(n=Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.model.readData());case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"compile",value:(e=Rr()(Or.a.mark((function t(){var e,n,r;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initPromise;case 2:return e=Zl({},this.compiledBundle.context),n=this.engine.supportWebGPU?this.engine.useWGSL?_l.WGSL:_l.GLSL450:_l.GLSL100,r=this.compiledBundle.shaders[n],e.defines.filter((function(t){return t.runtime})).forEach((function(t){var e="".concat("__DefineValuePlaceholder__").concat(t.name);r=r.replace(e,"".concat(t.value))})),e.shader=r,e.uniforms.forEach((function(t){if(!t.data&&t.storageClass===bl.StorageBuffer){var n=1;t.type===yl.FloatArray?n=1:t.type===yl.Vector4FloatArray&&(n=4),t.data=new Float32Array(e.output.length*n).fill(0)}})),this.compiledBundle.context=e,t.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=t.sent;case 12:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}(),Ll=Ir()(jl.prototype,"engine",[Nl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ul=Ir()(jl.prototype,"configService",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gl=jl))||Gl),Ah=(Ql=Object(Lr.injectable)(),Jl=Object(Lr.inject)(Ur.MeshComponentManager),$l=Object(Lr.inject)(Ur.CullableComponentManager),th=Object(Lr.inject)(Ur.TransformComponentManager),eh=Object(Lr.inject)(Ur.Systems),nh=Object(Lr.named)(Ur.SceneGraphSystem),Ql((fh=ch=function(){function t(){Er()(this,t),this.attributes={},this.config=void 0,xr()(this,"mesh",ih,this),xr()(this,"cullable",ah,this),xr()(this,"transform",uh,this),xr()(this,"sceneGraphSystem",sh,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return Tr()(t,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(t){this.config=t}},{key:"setEntity",value:function(t){this.entity=t,this.cullable.create(t),this.meshComponent=this.mesh.create(t),this.transformComponent=this.transform.create(t),this.onEntityCreated()}},{key:"setMaterial",value:function(t){return this.meshComponent.material=t,this}},{key:"setGeometry",value:function(t){return this.meshComponent.geometry=t,this}},{key:"setAttributes",value:function(t){var e=this;Object.keys(t).forEach((function(n){void 0!==t[n]&&t[n]!==e.attributes[n]&&(e.onAttributeChanged({name:n,data:t[n]}),e.attributes[n]=t[n])}))}},{key:"setVisible",value:function(t){return this.meshComponent.visible=t,this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(t){return this.sceneGraphSystem.attach(this.entity,t.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(e),n)}},{key:"convertAttributeName2UniformName",value:function(t){return t}}]),t}(),ch.POINT="point",ch.LINE="line",ch.GRID="grid",oh=fh,ih=Ir()(oh.prototype,"mesh",[Jl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ah=Ir()(oh.prototype,"cullable",[$l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uh=Ir()(oh.prototype,"transform",[th],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sh=Ir()(oh.prototype,"sceneGraphSystem",[eh,nh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rh=oh))||rh),Ih=n(189),kh=n.n(Ih),Oh=function(){function t(e,n){Er()(this,t),this.attribute=void 0,this.buffer=void 0;var r=n.buffer,o=n.offset,i=n.stride,a=n.normalized,u=n.size,s=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:o||0,stride:i||0,normalized:a||!1,divisor:s||0},u&&(this.attribute.size=u)}return Tr()(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),Dh=(lh={},uo()(lh,Qu.POINTS,"points"),uo()(lh,Qu.LINES,"lines"),uo()(lh,Qu.LINE_LOOP,"line loop"),uo()(lh,Qu.LINE_STRIP,"line strip"),uo()(lh,Qu.TRIANGLES,"triangles"),uo()(lh,Qu.TRIANGLE_FAN,"triangle fan"),uo()(lh,Qu.TRIANGLE_STRIP,"triangle strip"),lh),Rh=(hh={},uo()(hh,Qu.STATIC_DRAW,"static"),uo()(hh,Qu.DYNAMIC_DRAW,"dynamic"),uo()(hh,Qu.STREAM_DRAW,"stream"),hh),Mh=(dh={},uo()(dh,Qu.BYTE,"int8"),uo()(dh,Qu.UNSIGNED_INT,"int16"),uo()(dh,Qu.INT,"int32"),uo()(dh,Qu.UNSIGNED_BYTE,"uint8"),uo()(dh,Qu.UNSIGNED_SHORT,"uint16"),uo()(dh,Qu.UNSIGNED_INT,"uint32"),uo()(dh,Qu.FLOAT,"float"),dh),Ch=(ph={},uo()(ph,Qu.ALPHA,"alpha"),uo()(ph,Qu.LUMINANCE,"luminance"),uo()(ph,Qu.LUMINANCE_ALPHA,"luminance alpha"),uo()(ph,Qu.RGB,"rgb"),uo()(ph,Qu.RGBA,"rgba"),uo()(ph,Qu.RGBA4,"rgba4"),uo()(ph,Qu.RGB5_A1,"rgb5 a1"),uo()(ph,Qu.RGB565,"rgb565"),uo()(ph,Qu.DEPTH_COMPONENT,"depth"),uo()(ph,Qu.DEPTH_STENCIL,"depth stencil"),ph),Nh=(vh={},uo()(vh,Qu.DONT_CARE,"dont care"),uo()(vh,Qu.NICEST,"nice"),uo()(vh,Qu.FASTEST,"fast"),vh),Ph=(mh={},uo()(mh,Qu.NEAREST,"nearest"),uo()(mh,Qu.LINEAR,"linear"),uo()(mh,Qu.LINEAR_MIPMAP_LINEAR,"mipmap"),uo()(mh,Qu.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),uo()(mh,Qu.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),uo()(mh,Qu.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),mh),Gh=(yh={},uo()(yh,Qu.REPEAT,"repeat"),uo()(yh,Qu.CLAMP_TO_EDGE,"clamp"),uo()(yh,Qu.MIRRORED_REPEAT,"mirror"),yh),jh=(gh={},uo()(gh,Qu.NONE,"none"),uo()(gh,Qu.BROWSER_DEFAULT_WEBGL,"browser"),gh),Lh=(bh={},uo()(bh,Qu.NEVER,"never"),uo()(bh,Qu.ALWAYS,"always"),uo()(bh,Qu.LESS,"less"),uo()(bh,Qu.LEQUAL,"lequal"),uo()(bh,Qu.GREATER,"greater"),uo()(bh,Qu.GEQUAL,"gequal"),uo()(bh,Qu.EQUAL,"equal"),uo()(bh,Qu.NOTEQUAL,"notequal"),bh),Uh=(_h={},uo()(_h,Qu.FUNC_ADD,"add"),uo()(_h,Qu.MIN_EXT,"min"),uo()(_h,Qu.MAX_EXT,"max"),uo()(_h,Qu.FUNC_SUBTRACT,"subtract"),uo()(_h,Qu.FUNC_REVERSE_SUBTRACT,"reverse subtract"),_h),Bh=(xh={},uo()(xh,Qu.ZERO,"zero"),uo()(xh,Qu.ONE,"one"),uo()(xh,Qu.SRC_COLOR,"src color"),uo()(xh,Qu.ONE_MINUS_SRC_COLOR,"one minus src color"),uo()(xh,Qu.SRC_ALPHA,"src alpha"),uo()(xh,Qu.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),uo()(xh,Qu.DST_COLOR,"dst color"),uo()(xh,Qu.ONE_MINUS_DST_COLOR,"one minus dst color"),uo()(xh,Qu.DST_ALPHA,"dst alpha"),uo()(xh,Qu.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),uo()(xh,Qu.CONSTANT_COLOR,"constant color"),uo()(xh,Qu.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),uo()(xh,Qu.CONSTANT_ALPHA,"constant alpha"),uo()(xh,Qu.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),uo()(xh,Qu.SRC_ALPHA_SATURATE,"src alpha saturate"),xh),Fh=(wh={},uo()(wh,Qu.NEVER,"never"),uo()(wh,Qu.ALWAYS,"always"),uo()(wh,Qu.LESS,"less"),uo()(wh,Qu.LEQUAL,"lequal"),uo()(wh,Qu.GREATER,"greater"),uo()(wh,Qu.GEQUAL,"gequal"),uo()(wh,Qu.EQUAL,"equal"),uo()(wh,Qu.NOTEQUAL,"notequal"),wh),zh=(Eh={},uo()(Eh,Qu.ZERO,"zero"),uo()(Eh,Qu.KEEP,"keep"),uo()(Eh,Qu.REPLACE,"replace"),uo()(Eh,Qu.INVERT,"invert"),uo()(Eh,Qu.INCR,"increment"),uo()(Eh,Qu.DECR,"decrement"),uo()(Eh,Qu.INCR_WRAP,"increment wrap"),uo()(Eh,Qu.DECR_WRAP,"decrement wrap"),Eh),Vh=(Sh={},uo()(Sh,Qu.FRONT,"front"),uo()(Sh,Qu.BACK,"back"),Sh),Wh=function(){function t(e,n){Er()(this,t),this.buffer=void 0;var r=n.data,o=n.usage,i=n.type;this.buffer=e.buffer({data:r,usage:Rh[o||Qu.STATIC_DRAW],type:Mh[i||Qu.UNSIGNED_BYTE]})}return Tr()(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(t){var e=t.data,n=t.offset;this.buffer.subdata(e,n)}}]),t}(),Xh=n(10),Hh=n.n(Xh);function qh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Yh(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qh(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Kh=0,Zh=function(){function t(e,n){var r=this;Er()(this,t),this.reGl=e,this.context=n,this.entity=Cr(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var o={};this.context.uniforms.forEach((function(t){var e=t.name,n=t.type,i=t.data,a=t.isReferer,u=t.storageClass;if(u===bl.StorageBuffer){if(a)r.textureCache[e]={data:void 0},o["".concat(e,"Size")]=function(){return i.compiledBundle.context.output.textureSize};else{r.textureCache[e]=r.calcDataTexture(e,n,i);var s=r.textureCache[e],c=s.textureWidth,f=s.isOutput;o["".concat(e,"Size")]=[c,c],f&&(r.outputTextureName=e,r.context.needPingpong&&(r.outputTextureName="".concat(e,"Output"),r.textureCache[r.outputTextureName]=r.calcDataTexture(e,n,i)))}o[e]=function(){return r.textureCache[e].texture}}else if(u===bl.Uniform){if(i&&(Array.isArray(i)||Wl()(i))&&i.length>16)throw new Error("invalid data type ".concat(n));o[e]=function(){return t.data}}}));var i=this.getOuputDataTexture(),a=i.textureWidth,u=i.texelCount;o.u_OutputTextureSize=[a,a],o.u_OutputTexelCount=u,this.context.output.textureSize=[a,a];var s={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\\n  precision highp float;\\n#else\\n  precision mediump float;\\n#endif\\n".concat(this.context.shader),uniforms:o,vert:"attribute vec3 a_Position;\\nattribute vec2 a_TexCoord;\\n\\nvarying vec2 v_TexCoord;\\n\\nvoid main() {\\n  gl_Position = vec4(a_Position, 1.0);\\n  v_TexCoord = a_TexCoord;\\n}",primitive:"triangle strip",count:4};this.computeCommand=this.reGl(s)}var e;return Tr()(t,[{key:"run",value:function(){var t=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use((function(){t.computeCommand()}))}},{key:"readData",value:(e=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s,c=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.reGl({framebuffer:this.texFBO})((function(){e=c.reGl.read()})),!e){t.next=6;break}if(n=this.getOuputDataTexture(),r=n.originalDataLength,o=n.elementsPerTexel,i=n.typedArrayConstructor,a=void 0===i?Float32Array:i,u=[],4!==o)for(s=0;s<e.length;s+=4)1===o?u.push(e[s]):2===o?u.push(e[s],e[s+1]):u.push(e[s],e[s+1],e[s+2]);else u=e;return t.abrupt("return",new a(u.slice(0,r)));case 6:return t.abrupt("return",new Float32Array);case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"confirmInput",value:function(t,e){var n;this.entity===t.entity?(this.dynamicPingpong=!0,n=this):n=t,this.textureCache[e].id=n.getOuputDataTexture().id,this.textureCache[e].texture=n.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(t,e){var n=this.context.uniforms.find((function(e){return e.name===t}));if(n){var r=this.calcDataTexture(t,n.type,e),o=r.texture,i=r.data;this.textureCache[t].data=i,this.textureCache[t].texture=o}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var t=this.context.output.name;this.textureCache[t].id=this.getOuputDataTexture().id,this.textureCache[t].texture=this.getOuputDataTexture().texture}var e=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=e}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var t=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=t}},{key:"cloneDataTexture",value:function(t){var e=t.data,n=t.textureWidth;return Yh(Yh({},t),{},{id:Kh++,texture:this.reGl.texture({width:n,height:n,data:e,type:"float"})})}},{key:"calcDataTexture",value:function(t,e,n){var r=1;e===yl.Vector4FloatArray&&(r=4);for(var o=[],i=0;i<n.length;i+=r)1===r?o.push(n[i],0,0,0):2===r?o.push(n[i],n[i+1],0,0):3===r?o.push(n[i],n[i+1],n[i+2],0):4===r&&o.push(n[i],n[i+1],n[i+2],n[i+3]);var a=n.length,u=Math.ceil(a/r),s=Math.ceil(Math.sqrt(u)),c=s*s;u<c&&o.push.apply(o,Hh()(new Array(4*(c-u)).fill(0)));var f=this.reGl.texture({width:s,height:s,data:o,type:"float"});return{id:Kh++,data:o,originalDataLength:a,typedArrayConstructor:Wl()(n)?n.constructor:void 0,textureWidth:s,texture:f,texelCount:u,elementsPerTexel:r,isOutput:t===this.context.output.name}}}]),t}(),Qh=function(){function t(e,n){Er()(this,t),this.elements=void 0;var r=n.data,o=n.usage,i=n.type,a=n.count;this.elements=e.elements({data:r,usage:Rh[o||Qu.STATIC_DRAW],type:Mh[i||Qu.UNSIGNED_BYTE],count:a})}return Tr()(t,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){var e=t.data;this.elements.subdata(e)}},{key:"destroy",value:function(){this.elements.destroy()}}]),t}(),Jh=function(){function t(e,n){Er()(this,t),this.framebuffer=void 0;var r=n.width,o=n.height,i=n.color,a=n.colors,u=(n.depth,n.stencil,{width:r,height:o});Array.isArray(a)&&(u.colors=a.map((function(t){return t.get()}))),i&&"boolean"!=typeof i&&(u.color=i.get()),this.framebuffer=e.framebuffer(u)}return Tr()(t,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.framebuffer.resize(e,n)}}]),t}(),$h=n(51),td=n.n($h),ed=n(101),nd=n.n(ed);function rd(t){var e={};return Object.keys(t).forEach((function(n){!function t(e,n,r,o){if(null===n||"number"==typeof n||"boolean"==typeof n||Array.isArray(n)&&"number"==typeof n[0]||Wl()(n)||""===n||"resize"in n)return void(r["".concat(o&&o+".").concat(e)]=n);nd()(n)&&Object.keys(n).forEach((function(i){t(i,n[i],r,"".concat(o&&o+".").concat(e))}));Array.isArray(n)&&n.forEach((function(n,i){Object.keys(n).forEach((function(a){t(a,n[a],r,"".concat(o&&o+".").concat(e,"[").concat(i,"]"))}))}))}(n,t[n],e,"")})),e}function od(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function id(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?od(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):od(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ad,ud,sd=function(){function t(e,n){Er()(this,t),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=e;var r=n.vs,o=n.fs,i=n.attributes,a=n.uniforms,u=n.primitive,s=n.count,c=n.elements,f=n.depth,l=n.blend,h=n.stencil,d=n.cull,p=n.instances,v=n.scissor,m=n.viewport,y={};a&&(this.uniforms=rd(a),Object.keys(a).forEach((function(t){y[t]=e.prop(t)})));var g={};Object.keys(i).forEach((function(t){g[t]=i[t].get()}));var b={attributes:g,frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\\n  precision highp float;\\n#else\\n  precision mediump float;\\n#endif\\n".concat(o),uniforms:y,vert:r,primitive:Dh[void 0===u?Qu.TRIANGLES:u]};p&&(b.instances=p),s&&(b.count=s),c&&(b.elements=c.get()),v&&(b.scissor=v),m&&(b.viewport=m),this.initDepthDrawParams({depth:f},b),this.initBlendDrawParams({blend:l},b),this.initStencilDrawParams({stencil:h},b),this.initCullDrawParams({cull:d},b),this.drawCommand=e(b)}return Tr()(t,[{key:"addUniforms",value:function(t){this.uniforms=id(id({},this.uniforms),rd(t))}},{key:"draw",value:function(t){var e=id(id({},this.uniforms),rd(t.uniforms||{})),n={};Object.keys(e).forEach((function(t){var r=td()(e[t]);"boolean"===r||"number"===r||Array.isArray(e[t])||e[t].BYTES_PER_ELEMENT?n[t]=e[t]:n[t]=e[t].get()})),this.drawCommand(n)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(t,e){var n=t.depth;n&&(e.depth={enable:void 0===n.enable||!!n.enable,mask:void 0===n.mask||!!n.mask,func:Lh[n.func||Qu.LESS],range:n.range||[0,1]})}},{key:"initBlendDrawParams",value:function(t,e){var n=t.blend;if(n){var r=n.enable,o=n.func,i=n.equation,a=n.color,u=void 0===a?[0,0,0,0]:a;e.blend={enable:!!r,func:{srcRGB:Bh[o&&o.srcRGB||Qu.SRC_ALPHA],srcAlpha:Bh[o&&o.srcAlpha||Qu.SRC_ALPHA],dstRGB:Bh[o&&o.dstRGB||Qu.ONE_MINUS_SRC_ALPHA],dstAlpha:Bh[o&&o.dstAlpha||Qu.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Uh[i&&i.rgb||Qu.FUNC_ADD],alpha:Uh[i&&i.alpha||Qu.FUNC_ADD]},color:u}}}},{key:"initStencilDrawParams",value:function(t,e){var n=t.stencil;if(n){var r=n.enable,o=n.mask,i=void 0===o?-1:o,a=n.func,u=void 0===a?{cmp:Qu.ALWAYS,ref:0,mask:-1}:a,s=n.opFront,c=void 0===s?{fail:Qu.KEEP,zfail:Qu.KEEP,zpass:Qu.KEEP}:s,f=n.opBack,l=void 0===f?{fail:Qu.KEEP,zfail:Qu.KEEP,zpass:Qu.KEEP}:f;e.stencil={enable:!!r,mask:i,func:id(id({},u),{},{cmp:Fh[u.cmp]}),opFront:{fail:zh[c.fail],zfail:zh[c.zfail],zpass:zh[c.zpass]},opBack:{fail:zh[l.fail],zfail:zh[l.zfail],zpass:zh[l.zpass]}}}}},{key:"initCullDrawParams",value:function(t,e){var n=t.cull;if(n){var r=n.enable,o=n.face,i=void 0===o?Qu.BACK:o;e.cull={enable:!!r,face:Vh[i]}}}}]),t}(),cd=function(){function t(e,n){Er()(this,t),this.texture=void 0,this.width=void 0,this.height=void 0;var r=n.data,o=n.type,i=void 0===o?Qu.UNSIGNED_BYTE:o,a=n.width,u=n.height,s=n.flipY,c=void 0!==s&&s,f=n.format,l=void 0===f?Qu.RGBA:f,h=n.mipmap,d=void 0!==h&&h,p=n.wrapS,v=void 0===p?Qu.CLAMP_TO_EDGE:p,m=n.wrapT,y=void 0===m?Qu.CLAMP_TO_EDGE:m,g=n.aniso,b=void 0===g?0:g,_=n.alignment,x=void 0===_?1:_,w=n.premultiplyAlpha,E=void 0!==w&&w,S=n.mag,T=void 0===S?Qu.NEAREST:S,A=n.min,I=void 0===A?Qu.NEAREST:A,k=n.colorSpace,O=void 0===k?Qu.BROWSER_DEFAULT_WEBGL:k;this.width=a,this.height=u;var D={width:a,height:u,type:Mh[i],format:Ch[l],wrapS:Gh[v],wrapT:Gh[y],mag:Ph[T],min:Ph[I],alignment:x,flipY:c,colorSpace:jh[O],premultiplyAlpha:E,aniso:b};r&&(D.data=r),"number"==typeof d?D.mipmap=Nh[d]:"boolean"==typeof d&&(D.mipmap=d),this.texture=e.texture(D)}return Tr()(t,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.texture.resize(e,n),this.width=e,this.height=n}},{key:"destroy",value:function(){this.texture.destroy()}}]),t}(),fd=Object(Lr.injectable)()(ad=function(){function t(){var e=this;Er()(this,t),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var t=Rr()(Or.a.mark((function t(n){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new sd(e.gl,n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new Oh(e.gl,t)},this.createBuffer=function(t){return new Wh(e.gl,t)},this.createElements=function(t){return new Qh(e.gl,t)},this.createTexture2D=function(t){return new cd(e.gl,t)},this.createFramebuffer=function(t){return new Jh(e.gl,t)},this.useFramebuffer=function(t,n){e.gl({framebuffer:t?t.get():null})(n)},this.createComputeModel=function(){var t=Rr()(Or.a.mark((function t(n){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Zh(e.gl,n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.clear=function(t){var n=t.color,r=t.depth,o=t.stencil,i=t.framebuffer,a=void 0===i?null:i,u={color:n,depth:r,stencil:o};u.framebuffer=null===a?a:a.get(),e.gl.clear(u)},this.setScissor=function(t){e.gl&&e.gl._gl&&(t.enable&&t.box?(e.gl._gl.enable(Qu.SCISSOR_TEST),e.gl._gl.scissor(t.box.x,t.box.y,t.box.width,t.box.height)):e.gl._gl.disable(Qu.SCISSOR_TEST),e.gl._refresh())},this.viewport=function(t){var n=t.x,r=t.y,o=t.width,i=t.height;e.gl&&e.gl._gl&&(e.gl._gl.viewport(n,r,o,i),e.gl._refresh())},this.readPixels=function(t){var n=t.framebuffer,r={x:t.x,y:t.y,width:t.width,height:t.height};return n&&(r.framebuffer=n.get()),e.gl.read(r)},this.getCanvas=function(){return e.$canvas},this.getGLContext=function(){return e.gl._gl},this.destroy=function(){e.gl&&(e.gl.destroy(),e.inited=!1)}}var e;return Tr()(t,[{key:"init",value:(e=Rr()(Or.a.mark((function t(e){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.inited){t.next=2;break}return t.abrupt("return");case 2:return this.$canvas=e.canvas,t.next=5,new Promise((function(t,n){kh()({canvas:e.canvas,attributes:{alpha:!0,antialias:e.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(e,r){!e&&r||n(e),t(r)}})}));case 5:this.gl=t.sent,this.inited=!0;case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),t}())||ad;function ld(t,e,n,r){if("undefined"!=typeof window){var o=document.getElementsByTagName("head")[0],i=document.createElement("script");i.setAttribute("type","text/javascript"),i.setAttribute("src",t),r&&(i.id=r),i.onload=function(){e&&e()},i.onerror=function(e){n&&n("Unable to load script '".concat(t,"'"),e)},o.appendChild(i)}}function hd(t,e){return new Promise((function(e,n){ld(t,(function(){e()}),(function(t,e){n(e)}))}))}var dd=function(){return pd.apply(this,arguments)};function pd(){return(pd=Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!ud){t.next=2;break}return t.abrupt("return",ud);case 2:return t.next=4,hd("https://preview.babylonjs.com/glslang/glslang.js");case 4:return ud=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),t.abrupt("return",ud);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var vd,md,yd,gd,bd,_d,xd,wd=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.attribute=void 0,this.buffer=void 0;var r=n,o=r.buffer,i=r.offset,a=r.stride,u=r.normalized,s=r.size,c=r.divisor,f=r.arrayStride,l=r.attributes,h=r.stepMode;this.buffer=o,this.attribute={buffer:o.get(),offset:i||0,stride:a||0,normalized:u||!1,divisor:c||0,arrayStride:f||0,attributes:l,stepMode:h||"vertex"},s&&(this.attribute.size=s)}return Tr()(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),Ed=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.buffer=void 0;var r=n,o=r.data,i=r.usage;r.type;this.buffer=this.createBuffer(o instanceof Array?new Float32Array(o):o,i||ql.BufferUsage.Vertex|ql.BufferUsage.CopyDst)}return Tr()(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(t){var e=t.data,n=t.offset;this.setSubData(this.buffer,n,e instanceof Array?new Float32Array(e):e)}},{key:"createBuffer",value:function(t,e){var n=t.byteLength%4,r={size:t.byteLength+n,usage:e},o=this.engine.device.createBuffer(r);return this.setSubData(o,0,t),o}},{key:"setSubData",value:function(t,e,n){(xl?this.engine.device.getQueue():this.engine.device.defaultQueue).writeBuffer(t,e,n)}}]),t}(),Sd=n(52),Td=n.n(Sd),Ad=function(){function t(e,n){Er()(this,t),this.engine=e,this.context=n,this.entity=Cr(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}var e,n,r;return Tr()(t,[{key:"init",value:(r=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:e=t.sent,n=e.computeStage,r=this.context.uniforms.filter((function(t){return t.storageClass===bl.StorageBuffer})),o=this.context.uniforms.filter((function(t){return t.storageClass===bl.Uniform})),i=o.length?1:0,this.bindGroupEntries=[],i&&(a=0,u=[],o.forEach((function(t){if(fc()(t.data))s.uniformGPUBufferLayout.push({name:t.name,offset:a}),a+=4,u.push(t.data);else{var e,n=(null===(e=t.data)||void 0===e?void 0:e.length)||1;3===n&&(n=4,t.data.push(0));var r=a/4%4;if(r>0){var o=4-r;if(n>1&&n<=o)2===n&&(3===o&&(a+=4,u.push(0)),u.push.apply(u,Hh()(t.data)),s.uniformGPUBufferLayout.push({name:t.name,offset:a}));else{for(var i=0;i<o;i++)a+=4,u.push(0);u.push.apply(u,Hh()(t.data)),s.uniformGPUBufferLayout.push({name:t.name,offset:a})}}a+=4*n}})),this.uniformBuffer=new Ed(this.engine,{data:u instanceof Array?new Float32Array(u):u,usage:ql.BufferUsage.Uniform|ql.BufferUsage.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),r.forEach((function(t){var e;Td()(t.data)||t.type!==yl.Vector4FloatArray&&t.type!==yl.FloatArray||(t.name===s.context.output.name?(e=new Ed(s.engine,{data:isFinite(Number(t.data))?[t.data]:t.data,usage:ql.BufferUsage.Storage|ql.BufferUsage.CopyDst|ql.BufferUsage.CopySrc}),s.outputBuffer=e,s.context.output={name:t.name,length:isFinite(Number(t.data))?1:t.data.length,typedArrayConstructor:Float32Array,gpuBuffer:e.get()}):t.isReferer?t.data.model&&t.data.model.outputBuffer&&(e=t.data.model.outputBuffer):e=new Ed(s.engine,{data:isFinite(Number(t.data))?[t.data]:t.data,usage:ql.BufferUsage.Storage|ql.BufferUsage.CopyDst|ql.BufferUsage.CopySrc}),s.vertexBuffers[t.name]=e,s.bindGroupEntries.push({binding:i,resource:{name:t.name,refer:e?void 0:t.data,buffer:e?e.get():void 0}}),i++)})),this.computePipeline=this.engine.device.createComputePipeline({computeStage:n}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"destroy",value:function(){var t=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach((function(e){return t.vertexBuffers[e].destroy()}))}},{key:"readData",value:(n=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s,c;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this.context.output)){t.next=16;break}if(n=e.length,r=e.typedArrayConstructor,!(o=e.gpuBuffer)){t.next=16;break}return i=n*r.BYTES_PER_ELEMENT,a=this.engine.device.createBuffer({size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),(u=this.engine.device.createCommandEncoder()).copyBufferToBuffer(o,0,a,0,i),(xl?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([u.finish()]),t.next=12,a.mapAsync(ql.MapMode.Read);case 12:return s=a.getMappedRange(),c=new r(s.slice(0)),a.unmap(),t.abrupt("return",c);case 16:return t.abrupt("return",new Float32Array);case 17:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"run",value:function(){var t;this.engine.currentComputePass&&(this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(t=this.engine.currentComputePass).dispatch.apply(t,Hh()(this.context.dispatch)))}},{key:"updateBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.vertexBuffers[t];r&&r.subData({data:e,offset:n})}},{key:"updateUniform",value:function(t,e){var n=this.uniformGPUBufferLayout.find((function(e){return e.name===t}));n&&this.uniformBuffer.subData({data:Number.isFinite(e)?new Float32Array([e]):new Float32Array(e),offset:n.offset})}},{key:"confirmInput",value:function(t,e){var n=this.vertexBuffers[e],r=t.outputBuffer;if(n&&r&&n!==r){var o=this.engine.device.createCommandEncoder(),i=t.context.output,a=i.length*i.typedArrayConstructor.BYTES_PER_ELEMENT;o.copyBufferToBuffer(r.get(),0,n.get(),0,a),(xl?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([o.finish()])}}},{key:"compileShaderToSpirV",value:function(t,e,n){return this.compileRawShaderToSpirV(n+t,e)}},{key:"compileRawShaderToSpirV",value:function(t,e){return this.engine.glslang.compileGLSL(t,e)}},{key:"compileComputePipelineStageDescriptor",value:(e=Rr()(Or.a.mark((function t(e){var n;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e,this.engine.options.useWGSL){t.next=6;break}return t.next=5,this.compileShaderToSpirV(e,"compute","#version 450\\n");case 5:n=t.sent;case 6:return t.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:n,isWHLSL:xl}),entryPoint:"main"}});case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}(),Id=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.indexCount=void 0,this.buffer=void 0;var r=n,o=r.data,i=(r.usage,r.type,r.count);this.indexCount=i||0,this.buffer=new Ed(e,{data:o instanceof Array?new Uint16Array(o):o,usage:ql.BufferUsage.Index|ql.BufferUsage.CopyDst})}return Tr()(t,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),kd=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var r=n,o=(r.width,r.height,r.color),i=(r.colors,r.depth);r.stencil;o&&(this.colorTexture=o),i&&(this.depthTexture=i)}return Tr()(t,[{key:"get",value:function(){var t,e;return{color:null===(t=this.colorTexture)||void 0===t?void 0:t.get(),depth:null===(e=this.depthTexture)||void 0===e?void 0:e.get()}}},{key:"destroy",value:function(){var t,e;null===(t=this.colorTexture)||void 0===t||t.destroy(),null===(e=this.depthTexture)||void 0===e||e.destroy()}},{key:"resize",value:function(t){var e,n,r=t.width,o=t.height;r===this.width&&o===this.height||(null===(e=this.colorTexture)||void 0===e||e.resize({width:r,height:o}),null===(n=this.depthTexture)||void 0===n||n.resize({width:r,height:o}));this.width=r,this.height=o}}]),t}(),Od=(vd={},uo()(vd,Qu.POINTS,ql.PrimitiveTopology.PointList),uo()(vd,Qu.LINES,ql.PrimitiveTopology.LineList),uo()(vd,Qu.LINE_LOOP,ql.PrimitiveTopology.LineList),uo()(vd,Qu.LINE_STRIP,ql.PrimitiveTopology.LineStrip),uo()(vd,Qu.TRIANGLES,ql.PrimitiveTopology.TriangleList),uo()(vd,Qu.TRIANGLE_FAN,ql.PrimitiveTopology.TriangleList),uo()(vd,Qu.TRIANGLE_STRIP,ql.PrimitiveTopology.TriangleStrip),vd),Dd=(md={},uo()(md,Qu.NEVER,ql.CompareFunction.Never),uo()(md,Qu.ALWAYS,ql.CompareFunction.Always),uo()(md,Qu.LESS,ql.CompareFunction.Less),uo()(md,Qu.LEQUAL,ql.CompareFunction.LessEqual),uo()(md,Qu.GREATER,ql.CompareFunction.Greater),uo()(md,Qu.GEQUAL,ql.CompareFunction.GreaterEqual),uo()(md,Qu.EQUAL,ql.CompareFunction.Equal),uo()(md,Qu.NOTEQUAL,ql.CompareFunction.NotEqual),md),Rd=(yd={},uo()(yd,Qu.FUNC_ADD,ql.BlendOperation.Add),uo()(yd,Qu.MIN_EXT,ql.BlendOperation.Min),uo()(yd,Qu.MAX_EXT,ql.BlendOperation.Max),uo()(yd,Qu.FUNC_SUBTRACT,ql.BlendOperation.Subtract),uo()(yd,Qu.FUNC_REVERSE_SUBTRACT,ql.BlendOperation.ReverseSubtract),yd),Md=(gd={},uo()(gd,Qu.ZERO,ql.BlendFactor.Zero),uo()(gd,Qu.ONE,ql.BlendFactor.One),uo()(gd,Qu.SRC_COLOR,ql.BlendFactor.SrcColor),uo()(gd,Qu.ONE_MINUS_SRC_COLOR,ql.BlendFactor.OneMinusSrcColor),uo()(gd,Qu.SRC_ALPHA,ql.BlendFactor.SrcAlpha),uo()(gd,Qu.ONE_MINUS_SRC_ALPHA,ql.BlendFactor.OneMinusSrcAlpha),uo()(gd,Qu.DST_COLOR,ql.BlendFactor.DstColor),uo()(gd,Qu.ONE_MINUS_DST_COLOR,ql.BlendFactor.OneMinusDstColor),uo()(gd,Qu.DST_ALPHA,ql.BlendFactor.DstAlpha),uo()(gd,Qu.ONE_MINUS_DST_ALPHA,ql.BlendFactor.OneMinusDstAlpha),uo()(gd,Qu.CONSTANT_COLOR,ql.BlendFactor.BlendColor),uo()(gd,Qu.ONE_MINUS_CONSTANT_COLOR,ql.BlendFactor.OneMinusBlendColor),uo()(gd,Qu.SRC_ALPHA_SATURATE,ql.BlendFactor.SrcAlphaSaturated),gd),Cd=(bd={},uo()(bd,Qu.ALPHA,"r8unorm"),uo()(bd,Qu.RGBA,"rgba8unorm"),uo()(bd,Qu.DEPTH_COMPONENT,"depth32float"),uo()(bd,Qu.DEPTH_STENCIL,"depth24plus-stencil8"),bd),Nd=(_d={},uo()(_d,Qu.NEAREST,"nearest"),uo()(_d,Qu.LINEAR,"linear"),_d),Pd=(xd={},uo()(xd,Qu.REPEAT,"repeat"),uo()(xd,Qu.CLAMP_TO_EDGE,"clamp-to-edge"),uo()(xd,Qu.MIRRORED_REPEAT,"mirror-repeat"),xd);function Gd(t){var e=t.cull;return e&&e.enable?e.face?e.face===Qu.FRONT?ql.CullMode.Front:ql.CullMode.Back:void 0:ql.CullMode.None}function jd(t){var e=t.depth,n=(t.stencil,{compare:ql.CompareFunction.Always,depthFailOp:ql.StencilOperation.Keep,failOp:ql.StencilOperation.Keep,passOp:ql.StencilOperation.Keep});return{depthWriteEnabled:e&&e.enable,depthCompare:Dd[(null==e?void 0:e.func)||Qu.ALWAYS],format:ql.TextureFormat.Depth24PlusStencil8,stencilFront:n,stencilBack:n,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function Ld(t,e){var n=t.blend;return[{format:e,alphaBlend:{srcFactor:Md[n&&n.func&&n.func.srcAlpha||Qu.ONE],dstFactor:Md[n&&n.func&&n.func.dstAlpha||Qu.ZERO],operation:Rd[n&&n.equation&&n.equation.alpha||Qu.FUNC_ADD]},colorBlend:{srcFactor:Md[n&&n.func&&n.func.srcRGB||Qu.ONE],dstFactor:Md[n&&n.func&&n.func.dstRGB||Qu.ZERO],operation:Rd[n&&n.equation&&n.equation.rgb||Qu.FUNC_ADD]},writeMask:ql.ColorWrite.All}]}function Ud(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Bd(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ud(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ud(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Fd(t){for(var e=0,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var i=0,a=r;i<a.length;i++){var u=a[i];e+=u.length}for(var s=new t(e),c=0,f=0,l=r;f<l.length;f++){var h=l[f];s.set(h,c),c+=h.length}return s}var zd,Vd,Wd,Xd,Hd,qd,Yd,Kd,Zd,Qd,Jd,$d,tp=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}var e,n;return Tr()(t,[{key:"init",value:(n=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s,c,f,l,h,d,p,v,m,y=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.options,n=e.vs,r=e.fs,o=e.attributes,i=e.uniforms,a=e.primitive,e.count,u=e.elements,s=e.depth,c=e.blend,f=e.stencil,l=e.cull,e.instances,t.next=3,this.compilePipelineStageDescriptor(n,r,null);case 3:h=t.sent,d=h.vertexStage,p=h.fragmentStage,i&&this.buildUniformBindGroup(i),u&&(this.indexBuffer=u.get(),this.indexCount=u.indexCount),v={vertexBuffers:Object.keys(o).map((function(t,e){var n=o[t],r=n.get(),i=r.arrayStride,a=r.stepMode,u=r.attributes;return y.attributeCache[t]=n,{arrayStride:i,stepMode:a,attributes:u}}))},m={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:Od[a||Qu.TRIANGLES],rasterizationState:Bd(Bd({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:Gd({cull:l})}),depthStencilState:jd({depth:s,stencil:f}),colorStates:Ld({blend:c},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:d,fragmentStage:p,vertexState:v},this.renderPipeline=this.engine.device.createRenderPipeline(m);case 11:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"addUniforms",value:function(t){this.uniforms=Bd(Bd({},this.uniforms),rd(t))}},{key:"draw",value:function(t){var e=this,n=this.engine.getCurrentRenderPass(),r=Bd(Bd({},this.uniforms),rd(t.uniforms||{})),o=[];Object.keys(r).forEach((function(t){var n=td()(r[t]);if("boolean"===n||"number"===n||Array.isArray(r[t])||r[t].BYTES_PER_ELEMENT){var i,a=null===(i=e.uniformGPUBufferLayout.find((function(e){return e.name===t})))||void 0===i?void 0:i.offset;Td()(a)||e.uniformBuffer.subData({data:r[t],offset:a})}else{var u,s=null===(u=e.uniformGPUBufferLayout.find((function(e){return e.name===t})))||void 0===u?void 0:u.offset;if(!Td()(s)){var c=r[t].get(),f=c.color||c,l=f.texture,h=f.sampler;h&&(o.push({binding:s,resource:h}),s++),o.push({binding:s,resource:l.createView()})}}})),this.uniformBuffer&&(o[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:o}),this.renderPipeline&&n.setPipeline(this.renderPipeline),n.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&n.setIndexBuffer(this.indexBuffer.get(),ql.IndexFormat.Uint32,0),Object.keys(this.attributeCache).forEach((function(t,r){n.setVertexBuffer(0+r,e.attributeCache[t].get().buffer,0)})),this.indexBuffer?n.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):n.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:(e=Rr()(Or.a.mark((function t(e,n,r){var o,i,a;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o="#version 450\\n",i=e,a=n,this.engine.options.useWGSL){t.next=10;break}return t.next=6,this.compileShaderToSpirV(e,"vertex",o);case 6:return i=t.sent,t.next=9,this.compileShaderToSpirV(n,"fragment",o);case 9:a=t.sent;case 10:return t.abrupt("return",this.createPipelineStageDescriptor(i,a));case 11:case"end":return t.stop()}}),t,this)}))),function(t,n,r){return e.apply(this,arguments)})},{key:"compileShaderToSpirV",value:function(t,e,n){return this.compileRawShaderToSpirV(n+t,e)}},{key:"compileRawShaderToSpirV",value:function(t,e){return this.engine.glslang.compileGLSL(t,e)}},{key:"createPipelineStageDescriptor",value:function(t,e){return{vertexStage:{module:this.engine.device.createShaderModule({code:t,isWHLSL:xl}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:e,isWHLSL:xl}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:ql.FrontFace.CCW,cullMode:ql.CullMode.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(t){var e=this,n=0,r=Fd.apply(void 0,[Float32Array].concat(Hh()(Object.keys(t).map((function(r){return t[r]?(e.uniformGPUBufferLayout.push({name:r,offset:n}),n+=4*(t[r].length||1),t[r]):[]}))))),o=[],i=!1;r.length&&(i=!0,o.push({binding:0,visibility:ql.ShaderStage.Fragment|ql.ShaderStage.Vertex,type:ql.BindingType.UniformBuffer})),Object.keys(t).filter((function(e){return null===t[e]})).forEach((function(t,n){e.uniformGPUBufferLayout.push({name:t,offset:2*n+(i?1:0)}),o.push({binding:2*n+(i?1:0),visibility:ql.ShaderStage.Fragment,type:ql.BindingType.Sampler},{binding:2*n+(i?1:0)+1,visibility:ql.ShaderStage.Fragment,type:ql.BindingType.SampledTexture})})),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:o}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),i&&(this.uniformBuffer=new Ed(this.engine,{data:r instanceof Array?new Float32Array(r):r,usage:ql.BufferUsage.Uniform|ql.BufferUsage.CopyDst}))}}]),t}(),ep=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return Tr()(t,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(t){var e=t.width,n=t.height;e===this.width&&n===this.height||(this.destroy(),this.createTexture()),this.width=e,this.height=n}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var t=this.options,e=(t.data,t.type),n=(void 0===e&&Qu.UNSIGNED_BYTE,t.width),r=t.height,o=(t.flipY,t.format),i=void 0===o?Qu.RGBA:o,a=(t.mipmap,t.wrapS),u=void 0===a?Qu.CLAMP_TO_EDGE:a,s=t.wrapT,c=void 0===s?Qu.CLAMP_TO_EDGE:s,f=t.aniso,l=void 0===f?0:f,h=(t.alignment,t.premultiplyAlpha,t.mag),d=void 0===h?Qu.NEAREST:h,p=t.min,v=void 0===p?Qu.NEAREST:p,m=t.colorSpace,y=(void 0===m&&Qu.BROWSER_DEFAULT_WEBGL,t.usage);this.width=n,this.height=r,this.texture=this.engine.device.createTexture({size:[n,r,1],mipLevelCount:1,sampleCount:1,dimension:ql.TextureDimension.E2d,format:Cd[i],usage:y||ql.TextureUsage.Sampled|ql.TextureUsage.CopyDst}),(!y||y&ql.TextureUsage.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:Pd[u],addressModeV:Pd[c],addressModeW:Pd[u],magFilter:Nd[d],minFilter:Nd[v],maxAnisotropy:l}))}}]),t}(),np=Object(Lr.injectable)()(zd=function(){function t(){var e=this;Er()(this,t),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(t){t.framebuffer;var n=t.color,r=t.depth,o=t.stencil;e.options.supportCompute&&e.startComputePass(),e.currentRenderTarget?(e.currentRenderPass&&e.endRenderTargetRenderPass(),e.startRenderTargetRenderPass(e.currentRenderTarget,n||null,!!r,!!o)):(e.mainColorAttachments[0].loadValue=n||ql.LoadOp.Load,e.mainDepthAttachment.depthLoadValue=r||ql.LoadOp.Load,e.mainDepthAttachment.stencilLoadValue=o?e.clearStencilValue:ql.LoadOp.Load,e.mainRenderPass&&e.endMainRenderPass(),e.startMainRenderPass())},this.createModel=function(){var t=Rr()(Or.a.mark((function t(n){var r;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new tp(e,n),t.next=3,r.init();case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new wd(e,t)},this.createBuffer=function(t){return new Ed(e,t)},this.createElements=function(t){return new Id(e,t)},this.createTexture2D=function(t){return new ep(e,t)},this.createFramebuffer=function(t){return new kd(e,t)},this.useFramebuffer=function(t,n){e.currentRenderTarget&&e.unbindFramebuffer(e.currentRenderTarget),e.currentRenderTarget=t,e.currentRenderTargetViewDescriptor={dimension:ql.TextureViewDimension.E2d,arrayLayerCount:1,aspect:ql.TextureAspect.All},e.currentRenderPass=null,n()},this.createComputeModel=function(){var t=Rr()(Or.a.mark((function t(n){var r;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Ad(e,n),t.next=3,r.init();case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getCanvas=function(){return e.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(t){var n=t.x,r=t.y,o=t.width,i=t.height;if(e.currentRenderPass){if(e.transientViewport.x!==1/0){e.getCurrentRenderPass().setViewport(e.transientViewport.x,e.transientViewport.y,e.transientViewport.width,e.transientViewport.height,0,1)}else if(n!==e.cachedViewport.x||r!==e.cachedViewport.y||o!==e.cachedViewport.width||i!==e.cachedViewport.height){e.cachedViewport={x:n,y:r,width:o,height:i},e.getCurrentRenderPass().setViewport(n,r,o,i,0,1)}}else e.transientViewport={x:n,y:r,width:o,height:i}},this.readPixels=function(t){throw new Error("Method not implemented.")}}var e,n;return Tr()(t,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:(n=Rr()(Or.a.mark((function t(e){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.canvas=e.canvas,this.options=e,this.useWGSL=!!e.useWGSL,this.mainPassSampleCount=e.antialiasing?this.defaultSampleCount:1,t.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach((function(t){return t.destroy()})),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),xl?this.device.getQueue().submit(this.commandBuffers.filter((function(t){return t}))):this.device.defaultQueue.submit(this.commandBuffers.filter((function(t){return t})))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:(e=Rr()(Or.a.mark((function t(){var e,n;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dd();case 2:return this.glslang=t.sent,t.next=5,null===(e=navigator)||void 0===e||null===(n=e.gpu)||void 0===n?void 0:n.requestAdapter();case 5:return this.adapter=t.sent,t.next=8,this.adapter.requestDevice();case 8:this.device=t.sent;case 9:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(xl?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:ql.TextureUsage.OutputAttachment|ql.TextureUsage.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var t={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:ql.TextureDimension.E2d,format:ql.TextureFormat.BGRA8Unorm,usage:ql.TextureUsage.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(t),this.mainColorAttachments=[{attachment:xl?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:ql.StoreOp.Store}]}else this.mainColorAttachments=[{attachment:xl?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:ql.StoreOp.Store}];var e={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:ql.TextureDimension.E2d,format:xl?"depth32float-stencil8":ql.TextureFormat.Depth24PlusStencil8,usage:ql.TextureUsage.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(e),this.mainDepthAttachment={attachment:xl?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:ql.StoreOp.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:ql.StoreOp.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=xl?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=xl?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(t,e,n){var r,o,i,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=null===(r=t.get().color)||void 0===r?void 0:r.texture;u&&(i=u.createView(this.currentRenderTargetViewDescriptor));var s,c=null===(o=t.get().depth)||void 0===o?void 0:o.texture;c&&(s=c.createView());var f=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:i,loadValue:null!==e?e:ql.LoadOp.Load,storeOp:ql.StoreOp.Store}],depthStencilAttachment:c&&s?{attachment:s,depthLoadValue:n?this.clearDepthValue:ql.LoadOp.Load,depthStoreOp:ql.StoreOp.Store,stencilLoadValue:a?this.clearStencilValue:ql.LoadOp.Load,stencilStoreOp:ql.StoreOp.Store}:void 0});this.currentRenderPass=f,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&null!==this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(t){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),t}())||zd;function rp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var op=(Vd=Object(Lr.injectable)(),Wd=Object(Lr.inject)(Ur.Systems),Xd=Object(Lr.named)(Ur.MaterialSystem),Hd=Object(Lr.inject)(Ur.Systems),qd=Object(Lr.named)(Ur.GeometrySystem),Yd=Object(Lr.inject)(Ur.ShaderModuleService),Vd((Zd=function(t){Wr()(n,t);var e=rp(n);function n(){var t;Er()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o)),xr()(t,"materialSystem",Qd,co()(t)),xr()(t,"geometrySystem",Jd,co()(t)),xr()(t,"shaderModuleService",$d,co()(t)),t}return Tr()(n,[{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data,r=this.getMeshComponent();r&&r.material&&("gridColor"===e?(r.material.setUniform("u_GridColor",n),r.material.setUniform("u_GridColor2",n)):"gridSize"===e&&(r.material.setUniform("u_GridSize",n),r.material.setUniform("u_GridSize2",n)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:"attribute vec3 a_Position;\\n\\nvarying vec3 v_Position;\\n\\nuniform mat4 projectionMatrix;\\nuniform mat4 modelViewMatrix;\\n\\nvoid main() {\\n  v_Position = a_Position;\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);\\n}",fs:"// generate grid, borrow from clay.gl viewer\\n// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl\\n#extension GL_OES_standard_derivatives : enable\\n\\nvarying vec3 v_Position;\\n// varying vec3 v_Normal;\\n\\nuniform float u_GridSize : 5;\\nuniform float u_GridSize2 : .5;\\nuniform vec4 u_GridColor : [0, 0, 0, 1];\\nuniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];\\nuniform bool u_GridEnabled : true;\\n\\n// uniform vec3 u_LightDirection;\\n// uniform vec3 u_LightColor;\\n// uniform vec3 u_Camera;\\n\\nvoid main() {\\n  // vec3 n = v_Normal;\\n  // vec3 l = normalize(u_LightDirection);\\n  // float NdotL = clamp(dot(n, l), 0.001, 1.0);\\n\\n  gl_FragColor = vec4(1.);\\n\\n  if (u_GridEnabled) {\\n    float wx = v_Position.x;\\n    float wz = v_Position.z;\\n    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;\\n    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;\\n\\n    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;\\n    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;\\n\\n    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);\\n    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);\\n    // if (v0 > 0.1) {\\n        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);\\n    // }\\n    // else {\\n        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);\\n    // }\\n  }\\n\\n  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);\\n  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;\\n\\n  // gl_FragColor.rgb *= diffuseColor;\\n}"});var t=this.shaderModuleService.getModule("grid"),e=t.vs,n=t.fs,r=t.uniforms,o=this.materialSystem.createShaderMaterial({vertexShader:e,fragmentShader:n});this.setMaterial(o);var i=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(i),o.setCull({enable:!1,face:Qu.BACK}).setDepth({enable:!0,func:Qu.LESS}),o.setUniform(r),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),i.setIndex([0,3,2,2,1,0]),i.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),n}(Ah),Qd=Ir()(Zd.prototype,"materialSystem",[Wd,Xd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jd=Ir()(Zd.prototype,"geometrySystem",[Hd,qd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$d=Ir()(Zd.prototype,"shaderModuleService",[Yd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kd=Zd))||Kd),ip=n(53),ap=n(36);function up(t,e,n,r,o){sp(e,r,-o),sp(e,r,o),t.push(n),t.push(n)}function sp(t,e,n){t.push([[e[0],e[1]],n])}var cp,fp,lp,hp,dp,pp,vp,mp,yp,gp,bp;function _p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var xp,wp,Ep,Sp,Tp,Ap,Ip,kp,Op,Dp,Rp,Mp=(cp=Object(Lr.injectable)(),fp=Object(Lr.inject)(Ur.Systems),lp=Object(Lr.named)(Ur.MaterialSystem),hp=Object(Lr.inject)(Ur.Systems),dp=Object(Lr.named)(Ur.GeometrySystem),pp=Object(Lr.inject)(Ur.ShaderModuleService),cp((mp=function(t){Wr()(n,t);var e=_p(n);function n(){var t;Er()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o)),xr()(t,"materialSystem",yp,co()(t)),xr()(t,"geometrySystem",gp,co()(t)),xr()(t,"shaderModuleService",bp,co()(t)),t.vertexCount=void 0,t}return Tr()(n,[{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data,r=this.getMeshComponent();if(r&&r.material)switch(e){case"dashArray":r.material.setUniform("u_dash_array",n);break;case"dashOffset":r.material.setUniform("u_dash_offset",n);break;case"dashRatio":r.material.setUniform("u_dash_ratio",n);break;case"thickness":r.material.setUniform("u_thickness",n);break;case"color":var o=new Array(this.vertexCount).fill(void 0).map((function(){return n})).reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[]);r.geometry.setAttribute("a_color",Float32Array.from(o),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]})}}},{key:"onEntityCreated",value:function(){var t=this;this.shaderModuleService.registerModule("line",{vs:"attribute vec2 a_pos;\\nattribute vec4 a_color;\\nattribute float a_line_miter;\\nattribute vec2 a_line_normal;\\nattribute float a_counters;\\n\\nuniform mat4 projectionMatrix;\\nuniform mat4 modelViewMatrix;\\nuniform float u_thickness : 0.02;\\nuniform vec2 u_viewport;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_counters;\\n\\nvoid main() {\\n  v_color = a_color;\\n  v_counters = a_counters;\\n\\n  vec3 normal = normalize(vec3(a_line_normal, 0.0));\\n\\n  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);\\n\\n  v_normal = vec2(normal * sign(a_line_miter));\\n\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;\\n}\\n",fs:"uniform float u_dash_array : 0.02;\\nuniform float u_dash_offset : 0;\\nuniform float u_dash_ratio : 0;\\nuniform float u_thickness : 0.02;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_counters;\\n\\nvoid main() {\\n    float blur = 1. - smoothstep(0.98, 1., length(v_normal));\\n\\n    gl_FragColor = v_color;\\n    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));\\n}"});var e=this.shaderModuleService.getModule("line"),n=e.vs,r=e.fs,o=e.uniforms,i=this.materialSystem.createShaderMaterial({vertexShader:n,fragmentShader:r}),a=function(t,e,n){var r=[0,0],o=[0,0],i=[0,0],a=[0,0],u=-1,s=!1,c=null,f=Object(ip.create)(),l=n||0,h=[],d=[],p=[],v=[0,0];e&&(t=t.slice()).push(t[0]);for(var m=t.length,y=1;y<m;y++){var g=l,b=t[y-1],_=t[y],x=y<t.length-1?t[y+1]:null;if(v.push(y/m,y/m),Object(ap.direction)(r,_,b),c||(c=[0,0],Object(ap.normal)(c,r)),s||(s=!0,up(d,h,b,c,1)),p.push([g+0,g+1,g+2]),x){Object(ap.direction)(o,x,_);var w=Object(ap.computeMiter)(i,a,r,o,1),E=Object(ip.dot)(i,c)<0?-1:1,S=w>3;if(!isFinite(w)){Object(ap.normal)(c,r),up(d,h,_,c,1),p.push(1===u?[g,g+2,g+3]:[g+2,g+1,g+3]),l+=2,u=E;continue}S?(w=3,v.push(y/m),sp(h,c,-E),d.push(_),sp(h,a,w*E),d.push(_),p.push(u!==-E?[g,g+2,g+3]:[g+2,g+1,g+3]),p.push([g+2,g+3,g+4]),Object(ap.normal)(f,o),Object(ip.copy)(c,f),sp(h,c,-E),d.push(_),l+=3):(up(d,h,_,a,w),p.push(1===u?[g,g+2,g+3]:[g+2,g+1,g+3]),E=-1,Object(ip.copy)(c,a),l+=2),u=E}else Object(ap.normal)(c,r),up(d,h,_,c,1),p.push(1===u?[g,g+2,g+3]:[g+2,g+1,g+3]),l+=2}return{normals:h,attrIndex:p,attrPos:d,attrCounters:v}}(this.config.points,!1),u=a.normals,s=a.attrIndex,c=a.attrPos,f=a.attrCounters,l=c.length;this.vertexCount=l;var h=this.geometrySystem.createBufferGeometry({vertexCount:l});this.setMaterial(i),this.setGeometry(h),i.setCull({enable:!1,face:Qu.BACK}).setUniform(o),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var d=[],p=[];u.forEach((function(t){var e=t[0],n=t[1];d.push([e[0],e[1]]),p.push(n)})),h.setIndex(s.reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[])),h.setAttribute("a_pos",Float32Array.from(c.reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var v=new Array(l).fill(void 0).map((function(){return Hh()(t.config.color)})).reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[]);h.setAttribute("a_color",Float32Array.from(v),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),h.setAttribute("a_line_miter",Float32Array.from(p),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),h.setAttribute("a_line_normal",Float32Array.from(d.reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),h.setAttribute("a_counters",Float32Array.from(f),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),n}(Ah),yp=Ir()(mp.prototype,"materialSystem",[fp,lp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gp=Ir()(mp.prototype,"geometrySystem",[hp,dp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bp=Ir()(mp.prototype,"shaderModuleService",[pp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vp=mp))||vp);function Cp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Np(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Pp=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"];console.log();var Gp,jp,Lp,Up,Bp,Fp,zp,Vp,Wp,Xp=(xp=Object(Lr.injectable)(),wp=Object(Lr.inject)(Ur.Systems),Ep=Object(Lr.named)(Ur.MaterialSystem),Sp=Object(Lr.inject)(Ur.Systems),Tp=Object(Lr.named)(Ur.GeometrySystem),Ap=Object(Lr.inject)(Ur.ShaderModuleService),xp((kp=function(t){Wr()(n,t);var e=Np(n);function n(){var t;Er()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o)),xr()(t,"materialSystem",Op,co()(t)),xr()(t,"geometrySystem",Dp,co()(t)),xr()(t,"shaderModuleService",Rp,co()(t)),t}return Tr()(n,[{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data,r=this.getMeshComponent();r&&r.material&&("strokeWidth"===e?r.material.setUniform("u_stroke_width",n):"strokeColor"===e?r.material.setUniform("u_stroke_color",n):"strokeOpacity"===e?r.material.setUniform("u_stroke_opacity",n):"opacity"===e?r.material.setUniform("u_opacity",n):"blur"===e&&r.material.setUniform("u_blur",n))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:'attribute vec2 position;\\nattribute vec4 color;\\nattribute float shape;\\nattribute vec2 offset;\\nattribute float size;\\n\\nuniform mat4 projectionMatrix;\\nuniform mat4 modelViewMatrix;\\n\\nuniform float u_stroke_width : 0.01;\\nuniform float u_device_pixel_ratio;\\nuniform vec2 u_viewport;\\n\\nvarying vec4 v_color;\\nvarying vec4 v_data;\\nvarying float v_radius;\\n\\n#pragma include "picking"\\n\\nvoid main() {\\n  v_color = color;\\n  v_radius = size;\\n\\n  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);\\n\\n  // construct point coords\\n  v_data = vec4(position, antialiasblur, shape);\\n\\n  gl_Position = projectionMatrix * modelViewMatrix\\n    * vec4(position * size + offset, 0.0, 1.0);\\n\\n  setPickingColor(a_PickingColor);\\n}',fs:"uniform float u_blur : 0.05;\\nuniform float u_opacity : 0.7;\\nuniform float u_stroke_width : 0.01;\\nuniform vec4 u_stroke_color : [0, 0, 0, 0];\\nuniform float u_stroke_opacity : 1;\\n\\nvarying vec4 v_color;\\nvarying vec4 v_data;\\nvarying float v_radius;\\n\\n#pragma include \\"sdf2d\\"\\n#pragma include \\"picking\\"\\n\\nvoid main() {\\n  int shape = int(floor(v_data.w + 0.5));\\n\\n  float antialiasblur = v_data.z;\\n  float antialiased_blur = -max(u_blur, antialiasblur);\\n  float r = v_radius / (v_radius + u_stroke_width);\\n\\n  float outer_df;\\n  float inner_df;\\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\\n  // if (shape == 0) {\\n    outer_df = sdCircle(v_data.xy, 1.0);\\n    inner_df = sdCircle(v_data.xy, r);\\n  // } else if (shape == 1) {\\n  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);\\n  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);\\n  // } else if (shape == 2) {\\n  //   outer_df = sdBox(v_data.xy, vec2(1.));\\n  //   inner_df = sdBox(v_data.xy, vec2(r));\\n  // } else if (shape == 3) {\\n  //   outer_df = sdPentagon(v_data.xy, 0.8);\\n  //   inner_df = sdPentagon(v_data.xy, r * 0.8);\\n  // } else if (shape == 4) {\\n  //   outer_df = sdHexagon(v_data.xy, 0.8);\\n  //   inner_df = sdHexagon(v_data.xy, r * 0.8);\\n  // } else if (shape == 5) {\\n  //   outer_df = sdOctogon(v_data.xy, 1.0);\\n  //   inner_df = sdOctogon(v_data.xy, r);\\n  // } else if (shape == 6) {\\n  //   outer_df = sdHexagram(v_data.xy, 0.52);\\n  //   inner_df = sdHexagram(v_data.xy, r * 0.52);\\n  // } else if (shape == 7) {\\n  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));\\n  //   inner_df = sdRhombus(v_data.xy, vec2(r));\\n  // } else if (shape == 8) {\\n  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);\\n  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);\\n  // }\\n\\n  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);\\n\\n  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(\\n    antialiased_blur,\\n    0.0,\\n    inner_df\\n  );\\n  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;\\n\\n  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);\\n  gl_FragColor.a = gl_FragColor.a * opacity_t;\\n\\n  gl_FragColor = filterColor(gl_FragColor);\\n}"});var t=this.shaderModuleService.getModule("grid"),e=t.vs,n=t.fs,r=t.uniforms,o=this.materialSystem.createShaderMaterial({vertexShader:e,fragmentShader:n,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:Qu.SRC_ALPHA,dstRGB:Qu.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});o.setUniform(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Cp(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({u_device_pixel_ratio:window.devicePixelRatio},r));var i=this.buildAttributes(),a=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:i.instancedOffsets.length/2,vertexCount:6});a.setIndex([0,2,1,0,3,2]),a.setAttribute("position",Float32Array.from(i.positions),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),a.setAttribute("offset",Float32Array.from(i.instancedOffsets),{arrayStride:8,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),a.setAttribute("color",Float32Array.from(i.instancedColors),{arrayStride:16,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),a.setAttribute("size",Float32Array.from(i.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),a.setAttribute("shape",Float32Array.from(i.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),a.setAttribute("a_PickingColor",Float32Array.from(i.instancedPickingColors),{arrayStride:12,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(o),this.setGeometry(a)}},{key:"buildAttribute",value:function(t,e,n){var r,o,i,a,u;(r=e.instancedPickingColors).push.apply(r,Hh()([(u=t.id||n)+1&255,u+1>>8&255,u+1>>8>>8&255])),e.instancedShapes.push(Pp.indexOf(t.shape||"circle")),(o=e.instancedColors).push.apply(o,Hh()(t.color||[1,0,0,1])),(i=e.instancedOffsets).push.apply(i,Hh()(t.position||[0,0])),(a=e.instancedSizes).push.apply(a,Hh()(t.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var t=this,e={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach((function(n,r){t.buildAttribute(n,e,r)})):this.buildAttribute(this.config,e,0),e}}]),n}(Ah),Op=Ir()(kp.prototype,"materialSystem",[wp,Ep],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dp=Ir()(kp.prototype,"geometrySystem",[Sp,Tp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rp=Ir()(kp.prototype,"shaderModuleService",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ip=kp))||Ip);function Hp(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return qp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qp(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function qp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Yp,Kp,Zp,Qp,Jp,$p,tv,ev,nv,rv,ov,iv,av=(Gp=Object(Lr.injectable)(),jp=Object(Lr.inject)(Ur.RenderEngine),Lp=Object(Lr.inject)(Ur.ShaderModuleService),Up=Object(Lr.inject)(Ur.ConfigService),Gp((Fp=function(){function t(){Er()(this,t),xr()(this,"engine",zp,this),xr()(this,"shaderModule",Vp,this),xr()(this,"configService",Wp,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0,this.container=void 0}var e,n;return Tr()(t,[{key:"init",value:(n=Rr()(Or.a.mark((function t(){var e,n,r,o,i;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.shaderModule.registerBuiltinModules(),e=this.container.getAll(Ur.Systems),!(n=this.configService.get()).canvas){t.next=25;break}return t.next=6,this.engine.init({canvas:n.canvas,swapChainFormat:ql.TextureFormat.BGRA8Unorm,antialiasing:!1});case 6:r=Hp(e),t.prev=7,r.s();case 9:if((o=r.n()).done){t.next=16;break}if(!(i=o.value).initialize){t.next=14;break}return t.next=14,i.initialize();case 14:t.next=9;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(7),r.e(t.t0);case 21:return t.prev=21,r.f(),t.finish(21);case 24:this.inited=!0;case 25:case"end":return t.stop()}}),t,this,[[7,18,21,24]])}))),function(){return n.apply(this,arguments)})},{key:"render",value:(e=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s=arguments;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.inited&&!this.rendering){t.next=2;break}return t.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach((function(t){t()})),this.rendering=!0,this.engine.beginFrame(),e=this.container.getAll(Ur.Systems),n=s.length,r=new Array(n),o=0;o<n;o++)r[o]=s[o];i=Hp(e),t.prev=8,i.s();case 10:if((a=i.n()).done){t.next=17;break}if(!(u=a.value).execute){t.next=15;break}return t.next=15,u.execute(r);case 15:t.next=10;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(8),i.e(t.t0);case 22:return t.prev=22,i.f(),t.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return t.stop()}}),t,this,[[8,19,22,25]])}))),function(){return e.apply(this,arguments)})},{key:"clear",value:function(t){var e=this;return this.inited?this.engine.clear(t):this.pendings.unshift((function(){e.engine.clear(t),e.pendings.shift()})),this}},{key:"setSize",value:function(t){var e=t.width,n=t.height,r=this.engine.getCanvas();return this.size={width:e,height:n},r.width=e,r.height=n,this}},{key:"getSize",value:function(){return this.size}}]),t}(),zp=Ir()(Fp.prototype,"engine",[jp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vp=Ir()(Fp.prototype,"shaderModule",[Lp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wp=Ir()(Fp.prototype,"configService",[Up],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bp=Fp))||Bp),uv=Object(Lr.injectable)()(Yp=function(){function t(){Er()(this,t),this.entities=[]}return Tr()(t,[{key:"getEntities",value:function(){return this.entities}},{key:"addEntity",value:function(t){return-1===this.entities.indexOf(t)&&this.entities.push(t),this}},{key:"removeEntity",value:function(t){var e=this.entities.indexOf(t);return this.entities.splice(e,1),this}}]),t}())||Yp,sv=(Kp=Object(Lr.injectable)(),Zp=Object(Lr.inject)(Ur.Systems),Qp=Object(Lr.named)(Ur.RendererSystem),Kp(($p=function(){function t(){Er()(this,t),xr()(this,"rendererSystem",tv,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return Tr()(t,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(t){return this.camera=t,this}},{key:"setScene",value:function(t){return this.scene=t,this}},{key:"setViewport",value:function(t){return this.viewport=t,this}},{key:"setClearColor",value:function(t){return this.clearColor=t,this}},{key:"pick",value:function(t){return this.rendererSystem.pick(t,this)}}]),t}(),tv=Ir()($p.prototype,"rendererSystem",[Zp,Qp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jp=$p))||Jp);function cv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cv(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var lv=(ev=Object(Lr.injectable)(),nv=Object(Lr.inject)(Ur.ConfigService),ev((ov=function(){function t(){Er()(this,t),xr()(this,"configService",iv,this),this.container=void 0}var e;return Tr()(t,[{key:"getEngine",value:(e=Rr()(Or.a.mark((function t(){var e,n,r,o;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.container.get(Ur.RenderEngine),n=this.configService.get(),r=n.canvas,o=n.engineOptions,t.next=4,e.init(fv({canvas:r||Yl(),swapChainFormat:ql.TextureFormat.BGRA8Unorm,antialiasing:!1},o));case 4:return t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"getTransformComponent",value:function(t){return this.container.get(Ur.TransformComponentManager).getComponentByEntity(t)}},{key:"getMeshComponent",value:function(t){return this.container.get(Ur.MeshComponentManager).getComponentByEntity(t)}},{key:"setConfig",value:function(t){this.configService.set(t)}},{key:"setContainer",value:function(t){this.container=t}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return Cr()}},{key:"createScene",value:function(){return this.container.get(uv)}},{key:"createCamera",value:function(){return this.container.get(zl)}},{key:"createView",value:function(){return this.container.get(sv)}},{key:"createRenderable",value:function(t,e,n){var r=e?this.container.getNamed(Ur.Renderable,e):this.container.get(Ah);return r.setConfig(n||{}),r.setEntity(t),r}},{key:"createBoxGeometry",value:function(t){return this.container.getNamed(Ur.Systems,Ur.GeometrySystem).createBox(t)}},{key:"createBufferGeometry",value:function(t){return this.container.getNamed(Ur.Systems,Ur.GeometrySystem).createBufferGeometry(t)}},{key:"createInstancedBufferGeometry",value:function(t){return this.container.getNamed(Ur.Systems,Ur.GeometrySystem).createInstancedBufferGeometry(t)}},{key:"createBasicMaterial",value:function(){return this.container.getNamed(Ur.Systems,Ur.MaterialSystem).createBasicMaterial()}},{key:"createShaderMaterial",value:function(t){return this.container.getNamed(Ur.Systems,Ur.MaterialSystem).createShaderMaterial(t)}},{key:"createKernel",value:function(t){var e=this.container.get(Th);return"string"==typeof t?e.setBundle(JSON.parse(t)):e.setBundle(t),e.init(),e}},{key:"createRenderer",value:function(){var t=this.container.get(av);return t.container=this.container,t.init(),t}},{key:"destroy",value:function(){this.container.getAll(Ur.Systems).forEach((function(t){t.tearDown&&t.tearDown()})),this.container.get(Ur.RenderEngine).destroy(),this.container.get(Ur.InteractorService).destroy()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=vl(),r=navigator.gpu?np:fd;n.isBound(Ur.RenderEngine)||n.bind(Ur.RenderEngine).to(r).inSingletonScope(),n.bind(av).toSelf(),n.bind(Th).toSelf(),n.bind(Ah).toSelf(),n.bind(sv).toSelf(),n.bind(zl).toSelf(),n.bind(uv).toSelf(),n.bind(t).toSelf(),n.bind(Ur.Renderable).to(Xp).whenTargetNamed(Ah.POINT),n.bind(Ur.Renderable).to(Mp).whenTargetNamed(Ah.LINE),n.bind(Ur.Renderable).to(op).whenTargetNamed(Ah.GRID);var o=n.get(t);return o.setContainer(n),o.setConfig(e),o}}]),t}(),iv=Ir()(ov.prototype,"configService",[nv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rv=ov))||rv),hv=function(t,e){return t?y(t)?function(){return t}:t:function(){return e||1}},dv=function(t,e){var n=[],r=[],o={},i=0;for(i=0;i<t.length;i++){var a=t[i];o[a.id]=i,n.push(a.x),n.push(a.y),n.push(0),n.push(0),r.push([])}for(i=0;i<e.length;i++){var u=e[i];r[o[u.source]].push(o[u.target]),r[o[u.target]].push(o[u.source])}var s=0;for(i=0;i<t.length;i++){var c=n.length,f=r[i],l=f.length;n[4*i+2]=c,n[4*i+3]=f.length,s=Math.max(s,f.length);for(var h=0;h<l;++h){var d=f[h];n.push(+d)}}for(;n.length%4!=0;)n.push(0);return{maxEdgePerVetex:s,array:new Float32Array(n)}},pv=function(t,e,n,r){var o=[],i=[],a={},u=0;for(u=0;u<t.length;u++){var s=t[u];a[s.id]=u,o.push(s.x),o.push(s.y),o.push(0),o.push(0),i.push([])}for(u=0;u<e.length;u++){var c=e[u];i[a[c.source]].push(a[c.target]),i[a[c.source]].push(n(c)),i[a[c.source]].push(r(c)),i[a[c.source]].push(0),i[a[c.target]].push(a[c.source]),i[a[c.target]].push(n(c)),i[a[c.target]].push(r(c)),i[a[c.target]].push(0)}var f=0;for(u=0;u<t.length;u++){var l=o.length,h=i[u],d=h.length;o[4*u+2]=l+1048576*d/4,o[4*u+3]=0,f=Math.max(f,d/4);for(var p=0;p<d;++p){var v=h[p];o.push(+v)}}for(;o.length%4!=0;)o.push(0);return{maxEdgePerVetex:f,array:new Float32Array(o)}},vv=function(t,e){var n=[],r=t.length,o={};return e.forEach((function(e){t.forEach((function(t,i){if(void 0===o[e[t]]&&(o[e[t]]=Object.keys(o).length),n.push(o[e[t]]),i===r-1)for(;n.length%4!=0;)n.push(0)}))})),{array:new Float32Array(n),count:Object.keys(o).length}},mv=function(t){for(var e=[],n=t.length,r=t[0].length,o=function(r){t.forEach((function(t,o){if(e.push(t[r]),o===n-1)for(;e.length%4!=0;)e.push(0)}))},i=0;i<r;i++)o(i);return new Float32Array(e)};function yv(t){return(yv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bv(t,e){return(bv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=wv(t);if(e){var o=wv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xv(this,n)}}function xv(t,e){return!e||"object"!==yv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wv(t){return(wv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ev=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},Sv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bv(t,e)}(i,t);var e,n,r,o=_v(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.gravity=10,e.speed=1,e.clustering=!1,e.clusterField="cluster",e.clusterGravity=10,e.workerEnabled=!1,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return Ev(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,r,o,i,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=(e=this).nodes)&&0!==n.length){t.next=5;break}return e.onLayoutEnd&&e.onLayoutEnd(),t.abrupt("return");case 5:if(e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]),r=e.center,1!==n.length){t.next=14;break}return n[0].x=r[0],n[0].y=r[1],e.onLayoutEnd&&e.onLayoutEnd(),t.abrupt("return");case 14:return o={},i={},n.forEach((function(t,e){y(t.x)||(t.x=Math.random()*a.width),y(t.y)||(t.y=Math.random()*a.height),o[t.id]=t,i[t.id]=e})),e.nodeMap=o,e.nodeIdxMap=i,t.next=21,e.run();case 21:case"end":return t.stop()}}),t,this)})))}},{key:"executeWithWorker",value:function(t,e){return Ev(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,i,a,u,s=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=(r=this).nodes,i=r.center,o&&0!==o.length){n.next=5;break}return n.abrupt("return");case 5:if(1!==o.length){n.next=9;break}return o[0].x=i[0],o[0].y=i[1],n.abrupt("return");case 9:return a={},u={},o.forEach((function(t,e){y(t.x)||(t.x=Math.random()*s.width),y(t.y)||(t.y=Math.random()*s.height),a[t.id]=t,u[t.id]=e})),r.nodeMap=a,r.nodeIdxMap=u,n.next=16,r.run(t,e);case 16:case"end":return n.stop()}}),n,this)})))}},{key:"run",value:function(t,e){return Ev(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,i,a,u,s,c,f,l,h,d,p,v,m,y,g,b,_,x,w,E,S,T,A,I,k,O=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(o=(r=this).nodes,i=r.edges,a=r.maxIteration,u=r.center,s=r.height*r.width,c=Math.sqrt(s)/10,f=s/(o.length+1),l=Math.sqrt(f),h=r.speed,d=r.clustering,p=vv([r.clusterField],o),v=p.array,m=p.count,y=o.length,g=dv(o,i),b=g.maxEdgePerVetex,_=g.array,x=r.workerEnabled,w=x?lv.create({canvas:t,engineOptions:{supportCompute:!0}}):lv.create({engineOptions:{supportCompute:!0}}),E=r.onLayoutEnd,S=[],T=0;T<m;T++)S.push(0,0,0,0);return A=w.createKernel('{"shaders":{"WGSL":"import \\\\"GLSL.std.450\\\\" as std;\\\\n\\\\n\\\\n# var gWebGPUDebug : bool = false;\\\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\\\n\\\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\\\n\\\\ntype GWebGPUParams = [[block]] struct {\\\\n  [[offset 0]] u_K : f32;\\\\n  [[offset 4]] u_K2 : f32;\\\\n  [[offset 8]] u_Center : vec2<f32>;\\\\n  [[offset 16]] u_Gravity : f32;\\\\n  [[offset 20]] u_ClusterGravity : f32;\\\\n  [[offset 24]] u_Speed : f32;\\\\n  [[offset 28]] u_MaxDisplace : f32;\\\\n  [[offset 32]] u_Clustering : f32;\\\\n};\\\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\\\ntype GWebGPUBuffer0 = [[block]] struct {\\\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\\\ntype GWebGPUBuffer1 = [[block]] struct {\\\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\\\ntype GWebGPUBuffer2 = [[block]] struct {\\\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\\\nvar dy : f32 = 0.0;\\\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\\\nvar xDist : f32 = currentNode.x - nextNode.x;\\\\nvar yDist : f32 = currentNode.y - nextNode.y;\\\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\\\nif (dist > 0.0) {dx = dx + param * xDist;\\\\ndy = dy + param * yDist;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\\\ndx = dx + param * std::sign;\\\\ndy = dy + param * std::sign;}}}}\\\\nreturn vec2<f32>(dx, dy);}\\\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\\\nvar dy : f32 = 0.0;\\\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\\\ndx = gf * vx;\\\\ndy = gf * vy;\\\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\\\nvar cvx : f32 = currentNode.x - center.x;\\\\nvar cvy : f32 = currentNode.y - center.y;\\\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\\\ndx = dx + parma * cvx;\\\\ndy = dy + parma * cvy;}\\\\nreturn vec2<f32>(dx, dy);}\\\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\\\nvar dy : f32 = 0.0;\\\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\\\nvar node_buffer : vec4<f32>;\\\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\\\nvar arr_idx : i32 = arr_offset + i32(p);\\\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\\\nvar xDist : f32 = currentNode.x - nextNode.x;\\\\nvar yDist : f32 = currentNode.y - nextNode.y;\\\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\\\ndy = dy - yDist * attractiveF;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\\\ndx = dx - std::sign * attractiveF;\\\\ndy = dy - std::sign * attractiveF;}}}\\\\nreturn vec2<f32>(dx, dy);}\\\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\\\nvar dx : f32 = 0.0;\\\\nvar dy : f32 = 0.0;\\\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\\\nreturn ;}\\\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\\\ndx = dx + repulsive.x;\\\\ndy = dy + repulsive.y;\\\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\\\ndx = dx + attractive.x;\\\\ndy = dy + attractive.y;\\\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\\\ndx = dx - gravity.x;\\\\ndy = dy - gravity.y;\\\\ndx = dx * gWebGPUUniformParams.u_Speed;\\\\ndy = dy * gWebGPUUniformParams.u_Speed;\\\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\\\nreturn;}\\\\n\\\\nentry_point compute as \\\\"main\\\\" = main;\\\\n","GLSL450":"\\\\n\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\\\nivec3 workGroupSize = ivec3(1,1,1);\\\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\\\n\\\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\\\n  float u_K;\\\\n  float u_K2;\\\\n  vec2 u_Center;\\\\n  float u_Gravity;\\\\n  float u_ClusterGravity;\\\\n  float u_Speed;\\\\n  float u_MaxDisplace;\\\\n  float u_Clustering;\\\\n} gWebGPUUniformParams;\\\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\\\n  vec4 u_Data[];\\\\n} gWebGPUBuffer0;\\\\n\\\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\\\n  vec4 u_AttributeArray[];\\\\n} gWebGPUBuffer1;\\\\n\\\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\\\n  vec4 u_ClusterCenters[];\\\\n} gWebGPUBuffer2;\\\\n\\\\n\\\\n\\\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\nlayout (\\\\n  local_size_x = 1,\\\\n  local_size_y = 1,\\\\n  local_size_z = 1\\\\n) in;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\\\nfloat dy = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\\\nfloat xDist = currentNode.x - nextNode.x;\\\\nfloat yDist = currentNode.y - nextNode.y;\\\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\\\nif (dist > 0.0) {dx += param * xDist;\\\\ndy += param * yDist;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\\\ndx += param * sign;\\\\ndy += param * sign;}}}}\\\\nreturn vec2(dx, dy);}\\\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\\\nfloat dy = 0.0;\\\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\\\ndx = gf * vx;\\\\ndy = gf * vy;\\\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\\\nfloat cvx = currentNode.x - center.x;\\\\nfloat cvy = currentNode.y - center.y;\\\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\\\ndx += parma * cvx;\\\\ndy += parma * cvy;}\\\\nreturn vec2(dx, dy);}\\\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\\\nfloat dy = 0.0;\\\\nint arr_offset = int(floor(currentNode.z + 0.5));\\\\nint length = int(floor(currentNode.w + 0.5));\\\\nvec4 node_buffer;\\\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\\\nint arr_idx = arr_offset + int(p);\\\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\\\nfloat xDist = currentNode.x - nextNode.x;\\\\nfloat yDist = currentNode.y - nextNode.y;\\\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\\\ndy -= yDist * attractiveF;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\\\ndx -= sign * attractiveF;\\\\ndy -= sign * attractiveF;}}}\\\\nreturn vec2(dx, dy);}\\\\nvoid main() {int i = globalInvocationID.x;\\\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\\\nreturn ;}\\\\nvec2 repulsive = calcRepulsive(i, currentNode);\\\\ndx += repulsive.x;\\\\ndy += repulsive.y;\\\\nvec2 attractive = calcAttractive(i, currentNode);\\\\ndx += attractive.x;\\\\ndy += attractive.y;\\\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\\\ndx -= gravity.x;\\\\ndy -= gravity.y;\\\\ndx *= gWebGPUUniformParams.u_Speed;\\\\ndy *= gWebGPUUniformParams.u_Speed;\\\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\\\n","GLSL100":"\\\\n\\\\nfloat epsilon = 0.00001;\\\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\\\n  vec2 normAddr2D = float(address1D) * conv_const;\\\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\\\n}\\\\n\\\\nvoid barrier() {}\\\\n  \\\\n\\\\nuniform vec2 u_OutputTextureSize;\\\\nuniform int u_OutputTexelCount;\\\\nvarying vec2 v_TexCoord;\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n\\\\nuniform sampler2D u_Data;\\\\nuniform vec2 u_DataSize;\\\\nvec4 getDatau_Data(vec2 address2D) {\\\\n  return vec4(texture2D(u_Data, address2D).rgba);\\\\n}\\\\nvec4 getDatau_Data(float address1D) {\\\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\\\n}\\\\nvec4 getDatau_Data(int address1D) {\\\\n  return getDatau_Data(float(address1D));\\\\n}\\\\nuniform float u_K;\\\\nuniform float u_K2;\\\\nuniform vec2 u_Center;\\\\nuniform float u_Gravity;\\\\nuniform float u_ClusterGravity;\\\\nuniform float u_Speed;\\\\nuniform float u_MaxDisplace;\\\\nuniform float u_Clustering;\\\\nuniform sampler2D u_AttributeArray;\\\\nuniform vec2 u_AttributeArraySize;\\\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\\\n}\\\\nvec4 getDatau_AttributeArray(float address1D) {\\\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\\\n}\\\\nvec4 getDatau_AttributeArray(int address1D) {\\\\n  return getDatau_AttributeArray(float(address1D));\\\\n}\\\\nuniform sampler2D u_ClusterCenters;\\\\nuniform vec2 u_ClusterCentersSize;\\\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\\\n}\\\\nvec4 getDatau_ClusterCenters(float address1D) {\\\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\\\n}\\\\nvec4 getDatau_ClusterCenters(int address1D) {\\\\n  return getDatau_ClusterCenters(float(address1D));\\\\n}\\\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\\\nfloat xDist = currentNode.x - nextNode.x;\\\\nfloat yDist = currentNode.y - nextNode.y;\\\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nfloat param = u_K2 / dist;\\\\nif (dist > 0.0) {dx += param * xDist;\\\\ndy += param * yDist;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\\\ndx += param * sign;\\\\ndy += param * sign;}}}}\\\\nreturn vec2(dx, dy);}\\\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nfloat vx = currentNode.x - u_Center.x;\\\\nfloat vy = currentNode.y - u_Center.y;\\\\nfloat gf = (0.01 * u_K) * u_Gravity;\\\\ndx = gf * vx;\\\\ndy = gf * vy;\\\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\\\nfloat cvx = currentNode.x - center.x;\\\\nfloat cvy = currentNode.y - center.y;\\\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\\\ndx += parma * cvx;\\\\ndy += parma * cvy;}\\\\nreturn vec2(dx, dy);}\\\\nvec2 calcAttractive(int i, vec4 currentNode) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nint arr_offset = int(floor(currentNode.z + 0.5));\\\\nint length = int(floor(currentNode.w + 0.5));\\\\nvec4 node_buffer;\\\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\\\nint arr_idx = arr_offset + int(p);\\\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\\\nvec4 nextNode = getDatau_Data(int(float_j));\\\\nfloat xDist = currentNode.x - nextNode.x;\\\\nfloat yDist = currentNode.y - nextNode.y;\\\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nfloat attractiveF = dist / u_K;\\\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\\\ndy -= yDist * attractiveF;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\\\ndx -= sign * attractiveF;\\\\ndy -= sign * attractiveF;}}}\\\\nreturn vec2(dx, dy);}\\\\nvoid main() {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nint i = globalInvocationID.x;\\\\nvec4 currentNode = getDatau_Data(i);\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\\\nreturn ;}\\\\nvec2 repulsive = calcRepulsive(i, currentNode);\\\\ndx += repulsive.x;\\\\ndy += repulsive.y;\\\\nvec2 attractive = calcAttractive(i, currentNode);\\\\ndx += attractive.x;\\\\ndy += attractive.y;\\\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\\\ndx -= gravity.x;\\\\ndy -= gravity.y;\\\\ndx *= u_Speed;\\\\ndy *= u_Speed;\\\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\\\n  gl_FragColor = gWebGPUDebugOutput;\\\\n}}\\\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([y,1,1]).setBinding({u_Data:_,u_K:l,u_K2:f,u_Gravity:r.gravity,u_ClusterGravity:r.clusterGravity||r.gravity||1,u_Speed:h,u_MaxDisplace:c,u_Clustering:d?1:0,u_Center:u,u_AttributeArray:v,u_ClusterCenters:S,MAX_EDGE_PER_VERTEX:b,VERTEX_COUNT:y}),d&&(I=w.createKernel('{"shaders":{"WGSL":"import \\\\"GLSL.std.450\\\\" as std;\\\\n\\\\n\\\\n# var gWebGPUDebug : bool = false;\\\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\\\n\\\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\\\n\\\\n\\\\ntype GWebGPUBuffer0 = [[block]] struct {\\\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\\\ntype GWebGPUBuffer1 = [[block]] struct {\\\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\\\ntype GWebGPUBuffer2 = [[block]] struct {\\\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\\\nvar sumx : f32 = 0.0;\\\\nvar sumy : f32 = 0.0;\\\\nvar count : f32 = 0.0;\\\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\\\nvar clusterIdx : i32 = i32(attributes.x);\\\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\\\nsumy = sumy + vertex.y;\\\\ncount = count + 1.0;}}\\\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\\\nreturn;}\\\\n\\\\nentry_point compute as \\\\"main\\\\" = main;\\\\n","GLSL450":"\\\\n\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\\\nivec3 workGroupSize = ivec3(1,1,1);\\\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\\\n\\\\n\\\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\\\n  vec4 u_Data[];\\\\n} gWebGPUBuffer0;\\\\n\\\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\\\n  vec4 u_NodeAttributes[];\\\\n} gWebGPUBuffer1;\\\\n\\\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\\\n  vec4 u_ClusterCenters[];\\\\n} gWebGPUBuffer2;\\\\n\\\\n\\\\n\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\\\nlayout (\\\\n  local_size_x = 1,\\\\n  local_size_y = 1,\\\\n  local_size_z = 1\\\\n) in;\\\\n\\\\n\\\\n\\\\nvoid main() {int i = globalInvocationID.x;\\\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\\\nfloat sumx = 0.0;\\\\nfloat sumy = 0.0;\\\\nfloat count = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\\\nint clusterIdx = int(attributes.x);\\\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\\\nif (clusterIdx == i) {sumx += vertex.x;\\\\nsumy += vertex.y;\\\\ncount += 1.0;}}\\\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\\\n","GLSL100":"\\\\n\\\\nfloat epsilon = 0.00001;\\\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\\\n  vec2 normAddr2D = float(address1D) * conv_const;\\\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\\\n}\\\\n\\\\nvoid barrier() {}\\\\n  \\\\n\\\\nuniform vec2 u_OutputTextureSize;\\\\nuniform int u_OutputTexelCount;\\\\nvarying vec2 v_TexCoord;\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\\\n\\\\nuniform sampler2D u_Data;\\\\nuniform vec2 u_DataSize;\\\\nvec4 getDatau_Data(vec2 address2D) {\\\\n  return vec4(texture2D(u_Data, address2D).rgba);\\\\n}\\\\nvec4 getDatau_Data(float address1D) {\\\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\\\n}\\\\nvec4 getDatau_Data(int address1D) {\\\\n  return getDatau_Data(float(address1D));\\\\n}\\\\nuniform sampler2D u_NodeAttributes;\\\\nuniform vec2 u_NodeAttributesSize;\\\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\\\n}\\\\nvec4 getDatau_NodeAttributes(float address1D) {\\\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\\\n}\\\\nvec4 getDatau_NodeAttributes(int address1D) {\\\\n  return getDatau_NodeAttributes(float(address1D));\\\\n}\\\\nuniform sampler2D u_ClusterCenters;\\\\nuniform vec2 u_ClusterCentersSize;\\\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\\\n}\\\\nvec4 getDatau_ClusterCenters(float address1D) {\\\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\\\n}\\\\nvec4 getDatau_ClusterCenters(int address1D) {\\\\n  return getDatau_ClusterCenters(float(address1D));\\\\n}\\\\nvoid main() {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nint i = globalInvocationID.x;\\\\nvec4 center = getDatau_ClusterCenters(i);\\\\nfloat sumx = 0.0;\\\\nfloat sumy = 0.0;\\\\nfloat count = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\\\nint clusterIdx = int(attributes.x);\\\\nvec4 vertex = getDatau_Data(j);\\\\nif (clusterIdx == i) {sumx += vertex.x;\\\\nsumy += vertex.y;\\\\ncount += 1.0;}}\\\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\\\n  gl_FragColor = gWebGPUDebugOutput;\\\\n}}\\\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([m,1,1]).setBinding({u_Data:_,u_NodeAttributes:v,u_ClusterCenters:S,VERTEX_COUNT:y,CLUSTER_COUNT:m})),k=function(){return Ev(O,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=0;case 1:if(!(r<a)){n.next=13;break}return n.next=4,A.execute();case 4:if(!d){n.next=9;break}return I.setBinding({u_Data:A}),n.next=8,I.execute();case 8:A.setBinding({u_ClusterCenters:I});case 9:A.setBinding({u_MaxDisplace:c*=.99});case 10:r++,n.next=1;break;case 13:return n.next=15,A.getOutput();case 15:i=n.sent,t?e.postMessage({type:Qt,vertexEdgeData:i}):o.forEach((function(t,e){var n=i[4*e],r=i[4*e+1];t.x=n,t.y=r})),E&&E();case 18:case"end":return n.stop()}}),n)})))},n.next=24,k();case 24:case"end":return n.stop()}}),n,this)})))}},{key:"getType",value:function(){return"fruchterman-gpu"}}])&&gv(e.prototype,n),r&&gv(e,r),i}(I);function Tv(t){return(Tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Av(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Iv(t,e){return(Iv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Dv(t);if(e){var o=Dv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ov(this,n)}}function Ov(t,e){return!e||"object"!==Tv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dv(t){return(Dv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Rv=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},Mv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Iv(t,e)}(i,t);var e,n,r,o=kv(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.edgeStrength=200,e.nodeStrength=1e3,e.coulombDisScale=.005,e.damping=.9,e.maxSpeed=1e3,e.minMovement=1,e.interval=.02,e.factor=1,e.linkDistance=1,e.gravity=10,e.workerEnabled=!1,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return Rv(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,r,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=(e=this).nodes)&&0!==n.length){t.next=5;break}return e.onLayoutEnd&&e.onLayoutEnd(),t.abrupt("return");case 5:if(e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]),r=e.center,1!==n.length){t.next=14;break}return n[0].x=r[0],n[0].y=r[1],e.onLayoutEnd&&e.onLayoutEnd(),t.abrupt("return");case 14:return o={},i={},n.forEach((function(t,n){y(t.x)||(t.x=Math.random()*e.width),y(t.y)||(t.y=Math.random()*e.height),o[t.id]=t,i[t.id]=n})),e.nodeMap=o,e.nodeIdxMap=i,e.nodeStrength=hv(e.nodeStrength,1),e.edgeStrength=hv(e.edgeStrength,1),t.next=23,e.run();case 23:case"end":return t.stop()}}),t,this)})))}},{key:"executeWithWorker",value:function(t,e){var n=this,r=n.nodes,o=n.center;if(r&&0!==r.length){if(1===r.length)return r[0].x=o[0],void(r[0].y=o[1]);var i={},a={};r.forEach((function(t,e){y(t.x)||(t.x=Math.random()*n.width),y(t.y)||(t.y=Math.random()*n.height),i[t.id]=t,a[t.id]=e})),n.nodeMap=i,n.nodeIdxMap=a,n.nodeStrength=hv(n.nodeStrength,1),n.edgeStrength=hv(n.edgeStrength,1),n.run(t,e)}}},{key:"run",value:function(t,e){return Rv(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,i,a,u,s,c,f,l,h,d,p,v,m,g,_,x,w,E,S,T,A,I,k,O,D=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(o=(r=this).nodes,i=r.edges,a=r.maxIteration,r.width||"undefined"==typeof window||(r.width=window.innerWidth),r.height||"undefined"==typeof window||(r.height=window.innerHeight),u=o.length,r.linkDistance=hv(r.linkDistance),r.edgeStrength=hv(r.edgeStrength),s=pv(o,i,r.linkDistance,r.edgeStrength),c=s.maxEdgePerVetex,f=s.array,r.degrees=b(o.length,r.nodeIdxMap,i),l=[],h=[],d=[],p=[],v=[],r.getMass||(r.getMass=function(t){return r.degrees[r.nodeIdxMap[t.id]]||1}),m=r.gravity,g=r.center,o.forEach((function(t,e){l.push(r.getMass(t)),h.push(r.nodeStrength(t)),r.degrees[e]||(r.degrees[e]=0);var n=[g[0],g[1],m];if(r.getCenter){var o=r.getCenter(t,r.degrees[e]);o&&y(o[0])&&y(o[1])&&y(o[2])&&(n=o)}d.push(n[0]),p.push(n[1]),v.push(n[2])})),_=mv([l,r.degrees,h]),x=mv([d,p,v]),w=r.workerEnabled,E=w?lv.create({canvas:t,engineOptions:{supportCompute:!0}}):lv.create({engineOptions:{supportCompute:!0}}),S=r.onLayoutEnd,T=[],f.forEach((function(t){T.push(t)})),A=0;A<4;A++)T.push(0);return I=E.createKernel('{"shaders":{"WGSL":"import \\\\"GLSL.std.450\\\\" as std;\\\\n\\\\n\\\\n# var gWebGPUDebug : bool = false;\\\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\\\n\\\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\\\n\\\\ntype GWebGPUParams = [[block]] struct {\\\\n  [[offset 0]] u_damping : f32;\\\\n  [[offset 4]] u_maxSpeed : f32;\\\\n  [[offset 8]] u_minMovement : f32;\\\\n  \\\\n  [[offset 12]] u_coulombDisScale : f32;\\\\n  [[offset 16]] u_factor : f32;\\\\n  \\\\n  \\\\n  [[offset 20]] u_interval : f32;\\\\n};\\\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\\\ntype GWebGPUBuffer0 = [[block]] struct {\\\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\\\ntype GWebGPUBuffer1 = [[block]] struct {\\\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\\\ntype GWebGPUBuffer2 = [[block]] struct {\\\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\\\ntype GWebGPUBuffer3 = [[block]] struct {\\\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\\\nvar v0 : i32 = packedIntValue / 1048576;\\\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\\\nvar ay : f32 = 0.0;\\\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\\\nvar vx : f32 = currentNode.x - nextNode.x;\\\\nvar vy : f32 = currentNode.y - nextNode.y;\\\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nvar n_dist : f32 = dist * gWebGPUUniformParams.u_coulombDisScale;\\\\nvar direx : f32 = vx / dist;\\\\nvar direy : f32 = vy / dist;\\\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\\\nvar massi : f32 = attributesi.x;\\\\nvar nodeStrengthi : f32 = attributesi.z;\\\\nvar nodeStrengthj : f32 = attributesj.z;\\\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\\\nvar param : f32 = (1000.0 * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\\\nax = ax + direx * param;\\\\nay = ay + direy * param;}}\\\\nreturn vec2<f32>(ax, ay);}\\\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\\\nvar vy : f32 = currentNode.y - attributes2.y;\\\\nvar ax : f32 = vx * attributes2.w;\\\\nvar ay : f32 = vy * attributes2.w;\\\\nreturn vec2<f32>(ax, ay);}\\\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\\\nvar ax : f32 = 0.0;\\\\nvar ay : f32 = 0.0;\\\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\\\nvar length : i32 = compressed.x;\\\\nvar arr_offset : i32 = compressed.y;\\\\nvar node_buffer : vec4<f32>;\\\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\\\nvar arr_idx : i32 = arr_offset + (4 * p);\\\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\\\nvar float_j : f32 = node_buffer.x;\\\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\\\nvar vx : f32 = nextNode.x - currentNode.x;\\\\nvar vy : f32 = nextNode.y - currentNode.y;\\\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nvar direx : f32 = vx / dist;\\\\nvar direy : f32 = vy / dist;\\\\nvar edgeLength : f32 = node_buffer.y;\\\\nvar edgeStrength : f32 = node_buffer.z;\\\\nvar diff : f32 = edgeLength - dist;\\\\nvar param : f32 = (diff * edgeStrength) / mass;\\\\nax = ax - direx * param;\\\\nay = ay - direy * param;}\\\\nreturn vec2<f32>(ax, ay);}\\\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\\\nvar ax : f32 = 0.0;\\\\nvar ay : f32 = 0.0;\\\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\\\nreturn ;}\\\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\\\nax = ax + repulsive.x;\\\\nay = ay + repulsive.y;\\\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\\\nax = ax + attractive.x;\\\\nay = ay + attractive.y;\\\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\\\nax = ax - gravity.x;\\\\nay = ay - gravity.y;\\\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\\\nvar vx : f32 = ax * param;\\\\nvar vy : f32 = ay * param;\\\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\\\nvx = param2 * vx;\\\\nvy = param2 * vy;}\\\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);\\\\nreturn;}\\\\n\\\\nentry_point compute as \\\\"main\\\\" = main;\\\\n","GLSL450":"\\\\n\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\\\nivec3 workGroupSize = ivec3(1,1,1);\\\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\\\n\\\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\\\n  float u_damping;\\\\n  float u_maxSpeed;\\\\n  float u_minMovement;\\\\n  \\\\n  float u_coulombDisScale;\\\\n  float u_factor;\\\\n  \\\\n  \\\\n  float u_interval;\\\\n} gWebGPUUniformParams;\\\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\\\n  vec4 u_Data[];\\\\n} gWebGPUBuffer0;\\\\n\\\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\\\n  vec4 u_AveMovement[];\\\\n} gWebGPUBuffer1;\\\\n\\\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\\\n  vec4 u_NodeAttributeArray1[];\\\\n} gWebGPUBuffer2;\\\\n\\\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\\\n  vec4 u_NodeAttributeArray2[];\\\\n} gWebGPUBuffer3;\\\\n\\\\n\\\\n\\\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n#define SHIFT_20 1048576.0\\\\nlayout (\\\\n  local_size_x = 1,\\\\n  local_size_y = 1,\\\\n  local_size_z = 1\\\\n) in;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\\\nint v0 = packedIntValue / int(SHIFT_20);\\\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\\\nfloat ay = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\\\nfloat vx = currentNode.x - nextNode.x;\\\\nfloat vy = currentNode.y - nextNode.y;\\\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nfloat n_dist = dist * gWebGPUUniformParams.u_coulombDisScale;\\\\nfloat direx = vx / dist;\\\\nfloat direy = vy / dist;\\\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\\\nfloat massi = attributesi.x;\\\\nfloat nodeStrengthi = attributesi.z;\\\\nfloat nodeStrengthj = attributesj.z;\\\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\\\nfloat param = (1000.0 * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\\\nax += direx * param;\\\\nay += direy * param;}}\\\\nreturn vec2(ax, ay);}\\\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\\\nfloat vy = currentNode.y - attributes2.y;\\\\nfloat ax = vx * attributes2.w;\\\\nfloat ay = vy * attributes2.w;\\\\nreturn vec2(ax, ay);}\\\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nivec2 compressed = unpack_float(currentNode.z);\\\\nint length = compressed.x;\\\\nint arr_offset = compressed.y;\\\\nvec4 node_buffer;\\\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\\\nint arr_idx = arr_offset + (4 * p);\\\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\\\nfloat float_j = node_buffer.x;\\\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\\\nfloat vx = nextNode.x - currentNode.x;\\\\nfloat vy = nextNode.y - currentNode.y;\\\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nfloat direx = vx / dist;\\\\nfloat direy = vy / dist;\\\\nfloat edgeLength = node_buffer.y;\\\\nfloat edgeStrength = node_buffer.z;\\\\nfloat diff = edgeLength - dist;\\\\nfloat param = (diff * edgeStrength) / mass;\\\\nax -= direx * param;\\\\nay -= direy * param;}\\\\nreturn vec2(ax, ay);}\\\\nvoid main() {int i = globalInvocationID.x;\\\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\\\nreturn ;}\\\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\\\nvec2 repulsive = calcRepulsive(i, currentNode);\\\\nax += repulsive.x;\\\\nay += repulsive.y;\\\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\\\nax += attractive.x;\\\\nay += attractive.y;\\\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\\\nax -= gravity.x;\\\\nay -= gravity.y;\\\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\\\nfloat vx = ax * param;\\\\nfloat vy = ay * param;\\\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\\\nvx = param2 * vx;\\\\nvy = param2 * vy;}\\\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\\\n","GLSL100":"\\\\n\\\\nfloat epsilon = 0.00001;\\\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\\\n  vec2 normAddr2D = float(address1D) * conv_const;\\\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\\\n}\\\\n\\\\nvoid barrier() {}\\\\n  \\\\n\\\\nuniform vec2 u_OutputTextureSize;\\\\nuniform int u_OutputTexelCount;\\\\nvarying vec2 v_TexCoord;\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n#define SHIFT_20 1048576.0\\\\n\\\\nuniform sampler2D u_Data;\\\\nuniform vec2 u_DataSize;\\\\nvec4 getDatau_Data(vec2 address2D) {\\\\n  return vec4(texture2D(u_Data, address2D).rgba);\\\\n}\\\\nvec4 getDatau_Data(float address1D) {\\\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\\\n}\\\\nvec4 getDatau_Data(int address1D) {\\\\n  return getDatau_Data(float(address1D));\\\\n}\\\\nuniform float u_damping;\\\\nuniform float u_maxSpeed;\\\\nuniform float u_minMovement;\\\\nuniform sampler2D u_AveMovement;\\\\nuniform vec2 u_AveMovementSize;\\\\nvec4 getDatau_AveMovement(vec2 address2D) {\\\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\\\n}\\\\nvec4 getDatau_AveMovement(float address1D) {\\\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\\\n}\\\\nvec4 getDatau_AveMovement(int address1D) {\\\\n  return getDatau_AveMovement(float(address1D));\\\\n}\\\\nuniform float u_coulombDisScale;\\\\nuniform float u_factor;\\\\nuniform sampler2D u_NodeAttributeArray1;\\\\nuniform vec2 u_NodeAttributeArray1Size;\\\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\\\n}\\\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\\\n}\\\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\\\n  return getDatau_NodeAttributeArray1(float(address1D));\\\\n}\\\\nuniform sampler2D u_NodeAttributeArray2;\\\\nuniform vec2 u_NodeAttributeArray2Size;\\\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\\\n}\\\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\\\n}\\\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\\\n  return getDatau_NodeAttributeArray2(float(address1D));\\\\n}\\\\nuniform float u_interval;\\\\nivec2 unpack_float(float packedValue) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nint packedIntValue = int(packedValue);\\\\nint v0 = packedIntValue / int(SHIFT_20);\\\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\\\nfloat vx = currentNode.x - nextNode.x;\\\\nfloat vy = currentNode.y - nextNode.y;\\\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nfloat n_dist = dist * u_coulombDisScale;\\\\nfloat direx = vx / dist;\\\\nfloat direy = vy / dist;\\\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\\\nfloat massi = attributesi.x;\\\\nfloat nodeStrengthi = attributesi.z;\\\\nfloat nodeStrengthj = attributesj.z;\\\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\\\nfloat param = (1000.0 * u_factor) / (n_dist * n_dist);\\\\nax += direx * param;\\\\nay += direy * param;}}\\\\nreturn vec2(ax, ay);}\\\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat vx = currentNode.x - attributes2.x;\\\\nfloat vy = currentNode.y - attributes2.y;\\\\nfloat ax = vx * attributes2.w;\\\\nfloat ay = vy * attributes2.w;\\\\nreturn vec2(ax, ay);}\\\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat mass = attributes1.x;\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nivec2 compressed = unpack_float(currentNode.z);\\\\nint length = compressed.x;\\\\nint arr_offset = compressed.y;\\\\nvec4 node_buffer;\\\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\\\nint arr_idx = arr_offset + (4 * p);\\\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\\\nfloat float_j = node_buffer.x;\\\\nvec4 nextNode = getDatau_Data(int(float_j));\\\\nfloat vx = nextNode.x - currentNode.x;\\\\nfloat vy = nextNode.y - currentNode.y;\\\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nfloat direx = vx / dist;\\\\nfloat direy = vy / dist;\\\\nfloat edgeLength = node_buffer.y;\\\\nfloat edgeStrength = node_buffer.z;\\\\nfloat diff = edgeLength - dist;\\\\nfloat param = (diff * edgeStrength) / mass;\\\\nax -= direx * param;\\\\nay -= direy * param;}\\\\nreturn vec2(ax, ay);}\\\\nvoid main() {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nint i = globalInvocationID.x;\\\\nvec4 currentNode = getDatau_Data(i);\\\\nvec4 movement = getDatau_AveMovement(0.0);\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\\\nreturn ;}\\\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\\\nvec2 repulsive = calcRepulsive(i, currentNode);\\\\nax += repulsive.x;\\\\nay += repulsive.y;\\\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\\\nax += attractive.x;\\\\nay += attractive.y;\\\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\\\nax -= gravity.x;\\\\nay -= gravity.y;\\\\nfloat param = u_interval * u_damping;\\\\nfloat vx = ax * param;\\\\nfloat vy = ay * param;\\\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\\\nvx = param2 * vx;\\\\nvy = param2 * vy;}\\\\nfloat distx = vx * u_interval;\\\\nfloat disty = vy * u_interval;\\\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));if (gWebGPUDebug) {\\\\n  gl_FragColor = gWebGPUDebugOutput;\\\\n}}\\\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([u,1,1]).setBinding({u_Data:f,u_damping:r.damping,u_maxSpeed:r.maxSpeed,u_minMovement:r.minMovement,u_coulombDisScale:r.coulombDisScale,u_factor:r.factor,u_NodeAttributeArray1:_,u_NodeAttributeArray2:x,MAX_EDGE_PER_VERTEX:c,VERTEX_COUNT:u,u_AveMovement:T,u_interval:r.interval}),k=E.createKernel('{"shaders":{"WGSL":"import \\\\"GLSL.std.450\\\\" as std;\\\\n\\\\n\\\\n# var gWebGPUDebug : bool = false;\\\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\\\n\\\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\\\n\\\\ntype GWebGPUParams = [[block]] struct {\\\\n  [[offset 0]] u_iter : f32;\\\\n};\\\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\\\ntype GWebGPUBuffer0 = [[block]] struct {\\\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\\\ntype GWebGPUBuffer1 = [[block]] struct {\\\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nfn main() -> void {var movement : f32 = 0.0;\\\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\\\nmovement = movement + vertex.w;}\\\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\\\nreturn;}\\\\n\\\\nentry_point compute as \\\\"main\\\\" = main;\\\\n","GLSL450":"\\\\n\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\\\nivec3 workGroupSize = ivec3(1,1,1);\\\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\\\n\\\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\\\n  float u_iter;\\\\n} gWebGPUUniformParams;\\\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\\\n  vec4 u_Data[];\\\\n} gWebGPUBuffer0;\\\\n\\\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\\\n  vec4 u_AveMovement[];\\\\n} gWebGPUBuffer1;\\\\n\\\\n\\\\n\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\nlayout (\\\\n  local_size_x = 1,\\\\n  local_size_y = 1,\\\\n  local_size_z = 1\\\\n) in;\\\\n\\\\n\\\\n\\\\nvoid main() {float movement = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\\\nmovement += vertex.w;}\\\\nmovement = movement / float(VERTEX_COUNT);\\\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\\\n","GLSL100":"\\\\n\\\\nfloat epsilon = 0.00001;\\\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\\\n  vec2 normAddr2D = float(address1D) * conv_const;\\\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\\\n}\\\\n\\\\nvoid barrier() {}\\\\n  \\\\n\\\\nuniform vec2 u_OutputTextureSize;\\\\nuniform int u_OutputTexelCount;\\\\nvarying vec2 v_TexCoord;\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n\\\\nuniform sampler2D u_Data;\\\\nuniform vec2 u_DataSize;\\\\nvec4 getDatau_Data(vec2 address2D) {\\\\n  return vec4(texture2D(u_Data, address2D).rgba);\\\\n}\\\\nvec4 getDatau_Data(float address1D) {\\\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\\\n}\\\\nvec4 getDatau_Data(int address1D) {\\\\n  return getDatau_Data(float(address1D));\\\\n}\\\\nuniform float u_iter;\\\\nuniform sampler2D u_AveMovement;\\\\nuniform vec2 u_AveMovementSize;\\\\nvec4 getDatau_AveMovement(vec2 address2D) {\\\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\\\n}\\\\nvec4 getDatau_AveMovement(float address1D) {\\\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\\\n}\\\\nvec4 getDatau_AveMovement(int address1D) {\\\\n  return getDatau_AveMovement(float(address1D));\\\\n}\\\\nvoid main() {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat movement = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\\\nmovement += vertex.w;}\\\\nmovement = movement / float(VERTEX_COUNT);\\\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\\\n  gl_FragColor = gWebGPUDebugOutput;\\\\n}}\\\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([1,1,1]).setBinding({u_Data:f,VERTEX_COUNT:u,u_AveMovement:[0,0,0,0]}),O=function(){return Rv(D,void 0,void 0,regeneratorRuntime.mark((function n(){var i,u,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=0;case 1:if(!(i<a)){n.next=12;break}return n.next=4,I.execute();case 4:return k.setBinding({u_Data:I}),n.next=7,k.execute();case 7:u=Math.max(.02,r.interval-.002*i),I.setBinding({u_interval:u,u_AveMovement:k});case 9:i++,n.next=1;break;case 12:return n.next=14,I.getOutput();case 14:s=n.sent,t?e.postMessage({type:Qt,vertexEdgeData:s}):o.forEach((function(t,e){var n=s[4*e],r=s[4*e+1];t.x=n,t.y=r})),S&&S();case 17:case"end":return n.stop()}}),n)})))},n.next=33,O();case 33:case"end":return n.stop()}}),n,this)})))}},{key:"getType",value:function(){return"gForce-gpu"}}])&&Av(e.prototype,n),r&&Av(e,r),i}(I);function Cv(t){return(Cv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pv(t,e){return(Pv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Lv(t);if(e){var o=Lv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return jv(this,n)}}function jv(t,e){return!e||"object"!==Cv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Lv(t){return(Lv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Uv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pv(t,e)}(i,t);var e,n,r,o=Gv(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).center=[0,0],e.maxIteration=100,e.gravity=10,e.comboGravity=10,e.linkDistance=10,e.alpha=1,e.alphaMin=.001,e.alphaDecay=1-Math.pow(e.alphaMin,1/300),e.alphaTarget=0,e.velocityDecay=.6,e.edgeStrength=.6,e.nodeStrength=30,e.preventOverlap=!1,e.preventNodeOverlap=!1,e.preventComboOverlap=!1,e.collideStrength=void 0,e.nodeCollideStrength=.5,e.comboCollideStrength=.5,e.comboSpacing=20,e.comboPadding=10,e.optimizeRangeFactor=1,e.onTick=function(){},e.onLayoutEnd=function(){},e.depthAttractiveForceScale=1,e.depthRepulsiveForceScale=2,e.nodes=[],e.edges=[],e.combos=[],e.comboTrees=[],e.width=300,e.height=300,e.bias=[],e.nodeMap={},e.oriComboMap={},e.indexMap={},e.comboMap={},e.previousLayouted=!1,e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}},{key:"execute",value:function(){var t=this.nodes,e=this.center;if(this.comboTree={id:"comboTreeRoot",depth:-1,children:this.comboTrees},t&&0!==t.length){if(1===t.length)return t[0].x=e[0],t[0].y=e[1],void(this.onLayoutEnd&&this.onLayoutEnd());this.initVals(),this.run(),this.onLayoutEnd&&this.onLayoutEnd()}else this.onLayoutEnd&&this.onLayoutEnd()}},{key:"run",value:function(){var t=this,e=t.nodes,n=t.previousLayouted?t.maxIteration/5:t.maxIteration;t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);var r=t.center,o=t.velocityDecay,i=t.comboMap;t.previousLayouted||t.initPos(i);for(var a=function(n){var r=[];e.forEach((function(t,e){r[e]={x:0,y:0}})),t.applyCalculate(r),t.applyComboCenterForce(r),e.forEach((function(t,e){y(t.x)&&y(t.y)&&(t.x+=r[e].x*o,t.y+=r[e].y*o)})),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()},u=0;u<n;u++)a();var s=[0,0];e.forEach((function(t){y(t.x)&&y(t.y)&&(s[0]+=t.x,s[1]+=t.y)})),s[0]/=e.length,s[1]/=e.length;var c=[r[0]-s[0],r[1]-s[1]];e.forEach((function(t,e){y(t.x)&&y(t.y)&&(t.x+=c[0],t.y+=c[1])})),t.combos.forEach((function(t){var e=i[t.id];e&&e.empty&&(t.x=e.cx||t.x,t.y=e.cy||t.y)})),t.previousLayouted=!0}},{key:"initVals",value:function(){var t=this.edges,e=this.nodes,n=this.combos,r={},o={},i={};e.forEach((function(t,e){o[t.id]=t,i[t.id]=e})),this.nodeMap=o,this.indexMap=i;var a={};n.forEach((function(t){a[t.id]=t})),this.oriComboMap=a,this.comboMap=this.getComboMap();var u=this.preventOverlap;this.preventComboOverlap=this.preventComboOverlap||u,this.preventNodeOverlap=this.preventNodeOverlap||u;var s=this.collideStrength;s&&(this.comboCollideStrength=s,this.nodeCollideStrength=s),this.comboCollideStrength=this.comboCollideStrength?this.comboCollideStrength:0,this.nodeCollideStrength=this.nodeCollideStrength?this.nodeCollideStrength:0;for(var c=0;c<t.length;++c)r[t[c].source]?r[t[c].source]++:r[t[c].source]=1,r[t[c].target]?r[t[c].target]++:r[t[c].target]=1;for(var f=[],l=0;l<t.length;++l)f[l]=r[t[l].source]/(r[t[l].source]+r[t[l].target]);this.bias=f;var h,d,p=this.nodeSize,v=this.nodeSpacing;if(d=y(v)?function(){return v}:T(v)?v:function(){return 0},this.nodeSpacing=d,p)if(T(p))h=function(t){return p(t)};else if(m(p)){var g=(p[0]>p[1]?p[0]:p[1])/2;h=function(t){return g}}else{var b=p/2;h=function(t){return b}}else h=function(t){return t.size?m(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2:t.size/2:10};this.nodeSize=h;var _,x=this.comboSpacing;_=y(x)?function(){return x}:T(x)?x:function(){return 0},this.comboSpacing=_;var w,E=this.comboPadding;w=y(E)?function(){return E}:m(E)?function(){return Math.max.apply(null,E)}:T(E)?E:function(){return 0},this.comboPadding=w;var S,A=this.linkDistance;A||(A=10),S=y(A)?function(t){return A}:A,this.linkDistance=S;var I,k=this.edgeStrength;k||(k=1),I=y(k)?function(t){return k}:k,this.edgeStrength=I;var O,D=this.nodeStrength;D||(D=30),O=y(D)?function(t){return D}:D,this.nodeStrength=O}},{key:"initPos",value:function(t){this.nodes.forEach((function(e,n){var r=e.comboId,o=t[r];r&&o?(e.x=o.cx+100/(n+1),e.y=o.cy+100/(n+1)):(e.x=100/(n+1),e.y=100/(n+1))}))}},{key:"getComboMap",value:function(){var t=this,e=t.nodeMap,n=t.indexMap,r=t.comboTrees,o=t.oriComboMap,i={};return(r||[]).forEach((function(r){var a=[];w(r,(function(r){if("node"===r.itemType)return!0;if(!o[r.id])return!0;if(void 0===i[r.id]){var u={id:r.id,name:r.id,cx:0,cy:0,count:0,depth:t.oriComboMap[r.id].depth,children:[]};i[r.id]=u}var s=r.children;s&&s.forEach((function(t){if(!i[t.id]&&!e[t.id])return!0;a.push(t)}));var c=i[r.id];if(c.cx=0,c.cy=0,0===a.length){c.empty=!0;var f=o[r.id],l=Object.keys(e).length,h="".concat(r.id,"-visual-child-").concat(l),d={id:h,x:f.x,y:f.y,depth:c.depth+1,itemType:"node"};t.nodes.push(d),e[h]=d,n[h]=l,c.cx=f.x,c.cy=f.y,a.push(d)}return a.forEach((function(t){if(c.count++,"node"!==t.itemType){var n=i[t.id];return y(n.cx)&&(c.cx+=n.cx),void(y(n.cy)&&(c.cy+=n.cy))}var r=e[t.id];r&&(y(r.x)&&(c.cx+=r.x),y(r.y)&&(c.cy+=r.y))})),c.cx/=c.count,c.cy/=c.count,c.children=a,!0}))})),i}},{key:"applyComboCenterForce",value:function(t){var e=this.gravity,n=this.comboGravity||e,r=this.alpha,o=this.comboTrees,i=this.indexMap,a=this.nodeMap,u=this.comboMap;(o||[]).forEach((function(e){w(e,(function(e){if("node"===e.itemType)return!0;if(!u[e.id])return!0;var o=u[e.id],s=(o.depth+1)/10*.5,c=o.cx,f=o.cy;return o.cx=0,o.cy=0,o.children.forEach((function(e){if("node"!==e.itemType){var l=u[e.id];return l&&y(l.cx)&&(o.cx+=l.cx),void(l&&y(l.cy)&&(o.cy+=l.cy))}var h=a[e.id],d=h.x-c||.005,p=h.y-f||.005,v=Math.sqrt(d*d+p*p),m=i[h.id],g=n*r/v*s;t[m].x-=d*g,t[m].y-=p*g,y(h.x)&&(o.cx+=h.x),y(h.y)&&(o.cy+=h.y)})),o.cx/=o.count,o.cy/=o.count,!0}))}))}},{key:"applyCalculate",value:function(t){var e=this.comboMap,n=this.nodes,r={};n.forEach((function(t,e){n.forEach((function(n,o){if(!(e<o)){var i=t.x-n.x||.005,a=t.y-n.y||.005,u=i*i+a*a,s=Math.sqrt(u);u<1&&(u=s),r["".concat(t.id,"-").concat(n.id)]={vx:i,vy:a,vl2:u,vl:s},r["".concat(n.id,"-").concat(t.id)]={vl2:u,vl:s,vx:-i,vy:-a}}}))})),this.updateComboSizes(e),this.calRepulsive(t,r),this.calAttractive(t,r),this.preventComboOverlap&&this.comboNonOverlapping(t,e)}},{key:"updateComboSizes",value:function(t){var e=this,n=e.comboTrees,r=e.nodeMap,o=e.nodeSize,i=e.comboSpacing,a=e.comboPadding;(n||[]).forEach((function(n){var u=[];w(n,(function(n){if("node"===n.itemType)return!0;var s=t[n.id];if(!s)return!1;var c=n.children;c&&c.forEach((function(e){(t[e.id]||r[e.id])&&u.push(e)})),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0,u.forEach((function(t){if("node"!==t.itemType)return!0;var e=r[t.id];if(!e)return!0;var n=o(e),i=e.x-n,a=e.y-n,u=e.x+n,c=e.y+n;s.minX>i&&(s.minX=i),s.minY>a&&(s.minY=a),s.maxX<u&&(s.maxX=u),s.maxY<c&&(s.maxY=c)}));var f=e.oriComboMap[n.id].size||10;m(f)&&(f=f[0]);var l=Math.max(s.maxX-s.minX,s.maxY-s.minY,f);return s.r=l/2+i(s)/2+a(s),!0}))}))}},{key:"comboNonOverlapping",value:function(t,e){var n=this.comboTree,r=this.comboCollideStrength,o=this.indexMap,i=this.nodeMap;w(n,(function(n){if(!e[n.id]&&!i[n.id]&&"comboTreeRoot"!==n.id)return!1;var a=n.children;return a&&a.length>1&&a.forEach((function(n,u){if("node"===n.itemType)return!1;var s=e[n.id];s&&a.forEach((function(a,c){if(u<=c)return!1;if("node"===a.itemType)return!1;var f=e[a.id];if(!f)return!1;var l=s.cx-f.cx||.005,h=s.cy-f.cy||.005,d=l*l+h*h,p=s.r,v=f.r,m=p+v,y=v*v,g=p*p;if(d<m*m){var b=n.children;if(!b||0===b.length)return!1;var _=a.children;if(!_||0===_.length)return!1;var x=Math.sqrt(d),w=(m-x)/x*r,E=l*w,S=h*w,T=y/(g+y),A=1-T;b.forEach((function(e){if("node"!==e.itemType)return!1;if(i[e.id]){var n=o[e.id];_.forEach((function(e){if("node"!==e.itemType)return!1;if(!i[e.id])return!1;var r=o[e.id];t[n].x+=E*T,t[n].y+=S*T,t[r].x-=E*A,t[r].y-=S*A}))}}))}}))})),!0}))}},{key:"calRepulsive",value:function(t,e){var n=this,r=n.nodes,o=n.width*n.optimizeRangeFactor,i=n.nodeStrength,a=n.alpha,u=n.nodeCollideStrength,s=n.preventNodeOverlap,c=n.nodeSize,f=n.nodeSpacing,l=n.depthRepulsiveForceScale,h=n.center;r.forEach((function(d,p){if(d.x&&d.y){if(h){var v=n.gravity,m=d.x-h[0]||.005,y=d.y-h[1]||.005,g=Math.sqrt(m*m+y*y);t[p].x-=m*v*a/g,t[p].y-=y*v*a/g}r.forEach((function(n,r){if(p!==r&&n.x&&n.y){var h=e["".concat(d.id,"-").concat(n.id)],v=h.vl2,m=h.vl;if(!(m>o)){var y=e["".concat(d.id,"-").concat(n.id)],g=y.vx,b=y.vy,_=Math.log(Math.abs(n.depth-d.depth)/10)+1||1;_=_<1?1:_,n.comboId!==d.comboId&&(_+=1);var x=_?Math.pow(l,_):1,w=i(n)*a/v*x;if(t[p].x+=g*w,t[p].y+=b*w,p<r&&s){var E=c(d)+f(d),S=c(n)+f(n),T=E+S;if(v<T*T){var A=(T-m)/m*u,I=S*S,k=I/(E*E+I),O=g*A,D=b*A;t[p].x+=O*k,t[p].y+=D*k,k=1-k,t[r].x-=O*k,t[r].y-=D*k}}}}}))}}))}},{key:"calAttractive",value:function(t,e){var n=this,r=n.edges,o=n.linkDistance,i=n.alpha,a=n.edgeStrength,u=n.bias,s=n.depthAttractiveForceScale;r.forEach((function(r,c){if(r.source&&r.target&&r.source!==r.target){var f=n.indexMap[r.source],l=n.indexMap[r.target],h=n.nodeMap[r.source],d=n.nodeMap[r.target];if(h&&d){var p=Math.log(Math.abs(h.depth-d.depth)/10);h.comboId===d.comboId&&(p/=2);var v=p?Math.pow(s,p):1;if(h.comboId!==d.comboId&&1===v?v=s/2:h.comboId===d.comboId&&(v=2),y(d.x)&&y(h.x)&&y(d.y)&&y(h.y)){var m=e["".concat(r.target,"-").concat(r.source)],g=m.vl,b=m.vx,_=m.vy,x=(g-o(r))/g*i*a(r)*v,w=b*x,E=_*x,S=u[c];t[l].x-=w*S,t[l].y-=E*S,t[f].x+=w*(1-S),t[f].y+=E*(1-S)}}}}))}},{key:"getType",value:function(){return"comboForce"}}])&&Nv(e.prototype,n),r&&Nv(e,r),i}(I);var Bv;new Proxy({},{get:function(t,e){return Jn(e)},set:function(t,e,n){return Qn(e,n),!0}});Bv||(Bv={}),Qn("grid",N),Qn("random",F),Qn("force",oe),Qn("circular",ve),Qn("dagre",Se),Qn("radial",Vn),Qn("concentric",ir),Qn("mds",hr),Qn("fruchterman",br),Qn("fruchterman-gpu",Sv),Qn("gForce",K),Qn("gForce-gpu",Mv),Qn("comboForce",Uv);var Fv=self;Fv.onmessage=function(t){(function(t){var e=t.data.type;return e===Ht||e===Zt})(t)&&function(t){switch(t.data.type){case Ht:var e=t.data,n=e.nodes,r=e.edges,o=e.layoutCfg,i=void 0===o?{}:o,a=i.type,u=Jn(a);if(!u){Fv.postMessage({type:Yt,message:"layout ".concat(a," not found")});break}var s=new u(i);s.init({nodes:n,edges:r}),s.execute(),Fv.postMessage({nodes:n,type:qt}),s.destroy();break;case Zt:var c=t.data,f=c.nodes,l=c.edges,h=c.layoutCfg,d=void 0===h?{}:h,p=c.canvas,v=d.type,m=Jn(v);if(!m){Fv.postMessage({type:Yt,message:"layout ".concat(v," not found")});break}if("gpu"!==v.split("-")[1]){Fv.postMessage({type:Yt,message:"layout ".concat(v," does not support GPU")});break}var y=new m(d);y.init({nodes:f,edges:l}),y.executeWithWorker(p,Fv)}}(t)};var zv=self;zv.onmessage=function(t){(function(t){var e=t.data.type;return e===f||e===d})(t)&&function(t){switch(t.data.type){case f:var e=t.data,n=e.nodes,r=e.edges,o=e.layoutCfg,i=(p=void 0===o?{}:o).type;if(!(a=Jn(i))){zv.postMessage({type:h,message:"layout "+i+" not found"});break}(u=new a(p)).init({nodes:n,edges:r}),u.execute(),zv.postMessage({type:l,nodes:n}),u.destroy();break;case d:var a,u,s=t.data,c=(n=s.nodes,r=s.edges,s.layoutCfg),p=void 0===c?{}:c,v=s.canvas;i=p.type;if(!(a=Jn(i))){zv.postMessage({type:h,message:"layout "+i+" not found"});break}if("gpu"!==i.split("-")[1]){zv.postMessage({type:h,message:"layout "+i+" does not support GPU"});break}(u=new a(p)).init({nodes:n,edges:r}),u.executeWithWorker(v,zv)}}(t)};e.default=null}]);
//# sourceMappingURL=g6Layout.worker.js.map`,"Worker",void 0,e.p+"g6Layout.worker.js")}var x="LAYOUT_RUN",C="LAYOUT_END",N="LAYOUT_ERROR",X="LAYOUT_TICK",tt="GPU_LAYOUT_RUN",it="GPU_LAYOUT_END",pt=e(121),ft=function(vt){return setTimeout(vt,16)},Ot=function(vt){return clearTimeout(vt)},wt=function(vt){return(typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||ft)(vt)},xt=function(vt){return(typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||Ot)(vt)},lt=["fruchterman","gForce"],Vt=function(ht){function vt(bt){var At=ht.call(this,bt)||this;return At.graph=bt,At.layoutCfg=bt.get("layout")||{},At.layoutType=At.layoutCfg.type,At.worker=null,At.workerData={},At.initLayout(),At}return Object(r.b)(vt,ht),vt.prototype.initLayout=function(){},vt.prototype.getWorker=function(){return this.worker||(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=new v),this.worker},vt.prototype.stopWorker=function(){var bt=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,bt.requestId&&(xt(bt.requestId),bt.requestId=null),bt.requestId2&&(xt(bt.requestId2),bt.requestId2=null))},vt.prototype.layout=function(bt){var At=this,q=this.graph;this.data=this.setDataFromGraph();var ct=this.data.nodes;if(!ct)return!1;var ot=q.get("width"),_=q.get("height"),P={};Object.assign(P,{width:ot,height:_,center:[ot/2,_/2]},this.layoutCfg),this.layoutCfg=P;var Y=!!this.layoutType,k=this.layoutMethod;k&&k.destroy(),q.emit("beforelayout"),this.initPositions(P.center,ct);var h=this.layoutType,g=!1;if(h&&h.split("-")[1]==="gpu"&&(h=h.split("-")[0],P.gpuEnabled=!0),h&&P.gpuEnabled){var F=!0;Object(pt.gpuDetector)().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),F=!1),this.hasGPUVersion(h)||(console.warn("The '"+h+"' layout does not support GPU calculation for now, it will run in CPU."),F=!1),F&&(h+="-gpu",g=!0)}if(this.isGPU=g,this.stopWorker(),P.workerEnabled&&this.layoutWithWorker(this.data,bt))return!0;var V=P.onLayoutEnd;if(P.layoutEndFormatted||(P.layoutEndFormatted=!0,P.onLayoutEnd=function(){V&&V(),q.emit("afterlayout"),At.refreshLayout(),bt&&bt()}),h==="force"||h==="g6force"||h==="gForce"){var H=P.onTick,et=function(){H&&H(),q.refreshPositions()};P.tick=et}else this.layoutType==="comboForce"&&(P.comboTrees=q.get("comboTrees"));if(h!==void 0){try{k=new M.a[h](P)}catch(St){return console.warn("The layout method: '"+h+"' does not exist! Please specify it first."),!1}if(k.enableTick){var nt=P.onTick;et=function(){nt&&nt(),q.refreshPositions()},k.tick=et}k.init(this.data),Y&&(q.emit("beginlayout"),k.execute(),k.isCustomLayout&&P.onLayoutEnd&&P.onLayoutEnd()),this.layoutMethod=k}else P.onLayoutEnd&&P.onLayoutEnd();return!1},vt.prototype.layoutWithWorker=function(bt,At){var q=this,ct=bt.nodes,ot=bt.edges,_=this.layoutCfg,P=this.graph,Y=this.isGPU,k=this.getWorker(),h=this.workerData;if(!k)return!1;h.requestId=null,h.requestId2=null,h.currentTick=null,h.currentTickData=null,P.emit("beforelayout");var g=document.createElement("canvas"),F=Y&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in g,V=function(et,nt){var St={};return et&&typeof et=="object"?(Object.keys(et).forEach(function(dt){et.hasOwnProperty(dt)&&nt(et[dt])&&(St[dt]=et[dt])}),St):et}(_,function(et){return typeof et!="function"});if(F){var H=g.transferControlToOffscreen();V.type=V.type+"-gpu",k.postMessage({type:tt,nodes:ct,edges:ot,layoutCfg:V,canvas:H},[H])}else k.postMessage({type:x,nodes:ct,edges:ot,layoutCfg:V});return k.onmessage=function(et){q.handleWorkerMessage(et,bt,At)},!0},vt.prototype.handleWorkerMessage=function(bt,At,q){var ct=this.graph,ot=this.workerData,_=this.layoutCfg,P=bt.data,Y=P.type,k=function(){_.onTick&&_.onTick()},h=function(){_.onLayoutEnd&&_.onLayoutEnd(),ct.emit("afterlayout")};switch(Y){case X:ot.currentTick=P.currentTick,ot.currentTickData=P,ot.requestId||(ot.requestId=wt(function(){Lt(At,P),ct.refreshPositions(),k(),P.currentTick===1&&q&&q(),P.currentTick===P.totalTicks?h():ot.currentTick===P.totalTicks&&(ot.requestId2=wt(function(){Lt(At,ot.currentTickData),ct.refreshPositions(),ot.requestId2=null,k(),h()})),ot.requestId=null}));break;case C:ot.currentTick==null&&(Lt(At,P),this.refreshLayout(),q&&q(),ct.emit("afterlayout"));break;case it:ot.currentTick==null&&(function(g,F){for(var V=g.nodes,H=F.vertexEdgeData,et=V.length,nt=0;nt<et;nt++){var St=V[nt],dt=H[4*nt],gt=H[4*nt+1];St.x=dt,St.y=gt}}(At,P),this.refreshLayout(),q&&q(),ct.emit("afterlayout"));break;case N:console.warn("Web-Worker layout error!",P.message)}},vt.prototype.updateLayoutCfg=function(bt){var At=this.graph,q=this.layoutMethod,ct=(this.layoutType,this.layoutCfg);if(this.layoutType=bt.type,!q||q.destroyed)return this.layoutCfg=Object(l.A)({},ct,bt),void this.layout();this.data=this.setDataFromGraph(),this.stopWorker(),bt.workerEnabled&&this.layoutWithWorker(this.data,null)||(q.init(this.data),q.updateCfg(bt),At.emit("beforelayout"),q.execute(),q.isCustomLayout&&ct.onLayoutEnd&&ct.onLayoutEnd())},vt.prototype.hasGPUVersion=function(bt){for(var At=lt.length,q=0;q<At;q++)if(lt[q]===bt)return!0;return!1},vt.prototype.destroy=function(){var bt=this.layoutMethod;bt&&(bt.destroy(),bt.destroyed=!0);var At=this.worker;At&&(At.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethod=void 0,this.graph=null},vt}(E.c);function Lt(ht,vt){for(var bt=ht.nodes,At=vt.nodes,q=bt.length,ct=0;ct<q;ct++){var ot=bt[ct];ot.x=At[ct].x,ot.y=At[ct].y}}var Et=O.a.transform,J=function(ht){function vt(bt){var At=ht.call(this,bt)||this,q=At.get("defaultNode");return q||At.set("defaultNode",{type:"circle"}),q.type||(q.type="circle",At.set("defaultNode",q)),At.destroyed=!1,At}return Object(r.b)(vt,ht),vt.prototype.initLayoutController=function(){var bt=new Vt(this);this.set({layoutController:bt})},vt.prototype.initEventController=function(){var bt=new d(this);this.set({eventController:bt})},vt.prototype.initCanvas=function(){var bt=this.get("container");if(typeof bt=="string"&&(bt=document.getElementById(bt),this.set("container",bt)),!bt)throw new Error("invalid container");var At,q=this.get("width"),ct=this.get("height");if(this.get("renderer")==="svg")At=new m.Canvas({container:bt,width:q,height:ct});else{var ot={container:bt,width:q,height:ct},_=this.get("pixelRatio");_&&(ot.pixelRatio=_),At=new p.Canvas(ot)}this.set("canvas",At)},vt.prototype.initPlugins=function(){var bt=this;Object(l.f)(bt.get("plugins"),function(At){!At.destroyed&&At.initPlugin&&At.initPlugin(bt)})},vt.prototype.toDataURL=function(bt,At){var q=this.get("canvas"),ct=q.getRenderer(),ot=q.get("el");bt||(bt="image/png");var _="";if(ct==="svg"){var P=ot.cloneNode(!0),Y=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),k=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Y);k.replaceChild(P,k.documentElement);var h=new XMLSerializer().serializeToString(k);_="data:image/svg+xml;charset=utf8,"+encodeURIComponent(h)}else{var g=void 0,F=ot.getContext("2d"),V=this.get("width"),H=this.get("height"),et=void 0;if(At){var nt=typeof window!="undefined"?window.devicePixelRatio:1;g=F.getImageData(0,0,V*nt,H*nt),et=F.globalCompositeOperation,F.globalCompositeOperation="destination-over",F.fillStyle=At,F.fillRect(0,0,V,H)}_=ot.toDataURL(bt),At&&(F.clearRect(0,0,V,H),F.putImageData(g,0,0),F.globalCompositeOperation=et)}return _},vt.prototype.toFullDataURL=function(bt,At,q){var ct=this.get("group").getCanvasBBox(),ot=ct.height,_=ct.width,P=this.get("renderer"),Y=Object(y.b)('<id="virtual-image"></div>'),k=q?q.backgroundColor:void 0,h=q?q.padding:void 0;h?Object(l.t)(h)&&(h=[h,h,h,h]):h=[0,0,0,0];var g=ot+h[0]+h[2],F=_+h[1]+h[3],V={container:Y,height:g,width:F,quickHit:!0},H=P==="svg"?new m.Canvas(V):new p.Canvas(V),et=this.get("group").clone(),nt=Object(l.c)(et.getMatrix());nt||(nt=[1,0,0,0,1,0,0,0,1]);var St=(ct.maxX+ct.minX)/2,dt=(ct.maxY+ct.minY)/2;nt=Et(nt,[["t",-St,-dt],["t",_/2+h[3],ot/2+h[0]]]),et.resetMatrix(),et.setMatrix(nt),H.add(et);var gt=H.get("el"),yt="";At||(At="image/png"),setTimeout(function(){if(P==="svg"){var Ct=gt.cloneNode(!0),Pt=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),Ft=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Pt);Ft.replaceChild(Ct,Ft.documentElement);var Tt=new XMLSerializer().serializeToString(Ft);yt="data:image/svg+xml;charset=utf8,"+encodeURIComponent(Tt)}else{var zt=void 0,Xt=gt.getContext("2d"),re=void 0;if(k){var de=typeof window!="undefined"?window.devicePixelRatio:1;zt=Xt.getImageData(0,0,F*de,g*de),re=Xt.globalCompositeOperation,Xt.globalCompositeOperation="destination-over",Xt.fillStyle=k,Xt.fillRect(0,0,F,g)}yt=gt.toDataURL(At),k&&(Xt.clearRect(0,0,F,g),Xt.putImageData(zt,0,0),Xt.globalCompositeOperation=re)}bt&&bt(yt)},16)},vt.prototype.downloadFullImage=function(bt,At,q){var ct=this,ot=this.get("group").getCanvasBBox(),_=ot.height,P=ot.width,Y=this.get("renderer"),k=Object(y.b)('<id="virtual-image"></div>'),h=q?q.backgroundColor:void 0,g=q?q.padding:void 0;g?Object(l.t)(g)&&(g=[g,g,g,g]):g=[0,0,0,0];var F=_+g[0]+g[2],V=P+g[1]+g[3],H={container:k,height:F,width:V},et=Y==="svg"?new m.Canvas(H):new p.Canvas(H),nt=this.get("group").clone(),St=Object(l.c)(nt.getMatrix());St||(St=[1,0,0,0,1,0,0,0,1]);var dt=(ot.maxX+ot.minX)/2,gt=(ot.maxY+ot.minY)/2;St=Et(St,[["t",-dt,-gt],["t",P/2+g[3],_/2+g[0]]]),nt.resetMatrix(),nt.setMatrix(St),et.add(nt);var yt=et.get("el");At||(At="image/png"),setTimeout(function(){var Ct="";if(Y==="svg"){var Pt=yt.cloneNode(!0),Ft=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),Tt=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Ft);Tt.replaceChild(Pt,Tt.documentElement);var zt=new XMLSerializer().serializeToString(Tt);Ct="data:image/svg+xml;charset=utf8,"+encodeURIComponent(zt)}else{var Xt=void 0,re=yt.getContext("2d"),de=void 0;if(h){var ye=typeof window!="undefined"?window.devicePixelRatio:1;Xt=re.getImageData(0,0,V*ye,F*ye),de=re.globalCompositeOperation,re.globalCompositeOperation="destination-over",re.fillStyle=h,re.fillRect(0,0,V,F)}Ct=yt.toDataURL(At),h&&(re.clearRect(0,0,V,F),re.putImageData(Xt,0,0),re.globalCompositeOperation=de)}var we=document.createElement("a"),De=(bt||"graph")+(Y==="svg"?".svg":"."+At.split("/")[1]);ct.dataURLToImage(Ct,Y,we,De);var Ve=document.createEvent("MouseEvents");Ve.initEvent("click",!1,!1),we.dispatchEvent(Ve)},16)},vt.prototype.downloadImage=function(bt,At,q){var ct=this,ot=this;ot.isAnimating()&&ot.stopAnimate();var _=ot.get("canvas").getRenderer();At||(At="image/png");var P=(bt||"graph")+(_==="svg"?".svg":At.split("/")[1]),Y=document.createElement("a");setTimeout(function(){var k=ot.toDataURL(At,q);ct.dataURLToImage(k,_,Y,P);var h=document.createEvent("MouseEvents");h.initEvent("click",!1,!1),Y.dispatchEvent(h)},16)},vt.prototype.dataURLToImage=function(bt,At,q,ct){if(typeof window!="undefined")if(window.Blob&&window.URL&&At!=="svg"){var ot=bt.split(","),_="";if(ot&&ot.length>0){var P=ot[0].match(/:(.*?);/);P&&P.length>=2&&(_=P[1])}for(var Y=atob(ot[1]),k=Y.length,h=new Uint8Array(k);k--;)h[k]=Y.charCodeAt(k);var g=new Blob([h],{type:_});window.navigator.msSaveBlob?window.navigator.msSaveBlob(g,ct):q.addEventListener("click",function(){q.download=ct,q.href=window.URL.createObjectURL(g)})}else q.addEventListener("click",function(){q.download=ct,q.href=bt})},vt.prototype.addPlugin=function(bt){bt.destroyed||(this.get("plugins").push(bt),bt.initPlugin(this))},vt.prototype.removePlugin=function(bt){var At=this.get("plugins"),q=At.indexOf(bt);q>=0&&(bt.destroyPlugin(),At.splice(q,1))},vt.prototype.setImageWaterMarker=function(bt,At){bt===void 0&&(bt=j.a.waterMarkerImage);var q=this.get("container");Object(l.x)(q)&&(q=document.getElementById(q)),q.style.position||(q.style.position="relative");var ct=this.get("graphWaterMarker"),ot=Object(l.e)({},j.a.imageWaterMarkerConfig,At),_=ot.width,P=ot.height,Y=ot.compatible,k=ot.image;if(!ct){var h={container:q,width:_,height:P,capture:!1},g=this.get("pixelRatio");g&&(h.pixelRatio=g),ct=new p.Canvas(h),this.set("graphWaterMarker",ct)}ct.get("el").style.display="none";var F=ct.get("context"),V=k.rotate,H=k.x,et=k.y;F.rotate(-V*Math.PI/180);var nt=new Image;nt.crossOrigin="anonymous",nt.src=bt,nt.onload=function(){if(F.drawImage(nt,H,et,k.width,k.height),F.rotate(V*Math.PI/180),Y)q.style.cssText="background-image: url("+ct.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var St=document.querySelector(".g6-graph-watermarker");St||((St=document.createElement("div")).className="g6-graph-watermarker"),St.className="g6-graph-watermarker",ct.destroyed||(St.style.cssText="background-image: url("+ct.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;",q.appendChild(St))}}},vt.prototype.setTextWaterMarker=function(bt,At){var q=this.get("container");Object(l.x)(q)&&(q=document.getElementById(q)),q.style.position||(q.style.position="relative");var ct=this.get("graphWaterMarker"),ot=Object(l.e)({},j.a.textWaterMarkerConfig,At),_=ot.width,P=ot.height,Y=ot.compatible,k=ot.text;if(!ct){var h={container:q,width:_,height:P,capture:!1},g=this.get("pixelRatio");g&&(h.pixelRatio=g),ct=new p.Canvas(h),this.set("graphWaterMarker",ct)}ct.get("el").style.display="none";var F=ct.get("context"),V=k.rotate,H=k.fill,et=k.fontFamily,nt=k.fontSize,St=k.baseline,dt=k.x,gt=k.y,yt=k.lineHeight;F.rotate(-V*Math.PI/180),F.font=nt+"px "+et,F.fillStyle=H,F.textBaseline=St;for(var Ct=bt.length-1;Ct>=0;Ct--)F.fillText(bt[Ct],dt,gt+Ct*yt);if(F.rotate(V*Math.PI/180),Y)q.style.cssText="background-image: url("+ct.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var Pt=document.querySelector(".g6-graph-watermarker");Pt||((Pt=document.createElement("div")).className="g6-graph-watermarker"),Pt.style.cssText="background-image: url("+ct.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;",q.appendChild(Pt)}},vt.prototype.destroy=function(){Object(l.f)(this.get("plugins"),function(ot){ot.destroyPlugin()});var bt=this.get("tooltips");if(bt)for(var At=0;At<bt.length;At++){var q=bt[At];if(q){var ct=q.parentElement;ct&&ct.removeChild(q)}}this.get("eventController").destroy(),this.get("layoutController").destroy(),this.get("graphWaterMarker")&&this.get("graphWaterMarker").destroy(),document.querySelector(".g6-graph-watermarker")&&document.querySelector(".g6-graph-watermarker").remove(),ht.prototype.destroy.call(this)},vt}(E.b);A.a=J},function(a,A){a.exports=function(e){return e==null}},function(a,A,e){var r;function p(m){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O})(m)}(function(m){var O=/^\s+/,l=/\s+$/,E=0,j=m.round,y=m.min,n=m.max,s=m.random;function d(g,F){if(F=F||{},(g=g||"")instanceof d)return g;if(!(this instanceof d))return new d(g,F);var V=function(H){var et={r:0,g:0,b:0},nt=1,St=null,dt=null,gt=null,yt=!1,Ct=!1;typeof H=="string"&&(H=function(zt){zt=zt.replace(O,"").replace(l,"").toLowerCase();var Xt,re=!1;if(Lt[zt])zt=Lt[zt],re=!0;else if(zt=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(Xt=k.rgb.exec(zt))?{r:Xt[1],g:Xt[2],b:Xt[3]}:(Xt=k.rgba.exec(zt))?{r:Xt[1],g:Xt[2],b:Xt[3],a:Xt[4]}:(Xt=k.hsl.exec(zt))?{h:Xt[1],s:Xt[2],l:Xt[3]}:(Xt=k.hsla.exec(zt))?{h:Xt[1],s:Xt[2],l:Xt[3],a:Xt[4]}:(Xt=k.hsv.exec(zt))?{h:Xt[1],s:Xt[2],v:Xt[3]}:(Xt=k.hsva.exec(zt))?{h:Xt[1],s:Xt[2],v:Xt[3],a:Xt[4]}:(Xt=k.hex8.exec(zt))?{r:bt(Xt[1]),g:bt(Xt[2]),b:bt(Xt[3]),a:ot(Xt[4]),format:re?"name":"hex8"}:(Xt=k.hex6.exec(zt))?{r:bt(Xt[1]),g:bt(Xt[2]),b:bt(Xt[3]),format:re?"name":"hex"}:(Xt=k.hex4.exec(zt))?{r:bt(Xt[1]+""+Xt[1]),g:bt(Xt[2]+""+Xt[2]),b:bt(Xt[3]+""+Xt[3]),a:ot(Xt[4]+""+Xt[4]),format:re?"name":"hex8"}:(Xt=k.hex3.exec(zt))?{r:bt(Xt[1]+""+Xt[1]),g:bt(Xt[2]+""+Xt[2]),b:bt(Xt[3]+""+Xt[3]),format:re?"name":"hex"}:!1}(H)),p(H)=="object"&&(h(H.r)&&h(H.g)&&h(H.b)?(Pt=H.r,Ft=H.g,Tt=H.b,et={r:255*ht(Pt,255),g:255*ht(Ft,255),b:255*ht(Tt,255)},yt=!0,Ct=String(H.r).substr(-1)==="%"?"prgb":"rgb"):h(H.h)&&h(H.s)&&h(H.v)?(St=q(H.s),dt=q(H.v),et=function(zt,Xt,re){zt=6*ht(zt,360),Xt=ht(Xt,100),re=ht(re,100);var de=m.floor(zt),ye=zt-de,we=re*(1-Xt),De=re*(1-ye*Xt),Ve=re*(1-(1-ye)*Xt),pn=de%6;return{r:255*[re,De,we,we,Ve,re][pn],g:255*[Ve,re,re,De,we,we][pn],b:255*[we,we,Ve,re,re,De][pn]}}(H.h,St,dt),yt=!0,Ct="hsv"):h(H.h)&&h(H.s)&&h(H.l)&&(St=q(H.s),gt=q(H.l),et=function(zt,Xt,re){var de,ye,we;function De(sn,In,An){return An<0&&(An+=1),An>1&&(An-=1),An<1/6?sn+6*(In-sn)*An:An<.5?In:An<2/3?sn+(In-sn)*(2/3-An)*6:sn}if(zt=ht(zt,360),Xt=ht(Xt,100),re=ht(re,100),Xt===0)de=ye=we=re;else{var Ve=re<.5?re*(1+Xt):re+Xt-re*Xt,pn=2*re-Ve;de=De(pn,Ve,zt+1/3),ye=De(pn,Ve,zt),we=De(pn,Ve,zt-1/3)}return{r:255*de,g:255*ye,b:255*we}}(H.h,St,gt),yt=!0,Ct="hsl"),H.hasOwnProperty("a")&&(nt=H.a));var Pt,Ft,Tt;return nt=J(nt),{ok:yt,format:H.format||Ct,r:y(255,n(et.r,0)),g:y(255,n(et.g,0)),b:y(255,n(et.b,0)),a:nt}}(g);this._originalInput=g,this._r=V.r,this._g=V.g,this._b=V.b,this._a=V.a,this._roundA=j(100*this._a)/100,this._format=F.format||V.format,this._gradientType=F.gradientType,this._r<1&&(this._r=j(this._r)),this._g<1&&(this._g=j(this._g)),this._b<1&&(this._b=j(this._b)),this._ok=V.ok,this._tc_id=E++}function M(g,F,V){g=ht(g,255),F=ht(F,255),V=ht(V,255);var H,et,nt=n(g,F,V),St=y(g,F,V),dt=(nt+St)/2;if(nt==St)H=et=0;else{var gt=nt-St;switch(et=dt>.5?gt/(2-nt-St):gt/(nt+St),nt){case g:H=(F-V)/gt+(F<V?6:0);break;case F:H=(V-g)/gt+2;break;case V:H=(g-F)/gt+4}H/=6}return{h:H,s:et,l:dt}}function S(g,F,V){g=ht(g,255),F=ht(F,255),V=ht(V,255);var H,et,nt=n(g,F,V),St=y(g,F,V),dt=nt,gt=nt-St;if(et=nt===0?0:gt/nt,nt==St)H=0;else{switch(nt){case g:H=(F-V)/gt+(F<V?6:0);break;case F:H=(V-g)/gt+2;break;case V:H=(g-F)/gt+4}H/=6}return{h:H,s:et,v:dt}}function T(g,F,V,H){var et=[At(j(g).toString(16)),At(j(F).toString(16)),At(j(V).toString(16))];return H&&et[0].charAt(0)==et[0].charAt(1)&&et[1].charAt(0)==et[1].charAt(1)&&et[2].charAt(0)==et[2].charAt(1)?et[0].charAt(0)+et[1].charAt(0)+et[2].charAt(0):et.join("")}function v(g,F,V,H){return[At(ct(H)),At(j(g).toString(16)),At(j(F).toString(16)),At(j(V).toString(16))].join("")}function x(g,F){F=F===0?0:F||10;var V=d(g).toHsl();return V.s-=F/100,V.s=vt(V.s),d(V)}function C(g,F){F=F===0?0:F||10;var V=d(g).toHsl();return V.s+=F/100,V.s=vt(V.s),d(V)}function N(g){return d(g).desaturate(100)}function X(g,F){F=F===0?0:F||10;var V=d(g).toHsl();return V.l+=F/100,V.l=vt(V.l),d(V)}function tt(g,F){F=F===0?0:F||10;var V=d(g).toRgb();return V.r=n(0,y(255,V.r-j(-F/100*255))),V.g=n(0,y(255,V.g-j(-F/100*255))),V.b=n(0,y(255,V.b-j(-F/100*255))),d(V)}function it(g,F){F=F===0?0:F||10;var V=d(g).toHsl();return V.l-=F/100,V.l=vt(V.l),d(V)}function pt(g,F){var V=d(g).toHsl(),H=(V.h+F)%360;return V.h=H<0?360+H:H,d(V)}function ft(g){var F=d(g).toHsl();return F.h=(F.h+180)%360,d(F)}function Ot(g){var F=d(g).toHsl(),V=F.h;return[d(g),d({h:(V+120)%360,s:F.s,l:F.l}),d({h:(V+240)%360,s:F.s,l:F.l})]}function wt(g){var F=d(g).toHsl(),V=F.h;return[d(g),d({h:(V+90)%360,s:F.s,l:F.l}),d({h:(V+180)%360,s:F.s,l:F.l}),d({h:(V+270)%360,s:F.s,l:F.l})]}function xt(g){var F=d(g).toHsl(),V=F.h;return[d(g),d({h:(V+72)%360,s:F.s,l:F.l}),d({h:(V+216)%360,s:F.s,l:F.l})]}function lt(g,F,V){F=F||6,V=V||30;var H=d(g).toHsl(),et=360/V,nt=[d(g)];for(H.h=(H.h-(et*F>>1)+720)%360;--F;)H.h=(H.h+et)%360,nt.push(d(H));return nt}function Vt(g,F){F=F||6;for(var V=d(g).toHsv(),H=V.h,et=V.s,nt=V.v,St=[],dt=1/F;F--;)St.push(d({h:H,s:et,v:nt})),nt=(nt+dt)%1;return St}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var F=this.toRgb();return(299*F.r+587*F.g+114*F.b)/1e3},getLuminance:function(){var F,V,H,et=this.toRgb();return F=et.r/255,V=et.g/255,H=et.b/255,.2126*(F<=.03928?F/12.92:m.pow((F+.055)/1.055,2.4))+.7152*(V<=.03928?V/12.92:m.pow((V+.055)/1.055,2.4))+.0722*(H<=.03928?H/12.92:m.pow((H+.055)/1.055,2.4))},setAlpha:function(F){return this._a=J(F),this._roundA=j(100*this._a)/100,this},toHsv:function(){var F=S(this._r,this._g,this._b);return{h:360*F.h,s:F.s,v:F.v,a:this._a}},toHsvString:function(){var F=S(this._r,this._g,this._b),V=j(360*F.h),H=j(100*F.s),et=j(100*F.v);return this._a==1?"hsv("+V+", "+H+"%, "+et+"%)":"hsva("+V+", "+H+"%, "+et+"%, "+this._roundA+")"},toHsl:function(){var F=M(this._r,this._g,this._b);return{h:360*F.h,s:F.s,l:F.l,a:this._a}},toHslString:function(){var F=M(this._r,this._g,this._b),V=j(360*F.h),H=j(100*F.s),et=j(100*F.l);return this._a==1?"hsl("+V+", "+H+"%, "+et+"%)":"hsla("+V+", "+H+"%, "+et+"%, "+this._roundA+")"},toHex:function(F){return T(this._r,this._g,this._b,F)},toHexString:function(F){return"#"+this.toHex(F)},toHex8:function(F){return function(V,H,et,nt,St){var dt=[At(j(V).toString(16)),At(j(H).toString(16)),At(j(et).toString(16)),At(ct(nt))];return St&&dt[0].charAt(0)==dt[0].charAt(1)&&dt[1].charAt(0)==dt[1].charAt(1)&&dt[2].charAt(0)==dt[2].charAt(1)&&dt[3].charAt(0)==dt[3].charAt(1)?dt[0].charAt(0)+dt[1].charAt(0)+dt[2].charAt(0)+dt[3].charAt(0):dt.join("")}(this._r,this._g,this._b,this._a,F)},toHex8String:function(F){return"#"+this.toHex8(F)},toRgb:function(){return{r:j(this._r),g:j(this._g),b:j(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+j(this._r)+", "+j(this._g)+", "+j(this._b)+")":"rgba("+j(this._r)+", "+j(this._g)+", "+j(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:j(100*ht(this._r,255))+"%",g:j(100*ht(this._g,255))+"%",b:j(100*ht(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+j(100*ht(this._r,255))+"%, "+j(100*ht(this._g,255))+"%, "+j(100*ht(this._b,255))+"%)":"rgba("+j(100*ht(this._r,255))+"%, "+j(100*ht(this._g,255))+"%, "+j(100*ht(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(Et[T(this._r,this._g,this._b,!0)]||!1)},toFilter:function(F){var V="#"+v(this._r,this._g,this._b,this._a),H=V,et=this._gradientType?"GradientType = 1, ":"";if(F){var nt=d(F);H="#"+v(nt._r,nt._g,nt._b,nt._a)}return"progid:DXImageTransform.Microsoft.gradient("+et+"startColorstr="+V+",endColorstr="+H+")"},toString:function(F){var V=!!F;F=F||this._format;var H=!1,et=this._a<1&&this._a>=0;return V||!et||F!=="hex"&&F!=="hex6"&&F!=="hex3"&&F!=="hex4"&&F!=="hex8"&&F!=="name"?(F==="rgb"&&(H=this.toRgbString()),F==="prgb"&&(H=this.toPercentageRgbString()),F!=="hex"&&F!=="hex6"||(H=this.toHexString()),F==="hex3"&&(H=this.toHexString(!0)),F==="hex4"&&(H=this.toHex8String(!0)),F==="hex8"&&(H=this.toHex8String()),F==="name"&&(H=this.toName()),F==="hsl"&&(H=this.toHslString()),F==="hsv"&&(H=this.toHsvString()),H||this.toHexString()):F==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(F,V){var H=F.apply(null,[this].concat([].slice.call(V)));return this._r=H._r,this._g=H._g,this._b=H._b,this.setAlpha(H._a),this},lighten:function(){return this._applyModification(X,arguments)},brighten:function(){return this._applyModification(tt,arguments)},darken:function(){return this._applyModification(it,arguments)},desaturate:function(){return this._applyModification(x,arguments)},saturate:function(){return this._applyModification(C,arguments)},greyscale:function(){return this._applyModification(N,arguments)},spin:function(){return this._applyModification(pt,arguments)},_applyCombination:function(F,V){return F.apply(null,[this].concat([].slice.call(V)))},analogous:function(){return this._applyCombination(lt,arguments)},complement:function(){return this._applyCombination(ft,arguments)},monochromatic:function(){return this._applyCombination(Vt,arguments)},splitcomplement:function(){return this._applyCombination(xt,arguments)},triad:function(){return this._applyCombination(Ot,arguments)},tetrad:function(){return this._applyCombination(wt,arguments)}},d.fromRatio=function(g,F){if(p(g)=="object"){var V={};for(var H in g)g.hasOwnProperty(H)&&(V[H]=H==="a"?g[H]:q(g[H]));g=V}return d(g,F)},d.equals=function(g,F){return!(!g||!F)&&d(g).toRgbString()==d(F).toRgbString()},d.random=function(){return d.fromRatio({r:s(),g:s(),b:s()})},d.mix=function(g,F,V){V=V===0?0:V||50;var H=d(g).toRgb(),et=d(F).toRgb(),nt=V/100;return d({r:(et.r-H.r)*nt+H.r,g:(et.g-H.g)*nt+H.g,b:(et.b-H.b)*nt+H.b,a:(et.a-H.a)*nt+H.a})},d.readability=function(g,F){var V=d(g),H=d(F);return(m.max(V.getLuminance(),H.getLuminance())+.05)/(m.min(V.getLuminance(),H.getLuminance())+.05)},d.isReadable=function(g,F,V){var H,et,nt=d.readability(g,F);switch(et=!1,(H=function(St){var dt,gt;return dt=((St=St||{level:"AA",size:"small"}).level||"AA").toUpperCase(),gt=(St.size||"small").toLowerCase(),dt!=="AA"&&dt!=="AAA"&&(dt="AA"),gt!=="small"&&gt!=="large"&&(gt="small"),{level:dt,size:gt}}(V)).level+H.size){case"AAsmall":case"AAAlarge":et=nt>=4.5;break;case"AAlarge":et=nt>=3;break;case"AAAsmall":et=nt>=7}return et},d.mostReadable=function(g,F,V){var H,et,nt,St,dt=null,gt=0;et=(V=V||{}).includeFallbackColors,nt=V.level,St=V.size;for(var yt=0;yt<F.length;yt++)(H=d.readability(g,F[yt]))>gt&&(gt=H,dt=d(F[yt]));return d.isReadable(g,dt,{level:nt,size:St})||!et?dt:(V.includeFallbackColors=!1,d.mostReadable(g,["#fff","#000"],V))};var Lt=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Et=d.hexNames=function(g){var F={};for(var V in g)g.hasOwnProperty(V)&&(F[g[V]]=V);return F}(Lt);function J(g){return g=parseFloat(g),(isNaN(g)||g<0||g>1)&&(g=1),g}function ht(g,F){(function(H){return typeof H=="string"&&H.indexOf(".")!=-1&&parseFloat(H)===1})(g)&&(g="100%");var V=function(H){return typeof H=="string"&&H.indexOf("%")!=-1}(g);return g=y(F,n(0,parseFloat(g))),V&&(g=parseInt(g*F,10)/100),m.abs(g-F)<1e-6?1:g%F/parseFloat(F)}function vt(g){return y(1,n(0,g))}function bt(g){return parseInt(g,16)}function At(g){return g.length==1?"0"+g:""+g}function q(g){return g<=1&&(g=100*g+"%"),g}function ct(g){return m.round(255*parseFloat(g)).toString(16)}function ot(g){return bt(g)/255}var _,P,Y,k=(P="[\\s|\\(]+("+(_="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+_+")[,|\\s]+("+_+")\\s*\\)?",Y="[\\s|\\(]+("+_+")[,|\\s]+("+_+")[,|\\s]+("+_+")[,|\\s]+("+_+")\\s*\\)?",{CSS_UNIT:new RegExp(_),rgb:new RegExp("rgb"+P),rgba:new RegExp("rgba"+Y),hsl:new RegExp("hsl"+P),hsla:new RegExp("hsla"+Y),hsv:new RegExp("hsv"+P),hsva:new RegExp("hsva"+Y),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function h(g){return!!k.CSS_UNIT.exec(g)}a.exports?a.exports=d:(r=function(){return d}.call(A,e,A,a))===void 0||(a.exports=r)})(Math)},function(a,A,e){a.exports={EPSILON:e(233),create:e(234),clone:e(477),fromValues:e(478),copy:e(479),set:e(235),equals:e(480),exactEquals:e(481),add:e(236),subtract:e(150),sub:e(482),multiply:e(237),mul:e(483),divide:e(238),div:e(484),inverse:e(485),min:e(486),max:e(487),rotate:e(488),floor:e(489),ceil:e(490),round:e(491),scale:e(492),scaleAndAdd:e(493),distance:e(239),dist:e(494),squaredDistance:e(240),sqrDist:e(495),length:e(241),len:e(496),squaredLength:e(242),sqrLen:e(497),negate:e(498),normalize:e(243),dot:e(244),cross:e(499),lerp:e(500),random:e(501),transformMat2:e(502),transformMat2d:e(503),transformMat3:e(504),transformMat4:e(505),forEach:e(506),limit:e(507)}},function(a,A,e){var r=e(96),p=e(278),m=e(279),O=e(280),l=e(281),E=e(282);function j(y){var n=this.__data__=new r(y);this.size=n.size}j.prototype.clear=p,j.prototype.delete=m,j.prototype.get=O,j.prototype.has=l,j.prototype.set=E,a.exports=j},function(a,A,e){var r=e(273),p=e(274),m=e(275),O=e(276),l=e(277);function E(j){var y=-1,n=j==null?0:j.length;for(this.clear();++y<n;){var s=j[y];this.set(s[0],s[1])}}E.prototype.clear=r,E.prototype.delete=p,E.prototype.get=m,E.prototype.has=O,E.prototype.set=l,a.exports=E},function(a,A,e){var r=e(71);a.exports=function(p,m){for(var O=p.length;O--;)if(r(p[O][0],m))return O;return-1}},function(a,A,e){var r=e(64)(Object,"create");a.exports=r},function(a,A,e){var r=e(297);a.exports=function(p,m){var O=p.__data__;return r(m)?O[typeof m=="string"?"string":"hash"]:O.map}},function(a,A,e){var r=e(101),p=e(71),m=Object.prototype.hasOwnProperty;a.exports=function(O,l,E){var j=O[l];m.call(O,l)&&p(j,E)&&(E!==void 0||l in O)||r(O,l,E)}},function(a,A,e){var r=e(166);a.exports=function(p,m,O){m=="__proto__"&&r?r(p,m,{configurable:!0,enumerable:!0,value:O,writable:!0}):p[m]=O}},function(a,A){function e(p){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}var r=/^(?:0|[1-9]\d*)$/;a.exports=function(p,m){var O=e(p);return!!(m=m==null?9007199254740991:m)&&(O=="number"||O!="symbol"&&r.test(p))&&p>-1&&p%1==0&&p<m}},function(a,A){a.exports=function(e){return function(r){return e(r)}}},function(a,A){var e=Object.prototype;a.exports=function(r){var p=r&&r.constructor;return r===(typeof p=="function"&&p.prototype||e)}},function(a,A,e){var r=e(168)(Object.getPrototypeOf,Object);a.exports=r},function(a,A,e){var r=e(135),p=e(326)(r);a.exports=p},function(a,A,e){var r=e(108),p=e(87);a.exports=function(m,O){for(var l=0,E=(O=r(O,m)).length;m!=null&&l<E;)m=m[p(O[l++])];return l&&l==E?m:void 0}},function(a,A,e){var r=e(26),p=e(138),m=e(340),O=e(191);a.exports=function(l,E){return r(l)?l:p(l,E)?[l]:m(O(l))}},function(a,A){a.exports=function(e,r){for(var p=-1,m=e==null?0:e.length,O=Array(m);++p<m;)O[p]=r(e[p],p,e);return O}},function(a,A,e){var r=e(66),p=e(200),m=e(201);a.exports=function(O,l){return m(p(O,l,r),O+"")}},function(a,A,e){function r(E){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(E)}var p=e(71),m=e(53),O=e(102),l=e(43);a.exports=function(E,j,y){if(!l(y))return!1;var n=r(j);return!!(n=="number"?m(y)&&O(j,y.length):n=="string"&&j in y)&&p(y[j],E)}},function(a,A,e){"use strict";var r=e(24);a.exports={longestPath:function(m){var O={};r.forEach(m.sources(),function l(E){var j=m.node(E);if(r.has(O,E))return j.rank;O[E]=!0;var y=r.min(r.map(m.outEdges(E),function(n){return l(n.w)-m.edge(n).minlen}));return y!==Number.POSITIVE_INFINITY&&y!=null||(y=0),j.rank=y})},slack:function(m,O){return m.node(O.w).rank-m.node(O.v).rank-m.edge(O).minlen}}},function(a,A){},function(a,A,e){"use strict";var r=function(){function p(m,O){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=m,this.name=m,this.originalEvent=O,this.timeStamp=O.timeStamp}return p.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},p.prototype.stopPropagation=function(){this.propagationStopped=!0},p.prototype.toString=function(){return"[Event (type="+this.type+")]"},p.prototype.save=function(){},p.prototype.restore=function(){},p}();A.a=r},function(a,A,e){"use strict";var r=e(1),p=e(79),m=e(19),O=function(l){function E(j){var y=l.call(this)||this;y.destroyed=!1;var n=y.getDefaultCfg();return y.cfg=Object(m.i)(n,j),y}return Object(r.b)(E,l),E.prototype.getDefaultCfg=function(){return{}},E.prototype.get=function(j){return this.cfg[j]},E.prototype.set=function(j,y){this.cfg[j]=y},E.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},E}(p.a);A.a=O},function(a,A,e){"use strict";e.d(A,"a",function(){return p});var r=null;function p(){if(!r){var m=document.createElement("canvas");m.width=1,m.height=1,r=m.getContext("2d")}return r}},function(a,A,e){"use strict";var r=e(1),p=e(118),m=e(19),O={},l=function(E){function j(){return E!==null&&E.apply(this,arguments)||this}return Object(r.b)(j,E),j.prototype.isCanvas=function(){return!1},j.prototype.getBBox=function(){var y=1/0,n=-1/0,s=1/0,d=-1/0,M=[],S=[],T=this.getChildren().filter(function(v){return v.get("visible")&&(!v.isGroup()||v.isGroup()&&v.getChildren().length>0)});return T.length>0?(Object(m.a)(T,function(v){var x=v.getBBox();M.push(x.minX,x.maxX),S.push(x.minY,x.maxY)}),y=Math.min.apply(null,M),n=Math.max.apply(null,M),s=Math.min.apply(null,S),d=Math.max.apply(null,S)):(y=0,n=0,s=0,d=0),{x:y,y:s,minX:y,minY:s,maxX:n,maxY:d,width:n-y,height:d-s}},j.prototype.getCanvasBBox=function(){var y=1/0,n=-1/0,s=1/0,d=-1/0,M=[],S=[],T=this.getChildren().filter(function(v){return v.get("visible")&&(!v.isGroup()||v.isGroup()&&v.getChildren().length>0)});return T.length>0?(Object(m.a)(T,function(v){var x=v.getCanvasBBox();M.push(x.minX,x.maxX),S.push(x.minY,x.maxY)}),y=Math.min.apply(null,M),n=Math.max.apply(null,M),s=Math.min.apply(null,S),d=Math.max.apply(null,S)):(y=0,n=0,s=0,d=0),{x:y,y:s,minX:y,minY:s,maxX:n,maxY:d,width:n-y,height:d-s}},j.prototype.getDefaultCfg=function(){var y=E.prototype.getDefaultCfg.call(this);return y.children=[],y},j.prototype.onAttrChange=function(y,n,s){if(E.prototype.onAttrChange.call(this,y,n,s),y==="matrix"){var d=this.getTotalMatrix();this._applyChildrenMarix(d)}},j.prototype.applyMatrix=function(y){var n=this.getTotalMatrix();E.prototype.applyMatrix.call(this,y);var s=this.getTotalMatrix();s!==n&&this._applyChildrenMarix(s)},j.prototype._applyChildrenMarix=function(y){var n=this.getChildren();Object(m.a)(n,function(s){s.applyMatrix(y)})},j.prototype.addShape=function(){for(var y=[],n=0;n<arguments.length;n++)y[n]=arguments[n];var s=y[0],d=y[1];Object(m.f)(s)?d=s:d.type=s;var M=O[d.type];M||(M=Object(m.k)(d.type),O[d.type]=M);var S=this.getShapeBase(),T=new S[M](d);return this.add(T),T},j.prototype.addGroup=function(){for(var y=[],n=0;n<arguments.length;n++)y[n]=arguments[n];var s,d=y[0],M=y[1];if(Object(m.d)(d))s=new d(M||{parent:this});else{var S=d||{},T=this.getGroupBase();s=new T(S)}return this.add(s),s},j.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},j.prototype.getShape=function(y,n,s){if(!Object(m.b)(this))return null;var d,M=this.getChildren();if(this.isCanvas())d=this._findShape(M,y,n,s);else{var S=[y,n,1];S=this.invertFromMatrix(S),this.isClipped(S[0],S[1])||(d=this._findShape(M,S[0],S[1],s))}return d},j.prototype._findShape=function(y,n,s,d){for(var M=null,S=y.length-1;S>=0;S--){var T=y[S];if(Object(m.b)(T)&&(T.isGroup()?M=T.getShape(n,s,d):T.isHit(n,s)&&(M=T)),M)break}return M},j.prototype.add=function(y){var n=this.getCanvas(),s=this.getChildren(),d=this.get("timeline"),M=y.getParent();M&&function(S,T,v){v===void 0&&(v=!0),v?T.destroy():(T.set("parent",null),T.set("canvas",null)),Object(m.j)(S.getChildren(),T)}(M,y,!1),y.set("parent",this),n&&function S(T,v){if(T.set("canvas",v),T.isGroup()){var x=T.get("children");x.length&&x.forEach(function(C){S(C,v)})}}(y,n),d&&function S(T,v){if(T.set("timeline",v),T.isGroup()){var x=T.get("children");x.length&&x.forEach(function(C){S(C,v)})}}(y,d),s.push(y),y.onCanvasChange("add"),this._applyElementMatrix(y)},j.prototype._applyElementMatrix=function(y){var n=this.getTotalMatrix();n&&y.applyMatrix(n)},j.prototype.getChildren=function(){return this.get("children")},j.prototype.sort=function(){var y,n=this.getChildren();Object(m.a)(n,function(s,d){return s._INDEX=d,s}),n.sort((y=function(d,M){return d.get("zIndex")-M.get("zIndex")},function(s,d){var M=y(s,d);return M===0?s._INDEX-d._INDEX:M})),this.onCanvasChange("sort")},j.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var y=this.getChildren(),n=y.length-1;n>=0;n--)y[n].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},j.prototype.destroy=function(){this.get("destroyed")||(this.clear(),E.prototype.destroy.call(this))},j.prototype.getFirst=function(){return this.getChildByIndex(0)},j.prototype.getLast=function(){var y=this.getChildren();return this.getChildByIndex(y.length-1)},j.prototype.getChildByIndex=function(y){return this.getChildren()[y]},j.prototype.getCount=function(){return this.getChildren().length},j.prototype.contain=function(y){return this.getChildren().indexOf(y)>-1},j.prototype.removeChild=function(y,n){n===void 0&&(n=!0),this.contain(y)&&y.remove(n)},j.prototype.findAll=function(y){var n=[],s=this.getChildren();return Object(m.a)(s,function(d){y(d)&&n.push(d),d.isGroup()&&(n=n.concat(d.findAll(y)))}),n},j.prototype.find=function(y){var n=null,s=this.getChildren();return Object(m.a)(s,function(d){if(y(d)?n=d:d.isGroup()&&(n=d.find(y)),n)return!1}),n},j.prototype.findById=function(y){return this.find(function(n){return n.get("id")===y})},j.prototype.findByClassName=function(y){return this.find(function(n){return n.get("className")===y})},j.prototype.findAllByName=function(y){return this.findAll(function(n){return n.get("name")===y})},j}(p.a);A.a=l},function(a,A,e){"use strict";var r=e(1),p=e(0),m=e(10),O=e(19),l=e(39),E=e(115),j=m.a.transform,y=["zIndex","capture","visible","type"],n=["repeat"];function s(T,v){var x={},C=v.attrs;for(var N in T)x[N]=C[N];return x}function d(T,v){var x={},C=v.attr();return Object(p.f)(T,function(N,X){n.indexOf(X)!==-1||Object(p.q)(C[X],N)||(x[X]=N)}),x}function M(T,v){if(v.onFrame)return T;var x=v.startTime,C=v.delay,N=v.duration,X=Object.prototype.hasOwnProperty;return Object(p.f)(T,function(tt){x+C<tt.startTime+tt.delay+tt.duration&&N>tt.delay&&Object(p.f)(v.toAttrs,function(it,pt){X.call(tt.toAttrs,pt)&&(delete tt.toAttrs[pt],delete tt.fromAttrs[pt])})}),T}var S=function(T){function v(x){var C=T.call(this,x)||this;C.attrs={};var N=C.getDefaultAttrs();return Object(p.A)(N,x.attrs),C.attrs=N,C.initAttrs(N),C.initAnimate(),C}return Object(r.b)(v,T),v.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},v.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},v.prototype.onCanvasChange=function(x){},v.prototype.initAttrs=function(x){},v.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},v.prototype.isGroup=function(){return!1},v.prototype.getParent=function(){return this.get("parent")},v.prototype.getCanvas=function(){return this.get("canvas")},v.prototype.attr=function(){for(var x,C=[],N=0;N<arguments.length;N++)C[N]=arguments[N];var X=C[0],tt=C[1];if(!X)return this.attrs;if(Object(p.v)(X)){for(var it in X)this.setAttr(it,X[it]);return this.afterAttrsChange(X),this}return C.length===2?(this.setAttr(X,tt),this.afterAttrsChange(((x={})[X]=tt,x)),this):this.attrs[X]},v.prototype.isClipped=function(x,C){var N=this.getClip();return N&&!N.isHit(x,C)},v.prototype.setAttr=function(x,C){var N=this.attrs[x];N!==C&&(this.attrs[x]=C,this.onAttrChange(x,C,N))},v.prototype.onAttrChange=function(x,C,N){x==="matrix"&&this.set("totalMatrix",null)},v.prototype.afterAttrsChange=function(x){if(this.cfg.isClipShape){var C=this.cfg.applyTo;C&&C.onCanvasChange("clip")}else this.onCanvasChange("attr")},v.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},v.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},v.prototype.setZIndex=function(x){this.set("zIndex",x);var C=this.getParent();return C&&C.sort(),this},v.prototype.toFront=function(){var x=this.getParent();if(x){var C=x.getChildren(),N=(this.get("el"),C.indexOf(this));C.splice(N,1),C.push(this),this.onCanvasChange("zIndex")}},v.prototype.toBack=function(){var x=this.getParent();if(x){var C=x.getChildren(),N=(this.get("el"),C.indexOf(this));C.splice(N,1),C.unshift(this),this.onCanvasChange("zIndex")}},v.prototype.remove=function(x){x===void 0&&(x=!0);var C=this.getParent();C?(Object(O.j)(C.getChildren(),this),C.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),x&&this.destroy()},v.prototype.resetMatrix=function(){this.attr("matrix",this.getDefaultMatrix()),this.onCanvasChange("matrix")},v.prototype.getMatrix=function(){return this.attr("matrix")},v.prototype.setMatrix=function(x){this.attr("matrix",x),this.onCanvasChange("matrix")},v.prototype.getTotalMatrix=function(){var x=this.cfg.totalMatrix;if(!x){var C=this.attr("matrix"),N=this.cfg.parentMatrix;x=N&&C?Object(l.b)(N,C):C||N,this.set("totalMatrix",x)}return x},v.prototype.applyMatrix=function(x){var C=this.attr("matrix"),N=null;N=x&&C?Object(l.b)(x,C):C||x,this.set("totalMatrix",N),this.set("parentMatrix",x)},v.prototype.getDefaultMatrix=function(){return null},v.prototype.applyToMatrix=function(x){var C=this.attr("matrix");return C?Object(l.c)(C,x):x},v.prototype.invertFromMatrix=function(x){var C=this.attr("matrix");if(C){var N=Object(l.a)(C);if(N)return Object(l.c)(N,x)}return x},v.prototype.setClip=function(x){var C=this.getCanvas(),N=null;if(x){var X=this.getShapeBase()[Object(p.I)(x.type)];X&&(N=new X({type:x.type,isClipShape:!0,applyTo:this,attrs:x.attrs,canvas:C}))}return this.set("clipShape",N),this.onCanvasChange("clip"),N},v.prototype.getClip=function(){var x=this.cfg.clipShape;return x||null},v.prototype.clone=function(){var x=this,C=this.attrs,N={};Object(p.f)(C,function(tt,it){Object(p.m)(C[it])?N[it]=function(pt){for(var ft=[],Ot=0;Ot<pt.length;Ot++)Object(p.m)(pt[Ot])?ft.push([].concat(pt[Ot])):ft.push(pt[Ot]);return ft}(C[it]):N[it]=C[it]});var X=new this.constructor({attrs:N});return Object(p.f)(y,function(tt){X.set(tt,x.get(tt))}),X},v.prototype.destroy=function(){this.destroyed||(this.attrs={},T.prototype.destroy.call(this))},v.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},v.prototype.animate=function(){for(var x=[],C=0;C<arguments.length;C++)x[C]=arguments[C];var N=this.isCanvas&&this.isCanvas();if(N||this.get("canvas")){this.set("animating",!0);var X=this.get("timeline");X||(X=this.get("canvas").get("timeline"),this.set("timeline",X));var tt=this.get("animations")||[];X.timer||X.initTimer();var it,pt,ft,Ot,wt,xt=x[0],lt=x[1],Vt=x[2],Lt=Vt===void 0?"easeLinear":Vt,Et=x[3],J=Et===void 0?p.C:Et,ht=x[4],vt=ht===void 0?0:ht;Object(p.r)(xt)?(it=xt,xt={}):Object(p.v)(xt)&&xt.onFrame&&(it=xt.onFrame,pt=xt.repeat),Object(p.v)(lt)?(lt=(wt=lt).duration,Lt=wt.easing||"easeLinear",vt=wt.delay||0,pt=wt.repeat||pt||!1,J=wt.callback||p.C,ft=wt.pauseCallback||p.C,Ot=wt.resumeCallback||p.C):(Object(p.t)(J)&&(vt=J,J=null),Object(p.r)(Lt)?(J=Lt,Lt="easeLinear"):Lt=Lt||"easeLinear");var bt=d(xt,this),At={fromAttrs:s(bt,this),toAttrs:bt,duration:lt,easing:Lt,repeat:pt,callback:J,pauseCallback:ft,resumeCallback:Ot,delay:vt,startTime:X.getTime(),id:Object(p.H)(),onFrame:it,pathFormatted:!1};tt.length>0?tt=M(tt,At):X.addAnimator(this),tt.push(At),this.set("animations",tt),this.set("_pause",{isPaused:!1})}},v.prototype.stopAnimate=function(x){var C=this;x===void 0&&(x=!0);var N=this.get("animations");Object(p.f)(N,function(X){x&&(X.onFrame?C.attr(X.onFrame(1)):C.attr(X.toAttrs)),X.callback&&X.callback()}),this.set("animating",!1),this.set("animations",[])},v.prototype.pauseAnimate=function(){var x=this.get("timeline"),C=this.get("animations"),N=x.getTime();return Object(p.f)(C,function(X){X._paused=!0,X._pauseTime=N,X.pauseCallback&&X.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:N}),this},v.prototype.resumeAnimate=function(){var x=this.get("timeline").getTime(),C=this.get("animations"),N=this.get("_pause").pauseTime;return Object(p.f)(C,function(X){X.startTime=X.startTime+(x-N),X._paused=!1,X._pauseTime=null,X.resumeCallback&&X.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",C),this},v.prototype.emitDelegation=function(x,C){var N,X=this,tt=C.propagationPath;this.getEvents(),x==="mouseenter"?N=C.fromShape:x==="mouseleave"&&(N=C.toShape);for(var it=function(wt){var xt=tt[wt],lt=xt.get("name");if(lt){if((xt.isGroup()||xt.isCanvas&&xt.isCanvas())&&N&&Object(O.g)(xt,N))return"break";Object(p.m)(lt)?Object(p.f)(lt,function(Vt){X.emitDelegateEvent(xt,Vt,C)}):pt.emitDelegateEvent(xt,lt,C)}},pt=this,ft=0;ft<tt.length&&it(ft)!=="break";ft++);},v.prototype.emitDelegateEvent=function(x,C,N){var X=this.getEvents(),tt=C+":"+N.type;(X[tt]||X["*"])&&(N.name=tt,N.currentTarget=x,N.delegateTarget=this,N.delegateObject=x.get("delegateObject"),this.emit(tt,N))},v.prototype.translate=function(x,C){x===void 0&&(x=0),C===void 0&&(C=0);var N=this.getMatrix(),X=j(N,[["t",x,C]]);return this.setMatrix(X),this},v.prototype.move=function(x,C){var N=this.attr("x")||0,X=this.attr("y")||0;return this.translate(x-N,C-X),this},v.prototype.moveTo=function(x,C){return this.move(x,C)},v.prototype.scale=function(x,C){var N=this.getMatrix(),X=j(N,[["s",x,C||x]]);return this.setMatrix(X),this},v.prototype.rotate=function(x){var C=this.getMatrix(),N=j(C,[["r",x]]);return this.setMatrix(N),this},v.prototype.rotateAtStart=function(x){var C=this.attr(),N=C.x,X=C.y,tt=this.getMatrix(),it=j(tt,[["t",-N,-X],["r",x],["t",N,X]]);return this.setMatrix(it),this},v.prototype.rotateAtPoint=function(x,C,N){var X=this.getMatrix(),tt=j(X,[["t",-x,-C],["r",N],["t",x,C]]);return this.setMatrix(tt),this},v}(E.a);A.a=S},function(a,A,e){"use strict";(function(r){e.d(A,"a",function(){return d});var p=function(){for(var v=0,x=0,C=arguments.length;x<C;x++)v+=arguments[x].length;var N=Array(v),X=0;for(x=0;x<C;x++)for(var tt=arguments[x],it=0,pt=tt.length;it<pt;it++,X++)N[X]=tt[it];return N},m=function(v,x,C){this.name=v,this.version=x,this.os=C,this.type="browser"},O=function(v){this.version=v,this.type="node",this.name="node",this.os=r.platform},l=function(v,x,C,N){this.name=v,this.version=x,this.os=C,this.bot=N,this.type="bot-device"},E=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},j=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},y=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,n=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],s=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function d(T){return T?S(T):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new j:typeof navigator!="undefined"?S(navigator.userAgent):r!==void 0&&r.version?new O(r.version.slice(1)):null}function M(T){return T!==""&&n.reduce(function(v,x){var C=x[0],N=x[1];if(v)return v;var X=N.exec(T);return!!X&&[C,X]},!1)}function S(T){var v=M(T);if(!v)return null;var x=v[0],C=v[1];if(x==="searchbot")return new E;var N=C[1]&&C[1].split(/[._]/).slice(0,3);N?N.length<3&&(N=p(N,function(pt){for(var ft=[],Ot=0;Ot<pt;Ot++)ft.push("0");return ft}(3-N.length))):N=[];var X=N.join("."),tt=function(pt){for(var ft=0,Ot=s.length;ft<Ot;ft++){var wt=s[ft],xt=wt[0];if(wt[1].exec(pt))return xt}return null}(T),it=y.exec(T);return it&&it[1]?new l(x,X,tt,it[1]):new m(x,X,tt)}}).call(this,e(158))},function(a,A,e){"use strict";e.d(A,"b",function(){return j}),e.d(A,"a",function(){return y});var r=e(17),p=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,m=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,O=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,l=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function E(n,s){var d=n.match(l);Object(r.c)(d,function(M){var S=M.split(":");s.addColorStop(S[0],S[1])})}function j(n,s,d){if(Object(r.k)(d)){if(d[1]==="("||d[2]==="("){if(d[0]==="l")return function(M,S,T){var v,x,C=p.exec(T),N=parseFloat(C[1])%360*(Math.PI/180),X=C[2],tt=S.getBBox();N>=0&&N<.5*Math.PI?(v={x:tt.minX,y:tt.minY},x={x:tt.maxX,y:tt.maxY}):.5*Math.PI<=N&&N<Math.PI?(v={x:tt.maxX,y:tt.minY},x={x:tt.minX,y:tt.maxY}):Math.PI<=N&&N<1.5*Math.PI?(v={x:tt.maxX,y:tt.maxY},x={x:tt.minX,y:tt.minY}):(v={x:tt.minX,y:tt.maxY},x={x:tt.maxX,y:tt.minY});var it=Math.tan(N),pt=it*it,ft=(x.x-v.x+it*(x.y-v.y))/(pt+1)+v.x,Ot=it*(x.x-v.x+it*(x.y-v.y))/(pt+1)+v.y,wt=M.createLinearGradient(v.x,v.y,ft,Ot);return E(X,wt),wt}(n,s,d);if(d[0]==="r")return function(M,S,T){var v=m.exec(T),x=parseFloat(v[1]),C=parseFloat(v[2]),N=parseFloat(v[3]),X=v[4];if(N===0){var tt=X.match(l);return tt[tt.length-1].split(":")[1]}var it=S.getBBox(),pt=it.maxX-it.minX,ft=it.maxY-it.minY,Ot=Math.sqrt(pt*pt+ft*ft)/2,wt=M.createRadialGradient(it.minX+pt*x,it.minY+ft*C,0,it.minX+pt/2,it.minY+ft/2,N*Ot);return E(X,wt),wt}(n,s,d);if(d[0]==="p")return function(M,S,T){if(S.get("patternSource")&&S.get("patternSource")===T)return S.get("pattern");var v,x,C=O.exec(T),N=C[1],X=C[2];function tt(){v=M.createPattern(x,N),S.set("pattern",v),S.set("patternSource",T)}switch(N){case"a":N="repeat";break;case"x":N="repeat-x";break;case"y":N="repeat-y";break;case"n":N="no-repeat";break;default:N="no-repeat"}return x=new Image,X.match(/^data:/i)||(x.crossOrigin="Anonymous"),x.src=X,x.complete?tt():(x.onload=tt,x.src=x.src),v}(n,s,d)}return d}}function y(n){var s=0,d=0,M=0,S=0;return Object(r.g)(n)?n.length===1?s=d=M=S=n[0]:n.length===2?(s=M=n[0],d=S=n[1]):n.length===3?(s=n[0],d=S=n[1],M=n[2]):(s=n[0],d=n[1],M=n[2],S=n[3]):s=d=M=S=n,[s,d,M,S]}},function(a,A,e){"use strict";e.r(A),e.d(A,"gpuDetector",function(){return r});var r=function p(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var m=document.createElement("canvas");return!(!window.WebGLRenderingContext||!m.getContext("webgl")&&!m.getContext("experimental-webgl"))}catch(O){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var O=document.createElement("div");return O.id="webgl-error-message",O.style.fontFamily="monospace",O.style.fontSize="13px",O.style.fontWeight="normal",O.style.textAlign="center",O.style.background="#fff",O.style.color="#000",O.style.padding="1.5em",O.style.width="400px",O.style.margin="5em auto 0",this.webgl||(O.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),O},addGetWebGLMessage:function(O){var l=(O=O||{}).parent!==void 0?O.parent:document.body,E=O.id!==void 0?O.id:"oldie",j=p().getWebGLErrorMessage();j.id=E,l.appendChild(j)}}}},function(a,A,e){"use strict";e.d(A,"a",function(){return r});var r={};e.r(r),e.d(r,"leftTranslate",function(){return m}),e.d(r,"leftRotate",function(){return O}),e.d(r,"leftScale",function(){return l}),e.d(r,"transform",function(){return E}),e.d(r,"direction",function(){return j}),e.d(r,"angleTo",function(){return y}),e.d(r,"vertical",function(){return n});var p=e(2);function m(s,d,M){var S=[0,0,0,0,0,0,0,0,0];return p.a.fromTranslation(S,M),p.a.multiply(s,S,d)}function O(s,d,M){var S=[0,0,0,0,0,0,0,0,0];return p.a.fromRotation(S,M),p.a.multiply(s,S,d)}function l(s,d,M){var S=[0,0,0,0,0,0,0,0,0];return p.a.fromScaling(S,M),p.a.multiply(s,S,d)}function E(s,d){for(var M,S,T,v=s?[].concat(s):[1,0,0,0,1,0,0,0,1],x=0,C=d.length;x<C;x++){var N=d[x];switch(N[0]){case"t":m(v,v,[N[1],N[2]]);break;case"s":l(v,v,[N[1],N[2]]);break;case"r":O(v,v,N[1]);break;case"m":M=v,S=v,T=N[1],p.a.multiply(M,T,S)}}return v}function j(s,d){return s[0]*d[1]-d[0]*s[1]}function y(s,d,M){var S=p.d.angle(s,d),T=j(s,d)>=0;return M?T?2*Math.PI-S:S:T?S:2*Math.PI-S}function n(s,d,M){return M?(s[0]=d[1],s[1]=-1*d[0]):(s[0]=-1*d[1],s[1]=d[0]),s}},function(a,A,e){"use strict";e.r(A),e.d(A,"mixColor",function(){return S}),e.d(A,"getColorsWithSubjectColor",function(){return T}),e.d(A,"getColorSetsBySubjectColors",function(){return v});var r=e(82),p=e.n(r),m=e(93),O=e.n(m),l=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function E(x,C,N){var X;return(X=Math.round(x.h)>=60&&Math.round(x.h)<=240?N?Math.round(x.h)-2*C:Math.round(x.h)+2*C:N?Math.round(x.h)+2*C:Math.round(x.h)-2*C)<0?X+=360:X>=360&&(X-=360),X}function j(x,C,N){return x.h===0&&x.s===0?x.s:((X=N?x.s-.16*C:C===4?x.s+.16:x.s+.05*C)>1&&(X=1),N&&C===5&&X>.1&&(X=.1),X<.06&&(X=.06),Number(X.toFixed(2)));var X}function y(x,C,N){var X;return(X=N?x.v+.05*C:x.v-.15*C)>1&&(X=1),Number(X.toFixed(2))}function n(x){for(var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},N=[],X=O()(x),tt=5;tt>0;tt-=1){var it=X.toHsv(),pt=O()({h:E(it,tt,!0),s:j(it,tt,!0),v:y(it,tt,!0)}).toHexString();N.push(pt)}N.push(X.toHexString());for(var ft=1;ft<=4;ft+=1){var Ot=X.toHsv(),wt=O()({h:E(Ot,ft),s:j(Ot,ft),v:y(Ot,ft)}).toHexString();N.push(wt)}return C.theme==="dark"?l.map(function(xt){var lt=xt.index,Vt=xt.opacity;return O.a.mix(C.backgroundColor||"#141414",N[lt],100*Vt).toHexString()}):N}var s={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},d={},M={};Object.keys(s).forEach(function(x){d[x]=n(s[x]),d[x].primary=d[x][5],M[x]=n(s[x],{theme:"dark",backgroundColor:"#141414"}),M[x].primary=M[x][5]}),d.red,d.volcano,d.gold,d.orange,d.yellow,d.lime,d.green,d.cyan,d.blue,d.geekblue,d.purple,d.magenta,d.grey;var S=function(C,N,X){var tt=p()(C),it=p()(N);return p()([(1-X)*tt.red()+X*it.red(),(1-X)*tt.green()+X*it.green(),(1-X)*tt.blue()+X*it.blue()]).rgb()},T=function(C,N,X,tt){return N===void 0&&(N="#fff"),X===void 0&&(X="default"),tt===void 0&&(tt="rgb(150, 150, 150)"),X==="default"?function(it,pt,ft){pt===void 0&&(pt="#fff"),ft===void 0&&(ft="rgb(150, 150, 150)");var Ot=S(pt,it,.05).rgb().toString(),wt=S(pt,it,.1).rgb().toString(),xt=S(pt,it,.2).rgb().toString(),lt=S(pt,it,.4).rgb().toString(),Vt=S(pt,ft,.02).rgb().toString(),Lt=S(pt,ft,.05).rgb().toString(),Et=S(pt,ft,.1).rgb().toString(),J=S(pt,ft,.2).rgb().toString(),ht=S(pt,ft,.3).rgb().toString(),vt=n(it,{theme:"default",backgroundColor:pt}),bt=p()(it).hex().toLowerCase(),At=vt.indexOf(bt),q=it;return At!==-1&&(q=vt[At+1]),{mainStroke:it,mainFill:wt,activeStroke:it,activeFill:Ot,inactiveStroke:lt,inactiveFill:Ot,selectedStroke:it,selectedFill:pt,highlightStroke:q,highlightFill:xt,disableStroke:ht,disableFill:Lt,edgeMainStroke:ht,edgeActiveStroke:it,edgeInactiveStroke:J,edgeSelectedStroke:it,edgeHighlightStroke:it,edgeDisableStroke:Et,comboMainStroke:ht,comboMainFill:Vt,comboActiveStroke:it,comboActiveFill:Ot,comboInactiveStroke:ht,comboInactiveFill:Vt,comboSelectedStroke:it,comboSelectedFill:Vt,comboHighlightStroke:q,comboHighlightFill:Vt,comboDisableStroke:J,comboDisableFill:Lt}}(C,N,"rgb(150, 150, 150)"):function(it,pt,ft){pt===void 0&&(pt="#fff"),ft===void 0&&(ft="#777");var Ot=S(pt,it,.2).rgb().toString(),wt=S(pt,it,.3).rgb().toString(),xt=S(pt,it,.6).rgb().toString(),lt=S(pt,it,.8).rgb().toString(),Vt=S(pt,ft,.2).rgb().toString(),Lt=S(pt,ft,.25).rgb().toString(),Et=S(pt,ft,.3).rgb().toString(),J=S(pt,ft,.4).rgb().toString(),ht=S(pt,ft,.5).rgb().toString(),vt=n(it,{theme:"dark",backgroundColor:pt}),bt=p()(it).hex().toLowerCase(),At=vt.indexOf(bt),q=it;return At!==-1&&(q=vt[At+1]),{mainStroke:lt,mainFill:Ot,activeStroke:it,activeFill:wt,inactiveStroke:lt,inactiveFill:Ot,selectedStroke:it,selectedFill:Ot,highlightStroke:it,highlightFill:xt,disableStroke:ht,disableFill:Lt,edgeMainStroke:ft,edgeActiveStroke:it,edgeInactiveStroke:ft,edgeSelectedStroke:it,edgeHighlightStroke:it,edgeDisableStroke:Et,comboMainStroke:J,comboMainFill:Lt,comboActiveStroke:it,comboActiveFill:Vt,comboInactiveStroke:J,comboInactiveFill:Lt,comboSelectedStroke:it,comboSelectedFill:Vt,comboHighlightStroke:q,comboHighlightFill:Lt,comboDisableStroke:J,comboDisableFill:Vt}}(C,N,"#777")},v=function(C,N,X,tt){N===void 0&&(N="#fff"),X===void 0&&(X="default"),tt===void 0&&(tt="rgb(150, 150, 150)");var it=[];return C.forEach(function(pt){it.push(T(pt,N,X,tt))}),it}},function(a,A,e){"use strict";function r(n){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(n)}var p=e(42);a.exports=m;function m(n){this._isDirected=!p.has(n,"directed")||n.directed,this._isMultigraph=!!p.has(n,"multigraph")&&n.multigraph,this._isCompound=!!p.has(n,"compound")&&n.compound,this._label=void 0,this._defaultNodeLabelFn=p.constant(void 0),this._defaultEdgeLabelFn=p.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function O(n,s){n[s]?n[s]++:n[s]=1}function l(n,s){--n[s]||delete n[s]}function E(n,s,d,M){var S=""+s,T=""+d;if(!n&&S>T){var v=S;S=T,T=v}return S+""+T+""+(p.isUndefined(M)?"\0":M)}function j(n,s,d,M){var S=""+s,T=""+d;if(!n&&S>T){var v=S;S=T,T=v}var x={v:S,w:T};return M&&(x.name=M),x}function y(n,s){return E(n,s.v,s.w,s.name)}m.prototype._nodeCount=0,m.prototype._edgeCount=0,m.prototype.isDirected=function(){return this._isDirected},m.prototype.isMultigraph=function(){return this._isMultigraph},m.prototype.isCompound=function(){return this._isCompound},m.prototype.setGraph=function(n){return this._label=n,this},m.prototype.graph=function(){return this._label},m.prototype.setDefaultNodeLabel=function(n){return p.isFunction(n)||(n=p.constant(n)),this._defaultNodeLabelFn=n,this},m.prototype.nodeCount=function(){return this._nodeCount},m.prototype.nodes=function(){return p.keys(this._nodes)},m.prototype.sources=function(){var n=this;return p.filter(this.nodes(),function(s){return p.isEmpty(n._in[s])})},m.prototype.sinks=function(){var n=this;return p.filter(this.nodes(),function(s){return p.isEmpty(n._out[s])})},m.prototype.setNodes=function(n,s){var d=arguments,M=this;return p.each(n,function(S){d.length>1?M.setNode(S,s):M.setNode(S)}),this},m.prototype.setNode=function(n,s){return p.has(this._nodes,n)?(arguments.length>1&&(this._nodes[n]=s),this):(this._nodes[n]=arguments.length>1?s:this._defaultNodeLabelFn(n),this._isCompound&&(this._parent[n]="\0",this._children[n]={},this._children["\0"][n]=!0),this._in[n]={},this._preds[n]={},this._out[n]={},this._sucs[n]={},++this._nodeCount,this)},m.prototype.node=function(n){return this._nodes[n]},m.prototype.hasNode=function(n){return p.has(this._nodes,n)},m.prototype.removeNode=function(n){var s=this;if(p.has(this._nodes,n)){var d=function(S){s.removeEdge(s._edgeObjs[S])};delete this._nodes[n],this._isCompound&&(this._removeFromParentsChildList(n),delete this._parent[n],p.each(this.children(n),function(M){s.setParent(M)}),delete this._children[n]),p.each(p.keys(this._in[n]),d),delete this._in[n],delete this._preds[n],p.each(p.keys(this._out[n]),d),delete this._out[n],delete this._sucs[n],--this._nodeCount}return this},m.prototype.setParent=function(n,s){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(p.isUndefined(s))s="\0";else{for(var d=s+="";!p.isUndefined(d);d=this.parent(d))if(d===n)throw new Error("Setting "+s+" as parent of "+n+" would create a cycle");this.setNode(s)}return this.setNode(n),this._removeFromParentsChildList(n),this._parent[n]=s,this._children[s][n]=!0,this},m.prototype._removeFromParentsChildList=function(n){delete this._children[this._parent[n]][n]},m.prototype.parent=function(n){if(this._isCompound){var s=this._parent[n];if(s!=="\0")return s}},m.prototype.children=function(n){if(p.isUndefined(n)&&(n="\0"),this._isCompound){var s=this._children[n];if(s)return p.keys(s)}else{if(n==="\0")return this.nodes();if(this.hasNode(n))return[]}},m.prototype.predecessors=function(n){var s=this._preds[n];if(s)return p.keys(s)},m.prototype.successors=function(n){var s=this._sucs[n];if(s)return p.keys(s)},m.prototype.neighbors=function(n){var s=this.predecessors(n);if(s)return p.union(s,this.successors(n))},m.prototype.isLeaf=function(n){return(this.isDirected()?this.successors(n):this.neighbors(n)).length===0},m.prototype.filterNodes=function(n){var s=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});s.setGraph(this.graph());var d=this;p.each(this._nodes,function(S,T){n(T)&&s.setNode(T,S)}),p.each(this._edgeObjs,function(S){s.hasNode(S.v)&&s.hasNode(S.w)&&s.setEdge(S,d.edge(S))});var M={};return this._isCompound&&p.each(s.nodes(),function(S){s.setParent(S,function T(v){var x=d.parent(v);return x===void 0||s.hasNode(x)?(M[v]=x,x):x in M?M[x]:T(x)}(S))}),s},m.prototype.setDefaultEdgeLabel=function(n){return p.isFunction(n)||(n=p.constant(n)),this._defaultEdgeLabelFn=n,this},m.prototype.edgeCount=function(){return this._edgeCount},m.prototype.edges=function(){return p.values(this._edgeObjs)},m.prototype.setPath=function(n,s){var d=this,M=arguments;return p.reduce(n,function(S,T){return M.length>1?d.setEdge(S,T,s):d.setEdge(S,T),T}),this},m.prototype.setEdge=function(){var n,s,d,M,S=!1,T=arguments[0];r(T)==="object"&&T!==null&&"v"in T?(n=T.v,s=T.w,d=T.name,arguments.length===2&&(M=arguments[1],S=!0)):(n=T,s=arguments[1],d=arguments[3],arguments.length>2&&(M=arguments[2],S=!0)),n=""+n,s=""+s,p.isUndefined(d)||(d=""+d);var v=E(this._isDirected,n,s,d);if(p.has(this._edgeLabels,v))return S&&(this._edgeLabels[v]=M),this;if(!p.isUndefined(d)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(n),this.setNode(s),this._edgeLabels[v]=S?M:this._defaultEdgeLabelFn(n,s,d);var x=j(this._isDirected,n,s,d);return n=x.v,s=x.w,Object.freeze(x),this._edgeObjs[v]=x,O(this._preds[s],n),O(this._sucs[n],s),this._in[s][v]=x,this._out[n][v]=x,this._edgeCount++,this},m.prototype.edge=function(n,s,d){var M=arguments.length===1?y(this._isDirected,arguments[0]):E(this._isDirected,n,s,d);return this._edgeLabels[M]},m.prototype.hasEdge=function(n,s,d){var M=arguments.length===1?y(this._isDirected,arguments[0]):E(this._isDirected,n,s,d);return p.has(this._edgeLabels,M)},m.prototype.removeEdge=function(n,s,d){var M=arguments.length===1?y(this._isDirected,arguments[0]):E(this._isDirected,n,s,d),S=this._edgeObjs[M];return S&&(n=S.v,s=S.w,delete this._edgeLabels[M],delete this._edgeObjs[M],l(this._preds[s],n),l(this._sucs[n],s),delete this._in[s][M],delete this._out[n][M],this._edgeCount--),this},m.prototype.inEdges=function(n,s){var d=this._in[n];if(d){var M=p.values(d);return s?p.filter(M,function(S){return S.v===s}):M}},m.prototype.outEdges=function(n,s){var d=this._out[n];if(d){var M=p.values(d);return s?p.filter(M,function(S){return S.w===s}):M}},m.prototype.nodeEdges=function(n,s){var d=this.inEdges(n,s);if(d)return d.concat(this.outEdges(n,s))}},function(a,A,e){var r=e(64)(e(47),"Map");a.exports=r},function(a,A,e){var r=e(289),p=e(296),m=e(298),O=e(299),l=e(300);function E(j){var y=-1,n=j==null?0:j.length;for(this.clear();++y<n;){var s=j[y];this.set(s[0],s[1])}}E.prototype.clear=r,E.prototype.delete=p,E.prototype.get=m,E.prototype.has=O,E.prototype.set=l,a.exports=E},function(a,A){a.exports=function(e,r){for(var p=-1,m=e==null?0:e.length;++p<m&&r(e[p],p,e)!==!1;);return e}},function(a,A){a.exports=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991}},function(a,A,e){(function(r){function p(y){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(y)}var m=e(163),O=p(A)=="object"&&A&&!A.nodeType&&A,l=O&&p(r)=="object"&&r&&!r.nodeType&&r,E=l&&l.exports===O&&m.process,j=function(){try{var y=l&&l.require&&l.require("util").types;return y||E&&E.binding&&E.binding("util")}catch(n){}}();r.exports=j}).call(this,e(86)(a))},function(a,A,e){var r=e(104),p=e(306),m=Object.prototype.hasOwnProperty;a.exports=function(O){if(!r(O))return p(O);var l=[];for(var E in Object(O))m.call(O,E)&&E!="constructor"&&l.push(E);return l}},function(a,A,e){var r=e(171),p=e(172),m=Object.prototype.propertyIsEnumerable,O=Object.getOwnPropertySymbols,l=O?function(E){return E==null?[]:(E=Object(E),r(O(E),function(j){return m.call(E,j)}))}:p;a.exports=l},function(a,A){a.exports=function(e,r){for(var p=-1,m=r.length,O=e.length;++p<m;)e[O+p]=r[p];return e}},function(a,A,e){var r=e(177);a.exports=function(p){var m=new p.constructor(p.byteLength);return new r(m).set(new r(p)),m}},function(a,A){a.exports=function(e){return function(){return e}}},function(a,A,e){var r=e(136),p=e(58);a.exports=function(m,O){return m&&r(m,O,p)}},function(a,A,e){var r=e(325)();a.exports=r},function(a,A){a.exports=function(e){var r=-1,p=Array(e.size);return e.forEach(function(m){p[++r]=m}),p}},function(a,A,e){function r(E){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(E)}var p=e(26),m=e(75),O=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/;a.exports=function(E,j){if(p(E))return!1;var y=r(E);return!(y!="number"&&y!="symbol"&&y!="boolean"&&E!=null&&!m(E))||l.test(E)||!O.test(E)||j!=null&&E in Object(j)}},function(a,A,e){var r=e(132),p=e(359);a.exports=function m(O,l,E,j,y){var n=-1,s=O.length;for(E||(E=p),y||(y=[]);++n<s;){var d=O[n];l>0&&E(d)?l>1?m(d,l-1,E,j,y):r(y,d):j||(y[y.length]=d)}return y}},function(a,A,e){var r=e(75);a.exports=function(p,m,O){for(var l=-1,E=p.length;++l<E;){var j=p[l],y=m(j);if(y!=null&&(n===void 0?y==y&&!r(y):O(y,n)))var n=y,s=j}return s}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.BindingOnSyntax=void 0;var r=e(142),p=function(){function m(O){this._binding=O}return m.prototype.onActivation=function(O){return this._binding.onActivation=O,new r.BindingWhenSyntax(this._binding)},m}();A.BindingOnSyntax=p},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.BindingWhenSyntax=void 0;var r=e(141),p=e(225),m=function(){function O(l){this._binding=l}return O.prototype.when=function(l){return this._binding.constraint=l,new r.BindingOnSyntax(this._binding)},O.prototype.whenTargetNamed=function(l){return this._binding.constraint=p.namedConstraint(l),new r.BindingOnSyntax(this._binding)},O.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(l){return l.target!==null&&!l.target.isNamed()&&!l.target.isTagged()},new r.BindingOnSyntax(this._binding)},O.prototype.whenTargetTagged=function(l,E){return this._binding.constraint=p.taggedConstraint(l)(E),new r.BindingOnSyntax(this._binding)},O.prototype.whenInjectedInto=function(l){return this._binding.constraint=function(E){return p.typeConstraint(l)(E.parentRequest)},new r.BindingOnSyntax(this._binding)},O.prototype.whenParentNamed=function(l){return this._binding.constraint=function(E){return p.namedConstraint(l)(E.parentRequest)},new r.BindingOnSyntax(this._binding)},O.prototype.whenParentTagged=function(l,E){return this._binding.constraint=function(j){return p.taggedConstraint(l)(E)(j.parentRequest)},new r.BindingOnSyntax(this._binding)},O.prototype.whenAnyAncestorIs=function(l){return this._binding.constraint=function(E){return p.traverseAncerstors(E,p.typeConstraint(l))},new r.BindingOnSyntax(this._binding)},O.prototype.whenNoAncestorIs=function(l){return this._binding.constraint=function(E){return!p.traverseAncerstors(E,p.typeConstraint(l))},new r.BindingOnSyntax(this._binding)},O.prototype.whenAnyAncestorNamed=function(l){return this._binding.constraint=function(E){return p.traverseAncerstors(E,p.namedConstraint(l))},new r.BindingOnSyntax(this._binding)},O.prototype.whenNoAncestorNamed=function(l){return this._binding.constraint=function(E){return!p.traverseAncerstors(E,p.namedConstraint(l))},new r.BindingOnSyntax(this._binding)},O.prototype.whenAnyAncestorTagged=function(l,E){return this._binding.constraint=function(j){return p.traverseAncerstors(j,p.taggedConstraint(l)(E))},new r.BindingOnSyntax(this._binding)},O.prototype.whenNoAncestorTagged=function(l,E){return this._binding.constraint=function(j){return!p.traverseAncerstors(j,p.taggedConstraint(l)(E))},new r.BindingOnSyntax(this._binding)},O.prototype.whenAnyAncestorMatches=function(l){return this._binding.constraint=function(E){return p.traverseAncerstors(E,l)},new r.BindingOnSyntax(this._binding)},O.prototype.whenNoAncestorMatches=function(l){return this._binding.constraint=function(E){return!p.traverseAncerstors(E,l)},new r.BindingOnSyntax(this._binding)},O}();A.BindingWhenSyntax=m},function(a,A){},function(a,A){},function(a,A){},function(a,A){},function(a,A){},function(a,A){},function(a,A){},function(a,A){a.exports=function(e,r,p){return e[0]=r[0]-p[0],e[1]=r[1]-p[1],e}},function(a,A,e){var r=e(57),p=e(105),m=e(48),O=Function.prototype,l=Object.prototype,E=O.toString,j=l.hasOwnProperty,y=E.call(Object);a.exports=function(n){if(!m(n)||r(n)!="[object Object]")return!1;var s=p(n);if(s===null)return!0;var d=j.call(s,"constructor")&&s.constructor;return typeof d=="function"&&d instanceof d&&E.call(d)==y}},function(a,A,e){"use strict";var r=e(1),p=e(155),m=e.n(p),O=e(0),l=e(38),E=e(91),j=l.a.radialLayout,y=l.a.traverseTree,n=function(s){function d(M){var S=s.call(this,M)||this;return S.layoutAnimating=!1,S.set("removeList",[]),S.set("layoutMethod",S.getLayout()),S}return Object(r.b)(d,s),d.prototype.getLayout=function(){var M=this.get("layout");return M?typeof M=="function"?M:(M.type||(M.type="dendrogram"),M.direction||(M.direction="TB"),M.radial?function(S){var T=m.a[M.type](S,M);return j(T),T}:function(S){return m.a[M.type](S,M)}):null},d.indexOfChild=function(M,S){var T=-1;return Object(O.f)(M,function(v,x){if(S===v.id)return T=x,!1}),T},d.prototype.getDefaultCfg=function(){var M=s.prototype.getDefaultCfg.call(this);return M.animate=!0,M},d.prototype.innerAddChild=function(M,S,T){var v=this,x=M.data;x&&(x.x=M.x,x.y=M.y,x.depth=M.depth);var C=v.addItem("node",x,!1);if(S){if(C.set("parent",S),T){var N=S.get("originAttrs");if(N)C.set("originAttrs",N);else{var X=S.getModel();C.set("originAttrs",{x:X.x,y:X.y})}}var tt=S.get("children");tt?tt.push(C):S.set("children",[C]),v.addItem("edge",{source:S,target:C,id:S.get("id")+":"+C.get("id")},!1)}return Object(O.f)(M.children||[],function(it){v.innerAddChild(it,C,T)}),v.emit("afteraddchild",{item:C,parent:S}),C},d.prototype.innerUpdateChild=function(M,S,T){var v=this,x=v.findById(M.id);if(x){Object(O.f)(M.children||[],function(ft){v.innerUpdateChild(ft,x,T)});var C,N,X=x.get("children");if(X&&X.length>0)for(var tt=X.length-1;tt>=0;tt--){var it=X[tt].getModel();d.indexOfChild(M.children||[],it.id)===-1&&(v.innerRemoveChild(it.id,{x:M.x,y:M.y},T),X.splice(tt,1))}x.get("originAttrs")&&(C=x.get("originAttrs").x,N=x.get("originAttrs").y);var pt=x.getModel();T&&x.set("originAttrs",{x:pt.x,y:pt.y}),x.set("model",M.data),C===M.x&&N===M.y||x.updatePosition({x:M.x,y:M.y})}else v.innerAddChild(M,S,T)},d.prototype.innerRemoveChild=function(M,S,T){var v=this,x=v.findById(M);if(x)if(Object(O.f)(x.get("children"),function(N){v.innerRemoveChild(N.getModel().id,S,T)}),T){var C=x.getModel();x.set("to",S),x.set("originAttrs",{x:C.x,y:C.y}),v.get("removeList").push(x)}else v.removeItem(x)},d.prototype.changeData=function(M){var S=this;this.getNodes().map(function(T){return S.clearItemStates(T)}),this.getEdges().map(function(T){return S.clearItemStates(T)}),M?(S.data(M),S.render()):S.layout(this.get("fitView"))},d.prototype.changeLayout=function(M){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon"),this.updateLayout(M)},d.prototype.updateLayout=function(M){M?(this.set("layout",M),this.set("layoutMethod",this.getLayout()),this.layout()):console.warn("layout cannot be null")},d.prototype.refreshLayout=function(M){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon"),this.layout(M)},d.prototype.layout=function(M){var S=this.get("data"),T=this.get("layoutMethod")(S,this.get("layout")),v=this.get("animate");this.emit("beforerefreshlayout",{data:S,layoutData:T}),this.emit("beforelayout"),this.innerUpdateChild(T,void 0,v),M&&this.get("viewController").fitView(),v?this.layoutAnimate(T):(this.refresh(),this.paint()),this.emit("afterrefreshlayout",{data:S,layoutData:T}),this.emit("afterlayout")},d.prototype.addChild=function(M,S){this.emit("beforeaddchild",{model:M,parent:S}),Object(O.x)(S)||(S=S.get("id"));var T=this.findDataById(S);T&&(T.children||(T.children=[]),T.children.push(M),this.changeData())},d.prototype.updateChildren=function(M,S){S&&this.findById(S)?(this.findDataById(S).children=M,this.changeData()):console.warn("Update children failed! There is no node with id '"+S+"'")},d.prototype.updateChild=function(M,S){if(S&&this.findById(S)){var T=this.findDataById(S),v=this.findById(M.id);if(T.children||(T.children=[]),v){var x=d.indexOfChild(T.children,M.id);T.children[x]=M}else T.children.push(M);this.changeData()}else this.changeData(M)},d.prototype.removeChild=function(M){var S=this.findById(M);if(S){var T=S.get("parent");if(T&&!T.destroyed){var v=this.findDataById(T.get("id")),x=v&&v.children||[],C=S.getModel(),N=d.indexOfChild(x,C.id);x.splice(N,1)}this.changeData()}},d.prototype.findDataById=function(M,S){var T=this;if(S||(S=T.get("data")),M===S.id)return S;var v=null;return Object(O.f)(S.children||[],function(x){return x.id===M?(v=x,!1):!(v=T.findDataById(M,x))&&void 0}),v},d.prototype.layoutAnimate=function(M,S){var T=this,v=this.get("animateCfg");T.emit("beforeanimate",{data:M}),T.getEdges().forEach(function(x){var C=x.get("model");C.sourceAnchor||(C.sourceAnchor=x.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(x){y(M,function(C){var N=T.findById(C.id);if(N){var X=N.get("originAttrs"),tt=N.get("model");if(X||(X={x:tt.x,y:tt.y},N.set("originAttrs",X)),S){var it=S(N,x,X,M);N.set("model",Object.assign(tt,it))}else tt.x=X.x+(C.x-X.x)*x,tt.y=X.y+(C.y-X.y)*x}return!0}),Object(O.f)(T.get("removeList"),function(C){var N=C.getModel(),X=C.get("originAttrs"),tt=C.get("to");N.x=X.x+(tt.x-X.x)*x,N.y=X.y+(tt.y-X.y)*x}),T.refreshPositions()},{duration:v.duration,easing:v.ease,callback:function(){Object(O.f)(T.getNodes(),function(C){C.set("originAttrs",null)}),Object(O.f)(T.get("removeList"),function(C){T.removeItem(C)}),T.set("removeList",[]),v.callback&&v.callback(),T.emit("afteranimate",{data:M})},delay:v.delay})},d.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},d.prototype.isLayoutAnimating=function(){return this.layoutAnimating},d.prototype.render=function(){if(!this.get("data"))throw new Error("data must be defined first");this.clear(),this.emit("beforerender"),this.layout(this.get("fitView")),this.emit("afterrender")},d.prototype.save=function(){return this.get("data")},d}(E.a);A.a=n},function(a,A,e){a.exports={graphlib:e(46),layout:e(382),debug:e(440),util:{time:e(37).time,notime:e(37).notime},version:e(441)}},function(a,A,e){"use strict";var r=Object.prototype.hasOwnProperty,p="~";function m(){}function O(y,n,s){this.fn=y,this.context=n,this.once=s||!1}function l(y,n,s,d,M){if(typeof s!="function")throw new TypeError("The listener must be a function");var S=new O(s,d||y,M),T=p?p+n:n;return y._events[T]?y._events[T].fn?y._events[T]=[y._events[T],S]:y._events[T].push(S):(y._events[T]=S,y._eventsCount++),y}function E(y,n){--y._eventsCount==0?y._events=new m:delete y._events[n]}function j(){this._events=new m,this._eventsCount=0}Object.create&&(m.prototype=Object.create(null),new m().__proto__||(p=!1)),j.prototype.eventNames=function(){var y,n,s=[];if(this._eventsCount===0)return s;for(n in y=this._events)r.call(y,n)&&s.push(p?n.slice(1):n);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(y)):s},j.prototype.listeners=function(y){var n=p?p+y:y,s=this._events[n];if(!s)return[];if(s.fn)return[s.fn];for(var d=0,M=s.length,S=new Array(M);d<M;d++)S[d]=s[d].fn;return S},j.prototype.listenerCount=function(y){var n=p?p+y:y,s=this._events[n];return s?s.fn?1:s.length:0},j.prototype.emit=function(y,n,s,d,M,S){var T=p?p+y:y;if(!this._events[T])return!1;var v,x,C=this._events[T],N=arguments.length;if(C.fn){switch(C.once&&this.removeListener(y,C.fn,void 0,!0),N){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,n),!0;case 3:return C.fn.call(C.context,n,s),!0;case 4:return C.fn.call(C.context,n,s,d),!0;case 5:return C.fn.call(C.context,n,s,d,M),!0;case 6:return C.fn.call(C.context,n,s,d,M,S),!0}for(x=1,v=new Array(N-1);x<N;x++)v[x-1]=arguments[x];C.fn.apply(C.context,v)}else{var X,tt=C.length;for(x=0;x<tt;x++)switch(C[x].once&&this.removeListener(y,C[x].fn,void 0,!0),N){case 1:C[x].fn.call(C[x].context);break;case 2:C[x].fn.call(C[x].context,n);break;case 3:C[x].fn.call(C[x].context,n,s);break;case 4:C[x].fn.call(C[x].context,n,s,d);break;default:if(!v)for(X=1,v=new Array(N-1);X<N;X++)v[X-1]=arguments[X];C[x].fn.apply(C[x].context,v)}}return!0},j.prototype.on=function(y,n,s){return l(this,y,n,s,!1)},j.prototype.once=function(y,n,s){return l(this,y,n,s,!0)},j.prototype.removeListener=function(y,n,s,d){var M=p?p+y:y;if(!this._events[M])return this;if(!n)return E(this,M),this;var S=this._events[M];if(S.fn)S.fn!==n||d&&!S.once||s&&S.context!==s||E(this,M);else{for(var T=0,v=[],x=S.length;T<x;T++)(S[T].fn!==n||d&&!S[T].once||s&&S[T].context!==s)&&v.push(S[T]);v.length?this._events[M]=v.length===1?v[0]:v:E(this,M)}return this},j.prototype.removeAllListeners=function(y){var n;return y?(n=p?p+y:y,this._events[n]&&E(this,n)):(this._events=new m,this._eventsCount=0),this},j.prototype.off=j.prototype.removeListener,j.prototype.addListener=j.prototype.on,j.prefixed=p,j.EventEmitter=j,a.exports=j},function(a,A,e){(function(r){var p,m,O,l;function E(j){return(E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(j)}typeof self!="undefined"&&self,l=function(){return function(y){var n={};function s(d){if(n[d])return n[d].exports;var M=n[d]={i:d,l:!1,exports:{}};return y[d].call(M.exports,M,M.exports,s),M.l=!0,M.exports}return s.m=y,s.c=n,s.d=function(d,M,S){s.o(d,M)||Object.defineProperty(d,M,{configurable:!1,enumerable:!0,get:S})},s.n=function(d){var M=d&&d.__esModule?function(){return d.default}:function(){return d};return s.d(M,"a",M),M},s.o=function(d,M){return Object.prototype.hasOwnProperty.call(d,M)},s.p="",s(s.s=31)}([function(y,n,s){"use strict";var d=s(4);n.a=function(M){return Array.isArray?Array.isArray(M):Object(d.a)(M,"Array")}},function(y,n,s){"use strict";n.a=function(d){return d!==null&&typeof d!="function"&&isFinite(d.length)}},function(y,n,s){"use strict";var d=s(0),M=s(13);n.a=function(S,T){if(S){if(Object(d.a)(S))for(var v=0,x=S.length;v<x&&T(S[v],v)!==!1;v++);else if(Object(M.a)(S)){for(var C in S)if(S.hasOwnProperty(C)&&T(S[C],C)===!1)break}}}},function(y,n,s){"use strict";var d=s(4);n.a=function(M){return Object(d.a)(M,"Function")}},function(y,n,s){"use strict";var d={}.toString;n.a=function(M,S){return d.call(M)==="[object "+S+"]"}},function(y,n,s){"use strict";var d=s(4);n.a=function(M){return Object(d.a)(M,"Number")}},function(y,n,s){"use strict";n.a=function(d){return d==null}},function(y,n,s){var d=s(33).mix;y.exports={assign:d}},function(y,n,s){"use strict";var d=s(4);n.a=function(M){return Object(d.a)(M,"String")}},function(y,n,s){"use strict";var d=s(15),M=s(4);n.a=function(S){if(!Object(d.a)(S)||!Object(M.a)(S,"Object"))return!1;if(Object.getPrototypeOf(S)===null)return!0;for(var T=S;Object.getPrototypeOf(T)!==null;)T=Object.getPrototypeOf(T);return Object.getPrototypeOf(S)===T}},function(y,n,s){"use strict";var d=s(6);n.a=function(M){return Object(d.a)(M)?"":M.toString()}},function(y,n,s){var d=s(18),M=function(){function S(T,v){v===void 0&&(v={}),this.options=v,this.rootNode=d(T,v)}return S.prototype.execute=function(){throw new Error("please override this method")},S}();y.exports=M},function(y,n,s){"use strict";var d=s(1);n.a=function(M,S){return!!Object(d.a)(M)&&M.indexOf(S)>-1}},function(y,n,s){"use strict";n.a=function(d){var M=E(d);return d!==null&&M==="object"||M==="function"}},function(y,n,s){"use strict";var d=s(2),M=s(1);n.a=function(S,T){if(!Object(M.a)(S))return S;var v=[];return Object(d.a)(S,function(x,C){T(x,C)&&v.push(x)}),v}},function(y,n,s){"use strict";n.a=function(d){return E(d)==="object"&&d!==null}},function(y,n,s){"use strict";function d(M,S){for(var T in S)S.hasOwnProperty(T)&&T!=="constructor"&&S[T]!==void 0&&(M[T]=S[T])}n.a=function(M,S,T,v){return S&&d(M,S),T&&d(M,T),v&&d(M,v),M}},function(y,n,s){var d=s(30),M=["LR","RL","TB","BT","H","V"],S=["LR","RL","H"],T=M[0];y.exports=function(v,x,C){var N=x.direction||T;if(x.isHorizontal=function(Ot){return S.indexOf(Ot)>-1}(N),N&&M.indexOf(N)===-1)throw new TypeError("Invalid direction: "+N);if(N===M[0])C(v,x);else if(N===M[1])C(v,x),v.right2left();else if(N===M[2])C(v,x);else if(N===M[3])C(v,x),v.bottom2top();else if(N===M[4]||N===M[5]){var X=d(v,x),tt=X.left,it=X.right;C(tt,x),C(it,x),x.isHorizontal?tt.right2left():tt.bottom2top(),it.translate(tt.x-it.x,tt.y-it.y),v.x=tt.x,v.y=it.y;var pt=v.getBoundingBox();x.isHorizontal?pt.top<0&&v.translate(0,-pt.top):pt.left<0&&v.translate(-pt.left,0)}var ft=x.fixedRoot;return ft===void 0&&(ft=!0),ft&&v.translate(-(v.x+v.width/2+v.hgap),-(v.y+v.height/2+v.vgap)),v}},function(y,n,s){var d=s(7),M={getId:function(v){return v.id||v.name},getHGap:function(v){return v.hgap||18},getVGap:function(v){return v.vgap||18},getChildren:function(v){return v.children},getHeight:function(v){return v.height||36},getWidth:function(v){var x=v.label||" ";return v.width||18*x.split("").length}};function S(T,v){var x=this;if(x.vgap=x.hgap=0,T instanceof S)return T;x.data=T;var C=v.getHGap(T),N=v.getVGap(T);return x.width=v.getWidth(T),x.height=v.getHeight(T),x.id=v.getId(T),x.x=x.y=0,x.depth=0,x.children||(x.children=[]),x.addGap(C,N),x}d.assign(S.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(v,x){this.hgap+=v,this.vgap+=x,this.width+=2*v,this.height+=2*x},eachNode:function(v){for(var x,C=[this];x=C.shift();)v(x),C=x.children.concat(C)},DFTraverse:function(v){this.eachNode(v)},BFTraverse:function(v){for(var x,C=[this];x=C.shift();)v(x),C=C.concat(x.children)},getBoundingBox:function(){var v={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(x){v.left=Math.min(v.left,x.x),v.top=Math.min(v.top,x.y),v.width=Math.max(v.width,x.x+x.width),v.height=Math.max(v.height,x.y+x.height)}),v},translate:function(v,x){v===void 0&&(v=0),x===void 0&&(x=0),this.eachNode(function(C){C.x+=v,C.y+=x})},right2left:function(){var v=this.getBoundingBox();this.eachNode(function(x){x.x=x.x-2*(x.x-v.left)-x.width}),this.translate(v.width,0)},bottom2top:function(){var v=this.getBoundingBox();this.eachNode(function(x){x.y=x.y-2*(x.y-v.top)-x.height}),this.translate(0,v.height)}}),y.exports=function(T,v,x){v===void 0&&(v={});var C,N=new S(T,v=d.assign({},M,v)),X=[N];if(!x&&!T.collapsed){for(;C=X.shift();)if(!C.data.collapsed){var tt=v.getChildren(C.data),it=tt?tt.length:0;if(C.children=new Array(it),tt&&it)for(var pt=0;pt<it;pt++){var ft=new S(tt[pt],v);C.children[pt]=ft,X.push(ft),ft.parent=C,ft.depth=C.depth+1}}}return N}},function(y,n,s){"use strict";var d=s(6),M=s(20);n.a=function(S,T){var v=Object(M.a)(T),x=v.length;if(Object(d.a)(S))return!x;for(var C=0;C<x;C+=1){var N=v[C];if(T[N]!==S[N]||!(N in S))return!1}return!0}},function(y,n,s){"use strict";var d=s(2),M=s(3),S=Object.keys?function(T){return Object.keys(T)}:function(T){var v=[];return Object(d.a)(T,function(x,C){Object(M.a)(T)&&C==="prototype"||v.push(C)}),v};n.a=S},function(y,n,s){"use strict";var d=s(1),M=Array.prototype.splice;n.a=function(S,T){if(!Object(d.a)(S))return[];for(var v=S?T.length:0,x=v-1;v--;){var C=void 0,N=T[v];v!==x&&N===C||(C=N,M.call(S,N,1))}return S}},function(y,n,s){"use strict";var d=s(12),M=s(2);n.a=function(S){var T=[];return Object(M.a)(S,function(v){Object(d.a)(T,v)||T.push(v)}),T}},function(y,n,s){"use strict";var d=s(0),M=s(3),S=s(24);n.a=function(T,v){if(!v)return{0:T};if(!Object(M.a)(v)){var x=Object(d.a)(v)?v:v.replace(/\s+/g,"").split("*");v=function(N){for(var X="_",tt=0,it=x.length;tt<it;tt++)X+=N[x[tt]]&&N[x[tt]].toString();return X}}return Object(S.a)(T,v)}},function(y,n,s){"use strict";var d=s(2),M=s(0),S=s(3),T=Object.prototype.hasOwnProperty;n.a=function(v,x){if(!x||!Object(M.a)(v))return{};var C,N={},X=Object(S.a)(x)?x:function(tt){return tt[x]};return Object(d.a)(v,function(tt){C=X(tt),T.call(N,C)?N[C].push(tt):N[C]=[tt]}),N}},function(y,n,s){"use strict";n.a=function(d,M){return d.hasOwnProperty(M)}},function(y,n,s){"use strict";var d=s(2),M=s(3),S=Object.values?function(T){return Object.values(T)}:function(T){var v=[];return Object(d.a)(T,function(x,C){Object(M.a)(T)&&C==="prototype"||v.push(x)}),v};n.a=S},function(y,n,s){"use strict";var d={}.toString;n.a=function(M){return d.call(M).replace(/^\[object /,"").replace(/]$/,"")}},function(y,n,s){"use strict";var d=Object.prototype;n.a=function(M){var S=M&&M.constructor;return M===(typeof S=="function"&&S.prototype||d)}},function(y,n,s){"use strict";var d=s(15),M=s(1),S=s(8);n.a=function T(v,x){if(v===x)return!0;if(!v||!x||Object(S.a)(v)||Object(S.a)(x))return!1;if(Object(M.a)(v)||Object(M.a)(x)){if(v.length!==x.length)return!1;for(var C=!0,N=0;N<v.length&&(C=T(v[N],x[N]));N++);return C}if(Object(d.a)(v)||Object(d.a)(x)){var X=Object.keys(v),tt=Object.keys(x);if(X.length!==tt.length)return!1;for(C=!0,N=0;N<X.length&&(C=T(v[X[N]],x[X[N]]));N++);return C}return!1}},function(y,n,s){var d=s(18);y.exports=function(M,S){for(var T=d(M.data,S,!0),v=d(M.data,S,!0),x=M.children.length,C=Math.round(x/2),N=S.getSide||function(it,pt){return pt<C?"right":"left"},X=0;X<x;X++){var tt=M.children[X];N(tt,X)==="right"?v.children.push(tt):T.children.push(tt)}return T.eachNode(function(it){it.isRoot()||(it.side="left")}),v.eachNode(function(it){it.isRoot()||(it.side="right")}),{left:T,right:v}}},function(y,n,s){var d={compactBox:s(32),dendrogram:s(114),indented:s(116),mindmap:s(118)};y.exports=d},function(y,n,s){var d=s(11),M=s(113),S=s(17),T=s(7),v=function(C){var N,X;function tt(){return C.apply(this,arguments)||this}return X=C,(N=tt).prototype=Object.create(X.prototype),N.prototype.constructor=N,N.__proto__=X,tt.prototype.execute=function(){return S(this.rootNode,this.options,M)},tt}(d),x={};y.exports=function(C,N){return N=T.assign({},x,N),new v(C,N).execute()}},function(y,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var d=s(12);s.d(n,"contains",function(){return d.a}),s.d(n,"includes",function(){return d.a});var M=s(34);s.d(n,"difference",function(){return M.a});var S=s(35);s.d(n,"find",function(){return S.a});var T=s(36);s.d(n,"findIndex",function(){return T.a});var v=s(37);s.d(n,"firstValue",function(){return v.a});var x=s(38);s.d(n,"flatten",function(){return x.a});var C=s(39);s.d(n,"flattenDeep",function(){return C.a});var N=s(40);s.d(n,"getRange",function(){return N.a});var X=s(41);s.d(n,"pull",function(){return X.a});var tt=s(21);s.d(n,"pullAt",function(){return tt.a});var it=s(42);s.d(n,"reduce",function(){return it.a});var pt=s(43);s.d(n,"remove",function(){return pt.a});var ft=s(44);s.d(n,"sortBy",function(){return ft.a});var Ot=s(45);s.d(n,"union",function(){return Ot.a});var wt=s(22);s.d(n,"uniq",function(){return wt.a});var xt=s(46);s.d(n,"valuesOfKey",function(){return xt.a});var lt=s(47);s.d(n,"head",function(){return lt.a});var Vt=s(48);s.d(n,"last",function(){return Vt.a});var Lt=s(49);s.d(n,"startsWith",function(){return Lt.a});var Et=s(50);s.d(n,"endsWith",function(){return Et.a});var J=s(14);s.d(n,"filter",function(){return J.a});var ht=s(51);s.d(n,"every",function(){return ht.a});var vt=s(52);s.d(n,"some",function(){return vt.a});var bt=s(53);s.d(n,"group",function(){return bt.a});var At=s(24);s.d(n,"groupBy",function(){return At.a});var q=s(23);s.d(n,"groupToMap",function(){return q.a});var ct=s(54);s.d(n,"getWrapBehavior",function(){return ct.a});var ot=s(55);s.d(n,"wrapBehavior",function(){return ot.a});var _=s(56);s.d(n,"number2color",function(){return _.a});var P=s(57);s.d(n,"parseRadius",function(){return P.a});var Y=s(58);s.d(n,"clamp",function(){return Y.a});var k=s(59);s.d(n,"fixedBase",function(){return k.a});var h=s(60);s.d(n,"isDecimal",function(){return h.a});var g=s(61);s.d(n,"isEven",function(){return g.a});var F=s(62);s.d(n,"isInteger",function(){return F.a});var V=s(63);s.d(n,"isNegative",function(){return V.a});var H=s(64);s.d(n,"isNumberEqual",function(){return H.a});var et=s(65);s.d(n,"isOdd",function(){return et.a});var nt=s(66);s.d(n,"isPositive",function(){return nt.a});var St=s(67);s.d(n,"maxBy",function(){return St.a});var dt=s(68);s.d(n,"minBy",function(){return dt.a});var gt=s(69);s.d(n,"mod",function(){return gt.a});var yt=s(70);s.d(n,"toDegree",function(){return yt.a});var Ct=s(71);s.d(n,"toInteger",function(){return Ct.a});var Pt=s(72);s.d(n,"toRadian",function(){return Pt.a});var Ft=s(73);s.d(n,"forIn",function(){return Ft.a});var Tt=s(25);s.d(n,"has",function(){return Tt.a});var zt=s(74);s.d(n,"hasKey",function(){return zt.a});var Xt=s(75);s.d(n,"hasValue",function(){return Xt.a});var re=s(20);s.d(n,"keys",function(){return re.a});var de=s(19);s.d(n,"isMatch",function(){return de.a});var ye=s(26);s.d(n,"values",function(){return ye.a});var we=s(76);s.d(n,"lowerCase",function(){return we.a});var De=s(77);s.d(n,"lowerFirst",function(){return De.a});var Ve=s(78);s.d(n,"substitute",function(){return Ve.a});var pn=s(79);s.d(n,"upperCase",function(){return pn.a});var sn=s(80);s.d(n,"upperFirst",function(){return sn.a});var In=s(27);s.d(n,"getType",function(){return In.a});var An=s(81);s.d(n,"isArguments",function(){return An.a});var Rn=s(0);s.d(n,"isArray",function(){return Rn.a});var Mn=s(1);s.d(n,"isArrayLike",function(){return Mn.a});var Cn=s(82);s.d(n,"isBoolean",function(){return Cn.a});var Gn=s(83);s.d(n,"isDate",function(){return Gn.a});var Xn=s(84);s.d(n,"isError",function(){return Xn.a});var tr=s(3);s.d(n,"isFunction",function(){return tr.a});var or=s(85);s.d(n,"isFinite",function(){return or.a});var nr=s(6);s.d(n,"isNil",function(){return nr.a});var er=s(86);s.d(n,"isNull",function(){return er.a});var Sr=s(5);s.d(n,"isNumber",function(){return Sr.a});var Vr=s(13);s.d(n,"isObject",function(){return Vr.a});var ti=s(15);s.d(n,"isObjectLike",function(){return ti.a});var hi=s(9);s.d(n,"isPlainObject",function(){return hi.a});var Fi=s(28);s.d(n,"isPrototype",function(){return Fi.a});var to=s(87);s.d(n,"isRegExp",function(){return to.a});var si=s(8);s.d(n,"isString",function(){return si.a});var Ti=s(4);s.d(n,"isType",function(){return Ti.a});var Ui=s(88);s.d(n,"isUndefined",function(){return Ui.a});var Li=s(89);s.d(n,"isElement",function(){return Li.a});var Vi=s(90);s.d(n,"requestAnimationFrame",function(){return Vi.a});var ro=s(91);s.d(n,"clearAnimationFrame",function(){return ro.a});var jr=s(92);s.d(n,"augment",function(){return jr.a});var Ji=s(93);s.d(n,"clone",function(){return Ji.a});var pr=s(94);s.d(n,"debounce",function(){return pr.a});var Xr=s(95);s.d(n,"memoize",function(){return Xr.a});var Br=s(96);s.d(n,"deepMix",function(){return Br.a});var Nr=s(2);s.d(n,"each",function(){return Nr.a});var Yr=s(97);s.d(n,"extend",function(){return Yr.a});var Kr=s(98);s.d(n,"indexOf",function(){return Kr.a});var ni=s(99);s.d(n,"isEmpty",function(){return ni.a});var fi=s(29);s.d(n,"isEqual",function(){return fi.a});var $r=s(100);s.d(n,"isEqualWith",function(){return $r.a});var ci=s(101);s.d(n,"map",function(){return ci.a});var Qr=s(102);s.d(n,"mapValues",function(){return Qr.a});var gi=s(16);s.d(n,"mix",function(){return gi.a}),s.d(n,"assign",function(){return gi.a});var Oi=s(103);s.d(n,"get",function(){return Oi.a});var bi=s(104);s.d(n,"set",function(){return bi.a});var _i=s(105);s.d(n,"pick",function(){return _i.a});var Qi=s(106);s.d(n,"throttle",function(){return Qi.a});var io=s(107);s.d(n,"toArray",function(){return io.a});var Wi=s(10);s.d(n,"toString",function(){return Wi.a});var Zi=s(108);s.d(n,"uniqueId",function(){return Zi.a});var Pi=s(109);s.d(n,"noop",function(){return Pi.a});var no=s(110);s.d(n,"identity",function(){return no.a});var Mo=s(111);s.d(n,"size",function(){return Mo.a});var ao=s(112);s.d(n,"Cache",function(){return ao.a})},function(y,n,s){"use strict";var d=s(14),M=s(12);n.a=function(S,T){return T===void 0&&(T=[]),Object(d.a)(S,function(v){return!Object(M.a)(T,v)})}},function(y,n,s){"use strict";var d=s(3),M=s(19),S=s(0),T=s(9);n.a=function(v,x){if(!Object(S.a)(v))return null;var C;if(Object(d.a)(x)&&(C=x),Object(T.a)(x)&&(C=function(tt){return Object(M.a)(tt,x)}),C){for(var N=0;N<v.length;N+=1)if(C(v[N]))return v[N]}return null}},function(y,n,s){"use strict";n.a=function(d,M,S){S===void 0&&(S=0);for(var T=S;T<d.length;T++)if(M(d[T],T))return T;return-1}},function(y,n,s){"use strict";var d=s(6),M=s(0);n.a=function(S,T){for(var v=null,x=0;x<S.length;x++){var C=S[x][T];if(!Object(d.a)(C)){v=Object(M.a)(C)?C[0]:C;break}}return v}},function(y,n,s){"use strict";var d=s(0);n.a=function(M){if(!Object(d.a)(M))return[];for(var S=[],T=0;T<M.length;T++)S=S.concat(M[T]);return S}},function(y,n,s){"use strict";var d=s(0);n.a=function M(S,T){if(T===void 0&&(T=[]),Object(d.a)(S))for(var v=0;v<S.length;v+=1)M(S[v],T);else T.push(S);return T}},function(y,n,s){"use strict";var d=s(0),M=s(14);n.a=function(S){if(!(S=Object(M.a)(S,function(C){return!isNaN(C)})).length)return{min:0,max:0};if(Object(d.a)(S[0])){for(var T=[],v=0;v<S.length;v++)T=T.concat(S[v]);S=T}var x=Math.max.apply(null,S);return{min:Math.min.apply(null,S),max:x}}},function(y,n,s){"use strict";var d=Array.prototype,M=d.splice,S=d.indexOf;n.a=function(T){for(var v=[],x=1;x<arguments.length;x++)v[x-1]=arguments[x];for(var C=0;C<v.length;C++)for(var N=v[C],X=-1;(X=S.call(T,N))>-1;)M.call(T,X,1);return T}},function(y,n,s){"use strict";var d=s(2),M=s(0),S=s(9);n.a=function(T,v,x){if(!Object(M.a)(T)&&!Object(S.a)(T))return T;var C=x;return Object(d.a)(T,function(N,X){C=v(C,N,X)}),C}},function(y,n,s){"use strict";var d=s(1),M=s(21);n.a=function(S,T){var v=[];if(!Object(d.a)(S))return v;for(var x=-1,C=[],N=S.length;++x<N;){var X=S[x];T(X,x,S)&&(v.push(X),C.push(x))}return Object(M.a)(S,C),v}},function(y,n,s){"use strict";var d=s(0),M=s(8),S=s(3);n.a=function(T,v){var x;if(Object(S.a)(v))x=function(X,tt){return v(X)-v(tt)};else{var C=[];Object(M.a)(v)?C.push(v):Object(d.a)(v)&&(C=v),x=function(X,tt){for(var it=0;it<C.length;it+=1){var pt=C[it];if(X[pt]>tt[pt])return 1;if(X[pt]<tt[pt])return-1}return 0}}return T.sort(x),T}},function(y,n,s){"use strict";var d=s(22);n.a=function(){for(var M=[],S=0;S<arguments.length;S++)M[S]=arguments[S];return Object(d.a)([].concat.apply([],M))}},function(y,n,s){"use strict";var d=s(2),M=s(0),S=s(6);n.a=function(T,v){var x=[],C={};return T.forEach(function(N){var X=N[v];Object(S.a)(X)||(Object(M.a)(X)||(X=[X]),Object(d.a)(X,function(tt){C[tt]||(x.push(tt),C[tt]=!0)}))}),x}},function(y,n,s){"use strict";n.a=function(M){if(Object(d.a)(M))return M[0]};var d=s(1)},function(y,n,s){"use strict";n.a=function(M){if(Object(d.a)(M))return M[M.length-1]};var d=s(1)},function(y,n,s){"use strict";var d=s(0),M=s(8);n.a=function(S,T){return!(!Object(d.a)(S)&&!Object(M.a)(S))&&S[0]===T}},function(y,n,s){"use strict";var d=s(0),M=s(8);n.a=function(S,T){return!(!Object(d.a)(S)&&!Object(M.a)(S))&&S[S.length-1]===T}},function(y,n,s){"use strict";n.a=function(d,M){for(var S=0;S<d.length;S++)if(!M(d[S],S))return!1;return!0}},function(y,n,s){"use strict";n.a=function(d,M){for(var S=0;S<d.length;S++)if(M(d[S],S))return!0;return!1}},function(y,n,s){"use strict";var d=s(23);n.a=function(M,S){if(!S)return[M];var T=Object(d.a)(M,S),v=[];for(var x in T)v.push(T[x]);return v}},function(y,n,s){"use strict";n.a=function(d,M){return d["_wrap_"+M]}},function(y,n,s){"use strict";n.a=function(d,M){if(d["_wrap_"+M])return d["_wrap_"+M];var S=function(v){d[M](v)};return d["_wrap_"+M]=S,S}},function(y,n,s){"use strict";var d={};n.a=function(M){var S=d[M];if(!S){for(var T=M.toString(16),v=T.length;v<6;v++)T="0"+T;S="#"+T,d[M]=S}return S}},function(y,n,s){"use strict";var d=s(0);n.a=function(M){var S=0,T=0,v=0,x=0;return Object(d.a)(M)?M.length===1?S=T=v=x=M[0]:M.length===2?(S=v=M[0],T=x=M[1]):M.length===3?(S=M[0],T=x=M[1],v=M[2]):(S=M[0],T=M[1],v=M[2],x=M[3]):S=T=v=x=M,{r1:S,r2:T,r3:v,r4:x}}},function(y,n,s){"use strict";n.a=function(d,M,S){return d<M?M:d>S?S:d}},function(y,n,s){"use strict";n.a=function(d,M){var S=M.toString(),T=S.indexOf(".");if(T===-1)return Math.round(d);var v=S.substr(T+1).length;return v>20&&(v=20),parseFloat(d.toFixed(v))}},function(y,n,s){"use strict";var d=s(5);n.a=function(M){return Object(d.a)(M)&&M%1!=0}},function(y,n,s){"use strict";var d=s(5);n.a=function(M){return Object(d.a)(M)&&M%2==0}},function(y,n,s){"use strict";var d=s(5),M=Number.isInteger?Number.isInteger:function(S){return Object(d.a)(S)&&S%1==0};n.a=M},function(y,n,s){"use strict";var d=s(5);n.a=function(M){return Object(d.a)(M)&&M<0}},function(y,n,s){"use strict";n.a=function(d,M,S){return S===void 0&&(S=1e-5),Math.abs(d-M)<S}},function(y,n,s){"use strict";var d=s(5);n.a=function(M){return Object(d.a)(M)&&M%2!=0}},function(y,n,s){"use strict";var d=s(5);n.a=function(M){return Object(d.a)(M)&&M>0}},function(y,n,s){"use strict";var d=s(2),M=s(0),S=s(3);n.a=function(T,v){if(Object(M.a)(T)){var x,C,N=T[0];return x=Object(S.a)(v)?v(T[0]):T[0][v],Object(d.a)(T,function(X){(C=Object(S.a)(v)?v(X):X[v])>x&&(N=X,x=C)}),N}}},function(y,n,s){"use strict";var d=s(2),M=s(0),S=s(3);n.a=function(T,v){if(Object(M.a)(T)){var x,C,N=T[0];return x=Object(S.a)(v)?v(T[0]):T[0][v],Object(d.a)(T,function(X){(C=Object(S.a)(v)?v(X):X[v])<x&&(N=X,x=C)}),N}}},function(y,n,s){"use strict";n.a=function(d,M){return(d%M+M)%M}},function(y,n,s){"use strict";var d=180/Math.PI;n.a=function(M){return d*M}},function(y,n,s){"use strict";n.a=parseInt},function(y,n,s){"use strict";var d=Math.PI/180;n.a=function(M){return d*M}},function(y,n,s){"use strict";var d=s(2);n.a=d.a},function(y,n,s){"use strict";var d=s(25);n.a=d.a},function(y,n,s){"use strict";var d=s(12),M=s(26);n.a=function(S,T){return Object(d.a)(Object(M.a)(S),T)}},function(y,n,s){"use strict";var d=s(10);n.a=function(M){return Object(d.a)(M).toLowerCase()}},function(y,n,s){"use strict";var d=s(10);n.a=function(M){var S=Object(d.a)(M);return S.charAt(0).toLowerCase()+S.substring(1)}},function(y,n,s){"use strict";n.a=function(d,M){return d&&M?d.replace(/\\?\{([^{}]+)\}/g,function(S,T){return S.charAt(0)==="\\"?S.slice(1):M[T]===void 0?"":M[T]}):d}},function(y,n,s){"use strict";var d=s(10);n.a=function(M){return Object(d.a)(M).toUpperCase()}},function(y,n,s){"use strict";var d=s(10);n.a=function(M){var S=Object(d.a)(M);return S.charAt(0).toUpperCase()+S.substring(1)}},function(y,n,s){"use strict";var d=s(4);n.a=function(M){return Object(d.a)(M,"Arguments")}},function(y,n,s){"use strict";var d=s(4);n.a=function(M){return Object(d.a)(M,"Boolean")}},function(y,n,s){"use strict";var d=s(4);n.a=function(M){return Object(d.a)(M,"Date")}},function(y,n,s){"use strict";var d=s(4);n.a=function(M){return Object(d.a)(M,"Error")}},function(y,n,s){"use strict";var d=s(5);n.a=function(M){return Object(d.a)(M)&&isFinite(M)}},function(y,n,s){"use strict";n.a=function(d){return d===null}},function(y,n,s){"use strict";var d=s(4);n.a=function(M){return Object(d.a)(M,"RegExp")}},function(y,n,s){"use strict";n.a=function(d){return d===void 0}},function(y,n,s){"use strict";n.a=function(d){return d instanceof Element||d instanceof HTMLDocument}},function(y,n,s){"use strict";n.a=function(d){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(M){return setTimeout(M,16)})(d)}},function(y,n,s){"use strict";n.a=function(d){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(d)}},function(y,n,s){"use strict";var d=s(16),M=s(3);n.a=function(){for(var S=[],T=0;T<arguments.length;T++)S[T]=arguments[T];for(var v=S[0],x=1;x<S.length;x++){var C=S[x];Object(M.a)(C)&&(C=C.prototype),Object(d.a)(v.prototype,C)}}},function(y,n,s){"use strict";var d=s(0);n.a=function M(S){if(E(S)!=="object"||S===null)return S;var T;if(Object(d.a)(S)){T=[];for(var v=0,x=S.length;v<x;v++)E(S[v])==="object"&&S[v]!=null?T[v]=M(S[v]):T[v]=S[v]}else for(var C in T={},S)E(S[C])==="object"&&S[C]!=null?T[C]=M(S[C]):T[C]=S[C];return T}},function(y,n,s){"use strict";n.a=function(d,M,S){var T;return function(){var v=this,x=arguments,C=function(){T=null,S||d.apply(v,x)},N=S&&!T;clearTimeout(T),T=setTimeout(C,M),N&&d.apply(v,x)}}},function(y,n,s){"use strict";var d=s(3);n.a=function(M,S){if(!Object(d.a)(M))throw new TypeError("Expected a function");var T=function v(){for(var x=[],C=0;C<arguments.length;C++)x[C]=arguments[C];var N=S?S.apply(this,x):x[0],X=v.cache;if(X.has(N))return X.get(N);var tt=M.apply(this,x);return X.set(N,tt),tt};return T.cache=new Map,T}},function(y,n,s){"use strict";var d=s(0),M=s(9);function S(T,v,x,C){for(var N in x=x||0,C=C||5,v)if(v.hasOwnProperty(N)){var X=v[N];X!==null&&Object(M.a)(X)?(Object(M.a)(T[N])||(T[N]={}),x<C?S(T[N],X,x+1,C):T[N]=v[N]):Object(d.a)(X)?(T[N]=[],T[N]=T[N].concat(X)):X!==void 0&&(T[N]=X)}}n.a=function(T){for(var v=[],x=1;x<arguments.length;x++)v[x-1]=arguments[x];for(var C=0;C<v.length;C+=1)S(T,v[C]);return T}},function(y,n,s){"use strict";var d=s(16),M=s(3);n.a=function(S,T,v,x){Object(M.a)(T)||(v=T,T=S,S=function(){});var C=Object.create?function(X,tt){return Object.create(X,{constructor:{value:tt}})}:function(X,tt){function it(){}it.prototype=X;var pt=new it;return pt.constructor=tt,pt},N=C(T.prototype,S);return S.prototype=Object(d.a)(N,S.prototype),S.superclass=C(T.prototype,T),Object(d.a)(N,v),Object(d.a)(S,x),S}},function(y,n,s){"use strict";var d=s(1);n.a=function(M,S){if(!Object(d.a)(M))return-1;var T=Array.prototype.indexOf;if(T)return T.call(M,S);for(var v=-1,x=0;x<M.length;x++)if(M[x]===S){v=x;break}return v}},function(y,n,s){"use strict";var d=s(6),M=s(1),S=s(27),T=s(28),v=Object.prototype.hasOwnProperty;n.a=function(x){if(Object(d.a)(x))return!0;if(Object(M.a)(x))return!x.length;var C=Object(S.a)(x);if(C==="Map"||C==="Set")return!x.size;if(Object(T.a)(x))return!Object.keys(x).length;for(var N in x)if(v.call(x,N))return!1;return!0}},function(y,n,s){"use strict";var d=s(3),M=s(29);n.a=function(S,T,v){return Object(d.a)(v)?!!v(S,T):Object(M.a)(S,T)}},function(y,n,s){"use strict";var d=s(2),M=s(1);n.a=function(S,T){if(!Object(M.a)(S))return S;var v=[];return Object(d.a)(S,function(x,C){v.push(T(x,C))}),v}},function(y,n,s){"use strict";var d=s(6),M=s(13),S=function(v){return v};n.a=function(T,v){v===void 0&&(v=S);var x={};return Object(M.a)(T)&&!Object(d.a)(T)&&Object.keys(T).forEach(function(C){x[C]=v(T[C],C)}),x}},function(y,n,s){"use strict";var d=s(8);n.a=function(M,S,T){for(var v=0,x=Object(d.a)(S)?S.split("."):S;M&&v<x.length;)M=M[x[v++]];return M===void 0||v<x.length?T:M}},function(y,n,s){"use strict";var d=s(13),M=s(8),S=s(5);n.a=function(T,v,x){var C=T,N=Object(M.a)(v)?v.split("."):v;return N.forEach(function(X,tt){tt<N.length-1?(Object(d.a)(C[X])||(C[X]=Object(S.a)(N[tt+1])?[]:{}),C=C[X]):C[X]=x}),T}},function(y,n,s){"use strict";var d=s(2),M=s(9),S=Object.prototype.hasOwnProperty;n.a=function(T,v){if(T===null||!Object(M.a)(T))return{};var x={};return Object(d.a)(v,function(C){S.call(T,C)&&(x[C]=T[C])}),x}},function(y,n,s){"use strict";n.a=function(d,M,S){var T,v,x,C,N=0;S||(S={});var X=function(){N=S.leading===!1?0:Date.now(),T=null,C=d.apply(v,x),T||(v=x=null)},tt=function(){var pt=Date.now();N||S.leading!==!1||(N=pt);var ft=M-(pt-N);return v=this,x=arguments,ft<=0||ft>M?(T&&(clearTimeout(T),T=null),N=pt,C=d.apply(v,x),T||(v=x=null)):T||S.trailing===!1||(T=setTimeout(X,ft)),C};return tt.cancel=function(){clearTimeout(T),N=0,T=v=x=null},tt}},function(y,n,s){"use strict";var d=s(1);n.a=function(M){return Object(d.a)(M)?Array.prototype.slice.call(M):[]}},function(y,n,s){"use strict";var d={};n.a=function(M){return d[M=M||"g"]?d[M]+=1:d[M]=1,M+d[M]}},function(y,n,s){"use strict";n.a=function(){}},function(y,n,s){"use strict";n.a=function(d){return d}},function(y,n,s){"use strict";n.a=function(S){return Object(d.a)(S)?0:Object(M.a)(S)?S.length:Object.keys(S).length};var d=s(6),M=s(1)},function(y,n,s){"use strict";var d=function(){function M(){this.map={}}return M.prototype.has=function(S){return this.map[S]!==void 0},M.prototype.get=function(S,T){var v=this.map[S];return v===void 0?T:v},M.prototype.set=function(S,T){this.map[S]=T},M.prototype.clear=function(){this.map={}},M.prototype.delete=function(S){delete this.map[S]},M.prototype.size=function(){return Object.keys(this.map).length},M}();n.a=d},function(y,n){function s(M,S,T,v){v===void 0&&(v=[]);var x=this;x.w=M||0,x.h=S||0,x.y=T||0,x.x=0,x.c=v||[],x.cs=v.length,x.prelim=0,x.mod=0,x.shift=0,x.change=0,x.tl=null,x.tr=null,x.el=null,x.er=null,x.msel=0,x.mser=0}function d(M,S){var T=function v(x,C){var N=C?x.y:x.x;return x.children.forEach(function(X){N=Math.min(v(X,C),N)}),N}(M,S);(function v(x,C,N){N?x.y+=C:x.x+=C,x.children.forEach(function(X){v(X,C,N)})})(M,-T,S)}s.fromNode=function(M,S){if(!M)return null;var T=[];return M.children.forEach(function(v){T.push(s.fromNode(v,S))}),S?new s(M.height,M.width,M.x,T):new s(M.width,M.height,M.y,T)},y.exports=function(M,S){S===void 0&&(S={});var T=S.isHorizontal;function v(ft){ft.cs===0?(ft.el=ft,ft.er=ft,ft.msel=ft.mser=0):(ft.el=ft.c[0].el,ft.msel=ft.c[0].msel,ft.er=ft.c[ft.cs-1].er,ft.mser=ft.c[ft.cs-1].mser)}function x(ft,Ot,wt){for(var xt=ft.c[Ot-1],lt=xt.mod,Vt=ft.c[Ot],Lt=Vt.mod;xt!==null&&Vt!==null;){tt(xt)>wt.low&&(wt=wt.nxt);var Et=lt+xt.prelim+xt.w-(Lt+Vt.prelim);Et>0&&(Lt+=Et,C(ft,Ot,wt.index,Et));var J=tt(xt),ht=tt(Vt);J<=ht&&(xt=X(xt))!==null&&(lt+=xt.mod),J>=ht&&(Vt=N(Vt))!==null&&(Lt+=Vt.mod)}!xt&&Vt?function(vt,bt,At,q){var ct=vt.c[0].el;ct.tl=At;var ot=q-At.mod-vt.c[0].msel;ct.mod+=ot,ct.prelim-=ot,vt.c[0].el=vt.c[bt].el,vt.c[0].msel=vt.c[bt].msel}(ft,Ot,Vt,Lt):xt&&!Vt&&function(vt,bt,At,q){var ct=vt.c[bt].er;ct.tr=At;var ot=q-At.mod-vt.c[bt].mser;ct.mod+=ot,ct.prelim-=ot,vt.c[bt].er=vt.c[bt-1].er,vt.c[bt].mser=vt.c[bt-1].mser}(ft,Ot,xt,lt)}function C(ft,Ot,wt,xt){ft.c[Ot].mod+=xt,ft.c[Ot].msel+=xt,ft.c[Ot].mser+=xt,function(lt,Vt,Lt,Et){if(Lt!==Vt-1){var J=Vt-Lt;lt.c[Lt+1].shift+=Et/J,lt.c[Vt].shift-=Et/J,lt.c[Vt].change-=Et-Et/J}}(ft,Ot,wt,xt)}function N(ft){return ft.cs===0?ft.tl:ft.c[0]}function X(ft){return ft.cs===0?ft.tr:ft.c[ft.cs-1]}function tt(ft){return ft.y+ft.h}function it(ft,Ot,wt){for(;wt!==null&&ft>=wt.low;)wt=wt.nxt;return{low:ft,index:Ot,nxt:wt}}(function ft(Ot,wt,xt){xt===void 0&&(xt=0),wt?(Ot.x=xt,xt+=Ot.width):(Ot.y=xt,xt+=Ot.height),Ot.children.forEach(function(lt){ft(lt,wt,xt)})})(M,T);var pt=s.fromNode(M,T);return function ft(Ot){if(Ot.cs!==0){ft(Ot.c[0]);for(var wt=it(tt(Ot.c[0].el),0,null),xt=1;xt<Ot.cs;++xt){ft(Ot.c[xt]);var lt=tt(Ot.c[xt].er);x(Ot,xt,wt),wt=it(lt,xt,wt)}(function(Vt){Vt.prelim=(Vt.c[0].prelim+Vt.c[0].mod+Vt.c[Vt.cs-1].mod+Vt.c[Vt.cs-1].prelim+Vt.c[Vt.cs-1].w)/2-Vt.w/2})(Ot),v(Ot)}else v(Ot)}(pt),function ft(Ot,wt){wt+=Ot.mod,Ot.x=Ot.prelim+wt,function(lt){for(var Vt=0,Lt=0,Et=0;Et<lt.cs;Et++)Vt+=lt.c[Et].shift,Lt+=Vt+lt.c[Et].change,lt.c[Et].mod+=Lt}(Ot);for(var xt=0;xt<Ot.cs;xt++)ft(Ot.c[xt],wt)}(pt,0),function ft(Ot,wt,xt){xt?wt.y=Ot.x:wt.x=Ot.x,Ot.c.forEach(function(lt,Vt){ft(lt,wt.children[Vt],xt)})}(pt,M,T),d(M,T),M}},function(y,n,s){var d=s(11),M=s(115),S=s(17),T=s(7),v=function(C){var N,X;function tt(){return C.apply(this,arguments)||this}return X=C,(N=tt).prototype=Object.create(X.prototype),N.prototype.constructor=N,N.__proto__=X,tt.prototype.execute=function(){return this.rootNode.width=0,S(this.rootNode,this.options,M)},tt}(d),x={};y.exports=function(C,N){return N=T.assign({},x,N),new v(C,N).execute()}},function(y,n,s){var d=s(7);function M(T,v){T===void 0&&(T=0),v===void 0&&(v=[]);var x=this;x.x=x.y=0,x.leftChild=x.rightChild=null,x.height=0,x.children=v}var S={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};y.exports=function(T,v){v===void 0&&(v={}),v=d.assign({},S,v);var x,C=0,N=function X(tt){if(!tt)return null;tt.width=0,tt.depth&&tt.depth>C&&(C=tt.depth);var it=tt.children,pt=it.length,ft=new M(tt.height,[]);return it.forEach(function(Ot,wt){var xt=X(Ot);ft.children.push(xt),wt===0&&(ft.leftChild=xt),wt===pt-1&&(ft.rightChild=xt)}),ft.originNode=tt,ft.isLeaf=tt.isLeaf(),ft}(T);return function X(tt){if(tt.isLeaf||tt.children.length===0)tt.drawingDepth=C;else{var it=tt.children.map(function(ft){return X(ft)}),pt=Math.min.apply(null,it);tt.drawingDepth=pt-1}return tt.drawingDepth}(N),function X(tt){tt.x=tt.drawingDepth*v.rankSep,tt.isLeaf?(tt.y=0,x&&(tt.y=x.y+x.height+v.nodeSep,tt.originNode.parent!==x.originNode.parent&&(tt.y+=v.subTreeSep)),x=tt):(tt.children.forEach(function(it){X(it)}),tt.y=(tt.leftChild.y+tt.rightChild.y)/2)}(N),function X(tt,it,pt){pt?(it.x=tt.x,it.y=tt.y):(it.x=tt.y,it.y=tt.x),tt.children.forEach(function(ft,Ot){X(ft,it.children[Ot],pt)})}(N,T,v.isHorizontal),T}},function(y,n,s){var d=s(11),M=s(117),S=s(30),T=s(7),v=["LR","RL","H"],x=v[0],C=function(X){var tt,it;function pt(){return X.apply(this,arguments)||this}return it=X,(tt=pt).prototype=Object.create(it.prototype),tt.prototype.constructor=tt,tt.__proto__=it,pt.prototype.execute=function(){var ft=this.options,Ot=this.rootNode;ft.isHorizontal=!0;var wt=ft.indent,xt=wt===void 0?20:wt,lt=ft.dropCap,Vt=lt===void 0||lt,Lt=ft.direction||x;if(Lt&&v.indexOf(Lt)===-1)throw new TypeError("Invalid direction: "+Lt);if(Lt===v[0])M(Ot,xt,Vt);else if(Lt===v[1])M(Ot,xt,Vt),Ot.right2left();else if(Lt===v[2]){var Et=S(Ot,ft),J=Et.left,ht=Et.right;M(J,xt,Vt),J.right2left(),M(ht,xt,Vt);var vt=J.getBoundingBox();ht.translate(vt.width,0),Ot.x=ht.x-Ot.width/2}return Ot},pt}(d),N={};y.exports=function(X,tt){return tt=T.assign({},N,tt),new C(X,tt).execute()}},function(y,n){y.exports=function(s,d,M){var S=null;s.eachNode(function(T){(function(v,x,C,N){if(!N)try{if(v.id===v.parent.children[0].id)return v.x+=C*v.depth,void(v.y=x?x.y:0)}catch(X){}v.x+=C*v.depth,v.y=x?x.y+x.height:0})(T,S,d,M),S=T})}},function(y,n,s){var d=s(11),M=s(119),S=s(17),T=s(7),v=function(C){var N,X;function tt(){return C.apply(this,arguments)||this}return X=C,(N=tt).prototype=Object.create(X.prototype),N.prototype.constructor=N,N.__proto__=X,tt.prototype.execute=function(){return S(this.rootNode,this.options,M)},tt}(d),x={};y.exports=function(C,N){return N=T.assign({},x,N),new v(C,N).execute()}},function(y,n,s){var d=s(7),M={getSubTreeSep:function(){return 0}};y.exports=function(S,T){T===void 0&&(T={}),T=d.assign({},M,T),S.parent={x:0,width:0,height:0,y:0},S.BFTraverse(function(v){v.x=v.parent.x+v.parent.width}),S.parent=null,function v(x,C){var N=0;return x.children.length?x.children.forEach(function(X){N+=v(X,C)}):N=x.height,x._subTreeSep=C.getSubTreeSep(x.data),x.totalHeight=Math.max(x.height,N)+2*x._subTreeSep,x.totalHeight}(S,T),S.startY=0,S.y=S.totalHeight/2-S.height/2,S.eachNode(function(v){var x=v.children,C=x.length;if(C){var N=x[0];if(N.startY=v.startY+v._subTreeSep,C===1)N.y=v.y+v.height/2-N.height/2;else{N.y=N.startY+N.totalHeight/2-N.height/2;for(var X=1;X<C;X++){var tt=x[X];tt.startY=x[X-1].startY+x[X-1].totalHeight,tt.y=tt.startY+tt.totalHeight/2-tt.height/2}}}}),function v(x){var C=x.children,N=C.length;if(N){C.forEach(function(Ot){v(Ot)});var X=C[0],tt=C[N-1],it=tt.y-X.y+tt.height,pt=0;if(C.forEach(function(Ot){pt+=Ot.totalHeight}),it>x.height)x.y=X.y+it/2-x.height/2;else if(C.length!==1||x.height>pt){var ft=x.y+(x.height-it)/2-X.y;C.forEach(function(Ot){Ot.translate(0,ft)})}else x.y=(X.y+X.height/2+tt.y+tt.height/2)/2-x.height/2}}(S)}}])},E(A)==="object"&&E(r)==="object"?r.exports=l():(m=[],(O=typeof(p=l)=="function"?p.apply(A,m):p)===void 0||(r.exports=O))}).call(this,e(86)(a))},function(a,A){},function(a,A){},function(a,A){var e,r,p=a.exports={};function m(){throw new Error("setTimeout has not been defined")}function O(){throw new Error("clearTimeout has not been defined")}function l(T){if(e===setTimeout)return setTimeout(T,0);if((e===m||!e)&&setTimeout)return e=setTimeout,setTimeout(T,0);try{return e(T,0)}catch(v){try{return e.call(null,T,0)}catch(x){return e.call(this,T,0)}}}(function(){try{e=typeof setTimeout=="function"?setTimeout:m}catch(T){e=m}try{r=typeof clearTimeout=="function"?clearTimeout:O}catch(T){r=O}})();var E,j=[],y=!1,n=-1;function s(){y&&E&&(y=!1,E.length?j=E.concat(j):n=-1,j.length&&d())}function d(){if(!y){var T=l(s);y=!0;for(var v=j.length;v;){for(E=j,j=[];++n<v;)E&&E[n].run();n=-1,v=j.length}E=null,y=!1,function(x){if(r===clearTimeout)return clearTimeout(x);if((r===O||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(x);try{r(x)}catch(C){try{return r.call(null,x)}catch(N){return r.call(this,x)}}}(T)}}function M(T,v){this.fun=T,this.array=v}function S(){}p.nextTick=function(T){var v=new Array(arguments.length-1);if(arguments.length>1)for(var x=1;x<arguments.length;x++)v[x-1]=arguments[x];j.push(new M(T,v)),j.length!==1||y||l(d)},M.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=S,p.addListener=S,p.once=S,p.off=S,p.removeListener=S,p.removeAllListeners=S,p.emit=S,p.prependListener=S,p.prependOnceListener=S,p.listeners=function(T){return[]},p.binding=function(T){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(T){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(a,A,e){"use strict";var r=e(1),p=function(m){function O(){return m!==null&&m.apply(this,arguments)||this}return Object(r.b)(O,m),O.prototype.isGroup=function(){return!0},O.prototype.isEntityGroup=function(){return!1},O.prototype.clone=function(){for(var l=m.prototype.clone.call(this),E=this.getChildren(),j=0;j<E.length;j++){var y=E[j];l.add(y.clone())}return l},O}(e(117).a);A.a=p},function(a,A,e){"use strict";var r=e(1),p=e(118),m=e(39),O=function(l){function E(j){return l.call(this,j)||this}return Object(r.b)(E,l),E.prototype._isInBBox=function(j,y){var n=this.getBBox();return n.minX<=j&&n.maxX>=j&&n.minY<=y&&n.maxY>=y},E.prototype.afterAttrsChange=function(j){l.prototype.afterAttrsChange.call(this,j),this.clearCacheBBox()},E.prototype.getBBox=function(){var j=this.cfg.bbox;return j||(j=this.calculateBBox(),this.set("bbox",j)),j},E.prototype.getCanvasBBox=function(){var j=this.cfg.canvasBBox;return j||(j=this.calculateCanvasBBox(),this.set("canvasBBox",j)),j},E.prototype.applyMatrix=function(j){l.prototype.applyMatrix.call(this,j),this.set("canvasBBox",null)},E.prototype.calculateCanvasBBox=function(){var j=this.getBBox(),y=this.getTotalMatrix(),n=j.minX,s=j.minY,d=j.maxX,M=j.maxY;if(y){var S=Object(m.c)(y,[j.minX,j.minY]),T=Object(m.c)(y,[j.maxX,j.minY]),v=Object(m.c)(y,[j.minX,j.maxY]),x=Object(m.c)(y,[j.maxX,j.maxY]);n=Math.min(S[0],T[0],v[0],x[0]),d=Math.max(S[0],T[0],v[0],x[0]),s=Math.min(S[1],T[1],v[1],x[1]),M=Math.max(S[1],T[1],v[1],x[1])}var C=this.attrs;if(C.shadowColor){var N=C.shadowBlur,X=N===void 0?0:N,tt=C.shadowOffsetX,it=tt===void 0?0:tt,pt=C.shadowOffsetY,ft=pt===void 0?0:pt,Ot=n-X+it,wt=d+X+it,xt=s-X+ft,lt=M+X+ft;n=Math.min(n,Ot),d=Math.max(d,wt),s=Math.min(s,xt),M=Math.max(M,lt)}return{x:n,y:s,minX:n,minY:s,maxX:d,maxY:M,width:d-n,height:M-s}},E.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},E.prototype.isClipShape=function(){return this.get("isClipShape")},E.prototype.isInShape=function(j,y){return!1},E.prototype.isOnlyHitBox=function(){return!1},E.prototype.isHit=function(j,y){var n=this.get("startArrowShape"),s=this.get("endArrowShape"),d=[j,y,1],M=(d=this.invertFromMatrix(d))[0],S=d[1],T=this._isInBBox(M,S);return this.isOnlyHitBox()?T:!!(T&&!this.isClipped(M,S)&&(this.isInShape(M,S)||n&&n.isHit(M,S)||s&&s.isHit(M,S)))},E}(p.a);A.a=O},function(a,A,e){var r=e(268),p={};for(var m in r)r.hasOwnProperty(m)&&(p[r[m]]=m);var O=a.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var l in O)if(O.hasOwnProperty(l)){if(!("channels"in O[l]))throw new Error("missing channels property: "+l);if(!("labels"in O[l]))throw new Error("missing channel labels property: "+l);if(O[l].labels.length!==O[l].channels)throw new Error("channel and label counts mismatch: "+l);var E=O[l].channels,j=O[l].labels;delete O[l].channels,delete O[l].labels,Object.defineProperty(O[l],"channels",{value:E}),Object.defineProperty(O[l],"labels",{value:j})}O.rgb.hsl=function(y){var n,s,d=y[0]/255,M=y[1]/255,S=y[2]/255,T=Math.min(d,M,S),v=Math.max(d,M,S),x=v-T;return v===T?n=0:d===v?n=(M-S)/x:M===v?n=2+(S-d)/x:S===v&&(n=4+(d-M)/x),(n=Math.min(60*n,360))<0&&(n+=360),s=(T+v)/2,[n,100*(v===T?0:s<=.5?x/(v+T):x/(2-v-T)),100*s]},O.rgb.hsv=function(y){var n,s,d,M,S,T=y[0]/255,v=y[1]/255,x=y[2]/255,C=Math.max(T,v,x),N=C-Math.min(T,v,x),X=function(it){return(C-it)/6/N+.5};return N===0?M=S=0:(S=N/C,n=X(T),s=X(v),d=X(x),T===C?M=d-s:v===C?M=1/3+n-d:x===C&&(M=2/3+s-n),M<0?M+=1:M>1&&(M-=1)),[360*M,100*S,100*C]},O.rgb.hwb=function(y){var n=y[0],s=y[1],d=y[2];return[O.rgb.hsl(y)[0],100*(1/255*Math.min(n,Math.min(s,d))),100*(d=1-1/255*Math.max(n,Math.max(s,d)))]},O.rgb.cmyk=function(y){var n,s=y[0]/255,d=y[1]/255,M=y[2]/255;return[100*((1-s-(n=Math.min(1-s,1-d,1-M)))/(1-n)||0),100*((1-d-n)/(1-n)||0),100*((1-M-n)/(1-n)||0),100*n]},O.rgb.keyword=function(y){var n=p[y];if(n)return n;var s,d,M,S=1/0;for(var T in r)if(r.hasOwnProperty(T)){var v=r[T],x=(d=y,M=v,Math.pow(d[0]-M[0],2)+Math.pow(d[1]-M[1],2)+Math.pow(d[2]-M[2],2));x<S&&(S=x,s=T)}return s},O.keyword.rgb=function(y){return r[y]},O.rgb.xyz=function(y){var n=y[0]/255,s=y[1]/255,d=y[2]/255;return[100*(.4124*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.3576*(s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92)+.1805*(d=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92)),100*(.2126*n+.7152*s+.0722*d),100*(.0193*n+.1192*s+.9505*d)]},O.rgb.lab=function(y){var n=O.rgb.xyz(y),s=n[0],d=n[1],M=n[2];return d/=100,M/=108.883,s=(s/=95.047)>.008856?Math.pow(s,1/3):7.787*s+16/116,[116*(d=d>.008856?Math.pow(d,1/3):7.787*d+16/116)-16,500*(s-d),200*(d-(M=M>.008856?Math.pow(M,1/3):7.787*M+16/116))]},O.hsl.rgb=function(y){var n,s,d,M,S,T=y[0]/360,v=y[1]/100,x=y[2]/100;if(v===0)return[S=255*x,S,S];n=2*x-(s=x<.5?x*(1+v):x+v-x*v),M=[0,0,0];for(var C=0;C<3;C++)(d=T+1/3*-(C-1))<0&&d++,d>1&&d--,S=6*d<1?n+6*(s-n)*d:2*d<1?s:3*d<2?n+(s-n)*(2/3-d)*6:n,M[C]=255*S;return M},O.hsl.hsv=function(y){var n=y[0],s=y[1]/100,d=y[2]/100,M=s,S=Math.max(d,.01);return s*=(d*=2)<=1?d:2-d,M*=S<=1?S:2-S,[n,100*(d===0?2*M/(S+M):2*s/(d+s)),100*((d+s)/2)]},O.hsv.rgb=function(y){var n=y[0]/60,s=y[1]/100,d=y[2]/100,M=Math.floor(n)%6,S=n-Math.floor(n),T=255*d*(1-s),v=255*d*(1-s*S),x=255*d*(1-s*(1-S));switch(d*=255,M){case 0:return[d,x,T];case 1:return[v,d,T];case 2:return[T,d,x];case 3:return[T,v,d];case 4:return[x,T,d];case 5:return[d,T,v]}},O.hsv.hsl=function(y){var n,s,d,M=y[0],S=y[1]/100,T=y[2]/100,v=Math.max(T,.01);return d=(2-S)*T,s=S*v,[M,100*(s=(s/=(n=(2-S)*v)<=1?n:2-n)||0),100*(d/=2)]},O.hwb.rgb=function(y){var n,s,d,M,S,T,v,x=y[0]/360,C=y[1]/100,N=y[2]/100,X=C+N;switch(X>1&&(C/=X,N/=X),d=6*x-(n=Math.floor(6*x)),(1&n)!=0&&(d=1-d),M=C+d*((s=1-N)-C),n){default:case 6:case 0:S=s,T=M,v=C;break;case 1:S=M,T=s,v=C;break;case 2:S=C,T=s,v=M;break;case 3:S=C,T=M,v=s;break;case 4:S=M,T=C,v=s;break;case 5:S=s,T=C,v=M}return[255*S,255*T,255*v]},O.cmyk.rgb=function(y){var n=y[0]/100,s=y[1]/100,d=y[2]/100,M=y[3]/100;return[255*(1-Math.min(1,n*(1-M)+M)),255*(1-Math.min(1,s*(1-M)+M)),255*(1-Math.min(1,d*(1-M)+M))]},O.xyz.rgb=function(y){var n,s,d,M=y[0]/100,S=y[1]/100,T=y[2]/100;return s=-.9689*M+1.8758*S+.0415*T,d=.0557*M+-.204*S+1.057*T,n=(n=3.2406*M+-1.5372*S+-.4986*T)>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:12.92*s,d=d>.0031308?1.055*Math.pow(d,1/2.4)-.055:12.92*d,[255*(n=Math.min(Math.max(0,n),1)),255*(s=Math.min(Math.max(0,s),1)),255*(d=Math.min(Math.max(0,d),1))]},O.xyz.lab=function(y){var n=y[0],s=y[1],d=y[2];return s/=100,d/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(s=s>.008856?Math.pow(s,1/3):7.787*s+16/116)-16,500*(n-s),200*(s-(d=d>.008856?Math.pow(d,1/3):7.787*d+16/116))]},O.lab.xyz=function(y){var n,s,d,M=y[0];n=y[1]/500+(s=(M+16)/116),d=s-y[2]/200;var S=Math.pow(s,3),T=Math.pow(n,3),v=Math.pow(d,3);return s=S>.008856?S:(s-16/116)/7.787,n=T>.008856?T:(n-16/116)/7.787,d=v>.008856?v:(d-16/116)/7.787,[n*=95.047,s*=100,d*=108.883]},O.lab.lch=function(y){var n,s=y[0],d=y[1],M=y[2];return(n=360*Math.atan2(M,d)/2/Math.PI)<0&&(n+=360),[s,Math.sqrt(d*d+M*M),n]},O.lch.lab=function(y){var n,s=y[0],d=y[1];return n=y[2]/360*2*Math.PI,[s,d*Math.cos(n),d*Math.sin(n)]},O.rgb.ansi16=function(y){var n=y[0],s=y[1],d=y[2],M=1 in arguments?arguments[1]:O.rgb.hsv(y)[2];if((M=Math.round(M/50))===0)return 30;var S=30+(Math.round(d/255)<<2|Math.round(s/255)<<1|Math.round(n/255));return M===2&&(S+=60),S},O.hsv.ansi16=function(y){return O.rgb.ansi16(O.hsv.rgb(y),y[2])},O.rgb.ansi256=function(y){var n=y[0],s=y[1],d=y[2];return n===s&&s===d?n<8?16:n>248?231:Math.round((n-8)/247*24)+232:16+36*Math.round(n/255*5)+6*Math.round(s/255*5)+Math.round(d/255*5)},O.ansi16.rgb=function(y){var n=y%10;if(n===0||n===7)return y>50&&(n+=3.5),[n=n/10.5*255,n,n];var s=.5*(1+~~(y>50));return[(1&n)*s*255,(n>>1&1)*s*255,(n>>2&1)*s*255]},O.ansi256.rgb=function(y){if(y>=232){var n=10*(y-232)+8;return[n,n,n]}var s;return y-=16,[Math.floor(y/36)/5*255,Math.floor((s=y%36)/6)/5*255,s%6/5*255]},O.rgb.hex=function(y){var n=(((255&Math.round(y[0]))<<16)+((255&Math.round(y[1]))<<8)+(255&Math.round(y[2]))).toString(16).toUpperCase();return"000000".substring(n.length)+n},O.hex.rgb=function(y){var n=y.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!n)return[0,0,0];var s=n[0];n[0].length===3&&(s=s.split("").map(function(M){return M+M}).join(""));var d=parseInt(s,16);return[d>>16&255,d>>8&255,255&d]},O.rgb.hcg=function(y){var n,s=y[0]/255,d=y[1]/255,M=y[2]/255,S=Math.max(Math.max(s,d),M),T=Math.min(Math.min(s,d),M),v=S-T;return n=v<=0?0:S===s?(d-M)/v%6:S===d?2+(M-s)/v:4+(s-d)/v+4,n/=6,[360*(n%=1),100*v,100*(v<1?T/(1-v):0)]},O.hsl.hcg=function(y){var n=y[1]/100,s=y[2]/100,d=1,M=0;return(d=s<.5?2*n*s:2*n*(1-s))<1&&(M=(s-.5*d)/(1-d)),[y[0],100*d,100*M]},O.hsv.hcg=function(y){var n=y[1]/100,s=y[2]/100,d=n*s,M=0;return d<1&&(M=(s-d)/(1-d)),[y[0],100*d,100*M]},O.hcg.rgb=function(y){var n=y[0]/360,s=y[1]/100,d=y[2]/100;if(s===0)return[255*d,255*d,255*d];var M,S=[0,0,0],T=n%1*6,v=T%1,x=1-v;switch(Math.floor(T)){case 0:S[0]=1,S[1]=v,S[2]=0;break;case 1:S[0]=x,S[1]=1,S[2]=0;break;case 2:S[0]=0,S[1]=1,S[2]=v;break;case 3:S[0]=0,S[1]=x,S[2]=1;break;case 4:S[0]=v,S[1]=0,S[2]=1;break;default:S[0]=1,S[1]=0,S[2]=x}return M=(1-s)*d,[255*(s*S[0]+M),255*(s*S[1]+M),255*(s*S[2]+M)]},O.hcg.hsv=function(y){var n=y[1]/100,s=n+y[2]/100*(1-n),d=0;return s>0&&(d=n/s),[y[0],100*d,100*s]},O.hcg.hsl=function(y){var n=y[1]/100,s=y[2]/100*(1-n)+.5*n,d=0;return s>0&&s<.5?d=n/(2*s):s>=.5&&s<1&&(d=n/(2*(1-s))),[y[0],100*d,100*s]},O.hcg.hwb=function(y){var n=y[1]/100,s=n+y[2]/100*(1-n);return[y[0],100*(s-n),100*(1-s)]},O.hwb.hcg=function(y){var n=y[1]/100,s=1-y[2]/100,d=s-n,M=0;return d<1&&(M=(s-d)/(1-d)),[y[0],100*d,100*M]},O.apple.rgb=function(y){return[y[0]/65535*255,y[1]/65535*255,y[2]/65535*255]},O.rgb.apple=function(y){return[y[0]/255*65535,y[1]/255*65535,y[2]/255*65535]},O.gray.rgb=function(y){return[y[0]/100*255,y[0]/100*255,y[0]/100*255]},O.gray.hsl=O.gray.hsv=function(y){return[0,0,y[0]]},O.gray.hwb=function(y){return[0,100,y[0]]},O.gray.cmyk=function(y){return[0,0,0,y[0]]},O.gray.lab=function(y){return[y[0],0,0]},O.gray.hex=function(y){var n=255&Math.round(y[0]/100*255),s=((n<<16)+(n<<8)+n).toString(16).toUpperCase();return"000000".substring(s.length)+s},O.rgb.gray=function(y){return[(y[0]+y[1]+y[2])/3/255*100]}},function(a,A,e){var r=e(95),p=e(127),m=e(100),O=e(301),l=e(307),E=e(169),j=e(170),y=e(310),n=e(311),s=e(174),d=e(312),M=e(74),S=e(316),T=e(317),v=e(179),x=e(26),C=e(73),N=e(321),X=e(43),tt=e(323),it=e(58),pt=e(65),ft={};ft["[object Arguments]"]=ft["[object Array]"]=ft["[object ArrayBuffer]"]=ft["[object DataView]"]=ft["[object Boolean]"]=ft["[object Date]"]=ft["[object Float32Array]"]=ft["[object Float64Array]"]=ft["[object Int8Array]"]=ft["[object Int16Array]"]=ft["[object Int32Array]"]=ft["[object Map]"]=ft["[object Number]"]=ft["[object Object]"]=ft["[object RegExp]"]=ft["[object Set]"]=ft["[object String]"]=ft["[object Symbol]"]=ft["[object Uint8Array]"]=ft["[object Uint8ClampedArray]"]=ft["[object Uint16Array]"]=ft["[object Uint32Array]"]=!0,ft["[object Error]"]=ft["[object Function]"]=ft["[object WeakMap]"]=!1,a.exports=function Ot(wt,xt,lt,Vt,Lt,Et){var J,ht=1&xt,vt=2&xt,bt=4&xt;if(lt&&(J=Lt?lt(wt,Vt,Lt,Et):lt(wt)),J!==void 0)return J;if(!X(wt))return wt;var At=x(wt);if(At){if(J=S(wt),!ht)return j(wt,J)}else{var q=M(wt),ct=q=="[object Function]"||q=="[object GeneratorFunction]";if(C(wt))return E(wt,ht);if(q=="[object Object]"||q=="[object Arguments]"||ct&&!Lt){if(J=vt||ct?{}:v(wt),!ht)return vt?n(wt,l(J,wt)):y(wt,O(J,wt))}else{if(!ft[q])return Lt?wt:{};J=T(wt,q,ht)}}Et||(Et=new r);var ot=Et.get(wt);if(ot)return ot;Et.set(wt,J),tt(wt)?wt.forEach(function(P){J.add(Ot(P,xt,lt,P,wt,Et))}):N(wt)&&wt.forEach(function(P,Y){J.set(Y,Ot(P,xt,lt,Y,wt,Et))});var _=At?void 0:(bt?vt?d:s:vt?pt:it)(wt);return p(_||wt,function(P,Y){_&&(P=wt[Y=P]),m(J,Y,Ot(P,xt,lt,Y,wt,Et))}),J}},function(a,A,e){(function(r){function p(O){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(O)}var m=(r===void 0?"undefined":p(r))=="object"&&r&&r.Object===Object&&r;a.exports=m}).call(this,e(164))},function(a,A){function e(p){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(p)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(p){(typeof window=="undefined"?"undefined":e(window))==="object"&&(r=window)}a.exports=r},function(a,A){var e=Function.prototype.toString;a.exports=function(r){if(r!=null){try{return e.call(r)}catch(p){}try{return r+""}catch(p){}}return""}},function(a,A,e){var r=e(64),p=function(){try{var m=r(Object,"defineProperty");return m({},"",{}),m}catch(O){}}();a.exports=p},function(a,A,e){var r=e(302),p=e(85),m=e(26),O=e(73),l=e(102),E=e(44),j=Object.prototype.hasOwnProperty;a.exports=function(y,n){var s=m(y),d=!s&&p(y),M=!s&&!d&&O(y),S=!s&&!d&&!M&&E(y),T=s||d||M||S,v=T?r(y.length,String):[],x=v.length;for(var C in y)!n&&!j.call(y,C)||T&&(C=="length"||M&&(C=="offset"||C=="parent")||S&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||l(C,x))||v.push(C);return v}},function(a,A){a.exports=function(e,r){return function(p){return e(r(p))}}},function(a,A,e){(function(r){function p(y){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(y)}var m=e(47),O=p(A)=="object"&&A&&!A.nodeType&&A,l=O&&p(r)=="object"&&r&&!r.nodeType&&r,E=l&&l.exports===O?m.Buffer:void 0,j=E?E.allocUnsafe:void 0;r.exports=function(y,n){if(n)return y.slice();var s=y.length,d=j?j(s):new y.constructor(s);return y.copy(d),d}}).call(this,e(86)(a))},function(a,A){a.exports=function(e,r){var p=-1,m=e.length;for(r||(r=Array(m));++p<m;)r[p]=e[p];return r}},function(a,A){a.exports=function(e,r){for(var p=-1,m=e==null?0:e.length,O=0,l=[];++p<m;){var E=e[p];r(E,p,e)&&(l[O++]=E)}return l}},function(a,A){a.exports=function(){return[]}},function(a,A,e){var r=e(132),p=e(105),m=e(131),O=e(172),l=Object.getOwnPropertySymbols?function(E){for(var j=[];E;)r(j,m(E)),E=p(E);return j}:O;a.exports=l},function(a,A,e){var r=e(175),p=e(131),m=e(58);a.exports=function(O){return r(O,m,p)}},function(a,A,e){var r=e(132),p=e(26);a.exports=function(m,O,l){var E=O(m);return p(m)?E:r(E,l(m))}},function(a,A,e){var r=e(64)(e(47),"Set");a.exports=r},function(a,A,e){var r=e(47).Uint8Array;a.exports=r},function(a,A,e){var r=e(133);a.exports=function(p,m){var O=m?r(p.buffer):p.buffer;return new p.constructor(O,p.byteOffset,p.length)}},function(a,A,e){var r=e(180),p=e(105),m=e(104);a.exports=function(O){return typeof O.constructor!="function"||m(O)?{}:r(p(O))}},function(a,A,e){var r=e(43),p=Object.create,m=function(){function O(){}return function(l){if(!r(l))return{};if(p)return p(l);O.prototype=l;var E=new O;return O.prototype=void 0,E}}();a.exports=m},function(a,A,e){a.exports=e(182)},function(a,A,e){var r=e(127),p=e(106),m=e(183),O=e(26);a.exports=function(l,E){return(O(l)?r:p)(l,m(E))}},function(a,A,e){var r=e(66);a.exports=function(p){return typeof p=="function"?p:r}},function(a,A,e){var r=e(171),p=e(327),m=e(54),O=e(26);a.exports=function(l,E){return(O(l)?r:p)(l,m(E,3))}},function(a,A,e){var r=e(330),p=e(48);a.exports=function m(O,l,E,j,y){return O===l||(O==null||l==null||!p(O)&&!p(l)?O!=O&&l!=l:r(O,l,E,j,m,y))}},function(a,A,e){var r=e(187),p=e(333),m=e(188);a.exports=function(O,l,E,j,y,n){var s=1&E,d=O.length,M=l.length;if(d!=M&&!(s&&M>d))return!1;var S=n.get(O),T=n.get(l);if(S&&T)return S==l&&T==O;var v=-1,x=!0,C=2&E?new r:void 0;for(n.set(O,l),n.set(l,O);++v<d;){var N=O[v],X=l[v];if(j)var tt=s?j(X,N,v,l,O,n):j(N,X,v,O,l,n);if(tt!==void 0){if(tt)continue;x=!1;break}if(C){if(!p(l,function(it,pt){if(!m(C,pt)&&(N===it||y(N,it,E,j,n)))return C.push(pt)})){x=!1;break}}else if(N!==X&&!y(N,X,E,j,n)){x=!1;break}}return n.delete(O),n.delete(l),x}},function(a,A,e){var r=e(126),p=e(331),m=e(332);function O(l){var E=-1,j=l==null?0:l.length;for(this.__data__=new r;++E<j;)this.add(l[E])}O.prototype.add=O.prototype.push=p,O.prototype.has=m,a.exports=O},function(a,A){a.exports=function(e,r){return e.has(r)}},function(a,A,e){var r=e(43);a.exports=function(p){return p==p&&!r(p)}},function(a,A){a.exports=function(e,r){return function(p){return p!=null&&p[e]===r&&(r!==void 0||e in Object(p))}}},function(a,A,e){var r=e(343);a.exports=function(p){return p==null?"":r(p)}},function(a,A,e){var r=e(344),p=e(193);a.exports=function(m,O){return m!=null&&p(m,O,r)}},function(a,A,e){var r=e(108),p=e(85),m=e(26),O=e(102),l=e(128),E=e(87);a.exports=function(j,y,n){for(var s=-1,d=(y=r(y,j)).length,M=!1;++s<d;){var S=E(y[s]);if(!(M=j!=null&&n(j,S)))break;j=j[S]}return M||++s!=d?M:!!(d=j==null?0:j.length)&&l(d)&&O(S,d)&&(m(j)||p(j))}},function(a,A){a.exports=function(e){return function(r){return r==null?void 0:r[e]}}},function(a,A,e){var r=e(347),p=e(193);a.exports=function(m,O){return m!=null&&p(m,O,r)}},function(a,A){a.exports=function(e){return e===void 0}},function(a,A,e){var r=e(109),p=e(54),m=e(198),O=e(26);a.exports=function(l,E){return(O(l)?r:m)(l,p(E,3))}},function(a,A,e){var r=e(106),p=e(53);a.exports=function(m,O){var l=-1,E=p(m)?Array(m.length):[];return r(m,function(j,y,n){E[++l]=O(j,y,n)}),E}},function(a,A,e){var r=e(349),p=e(106),m=e(54),O=e(350),l=e(26);a.exports=function(E,j,y){var n=l(E)?r:O,s=arguments.length<3;return n(E,m(j,4),y,s,p)}},function(a,A,e){var r=e(360),p=Math.max;a.exports=function(m,O,l){return O=p(O===void 0?m.length-1:O,0),function(){for(var E=arguments,j=-1,y=p(E.length-O,0),n=Array(y);++j<y;)n[j]=E[O+j];j=-1;for(var s=Array(O+1);++j<O;)s[j]=E[j];return s[O]=l(n),r(m,this,s)}}},function(a,A,e){var r=e(361),p=e(362)(r);a.exports=p},function(a,A,e){var r=e(187),p=e(363),m=e(367),O=e(188),l=e(368),E=e(137);a.exports=function(j,y,n){var s=-1,d=p,M=j.length,S=!0,T=[],v=T;if(n)S=!1,d=m;else if(M>=200){var x=y?null:l(j);if(x)return E(x);S=!1,d=O,v=new r}else v=y?[]:T;t:for(;++s<M;){var C=j[s],N=y?y(C):C;if(C=n||C!==0?C:0,S&&N==N){for(var X=v.length;X--;)if(v[X]===N)continue t;y&&v.push(N),T.push(C)}else d(v,N,n)||(v!==T&&v.push(N),T.push(C))}return T}},function(a,A){a.exports=function(e,r,p,m){for(var O=e.length,l=p+(m?1:-1);m?l--:++l<O;)if(r(e[l],l,e))return l;return-1}},function(a,A,e){var r=e(53),p=e(48);a.exports=function(m){return p(m)&&r(m)}},function(a,A,e){var r=e(370),p=e(58);a.exports=function(m){return m==null?[]:r(m,p(m))}},function(a,A,e){var r=e(42),p=e(207);a.exports=function(O,l,E,j){return function(y,n,s,d){var M,S,T={},v=new p,x=function(N){var X=N.v!==M?N.v:N.w,tt=T[X],it=s(N),pt=S.distance+it;if(it<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+N+" Weight: "+it);pt<tt.distance&&(tt.distance=pt,tt.predecessor=M,v.decrease(X,pt))};for(y.nodes().forEach(function(C){var N=C===n?0:Number.POSITIVE_INFINITY;T[C]={distance:N},v.add(C,N)});v.size()>0&&(M=v.removeMin(),(S=T[M]).distance!==Number.POSITIVE_INFINITY);)d(M).forEach(x);return T}(O,String(l),E||m,j||function(y){return O.outEdges(y)})};var m=r.constant(1)},function(a,A,e){var r=e(42);function p(){this._arr=[],this._keyIndices={}}a.exports=p,p.prototype.size=function(){return this._arr.length},p.prototype.keys=function(){return this._arr.map(function(m){return m.key})},p.prototype.has=function(m){return r.has(this._keyIndices,m)},p.prototype.priority=function(m){var O=this._keyIndices[m];if(O!==void 0)return this._arr[O].priority},p.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},p.prototype.add=function(m,O){var l=this._keyIndices;if(m=String(m),!r.has(l,m)){var E=this._arr,j=E.length;return l[m]=j,E.push({key:m,priority:O}),this._decrease(j),!0}return!1},p.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var m=this._arr.pop();return delete this._keyIndices[m.key],this._heapify(0),m.key},p.prototype.decrease=function(m,O){var l=this._keyIndices[m];if(O>this._arr[l].priority)throw new Error("New priority is greater than current priority. Key: "+m+" Old: "+this._arr[l].priority+" New: "+O);this._arr[l].priority=O,this._decrease(l)},p.prototype._heapify=function(m){var O=this._arr,l=2*m,E=l+1,j=m;l<O.length&&(j=O[l].priority<O[j].priority?l:j,E<O.length&&(j=O[E].priority<O[j].priority?E:j),j!==m&&(this._swap(m,j),this._heapify(j)))},p.prototype._decrease=function(m){for(var O,l=this._arr,E=l[m].priority;m!==0&&!(l[O=m>>1].priority<E);)this._swap(m,O),m=O},p.prototype._swap=function(m,O){var l=this._arr,E=this._keyIndices,j=l[m],y=l[O];l[m]=y,l[O]=j,E[y.key]=m,E[j.key]=O}},function(a,A,e){var r=e(42);a.exports=function(p){var m=0,O=[],l={},E=[];return p.nodes().forEach(function(j){r.has(l,j)||function y(n){var s=l[n]={onStack:!0,lowlink:m,index:m++};if(O.push(n),p.successors(n).forEach(function(S){r.has(l,S)?l[S].onStack&&(s.lowlink=Math.min(s.lowlink,l[S].index)):(y(S),s.lowlink=Math.min(s.lowlink,l[S].lowlink))}),s.lowlink===s.index){var d,M=[];do d=O.pop(),l[d].onStack=!1,M.push(d);while(n!==d);E.push(M)}}(j)}),E}},function(a,A,e){var r=e(42);function p(O){var l={},E={},j=[];if(r.each(O.sinks(),function y(n){if(r.has(E,n))throw new m;r.has(l,n)||(E[n]=!0,l[n]=!0,r.each(O.predecessors(n),y),delete E[n],j.push(n))}),r.size(l)!==O.nodeCount())throw new m;return j}function m(){}a.exports=p,p.CycleException=m,m.prototype=new Error},function(a,A,e){var r=e(42);a.exports=function(p,m,O){r.isArray(m)||(m=[m]);var l=(p.isDirected()?p.successors:p.neighbors).bind(p),E=[],j={};return r.each(m,function(y){if(!p.hasNode(y))throw new Error("Graph does not have node: "+y);(function n(s,d,M,S,T,v){r.has(S,d)||(S[d]=!0,M||v.push(d),r.each(T(d),function(x){n(s,x,M,S,T,v)}),M&&v.push(d))})(p,y,O==="post",j,l,E)}),E}},function(a,A,e){var r=e(389);a.exports=function(p){return p?(p=r(p))===1/0||p===-1/0?17976931348623157e292*(p<0?-1:1):p==p?p:0:p===0?p:0}},function(a,A,e){var r=e(139);a.exports=function(p){return(p==null?0:p.length)?r(p,1):[]}},function(a,A,e){var r=e(101),p=e(71);a.exports=function(m,O,l){(l!==void 0&&!p(m[O],l)||l===void 0&&!(O in m))&&r(m,O,l)}},function(a,A){a.exports=function(e,r){if((r!=="constructor"||typeof e[r]!="function")&&r!="__proto__")return e[r]}},function(a,A){a.exports=function(e,r){return e<r}},function(a,A,e){"use strict";var r=e(24),p=e(46).Graph,m=e(112).slack;function O(j,y){return r.forEach(j.nodes(),function n(s){r.forEach(y.nodeEdges(s),function(d){var M=d.v,S=s===M?d.w:M;j.hasNode(S)||m(y,d)||(j.setNode(S,{}),j.setEdge(s,S,{}),n(S))})}),j.nodeCount()}function l(j,y){return r.minBy(y.edges(),function(n){if(j.hasNode(n.v)!==j.hasNode(n.w))return m(y,n)})}function E(j,y,n){r.forEach(j.nodes(),function(s){y.node(s).rank+=n})}a.exports=function(j){var y,n,s=new p({directed:!1}),d=j.nodes()[0],M=j.nodeCount();for(s.setNode(d,{});O(s,j)<M;)y=l(s,j),n=s.hasNode(y.v)?m(j,y):-m(j,y),E(s,j,n);return s}},function(a,A,e){(function(r,p){function m(l){return(m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(l)}/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var O;(function(l){(function(E){var j=(p===void 0?"undefined":m(p))==="object"?p:(typeof self=="undefined"?"undefined":m(self))==="object"?self:m(this)==="object"?this:Function("return this;")(),y=n(l);function n(s,d){return function(M,S){typeof s[M]!="function"&&Object.defineProperty(s,M,{configurable:!0,writable:!0,value:S}),d&&d(M,S)}}j.Reflect===void 0?j.Reflect=l:y=n(j.Reflect,y),function(s){var d=Object.prototype.hasOwnProperty,M=typeof Symbol=="function",S=M&&Symbol.toPrimitive!==void 0?Symbol.toPrimitive:"@@toPrimitive",T=M&&Symbol.iterator!==void 0?Symbol.iterator:"@@iterator",v=typeof Object.create=="function",x={__proto__:[]}instanceof Array,C=!v&&!x,N={create:v?function(){return k(Object.create(null))}:x?function(){return k({__proto__:null})}:function(){return k({})},has:C?function(h,g){return d.call(h,g)}:function(h,g){return g in h},get:C?function(h,g){return d.call(h,g)?h[g]:void 0}:function(h,g){return h[g]}},X=Object.getPrototypeOf(Function),tt=(r===void 0?"undefined":m(r))==="object"&&r.env&&r.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",it=tt||typeof Map!="function"||typeof Map.prototype.entries!="function"?function(){var h={},g=[],F=function(){function nt(St,dt,gt){this._index=0,this._keys=St,this._values=dt,this._selector=gt}return nt.prototype["@@iterator"]=function(){return this},nt.prototype[T]=function(){return this},nt.prototype.next=function(){var St=this._index;if(St>=0&&St<this._keys.length){var dt=this._selector(this._keys[St],this._values[St]);return St+1>=this._keys.length?(this._index=-1,this._keys=g,this._values=g):this._index++,{value:dt,done:!1}}return{value:void 0,done:!0}},nt.prototype.throw=function(St){throw this._index>=0&&(this._index=-1,this._keys=g,this._values=g),St},nt.prototype.return=function(St){return this._index>=0&&(this._index=-1,this._keys=g,this._values=g),{value:St,done:!0}},nt}();return function(){function nt(){this._keys=[],this._values=[],this._cacheKey=h,this._cacheIndex=-2}return Object.defineProperty(nt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),nt.prototype.has=function(St){return this._find(St,!1)>=0},nt.prototype.get=function(St){var dt=this._find(St,!1);return dt>=0?this._values[dt]:void 0},nt.prototype.set=function(St,dt){var gt=this._find(St,!0);return this._values[gt]=dt,this},nt.prototype.delete=function(St){var dt=this._find(St,!1);if(dt>=0){for(var gt=this._keys.length,yt=dt+1;yt<gt;yt++)this._keys[yt-1]=this._keys[yt],this._values[yt-1]=this._values[yt];return this._keys.length--,this._values.length--,St===this._cacheKey&&(this._cacheKey=h,this._cacheIndex=-2),!0}return!1},nt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=h,this._cacheIndex=-2},nt.prototype.keys=function(){return new F(this._keys,this._values,V)},nt.prototype.values=function(){return new F(this._keys,this._values,H)},nt.prototype.entries=function(){return new F(this._keys,this._values,et)},nt.prototype["@@iterator"]=function(){return this.entries()},nt.prototype[T]=function(){return this.entries()},nt.prototype._find=function(St,dt){return this._cacheKey!==St&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=St)),this._cacheIndex<0&&dt&&(this._cacheIndex=this._keys.length,this._keys.push(St),this._values.push(void 0)),this._cacheIndex},nt}();function V(nt,St){return nt}function H(nt,St){return St}function et(nt,St){return[nt,St]}}():Map,pt=tt||typeof Set!="function"||typeof Set.prototype.entries!="function"?function(){function h(){this._map=new it}return Object.defineProperty(h.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),h.prototype.has=function(g){return this._map.has(g)},h.prototype.add=function(g){return this._map.set(g,g),this},h.prototype.delete=function(g){return this._map.delete(g)},h.prototype.clear=function(){this._map.clear()},h.prototype.keys=function(){return this._map.keys()},h.prototype.values=function(){return this._map.values()},h.prototype.entries=function(){return this._map.entries()},h.prototype["@@iterator"]=function(){return this.keys()},h.prototype[T]=function(){return this.keys()},h}():Set,ft=new(tt||typeof WeakMap!="function"?function(){var h=N.create(),g=F();return function(){function nt(){this._key=F()}return nt.prototype.has=function(St){var dt=V(St,!1);return dt!==void 0&&N.has(dt,this._key)},nt.prototype.get=function(St){var dt=V(St,!1);return dt!==void 0?N.get(dt,this._key):void 0},nt.prototype.set=function(St,dt){return V(St,!0)[this._key]=dt,this},nt.prototype.delete=function(St){var dt=V(St,!1);return dt!==void 0&&delete dt[this._key]},nt.prototype.clear=function(){this._key=F()},nt}();function F(){var nt;do nt="@@WeakMap@@"+et();while(N.has(h,nt));return h[nt]=!0,nt}function V(nt,St){if(!d.call(nt,g)){if(!St)return;Object.defineProperty(nt,g,{value:N.create()})}return nt[g]}function H(nt,St){for(var dt=0;dt<St;++dt)nt[dt]=255*Math.random()|0;return nt}function et(){var nt,St=(nt=16,typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(nt)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(nt)):H(new Uint8Array(nt),nt):H(new Array(nt),nt));St[6]=79&St[6]|64,St[8]=191&St[8]|128;for(var dt="",gt=0;gt<16;++gt){var yt=St[gt];gt!==4&&gt!==6&&gt!==8||(dt+="-"),yt<16&&(dt+="0"),dt+=yt.toString(16).toLowerCase()}return dt}}():WeakMap);function Ot(h,g,F){var V=ft.get(h);if(Et(V)){if(!F)return;V=new it,ft.set(h,V)}var H=V.get(g);if(Et(H)){if(!F)return;H=new it,V.set(g,H)}return H}function wt(h,g,F){var V=Ot(g,F,!1);return!Et(V)&&!!V.has(h)}function xt(h,g,F){var V=Ot(g,F,!1);if(!Et(V))return V.get(h)}function lt(h,g,F,V){Ot(F,V,!0).set(h,g)}function Vt(h,g){var F=[],V=Ot(h,g,!1);if(Et(V))return F;for(var H=function(dt){var gt=ot(dt,T);if(!q(gt))throw new TypeError;var yt=gt.call(dt);if(!ht(yt))throw new TypeError;return yt}(V.keys()),et=0;;){var nt=_(H);if(!nt)return F.length=et,F;var St=nt.value;try{F[et]=St}catch(dt){try{P(H)}finally{throw dt}}et++}}function Lt(h){if(h===null)return 1;switch(m(h)){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return h===null?1:6;default:return 6}}function Et(h){return h===void 0}function J(h){return h===null}function ht(h){return m(h)==="object"?h!==null:typeof h=="function"}function vt(h,g){switch(Lt(h)){case 0:case 1:case 2:case 3:case 4:case 5:return h}var F=g===3?"string":g===5?"number":"default",V=ot(h,S);if(V!==void 0){var H=V.call(h,F);if(ht(H))throw new TypeError;return H}return function(et,nt){if(nt==="string"){var St=et.toString;if(q(St)&&!ht(gt=St.call(et))||q(dt=et.valueOf)&&!ht(gt=dt.call(et)))return gt}else{var dt;if(q(dt=et.valueOf)&&!ht(gt=dt.call(et)))return gt;var gt,yt=et.toString;if(q(yt)&&!ht(gt=yt.call(et)))return gt}throw new TypeError}(h,F==="default"?"number":F)}function bt(h){var g=vt(h,3);return m(g)==="symbol"?g:function(F){return""+F}(g)}function At(h){return Array.isArray?Array.isArray(h):h instanceof Object?h instanceof Array:Object.prototype.toString.call(h)==="[object Array]"}function q(h){return typeof h=="function"}function ct(h){return typeof h=="function"}function ot(h,g){var F=h[g];if(F!=null){if(!q(F))throw new TypeError;return F}}function _(h){var g=h.next();return!g.done&&g}function P(h){var g=h.return;g&&g.call(h)}function Y(h){var g=Object.getPrototypeOf(h);if(typeof h!="function"||h===X||g!==X)return g;var F=h.prototype,V=F&&Object.getPrototypeOf(F);if(V==null||V===Object.prototype)return g;var H=V.constructor;return typeof H!="function"||H===h?g:H}function k(h){return h.__=void 0,delete h.__,h}s("decorate",function(h,g,F,V){if(Et(F)){if(!At(h))throw new TypeError;if(!ct(g))throw new TypeError;return function(H,et){for(var nt=H.length-1;nt>=0;--nt){var St=(0,H[nt])(et);if(!Et(St)&&!J(St)){if(!ct(St))throw new TypeError;et=St}}return et}(h,g)}if(!At(h))throw new TypeError;if(!ht(g))throw new TypeError;if(!ht(V)&&!Et(V)&&!J(V))throw new TypeError;return J(V)&&(V=void 0),function(H,et,nt,St){for(var dt=H.length-1;dt>=0;--dt){var gt=(0,H[dt])(et,nt,St);if(!Et(gt)&&!J(gt)){if(!ht(gt))throw new TypeError;St=gt}}return St}(h,g,F=bt(F),V)}),s("metadata",function(h,g){return function(F,V){if(!ht(F))throw new TypeError;if(!Et(V)&&!function(H){switch(Lt(H)){case 3:case 4:return!0;default:return!1}}(V))throw new TypeError;lt(h,g,F,V)}}),s("defineMetadata",function(h,g,F,V){if(!ht(F))throw new TypeError;return Et(V)||(V=bt(V)),lt(h,g,F,V)}),s("hasMetadata",function(h,g,F){if(!ht(g))throw new TypeError;return Et(F)||(F=bt(F)),function V(H,et,nt){if(wt(H,et,nt))return!0;var St=Y(et);return!J(St)&&V(H,St,nt)}(h,g,F)}),s("hasOwnMetadata",function(h,g,F){if(!ht(g))throw new TypeError;return Et(F)||(F=bt(F)),wt(h,g,F)}),s("getMetadata",function(h,g,F){if(!ht(g))throw new TypeError;return Et(F)||(F=bt(F)),function V(H,et,nt){if(wt(H,et,nt))return xt(H,et,nt);var St=Y(et);return J(St)?void 0:V(H,St,nt)}(h,g,F)}),s("getOwnMetadata",function(h,g,F){if(!ht(g))throw new TypeError;return Et(F)||(F=bt(F)),xt(h,g,F)}),s("getMetadataKeys",function(h,g){if(!ht(h))throw new TypeError;return Et(g)||(g=bt(g)),function F(V,H){var et=Vt(V,H),nt=Y(V);if(nt===null)return et;var St=F(nt,H);if(St.length<=0)return et;if(et.length<=0)return St;for(var dt=new pt,gt=[],yt=0,Ct=et;yt<Ct.length;yt++){var Pt=Ct[yt];dt.has(Pt)||(dt.add(Pt),gt.push(Pt))}for(var Ft=0,Tt=St;Ft<Tt.length;Ft++)Pt=Tt[Ft],dt.has(Pt)||(dt.add(Pt),gt.push(Pt));return gt}(h,g)}),s("getOwnMetadataKeys",function(h,g){if(!ht(h))throw new TypeError;return Et(g)||(g=bt(g)),Vt(h,g)}),s("deleteMetadata",function(h,g,F){if(!ht(g))throw new TypeError;Et(F)||(F=bt(F));var V=Ot(g,F,!1);if(Et(V)||!V.delete(h))return!1;if(V.size>0)return!0;var H=ft.get(g);return H.delete(F),H.size>0||ft.delete(g),!0})}(y)})()})(O||(O={}))}).call(this,e(158),e(164))},function(a,A,e){var r=e(219);a.exports=function(p,m){if(p){if(typeof p=="string")return r(p,m);var O=Object.prototype.toString.call(p).slice(8,-1);return O==="Object"&&p.constructor&&(O=p.constructor.name),O==="Map"||O==="Set"?Array.from(p):O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O)?r(p,m):void 0}}},function(a,A){a.exports=function(e,r){(r==null||r>e.length)&&(r=e.length);for(var p=0,m=new Array(r);p<r;p++)m[p]=e[p];return m}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.MetadataReader=void 0;var r=e(32),p=function(){function m(){}return m.prototype.getConstructorMetadata=function(O){return{compilerGeneratedMetadata:Reflect.getMetadata(r.PARAM_TYPES,O),userGeneratedMetadata:Reflect.getMetadata(r.TAGGED,O)||{}}},m.prototype.getPropertiesMetadata=function(O){return Reflect.getMetadata(r.TAGGED_PROP,O)||[]},m}();A.MetadataReader=p},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.isStackOverflowExeption=void 0;var r=e(41);A.isStackOverflowExeption=function(p){return p instanceof RangeError||p.message===r.STACK_OVERFLOW}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.inject=A.LazyServiceIdentifer=void 0;var r=e(41),p=e(32),m=e(49),O=e(59),l=function(){function E(j){this._cb=j}return E.prototype.unwrap=function(){return this._cb()},E}();A.LazyServiceIdentifer=l,A.inject=function(E){return function(j,y,n){if(E===void 0)throw new Error(r.UNDEFINED_INJECT_ANNOTATION(j.name));var s=new m.Metadata(p.INJECT_TAG,E);typeof n=="number"?O.tagParameter(j,y,n,s):O.tagProperty(j,y,s)}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Target=void 0;var r=e(32),p=e(67),m=e(49),O=e(453),l=function(){function E(j,y,n,s){this.id=p.id(),this.type=j,this.serviceIdentifier=n,this.name=new O.QueryableString(y||""),this.metadata=new Array;var d=null;typeof s=="string"?d=new m.Metadata(r.NAMED_TAG,s):s instanceof m.Metadata&&(d=s),d!==null&&this.metadata.push(d)}return E.prototype.hasTag=function(j){for(var y=0,n=this.metadata;y<n.length;y++)if(n[y].key===j)return!0;return!1},E.prototype.isArray=function(){return this.hasTag(r.MULTI_INJECT_TAG)},E.prototype.matchesArray=function(j){return this.matchesTag(r.MULTI_INJECT_TAG)(j)},E.prototype.isNamed=function(){return this.hasTag(r.NAMED_TAG)},E.prototype.isTagged=function(){return this.metadata.some(function(j){return j.key!==r.INJECT_TAG&&j.key!==r.MULTI_INJECT_TAG&&j.key!==r.NAME_TAG&&j.key!==r.UNMANAGED_TAG&&j.key!==r.NAMED_TAG})},E.prototype.isOptional=function(){return this.matchesTag(r.OPTIONAL_TAG)(!0)},E.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(j){return j.key===r.NAMED_TAG})[0]:null},E.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(j){return j.key!==r.INJECT_TAG&&j.key!==r.MULTI_INJECT_TAG&&j.key!==r.NAME_TAG&&j.key!==r.UNMANAGED_TAG&&j.key!==r.NAMED_TAG}):null},E.prototype.matchesNamedTag=function(j){return this.matchesTag(r.NAMED_TAG)(j)},E.prototype.matchesTag=function(j){var y=this;return function(n){for(var s=0,d=y.metadata;s<d.length;s++){var M=d[s];if(M.key===j&&M.value===n)return!0}return!1}},E}();A.Target=l},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.BindingWhenOnSyntax=void 0;var r=e(141),p=e(142),m=function(){function O(l){this._binding=l,this._bindingWhenSyntax=new p.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding)}return O.prototype.when=function(l){return this._bindingWhenSyntax.when(l)},O.prototype.whenTargetNamed=function(l){return this._bindingWhenSyntax.whenTargetNamed(l)},O.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},O.prototype.whenTargetTagged=function(l,E){return this._bindingWhenSyntax.whenTargetTagged(l,E)},O.prototype.whenInjectedInto=function(l){return this._bindingWhenSyntax.whenInjectedInto(l)},O.prototype.whenParentNamed=function(l){return this._bindingWhenSyntax.whenParentNamed(l)},O.prototype.whenParentTagged=function(l,E){return this._bindingWhenSyntax.whenParentTagged(l,E)},O.prototype.whenAnyAncestorIs=function(l){return this._bindingWhenSyntax.whenAnyAncestorIs(l)},O.prototype.whenNoAncestorIs=function(l){return this._bindingWhenSyntax.whenNoAncestorIs(l)},O.prototype.whenAnyAncestorNamed=function(l){return this._bindingWhenSyntax.whenAnyAncestorNamed(l)},O.prototype.whenAnyAncestorTagged=function(l,E){return this._bindingWhenSyntax.whenAnyAncestorTagged(l,E)},O.prototype.whenNoAncestorNamed=function(l){return this._bindingWhenSyntax.whenNoAncestorNamed(l)},O.prototype.whenNoAncestorTagged=function(l,E){return this._bindingWhenSyntax.whenNoAncestorTagged(l,E)},O.prototype.whenAnyAncestorMatches=function(l){return this._bindingWhenSyntax.whenAnyAncestorMatches(l)},O.prototype.whenNoAncestorMatches=function(l){return this._bindingWhenSyntax.whenNoAncestorMatches(l)},O.prototype.onActivation=function(l){return this._bindingOnSyntax.onActivation(l)},O}();A.BindingWhenOnSyntax=m},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.typeConstraint=A.namedConstraint=A.taggedConstraint=A.traverseAncerstors=void 0;var r=e(32),p=e(49);A.traverseAncerstors=function l(E,j){var y=E.parentRequest;return y!==null&&(!!j(y)||l(y,j))};var m=function(E){return function(j){var y=function(s){return s!==null&&s.target!==null&&s.target.matchesTag(E)(j)};return y.metaData=new p.Metadata(E,j),y}};A.taggedConstraint=m;var O=m(r.NAMED_TAG);A.namedConstraint=O,A.typeConstraint=function(l){return function(E){var j=null;if(E!==null){if(j=E.bindings[0],typeof l=="string")return j.serviceIdentifier===l;var y=E.bindings[0].implementationType;return l===y}return!1}}},function(a,A){},function(a,A){},function(a,A){},function(a,A){},function(a,A){},function(a,A){},function(a,A){},function(a,A){a.exports=1e-6},function(a,A){a.exports=function(){var e=new Float32Array(2);return e[0]=0,e[1]=0,e}},function(a,A){a.exports=function(e,r,p){return e[0]=r,e[1]=p,e}},function(a,A){a.exports=function(e,r,p){return e[0]=r[0]+p[0],e[1]=r[1]+p[1],e}},function(a,A){a.exports=function(e,r,p){return e[0]=r[0]*p[0],e[1]=r[1]*p[1],e}},function(a,A){a.exports=function(e,r,p){return e[0]=r[0]/p[0],e[1]=r[1]/p[1],e}},function(a,A){a.exports=function(e,r){var p=r[0]-e[0],m=r[1]-e[1];return Math.sqrt(p*p+m*m)}},function(a,A){a.exports=function(e,r){var p=r[0]-e[0],m=r[1]-e[1];return p*p+m*m}},function(a,A){a.exports=function(e){var r=e[0],p=e[1];return Math.sqrt(r*r+p*p)}},function(a,A){a.exports=function(e){var r=e[0],p=e[1];return r*r+p*p}},function(a,A){a.exports=function(e,r){var p=r[0],m=r[1],O=p*p+m*m;return O>0&&(O=1/Math.sqrt(O),e[0]=r[0]*O,e[1]=r[1]*O),e}},function(a,A){a.exports=function(e,r){return e[0]*r[0]+e[1]*r[1]}},function(a,A){},function(a,A){},function(a,A,e){"use strict";var r={};e.r(r),e.d(r,"easeLinear",function(){return wt}),e.d(r,"easeQuad",function(){return Vt}),e.d(r,"easeQuadIn",function(){return xt}),e.d(r,"easeQuadOut",function(){return lt}),e.d(r,"easeQuadInOut",function(){return Vt}),e.d(r,"easeCubic",function(){return J}),e.d(r,"easeCubicIn",function(){return Lt}),e.d(r,"easeCubicOut",function(){return Et}),e.d(r,"easeCubicInOut",function(){return J}),e.d(r,"easePoly",function(){return bt}),e.d(r,"easePolyIn",function(){return ht}),e.d(r,"easePolyOut",function(){return vt}),e.d(r,"easePolyInOut",function(){return bt}),e.d(r,"easeSin",function(){return _}),e.d(r,"easeSinIn",function(){return ct}),e.d(r,"easeSinOut",function(){return ot}),e.d(r,"easeSinInOut",function(){return _}),e.d(r,"easeExp",function(){return h}),e.d(r,"easeExpIn",function(){return Y}),e.d(r,"easeExpOut",function(){return k}),e.d(r,"easeExpInOut",function(){return h}),e.d(r,"easeCircle",function(){return V}),e.d(r,"easeCircleIn",function(){return g}),e.d(r,"easeCircleOut",function(){return F}),e.d(r,"easeCircleInOut",function(){return V}),e.d(r,"easeBounce",function(){return nt}),e.d(r,"easeBounceIn",function(){return et}),e.d(r,"easeBounceOut",function(){return nt}),e.d(r,"easeBounceInOut",function(){return St}),e.d(r,"easeBack",function(){return yt}),e.d(r,"easeBackIn",function(){return dt}),e.d(r,"easeBackOut",function(){return gt}),e.d(r,"easeBackInOut",function(){return yt}),e.d(r,"easeElastic",function(){return Ft}),e.d(r,"easeElasticIn",function(){return Pt}),e.d(r,"easeElasticOut",function(){return Ft}),e.d(r,"easeElasticInOut",function(){return Tt});var p=e(1),m=e(119),O=e(117),l=e(19),E=e(0);function j(oe){return(j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Kt){return typeof Kt}:function(Kt){return Kt&&typeof Symbol=="function"&&Kt.constructor===Symbol&&Kt!==Symbol.prototype?"symbol":typeof Kt})(oe)}var y,n,s=0,d=0,M=0,S=0,T=0,v=0,x=(typeof performance=="undefined"?"undefined":j(performance))==="object"&&performance.now?performance:Date,C=(typeof window=="undefined"?"undefined":j(window))==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(oe){setTimeout(oe,17)};function N(){return T||(C(X),T=x.now()+v)}function X(){T=0}function tt(){this._call=this._time=this._next=null}function it(oe,Kt,te){var Oe=new tt;return Oe.restart(oe,Kt,te),Oe}function pt(){T=(S=x.now())+v,s=d=0;try{(function(){N(),++s;for(var oe,Kt=y;Kt;)(oe=T-Kt._time)>=0&&Kt._call.call(null,oe),Kt=Kt._next;--s})()}finally{s=0,function(){for(var oe,Kt,te=y,Oe=1/0;te;)te._call?(Oe>te._time&&(Oe=te._time),oe=te,te=te._next):(Kt=te._next,te._next=null,te=oe?oe._next=Kt:y=Kt);n=oe,Ot(Oe)}(),T=0}}function ft(){var oe=x.now(),Kt=oe-S;Kt>1e3&&(v-=Kt,S=oe)}function Ot(oe){s||(d&&(d=clearTimeout(d)),oe-T>24?(oe<1/0&&(d=setTimeout(pt,oe-x.now()-v)),M&&(M=clearInterval(M))):(M||(S=x.now(),M=setInterval(ft,1e3)),s=1,C(pt)))}function wt(oe){return+oe}function xt(oe){return oe*oe}function lt(oe){return oe*(2-oe)}function Vt(oe){return((oe*=2)<=1?oe*oe:--oe*(2-oe)+1)/2}function Lt(oe){return oe*oe*oe}function Et(oe){return--oe*oe*oe+1}function J(oe){return((oe*=2)<=1?oe*oe*oe:(oe-=2)*oe*oe+2)/2}tt.prototype=it.prototype={constructor:tt,restart:function(Kt,te,Oe){if(typeof Kt!="function")throw new TypeError("callback is not a function");Oe=(Oe==null?N():+Oe)+(te==null?0:+te),this._next||n===this||(n?n._next=this:y=this,n=this),this._call=Kt,this._time=Oe,Ot()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ot())}};var ht=function oe(Kt){function te(Oe){return Math.pow(Oe,Kt)}return Kt=+Kt,te.exponent=oe,te}(3),vt=function oe(Kt){function te(Oe){return 1-Math.pow(1-Oe,Kt)}return Kt=+Kt,te.exponent=oe,te}(3),bt=function oe(Kt){function te(Oe){return((Oe*=2)<=1?Math.pow(Oe,Kt):2-Math.pow(2-Oe,Kt))/2}return Kt=+Kt,te.exponent=oe,te}(3),At=Math.PI,q=At/2;function ct(oe){return+oe==1?1:1-Math.cos(oe*q)}function ot(oe){return Math.sin(oe*q)}function _(oe){return(1-Math.cos(At*oe))/2}function P(oe){return 1.0009775171065494*(Math.pow(2,-10*oe)-.0009765625)}function Y(oe){return P(1-+oe)}function k(oe){return 1-P(oe)}function h(oe){return((oe*=2)<=1?P(1-oe):2-P(oe-1))/2}function g(oe){return 1-Math.sqrt(1-oe*oe)}function F(oe){return Math.sqrt(1- --oe*oe)}function V(oe){return((oe*=2)<=1?1-Math.sqrt(1-oe*oe):Math.sqrt(1-(oe-=2)*oe)+1)/2}var H=7.5625;function et(oe){return 1-nt(1-oe)}function nt(oe){return(oe=+oe)<4/11?H*oe*oe:oe<8/11?H*(oe-=6/11)*oe+3/4:oe<10/11?H*(oe-=9/11)*oe+15/16:H*(oe-=21/22)*oe+63/64}function St(oe){return((oe*=2)<=1?1-nt(1-oe):nt(oe-1)+1)/2}var dt=function oe(Kt){function te(Oe){return(Oe=+Oe)*Oe*(Kt*(Oe-1)+Oe)}return Kt=+Kt,te.overshoot=oe,te}(1.70158),gt=function oe(Kt){function te(Oe){return--Oe*Oe*((Oe+1)*Kt+Oe)+1}return Kt=+Kt,te.overshoot=oe,te}(1.70158),yt=function oe(Kt){function te(Oe){return((Oe*=2)<1?Oe*Oe*((Kt+1)*Oe-Kt):(Oe-=2)*Oe*((Kt+1)*Oe+Kt)+2)/2}return Kt=+Kt,te.overshoot=oe,te}(1.70158),Ct=2*Math.PI,Pt=function oe(Kt,te){var Oe=Math.asin(1/(Kt=Math.max(1,Kt)))*(te/=Ct);function Qe(On){return Kt*P(- --On)*Math.sin((Oe-On)/te)}return Qe.amplitude=function(On){return oe(On,te*Ct)},Qe.period=function(On){return oe(Kt,On)},Qe}(1,.3),Ft=function oe(Kt,te){var Oe=Math.asin(1/(Kt=Math.max(1,Kt)))*(te/=Ct);function Qe(On){return 1-Kt*P(On=+On)*Math.sin((On+Oe)/te)}return Qe.amplitude=function(On){return oe(On,te*Ct)},Qe.period=function(On){return oe(Kt,On)},Qe}(1,.3),Tt=function oe(Kt,te){var Oe=Math.asin(1/(Kt=Math.max(1,Kt)))*(te/=Ct);function Qe(On){return((On=2*On-1)<0?Kt*P(-On)*Math.sin((Oe-On)/te):2-Kt*P(On)*Math.sin((Oe+On)/te))/2}return Qe.amplitude=function(On){return oe(On,te*Ct)},Qe.period=function(On){return oe(Kt,On)},Qe}(1,.3),zt=function(Kt,te,Oe){Kt.prototype=te.prototype=Oe,Oe.constructor=Kt};function Xt(oe,Kt){var te=Object.create(oe.prototype);for(var Oe in Kt)te[Oe]=Kt[Oe];return te}function re(){}var de="\\s*([+-]?\\d+)\\s*",ye="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",we="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",De=/^#([0-9a-f]{3,8})$/,Ve=new RegExp("^rgb\\("+[de,de,de]+"\\)$"),pn=new RegExp("^rgb\\("+[we,we,we]+"\\)$"),sn=new RegExp("^rgba\\("+[de,de,de,ye]+"\\)$"),In=new RegExp("^rgba\\("+[we,we,we,ye]+"\\)$"),An=new RegExp("^hsl\\("+[ye,we,we]+"\\)$"),Rn=new RegExp("^hsla\\("+[ye,we,we,ye]+"\\)$"),Mn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Cn(){return this.rgb().formatHex()}function Gn(){return this.rgb().formatRgb()}function Xn(oe){var Kt,te;return oe=(oe+"").trim().toLowerCase(),(Kt=De.exec(oe))?(te=Kt[1].length,Kt=parseInt(Kt[1],16),te===6?tr(Kt):te===3?new Sr(Kt>>8&15|Kt>>4&240,Kt>>4&15|240&Kt,(15&Kt)<<4|15&Kt,1):te===8?or(Kt>>24&255,Kt>>16&255,Kt>>8&255,(255&Kt)/255):te===4?or(Kt>>12&15|Kt>>8&240,Kt>>8&15|Kt>>4&240,Kt>>4&15|240&Kt,((15&Kt)<<4|15&Kt)/255):null):(Kt=Ve.exec(oe))?new Sr(Kt[1],Kt[2],Kt[3],1):(Kt=pn.exec(oe))?new Sr(255*Kt[1]/100,255*Kt[2]/100,255*Kt[3]/100,1):(Kt=sn.exec(oe))?or(Kt[1],Kt[2],Kt[3],Kt[4]):(Kt=In.exec(oe))?or(255*Kt[1]/100,255*Kt[2]/100,255*Kt[3]/100,Kt[4]):(Kt=An.exec(oe))?Fi(Kt[1],Kt[2]/100,Kt[3]/100,1):(Kt=Rn.exec(oe))?Fi(Kt[1],Kt[2]/100,Kt[3]/100,Kt[4]):Mn.hasOwnProperty(oe)?tr(Mn[oe]):oe==="transparent"?new Sr(NaN,NaN,NaN,0):null}function tr(oe){return new Sr(oe>>16&255,oe>>8&255,255&oe,1)}function or(oe,Kt,te,Oe){return Oe<=0&&(oe=Kt=te=NaN),new Sr(oe,Kt,te,Oe)}function nr(oe){return oe instanceof re||(oe=Xn(oe)),oe?new Sr((oe=oe.rgb()).r,oe.g,oe.b,oe.opacity):new Sr}function er(oe,Kt,te,Oe){return arguments.length===1?nr(oe):new Sr(oe,Kt,te,Oe==null?1:Oe)}function Sr(oe,Kt,te,Oe){this.r=+oe,this.g=+Kt,this.b=+te,this.opacity=+Oe}function Vr(){return"#"+hi(this.r)+hi(this.g)+hi(this.b)}function ti(){var oe=this.opacity;return((oe=isNaN(oe)?1:Math.max(0,Math.min(1,oe)))===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(oe===1?")":", "+oe+")")}function hi(oe){return((oe=Math.max(0,Math.min(255,Math.round(oe)||0)))<16?"0":"")+oe.toString(16)}function Fi(oe,Kt,te,Oe){return Oe<=0?oe=Kt=te=NaN:te<=0||te>=1?oe=Kt=NaN:Kt<=0&&(oe=NaN),new si(oe,Kt,te,Oe)}function to(oe){if(oe instanceof si)return new si(oe.h,oe.s,oe.l,oe.opacity);if(oe instanceof re||(oe=Xn(oe)),!oe)return new si;if(oe instanceof si)return oe;var Kt=(oe=oe.rgb()).r/255,te=oe.g/255,Oe=oe.b/255,Qe=Math.min(Kt,te,Oe),On=Math.max(Kt,te,Oe),Vn=NaN,Hn=On-Qe,$e=(On+Qe)/2;return Hn?(Vn=Kt===On?(te-Oe)/Hn+6*(te<Oe):te===On?(Oe-Kt)/Hn+2:(Kt-te)/Hn+4,Hn/=$e<.5?On+Qe:2-On-Qe,Vn*=60):Hn=$e>0&&$e<1?0:Vn,new si(Vn,Hn,$e,oe.opacity)}function si(oe,Kt,te,Oe){this.h=+oe,this.s=+Kt,this.l=+te,this.opacity=+Oe}function Ti(oe,Kt,te){return 255*(oe<60?Kt+(te-Kt)*oe/60:oe<180?te:oe<240?Kt+(te-Kt)*(240-oe)/60:Kt)}function Ui(oe,Kt,te,Oe,Qe){var On=oe*oe,Vn=On*oe;return((1-3*oe+3*On-Vn)*Kt+(4-6*On+3*Vn)*te+(1+3*oe+3*On-3*Vn)*Oe+Vn*Qe)/6}zt(re,Xn,{copy:function(Kt){return Object.assign(new this.constructor,this,Kt)},displayable:function(){return this.rgb().displayable()},hex:Cn,formatHex:Cn,formatHsl:function(){return to(this).formatHsl()},formatRgb:Gn,toString:Gn}),zt(Sr,er,Xt(re,{brighter:function(Kt){return Kt=Kt==null?1/.7:Math.pow(1/.7,Kt),new Sr(this.r*Kt,this.g*Kt,this.b*Kt,this.opacity)},darker:function(Kt){return Kt=Kt==null?.7:Math.pow(.7,Kt),new Sr(this.r*Kt,this.g*Kt,this.b*Kt,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vr,formatHex:Vr,formatRgb:ti,toString:ti})),zt(si,function(oe,Kt,te,Oe){return arguments.length===1?to(oe):new si(oe,Kt,te,Oe==null?1:Oe)},Xt(re,{brighter:function(Kt){return Kt=Kt==null?1/.7:Math.pow(1/.7,Kt),new si(this.h,this.s,this.l*Kt,this.opacity)},darker:function(Kt){return Kt=Kt==null?.7:Math.pow(.7,Kt),new si(this.h,this.s,this.l*Kt,this.opacity)},rgb:function(){var Kt=this.h%360+360*(this.h<0),te=isNaN(Kt)||isNaN(this.s)?0:this.s,Oe=this.l,Qe=Oe+(Oe<.5?Oe:1-Oe)*te,On=2*Oe-Qe;return new Sr(Ti(Kt>=240?Kt-240:Kt+120,On,Qe),Ti(Kt,On,Qe),Ti(Kt<120?Kt+240:Kt-120,On,Qe),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Kt=this.opacity;return((Kt=isNaN(Kt)?1:Math.max(0,Math.min(1,Kt)))===1?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(Kt===1?")":", "+Kt+")")}}));var Li=function(Kt){return function(){return Kt}};function Vi(oe,Kt){return function(te){return oe+te*Kt}}function ro(oe){return(oe=+oe)==1?jr:function(Kt,te){return te-Kt?function(Oe,Qe,On){return Oe=Math.pow(Oe,On),Qe=Math.pow(Qe,On)-Oe,On=1/On,function(Vn){return Math.pow(Oe+Vn*Qe,On)}}(Kt,te,oe):Li(isNaN(Kt)?te:Kt)}}function jr(oe,Kt){var te=Kt-oe;return te?Vi(oe,te):Li(isNaN(oe)?Kt:oe)}var Ji=function oe(Kt){var te=ro(Kt);function Oe(Qe,On){var Vn=te((Qe=er(Qe)).r,(On=er(On)).r),Hn=te(Qe.g,On.g),$e=te(Qe.b,On.b),rn=jr(Qe.opacity,On.opacity);return function(on){return Qe.r=Vn(on),Qe.g=Hn(on),Qe.b=$e(on),Qe.opacity=rn(on),Qe+""}}return Oe.gamma=oe,Oe}(1);function pr(oe){return function(Kt){var te,Oe,Qe=Kt.length,On=new Array(Qe),Vn=new Array(Qe),Hn=new Array(Qe);for(te=0;te<Qe;++te)Oe=er(Kt[te]),On[te]=Oe.r||0,Vn[te]=Oe.g||0,Hn[te]=Oe.b||0;return On=oe(On),Vn=oe(Vn),Hn=oe(Hn),Oe.opacity=1,function($e){return Oe.r=On($e),Oe.g=Vn($e),Oe.b=Hn($e),Oe+""}}}pr(function(oe){var Kt=oe.length-1;return function(te){var Oe=te<=0?te=0:te>=1?(te=1,Kt-1):Math.floor(te*Kt),Qe=oe[Oe],On=oe[Oe+1],Vn=Oe>0?oe[Oe-1]:2*Qe-On,Hn=Oe<Kt-1?oe[Oe+2]:2*On-Qe;return Ui((te-Oe/Kt)*Kt,Vn,Qe,On,Hn)}}),pr(function(oe){var Kt=oe.length;return function(te){var Oe=Math.floor(((te%=1)<0?++te:te)*Kt),Qe=oe[(Oe+Kt-1)%Kt],On=oe[Oe%Kt],Vn=oe[(Oe+1)%Kt],Hn=oe[(Oe+2)%Kt];return Ui((te-Oe/Kt)*Kt,Qe,On,Vn,Hn)}});var Xr=function(Kt,te){te||(te=[]);var Oe,Qe=Kt?Math.min(te.length,Kt.length):0,On=te.slice();return function(Vn){for(Oe=0;Oe<Qe;++Oe)On[Oe]=Kt[Oe]*(1-Vn)+te[Oe]*Vn;return On}};function Br(oe){return ArrayBuffer.isView(oe)&&!(oe instanceof DataView)}function Nr(oe,Kt){var te,Oe=Kt?Kt.length:0,Qe=oe?Math.min(Oe,oe.length):0,On=new Array(Qe),Vn=new Array(Oe);for(te=0;te<Qe;++te)On[te]=Oi(oe[te],Kt[te]);for(;te<Oe;++te)Vn[te]=Kt[te];return function(Hn){for(te=0;te<Qe;++te)Vn[te]=On[te](Hn);return Vn}}var Yr=function(Kt,te){var Oe=new Date;return Kt=+Kt,te=+te,function(Qe){return Oe.setTime(Kt*(1-Qe)+te*Qe),Oe}},Kr=function(Kt,te){return Kt=+Kt,te=+te,function(Oe){return Kt*(1-Oe)+te*Oe}};function ni(oe){return(ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Kt){return typeof Kt}:function(Kt){return Kt&&typeof Symbol=="function"&&Kt.constructor===Symbol&&Kt!==Symbol.prototype?"symbol":typeof Kt})(oe)}var fi=function(Kt,te){var Oe,Qe={},On={};for(Oe in Kt!==null&&ni(Kt)==="object"||(Kt={}),te!==null&&ni(te)==="object"||(te={}),te)Oe in Kt?Qe[Oe]=Oi(Kt[Oe],te[Oe]):On[Oe]=te[Oe];return function(Vn){for(Oe in Qe)On[Oe]=Qe[Oe](Vn);return On}},$r=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ci=new RegExp($r.source,"g"),Qr=function(Kt,te){var Oe,Qe,On,Vn=$r.lastIndex=ci.lastIndex=0,Hn=-1,$e=[],rn=[];for(Kt+="",te+="";(Oe=$r.exec(Kt))&&(Qe=ci.exec(te));)(On=Qe.index)>Vn&&(On=te.slice(Vn,On),$e[Hn]?$e[Hn]+=On:$e[++Hn]=On),(Oe=Oe[0])===(Qe=Qe[0])?$e[Hn]?$e[Hn]+=Qe:$e[++Hn]=Qe:($e[++Hn]=null,rn.push({i:Hn,x:Kr(Oe,Qe)})),Vn=ci.lastIndex;return Vn<te.length&&(On=te.slice(Vn),$e[Hn]?$e[Hn]+=On:$e[++Hn]=On),$e.length<2?rn[0]?function(on){return function($n){return on($n)+""}}(rn[0].x):function(on){return function(){return on}}(te):(te=rn.length,function(on){for(var $n,vr=0;vr<te;++vr)$e[($n=rn[vr]).i]=$n.x(on);return $e.join("")})};function gi(oe){return(gi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Kt){return typeof Kt}:function(Kt){return Kt&&typeof Symbol=="function"&&Kt.constructor===Symbol&&Kt!==Symbol.prototype?"symbol":typeof Kt})(oe)}var Oi=function(Kt,te){var Oe,Qe=gi(te);return te==null||Qe==="boolean"?Li(te):(Qe==="number"?Kr:Qe==="string"?(Oe=Xn(te))?(te=Oe,Ji):Qr:te instanceof Xn?Ji:te instanceof Date?Yr:Br(te)?Xr:Array.isArray(te)?Nr:typeof te.valueOf!="function"&&typeof te.toString!="function"||isNaN(te)?fi:Kr)(Kt,te)},bi=e(51),_i=[1,0,0,0,1,0,0,0,1];function Qi(oe,Kt,te){var Oe,Qe=Kt.startTime;if(te<Qe+Kt.delay||Kt._paused)return!1;var On=Kt.duration,Vn=Kt.easing;if(te=te-Qe-Kt.delay,Kt.repeat)Oe=te%On/On,Oe=r[Vn](Oe);else{if(!((Oe=te/On)<1))return Kt.onFrame?oe.attr(Kt.onFrame(1)):oe.attr(Kt.toAttrs),!0;Oe=r[Vn](Oe)}if(Kt.onFrame){var Hn=Kt.onFrame(Oe);oe.attr(Hn)}else(function($e,rn,on){var $n={},vr=rn.fromAttrs,ar=rn.toAttrs;if(!$e.destroyed){var rr,Fr,Ar,wr;for(var xr in ar)if(!Object(E.q)(vr[xr],ar[xr]))if(xr==="path"){var Er=ar[xr],Ir=vr[xr];Er.length>Ir.length?(Er=bi.parsePathString(ar[xr]),Ir=bi.parsePathString(vr[xr]),Ir=bi.fillPathByDiff(Ir,Er),Ir=bi.formatPath(Ir,Er),rn.fromAttrs.path=Ir,rn.toAttrs.path=Er):rn.pathFormatted||(Er=bi.parsePathString(ar[xr]),Ir=bi.parsePathString(vr[xr]),Ir=bi.formatPath(Ir,Er),rn.fromAttrs.path=Ir,rn.toAttrs.path=Er,rn.pathFormatted=!0),$n[xr]=[];for(var Lr=0;Lr<Er.length;Lr++){for(var Pr=Er[Lr],Dr=Ir[Lr],ri=[],vi=0;vi<Pr.length;vi++)Object(E.t)(Pr[vi])&&Dr&&Object(E.t)(Dr[vi])?(rr=Oi(Dr[vi],Pr[vi]),ri.push(rr(on))):ri.push(Pr[vi]);$n[xr].push(ri)}}else if(xr==="matrix"){var ii=(Ar=vr[xr]||_i,(Br(wr=ar[xr]||_i)?Xr:Nr)(Ar,wr))(on);$n[xr]=ii}else["fill","stroke","fillStyle","strokeStyle"].includes(xr)&&(Fr=ar[xr],/^[r,R,L,l]{1}[\s]*\(/.test(Fr))?$n[xr]=ar[xr]:Object(E.r)(ar[xr])||(rr=Oi(vr[xr],ar[xr]),$n[xr]=rr(on));$e.attr($n)}})(oe,Kt,Oe);return!1}var io=function(){function oe(Kt){this.animators=[],this.current=0,this.timer=null,this.canvas=Kt}return oe.prototype.initTimer=function(){var Kt,te,Oe,Qe=this;this.timer=it(function(On){if(Qe.current=On,Qe.animators.length>0){for(var Vn=Qe.animators.length-1;Vn>=0;Vn--)if((Kt=Qe.animators[Vn]).destroyed)Qe.removeAnimator(Vn);else{if(!Kt.isAnimatePaused())for(var Hn=(te=Kt.get("animations")).length-1;Hn>=0;Hn--)Oe=te[Hn],Qi(Kt,Oe,On)&&(te.splice(Hn,1),Oe.callback&&Oe.callback());te.length===0&&Qe.removeAnimator(Vn)}Qe.canvas.get("autoDraw")||Qe.canvas.draw()}})},oe.prototype.addAnimator=function(Kt){this.animators.push(Kt)},oe.prototype.removeAnimator=function(Kt){this.animators.splice(Kt,1)},oe.prototype.isAnimating=function(){return!!this.animators.length},oe.prototype.stop=function(){this.timer&&this.timer.stop()},oe.prototype.stopAllAnimations=function(Kt){Kt===void 0&&(Kt=!0),this.animators.forEach(function(te){te.stopAnimate(Kt)}),this.animators=[],this.canvas.draw()},oe.prototype.getTime=function(){return this.current},oe}(),Wi=e(114),Zi=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Pi(oe,Kt,te){te.name=Kt,te.target=oe,te.currentTarget=oe,te.delegateTarget=oe,oe.emit(Kt,te)}function no(oe,Kt,te){if(te.bubbles){var Oe=void 0,Qe=!1;if(Kt==="mouseenter"?(Oe=te.fromShape,Qe=!0):Kt==="mouseleave"&&(Qe=!0,Oe=te.toShape),oe.isCanvas()&&Qe)return;if(Oe&&Object(l.g)(oe,Oe))return void(te.bubbles=!1);te.name=Kt,te.currentTarget=oe,te.delegateTarget=oe,oe.emit(Kt,te)}}var Mo=function(){function oe(Kt){var te=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(Oe){var Qe=Oe.type;te._triggerEvent(Qe,Oe)},this._onDocumentMove=function(Oe){if(te.canvas.get("el")!==Oe.target&&(te.dragging||te.currentShape)){var Qe=te._getPointInfo(Oe);te.dragging&&te._emitEvent("drag",Oe,Qe,te.draggingShape)}},this._onDocumentMouseUp=function(Oe){if(te.canvas.get("el")!==Oe.target&&te.dragging){var Qe=te._getPointInfo(Oe);te.draggingShape&&te._emitEvent("drop",Oe,Qe,null),te._emitEvent("dragend",Oe,Qe,te.draggingShape),te._afterDrag(te.draggingShape,Qe,Oe)}},this.canvas=Kt.canvas}return oe.prototype.init=function(){this._bindEvents()},oe.prototype._bindEvents=function(){var Kt=this,te=this.canvas.get("el");Object(l.a)(Zi,function(Oe){te.addEventListener(Oe,Kt._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},oe.prototype._clearEvents=function(){var Kt=this,te=this.canvas.get("el");Object(l.a)(Zi,function(Oe){te.removeEventListener(Oe,Kt._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},oe.prototype._getEventObj=function(Kt,te,Oe,Qe,On,Vn){var Hn=new Wi.a(Kt,te);return Hn.fromShape=On,Hn.toShape=Vn,Hn.x=Oe.x,Hn.y=Oe.y,Hn.clientX=Oe.clientX,Hn.clientY=Oe.clientY,Hn.propagationPath.push(Qe),Hn},oe.prototype._getShape=function(Kt,te){return this.canvas.getShape(Kt.x,Kt.y,te)},oe.prototype._getPointInfo=function(Kt){var te=this.canvas,Oe=te.getClientByEvent(Kt),Qe=te.getPointByEvent(Kt);return{x:Qe.x,y:Qe.y,clientX:Oe.x,clientY:Oe.y}},oe.prototype._triggerEvent=function(Kt,te){var Oe=this._getPointInfo(te),Qe=this._getShape(Oe,te),On=this["_on"+Kt],Vn=!1;if(On)On.call(this,Oe,Qe,te);else{var Hn=this.currentShape;Kt==="mouseenter"||Kt==="dragenter"||Kt==="mouseover"?(this._emitEvent(Kt,te,Oe,null,null,Qe),Qe&&this._emitEvent(Kt,te,Oe,Qe,null,Qe),Kt==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",te,Oe,null)):Kt==="mouseleave"||Kt==="dragleave"||Kt==="mouseout"?(Vn=!0,Hn&&this._emitEvent(Kt,te,Oe,Hn,Hn,null),this._emitEvent(Kt,te,Oe,null,Hn,null),Kt==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",te,Oe,null)):this._emitEvent(Kt,te,Oe,Qe,null,null)}if(Vn||(this.currentShape=Qe),Qe&&!Qe.get("destroyed")){var $e=this.canvas;$e.get("el").style.cursor=Qe.attr("cursor")||$e.get("cursor")}},oe.prototype._onmousedown=function(Kt,te,Oe){Oe.button===0&&(this.mousedownShape=te,this.mousedownPoint=Kt,this.mousedownTimeStamp=Oe.timeStamp),this._emitEvent("mousedown",Oe,Kt,te,null,null)},oe.prototype._emitMouseoverEvents=function(Kt,te,Oe,Qe){var On=this.canvas.get("el");Oe!==Qe&&(Oe&&(this._emitEvent("mouseout",Kt,te,Oe,Oe,Qe),this._emitEvent("mouseleave",Kt,te,Oe,Oe,Qe),Qe&&!Qe.get("destroyed")||(On.style.cursor=this.canvas.get("cursor"))),Qe&&(this._emitEvent("mouseover",Kt,te,Qe,Oe,Qe),this._emitEvent("mouseenter",Kt,te,Qe,Oe,Qe)))},oe.prototype._emitDragoverEvents=function(Kt,te,Oe,Qe,On){Qe?(Qe!==Oe&&(Oe&&this._emitEvent("dragleave",Kt,te,Oe,Oe,Qe),this._emitEvent("dragenter",Kt,te,Qe,Oe,Qe)),On||this._emitEvent("dragover",Kt,te,Qe)):Oe&&this._emitEvent("dragleave",Kt,te,Oe,Oe,Qe),On&&this._emitEvent("dragover",Kt,te,Qe)},oe.prototype._afterDrag=function(Kt,te,Oe){Kt&&(Kt.set("capture",!0),this.draggingShape=null),this.dragging=!1;var Qe=this._getShape(te,Oe);Qe!==Kt&&this._emitMouseoverEvents(Oe,te,Kt,Qe),this.currentShape=Qe},oe.prototype._onmouseup=function(Kt,te,Oe){if(Oe.button===0){var Qe=this.draggingShape;this.dragging?(Qe&&this._emitEvent("drop",Oe,Kt,te),this._emitEvent("dragend",Oe,Kt,Qe),this._afterDrag(Qe,Kt,Oe)):(this._emitEvent("mouseup",Oe,Kt,te),te===this.mousedownShape&&this._emitEvent("click",Oe,Kt,te),this.mousedownShape=null,this.mousedownPoint=null)}},oe.prototype._ondragover=function(Kt,te,Oe){Oe.preventDefault();var Qe=this.currentShape;this._emitDragoverEvents(Oe,Kt,Qe,te,!0)},oe.prototype._onmousemove=function(Kt,te,Oe){var Qe=this.canvas,On=this.currentShape,Vn=this.draggingShape;if(this.dragging)Vn&&this._emitDragoverEvents(Oe,Kt,On,te,!1),this._emitEvent("drag",Oe,Kt,Vn);else{var Hn=this.mousedownPoint;if(Hn){var $e=this.mousedownShape,rn=Oe.timeStamp-this.mousedownTimeStamp,on=Hn.clientX-Kt.clientX,$n=Hn.clientY-Kt.clientY;rn>120||on*on+$n*$n>40?$e&&$e.get("draggable")?((Vn=this.mousedownShape).set("capture",!1),this.draggingShape=Vn,this.dragging=!0,this._emitEvent("dragstart",Oe,Kt,Vn),this.mousedownShape=null,this.mousedownPoint=null):!$e&&Qe.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",Oe,Kt,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(Oe,Kt,On,te),this._emitEvent("mousemove",Oe,Kt,te)):(this._emitMouseoverEvents(Oe,Kt,On,te),this._emitEvent("mousemove",Oe,Kt,te))}else this._emitMouseoverEvents(Oe,Kt,On,te),this._emitEvent("mousemove",Oe,Kt,te)}},oe.prototype._emitEvent=function(Kt,te,Oe,Qe,On,Vn){var Hn=this._getEventObj(Kt,te,Oe,Qe,On,Vn);if(Qe){Hn.shape=Qe,Pi(Qe,Kt,Hn);for(var $e=Qe.getParent();$e;)$e.emitDelegation(Kt,Hn),Hn.propagationStopped||no($e,Kt,Hn),Hn.propagationPath.push($e),$e=$e.getParent()}else Pi(this.canvas,Kt,Hn)},oe.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},oe}(),ao=Object(m.a)(),uo=ao&&ao.name==="firefox",xo=function(oe){function Kt(te){var Oe=oe.call(this,te)||this;return Oe.initContainer(),Oe.initDom(),Oe.initEvents(),Oe.initTimeline(),Oe}return Object(p.b)(Kt,oe),Kt.prototype.getDefaultCfg=function(){var te=oe.prototype.getDefaultCfg.call(this);return te.cursor="default",te.supportCSSTransform=!1,te},Kt.prototype.initContainer=function(){var te=this.get("container");Object(l.h)(te)&&(te=document.getElementById(te),this.set("container",te))},Kt.prototype.initDom=function(){var te=this.createDom();this.set("el",te),this.get("container").appendChild(te),this.setDOMSize(this.get("width"),this.get("height"))},Kt.prototype.initEvents=function(){var te=new Mo({canvas:this});te.init(),this.set("eventController",te)},Kt.prototype.initTimeline=function(){var te=new io(this);this.set("timeline",te)},Kt.prototype.setDOMSize=function(te,Oe){var Qe=this.get("el");l.c&&(Qe.style.width=te+"px",Qe.style.height=Oe+"px")},Kt.prototype.changeSize=function(te,Oe){this.setDOMSize(te,Oe),this.set("width",te),this.set("height",Oe),this.onCanvasChange("changeSize")},Kt.prototype.getRenderer=function(){return this.get("renderer")},Kt.prototype.getCursor=function(){return this.get("cursor")},Kt.prototype.setCursor=function(te){this.set("cursor",te);var Oe=this.get("el");l.c&&Oe&&(Oe.style.cursor=te)},Kt.prototype.getPointByEvent=function(te){if(this.get("supportCSSTransform")){if(uo&&!Object(l.e)(te.layerX)&&te.layerX!==te.offsetX)return{x:te.layerX,y:te.layerY};if(!Object(l.e)(te.offsetX))return{x:te.offsetX,y:te.offsetY}}var Oe=this.getClientByEvent(te),Qe=Oe.x,On=Oe.y;return this.getPointByClient(Qe,On)},Kt.prototype.getClientByEvent=function(te){var Oe=te;return te.touches&&(Oe=te.type==="touchend"?te.changedTouches[0]:te.touches[0]),{x:Oe.clientX,y:Oe.clientY}},Kt.prototype.getPointByClient=function(te,Oe){var Qe=this.get("el").getBoundingClientRect();return{x:te-Qe.left,y:Oe-Qe.top}},Kt.prototype.getClientByPoint=function(te,Oe){var Qe=this.get("el").getBoundingClientRect();return{x:te+Qe.left,y:Oe+Qe.top}},Kt.prototype.draw=function(){},Kt.prototype.removeDom=function(){var te=this.get("el");te.parentNode.removeChild(te)},Kt.prototype.clearEvents=function(){this.get("eventController").destroy()},Kt.prototype.isCanvas=function(){return!0},Kt.prototype.getParent=function(){return null},Kt.prototype.destroy=function(){var te=this.get("timeline");this.get("destroyed")||(this.clear(),te&&te.stop(),this.clearEvents(),this.removeDom(),oe.prototype.destroy.call(this))},Kt}(O.a);A.a=xo},function(a,A,e){"use strict";e.d(A,"a",function(){return m});var r=new Map;function p(S,T){r.set(S,T)}function m(S){return r.get(S)}var O=function(T){var v=T.attr();return{x:v.x,y:v.y,width:v.width,height:v.height}},l=function(T){var v=T.attr(),x=v.x,C=v.y,N=v.r;return{x:x-N,y:C-N,width:2*N,height:2*N}},E=e(20);function j(S,T){return S&&T?{minX:Math.min(S.minX,T.minX),minY:Math.min(S.minY,T.minY),maxX:Math.max(S.maxX,T.maxX),maxY:Math.max(S.maxY,T.maxY)}:S||T}function y(S,T){var v=S.get("startArrowShape"),x=S.get("endArrowShape");return v&&(T=j(T,v.getCanvasBBox())),x&&(T=j(T,x.getCanvasBBox())),T}var n=e(68),s=e(31),d=e(0);function M(S,T){var v=S.prePoint,x=S.currentPoint,C=S.nextPoint,N=Math.pow(x[0]-v[0],2)+Math.pow(x[1]-v[1],2),X=Math.pow(x[0]-C[0],2)+Math.pow(x[1]-C[1],2),tt=Math.pow(v[0]-C[0],2)+Math.pow(v[1]-C[1],2),it=Math.acos((N+X-tt)/(2*Math.sqrt(N)*Math.sqrt(X)));if(!it||Math.sin(it)===0||Object(d.u)(it,0))return{xExtra:0,yExtra:0};var pt=Math.abs(Math.atan2(C[1]-x[1],C[0]-x[0])),ft=Math.abs(Math.atan2(C[0]-x[0],C[1]-x[1]));return pt=pt>Math.PI/2?Math.PI-pt:pt,ft=ft>Math.PI/2?Math.PI-ft:ft,{xExtra:Math.cos(it/2-pt)*(T/2*(1/Math.sin(it/2)))-T/2||0,yExtra:Math.cos(ft-it/2)*(T/2*(1/Math.sin(it/2)))-T/2||0}}p("rect",O),p("image",O),p("circle",l),p("marker",l),p("polyline",function(S){for(var T=S.attr().points,v=[],x=[],C=0;C<T.length;C++){var N=T[C];v.push(N[0]),x.push(N[1])}var X=E.f.getBBoxByArray(v,x),tt=X.x,it=X.y,pt={minX:tt,minY:it,maxX:tt+X.width,maxY:it+X.height};return{x:(pt=y(S,pt)).minX,y:pt.minY,width:pt.maxX-pt.minX,height:pt.maxY-pt.minY}}),p("polygon",function(S){for(var T=S.attr().points,v=[],x=[],C=0;C<T.length;C++){var N=T[C];v.push(N[0]),x.push(N[1])}return E.f.getBBoxByArray(v,x)}),p("text",function(S){var T=S.attr(),v=T.x,x=T.y,C=T.text,N=T.fontSize,X=T.lineHeight,tt=T.font;tt||(tt=Object(n.a)(T));var it,pt=Object(n.c)(C,tt);if(pt){var ft=T.textAlign,Ot=T.textBaseline,wt=Object(n.b)(C,N,X),xt={x:v,y:x-wt};ft&&(ft==="end"||ft==="right"?xt.x-=pt:ft==="center"&&(xt.x-=pt/2)),Ot&&(Ot==="top"?xt.y+=wt:Ot==="middle"&&(xt.y+=wt/2)),it={x:xt.x,y:xt.y,width:pt,height:wt}}else it={x:v,y:x,width:0,height:0};return it}),p("path",function(S){var T=S.attr(),v=T.path,x=T.stroke?T.lineWidth:0,C=function(it,pt){for(var ft=[],Ot=[],wt=[],xt=0;xt<it.length;xt++){var lt=(q=it[xt]).currentPoint,Vt=q.params,Lt=q.prePoint,Et=void 0;switch(q.command){case"Q":Et=E.e.box(Lt[0],Lt[1],Vt[1],Vt[2],Vt[3],Vt[4]);break;case"C":Et=E.b.box(Lt[0],Lt[1],Vt[1],Vt[2],Vt[3],Vt[4],Vt[5],Vt[6]);break;case"A":var J=q.arcParams;Et=E.a.box(J.cx,J.cy,J.rx,J.ry,J.xRotation,J.startAngle,J.endAngle);break;default:ft.push(lt[0]),Ot.push(lt[1])}Et&&(q.box=Et,ft.push(Et.x,Et.x+Et.width),Ot.push(Et.y,Et.y+Et.height)),pt&&(q.command==="L"||q.command==="M")&&q.prePoint&&q.nextPoint&&wt.push(q)}ft=ft.filter(function(ct){return!Number.isNaN(ct)}),Ot=Ot.filter(function(ct){return!Number.isNaN(ct)});var ht=Math.min.apply(null,ft),vt=Math.min.apply(null,Ot),bt=Math.max.apply(null,ft),At=Math.max.apply(null,Ot);if(wt.length===0)return{x:ht,y:vt,width:bt-ht,height:At-vt};for(xt=0;xt<wt.length;xt++){var q;(lt=(q=wt[xt]).currentPoint)[0]===ht?ht-=M(q,pt).xExtra:lt[0]===bt&&(bt+=M(q,pt).xExtra),lt[1]===vt?vt-=M(q,pt).yExtra:lt[1]===At&&(At+=M(q,pt).yExtra)}return{x:ht,y:vt,width:bt-ht,height:At-vt}}(S.get("segments")||Object(s.d)(v),x),N=C.x,X=C.y,tt={minX:N,minY:X,maxX:N+C.width,maxY:X+C.height};return{x:(tt=y(S,tt)).minX,y:tt.minY,width:tt.maxX-tt.minX,height:tt.maxY-tt.minY}}),p("line",function(S){var T=S.attr(),v=T.x1,x=T.y1,C=T.x2,N=T.y2,X={minX:Math.min(v,C),maxX:Math.max(v,C),minY:Math.min(x,N),maxY:Math.max(x,N)};return{x:(X=y(S,X)).minX,y:X.minY,width:X.maxX-X.minX,height:X.maxY-X.minY}}),p("ellipse",function(S){var T=S.attr(),v=T.x,x=T.y,C=T.rx,N=T.ry;return{x:v-C,y:x-N,width:2*C,height:2*N}})},function(a,A,e){"use strict";var r=e(1),p=e(18),m=e(16),O=e(70),l=e(36),E=e(22),j=e(78),y=e(77),n=e(0),s=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,d=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,M=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function S(Ot){var wt=Ot.match(M);if(!wt)return"";var xt="";return wt.sort(function(lt,Vt){return lt=lt.split(":"),Vt=Vt.split(":"),Number(lt[0])-Number(Vt[0])}),Object(n.f)(wt,function(lt){lt=lt.split(":"),xt+='<stop offset="'+lt[0]+'" stop-color="'+lt[1]+'"></stop>'}),xt}var T=function(){function Ot(wt){this.cfg={};var xt=null,lt=Object(n.H)("gradient_");return wt.toLowerCase()[0]==="l"?function(Vt,Lt){var Et,J,ht=s.exec(Vt),vt=Object(n.B)(Object(n.G)(parseFloat(ht[1])),2*Math.PI),bt=ht[2];vt>=0&&vt<.5*Math.PI?(Et={x:0,y:0},J={x:1,y:1}):.5*Math.PI<=vt&&vt<Math.PI?(Et={x:1,y:0},J={x:0,y:1}):Math.PI<=vt&&vt<1.5*Math.PI?(Et={x:1,y:1},J={x:0,y:0}):(Et={x:0,y:1},J={x:1,y:0});var At=Math.tan(vt),q=At*At,ct=(J.x-Et.x+At*(J.y-Et.y))/(q+1)+Et.x,ot=At*(J.x-Et.x+At*(J.y-Et.y))/(q+1)+Et.y;Lt.setAttribute("x1",Et.x),Lt.setAttribute("y1",Et.y),Lt.setAttribute("x2",ct),Lt.setAttribute("y2",ot),Lt.innerHTML=S(bt)}(wt,xt=Object(E.b)("linearGradient")):function(Vt,Lt){var Et=d.exec(Vt),J=parseFloat(Et[1]),ht=parseFloat(Et[2]),vt=parseFloat(Et[3]),bt=Et[4];Lt.setAttribute("cx",J),Lt.setAttribute("cy",ht),Lt.setAttribute("r",vt),Lt.innerHTML=S(bt)}(wt,xt=Object(E.b)("radialGradient")),xt.setAttribute("id",lt),this.el=xt,this.id=lt,this.cfg=wt,this}return Ot.prototype.match=function(wt,xt){return this.cfg===xt},Ot}(),v={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},x={x:"-40%",y:"-40%",width:"200%",height:"200%"},C=function(){function Ot(wt){this.type="filter",this.cfg={},this.type="filter";var xt=Object(E.b)("filter");return Object(n.f)(x,function(lt,Vt){xt.setAttribute(Vt,lt)}),this.el=xt,this.id=Object(n.H)("filter_"),this.el.id=this.id,this.cfg=wt,this._parseShadow(wt,xt),this}return Ot.prototype.match=function(wt,xt){if(this.type!==wt)return!1;var lt=!0,Vt=this.cfg;return Object(n.f)(Object.keys(Vt),function(Lt){if(Vt[Lt]!==xt[Lt])return lt=!1,!1}),lt},Ot.prototype.update=function(wt,xt){var lt=this.cfg;return lt[v[wt]]=xt,this._parseShadow(lt,this.el),this},Ot.prototype._parseShadow=function(wt,xt){var lt=`<feDropShadow
      dx="`+(wt.dx||0)+`"
      dy="`+(wt.dy||0)+`"
      stdDeviation="`+(wt.blur?wt.blur/10:0)+`"
      flood-color="`+(wt.color?wt.color:"#000")+`"
      flood-opacity="`+(wt.opacity?wt.opacity:1)+`"
      />`;xt.innerHTML=lt},Ot}(),N=function(){function Ot(wt,xt){this.cfg={};var lt=Object(E.b)("marker"),Vt=Object(n.H)("marker_");lt.setAttribute("id",Vt);var Lt=Object(E.b)("path");Lt.setAttribute("stroke",wt.stroke||"none"),Lt.setAttribute("fill",wt.fill||"none"),lt.appendChild(Lt),lt.setAttribute("overflow","visible"),lt.setAttribute("orient","auto-start-reverse"),this.el=lt,this.child=Lt,this.id=Vt;var Et=wt[xt==="marker-start"?"startArrow":"endArrow"];return this.stroke=wt.stroke||"#000",Et===!0?this._setDefaultPath(xt,Lt):(this.cfg=Et,this._setMarker(wt.lineWidth,Lt)),this}return Ot.prototype.match=function(){return!1},Ot.prototype._setDefaultPath=function(wt,xt){var lt=this.el;xt.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),lt.setAttribute("refX",""+10*Math.cos(Math.PI/6)),lt.setAttribute("refY","5")},Ot.prototype._setMarker=function(wt,xt){var lt=this.el,Vt=this.cfg.path,Lt=this.cfg.d;Object(n.m)(Vt)&&(Vt=Vt.map(function(Et){return Et.join(" ")}).join("")),xt.setAttribute("d",Vt),lt.appendChild(xt),Lt&&lt.setAttribute("refX",""+Lt/wt)},Ot.prototype.update=function(wt){var xt=this.child;xt.attr?xt.attr("fill",wt):xt.setAttribute("fill",wt)},Ot}(),X=function(){function Ot(wt){this.type="clip",this.cfg={};var xt=Object(E.b)("clipPath");this.el=xt,this.id=Object(n.H)("clip_"),xt.id=this.id;var lt=wt.cfg.el;return xt.appendChild(lt),this.cfg=wt,this}return Ot.prototype.match=function(){return!1},Ot.prototype.remove=function(){var wt=this.el;wt.parentNode.removeChild(wt)},Ot}(),tt=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,it=function(){function Ot(wt){this.cfg={};var xt=Object(E.b)("pattern");xt.setAttribute("patternUnits","userSpaceOnUse");var lt=Object(E.b)("image");xt.appendChild(lt);var Vt=Object(n.H)("pattern_");xt.id=Vt,this.el=xt,this.id=Vt,this.cfg=wt;var Lt=tt.exec(wt)[2];lt.setAttribute("href",Lt);var Et=new Image;function J(){xt.setAttribute("width",""+Et.width),xt.setAttribute("height",""+Et.height)}return Lt.match(/^data:/i)||(Et.crossOrigin="Anonymous"),Et.src=Lt,Et.complete?J():(Et.onload=J,Et.src=Et.src),this}return Ot.prototype.match=function(wt,xt){return this.cfg===xt},Ot}(),pt=function(){function Ot(wt){var xt=Object(E.b)("defs"),lt=Object(n.H)("defs_");xt.id=lt,wt.appendChild(xt),this.children=[],this.defaultArrow={},this.el=xt,this.canvas=wt}return Ot.prototype.find=function(wt,xt){for(var lt=this.children,Vt=null,Lt=0;Lt<lt.length;Lt++)if(lt[Lt].match(wt,xt)){Vt=lt[Lt].id;break}return Vt},Ot.prototype.findById=function(wt){for(var xt=this.children,lt=null,Vt=0;Vt<xt.length;Vt++)if(xt[Vt].id===wt){lt=xt[Vt];break}return lt},Ot.prototype.add=function(wt){this.children.push(wt),wt.canvas=this.canvas,wt.parent=this},Ot.prototype.getDefaultArrow=function(wt,xt){var lt=wt.stroke||wt.strokeStyle;if(this.defaultArrow[lt])return this.defaultArrow[lt].id;var Vt=new N(wt,xt);return this.defaultArrow[lt]=Vt,this.el.appendChild(Vt.el),this.add(Vt),Vt.id},Ot.prototype.addGradient=function(wt){var xt=new T(wt);return this.el.appendChild(xt.el),this.add(xt),xt.id},Ot.prototype.addArrow=function(wt,xt){var lt=new N(wt,xt);return this.el.appendChild(lt.el),this.add(lt),lt.id},Ot.prototype.addShadow=function(wt){var xt=new C(wt);return this.el.appendChild(xt.el),this.add(xt),xt.id},Ot.prototype.addPattern=function(wt){var xt=new it(wt);return this.el.appendChild(xt.el),this.add(xt),xt.id},Ot.prototype.addClip=function(wt){var xt=new X(wt);return this.el.appendChild(xt.el),this.add(xt),xt.id},Ot}(),ft=function(Ot){function wt(xt){return Ot.call(this,Object(r.a)(Object(r.a)({},xt),{autoDraw:!0,renderer:"svg"}))||this}return Object(r.b)(wt,Ot),wt.prototype.getShapeBase=function(){return j},wt.prototype.getGroupBase=function(){return y.a},wt.prototype.getShape=function(xt,lt,Vt){var Lt=Vt.target||Vt.srcElement;if(!m.a[Lt.tagName]){for(var Et=Lt.parentNode;Et&&!m.a[Et.tagName];)Et=Et.parentNode;Lt=Et}return this.find(function(J){return J.get("el")===Lt})},wt.prototype.createDom=function(){var xt=Object(E.b)("svg"),lt=new pt(xt);return xt.setAttribute("width",""+this.get("width")),xt.setAttribute("height",""+this.get("height")),this.set("context",lt),xt},wt.prototype.onCanvasChange=function(xt){var lt=this.get("context"),Vt=this.get("el");if(xt==="sort"){var Lt=this.get("children");Lt&&Lt.length&&Object(E.d)(this,function(J,ht){return Lt.indexOf(J)-Lt.indexOf(ht)?1:0})}else if(xt==="clear"){if(Vt){Vt.innerHTML="";var Et=lt.el;Et.innerHTML="",Vt.appendChild(Et)}}else xt==="matrix"?Object(l.c)(this):xt==="clip"?Object(l.a)(this,lt):xt==="changeSize"&&(Vt.setAttribute("width",""+this.get("width")),Vt.setAttribute("height",""+this.get("height")))},wt.prototype.draw=function(){var xt=this.get("context"),lt=this.getChildren();Object(l.a)(this,xt),lt.length&&Object(O.a)(xt,lt)},wt}(p.AbstractCanvas);A.a=ft},function(a,A,e){"use strict";var r=e(1),p=e(18);function m(s,d,M){var S=s.getTotalMatrix();if(S){var T=function(v,x){if(x){var C=Object(p.invert)(x);return Object(p.multiplyVec2)(C,v)}return v}([d,M,1],S);return[T[0],T[1]]}return[d,M]}function O(s,d,M){if(s.isCanvas&&s.isCanvas())return!0;if(!Object(p.isAllowCapture)(s)||s.cfg.isInView===!1)return!1;if(s.cfg.clipShape){var S=m(s,d,M),T=S[0],v=S[1];if(s.isClipped(T,v))return!1}var x=s.cfg.cacheCanvasBBox||s.getCanvasBBox();return d>=x.minX&&d<=x.maxX&&M>=x.minY&&M<=x.maxY}var l=e(56),E=e(76),j=e(17),y=e(29),n=function(s){function d(){return s!==null&&s.apply(this,arguments)||this}return Object(r.b)(d,s),d.prototype.getDefaultCfg=function(){var M=s.prototype.getDefaultCfg.call(this);return M.renderer="canvas",M.autoDraw=!0,M.localRefresh=!0,M.refreshElements=[],M.clipView=!0,M.quickHit=!1,M},d.prototype.onCanvasChange=function(M){M!=="attr"&&M!=="sort"&&M!=="changeSize"||(this.set("refreshElements",[this]),this.draw())},d.prototype.getShapeBase=function(){return l},d.prototype.getGroupBase=function(){return E.a},d.prototype.getPixelRatio=function(){var M=this.get("pixelRatio")||Object(j.d)();return M>=1?Math.ceil(M):1},d.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},d.prototype.createDom=function(){var M=document.createElement("canvas"),S=M.getContext("2d");return this.set("context",S),M},d.prototype.setDOMSize=function(M,S){s.prototype.setDOMSize.call(this,M,S);var T=this.get("context"),v=this.get("el"),x=this.getPixelRatio();v.width=x*M,v.height=x*S,x>1&&T.scale(x,x)},d.prototype.clear=function(){s.prototype.clear.call(this),this._clearFrame();var M=this.get("context"),S=this.get("el");M.clearRect(0,0,S.width,S.height)},d.prototype.getShape=function(M,S){return this.get("quickHit")?function T(v,x,C){if(!O(v,x,C))return null;for(var N=null,X=v.getChildren(),tt=X.length-1;tt>=0;tt--){var it=X[tt];if(it.isGroup())N=T(it,x,C);else if(O(it,x,C)){var pt=it,ft=m(it,x,C),Ot=ft[0],wt=ft[1];pt.isInShape(Ot,wt)&&(N=it)}if(N)break}return N}(this,M,S):s.prototype.getShape.call(this,M,S,null)},d.prototype._getRefreshRegion=function(){var M,S=this.get("refreshElements"),T=this.getViewRange();return S.length&&S[0]===this?M=T:(M=Object(y.f)(S))&&(M.minX=Math.floor(M.minX),M.minY=Math.floor(M.minY),M.maxX=Math.ceil(M.maxX),M.maxY=Math.ceil(M.maxY),M.maxY+=1,this.get("clipView")&&(M=Object(y.g)(M,T))),M},d.prototype.refreshElement=function(M){this.get("refreshElements").push(M)},d.prototype._clearFrame=function(){var M=this.get("drawFrame");M&&(Object(j.a)(M),this.set("drawFrame",null),this.set("refreshElements",[]))},d.prototype.draw=function(){var M=this.get("drawFrame");this.get("autoDraw")&&M||this._startDraw()},d.prototype._drawAll=function(){var M=this.get("context"),S=this.get("el"),T=this.getChildren();M.clearRect(0,0,S.width,S.height),Object(y.a)(M,this),Object(y.d)(M,T),this.set("refreshElements",[])},d.prototype._drawRegion=function(){var M=this.get("context"),S=this.get("refreshElements"),T=this.getChildren(),v=this._getRefreshRegion();v?(M.clearRect(v.minX,v.minY,v.maxX-v.minX,v.maxY-v.minY),M.save(),M.beginPath(),M.rect(v.minX,v.minY,v.maxX-v.minX,v.maxY-v.minY),M.clip(),Object(y.a)(M,this),Object(y.b)(this,T,v),Object(y.d)(M,T,v),M.restore()):S.length&&Object(y.c)(S),Object(j.c)(S,function(x){x.get("hasChanged")&&x.set("hasChanged",!1)}),this.set("refreshElements",[])},d.prototype._startDraw=function(){var M=this,S=this.get("drawFrame");S||(S=Object(j.n)(function(){M.get("localRefresh")?M._drawRegion():M._drawAll(),M.set("drawFrame",null)}),this.set("drawFrame",S))},d.prototype.skipDraw=function(){},d}(p.AbstractCanvas);A.a=n},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var r=e(473);A.default=function(p,m){return m===void 0&&(m=!0),{lazyInject:r.makePropertyInjectDecorator(p,m),lazyInjectNamed:r.makePropertyInjectNamedDecorator(p,m),lazyInjectTagged:r.makePropertyInjectTaggedDecorator(p,m),lazyMultiInject:r.makePropertyMultiInjectDecorator(p,m)}}},function(a,A,e){var r=e(202);a.exports=function(p){return p&&p.length?r(p):[]}},function(a,A,e){var r,p,m;function O(l){return(O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(l)}m=function(){"use strict";var E=function(rn){return rn instanceof Uint8Array||rn instanceof Uint16Array||rn instanceof Uint32Array||rn instanceof Int8Array||rn instanceof Int16Array||rn instanceof Int32Array||rn instanceof Float32Array||rn instanceof Float64Array||rn instanceof Uint8ClampedArray},j=function(rn,on){for(var $n=Object.keys(on),vr=0;vr<$n.length;++vr)rn[$n[vr]]=on[$n[vr]];return rn};function y($e){var rn=new Error("(regl) "+$e);throw console.error(rn),rn}function n($e,rn){$e||y(rn)}function s($e){return $e?": "+$e:""}function d($e,rn){switch(rn){case"number":return typeof $e=="number";case"object":return O($e)==="object";case"string":return typeof $e=="string";case"boolean":return typeof $e=="boolean";case"function":return typeof $e=="function";case"undefined":return $e===void 0;case"symbol":return O($e)==="symbol"}}function M($e,rn,on){rn.indexOf($e)<0&&y("invalid value"+s(on)+". must be one of: "+rn)}var S=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function T($e,rn){for($e+="";$e.length<rn;)$e=" "+$e;return $e}function v(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function x($e,rn){this.number=$e,this.line=rn,this.errors=[]}function C($e,rn,on){this.file=$e,this.line=rn,this.message=on}function N(){var $e=new Error,rn=($e.stack||$e).toString(),on=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(rn);if(on)return on[1];var $n=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(rn);return $n?$n[1]:"unknown"}function X(){var $e=new Error,rn=($e.stack||$e).toString(),on=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(rn);if(on)return on[1];var $n=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(rn);return $n?$n[1]:"unknown"}function tt($e,rn){var on,$n=$e.split(`
`),vr=1,ar=0,rr={unknown:new v,0:new v};rr.unknown.name=rr[0].name=rn||N(),rr.unknown.lines.push(new x(0,""));for(var Fr=0;Fr<$n.length;++Fr){var Ar=$n[Fr],wr=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Ar);if(wr)switch(wr[1]){case"line":var xr=/(\d+)(\s+\d+)?/.exec(wr[2]);xr&&(vr=0|xr[1],xr[2]&&((ar=0|xr[2])in rr||(rr[ar]=new v)));break;case"define":var Er=/SHADER_NAME(_B64)?\s+(.*)$/.exec(wr[2]);Er&&(rr[ar].name=Er[1]?(on=Er[2],typeof atob!="undefined"?atob(on):"base64:"+on):Er[2])}rr[ar].lines.push(new x(vr++,Ar))}return Object.keys(rr).forEach(function(Ir){var Lr=rr[Ir];Lr.lines.forEach(function(Pr){Lr.index[Pr.number]=Pr})}),rr}function it($e){$e._commandRef=N()}function pt($e,rn){var on=X();y($e+" in command "+(rn||N())+(on==="unknown"?"":" called from "+on))}function ft($e,rn,on,$n){d($e,rn)||pt("invalid parameter type"+s(on)+". expected "+rn+", got "+O($e),$n||N())}var Ot={};function wt($e,rn){return $e===32820||$e===32819||$e===33635?2:$e===34042?4:Ot[$e]*rn}function xt($e){return!($e&$e-1||!$e)}Ot[5120]=Ot[5121]=1,Ot[5122]=Ot[5123]=Ot[36193]=Ot[33635]=Ot[32819]=Ot[32820]=2,Ot[5124]=Ot[5125]=Ot[5126]=Ot[34042]=4;var lt=j(n,{optional:function(rn){rn()},raise:y,commandRaise:pt,command:function(rn,on,$n){rn||pt(on,$n||N())},parameter:function(rn,on,$n){rn in on||y("unknown parameter ("+rn+")"+s($n)+". possible values: "+Object.keys(on).join())},commandParameter:function(rn,on,$n,vr){rn in on||pt("unknown parameter ("+rn+")"+s($n)+". possible values: "+Object.keys(on).join(),vr||N())},constructor:function(rn){Object.keys(rn).forEach(function(on){S.indexOf(on)<0&&y('invalid regl constructor argument "'+on+'". must be one of '+S)})},type:function(rn,on,$n){d(rn,on)||y("invalid parameter type"+s($n)+". expected "+on+", got "+O(rn))},commandType:ft,isTypedArray:function(rn,on){E(rn)||y("invalid parameter type"+s(on)+". must be a typed array")},nni:function(rn,on){rn>=0&&(0|rn)===rn||y("invalid parameter type, ("+rn+")"+s(on)+". must be a nonnegative integer")},oneOf:M,shaderError:function(rn,on,$n,vr,ar){if(!rn.getShaderParameter(on,rn.COMPILE_STATUS)){var rr=rn.getShaderInfoLog(on),Fr=vr===rn.FRAGMENT_SHADER?"fragment":"vertex";ft($n,"string",Fr+" shader source must be a string",ar);var Ar=tt($n,ar),wr=function(xr){var Er=[];return xr.split(`
`).forEach(function(Ir){if(!(Ir.length<5)){var Lr=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Ir);Lr?Er.push(new C(0|Lr[1],0|Lr[2],Lr[3].trim())):Ir.length>0&&Er.push(new C("unknown",0,Ir))}}),Er}(rr);(function(xr,Er){Er.forEach(function(Ir){var Lr=xr[Ir.file];if(Lr){var Pr=Lr.index[Ir.line];if(Pr)return Pr.errors.push(Ir),void(Lr.hasErrors=!0)}xr.unknown.hasErrors=!0,xr.unknown.lines[0].errors.push(Ir)})})(Ar,wr),Object.keys(Ar).forEach(function(xr){var Er=Ar[xr];if(Er.hasErrors){var Ir=[""],Lr=[""];Pr("file number "+xr+": "+Er.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Er.lines.forEach(function(Dr){if(Dr.errors.length>0){Pr(T(Dr.number,4)+"|  ","background-color:yellow; font-weight:bold"),Pr(Dr.line+`
`,"color:red; background-color:yellow; font-weight:bold");var ri=0;Dr.errors.forEach(function(vi){var ii=vi.message,Si=/^\s*'(.*)'\s*:\s*(.*)$/.exec(ii);if(Si){var zi=Si[1];switch(ii=Si[2],zi){case"assign":zi="="}ri=Math.max(Dr.line.indexOf(zi,ri),0)}else ri=0;Pr(T("| ",6)),Pr(T("^^^",ri+3)+`
`,"font-weight:bold"),Pr(T("| ",6)),Pr(ii+`
`,"font-weight:bold")}),Pr(T("| ",6)+`
`)}else Pr(T(Dr.number,4)+"|  "),Pr(Dr.line+`
`,"color:red")}),typeof document=="undefined"||window.chrome?console.log(Ir.join("")):(Lr[0]=Ir.join("%c"),console.log.apply(console,Lr))}function Pr(Dr,ri){Ir.push(Dr),Lr.push(ri||"")}}),n.raise("Error compiling "+Fr+" shader, "+Ar[0].name)}},linkError:function(rn,on,$n,vr,ar){if(!rn.getProgramParameter(on,rn.LINK_STATUS)){var rr=rn.getProgramInfoLog(on),Fr=tt($n,ar),Ar='Error linking program with vertex shader, "'+tt(vr,ar)[0].name+'", and fragment shader "'+Fr[0].name+'"';typeof document!="undefined"?console.log("%c"+Ar+`
%c`+rr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Ar+`
`+rr),n.raise(Ar)}},callSite:X,saveCommandRef:it,saveDrawInfo:function(rn,on,$n,vr){function ar(wr){return wr?vr.id(wr):0}function rr(wr,xr){Object.keys(xr).forEach(function(Er){wr[vr.id(Er)]=!0})}it(rn),rn._fragId=ar(rn.static.frag),rn._vertId=ar(rn.static.vert);var Fr=rn._uniformSet={};rr(Fr,on.static),rr(Fr,on.dynamic);var Ar=rn._attributeSet={};rr(Ar,$n.static),rr(Ar,$n.dynamic),rn._hasCount="count"in rn.static||"count"in rn.dynamic||"elements"in rn.static||"elements"in rn.dynamic},framebufferFormat:function(rn,on,$n){rn.texture?M(rn.texture._texture.internalformat,on,"unsupported texture format for attachment"):M(rn.renderbuffer._renderbuffer.format,$n,"unsupported renderbuffer format for attachment")},guessCommand:N,texture2D:function(rn,on,$n){var vr,ar=on.width,rr=on.height,Fr=on.channels;n(ar>0&&ar<=$n.maxTextureSize&&rr>0&&rr<=$n.maxTextureSize,"invalid texture shape"),rn.wrapS===33071&&rn.wrapT===33071||n(xt(ar)&&xt(rr),"incompatible wrap mode for texture, both width and height must be power of 2"),on.mipmask===1?ar!==1&&rr!==1&&n(rn.minFilter!==9984&&rn.minFilter!==9986&&rn.minFilter!==9985&&rn.minFilter!==9987,"min filter requires mipmap"):(n(xt(ar)&&xt(rr),"texture must be a square power of 2 to support mipmapping"),n(on.mipmask===(ar<<1)-1,"missing or incomplete mipmap data")),on.type===5126&&($n.extensions.indexOf("oes_texture_float_linear")<0&&n(rn.minFilter===9728&&rn.magFilter===9728,"filter not supported, must enable oes_texture_float_linear"),n(!rn.genMipmaps,"mipmap generation not supported with float textures"));var Ar=on.images;for(vr=0;vr<16;++vr)if(Ar[vr]){var wr=ar>>vr,xr=rr>>vr;n(on.mipmask&1<<vr,"missing mipmap data");var Er=Ar[vr];if(n(Er.width===wr&&Er.height===xr,"invalid shape for mip images"),n(Er.format===on.format&&Er.internalformat===on.internalformat&&Er.type===on.type,"incompatible type for mip image"),!Er.compressed)if(Er.data){var Ir=Math.ceil(wt(Er.type,Fr)*wr/Er.unpackAlignment)*Er.unpackAlignment;n(Er.data.byteLength===Ir*xr,"invalid data for image, buffer size is inconsistent with image format")}else Er.element||Er.copy}else rn.genMipmaps||n((on.mipmask&1<<vr)==0,"extra mipmap data");on.compressed&&n(!rn.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(rn,on,$n,vr){var ar=rn.width,rr=rn.height,Fr=rn.channels;n(ar>0&&ar<=vr.maxTextureSize&&rr>0&&rr<=vr.maxTextureSize,"invalid texture shape"),n(ar===rr,"cube map must be square"),n(on.wrapS===33071&&on.wrapT===33071,"wrap mode not supported by cube map");for(var Ar=0;Ar<$n.length;++Ar){var wr=$n[Ar];n(wr.width===ar&&wr.height===rr,"inconsistent cube map face shape"),on.genMipmaps&&(n(!wr.compressed,"can not generate mipmap for compressed textures"),n(wr.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var xr=wr.images,Er=0;Er<16;++Er){var Ir=xr[Er];if(Ir){var Lr=ar>>Er,Pr=rr>>Er;n(wr.mipmask&1<<Er,"missing mipmap data"),n(Ir.width===Lr&&Ir.height===Pr,"invalid shape for mip images"),n(Ir.format===rn.format&&Ir.internalformat===rn.internalformat&&Ir.type===rn.type,"incompatible type for mip image"),Ir.compressed||(Ir.data?n(Ir.data.byteLength===Lr*Pr*Math.max(wt(Ir.type,Fr),Ir.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Ir.element||Ir.copy)}}}}}),Vt=0;function Lt($e,rn){this.id=Vt++,this.type=$e,this.data=rn}function Et($e){return $e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function J($e){return"["+function rn(on){if(on.length===0)return[];var $n=on.charAt(0),vr=on.charAt(on.length-1);if(on.length>1&&$n===vr&&($n==='"'||$n==="'"))return['"'+Et(on.substr(1,on.length-2))+'"'];var ar=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(on);if(ar)return rn(on.substr(0,ar.index)).concat(rn(ar[1])).concat(rn(on.substr(ar.index+ar[0].length)));var rr=on.split(".");if(rr.length===1)return['"'+Et(on)+'"'];for(var Fr=[],Ar=0;Ar<rr.length;++Ar)Fr=Fr.concat(rn(rr[Ar]));return Fr}($e).join("][")+"]"}var ht={DynamicVariable:Lt,define:function(rn,on){return new Lt(rn,J(on+""))},isDynamic:function(rn){return typeof rn=="function"&&!rn._reglType||rn instanceof Lt},unbox:function $e(rn,on){return typeof rn=="function"?new Lt(0,rn):typeof rn=="number"||typeof rn=="boolean"?new Lt(5,rn):Array.isArray(rn)?new Lt(6,rn.map(function($n,vr){return $e($n,on+"["+vr+"]")})):rn instanceof Lt?rn:void lt(!1,"invalid option type in uniform "+on)},accessor:J},vt={next:typeof requestAnimationFrame=="function"?function($e){return requestAnimationFrame($e)}:function($e){return setTimeout($e,16)},cancel:typeof cancelAnimationFrame=="function"?function($e){return cancelAnimationFrame($e)}:clearTimeout},bt=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function At($e){return typeof $e=="string"?$e.split():(lt(Array.isArray($e),"invalid extension array"),$e)}function q($e){return typeof $e=="string"?(lt(typeof document!="undefined","not supported outside of DOM"),document.querySelector($e)):$e}function ct($e){var rn,on,$n,vr,ar,rr=$e||{},Fr={},Ar=[],wr=[],xr=typeof window=="undefined"?1:window.devicePixelRatio,Er=!1,Ir=function(ri){ri&&lt.raise(ri)},Lr=function(){};if(typeof rr=="string"?(lt(typeof document!="undefined","selector queries only supported in DOM enviroments"),rn=document.querySelector(rr),lt(rn,"invalid query string for element")):O(rr)==="object"?typeof(ar=rr).nodeName=="string"&&typeof ar.appendChild=="function"&&typeof ar.getBoundingClientRect=="function"?rn=rr:function(Dr){return typeof Dr.drawArrays=="function"||typeof Dr.drawElements=="function"}(rr)?$n=(vr=rr).canvas:(lt.constructor(rr),"gl"in rr?vr=rr.gl:"canvas"in rr?$n=q(rr.canvas):"container"in rr&&(on=q(rr.container)),"attributes"in rr&&(Fr=rr.attributes,lt.type(Fr,"object","invalid context attributes")),"extensions"in rr&&(Ar=At(rr.extensions)),"optionalExtensions"in rr&&(wr=At(rr.optionalExtensions)),"onDone"in rr&&(lt.type(rr.onDone,"function","invalid or missing onDone callback"),Ir=rr.onDone),"profile"in rr&&(Er=!!rr.profile),"pixelRatio"in rr&&(xr=+rr.pixelRatio,lt(xr>0,"invalid pixel ratio"))):lt.raise("invalid arguments to regl"),rn&&(rn.nodeName.toLowerCase()==="canvas"?$n=rn:on=rn),!vr){if(!$n){lt(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var Pr=function(Dr,ri,vi){var ii,Si=document.createElement("canvas");function zi(){var Xi=window.innerWidth,Bi=window.innerHeight;if(Dr!==document.body){var Di=Dr.getBoundingClientRect();Xi=Di.right-Di.left,Bi=Di.bottom-Di.top}Si.width=vi*Xi,Si.height=vi*Bi,j(Si.style,{width:Xi+"px",height:Bi+"px"})}return j(Si.style,{border:0,margin:0,padding:0,top:0,left:0}),Dr.appendChild(Si),Dr===document.body&&(Si.style.position="absolute",j(Dr.style,{margin:0,padding:0})),Dr!==document.body&&typeof ResizeObserver=="function"?(ii=new ResizeObserver(function(){setTimeout(zi)})).observe(Dr):window.addEventListener("resize",zi,!1),zi(),{canvas:Si,onDestroy:function(){ii?ii.disconnect():window.removeEventListener("resize",zi),Dr.removeChild(Si)}}}(on||document.body,0,xr);if(!Pr)return null;$n=Pr.canvas,Lr=Pr.onDestroy}Fr.premultipliedAlpha===void 0&&(Fr.premultipliedAlpha=!0),vr=function(Dr,ri){function vi(ii){try{return Dr.getContext(ii,ri)}catch(Si){return null}}return vi("webgl")||vi("experimental-webgl")||vi("webgl-experimental")}($n,Fr)}return vr?{gl:vr,canvas:$n,container:on,extensions:Ar,optionalExtensions:wr,pixelRatio:xr,profile:Er,onDone:Ir,onDestroy:Lr}:(Lr(),Ir("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function ot($e,rn){for(var on=Array($e),$n=0;$n<$e;++$n)on[$n]=rn($n);return on}function _($e){var rn,on;return rn=($e>65535)<<4,rn|=on=(($e>>>=rn)>255)<<3,rn|=on=(($e>>>=on)>15)<<2,(rn|=on=(($e>>>=on)>3)<<1)|($e>>>=on)>>1}function P(){var $e=ot(8,function(){return[]});function rn($n){var vr=function(rr){for(var Fr=16;Fr<=1<<28;Fr*=16)if(rr<=Fr)return Fr;return 0}($n),ar=$e[_(vr)>>2];return ar.length>0?ar.pop():new ArrayBuffer(vr)}function on($n){$e[_($n.byteLength)>>2].push($n)}return{alloc:rn,free:on,allocType:function(vr,ar){var rr=null;switch(vr){case 5120:rr=new Int8Array(rn(ar),0,ar);break;case 5121:rr=new Uint8Array(rn(ar),0,ar);break;case 5122:rr=new Int16Array(rn(2*ar),0,ar);break;case 5123:rr=new Uint16Array(rn(2*ar),0,ar);break;case 5124:rr=new Int32Array(rn(4*ar),0,ar);break;case 5125:rr=new Uint32Array(rn(4*ar),0,ar);break;case 5126:rr=new Float32Array(rn(4*ar),0,ar);break;default:return null}return rr.length!==ar?rr.subarray(0,ar):rr},freeType:function(vr){on(vr.buffer)}}}var Y=P();function k($e){return!!$e&&O($e)==="object"&&Array.isArray($e.shape)&&Array.isArray($e.stride)&&typeof $e.offset=="number"&&$e.shape.length===$e.stride.length&&(Array.isArray($e.data)||E($e.data))}Y.zero=P();var h=function(rn){return Object.keys(rn).map(function(on){return rn[on]})},g={shape:function(rn){for(var on=[],$n=rn;$n.length;$n=$n[0])on.push($n.length);return on},flatten:function(rn,on,$n,vr){var ar=1;if(on.length)for(var rr=0;rr<on.length;++rr)ar*=on[rr];else ar=0;var Fr=vr||Y.allocType($n,ar);switch(on.length){case 0:break;case 1:(function(Ar,wr,xr){for(var Er=0;Er<wr;++Er)xr[Er]=Ar[Er]})(rn,on[0],Fr);break;case 2:(function(Ar,wr,xr,Er){for(var Ir=0,Lr=0;Lr<wr;++Lr)for(var Pr=Ar[Lr],Dr=0;Dr<xr;++Dr)Er[Ir++]=Pr[Dr]})(rn,on[0],on[1],Fr);break;case 3:F(rn,on[0],on[1],on[2],Fr,0);break;default:(function Ar(wr,xr,Er,Ir,Lr){for(var Pr=1,Dr=Er+1;Dr<xr.length;++Dr)Pr*=xr[Dr];var ri=xr[Er];if(xr.length-Er==4){var vi=xr[Er+1],ii=xr[Er+2],Si=xr[Er+3];for(Dr=0;Dr<ri;++Dr)F(wr[Dr],vi,ii,Si,Ir,Lr),Lr+=Pr}else for(Dr=0;Dr<ri;++Dr)Ar(wr[Dr],xr,Er+1,Ir,Lr),Lr+=Pr})(rn,on,0,Fr,0)}return Fr}};function F($e,rn,on,$n,vr,ar){for(var rr=ar,Fr=0;Fr<rn;++Fr)for(var Ar=$e[Fr],wr=0;wr<on;++wr)for(var xr=Ar[wr],Er=0;Er<$n;++Er)vr[rr++]=xr[Er]}var V={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},H={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},et={dynamic:35048,stream:35040,static:35044},nt=g.flatten,St=g.shape,dt=[];function gt($e){return 0|V[Object.prototype.toString.call($e)]}function yt($e,rn){for(var on=0;on<rn.length;++on)$e[on]=rn[on]}function Ct($e,rn,on,$n,vr,ar,rr){for(var Fr=0,Ar=0;Ar<on;++Ar)for(var wr=0;wr<$n;++wr)$e[Fr++]=rn[vr*Ar+ar*wr+rr]}dt[5120]=1,dt[5122]=2,dt[5124]=4,dt[5121]=1,dt[5123]=2,dt[5125]=4,dt[5126]=4;var Pt={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ft=new Float32Array(1),Tt=new Uint32Array(Ft.buffer);function zt($e){for(var rn=Y.allocType(5123,$e.length),on=0;on<$e.length;++on)if(isNaN($e[on]))rn[on]=65535;else if($e[on]===1/0)rn[on]=31744;else if($e[on]===-1/0)rn[on]=64512;else{Ft[0]=$e[on];var $n=Tt[0],vr=$n>>>31<<15,ar=($n<<1>>>24)-127,rr=$n>>13&1023;if(ar<-24)rn[on]=vr;else if(ar<-14){var Fr=-14-ar;rn[on]=vr+(rr+1024>>Fr)}else rn[on]=ar>15?vr+31744:vr+(ar+15<<10)+rr}return rn}function Xt($e){return Array.isArray($e)||E($e)}var re=function(rn){return!(rn&rn-1||!rn)},de=[9984,9986,9985,9987],ye=[0,6409,6410,6407,6408],we={};function De($e){return"[object "+$e+"]"}we[6409]=we[6406]=we[6402]=1,we[34041]=we[6410]=2,we[6407]=we[35904]=3,we[6408]=we[35906]=4;var Ve=De("HTMLCanvasElement"),pn=De("OffscreenCanvas"),sn=De("CanvasRenderingContext2D"),In=De("ImageBitmap"),An=De("HTMLImageElement"),Rn=De("HTMLVideoElement"),Mn=Object.keys(V).concat([Ve,pn,sn,In,An,Rn]),Cn=[];Cn[5121]=1,Cn[5126]=4,Cn[36193]=2,Cn[5123]=2,Cn[5125]=4;var Gn=[];function Xn($e){return Array.isArray($e)&&($e.length===0||typeof $e[0]=="number")}function tr($e){return!!Array.isArray($e)&&!($e.length===0||!Xt($e[0]))}function or($e){return Object.prototype.toString.call($e)}function nr($e){return or($e)===Ve}function er($e){return or($e)===pn}function Sr($e){if(!$e)return!1;var rn=or($e);return Mn.indexOf(rn)>=0||Xn($e)||tr($e)||k($e)}function Vr($e){return 0|V[Object.prototype.toString.call($e)]}function ti($e,rn){return Y.allocType($e.type===36193?5126:$e.type,rn)}function hi($e,rn){$e.type===36193?($e.data=zt(rn),Y.freeType(rn)):$e.data=rn}function Fi($e,rn,on,$n,vr,ar){var rr;if(rr=Gn[$e]!==void 0?Gn[$e]:we[$e]*Cn[rn],ar&&(rr*=6),vr){for(var Fr=0,Ar=on;Ar>=1;)Fr+=rr*Ar*Ar,Ar/=2;return Fr}return rr*on*$n}function to($e,rn,on,$n,vr,ar,rr){var Fr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Ar={repeat:10497,clamp:33071,mirror:33648},wr={nearest:9728,linear:9729},xr=j({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},wr),Er={none:0,browser:37444},Ir={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Lr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Pr={};rn.ext_srgb&&(Lr.srgb=35904,Lr.srgba=35906),rn.oes_texture_float&&(Ir.float32=Ir.float=5126),rn.oes_texture_half_float&&(Ir.float16=Ir["half float"]=36193),rn.webgl_depth_texture&&(j(Lr,{depth:6402,"depth stencil":34041}),j(Ir,{uint16:5123,uint32:5125,"depth stencil":34042})),rn.webgl_compressed_texture_s3tc&&j(Pr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),rn.webgl_compressed_texture_atc&&j(Pr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),rn.webgl_compressed_texture_pvrtc&&j(Pr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),rn.webgl_compressed_texture_etc1&&(Pr["rgb etc1"]=36196);var Dr=Array.prototype.slice.call($e.getParameter(34467));Object.keys(Pr).forEach(function(Zt){var ve=Pr[Zt];Dr.indexOf(ve)>=0&&(Lr[Zt]=ve)});var ri=Object.keys(Lr);on.textureFormats=ri;var vi=[];Object.keys(Lr).forEach(function(Zt){var ve=Lr[Zt];vi[ve]=Zt});var ii=[];Object.keys(Ir).forEach(function(Zt){var ve=Ir[Zt];ii[ve]=Zt});var Si=[];Object.keys(wr).forEach(function(Zt){Si[wr[Zt]]=Zt});var zi=[];Object.keys(xr).forEach(function(Zt){var ve=xr[Zt];zi[ve]=Zt});var Xi=[];Object.keys(Ar).forEach(function(Zt){Xi[Ar[Zt]]=Zt});var Bi=ri.reduce(function(Zt,ve){var he=Lr[ve];return he===6409||he===6406||he===6409||he===6410||he===6402||he===34041||rn.ext_srgb&&(he===35904||he===35906)?Zt[he]=he:he===32855||ve.indexOf("rgba")>=0?Zt[he]=6408:Zt[he]=6407,Zt},{});function Di(){this.internalformat=6408,this.format=6408,this.type=5121,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0}function pe(Zt,ve){Zt.internalformat=ve.internalformat,Zt.format=ve.format,Zt.type=ve.type,Zt.compressed=ve.compressed,Zt.premultiplyAlpha=ve.premultiplyAlpha,Zt.flipY=ve.flipY,Zt.unpackAlignment=ve.unpackAlignment,Zt.colorSpace=ve.colorSpace,Zt.width=ve.width,Zt.height=ve.height,Zt.channels=ve.channels}function G(Zt,ve){if(O(ve)==="object"&&ve){if("premultiplyAlpha"in ve&&(lt.type(ve.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Zt.premultiplyAlpha=ve.premultiplyAlpha),"flipY"in ve&&(lt.type(ve.flipY,"boolean","invalid texture flip"),Zt.flipY=ve.flipY),"alignment"in ve&&(lt.oneOf(ve.alignment,[1,2,4,8],"invalid texture unpack alignment"),Zt.unpackAlignment=ve.alignment),"colorSpace"in ve&&(lt.parameter(ve.colorSpace,Er,"invalid colorSpace"),Zt.colorSpace=Er[ve.colorSpace]),"type"in ve){var he=ve.type;lt(rn.oes_texture_float||!(he==="float"||he==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),lt(rn.oes_texture_half_float||!(he==="half float"||he==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),lt(rn.webgl_depth_texture||!(he==="uint16"||he==="uint32"||he==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),lt.parameter(he,Ir,"invalid texture type"),Zt.type=Ir[he]}var ce=Zt.width,Me=Zt.height,_e=Zt.channels,We=!1;"shape"in ve?(lt(Array.isArray(ve.shape)&&ve.shape.length>=2,"shape must be an array"),ce=ve.shape[0],Me=ve.shape[1],ve.shape.length===3&&(_e=ve.shape[2],lt(_e>0&&_e<=4,"invalid number of channels"),We=!0),lt(ce>=0&&ce<=on.maxTextureSize,"invalid width"),lt(Me>=0&&Me<=on.maxTextureSize,"invalid height")):("radius"in ve&&(ce=Me=ve.radius,lt(ce>=0&&ce<=on.maxTextureSize,"invalid radius")),"width"in ve&&(ce=ve.width,lt(ce>=0&&ce<=on.maxTextureSize,"invalid width")),"height"in ve&&(Me=ve.height,lt(Me>=0&&Me<=on.maxTextureSize,"invalid height")),"channels"in ve&&(_e=ve.channels,lt(_e>0&&_e<=4,"invalid number of channels"),We=!0)),Zt.width=0|ce,Zt.height=0|Me,Zt.channels=0|_e;var Re=!1;if("format"in ve){var tn=ve.format;lt(rn.webgl_depth_texture||!(tn==="depth"||tn==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),lt.parameter(tn,Lr,"invalid texture format");var ke=Zt.internalformat=Lr[tn];Zt.format=Bi[ke],tn in Ir&&("type"in ve||(Zt.type=Ir[tn])),tn in Pr&&(Zt.compressed=!0),Re=!0}!We&&Re?Zt.channels=we[Zt.format]:We&&!Re?Zt.channels!==ye[Zt.format]&&(Zt.format=Zt.internalformat=ye[Zt.channels]):Re&&We&&lt(Zt.channels===we[Zt.format],"number of channels inconsistent with specified format")}}function B(Zt){$e.pixelStorei(37440,Zt.flipY),$e.pixelStorei(37441,Zt.premultiplyAlpha),$e.pixelStorei(37443,Zt.colorSpace),$e.pixelStorei(3317,Zt.unpackAlignment)}function $(){Di.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function ut(Zt,ve){var he=null;if(Sr(ve)?he=ve:ve&&(lt.type(ve,"object","invalid pixel data type"),G(Zt,ve),"x"in ve&&(Zt.xOffset=0|ve.x),"y"in ve&&(Zt.yOffset=0|ve.y),Sr(ve.data)&&(he=ve.data)),lt(!Zt.compressed||he instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),ve.copy){lt(!he,"can not specify copy and data field for the same texture");var ce=vr.viewportWidth,Me=vr.viewportHeight;Zt.width=Zt.width||ce-Zt.xOffset,Zt.height=Zt.height||Me-Zt.yOffset,Zt.needsCopy=!0,lt(Zt.xOffset>=0&&Zt.xOffset<ce&&Zt.yOffset>=0&&Zt.yOffset<Me&&Zt.width>0&&Zt.width<=ce&&Zt.height>0&&Zt.height<=Me,"copy texture read out of bounds")}else if(he){if(E(he))Zt.channels=Zt.channels||4,Zt.data=he,"type"in ve||Zt.type!==5121||(Zt.type=Vr(he));else if(Xn(he))Zt.channels=Zt.channels||4,function(ze,fn){var mn=fn.length;switch(ze.type){case 5121:case 5123:case 5125:case 5126:var Wn=Y.allocType(ze.type,mn);Wn.set(fn),ze.data=Wn;break;case 36193:ze.data=zt(fn);break;default:lt.raise("unsupported texture type, must specify a typed array")}}(Zt,he),Zt.alignment=1,Zt.needsFree=!0;else if(k(he)){var _e=he.data;Array.isArray(_e)||Zt.type!==5121||(Zt.type=Vr(_e));var We,Re,tn,ke,ln,hn,nn=he.shape,dn=he.stride;nn.length===3?(tn=nn[2],hn=dn[2]):(lt(nn.length===2,"invalid ndarray pixel data, must be 2 or 3D"),tn=1,hn=1),We=nn[0],Re=nn[1],ke=dn[0],ln=dn[1],Zt.alignment=1,Zt.width=We,Zt.height=Re,Zt.channels=tn,Zt.format=Zt.internalformat=ye[tn],Zt.needsFree=!0,function(ze,fn,mn,Wn,Tn,Pn){for(var lr=ze.width,Hr=ze.height,Gr=ze.channels,Mr=ti(ze,lr*Hr*Gr),oi=0,ai=0;ai<Hr;++ai)for(var Zr=0;Zr<lr;++Zr)for(var Yi=0;Yi<Gr;++Yi)Mr[oi++]=fn[mn*Zr+Wn*ai+Tn*Yi+Pn];hi(ze,Mr)}(Zt,_e,ke,ln,hn,he.offset)}else if(nr(he)||er(he)||or(he)===sn)nr(he)||er(he)?Zt.element=he:Zt.element=he.canvas,Zt.width=Zt.element.width,Zt.height=Zt.element.height,Zt.channels=4;else if(function(ze){return or(ze)===In}(he))Zt.element=he,Zt.width=he.width,Zt.height=he.height,Zt.channels=4;else if(function(ze){return or(ze)===An}(he))Zt.element=he,Zt.width=he.naturalWidth,Zt.height=he.naturalHeight,Zt.channels=4;else if(function(ze){return or(ze)===Rn}(he))Zt.element=he,Zt.width=he.videoWidth,Zt.height=he.videoHeight,Zt.channels=4;else if(tr(he)){var Sn=Zt.width||he[0].length,Pe=Zt.height||he.length,le=Zt.channels;le=Xt(he[0][0])?le||he[0][0].length:le||1;for(var Le=g.shape(he),Be=1,en=0;en<Le.length;++en)Be*=Le[en];var un=ti(Zt,Be);g.flatten(he,Le,"",un),hi(Zt,un),Zt.alignment=1,Zt.width=Sn,Zt.height=Pe,Zt.channels=le,Zt.format=Zt.internalformat=ye[le],Zt.needsFree=!0}}else Zt.width=Zt.width||1,Zt.height=Zt.height||1,Zt.channels=Zt.channels||4;Zt.type===5126?lt(on.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Zt.type===36193&&lt(on.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Bt(Zt,ve,he){var ce=Zt.element,Me=Zt.data,_e=Zt.internalformat,We=Zt.format,Re=Zt.type,tn=Zt.width,ke=Zt.height;B(Zt),ce?$e.texImage2D(ve,he,We,We,Re,ce):Zt.compressed?$e.compressedTexImage2D(ve,he,_e,tn,ke,0,Me):Zt.needsCopy?($n(),$e.copyTexImage2D(ve,he,We,Zt.xOffset,Zt.yOffset,tn,ke,0)):$e.texImage2D(ve,he,We,tn,ke,0,We,Re,Me||null)}function Jt(Zt,ve,he,ce,Me){var _e=Zt.element,We=Zt.data,Re=Zt.internalformat,tn=Zt.format,ke=Zt.type,ln=Zt.width,hn=Zt.height;B(Zt),_e?$e.texSubImage2D(ve,Me,he,ce,tn,ke,_e):Zt.compressed?$e.compressedTexSubImage2D(ve,Me,he,ce,Re,ln,hn,We):Zt.needsCopy?($n(),$e.copyTexSubImage2D(ve,Me,he,ce,Zt.xOffset,Zt.yOffset,ln,hn)):$e.texSubImage2D(ve,Me,he,ce,ln,hn,tn,ke,We)}var ie=[];function se(){return ie.pop()||new $}function Ce(Zt){Zt.needsFree&&Y.freeType(Zt.data),$.call(Zt),ie.push(Zt)}function Ee(){Di.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function cn(Zt,ve,he){var ce=Zt.images[0]=se();Zt.mipmask=1,ce.width=Zt.width=ve,ce.height=Zt.height=he,ce.channels=Zt.channels=4}function xn(Zt,ve){var he=null;if(Sr(ve))pe(he=Zt.images[0]=se(),Zt),ut(he,ve),Zt.mipmask=1;else if(G(Zt,ve),Array.isArray(ve.mipmap))for(var ce=ve.mipmap,Me=0;Me<ce.length;++Me)pe(he=Zt.images[Me]=se(),Zt),he.width>>=Me,he.height>>=Me,ut(he,ce[Me]),Zt.mipmask|=1<<Me;else pe(he=Zt.images[0]=se(),Zt),ut(he,ve),Zt.mipmask=1;pe(Zt,Zt.images[0]),!Zt.compressed||Zt.internalformat!==33776&&Zt.internalformat!==33777&&Zt.internalformat!==33778&&Zt.internalformat!==33779||lt(Zt.width%4==0&&Zt.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function _t(Zt,ve){for(var he=Zt.images,ce=0;ce<he.length;++ce){if(!he[ce])return;Bt(he[ce],ve,ce)}}var Yt=[];function Se(){var Zt=Yt.pop()||new Ee;Di.call(Zt),Zt.mipmask=0;for(var ve=0;ve<16;++ve)Zt.images[ve]=null;return Zt}function Wt(Zt){for(var ve=Zt.images,he=0;he<ve.length;++he)ve[he]&&Ce(ve[he]),ve[he]=null;Yt.push(Zt)}function ue(){this.minFilter=9728,this.magFilter=9728,this.wrapS=33071,this.wrapT=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function vn(Zt,ve){if("min"in ve){var he=ve.min;lt.parameter(he,xr),Zt.minFilter=xr[he],de.indexOf(Zt.minFilter)>=0&&!("faces"in ve)&&(Zt.genMipmaps=!0)}if("mag"in ve){var ce=ve.mag;lt.parameter(ce,wr),Zt.magFilter=wr[ce]}var Me=Zt.wrapS,_e=Zt.wrapT;if("wrap"in ve){var We=ve.wrap;typeof We=="string"?(lt.parameter(We,Ar),Me=_e=Ar[We]):Array.isArray(We)&&(lt.parameter(We[0],Ar),lt.parameter(We[1],Ar),Me=Ar[We[0]],_e=Ar[We[1]])}else{if("wrapS"in ve){var Re=ve.wrapS;lt.parameter(Re,Ar),Me=Ar[Re]}if("wrapT"in ve){var tn=ve.wrapT;lt.parameter(tn,Ar),_e=Ar[tn]}}if(Zt.wrapS=Me,Zt.wrapT=_e,"anisotropic"in ve){var ke=ve.anisotropic;lt(typeof ke=="number"&&ke>=1&&ke<=on.maxAnisotropic,"aniso samples must be between 1 and "),Zt.anisotropic=ve.anisotropic}if("mipmap"in ve){var ln=!1;switch(O(ve.mipmap)){case"string":lt.parameter(ve.mipmap,Fr,"invalid mipmap hint"),Zt.mipmapHint=Fr[ve.mipmap],Zt.genMipmaps=!0,ln=!0;break;case"boolean":ln=Zt.genMipmaps=ve.mipmap;break;case"object":lt(Array.isArray(ve.mipmap),"invalid mipmap type"),Zt.genMipmaps=!1,ln=!0;break;default:lt.raise("invalid mipmap type")}ln&&!("min"in ve)&&(Zt.minFilter=9984)}}function kn(Zt,ve){$e.texParameteri(ve,10241,Zt.minFilter),$e.texParameteri(ve,10240,Zt.magFilter),$e.texParameteri(ve,10242,Zt.wrapS),$e.texParameteri(ve,10243,Zt.wrapT),rn.ext_texture_filter_anisotropic&&$e.texParameteri(ve,34046,Zt.anisotropic),Zt.genMipmaps&&($e.hint(33170,Zt.mipmapHint),$e.generateMipmap(ve))}var _n=0,Un={},Ze=on.maxTextureUnits,Te=Array(Ze).map(function(){return null});function R(Zt){Di.call(this),this.mipmask=0,this.internalformat=6408,this.id=_n++,this.refCount=1,this.target=Zt,this.texture=$e.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new ue,rr.profile&&(this.stats={size:0})}function mt(Zt){$e.activeTexture(33984),$e.bindTexture(Zt.target,Zt.texture)}function $t(){var Zt=Te[0];Zt?$e.bindTexture(Zt.target,Zt.texture):$e.bindTexture(3553,null)}function me(Zt){var ve=Zt.texture;lt(ve,"must not double destroy texture");var he=Zt.unit,ce=Zt.target;he>=0&&($e.activeTexture(33984+he),$e.bindTexture(ce,null),Te[he]=null),$e.deleteTexture(ve),Zt.texture=null,Zt.params=null,Zt.pixels=null,Zt.refCount=0,delete Un[Zt.id],ar.textureCount--}return j(R.prototype,{bind:function(){this.bindCount+=1;var ve=this.unit;if(ve<0){for(var he=0;he<Ze;++he){var ce=Te[he];if(ce){if(ce.bindCount>0)continue;ce.unit=-1}Te[he]=this,ve=he;break}ve>=Ze&&lt.raise("insufficient number of texture units"),rr.profile&&ar.maxTextureUnits<ve+1&&(ar.maxTextureUnits=ve+1),this.unit=ve,$e.activeTexture(33984+ve),$e.bindTexture(this.target,this.texture)}return ve},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&me(this)}}),rr.profile&&(ar.getTotalTextureSize=function(){var Zt=0;return Object.keys(Un).forEach(function(ve){Zt+=Un[ve].stats.size}),Zt}),{create2D:function(ve,he){var ce=new R(3553);function Me(_e,We){var Re=ce.texInfo;ue.call(Re);var tn=Se();return typeof _e=="number"?cn(tn,0|_e,typeof We=="number"?0|We:0|_e):_e?(lt.type(_e,"object","invalid arguments to regl.texture"),vn(Re,_e),xn(tn,_e)):cn(tn,1,1),Re.genMipmaps&&(tn.mipmask=(tn.width<<1)-1),ce.mipmask=tn.mipmask,pe(ce,tn),lt.texture2D(Re,tn,on),ce.internalformat=tn.internalformat,Me.width=tn.width,Me.height=tn.height,mt(ce),_t(tn,3553),kn(Re,3553),$t(),Wt(tn),rr.profile&&(ce.stats.size=Fi(ce.internalformat,ce.type,tn.width,tn.height,Re.genMipmaps,!1)),Me.format=vi[ce.internalformat],Me.type=ii[ce.type],Me.mag=Si[Re.magFilter],Me.min=zi[Re.minFilter],Me.wrapS=Xi[Re.wrapS],Me.wrapT=Xi[Re.wrapT],Me}return Un[ce.id]=ce,ar.textureCount++,Me(ve,he),Me.subimage=function(_e,We,Re,tn){lt(!!_e,"must specify image data");var ke=0|We,ln=0|Re,hn=0|tn,nn=se();return pe(nn,ce),nn.width=0,nn.height=0,ut(nn,_e),nn.width=nn.width||(ce.width>>hn)-ke,nn.height=nn.height||(ce.height>>hn)-ln,lt(ce.type===nn.type&&ce.format===nn.format&&ce.internalformat===nn.internalformat,"incompatible format for texture.subimage"),lt(ke>=0&&ln>=0&&ke+nn.width<=ce.width&&ln+nn.height<=ce.height,"texture.subimage write out of bounds"),lt(ce.mipmask&1<<hn,"missing mipmap data"),lt(nn.data||nn.element||nn.needsCopy,"missing image data"),mt(ce),Jt(nn,3553,ke,ln,hn),$t(),Ce(nn),Me},Me.resize=function(_e,We){var Re=0|_e,tn=0|We||Re;if(Re===ce.width&&tn===ce.height)return Me;Me.width=ce.width=Re,Me.height=ce.height=tn,mt(ce);for(var ke=0;ce.mipmask>>ke;++ke){var ln=Re>>ke,hn=tn>>ke;if(!ln||!hn)break;$e.texImage2D(3553,ke,ce.format,ln,hn,0,ce.format,ce.type,null)}return $t(),rr.profile&&(ce.stats.size=Fi(ce.internalformat,ce.type,Re,tn,!1,!1)),Me},Me._reglType="texture2d",Me._texture=ce,rr.profile&&(Me.stats=ce.stats),Me.destroy=function(){ce.decRef()},Me},createCube:function(ve,he,ce,Me,_e,We){var Re=new R(34067);Un[Re.id]=Re,ar.cubeCount++;var tn=new Array(6);function ke(ln,hn,nn,dn,Sn,Pe){var le,Le=Re.texInfo;for(ue.call(Le),le=0;le<6;++le)tn[le]=Se();if(typeof ln!="number"&&ln)if(O(ln)==="object")if(hn)xn(tn[0],ln),xn(tn[1],hn),xn(tn[2],nn),xn(tn[3],dn),xn(tn[4],Sn),xn(tn[5],Pe);else if(vn(Le,ln),G(Re,ln),"faces"in ln){var Be=ln.faces;for(lt(Array.isArray(Be)&&Be.length===6,"cube faces must be a length 6 array"),le=0;le<6;++le)lt(O(Be[le])==="object"&&!!Be[le],"invalid input for cube map face"),pe(tn[le],Re),xn(tn[le],Be[le])}else for(le=0;le<6;++le)xn(tn[le],ln);else lt.raise("invalid arguments to cube map");else{var en=0|ln||1;for(le=0;le<6;++le)cn(tn[le],en,en)}for(pe(Re,tn[0]),on.npotTextureCube||lt(re(Re.width)&&re(Re.height),"your browser does not support non power or two texture dimensions"),Le.genMipmaps?Re.mipmask=(tn[0].width<<1)-1:Re.mipmask=tn[0].mipmask,lt.textureCube(Re,Le,tn,on),Re.internalformat=tn[0].internalformat,ke.width=tn[0].width,ke.height=tn[0].height,mt(Re),le=0;le<6;++le)_t(tn[le],34069+le);for(kn(Le,34067),$t(),rr.profile&&(Re.stats.size=Fi(Re.internalformat,Re.type,ke.width,ke.height,Le.genMipmaps,!0)),ke.format=vi[Re.internalformat],ke.type=ii[Re.type],ke.mag=Si[Le.magFilter],ke.min=zi[Le.minFilter],ke.wrapS=Xi[Le.wrapS],ke.wrapT=Xi[Le.wrapT],le=0;le<6;++le)Wt(tn[le]);return ke}return ke(ve,he,ce,Me,_e,We),ke.subimage=function(ln,hn,nn,dn,Sn){lt(!!hn,"must specify image data"),lt(typeof ln=="number"&&ln===(0|ln)&&ln>=0&&ln<6,"invalid face");var Pe=0|nn,le=0|dn,Le=0|Sn,Be=se();return pe(Be,Re),Be.width=0,Be.height=0,ut(Be,hn),Be.width=Be.width||(Re.width>>Le)-Pe,Be.height=Be.height||(Re.height>>Le)-le,lt(Re.type===Be.type&&Re.format===Be.format&&Re.internalformat===Be.internalformat,"incompatible format for texture.subimage"),lt(Pe>=0&&le>=0&&Pe+Be.width<=Re.width&&le+Be.height<=Re.height,"texture.subimage write out of bounds"),lt(Re.mipmask&1<<Le,"missing mipmap data"),lt(Be.data||Be.element||Be.needsCopy,"missing image data"),mt(Re),Jt(Be,34069+ln,Pe,le,Le),$t(),Ce(Be),ke},ke.resize=function(ln){var hn=0|ln;if(hn!==Re.width){ke.width=Re.width=hn,ke.height=Re.height=hn,mt(Re);for(var nn=0;nn<6;++nn)for(var dn=0;Re.mipmask>>dn;++dn)$e.texImage2D(34069+nn,dn,Re.format,hn>>dn,hn>>dn,0,Re.format,Re.type,null);return $t(),rr.profile&&(Re.stats.size=Fi(Re.internalformat,Re.type,ke.width,ke.height,!1,!0)),ke}},ke._reglType="textureCube",ke._texture=Re,rr.profile&&(ke.stats=Re.stats),ke.destroy=function(){Re.decRef()},ke},clear:function(){for(var ve=0;ve<Ze;++ve)$e.activeTexture(33984+ve),$e.bindTexture(3553,null),Te[ve]=null;h(Un).forEach(me),ar.cubeCount=0,ar.textureCount=0},getTexture:function(ve){return null},restore:function(){for(var ve=0;ve<Ze;++ve){var he=Te[ve];he&&(he.bindCount=0,he.unit=-1,Te[ve]=null)}h(Un).forEach(function(ce){ce.texture=$e.createTexture(),$e.bindTexture(ce.target,ce.texture);for(var Me=0;Me<32;++Me)if((ce.mipmask&1<<Me)!=0)if(ce.target===3553)$e.texImage2D(3553,Me,ce.internalformat,ce.width>>Me,ce.height>>Me,0,ce.internalformat,ce.type,null);else for(var _e=0;_e<6;++_e)$e.texImage2D(34069+_e,Me,ce.internalformat,ce.width>>Me,ce.height>>Me,0,ce.internalformat,ce.type,null);kn(ce.texInfo,ce.target)})},refresh:function(){for(var ve=0;ve<Ze;++ve){var he=Te[ve];he&&(he.bindCount=0,he.unit=-1,Te[ve]=null),$e.activeTexture(33984+ve),$e.bindTexture(3553,null),$e.bindTexture(34067,null)}}}}Gn[32854]=2,Gn[32855]=2,Gn[36194]=2,Gn[34041]=4,Gn[33776]=.5,Gn[33777]=.5,Gn[33778]=1,Gn[33779]=1,Gn[35986]=.5,Gn[35987]=1,Gn[34798]=1,Gn[35840]=.5,Gn[35841]=.25,Gn[35842]=.5,Gn[35843]=.25,Gn[36196]=.5;var si=[];function Ti($e,rn,on){return si[$e]*rn*on}si[32854]=2,si[32855]=2,si[36194]=2,si[33189]=2,si[36168]=1,si[34041]=4,si[35907]=4,si[34836]=16,si[34842]=8,si[34843]=6;var Ui=[6407,6408],Li=[];Li[6408]=4,Li[6407]=3;var Vi=[];Vi[5121]=1,Vi[5126]=4,Vi[36193]=2;var ro=[32854,32855,36194,35907,34842,34843,34836],jr={};function Ji(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0}function pr($e,rn,on,$n,vr,ar,rr){function Fr(Ar){var wr;rn.next===null?(lt(vr.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),wr=5121):(lt(rn.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),wr=rn.next.colorAttachments[0].texture._texture.type,ar.oes_texture_float?(lt(wr===5121||wr===5126,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),wr===5126&&lt(rr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):lt(wr===5121,"Reading from a framebuffer is only allowed for the type 'uint8'"));var xr=0,Er=0,Ir=$n.framebufferWidth,Lr=$n.framebufferHeight,Pr=null;E(Ar)?Pr=Ar:Ar&&(lt.type(Ar,"object","invalid arguments to regl.read()"),xr=0|Ar.x,Er=0|Ar.y,lt(xr>=0&&xr<$n.framebufferWidth,"invalid x offset for regl.read"),lt(Er>=0&&Er<$n.framebufferHeight,"invalid y offset for regl.read"),Ir=0|(Ar.width||$n.framebufferWidth-xr),Lr=0|(Ar.height||$n.framebufferHeight-Er),Pr=Ar.data||null),Pr&&(wr===5121?lt(Pr instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):wr===5126&&lt(Pr instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),lt(Ir>0&&Ir+xr<=$n.framebufferWidth,"invalid width for read pixels"),lt(Lr>0&&Lr+Er<=$n.framebufferHeight,"invalid height for read pixels"),on();var Dr=Ir*Lr*4;return Pr||(wr===5121?Pr=new Uint8Array(Dr):wr===5126&&(Pr=Pr||new Float32Array(Dr))),lt.isTypedArray(Pr,"data buffer for regl.read() must be a typedarray"),lt(Pr.byteLength>=Dr,"data buffer for regl.read() too small"),$e.pixelStorei(3333,4),$e.readPixels(xr,Er,Ir,Lr,6408,wr,Pr),Pr}return function(Ar){return Ar&&"framebuffer"in Ar?function(wr){var xr;return rn.setFBO({framebuffer:wr.framebuffer},function(){xr=Fr(wr)}),xr}(Ar):Fr(Ar)}}function Xr($e){return Array.prototype.slice.call($e)}function Br($e){return Xr($e).join("")}jr[36053]="complete",jr[36054]="incomplete attachment",jr[36057]="incomplete dimensions",jr[36055]="incomplete, missing attachment",jr[36061]="unsupported";var Nr="xyzw".split(""),Yr="profile",Kr="framebuffer",ni="vert",fi="frag",$r="elements",ci="primitive",Qr="count",gi="offset",Oi="instances",bi="vao",_i=Kr+"Width",Qi=Kr+"Height",io=["blend.func","blend.equation","stencil.func","stencil.opFront","stencil.opBack","sample.coverage","viewport","scissor.box","polygonOffset.offset"],Wi={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Zi=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Pi={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},no={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Mo={frag:35632,vert:35633},ao={cw:2304,ccw:2305};function uo($e){return Array.isArray($e)||E($e)||k($e)}function xo($e){return $e.sort(function(rn,on){return rn==="viewport"?-1:on==="viewport"?1:rn<on?-1:1})}function oe($e,rn,on,$n){this.thisDep=$e,this.contextDep=rn,this.propDep=on,this.append=$n}function Kt($e){return $e&&!($e.thisDep||$e.contextDep||$e.propDep)}function te($e){return new oe(!1,!1,!1,$e)}function Oe($e,rn){var on=$e.type;if(on===0){var $n=$e.data.length;return new oe(!0,$n>=1,$n>=2,rn)}if(on===4){var vr=$e.data;return new oe(vr.thisDep,vr.contextDep,vr.propDep,rn)}if(on===5)return new oe(!1,!1,!1,rn);if(on===6){for(var ar=!1,rr=!1,Fr=!1,Ar=0;Ar<$e.data.length;++Ar){var wr=$e.data[Ar];if(wr.type===1)Fr=!0;else if(wr.type===2)rr=!0;else if(wr.type===3)ar=!0;else if(wr.type===0){ar=!0;var xr=wr.data;xr>=1&&(rr=!0),xr>=2&&(Fr=!0)}else wr.type===4&&(ar=ar||wr.data.thisDep,rr=rr||wr.data.contextDep,Fr=Fr||wr.data.propDep)}return new oe(ar,rr,Fr,rn)}return new oe(on===3,on===2,on===1,rn)}var Qe=new oe(!1,!1,!1,function(){});function On($e,rn,on,$n,vr,ar,rr,Fr,Ar,wr,xr,Er,Ir,Lr,Pr){var Dr=wr.Record,ri={add:32774,subtract:32778,"reverse subtract":32779};on.ext_blend_minmax&&(ri.min=32775,ri.max=32776);var vi=on.angle_instanced_arrays,ii=on.webgl_draw_buffers,Si={dirty:!0,profile:Pr.profile},zi={},Xi=[],Bi={},Di={};function pe(Ze){return Ze.replace(".","_")}function G(Ze,Te,R){var mt=pe(Ze);Xi.push(Ze),zi[mt]=Si[mt]=!!R,Bi[mt]=Te}function B(Ze,Te,R){var mt=pe(Ze);Xi.push(Ze),Array.isArray(R)?(Si[mt]=R.slice(),zi[mt]=R.slice()):Si[mt]=zi[mt]=R,Di[mt]=Te}G("dither",3024),G("blend.enable",3042),B("blend.color","blendColor",[0,0,0,0]),B("blend.equation","blendEquationSeparate",[32774,32774]),B("blend.func","blendFuncSeparate",[1,0,1,0]),G("depth.enable",2929,!0),B("depth.func","depthFunc",513),B("depth.range","depthRange",[0,1]),B("depth.mask","depthMask",!0),B("colorMask","colorMask",[!0,!0,!0,!0]),G("cull.enable",2884),B("cull.face","cullFace",1029),B("frontFace","frontFace",2305),B("lineWidth","lineWidth",1),G("polygonOffset.enable",32823),B("polygonOffset.offset","polygonOffset",[0,0]),G("sample.alpha",32926),G("sample.enable",32928),B("sample.coverage","sampleCoverage",[1,!1]),G("stencil.enable",2960),B("stencil.mask","stencilMask",-1),B("stencil.func","stencilFunc",[519,0,-1]),B("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),B("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),G("scissor.enable",3089),B("scissor.box","scissor",[0,0,$e.drawingBufferWidth,$e.drawingBufferHeight]),B("viewport","viewport",[0,0,$e.drawingBufferWidth,$e.drawingBufferHeight]);var $={gl:$e,context:Ir,strings:rn,next:zi,current:Si,draw:Er,elements:ar,buffer:vr,shader:xr,attributes:wr.state,vao:wr,uniforms:Ar,framebuffer:Fr,extensions:on,timer:Lr,isBufferArgs:uo},ut={primTypes:Pt,compareFuncs:Pi,blendFuncs:Wi,blendEquations:ri,stencilOps:no,glTypes:H,orientationType:ao};lt.optional(function(){$.isArrayLike=Xt}),ii&&(ut.backBuffer=[1029],ut.drawBuffer=ot($n.maxDrawbuffers,function(Ze){return Ze===0?[0]:ot(Ze,function(Te){return 36064+Te})}));var Bt=0;function Jt(){var Ze=function(){var ce=0,Me=[],_e=[];function We(){var ln=[],hn=[];return j(function(){ln.push.apply(ln,Xr(arguments))},{def:function(){var dn="v"+ce++;return hn.push(dn),arguments.length>0&&(ln.push(dn,"="),ln.push.apply(ln,Xr(arguments)),ln.push(";")),dn},toString:function(){return Br([hn.length>0?"var "+hn.join(",")+";":"",Br(ln)])}})}function Re(){var ln=We(),hn=We(),nn=ln.toString,dn=hn.toString;function Sn(Pe,le){hn(Pe,le,"=",ln.def(Pe,le),";")}return j(function(){ln.apply(ln,Xr(arguments))},{def:ln.def,entry:ln,exit:hn,save:Sn,set:function(le,Le,Be){Sn(le,Le),ln(le,Le,"=",Be,";")},toString:function(){return nn()+dn()}})}var tn=We(),ke={};return{global:tn,link:function(hn){for(var nn=0;nn<_e.length;++nn)if(_e[nn]===hn)return Me[nn];var dn="g"+ce++;return Me.push(dn),_e.push(hn),dn},block:We,proc:function(hn,nn){var dn=[];function Sn(){var Be="a"+dn.length;return dn.push(Be),Be}nn=nn||0;for(var Pe=0;Pe<nn;++Pe)Sn();var le=Re(),Le=le.toString;return ke[hn]=j(le,{arg:Sn,toString:function(){return Br(["function(",dn.join(),"){",Le(),"}"])}})},scope:Re,cond:function(){var hn=Br(arguments),nn=Re(),dn=Re(),Sn=nn.toString,Pe=dn.toString;return j(nn,{then:function(){return nn.apply(nn,Xr(arguments)),this},else:function(){return dn.apply(dn,Xr(arguments)),this},toString:function(){var Le=Pe();return Le&&(Le="else{"+Le+"}"),Br(["if(",hn,"){",Sn(),"}",Le])}})},compile:function(){var hn=['"use strict";',tn,"return {"];Object.keys(ke).forEach(function(dn){hn.push('"',dn,'":',ke[dn].toString(),",")}),hn.push("}");var nn=Br(hn).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return Function.apply(null,Me.concat(nn)).apply(null,_e)}}}(),Te=Ze.link,R=Ze.global;Ze.id=Bt++,Ze.batchId="0";var mt=Te($),$t=Ze.shared={props:"a0"};Object.keys($).forEach(function(ce){$t[ce]=R.def(mt,".",ce)}),lt.optional(function(){Ze.CHECK=Te(lt),Ze.commandStr=lt.guessCommand(),Ze.command=Te(Ze.commandStr),Ze.assert=function(ce,Me,_e){ce("if(!(",Me,"))",this.CHECK,".commandRaise(",Te(_e),",",this.command,");")},ut.invalidBlendCombinations=Zi});var me=Ze.next={},Zt=Ze.current={};Object.keys(Di).forEach(function(ce){Array.isArray(Si[ce])&&(me[ce]=R.def($t.next,".",ce),Zt[ce]=R.def($t.current,".",ce))});var ve=Ze.constants={};Object.keys(ut).forEach(function(ce){ve[ce]=R.def(JSON.stringify(ut[ce]))}),Ze.invoke=function(ce,Me){switch(Me.type){case 0:var _e=["this",$t.context,$t.props,Ze.batchId];return ce.def(Te(Me.data),".call(",_e.slice(0,Math.max(Me.data.length+1,4)),")");case 1:return ce.def($t.props,Me.data);case 2:return ce.def($t.context,Me.data);case 3:return ce.def("this",Me.data);case 4:return Me.data.append(Ze,ce),Me.data.ref;case 5:return Me.data.toString();case 6:return Me.data.map(function(We){return Ze.invoke(ce,We)})}},Ze.attribCache={};var he={};return Ze.scopeAttrib=function(ce){var Me=rn.id(ce);if(Me in he)return he[Me];var _e=wr.scope[Me];return _e||(_e=wr.scope[Me]=new Dr),he[Me]=Te(_e)},Ze}function ie(Ze,Te,R,mt,$t){var me=Ze.static,Zt=Ze.dynamic;lt.optional(function(){var dn=[Kr,ni,fi,$r,ci,gi,Qr,Oi,Yr,bi].concat(Xi);function Sn(Pe){Object.keys(Pe).forEach(function(le){lt.command(dn.indexOf(le)>=0,'unknown parameter "'+le+'"',$t.commandStr)})}Sn(me),Sn(Zt)});var ve=function(dn,Sn){var Pe=dn.static;if(typeof Pe[fi]=="string"&&typeof Pe[ni]=="string"){if(Object.keys(Sn.dynamic).length>0)return null;var le=Sn.static,Le=Object.keys(le);if(Le.length>0&&typeof le[Le[0]]=="number"){for(var Be=[],en=0;en<Le.length;++en)lt(typeof le[Le[en]]=="number","must specify all vertex attribute locations when using vaos"),Be.push([0|le[Le[en]],Le[en]]);return Be}}return null}(Ze,Te),he=function(dn,Sn){var Pe=dn.static,le=dn.dynamic;if(Kr in Pe){var Le=Pe[Kr];return Le?(Le=Fr.getFramebuffer(Le),lt.command(Le,"invalid framebuffer object"),te(function(en,un){var ze=en.link(Le),fn=en.shared;un.set(fn.framebuffer,".next",ze);var mn=fn.context;return un.set(mn,"."+_i,ze+".width"),un.set(mn,"."+Qi,ze+".height"),ze})):te(function(en,un){var ze=en.shared;un.set(ze.framebuffer,".next","null");var fn=ze.context;return un.set(fn,"."+_i,fn+".drawingBufferWidth"),un.set(fn,"."+Qi,fn+".drawingBufferHeight"),"null"})}if(Kr in le){var Be=le[Kr];return Oe(Be,function(en,un){var ze=en.invoke(un,Be),fn=en.shared,mn=fn.framebuffer,Wn=un.def(mn,".getFramebuffer(",ze,")");lt.optional(function(){en.assert(un,"!"+ze+"||"+Wn,"invalid framebuffer object")}),un.set(mn,".next",Wn);var Tn=fn.context;return un.set(Tn,"."+_i,Wn+"?"+Wn+".width:"+Tn+".drawingBufferWidth"),un.set(Tn,"."+Qi,Wn+"?"+Wn+".height:"+Tn+".drawingBufferHeight"),Wn})}return null}(Ze),ce=function(dn,Sn,Pe){var le=dn.static,Le=dn.dynamic;function Be(ze){if(ze in le){var fn=le[ze];lt.commandType(fn,"object","invalid "+ze,Pe.commandStr);var mn,Wn,Tn=!0,Pn=0|fn.x,lr=0|fn.y;return"width"in fn?(mn=0|fn.width,lt.command(mn>=0,"invalid "+ze,Pe.commandStr)):Tn=!1,"height"in fn?(Wn=0|fn.height,lt.command(Wn>=0,"invalid "+ze,Pe.commandStr)):Tn=!1,new oe(!Tn&&Sn&&Sn.thisDep,!Tn&&Sn&&Sn.contextDep,!Tn&&Sn&&Sn.propDep,function(Mr,oi){var ai=Mr.shared.context,Zr=mn;"width"in fn||(Zr=oi.def(ai,".",_i,"-",Pn));var Yi=Wn;return"height"in fn||(Yi=oi.def(ai,".",Qi,"-",lr)),[Pn,lr,Zr,Yi]})}if(ze in Le){var Hr=Le[ze],Gr=Oe(Hr,function(Mr,oi){var ai=Mr.invoke(oi,Hr);lt.optional(function(){Mr.assert(oi,ai+"&&typeof "+ai+'==="object"',"invalid "+ze)});var Zr=Mr.shared.context,Yi=oi.def(ai,".x|0"),$i=oi.def(ai,".y|0"),Go=oi.def('"width" in ',ai,"?",ai,".width|0:","(",Zr,".",_i,"-",Yi,")"),Uo=oi.def('"height" in ',ai,"?",ai,".height|0:","(",Zr,".",Qi,"-",$i,")");return lt.optional(function(){Mr.assert(oi,Go+">=0&&"+Uo+">=0","invalid "+ze)}),[Yi,$i,Go,Uo]});return Sn&&(Gr.thisDep=Gr.thisDep||Sn.thisDep,Gr.contextDep=Gr.contextDep||Sn.contextDep,Gr.propDep=Gr.propDep||Sn.propDep),Gr}return Sn?new oe(Sn.thisDep,Sn.contextDep,Sn.propDep,function(Mr,oi){var ai=Mr.shared.context;return[0,0,oi.def(ai,".",_i),oi.def(ai,".",Qi)]}):null}var en=Be("viewport");if(en){var un=en;en=new oe(en.thisDep,en.contextDep,en.propDep,function(ze,fn){var mn=un.append(ze,fn),Wn=ze.shared.context;return fn.set(Wn,".viewportWidth",mn[2]),fn.set(Wn,".viewportHeight",mn[3]),mn})}return{viewport:en,scissor_box:Be("scissor.box")}}(Ze,he,$t),Me=function(dn,Sn){var Pe=dn.static,le=dn.dynamic,Le=function(){if($r in Pe){var un=Pe[$r];uo(un)?un=ar.getElements(ar.create(un,!0)):un&&(un=ar.getElements(un),lt.command(un,"invalid elements",Sn.commandStr));var ze=te(function(mn,Wn){if(un){var Tn=mn.link(un);return mn.ELEMENTS=Tn,Tn}return mn.ELEMENTS=null,null});return ze.value=un,ze}if($r in le){var fn=le[$r];return Oe(fn,function(mn,Wn){var Tn=mn.shared,Pn=Tn.isBufferArgs,lr=Tn.elements,Hr=mn.invoke(Wn,fn),Gr=Wn.def("null"),Mr=Wn.def(Pn,"(",Hr,")"),oi=mn.cond(Mr).then(Gr,"=",lr,".createStream(",Hr,");").else(Gr,"=",lr,".getElements(",Hr,");");return lt.optional(function(){mn.assert(oi.else,"!"+Hr+"||"+Gr,"invalid elements")}),Wn.entry(oi),Wn.exit(mn.cond(Mr).then(lr,".destroyStream(",Gr,");")),mn.ELEMENTS=Gr,Gr})}return null}();function Be(un,ze){if(un in Pe){var fn=0|Pe[un];return lt.command(!ze||fn>=0,"invalid "+un,Sn.commandStr),te(function(Wn,Tn){return ze&&(Wn.OFFSET=fn),fn})}if(un in le){var mn=le[un];return Oe(mn,function(Wn,Tn){var Pn=Wn.invoke(Tn,mn);return ze&&(Wn.OFFSET=Pn,lt.optional(function(){Wn.assert(Tn,Pn+">=0","invalid "+un)})),Pn})}return ze&&Le?te(function(Wn,Tn){return Wn.OFFSET="0",0}):null}var en=Be(gi,!0);return{elements:Le,primitive:function(){if(ci in Pe){var un=Pe[ci];return lt.commandParameter(un,Pt,"invalid primitve",Sn.commandStr),te(function(fn,mn){return Pt[un]})}if(ci in le){var ze=le[ci];return Oe(ze,function(fn,mn){var Wn=fn.constants.primTypes,Tn=fn.invoke(mn,ze);return lt.optional(function(){fn.assert(mn,Tn+" in "+Wn,"invalid primitive, must be one of "+Object.keys(Pt))}),mn.def(Wn,"[",Tn,"]")})}return Le?Kt(Le)?Le.value?te(function(fn,mn){return mn.def(fn.ELEMENTS,".primType")}):te(function(){return 4}):new oe(Le.thisDep,Le.contextDep,Le.propDep,function(fn,mn){var Wn=fn.ELEMENTS;return mn.def(Wn,"?",Wn,".primType:",4)}):null}(),count:function(){if(Qr in Pe){var un=0|Pe[Qr];return lt.command(typeof un=="number"&&un>=0,"invalid vertex count",Sn.commandStr),te(function(){return un})}if(Qr in le){var ze=le[Qr];return Oe(ze,function(Wn,Tn){var Pn=Wn.invoke(Tn,ze);return lt.optional(function(){Wn.assert(Tn,"typeof "+Pn+'==="number"&&'+Pn+">=0&&"+Pn+"===("+Pn+"|0)","invalid vertex count")}),Pn})}if(Le){if(Kt(Le)){if(Le)return en?new oe(en.thisDep,en.contextDep,en.propDep,function(Wn,Tn){var Pn=Tn.def(Wn.ELEMENTS,".vertCount-",Wn.OFFSET);return lt.optional(function(){Wn.assert(Tn,Pn+">=0","invalid vertex offset/element buffer too small")}),Pn}):te(function(Wn,Tn){return Tn.def(Wn.ELEMENTS,".vertCount")});var fn=te(function(){return-1});return lt.optional(function(){fn.MISSING=!0}),fn}var mn=new oe(Le.thisDep||en.thisDep,Le.contextDep||en.contextDep,Le.propDep||en.propDep,function(Wn,Tn){var Pn=Wn.ELEMENTS;return Wn.OFFSET?Tn.def(Pn,"?",Pn,".vertCount-",Wn.OFFSET,":-1"):Tn.def(Pn,"?",Pn,".vertCount:-1")});return lt.optional(function(){mn.DYNAMIC=!0}),mn}return null}(),instances:Be(Oi,!1),offset:en}}(Ze,$t),_e=function(dn,Sn){var Pe=dn.static,le=dn.dynamic,Le={};return Xi.forEach(function(Be){var en=pe(Be);function un(ze,fn){if(Be in Pe){var mn=ze(Pe[Be]);Le[en]=te(function(){return mn})}else if(Be in le){var Wn=le[Be];Le[en]=Oe(Wn,function(Tn,Pn){return fn(Tn,Pn,Tn.invoke(Pn,Wn))})}}switch(Be){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return un(function(ze){return lt.commandType(ze,"boolean",Be,Sn.commandStr),ze},function(ze,fn,mn){return lt.optional(function(){ze.assert(fn,"typeof "+mn+'==="boolean"',"invalid flag "+Be,ze.commandStr)}),mn});case"depth.func":return un(function(ze){return lt.commandParameter(ze,Pi,"invalid "+Be,Sn.commandStr),Pi[ze]},function(ze,fn,mn){var Wn=ze.constants.compareFuncs;return lt.optional(function(){ze.assert(fn,mn+" in "+Wn,"invalid "+Be+", must be one of "+Object.keys(Pi))}),fn.def(Wn,"[",mn,"]")});case"depth.range":return un(function(ze){return lt.command(Xt(ze)&&ze.length===2&&typeof ze[0]=="number"&&typeof ze[1]=="number"&&ze[0]<=ze[1],"depth range is 2d array",Sn.commandStr),ze},function(ze,fn,mn){return lt.optional(function(){ze.assert(fn,ze.shared.isArrayLike+"("+mn+")&&"+mn+".length===2&&typeof "+mn+'[0]==="number"&&typeof '+mn+'[1]==="number"&&'+mn+"[0]<="+mn+"[1]","depth range must be a 2d array")}),[fn.def("+",mn,"[0]"),fn.def("+",mn,"[1]")]});case"blend.func":return un(function(ze){lt.commandType(ze,"object","blend.func",Sn.commandStr);var fn="srcRGB"in ze?ze.srcRGB:ze.src,mn="srcAlpha"in ze?ze.srcAlpha:ze.src,Wn="dstRGB"in ze?ze.dstRGB:ze.dst,Tn="dstAlpha"in ze?ze.dstAlpha:ze.dst;return lt.commandParameter(fn,Wi,en+".srcRGB",Sn.commandStr),lt.commandParameter(mn,Wi,en+".srcAlpha",Sn.commandStr),lt.commandParameter(Wn,Wi,en+".dstRGB",Sn.commandStr),lt.commandParameter(Tn,Wi,en+".dstAlpha",Sn.commandStr),lt.command(Zi.indexOf(fn+", "+Wn)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+fn+", "+Wn+")",Sn.commandStr),[Wi[fn],Wi[Wn],Wi[mn],Wi[Tn]]},function(ze,fn,mn){var Wn=ze.constants.blendFuncs;function Tn(Mr,oi){var ai=fn.def('"',Mr,oi,'" in ',mn,"?",mn,".",Mr,oi,":",mn,".",Mr);return lt.optional(function(){ze.assert(fn,ai+" in "+Wn,"invalid "+Be+"."+Mr+oi+", must be one of "+Object.keys(Wi))}),ai}lt.optional(function(){ze.assert(fn,mn+"&&typeof "+mn+'==="object"',"invalid blend func, must be an object")});var Pn=Tn("src","RGB"),lr=Tn("dst","RGB");lt.optional(function(){var Mr=ze.constants.invalidBlendCombinations;ze.assert(fn,Mr+".indexOf("+Pn+'+", "+'+lr+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Hr=fn.def(Wn,"[",Pn,"]"),Gr=fn.def(Wn,"[",Tn("src","Alpha"),"]");return[Hr,fn.def(Wn,"[",lr,"]"),Gr,fn.def(Wn,"[",Tn("dst","Alpha"),"]")]});case"blend.equation":return un(function(ze){return typeof ze=="string"?(lt.commandParameter(ze,ri,"invalid "+Be,Sn.commandStr),[ri[ze],ri[ze]]):O(ze)==="object"?(lt.commandParameter(ze.rgb,ri,Be+".rgb",Sn.commandStr),lt.commandParameter(ze.alpha,ri,Be+".alpha",Sn.commandStr),[ri[ze.rgb],ri[ze.alpha]]):void lt.commandRaise("invalid blend.equation",Sn.commandStr)},function(ze,fn,mn){var Wn=ze.constants.blendEquations,Tn=fn.def(),Pn=fn.def(),lr=ze.cond("typeof ",mn,'==="string"');return lt.optional(function(){function Hr(Gr,Mr,oi){ze.assert(Gr,oi+" in "+Wn,"invalid "+Mr+", must be one of "+Object.keys(ri))}Hr(lr.then,Be,mn),ze.assert(lr.else,mn+"&&typeof "+mn+'==="object"',"invalid "+Be),Hr(lr.else,Be+".rgb",mn+".rgb"),Hr(lr.else,Be+".alpha",mn+".alpha")}),lr.then(Tn,"=",Pn,"=",Wn,"[",mn,"];"),lr.else(Tn,"=",Wn,"[",mn,".rgb];",Pn,"=",Wn,"[",mn,".alpha];"),fn(lr),[Tn,Pn]});case"blend.color":return un(function(ze){return lt.command(Xt(ze)&&ze.length===4,"blend.color must be a 4d array",Sn.commandStr),ot(4,function(fn){return+ze[fn]})},function(ze,fn,mn){return lt.optional(function(){ze.assert(fn,ze.shared.isArrayLike+"("+mn+")&&"+mn+".length===4","blend.color must be a 4d array")}),ot(4,function(Wn){return fn.def("+",mn,"[",Wn,"]")})});case"stencil.mask":return un(function(ze){return lt.commandType(ze,"number",en,Sn.commandStr),0|ze},function(ze,fn,mn){return lt.optional(function(){ze.assert(fn,"typeof "+mn+'==="number"',"invalid stencil.mask")}),fn.def(mn,"|0")});case"stencil.func":return un(function(ze){lt.commandType(ze,"object",en,Sn.commandStr);var fn=ze.cmp||"keep",mn=ze.ref||0,Wn="mask"in ze?ze.mask:-1;return lt.commandParameter(fn,Pi,Be+".cmp",Sn.commandStr),lt.commandType(mn,"number",Be+".ref",Sn.commandStr),lt.commandType(Wn,"number",Be+".mask",Sn.commandStr),[Pi[fn],mn,Wn]},function(ze,fn,mn){var Wn=ze.constants.compareFuncs;return lt.optional(function(){function Tn(){ze.assert(fn,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Tn(mn+"&&typeof ",mn,'==="object"'),Tn('!("cmp" in ',mn,")||(",mn,".cmp in ",Wn,")")}),[fn.def('"cmp" in ',mn,"?",Wn,"[",mn,".cmp]",":",7680),fn.def(mn,".ref|0"),fn.def('"mask" in ',mn,"?",mn,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return un(function(ze){lt.commandType(ze,"object",en,Sn.commandStr);var fn=ze.fail||"keep",mn=ze.zfail||"keep",Wn=ze.zpass||"keep";return lt.commandParameter(fn,no,Be+".fail",Sn.commandStr),lt.commandParameter(mn,no,Be+".zfail",Sn.commandStr),lt.commandParameter(Wn,no,Be+".zpass",Sn.commandStr),[Be==="stencil.opBack"?1029:1028,no[fn],no[mn],no[Wn]]},function(ze,fn,mn){var Wn=ze.constants.stencilOps;function Tn(Pn){return lt.optional(function(){ze.assert(fn,'!("'+Pn+'" in '+mn+")||("+mn+"."+Pn+" in "+Wn+")","invalid "+Be+"."+Pn+", must be one of "+Object.keys(no))}),fn.def('"',Pn,'" in ',mn,"?",Wn,"[",mn,".",Pn,"]:",7680)}return lt.optional(function(){ze.assert(fn,mn+"&&typeof "+mn+'==="object"',"invalid "+Be)}),[Be==="stencil.opBack"?1029:1028,Tn("fail"),Tn("zfail"),Tn("zpass")]});case"polygonOffset.offset":return un(function(ze){lt.commandType(ze,"object",en,Sn.commandStr);var fn=0|ze.factor,mn=0|ze.units;return lt.commandType(fn,"number",en+".factor",Sn.commandStr),lt.commandType(mn,"number",en+".units",Sn.commandStr),[fn,mn]},function(ze,fn,mn){return lt.optional(function(){ze.assert(fn,mn+"&&typeof "+mn+'==="object"',"invalid "+Be)}),[fn.def(mn,".factor|0"),fn.def(mn,".units|0")]});case"cull.face":return un(function(ze){var fn=0;return ze==="front"?fn=1028:ze==="back"&&(fn=1029),lt.command(!!fn,en,Sn.commandStr),fn},function(ze,fn,mn){return lt.optional(function(){ze.assert(fn,mn+'==="front"||'+mn+'==="back"',"invalid cull.face")}),fn.def(mn,'==="front"?',1028,":",1029)});case"lineWidth":return un(function(ze){return lt.command(typeof ze=="number"&&ze>=$n.lineWidthDims[0]&&ze<=$n.lineWidthDims[1],"invalid line width, must be a positive number between "+$n.lineWidthDims[0]+" and "+$n.lineWidthDims[1],Sn.commandStr),ze},function(ze,fn,mn){return lt.optional(function(){ze.assert(fn,"typeof "+mn+'==="number"&&'+mn+">="+$n.lineWidthDims[0]+"&&"+mn+"<="+$n.lineWidthDims[1],"invalid line width")}),mn});case"frontFace":return un(function(ze){return lt.commandParameter(ze,ao,en,Sn.commandStr),ao[ze]},function(ze,fn,mn){return lt.optional(function(){ze.assert(fn,mn+'==="cw"||'+mn+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),fn.def(mn+'==="cw"?2304:2305')});case"colorMask":return un(function(ze){return lt.command(Xt(ze)&&ze.length===4,"color.mask must be length 4 array",Sn.commandStr),ze.map(function(fn){return!!fn})},function(ze,fn,mn){return lt.optional(function(){ze.assert(fn,ze.shared.isArrayLike+"("+mn+")&&"+mn+".length===4","invalid color.mask")}),ot(4,function(Wn){return"!!"+mn+"["+Wn+"]"})});case"sample.coverage":return un(function(ze){lt.command(O(ze)==="object"&&ze,en,Sn.commandStr);var fn="value"in ze?ze.value:1,mn=!!ze.invert;return lt.command(typeof fn=="number"&&fn>=0&&fn<=1,"sample.coverage.value must be a number between 0 and 1",Sn.commandStr),[fn,mn]},function(ze,fn,mn){return lt.optional(function(){ze.assert(fn,mn+"&&typeof "+mn+'==="object"',"invalid sample.coverage")}),[fn.def('"value" in ',mn,"?+",mn,".value:1"),fn.def("!!",mn,".invert")]})}}),Le}(Ze,$t),We=function(dn,Sn,Pe){var le=dn.static,Le=dn.dynamic;function Be(mn){if(mn in le){var Wn=rn.id(le[mn]);lt.optional(function(){xr.shader(Mo[mn],Wn,lt.guessCommand())});var Tn=te(function(){return Wn});return Tn.id=Wn,Tn}if(mn in Le){var Pn=Le[mn];return Oe(Pn,function(lr,Hr){var Gr=lr.invoke(Hr,Pn),Mr=Hr.def(lr.shared.strings,".id(",Gr,")");return lt.optional(function(){Hr(lr.shared.shader,".shader(",Mo[mn],",",Mr,",",lr.command,");")}),Mr})}return null}var en,un=Be(fi),ze=Be(ni),fn=null;return Kt(un)&&Kt(ze)?(fn=xr.program(ze.id,un.id,null,Pe),en=te(function(mn,Wn){return mn.link(fn)})):en=new oe(un&&un.thisDep||ze&&ze.thisDep,un&&un.contextDep||ze&&ze.contextDep,un&&un.propDep||ze&&ze.propDep,function(mn,Wn){var Tn,Pn=mn.shared.shader;Tn=un?un.append(mn,Wn):Wn.def(Pn,".",fi);var lr=Pn+".program("+(ze?ze.append(mn,Wn):Wn.def(Pn,".",ni))+","+Tn;return lt.optional(function(){lr+=","+mn.command}),Wn.def(lr+")")}),{frag:un,vert:ze,progVar:en,program:fn}}(Ze,0,ve);function Re(dn){var Sn=ce[dn];Sn&&(_e[dn]=Sn)}Re("viewport"),Re(pe("scissor.box"));var tn=Object.keys(_e).length>0,ke={framebuffer:he,draw:Me,shader:We,state:_e,dirty:tn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(ke.profile=function(dn){var Sn,Pe=dn.static,le=dn.dynamic;if(Yr in Pe){var Le=!!Pe[Yr];(Sn=te(function(en,un){return Le})).enable=Le}else if(Yr in le){var Be=le[Yr];Sn=Oe(Be,function(en,un){return en.invoke(un,Be)})}return Sn}(Ze),ke.uniforms=function(dn,Sn){var Pe=dn.static,le=dn.dynamic,Le={};return Object.keys(Pe).forEach(function(Be){var en,un=Pe[Be];if(typeof un=="number"||typeof un=="boolean")en=te(function(){return un});else if(typeof un=="function"){var ze=un._reglType;ze==="texture2d"||ze==="textureCube"?en=te(function(fn){return fn.link(un)}):ze==="framebuffer"||ze==="framebufferCube"?(lt.command(un.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Be+'"',Sn.commandStr),en=te(function(fn){return fn.link(un.color[0])})):lt.commandRaise('invalid data for uniform "'+Be+'"',Sn.commandStr)}else Xt(un)?en=te(function(fn){return fn.global.def("[",ot(un.length,function(mn){return lt.command(typeof un[mn]=="number"||typeof un[mn]=="boolean","invalid uniform "+Be,fn.commandStr),un[mn]}),"]")}):lt.commandRaise('invalid or missing data for uniform "'+Be+'"',Sn.commandStr);en.value=un,Le[Be]=en}),Object.keys(le).forEach(function(Be){var en=le[Be];Le[Be]=Oe(en,function(un,ze){return un.invoke(ze,en)})}),Le}(R,$t),ke.drawVAO=ke.scopeVAO=function(dn,Sn){var Pe=dn.static,le=dn.dynamic;if(bi in Pe){var Le=Pe[bi];return Le!==null&&wr.getVAO(Le)===null&&(Le=wr.createVAO(Le)),te(function(en){return en.link(wr.getVAO(Le))})}if(bi in le){var Be=le[bi];return Oe(Be,function(en,un){var ze=en.invoke(un,Be);return un.def(en.shared.vao+".getVAO("+ze+")")})}return null}(Ze),!ke.drawVAO&&We.program&&!ve&&on.angle_instanced_arrays){var ln=!0,hn=We.program.attributes.map(function(dn){var Sn=Te.static[dn];return ln=ln&&!!Sn,Sn});if(ln&&hn.length>0){var nn=wr.getVAO(wr.createVAO(hn));ke.drawVAO=new oe(null,null,null,function(dn,Sn){return dn.link(nn)}),ke.useVAO=!0}}return ve?ke.useVAO=!0:ke.attributes=function(dn,Sn){var Pe=dn.static,le=dn.dynamic,Le={};return Object.keys(Pe).forEach(function(Be){var en=Pe[Be],un=rn.id(Be),ze=new Dr;if(uo(en))ze.state=1,ze.buffer=vr.getBuffer(vr.create(en,34962,!1,!0)),ze.type=0;else{var fn=vr.getBuffer(en);if(fn)ze.state=1,ze.buffer=fn,ze.type=0;else if(lt.command(O(en)==="object"&&en,"invalid data for attribute "+Be,Sn.commandStr),"constant"in en){var mn=en.constant;ze.buffer="null",ze.state=2,typeof mn=="number"?ze.x=mn:(lt.command(Xt(mn)&&mn.length>0&&mn.length<=4,"invalid constant for attribute "+Be,Sn.commandStr),Nr.forEach(function(Mr,oi){oi<mn.length&&(ze[Mr]=mn[oi])}))}else{fn=uo(en.buffer)?vr.getBuffer(vr.create(en.buffer,34962,!1,!0)):vr.getBuffer(en.buffer),lt.command(!!fn,'missing buffer for attribute "'+Be+'"',Sn.commandStr);var Wn=0|en.offset;lt.command(Wn>=0,'invalid offset for attribute "'+Be+'"',Sn.commandStr);var Tn=0|en.stride;lt.command(Tn>=0&&Tn<256,'invalid stride for attribute "'+Be+'", must be integer betweeen [0, 255]',Sn.commandStr);var Pn=0|en.size;lt.command(!("size"in en)||Pn>0&&Pn<=4,'invalid size for attribute "'+Be+'", must be 1,2,3,4',Sn.commandStr);var lr=!!en.normalized,Hr=0;"type"in en&&(lt.commandParameter(en.type,H,"invalid type for attribute "+Be,Sn.commandStr),Hr=H[en.type]);var Gr=0|en.divisor;"divisor"in en&&(lt.command(Gr===0||vi,'cannot specify divisor for attribute "'+Be+'", instancing not supported',Sn.commandStr),lt.command(Gr>=0,'invalid divisor for attribute "'+Be+'"',Sn.commandStr)),lt.optional(function(){var Mr=Sn.commandStr,oi=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(en).forEach(function(ai){lt.command(oi.indexOf(ai)>=0,'unknown parameter "'+ai+'" for attribute pointer "'+Be+'" (valid parameters are '+oi+")",Mr)})}),ze.buffer=fn,ze.state=1,ze.size=Pn,ze.normalized=lr,ze.type=Hr||fn.dtype,ze.offset=Wn,ze.stride=Tn,ze.divisor=Gr}}Le[Be]=te(function(Mr,oi){var ai=Mr.attribCache;if(un in ai)return ai[un];var Zr={isStream:!1};return Object.keys(ze).forEach(function(Yi){Zr[Yi]=ze[Yi]}),ze.buffer&&(Zr.buffer=Mr.link(ze.buffer),Zr.type=Zr.type||Zr.buffer+".dtype"),ai[un]=Zr,Zr})}),Object.keys(le).forEach(function(Be){var en=le[Be];Le[Be]=Oe(en,function(un,ze){var fn=un.invoke(ze,en),mn=un.shared,Wn=un.constants,Tn=mn.isBufferArgs,Pn=mn.buffer;lt.optional(function(){un.assert(ze,fn+"&&(typeof "+fn+'==="object"||typeof '+fn+'==="function")&&('+Tn+"("+fn+")||"+Pn+".getBuffer("+fn+")||"+Pn+".getBuffer("+fn+".buffer)||"+Tn+"("+fn+'.buffer)||("constant" in '+fn+"&&(typeof "+fn+'.constant==="number"||'+mn.isArrayLike+"("+fn+".constant))))",'invalid dynamic attribute "'+Be+'"')});var lr={isStream:ze.def(!1)},Hr=new Dr;Hr.state=1,Object.keys(Hr).forEach(function(ai){lr[ai]=ze.def(""+Hr[ai])});var Gr=lr.buffer,Mr=lr.type;function oi(ai){ze(lr[ai],"=",fn,".",ai,"|0;")}return ze("if(",Tn,"(",fn,")){",lr.isStream,"=true;",Gr,"=",Pn,".createStream(",34962,",",fn,");",Mr,"=",Gr,".dtype;","}else{",Gr,"=",Pn,".getBuffer(",fn,");","if(",Gr,"){",Mr,"=",Gr,".dtype;",'}else if("constant" in ',fn,"){",lr.state,"=",2,";","if(typeof "+fn+'.constant === "number"){',lr[Nr[0]],"=",fn,".constant;",Nr.slice(1).map(function(ai){return lr[ai]}).join("="),"=0;","}else{",Nr.map(function(ai,Zr){return lr[ai]+"="+fn+".constant.length>"+Zr+"?"+fn+".constant["+Zr+"]:0;"}).join(""),"}}else{","if(",Tn,"(",fn,".buffer)){",Gr,"=",Pn,".createStream(",34962,",",fn,".buffer);","}else{",Gr,"=",Pn,".getBuffer(",fn,".buffer);","}",Mr,'="type" in ',fn,"?",Wn.glTypes,"[",fn,".type]:",Gr,".dtype;",lr.normalized,"=!!",fn,".normalized;"),oi("size"),oi("offset"),oi("stride"),oi("divisor"),ze("}}"),ze.exit("if(",lr.isStream,"){",Pn,".destroyStream(",Gr,");","}"),lr})}),Le}(Te,$t),ke.context=function(dn){var Sn=dn.static,Pe=dn.dynamic,le={};return Object.keys(Sn).forEach(function(Le){var Be=Sn[Le];le[Le]=te(function(en,un){return typeof Be=="number"||typeof Be=="boolean"?""+Be:en.link(Be)})}),Object.keys(Pe).forEach(function(Le){var Be=Pe[Le];le[Le]=Oe(Be,function(en,un){return en.invoke(un,Be)})}),le}(mt),ke}function se(Ze,Te,R){var mt=Ze.shared.context,$t=Ze.scope();Object.keys(R).forEach(function(me){Te.save(mt,"."+me);var Zt=R[me].append(Ze,Te);Array.isArray(Zt)?$t(mt,".",me,"=[",Zt.join(),"];"):$t(mt,".",me,"=",Zt,";")}),Te($t)}function Ce(Ze,Te,R,mt){var $t,me=Ze.shared,Zt=me.gl,ve=me.framebuffer;ii&&($t=Te.def(me.extensions,".webgl_draw_buffers"));var he,ce=Ze.constants,Me=ce.drawBuffer,_e=ce.backBuffer;he=R?R.append(Ze,Te):Te.def(ve,".next"),mt||Te("if(",he,"!==",ve,".cur){"),Te("if(",he,"){",Zt,".bindFramebuffer(",36160,",",he,".framebuffer);"),ii&&Te($t,".drawBuffersWEBGL(",Me,"[",he,".colorAttachments.length]);"),Te("}else{",Zt,".bindFramebuffer(",36160,",null);"),ii&&Te($t,".drawBuffersWEBGL(",_e,");"),Te("}",ve,".cur=",he,";"),mt||Te("}")}function Ee(Ze,Te,R){var mt=Ze.shared,$t=mt.gl,me=Ze.current,Zt=Ze.next,ve=mt.current,he=mt.next,ce=Ze.cond(ve,".dirty");Xi.forEach(function(Me){var _e,We,Re=pe(Me);if(!(Re in R.state))if(Re in Zt){_e=Zt[Re],We=me[Re];var tn=ot(Si[Re].length,function(ln){return ce.def(_e,"[",ln,"]")});ce(Ze.cond(tn.map(function(ln,hn){return ln+"!=="+We+"["+hn+"]"}).join("||")).then($t,".",Di[Re],"(",tn,");",tn.map(function(ln,hn){return We+"["+hn+"]="+ln}).join(";"),";"))}else{_e=ce.def(he,".",Re);var ke=Ze.cond(_e,"!==",ve,".",Re);ce(ke),Re in Bi?ke(Ze.cond(_e).then($t,".enable(",Bi[Re],");").else($t,".disable(",Bi[Re],");"),ve,".",Re,"=",_e,";"):ke($t,".",Di[Re],"(",_e,");",ve,".",Re,"=",_e,";")}}),Object.keys(R.state).length===0&&ce(ve,".dirty=false;"),Te(ce)}function cn(Ze,Te,R,mt){var $t=Ze.shared,me=Ze.current,Zt=$t.current,ve=$t.gl;xo(Object.keys(R)).forEach(function(he){var ce=R[he];if(!mt||mt(ce)){var Me=ce.append(Ze,Te);if(Bi[he]){var _e=Bi[he];Kt(ce)?Te(ve,Me?".enable(":".disable(",_e,");"):Te(Ze.cond(Me).then(ve,".enable(",_e,");").else(ve,".disable(",_e,");")),Te(Zt,".",he,"=",Me,";")}else if(Xt(Me)){var We=me[he];Te(ve,".",Di[he],"(",Me,");",Me.map(function(Re,tn){return We+"["+tn+"]="+Re}).join(";"),";")}else Te(ve,".",Di[he],"(",Me,");",Zt,".",he,"=",Me,";")}})}function xn(Ze,Te){vi&&(Ze.instancing=Te.def(Ze.shared.extensions,".angle_instanced_arrays"))}function _t(Ze,Te,R,mt,$t){var me,Zt,ve,he=Ze.shared,ce=Ze.stats,Me=he.current,_e=he.timer,We=R.profile;function Re(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}function tn(dn){dn(me=Te.def(),"=",Re(),";"),typeof $t=="string"?dn(ce,".count+=",$t,";"):dn(ce,".count++;"),Lr&&(mt?dn(Zt=Te.def(),"=",_e,".getNumPendingQueries();"):dn(_e,".beginQuery(",ce,");"))}function ke(dn){dn(ce,".cpuTime+=",Re(),"-",me,";"),Lr&&(mt?dn(_e,".pushScopeStats(",Zt,",",_e,".getNumPendingQueries(),",ce,");"):dn(_e,".endQuery();"))}function ln(dn){var Sn=Te.def(Me,".profile");Te(Me,".profile=",dn,";"),Te.exit(Me,".profile=",Sn,";")}if(We){if(Kt(We))return void(We.enable?(tn(Te),ke(Te.exit),ln("true")):ln("false"));ln(ve=We.append(Ze,Te))}else ve=Te.def(Me,".profile");var hn=Ze.block();tn(hn),Te("if(",ve,"){",hn,"}");var nn=Ze.block();ke(nn),Te.exit("if(",ve,"){",nn,"}")}function Yt(Ze,Te,R,mt,$t){var me=Ze.shared;mt.forEach(function(Zt){var ve,he=Zt.name,ce=R.attributes[he];if(ce){if(!$t(ce))return;ve=ce.append(Ze,Te)}else{if(!$t(Qe))return;var Me=Ze.scopeAttrib(he);lt.optional(function(){Ze.assert(Te,Me+".state","missing attribute "+he)}),ve={},Object.keys(new Dr).forEach(function(_e){ve[_e]=Te.def(Me,".",_e)})}(function(_e,We,Re){var tn=me.gl,ke=Te.def(_e,".location"),ln=Te.def(me.attributes,"[",ke,"]"),hn=Re.state,nn=Re.buffer,dn=[Re.x,Re.y,Re.z,Re.w],Sn=["buffer","normalized","offset","stride"];function Pe(){Te("if(!",ln,".buffer){",tn,".enableVertexAttribArray(",ke,");}");var Le,Be=Re.type;if(Le=Re.size?Te.def(Re.size,"||",We):We,Te("if(",ln,".type!==",Be,"||",ln,".size!==",Le,"||",Sn.map(function(un){return ln+"."+un+"!=="+Re[un]}).join("||"),"){",tn,".bindBuffer(",34962,",",nn,".buffer);",tn,".vertexAttribPointer(",[ke,Le,Be,Re.normalized,Re.stride,Re.offset],");",ln,".type=",Be,";",ln,".size=",Le,";",Sn.map(function(un){return ln+"."+un+"="+Re[un]+";"}).join(""),"}"),vi){var en=Re.divisor;Te("if(",ln,".divisor!==",en,"){",Ze.instancing,".vertexAttribDivisorANGLE(",[ke,en],");",ln,".divisor=",en,";}")}}function le(){Te("if(",ln,".buffer){",tn,".disableVertexAttribArray(",ke,");",ln,".buffer=null;","}if(",Nr.map(function(Le,Be){return ln+"."+Le+"!=="+dn[Be]}).join("||"),"){",tn,".vertexAttrib4f(",ke,",",dn,");",Nr.map(function(Le,Be){return ln+"."+Le+"="+dn[Be]+";"}).join(""),"}")}hn===1?Pe():hn===2?le():(Te("if(",hn,"===",1,"){"),Pe(),Te("}else{"),le(),Te("}"))})(Ze.link(Zt),function(_e){switch(_e){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(Zt.info.type),ve)})}function Se(Ze,Te,R,mt,$t){for(var me,Zt=Ze.shared,ve=Zt.gl,he=0;he<mt.length;++he){var ce,Me=mt[he],_e=Me.name,We=Me.info.type,Re=R.uniforms[_e],tn=Ze.link(Me)+".location";if(Re){if(!$t(Re))continue;if(Kt(Re)){var ke=Re.value;if(lt.command(ke!=null,'missing uniform "'+_e+'"',Ze.commandStr),We===35678||We===35680){lt.command(typeof ke=="function"&&(We===35678&&(ke._reglType==="texture2d"||ke._reglType==="framebuffer")||We===35680&&(ke._reglType==="textureCube"||ke._reglType==="framebufferCube")),"invalid texture for uniform "+_e,Ze.commandStr);var ln=Ze.link(ke._texture||ke.color[0]._texture);Te(ve,".uniform1i(",tn,",",ln+".bind());"),Te.exit(ln,".unbind();")}else if(We===35674||We===35675||We===35676){lt.optional(function(){lt.command(Xt(ke),"invalid matrix for uniform "+_e,Ze.commandStr),lt.command(We===35674&&ke.length===4||We===35675&&ke.length===9||We===35676&&ke.length===16,"invalid length for matrix uniform "+_e,Ze.commandStr)});var hn=Ze.global.def("new Float32Array(["+Array.prototype.slice.call(ke)+"])"),nn=2;We===35675?nn=3:We===35676&&(nn=4),Te(ve,".uniformMatrix",nn,"fv(",tn,",false,",hn,");")}else{switch(We){case 5126:lt.commandType(ke,"number","uniform "+_e,Ze.commandStr),me="1f";break;case 35664:lt.command(Xt(ke)&&ke.length===2,"uniform "+_e,Ze.commandStr),me="2f";break;case 35665:lt.command(Xt(ke)&&ke.length===3,"uniform "+_e,Ze.commandStr),me="3f";break;case 35666:lt.command(Xt(ke)&&ke.length===4,"uniform "+_e,Ze.commandStr),me="4f";break;case 35670:lt.commandType(ke,"boolean","uniform "+_e,Ze.commandStr),me="1i";break;case 5124:lt.commandType(ke,"number","uniform "+_e,Ze.commandStr),me="1i";break;case 35671:case 35667:lt.command(Xt(ke)&&ke.length===2,"uniform "+_e,Ze.commandStr),me="2i";break;case 35672:case 35668:lt.command(Xt(ke)&&ke.length===3,"uniform "+_e,Ze.commandStr),me="3i";break;case 35673:case 35669:lt.command(Xt(ke)&&ke.length===4,"uniform "+_e,Ze.commandStr),me="4i"}Te(ve,".uniform",me,"(",tn,",",Xt(ke)?Array.prototype.slice.call(ke):ke,");")}continue}ce=Re.append(Ze,Te)}else{if(!$t(Qe))continue;ce=Te.def(Zt.uniforms,"[",rn.id(_e),"]")}We===35678?(lt(!Array.isArray(ce),"must specify a scalar prop for textures"),Te("if(",ce,"&&",ce,'._reglType==="framebuffer"){',ce,"=",ce,".color[0];","}")):We===35680&&(lt(!Array.isArray(ce),"must specify a scalar prop for cube maps"),Te("if(",ce,"&&",ce,'._reglType==="framebufferCube"){',ce,"=",ce,".color[0];","}")),lt.optional(function(){function Le(ze,fn){Ze.assert(Te,ze,'bad data or missing for uniform "'+_e+'".  '+fn)}function Be(ze){lt(!Array.isArray(ce),"must not specify an array type for uniform"),Le("typeof "+ce+'==="'+ze+'"',"invalid type, expected "+ze)}function en(ze,fn){Array.isArray(ce)?lt(ce.length===ze,"must have length "+ze):Le(Zt.isArrayLike+"("+ce+")&&"+ce+".length==="+ze,"invalid vector, should have length "+ze,Ze.commandStr)}function un(ze){lt(!Array.isArray(ce),"must not specify a value type"),Le("typeof "+ce+'==="function"&&'+ce+'._reglType==="texture'+(ze===3553?"2d":"Cube")+'"',"invalid texture type",Ze.commandStr)}switch(We){case 5124:Be("number");break;case 35667:en(2);break;case 35668:en(3);break;case 35669:en(4);break;case 5126:Be("number");break;case 35664:en(2);break;case 35665:en(3);break;case 35666:en(4);break;case 35670:Be("boolean");break;case 35671:en(2);break;case 35672:en(3);break;case 35673:case 35674:en(4);break;case 35675:en(9);break;case 35676:en(16);break;case 35678:un(3553);break;case 35680:un(34067)}});var dn=1;switch(We){case 35678:case 35680:var Sn=Te.def(ce,"._texture");Te(ve,".uniform1i(",tn,",",Sn,".bind());"),Te.exit(Sn,".unbind();");continue;case 5124:case 35670:me="1i";break;case 35667:case 35671:me="2i",dn=2;break;case 35668:case 35672:me="3i",dn=3;break;case 35669:case 35673:me="4i",dn=4;break;case 5126:me="1f";break;case 35664:me="2f",dn=2;break;case 35665:me="3f",dn=3;break;case 35666:me="4f",dn=4;break;case 35674:me="Matrix2fv";break;case 35675:me="Matrix3fv";break;case 35676:me="Matrix4fv"}if(Te(ve,".uniform",me,"(",tn,","),me.charAt(0)==="M"){var Pe=Math.pow(We-35674+2,2),le=Ze.global.def("new Float32Array(",Pe,")");Array.isArray(ce)?Te("false,(",ot(Pe,function(Le){return le+"["+Le+"]="+ce[Le]}),",",le,")"):Te("false,(Array.isArray(",ce,")||",ce," instanceof Float32Array)?",ce,":(",ot(Pe,function(Le){return le+"["+Le+"]="+ce+"["+Le+"]"}),",",le,")")}else dn>1?Te(ot(dn,function(Le){return Array.isArray(ce)?ce[Le]:ce+"["+Le+"]"})):(lt(!Array.isArray(ce),"uniform value must not be an array"),Te(ce));Te(");")}}function Wt(Ze,Te,R,mt){var $t=Ze.shared,me=$t.gl,Zt=$t.draw,ve=mt.draw,he=function(){var dn,Sn=ve.elements,Pe=Te;return Sn?((Sn.contextDep&&mt.contextDynamic||Sn.propDep)&&(Pe=R),dn=Sn.append(Ze,Pe)):dn=Pe.def(Zt,".",$r),dn&&Pe("if("+dn+")"+me+".bindBuffer(34963,"+dn+".buffer.buffer);"),dn}();function ce(dn){var Sn=ve[dn];return Sn?Sn.contextDep&&mt.contextDynamic||Sn.propDep?Sn.append(Ze,R):Sn.append(Ze,Te):Te.def(Zt,".",dn)}var Me,_e,We=ce(ci),Re=ce(gi),tn=function(){var dn,Sn=ve.count,Pe=Te;return Sn?((Sn.contextDep&&mt.contextDynamic||Sn.propDep)&&(Pe=R),dn=Sn.append(Ze,Pe),lt.optional(function(){Sn.MISSING&&Ze.assert(Te,"false","missing vertex count"),Sn.DYNAMIC&&Ze.assert(Pe,dn+">=0","missing vertex count")})):(dn=Pe.def(Zt,".",Qr),lt.optional(function(){Ze.assert(Pe,dn+">=0","missing vertex count")})),dn}();if(typeof tn=="number"){if(tn===0)return}else R("if(",tn,"){"),R.exit("}");vi&&(Me=ce(Oi),_e=Ze.instancing);var ke=he+".type",ln=ve.elements&&Kt(ve.elements);function hn(){function dn(){R(_e,".drawElementsInstancedANGLE(",[We,tn,ke,Re+"<<(("+ke+"-5121)>>1)",Me],");")}function Sn(){R(_e,".drawArraysInstancedANGLE(",[We,Re,tn,Me],");")}he?ln?dn():(R("if(",he,"){"),dn(),R("}else{"),Sn(),R("}")):Sn()}function nn(){function dn(){R(me+".drawElements("+[We,tn,ke,Re+"<<(("+ke+"-5121)>>1)"]+");")}function Sn(){R(me+".drawArrays("+[We,Re,tn]+");")}he?ln?dn():(R("if(",he,"){"),dn(),R("}else{"),Sn(),R("}")):Sn()}vi&&(typeof Me!="number"||Me>=0)?typeof Me=="string"?(R("if(",Me,">0){"),hn(),R("}else if(",Me,"<0){"),nn(),R("}")):hn():nn()}function ue(Ze,Te,R,mt,$t){var me=Jt(),Zt=me.proc("body",$t);return lt.optional(function(){me.commandStr=Te.commandStr,me.command=me.link(Te.commandStr)}),vi&&(me.instancing=Zt.def(me.shared.extensions,".angle_instanced_arrays")),Ze(me,Zt,R,mt),me.compile().body}function vn(Ze,Te,R,mt){xn(Ze,Te),R.useVAO?R.drawVAO?Te(Ze.shared.vao,".setVAO(",R.drawVAO.append(Ze,Te),");"):Te(Ze.shared.vao,".setVAO(",Ze.shared.vao,".targetVAO);"):(Te(Ze.shared.vao,".setVAO(null);"),Yt(Ze,Te,R,mt.attributes,function(){return!0})),Se(Ze,Te,R,mt.uniforms,function(){return!0}),Wt(Ze,Te,Te,R)}function kn(Ze,Te,R,mt){function $t(){return!0}Ze.batchId="a1",xn(Ze,Te),Yt(Ze,Te,R,mt.attributes,$t),Se(Ze,Te,R,mt.uniforms,$t),Wt(Ze,Te,Te,R)}function _n(Ze,Te,R,mt){xn(Ze,Te);var $t=R.contextDep,me=Te.def(),Zt=Te.def();Ze.shared.props=Zt,Ze.batchId=me;var ve=Ze.scope(),he=Ze.scope();function ce(ke){return ke.contextDep&&$t||ke.propDep}function Me(ke){return!ce(ke)}if(Te(ve.entry,"for(",me,"=0;",me,"<","a1",";++",me,"){",Zt,"=","a0","[",me,"];",he,"}",ve.exit),R.needsContext&&se(Ze,he,R.context),R.needsFramebuffer&&Ce(Ze,he,R.framebuffer),cn(Ze,he,R.state,ce),R.profile&&ce(R.profile)&&_t(Ze,he,R,!1,!0),mt)R.useVAO?R.drawVAO?ce(R.drawVAO)?he(Ze.shared.vao,".setVAO(",R.drawVAO.append(Ze,he),");"):ve(Ze.shared.vao,".setVAO(",R.drawVAO.append(Ze,ve),");"):ve(Ze.shared.vao,".setVAO(",Ze.shared.vao,".targetVAO);"):(ve(Ze.shared.vao,".setVAO(null);"),Yt(Ze,ve,R,mt.attributes,Me),Yt(Ze,he,R,mt.attributes,ce)),Se(Ze,ve,R,mt.uniforms,Me),Se(Ze,he,R,mt.uniforms,ce),Wt(Ze,ve,he,R);else{var _e=Ze.global.def("{}"),We=R.shader.progVar.append(Ze,he),Re=he.def(We,".id"),tn=he.def(_e,"[",Re,"]");he(Ze.shared.gl,".useProgram(",We,".program);","if(!",tn,"){",tn,"=",_e,"[",Re,"]=",Ze.link(function(ke){return ue(kn,Ze,R,ke,2)}),"(",We,");}",tn,".call(this,a0[",me,"],",me,");")}}function Un(Ze,Te,R){var mt=Te.static[R];if(mt&&function(Me){if(O(Me)==="object"&&!Xt(Me)){for(var _e=Object.keys(Me),We=0;We<_e.length;++We)if(ht.isDynamic(Me[_e[We]]))return!0;return!1}}(mt)){var $t=Ze.global,me=Object.keys(mt),Zt=!1,ve=!1,he=!1,ce=Ze.global.def("{}");me.forEach(function(Me){var _e=mt[Me];if(ht.isDynamic(_e)){typeof _e=="function"&&(_e=mt[Me]=ht.unbox(_e));var We=Oe(_e,null);Zt=Zt||We.thisDep,he=he||We.propDep,ve=ve||We.contextDep}else{switch($t(ce,".",Me,"="),O(_e)){case"number":$t(_e);break;case"string":$t('"',_e,'"');break;case"object":Array.isArray(_e)&&$t("[",_e.join(),"]");break;default:$t(Ze.link(_e))}$t(";")}}),Te.dynamic[R]=new ht.DynamicVariable(4,{thisDep:Zt,contextDep:ve,propDep:he,ref:ce,append:function(_e,We){me.forEach(function(Re){var tn=mt[Re];if(ht.isDynamic(tn)){var ke=_e.invoke(We,tn);We(ce,".",Re,"=",ke,";")}})}}),delete Te.static[R]}}return{next:zi,current:Si,procs:function(){var Ze=Jt(),Te=Ze.proc("poll"),R=Ze.proc("refresh"),mt=Ze.block();Te(mt),R(mt);var $t,me=Ze.shared,Zt=me.gl,ve=me.next,he=me.current;mt(he,".dirty=false;"),Ce(Ze,Te),Ce(Ze,R,null,!0),vi&&($t=Ze.link(vi)),on.oes_vertex_array_object&&R(Ze.link(on.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var ce=0;ce<$n.maxAttributes;++ce){var Me=R.def(me.attributes,"[",ce,"]"),_e=Ze.cond(Me,".buffer");_e.then(Zt,".enableVertexAttribArray(",ce,");",Zt,".bindBuffer(",34962,",",Me,".buffer.buffer);",Zt,".vertexAttribPointer(",ce,",",Me,".size,",Me,".type,",Me,".normalized,",Me,".stride,",Me,".offset);").else(Zt,".disableVertexAttribArray(",ce,");",Zt,".vertexAttrib4f(",ce,",",Me,".x,",Me,".y,",Me,".z,",Me,".w);",Me,".buffer=null;"),R(_e),vi&&R($t,".vertexAttribDivisorANGLE(",ce,",",Me,".divisor);")}return R(Ze.shared.vao,".currentVAO=null;",Ze.shared.vao,".setVAO(",Ze.shared.vao,".targetVAO);"),Object.keys(Bi).forEach(function(We){var Re=Bi[We],tn=mt.def(ve,".",We),ke=Ze.block();ke("if(",tn,"){",Zt,".enable(",Re,")}else{",Zt,".disable(",Re,")}",he,".",We,"=",tn,";"),R(ke),Te("if(",tn,"!==",he,".",We,"){",ke,"}")}),Object.keys(Di).forEach(function(We){var Re,tn,ke=Di[We],ln=Si[We],hn=Ze.block();if(hn(Zt,".",ke,"("),Xt(ln)){var nn=ln.length;Re=Ze.global.def(ve,".",We),tn=Ze.global.def(he,".",We),hn(ot(nn,function(dn){return Re+"["+dn+"]"}),");",ot(nn,function(dn){return tn+"["+dn+"]="+Re+"["+dn+"];"}).join("")),Te("if(",ot(nn,function(dn){return Re+"["+dn+"]!=="+tn+"["+dn+"]"}).join("||"),"){",hn,"}")}else Re=mt.def(ve,".",We),tn=mt.def(he,".",We),hn(Re,");",he,".",We,"=",Re,";"),Te("if(",Re,"!==",tn,"){",hn,"}");R(hn)}),Ze.compile()}(),compile:function(Te,R,mt,$t,me){var Zt=Jt();Zt.stats=Zt.link(me),Object.keys(R.static).forEach(function(he){Un(Zt,R,he)}),io.forEach(function(he){Un(Zt,Te,he)});var ve=ie(Te,R,mt,$t,Zt);return function(he,ce){var Me=he.proc("draw",1);xn(he,Me),se(he,Me,ce.context),Ce(he,Me,ce.framebuffer),Ee(he,Me,ce),cn(he,Me,ce.state),_t(he,Me,ce,!1,!0);var _e=ce.shader.progVar.append(he,Me);if(Me(he.shared.gl,".useProgram(",_e,".program);"),ce.shader.program)vn(he,Me,ce,ce.shader.program);else{Me(he.shared.vao,".setVAO(null);");var We=he.global.def("{}"),Re=Me.def(_e,".id"),tn=Me.def(We,"[",Re,"]");Me(he.cond(tn).then(tn,".call(this,a0);").else(tn,"=",We,"[",Re,"]=",he.link(function(ke){return ue(vn,he,ce,ke,1)}),"(",_e,");",tn,".call(this,a0);"))}Object.keys(ce.state).length>0&&Me(he.shared.current,".dirty=true;")}(Zt,ve),function(he,ce){var Me=he.proc("scope",3);he.batchId="a2";var _e=he.shared,We=_e.current;function Re(tn){var ke=ce.shader[tn];ke&&Me.set(_e.shader,"."+tn,ke.append(he,Me))}se(he,Me,ce.context),ce.framebuffer&&ce.framebuffer.append(he,Me),xo(Object.keys(ce.state)).forEach(function(tn){var ke=ce.state[tn].append(he,Me);Xt(ke)?ke.forEach(function(ln,hn){Me.set(he.next[tn],"["+hn+"]",ln)}):Me.set(_e.next,"."+tn,ke)}),_t(he,Me,ce,!0,!0),[$r,gi,Qr,Oi,ci].forEach(function(tn){var ke=ce.draw[tn];ke&&Me.set(_e.draw,"."+tn,""+ke.append(he,Me))}),Object.keys(ce.uniforms).forEach(function(tn){var ke=ce.uniforms[tn].append(he,Me);Array.isArray(ke)&&(ke="["+ke.join()+"]"),Me.set(_e.uniforms,"["+rn.id(tn)+"]",ke)}),Object.keys(ce.attributes).forEach(function(tn){var ke=ce.attributes[tn].append(he,Me),ln=he.scopeAttrib(tn);Object.keys(new Dr).forEach(function(hn){Me.set(ln,"."+hn,ke[hn])})}),ce.scopeVAO&&Me.set(_e.vao,".targetVAO",ce.scopeVAO.append(he,Me)),Re(ni),Re(fi),Object.keys(ce.state).length>0&&(Me(We,".dirty=true;"),Me.exit(We,".dirty=true;")),Me("a1(",he.shared.context,",a0,",he.batchId,");")}(Zt,ve),function(he,ce){var Me=he.proc("batch",2);he.batchId="0",xn(he,Me);var _e=!1,We=!0;Object.keys(ce.context).forEach(function(Pe){_e=_e||ce.context[Pe].propDep}),_e||(se(he,Me,ce.context),We=!1);var Re=ce.framebuffer,tn=!1;function ke(Pe){return Pe.contextDep&&_e||Pe.propDep}Re?(Re.propDep?_e=tn=!0:Re.contextDep&&_e&&(tn=!0),tn||Ce(he,Me,Re)):Ce(he,Me,null),ce.state.viewport&&ce.state.viewport.propDep&&(_e=!0),Ee(he,Me,ce),cn(he,Me,ce.state,function(Pe){return!ke(Pe)}),ce.profile&&ke(ce.profile)||_t(he,Me,ce,!1,"a1"),ce.contextDep=_e,ce.needsContext=We,ce.needsFramebuffer=tn;var ln=ce.shader.progVar;if(ln.contextDep&&_e||ln.propDep)_n(he,Me,ce,null);else{var hn=ln.append(he,Me);if(Me(he.shared.gl,".useProgram(",hn,".program);"),ce.shader.program)_n(he,Me,ce,ce.shader.program);else{Me(he.shared.vao,".setVAO(null);");var nn=he.global.def("{}"),dn=Me.def(hn,".id"),Sn=Me.def(nn,"[",dn,"]");Me(he.cond(Sn).then(Sn,".call(this,a0,a1);").else(Sn,"=",nn,"[",dn,"]=",he.link(function(Pe){return ue(_n,he,ce,Pe,2)}),"(",hn,");",Sn,".call(this,a0,a1);"))}}Object.keys(ce.state).length>0&&Me(he.shared.current,".dirty=true;")}(Zt,ve),j(Zt.compile(),{destroy:function(){ve.shader.program.destroy()}})}}}var Vn=function(rn,on){if(!on.ext_disjoint_timer_query)return null;var $n=[];function vr(Lr){$n.push(Lr)}var ar=[];function rr(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Fr=[];function Ar(Lr){Fr.push(Lr)}var wr=[];function xr(Lr,Pr,Dr){var ri=Fr.pop()||new rr;ri.startQueryIndex=Lr,ri.endQueryIndex=Pr,ri.sum=0,ri.stats=Dr,wr.push(ri)}var Er=[],Ir=[];return{beginQuery:function(Pr){var Dr=$n.pop()||on.ext_disjoint_timer_query.createQueryEXT();on.ext_disjoint_timer_query.beginQueryEXT(35007,Dr),ar.push(Dr),xr(ar.length-1,ar.length,Pr)},endQuery:function(){on.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:xr,update:function(){var Pr,Dr,ri=ar.length;if(ri!==0){Ir.length=Math.max(Ir.length,ri+1),Er.length=Math.max(Er.length,ri+1),Er[0]=0,Ir[0]=0;var vi=0;for(Pr=0,Dr=0;Dr<ar.length;++Dr){var ii=ar[Dr];on.ext_disjoint_timer_query.getQueryObjectEXT(ii,34919)?(vi+=on.ext_disjoint_timer_query.getQueryObjectEXT(ii,34918),vr(ii)):ar[Pr++]=ii,Er[Dr+1]=vi,Ir[Dr+1]=Pr}for(ar.length=Pr,Pr=0,Dr=0;Dr<wr.length;++Dr){var Si=wr[Dr],zi=Si.startQueryIndex,Xi=Si.endQueryIndex;Si.sum+=Er[Xi]-Er[zi];var Bi=Ir[zi],Di=Ir[Xi];Di===Bi?(Si.stats.gpuTime+=Si.sum/1e6,Ar(Si)):(Si.startQueryIndex=Bi,Si.endQueryIndex=Di,wr[Pr++]=Si)}wr.length=Pr}},getNumPendingQueries:function(){return ar.length},clear:function(){$n.push.apply($n,ar);for(var Pr=0;Pr<$n.length;Pr++)on.ext_disjoint_timer_query.deleteQueryEXT($n[Pr]);ar.length=0,$n.length=0},restore:function(){ar.length=0,$n.length=0}}};function Hn($e,rn){for(var on=0;on<$e.length;++on)if($e[on]===rn)return on;return-1}return function($e){var rn=ct($e);if(!rn)return null;var on=rn.gl,$n=on.getContextAttributes(),vr=on.isContextLost(),ar=function(Te,R){var mt={};function $t(ve){lt.type(ve,"string","extension name must be string");var he,ce=ve.toLowerCase();try{he=mt[ce]=Te.getExtension(ce)}catch(Me){}return!!he}for(var me=0;me<R.extensions.length;++me){var Zt=R.extensions[me];if(!$t(Zt))return R.onDestroy(),R.onDone('"'+Zt+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return R.optionalExtensions.forEach($t),{extensions:mt,restore:function(){Object.keys(mt).forEach(function(he){if(mt[he]&&!$t(he))throw new Error("(regl): error restoring extension "+he)})}}}(on,rn);if(!ar)return null;var rr,Fr,Ar=(rr={"":0},Fr=[""],{id:function(R){var mt=rr[R];return mt||(mt=rr[R]=Fr.length,Fr.push(R),mt)},str:function(R){return Fr[R]}}),wr={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},xr=ar.extensions,Er=Vn(0,xr),Ir=bt(),Lr=on.drawingBufferWidth,Pr=on.drawingBufferHeight,Dr={tick:0,time:0,viewportWidth:Lr,viewportHeight:Pr,framebufferWidth:Lr,framebufferHeight:Pr,drawingBufferWidth:Lr,drawingBufferHeight:Pr,pixelRatio:rn.pixelRatio},ri=function(Te,R){var mt=1;R.ext_texture_filter_anisotropic&&(mt=Te.getParameter(34047));var $t=1,me=1;R.webgl_draw_buffers&&($t=Te.getParameter(34852),me=Te.getParameter(36063));var Zt=!!R.oes_texture_float;if(Zt){var ve=Te.createTexture();Te.bindTexture(3553,ve),Te.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var he=Te.createFramebuffer();if(Te.bindFramebuffer(36160,he),Te.framebufferTexture2D(36160,36064,3553,ve,0),Te.bindTexture(3553,null),Te.checkFramebufferStatus(36160)!==36053)Zt=!1;else{Te.viewport(0,0,1,1),Te.clearColor(1,0,0,1),Te.clear(16384);var ce=Y.allocType(5126,4);Te.readPixels(0,0,1,1,6408,5126,ce),Te.getError()?Zt=!1:(Te.deleteFramebuffer(he),Te.deleteTexture(ve),Zt=ce[0]===1),Y.freeType(ce)}}var Me=!0;if(typeof navigator=="undefined"||!(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var _e=Te.createTexture(),We=Y.allocType(5121,36);Te.activeTexture(33984),Te.bindTexture(34067,_e),Te.texImage2D(34069,0,6408,3,3,0,6408,5121,We),Y.freeType(We),Te.bindTexture(34067,null),Te.deleteTexture(_e),Me=!Te.getError()}return{colorBits:[Te.getParameter(3410),Te.getParameter(3411),Te.getParameter(3412),Te.getParameter(3413)],depthBits:Te.getParameter(3414),stencilBits:Te.getParameter(3415),subpixelBits:Te.getParameter(3408),extensions:Object.keys(R).filter(function(Re){return!!R[Re]}),maxAnisotropic:mt,maxDrawbuffers:$t,maxColorAttachments:me,pointSizeDims:Te.getParameter(33901),lineWidthDims:Te.getParameter(33902),maxViewportDims:Te.getParameter(3386),maxCombinedTextureUnits:Te.getParameter(35661),maxCubeMapSize:Te.getParameter(34076),maxRenderbufferSize:Te.getParameter(34024),maxTextureUnits:Te.getParameter(34930),maxTextureSize:Te.getParameter(3379),maxAttributes:Te.getParameter(34921),maxVertexUniforms:Te.getParameter(36347),maxVertexTextureUnits:Te.getParameter(35660),maxVaryingVectors:Te.getParameter(36348),maxFragmentUniforms:Te.getParameter(36349),glsl:Te.getParameter(35724),renderer:Te.getParameter(7937),vendor:Te.getParameter(7936),version:Te.getParameter(7938),readFloat:Zt,npotTextureCube:Me}}(on,xr),vi=function(Te,R,mt,$t){var me=0,Zt={};function ve(We){this.id=me++,this.buffer=Te.createBuffer(),this.type=We,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,mt.profile&&(this.stats={size:0})}ve.prototype.bind=function(){Te.bindBuffer(this.type,this.buffer)},ve.prototype.destroy=function(){_e(this)};var he=[];function ce(We,Re,tn){We.byteLength=Re.byteLength,Te.bufferData(We.type,Re,tn)}function Me(We,Re,tn,ke,ln,hn){var nn,dn;if(We.usage=tn,Array.isArray(Re)){if(We.dtype=ke||5126,Re.length>0)if(Array.isArray(Re[0])){nn=St(Re);for(var Sn=1,Pe=1;Pe<nn.length;++Pe)Sn*=nn[Pe];We.dimension=Sn,ce(We,dn=nt(Re,nn,We.dtype),tn),hn?We.persistentData=dn:Y.freeType(dn)}else if(typeof Re[0]=="number"){We.dimension=ln;var le=Y.allocType(We.dtype,Re.length);yt(le,Re),ce(We,le,tn),hn?We.persistentData=le:Y.freeType(le)}else E(Re[0])?(We.dimension=Re[0].length,We.dtype=ke||gt(Re[0])||5126,ce(We,dn=nt(Re,[Re.length,Re[0].length],We.dtype),tn),hn?We.persistentData=dn:Y.freeType(dn)):lt.raise("invalid buffer data")}else if(E(Re))We.dtype=ke||gt(Re),We.dimension=ln,ce(We,Re,tn),hn&&(We.persistentData=new Uint8Array(new Uint8Array(Re.buffer)));else if(k(Re)){nn=Re.shape;var Le=Re.stride,Be=Re.offset,en=0,un=0,ze=0,fn=0;nn.length===1?(en=nn[0],un=1,ze=Le[0],fn=0):nn.length===2?(en=nn[0],un=nn[1],ze=Le[0],fn=Le[1]):lt.raise("invalid shape"),We.dtype=ke||gt(Re.data)||5126,We.dimension=un;var mn=Y.allocType(We.dtype,en*un);Ct(mn,Re.data,en,un,ze,fn,Be),ce(We,mn,tn),hn?We.persistentData=mn:Y.freeType(mn)}else Re instanceof ArrayBuffer?(We.dtype=5121,We.dimension=ln,ce(We,Re,tn),hn&&(We.persistentData=new Uint8Array(new Uint8Array(Re)))):lt.raise("invalid buffer data")}function _e(We){R.bufferCount--,$t(We);var Re=We.buffer;lt(Re,"buffer must not be deleted already"),Te.deleteBuffer(Re),We.buffer=null,delete Zt[We.id]}return mt.profile&&(R.getTotalBufferSize=function(){var We=0;return Object.keys(Zt).forEach(function(Re){We+=Zt[Re].stats.size}),We}),{create:function(Re,tn,ke,ln){R.bufferCount++;var hn=new ve(tn);function nn(Sn){var Pe=35044,le=null,Le=0,Be=0,en=1;return Array.isArray(Sn)||E(Sn)||k(Sn)||Sn instanceof ArrayBuffer?le=Sn:typeof Sn=="number"?Le=0|Sn:Sn&&(lt.type(Sn,"object","buffer arguments must be an object, a number or an array"),"data"in Sn&&(lt(le===null||Array.isArray(le)||E(le)||k(le),"invalid data for buffer"),le=Sn.data),"usage"in Sn&&(lt.parameter(Sn.usage,et,"invalid buffer usage"),Pe=et[Sn.usage]),"type"in Sn&&(lt.parameter(Sn.type,H,"invalid buffer type"),Be=H[Sn.type]),"dimension"in Sn&&(lt.type(Sn.dimension,"number","invalid dimension"),en=0|Sn.dimension),"length"in Sn&&(lt.nni(Le,"buffer length must be a nonnegative integer"),Le=0|Sn.length)),hn.bind(),le?Me(hn,le,Pe,Be,en,ln):(Le&&Te.bufferData(hn.type,Le,Pe),hn.dtype=Be||5121,hn.usage=Pe,hn.dimension=en,hn.byteLength=Le),mt.profile&&(hn.stats.size=hn.byteLength*dt[hn.dtype]),nn}function dn(Sn,Pe){lt(Pe+Sn.byteLength<=hn.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Sn.byteLength+" starting from offset "+Pe+" to a buffer of size "+hn.byteLength),Te.bufferSubData(hn.type,Pe,Sn)}return Zt[hn.id]=hn,ke||nn(Re),nn._reglType="buffer",nn._buffer=hn,nn.subdata=function(Sn,Pe){var le,Le=0|(Pe||0);if(hn.bind(),E(Sn)||Sn instanceof ArrayBuffer)dn(Sn,Le);else if(Array.isArray(Sn)){if(Sn.length>0)if(typeof Sn[0]=="number"){var Be=Y.allocType(hn.dtype,Sn.length);yt(Be,Sn),dn(Be,Le),Y.freeType(Be)}else if(Array.isArray(Sn[0])||E(Sn[0])){le=St(Sn);var en=nt(Sn,le,hn.dtype);dn(en,Le),Y.freeType(en)}else lt.raise("invalid buffer data")}else if(k(Sn)){le=Sn.shape;var un=Sn.stride,ze=0,fn=0,mn=0,Wn=0;le.length===1?(ze=le[0],fn=1,mn=un[0],Wn=0):le.length===2?(ze=le[0],fn=le[1],mn=un[0],Wn=un[1]):lt.raise("invalid shape");var Tn=Array.isArray(Sn.data)?hn.dtype:gt(Sn.data),Pn=Y.allocType(Tn,ze*fn);Ct(Pn,Sn.data,ze,fn,mn,Wn,Sn.offset),dn(Pn,Le),Y.freeType(Pn)}else lt.raise("invalid data for buffer subdata");return nn},mt.profile&&(nn.stats=hn.stats),nn.destroy=function(){_e(hn)},nn},createStream:function(Re,tn){var ke=he.pop();return ke||(ke=new ve(Re)),ke.bind(),Me(ke,tn,35040,0,1,!1),ke},destroyStream:function(Re){he.push(Re)},clear:function(){h(Zt).forEach(_e),he.forEach(_e)},getBuffer:function(Re){return Re&&Re._buffer instanceof ve?Re._buffer:null},restore:function(){h(Zt).forEach(function(Re){Re.buffer=Te.createBuffer(),Te.bindBuffer(Re.type,Re.buffer),Te.bufferData(Re.type,Re.persistentData||Re.byteLength,Re.usage)})},_initBuffer:Me}}(on,wr,rn,function(Te){return ii.destroyBuffer(Te)}),ii=function(Te,R,mt,$t,me){for(var Zt=mt.maxAttributes,ve=new Array(Zt),he=0;he<Zt;++he)ve[he]=new Ji;var ce=0,Me={},_e={Record:Ji,scope:{},state:ve,currentVAO:null,targetVAO:null,restore:We()?function(){We()&&h(Me).forEach(function(ke){ke.refresh()})}:function(){},createVAO:function(ln){var hn=new tn;function nn(dn){lt(Array.isArray(dn),"arguments to vertex array constructor must be an array"),lt(dn.length<Zt,"too many attributes"),lt(dn.length>0,"must specify at least one attribute");var Sn={},Pe=hn.attributes;Pe.length=dn.length;for(var le=0;le<dn.length;++le){var Le,Be=dn[le],en=Pe[le]=new Ji,un=Be.data||Be;Array.isArray(un)||E(un)||k(un)?(hn.buffers[le]&&(Le=hn.buffers[le],E(un)&&Le._buffer.byteLength>=un.byteLength?Le.subdata(un):(Le.destroy(),hn.buffers[le]=null)),hn.buffers[le]||(Le=hn.buffers[le]=me.create(Be,34962,!1,!0)),en.buffer=me.getBuffer(Le),en.size=0|en.buffer.dimension,en.normalized=!1,en.type=en.buffer.dtype,en.offset=0,en.stride=0,en.divisor=0,en.state=1,Sn[le]=1):me.getBuffer(Be)?(en.buffer=me.getBuffer(Be),en.size=0|en.buffer.dimension,en.normalized=!1,en.type=en.buffer.dtype,en.offset=0,en.stride=0,en.divisor=0,en.state=1):me.getBuffer(Be.buffer)?(en.buffer=me.getBuffer(Be.buffer),en.size=0|(+Be.size||en.buffer.dimension),en.normalized=!!Be.normalized||!1,"type"in Be?(lt.parameter(Be.type,H,"invalid buffer type"),en.type=H[Be.type]):en.type=en.buffer.dtype,en.offset=0|(Be.offset||0),en.stride=0|(Be.stride||0),en.divisor=0|(Be.divisor||0),en.state=1,lt(en.size>=1&&en.size<=4,"size must be between 1 and 4"),lt(en.offset>=0,"invalid offset"),lt(en.stride>=0&&en.stride<=255,"stride must be between 0 and 255"),lt(en.divisor>=0,"divisor must be positive"),lt(!en.divisor||!!R.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Be?(lt(le>0,"first attribute must not be a constant"),en.x=+Be.x||0,en.y=+Be.y||0,en.z=+Be.z||0,en.w=+Be.w||0,en.state=2):lt(!1,"invalid attribute spec for location "+le)}for(var ze=0;ze<hn.buffers.length;++ze)!Sn[ze]&&hn.buffers[ze]&&(hn.buffers[ze].destroy(),hn.buffers[ze]=null);return hn.refresh(),nn}return $t.vaoCount+=1,nn.destroy=function(){for(var dn=0;dn<hn.buffers.length;++dn)hn.buffers[dn]&&hn.buffers[dn].destroy();hn.buffers.length=0,hn.destroy()},nn._vao=hn,nn._reglType="vao",nn(ln)},getVAO:function(ln){return typeof ln=="function"&&ln._vao?ln._vao:null},destroyBuffer:function(ln){for(var hn=0;hn<ve.length;++hn){var nn=ve[hn];nn.buffer===ln&&(Te.disableVertexAttribArray(hn),nn.buffer=null)}},setVAO:We()?function(ke){if(ke!==_e.currentVAO){var ln=We();ke?ln.bindVertexArrayOES(ke.vao):ln.bindVertexArrayOES(null),_e.currentVAO=ke}}:function(ke){if(ke!==_e.currentVAO){if(ke)ke.bindAttrs();else for(var ln=Re(),hn=0;hn<ve.length;++hn){var nn=ve[hn];nn.buffer?(Te.enableVertexAttribArray(hn),Te.vertexAttribPointer(hn,nn.size,nn.type,nn.normalized,nn.stride,nn.offfset),ln&&nn.divisor&&ln.vertexAttribDivisorANGLE(hn,nn.divisor)):(Te.disableVertexAttribArray(hn),Te.vertexAttrib4f(hn,nn.x,nn.y,nn.z,nn.w))}_e.currentVAO=ke}},clear:We()?function(){h(Me).forEach(function(ke){ke.destroy()})}:function(){}};function We(){return R.oes_vertex_array_object}function Re(){return R.angle_instanced_arrays}function tn(){this.id=++ce,this.attributes=[];var ke=We();this.vao=ke?ke.createVertexArrayOES():null,Me[this.id]=this,this.buffers=[]}return tn.prototype.bindAttrs=function(){for(var ke=Re(),ln=this.attributes,hn=0;hn<ln.length;++hn){var nn=ln[hn];nn.buffer?(Te.enableVertexAttribArray(hn),Te.bindBuffer(34962,nn.buffer.buffer),Te.vertexAttribPointer(hn,nn.size,nn.type,nn.normalized,nn.stride,nn.offset),ke&&nn.divisor&&ke.vertexAttribDivisorANGLE(hn,nn.divisor)):(Te.disableVertexAttribArray(hn),Te.vertexAttrib4f(hn,nn.x,nn.y,nn.z,nn.w))}for(var dn=ln.length;dn<Zt;++dn)Te.disableVertexAttribArray(dn)},tn.prototype.refresh=function(){var ke=We();ke&&(ke.bindVertexArrayOES(this.vao),this.bindAttrs(),_e.currentVAO=this)},tn.prototype.destroy=function(){if(this.vao){var ke=We();this===_e.currentVAO&&(_e.currentVAO=null,ke.bindVertexArrayOES(null)),ke.deleteVertexArrayOES(this.vao),this.vao=null}Me[this.id]&&(delete Me[this.id],$t.vaoCount-=1)},_e}(on,xr,ri,wr,vi),Si=function(Te,R,mt,$t){var me={},Zt=0,ve={uint8:5121,uint16:5123};function he(We){this.id=Zt++,me[this.id]=this,this.buffer=We,this.primType=4,this.vertCount=0,this.type=0}R.oes_element_index_uint&&(ve.uint32=5125),he.prototype.bind=function(){this.buffer.bind()};var ce=[];function Me(We,Re,tn,ke,ln,hn,nn){var dn;if(We.buffer.bind(),Re){var Sn=nn;nn||E(Re)&&(!k(Re)||E(Re.data))||(Sn=R.oes_element_index_uint?5125:5123),mt._initBuffer(We.buffer,Re,tn,Sn,3)}else Te.bufferData(34963,hn,tn),We.buffer.dtype=dn||5121,We.buffer.usage=tn,We.buffer.dimension=3,We.buffer.byteLength=hn;if(dn=nn,!nn){switch(We.buffer.dtype){case 5121:case 5120:dn=5121;break;case 5123:case 5122:dn=5123;break;case 5125:case 5124:dn=5125;break;default:lt.raise("unsupported type for element array")}We.buffer.dtype=dn}We.type=dn,lt(dn!==5125||!!R.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Pe=ln;Pe<0&&(Pe=We.buffer.byteLength,dn===5123?Pe>>=1:dn===5125&&(Pe>>=2)),We.vertCount=Pe;var le=ke;if(ke<0){le=4;var Le=We.buffer.dimension;Le===1&&(le=0),Le===2&&(le=1),Le===3&&(le=4)}We.primType=le}function _e(We){$t.elementsCount--,lt(We.buffer!==null,"must not double destroy elements"),delete me[We.id],We.buffer.destroy(),We.buffer=null}return{create:function(Re,tn){var ke=mt.create(null,34963,!0),ln=new he(ke._buffer);function hn(nn){if(nn)if(typeof nn=="number")ke(nn),ln.primType=4,ln.vertCount=0|nn,ln.type=5121;else{var dn=null,Sn=35044,Pe=-1,le=-1,Le=0,Be=0;Array.isArray(nn)||E(nn)||k(nn)?dn=nn:(lt.type(nn,"object","invalid arguments for elements"),"data"in nn&&(dn=nn.data,lt(Array.isArray(dn)||E(dn)||k(dn),"invalid data for element buffer")),"usage"in nn&&(lt.parameter(nn.usage,et,"invalid element buffer usage"),Sn=et[nn.usage]),"primitive"in nn&&(lt.parameter(nn.primitive,Pt,"invalid element buffer primitive"),Pe=Pt[nn.primitive]),"count"in nn&&(lt(typeof nn.count=="number"&&nn.count>=0,"invalid vertex count for elements"),le=0|nn.count),"type"in nn&&(lt.parameter(nn.type,ve,"invalid buffer type"),Be=ve[nn.type]),"length"in nn?Le=0|nn.length:(Le=le,Be===5123||Be===5122?Le*=2:Be!==5125&&Be!==5124||(Le*=4))),Me(ln,dn,Sn,Pe,le,Le,Be)}else ke(),ln.primType=4,ln.vertCount=0,ln.type=5121;return hn}return $t.elementsCount++,hn(Re),hn._reglType="elements",hn._elements=ln,hn.subdata=function(nn,dn){return ke.subdata(nn,dn),hn},hn.destroy=function(){_e(ln)},hn},createStream:function(Re){var tn=ce.pop();return tn||(tn=new he(mt.create(null,34963,!0,!1)._buffer)),Me(tn,Re,35040,-1,-1,0,0),tn},destroyStream:function(Re){ce.push(Re)},getElements:function(Re){return typeof Re=="function"&&Re._elements instanceof he?Re._elements:null},clear:function(){h(me).forEach(_e)}}}(on,xr,vi,wr),zi=function(Te,R,mt,$t){var me={},Zt={};function ve(ke,ln,hn,nn){this.name=ke,this.id=ln,this.location=hn,this.info=nn}function he(ke,ln){for(var hn=0;hn<ke.length;++hn)if(ke[hn].id===ln.id)return void(ke[hn].location=ln.location);ke.push(ln)}function ce(ke,ln,hn){var nn=ke===35632?me:Zt,dn=nn[ln];if(!dn){var Sn=R.str(ln);dn=Te.createShader(ke),Te.shaderSource(dn,Sn),Te.compileShader(dn),lt.shaderError(Te,dn,Sn,ke,hn),nn[ln]=dn}return dn}var Me={},_e=[],We=0;function Re(ke,ln){this.id=We++,this.fragId=ke,this.vertId=ln,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,$t.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function tn(ke,ln,hn){var nn,dn,Sn=ce(35632,ke.fragId),Pe=ce(35633,ke.vertId),le=ke.program=Te.createProgram();if(Te.attachShader(le,Sn),Te.attachShader(le,Pe),hn)for(nn=0;nn<hn.length;++nn){var Le=hn[nn];Te.bindAttribLocation(le,Le[0],Le[1])}Te.linkProgram(le),lt.linkError(Te,le,R.str(ke.fragId),R.str(ke.vertId),ln);var Be=Te.getProgramParameter(le,35718);$t.profile&&(ke.stats.uniformsCount=Be);var en=ke.uniforms;for(nn=0;nn<Be;++nn)if(dn=Te.getActiveUniform(le,nn))if(dn.size>1)for(var un=0;un<dn.size;++un){var ze=dn.name.replace("[0]","["+un+"]");he(en,new ve(ze,R.id(ze),Te.getUniformLocation(le,ze),dn))}else he(en,new ve(dn.name,R.id(dn.name),Te.getUniformLocation(le,dn.name),dn));var fn=Te.getProgramParameter(le,35721);$t.profile&&(ke.stats.attributesCount=fn);var mn=ke.attributes;for(nn=0;nn<fn;++nn)(dn=Te.getActiveAttrib(le,nn))&&he(mn,new ve(dn.name,R.id(dn.name),Te.getAttribLocation(le,dn.name),dn))}return $t.profile&&(mt.getMaxUniformsCount=function(){var ke=0;return _e.forEach(function(ln){ln.stats.uniformsCount>ke&&(ke=ln.stats.uniformsCount)}),ke},mt.getMaxAttributesCount=function(){var ke=0;return _e.forEach(function(ln){ln.stats.attributesCount>ke&&(ke=ln.stats.attributesCount)}),ke}),{clear:function(){var ln=Te.deleteShader.bind(Te);h(me).forEach(ln),me={},h(Zt).forEach(ln),Zt={},_e.forEach(function(hn){Te.deleteProgram(hn.program)}),_e.length=0,Me={},mt.shaderCount=0},program:function(ln,hn,nn,dn){lt.command(ln>=0,"missing vertex shader",nn),lt.command(hn>=0,"missing fragment shader",nn);var Sn=Me[hn];Sn||(Sn=Me[hn]={});var Pe=Sn[ln];if(Pe&&(Pe.refCount++,!dn))return Pe;var le=new Re(hn,ln);return mt.shaderCount++,tn(le,nn,dn),Pe||(Sn[ln]=le),_e.push(le),j(le,{destroy:function(){if(le.refCount--,le.refCount<=0){Te.deleteProgram(le.program);var Be=_e.indexOf(le);_e.splice(Be,1),mt.shaderCount--}Sn[le.vertId].refCount<=0&&(Te.deleteShader(Zt[le.vertId]),delete Zt[le.vertId],delete Me[le.fragId][le.vertId]),Object.keys(Me[le.fragId]).length||(Te.deleteShader(me[le.fragId]),delete me[le.fragId],delete Me[le.fragId])}})},restore:function(){me={},Zt={};for(var ln=0;ln<_e.length;++ln)tn(_e[ln],null,_e[ln].attributes.map(function(hn){return[hn.location,hn.name]}))},shader:ce,frag:-1,vert:-1}}(on,Ar,wr,rn),Xi=to(on,xr,ri,function(){pe.procs.poll()},Dr,wr,rn),Bi=function(Te,R,mt,$t,me){var Zt={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};R.ext_srgb&&(Zt.srgba=35907),R.ext_color_buffer_half_float&&(Zt.rgba16f=34842,Zt.rgb16f=34843),R.webgl_color_buffer_float&&(Zt.rgba32f=34836);var ve=[];Object.keys(Zt).forEach(function(We){var Re=Zt[We];ve[Re]=We});var he=0,ce={};function Me(We){this.id=he++,this.refCount=1,this.renderbuffer=We,this.format=32854,this.width=0,this.height=0,me.profile&&(this.stats={size:0})}function _e(We){var Re=We.renderbuffer;lt(Re,"must not double destroy renderbuffer"),Te.bindRenderbuffer(36161,null),Te.deleteRenderbuffer(Re),We.renderbuffer=null,We.refCount=0,delete ce[We.id],$t.renderbufferCount--}return Me.prototype.decRef=function(){--this.refCount<=0&&_e(this)},me.profile&&($t.getTotalRenderbufferSize=function(){var We=0;return Object.keys(ce).forEach(function(Re){We+=ce[Re].stats.size}),We}),{create:function(Re,tn){var ke=new Me(Te.createRenderbuffer());function ln(hn,nn){var dn=0,Sn=0,Pe=32854;if(O(hn)==="object"&&hn){var le=hn;if("shape"in le){var Le=le.shape;lt(Array.isArray(Le)&&Le.length>=2,"invalid renderbuffer shape"),dn=0|Le[0],Sn=0|Le[1]}else"radius"in le&&(dn=Sn=0|le.radius),"width"in le&&(dn=0|le.width),"height"in le&&(Sn=0|le.height);"format"in le&&(lt.parameter(le.format,Zt,"invalid renderbuffer format"),Pe=Zt[le.format])}else typeof hn=="number"?(dn=0|hn,Sn=typeof nn=="number"?0|nn:dn):hn?lt.raise("invalid arguments to renderbuffer constructor"):dn=Sn=1;if(lt(dn>0&&Sn>0&&dn<=mt.maxRenderbufferSize&&Sn<=mt.maxRenderbufferSize,"invalid renderbuffer size"),dn!==ke.width||Sn!==ke.height||Pe!==ke.format)return ln.width=ke.width=dn,ln.height=ke.height=Sn,ke.format=Pe,Te.bindRenderbuffer(36161,ke.renderbuffer),Te.renderbufferStorage(36161,Pe,dn,Sn),lt(Te.getError()===0,"invalid render buffer format"),me.profile&&(ke.stats.size=Ti(ke.format,ke.width,ke.height)),ln.format=ve[ke.format],ln}return ce[ke.id]=ke,$t.renderbufferCount++,ln(Re,tn),ln.resize=function(hn,nn){var dn=0|hn,Sn=0|nn||dn;return dn===ke.width&&Sn===ke.height||(lt(dn>0&&Sn>0&&dn<=mt.maxRenderbufferSize&&Sn<=mt.maxRenderbufferSize,"invalid renderbuffer size"),ln.width=ke.width=dn,ln.height=ke.height=Sn,Te.bindRenderbuffer(36161,ke.renderbuffer),Te.renderbufferStorage(36161,ke.format,dn,Sn),lt(Te.getError()===0,"invalid render buffer format"),me.profile&&(ke.stats.size=Ti(ke.format,ke.width,ke.height))),ln},ln._reglType="renderbuffer",ln._renderbuffer=ke,me.profile&&(ln.stats=ke.stats),ln.destroy=function(){ke.decRef()},ln},clear:function(){h(ce).forEach(_e)},restore:function(){h(ce).forEach(function(Re){Re.renderbuffer=Te.createRenderbuffer(),Te.bindRenderbuffer(36161,Re.renderbuffer),Te.renderbufferStorage(36161,Re.format,Re.width,Re.height)}),Te.bindRenderbuffer(36161,null)}}}(on,xr,ri,wr,rn),Di=function(Te,R,mt,$t,me,Zt){var ve={cur:null,next:null,dirty:!1,setFBO:null},he=["rgba"],ce=["rgba4","rgb565","rgb5 a1"];R.ext_srgb&&ce.push("srgba"),R.ext_color_buffer_half_float&&ce.push("rgba16f","rgb16f"),R.webgl_color_buffer_float&&ce.push("rgba32f");var Me=["uint8"];function _e(un,ze,fn){this.target=un,this.texture=ze,this.renderbuffer=fn;var mn=0,Wn=0;ze?(mn=ze.width,Wn=ze.height):fn&&(mn=fn.width,Wn=fn.height),this.width=mn,this.height=Wn}function We(un){un&&(un.texture&&un.texture._texture.decRef(),un.renderbuffer&&un.renderbuffer._renderbuffer.decRef())}function Re(un,ze,fn){if(un)if(un.texture){var mn=un.texture._texture,Wn=Math.max(1,mn.width),Tn=Math.max(1,mn.height);lt(Wn===ze&&Tn===fn,"inconsistent width/height for supplied texture"),mn.refCount+=1}else{var Pn=un.renderbuffer._renderbuffer;lt(Pn.width===ze&&Pn.height===fn,"inconsistent width/height for renderbuffer"),Pn.refCount+=1}}function tn(un,ze){ze&&(ze.texture?Te.framebufferTexture2D(36160,un,ze.target,ze.texture._texture.texture,0):Te.framebufferRenderbuffer(36160,un,36161,ze.renderbuffer._renderbuffer.renderbuffer))}function ke(un){var ze=3553,fn=null,mn=null,Wn=un;O(un)==="object"&&(Wn=un.data,"target"in un&&(ze=0|un.target)),lt.type(Wn,"function","invalid attachment data");var Tn=Wn._reglType;return Tn==="texture2d"?(fn=Wn,lt(ze===3553)):Tn==="textureCube"?(fn=Wn,lt(ze>=34069&&ze<34075,"invalid cube map target")):Tn==="renderbuffer"?(mn=Wn,ze=36161):lt.raise("invalid regl object for attachment"),new _e(ze,fn,mn)}function ln(un,ze,fn,mn,Wn){if(fn){var Tn=$t.create2D({width:un,height:ze,format:mn,type:Wn});return Tn._texture.refCount=0,new _e(3553,Tn,null)}var Pn=me.create({width:un,height:ze,format:mn});return Pn._renderbuffer.refCount=0,new _e(36161,null,Pn)}function hn(un){return un&&(un.texture||un.renderbuffer)}function nn(un,ze,fn){un&&(un.texture?un.texture.resize(ze,fn):un.renderbuffer&&un.renderbuffer.resize(ze,fn),un.width=ze,un.height=fn)}R.oes_texture_half_float&&Me.push("half float","float16"),R.oes_texture_float&&Me.push("float","float32");var dn=0,Sn={};function Pe(){this.id=dn++,Sn[this.id]=this,this.framebuffer=Te.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function le(un){un.colorAttachments.forEach(We),We(un.depthAttachment),We(un.stencilAttachment),We(un.depthStencilAttachment)}function Le(un){var ze=un.framebuffer;lt(ze,"must not double destroy framebuffer"),Te.deleteFramebuffer(ze),un.framebuffer=null,Zt.framebufferCount--,delete Sn[un.id]}function Be(un){var ze;Te.bindFramebuffer(36160,un.framebuffer);var fn=un.colorAttachments;for(ze=0;ze<fn.length;++ze)tn(36064+ze,fn[ze]);for(ze=fn.length;ze<mt.maxColorAttachments;++ze)Te.framebufferTexture2D(36160,36064+ze,3553,null,0);Te.framebufferTexture2D(36160,33306,3553,null,0),Te.framebufferTexture2D(36160,36096,3553,null,0),Te.framebufferTexture2D(36160,36128,3553,null,0),tn(36096,un.depthAttachment),tn(36128,un.stencilAttachment),tn(33306,un.depthStencilAttachment);var mn=Te.checkFramebufferStatus(36160);Te.isContextLost()||mn===36053||lt.raise("framebuffer configuration not supported, status = "+jr[mn]),Te.bindFramebuffer(36160,ve.next?ve.next.framebuffer:null),ve.cur=ve.next,Te.getError()}function en(un,ze){var fn=new Pe;function mn(Wn,Tn){var Pn;lt(ve.next!==fn,"can not update framebuffer which is currently in use");var lr=0,Hr=0,Gr=!0,Mr=!0,oi=null,ai=!0,Zr="rgba",Yi="uint8",$i=1,Go=null,Uo=null,zo=null,ta=!1;if(typeof Wn=="number")lr=0|Wn,Hr=0|Tn||lr;else if(Wn){lt.type(Wn,"object","invalid arguments for framebuffer");var li=Wn;if("shape"in li){var Oo=li.shape;lt(Array.isArray(Oo)&&Oo.length>=2,"invalid shape for framebuffer"),lr=Oo[0],Hr=Oo[1]}else"radius"in li&&(lr=Hr=li.radius),"width"in li&&(lr=li.width),"height"in li&&(Hr=li.height);("color"in li||"colors"in li)&&(oi=li.color||li.colors,Array.isArray(oi)&&lt(oi.length===1||R.webgl_draw_buffers,"multiple render targets not supported")),oi||("colorCount"in li&&($i=0|li.colorCount,lt($i>0,"invalid color buffer count")),"colorTexture"in li&&(ai=!!li.colorTexture,Zr="rgba4"),"colorType"in li&&(Yi=li.colorType,ai?(lt(R.oes_texture_float||!(Yi==="float"||Yi==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),lt(R.oes_texture_half_float||!(Yi==="half float"||Yi==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Yi==="half float"||Yi==="float16"?(lt(R.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Zr="rgba16f"):Yi!=="float"&&Yi!=="float32"||(lt(R.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Zr="rgba32f"),lt.oneOf(Yi,Me,"invalid color type")),"colorFormat"in li&&(Zr=li.colorFormat,he.indexOf(Zr)>=0?ai=!0:ce.indexOf(Zr)>=0?ai=!1:ai?lt.oneOf(li.colorFormat,he,"invalid color format for texture"):lt.oneOf(li.colorFormat,ce,"invalid color format for renderbuffer"))),("depthTexture"in li||"depthStencilTexture"in li)&&(ta=!(!li.depthTexture&&!li.depthStencilTexture),lt(!ta||R.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in li&&(typeof li.depth=="boolean"?Gr=li.depth:(Go=li.depth,Mr=!1)),"stencil"in li&&(typeof li.stencil=="boolean"?Mr=li.stencil:(Uo=li.stencil,Gr=!1)),"depthStencil"in li&&(typeof li.depthStencil=="boolean"?Gr=Mr=li.depthStencil:(zo=li.depthStencil,Gr=!1,Mr=!1))}else lr=Hr=1;var qi=null,_o=null,Xo=null,Yo=null;if(Array.isArray(oi))qi=oi.map(ke);else if(oi)qi=[ke(oi)];else for(qi=new Array($i),Pn=0;Pn<$i;++Pn)qi[Pn]=ln(lr,Hr,ai,Zr,Yi);lt(R.webgl_draw_buffers||qi.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),lt(qi.length<=mt.maxColorAttachments,"too many color attachments, not supported"),lr=lr||qi[0].width,Hr=Hr||qi[0].height,Go?_o=ke(Go):Gr&&!Mr&&(_o=ln(lr,Hr,ta,"depth","uint32")),Uo?Xo=ke(Uo):Mr&&!Gr&&(Xo=ln(lr,Hr,!1,"stencil","uint8")),zo?Yo=ke(zo):!Go&&!Uo&&Mr&&Gr&&(Yo=ln(lr,Hr,ta,"depth stencil","depth stencil")),lt(!!Go+!!Uo+!!zo<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var ua=null;for(Pn=0;Pn<qi.length;++Pn)if(Re(qi[Pn],lr,Hr),lt(!qi[Pn]||qi[Pn].texture&&Ui.indexOf(qi[Pn].texture._texture.format)>=0||qi[Pn].renderbuffer&&ro.indexOf(qi[Pn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Pn+" is invalid"),qi[Pn]&&qi[Pn].texture){var di=Li[qi[Pn].texture._texture.format]*Vi[qi[Pn].texture._texture.type];ua===null?ua=di:lt(ua===di,"all color attachments much have the same number of bits per pixel.")}return Re(_o,lr,Hr),lt(!_o||_o.texture&&_o.texture._texture.format===6402||_o.renderbuffer&&_o.renderbuffer._renderbuffer.format===33189,"invalid depth attachment for framebuffer object"),Re(Xo,lr,Hr),lt(!Xo||Xo.renderbuffer&&Xo.renderbuffer._renderbuffer.format===36168,"invalid stencil attachment for framebuffer object"),Re(Yo,lr,Hr),lt(!Yo||Yo.texture&&Yo.texture._texture.format===34041||Yo.renderbuffer&&Yo.renderbuffer._renderbuffer.format===34041,"invalid depth-stencil attachment for framebuffer object"),le(fn),fn.width=lr,fn.height=Hr,fn.colorAttachments=qi,fn.depthAttachment=_o,fn.stencilAttachment=Xo,fn.depthStencilAttachment=Yo,mn.color=qi.map(hn),mn.depth=hn(_o),mn.stencil=hn(Xo),mn.depthStencil=hn(Yo),mn.width=fn.width,mn.height=fn.height,Be(fn),mn}return Zt.framebufferCount++,mn(un,ze),j(mn,{resize:function(Tn,Pn){lt(ve.next!==fn,"can not resize a framebuffer which is currently in use");var lr=Math.max(0|Tn,1),Hr=Math.max(0|Pn||lr,1);if(lr===fn.width&&Hr===fn.height)return mn;for(var Gr=fn.colorAttachments,Mr=0;Mr<Gr.length;++Mr)nn(Gr[Mr],lr,Hr);return nn(fn.depthAttachment,lr,Hr),nn(fn.stencilAttachment,lr,Hr),nn(fn.depthStencilAttachment,lr,Hr),fn.width=mn.width=lr,fn.height=mn.height=Hr,Be(fn),mn},_reglType:"framebuffer",_framebuffer:fn,destroy:function(){Le(fn),le(fn)},use:function(Tn){ve.setFBO({framebuffer:mn},Tn)}})}return j(ve,{getFramebuffer:function(ze){if(typeof ze=="function"&&ze._reglType==="framebuffer"){var fn=ze._framebuffer;if(fn instanceof Pe)return fn}return null},create:en,createCube:function(ze){var fn=Array(6);function mn(Wn){var Tn;lt(fn.indexOf(ve.next)<0,"can not update framebuffer which is currently in use");var Pn,lr={color:null},Hr=0,Gr=null,Mr="rgba",oi="uint8",ai=1;if(typeof Wn=="number")Hr=0|Wn;else if(Wn){lt.type(Wn,"object","invalid arguments for framebuffer");var Zr=Wn;if("shape"in Zr){var Yi=Zr.shape;lt(Array.isArray(Yi)&&Yi.length>=2,"invalid shape for framebuffer"),lt(Yi[0]===Yi[1],"cube framebuffer must be square"),Hr=Yi[0]}else"radius"in Zr&&(Hr=0|Zr.radius),"width"in Zr?(Hr=0|Zr.width,"height"in Zr&&lt(Zr.height===Hr,"must be square")):"height"in Zr&&(Hr=0|Zr.height);("color"in Zr||"colors"in Zr)&&(Gr=Zr.color||Zr.colors,Array.isArray(Gr)&&lt(Gr.length===1||R.webgl_draw_buffers,"multiple render targets not supported")),Gr||("colorCount"in Zr&&(ai=0|Zr.colorCount,lt(ai>0,"invalid color buffer count")),"colorType"in Zr&&(lt.oneOf(Zr.colorType,Me,"invalid color type"),oi=Zr.colorType),"colorFormat"in Zr&&(Mr=Zr.colorFormat,lt.oneOf(Zr.colorFormat,he,"invalid color format for texture"))),"depth"in Zr&&(lr.depth=Zr.depth),"stencil"in Zr&&(lr.stencil=Zr.stencil),"depthStencil"in Zr&&(lr.depthStencil=Zr.depthStencil)}else Hr=1;if(Gr)if(Array.isArray(Gr))for(Pn=[],Tn=0;Tn<Gr.length;++Tn)Pn[Tn]=Gr[Tn];else Pn=[Gr];else{Pn=Array(ai);var $i={radius:Hr,format:Mr,type:oi};for(Tn=0;Tn<ai;++Tn)Pn[Tn]=$t.createCube($i)}for(lr.color=Array(Pn.length),Tn=0;Tn<Pn.length;++Tn){var Go=Pn[Tn];lt(typeof Go=="function"&&Go._reglType==="textureCube","invalid cube map"),Hr=Hr||Go.width,lt(Go.width===Hr&&Go.height===Hr,"invalid cube map shape"),lr.color[Tn]={target:34069,data:Pn[Tn]}}for(Tn=0;Tn<6;++Tn){for(var Uo=0;Uo<Pn.length;++Uo)lr.color[Uo].target=34069+Tn;Tn>0&&(lr.depth=fn[0].depth,lr.stencil=fn[0].stencil,lr.depthStencil=fn[0].depthStencil),fn[Tn]?fn[Tn](lr):fn[Tn]=en(lr)}return j(mn,{width:Hr,height:Hr,color:Pn})}return mn(ze),j(mn,{faces:fn,resize:function(Tn){var Pn,lr=0|Tn;if(lt(lr>0&&lr<=mt.maxCubeMapSize,"invalid radius for cube fbo"),lr===mn.width)return mn;var Hr=mn.color;for(Pn=0;Pn<Hr.length;++Pn)Hr[Pn].resize(lr);for(Pn=0;Pn<6;++Pn)fn[Pn].resize(lr);return mn.width=mn.height=lr,mn},_reglType:"framebufferCube",destroy:function(){fn.forEach(function(Tn){Tn.destroy()})}})},clear:function(){h(Sn).forEach(Le)},restore:function(){ve.cur=null,ve.next=null,ve.dirty=!0,h(Sn).forEach(function(ze){ze.framebuffer=Te.createFramebuffer(),Be(ze)})}})}(on,xr,ri,Xi,Bi,wr),pe=On(on,Ar,xr,ri,vi,Si,0,Di,{},ii,zi,{elements:null,primitive:4,count:-1,offset:0,instances:-1},Dr,Er,rn),G=pr(on,Di,pe.procs.poll,Dr,$n,xr,ri),B=pe.next,$=on.canvas,ut=[],Bt=[],Jt=[],ie=[rn.onDestroy],se=null;function Ce(){if(ut.length===0)return Er&&Er.update(),void(se=null);se=vt.next(Ce),kn();for(var Te=ut.length-1;Te>=0;--Te){var R=ut[Te];R&&R(Dr,null,0)}on.flush(),Er&&Er.update()}function Ee(){!se&&ut.length>0&&(se=vt.next(Ce))}function cn(){se&&(vt.cancel(Ce),se=null)}function xn(Te){Te.preventDefault(),vr=!0,cn(),Bt.forEach(function(R){R()})}function _t(Te){on.getError(),vr=!1,ar.restore(),zi.restore(),vi.restore(),Xi.restore(),Bi.restore(),Di.restore(),ii.restore(),Er&&Er.restore(),pe.procs.refresh(),Ee(),Jt.forEach(function(R){R()})}function Yt(Te){function R(Re,tn){var ke={},ln={};return Object.keys(Re).forEach(function(hn){var nn=Re[hn];if(ht.isDynamic(nn))ln[hn]=ht.unbox(nn,hn);else{if(tn&&Array.isArray(nn)){for(var dn=0;dn<nn.length;++dn)if(ht.isDynamic(nn[dn]))return void(ln[hn]=ht.unbox(nn,hn))}ke[hn]=nn}}),{dynamic:ln,static:ke}}lt(!!Te,"invalid args to regl({...})"),lt.type(Te,"object","invalid args to regl({...})");var mt=R(Te.context||{},!0),$t=R(Te.uniforms||{},!0),me=R(Te.attributes||{},!1),Zt=R(function(Re){var tn=j({},Re);function ke(ln){if(ln in tn){var hn=tn[ln];delete tn[ln],Object.keys(hn).forEach(function(nn){tn[ln+"."+nn]=hn[nn]})}}return delete tn.uniforms,delete tn.attributes,delete tn.context,delete tn.vao,"stencil"in tn&&tn.stencil.op&&(tn.stencil.opBack=tn.stencil.opFront=tn.stencil.op,delete tn.stencil.op),ke("blend"),ke("depth"),ke("cull"),ke("stencil"),ke("polygonOffset"),ke("scissor"),ke("sample"),"vao"in Re&&(tn.vao=Re.vao),tn}(Te),!1),ve={gpuTime:0,cpuTime:0,count:0},he=pe.compile(Zt,me,$t,mt,ve),ce=he.draw,Me=he.batch,_e=he.scope,We=[];return j(function(Re,tn){var ke;if(vr&&lt.raise("context lost"),typeof Re=="function")return _e.call(this,null,Re,0);if(typeof tn=="function")if(typeof Re=="number")for(ke=0;ke<Re;++ke)_e.call(this,null,tn,ke);else{if(!Array.isArray(Re))return _e.call(this,Re,tn,0);for(ke=0;ke<Re.length;++ke)_e.call(this,Re[ke],tn,ke)}else if(typeof Re=="number"){if(Re>0)return Me.call(this,function(ln){for(;We.length<ln;)We.push(null);return We}(0|Re),0|Re)}else{if(!Array.isArray(Re))return ce.call(this,Re);if(Re.length)return Me.call(this,Re,Re.length)}},{stats:ve,destroy:function(){he.destroy()}})}$&&($.addEventListener("webglcontextlost",xn,!1),$.addEventListener("webglcontextrestored",_t,!1));var Se=Di.setFBO=Yt({framebuffer:ht.define.call(null,1,"framebuffer")});function Wt(Te,R){var mt=0;pe.procs.poll();var $t=R.color;$t&&(on.clearColor(+$t[0]||0,+$t[1]||0,+$t[2]||0,+$t[3]||0),mt|=16384),"depth"in R&&(on.clearDepth(+R.depth),mt|=256),"stencil"in R&&(on.clearStencil(0|R.stencil),mt|=1024),lt(!!mt,"called regl.clear with no buffer specified"),on.clear(mt)}function ue(Te){return lt.type(Te,"function","regl.frame() callback must be a function"),ut.push(Te),Ee(),{cancel:function(){var mt=Hn(ut,Te);lt(mt>=0,"cannot cancel a frame twice"),ut[mt]=function $t(){var me=Hn(ut,$t);ut[me]=ut[ut.length-1],ut.length-=1,ut.length<=0&&cn()}}}}function vn(){var Te=B.viewport,R=B.scissor_box;Te[0]=Te[1]=R[0]=R[1]=0,Dr.viewportWidth=Dr.framebufferWidth=Dr.drawingBufferWidth=Te[2]=R[2]=on.drawingBufferWidth,Dr.viewportHeight=Dr.framebufferHeight=Dr.drawingBufferHeight=Te[3]=R[3]=on.drawingBufferHeight}function kn(){Dr.tick+=1,Dr.time=Un(),vn(),pe.procs.poll()}function _n(){Xi.refresh(),vn(),pe.procs.refresh(),Er&&Er.update()}function Un(){return(bt()-Ir)/1e3}_n();var Ze=j(Yt,{clear:function(R){if(lt(O(R)==="object"&&R,"regl.clear() takes an object as input"),"framebuffer"in R)if(R.framebuffer&&R.framebuffer_reglType==="framebufferCube")for(var mt=0;mt<6;++mt)Se(j({framebuffer:R.framebuffer.faces[mt]},R),Wt);else Se(R,Wt);else Wt(0,R)},prop:ht.define.bind(null,1),context:ht.define.bind(null,2),this:ht.define.bind(null,3),draw:Yt({}),buffer:function(R){return vi.create(R,34962,!1,!1)},elements:function(R){return Si.create(R,!1)},texture:Xi.create2D,cube:Xi.createCube,renderbuffer:Bi.create,framebuffer:Di.create,framebufferCube:Di.createCube,vao:ii.createVAO,attributes:$n,frame:ue,on:function(R,mt){var $t;switch(lt.type(mt,"function","listener callback must be a function"),R){case"frame":return ue(mt);case"lost":$t=Bt;break;case"restore":$t=Jt;break;case"destroy":$t=ie;break;default:lt.raise("invalid event, must be one of frame,lost,restore,destroy")}return $t.push(mt),{cancel:function(){for(var Zt=0;Zt<$t.length;++Zt)if($t[Zt]===mt)return $t[Zt]=$t[$t.length-1],void $t.pop()}}},limits:ri,hasExtension:function(R){return ri.extensions.indexOf(R.toLowerCase())>=0},read:G,destroy:function(){ut.length=0,cn(),$&&($.removeEventListener("webglcontextlost",xn),$.removeEventListener("webglcontextrestored",_t)),zi.clear(),Di.clear(),Bi.clear(),Xi.clear(),Si.clear(),vi.clear(),ii.clear(),Er&&Er.clear(),ie.forEach(function(R){R()})},_gl:on,_refresh:_n,poll:function(){kn(),Er&&Er.update()},now:Un,stats:wr});return rn.onDone(null,Ze),Ze}},O(A)==="object"&&a!==void 0?a.exports=m():(p=typeof(r=m)=="function"?r.call(A,e,A,a):r)===void 0||(a.exports=p)},function(a,A,e){"use strict";a.exports=function(r,p,m,O){try{try{var l;try{l=new window.Blob([r])}catch(n){(l=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(r),l=l.getBlob()}var E=window.URL||window.webkitURL,j=E.createObjectURL(l),y=new window[p](j,m);return E.revokeObjectURL(j),y}catch(n){return new window[p]("data:application/javascript,".concat(encodeURIComponent(r)),m)}}catch(n){if(!O)throw Error("Inline worker is not supported");return new window[p](O,m)}}},,,,,,,,function(a,A,e){"use strict";e.r(A),e.d(A,"Minimap",function(){return S}),e.d(A,"Grid",function(){return T}),e.d(A,"Bundling",function(){return v}),e.d(A,"Menu",function(){return x}),e.d(A,"Fisheye",function(){return C}),e.d(A,"ToolBar",function(){return N}),e.d(A,"Tooltip",function(){return X}),e.d(A,"TimeBar",function(){return tt}),e.d(A,"ImageMinimap",function(){return it}),e.d(A,"EdgeFilterLens",function(){return pt});var r=e(5);e.d(A,"Arrow",function(){return r.d}),e.d(A,"Marker",function(){return r.k}),e.d(A,"Shape",function(){return r.m});var p=e(18);e.d(A,"ICanvas",function(){return p.ICanvas}),e.d(A,"IGroup",function(){return p.IGroup}),e.d(A,"IShape",function(){return p.IShape});var m=e(33);e.d(A,"Algorithm",function(){return m});var O=e(91);e.d(A,"Graph",function(){return O.a});var l=e(152);e.d(A,"TreeGraph",function(){return l.a});var E=e(69);e.d(A,"Layout",function(){return E.a}),e.d(A,"registerLayout",function(){return E.b});var j=e(45);e.d(A,"Global",function(){return j.a});var y=e(38);e.d(A,"Util",function(){return y.a});var n=e(35);e(509),e(508),e.d(A,"G6GraphEvent",function(){return r.i}),e.d(A,"G6Event",function(){return r.h}),e.d(A,"Node",function(){return r.l}),e.d(A,"Edge",function(){return r.g}),e.d(A,"Combo",function(){return r.f}),e.d(A,"Hull",function(){return r.j}),e.d(A,"registerNode",function(){return r.r}),e.d(A,"registerCombo",function(){return r.p}),e.d(A,"AbstractGraph",function(){return r.b}),e.d(A,"registerEdge",function(){return r.q}),e.d(A,"registerBehavior",function(){return r.o}),e.d(A,"AbstractLayout",function(){return r.c}),e.d(A,"AbstractEvent",function(){return r.a}),e.d(A,"BaseGlobal",function(){return r.e});var s=e(245);for(var d in s)["default","Graph","TreeGraph","Util","Layout","registerLayout","Global","Minimap","Grid","Bundling","Menu","Fisheye","Algorithm","ToolBar","Tooltip","TimeBar","ImageMinimap","EdgeFilterLens","Arrow","Marker","Shape","ICanvas","IGroup","IShape","G6GraphEvent","G6Event","Node","Edge","Combo","Hull","registerNode","registerCombo","AbstractGraph","registerEdge","registerBehavior","AbstractLayout","AbstractEvent","BaseGlobal"].indexOf(d)<0&&function(ft){e.d(A,ft,function(){return s[ft]})}(d);var M=e(246);for(var d in M)["default","Graph","TreeGraph","Util","Layout","registerLayout","Global","Minimap","Grid","Bundling","Menu","Fisheye","Algorithm","ToolBar","Tooltip","TimeBar","ImageMinimap","EdgeFilterLens","Arrow","Marker","Shape","ICanvas","IGroup","IShape","G6GraphEvent","G6Event","Node","Edge","Combo","Hull","registerNode","registerCombo","AbstractGraph","registerEdge","registerBehavior","AbstractLayout","AbstractEvent","BaseGlobal"].indexOf(d)<0&&function(Ot){e.d(A,Ot,function(){return M[Ot]})}(d);var S=n.a.Minimap,T=n.a.Grid,v=n.a.Bundling,x=n.a.Menu,C=n.a.Fisheye,N=n.a.ToolBar,X=n.a.Tooltip,tt=n.a.TimeBar,it=n.a.ImageMinimap,pt=n.a.EdgeFilterLens;A.default={version:j.a.version,Graph:O.a,TreeGraph:l.a,Util:y.a,Layout:E.a,registerLayout:E.b,Global:j.a,registerBehavior:r.o,registerCombo:r.p,registerEdge:r.q,registerNode:r.r,Minimap:n.a.Minimap,Grid:n.a.Grid,Bundling:n.a.Bundling,Menu:n.a.Menu,ToolBar:n.a.ToolBar,Tooltip:n.a.Tooltip,TimeBar:tt,Fisheye:C,ImageMinimap:it,EdgeFilterLens:pt,Algorithm:m,Arrow:r.d,Marker:r.k,Shape:r.m}},function(a,A,e){var r=e(264),p=e(265),m={};for(var O in r)r.hasOwnProperty(O)&&(m[r[O]]=O);var l=a.exports={to:{},get:{}};function E(y,n,s){return Math.min(Math.max(n,y),s)}function j(y){var n=y.toString(16).toUpperCase();return n.length<2?"0"+n:n}l.get=function(y){var n,s;switch(y.substring(0,3).toLowerCase()){case"hsl":n=l.get.hsl(y),s="hsl";break;case"hwb":n=l.get.hwb(y),s="hwb";break;default:n=l.get.rgb(y),s="rgb"}return n?{model:s,value:n}:null},l.get.rgb=function(y){if(!y)return null;var n,s,d,M=[0,0,0,1];if(n=y.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(d=n[2],n=n[1],s=0;s<3;s++){var S=2*s;M[s]=parseInt(n.slice(S,S+2),16)}d&&(M[3]=parseInt(d,16)/255)}else if(n=y.match(/^#([a-f0-9]{3,4})$/i)){for(d=(n=n[1])[3],s=0;s<3;s++)M[s]=parseInt(n[s]+n[s],16);d&&(M[3]=parseInt(d+d,16)/255)}else if(n=y.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(s=0;s<3;s++)M[s]=parseInt(n[s+1],0);n[4]&&(M[3]=parseFloat(n[4]))}else{if(!(n=y.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(n=y.match(/(\D+)/))?n[1]==="transparent"?[0,0,0,0]:(M=r[n[1]])?(M[3]=1,M):null:null;for(s=0;s<3;s++)M[s]=Math.round(2.55*parseFloat(n[s+1]));n[4]&&(M[3]=parseFloat(n[4]))}for(s=0;s<3;s++)M[s]=E(M[s],0,255);return M[3]=E(M[3],0,1),M},l.get.hsl=function(y){if(!y)return null;var n=y.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(n){var s=parseFloat(n[4]);return[(parseFloat(n[1])+360)%360,E(parseFloat(n[2]),0,100),E(parseFloat(n[3]),0,100),E(isNaN(s)?1:s,0,1)]}return null},l.get.hwb=function(y){if(!y)return null;var n=y.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(n){var s=parseFloat(n[4]);return[(parseFloat(n[1])%360+360)%360,E(parseFloat(n[2]),0,100),E(parseFloat(n[3]),0,100),E(isNaN(s)?1:s,0,1)]}return null},l.to.hex=function(){var y=p(arguments);return"#"+j(y[0])+j(y[1])+j(y[2])+(y[3]<1?j(Math.round(255*y[3])):"")},l.to.rgb=function(){var y=p(arguments);return y.length<4||y[3]===1?"rgb("+Math.round(y[0])+", "+Math.round(y[1])+", "+Math.round(y[2])+")":"rgba("+Math.round(y[0])+", "+Math.round(y[1])+", "+Math.round(y[2])+", "+y[3]+")"},l.to.rgb.percent=function(){var y=p(arguments),n=Math.round(y[0]/255*100),s=Math.round(y[1]/255*100),d=Math.round(y[2]/255*100);return y.length<4||y[3]===1?"rgb("+n+"%, "+s+"%, "+d+"%)":"rgba("+n+"%, "+s+"%, "+d+"%, "+y[3]+")"},l.to.hsl=function(){var y=p(arguments);return y.length<4||y[3]===1?"hsl("+y[0]+", "+y[1]+"%, "+y[2]+"%)":"hsla("+y[0]+", "+y[1]+"%, "+y[2]+"%, "+y[3]+")"},l.to.hwb=function(){var y=p(arguments),n="";return y.length>=4&&y[3]!==1&&(n=", "+y[3]),"hwb("+y[0]+", "+y[1]+"%, "+y[2]+"%"+n+")"},l.to.keyword=function(y){return m[y.slice(0,3)]}},function(a,A,e){"use strict";a.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(a,A,e){"use strict";var r=e(266),p=Array.prototype.concat,m=Array.prototype.slice,O=a.exports=function(l){for(var E=[],j=0,y=l.length;j<y;j++){var n=l[j];r(n)?E=p.call(E,m.call(n)):E.push(n)}return E};O.wrap=function(l){return function(){return l(O(arguments))}}},function(a,A){a.exports=function(e){return!(!e||typeof e=="string")&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String"))}},function(a,A,e){function r(l){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(l)}var p=e(161),m=e(269),O={};Object.keys(p).forEach(function(l){O[l]={},Object.defineProperty(O[l],"channels",{value:p[l].channels}),Object.defineProperty(O[l],"labels",{value:p[l].labels});var E=m(l);Object.keys(E).forEach(function(j){var y=E[j];O[l][j]=function(n){var s=function(M){if(M==null)return M;arguments.length>1&&(M=Array.prototype.slice.call(arguments));var S=n(M);if(r(S)==="object")for(var T=S.length,v=0;v<T;v++)S[v]=Math.round(S[v]);return S};return"conversion"in n&&(s.conversion=n.conversion),s}(y),O[l][j].raw=function(n){var s=function(M){return M==null?M:(arguments.length>1&&(M=Array.prototype.slice.call(arguments)),n(M))};return"conversion"in n&&(s.conversion=n.conversion),s}(y)})}),a.exports=O},function(a,A,e){"use strict";a.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(a,A,e){var r=e(161);function p(l){var E=function(){for(var T={},v=Object.keys(r),x=v.length,C=0;C<x;C++)T[v[C]]={distance:-1,parent:null};return T}(),j=[l];for(E[l].distance=0;j.length;)for(var y=j.pop(),n=Object.keys(r[y]),s=n.length,d=0;d<s;d++){var M=n[d],S=E[M];S.distance===-1&&(S.distance=E[y].distance+1,S.parent=y,j.unshift(M))}return E}function m(l,E){return function(j){return E(l(j))}}function O(l,E){for(var j=[E[l].parent,l],y=r[E[l].parent][l],n=E[l].parent;E[n].parent;)j.unshift(E[n].parent),y=m(r[E[n].parent][n],y),n=E[n].parent;return y.conversion=j,y}a.exports=function(l){for(var E=p(l),j={},y=Object.keys(E),n=y.length,s=0;s<n;s++){var d=y[s];E[d].parent!==null&&(j[d]=O(d,E))}return j}},function(a,A,e){var r=e(271);a.exports={Graph:r.Graph,json:e(372),alg:e(373),version:r.version}},function(a,A,e){a.exports={Graph:e(124),version:e(371)}},function(a,A,e){var r=e(162);a.exports=function(p){return r(p,4)}},function(a,A){a.exports=function(){this.__data__=[],this.size=0}},function(a,A,e){var r=e(97),p=Array.prototype.splice;a.exports=function(m){var O=this.__data__,l=r(O,m);return!(l<0)&&(l==O.length-1?O.pop():p.call(O,l,1),--this.size,!0)}},function(a,A,e){var r=e(97);a.exports=function(p){var m=this.__data__,O=r(m,p);return O<0?void 0:m[O][1]}},function(a,A,e){var r=e(97);a.exports=function(p){return r(this.__data__,p)>-1}},function(a,A,e){var r=e(97);a.exports=function(p,m){var O=this.__data__,l=r(O,p);return l<0?(++this.size,O.push([p,m])):O[l][1]=m,this}},function(a,A,e){var r=e(96);a.exports=function(){this.__data__=new r,this.size=0}},function(a,A){a.exports=function(e){var r=this.__data__,p=r.delete(e);return this.size=r.size,p}},function(a,A){a.exports=function(e){return this.__data__.get(e)}},function(a,A){a.exports=function(e){return this.__data__.has(e)}},function(a,A,e){var r=e(96),p=e(125),m=e(126);a.exports=function(O,l){var E=this.__data__;if(E instanceof r){var j=E.__data__;if(!p||j.length<199)return j.push([O,l]),this.size=++E.size,this;E=this.__data__=new m(j)}return E.set(O,l),this.size=E.size,this}},function(a,A,e){var r=e(83),p=e(286),m=e(43),O=e(165),l=/^\[object .+?Constructor\]$/,E=Function.prototype,j=Object.prototype,y=E.toString,n=j.hasOwnProperty,s=RegExp("^"+y.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");a.exports=function(d){return!(!m(d)||p(d))&&(r(d)?s:l).test(O(d))}},function(a,A,e){var r=e(72),p=Object.prototype,m=p.hasOwnProperty,O=p.toString,l=r?r.toStringTag:void 0;a.exports=function(E){var j=m.call(E,l),y=E[l];try{E[l]=void 0;var n=!0}catch(d){}var s=O.call(E);return n&&(j?E[l]=y:delete E[l]),s}},function(a,A){var e=Object.prototype.toString;a.exports=function(r){return e.call(r)}},function(a,A,e){var r,p=e(287),m=(r=/[^.]+$/.exec(p&&p.keys&&p.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";a.exports=function(O){return!!m&&m in O}},function(a,A,e){var r=e(47)["__core-js_shared__"];a.exports=r},function(a,A){a.exports=function(e,r){return e==null?void 0:e[r]}},function(a,A,e){var r=e(290),p=e(96),m=e(125);a.exports=function(){this.size=0,this.__data__={hash:new r,map:new(m||p),string:new r}}},function(a,A,e){var r=e(291),p=e(292),m=e(293),O=e(294),l=e(295);function E(j){var y=-1,n=j==null?0:j.length;for(this.clear();++y<n;){var s=j[y];this.set(s[0],s[1])}}E.prototype.clear=r,E.prototype.delete=p,E.prototype.get=m,E.prototype.has=O,E.prototype.set=l,a.exports=E},function(a,A,e){var r=e(98);a.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(a,A){a.exports=function(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}},function(a,A,e){var r=e(98),p=Object.prototype.hasOwnProperty;a.exports=function(m){var O=this.__data__;if(r){var l=O[m];return l==="__lodash_hash_undefined__"?void 0:l}return p.call(O,m)?O[m]:void 0}},function(a,A,e){var r=e(98),p=Object.prototype.hasOwnProperty;a.exports=function(m){var O=this.__data__;return r?O[m]!==void 0:p.call(O,m)}},function(a,A,e){var r=e(98);a.exports=function(p,m){var O=this.__data__;return this.size+=this.has(p)?0:1,O[p]=r&&m===void 0?"__lodash_hash_undefined__":m,this}},function(a,A,e){var r=e(99);a.exports=function(p){var m=r(this,p).delete(p);return this.size-=m?1:0,m}},function(a,A){function e(r){return(e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(r)}a.exports=function(r){var p=e(r);return p=="string"||p=="number"||p=="symbol"||p=="boolean"?r!=="__proto__":r===null}},function(a,A,e){var r=e(99);a.exports=function(p){return r(this,p).get(p)}},function(a,A,e){var r=e(99);a.exports=function(p){return r(this,p).has(p)}},function(a,A,e){var r=e(99);a.exports=function(p,m){var O=r(this,p),l=O.size;return O.set(p,m),this.size+=O.size==l?0:1,this}},function(a,A,e){var r=e(84),p=e(58);a.exports=function(m,O){return m&&r(O,p(O),m)}},function(a,A){a.exports=function(e,r){for(var p=-1,m=Array(e);++p<e;)m[p]=r(p);return m}},function(a,A,e){var r=e(57),p=e(48);a.exports=function(m){return p(m)&&r(m)=="[object Arguments]"}},function(a,A){a.exports=function(){return!1}},function(a,A,e){var r=e(57),p=e(128),m=e(48),O={};O["[object Float32Array]"]=O["[object Float64Array]"]=O["[object Int8Array]"]=O["[object Int16Array]"]=O["[object Int32Array]"]=O["[object Uint8Array]"]=O["[object Uint8ClampedArray]"]=O["[object Uint16Array]"]=O["[object Uint32Array]"]=!0,O["[object Arguments]"]=O["[object Array]"]=O["[object ArrayBuffer]"]=O["[object Boolean]"]=O["[object DataView]"]=O["[object Date]"]=O["[object Error]"]=O["[object Function]"]=O["[object Map]"]=O["[object Number]"]=O["[object Object]"]=O["[object RegExp]"]=O["[object Set]"]=O["[object String]"]=O["[object WeakMap]"]=!1,a.exports=function(l){return m(l)&&p(l.length)&&!!O[r(l)]}},function(a,A,e){var r=e(168)(Object.keys,Object);a.exports=r},function(a,A,e){var r=e(84),p=e(65);a.exports=function(m,O){return m&&r(O,p(O),m)}},function(a,A,e){var r=e(43),p=e(104),m=e(309),O=Object.prototype.hasOwnProperty;a.exports=function(l){if(!r(l))return m(l);var E=p(l),j=[];for(var y in l)(y!="constructor"||!E&&O.call(l,y))&&j.push(y);return j}},function(a,A){a.exports=function(e){var r=[];if(e!=null)for(var p in Object(e))r.push(p);return r}},function(a,A,e){var r=e(84),p=e(131);a.exports=function(m,O){return r(m,p(m),O)}},function(a,A,e){var r=e(84),p=e(173);a.exports=function(m,O){return r(m,p(m),O)}},function(a,A,e){var r=e(175),p=e(173),m=e(65);a.exports=function(O){return r(O,m,p)}},function(a,A,e){var r=e(64)(e(47),"DataView");a.exports=r},function(a,A,e){var r=e(64)(e(47),"Promise");a.exports=r},function(a,A,e){var r=e(64)(e(47),"WeakMap");a.exports=r},function(a,A){var e=Object.prototype.hasOwnProperty;a.exports=function(r){var p=r.length,m=new r.constructor(p);return p&&typeof r[0]=="string"&&e.call(r,"index")&&(m.index=r.index,m.input=r.input),m}},function(a,A,e){var r=e(133),p=e(318),m=e(319),O=e(320),l=e(178);a.exports=function(E,j,y){var n=E.constructor;switch(j){case"[object ArrayBuffer]":return r(E);case"[object Boolean]":case"[object Date]":return new n(+E);case"[object DataView]":return p(E,y);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return l(E,y);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(E);case"[object RegExp]":return m(E);case"[object Set]":return new n;case"[object Symbol]":return O(E)}}},function(a,A,e){var r=e(133);a.exports=function(p,m){var O=m?r(p.buffer):p.buffer;return new p.constructor(O,p.byteOffset,p.byteLength)}},function(a,A){var e=/\w*$/;a.exports=function(r){var p=new r.constructor(r.source,e.exec(r));return p.lastIndex=r.lastIndex,p}},function(a,A,e){var r=e(72),p=r?r.prototype:void 0,m=p?p.valueOf:void 0;a.exports=function(O){return m?Object(m.call(O)):{}}},function(a,A,e){var r=e(322),p=e(103),m=e(129),O=m&&m.isMap,l=O?p(O):r;a.exports=l},function(a,A,e){var r=e(74),p=e(48);a.exports=function(m){return p(m)&&r(m)=="[object Map]"}},function(a,A,e){var r=e(324),p=e(103),m=e(129),O=m&&m.isSet,l=O?p(O):r;a.exports=l},function(a,A,e){var r=e(74),p=e(48);a.exports=function(m){return p(m)&&r(m)=="[object Set]"}},function(a,A){a.exports=function(e){return function(r,p,m){for(var O=-1,l=Object(r),E=m(r),j=E.length;j--;){var y=E[e?j:++O];if(p(l[y],y,l)===!1)break}return r}}},function(a,A,e){var r=e(53);a.exports=function(p,m){return function(O,l){if(O==null)return O;if(!r(O))return p(O,l);for(var E=O.length,j=m?E:-1,y=Object(O);(m?j--:++j<E)&&l(y[j],j,y)!==!1;);return O}}},function(a,A,e){var r=e(106);a.exports=function(p,m){var O=[];return r(p,function(l,E,j){m(l,E,j)&&O.push(l)}),O}},function(a,A,e){var r=e(329),p=e(337),m=e(190);a.exports=function(O){var l=p(O);return l.length==1&&l[0][2]?m(l[0][0],l[0][1]):function(E){return E===O||r(E,O,l)}}},function(a,A,e){var r=e(95),p=e(185);a.exports=function(m,O,l,E){var j=l.length,y=j,n=!E;if(m==null)return!y;for(m=Object(m);j--;){var s=l[j];if(n&&s[2]?s[1]!==m[s[0]]:!(s[0]in m))return!1}for(;++j<y;){var d=(s=l[j])[0],M=m[d],S=s[1];if(n&&s[2]){if(M===void 0&&!(d in m))return!1}else{var T=new r;if(E)var v=E(M,S,d,m,O,T);if(!(v===void 0?p(S,M,3,E,T):v))return!1}}return!0}},function(a,A,e){var r=e(95),p=e(186),m=e(334),O=e(336),l=e(74),E=e(26),j=e(73),y=e(44),n="[object Object]",s=Object.prototype.hasOwnProperty;a.exports=function(d,M,S,T,v,x){var C=E(d),N=E(M),X=C?"[object Array]":l(d),tt=N?"[object Array]":l(M),it=(X=X=="[object Arguments]"?n:X)==n,pt=(tt=tt=="[object Arguments]"?n:tt)==n,ft=X==tt;if(ft&&j(d)){if(!j(M))return!1;C=!0,it=!1}if(ft&&!it)return x||(x=new r),C||y(d)?p(d,M,S,T,v,x):m(d,M,X,S,T,v,x);if(!(1&S)){var Ot=it&&s.call(d,"__wrapped__"),wt=pt&&s.call(M,"__wrapped__");if(Ot||wt){var xt=Ot?d.value():d,lt=wt?M.value():M;return x||(x=new r),v(xt,lt,S,T,x)}}return!!ft&&(x||(x=new r),O(d,M,S,T,v,x))}},function(a,A){a.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(a,A){a.exports=function(e){return this.__data__.has(e)}},function(a,A){a.exports=function(e,r){for(var p=-1,m=e==null?0:e.length;++p<m;)if(r(e[p],p,e))return!0;return!1}},function(a,A,e){var r=e(72),p=e(177),m=e(71),O=e(186),l=e(335),E=e(137),j=r?r.prototype:void 0,y=j?j.valueOf:void 0;a.exports=function(n,s,d,M,S,T,v){switch(d){case"[object DataView]":if(n.byteLength!=s.byteLength||n.byteOffset!=s.byteOffset)return!1;n=n.buffer,s=s.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=s.byteLength||!T(new p(n),new p(s)));case"[object Boolean]":case"[object Date]":case"[object Number]":return m(+n,+s);case"[object Error]":return n.name==s.name&&n.message==s.message;case"[object RegExp]":case"[object String]":return n==s+"";case"[object Map]":var x=l;case"[object Set]":var C=1&M;if(x||(x=E),n.size!=s.size&&!C)return!1;var N=v.get(n);if(N)return N==s;M|=2,v.set(n,s);var X=O(x(n),x(s),M,S,T,v);return v.delete(n),X;case"[object Symbol]":if(y)return y.call(n)==y.call(s)}return!1}},function(a,A){a.exports=function(e){var r=-1,p=Array(e.size);return e.forEach(function(m,O){p[++r]=[O,m]}),p}},function(a,A,e){var r=e(174),p=Object.prototype.hasOwnProperty;a.exports=function(m,O,l,E,j,y){var n=1&l,s=r(m),d=s.length;if(d!=r(O).length&&!n)return!1;for(var M=d;M--;){var S=s[M];if(!(n?S in O:p.call(O,S)))return!1}var T=y.get(m),v=y.get(O);if(T&&v)return T==O&&v==m;var x=!0;y.set(m,O),y.set(O,m);for(var C=n;++M<d;){var N=m[S=s[M]],X=O[S];if(E)var tt=n?E(X,N,S,O,m,y):E(N,X,S,m,O,y);if(!(tt===void 0?N===X||j(N,X,l,E,y):tt)){x=!1;break}C||(C=S=="constructor")}if(x&&!C){var it=m.constructor,pt=O.constructor;it==pt||!("constructor"in m)||!("constructor"in O)||typeof it=="function"&&it instanceof it&&typeof pt=="function"&&pt instanceof pt||(x=!1)}return y.delete(m),y.delete(O),x}},function(a,A,e){var r=e(189),p=e(58);a.exports=function(m){for(var O=p(m),l=O.length;l--;){var E=O[l],j=m[E];O[l]=[E,j,r(j)]}return O}},function(a,A,e){var r=e(185),p=e(339),m=e(192),O=e(138),l=e(189),E=e(190),j=e(87);a.exports=function(y,n){return O(y)&&l(n)?E(j(y),n):function(s){var d=p(s,y);return d===void 0&&d===n?m(s,y):r(n,d,3)}}},function(a,A,e){var r=e(107);a.exports=function(p,m,O){var l=p==null?void 0:r(p,m);return l===void 0?O:l}},function(a,A,e){var r=e(341),p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,m=/\\(\\)?/g,O=r(function(l){var E=[];return l.charCodeAt(0)===46&&E.push(""),l.replace(p,function(j,y,n,s){E.push(n?s.replace(m,"$1"):y||j)}),E});a.exports=O},function(a,A,e){var r=e(342);a.exports=function(p){var m=r(p,function(l){return O.size===500&&O.clear(),l}),O=m.cache;return m}},function(a,A,e){var r=e(126);function p(m,O){if(typeof m!="function"||O!=null&&typeof O!="function")throw new TypeError("Expected a function");var l=function E(){var j=arguments,y=O?O.apply(this,j):j[0],n=E.cache;if(n.has(y))return n.get(y);var s=m.apply(this,j);return E.cache=n.set(y,s)||n,s};return l.cache=new(p.Cache||r),l}p.Cache=r,a.exports=p},function(a,A,e){var r=e(72),p=e(109),m=e(26),O=e(75),l=r?r.prototype:void 0,E=l?l.toString:void 0;a.exports=function j(y){if(typeof y=="string")return y;if(m(y))return p(y,j)+"";if(O(y))return E?E.call(y):"";var n=y+"";return n=="0"&&1/y==-1/0?"-0":n}},function(a,A){a.exports=function(e,r){return e!=null&&r in Object(e)}},function(a,A,e){var r=e(194),p=e(346),m=e(138),O=e(87);a.exports=function(l){return m(l)?r(O(l)):p(l)}},function(a,A,e){var r=e(107);a.exports=function(p){return function(m){return r(m,p)}}},function(a,A){var e=Object.prototype.hasOwnProperty;a.exports=function(r,p){return r!=null&&e.call(r,p)}},function(a,A,e){var r=e(130),p=e(74),m=e(85),O=e(26),l=e(53),E=e(73),j=e(104),y=e(44),n=Object.prototype.hasOwnProperty;a.exports=function(s){if(s==null)return!0;if(l(s)&&(O(s)||typeof s=="string"||typeof s.splice=="function"||E(s)||y(s)||m(s)))return!s.length;var d=p(s);if(d=="[object Map]"||d=="[object Set]")return!s.size;if(j(s))return!r(s).length;for(var M in s)if(n.call(s,M))return!1;return!0}},function(a,A){a.exports=function(e,r,p,m){var O=-1,l=e==null?0:e.length;for(m&&l&&(p=e[++O]);++O<l;)p=r(p,e[O],O,e);return p}},function(a,A){a.exports=function(e,r,p,m,O){return O(e,function(l,E,j){p=m?(m=!1,l):r(p,l,E,j)}),p}},function(a,A,e){var r=e(130),p=e(74),m=e(53),O=e(352),l=e(353);a.exports=function(E){if(E==null)return 0;if(m(E))return O(E)?l(E):E.length;var j=p(E);return j=="[object Map]"||j=="[object Set]"?E.size:r(E).length}},function(a,A,e){var r=e(57),p=e(26),m=e(48);a.exports=function(O){return typeof O=="string"||!p(O)&&m(O)&&r(O)=="[object String]"}},function(a,A,e){var r=e(354),p=e(355),m=e(356);a.exports=function(O){return p(O)?m(O):r(O)}},function(a,A,e){var r=e(194)("length");a.exports=r},function(a,A){var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");a.exports=function(r){return e.test(r)}},function(a,A){var e="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",p="\\ud83c[\\udffb-\\udfff]",m="[^\\ud800-\\udfff]",O="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]",E="(?:"+r+"|"+p+")?",j="[\\ufe0e\\ufe0f]?"+E+("(?:\\u200d(?:"+[m,O,l].join("|")+")[\\ufe0e\\ufe0f]?"+E+")*"),y="(?:"+[m+r+"?",r,O,l,e].join("|")+")",n=RegExp(p+"(?="+p+")|"+y+j,"g");a.exports=function(s){for(var d=n.lastIndex=0;n.test(s);)++d;return d}},function(a,A,e){var r=e(127),p=e(180),m=e(135),O=e(54),l=e(105),E=e(26),j=e(73),y=e(83),n=e(43),s=e(44);a.exports=function(d,M,S){var T=E(d),v=T||j(d)||s(d);if(M=O(M,4),S==null){var x=d&&d.constructor;S=v?T?new x:[]:n(d)&&y(x)?p(l(d)):{}}return(v?r:m)(d,function(C,N,X){return M(S,C,N,X)}),S}},function(a,A,e){var r=e(139),p=e(110),m=e(202),O=e(204),l=p(function(E){return m(r(E,1,O,!0))});a.exports=l},function(a,A,e){var r=e(72),p=e(85),m=e(26),O=r?r.isConcatSpreadable:void 0;a.exports=function(l){return m(l)||p(l)||!!(O&&l&&l[O])}},function(a,A){a.exports=function(e,r,p){switch(p.length){case 0:return e.call(r);case 1:return e.call(r,p[0]);case 2:return e.call(r,p[0],p[1]);case 3:return e.call(r,p[0],p[1],p[2])}return e.apply(r,p)}},function(a,A,e){var r=e(134),p=e(166),m=e(66),O=p?function(l,E){return p(l,"toString",{configurable:!0,enumerable:!1,value:r(E),writable:!0})}:m;a.exports=O},function(a,A){var e=Date.now;a.exports=function(r){var p=0,m=0;return function(){var O=e(),l=16-(O-m);if(m=O,l>0){if(++p>=800)return arguments[0]}else p=0;return r.apply(void 0,arguments)}}},function(a,A,e){var r=e(364);a.exports=function(p,m){return!!(p==null?0:p.length)&&r(p,m,0)>-1}},function(a,A,e){var r=e(203),p=e(365),m=e(366);a.exports=function(O,l,E){return l==l?m(O,l,E):r(O,p,E)}},function(a,A){a.exports=function(e){return e!=e}},function(a,A){a.exports=function(e,r,p){for(var m=p-1,O=e.length;++m<O;)if(e[m]===r)return m;return-1}},function(a,A){a.exports=function(e,r,p){for(var m=-1,O=e==null?0:e.length;++m<O;)if(p(r,e[m]))return!0;return!1}},function(a,A,e){var r=e(176),p=e(369),m=e(137),O=r&&1/m(new r([,-0]))[1]==1/0?function(l){return new r(l)}:p;a.exports=O},function(a,A){a.exports=function(){}},function(a,A,e){var r=e(109);a.exports=function(p,m){return r(m,function(O){return p[O]})}},function(a,A){a.exports="2.1.8"},function(a,A,e){var r=e(42),p=e(124);function m(l){return r.map(l.nodes(),function(E){var j=l.node(E),y=l.parent(E),n={v:E};return r.isUndefined(j)||(n.value=j),r.isUndefined(y)||(n.parent=y),n})}function O(l){return r.map(l.edges(),function(E){var j=l.edge(E),y={v:E.v,w:E.w};return r.isUndefined(E.name)||(y.name=E.name),r.isUndefined(j)||(y.value=j),y})}a.exports={write:function(E){var j={options:{directed:E.isDirected(),multigraph:E.isMultigraph(),compound:E.isCompound()},nodes:m(E),edges:O(E)};return r.isUndefined(E.graph())||(j.value=r.clone(E.graph())),j},read:function(E){var j=new p(E.options).setGraph(E.value);return r.each(E.nodes,function(y){j.setNode(y.v,y.value),y.parent&&j.setParent(y.v,y.parent)}),r.each(E.edges,function(y){j.setEdge({v:y.v,w:y.w,name:y.name},y.value)}),j}}},function(a,A,e){a.exports={components:e(374),dijkstra:e(206),dijkstraAll:e(375),findCycles:e(376),floydWarshall:e(377),isAcyclic:e(378),postorder:e(379),preorder:e(380),prim:e(381),tarjan:e(208),topsort:e(209)}},function(a,A,e){var r=e(42);a.exports=function(p){var m,O={},l=[];function E(j){r.has(O,j)||(O[j]=!0,m.push(j),r.each(p.successors(j),E),r.each(p.predecessors(j),E))}return r.each(p.nodes(),function(j){m=[],E(j),m.length&&l.push(m)}),l}},function(a,A,e){var r=e(206),p=e(42);a.exports=function(m,O,l){return p.transform(m.nodes(),function(E,j){E[j]=r(m,j,O,l)},{})}},function(a,A,e){var r=e(42),p=e(208);a.exports=function(m){return r.filter(p(m),function(O){return O.length>1||O.length===1&&m.hasEdge(O[0],O[0])})}},function(a,A,e){var r=e(42);a.exports=function(m,O,l){return function(E,j,y){var n={},s=E.nodes();return s.forEach(function(d){n[d]={},n[d][d]={distance:0},s.forEach(function(M){d!==M&&(n[d][M]={distance:Number.POSITIVE_INFINITY})}),y(d).forEach(function(M){var S=M.v===d?M.w:M.v,T=j(M);n[d][S]={distance:T,predecessor:d}})}),s.forEach(function(d){var M=n[d];s.forEach(function(S){var T=n[S];s.forEach(function(v){var x=T[d],C=M[v],N=T[v],X=x.distance+C.distance;X<N.distance&&(N.distance=X,N.predecessor=C.predecessor)})})}),n}(m,O||p,l||function(E){return m.outEdges(E)})};var p=r.constant(1)},function(a,A,e){var r=e(209);a.exports=function(p){try{r(p)}catch(m){if(m instanceof r.CycleException)return!1;throw m}return!0}},function(a,A,e){var r=e(210);a.exports=function(p,m){return r(p,m,"post")}},function(a,A,e){var r=e(210);a.exports=function(p,m){return r(p,m,"pre")}},function(a,A,e){var r=e(42),p=e(124),m=e(207);a.exports=function(O,l){var E,j=new p,y={},n=new m;function s(M){var S=M.v===E?M.w:M.v,T=n.priority(S);if(T!==void 0){var v=l(M);v<T&&(y[S]=E,n.decrease(S,v))}}if(O.nodeCount()===0)return j;r.each(O.nodes(),function(M){n.add(M,Number.POSITIVE_INFINITY),j.setNode(M)}),n.decrease(O.nodes()[0],0);for(var d=!1;n.size()>0;){if(E=n.removeMin(),r.has(y,E))j.setEdge(E,y[E]);else{if(d)throw new Error("Input graph is not connected: "+O);d=!0}O.nodeEdges(E).forEach(s)}return j}},function(a,A,e){"use strict";var r=e(24),p=e(419),m=e(422),O=e(423),l=e(37).normalizeRanks,E=e(425),j=e(37).removeEmptyRanks,y=e(426),n=e(427),s=e(428),d=e(429),M=e(438),S=e(37),T=e(46).Graph;a.exports=function(wt,xt){var lt=xt&&xt.debugTiming?S.time:S.notime;lt("layout",function(){var Vt=lt("  buildLayoutGraph",function(){return function(Lt){var Et=new T({multigraph:!0,compound:!0}),J=Ot(Lt.graph());return Et.setGraph(r.merge({},x,ft(J,v),r.pick(J,C))),r.forEach(Lt.nodes(),function(ht){var vt=Ot(Lt.node(ht));Et.setNode(ht,r.defaults(ft(vt,N),X)),Et.setParent(ht,Lt.parent(ht))}),r.forEach(Lt.edges(),function(ht){var vt=Ot(Lt.edge(ht));Et.setEdge(ht,r.merge({},it,ft(vt,tt),r.pick(vt,pt)))}),Et}(wt)});lt("  runLayout",function(){(function(Lt,Et){Et("    makeSpaceForEdgeLabels",function(){(function(J){var ht=J.graph();ht.ranksep/=2,r.forEach(J.edges(),function(vt){var bt=J.edge(vt);bt.minlen*=2,bt.labelpos.toLowerCase()!=="c"&&(ht.rankdir==="TB"||ht.rankdir==="BT"?bt.width+=bt.labeloffset:bt.height+=bt.labeloffset)})})(Lt)}),Et("    removeSelfEdges",function(){(function(J){r.forEach(J.edges(),function(ht){if(ht.v===ht.w){var vt=J.node(ht.v);vt.selfEdges||(vt.selfEdges=[]),vt.selfEdges.push({e:ht,label:J.edge(ht)}),J.removeEdge(ht)}})})(Lt)}),Et("    acyclic",function(){p.run(Lt)}),Et("    nestingGraph.run",function(){y.run(Lt)}),Et("    rank",function(){O(S.asNonCompoundGraph(Lt))}),Et("    injectEdgeLabelProxies",function(){(function(J){r.forEach(J.edges(),function(ht){var vt=J.edge(ht);if(vt.width&&vt.height){var bt=J.node(ht.v),At={rank:(J.node(ht.w).rank-bt.rank)/2+bt.rank,e:ht};S.addDummyNode(J,"edge-proxy",At,"_ep")}})})(Lt)}),Et("    removeEmptyRanks",function(){j(Lt)}),Et("    nestingGraph.cleanup",function(){y.cleanup(Lt)}),Et("    normalizeRanks",function(){l(Lt)}),Et("    assignRankMinMax",function(){(function(J){var ht=0;r.forEach(J.nodes(),function(vt){var bt=J.node(vt);bt.borderTop&&(bt.minRank=J.node(bt.borderTop).rank,bt.maxRank=J.node(bt.borderBottom).rank,ht=r.max(ht,bt.maxRank))}),J.graph().maxRank=ht})(Lt)}),Et("    removeEdgeLabelProxies",function(){(function(J){r.forEach(J.nodes(),function(ht){var vt=J.node(ht);vt.dummy==="edge-proxy"&&(J.edge(vt.e).labelRank=vt.rank,J.removeNode(ht))})})(Lt)}),Et("    normalize.run",function(){m.run(Lt)}),Et("    parentDummyChains",function(){E(Lt)}),Et("    addBorderSegments",function(){n(Lt)}),Et("    order",function(){d(Lt)}),Et("    insertSelfEdges",function(){(function(J){var ht=S.buildLayerMatrix(J);r.forEach(ht,function(vt){var bt=0;r.forEach(vt,function(At,q){var ct=J.node(At);ct.order=q+bt,r.forEach(ct.selfEdges,function(ot){S.addDummyNode(J,"selfedge",{width:ot.label.width,height:ot.label.height,rank:ct.rank,order:q+ ++bt,e:ot.e,label:ot.label},"_se")}),delete ct.selfEdges})})})(Lt)}),Et("    adjustCoordinateSystem",function(){s.adjust(Lt)}),Et("    position",function(){M(Lt)}),Et("    positionSelfEdges",function(){(function(J){r.forEach(J.nodes(),function(ht){var vt=J.node(ht);if(vt.dummy==="selfedge"){var bt=J.node(vt.e.v),At=bt.x+bt.width/2,q=bt.y,ct=vt.x-At,ot=bt.height/2;J.setEdge(vt.e,vt.label),J.removeNode(ht),vt.label.points=[{x:At+2*ct/3,y:q-ot},{x:At+5*ct/6,y:q-ot},{x:At+ct,y:q},{x:At+5*ct/6,y:q+ot},{x:At+2*ct/3,y:q+ot}],vt.label.x=vt.x,vt.label.y=vt.y}})})(Lt)}),Et("    removeBorderNodes",function(){(function(J){r.forEach(J.nodes(),function(ht){if(J.children(ht).length){var vt=J.node(ht),bt=J.node(vt.borderTop),At=J.node(vt.borderBottom),q=J.node(r.last(vt.borderLeft)),ct=J.node(r.last(vt.borderRight));vt.width=Math.abs(ct.x-q.x),vt.height=Math.abs(At.y-bt.y),vt.x=q.x+vt.width/2,vt.y=bt.y+vt.height/2}}),r.forEach(J.nodes(),function(ht){J.node(ht).dummy==="border"&&J.removeNode(ht)})})(Lt)}),Et("    normalize.undo",function(){m.undo(Lt)}),Et("    fixupEdgeLabelCoords",function(){(function(J){r.forEach(J.edges(),function(ht){var vt=J.edge(ht);if(r.has(vt,"x"))switch(vt.labelpos!=="l"&&vt.labelpos!=="r"||(vt.width-=vt.labeloffset),vt.labelpos){case"l":vt.x-=vt.width/2+vt.labeloffset;break;case"r":vt.x+=vt.width/2+vt.labeloffset}})})(Lt)}),Et("    undoCoordinateSystem",function(){s.undo(Lt)}),Et("    translateGraph",function(){(function(J){var ht=Number.POSITIVE_INFINITY,vt=0,bt=Number.POSITIVE_INFINITY,At=0,q=J.graph(),ct=q.marginx||0,ot=q.marginy||0;function _(P){var Y=P.x,k=P.y,h=P.width,g=P.height;ht=Math.min(ht,Y-h/2),vt=Math.max(vt,Y+h/2),bt=Math.min(bt,k-g/2),At=Math.max(At,k+g/2)}r.forEach(J.nodes(),function(P){_(J.node(P))}),r.forEach(J.edges(),function(P){var Y=J.edge(P);r.has(Y,"x")&&_(Y)}),ht-=ct,bt-=ot,r.forEach(J.nodes(),function(P){var Y=J.node(P);Y.x-=ht,Y.y-=bt}),r.forEach(J.edges(),function(P){var Y=J.edge(P);r.forEach(Y.points,function(k){k.x-=ht,k.y-=bt}),r.has(Y,"x")&&(Y.x-=ht),r.has(Y,"y")&&(Y.y-=bt)}),q.width=vt-ht+ct,q.height=At-bt+ot})(Lt)}),Et("    assignNodeIntersects",function(){(function(J){r.forEach(J.edges(),function(ht){var vt,bt,At=J.edge(ht),q=J.node(ht.v),ct=J.node(ht.w);At.points?(vt=At.points[0],bt=At.points[At.points.length-1]):(At.points=[],vt=ct,bt=q),At.points.unshift(S.intersectRect(q,vt)),At.points.push(S.intersectRect(ct,bt))})})(Lt)}),Et("    reversePoints",function(){(function(J){r.forEach(J.edges(),function(ht){var vt=J.edge(ht);vt.reversed&&vt.points.reverse()})})(Lt)}),Et("    acyclic.undo",function(){p.undo(Lt)})})(Vt,lt)}),lt("  updateInputGraph",function(){(function(Lt,Et){r.forEach(Lt.nodes(),function(J){var ht=Lt.node(J),vt=Et.node(J);ht&&(ht.x=vt.x,ht.y=vt.y,Et.children(J).length&&(ht.width=vt.width,ht.height=vt.height))}),r.forEach(Lt.edges(),function(J){var ht=Lt.edge(J),vt=Et.edge(J);ht.points=vt.points,r.has(vt,"x")&&(ht.x=vt.x,ht.y=vt.y)}),Lt.graph().width=Et.graph().width,Lt.graph().height=Et.graph().height})(wt,Vt)})})};var v=["nodesep","edgesep","ranksep","marginx","marginy"],x={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},C=["acyclicer","ranker","rankdir","align"],N=["width","height"],X={width:0,height:0},tt=["minlen","weight","width","height","labeloffset"],it={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},pt=["labelpos"];function ft(wt,xt){return r.mapValues(r.pick(wt,xt),Number)}function Ot(wt){var xt={};return r.forEach(wt,function(lt,Vt){xt[Vt.toLowerCase()]=lt}),xt}},function(a,A,e){var r=e(162);a.exports=function(p){return r(p,5)}},function(a,A,e){var r=e(110),p=e(71),m=e(111),O=e(65),l=Object.prototype,E=l.hasOwnProperty,j=r(function(y,n){y=Object(y);var s=-1,d=n.length,M=d>2?n[2]:void 0;for(M&&m(n[0],n[1],M)&&(d=1);++s<d;)for(var S=n[s],T=O(S),v=-1,x=T.length;++v<x;){var C=T[v],N=y[C];(N===void 0||p(N,l[C])&&!E.call(y,C))&&(y[C]=S[C])}return y});a.exports=j},function(a,A,e){var r=e(386)(e(387));a.exports=r},function(a,A,e){var r=e(54),p=e(53),m=e(58);a.exports=function(O){return function(l,E,j){var y=Object(l);if(!p(l)){var n=r(E,3);l=m(l),E=function(M){return n(y[M],M,y)}}var s=O(l,E,j);return s>-1?y[n?l[s]:s]:void 0}}},function(a,A,e){var r=e(203),p=e(54),m=e(388),O=Math.max;a.exports=function(l,E,j){var y=l==null?0:l.length;if(!y)return-1;var n=j==null?0:m(j);return n<0&&(n=O(y+n,0)),r(l,p(E,3),n)}},function(a,A,e){var r=e(211);a.exports=function(p){var m=r(p),O=m%1;return m==m?O?m-O:m:0}},function(a,A,e){var r=e(43),p=e(75),m=/^\s+|\s+$/g,O=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,E=/^0o[0-7]+$/i,j=parseInt;a.exports=function(y){if(typeof y=="number")return y;if(p(y))return NaN;if(r(y)){var n=typeof y.valueOf=="function"?y.valueOf():y;y=r(n)?n+"":n}if(typeof y!="string")return y===0?y:+y;y=y.replace(m,"");var s=l.test(y);return s||E.test(y)?j(y.slice(2),s?2:8):O.test(y)?NaN:+y}},function(a,A,e){var r=e(136),p=e(183),m=e(65);a.exports=function(O,l){return O==null?O:r(O,p(l),m)}},function(a,A){a.exports=function(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}},function(a,A,e){var r=e(101),p=e(135),m=e(54);a.exports=function(O,l){var E={};return l=m(l,3),p(O,function(j,y,n){r(E,y,l(j,y,n))}),E}},function(a,A,e){var r=e(140),p=e(394),m=e(66);a.exports=function(O){return O&&O.length?r(O,m,p):void 0}},function(a,A){a.exports=function(e,r){return e>r}},function(a,A,e){var r=e(396),p=e(399)(function(m,O,l){r(m,O,l)});a.exports=p},function(a,A,e){var r=e(95),p=e(213),m=e(136),O=e(397),l=e(43),E=e(65),j=e(214);a.exports=function y(n,s,d,M,S){n!==s&&m(s,function(T,v){if(S||(S=new r),l(T))O(n,s,v,d,y,M,S);else{var x=M?M(j(n,v),T,v+"",n,s,S):void 0;x===void 0&&(x=T),p(n,v,x)}},E)}},function(a,A,e){var r=e(213),p=e(169),m=e(178),O=e(170),l=e(179),E=e(85),j=e(26),y=e(204),n=e(73),s=e(83),d=e(43),M=e(151),S=e(44),T=e(214),v=e(398);a.exports=function(x,C,N,X,tt,it,pt){var ft=T(x,N),Ot=T(C,N),wt=pt.get(Ot);if(wt)r(x,N,wt);else{var xt=it?it(ft,Ot,N+"",x,C,pt):void 0,lt=xt===void 0;if(lt){var Vt=j(Ot),Lt=!Vt&&n(Ot),Et=!Vt&&!Lt&&S(Ot);xt=Ot,Vt||Lt||Et?j(ft)?xt=ft:y(ft)?xt=O(ft):Lt?(lt=!1,xt=p(Ot,!0)):Et?(lt=!1,xt=m(Ot,!0)):xt=[]:M(Ot)||E(Ot)?(xt=ft,E(ft)?xt=v(ft):d(ft)&&!s(ft)||(xt=l(Ot))):lt=!1}lt&&(pt.set(Ot,xt),tt(xt,Ot,X,it,pt),pt.delete(Ot)),r(x,N,xt)}}},function(a,A,e){var r=e(84),p=e(65);a.exports=function(m){return r(m,p(m))}},function(a,A,e){var r=e(110),p=e(111);a.exports=function(m){return r(function(O,l){var E=-1,j=l.length,y=j>1?l[j-1]:void 0,n=j>2?l[2]:void 0;for(y=m.length>3&&typeof y=="function"?(j--,y):void 0,n&&p(l[0],l[1],n)&&(y=j<3?void 0:y,j=1),O=Object(O);++E<j;){var s=l[E];s&&m(O,s,E,y)}return O})}},function(a,A,e){var r=e(140),p=e(215),m=e(66);a.exports=function(O){return O&&O.length?r(O,m,p):void 0}},function(a,A,e){var r=e(140),p=e(54),m=e(215);a.exports=function(O,l){return O&&O.length?r(O,p(l,2),m):void 0}},function(a,A,e){var r=e(47);a.exports=function(){return r.Date.now()}},function(a,A,e){var r=e(404),p=e(407)(function(m,O){return m==null?{}:r(m,O)});a.exports=p},function(a,A,e){var r=e(405),p=e(192);a.exports=function(m,O){return r(m,O,function(l,E){return p(m,E)})}},function(a,A,e){var r=e(107),p=e(406),m=e(108);a.exports=function(O,l,E){for(var j=-1,y=l.length,n={};++j<y;){var s=l[j],d=r(O,s);E(d,s)&&p(n,m(s,O),d)}return n}},function(a,A,e){var r=e(100),p=e(108),m=e(102),O=e(43),l=e(87);a.exports=function(E,j,y,n){if(!O(E))return E;for(var s=-1,d=(j=p(j,E)).length,M=d-1,S=E;S!=null&&++s<d;){var T=l(j[s]),v=y;if(T==="__proto__"||T==="constructor"||T==="prototype")return E;if(s!=M){var x=S[T];(v=n?n(x,T,S):void 0)===void 0&&(v=O(x)?x:m(j[s+1])?[]:{})}r(S,T,v),S=S[T]}return E}},function(a,A,e){var r=e(212),p=e(200),m=e(201);a.exports=function(O){return m(p(O,void 0,r),O+"")}},function(a,A,e){var r=e(409)();a.exports=r},function(a,A,e){var r=e(410),p=e(111),m=e(211);a.exports=function(O){return function(l,E,j){return j&&typeof j!="number"&&p(l,E,j)&&(E=j=void 0),l=m(l),E===void 0?(E=l,l=0):E=m(E),j=j===void 0?l<E?1:-1:m(j),r(l,E,j,O)}}},function(a,A){var e=Math.ceil,r=Math.max;a.exports=function(p,m,O,l){for(var E=-1,j=r(e((m-p)/(O||1)),0),y=Array(j);j--;)y[l?j:++E]=p,p+=O;return y}},function(a,A,e){var r=e(139),p=e(412),m=e(110),O=e(111),l=m(function(E,j){if(E==null)return[];var y=j.length;return y>1&&O(E,j[0],j[1])?j=[]:y>2&&O(j[0],j[1],j[2])&&(j=[j[0]]),p(E,r(j,1),[])});a.exports=l},function(a,A,e){var r=e(109),p=e(107),m=e(54),O=e(198),l=e(413),E=e(103),j=e(414),y=e(66),n=e(26);a.exports=function(s,d,M){d=d.length?r(d,function(v){return n(v)?function(x){return p(x,v.length===1?v[0]:v)}:v}):[y];var S=-1;d=r(d,E(m));var T=O(s,function(v,x,C){return{criteria:r(d,function(N){return N(v)}),index:++S,value:v}});return l(T,function(v,x){return j(v,x,M)})}},function(a,A){a.exports=function(e,r){var p=e.length;for(e.sort(r);p--;)e[p]=e[p].value;return e}},function(a,A,e){var r=e(415);a.exports=function(p,m,O){for(var l=-1,E=p.criteria,j=m.criteria,y=E.length,n=O.length;++l<y;){var s=r(E[l],j[l]);if(s)return l>=n?s:s*(O[l]=="desc"?-1:1)}return p.index-m.index}},function(a,A,e){var r=e(75);a.exports=function(p,m){if(p!==m){var O=p!==void 0,l=p===null,E=p==p,j=r(p),y=m!==void 0,n=m===null,s=m==m,d=r(m);if(!n&&!d&&!j&&p>m||j&&y&&s&&!n&&!d||l&&y&&s||!O&&s||!E)return 1;if(!l&&!j&&!d&&p<m||d&&O&&E&&!l&&!j||n&&O&&E||!y&&E||!s)return-1}return 0}},function(a,A,e){var r=e(191),p=0;a.exports=function(m){var O=++p;return r(m)+O}},function(a,A,e){var r=e(100),p=e(418);a.exports=function(m,O){return p(m||[],O||[],r)}},function(a,A){a.exports=function(e,r,p){for(var m=-1,O=e.length,l=r.length,E={};++m<O;){var j=m<l?r[m]:void 0;p(E,e[m],j)}return E}},function(a,A,e){"use strict";var r=e(24),p=e(420);a.exports={run:function(O){var l=O.graph().acyclicer==="greedy"?p(O,function(E){return function(j){return E.edge(j).weight}}(O)):function(E){var j=[],y={},n={};function s(d){r.has(n,d)||(n[d]=!0,y[d]=!0,r.forEach(E.outEdges(d),function(M){r.has(y,M.w)?j.push(M):s(M.w)}),delete y[d])}return r.forEach(E.nodes(),s),j}(O);r.forEach(l,function(E){var j=O.edge(E);O.removeEdge(E),j.forwardName=E.name,j.reversed=!0,O.setEdge(E.w,E.v,j,r.uniqueId("rev"))})},undo:function(O){r.forEach(O.edges(),function(l){var E=O.edge(l);if(E.reversed){O.removeEdge(l);var j=E.forwardName;delete E.reversed,delete E.forwardName,O.setEdge(l.w,l.v,E,j)}})}}},function(a,A,e){var r=e(24),p=e(46).Graph,m=e(421);a.exports=function(j,y){if(j.nodeCount()<=1)return[];var n=function(d,M){var S=new p,T=0,v=0;r.forEach(d.nodes(),function(N){S.setNode(N,{v:N,in:0,out:0})}),r.forEach(d.edges(),function(N){var X=S.edge(N.v,N.w)||0,tt=M(N),it=X+tt;S.setEdge(N.v,N.w,it),v=Math.max(v,S.node(N.v).out+=tt),T=Math.max(T,S.node(N.w).in+=tt)});var x=r.range(v+T+3).map(function(){return new m}),C=T+1;return r.forEach(S.nodes(),function(N){E(x,C,S.node(N))}),{graph:S,buckets:x,zeroIdx:C}}(j,y||O),s=function(d,M,S){for(var T,v=[],x=M[M.length-1],C=M[0];d.nodeCount();){for(;T=C.dequeue();)l(d,M,S,T);for(;T=x.dequeue();)l(d,M,S,T);if(d.nodeCount()){for(var N=M.length-2;N>0;--N)if(T=M[N].dequeue()){v=v.concat(l(d,M,S,T,!0));break}}}return v}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(s,function(d){return j.outEdges(d.v,d.w)}),!0)};var O=r.constant(1);function l(j,y,n,s,d){var M=d?[]:void 0;return r.forEach(j.inEdges(s.v),function(S){var T=j.edge(S),v=j.node(S.v);d&&M.push({v:S.v,w:S.w}),v.out-=T,E(y,n,v)}),r.forEach(j.outEdges(s.v),function(S){var T=j.edge(S),v=S.w,x=j.node(v);x.in-=T,E(y,n,x)}),j.removeNode(s.v),M}function E(j,y,n){n.out?n.in?j[n.out-n.in+y].enqueue(n):j[j.length-1].enqueue(n):j[0].enqueue(n)}},function(a,A){function e(){var m={};m._next=m._prev=m,this._sentinel=m}function r(m){m._prev._next=m._next,m._next._prev=m._prev,delete m._next,delete m._prev}function p(m,O){if(m!=="_next"&&m!=="_prev")return O}a.exports=e,e.prototype.dequeue=function(){var m=this._sentinel,O=m._prev;if(O!==m)return r(O),O},e.prototype.enqueue=function(m){var O=this._sentinel;m._prev&&m._next&&r(m),m._next=O._next,O._next._prev=m,O._next=m,m._prev=O},e.prototype.toString=function(){for(var m=[],O=this._sentinel,l=O._prev;l!==O;)m.push(JSON.stringify(l,p)),l=l._prev;return"["+m.join(", ")+"]"}},function(a,A,e){"use strict";var r=e(24),p=e(37);a.exports={run:function(O){O.graph().dummyChains=[],r.forEach(O.edges(),function(l){(function(E,j){var y,n,s,d=j.v,M=E.node(d).rank,S=j.w,T=E.node(S).rank,v=j.name,x=E.edge(j),C=x.labelRank;if(T!==M+1){for(E.removeEdge(j),s=0,++M;M<T;++s,++M)x.points=[],n={width:0,height:0,edgeLabel:x,edgeObj:j,rank:M},y=p.addDummyNode(E,"edge",n,"_d"),M===C&&(n.width=x.width,n.height=x.height,n.dummy="edge-label",n.labelpos=x.labelpos),E.setEdge(d,y,{weight:x.weight},v),s===0&&E.graph().dummyChains.push(y),d=y;E.setEdge(d,S,{weight:x.weight},v)}})(O,l)})},undo:function(O){r.forEach(O.graph().dummyChains,function(l){var E,j=O.node(l),y=j.edgeLabel;for(O.setEdge(j.edgeObj,y);j.dummy;)E=O.successors(l)[0],O.removeNode(l),y.points.push({x:j.x,y:j.y}),j.dummy==="edge-label"&&(y.x=j.x,y.y=j.y,y.width=j.width,y.height=j.height),l=E,j=O.node(l)})}}},function(a,A,e){"use strict";var r=e(112).longestPath,p=e(216),m=e(424);a.exports=function(E){switch(E.graph().ranker){case"network-simplex":l(E);break;case"tight-tree":(function(j){r(j),p(j)})(E);break;case"longest-path":O(E);break;default:l(E)}};var O=r;function l(E){m(E)}},function(a,A,e){"use strict";var r=e(24),p=e(216),m=e(112).slack,O=e(112).longestPath,l=e(46).alg.preorder,E=e(46).alg.postorder,j=e(37).simplify;function y(C){C=j(C),O(C);var N,X=p(C);for(d(X),n(X,C);N=S(X);)v(X,C,N,T(X,C,N))}function n(C,N){var X=E(C,C.nodes());X=X.slice(0,X.length-1),r.forEach(X,function(tt){(function(it,pt,ft){var Ot=it.node(ft).parent;it.edge(ft,Ot).cutvalue=s(it,pt,ft)})(C,N,tt)})}function s(C,N,X){var tt=C.node(X).parent,it=!0,pt=N.edge(X,tt),ft=0;return pt||(it=!1,pt=N.edge(tt,X)),ft=pt.weight,r.forEach(N.nodeEdges(X),function(Ot){var wt,xt,lt=Ot.v===X,Vt=lt?Ot.w:Ot.v;if(Vt!==tt){var Lt=lt===it,Et=N.edge(Ot).weight;if(ft+=Lt?Et:-Et,wt=X,xt=Vt,C.hasEdge(wt,xt)){var J=C.edge(X,Vt).cutvalue;ft+=Lt?-J:J}}}),ft}function d(C,N){arguments.length<2&&(N=C.nodes()[0]),M(C,{},1,N)}function M(C,N,X,tt,it){var pt=X,ft=C.node(tt);return N[tt]=!0,r.forEach(C.neighbors(tt),function(Ot){r.has(N,Ot)||(X=M(C,N,X,Ot,tt))}),ft.low=pt,ft.lim=X++,it?ft.parent=it:delete ft.parent,X}function S(C){return r.find(C.edges(),function(N){return C.edge(N).cutvalue<0})}function T(C,N,X){var tt=X.v,it=X.w;N.hasEdge(tt,it)||(tt=X.w,it=X.v);var pt=C.node(tt),ft=C.node(it),Ot=pt,wt=!1;pt.lim>ft.lim&&(Ot=ft,wt=!0);var xt=r.filter(N.edges(),function(lt){return wt===x(C,C.node(lt.v),Ot)&&wt!==x(C,C.node(lt.w),Ot)});return r.minBy(xt,function(lt){return m(N,lt)})}function v(C,N,X,tt){var it=X.v,pt=X.w;C.removeEdge(it,pt),C.setEdge(tt.v,tt.w,{}),d(C),n(C,N),function(ft,Ot){var wt=r.find(ft.nodes(),function(lt){return!Ot.node(lt).parent}),xt=l(ft,wt);xt=xt.slice(1),r.forEach(xt,function(lt){var Vt=ft.node(lt).parent,Lt=Ot.edge(lt,Vt),Et=!1;Lt||(Lt=Ot.edge(Vt,lt),Et=!0),Ot.node(lt).rank=Ot.node(Vt).rank+(Et?Lt.minlen:-Lt.minlen)})}(C,N)}function x(C,N,X){return X.low<=N.lim&&N.lim<=X.lim}a.exports=y,y.initLowLimValues=d,y.initCutValues=n,y.calcCutValue=s,y.leaveEdge=S,y.enterEdge=T,y.exchangeEdges=v},function(a,A,e){var r=e(24);a.exports=function(p){var m=function(O){var l={},E=0;function j(y){var n=E;r.forEach(O.children(y),j),l[y]={low:n,lim:E++}}return r.forEach(O.children(),j),l}(p);r.forEach(p.graph().dummyChains,function(O){for(var l=p.node(O),E=l.edgeObj,j=function(S,T,v,x){var C,N,X=[],tt=[],it=Math.min(T[v].low,T[x].low),pt=Math.max(T[v].lim,T[x].lim);C=v;do C=S.parent(C),X.push(C);while(C&&(T[C].low>it||pt>T[C].lim));for(N=C,C=x;(C=S.parent(C))!==N;)tt.push(C);return{path:X.concat(tt.reverse()),lca:N}}(p,m,E.v,E.w),y=j.path,n=j.lca,s=0,d=y[s],M=!0;O!==E.w;){if(l=p.node(O),M){for(;(d=y[s])!==n&&p.node(d).maxRank<l.rank;)s++;d===n&&(M=!1)}if(!M){for(;s<y.length-1&&p.node(d=y[s+1]).minRank<=l.rank;)s++;d=y[s]}p.setParent(O,d),O=p.successors(O)[0]}})}},function(a,A,e){var r=e(24),p=e(37);a.exports={run:function(O){var l=p.addDummyNode(O,"root",{},"_root"),E=function(s){var d={};return r.forEach(s.children(),function(M){(function S(T,v){var x=s.children(T);x&&x.length&&r.forEach(x,function(C){S(C,v+1)}),d[T]=v})(M,1)}),d}(O),j=r.max(r.values(E))-1,y=2*j+1;O.graph().nestingRoot=l,r.forEach(O.edges(),function(s){O.edge(s).minlen*=y});var n=function(s){return r.reduce(s.edges(),function(d,M){return d+s.edge(M).weight},0)}(O)+1;r.forEach(O.children(),function(s){(function d(M,S,T,v,x,C,N){var X=M.children(N);if(!X.length)return void(N!==S&&M.setEdge(S,N,{weight:0,minlen:T}));var tt=p.addBorderNode(M,"_bt"),it=p.addBorderNode(M,"_bb"),pt=M.node(N);M.setParent(tt,N),pt.borderTop=tt,M.setParent(it,N),pt.borderBottom=it,r.forEach(X,function(ft){d(M,S,T,v,x,C,ft);var Ot=M.node(ft),wt=Ot.borderTop?Ot.borderTop:ft,xt=Ot.borderBottom?Ot.borderBottom:ft,lt=Ot.borderTop?v:2*v,Vt=wt!==xt?1:x-C[N]+1;M.setEdge(tt,wt,{weight:lt,minlen:Vt,nestingEdge:!0}),M.setEdge(xt,it,{weight:lt,minlen:Vt,nestingEdge:!0})}),M.parent(N)||M.setEdge(S,tt,{weight:0,minlen:x+C[N]})})(O,l,y,n,j,E,s)}),O.graph().nodeRankFactor=y},cleanup:function(O){var l=O.graph();O.removeNode(l.nestingRoot),delete l.nestingRoot,r.forEach(O.edges(),function(E){O.edge(E).nestingEdge&&O.removeEdge(E)})}}},function(a,A,e){var r=e(24),p=e(37);function m(O,l,E,j,y,n){var s={width:0,height:0,rank:n,borderType:l},d=y[l][n-1],M=p.addDummyNode(O,"border",s,E);y[l][n]=M,O.setParent(M,j),d&&O.setEdge(d,M,{weight:1})}a.exports=function(O){r.forEach(O.children(),function l(E){var j=O.children(E),y=O.node(E);if(j.length&&r.forEach(j,l),r.has(y,"minRank")){y.borderLeft=[],y.borderRight=[];for(var n=y.minRank,s=y.maxRank+1;n<s;++n)m(O,"borderLeft","_bl",E,y,n),m(O,"borderRight","_br",E,y,n)}})}},function(a,A,e){"use strict";var r=e(24);function p(E){r.forEach(E.nodes(),function(j){m(E.node(j))}),r.forEach(E.edges(),function(j){m(E.edge(j))})}function m(E){var j=E.width;E.width=E.height,E.height=j}function O(E){E.y=-E.y}function l(E){var j=E.x;E.x=E.y,E.y=j}a.exports={adjust:function(j){var y=j.graph().rankdir.toLowerCase();y!=="lr"&&y!=="rl"||p(j)},undo:function(j){var y=j.graph().rankdir.toLowerCase();y!=="bt"&&y!=="rl"||function(n){r.forEach(n.nodes(),function(s){O(n.node(s))}),r.forEach(n.edges(),function(s){var d=n.edge(s);r.forEach(d.points,O),r.has(d,"y")&&O(d)})}(j),y!=="lr"&&y!=="rl"||(function(n){r.forEach(n.nodes(),function(s){l(n.node(s))}),r.forEach(n.edges(),function(s){var d=n.edge(s);r.forEach(d.points,l),r.has(d,"x")&&l(d)})}(j),p(j))}}},function(a,A,e){"use strict";var r=e(24),p=e(430),m=e(431),O=e(432),l=e(436),E=e(437),j=e(46).Graph,y=e(37);function n(M,S,T){return r.map(S,function(v){return l(M,v,T)})}function s(M,S){var T=new j;r.forEach(M,function(v){var x=v.graph().root,C=O(v,x,T,S);r.forEach(C.vs,function(N,X){v.node(N).order=X}),E(v,T,C.vs)})}function d(M,S){r.forEach(S,function(T){r.forEach(T,function(v,x){M.node(v).order=x})})}a.exports=function(M){var S=y.maxRank(M),T=n(M,r.range(1,S+1),"inEdges"),v=n(M,r.range(S-1,-1,-1),"outEdges"),x=p(M);d(M,x);for(var C,N=Number.POSITIVE_INFINITY,X=0,tt=0;tt<4;++X,++tt){s(X%2?T:v,X%4>=2),x=y.buildLayerMatrix(M);var it=m(M,x);it<N&&(tt=0,C=r.cloneDeep(x),N=it)}d(M,C)}},function(a,A,e){"use strict";var r=e(24);a.exports=function(p){var m={},O=r.filter(p.nodes(),function(y){return!p.children(y).length}),l=r.max(r.map(O,function(y){return p.node(y).rank})),E=r.map(r.range(l+1),function(){return[]}),j=r.sortBy(O,function(y){return p.node(y).rank});return r.forEach(j,function y(n){if(!r.has(m,n)){m[n]=!0;var s=p.node(n);E[s.rank].push(n),r.forEach(p.successors(n),y)}}),E}},function(a,A,e){"use strict";var r=e(24);function p(m,O,l){for(var E=r.zipObject(l,r.map(l,function(M,S){return S})),j=r.flatten(r.map(O,function(M){return r.sortBy(r.map(m.outEdges(M),function(S){return{pos:E[S.w],weight:m.edge(S).weight}}),"pos")}),!0),y=1;y<l.length;)y<<=1;var n=2*y-1;y-=1;var s=r.map(new Array(n),function(){return 0}),d=0;return r.forEach(j.forEach(function(M){var S=M.pos+y;s[S]+=M.weight;for(var T=0;S>0;)S%2&&(T+=s[S+1]),s[S=S-1>>1]+=M.weight;d+=M.weight*T})),d}a.exports=function(m,O){for(var l=0,E=1;E<O.length;++E)l+=p(m,O[E-1],O[E]);return l}},function(a,A,e){var r=e(24),p=e(433),m=e(434),O=e(435);a.exports=function l(E,j,y,n){var s=E.children(j),d=E.node(j),M=d?d.borderLeft:void 0,S=d?d.borderRight:void 0,T={};M&&(s=r.filter(s,function(tt){return tt!==M&&tt!==S}));var v=p(E,s);r.forEach(v,function(tt){if(E.children(tt.v).length){var it=l(E,tt.v,y,n);T[tt.v]=it,r.has(it,"barycenter")&&(pt=tt,ft=it,r.isUndefined(pt.barycenter)?(pt.barycenter=ft.barycenter,pt.weight=ft.weight):(pt.barycenter=(pt.barycenter*pt.weight+ft.barycenter*ft.weight)/(pt.weight+ft.weight),pt.weight+=ft.weight))}var pt,ft});var x=m(v,y);(function(tt,it){r.forEach(tt,function(pt){pt.vs=r.flatten(pt.vs.map(function(ft){return it[ft]?it[ft].vs:ft}),!0)})})(x,T);var C=O(x,n);if(M&&(C.vs=r.flatten([M,C.vs,S],!0),E.predecessors(M).length)){var N=E.node(E.predecessors(M)[0]),X=E.node(E.predecessors(S)[0]);r.has(C,"barycenter")||(C.barycenter=0,C.weight=0),C.barycenter=(C.barycenter*C.weight+N.order+X.order)/(C.weight+2),C.weight+=2}return C}},function(a,A,e){var r=e(24);a.exports=function(p,m){return r.map(m,function(O){var l=p.inEdges(O);if(l.length){var E=r.reduce(l,function(j,y){var n=p.edge(y),s=p.node(y.v);return{sum:j.sum+n.weight*s.order,weight:j.weight+n.weight}},{sum:0,weight:0});return{v:O,barycenter:E.sum/E.weight,weight:E.weight}}return{v:O}})}},function(a,A,e){"use strict";var r=e(24);a.exports=function(p,m){var O={};return r.forEach(p,function(l,E){var j=O[l.v]={indegree:0,in:[],out:[],vs:[l.v],i:E};r.isUndefined(l.barycenter)||(j.barycenter=l.barycenter,j.weight=l.weight)}),r.forEach(m.edges(),function(l){var E=O[l.v],j=O[l.w];r.isUndefined(E)||r.isUndefined(j)||(j.indegree++,E.out.push(O[l.w]))}),function(l){var E=[];function j(s){return function(d){d.merged||(r.isUndefined(d.barycenter)||r.isUndefined(s.barycenter)||d.barycenter>=s.barycenter)&&function(M,S){var T=0,v=0;M.weight&&(T+=M.barycenter*M.weight,v+=M.weight),S.weight&&(T+=S.barycenter*S.weight,v+=S.weight),M.vs=S.vs.concat(M.vs),M.barycenter=T/v,M.weight=v,M.i=Math.min(S.i,M.i),S.merged=!0}(s,d)}}function y(s){return function(d){d.in.push(s),--d.indegree==0&&l.push(d)}}for(;l.length;){var n=l.pop();E.push(n),r.forEach(n.in.reverse(),j(n)),r.forEach(n.out,y(n))}return r.map(r.filter(E,function(s){return!s.merged}),function(s){return r.pick(s,["vs","i","barycenter","weight"])})}(r.filter(O,function(l){return!l.indegree}))}},function(a,A,e){var r=e(24),p=e(37);function m(O,l,E){for(var j;l.length&&(j=r.last(l)).i<=E;)l.pop(),O.push(j.vs),E++;return E}a.exports=function(O,l){var E=p.partition(O,function(v){return r.has(v,"barycenter")}),j=E.lhs,y=r.sortBy(E.rhs,function(v){return-v.i}),n=[],s=0,d=0,M=0;j.sort((S=!!l,function(v,x){return v.barycenter<x.barycenter?-1:v.barycenter>x.barycenter?1:S?x.i-v.i:v.i-x.i})),M=m(n,y,M),r.forEach(j,function(v){M+=v.vs.length,n.push(v.vs),s+=v.barycenter*v.weight,d+=v.weight,M=m(n,y,M)});var S,T={vs:r.flatten(n,!0)};return d&&(T.barycenter=s/d,T.weight=d),T}},function(a,A,e){var r=e(24),p=e(46).Graph;a.exports=function(m,O,l){var E=function(y){for(var n;y.hasNode(n=r.uniqueId("_root")););return n}(m),j=new p({compound:!0}).setGraph({root:E}).setDefaultNodeLabel(function(y){return m.node(y)});return r.forEach(m.nodes(),function(y){var n=m.node(y),s=m.parent(y);(n.rank===O||n.minRank<=O&&O<=n.maxRank)&&(j.setNode(y),j.setParent(y,s||E),r.forEach(m[l](y),function(d){var M=d.v===y?d.w:d.v,S=j.edge(M,y),T=r.isUndefined(S)?0:S.weight;j.setEdge(M,y,{weight:m.edge(d).weight+T})}),r.has(n,"minRank")&&j.setNode(y,{borderLeft:n.borderLeft[O],borderRight:n.borderRight[O]}))}),j}},function(a,A,e){var r=e(24);a.exports=function(p,m,O){var l,E={};r.forEach(O,function(j){for(var y,n,s=p.parent(j);s;){if((y=p.parent(s))?(n=E[y],E[y]=s):(n=l,l=s),n&&n!==s)return void m.setEdge(n,s);s=y}})}},function(a,A,e){"use strict";var r=e(24),p=e(37),m=e(439).positionX;a.exports=function(O){(function(l){var E=p.buildLayerMatrix(l),j=l.graph().ranksep,y=0;r.forEach(E,function(n){var s=r.max(r.map(n,function(d){return l.node(d).height}));r.forEach(n,function(d){l.node(d).y=y+s/2}),y+=s+j})})(O=p.asNonCompoundGraph(O)),r.forEach(m(O),function(l,E){O.node(E).x=l})}},function(a,A,e){"use strict";var r=e(24),p=e(46).Graph,m=e(37);function O(S,T){var v={};return r.reduce(T,function(x,C){var N=0,X=0,tt=x.length,it=r.last(C);return r.forEach(C,function(pt,ft){var Ot=function(xt,lt){if(xt.node(lt).dummy)return r.find(xt.predecessors(lt),function(Vt){return xt.node(Vt).dummy})}(S,pt),wt=Ot?S.node(Ot).order:tt;(Ot||pt===it)&&(r.forEach(C.slice(X,ft+1),function(xt){r.forEach(S.predecessors(xt),function(lt){var Vt=S.node(lt),Lt=Vt.order;!(Lt<N||wt<Lt)||Vt.dummy&&S.node(xt).dummy||E(v,lt,xt)})}),X=ft+1,N=wt)}),C}),v}function l(S,T){var v={};function x(C,N,X,tt,it){var pt;r.forEach(r.range(N,X),function(ft){pt=C[ft],S.node(pt).dummy&&r.forEach(S.predecessors(pt),function(Ot){var wt=S.node(Ot);wt.dummy&&(wt.order<tt||wt.order>it)&&E(v,Ot,pt)})})}return r.reduce(T,function(C,N){var X,tt=-1,it=0;return r.forEach(N,function(pt,ft){if(S.node(pt).dummy==="border"){var Ot=S.predecessors(pt);Ot.length&&(X=S.node(Ot[0]).order,x(N,it,ft,tt,X),it=ft,tt=X)}x(N,it,N.length,X,C.length)}),N}),v}function E(S,T,v){if(T>v){var x=T;T=v,v=x}var C=S[T];C||(S[T]=C={}),C[v]=!0}function j(S,T,v){if(T>v){var x=T;T=v,v=x}return r.has(S[T],v)}function y(S,T,v,x){var C={},N={},X={};return r.forEach(T,function(tt){r.forEach(tt,function(it,pt){C[it]=it,N[it]=it,X[it]=pt})}),r.forEach(T,function(tt){var it=-1;r.forEach(tt,function(pt){var ft=x(pt);if(ft.length)for(var Ot=((ft=r.sortBy(ft,function(Vt){return X[Vt]})).length-1)/2,wt=Math.floor(Ot),xt=Math.ceil(Ot);wt<=xt;++wt){var lt=ft[wt];N[pt]===pt&&it<X[lt]&&!j(v,pt,lt)&&(N[lt]=pt,N[pt]=C[pt]=C[lt],it=X[lt])}})}),{root:C,align:N}}function n(S,T,v,x,C){var N={},X=function(pt,ft,Ot,wt){var xt=new p,lt=pt.graph(),Vt=function(Lt,Et,J){return function(ht,vt,bt){var At,q=ht.node(vt),ct=ht.node(bt),ot=0;if(ot+=q.width/2,r.has(q,"labelpos"))switch(q.labelpos.toLowerCase()){case"l":At=-q.width/2;break;case"r":At=q.width/2}if(At&&(ot+=J?At:-At),At=0,ot+=(q.dummy?Et:Lt)/2,ot+=(ct.dummy?Et:Lt)/2,ot+=ct.width/2,r.has(ct,"labelpos"))switch(ct.labelpos.toLowerCase()){case"l":At=ct.width/2;break;case"r":At=-ct.width/2}return At&&(ot+=J?At:-At),At=0,ot}}(lt.nodesep,lt.edgesep,wt);return r.forEach(ft,function(Lt){var Et;r.forEach(Lt,function(J){var ht=Ot[J];if(xt.setNode(ht),Et){var vt=Ot[Et],bt=xt.edge(vt,ht);xt.setEdge(vt,ht,Math.max(Vt(pt,J,Et),bt||0))}Et=J})}),xt}(S,T,v,C),tt=C?"borderLeft":"borderRight";function it(pt,ft){for(var Ot=X.nodes(),wt=Ot.pop(),xt={};wt;)xt[wt]?pt(wt):(xt[wt]=!0,Ot.push(wt),Ot=Ot.concat(ft(wt))),wt=Ot.pop()}return it(function(pt){N[pt]=X.inEdges(pt).reduce(function(ft,Ot){return Math.max(ft,N[Ot.v]+X.edge(Ot))},0)},X.predecessors.bind(X)),it(function(pt){var ft=X.outEdges(pt).reduce(function(wt,xt){return Math.min(wt,N[xt.w]-X.edge(xt))},Number.POSITIVE_INFINITY),Ot=S.node(pt);ft!==Number.POSITIVE_INFINITY&&Ot.borderType!==tt&&(N[pt]=Math.max(N[pt],ft))},X.successors.bind(X)),r.forEach(x,function(pt){N[pt]=N[v[pt]]}),N}function s(S,T){return r.minBy(r.values(T),function(v){var x=Number.NEGATIVE_INFINITY,C=Number.POSITIVE_INFINITY;return r.forIn(v,function(N,X){var tt=function(it,pt){return it.node(pt).width}(S,X)/2;x=Math.max(N+tt,x),C=Math.min(N-tt,C)}),x-C})}function d(S,T){var v=r.values(T),x=r.min(v),C=r.max(v);r.forEach(["u","d"],function(N){r.forEach(["l","r"],function(X){var tt,it=N+X,pt=S[it];if(pt!==T){var ft=r.values(pt);(tt=X==="l"?x-r.min(ft):C-r.max(ft))&&(S[it]=r.mapValues(pt,function(Ot){return Ot+tt}))}})})}function M(S,T){return r.mapValues(S.ul,function(v,x){if(T)return S[T.toLowerCase()][x];var C=r.sortBy(r.map(S,x));return(C[1]+C[2])/2})}a.exports={positionX:function(T){var v,x=m.buildLayerMatrix(T),C=r.merge(O(T,x),l(T,x)),N={};r.forEach(["u","d"],function(tt){v=tt==="u"?x:r.values(x).reverse(),r.forEach(["l","r"],function(it){it==="r"&&(v=r.map(v,function(wt){return r.values(wt).reverse()}));var pt=(tt==="u"?T.predecessors:T.successors).bind(T),ft=y(T,v,C,pt),Ot=n(T,v,ft.root,ft.align,it==="r");it==="r"&&(Ot=r.mapValues(Ot,function(wt){return-wt})),N[tt+it]=Ot})});var X=s(T,N);return d(N,X),M(N,T.graph().align)},findType1Conflicts:O,findType2Conflicts:l,addConflict:E,hasConflict:j,verticalAlignment:y,horizontalCompaction:n,alignCoordinates:d,findSmallestWidthAlignment:s,balance:M}},function(a,A,e){var r=e(24),p=e(37),m=e(46).Graph;a.exports={debugOrdering:function(l){var E=p.buildLayerMatrix(l),j=new m({compound:!0,multigraph:!0}).setGraph({});return r.forEach(l.nodes(),function(y){j.setNode(y,{label:y}),j.setParent(y,"layer"+l.node(y).rank)}),r.forEach(l.edges(),function(y){j.setEdge(y.v,y.w,{},y.name)}),r.forEach(E,function(y,n){var s="layer"+n;j.setNode(s,{rank:"same"}),r.reduce(y,function(d,M){return j.setEdge(d,M,{style:"invis"}),M})}),j}}},function(a,A){a.exports="0.8.5"},function(a,A,e){(function(r){function p(O){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(O)}var m=function(O){"use strict";var l=Object.prototype,E=l.hasOwnProperty,j=typeof Symbol=="function"?Symbol:{},y=j.iterator||"@@iterator",n=j.asyncIterator||"@@asyncIterator",s=j.toStringTag||"@@toStringTag";function d(Et,J,ht){return Object.defineProperty(Et,J,{value:ht,enumerable:!0,configurable:!0,writable:!0}),Et[J]}try{d({},"")}catch(Et){d=function(ht,vt,bt){return ht[vt]=bt}}function M(Et,J,ht,vt){var bt=J&&J.prototype instanceof v?J:v,At=Object.create(bt.prototype),q=new lt(vt||[]);return At._invoke=function(ct,ot,_){var P="suspendedStart";return function(Y,k){if(P==="executing")throw new Error("Generator is already running");if(P==="completed"){if(Y==="throw")throw k;return Lt()}for(_.method=Y,_.arg=k;;){var h=_.delegate;if(h){var g=Ot(h,_);if(g){if(g===T)continue;return g}}if(_.method==="next")_.sent=_._sent=_.arg;else if(_.method==="throw"){if(P==="suspendedStart")throw P="completed",_.arg;_.dispatchException(_.arg)}else _.method==="return"&&_.abrupt("return",_.arg);P="executing";var F=S(ct,ot,_);if(F.type==="normal"){if(P=_.done?"completed":"suspendedYield",F.arg===T)continue;return{value:F.arg,done:_.done}}F.type==="throw"&&(P="completed",_.method="throw",_.arg=F.arg)}}}(Et,ht,q),At}function S(Et,J,ht){try{return{type:"normal",arg:Et.call(J,ht)}}catch(vt){return{type:"throw",arg:vt}}}O.wrap=M;var T={};function v(){}function x(){}function C(){}var N={};N[y]=function(){return this};var X=Object.getPrototypeOf,tt=X&&X(X(Vt([])));tt&&tt!==l&&E.call(tt,y)&&(N=tt);var it=C.prototype=v.prototype=Object.create(N);function pt(Et){["next","throw","return"].forEach(function(J){d(Et,J,function(ht){return this._invoke(J,ht)})})}function ft(Et,J){var ht;this._invoke=function(vt,bt){function At(){return new J(function(q,ct){(function ot(_,P,Y,k){var h=S(Et[_],Et,P);if(h.type!=="throw"){var g=h.arg,F=g.value;return F&&p(F)==="object"&&E.call(F,"__await")?J.resolve(F.__await).then(function(V){ot("next",V,Y,k)},function(V){ot("throw",V,Y,k)}):J.resolve(F).then(function(V){g.value=V,Y(g)},function(V){return ot("throw",V,Y,k)})}k(h.arg)})(vt,bt,q,ct)})}return ht=ht?ht.then(At,At):At()}}function Ot(Et,J){var ht=Et.iterator[J.method];if(ht===void 0){if(J.delegate=null,J.method==="throw"){if(Et.iterator.return&&(J.method="return",J.arg=void 0,Ot(Et,J),J.method==="throw"))return T;J.method="throw",J.arg=new TypeError("The iterator does not provide a 'throw' method")}return T}var vt=S(ht,Et.iterator,J.arg);if(vt.type==="throw")return J.method="throw",J.arg=vt.arg,J.delegate=null,T;var bt=vt.arg;return bt?bt.done?(J[Et.resultName]=bt.value,J.next=Et.nextLoc,J.method!=="return"&&(J.method="next",J.arg=void 0),J.delegate=null,T):bt:(J.method="throw",J.arg=new TypeError("iterator result is not an object"),J.delegate=null,T)}function wt(Et){var J={tryLoc:Et[0]};1 in Et&&(J.catchLoc=Et[1]),2 in Et&&(J.finallyLoc=Et[2],J.afterLoc=Et[3]),this.tryEntries.push(J)}function xt(Et){var J=Et.completion||{};J.type="normal",delete J.arg,Et.completion=J}function lt(Et){this.tryEntries=[{tryLoc:"root"}],Et.forEach(wt,this),this.reset(!0)}function Vt(Et){if(Et){var J=Et[y];if(J)return J.call(Et);if(typeof Et.next=="function")return Et;if(!isNaN(Et.length)){var ht=-1,vt=function bt(){for(;++ht<Et.length;)if(E.call(Et,ht))return bt.value=Et[ht],bt.done=!1,bt;return bt.value=void 0,bt.done=!0,bt};return vt.next=vt}}return{next:Lt}}function Lt(){return{value:void 0,done:!0}}return x.prototype=it.constructor=C,C.constructor=x,x.displayName=d(C,s,"GeneratorFunction"),O.isGeneratorFunction=function(Et){var J=typeof Et=="function"&&Et.constructor;return!!J&&(J===x||(J.displayName||J.name)==="GeneratorFunction")},O.mark=function(Et){return Object.setPrototypeOf?Object.setPrototypeOf(Et,C):(Et.__proto__=C,d(Et,s,"GeneratorFunction")),Et.prototype=Object.create(it),Et},O.awrap=function(Et){return{__await:Et}},pt(ft.prototype),ft.prototype[n]=function(){return this},O.AsyncIterator=ft,O.async=function(Et,J,ht,vt,bt){bt===void 0&&(bt=Promise);var At=new ft(M(Et,J,ht,vt),bt);return O.isGeneratorFunction(J)?At:At.next().then(function(q){return q.done?q.value:At.next()})},pt(it),d(it,s,"Generator"),it[y]=function(){return this},it.toString=function(){return"[object Generator]"},O.keys=function(Et){var J=[];for(var ht in Et)J.push(ht);return J.reverse(),function vt(){for(;J.length;){var bt=J.pop();if(bt in Et)return vt.value=bt,vt.done=!1,vt}return vt.done=!0,vt}},O.values=Vt,lt.prototype={constructor:lt,reset:function(J){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(xt),!J)for(var ht in this)ht.charAt(0)==="t"&&E.call(this,ht)&&!isNaN(+ht.slice(1))&&(this[ht]=void 0)},stop:function(){this.done=!0;var J=this.tryEntries[0].completion;if(J.type==="throw")throw J.arg;return this.rval},dispatchException:function(J){if(this.done)throw J;var ht=this;function vt(_,P){return q.type="throw",q.arg=J,ht.next=_,P&&(ht.method="next",ht.arg=void 0),!!P}for(var bt=this.tryEntries.length-1;bt>=0;--bt){var At=this.tryEntries[bt],q=At.completion;if(At.tryLoc==="root")return vt("end");if(At.tryLoc<=this.prev){var ct=E.call(At,"catchLoc"),ot=E.call(At,"finallyLoc");if(ct&&ot){if(this.prev<At.catchLoc)return vt(At.catchLoc,!0);if(this.prev<At.finallyLoc)return vt(At.finallyLoc)}else if(ct){if(this.prev<At.catchLoc)return vt(At.catchLoc,!0)}else{if(!ot)throw new Error("try statement without catch or finally");if(this.prev<At.finallyLoc)return vt(At.finallyLoc)}}}},abrupt:function(J,ht){for(var vt=this.tryEntries.length-1;vt>=0;--vt){var bt=this.tryEntries[vt];if(bt.tryLoc<=this.prev&&E.call(bt,"finallyLoc")&&this.prev<bt.finallyLoc){var At=bt;break}}At&&(J==="break"||J==="continue")&&At.tryLoc<=ht&&ht<=At.finallyLoc&&(At=null);var q=At?At.completion:{};return q.type=J,q.arg=ht,At?(this.method="next",this.next=At.finallyLoc,T):this.complete(q)},complete:function(J,ht){if(J.type==="throw")throw J.arg;return J.type==="break"||J.type==="continue"?this.next=J.arg:J.type==="return"?(this.rval=this.arg=J.arg,this.method="return",this.next="end"):J.type==="normal"&&ht&&(this.next=ht),T},finish:function(J){for(var ht=this.tryEntries.length-1;ht>=0;--ht){var vt=this.tryEntries[ht];if(vt.finallyLoc===J)return this.complete(vt.completion,vt.afterLoc),xt(vt),T}},catch:function(J){for(var ht=this.tryEntries.length-1;ht>=0;--ht){var vt=this.tryEntries[ht];if(vt.tryLoc===J){var bt=vt.completion;if(bt.type==="throw"){var At=bt.arg;xt(vt)}return At}}throw new Error("illegal catch attempt")},delegateYield:function(J,ht,vt){return this.delegate={iterator:Vt(J),resultName:ht,nextLoc:vt},this.method==="next"&&(this.arg=void 0),T}},O}(p(r)==="object"?r.exports:{});try{regeneratorRuntime=m}catch(O){Function("r","regeneratorRuntime = r")(m)}}).call(this,e(86)(a))},function(a,A){a.exports=function(e){if(Array.isArray(e))return e}},function(a,A){a.exports=function(e,r){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e)){var p=[],m=!0,O=!1,l=void 0;try{for(var E,j=e[Symbol.iterator]();!(m=(E=j.next()).done)&&(p.push(E.value),!r||p.length!==r);m=!0);}catch(y){O=!0,l=y}finally{try{m||j.return==null||j.return()}finally{if(O)throw l}}return p}}},function(a,A){a.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},function(a,A,e){"use strict";function r(C){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N})(C)}var p=this&&this.__awaiter||function(C,N,X,tt){return new(X||(X=Promise))(function(it,pt){function ft(xt){try{wt(tt.next(xt))}catch(lt){pt(lt)}}function Ot(xt){try{wt(tt.throw(xt))}catch(lt){pt(lt)}}function wt(xt){var lt;xt.done?it(xt.value):(lt=xt.value,lt instanceof X?lt:new X(function(Vt){Vt(lt)})).then(ft,Ot)}wt((tt=tt.apply(C,N||[])).next())})},m=this&&this.__generator||function(C,N){var X,tt,it,pt,ft={label:0,sent:function(){if(1&it[0])throw it[1];return it[1]},trys:[],ops:[]};return pt={next:Ot(0),throw:Ot(1),return:Ot(2)},typeof Symbol=="function"&&(pt[Symbol.iterator]=function(){return this}),pt;function Ot(wt){return function(xt){return function(lt){if(X)throw new TypeError("Generator is already executing.");for(;ft;)try{if(X=1,tt&&(it=2&lt[0]?tt.return:lt[0]?tt.throw||((it=tt.return)&&it.call(tt),0):tt.next)&&!(it=it.call(tt,lt[1])).done)return it;switch(tt=0,it&&(lt=[2&lt[0],it.value]),lt[0]){case 0:case 1:it=lt;break;case 4:return ft.label++,{value:lt[1],done:!1};case 5:ft.label++,tt=lt[1],lt=[0];continue;case 7:lt=ft.ops.pop(),ft.trys.pop();continue;default:if(it=ft.trys,!((it=it.length>0&&it[it.length-1])||lt[0]!==6&&lt[0]!==2)){ft=0;continue}if(lt[0]===3&&(!it||lt[1]>it[0]&&lt[1]<it[3])){ft.label=lt[1];break}if(lt[0]===6&&ft.label<it[1]){ft.label=it[1],it=lt;break}if(it&&ft.label<it[2]){ft.label=it[2],ft.ops.push(lt);break}it[2]&&ft.ops.pop(),ft.trys.pop();continue}lt=N.call(C,ft)}catch(Vt){lt=[6,Vt],tt=0}finally{X=it=0}if(5&lt[0])throw lt[1];return{value:lt[0]?lt[1]:void 0,done:!0}}([wt,xt])}}};Object.defineProperty(A,"__esModule",{value:!0}),A.Container=void 0;var O=e(447),l=e(41),E=e(55),j=e(32),y=e(220),n=e(448),s=e(455),d=e(457),M=e(67),S=e(88),T=e(460),v=e(461),x=function(){function C(N){var X=N||{};if(r(X)!=="object")throw new Error(""+l.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(X.defaultScope===void 0)X.defaultScope=E.BindingScopeEnum.Transient;else if(X.defaultScope!==E.BindingScopeEnum.Singleton&&X.defaultScope!==E.BindingScopeEnum.Transient&&X.defaultScope!==E.BindingScopeEnum.Request)throw new Error(""+l.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(X.autoBindInjectable===void 0)X.autoBindInjectable=!1;else if(typeof X.autoBindInjectable!="boolean")throw new Error(""+l.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(X.skipBaseClassChecks===void 0)X.skipBaseClassChecks=!1;else if(typeof X.skipBaseClassChecks!="boolean")throw new Error(""+l.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:X.autoBindInjectable,defaultScope:X.defaultScope,skipBaseClassChecks:X.skipBaseClassChecks},this.id=M.id(),this._bindingDictionary=new v.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new y.MetadataReader}return C.merge=function(N,X){var tt=new C,it=n.getBindingDictionary(tt),pt=n.getBindingDictionary(N),ft=n.getBindingDictionary(X);function Ot(wt,xt){wt.traverse(function(lt,Vt){Vt.forEach(function(Lt){xt.add(Lt.serviceIdentifier,Lt.clone())})})}return Ot(pt,it),Ot(ft,it),tt},C.prototype.load=function(){for(var N=[],X=0;X<arguments.length;X++)N[X]=arguments[X];for(var tt=this._getContainerModuleHelpersFactory(),it=0,pt=N;it<pt.length;it++){var ft=pt[it],Ot=tt(ft.id);ft.registry(Ot.bindFunction,Ot.unbindFunction,Ot.isboundFunction,Ot.rebindFunction)}},C.prototype.loadAsync=function(){for(var N=[],X=0;X<arguments.length;X++)N[X]=arguments[X];return p(this,void 0,void 0,function(){var tt,it,pt,ft,Ot;return m(this,function(wt){switch(wt.label){case 0:tt=this._getContainerModuleHelpersFactory(),it=0,pt=N,wt.label=1;case 1:return it<pt.length?(ft=pt[it],Ot=tt(ft.id),[4,ft.registry(Ot.bindFunction,Ot.unbindFunction,Ot.isboundFunction,Ot.rebindFunction)]):[3,4];case 2:wt.sent(),wt.label=3;case 3:return it++,[3,1];case 4:return[2]}})})},C.prototype.unload=function(){for(var N=this,X=[],tt=0;tt<arguments.length;tt++)X[tt]=arguments[tt];var it=function(ft){return function(Ot){return Ot.moduleId===ft}};X.forEach(function(pt){var ft=it(pt.id);N._bindingDictionary.removeByCondition(ft)})},C.prototype.bind=function(N){var X=this.options.defaultScope||E.BindingScopeEnum.Transient,tt=new O.Binding(N,X);return this._bindingDictionary.add(N,tt),new d.BindingToSyntax(tt)},C.prototype.rebind=function(N){return this.unbind(N),this.bind(N)},C.prototype.unbind=function(N){try{this._bindingDictionary.remove(N)}catch(X){throw new Error(l.CANNOT_UNBIND+" "+S.getServiceIdentifierAsString(N))}},C.prototype.unbindAll=function(){this._bindingDictionary=new v.Lookup},C.prototype.isBound=function(N){var X=this._bindingDictionary.hasKey(N);return!X&&this.parent&&(X=this.parent.isBound(N)),X},C.prototype.isBoundNamed=function(N,X){return this.isBoundTagged(N,j.NAMED_TAG,X)},C.prototype.isBoundTagged=function(N,X,tt){var it=!1;if(this._bindingDictionary.hasKey(N)){var pt=this._bindingDictionary.get(N),ft=n.createMockRequest(this,N,X,tt);it=pt.some(function(Ot){return Ot.constraint(ft)})}return!it&&this.parent&&(it=this.parent.isBoundTagged(N,X,tt)),it},C.prototype.snapshot=function(){this._snapshots.push(T.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},C.prototype.restore=function(){var N=this._snapshots.pop();if(N===void 0)throw new Error(l.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=N.bindings,this._middleware=N.middleware},C.prototype.createChild=function(N){var X=new C(N||this.options);return X.parent=this,X},C.prototype.applyMiddleware=function(){for(var N=[],X=0;X<arguments.length;X++)N[X]=arguments[X];var tt=this._middleware?this._middleware:this._planAndResolve();this._middleware=N.reduce(function(it,pt){return pt(it)},tt)},C.prototype.applyCustomMetadataReader=function(N){this._metadataReader=N},C.prototype.get=function(N){return this._get(!1,!1,E.TargetTypeEnum.Variable,N)},C.prototype.getTagged=function(N,X,tt){return this._get(!1,!1,E.TargetTypeEnum.Variable,N,X,tt)},C.prototype.getNamed=function(N,X){return this.getTagged(N,j.NAMED_TAG,X)},C.prototype.getAll=function(N){return this._get(!0,!0,E.TargetTypeEnum.Variable,N)},C.prototype.getAllTagged=function(N,X,tt){return this._get(!1,!0,E.TargetTypeEnum.Variable,N,X,tt)},C.prototype.getAllNamed=function(N,X){return this.getAllTagged(N,j.NAMED_TAG,X)},C.prototype.resolve=function(N){var X=this.createChild();return X.bind(N).toSelf(),X.get(N)},C.prototype._getContainerModuleHelpersFactory=function(){var N=this,X=function(pt,ft){pt._binding.moduleId=ft},tt=function(pt){return function(ft){var Ot=N.rebind.bind(N)(ft);return X(Ot,pt),Ot}};return function(it){return{bindFunction:(pt=it,function(ft){var Ot=N.bind.bind(N)(ft);return X(Ot,pt),Ot}),isboundFunction:function(Ot){return N.isBound.bind(N)(Ot)},rebindFunction:tt(it),unbindFunction:function(Ot){N.unbind.bind(N)(Ot)}};var pt}},C.prototype._get=function(N,X,tt,it,pt,ft){var Ot=null,wt={avoidConstraints:N,contextInterceptor:function(lt){return lt},isMultiInject:X,key:pt,serviceIdentifier:it,targetType:tt,value:ft};if(this._middleware){if((Ot=this._middleware(wt))==null)throw new Error(l.INVALID_MIDDLEWARE_RETURN)}else Ot=this._planAndResolve()(wt);return Ot},C.prototype._planAndResolve=function(){var N=this;return function(X){var tt=n.plan(N._metadataReader,N,X.isMultiInject,X.targetType,X.serviceIdentifier,X.key,X.value,X.avoidConstraints);return tt=X.contextInterceptor(tt),s.resolve(tt)}},C}();A.Container=x},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Binding=void 0;var r=e(55),p=e(67),m=function(){function O(l,E){this.id=p.id(),this.activated=!1,this.serviceIdentifier=l,this.scope=E,this.type=r.BindingTypeEnum.Invalid,this.constraint=function(j){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return O.prototype.clone=function(){var l=new O(this.serviceIdentifier,this.scope);return l.activated=!1,l.implementationType=this.implementationType,l.dynamicValue=this.dynamicValue,l.scope=this.scope,l.type=this.type,l.factory=this.factory,l.provider=this.provider,l.constraint=this.constraint,l.onActivation=this.onActivation,l.cache=this.cache,l},O}();A.Binding=m},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.getBindingDictionary=A.createMockRequest=A.plan=void 0;var r=e(449),p=e(41),m=e(55),O=e(32),l=e(221),E=e(88),j=e(450),y=e(49),n=e(451),s=e(452),d=e(454),M=e(223);function S(x){return x._bindingDictionary}function T(x,C,N,X,tt){var it=v(N.container,tt.serviceIdentifier),pt=[];return it.length===r.BindingCount.NoBindingsAvailable&&N.container.options.autoBindInjectable&&typeof tt.serviceIdentifier=="function"&&x.getConstructorMetadata(tt.serviceIdentifier).compilerGeneratedMetadata&&(N.container.bind(tt.serviceIdentifier).toSelf(),it=v(N.container,tt.serviceIdentifier)),pt=C?it:it.filter(function(ft){var Ot=new d.Request(ft.serviceIdentifier,N,X,ft,tt);return ft.constraint(Ot)}),function(ft,Ot,wt,xt){switch(Ot.length){case r.BindingCount.NoBindingsAvailable:if(wt.isOptional())return Ot;var lt=E.getServiceIdentifierAsString(ft),Vt=p.NOT_REGISTERED;throw Vt+=E.listMetadataForTarget(lt,wt),Vt+=E.listRegisteredBindingsForServiceIdentifier(xt,lt,v),new Error(Vt);case r.BindingCount.OnlyOneBindingAvailable:if(!wt.isArray())return Ot;case r.BindingCount.MultipleBindingsAvailable:default:if(wt.isArray())return Ot;throw lt=E.getServiceIdentifierAsString(ft),Vt=p.AMBIGUOUS_MATCH+" "+lt,Vt+=E.listRegisteredBindingsForServiceIdentifier(xt,lt,v),new Error(Vt)}}(tt.serviceIdentifier,pt,tt,N.container),pt}function v(x,C){var N=[],X=S(x);return X.hasKey(C)?N=X.get(C):x.parent!==null&&(N=v(x.parent,C)),N}A.getBindingDictionary=S,A.plan=function(x,C,N,X,tt,it,pt,ft){ft===void 0&&(ft=!1);var Ot=new j.Context(C),wt=function(xt,lt,Vt,Lt,Et,J){var ht=xt?O.MULTI_INJECT_TAG:O.INJECT_TAG,vt=new y.Metadata(ht,Vt),bt=new M.Target(lt,Lt,Vt,vt);if(Et!==void 0){var At=new y.Metadata(Et,J);bt.metadata.push(At)}return bt}(N,X,tt,"",it,pt);try{return function xt(lt,Vt,Lt,Et,J,ht){var vt,bt;if(J===null){vt=T(lt,Vt,Et,null,ht),bt=new d.Request(Lt,Et,null,vt,ht);var At=new n.Plan(Et,bt);Et.addPlan(At)}else vt=T(lt,Vt,Et,J,ht),bt=J.addChildRequest(ht.serviceIdentifier,vt,ht);vt.forEach(function(q){var ct=null;if(ht.isArray())ct=bt.addChildRequest(q.serviceIdentifier,q,ht);else{if(q.cache)return;ct=bt}if(q.type===m.BindingTypeEnum.Instance&&q.implementationType!==null){var ot=s.getDependencies(lt,q.implementationType);if(!Et.container.options.skipBaseClassChecks){var _=s.getBaseClassDependencyCount(lt,q.implementationType);if(ot.length<_){var P=p.ARGUMENTS_LENGTH_MISMATCH(s.getFunctionName(q.implementationType));throw new Error(P)}}ot.forEach(function(Y){xt(lt,!1,Y.serviceIdentifier,Et,ct,Y)})}})}(x,ft,tt,Ot,null,wt),Ot}catch(xt){throw l.isStackOverflowExeption(xt)&&Ot.plan&&E.circularDependencyToException(Ot.plan.rootRequest),xt}},A.createMockRequest=function(x,C,N,X){var tt=new M.Target(m.TargetTypeEnum.Variable,"",C,new y.Metadata(N,X)),it=new j.Context(x);return new d.Request(C,it,null,[],tt)}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.BindingCount=void 0,A.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Context=void 0;var r=e(67),p=function(){function m(O){this.id=r.id(),this.container=O}return m.prototype.addPlan=function(O){this.plan=O},m.prototype.setCurrentRequest=function(O){this.currentRequest=O},m}();A.Context=p},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Plan=void 0;var r=function(m,O){this.parentContext=m,this.rootRequest=O};A.Plan=r},function(a,A,e){"use strict";var r=this&&this.__spreadArrays||function(){for(var d=0,M=0,S=arguments.length;M<S;M++)d+=arguments[M].length;var T=Array(d),v=0;for(M=0;M<S;M++)for(var x=arguments[M],C=0,N=x.length;C<N;C++,v++)T[v]=x[C];return T};Object.defineProperty(A,"__esModule",{value:!0}),A.getFunctionName=A.getBaseClassDependencyCount=A.getDependencies=void 0;var p=e(222),m=e(41),O=e(55),l=e(32),E=e(88);Object.defineProperty(A,"getFunctionName",{enumerable:!0,get:function(){return E.getFunctionName}});var j=e(223);function y(d,M,S,T){var v=d.getConstructorMetadata(S),x=v.compilerGeneratedMetadata;if(x===void 0){var C=m.MISSING_INJECTABLE_ANNOTATION+" "+M+".";throw new Error(C)}var N=v.userGeneratedMetadata,X=Object.keys(N),tt=function(pt,ft,Ot,wt,xt){for(var lt=[],Vt=0;Vt<xt;Vt++){var Lt=n(Vt,pt,ft,Ot,wt);Lt!==null&&lt.push(Lt)}return lt}(T,M,x,N,S.length===0&&X.length>0?X.length:S.length),it=function pt(ft,Ot){for(var wt=ft.getPropertiesMetadata(Ot),xt=[],lt=Object.keys(wt),Vt=0,Lt=lt;Vt<Lt.length;Vt++){var Et=Lt[Vt],J=wt[Et],ht=s(wt[Et]),vt=ht.targetName||Et,bt=ht.inject||ht.multiInject,At=new j.Target(O.TargetTypeEnum.ClassProperty,vt,bt);At.metadata=J,xt.push(At)}var q=Object.getPrototypeOf(Ot.prototype).constructor;if(q!==Object){var ct=pt(ft,q);xt=r(xt,ct)}return xt}(d,S);return r(tt,it)}function n(d,M,S,T,v){var x=v[d.toString()]||[],C=s(x),N=C.unmanaged!==!0,X=T[d],tt=C.inject||C.multiInject;if((X=tt||X)instanceof p.LazyServiceIdentifer&&(X=X.unwrap()),N){if(!M&&(X===Object||X===Function||X===void 0)){var it=m.MISSING_INJECT_ANNOTATION+" argument "+d+" in class "+S+".";throw new Error(it)}var pt=new j.Target(O.TargetTypeEnum.ConstructorArgument,C.targetName,X);return pt.metadata=x,pt}return null}function s(d){var M={};return d.forEach(function(S){M[S.key.toString()]=S.value}),{inject:M[l.INJECT_TAG],multiInject:M[l.MULTI_INJECT_TAG],targetName:M[l.NAME_TAG],unmanaged:M[l.UNMANAGED_TAG]}}A.getDependencies=function(d,M){return y(d,E.getFunctionName(M),M,!1)},A.getBaseClassDependencyCount=function d(M,S){var T=Object.getPrototypeOf(S.prototype).constructor;if(T!==Object){var v=y(M,E.getFunctionName(T),T,!0),x=v.map(function(X){return X.metadata.filter(function(tt){return tt.key===l.UNMANAGED_TAG})}),C=[].concat.apply([],x).length,N=v.length-C;return N>0?N:d(M,T)}return 0}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.QueryableString=void 0;var r=function(){function p(m){this.str=m}return p.prototype.startsWith=function(m){return this.str.indexOf(m)===0},p.prototype.endsWith=function(m){var O,l=m.split("").reverse().join("");return O=this.str.split("").reverse().join(""),this.startsWith.call({str:O},l)},p.prototype.contains=function(m){return this.str.indexOf(m)!==-1},p.prototype.equals=function(m){return this.str===m},p.prototype.value=function(){return this.str},p}();A.QueryableString=r},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Request=void 0;var r=e(67),p=function(){function m(O,l,E,j,y){this.id=r.id(),this.serviceIdentifier=O,this.parentContext=l,this.parentRequest=E,this.target=y,this.childRequests=[],this.bindings=Array.isArray(j)?j:[j],this.requestScope=E===null?new Map:null}return m.prototype.addChildRequest=function(O,l,E){var j=new m(O,this.parentContext,this,l,E);return this.childRequests.push(j),j},m}();A.Request=p},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.resolve=void 0;var r=e(41),p=e(55),m=e(221),O=e(88),l=e(456),E=function(y,n,s){try{return s()}catch(d){throw m.isStackOverflowExeption(d)?new Error(r.CIRCULAR_DEPENDENCY_IN_FACTORY(y,n.toString())):d}};A.resolve=function(j){return function y(n){return function(s){s.parentContext.setCurrentRequest(s);var d=s.bindings,M=s.childRequests,S=s.target&&s.target.isArray(),T=!(s.parentRequest&&s.parentRequest.target&&s.target&&s.parentRequest.target.matchesArray(s.target.serviceIdentifier));if(S&&T)return M.map(function(tt){return y(n)(tt)});var v=null;if(!s.target.isOptional()||d.length!==0){var x=d[0],C=x.scope===p.BindingScopeEnum.Singleton,N=x.scope===p.BindingScopeEnum.Request;if(C&&x.activated)return x.cache;if(N&&n!==null&&n.has(x.id))return n.get(x.id);if(x.type===p.BindingTypeEnum.ConstantValue)v=x.cache;else if(x.type===p.BindingTypeEnum.Function)v=x.cache;else if(x.type===p.BindingTypeEnum.Constructor)v=x.implementationType;else if(x.type===p.BindingTypeEnum.DynamicValue&&x.dynamicValue!==null)v=E("toDynamicValue",x.serviceIdentifier,function(){return x.dynamicValue(s.parentContext)});else if(x.type===p.BindingTypeEnum.Factory&&x.factory!==null)v=E("toFactory",x.serviceIdentifier,function(){return x.factory(s.parentContext)});else if(x.type===p.BindingTypeEnum.Provider&&x.provider!==null)v=E("toProvider",x.serviceIdentifier,function(){return x.provider(s.parentContext)});else{if(x.type!==p.BindingTypeEnum.Instance||x.implementationType===null){var X=O.getServiceIdentifierAsString(s.serviceIdentifier);throw new Error(r.INVALID_BINDING_TYPE+" "+X)}v=l.resolveInstance(x.implementationType,M,y(n))}return typeof x.onActivation=="function"&&(v=x.onActivation(s.parentContext,v)),C&&(x.cache=v,x.activated=!0),N&&n!==null&&!n.has(x.id)&&n.set(x.id,v),v}}}(j.plan.rootRequest.requestScope)(j.plan.rootRequest)}},function(a,A,e){"use strict";var r=this&&this.__spreadArrays||function(){for(var l=0,E=0,j=arguments.length;E<j;E++)l+=arguments[E].length;var y=Array(l),n=0;for(E=0;E<j;E++)for(var s=arguments[E],d=0,M=s.length;d<M;d++,n++)y[n]=s[d];return y};Object.defineProperty(A,"__esModule",{value:!0}),A.resolveInstance=void 0;var p=e(41),m=e(55),O=e(32);A.resolveInstance=function(l,E,j){var y,n,s=null;if(E.length>0){var d=E.filter(function(M){return M.target!==null&&M.target.type===m.TargetTypeEnum.ConstructorArgument}).map(j);n=d,s=function(M,S,T){var v=S.filter(function(C){return C.target!==null&&C.target.type===m.TargetTypeEnum.ClassProperty}),x=v.map(T);return v.forEach(function(C,N){var X;X=C.target.name.value();var tt=x[N];M[X]=tt}),M}(s=new((y=l).bind.apply(y,r([void 0],n))),E,j)}else s=new l;return function(M,S){if(Reflect.hasMetadata(O.POST_CONSTRUCT,M)){var T=Reflect.getMetadata(O.POST_CONSTRUCT,M);try{S[T.value]()}catch(v){throw new Error(p.POST_CONSTRUCT_ERROR(M.name,v.message))}}}(l,s),s}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.BindingToSyntax=void 0;var r=e(41),p=e(55),m=e(458),O=e(224),l=function(){function E(j){this._binding=j}return E.prototype.to=function(j){return this._binding.type=p.BindingTypeEnum.Instance,this._binding.implementationType=j,new m.BindingInWhenOnSyntax(this._binding)},E.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+r.INVALID_TO_SELF_VALUE);var j=this._binding.serviceIdentifier;return this.to(j)},E.prototype.toConstantValue=function(j){return this._binding.type=p.BindingTypeEnum.ConstantValue,this._binding.cache=j,this._binding.dynamicValue=null,this._binding.implementationType=null,new O.BindingWhenOnSyntax(this._binding)},E.prototype.toDynamicValue=function(j){return this._binding.type=p.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=j,this._binding.implementationType=null,new m.BindingInWhenOnSyntax(this._binding)},E.prototype.toConstructor=function(j){return this._binding.type=p.BindingTypeEnum.Constructor,this._binding.implementationType=j,new O.BindingWhenOnSyntax(this._binding)},E.prototype.toFactory=function(j){return this._binding.type=p.BindingTypeEnum.Factory,this._binding.factory=j,new O.BindingWhenOnSyntax(this._binding)},E.prototype.toFunction=function(j){if(typeof j!="function")throw new Error(r.INVALID_FUNCTION_BINDING);var y=this.toConstantValue(j);return this._binding.type=p.BindingTypeEnum.Function,y},E.prototype.toAutoFactory=function(j){return this._binding.type=p.BindingTypeEnum.Factory,this._binding.factory=function(y){return function(){return y.container.get(j)}},new O.BindingWhenOnSyntax(this._binding)},E.prototype.toProvider=function(j){return this._binding.type=p.BindingTypeEnum.Provider,this._binding.provider=j,new O.BindingWhenOnSyntax(this._binding)},E.prototype.toService=function(j){this.toDynamicValue(function(y){return y.container.get(j)})},E}();A.BindingToSyntax=l},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.BindingInWhenOnSyntax=void 0;var r=e(459),p=e(141),m=e(142),O=function(){function l(E){this._binding=E,this._bindingWhenSyntax=new m.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new p.BindingOnSyntax(this._binding),this._bindingInSyntax=new r.BindingInSyntax(E)}return l.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},l.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},l.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},l.prototype.when=function(E){return this._bindingWhenSyntax.when(E)},l.prototype.whenTargetNamed=function(E){return this._bindingWhenSyntax.whenTargetNamed(E)},l.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},l.prototype.whenTargetTagged=function(E,j){return this._bindingWhenSyntax.whenTargetTagged(E,j)},l.prototype.whenInjectedInto=function(E){return this._bindingWhenSyntax.whenInjectedInto(E)},l.prototype.whenParentNamed=function(E){return this._bindingWhenSyntax.whenParentNamed(E)},l.prototype.whenParentTagged=function(E,j){return this._bindingWhenSyntax.whenParentTagged(E,j)},l.prototype.whenAnyAncestorIs=function(E){return this._bindingWhenSyntax.whenAnyAncestorIs(E)},l.prototype.whenNoAncestorIs=function(E){return this._bindingWhenSyntax.whenNoAncestorIs(E)},l.prototype.whenAnyAncestorNamed=function(E){return this._bindingWhenSyntax.whenAnyAncestorNamed(E)},l.prototype.whenAnyAncestorTagged=function(E,j){return this._bindingWhenSyntax.whenAnyAncestorTagged(E,j)},l.prototype.whenNoAncestorNamed=function(E){return this._bindingWhenSyntax.whenNoAncestorNamed(E)},l.prototype.whenNoAncestorTagged=function(E,j){return this._bindingWhenSyntax.whenNoAncestorTagged(E,j)},l.prototype.whenAnyAncestorMatches=function(E){return this._bindingWhenSyntax.whenAnyAncestorMatches(E)},l.prototype.whenNoAncestorMatches=function(E){return this._bindingWhenSyntax.whenNoAncestorMatches(E)},l.prototype.onActivation=function(E){return this._bindingOnSyntax.onActivation(E)},l}();A.BindingInWhenOnSyntax=O},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.BindingInSyntax=void 0;var r=e(55),p=e(224),m=function(){function O(l){this._binding=l}return O.prototype.inRequestScope=function(){return this._binding.scope=r.BindingScopeEnum.Request,new p.BindingWhenOnSyntax(this._binding)},O.prototype.inSingletonScope=function(){return this._binding.scope=r.BindingScopeEnum.Singleton,new p.BindingWhenOnSyntax(this._binding)},O.prototype.inTransientScope=function(){return this._binding.scope=r.BindingScopeEnum.Transient,new p.BindingWhenOnSyntax(this._binding)},O}();A.BindingInSyntax=m},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.ContainerSnapshot=void 0;var r=function(){function p(){}return p.of=function(m,O){var l=new p;return l.bindings=m,l.middleware=O,l},p}();A.ContainerSnapshot=r},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Lookup=void 0;var r=e(41),p=function(){function m(){this._map=new Map}return m.prototype.getMap=function(){return this._map},m.prototype.add=function(O,l){if(O==null)throw new Error(r.NULL_ARGUMENT);if(l==null)throw new Error(r.NULL_ARGUMENT);var E=this._map.get(O);E!==void 0?(E.push(l),this._map.set(O,E)):this._map.set(O,[l])},m.prototype.get=function(O){if(O==null)throw new Error(r.NULL_ARGUMENT);var l=this._map.get(O);if(l!==void 0)return l;throw new Error(r.KEY_NOT_FOUND)},m.prototype.remove=function(O){if(O==null)throw new Error(r.NULL_ARGUMENT);if(!this._map.delete(O))throw new Error(r.KEY_NOT_FOUND)},m.prototype.removeByCondition=function(O){var l=this;this._map.forEach(function(E,j){var y=E.filter(function(n){return!O(n)});y.length>0?l._map.set(j,y):l._map.delete(j)})},m.prototype.hasKey=function(O){if(O==null)throw new Error(r.NULL_ARGUMENT);return this._map.has(O)},m.prototype.clone=function(){var O=new m;return this._map.forEach(function(l,E){l.forEach(function(j){return O.add(E,j.clone())})}),O},m.prototype.traverse=function(O){this._map.forEach(function(l,E){O(E,l)})},m}();A.Lookup=p},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.AsyncContainerModule=A.ContainerModule=void 0;var r=e(67),p=function(l){this.id=r.id(),this.registry=l};A.ContainerModule=p;var m=function(l){this.id=r.id(),this.registry=l};A.AsyncContainerModule=m},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.injectable=void 0;var r=e(41),p=e(32);A.injectable=function(){return function(m){if(Reflect.hasOwnMetadata(p.PARAM_TYPES,m))throw new Error(r.DUPLICATED_INJECTABLE_DECORATOR);var O=Reflect.getMetadata(p.DESIGN_PARAM_TYPES,m)||[];return Reflect.defineMetadata(p.PARAM_TYPES,O,m),m}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.tagged=void 0;var r=e(49),p=e(59);A.tagged=function(m,O){return function(l,E,j){var y=new r.Metadata(m,O);typeof j=="number"?p.tagParameter(l,E,j,y):p.tagProperty(l,E,y)}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.named=void 0;var r=e(32),p=e(49),m=e(59);A.named=function(O){return function(l,E,j){var y=new p.Metadata(r.NAMED_TAG,O);typeof j=="number"?m.tagParameter(l,E,j,y):m.tagProperty(l,E,y)}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.optional=void 0;var r=e(32),p=e(49),m=e(59);A.optional=function(){return function(O,l,E){var j=new p.Metadata(r.OPTIONAL_TAG,!0);typeof E=="number"?m.tagParameter(O,l,E,j):m.tagProperty(O,l,j)}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.unmanaged=void 0;var r=e(32),p=e(49),m=e(59);A.unmanaged=function(){return function(O,l,E){var j=new p.Metadata(r.UNMANAGED_TAG,!0);m.tagParameter(O,l,E,j)}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.multiInject=void 0;var r=e(32),p=e(49),m=e(59);A.multiInject=function(O){return function(l,E,j){var y=new p.Metadata(r.MULTI_INJECT_TAG,O);typeof j=="number"?m.tagParameter(l,E,j,y):m.tagProperty(l,E,y)}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.targetName=void 0;var r=e(32),p=e(49),m=e(59);A.targetName=function(O){return function(l,E,j){var y=new p.Metadata(r.NAME_TAG,O);m.tagParameter(l,E,j,y)}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.postConstruct=void 0;var r=e(41),p=e(32),m=e(49);A.postConstruct=function(){return function(O,l,E){var j=new m.Metadata(p.POST_CONSTRUCT,l);if(Reflect.hasOwnMetadata(p.POST_CONSTRUCT,O.constructor))throw new Error(r.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(p.POST_CONSTRUCT,j,O.constructor)}}},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.multiBindToService=void 0,A.multiBindToService=function(r){return function(p){return function(){for(var m=[],O=0;O<arguments.length;O++)m[O]=arguments[O];return m.forEach(function(l){return r.bind(l).toService(p)})}}}},function(a,A){function e(r,p){return a.exports=e=Object.setPrototypeOf||function(m,O){return m.__proto__=O,m},e(r,p)}a.exports=e},function(a,A,e){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var r=Symbol.for("INJECTION");function p(m,O,l,E){Object.defineProperty(m,O,{configurable:!0,enumerable:!0,get:function(){return E&&!Reflect.hasMetadata(r,this,O)&&Reflect.defineMetadata(r,l(),this,O),Reflect.hasMetadata(r,this,O)?Reflect.getMetadata(r,this,O):l()},set:function(y){Reflect.defineMetadata(r,y,this,O)}})}A.makePropertyInjectDecorator=function(m,O){return function(l){return function(E,j){p(E,j,function(){return m.get(l)},O)}}},A.makePropertyInjectNamedDecorator=function(m,O){return function(l,E){return function(j,y){p(j,y,function(){return m.getNamed(l,E)},O)}}},A.makePropertyInjectTaggedDecorator=function(m,O){return function(l,E,j){return function(y,n){p(y,n,function(){return m.getTagged(l,E,j)},O)}}},A.makePropertyMultiInjectDecorator=function(m,O){return function(l){return function(E,j){p(E,j,function(){return m.getAll(l)},O)}}}},function(a,A,e){var r=e(219);a.exports=function(p){if(Array.isArray(p))return r(p)}},function(a,A){a.exports=function(e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}},function(a,A){a.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},function(a,A){a.exports=function(e){var r=new Float32Array(2);return r[0]=e[0],r[1]=e[1],r}},function(a,A){a.exports=function(e,r){var p=new Float32Array(2);return p[0]=e,p[1]=r,p}},function(a,A){a.exports=function(e,r){return e[0]=r[0],e[1]=r[1],e}},function(a,A,e){a.exports=function(p,m){var O=p[0],l=p[1],E=m[0],j=m[1];return Math.abs(O-E)<=r*Math.max(1,Math.abs(O),Math.abs(E))&&Math.abs(l-j)<=r*Math.max(1,Math.abs(l),Math.abs(j))};var r=e(233)},function(a,A){a.exports=function(e,r){return e[0]===r[0]&&e[1]===r[1]}},function(a,A,e){a.exports=e(150)},function(a,A,e){a.exports=e(237)},function(a,A,e){a.exports=e(238)},function(a,A){a.exports=function(e,r){return e[0]=1/r[0],e[1]=1/r[1],e}},function(a,A){a.exports=function(e,r,p){return e[0]=Math.min(r[0],p[0]),e[1]=Math.min(r[1],p[1]),e}},function(a,A){a.exports=function(e,r,p){return e[0]=Math.max(r[0],p[0]),e[1]=Math.max(r[1],p[1]),e}},function(a,A){a.exports=function(e,r,p){var m=Math.cos(p),O=Math.sin(p),l=r[0],E=r[1];return e[0]=l*m-E*O,e[1]=l*O+E*m,e}},function(a,A){a.exports=function(e,r){return e[0]=Math.floor(r[0]),e[1]=Math.floor(r[1]),e}},function(a,A){a.exports=function(e,r){return e[0]=Math.ceil(r[0]),e[1]=Math.ceil(r[1]),e}},function(a,A){a.exports=function(e,r){return e[0]=Math.round(r[0]),e[1]=Math.round(r[1]),e}},function(a,A){a.exports=function(e,r,p){return e[0]=r[0]*p,e[1]=r[1]*p,e}},function(a,A){a.exports=function(e,r,p,m){return e[0]=r[0]+p[0]*m,e[1]=r[1]+p[1]*m,e}},function(a,A,e){a.exports=e(239)},function(a,A,e){a.exports=e(240)},function(a,A,e){a.exports=e(241)},function(a,A,e){a.exports=e(242)},function(a,A){a.exports=function(e,r){return e[0]=-r[0],e[1]=-r[1],e}},function(a,A){a.exports=function(e,r,p){var m=r[0]*p[1]-r[1]*p[0];return e[0]=e[1]=0,e[2]=m,e}},function(a,A){a.exports=function(e,r,p,m){var O=r[0],l=r[1];return e[0]=O+m*(p[0]-O),e[1]=l+m*(p[1]-l),e}},function(a,A){a.exports=function(e,r){r=r||1;var p=2*Math.random()*Math.PI;return e[0]=Math.cos(p)*r,e[1]=Math.sin(p)*r,e}},function(a,A){a.exports=function(e,r,p){var m=r[0],O=r[1];return e[0]=p[0]*m+p[2]*O,e[1]=p[1]*m+p[3]*O,e}},function(a,A){a.exports=function(e,r,p){var m=r[0],O=r[1];return e[0]=p[0]*m+p[2]*O+p[4],e[1]=p[1]*m+p[3]*O+p[5],e}},function(a,A){a.exports=function(e,r,p){var m=r[0],O=r[1];return e[0]=p[0]*m+p[3]*O+p[6],e[1]=p[1]*m+p[4]*O+p[7],e}},function(a,A){a.exports=function(e,r,p){var m=r[0],O=r[1];return e[0]=p[0]*m+p[4]*O+p[12],e[1]=p[1]*m+p[5]*O+p[13],e}},function(a,A,e){a.exports=function(p,m,O,l,E,j){var y,n;for(m||(m=2),O||(O=0),n=l?Math.min(l*m+O,p.length):p.length,y=O;y<n;y+=m)r[0]=p[y],r[1]=p[y+1],E(r,r,j),p[y]=r[0],p[y+1]=r[1];return p};var r=e(234)()},function(a,A){a.exports=function(e,r,p){var m=r[0]*r[0]+r[1]*r[1];if(m>p*p){var O=Math.sqrt(m);e[0]=r[0]/O*p,e[1]=r[1]/O*p}else e[0]=r[0],e[1]=r[1];return e}},function(a,A,e){"use strict";var r=e(0),p=e(5),m=e(38),O=m.a.cloneEvent,l=m.a.isNaN,E=Math.abs,j=["shift","ctrl","alt","control"],y={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0}},getEvents:function(){return{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onMouseDown",touchmove:"onMouseMove",touchend:"onMouseUp"}},updateViewport:function(P){var Y=this.origin,k=+P.clientX,h=+P.clientY;if(!l(k)&&!l(h)){var g=k-Y.x,F=h-Y.y;this.get("direction")==="x"?F=0:this.get("direction")==="y"&&(g=0),this.origin={x:k,y:h};var V=this.graph.get("width"),H=this.graph.get("height"),et=this.graph.get("canvas").getCanvasBBox();(et.minX<=V+this.scalableRange&&et.minX+g>V+this.scalableRange||et.maxX+this.scalableRange>=0&&et.maxX+this.scalableRange+g<0)&&(g=0),(et.minY<=H+this.scalableRange&&et.minY+F>H+this.scalableRange||et.maxY+this.scalableRange>=0&&et.maxY+this.scalableRange+F<0)&&(F=0),this.graph.translate(g,F)}},onMouseDown:function(P){var Y=P.originalEvent;if((!Y||P.name===p.h.TOUCHSTART||Y.button===0)&&(P.name===p.h.TOUCHSTART||typeof window=="undefined"||!window.event||window.event.buttons||window.event.button)&&this.shouldBegin.call(this,P)&&!this.keydown&&P.target&&P.target.isCanvas&&P.target.isCanvas()&&(this.origin={x:P.clientX,y:P.clientY},this.dragging=!1,this.enableOptimize)){for(var k=this.graph,h=k.getEdges(),g=0,F=h.length;g<F;g++){var V=h[g].get("group").get("children");V&&V.forEach(function(yt){yt.set("ori-visibility",yt.get("ori-visibility")||yt.get("visible")),yt.hide()})}for(var H=k.getNodes(),et=0,nt=H.length;et<nt;et++)for(var St=0,dt=H[et].getContainer().get("children");St<dt.length;St++){var gt=dt[St];gt.get("isKeyShape")||(gt.set("ori-visibility",gt.get("ori-visibility")||gt.get("visible")),gt.hide())}}},onMouseMove:function(P){var Y=this.graph;if(!this.keydown&&P.target&&P.target.isCanvas&&P.target.isCanvas()&&(P=O(P),this.origin)){if(this.dragging)P.type="drag",Y.emit("canvas:drag",P);else{if(E(this.origin.x-P.clientX)+E(this.origin.y-P.clientY)<10)return;this.shouldBegin.call(this,P)&&(P.type="dragstart",Y.emit("canvas:dragstart",P),this.dragging=!0)}this.shouldUpdate.call(this,P)&&this.updateViewport(P)}},onMouseUp:function(P){var Y=this.graph;if(!this.keydown){if(this.enableOptimize){for(var k=Y.getEdges(),h=0,g=k.length;h<g;h++){var F=k[h].get("group").get("children");F&&F.forEach(function(gt){gt.get("ori-visibility")&&gt.show()})}for(var V=Y.getNodes(),H=0,et=V.length;H<et;H++)for(var nt=0,St=V[H].getContainer().get("children");nt<St.length;nt++){var dt=St[nt];dt.get("isKeyShape")||dt.get("ori-visibility")&&dt.show()}}this.dragging?(P=O(P),this.shouldEnd.call(this,P)&&this.updateViewport(P),P.type="dragend",Y.emit("canvas:dragend",P),this.endDrag()):this.origin=null}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1},onKeyDown:function(P){var Y=P.key;Y&&(j.indexOf(Y.toLowerCase())>-1?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1}},n=e(1),s=e(45),d={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected"}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas"}},validationCombo:function(P){return!(!this.origin||!P||P.destroyed)&&P.getType()==="combo"},onDragStart:function(P){var Y=this;if(this.shouldBegin.call(this,P)){var k=P.item;if(k&&!k.destroyed&&!k.hasLocked()){k.getContainer().set("capture",!1);var h=P.target;if(h&&h.get("isAnchorPoint"))return;var g=this.graph;this.targets=[],this.targetCombo=null;var F=g.findAllByState("node",this.selectedState),V=k.get("id");F.filter(function(et){var nt=et.get("id");return V===nt}).length===0?this.targets.push(k):F.length>1?F.forEach(function(et){et.hasLocked()||Y.targets.push(et)}):this.targets.push(k);var H=[];this.targets.forEach(function(et){H.push(Object(r.c)(et.getModel()))}),this.set("beforeDragNodes",H),this.origin={x:P.x,y:P.y},this.point={},this.originPoint={}}}},onDrag:function(P){var Y=this;this.origin&&this.shouldUpdate(this,P)&&(this.get("enableDelegate")?this.updateDelegate(P):this.targets.map(function(k){Y.update(k,P)}))},onDragEnd:function(P){if(this.origin&&this.shouldEnd.call(this,P)){var Y=P.item;Y&&Y.getContainer().set("capture",!0),this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.updatePositions(P);var k=this.graph;if(k.get("enabledStack")){var h={before:{nodes:this.get("beforeDragNodes"),edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.targets.forEach(function(g){h.after.nodes.push(g.getModel())}),k.pushStack("update",Object(r.c)(h))}k.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(P){var Y=P.item;if(this.validationCombo(Y)){this.updatePositions(P);var k=this.graph;if(this.comboActiveState&&k.setItemState(Y,this.comboActiveState,!1),this.targetCombo=Y,this.onlyChangeComboSize)k.updateCombos();else{var h=Y.getModel();this.targets.map(function(g){g.getModel().comboId!==h.id&&k.updateComboTree(g,h.id)}),k.updateCombo(Y)}k.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(P){var Y=this.graph;this.targets&&this.targets.length!==0&&(this.updatePositions(P),this.onlyChangeComboSize?Y.updateCombos():this.targets.map(function(k){k.getModel().comboId&&Y.updateComboTree(k)}))},onDropNode:function(P){if(this.targets&&this.targets.length!==0){var Y=P.item;this.updatePositions(P);var k=this.graph,h=Y.getModel().comboId;if(h){var g=k.findById(h);this.comboActiveState&&k.setItemState(g,this.comboActiveState,!1),this.targets.map(function(F){var V=F.getModel();h!==V.comboId&&k.updateComboTree(F,h)}),k.updateCombo(g)}else this.targets.map(function(F){F.getModel().comboId&&k.updateComboTree(F)});k.emit("dragnodeend",{items:this.targets,targetItem:Y})}},onDragEnter:function(P){var Y=P.item;if(this.validationCombo(Y)){var k=this.graph;this.comboActiveState&&k.setItemState(Y,this.comboActiveState,!0)}},onDragLeave:function(P){var Y=P.item;if(this.validationCombo(Y)){var k=this.graph;this.comboActiveState&&k.setItemState(Y,this.comboActiveState,!1)}},updatePositions:function(P){var Y=this;this.targets&&this.targets.length!==0&&this.get("enableDelegate")&&this.targets.map(function(k){return Y.update(k,P)})},update:function(P,Y){var k=this.origin,h=P.get("model"),g=P.get("id");this.point[g]||(this.point[g]={x:h.x||0,y:h.y||0});var F={x:Y.x-k.x+this.point[g].x,y:Y.y-k.y+this.point[g].y};this.get("updateEdge")?this.graph.updateItem(P,F,!1):P.updatePosition(F)},updateDelegate:function(P){if(this.graph,this.delegateRect){var Y=P.x-this.origin.x+this.originPoint.minX,k=P.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:Y,y:k})}else{var h=this.graph.get("group"),g=Object(r.e)({},s.a.delegateStyle,this.delegateStyle),F=this.calculationGroupPosition(P),V=F.x,H=F.y,et=F.width,nt=F.height,St=F.minX,dt=F.minY;this.originPoint={x:V,y:H,width:et,height:nt,minX:St,minY:dt},this.delegateRect=h.addShape("rect",{attrs:Object(n.a)({width:et,height:nt,x:V,y:H},g),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(P){var Y=this.graph.findAllByState("node",this.selectedState);Y.length===0&&Y.push(P.item);for(var k=1/0,h=-1/0,g=1/0,F=-1/0,V=0;V<Y.length;V++){var H=Y[V].getBBox(),et=H.minX,nt=H.minY,St=H.maxX,dt=H.maxY;et<k&&(k=et),nt<g&&(g=nt),St>h&&(h=St),dt>F&&(F=dt)}return{x:Math.floor(k),y:Math.floor(g),width:Math.ceil(h)-Math.floor(k),height:Math.ceil(F)-Math.floor(g),minX:k,minY:g}}},M=Math.min,S=Math.max,T=Math.abs,v=["drag","shift","ctrl","alt","control"],x={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return v.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(P){var Y=P.item,k=this.brush;Y||(this.trigger==="drag"||this.keydown)&&(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),k||(k=this.createBrush()),this.originPoint={x:P.canvasX,y:P.canvasY},k.attr({width:0,height:0}),k.show(),this.dragging=!0)},onMouseMove:function(P){this.dragging&&(this.trigger==="drag"||this.keydown)&&this.updateBrush(P)},onMouseUp:function(P){this.graph,(this.brush||this.dragging)&&(this.trigger==="drag"||this.keydown)&&(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(P),this.dragging=!1)},clearStates:function(){var P=this.graph,Y=this.selectedState,k=P.findAllByState("node",Y),h=P.findAllByState("edge",Y);k.forEach(function(g){return P.setItemState(g,Y,!1)}),h.forEach(function(g){return P.setItemState(g,Y,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),P.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedNodes:function(P){var Y=this,k=this.graph,h=this.originPoint,g=this.shouldUpdate,F=this.selectedState,V={x:P.x,y:P.y},H=k.getPointByCanvas(h.x,h.y),et=M(V.x,H.x),nt=S(V.x,H.x),St=M(V.y,H.y),dt=S(V.y,H.y),gt=[],yt=[];k.getNodes().forEach(function(Pt){var Ft=Pt.getBBox();if(Ft.centerX>=et&&Ft.centerX<=nt&&Ft.centerY>=St&&Ft.centerY<=dt&&g(Pt,"select")){gt.push(Pt);var Tt=Pt.getModel();yt.push(Tt.id),k.setItemState(Pt,F,!0)}});var Ct=[];this.includeEdges&&gt.forEach(function(Pt){Pt.getOutEdges().forEach(function(Ft){var Tt=Ft.getModel(),zt=Tt.source,Xt=Tt.target;yt.includes(zt)&&yt.includes(Xt)&&g(Ft,"select")&&(Ct.push(Ft),k.setItemState(Ft,Y.selectedState,!0))})}),this.selectedEdges=Ct,this.selectedNodes=gt,this.onSelect&&this.onSelect(gt,Ct),k.emit("nodeselectchange",{selectedItems:{nodes:gt,edges:Ct},select:!0})},createBrush:function(){var P=this.graph.get("canvas").addShape("rect",{attrs:this.brushStyle,capture:!1,name:"brush-shape"});return this.brush=P,this.delegate=P,P},updateBrush:function(P){var Y=this.originPoint;this.brush.attr({width:T(P.canvasX-Y.x),height:T(P.canvasY-Y.y),x:M(P.canvasX,Y.x),y:M(P.canvasY,Y.y)})},onKeyDown:function(P){var Y=P.key;if(Y){var k=this.trigger.toLowerCase(),h=Y.toLowerCase();this.keydown=h===k||h==="control"&&k==="ctrl"||h==="ctrl"&&k==="control"}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},C=["shift","ctrl","alt","control"],N={getDefaultCfg:function(){return{multiple:!0,trigger:"shift",selectedState:"selected"}},getEvents:function(){return C.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.multiple?{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(P){var Y=this,k=P.item;if(k&&!k.destroyed){var h=k.getType(),g=Y.graph,F=Y.keydown,V=Y.multiple,H=Y.shouldUpdate;if(Y.shouldBegin.call(Y,P)){if(!F||!V){var et=g.findAllByState(h,Y.selectedState);Object(r.f)(et,function(dt){dt!==k&&g.setItemState(dt,Y.selectedState,!1)})}if(k.hasState(Y.selectedState)){H.call(Y,P)&&g.setItemState(k,Y.selectedState,!1);var nt=g.findAllByState("node",Y.selectedState),St=g.findAllByState("combo",Y.selectedState);g.emit("nodeselectchange",{target:k,selectedItems:{nodes:nt,combos:St},select:!1})}else H.call(Y,P)&&g.setItemState(k,Y.selectedState,!0),nt=g.findAllByState("node",Y.selectedState),St=g.findAllByState("combo",Y.selectedState),g.emit("nodeselectchange",{target:k,selectedItems:{nodes:nt,combos:St},select:!0})}}},onCanvasClick:function(){var P=this,Y=this.graph,k=Y.findAllByState("node",this.selectedState);Object(r.f)(k,function(g){Y.setItemState(g,P.selectedState,!1)});var h=Y.findAllByState("combo",this.selectedState);Object(r.f)(h,function(g){Y.setItemState(g,P.selectedState,!1)}),Y.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},onKeyDown:function(P){var Y=P.key;Y&&(Y.toLowerCase()===this.trigger.toLowerCase()||Y.toLowerCase()==="control"?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1}},X=e(122).a.transform,tt={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"}}},getEvents:function(){var P=this.fixSelectedItems;return P.fixState||(P.fixState="selected"),P.fixAll&&(P.fixLineWidth=!0,P.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(P){var Y=P.originalEvent.touches,k=Y[0],h=Y[1];P.preventDefault(),h&&(this.startPoint={pageX:k.pageX,pageY:k.pageY},this.moveable=!0,h&&(this.endPoint={pageX:h.pageX,pageY:h.pageY}),this.originScale=this.currentScale||1)},onTouchMove:function(P){if(this.moveable){P.preventDefault();var Y=P.originalEvent.touches,k=Y[0],h=Y[1];if(h){this.endPoint||(this.endPoint={pageX:h.pageX,pageY:h.pageY});var g=function(St,dt){return Math.hypot(dt.x-St.x,dt.y-St.y)},F=g({x:k.pageX,y:k.pageY},{x:h.pageX,y:h.pageY})/g({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),V=this.originScale*F;this.currentScale=V;var H=this.get("minZoom")||this.graph.get("minZoom");if(!(V>(this.get("maxZoom")||this.graph.get("maxZoom"))||V<H)){var et=this.graph.get("canvas").getPointByClient(P.clientX,P.clientY);this.graph.zoomTo(V,{x:et.x,y:et.y}),this.graph.emit("wheelzoom",P)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(P){var Y=this,k=this.graph,h=this.fixSelectedItems;if(this.shouldUpdate.call(this,P)){P.preventDefault();var g,F=k.get("canvas").getPointByClient(P.clientX,P.clientY),V=this.get("sensitivity"),H=k.getZoom();g=H*(P.wheelDelta<0?1-.05*V:1/(1-.05*V));var et=this.get("minZoom")||k.get("minZoom");if(!(g>(this.get("maxZoom")||k.get("maxZoom"))||g<et)){if(this.get("enableOptimize")){var nt=this.get("optimizeZoom"),St=this.get("optimized"),dt=k.getNodes(),gt=k.getEdges(),yt=dt.length,Ct=gt.length;if(!St){for(var Pt=0;Pt<yt;Pt++)if(!(Ve=dt[Pt]).destroyed)for(var Ft=(Ui=Ve.get("group").get("children")).length,Tt=0;Tt<Ft;Tt++)(tr=Ui[Tt]).destoryed||tr.get("isKeyShape")||(tr.set("ori-visibility",tr.get("ori-visibility")||tr.get("visible")),tr.hide());for(var zt=0;zt<Ct;zt++)for(Ft=(Ui=(Ti=gt[zt]).get("group").get("children")).length,Tt=0;Tt<Ft;Tt++)(tr=Ui[Tt]).set("ori-visibility",tr.get("ori-visibility")||tr.get("visible")),tr.hide();this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Xt=setTimeout(function(){var Li=k.getZoom();if(Y.get("optimized")){Y.set("optimized",!1);for(var Vi=0;Vi<yt;Vi++){var ro=dt[Vi],jr=(Br=ro.get("group").get("children")).length;if(Li<nt)(pr=(Nr=ro.getKeyShape()).get("ori-visibility"))&&Nr.show();else for(var Ji=0;Ji<jr;Ji++){var pr=(Kr=Br[Ji]).get("ori-visibility");!Kr.get("visible")&&pr&&pr&&Kr.show()}}for(var Xr=0;Xr<Ct;Xr++){var Br,Nr,Yr=gt[Xr];if(jr=(Br=Yr.get("group").get("children")).length,Li<nt)(pr=(Nr=Yr.getKeyShape()).get("ori-visibility"))&&Nr.show();else for(Ji=0;Ji<jr;Ji++){var Kr;(Kr=Br[Ji]).get("visible")||(pr=Kr.get("ori-visibility"))&&Kr.show()}}}},100);this.set("timeout",Xt)}if(H<=1){var re=void 0,de=void 0;if(h.fixAll||h.fixLineWidth||h.fixLabel){re=k.findAllByState("node",h.fixState),de=k.findAllByState("edge",h.fixState);for(var ye=H/g,we=re.length,De=0;De<we;De++){var Ve,pn=(Ve=re[De]).getContainer(),sn=Ve.getModel(),In=Ve.getOriginStyle(),An=Ve.getStateStyle(h.fixState),Rn=Ve.get("shapeFactory").getShape(sn.type).getStateStyle(h.fixState,Ve)[h.fixState];if(h.fixAll){if(g<=1){var Mn=Object(r.c)(pn.getMatrix());Mn||(Mn=[1,0,0,0,1,0,0,0,1]);var Cn=Ve.getModel(),Gn=Cn.x,Xn=Cn.y;Mn=X(Mn,[["t",-Gn,-Xn],["s",ye,ye],["t",Gn,Xn]]),pn.setMatrix(Mn)}}else for(Ft=(Ui=pn.get("children")).length,Tt=0;Tt<Ft;Tt++){var tr=Ui[Tt],or=void 0,nr=void 0;if(h.fixLabel&&tr.get("type")==="text"){or=tr.attr("fontSize")||12;var er=An[tr.get("name")],Sr=Rn[tr.get("name")],Vr=er?er.fontSize:12,ti=Sr?Sr.fontSize:12,hi=Vr||ti||12;if(g<=1&&tr.attr("fontSize",hi/g),nr)break}if(h.fixLineWidth&&tr.get("isKeyShape")){nr=tr.attr("lineWidth")||0;var Fi=An.lineWidth||Rn.lineWidth||In.lineWidth||0;if(g<=1&&tr.attr("lineWidth",Fi/g),or)break}}}for(var to=de.length,si=0;si<to;si++){var Ti,Ui=(pn=(Ti=de[si]).getContainer()).get("children");for(sn=Ti.getModel(),An=Ti.getStateStyle(h.fixState),Rn=Ti.get("shapeFactory").getShape(sn.type).getStateStyle(h.fixState,Ti)[h.fixState],Ft=Ui.length,Tt=0;Tt<Ft&&(tr=Ui[Tt],or=void 0,nr=void 0,!((h.fixLabel||h.fixAll)&&tr.get("type")==="text"&&(or=tr.attr("fontSize")||12,er=An[tr.get("name")],Sr=Rn[tr.get("name")],Vr=er?er.fontSize:12,ti=Sr?Sr.fontSize:12,hi=Vr||ti||12,g<=1&&tr.attr("fontSize",hi/g),nr)||(h.fixLineWidth||h.fixAll)&&tr.get("isKeyShape")&&(nr=tr.attr("lineWidth")||0,Fi=An.lineWidth||Rn.lineWidth||1,g<=1&&tr.attr("lineWidth",Fi/g),or)));Tt++);}}}k.zoomTo(g,{x:F.x,y:F.y}),k.emit("wheelzoom",P)}}}},it=e(14),pt={onMouseEnter:function(P){var Y=P.item;this.currentTarget=Y,this.showTooltip(P),this.graph.emit("tooltipchange",{item:P.item,action:"show"})},onMouseMove:function(P){this.shouldUpdate(P)?this.currentTarget&&P.item===this.currentTarget&&this.updatePosition(P):this.hideTooltip()},onMouseLeave:function(P){this.shouldEnd(P)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(P){var Y=this.container;if(P.item&&!P.item.destroyed){Y||(Y=this.createTooltip(this.graph.get("canvas")),this.container=Y);var k=this.formatText(P.item.get("model"),P);Y.innerHTML=k,Object(it.c)(this.container,{visibility:"visible"}),this.updatePosition(P)}},hideTooltip:function(){Object(it.c)(this.container,{visibility:"hidden"})},updatePosition:function(P){var Y=this.get("shouldBegin"),k=this.width,h=this.height,g=this.container,F=this.graph;if(Y(P)){var V=F.getPointByClient(P.clientX,P.clientY),H=F.getCanvasByPoint(V.x,V.y),et=H.x,nt=H.y,St=g.getBoundingClientRect();et>k/2?et-=St.width:et+=this.offset,nt>h/2?nt-=St.height:nt+=this.offset;var dt=et+"px",gt=nt+"px";Object(it.c)(this.container,{left:dt,top:gt,visibility:"visible"})}else Object(it.c)(g,{visibility:"hidden"})},createTooltip:function(P){var Y=P.get("el");Y.style.position="relative";var k=Object(it.b)('<div class="g6-tooltip g6-'+this.item+'-tooltip"></div>');return Y.parentNode.appendChild(k),Object(it.c)(k,{position:"absolute",visibility:"visible"}),this.width=P.get("width"),this.height=P.get("height"),this.container=k,this.graph.get("tooltips").push(k),k}},ft=Object(n.a)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(Y){return Y.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},pt),Ot=Object(n.a)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(Y){return"source: "+Y.source+" target: "+Y.target}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},pt),wt=["click","dblclick"],xt={getDefaultCfg:function(){return{trigger:"click",onChange:function(){}}},getEvents:function(){var P,Y;return wt.includes(this.trigger)?Y=this.trigger:(Y="click",console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),(P={})["node:"+Y]="onNodeClick",P.touchstart="onNodeClick",P},onNodeClick:function(P){var Y=P.item,k=this.graph.findDataById(Y.get("id"));if(k){var h=k.children;if(h&&h.length!==0){var g=!k.collapsed;this.shouldBegin(P,g)&&(k.collapsed=g,Y.getModel().collapsed=g,this.graph.emit("itemcollapsed",{item:P.item,collapsed:g}),this.shouldUpdate(P,g)&&(this.onChange(Y,g),this.graph.layout()))}}}},lt=m.a.calculationItemsBBox,Vt=function _(P,Y){if(Y(P)!==!1&&P){var k=P.get("combos");if(k.length===0)return!1;Object(r.f)(k,function(h){_(h,Y)})}},Lt={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected"}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(P){var Y=P.item;return!(!Y||Y.destroyed)&&!!this.shouldUpdate(this,P)&&Y.getType()==="combo"},onDragStart:function(P){var Y=this,k=this.graph,h=P.item;if(this.validationCombo(P)){this.targets=[];var g=k.findAllByState("combo",this.selectedState),F=h.get("id");g.filter(function(V){var H=V.get("id");return F===H}).length===0?this.targets.push(h):this.targets=g,this.activeState&&this.targets.map(function(V){var H=V.getModel();if(H.parentId){var et=k.findById(H.parentId);et&&k.setItemState(et,Y.activeState,!0)}}),this.point={},this.originPoint={},this.origin={x:P.x,y:P.y},this.currentItemChildCombos=[],Vt(h,function(V){if(V.destroyed)return!1;var H=V.getModel();return Y.currentItemChildCombos.push(H.id),!0})}},onDrag:function(P){var Y=this;if(this.origin&&this.validationCombo(P))if(this.enableDelegate)this.updateDelegate(P);else{if(this.activeState){var k=this.graph,h=P.item,g=h.getModel(),F=k.getCombos(),V=h.getBBox(),H=V.centerX,et=V.centerY,nt=V.width;F.filter(function(St){var dt=St.getModel();return g.parentId,dt.id!==g.id&&!Y.currentItemChildCombos.includes(dt.id)}).map(function(St){var dt=St.getBBox(),gt=dt.centerX,yt=dt.centerY,Ct=dt.width,Pt=H-gt,Ft=et-yt,Tt=2*Math.sqrt(Pt*Pt+Ft*Ft);nt+Ct-Tt>.8*nt?k.setItemState(St,Y.activeState,!0):k.setItemState(St,Y.activeState,!1)})}Object(r.f)(this.targets,function(St){Y.updateCombo(St,P)})}},updatePositions:function(P){var Y=this;this.enableDelegate&&Object(r.f)(this.targets,function(k){Y.updateCombo(k,P)})},onDrop:function(P){var Y=this,k=P.item;if(k&&this.targets&&!k.destroyed){this.updatePositions(P);var h=this.graph,g=k.getModel();this.targets.map(function(F){F.getModel().parentId!==g.id?(Y.activeState&&h.setItemState(k,Y.activeState,!1),Y.onlyChangeComboSize?h.updateCombo(F):h.updateComboTree(F,g.id)):h.updateCombo(k)}),this.end(k,P),this.endComparison=!0}},onNodeDrop:function(P){var Y=this;if(this.targets&&this.targets.length!==0){this.updatePositions(P);var k,h=this.graph,g=P.item.getModel().comboId;if(g){if(this.activeState){var F=h.findById(g);h.setItemState(F,this.activeState,!1)}this.targets.map(function(V){Y.onlyChangeComboSize?h.updateCombo(V):g!==V.getID()&&(k=h.findById(g),g!==V.getModel().parentId&&h.updateComboTree(V,g))})}else this.targets.map(function(V){Y.onlyChangeComboSize?h.updateCombo(V):V.getModel().comboId&&h.updateComboTree(V)});this.endComparison=!0,this.end(k,P)}},onDragEnter:function(P){if(this.origin&&this.validationCombo(P)){var Y=P.item,k=this.graph;this.activeState&&k.setItemState(Y,this.activeState,!0)}},onDragLeave:function(P){if(this.origin&&this.validationCombo(P)){var Y=P.item,k=this.graph;this.activeState&&k.setItemState(Y,this.activeState,!1)}},onDragEnd:function(P){if(this.targets&&this.targets.length!==0){var Y=P.item;this.updatePositions(P);var k=this.getParentCombo(Y.getModel().parentId),h=this.graph;k&&this.activeState&&h.setItemState(k,this.activeState,!1),this.end(void 0,P)}},end:function(P,Y){var k=this;if(this.origin){var h=this.graph;this.delegateShape&&(h.get("delegateGroup").clear(),this.delegateShape=null),P&&this.activeState&&h.setItemState(P,this.activeState,!1),P||this.targets.map(function(g){k.onlyChangeComboSize?h.updateCombo(g):h.updateComboTree(g)}),this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(P,Y){var k=this;if(Y(P)!==!1&&P){var h=P.get("combos");Object(r.f)(h,function(F){k.traverse(F,Y)});var g=P.get("nodes");Object(r.f)(g,function(F){k.traverse(F,Y)})}},updateCombo:function(P,Y){var k=this;this.traverse(P,function(h){return!h.destroyed&&(k.updateSignleItem(h,Y),!0)})},updateSignleItem:function(P,Y){var k=this.origin,h=this.graph,g=P.getModel(),F=P.get("id");this.point[F]||(this.point[F]={x:g.x,y:g.y});var V=Y.x-k.x+this.point[F].x,H=Y.y-k.y+this.point[F].y;h.updateItem(P,{x:V,y:H})},getParentCombo:function(P){var Y=this.graph;if(P){var k=Y.findById(P);if(k)return k}},updateDelegate:function(P){var Y=this.graph;if(this.delegateShape){var k=P.x-this.origin.x+this.originPoint.minX,h=P.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:k,y:h})}else{var g=Y.get("delegateGroup"),F=null,V=(F=this.targets.length>1?lt(this.targets):this.targets[0].getBBox()).x,H=F.y,et=F.width,nt=F.height,St=F.minX,dt=F.minY;this.originPoint={x:V,y:H,width:et,height:nt,minX:St,minY:dt};var gt=Object(n.a)(Object(n.a)({},s.a.delegateStyle),this.delegateStyle);this.delegateShape=g.addShape("rect",{attrs:Object(n.a)({width:F.width,height:F.height,x:F.x,y:F.y},gt),name:"combo-delegate-shape"}),this.delegate=this.delegateShape}}},Et=["click","dblclick"],J={getDefaultCfg:function(){return{trigger:"dblclick",relayout:!0}},getEvents:function(){var P,Y;return Et.includes(this.trigger)?Y=this.trigger:(Y="dblclick",console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),(P={})["combo:"+Y]="onComboClick",P},onComboClick:function(P){var Y=P.item,k=this.graph,h=this.relayout;if(Y&&!Y.destroyed&&Y.getType()==="combo"){var g=Y.getModel().id;g&&(k.collapseExpandCombo(g),h&&k.get("layout")?k.layout():k.refreshPositions())}}},ht=m.a.isPolygonsIntersect,vt=m.a.pathToPoints,bt=["drag","shift","ctrl","alt","control"],At=["click","drag"],q=["shift","ctrl","control","alt","meta",void 0],ct=["shift","ctrl","alt","control"],ot={"drag-canvas":y,"zoom-canvas":tt,"drag-node":d,"activate-relations":{getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","canvas:click":"clearAllItemStates"}},setAllItemStates:function(P){var Y=P.item,k=this.graph;if(this.item=Y,this.shouldUpdate(P.item,{event:P,action:"activate"})){for(var h=this.activeState,g=this.inactiveState,F=k.getNodes(),V=k.getEdges(),H=F.length,et=V.length,nt=0;nt<H;nt++){var St=F[nt],dt=St.hasState("selected");this.resetSelected&&dt&&k.setItemState(St,"selected",!1),k.setItemState(St,h,!1),g&&k.setItemState(St,g,!0)}for(nt=0;nt<et;nt++){var gt=V[nt];k.setItemState(gt,h,!1),g&&k.setItemState(gt,g,!0)}g&&k.setItemState(Y,g,!1),k.setItemState(Y,h,!0);var yt=Y.getEdges(),Ct=yt.length;for(nt=0;nt<Ct;nt++){var Pt=void 0;Pt=(gt=yt[nt]).getSource()===Y?gt.getTarget():gt.getSource(),g&&k.setItemState(Pt,g,!1),k.setItemState(Pt,h,!0),k.setItemState(gt,g,!1),k.setItemState(gt,h,!0),gt.toFront()}k.emit("afteractivaterelations",{item:P.item,action:"activate"})}},clearActiveState:function(P){var Y=this.get("graph");if(this.shouldUpdate(P.item,{event:P,action:"deactivate"})){var k=this.activeState,h=this.inactiveState,g=Y.get("autoPaint");Y.setAutoPaint(!1);for(var F=Y.getNodes(),V=Y.getEdges(),H=F.length,et=V.length,nt=0;nt<H;nt++){var St=F[nt];Y.clearItemStates(St,[k,h])}for(nt=0;nt<et;nt++){var dt=V[nt];Y.clearItemStates(dt,[k,h,"deactivate"])}Y.paint(),Y.setAutoPaint(g),Y.emit("afteractivaterelations",{item:P.item||this.get("item"),action:"deactivate"})}},clearAllItemStates:function(P){var Y=this.graph;if(this.shouldUpdate(P.item,{event:P,action:"deactivate"})){for(var k=this.activeState,h=this.inactiveState,g=Y.getNodes(),F=Y.getEdges(),V=g.length,H=F.length,et=0;et<V;et++){var nt=g[et];Y.clearItemStates(nt,[k,h])}for(et=0;et<H;et++){var St=F[et];Y.clearItemStates(St,[k,h,"deactivate"])}Y.emit("afteractivaterelations",{item:P.item||this.get("item"),action:"deactivate"})}}},"brush-select":x,"click-select":N,"lasso-select":{getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return bt.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(P){var Y=this.lasso;P.item||(this.trigger==="drag"||this.keydown)&&(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),Y||(Y=this.createLasso()),this.dragging=!0,this.originPoint={x:P.x,y:P.y},this.points.push(this.originPoint),Y.show())},onDragMove:function(P){this.dragging&&(this.trigger==="drag"||this.keydown)&&(this.points.push({x:P.x,y:P.y}),this.updateLasso(P))},onDragEnd:function(P){(this.lasso||this.dragging)&&(this.trigger==="drag"||this.keydown)&&(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var P=this.points,Y=[];return P.length&&(P.forEach(function(k,h){h===0?Y.push(["M",k.x,k.y]):Y.push(["L",k.x,k.y])}),Y.push(["L",P[0].x,P[0].y])),Y},clearStates:function(){var P=this.graph,Y=this.selectedState,k=P.findAllByState("node",Y),h=P.findAllByState("edge",Y);k.forEach(function(g){return P.setItemState(g,Y,!1)}),h.forEach(function(g){return P.setItemState(g,Y,!1)}),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],P.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var P=this,Y=this.graph,k=this.shouldUpdate,h=this.points.map(function(et){return[Y.getCanvasByPoint(et.x,et.y).x,Y.getCanvasByPoint(et.x,et.y).y]}),g=this.selectedState,F=[],V=[];Y.getNodes().forEach(function(et){if(function(St,dt){var gt,yt=St.getKeyShape();if(St.get("type")==="path")gt=vt(yt.attr("path"));else{var Ct=yt.getCanvasBBox();gt=[[Ct.minX,Ct.minY],[Ct.maxX,Ct.minY],[Ct.maxX,Ct.maxY],[Ct.minX,Ct.maxY]]}return ht(dt,gt)}(et,h)&&k(et,"select")){F.push(et);var nt=et.getModel();V.push(nt.id),Y.setItemState(et,g,!0)}});var H=[];this.includeEdges&&F.forEach(function(et){et.getOutEdges().forEach(function(nt){var St=nt.getModel(),dt=St.source,gt=St.target;V.includes(dt)&&V.includes(gt)&&k(nt,"select")&&(H.push(nt),Y.setItemState(nt,P.selectedState,!0))})}),this.selectedEdges=H,this.selectedNodes=F,this.onSelect&&this.onSelect(F,H),Y.emit("nodeselectchange",{selectedItems:{nodes:F,edges:H},select:!0})},createLasso:function(){var P=this.graph.get("delegateGroup").addShape("path",{attrs:Object(n.a)({path:[]},this.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=P,this.delegate=P,this.points=[],P},updateLasso:function(P){this.lasso.attr({path:this.getLassoPath()})},onKeyDown:function(P){var Y=P.key;Y&&(Y.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},tooltip:ft,"edge-tooltip":Ot,"collapse-expand":xt,"drag-combo":Lt,"collapse-expand-combo":J,"create-edge":{getDefaultCfg:function(){return{trigger:"click",key:void 0,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var P;return At.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="click",console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),this.key&&q.indexOf(this.key.toLowerCase())===-1&&(this.trigger=void 0,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined")),this.trigger==="drag"?P={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:this.trigger==="click"&&(P={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),this.key&&(P.keydown="onKeyDown",P.keyup="onKeyUp"),P},onDragEnd:function(P){if(!this.key||this.keydown){var Y=P.item;Y&&Y.getID()!==this.source&&Y.getType()==="node"||this.cancelCreating({item:this.edge,x:P.x,y:P.y})}},onClick:function(P){if(!this.key||this.keydown){var Y=P.item,k=this.graph,h=Y.getModel(),g=this.getEdgeConfig;if(this.addingEdge&&this.edge){if(!this.shouldEnd.call(this,P))return;var F=void 0;F=g&&Object(r.r)(g)?g({source:this.source,target:h.id}):this.edgeConfig;var V=Object(n.a)({target:h.id},F);this.source===h.id&&(V.type="loop"),k.emit("beforecreateedge",{}),k.updateItem(this.edge,V),k.emit("aftercreateedge",{edge:this.edge}),this.edge.getKeyShape().set("capture",!0),this.edge=null,this.addingEdge=!1}else{if(!this.shouldBegin.call(this,P))return;F=void 0,F=g&&Object(r.r)(g)?g({source:h.id,target:h.id}):this.edgeConfig,this.edge=k.addItem("edge",Object(n.a)({source:h.id,target:h.id},F),!1),this.source=h.id,this.addingEdge=!0,this.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(P){if(!this.key||this.keydown){var Y={x:P.x,y:P.y};this.graph.findById(this.source)?this.addingEdge&&this.edge&&this.graph.updateItem(this.edge,{target:Y},!1):this.addingEdge=!1}},cancelCreating:function(P){if(!this.key||this.keydown){var Y=this.graph,k=P.item;if(this.addingEdge&&P.target&&P.target.isCanvas&&P.target.isCanvas())return Y.removeItem(this.edge,!1),this.edge=null,void(this.addingEdge=!1);this.addingEdge&&this.edge===k&&(Y.removeItem(this.edge,!1),this.edge=null,this.addingEdge=!1)}},onKeyDown:function(P){var Y=P.key;Y&&(Y.toLowerCase()===this.key.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.addingEdge&&this.edge&&(this.graph.removeItem(this.edge,!1),this.addingEdge=!1,this.edge=null),this.keydown=!1}},"shortcuts-call":{getDefaultCfg:function(){return{trigger:"ctrl",combinedKey:"1",functionName:"fitView",functionParams:[]}},getEvents:function(){return ct.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="ctrl",console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '"+this.trigger+"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(P){var Y=P.key;if(Y){var k=this.trigger.toLowerCase(),h=Y.toLowerCase();this.triggerKeydown||(this.triggerKeydown=h===k||h==="control"&&k==="ctrl"||h==="ctrl"&&k==="control");var g=this.graph;if(!g[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '"+this.functionName+"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D"),{};if(!this.triggerKeydown||this.combinedKey){var F=this.combinedKey.toLowerCase();this.triggerKeydown&&(h===F||h==="control"&&F==="ctrl"||h==="ctrl"&&F==="control")&&(this.functionParams&&this.functionParams.length?g[this.functionName].apply(g,this.functionParams):g[this.functionName]())}else this.functionParams&&this.functionParams.length?g[this.functionName].apply(g,this.functionParams):g[this.functionName]()}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}}};Object(r.f)(ot,function(_,P){Object(p.o)(P,_)})},function(a,A,e){"use strict";var r=e(1),p=e(5),m=e(0);function O(Et){return(O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J})(Et)}Object(p.r)("circle",{options:{size:p.e.defaultNode.size,style:{x:0,y:0,stroke:p.e.defaultNode.style.stroke,fill:p.e.defaultNode.style.fill,lineWidth:p.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:p.e.nodeLabel.style.fill,fontSize:p.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:p.e.defaultNode.linkPoints.size,lineWidth:p.e.defaultNode.linkPoints.lineWidth,fill:p.e.defaultNode.linkPoints.fill,stroke:p.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(r.a)({},p.e.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(J,ht){var vt=this.getOptions(J).icon,bt=vt===void 0?{}:vt,At=this.getShapeStyle(J),q=Object(m.e)({},bt,J.icon),ct=ht.addShape("circle",{attrs:At,className:this.type+"-keyShape",draggable:!0}),ot=q.width,_=q.height;return q.show&&ht.addShape("image",{attrs:Object(r.a)({x:-ot/2,y:-_/2},q),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(J,ht),ct},drawLinkPoints:function(J,ht){var vt=this.getOptions(J).linkPoints,bt=vt===void 0?{}:vt,At=bt.top,q=bt.left,ct=bt.right,ot=bt.bottom,_=bt.size,P=bt.r,Y=Object(r.c)(bt,["top","left","right","bottom","size","r"]),k=this.getSize(J)[0]/2;q&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Y),{x:-k,y:0,r:_/2||P||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),ct&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Y),{x:k,y:0,r:_/2||P||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),At&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Y),{x:0,y:-k,r:_/2||P||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),ot&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Y),{x:0,y:k,r:_/2||P||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(J){var ht=this.getOptions(J).style,vt={stroke:J.color},bt=Object(m.e)({},ht,vt),At=this.getSize(J)[0]/2;return Object(r.a)({x:0,y:0,r:At},bt)},update:function(J,ht){var vt=ht.getContainer(),bt=this.getSize(J),At={stroke:J.color,r:bt[0]/2},q=ht.get("keyShape"),ct=Object(m.e)({},q.attr(),At,J.style);this.updateShape(J,ht,ct,!0),this.updateLinkPoints(J,vt)}},"single-node"),Object(p.r)("rect",{options:{size:[100,30],style:{radius:0,stroke:p.e.defaultNode.style.stroke,fill:p.e.defaultNode.style.fill,lineWidth:p.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:p.e.nodeLabel.style.fill,fontSize:p.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:p.e.defaultNode.linkPoints.size,lineWidth:p.e.defaultNode.linkPoints.lineWidth,fill:p.e.defaultNode.linkPoints.fill,stroke:p.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(r.a)({},p.e.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(J,ht){var vt=this.getShapeStyle(J),bt=ht.addShape("rect",{attrs:vt,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawLinkPoints(J,ht),bt},drawLinkPoints:function(J,ht){var vt=this.getOptions(J).linkPoints,bt=vt===void 0?{}:vt,At=bt.top,q=bt.left,ct=bt.right,ot=bt.bottom,_=bt.size,P=bt.r,Y=Object(r.c)(bt,["top","left","right","bottom","size","r"]),k=this.getSize(J),h=k[0],g=k[1];q&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Y),{x:-h/2,y:0,r:_/2||P||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),ct&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Y),{x:h/2,y:0,r:_/2||P||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),At&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Y),{x:0,y:-g/2,r:_/2||P||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),ot&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Y),{x:0,y:g/2,r:_/2||P||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(J){var ht=this.getOptions(J).style,vt={stroke:J.color},bt=Object(m.A)({},ht,vt),At=this.getSize(J),q=bt.width||At[0],ct=bt.height||At[1];return Object(r.a)({x:-q/2,y:-ct/2,width:q,height:ct},bt)},update:function(J,ht){var vt=ht.getContainer(),bt=this.getOptions({}).style,At=this.getSize(J),q=ht.get("keyShape");J.size||(At[0]=q.attr("width")||bt.width,At[1]=q.attr("height")||bt.height);var ct={stroke:J.color,x:-At[0]/2,y:-At[1]/2,width:At[0],height:At[1]},ot=Object(m.A)({},bt,q.attr(),ct);ot=Object(m.A)(ot,J.style),this.updateShape(J,ht,ot,!1),this.updateLinkPoints(J,vt)}},"single-node"),Object(p.r)("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:p.e.defaultNode.style.stroke,fill:p.e.defaultNode.style.fill,lineWidth:p.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:p.e.nodeLabel.style.fill,fontSize:p.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:p.e.defaultNode.linkPoints.size,lineWidth:p.e.defaultNode.linkPoints.lineWidth,fill:p.e.defaultNode.linkPoints.fill,stroke:p.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(r.a)({},p.e.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(J,ht){var vt=this.getOptions(J).icon,bt=vt===void 0?{}:vt,At=this.getShapeStyle(J),q=ht.addShape("ellipse",{attrs:At,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0}),ct=bt.width,ot=bt.height;return bt.show&&ht.addShape("image",{attrs:Object(r.a)({x:-ct/2,y:-ot/2},bt),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(J,ht),q},drawLinkPoints:function(J,ht){var vt=this.getOptions(J).linkPoints,bt=vt===void 0?{}:vt,At=bt.top,q=bt.left,ct=bt.right,ot=bt.bottom,_=bt.size,P=bt.r,Y=Object(r.c)(bt,["top","left","right","bottom","size","r"]),k=this.getSize(J),h=k[0]/2,g=k[1]/2;q&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Y),{x:-h,y:0,r:_/2||P||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),ct&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Y),{x:h,y:0,r:_/2||P||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),At&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Y),{x:0,y:-g,r:_/2||P||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),ot&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Y),{x:0,y:g,r:_/2||P||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(J){var ht=this.getOptions(J).style,vt={stroke:J.color},bt=Object(m.A)({},ht,vt),At=this.getSize(J),q=At[0]/2,ct=At[1]/2;return Object(r.a)({x:0,y:0,rx:q,ry:ct},bt)},update:function(J,ht){var vt=ht.getContainer(),bt=this.getOptions({}).style,At=this.getSize(J),q={stroke:J.color,rx:At[0]/2,ry:At[1]/2},ct=ht.get("keyShape"),ot=Object(m.A)({},bt,ct.attr(),q);ot=Object(m.A)(ot,J.style),this.updateShape(J,ht,ot,!0),this.updateLinkPoints(J,vt)}},"single-node"),Object(p.r)("diamond",{options:{size:[80,80],style:{stroke:p.e.defaultNode.style.stroke,fill:p.e.defaultNode.style.fill,lineWidth:p.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:p.e.nodeLabel.style.fill,fontSize:p.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:p.e.defaultNode.linkPoints.size,lineWidth:p.e.defaultNode.linkPoints.lineWidth,fill:p.e.defaultNode.linkPoints.fill,stroke:p.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(r.a)({},p.e.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(J,ht){var vt=this.getOptions(J).icon,bt=vt===void 0?{}:vt,At=this.getShapeStyle(J),q=ht.addShape("path",{attrs:At,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),ct=bt.width,ot=bt.height;return bt.show&&ht.addShape("image",{attrs:Object(r.a)({x:-ct/2,y:-ot/2},bt),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(J,ht),q},drawLinkPoints:function(J,ht){var vt=this.getOptions(J).linkPoints,bt=vt===void 0?{}:vt,At=bt.top,q=bt.left,ct=bt.right,ot=bt.bottom,_=bt.size,P=bt.r,Y=Object(r.c)(bt,["top","left","right","bottom","size","r"]),k=this.getSize(J),h=k[0],g=k[1];q&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Y),{x:-h/2,y:0,r:_/2||P||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),ct&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Y),{x:h/2,y:0,r:_/2||P||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),At&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Y),{x:0,y:-g/2,r:_/2||P||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),ot&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Y),{x:0,y:g/2,r:_/2||P||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getPath:function(J){var ht=this.getSize(J),vt=ht[0],bt=ht[1];return[["M",0,-bt/2],["L",vt/2,0],["L",0,bt/2],["L",-vt/2,0],["Z"]]},getShapeStyle:function(J){var ht=this.getOptions(J).style,vt={stroke:J.color},bt=Object(m.A)({},ht,vt),At=this.getPath(J);return Object(r.a)({path:At},bt)},update:function(J,ht){var vt=ht.getContainer(),bt=this.getOptions({}).style,At=this.getPath(J),q={stroke:J.color,path:At},ct=ht.get("keyShape"),ot=Object(m.A)({},bt,ct.attr(),q);ot=Object(m.A)(ot,J.style),this.updateShape(J,ht,ot,!0),this.updateLinkPoints(J,vt)}},"single-node"),Object(p.r)("triangle",{options:{size:40,direction:"up",style:{stroke:p.e.defaultNode.style.stroke,fill:p.e.defaultNode.style.fill,lineWidth:p.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:p.e.nodeLabel.style.fill,fontSize:p.e.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:p.e.defaultNode.linkPoints.size,lineWidth:p.e.defaultNode.linkPoints.lineWidth,fill:p.e.defaultNode.linkPoints.fill,stroke:p.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:Object(r.a)({},p.e.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(J,ht){var vt=this.getOptions(J),bt=vt.icon,At=bt===void 0?{}:bt,q=vt.direction,ct=this.getShapeStyle(J),ot=J.direction||q,_=ht.addShape("path",{attrs:ct,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),P=At.width,Y=At.height,k=At.show,h=At.offset;if(k){var g=-P/2,F=-Y/2;ot!=="up"&&ot!=="down"||(F+=h),ot!=="left"&&ot!=="right"||(g+=h),ht.addShape("image",{attrs:Object(r.a)({x:g,y:F},At),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})}return this.drawLinkPoints(J,ht),_},drawLinkPoints:function(J,ht){var vt=this.getOptions(J),bt=vt.linkPoints,At=bt===void 0?{}:bt,q=vt.direction,ct=J.direction||q,ot=At.top,_=At.left,P=At.right,Y=At.bottom,k=At.size,h=At.r,g=Object(r.c)(At,["top","left","right","bottom","size","r"]),F=this.getSize(J)[0];if(_){var V=null,H=F*Math.sin(1/3*Math.PI),et=F*Math.sin(1/3*Math.PI);ct==="up"?V=[-et,H]:ct==="down"?V=[-et,-H]:ct==="left"&&(V=[-et,et-H]),V&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},g),{x:V[0],y:V[1],r:k/2||h||5}),className:"link-point-left",name:"link-point-left"})}if(P){var nt=null;H=F*Math.sin(1/3*Math.PI),et=F*Math.sin(1/3*Math.PI),ct==="up"?nt=[et,H]:ct==="down"?nt=[et,-H]:ct==="right"&&(nt=[et,et-H]),nt&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},g),{x:nt[0],y:nt[1],r:k/2||h||5}),className:"link-point-right",name:"link-point-right"})}if(ot){var St=null;H=F*Math.sin(1/3*Math.PI),et=F*Math.sin(1/3*Math.PI),ct==="up"?St=[et-H,-H]:ct==="left"?St=[et,-H]:ct==="right"&&(St=[-et,-H]),St&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},g),{x:St[0],y:St[1],r:k/2||h||5}),className:"link-point-top",name:"link-point-top"})}if(Y){var dt=null;H=F*Math.sin(1/3*Math.PI),et=F*Math.sin(1/3*Math.PI),ct==="down"?dt=[-et+H,H]:ct==="left"?dt=[et,H]:ct==="right"&&(dt=[-et,H]),dt&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},g),{x:dt[0],y:dt[1],r:k/2||h||5}),className:"link-point-bottom",name:"link-point-bottom"})}},getPath:function(J){var ht=this.getOptions(J).direction,vt=J.direction||ht,bt=this.getSize(J)[0],At=bt*Math.sin(1/3*Math.PI),q=bt*Math.sin(1/3*Math.PI),ct=[["M",-q,At],["L",0,-At],["L",q,At],["Z"]];return vt==="down"?ct=[["M",-q,-At],["L",q,-At],["L",0,At],["Z"]]:vt==="left"?ct=[["M",-q,q-At],["L",q,-q],["L",q,q],["Z"]]:vt==="right"&&(ct=[["M",q,q-At],["L",-q,q],["L",-q,-q],["Z"]]),ct},getShapeStyle:function(J){var ht=this.getOptions(J).style,vt={stroke:J.color},bt=Object(m.A)({},ht,vt),At=this.getPath(J);return Object(r.a)({path:At},bt)},update:function(J,ht){var vt=ht.getContainer(),bt=this.getOptions({}).style,At=this.getPath(J),q={stroke:J.color,path:At},ct=ht.get("keyShape"),ot=Object(m.A)({},bt,ct.attr(),q);ot=Object(m.A)(ot,J.style),this.updateShape(J,ht,ot,!0),this.updateLinkPoints(J,vt)},updateLinkPoints:function(J,ht){var vt=this.getOptions({}),bt=vt.linkPoints,At=vt.direction,q=J.direction||At,ct=ht.find(function(de){return de.get("className")==="link-point-left"}),ot=ht.find(function(de){return de.get("className")==="link-point-right"}),_=ht.find(function(de){return de.get("className")==="link-point-top"}),P=ht.find(function(de){return de.get("className")==="link-point-bottom"}),Y=bt,k=ct||ot||_||P;k&&(Y=k.attr());var h=Object(m.A)({},Y,J.linkPoints),g=h.fill,F=h.stroke,V=h.lineWidth,H=h.size/2;H||(H=h.r);var et=J.linkPoints?J.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},nt=et.left,St=et.right,dt=et.top,gt=et.bottom,yt=this.getSize(J)[0],Ct={r:H,fill:g,stroke:F,lineWidth:V},Pt=null,Ft=yt*Math.sin(1/3*Math.PI),Tt=yt*Math.sin(1/3*Math.PI);q==="up"?Pt=[-Tt,Ft]:q==="down"?Pt=[-Tt,-Ft]:q==="left"&&(Pt=[-Tt,Tt-Ft]),Pt&&(ct?nt||nt===void 0?ct.attr(Object(r.a)(Object(r.a)({},Ct),{x:Pt[0],y:Pt[1]})):ct.remove():nt&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Ct),{x:Pt[0],y:Pt[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}));var zt=null;q==="up"?zt=[Tt,Ft]:q==="down"?zt=[Tt,-Ft]:q==="right"&&(zt=[Tt,Tt-Ft]),zt&&(ot?St||St===void 0?ot.attr(Object(r.a)(Object(r.a)({},Ct),{x:zt[0],y:zt[1]})):ot.remove():St&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Ct),{x:zt[0],y:zt[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}));var Xt=null;q==="up"?Xt=[Tt-Ft,-Ft]:q==="left"?Xt=[Tt,-Ft]:q==="right"&&(Xt=[-Tt,-Ft]),Xt&&(_?dt||dt===void 0?_.attr(Object(r.a)(Object(r.a)({},Ct),{x:Xt[0],y:Xt[1]})):_.remove():dt&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Ct),{x:Xt[0],y:Xt[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}));var re=null;q==="down"?re=[-Tt+Ft,Ft]:q==="left"?re=[Tt,Ft]:q==="right"&&(re=[-Tt,Ft]),re&&(P?gt||gt===void 0?P.attr(Object(r.a)(Object(r.a)({},Ct),{x:re[0],y:re[1]})):P.remove():gt&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Ct),{x:re[0],y:re[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))}},"single-node"),Object(p.r)("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:p.e.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf"},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(J,ht){var vt=this.getOptions(J).preRect,bt=vt===void 0?{}:vt,At=this.getShapeStyle(J),q=this.getSize(J),ct=q[0],ot=q[1],_=ht.addShape("rect",{attrs:At,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),P=bt.show,Y=Object(r.c)(bt,["show"]);return P&&ht.addShape("rect",{attrs:Object(r.a)({x:-ct/2,y:-ot/2,height:ot},Y),className:"pre-rect",name:"pre-rect",draggable:!0}),this.drawLogoIcon(J,ht),this.drawStateIcon(J,ht),this.drawLinkPoints(J,ht),_},drawLogoIcon:function(J,ht){var vt=this.getOptions(J).logoIcon,bt=vt===void 0?{}:vt,At=this.getSize(J)[0];if(bt.show){var q=bt.width,ct=bt.height,ot=bt.x,_=bt.y,P=bt.offset,Y=Object(r.c)(bt,["width","height","x","y","offset"]);ht.addShape("image",{attrs:Object(r.a)(Object(r.a)({},Y),{x:ot||-At/2+q+P,y:_||-ct/2,width:q,height:ct}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(J,ht){var vt=this.getOptions(J).stateIcon,bt=vt===void 0?{}:vt,At=this.getSize(J)[0];if(bt.show){var q=bt.width,ct=bt.height,ot=bt.x,_=bt.y,P=bt.offset,Y=Object(r.c)(bt,["width","height","x","y","offset"]);ht.addShape("image",{attrs:Object(r.a)(Object(r.a)({},Y),{x:ot||At/2-q+P,y:_||-ct/2,width:q,height:ct}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(J,ht){var vt=this.getOptions(J).linkPoints,bt=vt===void 0?{}:vt,At=bt.top,q=bt.left,ct=bt.right,ot=bt.bottom,_=bt.size,P=bt.r,Y=Object(r.c)(bt,["top","left","right","bottom","size","r"]),k=this.getSize(J),h=k[0],g=k[1];q&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Y),{x:-h/2,y:0,r:_/2||P||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),ct&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Y),{x:h/2,y:0,r:_/2||P||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),At&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Y),{x:0,y:-g/2,r:_/2||P||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),ot&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},Y),{x:0,y:g/2,r:_/2||P||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},drawLabel:function(J,ht){var vt=this.getOptions(J),bt=vt.labelCfg,At=bt===void 0?{}:bt,q=vt.logoIcon,ct=q===void 0?{}:q,ot=vt.descriptionCfg,_=ot===void 0?{}:ot,P=this.getSize(J)[0],Y=null,k=ct.show,h=ct.width,g=-P/2+At.offset;k&&(g=-P/2+h+At.offset);var F=At.style,V=_.style,H=_.paddingTop;return Object(m.x)(J.description)?(Y=ht.addShape("text",{attrs:Object(r.a)(Object(r.a)({},F),{x:g,y:-5,text:J.label}),className:"text-shape",name:"text-shape",draggable:!0}),ht.addShape("text",{attrs:Object(r.a)(Object(r.a)({},V),{x:g,y:17+(H||0),text:J.description}),className:"rect-description",name:"rect-description",draggable:!0})):Y=ht.addShape("text",{attrs:Object(r.a)(Object(r.a)({},F),{x:g,y:7,text:J.label}),className:"text-shape",name:"text-shape",draggable:!0}),Y},getShapeStyle:function(J){var ht=this.getOptions(J).style,vt={stroke:J.color},bt=Object(m.A)({},ht,vt),At=this.getSize(J),q=bt.width||At[0],ct=bt.height||At[1];return Object(r.a)({x:-q/2,y:-ct/2,width:q,height:ct},bt)},update:function(J,ht){var vt=this.getOptions(J),bt=vt.style,At=bt===void 0?{}:bt,q=vt.labelCfg,ct=q===void 0?{}:q,ot=vt.descriptionCfg,_=ot===void 0?{}:ot,P=this.getSize(J),Y=P[0],k=P[1];ht.get("keyShape").attr(Object(r.a)(Object(r.a)({},At),{x:-Y/2,y:-k/2,width:Y,height:k}));var h=ht.getContainer(),g=h.find(function(Mn){return Mn.get("className")==="rect-logo-icon"}),F=g?g.attr():{},V=Object(m.A)({},F,J.logoIcon),H=V.width;H===void 0&&(H=this.options.logoIcon.width);var et=J.logoIcon?J.logoIcon.show:void 0,nt=ct.offset,St=-Y/2+H+nt;et||et===void 0||(St=-Y/2+nt);var dt=h.find(function(Mn){return Mn.get("className")==="node-label"}),gt=h.find(function(Mn){return Mn.get("className")==="rect-description"});if(J.label)if(dt){var yt=J.labelCfg?J.labelCfg.style:{},Ct=Object(m.A)({},dt.attr(),yt);J.label&&(Ct.text=J.label),Ct.x=St,Object(m.x)(J.description)&&(Ct.y=-5),gt&&(gt.resetMatrix(),gt.attr({x:St})),dt.resetMatrix(),dt.attr(Ct)}else h.addShape("text",{attrs:Object(r.a)(Object(r.a)({},ct.style),{x:St,y:J.description?-5:7,text:J.label}),className:"node-label",name:"node-label",draggable:!0});if(Object(m.x)(J.description)){var Pt=_.paddingTop;if(gt){yt=J.descriptionCfg?J.descriptionCfg.style:{};var Ft=Object(m.A)({},gt.attr(),yt);Object(m.x)(J.description)&&(Ft.text=J.description),Ft.x=St,gt.resetMatrix(),gt.attr(Object(r.a)(Object(r.a)({},Ft),{y:17+(Pt||0)}))}else h.addShape("text",{attrs:Object(r.a)(Object(r.a)({},_.style),{x:St,y:17+(Pt||0),text:J.description}),className:"rect-description",name:"rect-description",draggable:!0})}var Tt=h.find(function(Mn){return Mn.get("className")==="pre-rect"});if(Tt){var zt=Object(m.A)({},Tt.attr(),J.preRect);Tt.attr(Object(r.a)(Object(r.a)({},zt),{x:-Y/2,y:-k/2,height:k}))}if(g)if(et||et===void 0){var Xt=V.width,re=V.height,de=V.x,ye=V.y,we=V.offset,De=Object(r.c)(V,["width","height","x","y","offset"]);g.attr(Object(r.a)(Object(r.a)({},De),{x:de||-Y/2+Xt+we,y:ye||-re/2,width:Xt,height:re}))}else g.remove();else et&&this.drawLogoIcon(J,h);var Ve=h.find(function(Mn){return Mn.get("className")==="rect-state-icon"}),pn=Ve?Ve.attr():{},sn=Object(m.A)({},pn,J.stateIcon);if(Ve){sn.show||sn.show===void 0||Ve.remove();var In=sn.width,An=(re=sn.height,de=sn.x,ye=sn.y,sn.offset),Rn=Object(r.c)(sn,["width","height","x","y","offset"]);Ve.attr(Object(r.a)(Object(r.a)({},Rn),{x:de||Y/2-In+An,y:ye||-re/2,width:In,height:re}))}else sn.show&&this.drawStateIcon(J,h);this.updateLinkPoints(J,h)}},"single-node"),Object(p.r)("star",{options:{size:60,style:{stroke:p.e.defaultNode.style.stroke,fill:p.e.defaultNode.style.fill,lineWidth:p.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:p.e.nodeLabel.style.fill,fontSize:p.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:p.e.defaultNode.linkPoints.size,lineWidth:p.e.defaultNode.linkPoints.lineWidth,fill:p.e.defaultNode.linkPoints.fill,stroke:p.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(r.a)({},p.e.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(J,ht){var vt=this.getOptions(J).icon,bt=vt===void 0?{}:vt,At=this.getShapeStyle(J),q=ht.addShape("path",{attrs:At,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),ct=bt.width,ot=bt.height;return bt.show&&ht.addShape("image",{attrs:Object(r.a)({x:-ct/2,y:-ot/2},bt),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(J,ht),q},drawLinkPoints:function(J,ht){var vt=this.getOptions(J).linkPoints,bt=vt===void 0?{}:vt,At=bt.top,q=bt.left,ct=bt.right,ot=bt.leftBottom,_=bt.rightBottom,P=bt.size,Y=bt.r,k=Object(r.c)(bt,["top","left","right","leftBottom","rightBottom","size","r"]),h=this.getSize(J)[0];if(ct){var g=Math.cos(.1*Math.PI)*h,F=Math.sin(.1*Math.PI)*h;ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},k),{x:g,y:-F,r:P/2||Y||5}),className:"link-point-right",name:"link-point-right"})}At&&(g=Math.cos(.5*Math.PI)*h,F=Math.sin(.5*Math.PI)*h,ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},k),{x:g,y:-F,r:P/2||Y||5}),className:"link-point-top",name:"link-point-top"})),q&&(g=Math.cos(.9*Math.PI)*h,F=Math.sin(.9*Math.PI)*h,ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},k),{x:g,y:-F,r:P/2||Y||5}),className:"link-point-left",name:"link-point-left"})),ot&&(g=Math.cos(1.3*Math.PI)*h,F=Math.sin(1.3*Math.PI)*h,ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},k),{x:g,y:-F,r:P/2||Y||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})),_&&(g=Math.cos(1.7*Math.PI)*h,F=Math.sin(1.7*Math.PI)*h,ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},k),{x:g,y:-F,r:P/2||Y||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"}))},getPath:function(J){for(var ht=this.getSize(J)[0],vt=3*ht/8,bt=J.innerR||vt,At=[],q=0;q<5;q++){var ct=Math.cos((18+72*q)/180*Math.PI)*ht,ot=Math.sin((18+72*q)/180*Math.PI)*ht,_=Math.cos((54+72*q)/180*Math.PI)*bt,P=Math.sin((54+72*q)/180*Math.PI)*bt;q===0?At.push(["M",ct,-ot]):At.push(["L",ct,-ot]),At.push(["L",_,-P])}return At.push(["Z"]),At},getShapeStyle:function(J){var ht=this.getOptions(J).style,vt={stroke:J.color},bt=Object(m.A)({},ht,vt),At=this.getPath(J);return Object(r.a)({path:At},bt)},update:function(J,ht){var vt=ht.getContainer(),bt=this.getOptions({}).style,At=this.getPath(J),q={stroke:J.color,path:At},ct=ht.get("keyShape"),ot=Object(m.A)({},bt,ct.attr(),q);ot=Object(m.A)(ot,J.style),this.updateShape(J,ht,ot,!0),this.updateLinkPoints(J,vt)},updateLinkPoints:function(J,ht){var vt=this.getOptions({}).linkPoints,bt=ht.find(function(Ft){return Ft.get("className")==="link-point-left"}),At=ht.find(function(Ft){return Ft.get("className")==="link-point-right"}),q=ht.find(function(Ft){return Ft.get("className")==="link-point-top"}),ct=ht.find(function(Ft){return Ft.get("className")==="link-point-left-bottom"}),ot=ht.find(function(Ft){return Ft.get("className")==="link-point-right-bottom"}),_=vt,P=bt||At||q||ct||ot;P&&(_=P.attr());var Y=Object(m.A)({},_,J.linkPoints),k=Y.fill,h=Y.stroke,g=Y.lineWidth,F=Y.size/2;F||(F=Y.r);var V=J.linkPoints?J.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},H=V.left,et=V.right,nt=V.top,St=V.leftBottom,dt=V.rightBottom,gt=this.getSize(J)[0],yt={r:F,fill:k,stroke:h,lineWidth:g},Ct=Math.cos(.1*Math.PI)*gt,Pt=Math.sin(.1*Math.PI)*gt;At?et||et===void 0?At.attr(Object(r.a)(Object(r.a)({},yt),{x:Ct,y:-Pt})):At.remove():et&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},yt),{x:Ct,y:-Pt}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Ct=Math.cos(.5*Math.PI)*gt,Pt=Math.sin(.5*Math.PI)*gt,q?nt||nt===void 0?q.attr(Object(r.a)(Object(r.a)({},yt),{x:Ct,y:-Pt})):q.remove():nt&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},yt),{x:Ct,y:-Pt}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),Ct=Math.cos(.9*Math.PI)*gt,Pt=Math.sin(.9*Math.PI)*gt,bt?H||H===void 0?bt.attr(Object(r.a)(Object(r.a)({},yt),{x:Ct,y:-Pt})):bt.remove():H&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},yt),{x:Ct,y:-Pt}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),Ct=Math.cos(1.3*Math.PI)*gt,Pt=Math.sin(1.3*Math.PI)*gt,ct?St||St===void 0?ct.attr(Object(r.a)(Object(r.a)({},yt),{x:Ct,y:-Pt})):ct.remove():St&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},yt),{x:Ct,y:-Pt}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0}),Ct=Math.cos(1.7*Math.PI)*gt,Pt=Math.sin(1.7*Math.PI)*gt,ot?dt||dt===void 0?ot.attr(Object(r.a)(Object(r.a)({},yt),{x:Ct,y:-Pt})):ct.remove():dt&&ht.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},yt),{x:Ct,y:-Pt}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0})}},"single-node");var l=function(J){var ht=J.x,vt=J.y;return{x:ht,y:vt,centerX:ht,centerY:vt,minX:ht,minY:vt,maxX:ht,maxY:vt,height:0,width:0}},E=function(J,ht){return 2*Math.abs(J.centerX-ht.centerX)<J.width+ht.width&&2*Math.abs(J.centerY-ht.centerY)<J.height+ht.height},j=function(J){for(var ht=[],vt={},bt=J.length,At=0;At<bt;At++){var q=J[At];q.id=q.x+"|||"+q.y,vt[q.id]=q,ht.push(q)}return ht},y=function(J){return J=j(J)},n=function(J,ht){return[J,{x:J.x,y:ht.y},ht]},s=function(J,ht){return J.width===0&&J.height===0?J:{centerX:J.centerX,centerY:J.centerY,minX:J.minX-ht,minY:J.minY-ht,maxX:J.maxX+ht,maxY:J.maxY+ht,height:J.height+2*ht,width:J.width+2*ht}},d=function(J,ht,vt){var bt=function(ct,ot){var _=Math.abs(ct.x-ot.centerX),P=Math.abs(ct.y-ot.centerY);return _===0&&P===0?0:_/ot.width>P/ot.height}(ht,J);if(bt===0){var At=J.centerX,q=J.centerY;return vt.y<ht.y?q=J.minY:vt.x>ht.x?At=J.maxX:vt.x<ht.x?At=J.minX:vt.x===ht.x&&(q=J.maxY),{x:At,y:q}}return bt?{x:ht.x>J.centerX?J.maxX:J.minX,y:ht.y}:{x:ht.x,y:ht.y>J.centerY?J.maxY:J.minY}},M=function(J,ht){var vt=Math.min(J.minX,ht.minX),bt=Math.min(J.minY,ht.minY),At=Math.max(J.maxX,ht.maxX),q=Math.max(J.maxY,ht.maxY);return{centerX:(vt+At)/2,centerY:(bt+q)/2,minX:vt,minY:bt,maxX:At,maxY:q,height:q-bt,width:At-vt}},S=function(J){var ht=J.minX,vt=J.minY,bt=J.maxX,At=J.maxY;return[{x:ht,y:vt},{x:bt,y:vt},{x:bt,y:At},{x:ht,y:At}]},T=function(J,ht){var vt=J.x,bt=J.y;return vt<ht.minX||vt>ht.maxX||bt<ht.minY||bt>ht.maxY},v=function(J,ht){return Math.abs(J.x-ht.x)+Math.abs(J.y-ht.y)},x=function(J,ht,vt,bt,At){return v(J,ht)+v(J,vt)+function(q,ct){var ot=0;return ct.forEach(function(_){_&&(q.x===_.x&&(ot+=-2),q.y===_.y&&(ot+=-2))}),ot}(J,[ht,vt,bt,At])},C=function(J,ht,vt,bt){var At=vt.x-J.x,q=vt.y-J.y,ct=bt.x-J.x,ot=bt.y-J.y,_=vt.x-ht.x,P=vt.y-ht.y,Y=bt.x-ht.x,k=bt.y-ht.y;return(At*ot-q*ct)*(_*k-P*Y)<=0&&(At*P-q*_)*(ct*k-ot*Y)<=0},N=function(J,ht,vt){if(vt.width===0&&vt.height===0)return!1;var bt=S(vt),At=bt[0],q=bt[1],ct=bt[2],ot=bt[3];return C(J,ht,At,q)||C(J,ht,At,ot)||C(J,ht,q,ct)||C(J,ht,ct,ot)},X=function(J,ht,vt,bt,At,q,ct){var ot=[],_=[ht],P={},Y={},k={};Y[ht.id]=0,k[ht.id]=x(ht,vt,ht);var h={};J.forEach(function(V){h[V.id]=V});for(var g=function(){var H,et,nt,St,dt=1/0;if(_.forEach(function(yt){k[yt.id]<dt&&(dt=k[yt.id],H=yt)}),H===vt){var gt=[];return function yt(Ct,Pt,Ft,Tt,zt){zt===void 0&&(zt=0),Ct.unshift(Pt[Tt]),Ft[Tt]&&Ft[Tt]!==Tt&&zt<=100&&yt(Ct,Pt,Ft,Ft[Tt],zt+1)}(gt,h,P,vt.id),{value:gt}}nt=H,(St=(et=_).indexOf(nt))>-1&&et.splice(St,1),ot.push(H),function(yt,Ct,Pt,Ft){var Tt=[];return yt.forEach(function(zt){zt!==Ct&&(zt.x!==Ct.x&&zt.y!==Ct.y||N(zt,Ct,Pt)||N(zt,Ct,Ft)||Tt.push(zt))}),j(Tt)}(J,H,bt,At).forEach(function(yt){if(ot.indexOf(yt)===-1){_.indexOf(yt)===-1&&_.push(yt);var Ct=k[H.id]+v(H,yt);Y[yt.id]&&Ct>=Y[yt.id]||(P[yt.id]=H.id,Y[yt.id]=Ct,k[yt.id]=Y[yt.id]+x(yt,vt,ht,q,ct))}})};_.length;){var F=g();if(O(F)==="object")return F.value}return[ht,vt]},tt=function(J,ht){var vt=[],bt=J[0];return vt.push("M"+bt.x+" "+bt.y),J.forEach(function(At,q){var ct=J[q+1],ot=J[q+2];if(ct&&ot)if(function(k,h,g){return!(k.x===h.x&&h.x===g.x||k.y===h.y&&h.y===g.y)}(At,ct,ot)){var _=function(k,h,g,F){var V=v(k,h),H=v(g,h);return V<F&&(F=V),H<F&&(F=H),[{x:h.x-F/V*(h.x-k.x),y:h.y-F/V*(h.y-k.y)},{x:h.x-F/H*(h.x-g.x),y:h.y-F/H*(h.y-g.y)}]}(At,ct,ot,ht),P=_[0],Y=_[1];vt.push("L"+P.x+" "+P.y),vt.push("Q"+ct.x+" "+ct.y+" "+Y.x+" "+Y.y),vt.push("L"+Y.x+" "+Y.y)}else vt.push("L"+ct.x+" "+ct.y);else ct&&vt.push("L"+ct.x+" "+ct.y)}),vt.join("")},it=function(J,ht,vt,bt,At){var q,ct;if(vt&&vt.getType()?vt.getType()==="combo"?((q=vt.getKeyShape().getCanvasBBox()||l(J)).centerX=(q.minX+q.maxX)/2,q.centerY=(q.minY+q.maxY)/2):q=vt.getBBox():q=l(J),bt&&bt.getType()?bt.getType()==="combo"?((ct=bt.getKeyShape().getCanvasBBox()||l(ht)).centerX=(ct.minX+ct.maxX)/2,ct.centerY=(ct.minY+ct.maxY)/2):ct=bt&&bt.getBBox():ct=l(ht),E(q,ct))return y(n(J,ht));var ot=s(q,At),_=s(ct,At);if(E(ot,_))return y(n(J,ht));var P=d(ot,J,ht),Y=d(_,ht,J),k=function(et){et===void 0&&(et=[]);var nt=[],St=[];et.forEach(function(Pt){nt.push(Pt.x),St.push(Pt.y)});var dt=Math.min.apply(Math,nt),gt=Math.max.apply(Math,nt),yt=Math.min.apply(Math,St),Ct=Math.max.apply(Math,St);return{centerX:(dt+gt)/2,centerY:(yt+Ct)/2,maxX:gt,maxY:Ct,minX:dt,minY:yt,height:Ct-yt,width:gt-dt}}([P,Y]),h=M(ot,k),g=M(_,k),F=[];F=(F=F.concat(S(h))).concat(S(g));var V={x:(J.x+ht.x)/2,y:(J.y+ht.y)/2};[k,h,g].forEach(function(et){F=F.concat(function(nt,St){return function(dt,gt){return gt<dt.minX||gt>dt.maxX?[]:[{x:gt,y:dt.minY},{x:gt,y:dt.maxY}]}(nt,St.x).concat(function(dt,gt){return gt<dt.minY||gt>dt.maxY?[]:[{x:dt.minX,y:gt},{x:dt.maxX,y:gt}]}(nt,St.y))}(et,V).filter(function(nt){return T(nt,ot)&&T(nt,_)}))}),[{x:P.x,y:Y.y},{x:Y.x,y:P.y}].forEach(function(et){T(et,ot)&&T(et,_)&&F.push(et)}),F.unshift(P),F.push(Y),F=j(F);var H=X(F,P,Y,q,ct,J,ht);return H.unshift(J),H.push(ht),y(H)};function pt(Et){return(pt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J})(Et)}var ft={offset:20,maxAllowedDirectionChange:90,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:function(J,ht){return Math.abs(J.x-ht.x)+Math.abs(J.y-ht.y)},fallbackRoute:function(J,ht,vt,bt,At){return y(it(J,ht,vt,bt,At.offset))}},Ot=function(J,ht){var vt=Math.floor(Math.abs(J/ht));return vt<0?0:(J<0?-1:1)*vt},wt=function(J,ht){var vt=ht.x-J.x,bt=ht.y-J.y;return vt||bt?(360+180*Math.atan2(bt,vt)/Math.PI)%360:0},xt=function(J,ht){var vt=Math.abs(J-ht);return vt>180?360-vt:vt},lt=function(J,ht,vt){for(var bt=1/0,At=0,q=ht.length;At<q;At++){var ct=vt(J,ht[At]);ct<bt&&(bt=ct)}return bt},Vt=function(J,ht,vt,bt,At){var q=[];if(!vt)return q;var ct=At.directions,ot=At.offset,_=vt.getBBox(),P=ht.x>_.minX&&ht.x<_.maxX&&ht.y>_.minY&&ht.y<_.maxY,Y=s(_,ot);for(var k in Y)Y[k]=Ot(Y[k],At.gridSize);if(P)for(var h=0,g=ct;h<g.length;h++){var F=g[h],V=[[{x:Y.minX,y:Y.minY},{x:Y.maxX,y:Y.minY}],[{x:Y.minX,y:Y.minY},{x:Y.minX,y:Y.maxY}],[{x:Y.maxX,y:Y.minY},{x:Y.maxX,y:Y.maxY}],[{x:Y.minX,y:Y.maxY},{x:Y.maxX,y:Y.maxY}]];for(k=0;k<4;k++){var H,et=V[k];(H=p.n.getLineIntersect(J,{x:J.x+F.stepX*Y.width,y:J.y+F.stepY*Y.height},et[0],et[1]))&&!N(J,H,_)&&(H.id=H.x+"|||"+H.y,q.push(H))}}else(H=d(Y,J,bt)).id=H.x+"|||"+H.y,q.push(H);return q},Lt=function(J,ht,vt,bt,At){var q=Object(m.e)(ft,At);q.obstacles=q.obstacles||[];var ct=function(yt,Ct,Pt){var Ft={};return yt.forEach(function(Tt){if(Tt)for(var zt=s(Tt.getBBox(),Pt),Xt=Ot(zt.minX,Ct);Xt<=Ot(zt.maxX,Ct);Xt+=1)for(var re=Ot(zt.minY,Ct);re<=Ot(zt.maxY,Ct);re+=1)Ft[Xt+"|||"+re]=!0}),Ft}(q.obstacles.concat([vt,bt]),q.gridSize,q.offset),ot={x:Ot(J.x,q.gridSize),y:Ot(J.y,q.gridSize)},_={x:Ot(ht.x,q.gridSize),y:Ot(ht.y,q.gridSize)};J.id=ot.x+"|||"+ot.y,ht.id=_.x+"|||"+_.y;var P=Vt(ot,J,vt,_,q),Y=Vt(_,ht,bt,ot,q);P.forEach(function(yt){delete ct[yt.id]}),Y.forEach(function(yt){delete ct[yt.id]});for(var k={},h={},g={},F={},V={},H=0;H<P.length;H++){var et=P[H];k[et.id]=et,F[et.id]=0,V[et.id]=lt(et,Y,q.distFunc)}for(var nt=function(Ct,Pt){var Ft,Tt=wt(Ct,Pt);if(g[Ct.id]){var zt=wt({x:parseFloat(g[Ct.id].split("|||")[0]),y:parseFloat(g[Ct.id].split("|||")[1])},Ct);Ft=xt(zt,Tt)}else{var Xt=wt(ot,Ct);Ft=xt(Xt,Tt)}return Ft},St=q.maximumLoops,dt=function(){var Ct,Pt=1/0;for(var Ft in k)V[Ft]<=Pt&&(Pt=V[Ft],Ct=k[Ft]);if(!Ct)return"break";if(Y.findIndex(function(we){return we.x===Ct.x&&we.y===Ct.y})>-1)return{value:function(we){var De=[ht],Ve={x:parseFloat(we.split("|||")[0]),y:parseFloat(we.split("|||")[1]),id:we};for(nt(Ve,_)&&De.unshift({x:Ve.x===_.x?ht.x:Ve.x*q.gridSize,y:Ve.y===_.y?ht.y:Ve.y*q.gridSize});g[we]&&g[we]!==we;){var pn={x:parseFloat(we.split("|||")[0]),y:parseFloat(we.split("|||")[1]),id:we},sn=g[we],In={x:parseFloat(sn.split("|||")[0]),y:parseFloat(sn.split("|||")[1]),id:sn};nt(In,pn)&&De.unshift({x:In.x===pn.x?De[0].x:In.x*q.gridSize,y:In.y===pn.y?De[0].y:In.y*q.gridSize}),we=sn}var An=parseFloat(we.split("|||")[0]),Rn=parseFloat(we.split("|||")[1]);return De[0].x=An===ot.x?J.x:De[0].x,De[0].y=Rn===ot.y?J.y:De[0].y,De.unshift(J),De}(Ct.id)};delete k[Ct.id],h[Ct.id]=!0;for(var Tt=0;Tt<q.directions.length;Tt++){var zt=q.directions[Tt],Xt={x:Ct.x+zt.stepX,y:Ct.y+zt.stepY,id:Ct.x+zt.stepX+"|||"+(Ct.y+zt.stepY)};if(!h[Xt.id]){var re=nt(Ct,Xt);if(!(re>q.maxAllowedDirectionChange||ct[Xt.id])){k[Xt.id]||(k[Xt.id]=Xt);var de=q.distFunc(Ct,Xt)+(isNaN(q.penalties[re])?q.gridSize:q.penalties[re]),ye=F[Ct.id]+de;F[Xt.id]&&ye>=F[Xt.id]||(g[Xt.id]=Ct.id,F[Xt.id]=ye,V[Xt.id]=ye+lt(Xt,Y,q.distFunc))}}}St-=1};Object.keys(k).length>0&&St>0;){var gt=dt();if(pt(gt)==="object")return gt.value;if(gt==="break")break}return q.fallbackRoute(J,ht,vt,bt,q)};Object(p.q)("polyline",{options:{color:p.e.defaultEdge.color,size:p.e.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:p.e.defaultEdge.style.stroke,lineAppendWidth:p.e.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:p.e.edgeLabel.style.fill,fontSize:p.e.edgeLabel.style.fontSize}},routeCfg:{obstacles:[],maxAllowedDirectionChange:90,maximumLoops:500,gridSize:10},stateStyles:Object(r.a)({},p.e.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(J,ht){var vt=this.getShapeStyle(J);return vt.radius===0&&delete vt.radius,ht.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:vt})},getShapeStyle:function(J){var ht=this.options.style,vt={stroke:J.color},bt=Object(m.A)({},ht,vt,J.style);J=this.getPathPoints(J),this.radius=bt.radius,this.offset=bt.offset;var At=J.startPoint,q=J.endPoint,ct=this.getControlPoints(J),ot=[At];ct&&(ot=ot.concat(ct)),ot.push(q);var _=J.sourceNode,P=J.targetNode,Y=bt.radius,k=this.options.routeCfg;k||(k={}),k.offset=bt.offset;var h=this.getPath(ot,_,P,Y,k);return(Object(m.m)(h)&&h.length<=1||Object(m.x)(h)&&h.indexOf("L")===-1)&&(h="M0 0, L0 0"),(isNaN(At.x)||isNaN(At.y)||isNaN(q.x)||isNaN(q.y))&&(h="M0 0, L0 0"),Object(m.A)({},p.e.defaultEdge.style,bt,{lineWidth:J.size,path:h})},updateShapeStyle:function(J,ht){var vt=ht.getContainer(),bt={stroke:J.color},At=vt.find(function(nt){return nt.get("className")==="edge-shape"})||ht.getKeyShape(),q=J.size,ct=(J=this.getPathPoints(J)).startPoint,ot=J.endPoint,_=this.getControlPoints(J),P=[ct];_&&(P=P.concat(_)),P.push(ot);var Y=At.attr(),k=Object(m.A)({},bt,Y,J.style),h=J.sourceNode,g=J.targetNode,F=k.radius,V=this.options.routeCfg;V||(V={}),V.offset=k.offset;var H=this.getPath(P,h,g,F,V);(Object(m.m)(H)&&H.length<=1||Object(m.x)(H)&&H.indexOf("L")===-1)&&(H="M0 0, L0 0"),(isNaN(ct.x)||isNaN(ct.y)||isNaN(ot.x)||isNaN(ot.y))&&(H="M0 0, L0 0"),Y.endArrow&&k.endArrow===!1&&(J.style.endArrow={path:""}),Y.startArrow&&k.startArrow===!1&&(J.style.startArrow={path:""});var et=Object(m.A)(bt,At.attr(),{lineWidth:q,path:H},J.style);At&&At.attr(et)},getPath:function(J,ht,vt,bt,At){var q;if(!At.offset||J.length>2){if(bt)return tt(J,bt);var ct=[];return Object(m.f)(J,function(ot,_){_===0?ct.push(["M",ot.x,ot.y]):ct.push(["L",ot.x,ot.y])}),ct}return bt?(q=Lt(J[0],J[J.length-1],ht,vt,At),tt(q,bt)):(q=Lt(J[0],J[J.length-1],ht,vt,At),p.n.pointsToPolygon(q))}},"single-edge")}]).default})},Sq3C:function(zn,Ut,z){var at=z("sKgW"),a=z("zoYe"),A=z("wy8a"),e=z("quyA"),r=z("Z1HP"),p=z("Em2t"),m=Math.ceil;function O(l,E){E=E===void 0?" ":a(E);var j=E.length;if(j<2)return j?at(E,l):E;var y=at(E,m(l/r(E)));return e(E)?A(p(y),0,l).join(""):y.slice(0,l)}zn.exports=O},Sxd8:function(zn,Ut,z){var at=z("ZCgT");function a(A){var e=at(A),r=e%1;return e===e?r?e-r:e:0}zn.exports=a},TEat:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return y});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("w02o"),r=z("tKoa");function p(n,s,d){var M=d.map(function(v){return v[s]}).filter(function(v){return v!==void 0}),S=M.length>0?Math.max.apply(Math,M):0,T=Math.abs(n)%360;return T?S*360/T:S}function m(n){var s=n.chart,d=n.options,M=d.data,S=d.barStyle,T=d.color,v=d.tooltip,x=d.colorField,C=d.type,N=d.xField,X=d.yField;s.data(M);var tt=Object(A.b)({},n,{options:{tooltip:v,seriesField:x,interval:{style:S,color:T,shape:C==="line"?"line":"intervel"},minColumnWidth:d.minBarWidth,maxColumnWidth:d.maxBarWidth,columnBackground:d.barBackground}});return Object(r.c)(tt),C==="line"&&Object(r.e)({chart:s,options:{xField:N,yField:X,seriesField:x,point:{shape:"circle",color:T}}}),n}function O(n){var s,d=n.options,M=d.yField,S=d.data,T=d.maxAngle;return Object(A.e)(Object(e.f)((s={},s[M]={min:0,max:p(T,M,S)},s)))(n)}function l(n){var s=n.chart,d=n.options,M=d.radius,S=d.innerRadius,T=d.startAngle,v=d.endAngle;return s.coordinate({type:"polar",cfg:{radius:M,innerRadius:S,startAngle:T,endAngle:v}}).transpose(),n}function E(n){var s=n.chart,d=n.options,M=d.xField,S=d.xAxis;return s.axis(M,S),n}function j(n){return Object(A.e)(m,O,E,l,e.c,e.a,e.j,e.k,e.d,Object(e.b)())(n)}var y=function(n){Object(at.b)(s,n);function s(){var d=n!==null&&n.apply(this,arguments)||this;return d.type="radial-bar",d}return s.prototype.changeData=function(d){this.updateOption({data:d}),O({chart:this.chart,options:this.options}),this.chart.changeData(d)},s.prototype.getDefaultOptions=function(){return Object(A.b)({},n.prototype.getDefaultOptions.call(this),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240})},s.prototype.getSchemaAdaptor=function(){return j},s}(a.a)},U8jP:function(zn,Ut,z){"use strict";z.r(Ut),z.d(Ut,"version",function(){return m});var at=z("R5nb");z.d(Ut,"Shape",function(){return at});var a=z("aFU3");for(var A in a)["default","Canvas","Group","Shape","getArcParams","version"].indexOf(A)<0&&function(O){z.d(Ut,O,function(){return a[O]})}(A);var e=z("sYIZ");z.d(Ut,"Canvas",function(){return e.a});var r=z("wq2r");z.d(Ut,"Group",function(){return r.a});var p=z("nCnq");z.d(Ut,"getArcParams",function(){return p.a});var m="0.5.6"},Uo7R:function(zn,Ut,z){"use strict";var at=z("mrSG"),a=z("zJSt"),A=z("w02o"),e=z("YuPD"),r=z("tKoa"),p=z("iTfj"),m={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(xt){return xt.id},source:function(xt){return xt.source},target:function(xt){return xt.target},sourceWeight:function(xt){return xt.value||1},targetWeight:function(xt){return xt.value||1},sortBy:null};function O(wt,xt,lt){Object(p.forIn)(wt,function(Vt,Lt){Vt.inEdges=xt.filter(function(Et){return""+lt.target(Et)==""+Lt}),Vt.outEdges=xt.filter(function(Et){return""+lt.source(Et)==""+Lt}),Vt.edges=Vt.outEdges.concat(Vt.inEdges),Vt.frequency=Vt.edges.length,Vt.value=0,Vt.inEdges.forEach(function(Et){Vt.value+=lt.targetWeight(Et)}),Vt.outEdges.forEach(function(Et){Vt.value+=lt.sourceWeight(Et)})})}function l(wt,xt){var lt={weight:function(Et,J){return J.value-Et.value},frequency:function(Et,J){return J.frequency-Et.frequency},id:function(Et,J){return(""+xt.id(Et)).localeCompare(""+xt.id(J))}},Vt=lt[xt.sortBy];!Vt&&Object(p.isFunction)(xt.sortBy)&&(Vt=xt.sortBy),Vt&&wt.sort(Vt)}function E(wt,xt){var lt=wt.length;if(!lt)throw new TypeError("Invalid nodes: it's empty!");if(xt.weight){var Vt=xt.nodePaddingRatio;if(Vt<0||Vt>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var Lt=Vt/(2*lt),Et=xt.nodeWidthRatio;if(Et<=0||Et>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var J=0;wt.forEach(function(vt){J+=vt.value}),wt.forEach(function(vt){vt.weight=vt.value/J,vt.width=vt.weight*(1-Vt),vt.height=Et}),wt.forEach(function(vt,bt){for(var At=0,q=bt-1;q>=0;q--)At+=wt[q].width+2*Lt;var ct=vt.minX=Lt+At,ot=vt.maxX=vt.minX+vt.width,_=vt.minY=xt.y-Et/2,P=vt.maxY=_+Et;vt.x=[ct,ot,ot,ct],vt.y=[_,_,P,P]})}else{var ht=1/lt;wt.forEach(function(vt,bt){vt.x=(bt+.5)*ht,vt.y=xt.y})}return wt}function j(wt,xt,lt){if(lt.weight){var Vt={};Object(p.forIn)(wt,function(Lt,Et){Vt[Et]=Lt.value}),xt.forEach(function(Lt){var Et=lt.source(Lt),J=lt.target(Lt),ht=wt[Et],vt=wt[J];if(ht&&vt){var bt=Vt[Et],At=lt.sourceWeight(Lt),q=ht.minX+(ht.value-bt)/ht.value*ht.width,ct=q+At/ht.value*ht.width;Vt[Et]-=At;var ot=Vt[J],_=lt.targetWeight(Lt),P=vt.minX+(vt.value-ot)/vt.value*vt.width,Y=P+_/vt.value*vt.width;Vt[J]-=_;var k=lt.y;Lt.x=[q,ct,P,Y],Lt.y=[k,k,k,k],Lt.source=ht,Lt.target=vt}})}else xt.forEach(function(Lt){var Et=wt[lt.source(Lt)],J=wt[lt.target(Lt)];Et&&J&&(Lt.x=[Et.x,J.x],Lt.y=[Et.y,J.y],Lt.source=Et,Lt.target=J)});return xt}function y(wt){return Object(p.assign)({},m,wt)}function n(wt,xt){var lt=y(wt),Vt={},Lt=xt.nodes,Et=xt.links;Lt.forEach(function(vt){var bt=lt.id(vt);Vt[bt]=vt}),O(Vt,Et,lt),l(Lt,lt);var J=E(Lt,lt),ht=j(Vt,Et,lt);return{nodes:J,links:ht}}var s=z("DyAw"),d="x",M="y",S="name",T="source";function v(wt){var xt=wt.options,lt=xt.data,Vt=xt.sourceField,Lt=xt.targetField,Et=xt.weightField,J=xt.nodePaddingRatio,ht=xt.nodeWidthRatio,vt=Object(s.b)(lt,Vt,Lt,Et),bt=n({weight:!0,nodePaddingRatio:J,nodeWidthRatio:ht},vt),At=bt.nodes,q=bt.links,ct=At.map(function(_){return{id:_.id,x:_.x,y:_.y,name:_.name}}),ot=q.map(function(_){return{source:_.source.name,target:_.target.name,x:_.x,y:_.y,value:_.value}});return Object(at.a)(Object(at.a)({},wt),{ext:Object(at.a)(Object(at.a)({},wt.ext),{chordData:{nodesData:ct,edgesData:ot}})})}function x(wt){var xt,lt=wt.chart;return lt.scale((xt={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}},xt[S]={sync:"color"},xt[T]={sync:"color"},xt)),wt}function C(wt){var xt=wt.chart;return xt.axis(!1),wt}function N(wt){var xt=wt.chart;return xt.legend(!1),wt}function X(wt){var xt=wt.chart;return xt.tooltip({showTitle:!1,showMarkers:!1}),wt}function tt(wt){var xt=wt.chart;return xt.coordinate("polar").reflect("y"),wt}function it(wt){var xt=wt.chart,lt=wt.options,Vt=wt.ext.chordData.nodesData,Lt=lt.nodeStyle,Et=lt.label,J=xt.createView();return J.data(Vt),Object(r.f)({chart:J,options:{xField:d,yField:M,seriesField:S,polygon:{style:Lt},label:Et,tooltip:!1}}),wt}function pt(wt){var xt=wt.chart,lt=wt.options,Vt=wt.ext.chordData.edgesData,Lt=lt.edgeStyle,Et=lt.tooltip,J=xt.createView();J.data(Vt);var ht={xField:d,yField:M,seriesField:T,edge:{style:Lt,shape:"arc"},tooltip:Et};return Object(r.b)({chart:J,options:ht}),wt}function ft(wt){return Object(e.e)(v,tt,x,C,N,X,pt,it,A.c,A.a,A.j)(wt)}var Ot=function(wt){Object(at.b)(xt,wt);function xt(){var lt=wt!==null&&wt.apply(this,arguments)||this;return lt.type="chord",lt}return xt.prototype.getDefaultOptions=function(){return{nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(Vt,Lt){var Et=(Vt[0]+Vt[1])/2,J=Et>.5?-4:4;return{labelEmit:!0,style:{fill:"#8c8c8c"},offsetX:J,content:Lt}}},tooltip:{fields:["source","target","value"],formatter:function(Vt){var Lt=Vt.source,Et=Vt.target,J=Vt.value;return{name:Lt+" -> "+Et,value:J}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05}},xt.prototype.getSchemaAdaptor=function(){return ft},xt}(a.a)},WOQw:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return p});var at=z("mrSG"),a=z("iTfj"),A=z("YuPD");function e(m,O){var l=m.xField,E=m.yField,j=m.colorField,y=m.shapeField,n=m.sizeField,s=m.styleField,d=m.rawFields,M=d===void 0?[]:d,S=[];if(O==="color")S=Object(at.d)([j||l],M);else if(O==="shape")S=Object(at.d)([y||l],M);else if(O==="size")S=Object(at.d)([n||l],M);else{S=Object(at.d)([l,E,j,y,n,s],M);var T=["x","y","color","shape","size","style"].indexOf(O),v=S[T];S.splice(T,1),S.unshift(v)}return Object(a.uniq)(S.filter(function(x){return!!x}))}function r(m,O){if(!!O)return function(){for(var l=[],E=0;E<arguments.length;E++)l[E]=arguments[E];var j={};return m.forEach(function(y,n){j[y]=l[n]}),delete j.undefined,O(j)}}function p(m){var O=m.chart,l=m.options,E=l.type,j=l.args,y=l.mapping,n=l.xField,s=l.yField,d=l.colorField,M=l.shapeField,S=l.sizeField,T=l.tooltipFields,v=l.label,x=l.state;if(!y)return m;var C=y.color,N=y.shape,X=y.size,tt=y.style,it=y.tooltip,pt=O[E](j).position(n+"*"+s);if(Object(a.isString)(C))d?pt.color(d,C):pt.color(C);else if(Object(a.isFunction)(C)){var ft=e(l,"color");pt.color(ft.join("*"),r(ft,C))}else d&&pt.color(d,C);if(Object(a.isString)(N))M?pt.shape(M,[N]):pt.shape(N);else if(Object(a.isFunction)(N)){var ft=e(l,"shape");pt.shape(ft.join("*"),r(ft,N))}else M&&pt.shape(M,N);if(Object(a.isNumber)(X))S?pt.size(S,X):pt.size(X);else if(Object(a.isFunction)(X)){var ft=e(l,"size");pt.size(ft.join("*"),r(ft,X))}else S&&pt.size(S,X);if(Object(a.isFunction)(tt)){var ft=e(l,"style");pt.style(ft.join("*"),r(ft,tt))}else Object(a.isObject)(tt)&&pt.style(tt);if(T===!1?pt.tooltip(!1):Object(a.isEmpty)(T)||pt.tooltip(T.join("*"),r(T,it)),v===!1)pt.label(!1);else if(v){var Ot=v.callback,wt=v.fields,xt=Object(at.c)(v,["callback","fields"]);pt.label({fields:wt||[s],callback:Ot,cfg:Object(A.o)(xt)})}return x&&pt.state(x),[n,s].filter(function(lt){return lt!==d}).forEach(function(lt){O.legend(lt,!1)}),Object(at.a)(Object(at.a)({},m),{ext:{geometry:pt}})}},WXeg:function(zn,Ut){},WbAE:function(zn,Ut){},XiRp:function(zn,Ut){},XloR:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return O});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("hJqF"),r=z("kXyF"),p=z("iTfj"),m=function(l){Object(at.b)(E,l);function E(){return l!==null&&l.apply(this,arguments)||this}return E.prototype.active=function(){var j=this.getView(),y=this.context.event;if(y.data){var n=y.data.items,s=j.geometries.filter(function(d){return d.type==="point"});Object(p.each)(s,function(d){Object(p.each)(d.elements,function(M){var S=Object(p.findIndex)(n,function(T){return T.data===M.data})!==-1;M.setState("active",S)})})}},E.prototype.getView=function(){return this.context.view},E}(r.InteractionAction);Object(r.registerAction)("marker-active",m),Object(r.registerInteraction)("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}]});var O=function(l){Object(at.b)(E,l);function E(){var j=l!==null&&l.apply(this,arguments)||this;return j.type="line",j}return E.prototype.changeData=function(j){this.updateOption({data:j}),this.chart.changeData(j)},E.prototype.getDefaultOptions=function(){return Object(A.b)({},l.prototype.getDefaultOptions.call(this),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left"},isStack:!1})},E.prototype.getSchemaAdaptor=function(){return e.a},E}(a.a)},XpFM:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return v});var at=z("mrSG"),a=z("zJSt"),A=z("iTfj"),e=z("w02o"),r=z("n/J0"),p=z("YuPD"),m=z("5kt6");function O(x){return x.map(function(C,N){var X;return X={},X[m.f]=C-(x[N-1]||0),X[m.e]=""+N,X}).filter(function(C){return!!C[m.f]})}function l(x){var C;return[(C={},C[m.d]=Object(A.clamp)(x,0,1),C)]}function E(x,C){var N=Object(A.get)(C,["ticks"],[]),X=Object(A.size)(N)?N:[0,Object(A.clamp)(x,0,1),1];return O(X)}function j(x){var C=x.chart,N=x.options,X=N.percent,tt=N.range,it=N.radius,pt=N.innerRadius,ft=N.startAngle,Ot=N.endAngle,wt=N.axis,xt=N.indicator,lt=tt.color;if(xt){var Vt=l(X),Lt=C.createView({id:m.b});Lt.data(Vt),Lt.point().position(m.d+"*1").shape("gauge-indicator").customInfo({defaultColor:C.getTheme().defaultColor,indicator:xt}),Lt.coordinate("polar",{startAngle:ft,endAngle:Ot,radius:pt*it}),Lt.axis(m.d,wt),Lt.scale(m.d,Object(p.k)(wt,r.a))}var Et=E(X,N.range),J=C.createView({id:m.g});J.data(Et);var ht=Object(A.isString)(lt)?[lt,m.a]:lt;return J.interval().position("1*"+m.f).color(m.e,ht).adjust("stack"),J.coordinate("polar",{innerRadius:pt,radius:it,startAngle:ft,endAngle:Ot}).transpose(),x}function y(x){var C,N=x.chart,X=x.options,tt=X.type,it=X.meter;if(tt==="meter"){var pt=X.innerRadius,ft=X.radius,Ot=X.startAngle,wt=X.endAngle,xt=N.getTheme().background,lt=xt;(!lt||lt==="transparent")&&(lt="#fff");var Vt=N.createView({id:m.c});Vt.data([(C={},C[m.e]="1",C[m.f]=1,C)]),Vt.interval().position("1*"+m.f).color(lt).adjust("stack").shape("meter-gauge").customInfo(it||{}),Vt.coordinate("polar",{innerRadius:pt,radius:ft,startAngle:Ot,endAngle:wt}).transpose()}return x}function n(x){var C;return Object(p.e)(Object(e.f)((C={range:{min:0,max:1,maxLimit:1,minLimit:0}},C[m.d]={},C)))(x)}function s(x,C){var N=x.chart,X=x.options,tt=X.statistic,it=X.percent;if(N.getController("annotation").clear(!0),tt){var pt=tt.content,ft=void 0;pt&&(ft=Object(p.b)({},{formatter:function(wt){var xt=wt.percent;return(xt*100).toFixed(2)+"%"},style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},pt)),Object(p.l)(N,{statistic:Object(at.a)(Object(at.a)({},tt),{content:ft})},{percent:it})}return C&&N.render(!0),x}function d(x){var C=x.chart;return C.legend(!1),C.tooltip(!1),x}function M(x){return Object(p.e)(e.a,j,n,s,e.c,e.j,y,d)(x)}var S=z("kXyF");Object(S.registerShape)("point","gauge-indicator",{draw:function(C,N){var X=C.customInfo,tt=X.indicator,it=X.defaultColor,pt=tt,ft=pt.pointer,Ot=pt.pin,wt=N.addGroup(),xt=this.parsePoint({x:0,y:0});return ft&&wt.addShape("line",{name:"pointer",attrs:Object(at.a)({x1:xt.x,y1:xt.y,x2:C.x,y2:C.y,stroke:it},ft.style)}),Ot&&wt.addShape("circle",{name:"pin",attrs:Object(at.a)({x:xt.x,y:xt.y,stroke:it},Ot.style)}),wt}});var T=z("+Oe8");Object(S.registerShape)("interval","meter-gauge",{draw:function(C,N){var X=C.customInfo,tt=X.steps,it=tt===void 0?50:tt,pt=X.stepRatio,ft=pt===void 0?.5:pt,Ot=this.coordinate.endAngle-this.coordinate.startAngle,wt=Ot/it,xt=0;ft>0&&ft<=1&&(wt=Ot/((1-ft)/ft*(it-1)+it),xt=wt*(1-ft)/ft);var lt=N.addGroup();if(xt>0)for(var Vt=this.coordinate.getCenter(),Lt=this.coordinate.getRadius(),Et=S.Util.getAngle(C,this.coordinate),J=Et.startAngle,ht=Et.endAngle,vt=J,bt=0;vt<ht&&bt<2*it-1;bt++){var At=bt%2;if(At){var q=Object(T.getSectorPath)(Vt.x,Vt.y,Lt,vt,Math.min(vt+xt,ht),Lt*this.coordinate.innerRadius);lt.addShape("path",{name:"meter-gauge-mask",attrs:{path:q,fill:C.color,stroke:C.color,lineWidth:.5},capture:!1})}vt+=At?xt:wt}return lt}});var v=function(x){Object(at.b)(C,x);function C(){var N=x!==null&&x.apply(this,arguments)||this;return N.type="gauge",N}return C.prototype.getDefaultOptions=function(){var N;return{percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(N={},N[m.f]={sync:"v"},N[m.d]={sync:"v",tickCount:5,tickInterval:.2},N),animation:!1}},C.prototype.changeData=function(N){this.updateOption({percent:N});var X=this.chart.views.find(function(it){return it.id===m.b});X&&X.data(l(N));var tt=this.chart.views.find(function(it){return it.id===m.g});tt&&tt.data(E(N,this.options.range)),s({chart:this.chart,options:this.options},!0)},C.prototype.getSchemaAdaptor=function(){return M},C}(a.a)},"Y+LX":function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return m});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("sqD9"),r=z("DMQx");function p(O){var l=O.chart,E=O.options,j=E.xField,y=E.yField,n=E.xAxis,s=E.yAxis,d=E.barStyle,M=E.barWidthRatio,S=E.label,T=E.data,v=E.seriesField,x=E.isStack,C=E.minBarWidth,N=E.maxBarWidth;S&&!S.position&&(S.position="left",S.layout||(S.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]));var X=E.legend;v?X!==!1&&(X=Object(at.a)({position:x?"top-left":"right-top",reversed:!x},X||{})):X=!1,O.options.legend=X;var tt=E.tooltip;return v&&tt!==!1&&(tt=Object(at.a)({reversed:!x},tt||{})),O.options.tooltip=tt,l.coordinate().transpose(),Object(r.a)({chart:l,options:Object(at.a)(Object(at.a)({},E),{label:S,xField:y,yField:j,xAxis:s,yAxis:n,columnStyle:d,columnWidthRatio:M,minColumnWidth:C,maxColumnWidth:N,columnBackground:E.barBackground,data:T&&T.slice().reverse()})},!0)}var m=function(O){Object(at.b)(l,O);function l(){var E=O!==null&&O.apply(this,arguments)||this;return E.type="bar",E}return l.prototype.changeData=function(E){this.updateOption({data:E});var j=this.options,y=j.xField,n=j.yField,s=j.isPercent;this.chart.changeData(Object(e.a)(E,y,n,y,s))},l.prototype.getDefaultOptions=function(){return Object(A.b)({},O.prototype.getDefaultOptions.call(this),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]})},l.prototype.getSchemaAdaptor=function(){return p},l}(a.a)},YP77:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return y});var at=z("mrSG"),a=z("zJSt"),A=z("B3DA"),e=z("iTfj"),r=z("YuPD"),p=z("w02o"),m=z("u9/z"),O=z("5kt6");function l(n){var s=n.chart,d=n.options,M=d.innerRadius,S=d.radius;return s.coordinate("theta",{innerRadius:M,radius:S}),n}function E(n,s){var d=n.chart,M=n.options,S=M.innerRadius,T=M.statistic,v=M.percent,x=M.meta;if(d.getController("annotation").clear(!0),S&&T){var C=T.content;C&&!C.formatter&&(C.formatter=function(N){var X=N.percent,tt=Object(e.get)(x,[O.d,"formatter"]);return tt?tt(X):X}),Object(r.m)(d,{statistic:Object(at.a)(Object(at.a)({},T),{content:C}),plotType:"ring-progress"},{percent:v})}return s&&d.render(!0),n}function j(n){return Object(r.e)(m.b,Object(p.f)({}),l,E,p.a,p.j,Object(p.b)())(n)}var y=function(n){Object(at.b)(s,n);function s(){var d=n!==null&&n.apply(this,arguments)||this;return d.type="ring-process",d}return s.prototype.getDefaultOptions=function(){return{percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"},formatter:function(M){var S=M.percent;return(S*100).toFixed(2)+"%"}}},animation:!0}},s.prototype.changeData=function(d){this.updateOption({percent:d}),this.chart.data(Object(A.a)(d)),E({chart:this.chart,options:this.options},!0)},s.prototype.getSchemaAdaptor=function(){return j},s}(a.a)},YuPD:function(zn,Ut,z){"use strict";z.d(Ut,"e",function(){return at}),z.d(Ut,"k",function(){return a}),z.d(Ut,"n",function(){return e}),z.d(Ut,"j",function(){return E}),z.d(Ut,"a",function(){return p}),z.d(Ut,"g",function(){return j}),z.d(Ut,"c",function(){return y}),z.d(Ut,"f",function(){return n}),z.d(Ut,"d",function(){return s.a}),z.d(Ut,"o",function(){return d}),z.d(Ut,"h",function(){return x}),z.d(Ut,"b",function(){return Ot}),z.d(Ut,"i",function(){return wt}),z.d(Ut,"m",function(){return xt.c}),z.d(Ut,"l",function(){return xt.b});function at(){for(var Et=[],J=0;J<arguments.length;J++)Et[J]=arguments[J];return function(ht){return Et.reduce(function(vt,bt){return bt(vt)},ht)}}function a(Et,J){var ht={};return Et!==null&&typeof Et=="object"&&J.forEach(function(vt){var bt=Et[vt];bt!==void 0&&(ht[vt]=bt)}),ht}var A=z("iTfj");function e(Et,J){return Object(A.reduce)(J,function(ht,vt,bt){return ht.replace(new RegExp("{\\s*"+bt+"\\s*}","g"),vt)},Et)}var r=z("mrSG"),p;(function(Et){Et.ERROR="error",Et.WARN="warn",Et.INFO="log"})(p||(p={}));var m="AntV/G2Plot";function O(Et){for(var J=[],ht=1;ht<arguments.length;ht++)J[ht-1]=arguments[ht];var vt=0;return m+": "+Et.replace(/%s/g,function(){return""+J[vt++]})}function l(Et,J){for(var ht=[],vt=2;vt<arguments.length;vt++)ht[vt-2]=arguments[vt];if(!Et){var bt=new Error(O.apply(void 0,Object(r.d)([J],ht)));throw bt.name=m,bt}}function E(Et,J,ht){for(var vt=[],bt=3;bt<arguments.length;bt++)vt[bt-3]=arguments[bt];J||console[Et](O.apply(void 0,Object(r.d)([ht],vt)))}function j(Et){if(!Et)return{width:0,height:0};var J=getComputedStyle(Et);return{width:(Et.clientWidth||parseInt(J.width,10))-parseInt(J.paddingLeft,10)-parseInt(J.paddingRight,10),height:(Et.clientHeight||parseInt(J.height,10))-parseInt(J.paddingTop,10)-parseInt(J.paddingBottom,10)}}function y(Et,J){return Et.geometries.find(function(ht){return ht.type===J})}function n(Et){return Object(A.reduce)(Et.geometries,function(J,ht){return J.concat(ht.elements)},[])}var s=z("4Olw");function d(Et){if(!Object(A.isType)(Et,"Object"))return Et;var J=Object(r.a)({},Et);return J.formatter&&!J.content&&(J.content=J.formatter),J}var M=z("6JdA");function S(Et,J){var ht=[];if(Et.length){ht.push(["M",Et[0].x,Et[0].y]);for(var vt=1,bt=Et.length;vt<bt;vt+=1){var At=Et[vt];ht.push(["L",At.x,At.y])}J&&ht.push(["Z"])}return ht}var T=function(J,ht,vt,bt){var At=[],q,ct,ot=!!bt,_,P;if(ot){_=[Infinity,Infinity],P=[-Infinity,-Infinity];for(var Y=0,k=J.length;Y<k;Y++){var h=J[Y];_=M.c.min([0,0],_,h),P=M.c.max([0,0],P,h)}_=M.c.min([0,0],_,bt[0]),P=M.c.max([0,0],P,bt[1])}for(var Y=0,g=J.length;Y<g;Y++){var h=J[Y];if(vt)q=J[Y?Y-1:g-1],ct=J[(Y+1)%g];else if(Y===0||Y===g-1){At.push(h);continue}else q=J[Y-1],ct=J[Y+1];var F=[0,0];F=M.c.sub(F,ct,q),F=M.c.scale(F,F,ht);var V=M.c.distance(h,q),H=M.c.distance(h,ct),et=V+H;et!==0&&(V/=et,H/=et);var nt=M.c.scale([0,0],F,-V),St=M.c.scale([0,0],F,H),dt=M.c.add([0,0],h,nt),gt=M.c.add([0,0],h,St);ot&&(dt=M.c.max([0,0],dt,_),dt=M.c.min([0,0],dt,P),gt=M.c.max([0,0],gt,_),gt=M.c.min([0,0],gt,P)),At.push(dt),At.push(gt)}return vt&&At.push(At.shift()),At};function v(Et,J,ht){for(var vt=!!J,bt=[],At=0,q=Et.length;At<q;At+=2)bt.push([Et[At],Et[At+1]]);for(var ct=T(bt,.4,vt,ht),ot=bt.length,_=[],P,Y,k,At=0;At<ot-1;At++)P=ct[At*2],Y=ct[At*2+1],k=bt[At+1],_.push(["C",P[0],P[1],Y[0],Y[1],k[0],k[1]]);return vt&&(P=ct[ot],Y=ct[ot+1],k=bt[0],_.push(["C",P[0],P[1],Y[0],Y[1],k[0],k[1]])),_}function x(Et,J,ht){var vt=[],bt=Et[0],At=null;if(Et.length<=2)return S(Et,J);for(var q=0,ct=Et.length;q<ct;q++){var ot=Et[q];(!At||!(At.x===ot.x&&At.y===ot.y))&&(vt.push(ot.x),vt.push(ot.y),At=ot)}var _=ht||[[0,0],[1,1]],P=v(vt,J,_);return P.unshift(["M",bt.x,bt.y]),P}var C=5,N={}.toString,X=function(J,ht){return N.call(J)==="[object "+ht+"]"},tt=function(J){return X(J,"Array")},it=function(J){return typeof J=="object"&&J!==null},pt=function(J){if(!it(J)||!X(J,"Object"))return!1;for(var ht=J;Object.getPrototypeOf(ht)!==null;)ht=Object.getPrototypeOf(ht);return Object.getPrototypeOf(J)===ht},ft=function Et(J,ht,vt,bt){vt=vt||0,bt=bt||C;for(var At in ht)if(Object.prototype.hasOwnProperty.call(ht,At)){var q=ht[At];q?pt(q)?(pt(J[At])||(J[At]={}),vt<bt?Et(J[At],q,vt+1,bt):J[At]=ht[At]):tt(q)?(J[At]=[],J[At]=J[At].concat(q)):J[At]=q:J[At]=q}},Ot=function(J){for(var ht=[],vt=1;vt<arguments.length;vt++)ht[vt-1]=arguments[vt];for(var bt=0;bt<ht.length;bt+=1)ft(J,ht[bt]);return J};function wt(Et){if(!Et)return Et;var J=Et.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g);return J.map(function(ht){return ht.toLowerCase()}).join("-")}var xt=z("mj6g"),lt;function Vt(){return lt||(lt=document.createElement("canvas").getContext("2d")),lt}var Lt=Object(A.memoize)(function(Et,J){J===void 0&&(J={});var ht=J.fontSize,vt=J.fontFamily,bt=vt===void 0?"sans-serif":vt,At=J.fontWeight,q=J.fontStyle,ct=J.fontVariant,ot=Vt();ot.font=[q,At,ct,ht+"px",bt].join(" ");var _=ot.measureText(Object(A.isString)(Et)?Et:"");return _.width},function(Et,J){return J===void 0&&(J={}),Object(r.d)([Et],Object(A.values)(J)).join("")})},Z1HP:function(zn,Ut,z){var at=z("ycre"),a=z("quyA"),A=z("q4HE");function e(r){return a(r)?A(r):at(r)}zn.exports=e},ZCgT:function(zn,Ut,z){var at=z("tLB3"),a=1/0,A=17976931348623157e292;function e(r){if(!r)return r===0?r:0;if(r=at(r),r===a||r===-a){var p=r<0?-1:1;return p*A}return r===r?r:0}zn.exports=e},ZxFD:function(zn,Ut,z){"use strict";z.r(Ut),z.d(Ut,"create",function(){return a}),z.d(Ut,"clone",function(){return A}),z.d(Ut,"fromValues",function(){return e}),z.d(Ut,"copy",function(){return r}),z.d(Ut,"set",function(){return p}),z.d(Ut,"add",function(){return m}),z.d(Ut,"subtract",function(){return O}),z.d(Ut,"multiply",function(){return l}),z.d(Ut,"divide",function(){return E}),z.d(Ut,"ceil",function(){return j}),z.d(Ut,"floor",function(){return y}),z.d(Ut,"min",function(){return n}),z.d(Ut,"max",function(){return s}),z.d(Ut,"round",function(){return d}),z.d(Ut,"scale",function(){return M}),z.d(Ut,"scaleAndAdd",function(){return S}),z.d(Ut,"distance",function(){return T}),z.d(Ut,"squaredDistance",function(){return v}),z.d(Ut,"length",function(){return x}),z.d(Ut,"squaredLength",function(){return C}),z.d(Ut,"negate",function(){return N}),z.d(Ut,"inverse",function(){return X}),z.d(Ut,"normalize",function(){return tt}),z.d(Ut,"dot",function(){return it}),z.d(Ut,"cross",function(){return pt}),z.d(Ut,"lerp",function(){return ft}),z.d(Ut,"random",function(){return Ot}),z.d(Ut,"transformMat2",function(){return wt}),z.d(Ut,"transformMat2d",function(){return xt}),z.d(Ut,"transformMat3",function(){return lt}),z.d(Ut,"transformMat4",function(){return Vt}),z.d(Ut,"rotate",function(){return Lt}),z.d(Ut,"angle",function(){return Et}),z.d(Ut,"zero",function(){return J}),z.d(Ut,"str",function(){return ht}),z.d(Ut,"exactEquals",function(){return vt}),z.d(Ut,"equals",function(){return bt}),z.d(Ut,"len",function(){return At}),z.d(Ut,"sub",function(){return q}),z.d(Ut,"mul",function(){return ct}),z.d(Ut,"div",function(){return ot}),z.d(Ut,"dist",function(){return _}),z.d(Ut,"sqrDist",function(){return P}),z.d(Ut,"sqrLen",function(){return Y}),z.d(Ut,"forEach",function(){return k});var at=z("yU0y");function a(){var h=new at.a(2);return at.a!=Float32Array&&(h[0]=0,h[1]=0),h}function A(h){var g=new at.a(2);return g[0]=h[0],g[1]=h[1],g}function e(h,g){var F=new at.a(2);return F[0]=h,F[1]=g,F}function r(h,g){return h[0]=g[0],h[1]=g[1],h}function p(h,g,F){return h[0]=g,h[1]=F,h}function m(h,g,F){return h[0]=g[0]+F[0],h[1]=g[1]+F[1],h}function O(h,g,F){return h[0]=g[0]-F[0],h[1]=g[1]-F[1],h}function l(h,g,F){return h[0]=g[0]*F[0],h[1]=g[1]*F[1],h}function E(h,g,F){return h[0]=g[0]/F[0],h[1]=g[1]/F[1],h}function j(h,g){return h[0]=Math.ceil(g[0]),h[1]=Math.ceil(g[1]),h}function y(h,g){return h[0]=Math.floor(g[0]),h[1]=Math.floor(g[1]),h}function n(h,g,F){return h[0]=Math.min(g[0],F[0]),h[1]=Math.min(g[1],F[1]),h}function s(h,g,F){return h[0]=Math.max(g[0],F[0]),h[1]=Math.max(g[1],F[1]),h}function d(h,g){return h[0]=Math.round(g[0]),h[1]=Math.round(g[1]),h}function M(h,g,F){return h[0]=g[0]*F,h[1]=g[1]*F,h}function S(h,g,F,V){return h[0]=g[0]+F[0]*V,h[1]=g[1]+F[1]*V,h}function T(h,g){var F=g[0]-h[0],V=g[1]-h[1];return Math.hypot(F,V)}function v(h,g){var F=g[0]-h[0],V=g[1]-h[1];return F*F+V*V}function x(h){var g=h[0],F=h[1];return Math.hypot(g,F)}function C(h){var g=h[0],F=h[1];return g*g+F*F}function N(h,g){return h[0]=-g[0],h[1]=-g[1],h}function X(h,g){return h[0]=1/g[0],h[1]=1/g[1],h}function tt(h,g){var F=g[0],V=g[1],H=F*F+V*V;return H>0&&(H=1/Math.sqrt(H)),h[0]=g[0]*H,h[1]=g[1]*H,h}function it(h,g){return h[0]*g[0]+h[1]*g[1]}function pt(h,g,F){var V=g[0]*F[1]-g[1]*F[0];return h[0]=h[1]=0,h[2]=V,h}function ft(h,g,F,V){var H=g[0],et=g[1];return h[0]=H+V*(F[0]-H),h[1]=et+V*(F[1]-et),h}function Ot(h,g){g=g||1;var F=at.c()*2*Math.PI;return h[0]=Math.cos(F)*g,h[1]=Math.sin(F)*g,h}function wt(h,g,F){var V=g[0],H=g[1];return h[0]=F[0]*V+F[2]*H,h[1]=F[1]*V+F[3]*H,h}function xt(h,g,F){var V=g[0],H=g[1];return h[0]=F[0]*V+F[2]*H+F[4],h[1]=F[1]*V+F[3]*H+F[5],h}function lt(h,g,F){var V=g[0],H=g[1];return h[0]=F[0]*V+F[3]*H+F[6],h[1]=F[1]*V+F[4]*H+F[7],h}function Vt(h,g,F){var V=g[0],H=g[1];return h[0]=F[0]*V+F[4]*H+F[12],h[1]=F[1]*V+F[5]*H+F[13],h}function Lt(h,g,F,V){var H=g[0]-F[0],et=g[1]-F[1],nt=Math.sin(V),St=Math.cos(V);return h[0]=H*St-et*nt+F[0],h[1]=H*nt+et*St+F[1],h}function Et(h,g){var F=h[0],V=h[1],H=g[0],et=g[1],nt=Math.sqrt(F*F+V*V)*Math.sqrt(H*H+et*et),St=nt&&(F*H+V*et)/nt;return Math.acos(Math.min(Math.max(St,-1),1))}function J(h){return h[0]=0,h[1]=0,h}function ht(h){return"vec2("+h[0]+", "+h[1]+")"}function vt(h,g){return h[0]===g[0]&&h[1]===g[1]}function bt(h,g){var F=h[0],V=h[1],H=g[0],et=g[1];return Math.abs(F-H)<=at.b*Math.max(1,Math.abs(F),Math.abs(H))&&Math.abs(V-et)<=at.b*Math.max(1,Math.abs(V),Math.abs(et))}var At=x,q=O,ct=l,ot=E,_=T,P=v,Y=C,k=function(){var h=a();return function(g,F,V,H,et,nt){var St,dt;for(F||(F=2),V||(V=0),H?dt=Math.min(H*F+V,g.length):dt=g.length,St=V;St<dt;St+=F)h[0]=g[St],h[1]=g[St+1],et(h,h,nt),g[St]=h[0],g[St+1]=h[1];return g}}()},a8tM:function(zn,Ut,z){"use strict";z.d(Ut,"c",function(){return C}),z.d(Ut,"b",function(){return pt}),z.d(Ut,"a",function(){return ft});var at=z("rePB");function a(Ot){var wt=0,xt=Ot.children,lt=xt&&xt.length;if(!lt)wt=1;else for(;--lt>=0;)wt+=xt[lt].value;Ot.value=wt}var A=function(){return this.eachAfter(a)},e=z("uFwe"),r=function(Ot,wt){var xt=-1,lt=Object(e.a)(this),Vt;try{for(lt.s();!(Vt=lt.n()).done;){var Lt=Vt.value;Ot.call(wt,Lt,++xt,this)}}catch(Et){lt.e(Et)}finally{lt.f()}return this},p=function(Ot,wt){for(var xt=this,lt=[xt],Vt,Lt,Et=-1;xt=lt.pop();)if(Ot.call(wt,xt,++Et,this),Vt=xt.children)for(Lt=Vt.length-1;Lt>=0;--Lt)lt.push(Vt[Lt]);return this},m=function(Ot,wt){for(var xt=this,lt=[xt],Vt=[],Lt,Et,J,ht=-1;xt=lt.pop();)if(Vt.push(xt),Lt=xt.children)for(Et=0,J=Lt.length;Et<J;++Et)lt.push(Lt[Et]);for(;xt=Vt.pop();)Ot.call(wt,xt,++ht,this);return this},O=function(Ot,wt){var xt=-1,lt=Object(e.a)(this),Vt;try{for(lt.s();!(Vt=lt.n()).done;){var Lt=Vt.value;if(Ot.call(wt,Lt,++xt,this))return Lt}}catch(Et){lt.e(Et)}finally{lt.f()}},l=function(Ot){return this.eachAfter(function(wt){for(var xt=+Ot(wt.data)||0,lt=wt.children,Vt=lt&&lt.length;--Vt>=0;)xt+=lt[Vt].value;wt.value=xt})},E=function(Ot){return this.eachBefore(function(wt){wt.children&&wt.children.sort(Ot)})},j=function(Ot){for(var wt=this,xt=y(wt,Ot),lt=[wt];wt!==xt;)wt=wt.parent,lt.push(wt);for(var Vt=lt.length;Ot!==xt;)lt.splice(Vt,0,Ot),Ot=Ot.parent;return lt};function y(Ot,wt){if(Ot===wt)return Ot;var xt=Ot.ancestors(),lt=wt.ancestors(),Vt=null;for(Ot=xt.pop(),wt=lt.pop();Ot===wt;)Vt=Ot,Ot=xt.pop(),wt=lt.pop();return Vt}var n=function(){for(var Ot=this,wt=[Ot];Ot=Ot.parent;)wt.push(Ot);return wt},s=function(){return Array.from(this)},d=function(){var Ot=[];return this.eachBefore(function(wt){wt.children||Ot.push(wt)}),Ot},M=function(){var Ot=this,wt=[];return Ot.each(function(xt){xt!==Ot&&wt.push({source:xt.parent,target:xt})}),wt},S=z("o0o1"),T=z.n(S),v=T.a.mark(x);function x(){var Ot,wt,xt,lt,Vt,Lt;return T.a.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:Ot=this,xt=[Ot];case 1:wt=xt.reverse(),xt=[];case 2:if(!(Ot=wt.pop())){J.next=8;break}return J.next=5,Ot;case 5:if(lt=Ot.children)for(Vt=0,Lt=lt.length;Vt<Lt;++Vt)xt.push(lt[Vt]);J.next=2;break;case 8:if(xt.length){J.next=1;break}case 9:case"end":return J.stop()}},v,this)}function C(Ot,wt){Ot instanceof Map?(Ot=[void 0,Ot],wt===void 0&&(wt=tt)):wt===void 0&&(wt=X);for(var xt=new ft(Ot),lt,Vt=[xt],Lt,Et,J,ht;lt=Vt.pop();)if((Et=wt(lt.data))&&(ht=(Et=Array.from(Et)).length))for(lt.children=Et,J=ht-1;J>=0;--J)Vt.push(Lt=Et[J]=new ft(Et[J])),Lt.parent=lt,Lt.depth=lt.depth+1;return xt.eachBefore(pt)}function N(){return C(this).eachBefore(it)}function X(Ot){return Ot.children}function tt(Ot){return Array.isArray(Ot)?Ot[1]:null}function it(Ot){Ot.data.value!==void 0&&(Ot.value=Ot.data.value),Ot.data=Ot.data.data}function pt(Ot){var wt=0;do Ot.height=wt;while((Ot=Ot.parent)&&Ot.height<++wt)}function ft(Ot){this.data=Ot,this.depth=this.height=0,this.parent=null}ft.prototype=C.prototype=Object(at.a)({constructor:ft,count:A,each:r,eachAfter:m,eachBefore:p,find:O,sum:l,sort:E,path:j,ancestors:n,descendants:s,leaves:d,links:M,copy:N},Symbol.iterator,x)},aFU3:function(zn,Ut,z){"use strict";z.r(Ut),z.d(Ut,"version",function(){return S});var at=z("tvuL");z.d(Ut,"PathUtil",function(){return at});var a=z("4cbP"),A=z.n(a);for(var e in a)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","version"].indexOf(e)<0&&function(T){z.d(Ut,T,function(){return a[T]})}(e);var r=z("tdXX"),p=z.n(r);for(var e in r)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","version"].indexOf(e)<0&&function(v){z.d(Ut,v,function(){return r[v]})}(e);var m=z("5eLp");z.d(Ut,"Event",function(){return m.a});var O=z("LmB6");z.d(Ut,"Base",function(){return O.a});var l=z("EkMX");z.d(Ut,"AbstractCanvas",function(){return l.a});var E=z("+DwW");z.d(Ut,"AbstractGroup",function(){return E.a});var j=z("MaEA");z.d(Ut,"AbstractShape",function(){return j.a});var y=z("1MZV");z.d(Ut,"getBBoxMethod",function(){return y.a});var n=z("vIgC");z.d(Ut,"getTextHeight",function(){return n.b}),z.d(Ut,"assembleFont",function(){return n.a});var s=z("sstZ");z.d(Ut,"isAllowCapture",function(){return s.b});var d=z("aSjE");z.d(Ut,"multiplyVec2",function(){return d.c}),z.d(Ut,"invert",function(){return d.a});var M=z("lt7v");z.d(Ut,"getOffScreenContext",function(){return M.a});var S="0.5.4"},aLzy:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return q});var at=z("mrSG"),a=z("zJSt"),A=z("w02o"),e=z("YuPD"),r=z("5OoT"),p=z("iTfj"),m=z("5HRO"),O=z("WOQw"),l="$$percentage$$",E="$$mappingValue$$",j="$$conversion$$",y="$$totalPercentage$$",n="$$x$$",s="$$y$$";function d(ct,ot,_){var P=[],Y=_.yField,k=_.maxSize,h=_.minSize,g=Object(p.maxBy)(ot,Y)[Y],F=Object(p.isNumber)(k)?k:1,V=Object(p.isNumber)(h)?h:0;return P=Object(p.map)(ct,function(H,et){var nt=(H[Y]||0)/g;return H[l]=nt,H[E]=(F-V)*nt+V,H[j]=[Object(p.get)(ct,[et-1,Y]),H[Y]],H}),P}function M(ct){return function(ot){var _=ot.chart,P=ot.options,Y=P.conversionTag,k=_.getOptions().data;if(Y){var h=Y.formatter;k.forEach(function(g,F){if(!(F<=0)){var V=ct(g,F,k,{top:!0,text:{content:Object(p.isFunction)(h)?h(g,k):h,offsetX:Y.offsetX,offsetY:Y.offsetY,position:"end",autoRotate:!1,style:Object(at.a)({textAlign:"start",textBaseline:"middle"},Y.style)}});_.annotation().line(V)}})}return ot}}function S(ct){var ot=ct.chart,_=ct.options,P=_.data,Y=P===void 0?[]:P,k=_.yField,h=_.maxSize,g=_.minSize,F=d(Y,Y,{yField:k,maxSize:h,minSize:g});return ot.data(F),ct}function T(ct){var ot=ct.chart,_=ct.options,P=_.xField,Y=_.yField,k=_.color,h=_.tooltip,g=_.label,F=Object(m.a)(h,[P,Y]),V=F.fields,H=F.formatter;Object(O.a)({chart:ot,options:{type:"interval",xField:P,yField:E,colorField:P,tooltipFields:Object(p.isArray)(V)&&V.concat([l,j]),mapping:{shape:"funnel",tooltip:H,color:k},label:g}});var et=Object(e.c)(ct.chart,"interval");return et.adjust("symmetric"),ct}function v(ct){var ot=ct.chart,_=ct.options,P=_.isTransposed;return ot.coordinate({type:"rect",actions:P?[]:[["transpose"],["scale",1,-1]]}),ct}function x(ct){var ot=ct.options,_=ot.maxSize,P=function(k,h,g,F){var V=_-(_-k[E])/2;return Object(at.a)(Object(at.a)({},F),{start:[h-.5,V],end:[h-.5,V+.05]})};return M(P)(ct),ct}function C(ct){return Object(e.e)(S,T,v,x)(ct)}function N(ct){var ot,_=ct.chart,P=ct.options,Y=P.data,k=Y===void 0?[]:Y,h=P.yField;return _.data(k),_.scale((ot={},ot[h]={sync:!0},ot)),ct}function X(ct){var ot=ct.chart,_=ct.options,P=_.data,Y=_.xField,k=_.yField,h=_.color,g=_.compareField,F=_.isTransposed,V=_.tooltip,H=_.maxSize,et=_.minSize,nt=_.label;return ot.facet("mirror",{fields:[g],transpose:!F,padding:F?0:[32,0,0,0],eachView:function(dt,gt){var yt=F?gt.rowIndex:gt.columnIndex;F||dt.coordinate({type:"rect",actions:[["transpose"],["scale",yt===0?-1:1,-1]]});var Ct=d(gt.data,P,{yField:k,maxSize:H,minSize:et});dt.data(Ct);var Pt=Object(m.a)(V,[Y,k,g]),Ft=Pt.fields,Tt=Pt.formatter,zt=F?{offset:yt===0?10:-23,position:yt===0?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:yt===0?"end":"start"}};Object(O.a)({chart:dt,options:{type:"interval",xField:Y,yField:E,colorField:Y,tooltipFields:Object(p.isArray)(Ft)&&Ft.concat([l,j]),mapping:{shape:"funnel",tooltip:Tt,color:h,style:{lineWidth:1,stroke:"#fff"}},label:nt===!1?!1:Object(e.b)({},zt,nt)}})}}),ct}function tt(ct){var ot=ct.chart,_=ct.options,P=_.conversionTag,Y=_.isTransposed;return ot.once("beforepaint",function(){ot.views.forEach(function(k,h){var g=function(V,H,et,nt){var St=h===0?-1:1;return Object(e.b)({},nt,{start:[H-.5,V[E]],end:[H-.5,V[E]+.05],text:Y?{style:{textAlign:"start"}}:{offsetX:P!==!1?St*P.offsetX:0,style:{textAlign:h===0?"end":"start"}}})};M(g)(Object(e.b)({},{chart:k,options:_}))})}),ct}function it(ct){return Object(e.e)(N,X,tt)(ct)}function pt(ct){var ot,_=ct.chart,P=ct.options,Y=P.data,k=Y===void 0?[]:Y,h=P.yField;return _.data(k),_.scale((ot={},ot[h]={sync:!0},ot)),ct}function ft(ct){var ot=ct.chart,_=ct.options,P=_.seriesField,Y=_.isTransposed;return ot.facet("rect",{fields:[P],padding:[Y?0:32,10,0,10],eachView:function(h,g){C(Object(e.b)({},ct,{chart:h,options:{data:g.data}}))}}),ct}function Ot(ct){return Object(e.e)(pt,ft)(ct)}function wt(ct){var ot=ct.chart,_=ct.options,P=_.data,Y=P===void 0?[]:P,k=_.yField,h=Object(p.reduce)(Y,function(V,H){return V+(H[k]||0)},0),g=Object(p.maxBy)(Y,k)[k],F=Object(p.map)(Y,function(V,H){var et=[],nt=[];if(V[y]=(V[k]||0)/h,H){var St=Y[H-1][n],dt=Y[H-1][s];et[0]=St[3],nt[0]=dt[3],et[1]=St[2],nt[1]=dt[2]}else et[0]=-.5,nt[0]=1,et[1]=.5,nt[1]=1;return nt[2]=nt[1]-V[y],et[2]=(nt[2]+1)/4,nt[3]=nt[2],et[3]=-et[2],V[n]=et,V[s]=nt,V[l]=(V[k]||0)/g,V[j]=[Object(p.get)(Y,[H-1,k]),V[k]],V});return ot.data(F),ct}function xt(ct){var ot=ct.chart,_=ct.options,P=_.xField,Y=_.yField,k=_.color,h=_.tooltip,g=_.label,F=Object(m.a)(h,[P,Y]),V=F.fields,H=F.formatter;return Object(O.a)({chart:ot,options:{type:"polygon",xField:n,yField:s,colorField:P,tooltipFields:Object(p.isArray)(V)&&V.concat([l,j]),label:g,mapping:{tooltip:H,color:k}}}),ct}function lt(ct){var ot=ct.chart,_=ct.options,P=_.isTransposed;return ot.coordinate({type:"rect",actions:P?[["transpose"],["reflect","x"]]:[]}),ct}function Vt(ct){var ot=function(P,Y,k,h){return Object(at.a)(Object(at.a)({},h),{start:[P[n][1],P[s][1]],end:[P[n][1]+.05,P[s][1]]})};return M(ot)(ct),ct}function Lt(ct){return Object(e.e)(wt,xt,lt,Vt)(ct)}function Et(ct){var ot,_=ct.options,P=_.compareField,Y=_.xField,k=_.yField,h={minSize:0,maxSize:1,meta:(ot={},ot[E]={min:0,max:1,nice:!1},ot),label:P?{fields:[Y,k,P,l,j],style:{fill:"#fff",fontSize:12},formatter:function(F){return""+F[k]}}:{fields:[Y,k,l,j],offset:0,position:"middle",style:{fill:"#fff",fontSize:12},formatter:function(F){return F[Y]+" "+F[k]}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,title:Y,formatter:function(F){return{name:F[Y],value:F[k]}}},conversionTag:{offsetX:10,offsetY:0,style:{},formatter:function(F){return"\u8F6C\u5316\u7387: "+r.a.apply(void 0,F[j])}}};return Object(e.b)({options:h},ct)}function J(ct){var ot=ct.options,_=ot.compareField,P=ot.dynamicHeight,Y=ot.seriesField;return Y?Ot(ct):_?it(ct):P?Lt(ct):C(ct)}function ht(ct){var ot,_=ct.options,P=_.xAxis,Y=_.yAxis,k=_.xField,h=_.yField;return Object(e.e)(Object(A.f)((ot={},ot[k]=P,ot[h]=Y,ot)))(ct)}function vt(ct){var ot=ct.chart;return ot.axis(!1),ct}function bt(ct){var ot=ct.chart,_=ct.options,P=_.legend;return P===!1?ot.legend(!1):ot.legend(P),ct}function At(ct){return Object(e.e)(Et,J,ht,vt,A.k,A.c,bt,A.a,A.j,Object(A.b)())(ct)}var q=function(ct){Object(at.b)(ot,ct);function ot(){var _=ct!==null&&ct.apply(this,arguments)||this;return _.type="funnel",_}return ot.prototype.getDefaultOptions=function(){return{appendPadding:[0,80]}},ot.prototype.getSchemaAdaptor=function(){return At},ot}(a.a)},aN7R:function(zn,Ut,z){"use strict";z.r(Ut),z.d(Ut,"Base",function(){return E}),z.d(Ut,"Circle",function(){return n}),z.d(Ut,"Dom",function(){return d}),z.d(Ut,"Ellipse",function(){return S}),z.d(Ut,"Image",function(){return v}),z.d(Ut,"Line",function(){return N}),z.d(Ut,"Marker",function(){return pt}),z.d(Ut,"Path",function(){return Ot}),z.d(Ut,"Polygon",function(){return xt}),z.d(Ut,"Polyline",function(){return Vt}),z.d(Ut,"Rect",function(){return bt}),z.d(Ut,"Text",function(){return Y});var at={};z.r(at),z.d(at,"Base",function(){return E}),z.d(at,"Circle",function(){return n}),z.d(at,"Dom",function(){return d}),z.d(at,"Ellipse",function(){return S}),z.d(at,"Image",function(){return v}),z.d(at,"Line",function(){return N}),z.d(at,"Marker",function(){return pt}),z.d(at,"Path",function(){return Ot}),z.d(at,"Polygon",function(){return xt}),z.d(at,"Polyline",function(){return Vt}),z.d(at,"Rect",function(){return bt}),z.d(at,"Text",function(){return Y});var a=z("mrSG"),A=z("aFU3"),e=z("APlK"),r=z("c+wO"),p=z("c0lT"),m=z("IvmH"),O=z("5z4m"),l=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="svg",g.canFill=!1,g.canStroke=!1,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},h.prototype.afterAttrsChange=function(g){k.prototype.afterAttrsChange.call(this,g);var F=this.get("canvas");if(F&&F.get("autoDraw")){var V=F.get("context");this.draw(V,g)}},h.prototype.getShapeBase=function(){return at},h.prototype.getGroupBase=function(){return O.a},h.prototype.onCanvasChange=function(g){Object(p.b)(this,g)},h.prototype.calculateBBox=function(){var g=this.get("el"),F=null;if(g)F=g.getBBox();else{var V=Object(A.getBBoxMethod)(this.get("type"));V&&(F=V(this))}if(F){var H=F.x,et=F.y,nt=F.width,St=F.height,dt=this.getHitLineWidth(),gt=dt/2,yt=H-gt,Ct=et-gt,Pt=H+nt+gt,Ft=et+St+gt;return{x:yt,y:Ct,minX:yt,minY:Ct,maxX:Pt,maxY:Ft,width:nt+dt,height:St+dt}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},h.prototype.isFill=function(){var g=this.attr(),F=g.fill,V=g.fillStyle;return(F||V||this.isClipShape())&&this.canFill},h.prototype.isStroke=function(){var g=this.attr(),F=g.stroke,V=g.strokeStyle;return(F||V)&&this.canStroke},h.prototype.draw=function(g,F){var V=this.get("el");this.get("destroyed")?V&&V.parentNode.removeChild(V):(V||Object(r.a)(this),Object(e.a)(this,g),this.createPath(g,F),this.shadow(g,F),this.strokeAndFill(g,F),this.transform(F))},h.prototype.createPath=function(g,F){},h.prototype.strokeAndFill=function(g,F){var V=F||this.attr(),H=V.fill,et=V.fillStyle,nt=V.stroke,St=V.strokeStyle,dt=V.fillOpacity,gt=V.strokeOpacity,yt=V.lineWidth,Ct=this.get("el");this.canFill&&(F?"fill"in V?this._setColor(g,"fill",H):"fillStyle"in V&&this._setColor(g,"fill",et):this._setColor(g,"fill",H||et),dt&&Ct.setAttribute(m.b.fillOpacity,dt)),this.canStroke&&yt>0&&(F?"stroke"in V?this._setColor(g,"stroke",nt):"strokeStyle"in V&&this._setColor(g,"stroke",St):this._setColor(g,"stroke",nt||St),gt&&Ct.setAttribute(m.b.strokeOpacity,gt),yt&&Ct.setAttribute(m.b.lineWidth,yt))},h.prototype._setColor=function(g,F,V){var H=this.get("el");if(!V){H.setAttribute(m.b[F],"none");return}if(V=V.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(V)){var et=g.find("gradient",V);et||(et=g.addGradient(V)),H.setAttribute(m.b[F],"url(#"+et+")")}else if(/^[p,P]{1}[\s]*\(/.test(V)){var et=g.find("pattern",V);et||(et=g.addPattern(V)),H.setAttribute(m.b[F],"url(#"+et+")")}else H.setAttribute(m.b[F],V)},h.prototype.shadow=function(g,F){var V=this.attr(),H=F||V,et=H.shadowOffsetX,nt=H.shadowOffsetY,St=H.shadowBlur,dt=H.shadowColor;(et||nt||St||dt)&&Object(e.b)(this,g)},h.prototype.transform=function(g){var F=this.attr(),V=(g||F).matrix;V&&Object(e.c)(this)},h.prototype.isInShape=function(g,F){return this.isPointInPath(g,F)},h.prototype.isPointInPath=function(g,F){var V=this.get("el"),H=this.get("canvas"),et=H.get("el").getBoundingClientRect(),nt=g+et.left,St=F+et.top,dt=document.elementFromPoint(nt,St);return!!(dt&&dt.isEqualNode(V))},h.prototype.getHitLineWidth=function(){var g=this.attrs,F=g.lineWidth,V=g.lineAppendWidth;return this.isStroke()?F+V:0},h}(A.AbstractShape),E=l,j=z("iTfj"),y=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="circle",g.canFill=!0,g.canStroke=!0,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{x:0,y:0,r:0})},h.prototype.createPath=function(g,F){var V=this.attr(),H=this.get("el");Object(j.each)(F||V,function(et,nt){nt==="x"||nt==="y"?H.setAttribute("c"+nt,et):m.b[nt]&&H.setAttribute(m.b[nt],et)})},h}(E),n=y,s=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="dom",g.canFill=!1,g.canStroke=!1,g}return h.prototype.createPath=function(g,F){var V=this.attr(),H=this.get("el");if(Object(j.each)(F||V,function(dt,gt){m.b[gt]&&H.setAttribute(m.b[gt],dt)}),typeof V.html=="function"){var et=V.html.call(this,V);if(et instanceof Element||et instanceof HTMLDocument){for(var nt=H.childNodes,St=nt.length-1;St>=0;St--)H.removeChild(nt[St]);H.appendChild(et)}else H.innerHTML=et}else H.innerHTML=V.html},h}(E),d=s,M=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="ellipse",g.canFill=!0,g.canStroke=!0,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{x:0,y:0,rx:0,ry:0})},h.prototype.createPath=function(g,F){var V=this.attr(),H=this.get("el");Object(j.each)(F||V,function(et,nt){nt==="x"||nt==="y"?H.setAttribute("c"+nt,et):m.b[nt]&&H.setAttribute(m.b[nt],et)})},h}(E),S=M,T=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="image",g.canFill=!1,g.canStroke=!1,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{x:0,y:0,width:0,height:0})},h.prototype.createPath=function(g,F){var V=this,H=this.attr(),et=this.get("el");Object(j.each)(F||H,function(nt,St){St==="img"?V._setImage(H.img):m.b[St]&&et.setAttribute(m.b[St],nt)})},h.prototype.setAttr=function(g,F){this.attrs[g]=F,g==="img"&&this._setImage(F)},h.prototype._setImage=function(g){var F=this.attr(),V=this.get("el");if(Object(j.isString)(g))V.setAttribute("href",g);else if(g instanceof window.Image)F.width||(V.setAttribute("width",g.width),this.attr("width",g.width)),F.height||(V.setAttribute("height",g.height),this.attr("height",g.height)),V.setAttribute("href",g.src);else if(g instanceof HTMLElement&&Object(j.isString)(g.nodeName)&&g.nodeName.toUpperCase()==="CANVAS")V.setAttribute("href",g.toDataURL());else if(g instanceof ImageData){var H=document.createElement("canvas");H.setAttribute("width",""+g.width),H.setAttribute("height",""+g.height),H.getContext("2d").putImageData(g,0,0),F.width||(V.setAttribute("width",""+g.width),this.attr("width",g.width)),F.height||(V.setAttribute("height",""+g.height),this.attr("height",g.height)),V.setAttribute("href",H.toDataURL())}},h}(E),v=T,x=z("EYNi"),C=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="line",g.canFill=!1,g.canStroke=!0,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},h.prototype.createPath=function(g,F){var V=this.attr(),H=this.get("el");Object(j.each)(F||V,function(et,nt){if(nt==="startArrow"||nt==="endArrow")if(et){var St=Object(j.isObject)(et)?g.addArrow(V,m.b[nt]):g.getDefaultArrow(V,m.b[nt]);H.setAttribute(m.b[nt],"url(#"+St+")")}else H.removeAttribute(m.b[nt]);else m.b[nt]&&H.setAttribute(m.b[nt],et)})},h.prototype.getTotalLength=function(){var g=this.attr(),F=g.x1,V=g.y1,H=g.x2,et=g.y2;return x.c.length(F,V,H,et)},h.prototype.getPoint=function(g){var F=this.attr(),V=F.x1,H=F.y1,et=F.x2,nt=F.y2;return x.c.pointAt(V,H,et,nt,g)},h}(E),N=C,X={circle:function(h,g,F){return[["M",h,g],["m",-F,0],["a",F,F,0,1,0,F*2,0],["a",F,F,0,1,0,-F*2,0]]},square:function(h,g,F){return[["M",h-F,g-F],["L",h+F,g-F],["L",h+F,g+F],["L",h-F,g+F],["Z"]]},diamond:function(h,g,F){return[["M",h-F,g],["L",h,g-F],["L",h+F,g],["L",h,g+F],["Z"]]},triangle:function(h,g,F){var V=F*Math.sin(1/3*Math.PI);return[["M",h-F,g+V],["L",h,g-V],["L",h+F,g+V],["z"]]},triangleDown:function(h,g,F){var V=F*Math.sin(1/3*Math.PI);return[["M",h-F,g-V],["L",h+F,g-V],["L",h,g+V],["Z"]]}},tt={get:function(h){return X[h]},register:function(h,g){X[h]=g},remove:function(h){delete X[h]},getAll:function(){return X}},it=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="marker",g.canFill=!0,g.canStroke=!0,g}return h.prototype.createPath=function(g){var F=this.get("el");F.setAttribute("d",this._assembleMarker())},h.prototype._assembleMarker=function(){var g=this._getPath();return Object(j.isArray)(g)?g.map(function(F){return F.join(" ")}).join(""):g},h.prototype._getPath=function(){var g=this.attr(),F=g.x,V=g.y,H=g.r||g.radius,et=g.symbol||"circle",nt;return Object(j.isFunction)(et)?nt=et:nt=tt.get(et),nt?nt(F,V,H):(console.warn(nt+" symbol is not exist."),null)},h.symbolsFactory=tt,h}(E),pt=it,ft=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="path",g.canFill=!0,g.canStroke=!0,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{startArrow:!1,endArrow:!1})},h.prototype.createPath=function(g,F){var V=this,H=this.attr(),et=this.get("el");Object(j.each)(F||H,function(nt,St){if(St==="path"&&Object(j.isArray)(nt))et.setAttribute("d",V._formatPath(nt));else if(St==="startArrow"||St==="endArrow")if(nt){var dt=Object(j.isObject)(nt)?g.addArrow(H,m.b[St]):g.getDefaultArrow(H,m.b[St]);et.setAttribute(m.b[St],"url(#"+dt+")")}else et.removeAttribute(m.b[St]);else m.b[St]&&et.setAttribute(m.b[St],nt)})},h.prototype._formatPath=function(g){var F=g.map(function(V){return V.join(" ")}).join("");return~F.indexOf("NaN")?"":F},h.prototype.getTotalLength=function(){var g=this.get("el");return g?g.getTotalLength():null},h.prototype.getPoint=function(g){var F=this.get("el"),V=this.getTotalLength();if(V===0)return null;var H=F?F.getPointAtLength(g*V):null;return H?{x:H.x,y:H.y}:null},h}(E),Ot=ft,wt=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="polygon",g.canFill=!0,g.canStroke=!0,g}return h.prototype.createPath=function(g,F){var V=this.attr(),H=this.get("el");Object(j.each)(F||V,function(et,nt){nt==="points"&&Object(j.isArray)(et)&&et.length>=2?H.setAttribute("points",et.map(function(St){return St[0]+","+St[1]}).join(" ")):m.b[nt]&&H.setAttribute(m.b[nt],et)})},h}(E),xt=wt,lt=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="polyline",g.canFill=!0,g.canStroke=!0,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{startArrow:!1,endArrow:!1})},h.prototype.onAttrChange=function(g,F,V){k.prototype.onAttrChange.call(this,g,F,V),["points"].indexOf(g)!==-1&&this._resetCache()},h.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},h.prototype.createPath=function(g,F){var V=this.attr(),H=this.get("el");Object(j.each)(F||V,function(et,nt){nt==="points"&&Object(j.isArray)(et)&&et.length>=2?H.setAttribute("points",et.map(function(St){return St[0]+","+St[1]}).join(" ")):m.b[nt]&&H.setAttribute(m.b[nt],et)})},h.prototype.getTotalLength=function(){var g=this.attr().points,F=this.get("totalLength");return Object(j.isNil)(F)?(this.set("totalLength",x.d.length(g)),this.get("totalLength")):F},h.prototype.getPoint=function(g){var F=this.attr().points,V=this.get("tCache");V||(this._setTcache(),V=this.get("tCache"));var H,et;return Object(j.each)(V,function(nt,St){g>=nt[0]&&g<=nt[1]&&(H=(g-nt[0])/(nt[1]-nt[0]),et=St)}),x.c.pointAt(F[et][0],F[et][1],F[et+1][0],F[et+1][1],H)},h.prototype._setTcache=function(){var g=this.attr().points;if(!(!g||g.length===0)){var F=this.getTotalLength();if(!(F<=0)){var V=0,H=[],et,nt;Object(j.each)(g,function(St,dt){g[dt+1]&&(et=[],et[0]=V/F,nt=x.c.length(St[0],St[1],g[dt+1][0],g[dt+1][1]),V+=nt,et[1]=V/F,H.push(et))}),this.set("tCache",H)}}},h.prototype.getStartTangent=function(){var g=this.attr().points,F=[];return F.push([g[1][0],g[1][1]]),F.push([g[0][0],g[0][1]]),F},h.prototype.getEndTangent=function(){var g=this.attr().points,F=g.length-1,V=[];return V.push([g[F-1][0],g[F-1][1]]),V.push([g[F][0],g[F][1]]),V},h}(E),Vt=lt,Lt=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,Et=/[^\s,]+/gi;function J(k){var h=0,g=0,F=0,V=0;return Object(j.isArray)(k)?k.length===1?h=g=F=V=k[0]:k.length===2?(h=F=k[0],g=V=k[1]):k.length===3?(h=k[0],g=V=k[1],F=k[2]):(h=k[0],g=k[1],F=k[2],V=k[3]):h=g=F=V=k,{r1:h,r2:g,r3:F,r4:V}}function ht(k){if(k=k||[],Object(j.isArray)(k))return k;if(Object(j.isString)(k))return k=k.match(Lt),Object(j.each)(k,function(h,g){if(h=h.match(Et),h[0].length>1){var F=h[0].charAt(0);h.splice(1,0,h[0].substr(1)),h[0]=F}Object(j.each)(h,function(V,H){isNaN(V)||(h[H]=+V)}),k[g]=h}),k}var vt=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="rect",g.canFill=!0,g.canStroke=!0,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{x:0,y:0,width:0,height:0,radius:0})},h.prototype.createPath=function(g,F){var V=this,H=this.attr(),et=this.get("el"),nt=!1,St=["x","y","width","height","radius"];Object(j.each)(F||H,function(dt,gt){St.indexOf(gt)!==-1&&!nt?(et.setAttribute("d",V._assembleRect(H)),nt=!0):St.indexOf(gt)===-1&&m.b[gt]&&et.setAttribute(m.b[gt],dt)})},h.prototype._assembleRect=function(g){var F=g.x,V=g.y,H=g.width,et=g.height,nt=g.radius;if(!nt)return"M "+F+","+V+" l "+H+",0 l 0,"+et+" l"+-H+" 0 z";var St=J(nt);Object(j.isArray)(nt)?nt.length===1?St.r1=St.r2=St.r3=St.r4=nt[0]:nt.length===2?(St.r1=St.r3=nt[0],St.r2=St.r4=nt[1]):nt.length===3?(St.r1=nt[0],St.r2=St.r4=nt[1],St.r3=nt[2]):(St.r1=nt[0],St.r2=nt[1],St.r3=nt[2],St.r4=nt[3]):St.r1=St.r2=St.r3=St.r4=nt;var dt=[["M "+(F+St.r1)+","+V],["l "+(H-St.r1-St.r2)+",0"],["a "+St.r2+","+St.r2+",0,0,1,"+St.r2+","+St.r2],["l 0,"+(et-St.r2-St.r3)],["a "+St.r3+","+St.r3+",0,0,1,"+-St.r3+","+St.r3],["l "+(St.r3+St.r4-H)+",0"],["a "+St.r4+","+St.r4+",0,0,1,"+-St.r4+","+-St.r4],["l 0,"+(St.r4+St.r1-et)],["a "+St.r1+","+St.r1+",0,0,1,"+St.r1+","+-St.r1],["z"]];return dt.join(" ")},h}(E),bt=vt,At=z("e0ae"),q=.3,ct={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},ot={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},_={left:"left",start:"left",center:"middle",right:"end",end:"end"},P=function(k){Object(a.b)(h,k);function h(){var g=k!==null&&k.apply(this,arguments)||this;return g.type="text",g.canFill=!0,g.canStroke=!0,g}return h.prototype.getDefaultAttrs=function(){var g=k.prototype.getDefaultAttrs.call(this);return Object(a.a)(Object(a.a)({},g),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},h.prototype.createPath=function(g,F){var V=this,H=this.attr(),et=this.get("el");this._setFont(),Object(j.each)(F||H,function(nt,St){St==="text"?V._setText(""+nt):St==="matrix"&&nt?Object(e.c)(V):m.b[St]&&et.setAttribute(m.b[St],nt)}),et.setAttribute("paint-order","stroke"),et.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},h.prototype._setFont=function(){var g=this.get("el"),F=this.attr(),V=F.textBaseline,H=F.textAlign,et=Object(At.a)();et&&et.name==="firefox"?g.setAttribute("dominant-baseline",ot[V]||"alphabetic"):g.setAttribute("alignment-baseline",ct[V]||"baseline"),g.setAttribute("text-anchor",_[H]||"left")},h.prototype._setText=function(g){var F=this.get("el"),V=this.attr(),H=V.x,et=V.textBaseline,nt=et===void 0?"bottom":et;if(!g)F.innerHTML="";else if(~g.indexOf(`
`)){var St=g.split(`
`),dt=St.length-1,gt="";Object(j.each)(St,function(yt,Ct){Ct===0?nt==="alphabetic"?gt+='<tspan x="'+H+'" dy="'+-dt+'em">'+yt+"</tspan>":nt==="top"?gt+='<tspan x="'+H+'" dy="0.9em">'+yt+"</tspan>":nt==="middle"?gt+='<tspan x="'+H+'" dy="'+-(dt-1)/2+'em">'+yt+"</tspan>":nt==="bottom"?gt+='<tspan x="'+H+'" dy="-'+(dt+q)+'em">'+yt+"</tspan>":nt==="hanging"&&(gt+='<tspan x="'+H+'" dy="'+(-(dt-1)-q)+'em">'+yt+"</tspan>"):gt+='<tspan x="'+H+'" dy="1em">'+yt+"</tspan>"}),F.innerHTML=gt}else F.innerHTML=g},h}(E),Y=P},aSjE:function(zn,Ut,z){"use strict";z.d(Ut,"b",function(){return at}),z.d(Ut,"c",function(){return a}),z.d(Ut,"a",function(){return A});function at(e,r){var p=[],m=e[0],O=e[1],l=e[2],E=e[3],j=e[4],y=e[5],n=e[6],s=e[7],d=e[8],M=r[0],S=r[1],T=r[2],v=r[3],x=r[4],C=r[5],N=r[6],X=r[7],tt=r[8];return p[0]=M*m+S*E+T*n,p[1]=M*O+S*j+T*s,p[2]=M*l+S*y+T*d,p[3]=v*m+x*E+C*n,p[4]=v*O+x*j+C*s,p[5]=v*l+x*y+C*d,p[6]=N*m+X*E+tt*n,p[7]=N*O+X*j+tt*s,p[8]=N*l+X*y+tt*d,p}function a(e,r){var p=[],m=r[0],O=r[1];return p[0]=e[0]*m+e[3]*O+e[6],p[1]=e[1]*m+e[4]*O+e[7],p}function A(e){var r=[],p=e[0],m=e[1],O=e[2],l=e[3],E=e[4],j=e[5],y=e[6],n=e[7],s=e[8],d=s*E-j*n,M=-s*l+j*y,S=n*l-E*y,T=p*d+m*M+O*S;return T?(T=1/T,r[0]=d*T,r[1]=(-s*m+O*n)*T,r[2]=(j*m-O*E)*T,r[3]=M*T,r[4]=(s*p-O*y)*T,r[5]=(-j*p+O*l)*T,r[6]=S*T,r[7]=(-n*p+m*y)*T,r[8]=(E*p-m*l)*T,r):null}},bahg:function(zn,Ut){function z(at){return at.split("")}zn.exports=z},"c+wO":function(zn,Ut,z){"use strict";z.d(Ut,"b",function(){return A}),z.d(Ut,"a",function(){return e}),z.d(Ut,"d",function(){return r}),z.d(Ut,"c",function(){return p});var at=z("iTfj"),a=z("IvmH");function A(m){return document.createElementNS("http://www.w3.org/2000/svg",m)}function e(m){var O=a.a[m.type],l=m.getParent();if(!O)throw new Error("the type "+m.type+" is not supported by svg");var E=A(O);if(m.get("id")&&(E.id=m.get("id")),m.set("el",E),m.set("attrs",{}),l){var j=l.get("el");j||(j=l.createDom(),l.set("el",j)),j.appendChild(E)}return E}function r(m,O){var l=m.get("el"),E=Object(at.toArray)(l.children).sort(O),j=document.createDocumentFragment();E.forEach(function(y){j.appendChild(y)}),l.appendChild(j)}function p(m,O){var l=m.parentNode,E=Array.from(l.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),j=E[O],y=E.indexOf(m);if(j){if(y>O)l.insertBefore(m,j);else if(y<O){var n=E[O+1];n?l.insertBefore(m,n):l.appendChild(m)}}else l.appendChild(m)}},c0lT:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return A}),z.d(Ut,"b",function(){return e});var at=z("APlK"),a=z("c+wO");function A(r,p){p.forEach(function(m){m.draw(r)})}function e(r,p){var m=r.get("canvas");if(m&&m.get("autoDraw")){var O=m.get("context"),l=r.getParent(),E=l?l.getChildren():[m],j=r.get("el");if(p==="remove"){var y=r.get("isClipShape");if(y){var n=j&&j.parentNode,s=n&&n.parentNode;n&&s&&s.removeChild(n)}else j&&j.parentNode&&j.parentNode.removeChild(j)}else if(p==="show")j.setAttribute("visibility","visible");else if(p==="hide")j.setAttribute("visibility","hidden");else if(p==="zIndex")Object(a.c)(j,E.indexOf(r));else if(p==="sort"){var d=r.get("children");d&&d.length&&Object(a.d)(r,function(M,S){return d.indexOf(M)-d.indexOf(S)?1:0})}else p==="clear"?j&&(j.innerHTML=""):p==="matrix"?Object(at.c)(r):p==="clip"?Object(at.a)(r,O):p==="attr"||p==="add"&&r.draw(O)}}},cBFB:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return X});var at=z("mrSG"),a=z("YuPD"),A=z("zJSt"),e=z("tKoa"),r=z("w02o"),p=z("+Nd1"),m=z("a8tM"),O=z("iTfj"),l=z("I7nc"),E={field:"value",size:[1,1],round:!1,padding:0,sort:!0,as:["x","y"]};function j(tt,it){it=Object(O.assign)({},E,it);var pt=it.as;if(!Object(O.isArray)(pt)||pt.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var ft;try{ft=Object(l.b)(it)}catch(Vt){console.warn(Vt)}var Ot=function(Lt){return p.a().size(it.size).round(it.round).padding(it.padding)(m.c(Lt).sum(function(Et){return Et[ft]}))},wt=Ot(tt),xt=pt[0],lt=pt[1];return wt.each(function(Vt){Vt[xt]=[Vt.x0,Vt.x1,Vt.x1,Vt.x0],Vt[lt]=[Vt.y1,Vt.y1,Vt.y0,Vt.y0],["x0","x1","y0","y1"].forEach(function(Lt){pt.indexOf(Lt)===-1&&delete Vt[Lt]})}),Object(l.a)(wt)}var y=z("NzZ7");function n(tt){var it=tt.data,pt=tt.type,ft=tt.seriesField,Ot=tt.colorField,wt=tt.hierarchyConfig,xt={partition:j,treemap:y.a},lt=xt[pt](it,Object(at.a)(Object(at.a)({},wt),{type:"hierarchy."+pt,field:ft,as:["x","y"]})),Vt=[];return lt.forEach(function(Lt){var Et,J,ht,vt,bt;if(Lt.depth===0)return null;var At=Object(at.a)((Et={},Et[ft]=Lt.data[ft]||((ht=(J=Lt.parent)===null||J===void 0?void 0:J.data)===null||ht===void 0?void 0:ht[ft]),Et[Ot]=Lt.data[Ot]||((bt=(vt=Lt.parent)===null||vt===void 0?void 0:vt.data)===null||bt===void 0?void 0:bt[Ot]),Et),Lt);At.ext=wt,Vt.push(At)}),Vt}function s(tt){var it=tt.items,pt=tt.formatter,ft=tt.fields,Ot=it[0]||{},wt=Ot.color,xt=Ot.mappingData,lt=Ot.data,Vt=document.createElement("ul");Vt.className="g2-tooltip";var Lt="",Et=function(ht,vt){var bt;return pt?pt(Object(at.a)(Object(at.a)({},ht),{field:vt})):{name:vt,value:(ht==null?void 0:ht[vt])||((bt=ht==null?void 0:ht.data)===null||bt===void 0?void 0:bt[vt])}};return ft.forEach(function(J){var ht=Et(lt,J),vt=ht.name,bt=ht.value;Lt+=`<li class="g2-tooltip-list-item" data-index={index} style="margin-bottom:4px;display:flex;align-items: center;">
        <span style="background-color:`+((xt==null?void 0:xt.color)||wt)+`;" class="g2-tooltip-marker"></span>
        <span style="display:inline-flex;flex:1;justify-content:space-between">
        <span style="margin-right: 16px;">`+vt+`:</span>
        <span class="g2-tooltip-list-item-value">`+bt+`</span>
        </span>
    </li>`}),Vt.innerHTML=Lt,Vt}function d(tt){var it=tt.chart,pt=tt.options,ft=pt.color,Ot=pt.colorField,wt=pt.sunburstStyle,xt=n(pt);return it.data(xt),Object(e.f)(Object(a.b)({},tt,{options:{xField:"x",yField:"y",seriesField:Ot,polygon:{color:ft,style:wt}}})),tt}function M(tt){var it=tt.chart;return it.axis(!1),tt}function S(tt){var it=tt.chart;return it.legend(!1),tt}function T(tt){var it=tt.chart,pt=tt.options,ft=pt.label,Ot=pt.seriesField,wt=Object(a.c)(it,"polygon");if(!ft)wt.label(!1);else{var xt=ft.callback,lt=Object(at.c)(ft,["callback"]);wt.label({fields:[Ot],callback:xt,cfg:Object(a.o)(lt)})}return tt}function v(tt){var it=tt.chart,pt=tt.options,ft=pt.innerRadius,Ot=pt.radius,wt=pt.reflect,xt=it.coordinate({type:"polar",cfg:{innerRadius:ft,radius:Ot}});return wt&&xt.reflect(wt),tt}function x(tt){var it=tt.chart,pt=tt.options,ft=pt.meta;return ft&&it.scale(ft),tt}function C(tt){var it=tt.chart,pt=tt.options,ft=pt.tooltip,Ot=pt.seriesField,wt=pt.colorField;return ft&&it.tooltip(Object(at.a)(Object(at.a)({},ft),{customContent:ft&&ft.customContent?ft.customContent:function(xt,lt){return s({value:xt,items:lt,formatter:ft&&(ft==null?void 0:ft.formatter),fields:ft&&ft.fields||[Ot,wt]})}})),tt}function N(tt){return Object(a.e)(d,r.j,M,x,S,v,C,T,r.c,r.a,Object(r.b)())(tt)}var X=function(tt){Object(at.b)(it,tt);function it(){var pt=tt!==null&&tt.apply(this,arguments)||this;return pt.type="sunburst",pt}return it.prototype.getDefaultOptions=function(){return Object(a.b)({},tt.prototype.getDefaultOptions.call(this),{type:"partition",innerRadius:0,seriesField:"value",tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1}})},it.prototype.getSchemaAdaptor=function(){return N},it}(A.a)},chpo:function(zn,Ut,z){"use strict";Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.default=void 0;var at=1,a=function(){return"".concat(at++)};Ut.default=a},cyZq:function(zn,Ut,z){"use strict";z.d(Ut,"d",function(){return a}),z.d(Ut,"b",function(){return A}),z.d(Ut,"e",function(){return e}),z.d(Ut,"f",function(){return r}),z.d(Ut,"l",function(){return p}),z.d(Ut,"j",function(){return m});var at=z("iTfj");z.d(Ut,"i",function(){return at.isNil}),z.d(Ut,"k",function(){return at.isString}),z.d(Ut,"h",function(){return at.isFunction}),z.d(Ut,"g",function(){return at.isArray}),z.d(Ut,"c",function(){return at.each}),z.d(Ut,"o",function(){return at.toRadian}),z.d(Ut,"m",function(){return at.mod}),z.d(Ut,"n",function(){return at.requestAnimationFrame}),z.d(Ut,"a",function(){return at.clearAnimationFrame});function a(){return window?window.devicePixelRatio:1}function A(O,l,E,j){var y=O-E,n=l-j;return Math.sqrt(y*y+n*n)}function e(O,l,E,j,y,n){return y>=O&&y<=O+E&&n>=l&&n<=l+j}function r(O,l){return!(l.minX>O.maxX||l.maxX<O.minX||l.minY>O.maxY||l.maxY<O.minY)}function p(O,l){return!O||!l?O||l:{minX:Math.min(O.minX,l.minX),minY:Math.min(O.minY,l.minY),maxX:Math.max(O.maxX,l.maxX),maxY:Math.max(O.maxY,l.maxY)}}function m(O,l){return O[0]===l[0]&&O[1]===l[1]}},de35:function(zn,Ut,z){"use strict";var at=z("mrSG"),a=z("fIp6"),A=z("iTfj"),e=z("5UbV"),r=z("NmWf"),p=function(m){Object(at.b)(O,m);function O(){return m!==null&&m.apply(this,arguments)||this}return O.prototype.getDefaultCfg=function(){var l=m.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},l),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},O.prototype.getContainer=function(){return this.get("container")},O.prototype.show=function(){var l=this.get("container");l.style.display="",this.set("visible",!0)},O.prototype.hide=function(){var l=this.get("container");l.style.display="none",this.set("visible",!1)},O.prototype.setCapture=function(l){var E=this.getContainer(),j=l?"auto":"none";E.style.pointerEvents=j,this.set("capture",l)},O.prototype.getBBox=function(){var l=this.getContainer(),E=parseFloat(l.style.left)||0,j=parseFloat(l.style.top)||0;return Object(e.b)(E,j,l.clientWidth,l.clientHeight)},O.prototype.clear=function(){var l=this.get("container");Object(e.a)(l)},O.prototype.destroy=function(){this.removeEvent(),this.removeDom(),m.prototype.destroy.call(this)},O.prototype.init=function(){m.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},O.prototype.initCapture=function(){this.setCapture(this.get("capture"))},O.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},O.prototype.initDom=function(){},O.prototype.initContainer=function(){var l=this.get("container");if(Object(A.isNil)(l)){l=this.createDom();var E=this.get("parent");Object(A.isString)(E)&&(E=document.getElementById(E),this.set("parent",E)),E.appendChild(l),this.set("container",l)}else Object(A.isString)(l)&&(l=document.getElementById(l),this.set("container",l));this.get("parent")||this.set("parent",l.parentNode)},O.prototype.resetStyles=function(){var l=this.get("domStyles"),E=this.get("defaultStyles");l?l=Object(A.deepMix)({},E,l):l=E,this.set("domStyles",l)},O.prototype.applyStyles=function(){var l=this.get("domStyles");if(!!l){var E=this.getContainer();this.applyChildrenStyles(E,l);var j=this.get("containerClassName");if(j&&Object(e.h)(E,j)){var y=l[j];Object(a.e)(E,y)}}},O.prototype.applyChildrenStyles=function(l,E){Object(A.each)(E,function(j,y){var n=l.getElementsByClassName(y);Object(A.each)(n,function(s){Object(a.e)(s,j)})})},O.prototype.applyStyle=function(l,E){var j=this.get("domStyles");Object(a.e)(E,j[l])},O.prototype.createDom=function(){var l=this.get("containerTpl");return Object(a.b)(l)},O.prototype.initEvent=function(){},O.prototype.removeDom=function(){var l=this.get("container");l&&l.parentNode&&l.parentNode.removeChild(l)},O.prototype.removeEvent=function(){},O.prototype.updateInner=function(l){Object(A.hasKey)(l,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},O.prototype.resetPosition=function(){},O}(r.a);Ut.a=p},dt0z:function(zn,Ut,z){var at=z("zoYe");function a(A){return A==null?"":at(A)}zn.exports=a},e0ae:function(zn,Ut,z){"use strict";(function(at){z.d(Ut,"a",function(){return n});var a=function(){for(var x=0,C=0,N=arguments.length;C<N;C++)x+=arguments[C].length;for(var X=Array(x),tt=0,C=0;C<N;C++)for(var it=arguments[C],pt=0,ft=it.length;pt<ft;pt++,tt++)X[tt]=it[pt];return X},A=function(){function x(C,N,X){this.name=C,this.version=N,this.os=X,this.type="browser"}return x}(),e=function(){function x(C){this.version=C,this.type="node",this.name="node",this.os=at.platform}return x}(),r=function(){function x(C,N,X,tt){this.name=C,this.version=N,this.os=X,this.bot=tt,this.type="bot-device"}return x}(),p=function(){function x(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return x}(),m=function(){function x(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return x}(),O=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,l=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,E=3,j=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",O]],y=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function n(x){return x?M(x):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new m:typeof navigator!="undefined"?M(navigator.userAgent):T()}function s(x){return x!==""&&j.reduce(function(C,N){var X=N[0],tt=N[1];if(C)return C;var it=tt.exec(x);return!!it&&[X,it]},!1)}function d(x){var C=s(x);return C?C[0]:null}function M(x){var C=s(x);if(!C)return null;var N=C[0],X=C[1];if(N==="searchbot")return new p;var tt=X[1]&&X[1].split(/[._]/).slice(0,3);tt?tt.length<E&&(tt=a(tt,v(E-tt.length))):tt=[];var it=tt.join("."),pt=S(x),ft=l.exec(x);return ft&&ft[1]?new r(N,it,pt,ft[1]):new A(N,it,pt)}function S(x){for(var C=0,N=y.length;C<N;C++){var X=y[C],tt=X[0],it=X[1],pt=it.exec(x);if(pt)return tt}return null}function T(){var x=typeof at!="undefined"&&at.version;return x?new e(at.version.slice(1)):null}function v(x){for(var C=[],N=0;N<x;N++)C.push("0");return C}}).call(this,z("Q2Ig"))},eHqw:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return C});var at=z("mrSG"),a=z("zJSt"),A=z("KMYG"),e=z("w02o"),r=z("YuPD"),p=z("iTfj"),m=z("NzZ7");function O(N){return Object(p.isArray)(N)?N.findIndex(function(X){return X.type==="treemap-drill-down"})>-1:!1}function l(N,X){var tt=O(N);return tt?N.map(function(it){return it.type==="treemap-drill-down"?Object(r.b)({},it,{cfg:{hierarchyConfig:X}}):it}):N}function E(N){var X=N.data,tt=N.colorField,it=N.openDrillDown,pt=N.hierarchyConfig,ft=pt===void 0?{}:pt,Ot=Object(m.a)(X,Object(at.a)(Object(at.a)({},ft),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),wt=[];return Ot.forEach(function(xt){if(xt.depth===0||it&&xt.depth!==1||!it&&xt.children)return null;var lt=Object.assign({},xt.data,{x:xt.x,y:xt.y,depth:xt.depth,value:xt.value});if(!xt.data[tt]&&xt.parent){var Vt=xt.ancestors().find(function(Lt){return Lt.data[tt]});lt[tt]=Vt==null?void 0:Vt.data[tt]}else lt[tt]=xt.data[tt];wt.push(lt)}),wt}function j(N){var X=N.options,tt=X.colorField;return Object(r.b)({options:{colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapResquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1,fields:["name","value",tt],formatter:function(pt){return{name:pt.name,value:pt.value}}},interactions:[{type:"view-zoom"},{type:"treemap-element-zoom"}]}},N)}function y(N){var X=N.chart,tt=N.options,it=tt.color,pt=tt.colorField,ft=tt.rectStyle,Ot=E({data:tt.data,colorField:tt.colorField,openDrillDown:O(tt.interactions)});return X.data(Ot),Object(A.a)(Object(r.b)({},N,{options:{xField:"x",yField:"y",seriesField:pt,rawFields:["value"],polygon:{color:it,style:ft}}})),N}function n(N){var X=N.chart;return X.axis(!1),N}function s(N){var X=N.chart,tt=N.options,it=tt.interactions,pt=tt.hierarchyConfig;return Object(e.c)({chart:X,options:{interactions:l(it,pt)}}),N}function d(N){return Object(r.e)(j,y,n,e.j,e.d,e.k,s,e.a,Object(e.b)())(N)}var M=z("kXyF"),S=function(N){Object(at.b)(X,N);function X(){var tt=N!==null&&N.apply(this,arguments)||this;return tt.cacheDataStack=[],tt}return X.prototype.drill=function(tt){console.log(this.context);var it=this.context.view,pt=it.getData(),ft=it.getGroupScales(),Ot=Object(p.get)(it,["interactions","treemap-drill-down","cfg","hierarchyConfig"],{}),wt=E({data:tt,colorField:Object(p.get)(ft,[0,"field"]),openDrillDown:!0,hierarchyConfig:Ot});it.changeData(wt),this.cacheDataStack.push(pt)},X.prototype.click=function(){var tt=Object(p.get)(this.context,["event","data","data"]);if(!tt)return!1;this.drill(tt)},X.prototype.reset=function(){var tt=this.context.view;if(!(!Object(p.isArray)(this.cacheDataStack)||this.cacheDataStack.length<=0)){var it=this.cacheDataStack.splice(this.cacheDataStack.length-1,1);tt.changeData(it[0])}},X}(M.Action);function T(N){var X=Object(p.get)(N,["event","data","data"],{});return Object(p.isArray)(X.children)&&X.children.length>0&&X.depth===1}function v(N){if(!N||!N.getAction)return!1;var X=N.getAction("treemap-drill-down-action");if(!X)return!1;var tt=X.cacheDataStack;return Object(p.isArray)(tt)&&tt.length>0}Object(M.registerAction)("treemap-drill-down-action",S),Object(M.registerInteraction)("treemap-drill-down",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:pointer"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"element:click",isEnable:T,action:["treemap-drill-down-action:click","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["treemap-drill-down-action:reset"]},{trigger:"reset-button:click",action:["reset-button:hide"],isEnable:function(X){return!v(X)}}]});var x=z("hag6"),C=function(N){Object(at.b)(X,N);function X(){var tt=N!==null&&N.apply(this,arguments)||this;return tt.type="treemap",tt}return X.prototype.getSchemaAdaptor=function(){return d},X}(a.a)},eUgh:function(zn,Ut){function z(at,a){for(var A=-1,e=at==null?0:at.length,r=Array(e);++A<e;)r[A]=a(at[A],A,at);return r}zn.exports=z},f6Jy:function(zn,Ut,z){"use strict";var at="*",a=function(){function A(){this._events={}}return A.prototype.on=function(e,r,p){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:r,once:!!p}),this},A.prototype.once=function(e,r){return this.on(e,r,!0),this},A.prototype.emit=function(e){for(var r=this,p=[],m=1;m<arguments.length;m++)p[m-1]=arguments[m];var O=this._events[e]||[],l=this._events[at]||[],E=function(y){for(var n=y.length,s=0;s<n;s++)if(!!y[s]){var d=y[s],M=d.callback,S=d.once;S&&(y.splice(s,1),y.length===0&&delete r._events[e],n--,s--),M.apply(r,p)}};E(O),E(l)},A.prototype.off=function(e,r){if(!e)this._events={};else if(!r)delete this._events[e];else{for(var p=this._events[e]||[],m=p.length,O=0;O<m;O++)p[O].callback===r&&(p.splice(O,1),m--,O--);p.length===0&&delete this._events[e]}return this},A.prototype.getEvents=function(){return this._events},A}();Ut.a=a},fD4D:function(zn,Ut,z){"use strict";var at=z("ShmH"),a=z.n(at);a.a.version="4.1.7",Ut.default=a.a;var A="4.1.7"},fFDA:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return pt});var at=z("mrSG"),a=z("iTfj"),A=z("MeYt"),e={opacity:0},r={stroke:"#C5C5C5",strokeOpacity:.85},p={fill:"#CACED4",opacity:.85},m=z("LvGN"),O=z("8vsG");function l(Ot){return Object(a.map)(Ot,function(wt,xt){var lt=xt===0?"M":"L",Vt=wt[0],Lt=wt[1];return[lt,Vt,Lt]})}function E(Ot){return l(Ot)}function j(Ot){if(Ot.length<=2)return E(Ot);var wt=[];Object(a.each)(Ot,function(Et){Object(a.isEqual)(Et,wt.slice(wt.length-2))||wt.push(Et[0],Et[1])});var xt=Object(m.a)(wt,!1),lt=Object(a.head)(Ot),Vt=lt[0],Lt=lt[1];return xt.unshift(["M",Vt,Lt]),xt}function y(Ot,wt,xt,lt){lt===void 0&&(lt=!0);var Vt=new O.b({values:Ot}),Lt=new O.a({values:Object(a.map)(Ot,function(J,ht){return ht})}),Et=Object(a.map)(Ot,function(J,ht){return[Lt.scale(ht)*wt,xt-Vt.scale(J)*xt]});return lt?j(Et):E(Et)}function n(Ot,wt){var xt=new O.b({values:Ot}),lt=Math.max(0,xt.min);return wt-xt.scale(lt)*wt}function s(Ot,wt,xt,lt){var Vt=Object(at.d)(Ot),Lt=n(lt,xt);return Vt.push(["L",wt,Lt]),Vt.push(["L",0,Lt]),Vt.push(["Z"]),Vt}var d=function(Ot){Object(at.b)(wt,Ot);function wt(){return Ot!==null&&Ot.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var xt=Ot.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},xt),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:e,lineStyle:r,areaStyle:p})},wt.prototype.renderInner=function(xt){var lt=this.cfg,Vt=lt.width,Lt=lt.height,Et=lt.data,J=lt.smooth,ht=lt.isArea,vt=lt.backgroundStyle,bt=lt.lineStyle,At=lt.areaStyle;this.addShape(xt,{id:this.getElementId("background"),type:"rect",attrs:Object(at.a)({x:0,y:0,width:Vt,height:Lt},vt)});var q=y(Et,Vt,Lt,J);if(this.addShape(xt,{id:this.getElementId("line"),type:"path",attrs:Object(at.a)({path:q},bt)}),ht){var ct=s(q,Vt,Lt,Et);this.addShape(xt,{id:this.getElementId("area"),type:"path",attrs:Object(at.a)({path:ct},At)})}},wt.prototype.applyOffset=function(){var xt=this.cfg,lt=xt.x,Vt=xt.y;this.moveElementTo(this.get("group"),{x:lt,y:Vt})},wt}(A.a),M=d,S={fill:"#416180",opacity:.05},T={fill:"#5B8FF9",opacity:.15,cursor:"move"},v=10,x={width:v,height:24},C={textBaseline:"middle",fill:"#000",opacity:.45},N="sliderchange",X={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},tt=function(Ot){Object(at.b)(wt,Ot);function wt(){return Ot!==null&&Ot.apply(this,arguments)||this}return wt.prototype.getDefaultCfg=function(){var xt=Ot.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},xt),{name:"handler",x:0,y:0,width:10,height:24,style:X})},wt.prototype.renderInner=function(xt){var lt=this.cfg,Vt=lt.width,Lt=lt.height,Et=lt.style,J=Et.fill,ht=Et.stroke,vt=Et.radius,bt=Et.opacity,At=Et.cursor;this.addShape(xt,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:Vt,height:Lt,fill:J,stroke:ht,radius:vt,opacity:bt,cursor:At}});var q=1/3*Vt,ct=2/3*Vt,ot=1/4*Lt,_=3/4*Lt;this.addShape(xt,{id:this.getElementId("line-left"),type:"line",attrs:{x1:q,y1:ot,x2:q,y2:_,stroke:ht,cursor:At}}),this.addShape(xt,{id:this.getElementId("line-right"),type:"line",attrs:{x1:ct,y1:ot,x2:ct,y2:_,stroke:ht,cursor:At}})},wt.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},wt.prototype.initEvent=function(){this.bindEvents()},wt.prototype.bindEvents=function(){var xt=this;this.get("group").on("mouseenter",function(){var lt=xt.get("style").highLightFill;xt.getElementByLocalId("background").attr("fill",lt),xt.draw()}),this.get("group").on("mouseleave",function(){var lt=xt.get("style").fill;xt.getElementByLocalId("background").attr("fill",lt),xt.draw()})},wt.prototype.draw=function(){var xt=this.get("container").get("canvas");xt&&xt.draw()},wt}(A.a),it=tt,pt=function(Ot){Object(at.b)(wt,Ot);function wt(){var xt=Ot!==null&&Ot.apply(this,arguments)||this;return xt.onMouseDown=function(lt){return function(Vt){xt.currentTarget=lt;var Lt=Vt.originalEvent;Lt.stopPropagation(),Lt.preventDefault(),xt.prevX=Object(a.get)(Lt,"touches.0.pageX",Lt.pageX),xt.prevY=Object(a.get)(Lt,"touches.0.pageY",Lt.pageY);var Et=xt.getContainerDOM();Et.addEventListener("mousemove",xt.onMouseMove),Et.addEventListener("mouseup",xt.onMouseUp),Et.addEventListener("mouseleave",xt.onMouseUp),Et.addEventListener("touchmove",xt.onMouseMove),Et.addEventListener("touchend",xt.onMouseUp),Et.addEventListener("touchcancel",xt.onMouseUp)}},xt.onMouseMove=function(lt){var Vt=xt.cfg.width,Lt=[xt.get("start"),xt.get("end")];lt.stopPropagation(),lt.preventDefault();var Et=Object(a.get)(lt,"touches.0.pageX",lt.pageX),J=Object(a.get)(lt,"touches.0.pageY",lt.pageY),ht=Et-xt.prevX,vt=xt.adjustOffsetRange(ht/Vt);xt.updateStartEnd(vt),xt.updateUI(xt.getElementByLocalId("foreground"),xt.getElementByLocalId("minText"),xt.getElementByLocalId("maxText")),xt.prevX=Et,xt.prevY=J,xt.draw(),xt.emit(N,[xt.get("start"),xt.get("end")].sort()),xt.delegateEmit("valuechanged",{originValue:Lt,value:[xt.get("start"),xt.get("end")]})},xt.onMouseUp=function(){xt.currentTarget&&(xt.currentTarget=void 0);var lt=xt.getContainerDOM();lt&&(lt.removeEventListener("mousemove",xt.onMouseMove),lt.removeEventListener("mouseup",xt.onMouseUp),lt.removeEventListener("mouseleave",xt.onMouseUp),lt.removeEventListener("touchmove",xt.onMouseMove),lt.removeEventListener("touchend",xt.onMouseUp),lt.removeEventListener("touchcancel",xt.onMouseUp))},xt}return wt.prototype.setRange=function(xt,lt){this.set("minLimit",xt),this.set("maxLimit",lt);var Vt=this.get("start"),Lt=this.get("end"),Et=Object(a.clamp)(Vt,xt,lt),J=Object(a.clamp)(Lt,xt,lt);!this.get("isInit")&&(Vt!==Et||Lt!==J)&&this.setValue([Et,J])},wt.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},wt.prototype.setValue=function(xt){var lt=this.getRange();if(Object(a.isArray)(xt)&&xt.length===2){var Vt=[this.get("start"),this.get("end")];this.update({start:Object(a.clamp)(xt[0],lt.min,lt.max),end:Object(a.clamp)(xt[1],lt.min,lt.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:Vt,value:xt})}},wt.prototype.getValue=function(){return[this.get("start"),this.get("end")]},wt.prototype.getDefaultCfg=function(){var xt=Ot.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},xt),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:S,foregroundStyle:T,handlerStyle:x,textStyle:C}})},wt.prototype.update=function(xt){var lt=xt.start,Vt=xt.end,Lt=Object(at.a)({},xt);Object(a.isNil)(lt)||(Lt.start=Object(a.clamp)(lt,0,1)),Object(a.isNil)(Vt)||(Lt.end=Object(a.clamp)(Vt,0,1)),Ot.prototype.update.call(this,Lt),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler")),this.trend=this.getChildComponentById(this.getElementId("trend"))},wt.prototype.init=function(){this.set("start",Object(a.clamp)(this.get("start"),0,1)),this.set("end",Object(a.clamp)(this.get("end"),0,1)),Ot.prototype.init.call(this)},wt.prototype.render=function(){Ot.prototype.render.call(this),this.updateUI(this.getElementByLocalId("foreground"),this.getElementByLocalId("minText"),this.getElementByLocalId("maxText"))},wt.prototype.renderInner=function(xt){var lt=this.cfg,Vt=lt.start,Lt=lt.end,Et=lt.width,J=lt.height,ht=lt.trendCfg,vt=ht===void 0?{}:ht,bt=lt.minText,At=lt.maxText,q=lt.backgroundStyle,ct=q===void 0?{}:q,ot=lt.foregroundStyle,_=ot===void 0?{}:ot,P=lt.textStyle,Y=P===void 0?{}:P,k=lt.handlerStyle,h=k===void 0?{}:k,g=Vt*Et,F=Lt*Et;Object(a.size)(Object(a.get)(vt,"data"))&&(this.trend=this.addComponent(xt,Object(at.a)({component:d,id:this.getElementId("trend"),x:0,y:0,width:Et,height:J},vt))),this.addShape(xt,{id:this.getElementId("background"),type:"rect",attrs:Object(at.a)({x:0,y:0,width:Et,height:J},ct)});var V=this.addShape(xt,{id:this.getElementId("minText"),type:"text",attrs:Object(at.a)({y:J/2,textAlign:"right",text:bt,silent:!1},Y)}),H=this.addShape(xt,{id:this.getElementId("maxText"),type:"text",attrs:Object(at.a)({y:J/2,textAlign:"left",text:At,silent:!1},Y)}),et=this.addShape(xt,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:Object(at.a)({y:0,height:J},_)}),nt=Object(a.get)(h,"height",24);this.minHandler=this.addComponent(xt,Object(at.a)({component:tt,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(J-nt)/2,width:Et,height:nt,cursor:"ew-resize"},h)),this.maxHandler=this.addComponent(xt,Object(at.a)({component:tt,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(J-nt)/2,width:Et,height:nt,cursor:"ew-resize"},h))},wt.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},wt.prototype.initEvent=function(){this.bindEvents()},wt.prototype.updateUI=function(xt,lt,Vt){var Lt=this.cfg,Et=Lt.start,J=Lt.end,ht=Lt.width,vt=Lt.minText,bt=Lt.maxText,At=Lt.handlerStyle,q=Lt.height,ct=Et*ht,ot=J*ht;this.trend&&(this.trend.update({width:ht,height:q}),this.get("updateAutoRender")||this.trend.render()),xt.attr("x",ct),xt.attr("width",ot-ct);var _=Object(a.get)(At,"width",v);lt.attr("text",vt),Vt.attr("text",bt);var P=this._dodgeText([ct,ot],lt,Vt),Y=P[0],k=P[1];this.minHandler&&(this.minHandler.update({x:ct-_/2}),this.get("updateAutoRender")||this.minHandler.render()),Object(a.each)(Y,function(h,g){return lt.attr(g,h)}),this.maxHandler&&(this.maxHandler.update({x:ot-_/2}),this.get("updateAutoRender")||this.maxHandler.render()),Object(a.each)(k,function(h,g){return Vt.attr(g,h)})},wt.prototype.bindEvents=function(){var xt=this.get("group");xt.on("handler-min:mousedown",this.onMouseDown("minHandler")),xt.on("handler-min:touchstart",this.onMouseDown("minHandler")),xt.on("handler-max:mousedown",this.onMouseDown("maxHandler")),xt.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var lt=xt.findById(this.getElementId("foreground"));lt.on("mousedown",this.onMouseDown("foreground")),lt.on("touchstart",this.onMouseDown("foreground"))},wt.prototype.adjustOffsetRange=function(xt){var lt=this.cfg,Vt=lt.start,Lt=lt.end;switch(this.currentTarget){case"minHandler":{var Et=0-Vt,J=1-Vt;return Math.min(J,Math.max(Et,xt))}case"maxHandler":{var Et=0-Lt,J=1-Lt;return Math.min(J,Math.max(Et,xt))}case"foreground":{var Et=0-Vt,J=1-Lt;return Math.min(J,Math.max(Et,xt))}}},wt.prototype.updateStartEnd=function(xt){var lt=this.cfg,Vt=lt.start,Lt=lt.end;switch(this.currentTarget){case"minHandler":Vt+=xt;break;case"maxHandler":Lt+=xt;break;case"foreground":Vt+=xt,Lt+=xt;break}this.set("start",Vt),this.set("end",Lt)},wt.prototype._dodgeText=function(xt,lt,Vt){var Lt,Et,J=this.cfg,ht=J.handlerStyle,vt=J.width,bt=2,At=Object(a.get)(ht,"width",v),q=xt[0],ct=xt[1],ot=!1;q>ct&&(Lt=[ct,q],q=Lt[0],ct=Lt[1],Et=[Vt,lt],lt=Et[0],Vt=Et[1],ot=!0);var _=lt.getBBox(),P=Vt.getBBox(),Y=_.width>q-bt?{x:q+At/2+bt,textAlign:"left"}:{x:q-At/2-bt,textAlign:"right"},k=P.width>vt-ct-bt?{x:ct-At/2-bt,textAlign:"right"}:{x:ct+At/2+bt,textAlign:"left"};return ot?[k,Y]:[Y,k]},wt.prototype.draw=function(){var xt=this.get("container"),lt=xt&&xt.get("canvas");lt&&lt.draw()},wt.prototype.getContainerDOM=function(){var xt=this.get("container"),lt=xt&&xt.get("canvas");return lt&&lt.get("container")},wt}(A.a),ft=pt},fIp6:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return at}),z.d(Ut,"b",function(){return m}),z.d(Ut,"c",function(){return E}),z.d(Ut,"d",function(){return y}),z.d(Ut,"e",function(){return s});function at(d,M,S){if(d){if(typeof d.addEventListener=="function")return d.addEventListener(M,S,!1),{remove:function(){d.removeEventListener(M,S,!1)}};if(typeof d.attachEvent=="function")return d.attachEvent("on"+M,S),{remove:function(){d.detachEvent("on"+M,S)}}}}var a,A,e,r;function p(){a=document.createElement("table"),A=document.createElement("tr"),e=/^\s*<(\w+|!)[^>]*>/,r={tr:document.createElement("tbody"),tbody:a,thead:a,tfoot:a,td:A,th:A,"*":document.createElement("div")}}function m(d){a||p();var M=e.test(d)&&RegExp.$1;(!M||!(M in r))&&(M="*");var S=r[M];d=d.replace(/(^\s*)|(\s*$)/g,""),S.innerHTML=""+d;var T=S.childNodes[0];return S.removeChild(T),T}function O(d,M,S){var T;try{T=window.getComputedStyle?window.getComputedStyle(d,null)[M]:d.style[M]}catch(v){}finally{T=T===void 0?S:T}return T}function l(d,M){var S=O(d,"height",M);return S==="auto"&&(S=d.offsetHeight),parseFloat(S)}function E(d,M){var S=l(d,M),T=parseFloat(O(d,"borderTopWidth"))||0,v=parseFloat(O(d,"paddingTop"))||0,x=parseFloat(O(d,"paddingBottom"))||0,C=parseFloat(O(d,"borderBottomWidth"))||0,N=parseFloat(O(d,"marginTop"))||0,X=parseFloat(O(d,"marginBottom"))||0;return S+T+C+v+x+N+X}function j(d,M){var S=O(d,"width",M);return S==="auto"&&(S=d.offsetWidth),parseFloat(S)}function y(d,M){var S=j(d,M),T=parseFloat(O(d,"borderLeftWidth"))||0,v=parseFloat(O(d,"paddingLeft"))||0,x=parseFloat(O(d,"paddingRight"))||0,C=parseFloat(O(d,"borderRightWidth"))||0,N=parseFloat(O(d,"marginRight"))||0,X=parseFloat(O(d,"marginLeft"))||0;return S+T+C+v+x+X+N}function n(){return window.devicePixelRatio?window.devicePixelRatio:2}function s(d,M){if(d)for(var S in M)M.hasOwnProperty(S)&&(d.style[S]=M[S]);return d}},fP0w:function(zn,Ut,z){"use strict";z.r(Ut),z.d(Ut,"Line",function(){return bt}),z.d(Ut,"Circle",function(){return q}),z.d(Ut,"Base",function(){return n});var at={};z.r(at),z.d(at,"getDefault",function(){return M}),z.d(at,"ellipsisHead",function(){return S}),z.d(at,"ellipsisTail",function(){return T}),z.d(at,"ellipsisMiddle",function(){return v});var a={};z.r(a),z.d(a,"getDefault",function(){return pt}),z.d(a,"reserveFirst",function(){return ft}),z.d(a,"reserveLast",function(){return Ot}),z.d(a,"reserveBoth",function(){return wt}),z.d(a,"equidistance",function(){return xt}),z.d(a,"equidistanceWithReverseBoth",function(){return lt});var A={};z.r(A),z.d(A,"getDefault",function(){return Et}),z.d(A,"fixedAngle",function(){return J}),z.d(A,"unfixedAngle",function(){return ht});var e={};z.r(e),z.d(e,"autoHide",function(){return a}),z.d(e,"autoRotate",function(){return A}),z.d(e,"autoEllipsis",function(){return at});var r=z("mrSG"),p=z("6JdA"),m=z("iTfj"),O=z("MeYt"),l=z("jqgP"),E=z("l3hu"),j=z("L16w"),y=function(ct){Object(r.b)(ot,ct);function ot(){return ct!==null&&ct.apply(this,arguments)||this}return ot.prototype.getDefaultCfg=function(){var _=ct.prototype.getDefaultCfg.call(this);return Object(r.a)(Object(r.a)({},_),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:j.a.lineColor}},tickLine:{style:{lineWidth:1,stroke:j.a.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:j.a.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:j.a.textColor,fontFamily:j.a.fontFamily,fontWeight:"normal"},offset:10},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:j.a.textColor,textBaseline:"middle",fontFamily:j.a.fontFamily,textAlign:"center"}},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:j.a.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},ot.prototype.renderInner=function(_){this.get("line")&&this.drawLine(_),this.drawTicks(_),this.get("title")&&this.drawTitle(_)},ot.prototype.isList=function(){return!0},ot.prototype.getItems=function(){return this.get("ticks")},ot.prototype.setItems=function(_){this.update({ticks:_})},ot.prototype.updateItem=function(_,P){Object(m.mix)(_,P),this.clear(),this.render()},ot.prototype.clearItems=function(){var _=this.getElementByLocalId("label-group");_&&_.clear()},ot.prototype.setItemState=function(_,P,Y){_[P]=Y,this.updateTickStates(_)},ot.prototype.hasState=function(_,P){return!!_[P]},ot.prototype.getItemStates=function(_){var P=this.get("tickStates"),Y=[];return Object(m.each)(P,function(k,h){_[h]&&Y.push(h)}),Y},ot.prototype.clearItemsState=function(_){var P=this,Y=this.getItemsByState(_);Object(m.each)(Y,function(k){P.setItemState(k,_,!1)})},ot.prototype.getItemsByState=function(_){var P=this,Y=this.getItems();return Object(m.filter)(Y,function(k){return P.hasState(k,_)})},ot.prototype.getSidePoint=function(_,P){var Y=this,k=Y.getSideVector(P,_);return{x:_.x+k[0],y:_.y+k[1]}},ot.prototype.getTextAnchor=function(_){var P;return Object(m.isNumberEqual)(_[0],0)?P="center":_[0]>0?P="start":_[0]<0&&(P="end"),P},ot.prototype.getTextBaseline=function(_){var P;return Object(m.isNumberEqual)(_[1],0)?P="middle":_[1]>0?P="top":_[1]<0&&(P="bottom"),P},ot.prototype.processOverlap=function(_){},ot.prototype.drawLine=function(_){var P=this.getLinePath(),Y=this.get("line");this.addShape(_,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:Object(m.mix)({path:P},Y.style)})},ot.prototype.getTickLineItems=function(_){var P=this,Y=[],k=this.get("tickLine"),h=k.alignTick,g=k.length,F=1,V=_.length;return V>=2&&(F=_[1].value-_[0].value),Object(m.each)(_,function(H){var et=H.point;h||(et=P.getTickPoint(H.value-F/2));var nt=P.getSidePoint(et,g);Y.push({startPoint:et,tickValue:H.value,endPoint:nt,tickId:H.id,id:"tickline-"+H.id})}),Y},ot.prototype.getSubTickLineItems=function(_){var P=[],Y=this.get("subTickLine"),k=Y.count,h=_.length;if(h>=2)for(var g=0;g<h-1;g++)for(var F=_[g],V=_[g+1],H=0;H<k;H++){var et=(H+1)/(k+1),nt=(1-et)*F.tickValue+et*V.tickValue,St=this.getTickPoint(nt),dt=this.getSidePoint(St,Y.length);P.push({startPoint:St,endPoint:dt,tickValue:nt,id:"sub-"+F.id+"-"+H})}return P},ot.prototype.getTickLineAttrs=function(_,P,Y,k){var h=this.get(P).style,g={points:[_.startPoint,_.endPoint]},F=Object(m.get)(this.get("theme"),["tickLine","style"],{});h=Object(m.isFunction)(h)?Object(m.mix)({},F,h(g,Y,k)):h;var V=_.startPoint,H=_.endPoint;return Object(r.a)({x1:V.x,y1:V.y,x2:H.x,y2:H.y},h)},ot.prototype.drawTick=function(_,P,Y,k,h){this.addShape(P,{type:"line",id:this.getElementId(_.id),name:"axis-"+Y,attrs:this.getTickLineAttrs(_,Y,k,h)})},ot.prototype.drawTickLines=function(_){var P=this,Y=this.get("ticks"),k=this.get("subTickLine"),h=this.getTickLineItems(Y),g=this.addGroup(_,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),F=this.get("tickLine");if(Object(m.each)(h,function(H,et){if(F.displayWithLabel){var nt=P.getElementId("label-"+H.tickId);_.findById(nt)&&P.drawTick(H,g,"tickLine",et,h)}else P.drawTick(H,g,"tickLine",et,h)}),k){var V=this.getSubTickLineItems(h);Object(m.each)(V,function(H,et){P.drawTick(H,g,"subTickLine",et,V)})}},ot.prototype.processTicks=function(){var _=this,P=this.get("ticks");Object(m.each)(P,function(Y){Y.point=_.getTickPoint(Y.value),Object(m.isNil)(Y.id)&&(Y.id=Y.name)})},ot.prototype.drawTicks=function(_){var P=this;this.optimizeTicks(),this.processTicks(),this.get("label")&&this.drawLabels(_),this.get("tickLine")&&this.drawTickLines(_);var Y=this.get("ticks");Object(m.each)(Y,function(k){P.applyTickStates(k,_)})},ot.prototype.optimizeTicks=function(){var _=this.get("optimize"),P=this.get("ticks");if(_&&_.enable&&_.threshold>0){var Y=Object(m.size)(P);if(Y>_.threshold){var k=Math.ceil(Y/_.threshold),h=P.filter(function(g,F){return F%k==0});this.set("ticks",h),this.set("originalTicks",P)}}},ot.prototype.getLabelAttrs=function(_,P,Y){var k=this.get("label"),h=k.offset,g=k.rotate,F=k.formatter,V=this.getSidePoint(_.point,h),H=this.getSideVector(h,V),et=F?F(_.name,_,P):_.name,nt=k.style;nt=Object(m.isFunction)(nt)?Object(m.get)(this.get("theme"),["label","style"],{}):nt;var St=Object(m.mix)({x:V.x,y:V.y,text:et,textAlign:this.getTextAnchor(H),textBaseline:this.getTextBaseline(H)},nt);return g&&(St.matrix=Object(l.e)(V,g)),St},ot.prototype.drawLabels=function(_){var P=this,Y=this.get("ticks"),k=this.addGroup(_,{name:"axis-label-group",id:this.getElementId("label-group")});Object(m.each)(Y,function(nt,St){P.addShape(k,{type:"text",name:"axis-label",id:P.getElementId("label-"+nt.id),attrs:P.getLabelAttrs(nt,St,Y),delegateObject:{tick:nt,item:nt,index:St}})}),this.processOverlap(k);var h=k.getChildren(),g=Object(m.get)(this.get("theme"),["label","style"],{}),F=this.get("label"),V=F.style,H=F.formatter;if(Object(m.isFunction)(V)){var et=h.map(function(nt){return Object(m.get)(nt.get("delegateObject"),"tick")});Object(m.each)(h,function(nt,St){var dt=nt.get("delegateObject").tick,gt=H?H(dt.name,dt,St):dt.name,yt=Object(m.mix)({},g,V(gt,St,et));nt.attr(yt)})}},ot.prototype.getTitleAttrs=function(){var _=this.get("title"),P=_.style,Y=_.position,k=_.offset,h=_.spacing,g=h===void 0?0:h,F=_.autoRotate,V=P.fontSize,H=.5;Y==="start"?H=0:Y==="end"&&(H=1);var et=this.getTickPoint(H),nt=this.getSidePoint(et,k||g+V/2),St=Object(m.mix)({x:nt.x,y:nt.y,text:_.text},P),dt=_.rotate,gt=dt;if(Object(m.isNil)(dt)&&F){var yt=this.getAxisVector(et),Ct=[1,0];gt=p.a.angleTo(yt,Ct,!0)}if(gt){var Pt=Object(l.e)(nt,gt);St.matrix=Pt}return St},ot.prototype.drawTitle=function(_){this.addShape(_,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:this.getTitleAttrs()})},ot.prototype.applyTickStates=function(_,P){var Y=this.getItemStates(_);if(Y.length){var k=this.get("tickStates"),h=this.getElementId("label-"+_.id),g=P.findById(h);if(g){var F=Object(E.a)(_,"label",k);F&&g.attr(F)}var V=this.getElementId("tickline-"+_.id),H=P.findById(V);if(H){var et=Object(E.a)(_,"tickLine",k);et&&H.attr(et)}}},ot.prototype.updateTickStates=function(_){var P=this.getItemStates(_),Y=this.get("tickStates"),k=this.get("label"),h=this.getElementByLocalId("label-"+_.id),g=this.get("tickLine"),F=this.getElementByLocalId("tickline-"+_.id);if(P.length){if(h){var V=Object(E.a)(_,"label",Y);V&&h.attr(V)}if(F){var H=Object(E.a)(_,"tickLine",Y);H&&F.attr(H)}}else h&&h.attr(k.style),F&&F.attr(g.style)},ot}(O.a),n=y,s=z("BgvD");function d(ct,ot,_,P){var Y=ot.getChildren(),k=!1;return Object(m.each)(Y,function(h){var g=Object(s.a)(ct,h,_,P);k=k||g}),k}function M(){return T}function S(ct,ot,_){return d(ct,ot,_,"head")}function T(ct,ot,_){return d(ct,ot,_,"tail")}function v(ct,ot,_){return d(ct,ot,_,"middle")}var x=z("5UbV");function C(ct){var ot=ct.attr("matrix");return ot&&ot[0]!==1}function N(ct){var ot=C(ct)?Object(l.d)(ct.attr("matrix")):0;return ot%360}function X(ct,ot,_,P){var Y=!1,k=N(ot),h=Math.abs(ct?_.attr("y")-ot.attr("y"):_.attr("x")-ot.attr("x")),g=(ct?_.attr("y")>ot.attr("y"):_.attr("x")>ot.attr("x"))?ot.getBBox():_.getBBox();if(ct){var F=Math.abs(Math.cos(k));Object(x.i)(F,0,Math.PI/180)?Y=g.width+P>h:Y=g.height/F+P>h}else{var F=Math.abs(Math.sin(k));Object(x.i)(F,0,Math.PI/180)?Y=g.width+P>h:Y=g.height/F+P>h}return Y}function tt(ct,ot,_,P){var Y=(P==null?void 0:P.minGap)||0,k=ot.getChildren().slice().filter(function(dt){return dt.get("visible")});if(!k.length)return!1;var h=!1;_&&k.reverse();for(var g=k.length,F=k[0],V=F,H=1;H<g;H++){var et=k[H],nt=et.getBBox(),St=X(ct,V,et,Y);St?(et.hide(),h=!0):V=et}return h}function it(ct,ot,_){var P=(_==null?void 0:_.minGap)||0,Y=ot.getChildren().slice();if(Y.length<2)return!1;var k=!1,h=Y[0],g=h.getBBox(),F=Y[1],V=Y.length,H=N(h),et=Math.abs(ct?F.attr("y")-h.attr("y"):F.attr("x")-h.attr("x")),nt=0;if(ct){var St=Math.abs(Math.cos(H));if(Object(x.i)(St,0,Math.PI/180)){var dt=Object(s.b)(Y);nt=(dt+P)/et}else nt=(g.height/St+P)/et}else{var St=Math.abs(Math.sin(H));if(Object(x.i)(St,0,Math.PI/180)){var dt=Object(s.b)(Y);nt=(dt+P)/et}else nt=(g.height/St+P)/et}if(nt>1){nt=Math.ceil(nt);for(var gt=0;gt<V;gt++)gt%nt!=0&&(Y[gt].hide(),k=!0)}return k}function pt(){return xt}function ft(ct,ot,_,P){return tt(ct,ot,!1,P)}function Ot(ct,ot,_,P){return tt(ct,ot,!0,P)}function wt(ct,ot,_,P){var Y=(P==null?void 0:P.minGap)||0,k=ot.getChildren().slice();if(k.length<=2)return!1;for(var h=!1,g=k.length,F=k[0],V=k[g-1],H=F,et=1;et<g-1;et++){var nt=k[et],St=nt.getBBox(),dt=X(ct,H,nt,Y);dt?(nt.hide(),h=!0):H=nt}var gt=X(ct,H,V,Y);return gt&&(H.hide(),h=!0),h}function xt(ct,ot,_,P){var Y=it(ct,ot,P);return tt(ct,ot,!1)&&(Y=!0),Y}function lt(ct,ot,_,P){var Y=ot.getChildren().slice(),k=it(ct,ot,P);if(Y.length>2){var h=Y[0],g=Y[Y.length-1];h.get("visible")||(h.show(),tt(ct,ot,!1,P)&&(k=!0)),g.get("visible")||(g.show(),tt(ct,ot,!0,P)&&(k=!0))}return k}function Vt(ct,ot){Object(m.each)(ct,function(_){var P=_.attr("x"),Y=_.attr("y"),k=Object(l.e)({x:P,y:Y},ot);_.attr("matrix",k)})}function Lt(ct,ot,_,P){var Y=ot.getChildren();if(!Y.length||!ct&&Y.length<2)return!1;var k=Object(s.b)(Y),h=!1;if(ct)h=!!_&&k>_;else{var g=Math.abs(Y[1].attr("x")-Y[0].attr("x"));h=k>g}if(h){var F=P(_,k);Vt(Y,F)}return h}function Et(){return J}function J(ct,ot,_,P){return Lt(ct,ot,_,function(){return Object(m.isNumber)(P)?P:ct?j.a.verticalAxisRotate:j.a.horizontalAxisRotate})}function ht(ct,ot,_){return Lt(ct,ot,_,function(P,Y){if(!P)return ct?j.a.verticalAxisRotate:j.a.horizontalAxisRotate;if(ct)return-Math.acos(P/Y);var k=0;return P>Y?k=Math.PI/4:(k=Math.asin(P/Y),k>Math.PI/4&&(k=Math.PI/4)),k})}var vt=function(ct){Object(r.b)(ot,ct);function ot(){return ct!==null&&ct.apply(this,arguments)||this}return ot.prototype.getDefaultCfg=function(){var _=ct.prototype.getDefaultCfg.call(this);return Object(r.a)(Object(r.a)({},_),{type:"line",locationType:"region",start:null,end:null})},ot.prototype.getLinePath=function(){var _=this.get("start"),P=this.get("end"),Y=[];return Y.push(["M",_.x,_.y]),Y.push(["L",P.x,P.y]),Y},ot.prototype.getInnerLayoutBBox=function(){var _=this.get("start"),P=this.get("end"),Y=ct.prototype.getInnerLayoutBBox.call(this),k=Math.min(_.x,P.x,Y.x),h=Math.min(_.y,P.y,Y.y),g=Math.max(_.x,P.x,Y.maxX),F=Math.max(_.y,P.y,Y.maxY);return{x:k,y:h,minX:k,minY:h,maxX:g,maxY:F,width:g-k,height:F-h}},ot.prototype.isVertical=function(){var _=this.get("start"),P=this.get("end");return Object(m.isNumberEqual)(_.x,P.x)},ot.prototype.isHorizontal=function(){var _=this.get("start"),P=this.get("end");return Object(m.isNumberEqual)(_.y,P.y)},ot.prototype.getTickPoint=function(_){var P=this,Y=P.get("start"),k=P.get("end"),h=k.x-Y.x,g=k.y-Y.y;return{x:Y.x+h*_,y:Y.y+g*_}},ot.prototype.getSideVector=function(_){var P=this.getAxisVector(),Y=p.c.normalize([0,0],P),k=this.get("verticalFactor"),h=[Y[1],Y[0]*-1];return p.c.scale([0,0],h,_*k)},ot.prototype.getAxisVector=function(){var _=this.get("start"),P=this.get("end");return[P.x-_.x,P.y-_.y]},ot.prototype.processOverlap=function(_){var P=this,Y=this.isVertical(),k=this.isHorizontal();if(!(!Y&&!k)){var h=this.get("label"),g=this.get("title"),F=this.get("verticalLimitLength"),V=h.offset,H=F,et=0,nt=0;g&&(et=g.style.fontSize,nt=g.spacing),H&&(H=H-V-nt-et);var St=this.get("overlapOrder");if(Object(m.each)(St,function(yt){h[yt]&&P.canProcessOverlap(yt)&&P.autoProcessOverlap(yt,h[yt],_,H)}),g&&Object(m.isNil)(g.offset)){var dt=_.getCanvasBBox(),gt=Y?dt.width:dt.height;g.offset=V+gt+nt+et/2}}},ot.prototype.canProcessOverlap=function(_){var P=this.get("label");return _==="autoRotate"?Object(m.isNil)(P.rotate):!0},ot.prototype.autoProcessOverlap=function(_,P,Y,k){var h=this,g=this.isVertical(),F=!1,V=e[_];if(P===!0){var H=this.get("label");F=V.getDefault()(g,Y,k)}else if(Object(m.isFunction)(P))F=P(g,Y,k);else if(Object(m.isObject)(P)){var et=P;V[et.type]&&(F=V[et.type](g,Y,k,et.cfg))}else V[P]&&(F=V[P](g,Y,k));if(_==="autoRotate"){if(F){var nt=Y.getChildren(),St=this.get("verticalFactor");Object(m.each)(nt,function(gt){var yt=gt.attr("textAlign");if(yt==="center"){var Ct=St>0?"end":"start";gt.attr("textAlign",Ct)}})}}else if(_==="autoHide"){var dt=Y.getChildren().slice(0);Object(m.each)(dt,function(gt){gt.get("visible")||(h.get("isRegister")&&h.unregisterElement(gt),gt.remove())})}},ot}(n),bt=vt,At=function(ct){Object(r.b)(ot,ct);function ot(){return ct!==null&&ct.apply(this,arguments)||this}return ot.prototype.getDefaultCfg=function(){var _=ct.prototype.getDefaultCfg.call(this);return Object(r.a)(Object(r.a)({},_),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},ot.prototype.getLinePath=function(){var _=this.get("center"),P=_.x,Y=_.y,k=this.get("radius"),h=k,g=this.get("startAngle"),F=this.get("endAngle"),V=[];if(Math.abs(F-g)===Math.PI*2)V=[["M",P,Y-h],["A",k,h,0,1,1,P,Y+h],["A",k,h,0,1,1,P,Y-h],["Z"]];else{var H=this.getCirclePoint(g),et=this.getCirclePoint(F),nt=Math.abs(F-g)>Math.PI?1:0,St=g>F?0:1;V=[["M",P,Y],["L",H.x,H.y],["A",k,h,0,nt,St,et.x,et.y],["L",P,Y]]}return V},ot.prototype.getTickPoint=function(_){var P=this.get("startAngle"),Y=this.get("endAngle"),k=P+(Y-P)*_;return this.getCirclePoint(k)},ot.prototype.getSideVector=function(_,P){var Y=this.get("center"),k=[P.x-Y.x,P.y-Y.y],h=this.get("verticalFactor"),g=p.c.length(k);return p.c.scale(k,k,h*_/g),k},ot.prototype.getAxisVector=function(_){var P=this.get("center"),Y=[_.x-P.x,_.y-P.y];return[Y[1],-1*Y[0]]},ot.prototype.getCirclePoint=function(_,P){var Y=this.get("center");return P=P||this.get("radius"),{x:Y.x+Math.cos(_)*P,y:Y.y+Math.sin(_)*P}},ot}(n),q=At},"h4/5":function(zn,Ut){},hJqF:function(zn,Ut,z){"use strict";z.d(Ut,"d",function(){return O}),z.d(Ut,"b",function(){return l}),z.d(Ut,"c",function(){return E}),z.d(Ut,"a",function(){return n});var at=z("mrSG"),a=z("iTfj"),A=z("w02o"),e=z("YuPD"),r=z("tKoa"),p=z("DyAw");function m(s){var d=s.chart,M=s.options,S=M.data,T=M.color,v=M.lineStyle,x=M.lineShape,C=M.point,N=M.seriesField;d.data(S);var X=Object(e.b)({},s,{options:{shapeField:N,line:{color:T,style:v,shape:x},point:C&&Object(at.a)({color:T,shape:"circle"},C),label:void 0}}),tt=Object(e.b)({},X,{options:{tooltip:!1}});return Object(r.d)(X),Object(r.e)(tt),s}function O(s){var d,M,S=s.options,T=S.xAxis,v=S.yAxis,x=S.xField,C=S.yField,N=S.data;return Object(e.e)(Object(A.f)((d={},d[x]=T,d[C]=v,d),(M={},M[x]={type:"cat"},M[C]=Object(p.a)(N,C),M)))(s)}function l(s){var d=s.chart,M=s.options,S=M.xAxis,T=M.yAxis,v=M.xField,x=M.yField;return S===!1?d.axis(v,!1):d.axis(v,S),T===!1?d.axis(x,!1):d.axis(x,T),s}function E(s){var d=s.chart,M=s.options,S=M.legend,T=M.seriesField;return S&&T?d.legend(T,S):S===!1&&d.legend(!1),s}function j(s){var d=s.chart,M=s.options,S=M.label,T=M.yField,v=Object(e.c)(d,"line");if(!S)v.label(!1);else{var x=S.callback,C=Object(at.c)(S,["callback"]);v.label({fields:[T],callback:x,cfg:Object(at.a)({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Object(e.o)(C))})}return s}function y(s){var d=s.chart,M=s.options,S=M.isStack;return S&&Object(a.each)(d.geometries,function(T){T.adjust("stack")}),s}function n(s){return Object(e.e)(m,O,y,A.j,l,E,A.k,j,A.h,A.c,A.a,Object(A.b)(),A.e)(s)}},hag6:function(zn,Ut,z){"use strict";var at=z("kXyF");Object(at.registerInteraction)("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]})},iTfj:function(zn,Ut,z){"use strict";z.r(Ut),z.d(Ut,"contains",function(){return e}),z.d(Ut,"includes",function(){return e}),z.d(Ut,"difference",function(){return O}),z.d(Ut,"find",function(){return Ot}),z.d(Ut,"findIndex",function(){return xt}),z.d(Ut,"firstValue",function(){return Vt}),z.d(Ut,"flatten",function(){return Et}),z.d(Ut,"flattenDeep",function(){return ht}),z.d(Ut,"getRange",function(){return bt}),z.d(Ut,"pull",function(){return _}),z.d(Ut,"pullAt",function(){return k}),z.d(Ut,"reduce",function(){return g}),z.d(Ut,"remove",function(){return V}),z.d(Ut,"sortBy",function(){return nt}),z.d(Ut,"union",function(){return yt}),z.d(Ut,"uniq",function(){return dt}),z.d(Ut,"valuesOfKey",function(){return Ct}),z.d(Ut,"head",function(){return Pt}),z.d(Ut,"last",function(){return Ft}),z.d(Ut,"startsWith",function(){return zt}),z.d(Ut,"endsWith",function(){return re}),z.d(Ut,"filter",function(){return p}),z.d(Ut,"every",function(){return ye}),z.d(Ut,"some",function(){return De}),z.d(Ut,"group",function(){return Rn}),z.d(Ut,"groupBy",function(){return sn}),z.d(Ut,"groupToMap",function(){return An}),z.d(Ut,"getWrapBehavior",function(){return Cn}),z.d(Ut,"wrapBehavior",function(){return Xn}),z.d(Ut,"number2color",function(){return nr}),z.d(Ut,"parseRadius",function(){return Sr}),z.d(Ut,"clamp",function(){return ti}),z.d(Ut,"fixedBase",function(){return Fi}),z.d(Ut,"isDecimal",function(){return Ui}),z.d(Ut,"isEven",function(){return Vi}),z.d(Ut,"isInteger",function(){return jr}),z.d(Ut,"isNegative",function(){return pr}),z.d(Ut,"isNumberEqual",function(){return Br}),z.d(Ut,"isOdd",function(){return Yr}),z.d(Ut,"isPositive",function(){return ni}),z.d(Ut,"maxBy",function(){return fi}),z.d(Ut,"minBy",function(){return $r}),z.d(Ut,"mod",function(){return Qr}),z.d(Ut,"toDegree",function(){return bi}),z.d(Ut,"toInteger",function(){return _i}),z.d(Ut,"toRadian",function(){return Wi}),z.d(Ut,"forIn",function(){return Zi}),z.d(Ut,"has",function(){return Pi}),z.d(Ut,"hasKey",function(){return no}),z.d(Ut,"hasValue",function(){return uo}),z.d(Ut,"keys",function(){return x}),z.d(Ut,"isMatch",function(){return N}),z.d(Ut,"values",function(){return ao}),z.d(Ut,"lowerCase",function(){return Kt}),z.d(Ut,"lowerFirst",function(){return Oe}),z.d(Ut,"substitute",function(){return On}),z.d(Ut,"upperCase",function(){return Hn}),z.d(Ut,"upperFirst",function(){return rn}),z.d(Ut,"getType",function(){return vr}),z.d(Ut,"isArguments",function(){return rr}),z.d(Ut,"isArray",function(){return d}),z.d(Ut,"isArrayLike",function(){return a}),z.d(Ut,"isBoolean",function(){return Ar}),z.d(Ut,"isDate",function(){return xr}),z.d(Ut,"isError",function(){return Ir}),z.d(Ut,"isFunction",function(){return y}),z.d(Ut,"isFinite",function(){return Lr}),z.d(Ut,"isNil",function(){return s}),z.d(Ut,"isNull",function(){return Dr}),z.d(Ut,"isNumber",function(){return si}),z.d(Ut,"isObject",function(){return M}),z.d(Ut,"isObjectLike",function(){return tt}),z.d(Ut,"isPlainObject",function(){return pt}),z.d(Ut,"isPrototype",function(){return ii}),z.d(Ut,"isRegExp",function(){return zi}),z.d(Ut,"isString",function(){return H}),z.d(Ut,"isType",function(){return j}),z.d(Ut,"isUndefined",function(){return Bi}),z.d(Ut,"isElement",function(){return pe}),z.d(Ut,"requestAnimationFrame",function(){return G}),z.d(Ut,"clearAnimationFrame",function(){return B}),z.d(Ut,"augment",function(){return Jt}),z.d(Ut,"clone",function(){return se}),z.d(Ut,"debounce",function(){return Ee}),z.d(Ut,"memoize",function(){return cn}),z.d(Ut,"deepMix",function(){return Se}),z.d(Ut,"each",function(){return T}),z.d(Ut,"extend",function(){return ue}),z.d(Ut,"indexOf",function(){return kn}),z.d(Ut,"isEmpty",function(){return Ze}),z.d(Ut,"isEqual",function(){return R}),z.d(Ut,"isEqualWith",function(){return mt}),z.d(Ut,"map",function(){return me}),z.d(Ut,"mapValues",function(){return ve}),z.d(Ut,"mix",function(){return ut}),z.d(Ut,"assign",function(){return ut}),z.d(Ut,"get",function(){return he}),z.d(Ut,"set",function(){return ce}),z.d(Ut,"pick",function(){return _e}),z.d(Ut,"throttle",function(){return We}),z.d(Ut,"toArray",function(){return Re}),z.d(Ut,"toString",function(){return xo}),z.d(Ut,"uniqueId",function(){return ke}),z.d(Ut,"noop",function(){return ln}),z.d(Ut,"identity",function(){return hn}),z.d(Ut,"size",function(){return nn}),z.d(Ut,"Cache",function(){return Sn});var at=function(le){return le!==null&&typeof le!="function"&&isFinite(le.length)},a=at,A=function(le,Le){return a(le)?le.indexOf(Le)>-1:!1},e=A,r=function(le,Le){if(!a(le))return le;for(var Be=[],en=0;en<le.length;en++){var un=le[en];Le(un,en)&&Be.push(un)}return Be},p=r,m=function(le,Le){return Le===void 0&&(Le=[]),p(le,function(Be){return!e(Le,Be)})},O=m,l={}.toString,E=function(le,Le){return l.call(le)==="[object "+Le+"]"},j=E,y=function(Pe){return j(Pe,"Function")},n=function(le){return le==null},s=n,d=function(Pe){return Array.isArray?Array.isArray(Pe):j(Pe,"Array")},M=function(Pe){var le=typeof Pe;return Pe!==null&&le==="object"||le==="function"};function S(Pe,le){if(!!Pe){var Le;if(d(Pe))for(var Be=0,en=Pe.length;Be<en&&(Le=le(Pe[Be],Be),Le!==!1);Be++);else if(M(Pe)){for(var un in Pe)if(Pe.hasOwnProperty(un)&&(Le=le(Pe[un],un),Le===!1))break}}}var T=S,v=Object.keys?function(Pe){return Object.keys(Pe)}:function(Pe){var le=[];return T(Pe,function(Le,Be){y(Pe)&&Be==="prototype"||le.push(Be)}),le},x=v;function C(Pe,le){var Le=x(le),Be=Le.length;if(s(Pe))return!Be;for(var en=0;en<Be;en+=1){var un=Le[en];if(le[un]!==Pe[un]||!(un in Pe))return!1}return!0}var N=C,X=function(le){return typeof le=="object"&&le!==null},tt=X,it=function(le){if(!tt(le)||!j(le,"Object"))return!1;if(Object.getPrototypeOf(le)===null)return!0;for(var Le=le;Object.getPrototypeOf(Le)!==null;)Le=Object.getPrototypeOf(Le);return Object.getPrototypeOf(le)===Le},pt=it;function ft(Pe,le){if(!d(Pe))return null;var Le;if(y(le)&&(Le=le),pt(le)&&(Le=function(un){return N(un,le)}),Le){for(var Be=0;Be<Pe.length;Be+=1)if(Le(Pe[Be]))return Pe[Be]}return null}var Ot=ft;function wt(Pe,le,Le){Le===void 0&&(Le=0);for(var Be=Le;Be<Pe.length;Be++)if(le(Pe[Be],Be))return Be;return-1}var xt=wt,lt=function(le,Le){for(var Be=null,en=0;en<le.length;en++){var un=le[en],ze=un[Le];if(!s(ze)){d(ze)?Be=ze[0]:Be=ze;break}}return Be},Vt=lt,Lt=function(le){if(!d(le))return[];for(var Le=[],Be=0;Be<le.length;Be++)Le=Le.concat(le[Be]);return Le},Et=Lt,J=function Pe(le,Le){if(Le===void 0&&(Le=[]),!d(le))Le.push(le);else for(var Be=0;Be<le.length;Be+=1)Pe(le[Be],Le);return Le},ht=J,vt=function(le){var Le=le.filter(function(fn){return!isNaN(fn)});if(!Le.length)return{min:0,max:0};if(d(le[0])){for(var Be=[],en=0;en<le.length;en++)Be=Be.concat(le[en]);Le=Be}var un=Math.max.apply(null,Le),ze=Math.min.apply(null,Le);return{min:ze,max:un}},bt=vt,At=Array.prototype,q=At.splice,ct=At.indexOf,ot=function(le){for(var Le=[],Be=1;Be<arguments.length;Be++)Le[Be-1]=arguments[Be];for(var en=0;en<Le.length;en++)for(var un=Le[en],ze=-1;(ze=ct.call(le,un))>-1;)q.call(le,ze,1);return le},_=ot,P=Array.prototype.splice,Y=function(le,Le){if(!a(le))return[];for(var Be=le?Le.length:0,en=Be-1;Be--;){var un=void 0,ze=Le[Be];(Be===en||ze!==un)&&(un=ze,P.call(le,ze,1))}return le},k=Y,h=function(le,Le,Be){if(!d(le)&&!pt(le))return le;var en=Be;return T(le,function(un,ze){en=Le(en,un,ze)}),en},g=h,F=function(le,Le){var Be=[];if(!a(le))return Be;for(var en=-1,un=[],ze=le.length;++en<ze;){var fn=le[en];Le(fn,en,le)&&(Be.push(fn),un.push(en))}return k(le,un),Be},V=F,H=function(Pe){return j(Pe,"String")};function et(Pe,le){var Le;if(y(le))Le=function(un,ze){return le(un)-le(ze)};else{var Be=[];H(le)?Be.push(le):d(le)&&(Be=le),Le=function(un,ze){for(var fn=0;fn<Be.length;fn+=1){var mn=Be[fn];if(un[mn]>ze[mn])return 1;if(un[mn]<ze[mn])return-1}return 0}}return Pe.sort(Le),Pe}var nt=et,St=function(le){var Le=[];return T(le,function(Be){e(Le,Be)||Le.push(Be)}),Le},dt=St,gt=function(){for(var le=[],Le=0;Le<arguments.length;Le++)le[Le]=arguments[Le];return dt([].concat.apply([],le))},yt=gt,Ct=function(Pe,le){for(var Le=[],Be={},en=0;en<Pe.length;en++){var un=Pe[en],ze=un[le];if(!s(ze)){d(ze)||(ze=[ze]);for(var fn=0;fn<ze.length;fn++){var mn=ze[fn];Be[mn]||(Le.push(mn),Be[mn]=!0)}}}return Le};function Pt(Pe){if(a(Pe))return Pe[0]}function Ft(Pe){if(a(Pe)){var le=Pe;return le[le.length-1]}}function Tt(Pe,le){return d(Pe)||H(Pe)?Pe[0]===le:!1}var zt=Tt;function Xt(Pe,le){return d(Pe)||H(Pe)?Pe[Pe.length-1]===le:!1}var re=Xt,de=function(le,Le){for(var Be=0;Be<le.length;Be++)if(!Le(le[Be],Be))return!1;return!0},ye=de,we=function(le,Le){for(var Be=0;Be<le.length;Be++)if(Le(le[Be],Be))return!0;return!1},De=we,Ve=Object.prototype.hasOwnProperty;function pn(Pe,le){if(!le||!d(Pe))return{};for(var Le={},Be=y(le)?le:function(fn){return fn[le]},en,un=0;un<Pe.length;un++){var ze=Pe[un];en=Be(ze),Ve.call(Le,en)?Le[en].push(ze):Le[en]=[ze]}return Le}var sn=pn,In=function(le,Le){if(!Le)return{0:le};if(!y(Le)){var Be=d(Le)?Le:Le.replace(/\s+/g,"").split("*");Le=function(ze){for(var fn="_",mn=0,Wn=Be.length;mn<Wn;mn++)fn+=ze[Be[mn]]&&ze[Be[mn]].toString();return fn}}var en=sn(le,Le);return en},An=In,Rn=function(Pe,le){if(!le)return[Pe];var Le=An(Pe,le),Be=[];for(var en in Le)Be.push(Le[en]);return Be};function Mn(Pe,le){return Pe["_wrap_"+le]}var Cn=Mn;function Gn(Pe,le){if(Pe["_wrap_"+le])return Pe["_wrap_"+le];var Le=function(en){Pe[le](en)};return Pe["_wrap_"+le]=Le,Le}var Xn=Gn,tr={};function or(Pe){var le=tr[Pe];if(!le){for(var Le=Pe.toString(16),Be=Le.length;Be<6;Be++)Le="0"+Le;le="#"+Le,tr[Pe]=le}return le}var nr=or;function er(Pe){var le=0,Le=0,Be=0,en=0;return d(Pe)?Pe.length===1?le=Le=Be=en=Pe[0]:Pe.length===2?(le=Be=Pe[0],Le=en=Pe[1]):Pe.length===3?(le=Pe[0],Le=en=Pe[1],Be=Pe[2]):(le=Pe[0],Le=Pe[1],Be=Pe[2],en=Pe[3]):le=Le=Be=en=Pe,{r1:le,r2:Le,r3:Be,r4:en}}var Sr=er,Vr=function(le,Le,Be){return le<Le?Le:le>Be?Be:le},ti=Vr,hi=function(le,Le){var Be=Le.toString(),en=Be.indexOf(".");if(en===-1)return Math.round(le);var un=Be.substr(en+1).length;return un>20&&(un=20),parseFloat(le.toFixed(un))},Fi=hi,to=function(le){return j(le,"Number")},si=to,Ti=function(le){return si(le)&&le%1!=0},Ui=Ti,Li=function(le){return si(le)&&le%2==0},Vi=Li,ro=Number.isInteger?Number.isInteger:function(Pe){return si(Pe)&&Pe%1==0},jr=ro,Ji=function(le){return si(le)&&le<0},pr=Ji,Xr=1e-5;function Br(Pe,le,Le){return Le===void 0&&(Le=Xr),Math.abs(Pe-le)<Le}var Nr=function(le){return si(le)&&le%2!=0},Yr=Nr,Kr=function(le){return si(le)&&le>0},ni=Kr,fi=function(Pe,le){if(!!d(Pe)){var Le=Pe[0],Be;y(le)?Be=le(Pe[0]):Be=Pe[0][le];var en;return T(Pe,function(un){y(le)?en=le(un):en=un[le],en>Be&&(Le=un,Be=en)}),Le}},$r=function(Pe,le){if(!!d(Pe)){var Le=Pe[0],Be;y(le)?Be=le(Pe[0]):Be=Pe[0][le];var en;return T(Pe,function(un){y(le)?en=le(un):en=un[le],en<Be&&(Le=un,Be=en)}),Le}},ci=function(le,Le){return(le%Le+Le)%Le},Qr=ci,gi=180/Math.PI,Oi=function(le){return gi*le},bi=Oi,_i=parseInt,Qi=Math.PI/180,io=function(le){return Qi*le},Wi=io,Zi=T,Pi=function(Pe,le){return Pe.hasOwnProperty(le)},no=Pi,Mo=Object.values?function(Pe){return Object.values(Pe)}:function(Pe){var le=[];return T(Pe,function(Le,Be){y(Pe)&&Be==="prototype"||le.push(Le)}),le},ao=Mo,uo=function(Pe,le){return e(ao(Pe),le)},xo=function(Pe){return s(Pe)?"":Pe.toString()},oe=function(le){return xo(le).toLowerCase()},Kt=oe,te=function(le){var Le=xo(le);return Le.charAt(0).toLowerCase()+Le.substring(1)},Oe=te;function Qe(Pe,le){return!Pe||!le?Pe:Pe.replace(/\\?\{([^{}]+)\}/g,function(Le,Be){return Le.charAt(0)==="\\"?Le.slice(1):le[Be]===void 0?"":le[Be]})}var On=Qe,Vn=function(le){return xo(le).toUpperCase()},Hn=Vn,$e=function(le){var Le=xo(le);return Le.charAt(0).toUpperCase()+Le.substring(1)},rn=$e,on={}.toString,$n=function(le){return on.call(le).replace(/^\[object /,"").replace(/]$/,"")},vr=$n,ar=function(le){return j(le,"Arguments")},rr=ar,Fr=function(le){return j(le,"Boolean")},Ar=Fr,wr=function(le){return j(le,"Date")},xr=wr,Er=function(le){return j(le,"Error")},Ir=Er,Lr=function(Pe){return si(Pe)&&isFinite(Pe)},Pr=function(le){return le===null},Dr=Pr,ri=Object.prototype,vi=function(le){var Le=le&&le.constructor,Be=typeof Le=="function"&&Le.prototype||ri;return le===Be},ii=vi,Si=function(le){return j(le,"RegExp")},zi=Si,Xi=function(le){return le===void 0},Bi=Xi,Di=function(le){return le instanceof Element||le instanceof HTMLDocument},pe=Di;function G(Pe){var le=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Le){return setTimeout(Le,16)};return le(Pe)}function B(Pe){var le=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;le(Pe)}function $(Pe,le){for(var Le in le)le.hasOwnProperty(Le)&&Le!=="constructor"&&le[Le]!==void 0&&(Pe[Le]=le[Le])}function ut(Pe,le,Le,Be){return le&&$(Pe,le),Le&&$(Pe,Le),Be&&$(Pe,Be),Pe}var Bt=function(){for(var le=[],Le=0;Le<arguments.length;Le++)le[Le]=arguments[Le];for(var Be=le[0],en=1;en<le.length;en++){var un=le[en];y(un)&&(un=un.prototype),ut(Be.prototype,un)}},Jt=Bt,ie=function Pe(le){if(typeof le!="object"||le===null)return le;var Le;if(d(le)){Le=[];for(var Be=0,en=le.length;Be<en;Be++)typeof le[Be]=="object"&&le[Be]!=null?Le[Be]=Pe(le[Be]):Le[Be]=le[Be]}else{Le={};for(var un in le)typeof le[un]=="object"&&le[un]!=null?Le[un]=Pe(le[un]):Le[un]=le[un]}return Le},se=ie;function Ce(Pe,le,Le){var Be;return function(){var en=this,un=arguments,ze=function(){Be=null,Le||Pe.apply(en,un)},fn=Le&&!Be;clearTimeout(Be),Be=setTimeout(ze,le),fn&&Pe.apply(en,un)}}var Ee=Ce,cn=function(Pe,le){if(!y(Pe))throw new TypeError("Expected a function");var Le=function Be(){for(var en=[],un=0;un<arguments.length;un++)en[un]=arguments[un];var ze=le?le.apply(this,en):en[0],fn=Be.cache;if(fn.has(ze))return fn.get(ze);var mn=Pe.apply(this,en);return fn.set(ze,mn),mn};return Le.cache=new Map,Le},xn=5;function _t(Pe,le,Le,Be){Le=Le||0,Be=Be||xn;for(var en in le)if(le.hasOwnProperty(en)){var un=le[en];un!==null&&pt(un)?(pt(Pe[en])||(Pe[en]={}),Le<Be?_t(Pe[en],un,Le+1,Be):Pe[en]=le[en]):d(un)?(Pe[en]=[],Pe[en]=Pe[en].concat(un)):un!==void 0&&(Pe[en]=un)}}var Yt=function(le){for(var Le=[],Be=1;Be<arguments.length;Be++)Le[Be-1]=arguments[Be];for(var en=0;en<Le.length;en+=1)_t(le,Le[en]);return le},Se=Yt,Wt=function(le,Le,Be,en){y(Le)||(Be=Le,Le=le,le=function(){});var un=Object.create?function(fn,mn){return Object.create(fn,{constructor:{value:mn}})}:function(fn,mn){function Wn(){}Wn.prototype=fn;var Tn=new Wn;return Tn.constructor=mn,Tn},ze=un(Le.prototype,le);return le.prototype=ut(ze,le.prototype),le.superclass=un(Le.prototype,Le),ut(ze,Be),ut(le,en),le},ue=Wt,vn=function(le,Le){if(!a(le))return-1;var Be=Array.prototype.indexOf;if(Be)return Be.call(le,Le);for(var en=-1,un=0;un<le.length;un++)if(le[un]===Le){en=un;break}return en},kn=vn,_n=Object.prototype.hasOwnProperty;function Un(Pe){if(s(Pe))return!0;if(a(Pe))return!Pe.length;var le=vr(Pe);if(le==="Map"||le==="Set")return!Pe.size;if(ii(Pe))return!Object.keys(Pe).length;for(var Le in Pe)if(_n.call(Pe,Le))return!1;return!0}var Ze=Un,Te=function Pe(le,Le){if(le===Le)return!0;if(!le||!Le||H(le)||H(Le))return!1;if(a(le)||a(Le)){if(le.length!==Le.length)return!1;for(var Be=!0,en=0;en<le.length&&(Be=Pe(le[en],Le[en]),!!Be);en++);return Be}if(tt(le)||tt(Le)){var un=Object.keys(le),ze=Object.keys(Le);if(un.length!==ze.length)return!1;for(var Be=!0,en=0;en<un.length&&(Be=Pe(le[un[en]],Le[un[en]]),!!Be);en++);return Be}return!1},R=Te,mt=function(Pe,le,Le){return y(Le)?!!Le(Pe,le):R(Pe,le)},$t=function(le,Le){if(!a(le))return le;for(var Be=[],en=0;en<le.length;en++){var un=le[en];Be.push(Le(un,en))}return Be},me=$t,Zt=function(le){return le},ve=function(Pe,le){le===void 0&&(le=Zt);var Le={};return M(Pe)&&!s(Pe)&&Object.keys(Pe).forEach(function(Be){Le[Be]=le(Pe[Be],Be)}),Le},he=function(Pe,le,Le){for(var Be=0,en=H(le)?le.split("."):le;Pe&&Be<en.length;)Pe=Pe[en[Be++]];return Pe===void 0||Be<en.length?Le:Pe},ce=function(Pe,le,Le){var Be=Pe,en=H(le)?le.split("."):le;return en.forEach(function(un,ze){ze<en.length-1?(M(Be[un])||(Be[un]=si(en[ze+1])?[]:{}),Be=Be[un]):Be[un]=Le}),Pe},Me=Object.prototype.hasOwnProperty,_e=function(Pe,le){if(Pe===null||!pt(Pe))return{};var Le={};return T(le,function(Be){Me.call(Pe,Be)&&(Le[Be]=Pe[Be])}),Le},We=function(Pe,le,Le){var Be,en,un,ze,fn=0;Le||(Le={});var mn=function(){fn=Le.leading===!1?0:Date.now(),Be=null,ze=Pe.apply(en,un),Be||(en=un=null)},Wn=function(){var Pn=Date.now();!fn&&Le.leading===!1&&(fn=Pn);var lr=le-(Pn-fn);return en=this,un=arguments,lr<=0||lr>le?(Be&&(clearTimeout(Be),Be=null),fn=Pn,ze=Pe.apply(en,un),Be||(en=un=null)):!Be&&Le.trailing!==!1&&(Be=setTimeout(mn,lr)),ze};return Wn.cancel=function(){clearTimeout(Be),fn=0,Be=en=un=null},Wn},Re=function(Pe){return a(Pe)?Array.prototype.slice.call(Pe):[]},tn={},ke=function(Pe){return Pe=Pe||"g",tn[Pe]?tn[Pe]+=1:tn[Pe]=1,Pe+tn[Pe]},ln=function(){},hn=function(Pe){return Pe};function nn(Pe){return s(Pe)?0:a(Pe)?Pe.length:Object.keys(Pe).length}var dn=function(){function Pe(){this.map={}}return Pe.prototype.has=function(le){return this.map[le]!==void 0},Pe.prototype.get=function(le,Le){var Be=this.map[le];return Be===void 0?Le:Be},Pe.prototype.set=function(le,Le){this.map[le]=Le},Pe.prototype.clear=function(){this.map={}},Pe.prototype.delete=function(le){delete this.map[le]},Pe.prototype.size=function(){return Object.keys(this.map).length},Pe}(),Sn=dn},j5sG:function(zn,Ut,z){"use strict";Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.createSensor=void 0;var at=a(z("NohK"));function a(e){return e&&e.__esModule?e:{default:e}}var A=function(r){var p=void 0,m=[],O=(0,at.default)(function(){m.forEach(function(n){n(r)})}),l=function(){var s=new ResizeObserver(O);return s.observe(r),O(),s},E=function(s){p||(p=l()),m.indexOf(s)===-1&&m.push(s)},j=function(){p.disconnect(),m=[],p=void 0},y=function(s){var d=m.indexOf(s);d!==-1&&m.splice(d,1),m.length===0&&p&&j()};return{element:r,bind:E,destroy:j,unbind:y}};Ut.createSensor=A},jqgP:function(zn,Ut,z){"use strict";z.d(Ut,"e",function(){return A}),z.d(Ut,"f",function(){return e}),z.d(Ut,"d",function(){return r}),z.d(Ut,"a",function(){return m}),z.d(Ut,"b",function(){return O}),z.d(Ut,"c",function(){return l});var at=z("6JdA"),a=[1,0,0,0,1,0,0,0,1];function A(E,j,y){if(y===void 0&&(y=a),!j)return null;var n=at.a.transform(y,[["t",-E.x,-E.y],["r",j],["t",E.x,E.y]]);return n}function e(E,j){return!E.x&&!E.y?null:at.a.transform(j||a,[["t",E.x,E.y]])}function r(E){var j=[1,0,0],y=[0,0,0];return at.d.transformMat3(y,j,E),Math.atan2(y[1],y[0])}function p(E,j){var y=[0,0];return at.c.transformMat3(y,j,E),y}function m(E,j){var y=p(E,[j.minX,j.minY]),n=p(E,[j.maxX,j.minY]),s=p(E,[j.minX,j.maxY]),d=p(E,[j.maxX,j.maxY]),M=Math.min(y[0],n[0],s[0],d[0]),S=Math.max(y[0],n[0],s[0],d[0]),T=Math.min(y[1],n[1],s[1],d[1]),v=Math.max(y[1],n[1],s[1],d[1]);return{x:M,y:T,minX:M,minY:T,maxX:S,maxY:v,width:S-M,height:v-T}}function O(E,j,y,n){if(j){var s=A({x:y,y:n},j,E.getMatrix());E.setMatrix(s)}}function l(E,j,y){var n=e({x:j,y});E.attr("matrix",n)}},kXyF:function(zn,Ut,z){"use strict";z.r(Ut),z.d(Ut,"VERSION",function(){return Or}),z.d(Ut,"Chart",function(){return gu}),z.d(Ut,"View",function(){return es}),z.d(Ut,"Event",function(){return Vo}),z.d(Ut,"ComponentController",function(){return Do}),z.d(Ut,"TooltipController",function(){return Fs}),z.d(Ut,"Geometry",function(){return la}),z.d(Ut,"Element",function(){return ca}),z.d(Ut,"GeometryLabel",function(){return Fe}),z.d(Ut,"Interaction",function(){return lr}),z.d(Ut,"Action",function(){return ut}),z.d(Ut,"Facet",function(){return Di}),z.d(Ut,"InteractionAction",function(){return ut}),z.d(Ut,"registerComponentController",function(){return yr}),z.d(Ut,"registerGeometry",function(){return Ho}),z.d(Ut,"registerShape",function(){return fo}),z.d(Ut,"registerShapeFactory",function(){return oa}),z.d(Ut,"getShapeFactory",function(){return bs}),z.d(Ut,"registerGeometryLabel",function(){return jn}),z.d(Ut,"registerGeometryLabelLayout",function(){return Wo}),z.d(Ut,"getGeometryLabel",function(){return ys}),z.d(Ut,"getGeometryLabelLayout",function(){return zs}),z.d(Ut,"getInteraction",function(){return Yi}),z.d(Ut,"registerInteraction",function(){return $i}),z.d(Ut,"registerAction",function(){return Ee}),z.d(Ut,"getActionClass",function(){return Ce}),z.d(Ut,"getFacet",function(){return G}),z.d(Ut,"registerFacet",function(){return B}),z.d(Ut,"getTheme",function(){return xi}),z.d(Ut,"registerTheme",function(){return ks}),z.d(Ut,"registerEngine",function(){return T}),z.d(Ut,"getEngine",function(){return S}),z.d(Ut,"registerAnimation",function(){return Eo}),z.d(Ut,"getAnimation",function(){return Gs}),z.d(Ut,"LAYER",function(){return A}),z.d(Ut,"DIRECTION",function(){return e}),z.d(Ut,"Types",function(){return Ue}),z.d(Ut,"Coordinate",function(){return pr}),z.d(Ut,"Scale",function(){return we.c}),z.d(Ut,"Util",function(){return ei});var at=z("mrSG"),a=z("iTfj"),A;(function(c){c.FORE="fore",c.MID="mid",c.BG="bg"})(A||(A={}));var e;(function(c){c.TOP="top",c.TOP_LEFT="top-left",c.TOP_RIGHT="top-right",c.RIGHT="right",c.RIGHT_TOP="right-top",c.RIGHT_BOTTOM="right-bottom",c.LEFT="left",c.LEFT_TOP="left-top",c.LEFT_BOTTOM="left-bottom",c.BOTTOM="bottom",c.BOTTOM_LEFT="bottom-left",c.BOTTOM_RIGHT="bottom-right",c.RADIUS="radius",c.CIRCLE="circle",c.NONE="none"})(e||(e={}));var r;(function(c){c.AXIS="axis",c.GRID="grid",c.LEGEND="legend",c.TOOLTIP="tooltip",c.ANNOTATION="annotation",c.SLIDER="slider",c.SCROLLBAR="scrollbar",c.OTHER="other"})(r||(r={}));var p={FORE:3,MID:2,BG:1},m;(function(c){c.BEFORE_RENDER="beforerender",c.AFTER_RENDER="afterrender",c.BEFORE_PAINT="beforepaint",c.AFTER_PAINT="afterpaint",c.BEFORE_CHANGE_DATA="beforechangedata",c.AFTER_CHANGE_DATA="afterchangedata",c.BEFORE_CLEAR="beforeclear",c.AFTER_CLEAR="afterclear",c.BEFORE_DESTROY="beforedestroy",c.BEFORE_CHANGE_SIZE="beforechangesize",c.AFTER_CHANGE_SIZE="afterchangesize"})(m||(m={}));var O;(function(c){c.BEFORE_DRAW_ANIMATE="beforeanimate",c.AFTER_DRAW_ANIMATE="afteranimate"})(O||(O={}));var l;(function(c){c.MOUSE_ENTER="plot:mouseenter",c.MOUSE_DOWN="plot:mousedown",c.MOUSE_MOVE="plot:mousemove",c.MOUSE_UP="plot:mouseup",c.MOUSE_LEAVE="plot:mouseleave",c.TOUCH_START="plot:touchstart",c.TOUCH_MOVE="plot:touchmove",c.TOUCH_END="plot:touchend",c.TOUCH_CANCEL="plot:touchcancel",c.CLICK="plot:click",c.DBLCLICK="plot:dblclick",c.CONTEXTMENU="plot:contextmenu",c.LEAVE="plot:leave",c.ENTER="plot:enter"})(l||(l={}));var E;(function(c){c.ACTIVE="active",c.INACTIVE="inactive",c.SELECTED="selected",c.DEFAULT="default"})(E||(E={}));var j=["color","shape","size"],y="_origin",n=1,s=1,d=.25,M={};function S(c){var o=M[c];if(!o)throw new Error("G engine '"+c+"' is not exist, please register it at first.");return o}function T(c,o){M[c]=o}var v=z("fIp6");function x(c){var o=getComputedStyle(c);return{width:(c.clientWidth||parseInt(o.width,10))-parseInt(o.paddingLeft,10)-parseInt(o.paddingRight,10),height:(c.clientHeight||parseInt(o.height,10))-parseInt(o.paddingTop,10)-parseInt(o.paddingBottom,10)}}function C(c){return typeof c=="number"&&!isNaN(c)}function N(c,o,t,i){var b=t,D=i;if(o){var rt=x(c);b=rt.width?rt.width:b,D=rt.height?rt.height:D}return{width:Math.max(C(b)?b:n,n),height:Math.max(C(D)?D:s,s)}}function X(c){var o=c.parentNode;o&&o.removeChild(c)}var tt=z("f6Jy"),it=function(c){Object(at.b)(o,c);function o(t){var i=c.call(this)||this;i.destroyed=!1;var b=t.visible,D=b===void 0?!0:b;return i.visible=D,i}return o.prototype.show=function(){var t=this.visible;t||this.changeVisible(!0)},o.prototype.hide=function(){var t=this.visible;t&&this.changeVisible(!1)},o.prototype.destroy=function(){this.off(),this.destroyed=!0},o.prototype.changeVisible=function(t){this.visible!==t&&(this.visible=t)},o}(tt.a),pt=it,ft=z("aFU3"),Ot=z("7s0d"),wt=function(o,t){return Object(a.isString)(t)?t:o.invert(o.scale(t))},xt=function(){function c(o){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(o)}return c.prototype.mapping=function(){for(var o=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var b=t.map(function(D,rt){return o._toOriginParam(D,o.scales[rt])});return this.callback.apply(this,b)},c.prototype.getLinearValue=function(o){var t=this.values.length-1,i=Math.floor(t*o),b=t*o-i,D=this.values[i],rt=i===t?D:this.values[i+1];return D+(rt-D)*b},c.prototype.getNames=function(){for(var o=this.scales,t=this.names,i=Math.min(o.length,t.length),b=[],D=0;D<i;D+=1)b.push(t[D]);return b},c.prototype.getFields=function(){return this.scales.map(function(o){return o.field})},c.prototype.getScale=function(o){return this.scales[this.names.indexOf(o)]},c.prototype.defaultCallback=function(){for(var o=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return t.length===0?this.values:t.map(function(b,D){var rt=o.scales[D];return rt.type==="identity"?rt.values[0]:o._getAttributeValue(rt,b)})},c.prototype._parseCfg=function(o){var t=this,i=o.type,b=i===void 0?"base":i,D=o.names,rt=D===void 0?[]:D,Mt=o.scales,Nt=Mt===void 0?[]:Mt,ne=o.values,ge=ne===void 0?[]:ne,be=o.callback;this.type=b,this.scales=Nt,this.values=ge,this.names=rt,this.callback=function(){for(var Ae=[],Xe=0;Xe<arguments.length;Xe++)Ae[Xe]=arguments[Xe];if(be){var an=be.apply(void 0,Ae);if(!Object(a.isNil)(an))return[an]}return t.defaultCallback.apply(t,Ae)}},c.prototype._getAttributeValue=function(o,t){if(o.isCategory&&!this.linear){var i=o.translate(t);return this.values[i%this.values.length]}var b=o.scale(t);return this.getLinearValue(b)},c.prototype._toOriginParam=function(o,t){return t.isLinear?o:Object(a.isArray)(o)?o.map(function(i){return wt(t,i)}):wt(t,o)},c}(),lt=xt;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Vt=function(o,t){return Vt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,b){i.__proto__=b}||function(i,b){for(var D in b)b.hasOwnProperty(D)&&(i[D]=b[D])},Vt(o,t)};function Lt(c,o){Vt(c,o);function t(){this.constructor=c}c.prototype=o===null?Object.create(o):(t.prototype=o.prototype,new t)}var Et=function(){return Et=Object.assign||function(t){for(var i,b=1,D=arguments.length;b<D;b++){i=arguments[b];for(var rt in i)Object.prototype.hasOwnProperty.call(i,rt)&&(t[rt]=i[rt])}return t},Et.apply(this,arguments)};function J(c,o){var t={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&o.indexOf(i)<0&&(t[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,i=Object.getOwnPropertySymbols(c);b<i.length;b++)o.indexOf(i[b])<0&&Object.prototype.propertyIsEnumerable.call(c,i[b])&&(t[i[b]]=c[i[b]]);return t}function ht(c,o,t,i){var b=arguments.length,D=b<3?o:i===null?i=Object.getOwnPropertyDescriptor(o,t):i,rt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(c,o,t,i);else for(var Mt=c.length-1;Mt>=0;Mt--)(rt=c[Mt])&&(D=(b<3?rt(D):b>3?rt(o,t,D):rt(o,t))||D);return b>3&&D&&Object.defineProperty(o,t,D),D}function vt(c,o){return function(t,i){o(t,i,c)}}function bt(c,o){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(c,o)}function At(c,o,t,i){function b(D){return D instanceof t?D:new t(function(rt){rt(D)})}return new(t||(t=Promise))(function(D,rt){function Mt(ge){try{ne(i.next(ge))}catch(be){rt(be)}}function Nt(ge){try{ne(i.throw(ge))}catch(be){rt(be)}}function ne(ge){ge.done?D(ge.value):b(ge.value).then(Mt,Nt)}ne((i=i.apply(c,o||[])).next())})}function q(c,o){var t={label:0,sent:function(){if(D[0]&1)throw D[1];return D[1]},trys:[],ops:[]},i,b,D,rt;return rt={next:Mt(0),throw:Mt(1),return:Mt(2)},typeof Symbol=="function"&&(rt[Symbol.iterator]=function(){return this}),rt;function Mt(ne){return function(ge){return Nt([ne,ge])}}function Nt(ne){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,b&&(D=ne[0]&2?b.return:ne[0]?b.throw||((D=b.return)&&D.call(b),0):b.next)&&!(D=D.call(b,ne[1])).done)return D;switch(b=0,D&&(ne=[ne[0]&2,D.value]),ne[0]){case 0:case 1:D=ne;break;case 4:return t.label++,{value:ne[1],done:!1};case 5:t.label++,b=ne[1],ne=[0];continue;case 7:ne=t.ops.pop(),t.trys.pop();continue;default:if(D=t.trys,!(D=D.length>0&&D[D.length-1])&&(ne[0]===6||ne[0]===2)){t=0;continue}if(ne[0]===3&&(!D||ne[1]>D[0]&&ne[1]<D[3])){t.label=ne[1];break}if(ne[0]===6&&t.label<D[1]){t.label=D[1],D=ne;break}if(D&&t.label<D[2]){t.label=D[2],t.ops.push(ne);break}D[2]&&t.ops.pop(),t.trys.pop();continue}ne=o.call(c,t)}catch(ge){ne=[6,ge],b=0}finally{i=D=0}if(ne[0]&5)throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}}function ct(c,o,t,i){i===void 0&&(i=t),c[i]=o[t]}function ot(c,o){for(var t in c)t!=="default"&&!o.hasOwnProperty(t)&&(o[t]=c[t])}function _(c){var o=typeof Symbol=="function"&&Symbol.iterator,t=o&&c[o],i=0;if(t)return t.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&i>=c.length&&(c=void 0),{value:c&&c[i++],done:!c}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}function P(c,o){var t=typeof Symbol=="function"&&c[Symbol.iterator];if(!t)return c;var i=t.call(c),b,D=[],rt;try{for(;(o===void 0||o-- >0)&&!(b=i.next()).done;)D.push(b.value)}catch(Mt){rt={error:Mt}}finally{try{b&&!b.done&&(t=i.return)&&t.call(i)}finally{if(rt)throw rt.error}}return D}function Y(){for(var c=[],o=0;o<arguments.length;o++)c=c.concat(P(arguments[o]));return c}function k(){for(var c=0,o=0,t=arguments.length;o<t;o++)c+=arguments[o].length;for(var i=Array(c),b=0,o=0;o<t;o++)for(var D=arguments[o],rt=0,Mt=D.length;rt<Mt;rt++,b++)i[b]=D[rt];return i}function h(c){return this instanceof h?(this.v=c,this):new h(c)}function g(c,o,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(c,o||[]),b,D=[];return b={},rt("next"),rt("throw"),rt("return"),b[Symbol.asyncIterator]=function(){return this},b;function rt(Ae){i[Ae]&&(b[Ae]=function(Xe){return new Promise(function(an,gn){D.push([Ae,Xe,an,gn])>1||Mt(Ae,Xe)})})}function Mt(Ae,Xe){try{Nt(i[Ae](Xe))}catch(an){be(D[0][3],an)}}function Nt(Ae){Ae.value instanceof h?Promise.resolve(Ae.value.v).then(ne,ge):be(D[0][2],Ae)}function ne(Ae){Mt("next",Ae)}function ge(Ae){Mt("throw",Ae)}function be(Ae,Xe){Ae(Xe),D.shift(),D.length&&Mt(D[0][0],D[0][1])}}function F(c){var o,t;return o={},i("next"),i("throw",function(b){throw b}),i("return"),o[Symbol.iterator]=function(){return this},o;function i(b,D){o[b]=c[b]?function(rt){return(t=!t)?{value:h(c[b](rt)),done:b==="return"}:D?D(rt):rt}:D}}function V(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=c[Symbol.asyncIterator],t;return o?o.call(c):(c=typeof _=="function"?_(c):c[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(D){t[D]=c[D]&&function(rt){return new Promise(function(Mt,Nt){rt=c[D](rt),b(Mt,Nt,rt.done,rt.value)})}}function b(D,rt,Mt,Nt){Promise.resolve(Nt).then(function(ne){D({value:ne,done:Mt})},rt)}}function H(c,o){return Object.defineProperty?Object.defineProperty(c,"raw",{value:o}):c.raw=o,c}function et(c){if(c&&c.__esModule)return c;var o={};if(c!=null)for(var t in c)Object.hasOwnProperty.call(c,t)&&(o[t]=c[t]);return o.default=c,o}function nt(c){return c&&c.__esModule?c:{default:c}}function St(c,o){if(!o.has(c))throw new TypeError("attempted to get private field on non-instance");return o.get(c)}function dt(c,o,t){if(!o.has(c))throw new TypeError("attempted to set private field on non-instance");return o.set(c,t),t}var gt=z("6UX8"),yt=function(c){Lt(o,c);function o(t){var i=c.call(this,t)||this;return i.type="color",i.names=["color"],Object(a.isString)(i.values)&&(i.linear=!0),i.gradient=gt.a.gradient(i.values),i}return o.prototype.getLinearValue=function(t){return this.gradient(t)},o}(lt),Ct=yt,Pt=function(c){Lt(o,c);function o(t){var i=c.call(this,t)||this;return i.type="opacity",i.names=["opacity"],i}return o}(lt),Ft=Pt,Tt=function(c){Lt(o,c);function o(t){var i=c.call(this,t)||this;return i.names=["x","y"],i.type="position",i}return o.prototype.mapping=function(t,i){var b=this.scales,D=b[0],rt=b[1];return Object(a.isNil)(t)||Object(a.isNil)(i)?[]:[Object(a.isArray)(t)?t.map(function(Mt){return D.scale(Mt)}):D.scale(t),Object(a.isArray)(i)?i.map(function(Mt){return rt.scale(Mt)}):rt.scale(i)]},o}(lt),zt=Tt,Xt=function(c){Lt(o,c);function o(t){var i=c.call(this,t)||this;return i.type="shape",i.names=["shape"],i}return o.prototype.getLinearValue=function(t){var i=Math.round((this.values.length-1)*t);return this.values[i]},o}(lt),re=Xt,de=function(c){Lt(o,c);function o(t){var i=c.call(this,t)||this;return i.type="size",i.names=["size"],i}return o}(lt),ye=de,we=z("8vsG"),De={},Ve=function(o){return De[o.toLowerCase()]},pn=function(o,t){if(Ve(o))throw new Error("Attribute type '"+o+"' existed.");De[o.toLowerCase()]=t};pn("Color",Ct),pn("Opacity",Ft),pn("Position",zt),pn("Shape",re),pn("Size",ye);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var sn=function(o,t){return sn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,b){i.__proto__=b}||function(i,b){for(var D in b)b.hasOwnProperty(D)&&(i[D]=b[D])},sn(o,t)};function In(c,o){sn(c,o);function t(){this.constructor=c}c.prototype=o===null?Object.create(o):(t.prototype=o.prototype,new t)}var An=function(){return An=Object.assign||function(t){for(var i,b=1,D=arguments.length;b<D;b++){i=arguments[b];for(var rt in i)Object.prototype.hasOwnProperty.call(i,rt)&&(t[rt]=i[rt])}return t},An.apply(this,arguments)};function Rn(c,o){var t={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&o.indexOf(i)<0&&(t[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var b=0,i=Object.getOwnPropertySymbols(c);b<i.length;b++)o.indexOf(i[b])<0&&Object.prototype.propertyIsEnumerable.call(c,i[b])&&(t[i[b]]=c[i[b]]);return t}function Mn(c,o,t,i){var b=arguments.length,D=b<3?o:i===null?i=Object.getOwnPropertyDescriptor(o,t):i,rt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(c,o,t,i);else for(var Mt=c.length-1;Mt>=0;Mt--)(rt=c[Mt])&&(D=(b<3?rt(D):b>3?rt(o,t,D):rt(o,t))||D);return b>3&&D&&Object.defineProperty(o,t,D),D}function Cn(c,o){return function(t,i){o(t,i,c)}}function Gn(c,o){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(c,o)}function Xn(c,o,t,i){function b(D){return D instanceof t?D:new t(function(rt){rt(D)})}return new(t||(t=Promise))(function(D,rt){function Mt(ge){try{ne(i.next(ge))}catch(be){rt(be)}}function Nt(ge){try{ne(i.throw(ge))}catch(be){rt(be)}}function ne(ge){ge.done?D(ge.value):b(ge.value).then(Mt,Nt)}ne((i=i.apply(c,o||[])).next())})}function tr(c,o){var t={label:0,sent:function(){if(D[0]&1)throw D[1];return D[1]},trys:[],ops:[]},i,b,D,rt;return rt={next:Mt(0),throw:Mt(1),return:Mt(2)},typeof Symbol=="function"&&(rt[Symbol.iterator]=function(){return this}),rt;function Mt(ne){return function(ge){return Nt([ne,ge])}}function Nt(ne){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,b&&(D=ne[0]&2?b.return:ne[0]?b.throw||((D=b.return)&&D.call(b),0):b.next)&&!(D=D.call(b,ne[1])).done)return D;switch(b=0,D&&(ne=[ne[0]&2,D.value]),ne[0]){case 0:case 1:D=ne;break;case 4:return t.label++,{value:ne[1],done:!1};case 5:t.label++,b=ne[1],ne=[0];continue;case 7:ne=t.ops.pop(),t.trys.pop();continue;default:if(D=t.trys,!(D=D.length>0&&D[D.length-1])&&(ne[0]===6||ne[0]===2)){t=0;continue}if(ne[0]===3&&(!D||ne[1]>D[0]&&ne[1]<D[3])){t.label=ne[1];break}if(ne[0]===6&&t.label<D[1]){t.label=D[1],D=ne;break}if(D&&t.label<D[2]){t.label=D[2],t.ops.push(ne);break}D[2]&&t.ops.pop(),t.trys.pop();continue}ne=o.call(c,t)}catch(ge){ne=[6,ge],b=0}finally{i=D=0}if(ne[0]&5)throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}}function or(c,o,t,i){i===void 0&&(i=t),c[i]=o[t]}function nr(c,o){for(var t in c)t!=="default"&&!o.hasOwnProperty(t)&&(o[t]=c[t])}function er(c){var o=typeof Symbol=="function"&&Symbol.iterator,t=o&&c[o],i=0;if(t)return t.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&i>=c.length&&(c=void 0),{value:c&&c[i++],done:!c}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}function Sr(c,o){var t=typeof Symbol=="function"&&c[Symbol.iterator];if(!t)return c;var i=t.call(c),b,D=[],rt;try{for(;(o===void 0||o-- >0)&&!(b=i.next()).done;)D.push(b.value)}catch(Mt){rt={error:Mt}}finally{try{b&&!b.done&&(t=i.return)&&t.call(i)}finally{if(rt)throw rt.error}}return D}function Vr(){for(var c=[],o=0;o<arguments.length;o++)c=c.concat(Sr(arguments[o]));return c}function ti(){for(var c=0,o=0,t=arguments.length;o<t;o++)c+=arguments[o].length;for(var i=Array(c),b=0,o=0;o<t;o++)for(var D=arguments[o],rt=0,Mt=D.length;rt<Mt;rt++,b++)i[b]=D[rt];return i}function hi(c){return this instanceof hi?(this.v=c,this):new hi(c)}function Fi(c,o,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(c,o||[]),b,D=[];return b={},rt("next"),rt("throw"),rt("return"),b[Symbol.asyncIterator]=function(){return this},b;function rt(Ae){i[Ae]&&(b[Ae]=function(Xe){return new Promise(function(an,gn){D.push([Ae,Xe,an,gn])>1||Mt(Ae,Xe)})})}function Mt(Ae,Xe){try{Nt(i[Ae](Xe))}catch(an){be(D[0][3],an)}}function Nt(Ae){Ae.value instanceof hi?Promise.resolve(Ae.value.v).then(ne,ge):be(D[0][2],Ae)}function ne(Ae){Mt("next",Ae)}function ge(Ae){Mt("throw",Ae)}function be(Ae,Xe){Ae(Xe),D.shift(),D.length&&Mt(D[0][0],D[0][1])}}function to(c){var o,t;return o={},i("next"),i("throw",function(b){throw b}),i("return"),o[Symbol.iterator]=function(){return this},o;function i(b,D){o[b]=c[b]?function(rt){return(t=!t)?{value:hi(c[b](rt)),done:b==="return"}:D?D(rt):rt}:D}}function si(c){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=c[Symbol.asyncIterator],t;return o?o.call(c):(c=typeof er=="function"?er(c):c[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(D){t[D]=c[D]&&function(rt){return new Promise(function(Mt,Nt){rt=c[D](rt),b(Mt,Nt,rt.done,rt.value)})}}function b(D,rt,Mt,Nt){Promise.resolve(Nt).then(function(ne){D({value:ne,done:Mt})},rt)}}function Ti(c,o){return Object.defineProperty?Object.defineProperty(c,"raw",{value:o}):c.raw=o,c}function Ui(c){if(c&&c.__esModule)return c;var o={};if(c!=null)for(var t in c)Object.hasOwnProperty.call(c,t)&&(o[t]=c[t]);return o.default=c,o}function Li(c){return c&&c.__esModule?c:{default:c}}function Vi(c,o){if(!o.has(c))throw new TypeError("attempted to get private field on non-instance");return o.get(c)}function ro(c,o,t){if(!o.has(c))throw new TypeError("attempted to set private field on non-instance");return o.set(c,t),t}var jr=z("6JdA"),Ji=function(){function c(o){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var t=o.start,i=o.end,b=o.matrix,D=b===void 0?[1,0,0,0,1,0,0,0,1]:b,rt=o.isTransposed,Mt=rt===void 0?!1:rt;this.start=t,this.end=i,this.matrix=D,this.originalMatrix=ti(D),this.isTransposed=Mt}return c.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},c.prototype.update=function(o){Object(a.assign)(this,o),this.initial()},c.prototype.convertDim=function(o,t){var i,b=this[t],D=b.start,rt=b.end;return this.isReflect(t)&&(i=[rt,D],D=i[0],rt=i[1]),D+o*(rt-D)},c.prototype.invertDim=function(o,t){var i,b=this[t],D=b.start,rt=b.end;return this.isReflect(t)&&(i=[rt,D],D=i[0],rt=i[1]),(o-D)/(rt-D)},c.prototype.applyMatrix=function(o,t,i){i===void 0&&(i=0);var b=this.matrix,D=[o,t,i];return jr.d.transformMat3(D,D,b),D},c.prototype.invertMatrix=function(o,t,i){i===void 0&&(i=0);var b=this.matrix,D=jr.b.invert([0,0,0,0,0,0,0,0,0],b),rt=[o,t,i];return D&&jr.d.transformMat3(rt,rt,D),rt},c.prototype.convert=function(o){var t=this.convertPoint(o),i=t.x,b=t.y,D=this.applyMatrix(i,b,1);return{x:D[0],y:D[1]}},c.prototype.invert=function(o){var t=this.invertMatrix(o.x,o.y,1);return this.invertPoint({x:t[0],y:t[1]})},c.prototype.rotate=function(o){var t=this.matrix,i=this.center;return jr.a.leftTranslate(t,t,[-i.x,-i.y]),jr.a.leftRotate(t,t,o),jr.a.leftTranslate(t,t,[i.x,i.y]),this},c.prototype.reflect=function(o){return o==="x"?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},c.prototype.scale=function(o,t){var i=this.matrix,b=this.center;return jr.a.leftTranslate(i,i,[-b.x,-b.y]),jr.a.leftScale(i,i,[o,t]),jr.a.leftTranslate(i,i,[b.x,b.y]),this},c.prototype.translate=function(o,t){var i=this.matrix;return jr.a.leftTranslate(i,i,[o,t]),this},c.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},c.prototype.getCenter=function(){return this.center},c.prototype.getWidth=function(){return this.width},c.prototype.getHeight=function(){return this.height},c.prototype.getRadius=function(){return this.radius},c.prototype.isReflect=function(o){return o==="x"?this.isReflectX:this.isReflectY},c.prototype.resetMatrix=function(o){this.matrix=o||ti(this.originalMatrix)},c}(),pr=Ji,Xr=function(c){In(o,c);function o(t){var i=c.call(this,t)||this;return i.isRect=!0,i.type="cartesian",i.initial(),i}return o.prototype.initial=function(){c.prototype.initial.call(this);var t=this.start,i=this.end;this.x={start:t.x,end:i.x},this.y={start:t.y,end:i.y}},o.prototype.convertPoint=function(t){var i,b=t.x,D=t.y;return this.isTransposed&&(i=[D,b],b=i[0],D=i[1]),{x:this.convertDim(b,"x"),y:this.convertDim(D,"y")}},o.prototype.invertPoint=function(t){var i,b=this.invertDim(t.x,"x"),D=this.invertDim(t.y,"y");return this.isTransposed&&(i=[D,b],b=i[0],D=i[1]),{x:b,y:D}},o}(pr),Br=Xr,Nr=function(c){In(o,c);function o(t){var i=c.call(this,t)||this;i.isHelix=!0,i.type="helix";var b=t.startAngle,D=b===void 0?1.25*Math.PI:b,rt=t.endAngle,Mt=rt===void 0?7.25*Math.PI:rt,Nt=t.innerRadius,ne=Nt===void 0?0:Nt,ge=t.radius;return i.startAngle=D,i.endAngle=Mt,i.innerRadius=ne,i.radius=ge,i.initial(),i}return o.prototype.initial=function(){c.prototype.initial.call(this);var t=(this.endAngle-this.startAngle)/(2*Math.PI)+1,i=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(i=i*this.radius),this.d=Math.floor(i*(1-this.innerRadius)/t),this.a=this.d/(Math.PI*2),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*i,end:this.innerRadius*i+this.d*.99}},o.prototype.convertPoint=function(t){var i,b=t.x,D=t.y;this.isTransposed&&(i=[D,b],b=i[0],D=i[1]);var rt=this.convertDim(b,"x"),Mt=this.a*rt,Nt=this.convertDim(D,"y");return{x:this.center.x+Math.cos(rt)*(Mt+Nt),y:this.center.y+Math.sin(rt)*(Mt+Nt)}},o.prototype.invertPoint=function(t){var i,b=this.d+this.y.start,D=jr.c.subtract([0,0],[t.x,t.y],[this.center.x,this.center.y]),rt=jr.a.angleTo(D,[1,0],!0),Mt=rt*this.a;jr.c.length(D)<Mt&&(Mt=jr.c.length(D));var Nt=Math.floor((jr.c.length(D)-Mt)/b);rt=2*Nt*Math.PI+rt;var ne=this.a*rt,ge=jr.c.length(D)-ne;ge=Object(a.isNumberEqual)(ge,0)?0:ge;var be=this.invertDim(rt,"x"),Ae=this.invertDim(ge,"y");return be=Object(a.isNumberEqual)(be,0)?0:be,Ae=Object(a.isNumberEqual)(Ae,0)?0:Ae,this.isTransposed&&(i=[Ae,be],be=i[0],Ae=i[1]),{x:be,y:Ae}},o}(pr),Yr=Nr,Kr=function(c){In(o,c);function o(t){var i=c.call(this,t)||this;i.isPolar=!0,i.type="polar";var b=t.startAngle,D=b===void 0?-Math.PI/2:b,rt=t.endAngle,Mt=rt===void 0?Math.PI*3/2:rt,Nt=t.innerRadius,ne=Nt===void 0?0:Nt,ge=t.radius;return i.startAngle=D,i.endAngle=Mt,i.innerRadius=ne,i.radius=ge,i.initial(),i}return o.prototype.initial=function(){for(c.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=Math.PI*2;var t=this.getOneBox(),i=t.maxX-t.minX,b=t.maxY-t.minY,D=Math.abs(t.minX)/i,rt=Math.abs(t.minY)/b,Mt;this.height/b>this.width/i?(Mt=this.width/i,this.circleCenter={x:this.center.x-(.5-D)*this.width,y:this.center.y-(.5-rt)*Mt*b}):(Mt=this.height/b,this.circleCenter={x:this.center.x-(.5-D)*Mt*i,y:this.center.y-(.5-rt)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=Mt*this.radius:(this.radius<=0||this.radius>Mt)&&(this.polarRadius=Mt):this.polarRadius=Mt,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},o.prototype.getRadius=function(){return this.polarRadius},o.prototype.convertPoint=function(t){var i,b=this.getCenter(),D=t.x,rt=t.y;return this.isTransposed&&(i=[rt,D],D=i[0],rt=i[1]),D=this.convertDim(D,"x"),rt=this.convertDim(rt,"y"),{x:b.x+Math.cos(D)*rt,y:b.y+Math.sin(D)*rt}},o.prototype.invertPoint=function(t){var i=this.getCenter(),b=[t.x-i.x,t.y-i.y],D=[1,0,0,0,1,0,0,0,1];jr.a.leftRotate(D,D,this.startAngle);var rt=[1,0,0];jr.d.transformMat3(rt,rt,D);var Mt=[rt[0],rt[1]],Nt=jr.a.angleTo(Mt,b,this.endAngle<this.startAngle);Object(a.isNumberEqual)(Nt,Math.PI*2)&&(Nt=0);var ne=jr.c.length(b),ge=Nt/(this.endAngle-this.startAngle);ge=this.endAngle-this.startAngle>0?ge:-ge;var be=this.invertDim(ne,"y"),Ae={x:0,y:0};return Ae.x=this.isTransposed?be:ge,Ae.y=this.isTransposed?ge:be,Ae},o.prototype.getCenter=function(){return this.circleCenter},o.prototype.getOneBox=function(){var t=this.startAngle,i=this.endAngle;if(Math.abs(i-t)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var b=[0,Math.cos(t),Math.cos(i)],D=[0,Math.sin(t),Math.sin(i)],rt=Math.min(t,i);rt<Math.max(t,i);rt+=Math.PI/18)b.push(Math.cos(rt)),D.push(Math.sin(rt));return{minX:Math.min.apply(Math,b),maxX:Math.max.apply(Math,b),minY:Math.min.apply(Math,D),maxY:Math.max.apply(Math,D)}},o}(pr),ni=Kr,fi={},$r=function(o){return fi[o.toLowerCase()]},ci=function(o,t){fi[o.toLowerCase()]=t};ci("rect",Br),ci("cartesian",Br),ci("polar",ni),ci("helix",Yr);var Qr=z("17Tr"),gi=Qr.Axis.Line,Oi=Qr.Axis.Circle,bi=Qr.Grid.Line,_i=Qr.Grid.Circle,Qi=Qr.Legend.Category,io=Qr.Legend.Continuous,Wi=Qr.Tooltip.Html;function Zi(c){if(Object(a.isEmpty)(c))return null;var o=c[0].x,t=c[0].x,i=c[0].y,b=c[0].y;return Object(a.each)(c,function(D){o=o>D.x?D.x:o,t=t<D.x?D.x:t,i=i>D.y?D.y:i,b=b<D.y?D.y:b}),{minX:o,maxX:t,minY:i,maxY:b,centerX:(o+t)/2,centerY:(i+b)/2}}function Pi(c,o,t,i){return{x:c+t*Math.cos(i),y:o+t*Math.sin(i)}}function no(c,o,t,i,b,D){D===void 0&&(D=0);var rt=Pi(c,o,t,i),Mt=Pi(c,o,t,b),Nt=Pi(c,o,D,i),ne=Pi(c,o,D,b);if(b-i==Math.PI*2){var ge=Pi(c,o,t,i+Math.PI),be=Pi(c,o,D,i+Math.PI),Ae=[["M",rt.x,rt.y],["A",t,t,0,1,1,ge.x,ge.y],["A",t,t,0,1,1,Mt.x,Mt.y],["M",Nt.x,Nt.y]];return D&&(Ae.push(["A",D,D,0,1,0,be.x,be.y]),Ae.push(["A",D,D,0,1,0,ne.x,ne.y])),Ae.push(["M",rt.x,rt.y]),Ae.push(["Z"]),Ae}var Xe=b-i<=Math.PI?0:1,an=[["M",rt.x,rt.y],["A",t,t,0,Xe,1,Mt.x,Mt.y],["L",ne.x,ne.y]];return D&&an.push(["A",D,D,0,Xe,0,Nt.x,Nt.y]),an.push(["L",rt.x,rt.y]),an.push(["Z"]),an}function Mo(c,o,t,i,b){var D=Pi(c,o,t,i),rt=Pi(c,o,t,b);if(Object(a.isNumberEqual)(b-i,Math.PI*2)){var Mt=Pi(c,o,t,i+Math.PI);return[["M",D.x,D.y],["A",t,t,0,1,1,Mt.x,Mt.y],["A",t,t,0,1,1,D.x,D.y],["A",t,t,0,1,0,Mt.x,Mt.y],["A",t,t,0,1,0,D.x,D.y],["Z"]]}var Nt=b-i<=Math.PI?0:1;return[["M",D.x,D.y],["A",t,t,0,Nt,1,rt.x,rt.y]]}function ao(c,o){var t=c.points,i=Zi(t),b,D,rt=o.startAngle,Mt=o.endAngle,Nt=Mt-rt;return o.isTransposed?(b=i.maxY*Nt,D=i.minY*Nt):(b=i.maxX*Nt,D=i.minX*Nt),b+=rt,D+=rt,{startAngle:D,endAngle:b}}function uo(c,o){if(Object(a.isNumber)(c)&&Object(a.isNumber)(o))return[c,o];for(var t=-1,i=0,b=0,D,rt=c.length-1,Mt,Nt=0;++t<c.length;)D=rt,rt=t,Nt+=Mt=c[D]*o[rt]-c[rt]*o[D],i+=(c[D]+c[rt])*Mt,b+=(o[D]+o[rt])*Mt;return Nt*=3,[i/Nt,b/Nt]}function xo(c,o){var t=c.attr(),i=o.attr();return Object(a.each)(t,function(b,D){i[D]===void 0&&(i[D]=void 0)}),i}function oe(c,o,t){var i=Math.min(o,t),b=Math.max(o,t);return c>=i&&c<=b}function Kt(c,o,t){if(Object(a.isString)(c))return c.padEnd(o,t);if(Object(a.isArray)(c)){var i=c.length;if(i<o)for(var b=o-i,D=0;D<b;D++)c.push(t)}return c}function te(c,o){return o.forEach(function(t){delete c[t]}),c}function Oe(c,o,t){o===void 0&&(o=[]),t===void 0&&(t={});for(var i=0,b=c;i<b.length;i++){var D=b[i];t[D]||(o.push(D),t[D]=!0)}return o}var Qe=function(){function c(o,t,i,b){o===void 0&&(o=0),t===void 0&&(t=0),i===void 0&&(i=0),b===void 0&&(b=0),this.x=o,this.y=t,this.height=b,this.width=i}return c.fromRange=function(o,t,i,b){return new c(o,t,i-o,b-t)},c.fromObject=function(o){return new c(o.minX,o.minY,o.width,o.height)},Object.defineProperty(c.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),c.prototype.isEqual=function(o){return this.x===o.x&&this.y===o.y&&this.width===o.width&&this.height===o.height},c.prototype.contains=function(o){return o.minX>=this.minX&&o.maxX<=this.maxX&&o.minY>=this.minY&&o.maxY<=this.maxY},c.prototype.clone=function(){return new c(this.x,this.y,this.width,this.height)},c.prototype.add=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];var i=this.clone();return Object(a.each)(o,function(b){i.x=Math.min(b.x,i.x),i.y=Math.min(b.y,i.y),i.width=Math.max(b.maxX,i.maxX)-i.x,i.height=Math.max(b.maxY,i.maxY)-i.y}),i},c.prototype.merge=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];var i=this.clone();return Object(a.each)(o,function(b){i.x=Math.max(b.x,i.x),i.y=Math.max(b.y,i.y),i.width=Math.min(b.maxX,i.maxX)-i.x,i.height=Math.min(b.maxY,i.maxY)-i.y}),i},c.prototype.cut=function(o,t){var i=o.width,b=o.height;switch(t){case e.TOP:case e.TOP_LEFT:case e.TOP_RIGHT:return c.fromRange(this.minX,this.minY+b,this.maxX,this.maxY);case e.RIGHT:case e.RIGHT_TOP:case e.RIGHT_BOTTOM:return c.fromRange(this.minX,this.minY,this.maxX-i,this.maxY);case e.BOTTOM:case e.BOTTOM_LEFT:case e.BOTTOM_RIGHT:return c.fromRange(this.minX,this.minY,this.maxX,this.maxY-b);case e.LEFT:case e.LEFT_TOP:case e.LEFT_BOTTOM:return c.fromRange(this.minX+i,this.minY,this.maxX,this.maxY);default:return this}},c.prototype.shrink=function(o){var t=o[0],i=o[1],b=o[2],D=o[3];return new c(this.x+D,this.y+t,this.width-D-i,this.height-t-b)},c.prototype.expand=function(o){var t=o[0],i=o[1],b=o[2],D=o[3];return new c(this.x-D,this.y-t,this.width+D+i,this.height+t+b)},c.prototype.exceed=function(o){return[Math.max(-this.minY+o.minY,0),Math.max(this.maxX-o.maxX,0),Math.max(this.maxY-o.maxY,0),Math.max(-this.minX+o.minX,0)]},c.prototype.collide=function(o){return this.minX<o.maxX&&this.maxX>o.minX&&this.minY<o.maxY&&this.maxY>o.minY},c.prototype.size=function(){return this.width*this.height},c.prototype.isPointIn=function(o){return o.x>=this.minX&&o.x<=this.maxX&&o.y>=this.minY&&o.y<=this.maxY},c}(),On=function(o,t){var i=t.start,b=t.end;return new Qe(o.x+o.width*i.x,o.y+o.height*i.y,o.width*Math.abs(b.x-i.x),o.height*Math.abs(b.y-i.y))};function Vn(c){return[[c.minX,c.minY],[c.maxX,c.minY],[c.maxX,c.maxY],[c.minX,c.maxY]]}function Hn(c){if(c.isPolar&&!c.isTransposed)return(c.endAngle-c.startAngle)*c.getRadius();var o=c.convert({x:0,y:0}),t=c.convert({x:1,y:0});return Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2))}function $e(c){if(c.isPolar){var o=c.startAngle,t=c.endAngle;return t-o==Math.PI*2}return!1}function rn(c,o){var t=c.getCenter();return Math.sqrt(Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2))}function on(c,o){var t=!1;if(c)if(c.type==="theta"){var i=c.start,b=c.end;t=oe(o.x,i.x,b.x)&&oe(o.y,i.y,b.y)}else{var D=c.invert(o);t=oe(D.x,0,1)&&oe(D.y,0,1)}return t}function $n(c,o){var t=c.getCenter();return Math.atan2(o.y-t.y,o.x-t.x)}function vr(c,o){o===void 0&&(o=0);var t=c.start,i=c.end,b=c.getWidth(),D=c.getHeight();if(c.isPolar){var rt=c.startAngle,Mt=c.endAngle,Nt=c.getCenter(),ne=c.getRadius();return{type:"path",startState:{path:no(Nt.x,Nt.y,ne+o,rt,rt)},endState:function(Ae){var Xe=(Mt-rt)*Ae+rt,an=no(Nt.x,Nt.y,ne+o,rt,Xe);return{path:an}},attrs:{path:no(Nt.x,Nt.y,ne+o,rt,Mt)}}}var ge;return c.isTransposed?ge={height:D+o*2}:ge={width:b+o*2},{type:"rect",startState:{x:t.x-o,y:i.y-o,width:c.isTransposed?b+o*2:0,height:c.isTransposed?0:D+o*2},endState:ge,attrs:{x:t.x-o,y:i.y-o,width:b+o*2,height:D+o*2}}}function ar(c,o){o===void 0&&(o=0);var t=c.start,i=c.end,b=c.getWidth(),D=c.getHeight(),rt=Math.min(t.x,i.x),Mt=Math.min(t.y,i.y);return Qe.fromRange(rt-o,Mt-o,rt+b+o,Mt+D+o)}var rr=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function Fr(c){var o="linear";return rr.test(c)?o="timeCat":Object(a.isString)(c)&&(o="cat"),o}function Ar(c,o,t){var i=o||[];if(Object(a.isNumber)(c)||Object(a.isNil)(Object(a.firstValue)(i,c))&&Object(a.isEmpty)(t)){var b=Object(we.d)("identity");return new b({field:c.toString(),values:[c]})}var D=Object(a.valuesOfKey)(i,c),rt=Object(a.get)(t,"type",Fr(D[0])),Mt=Object(we.d)(rt);return new Mt(Object(at.a)({field:c,values:D},t))}function wr(c,o){if(c.type!=="identity"&&o.type!=="identity"){var t={};for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);c.change(t)}}function xr(c){return c.alias||c.field}function Er(c,o,t){var i=c.values,b=i.length,D;if(b===1)D=[.5,1];else{var rt=1,Mt=0;$e(o)?o.isTransposed?(rt=Object(a.get)(t,"widthRatio.multiplePie",1/1.3),Mt=1/b*rt,D=[Mt/2,1-Mt/2]):D=[0,1-1/b]:(Mt=1/b/2,D=[Mt,1-Mt])}return D}function Ir(c){var o,t;switch(c){case e.TOP:o={x:0,y:1},t={x:1,y:1};break;case e.RIGHT:o={x:1,y:0},t={x:1,y:1};break;case e.BOTTOM:o={x:0,y:0},t={x:1,y:0};break;case e.LEFT:o={x:0,y:0},t={x:0,y:1};break;default:o=t={x:0,y:0}}return{start:o,end:t}}function Lr(c){var o,t;return c.isTransposed?(o={x:0,y:0},t={x:1,y:0}):(o={x:0,y:0},t={x:0,y:1}),{start:o,end:t}}function Pr(c,o){var t={start:{x:0,y:0},end:{x:0,y:0}};c.isRect?t=Ir(o):c.isPolar&&(t=Lr(c));var i=t.start,b=t.end;return{start:c.convert(i),end:c.convert(b)}}function Dr(c,o){if(c.isRect)return c.isTransposed?[e.RIGHT,e.BOTTOM].includes(o)?1:-1:[e.BOTTOM,e.RIGHT].includes(o)?-1:1;if(c.isPolar){var t=c.x.start;return t<0?-1:1}return 1}function ri(c){var o=c.start,t=c.end;return o.x===t.x}function vi(c,o){var t=c.start,i=c.end,b=ri(c);return b?(t.y-i.y)*(o.x-t.x)>0?1:-1:(i.x-t.x)*(t.y-o.y)>0?-1:1}function ii(c,o){return Object(a.get)(c,["components","axis",o],{})}function Si(c){var o=c.x,t=c.y,i=c.circleCenter,b=t.start>t.end,D=c.isTransposed?c.convert({x:b?0:1,y:0}):c.convert({x:0,y:b?0:1}),rt=[D.x-i.x,D.y-i.y],Mt=[1,0],Nt=D.y>i.y?jr.c.angle(rt,Mt):jr.c.angle(rt,Mt)*-1,ne=Nt+(o.end-o.start),ge=Math.sqrt(Math.pow(D.x-i.x,2)+Math.pow(D.y-i.y,2));return{center:i,radius:ge,startAngle:Nt,endAngle:ne}}function zi(c,o){return Object(a.isBoolean)(c)?c===!1?!1:{}:Object(a.get)(c,[o])}function Xi(c,o){return Object(a.get)(c,"position",o)}function Bi(c,o){return Object(a.get)(o,["title","text"],xr(c))}var Di=function(){function c(o,t){this.destroyed=!1,this.facets=[],this.view=o,this.cfg=Object(a.deepMix)({},this.getDefaultCfg(),t)}return c.prototype.init=function(){this.container||(this.container=this.createContainer());var o=this.view.getData();this.facets=this.generateFacets(o)},c.prototype.render=function(){this.renderViews()},c.prototype.update=function(){},c.prototype.clear=function(){this.clearFacetViews()},c.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},c.prototype.facetToView=function(o){var t=o.region,i=o.data,b=o.padding,D=b===void 0?this.cfg.padding:b,rt=this.view.createView({region:t,padding:D});rt.data(i||[]),o.view=rt,this.beforeEachView(rt,o);var Mt=this.cfg.eachView;return Mt&&Mt(rt,o),this.afterEachView(rt,o),rt},c.prototype.createContainer=function(){var o=this.view.getLayer(A.FORE);return o.addGroup()},c.prototype.renderViews=function(){this.createFacetViews()},c.prototype.createFacetViews=function(){var o=this;return this.facets.map(function(t){return o.facetToView(t)})},c.prototype.clearFacetViews=function(){var o=this;Object(a.each)(this.facets,function(t){t.view&&(o.view.removeView(t.view),t.view=void 0)})},c.prototype.getFieldValues=function(o,t){var i=[],b={};return Object(a.each)(o,function(D){var rt=D[t];!Object(a.isNil)(rt)&&!b[rt]&&(i.push(rt),b[rt]=!0)}),i},c.prototype.getRegion=function(o,t,i,b){var D=1/(t===0?1:t),rt=1/(o===0?1:o),Mt={x:D*i,y:rt*b},Nt={x:D*(i+1),y:rt*(b+1)};return{start:Mt,end:Nt}},c.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,padding:10,fields:[]}},c.prototype.getDefaultTitleCfg=function(){var o=this.view.getTheme().fontFamily;return{style:{fontSize:14,fill:"#666",fontFamily:o}}},c.prototype.processAxis=function(o,t){var i=o.getOptions(),b=i.coordinate,D=o.geometries,rt=Object(a.get)(b,"type","rect");if(rt==="rect"&&D.length){Object(a.isNil)(i.axes)&&(i.axes={});var Mt=i.axes,Nt=D[0].getXYFields(),ne=Nt[0],ge=Nt[1],be=zi(Mt,ne),Ae=zi(Mt,ge);be!==!1&&(i.axes[ne]=this.getXAxisOption(ne,Mt,be,t)),Ae!==!1&&(i.axes[ge]=this.getYAxisOption(ge,Mt,Ae,t))}},c.prototype.getFacetDataFilter=function(o){return function(t){return Object(a.every)(o,function(i){var b=i.field,D=i.value;return!Object(a.isNil)(D)&&b?t[b]===D:!0})}},c}(),pe={},G=function(o){return pe[Object(a.lowerCase)(o)]},B=function(o,t){pe[Object(a.lowerCase)(o)]=t},$=function(){function c(o,t){this.context=o,this.cfg=t,o.addAction(this)}return c.prototype.applyCfg=function(o){Object(a.assign)(this,o)},c.prototype.init=function(){this.applyCfg(this.cfg)},c.prototype.destroy=function(){this.context.removeAction(this),this.context=null},c}(),ut=$,Bt=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.execute=function(){this.callback&&this.callback(this.context)},o.prototype.destroy=function(){c.prototype.destroy.call(this),this.callback=null},o}(ut),Jt=Bt,ie={};function se(c,o){var t=ie[c],i=null;if(t){var b=t.ActionClass,D=t.cfg;i=new b(o,D),i.name=c,i.init()}return i}function Ce(c){var o=ie[c];return Object(a.get)(o,"ActionClass")}function Ee(c,o,t){ie[c]={ActionClass:o,cfg:t}}function cn(c){delete ie[c]}function xn(c,o){var t=new Jt(o);return t.callback=c,t.name="callback",t}function _t(c,o){var t=[];if(c.length){t.push(["M",c[0].x,c[0].y]);for(var i=1,b=c.length;i<b;i+=1){var D=c[i];t.push(["L",D.x,D.y])}o&&t.push(["Z"])}return t}function Yt(c,o){for(var t=[c[0]],i=1,b=c.length;i<b;i=i+2){var D=o.convert({x:c[i],y:c[i+1]});t.push(D.x,D.y)}return t}function Se(c,o){var t=o.isTransposed,i=c[1],b=c[6],D=c[7],rt=o.convert({x:b,y:D}),Mt=t?0:1;return["A",i,i,0,0,Mt,rt.x,rt.y]}function Wt(c,o,t){var i=t.isTransposed,b=t.startAngle,D=t.endAngle,rt=c[0].toLowerCase()==="a"?{x:c[6],y:c[7]}:{x:c[1],y:c[2]},Mt={x:o[1],y:o[2]},Nt=[],ne=i?"y":"x",ge=Math.abs(Mt[ne]-rt[ne])*(D-b),be=Mt[ne]>=rt[ne]?1:0,Ae=ge>Math.PI?1:0,Xe=t.convert(Mt),an=rn(t,Xe);if(an>=.5)if(ge===Math.PI*2){var gn={x:(Mt.x+rt.x)/2,y:(Mt.y+rt.y)/2},Yn=t.convert(gn);Nt.push(["A",an,an,0,Ae,be,Yn.x,Yn.y]),Nt.push(["A",an,an,0,Ae,be,Xe.x,Xe.y])}else Nt.push(["A",an,an,0,Ae,be,Xe.x,Xe.y]);return Nt}function ue(c){Object(a.each)(c,function(o,t){var i=o;if(i[0].toLowerCase()==="a"){var b=c[t-1],D=c[t+1];D&&D[0].toLowerCase()==="a"?b&&b[0].toLowerCase()==="l"&&(b[0]="M"):b&&b[0].toLowerCase()==="a"&&D&&D[0].toLowerCase()==="l"&&(D[0]="M")}})}var vn=function(o,t,i,b){var D=[],rt,Mt,Nt=!!b,ne,ge;if(Nt){ne=[Infinity,Infinity],ge=[-Infinity,-Infinity];for(var be=0,Ae=o.length;be<Ae;be++){var Xe=o[be];ne=jr.c.min([0,0],ne,Xe),ge=jr.c.max([0,0],ge,Xe)}ne=jr.c.min([0,0],ne,b[0]),ge=jr.c.max([0,0],ge,b[1])}for(var be=0,an=o.length;be<an;be++){var Xe=o[be];if(i)rt=o[be?be-1:an-1],Mt=o[(be+1)%an];else if(be===0||be===an-1){D.push(Xe);continue}else rt=o[be-1],Mt=o[be+1];var gn=[0,0];gn=jr.c.sub(gn,Mt,rt),gn=jr.c.scale(gn,gn,t);var Yn=jr.c.distance(Xe,rt),Kn=jr.c.distance(Xe,Mt),ir=Yn+Kn;ir!==0&&(Yn/=ir,Kn/=ir);var cr=jr.c.scale([0,0],gn,-Yn),Rr=jr.c.scale([0,0],gn,Kn),_r=jr.c.add([0,0],Xe,cr),zr=jr.c.add([0,0],Xe,Rr);Nt&&(_r=jr.c.max([0,0],_r,ne),_r=jr.c.min([0,0],_r,ge),zr=jr.c.max([0,0],zr,ne),zr=jr.c.min([0,0],zr,ge)),D.push(_r),D.push(zr)}return i&&D.push(D.shift()),D};function kn(c,o,t){for(var i=!!o,b=[],D=0,rt=c.length;D<rt;D+=2)b.push([c[D],c[D+1]]);for(var Mt=vn(b,.4,i,t),Nt=b.length,ne=[],ge,be,Ae,D=0;D<Nt-1;D++)ge=Mt[D*2],be=Mt[D*2+1],Ae=b[D+1],ne.push(["C",ge[0],ge[1],be[0],be[1],Ae[0],Ae[1]]);return i&&(ge=Mt[Nt],be=Mt[Nt+1],Ae=b[0],ne.push(["C",ge[0],ge[1],be[0],be[1],Ae[0],Ae[1]])),ne}function _n(c,o){return _t(c,o)}function Un(c,o,t){var i=[],b=c[0],D=null;if(c.length<=2)return _n(c,o);for(var rt=0,Mt=c.length;rt<Mt;rt++){var Nt=c[rt];(!D||!(D.x===Nt.x&&D.y===Nt.y))&&(i.push(Nt.x),i.push(Nt.y),D=Nt)}var ne=t||[[0,0],[1,1]],ge=kn(i,o,ne);return ge.unshift(["M",b.x,b.y]),ge}function Ze(c,o){var t=[];return Object(a.each)(o,function(i){var b=i[0];switch(b.toLowerCase()){case"m":case"l":case"c":t.push(Yt(i,c));break;case"a":t.push(Se(i,c));break;case"z":default:t.push(i);break}}),t}function Te(c,o){var t=[],i,b,D,rt;return Object(a.each)(o,function(Mt,Nt){var ne=Mt[0];switch(ne.toLowerCase()){case"m":case"c":case"q":t.push(Yt(Mt,c));break;case"l":i=o[Nt-1],b=Mt,D=c.isTransposed,rt=D?i[i.length-2]===b[1]:i[i.length-1]===b[2],rt?t=t.concat(Wt(i,b,c)):t.push(Yt(Mt,c));break;case"a":t.push(Se(Mt,c));break;case"z":default:t.push(Mt);break}}),ue(t),t}var R=z("LvGN");function mt(c,o){var t=c.event,i=t.target,b=i.getCanvasBBox();return b.width>=o||b.height>=o?b:null}function $t(c,o){var t=c.event,i=t.target,b=i.getCanvasBBox();return b.width>=o||b.height>=o?i.attr("path"):null}function me(c){var o=c.event,t,i=o.target;return i&&(t=i.get("element")),t}function Zt(c){var o=c.event,t=o.target,i;return t&&(i=t.get("delegateObject")),i}function ve(c){var o=c.event.gEvent;return!(o&&o.fromShape&&o.toShape&&o.fromShape.get("element")===o.toShape.get("element"))}function he(c){return c&&c.component&&c.component.isList()}function ce(c){return c&&c.component&&c.component.isSlider()}function Me(c){var o=c.event,t=o.target;return t&&t.get("name")==="mask"}function _e(c,o){var t=c.event.target;if(t.get("type")==="path"){var i=$t(c,o);return i?Sn(c.view,i):void 0}var b=mt(c,o);return b?nn(c.view,b):null}function We(c,o,t){var i=mt(c,t);if(!i)return null;var b=c.view,D=ze(b,o,{x:i.x,y:i.y}),rt=ze(b,o,{x:i.maxX,y:i.maxY}),Mt={minX:D.x,minY:D.y,maxX:rt.x,maxY:rt.y};return nn(o,Mt)}function Re(c){var o=c.geometries,t=[];return Object(a.each)(o,function(i){var b=i.elements;t=t.concat(b)}),c.views&&c.views.length&&Object(a.each)(c.views,function(i){t=t.concat(Re(i))}),t}function tn(c,o,t){var i=Re(c);return i.filter(function(b){return ln(b,o)===t})}function ke(c,o){var t=c.geometries,i=[];return Object(a.each)(t,function(b){var D=b.getElementsBy(function(rt){return rt.hasState(o)});i=i.concat(D)}),i}function ln(c,o){var t=c.getModel(),i=t.data,b;return Object(a.isArray)(i)?b=i[0][o]:b=i[o],b}function hn(c,o){return!(o.minX>c.maxX||o.maxX<c.minX||o.minY>c.maxY||o.maxY<c.minY)}function nn(c,o){var t=Re(c),i=[];return Object(a.each)(t,function(b){var D=b.shape,rt=D.getCanvasBBox();hn(o,rt)&&i.push(b)}),i}function dn(c){var o=[];return Object(a.each)(c,function(t){var i=t[0];if(i!=="A")for(var b=1;b<t.length;b=b+2)o.push([t[b],t[b+1]]);else{var D=t.length;o.push([t[D-2],t[D-1]])}}),o}function Sn(c,o){var t=Re(c),i=dn(o),b=t.filter(function(D){var rt=D.shape,Mt;if(rt.get("type")==="path")Mt=dn(rt.attr("path"));else{var Nt=rt.getCanvasBBox();Mt=Vn(Nt)}return Object(R.b)(i,Mt)});return b}function Pe(c){return c.getComponents().map(function(o){return o.component})}function le(c,o){var t=o.x-c.x,i=o.y-c.y;return Math.sqrt(t*t+i*i)}function Le(c,o){if(c.length<=2)return _n(c,!1);var t=c[0],i=[];Object(a.each)(c,function(D){i.push(D.x),i.push(D.y)});var b=kn(i,o,null);return b.unshift(["M",t.x,t.y]),b}function Be(c,o){return c.x<=o.x&&c.maxX>=o.x&&c.y<=o.y&&c.maxY>o.y}function en(c){var o=c.parent,t=null;return o&&(t=o.views.filter(function(i){return i!==c})),t}function un(c,o){var t=c.getCoordinate();return t.invert(o)}function ze(c,o,t){var i=un(c,t);return o.getCoordinate().convert(i)}function fn(c,o,t,i){var b=!1;return Object(a.each)(c,function(D){if(D[t]===o[t]&&D[i]===o[i])return b=!0,!1}),b}function mn(c,o){var t=c.getScaleByField(o);return!t&&c.views&&Object(a.each)(c.views,function(i){if(t=mn(i,o),t)return!1}),t}var Wn=function(){function c(o){this.actions=[],this.event=null,this.cacheMap={},this.view=o}return c.prototype.cache=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];if(o.length===1)return this.cacheMap[o[0]];o.length===2&&(this.cacheMap[o[0]]=o[1])},c.prototype.getAction=function(o){return this.actions.find(function(t){return t.name===o})},c.prototype.addAction=function(o){this.actions.push(o)},c.prototype.removeAction=function(o){var t=this.actions,i=this.actions.indexOf(o);i>=0&&t.splice(i,1)},c.prototype.getCurrentPoint=function(){var o=this.event;if(o)if(o.target instanceof HTMLElement){var t=this.view.getCanvas(),i=t.getPointByClient(o.clientX,o.clientY);return i}else return{x:o.x,y:o.y};return null},c.prototype.getCurrentShape=function(){return Object(a.get)(this.event,["gEvent","shape"])},c.prototype.isInPlot=function(){var o=this.getCurrentPoint();return o?this.view.isPointInPlot(o):!1},c.prototype.isInShape=function(o){var t=this.getCurrentShape();return t?t.get("name")===o:!1},c.prototype.isInComponent=function(o){var t=Pe(this.view),i=this.getCurrentPoint();return i?!!t.find(function(b){var D=b.getBBox();return o?b.get("name")===o&&Be(D,i):Be(D,i)}):!1},c.prototype.destroy=function(){this.view=null,this.event=null,Object(a.each)(this.actions.slice(),function(o){o.destroy()}),this.actions=null,this.cacheMap=null},c}(),Tn=Wn,Pn=function(){function c(o,t){this.view=o,this.cfg=t}return c.prototype.init=function(){this.initEvents()},c.prototype.initEvents=function(){},c.prototype.clearEvents=function(){},c.prototype.destroy=function(){this.clearEvents()},c}(),lr=Pn;function Hr(c,o){var t=c.split(":"),i=t[0],b=o.getAction(i)||se(i,o);if(!b)throw new Error("There is no action named "+i);var D=t[1];return{action:b,methodName:D}}function Gr(c){var o=c.action,t=c.methodName;if(o[t])o[t]();else throw new Error("Action("+o.name+") doesn't have a method called "+t)}var Mr={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},oi=function(c){Object(at.b)(o,c);function o(t,i){var b=c.call(this,t,i)||this;return b.callbackCaches={},b.emitCaches={},b.steps=i,b}return o.prototype.init=function(){this.initContext(),c.prototype.init.call(this)},o.prototype.destroy=function(){c.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},o.prototype.initEvents=function(){var t=this;Object(a.each)(this.steps,function(i,b){Object(a.each)(i,function(D){var rt=t.getActionCallback(b,D);rt&&t.bindEvent(D.trigger,rt)})})},o.prototype.clearEvents=function(){var t=this;Object(a.each)(this.steps,function(i,b){Object(a.each)(i,function(D){var rt=t.getActionCallback(b,D);rt&&t.offEvent(D.trigger,rt)})})},o.prototype.initContext=function(){var t=this.view,i=new Tn(t);this.context=i;var b=this.steps;Object(a.each)(b,function(D){Object(a.each)(D,function(rt){if(Object(a.isFunction)(rt.action))rt.actionObject={action:xn(rt.action,i),methodName:"execute"};else if(Object(a.isString)(rt.action))rt.actionObject=Hr(rt.action,i);else if(Object(a.isArray)(rt.action)){var Mt=rt.action;rt.actionObject=[],Object(a.each)(Mt,function(Nt){rt.actionObject.push(Hr(Nt,i))})}})})},o.prototype.isAllowStep=function(t){var i=this.currentStepName,b=this.steps;if(i===t||t===Mr.SHOW_ENABLE)return!0;if(t===Mr.PROCESSING)return i===Mr.START;if(t===Mr.START)return i!==Mr.PROCESSING;if(t===Mr.END)return i===Mr.PROCESSING||i===Mr.START;if(t===Mr.ROLLBACK){if(b[Mr.END])return i===Mr.END;if(i===Mr.START)return!0}return!1},o.prototype.isAllowExecute=function(t,i){if(this.isAllowStep(t)){var b=this.getKey(t,i);return i.once&&this.emitCaches[b]?!1:i.isEnable?i.isEnable(this.context):!0}return!1},o.prototype.enterStep=function(t){this.currentStepName=t,this.emitCaches={}},o.prototype.afterExecute=function(t,i){t!==Mr.SHOW_ENABLE&&this.currentStepName!==t&&this.enterStep(t);var b=this.getKey(t,i);this.emitCaches[b]=!0},o.prototype.getKey=function(t,i){return t+i.trigger+i.action},o.prototype.getActionCallback=function(t,i){var b=this,D=this.context,rt=this.callbackCaches,Mt=i.actionObject;if(i.action&&Mt){var Nt=this.getKey(t,i);if(!rt[Nt]){var ne=function(be){D.event=be,b.isAllowExecute(t,i)?(Object(a.isArray)(Mt)?Object(a.each)(Mt,function(Ae){D.event=be,Gr(Ae)}):(D.event=be,Gr(Mt)),b.afterExecute(t,i),i.callback&&(D.event=be,i.callback(D))):D.event=null};i.debounce?rt[Nt]=Object(a.debounce)(ne,i.debounce.wait,i.debounce.immediate):i.throttle?rt[Nt]=Object(a.throttle)(ne,i.throttle.wait,{leading:i.throttle.leading,trailing:i.throttle.trailing}):rt[Nt]=ne}return rt[Nt]}return null},o.prototype.bindEvent=function(t,i){var b=t.split(":");b[0]==="window"?window.addEventListener(b[1],i):b[0]==="document"?document.addEventListener(b[1],i):this.view.on(t,i)},o.prototype.offEvent=function(t,i){var b=t.split(":");b[0]==="window"?window.removeEventListener(b[1],i):b[0]==="document"?document.removeEventListener(b[1],i):this.view.off(t,i)},o}(lr),ai=oi,Zr={};function Yi(c){return Zr[Object(a.lowerCase)(c)]}function $i(c,o){Zr[Object(a.lowerCase)(c)]=o}function Go(c,o,t){var i=Yi(c);if(!i)return null;if(Object(a.isPlainObject)(i)){var b=Object(a.mix)(Object(a.clone)(i),t);return new ai(o,b)}else{var D=i;return new D(o,t)}}function Uo(c){return{title:{autoRotate:!0,position:"center",spacing:c.axisTitleSpacing,style:{fill:c.axisTitleTextFillColor,fontSize:c.axisTitleTextFontSize,lineHeight:c.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:c.fontFamily}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:c.axisLabelOffset,style:{fill:c.axisLabelFillColor,fontSize:c.axisLabelFontSize,lineHeight:c.axisLabelLineHeight,fontFamily:c.fontFamily}},line:{style:{lineWidth:c.axisLineBorder,stroke:c.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:c.axisGridBorderColor,lineWidth:c.axisGridBorder,lineDash:c.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:c.axisTickLineBorder,stroke:c.axisTickLineBorderColor},alignTick:!0,length:c.axisTickLineLength},subTickLine:null,animate:!0}}function zo(c){return{title:null,marker:{symbol:"circle",spacing:c.legendMarkerSpacing,style:{r:c.legendCircleMarkerSize,fill:c.legendMarkerColor}},itemName:{spacing:5,style:{fill:c.legendItemNameFillColor,fontFamily:c.fontFamily,fontSize:c.legendItemNameFontSize,lineHeight:c.legendItemNameLineHeight,fontWeight:c.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},flipPage:!0,animate:!1,maxItemWidth:200,itemSpacing:c.legendItemSpacing,itemMarginBottom:c.legendItemMarginBottom,padding:c.legendPadding}}function ta(c){var o,t={point:{default:{fill:c.pointFillColor,r:c.pointSize,stroke:c.pointBorderColor,lineWidth:c.pointBorder,fillOpacity:c.pointFillOpacity},active:{stroke:c.pointActiveBorderColor,lineWidth:c.pointActiveBorder},selected:{stroke:c.pointSelectedBorderColor,lineWidth:c.pointSelectedBorder},inactive:{fillOpacity:c.pointInactiveFillOpacity,strokeOpacity:c.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:c.hollowPointFillColor,lineWidth:c.hollowPointBorder,stroke:c.hollowPointBorderColor,strokeOpacity:c.hollowPointBorderOpacity,r:c.hollowPointSize},active:{stroke:c.hollowPointActiveBorderColor,strokeOpacity:c.hollowPointActiveBorderOpacity},selected:{lineWidth:c.hollowPointSelectedBorder,stroke:c.hollowPointSelectedBorderColor,strokeOpacity:c.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:c.hollowPointInactiveBorderOpacity}},area:{default:{fill:c.areaFillColor,fillOpacity:c.areaFillOpacity,stroke:null},active:{fillOpacity:c.areaActiveFillOpacity},selected:{fillOpacity:c.areaSelectedFillOpacity},inactive:{fillOpacity:c.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:c.hollowAreaBorderColor,lineWidth:c.hollowAreaBorder,strokeOpacity:c.hollowAreaBorderOpacity},active:{fill:null,lineWidth:c.hollowAreaActiveBorder},selected:{fill:null,lineWidth:c.hollowAreaSelectedBorder},inactive:{strokeOpacity:c.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:c.intervalFillColor,fillOpacity:c.intervalFillOpacity},active:{stroke:c.intervalActiveBorderColor,lineWidth:c.intervalActiveBorder},selected:{stroke:c.intervalSelectedBorderColor,lineWidth:c.intervalSelectedBorder},inactive:{fillOpacity:c.intervalInactiveFillOpacity,strokeOpacity:c.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:c.hollowIntervalFillColor,stroke:c.hollowIntervalBorderColor,lineWidth:c.hollowIntervalBorder,strokeOpacity:c.hollowIntervalBorderOpacity},active:{stroke:c.hollowIntervalActiveBorderColor,lineWidth:c.hollowIntervalActiveBorder,strokeOpacity:c.hollowIntervalActiveBorderOpacity},selected:{stroke:c.hollowIntervalSelectedBorderColor,lineWidth:c.hollowIntervalSelectedBorder,strokeOpacity:c.hollowIntervalSelectedBorderOpacity},inactive:{stroke:c.hollowIntervalInactiveBorderColor,lineWidth:c.hollowIntervalInactiveBorder,strokeOpacity:c.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:c.lineBorderColor,lineWidth:c.lineBorder,strokeOpacity:c.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:c.lineActiveBorder},selected:{lineWidth:c.lineSelectedBorder},inactive:{strokeOpacity:c.lineInactiveBorderOpacity}}},i=Uo(c),b=zo(c);return{background:c.backgroundColor,defaultColor:c.brandColor,padding:"auto",fontFamily:c.fontFamily,columnWidthRatio:1/2,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:c.paletteQualitative10,colors20:c.paletteQualitative20,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:function(rt){var Mt=rt.geometry.coordinate;if(Mt.isPolar&&Mt.isTransposed){var Nt=ao(rt.getModel(),Mt),ne=Nt.startAngle,ge=Nt.endAngle,be=(ne+ge)/2,Ae=7.5,Xe=Ae*Math.cos(be),an=Ae*Math.sin(be);return{matrix:jr.a.transform(null,[["t",Xe,an]])}}return t.interval.selected}}},"hollow-rect":{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},line:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},tick:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},funnel:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}},pyramid:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},line:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},dot:{default:{style:Object(at.a)(Object(at.a)({},t.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:Object(at.a)(Object(at.a)({},t.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:Object(at.a)(Object(at.a)({},t.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:Object(at.a)(Object(at.a)({},t.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:Object(at.a)(Object(at.a)({},t.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:Object(at.a)(Object(at.a)({},t.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:Object(at.a)(Object(at.a)({},t.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:Object(at.a)(Object(at.a)({},t.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},hvh:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}},polygon:{polygon:{default:{style:t.interval.default},active:{style:t.interval.active},inactive:{style:t.interval.inactive},selected:{style:t.interval.selected}}},point:{circle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},square:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},bowtie:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},diamond:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},hexagon:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},triangle:{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"triangle-down":{default:{style:t.point.default},active:{style:t.point.active},inactive:{style:t.point.inactive},selected:{style:t.point.selected}},"hollow-circle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-square":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-bowtie":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-diamond":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-hexagon":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},"hollow-triangle-down":{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},cross:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},tick:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},plus:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},hyphen:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}},line:{default:{style:t.hollowPoint.default},active:{style:t.hollowPoint.active},inactive:{style:t.hollowPoint.inactive},selected:{style:t.hollowPoint.selected}}},area:{area:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},smooth:{default:{style:t.area.default},active:{style:t.area.active},inactive:{style:t.area.inactive},selected:{style:t.area.selected}},line:{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}},"smooth-line":{default:{style:t.hollowArea.default},active:{style:t.hollowArea.active},inactive:{style:t.hollowArea.inactive},selected:{style:t.hollowArea.selected}}},schema:{candle:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}},box:{default:{style:t.hollowInterval.default},active:{style:t.hollowInterval.active},inactive:{style:t.hollowInterval.inactive},selected:{style:t.hollowInterval.selected}}},edge:{line:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},vhv:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},smooth:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}},arc:{default:{style:t.line.default},active:{style:t.line.active},inactive:{style:t.line.inactive},selected:{style:t.line.selected}}}},components:{axis:{common:i,top:Object(a.deepMix)({},i,{position:"top",grid:null,title:null,verticalLimitLength:1/2}),bottom:Object(a.deepMix)({},i,{position:"bottom",grid:null,title:null,verticalLimitLength:1/2}),left:Object(a.deepMix)({},i,{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3}),right:Object(a.deepMix)({},i,{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3}),circle:Object(a.deepMix)({},i,{title:null,grid:Object(a.deepMix)({},i.grid,{line:{type:"line"}})}),radius:Object(a.deepMix)({},i,{title:null,grid:Object(a.deepMix)({},i.grid,{line:{type:"circle"}})})},legend:{common:b,right:Object(a.deepMix)({},b,{layout:"vertical",padding:c.legendVerticalPadding}),left:Object(a.deepMix)({},b,{layout:"vertical",padding:c.legendVerticalPadding}),top:Object(a.deepMix)({},b,{layout:"horizontal",padding:c.legendHorizontalPadding}),bottom:Object(a.deepMix)({},b,{layout:"horizontal",padding:c.legendHorizontalPadding}),continuous:{title:null,background:null,track:{},rail:{type:"color",size:c.sliderRailHeight,defaultLength:c.sliderRailWidth,style:{fill:c.sliderRailFillColor,stroke:c.sliderRailBorderColor,lineWidth:c.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:c.sliderLabelTextFillColor,fontSize:c.sliderLabelTextFontSize,lineHeight:c.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:c.fontFamily}},handler:{size:c.sliderHandlerWidth,style:{fill:c.sliderHandlerFillColor,stroke:c.sliderHandlerBorderColor}},slidable:!0,padding:b.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffSetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:c.tooltipCrosshairsBorderColor,lineWidth:c.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(o={},o[""+Qr.TOOLTIP_CSS_CONST.CONTAINER_CLASS]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:c.tooltipContainerFillColor,opacity:c.tooltipContainerFillOpacity,boxShadow:c.tooltipContainerShadow,borderRadius:c.tooltipContainerBorderRadius+"px",color:c.tooltipTextFillColor,fontSize:c.tooltipTextFontSize+"px",fontFamily:c.fontFamily,lineHeight:c.tooltipTextLineHeight+"px",padding:"0 12px 0 12px"},o[""+Qr.TOOLTIP_CSS_CONST.TITLE_CLASS]={marginBottom:"12px",marginTop:"12px"},o[""+Qr.TOOLTIP_CSS_CONST.LIST_CLASS]={margin:0,listStyleType:"none",padding:0},o[""+Qr.TOOLTIP_CSS_CONST.LIST_ITEM_CLASS]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},o[""+Qr.TOOLTIP_CSS_CONST.MARKER_CLASS]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},o[""+Qr.TOOLTIP_CSS_CONST.VALUE_CLASS]={display:"inline-block",float:"right",marginLeft:"30px"},o)},annotation:{arc:{style:{stroke:c.annotationArcBorderColor,lineWidth:c.annotationArcBorder},animate:!0},line:{style:{stroke:c.annotationLineBorderColor,lineDash:c.annotationLineDash,lineWidth:c.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:c.annotationTextFillColor,stroke:c.annotationTextBorderColor,lineWidth:c.annotationTextBorder,fontSize:c.annotationTextFontSize,textAlign:"start",fontFamily:c.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:c.annotationTextFillColor,stroke:c.annotationTextBorderColor,lineWidth:c.annotationTextBorder,fontSize:c.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:c.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:c.annotationRegionBorder,stroke:c.annotationRegionBorderColor,fill:c.annotationRegionFillColor,fillOpacity:c.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:c.brandColor,lineWidth:2}},line:{style:{stroke:c.annotationLineBorderColor,lineWidth:c.annotationLineBorder},length:c.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:c.annotationTextFillColor,stroke:c.annotationTextBorderColor,lineWidth:c.annotationTextBorder,fontSize:c.annotationTextFontSize,fontFamily:c.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:c.annotationRegionFillColor,fillOpacity:c.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:c.annotationTextFillColor,stroke:c.annotationTextBorderColor,lineWidth:c.annotationTextBorder,fontSize:c.annotationTextFontSize,fontFamily:c.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8]}},scrollbar:{common:{padding:[8,8,8,8]}}},labels:{offset:12,style:{fill:c.labelFillColor,fontSize:c.labelFontSize,fontFamily:c.fontFamily,stroke:c.labelBorderColor,lineWidth:c.labelBorder},fillColorDark:c.labelFillColorDark,fillColorLight:c.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:c.innerLabelFillColor,fontSize:c.innerLabelFontSize,fontFamily:c.fontFamily,stroke:c.innerLabelBorderColor,lineWidth:c.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:c.overflowLabelFillColor,fontSize:c.overflowLabelFontSize,fontFamily:c.fontFamily,stroke:c.overflowLabelBorderColor,lineWidth:c.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:c.labelLineBorder}},autoRotate:!0}}}var li={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},Oo={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},qi=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],_o=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],Xo=function(o){o===void 0&&(o={});var t=o.backgroundColor,i=t===void 0?"transparent":t,b=o.paletteQualitative10,D=b===void 0?qi:b,rt=o.paletteQualitative20,Mt=rt===void 0?_o:rt,Nt=o.paletteSemanticRed,ne=Nt===void 0?"#F4664A":Nt,ge=o.paletteSemanticGreen,be=ge===void 0?"#30BF78":ge,Ae=o.paletteSemanticYellow,Xe=Ae===void 0?"#FAAD14":Ae,an=o.fontFamily,gn=an===void 0?`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`:an,Yn=o.brandColor,Kn=Yn===void 0?D[0]:Yn;return{backgroundColor:i,brandColor:Kn,paletteQualitative10:D,paletteQualitative20:Mt,paletteSemanticRed:ne,paletteSemanticGreen:be,paletteSemanticYellow:Xe,fontFamily:gn,axisLineBorderColor:li[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:li[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:li[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:li[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:li[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:li[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:li[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:Kn,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:li[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],sliderRailFillColor:li[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:li[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:li[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:li[25],annotationArcBorderColor:li[15],annotationArcBorder:1,annotationLineBorderColor:li[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:li[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:li[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:li[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:li[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:li[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Oo[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:li[65],overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:Oo[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:li[25],pointFillColor:Kn,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Oo[100],pointBorderOpacity:1,pointActiveBorderColor:li[100],pointSelectedBorder:2,pointSelectedBorderColor:li[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:Kn,hollowPointBorderOpacity:.95,hollowPointFillColor:Oo[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:li[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:li[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:Kn,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:Kn,areaFillOpacity:.25,areaActiveFillColor:Kn,areaActiveFillOpacity:.5,areaSelectedFillColor:Kn,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:Kn,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:li[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:li[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:Kn,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:li[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:li[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:Kn,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Oo[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:li[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:li[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}},Yo=Xo();function ua(c){var o=c.styleSheet,t=o===void 0?{}:o,i=Object(at.c)(c,["styleSheet"]),b=Xo(t);return Object(a.deepMix)({},ta(b),i)}var di=ua({}),ea={default:di};function xi(c){return Object(a.get)(ea,Object(a.lowerCase)(c),ea.default)}function ks(c,o){ea[Object(a.lowerCase)(c)]=ua(o)}function Ri(c,o,t){var i=t.translate(c),b=t.translate(o);return Object(a.isNumberEqual)(i,b)}function Rs(c,o){var t=o.coordinate,i=o.getXScale(),b=i.range,D=b[b.length-1],rt=b[0],Mt=t.invert(c),Nt=Mt.x;return t.isPolar&&Nt>(1+D)/2&&(Nt=rt),i.translate(i.invert(Nt))}function Mi(c,o,t){var i=t.coordinate,b=t.getYScale(),D=b.field,rt=i.invert(o),Mt=b.invert(rt.y),Nt=Object(a.find)(c,function(ne){var ge=ne[y];return ge[D][0]<=Mt&&ge[D][1]>=Mt});return Nt||c[c.length-1]}var hu=Object(a.memoize)(function(c){if(c.isCategory)return 1;for(var o=c.values,t=o.length,i=c.translate(o[0]),b=i,D=0;D<t;D++){var rt=o[D],Mt=c.translate(rt);Mt<i&&(i=Mt),Mt>b&&(b=Mt)}return(b-i)/(t-1)});function ui(c,o,t){var i=o.getAttribute("position"),b=i.getFields(),D=o.scales,rt=Object(a.isFunction)(t)||!t?b[0]:t,Mt=D[rt],Nt=Mt?Mt.getText(c[rt]):c[rt]||rt;return Object(a.isFunction)(t)?t(Nt,c):Nt}function du(c){var o=Object(a.values)(c.attributes);return Object(a.filter)(o,function(t){return Object(a.contains)(j,t.type)})}function eo(c){for(var o=du(c),t,i=0,b=o;i<b.length;i++){var D=b[i],rt=D.getScale(D.type);if(rt&&rt.isLinear){t=rt;break}}var Mt=c.getXScale(),Nt=c.getYScale();return t||Nt||Mt}function vu(c,o){var t=o.field,i=c[t];if(Object(a.isArray)(i)){var b=i.map(function(D){return o.getText(D)});return b.join("-")}return o.getText(i)}function na(c,o){var t,i=o.getGroupScales();if(i.length&&(t=i[0]),t){var b=t.field;return t.getText(c[b])}var D=eo(o);return xr(D)}function ra(c,o,t){if(o.length===0)return null;var i=t.type,b=t.getXScale(),D=t.getYScale(),rt=b.field,Mt=D.field,Nt=null;if(i==="heatmap"||i==="point"){for(var ne=t.coordinate,ge=ne.invert(c),be=b.invert(ge.x),Ae=D.invert(ge.y),Xe=Infinity,an=0;an<o.length;an++){var gn=o[an],Yn=gn[y],Kn=Math.pow(Yn[rt]-be,2)+Math.pow(Yn[Mt]-Ae,2);Kn<Xe&&(Xe=Kn,Nt=gn)}return Nt}var ir=o[0],cr=o[o.length-1],Rr=Rs(c,t),_r=ir[y][rt],zr=ir[y][Mt],ki=cr[y][rt],Ai=D.isLinear&&Object(a.isArray)(zr);if(Object(a.isArray)(_r)){for(var an=0;an<o.length;an++){var mi=o[an],Yn=mi[y];if(b.translate(Yn[rt][0])<=Rr&&b.translate(Yn[rt][1])>=Rr)if(Ai)Object(a.isArray)(Nt)||(Nt=[]),Nt.push(mi);else{Nt=mi;break}}Object(a.isArray)(Nt)&&(Nt=Mi(Nt,c,t))}else{var Ki=void 0;if(!b.isLinear&&b.type!=="timeCat"){for(var an=0;an<o.length;an++){var mi=o[an],Yn=mi[y];if(Ri(Yn[rt],Rr,b))if(Ai)Object(a.isArray)(Nt)||(Nt=[]),Nt.push(mi);else{Nt=mi;break}else b.translate(Yn[rt])<=Rr&&(cr=mi,Ki=o[an+1])}Object(a.isArray)(Nt)&&(Nt=Mi(Nt,c,t))}else{if((Rr>b.translate(ki)||Rr<b.translate(_r))&&(Rr>b.max||Rr<b.min))return null;for(var vo=0,po=o.length-1,yo=void 0;vo<=po;){yo=Math.floor((vo+po)/2);var wo=o[yo][y][rt];if(Ri(wo,Rr,b))return o[yo];b.translate(wo)<=b.translate(Rr)?(vo=yo+1,cr=o[yo],Ki=o[yo+1]):(po===0&&(cr=o[0]),po=yo-1)}}cr&&Ki&&Math.abs(b.translate(cr[y][rt])-Rr)>Math.abs(b.translate(Ki[y][rt])-Rr)&&(cr=Ki)}var Z=hu(t.getXScale());return!Nt&&Math.abs(b.translate(cr[y][rt])-Rr)<=Z/2&&(Nt=cr),Nt}function ia(c,o,t,i){t===void 0&&(t=""),i===void 0&&(i=!1);var b=c[y],D=ui(b,o,t),rt=o.tooltipOption,Mt=o.theme.defaultColor,Nt=[],ne,ge;function be(ki,Ai){if(i||!Object(a.isNil)(Ai)&&Ai!==""){var mi={title:D,data:b,mappingData:c,name:ki,value:Ai,color:c.color||Mt,marker:!0};Nt.push(mi)}}if(Object(a.isObject)(rt)){var Ae=rt.fields,Xe=rt.callback;if(Xe){var an=Ae.map(function(ki){return c[y][ki]}),gn=Xe.apply(void 0,an),Yn=Object(at.a)({data:c[y],mappingData:c,title:D,color:c.color||Mt,marker:!0},gn);Nt.push(Yn)}else for(var Kn=o.scales,ir=0,cr=Ae;ir<cr.length;ir++){var Rr=cr[ir];if(!Object(a.isNil)(b[Rr])){var _r=Kn[Rr];ne=xr(_r),ge=_r.getText(b[Rr]),be(ne,ge)}}}else{var zr=eo(o);ge=vu(b,zr),ne=na(b,o),be(ne,ge)}return Nt}function tc(c){return!Object(a.isNumber)(c)&&!Object(a.isArray)(c)}function ya(c){c===void 0&&(c=0);var o=Object(a.isArray)(c)?c:[c];switch(o.length){case 0:o=[0,0,0,0];break;case 1:o=new Array(4).fill(o[0]);break;case 2:o=Object(at.d)(o,o);break;case 3:o=Object(at.d)(o,[o[1]]);break;default:o=o.slice(0,4);break}return o}var Ur={};function yr(c,o){Ur[c]=o}function Yc(c){delete Ur[c]}function pu(){return Object.keys(Ur)}function ds(c){return Ur[c]}var ec=function(){function c(o){this.option=this.wrapperOption(o)}return c.prototype.update=function(o){return this.option=this.wrapperOption(o),this},c.prototype.hasAction=function(o){var t=this.option.actions;return Object(a.some)(t,function(i){return i[0]===o})},c.prototype.create=function(o,t){var i=this.option,b=i.type,D=i.cfg,rt=b==="theta",Mt=Object(at.a)({start:o,end:t},D),Nt=$r(rt?"polar":b);return this.coordinate=new Nt(Mt),this.coordinate.type=b,rt&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},c.prototype.adjust=function(o,t){return this.coordinate.update({start:o,end:t}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},c.prototype.rotate=function(o){return this.option.actions.push(["rotate",o]),this},c.prototype.reflect=function(o){return this.option.actions.push(["reflect",o]),this},c.prototype.scale=function(o,t){return this.option.actions.push(["scale",o,t]),this},c.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},c.prototype.getOption=function(){return this.option},c.prototype.getCoordinate=function(){return this.coordinate},c.prototype.wrapperOption=function(o){return Object(at.a)({type:"rect",actions:[],cfg:{}},o)},c.prototype.execActions=function(o){var t=this,i=this.option.actions;Object(a.each)(i,function(b){var D,rt=b[0],Mt=b.slice(1),Nt=Object(a.isNil)(o)?!0:o.includes(rt);Nt&&(D=t.coordinate)[rt].apply(D,Mt)})},c}(),Qo=ec,nc=function(){function c(o,t,i){this.view=o,this.gEvent=t,this.data=i,this.type=t.type}return c.fromData=function(o,t,i){return new c(o,new ft.Event(t,{}),i)},Object.defineProperty(c.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),c.prototype.toString=function(){return"[Event (type="+this.type+")]"},c.prototype.clone=function(){return new c(this.view,this.gEvent,this.data)},c}(),Vo=nc;function Aa(c){var o=c.getController("axis"),t=c.getController("legend"),i=c.getController("annotation"),b=c.getController("slider"),D=c.getController("scrollbar");[o,b,D,t,i].forEach(function(rt){rt&&rt.layout()})}var To=function(){function c(){this.scales=new Map,this.syncScales=new Map}return c.prototype.createScale=function(o,t,i,b){var D=i,rt=this.getScaleMeta(b);if(t.length===0&&rt){var Mt=rt.scale,Nt={type:Mt.type};Mt.isCategory&&(Nt.values=Mt.values),D=Object(a.deepMix)(Nt,rt.scaleDef,i)}var ne=Ar(o,t,D);return this.cacheScale(ne,i,b),ne},c.prototype.sync=function(o,t){var i=this;this.syncScales.forEach(function(b,D){var rt=Number.MAX_SAFE_INTEGER,Mt=Number.MIN_SAFE_INTEGER,Nt=[];Object(a.each)(b,function(ne){var ge=i.getScale(ne);Mt=Object(a.isNumber)(ge.max)?Math.max(Mt,ge.max):Mt,rt=Object(a.isNumber)(ge.min)?Math.min(rt,ge.min):rt,Object(a.each)(ge.values,function(be){Nt.includes(be)||Nt.push(be)})}),Object(a.each)(b,function(ne){var ge=i.getScale(ne);if(ge.isContinuous)ge.change({min:rt,max:Mt,values:Nt});else if(ge.isCategory){var be=ge.range,Ae=i.getScaleMeta(ne);Nt&&!Object(a.get)(Ae,["scaleDef","range"])&&(be=Er(Object(a.deepMix)({},ge,{values:Nt}),o,t)),ge.change({values:Nt,range:be})}})})},c.prototype.cacheScale=function(o,t,i){var b=this.getScaleMeta(i);b&&b.scale.type===o.type?(wr(b.scale,o),b.scaleDef=t):(b={key:i,scale:o,scaleDef:t},this.scales.set(i,b));var D=this.getSyncKey(b);if(b.syncKey=D,this.removeFromSyncScales(i),D){var rt=this.syncScales.get(D);rt||(rt=[],this.syncScales.set(D,rt)),rt.push(i)}},c.prototype.getScale=function(o){var t=this.getScaleMeta(o);if(!t){var i=Object(a.last)(o.split("-")),b=this.syncScales.get(i);b&&b.length&&(t=this.getScaleMeta(b[0]))}return t&&t.scale},c.prototype.deleteScale=function(o){var t=this.getScaleMeta(o);if(t){var i=t.syncKey,b=this.syncScales.get(i);if(b&&b.length){var D=b.indexOf(o);D!==-1&&b.splice(D,1)}}this.scales.delete(o)},c.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},c.prototype.removeFromSyncScales=function(o){var t=this;this.syncScales.forEach(function(i,b){var D=i.indexOf(o);if(D!==-1)return i.splice(D,1),i.length===0&&t.syncScales.delete(b),!1})},c.prototype.getSyncKey=function(o){var t=o.scale,i=o.scaleDef,b=t.field,D=Object(a.get)(i,["sync"]);return D===!0?b:D===!1?void 0:D},c.prototype.getScaleMeta=function(o){return this.scales.get(o)},c}(),vs=function(){function c(o,t,i,b){o===void 0&&(o=0),t===void 0&&(t=0),i===void 0&&(i=0),b===void 0&&(b=0),this.top=o,this.right=t,this.bottom=i,this.left=b}return c.instance=function(o,t,i,b){return o===void 0&&(o=0),t===void 0&&(t=0),i===void 0&&(i=0),b===void 0&&(b=0),new c(o,t,i,b)},c.prototype.max=function(o){var t=o[0],i=o[1],b=o[2],D=o[3];return this.top=Math.max(this.top,t),this.right=Math.max(this.right,i),this.bottom=Math.max(this.bottom,b),this.left=Math.max(this.left,D),this},c.prototype.shrink=function(o){var t=o[0],i=o[1],b=o[2],D=o[3];return this.top+=t,this.right+=i,this.bottom+=b,this.left+=D,this},c.prototype.inc=function(o,t){var i=o.width,b=o.height;switch(t){case e.TOP:case e.TOP_LEFT:case e.TOP_RIGHT:this.top+=b;break;case e.RIGHT:case e.RIGHT_TOP:case e.RIGHT_BOTTOM:this.right+=i;break;case e.BOTTOM:case e.BOTTOM_LEFT:case e.BOTTOM_RIGHT:this.bottom+=b;break;case e.LEFT:case e.LEFT_TOP:case e.LEFT_BOTTOM:this.left+=i;break;default:break}return this},c.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},c.prototype.clone=function(){return new(c.bind.apply(c,Object(at.d)([void 0],this.getPadding())))},c}();function Ns(c){var o=c.padding;if(!tc(o))return new(vs.bind.apply(vs,Object(at.d)([void 0],ya(o))));var t=c.viewBBox,i=new vs,b=[],D=[],rt=[];return Object(a.each)(c.getComponents(),function(Mt){var Nt=Mt.type;Nt===r.AXIS?b.push(Mt):[r.LEGEND,r.SLIDER,r.SCROLLBAR].includes(Nt)?D.push(Mt):Nt!==r.GRID&&Nt!==r.TOOLTIP&&rt.push(Mt)}),Object(a.each)(b,function(Mt){var Nt=Mt.component,ne=Nt.getLayoutBBox(),ge=new Qe(ne.x,ne.y,ne.width,ne.height),be=ge.exceed(t);i.max(be)}),Object(a.each)(D,function(Mt){var Nt=Mt.component,ne=Mt.direction,ge=Nt.getLayoutBBox(),be=Nt.get("padding"),Ae=new Qe(ge.x,ge.y,ge.width,ge.height).expand(be);i.inc(Ae,ne)}),Object(a.each)(rt,function(Mt){var Nt=Mt.component,ne=Mt.direction,ge=Nt.getLayoutBBox(),be=new Qe(ge.x,ge.y,ge.width,ge.height);i.inc(be,ne)}),i}function ts(c,o,t){var i=t.instance();o.forEach(function(b){b.autoPadding=i.max(b.autoPadding.getPadding())})}var Ls=function(c){Object(at.b)(o,c);function o(t){var i=c.call(this,{visible:t.visible})||this;i.views=[],i.geometries=[],i.controllers=[],i.interactions={},i.limitInPlot=!1,i.options={data:[],animate:!0},i.usedControllers=pu(),i.scalePool=new To,i.layoutFunc=Aa,i.isPreMouseInPlot=!1,i.isDataChanged=!1,i.isCoordinateChanged=!1,i.createdScaleKeys=new Map,i.onCanvasEvent=function(cr){var Rr=cr.name;if(!Rr.includes(":")){var _r=i.createViewEvent(cr);i.doPlotEvent(_r),i.emit(Rr,_r)}},i.onDelegateEvents=function(cr){var Rr=cr.name;if(!!Rr.includes(":")){var _r=i.createViewEvent(cr);i.emit(Rr,_r)}};var b=t.id,D=b===void 0?Object(a.uniqueId)("view"):b,rt=t.parent,Mt=t.canvas,Nt=t.backgroundGroup,ne=t.middleGroup,ge=t.foregroundGroup,be=t.region,Ae=be===void 0?{start:{x:0,y:0},end:{x:1,y:1}}:be,Xe=t.padding,an=t.appendPadding,gn=t.theme,Yn=t.options,Kn=t.limitInPlot,ir=t.syncViewPadding;return i.parent=rt,i.canvas=Mt,i.backgroundGroup=Nt,i.middleGroup=ne,i.foregroundGroup=ge,i.region=Ae,i.padding=Xe,i.appendPadding=an,i.options=Object(at.a)(Object(at.a)({},i.options),Yn),i.limitInPlot=Kn,i.id=D,i.syncViewPadding=ir,i.themeObject=Object(a.isObject)(gn)?Object(a.deepMix)({},xi("default"),ua(gn)):xi(gn),i.init(),i}return o.prototype.setLayout=function(t){this.layoutFunc=t},o.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},o.prototype.render=function(t){t===void 0&&(t=!1),this.emit(m.BEFORE_RENDER),this.paint(t),this.emit(m.AFTER_RENDER),this.visible===!1&&this.changeVisible(!1)},o.prototype.clear=function(){var t=this;this.emit(m.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var i=this.geometries,b=0;b<i.length;b++)i[b].clear(),i[b].container.remove(!0);this.geometries=[];for(var D=this.controllers,b=0;b<D.length;b++)D[b].name==="annotation"?D[b].clear(!0):D[b].clear();this.createdScaleKeys.forEach(function(Mt,Nt){t.getRootView().scalePool.deleteScale(Nt)}),this.createdScaleKeys.clear();for(var rt=this.views,b=0;b<rt.length;b++)rt[b].clear();this.emit(m.AFTER_CLEAR)},o.prototype.destroy=function(){this.emit(m.BEFORE_DESTROY);var t=this.interactions;Object(a.each)(t,function(Mt){Mt&&Mt.destroy()}),this.clear();for(var i=this.controllers,b=0,D=i.length;b<D;b++){var rt=i[b];rt.destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),c.prototype.destroy.call(this)},o.prototype.changeVisible=function(t){c.prototype.changeVisible.call(this,t);for(var i=this.geometries,b=0,D=i.length;b<D;b++){var rt=i[b];rt.changeVisible(t)}for(var Mt=this.controllers,b=0,D=Mt.length;b<D;b++){var Nt=Mt[b];Nt.changeVisible(t)}return this.foregroundGroup.set("visible",t),this.middleGroup.set("visible",t),this.backgroundGroup.set("visible",t),this.getCanvas().draw(),this},o.prototype.data=function(t){return Object(a.set)(this.options,"data",t),this.isDataChanged=!0,this},o.prototype.source=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(t)},o.prototype.filter=function(t,i){return Object(a.isFunction)(i)?(Object(a.set)(this.options,["filters",t],i),this):(!i&&Object(a.get)(this.options,["filters",t])&&delete this.options.filters[t],this)},o.prototype.axis=function(t,i){return Object(a.isBoolean)(t)?Object(a.set)(this.options,["axes"],t):Object(a.set)(this.options,["axes",t],i),this},o.prototype.legend=function(t,i){return Object(a.isBoolean)(t)?Object(a.set)(this.options,["legends"],t):Object(a.isString)(t)?Object(a.set)(this.options,["legends",t],i):Object(a.set)(this.options,["legends"],t),this},o.prototype.scale=function(t,i){var b=this;return Object(a.isString)(t)?Object(a.set)(this.options,["scales",t],i):Object(a.isObject)(t)&&Object(a.each)(t,function(D,rt){Object(a.set)(b.options,["scales",rt],D)}),this},o.prototype.tooltip=function(t){return Object(a.set)(this.options,"tooltip",t),this},o.prototype.annotation=function(){return this.getController("annotation")},o.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},o.prototype.coordinate=function(t,i){return Object(a.isString)(t)?Object(a.set)(this.options,"coordinate",{type:t,cfg:i}):Object(a.set)(this.options,"coordinate",t),this.coordinateController.update(this.options.coordinate),this.coordinateController},o.prototype.coord=function(t,i){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(t,i)},o.prototype.facet=function(t,i){this.facetInstance&&this.facetInstance.destroy();var b=G(t);if(!b)throw new Error("facet '"+t+"' is not exist!");return this.facetInstance=new b(this,Object(at.a)(Object(at.a)({},i),{type:t})),this},o.prototype.animate=function(t){return Object(a.set)(this.options,"animate",t),this},o.prototype.updateOptions=function(t){return this.clear(),Object(a.mix)(this.options,t),this.views.forEach(function(i){return i.destroy()}),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},o.prototype.option=function(t,i){if(o.prototype[t])throw new Error(`Can't use built in variable name "`+t+'", please change another one.');return Object(a.set)(this.options,t,i),this},o.prototype.theme=function(t){return this.themeObject=Object(a.isObject)(t)?Object(a.deepMix)({},this.themeObject,ua(t)):xi(t),this},o.prototype.interaction=function(t,i){var b=this.interactions[t];b&&b.destroy();var D=Go(t,this,i);return D&&(D.init(),this.interactions[t]=D),this},o.prototype.removeInteraction=function(t){var i=this.interactions[t];i&&(i.destroy(),this.interactions[t]=void 0)},o.prototype.changeData=function(t){this.isDataChanged=!0,this.emit(m.BEFORE_CHANGE_DATA),this.data(t),this.paint(!0);for(var i=this.views,b=0,D=i.length;b<D;b++){var rt=i[b];rt.changeData(t)}this.emit(m.AFTER_CHANGE_DATA)},o.prototype.createView=function(t){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var i={data:this.options.data,scales:Object(a.clone)(this.options.scales),axes:Object(a.clone)(this.options.axes),coordinate:Object(a.clone)(this.coordinateController.getOption()),tooltip:Object(a.clone)(this.options.tooltip),legends:Object(a.clone)(this.options.legends),animate:this.options.animate,visible:this.visible},b=new o(Object(at.a)(Object(at.a)({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:p.BG}),middleGroup:this.middleGroup.addGroup({zIndex:p.MID}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:p.FORE}),theme:this.themeObject,padding:this.padding},t),{options:Object(at.a)(Object(at.a)({},i),Object(a.get)(t,"options",{}))}));return this.views.push(b),b},o.prototype.view=function(t){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(t)},o.prototype.removeView=function(t){var i=Object(a.remove)(this.views,function(b){return b===t})[0];return i&&i.destroy(),i},o.prototype.getCoordinate=function(){return this.coordinateInstance},o.prototype.getTheme=function(){return this.themeObject},o.prototype.getXScale=function(){var t=this.geometries[0];return t?t.getXScale():null},o.prototype.getYScales=function(){var t={};return this.geometries.map(function(i){var b=i.getYScale(),D=b.field;if(!t[D])return t[D]=!0,b})},o.prototype.getScalesByDim=function(t){for(var i=this.geometries,b={},D=0,rt=i.length;D<rt;D++){var Mt=i[D],Nt=t==="x"?Mt.getXScale():Mt.getYScale();Nt&&!b[Nt.field]&&(b[Nt.field]=Nt)}return b},o.prototype.getScaleByField=function(t,i){var b=i||this.getScaleKey(t);return this.getRootView().scalePool.getScale(b)},o.prototype.getOptions=function(){return this.options},o.prototype.getData=function(){return this.filteredData},o.prototype.getLayer=function(t){return t===A.BG?this.backgroundGroup:t===A.MID?this.middleGroup:t===A.FORE?this.foregroundGroup:this.foregroundGroup},o.prototype.isPointInPlot=function(t){return on(this.getCoordinate(),t)},o.prototype.getLegendAttributes=function(){return Object(a.flatten)(this.geometries.map(function(t){return t.getGroupAttributes()}))},o.prototype.getGroupScales=function(){var t=this.geometries.map(function(i){return i.getGroupScales()});return Oe(Object(a.flatten)(t))},o.prototype.getCanvas=function(){return this.getRootView().canvas},o.prototype.getRootView=function(){for(var t=this;;){if(t.parent){t=t.parent;continue}break}return t},o.prototype.getXY=function(t){var i=this.getCoordinate(),b=this.getScalesByDim("x"),D=this.getScalesByDim("y"),rt,Mt;if(Object(a.each)(t,function(Nt,ne){b[ne]&&(rt=b[ne].scale(Nt)),D[ne]&&(Mt=D[ne].scale(Nt))}),!Object(a.isNil)(rt)&&!Object(a.isNil)(Mt))return i.convert({x:rt,y:Mt})},o.prototype.getController=function(t){return Object(a.find)(this.controllers,function(i){return i.name===t})},o.prototype.showTooltip=function(t){var i=this.getController("tooltip");return i&&i.showTooltip(t),this},o.prototype.hideTooltip=function(){var t=this.getController("tooltip");return t&&t.hideTooltip(),this},o.prototype.lockTooltip=function(){var t=this.getController("tooltip");return t&&t.lockTooltip(),this},o.prototype.unlockTooltip=function(){var t=this.getController("tooltip");return t&&t.unlockTooltip(),this},o.prototype.isTooltipLocked=function(){var t=this.getController("tooltip");return t&&t.isTooltipLocked()},o.prototype.getTooltipItems=function(t){var i=this.getController("tooltip");return i?i.getTooltipItems(t):[]},o.prototype.getSnapRecords=function(t){for(var i=this.geometries,b=[],D=0,rt=i.length;D<rt;D++){var Mt=i[D],Nt=Mt.dataArray;Mt.sort(Nt);for(var ne=void 0,ge=0,be=Nt.length;ge<be;ge++){var Ae=Nt[ge];ne=ra(t,Ae,Mt),ne&&b.push(ne)}}for(var Xe=this.views,D=0,rt=Xe.length;D<rt;D++){var an=Xe[D],gn=an.getSnapRecords(t);b=b.concat(gn)}return b},o.prototype.getComponents=function(){for(var t=[],i=this.controllers,b=0,D=i.length;b<D;b++){var rt=i[b];t=t.concat(rt.getComponents())}return t},o.prototype.filterData=function(t){var i=this.options.filters;return Object(a.size)(i)===0?t:Object(a.filter)(t,function(b,D){var rt=Object.keys(i);return rt.every(function(Mt){var Nt=i[Mt];return Nt(b[Mt],b,D)})})},o.prototype.filterFieldData=function(t,i){var b=this.options.filters,D=Object(a.get)(b,t);return Object(a.isUndefined)(D)?i:i.filter(function(rt,Mt){return D(rt[t],rt,Mt)})},o.prototype.adjustCoordinate=function(){var t=this.getCoordinate(),i=t.start,b=t.end,D=this.coordinateBBox.bl,rt=this.coordinateBBox.tr;if(Object(a.isEqual)(i,D)&&Object(a.isEqual)(b,rt)){this.isCoordinateChanged=!1;return}this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(D,rt)},o.prototype.paint=function(t){this.renderDataRecursive(t),this.syncScale(),this.emit(m.BEFORE_PAINT),this.renderPaddingRecursive(t),this.renderLayoutRecursive(t),this.renderBackgroundStyleShape(),this.renderPaintRecursive(t),this.emit(m.AFTER_PAINT),this.isDataChanged=!1},o.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var t=Object(a.get)(this.themeObject,"background");if(t){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var i=this.viewBBox,b=i.x,D=i.y,rt=i.width,Mt=i.height;this.backgroundStyleRectShape.attr({fill:t,x:b,y:D,width:rt,height:Mt})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},o.prototype.renderPaddingRecursive=function(t){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(t),this.autoPadding=Ns(this).shrink(ya(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate();for(var i=this.views,b=0,D=i.length;b<D;b++){var rt=i[b];rt.renderPaddingRecursive(t)}},o.prototype.renderLayoutRecursive=function(t){var i=this.syncViewPadding===!0?ts:Object(a.isFunction)(this.syncViewPadding)?this.syncViewPadding:void 0;i&&(i(this,this.views,vs),this.views.forEach(function(Nt){Nt.coordinateBBox=Nt.viewBBox.shrink(Nt.autoPadding.getPadding()),Nt.adjustCoordinate()})),this.doLayout();for(var b=this.views,D=0,rt=b.length;D<rt;D++){var Mt=b[D];Mt.renderLayoutRecursive(t)}},o.prototype.renderPaintRecursive=function(t){var i=this.middleGroup;if(this.limitInPlot){var b=vr(this.coordinateInstance),D=b.type,rt=b.attrs;i.setClip({type:D,attrs:rt})}else i.setClip(void 0);this.paintGeometries(t),this.renderComponents(t);for(var Mt=this.views,Nt=0,ne=Mt.length;Nt<ne;Nt++){var ge=Mt[Nt];ge.renderPaintRecursive(t)}},o.prototype.createScale=function(t,i,b,D){var rt=Object(a.get)(this.options.scales,[t]),Mt=Object(at.a)(Object(at.a)({},rt),b);return this.parent?this.parent.createScale(t,i,Mt,D):this.scalePool.createScale(t,i,Mt,D)},o.prototype.renderDataRecursive=function(t){this.doFilterData(),this.createCoordinate(),this.initGeometries(t),this.renderFacet(t);for(var i=this.views,b=0,D=i.length;b<D;b++){var rt=i[b];rt.renderDataRecursive(t)}},o.prototype.calculateViewBBox=function(){var t,i,b,D;if(this.parent){var rt=this.parent.coordinateBBox;t=rt.x,i=rt.y,b=rt.width,D=rt.height}else t=0,i=0,b=this.canvas.get("width"),D=this.canvas.get("height");var Mt=this.region,Nt=Mt.start,ne=Mt.end,ge=new Qe(t+b*Nt.x,i+D*Nt.y,b*(ne.x-Nt.x),D*(ne.y-Nt.y));(!this.viewBBox||!this.viewBBox.isEqual(ge))&&(this.viewBBox=new Qe(t+b*Nt.x,i+D*Nt.y,b*(ne.x-Nt.x),D*(ne.y-Nt.y))),this.coordinateBBox=this.viewBBox},o.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},o.prototype.initComponentController=function(){for(var t=this.usedControllers,i=0,b=t.length;i<b;i++){var D=t[i],rt=ds(D);rt&&this.controllers.push(new rt(this))}},o.prototype.createViewEvent=function(t){var i=t.shape,b=t.name,D=i?i.get("origin"):null,rt=new Vo(this,t,D);return rt.type=b,rt},o.prototype.doPlotEvent=function(t){var i=t.type,b=t.x,D=t.y,rt={x:b,y:D},Mt=["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"];if(Mt.includes(i)){var Nt=this.isPointInPlot(rt);if(Nt){var ne="plot:"+i;t.type=ne,this.emit(ne,t),(i==="mouseleave"||i==="touchend")&&(this.isPreMouseInPlot=!1)}i==="mousemove"||i==="touchmove"?(this.isPreMouseInPlot&&!Nt?(i==="mousemove"&&(t.type=l.MOUSE_LEAVE,this.emit(l.MOUSE_LEAVE,t)),t.type=l.LEAVE,this.emit(l.LEAVE,t)):!this.isPreMouseInPlot&&Nt&&(i==="mousemove"&&(t.type=l.MOUSE_ENTER,this.emit(l.MOUSE_ENTER,t)),t.type=l.ENTER,this.emit(l.ENTER,t)),this.isPreMouseInPlot=Nt):(i==="mouseleave"||i==="touchend")&&this.isPreMouseInPlot&&(i==="mouseleave"&&(t.type=l.MOUSE_LEAVE,this.emit(l.MOUSE_LEAVE,t)),t.type=l.LEAVE,this.emit(l.LEAVE,t),this.isPreMouseInPlot=!1)}},o.prototype.doFilterData=function(){var t=this.options.data;this.filteredData=this.filterData(t)},o.prototype.initGeometries=function(t){this.createOrUpdateScales();for(var i=this.getCoordinate(),b=Object(a.get)(this.options,"scales",{}),D=this.geometries,rt=0,Mt=D.length;rt<Mt;rt++){var Nt=D[rt];Nt.scales=this.getGeometryScales();var ne={coordinate:i,scaleDefs:b,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};t?Nt.update(ne):Nt.init(ne)}this.adjustScales()},o.prototype.createOrUpdateScales=function(){for(var t=this.getScaleFields(),i=this.getGroupedFields(),b=this.getOptions(),D=b.data,rt=b.scales,Mt=rt===void 0?{}:rt,Nt=this.filteredData,ne=0,ge=t.length;ne<ge;ne++){var be=t[ne],Ae=Mt[be],Xe=this.getScaleKey(be);this.createScale(be,i.includes(be)?D:Nt,Ae,Xe),this.createdScaleKeys.set(Xe,!0)}},o.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},o.prototype.getGeometryScales=function(){for(var t=this.getScaleFields(),i={},b=0;b<t.length;b++){var D=t[b];i[D]=this.getScaleByField(D)}return i},o.prototype.getScaleFields=function(){for(var t=[],i={},b=this.geometries,D=0;D<b.length;D++){var rt=b[D],Mt=rt.getScaleFields();Oe(Mt,t,i)}return t},o.prototype.getGroupedFields=function(){for(var t=[],i={},b=this.geometries,D=0;D<b.length;D++){var rt=b[D],Mt=rt.getGroupFields();Oe(Mt,t,i)}return t},o.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},o.prototype.adjustCategoryScaleRange=function(){var t=this,i=Object(at.d)([this.getXScale()],this.getYScales()).filter(function(rt){return!!rt}),b=this.getCoordinate(),D=this.options.scales;Object(a.each)(i,function(rt){var Mt=rt.field,Nt=rt.values,ne=rt.isCategory,ge=rt.isIdentity;(ne||ge)&&Nt&&!Object(a.get)(D,[Mt,"range"])&&(rt.range=Er(rt,b,t.theme))})},o.prototype.initComponents=function(t){for(var i=this.controllers,b=0;b<i.length;b++){var D=i[b];t?D.update():(D.clear(),D.render())}},o.prototype.doLayout=function(){this.layoutFunc(this)},o.prototype.createCoordinate=function(){var t=this.coordinateBBox.bl,i=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(t,i)},o.prototype.paintGeometries=function(t){for(var i=this.options.animate,b=this.getCoordinate(),D={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},rt=this.geometries,Mt=0;Mt<rt.length;Mt++){var Nt=rt[Mt];Nt.coordinate=b,Nt.canvasRegion=D,i||Nt.animate(!1),Nt.paint(t)}},o.prototype.renderComponents=function(t){for(var i=0;i<this.getComponents().length;i++){var b=this.getComponents()[i];b.component.render()}},o.prototype.renderFacet=function(t){this.facetInstance&&(t?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},o.prototype.initOptions=function(){var t=this,i=this.options,b=i.geometries,D=b===void 0?[]:b,rt=i.interactions,Mt=rt===void 0?[]:rt,Nt=i.views,ne=Nt===void 0?[]:Nt,ge=i.annotations,be=ge===void 0?[]:ge,Ae=i.coordinate,Xe=i.events,an=i.facets;this.coordinateController?Ae&&this.coordinateController.update(Ae):this.coordinateController=new Qo(Ae);for(var gn=0;gn<D.length;gn++){var Yn=D[gn];this.createGeometry(Yn)}for(var Kn=0;Kn<Mt.length;Kn++){var ir=Mt[Kn],cr=ir.type,Rr=ir.cfg;this.interaction(cr,Rr)}for(var _r=0;_r<ne.length;_r++){var zr=ne[_r];this.createView(zr)}for(var ki=this.getController("annotation"),Ai=0;Ai<be.length;Ai++){var mi=be[Ai];ki.annotation(mi)}Xe&&Object(a.each)(Xe,function(Ki,vo){t.on(vo,Ki)}),an&&Object(a.each)(an,function(Ki){var vo=Ki.type,po=Object(at.c)(Ki,["type"]);t.facet(vo,po)})},o.prototype.createGeometry=function(t){var i=t.type,b=t.cfg,D=b===void 0?{}:b;if(this[i]){var rt=this[i](D);Object(a.each)(t,function(Mt,Nt){Object(a.isFunction)(rt[Nt])&&rt[Nt](Mt)})}},o.prototype.getScaleKey=function(t){return this.id+"-"+t},o}(pt);function Ho(c,o){Ls.prototype[c.toLowerCase()]=function(t){t===void 0&&(t={});var i=Object(at.a)({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},t),b=new o(i);return this.geometries.push(b),b}}var es=Ls,Bs=function(c){Object(at.b)(o,c);function o(t){var i=this,b=t.container,D=t.width,rt=t.height,Mt=t.autoFit,Nt=Mt===void 0?!1:Mt,ne=t.padding,ge=t.appendPadding,be=t.renderer,Ae=be===void 0?"canvas":be,Xe=t.pixelRatio,an=t.localRefresh,gn=an===void 0?!0:an,Yn=t.visible,Kn=Yn===void 0?!0:Yn,ir=t.supportCSSTransform,cr=ir===void 0?!1:ir,Rr=t.defaultInteractions,_r=Rr===void 0?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text"]:Rr,zr=t.options,ki=t.limitInPlot,Ai=t.theme,mi=t.syncViewPadding,Ki=Object(a.isString)(b)?document.getElementById(b):b,vo=Object(v.b)('<div style="position:relative;"></div>');Ki.appendChild(vo);var po=N(Ki,Nt,D,rt),yo=S(Ae),wo=new yo.Canvas(Object(at.a)({container:vo,pixelRatio:Xe,localRefresh:gn,supportCSSTransform:cr},po));return i=c.call(this,{parent:null,canvas:wo,backgroundGroup:wo.addGroup({zIndex:p.BG}),middleGroup:wo.addGroup({zIndex:p.MID}),foregroundGroup:wo.addGroup({zIndex:p.FORE}),padding:ne,appendPadding:ge,visible:Kn,options:zr,limitInPlot:ki,theme:Ai,syncViewPadding:mi})||this,i.onResize=Object(a.debounce)(function(){i.forceFit()},300),i.ele=Ki,i.canvas=wo,i.width=po.width,i.height=po.height,i.autoFit=Nt,i.localRefresh=gn,i.renderer=Ae,i.wrapperElement=vo,i.updateCanvasStyle(),i.bindAutoFit(),i.initDefaultInteractions(_r),i}return o.prototype.initDefaultInteractions=function(t){var i=this;Object(a.each)(t,function(b){i.interaction(b)})},o.prototype.changeSize=function(t,i){return this.width===t&&this.height===i?this:(this.emit(m.BEFORE_CHANGE_SIZE),this.width=t,this.height=i,this.canvas.changeSize(t,i),this.render(!0),this.emit(m.AFTER_CHANGE_SIZE),this)},o.prototype.destroy=function(){c.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),X(this.wrapperElement),this.wrapperElement=null},o.prototype.changeVisible=function(t){return c.prototype.changeVisible.call(this,t),this.wrapperElement.style.display=t?"":"none",this},o.prototype.forceFit=function(){if(!this.destroyed){var t=N(this.ele,!0,this.width,this.height),i=t.width,b=t.height;this.changeSize(i,b)}},o.prototype.updateCanvasStyle=function(){Object(v.e)(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},o.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},o.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},o}(es),gu=Bs,Do=function(){function c(o){this.visible=!0,this.components=[],this.view=o}return c.prototype.clear=function(o){Object(a.each)(this.components,function(t){t.component.destroy()}),this.components=[]},c.prototype.destroy=function(){this.clear()},c.prototype.getComponents=function(){return this.components},c.prototype.changeVisible=function(o){this.visible!==o&&(this.components.forEach(function(t){o?t.component.show():t.component.hide()}),this.visible=o)},c}();function ps(c){for(var o=[],t=function(D){var rt=c[D],Mt=Object(a.find)(o,function(Nt){return Nt.color===rt.color&&Nt.name===rt.name&&Nt.value===rt.value&&Nt.title===rt.title});Mt||o.push(rt)},i=0;i<c.length;i++)t(i);return o}var yu=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.isLocked=!1,t}return Object.defineProperty(o.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.isVisible=function(){var t=this.view.getOptions().tooltip;return t!==!1},o.prototype.render=function(){},o.prototype.showTooltip=function(t){if(this.point=t,!!this.isVisible()){var i=this.view,b=this.getTooltipItems(t);if(!b.length){this.hideTooltip();return}var D=this.getTitle(b),rt={x:b[0].x,y:b[0].y};i.emit("tooltip:show",Vo.fromData(i,"tooltip:show",Object(at.a)({items:b,title:D},t)));var Mt=this.getTooltipCfg(),Nt=Mt.follow,ne=Mt.showMarkers,ge=Mt.showCrosshairs,be=Mt.showContent,Ae=Mt.marker,Xe=this.items,an=this.title;if(!Object(a.isEqual)(an,D)||!Object(a.isEqual)(Xe,b)?(i.emit("tooltip:change",Vo.fromData(i,"tooltip:change",Object(at.a)({items:b,title:D},t))),be&&(this.tooltip||this.renderTooltip(),this.tooltip.update(Object(a.mix)({},Mt,{items:this.getItemsAfterProcess(b),title:D},Nt?t:{})),this.tooltip.show()),ne&&this.renderTooltipMarkers(b,Ae)):(this.tooltip&&Nt&&(this.tooltip.update(t),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=b,this.title=D,ge){var gn=Object(a.get)(Mt,["crosshairs","follow"],!1);this.renderCrosshairs(gn?t:rt,Mt)}}},o.prototype.hideTooltip=function(){var t=this.getTooltipCfg().follow;if(!t){this.point=null;return}var i=this.tooltipMarkersGroup;i&&i.hide();var b=this.xCrosshair,D=this.yCrosshair;b&&b.hide(),D&&D.hide();var rt=this.tooltip;rt&&rt.hide(),this.view.emit("tooltip:hide",Vo.fromData(this.view,"tooltip:hide",{})),this.point=null},o.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},o.prototype.unlockTooltip=function(){this.isLocked=!1;var t=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(t.capture)},o.prototype.isTooltipLocked=function(){return this.isLocked},o.prototype.clear=function(){var t=this,i=t.tooltip,b=t.xCrosshair,D=t.yCrosshair,rt=t.tooltipMarkersGroup;i&&(i.hide(),i.clear()),b&&b.clear(),D&&D.clear(),rt&&rt.clear(),this.reset()},o.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},o.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},o.prototype.changeVisible=function(t){if(this.visible!==t){var i=this,b=i.tooltip,D=i.tooltipMarkersGroup,rt=i.xCrosshair,Mt=i.yCrosshair;t?(b&&b.show(),D&&D.show(),rt&&rt.show(),Mt&&Mt.show()):(b&&b.hide(),D&&D.hide(),rt&&rt.hide(),Mt&&Mt.hide()),this.visible=t}},o.prototype.getTooltipItems=function(t){var i=this.findItemsFromView(this.view,t);if(i.length){i=Object(a.flatten)(i);for(var b=0,D=i;b<D.length;b++)for(var rt=D[b],Mt=0,Nt=rt;Mt<Nt.length;Mt++){var ne=Nt[Mt],ge=ne.mappingData,be=ge.x,Ae=ge.y;ne.x=Object(a.isArray)(be)?be[be.length-1]:be,ne.y=Object(a.isArray)(Ae)?Ae[Ae.length-1]:Ae}var Xe=this.getTooltipCfg().shared;if(Xe===!1&&i.length>1){for(var an=i[0],gn=Math.abs(t.y-an[0].y),Yn=0,Kn=i;Yn<Kn.length;Yn++){var ir=Kn[Yn],cr=Math.abs(t.y-ir[0].y);cr<=gn&&(an=ir,gn=cr)}i=[an]}return ps(Object(a.flatten)(i))}return[]},o.prototype.layout=function(){},o.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var t=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}})}},o.prototype.isCursorEntered=function(t){if(this.tooltip){var i=this.tooltip.getContainer(),b=this.tooltip.get("capture");if(i&&b){var D=i.getBoundingClientRect(),rt=D.x,Mt=D.y,Nt=D.width,ne=D.height;return new Qe(rt,Mt,Nt,ne).isPointIn(t)}}return!1},o.prototype.getTooltipCfg=function(){var t=this.view,i=t.getOptions().tooltip,b=this.processCustomContent(i),D=t.getTheme(),rt=Object(a.get)(D,["components","tooltip"],{}),Mt=Object(a.get)(b,"enterable",rt.enterable);return Object(a.deepMix)({},rt,b,{capture:!!(Mt||this.isLocked)})},o.prototype.processCustomContent=function(t){if(Object(a.isBoolean)(t)||!Object(a.get)(t,"customContent"))return t;var i=t.customContent,b=function(rt,Mt){var Nt=i(rt,Mt)||"";return Object(a.isString)(Nt)?'<div class="g2-tooltip">'+Nt+"</div>":Nt};return Object(at.a)(Object(at.a)({},t),{customContent:b})},o.prototype.getTitle=function(t){var i=t[0].title||t[0].name;return this.title=i,i},o.prototype.renderTooltip=function(){var t=this.view.getCanvas(),i={start:{x:0,y:0},end:{x:t.get("width"),y:t.get("height")}},b=this.getTooltipCfg(),D=new Wi(Object(at.a)(Object(at.a)({parent:t.get("el").parentNode,region:i},b),{visible:!1,crosshairs:null}));D.init(),this.tooltip=D},o.prototype.renderTooltipMarkers=function(t,i){for(var b=this.getTooltipMarkersGroup(),D=0,rt=t;D<rt.length;D++){var Mt=rt[D],Nt=Mt.x,ne=Mt.y,ge=Object(at.a)(Object(at.a)({fill:Mt.color,symbol:"circle",shadowColor:Mt.color},i),{x:Nt,y:ne});b.addShape("marker",{attrs:ge})}},o.prototype.renderCrosshairs=function(t,i){var b=Object(a.get)(i,["crosshairs","type"],"x");b==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(t,i)):b==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(t,i)):b==="xy"&&(this.renderXCrosshairs(t,i),this.renderYCrosshairs(t,i))},o.prototype.renderXCrosshairs=function(t,i){var b=this.getViewWithGeometry(this.view).getCoordinate();if(!!on(b,t)){var D,rt;if(b.isRect)b.isTransposed?(D={x:b.start.x,y:t.y},rt={x:b.end.x,y:t.y}):(D={x:t.x,y:b.end.y},rt={x:t.x,y:b.start.y});else{var Mt=$n(b,t),Nt=b.getCenter(),ne=b.getRadius();rt=Pi(Nt.x,Nt.y,ne,Mt),D=Nt}var ge=Object(a.deepMix)({start:D,end:rt,container:this.getTooltipCrosshairsGroup()},Object(a.get)(i,"crosshairs",{}),this.getCrosshairsText("x",t,i));delete ge.type;var be=this.xCrosshair;be?be.update(ge):(be=new Qr.Crosshair.Line(ge),be.init()),be.render(),be.show(),this.xCrosshair=be}},o.prototype.renderYCrosshairs=function(t,i){var b=this.getViewWithGeometry(this.view).getCoordinate();if(!!on(b,t)){var D,rt;if(b.isRect){var Mt=void 0,Nt=void 0;b.isTransposed?(Mt={x:t.x,y:b.end.y},Nt={x:t.x,y:b.start.y}):(Mt={x:b.start.x,y:t.y},Nt={x:b.end.x,y:t.y}),D={start:Mt,end:Nt},rt="Line"}else D={center:b.getCenter(),radius:rn(b,t),startAngle:b.startAngle,endAngle:b.endAngle},rt="Circle";D=Object(a.deepMix)({container:this.getTooltipCrosshairsGroup()},D,Object(a.get)(i,"crosshairs",{}),this.getCrosshairsText("y",t,i)),delete D.type;var ne=this.yCrosshair;ne?b.isRect&&ne.get("type")==="circle"||!b.isRect&&ne.get("type")==="line"?(ne=new Qr.Crosshair[rt](D),ne.init()):ne.update(D):(ne=new Qr.Crosshair[rt](D),ne.init()),ne.render(),ne.show(),this.yCrosshair=ne}},o.prototype.getCrosshairsText=function(t,i,b){var D=Object(a.get)(b,["crosshairs","text"]),rt=Object(a.get)(b,["crosshairs","follow"]),Mt=this.items;if(D){var Nt=this.getViewWithGeometry(this.view),ne=Mt[0],ge=Nt.getXScale(),be=Nt.getYScales()[0],Ae=void 0,Xe=void 0;if(rt){var an=this.view.getCoordinate().invert(i);Ae=ge.invert(an.x),Xe=be.invert(an.y)}else Ae=ne.data[ge.field],Xe=ne.data[be.field];var gn=t==="x"?Ae:Xe;return Object(a.isFunction)(D)?D=D(t,gn,Mt,i):D.content=gn,{text:D}}},o.prototype.getGuideGroup=function(){if(!this.guideGroup){var t=this.view.foregroundGroup;this.guideGroup=t.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},o.prototype.getTooltipMarkersGroup=function(){var t=this.tooltipMarkersGroup;return t&&!t.destroyed?(t.clear(),t.show()):(t=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),t.toFront(),this.tooltipMarkersGroup=t),t},o.prototype.getTooltipCrosshairsGroup=function(){var t=this.tooltipCrosshairsGroup;return t||(t=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),t.toBack(),this.tooltipCrosshairsGroup=t),t},o.prototype.getTooltipItemsByHitShape=function(t,i,b){var D=this.getTooltipCfg().showNil,rt=[],Mt=t.container,Nt=Mt.getShape(i.x,i.y);if(Nt&&Nt.get("visible")&&Nt.get("origin")){var ne=Nt.get("origin").mappingData,ge=ia(ne,t,b,D);ge.length&&rt.push(ge)}return rt},o.prototype.getTooltipItemsByFindData=function(t,i,b){var D=this.getTooltipCfg().showNil,rt=[],Mt=t.dataArray;if(!Object(a.isEmpty)(Mt)){t.sort(Mt);for(var Nt=0,ne=Mt;Nt<ne.length;Nt++){var ge=ne[Nt],be=ra(i,ge,t);if(be){var Ae=t.getElementId(be),Xe=t.elementsMap[Ae];if(t.type==="heatmap"||Xe.visible){var an=ia(be,t,b,D);an.length&&rt.push(an)}}}}return rt},o.prototype.findItemsFromView=function(t,i){if(t.getOptions().tooltip===!1)return[];for(var b=[],D=t.geometries,rt=this.getTooltipCfg(),Mt=rt.shared,Nt=rt.title,ne=rt.reversed,ge=0,be=D;ge<be.length;ge++){var Ae=be[ge];if(Ae.visible&&Ae.tooltipOption!==!1){var Xe=Ae.type,an=void 0;["point","edge","polygon"].includes(Xe)?an=this.getTooltipItemsByHitShape(Ae,i,Nt):["area","line","path","heatmap"].includes(Xe)?an=this.getTooltipItemsByFindData(Ae,i,Nt):Mt!==!1?an=this.getTooltipItemsByFindData(Ae,i,Nt):an=this.getTooltipItemsByHitShape(Ae,i,Nt),an.length&&(ne&&an.reverse(),b.push(an))}}for(var gn=0,Yn=t.views;gn<Yn.length;gn++){var Kn=Yn[gn];b=b.concat(this.findItemsFromView(Kn,i))}return b},o.prototype.getViewWithGeometry=function(t){var i=this;return t.geometries.length?t:Object(a.find)(t.views,function(b){return i.getViewWithGeometry(b)})},o.prototype.getItemsAfterProcess=function(t){var i=this.getTooltipCfg().customItems,b=i||function(D){return D};return b(t)},o}(Do),Fs=yu,mr={};function Gs(c){return mr[c.toLowerCase()]}function Eo(c,o){mr[c.toLowerCase()]=o}var ma={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},mu={interval:function(o){return{enter:{animation:o.isRect?o.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:o.isPolar&&o.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},bu={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(o){var t;return o.isRect?t=o.isTransposed?"grow-in-x":"grow-in-y":(t="grow-in-xy",o.isPolar&&o.isTransposed&&(t="wave-in")),{animation:t}},schema:function(o){var t;return o.isRect?t=o.isTransposed?"grow-in-x":"grow-in-y":t="grow-in-xy",{animation:t}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function Jn(c,o){return{delay:Object(a.isFunction)(c.delay)?c.delay(o):c.delay,easing:Object(a.isFunction)(c.easing)?c.easing(o):c.easing,duration:Object(a.isFunction)(c.duration)?c.duration(o):c.duration,callback:c.callback}}function fe(c,o,t){var i=mu[c];return i&&(Object(a.isFunction)(i)&&(i=i(o)),i=Object(a.deepMix)({},ma,i),t)?i[t]:i}function Ca(c,o,t){var i=Object(a.get)(c.get("origin"),"data",y),b=o.animation,D=Jn(o,i);if(b){var rt=Gs(b);rt&&rt(c,D,t)}else c.animate(t.toAttrs,D)}function Us(c,o,t,i,b){if(bu[t]){var D=bu[t](i),rt=Gs(Object(a.get)(D,"animation",""));if(rt){var Mt=Object(at.a)(Object(at.a)(Object(at.a)({},ma.appear),D),o);c.stopAnimate(),rt(c,Mt,{coordinate:i,minYPoint:b,toAttrs:null})}}}var ns="element-background",ba=function(c){Object(at.b)(o,c);function o(t){var i=c.call(this,t)||this;i.states=[];var b=t.shapeFactory,D=t.container,rt=t.offscreenGroup,Mt=t.visible,Nt=Mt===void 0?!0:Mt;return i.shapeFactory=b,i.container=D,i.offscreenGroup=rt,i.visible=Nt,i}return o.prototype.draw=function(t,i){i===void 0&&(i=!1),this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.drawShape(t,i),this.visible===!1&&this.changeVisible(!1)},o.prototype.update=function(t){var i=this,b=i.shapeFactory,D=i.shape;if(!!D){this.model=t,this.data=t.data,this.shapeType=this.getShapeType(t),this.setShapeInfo(D,t);var rt=this.getOffscreenGroup(),Mt=b.drawShape(this.shapeType,t,rt);Mt.cfg.data=this.data,Mt.cfg.origin=t,Mt.cfg.element=this,this.syncShapeStyle(D,Mt,this.getStates(),this.getAnimateCfg("update"))}},o.prototype.destroy=function(){var t=this,i=t.shapeFactory,b=t.shape;if(b){var D=this.getAnimateCfg("leave");D?Ca(b,D,{coordinate:i.coordinate,toAttrs:Object(at.a)({},b.attr())}):b.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=void 0,this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,c.prototype.destroy.call(this)},o.prototype.changeVisible=function(t){c.prototype.changeVisible.call(this,t),t?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(i){i.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(i){i.hide()}))},o.prototype.setState=function(t,i){var b=this,D=b.states,rt=b.shapeFactory,Mt=b.model,Nt=b.shape,ne=b.shapeType,ge=D.indexOf(t);if(i){if(ge>-1)return;D.push(t),(t==="active"||t==="selected")&&Nt.toFront()}else{if(ge===-1)return;D.splice(ge,1),(t==="active"||t==="selected")&&Nt.toBack()}var be=rt.drawShape(ne,Mt,this.getOffscreenGroup());D.length?this.syncShapeStyle(Nt,be,D,null):this.syncShapeStyle(Nt,be,["reset"],null),be.remove(!0);var Ae={state:t,stateStatus:i,element:this,target:this.container};this.container.emit("statechange",Ae),Object(Qr.propagationDelegate)(this.shape,"statechange",Ae)},o.prototype.clearStates=function(){var t=this,i=this.states;Object(a.each)(i,function(b){t.setState(b,!1)}),this.states=[]},o.prototype.hasState=function(t){return this.states.includes(t)},o.prototype.getStates=function(){return this.states},o.prototype.getData=function(){return this.data},o.prototype.getModel=function(){return this.model},o.prototype.getBBox=function(){var t=this,i=t.shape,b=t.labelShape,D={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return i&&(D=i.getCanvasBBox()),b&&b.forEach(function(rt){var Mt=rt.getCanvasBBox();D.x=Math.min(Mt.x,D.x),D.y=Math.min(Mt.y,D.y),D.minX=Math.min(Mt.minX,D.minX),D.minY=Math.min(Mt.minY,D.minY),D.maxX=Math.max(Mt.maxX,D.maxX),D.maxY=Math.max(Mt.maxY,D.maxY)}),D.width=D.maxX-D.minX,D.height=D.maxY-D.minY,D},o.prototype.getStatesStyle=function(){if(!this.statesStyle){var t=this,i=t.shapeType,b=t.geometry,D=t.shapeFactory,rt=b.stateOption,Mt=D.defaultShapeType,Nt=D.theme[i]||D.theme[Mt];this.statesStyle=Object(a.deepMix)({},Nt,rt)}return this.statesStyle},o.prototype.getStateStyle=function(t,i){var b=this.getStatesStyle(),D=Object(a.get)(b,[t,"style"],{}),rt=D[i]||D;return Object(a.isFunction)(rt)?rt(this):rt},o.prototype.getAnimateCfg=function(t){var i=this,b=this.animate;if(b){var D=b[t];return D&&Object(at.a)(Object(at.a)({},D),{callback:function(){var Mt;Object(a.isFunction)(D.callback)&&D.callback(),(Mt=i.geometry)===null||Mt===void 0||Mt.emit(O.AFTER_DRAW_ANIMATE)}})}return null},o.prototype.drawShape=function(t,i){var b;i===void 0&&(i=!1);var D=this,rt=D.shapeFactory,Mt=D.container,Nt=D.shapeType;if(this.shape=rt.drawShape(Nt,t,Mt),this.shape){this.setShapeInfo(this.shape,t);var ne=this.shape.cfg.name;ne?Object(a.isString)(ne)&&(this.shape.cfg.name=["element",ne]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var ge=i?"enter":"appear",be=this.getAnimateCfg(ge);be&&((b=this.geometry)===null||b===void 0||b.emit(O.BEFORE_DRAW_ANIMATE),Ca(this.shape,be,{coordinate:rt.coordinate,toAttrs:Object(at.a)({},this.shape.attr())}))}},o.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},o.prototype.setShapeInfo=function(t,i){var b=this;if(t.cfg.origin=i,t.cfg.element=this,t.isGroup()){var D=t.get("children");D.forEach(function(rt){b.setShapeInfo(rt,i)})}},o.prototype.syncShapeStyle=function(t,i,b,D,rt){var Mt=this,Nt;if(b===void 0&&(b=[]),rt===void 0&&(rt=0),!(!t||!i)){var ne=t.get("clipShape"),ge=i.get("clipShape");if(this.syncShapeStyle(ne,ge,b,D),t.isGroup())for(var be=t.get("children"),Ae=i.get("children"),Xe=0;Xe<be.length;Xe++)this.syncShapeStyle(be[Xe],Ae[Xe],b,D,rt+Xe);else{if(!Object(a.isEmpty)(b)&&!Object(a.isEqual)(b,["reset"])){var an=t.get("name");Object(a.isArray)(an)&&(an=an[1]),Object(a.each)(b,function(Yn){if(i.get("name")!==ns){var Kn=Mt.getStateStyle(Yn,an||rt);i.attr(Kn)}})}var gn=xo(t,i);this.animate?D?((Nt=this.geometry)===null||Nt===void 0||Nt.emit(O.BEFORE_DRAW_ANIMATE),Ca(t,D,{coordinate:this.shapeFactory.coordinate,toAttrs:gn,shapeModel:this.model})):Object(a.isEmpty)(b)?(t.stopAnimate(),t.animate(gn,{duration:300})):t.attr(gn):t.attr(gn)}}},o.prototype.getShapeType=function(t){var i=Object(a.get)(t,"shape");return Object(a.isArray)(i)?i[0]:i},o}(pt),ca=ba,gs={},Fa={};function ys(c){return gs[c.toLowerCase()]}function jn(c,o){gs[c.toLowerCase()]=o}function zs(c){return Fa[c.toLowerCase()]}function Wo(c,o){Fa[c.toLowerCase()]=o}var rc={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(o,t){var i=this.getShape(o);return i.getPoints?i.getPoints(t):this.getDefaultPoints(t)},getShape:function(o){var t=this[o]||this[this.defaultShapeType];return t.coordinate=this.coordinate,t},getDefaultPoints:function(){return[]},getDefaultStyle:function(o){return Object(a.get)(o,[this.defaultShapeType,"default","style"],{})},getMarker:function(o,t){var i=this.getShape(o);if(!i.getMarker){var b=this.defaultShapeType;i=this.getShape(b)}var D=this.theme,rt=Object(a.get)(D,[o,"default"],{}),Mt=i.getMarker(t);return Object(a.deepMix)({},rt,Mt)},drawShape:function(o,t,i){var b=this.getShape(o);return b.draw(t,i)}},ic={coordinate:null,parsePath:function(o){var t=this.coordinate,i=Object(R.c)(o);return t.isPolar?i=Te(t,i):i=Ze(t,i),i},parsePoint:function(o){var t=this.coordinate;return t.convert(o)},parsePoints:function(o){var t=this.coordinate;return o.map(function(i){return t.convert(i)})},draw:function(o,t){}},ms={};function oa(c,o){var t=Object(a.upperFirst)(c),i=Object(at.a)(Object(at.a)(Object(at.a)({},rc),o),{geometryType:c});return ms[t]=i,i}function fo(c,o,t){var i=Object(a.upperFirst)(c),b=ms[i],D=Object(at.a)(Object(at.a)({},ic),t);return b[o]=D,D}function bs(c){var o=Object(a.upperFirst)(c);return ms[o]}function _s(c,o,t){if(t===void 0&&(t={}),!o)return[c];var i=Object(a.groupToMap)(c,o),b=[];if(o.length===1&&t[o[0]])for(var D=t[o[0]],rt=0,Mt=D;rt<Mt.length;rt++){var Nt=Mt[rt],ne=i["_"+Nt];ne&&b.push(ne)}else for(var ge in i)if(i.hasOwnProperty(ge)){var be=i[ge];b.push(be)}return b}function Ga(c,o){return Object(a.some)(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],function(t){return!Object(a.isEqual)(c[t],o[t])})}function Ua(c){return Object(a.isArray)(c)?c:c.split("*")}function xu(c,o){var t=[];return Object(a.each)(o,function(i,b){var D=b.split(" ")[0];D===c&&t.push(i)}),t}var Ou=function(c){Object(at.b)(o,c);function o(t){var i=c.call(this,t)||this;i.type="base",i.attributes={},i.elements=[],i.elementsMap={},i.animateOption=!0,i.attributeOption={},i.lastElementsMap={},i.generatePoints=!1,i.beforeMappingData=null,i.adjusts={},i.idFields=[],i.hasSorted=!1,i.isCoordinateChanged=!1;var b=t.container,D=t.labelsContainer,rt=t.coordinate,Mt=t.data,Nt=t.sortable,ne=Nt===void 0?!1:Nt,ge=t.visible,be=ge===void 0?!0:ge,Ae=t.theme,Xe=t.scales,an=Xe===void 0?{}:Xe,gn=t.scaleDefs,Yn=gn===void 0?{}:gn,Kn=t.intervalPadding,ir=t.dodgePadding,cr=t.maxColumnWidth,Rr=t.minColumnWidth,_r=t.columnWidthRatio,zr=t.roseWidthRatio,ki=t.multiplePieWidthRatio,Ai=t.zIndexReversed;return i.container=b,i.labelsContainer=D,i.coordinate=rt,i.data=Mt,i.sortable=ne,i.visible=be,i.userTheme=Ae,i.scales=an,i.scaleDefs=Yn,i.intervalPadding=Kn,i.dodgePadding=ir,i.maxColumnWidth=cr,i.minColumnWidth=Rr,i.columnWidthRatio=_r,i.roseWidthRatio=zr,i.multiplePieWidthRatio=ki,i.zIndexReversed=Ai,i}return o.prototype.position=function(t){var i=t;Object(a.isPlainObject)(t)||(i={fields:Ua(t)});var b=Object(a.get)(i,"fields");return b.length===1&&(b.unshift("1"),Object(a.set)(i,"fields",b)),Object(a.set)(this.attributeOption,"position",i),this},o.prototype.color=function(t,i){return this.createAttrOption("color",t,i),this},o.prototype.shape=function(t,i){return this.createAttrOption("shape",t,i),this},o.prototype.size=function(t,i){return this.createAttrOption("size",t,i),this},o.prototype.adjust=function(t){var i=t;return(Object(a.isString)(t)||Object(a.isPlainObject)(t))&&(i=[t]),Object(a.each)(i,function(b,D){Object(a.isObject)(b)||(i[D]={type:b})}),this.adjustOption=i,this},o.prototype.style=function(t,i){if(Object(a.isString)(t)){var b=Ua(t);this.styleOption={fields:b,callback:i}}else{var D=t,b=D.fields,rt=D.callback,Mt=D.cfg;b||rt||Mt?this.styleOption=t:this.styleOption={cfg:t}}return this},o.prototype.tooltip=function(t,i){if(Object(a.isString)(t)){var b=Ua(t);this.tooltipOption={fields:b,callback:i}}else this.tooltipOption=t;return this},o.prototype.animate=function(t){return this.animateOption=t,this},o.prototype.label=function(t,i,b){if(Object(a.isString)(t)){var D={},rt=Ua(t);D.fields=rt,Object(a.isFunction)(i)?D.callback=i:Object(a.isPlainObject)(i)&&(D.cfg=i),b&&(D.cfg=b),this.labelOption=D}else this.labelOption=t;return this},o.prototype.state=function(t){return this.stateOption=t,this},o.prototype.customInfo=function(t){return this.customOption=t,this},o.prototype.init=function(t){t===void 0&&(t={}),this.setCfg(t),this.initAttributes(),this.processData(this.data),this.adjustScale()},o.prototype.update=function(t){t===void 0&&(t={});var i=t.data,b=t.isDataChanged,D=t.isCoordinateChanged,rt=this,Mt=rt.attributeOption,Nt=rt.lastAttributeOption;Object(a.isEqual)(Mt,Nt)?i&&(b||!Object(a.isEqual)(i,this.data))?(this.setCfg(t),this.initAttributes(),this.processData(i)):this.setCfg(t):this.init(t),this.adjustScale(),this.isCoordinateChanged=D},o.prototype.paint=function(t){var i=this;t===void 0&&(t=!1),this.animateOption&&(this.animateOption=Object(a.deepMix)({},fe(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elements=[],this.elementsMap={};var b=this.getOffscreenGroup();b.clear();for(var D=this.beforeMappingData,rt=this.beforeMapping(D),Mt=[],Nt=0,ne=rt.length;Nt<ne;Nt++){var ge=rt[Nt],be=this.mapping(ge);Mt.push(be),this.createElements(be,Nt,t)}if(this.canDoGroupAnimation(t)){var Ae=this.container,Xe=this.type,an=this.coordinate,gn=Object(a.get)(this.animateOption,"appear"),Yn=this.getYScale(),Kn=an.convert({x:0,y:Yn.scale(this.getYMinValue())});Us(Ae,gn,Xe,an,Kn)}this.labelOption&&this.renderLabels(Object(a.flatten)(Mt),t),this.dataArray=Mt,Object(a.each)(this.lastElementsMap,function(ir){ir.animate=i.animateOption,ir.destroy()}),this.lastElementsMap=this.elementsMap,this.lastAttributeOption=Object(at.a)({},this.attributeOption),this.visible===!1&&this.changeVisible(!1)},o.prototype.clear=function(){var t=this,i=t.container,b=t.geometryLabel,D=t.offscreenGroup;i&&i.clear(),b&&b.clear(),D&&D.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},o.prototype.destroy=function(){this.clear();var t=this.container;t.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,c.prototype.destroy.call(this)},o.prototype.getGroupScales=function(){return this.groupScales},o.prototype.getAttribute=function(t){return this.attributes[t]},o.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},o.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},o.prototype.getGroupAttributes=function(){var t=[];return Object(a.each)(this.attributes,function(i){j.includes(i.type)&&t.push(i)}),t},o.prototype.getDefaultValue=function(t){var i,b=this.getAttribute(t);return b&&Object(a.isEmpty)(b.scales)&&(i=b.values[0]),i},o.prototype.getAttributeValues=function(t,i){for(var b=[],D=t.scales,rt=0,Mt=D.length;rt<Mt;rt++){var Nt=D[rt],ne=Nt.field;Nt.isIdentity?b.push(Nt.values):b.push(i[ne])}return t.mapping.apply(t,b)},o.prototype.getAdjust=function(t){return this.adjusts[t]},o.prototype.getShapeMarker=function(t,i){var b=this.getShapeFactory();return b.getMarker(t,i)},o.prototype.getElementsBy=function(t){return this.elements.filter(function(i){return t(i)})},o.prototype.getElementId=function(t){t=Object(a.isArray)(t)?t[0]:t;var i=t[y];if(this.idFields.length){for(var b=i[this.idFields[0]],D=1;D<this.idFields.length;D++)b+="-"+i[this.idFields[D]];return b}var rt=this.type,Mt=this.getXScale(),Nt=this.getYScale(),ne=Mt.field||"x",ge=Nt.field||"y",be=i[ge],Ae;Mt.type==="identity"?Ae=Mt.values[0]:Ae=i[ne];var Xe;rt==="interval"||rt==="schema"?Xe=""+Ae:rt==="line"||rt==="area"||rt==="path"?Xe=rt:Xe=Ae+"-"+be;for(var an=this.groupScales,D=0,gn=an.length;D<gn;D++){var Yn=an[D],Kn=Yn.field;Xe=Xe+"-"+i[Kn]}var ir=this.getAdjust("dodge");if(ir){var cr=ir.dodgeBy;cr&&(Xe=Xe+"-"+i[cr])}return this.getAdjust("jitter")&&(Xe=Xe+"-"+t.x+"-"+t.y),Xe},o.prototype.getScaleFields=function(){var t=[],i={},b=this,D=b.attributeOption,rt=b.labelOption,Mt=b.tooltipOption;for(var Nt in D)if(D.hasOwnProperty(Nt)){var ne=D[Nt];ne.fields?Oe(ne.fields,t,i):ne.values&&Oe(ne.values,t,i)}return rt&&rt.fields&&Oe(rt.fields,t,i),Object(a.isObject)(Mt)&&Mt.fields&&Oe(Mt.fields,t,i),t},o.prototype.changeVisible=function(t){c.prototype.changeVisible.call(this,t);for(var i=this.elements,b=0,D=i.length;b<D;b++){var rt=i[b];rt.changeVisible(t)}t?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},o.prototype.getGroupFields=function(){for(var t=[],i={},b=0,D=j.length;b<D;b++){var rt=j[b],Mt=this.attributeOption[rt];Mt&&Mt.fields&&Oe(Mt.fields,t,i)}return t},o.prototype.getXYFields=function(){var t=this.attributeOption.position.fields,i=t[0],b=t[1];return[i,b]},o.prototype.getShapes=function(){return this.elements.map(function(t){return t.shape})},o.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var t=this.container.getGroupBase();this.offscreenGroup=new t({})}return this.offscreenGroup},o.prototype.sort=function(t){if(!this.hasSorted)for(var i=this.getXScale(),b=i.field,D=0;D<t.length;D++){var rt=t[D];rt.sort(function(Mt,Nt){return i.translate(Mt[y][b])-i.translate(Nt[y][b])})}this.hasSorted=!0},o.prototype.adjustScale=function(){var t=this.getYScale();t&&this.getAdjust("stack")&&this.updateStackRange(t,this.beforeMappingData)},o.prototype.getShapeFactory=function(){var t=this.shapeType;if(!!bs(t))return this.shapeFactory||(this.shapeFactory=Object(a.clone)(bs(t))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[t]||{},this.shapeFactory},o.prototype.createShapePointsCfg=function(t){var i=this.getXScale(),b=this.getYScale(),D=this.normalizeValues(t[i.field],i),rt;return b?rt=this.normalizeValues(t[b.field],b):rt=t.y?t.y:.1,{x:D,y:rt,y0:b?b.scale(this.getYMinValue()):void 0}},o.prototype.createElement=function(t,i){i===void 0&&(i=!1);var b=this.container,D=this.getDrawCfg(t),rt=this.getShapeFactory(),Mt=new ca({shapeFactory:rt,container:b,offscreenGroup:this.getOffscreenGroup()});return Mt.animate=this.animateOption,Mt.geometry=this,Mt.draw(D,i),Mt},o.prototype.getDrawCfg=function(t){var i=t[y],b={mappingData:t,data:i,x:t.x,y:t.y,color:t.color,size:t.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},D=t.shape;!D&&this.getShapeFactory()&&(D=this.getShapeFactory().defaultShapeType),b.shape=D;var rt=this.theme.geometries[this.shapeType];b.defaultStyle=Object(a.get)(rt,[D,"default"],{}).style,!b.defaultStyle&&this.getShapeFactory()&&(b.defaultStyle=this.getShapeFactory().getDefaultStyle(rt));var Mt=this.styleOption;return Mt&&(b.style=this.getStyleCfg(Mt,i)),this.generatePoints&&(b.points=t.points,b.nextPoints=t.nextPoints),b},o.prototype.createElements=function(t,i,b){b===void 0&&(b=!1);for(var D=this,rt=D.lastElementsMap,Mt=D.elementsMap,Nt=D.elements,ne=0,ge=t.length;ne<ge;ne++){var be=t[ne],Ae=this.getElementId(be);Mt[Ae]&&(Ae=Ae+"-"+i+"-"+ne);var Xe=rt[Ae];if(!Xe)Xe=this.createElement(be,b);else{var an=this.getDrawCfg(be),gn=Xe.getModel();(this.isCoordinateChanged||Ga(an,gn))&&(Xe.animate=this.animateOption,Xe.update(an)),delete rt[Ae]}Nt.push(Xe),Mt[Ae]=Xe}if(this.zIndexReversed){var Yn=Nt.length;Nt.forEach(function(Kn,ir){Kn.shape.setZIndex(Yn-ir)})}return Nt},o.prototype.getLabelType=function(){var t=this,i=t.labelOption,b=t.coordinate,D=t.type,rt=b.type,Mt=b.isTransposed,Nt=Object(a.get)(i,["cfg","type"]);return Nt||(rt==="polar"?Nt=Mt?"pie":"polar":rt==="theta"?Nt="pie":D==="interval"||D==="polygon"?Nt="interval":Nt="base"),Nt},o.prototype.getYMinValue=function(){var t=this.getYScale(),i=t.min,b=t.max,D;return i>=0?D=i:b<=0?D=b:D=0,D},o.prototype.createAttrOption=function(t,i,b){if(Object(a.isNil)(i)||Object(a.isObject)(i))Object(a.isObject)(i)&&Object(a.isEqual)(Object.keys(i),["values"])?Object(a.set)(this.attributeOption,t,{fields:i.values}):Object(a.set)(this.attributeOption,t,i);else{var D={};Object(a.isNumber)(i)?D.values=[i]:D.fields=Ua(i),b&&(Object(a.isFunction)(b)?D.callback=b:D.values=b),Object(a.set)(this.attributeOption,t,D)}},o.prototype.initAttributes=function(){var t=this,i=this,b=i.attributes,D=i.attributeOption,rt=i.theme,Mt=i.shapeType;this.groupScales=[];var Nt={},ne=function(Xe){if(D.hasOwnProperty(Xe)){var an=D[Xe];if(!an)return{value:void 0};var gn=Object(at.a)({},an),Yn=gn.callback,Kn=gn.values,ir=gn.fields,cr=ir===void 0?[]:ir,Rr=cr.map(function(zr){var ki=t.scales[zr];return ki.isCategory&&!Nt[zr]&&j.includes(Xe)&&(t.groupScales.push(ki),Nt[zr]=!0),ki});gn.scales=Rr,Xe!=="position"&&Rr.length===1&&Rr[0].type==="identity"?gn.values=Rr[0].values:!Yn&&!Kn&&(Xe==="size"?gn.values=rt.sizes:Xe==="shape"?gn.values=rt.shapes[Mt]||[]:Xe==="color"&&(Rr.length?gn.values=Rr[0].values.length<=10?rt.colors10:rt.colors20:gn.values=rt.colors10));var _r=Ve(Xe);b[Xe]=new _r(gn)}};for(var ge in D){var be=ne(ge);if(typeof be=="object")return be.value}},o.prototype.processData=function(t){this.hasSorted=!1;for(var i=this.getAttribute("position").scales,b=i.filter(function(_r){return _r.isCategory}),D=this.groupData(t),rt=[],Mt=0,Nt=D.length;Mt<Nt;Mt++){for(var ne=D[Mt],ge=[],be=0,Ae=ne.length;be<Ae;be++){var Xe=ne[be],an={};for(var gn in Xe)an[gn]=Xe[gn];an[y]=Xe;for(var Yn=0,Kn=b;Yn<Kn.length;Yn++){var ir=Kn[Yn],cr=ir.field;an[cr]=ir.translate(an[cr])}ge.push(an)}rt.push(ge)}var Rr=this.adjustData(rt);return this.beforeMappingData=Rr,Rr},o.prototype.adjustData=function(t){var i=this.adjustOption,b=this,D=b.intervalPadding,rt=b.dodgePadding,Mt=b.theme,Nt=this.maxColumnWidth||Mt.maxColumnWidth,ne=this.minColumnWidth||Mt.minColumnWidth,ge=this.columnWidthRatio||Mt.columnWidthRatio,be=t;if(i){var Ae=this.getXScale(),Xe=this.getYScale(),an=Ae.field,gn=Xe?Xe.field:null,Yn=Hn(this.coordinate),Kn=Ae.values.length,ir=this.getAttribute("size"),cr=void 0;ir&&(cr=ir.values[0]);for(var Rr=0,_r=i.length;Rr<_r;Rr++){var zr=i[Rr],ki=Object(at.a)({xField:an,yField:gn,intervalPadding:D,dodgePadding:rt,xDimensionLength:Yn,groupNum:Kn,defaultSize:cr,maxColumnWidth:Nt,minColumnWidth:ne,columnWidthRatio:ge},zr),Ai=zr.type;if(Ai==="dodge"){var mi=[];if(Ae.isCategory||Ae.type==="identity")mi.push("x");else if(!Xe)mi.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");ki.adjustNames=mi,ki.dodgeRatio=ge}else if(Ai==="stack"){var Ki=this.coordinate;if(!Xe){ki.height=Ki.getHeight();var vo=this.getDefaultValue("size")||3;ki.size=vo}!Ki.isTransposed&&Object(a.isNil)(ki.reverseOrder)&&(ki.reverseOrder=!0)}var po=Object(Ot.getAdjust)(Ai),yo=new po(ki);be=yo.process(be),this.adjusts[Ai]=yo}}return be},o.prototype.groupData=function(t){for(var i=this.getGroupScales(),b=this.scaleDefs,D={},rt=[],Mt=0;Mt<i.length;Mt++){var Nt=i[Mt],ne=Nt.field;rt.push(ne),Object(a.get)(b,[ne,"values"])&&(D[ne]=b[ne].values)}return _s(t,rt,D)},o.prototype.updateStackRange=function(t,i){for(var b=Object(a.flatten)(i),D=t.field,rt=t.min,Mt=t.max,Nt=0;Nt<b.length;Nt++){var ne=b[Nt],ge=Math.min.apply(null,ne[D]),be=Math.max.apply(null,ne[D]);ge<rt&&(rt=ge),be>Mt&&(Mt=be)}var Ae=this.scaleDefs,Xe={};rt<t.min&&!Object(a.get)(Ae,[D,"min"])&&(Xe.min=rt),Mt>t.max&&!Object(a.get)(Ae,[D,"max"])&&(Xe.max=Mt),t.change(Xe)},o.prototype.beforeMapping=function(t){var i=t;if(this.sortable&&this.sort(i),this.generatePoints)for(var b=0,D=i.length;b<D;b++){var rt=i[b];this.generateShapePoints(rt);var Mt=i[b+1];Mt&&(this.generateShapePoints(Mt),rt[0].nextPoints=Mt[0].points)}return i},o.prototype.generateShapePoints=function(t){for(var i=this.getShapeFactory(),b=this.getAttribute("shape"),D=0;D<t.length;D++){var rt=t[D],Mt=this.createShapePointsCfg(rt),Nt=b?this.getAttributeValues(b,rt):null,ne=i.getShapePoints(Nt,Mt);rt.points=ne}},o.prototype.normalizeValues=function(t,i){var b=[];if(Object(a.isArray)(t))for(var D=0;D<t.length;D++){var rt=t[D];b.push(i.scale(rt))}else b=i.scale(t);return b},o.prototype.mapping=function(t){for(var i=this.attributes,b=[],D=0;D<t.length;D++){var rt=t[D],Mt={_origin:rt[y],points:rt.points,nextPoints:rt.nextPoints};for(var Nt in i)if(i.hasOwnProperty(Nt)){var ne=i[Nt],ge=ne.names,be=this.getAttributeValues(ne,rt);if(ge.length>1)for(var Ae=0;Ae<be.length;Ae+=1){var Xe=be[Ae],an=ge[Ae];Mt[an]=Object(a.isArray)(Xe)&&Xe.length===1?Xe[0]:Xe}else Mt[ge[0]]=be.length===1?be[0]:be}this.convertPoint(Mt),b.push(Mt)}return b},o.prototype.convertPoint=function(t){var i=t.x,b=t.y,D,rt,Mt,Nt=this.coordinate;if(Object(a.isArray)(i)&&Object(a.isArray)(b)){D=[],rt=[];for(var ne=0,ge=0,be=i.length,Ae=b.length;ne<be&&ge<Ae;ne+=1,ge+=1)Mt=Nt.convert({x:i[ne],y:b[ge]}),D.push(Mt.x),rt.push(Mt.y)}else if(Object(a.isArray)(b)){rt=[];for(var Xe=0;Xe<b.length;Xe++){var an=b[Xe];Mt=Nt.convert({x:i,y:an}),D&&D!==Mt.x?(Object(a.isArray)(D)||(D=[D]),D.push(Mt.x)):D=Mt.x,rt.push(Mt.y)}}else if(Object(a.isArray)(i)){D=[];for(var Xe=0;Xe<i.length;Xe++){var gn=i[Xe];Mt=Nt.convert({x:gn,y:b}),rt&&rt!==Mt.y?(Object(a.isArray)(rt)||(rt=[rt]),rt.push(Mt.y)):rt=Mt.y,D.push(Mt.x)}}else{var Yn=Nt.convert({x:i,y:b});D=Yn.x,rt=Yn.y}t.x=D,t.y=rt},o.prototype.getStyleCfg=function(t,i){var b=t.fields,D=b===void 0?[]:b,rt=t.callback,Mt=t.cfg;if(Mt)return Mt;var Nt=D.map(function(ne){return i[ne]});return rt.apply(void 0,Nt)},o.prototype.setCfg=function(t){var i=this,b=t.coordinate,D=t.data,rt=t.theme,Mt=t.scaleDefs;b&&(this.coordinate=b),D&&(this.data=D),Mt&&(this.scaleDefs=Mt,this.idFields=[],Object(a.each)(Mt,function(Nt,ne){Nt&&Nt.key&&i.idFields.push(ne)})),rt&&(this.theme=this.userTheme?Object(a.deepMix)({},rt,this.userTheme):rt)},o.prototype.renderLabels=function(t,i){i===void 0&&(i=!1);var b=this.geometryLabel;if(!b){var D=this.getLabelType(),rt=ys(D);b=new rt(this),this.geometryLabel=b}b.render(t,i);var Mt=b.labelsRenderer.shapesMap;Object(a.each)(this.elementsMap,function(Nt,ne){var ge=xu(ne,Mt);if(ge.length){Nt.labelShape=ge;for(var be=0;be<ge.length;be++)for(var Ae=ge[be],Xe=Ae.getChildren(),an=0;an<Xe.length;an++){var gn=Xe[an];gn.cfg.name=["element","label"],gn.cfg.element=Nt}}})},o.prototype.canDoGroupAnimation=function(t){return!t&&this.animateOption&&(Object(a.get)(this.animateOption,"appear")===void 0||Object(a.get)(this.animateOption,"appear")&&Object(a.get)(this.animateOption,["appear","animation"])===void 0)},o}(pt),la=Ou,rs=jr.a.transform;function Ta(c,o,t){var i=rs(c.getMatrix(),[["t",o,t]]);c.setMatrix(i)}function Vs(c,o){var t=c.attr(),i=t.x,b=t.y,D=rs(c.getMatrix(),[["t",-i,-b],["r",o],["t",i,b]]);return D}function kt(c,o){var t=Vs(c,o);c.setMatrix(t)}function f(){return[1,0,0,0,1,0,0,0,1]}function u(c,o){var t=c.getBBox(),i=(t.minX+t.maxX)/2,b=(t.minY+t.maxY)/2;c.applyToMatrix([i,b,1]);var D=rs(c.getMatrix(),[["t",-i,-b],["s",o,o],["t",i,b]]);c.setMatrix(D)}function I(c){return c.find(function(o){return o.get("type")==="text"})}function W(c,o,t){t===void 0&&(t=[0,0,0,0]);var i=c.getChildren()[0];if(i){var b=i.clone();(o==null?void 0:o.rotate)&&kt(b,-o.rotate);var D=b.getCanvasBBox(),rt=D.x,Mt=D.y,Nt=D.width,ne=D.height;b.destroy();var ge=t;return Object(a.isNil)(ge)?ge=[2,2,2,2]:Object(a.isNumber)(ge)&&(ge=new Array(4).fill(ge)),{x:rt-ge[3],y:Mt-ge[0],width:Nt+ge[1]+ge[3],height:ne+ge[0]+ge[2],rotation:(o==null?void 0:o.rotate)||0}}}function st(c,o,t){t===void 0&&(t=0);var i=Math.max(0,Math.min(c.x+c.width+t,o.x+o.width+t)-Math.max(c.x-t,o.x-t)),b=Math.max(0,Math.min(c.y+c.height+t,o.y+o.height+t)-Math.max(c.y-t,o.y-t));return i*b}function jt(c,o){var t=c.getBBox();return Object(a.some)(o,function(i){var b=i.getBBox();return st(t,b,2)>0})}function Gt(c,o,t){var i=t.data,b=t.origin,D=t.animateCfg,rt=t.coordinate,Mt=Object(a.get)(D,"update");c.set("data",i),c.set("origin",b),c.set("animateCfg",D),c.set("coordinate",rt),c.set("visible",o.get("visible")),c.getChildren().forEach(function(Nt,ne){var ge=o.getChildByIndex(ne);if(!ge)c.removeChild(Nt),Nt.remove(!0);else{Nt.set("data",i),Nt.set("origin",b),Nt.set("animateCfg",D),Nt.set("coordinate",rt);var be=xo(Nt,ge);Mt?Ca(Nt,Mt,{toAttrs:be,coordinate:rt}):Nt.attr(be),ge.isGroup()&&Gt(Nt,ge,t)}}),Object(a.each)(o.getChildren(),function(Nt,ne){ne>=c.getCount()&&(Nt.destroyed||c.add(Nt))})}var Ht=function(){function c(o){this.shapesMap={},this.lastShapesMap={};var t=o.layout,i=o.container;this.layout=t,this.container=i}return c.prototype.render=function(o,t,i){var b=this;i===void 0&&(i=!1),this.shapesMap={};var D=this.container,rt=this.createOffscreenGroup();if(o.length){for(var Mt=0,Nt=o;Mt<Nt.length;Mt++){var ne=Nt[Mt];ne&&this.renderLabel(ne,rt)}this.doLayout(o,t),this.renderLabelLine(o),this.renderLabelBackground(o),this.adjustLabel(o)}var ge=this.lastShapesMap,be=this.shapesMap;Object(a.each)(be,function(Ae,Xe){if(Ae.destroyed)delete be[Xe];else{if(ge[Xe]){var an=Ae.get("data"),gn=Ae.get("origin"),Yn=Ae.get("coordinate"),Kn=Ae.get("animateCfg"),ir=ge[Xe];Gt(ir,be[Xe],{data:an,origin:gn,animateCfg:Kn,coordinate:Yn}),b.shapesMap[Xe]=ir}else{D.add(Ae);var cr=Object(a.get)(Ae.get("animateCfg"),i?"enter":"appear");cr&&Ca(Ae,cr,{toAttrs:Object(at.a)({},Ae.attr()),coordinate:Ae.get("coordinate")})}delete ge[Xe]}}),Object(a.each)(ge,function(Ae){var Xe=Object(a.get)(Ae.get("animateCfg"),"leave");Xe?Ca(Ae,Xe,{toAttrs:null,coordinate:Ae.get("coordinate")}):Ae.remove(!0)}),this.lastShapesMap=be,rt.destroy()},c.prototype.clear=function(){this.container.clear(),this.shapesMap={},this.lastShapesMap={}},c.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null,this.lastShapesMap=null},c.prototype.renderLabel=function(o,t){var i=o.id,b=o.elementId,D=o.data,rt=o.mappingData,Mt=o.coordinate,Nt=o.animate,ne=o.content,ge={id:i,elementId:b,data:D,origin:Object(at.a)(Object(at.a)({},rt),{data:rt[y]}),coordinate:Mt},be=t.addGroup(Object(at.a)({name:"label",animateCfg:this.animate===!1||Nt===null||Nt===!1?!1:Object(a.deepMix)({},this.animate,Nt)},ge)),Ae;if(ne.isGroup&&ne.isGroup()||ne.isShape&&ne.isShape()){var Xe=ne.getCanvasBBox(),an=Xe.width,gn=Xe.height,Yn=Object(a.get)(o,"textAlign","left"),Kn=o.x,ir=o.y-gn/2;Yn==="center"?Kn=Kn-an/2:(Yn==="right"||Yn==="end")&&(Kn=Kn-an),Ta(ne,Kn,ir),Ae=ne,be.add(ne)}else{var cr=Object(a.get)(o,["style","fill"]);Ae=be.addShape("text",Object(at.a)({attrs:Object(at.a)(Object(at.a)({x:o.x,y:o.y,textAlign:o.textAlign,textBaseline:Object(a.get)(o,"textBaseline","middle"),text:o.content},o.style),{fill:Object(a.isNull)(cr)?o.color:cr})},ge))}o.rotate&&kt(Ae,o.rotate),this.shapesMap[i]=be},c.prototype.doLayout=function(o,t){var i=this;if(this.layout){var b=Object(a.isArray)(this.layout)?this.layout:[this.layout];Object(a.each)(b,function(D){var rt=zs(Object(a.get)(D,"type",""));if(rt){var Mt=[],Nt=[];Object(a.each)(i.shapesMap,function(ne,ge){Mt.push(ne),Nt.push(t[ne.get("elementId")])}),rt(o,Mt,Nt,i.region,D.cfg)}})}},c.prototype.renderLabelLine=function(o){var t=this;Object(a.each)(o,function(i){var b=Object(a.get)(i,"coordinate");if(!(!i||!b)){var D=b.getCenter(),rt=b.getRadius();if(!!i.labelLine){var Mt=Object(a.get)(i,"labelLine",{}),Nt=i.id,ne=Mt.path;if(!ne){var ge=Pi(D.x,D.y,rt,i.angle);ne=[["M",ge.x,ge.y],["L",i.x,i.y]]}var be=t.shapesMap[Nt];be.destroyed||be.addShape("path",{capture:!1,attrs:Object(at.a)({path:ne,stroke:i.color?i.color:Object(a.get)(i,["style","fill"],"#000"),fill:null},Mt.style),id:Nt,origin:i.mappingData,data:i.data,coordinate:i.coordinate})}}})},c.prototype.renderLabelBackground=function(o){var t=this;Object(a.each)(o,function(i){var b=Object(a.get)(i,"coordinate"),D=Object(a.get)(i,"background");if(!(!D||!b)){var rt=i.id,Mt=t.shapesMap[rt];if(!Mt.destroyed){var Nt=Mt.getChildren()[0];if(Nt){var ne=W(Mt,i,D.padding),ge=ne.rotation,be=Object(at.c)(ne,["rotation"]),Ae=Mt.addShape("rect",{attrs:Object(at.a)(Object(at.a)({},be),D.style||{}),id:rt,origin:i.mappingData,data:i.data,coordinate:i.coordinate});if(Ae.setZIndex(-1),ge){var Xe=Nt.getMatrix();Ae.setMatrix(Xe)}}}}})},c.prototype.createOffscreenGroup=function(){var o=this.container,t=o.getGroupBase(),i=new t({});return i},c.prototype.adjustLabel=function(o){var t=this;Object(a.each)(o,function(i){if(i){var b=i.id,D=t.shapesMap[b];if(!D.destroyed){var rt=D.findAll(function(Mt){return Mt.get("type")!=="path"});Object(a.each)(rt,function(Mt){Mt&&(i.offsetX&&Mt.attr("x",Mt.attr("x")+i.offsetX),i.offsetY&&Mt.attr("y",Mt.attr("y")+i.offsetY))})}}})},c}(),ee=Ht;function ae(c){var o=0;return Object(a.each)(c,function(t){o+=t}),o/c.length}var je=function(){function c(o){this.geometry=o}return c.prototype.getLabelItems=function(o){var t=this,i=[],b=this.getLabelCfgs(o);return Object(a.each)(o,function(D,rt){var Mt=b[rt];if(!Mt||Object(a.isNil)(D.x)||Object(a.isNil)(D.y)){i.push(null);return}var Nt=Object(a.isArray)(Mt.content)?Mt.content:[Mt.content];Mt.content=Nt;var ne=Nt.length;Object(a.each)(Nt,function(ge,be){if(Object(a.isNil)(ge)||ge===""){i.push(null);return}var Ae=Object(at.a)(Object(at.a)({},Mt),t.getLabelPoint(Mt,D,be));Ae.textAlign||(Ae.textAlign=t.getLabelAlign(Ae,be,ne)),Ae.offset<=0&&(Ae.labelLine=null),i.push(Ae)})}),i},c.prototype.render=function(o,t){t===void 0&&(t=!1);var i=this.getLabelItems(o),b=this.getLabelsRenderer(),D=this.getGeometryShapes();b.render(i,D,t)},c.prototype.clear=function(){var o=this.labelsRenderer;o&&o.clear()},c.prototype.destroy=function(){var o=this.labelsRenderer;o&&o.destroy(),this.labelsRenderer=null},c.prototype.getCoordinate=function(){return this.geometry.coordinate},c.prototype.getDefaultLabelCfg=function(o,t){var i=this.geometry,b=i.type,D=i.theme;return b==="polygon"||b==="interval"&&t==="middle"||o<0&&!["line","point","path"].includes(b)?Object(a.get)(D,"innerLabels",{}):Object(a.get)(D,"labels",{})},c.prototype.getThemedLabelCfg=function(o){var t=this.geometry,i=this.getDefaultLabelCfg(),b=t.type,D=t.theme,rt;return b==="polygon"||o.offset<0&&!["line","point","path"].includes(b)?rt=Object(a.deepMix)({},i,D.innerLabels,o):rt=Object(a.deepMix)({},i,D.labels,o),rt},c.prototype.setLabelPosition=function(o,t,i,b){},c.prototype.getLabelOffset=function(o){var t=this.getCoordinate(),i=this.getOffsetVector(o);return t.isTransposed?i[0]:i[1]},c.prototype.getLabelOffsetPoint=function(o,t,i){var b=o.offset,D=this.getCoordinate(),rt=D.isTransposed,Mt=rt?"x":"y",Nt=rt?1:-1,ne={x:0,y:0};return t>0||i===1?ne[Mt]=b*Nt:ne[Mt]=b*Nt*-1,ne},c.prototype.getLabelPoint=function(o,t,i){var b=this.getCoordinate(),D=o.content.length;function rt(Yn,Kn,ir){ir===void 0&&(ir=!1);var cr=Yn;return Object(a.isArray)(cr)&&(o.content.length===1?ir?cr=ae(cr):cr.length<=2?cr=cr[Yn.length-1]:cr=ae(cr):cr=cr[Kn]),cr}var Mt={content:o.content[i],x:0,y:0,start:{x:0,y:0},color:"#fff"},Nt=Object(a.isArray)(t.shape)?t.shape[0]:t.shape,ne=Nt==="funnel"||Nt==="pyramid";if(this.geometry.type==="polygon"){var ge=uo(t.x,t.y);Mt.x=ge[0],Mt.y=ge[1]}else this.geometry.type==="interval"&&!ne?(Mt.x=rt(t.x,i,!0),Mt.y=rt(t.y,i)):(Mt.x=rt(t.x,i),Mt.y=rt(t.y,i));if(ne){var be=Object(a.get)(t,"nextPoints"),Ae=Object(a.get)(t,"points");if(be){var Xe=b.convert(Ae[1]),an=b.convert(be[1]);Mt.x=(Xe.x+an.x)/2,Mt.y=(Xe.y+an.y)/2}else if(Nt==="pyramid"){var Xe=b.convert(Ae[1]),an=b.convert(Ae[2]);Mt.x=(Xe.x+an.x)/2,Mt.y=(Xe.y+an.y)/2}}o.position&&this.setLabelPosition(Mt,t,i,o.position);var gn=this.getLabelOffsetPoint(o,i,D);return Mt.start={x:Mt.x,y:Mt.y},Mt.x+=gn.x,Mt.y+=gn.y,Mt.color=t.color,Mt},c.prototype.getLabelAlign=function(o,t,i){var b="center",D=this.getCoordinate();if(D.isTransposed){var rt=o.offset;rt<0?b="right":rt===0?b="center":b="left",i>1&&t===0&&(b==="right"?b="left":b==="left"&&(b="right"))}return b},c.prototype.getLabelId=function(o){var t=this.geometry,i=t.type,b=t.getXScale(),D=t.getYScale(),rt=o[y],Mt=t.getElementId(o);return i==="line"||i==="area"?Mt+=" "+rt[b.field]:i==="path"&&(Mt+=" "+rt[b.field]+"-"+rt[D.field]),Mt},c.prototype.getLabelsRenderer=function(){var o=this.geometry,t=o.labelsContainer,i=o.labelOption,b=o.canvasRegion,D=o.animateOption,rt=this.geometry.coordinate,Mt=this.labelsRenderer;return Mt||(Mt=new ee({container:t,layout:Object(a.get)(i,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=Mt),Mt.region=b,Mt.animate=D?fe("label",rt):!1,Mt},c.prototype.getLabelCfgs=function(o){var t=this,i=this.geometry,b=i.labelOption,D=i.scales,rt=i.coordinate,Mt=b,Nt=Mt.fields,ne=Mt.callback,ge=Mt.cfg,be=Nt.map(function(Xe){return D[Xe]}),Ae=[];return Object(a.each)(o,function(Xe,an){var gn=Xe[y],Yn=t.getLabelText(gn,be),Kn;if(ne){var ir=Nt.map(function(ki){return gn[ki]});if(Kn=ne.apply(void 0,ir),Object(a.isNil)(Kn)){Ae.push(null);return}}var cr=Object(at.a)(Object(at.a)({id:t.getLabelId(Xe),elementId:t.geometry.getElementId(Xe),data:gn,mappingData:Xe,coordinate:rt},ge),Kn);Object(a.isFunction)(cr.position)&&(cr.position=cr.position(gn,Xe,an));var Rr=t.getLabelOffset(cr.offset||0),_r=t.getDefaultLabelCfg(Rr,cr.position);cr=Object(a.deepMix)({},_r,cr),cr.offset=t.getLabelOffset(cr.offset||0);var zr=cr.content;Object(a.isFunction)(zr)?cr.content=zr(gn,Xe,an):Object(a.isUndefined)(zr)&&(cr.content=Yn[0]),Ae.push(cr)}),Ae},c.prototype.getLabelText=function(o,t){var i=[];return Object(a.each)(t,function(b){var D=o[b.field];Object(a.isArray)(D)?D=D.map(function(rt){return b.getText(rt)}):D=b.getText(D),Object(a.isNil)(D)||D===""?i.push(null):i.push(D)}),i},c.prototype.getOffsetVector=function(o){o===void 0&&(o=0);var t=this.getCoordinate(),i=0;return Object(a.isNumber)(o)&&(i=o),t.isTransposed?t.applyMatrix(i,0):t.applyMatrix(0,i)},c.prototype.getGeometryShapes=function(){var o=this.geometry,t={};return Object(a.each)(o.elementsMap,function(i,b){t[b]=i.shape}),Object(a.each)(o.getOffscreenGroup().getChildren(),function(i){var b=o.getElementId(i.get("origin").mappingData);t[b]=i}),t},c}(),Fe=je,Ue=z("WXeg");function Ke(c,o,t){if(!c)return t;var i;if(c.callback&&c.callback.length>1){var b=Array(c.callback.length-1).fill("");i=c.mapping.apply(c,Object(at.d)([o],b)).join("")}else i=c.mapping(o).join("");return i||t}var bn={hexagon:function(o,t,i){var b=i/2*Math.sqrt(3);return[["M",o,t-i],["L",o+b,t-i/2],["L",o+b,t+i/2],["L",o,t+i],["L",o-b,t+i/2],["L",o-b,t-i/2],["Z"]]},bowtie:function(o,t,i){var b=i-1.5;return[["M",o-i,t-b],["L",o+i,t+b],["L",o+i,t-b],["L",o-i,t+b],["Z"]]},cross:function(o,t,i){return[["M",o-i,t-i],["L",o+i,t+i],["M",o+i,t-i],["L",o-i,t+i]]},tick:function(o,t,i){return[["M",o-i/2,t-i],["L",o+i/2,t-i],["M",o,t-i],["L",o,t+i],["M",o-i/2,t+i],["L",o+i/2,t+i]]},plus:function(o,t,i){return[["M",o-i,t],["L",o+i,t],["M",o,t-i],["L",o,t+i]]},hyphen:function(o,t,i){return[["M",o-i,t],["L",o+i,t]]},line:function(o,t,i){return[["M",o,t-i],["L",o,t+i]]}},wn=["line","cross","tick","plus","hyphen"];function Nn(c,o){var t=c.symbol;Object(a.isString)(t)&&wn.indexOf(t)!==-1&&(c.style=Object(a.deepMix)({},c.style,{lineWidth:1,stroke:o,fill:null}))}function Bn(c){var o=c.symbol;Object(a.isString)(o)&&bn[o]&&(c.symbol=bn[o])}function Fn(c){return c.startsWith(e.LEFT)||c.startsWith(e.RIGHT)?"vertical":"horizontal"}function sr(c,o,t,i,b){var D=t.getScale(t.type);if(D.isCategory){var rt=D.field,Mt=o.getAttribute("color"),Nt=o.getAttribute("shape"),ne=c.getTheme().defaultColor,ge=o.coordinate.isPolar;return D.getTicks().map(function(be){var Ae,Xe=be.text,an=be.value,gn=Xe,Yn=D.invert(an),Kn=c.filterFieldData(rt,[(Ae={},Ae[rt]=Yn,Ae)]).length===0;Object(a.each)(c.views,function(_r){var zr;_r.filterFieldData(rt,[(zr={},zr[rt]=Yn,zr)]).length||(Kn=!0)});var ir=Ke(Mt,Yn,ne),cr=Ke(Nt,Yn,"point"),Rr=o.getShapeMarker(cr,{color:ir,isInPolar:ge});return Rr=Object(a.deepMix)({},i,Rr,b),Nn(Rr,ir),Bn(Rr),{id:Yn,name:gn,value:Yn,marker:Rr,unchecked:Kn}})}return[]}function ur(c,o,t){return t.map(function(i){var b=Object(a.deepMix)({},c,o,i.marker);return Bn(b),i.marker=b,i})}var Or="4.1.9",ei={getLegendItems:sr,translate:Ta,rotate:kt,zoom:u,transform:rs,getAngle:ao,getSectorPath:no,polarToCartesian:Pi,getDelegationObject:Zt,getTooltipItems:ia},Ci={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},kr={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},yi=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],oo=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],so=function(o){o===void 0&&(o={});var t=o.backgroundColor,i=t===void 0?"#141414":t,b=o.paletteQualitative10,D=b===void 0?yi:b,rt=o.paletteQualitative20,Mt=rt===void 0?oo:rt,Nt=o.paletteSemanticRed,ne=Nt===void 0?"#F4664A":Nt,ge=o.paletteSemanticGreen,be=ge===void 0?"#30BF78":ge,Ae=o.paletteSemanticYellow,Xe=Ae===void 0?"#FAAD14":Ae,an=o.fontFamily,gn=an===void 0?`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`:an,Yn=o.brandColor,Kn=Yn===void 0?D[0]:Yn;return{backgroundColor:i,brandColor:Kn,paletteQualitative10:D,paletteQualitative20:Mt,paletteSemanticRed:ne,paletteSemanticGreen:be,paletteSemanticYellow:Xe,fontFamily:gn,axisLineBorderColor:kr[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:kr[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:kr[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:kr[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:kr[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:kr[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:kr[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:yi[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:kr[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],sliderRailFillColor:kr[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:kr[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:Ci[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:Ci[25],annotationArcBorderColor:kr[15],annotationArcBorder:1,annotationLineBorderColor:kr[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:kr[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:kr[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:kr[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:kr[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:kr[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Ci[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:kr[65],overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:Ci[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:kr[25],pointFillColor:yi[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Ci[100],pointBorderOpacity:1,pointActiveBorderColor:kr[100],pointSelectedBorder:2,pointSelectedBorderColor:kr[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:yi[0],hollowPointBorderOpacity:.95,hollowPointFillColor:Ci[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:kr[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:kr[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:yi[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:yi[0],areaFillOpacity:.25,areaActiveFillColor:yi[0],areaActiveFillOpacity:.5,areaSelectedFillColor:yi[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:yi[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:kr[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:kr[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:yi[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:kr[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:kr[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:yi[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Ci[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:kr[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:kr[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}},co=so(),lo=z("U8jP"),Hi=z("v7Ed");function Io(c){return c?!1:c==null||isNaN(c)}function ko(c){if(Object(a.isArray)(c))return Io(c[1].y);var o=c.y;return Object(a.isArray)(o)?Io(o[0]):Io(o)}function Ro(c,o,t){if(o===void 0&&(o=!1),t===void 0&&(t=!0),!c.length||c.length===1&&!t)return[];if(o){for(var i=[],b=0,D=c.length;b<D;b++){var rt=c[b];ko(rt)||i.push(rt)}return[i]}for(var Mt=[],Nt=[],b=0,D=c.length;b<D;b++){var rt=c[b];ko(rt)?Nt.length&&(Nt.length===1&&!t||Mt.push(Nt),Nt=[]):Nt.push(rt)}return Nt.length&&Mt.push(Nt),Mt}function bo(c,o,t,i){i===void 0&&(i="");var b=c.style,D=b===void 0?{}:b,rt=c.defaultStyle,Mt=c.color,Nt=c.size,ne=Object(at.a)(Object(at.a)({},rt),D);return Mt&&(o&&(D.stroke||(ne.stroke=Mt)),t&&(D.fill||(ne.fill=Mt))),i&&Object(a.isNil)(D[i])&&!Object(a.isNil)(Nt)&&(ne[i]=Nt),ne}function jo(c){return Object(a.deepMix)({},{fill:"#CCD6EC",fillOpacity:.3},Object(a.get)(c,["background","style"]))}function ho(c){var o=c.x,t=Object(a.isArray)(c.y)?c.y:[c.y];return t.map(function(i,b){return{x:Object(a.isArray)(o)?o[b]:o,y:i}})}var fa={line:function(o,t,i){return[["M",o-i,t],["L",o+i,t]]},dot:function(o,t,i){return[["M",o-i,t],["L",o+i,t]]},dash:function(o,t,i){return[["M",o-i,t],["L",o+i,t]]},smooth:function(o,t,i){return[["M",o-i,t],["A",i/2,i/2,0,1,1,o,t],["A",i/2,i/2,0,1,0,o+i,t]]},hv:function(o,t,i){return[["M",o-i-1,t-2.5],["L",o,t-2.5],["L",o,t+2.5],["L",o+i+1,t+2.5]]},vh:function(o,t,i){return[["M",o-i-1,t+2.5],["L",o,t+2.5],["L",o,t-2.5],["L",o+i+1,t-2.5]]},hvh:function(o,t,i){return[["M",o-(i+1),t+2.5],["L",o-i/2,t+2.5],["L",o-i/2,t-2.5],["L",o+i/2,t-2.5],["L",o+i/2,t+2.5],["L",o+i+1,t+2.5]]},vhv:function(o,t){return[["M",o-5,t+2.5],["L",o-5,t],["L",o,t],["L",o,t-3],["L",o,t+3],["L",o+6.5,t+3]]}};function Zo(c,o){var t=c.color;return{symbol:fa[o],style:{lineWidth:2,r:6,stroke:t}}}function Hc(c,o,t){for(var i=c.isStack,b=c.connectNulls,D=c.isInCircle,rt=c.showSinglePoint,Mt=bo(c,!0,!1,"lineWidth"),Nt=Ro(c.points,b,rt),ne=[],ge=0,be=Nt.length;ge<be;ge++){var Ae=Nt[ge];ne=ne.concat(Jc(Ae,D,i,o,t,Mt))}return Mt.path=ne,Mt}function Su(c,o,t,i,b){if(c.length===1)return[["M",c[0].x,c[0].y-b.lineWidth/2],["L",c[0].x,c[0].y],["L",c[0].x,c[0].y+b.lineWidth/2]];var D;return t?(o&&c.length&&c.push({x:c[0].x,y:c[0].y}),D=Un(c,!1,i)):(D=_n(c,!1),o&&D.push(["Z"])),D}function Kc(c,o,t,i,b,D){var rt=[],Mt=[];Object(a.each)(c,function(ge){var be=ho(ge);rt.push(be[1]),Mt.push(be[0])});var Nt=Su(rt,o,i,b,D),ne=Su(Mt,o,i,b,D);return t?Nt:Nt.concat(ne)}function Jc(c,o,t,i,b,D){if(c.length){var rt=c[0];return Object(a.isArray)(rt.y)?Kc(c,o,t,i,b,D):Su(c,o,i,b,D)}return[]}var Qc=oa("line",{defaultShapeType:"line"});Object(a.each)(["line","dot","dash","smooth"],function(c){fo("line",c,{draw:function(t,i){var b=c==="smooth",D;if(b){var rt=this.coordinate,Mt=rt.start,Nt=rt.end;D=[[Mt.x,Nt.y],[Nt.x,Mt.y]]}var ne=Hc(t,b,D),ge=i.addShape({type:"path",attrs:ne,name:"line",capture:!b});return ge},getMarker:function(t){return Zo(t,c)}})});var mh=Qc,Zc=function(c){Object(at.b)(o,c);function o(t){var i=c.call(this,t)||this;i.type="path",i.shapeType="line";var b=t.connectNulls,D=b===void 0?!1:b,rt=t.showSinglePoint,Mt=rt===void 0?!0:rt;return i.connectNulls=D,i.showSinglePoint=Mt,i}return o.prototype.createElements=function(t,i,b){b===void 0&&(b=!1);var D=this,rt=D.lastElementsMap,Mt=D.elementsMap,Nt=D.elements,ne=D.container,ge=this.getElementId(t),be=this.getShapeInfo(t),Ae=rt[ge];if(Ae){var an=Ae.getModel();(this.isCoordinateChanged||Ga(an,be))&&(Ae.animate=this.animateOption,Ae.update(be)),delete rt[ge]}else{var Xe=this.getShapeFactory();Ae=new ca({shapeFactory:Xe,container:ne,offscreenGroup:this.getOffscreenGroup()}),Ae.geometry=this,Ae.animate=this.animateOption,Ae.draw(be,b)}return Nt.push(Ae),Mt[ge]=Ae,Nt},o.prototype.getPointsAndData=function(t){for(var i=[],b=[],D=0,rt=t.length;D<rt;D++){var Mt=t[D];i.push({x:Mt.x,y:Mt.y}),b.push(Mt[y])}return{points:i,data:b}},o.prototype.getShapeInfo=function(t){var i=this.getDrawCfg(t[0]),b=this.getPointsAndData(t),D=b.points,rt=b.data;return i.mappingData=t,i.data=rt,i.isStack=!!this.getAdjust("stack"),i.points=D,i.connectNulls=this.connectNulls,i.showSinglePoint=this.showSinglePoint,i},o}(la),wu=Zc;function $c(c,o,t,i,b){var D=[];if(c.length){for(var rt=[],Mt=[],Nt=0,ne=c.length;Nt<ne;Nt++){var ge=c[Nt];rt.push(ge[1]),Mt.push(ge[0])}Mt=Mt.reverse(),Object(a.each)([rt,Mt],function(be,Ae){var Xe=[],an=i.parsePoints(be),gn=an[0];rt.length===1&&Mt.length===1?Xe=Ae===0?[["M",gn.x-.5,gn.y],["L",gn.x+.5,gn.y]]:[["L",gn.x+.5,gn.y],["L",gn.x-.5,gn.y]]:(o&&an.push({x:gn.x,y:gn.y}),t?Xe=Un(an,!1,b):Xe=_n(an,!1),Ae>0&&(Xe[0][0]="L")),D=D.concat(Xe)}),D.push(["Z"])}return D}function Eu(c,o,t,i,b){for(var D=bo(c,o,!o,"lineWidth"),rt=c.connectNulls,Mt=c.isInCircle,Nt=c.points,ne=c.showSinglePoint,ge=Ro(Nt,rt,ne),be=[],Ae=0,Xe=ge.length;Ae<Xe;Ae++){var an=ge[Ae];be=be.concat($c(an,Mt,t,i,b))}return D.path=be,D}function Ws(c){var o=c.start,t=c.end;return[[o.x,t.y],[t.x,o.y]]}var qc=oa("area",{defaultShapeType:"area",getDefaultPoints:function(o){var t=o.x,i=o.y0,b=Object(a.isArray)(o.y)?o.y:[i,o.y];return b.map(function(D){return{x:t,y:D}})}});fo("area","area",{draw:function(o,t){var i=Eu(o,!1,!1,this),b=t.addShape({type:"path",attrs:i,name:"area"});return b},getMarker:function(o){var t=o.color;return{symbol:function(b,D,rt){return rt===void 0&&(rt=5.5),[["M",b-rt,D-4],["L",b+rt,D-4],["L",b+rt,D+4],["L",b-rt,D+4],["Z"]]},style:{r:5,fill:t}}}});var bh=qc,tl=function(c){Object(at.b)(o,c);function o(t){var i=c.call(this,t)||this;i.type="area",i.shapeType="area",i.generatePoints=!0,i.startOnZero=!0;var b=t.startOnZero,D=b===void 0?!0:b,rt=t.sortable,Mt=rt===void 0?!1:rt,Nt=t.showSinglePoint,ne=Nt===void 0?!1:Nt;return i.startOnZero=D,i.sortable=Mt,i.showSinglePoint=ne,i}return o.prototype.getPointsAndData=function(t){for(var i=[],b=[],D=0,rt=t.length;D<rt;D++){var Mt=t[D];i.push(Mt.points),b.push(Mt[y])}return{points:i,data:b}},o.prototype.getYMinValue=function(){if(this.startOnZero)return c.prototype.getYMinValue.call(this);var t=this.getYScale();return t.min},o}(wu),el=tl,nl=oa("edge",{defaultShapeType:"line",getDefaultPoints:function(o){return ho(o)}});fo("edge","line",{draw:function(o,t){var i=bo(o,!0,!1,"lineWidth"),b=_n(this.parsePoints(o.points),this.coordinate.isPolar);return t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},i),{path:b})})},getMarker:function(o){return{symbol:"circle",style:{r:4.5,fill:o.color}}}});var oc=nl,rl=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.type="edge",t.shapeType="edge",t.generatePoints=!0,t}return o}(la),il=rl,ol=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.type="heatmap",t.paletteCache={},t}return o.prototype.createElements=function(t,i,b){b===void 0&&(b=!1);var D=this.prepareRange(t),rt=this.prepareSize(),Mt=Object(a.get)(this.styleOption,["style","shadowBlur"]);return Object(a.isNumber)(Mt)||(Mt=rt/2),this.prepareGreyScaleBlurredCircle(rt,Mt),this.drawWithRange(t,D,rt,Mt),null},o.prototype.clear=function(){c.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},o.prototype.prepareRange=function(t){var i=this.getAttribute("color"),b=i.getFields()[0],D=Infinity,rt=-Infinity;return t.forEach(function(Mt){var Nt=Mt[y][b];Nt>rt&&(rt=Nt),Nt<D&&(D=Nt)}),D===rt&&(D=rt-1),[D,rt]},o.prototype.prepareSize=function(){var t=this.getDefaultValue("size");return Object(a.isNumber)(t)||(t=this.getDefaultSize()),t},o.prototype.prepareGreyScaleBlurredCircle=function(t,i){var b=this.getGrayScaleBlurredCanvas(),D=t+i,rt=b.getContext("2d");b.width=b.height=D*2,rt.clearRect(0,0,b.width,b.height),rt.shadowOffsetX=rt.shadowOffsetY=D*2,rt.shadowBlur=i,rt.shadowColor="black",rt.beginPath(),rt.arc(-D,-D,t,0,Math.PI*2,!0),rt.closePath(),rt.fill()},o.prototype.drawWithRange=function(t,i,b,D){var rt=this.coordinate,Mt=rt.start,Nt=rt.end,ne=this.coordinate.getWidth(),ge=this.coordinate.getHeight(),be=this.getAttribute("color"),Ae=be.getFields()[0];this.clearShadowCanvasCtx();var Xe=this.getShadowCanvasCtx();i&&(t=t.filter(function(Ai){return Ai[y][Ae]<=i[1]&&Ai[y][Ae]>=i[0]}));for(var an=this.scales[Ae],gn=0,Yn=t;gn<Yn.length;gn++){var Kn=Yn[gn],ir=this.getDrawCfg(Kn),cr=ir.x,Rr=ir.y,_r=an.scale(Kn[y][Ae]);this.drawGrayScaleBlurredCircle(cr-Mt.x,Rr-Nt.y,b+D,_r,Xe)}var zr=Xe.getImageData(0,0,ne,ge);this.clearShadowCanvasCtx(),this.colorize(zr),Xe.putImageData(zr,0,0);var ki=this.getImageShape();ki.attr("x",Mt.x),ki.attr("y",Nt.y),ki.attr("width",ne),ki.attr("height",ge),ki.attr("img",Xe.canvas),ki.set("origin",this.getShapeInfo(t))},o.prototype.getDefaultSize=function(){var t=this.getAttribute("position"),i=this.coordinate;return Math.min(i.getWidth()/(t.scales[0].ticks.length*4),i.getHeight()/(t.scales[1].ticks.length*4))},o.prototype.clearShadowCanvasCtx=function(){var t=this.getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},o.prototype.getShadowCanvasCtx=function(){var t=this.shadowCanvas;return t||(t=document.createElement("canvas"),this.shadowCanvas=t),t.width=this.coordinate.getWidth(),t.height=this.coordinate.getHeight(),t.getContext("2d")},o.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},o.prototype.drawGrayScaleBlurredCircle=function(t,i,b,D,rt){var Mt=this.getGrayScaleBlurredCanvas();rt.globalAlpha=D,rt.drawImage(Mt,t-b,i-b)},o.prototype.colorize=function(t){for(var i=this.getAttribute("color"),b=t.data,D=this.paletteCache,rt=3;rt<b.length;rt+=4){var Mt=b[rt];if(Object(a.isNumber)(Mt)){var Nt=D[Mt]?D[Mt]:gt.a.rgb2arr(i.gradient(Mt/256));b[rt-3]=Nt[0],b[rt-2]=Nt[1],b[rt-1]=Nt[2],b[rt]=Mt}}},o.prototype.getImageShape=function(){var t=this.imageShape;if(t)return t;var i=this.container;return t=i.addShape({type:"image",attrs:{}}),this.imageShape=t,t},o.prototype.getShapeInfo=function(t){var i=this.getDrawCfg(t[0]);return Object(at.a)(Object(at.a)({},i),{mappingData:t,data:this.getData(t)})},o.prototype.getData=function(t){return t.map(function(i){return i[y]})},o}(la),al=ol;function Mu(c,o){o===void 0&&(o=!1);var t=c.x,i=c.y,b=c.y0,D=c.size,rt,Mt;Object(a.isArray)(i)?(rt=i[0],Mt=i[1]):(rt=b,Mt=i);var Nt,ne;Object(a.isArray)(t)?(Nt=t[0],ne=t[1]):(Nt=t-D/2,ne=t+D/2);var ge=[{x:Nt,y:rt},{x:Nt,y:Mt}];return o?ge.push({x:ne,y:(Mt+rt)/2}):ge.push({x:ne,y:Mt},{x:ne,y:rt}),ge}function Au(c,o){o===void 0&&(o=!0);var t=[],i=c[0];t.push(["M",i.x,i.y]);for(var b=1,D=c.length;b<D;b++)t.push(["L",c[b].x,c[b].y]);return o&&(t.push(["L",i.x,i.y]),t.push(["z"])),t}function xs(c,o){var t=0,i=0,b=0,D=0;return Object(a.isArray)(c)?c.length===1?t=i=b=D=c[0]:c.length===2?(t=b=c[0],i=D=c[1]):c.length===3?(t=c[0],i=D=c[1],b=c[2]):(t=c[0],i=c[1],b=c[2],D=c[3]):t=i=b=D=c,t+i>o&&(t=t?o/(1+i/t):0,i=o-t),b+D>o&&(b=b?o/(1+D/b):0,D=o-b),[t||0,i||0,b||0,D||0]}function ac(c,o,t){var i=[];if(t.isRect){var b=t.isTransposed?{x:t.start.x,y:o[0].y}:{x:o[0].x,y:t.start.y},D=t.isTransposed?{x:t.end.x,y:o[2].y}:{x:o[3].x,y:t.end.y},rt=Object(a.get)(c,["background","style","radius"]);if(rt){var Mt=t.isTransposed?Math.abs(o[0].y-o[2].y):o[2].x-o[1].x,Nt=t.isTransposed?t.getWidth():t.getHeight(),ne=xs(rt,Math.min(Mt,Nt)),ge=ne[0],be=ne[1],Ae=ne[2],Xe=ne[3];i.push(["M",b.x,D.y+ge]),ge!==0&&i.push(["A",ge,ge,0,0,1,b.x+ge,D.y]),i.push(["L",D.x-be,D.y]),be!==0&&i.push(["A",be,be,0,0,1,D.x,D.y+be]),i.push(["L",D.x,b.y-Ae]),Ae!==0&&i.push(["A",Ae,Ae,0,0,1,D.x-Ae,b.y]),i.push(["L",b.x+Xe,b.y]),Xe!==0&&i.push(["A",Xe,Xe,0,0,1,b.x,b.y-Xe])}else i.push(["M",b.x,b.y]),i.push(["L",D.x,b.y]),i.push(["L",D.x,D.y]),i.push(["L",b.x,D.y]),i.push(["L",b.x,b.y]);i.push(["z"])}if(t.isPolar){var an=t.getCenter(),gn=ao(c,t),Yn=gn.startAngle,Kn=gn.endAngle;if(t.type!=="theta"&&!t.isTransposed)i=no(an.x,an.y,t.getRadius(),Yn,Kn);else{var ir=function(zr){return Math.pow(zr,2)},ge=Math.sqrt(ir(an.x-o[0].x)+ir(an.y-o[0].y)),be=Math.sqrt(ir(an.x-o[2].x)+ir(an.y-o[2].y));i=no(an.x,an.y,ge,t.startAngle,t.endAngle,be)}}return i}function sl(c,o,t){var i=t.getWidth(),b=t.getHeight(),D=t.type==="rect",rt=[],Mt=(c[2].x-c[1].x)/2,Nt=t.isTransposed?Mt*b/i:Mt*i/b;return o==="round"?(D?(rt.push(["M",c[0].x,c[0].y+Nt]),rt.push(["L",c[1].x,c[1].y-Nt]),rt.push(["A",Mt,Mt,0,0,1,c[2].x,c[2].y-Nt]),rt.push(["L",c[3].x,c[3].y+Nt]),rt.push(["A",Mt,Mt,0,0,1,c[0].x,c[0].y+Nt])):(rt.push(["M",c[0].x,c[0].y]),rt.push(["L",c[1].x,c[1].y]),rt.push(["A",Mt,Mt,0,0,1,c[2].x,c[2].y]),rt.push(["L",c[3].x,c[3].y]),rt.push(["A",Mt,Mt,0,0,1,c[0].x,c[0].y])),rt.push(["z"])):rt=Au(c),rt}function sc(c,o,t){var i=[];return Object(a.isNil)(o)?t?i.push(["M",c[0].x,c[0].y],["L",c[1].x,c[1].y],["L",c[2].x,c[2].y],["L",c[2].x,c[2].y],["Z"]):i.push(["M",c[0].x,c[0].y],["L",c[1].x,c[1].y],["L",c[2].x,c[2].y],["L",c[3].x,c[3].y],["Z"]):i.push(["M",c[0].x,c[0].y],["L",c[1].x,c[1].y],["L",o[1].x,o[1].y],["L",o[0].x,o[0].y],["Z"]),i}function Os(c,o,t){var i,b,D,rt,Mt=c[0],Nt=c[1],ne=c[2],ge=c[3],be=[0,0,0,0],Ae=be[0],Xe=be[1],an=be[2],gn=be[3];Mt.y<Nt.y?(Nt=c[0],Mt=c[1],ge=c[2],ne=c[3],i=xs(t,Math.min(ge.x-Mt.x,Mt.y-Nt.y)),gn=i[0],an=i[1],Xe=i[2],Ae=i[3]):(b=xs(t,Math.min(ge.x-Mt.x,Mt.y-Nt.y)),Ae=b[0],Xe=b[1],an=b[2],gn=b[3]),o.isTransposed&&(Mt=c[0],ge=c[1],ne=c[2],Nt=c[3],c[0].x>c[1].x?(ge=c[0],Mt=c[1],Nt=c[2],ne=c[3],D=xs(t,Math.min(ge.x-Mt.x,Mt.y-Nt.y)),Ae=D[0],gn=D[1],an=D[2],Xe=D[3]):(rt=xs(t,Math.min(ge.x-Mt.x,Mt.y-Nt.y)),Xe=rt[0],an=rt[1],gn=rt[2],Ae=rt[3]));var Yn=[];return Yn.push(["M",Nt.x,Nt.y+Ae]),Ae!==0&&Yn.push(["A",Ae,Ae,0,0,1,Nt.x+Ae,Nt.y]),Yn.push(["L",ne.x-Xe,ne.y]),Xe!==0&&Yn.push(["A",Xe,Xe,0,0,1,ne.x,ne.y+Xe]),Yn.push(["L",ge.x,ge.y-an]),an!==0&&Yn.push(["A",an,an,0,0,1,ge.x-an,ge.y]),Yn.push(["L",Mt.x+gn,Mt.y]),gn!==0&&Yn.push(["A",gn,gn,0,0,1,Mt.x,Mt.y-gn]),Yn.push(["L",Nt.x,Nt.y+Ae]),Yn.push(["z"]),Yn}var ul=oa("interval",{defaultShapeType:"rect",getDefaultPoints:function(o){return Mu(o)}});fo("interval","rect",{draw:function(o,t){var i=bo(o,!1,!0),b=t,D=o==null?void 0:o.background;if(D){b=t.addGroup();var rt=jo(o),Mt=ac(o,this.parsePoints(o.points),this.coordinate);b.addShape("path",{attrs:Object(at.a)(Object(at.a)({},rt),{path:Mt}),zIndex:-1,name:ns})}var Nt;i.radius&&this.coordinate.isRect?Nt=Os(this.parsePoints(o.points),this.coordinate,i.radius):Nt=this.parsePath(sl(o.points,i.lineCap,this.coordinate));var ne=b.addShape("path",{attrs:Object(at.a)(Object(at.a)({},i),{path:Nt}),name:"interval"});return D?b:ne},getMarker:function(o){var t=o.color,i=o.isInPolar;return i?{symbol:"circle",style:{r:4.5,fill:t}}:{symbol:"square",style:{r:4,fill:t}}}});var xh=ul;function cl(c,o){var t=c.length,i=c;Object(a.isString)(i[0])&&(i=c.map(function(Mt){return o.translate(Mt)}));for(var b=i[1]-i[0],D=2;D<t;D++){var rt=i[D]-i[D-1];b>rt&&(b=rt)}return b}function ll(c,o){if(o){var t=Object(a.flatten)(c),i=Object(a.valuesOfKey)(t,o);return i.length}return c.length}function uc(c){var o=c.theme,t=c.coordinate,i=c.getXScale(),b=i.values,D=c.beforeMappingData,rt=b.length,Mt=Hn(c.coordinate),Nt=c.intervalPadding,ne=c.dodgePadding,ge=c.maxColumnWidth||o.maxColumnWidth,be=c.minColumnWidth||o.minColumnWidth,Ae=c.columnWidthRatio||o.columnWidthRatio,Xe=c.multiplePieWidthRatio||o.multiplePieWidthRatio,an=c.roseWidthRatio||o.roseWidthRatio;if(i.isLinear&&b.length>1){b.sort();var gn=cl(b,i);rt=(i.max-i.min)/gn,b.length>rt&&(rt=b.length)}var Yn=i.range,Kn=1/rt,ir=1;if(t.isPolar?t.isTransposed&&rt>1?ir=Xe:ir=an:(i.isLinear&&(Kn*=Yn[1]-Yn[0]),ir=Ae),!Object(a.isNil)(Nt)&&Nt>=0){var cr=Nt/Mt;Kn=(1-(rt-1)*cr)/rt}else Kn*=ir;if(c.getAdjust("dodge")){var Rr=c.getAdjust("dodge"),_r=Rr.dodgeBy,zr=ll(D,_r);if(!Object(a.isNil)(ne)&&ne>=0){var ki=ne/Mt;Kn=(Kn-ki*(zr-1))/zr}else!Object(a.isNil)(Nt)&&Nt>=0&&(Kn*=ir),Kn=Kn/zr;Kn=Kn>=0?Kn:0}if(!Object(a.isNil)(ge)&&ge>=0){var Ai=ge/Mt;Kn>Ai&&(Kn=Ai)}if(!Object(a.isNil)(be)&&be>=0){var mi=be/Mt;Kn<mi&&(Kn=mi)}return Kn}var fl=function(c){Object(at.b)(o,c);function o(t){var i=c.call(this,t)||this;i.type="interval",i.shapeType="interval",i.generatePoints=!0;var b=t.background;return i.background=b,i}return o.prototype.createShapePointsCfg=function(t){var i=c.prototype.createShapePointsCfg.call(this,t),b,D=this.getAttribute("size");if(D){b=this.getAttributeValues(D,t)[0];var rt=this.coordinate,Mt=Hn(rt);b=b/Mt}else this.defaultSize||(this.defaultSize=uc(this)),b=this.defaultSize;return i.size=b,i},o.prototype.adjustScale=function(){c.prototype.adjustScale.call(this);var t=this.getYScale();if(this.coordinate.type==="theta")t.change({nice:!1,min:0,max:Math.max(Math.max.apply(null,t.values),t.max)});else{var i=this.scaleDefs,b=t.field,D=t.min,rt=t.max,Mt=t.type;Mt!=="time"&&(D>0&&!Object(a.get)(i,[b,"min"])&&t.change({min:0}),rt<=0&&!Object(a.get)(i,[b,"max"])&&t.change({max:0}))}},o.prototype.getDrawCfg=function(t){var i=c.prototype.getDrawCfg.call(this,t);return i.background=this.background,i},o}(la),Ss=fl,Cu=function(c){Object(at.b)(o,c);function o(t){var i=c.call(this,t)||this;i.type="line";var b=t.sortable,D=b===void 0?!1:b;return i.sortable=D,i}return o}(wu),cc=Cu,lc=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],hl=["cross","tick","plus","hyphen","line"];function Tu(c,o,t,i,b){var D=bo(o,b,!b,"r"),rt=c.parsePoints(o.points),Mt=rt[0];if(o.isStack)Mt=rt[1];else if(rt.length>1){for(var Nt=t.addGroup(),ne=0,ge=rt;ne<ge.length;ne++){var be=ge[ne];Nt.addShape({type:"marker",attrs:Object(at.a)(Object(at.a)(Object(at.a)({},D),{symbol:bn[i]||i}),be)})}return Nt}return t.addShape({type:"marker",attrs:Object(at.a)(Object(at.a)(Object(at.a)({},D),{symbol:bn[i]||i}),Mt)})}var dl=oa("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(o){return ho(o)}});Object(a.each)(lc,function(c){fo("point","hollow-"+c,{draw:function(t,i){return Tu(this,t,i,c,!0)},getMarker:function(t){var i=t.color;return{symbol:bn[c]||c,style:{r:4.5,stroke:i,fill:null}}}})});var Oh=dl,vl=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.type="point",t.shapeType="point",t.generatePoints=!0,t}return o.prototype.getDrawCfg=function(t){var i=c.prototype.getDrawCfg.call(this,t);return Object(at.a)(Object(at.a)({},i),{isStack:!!this.getAdjust("stack")})},o}(la),pl=vl;function gl(c){for(var o=c[0],t=1,i=[["M",o.x,o.y]];t<c.length;){var b=c[t];(b.x!==c[t-1].x||b.y!==c[t-1].y)&&(i.push(["L",b.x,b.y]),b.x===o.x&&b.y===o.y&&t<c.length-1&&(o=c[t+1],i.push(["Z"]),i.push(["M",o.x,o.y]),t++)),t++}return Object(a.isEqual)(Object(a.last)(i),o)||i.push(["L",o.x,o.y]),i.push(["Z"]),i}var ws=oa("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(o){var t=[];return Object(a.each)(o.x,function(i,b){var D=o.y[b];t.push({x:i,y:D})}),t}});fo("polygon","polygon",{draw:function(o,t){if(!Object(a.isEmpty)(o.points)){var i=bo(o,!0,!0),b=this.parsePath(gl(o.points));return t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},i),{path:b}),name:"polygon"})}},getMarker:function(o){var t=o.color;return{symbol:"square",style:{r:4,fill:t}}}});var Sh=ws,yl=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.type="polygon",t.shapeType="polygon",t.generatePoints=!0,t}return o.prototype.createShapePointsCfg=function(t){var i=c.prototype.createShapePointsCfg.call(this,t),b=i.x,D=i.y,rt;if(!(Object(a.isArray)(b)&&Object(a.isArray)(D))){var Mt=this.getXScale(),Nt=this.getYScale(),ne=Mt.values.length,ge=Nt.values.length,be=.5*1/ne,Ae=.5*1/ge;Mt.isCategory&&Nt.isCategory?(b=[b-be,b-be,b+be,b+be],D=[D-Ae,D+Ae,D+Ae,D-Ae]):Object(a.isArray)(b)?(rt=b,b=[rt[0],rt[0],rt[1],rt[1]],D=[D-Ae/2,D+Ae/2,D+Ae/2,D-Ae/2]):Object(a.isArray)(D)&&(rt=D,D=[rt[0],rt[1],rt[1],rt[0]],b=[b-be/2,b-be/2,b+be/2,b+be/2]),i.x=b,i.y=D}return i},o}(la),ml=yl,bl=oa("schema",{defaultShapeType:""}),jd=bl,xl=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.type="schema",t.shapeType="schema",t.generatePoints=!0,t}return o.prototype.createShapePointsCfg=function(t){var i=c.prototype.createShapePointsCfg.call(this,t),b,D=this.getAttribute("size");if(D){b=this.getAttributeValues(D,t)[0];var rt=this.coordinate,Mt=Hn(rt);b=b/Mt}else this.defaultSize||(this.defaultSize=uc(this)),b=this.defaultSize;return i.size=b,i},o}(la),fc=xl;fo("area","line",{draw:function(o,t){var i=Eu(o,!0,!1,this),b=t.addShape({type:"path",attrs:i,name:"area"});return b},getMarker:function(o){var t=o.color;return{symbol:function(b,D,rt){return rt===void 0&&(rt=5.5),[["M",b-rt,D-4],["L",b+rt,D-4],["L",b+rt,D+4],["L",b-rt,D+4],["Z"]]},style:{r:5,stroke:t,fill:null}}}}),fo("area","smooth",{draw:function(o,t){var i=this.coordinate,b=Eu(o,!1,!0,this,Ws(i)),D=t.addShape({type:"path",attrs:b,name:"area"});return D},getMarker:function(o){var t=o.color;return{symbol:function(b,D,rt){return rt===void 0&&(rt=5.5),[["M",b-rt,D-4],["L",b+rt,D-4],["L",b+rt,D+4],["L",b-rt,D+4],["Z"]]},style:{r:5,fill:t}}}}),fo("area","smooth-line",{draw:function(o,t){var i=this.coordinate,b=Eu(o,!0,!0,this,Ws(i)),D=t.addShape({type:"path",attrs:b,name:"area"});return D},getMarker:function(o){var t=o.color;return{symbol:function(b,D,rt){return rt===void 0&&(rt=5.5),[["M",b-rt,D-4],["L",b+rt,D-4],["L",b+rt,D+4],["L",b-rt,D+4],["Z"]]},style:{r:5,stroke:t,fill:null}}}});function hc(c,o){return["C",c.x*1/2+o.x*1/2,c.y,c.x*1/2+o.x*1/2,o.y,o.x,o.y]}function dc(c,o){var t=[];t.push({x:o.x,y:o.y}),t.push(c);var i=["Q"];return Object(a.each)(t,function(b){i.push(b.x,b.y)}),i}function Ol(c,o,t){var i=dc(o,t),b=[["M",c.x,c.y]];return b.push(i),b}function Sl(c,o){var t=dc(c[1],o),i=dc(c[3],o),b=[["M",c[0].x,c[0].y]];return b.push(i),b.push(["L",c[3].x,c[3].y]),b.push(["L",c[2].x,c[2].y]),b.push(t),b.push(["L",c[1].x,c[1].y]),b.push(["L",c[0].x,c[0].y]),b.push(["Z"]),b}fo("edge","arc",{draw:function(o,t){var i=bo(o,!0,!1,"lineWidth"),b=o.points,D=b.length>2?"weight":"normal",rt;if(o.isInCircle){var Mt={x:0,y:1};return D==="normal"?rt=Ol(b[0],b[1],Mt):(i.fill=i.stroke,rt=Sl(b,Mt)),rt=this.parsePath(rt),t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},i),{path:rt})})}else{if(D==="normal")return b=this.parsePoints(b),rt=Mo((b[1].x+b[0].x)/2,b[0].y,Math.abs(b[1].x-b[0].x)/2,Math.PI,Math.PI*2),t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},i),{path:rt})});var Nt=hc(b[1],b[3]),ne=hc(b[2],b[0]);return rt=[["M",b[0].x,b[0].y],["L",b[1].x,b[1].y],Nt,["L",b[3].x,b[3].y],["L",b[2].x,b[2].y],ne,["Z"]],rt=this.parsePath(rt),i.fill=i.stroke,t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},i),{path:rt})})}},getMarker:function(o){return{symbol:"circle",style:{r:4.5,fill:o.color}}}});function wl(c,o){var t=hc(c,o),i=[["M",c.x,c.y]];return i.push(t),i}fo("edge","smooth",{draw:function(o,t){var i=bo(o,!0,!1,"lineWidth"),b=o.points,D=this.parsePath(wl(b[0],b[1]));return t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},i),{path:D})})},getMarker:function(o){return{symbol:"circle",style:{r:4.5,fill:o.color}}}});var Xs=1/3;function El(c,o){var t=[];t.push({x:c.x,y:c.y*(1-Xs)+o.y*Xs}),t.push({x:o.x,y:c.y*(1-Xs)+o.y*Xs}),t.push(o);var i=[["M",c.x,c.y]];return Object(a.each)(t,function(b){i.push(["L",b.x,b.y])}),i}fo("edge","vhv",{draw:function(o,t){var i=bo(o,!0,!1,"lineWidth"),b=o.points,D=this.parsePath(El(b[0],b[1]));return t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},i),{path:D})})},getMarker:function(o){return{symbol:"circle",style:{r:4.5,fill:o.color}}}}),fo("interval","funnel",{getPoints:function(o){return o.size=o.size*2,Mu(o)},draw:function(o,t){var i=bo(o,!1,!0),b=this.parsePath(sc(o.points,o.nextPoints,!1)),D=t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},i),{path:b}),name:"interval"});return D},getMarker:function(o){var t=o.color;return{symbol:"square",style:{r:4,fill:t}}}}),fo("interval","hollow-rect",{draw:function(o,t){var i=bo(o,!0,!1),b=t,D=o==null?void 0:o.background;if(D){b=t.addGroup();var rt=jo(o),Mt=ac(o,this.parsePoints(o.points),this.coordinate);b.addShape("path",{attrs:Object(at.a)(Object(at.a)({},rt),{path:Mt}),zIndex:-1,name:ns})}var Nt=this.parsePath(Au(o.points)),ne=b.addShape("path",{attrs:Object(at.a)(Object(at.a)({},i),{path:Nt}),name:"interval"});return D?b:ne},getMarker:function(o){var t=o.color,i=o.isInPolar;return i?{symbol:"circle",style:{r:4.5,stroke:t,fill:null}}:{symbol:"square",style:{r:4,stroke:t,fill:null}}}});function Ys(c){var o=c.x,t=c.y,i=c.y0;return Object(a.isArray)(t)?t.map(function(b,D){return{x:Object(a.isArray)(o)?o[D]:o,y:b}}):[{x:o,y:i},{x:o,y:t}]}fo("interval","line",{getPoints:function(o){return Ys(o)},draw:function(o,t){var i=bo(o,!0,!1,"lineWidth"),b=te(Object(at.a)({},i),["fill"]),D=this.parsePath(Au(o.points,!1)),rt=t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},b),{path:D}),name:"interval"});return rt},getMarker:function(o){var t=o.color;return{symbol:function(b,D,rt){return[["M",b,D-rt],["L",b,D+rt]]},style:{r:5,stroke:t}}}}),fo("interval","pyramid",{getPoints:function(o){return o.size=o.size*2,Mu(o,!0)},draw:function(o,t){var i=bo(o,!1,!0),b=this.parsePath(sc(o.points,o.nextPoints,!0)),D=t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},i),{path:b}),name:"interval"});return D},getMarker:function(o){var t=o.color;return{symbol:"square",style:{r:4,fill:t}}}});function Ml(c){var o=c.x,t=c.y,i=c.y0,b=c.size,D,rt;Object(a.isArray)(t)?(D=t[0],rt=t[1]):(D=i,rt=t);var Mt=o+b/2,Nt=o-b/2;return[{x:o,y:D},{x:o,y:rt},{x:Nt,y:D},{x:Mt,y:D},{x:Nt,y:rt},{x:Mt,y:rt}]}function Al(c){return[["M",c[0].x,c[0].y],["L",c[1].x,c[1].y],["M",c[2].x,c[2].y],["L",c[3].x,c[3].y],["M",c[4].x,c[4].y],["L",c[5].x,c[5].y]]}fo("interval","tick",{getPoints:function(o){return Ml(o)},draw:function(o,t){var i=bo(o,!0,!1),b=this.parsePath(Al(o.points)),D=t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},i),{path:b}),name:"interval"});return D},getMarker:function(o){var t=o.color;return{symbol:function(b,D,rt){return[["M",b-rt/2,D-rt],["L",b+rt/2,D-rt],["M",b,D-rt],["L",b,D+rt],["M",b-rt/2,D+rt],["L",b+rt/2,D+rt]]},style:{r:5,stroke:t}}}});var Cl=function(o,t,i){var b=o.x,D=o.y,rt=t.x,Mt=t.y,Nt;switch(i){case"hv":Nt=[{x:rt,y:D}];break;case"vh":Nt=[{x:b,y:Mt}];break;case"hvh":var ne=(rt+b)/2;Nt=[{x:ne,y:D},{x:ne,y:Mt}];break;case"vhv":var ge=(D+Mt)/2;Nt=[{x:b,y:ge},{x:rt,y:ge}];break;default:break}return Nt};function wh(c,o){var t=[];return Object(a.each)(c,function(i,b){var D=c[b+1];if(t.push(i),D){var rt=Cl(i,D,o);t=t.concat(rt)}}),t}function Eh(c){return c.map(function(o,t){return t===0?["M",o.x,o.y]:["L",o.x,o.y]})}function Mh(c,o){var t=Ro(c.points,c.connectNulls,c.showSinglePoint),i=[];return Object(a.each)(t,function(b){var D=wh(b,o);i=i.concat(Eh(D))}),Object(at.a)(Object(at.a)({},bo(c,!0,!1,"lineWidth")),{path:i})}Object(a.each)(["hv","vh","hvh","vhv"],function(c){fo("line",c,{draw:function(t,i){var b=Mh(t,c),D=i.addShape({type:"path",attrs:b,name:"line"});return D},getMarker:function(t){return Zo(t,c)}})}),Object(a.each)(hl,function(c){fo("point",c,{draw:function(t,i){return Tu(this,t,i,c,!0)},getMarker:function(t){var i=t.color;return{symbol:bn[c],style:{r:4.5,stroke:i,fill:null}}}})}),fo("point","image",{draw:function(o,t){var i=bo(o,!1,!1,"r").r,b=this.parsePoints(o.points),D=b[0];if(o.isStack)D=b[1];else if(b.length>1){for(var rt=t.addGroup(),Mt=0,Nt=b;Mt<Nt.length;Mt++){var ne=Nt[Mt];rt.addShape("image",{attrs:{x:ne.x-i/2,y:ne.y-i,width:i,height:i,img:o.shape[1]}})}return rt}return t.addShape("image",{attrs:{x:D.x-i/2,y:D.y-i,width:i,height:i,img:o.shape[1]}})},getMarker:function(o){var t=o.color;return{symbol:"circle",style:{r:4.5,fill:t}}}}),Object(a.each)(lc,function(c){fo("point",c,{draw:function(t,i){return Tu(this,t,i,c,!1)},getMarker:function(t){var i=t.color;return{symbol:bn[c]||c,style:{r:4.5,fill:i}}}})});function vc(c){var o=Object(a.isArray)(c)?c:[c],t=o[0],i=o[o.length-1],b=o.length>1?o[1]:t,D=o.length>3?o[3]:i,rt=o.length>2?o[2]:b;return{min:t,max:i,min1:b,max1:D,median:rt}}function pc(c,o,t){var i=t/2,b;if(Object(a.isArray)(o)){var D=vc(o),rt=D.min,Mt=D.max,Nt=D.median,ne=D.min1,ge=D.max1,be=c-i,Ae=c+i;b=[[be,Mt],[Ae,Mt],[c,Mt],[c,ge],[be,ne],[be,ge],[Ae,ge],[Ae,ne],[c,ne],[c,rt],[be,rt],[Ae,rt],[be,Nt],[Ae,Nt]]}else{o=Object(a.isNil)(o)?.5:o;var Xe=vc(c),rt=Xe.min,Mt=Xe.max,Nt=Xe.median,ne=Xe.min1,ge=Xe.max1,an=o-i,gn=o+i;b=[[rt,an],[rt,gn],[rt,o],[ne,o],[ne,an],[ne,gn],[ge,gn],[ge,an],[ge,o],[Mt,o],[Mt,an],[Mt,gn],[Nt,an],[Nt,gn]]}return b.map(function(Yn){return{x:Yn[0],y:Yn[1]}})}function Tl(c){return[["M",c[0].x,c[0].y],["L",c[1].x,c[1].y],["M",c[2].x,c[2].y],["L",c[3].x,c[3].y],["M",c[4].x,c[4].y],["L",c[5].x,c[5].y],["L",c[6].x,c[6].y],["L",c[7].x,c[7].y],["L",c[4].x,c[4].y],["Z"],["M",c[8].x,c[8].y],["L",c[9].x,c[9].y],["M",c[10].x,c[10].y],["L",c[11].x,c[11].y],["M",c[12].x,c[12].y],["L",c[13].x,c[13].y]]}fo("schema","box",{getPoints:function(o){var t=o.x,i=o.y,b=o.size;return pc(t,i,b)},draw:function(o,t){var i=bo(o,!0,!1),b=this.parsePath(Tl(o.points)),D=t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},i),{path:b,name:"schema"})});return D},getMarker:function(o){var t=o.color;return{symbol:function(b,D,rt){var Mt=[D-6,D-3,D,D+3,D+6],Nt=pc(b,Mt,rt);return[["M",Nt[0].x+1,Nt[0].y],["L",Nt[1].x-1,Nt[1].y],["M",Nt[2].x,Nt[2].y],["L",Nt[3].x,Nt[3].y],["M",Nt[4].x,Nt[4].y],["L",Nt[5].x,Nt[5].y],["L",Nt[6].x,Nt[6].y],["L",Nt[7].x,Nt[7].y],["L",Nt[4].x,Nt[4].y],["Z"],["M",Nt[8].x,Nt[8].y],["L",Nt[9].x,Nt[9].y],["M",Nt[10].x+1,Nt[10].y],["L",Nt[11].x-1,Nt[11].y],["M",Nt[12].x,Nt[12].y],["L",Nt[13].x,Nt[13].y]]},style:{r:6,lineWidth:1,stroke:t}}}});function jl(c){var o=Object(a.isArray)(c)?c:[c],t=o.sort(function(i,b){return b-i});return Kt(t,4,t[t.length-1])}function ju(c,o,t){var i=jl(o);return[{x:c,y:i[0]},{x:c,y:i[1]},{x:c-t/2,y:i[2]},{x:c-t/2,y:i[1]},{x:c+t/2,y:i[1]},{x:c+t/2,y:i[2]},{x:c,y:i[2]},{x:c,y:i[3]}]}function Il(c){return[["M",c[0].x,c[0].y],["L",c[1].x,c[1].y],["M",c[2].x,c[2].y],["L",c[3].x,c[3].y],["L",c[4].x,c[4].y],["L",c[5].x,c[5].y],["Z"],["M",c[6].x,c[6].y],["L",c[7].x,c[7].y]]}fo("schema","candle",{getPoints:function(o){var t=o.x,i=o.y,b=o.size;return ju(t,i,b)},draw:function(o,t){var i=bo(o,!0,!0),b=this.parsePath(Il(o.points)),D=t.addShape("path",{attrs:Object(at.a)(Object(at.a)({},i),{path:b,name:"schema"})});return D},getMarker:function(o){var t=o.color;return{symbol:function(b,D,rt){var Mt=[D+7.5,D+3,D-3,D-7.5],Nt=ju(b,Mt,rt);return[["M",Nt[0].x,Nt[0].y],["L",Nt[1].x,Nt[1].y],["M",Nt[2].x,Nt[2].y],["L",Nt[3].x,Nt[3].y],["L",Nt[4].x,Nt[4].y],["L",Nt[5].x,Nt[5].y],["Z"],["M",Nt[6].x,Nt[6].y],["L",Nt[7].x,Nt[7].y]]},style:{lineWidth:1,stroke:t,fill:t,r:6}}}});function Pl(c,o){var t=Math.abs(c[0].x-c[2].x),i=Math.abs(c[0].y-c[2].y),b=Math.min(t,i);o&&(b=Object(a.clamp)(o,0,Math.min(t,i))),b=b/2;var D=(c[0].x+c[2].x)/2,rt=(c[0].y+c[2].y)/2;return{x:D-b,y:rt-b,width:b*2,height:b*2}}fo("polygon","square",{draw:function(o,t){if(!Object(a.isEmpty)(o.points)){var i=bo(o,!0,!0),b=this.parsePoints(o.points);return t.addShape("rect",{attrs:Object(at.a)(Object(at.a)({},i),Pl(b,o.size)),name:"polygon"})}},getMarker:function(o){var t=o.color;return{symbol:"square",style:{r:4,fill:t}}}});var Ah=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getLabelValueDir=function(t){var i="y",b=t.points;return b[0][i]<=b[2][i]?1:-1},o.prototype.getLabelOffsetPoint=function(t,i,b){var D,rt=c.prototype.getLabelOffsetPoint.call(this,t,i,b),Mt=this.getCoordinate().isTransposed,Nt=Mt?"x":"y",ne=this.getLabelValueDir(t.mappingData);return Object(at.a)(Object(at.a)({},rt),(D={},D[Nt]=rt[Nt]*ne,D))},o.prototype.getThemedLabelCfg=function(t){var i=this.geometry,b=this.getDefaultLabelCfg(),D=i.theme;return Object(a.deepMix)({},b,D.labels,t.position==="middle"?{offset:0}:{},t)},o.prototype.setLabelPosition=function(t,i,b,D){var rt=this.getCoordinate(),Mt=rt.isTransposed,Nt=i.points,ne=rt.convert(Nt[0]),ge=rt.convert(Nt[2]),be=this.getLabelValueDir(i),Ae,Xe,an,gn,Yn=Object(a.isArray)(i.shape)?i.shape[0]:i.shape;if(Yn==="funnel"||Yn==="pyramid"){var Kn=Object(a.get)(i,"nextPoints"),ir=Object(a.get)(i,"points");if(Kn){var cr=rt.convert(ir[0]),Rr=rt.convert(ir[1]),_r=rt.convert(Kn[0]),zr=rt.convert(Kn[1]);Mt?(Ae=Math.min(_r.y,cr.y),an=Math.max(_r.y,cr.y),Xe=(Rr.x+zr.x)/2,gn=(cr.x+_r.x)/2):(Ae=Math.min((Rr.y+zr.y)/2,(cr.y+_r.y)/2),an=Math.max((Rr.y+zr.y)/2,(cr.y+_r.y)/2),Xe=zr.x,gn=cr.x)}else Ae=Math.min(ge.y,ne.y),an=Math.max(ge.y,ne.y),Xe=ge.x,gn=ne.x}else Ae=Math.min(ge.y,ne.y),an=Math.max(ge.y,ne.y),Xe=ge.x,gn=ne.x;switch(D){case"right":t.x=Xe,t.y=(Ae+an)/2,t.textAlign=Object(a.get)(t,"textAlign",be>0?"left":"right");break;case"left":t.x=gn,t.y=(Ae+an)/2,t.textAlign=Object(a.get)(t,"textAlign",be>0?"left":"right");break;case"bottom":Mt&&(t.x=(Xe+gn)/2),t.y=an,t.textAlign=Object(a.get)(t,"textAlign","center"),t.textBaseline=Object(a.get)(t,"textBaseline",be>0?"bottom":"top");break;case"middle":Mt&&(t.x=(Xe+gn)/2),t.y=(Ae+an)/2,t.textAlign=Object(a.get)(t,"textAlign","center"),t.textBaseline=Object(a.get)(t,"textBaseline","middle");break;case"top":Mt&&(t.x=(Xe+gn)/2),t.y=Ae,t.textAlign=Object(a.get)(t,"textAlign","center"),t.textBaseline=Object(a.get)(t,"textBaseline",be>0?"bottom":"top");break;default:break}},o}(Fe),Ch=Ah,Iu=Math.PI/2,Th=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getLabelOffset=function(t){var i=this.getCoordinate(),b=0;if(Object(a.isNumber)(t))b=t;else if(Object(a.isString)(t)&&t.indexOf("%")!==-1){var D=i.getRadius();i.innerRadius>0&&(D=D*(1-i.innerRadius)),b=parseFloat(t)*.01*D}return b},o.prototype.getLabelItems=function(t){var i=c.prototype.getLabelItems.call(this,t),b=this.geometry.getYScale();return Object(a.map)(i,function(D){if(D&&b){var rt=b.scale(Object(a.get)(D.data,b.field));return Object(at.a)(Object(at.a)({},D),{percent:rt})}return D})},o.prototype.getLabelAlign=function(t){var i=this.getCoordinate(),b;if(t.labelEmit)b=t.angle<=Math.PI/2&&t.angle>=-Math.PI/2?"left":"right";else if(!i.isTransposed)b="center";else{var D=i.getCenter(),rt=t.offset;Math.abs(t.x-D.x)<1?b="center":t.angle>Math.PI||t.angle<=0?b=rt>0?"left":"right":b=rt>0?"right":"left"}return b},o.prototype.getLabelPoint=function(t,i,b){var D=1,rt,Mt=t.content[b];this.isToMiddle(i)?rt=this.getMiddlePoint(i.points):(t.content.length===1&&b===0?b=1:b===0&&(D=-1),rt=this.getArcPoint(i,b));var Nt=t.offset*D,ne=this.getPointAngle(rt),ge=t.labelEmit,be=this.getCirclePoint(ne,Nt,rt,ge);return be.r===0?be.content="":(be.content=Mt,be.angle=ne,be.color=i.color),be.rotate=t.autoRotate?this.getLabelRotate(ne,Nt,ge):t.rotate,be.start={x:rt.x,y:rt.y},be},o.prototype.getArcPoint=function(t,i){return i===void 0&&(i=0),!Object(a.isArray)(t.x)&&!Object(a.isArray)(t.y)?{x:t.x,y:t.y}:{x:Object(a.isArray)(t.x)?t.x[i]:t.x,y:Object(a.isArray)(t.y)?t.y[i]:t.y}},o.prototype.getPointAngle=function(t){return $n(this.getCoordinate(),t)},o.prototype.getCirclePoint=function(t,i,b,D){var rt=this.getCoordinate(),Mt=rt.getCenter(),Nt=rn(rt,b);if(Nt===0)return Object(at.a)(Object(at.a)({},Mt),{r:Nt});var ne=t;if(rt.isTransposed&&Nt>i&&!D){var ge=Math.asin(i/(2*Nt));ne=t+ge*2}else Nt=Nt+i;return{x:Mt.x+Nt*Math.cos(ne),y:Mt.y+Nt*Math.sin(ne),r:Nt}},o.prototype.getLabelRotate=function(t,i,b){var D=t+Iu;return b&&(D-=Iu),D&&(D>Iu?D=D-Math.PI:D<-Iu&&(D=D+Math.PI)),D},o.prototype.getMiddlePoint=function(t){var i=this.getCoordinate(),b=t.length,D={x:0,y:0};return Object(a.each)(t,function(rt){D.x+=rt.x,D.y+=rt.y}),D.x/=b,D.y/=b,D=i.convert(D),D},o.prototype.isToMiddle=function(t){return t.x.length>2},o}(Fe),gc=Th,Dl=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.defaultLayout="distribute",t}return o.prototype.getDefaultLabelCfg=function(t,i){var b=c.prototype.getDefaultLabelCfg.call(this,t,i);return Object(a.deepMix)({},b,Object(a.get)(this.geometry.theme,"pieLabels",{}))},o.prototype.getLabelOffset=function(t){return c.prototype.getLabelOffset.call(this,t)||0},o.prototype.getLabelRotate=function(t,i,b){var D;return i<0&&(D=t,D>Math.PI/2&&(D=D-Math.PI),D<-Math.PI/2&&(D=D+Math.PI)),D},o.prototype.getLabelAlign=function(t){var i=this.getCoordinate(),b=i.getCenter(),D;return t.angle<=Math.PI/2&&t.x>=b.x?D="left":D="right",t.offset<=0&&(D==="right"?D="left":D="right"),D},o.prototype.getArcPoint=function(t){return t},o.prototype.getPointAngle=function(t){var i=this.getCoordinate(),b={x:Object(a.isArray)(t.x)?t.x[0]:t.x,y:t.y[0]},D={x:Object(a.isArray)(t.x)?t.x[1]:t.x,y:t.y[1]},rt,Mt=$n(i,b);if(t.points&&t.points[0].y===t.points[1].y)rt=Mt;else{var Nt=$n(i,D);Mt>=Nt&&(Nt=Nt+Math.PI*2),rt=Mt+(Nt-Mt)/2}return rt},o.prototype.getCirclePoint=function(t,i){var b=this.getCoordinate(),D=b.getCenter(),rt=b.getRadius()+i;return Object(at.a)(Object(at.a)({},Pi(D.x,D.y,rt,t)),{angle:t,r:rt})},o}(gc),jh=Dl,kl=4;function Ih(c,o,t,i,b,D){var rt=!0,Mt=i.start,Nt=i.end,ne=Math.min(Mt.y,Nt.y),ge=Math.abs(Mt.y-Nt.y),be,Ae=0,Xe=Number.MIN_VALUE,an=o.map(function(_r){return _r.y>Ae&&(Ae=_r.y),_r.y<Xe&&(Xe=_r.y),{size:t,targets:[_r.y-ne]}});for(Xe-=ne,Ae-ne>ge&&(ge=Ae-ne);rt;)for(an.forEach(function(_r){var zr=(Math.min.apply(Xe,_r.targets)+Math.max.apply(Xe,_r.targets))/2;_r.pos=Math.min(Math.max(Xe,zr-_r.size/2),ge-_r.size)}),rt=!1,be=an.length;be--;)if(be>0){var gn=an[be-1],Yn=an[be];gn.pos+gn.size>Yn.pos&&(gn.size+=Yn.size,gn.targets=gn.targets.concat(Yn.targets),gn.pos+gn.size>ge&&(gn.pos=ge-gn.size),an.splice(be,1),rt=!0)}be=0,an.forEach(function(_r){var zr=ne+t/2;_r.targets.forEach(function(){o[be].y=_r.pos+zr,zr+=t,be++})});for(var Kn={},ir=0,cr=c;ir<cr.length;ir++){var Rr=cr[ir];Kn[Rr.get("id")]=Rr}o.forEach(function(_r){var zr=_r.r*_r.r,ki=Math.pow(Math.abs(_r.y-b.y),2);if(zr<ki)_r.x=b.x;else{var Ai=Math.sqrt(zr-ki);D?_r.x=b.x+Ai:_r.x=b.x-Ai}var mi=Kn[_r.id];mi.attr("x",_r.x),mi.attr("y",_r.y);var Ki=Object(a.find)(mi.getChildren(),function(vo){return vo.get("type")==="text"});Ki&&(Ki.attr("y",_r.y),Ki.attr("x",_r.x))})}function Ph(c,o,t,i){if(!(!c.length||!o.length)){var b=c[0]?c[0].offset:0,D=o[0].get("coordinate"),rt=D.getRadius(),Mt=D.getCenter();if(b>0){var Nt=14,ne=rt+b,ge=ne*2+Nt*2,be={start:D.start,end:D.end},Ae=[[],[]];c.forEach(function(Xe){!Xe||(Xe.textAlign==="right"?Ae[0].push(Xe):Ae[1].push(Xe))}),Ae.forEach(function(Xe,an){var gn=ge/Nt;Xe.length>gn&&(Xe.sort(function(Yn,Kn){return Kn["..percent"]-Yn["..percent"]}),Xe.splice(gn,Xe.length-gn)),Xe.sort(function(Yn,Kn){return Yn.y-Kn.y}),Ih(o,Xe,Nt,be,Mt,an)})}Object(a.each)(c,function(Xe){if(Xe&&Xe.labelLine){var an=Xe.offset,gn=Xe.angle,Yn=Pi(Mt.x,Mt.y,rt,gn),Kn=Pi(Mt.x,Mt.y,rt+an/2,gn),ir=Xe.x+Object(a.get)(Xe,"offsetX",0),cr=Xe.y+Object(a.get)(Xe,"offsetY",0),Rr={x:ir-Math.cos(gn)*kl,y:cr-Math.sin(gn)*kl};Object(a.isObject)(Xe.labelLine)||(Xe.labelLine={}),Xe.labelLine.path=["M "+Yn.x,Yn.y+" Q"+Kn.x,Kn.y+" "+Rr.x,Rr.y].join(",")}})}}function Rl(c,o,t){var i=c.filter(function(an){return!an.invisible});i.sort(function(an,gn){return an.y-gn.y});var b=!0,D=t.minY,rt=t.maxY,Mt=Math.abs(D-rt),Nt,ne=0,ge=Number.MIN_VALUE,be=i.map(function(an){return an.y>ne&&(ne=an.y),an.y<ge&&(ge=an.y),{content:an.content,size:o,targets:[an.y-D],pos:null}});for(ge-=D,ne-D>Mt&&(Mt=ne-D);b;)for(be.forEach(function(an){var gn=(Math.min.apply(ge,an.targets)+Math.max.apply(ge,an.targets))/2;an.pos=Math.min(Math.max(ge,gn-an.size/2),Mt-an.size),an.pos=Math.max(0,an.pos)}),b=!1,Nt=be.length;Nt--;)if(Nt>0){var Ae=be[Nt-1],Xe=be[Nt];Ae.pos+Ae.size>Xe.pos&&(Ae.size+=Xe.size,Ae.targets=Ae.targets.concat(Xe.targets),Ae.pos+Ae.size>Mt&&(Ae.pos=Mt-Ae.size),be.splice(Nt,1),b=!0)}Nt=0,be.forEach(function(an){var gn=D+o/2;an.targets.forEach(function(){i[Nt].y=an.pos+gn,gn+=o,Nt++})})}var yc=4;function Dh(c,o){var t=o.getCenter(),i=o.getRadius();if(c&&c.labelLine){var b=c.angle,D=c.offset,rt=Pi(t.x,t.y,i,b),Mt=c.x+Object(a.get)(c,"offsetX",0)*(Math.cos(b)>0?1:-1),Nt=c.y+Object(a.get)(c,"offsetY",0)*(Math.sin(b)>0?1:-1),ne={x:Mt-Math.cos(b)*yc,y:Nt-Math.sin(b)*yc},ge=c.labelLine.smooth,be=[],Ae=ne.x-t.x,Xe=ne.y-t.y,an=Math.atan(Xe/Ae);if(Ae<0&&(an+=Math.PI),ge===!1){Object(a.isObject)(c.labelLine)||(c.labelLine={});var gn=0;(b<0&&b>-Math.PI/2||b>Math.PI*1.5)&&ne.y>rt.y&&(gn=1),b>=0&&b<Math.PI/2&&ne.y>rt.y&&(gn=1),b>=Math.PI/2&&b<Math.PI&&rt.y>ne.y&&(gn=1),(b<-Math.PI/2||b>=Math.PI&&b<Math.PI*1.5)&&rt.y>ne.y&&(gn=1);var Yn=D/2>4?4:Math.max(D/2-1,0),Kn=Pi(t.x,t.y,i+Yn,b),ir=Pi(t.x,t.y,i+D/2,an),cr=0;be.push("M "+rt.x+" "+rt.y),be.push("L "+Kn.x+" "+Kn.y),be.push("A "+t.x+" "+t.y+" 0 "+cr+" "+gn+" "+ir.x+" "+ir.y),be.push("L "+ne.x+" "+ne.y)}else{var Kn=Pi(t.x,t.y,i+(D/2>4?4:Math.max(D/2-1,0)),b),Rr=rt.x<t.x?1:-1;be.push("M "+ne.x+" "+ne.y);var _r=(rt.y-t.y)/(rt.x-t.x),zr=(ne.y-t.y)/(ne.x-t.x);Math.abs(_r-zr)>Math.pow(Math.E,-16)&&be.push.apply(be,["C",ne.x+Rr*4,ne.y,2*Kn.x-rt.x,2*Kn.y-rt.y,rt.x,rt.y]),be.push("L "+rt.x+" "+rt.y)}c.labelLine.path=be.join(" ")}}function Nl(c,o,t,i){var b=Object(a.filter)(c,function(zr){return!Object(a.isNil)(zr)}),D=o[0]&&o[0].get("coordinate");if(!!D){for(var rt=D.getCenter(),Mt=D.getRadius(),Nt={},ne=0,ge=o;ne<ge.length;ne++){var be=ge[ne];Nt[be.get("id")]=be}var Ae=Object(a.get)(b[0],"labelHeight",14),Xe=Object(a.get)(b[0],"offset",0);if(!(Xe<=0)){var an="left",gn="right",Yn=Object(a.groupBy)(b,function(zr){return zr.x<rt.x?an:gn}),Kn=D.start,ir=D.end,cr=Math.min((Mt+Xe+Ae)*2,D.getHeight()),Rr=cr/2,_r={minX:Kn.x,maxX:ir.x,minY:rt.y-Rr,maxY:rt.y+Rr};Object(a.each)(Yn,function(zr,ki){var Ai=Math.floor(cr/Ae);zr.length>Ai&&(zr.sort(function(mi,Ki){return Ki.percent-mi.percent}),Object(a.each)(zr,function(mi,Ki){Ki+1>Ai&&(Nt[mi.id].set("visible",!1),mi.invisible=!0)})),Rl(zr,Ae,_r)}),Object(a.each)(Yn,function(zr,ki){Object(a.each)(zr,function(Ai){var mi=ki===gn,Ki=Nt[Ai.id],vo=Ki.getChildByIndex(0);if(vo){var po=Mt+Xe,yo=Ai.y-rt.y,wo=Math.pow(po,2),Z=Math.pow(yo,2),U=wo-Z>0?wo-Z:0,w=Math.sqrt(U),L=Math.abs(Math.cos(Ai.angle)*po);mi?Ai.x=rt.x+Math.max(w,L):Ai.x=rt.x-Math.max(w,L)}vo&&(vo.attr("y",Ai.y),vo.attr("x",Ai.x)),Dh(Ai,D)})})}}}var Pu=4,Hs=4,Ll=4;function kh(c,o,t){var i=o.getCenter(),b=o.getRadius(),D={x:c.x-(t?Ll:-Ll),y:c.y},rt=Pi(i.x,i.y,b+Pu,c.angle),Mt={x:D.x,y:D.y},Nt={x:rt.x,y:rt.y},ne=Pi(i.x,i.y,b,c.angle),ge="";if(D.y!==rt.y){var be=t?4:-4;Mt.y=D.y,c.angle<0&&c.angle>=-Math.PI/2&&(Mt.x=Math.max(rt.x,D.x-be),D.y<rt.y?Nt.y=Mt.y:(Nt.y=rt.y,Nt.x=Math.max(Nt.x,Mt.x-be))),c.angle>0&&c.angle<Math.PI/2&&(Mt.x=Math.max(rt.x,D.x-be),D.y>rt.y?Nt.y=Mt.y:(Nt.y=rt.y,Nt.x=Math.max(Nt.x,Mt.x-be))),c.angle>Math.PI/2&&(Mt.x=Math.min(rt.x,D.x-be),D.y>rt.y?Nt.y=Mt.y:(Nt.y=rt.y,Nt.x=Math.min(Nt.x,Mt.x-be))),c.angle<-Math.PI/2&&(Mt.x=Math.min(rt.x,D.x-be),D.y<rt.y?Nt.y=Mt.y:(Nt.y=rt.y,Nt.x=Math.min(Nt.x,Mt.x-be)))}ge=["M "+D.x+","+D.y,"L "+Mt.x+","+Mt.y,"L "+Nt.x+","+Nt.y,"L "+rt.x+","+rt.y,"L "+ne.x+","+ne.y].join(" "),c.labelLine=Object(a.deepMix)({},c.labelLine,{path:ge})}function Rh(c,o,t,i){var b=o[0]&&o[0].get("coordinate");if(!!b){for(var D=b.getCenter(),rt=b.getRadius(),Mt={},Nt=0,ne=o;Nt<ne.length;Nt++){var ge=ne[Nt];Mt[ge.get("id")]=ge}var be=Object(a.get)(c[0],"labelHeight",14),Ae=Math.max(Object(a.get)(c[0],"offset",0),Pu);Object(a.each)(c,function(zr){var ki=Object(a.get)(Mt,zr.id);if(!!ki){var Ai=zr.x>D.x||zr.x===D.x&&zr.y>D.y,mi=Object(a.isNil)(zr.offsetX)?Hs:zr.offsetX,Ki=Pi(D.x,D.y,rt+Pu,zr.angle),vo=Ae+mi;zr.x=D.x+(Ai?1:-1)*(rt+vo),zr.y=Ki.y}});var Xe=b.start,an=b.end,gn="left",Yn="right",Kn=Object(a.groupBy)(c,function(zr){return zr.x<D.x?gn:Yn}),ir=(rt+Ae)*2+be;Object(a.each)(Kn,function(zr){var ki=zr.length*be;ki>ir&&(ir=Math.min(ki,Math.abs(Xe.y-an.y)))});var cr={minX:Xe.x,maxX:an.x,minY:D.y-ir/2,maxY:D.y+ir/2};Object(a.each)(Kn,function(zr,ki){var Ai=ir/be;zr.length>Ai&&(zr.sort(function(mi,Ki){return Ki.percent-mi.percent}),Object(a.each)(zr,function(mi,Ki){Ki>Ai&&(Mt[mi.id].set("visible",!1),mi.invisible=!0)})),Rl(zr,be,cr)});var Rr=cr.minY,_r=cr.maxY;Object(a.each)(Kn,function(zr,ki){var Ai=ki===Yn;Object(a.each)(zr,function(mi){var Ki=Object(a.get)(Mt,mi&&mi.id);if(!!Ki){if(mi.y<Rr||mi.y>_r){Ki.set("visible",!1);return}var vo=Ki.getChildByIndex(0),po=vo.getCanvasBBox(),yo={x:Ai?po.x:po.maxX,y:po.y+po.height/2};Ta(vo,mi.x-yo.x,mi.y-yo.y),mi.labelLine&&kh(mi,b,Ai)}})})}}function ha(c,o,t,i){Object(a.each)(o,function(b){var D=i.minX,rt=i.minY,Mt=i.maxX,Nt=i.maxY,ne=b.getCanvasBBox(),ge=ne.minX,be=ne.minY,Ae=ne.maxX,Xe=ne.maxY,an=ne.x,gn=ne.y,Yn=ne.width,Kn=ne.height,ir=an,cr=gn;(ge<D||Ae<D)&&(ir=D),(be<rt||Xe<rt)&&(cr=rt),ge>Mt?ir=Mt-Yn:Ae>Mt&&(ir=ir-(Ae-Mt)),be>Nt?cr=Nt-Kn:Xe>Nt&&(cr=cr-(Xe-Nt)),(ir!==an||cr!==gn)&&Ta(b,ir-an,cr-gn)})}function Nh(c,o,t,i){Object(a.each)(o,function(b,D){var rt=b.getCanvasBBox(),Mt=t[D].getBBox();(rt.minX<Mt.minX||rt.minY<Mt.minY||rt.maxX>Mt.maxX||rt.maxY>Mt.maxY)&&b.remove(!0)})}var Bl=100,za=function(){function c(o){o===void 0&&(o={}),this.bitmap={};var t=o.xGap,i=t===void 0?1:t,b=o.yGap,D=b===void 0?8:b;this.xGap=i,this.yGap=D}return c.prototype.hasGap=function(o){for(var t=!0,i=this.bitmap,b=Math.round(o.minX),D=Math.round(o.maxX),rt=Math.round(o.minY),Mt=Math.round(o.maxY),Nt=b;Nt<=D;Nt+=1){if(!i[Nt]){i[Nt]={};continue}if(Nt===b||Nt===D){for(var ne=rt;ne<=Mt;ne++)if(i[Nt][ne]){t=!1;break}}else if(i[Nt][rt]||i[Nt][Mt]){t=!1;break}}return t},c.prototype.fillGap=function(o){for(var t=this.bitmap,i=Math.round(o.minX),b=Math.round(o.maxX),D=Math.round(o.minY),rt=Math.round(o.maxY),Mt=i;Mt<=b;Mt+=1)t[Mt]||(t[Mt]={});for(var Mt=i;Mt<=b;Mt+=this.xGap){for(var Nt=D;Nt<=rt;Nt+=this.yGap)t[Mt][Nt]=!0;t[Mt][rt]=!0}if(this.yGap!==1)for(var Mt=D;Mt<=rt;Mt+=1)t[i][Mt]=!0,t[b][Mt]=!0;if(this.xGap!==1)for(var Mt=i;Mt<=b;Mt+=1)t[Mt][D]=!0,t[Mt][rt]=!0},c.prototype.destroy=function(){this.bitmap={}},c}();function Fl(c,o,t){t===void 0&&(t=Bl);var i=-1,b=c.attr(),D=b.x,rt=b.y,Mt=c.getCanvasBBox(),Nt=Math.sqrt(Mt.width*Mt.width+Mt.height*Mt.height),ne,ge=-i,be=0,Ae=0,Xe=function(ir){var cr=ir*.1;return[cr*Math.cos(cr),cr*Math.sin(cr)]};if(o.hasGap(Mt))return o.fillGap(Mt),!0;for(var an=!1,gn=0,Yn={};Math.min(Math.abs(be),Math.abs(Ae))<Nt&&gn<t;)if(ne=Xe(ge+=i),be=~~ne[0],Ae=~~ne[1],!(!be&&!Ae||Yn[be+"-"+Ae])&&(c.attr({x:D+be,y:rt+Ae}),be+Ae<0&&c.attr("textAlign","right"),gn++,o.hasGap(c.getCanvasBBox()))){o.fillGap(c.getCanvasBBox()),an=!0,Yn[be+"-"+Ae]=!0;break}return an}function _a(c,o,t,i){var b=c.getCanvasBBox(),D=b.width,rt=b.height,Mt={x:o,y:t,textAlign:"center"};switch(i){case 0:Mt.y-=rt+1,Mt.x+=1,Mt.textAlign="left";break;case 1:Mt.y-=rt+1,Mt.x-=1,Mt.textAlign="right";break;case 2:Mt.y+=rt+1,Mt.x-=1,Mt.textAlign="right";break;case 3:Mt.y+=rt+1,Mt.x+=1,Mt.textAlign="left";break;case 5:Mt.y-=rt*2+2;break;case 6:Mt.y+=rt*2+2;break;case 7:Mt.x+=D+1,Mt.textAlign="left";break;case 8:Mt.x-=D+1,Mt.textAlign="right";break;default:break}return c.attr(Mt),c.getCanvasBBox()}function Ks(c,o,t,i){var b=new za;Object(a.each)(o,function(D){var rt=D.find(function(Mt){return Mt.get("type")==="text"});Fl(rt,b)||D.remove(!0)}),b.destroy()}function $o(c,o,t,i){var b=new za;Object(a.each)(o,function(D){for(var rt=D.find(function(Xe){return Xe.get("type")==="text"}),Mt=rt.attr(),Nt=Mt.x,ne=Mt.y,ge=!1,be=0;be<=8;be++){var Ae=_a(rt,Nt,ne,be);if(b.hasGap(Ae)){b.fillGap(Ae),ge=!0;break}}ge||D.remove(!0)}),b.destroy()}var ja=jr.c.dot;function Va(c){if(c.length>4)return[];var o=function(D,rt){return[rt.x-D.x,rt.y-D.y]},t=o(c[0],c[1]),i=o(c[1],c[2]);return[t,i]}function Js(c,o,t){o===void 0&&(o=0),t===void 0&&(t={x:0,y:0});var i=c.x,b=c.y;return{x:(i-t.x)*Math.cos(-o)+(b-t.y)*Math.sin(-o)+t.x,y:(t.x-i)*Math.sin(-o)+(b-t.y)*Math.cos(-o)+t.y}}function mc(c){var o=[{x:c.x,y:c.y},{x:c.x+c.width,y:c.y},{x:c.x+c.width,y:c.y+c.height},{x:c.x,y:c.y+c.height}],t=c.rotation;return t?[Js(o[0],t,o[0]),Js(o[1],t,o[0]),Js(o[2],t,o[0]),Js(o[3],t,o[0])]:o}function bc(c,o){if(c.length>4)return{min:0,max:0};var t=[];return c.forEach(function(i){t.push(ja([i.x,i.y],o))}),{min:Math.min.apply(Math,t),max:Math.max.apply(Math,t)}}function xc(c,o){return c.max>o.min&&c.min<o.max}function Gl(c,o,t){return t===void 0&&(t=0),!(o.x>c.x+c.width+t||o.x+o.width<c.x-t||o.y>c.y+c.height+t||o.y+o.height<c.y-t)}function So(c,o){if(!c.rotation&&!o.rotation)return Gl(c,o);for(var t=mc(c),i=mc(o),b=Object(at.d)(Va(t),Va(i)),D=0;D<b.length;D++){var rt=b[D],Mt=bc(t,rt),Nt=bc(i,rt);if(!xc(Mt,Nt))return!1}return!0}function Du(c,o,t,i){for(var b=0;b<o.length;b++){var D=o[b];if(o[b].get("visible"))for(var rt=b+1;rt<o.length;rt++){var Mt=o[rt];if(D&&Mt&&D!==Mt&&Mt.get("visible")){var Nt=W(D,c[b],Object(a.get)(c[b],"background.padding")),ne=W(Mt,c[rt],Object(a.get)(c[rt],"background.padding"));So(Nt,ne)&&o[rt].set("visible",!1)}}}}var Wa={"#5B8FF9":!0},Ul=function(o){var t=gt.a.toRGB(o).toUpperCase();if(Wa[t])return Wa[t];var i=gt.a.rgb2arr(t),b=i[0],D=i[1],rt=i[2],Mt=(b*299+D*587+rt*114)/1e3<128;return Mt};function zl(c,o,t){if(t.length!==0){var i=t[0].get("element"),b=i.geometry.theme,D=b.labels||{},rt=D.fillColorLight,Mt=D.fillColorDark;t.forEach(function(Nt,ne){var ge=o[ne],be=ge.find(function(Kn){return Kn.get("type")==="text"}),Ae=Qe.fromObject(Nt.getBBox()),Xe=Qe.fromObject(be.getCanvasBBox()),an=!Ae.contains(Xe),gn=Nt.attr("fill"),Yn=Ul(gn);an?be.attr(b.overflowLabels.style):Yn?rt&&be.attr("fill",rt):Mt&&be.attr("fill",Mt)})}}function _l(c,o,t){var i=c.coordinate,b=I(o),D=Qe.fromObject(b.getCanvasBBox()),rt=Qe.fromObject(t.getBBox());return i.isTransposed?rt.height>=D.height:rt.width>=D.width}function Vl(c,o,t){var i=!!c.getAdjust("stack");return i||o.every(function(b,D){var rt=t[D];return _l(c,b,rt)})}function Wl(c,o,t){var i=c.coordinate,b=Qe.fromObject(t.getBBox()),D=I(o);i.isTransposed?D.attr({x:b.minX+b.width/2,textAlign:"center"}):D.attr({y:b.minY+b.height/2,textBaseline:"middle"})}function ku(c,o,t){var i;if(t.length!==0){var b=(i=t[0])===null||i===void 0?void 0:i.get("element"),D=b==null?void 0:b.geometry;if(!(!D||D.type!=="interval")){var rt=Vl(D,o,t);rt&&t.forEach(function(Mt,Nt){var ne=o[Nt];Wl(D,ne,Mt)})}}}function Xl(c){var o=500,t=[],i=Math.max(Math.floor(c.length/o),1);return Object(a.each)(c,function(b,D){D%i==0?t.push(b):b.set("visible",!1)}),t}function Yl(c,o,t){var i;if(t.length!==0){var b=(i=t[0])===null||i===void 0?void 0:i.get("element"),D=b==null?void 0:b.geometry;if(!(!D||D.type!=="interval")){var rt=Xl(o),Mt=D.getXYFields()[0],Nt=[],ne=[],ge=Object(a.groupBy)(rt,function(gn){return gn.get("data")[Mt]}),be=Object(a.uniq)(Object(a.map)(rt,function(gn){return gn.get("data")[Mt]})),Ae;rt.forEach(function(gn){gn.set("visible",!0)});var Xe=function(Yn){Yn&&(Yn.length&&ne.push(Yn.pop()),ne.push.apply(ne,Yn))};for(Object(a.size)(be)>0&&(Ae=be.shift(),Xe(ge[Ae])),Object(a.size)(be)>0&&(Ae=be.pop(),Xe(ge[Ae])),Object(a.each)(be.reverse(),function(gn){Xe(ge[gn])});ne.length>0;){var an=ne.shift();an.get("visible")&&(jt(an,Nt)?an.set("visible",!1):Nt.push(an))}}}}function Ia(c,o){var t=c.getXYFields()[1],i=[],b=o.sort(function(D,rt){return D.get("data")[t]-D.get("data")[t]});return b.length>0&&i.push(b.shift()),b.length>0&&i.push(b.pop()),i.push.apply(i,b),i}function is(c,o,t){return c.some(function(i){return t(i,o)})}function Hl(c,o,t){t===void 0&&(t=0);var i=Math.max(0,Math.min(c.x+c.width+t,o.x+o.width+t)-Math.max(c.x-t,o.x-t)),b=Math.max(0,Math.min(c.y+c.height+t,o.y+o.height+t)-Math.max(c.y-t,o.y-t));return i*b}function Kl(c,o){return is(c,o,function(t,i){var b=I(t),D=I(i);return Hl(b.getCanvasBBox(),D.getCanvasBBox(),2)>0})}function Ru(c,o,t,i,b){var D,rt;if(t.length!==0){var Mt=(D=t[0])===null||D===void 0?void 0:D.get("element"),Nt=Mt==null?void 0:Mt.geometry;if(!(!Nt||Nt.type!=="point")){var ne=Nt.getXYFields(),ge=ne[0],be=ne[1],Ae=Object(a.groupBy)(o,function(gn){return gn.get("data")[ge]}),Xe=[],an=b&&b.offset||((rt=c[0])===null||rt===void 0?void 0:rt.offset)||12;Object(a.map)(Object(a.keys)(Ae).reverse(),function(gn){for(var Yn=Ia(Nt,Ae[gn]);Yn.length;){var Kn=Yn.shift(),ir=I(Kn);if(is(Xe,Kn,function(_r,zr){return _r.get("data")[ge]===zr.get("data")[ge]&&_r.get("data")[be]===zr.get("data")[be]})){ir.set("visible",!1);continue}var cr=Kl(Xe,Kn),Rr=!1;if(cr&&(ir.attr("y",ir.attr("y")+2*an),Rr=Kl(Xe,Kn)),Rr){ir.set("visible",!1);continue}Xe.push(Kn)}})}}}function Lh(c,o){var t=c.getXYFields()[1],i=[],b=o.sort(function(D,rt){return D.get("data")[t]-D.get("data")[t]});return b.length>0&&i.push(b.shift()),b.length>0&&i.push(b.pop()),i.push.apply(i,b),i}function Jl(c,o,t){return c.some(function(i){return t(i,o)})}function Wr(c,o,t){t===void 0&&(t=0);var i=Math.max(0,Math.min(c.x+c.width+t,o.x+o.width+t)-Math.max(c.x-t,o.x-t)),b=Math.max(0,Math.min(c.y+c.height+t,o.y+o.height+t)-Math.max(c.y-t,o.y-t));return i*b}function Oc(c,o){return Jl(c,o,function(t,i){var b=I(t),D=I(i);return Wr(b.getCanvasBBox(),D.getCanvasBBox(),2)>0})}function Ql(c,o,t,i,b){var D,rt;if(t.length!==0){var Mt=(D=t[0])===null||D===void 0?void 0:D.get("element"),Nt=Mt==null?void 0:Mt.geometry;if(!(!Nt||["path","line","area"].indexOf(Nt.type)<0)){var ne=Nt.getXYFields(),ge=ne[0],be=ne[1],Ae=Object(a.groupBy)(o,function(gn){return gn.get("data")[ge]}),Xe=[],an=b&&b.offset||((rt=c[0])===null||rt===void 0?void 0:rt.offset)||12;Object(a.map)(Object(a.keys)(Ae).reverse(),function(gn){for(var Yn=Lh(Nt,Ae[gn]);Yn.length;){var Kn=Yn.shift(),ir=I(Kn);if(Jl(Xe,Kn,function(_r,zr){return _r.get("data")[ge]===zr.get("data")[ge]&&_r.get("data")[be]===zr.get("data")[be]})){ir.set("visible",!1);continue}var cr=Oc(Xe,Kn),Rr=!1;if(cr&&(ir.attr("y",ir.attr("y")+2*an),Rr=Oc(Xe,Kn)),Rr){ir.set("visible",!1);continue}Xe.push(Kn)}})}}}var Nu;function Zl(){return Nu||(Nu=document.createElement("canvas").getContext("2d")),Nu}var Qs=Object(a.memoize)(function(c,o){o===void 0&&(o={});var t=o.fontSize,i=o.fontFamily,b=o.fontWeight,D=o.fontStyle,rt=o.fontVariant,Mt=Zl();return Mt.font=[D,rt,b,t+"px",i].join(" "),Mt.measureText(Object(a.isString)(c)?c:"").width},function(c,o){return o===void 0&&(o={}),Object(at.d)([c],Object(a.values)(o)).join("")}),$l=function(o,t,i){var b=16,D=Qs("...",i),rt;Object(a.isString)(o)?rt=o:rt=Object(a.toString)(o);var Mt=t,Nt=[],ne,ge;if(Qs(o,i)<=t)return o;for(;ne=rt.substr(0,b),ge=Qs(ne,i),!(ge+D>Mt&&ge>Mt);)if(Nt.push(ne),Mt-=ge,rt=rt.substr(b),!rt)return Nt.join("");for(;ne=rt.substr(0,1),ge=Qs(ne,i),!(ge+D>Mt);)if(Nt.push(ne),Mt-=ge,rt=rt.substr(1),!rt)return Nt.join("");return Nt.join("")+"..."};function ql(c,o,t,i,b){if(!(o.length<=0)){var D=(b==null?void 0:b.direction)||["top","right","bottom","left"],rt=(b==null?void 0:b.action)||"translate",Mt=(b==null?void 0:b.margin)||0,Nt=o[0].get("coordinate");if(!!Nt){var ne=ar(Nt,Mt),ge=ne.minX,be=ne.minY,Ae=ne.maxX,Xe=ne.maxY;Object(a.each)(o,function(an){var gn=an.getCanvasBBox(),Yn=gn.minX,Kn=gn.minY,ir=gn.maxX,cr=gn.maxY,Rr=gn.x,_r=gn.y,zr=gn.width,ki=gn.height,Ai=Rr,mi=_r;if(D.indexOf("left")>=0&&(Yn<ge||ir<ge)&&(Ai=ge),D.indexOf("top")>=0&&(Kn<be||cr<be)&&(mi=be),D.indexOf("right")>=0&&(Yn>Ae?Ai=Ae-zr:ir>Ae&&(Ai=Ai-(ir-Ae))),D.indexOf("bottom")>=0&&(Kn>Xe?mi=Xe-ki:cr>Xe&&(mi=mi-(cr-Xe))),Ai!==Rr||mi!==_r){var Ki=Ai-Rr;if(rt==="translate")Ta(an,Ki,mi-_r);else if(rt==="ellipsis"){var vo=an.findAll(function(po){return po.get("type")==="text"});vo.forEach(function(po){var yo=Object(a.pick)(po.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),wo=po.getCanvasBBox(),Z=$l(po.attr("text"),wo.width-Math.abs(Ki),yo);po.attr("text",Z)})}else an.hide()}})}}}function tf(c,o,t){var i={fillOpacity:Object(a.isNil)(c.attr("fillOpacity"))?1:c.attr("fillOpacity"),strokeOpacity:Object(a.isNil)(c.attr("strokeOpacity"))?1:c.attr("strokeOpacity"),opacity:Object(a.isNil)(c.attr("opacity"))?1:c.attr("opacity")};c.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),c.animate(i,o)}function ef(c,o,t){var i={fillOpacity:0,strokeOpacity:0,opacity:0},b=o.easing,D=o.duration,rt=o.delay;c.animate(i,D,b,function(){c.remove(!0)},rt)}function nf(c,o,t){var i,b=o[0],D=o[1];return c.applyToMatrix([b,D,1]),t==="x"?(c.setMatrix(jr.a.transform(c.getMatrix(),[["t",-b,-D],["s",.01,1],["t",b,D]])),i=jr.a.transform(c.getMatrix(),[["t",-b,-D],["s",100,1],["t",b,D]])):t==="y"?(c.setMatrix(jr.a.transform(c.getMatrix(),[["t",-b,-D],["s",1,.01],["t",b,D]])),i=jr.a.transform(c.getMatrix(),[["t",-b,-D],["s",1,100],["t",b,D]])):t==="xy"&&(c.setMatrix(jr.a.transform(c.getMatrix(),[["t",-b,-D],["s",.01,.01],["t",b,D]])),i=jr.a.transform(c.getMatrix(),[["t",-b,-D],["s",100,100],["t",b,D]])),i}function Xa(c,o,t,i,b){var D=t.start,rt=t.end,Mt=t.getWidth(),Nt=t.getHeight(),ne,ge;b==="y"?(ne=D.x+Mt/2,ge=i.y<D.y?i.y:D.y):b==="x"?(ne=i.x>D.x?i.x:D.x,ge=D.y+Nt/2):b==="xy"&&(t.isPolar?(ne=t.getCenter().x,ge=t.getCenter().y):(ne=(D.x+rt.x)/2,ge=(D.y+rt.y)/2));var be=nf(c,[ne,ge],b);c.animate({matrix:be},o)}function rf(c,o,t){var i=t.coordinate,b=t.minYPoint;Xa(c,o,i,b,"x")}function of(c,o,t){var i=t.coordinate,b=t.minYPoint;Xa(c,o,i,b,"y")}function af(c,o,t){var i=t.coordinate,b=t.minYPoint;Xa(c,o,i,b,"xy")}function sf(c,o,t){var i=c.getTotalLength();c.attr("lineDash",[i]),c.animate(function(b){return{lineDashOffset:(1-b)*i}},o)}function Lu(c,o,t){var i=t.toAttrs,b=i.x,D=i.y;delete i.x,delete i.y,c.attr(i),c.animate({x:b,y:D},o)}function uf(c,o,t){var i=c.getBBox(),b=c.get("origin").mappingData,D=b.points,rt=D[0].y-D[1].y>0?i.maxX:i.minX,Mt=(i.minY+i.maxY)/2;c.applyToMatrix([rt,Mt,1]);var Nt=jr.a.transform(c.getMatrix(),[["t",-rt,-Mt],["s",.01,1],["t",rt,Mt]]);c.setMatrix(Nt),c.animate({matrix:jr.a.transform(c.getMatrix(),[["t",-rt,-Mt],["s",100,1],["t",rt,Mt]])},o)}function Pa(c,o,t){var i=c.getBBox(),b=c.get("origin").mappingData,D=(i.minX+i.maxX)/2,rt=b.points,Mt=rt[0].y-rt[1].y<=0?i.maxY:i.minY;c.applyToMatrix([D,Mt,1]);var Nt=jr.a.transform(c.getMatrix(),[["t",-D,-Mt],["s",1,.01],["t",D,Mt]]);c.setMatrix(Nt),c.animate({matrix:jr.a.transform(c.getMatrix(),[["t",-D,-Mt],["s",1,100],["t",D,Mt]])},o)}function Es(c,o){var t,i=Object(lo.getArcParams)(c,o),b=i.startAngle,D=i.endAngle;return!Object(a.isNumberEqual)(b,-Math.PI*.5)&&b<-Math.PI*.5&&(b+=Math.PI*2),!Object(a.isNumberEqual)(D,-Math.PI*.5)&&D<-Math.PI*.5&&(D+=Math.PI*2),o[5]===0&&(t=[D,b],b=t[0],D=t[1]),Object(a.isNumberEqual)(b,Math.PI*1.5)&&(b=Math.PI*-.5),Object(a.isNumberEqual)(D,Math.PI*-.5)&&(D=Math.PI*1.5),{startAngle:b,endAngle:D}}function xa(c){var o;return c[0]==="M"||c[0]==="L"?o=[c[1],c[2]]:(c[0]==="a"||c[0]==="A")&&(o=[c[c.length-2],c[c.length-1]]),o}function qo(c){var o,t,i,b=c.filter(function(cr){return cr[0]==="A"||cr[0]==="a"}),D=b[0],rt=b.length>1?b[1]:b[0],Mt=c.indexOf(D),Nt=c.indexOf(rt),ne=xa(c[Mt-1]),ge=xa(c[Nt-1]),be=Es(ne,D),Ae=be.startAngle,Xe=be.endAngle,an=Es(ge,rt),gn=an.startAngle,Yn=an.endAngle;Object(a.isNumberEqual)(Ae,gn)&&Object(a.isNumberEqual)(Xe,Yn)?(t=Ae,i=Xe):(t=Math.min(Ae,gn),i=Math.max(Xe,Yn));var Kn=D[1],ir=b[b.length-1][1];return Kn<ir?(o=[ir,Kn],Kn=o[0],ir=o[1]):Kn===ir&&(ir=0),{startAngle:t,endAngle:i,radius:Kn,innerRadius:ir}}function Zs(c,o,t){var i=t.toAttrs,b=t.coordinate,D=i.path||[],rt=D.map(function(ir){return ir[0]});if(!(D.length<1)){var Mt=qo(D),Nt=Mt.startAngle,ne=Mt.endAngle,ge=Mt.radius,be=Mt.innerRadius,Ae=qo(c.attr("path")),Xe=Ae.startAngle,an=Ae.endAngle,gn=b.getCenter(),Yn=Nt-Xe,Kn=ne-an;c.animate(function(ir){var cr=Xe+ir*Yn,Rr=an+ir*Kn;return Object(at.a)(Object(at.a)({},i),{path:Object(a.isEqual)(rt,["M","A","A","Z"])?Mo(gn.x,gn.y,ge,cr,Rr):no(gn.x,gn.y,ge,cr,Rr,be)})},Object(at.a)(Object(at.a)({},o),{callback:function(){c.attr("path",D)}}))}}function Ya(c,o,t){var i=vr(t.coordinate,20),b=i.type,D=i.startState,rt=i.endState,Mt=c.setClip({type:b,attrs:D});Mt.animate(rt,Object(at.a)(Object(at.a)({},o),{callback:function(){c&&!c.get("destroyed")&&c.set("clipShape",null),Mt.remove(!0)}}))}function os(c,o,t){if(c.isGroup())Object(a.each)(c.getChildren(),function(Mt){os(Mt,o,t)});else{var i=c.getBBox(),b=(i.minX+i.maxX)/2,D=(i.minY+i.maxY)/2;if(c.applyToMatrix([b,D,1]),t==="zoomIn"){var rt=jr.a.transform(c.getMatrix(),[["t",-b,-D],["s",.01,.01],["t",b,D]]);c.setMatrix(rt),c.animate({matrix:jr.a.transform(c.getMatrix(),[["t",-b,-D],["s",100,100],["t",b,D]])},o)}else c.animate({matrix:jr.a.transform(c.getMatrix(),[["t",-b,-D],["s",.01,.01],["t",b,D]])},Object(at.a)(Object(at.a)({},o),{callback:function(){c.remove(!0)}}))}}function Bu(c,o,t){os(c,o,"zoomIn")}function Oa(c,o,t){os(c,o,"zoomOut")}function Ko(c){return[e.TOP,e.BOTTOM].includes(c)?{offsetX:0,offsetY:c===e.TOP?-8:8,style:{textAlign:"center",textBaseline:c===e.TOP?"bottom":"top"}}:[e.LEFT,e.RIGHT].includes(c)?{offsetX:c===e.LEFT?-8:8,offsetY:0,style:{textAlign:c===e.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function Bo(c,o,t){return{x:c.x+o*Math.cos(t),y:c.y+o*Math.sin(t)}}var Sa=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getDefaultCfg=function(){return Object(a.deepMix)({},c.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:c.prototype.getDefaultTitleCfg.call(this)})},o.prototype.render=function(){c.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.getRegion=function(t,i){var b=1/2,D={x:.5,y:.5},rt=Math.PI*2/t,Mt=-1*Math.PI/2+rt*i,Nt=b/(1+1/Math.sin(rt/2)),ne=Bo(D,b-Nt,Mt),ge=Math.PI*5/4,be=Math.PI*1/4;return{start:Bo(ne,Nt,ge),end:Bo(ne,Nt,be)}},o.prototype.afterEachView=function(t,i){this.processAxis(t,i)},o.prototype.beforeEachView=function(t,i){},o.prototype.generateFacets=function(t){var i=this,b=this.cfg,D=b.fields,rt=b.type,Mt=D[0];if(!Mt)throw new Error("No `fields` specified!");var Nt=this.getFieldValues(t,Mt),ne=Nt.length,ge=[];return Nt.forEach(function(be,Ae){var Xe=[{field:Mt,value:be,values:Nt}],an=Object(a.filter)(t,i.getFacetDataFilter(Xe)),gn={type:rt,data:an,region:i.getRegion(ne,Ae),columnValue:be,columnField:Mt,columnIndex:Ae,columnValuesLength:ne,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};ge.push(gn)}),ge},o.prototype.getXAxisOption=function(t,i,b,D){return b},o.prototype.getYAxisOption=function(t,i,b,D){return b},o.prototype.renderTitle=function(){var t=this;Object(a.each)(this.facets,function(i){var b=i.columnValue,D=i.view,rt=Object(a.get)(t.cfg.title,"formatter"),Mt=Object(a.deepMix)({position:["50%","0%"],content:rt?rt(b):b},Ko(e.TOP),t.cfg.title);D.annotation().text(Mt)})},o}(Di),wa=Sa,Fu=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getDefaultCfg=function(){return Object(a.deepMix)({},c.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:c.prototype.getDefaultTitleCfg.call(this)})},o.prototype.render=function(){c.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.afterEachView=function(t,i){this.processAxis(t,i)},o.prototype.beforeEachView=function(t,i){},o.prototype.generateFacets=function(t){var i=this,b=this.cfg.fields,D=this.cfg.cols,rt=b[0];if(!rt)throw new Error("No `fields` specified!");var Mt=this.getFieldValues(t,rt),Nt=Mt.length;D=D||Nt;var ne=this.getPageCount(Nt,D),ge=[];return Mt.forEach(function(be,Ae){var Xe=i.getRowCol(Ae,D),an=Xe.row,gn=Xe.col,Yn=[{field:rt,value:be,values:Mt}],Kn=Object(a.filter)(t,i.getFacetDataFilter(Yn)),ir={type:i.cfg.type,data:Kn,region:i.getRegion(ne,D,gn,an),columnValue:be,rowValue:be,columnField:rt,rowField:null,columnIndex:gn,rowIndex:an,columnValuesLength:D,rowValuesLength:ne,total:Nt};ge.push(ir)}),ge},o.prototype.getXAxisOption=function(t,i,b,D){return D.rowIndex!==D.rowValuesLength-1&&D.columnValuesLength*D.rowIndex+D.columnIndex+1+D.columnValuesLength<=D.total?Object(at.a)(Object(at.a)({},b),{label:null,title:null}):b},o.prototype.getYAxisOption=function(t,i,b,D){return D.columnIndex!==0?Object(at.a)(Object(at.a)({},b),{title:null,label:null}):b},o.prototype.renderTitle=function(){var t=this;Object(a.each)(this.facets,function(i){var b=i.columnValue,D=i.view,rt=Object(a.get)(t.cfg.title,"formatter"),Mt=Object(a.deepMix)({position:["50%","0%"],content:rt?rt(b):b},Ko(e.TOP),t.cfg.title);D.annotation().text(Mt)})},o.prototype.getPageCount=function(t,i){return Math.floor((t+i-1)/i)},o.prototype.getRowCol=function(t,i){var b=Math.floor(t/i),D=t%i;return{row:b,col:D}},o}(Di),cf=Fu,Ha=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getDefaultCfg=function(){return Object(a.deepMix)({},c.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:Object(at.a)({},c.prototype.getDefaultTitleCfg.call(this)),rowTitle:Object(at.a)({},c.prototype.getDefaultTitleCfg.call(this))})},o.prototype.render=function(){c.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.afterEachView=function(t,i){this.processAxis(t,i)},o.prototype.beforeEachView=function(t,i){},o.prototype.generateFacets=function(t){for(var i=this.cfg,b=i.fields,D=i.type,rt=b.length,Mt=rt,Nt=[],ne=0;ne<Mt;ne++)for(var ge=b[ne],be=0;be<rt;be++){var Ae=b[be],Xe={type:D,data:t,region:this.getRegion(rt,Mt,ne,be),columnValue:ge,rowValue:Ae,columnField:ge,rowField:Ae,columnIndex:ne,rowIndex:be,columnValuesLength:Mt,rowValuesLength:rt};Nt.push(Xe)}return Nt},o.prototype.getXAxisOption=function(t,i,b,D){return D.rowIndex!==D.rowValuesLength-1?Object(at.a)(Object(at.a)({},b),{label:null,title:null}):b},o.prototype.getYAxisOption=function(t,i,b,D){return D.columnIndex!==0?Object(at.a)(Object(at.a)({},b),{title:null,label:null}):b},o.prototype.renderTitle=function(){var t=this;Object(a.each)(this.facets,function(i,b){var D=i.columnIndex,rt=i.rowIndex,Mt=i.columnValuesLength,Nt=i.rowValuesLength,ne=i.columnValue,ge=i.rowValue,be=i.view;if(rt===0){var Ae=Object(a.get)(t.cfg.columnTitle,"formatter"),Xe=Object(a.deepMix)({position:["50%","0%"],content:Ae?Ae(ne):ne},Ko(e.TOP),t.cfg.columnTitle);be.annotation().text(Xe)}if(D===Mt-1){var Ae=Object(a.get)(t.cfg.rowTitle,"formatter"),Xe=Object(a.deepMix)({position:["100%","50%"],content:Ae?Ae(ge):ge},Ko(e.RIGHT),t.cfg.rowTitle);be.annotation().text(Xe)}})},o}(Di),Bh=Ha,Fh=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getDefaultCfg=function(){return Object(a.deepMix)({},c.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:c.prototype.getDefaultTitleCfg.call(this),transpose:!1})},o.prototype.render=function(){c.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.beforeEachView=function(t,i){this.cfg.transpose?i.columnIndex%2==0?t.coordinate().transpose().reflect("x"):t.coordinate().transpose():i.rowIndex%2!=0&&t.coordinate().reflect("y")},o.prototype.afterEachView=function(t,i){this.processAxis(t,i)},o.prototype.generateFacets=function(t){var i=this,b=this.cfg.fields[0],D=[],rt=1,Mt=1,Nt=[""],ne=[""],ge,be;return this.cfg.transpose?(ge=b,Nt=this.getFieldValues(t,ge).slice(0,2),rt=Nt.length):(be=b,ne=this.getFieldValues(t,be).slice(0,2),Mt=ne.length),Nt.forEach(function(Ae,Xe){ne.forEach(function(an,gn){var Yn=[{field:ge,value:Ae,values:Nt},{field:be,value:an,values:ne}],Kn=Object(a.filter)(t,i.getFacetDataFilter(Yn)),ir={type:i.cfg.type,data:Kn,region:i.getRegion(Mt,rt,Xe,gn),columnValue:Ae,rowValue:an,columnField:ge,rowField:be,columnIndex:Xe,rowIndex:gn,columnValuesLength:rt,rowValuesLength:Mt};D.push(ir)})}),D},o.prototype.getXAxisOption=function(t,i,b,D){return D.columnIndex===1||D.rowIndex===1?Object(at.a)(Object(at.a)({},b),{label:null,title:null}):b},o.prototype.getYAxisOption=function(t,i,b,D){return b},o.prototype.renderTitle=function(){var t=this;Object(a.each)(this.facets,function(i,b){var D=i.columnValue,rt=i.rowValue,Mt=i.view,Nt=Object(a.get)(t.cfg.title,"formatter");if(t.cfg.transpose){var ne=Object(a.deepMix)({position:["50%","0%"],content:Nt?Nt(D):D},Ko(e.TOP),t.cfg.title);Mt.annotation().text(ne)}else{var ne=Object(a.deepMix)({position:["100%","50%"],content:Nt?Nt(rt):rt},Ko(e.RIGHT),t.cfg.title);Mt.annotation().text(ne)}})},o}(Di),Gh=Fh,Uh=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.afterEachView=function(t,i){this.processAxis(t,i)},o.prototype.beforeEachView=function(t,i){},o.prototype.getDefaultCfg=function(){return Object(a.deepMix)({},c.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:Object(at.a)({},c.prototype.getDefaultTitleCfg.call(this)),rowTitle:Object(at.a)({},c.prototype.getDefaultTitleCfg.call(this))})},o.prototype.render=function(){c.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.generateFacets=function(t){var i=this,b=this.cfg.fields,D=b[0],rt=b[1],Mt=[],Nt=1,ne=1,ge=[""],be=[""];return D&&(ge=this.getFieldValues(t,D),Nt=ge.length),rt&&(be=this.getFieldValues(t,rt),ne=be.length),ge.forEach(function(Ae,Xe){be.forEach(function(an,gn){var Yn=[{field:D,value:Ae,values:ge},{field:rt,value:an,values:be}],Kn=Object(a.filter)(t,i.getFacetDataFilter(Yn)),ir={type:i.cfg.type,data:Kn,region:i.getRegion(ne,Nt,Xe,gn),columnValue:Ae,rowValue:an,columnField:D,rowField:rt,columnIndex:Xe,rowIndex:gn,columnValuesLength:Nt,rowValuesLength:ne};Mt.push(ir)})}),Mt},o.prototype.renderTitle=function(){var t=this;Object(a.each)(this.facets,function(i,b){var D=i.columnIndex,rt=i.rowIndex,Mt=i.columnValuesLength,Nt=i.columnValue,ne=i.rowValue,ge=i.view;if(rt===0){var be=Object(a.get)(t.cfg.columnTitle,"formatter"),Ae=Object(a.deepMix)({position:["50%","0%"],content:be?be(Nt):Nt},Ko(e.TOP),t.cfg.columnTitle);ge.annotation().text(Ae)}if(D===Mt-1){var be=Object(a.get)(t.cfg.rowTitle,"formatter"),Ae=Object(a.deepMix)({position:["100%","50%"],content:be?be(ne):ne},Ko(e.RIGHT),t.cfg.rowTitle);ge.annotation().text(Ae)}})},o.prototype.getXAxisOption=function(t,i,b,D){return D.rowIndex!==D.rowValuesLength-1?Object(at.a)(Object(at.a)({},b),{title:null,label:null}):D.columnIndex!==Math.floor((D.columnValuesLength-1)/2)?Object(at.a)(Object(at.a)({},b),{title:null}):b},o.prototype.getYAxisOption=function(t,i,b,D){return D.columnIndex!==0?Object(at.a)(Object(at.a)({},b),{title:null,label:null}):D.rowIndex!==Math.floor((D.rowValuesLength-1)/2)?Object(at.a)(Object(at.a)({},b),{title:null}):b},o}(Di),lf=Uh,Sc=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.afterChartRender=function(){t.facets&&t.cfg.line&&(t.container.clear(),t.drawLines(t.facets))},t}return o.prototype.afterEachView=function(t,i){this.processAxis(t,i)},o.prototype.beforeEachView=function(t,i){},o.prototype.init=function(){c.prototype.init.call(this),this.view.on(m.AFTER_RENDER,this.afterChartRender)},o.prototype.getDefaultCfg=function(){return Object(a.deepMix)({},c.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:c.prototype.getDefaultTitleCfg.call(this)})},o.prototype.generateFacets=function(t){var i=this.cfg.fields;if(!i.length)throw new Error("Please specify for the fields for rootFacet!");var b=[],D={type:this.cfg.type,data:t,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return b.push(D),D.children=this.getChildFacets(t,1,b),this.setRegion(b),b},o.prototype.setRegion=function(t){var i=this;this.forceColIndex(t),t.forEach(function(b){b.region=i.getRegion(b.rowValuesLength,b.columnValuesLength,b.columnIndex,b.rowIndex)})},o.prototype.getRegion=function(t,i,b,D){var rt=1/i,Mt=1/t,Nt={x:rt*b,y:Mt*D},ne={x:Nt.x+rt,y:Nt.y+Mt*2/3};return{start:Nt,end:ne}},o.prototype.forceColIndex=function(t){var i=this,b=[],D=0;t.forEach(function(Ae){i.isLeaf(Ae)&&(b.push(Ae),Ae.columnIndex=D,D++)}),b.forEach(function(Ae){Ae.columnValuesLength=b.length});for(var rt=this.cfg.fields.length,Mt=rt-1;Mt>=0;Mt--)for(var Nt=this.getFacetsByLevel(t,Mt),ne=0,ge=Nt;ne<ge.length;ne++){var be=ge[ne];this.isLeaf(be)||(be.originColIndex=be.columnIndex,be.columnIndex=this.getRegionIndex(be.children),be.columnValuesLength=b.length)}},o.prototype.getFacetsByLevel=function(t,i){var b=[];return t.forEach(function(D){D.rowIndex===i&&b.push(D)}),b},o.prototype.getRegionIndex=function(t){var i=t[0],b=t[t.length-1];return(b.columnIndex-i.columnIndex)/2+i.columnIndex},o.prototype.isLeaf=function(t){return!t.children||!t.children.length},o.prototype.getRows=function(){return this.cfg.fields.length+1},o.prototype.getChildFacets=function(t,i,b){var D=this,rt=this.cfg.fields,Mt=rt.length;if(!(Mt<i)){var Nt=[],ne=rt[i-1],ge=this.getFieldValues(t,ne);return ge.forEach(function(be,Ae){var Xe=[{field:ne,value:be,values:ge}],an=t.filter(D.getFacetDataFilter(Xe));if(an.length){var gn={type:D.cfg.type,data:an,region:null,columnValue:be,rowValue:"",columnField:ne,rowField:"",columnIndex:Ae,rowValuesLength:D.getRows(),columnValuesLength:1,rowIndex:i,children:D.getChildFacets(an,i+1,b)};Nt.push(gn),b.push(gn)}}),Nt}},o.prototype.render=function(){c.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.renderTitle=function(){var t=this;Object(a.each)(this.facets,function(i){var b=i.columnValue,D=i.view,rt=Object(a.get)(t.cfg.title,"formatter"),Mt=Object(a.deepMix)({position:["50%","0%"],content:rt?rt(b):b},Ko(e.TOP),t.cfg.title);D.annotation().text(Mt)})},o.prototype.drawLines=function(t){var i=this;t.forEach(function(b){if(!i.isLeaf(b)){var D=b.children;i.addFacetLines(b,D)}})},o.prototype.addFacetLines=function(t,i){var b=this,D=t.view,rt=D.coordinateBBox,Mt={x:rt.x+rt.width/2,y:rt.y+rt.height};i.forEach(function(Nt){var ne=Nt.view.coordinateBBox,ge={x:ne.bl.x+(ne.tr.x-ne.bl.x)/2,y:ne.tr.y},be={x:Mt.x,y:Mt.y+(ge.y-Mt.y)/2},Ae={x:ge.x,y:be.y};b.drawLine([Mt,be,Ae,ge])})},o.prototype.getPath=function(t){var i=[],b=this.cfg.line.smooth;return b?(i.push(["M",t[0].x,t[0].y]),i.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y])):t.forEach(function(D,rt){rt===0?i.push(["M",D.x,D.y]):i.push(["L",D.x,D.y])}),i},o.prototype.drawLine=function(t){var i=this.getPath(t),b=this.cfg.line.style;this.container.addShape("path",{attrs:Object(a.assign)({path:i},b)})},o.prototype.getXAxisOption=function(t,i,b,D){return D.rowIndex!==D.rowValuesLength-1?Object(at.a)(Object(at.a)({},b),{title:null,label:null}):b},o.prototype.getYAxisOption=function(t,i,b,D){return D.originColIndex!==0&&D.columnIndex!==0?Object(at.a)(Object(at.a)({},b),{title:null,label:null}):b},o}(Di),zh=Sc;function ff(c){var o=Object(at.d)(c);o.sort(function(i,b){return i-b});var t=o.length;return t===0?0:t%2==1?o[(t-1)/2]:(o[t/2]+o[t/2-1])/2}function hf(c){var o=Object(a.reduce)(c,function(t,i){return t+=isNaN(i)||!Object(a.isNumber)(i)?0:i},0);return c.length===0?0:o/c.length}function $s(c,o){var t;switch(c){case"start":return 0;case"end":return 1;case"median":{t=o.isCategory?ff(o.values.map(function(i,b){return b})):ff(o.values);break}case"mean":{t=o.isCategory?(o.values.length-1)/2:hf(o.values);break}case"min":t=o.isCategory?0:o[c];break;case"max":t=o.isCategory?o.values.length-1:o[c];break;default:t=c;break}return o.scale(t)}var Gu=["regionFilter","shape"],_h=function(c){Object(at.b)(o,c);function o(t){var i=c.call(this,t)||this;return i.cache=new Map,i.foregroundContainer=i.view.getLayer(A.FORE).addGroup(),i.backgroundContainer=i.view.getLayer(A.BG).addGroup(),i.option=[],i}return Object.defineProperty(o.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.layout=function(){this.update()},o.prototype.render=function(){},o.prototype.update=function(){var t=this;this.onAfterRender(function(){var b=new Map;Object(a.each)(t.option,function(D){if(Object(a.includes)(Gu,D.type)){var rt=t.updateOrCreate(D);rt&&b.set(t.getCacheKey(D),rt)}}),t.cache=t.syncCache(b)});var i=new Map;Object(a.each)(this.option,function(b){if(!Object(a.includes)(Gu,b.type)){var D=t.updateOrCreate(b);D&&i.set(t.getCacheKey(b),D)}}),this.cache=this.syncCache(i)},o.prototype.clear=function(t){t===void 0&&(t=!1),c.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),t&&(this.option=[])},o.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},o.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(i){t.push(i)}),t},o.prototype.clearComponents=function(){this.getComponents().forEach(function(t){t.component.destroy()}),this.cache.clear()},o.prototype.onAfterRender=function(t){this.view.getOptions().animate?this.view.geometries.forEach(function(i){i.animateOption&&i.once(O.AFTER_DRAW_ANIMATE,function(){t()})}):this.view.getRootView().once(m.AFTER_RENDER,function(){t()})},o.prototype.createAnnotation=function(t){var i=t.type,b=Qr.Annotation[Object(a.upperFirst)(i)];if(b){var D=this.getAnnotationTheme(i),rt=this.getAnnotationCfg(i,t,D),Mt=new b(rt);return{component:Mt,layer:this.isTop(rt)?A.FORE:A.BG,direction:e.NONE,type:r.ANNOTATION,extra:t}}},o.prototype.annotation=function(t){this.option.push(t)},o.prototype.arc=function(t){return this.annotation(Object(at.a)({type:"arc"},t)),this},o.prototype.image=function(t){return this.annotation(Object(at.a)({type:"image"},t)),this},o.prototype.line=function(t){return this.annotation(Object(at.a)({type:"line"},t)),this},o.prototype.region=function(t){return this.annotation(Object(at.a)({type:"region"},t)),this},o.prototype.text=function(t){return this.annotation(Object(at.a)({type:"text"},t)),this},o.prototype.dataMarker=function(t){return this.annotation(Object(at.a)({type:"dataMarker"},t)),this},o.prototype.dataRegion=function(t){this.annotation(Object(at.a)({type:"dataRegion"},t))},o.prototype.regionFilter=function(t){this.annotation(Object(at.a)({type:"regionFilter"},t))},o.prototype.shape=function(t){this.annotation(Object(at.a)({type:"shape"},t))},o.prototype.html=function(t){this.annotation(Object(at.a)({type:"html"},t))},o.prototype.parsePosition=function(t){var i=this.view.getXScale(),b=this.view.getScalesByDim("y"),D=Object(a.isFunction)(t)?t.call(null,i,b):t,rt=0,Mt=0;if(Object(a.isArray)(D)){var Nt=D[0],ne=D[1];if(Object(a.isString)(Nt)&&Nt.indexOf("%")!==-1&&!isNaN(Nt.slice(0,-1)))return this.parsePercentPosition(D);rt=$s(Nt,i),Mt=$s(ne,Object.values(b)[0])}else if(!Object(a.isNil)(D))for(var ge=0,be=Object(a.keys)(D);ge<be.length;ge++){var Ae=be[ge],Xe=D[Ae];Ae===i.field&&(rt=$s(Xe,i)),b[Ae]&&(Mt=$s(Xe,b[Ae]))}return this.view.getCoordinate().convert({x:rt,y:Mt})},o.prototype.getRegionPoints=function(t,i){var b=this,D=this.view.getXScale(),rt=this.view.getScalesByDim("y"),Mt=Object.values(rt)[0],Nt=D.field,ne=this.view.getData(),ge=Object(a.isArray)(t)?t[0]:t[Nt],be=Object(a.isArray)(i)?i[0]:i[Nt],Ae=[],Xe;return Object(a.each)(ne,function(an,gn){if(an[Nt]===ge&&(Xe=gn),gn>=Xe){var Yn=b.parsePosition([an[Nt],an[Mt.field]]);Yn&&Ae.push(Yn)}if(an[Nt]===be)return!1}),Ae},o.prototype.parsePercentPosition=function(t){var i=parseFloat(t[0])/100,b=parseFloat(t[1])/100,D=this.view.getCoordinate(),rt=D.start,Mt=D.end,Nt={x:Math.min(rt.x,Mt.x),y:Math.min(rt.y,Mt.y)},ne=D.getWidth()*i+Nt.x,ge=D.getHeight()*b+Nt.y;return{x:ne,y:ge}},o.prototype.getCoordinateBBox=function(){var t=this.view.getCoordinate(),i=t.start,b=t.end,D=t.getWidth(),rt=t.getHeight(),Mt={x:Math.min(i.x,b.x),y:Math.min(i.y,b.y)};return{x:Mt.x,y:Mt.y,minX:Mt.x,minY:Mt.y,maxX:Mt.x+D,maxY:Mt.y+rt,width:D,height:rt}},o.prototype.getAnnotationCfg=function(t,i,b){var D=this,rt=this.view.getCoordinate(),Mt=this.view.getCanvas(),Nt={};if(Object(a.isNil)(i))return null;if(t==="arc"){var ne=i,ge=ne.start,be=ne.end,Ae=this.parsePosition(ge),Xe=this.parsePosition(be),an=$n(rt,Ae),gn=$n(rt,Xe);an>gn&&(gn=Math.PI*2+gn),Nt={center:rt.getCenter(),radius:rn(rt,Ae),startAngle:an,endAngle:gn}}else if(t==="image"){var Yn=i,ge=Yn.start,be=Yn.end;Nt={start:this.parsePosition(ge),end:this.parsePosition(be),src:i.src}}else if(t==="line"){var Kn=i,ge=Kn.start,be=Kn.end;Nt={start:this.parsePosition(ge),end:this.parsePosition(be),text:Object(a.get)(i,"text",null)}}else if(t==="region"){var ir=i,ge=ir.start,be=ir.end;Nt={start:this.parsePosition(ge),end:this.parsePosition(be)}}else if(t==="text"){var cr=this.view.getData(),Rr=i,_r=Rr.position,zr=Rr.content,ki=Object(at.c)(Rr,["position","content"]),Ai=zr;Object(a.isFunction)(zr)&&(Ai=zr(cr)),Nt=Object(at.a)(Object(at.a)(Object(at.a)({},this.parsePosition(_r)),ki),{content:Ai})}else if(t==="dataMarker"){var mi=i,_r=mi.position,Ki=mi.point,vo=mi.line,po=mi.text,yo=mi.autoAdjust,wo=mi.direction;Nt=Object(at.a)(Object(at.a)({},this.parsePosition(_r)),{coordinateBBox:this.getCoordinateBBox(),point:Ki,line:vo,text:po,autoAdjust:yo,direction:wo})}else if(t==="dataRegion"){var Z=i,ge=Z.start,be=Z.end,U=Z.region,po=Z.text,w=Z.lineLength;Nt={points:this.getRegionPoints(ge,be),region:U,text:po,lineLength:w}}else if(t==="regionFilter"){var L=i,ge=L.start,be=L.end,Q=L.apply,It=L.color,Rt=this.view.geometries,K=[],Dt=function yn(Dn){!Dn||(Dn.isGroup()?Dn.getChildren().forEach(function(En){return yn(En)}):K.push(Dn))};Object(a.each)(Rt,function(yn){Q?Object(a.contains)(Q,yn.type)&&Object(a.each)(yn.elements,function(Dn){Dt(Dn.shape)}):Object(a.each)(yn.elements,function(Dn){Dt(Dn.shape)})}),Nt={color:It,shapes:K,start:this.parsePosition(ge),end:this.parsePosition(be)}}else if(t==="shape"){var Qt=i,qt=Qt.render,xe=Object(at.c)(Qt,["render"]),Ie=function(qe){if(Object(a.isFunction)(i.render))return qt(qe,D.view,{parsePosition:D.parsePosition.bind(D)})};Nt=Object(at.a)(Object(at.a)({},xe),{render:Ie})}else if(t==="html"){var Ye=i,Ne=Ye.html,_r=Ye.position,xe=Object(at.c)(Ye,["html","position"]),He=function(Dn){return Object(a.isFunction)(Ne)?Ne(Dn,D.view):Ne};Nt=Object(at.a)(Object(at.a)(Object(at.a)({},xe),this.parsePosition(_r)),{parent:Mt.get("el").parentNode,html:He})}var Je=Object(a.deepMix)({},b,Object(at.a)(Object(at.a)({},Nt),{top:i.top,style:i.style,offsetX:i.offsetX,offsetY:i.offsetY}));return t!=="html"&&(Je.container=this.getComponentContainer(Je)),Je.animate=this.view.getOptions().animate&&Je.animate&&Object(a.get)(i,"animate",Je.animate),Je.animateOption=Object(a.deepMix)({},ma,Je.animateOption,i.animateOption),Je},o.prototype.isTop=function(t){return Object(a.get)(t,"top",!0)},o.prototype.getComponentContainer=function(t){return this.isTop(t)?this.foregroundContainer:this.backgroundContainer},o.prototype.getAnnotationTheme=function(t){return Object(a.get)(this.view.getTheme(),["components","annotation",t],{})},o.prototype.updateOrCreate=function(t){var i=this.cache.get(this.getCacheKey(t));if(i){var b=t.type,D=this.getAnnotationTheme(b),rt=this.getAnnotationCfg(b,t,D);te(rt,["container"]),i.component.update(rt),Object(a.includes)(Gu,t.type)&&i.component.render()}else i=this.createAnnotation(t),i&&(i.component.init(),Object(a.includes)(Gu,t.type)&&i.component.render());return i},o.prototype.syncCache=function(t){var i=this,b=new Map(this.cache);return t.forEach(function(D,rt){b.set(rt,D)}),b.forEach(function(D,rt){Object(a.find)(i.option,function(Mt){return rt===i.getCacheKey(Mt)})||(D.component.destroy(),b.delete(rt))}),b},o.prototype.getCacheKey=function(t){return t},o}(Do),df=_h;function qs(c,o){return Object(a.get)(c,["components","axis",o,"grid"],{})}function Uu(c,o,t,i){var b=[],D=o.getTicks();return c.isPolar&&D.push({value:1,text:"",tickValue:""}),D.reduce(function(rt,Mt,Nt){var ne=Mt.value;if(i)b.push({points:[c.convert(t==="y"?{x:0,y:ne}:{x:ne,y:0}),c.convert(t==="y"?{x:1,y:ne}:{x:ne,y:1})]});else if(Nt){var ge=rt.value,be=(ge+ne)/2;b.push({points:[c.convert(t==="y"?{x:0,y:be}:{x:be,y:0}),c.convert(t==="y"?{x:1,y:be}:{x:be,y:1})]})}return Mt},D[0]),b}function Ka(c,o,t,i,b){var D=o.values.length,rt=[],Mt=t.getTicks();return Mt.reduce(function(Nt,ne){var ge=Nt?Nt.value:ne.value,be=ne.value,Ae=(ge+be)/2;return b==="x"?rt.push({points:[c.convert({x:i?be:Ae,y:0}),c.convert({x:i?be:Ae,y:1})]}):rt.push({points:Object(a.map)(Array(D+1),function(Xe,an){return c.convert({x:an/D,y:i?be:Ae})})}),ne},Mt[0]),rt}function vf(c,o){var t=Object(a.get)(o,"grid");if(t===null)return!1;var i=Object(a.get)(c,"grid");return!(t===void 0&&i===null)}var Ja=["container"],pf=Object(at.a)(Object(at.a)({},ma),{appear:null}),No=function(c){Object(at.b)(o,c);function o(t){var i=c.call(this,t)||this;return i.cache=new Map,i.gridContainer=i.view.getLayer(A.BG).addGroup(),i.axisContainer=i.view.getLayer(A.BG).addGroup(),i}return Object.defineProperty(o.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.render=function(){this.update()},o.prototype.layout=function(){var t=this,i=this.view.getCoordinate();Object(a.each)(this.getComponents(),function(b){var D=b.component,rt=b.direction,Mt=b.type,Nt=b.extra,ne=Nt.dim,ge=Nt.scale,be=Nt.alignTick,Ae;if(Mt===r.AXIS)i.isPolar?ne==="x"?Ae=i.isTransposed?Pr(i,rt):Si(i):ne==="y"&&(Ae=i.isTransposed?Si(i):Pr(i,rt)):Ae=Pr(i,rt);else if(Mt===r.GRID)if(i.isPolar){var Xe=void 0;i.isTransposed?Xe=ne==="x"?Ka(i,t.view.getYScales()[0],ge,be,ne):Uu(i,ge,ne,be):Xe=ne==="x"?Uu(i,ge,ne,be):Ka(i,t.view.getXScale(),ge,be,ne),Ae={items:Xe,center:t.view.getCoordinate().getCenter()}}else Ae={items:Uu(i,ge,ne,be)};D.update(Ae)})},o.prototype.update=function(){this.option=this.view.getOptions().axes;var t=new Map;this.updateXAxes(t),this.updateYAxes(t);var i=new Map;this.cache.forEach(function(b,D){t.has(D)?i.set(D,b):b.component.destroy()}),this.cache=i},o.prototype.clear=function(){c.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.axisContainer.clear()},o.prototype.destroy=function(){c.prototype.destroy.call(this),this.gridContainer.remove(!0),this.axisContainer.remove(!0)},o.prototype.getComponents=function(){var t=[];return this.cache.forEach(function(i){t.push(i)}),t},o.prototype.updateXAxes=function(t){var i=this.view.getXScale();if(!(!i||i.isIdentity)){var b=zi(this.option,i.field);if(b!==!1){var D=Xi(b,e.BOTTOM),rt=A.BG,Mt="x",Nt=this.view.getCoordinate(),ne=this.getId("axis",i.field),ge=this.getId("grid",i.field);if(Nt.isRect){var be=this.cache.get(ne);if(be){var Ae=this.getLineAxisCfg(i,b,D);te(Ae,Ja),be.component.update(Ae),t.set(ne,be)}else be=this.createLineAxis(i,b,rt,D,Mt),this.cache.set(ne,be),t.set(ne,be);var Xe=this.cache.get(ge);if(Xe){var Ae=this.getLineGridCfg(i,b,D,Mt);te(Ae,Ja),Xe.component.update(Ae),t.set(ge,Xe)}else Xe=this.createLineGrid(i,b,rt,D,Mt),Xe&&(this.cache.set(ge,Xe),t.set(ge,Xe))}else if(Nt.isPolar){var be=this.cache.get(ne);if(be){var Ae=Nt.isTransposed?this.getLineAxisCfg(i,b,e.RADIUS):this.getCircleAxisCfg(i,b,D);te(Ae,Ja),be.component.update(Ae),t.set(ne,be)}else{if(Nt.isTransposed){if(Object(a.isUndefined)(b))return;be=this.createLineAxis(i,b,rt,e.RADIUS,Mt)}else be=this.createCircleAxis(i,b,rt,D,Mt);this.cache.set(ne,be),t.set(ne,be)}var Xe=this.cache.get(ge);if(Xe){var Ae=Nt.isTransposed?this.getCircleGridCfg(i,b,e.RADIUS,Mt):this.getLineGridCfg(i,b,e.CIRCLE,Mt);te(Ae,Ja),Xe.component.update(Ae),t.set(ge,Xe)}else{if(Nt.isTransposed){if(Object(a.isUndefined)(b))return;Xe=this.createCircleGrid(i,b,rt,e.RADIUS,Mt)}else Xe=this.createLineGrid(i,b,rt,e.CIRCLE,Mt);Xe&&(this.cache.set(ge,Xe),t.set(ge,Xe))}}}}},o.prototype.updateYAxes=function(t){var i=this,b=this.view.getYScales();Object(a.each)(b,function(D,rt){if(!(!D||D.isIdentity)){var Mt=D.field,Nt=zi(i.option,Mt);if(Nt!==!1){var ne=A.BG,ge="y",be=i.getId("axis",Mt),Ae=i.getId("grid",Mt),Xe=i.view.getCoordinate();if(Xe.isRect){var an=Xi(Nt,rt===0?e.LEFT:e.RIGHT),gn=i.cache.get(be);if(gn){var Yn=i.getLineAxisCfg(D,Nt,an);te(Yn,Ja),gn.component.update(Yn),t.set(be,gn)}else gn=i.createLineAxis(D,Nt,ne,an,ge),i.cache.set(be,gn),t.set(be,gn);var Kn=i.cache.get(Ae);if(Kn){var Yn=i.getLineGridCfg(D,Nt,an,ge);te(Yn,Ja),Kn.component.update(Yn),t.set(Ae,Kn)}else Kn=i.createLineGrid(D,Nt,ne,an,ge),Kn&&(i.cache.set(Ae,Kn),t.set(Ae,Kn))}else if(Xe.isPolar){var gn=i.cache.get(be);if(gn){var Yn=Xe.isTransposed?i.getCircleAxisCfg(D,Nt,e.CIRCLE):i.getLineAxisCfg(D,Nt,e.RADIUS);te(Yn,Ja),gn.component.update(Yn),t.set(be,gn)}else{if(Xe.isTransposed){if(Object(a.isUndefined)(Nt))return;gn=i.createCircleAxis(D,Nt,ne,e.CIRCLE,ge)}else gn=i.createLineAxis(D,Nt,ne,e.RADIUS,ge);i.cache.set(be,gn),t.set(be,gn)}var Kn=i.cache.get(Ae);if(Kn){var Yn=Xe.isTransposed?i.getLineGridCfg(D,Nt,e.CIRCLE,ge):i.getCircleGridCfg(D,Nt,e.RADIUS,ge);te(Yn,Ja),Kn.component.update(Yn),t.set(Ae,Kn)}else{if(Xe.isTransposed){if(Object(a.isUndefined)(Nt))return;Kn=i.createLineGrid(D,Nt,ne,e.CIRCLE,ge)}else Kn=i.createCircleGrid(D,Nt,ne,e.RADIUS,ge);Kn&&(i.cache.set(Ae,Kn),t.set(Ae,Kn))}}}}})},o.prototype.createLineAxis=function(t,i,b,D,rt){var Mt={component:new gi(this.getLineAxisCfg(t,i,D)),layer:b,direction:D===e.RADIUS?e.NONE:D,type:r.AXIS,extra:{dim:rt,scale:t}};return Mt.component.set("field",t.field),Mt.component.init(),Mt},o.prototype.createLineGrid=function(t,i,b,D,rt){var Mt=this.getLineGridCfg(t,i,D,rt);if(Mt){var Nt={component:new bi(Mt),layer:b,direction:e.NONE,type:r.GRID,extra:{dim:rt,scale:t,alignTick:Object(a.get)(Mt,"alignTick",!0)}};return Nt.component.init(),Nt}},o.prototype.createCircleAxis=function(t,i,b,D,rt){var Mt={component:new Oi(this.getCircleAxisCfg(t,i,D)),layer:b,direction:D,type:r.AXIS,extra:{dim:rt,scale:t}};return Mt.component.set("field",t.field),Mt.component.init(),Mt},o.prototype.createCircleGrid=function(t,i,b,D,rt){var Mt=this.getCircleGridCfg(t,i,D,rt);if(Mt){var Nt={component:new _i(Mt),layer:b,direction:e.NONE,type:r.GRID,extra:{dim:rt,scale:t,alignTick:Object(a.get)(Mt,"alignTick",!0)}};return Nt.component.init(),Nt}},o.prototype.getLineAxisCfg=function(t,i,b){var D=this.axisContainer,rt=this.view.getCoordinate(),Mt=Pr(rt,b),Nt=Bi(t,i),ne=ii(this.view.getTheme(),b),ge=Object(a.get)(i,["title"])?Object(a.deepMix)({title:{style:{text:Nt}}},{title:Object(a.get)(ii(this.view.getTheme(),"common"),"title")},i):i,be=Object(a.deepMix)(Object(at.a)(Object(at.a)({container:D},Mt),{ticks:t.getTicks().map(function(cr){return{id:""+cr.tickValue,name:cr.text,value:cr.value}}),verticalFactor:rt.isPolar?vi(Mt,rt.getCenter())*-1:vi(Mt,rt.getCenter()),theme:ne}),ne,ge),Ae=this.getAnimateCfg(be),Xe=Ae.animate,an=Ae.animateOption;be.animateOption=an,be.animate=Xe;var gn=ri(Mt),Yn=Object(a.get)(be,"verticalLimitLength",gn?1/3:1/2);if(Yn<=1){var Kn=this.view.getCanvas().get("width"),ir=this.view.getCanvas().get("height");be.verticalLimitLength=Yn*(gn?Kn:ir)}return be},o.prototype.getLineGridCfg=function(t,i,b,D){if(!!vf(ii(this.view.getTheme(),b),i)){var rt=qs(this.view.getTheme(),b),Mt=Object(a.deepMix)({container:this.gridContainer},rt,Object(a.get)(i,"grid"),this.getAnimateCfg(i));return Mt.items=Uu(this.view.getCoordinate(),t,D,Object(a.get)(Mt,"alignTick",!0)),Mt}},o.prototype.getCircleAxisCfg=function(t,i,b){var D=this.axisContainer,rt=this.view.getCoordinate(),Mt=t.getTicks().map(function(gn){return{id:""+gn.tickValue,name:gn.text,value:gn.value}});!t.isCategory&&Math.abs(rt.endAngle-rt.startAngle)===Math.PI*2&&Mt.pop();var Nt=Bi(t,i),ne=ii(this.view.getTheme(),e.CIRCLE),ge=Object(a.get)(i,["title"])?Object(a.deepMix)({title:{style:{text:Nt}}},{title:Object(a.get)(ii(this.view.getTheme(),"common"),"title")},i):i,be=Object(a.deepMix)(Object(at.a)(Object(at.a)({container:D},Si(this.view.getCoordinate())),{ticks:Mt,verticalFactor:1,theme:ne}),ne,ge),Ae=this.getAnimateCfg(be),Xe=Ae.animate,an=Ae.animateOption;return be.animate=Xe,be.animateOption=an,be},o.prototype.getCircleGridCfg=function(t,i,b,D){if(!!vf(ii(this.view.getTheme(),b),i)){var rt=qs(this.view.getTheme(),e.RADIUS),Mt=Object(a.deepMix)({container:this.gridContainer,center:this.view.getCoordinate().getCenter()},rt,Object(a.get)(i,"grid"),this.getAnimateCfg(i)),Nt=Object(a.get)(Mt,"alignTick",!0),ne=D==="x"?this.view.getYScales()[0]:this.view.getXScale();return Mt.items=Ka(this.view.getCoordinate(),ne,t,Nt,D),Mt}},o.prototype.getId=function(t,i){var b=this.view.getCoordinate();return t+"-"+i+"-"+b.type},o.prototype.getAnimateCfg=function(t){return{animate:this.view.getOptions().animate&&Object(a.get)(t,"animate"),animateOption:t&&t.animateOption?Object(a.deepMix)({},pf,t.animateOption):pf}},o}(Do),gf=No;function Da(c,o,t){return t===e.TOP?[c.minX+c.width/2-o.width/2,c.minY]:t===e.BOTTOM?[c.minX+c.width/2-o.width/2,c.maxY-o.height]:t===e.LEFT?[c.minX,c.minY+c.height/2-o.height/2]:t===e.RIGHT?[c.maxX-o.width,c.minY+c.height/2-o.height/2]:t===e.TOP_LEFT||t===e.LEFT_TOP?[c.tl.x,c.tl.y]:t===e.TOP_RIGHT||t===e.RIGHT_TOP?[c.tr.x-o.width,c.tr.y]:t===e.BOTTOM_LEFT||t===e.LEFT_BOTTOM?[c.bl.x,c.bl.y-o.height]:t===e.BOTTOM_RIGHT||t===e.RIGHT_BOTTOM?[c.br.x-o.width,c.br.y-o.height]:[0,0]}function yf(c,o){if(o.isTransposed)switch(c){case e.BOTTOM:return e.LEFT;case e.LEFT:return e.BOTTOM;case e.RIGHT:return e.TOP;case e.TOP:return e.RIGHT}return c}function mf(c){return c===e.LEFT?e.RIGHT:c===e.RIGHT?e.LEFT:c}function bf(c){return c===e.TOP?e.BOTTOM:c===e.BOTTOM?e.TOP:c}function Vh(c,o){var t=o.matrix[0],i=o.matrix[4],b=c;return t<0&&(b=mf(b)),i<0&&(b=bf(b)),b}function Wh(c,o){var t=c;return o.isReflect("x")&&(t=mf(t)),o.isReflect("y")&&(t=bf(t)),t}function Xh(c,o){var t=c;return t=yf(t,o),t=Vh(t,o),t=Wh(t,o),t}function xf(c,o){return Object(a.isBoolean)(c)?c===!1?!1:{}:Object(a.get)(c,[o],c)}function zu(c){return Object(a.get)(c,"position",e.BOTTOM)}var tu=function(c){Object(at.b)(o,c);function o(t){var i=c.call(this,t)||this;return i.container=i.view.getLayer(A.FORE).addGroup(),i}return Object.defineProperty(o.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.render=function(){this.update()},o.prototype.layout=function(){var t=this;this.layoutBBox=this.view.viewBBox,Object(a.each)(this.components,function(i){var b=i.component,D=i.direction,rt=Fn(D),Mt=t.getCategoryLegendSizeCfg(rt),Nt=b.get("maxWidth"),ne=b.get("maxHeight");b.update({maxWidth:Math.min(Mt.maxWidth,Nt||0),maxHeight:Math.min(Mt.maxHeight,ne||0)});var ge=b.get("padding"),be=b.getLayoutBBox(),Ae=new Qe(be.x,be.y,be.width,be.height).expand(ge),Xe=Da(t.view.viewBBox,Ae,D),an=Xe[0],gn=Xe[1],Yn=Da(t.layoutBBox,Ae,D),Kn=Yn[0],ir=Yn[1],cr=0,Rr=0;D.startsWith("top")||D.startsWith("bottom")?(cr=an,Rr=ir):(cr=Kn,Rr=gn),b.setLocation({x:cr+ge[3],y:Rr+ge[0]}),t.layoutBBox=t.layoutBBox.cut(Ae,D)})},o.prototype.update=function(){var t=this;this.option=this.view.getOptions().legends;var i={},b=function(Xe,an,gn){var Yn=t.getId(gn.field),Kn=t.getComponentById(Yn);if(Kn){var ir=void 0,cr=xf(t.option,gn.field);cr!==!1&&(Object(a.get)(cr,"custom")?ir=t.getCategoryCfg(Xe,an,gn,cr,!0):gn.isLinear?ir=t.getContinuousCfg(Xe,an,gn,cr):gn.isCategory&&(ir=t.getCategoryCfg(Xe,an,gn,cr))),ir&&(te(ir,["container"]),Kn.direction=zu(cr),Kn.component.update(ir),i[Yn]=!0)}else{var Rr=t.createFieldLegend(Xe,an,gn);Rr&&(Rr.component.init(),t.components.push(Rr),i[Yn]=!0)}};if(Object(a.get)(this.option,"custom")){var D="global-custom",rt=this.getComponentById(D);if(rt){var Mt=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);te(Mt,["container"]),rt.component.update(Mt),i[D]=!0}else{var Nt=this.createCustomLegend(void 0,void 0,void 0,this.option);if(Nt){Nt.init();var ne=A.FORE,ge=zu(this.option);this.components.push({id:D,component:Nt,layer:ne,direction:ge,type:r.LEGEND,extra:void 0}),i[D]=!0}}}else this.loopLegends(b);var be=[];Object(a.each)(this.getComponents(),function(Ae){i[Ae.id]?be.push(Ae):Ae.component.destroy()}),this.components=be},o.prototype.clear=function(){c.prototype.clear.call(this),this.container.clear()},o.prototype.destroy=function(){c.prototype.destroy.call(this),this.container.remove(!0)},o.prototype.getGeometries=function(t){var i=this,b=t.geometries;return Object(a.each)(t.views,function(D){b=b.concat(i.getGeometries(D))}),b},o.prototype.loopLegends=function(t){var i=this.view.getRootView()===this.view;if(!!i){var b=this.getGeometries(this.view),D={};Object(a.each)(b,function(rt){var Mt=rt.getGroupAttributes();Object(a.each)(Mt,function(Nt){var ne=Nt.getScale(Nt.type);!ne||ne.type==="identity"||D[ne.field]||(t(rt,Nt,ne),D[ne.field]=!0)})})}},o.prototype.createFieldLegend=function(t,i,b){var D,rt=xf(this.option,b.field),Mt=A.FORE,Nt=zu(rt);if(rt!==!1&&(Object(a.get)(rt,"custom")?D=this.createCustomLegend(t,i,b,rt):b.isLinear?D=this.createContinuousLegend(t,i,b,rt):b.isCategory&&(D=this.createCategoryLegend(t,i,b,rt))),D)return D.set("field",b.field),{id:this.getId(b.field),component:D,layer:Mt,direction:Nt,type:r.LEGEND,extra:{scale:b}}},o.prototype.createCustomLegend=function(t,i,b,D){var rt=this.getCategoryCfg(t,i,b,D,!0);return new Qi(rt)},o.prototype.createContinuousLegend=function(t,i,b,D){var rt=this.getContinuousCfg(t,i,b,D);return new io(rt)},o.prototype.createCategoryLegend=function(t,i,b,D){var rt=this.getCategoryCfg(t,i,b,D);return new Qi(rt)},o.prototype.getContinuousCfg=function(t,i,b,D){var rt=b.getTicks(),Mt=Object(a.find)(rt,function(gn){return gn.value===0}),Nt=Object(a.find)(rt,function(gn){return gn.value===1}),ne=rt.map(function(gn){var Yn=gn.value,Kn=gn.tickValue,ir=i.mapping(b.invert(Yn)).join("");return{value:Kn,attrValue:ir,color:ir,scaleValue:Yn}});Mt||ne.push({value:b.min,attrValue:i.mapping(b.invert(0)).join(""),color:i.mapping(b.invert(0)).join(""),scaleValue:0}),Nt||ne.push({value:b.max,attrValue:i.mapping(b.invert(1)).join(""),color:i.mapping(b.invert(1)).join(""),scaleValue:1}),ne.sort(function(gn,Yn){return gn.value-Yn.value});var ge={min:Object(a.head)(ne).value,max:Object(a.last)(ne).value,colors:[],rail:{type:i.type},track:{}};i.type==="size"&&(ge.track={style:{fill:i.type==="size"?this.view.getTheme().defaultColor:void 0}}),i.type==="color"&&(ge.colors=ne.map(function(gn){return gn.attrValue}));var be=this.container,Ae=zu(D),Xe=Fn(Ae),an=Object(a.get)(D,"title");return an&&(an=Object(a.deepMix)({text:xr(b)},an)),ge.container=be,ge.layout=Xe,ge.title=an,ge.animateOption=ma,this.mergeLegendCfg(ge,D,"continuous")},o.prototype.getCategoryCfg=function(t,i,b,D,rt){var Mt=this.container,Nt=Object(a.get)(D,"position",e.BOTTOM),ne=Object(a.get)(this.view.getTheme(),["components","legend",Nt,"marker"]),ge=Object(a.get)(D,"marker"),be=Fn(Nt),Ae=rt?ur(ne,ge,D.items):sr(this.view,t,i,ne,ge),Xe=Object(a.get)(D,"title");Xe&&(Xe=Object(a.deepMix)({text:b?xr(b):""},Xe));var an=this.getCategoryLegendSizeCfg(be);an.container=Mt,an.layout=be,an.items=Ae,an.title=Xe,an.animateOption=ma;var gn=this.mergeLegendCfg(an,D,Nt);gn.reversed&&gn.items.reverse();var Yn=Object(a.get)(gn,"maxItemWidth");return Yn&&Yn<=1&&(gn.maxItemWidth=this.view.viewBBox.width*Yn),gn},o.prototype.mergeLegendCfg=function(t,i,b){var D=b.split("-")[0],rt=Object(a.get)(this.view.getTheme(),["components","legend",D],{});return Object(a.deepMix)({},rt,t,i)},o.prototype.getId=function(t){return this.name+"-"+t},o.prototype.getComponentById=function(t){return Object(a.find)(this.components,function(i){return i.id===t})},o.prototype.getCategoryLegendSizeCfg=function(t){var i=this.view.viewBBox,b=i.width,D=i.height;return t==="vertical"?{maxWidth:b*d,maxHeight:D}:{maxWidth:b,maxHeight:D*d}},o}(Do),Of=tu,Ms=function(c){Object(at.b)(o,c);function o(t){var i=c.call(this,t)||this;return i.onChangeFn=a.noop,i.resetMeasure=function(){i.clear()},i.onValueChange=function(b){var D=b[0],rt=b[1];i.start=D,i.end=rt,i.changeViewData(D,rt)},i.container=i.view.getLayer(A.FORE).addGroup(),i.onChangeFn=Object(a.throttle)(i.onValueChange,20,{leading:!0}),i.width=0,i.view.on(m.BEFORE_CHANGE_DATA,i.resetMeasure),i.view.on(m.BEFORE_CHANGE_SIZE,i.resetMeasure),i}return Object.defineProperty(o.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),o.prototype.destroy=function(){c.prototype.destroy.call(this),this.view.off(m.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(m.BEFORE_CHANGE_SIZE,this.resetMeasure)},o.prototype.init=function(){},o.prototype.render=function(){this.option=this.view.getOptions().slider;var t=this.getSliderCfg(),i=t.start,b=t.end;Object(a.isNil)(this.start)&&(this.start=i,this.end=b);var D=this.view.getOptions().data;this.option&&!Object(a.isEmpty)(D)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},o.prototype.layout=function(){var t=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout(function(){t.view.destroyed||t.changeViewData(t.start,t.end)},0)),this.slider){var i=this.view.coordinateBBox.width,b=this.slider.component.get("padding"),D=b[0],rt=b[1],Mt=b[2],Nt=b[3],ne=this.slider.component.getLayoutBBox(),ge=new Qe(ne.x,ne.y,Math.min(ne.width,i),ne.height).expand(b),be=this.getMinMaxText(this.start,this.end),Ae=be.minText,Xe=be.maxText,an=Da(this.view.viewBBox,ge,e.BOTTOM),gn=an[0],Yn=an[1],Kn=Da(this.view.coordinateBBox,ge,e.BOTTOM),ir=Kn[0],cr=Kn[1];this.slider.component.update(Object(at.a)(Object(at.a)({},this.getSliderCfg()),{x:ir+Nt,y:Yn+D,width:this.width,start:this.start,end:this.end,minText:Ae,maxText:Xe})),this.view.viewBBox=this.view.viewBBox.cut(ge,e.BOTTOM)}},o.prototype.update=function(){this.render()},o.prototype.createSlider=function(){var t=this.getSliderCfg(),i=new Qr.Slider(Object(at.a)({container:this.container},t));return i.init(),{component:i,layer:A.FORE,direction:e.BOTTOM,type:r.SLIDER}},o.prototype.updateSlider=function(){var t=this.getSliderCfg();if(this.width){var i=this.getMinMaxText(this.start,this.end),b=i.minText,D=i.maxText;t=Object(at.a)(Object(at.a)({},t),{width:this.width,start:this.start,end:this.end,minText:b,maxText:D})}return this.slider.component.update(t),this.slider},o.prototype.measureSlider=function(){var t=this.getSliderCfg().width;this.width=t},o.prototype.getSliderCfg=function(){var t={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if(Object(a.isObject)(this.option)){var i=Object(at.a)({data:this.getData()},Object(a.get)(this.option,"trendCfg",{}));t=Object(a.deepMix)({},t,this.getThemeOptions(),this.option),t=Object(at.a)(Object(at.a)({},t),{trendCfg:i})}return t.start=Object(a.clamp)(Math.min(Object(a.isNil)(t.start)?0:t.start,Object(a.isNil)(t.end)?1:t.end),0,1),t.end=Object(a.clamp)(Math.max(Object(a.isNil)(t.start)?0:t.start,Object(a.isNil)(t.end)?1:t.end),0,1),t},o.prototype.getData=function(){var t=this.view.getOptions().data,i=this.view.getYScales()[0],b=this.view.getGroupScales();if(b.length){var D=b[0],rt=D.field,Mt=D.ticks;return t.reduce(function(Nt,ne){return ne[rt]===Mt[0]&&Nt.push(ne[i.field]),Nt},[])}return t.map(function(Nt){return Nt[i.field]||0})},o.prototype.getThemeOptions=function(){var t=this.view.getTheme();return Object(a.get)(t,["components","slider","common"],{})},o.prototype.getMinMaxText=function(t,i){var b=this.view.getOptions().data,D=this.view.getXScale(),rt=!0,Mt=Object(a.valuesOfKey)(b,D.field),Nt=rt?Mt:Mt.reverse(),ne=Object(a.size)(b);if(!D||!ne)return{};var ge=Object(a.size)(Nt),be=Math.floor(t*(ge-1)),Ae=Math.floor(i*(ge-1)),Xe=Object(a.get)(Nt,[be]),an=Object(a.get)(Nt,[Ae]),gn=this.getSliderCfg().formatter;return gn&&(Xe=gn(Xe,b[be],be),an=gn(an,b[Ae],Ae)),{minText:Xe,maxText:an}},o.prototype.changeViewData=function(t,i){var b=this.view.getOptions().data,D=this.view.getXScale(),rt=!0,Mt=Object(a.valuesOfKey)(b,D.field),Nt=rt?Mt:Mt.reverse(),ne=Object(a.size)(b);if(!(!D||!ne)){var ge=Object(a.size)(Nt),be=Math.floor(t*(ge-1)),Ae=Math.floor(i*(ge-1));this.view.filter(D.field,function(Xe,an){var gn=Nt.indexOf(Xe);return gn>-1?oe(gn,be,Ae):!0}),this.view.render(!0)}},o.prototype.getComponents=function(){return this.slider?[this.slider]:[]},o.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},o}(Do),Sf=Ms,as=0,wf=8,Yh=32,Hh=20,Kh=function(c){Object(at.b)(o,c);function o(t){var i=c.call(this,t)||this;return i.onChangeFn=a.noop,i.resetMeasure=function(){i.clear()},i.onValueChange=function(b){var D=b.ratio,rt=i.getValidScrollbarCfg().animate;i.ratio=Object(a.clamp)(D,0,1);var Mt=i.view.getOptions().animate;rt||i.view.animate(!1),i.changeViewData(i.getScrollRange(),!0),i.view.animate(Mt)},i.container=i.view.getLayer(A.FORE).addGroup(),i.onChangeFn=Object(a.throttle)(i.onValueChange,20,{leading:!0}),i.trackLen=0,i.thumbLen=0,i.ratio=0,i.view.on(m.BEFORE_CHANGE_DATA,i.resetMeasure),i.view.on(m.BEFORE_CHANGE_SIZE,i.resetMeasure),i}return Object.defineProperty(o.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),o.prototype.destroy=function(){c.prototype.destroy.call(this),this.view.off(m.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(m.BEFORE_CHANGE_SIZE,this.resetMeasure)},o.prototype.init=function(){},o.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},o.prototype.layout=function(){var t=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout(function(){t.view.destroyed||t.changeViewData(t.getScrollRange(),!0)})),this.scrollbar){var i=this.view.coordinateBBox.width,b=this.scrollbar.component.get("padding"),D=this.scrollbar.component.getLayoutBBox(),rt=new Qe(D.x,D.y,Math.min(D.width,i),D.height).expand(b),Mt=this.getScrollbarComponentCfg(),Nt=void 0,ne=void 0;if(Mt.isHorizontal){var ge=Da(this.view.viewBBox,rt,e.BOTTOM),be=ge[0],Ae=ge[1],Xe=Da(this.view.coordinateBBox,rt,e.BOTTOM),an=Xe[0],gn=Xe[1];Nt=an,ne=Ae}else{var Yn=Da(this.view.viewBBox,rt,e.RIGHT),be=Yn[0],Ae=Yn[1],Kn=Da(this.view.viewBBox,rt,e.RIGHT),an=Kn[0],gn=Kn[1];Nt=an,ne=Ae}Nt+=b[3],ne+=b[0],this.trackLen?this.scrollbar.component.update(Object(at.a)(Object(at.a)({},Mt),{x:Nt,y:ne,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update(Object(at.a)(Object(at.a)({},Mt),{x:Nt,y:ne})),this.view.viewBBox=this.view.viewBBox.cut(rt,Mt.isHorizontal?e.BOTTOM:e.RIGHT)}},o.prototype.update=function(){this.render()},o.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},o.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},o.prototype.getThemeOptions=function(){var t=this.view.getTheme();return Object(a.get)(t,["components","slider","common"],{})},o.prototype.measureScrollbar=function(){var t=this.view.getXScale(),i=this.view.getYScales().slice();this.data=this.view.getOptions().data,this.step=this.getStep(),this.cnt=this.getCnt();var b=this.getScrollbarComponentCfg(),D=b.trackLen,rt=b.thumbLen;this.trackLen=D,this.thumbLen=rt,this.xScaleCfg={field:t.field,values:t.values||[]},this.yScalesCfg=i},o.prototype.getScrollRange=function(){var t=Math.floor((this.cnt-this.step)*Object(a.clamp)(this.ratio,0,1)),i=Math.min(t+this.step-1,this.cnt-1);return[t,i]},o.prototype.changeViewData=function(t,i){var b=this,D=t[0],rt=t[1],Mt=this.getValidScrollbarCfg().type,Nt=Mt!=="vertical",ne=Object(a.valuesOfKey)(this.data,this.xScaleCfg.field),ge=Nt?ne:ne.reverse();this.yScalesCfg.forEach(function(be){b.view.scale(be.field,{formatter:be.formatter,type:be.type,min:be.min,max:be.max})}),this.view.filter(this.xScaleCfg.field,function(be){var Ae=ge.indexOf(be);return Ae>-1?oe(Ae,D,rt):!0}),this.view.render(!0)},o.prototype.createScrollbar=function(){var t=this.getValidScrollbarCfg().type,i=t!=="vertical",b=new Qr.Scrollbar(Object(at.a)(Object(at.a)({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return b.init(),{component:b,layer:A.FORE,direction:i?e.BOTTOM:e.RIGHT,type:r.SCROLLBAR}},o.prototype.updateScrollbar=function(){var t=this.getScrollbarComponentCfg(),i=this.trackLen?Object(at.a)(Object(at.a)({},t),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):Object(at.a)({},t);return this.scrollbar.component.update(i),this.scrollbar},o.prototype.getStep=function(){if(this.step)return this.step;var t=this.view.coordinateBBox,i=this.getValidScrollbarCfg(),b=i.type,D=i.categorySize,rt=b!=="vertical";return Math.floor((rt?t.width:t.height)/D)},o.prototype.getCnt=function(){if(this.cnt)return this.cnt;var t=this.view.getXScale(),i=this.view.getOptions().data,b=Object(a.valuesOfKey)(i,t.field);return Object(a.size)(b)},o.prototype.getScrollbarComponentCfg=function(){var t=this.view,i=t.coordinateBBox,b=t.viewBBox,D=this.view.getXScale(),rt=this.getValidScrollbarCfg(),Mt=rt.type,Nt=rt.padding,ne=rt.width,ge=rt.height,be=Mt!=="vertical",Ae=Nt[0],Xe=Nt[1],an=Nt[2],gn=Nt[3],Yn=be?{x:i.minX+gn,y:b.maxY-ge-an}:{x:b.maxX-ne-Xe,y:i.minY+Ae},Kn=this.getStep(),ir=this.getCnt(),cr=be?i.width-gn-Xe:i.height-Ae-an,Rr=Math.max(cr*Object(a.clamp)(Kn/ir,0,1),Hh);return Object(at.a)(Object(at.a)({},this.getThemeOptions()),{x:Yn.x,y:Yn.y,size:be?ge:ne,isHorizontal:be,trackLen:cr,thumbLen:Rr,thumbOffset:0})},o.prototype.getValidScrollbarCfg=function(){var t={type:"horizontal",categorySize:Yh,width:wf,height:wf,padding:[0,0,0,0],animate:!0};return Object(a.isObject)(this.option)&&(t=Object(at.a)(Object(at.a)({},t),this.option)),(!Object(a.isObject)(this.option)||!this.option.padding)&&(t.padding=t.type==="horizontal"?[as,0,as,0]:[0,as,0,as]),t},o}(Do),Jh=Kh,Qh=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.show=function(){var t=this.context.view,i=this.context.event,b=t.getTooltipItems({x:i.x,y:i.y});if(!Object(a.isEqual)(b,this.items)&&(this.items=b,b.length)){var D=t.getXScale().field,rt=b[0].data[D],Mt=[],Nt=t.geometries;if(Object(a.each)(Nt,function(yo){if(yo.type==="interval"||yo.type==="schema"){var wo=yo.getElementsBy(function(Z){var U=Z.getData();return U[D]===rt});Mt=Mt.concat(wo)}}),Mt.length){var ne=t.getCoordinate(),ge=Mt[0].shape.getCanvasBBox(),be=Mt[0].shape.getCanvasBBox(),Ae=ge;Object(a.each)(Mt,function(yo){var wo=yo.shape.getCanvasBBox();ne.isTransposed?(wo.minY<ge.minY&&(ge=wo),wo.maxY>be.maxY&&(be=wo)):(wo.minX<ge.minX&&(ge=wo),wo.maxX>be.maxX&&(be=wo)),Ae.x=Math.min(wo.minX,Ae.minX),Ae.y=Math.min(wo.minY,Ae.minY),Ae.width=Math.max(wo.maxX,Ae.maxX)-Ae.x,Ae.height=Math.max(wo.maxY,Ae.maxY)-Ae.y});var Xe=t.backgroundGroup,an=t.coordinateBBox,gn=void 0;if(ne.isRect){var Yn=t.getXScale(),Kn=Yn.isLinear?0:.25,ir=void 0,cr=void 0,Rr=void 0,_r=void 0;ne.isTransposed?(ir=an.minX,cr=Math.min(be.minY,ge.minY)-Kn*be.height,Rr=an.width,_r=Ae.height+Kn*2*be.height):(ir=Math.min(ge.minX,be.minX)-Kn*ge.width,cr=Math.min(an.minY,ge.minY),Rr=Ae.width+Kn*2*ge.width,_r=an.height),gn=[["M",ir,cr],["L",ir+Rr,cr],["L",ir+Rr,cr+_r],["L",ir,cr+_r],["Z"]]}else{var zr=Object(a.head)(Mt),ki=Object(a.last)(Mt),Ai=ao(zr.getModel(),ne).startAngle,mi=ao(ki.getModel(),ne).endAngle,Ki=ne.getCenter(),vo=ne.getRadius(),po=ne.innerRadius*vo;gn=no(Ki.x,Ki.y,vo,Ai,mi,po)}this.regionPath?(this.regionPath.attr("path",gn),this.regionPath.show()):this.regionPath=Xe.addShape({type:"path",name:"active-region",capture:!1,attrs:{path:gn,fill:"#CCD6EC",opacity:.3}})}}},o.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},o.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),c.prototype.destroy.call(this)},o}(ut),Ef=Qh,ka=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.timeStamp=0,t}return o.prototype.show=function(){var t=this.context,i=t.event,b=t.view,D=b.isTooltipLocked();if(!D){var rt=this.timeStamp,Mt=+new Date,Nt=Object(a.get)(t.view.getOptions(),"tooltip.showDelay",16);if(Mt-rt>Nt){var ne=this.location,ge={x:i.x,y:i.y};(!ne||!Object(a.isEqual)(ne,ge))&&this.showTooltip(b,ge),this.timeStamp=Mt,this.location=ge}}},o.prototype.hide=function(){var t=this.context.view,i=t.getController("tooltip"),b=this.context.event,D=b.clientX,rt=b.clientY;i.isCursorEntered({x:D,y:rt})||t.isTooltipLocked()||(this.hideTooltip(t),this.location=null)},o.prototype.showTooltip=function(t,i){t.showTooltip(i)},o.prototype.hideTooltip=function(t){t.hideTooltip()},o}(ut),da=ka,ss=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.showTooltip=function(t,i){var b=en(t);Object(a.each)(b,function(D){var rt=ze(t,D,i);D.showTooltip(rt)})},o.prototype.hideTooltip=function(t){var i=en(t);Object(a.each)(i,function(b){b.hideTooltip()})},o}(da),Jo=ss,As=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.timeStamp=0,t}return o.prototype.destroy=function(){c.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},o.prototype.show=function(){var t=this.context,i=t.event,b=this.timeStamp,D=+new Date;if(D-b>16){var rt=this.location,Mt={x:i.x,y:i.y};(!rt||!Object(a.isEqual)(rt,Mt))&&this.showTooltip(Mt),this.timeStamp=D,this.location=Mt}},o.prototype.hide=function(){this.hideTooltip(),this.location=null},o.prototype.showTooltip=function(t){var i=this.context,b=i.event,D=b.target;if(D&&D.get("tip")){this.tooltip||this.renderTooltip();var rt=D.get("tip");this.tooltip.update(Object(at.a)({title:rt},t)),this.tooltip.show()}},o.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},o.prototype.renderTooltip=function(){var t,i=this.context.view,b=i.canvas,D={start:{x:0,y:0},end:{x:b.get("width"),y:b.get("height")}},rt=i.getTheme(),Mt=Object(a.get)(rt,["components","tooltip","domStyles"],{}),Nt=new Wi({parent:b.get("el").parentNode,region:D,visible:!1,crosshairs:null,domStyles:Object(at.a)({},Object(a.deepMix)({},Mt,(t={},t[Qr.TOOLTIP_CSS_CONST.CONTAINER_CLASS]={"max-width":"50%"},t[Qr.TOOLTIP_CSS_CONST.TITLE_CLASS]={"word-break":"break-all"},t)))});Nt.init(),Nt.setCapture(!1),this.tooltip=Nt},o}(ut),_u=As,eu=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="",t}return o.prototype.hasState=function(t){return t.hasState(this.stateName)},o.prototype.setElementState=function(t,i){t.setState(this.stateName,i)},o.prototype.setState=function(){this.setStateEnable(!0)},o.prototype.clear=function(){var t=this.context.view;this.clearViewState(t)},o.prototype.clearViewState=function(t){var i=this,b=ke(t,this.stateName);Object(a.each)(b,function(D){i.setElementState(D,!1)})},o}(ut),wc=eu;function us(c){return Object(a.get)(c.get("delegateObject"),"item")}var Zh=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.ignoreListItemStates=["unchecked"],t}return o.prototype.isItemIgnore=function(t,i){var b=this.ignoreListItemStates,D=b.filter(function(rt){return i.hasState(t,rt)});return!!D.length},o.prototype.setStateByComponent=function(t,i,b){var D=this.context.view,rt=t.get("field"),Mt=Re(D);this.setElementsStateByItem(Mt,rt,i,b)},o.prototype.setStateByElement=function(t,i){this.setElementState(t,i)},o.prototype.isMathItem=function(t,i,b){var D=this.context.view,rt=mn(D,i),Mt=ln(t,i);return!Object(a.isNil)(Mt)&&b.name===rt.getText(Mt)},o.prototype.setElementsStateByItem=function(t,i,b,D){var rt=this;Object(a.each)(t,function(Mt){rt.isMathItem(Mt,i,b)&&Mt.setState(rt.stateName,D)})},o.prototype.setStateEnable=function(t){var i=me(this.context);if(i)ve(this.context)&&this.setStateByElement(i,t);else{var b=Zt(this.context);if(he(b)){var D=b.item,rt=b.component;if(D&&rt&&!this.isItemIgnore(D,rt)){var Mt=this.context.event.gEvent;if(Mt&&Mt.fromShape&&Mt.toShape&&us(Mt.fromShape)===us(Mt.toShape))return;this.setStateByComponent(rt,D,t)}}}},o.prototype.toggle=function(){var t=me(this.context);if(t){var i=t.hasState(this.stateName);this.setElementState(t,!i)}},o.prototype.reset=function(){this.setStateEnable(!1)},o}(wc),nu=Zh,$h=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="active",t}return o.prototype.active=function(){this.setState()},o}(nu),qh=$h,td=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.cache={},t}return o.prototype.getColorScale=function(t,i){var b=i.geometry.getAttribute("color");if(!b)return null;var D=t.getScaleByField(b.getFields()[0]);return D},o.prototype.getLinkPath=function(t,i){var b=this.context.view,D=b.getCoordinate().isTransposed,rt=t.shape.getCanvasBBox(),Mt=i.shape.getCanvasBBox(),Nt=D?[["M",rt.minX,rt.minY],["L",Mt.minX,Mt.maxY],["L",Mt.maxX,Mt.maxY],["L",rt.maxX,rt.minY],["Z"]]:[["M",rt.maxX,rt.minY],["L",Mt.minX,Mt.minY],["L",Mt.minX,Mt.maxY],["L",rt.maxX,rt.maxY],["Z"]];return Nt},o.prototype.addLinkShape=function(t,i,b){t.addShape({type:"path",attrs:{opacity:.4,fill:i.shape.attr("fill"),path:this.getLinkPath(i,b)}})},o.prototype.linkByElement=function(t){var i=this,b=this.context.view,D=this.getColorScale(b,t);if(!!D){var rt=ln(t,D.field);if(!this.cache[rt]){var Mt=tn(b,D.field,rt),Nt=this.linkGroup,ne=Nt.addGroup();this.cache[rt]=ne;var ge=Mt.length;Object(a.each)(Mt,function(be,Ae){if(Ae<ge-1){var Xe=Mt[Ae+1];i.addLinkShape(ne,be,Xe)}})}}},o.prototype.removeLink=function(t){var i=this.getColorScale(this.context.view,t);if(!!i){var b=ln(t,i.field);this.cache[b]&&(this.cache[b].remove(),this.cache[b]=null)}},o.prototype.link=function(){var t=this.context;this.linkGroup||(this.linkGroup=t.view.foregroundGroup.addGroup({capture:!1}));var i=me(t);i&&this.linkByElement(i)},o.prototype.unlink=function(){var t=me(this.context);t&&this.removeLink(t)},o.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},o.prototype.destroy=function(){c.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},o}(ut),ed=td,nd=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.startPoint=null,t.endPoint=null,t.isStarted=!1,t.effectSiblings=!1,t.effectByRecord=!1,t}return o.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},o.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},o.prototype.getIntersectElements=function(){var t=null;if(Me(this.context))t=_e(this.context,10);else{var i=this.startPoint,b=this.isStarted?this.getCurrentPoint():this.endPoint;if(!i||!b)return;var D={minX:Math.min(i.x,b.x),minY:Math.min(i.y,b.y),maxX:Math.max(i.x,b.x),maxY:Math.max(i.y,b.y)},rt=this.context.view;t=nn(rt,D)}return t},o.prototype.setStateEnable=function(t){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(t);else{var i=Re(this.context.view),b=this.getIntersectElements();b&&b.length?this.effectByRecord?this.setSiblingsStateByRecord(b,t):this.setElementsState(b,t,i):this.clear()}},o.prototype.setSiblingsStateByRecord=function(t,i){var b=this,D=this.context.view,rt=en(D),Mt=t.map(function(ge){return ge.getModel().data}),Nt=D.getXScale().field,ne=D.getYScales()[0].field;Object(a.each)(rt,function(ge){var be=Re(ge),Ae=be.filter(function(Xe){var an=Xe.getModel().data;return fn(Mt,an,Nt,ne)});b.setElementsState(Ae,i,be)})},o.prototype.setSiblingsState=function(t){var i=this,b=this.context.view,D=en(b);Me(this.context)&&Object(a.each)(D,function(rt){var Mt=Re(rt),Nt=We(i.context,rt,10);Nt&&Nt.length?i.setElementsState(Nt,t,Mt):i.clearViewState(rt)})},o.prototype.setElementsState=function(t,i,b){var D=this;Object(a.each)(b,function(rt){t.includes(rt)?D.setElementState(rt,i):D.setElementState(rt,!1)})},o.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},o.prototype.clear=function(){var t=this,i=this.context.view;if(this.effectSiblings){var b=en(i);Object(a.each)(b,function(D){t.clearViewState(D)})}else this.clearViewState(i)},o}(wc),Vu=nd,Wu=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="active",t}return o.prototype.active=function(){this.setState()},o}(Vu),rd=Wu,Mf=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.setStateEnable=function(t){var i=me(this.context);if(i){if(!ve(this.context))return;t?(this.clear(),this.setElementState(i,!0)):this.hasState(i)&&this.setElementState(i,!1)}},o.prototype.toggle=function(){var t=me(this.context);if(t){var i=this.hasState(t);i||this.clear(),this.setElementState(t,!i)}},o.prototype.reset=function(){this.setStateEnable(!1)},o}(wc),ru=Mf,id=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="active",t}return o.prototype.active=function(){this.setState()},o}(ru),od=id,iu="inactive",Cs="active";function Qa(c){var o=Re(c);Object(a.each)(o,function(t){t.hasState(Cs)&&t.setState(Cs,!1),t.hasState(iu)&&t.setState(iu,!1)})}function Af(c,o,t){Object(a.each)(c,function(i){o(i)?(i.hasState(iu)&&i.setState(iu,!1),i.setState(Cs,t)):(i.hasState(Cs)&&i.setState(Cs,!1),i.setState(iu,t))})}var Za=E.INACTIVE,Ea=E.ACTIVE,Cf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName=Ea,t}return o.prototype.setElementsStateByItem=function(t,i,b,D){var rt=this,Mt=function(ne){return rt.isMathItem(ne,i,b)};this.setHighlightBy(t,Mt,D)},o.prototype.setElementHighlight=function(t,i){i(t)?(t.hasState(Za)&&t.setState(Za,!1),t.setState(Ea,!0)):t.hasState(Ea)||t.setState(Za,!0)},o.prototype.setHighlightBy=function(t,i,b){var D=this;if(b)Object(a.each)(t,function(Nt){D.setElementHighlight(Nt,i)});else{var rt=ke(this.context.view,Ea),Mt=!0;Object(a.each)(rt,function(Nt){if(!i(Nt))return Mt=!1,!1}),Mt?this.clear():Object(a.each)(t,function(Nt){i(Nt)&&(Nt.hasState(Ea)&&Nt.setState(Ea,!1),Nt.setState(Za,!0))})}},o.prototype.setElementState=function(t,i){var b=this.context.view,D=Re(b);this.setHighlightBy(D,function(rt){return t===rt},i)},o.prototype.highlight=function(){this.setState()},o.prototype.clear=function(){var t=this.context.view;Qa(t)},o}(nu),Xu=Cf,Tf=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.setStateByElement=function(t,i){var b=this.context.view,D=t.geometry.getAttribute("color");if(!!D){var rt=b.getScaleByField(D.getFields()[0]),Mt=ln(t,rt.field),Nt=Re(b),ne=Nt.filter(function(ge){return ln(ge,rt.field)===Mt});this.setHighlightBy(Nt,function(ge){return ne.includes(ge)},i)}},o}(Xu),jf=Tf,If=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.setElementHighlight=function(t,i){i(t)?(t.hasState(Za)&&t.setState(Za,!1),t.setState(Ea,!0)):(t.setState(Za,!0),t.hasState(Ea)&&t.setState(Ea,!1))},o.prototype.setStateByElement=function(t,i){var b=this.context.view,D=b.getXScale(),rt=ln(t,D.field),Mt=Re(b),Nt=Mt.filter(function(ne){return ln(ne,D.field)===rt});this.setHighlightBy(Mt,function(ne){return Nt.includes(ne)},i)},o.prototype.toggle=function(){var t=me(this.context);if(t){var i=t.hasState(this.stateName);this.setStateByElement(t,!i)}},o}(Xu),Pf=If,ou=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="active",t}return o.prototype.clearViewState=function(t){Qa(t)},o.prototype.highlight=function(){this.setState()},o.prototype.setElementsState=function(t,i,b){Af(b,function(D){return t.indexOf(D)>=0},i)},o}(Vu),Ec=ou,Df=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="active",t}return o.prototype.highlight=function(){this.setState()},o.prototype.setElementState=function(t,i){var b=this.context.view,D=Re(b);Af(D,function(rt){return t===rt},i)},o.prototype.clear=function(){var t=this.context.view;Qa(t)},o}(ru),kf=Df,ad=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="selected",t}return o.prototype.selected=function(){this.setState()},o}(Vu),sd=ad,ud=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="selected",t}return o.prototype.selected=function(){this.setState()},o}(nu),cd=ud,ld=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="selected",t}return o.prototype.selected=function(){this.setState()},o}(ru),Yu=ld,cs=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="",t.ignoreItemStates=[],t}return o.prototype.getTriggerListInfo=function(){var t=Zt(this.context),i=null;return he(t)&&(i={item:t.item,list:t.component}),i},o.prototype.getAllowComponents=function(){var t=this,i=this.context.view,b=Pe(i),D=[];return Object(a.each)(b,function(rt){rt.isList()&&t.allowSetStateByElement(rt)&&D.push(rt)}),D},o.prototype.hasState=function(t,i){return t.hasState(i,this.stateName)},o.prototype.clearAllComponentsState=function(){var t=this,i=this.getAllowComponents();Object(a.each)(i,function(b){b.clearItemsState(t.stateName)})},o.prototype.allowSetStateByElement=function(t){var i=t.get("field");if(!i)return!1;if(this.cfg&&this.cfg.componentNames){var b=t.get("name");if(this.cfg.componentNames.indexOf(b)===-1)return!1}var D=this.context.view,rt=mn(D,i);return rt&&rt.isCategory},o.prototype.allowSetStateByItem=function(t,i){var b=this.ignoreItemStates;if(b.length){var D=b.filter(function(rt){return i.hasState(t,rt)});return D.length===0}return!0},o.prototype.setStateByElement=function(t,i,b){var D=t.get("field"),rt=this.context.view,Mt=mn(rt,D),Nt=ln(i,D),ne=Mt.getText(Nt);this.setItemsState(t,ne,b)},o.prototype.setStateEnable=function(t){var i=this,b=me(this.context);if(b){var D=this.getAllowComponents();Object(a.each)(D,function(ne){i.setStateByElement(ne,b,t)})}else{var rt=Zt(this.context);if(he(rt)){var Mt=rt.item,Nt=rt.component;this.allowSetStateByElement(Nt)&&this.allowSetStateByItem(Mt,Nt)&&this.setItemState(Nt,Mt,t)}}},o.prototype.setItemsState=function(t,i,b){var D=this,rt=t.getItems();Object(a.each)(rt,function(Mt){Mt.name===i&&D.setItemState(t,Mt,b)})},o.prototype.setItemState=function(t,i,b){t.setItemState(i,this.stateName,b)},o.prototype.setState=function(){this.setStateEnable(!0)},o.prototype.reset=function(){this.setStateEnable(!1)},o.prototype.toggle=function(){var t=this.getTriggerListInfo();if(t&&t.item){var i=t.list,b=t.item,D=this.hasState(i,b);this.setItemState(i,b,!D)}},o.prototype.clear=function(){var t=this.getTriggerListInfo();t?t.list.clearItemsState(this.stateName):this.clearAllComponentsState()},o}(ut),ls=cs,au=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="active",t}return o.prototype.active=function(){this.setState()},o}(ls),Rf=au,Mc="inactive",Ac="active";function Nf(c){var o=c.getItems();Object(a.each)(o,function(t){c.hasState(t,Ac)&&c.setItemState(t,Ac,!1),c.hasState(t,Mc)&&c.setItemState(t,Mc,!1)})}var Ts="inactive",$a="active",Lf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName=$a,t.ignoreItemStates=["unchecked"],t}return o.prototype.setItemsState=function(t,i,b){this.setHighlightBy(t,function(D){return D.name===i},b)},o.prototype.setItemState=function(t,i,b){var D=t.getItems();this.setHighlightBy(t,function(rt){return rt===i},b)},o.prototype.setHighlightBy=function(t,i,b){var D=t.getItems();if(b)Object(a.each)(D,function(Nt){i(Nt)?(t.hasState(Nt,Ts)&&t.setItemState(Nt,Ts,!1),t.setItemState(Nt,$a,!0)):t.hasState(Nt,$a)||t.setItemState(Nt,Ts,!0)});else{var rt=t.getItemsByState($a),Mt=!0;Object(a.each)(rt,function(Nt){if(!i(Nt))return Mt=!1,!1}),Mt?this.clear():Object(a.each)(D,function(Nt){i(Nt)&&(t.hasState(Nt,$a)&&t.setItemState(Nt,$a,!1),t.setItemState(Nt,Ts,!0))})}},o.prototype.highlight=function(){this.setState()},o.prototype.clear=function(){var t=this.getTriggerListInfo();if(t)Nf(t.list);else{var i=this.getAllowComponents();Object(a.each)(i,function(b){b.clearItemsState($a),b.clearItemsState(Ts)})}},o}(ls),fs=Lf,Bf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="selected",t}return o.prototype.selected=function(){this.setState()},o}(ls),Ff=Bf,Gf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.stateName="unchecked",t}return o.prototype.unchecked=function(){this.setState()},o}(ls),fd=Gf,Uf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.maskShape=null,t.points=[],t.starting=!1,t.moving=!1,t.preMovePoint=null,t.shapeType="path",t}return o.prototype.getCurrentPoint=function(){var t=this.context.event;return{x:t.x,y:t.y}},o.prototype.emitEvent=function(t){var i="mask:"+t,b=this.context.view,D=this.context.event;b.emit(i,{target:this.maskShape,shape:this.maskShape,points:this.points,x:D.x,y:D.y})},o.prototype.createMask=function(){var t=this.context.view,i=this.getMaskAttrs(),b=t.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:Object(at.a)({fill:"#C5D4EB",opacity:.3},i)});return b},o.prototype.getMaskPath=function(){return[]},o.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},o.prototype.start=function(){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(),this.emitEvent("start")},o.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},o.prototype.move=function(){if(!(!this.moving||!this.maskShape)){var t=this.getCurrentPoint(),i=this.preMovePoint,b=t.x-i.x,D=t.y-i.y,rt=this.points;Object(a.each)(rt,function(Mt){Mt.x+=b,Mt.y+=D}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=t}},o.prototype.updateMask=function(){var t=this.getMaskAttrs();this.maskShape.attr(t)},o.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},o.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},o.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},o.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},o.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,c.prototype.destroy.call(this)},o}(ut),Hu=Uf,zf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.shapeType="circle",t}return o.prototype.getMaskAttrs=function(){var t=this.points,i=Object(a.last)(this.points),b=0,D=0,rt=0;if(t.length){var Mt=t[0];b=le(Mt,i)/2,D=(i.x+Mt.x)/2,rt=(i.y+Mt.y)/2}return{x:D,y:rt,r:b}},o}(Hu),_f=zf,Vf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.shapeType="rect",t}return o.prototype.getRegion=function(){var t=this.points;return{start:Object(a.head)(t),end:Object(a.last)(t)}},o.prototype.getMaskAttrs=function(){var t=this.getRegion(),i=t.start,b=t.end,D=Math.min(i.x,b.x),rt=Math.min(i.y,b.y),Mt=Math.abs(b.x-i.x),Nt=Math.abs(b.y-i.y);return{x:D,y:rt,width:Mt,height:Nt}},o}(Hu),Cc=Vf;function Tc(c){c.x=Object(a.clamp)(c.x,0,1),c.y=Object(a.clamp)(c.y,0,1)}var su=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.dim="x",t.inPlot=!0,t}return o.prototype.getRegion=function(){var t=null,i=null,b=this.points,D=this.dim,rt=this.context.view.getCoordinate(),Mt=rt.invert(Object(a.head)(b)),Nt=rt.invert(Object(a.last)(b));return this.inPlot&&(Tc(Mt),Tc(Nt)),D==="x"?(t=rt.convert({x:Mt.x,y:0}),i=rt.convert({x:Nt.x,y:1})):(t=rt.convert({x:0,y:Mt.y}),i=rt.convert({x:1,y:Nt.y})),{start:t,end:i}},o}(Cc),jc=su,Wf=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getMaskPath=function(){var t=this.points,i=[];return t.length&&(Object(a.each)(t,function(b,D){D===0?i.push(["M",b.x,b.y]):i.push(["L",b.x,b.y])}),i.push(["L",t[0].x,t[0].y])),i},o.prototype.getMaskAttrs=function(){return{path:this.getMaskPath()}},o.prototype.addPoint=function(){this.resize()},o}(Hu),Ic=Wf,hd=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.getMaskPath=function(){var t=this.points;return Le(t,!0)},o}(Ic),Xf=hd,dd=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.setCursor=function(t){var i=this.context.view;i.getCanvas().setCursor(t)},o.prototype.default=function(){this.setCursor("default")},o.prototype.pointer=function(){this.setCursor("pointer")},o.prototype.move=function(){this.setCursor("move")},o.prototype.crosshair=function(){this.setCursor("crosshair")},o.prototype.wait=function(){this.setCursor("wait")},o.prototype.help=function(){this.setCursor("help")},o.prototype.text=function(){this.setCursor("text")},o.prototype.eResize=function(){this.setCursor("e-resize")},o.prototype.wResize=function(){this.setCursor("w-resize")},o.prototype.nResize=function(){this.setCursor("n-resize")},o.prototype.sResize=function(){this.setCursor("s-resize")},o.prototype.neResize=function(){this.setCursor("ne-resize")},o.prototype.nwResize=function(){this.setCursor("nw-resize")},o.prototype.seResize=function(){this.setCursor("se-resize")},o.prototype.swResize=function(){this.setCursor("sw-resize")},o.prototype.nsResize=function(){this.setCursor("ns-resize")},o.prototype.ewResize=function(){this.setCursor("ew-resize")},o}(ut),vd=dd,Yf=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.filterView=function(t,i,b){var D=this;t.getScaleByField(i)&&t.filter(i,b),t.views&&t.views.length&&Object(a.each)(t.views,function(rt){D.filterView(rt,i,b)})},o.prototype.filter=function(){var t=Zt(this.context);if(t){var i=this.context.view,b=t.component,D=b.get("field");if(he(t)){if(D){var rt=b.getItemsByState("unchecked"),Mt=mn(i,D),Nt=rt.map(function(Ae){return Ae.name});Nt.length?this.filterView(i,D,function(Ae){var Xe=Mt.getText(Ae);return!Nt.includes(Xe)}):this.filterView(i,D,null),i.render(!0)}}else if(ce(t)){var ne=b.getValue(),ge=ne[0],be=ne[1];this.filterView(i,D,function(Ae){return Ae>=ge&&Ae<=be}),i.render(!0)}}},o}(ut),Hf=Yf;function Pc(c,o,t,i){var b=Math.min(t[o],i[o]),D=Math.max(t[o],i[o]),rt=c.range,Mt=rt[0],Nt=rt[1];if(b<Mt&&(b=Mt),D>Nt&&(D=Nt),b===Nt&&D===Nt)return null;var ne=c.invert(b),ge=c.invert(D);if(c.isCategory){var be=c.values.indexOf(ne),Ae=c.values.indexOf(ge),Xe=c.values.slice(be,Ae+1);return function(an){return Xe.includes(an)}}else return function(an){return an>=ne&&an<=ge}}var Kf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.dims=["x","y"],t.startPoint=null,t.isStarted=!1,t}return o.prototype.hasDim=function(t){return this.dims.includes(t)},o.prototype.start=function(){var t=this.context;this.isStarted=!0,this.startPoint=t.getCurrentPoint()},o.prototype.filter=function(){var t,i;if(Me(this.context)){var b=this.context.event.target,D=b.getCanvasBBox();t={x:D.x,y:D.y},i={x:D.maxX,y:D.maxY}}else{if(!this.isStarted)return;t=this.startPoint,i=this.context.getCurrentPoint()}if(!(Math.abs(t.x-i.x)<5||Math.abs(t.x-i.y)<5)){var rt=this.context.view,Mt=rt.getCoordinate(),Nt=Mt.invert(i),ne=Mt.invert(t);if(this.hasDim("x")){var ge=rt.getXScale(),be=Pc(ge,"x",Nt,ne);this.filterView(rt,ge.field,be)}if(this.hasDim("y")){var Ae=rt.getYScales()[0],be=Pc(Ae,"y",Nt,ne);this.filterView(rt,Ae.field,be)}this.reRender(rt)}},o.prototype.end=function(){this.isStarted=!1},o.prototype.reset=function(){var t=this.context.view;if(this.isStarted=!1,this.hasDim("x")){var i=t.getXScale();this.filterView(t,i.field,null)}if(this.hasDim("y")){var b=t.getYScales()[0];this.filterView(t,b.field,null)}this.reRender(t)},o.prototype.filterView=function(t,i,b){t.filter(i,b)},o.prototype.reRender=function(t){t.render(!0)},o}(ut),uu=Kf,cu=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.filterView=function(t,i,b){var D=en(t);Object(a.each)(D,function(rt){rt.filter(i,b)})},o.prototype.reRender=function(t){var i=en(t);Object(a.each)(i,function(b){b.render(!0)})},o}(uu),Ku=cu,Jf=function(c){Object(at.b)(o,c);function o(){return c!==null&&c.apply(this,arguments)||this}return o.prototype.filter=function(){var t=Zt(this.context),i=this.context.view,b=Re(i);if(Me(this.context)){var D=_e(this.context,10);D&&Object(a.each)(b,function(an){D.includes(an)?an.show():an.hide()})}else if(t){var rt=t.component,Mt=rt.get("field");if(he(t)){if(Mt){var Nt=rt.getItemsByState("unchecked"),ne=mn(i,Mt),ge=Nt.map(function(an){return an.name});Object(a.each)(b,function(an){var gn=ln(an,Mt),Yn=ne.getText(gn);ge.indexOf(Yn)>=0?an.hide():an.show()})}}else if(ce(t)){var be=rt.getValue(),Ae=be[0],Xe=be[1];Object(a.each)(b,function(an){var gn=ln(an,Mt);gn>=Ae&&gn<=Xe?an.show():an.hide()})}}},o.prototype.clear=function(){var t=Re(this.context.view);Object(a.each)(t,function(i){i.show()})},o.prototype.reset=function(){this.clear()},o}(ut),Qf=Jf,pd=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.byRecord=!1,t}return o.prototype.filter=function(){Me(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},o.prototype.filterByRecord=function(){var t=this.context.view,i=_e(this.context,10);if(!!i){var b=t.getXScale().field,D=t.getYScales()[0].field,rt=i.map(function(Nt){return Nt.getModel().data}),Mt=en(t);Object(a.each)(Mt,function(Nt){var ne=Re(Nt);Object(a.each)(ne,function(ge){var be=ge.getModel().data;fn(rt,be,b,D)?ge.show():ge.hide()})})}},o.prototype.filterByBBox=function(){var t=this,i=this.context.view,b=en(i);Object(a.each)(b,function(D){var rt=We(t.context,D,10),Mt=Re(D);rt&&Object(a.each)(Mt,function(Nt){rt.includes(Nt)?Nt.show():Nt.hide()})})},o.prototype.reset=function(){var t=en(this.context.view);Object(a.each)(t,function(i){var b=Re(i);Object(a.each)(b,function(D){D.show()})})},o}(ut),Dc=pd,Zf=10,$f=5,qf=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.buttonGroup=null,t.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},t}return o.prototype.getButtonCfg=function(){return Object(a.deepMix)(this.buttonCfg,this.cfg)},o.prototype.drawButton=function(){var t=this.getButtonCfg(),i=this.context.view.foregroundGroup.addGroup({name:t.name}),b=i.addShape({type:"text",name:"button-text",attrs:Object(at.a)({text:t.text},t.textStyle)}),D=b.getBBox(),rt=ya(t.padding),Mt=i.addShape({type:"rect",name:"button-rect",attrs:Object(at.a)({x:D.x-rt[3],y:D.y-rt[0],width:D.width+rt[1]+rt[3],height:D.height+rt[0]+rt[2]},t.style)});Mt.toBack(),i.on("mouseenter",function(){Mt.attr(t.activeStyle)}),i.on("mouseleave",function(){Mt.attr(t.style)}),this.buttonGroup=i},o.prototype.resetPosition=function(){var t=this.context.view,i=t.getCoordinate(),b=i.convert({x:1,y:1}),D=this.buttonGroup,rt=D.getBBox(),Mt=jr.a.transform(null,[["t",b.x-rt.width-Zf,b.y+rt.height+$f]]);D.setMatrix(Mt)},o.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},o.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},o.prototype.destroy=function(){var t=this.buttonGroup;t&&t.remove(),c.prototype.destroy.call(this)},o}(ut),th=qf,eh=4,nh=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.starting=!1,t.dragStart=!1,t}return o.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},o.prototype.drag=function(){if(!!this.startPoint){var t=this.context.getCurrentPoint(),i=this.context.view,b=this.context.event;this.dragStart?i.emit("drag",{target:b.target,x:b.x,y:b.y}):le(t,this.startPoint)>eh&&(i.emit("dragstart",{target:b.target,x:b.x,y:b.y}),this.dragStart=!0)}},o.prototype.end=function(){if(this.dragStart){var t=this.context.view,i=this.context.event;t.emit("dragend",{target:i.target,x:i.x,y:i.y})}this.starting=!1,this.dragStart=!1},o}(ut),kc=nh,rh=5,ih=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.starting=!1,t.isMoving=!1,t.startPoint=null,t.startMatrix=null,t}return o.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},o.prototype.move=function(){if(!!this.starting){var t=this.startPoint,i=this.context.getCurrentPoint(),b=le(t,i);if(b>rh&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var D=this.context.view,rt=jr.a.transform(this.startMatrix,[["t",i.x-t.x,i.y-t.y]]);D.backgroundGroup.setMatrix(rt),D.foregroundGroup.setMatrix(rt),D.middleGroup.setMatrix(rt)}}},o.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},o.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var t=this.context.view;t.backgroundGroup.resetMatrix(),t.foregroundGroup.resetMatrix(),t.middleGroup.resetMatrix(),this.isMoving=!1},o}(ut),oh=ih,Rc="x",Ju="y",ah=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.dims=[Rc,Ju],t.cfgFields=["dims"],t.cacheScaleDefs={},t}return o.prototype.hasDim=function(t){return this.dims.includes(t)},o.prototype.getScale=function(t){var i=this.context.view;return t==="x"?i.getXScale():i.getYScales()[0]},o.prototype.resetDim=function(t){var i=this.context.view;if(this.hasDim(t)&&this.cacheScaleDefs[t]){var b=this.getScale(t);i.scale(b.field,this.cacheScaleDefs[t]),this.cacheScaleDefs[t]=null}},o.prototype.reset=function(){this.resetDim(Rc),this.resetDim(Ju);var t=this.context.view;t.render(!0)},o}(ut),Nc=ah,sh=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.startPoint=null,t.starting=!1,t.startCache={},t}return o.prototype.start=function(){var t=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var i=this.dims;Object(a.each)(i,function(b){var D=t.getScale(b),rt=D.min,Mt=D.max,Nt=D.values;t.startCache[b]={min:rt,max:Mt,values:Nt}})},o.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},o.prototype.translate=function(){var t=this;if(!!this.starting){var i=this.startPoint,b=this.context.view.getCoordinate(),D=this.context.getCurrentPoint(),rt=b.invert(i),Mt=b.invert(D),Nt=Mt.x-rt.x,ne=Mt.y-rt.y,ge=this.context.view,be=this.dims;Object(a.each)(be,function(Ae){t.translateDim(Ae,{x:Nt*-1,y:ne*-1})}),ge.render(!0)}},o.prototype.translateDim=function(t,i){if(this.hasDim(t)){var b=this.getScale(t);b.isLinear&&this.translateLinear(t,b,i)}},o.prototype.translateLinear=function(t,i,b){var D=this.context.view,rt=this.startCache[t],Mt=rt.min,Nt=rt.max,ne=Nt-Mt,ge=b[t]*ne;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:i.nice,min:Mt,max:Nt}),D.scale(i.field,{nice:!1,min:Mt+ge,max:Nt+ge})},o.prototype.reset=function(){c.prototype.reset.call(this),this.startPoint=null,this.starting=!1},o}(Nc),uh=sh,ch=function(c){Object(at.b)(o,c);function o(){var t=c!==null&&c.apply(this,arguments)||this;return t.zoomRatio=.05,t}return o.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},o.prototype.zoom=function(t){var i=this,b=this.dims;Object(a.each)(b,function(D){i.zoomDim(D,t)}),this.context.view.render(!0)},o.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},o.prototype.zoomDim=function(t,i){if(this.hasDim(t)){var b=this.getScale(t);b.isLinear&&this.zoomLinear(t,b,i)}},o.prototype.zoomLinear=function(t,i,b){var D=this.context.view;this.cacheScaleDefs[t]||(this.cacheScaleDefs[t]={nice:i.nice,min:i.min,max:i.max});var rt=this.cacheScaleDefs[t],Mt=rt.max-rt.min,Nt=i.min,ne=i.max,ge=b*Mt,be=Nt-ge,Ae=ne+ge,Xe=Ae-be,an=Xe/Mt;Ae>be&&an<100&&an>.01&&D.scale(i.field,{nice:!1,min:Nt-ge,max:ne+ge})},o}(Nc),gd=ch;ks("dark",ta(co)),T("canvas",lo),T("svg",Hi),Ho("Polygon",ml),Ho("Interval",Ss),Ho("Schema",fc),Ho("Path",wu),Ho("Point",pl),Ho("Line",cc),Ho("Area",el),Ho("Edge",il),Ho("Heatmap",al),jn("base",Fe),jn("interval",Ch),jn("pie",jh),jn("polar",gc),Wo("overlap",$o),Wo("distribute",Ph),Wo("fixed-overlap",Ks),Wo("hide-overlap",Du),Wo("limit-in-shape",Nh),Wo("limit-in-canvas",ha),Wo("limit-in-plot",ql),Wo("pie-outer",Nl),Wo("adjust-color",zl),Wo("interval-adjust-position",ku),Wo("interval-hide-overlap",Yl),Wo("point-adjust-position",Ru),Wo("pie-spider",Rh),Wo("path-adjust-position",Ql),Eo("fade-in",tf),Eo("fade-out",ef),Eo("grow-in-x",rf),Eo("grow-in-xy",af),Eo("grow-in-y",of),Eo("scale-in-x",uf),Eo("scale-in-y",Pa),Eo("wave-in",Ya),Eo("zoom-in",Bu),Eo("zoom-out",Oa),Eo("position-update",Lu),Eo("sector-path-update",Zs),Eo("path-in",sf),B("rect",lf),B("mirror",Gh),B("list",cf),B("matrix",Bh),B("circle",wa),B("tree",zh),yr("axis",gf),yr("legend",Of),yr("tooltip",Fs),yr("annotation",df),yr("slider",Sf),yr("scrollbar",Jh),Ee("tooltip",da),Ee("sibling-tooltip",Jo),Ee("ellipsis-text",_u),Ee("element-active",qh),Ee("element-single-active",od),Ee("element-range-active",rd),Ee("element-highlight",Xu),Ee("element-highlight-by-x",Pf),Ee("element-highlight-by-color",jf),Ee("element-single-highlight",kf),Ee("element-range-highlight",Ec),Ee("element-sibling-highlight",Ec,{effectSiblings:!0,effectByRecord:!0}),Ee("element-selected",cd),Ee("element-single-selected",Yu),Ee("element-range-selected",sd),Ee("element-link-by-color",ed),Ee("active-region",Ef),Ee("list-active",Rf),Ee("list-selected",Ff),Ee("list-highlight",fs),Ee("list-unchecked",fd),Ee("legend-item-highlight",fs,{componentNames:["legend"]}),Ee("axis-label-highlight",fs,{componentNames:["axis"]}),Ee("rect-mask",Cc),Ee("x-rect-mask",jc,{dim:"x"}),Ee("y-rect-mask",jc,{dim:"y"}),Ee("circle-mask",_f),Ee("path-mask",Ic),Ee("smooth-path-mask",Xf),Ee("cursor",vd),Ee("data-filter",Hf),Ee("brush",uu),Ee("brush-x",uu,{dims:["x"]}),Ee("brush-y",uu,{dims:["y"]}),Ee("sibling-filter",Ku),Ee("sibling-x-filter",Ku),Ee("sibling-y-filter",Ku),Ee("element-filter",Qf),Ee("element-sibling-filter",Dc),Ee("element-sibling-filter-record",Dc,{byRecord:!0}),Ee("view-drag",kc),Ee("view-move",oh),Ee("scale-translate",uh),Ee("scale-zoom",gd),Ee("reset-button",th,{name:"reset-button",text:"reset"});function va(c){return c.isInPlot()}$i("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]}),$i("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]}),$i("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),$i("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]}),$i("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]}),$i("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]}),$i("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]}),$i("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]}),$i("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]}),$i("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]}),$i("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]}),$i("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(o){return!o.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(o){return!o.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]}),$i("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:va,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:va,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:va,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]}),$i("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]}),$i("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:va,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:va,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:va,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]}),$i("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:va,action:"path-mask:start"},{trigger:"mousedown",isEnable:va,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]}),$i("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]}),$i("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter"]}]}),$i("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]}),$i("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]}),$i("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","element-filter:filter"]}]}),$i("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]});function hs(c){return c.gEvent.preventDefault(),c.gEvent.originalEvent.deltaY>0}$i("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(o){return hs(o.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(o){return!hs(o.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]}),$i("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]})},kwiP:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return p});var at=z("mrSG"),a=z("zJSt"),A=z("u9/z"),e=z("SZbK"),r=z("B3DA"),p=function(m){Object(at.b)(O,m);function O(){var l=m!==null&&m.apply(this,arguments)||this;return l.type="process",l}return O.prototype.getDefaultOptions=function(){return{percent:.2,color:e.a,animation:!0}},O.prototype.changeData=function(l){this.updateOption({percent:l}),this.chart.changeData(Object(r.a)(l))},O.prototype.getSchemaAdaptor=function(){return A.a},O}(a.a)},l3hu:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return a});var at=z("iTfj");function a(A,e,r){var p=e+"Style",m=null;return Object(at.each)(r,function(O,l){A[l]&&O[p]&&(m||(m={}),Object(at.mix)(m,O[p]))}),m}},lFe4:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return a});var at=z("iTfj");function a(A){return Object(at.map)(A||[],function(e,r){return{x:""+r,y:e}})}},lOPJ:function(zn,Ut,z){"use strict";var at=z("AA7f"),a=z("iTfj"),A=z("0Xep"),e=z("Qci9"),r=function(p){Object(at.b)(m,p);function m(O){var l=p.call(this,O)||this;l.cacheMap={},l.adjustDataArray=[],l.mergeData=[];var E=O.marginRatio,j=E===void 0?A.d:E,y=O.dodgeRatio,n=y===void 0?A.b:y,s=O.dodgeBy,d=O.intervalPadding,M=O.dodgePadding,S=O.xDimensionLength,T=O.groupNum,v=O.defaultSize,x=O.maxColumnWidth,C=O.minColumnWidth,N=O.columnWidthRatio;return l.marginRatio=j,l.dodgeRatio=n,l.dodgeBy=s,l.intervalPadding=d,l.dodgePadding=M,l.xDimensionLegenth=S,l.groupNum=T,l.defaultSize=v,l.maxColumnWidth=x,l.minColumnWidth=C,l.columnWidthRatio=N,l}return m.prototype.process=function(O){var l=a.clone(O),E=a.flatten(l),j=this.dodgeBy,y=j?a.group(E,j):l;return this.cacheMap={},this.adjustDataArray=y,this.mergeData=E,this.adjustData(y,E),this.adjustDataArray=[],this.mergeData=[],l},m.prototype.adjustDim=function(O,l,E,j){var y=this,n=this.getDistribution(O),s=this.groupData(E,O);return a.each(s,function(d,M){var S;l.length===1?S={pre:l[0]-1,next:l[0]+1}:S=y.getAdjustRange(O,parseFloat(M),l),a.each(d,function(T){var v=T[O],x=n[v],C=x.indexOf(j);T[O]=y.getDodgeOffset(S,C,x.length)})}),[]},m.prototype.getDodgeOffset=function(O,l,E){var j=this,y=j.dodgeRatio,n=j.marginRatio,s=j.intervalPadding,d=j.dodgePadding,M=O.pre,S=O.next,T=S-M,v;if(!a.isNil(s)&&a.isNil(d)&&s>=0){var x=this.getIntervalOnlyOffset(E,l);v=M+x}else if(!a.isNil(d)&&a.isNil(s)&&d>=0){var x=this.getDodgeOnlyOffset(E,l);v=M+x}else if(!a.isNil(s)&&!a.isNil(d)&&s>=0&&d>=0){var x=this.getIntervalAndDodgeOffset(E,l);v=M+x}else{var C=T*y/E,N=n*C,x=1/2*(T-E*C-(E-1)*N)+((l+1)*C+l*N)-1/2*C-1/2*T;v=(M+S)/2+x}return v},m.prototype.getIntervalOnlyOffset=function(O,l){var E=this,j=E.defaultSize,y=E.intervalPadding,n=E.xDimensionLegenth,s=E.groupNum,d=E.dodgeRatio,M=E.maxColumnWidth,S=E.minColumnWidth,T=E.columnWidthRatio,v=y/n,x=(1-(s-1)*v)/s*d/(O-1),C=((1-v*(s-1))/s-x*(O-1))/O;if(C=a.isNil(T)?C:1/s/O*T,!a.isNil(M)){var N=M/n;C=Math.min(C,N)}if(!a.isNil(S)){var X=S/n;C=Math.max(C,X)}C=j?j/n:C,x=((1-(s-1)*v)/s-O*C)/(O-1);var tt=((1/2+l)*C+l*x+1/2*v)*s-v/2;return tt},m.prototype.getDodgeOnlyOffset=function(O,l){var E=this,j=E.defaultSize,y=E.dodgePadding,n=E.xDimensionLegenth,s=E.groupNum,d=E.marginRatio,M=E.maxColumnWidth,S=E.minColumnWidth,T=E.columnWidthRatio,v=y/n,x=1*d/(s-1),C=((1-x*(s-1))/s-v*(O-1))/O;if(C=T?1/s/O*T:C,!a.isNil(M)){var N=M/n;C=Math.min(C,N)}if(!a.isNil(S)){var X=S/n;C=Math.max(C,X)}C=j?j/n:C,x=(1-(C*O+v*(O-1))*s)/(s-1);var tt=((1/2+l)*C+l*v+1/2*x)*s-x/2;return tt},m.prototype.getIntervalAndDodgeOffset=function(O,l){var E=this,j=E.intervalPadding,y=E.dodgePadding,n=E.xDimensionLegenth,s=E.groupNum,d=j/n,M=y/n,S=((1-d*(s-1))/s-M*(O-1))/O,T=((1/2+l)*S+l*M+1/2*d)*s-d/2;return T},m.prototype.getDistribution=function(O){var l=this.adjustDataArray,E=this.cacheMap,j=E[O];return j||(j={},a.each(l,function(y,n){var s=a.valuesOfKey(y,O);s.length||s.push(0),a.each(s,function(d){j[d]||(j[d]=[]),j[d].push(n)})}),E[O]=j),j},m}(e.a);Ut.a=r},lr9b:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return T});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("iTfj"),r=z("w02o"),p=z("n/J0"),m="$$range$$",O="low-q1-median-q3-high",l="$$y_outliers$$";function E(v){var x=v.chart,C=v.options,N=C.xField,X=C.yField,tt=C.groupField,it=C.color,pt=Array.isArray(X)?m:X,ft=x.schema().position(N+"*"+pt).shape("box");tt&&ft.color(tt,it).adjust("dodge");var Ot=C.data;if(Array.isArray(X)){var wt=X[0],xt=X[1],lt=X[2],Vt=X[3],Lt=X[4];Ot=Object(e.map)(Ot,function(Et){return Et[m]=[Et[wt],Et[xt],Et[lt],Et[Vt],Et[Lt]],Et})}return x.data(Ot),v}function j(v){var x=v.chart,C=v.options,N=C.xField,X=C.data,tt=C.outliersField,it=C.outliersStyle,pt=C.padding;if(!tt)return v;var ft=x.createView({padding:pt});ft.data(X),ft.axis(!1);var Ot=ft.point().position(N+"*"+tt).shape("circle");return Object(e.isFunction)(it)?Ot.style(N+"*"+tt,function(wt,xt){var lt;return it((lt={},lt[N]=wt,lt[tt]=xt,lt))}):Object(e.isObject)(it)&&Ot.style(it),v}function y(v){var x,C,N=v.chart,X=v.options,tt=X.meta,it=X.xAxis,pt=X.yAxis,ft=X.xField,Ot=X.yField,wt=X.outliersField,xt=Array.isArray(Ot)?m:Ot,lt={};if(wt){var Vt=l;lt=(x={},x[wt]={sync:Vt},x[xt]={sync:Vt},x)}var Lt=Object(A.b)(lt,tt,(C={},C[ft]=Object(A.k)(it,p.a),C[xt]=Object(A.k)(pt,p.a),C));return N.scale(Lt),v}function n(v){var x=v.chart,C=v.options,N=C.xAxis,X=C.yAxis,tt=C.xField,it=C.yField,pt=Array.isArray(it)?m:it;return N===!1?x.axis(tt,!1):x.axis(tt,N),X===!1?x.axis(m,!1):x.axis(pt,X),v}function s(v){var x=v.chart,C=v.options,N=C.legend,X=C.groupField;return X?N?x.legend(X,N):x.legend(X,{position:"bottom"}):x.legend(!1),v}function d(v){var x=v.chart,C=v.options,N=C.xField,X=C.yField,tt=C.boxStyle,it=Object(A.c)(x,"schema"),pt=Array.isArray(X)?m:X;return Object(e.isFunction)(tt)?it.style(N+"*"+pt,function(ft,Ot){var wt;return tt((wt={},wt[N]=ft,wt[pt]=Ot,wt))}):Object(e.isObject)(tt)&&it.style(tt),v}function M(v){var x=v.chart,C=v.options,N=C.tooltip;return N!==void 0&&x.tooltip(N),v}function S(v){return Object(A.e)(E,j,y,n,d,s,M,r.c,r.a,r.j)(v)}var T=function(v){Object(at.b)(x,v);function x(){var C=v!==null&&v.apply(this,arguments)||this;return C.type="box",C}return x.prototype.getDefaultOptions=function(){var C;return Object(A.b)({},v.prototype.getDefaultOptions.call(this),{meta:(C={},C[m]={min:0,alias:O},C),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,showCrosshairs:!0,shared:!0}})},x.prototype.getSchemaAdaptor=function(){return S},x}(a.a)},lt7v:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return a});var at=null;function a(){if(!at){var A=document.createElement("canvas");A.width=1,A.height=1,at=A.getContext("2d")}return at}},"ma/q":function(zn,Ut,z){"use strict";var at=z("kXyF");z.d(Ut,"G2",function(){return at});var a=z("zJSt"),A=z("Djfg"),e=z("XloR");z.d(Ut,"Line",function(){return e.a});var r=z("uw/B");z.d(Ut,"Area",function(){return r.a});var p=z("u9VJ");z.d(Ut,"Column",function(){return p.a});var m=z("Y+LX");z.d(Ut,"Bar",function(){return m.a});var O=z("Cr25");z.d(Ut,"Pie",function(){return O.a});var l=z("z4Vf");z.d(Ut,"Rose",function(){return l.a});var E=z("Mj7Y");z.d(Ut,"WordCloud",function(){return E.a});var j=z("tE4n");z.d(Ut,"Scatter",function(){return j.a});var y=z("y753");z.d(Ut,"Radar",function(){return y.a});var n=z("yqCL");z.d(Ut,"DualAxes",function(){return n.a});var s=z("mttH");z.d(Ut,"TinyLine",function(){return s.a});var d=z("027J");z.d(Ut,"TinyColumn",function(){return d.a});var M=z("05BJ");z.d(Ut,"TinyArea",function(){return M.a});var S=z("BwSJ");z.d(Ut,"Histogram",function(){return S.a});var T=z("kwiP");z.d(Ut,"Progress",function(){return T.a});var v=z("YP77");z.d(Ut,"RingProgress",function(){return v.a});var x=z("+wVF");z.d(Ut,"Heatmap",function(){return x.a});var C=z("lr9b");z.d(Ut,"Box",function(){return C.a});var N=z("/+3i");z.d(Ut,"Stock",function(){return N.a});var X=z("aLzy");z.d(Ut,"Funnel",function(){return X.a});var tt=z("FAXy");z.d(Ut,"Liquid",function(){return tt.a});var it=z("BYeR");z.d(Ut,"Bullet",function(){return it.a});var pt=z("cBFB");z.d(Ut,"Sunburst",function(){return pt.a});var ft=z("XpFM");z.d(Ut,"Gauge",function(){return ft.a});var Ot=z("FLLP");z.d(Ut,"Waterfall",function(){return Ot.a});var wt=z("TEat");z.d(Ut,"RadialBar",function(){return wt.a});var xt=z("7ZbV");z.d(Ut,"BidirectionalBar",function(){return xt.a});var lt=z("eHqw");z.d(Ut,"Treemap",function(){return lt.a});var Vt=z("rtSP");z.d(Ut,"Sankey",function(){return Vt.a});var Lt=z("Uo7R"),Et=z("7+4w"),J=z("QG4C");z.d(Ut,"MultiView",function(){return J.a});var ht=z("YuPD"),vt=z("tKoa"),bt=z("w02o"),At=z("46lQ"),q="2.3.10",ct={scale:bt.f,legend:bt.d,tooltip:bt.k,annotation:bt.b,interaction:bt.c,theme:bt.j,animation:bt.a}},mj6g:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return e}),z.d(Ut,"d",function(){return r}),z.d(Ut,"c",function(){return p}),z.d(Ut,"b",function(){return m});var at=z("mrSG"),a=z("iTfj"),A=z("YuPD");function e(O){var l={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},E=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];Object(a.get)(O,"fill")&&(l.color=O.fill);var j=Object(A.k)(O,E),y=j.shadowColor,n=j.shadowBlur,s=n===void 0?0:n,d=j.shadowOffsetX,M=d===void 0?0:d,S=j.shadowOffsetY,T=S===void 0?0:S;l["text-shadow"]=""+[y,M+"px",T+"px",s+"px"].join(" ");var v=Object(A.k)(O,E),x=v.stroke,C=v.lineWidth,N=C===void 0?0:C;return l["-webkit-text-stroke"]=""+[N+"px",x].join(" "),Object(a.each)(O,function(X,tt){["fontSize"].includes(tt)&&Object(a.isNumber)(X)?l[Object(A.i)(tt)]=X+"px":tt&&!E.includes(tt)&&(l[Object(A.i)(tt)]=""+X)}),l}function r(O,l){O.style["pointer-events"]="none",Object(a.each)(l,function(E,j){j&&E&&(O.style[j]=E)})}var p=function(l,E,j){var y=E.statistic,n=E.plotType,s=y.title,d=y.content;[s,d].forEach(function(M,S){if(!!M){var T="",v="";S===0?v=d?"translate(-50%, -100%)":"translate(-50%, -50%)":v=s?"translate(-50%, 0)":"translate(-50%, -50%)";var x=Object(a.isFunction)(M.style)?M.style(j):M.style;l.annotation().html(Object(at.a)({position:["50%","50%"],html:function(N,X){var tt=X.getCoordinate(),it=0;if(n==="pie"||n==="ring-progress")it=tt.getRadius()*tt.innerRadius*2;else if(n==="liquid"){var pt=Object(a.get)(X.geometries,[0,"elements",0,"shape"]);if(pt){var ft=pt.find(function(xt){return xt.get("type")==="circle"}),Ot=ft.getCanvasBBox().width;it=Ot}}else it||(it=tt.getWidth());r(N,Object(at.a)({width:it+"px",transform:v},e(x)));var wt=X.getData();return M.customHtml?M.customHtml(N,X,j,wt):(M.formatter&&(T=M.formatter(j,wt)),T?Object(a.isString)(T)?T:""+T:"<div></div>")},key:(S===0?"top":"bottom")+"-statistic"},Object(A.k)(M,["offsetX","offsetY","rotate","style","formatter"])))}})},m=function(l,E,j){var y=E.statistic,n=y.title,s=y.content;[n,s].forEach(function(d){if(!!d){var M="",S=Object(a.isFunction)(d.style)?d.style(j):d.style;l.annotation().html(Object(at.a)({position:["50%","100%"],html:function(v,x){var C=x.getCoordinate(),N=x.views[0].getCoordinate(),X=N.getCenter(),tt=N.getRadius(),it=Math.max(Math.sin(N.startAngle),Math.sin(N.endAngle))*tt,pt=X.y+it-C.y.start-parseFloat(Object(a.get)(S,"fontSize",0)),ft=C.getRadius()*C.innerRadius*2;r(v,Object(at.a)({width:ft+"px",transform:"translate(-50%, "+pt+"px)"},e(S)));var Ot=x.getData();return d.customHtml?d.customHtml(v,x,j,Ot):(d.formatter&&(M=d.formatter(j,Ot)),M?Object(a.isString)(M)?M:""+M:"<div></div>")}},Object(A.k)(d,["offsetX","offsetY","rotate","style","formatter"])))}})}},mrSG:function(zn,Ut,z){"use strict";z.d(Ut,"b",function(){return a}),z.d(Ut,"a",function(){return A}),z.d(Ut,"c",function(){return e}),z.d(Ut,"d",function(){return d});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var at=function(Ot,wt){return at=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(xt,lt){xt.__proto__=lt}||function(xt,lt){for(var Vt in lt)Object.prototype.hasOwnProperty.call(lt,Vt)&&(xt[Vt]=lt[Vt])},at(Ot,wt)};function a(ft,Ot){if(typeof Ot!="function"&&Ot!==null)throw new TypeError("Class extends value "+String(Ot)+" is not a constructor or null");at(ft,Ot);function wt(){this.constructor=ft}ft.prototype=Ot===null?Object.create(Ot):(wt.prototype=Ot.prototype,new wt)}var A=function(){return A=Object.assign||function(wt){for(var xt,lt=1,Vt=arguments.length;lt<Vt;lt++){xt=arguments[lt];for(var Lt in xt)Object.prototype.hasOwnProperty.call(xt,Lt)&&(wt[Lt]=xt[Lt])}return wt},A.apply(this,arguments)};function e(ft,Ot){var wt={};for(var xt in ft)Object.prototype.hasOwnProperty.call(ft,xt)&&Ot.indexOf(xt)<0&&(wt[xt]=ft[xt]);if(ft!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,xt=Object.getOwnPropertySymbols(ft);lt<xt.length;lt++)Ot.indexOf(xt[lt])<0&&Object.prototype.propertyIsEnumerable.call(ft,xt[lt])&&(wt[xt[lt]]=ft[xt[lt]]);return wt}function r(ft,Ot,wt,xt){var lt=arguments.length,Vt=lt<3?Ot:xt===null?xt=Object.getOwnPropertyDescriptor(Ot,wt):xt,Lt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Vt=Reflect.decorate(ft,Ot,wt,xt);else for(var Et=ft.length-1;Et>=0;Et--)(Lt=ft[Et])&&(Vt=(lt<3?Lt(Vt):lt>3?Lt(Ot,wt,Vt):Lt(Ot,wt))||Vt);return lt>3&&Vt&&Object.defineProperty(Ot,wt,Vt),Vt}function p(ft,Ot){return function(wt,xt){Ot(wt,xt,ft)}}function m(ft,Ot){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(ft,Ot)}function O(ft,Ot,wt,xt){function lt(Vt){return Vt instanceof wt?Vt:new wt(function(Lt){Lt(Vt)})}return new(wt||(wt=Promise))(function(Vt,Lt){function Et(vt){try{ht(xt.next(vt))}catch(bt){Lt(bt)}}function J(vt){try{ht(xt.throw(vt))}catch(bt){Lt(bt)}}function ht(vt){vt.done?Vt(vt.value):lt(vt.value).then(Et,J)}ht((xt=xt.apply(ft,Ot||[])).next())})}function l(ft,Ot){var wt={label:0,sent:function(){if(Vt[0]&1)throw Vt[1];return Vt[1]},trys:[],ops:[]},xt,lt,Vt,Lt;return Lt={next:Et(0),throw:Et(1),return:Et(2)},typeof Symbol=="function"&&(Lt[Symbol.iterator]=function(){return this}),Lt;function Et(ht){return function(vt){return J([ht,vt])}}function J(ht){if(xt)throw new TypeError("Generator is already executing.");for(;wt;)try{if(xt=1,lt&&(Vt=ht[0]&2?lt.return:ht[0]?lt.throw||((Vt=lt.return)&&Vt.call(lt),0):lt.next)&&!(Vt=Vt.call(lt,ht[1])).done)return Vt;switch(lt=0,Vt&&(ht=[ht[0]&2,Vt.value]),ht[0]){case 0:case 1:Vt=ht;break;case 4:return wt.label++,{value:ht[1],done:!1};case 5:wt.label++,lt=ht[1],ht=[0];continue;case 7:ht=wt.ops.pop(),wt.trys.pop();continue;default:if(Vt=wt.trys,!(Vt=Vt.length>0&&Vt[Vt.length-1])&&(ht[0]===6||ht[0]===2)){wt=0;continue}if(ht[0]===3&&(!Vt||ht[1]>Vt[0]&&ht[1]<Vt[3])){wt.label=ht[1];break}if(ht[0]===6&&wt.label<Vt[1]){wt.label=Vt[1],Vt=ht;break}if(Vt&&wt.label<Vt[2]){wt.label=Vt[2],wt.ops.push(ht);break}Vt[2]&&wt.ops.pop(),wt.trys.pop();continue}ht=Ot.call(ft,wt)}catch(vt){ht=[6,vt],lt=0}finally{xt=Vt=0}if(ht[0]&5)throw ht[1];return{value:ht[0]?ht[1]:void 0,done:!0}}}var E=Object.create?function(ft,Ot,wt,xt){xt===void 0&&(xt=wt),Object.defineProperty(ft,xt,{enumerable:!0,get:function(){return Ot[wt]}})}:function(ft,Ot,wt,xt){xt===void 0&&(xt=wt),ft[xt]=Ot[wt]};function j(ft,Ot){for(var wt in ft)wt!=="default"&&!Object.prototype.hasOwnProperty.call(Ot,wt)&&E(Ot,ft,wt)}function y(ft){var Ot=typeof Symbol=="function"&&Symbol.iterator,wt=Ot&&ft[Ot],xt=0;if(wt)return wt.call(ft);if(ft&&typeof ft.length=="number")return{next:function(){return ft&&xt>=ft.length&&(ft=void 0),{value:ft&&ft[xt++],done:!ft}}};throw new TypeError(Ot?"Object is not iterable.":"Symbol.iterator is not defined.")}function n(ft,Ot){var wt=typeof Symbol=="function"&&ft[Symbol.iterator];if(!wt)return ft;var xt=wt.call(ft),lt,Vt=[],Lt;try{for(;(Ot===void 0||Ot-- >0)&&!(lt=xt.next()).done;)Vt.push(lt.value)}catch(Et){Lt={error:Et}}finally{try{lt&&!lt.done&&(wt=xt.return)&&wt.call(xt)}finally{if(Lt)throw Lt.error}}return Vt}function s(){for(var ft=[],Ot=0;Ot<arguments.length;Ot++)ft=ft.concat(n(arguments[Ot]));return ft}function d(){for(var ft=0,Ot=0,wt=arguments.length;Ot<wt;Ot++)ft+=arguments[Ot].length;for(var xt=Array(ft),lt=0,Ot=0;Ot<wt;Ot++)for(var Vt=arguments[Ot],Lt=0,Et=Vt.length;Lt<Et;Lt++,lt++)xt[lt]=Vt[Lt];return xt}function M(ft,Ot){for(var wt=0,xt=Ot.length,lt=ft.length;wt<xt;wt++,lt++)ft[lt]=Ot[wt];return ft}function S(ft){return this instanceof S?(this.v=ft,this):new S(ft)}function T(ft,Ot,wt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xt=wt.apply(ft,Ot||[]),lt,Vt=[];return lt={},Lt("next"),Lt("throw"),Lt("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function Lt(At){xt[At]&&(lt[At]=function(q){return new Promise(function(ct,ot){Vt.push([At,q,ct,ot])>1||Et(At,q)})})}function Et(At,q){try{J(xt[At](q))}catch(ct){bt(Vt[0][3],ct)}}function J(At){At.value instanceof S?Promise.resolve(At.value.v).then(ht,vt):bt(Vt[0][2],At)}function ht(At){Et("next",At)}function vt(At){Et("throw",At)}function bt(At,q){At(q),Vt.shift(),Vt.length&&Et(Vt[0][0],Vt[0][1])}}function v(ft){var Ot,wt;return Ot={},xt("next"),xt("throw",function(lt){throw lt}),xt("return"),Ot[Symbol.iterator]=function(){return this},Ot;function xt(lt,Vt){Ot[lt]=ft[lt]?function(Lt){return(wt=!wt)?{value:S(ft[lt](Lt)),done:lt==="return"}:Vt?Vt(Lt):Lt}:Vt}}function x(ft){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ot=ft[Symbol.asyncIterator],wt;return Ot?Ot.call(ft):(ft=typeof y=="function"?y(ft):ft[Symbol.iterator](),wt={},xt("next"),xt("throw"),xt("return"),wt[Symbol.asyncIterator]=function(){return this},wt);function xt(Vt){wt[Vt]=ft[Vt]&&function(Lt){return new Promise(function(Et,J){Lt=ft[Vt](Lt),lt(Et,J,Lt.done,Lt.value)})}}function lt(Vt,Lt,Et,J){Promise.resolve(J).then(function(ht){Vt({value:ht,done:Et})},Lt)}}function C(ft,Ot){return Object.defineProperty?Object.defineProperty(ft,"raw",{value:Ot}):ft.raw=Ot,ft}var N=Object.create?function(ft,Ot){Object.defineProperty(ft,"default",{enumerable:!0,value:Ot})}:function(ft,Ot){ft.default=Ot};function X(ft){if(ft&&ft.__esModule)return ft;var Ot={};if(ft!=null)for(var wt in ft)wt!=="default"&&Object.prototype.hasOwnProperty.call(ft,wt)&&E(Ot,ft,wt);return N(Ot,ft),Ot}function tt(ft){return ft&&ft.__esModule?ft:{default:ft}}function it(ft,Ot){if(!Ot.has(ft))throw new TypeError("attempted to get private field on non-instance");return Ot.get(ft)}function pt(ft,Ot,wt){if(!Ot.has(ft))throw new TypeError("attempted to set private field on non-instance");return Ot.set(ft,wt),wt}},mttH:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return j});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("w02o"),r=z("tKoa"),p=z("DyAw"),m=z("lFe4"),O=z("7cv3");function l(y){var n,s,d=y.chart,M=y.options,S=M.data,T=M.xAxis,v=M.yAxis,x=M.color,C=M.lineStyle,N=M.point,X=Object(m.a)(S);d.data(X);var tt=Object(A.b)({},y,{options:{xField:O.b,yField:O.c,line:{color:x,style:C},point:N}}),it=Object(A.b)({},tt,{options:{tooltip:!1}});return Object(r.d)(tt),Object(r.e)(it),d.axis(!1),d.legend(!1),Object(e.f)((n={},n[O.b]=T,n[O.c]=v,n),(s={},s[O.b]={type:"cat"},s[O.c]=Object(p.a)(X,O.c),s))(y),y}function E(y){return Object(A.e)(l,e.j,e.k,e.a,Object(e.b)())(y)}var j=function(y){Object(at.b)(n,y);function n(){var s=y!==null&&y.apply(this,arguments)||this;return s.type="tiny-line",s}return n.prototype.changeData=function(s){this.updateOption({data:s}),this.chart.changeData(Object(m.a)(s))},n.prototype.getDefaultOptions=function(){return{appendPadding:2,tooltip:Object(at.a)({},O.a),animation:!0}},n.prototype.getSchemaAdaptor=function(){return E},n}(a.a)},"n+fv":function(zn,Ut,z){"use strict";z.r(Ut),z.d(Ut,"create",function(){return a}),z.d(Ut,"clone",function(){return A}),z.d(Ut,"length",function(){return e}),z.d(Ut,"fromValues",function(){return r}),z.d(Ut,"copy",function(){return p}),z.d(Ut,"set",function(){return m}),z.d(Ut,"add",function(){return O}),z.d(Ut,"subtract",function(){return l}),z.d(Ut,"multiply",function(){return E}),z.d(Ut,"divide",function(){return j}),z.d(Ut,"ceil",function(){return y}),z.d(Ut,"floor",function(){return n}),z.d(Ut,"min",function(){return s}),z.d(Ut,"max",function(){return d}),z.d(Ut,"round",function(){return M}),z.d(Ut,"scale",function(){return S}),z.d(Ut,"scaleAndAdd",function(){return T}),z.d(Ut,"distance",function(){return v}),z.d(Ut,"squaredDistance",function(){return x}),z.d(Ut,"squaredLength",function(){return C}),z.d(Ut,"negate",function(){return N}),z.d(Ut,"inverse",function(){return X}),z.d(Ut,"normalize",function(){return tt}),z.d(Ut,"dot",function(){return it}),z.d(Ut,"cross",function(){return pt}),z.d(Ut,"lerp",function(){return ft}),z.d(Ut,"hermite",function(){return Ot}),z.d(Ut,"bezier",function(){return wt}),z.d(Ut,"random",function(){return xt}),z.d(Ut,"transformMat4",function(){return lt}),z.d(Ut,"transformMat3",function(){return Vt}),z.d(Ut,"transformQuat",function(){return Lt}),z.d(Ut,"rotateX",function(){return Et}),z.d(Ut,"rotateY",function(){return J}),z.d(Ut,"rotateZ",function(){return ht}),z.d(Ut,"angle",function(){return vt}),z.d(Ut,"zero",function(){return bt}),z.d(Ut,"str",function(){return At}),z.d(Ut,"exactEquals",function(){return q}),z.d(Ut,"equals",function(){return ct}),z.d(Ut,"sub",function(){return ot}),z.d(Ut,"mul",function(){return _}),z.d(Ut,"div",function(){return P}),z.d(Ut,"dist",function(){return Y}),z.d(Ut,"sqrDist",function(){return k}),z.d(Ut,"len",function(){return h}),z.d(Ut,"sqrLen",function(){return g}),z.d(Ut,"forEach",function(){return F});var at=z("yU0y");function a(){var V=new at.a(3);return at.a!=Float32Array&&(V[0]=0,V[1]=0,V[2]=0),V}function A(V){var H=new at.a(3);return H[0]=V[0],H[1]=V[1],H[2]=V[2],H}function e(V){var H=V[0],et=V[1],nt=V[2];return Math.hypot(H,et,nt)}function r(V,H,et){var nt=new at.a(3);return nt[0]=V,nt[1]=H,nt[2]=et,nt}function p(V,H){return V[0]=H[0],V[1]=H[1],V[2]=H[2],V}function m(V,H,et,nt){return V[0]=H,V[1]=et,V[2]=nt,V}function O(V,H,et){return V[0]=H[0]+et[0],V[1]=H[1]+et[1],V[2]=H[2]+et[2],V}function l(V,H,et){return V[0]=H[0]-et[0],V[1]=H[1]-et[1],V[2]=H[2]-et[2],V}function E(V,H,et){return V[0]=H[0]*et[0],V[1]=H[1]*et[1],V[2]=H[2]*et[2],V}function j(V,H,et){return V[0]=H[0]/et[0],V[1]=H[1]/et[1],V[2]=H[2]/et[2],V}function y(V,H){return V[0]=Math.ceil(H[0]),V[1]=Math.ceil(H[1]),V[2]=Math.ceil(H[2]),V}function n(V,H){return V[0]=Math.floor(H[0]),V[1]=Math.floor(H[1]),V[2]=Math.floor(H[2]),V}function s(V,H,et){return V[0]=Math.min(H[0],et[0]),V[1]=Math.min(H[1],et[1]),V[2]=Math.min(H[2],et[2]),V}function d(V,H,et){return V[0]=Math.max(H[0],et[0]),V[1]=Math.max(H[1],et[1]),V[2]=Math.max(H[2],et[2]),V}function M(V,H){return V[0]=Math.round(H[0]),V[1]=Math.round(H[1]),V[2]=Math.round(H[2]),V}function S(V,H,et){return V[0]=H[0]*et,V[1]=H[1]*et,V[2]=H[2]*et,V}function T(V,H,et,nt){return V[0]=H[0]+et[0]*nt,V[1]=H[1]+et[1]*nt,V[2]=H[2]+et[2]*nt,V}function v(V,H){var et=H[0]-V[0],nt=H[1]-V[1],St=H[2]-V[2];return Math.hypot(et,nt,St)}function x(V,H){var et=H[0]-V[0],nt=H[1]-V[1],St=H[2]-V[2];return et*et+nt*nt+St*St}function C(V){var H=V[0],et=V[1],nt=V[2];return H*H+et*et+nt*nt}function N(V,H){return V[0]=-H[0],V[1]=-H[1],V[2]=-H[2],V}function X(V,H){return V[0]=1/H[0],V[1]=1/H[1],V[2]=1/H[2],V}function tt(V,H){var et=H[0],nt=H[1],St=H[2],dt=et*et+nt*nt+St*St;return dt>0&&(dt=1/Math.sqrt(dt)),V[0]=H[0]*dt,V[1]=H[1]*dt,V[2]=H[2]*dt,V}function it(V,H){return V[0]*H[0]+V[1]*H[1]+V[2]*H[2]}function pt(V,H,et){var nt=H[0],St=H[1],dt=H[2],gt=et[0],yt=et[1],Ct=et[2];return V[0]=St*Ct-dt*yt,V[1]=dt*gt-nt*Ct,V[2]=nt*yt-St*gt,V}function ft(V,H,et,nt){var St=H[0],dt=H[1],gt=H[2];return V[0]=St+nt*(et[0]-St),V[1]=dt+nt*(et[1]-dt),V[2]=gt+nt*(et[2]-gt),V}function Ot(V,H,et,nt,St,dt){var gt=dt*dt,yt=gt*(2*dt-3)+1,Ct=gt*(dt-2)+dt,Pt=gt*(dt-1),Ft=gt*(3-2*dt);return V[0]=H[0]*yt+et[0]*Ct+nt[0]*Pt+St[0]*Ft,V[1]=H[1]*yt+et[1]*Ct+nt[1]*Pt+St[1]*Ft,V[2]=H[2]*yt+et[2]*Ct+nt[2]*Pt+St[2]*Ft,V}function wt(V,H,et,nt,St,dt){var gt=1-dt,yt=gt*gt,Ct=dt*dt,Pt=yt*gt,Ft=3*dt*yt,Tt=3*Ct*gt,zt=Ct*dt;return V[0]=H[0]*Pt+et[0]*Ft+nt[0]*Tt+St[0]*zt,V[1]=H[1]*Pt+et[1]*Ft+nt[1]*Tt+St[1]*zt,V[2]=H[2]*Pt+et[2]*Ft+nt[2]*Tt+St[2]*zt,V}function xt(V,H){H=H||1;var et=at.c()*2*Math.PI,nt=at.c()*2-1,St=Math.sqrt(1-nt*nt)*H;return V[0]=Math.cos(et)*St,V[1]=Math.sin(et)*St,V[2]=nt*H,V}function lt(V,H,et){var nt=H[0],St=H[1],dt=H[2],gt=et[3]*nt+et[7]*St+et[11]*dt+et[15];return gt=gt||1,V[0]=(et[0]*nt+et[4]*St+et[8]*dt+et[12])/gt,V[1]=(et[1]*nt+et[5]*St+et[9]*dt+et[13])/gt,V[2]=(et[2]*nt+et[6]*St+et[10]*dt+et[14])/gt,V}function Vt(V,H,et){var nt=H[0],St=H[1],dt=H[2];return V[0]=nt*et[0]+St*et[3]+dt*et[6],V[1]=nt*et[1]+St*et[4]+dt*et[7],V[2]=nt*et[2]+St*et[5]+dt*et[8],V}function Lt(V,H,et){var nt=et[0],St=et[1],dt=et[2],gt=et[3],yt=H[0],Ct=H[1],Pt=H[2],Ft=St*Pt-dt*Ct,Tt=dt*yt-nt*Pt,zt=nt*Ct-St*yt,Xt=St*zt-dt*Tt,re=dt*Ft-nt*zt,de=nt*Tt-St*Ft,ye=gt*2;return Ft*=ye,Tt*=ye,zt*=ye,Xt*=2,re*=2,de*=2,V[0]=yt+Ft+Xt,V[1]=Ct+Tt+re,V[2]=Pt+zt+de,V}function Et(V,H,et,nt){var St=[],dt=[];return St[0]=H[0]-et[0],St[1]=H[1]-et[1],St[2]=H[2]-et[2],dt[0]=St[0],dt[1]=St[1]*Math.cos(nt)-St[2]*Math.sin(nt),dt[2]=St[1]*Math.sin(nt)+St[2]*Math.cos(nt),V[0]=dt[0]+et[0],V[1]=dt[1]+et[1],V[2]=dt[2]+et[2],V}function J(V,H,et,nt){var St=[],dt=[];return St[0]=H[0]-et[0],St[1]=H[1]-et[1],St[2]=H[2]-et[2],dt[0]=St[2]*Math.sin(nt)+St[0]*Math.cos(nt),dt[1]=St[1],dt[2]=St[2]*Math.cos(nt)-St[0]*Math.sin(nt),V[0]=dt[0]+et[0],V[1]=dt[1]+et[1],V[2]=dt[2]+et[2],V}function ht(V,H,et,nt){var St=[],dt=[];return St[0]=H[0]-et[0],St[1]=H[1]-et[1],St[2]=H[2]-et[2],dt[0]=St[0]*Math.cos(nt)-St[1]*Math.sin(nt),dt[1]=St[0]*Math.sin(nt)+St[1]*Math.cos(nt),dt[2]=St[2],V[0]=dt[0]+et[0],V[1]=dt[1]+et[1],V[2]=dt[2]+et[2],V}function vt(V,H){var et=V[0],nt=V[1],St=V[2],dt=H[0],gt=H[1],yt=H[2],Ct=Math.sqrt(et*et+nt*nt+St*St),Pt=Math.sqrt(dt*dt+gt*gt+yt*yt),Ft=Ct*Pt,Tt=Ft&&it(V,H)/Ft;return Math.acos(Math.min(Math.max(Tt,-1),1))}function bt(V){return V[0]=0,V[1]=0,V[2]=0,V}function At(V){return"vec3("+V[0]+", "+V[1]+", "+V[2]+")"}function q(V,H){return V[0]===H[0]&&V[1]===H[1]&&V[2]===H[2]}function ct(V,H){var et=V[0],nt=V[1],St=V[2],dt=H[0],gt=H[1],yt=H[2];return Math.abs(et-dt)<=at.b*Math.max(1,Math.abs(et),Math.abs(dt))&&Math.abs(nt-gt)<=at.b*Math.max(1,Math.abs(nt),Math.abs(gt))&&Math.abs(St-yt)<=at.b*Math.max(1,Math.abs(St),Math.abs(yt))}var ot=l,_=E,P=j,Y=v,k=x,h=e,g=C,F=function(){var V=a();return function(H,et,nt,St,dt,gt){var yt,Ct;for(et||(et=3),nt||(nt=0),St?Ct=Math.min(St*et+nt,H.length):Ct=H.length,yt=nt;yt<Ct;yt+=et)V[0]=H[yt],V[1]=H[yt+1],V[2]=H[yt+2],dt(V,V,gt),H[yt]=V[0],H[yt+1]=V[1],H[yt+2]=V[2];return H}}()},"n/J0":function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return at}),z.d(Ut,"b",function(){return a});var at=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask"],a={GRADIENT:{CONTINUOUS:"#BAE7FF-#1890FF-#0050B3"}}},nCnq:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return r});var at=z("cyZq");function a(p){return Math.sqrt(p[0]*p[0]+p[1]*p[1])}function A(p,m){return a(p)*a(m)?(p[0]*m[0]+p[1]*m[1])/(a(p)*a(m)):1}function e(p,m){return(p[0]*m[1]<p[1]*m[0]?-1:1)*Math.acos(A(p,m))}function r(p,m){var O=m[1],l=m[2],E=Object(at.m)(Object(at.o)(m[3]),Math.PI*2),j=m[4],y=m[5],n=p[0],s=p[1],d=m[6],M=m[7],S=Math.cos(E)*(n-d)/2+Math.sin(E)*(s-M)/2,T=-1*Math.sin(E)*(n-d)/2+Math.cos(E)*(s-M)/2,v=S*S/(O*O)+T*T/(l*l);v>1&&(O*=Math.sqrt(v),l*=Math.sqrt(v));var x=O*O*(T*T)+l*l*(S*S),C=x?Math.sqrt((O*O*(l*l)-x)/x):1;j===y&&(C*=-1),isNaN(C)&&(C=0);var N=l?C*O*T/l:0,X=O?C*-l*S/O:0,tt=(n+d)/2+Math.cos(E)*N-Math.sin(E)*X,it=(s+M)/2+Math.sin(E)*N+Math.cos(E)*X,pt=[(S-N)/O,(T-X)/l],ft=[(-1*S-N)/O,(-1*T-X)/l],Ot=e([1,0],pt),wt=e(pt,ft);return A(pt,ft)<=-1&&(wt=Math.PI),A(pt,ft)>=1&&(wt=0),y===0&&wt>0&&(wt=wt-2*Math.PI),y===1&&wt<0&&(wt=wt+2*Math.PI),{cx:tt,cy:it,rx:Object(at.j)(p,[d,M])?0:O,ry:Object(at.j)(p,[d,M])?0:l,startAngle:Ot,endAngle:Ot+wt,xRotation:E,arcFlag:j,sweepFlag:y}}},nycV:function(zn,Ut,z){"use strict";z.d(Ut,"c",function(){return l}),z.d(Ut,"b",function(){return E}),z.d(Ut,"a",function(){return j});var at=z("mrSG"),a=z("R5nb"),A=Math.sin,e=Math.cos,r=Math.atan2,p=Math.PI;function m(y,n,s,d,M,S,T){var v=n.stroke,x=n.lineWidth,C=s-M,N=d-S,X=r(N,C),tt=new a.Path({type:"path",canvas:y.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*e(p/6)+","+10*A(p/6)+" L0,0 L"+10*e(p/6)+",-"+10*A(p/6),stroke:v,lineWidth:x}});tt.translate(M,S),tt.rotateAtPoint(M,S,X),y.set(T?"startArrowShape":"endArrowShape",tt)}function O(y,n,s,d,M,S,T){var v=n.startArrow,x=n.endArrow,C=n.stroke,N=n.lineWidth,X=T?v:x,tt=X.d,it=X.fill,pt=X.stroke,ft=X.lineWidth,Ot=Object(at.c)(X,["d","fill","stroke","lineWidth"]),wt=s-M,xt=d-S,lt=r(xt,wt);tt&&(M=M-e(lt)*tt,S=S-A(lt)*tt);var Vt=new a.Path({type:"path",canvas:y.get("canvas"),isArrowShape:!0,attrs:Object(at.a)(Object(at.a)({},Ot),{stroke:pt||C,lineWidth:ft||N,fill:it})});Vt.translate(M,S),Vt.rotateAtPoint(M,S,lt),y.set(T?"startArrowShape":"endArrowShape",Vt)}function l(y,n,s,d,M){var S=r(d-n,s-y);return{dx:e(S)*M,dy:A(S)*M}}function E(y,n,s,d,M,S){typeof n.startArrow=="object"?O(y,n,s,d,M,S,!0):n.startArrow?m(y,n,s,d,M,S,!0):y.set("startArrowShape",null)}function j(y,n,s,d,M,S){typeof n.endArrow=="object"?O(y,n,s,d,M,S,!1):n.endArrow?m(y,n,s,d,M,S,!1):y.set("startArrowShape",null)}},q4HE:function(zn,Ut){var z="\\ud800-\\udfff",at="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",A="\\u20d0-\\u20ff",e=at+a+A,r="\\ufe0e\\ufe0f",p="["+z+"]",m="["+e+"]",O="\\ud83c[\\udffb-\\udfff]",l="(?:"+m+"|"+O+")",E="[^"+z+"]",j="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",n="\\u200d",s=l+"?",d="["+r+"]?",M="(?:"+n+"(?:"+[E,j,y].join("|")+")"+d+s+")*",S=d+s+M,T="(?:"+[E+m+"?",m,j,y,p].join("|")+")",v=RegExp(O+"(?="+O+")|"+T+S,"g");function x(C){for(var N=v.lastIndex=0;v.test(C);)++N;return N}zn.exports=x},qaDU:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return e});var at=z("mrSG"),a=z("kXyF"),A=[1,0,0,0,1,0,0,0,1];function e(r,p){var m=p?Object(at.d)(p):Object(at.d)(A);return a.Util.transform(m,r)}},quyA:function(zn,Ut){var z="\\ud800-\\udfff",at="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",A="\\u20d0-\\u20ff",e=at+a+A,r="\\ufe0e\\ufe0f",p="\\u200d",m=RegExp("["+p+z+e+r+"]");function O(l){return m.test(l)}zn.exports=O},r0DC:function(zn,Ut,z){"use strict";z.d(Ut,"b",function(){return E}),z.d(Ut,"a",function(){return j});var at=z("cyZq"),a=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,A=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,e=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,r=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function p(y,n){var s=y.match(r);Object(at.c)(s,function(d){var M=d.split(":");n.addColorStop(M[0],M[1])})}function m(y,n,s){var d=a.exec(s),M=parseFloat(d[1])%360*(Math.PI/180),S=d[2],T=n.getBBox(),v,x;M>=0&&M<1/2*Math.PI?(v={x:T.minX,y:T.minY},x={x:T.maxX,y:T.maxY}):1/2*Math.PI<=M&&M<Math.PI?(v={x:T.maxX,y:T.minY},x={x:T.minX,y:T.maxY}):Math.PI<=M&&M<3/2*Math.PI?(v={x:T.maxX,y:T.maxY},x={x:T.minX,y:T.minY}):(v={x:T.minX,y:T.maxY},x={x:T.maxX,y:T.minY});var C=Math.tan(M),N=C*C,X=(x.x-v.x+C*(x.y-v.y))/(N+1)+v.x,tt=C*(x.x-v.x+C*(x.y-v.y))/(N+1)+v.y,it=y.createLinearGradient(v.x,v.y,X,tt);return p(S,it),it}function O(y,n,s){var d=A.exec(s),M=parseFloat(d[1]),S=parseFloat(d[2]),T=parseFloat(d[3]),v=d[4];if(T===0){var x=v.match(r);return x[x.length-1].split(":")[1]}var C=n.getBBox(),N=C.maxX-C.minX,X=C.maxY-C.minY,tt=Math.sqrt(N*N+X*X)/2,it=y.createRadialGradient(C.minX+N*M,C.minY+X*S,0,C.minX+N/2,C.minY+X/2,T*tt);return p(v,it),it}function l(y,n,s){if(n.get("patternSource")&&n.get("patternSource")===s)return n.get("pattern");var d,M,S=e.exec(s),T=S[1],v=S[2];function x(){d=y.createPattern(M,T),n.set("pattern",d),n.set("patternSource",s)}switch(T){case"a":T="repeat";break;case"x":T="repeat-x";break;case"y":T="repeat-y";break;case"n":T="no-repeat";break;default:T="no-repeat"}return M=new Image,v.match(/^data:/i)||(M.crossOrigin="Anonymous"),M.src=v,M.complete?x():(M.onload=x,M.src=M.src),d}function E(y,n,s){if(Object(at.k)(s)){if(s[1]==="("||s[2]==="("){if(s[0]==="l")return m(y,n,s);if(s[0]==="r")return O(y,n,s);if(s[0]==="p")return l(y,n,s)}return s}}function j(y){var n=0,s=0,d=0,M=0;return Object(at.g)(y)?y.length===1?n=s=d=M=y[0]:y.length===2?(n=d=y[0],s=M=y[1]):y.length===3?(n=y[0],s=M=y[1],d=y[2]):(n=y[0],s=y[1],d=y[2],M=y[3]):n=s=d=M=y,[n,s,d,M]}},rtSP:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return de});var at=z("mrSG"),a=z("zJSt"),A=z("w02o"),e=z("YuPD"),r=z("iTfj"),p=z("ODXe"),m=z("uFwe");function O(ye,we){var De=0;if(we===void 0){var Ve=Object(m.a)(ye),pn;try{for(Ve.s();!(pn=Ve.n()).done;){var sn=pn.value;(sn=+sn)&&(De+=sn)}}catch(Cn){Ve.e(Cn)}finally{Ve.f()}}else{var In=-1,An=Object(m.a)(ye),Rn;try{for(An.s();!(Rn=An.n()).done;){var Mn=Rn.value;(Mn=+we(Mn,++In,ye))&&(De+=Mn)}}catch(Cn){An.e(Cn)}finally{An.f()}}return De}function l(ye,we){var De;if(we===void 0){var Ve=Object(m.a)(ye),pn;try{for(Ve.s();!(pn=Ve.n()).done;){var sn=pn.value;sn!=null&&(De<sn||De===void 0&&sn>=sn)&&(De=sn)}}catch(Cn){Ve.e(Cn)}finally{Ve.f()}}else{var In=-1,An=Object(m.a)(ye),Rn;try{for(An.s();!(Rn=An.n()).done;){var Mn=Rn.value;(Mn=we(Mn,++In,ye))!=null&&(De<Mn||De===void 0&&Mn>=Mn)&&(De=Mn)}}catch(Cn){An.e(Cn)}finally{An.f()}}return De}function E(ye,we){var De;if(we===void 0){var Ve=Object(m.a)(ye),pn;try{for(Ve.s();!(pn=Ve.n()).done;){var sn=pn.value;sn!=null&&(De>sn||De===void 0&&sn>=sn)&&(De=sn)}}catch(Cn){Ve.e(Cn)}finally{Ve.f()}}else{var In=-1,An=Object(m.a)(ye),Rn;try{for(An.s();!(Rn=An.n()).done;){var Mn=Rn.value;(Mn=we(Mn,++In,ye))!=null&&(De>Mn||De===void 0&&Mn>=Mn)&&(De=Mn)}}catch(Cn){An.e(Cn)}finally{An.f()}}return De}function j(ye){return ye.target.depth}function y(ye){return ye.depth}function n(ye,we){return we-1-ye.height}function s(ye,we){return ye.sourceLinks.length?ye.depth:we-1}function d(ye){return ye.targetLinks.length?ye.depth:ye.sourceLinks.length?E(ye.sourceLinks,j)-1:0}function M(ye){return function(){return ye}}function S(ye,we){return v(ye.source,we.source)||ye.index-we.index}function T(ye,we){return v(ye.target,we.target)||ye.index-we.index}function v(ye,we){return ye.y0-we.y0}function x(ye){return ye.value}function C(ye){return ye.index}function N(ye){return ye.nodes}function X(ye){return ye.links}function tt(ye,we){var De=ye.get(we);if(!De)throw new Error("missing: "+we);return De}function it(ye){var we=ye.nodes,De=Object(m.a)(we),Ve;try{for(De.s();!(Ve=De.n()).done;){var pn=Ve.value,sn=pn.y0,In=sn,An=Object(m.a)(pn.sourceLinks),Rn;try{for(An.s();!(Rn=An.n()).done;){var Mn=Rn.value;Mn.y0=sn+Mn.width/2,sn+=Mn.width}}catch(tr){An.e(tr)}finally{An.f()}var Cn=Object(m.a)(pn.targetLinks),Gn;try{for(Cn.s();!(Gn=Cn.n()).done;){var Xn=Gn.value;Xn.y1=In+Xn.width/2,In+=Xn.width}}catch(tr){Cn.e(tr)}finally{Cn.f()}}}catch(tr){De.e(tr)}finally{De.f()}}function pt(){var ye=0,we=0,De=1,Ve=1,pn=24,sn=8,In,An=C,Rn=s,Mn,Cn,Gn=N,Xn=X,tr=6;function or(){var pr={nodes:Gn.apply(null,arguments),links:Xn.apply(null,arguments)};return nr(pr),er(pr),Sr(pr),Vr(pr),Fi(pr),it(pr),pr}or.update=function(pr){return it(pr),pr},or.nodeId=function(pr){return arguments.length?(An=typeof pr=="function"?pr:M(pr),or):An},or.nodeAlign=function(pr){return arguments.length?(Rn=typeof pr=="function"?pr:M(pr),or):Rn},or.nodeSort=function(pr){return arguments.length?(Mn=pr,or):Mn},or.nodeWidth=function(pr){return arguments.length?(pn=+pr,or):pn},or.nodePadding=function(pr){return arguments.length?(sn=In=+pr,or):sn},or.nodes=function(pr){return arguments.length?(Gn=typeof pr=="function"?pr:M(pr),or):Gn},or.links=function(pr){return arguments.length?(Xn=typeof pr=="function"?pr:M(pr),or):Xn},or.linkSort=function(pr){return arguments.length?(Cn=pr,or):Cn},or.size=function(pr){return arguments.length?(ye=we=0,De=+pr[0],Ve=+pr[1],or):[De-ye,Ve-we]},or.extent=function(pr){return arguments.length?(ye=+pr[0][0],De=+pr[1][0],we=+pr[0][1],Ve=+pr[1][1],or):[[ye,we],[De,Ve]]},or.iterations=function(pr){return arguments.length?(tr=+pr,or):tr};function nr(pr){var Xr=pr.nodes,Br=pr.links,Nr=Object(m.a)(Xr.entries()),Yr;try{for(Nr.s();!(Yr=Nr.n()).done;){var Kr=Yr.value,ni=Object(p.a)(Kr,2),fi=ni[0],$r=ni[1];$r.index=fi,$r.sourceLinks=[],$r.targetLinks=[]}}catch(uo){Nr.e(uo)}finally{Nr.f()}var ci=new Map(Xr.map(function(uo,xo){return[An(uo,xo,Xr),uo]})),Qr=Object(m.a)(Br.entries()),gi;try{for(Qr.s();!(gi=Qr.n()).done;){var Oi=gi.value,bi=Object(p.a)(Oi,2),_i=bi[0],Qi=bi[1];Qi.index=_i;var io=Qi.source,Wi=Qi.target;typeof io!="object"&&(io=Qi.source=tt(ci,io)),typeof Wi!="object"&&(Wi=Qi.target=tt(ci,Wi)),io.sourceLinks.push(Qi),Wi.targetLinks.push(Qi)}}catch(uo){Qr.e(uo)}finally{Qr.f()}if(Cn!=null){var Zi=Object(m.a)(Xr),Pi;try{for(Zi.s();!(Pi=Zi.n()).done;){var no=Pi.value,Mo=no.sourceLinks,ao=no.targetLinks;Mo.sort(Cn),ao.sort(Cn)}}catch(uo){Zi.e(uo)}finally{Zi.f()}}}function er(pr){var Xr=pr.nodes,Br=Object(m.a)(Xr),Nr;try{for(Br.s();!(Nr=Br.n()).done;){var Yr=Nr.value;Yr.value=Yr.fixedValue===void 0?Math.max(O(Yr.sourceLinks,x),O(Yr.targetLinks,x)):Yr.fixedValue}}catch(Kr){Br.e(Kr)}finally{Br.f()}}function Sr(pr){for(var Xr=pr.nodes,Br=Xr.length,Nr=new Set(Xr),Yr=new Set,Kr=0;Nr.size;){var ni=Object(m.a)(Nr),fi;try{for(ni.s();!(fi=ni.n()).done;){var $r=fi.value;$r.depth=Kr;var ci=Object(m.a)($r.sourceLinks),Qr;try{for(ci.s();!(Qr=ci.n()).done;){var gi=Qr.value,Oi=gi.target;Yr.add(Oi)}}catch(bi){ci.e(bi)}finally{ci.f()}}}catch(bi){ni.e(bi)}finally{ni.f()}if(++Kr>Br)throw new Error("circular link");Nr=Yr,Yr=new Set}}function Vr(pr){for(var Xr=pr.nodes,Br=Xr.length,Nr=new Set(Xr),Yr=new Set,Kr=0;Nr.size;){var ni=Object(m.a)(Nr),fi;try{for(ni.s();!(fi=ni.n()).done;){var $r=fi.value;$r.height=Kr;var ci=Object(m.a)($r.targetLinks),Qr;try{for(ci.s();!(Qr=ci.n()).done;){var gi=Qr.value,Oi=gi.source;Yr.add(Oi)}}catch(bi){ci.e(bi)}finally{ci.f()}}}catch(bi){ni.e(bi)}finally{ni.f()}if(++Kr>Br)throw new Error("circular link");Nr=Yr,Yr=new Set}}function ti(pr){var Xr=pr.nodes,Br=l(Xr,function(Oi){return Oi.depth})+1,Nr=(De-ye-pn)/(Br-1),Yr=new Array(Br),Kr=Object(m.a)(Xr),ni;try{for(Kr.s();!(ni=Kr.n()).done;){var fi=ni.value,$r=Math.max(0,Math.min(Br-1,Math.floor(Rn.call(null,fi,Br))));fi.layer=$r,fi.x0=ye+$r*Nr,fi.x1=fi.x0+pn,Yr[$r]?Yr[$r].push(fi):Yr[$r]=[fi]}}catch(Oi){Kr.e(Oi)}finally{Kr.f()}if(Mn){var ci=Object(m.a)(Yr),Qr;try{for(ci.s();!(Qr=ci.n()).done;){var gi=Qr.value;gi.sort(Mn)}}catch(Oi){ci.e(Oi)}finally{ci.f()}}return Yr}function hi(pr){var Xr=E(pr,function(_i){return(Ve-we-(_i.length-1)*In)/O(_i,x)}),Br=Object(m.a)(pr),Nr;try{for(Br.s();!(Nr=Br.n()).done;){var Yr=Nr.value,Kr=we,ni=Object(m.a)(Yr),fi;try{for(ni.s();!(fi=ni.n()).done;){var $r=fi.value;$r.y0=Kr,$r.y1=Kr+$r.value*Xr,Kr=$r.y1+In;var ci=Object(m.a)($r.sourceLinks),Qr;try{for(ci.s();!(Qr=ci.n()).done;){var gi=Qr.value;gi.width=gi.value*Xr}}catch(_i){ci.e(_i)}finally{ci.f()}}}catch(_i){ni.e(_i)}finally{ni.f()}Kr=(Ve-Kr+In)/(Yr.length+1);for(var Oi=0;Oi<Yr.length;++Oi){var bi=Yr[Oi];bi.y0+=Kr*(Oi+1),bi.y1+=Kr*(Oi+1)}ro(Yr)}}catch(_i){Br.e(_i)}finally{Br.f()}}function Fi(pr){var Xr=ti(pr);In=Math.min(sn,(Ve-we)/(l(Xr,function(Kr){return Kr.length})-1)),hi(Xr);for(var Br=0;Br<tr;++Br){var Nr=Math.pow(.99,Br),Yr=Math.max(1-Nr,(Br+1)/tr);si(Xr,Nr,Yr),to(Xr,Nr,Yr)}}function to(pr,Xr,Br){for(var Nr=1,Yr=pr.length;Nr<Yr;++Nr){var Kr=pr[Nr],ni=Object(m.a)(Kr),fi;try{for(ni.s();!(fi=ni.n()).done;){var $r=fi.value,ci=0,Qr=0,gi=Object(m.a)($r.targetLinks),Oi;try{for(gi.s();!(Oi=gi.n()).done;){var bi=Oi.value,_i=bi.source,Qi=bi.value,io=Qi*($r.layer-_i.layer);ci+=jr(_i,$r)*io,Qr+=io}}catch(Zi){gi.e(Zi)}finally{gi.f()}if(Qr>0){var Wi=(ci/Qr-$r.y0)*Xr;$r.y0+=Wi,$r.y1+=Wi,Vi($r)}}}catch(Zi){ni.e(Zi)}finally{ni.f()}Mn===void 0&&Kr.sort(v),Ti(Kr,Br)}}function si(pr,Xr,Br){for(var Nr=pr.length,Yr=Nr-2;Yr>=0;--Yr){var Kr=pr[Yr],ni=Object(m.a)(Kr),fi;try{for(ni.s();!(fi=ni.n()).done;){var $r=fi.value,ci=0,Qr=0,gi=Object(m.a)($r.sourceLinks),Oi;try{for(gi.s();!(Oi=gi.n()).done;){var bi=Oi.value,_i=bi.target,Qi=bi.value,io=Qi*(_i.layer-$r.layer);ci+=Ji($r,_i)*io,Qr+=io}}catch(Zi){gi.e(Zi)}finally{gi.f()}if(Qr>0){var Wi=(ci/Qr-$r.y0)*Xr;$r.y0+=Wi,$r.y1+=Wi,Vi($r)}}}catch(Zi){ni.e(Zi)}finally{ni.f()}Mn===void 0&&Kr.sort(v),Ti(Kr,Br)}}function Ti(pr,Xr){var Br=pr.length>>1,Nr=pr[Br];Li(pr,Nr.y0-In,Br-1,Xr),Ui(pr,Nr.y1+In,Br+1,Xr),Li(pr,Ve,pr.length-1,Xr),Ui(pr,we,0,Xr)}function Ui(pr,Xr,Br,Nr){for(;Br<pr.length;++Br){var Yr=pr[Br],Kr=(Xr-Yr.y0)*Nr;Kr>1e-6&&(Yr.y0+=Kr,Yr.y1+=Kr),Xr=Yr.y1+In}}function Li(pr,Xr,Br,Nr){for(;Br>=0;--Br){var Yr=pr[Br],Kr=(Yr.y1-Xr)*Nr;Kr>1e-6&&(Yr.y0-=Kr,Yr.y1-=Kr),Xr=Yr.y0-In}}function Vi(pr){var Xr=pr.sourceLinks,Br=pr.targetLinks;if(Cn===void 0){var Nr=Object(m.a)(Br),Yr;try{for(Nr.s();!(Yr=Nr.n()).done;){var Kr=Yr.value,ni=Kr.source.sourceLinks;ni.sort(T)}}catch(gi){Nr.e(gi)}finally{Nr.f()}var fi=Object(m.a)(Xr),$r;try{for(fi.s();!($r=fi.n()).done;){var ci=$r.value,Qr=ci.target.targetLinks;Qr.sort(S)}}catch(gi){fi.e(gi)}finally{fi.f()}}}function ro(pr){if(Cn===void 0){var Xr=Object(m.a)(pr),Br;try{for(Xr.s();!(Br=Xr.n()).done;){var Nr=Br.value,Yr=Nr.sourceLinks,Kr=Nr.targetLinks;Yr.sort(T),Kr.sort(S)}}catch(ni){Xr.e(ni)}finally{Xr.f()}}}function jr(pr,Xr){var Br=pr.y0-(pr.sourceLinks.length-1)*In/2,Nr=Object(m.a)(pr.sourceLinks),Yr;try{for(Nr.s();!(Yr=Nr.n()).done;){var Kr=Yr.value,ni=Kr.target,fi=Kr.width;if(ni===Xr)break;Br+=fi+In}}catch(bi){Nr.e(bi)}finally{Nr.f()}var $r=Object(m.a)(Xr.targetLinks),ci;try{for($r.s();!(ci=$r.n()).done;){var Qr=ci.value,gi=Qr.source,Oi=Qr.width;if(gi===pr)break;Br-=Oi}}catch(bi){$r.e(bi)}finally{$r.f()}return Br}function Ji(pr,Xr){var Br=Xr.y0-(Xr.targetLinks.length-1)*In/2,Nr=Object(m.a)(Xr.targetLinks),Yr;try{for(Nr.s();!(Yr=Nr.n()).done;){var Kr=Yr.value,ni=Kr.source,fi=Kr.width;if(ni===pr)break;Br+=fi+In}}catch(bi){Nr.e(bi)}finally{Nr.f()}var $r=Object(m.a)(pr.sourceLinks),ci;try{for($r.s();!(ci=$r.n()).done;){var Qr=ci.value,gi=Qr.target,Oi=Qr.width;if(gi===Xr)break;Br-=Oi}}catch(bi){$r.e(bi)}finally{$r.f()}return Br}return or}var ft=Math.PI,Ot=2*ft,wt=1e-6,xt=Ot-wt;function lt(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Vt(){return new lt}lt.prototype=Vt.prototype={constructor:lt,moveTo:function(we,De){this._+="M"+(this._x0=this._x1=+we)+","+(this._y0=this._y1=+De)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(we,De){this._+="L"+(this._x1=+we)+","+(this._y1=+De)},quadraticCurveTo:function(we,De,Ve,pn){this._+="Q"+ +we+","+ +De+","+(this._x1=+Ve)+","+(this._y1=+pn)},bezierCurveTo:function(we,De,Ve,pn,sn,In){this._+="C"+ +we+","+ +De+","+ +Ve+","+ +pn+","+(this._x1=+sn)+","+(this._y1=+In)},arcTo:function(we,De,Ve,pn,sn){we=+we,De=+De,Ve=+Ve,pn=+pn,sn=+sn;var In=this._x1,An=this._y1,Rn=Ve-we,Mn=pn-De,Cn=In-we,Gn=An-De,Xn=Cn*Cn+Gn*Gn;if(sn<0)throw new Error("negative radius: "+sn);if(this._x1===null)this._+="M"+(this._x1=we)+","+(this._y1=De);else if(Xn>wt)if(!(Math.abs(Gn*Rn-Mn*Cn)>wt)||!sn)this._+="L"+(this._x1=we)+","+(this._y1=De);else{var tr=Ve-In,or=pn-An,nr=Rn*Rn+Mn*Mn,er=tr*tr+or*or,Sr=Math.sqrt(nr),Vr=Math.sqrt(Xn),ti=sn*Math.tan((ft-Math.acos((nr+Xn-er)/(2*Sr*Vr)))/2),hi=ti/Vr,Fi=ti/Sr;Math.abs(hi-1)>wt&&(this._+="L"+(we+hi*Cn)+","+(De+hi*Gn)),this._+="A"+sn+","+sn+",0,0,"+ +(Gn*tr>Cn*or)+","+(this._x1=we+Fi*Rn)+","+(this._y1=De+Fi*Mn)}},arc:function(we,De,Ve,pn,sn,In){we=+we,De=+De,Ve=+Ve,In=!!In;var An=Ve*Math.cos(pn),Rn=Ve*Math.sin(pn),Mn=we+An,Cn=De+Rn,Gn=1^In,Xn=In?pn-sn:sn-pn;if(Ve<0)throw new Error("negative radius: "+Ve);this._x1===null?this._+="M"+Mn+","+Cn:(Math.abs(this._x1-Mn)>wt||Math.abs(this._y1-Cn)>wt)&&(this._+="L"+Mn+","+Cn),!!Ve&&(Xn<0&&(Xn=Xn%Ot+Ot),Xn>xt?this._+="A"+Ve+","+Ve+",0,1,"+Gn+","+(we-An)+","+(De-Rn)+"A"+Ve+","+Ve+",0,1,"+Gn+","+(this._x1=Mn)+","+(this._y1=Cn):Xn>wt&&(this._+="A"+Ve+","+Ve+",0,"+ +(Xn>=ft)+","+Gn+","+(this._x1=we+Ve*Math.cos(sn))+","+(this._y1=De+Ve*Math.sin(sn))))},rect:function(we,De,Ve,pn){this._+="M"+(this._x0=this._x1=+we)+","+(this._y0=this._y1=+De)+"h"+ +Ve+"v"+ +pn+"h"+-Ve+"Z"},toString:function(){return this._}};var Lt=Vt,Et=Array.prototype.slice,J=function(ye){return function(){return ye}};function ht(ye){return ye[0]}function vt(ye){return ye[1]}var bt=function(ye,we){return[(we=+we)*Math.cos(ye-=Math.PI/2),we*Math.sin(ye)]};function At(ye){return ye.source}function q(ye){return ye.target}function ct(ye){var we=At,De=q,Ve=ht,pn=vt,sn=null;function In(){var An,Rn=Et.call(arguments),Mn=we.apply(this,Rn),Cn=De.apply(this,Rn);if(sn||(sn=An=Lt()),ye(sn,+Ve.apply(this,(Rn[0]=Mn,Rn)),+pn.apply(this,Rn),+Ve.apply(this,(Rn[0]=Cn,Rn)),+pn.apply(this,Rn)),An)return sn=null,An+""||null}return In.source=function(An){return arguments.length?(we=An,In):we},In.target=function(An){return arguments.length?(De=An,In):De},In.x=function(An){return arguments.length?(Ve=typeof An=="function"?An:J(+An),In):Ve},In.y=function(An){return arguments.length?(pn=typeof An=="function"?An:J(+An),In):pn},In.context=function(An){return arguments.length?(sn=An==null?null:An,In):sn},In}function ot(ye,we,De,Ve,pn){ye.moveTo(we,De),ye.bezierCurveTo(we=(we+Ve)/2,De,we,pn,Ve,pn)}function _(ye,we,De,Ve,pn){ye.moveTo(we,De),ye.bezierCurveTo(we,De=(De+pn)/2,Ve,De,Ve,pn)}function P(ye,we,De,Ve,pn){var sn=bt(we,De),In=bt(we,De=(De+pn)/2),An=bt(Ve,De),Rn=bt(Ve,pn);ye.moveTo(sn[0],sn[1]),ye.bezierCurveTo(In[0],In[1],An[0],An[1],Rn[0],Rn[1])}function Y(){return ct(ot)}function k(){return ct(_)}function h(){var ye=ct(P);return ye.angle=ye.x,delete ye.x,ye.radius=ye.y,delete ye.y,ye}function g(ye){return[ye.source.x1,ye.y0]}function F(ye){return[ye.target.x0,ye.y1]}var V=function(){return Y().source(g).target(F)},H={left:y,right:n,center:d,justify:s},et={nodeId:function(we){return we.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function nt(ye){var we=Object(r.isString)(ye)?H[ye]:Object(r.isFunction)(ye)?ye:null;return we||s}function St(ye){return Object(r.assign)({},et,ye)}function dt(ye,we){var De=St(ye),Ve=De.nodeId,pn=De.nodeSort,sn=De.nodeAlign,In=De.nodeWidth,An=De.nodePadding,Rn=pt().nodeSort(pn).links(function(Cn){return Cn.links}).nodeWidth(In).nodePadding(An).nodeAlign(nt(sn)).extent([[0,0],[1,1]]).nodeId(Ve),Mn=Rn(we);return Mn.nodes.forEach(function(Cn){var Gn=Cn.x0,Xn=Cn.x1,tr=Cn.y0,or=Cn.y1;Cn.x=[Gn,Xn,Xn,Gn],Cn.y=[tr,tr,or,or]}),Mn.links.forEach(function(Cn){var Gn=Cn.source,Xn=Cn.target,tr=Gn.x1,or=Xn.x0;Cn.x=[tr,tr,or,or];var nr=Cn.width/2;Cn.y=[Cn.y0+nr,Cn.y0-nr,Cn.y1+nr,Cn.y1-nr]}),Mn}var gt=z("tKoa"),yt=z("DyAw"),Ct="x",Pt="y",Ft="name";function Tt(ye,we,De){return Object(r.size)(we)===0?!1:we.includes(De)?!0:we.some(function(Ve){return Tt(ye,ye.get(Ve),De)})}function zt(ye,we,De){var Ve=[],pn=[],sn=new Map;return Object(r.each)(ye,function(In){var An=In[we],Rn=In[De];Tt(sn,[An],Rn)?pn.push(In):(Ve.push(In),sn.has(Rn)||sn.set(Rn,[]),sn.get(Rn).push(An))}),pn.length!==0&&console.warn("sankey data contains circle, "+pn.length+" records removed.",pn),Ve}function Xt(ye){var we=ye.chart,De=ye.options,Ve=De.data,pn=De.sourceField,sn=De.targetField,In=De.weightField,An=De.color,Rn=De.nodeStyle,Mn=De.edgeStyle,Cn=De.label,Gn=De.tooltip,Xn=De.nodeAlign,tr=De.nodePaddingRatio,or=De.nodeWidthRatio,nr=De.nodeSort;we.legend(!1),we.tooltip(Gn),we.axis(!1);var er=Object(yt.b)(zt(Ve,pn,sn),pn,sn,In),Sr=dt({nodeAlign:Xn,nodePadding:tr,nodeWidth:or,nodeSort:nr},er),Vr=Sr.nodes,ti=Sr.links,hi=Vr.map(function(Ti){return{x:Ti.x,y:Ti.y,name:Ti.name}}),Fi=ti.map(function(Ti){return{source:Ti.source.name,target:Ti.target.name,name:Ti.source.name||Ti.target.name,x:Ti.x,y:Ti.y,value:Ti.value}}),to=we.createView();to.data(hi),Object(gt.f)({chart:to,options:{xField:Ct,yField:Pt,seriesField:Ft,polygon:{color:An,style:Rn},label:Cn,tooltip:!1}});var si=we.createView();return si.data(Fi),Object(gt.b)({chart:si,options:{xField:Ct,yField:Pt,seriesField:Ft,edge:{color:An,style:Mn,shape:"arc"},tooltip:Gn,state:{active:{style:{opacity:.8,lineWidth:0}}}}}),we.interaction("element-active"),we.scale({x:{sync:!0,nice:!0},y:{sync:!0,nice:!0},name:{sync:"color"}}),ye}function re(ye){return Object(e.e)(Xt,A.c,A.a,A.j)(ye)}var de=function(ye){Object(at.b)(we,ye);function we(){var De=ye!==null&&ye.apply(this,arguments)||this;return De.type="sankey",De}return we.prototype.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},label:{fields:["x","name"],callback:function(Ve,pn){var sn=Ve[1]===1;return{style:{fill:"#545454",textAlign:sn?"end":"start"},offsetX:sn?-8:8,content:pn}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value"],formatter:function(Ve){var pn=Ve.source,sn=Ve.target,In=Ve.value;return{name:pn+" -> "+sn,value:In}}},nodeWidthRatio:.008,nodePaddingRatio:.01}},we.prototype.getSchemaAdaptor=function(){return re},we}(a.a)},sKgW:function(zn,Ut){var z=9007199254740991,at=Math.floor;function a(A,e){var r="";if(!A||e<1||e>z)return r;do e%2&&(r+=A),e=at(e/2),e&&(A+=A);while(e);return r}zn.exports=a},sYIZ:function(zn,Ut,z){"use strict";var at=z("mrSG"),a=z("aFU3");function A(n,s){if(s){var d=Object(a.invert)(s);return Object(a.multiplyVec2)(d,n)}return n}function e(n,s,d){var M=n.getTotalMatrix();if(M){var S=A([s,d,1],M),T=S[0],v=S[1];return[T,v]}return[s,d]}function r(n,s,d){if(n.isCanvas&&n.isCanvas())return!0;if(!Object(a.isAllowCapture)(n)||n.cfg.isInView===!1)return!1;if(n.cfg.clipShape){var M=e(n,s,d),S=M[0],T=M[1];if(n.isClipped(S,T))return!1}var v=n.cfg.cacheCanvasBBox||n.getCanvasBBox();return s>=v.minX&&s<=v.maxX&&d>=v.minY&&d<=v.maxY}function p(n,s,d){if(!r(n,s,d))return null;for(var M=null,S=n.getChildren(),T=S.length,v=T-1;v>=0;v--){var x=S[v];if(x.isGroup())M=p(x,s,d);else if(r(x,s,d)){var C=x,N=e(x,s,d),X=N[0],tt=N[1];C.isInShape(X,tt)&&(M=x)}if(M)break}return M}var m=z("R5nb"),O=z("wq2r"),l=z("cyZq"),E=z("9eUa"),j=function(n){Object(at.b)(s,n);function s(){return n!==null&&n.apply(this,arguments)||this}return s.prototype.getDefaultCfg=function(){var d=n.prototype.getDefaultCfg.call(this);return d.renderer="canvas",d.autoDraw=!0,d.localRefresh=!0,d.refreshElements=[],d.clipView=!0,d.quickHit=!1,d},s.prototype.onCanvasChange=function(d){(d==="attr"||d==="sort"||d==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},s.prototype.getShapeBase=function(){return m},s.prototype.getGroupBase=function(){return O.a},s.prototype.getPixelRatio=function(){var d=this.get("pixelRatio")||Object(l.d)();return d>=1?Math.ceil(d):1},s.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},s.prototype.createDom=function(){var d=document.createElement("canvas"),M=d.getContext("2d");return this.set("context",M),d},s.prototype.setDOMSize=function(d,M){n.prototype.setDOMSize.call(this,d,M);var S=this.get("context"),T=this.get("el"),v=this.getPixelRatio();T.width=v*d,T.height=v*M,v>1&&S.scale(v,v)},s.prototype.clear=function(){n.prototype.clear.call(this),this._clearFrame();var d=this.get("context"),M=this.get("el");d.clearRect(0,0,M.width,M.height)},s.prototype.getShape=function(d,M){var S;return this.get("quickHit")?S=p(this,d,M):S=n.prototype.getShape.call(this,d,M,null),S},s.prototype._getRefreshRegion=function(){var d=this.get("refreshElements"),M=this.getViewRange(),S;if(d.length&&d[0]===this)S=M;else if(S=Object(E.f)(d),S){S.minX=Math.floor(S.minX),S.minY=Math.floor(S.minY),S.maxX=Math.ceil(S.maxX),S.maxY=Math.ceil(S.maxY),S.maxY+=1;var T=this.get("clipView");T&&(S=Object(E.g)(S,M))}return S},s.prototype.refreshElement=function(d){var M=this.get("refreshElements");M.push(d)},s.prototype._clearFrame=function(){var d=this.get("drawFrame");d&&(Object(l.a)(d),this.set("drawFrame",null),this.set("refreshElements",[]))},s.prototype.draw=function(){var d=this.get("drawFrame");this.get("autoDraw")&&d||this._startDraw()},s.prototype._drawAll=function(){var d=this.get("context"),M=this.get("el"),S=this.getChildren();d.clearRect(0,0,M.width,M.height),Object(E.a)(d,this),Object(E.d)(d,S),this.set("refreshElements",[])},s.prototype._drawRegion=function(){var d=this.get("context"),M=this.get("refreshElements"),S=this.getChildren(),T=this._getRefreshRegion();T?(d.clearRect(T.minX,T.minY,T.maxX-T.minX,T.maxY-T.minY),d.save(),d.beginPath(),d.rect(T.minX,T.minY,T.maxX-T.minX,T.maxY-T.minY),d.clip(),Object(E.a)(d,this),Object(E.b)(this,S,T),Object(E.d)(d,S,T),d.restore()):M.length&&Object(E.c)(M),Object(l.c)(M,function(v){v.get("hasChanged")&&v.set("hasChanged",!1)}),this.set("refreshElements",[])},s.prototype._startDraw=function(){var d=this,M=this.get("drawFrame");M||(M=Object(l.n)(function(){d.get("localRefresh")?d._drawRegion():d._drawAll(),d.set("drawFrame",null)}),this.set("drawFrame",M))},s.prototype.skipDraw=function(){},s}(a.AbstractCanvas),y=Ut.a=j},sqD9:function(zn,Ut,z){"use strict";z.d(Ut,"b",function(){return e}),z.d(Ut,"a",function(){return r});var at=z("mrSG"),a=z("iTfj"),A=z("F/eT");function e(p,m,O,l){var E=Object(a.reduce)(p,function(j,y){var n=y[O],s=j.has(n)?j.get(n):0,d=y[m];return s=Object(A.a)(d)?s+d:s,j.set(n,s),j},new Map);return Object(a.map)(p,function(j){var y,n=j[m],s=j[O],d=Object(A.a)(n)?n/E.get(s):0;return Object(at.a)(Object(at.a)({},j),(y={},y[l]=d,y))})}function r(p,m,O,l,E){return E?e(p,m,O,l):p}},sstZ:function(zn,Ut,z){"use strict";z.d(Ut,"j",function(){return a}),z.d(Ut,"c",function(){return A}),z.d(Ut,"g",function(){return e}),z.d(Ut,"b",function(){return r});var at=z("iTfj");z.d(Ut,"e",function(){return at.isNil}),z.d(Ut,"d",function(){return at.isFunction}),z.d(Ut,"h",function(){return at.isString}),z.d(Ut,"f",function(){return at.isObject}),z.d(Ut,"i",function(){return at.mix}),z.d(Ut,"a",function(){return at.each}),z.d(Ut,"k",function(){return at.upperFirst});function a(p,m){var O=p.indexOf(m);O!==-1&&p.splice(O,1)}var A=typeof window!="undefined"&&typeof window.document!="undefined";function e(p,m){if(p.isCanvas())return!0;for(var O=m.getParent(),l=!1;O;){if(O===p){l=!0;break}O=O.getParent()}return l}function r(p){return p.cfg.visible&&p.cfg.capture}},tE4n:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return k});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("iTfj"),r=z("tKoa"),p=z("w02o"),m=z("ODXe");function O(h,g,F,V){h=h.filter(function(Tt){var zt=g(Tt),Xt=F(Tt);return zt!=null&&isFinite(zt)&&Xt!=null&&isFinite(Xt)}),V&&h.sort(function(Tt,zt){return g(Tt)-g(zt)});for(var H=h.length,et=new Float64Array(H),nt=new Float64Array(H),St=0,dt=0,gt,yt,Ct,Pt=0;Pt<H;)Ct=h[Pt],et[Pt]=gt=+g(Ct),nt[Pt]=yt=+F(Ct),++Pt,St+=(gt-St)/Pt,dt+=(yt-dt)/Pt;for(var Ft=0;Ft<H;++Ft)et[Ft]-=St,nt[Ft]-=dt;return[et,nt,St,dt]}function l(h,g,F,V){for(var H=0,et=0,nt=h.length;et<nt;et++){var St=h[et],dt=+g(St),gt=+F(St);dt!=null&&isFinite(dt)&&gt!=null&&isFinite(gt)&&V(dt,gt,H++)}}function E(h,g,F,V,H){var et=0,nt=0;return l(h,g,F,function(St,dt){var gt=dt-H(St),yt=dt-V;et+=gt*gt,nt+=yt*yt}),1-et/nt}function j(h){return Math.atan2(h[1][1]-h[0][1],h[1][0]-h[0][0])*180/Math.PI}function y(h){return[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2]}function n(h,g,F){for(var V=Math.log(g-h)*Math.LOG10E+1|0,H=1*Math.pow(10,-V/2-1),et=1e4,nt=[dt(h),dt(g)],St=0;gt(nt)&&St<et;);return nt;function dt(yt){return[yt,F(yt)]}function gt(yt){St++;for(var Ct=yt.length,Pt=!1,Ft=0;Ft<Ct-1;Ft++){var Tt=yt[Ft],zt=yt[Ft+1],Xt=y([Tt,zt]),re=dt(Xt[0]),de=j([Tt,Xt]),ye=j([Tt,re]),we=Math.abs(de-ye);we>H&&(yt.splice(Ft+1,0,re),Pt=!0)}return Pt}}function s(h,g,F,V){var H=V-h*h,et=Math.abs(H)<1e-24?0:(F-h*g)/H,nt=g-et*h;return[nt,et]}var d=function(){var h=function(et){return et[0]},g=function(et){return et[1]},F;function V(H){var et=0,nt=0,St=0,dt=0,gt=0,yt=0,Ct=F?+F[0]:Infinity,Pt=F?+F[1]:-Infinity;l(H,h,g,function(ye,we){var De=Math.log(we),Ve=ye*we;++et,nt+=(we-nt)/et,dt+=(Ve-dt)/et,yt+=(ye*Ve-yt)/et,St+=(we*De-St)/et,gt+=(Ve*De-gt)/et,F||(ye<Ct&&(Ct=ye),ye>Pt&&(Pt=ye))});var Ft=s(dt/nt,St/nt,gt/nt,yt/nt),Tt=Object(m.a)(Ft,2),zt=Tt[0],Xt=Tt[1];zt=Math.exp(zt);var re=function(we){return zt*Math.exp(Xt*we)},de=n(Ct,Pt,re);return de.a=zt,de.b=Xt,de.predict=re,de.rSquared=E(H,h,g,nt,re),de}return V.domain=function(H){return arguments.length?(F=H,V):F},V.x=function(H){return arguments.length?(h=H,V):h},V.y=function(H){return arguments.length?(g=H,V):g},V},M=function(){var h=function(et){return et[0]},g=function(et){return et[1]},F;function V(H){var et=0,nt=0,St=0,dt=0,gt=0,yt=F?+F[0]:Infinity,Ct=F?+F[1]:-Infinity;l(H,h,g,function(de,ye){++et,nt+=(de-nt)/et,St+=(ye-St)/et,dt+=(de*ye-dt)/et,gt+=(de*de-gt)/et,F||(de<yt&&(yt=de),de>Ct&&(Ct=de))});var Pt=s(nt,St,dt,gt),Ft=Object(m.a)(Pt,2),Tt=Ft[0],zt=Ft[1],Xt=function(ye){return zt*ye+Tt},re=[[yt,Xt(yt)],[Ct,Xt(Ct)]];return re.a=zt,re.b=Tt,re.predict=Xt,re.rSquared=E(H,h,g,St,Xt),re}return V.domain=function(H){return arguments.length?(F=H,V):F},V.x=function(H){return arguments.length?(h=H,V):h},V.y=function(H){return arguments.length?(g=H,V):g},V};function S(h){h.sort(function(F,V){return F-V});var g=h.length/2;return g%1==0?(h[g-1]+h[g])/2:h[Math.floor(g)]}var T=2,v=1e-12,x=function(){var h=function(et){return et[0]},g=function(et){return et[1]},F=.3;function V(H){for(var et=O(H,h,g,!0),nt=Object(m.a)(et,4),St=nt[0],dt=nt[1],gt=nt[2],yt=nt[3],Ct=St.length,Pt=Math.max(2,~~(F*Ct)),Ft=new Float64Array(Ct),Tt=new Float64Array(Ct),zt=new Float64Array(Ct).fill(1),Xt=-1;++Xt<=T;){for(var re=[0,Pt-1],de=0;de<Ct;++de){for(var ye=St[de],we=re[0],De=re[1],Ve=ye-St[we]>St[De]-ye?we:De,pn=0,sn=0,In=0,An=0,Rn=0,Mn=1/Math.abs(St[Ve]-ye||1),Cn=we;Cn<=De;++Cn){var Gn=St[Cn],Xn=dt[Cn],tr=C(Math.abs(ye-Gn)*Mn)*zt[Cn],or=Gn*tr;pn+=tr,sn+=or,In+=Xn*tr,An+=Xn*or,Rn+=Gn*or}var nr=s(sn/pn,In/pn,An/pn,Rn/pn),er=Object(m.a)(nr,2),Sr=er[0],Vr=er[1];Ft[de]=Sr+Vr*ye,Tt[de]=Math.abs(dt[de]-Ft[de]),N(St,de+1,re)}if(Xt===T)break;var ti=S(Tt);if(Math.abs(ti)<v)break;for(var hi=0,Fi,to;hi<Ct;++hi)Fi=Tt[hi]/(6*ti),zt[hi]=Fi>=1?v:(to=1-Fi*Fi)*to}return X(St,Ft,gt,yt)}return V.bandwidth=function(H){return arguments.length?(F=H,V):F},V.x=function(H){return arguments.length?(h=H,V):h},V.y=function(H){return arguments.length?(g=H,V):g},V};function C(h){return(h=1-h*h*h)*h*h}function N(h,g,F){var V=h[g],H=F[0],et=F[1]+1;if(!(et>=h.length))for(;g>H&&h[et]-V<=V-h[H];)F[0]=++H,F[1]=et,++et}function X(h,g,F,V){for(var H=h.length,et=[],nt=0,St=0,dt=[],gt;nt<H;++nt)gt=h[nt]+F,dt[0]===gt?dt[1]+=(g[nt]-dt[1])/++St:(St=0,dt[1]+=V,dt=[gt,g[nt]],et.push(dt));return dt[1]+=V,et}var tt=function(){var h=function(et){return et[0]},g=function(et){return et[1]},F;function V(H){var et=0,nt=0,St=0,dt=0,gt=0,yt=F?+F[0]:Infinity,Ct=F?+F[1]:-Infinity;l(H,h,g,function(de,ye){var we=Math.log(de);++et,nt+=(we-nt)/et,St+=(ye-St)/et,dt+=(we*ye-dt)/et,gt+=(we*we-gt)/et,F||(de<yt&&(yt=de),de>Ct&&(Ct=de))});var Pt=s(nt,St,dt,gt),Ft=Object(m.a)(Pt,2),Tt=Ft[0],zt=Ft[1],Xt=function(ye){return zt*Math.log(ye)+Tt},re=n(yt,Ct,Xt);return re.a=zt,re.b=Tt,re.predict=Xt,re.rSquared=E(H,h,g,St,Xt),re}return V.domain=function(H){return arguments.length?(F=H,V):F},V.x=function(H){return arguments.length?(h=H,V):h},V.y=function(H){return arguments.length?(g=H,V):g},V},it=function(){var h=function(et){return et[0]},g=function(et){return et[1]},F;function V(H){var et=O(H,h,g),nt=Object(m.a)(et,4),St=nt[0],dt=nt[1],gt=nt[2],yt=nt[3],Ct=St.length,Pt=0,Ft=0,Tt=0,zt=0,Xt=0,re,de,ye,we;for(re=0;re<Ct;)de=St[re],ye=dt[re++],we=de*de,Pt+=(we-Pt)/re,Ft+=(we*de-Ft)/re,Tt+=(we*we-Tt)/re,zt+=(de*ye-zt)/re,Xt+=(we*ye-Xt)/re;var De=0,Ve=0,pn=F?+F[0]:Infinity,sn=F?+F[1]:-Infinity;l(H,h,g,function(tr,or){Ve++,De+=(or-De)/Ve,F||(tr<pn&&(pn=tr),tr>sn&&(sn=tr))});var In=Tt-Pt*Pt,An=Pt*In-Ft*Ft,Rn=(Xt*Pt-zt*Ft)/An,Mn=(zt*In-Xt*Ft)/An,Cn=-Rn*Pt,Gn=function(or){return or=or-gt,Rn*or*or+Mn*or+Cn+yt},Xn=n(pn,sn,Gn);return Xn.a=Rn,Xn.b=Mn-2*Rn*gt,Xn.c=Cn-Mn*gt+Rn*gt*gt+yt,Xn.predict=Gn,Xn.rSquared=E(H,h,g,De,Gn),Xn}return V.domain=function(H){return arguments.length?(F=H,V):F},V.x=function(H){return arguments.length?(h=H,V):h},V.y=function(H){return arguments.length?(g=H,V):g},V},pt=function(){var h=function(nt){return nt[0]},g=function(nt){return nt[1]},F=3,V;function H(et){if(F===1){var nt=M().x(h).y(g).domain(V)(et);return nt.coefficients=[nt.b,nt.a],delete nt.a,delete nt.b,nt}if(F===2){var St=it().x(h).y(g).domain(V)(et);return St.coefficients=[St.c,St.b,St.a],delete St.a,delete St.b,delete St.c,St}var dt=O(et,h,g),gt=Object(m.a)(dt,4),yt=gt[0],Ct=gt[1],Pt=gt[2],Ft=gt[3],Tt=yt.length,zt=[],Xt=[],re=F+1,de=0,ye=0,we=V?+V[0]:Infinity,De=V?+V[1]:-Infinity;l(et,h,g,function(Gn,Xn){++ye,de+=(Xn-de)/ye,V||(Gn<we&&(we=Gn),Gn>De&&(De=Gn))});var Ve,pn,sn,In,An;for(Ve=0;Ve<re;++Ve){for(sn=0,In=0;sn<Tt;++sn)In+=Math.pow(yt[sn],Ve)*Ct[sn];for(zt.push(In),An=new Float64Array(re),pn=0;pn<re;++pn){for(sn=0,In=0;sn<Tt;++sn)In+=Math.pow(yt[sn],Ve+pn);An[pn]=In}Xt.push(An)}Xt.push(zt);var Rn=Ot(Xt),Mn=function(Xn){Xn-=Pt;var tr=Ft+Rn[0]+Rn[1]*Xn+Rn[2]*Xn*Xn;for(Ve=3;Ve<re;++Ve)tr+=Rn[Ve]*Math.pow(Xn,Ve);return tr},Cn=n(we,De,Mn);return Cn.coefficients=ft(re,Rn,-Pt,Ft),Cn.predict=Mn,Cn.rSquared=E(et,h,g,de,Mn),Cn}return H.domain=function(et){return arguments.length?(V=et,H):V},H.x=function(et){return arguments.length?(h=et,H):h},H.y=function(et){return arguments.length?(g=et,H):g},H.order=function(et){return arguments.length?(F=et,H):F},H};function ft(h,g,F,V){var H=Array(h),et,nt,St,dt;for(et=0;et<h;++et)H[et]=0;for(et=h-1;et>=0;--et)for(St=g[et],dt=1,H[et]+=St,nt=1;nt<=et;++nt)dt*=(et+1-nt)/nt,H[et-nt]+=St*Math.pow(F,nt)*dt;return H[0]+=V,H}function Ot(h){var g=h.length-1,F=[],V,H,et,nt,St;for(V=0;V<g;++V){for(nt=V,H=V+1;H<g;++H)Math.abs(h[V][H])>Math.abs(h[V][nt])&&(nt=H);for(et=V;et<g+1;++et)St=h[et][V],h[et][V]=h[et][nt],h[et][nt]=St;for(H=V+1;H<g;++H)for(et=g;et>=V;et--)h[et][H]-=h[et][V]*h[V][H]/h[V][V]}for(H=g-1;H>=0;--H){for(St=0,et=H+1;et<g;++et)St+=h[et][H]*F[et];F[H]=(h[g][H]-St)/h[H][H]}return F}var wt=function(){var h=function(et){return et[0]},g=function(et){return et[1]},F;function V(H){var et=0,nt=0,St=0,dt=0,gt=0,yt=0,Ct=F?+F[0]:Infinity,Pt=F?+F[1]:-Infinity;l(H,h,g,function(ye,we){var De=Math.log(ye),Ve=Math.log(we);++et,nt+=(De-nt)/et,St+=(Ve-St)/et,dt+=(De*Ve-dt)/et,gt+=(De*De-gt)/et,yt+=(we-yt)/et,F||(ye<Ct&&(Ct=ye),ye>Pt&&(Pt=ye))});var Ft=s(nt,St,dt,gt),Tt=Object(m.a)(Ft,2),zt=Tt[0],Xt=Tt[1];zt=Math.exp(zt);var re=function(we){return zt*Math.pow(we,Xt)},de=n(Ct,Pt,re);return de.a=zt,de.b=Xt,de.predict=re,de.rSquared=E(H,h,g,yt,re),de}return V.domain=function(H){return arguments.length?(F=H,V):F},V.x=function(H){return arguments.length?(h=H,V):h},V.y=function(H){return arguments.length?(g=H,V):g},V},xt={exp:d,linear:M,loess:x,log:tt,poly:pt,pow:wt,quad:it};function lt(h,g){var F=10,V={regionStyle:[{position:{start:[h,"max"],end:["max",g]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[h,g]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",g],end:[h,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[h,g],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",g],offsetX:-F,offsetY:-F,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",g],offsetX:F,offsetY:-F,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",g],offsetX:F,offsetY:F,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",g],offsetX:-F,offsetY:F,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]};return V}var Vt=function(g,F){var V=F.view,H=F.options,et=H.xField,nt=H.yField,St=V.getScaleByField(et),dt=V.getScaleByField(nt),gt=g.map(function(yt){return V.getCoordinate().convert({x:St.scale(yt[0]),y:dt.scale(yt[1])})});return Object(A.h)(gt,!1)},Lt=function(g){var F=g.options,V=F.xField,H=F.yField,et=F.data,nt=F.regressionLine,St=nt.type,dt=St===void 0?"linear":St,gt=nt.algorithm,yt;if(gt)yt=Object(e.isArray)(gt)?gt:gt(et);else{var Ct=xt[dt]().x(function(Pt){return Pt[V]}).y(function(Pt){return Pt[H]});yt=Ct(et)}return Vt(yt,g)},Et=function(g){var F,V=g.meta,H=V===void 0?{}:V,et=g.xField,nt=g.yField,St=g.data,dt=St[0][et],gt=St[0][nt],yt=dt>0,Ct=gt>0,Pt=function(Tt,zt,Xt){var re=Object(e.get)(H,[Tt,zt]);if(Object(e.isNumber)(re))return re;if(Xt==="x"){var de={min:yt?0:dt*2,max:yt?dt*2:0};return de[zt]}var ye={min:Ct?0:gt*2,max:Ct?gt*2:0};return ye[zt]};return Object(at.a)(Object(at.a)({},H),(F={},F[et]=Object(at.a)(Object(at.a)({},H[et]),{min:Pt(et,"min","x"),max:Pt(et,"max","x")}),F[nt]=Object(at.a)(Object(at.a)({},H[nt]),{min:Pt(nt,"min","y"),max:Pt(nt,"max","y")}),F))};function J(h){var g=h.data,F=g===void 0?[]:g;return F.length===1?Object(A.b)({},h,{meta:Et(h)}):h}function ht(h){var g=h.chart,F=h.options,V=F.data,H=F.type,et=F.color,nt=F.shape,St=F.pointStyle,dt=F.shapeField,gt=F.colorField,yt=F.xField,Ct=F.yField,Pt=F.sizeField,Ft=F.size,Tt=F.tooltip;Pt&&(Ft||(Ft=[2,8]),Object(e.isNumber)(Ft)&&(Ft=[Ft,Ft])),Tt&&!Tt.fields&&(Tt=Object(at.a)(Object(at.a)({},Tt),{fields:[yt,Ct,gt,Pt,dt]})),g.data(V),Object(r.e)(Object(A.b)({},h,{options:{seriesField:gt,point:{color:et,shape:nt,size:Ft,style:St},tooltip:Tt}}));var zt=Object(A.c)(g,"point");return H&&zt.adjust(H),h}function vt(h){var g,F=h.options,V=F.data,H=F.xAxis,et=F.yAxis,nt=F.xField,St=F.yField,dt=F;return V.length===1&&(dt=J(Object(A.b)({},F,{meta:Et(F)}))),Object(A.e)(Object(p.f)((g={},g[nt]=H,g[St]=et,g)))(Object(A.b)({},h,{options:dt}))}function bt(h){var g=h.chart,F=h.options,V=F.xAxis,H=F.yAxis,et=F.xField,nt=F.yField;return g.axis(et,V),g.axis(nt,H),h}function At(h){var g=h.chart,F=h.options,V=F.legend,H=F.colorField,et=F.shapeField,nt=F.sizeField,St=Object(e.isBoolean)(V)?V:V||!!(et||H);return St?(g.legend(H||et,V),nt&&g.legend(nt,!1)):g.legend(!1),h}function q(h){var g=h.chart,F=h.options,V=F.label,H=F.yField,et=Object(A.c)(g,"point");if(!V)et.label(!1);else{var nt=V.callback,St=Object(at.c)(V,["callback"]);et.label({fields:[H],callback:nt,cfg:Object(A.o)(St)})}return h}function ct(h){var g=h.options,F=g.quadrant,V=[];if(F){var H=F.xBaseline,et=H===void 0?0:H,nt=F.yBaseline,St=nt===void 0?0:nt,dt=F.labels,gt=F.regionStyle,yt=F.lineStyle,Ct=lt(et,St),Pt=new Array(4).join(",").split(",");Pt.forEach(function(Ft,Tt){V.push(Object(at.a)(Object(at.a)({type:"region",top:!1},Ct.regionStyle[Tt].position),{style:Object(A.b)({},Ct.regionStyle[Tt].style,gt==null?void 0:gt[Tt])}),Object(at.a)({type:"text",top:!0},Object(A.b)({},Ct.labelStyle[Tt],dt==null?void 0:dt[Tt])))}),V.push({type:"line",top:!1,start:["min",St],end:["max",St],style:Object(A.b)({},Ct.lineStyle,yt)},{type:"line",top:!1,start:[et,"min"],end:[et,"max"],style:Object(A.b)({},Ct.lineStyle,yt)})}return Object(A.e)(Object(p.b)(V))(h)}function ot(h){var g=h.options,F=h.chart,V=g.regressionLine;if(V){var H=V.style,et=V.top,nt=et===void 0?!1:et,St={stroke:"#9ba29a",lineWidth:2,opacity:.5};F.annotation().shape({top:nt,render:function(gt,yt){var Ct=gt.addGroup({id:F.id+"-regression-line",name:"regression-line-group"}),Pt=Lt({view:yt,options:g});Ct.addShape("path",{name:"regression-line",attrs:Object(at.a)(Object(at.a)({path:Pt},St),H)})}})}return h}function _(h){var g=h.chart,F=h.options,V=F.tooltip;return V?g.tooltip(V):V===!1&&g.tooltip(!1),h}function P(h){return Object(A.e)(ht,vt,bt,At,_,q,p.c,ct,p.a,p.j,ot)(h)}var Y=z("hag6"),k=function(h){Object(at.b)(g,h);function g(){var F=h!==null&&h.apply(this,arguments)||this;return F.type="point",F}return g.prototype.changeData=function(F){this.updateOption(J(Object(A.b)({},this.options,{data:F})));var V=this,H=V.options,et=V.chart;vt({chart:et,options:H}),this.chart.changeData(F)},g.prototype.getSchemaAdaptor=function(){return P},g.prototype.getDefaultOptions=function(){return Object(A.b)({},h.prototype.getDefaultOptions.call(this),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}})},g}(a.a)},tKoa:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return r}),z.d(Ut,"d",function(){return m}),z.d(Ut,"e",function(){return O}),z.d(Ut,"c",function(){return j}),z.d(Ut,"f",function(){return y.a}),z.d(Ut,"b",function(){return n});var at=z("mrSG"),a=z("5HRO"),A=z("YuPD"),e=z("WOQw");function r(s){var d=s.options,M=d.area,S=d.xField,T=d.yField,v=d.seriesField,x=d.smooth,C=d.tooltip,N=Object(a.a)(C,[S,T,v]),X=N.fields,tt=N.formatter;return M?Object(e.a)(Object(A.b)({},s,{options:{type:"area",colorField:v,tooltipFields:X,mapping:Object(at.a)({shape:x?"smooth":"area",tooltip:tt},M)}})):s}var p=z("iTfj");function m(s){var d=s.options,M=d.line,S=d.stepType,T=d.xField,v=d.yField,x=d.seriesField,C=d.smooth,N=d.connectNulls,X=d.tooltip,tt=Object(a.a)(X,[T,v,x]),it=tt.fields,pt=tt.formatter;return M?Object(e.a)(Object(A.b)({},s,{options:{type:"line",colorField:x,tooltipFields:it,mapping:Object(p.deepMix)({shape:S||(C?"smooth":"line"),tooltip:pt},M),args:{connectNulls:N}}})):s}function O(s){var d=s.options,M=d.point,S=d.xField,T=d.yField,v=d.seriesField,x=d.sizeField,C=d.shapeField,N=d.tooltip,X=Object(a.a)(N,[S,T,v,x,C]),tt=X.fields,it=X.formatter;return M?Object(e.a)(Object(A.b)({},s,{options:{type:"point",colorField:v,shapeField:C,tooltipFields:tt,mapping:Object(at.a)({tooltip:it},M)}})):s}var l=z("kXyF");function E(s){var d=s.chart,M=s.options,S=s.ext,T=M.seriesField,v=M.isGroup,x=M.isStack,C=M.marginRatio,N=M.widthRatio,X=M.groupField,tt=M.theme,it=[];if(T&&(v&&it.push({type:"dodge",dodgeBy:X||T,marginRatio:C}),x&&it.push({type:"stack",marginRatio:C})),it.length&&(S==null?void 0:S.geometry)){var pt=S==null?void 0:S.geometry;pt.adjust(it)}return Object(p.isNil)(N)||d.theme(Object(A.b)({},Object(p.isObject)(tt)?tt:Object(l.getTheme)(tt),{columnWidthRatio:N})),s}function j(s){var d=s.options,M=d.xField,S=d.yField,T=d.interval,v=d.seriesField,x=d.tooltip,C=d.minColumnWidth,N=d.maxColumnWidth,X=d.columnBackground,tt=Object(a.a)(x,[M,S,v]),it=tt.fields,pt=tt.formatter,ft=(T?Object(e.a)(Object(A.b)({},s,{options:{type:"interval",colorField:v,tooltipFields:it,mapping:Object(at.a)({tooltip:pt},T),args:{minColumnWidth:C,maxColumnWidth:N,background:X}}})):s).ext;return E(Object(at.a)(Object(at.a)({},s),{ext:ft}))}var y=z("KMYG");function n(s){var d=s.options,M=d.edge,S=d.xField,T=d.yField,v=d.seriesField,x=d.tooltip,C=Object(a.a)(x,[S,T,v]),N=C.fields,X=C.formatter;return M?Object(e.a)(Object(A.b)({},s,{options:{type:"edge",colorField:v,tooltipFields:N,mapping:Object(at.a)({tooltip:X},M)}})):s}},tdXX:function(zn,Ut){},"tvR+":function(zn,Ut,z){"use strict";var at=z("DdT1"),a=z("I4jL"),A=z("IeU1"),e=z("CSvP");Ut.a=function(){var r=a.a,p=!1,m=1,O=1,l=[0],E=e.a,j=e.a,y=e.a,n=e.a,s=e.a;function d(S){return S.x0=S.y0=0,S.x1=m,S.y1=O,S.eachBefore(M),l=[0],p&&S.eachBefore(at.a),S}function M(S){var T=l[S.depth],v=S.x0+T,x=S.y0+T,C=S.x1-T,N=S.y1-T;C<v&&(v=C=(v+C)/2),N<x&&(x=N=(x+N)/2),S.x0=v,S.y0=x,S.x1=C,S.y1=N,S.children&&(T=l[S.depth+1]=E(S)/2,v+=s(S)-T,x+=j(S)-T,C-=y(S)-T,N-=n(S)-T,C<v&&(v=C=(v+C)/2),N<x&&(x=N=(x+N)/2),r(S,v,x,C,N))}return d.round=function(S){return arguments.length?(p=!!S,d):p},d.size=function(S){return arguments.length?(m=+S[0],O=+S[1],d):[m,O]},d.tile=function(S){return arguments.length?(r=Object(A.b)(S),d):r},d.padding=function(S){return arguments.length?d.paddingInner(S).paddingOuter(S):d.paddingInner()},d.paddingInner=function(S){return arguments.length?(E=typeof S=="function"?S:Object(e.b)(+S),d):E},d.paddingOuter=function(S){return arguments.length?d.paddingTop(S).paddingRight(S).paddingBottom(S).paddingLeft(S):d.paddingTop()},d.paddingTop=function(S){return arguments.length?(j=typeof S=="function"?S:Object(e.b)(+S),d):j},d.paddingRight=function(S){return arguments.length?(y=typeof S=="function"?S:Object(e.b)(+S),d):y},d.paddingBottom=function(S){return arguments.length?(n=typeof S=="function"?S:Object(e.b)(+S),d):n},d.paddingLeft=function(S){return arguments.length?(s=typeof S=="function"?S:Object(e.b)(+S),d):s},d}},tvuL:function(zn,Ut,z){"use strict";z.r(Ut),z.d(Ut,"catmullRomToBezier",function(){return p}),z.d(Ut,"fillPath",function(){return lt}),z.d(Ut,"fillPathByDiff",function(){return J}),z.d(Ut,"formatPath",function(){return bt}),z.d(Ut,"intersection",function(){return ft}),z.d(Ut,"parsePathArray",function(){return s}),z.d(Ut,"parsePathString",function(){return r}),z.d(Ut,"pathToAbsolute",function(){return O}),z.d(Ut,"pathToCurve",function(){return y}),z.d(Ut,"rectPath",function(){return x});var at=z("iTfj"),a=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,A=new RegExp("([a-z])["+a+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+a+"]*,?["+a+"]*)+)","ig"),e=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+a+"]*,?["+a+"]*","ig"),r=function(q){if(!q)return null;if(Object(at.isArray)(q))return q;var ct={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},ot=[];return String(q).replace(A,function(_,P,Y){var k=[],h=P.toLowerCase();if(Y.replace(e,function(g,F){F&&k.push(+F)}),h==="m"&&k.length>2&&(ot.push([P].concat(k.splice(0,2))),h="l",P=P==="m"?"l":"L"),h==="o"&&k.length===1&&ot.push([P,k[0]]),h==="r")ot.push([P].concat(k));else for(;k.length>=ct[h]&&(ot.push([P].concat(k.splice(0,ct[h]))),!!ct[h]););return q}),ot},p=function(q,ct){for(var ot=[],_=0,P=q.length;P-2*!ct>_;_+=2){var Y=[{x:+q[_-2],y:+q[_-1]},{x:+q[_],y:+q[_+1]},{x:+q[_+2],y:+q[_+3]},{x:+q[_+4],y:+q[_+5]}];ct?_?P-4===_?Y[3]={x:+q[0],y:+q[1]}:P-2===_&&(Y[2]={x:+q[0],y:+q[1]},Y[3]={x:+q[2],y:+q[3]}):Y[0]={x:+q[P-2],y:+q[P-1]}:P-4===_?Y[3]=Y[2]:_||(Y[0]={x:+q[_],y:+q[_+1]}),ot.push(["C",(-Y[0].x+6*Y[1].x+Y[2].x)/6,(-Y[0].y+6*Y[1].y+Y[2].y)/6,(Y[1].x+6*Y[2].x-Y[3].x)/6,(Y[1].y+6*Y[2].y-Y[3].y)/6,Y[2].x,Y[2].y])}return ot},m=function(q,ct,ot,_,P){var Y=[];if(P===null&&_===null&&(_=ot),q=+q,ct=+ct,ot=+ot,_=+_,P!==null){var k=Math.PI/180,h=q+ot*Math.cos(-_*k),g=q+ot*Math.cos(-P*k),F=ct+ot*Math.sin(-_*k),V=ct+ot*Math.sin(-P*k);Y=[["M",h,F],["A",ot,ot,0,+(P-_>180),0,g,V]]}else Y=[["M",q,ct],["m",0,-_],["a",ot,_,0,1,1,0,2*_],["a",ot,_,0,1,1,0,-2*_],["z"]];return Y},O=function(q){if(q=r(q),!q||!q.length)return[["M",0,0]];var ct=[],ot=0,_=0,P=0,Y=0,k=0,h,g;q[0][0]==="M"&&(ot=+q[0][1],_=+q[0][2],P=ot,Y=_,k++,ct[0]=["M",ot,_]);for(var F=q.length===3&&q[0][0]==="M"&&q[1][0].toUpperCase()==="R"&&q[2][0].toUpperCase()==="Z",V=void 0,H=void 0,et=k,nt=q.length;et<nt;et++){if(ct.push(V=[]),H=q[et],h=H[0],h!==h.toUpperCase())switch(V[0]=h.toUpperCase(),V[0]){case"A":V[1]=H[1],V[2]=H[2],V[3]=H[3],V[4]=H[4],V[5]=H[5],V[6]=+H[6]+ot,V[7]=+H[7]+_;break;case"V":V[1]=+H[1]+_;break;case"H":V[1]=+H[1]+ot;break;case"R":g=[ot,_].concat(H.slice(1));for(var St=2,dt=g.length;St<dt;St++)g[St]=+g[St]+ot,g[++St]=+g[St]+_;ct.pop(),ct=ct.concat(p(g,F));break;case"O":ct.pop(),g=m(ot,_,H[1],H[2]),g.push(g[0]),ct=ct.concat(g);break;case"U":ct.pop(),ct=ct.concat(m(ot,_,H[1],H[2],H[3])),V=["U"].concat(ct[ct.length-1].slice(-2));break;case"M":P=+H[1]+ot,Y=+H[2]+_;break;default:for(var St=1,dt=H.length;St<dt;St++)V[St]=+H[St]+(St%2?ot:_)}else if(h==="R")g=[ot,_].concat(H.slice(1)),ct.pop(),ct=ct.concat(p(g,F)),V=["R"].concat(H.slice(-2));else if(h==="O")ct.pop(),g=m(ot,_,H[1],H[2]),g.push(g[0]),ct=ct.concat(g);else if(h==="U")ct.pop(),ct=ct.concat(m(ot,_,H[1],H[2],H[3])),V=["U"].concat(ct[ct.length-1].slice(-2));else for(var gt=0,yt=H.length;gt<yt;gt++)V[gt]=H[gt];if(h=h.toUpperCase(),h!=="O")switch(V[0]){case"Z":ot=+P,_=+Y;break;case"H":ot=V[1];break;case"V":_=V[1];break;case"M":P=V[V.length-2],Y=V[V.length-1];break;default:ot=V[V.length-2],_=V[V.length-1]}}return ct},l=function(q,ct,ot,_){return[q,ct,ot,_,ot,_]},E=function(q,ct,ot,_,P,Y){var k=1/3,h=2/3;return[k*q+h*ot,k*ct+h*_,k*P+h*ot,k*Y+h*_,P,Y]},j=function At(q,ct,ot,_,P,Y,k,h,g,F){ot===_&&(ot+=1);var V=Math.PI*120/180,H=Math.PI/180*(+P||0),et=[],nt,St,dt,gt,yt,Ct=function(Vr,ti,hi){var Fi=Vr*Math.cos(hi)-ti*Math.sin(hi),to=Vr*Math.sin(hi)+ti*Math.cos(hi);return{x:Fi,y:to}};if(F)St=F[0],dt=F[1],gt=F[2],yt=F[3];else{nt=Ct(q,ct,-H),q=nt.x,ct=nt.y,nt=Ct(h,g,-H),h=nt.x,g=nt.y,q===h&&ct===g&&(h+=1,g+=1);var Pt=(q-h)/2,Ft=(ct-g)/2,Tt=Pt*Pt/(ot*ot)+Ft*Ft/(_*_);Tt>1&&(Tt=Math.sqrt(Tt),ot=Tt*ot,_=Tt*_);var zt=ot*ot,Xt=_*_,re=(Y===k?-1:1)*Math.sqrt(Math.abs((zt*Xt-zt*Ft*Ft-Xt*Pt*Pt)/(zt*Ft*Ft+Xt*Pt*Pt)));gt=re*ot*Ft/_+(q+h)/2,yt=re*-_*Pt/ot+(ct+g)/2,St=Math.asin(((ct-yt)/_).toFixed(9)),dt=Math.asin(((g-yt)/_).toFixed(9)),St=q<gt?Math.PI-St:St,dt=h<gt?Math.PI-dt:dt,St<0&&(St=Math.PI*2+St),dt<0&&(dt=Math.PI*2+dt),k&&St>dt&&(St=St-Math.PI*2),!k&&dt>St&&(dt=dt-Math.PI*2)}var de=dt-St;if(Math.abs(de)>V){var ye=dt,we=h,De=g;dt=St+V*(k&&dt>St?1:-1),h=gt+ot*Math.cos(dt),g=yt+_*Math.sin(dt),et=At(h,g,ot,_,P,0,k,we,De,[dt,ye,gt,yt])}de=dt-St;var Ve=Math.cos(St),pn=Math.sin(St),sn=Math.cos(dt),In=Math.sin(dt),An=Math.tan(de/4),Rn=4/3*ot*An,Mn=4/3*_*An,Cn=[q,ct],Gn=[q+Rn*pn,ct-Mn*Ve],Xn=[h+Rn*In,g-Mn*sn],tr=[h,g];if(Gn[0]=2*Cn[0]-Gn[0],Gn[1]=2*Cn[1]-Gn[1],F)return[Gn,Xn,tr].concat(et);et=[Gn,Xn,tr].concat(et).join().split(",");for(var or=[],nr=0,er=et.length;nr<er;nr++)or[nr]=nr%2?Ct(et[nr-1],et[nr],H).y:Ct(et[nr],et[nr+1],H).x;return or},y=function(q,ct){var ot=O(q),_=ct&&O(ct),P={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Y={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k=[],h=[],g="",F="",V,H=function(Ft,Tt,zt){var Xt,re;if(!Ft)return["C",Tt.x,Tt.y,Tt.x,Tt.y,Tt.x,Tt.y];switch(!(Ft[0]in{T:1,Q:1})&&(Tt.qx=Tt.qy=null),Ft[0]){case"M":Tt.X=Ft[1],Tt.Y=Ft[2];break;case"A":Ft=["C"].concat(j.apply(0,[Tt.x,Tt.y].concat(Ft.slice(1))));break;case"S":zt==="C"||zt==="S"?(Xt=Tt.x*2-Tt.bx,re=Tt.y*2-Tt.by):(Xt=Tt.x,re=Tt.y),Ft=["C",Xt,re].concat(Ft.slice(1));break;case"T":zt==="Q"||zt==="T"?(Tt.qx=Tt.x*2-Tt.qx,Tt.qy=Tt.y*2-Tt.qy):(Tt.qx=Tt.x,Tt.qy=Tt.y),Ft=["C"].concat(E(Tt.x,Tt.y,Tt.qx,Tt.qy,Ft[1],Ft[2]));break;case"Q":Tt.qx=Ft[1],Tt.qy=Ft[2],Ft=["C"].concat(E(Tt.x,Tt.y,Ft[1],Ft[2],Ft[3],Ft[4]));break;case"L":Ft=["C"].concat(l(Tt.x,Tt.y,Ft[1],Ft[2]));break;case"H":Ft=["C"].concat(l(Tt.x,Tt.y,Ft[1],Tt.y));break;case"V":Ft=["C"].concat(l(Tt.x,Tt.y,Tt.x,Ft[1]));break;case"Z":Ft=["C"].concat(l(Tt.x,Tt.y,Tt.X,Tt.Y));break;default:break}return Ft},et=function(Ft,Tt){if(Ft[Tt].length>7){Ft[Tt].shift();for(var zt=Ft[Tt];zt.length;)k[Tt]="A",_&&(h[Tt]="A"),Ft.splice(Tt++,0,["C"].concat(zt.splice(0,6)));Ft.splice(Tt,1),V=Math.max(ot.length,_&&_.length||0)}},nt=function(Ft,Tt,zt,Xt,re){Ft&&Tt&&Ft[re][0]==="M"&&Tt[re][0]!=="M"&&(Tt.splice(re,0,["M",Xt.x,Xt.y]),zt.bx=0,zt.by=0,zt.x=Ft[re][1],zt.y=Ft[re][2],V=Math.max(ot.length,_&&_.length||0))};V=Math.max(ot.length,_&&_.length||0);for(var St=0;St<V;St++){ot[St]&&(g=ot[St][0]),g!=="C"&&(k[St]=g,St&&(F=k[St-1])),ot[St]=H(ot[St],P,F),k[St]!=="A"&&g==="C"&&(k[St]="C"),et(ot,St),_&&(_[St]&&(g=_[St][0]),g!=="C"&&(h[St]=g,St&&(F=h[St-1])),_[St]=H(_[St],Y,F),h[St]!=="A"&&g==="C"&&(h[St]="C"),et(_,St)),nt(ot,_,P,Y,St),nt(_,ot,Y,P,St);var dt=ot[St],gt=_&&_[St],yt=dt.length,Ct=_&&gt.length;P.x=dt[yt-2],P.y=dt[yt-1],P.bx=parseFloat(dt[yt-4])||P.x,P.by=parseFloat(dt[yt-3])||P.y,Y.bx=_&&(parseFloat(gt[Ct-4])||Y.x),Y.by=_&&(parseFloat(gt[Ct-3])||Y.y),Y.x=_&&gt[Ct-2],Y.y=_&&gt[Ct-1]}return _?[ot,_]:ot},n=/,?([a-z]),?/gi,s=function(q){return q.join(",").replace(n,"$1")},d=function(q,ct,ot,_,P){var Y=-3*ct+9*ot-9*_+3*P,k=q*Y+6*ct-12*ot+6*_;return q*k-3*ct+3*ot},M=function(q,ct,ot,_,P,Y,k,h,g){g===null&&(g=1),g=g>1?1:g<0?0:g;for(var F=g/2,V=12,H=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],et=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],nt=0,St=0;St<V;St++){var dt=F*H[St]+F,gt=d(dt,q,ot,P,k),yt=d(dt,ct,_,Y,h),Ct=gt*gt+yt*yt;nt+=et[St]*Math.sqrt(Ct)}return F*nt},S=function(q,ct,ot,_,P,Y,k,h){for(var g=[],F=[[],[]],V,H,et,nt,St=0;St<2;++St){if(St===0?(H=6*q-12*ot+6*P,V=-3*q+9*ot-9*P+3*k,et=3*ot-3*q):(H=6*ct-12*_+6*Y,V=-3*ct+9*_-9*Y+3*h,et=3*_-3*ct),Math.abs(V)<1e-12){if(Math.abs(H)<1e-12)continue;nt=-et/H,nt>0&&nt<1&&g.push(nt);continue}var dt=H*H-4*et*V,gt=Math.sqrt(dt);if(!(dt<0)){var yt=(-H+gt)/(2*V);yt>0&&yt<1&&g.push(yt);var Ct=(-H-gt)/(2*V);Ct>0&&Ct<1&&g.push(Ct)}}for(var Pt=g.length,Ft=Pt,Tt;Pt--;)nt=g[Pt],Tt=1-nt,F[0][Pt]=Tt*Tt*Tt*q+3*Tt*Tt*nt*ot+3*Tt*nt*nt*P+nt*nt*nt*k,F[1][Pt]=Tt*Tt*Tt*ct+3*Tt*Tt*nt*_+3*Tt*nt*nt*Y+nt*nt*nt*h;return F[0][Ft]=q,F[1][Ft]=ct,F[0][Ft+1]=k,F[1][Ft+1]=h,F[0].length=F[1].length=Ft+2,{min:{x:Math.min.apply(0,F[0]),y:Math.min.apply(0,F[1])},max:{x:Math.max.apply(0,F[0]),y:Math.max.apply(0,F[1])}}},T=function(q,ct,ot,_,P,Y,k,h){if(!(Math.max(q,ot)<Math.min(P,k)||Math.min(q,ot)>Math.max(P,k)||Math.max(ct,_)<Math.min(Y,h)||Math.min(ct,_)>Math.max(Y,h))){var g=(q*_-ct*ot)*(P-k)-(q-ot)*(P*h-Y*k),F=(q*_-ct*ot)*(Y-h)-(ct-_)*(P*h-Y*k),V=(q-ot)*(Y-h)-(ct-_)*(P-k);if(!!V){var H=g/V,et=F/V,nt=+H.toFixed(2),St=+et.toFixed(2);if(!(nt<+Math.min(q,ot).toFixed(2)||nt>+Math.max(q,ot).toFixed(2)||nt<+Math.min(P,k).toFixed(2)||nt>+Math.max(P,k).toFixed(2)||St<+Math.min(ct,_).toFixed(2)||St>+Math.max(ct,_).toFixed(2)||St<+Math.min(Y,h).toFixed(2)||St>+Math.max(Y,h).toFixed(2)))return{x:H,y:et}}}},v=function(q,ct,ot){return ct>=q.x&&ct<=q.x+q.width&&ot>=q.y&&ot<=q.y+q.height},x=function(q,ct,ot,_,P){if(P)return[["M",+q+ +P,ct],["l",ot-P*2,0],["a",P,P,0,0,1,P,P],["l",0,_-P*2],["a",P,P,0,0,1,-P,P],["l",P*2-ot,0],["a",P,P,0,0,1,-P,-P],["l",0,P*2-_],["a",P,P,0,0,1,P,-P],["z"]];var Y=[["M",q,ct],["l",ot,0],["l",0,_],["l",-ot,0],["z"]];return Y.parsePathArray=s,Y},C=function(q,ct,ot,_){return q===null&&(q=ct=ot=_=0),ct===null&&(ct=q.y,ot=q.width,_=q.height,q=q.x),{x:q,y:ct,width:ot,w:ot,height:_,h:_,x2:q+ot,y2:ct+_,cx:q+ot/2,cy:ct+_/2,r1:Math.min(ot,_)/2,r2:Math.max(ot,_)/2,r0:Math.sqrt(ot*ot+_*_)/2,path:x(q,ct,ot,_),vb:[q,ct,ot,_].join(" ")}},N=function(q,ct){return q=C(q),ct=C(ct),v(ct,q.x,q.y)||v(ct,q.x2,q.y)||v(ct,q.x,q.y2)||v(ct,q.x2,q.y2)||v(q,ct.x,ct.y)||v(q,ct.x2,ct.y)||v(q,ct.x,ct.y2)||v(q,ct.x2,ct.y2)||(q.x<ct.x2&&q.x>ct.x||ct.x<q.x2&&ct.x>q.x)&&(q.y<ct.y2&&q.y>ct.y||ct.y<q.y2&&ct.y>q.y)},X=function(q,ct,ot,_,P,Y,k,h){Object(at.isArray)(q)||(q=[q,ct,ot,_,P,Y,k,h]);var g=S.apply(null,q);return C(g.min.x,g.min.y,g.max.x-g.min.x,g.max.y-g.min.y)},tt=function(q,ct,ot,_,P,Y,k,h,g){var F=1-g,V=Math.pow(F,3),H=Math.pow(F,2),et=g*g,nt=et*g,St=V*q+H*3*g*ot+F*3*g*g*P+nt*k,dt=V*ct+H*3*g*_+F*3*g*g*Y+nt*h,gt=q+2*g*(ot-q)+et*(P-2*ot+q),yt=ct+2*g*(_-ct)+et*(Y-2*_+ct),Ct=ot+2*g*(P-ot)+et*(k-2*P+ot),Pt=_+2*g*(Y-_)+et*(h-2*Y+_),Ft=F*q+g*ot,Tt=F*ct+g*_,zt=F*P+g*k,Xt=F*Y+g*h,re=90-Math.atan2(gt-Ct,yt-Pt)*180/Math.PI;return{x:St,y:dt,m:{x:gt,y:yt},n:{x:Ct,y:Pt},start:{x:Ft,y:Tt},end:{x:zt,y:Xt},alpha:re}},it=function(q,ct,ot){var _=X(q),P=X(ct);if(!N(_,P))return ot?0:[];for(var Y=M.apply(0,q),k=M.apply(0,ct),h=~~(Y/8),g=~~(k/8),F=[],V=[],H={},et=ot?0:[],nt=0;nt<h+1;nt++){var St=tt.apply(0,q.concat(nt/h));F.push({x:St.x,y:St.y,t:nt/h})}for(var nt=0;nt<g+1;nt++){var St=tt.apply(0,ct.concat(nt/g));V.push({x:St.x,y:St.y,t:nt/g})}for(var nt=0;nt<h;nt++)for(var dt=0;dt<g;dt++){var gt=F[nt],yt=F[nt+1],Ct=V[dt],Pt=V[dt+1],Ft=Math.abs(yt.x-gt.x)<.001?"y":"x",Tt=Math.abs(Pt.x-Ct.x)<.001?"y":"x",zt=T(gt.x,gt.y,yt.x,yt.y,Ct.x,Ct.y,Pt.x,Pt.y);if(zt){if(H[zt.x.toFixed(4)]===zt.y.toFixed(4))continue;H[zt.x.toFixed(4)]=zt.y.toFixed(4);var Xt=gt.t+Math.abs((zt[Ft]-gt[Ft])/(yt[Ft]-gt[Ft]))*(yt.t-gt.t),re=Ct.t+Math.abs((zt[Tt]-Ct[Tt])/(Pt[Tt]-Ct[Tt]))*(Pt.t-Ct.t);Xt>=0&&Xt<=1&&re>=0&&re<=1&&(ot?et+=1:et.push({x:zt.x,y:zt.y,t1:Xt,t2:re}))}}return et},pt=function(q,ct,ot){q=y(q),ct=y(ct);for(var _,P,Y,k,h,g,F,V,H,et,nt=ot?0:[],St=0,dt=q.length;St<dt;St++){var gt=q[St];if(gt[0]==="M")_=h=gt[1],P=g=gt[2];else{gt[0]==="C"?(H=[_,P].concat(gt.slice(1)),_=H[6],P=H[7]):(H=[_,P,_,P,h,g,h,g],_=h,P=g);for(var yt=0,Ct=ct.length;yt<Ct;yt++){var Pt=ct[yt];if(Pt[0]==="M")Y=F=Pt[1],k=V=Pt[2];else{Pt[0]==="C"?(et=[Y,k].concat(Pt.slice(1)),Y=et[6],k=et[7]):(et=[Y,k,Y,k,F,V,F,V],Y=F,k=V);var Ft=it(H,et,ot);if(ot)nt+=Ft;else{for(var Tt=0,zt=Ft.length;Tt<zt;Tt++)Ft[Tt].segment1=St,Ft[Tt].segment2=yt,Ft[Tt].bez1=H,Ft[Tt].bez2=et;nt=nt.concat(Ft)}}}}}return nt},ft=function(q,ct){return pt(q,ct)};function Ot(At,q){var ct=[],ot=[];function _(P,Y){if(P.length===1)ct.push(P[0]),ot.push(P[0]);else{for(var k=[],h=0;h<P.length-1;h++)h===0&&ct.push(P[0]),h===P.length-2&&ot.push(P[h+1]),k[h]=[(1-Y)*P[h][0]+Y*P[h+1][0],(1-Y)*P[h][1]+Y*P[h+1][1]];_(k,Y)}}return At.length&&_(At,q),{left:ct,right:ot.reverse()}}function wt(At,q,ct){var ot=[[At[1],At[2]]];ct=ct||2;var _=[];q[0]==="A"?(ot.push(q[6]),ot.push(q[7])):q[0]==="C"?(ot.push([q[1],q[2]]),ot.push([q[3],q[4]]),ot.push([q[5],q[6]])):q[0]==="S"||q[0]==="Q"?(ot.push([q[1],q[2]]),ot.push([q[3],q[4]])):ot.push([q[1],q[2]]);for(var P=ot,Y=1/ct,k=0;k<ct-1;k++){var h=Y/(1-Y*k),g=Ot(P,h);_.push(g.left),P=g.right}_.push(P);var F=_.map(function(V){var H=[];return V.length===4&&(H.push("C"),H=H.concat(V[2])),V.length>=3&&(V.length===3&&H.push("Q"),H=H.concat(V[1])),V.length===2&&H.push("L"),H=H.concat(V[V.length-1]),H});return F}var xt=function(q,ct,ot){if(ot===1)return[[].concat(q)];var _=[];if(ct[0]==="L"||ct[0]==="C"||ct[0]==="Q")_=_.concat(wt(q,ct,ot));else{var P=[].concat(q);P[0]==="M"&&(P[0]="L");for(var Y=0;Y<=ot-1;Y++)_.push(P)}return _},lt=function(q,ct){if(q.length===1)return q;var ot=q.length-1,_=ct.length-1,P=ot/_,Y=[];if(q.length===1&&q[0][0]==="M"){for(var k=0;k<_-ot;k++)q.push(q[0]);return q}for(var k=0;k<_;k++){var h=Math.floor(P*k);Y[h]=(Y[h]||0)+1}var g=Y.reduce(function(F,V,H){return H===ot?F.concat(q[ot]):F.concat(xt(q[H],q[H+1],V))},[]);return g.unshift(q[0]),(ct[_]==="Z"||ct[_]==="z")&&g.push("Z"),g},Vt=function(q,ct){if(q.length!==ct.length)return!1;var ot=!0;return Object(at.each)(q,function(_,P){if(_!==ct[P])return ot=!1,!1}),ot};function Lt(At,q,ct){var ot=null,_=ct;return q<_&&(_=q,ot="add"),At<_&&(_=At,ot="del"),{type:ot,min:_}}var Et=function(q,ct){var ot=q.length,_=ct.length,P,Y,k=0;if(ot===0||_===0)return null;for(var h=[],g=0;g<=ot;g++)h[g]=[],h[g][0]={min:g};for(var F=0;F<=_;F++)h[0][F]={min:F};for(var g=1;g<=ot;g++){P=q[g-1];for(var F=1;F<=_;F++){Y=ct[F-1],Vt(P,Y)?k=0:k=1;var V=h[g-1][F].min+1,H=h[g][F-1].min+1,et=h[g-1][F-1].min+k;h[g][F]=Lt(V,H,et)}}return h},J=function(q,ct){var ot=Et(q,ct),_=q.length,P=ct.length,Y=[],k=1,h=1;if(ot[_][P].min!==_){for(var g=1;g<=_;g++){var F=ot[g][g].min;h=g;for(var V=k;V<=P;V++)ot[g][V].min<F&&(F=ot[g][V].min,h=V);k=h,ot[g][k].type&&Y.push({index:g-1,type:ot[g][k].type})}for(var g=Y.length-1;g>=0;g--)k=Y[g].index,Y[g].type==="add"?q.splice(k,0,[].concat(q[k])):q.splice(k,1)}_=q.length;var H=P-_;if(_<P)for(var g=0;g<H;g++)q[_-1][0]==="z"||q[_-1][0]==="Z"?q.splice(_-2,0,q[_-2]):q.push(q[_-1]),_+=1;return q};function ht(At,q,ct){for(var ot=[].concat(At),_,P=1/(ct+1),Y=vt(q)[0],k=1;k<=ct;k++)P*=k,_=Math.floor(At.length*P),_===0?ot.unshift([Y[0]*P+At[_][0]*(1-P),Y[1]*P+At[_][1]*(1-P)]):ot.splice(_,0,[Y[0]*P+At[_][0]*(1-P),Y[1]*P+At[_][1]*(1-P)]);return ot}function vt(At){var q=[];switch(At[0]){case"M":q.push([At[1],At[2]]);break;case"L":q.push([At[1],At[2]]);break;case"A":q.push([At[6],At[7]]);break;case"Q":q.push([At[3],At[4]]),q.push([At[1],At[2]]);break;case"T":q.push([At[1],At[2]]);break;case"C":q.push([At[5],At[6]]),q.push([At[1],At[2]]),q.push([At[3],At[4]]);break;case"S":q.push([At[3],At[4]]),q.push([At[1],At[2]]);break;case"H":q.push([At[1],At[1]]);break;case"V":q.push([At[1],At[1]]);break;default:}return q}var bt=function(q,ct){if(q.length<=1)return q;for(var ot,_=0;_<ct.length;_++)if(q[_][0]!==ct[_][0])switch(ot=vt(q[_]),ct[_][0]){case"M":q[_]=["M"].concat(ot[0]);break;case"L":q[_]=["L"].concat(ot[0]);break;case"A":q[_]=[].concat(ct[_]),q[_][6]=ot[0][0],q[_][7]=ot[0][1];break;case"Q":if(ot.length<2)if(_>0)ot=ht(ot,q[_-1],1);else{q[_]=ct[_];break}q[_]=["Q"].concat(ot.reduce(function(P,Y){return P.concat(Y)},[]));break;case"T":q[_]=["T"].concat(ot[0]);break;case"C":if(ot.length<3)if(_>0)ot=ht(ot,q[_-1],2);else{q[_]=ct[_];break}q[_]=["C"].concat(ot.reduce(function(P,Y){return P.concat(Y)},[]));break;case"S":if(ot.length<2)if(_>0)ot=ht(ot,q[_-1],1);else{q[_]=ct[_];break}q[_]=["S"].concat(ot.reduce(function(P,Y){return P.concat(Y)},[]));break;default:q[_]=ct[_]}return q}},u3os:function(zn,Ut,z){"use strict";Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.ver=Ut.clear=Ut.bind=void 0;var at=z("P4Qj"),a=function(p,m){var O=(0,at.getSensor)(p);return O.bind(m),function(){O.unbind(m)}};Ut.bind=a;var A=function(p){var m=(0,at.getSensor)(p);(0,at.removeSensor)(m)};Ut.clear=A;var e="1.0.1";Ut.ver=e},u60a:function(zn,Ut,z){"use strict";z.r(Ut),z.d(Ut,"CONTAINER_CLASS",function(){return at}),z.d(Ut,"TITLE_CLASS",function(){return a}),z.d(Ut,"LIST_CLASS",function(){return A}),z.d(Ut,"LIST_ITEM_CLASS",function(){return e}),z.d(Ut,"MARKER_CLASS",function(){return r}),z.d(Ut,"VALUE_CLASS",function(){return p}),z.d(Ut,"NAME_CLASS",function(){return m}),z.d(Ut,"CROSSHAIR_X",function(){return O}),z.d(Ut,"CROSSHAIR_Y",function(){return l});var at="g2-tooltip",a="g2-tooltip-title",A="g2-tooltip-list",e="g2-tooltip-list-item",r="g2-tooltip-marker",p="g2-tooltip-value",m="g2-tooltip-name",O="g2-tooltip-crosshair-x",l="g2-tooltip-crosshair-y"},"u9/z":function(zn,Ut,z){"use strict";z.d(Ut,"b",function(){return m}),z.d(Ut,"a",function(){return l});var at=z("iTfj"),a=z("YuPD"),A=z("w02o"),e=z("tKoa"),r=z("SZbK"),p=z("B3DA");function m(E){var j=E.chart,y=E.options,n=y.percent,s=y.progressStyle,d=y.color,M=y.barWidthRatio;j.data(Object(p.a)(n));var S=Object(a.b)({},E,{options:{xField:"1",yField:"percent",seriesField:"type",isStack:!0,widthRatio:M,interval:{style:s,color:Object(at.isString)(d)?[d,r.a[1]]:d}}});return Object(e.c)(S),j.tooltip(!1),j.axis(!1),j.legend(!1),E}function O(E){var j=E.chart;return j.coordinate("rect").transpose(),E}function l(E){return Object(a.e)(m,Object(A.f)({}),O,A.a,A.j,Object(A.b)())(E)}},u9VJ:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return p});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("sqD9"),r=z("DMQx"),p=function(m){Object(at.b)(O,m);function O(){var l=m!==null&&m.apply(this,arguments)||this;return l.type="column",l}return O.prototype.changeData=function(l){this.updateOption({data:l});var E=this.options,j=E.yField,y=E.xField,n=E.isPercent;this.chart.changeData(Object(e.a)(l,j,y,j,n))},O.prototype.getDefaultOptions=function(){return Object(A.b)({},m.prototype.getDefaultOptions.call(this),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]})},O.prototype.getSchemaAdaptor=function(){return r.a},O}(a.a)},uCX8:function(zn,Ut,z){"use strict";z.r(Ut),z.d(Ut,"Line",function(){return E}),z.d(Ut,"Text",function(){return y}),z.d(Ut,"Arc",function(){return s}),z.d(Ut,"Region",function(){return M}),z.d(Ut,"Image",function(){return T}),z.d(Ut,"DataMarker",function(){return x}),z.d(Ut,"DataRegion",function(){return N}),z.d(Ut,"RegionFilter",function(){return tt}),z.d(Ut,"Shape",function(){return pt}),z.d(Ut,"Html",function(){return xt});var at=z("mrSG"),a=z("iTfj"),A=z("MeYt"),e=z("BgvD"),r=z("jqgP"),p=z("5UbV");function m(lt,Vt){var Lt=Vt.x,Et=Vt.y,J=Vt.content,ht=Vt.style,vt=Vt.id,bt=Vt.name,At=Vt.rotate,q=Vt.maxLength,ct=Vt.autoEllipsis,ot=Vt.isVertical,_=Vt.ellipsisPosition,P=Vt.background,Y=lt.addGroup({id:vt+"-group",name:bt+"-group",attrs:{x:Lt,y:Et}}),k=Y.addShape({type:"text",id:vt,name:bt,attrs:Object(at.a)({x:0,y:0,text:J},ht)}),h=Object(p.c)(Object(a.get)(P,"padding",0));if(q&&ct){var g=q-(h[1]+h[3]);Object(e.a)(!ot,k,g,_)}if(P){var F=Object(a.get)(P,"style",{}),V=k.getCanvasBBox(),H=V.minX,et=V.minY,nt=V.width,St=V.height,dt=Y.addShape("rect",{id:vt+"-bg",name:vt+"-bg",attrs:Object(at.a)({x:H-h[3],y:et-h[0],width:nt+h[1]+h[3],height:St+h[0]+h[2]},F)});dt.toBack()}Object(r.c)(Y,Lt,Et),Object(r.b)(Y,At,Lt,Et)}var O=z("L16w"),l=function(lt){Object(at.b)(Vt,lt);function Vt(){return lt!==null&&lt.apply(this,arguments)||this}return Vt.prototype.getDefaultCfg=function(){var Lt=lt.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},Lt),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:O.a.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:O.a.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:O.a.lineColor,lineWidth:1}}}})},Vt.prototype.renderInner=function(Lt){this.renderLine(Lt),this.get("text")&&this.renderLabel(Lt)},Vt.prototype.renderLine=function(Lt){var Et=this.get("start"),J=this.get("end"),ht=this.get("style");this.addShape(Lt,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:Object(at.a)({x1:Et.x,y1:Et.y,x2:J.x,y2:J.y},ht)})},Vt.prototype.getLabelPoint=function(Lt,Et,J){var ht;return J==="start"?ht=0:J==="center"?ht=.5:Object(a.isString)(J)&&J.indexOf("%")!==-1?ht=parseInt(J,10)/100:Object(a.isNumber)(J)?ht=J:ht=1,(ht>1||ht<0)&&(ht=1),{x:Object(p.g)(Lt.x,Et.x,ht),y:Object(p.g)(Lt.y,Et.y,ht)}},Vt.prototype.renderLabel=function(Lt){var Et=this.get("text"),J=this.get("start"),ht=this.get("end"),vt=Et.position,bt=Et.content,At=Et.style,q=Et.offsetX,ct=Et.offsetY,ot=Et.autoRotate,_=Et.maxLength,P=Et.autoEllipsis,Y=Et.ellipsisPosition,k=Et.background,h=Et.isVertical,g=h===void 0?!1:h,F=this.getLabelPoint(J,ht,vt),V=F.x+q,H=F.y+ct,et={id:this.getElementId("line-text"),name:"annotation-line-text",x:V,y:H,content:bt,style:At,maxLength:_,autoEllipsis:P,ellipsisPosition:Y,background:k,isVertical:g};if(ot){var nt=[ht.x-J.x,ht.y-J.y];et.rotate=Math.atan2(nt[1],nt[0])}m(Lt,et)},Vt}(A.a),E=l,j=function(lt){Object(at.b)(Vt,lt);function Vt(){return lt!==null&&lt.apply(this,arguments)||this}return Vt.prototype.getDefaultCfg=function(){var Lt=lt.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},Lt),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:O.a.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:O.a.fontFamily}}})},Vt.prototype.setLocation=function(Lt){this.set("x",Lt.x),this.set("y",Lt.y),this.resetLocation()},Vt.prototype.renderInner=function(Lt){var Et=this.getLocation(),J=Et.x,ht=Et.y,vt=this.get("content"),bt=this.get("style"),At=this.getElementId("text"),q=this.get("name")+"-text",ct=this.get("maxLength"),ot=this.get("autoEllipsis"),_=this.get("isVertical"),P=this.get("ellipsisPosition"),Y=this.get("background"),k=this.get("rotate"),h={id:At,name:q,x:J,y:ht,content:vt,style:bt,maxLength:ct,autoEllipsis:ot,isVertical:_,ellipsisPosition:P,background:Y,rotate:k};m(Lt,h)},Vt.prototype.resetLocation=function(){var Lt=this.getElementByLocalId("text-group");if(Lt){var Et=this.getLocation(),J=Et.x,ht=Et.y,vt=this.get("rotate");Object(r.c)(Lt,J,ht),Object(r.b)(Lt,vt,J,ht)}},Vt}(A.a),y=j,n=function(lt){Object(at.b)(Vt,lt);function Vt(){return lt!==null&&lt.apply(this,arguments)||this}return Vt.prototype.getDefaultCfg=function(){var Lt=lt.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},Lt),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,style:{stroke:"#999",lineWidth:1}})},Vt.prototype.renderInner=function(Lt){this.renderArc(Lt)},Vt.prototype.getArcPath=function(){var Lt=this.getLocation(),Et=Lt.center,J=Lt.radius,ht=Lt.startAngle,vt=Lt.endAngle,bt=Object(p.e)(Et,J,ht),At=Object(p.e)(Et,J,vt),q=vt-ht>Math.PI?1:0,ct=[["M",bt.x,bt.y]];if(vt-ht==Math.PI*2){var ot=Object(p.e)(Et,J,ht+Math.PI);ct.push(["A",J,J,0,q,1,ot.x,ot.y]),ct.push(["A",J,J,0,q,1,At.x,At.y])}else ct.push(["A",J,J,0,q,1,At.x,At.y]);return ct},Vt.prototype.renderArc=function(Lt){var Et=this.getArcPath(),J=this.get("style");this.addShape(Lt,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:Object(at.a)({path:Et},J)})},Vt}(A.a),s=n,d=function(lt){Object(at.b)(Vt,lt);function Vt(){return lt!==null&&lt.apply(this,arguments)||this}return Vt.prototype.getDefaultCfg=function(){var Lt=lt.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},Lt),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:O.a.regionColor,opacity:.4}}})},Vt.prototype.renderInner=function(Lt){this.renderRegion(Lt)},Vt.prototype.renderRegion=function(Lt){var Et=this.get("start"),J=this.get("end"),ht=this.get("style"),vt=Object(p.k)({start:Et,end:J});this.addShape(Lt,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:Object(at.a)({x:vt.x,y:vt.y,width:vt.width,height:vt.height},ht)})},Vt}(A.a),M=d,S=function(lt){Object(at.b)(Vt,lt);function Vt(){return lt!==null&&lt.apply(this,arguments)||this}return Vt.prototype.getDefaultCfg=function(){var Lt=lt.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},Lt),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},Vt.prototype.renderInner=function(Lt){this.renderImage(Lt)},Vt.prototype.getImageAttrs=function(){var Lt=this.get("start"),Et=this.get("end"),J=this.get("style"),ht=Object(p.k)({start:Lt,end:Et}),vt=this.get("src");return Object(at.a)({x:ht.x,y:ht.y,img:vt,width:ht.width,height:ht.height},J)},Vt.prototype.renderImage=function(Lt){this.addShape(Lt,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},Vt}(A.a),T=S,v=function(lt){Object(at.b)(Vt,lt);function Vt(){return lt!==null&&lt.apply(this,arguments)||this}return Vt.prototype.getDefaultCfg=function(){var Lt=lt.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},Lt),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:O.a.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:O.a.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:O.a.fontFamily}}}})},Vt.prototype.renderInner=function(Lt){Object(a.get)(this.get("line"),"display")&&this.renderLine(Lt),Object(a.get)(this.get("text"),"display")&&this.renderText(Lt),Object(a.get)(this.get("point"),"display")&&this.renderPoint(Lt),this.get("autoAdjust")&&this.autoAdjust(Lt)},Vt.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},Vt.prototype.renderPoint=function(Lt){var Et=this.getShapeAttrs().point;this.addShape(Lt,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:Et})},Vt.prototype.renderLine=function(Lt){var Et=this.getShapeAttrs().line;this.addShape(Lt,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:Et})},Vt.prototype.renderText=function(Lt){var Et=this.getShapeAttrs().text,J=Et.x,ht=Et.y,vt=Et.text,bt=Object(at.c)(Et,["x","y","text"]),At=this.get("text"),q=At.background,ct=At.maxLength,ot=At.autoEllipsis,_=At.isVertival,P=At.ellipsisPosition,Y={x:J,y:ht,id:this.getElementId("text"),name:"annotation-text",content:vt,style:bt,background:q,maxLength:ct,autoEllipsis:ot,isVertival:_,ellipsisPosition:P};m(Lt,Y)},Vt.prototype.autoAdjust=function(Lt){var Et=this.get("direction"),J=this.get("x"),ht=this.get("y"),vt=Object(a.get)(this.get("line"),"length",0),bt=this.get("coordinateBBox"),At=Lt.getBBox(),q=At.minX,ct=At.maxX,ot=At.minY,_=At.maxY,P=Lt.findById(this.getElementId("text-group")),Y=Lt.findById(this.getElementId("text")),k=Lt.findById(this.getElementId("line"));if(!!bt){if(P){if(J+q<=bt.minX){var h=bt.minX-(J+q);Object(r.c)(P,P.attr("x")+h,P.attr("y"))}if(J+ct>=bt.maxX){var h=J+ct-bt.maxX;Object(r.c)(P,P.attr("x")-h,P.attr("y"))}}if(Et==="upward"&&ht+ot<=bt.minY||Et!=="upward"&&ht+_>=bt.maxY){var g=void 0,F=void 0;Et==="upward"&&ht+ot<=bt.minY?(g="top",F=1):(g="bottom",F=-1),Y.attr("textBaseline",g),k&&k.attr("path",[["M",0,0],["L",0,vt*F]]),Object(r.c)(P,P.attr("x"),(vt+2)*F)}}},Vt.prototype.getShapeAttrs=function(){var Lt=Object(a.get)(this.get("line"),"display"),Et=Object(a.get)(this.get("point"),"style",{}),J=Object(a.get)(this.get("line"),"style",{}),ht=Object(a.get)(this.get("text"),"style",{}),vt=this.get("direction"),bt=Lt?Object(a.get)(this.get("line"),"length",0):0,At=vt==="upward"?-1:1;return{point:Object(at.a)({x:0,y:0},Et),line:Object(at.a)({path:[["M",0,0],["L",0,bt*At]]},J),text:Object(at.a)({x:0,y:(bt+2)*At,text:Object(a.get)(this.get("text"),"content",""),textBaseline:vt==="upward"?"bottom":"top"},ht)}},Vt}(A.a),x=v,C=function(lt){Object(at.b)(Vt,lt);function Vt(){return lt!==null&&lt.apply(this,arguments)||this}return Vt.prototype.getDefaultCfg=function(){var Lt=lt.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},Lt),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:O.a.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:O.a.textColor,fontFamily:O.a.fontFamily}}}})},Vt.prototype.renderInner=function(Lt){var Et=Object(a.get)(this.get("region"),"style",{}),J=Object(a.get)(this.get("text"),"style",{}),ht=this.get("lineLength")||0,vt=this.get("points");if(!!vt.length){var bt=Object(p.j)(vt),At=[];At.push(["M",vt[0].x,bt.minY-ht]),vt.forEach(function(ct){At.push(["L",ct.x,ct.y])}),At.push(["L",vt[vt.length-1].x,vt[vt.length-1].y-ht]),this.addShape(Lt,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:Object(at.a)({path:At},Et)});var q=Object(at.a)({id:this.getElementId("text"),name:"annotation-text",x:(bt.minX+bt.maxX)/2,y:bt.minY-ht},this.get("text"));m(Lt,q)}},Vt}(A.a),N=C,X=function(lt){Object(at.b)(Vt,lt);function Vt(){return lt!==null&&lt.apply(this,arguments)||this}return Vt.prototype.getDefaultCfg=function(){var Lt=lt.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},Lt),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},Vt.prototype.renderInner=function(Lt){var Et=this,J=this.get("start"),ht=this.get("end"),vt=this.addGroup(Lt,{id:this.getElementId("region-filter"),capture:!1});Object(a.each)(this.get("shapes"),function(At,q){var ct=At.get("type"),ot=Object(a.clone)(At.attr());Et.adjustShapeAttrs(ot),Et.addShape(vt,{id:Et.getElementId("shape-"+ct+"-"+q),capture:!1,type:ct,attrs:ot})});var bt=Object(p.k)({start:J,end:ht});vt.setClip({type:"rect",attrs:{x:bt.minX,y:bt.minY,width:bt.width,height:bt.height}})},Vt.prototype.adjustShapeAttrs=function(Lt){var Et=this.get("color");Lt.fill&&(Lt.fill=Lt.fillStyle=Et),Lt.stroke=Lt.strokeStyle=Et},Vt}(A.a),tt=X,it=function(lt){Object(at.b)(Vt,lt);function Vt(){return lt!==null&&lt.apply(this,arguments)||this}return Vt.prototype.getDefaultCfg=function(){var Lt=lt.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},Lt),{name:"annotation",type:"shape",draw:a.noop})},Vt.prototype.renderInner=function(Lt){var Et=this.get("render");Object(a.isFunction)(Et)&&Et(Lt)},Vt}(A.a),pt=it,ft=z("fIp6"),Ot=z("de35"),wt=function(lt){Object(at.b)(Vt,lt);function Vt(){return lt!==null&&lt.apply(this,arguments)||this}return Vt.prototype.getDefaultCfg=function(){var Lt=lt.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},Lt),{name:"annotation",type:"html",locationType:"point",x:0,y:0,containerTpl:'<div class="g2-html-annotation"></div>',alignX:"left",alignY:"top",html:"",zIndex:7})},Vt.prototype.render=function(){var Lt=this.getContainer(),Et=this.get("html");Object(p.a)(Lt);var J=Object(a.isFunction)(Et)?Et(Lt):Et;Object(a.isElement)(J)?Lt.appendChild(J):Object(a.isString)(J)&&Lt.appendChild(Object(ft.b)(J)),this.resetPosition()},Vt.prototype.resetPosition=function(){var Lt=this.getContainer(),Et=this.getLocation(),J=Et.x,ht=Et.y,vt=this.get("alignX"),bt=this.get("alignY"),At=this.get("offsetX"),q=this.get("offsetY"),ct=Object(ft.d)(Lt),ot=Object(ft.c)(Lt),_={x:J,y:ht};vt==="middle"?_.x-=Math.round(ct/2):vt==="right"&&(_.x-=Math.round(ct)),bt==="middle"?_.y-=Math.round(ot/2):bt==="bottom"&&(_.y-=Math.round(ot)),At&&(_.x+=At),q&&(_.y+=q),Object(ft.e)(Lt,{position:"absolute",left:_.x+"px",top:_.y+"px",zIndex:this.get("zIndex")})},Vt}(Ot.a),xt=wt},uFwe:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return a});var at=z("BsWD");function a(A,e){var r;if(typeof Symbol=="undefined"||A[Symbol.iterator]==null){if(Array.isArray(A)||(r=Object(at.a)(A))||e&&A&&typeof A.length=="number"){r&&(A=r);var p=0,m=function(){};return{s:m,n:function(){return p>=A.length?{done:!0}:{done:!1,value:A[p++]}},e:function(y){throw y},f:m}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var O=!0,l=!1,E;return{s:function(){r=A[Symbol.iterator]()},n:function(){var y=r.next();return O=y.done,y},e:function(y){l=!0,E=y},f:function(){try{!O&&r.return!=null&&r.return()}finally{if(l)throw E}}}}},"uw/B":function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return n});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("sqD9"),r=z("iTfj"),p=z("w02o"),m=z("tKoa"),O=z("hJqF");function l(s){var d=s.chart,M=s.options,S=M.data,T=M.areaStyle,v=M.color,x=M.point,C=M.line,N=M.isPercent,X=M.xField,tt=M.yField,it=M.tooltip,pt=M.seriesField,ft=Object(e.a)(S,tt,X,tt,N);d.data(ft);var Ot=N?Object(at.a)({formatter:function(Vt){return{name:Vt[pt]||Vt[X],value:(Number(Vt[tt])*100).toFixed(2)+"%"}}},it):it,wt=Object(A.b)({},s,{options:{area:{color:v,style:T},line:C&&Object(at.a)({color:v},C),point:x&&Object(at.a)({color:v},x),tooltip:Ot,label:void 0}}),xt=Object(A.b)({},wt,{options:{tooltip:!1}});return Object(m.a)(wt),Object(m.d)(xt),Object(m.e)(xt),s}function E(s){var d=s.chart,M=s.options,S=M.label,T=M.yField,v=Object(A.c)(d,"area");if(!S)v.label(!1);else{var x=S.callback,C=Object(at.c)(S,["callback"]);v.label({fields:[T],callback:x,cfg:Object(at.a)({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Object(A.o)(C))})}return s}function j(s){var d=s.chart,M=s.options,S=M.isStack,T=M.isPercent;return(T||S)&&Object(r.each)(d.geometries,function(v){v.adjust("stack")}),s}function y(s){return Object(A.e)(l,O.d,j,p.j,O.b,O.c,p.k,E,p.h,Object(p.b)(),p.c,p.a,p.e)(s)}var n=function(s){Object(at.b)(d,s);function d(){var M=s!==null&&s.apply(this,arguments)||this;return M.type="area",M}return d.prototype.getDefaultOptions=function(){return Object(A.b)({},s.prototype.getDefaultOptions.call(this),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left"}})},d.prototype.changeData=function(M){this.updateOption({data:M});var S=this.options,T=S.isPercent,v=S.xField,x=S.yField;this.chart.changeData(Object(e.a)(M,x,v,x,T))},d.prototype.getSchemaAdaptor=function(){return y},d}(a.a)},uzHj:function(zn,Ut){},v7Ed:function(zn,Ut,z){"use strict";z.r(Ut),z.d(Ut,"version",function(){return p});var at=z("aN7R");z.d(Ut,"Shape",function(){return at});var a=z("aFU3");for(var A in a)["default","Canvas","Group","Shape","version"].indexOf(A)<0&&function(m){z.d(Ut,m,function(){return a[m]})}(A);var e=z("wClo");z.d(Ut,"Canvas",function(){return e.a});var r=z("5z4m");z.d(Ut,"Group",function(){return r.a});var p="0.5.6"},vIgC:function(zn,Ut,z){"use strict";z.d(Ut,"b",function(){return A}),z.d(Ut,"c",function(){return r}),z.d(Ut,"a",function(){return p});var at=z("sstZ"),a=z("lt7v");function A(m,O,l){var E=1;if(Object(at.h)(m)&&(E=m.split(`
`).length),E>1){var j=e(O,l);return O*E+j*(E-1)}return O}function e(m,O){return O?O-m:m*.14}function r(m,O){var l=Object(a.a)(),E=0;if(Object(at.e)(m)||m==="")return E;if(l.save(),l.font=O,Object(at.h)(m)&&m.includes(`
`)){var j=m.split(`
`);Object(at.a)(j,function(y){var n=l.measureText(y).width;E<n&&(E=n)})}else E=l.measureText(m).width;return l.restore(),E}function p(m){var O=m.fontSize,l=m.fontFamily,E=m.fontWeight,j=m.fontStyle,y=m.fontVariant;return[j,y,E,O+"px",l].join(" ").trim()}},vk7d:function(zn,Ut){},w02o:function(zn,Ut,z){"use strict";z.d(Ut,"d",function(){return r}),z.d(Ut,"k",function(){return p}),z.d(Ut,"c",function(){return m}),z.d(Ut,"a",function(){return O}),z.d(Ut,"j",function(){return l}),z.d(Ut,"i",function(){return E}),z.d(Ut,"h",function(){return j}),z.d(Ut,"g",function(){return y}),z.d(Ut,"f",function(){return n}),z.d(Ut,"b",function(){return s}),z.d(Ut,"e",function(){return d});var at=z("mrSG"),a=z("iTfj"),A=z("n/J0"),e=z("YuPD");function r(M){var S=M.chart,T=M.options,v=T.legend,x=T.colorField,C=T.seriesField;return v===!1?S.legend(!1):(x||C)&&S.legend(x||C,v),M}function p(M){var S=M.chart,T=M.options,v=T.tooltip;return v!==void 0&&S.tooltip(v),M}function m(M){var S=M.chart,T=M.options,v=T.interactions;return Object(a.each)(v,function(x){x.enable===!1?S.removeInteraction(x.type):S.interaction(x.type,x.cfg||{})}),M}function O(M){var S=M.chart,T=M.options,v=T.animation;return typeof v=="boolean"?S.animate(v):S.animate(!0),Object(a.each)(S.geometries,function(x){x.animate(v)}),M}function l(M){var S=M.chart,T=M.options,v=T.theme;return v&&S.theme(v),M}function E(M){var S=M.chart,T=M.options,v=T.state;return v&&Object(a.each)(S.geometries,function(x){x.state(v)}),M}function j(M){var S=M.chart,T=M.options,v=T.slider;return S.option("slider",v),M}function y(M){var S=M.chart,T=M.options,v=T.scrollbar;return S.option("scrollbar",v),M}function n(M,S){return function(T){var v=T.chart,x=T.options,C={};return Object(a.each)(M,function(N,X){C[X]=Object(e.k)(N,A.a)}),C=Object(e.b)({},S,x.meta,C),v.scale(C),T}}function s(M){return function(S){var T=S.chart,v=S.options,x=T.getController("annotation");return Object(a.each)(Object(at.d)(v.annotations||[],M||[]),function(C){x.annotation(C)}),S}}function d(M){var S=M.chart,T=M.options,v=T.yAxis,x=T.limitInPlot,C=x;return Object(a.isObject)(v)&&Object(a.isNil)(x)&&(Object.values(Object(e.k)(v,["min","max","minLimit","maxLimit"])).some(function(N){return!Object(a.isNil)(N)})?C=!0:C=!1),S.limitInPlot=C,M}},wClo:function(zn,Ut,z){"use strict";var at=z("mrSG"),a=z("aFU3"),A=z("IvmH"),e=z("c0lT"),r=z("APlK"),p=z("c+wO"),m=z("aN7R"),O=z("5z4m"),l=z("iTfj"),E=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,j=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,y=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function n(Lt){var Et=Lt.match(y);if(!Et)return"";var J="";return Et.sort(function(ht,vt){return ht=ht.split(":"),vt=vt.split(":"),Number(ht[0])-Number(vt[0])}),Object(l.each)(Et,function(ht){ht=ht.split(":"),J+='<stop offset="'+ht[0]+'" stop-color="'+ht[1]+'"></stop>'}),J}function s(Lt,Et){var J=E.exec(Lt),ht=Object(l.mod)(Object(l.toRadian)(parseFloat(J[1])),Math.PI*2),vt=J[2],bt,At;ht>=0&&ht<.5*Math.PI?(bt={x:0,y:0},At={x:1,y:1}):.5*Math.PI<=ht&&ht<Math.PI?(bt={x:1,y:0},At={x:0,y:1}):Math.PI<=ht&&ht<1.5*Math.PI?(bt={x:1,y:1},At={x:0,y:0}):(bt={x:0,y:1},At={x:1,y:0});var q=Math.tan(ht),ct=q*q,ot=(At.x-bt.x+q*(At.y-bt.y))/(ct+1)+bt.x,_=q*(At.x-bt.x+q*(At.y-bt.y))/(ct+1)+bt.y;Et.setAttribute("x1",bt.x),Et.setAttribute("y1",bt.y),Et.setAttribute("x2",ot),Et.setAttribute("y2",_),Et.innerHTML=n(vt)}function d(Lt,Et){var J=j.exec(Lt),ht=parseFloat(J[1]),vt=parseFloat(J[2]),bt=parseFloat(J[3]),At=J[4];Et.setAttribute("cx",ht),Et.setAttribute("cy",vt),Et.setAttribute("r",bt),Et.innerHTML=n(At)}var M=function(){function Lt(Et){this.cfg={};var J=null,ht=Object(l.uniqueId)("gradient_");return Et.toLowerCase()[0]==="l"?(J=Object(p.b)("linearGradient"),s(Et,J)):(J=Object(p.b)("radialGradient"),d(Et,J)),J.setAttribute("id",ht),this.el=J,this.id=ht,this.cfg=Et,this}return Lt.prototype.match=function(Et,J){return this.cfg===J},Lt}(),S=M,T={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},v={x:"-40%",y:"-40%",width:"200%",height:"200%"},x=function(){function Lt(Et){this.type="filter",this.cfg={},this.type="filter";var J=Object(p.b)("filter");return Object(l.each)(v,function(ht,vt){J.setAttribute(vt,ht)}),this.el=J,this.id=Object(l.uniqueId)("filter_"),this.el.id=this.id,this.cfg=Et,this._parseShadow(Et,J),this}return Lt.prototype.match=function(Et,J){if(this.type!==Et)return!1;var ht=!0,vt=this.cfg;return Object(l.each)(Object.keys(vt),function(bt){if(vt[bt]!==J[bt])return ht=!1,!1}),ht},Lt.prototype.update=function(Et,J){var ht=this.cfg;return ht[T[Et]]=J,this._parseShadow(ht,this.el),this},Lt.prototype._parseShadow=function(Et,J){var ht=`<feDropShadow
      dx="`+(Et.dx||0)+`"
      dy="`+(Et.dy||0)+`"
      stdDeviation="`+(Et.blur?Et.blur/10:0)+`"
      flood-color="`+(Et.color?Et.color:"#000")+`"
      flood-opacity="`+(Et.opacity?Et.opacity:1)+`"
      />`;J.innerHTML=ht},Lt}(),C=x,N=function(){function Lt(Et,J){this.cfg={};var ht=Object(p.b)("marker"),vt=Object(l.uniqueId)("marker_");ht.setAttribute("id",vt);var bt=Object(p.b)("path");bt.setAttribute("stroke",Et.stroke||"none"),bt.setAttribute("fill",Et.fill||"none"),ht.appendChild(bt),ht.setAttribute("overflow","visible"),ht.setAttribute("orient","auto-start-reverse"),this.el=ht,this.child=bt,this.id=vt;var At=Et[J==="marker-start"?"startArrow":"endArrow"];return this.stroke=Et.stroke||"#000",At===!0?this._setDefaultPath(J,bt):(this.cfg=At,this._setMarker(Et.lineWidth,bt)),this}return Lt.prototype.match=function(){return!1},Lt.prototype._setDefaultPath=function(Et,J){var ht=this.el;J.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),ht.setAttribute("refX",""+10*Math.cos(Math.PI/6)),ht.setAttribute("refY",""+5)},Lt.prototype._setMarker=function(Et,J){var ht=this.el,vt=this.cfg.path,bt=this.cfg.d;Object(l.isArray)(vt)&&(vt=vt.map(function(At){return At.join(" ")}).join("")),J.setAttribute("d",vt),ht.appendChild(J),bt&&ht.setAttribute("refX",""+bt/Et)},Lt.prototype.update=function(Et){var J=this.child;J.attr?J.attr("fill",Et):J.setAttribute("fill",Et)},Lt}(),X=N,tt=function(){function Lt(Et){this.type="clip",this.cfg={};var J=Object(p.b)("clipPath");this.el=J,this.id=Object(l.uniqueId)("clip_"),J.id=this.id;var ht=Et.cfg.el;return J.appendChild(ht),this.cfg=Et,this}return Lt.prototype.match=function(){return!1},Lt.prototype.remove=function(){var Et=this.el;Et.parentNode.removeChild(Et)},Lt}(),it=tt,pt=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,ft=function(){function Lt(Et){this.cfg={};var J=Object(p.b)("pattern");J.setAttribute("patternUnits","userSpaceOnUse");var ht=Object(p.b)("image");J.appendChild(ht);var vt=Object(l.uniqueId)("pattern_");J.id=vt,this.el=J,this.id=vt,this.cfg=Et;var bt=pt.exec(Et),At=bt[2];ht.setAttribute("href",At);var q=new Image;At.match(/^data:/i)||(q.crossOrigin="Anonymous"),q.src=At;function ct(){J.setAttribute("width",""+q.width),J.setAttribute("height",""+q.height)}return q.complete?ct():(q.onload=ct,q.src=q.src),this}return Lt.prototype.match=function(Et,J){return this.cfg===J},Lt}(),Ot=ft,wt=function(){function Lt(Et){var J=Object(p.b)("defs"),ht=Object(l.uniqueId)("defs_");J.id=ht,Et.appendChild(J),this.children=[],this.defaultArrow={},this.el=J,this.canvas=Et}return Lt.prototype.find=function(Et,J){for(var ht=this.children,vt=null,bt=0;bt<ht.length;bt++)if(ht[bt].match(Et,J)){vt=ht[bt].id;break}return vt},Lt.prototype.findById=function(Et){for(var J=this.children,ht=null,vt=0;vt<J.length;vt++)if(J[vt].id===Et){ht=J[vt];break}return ht},Lt.prototype.add=function(Et){this.children.push(Et),Et.canvas=this.canvas,Et.parent=this},Lt.prototype.getDefaultArrow=function(Et,J){var ht=Et.stroke||Et.strokeStyle;if(this.defaultArrow[ht])return this.defaultArrow[ht].id;var vt=new X(Et,J);return this.defaultArrow[ht]=vt,this.el.appendChild(vt.el),this.add(vt),vt.id},Lt.prototype.addGradient=function(Et){var J=new S(Et);return this.el.appendChild(J.el),this.add(J),J.id},Lt.prototype.addArrow=function(Et,J){var ht=new X(Et,J);return this.el.appendChild(ht.el),this.add(ht),ht.id},Lt.prototype.addShadow=function(Et){var J=new C(Et);return this.el.appendChild(J.el),this.add(J),J.id},Lt.prototype.addPattern=function(Et){var J=new Ot(Et);return this.el.appendChild(J.el),this.add(J),J.id},Lt.prototype.addClip=function(Et){var J=new it(Et);return this.el.appendChild(J.el),this.add(J),J.id},Lt}(),xt=wt,lt=function(Lt){Object(at.b)(Et,Lt);function Et(J){return Lt.call(this,Object(at.a)(Object(at.a)({},J),{autoDraw:!0,renderer:"svg"}))||this}return Et.prototype.getShapeBase=function(){return m},Et.prototype.getGroupBase=function(){return O.a},Et.prototype.getShape=function(J,ht,vt){var bt=vt.target||vt.srcElement;if(!A.a[bt.tagName]){for(var At=bt.parentNode;At&&!A.a[At.tagName];)At=At.parentNode;bt=At}return this.find(function(q){return q.get("el")===bt})},Et.prototype.createDom=function(){var J=Object(p.b)("svg"),ht=new xt(J);return J.setAttribute("width",""+this.get("width")),J.setAttribute("height",""+this.get("height")),this.set("context",ht),J},Et.prototype.onCanvasChange=function(J){var ht=this.get("context"),vt=this.get("el");if(J==="sort"){var bt=this.get("children");bt&&bt.length&&Object(p.d)(this,function(q,ct){return bt.indexOf(q)-bt.indexOf(ct)?1:0})}else if(J==="clear"){if(vt){vt.innerHTML="";var At=ht.el;At.innerHTML="",vt.appendChild(At)}}else J==="matrix"?Object(r.c)(this):J==="clip"?Object(r.a)(this,ht):J==="changeSize"&&(vt.setAttribute("width",""+this.get("width")),vt.setAttribute("height",""+this.get("height")))},Et.prototype.draw=function(){var J=this.get("context"),ht=this.getChildren();Object(r.a)(this,J),ht.length&&Object(e.a)(J,ht)},Et}(a.AbstractCanvas),Vt=Ut.a=lt},wHeE:function(zn,Ut,z){"use strict";z.r(Ut);var at=z("IzEo"),a=z("bx4M"),A=z("14J3"),e=z("BMrR"),r=z("nKUr"),p=z("VTBJ"),m=z("jCWc"),O=z("kPKH"),l=z("q1tI"),E=z("tMyG"),j=z("CmcY"),y=z("06Lf"),n=z("MXD1"),s=z("CFYs"),d=function(){var v=[{type:"\u5BB6\u5177\u5BB6\u7535",sales:38},{type:"\u7CAE\u6CB9\u526F\u98DF",sales:52},{type:"\u751F\u9C9C\u6C34\u679C",sales:61},{type:"\u7F8E\u5BB9\u6D17\u62A4",sales:145},{type:"\u6BCD\u5A74\u7528\u54C1",sales:48},{type:"\u8FDB\u53E3\u98DF\u54C1",sales:38},{type:"\u98DF\u54C1\u996E\u6599",sales:38},{type:"\u5BB6\u5EAD\u6E05\u6D01",sales:38}],x={data:v,xField:"type",yField:"sales",label:{position:"middle",style:{fill:"#FFFFFF",opacity:.6}},meta:{type:{alias:"\u7C7B\u522B"},sales:{alias:"\u9500\u552E\u989D"}}},C=[{name:"t1",time:16122732e5,value:317363.7306933478},{name:"t1",time:16122735e5,value:317373.87041066086}],N={data:C,height:300,xField:"time",yField:"value",point:{size:5,shape:"diamond"},xAxis:{type:"time",tickCount:5,mask:`YY-MM-DD 
 HH:mm`},seriesField:"name"};return Object(r.jsxs)(a.a,{title:"F1",children:[Object(r.jsxs)(e.a,{children:[Object(r.jsx)(O.a,{span:12,children:Object(r.jsx)(j.a,{title:"\u603B\u5E02\u503C",value:112893,precision:2,percent:10.55})}),Object(r.jsx)(O.a,{span:12,children:Object(r.jsx)(j.a,{title:"\u57FA\u91D1\u51C0\u503C",value:112893,precision:2,percent:-10.55})})]}),Object(r.jsx)(e.a,{children:Object(r.jsx)(O.a,{span:24,style:{height:"200px"},children:Object(r.jsx)(y.b,Object(p.a)({},N))})}),Object(r.jsxs)(e.a,{children:[Object(r.jsx)(O.a,{span:12,children:Object(r.jsx)(j.a,{title:"\u6760\u6746",value:112893,precision:2,percent:10.55})}),Object(r.jsxs)(O.a,{span:12,children:[Object(r.jsx)("p",{children:"\u6700\u5927\u6760\u6746\u7387"}),Object(r.jsx)(s.a,{percent:30})]})]}),Object(r.jsx)(e.a,{children:Object(r.jsx)(O.a,{span:24,style:{height:"200px"},children:Object(r.jsx)(y.a,Object(p.a)({},x))})})]})},M=function(){var v=[{name:"t1",time:16122732e5,value:317363.7306933478},{name:"t1",time:16122735e5,value:317373.87041066086}],x={data:v,height:400,xField:"time",yField:"value",point:{size:5,shape:"diamond"},xAxis:{type:"time",tickCount:5,mask:`YY-MM-DD 
 HH:mm`},legend:{position:"top"},seriesField:"name"};return Object(r.jsxs)(E.a,{children:[Object(r.jsx)(e.a,{gutter:[16,16],children:Object(r.jsx)(O.a,{span:24,children:Object(r.jsx)(a.a,{title:"\u6240\u6709\u57FA\u91D1",children:Object(r.jsxs)(e.a,{gutter:16,children:[Object(r.jsx)(O.a,{span:12,children:Object(r.jsx)(j.a,{title:"\u603B\u5E02\u503C",value:112893,precision:2,percent:10.55})}),Object(r.jsx)(O.a,{span:12,children:Object(r.jsx)(j.a,{title:"\u603B\u5E02\u503C",value:112893,percent:-10.55})}),Object(r.jsx)(O.a,{span:24,style:{height:"300px"},children:Object(r.jsx)(y.b,Object(p.a)({},x))})]})})})}),Object(r.jsxs)(e.a,{gutter:[16,16],children:[Object(r.jsx)(O.a,{sm:8,children:Object(r.jsx)(d,{})}),Object(r.jsx)(O.a,{sm:8,children:Object(r.jsx)(d,{})}),Object(r.jsx)(O.a,{sm:8,children:Object(r.jsx)(d,{})})]})]})},S=Ut.default=M},wq2r:function(zn,Ut,z){"use strict";var at=z("mrSG"),a=z("aFU3"),A=z("R5nb"),e=z("9eUa"),r=z("iTfj"),p=z("cyZq"),m=function(O){Object(at.b)(l,O);function l(){return O!==null&&O.apply(this,arguments)||this}return l.prototype.onCanvasChange=function(E){Object(e.h)(this,E)},l.prototype.getShapeBase=function(){return A},l.prototype.getGroupBase=function(){return l},l.prototype._applyClip=function(E,j){j&&(E.save(),Object(e.a)(E,j),j.createPath(E),E.restore(),E.clip(),j._afterDraw())},l.prototype.cacheCanvasBBox=function(){var E=this.cfg.children,j=[],y=[];Object(r.each)(E,function(x){var C=x.cfg.cacheCanvasBBox;C&&x.cfg.isInView&&(j.push(C.minX,C.maxX),y.push(C.minY,C.maxY))});var n=null;if(j.length){var s=Math.min.apply(null,j),d=Math.max.apply(null,j),M=Math.min.apply(null,y),S=Math.max.apply(null,y);n={minX:s,minY:M,x:s,y:M,maxX:d,maxY:S,width:d-s,height:S-M};var T=this.cfg.canvas;if(T){var v=T.getViewRange();this.set("isInView",Object(p.f)(n,v))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",n)},l.prototype.draw=function(E,j){var y=this.cfg.children,n=j?this.cfg.refresh:!0;y.length&&n&&(E.save(),Object(e.a)(E,this),this._applyClip(E,this.getClip()),Object(e.d)(E,y,j),E.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},l.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},l}(a.AbstractGroup);Ut.a=m},wy8a:function(zn,Ut,z){var at=z("KxBF");function a(A,e,r){var p=A.length;return r=r===void 0?p:r,!e&&r>=p?A:at(A,e,r)}zn.exports=a},x3EW:function(zn,Ut,z){"use strict";z.r(Ut),z.d(Ut,"Base",function(){return p}),z.d(Ut,"Circle",function(){return l}),z.d(Ut,"Line",function(){return j});var at=z("mrSG"),a=z("iTfj"),A=z("MeYt"),e=z("L16w"),r=function(y){Object(at.b)(n,y);function n(){return y!==null&&y.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var s=y.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},s),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:e.a.lineColor}}}})},n.prototype.getLineType=function(){var s=this.get("line")||this.get("defaultCfg").line;return s.type},n.prototype.renderInner=function(s){this.drawGrid(s)},n.prototype.getAlternatePath=function(s,d){var M=this.getGridPath(s),S=d.slice(0).reverse(),T=this.getGridPath(S,!0),v=this.get("closed");return v?M=M.concat(T):(T[0][0]="L",M=M.concat(T),M.push(["Z"])),M},n.prototype.getPathStyle=function(){return this.get("line").style},n.prototype.drawGrid=function(s){var d=this,M=this.get("line"),S=this.get("items"),T=this.get("alternateColor"),v=null;Object(a.each)(S,function(x,C){var N=x.id||C;if(M){var X=d.getPathStyle();X=Object(a.isFunction)(X)?X(x,C,S):X;var tt=d.getElementId("line-"+N),it=d.getGridPath(x.points);d.addShape(s,{type:"path",name:"grid-line",id:tt,attrs:Object(a.mix)({path:it},X)})}if(T&&C>0){var pt=d.getElementId("region-"+N),ft=C%2==0;if(Object(a.isString)(T))ft&&d.drawAlternateRegion(pt,s,v.points,x.points,T);else{var Ot=ft?T[1]:T[0];d.drawAlternateRegion(pt,s,v.points,x.points,Ot)}}v=x})},n.prototype.drawAlternateRegion=function(s,d,M,S,T){var v=this.getAlternatePath(M,S);this.addShape(d,{type:"path",id:s,name:"grid-region",attrs:{path:v,fill:T}})},n}(A.a),p=r;function m(y,n,s,d){var M=s-y,S=d-n;return Math.sqrt(M*M+S*S)}var O=function(y){Object(at.b)(n,y);function n(){return y!==null&&y.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var s=y.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},s),{type:"circle",center:null,closed:!0})},n.prototype.getGridPath=function(s,d){var M=this.getLineType(),S=this.get("closed"),T=[];if(s.length)if(M==="circle"){var v=this.get("center"),x=s[0],C=m(v.x,v.y,x.x,x.y),N=d?0:1;S?(T.push(["M",v.x,v.y-C]),T.push(["A",C,C,0,0,N,v.x,v.y+C]),T.push(["A",C,C,0,0,N,v.x,v.y-C]),T.push(["Z"])):Object(a.each)(s,function(X,tt){tt===0?T.push(["M",X.x,X.y]):T.push(["A",C,C,0,0,N,X.x,X.y])})}else Object(a.each)(s,function(X,tt){tt===0?T.push(["M",X.x,X.y]):T.push(["L",X.x,X.y])}),S&&T.push(["Z"]);return T},n}(p),l=O,E=function(y){Object(at.b)(n,y);function n(){return y!==null&&y.apply(this,arguments)||this}return n.prototype.getDefaultCfg=function(){var s=y.prototype.getDefaultCfg.call(this);return Object(at.a)(Object(at.a)({},s),{type:"line"})},n.prototype.getGridPath=function(s){var d=[];return Object(a.each)(s,function(M,S){S===0?d.push(["M",M.x,M.y]):d.push(["L",M.x,M.y])}),d},n}(p),j=E},y753:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return M});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("w02o"),r=z("tKoa");function p(S){var T=S.chart,v=S.options,x=v.data,C=v.lineStyle,N=v.color,X=v.point,tt=v.area;T.data(x);var it=Object(A.b)({},S,{options:{line:{style:C,color:N},point:X&&Object(at.a)({color:N},X),area:tt&&Object(at.a)({color:N},tt),label:void 0}}),pt=Object(A.b)({},it,{options:{tooltip:!1}});return Object(r.d)(it),Object(r.e)(pt),Object(r.a)(pt),S}function m(S){var T,v=S.options,x=v.xAxis,C=v.yAxis,N=v.xField,X=v.yField;return Object(A.e)(Object(e.f)((T={},T[N]=x,T[X]=C,T)))(S)}function O(S){var T=S.chart,v=S.options,x=v.radius;return T.coordinate("polar",{radius:x}),S}function l(S){var T=S.chart,v=S.options,x=v.xField,C=v.xAxis,N=v.yField,X=v.yAxis;return T.axis(x,C),T.axis(N,X),S}function E(S){var T=S.chart,v=S.options,x=v.label,C=v.yField,N=Object(A.c)(T,"line");if(!x)N.label(!1);else{var X=x.callback,tt=Object(at.c)(x,["callback"]);N.label({fields:[C],callback:X,cfg:Object(A.o)(tt)})}return S}function j(S){return Object(A.e)(p,m,e.j,O,l,e.d,e.k,E,e.c,e.a,Object(e.b)())(S)}var y=z("kXyF"),n=z("iTfj"),s=function(S){Object(at.b)(T,S);function T(){return S!==null&&S.apply(this,arguments)||this}return Object.defineProperty(T.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),T.prototype.getTooltipItems=function(v){var x=this.getTooltipCfg(),C=x.shared,N=x.title,X=S.prototype.getTooltipItems.call(this,v);if(X.length>0){var tt=this.view.geometries[0],it=tt.dataArray,pt=X[0].name,ft=[];return it.forEach(function(Ot){Ot.forEach(function(wt){var xt=y.Util.getTooltipItems(wt,tt),lt=xt[0];if(!C&&lt&&lt.name===pt){var Vt=Object(n.isNil)(N)?pt:N;ft.push(Object(at.a)(Object(at.a)({},lt),{name:lt.title,title:Vt}))}else if(C&&lt){var Vt=Object(n.isNil)(N)?lt.name||pt:N;ft.push(Object(at.a)(Object(at.a)({},lt),{name:lt.title,title:Vt}))}})}),ft}return[]},T}(y.TooltipController);Object(y.registerComponentController)("radar-tooltip",s);var d=function(S){Object(at.b)(T,S);function T(){return S!==null&&S.apply(this,arguments)||this}return T.prototype.init=function(){var v=this.context.view;v.removeInteraction("tooltip")},T.prototype.show=function(){var v=this.context.event,x=this.getTooltipController();x.showTooltip({x:v.x,y:v.y})},T.prototype.hide=function(){var v=this.getTooltipController();v.hideTooltip()},T.prototype.getTooltipController=function(){var v=this.context.view;return v.getController("radar-tooltip")},T}(y.Action);Object(y.registerAction)("radar-tooltip",d),Object(y.registerInteraction)("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]});var M=function(S){Object(at.b)(T,S);function T(){var v=S!==null&&S.apply(this,arguments)||this;return v.type="radar",v}return T.prototype.changeData=function(v){this.updateOption({data:v}),this.chart.changeData(v)},T.prototype.getDefaultOptions=function(){return Object(A.b)({},S.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},T.prototype.getSchemaAdaptor=function(){return j},T}(a.a)},yU0y:function(zn,Ut,z){"use strict";z.d(Ut,"b",function(){return at}),z.d(Ut,"a",function(){return a}),z.d(Ut,"c",function(){return A});var at=1e-6,a=typeof Float32Array!="undefined"?Float32Array:Array,A=Math.random;function e(O){a=O}var r=Math.PI/180;function p(O){return O*r}function m(O,l){return Math.abs(O-l)<=at*Math.max(1,Math.abs(O),Math.abs(l))}Math.hypot||(Math.hypot=function(){for(var O=0,l=arguments.length;l--;)O+=arguments[l]*arguments[l];return Math.sqrt(O)})},yUfG:function(zn,Ut,z){"use strict";z.r(Ut),z.d(Ut,"cluster",function(){return O}),z.d(Ut,"hierarchy",function(){return l.c}),z.d(Ut,"pack",function(){return xt}),z.d(Ut,"packSiblings",function(){return pt}),z.d(Ut,"packEnclose",function(){return y}),z.d(Ut,"partition",function(){return Et.a}),z.d(Ut,"stratify",function(){return At}),z.d(Ut,"tree",function(){return g}),z.d(Ut,"treemap",function(){return F.a}),z.d(Ut,"treemapBinary",function(){return V}),z.d(Ut,"treemapDice",function(){return H.a}),z.d(Ut,"treemapSlice",function(){return et.a}),z.d(Ut,"treemapSliceDice",function(){return nt}),z.d(Ut,"treemapSquarify",function(){return St.a}),z.d(Ut,"treemapResquarify",function(){return dt});function at(gt,yt){return gt.parent===yt.parent?1:2}function a(gt){return gt.reduce(A,0)/gt.length}function A(gt,yt){return gt+yt.x}function e(gt){return 1+gt.reduce(r,0)}function r(gt,yt){return Math.max(gt,yt.y)}function p(gt){for(var yt;yt=gt.children;)gt=yt[0];return gt}function m(gt){for(var yt;yt=gt.children;)gt=yt[yt.length-1];return gt}var O=function(){var gt=at,yt=1,Ct=1,Pt=!1;function Ft(Tt){var zt,Xt=0;Tt.eachAfter(function(De){var Ve=De.children;Ve?(De.x=a(Ve),De.y=e(Ve)):(De.x=zt?Xt+=gt(De,zt):0,De.y=0,zt=De)});var re=p(Tt),de=m(Tt),ye=re.x-gt(re,de)/2,we=de.x+gt(de,re)/2;return Tt.eachAfter(Pt?function(De){De.x=(De.x-Tt.x)*yt,De.y=(Tt.y-De.y)*Ct}:function(De){De.x=(De.x-ye)/(we-ye)*yt,De.y=(1-(Tt.y?De.y/Tt.y:1))*Ct})}return Ft.separation=function(Tt){return arguments.length?(gt=Tt,Ft):gt},Ft.size=function(Tt){return arguments.length?(Pt=!1,yt=+Tt[0],Ct=+Tt[1],Ft):Pt?null:[yt,Ct]},Ft.nodeSize=function(Tt){return arguments.length?(Pt=!0,yt=+Tt[0],Ct=+Tt[1],Ft):Pt?[yt,Ct]:null},Ft},l=z("a8tM"),E=function(gt){return typeof gt=="object"&&"length"in gt?gt:Array.from(gt)};function j(gt){for(var yt=gt.length,Ct,Pt;yt;)Pt=Math.random()*yt--|0,Ct=gt[yt],gt[yt]=gt[Pt],gt[Pt]=Ct;return gt}var y=function(gt){for(var yt=0,Ct=(gt=j(Array.from(gt))).length,Pt=[],Ft,Tt;yt<Ct;)Ft=gt[yt],Tt&&d(Tt,Ft)?++yt:(Tt=S(Pt=n(Pt,Ft)),yt=0);return Tt};function n(gt,yt){var Ct,Pt;if(M(yt,gt))return[yt];for(Ct=0;Ct<gt.length;++Ct)if(s(yt,gt[Ct])&&M(v(gt[Ct],yt),gt))return[gt[Ct],yt];for(Ct=0;Ct<gt.length-1;++Ct)for(Pt=Ct+1;Pt<gt.length;++Pt)if(s(v(gt[Ct],gt[Pt]),yt)&&s(v(gt[Ct],yt),gt[Pt])&&s(v(gt[Pt],yt),gt[Ct])&&M(x(gt[Ct],gt[Pt],yt),gt))return[gt[Ct],gt[Pt],yt];throw new Error}function s(gt,yt){var Ct=gt.r-yt.r,Pt=yt.x-gt.x,Ft=yt.y-gt.y;return Ct<0||Ct*Ct<Pt*Pt+Ft*Ft}function d(gt,yt){var Ct=gt.r-yt.r+Math.max(gt.r,yt.r,1)*1e-9,Pt=yt.x-gt.x,Ft=yt.y-gt.y;return Ct>0&&Ct*Ct>Pt*Pt+Ft*Ft}function M(gt,yt){for(var Ct=0;Ct<yt.length;++Ct)if(!d(gt,yt[Ct]))return!1;return!0}function S(gt){switch(gt.length){case 1:return T(gt[0]);case 2:return v(gt[0],gt[1]);case 3:return x(gt[0],gt[1],gt[2])}}function T(gt){return{x:gt.x,y:gt.y,r:gt.r}}function v(gt,yt){var Ct=gt.x,Pt=gt.y,Ft=gt.r,Tt=yt.x,zt=yt.y,Xt=yt.r,re=Tt-Ct,de=zt-Pt,ye=Xt-Ft,we=Math.sqrt(re*re+de*de);return{x:(Ct+Tt+re/we*ye)/2,y:(Pt+zt+de/we*ye)/2,r:(we+Ft+Xt)/2}}function x(gt,yt,Ct){var Pt=gt.x,Ft=gt.y,Tt=gt.r,zt=yt.x,Xt=yt.y,re=yt.r,de=Ct.x,ye=Ct.y,we=Ct.r,De=Pt-zt,Ve=Pt-de,pn=Ft-Xt,sn=Ft-ye,In=re-Tt,An=we-Tt,Rn=Pt*Pt+Ft*Ft-Tt*Tt,Mn=Rn-zt*zt-Xt*Xt+re*re,Cn=Rn-de*de-ye*ye+we*we,Gn=Ve*pn-De*sn,Xn=(pn*Cn-sn*Mn)/(Gn*2)-Pt,tr=(sn*In-pn*An)/Gn,or=(Ve*Mn-De*Cn)/(Gn*2)-Ft,nr=(De*An-Ve*In)/Gn,er=tr*tr+nr*nr-1,Sr=2*(Tt+Xn*tr+or*nr),Vr=Xn*Xn+or*or-Tt*Tt,ti=-(er?(Sr+Math.sqrt(Sr*Sr-4*er*Vr))/(2*er):Vr/Sr);return{x:Pt+Xn+tr*ti,y:Ft+or+nr*ti,r:ti}}function C(gt,yt,Ct){var Pt=gt.x-yt.x,Ft,Tt,zt=gt.y-yt.y,Xt,re,de=Pt*Pt+zt*zt;de?(Tt=yt.r+Ct.r,Tt*=Tt,re=gt.r+Ct.r,re*=re,Tt>re?(Ft=(de+re-Tt)/(2*de),Xt=Math.sqrt(Math.max(0,re/de-Ft*Ft)),Ct.x=gt.x-Ft*Pt-Xt*zt,Ct.y=gt.y-Ft*zt+Xt*Pt):(Ft=(de+Tt-re)/(2*de),Xt=Math.sqrt(Math.max(0,Tt/de-Ft*Ft)),Ct.x=yt.x+Ft*Pt-Xt*zt,Ct.y=yt.y+Ft*zt+Xt*Pt)):(Ct.x=yt.x+Ct.r,Ct.y=yt.y)}function N(gt,yt){var Ct=gt.r+yt.r-1e-6,Pt=yt.x-gt.x,Ft=yt.y-gt.y;return Ct>0&&Ct*Ct>Pt*Pt+Ft*Ft}function X(gt){var yt=gt._,Ct=gt.next._,Pt=yt.r+Ct.r,Ft=(yt.x*Ct.r+Ct.x*yt.r)/Pt,Tt=(yt.y*Ct.r+Ct.y*yt.r)/Pt;return Ft*Ft+Tt*Tt}function tt(gt){this._=gt,this.next=null,this.previous=null}function it(gt){if(!(Ft=(gt=E(gt)).length))return 0;var yt,Ct,Pt,Ft,Tt,zt,Xt,re,de,ye,we;if(yt=gt[0],yt.x=0,yt.y=0,!(Ft>1))return yt.r;if(Ct=gt[1],yt.x=-Ct.r,Ct.x=yt.r,Ct.y=0,!(Ft>2))return yt.r+Ct.r;C(Ct,yt,Pt=gt[2]),yt=new tt(yt),Ct=new tt(Ct),Pt=new tt(Pt),yt.next=Pt.previous=Ct,Ct.next=yt.previous=Pt,Pt.next=Ct.previous=yt;t:for(Xt=3;Xt<Ft;++Xt){C(yt._,Ct._,Pt=gt[Xt]),Pt=new tt(Pt),re=Ct.next,de=yt.previous,ye=Ct._.r,we=yt._.r;do if(ye<=we){if(N(re._,Pt._)){Ct=re,yt.next=Ct,Ct.previous=yt,--Xt;continue t}ye+=re._.r,re=re.next}else{if(N(de._,Pt._)){yt=de,yt.next=Ct,Ct.previous=yt,--Xt;continue t}we+=de._.r,de=de.previous}while(re!==de.next);for(Pt.previous=yt,Pt.next=Ct,yt.next=Ct.previous=Ct=Pt,Tt=X(yt);(Pt=Pt.next)!==Ct;)(zt=X(Pt))<Tt&&(yt=Pt,Tt=zt);Ct=yt.next}for(yt=[Ct._],Pt=Ct;(Pt=Pt.next)!==Ct;)yt.push(Pt._);for(Pt=y(yt),Xt=0;Xt<Ft;++Xt)yt=gt[Xt],yt.x-=Pt.x,yt.y-=Pt.y;return Pt.r}var pt=function(gt){return it(gt),gt},ft=z("IeU1"),Ot=z("CSvP");function wt(gt){return Math.sqrt(gt.value)}var xt=function(){var gt=null,yt=1,Ct=1,Pt=Ot.a;function Ft(Tt){return Tt.x=yt/2,Tt.y=Ct/2,gt?Tt.eachBefore(lt(gt)).eachAfter(Vt(Pt,.5)).eachBefore(Lt(1)):Tt.eachBefore(lt(wt)).eachAfter(Vt(Ot.a,1)).eachAfter(Vt(Pt,Tt.r/Math.min(yt,Ct))).eachBefore(Lt(Math.min(yt,Ct)/(2*Tt.r))),Tt}return Ft.radius=function(Tt){return arguments.length?(gt=Object(ft.a)(Tt),Ft):gt},Ft.size=function(Tt){return arguments.length?(yt=+Tt[0],Ct=+Tt[1],Ft):[yt,Ct]},Ft.padding=function(Tt){return arguments.length?(Pt=typeof Tt=="function"?Tt:Object(Ot.b)(+Tt),Ft):Pt},Ft};function lt(gt){return function(yt){yt.children||(yt.r=Math.max(0,+gt(yt)||0))}}function Vt(gt,yt){return function(Ct){if(Pt=Ct.children){var Pt,Ft,Tt=Pt.length,zt=gt(Ct)*yt||0,Xt;if(zt)for(Ft=0;Ft<Tt;++Ft)Pt[Ft].r+=zt;if(Xt=it(Pt),zt)for(Ft=0;Ft<Tt;++Ft)Pt[Ft].r-=zt;Ct.r=Xt+zt}}}function Lt(gt){return function(yt){var Ct=yt.parent;yt.r*=gt,Ct&&(yt.x=Ct.x+gt*yt.x,yt.y=Ct.y+gt*yt.y)}}var Et=z("+Nd1"),J={depth:-1},ht={};function vt(gt){return gt.id}function bt(gt){return gt.parentId}var At=function(){var gt=vt,yt=bt;function Ct(Pt){var Ft=Array.from(Pt),Tt=Ft.length,zt,Xt,re,de,ye,we,De,Ve=new Map;for(Xt=0;Xt<Tt;++Xt)zt=Ft[Xt],ye=Ft[Xt]=new l.a(zt),(we=gt(zt,Xt,Pt))!=null&&(we+="")&&(De=ye.id=we,Ve.set(De,Ve.has(De)?ht:ye)),(we=yt(zt,Xt,Pt))!=null&&(we+="")&&(ye.parent=we);for(Xt=0;Xt<Tt;++Xt)if(ye=Ft[Xt],we=ye.parent){if(de=Ve.get(we),!de)throw new Error("missing: "+we);if(de===ht)throw new Error("ambiguous: "+we);de.children?de.children.push(ye):de.children=[ye],ye.parent=de}else{if(re)throw new Error("multiple roots");re=ye}if(!re)throw new Error("no root");if(re.parent=J,re.eachBefore(function(pn){pn.depth=pn.parent.depth+1,--Tt}).eachBefore(l.b),re.parent=null,Tt>0)throw new Error("cycle");return re}return Ct.id=function(Pt){return arguments.length?(gt=Object(ft.b)(Pt),Ct):gt},Ct.parentId=function(Pt){return arguments.length?(yt=Object(ft.b)(Pt),Ct):yt},Ct};function q(gt,yt){return gt.parent===yt.parent?1:2}function ct(gt){var yt=gt.children;return yt?yt[0]:gt.t}function ot(gt){var yt=gt.children;return yt?yt[yt.length-1]:gt.t}function _(gt,yt,Ct){var Pt=Ct/(yt.i-gt.i);yt.c-=Pt,yt.s+=Ct,gt.c+=Pt,yt.z+=Ct,yt.m+=Ct}function P(gt){for(var yt=0,Ct=0,Pt=gt.children,Ft=Pt.length,Tt;--Ft>=0;)Tt=Pt[Ft],Tt.z+=yt,Tt.m+=yt,yt+=Tt.s+(Ct+=Tt.c)}function Y(gt,yt,Ct){return gt.a.parent===yt.parent?gt.a:Ct}function k(gt,yt){this._=gt,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=yt}k.prototype=Object.create(l.a.prototype);function h(gt){for(var yt=new k(gt,0),Ct,Pt=[yt],Ft,Tt,zt,Xt;Ct=Pt.pop();)if(Tt=Ct._.children)for(Ct.children=new Array(Xt=Tt.length),zt=Xt-1;zt>=0;--zt)Pt.push(Ft=Ct.children[zt]=new k(Tt[zt],zt)),Ft.parent=Ct;return(yt.parent=new k(null,0)).children=[yt],yt}var g=function(){var gt=q,yt=1,Ct=1,Pt=null;function Ft(de){var ye=h(de);if(ye.eachAfter(Tt),ye.parent.m=-ye.z,ye.eachBefore(zt),Pt)de.eachBefore(re);else{var we=de,De=de,Ve=de;de.eachBefore(function(Rn){Rn.x<we.x&&(we=Rn),Rn.x>De.x&&(De=Rn),Rn.depth>Ve.depth&&(Ve=Rn)});var pn=we===De?1:gt(we,De)/2,sn=pn-we.x,In=yt/(De.x+pn+sn),An=Ct/(Ve.depth||1);de.eachBefore(function(Rn){Rn.x=(Rn.x+sn)*In,Rn.y=Rn.depth*An})}return de}function Tt(de){var ye=de.children,we=de.parent.children,De=de.i?we[de.i-1]:null;if(ye){P(de);var Ve=(ye[0].z+ye[ye.length-1].z)/2;De?(de.z=De.z+gt(de._,De._),de.m=de.z-Ve):de.z=Ve}else De&&(de.z=De.z+gt(de._,De._));de.parent.A=Xt(de,De,de.parent.A||we[0])}function zt(de){de._.x=de.z+de.parent.m,de.m+=de.parent.m}function Xt(de,ye,we){if(ye){for(var De=de,Ve=de,pn=ye,sn=De.parent.children[0],In=De.m,An=Ve.m,Rn=pn.m,Mn=sn.m,Cn;pn=ot(pn),De=ct(De),pn&&De;)sn=ct(sn),Ve=ot(Ve),Ve.a=de,Cn=pn.z+Rn-De.z-In+gt(pn._,De._),Cn>0&&(_(Y(pn,de,we),de,Cn),In+=Cn,An+=Cn),Rn+=pn.m,In+=De.m,Mn+=sn.m,An+=Ve.m;pn&&!ot(Ve)&&(Ve.t=pn,Ve.m+=Rn-An),De&&!ct(sn)&&(sn.t=De,sn.m+=In-Mn,we=de)}return we}function re(de){de.x*=yt,de.y=de.depth*Ct}return Ft.separation=function(de){return arguments.length?(gt=de,Ft):gt},Ft.size=function(de){return arguments.length?(Pt=!1,yt=+de[0],Ct=+de[1],Ft):Pt?null:[yt,Ct]},Ft.nodeSize=function(de){return arguments.length?(Pt=!0,yt=+de[0],Ct=+de[1],Ft):Pt?[yt,Ct]:null},Ft},F=z("tvR+"),V=function(gt,yt,Ct,Pt,Ft){var Tt=gt.children,zt,Xt=Tt.length,re,de=new Array(Xt+1);for(de[0]=re=zt=0;zt<Xt;++zt)de[zt+1]=re+=Tt[zt].value;ye(0,Xt,gt.value,yt,Ct,Pt,Ft);function ye(we,De,Ve,pn,sn,In,An){if(we>=De-1){var Rn=Tt[we];Rn.x0=pn,Rn.y0=sn,Rn.x1=In,Rn.y1=An;return}for(var Mn=de[we],Cn=Ve/2+Mn,Gn=we+1,Xn=De-1;Gn<Xn;){var tr=Gn+Xn>>>1;de[tr]<Cn?Gn=tr+1:Xn=tr}Cn-de[Gn-1]<de[Gn]-Cn&&we+1<Gn&&--Gn;var or=de[Gn]-Mn,nr=Ve-or;if(In-pn>An-sn){var er=Ve?(pn*nr+In*or)/Ve:In;ye(we,Gn,or,pn,sn,er,An),ye(Gn,De,nr,er,sn,In,An)}else{var Sr=Ve?(sn*nr+An*or)/Ve:An;ye(we,Gn,or,pn,sn,In,Sr),ye(Gn,De,nr,pn,Sr,In,An)}}},H=z("FPPI"),et=z("7IPS"),nt=function(gt,yt,Ct,Pt,Ft){(gt.depth&1?et.a:H.a)(gt,yt,Ct,Pt,Ft)},St=z("I4jL"),dt=function gt(yt){function Ct(Pt,Ft,Tt,zt,Xt){if((re=Pt._squarify)&&re.ratio===yt)for(var re,de,ye,we,De=-1,Ve,pn=re.length,sn=Pt.value;++De<pn;){for(de=re[De],ye=de.children,we=de.value=0,Ve=ye.length;we<Ve;++we)de.value+=ye[we].value;de.dice?Object(H.a)(de,Ft,Tt,zt,sn?Tt+=(Xt-Tt)*de.value/sn:Xt):Object(et.a)(de,Ft,Tt,sn?Ft+=(zt-Ft)*de.value/sn:zt,Xt),sn-=de.value}else Pt._squarify=re=Object(St.c)(yt,Pt,Ft,Tt,zt,Xt),re.ratio=yt}return Ct.ratio=function(Pt){return gt((Pt=+Pt)>1?Pt:1)},Ct}(St.b)},ycre:function(zn,Ut,z){var at=z("711d"),a=at("length");zn.exports=a},yqCL:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return ht});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("iTfj"),r=z("w02o"),p=z("sqD9"),m=z("4Olw"),O;(function(vt){vt.Left="Left",vt.Right="Right"})(O||(O={}));var l;(function(vt){vt.Line="line",vt.Column="column"})(l||(l={}));var E="left-axes-view",j="right-axes-view",y={nice:!0,label:{autoHide:!0,autoRotate:!1}},n=Object(at.a)(Object(at.a)({},y),{position:"left"}),s=Object(at.a)(Object(at.a)({},y),{position:"right",grid:null});function d(vt){return Object(e.get)(vt,"geometry")===l.Line}function M(vt){return Object(e.get)(vt,"geometry")===l.Column}function S(vt,bt,At){return M(At)?Object(A.b)({},{geometry:l.Column,label:At.label&&At.isRange?{content:function(ct){var ot;return(ot=ct[bt])===null||ot===void 0?void 0:ot.join("-")}}:void 0},At):Object(at.a)({geometry:l.Line},At)}function T(vt,bt){var At=vt[0],q=vt[1];if(Object(e.isArray)(bt)){var ct=bt[0],ot=bt[1];return[ct,ot]}var _=Object(e.get)(bt,At),P=Object(e.get)(bt,q);return[_,P]}function v(vt,bt){return bt===O.Left?vt===!1?!1:Object(A.b)({},n,vt):bt===O.Right?vt===!1?!1:Object(A.b)({},s,vt):vt}var x=z("kXyF");function C(vt){var bt=vt.view,At=vt.geometryOption,q=vt.yField,ct=vt.legend,ot=Object(e.get)(ct,"marker"),_=Object(A.c)(bt,d(At)?"line":"interval");if(!At.seriesField){var P=_.getAttribute("color"),Y=P.values[0],k=ot||(d(At)?{symbol:function(F,V,H){return[["M",F-H,V],["L",F+H,V]]},style:{lineWidth:2,r:6,stroke:Y}}:{symbol:"square",style:{fill:Y}});return[{value:q,name:Object(e.get)(bt,"options.scales."+q+".alias")||q,marker:k,isGeometry:!0,viewId:bt.id}]}var h=_.getGroupAttributes();return Object(e.reduce)(h,function(g,F){var V=x.Util.getLegendItems(bt,_,F,bt.getTheme(),ot);return g.concat(V)},[])}var N=z("tKoa");function X(vt){var bt=vt.options,At=vt.chart,q=bt.geometryOption,ct=q.isStack,ot=q.color,_=q.seriesField,P=q.groupField,Y=q.isGroup,k=["xField","yField"];if(d(q)){Object(N.d)(Object(A.b)({},vt,{options:Object(at.a)(Object(at.a)(Object(at.a)({},Object(A.k)(bt,k)),q),{line:{color:q.color,style:q.lineStyle}})})),Object(N.e)(Object(A.b)({},vt,{options:Object(at.a)(Object(at.a)(Object(at.a)({},Object(A.k)(bt,k)),q),{point:q.point&&Object(at.a)({color:ot,shape:"circle"},q.point)})}));var h=[];Y&&h.push({type:"dodge",dodgeBy:P||_,customOffset:0}),ct&&h.push({type:"stack"}),h.length&&Object(e.each)(At.geometries,function(g){g.adjust(h)})}return M(q)&&Object(N.c)(Object(A.b)({},vt,{options:Object(at.a)(Object(at.a)(Object(at.a)({},Object(A.k)(bt,k)),q),{widthRatio:q.columnWidthRatio,interval:Object(at.a)(Object(at.a)({},Object(A.k)(q,["color"])),{style:q.columnStyle})})})),vt}function tt(vt){var bt,At=vt.options,q=At.geometryOptions,ct=q===void 0?[]:q,ot=At.xField,_=At.yField,P=Object(e.every)(ct,function(Y){var k=Y.geometry;return k===l.Line||k===void 0});return Object(A.b)({},{options:{geometryOptions:[],meta:(bt={},bt[ot]={type:"cat",sync:!0,range:P?[0,1]:void 0},bt),tooltip:{showMarkers:P,showCrosshairs:P,shared:!0,crosshairs:{type:"x"}},interactions:P?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},vt,{options:{yAxis:T(_,At.yAxis),geometryOptions:[S(ot,_[0],ct[0]),S(ot,_[1],ct[1])],annotations:T(_,At.annotations)}})}function it(vt){var bt=vt.chart,At=vt.options,q=At.xField,ct=At.yField,ot=At.geometryOptions,_=At.data,P=At.tooltip,Y={line:0,column:1},k=[Object(at.a)(Object(at.a)({},ot[0]),{id:E,data:_[0],yField:ct[0]}),Object(at.a)(Object(at.a)({},ot[1]),{id:j,data:_[1],yField:ct[1]})];return k.sort(function(h,g){return-Y[h.geometry]+Y[g.geometry]}).forEach(function(h){var g=h.id,F=h.data,V=h.yField,H=M(h)&&h.isPercent,et=H?Object(p.b)(F,V,q,V):F,nt=bt.createView({id:g}).data(et),St=H?Object(at.a)({formatter:function(gt){return{name:gt[h.seriesField]||V,value:(Number(gt[V])*100).toFixed(2)+"%"}}},P):P;X({chart:nt,options:{xField:q,yField:V,tooltip:St,geometryOption:h}})}),vt}function pt(vt){var bt,At=vt.chart,q=vt.options,ct=q.geometryOptions,ot=((bt=At.getTheme())===null||bt===void 0?void 0:bt.colors10)||[],_=0;return At.once("beforepaint",function(){Object(e.each)(ct,function(P,Y){var k=Object(m.a)(At,Y===0?E:j);if(!P.color){var h=k.getGroupScales(),g=Object(e.get)(h,[0,"values","length"],1),F=ot.slice(_,_+g).concat(Y===0?[]:ot);k.geometries.forEach(function(V){P.seriesField?V.color(P.seriesField,F):V.color(F[0])}),_+=g}}),At.render(!0)}),vt}function ft(vt){var bt,At,q=vt.chart,ct=vt.options,ot=ct.xAxis,_=ct.yAxis,P=ct.xField,Y=ct.yField;return Object(r.f)((bt={},bt[P]=ot,bt[Y[0]]=_[0],bt))(Object(A.b)({},vt,{chart:Object(m.a)(q,E)})),Object(r.f)((At={},At[P]=ot,At[Y[1]]=_[1],At))(Object(A.b)({},vt,{chart:Object(m.a)(q,j)})),vt}function Ot(vt){var bt=vt.chart,At=vt.options,q=Object(m.a)(bt,E),ct=Object(m.a)(bt,j),ot=At.xField,_=At.yField,P=At.xAxis,Y=At.yAxis;return bt.axis(ot,!1),bt.axis(_[0],!1),bt.axis(_[1],!1),q.axis(ot,P),q.axis(_[0],v(Y[0],O.Left)),ct.axis(ot,!1),ct.axis(_[1],v(Y[1],O.Right)),vt}function wt(vt){var bt=vt.chart,At=vt.options,q=At.tooltip,ct=Object(m.a)(bt,E),ot=Object(m.a)(bt,j);return bt.tooltip(q),ct.tooltip({shared:!0}),ot.tooltip({shared:!0}),vt}function xt(vt){var bt=vt.chart;return Object(r.c)(Object(A.b)({},vt,{chart:Object(m.a)(bt,E)})),Object(r.c)(Object(A.b)({},vt,{chart:Object(m.a)(bt,j)})),vt}function lt(vt){var bt=vt.chart,At=vt.options,q=At.annotations,ct=Object(e.get)(q,[0]),ot=Object(e.get)(q,[1]);return Object(r.b)(ct)(Object(A.b)({},vt,{chart:Object(m.a)(bt,E),options:{annotations:ct}})),Object(r.b)(ot)(Object(A.b)({},vt,{chart:Object(m.a)(bt,j),options:{annotations:ot}})),vt}function Vt(vt){var bt=vt.chart;return Object(r.a)(Object(A.b)({},vt,{chart:Object(m.a)(bt,E)})),Object(r.a)(Object(A.b)({},vt,{chart:Object(m.a)(bt,j)})),vt}function Lt(vt){var bt=vt.chart,At=vt.options,q=At.yAxis;return Object(r.e)(Object(A.b)({},vt,{chart:Object(m.a)(bt,E),options:{yAxis:q[0]}})),Object(r.e)(Object(A.b)({},vt,{chart:Object(m.a)(bt,j),options:{yAxis:q[1]}})),vt}function Et(vt){var bt=vt.chart,At=vt.options,q=At.legend,ct=At.geometryOptions,ot=At.yField,_=At.data,P=Object(m.a)(bt,E),Y=Object(m.a)(bt,j);return q===!1?bt.legend(!1):Object(e.isObject)(q)&&q.custom===!0?bt.legend(q):(bt.once("beforepaint",function(){var k=_[0].length?C({view:P,geometryOption:ct[0],yField:ot[0],legend:q}):[],h=_[1].length?C({view:Y,geometryOption:ct[1],yField:ot[1],legend:q}):[];bt.legend(Object(A.b)({},q,{custom:!0,items:k.concat(h)}))}),bt.on("legend-item:click",function(k){var h=Object(e.get)(k,"gEvent.delegateObject",{});if(h&&h.item){var g=h.item,F=g.value,V=g.isGeometry,H=g.viewId;if(V){var et=Object(e.findIndex)(ot,function(dt){return dt===F});if(et>-1){var nt=Object(e.get)(Object(m.a)(bt,H),"geometries");Object(e.each)(nt,function(dt){dt.changeVisible(!h.item.unchecked)})}}else{var St=Object(e.get)(bt.getController("legend"),"option.items",[]);Object(e.each)(bt.views,function(dt){var gt=dt.getGroupScales();Object(e.each)(gt,function(yt){yt.values&&yt.values.indexOf(F)>-1&&dt.filter(yt.field,function(Ct){var Pt=Object(e.find)(St,function(Ft){return Ft.value===Ct});return!Pt.unchecked})}),bt.render(!0)})}}})),vt}function J(vt){return Object(A.e)(tt,it,ft,Ot,Lt,wt,xt,lt,r.j,Vt,pt,Et)(vt)}var ht=function(vt){Object(at.b)(bt,vt);function bt(){var At=vt!==null&&vt.apply(this,arguments)||this;return At.type="dual-axes",At}return bt.prototype.getDefaultOptions=function(){return Object(A.b)({},vt.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},bt.prototype.getSchemaAdaptor=function(){return J},bt}(a.a)},z4Vf:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return s});var at=z("mrSG"),a=z("zJSt"),A=z("YuPD"),e=z("iTfj"),r=z("w02o"),p=z("tKoa");function m(d){var M=d.chart,S=d.options,T=S.data,v=S.sectorStyle,x=S.color;return M.data(T),Object(A.e)(p.c)(Object(A.b)({},d,{options:{marginRatio:1,interval:{style:v,color:x}}})),d}function O(d){var M=d.chart,S=d.options,T=S.label,v=S.xField,x=Object(A.c)(M,"interval");if(T===!1)x.label(!1);else if(Object(e.isObject)(T)){var C=T.callback,N=T.fields,X=Object(at.c)(T,["callback","fields"]),tt=X.offset,it=X.layout;(tt===void 0||tt>=0)&&(it=it?Object(e.isArray)(it)?it:[it]:[],X.layout=Object(e.filter)(it,function(pt){return pt.type!=="limit-in-shape"}),X.layout.length||delete X.layout),x.label({fields:N||[v],callback:C,cfg:Object(A.o)(X)})}else Object(A.j)(A.a.WARN,T===null,"the label option must be an Object."),x.label({fields:[v]});return d}function l(d){var M=d.chart,S=d.options,T=S.legend,v=S.seriesField;return T===!1?M.legend(!1):v&&M.legend(v,T),d}function E(d){var M=d.chart,S=d.options,T=S.radius,v=S.innerRadius;return M.coordinate({type:"polar",cfg:{radius:T,innerRadius:v}}),d}function j(d){var M,S=d.options,T=S.xAxis,v=S.yAxis,x=S.xField,C=S.yField;return Object(A.e)(Object(r.f)((M={},M[x]=T,M[C]=v,M)))(d)}function y(d){var M=d.chart,S=d.options,T=S.xAxis,v=S.yAxis,x=S.xField,C=S.yField;return T?M.axis(x,T):M.axis(x,!1),v?M.axis(C,v):M.axis(C,!1),d}function n(d){Object(A.e)(m,j,O,E,y,l,r.k,r.c,r.a,r.j,Object(r.b)(),r.i)(d)}var s=function(d){Object(at.b)(M,d);function M(){var S=d!==null&&d.apply(this,arguments)||this;return S.type="rose",S}return M.prototype.changeData=function(S){this.updateOption({data:S}),this.chart.changeData(S)},M.prototype.getDefaultOptions=function(){return Object(A.b)({},d.prototype.getDefaultOptions.call(this),{xAxis:!1,yAxis:!1,legend:{position:"right",offsetX:-10},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]})},M.prototype.getSchemaAdaptor=function(){return n},M}(a.a)},zJSt:function(zn,Ut,z){"use strict";z.d(Ut,"a",function(){return l});var at=z("mrSG"),a=z("kXyF"),A=z("iTfj"),e=z("f6Jy"),r=z("u3os"),p=z.n(r),m=z("YuPD"),O="data-chart-source-type",l=function(E){Object(at.b)(j,E);function j(y,n){var s=E.call(this)||this;return s.type="base",s.container=typeof y=="string"?document.getElementById(y):y,s.options=Object(m.b)({},s.getDefaultOptions(),n),s.createG2(),s.bindEvents(),s}return j.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},j.prototype.createG2=function(){var y=this.options,n=y.width,s=y.height,d=y.padding,M=y.appendPadding,S=y.renderer,T=y.pixelRatio,v=y.syncViewPadding,x=y.supportCSSTransform,C=y.limitInPlot;this.chart=new a.Chart(Object(at.a)(Object(at.a)({container:this.container,autoFit:!1},this.getChartSize(n,s)),{padding:d,appendPadding:M,renderer:S,pixelRatio:T,localRefresh:!1,syncViewPadding:v,supportCSSTransform:x,limitInPlot:C})),this.container.setAttribute(O,"G2Plot")},j.prototype.getChartSize=function(y,n){var s=Object(m.g)(this.container);return{width:y||s.width||400,height:n||s.height||400}},j.prototype.bindEvents=function(){var y=this;this.chart&&this.chart.on("*",function(n){(n==null?void 0:n.type)&&y.emit(n.type,n)})},j.prototype.getDefaultOptions=function(){return j.getDefaultOptions()},j.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},j.prototype.update=function(y){this.updateOption(y),this.render()},j.prototype.updateOption=function(y){this.options=Object(m.b)({},this.options,y)},j.prototype.setState=function(y,n,s){s===void 0&&(s=!0);var d=Object(m.f)(this.chart);Object(A.each)(d,function(M){n(M.getData())&&M.setState(y,s)})},j.prototype.getStates=function(){var y=Object(m.f)(this.chart),n=[];return Object(A.each)(y,function(s){var d=s.getData(),M=s.getStates();Object(A.each)(M,function(S){n.push({data:d,state:S,geometry:s.geometry,element:s})})}),n},j.prototype.changeData=function(y){this.update({data:y})},j.prototype.changeSize=function(y,n){this.chart.changeSize(y,n)},j.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute(O)},j.prototype.execAdaptor=function(){var y=this.getSchemaAdaptor(),n=this.options,s=n.padding,d=n.appendPadding;this.chart.padding=s,this.chart.appendPadding=d,y({chart:this.chart,options:this.options})},j.prototype.triggerResize=function(){this.chart.forceFit()},j.prototype.bindSizeSensor=function(){var y=this;if(!this.unbind){var n=this.options.autoFit,s=n===void 0?!0:n;s&&(this.unbind=Object(r.bind)(this.container,function(){var d=Object(m.g)(y.container),M=d.width,S=d.height;(M!==y.chart.width||S!==y.chart.height)&&y.triggerResize()}))}},j.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},j}(e.a)},zK8m:function(zn,Ut,z){"use strict";var at=z("mrSG"),a=z("iTfj"),A=z("6JdA"),e=z("sstZ"),r=z("aSjE"),p=z("LmB6"),m=A.a.transform,O="matrix",l=["zIndex","capture","visible","type"],E=["repeat"],j=":",y="*";function n(T){for(var v=[],x=0;x<T.length;x++)Object(a.isArray)(T[x])?v.push([].concat(T[x])):v.push(T[x]);return v}function s(T,v){var x={},C=v.attrs;for(var N in T)x[N]=C[N];return x}function d(T,v){var x={},C=v.attr();return Object(a.each)(T,function(N,X){E.indexOf(X)===-1&&!Object(a.isEqual)(C[X],N)&&(x[X]=N)}),x}function M(T,v){if(v.onFrame)return T;var x=v.startTime,C=v.delay,N=v.duration,X=Object.prototype.hasOwnProperty;return Object(a.each)(T,function(tt){x+C<tt.startTime+tt.delay+tt.duration&&N>tt.delay&&Object(a.each)(v.toAttrs,function(it,pt){X.call(tt.toAttrs,pt)&&(delete tt.toAttrs[pt],delete tt.fromAttrs[pt])})}),T}var S=function(T){Object(at.b)(v,T);function v(x){var C=T.call(this,x)||this;C.attrs={};var N=C.getDefaultAttrs();return Object(a.mix)(N,x.attrs),C.attrs=N,C.initAttrs(N),C.initAnimate(),C}return v.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},v.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},v.prototype.onCanvasChange=function(x){},v.prototype.initAttrs=function(x){},v.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},v.prototype.isGroup=function(){return!1},v.prototype.getParent=function(){return this.get("parent")},v.prototype.getCanvas=function(){return this.get("canvas")},v.prototype.attr=function(){for(var x,C=[],N=0;N<arguments.length;N++)C[N]=arguments[N];var X=C[0],tt=C[1];if(!X)return this.attrs;if(Object(a.isObject)(X)){for(var it in X)this.setAttr(it,X[it]);return this.afterAttrsChange(X),this}return C.length===2?(this.setAttr(X,tt),this.afterAttrsChange((x={},x[X]=tt,x)),this):this.attrs[X]},v.prototype.isClipped=function(x,C){var N=this.getClip();return N&&!N.isHit(x,C)},v.prototype.setAttr=function(x,C){var N=this.attrs[x];N!==C&&(this.attrs[x]=C,this.onAttrChange(x,C,N))},v.prototype.onAttrChange=function(x,C,N){x==="matrix"&&this.set("totalMatrix",null)},v.prototype.afterAttrsChange=function(x){if(this.cfg.isClipShape){var C=this.cfg.applyTo;C&&C.onCanvasChange("clip")}else this.onCanvasChange("attr")},v.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},v.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},v.prototype.setZIndex=function(x){this.set("zIndex",x);var C=this.getParent();return C&&C.sort(),this},v.prototype.toFront=function(){var x=this.getParent();if(!!x){var C=x.getChildren(),N=this.get("el"),X=C.indexOf(this);C.splice(X,1),C.push(this),this.onCanvasChange("zIndex")}},v.prototype.toBack=function(){var x=this.getParent();if(!!x){var C=x.getChildren(),N=this.get("el"),X=C.indexOf(this);C.splice(X,1),C.unshift(this),this.onCanvasChange("zIndex")}},v.prototype.remove=function(x){x===void 0&&(x=!0);var C=this.getParent();C?(Object(e.j)(C.getChildren(),this),C.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),x&&this.destroy()},v.prototype.resetMatrix=function(){this.attr(O,this.getDefaultMatrix()),this.onCanvasChange("matrix")},v.prototype.getMatrix=function(){return this.attr(O)},v.prototype.setMatrix=function(x){this.attr(O,x),this.onCanvasChange("matrix")},v.prototype.getTotalMatrix=function(){var x=this.cfg.totalMatrix;if(!x){var C=this.attr("matrix"),N=this.cfg.parentMatrix;N&&C?x=Object(r.b)(N,C):x=C||N,this.set("totalMatrix",x)}return x},v.prototype.applyMatrix=function(x){var C=this.attr("matrix"),N=null;x&&C?N=Object(r.b)(x,C):N=C||x,this.set("totalMatrix",N),this.set("parentMatrix",x)},v.prototype.getDefaultMatrix=function(){return null},v.prototype.applyToMatrix=function(x){var C=this.attr("matrix");return C?Object(r.c)(C,x):x},v.prototype.invertFromMatrix=function(x){var C=this.attr("matrix");if(C){var N=Object(r.a)(C);if(N)return Object(r.c)(N,x)}return x},v.prototype.setClip=function(x){var C=this.getCanvas(),N=null;if(x){var X=this.getShapeBase(),tt=Object(a.upperFirst)(x.type),it=X[tt];it&&(N=new it({type:x.type,isClipShape:!0,applyTo:this,attrs:x.attrs,canvas:C}))}return this.set("clipShape",N),this.onCanvasChange("clip"),N},v.prototype.getClip=function(){var x=this.cfg.clipShape;return x||null},v.prototype.clone=function(){var x=this,C=this.attrs,N={};Object(a.each)(C,function(it,pt){Object(a.isArray)(C[pt])?N[pt]=n(C[pt]):N[pt]=C[pt]});var X=this.constructor,tt=new X({attrs:N});return Object(a.each)(l,function(it){tt.set(it,x.get(it))}),tt},v.prototype.destroy=function(){var x=this.destroyed;x||(this.attrs={},T.prototype.destroy.call(this))},v.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},v.prototype.animate=function(){for(var x=[],C=0;C<arguments.length;C++)x[C]=arguments[C];var N=this.isCanvas&&this.isCanvas();if(!(!N&&!this.get("canvas"))){this.set("animating",!0);var X=this.get("timeline");X||(X=this.get("canvas").get("timeline"),this.set("timeline",X));var tt=this.get("animations")||[];X.timer||X.initTimer();var it=x[0],pt=x[1],ft=x[2],Ot=ft===void 0?"easeLinear":ft,wt=x[3],xt=wt===void 0?a.noop:wt,lt=x[4],Vt=lt===void 0?0:lt,Lt,Et,J,ht,vt;Object(a.isFunction)(it)?(Lt=it,it={}):Object(a.isObject)(it)&&it.onFrame&&(Lt=it.onFrame,Et=it.repeat),Object(a.isObject)(pt)?(vt=pt,pt=vt.duration,Ot=vt.easing||"easeLinear",Vt=vt.delay||0,Et=vt.repeat||Et||!1,xt=vt.callback||a.noop,J=vt.pauseCallback||a.noop,ht=vt.resumeCallback||a.noop):(Object(a.isNumber)(xt)&&(Vt=xt,xt=null),Object(a.isFunction)(Ot)?(xt=Ot,Ot="easeLinear"):Ot=Ot||"easeLinear");var bt=d(it,this),At={fromAttrs:s(bt,this),toAttrs:bt,duration:pt,easing:Ot,repeat:Et,callback:xt,pauseCallback:J,resumeCallback:ht,delay:Vt,startTime:X.getTime(),id:Object(a.uniqueId)(),onFrame:Lt,pathFormatted:!1};tt.length>0?tt=M(tt,At):X.addAnimator(this),tt.push(At),this.set("animations",tt),this.set("_pause",{isPaused:!1})}},v.prototype.stopAnimate=function(x){var C=this;x===void 0&&(x=!0);var N=this.get("animations");Object(a.each)(N,function(X){x&&(X.onFrame?C.attr(X.onFrame(1)):C.attr(X.toAttrs)),X.callback&&X.callback()}),this.set("animating",!1),this.set("animations",[])},v.prototype.pauseAnimate=function(){var x=this.get("timeline"),C=this.get("animations"),N=x.getTime();return Object(a.each)(C,function(X){X._paused=!0,X._pauseTime=N,X.pauseCallback&&X.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:N}),this},v.prototype.resumeAnimate=function(){var x=this.get("timeline"),C=x.getTime(),N=this.get("animations"),X=this.get("_pause").pauseTime;return Object(a.each)(N,function(tt){tt.startTime=tt.startTime+(C-X),tt._paused=!1,tt._pauseTime=null,tt.resumeCallback&&tt.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",N),this},v.prototype.emitDelegation=function(x,C){var N=this,X=C.propagationPath,tt=this.getEvents(),it;x==="mouseenter"?it=C.fromShape:x==="mouseleave"&&(it=C.toShape);for(var pt=function(lt){var Vt=X[lt],Lt=Vt.get("name");if(Lt){if((Vt.isGroup()||Vt.isCanvas&&Vt.isCanvas())&&it&&Object(e.g)(Vt,it))return"break";Object(a.isArray)(Lt)?Object(a.each)(Lt,function(Et){N.emitDelegateEvent(Vt,Et,C)}):ft.emitDelegateEvent(Vt,Lt,C)}},ft=this,Ot=0;Ot<X.length;Ot++){var wt=pt(Ot);if(wt==="break")break}},v.prototype.emitDelegateEvent=function(x,C,N){var X=this.getEvents(),tt=C+j+N.type;(X[tt]||X[y])&&(N.name=tt,N.currentTarget=x,N.delegateTarget=this,N.delegateObject=x.get("delegateObject"),this.emit(tt,N))},v.prototype.translate=function(x,C){x===void 0&&(x=0),C===void 0&&(C=0);var N=this.getMatrix(),X=m(N,[["t",x,C]]);return this.setMatrix(X),this},v.prototype.move=function(x,C){var N=this.attr("x")||0,X=this.attr("y")||0;return this.translate(x-N,C-X),this},v.prototype.moveTo=function(x,C){return this.move(x,C)},v.prototype.scale=function(x,C){var N=this.getMatrix(),X=m(N,[["s",x,C||x]]);return this.setMatrix(X),this},v.prototype.rotate=function(x){var C=this.getMatrix(),N=m(C,[["r",x]]);return this.setMatrix(N),this},v.prototype.rotateAtStart=function(x){var C=this.attr(),N=C.x,X=C.y,tt=this.getMatrix(),it=m(tt,[["t",-N,-X],["r",x],["t",N,X]]);return this.setMatrix(it),this},v.prototype.rotateAtPoint=function(x,C,N){var X=this.getMatrix(),tt=m(X,[["t",-x,-C],["r",N],["t",x,C]]);return this.setMatrix(tt),this},v}(p.a);Ut.a=S},zoYe:function(zn,Ut,z){var at=z("nmnc"),a=z("eUgh"),A=z("Z0cm"),e=z("/9aa"),r=1/0,p=at?at.prototype:void 0,m=p?p.toString:void 0;function O(l){if(typeof l=="string")return l;if(A(l))return a(l,O)+"";if(e(l))return m?m.call(l):"";var E=l+"";return E=="0"&&1/l==-r?"-0":E}zn.exports=O}}]);
