(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"+6H/":function(qe,Pt,w){"use strict";w.r(Pt);var H=w("g9YV"),i=w("wCAj"),y=w("14J3"),t=w("BMrR"),n=w("jCWc"),u=w("kPKH"),p=w("IzEo"),b=w("bx4M"),c=w("VTBJ"),S=w("nKUr"),I=w.n(S),m=w("KQm4"),r=w("q1tI"),s=w.n(r),d=w("tMyG"),C=w("hKUY"),E=w("2dAf"),A=w.n(E),f=w("wd/R"),x=w.n(f),j=w("06Lf"),P=w("9kvl"),W=w("c+yx"),X=function(){var ft=Object(P.f)();Object(r.useEffect)(function(){ft({type:"operation/getUserTable",payload:"t1"}),ft({type:"operation/getUserUnrealizedDividend",payload:"t1"})},[ft]);var Z=Object(P.i)(function(J){var ct=J.operation.userTable.t1,it=J.operation.userUnrealizedDividend.t1;return{userTable:ct,userUnrealizedDividend:it}}),lt=Z.userTable,pt=lt===void 0?{}:lt,gt=Z.userUnrealizedDividend,ut=gt===void 0?{}:gt,Bt=Object.keys(ut).reduce(function(J,ct){var it=ut[ct].map(function(_){return{name:ct,time:_[0],value:_[1]}});return[].concat(Object(m.a)(J),Object(m.a)(it))},[]),Lt=Object.keys(pt).map(function(J){return{type:J,value:Object(W.b)(pt[J][0],2)}}),St={data:Bt,height:300,isStack:!0,xField:"time",yField:"value",seriesField:"name",xAxis:{type:"time",tickCount:5,mask:"YY-MM-DD"}},K=Object.keys(pt).map(function(J){return{key:J,total:pt[J][0],unrealizedPnl:pt[J][1],unrealizedAllocation:pt[J][2],real:pt[J][3]}}),dt=K.reduce(function(J,ct){return{key:"all",total:J.total+ct.total,unrealizedPnl:J.unrealizedPnl+ct.unrealizedPnl,unrealizedAllocation:J.unrealizedAllocation+ct.unrealizedAllocation,real:J.real+ct.real}},{key:"all",total:0,unrealizedPnl:0,unrealizedAllocation:0,real:0}),mt=[{title:"\u5F85\u5206\u914D\u5229\u6DA6",value:dt.unrealizedAllocation,text:"\u5468\u540C\u6BD4",percent:0}],bt=[{title:"\u7528\u6237",dataIndex:"key",render:function(ct){return ct}},{title:"\u603B\u5E02\u503C",dataIndex:"total",render:function(ct){return ct.toFixed(2)},sorter:function(ct,it){return ct.total-it.total}},{title:"\u672A\u5B9E\u73B0\u76C8\u4E8F",dataIndex:"unrealizedPnl",render:function(ct){return ct.toFixed(2)},sorter:function(ct,it){return ct.unrealizedPnl-it.unrealizedPnl}},{title:"\u672A\u5206\u914D\u6536\u76CA",dataIndex:"unrealizedAllocation",render:function(ct){return ct.toFixed(2)},sorter:function(ct,it){return ct.unrealizedAllocation-it.unrealizedAllocation}},{title:"\u5B9E\u9645\u5E02\u503C",dataIndex:"real",render:function(ct){return ct.toFixed(2)},sorter:function(ct,it){return ct.real-it.real}}],wt={appendPadding:10,data:Lt,angleField:"value",colorField:"type",radius:.75,label:{type:"spider",labelHeight:28,content:`{name}
{percentage}`},interactions:[{type:"element-selected"},{type:"element-active"}]};return Object(S.jsxs)(d.a,{children:[Object(S.jsxs)(t.a,{gutter:[16,16],children:[Object(S.jsx)(u.a,{span:12,children:Object(S.jsx)(b.a,{title:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("span",{children:"\u5E02\u503C\u6982\u51B5"}),Object(S.jsx)("span",{className:A.a.updateTime,children:x()(Date.now()).format("YYYY-MM-DD HH:mm:ss")})]}),children:Object(S.jsx)(j.c,Object(c.a)({},wt))})}),Object(S.jsx)(u.a,{span:12,children:Object(S.jsx)(C.a,{title:"\u5229\u6DA6\u6982\u51B5",updateTime:Date.now(),data:mt,chartConfig:St,chartType:"column"})})]}),Object(S.jsx)(t.a,{gutter:[16,16],children:Object(S.jsx)(u.a,{xs:24,children:Object(S.jsx)(b.a,{title:"\u6536\u76CA\u660E\u7EC6",children:Object(S.jsx)(i.a,{columns:bt,dataSource:[].concat(Object(m.a)(K),[dt])})})})})]})};Pt.default=X},"+6XX":function(qe,Pt,w){var H=w("y1pI");function i(y){return H(this.__data__,y)>-1}qe.exports=i},"+DwW":function(qe,Pt,w){"use strict";var H=w("mrSG"),i=w("Mw2x"),y=function(t){Object(H.b)(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.isGroup=function(){return!0},n.prototype.isEntityGroup=function(){return!1},n.prototype.clone=function(){for(var u=t.prototype.clone.call(this),p=this.getChildren(),b=0;b<p.length;b++){var c=p[b];u.add(c.clone())}return u},n}(i.a);Pt.a=y},"+Nd1":function(qe,Pt,w){"use strict";var H=w("DdT1"),i=w("FPPI");Pt.a=function(){var y=1,t=1,n=0,u=!1;function p(c){var S=c.height+1;return c.x0=c.y0=n,c.x1=y,c.y1=t/S,c.eachBefore(b(t,S)),u&&c.eachBefore(H.a),c}function b(c,S){return function(I){I.children&&Object(i.a)(I,I.x0,c*(I.depth+1)/S,I.x1,c*(I.depth+2)/S);var m=I.x0,r=I.y0,s=I.x1-n,d=I.y1-n;s<m&&(m=s=(m+s)/2),d<r&&(r=d=(r+d)/2),I.x0=m,I.y0=r,I.x1=s,I.y1=d}}return p.round=function(c){return arguments.length?(u=!!c,p):u},p.size=function(c){return arguments.length?(y=+c[0],t=+c[1],p):[y,t]},p.padding=function(c){return arguments.length?(n=+c,p):n},p}},"+wVF":function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return d});var H=w("mrSG"),i=w("zJSt"),y=w("YuPD"),t=w("iTfj"),n=w("n/J0"),u=w("w02o");function p(C){var E=C.chart,A=C.options,f=A.data,x=A.type,j=A.reflect,P=A.xField,W=A.yField,X=A.colorField,$=A.sizeField,ft=A.sizeRatio,Z=A.shape,lt=A.color;E.data(f);var pt;x==="density"?pt=E.heatmap().position(P+"*"+W):pt=E.polygon().position(P+"*"+W),X&&pt.color(X,lt||n.b.GRADIENT.CONTINUOUS),j&&E.coordinate().reflect(j);var gt=1;if((ft||ft===0)&&(!Z&&!$?console.warn("sizeRatio is not in effect: Must define shape or sizeField first"):ft<0||ft>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):gt=ft),Z&&($||pt.shape("",function(){return[Z,1,gt]}),$)){var ut=f.map(function(St){return St[$]}),Bt=Math.min.apply(Math,ut),Lt=Math.max.apply(Math,ut);pt.shape($,function(St){return[Z,(St-Bt)/(Lt-Bt),gt]})}return C}function b(C){var E,A=C.options,f=A.xAxis,x=A.yAxis,j=A.xField,P=A.yField;return Object(y.e)(Object(u.f)((E={},E[j]=f,E[P]=x,E)))(C)}function c(C){var E=C.chart,A=C.options,f=A.xAxis,x=A.yAxis,j=A.xField,P=A.yField;return f===!1?E.axis(j,!1):E.axis(j,f),x===!1?E.axis(P,!1):E.axis(P,x),C}function S(C){var E=C.chart,A=C.options,f=A.legend,x=A.colorField;return f?E.legend(x,f):E.legend(!1),C}function I(C){var E=C.chart,A=C.options,f=A.xField,x=A.yField,j=A.colorField,P=A.sizeField,W=A.heatmapStyle,X=E.geometries[0];return W&&X&&(Object(t.isFunction)(W)?X.style(f+"*"+x+"*"+j+"*"+P,W):Object(t.isObject)(W)&&X.style(W)),C}function m(C){var E=C.chart,A=C.options,f=A.label,x=A.colorField,j=A.type,P=Object(y.c)(E,j==="density"?"heatmap":"polygon");if(!f)P.label(!1);else if(x){var W=f.callback,X=Object(H.c)(f,["callback"]);P.label({fields:[x],callback:W,cfg:Object(y.o)(X)})}return C}function r(C){return Object(y.e)(p,b,u.j,c,S,u.k,I,m,Object(u.b)(),u.c,u.a)(C)}var s=w("Ihc8");Object(s.registerShape)("polygon","circle",{draw:function(E,A){var f,x,j=E.x,P=E.y,W=this.parsePoints(E.points),X=Math.abs(W[2].x-W[1].x),$=Math.abs(W[1].y-W[0].y),ft=Math.min(X,$)/2,Z=Number(E.shape[1]),lt=Number(E.shape[2]),pt=Math.sqrt(lt),gt=ft*pt*Math.sqrt(Z),ut=((f=E.style)===null||f===void 0?void 0:f.fill)||E.color||((x=E.defaultStyle)===null||x===void 0?void 0:x.fill),Bt=A.addShape("circle",{attrs:Object(H.a)(Object(H.a)(Object(H.a)({x:j,y:P,r:gt},E.defaultStyle),E.style),{fill:ut})});return Bt}}),Object(s.registerShape)("polygon","square",{draw:function(E,A){var f,x,j=E.x,P=E.y,W=this.parsePoints(E.points),X=Math.abs(W[2].x-W[1].x),$=Math.abs(W[1].y-W[0].y),ft=Math.min(X,$),Z=Number(E.shape[1]),lt=Number(E.shape[2]),pt=Math.sqrt(lt),gt=ft*pt*Math.sqrt(Z),ut=((f=E.style)===null||f===void 0?void 0:f.fill)||E.color||((x=E.defaultStyle)===null||x===void 0?void 0:x.fill),Bt=A.addShape("rect",{attrs:Object(H.a)(Object(H.a)(Object(H.a)({x:j-gt/2,y:P-gt/2,width:gt,height:gt},E.defaultStyle),E.style),{fill:ut})});return Bt}});var d=function(C){Object(H.b)(E,C);function E(){var A=C!==null&&C.apply(this,arguments)||this;return A.type="heatmap",A}return E.prototype.getSchemaAdaptor=function(){return r},E.prototype.getDefaultOptions=function(){return Object(y.b)({},C.prototype.getDefaultOptions.call(this),{type:"polygon",legend:!1,xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}})},E}(i.a)},"/+3i":function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return x});var H=w("mrSG"),i=w("YuPD"),y=w("zJSt"),t=w("iTfj"),n=w("w02o"),u=w("n/J0"),p="$$stock-range$$",b="trend",c="up",S="down",I=["#ef5350","#26a69a"],m={showTitle:!1,showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0},itemTpl:'<li class="g2-tooltip-list-item" data-index={index}><span style="background-color:{color};" class="g2-tooltip-marker"></span>{name}{value}</li>'};function r(j,P){return Object(t.map)(j,function(W){if(Object(t.isArray)(P)){var X=P[0],$=P[1],ft=P[2],Z=P[3];W[b]=W[X]<=W[$]?c:S,W[p]=[W[X],W[$],W[ft],W[Z]]}return W})}function s(j){var P=j.chart,W=j.options,X=W.xField,$=W.yField,ft=W.data;P.data(r(ft,$));var Z=P.schema().position(X+"*"+p).shape("candle");return Z.color(b,I),j}function d(j){var P,W,X=j.chart,$=j.options,ft=$.meta,Z=$.xAxis,lt=$.yAxis,pt=$.xField,gt=(P={},P[pt]={type:"timeCat",tickCount:6},P[b]={values:[c,S]},P),ut=Object(i.b)(gt,ft,(W={},W[pt]=Object(i.k)(Z,u.a),W[p]=Object(i.k)(lt,u.a),W));return X.scale(ut),j}function C(j){var P=j.chart,W=j.options,X=W.xAxis,$=W.yAxis,ft=W.xField;return X===!1?P.axis(ft,!1):P.axis(ft,X),$===!1?P.axis(p,!1):P.axis(p,$),j}function E(j){var P=j.chart,W=j.options,X=W.xField,$=W.yField,ft=W.meta,Z=ft===void 0?{}:ft,lt=W.tooltip,pt=lt===void 0?{}:lt,gt=Object(i.c)(P,"schema"),ut=$[0],Bt=$[1],Lt=$[2],St=$[3],K=Z[ut]&&Z[ut].alias||ut,dt=Z[Bt]?Z[Bt].alias||ut:Bt,mt=Z[Lt]&&Z[Lt].alias||Lt,bt=Z[St]&&Z[St].alias||St,wt={fields:[X,ut,Bt,Lt,St],callback:function(_,R,Q,k,g){var O={name:_,value:`
          <br><span data-label="`+K+'" style="padding-left: 16px">'+K+"\uFF1A"+R+`</span>
          <br><span data-label="`+dt+'" style="padding-left: 16px">'+dt+"\uFF1A"+Q+`</span>
          <br><span data-label="`+mt+'" style="padding-left: 16px">'+mt+"\uFF1A"+k+`</span>
          <br><span data-label="`+bt+'" style="padding-left: 16px">'+bt+"\uFF1A"+g+`</span>
        `};return O}},J={crosshairs:{text:function(_,R,Q){var k={position:"end"};if(_==="x"){var g=Q[0];k.content=g?g.data[X]:R}else k.content=R;return k}}};if(pt){if(Object(t.isObject)(pt)){var ct=Object(i.b)({},J,pt);P.tooltip(ct),gt.tooltip(wt)}}else P.tooltip(!1);return j}function A(j){var P=j.chart,W=j.options,X=W.legend;return X?P.legend(b,X):X===!1&&P.legend(!1),j}function f(j){Object(i.e)(s,d,n.j,C,E,A,n.c,n.a)(j)}var x=function(j){Object(H.b)(P,j);function P(){var W=j!==null&&j.apply(this,arguments)||this;return W.type="stock",W}return P.prototype.getDefaultOptions=function(){return Object(i.b)({},j.prototype.getDefaultOptions.call(this),{tooltip:m,interactions:[{type:"tooltip"}],legend:{position:"top-left"}})},P.prototype.getSchemaAdaptor=function(){return f},P.prototype.changeData=function(W){this.updateOption({data:W});var X=this.options.yField;this.chart.changeData(r(W,X))},P}(y.a)},"/3+T":function(qe,Pt,w){"use strict";w.r(Pt),w.d(Pt,"Line",function(){return S}),w.d(Pt,"Circle",function(){return m}),w.d(Pt,"Base",function(){return b}),w.d(Pt,"Html",function(){return j});var H=w("mrSG"),i=w("5UbV"),y=w("iTfj"),t=w("MeYt"),n=w("jqgP"),u=w("L16w"),p=function(P){Object(H.b)(W,P);function W(){return P!==null&&P.apply(this,arguments)||this}return W.prototype.getDefaultCfg=function(){var X=P.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},X),{name:"crosshair",type:"base",line:{},text:null,textBackground:{},capture:!1,defaultCfg:{line:{style:{lineWidth:1,stroke:u.a.lineColor}},text:{position:"start",offset:10,autoRotate:!1,content:null,style:{fill:u.a.textColor,textAlign:"center",textBaseline:"middle",fontFamily:u.a.fontFamily}},textBackground:{padding:5,style:{stroke:u.a.lineColor}}}})},W.prototype.renderInner=function(X){this.get("line")&&this.renderLine(X),this.get("text")&&(this.renderText(X),this.renderBackground(X))},W.prototype.renderText=function(X){var $=this.get("text"),ft=$.style,Z=$.autoRotate,lt=$.content;if(!Object(y.isNil)(lt)){var pt=this.getTextPoint(),gt=null;if(Z){var ut=this.getRotateAngle();gt=Object(n.e)(pt,ut)}this.addShape(X,{type:"text",name:"crosshair-text",id:this.getElementId("text"),attrs:Object(H.a)(Object(H.a)(Object(H.a)({},pt),{text:lt,matrix:gt}),ft)})}},W.prototype.renderLine=function(X){var $=this.getLinePath(),ft=this.get("line"),Z=ft.style;this.addShape(X,{type:"path",name:"crosshair-line",id:this.getElementId("line"),attrs:Object(H.a)({path:$},Z)})},W.prototype.renderBackground=function(X){var $=this.getElementId("text"),ft=X.findById($),Z=this.get("textBackground");if(Z&&ft){var lt=ft.getBBox(),pt=Object(i.c)(Z.padding),gt=Z.style,ut=this.addShape(X,{type:"rect",name:"crosshair-text-background",id:this.getElementId("text-background"),attrs:Object(H.a)({x:lt.x-pt[3],y:lt.y-pt[0],width:lt.width+pt[1]+pt[3],height:lt.height+pt[0]+pt[2],matrix:ft.attr("matrix")},gt)});ut.toBack()}},W}(t.a),b=p,c=function(P){Object(H.b)(W,P);function W(){return P!==null&&P.apply(this,arguments)||this}return W.prototype.getDefaultCfg=function(){var X=P.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},X),{type:"line",locationType:"region",start:null,end:null})},W.prototype.getRotateAngle=function(){var X=this.getLocation(),$=X.start,ft=X.end,Z=this.get("text").position,lt=Math.atan2(ft.y-$.y,ft.x-$.x),pt=Z==="start"?lt-Math.PI/2:lt+Math.PI/2;return pt},W.prototype.getTextPoint=function(){var X=this.getLocation(),$=X.start,ft=X.end,Z=this.get("text"),lt=Z.position,pt=Z.offset;return Object(i.f)($,ft,lt,pt)},W.prototype.getLinePath=function(){var X=this.getLocation(),$=X.start,ft=X.end;return[["M",$.x,$.y],["L",ft.x,ft.y]]},W}(b),S=c,I=function(P){Object(H.b)(W,P);function W(){return P!==null&&P.apply(this,arguments)||this}return W.prototype.getDefaultCfg=function(){var X=P.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},X),{type:"circle",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},W.prototype.getRotateAngle=function(){var X=this.getLocation(),$=X.startAngle,ft=X.endAngle,Z=this.get("text").position,lt=Z==="start"?$+Math.PI/2:ft-Math.PI/2;return lt},W.prototype.getTextPoint=function(){var X=this.get("text"),$=X.position,ft=X.offset,Z=this.getLocation(),lt=Z.center,pt=Z.radius,gt=Z.startAngle,ut=Z.endAngle,Bt=$==="start"?gt:ut,Lt=this.getRotateAngle()-Math.PI,St=Object(i.e)(lt,pt,Bt),K=Math.cos(Lt)*ft,dt=Math.sin(Lt)*ft;return{x:St.x+K,y:St.y+dt}},W.prototype.getLinePath=function(){var X=this.getLocation(),$=X.center,ft=X.radius,Z=X.startAngle,lt=X.endAngle,pt=null;if(lt-Z==Math.PI*2){var gt=$.x,ut=$.y;pt=[["M",gt,ut-ft],["A",ft,ft,0,1,1,gt,ut+ft],["A",ft,ft,0,1,1,gt,ut-ft],["Z"]]}else{var Bt=Object(i.e)($,ft,Z),Lt=Object(i.e)($,ft,lt),St=Math.abs(lt-Z)>Math.PI?1:0,K=Z>lt?0:1;pt=[["M",Bt.x,Bt.y],["A",ft,ft,0,St,K,Lt.x,Lt.y]]}return pt},W}(b),m=I,r=w("fIp6"),s=w("de35"),d="g2-crosshair",C=d+"-line",E=d+"-text",A,f=(A={},A[""+d]={position:"relative"},A[""+C]={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.25)"},A[""+E]={position:"absolute",color:u.a.textColor,fontFamily:u.a.fontFamily},A),x=function(P){Object(H.b)(W,P);function W(){return P!==null&&P.apply(this,arguments)||this}return W.prototype.getDefaultCfg=function(){var X=P.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},X),{name:"crosshair",type:"html",locationType:"region",start:{x:0,y:0},end:{x:0,y:0},capture:!1,text:null,containerTpl:'<div class="'+d+'"></div>',crosshairTpl:'<div class="'+C+'"></div>',textTpl:'<span class="'+E+'">{content}</span>',domStyles:null,containerClassName:d,defaultStyles:f,defaultCfg:{text:{position:"start",content:null,align:"center",offset:10}}})},W.prototype.render=function(){this.resetText(),this.resetPosition()},W.prototype.initCrossHair=function(){var X=this.getContainer(),$=this.get("crosshairTpl"),ft=Object(r.b)($);X.appendChild(ft),this.applyStyle(C,ft),this.set("crosshairEl",ft)},W.prototype.getTextPoint=function(){var X=this.getLocation(),$=X.start,ft=X.end,Z=this.get("text"),lt=Z.position,pt=Z.offset;return Object(i.f)($,ft,lt,pt)},W.prototype.resetText=function(){var X=this.get("text"),$=this.get("textEl");if(X){var ft=X.content;if(!$){var Z=this.getContainer(),lt=Object(y.substitute)(this.get("textTpl"),X);$=Object(r.b)(lt),Z.appendChild($),this.applyStyle(E,$),this.set("textEl",$)}$.innerHTML=ft}else $&&$.remove()},W.prototype.isVertical=function(X,$){return X.x===$.x},W.prototype.resetPosition=function(){var X=this.get("crosshairEl");X||(this.initCrossHair(),X=this.get("crosshairEl"));var $=this.get("start"),ft=this.get("end"),Z=Math.min($.x,ft.x),lt=Math.min($.y,ft.y);this.isVertical($,ft)?Object(r.e)(X,{width:"1px",height:Object(i.l)(Math.abs(ft.y-$.y))}):Object(r.e)(X,{height:"1px",width:Object(i.l)(Math.abs(ft.x-$.x))}),Object(r.e)(X,{top:Object(i.l)(lt),left:Object(i.l)(Z)}),this.alignText()},W.prototype.alignText=function(){var X=this.get("textEl");if(X){var $=this.get("text").align,ft=X.clientWidth,Z=this.getTextPoint();switch($){case"center":Z.x=Z.x-ft/2;break;case"right":Z.x=Z.x-ft;case"left":break}Object(r.e)(X,{top:Object(i.l)(Z.y),left:Object(i.l)(Z.x)})}},W.prototype.updateInner=function(X){Object(y.hasKey)(X,"text")&&this.resetText(),P.prototype.updateInner.call(this,X)},W}(s.a),j=x},"027J":function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return r});var H=w("mrSG"),i=w("zJSt"),y=w("lFe4"),t=w("w02o"),n=w("YuPD"),u=w("tKoa"),p=w("7cv3"),b=w("DyAw");function c(s){var d,C,E=s.chart,A=s.options,f=A.data,x=A.xAxis,j=A.yAxis,P=A.color,W=A.columnStyle,X=A.columnWidthRatio,$=Object(y.a)(f);E.data($);var ft=Object(n.b)({},s,{options:{xField:p.b,yField:p.c,widthRatio:X,interval:{style:W,color:P}}});return Object(u.c)(ft),E.axis(!1),E.legend(!1),E.interaction("element-active"),Object(t.f)((d={},d[p.b]=x,d[p.c]=j,d),(C={},C[p.b]={type:"cat"},C[p.c]=Object(b.a)($,p.c),C))(s),s}function S(s){return Object(n.e)(c,t.k,t.j,t.a,Object(t.b)())(s)}var I=w("iTfj"),m={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(d,C){return""+Object(I.get)(C,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}},r=function(s){Object(H.b)(d,s);function d(){var C=s!==null&&s.apply(this,arguments)||this;return C.type="tiny-column",C}return d.prototype.changeData=function(C){this.updateOption({data:C}),this.chart.changeData(Object(y.a)(C))},d.prototype.getDefaultOptions=function(){return{appendPadding:2,tooltip:Object(H.a)({},m),animation:!0}},d.prototype.getSchemaAdaptor=function(){return S},d}(i.a)},"03A+":function(qe,Pt,w){var H=w("JTzB"),i=w("ExA7"),y=Object.prototype,t=y.hasOwnProperty,n=y.propertyIsEnumerable,u=H(function(){return arguments}())?H:function(p){return i(p)&&t.call(p,"callee")&&!n.call(p,"callee")};qe.exports=u},"05BJ":function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return I});var H=w("mrSG"),i=w("zJSt"),y=w("7cv3"),t=w("lFe4"),n=w("w02o"),u=w("YuPD"),p=w("tKoa"),b=w("DyAw");function c(m){var r,s,d=m.chart,C=m.options,E=C.data,A=C.xAxis,f=C.yAxis,x=C.color,j=C.areaStyle,P=C.point,W=C.line,X=Object(t.a)(E);d.data(X);var $=Object(u.b)({},m,{options:{xField:y.b,yField:y.c,area:{color:x,style:j},line:W,point:P}}),ft=Object(u.b)({},$,{options:{tooltip:!1}});return Object(p.a)($),Object(p.d)(ft),Object(p.e)(ft),d.axis(!1),d.legend(!1),Object(n.f)((r={},r[y.b]=A,r[y.c]=f,r),(s={},s[y.b]={type:"cat"},s[y.c]=Object(b.a)(X,y.c),s))(m),m}function S(m){return Object(u.e)(c,n.k,n.j,n.a,Object(n.b)())(m)}var I=function(m){Object(H.b)(r,m);function r(){var s=m!==null&&m.apply(this,arguments)||this;return s.type="tiny-area",s}return r.prototype.changeData=function(s){this.updateOption({data:s}),this.chart.changeData(Object(t.a)(s))},r.prototype.getDefaultOptions=function(){return{appendPadding:2,tooltip:Object(H.a)({},y.a),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:!0}},r.prototype.getSchemaAdaptor=function(){return S},r}(i.a)},"06Lf":function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return Q}),w.d(Pt,"b",function(){return Mt}),w.d(Pt,"c",function(){return me});var H=w("q1tI"),i=w.n(H),y=w("ma/q"),t=w("iTfj"),n=function(Xt,Ee){var Vt={}.toString;return Vt.call(Xt)==="[object "+Ee+"]"},u=function(Xt){if(!Xt)return Xt;var Ee={};for(var Vt in Xt)Ee[Vt]=Xt[Vt];return Ee},p=function(Xt,Ee){for(var Vt=Xt,ce=0;ce<Ee.length;ce++)if(Vt==null?void 0:Vt[Ee[ce]])Vt=Vt[Ee[ce]];else{Vt=void 0;break}return Vt},b=function(Xt,Ee,Vt){if(!Xt)return Xt;var ce=Xt;return Ee.forEach(function(yn,Bn){Bn<Ee.length-1?ce=ce[yn]:ce[yn]=Vt}),Xt},c=function(Xt,Ee){!Xt||(Object(t.isFunction)(Xt)?Xt(Ee):Xt.current=Ee)},S={isType:n,clone:u,hasPath:p,setPath:b},I=w("i8i4"),m=w.n(I),r=function(Xt,Ee){var Vt=document.createElement("div");return Ee==="tooltip"&&(Vt.className="g2-tooltip"),m.a.render(Xt,Vt),Vt},s=r,d=function(){return d=Object.assign||function(_t){for(var Xt,Ee=1,Vt=arguments.length;Ee<Vt;Ee++){Xt=arguments[Ee];for(var ce in Xt)Object.prototype.hasOwnProperty.call(Xt,ce)&&(_t[ce]=Xt[ce])}return _t},d.apply(this,arguments)},C=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee};function E(_t,Xt){var Ee=Object(H.useRef)(),Vt=Object(H.useRef)(),ce=Object(H.useRef)(null),yn=Xt.onReady,Bn=Xt.onEvent,Zn=function(Et,$t){var ye;return Et===void 0&&(Et="image/png"),(ye=Ee.current)===null||ye===void 0?void 0:ye.chart.canvas.cfg.el.toDataURL(Et,$t)},Kn=function(Et,$t,ye){var Zt;Et===void 0&&(Et="download"),$t===void 0&&($t="image/png");var de=Et;Et.indexOf(".")===-1&&(de=Et+"."+$t.split("/")[1]);var he=(Zt=Ee.current)===null||Zt===void 0?void 0:Zt.chart.canvas.cfg.el.toDataURL($t,ye),le=document.createElement("a");return le.href=he,le.download=de,document.body.appendChild(le),le.click(),document.body.removeChild(le),le=null,de},$e=function(Et,$t,ye){var Zt=S.hasPath,de=S.setPath,he=Zt(Et,$t);de(Et,$t,function(){for(var le=[],Me=0;Me<arguments.length;Me++)le[Me]=arguments[Me];var Ve=S.isType(he,"Function")?he.apply(void 0,le):he;return S.isType(Ve,"String")||S.isType(Ve,"Number")||S.isType(Ve,"HTMLDivElement")?Ve:s(Ve,ye)})},je=function(){var Et=S.hasPath;Et(Xt,["statistic","content","customHtml"])&&$e(Xt,["statistic","content","customHtml"]),Et(Xt,["statistic","title","customHtml"])&&$e(Xt,["statistic","title","customHtml"]),typeof Xt.tooltip=="object"&&(Et(Xt,["tooltip","container"])&&$e(Xt,["tooltip","container"],"tooltip"),Et(Xt,["tooltip","customContent"])&&$e(Xt,["tooltip","customContent"],"tooltip"))};return Object(H.useEffect)(function(){if(Ee.current&&!Object(t.isEqual)(Vt.current,Xt)){var L=!1;if(Vt.current){var Et=Vt.current,$t=Et.data,ye=Et.value,Zt=Et.percent,de=C(Et,["data","value","percent"]),he=Xt.data,le=Xt.value,Me=Xt.percent,Ve=C(Xt,["data","value","percent"]);L=Object(t.isEqual)(de,Ve)}if(L){var Ye="data",ke=["percent"],nn=Object.keys(Xt);ke.forEach(function(Re){nn.includes(Re)&&(Ye=Re)}),Ee.current.changeData((Xt==null?void 0:Xt[Ye])||[])}else je(),Ee.current.update(Xt);Vt.current=Xt}},[Xt]),Object(H.useEffect)(function(){if(!ce.current)return function(){return null};je();var L=new _t(ce.current,d({},Xt));L.__proto__.toDataURL=function($t,ye){return Zn($t,ye)},L.__proto__.downloadImage=function($t,ye,Zt){return Kn($t,ye,Zt)},L.render(),Vt.current||(Vt.current=Xt),Ee.current=S.clone(L),yn&&yn(L);var Et=function(ye){Bn&&Bn(L,ye)};return L.on("*",Et),function(){Ee.current&&(Ee.current.destroy(),Ee.current.off("*",Et),Ee.current=void 0)}},[]),{chart:Ee,container:ce}}var A=function(){var _t=function(Ee,Vt){return _t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ce,yn){ce.__proto__=yn}||function(ce,yn){for(var Bn in yn)Object.prototype.hasOwnProperty.call(yn,Bn)&&(ce[Bn]=yn[Bn])},_t(Ee,Vt)};return function(Xt,Ee){_t(Xt,Ee);function Vt(){this.constructor=Xt}Xt.prototype=Ee===null?Object.create(Ee):(Vt.prototype=Ee.prototype,new Vt)}}(),f=function(_t){A(Xt,_t);function Xt(){var Ee=_t!==null&&_t.apply(this,arguments)||this;return Ee.state={hasError:!1},Ee.renderError=function(Vt){var ce=Ee.props.errorTemplate;switch(Vt){default:return ce&&typeof ce=="function"?ce(Vt):i.a.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",Vt.message)}},Ee}return Xt.getDerivedStateFromError=function(Ee){return{hasError:!0,error:Ee}},Xt.getDerivedStateFromProps=function(Ee,Vt){return Vt.children!==Ee.children?{children:Ee.children,hasError:!1,error:void 0}:null},Xt.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):i.a.createElement(H.Fragment,null,this.props.children)},Xt}(i.a.Component),x=f;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var j=function(){return j=Object.assign||function(Ee){for(var Vt,ce=1,yn=arguments.length;ce<yn;ce++){Vt=arguments[ce];for(var Bn in Vt)Object.prototype.hasOwnProperty.call(Vt,Bn)&&(Ee[Bn]=Vt[Bn])}return Ee},j.apply(this,arguments)};function P(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee}var W=function(){return Math.random().toString(36).substring(6)},X=function(Xt){var Ee=Xt.animate,Vt=Xt.backgroundColor,ce=Xt.backgroundOpacity,yn=Xt.baseUrl,Bn=Xt.children,Zn=Xt.foregroundColor,Kn=Xt.foregroundOpacity,$e=Xt.gradientRatio,je=Xt.uniqueKey,L=Xt.interval,Et=Xt.rtl,$t=Xt.speed,ye=Xt.style,Zt=Xt.title,de=P(Xt,["animate","backgroundColor","backgroundOpacity","baseUrl","children","foregroundColor","foregroundOpacity","gradientRatio","uniqueKey","interval","rtl","speed","style","title"]),he=je||W(),le=he+"-diff",Me=he+"-animated-diff",Ve=he+"-aria",Ye=Et?{transform:"scaleX(-1)"}:null,ke="0; "+L+"; 1",nn=$t+"s";return Object(H.createElement)("svg",j({"aria-labelledby":Ve,role:"img",style:j(j({},ye),Ye)},de),Zt?Object(H.createElement)("title",{id:Ve},Zt):null,Object(H.createElement)("rect",{role:"presentation",x:"0",y:"0",width:"100%",height:"100%",clipPath:"url("+yn+"#"+le+")",style:{fill:"url("+yn+"#"+Me+")"}}),Object(H.createElement)("defs",{role:"presentation"},Object(H.createElement)("clipPath",{id:le},Bn),Object(H.createElement)("linearGradient",{id:Me},Object(H.createElement)("stop",{offset:"0%",stopColor:Vt,stopOpacity:ce},Ee&&Object(H.createElement)("animate",{attributeName:"offset",values:-$e+"; "+-$e+"; 1",keyTimes:ke,dur:nn,repeatCount:"indefinite"})),Object(H.createElement)("stop",{offset:"50%",stopColor:Zn,stopOpacity:Kn},Ee&&Object(H.createElement)("animate",{attributeName:"offset",values:-$e/2+"; "+-$e/2+"; "+(1+$e/2),keyTimes:ke,dur:nn,repeatCount:"indefinite"})),Object(H.createElement)("stop",{offset:"100%",stopColor:Vt,stopOpacity:ce},Ee&&Object(H.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+$e),keyTimes:ke,dur:nn,repeatCount:"indefinite"})))))};X.defaultProps={animate:!0,backgroundColor:"#f5f6f7",backgroundOpacity:1,baseUrl:"",foregroundColor:"#eee",foregroundOpacity:1,gradientRatio:2,id:null,interval:.25,rtl:!1,speed:1.2,style:{},title:"Loading..."};var $=function(Xt){return Xt.children?Object(H.createElement)(X,j({},Xt)):Object(H.createElement)(ft,j({},Xt))},ft=function(Xt){return Object(H.createElement)($,j({viewBox:"0 0 476 124"},Xt),Object(H.createElement)("rect",{x:"48",y:"8",width:"88",height:"6",rx:"3"}),Object(H.createElement)("rect",{x:"48",y:"26",width:"52",height:"6",rx:"3"}),Object(H.createElement)("rect",{x:"0",y:"56",width:"410",height:"6",rx:"3"}),Object(H.createElement)("rect",{x:"0",y:"72",width:"380",height:"6",rx:"3"}),Object(H.createElement)("rect",{x:"0",y:"88",width:"178",height:"6",rx:"3"}),Object(H.createElement)("circle",{cx:"20",cy:"20",r:"20"}))},Z=function(Xt){return Object(H.createElement)($,j({viewBox:"0 0 400 460"},Xt),Object(H.createElement)("circle",{cx:"31",cy:"31",r:"15"}),Object(H.createElement)("rect",{x:"58",y:"18",rx:"2",ry:"2",width:"140",height:"10"}),Object(H.createElement)("rect",{x:"58",y:"34",rx:"2",ry:"2",width:"140",height:"10"}),Object(H.createElement)("rect",{x:"0",y:"60",rx:"2",ry:"2",width:"400",height:"400"}))},lt=function(Xt){return Object(H.createElement)($,j({viewBox:"0 0 340 84"},Xt),Object(H.createElement)("rect",{x:"0",y:"0",width:"67",height:"11",rx:"3"}),Object(H.createElement)("rect",{x:"76",y:"0",width:"140",height:"11",rx:"3"}),Object(H.createElement)("rect",{x:"127",y:"48",width:"53",height:"11",rx:"3"}),Object(H.createElement)("rect",{x:"187",y:"48",width:"72",height:"11",rx:"3"}),Object(H.createElement)("rect",{x:"18",y:"48",width:"100",height:"11",rx:"3"}),Object(H.createElement)("rect",{x:"0",y:"71",width:"37",height:"11",rx:"3"}),Object(H.createElement)("rect",{x:"18",y:"23",width:"140",height:"11",rx:"3"}),Object(H.createElement)("rect",{x:"166",y:"23",width:"173",height:"11",rx:"3"}))},pt=function(Xt){return Object(H.createElement)($,j({viewBox:"0 0 400 110"},Xt),Object(H.createElement)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"250",height:"10"}),Object(H.createElement)("rect",{x:"20",y:"20",rx:"3",ry:"3",width:"220",height:"10"}),Object(H.createElement)("rect",{x:"20",y:"40",rx:"3",ry:"3",width:"170",height:"10"}),Object(H.createElement)("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"250",height:"10"}),Object(H.createElement)("rect",{x:"20",y:"80",rx:"3",ry:"3",width:"200",height:"10"}),Object(H.createElement)("rect",{x:"20",y:"100",rx:"3",ry:"3",width:"80",height:"10"}))},gt=function(Xt){return Object(H.createElement)($,j({viewBox:"0 0 245 125"},Xt),Object(H.createElement)("circle",{cx:"10",cy:"20",r:"8"}),Object(H.createElement)("rect",{x:"25",y:"15",rx:"5",ry:"5",width:"220",height:"10"}),Object(H.createElement)("circle",{cx:"10",cy:"50",r:"8"}),Object(H.createElement)("rect",{x:"25",y:"45",rx:"5",ry:"5",width:"220",height:"10"}),Object(H.createElement)("circle",{cx:"10",cy:"80",r:"8"}),Object(H.createElement)("rect",{x:"25",y:"75",rx:"5",ry:"5",width:"220",height:"10"}),Object(H.createElement)("circle",{cx:"10",cy:"110",r:"8"}),Object(H.createElement)("rect",{x:"25",y:"105",rx:"5",ry:"5",width:"220",height:"10"}))},ut=$,Bt=function(Xt){var Ee=Xt.loadingTemplate,Vt=function(){return Ee||i.a.createElement(ut,{viewBox:"0 0 400 180",width:200,height:90,speed:1},i.a.createElement("rect",{x:"20",y:"5",rx:"0",ry:"0",width:"1",height:"170"}),i.a.createElement("rect",{x:"20",y:"175",rx:"0",ry:"0",width:"360",height:"1"}),i.a.createElement("rect",{x:"40",y:"75",rx:"0",ry:"0",width:"35",height:"100"}),i.a.createElement("rect",{x:"80",y:"125",rx:"0",ry:"0",width:"35",height:"50"}),i.a.createElement("rect",{x:"120",y:"105",rx:"0",ry:"0",width:"35",height:"70"}),i.a.createElement("rect",{x:"160",y:"35",rx:"0",ry:"0",width:"35",height:"140"}),i.a.createElement("rect",{x:"200",y:"55",rx:"0",ry:"0",width:"35",height:"120"}),i.a.createElement("rect",{x:"240",y:"15",rx:"0",ry:"0",width:"35",height:"160"}),i.a.createElement("rect",{x:"280",y:"135",rx:"0",ry:"0",width:"35",height:"40"}),i.a.createElement("rect",{x:"320",y:"85",rx:"0",ry:"0",width:"35",height:"90"}))};return i.a.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:"#fff"}},Vt())},Lt=Bt,St=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},K=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=St(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.Area,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),dt=K,mt=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},bt=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=mt(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.Bar,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),wt=bt,J=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},ct=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=J(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.Bullet,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),it=ct,_=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},R=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=_(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.Column,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),Q=R,k=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},g=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=k(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.Funnel,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),O=g,F=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},V=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=F(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.Histogram,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),rt=V,ot=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},st=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=ot(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.Line,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),Mt=st,yt=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},xt=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=yt(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.Box,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),Ot=xt,jt=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},Dt=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=jt(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.Liquid,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),zt=Dt,Tt=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},Wt=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=Tt(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.Heatmap,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),Ht=Wt,re=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},pe=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=re(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.Pie,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),me=pe,Se=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},Le=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=Se(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.Gauge,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),Je=Le,On=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},gn=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=On(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.Progress,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),Wn=gn,kn=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},Vn=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=kn(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.Radar,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),Dn=Vn,Nn=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},Qn=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=Nn(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.RingProgress,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),ir=Qn,hr=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},Sr=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=hr(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.Rose,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),mr=Sr,dr=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},Br=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=dr(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.Scatter,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),ii=Br,mi=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},Pi=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=mi(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.TinyArea,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),sa=Pi,Pa=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},Mi=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=Pa(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.TinyColumn,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),Ki=Mi,fa=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},oa=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=fa(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.DualAxes,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),pa=oa,La=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},Yr=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=La(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.TinyLine,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),Sa=Yr,Pr=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},si=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=Pr(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.Waterfall,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),ti=si,$r=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},ui=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=$r(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.WordCloud,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),li=ui,xi=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},Ci=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=xi(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.Sunburst,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),di=Ci,Ti=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},pi=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=Ti(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.Stock,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),Ni=pi,Bi=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},Fi=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=Bi(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.RadialBar,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),ma=Fi,ua=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},Ra=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=ua(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.Sankey,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),xa=Ra,Ma=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},Qi=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=Ma(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.Treemap,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),ka=Qi,vo=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},za=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=vo(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.MultiView,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),Ga=za,eo=function(_t,Xt){var Ee={};for(var Vt in _t)Object.prototype.hasOwnProperty.call(_t,Vt)&&Xt.indexOf(Vt)<0&&(Ee[Vt]=_t[Vt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ce=0,Vt=Object.getOwnPropertySymbols(_t);ce<Vt.length;ce++)Xt.indexOf(Vt[ce])<0&&Object.prototype.propertyIsEnumerable.call(_t,Vt[ce])&&(Ee[Vt[ce]]=_t[Vt[ce]]);return Ee},ae=Object(H.forwardRef)(function(_t,Xt){var Ee=_t.chartRef,Vt=_t.style,ce=Vt===void 0?{height:"100%"}:Vt,yn=_t.className,Bn=_t.loading,Zn=_t.loadingTemplate,Kn=_t.errorTemplate,$e=eo(_t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),je=E(y.BidirectionalBar,$e),L=je.chart,Et=je.container;return Object(H.useEffect)(function(){c(Ee,L.current)},[L.current]),Object(H.useImperativeHandle)(Xt,function(){return{getChart:function(){return L.current}}}),i.a.createElement(x,{errorTemplate:Kn},Bn&&i.a.createElement(Lt,{loadingTemplate:Zn}),i.a.createElement("div",{className:yn,style:ce,ref:Et}))}),Kt=ae,te=w("fD4D"),Oe=function(){return Oe=Object.assign||function(_t){for(var Xt,Ee=1,Vt=arguments.length;Ee<Vt;Ee++){Xt=arguments[Ee];for(var ce in Xt)Object.prototype.hasOwnProperty.call(Xt,ce)&&(_t[ce]=Xt[ce])}return _t},Oe.apply(this,arguments)};te.default.registerNode("card-node",{draw:function(Xt,Ee){var Vt=Xt&&Xt.color?Xt.color:"#5B8FF9",ce=Xt&&Xt.size?Xt.size:[100,30];typeof ce=="number"&&(ce=[ce,ce]);var yn=Xt&&Xt.style?Xt.style:{};yn=Object.assign({radius:2,fill:"#fff"},yn),Vt=yn.stroke||"#5B8FF9";var Bn=yn.radius||0,Zn=Ee.addShape("rect",{attrs:Oe({x:-ce[0]/2,y:-ce[1]/2,width:ce[0],height:ce[1],stroke:Vt},yn),name:"main-box",draggable:!0}),Kn=(Xt==null?void 0:Xt.title)||(Xt==null?void 0:Xt.label),$e,je=Xt&&Xt.labelCfg&&Xt.labelCfg.style?Xt.labelCfg.style:{};if(Kn){var L=Object.assign({fill:"#fff"},je);$e=Ee.addShape("text",{attrs:Oe(Oe({textBaseline:"top",x:-ce[0]/2+8,y:-ce[1]/2+2,text:Kn},L),{fill:"#fff"}),name:"title"})}var Et=$e?$e.getBBox():{height:ce[1]/2},$t=Ee.addShape("rect",{attrs:{x:-ce[0]/2,y:-ce[1]/2,width:ce[0],height:Et.height+4,fill:Vt,radius:[Bn,Bn,0,0]},name:"title-rect",draggable:!0});$e&&$e.toFront();var ye;(Xt==null?void 0:Xt.children)&&(ye=Ee.addShape("marker",{attrs:{x:ce[0]/2,y:0,r:6,cursor:"pointer",symbol:Xt.collapsed?te.default.Marker.expand:te.default.Marker.collapse,stroke:Vt,lineWidth:1,fill:"#fff"},name:"collapse-icon"}));var Zt=Xt&&Xt.description?Xt.description:void 0,de=$t.getBBox(),he;if(Zt&&(he=Ee.addShape("text",{attrs:Oe({textBaseline:"top",x:-ce[0]/2+8,y:-ce[1]/2+de.height+8,text:Zt},je),name:"description"})),he){var le=he.getBBox(),Me=de.height+16+le.height,Ve=ce[0]>le.width+16?ce[0]:le.width+16;Zn.attr({width:Ve,height:Me}),$t==null||$t.attr("width",Ve),ye==null||ye.attr({x:Ve-ce[0]/2,y:Me/2-ce[1]/2})}return Zn},update:void 0},"single-node"),te.default.registerNode("round-rect",{drawShape:function(Xt,Ee){var Vt=Xt&&Xt.color?Xt.color:"#5B8FF9",ce=Xt&&Xt.size?Xt.size:[100,30];typeof ce=="number"&&(ce=[ce,ce]);var yn=Xt&&Xt.style?Xt.style:{};yn.stroke&&(Vt=yn.stroke);var Bn=yn&&yn.fill?yn.fill:"#fff";yn=Object.assign({width:ce[0],height:ce[1],radius:ce[1]/2,fill:Bn,lineWidth:1.2,stroke:Vt},yn);var Zn=Ee.addShape("rect",{attrs:Oe({x:-ce[0]/2,y:-ce[1]/2},yn),name:"rect-shape"});return Ee.addShape("circle",{attrs:{x:-ce[0]/2,y:0,r:3,fill:yn.stroke},name:"circle-shape"}),Ee.addShape("circle",{attrs:{x:ce[0]/2,y:0,r:3,fill:yn.stroke},name:"circle-shape2"}),Zn},getAnchorPoints:function(){return[[0,.5],[1,.5]]},update:function(Xt,Ee){var Vt=Ee.getContainer(),ce=Vt.get("children"),yn=ce[0],Bn=ce[1],Zn=ce[2],Kn=Xt.style&&Xt.style.stroke?Xt.style.stroke:"#5B8FF9";Kn&&(yn.attr("stroke",Kn),Bn.attr("fill",Kn),Zn.attr("fill",Kn))}},"single-node");var Ze=function(Xt){te.default.registerNode("icon-node",{options:{size:[60,20],stroke:"#91d5ff",fill:"#91d5ff"},draw:function(Vt,ce){var yn=this.getShapeStyle(Vt),Bn=(Vt||{}).labelCfg,Zn=Bn===void 0?{}:Bn,Kn=ce.addShape("rect",{attrs:Oe(Oe({},yn),{x:0,y:0})}),$e={fill:"#e6fffb"},je="https://g.alicdn.com/cm-design/arms-trace/1.0.155/styles/armsTrace/images/TAIR.png";return(Vt==null?void 0:Vt.leftIcon)&&($e=Object.assign({},$e,Vt.leftIcon.style),je=Vt.leftIcon.img),ce.addShape("rect",{attrs:Oe({x:1,y:1,width:38,height:yn.height-2},$e)}),ce.addShape("image",{attrs:{x:8,y:8,width:24,height:24,img:je},name:"image-shape"}),Xt.enableEdit&&(ce.addShape("marker",{attrs:{x:yn.width/3,y:yn.height+6,r:6,stroke:"#73d13d",cursor:"pointer",symbol:te.default.Marker.expand},name:"add-item"}),ce.addShape("marker",{attrs:{x:yn.width*2/3,y:yn.height+6,r:6,stroke:"#ff4d4f",cursor:"pointer",symbol:te.default.Marker.collapse},name:"remove-item"})),(Vt==null?void 0:Vt.label)&&ce.addShape("text",{attrs:Oe(Oe({},Zn.style),{text:Vt.label,x:yn.width/2,y:yn.height/1.5})}),Kn}},"rect")};te.default.registerEdge("fund-polyline",{draw:function(Xt,Ee){var Vt=Xt==null?void 0:Xt.startPoint,ce=Xt==null?void 0:Xt.endPoint,yn=ce.y-Vt.y,Bn=yn!==0?500/Math.abs(yn):0,Zn=16,Kn=yn<0?Zn:-Zn,$e={x:Vt.x+Bn,y:ce.y+Kn},je={x:$e.x+Zn,y:ce.y},L={x:($e.x-Vt.x)*(ce.y-Vt.y)/($e.y-Vt.y)+Vt.x,y:ce.y},Et=[["M",Vt.x,Vt.y],["L",$e.x,$e.y],["Q",L.x,L.y,je.x,je.y],["L",ce.x,ce.y]];yn===0&&(Et=[["M",Vt.x,Vt.y],["L",ce.x,ce.y]]);var $t=(Xt||{}).style,ye=Ee.addShape("path",{attrs:{path:Et,stroke:$t.stroke||(Xt==null?void 0:Xt.colorMap)&&Xt.colorMap[Xt.dataType]?(Xt==null?void 0:Xt.colorMap)[Xt==null?void 0:Xt.dataType]:"#5B8FF9",lineWidth:$t.lineWidth||1.2,endArrow:!1},name:"path-shape"}),Zt=0,de=8,he;if((Xt==null?void 0:Xt.label)&&(he=Ee.addShape("text",{attrs:{text:Xt.label,x:je.x+Zt,y:ce.y-de-2,fontSize:14,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-label"})),Xt==null?void 0:Xt.dataType){var le=he?he.getBBox():{height:0};Ee.addShape("text",{attrs:{text:Xt.dataType,x:je.x+Zt,y:ce.y-de-le.height-2,fontSize:10,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-type"})}return(Xt==null?void 0:Xt.subLabel)&&Ee.addShape("text",{attrs:{text:Xt.subLabel,x:je.x+Zt,y:ce.y+de+4,fontSize:12,fontWeight:300,textAlign:"left",textBaseline:"middle",fill:"#000"},name:"text-shape-sub-label"}),ye},update:void 0},"single-edge"),te.default.registerEdge("flow-line",{draw:function(Xt,Ee){var Vt=Xt==null?void 0:Xt.startPoint,ce=Xt==null?void 0:Xt.endPoint,yn=(Xt||{}).style,Bn=yn===void 0?{}:yn,Zn=Ee.addShape("path",{attrs:{stroke:Bn.stroke,endArrow:Bn.endArrow,path:[["M",Vt.x,Vt.y],["L",Vt.x,(Vt.y+ce.y)/2],["L",ce.x,(Vt.y+ce.y)/2],["L",ce.x,ce.y]]}});return Zn}});var An=function(){return An=Object.assign||function(_t){for(var Xt,Ee=1,Vt=arguments.length;Ee<Vt;Ee++){Xt=arguments[Ee];for(var ce in Xt)Object.prototype.hasOwnProperty.call(Xt,ce)&&(_t[ce]=Xt[ce])}return _t},An.apply(this,arguments)},qn={show:!1,size:[150,100],type:"keyShape"},rr=function(Xt,Ee,Vt){var ce,yn;return Vt&&Vt.current&&(ce=Vt.current.offsetWidth,yn=Vt.current.offsetHeight||500),!Xt&&!ce||!Ee&&!yn?(console.warn("\u8BF7\u4E3A Graph \u6307\u5B9A width \u4E0E height\uFF01\u5426\u5219\u5C06\u4F7F\u7528\u9ED8\u8BA4\u503C 500 * 500"),[500,500]):[Xt||ce||500,Ee||yn||500]},tn=function(Xt,Ee){if(!(!Ee||Ee.destroyed)&&Xt&&Xt.show){var Vt=Object.assign(qn,Xt),ce=new te.default.Minimap(An({},Vt));return Ee.addPlugin(ce),ce}};function sn(_t,Xt,Ee){var Vt=Object(H.useRef)(),ce=Xt.data,yn=Xt.nodeStyle,Bn=Xt.nodeAnchorPoints,Zn=Xt.nodeType,Kn=Xt.edgeType,$e=Xt.edgeStyle,je=Xt.width,L=Xt.height,Et=Xt.layout,$t=Xt.minimapCfg,ye=Xt.behaviors,Zt=Xt.nodeLabelCfg,de=Xt.edgeLabelCfg,he;return Object(H.useEffect)(function(){_t&&!_t.destroyed&&(_t.changeData(ce),_t.layout())},[ce]),Object(H.useEffect)(function(){_t&&!_t.destroyed&&_t.getNodes().forEach(function(le){_t.updateItem(le,{type:Zn,style:yn,anchorPoints:Bn,labelCfg:Zt})})},[yn,Bn,Zn]),Object(H.useEffect)(function(){_t&&!_t.destroyed&&_t.getEdges().forEach(function(le){_t.updateItem(le,{type:Kn,style:$e,labelCfg:de})})},[$e,Kn]),Object(H.useEffect)(function(){if(_t&&!_t.destroyed){var le=rr(je,L,Ee);_t.changeSize(le[0],le[1])}},[Ee,je,L]),Object(H.useEffect)(function(){_t&&!_t.destroyed&&_t.updateLayout(Et)},[Et]),Object(H.useEffect)(function(){if(!(!$t||!_t||_t.destroyed))if($t.show)he=tn($t,_t),he&&he.updateCanvas();else{var le=_t.get("plugins")[0];le&&_t.removePlugin(le)}},[$t]),Object(H.useEffect)(function(){if(_t&&!_t.destroyed){var le=_t.get("modes").default,Me=[];le.forEach(function(Ve){Object(t.isObject)(Ve)?Me.push(Ve.type):Object(t.isString)(Ve)&&Me.push(Ve)}),_t.removeBehaviors(Me,"default"),_t.addBehaviors(ye,"default")}},[ye]),Object(H.useEffect)(function(){if(Vt.current=_t,_t&&!_t.destroyed)return function(){_t.destroy(),_t=void 0}},[]),{graphHook:Vt}}var un={hover:{stroke:"#1890ff",lineWidth:2}},ur={fill:"#91d5ff",stroke:"#40a9ff",radius:5},jr={stroke:"#91d5ff",endArrow:{path:"M 0,0 L 12, 6 L 9,0 L 12, -6 Z",fill:"#91d5ff",d:-20}},wr={type:"compactBox",direction:"TB",getId:function(Xt){return Xt.id},getHeight:function(){return 16},getWidth:function(){return 16},getVGap:function(){return 40},getHGap:function(){return 70}},yr={style:{fill:"#000",fontSize:12}},ni=function(Xt){var Ee=Xt.data,Vt=Xt.className,ce=Xt.style,yn=Xt.width,Bn=Xt.height,Zn=Xt.nodeType,Kn=Zn===void 0?"rect":Zn,$e=Xt.edgeType,je=$e===void 0?"flow-line":$e,L=Xt.collapseExpand,Et=L===void 0?!1:L,$t=Xt.nodeSize,ye=$t===void 0?[120,40]:$t,Zt=Xt.nodeLabelCfg,de=Zt===void 0?yr:Zt,he=Xt.edgeLabelCfg,le=he===void 0?yr:he,Me=Xt.layout,Ve=Me===void 0?wr:Me,Ye=Xt.enableEdit,ke=Ye===void 0?!1:Ye,nn=Xt.minimapCfg,Re=Xt.nodeStyle,hn=Re===void 0?ur:Re,pn=Xt.edgeStyle,on=pn===void 0?jr:pn,mn=Xt.nodeStateStyles,jn=mn===void 0?un:mn,Ie=Xt.edgeStateStyles,fe=Ie===void 0?un:Ie,Ne=Xt.handleNodeClick,Fe=Xt.handleEdgeClick,rn=Xt.handleNodeHover,ln=Xt.handleNodeUnHover,_e=Xt.handleEdgeHover,dn=Xt.handleEdgeUnHover,Sn=Xt.handleCanvasClick,tr=Xt.graphRef,Pn,Fn={data:Ee,className:Vt,style:ce,width:yn,height:Bn,nodeType:Kn,edgeType:je,collapseExpand:Et,nodeSize:ye,nodeLabelCfg:de,edgeLabelCfg:le,layout:Ve,enableEdit:ke,minimapCfg:nn,nodeStyle:hn,edgeStyle:on,nodeStateStyles:jn,edgeStateStyles:fe,handleNodeClick:Ne,handleEdgeClick:Fe,handleNodeHover:rn,handleNodeUnHover:ln,handleEdgeHover:_e,handleEdgeUnHover:dn,handleCanvasClick:Sn,graphRef:tr},Cr=i.a.useRef(null);return sn(Pn,Fn,Cr),Object(H.useEffect)(function(){var fi=rr(yn,Bn,Cr);return(!Pn||Pn.destroyed)&&(Kn==="icon-node"&&Ze({enableEdit:ke}),Pn=new te.default.TreeGraph({container:Cr.current,width:fi[0],height:fi[1],linkCenter:!0,modes:{default:["drag-canvas","zoom-canvas"]},defaultNode:{type:Kn,size:ye,style:hn,labelCfg:de},defaultEdge:{type:je,style:on,labelCfg:le},nodeStateStyles:jn,edgeStateStyles:fe,layout:Ve}),tr&&(tr.current=Pn)),tn(nn,Pn),Pn.data(Ee),Pn.render(),Pn.fitView(),Et&&Pn.addBehaviors({type:"collapse-expand"},"default"),Pn.on("node:mouseenter",function(ri){var zr=ri.item;Pn.setItemState(zr,"hover",!0),rn&&rn(zr,Pn)}),Pn.on("node:mouseleave",function(ri){var zr=ri.item;Pn.setItemState(zr,"hover",!1),ln&&ln(zr,Pn)}),Pn.on("node:click",function(ri){var zr=ri.item,wi=ri.target,Ai=wi.get("type"),gi=wi.get("name");if(Ai==="marker"){var Oa=zr.getModel();if(gi==="add-item"){Oa.children||(Oa.children=[]);var Aa=Math.random().toString(36).slice(-8);Oa.children.push({id:Aa,label:Aa}),Pn.updateChild(Oa,Oa.id)}else gi==="remove-item"&&Pn.removeChild(Oa.id)}Ne&&Ne(zr,Pn)}),Pn.on("edge:mouseenter",function(ri){var zr=ri.item;Pn.setItemState(zr,"hover",!0),_e&&_e(zr,Pn)}),Pn.on("edge:mouseleave",function(ri){var zr=ri.item;Pn.setItemState(zr,"hover",!1),dn&&dn(zr,Pn)}),Pn.on("edge:click",function(ri){var zr=ri.item;Fe&&Fe(zr,Pn)}),Pn.on("canvas:click",function(ri){Sn&&Sn(Pn)}),function(){return Pn.destroy()}},[]),i.a.createElement(x,null,i.a.createElement("div",{className:Vt,style:ce,ref:Cr}))},_r=ni,Fr={hover:{stroke:"#1890ff",lineWidth:2}},Lr=[120,40],Gr={stroke:"#40a9ff"},Hr=[[.5,0],[.5,1]],ei={stroke:"#91d5ff",endArrow:{path:te.default.Arrow.vee(10,10),fill:"#91d5ff"}},Kr={type:"dagre",rankdir:"TB",nodesepFunc:function(Xt){return 0},ranksepFunc:function(Xt){return 0},controlPoints:!0},Qr={style:{fill:"#000",fontSize:12}},Oi=function(Xt){var Ee=Xt.data,Vt=Xt.className,ce=Xt.style,yn=Xt.width,Bn=Xt.height,Zn=Xt.nodeType,Kn=Zn===void 0?"modelRect":Zn,$e=Xt.edgeType,je=$e===void 0?"polyline":$e,L=Xt.behaviors,Et=L===void 0?["zoom-canvas","drag-canvas"]:L,$t=Xt.nodeSize,ye=$t===void 0?Lr:$t,Zt=Xt.nodeLabelCfg,de=Zt===void 0?Qr:Zt,he=Xt.edgeLabelCfg,le=he===void 0?Qr:he,Me=Xt.nodeAnchorPoints,Ve=Me===void 0?Hr:Me,Ye=Xt.layout,ke=Ye===void 0?Kr:Ye,nn=Xt.minimapCfg,Re=Xt.nodeStyle,hn=Re===void 0?Gr:Re,pn=Xt.edgeStyle,on=pn===void 0?ei:pn,mn=Xt.nodeStateStyles,jn=mn===void 0?Fr:mn,Ie=Xt.edgeStateStyles,fe=Ie===void 0?Fr:Ie,Ne=Xt.handleEdgeClick,Fe=Xt.handleEdgeHover,rn=Xt.handleEdgeUnHover,ln=Xt.handleNodeClick,_e=Xt.handleNodeHover,dn=Xt.handleNodeUnHover,Sn=Xt.handleCanvasClick,tr=Xt.graphRef,Pn,Fn={data:Ee,className:Vt,style:ce,width:yn,height:Bn,nodeType:Kn,edgeType:je,behaviors:Et,nodeSize:ye,nodeLabelCfg:de,edgeLabelCfg:le,nodeAnchorPoints:Ve,layout:ke,minimapCfg:nn,nodeStyle:hn,edgeStyle:on,nodeStateStyles:jn,edgeStateStyles:fe,handleEdgeClick:Ne,handleEdgeHover:Fe,handleEdgeUnHover:rn,handleNodeClick:ln,handleNodeHover:_e,handleNodeUnHover:dn,handleCanvasClick:Sn,graphRef:tr},Cr=i.a.useRef(null);return sn(Pn,Fn,Cr),Object(H.useEffect)(function(){var fi=rr(yn,Bn,Cr);return(!Pn||Pn.destroyed)&&(Pn=new te.default.Graph({container:Cr.current,width:fi[0],height:fi[1],modes:{default:Et},defaultNode:{type:Kn,size:ye,style:hn,anchorPoints:Ve,labelCfg:de},defaultEdge:{type:je,style:on,labelCfg:le},nodeStateStyles:jn,edgeStateStyles:fe,layout:ke}),tr&&(tr.current=Pn)),tn(nn,Pn),Pn.data(Ee),Pn.render(),Pn.fitView(),Pn.on("edge:mouseenter",function(ri){var zr=ri.item;Pn.setItemState(zr,"hover",!0),Fe&&Fe(zr,Pn)}),Pn.on("node:mouseenter",function(ri){var zr=ri.item;Pn.setItemState(zr,"hover",!1),_e&&_e(zr,Pn)}),Pn.on("edge:mouseleave",function(ri){var zr=ri.item;Pn.setItemState(zr,"hover",!1),rn&&rn(zr,Pn)}),Pn.on("node:mouseleave",function(ri){var zr=ri.item;Pn.setItemState(zr,"hover",!1),dn&&dn(zr,Pn)}),Pn.on("edge:click",function(ri){var zr=ri.item;Ne&&Ne(zr,Pn)}),Pn.on("node:click",function(ri){var zr=ri.item;ln&&ln(zr,Pn)}),Pn.on("canvas:click",function(ri){Sn&&Sn(Pn)}),function(){return Pn.destroy()}},[]),i.a.createElement(x,null,i.a.createElement("div",{className:Vt,style:ce,ref:Cr}))},Ri=Oi,Si={hover:{stroke:"#1890ff",lineWidth:2}},Gi=[150,30],ca={stroke:"#72CC4A",fill:"#f00"},ha=[[.5,0],[.5,1]],na={stroke:"#91d5ff",endArrow:{path:te.default.Arrow.vee(10,10),fill:"#91d5ff"}},Zi={type:"dagre",rankdir:"LR",nodesep:30,ranksep:50},ve={style:{fill:"#000000A6",fontSize:10}},U=function(Xt){var Ee=Xt.data,Vt=Xt.className,ce=Xt.style,yn=Xt.width,Bn=Xt.height,Zn=Xt.nodeType,Kn=Zn===void 0?"round-rect":Zn,$e=Xt.edgeType,je=$e===void 0?"fund-polyline":$e,L=Xt.behaviors,Et=L===void 0?["zoom-canvas","drag-canvas"]:L,$t=Xt.nodeSize,ye=$t===void 0?Gi:$t,Zt=Xt.nodeLabelCfg,de=Zt===void 0?ve:Zt,he=Xt.edgeLabelCfg,le=he===void 0?ve:he,Me=Xt.nodeAnchorPoints,Ve=Me===void 0?ha:Me,Ye=Xt.layout,ke=Ye===void 0?Zi:Ye,nn=Xt.minimapCfg,Re=Xt.nodeStyle,hn=Re===void 0?ca:Re,pn=Xt.edgeStyle,on=pn===void 0?na:pn,mn=Xt.nodeStateStyles,jn=mn===void 0?Si:mn,Ie=Xt.edgeStateStyles,fe=Ie===void 0?Si:Ie,Ne=Xt.colorMap,Fe=Ne===void 0?{}:Ne,rn=Xt.handleEdgeClick,ln=Xt.handleEdgeHover,_e=Xt.handleEdgeUnHover,dn=Xt.handleNodeClick,Sn=Xt.handleNodeHover,tr=Xt.handleNodeUnHover,Pn=Xt.handleCanvasClick,Fn=Xt.graphRef,Cr,fi=i.a.useRef(null),ri={data:Ee,className:Vt,style:ce,width:yn,height:Bn,nodeType:Kn,edgeType:je,behaviors:Et,nodeSize:ye,nodeLabelCfg:de,edgeLabelCfg:le,nodeAnchorPoints:Ve,layout:ke,minimapCfg:nn,nodeStyle:hn,edgeStyle:on,nodeStateStyles:jn,edgeStateStyles:fe,colorMap:Fe,handleEdgeClick:rn,handleEdgeHover:ln,handleEdgeUnHover:_e,handleNodeClick:dn,handleNodeHover:Sn,handleNodeUnHover:tr,handleCanvasClick:Pn,graphRef:Fn};return sn(Cr,ri,fi),Object(H.useEffect)(function(){var zr=rr(yn,Bn,fi);(!Cr||Cr.destroyed)&&(Cr=new te.default.Graph({container:fi.current,width:zr[0],height:zr[1],modes:{default:Et},defaultNode:{type:Kn,size:ye,style:hn,anchorPoints:Ve,labelCfg:de},defaultEdge:{type:je,style:on,colorMap:Fe,labelCfg:le},nodeStateStyles:jn,edgeStateStyles:fe,layout:ke}),Fn&&(Fn.current=Cr)),tn(nn,Cr),Cr.data(Ee),Cr.render();var wi=Cr.getEdges();return wi.forEach(function(Ai){var gi=Ai.getKeyShape(),Oa=gi.attr("stroke"),Aa=Ai.getTarget();Aa.update({style:{stroke:Oa}})}),Cr.fitView(),Cr.on("edge:mouseenter",function(Ai){var gi=Ai.item;Cr.setItemState(gi,"hover",!0),ln&&ln(gi,Cr)}),Cr.on("edge:mouseleave",function(Ai){var gi=Ai.item;Cr.setItemState(gi,"hover",!1),_e&&_e(gi,Cr)}),Cr.on("edge:click",function(Ai){var gi=Ai.item;rn&&rn(gi,Cr)}),Cr.on("node:mouseenter",function(Ai){var gi=Ai.item;Cr.setItemState(gi,"hover",!1),Sn&&Sn(gi,Cr)}),Cr.on("node:mouseleave",function(Ai){var gi=Ai.item;Cr.setItemState(gi,"hover",!1),tr&&tr(gi,Cr)}),Cr.on("node:click",function(Ai){var gi=Ai.item;dn&&dn(gi,Cr)}),Cr.on("canvas:click",function(Ai){Pn&&Pn(Cr)}),function(){return Cr.destroy()}},[]),i.a.createElement(x,null,i.a.createElement("div",{className:Vt,style:ce,ref:fi}))},G=U,nt={hover:{stroke:"#1890ff",lineWidth:2}},vt=[120,40],Gt={stroke:"#40a9ff"},Jt=[[0,.5],[1,.5]],ie={stroke:"#ccc",endArrow:{path:te.default.Arrow.vee(10,10),fill:"#ccc"}},ue={type:"indented",direction:"LR",dropCap:!1,indent:250,getHeight:function(){return 60},getWidth:function(Xt){return 100}},Ce={style:{fill:"#000",fontSize:12}},we=function(Xt){var Ee=Xt.data,Vt=Xt.className,ce=Xt.style,yn=Xt.width,Bn=Xt.height,Zn=Xt.nodeType,Kn=Zn===void 0?"card-node":Zn,$e=Xt.edgeType,je=$e===void 0?"cubic-horizontal":$e,L=Xt.behaviors,Et=L===void 0?["zoom-canvas","drag-canvas"]:L,$t=Xt.nodeSize,ye=$t===void 0?vt:$t,Zt=Xt.nodeLabelCfg,de=Zt===void 0?Ce:Zt,he=Xt.nodeAnchorPoints,le=he===void 0?Jt:he,Me=Xt.layout,Ve=Me===void 0?ue:Me,Ye=Xt.minimapCfg,ke=Xt.nodeStyle,nn=ke===void 0?Gt:ke,Re=Xt.edgeStyle,hn=Re===void 0?ie:Re,pn=Xt.nodeStateStyles,on=pn===void 0?nt:pn,mn=Xt.edgeStateStyles,jn=mn===void 0?nt:mn,Ie=Xt.collapseExpand,fe=Ie===void 0?!0:Ie,Ne=Xt.handleEdgeClick,Fe=Xt.handleEdgeHover,rn=Xt.handleEdgeUnHover,ln=Xt.handleNodeClick,_e=Xt.handleNodeHover,dn=Xt.handleNodeUnHover,Sn=Xt.handleCanvasClick,tr=Xt.graphRef,Pn,Fn=i.a.useRef(null),Cr={data:Ee,className:Vt,style:ce,width:yn,height:Bn,nodeType:Kn,edgeType:je,behaviors:Et,nodeSize:ye,nodeLabelCfg:de,nodeAnchorPoints:le,layout:Ve,minimapCfg:Ye,nodeStyle:nn,edgeStyle:hn,nodeStateStyles:on,edgeStateStyles:jn,collapseExpand:fe,handleEdgeClick:Ne,handleEdgeHover:Fe,handleEdgeUnHover:rn,handleNodeClick:ln,handleNodeHover:_e,handleNodeUnHover:dn,handleCanvasClick:Sn,graphRef:tr};return sn(Pn,Cr,Fn),Object(H.useEffect)(function(){var fi=rr(yn,Bn,Fn);if((!Pn||Pn.destroyed)&&(Pn=new te.default.TreeGraph({container:Fn.current,width:fi[0],height:fi[1],modes:{default:Et},defaultNode:{type:Kn,size:ye,style:nn,anchorPoints:le,labelCfg:de},defaultEdge:{type:je,style:hn},nodeStateStyles:on,edgeStateStyles:jn,layout:Ve}),tr&&(tr.current=Pn)),tn(Ye,Pn),Pn.data(Ee),Pn.render(),Pn.fitView(),fe){var ri=function(wi){var Ai=wi.item;wi.target.get("name")==="collapse-icon"?(Pn.updateItem(Ai,{collapsed:!Ai.getModel().collapsed}),Pn.layout()):ln&&ln(Ai,Pn)};Pn.on("node:click",function(zr){ri(zr)}),Pn.on("node:touchstart",function(zr){ri(zr)})}return Pn.on("edge:mouseenter",function(zr){var wi=zr.item;Pn.setItemState(wi,"hover",!0),Fe&&Fe(wi,Pn)}),Pn.on("edge:mouseleave",function(zr){var wi=zr.item;Pn.setItemState(wi,"hover",!1),rn&&rn(wi,Pn)}),Pn.on("edge:click",function(zr){var wi=zr.item;Ne&&Ne(wi,Pn)}),Pn.on("edge:touchstart",function(zr){var wi=zr.item;Ne&&Ne(wi,Pn)}),Pn.on("node:mouseenter",function(zr){var wi=zr.item;Pn.setItemState(wi,"hover",!1),_e&&_e(wi,Pn)}),Pn.on("node:mouseleave",function(zr){var wi=zr.item;Pn.setItemState(wi,"hover",!1),dn&&dn(wi,Pn)}),Pn.on("canvas:click",function(zr){Sn&&Sn(Pn)}),Pn.on("canvas:touchstart",function(zr){Sn&&Sn(Pn)}),function(){return Pn.destroy()}},[]),i.a.createElement(x,null,i.a.createElement("div",{className:Vt,style:ce,ref:Fn}))},cn=we,Cn={Area:dt,Bar:wt,Box:Ot,Bullet:it,Column:Q,Funnel:O,Histogram:rt,Line:Mt,Liquid:zt,Heatmap:Ht,Pie:me,Progress:Wn,Radar:Dn,RingProgress:ir,Rose:mr,Scatter:ii,TinyArea:sa,TinyColumn:Ki,TinyLine:Sa,Waterfall:ti,WordCloud:li,Sunburst:di,DualAxes:pa,Stock:Ni,RadialBar:ma,Gauge:Je,Sankey:xa,Treemap:ka,MultiView:Ga,BidirectionalBar:Kt,OrganizationTreeGraph:_r,DagreGraph:Ri,IndentedTree:cn,DagreFundFlowGraph:G,G2:y.G2}},"0Cz8":function(qe,Pt,w){var H=w("Xi7e"),i=w("ebwN"),y=w("e4Nc"),t=200;function n(u,p){var b=this.__data__;if(b instanceof H){var c=b.__data__;if(!i||c.length<t-1)return c.push([u,p]),this.size=++b.size,this;b=this.__data__=new y(c)}return b.set(u,p),this.size=b.size,this}qe.exports=n},"0JQy":function(qe,Pt){var w="\\ud800-\\udfff",H="\\u0300-\\u036f",i="\\ufe20-\\ufe2f",y="\\u20d0-\\u20ff",t=H+i+y,n="\\ufe0e\\ufe0f",u="["+w+"]",p="["+t+"]",b="\\ud83c[\\udffb-\\udfff]",c="(?:"+p+"|"+b+")",S="[^"+w+"]",I="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",r="\\u200d",s=c+"?",d="["+n+"]?",C="(?:"+r+"(?:"+[S,I,m].join("|")+")"+d+s+")*",E=d+s+C,A="(?:"+[S+p+"?",p,I,m,u].join("|")+")",f=RegExp(b+"(?="+b+")|"+A+E,"g");function x(j){return j.match(f)||[]}qe.exports=x},"0Xep":function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return H}),w.d(Pt,"d",function(){return i}),w.d(Pt,"b",function(){return y}),w.d(Pt,"c",function(){return t});var H=0,i=1/2,y=1/2,t=.05},"0ycA":function(qe,Pt){function w(){return[]}qe.exports=w},"1//c":function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return i});var H=w("aFU3");function i(y,t,n){var u=new H.Event(t,n);u.target=y,u.propagationPath.push(y),y.emitDelegation(t,u);for(var p=y.getParent();p;)p.emitDelegation(t,u),u.propagationPath.push(p),p=p.getParent()}},"17Tr":function(qe,Pt,w){"use strict";var H=w("uCX8");w.d(Pt,"Annotation",function(){return H});var i=w("fP0w");w.d(Pt,"Axis",function(){return i});var y=w("/3+T");w.d(Pt,"Crosshair",function(){return y});var t=w("x3EW");w.d(Pt,"Grid",function(){return t});var n=w("5bFI");w.d(Pt,"Legend",function(){return n});var u=w("Ch+T");w.d(Pt,"Tooltip",function(){return u});var p=w("NmWf"),b=w("MeYt"),c=w("de35"),S=w("fFDA");w.d(Pt,"Slider",function(){return S.a});var I=w("3u8d");w.d(Pt,"Scrollbar",function(){return I.a});var m=w("vk7d"),r=w.n(m),s=w("uzHj"),d=w.n(s),C=w("1//c");w.d(Pt,"propagationDelegate",function(){return C.a});var E=w("u60a");w.d(Pt,"TOOLTIP_CSS_CONST",function(){return E})},"1MZV":function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return y});var H=new Map;function i(x,j){H.set(x,j)}function y(x){return H.get(x)}var t=function(x){var j=x.attr(),P=j.x,W=j.y,X=j.width,$=j.height;return{x:P,y:W,width:X,height:$}},n=function(x){var j=x.attr(),P=j.x,W=j.y,X=j.r;return{x:P-X,y:W-X,width:X*2,height:X*2}},u=w("EYNi");function p(x,j){return!x||!j?x||j:{minX:Math.min(x.minX,j.minX),minY:Math.min(x.minY,j.minY),maxX:Math.max(x.maxX,j.maxX),maxY:Math.max(x.maxY,j.maxY)}}function b(x,j){var P=x.get("startArrowShape"),W=x.get("endArrowShape"),X=null,$=null;return P&&(X=P.getCanvasBBox(),j=p(j,X)),W&&($=W.getCanvasBBox(),j=p(j,$)),j}var c=function(x){for(var j=x.attr(),P=j.points,W=[],X=[],$=0;$<P.length;$++){var ft=P[$];W.push(ft[0]),X.push(ft[1])}var Z=u.f.getBBoxByArray(W,X),lt=Z.x,pt=Z.y,gt=Z.width,ut=Z.height,Bt={minX:lt,minY:pt,maxX:lt+gt,maxY:pt+ut};return Bt=b(x,Bt),{x:Bt.minX,y:Bt.minY,width:Bt.maxX-Bt.minX,height:Bt.maxY-Bt.minY}},S=function(x){for(var j=x.attr(),P=j.points,W=[],X=[],$=0;$<P.length;$++){var ft=P[$];W.push(ft[0]),X.push(ft[1])}return u.f.getBBoxByArray(W,X)},I=w("vIgC"),m=function(x){var j=x.attr(),P=j.x,W=j.y,X=j.text,$=j.fontSize,ft=j.lineHeight,Z=j.font;Z||(Z=Object(I.a)(j));var lt=Object(I.c)(X,Z),pt;if(!lt)pt={x:P,y:W,width:0,height:0};else{var gt=j.textAlign,ut=j.textBaseline,Bt=Object(I.b)(X,$,ft),Lt={x:P,y:W-Bt};gt&&(gt==="end"||gt==="right"?Lt.x-=lt:gt==="center"&&(Lt.x-=lt/2)),ut&&(ut==="top"?Lt.y+=Bt:ut==="middle"&&(Lt.y+=Bt/2)),pt={x:Lt.x,y:Lt.y,width:lt,height:Bt}}return pt},r=w("LvGN"),s=w("iTfj");function d(x,j){for(var P=[],W=[],X=[],$=0;$<x.length;$++){var ft=x[$],Z=ft.currentPoint,lt=ft.params,pt=ft.prePoint,gt=void 0;switch(ft.command){case"Q":gt=u.e.box(pt[0],pt[1],lt[1],lt[2],lt[3],lt[4]);break;case"C":gt=u.b.box(pt[0],pt[1],lt[1],lt[2],lt[3],lt[4],lt[5],lt[6]);break;case"A":var ut=ft.arcParams;gt=u.a.box(ut.cx,ut.cy,ut.rx,ut.ry,ut.xRotation,ut.startAngle,ut.endAngle);break;default:P.push(Z[0]),W.push(Z[1]);break}gt&&(ft.box=gt,P.push(gt.x,gt.x+gt.width),W.push(gt.y,gt.y+gt.height)),j&&(ft.command==="L"||ft.command==="M")&&ft.prePoint&&ft.nextPoint&&X.push(ft)}P=P.filter(function(mt){return!Number.isNaN(mt)}),W=W.filter(function(mt){return!Number.isNaN(mt)});var Bt=Math.min.apply(null,P),Lt=Math.min.apply(null,W),St=Math.max.apply(null,P),K=Math.max.apply(null,W);if(X.length===0)return{x:Bt,y:Lt,width:St-Bt,height:K-Lt};for(var $=0;$<X.length;$++){var ft=X[$],Z=ft.currentPoint,dt=void 0;Z[0]===Bt?(dt=C(ft,j),Bt=Bt-dt.xExtra):Z[0]===St&&(dt=C(ft,j),St=St+dt.xExtra),Z[1]===Lt?(dt=C(ft,j),Lt=Lt-dt.yExtra):Z[1]===K&&(dt=C(ft,j),K=K+dt.yExtra)}return{x:Bt,y:Lt,width:St-Bt,height:K-Lt}}function C(x,j){var P=x.prePoint,W=x.currentPoint,X=x.nextPoint,$=Math.pow(W[0]-P[0],2)+Math.pow(W[1]-P[1],2),ft=Math.pow(W[0]-X[0],2)+Math.pow(W[1]-X[1],2),Z=Math.pow(P[0]-X[0],2)+Math.pow(P[1]-X[1],2),lt=Math.acos(($+ft-Z)/(2*Math.sqrt($)*Math.sqrt(ft)));if(!lt||Math.sin(lt)===0||Object(s.isNumberEqual)(lt,0))return{xExtra:0,yExtra:0};var pt=Math.abs(Math.atan2(X[1]-W[1],X[0]-W[0])),gt=Math.abs(Math.atan2(X[0]-W[0],X[1]-W[1]));pt=pt>Math.PI/2?Math.PI-pt:pt,gt=gt>Math.PI/2?Math.PI-gt:gt;var ut={xExtra:Math.cos(lt/2-pt)*(j/2*(1/Math.sin(lt/2)))-j/2||0,yExtra:Math.cos(gt-lt/2)*(j/2*(1/Math.sin(lt/2)))-j/2||0};return ut}var E=function(x){var j=x.attr(),P=j.path,W=j.stroke,X=W?j.lineWidth:0,$=x.get("segments")||Object(r.e)(P),ft=d($,X),Z=ft.x,lt=ft.y,pt=ft.width,gt=ft.height,ut={minX:Z,minY:lt,maxX:Z+pt,maxY:lt+gt};return ut=b(x,ut),{x:ut.minX,y:ut.minY,width:ut.maxX-ut.minX,height:ut.maxY-ut.minY}},A=function(x){var j=x.attr(),P=j.x1,W=j.y1,X=j.x2,$=j.y2,ft=Math.min(P,X),Z=Math.max(P,X),lt=Math.min(W,$),pt=Math.max(W,$),gt={minX:ft,maxX:Z,minY:lt,maxY:pt};return gt=b(x,gt),{x:gt.minX,y:gt.minY,width:gt.maxX-gt.minX,height:gt.maxY-gt.minY}},f=function(x){var j=x.attr(),P=j.x,W=j.y,X=j.rx,$=j.ry;return{x:P-X,y:W-$,width:X*2,height:$*2}};i("rect",t),i("image",t),i("circle",n),i("marker",n),i("polyline",c),i("polygon",S),i("text",m),i("path",E),i("line",A),i("ellipse",f)},"1hJj":function(qe,Pt,w){var H=w("e4Nc"),i=w("ftKO"),y=w("3A9y");function t(n){var u=-1,p=n==null?0:n.length;for(this.__data__=new H;++u<p;)this.add(n[u])}t.prototype.add=t.prototype.push=i,t.prototype.has=y,qe.exports=t},"24YM":function(qe,Pt,w){"use strict";Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.SensorTabIndex=Pt.SensorClassName=Pt.SizeSensorId=void 0;var H="size-sensor-id";Pt.SizeSensorId=H;var i="size-sensor-object";Pt.SensorClassName=i;var y="-1";Pt.SensorTabIndex=y},"2dAf":function(qe,Pt,w){qe.exports={updateTime:"updateTime___2v8P8"}},"2gN3":function(qe,Pt,w){var H=w("Kz5y"),i=H["__core-js_shared__"];qe.exports=i},"3A9y":function(qe,Pt){function w(H){return this.__data__.has(H)}qe.exports=w},"3Fdi":function(qe,Pt){var w=Function.prototype,H=w.toString;function i(y){if(y!=null){try{return H.call(y)}catch(t){}try{return y+""}catch(t){}}return""}qe.exports=i},"3T7b":function(qe,Pt){},"3u8d":function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return p});var H=w("mrSG"),i=w("fIp6"),y=w("iTfj"),t=w("MeYt"),n={trackColor:"rgba(0,0,0,0)",thumbColor:"rgba(0,0,0,0.15)",size:8,lineCap:"round"},u={default:n,hover:{thumbColor:"rgba(0,0,0,0.2)"}},p=function(b){Object(H.b)(c,b);function c(){var S=b!==null&&b.apply(this,arguments)||this;return S.clearEvents=y.noop,S.onStartEvent=function(I){return function(m){S.isMobile=I,m.originalEvent.preventDefault();var r=I?Object(y.get)(m.originalEvent,"touches.0.clientX"):m.clientX,s=I?Object(y.get)(m.originalEvent,"touches.0.clientY"):m.clientY;S.startPos=S.cfg.isHorizontal?r:s,S.bindLaterEvent()}},S.bindLaterEvent=function(){var I=S.getContainerDOM(),m=[];S.isMobile?m=[Object(i.a)(I,"touchmove",S.onMouseMove),Object(i.a)(I,"touchend",S.onMouseUp),Object(i.a)(I,"touchcancel",S.onMouseUp)]:m=[Object(i.a)(I,"mousemove",S.onMouseMove),Object(i.a)(I,"mouseup",S.onMouseUp),Object(i.a)(I,"mouseleave",S.onMouseUp)],S.clearEvents=function(){m.forEach(function(r){r.remove()})}},S.onMouseMove=function(I){var m=S.cfg,r=m.isHorizontal,s=m.thumbOffset;I.preventDefault();var d=S.isMobile?Object(y.get)(I,"touches.0.clientX"):I.clientX,C=S.isMobile?Object(y.get)(I,"touches.0.clientY"):I.clientY,E=r?d:C,A=E-S.startPos;S.startPos=E,S.updateThumbOffset(s+A)},S.onMouseUp=function(I){I.preventDefault(),S.clearEvents()},S.onTrackClick=function(I){var m=S.cfg,r=m.isHorizontal,s=m.x,d=m.y,C=m.thumbLen,E=S.getContainerDOM(),A=E.getBoundingClientRect(),f=I.clientX,x=I.clientY,j=r?f-A.left-s-C/2:x-A.top-d-C/2,P=S.validateRange(j);S.updateThumbOffset(P)},S.onThumbMouseOver=function(){var I=S.cfg.theme.hover.thumbColor;S.getElementByLocalId("thumb").attr("stroke",I),S.draw()},S.onThumbMouseOut=function(){var I=S.cfg.theme.default.thumbColor;S.getElementByLocalId("thumb").attr("stroke",I),S.draw()},S}return c.prototype.setRange=function(S,I){this.set("minLimit",S),this.set("maxLimit",I);var m=this.getValue(),r=Object(y.clamp)(m,S,I);m!==r&&!this.get("isInit")&&this.setValue(r)},c.prototype.getRange=function(){var S=this.get("minLimit")||0,I=this.get("maxLimit")||1;return{min:S,max:I}},c.prototype.setValue=function(S){var I=this.getRange(),m=this.getValue();this.update({thumbOffset:(this.get("trackLen")-this.get("thumbLen"))*Object(y.clamp)(S,I.min,I.max)}),this.delegateEmit("valuechange",{originalValue:m,value:this.getValue()})},c.prototype.getValue=function(){return Object(y.clamp)(this.get("thumbOffset")/(this.get("trackLen")-this.get("thumbLen")),0,1)},c.prototype.getDefaultCfg=function(){var S=b.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},S),{name:"scrollbar",isHorizontal:!0,minThumbLen:20,thumbOffset:0,theme:u})},c.prototype.renderInner=function(S){this.renderTrackShape(S),this.renderThumbShape(S)},c.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},c.prototype.initEvent=function(){this.bindEvents()},c.prototype.renderTrackShape=function(S){var I=this.cfg,m=I.trackLen,r=I.theme,s=r===void 0?{default:{}}:r,d=s.default,C=d.lineCap,E=d.trackColor,A=d.size,f=this.get("isHorizontal")?{x1:0+A/2,y1:A/2,x2:m-A/2,y2:A/2,lineWidth:A,stroke:E,lineCap:C}:{x1:A/2,y1:0+A/2,x2:A/2,y2:m-A/2,lineWidth:A,stroke:E,lineCap:C};return this.addShape(S,{id:this.getElementId("track"),name:"track",type:"line",attrs:f})},c.prototype.renderThumbShape=function(S){var I=this.cfg,m=I.thumbOffset,r=I.thumbLen,s=I.theme,d=s===void 0?{default:{}}:s,C=d.default,E=C.size,A=C.lineCap,f=C.thumbColor,x=this.get("isHorizontal")?{x1:m+E/2,y1:E/2,x2:m+r-E/2,y2:E/2,lineWidth:E,stroke:f,lineCap:A,cursor:"default"}:{x1:E/2,y1:m+E/2,x2:E/2,y2:m+r-E/2,lineWidth:E,stroke:f,lineCap:A,cursor:"default"};return this.addShape(S,{id:this.getElementId("thumb"),name:"thumb",type:"line",attrs:x})},c.prototype.bindEvents=function(){var S=this.get("group");S.on("mousedown",this.onStartEvent(!1)),S.on("mouseup",this.onMouseUp),S.on("touchstart",this.onStartEvent(!0)),S.on("touchend",this.onMouseUp);var I=S.findById(this.getElementId("track"));I.on("click",this.onTrackClick);var m=S.findById(this.getElementId("thumb"));m.on("mouseover",this.onThumbMouseOver),m.on("mouseout",this.onThumbMouseOut)},c.prototype.getContainerDOM=function(){var S=this.get("container"),I=S&&S.get("canvas");return I&&I.get("container")},c.prototype.validateRange=function(S){var I=this.cfg,m=I.thumbLen,r=I.trackLen,s=S;return S+m>r?s=r-m:S+m<m&&(s=0),s},c.prototype.draw=function(){var S=this.get("container"),I=S&&S.get("canvas");I&&I.draw()},c.prototype.updateThumbOffset=function(S){var I=this.cfg,m=I.thumbOffset,r=I.isHorizontal,s=I.thumbLen,d=I.size,C=this.validateRange(S);if(C!==m){var E=this.getElementByLocalId("thumb");r?E.attr({x1:C+d/2,x2:C+s-d/2}):E.attr({y1:C+d/2,y2:C+s-d/2}),this.emitOffsetChange(C)}},c.prototype.emitOffsetChange=function(S){var I=this.cfg,m=I.thumbOffset,r=I.trackLen,s=I.thumbLen;this.cfg.thumbOffset=S,this.emit("scrollchange",{thumbOffset:S,ratio:Object(y.clamp)(S/(r-s),0,1)}),this.delegateEmit("valuechange",{originalValue:m,value:S})},c}(t.a)},"46lQ":function(qe,Pt,w){"use strict";var H=w("QG4C"),i;(function(n){n.DEV="DEV",n.BETA="BETA",n.STABLE="STABLE"})(i||(i={}));function y(n,u){console.warn(n===i.DEV?"Plot '"+u+"' is in DEV stage, just give us issues.":n===i.BETA?"Plot '"+u+"' is in BETA stage, DO NOT use it in production env.":n===i.STABLE?"Plot '"+u+`' is in STABLE stage, import it by "import { `+u+` } from '@antv/g2plot'".`:"invalid Stage type.")}var t=function(){function n(){}return Object.defineProperty(n,"MultiView",{get:function(){return y(i.STABLE,"MultiView"),H.a},enumerable:!1,configurable:!0}),n}()},"4Olw":function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return H});function H(i,y){return i.views.find(function(t){return t.id===y})}},"4cbP":function(qe,Pt){},"4kuk":function(qe,Pt,w){var H=w("SfRM"),i=w("Hvzi"),y=w("u8Dt"),t=w("ekgI"),n=w("JSQU");function u(p){var b=-1,c=p==null?0:p.length;for(this.clear();++b<c;){var S=p[b];this.set(S[0],S[1])}}u.prototype.clear=H,u.prototype.delete=i,u.prototype.get=y,u.prototype.has=t,u.prototype.set=n,qe.exports=u},"5HRO":function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return i});var H=w("iTfj");function i(y,t){if(y===!1)return{fields:!1};var n=Object(H.get)(y,"fields"),u=Object(H.get)(y,"formatter");return u&&!n&&(n=t),{fields:n,formatter:u}}},"5OoT":function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return i});var H=w("iTfj");function i(y,t){return!Object(H.isNumber)(y)||!Object(H.isNumber)(t)?"-":y===t?"100%":y===0?"\u221E":t===0?"-\u221E":(100*t/y).toFixed(2)+"%"}},"5UbV":function(qe,Pt,w){"use strict";w.d(Pt,"c",function(){return i}),w.d(Pt,"a",function(){return y}),w.d(Pt,"h",function(){return t}),w.d(Pt,"k",function(){return n}),w.d(Pt,"j",function(){return u}),w.d(Pt,"b",function(){return p}),w.d(Pt,"g",function(){return b}),w.d(Pt,"e",function(){return c}),w.d(Pt,"i",function(){return m}),w.d(Pt,"d",function(){return d}),w.d(Pt,"m",function(){return C}),w.d(Pt,"l",function(){return E}),w.d(Pt,"f",function(){return A});var H=w("iTfj");function i(f){var x=0,j=0,P=0,W=0;return Object(H.isNumber)(f)?x=j=P=W=f:Object(H.isArray)(f)&&(x=f[0],P=Object(H.isNil)(f[1])?f[0]:f[1],W=Object(H.isNil)(f[2])?f[0]:f[2],j=Object(H.isNil)(f[3])?P:f[3]),[x,P,W,j]}function y(f){for(var x=f.childNodes,j=x.length,P=j-1;P>=0;P--)f.removeChild(x[P])}function t(f,x){return!!f.className.match(new RegExp("(\\s|^)"+x+"(\\s|$)"))}function n(f){var x=f.start,j=f.end,P=Math.min(x.x,j.x),W=Math.min(x.y,j.y),X=Math.max(x.x,j.x),$=Math.max(x.y,j.y);return{x:P,y:W,minX:P,minY:W,maxX:X,maxY:$,width:X-P,height:$-W}}function u(f){var x=f.map(function(ft){return ft.x}),j=f.map(function(ft){return ft.y}),P=Math.min.apply(Math,x),W=Math.min.apply(Math,j),X=Math.max.apply(Math,x),$=Math.max.apply(Math,j);return{x:P,y:W,minX:P,minY:W,maxX:X,maxY:$,width:X-P,height:$-W}}function p(f,x,j,P){var W=f+j,X=x+P;return{x:f,y:x,width:j,height:P,minX:f,minY:x,maxX:isNaN(W)?0:W,maxY:isNaN(X)?0:X}}function b(f,x,j){return(1-j)*f+x*j}function c(f,x,j){return{x:f.x+Math.cos(j)*x,y:f.y+Math.sin(j)*x}}function S(f,x){var j=x.x-f.x,P=x.y-f.y;return Math.sqrt(j*j+P*P)}var I=function(x){return new Promise(function(j){setTimeout(j,x)})},m=function(x,j,P){return P===void 0&&(P=Math.pow(Number.EPSILON,.5)),[x,j].includes(Infinity)?Math.abs(x)===Math.abs(j):Math.abs(x-j)<P};function r(f,x){var j=Math.max(f.minX,x.minX),P=Math.max(f.minY,x.minY),W=Math.min(f.maxX,x.maxX),X=Math.min(f.maxY,x.maxY);return p(j,P,W-j,X-P)}function s(f,x){var j=Math.min(f.minX,x.minX),P=Math.min(f.minY,x.minY),W=Math.max(f.maxX,x.maxX),X=Math.max(f.maxY,x.maxY);return p(j,P,W-j,X-P)}function d(f){var x=f.getClip(),j=x&&x.getBBox(),P;if(!f.isGroup())P=f.getBBox();else{var W=Infinity,X=-Infinity,$=Infinity,ft=-Infinity,Z=f.getChildren();Z.length>0?Object(H.each)(Z,function(lt){if(lt.get("visible")){if(lt.isGroup()&&lt.get("children").length===0)return!0;var pt=d(lt),gt=lt.applyToMatrix([pt.minX,pt.minY,1]),ut=lt.applyToMatrix([pt.minX,pt.maxY,1]),Bt=lt.applyToMatrix([pt.maxX,pt.minY,1]),Lt=lt.applyToMatrix([pt.maxX,pt.maxY,1]),St=Math.min(gt[0],ut[0],Bt[0],Lt[0]),K=Math.max(gt[0],ut[0],Bt[0],Lt[0]),dt=Math.min(gt[1],ut[1],Bt[1],Lt[1]),mt=Math.max(gt[1],ut[1],Bt[1],Lt[1]);St<W&&(W=St),K>X&&(X=K),dt<$&&($=dt),mt>ft&&(ft=mt)}}):(W=0,X=0,$=0,ft=0),P=p(W,$,X-W,ft-$)}return j?r(P,j):P}function C(f,x){if(!(!f.getClip()&&!x.getClip())){var j=x.getClip();if(!j){f.setClip(null);return}var P={type:j.get("type"),attrs:j.attr()};f.setClip(P)}}function E(f){return f+"px"}function A(f,x,j,P){var W=S(f,x),X=P/W,$=0;return j==="start"?$=0-X:j==="end"&&($=1+X),{x:b(f.x,x.x,$),y:b(f.y,x.y,$)}}},"5bFI":function(qe,Pt,w){"use strict";w.r(Pt),w.d(Pt,"Category",function(){return m}),w.d(Pt,"Continuous",function(){return C}),w.d(Pt,"Base",function(){return S});var H=w("mrSG"),i=w("iTfj"),y=w("BgvD"),t=w("jqgP"),n=w("l3hu"),u=w("L16w"),p=w("MeYt"),b=w("5UbV"),c=function(E){Object(H.b)(A,E);function A(){return E!==null&&E.apply(this,arguments)||this}return A.prototype.getDefaultCfg=function(){var f=E.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},f),{name:"legend",layout:"horizontal",locationType:"point",x:0,y:0,offsetX:0,offsetY:0,title:null,background:null})},A.prototype.getLayoutBBox=function(){var f=E.prototype.getLayoutBBox.call(this),x=this.get("maxWidth"),j=this.get("maxHeight"),P=f.width,W=f.height;return x&&(P=Math.min(P,x)),j&&(W=Math.min(W,j)),Object(b.b)(f.minX,f.minY,P,W)},A.prototype.setLocation=function(f){this.set("x",f.x),this.set("y",f.y),this.resetLocation()},A.prototype.resetLocation=function(){var f=this.get("x"),x=this.get("y"),j=this.get("offsetX"),P=this.get("offsetY");this.moveElementTo(this.get("group"),{x:f+j,y:x+P})},A.prototype.applyOffset=function(){this.resetLocation()},A.prototype.getDrawPoint=function(){return this.get("currentPoint")},A.prototype.setDrawPoint=function(f){return this.set("currentPoint",f)},A.prototype.renderInner=function(f){this.resetDraw(),this.get("title")&&this.drawTitle(f),this.drawLegendContent(f),this.get("background")&&this.drawBackground(f)},A.prototype.drawBackground=function(f){var x=this.get("background"),j=f.getBBox(),P=Object(b.c)(x.padding),W=Object(H.a)({x:0,y:0,width:j.width+P[1]+P[3],height:j.height+P[0]+P[2]},x.style),X=this.addShape(f,{type:"rect",id:this.getElementId("background"),name:"legend-background",attrs:W});X.toBack()},A.prototype.drawTitle=function(f){var x=this.get("currentPoint"),j=this.get("title"),P=j.spacing,W=j.style,X=j.text,$=this.addShape(f,{type:"text",id:this.getElementId("title"),name:"legend-title",attrs:Object(H.a)({text:X,x:x.x,y:x.y},W)}),ft=$.getBBox();this.set("currentPoint",{x:x.x,y:ft.maxY+P})},A.prototype.resetDraw=function(){var f=this.get("background"),x={x:0,y:0};if(f){var j=Object(b.c)(f.padding);x.x=j[3],x.y=j[0]}this.set("currentPoint",x)},A}(p.a),S=c,I=function(E){Object(H.b)(A,E);function A(){var f=E!==null&&E.apply(this,arguments)||this;return f.currentPageIndex=1,f.totalPagesCnt=1,f.pageWidth=0,f.pageHeight=0,f.startX=0,f.startY=0,f.onNavigationBack=function(){var x=f.getElementByLocalId("item-group");if(f.currentPageIndex>1){f.currentPageIndex-=1,f.updateNavigation();var j=f.getCurrentNavigationMatrix();f.get("animate")?x.animate({matrix:j},100):x.attr({matrix:j})}},f.onNavigationAfter=function(){var x=f.getElementByLocalId("item-group");if(f.currentPageIndex<f.totalPagesCnt){f.currentPageIndex+=1,f.updateNavigation();var j=f.getCurrentNavigationMatrix();f.get("animate")?x.animate({matrix:j},100):x.attr({matrix:j})}},f}return A.prototype.getDefaultCfg=function(){var f=E.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},f),{name:"legend",type:"category",itemSpacing:24,itemMarginBottom:8,maxItemWidth:null,itemWidth:null,itemHeight:null,itemName:{},itemValue:null,maxWidth:null,maxHeight:null,marker:{},items:[],itemStates:{},itemBackground:{},defaultCfg:{title:{spacing:5,style:{fill:u.a.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}},background:{padding:5,style:{stroke:u.a.lineColor}},itemBackground:{style:{opacity:0,fill:"#fff"}},itemName:{spacing:16,style:{fill:u.a.textColor,fontSize:12,textAlign:"start",textBaseline:"middle"}},marker:{spacing:8,style:{r:6,symbol:"circle"}},itemValue:{alignRight:!1,formatter:null,style:{fill:u.a.textColor,fontSize:12,textAlign:"start",textBaseline:"middle"}},itemStates:{active:{nameStyle:{opacity:.8}},unchecked:{nameStyle:{fill:u.a.uncheckedColor},markerStyle:{fill:u.a.uncheckedColor,stroke:u.a.uncheckedColor}},inactive:{nameStyle:{fill:u.a.uncheckedColor},markerStyle:{opacity:.2}}}}})},A.prototype.isList=function(){return!0},A.prototype.getItems=function(){return this.get("items")},A.prototype.setItems=function(f){this.update({items:f})},A.prototype.updateItem=function(f,x){Object(i.mix)(f,x),this.clear(),this.render()},A.prototype.clearItems=function(){var f=this.getElementByLocalId("item-group");f&&f.clear()},A.prototype.setItemState=function(f,x,j){f[x]=j;var P=this.getElementByLocalId("item-"+f.id);if(P){var W=this.getItems(),X=W.indexOf(f),$=this.createOffScreenGroup(),ft=this.drawItem(f,X,this.getItemHeight(),$);this.updateElements(ft,P),this.clearUpdateStatus(P)}},A.prototype.hasState=function(f,x){return!!f[x]},A.prototype.getItemStates=function(f){var x=this.get("itemStates"),j=[];return Object(i.each)(x,function(P,W){f[W]&&j.push(W)}),j},A.prototype.clearItemsState=function(f){var x=this,j=this.getItemsByState(f);Object(i.each)(j,function(P){x.setItemState(P,f,!1)})},A.prototype.getItemsByState=function(f){var x=this,j=this.getItems();return Object(i.filter)(j,function(P){return x.hasState(P,f)})},A.prototype.drawLegendContent=function(f){this.processItems(),this.drawItems(f)},A.prototype.processItems=function(){var f=this.get("items");Object(i.each)(f,function(x){x.id||(x.id=x.name)})},A.prototype.drawItems=function(f){var x=this,j=this.addGroup(f,{id:this.getElementId("item-container-group"),name:"legend-item-container-group"}),P=this.addGroup(j,{id:this.getElementId("item-group"),name:"legend-item-group"}),W=this.getItemHeight(),X=this.get("itemWidth"),$=this.get("itemSpacing"),ft=this.get("itemMarginBottom"),Z=this.get("currentPoint"),lt=Z.x,pt=Z.y,gt=this.get("layout"),ut=this.get("items"),Bt=!1,Lt=0,St=this.get("maxWidth"),K=this.get("maxHeight");Object(i.each)(ut,function(dt,mt){var bt=x.drawItem(dt,mt,W,P),wt=bt.getBBox(),J=X||wt.width;J>Lt&&(Lt=J),gt==="horizontal"?(St&&St<Z.x+J-lt&&(Bt=!0,Z.x=lt,Z.y+=W+ft),x.moveElementTo(bt,Z),Z.x+=J+$):(K&&K<Z.y+W+ft-pt&&(Bt=!0,Z.x+=Lt+$,Z.y=pt,Lt=0),x.moveElementTo(bt,Z),Z.y+=W+ft)}),Bt&&this.get("flipPage")&&(this.pageHeight=0,this.pageWidth=0,this.totalPagesCnt=1,this.startX=lt,this.startY=pt,this.adjustNavigation(f,P))},A.prototype.getItemHeight=function(){var f=this.get("itemHeight");if(!f){var x=this.get("itemName");x&&(f=x.style.fontSize)}return f},A.prototype.drawMarker=function(f,x,j,P){var W=Object(H.a)(Object(H.a)(Object(H.a)({x:0,y:P/2},x.style),{symbol:Object(i.get)(j.marker,"symbol","circle")}),Object(i.get)(j.marker,"style",{})),X=this.addShape(f,{type:"marker",id:this.getElementId("item-"+j.id+"-marker"),name:"legend-item-marker",attrs:W}),$=X.getBBox();X.attr("x",$.width/2);var ft=X.attr(),Z=ft.stroke,lt=ft.fill;return Z&&X.set("isStroke",!0),lt&&X.set("isFill",!0),X},A.prototype.drawItemText=function(f,x,j,P,W,X,$){var ft=j.formatter,Z=Object(H.a)({x:X,y:W/2,text:ft?ft(P[x],P,$):P[x]},j.style);return this.addShape(f,{type:"text",id:this.getElementId("item-"+P.id+"-"+x),name:"legend-item-"+x,attrs:Z})},A.prototype.drawItem=function(f,x,j,P){var W="item-"+f.id,X=this.addGroup(P,{name:"legend-item-container",id:this.getElementId("item-container-"+W),delegateObject:{item:f,index:x}}),$=this.addGroup(X,{name:"legend-item",id:this.getElementId(W),delegateObject:{item:f,index:x}}),ft=this.get("marker"),Z=this.get("itemName"),lt=this.get("itemValue"),pt=this.get("itemBackground"),gt=this.getLimitItemWidth(),ut=0;if(ft){var Bt=this.drawMarker($,ft,f,j);ut=Bt.getBBox().maxX+ft.spacing}if(Z){var Lt=this.drawItemText($,"name",Z,f,j,ut,x);gt&&Object(y.a)(!0,Lt,Object(i.clamp)(gt-ut,0,gt)),ut=Lt.getBBox().maxX+Z.spacing}if(lt){var St=this.drawItemText($,"value",lt,f,j,ut,x);gt&&(lt.alignRight?(St.attr({textAlign:"right",x:gt}),Object(y.a)(!0,St,Object(i.clamp)(gt-ut,0,gt),"head")):Object(y.a)(!0,St,Object(i.clamp)(gt-ut,0,gt)))}if(pt){var K=$.getBBox(),dt=this.addShape($,{type:"rect",name:"legend-item-background",id:this.getElementId(W+"-background"),attrs:Object(H.a)({x:0,y:0,width:K.width,height:j},pt.style)});dt.toBack()}return this.applyItemStates(f,$),$},A.prototype.adjustNavigation=function(f,x){var j=this,P=this.startX,W=this.startY,X=this.get("layout"),$=x.findAll(function(J){return J.get("name")==="legend-item"}),ft=this.get("maxWidth"),Z=this.get("maxHeight"),lt=this.get("itemWidth"),pt=this.get("itemSpacing"),gt=this.getItemHeight(),ut=this.drawNavigation(f,X,"00/00",12),Bt=ut.getBBox(),Lt={x:P,y:W},St=1,K=0,dt=0,mt=0;if(X==="horizontal")this.pageHeight=gt,Object(i.each)($,function(J){var ct=J.getBBox(),it=lt||ct.width;(K&&K<Lt.x+it+pt||ft<Lt.x+it+pt+Bt.width)&&(St===1&&(K=Lt.x+pt,j.pageWidth=K,j.moveElementTo(ut,{x:ft-pt-Bt.width-Bt.minX,y:Lt.y+gt/2-Bt.height/2-Bt.minY})),St+=1,Lt.x=P,Lt.y+=gt),j.moveElementTo(J,Lt),J.getParent().setClip({type:"rect",attrs:{x:Lt.x,y:Lt.y,width:it+pt,height:gt}}),Lt.x+=it+pt});else{var bt=this.get("itemMarginBottom");Object(i.each)($,function(J){var ct=J.getBBox();ct.width>dt&&(dt=ct.width)}),mt=dt,dt+=pt,ft&&(dt=Math.min(ft,dt),mt=Math.min(ft,mt)),this.pageWidth=dt,this.pageHeight=Z-Math.max(Bt.height,gt+bt);var wt=Math.floor(this.pageHeight/(gt+bt));Object(i.each)($,function(J,ct){ct!==0&&ct%wt==0&&(St+=1,Lt.x+=dt,Lt.y=W),j.moveElementTo(J,Lt),J.getParent().setClip({type:"rect",attrs:{x:Lt.x,y:Lt.y,width:dt,height:gt}}),Lt.y+=gt+bt}),this.totalPagesCnt=St,this.moveElementTo(ut,{x:P+mt/2-Bt.width/2-Bt.minX,y:Z-Bt.height-Bt.minY})}this.pageHeight&&this.pageWidth&&x.getParent().setClip({type:"rect",attrs:{x:this.startX,y:this.startY,width:this.pageWidth,height:this.pageHeight}}),this.totalPagesCnt=St,this.currentPageIndex>this.totalPagesCnt&&(this.currentPageIndex=1),this.updateNavigation(ut),x.attr("matrix",this.getCurrentNavigationMatrix())},A.prototype.drawNavigation=function(f,x,j,P){var W={x:0,y:0},X=this.addGroup(f,{id:this.getElementId("navigation-group"),name:"legend-navigation"}),$=this.drawArrow(X,W,"navigation-arrow-left",x==="horizontal"?"up":"left",P);$.on("click",this.onNavigationBack);var ft=$.getBBox();W.x+=ft.width+2;var Z=this.addShape(X,{type:"text",id:this.getElementId("navigation-text"),name:"navigation-text",attrs:{x:W.x,y:W.y+P/2,text:j,fontSize:12,fill:"#ccc",textBaseline:"middle"}}),lt=Z.getBBox();W.x+=lt.width+2;var pt=this.drawArrow(X,W,"navigation-arrow-right",x==="horizontal"?"down":"right",P);return pt.on("click",this.onNavigationAfter),X},A.prototype.updateNavigation=function(f){var x=this.currentPageIndex+"/"+this.totalPagesCnt,j=f?f.getChildren()[1]:this.getElementByLocalId("navigation-text"),P=f?f.findById(this.getElementId("navigation-arrow-left")):this.getElementByLocalId("navigation-arrow-left"),W=f?f.findById(this.getElementId("navigation-arrow-right")):this.getElementByLocalId("navigation-arrow-right"),X=j.getBBox();j.attr("text",x);var $=j.getBBox();j.attr("x",j.attr("x")-($.width-X.width)/2),P.attr("opacity",this.currentPageIndex===1?.45:1),P.attr("cursor",this.currentPageIndex===1?"not-allowed":"pointer"),W.attr("opacity",this.currentPageIndex===this.totalPagesCnt?.45:1),W.attr("cursor",this.currentPageIndex===this.totalPagesCnt?"not-allowed":"pointer")},A.prototype.drawArrow=function(f,x,j,P,W){var X=x.x,$=x.y,ft={right:90*Math.PI/180,left:(360-90)*Math.PI/180,up:0,down:180*Math.PI/180},Z=this.addShape(f,{type:"path",id:this.getElementId(j),name:j,attrs:{path:[["M",X+W/2,$],["L",X,$+W],["L",X+W,$+W],["Z"]],fill:"#000",cursor:"pointer"}});return Z.attr("matrix",Object(t.e)({x:X+W/2,y:$+W/2},ft[P])),Z},A.prototype.getCurrentNavigationMatrix=function(){var f=this,x=f.currentPageIndex,j=f.pageWidth,P=f.pageHeight,W=this.get("layout"),X=W==="horizontal"?{x:0,y:P*(1-x)}:{x:j*(1-x),y:0};return Object(t.f)(X)},A.prototype.applyItemStates=function(f,x){var j=this.getItemStates(f),P=j.length>0;if(P){var W=x.getChildren(),X=this.get("itemStates");Object(i.each)(W,function($){var ft=$.get("name"),Z=ft.split("-")[2],lt=Object(n.a)(f,Z,X);lt&&($.attr(lt),Z==="marker"&&!($.get("isStroke")&&$.get("isFill"))&&($.get("isStroke")&&$.attr("fill",null),$.get("isFill")&&$.attr("stroke",null)))})}},A.prototype.getLimitItemWidth=function(){var f=this.get("itemWidth"),x=this.get("maxItemWidth");return x?f&&(x=f<=x?f:x):f&&(x=f),x},A}(S),m=I,r=1.4,s=.4,d=function(E){Object(H.b)(A,E);function A(){return E!==null&&E.apply(this,arguments)||this}return A.prototype.getDefaultCfg=function(){var f=E.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},f),{type:"continue",min:0,max:100,value:null,colors:[],track:{},rail:{},label:{},handler:{},slidable:!0,tip:null,step:null,maxWidth:null,maxHeight:null,defaultCfg:{label:{align:"rail",spacing:5,formatter:null,style:{fontSize:12,fill:u.a.textColor,textBaseline:"middle",fontFamily:u.a.fontFamily}},handler:{size:10,style:{fill:"#fff",stroke:"#333"}},track:{},rail:{type:"color",size:20,defaultLength:100,style:{fill:"#DCDEE2"}},title:{spacing:5,style:{fill:u.a.textColor,fontSize:12,textAlign:"start",textBaseline:"top"}}}})},A.prototype.isSlider=function(){return!0},A.prototype.getValue=function(){return this.getCurrentValue()},A.prototype.getRange=function(){return{min:this.get("min"),max:this.get("max")}},A.prototype.setRange=function(f,x){this.update({min:f,max:x})},A.prototype.setValue=function(f){var x=this.getValue();this.set("value",f);var j=this.get("group");this.resetTrackClip(),this.get("slidable")&&this.resetHandlers(j),this.delegateEmit("valuechanged",{originValue:x,value:f})},A.prototype.initEvent=function(){var f=this.get("group");this.bindSliderEvent(f),this.bindRailEvent(f),this.bindTrackEvent(f)},A.prototype.drawLegendContent=function(f){this.drawRail(f),this.drawLabels(f),this.fixedElements(f),this.resetTrack(f),this.resetTrackClip(f),this.get("slidable")&&this.resetHandlers(f)},A.prototype.bindSliderEvent=function(f){this.bindHandlersEvent(f)},A.prototype.bindHandlersEvent=function(f){var x=this;f.on("legend-handler-min:drag",function(j){var P=x.getValueByCanvasPoint(j.x,j.y),W=x.getCurrentValue(),X=W[1];X<P&&(X=P),x.setValue([P,X])}),f.on("legend-handler-max:drag",function(j){var P=x.getValueByCanvasPoint(j.x,j.y),W=x.getCurrentValue(),X=W[0];X>P&&(X=P),x.setValue([X,P])})},A.prototype.bindRailEvent=function(f){},A.prototype.bindTrackEvent=function(f){var x=this,j=null;f.on("legend-track:dragstart",function(P){j={x:P.x,y:P.y}}),f.on("legend-track:drag",function(P){if(!!j){var W=x.getValueByCanvasPoint(j.x,j.y),X=x.getValueByCanvasPoint(P.x,P.y),$=x.getCurrentValue(),ft=$[1]-$[0],Z=x.getRange(),lt=X-W;lt<0?$[0]+lt>Z.min?x.setValue([$[0]+lt,$[1]+lt]):x.setValue([Z.min,Z.min+ft]):lt>0&&(lt>0&&$[1]+lt<Z.max?x.setValue([$[0]+lt,$[1]+lt]):x.setValue([Z.max-ft,Z.max])),j={x:P.x,y:P.y}}}),f.on("legend-track:dragend",function(P){j=null})},A.prototype.drawLabels=function(f){this.drawLabel("min",f),this.drawLabel("max",f)},A.prototype.drawLabel=function(f,x){var j=this.get("label"),P=j.style,W=j.align,X=this.get(f),$=this.getLabelAlignAttrs(f,W),ft="label-"+f;this.addShape(x,{type:"text",id:this.getElementId(ft),name:"legend-label-"+f,attrs:Object(H.a)(Object(H.a)({x:0,y:0,text:X},P),$)})},A.prototype.getLabelAlignAttrs=function(f,x){var j=this.isVertical(),P="center",W="middle";return j?(P="start",x!=="rail"?f==="min"?W="top":W="bottom":W="top"):x!=="rail"?(W="top",f==="min"?P="start":P="end"):(P="start",W="middle"),{textAlign:P,textBaseline:W}},A.prototype.getRailPath=function(f,x,j,P){var W=this.get("rail"),X=W.size,$=W.defaultLength,ft=W.type,Z=this.isVertical(),lt=$,pt=j,gt=P;pt||(pt=Z?X:lt),gt||(gt=Z?lt:X);var ut=[];return ft==="color"?(ut.push(["M",f,x]),ut.push(["L",f+pt,x]),ut.push(["L",f+pt,x+gt]),ut.push(["L",f,x+gt]),ut.push(["Z"])):(ut.push(["M",f+pt,x]),ut.push(["L",f+pt,x+gt]),ut.push(["L",f,x+gt]),ut.push(["Z"])),ut},A.prototype.drawRail=function(f){var x=this.get("rail"),j=x.style;this.addShape(f,{type:"path",id:this.getElementId("rail"),name:"legend-rail",attrs:Object(H.a)({path:this.getRailPath(0,0)},j)})},A.prototype.getTrackColor=function(f){var x=f.length;if(!x)return null;if(x===1)return f[0];var j;this.isVertical()?j="l(90)":j="l(0)";for(var P=0;P<x;P++){var W=P/(x-1);j+=" "+W+":"+f[P]}return j},A.prototype.getTrackPath=function(f){var x=this.getRailShape(f),j=x.attr("path");return Object(i.clone)(j)},A.prototype.getClipTrackAttrs=function(f){var x=this.getCurrentValue(),j=x[0],P=x[1],W=this.getRailBBox(f),X=this.getPointByValue(j,f),$=this.getPointByValue(P,f),ft=this.isVertical(),Z,lt,pt,gt;return ft?(Z=W.minX,lt=X.y,pt=W.width,gt=$.y-X.y):(Z=X.x,lt=W.minY,pt=$.x-X.x,gt=W.height),{x:Z,y:lt,width:pt,height:gt}},A.prototype.getTrackAttrs=function(f){var x=this.get("track"),j=this.get("colors"),P=this.getTrackPath(f);return Object(i.mix)({path:P,fill:this.getTrackColor(j)},x.style)},A.prototype.resetTrackClip=function(f){var x=f||this.get("group"),j=this.getElementId("track"),P=x.findById(j),W=P.getClip(),X=this.getClipTrackAttrs(f);W?W.attr(X):P.setClip({type:"rect",attrs:X})},A.prototype.resetTrack=function(f){var x=this.getElementId("track"),j=f.findById(x),P=this.getTrackAttrs(f);j?j.attr(P):this.addShape(f,{type:"path",id:x,draggable:this.get("slidable"),name:"legend-track",attrs:P})},A.prototype.getPointByValue=function(f,x){var j=this.getRange(),P=j.min,W=j.max,X=(f-P)/(W-P),$=this.getRailBBox(x),ft=this.isVertical(),Z={x:0,y:0};return ft?(Z.x=$.minX+$.width/2,Z.y=Object(b.g)($.minY,$.maxY,X)):(Z.x=Object(b.g)($.minX,$.maxX,X),Z.y=$.minY+$.height/2),Z},A.prototype.getRailShape=function(f){var x=f||this.get("group");return x.findById(this.getElementId("rail"))},A.prototype.getRailBBox=function(f){var x=this.getRailShape(f),j=x.getBBox();return j},A.prototype.getRailCanvasBBox=function(){var f=this.get("group"),x=f.findById(this.getElementId("rail")),j=x.getCanvasBBox();return j},A.prototype.isVertical=function(){return this.get("layout")==="vertical"},A.prototype.getValueByCanvasPoint=function(f,x){var j=this.getRange(),P=j.min,W=j.max,X=this.getRailCanvasBBox(),$=this.isVertical(),ft=this.get("step"),Z;$?Z=(x-X.minY)/X.height:Z=(f-X.minX)/X.width;var lt=Object(b.g)(P,W,Z);if(ft){var pt=Math.round((lt-P)/ft);lt=P+pt*ft}return lt>W&&(lt=W),lt<P&&(lt=P),lt},A.prototype.getCurrentValue=function(){var f=this.get("value");return f||(f=[this.get("min"),this.get("max")]),f},A.prototype.resetHandlers=function(f){var x=this.getCurrentValue(),j=x[0],P=x[1];this.resetHandler(f,"min",j),this.resetHandler(f,"max",P)},A.prototype.getHandlerPath=function(f,x){var j=this.isVertical(),P=[],W=f.size,X=x.x,$=x.y,ft=W*r,Z=W/2,lt=W/6;if(j){var pt=X+ft*s;P.push(["M",X,$]),P.push(["L",pt,$+Z]),P.push(["L",X+ft,$+Z]),P.push(["L",X+ft,$-Z]),P.push(["L",pt,$-Z]),P.push(["Z"]),P.push(["M",pt,$+lt]),P.push(["L",X+ft-2,$+lt]),P.push(["M",pt,$-lt]),P.push(["L",X+ft-2,$-lt])}else{var gt=$+ft*s;P.push(["M",X,$]),P.push(["L",X-Z,gt]),P.push(["L",X-Z,$+ft]),P.push(["L",X+Z,$+ft]),P.push(["L",X+Z,gt]),P.push(["Z"]),P.push(["M",X-lt,gt]),P.push(["L",X-lt,$+ft-2]),P.push(["M",X+lt,gt]),P.push(["L",X+lt,$+ft-2])}return P},A.prototype.resetHandler=function(f,x,j){var P=this.getPointByValue(j,f),W=this.get("handler"),X=this.getHandlerPath(W,P),$=this.getElementId("handler-"+x),ft=f.findById($),Z=this.isVertical();ft?ft.attr("path",X):this.addShape(f,{type:"path",name:"legend-handler-"+x,draggable:!0,id:$,attrs:Object(H.a)(Object(H.a)({path:X},W.style),{cursor:Z?"ns-resize":"ew-resize"})})},A.prototype.fixedElements=function(f){var x=f.findById(this.getElementId("rail")),j=f.findById(this.getElementId("label-min")),P=f.findById(this.getElementId("label-max")),W=this.getDrawPoint();this.isVertical()?this.fixedVertail(j,P,x,W):this.fixedHorizontal(j,P,x,W)},A.prototype.fitRailLength=function(f,x,j,P){var W=this.isVertical(),X=W?"height":"width",$=this.get("label"),ft=$.align,Z=$.spacing,lt=this.get("max"+Object(i.upperFirst)(X));if(lt){var pt=ft==="rail"?j[X]+f[X]+x[X]+Z*2:j[X],gt=pt-lt;gt>0&&this.changeRailLength(P,X,j[X]-gt)}},A.prototype.changeRailLength=function(f,x,j){var P=f.getBBox(),W;x==="height"?W=this.getRailPath(P.x,P.y,P.width,j):W=this.getRailPath(P.x,P.y,j,P.height),f.attr("path",W)},A.prototype.changeRailPosition=function(f,x,j){var P=f.getBBox(),W=this.getRailPath(x,j,P.width,P.height);f.attr("path",W)},A.prototype.fixedHorizontal=function(f,x,j,P){var W=this.get("label"),X=W.align,$=W.spacing,ft=j.getBBox(),Z=f.getBBox(),lt=x.getBBox(),pt=ft.height;this.fitRailLength(Z,lt,ft,j),ft=j.getBBox(),X==="rail"?(f.attr({x:P.x,y:P.y+pt/2}),this.changeRailPosition(j,P.x+Z.width+$,P.y),x.attr({x:P.x+Z.width+ft.width+$*2,y:P.y+pt/2})):X==="top"?(f.attr({x:P.x,y:P.y}),x.attr({x:P.x+ft.width,y:P.y}),this.changeRailPosition(j,P.x,P.y+Z.height+$)):(this.changeRailPosition(j,P.x,P.y),f.attr({x:P.x,y:P.y+ft.height+$}),x.attr({x:P.x+ft.width,y:P.y+ft.height+$}))},A.prototype.fixedVertail=function(f,x,j,P){var W=this.get("label"),X=W.align,$=W.spacing,ft=j.getBBox(),Z=f.getBBox(),lt=x.getBBox();if(this.fitRailLength(Z,lt,ft,j),ft=j.getBBox(),X==="rail")f.attr({x:P.x,y:P.y}),this.changeRailPosition(j,P.x,P.y+Z.height+$),x.attr({x:P.x,y:P.y+Z.height+ft.height+$*2});else if(X==="right")f.attr({x:P.x+ft.width+$,y:P.y}),this.changeRailPosition(j,P.x,P.y),x.attr({x:P.x+ft.width+$,y:P.y+ft.height});else{var pt=Math.max(Z.width,lt.width);f.attr({x:P.x,y:P.y}),this.changeRailPosition(j,P.x+pt+$,P.y),x.attr({x:P.x,y:P.y+ft.height})}},A}(S),C=d},"5eLp":function(qe,Pt,w){"use strict";var H=function(){function i(y,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=y,this.name=y,this.originalEvent=t,this.timeStamp=t.timeStamp}return i.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},i.prototype.stopPropagation=function(){this.propagationStopped=!0},i.prototype.toString=function(){var y=this.type;return"[Event (type="+y+")]"},i.prototype.save=function(){},i.prototype.restore=function(){},i}();Pt.a=H},"5kt6":function(qe,Pt,w){"use strict";w.d(Pt,"f",function(){return H}),w.d(Pt,"e",function(){return i}),w.d(Pt,"d",function(){return y}),w.d(Pt,"a",function(){return t}),w.d(Pt,"b",function(){return n}),w.d(Pt,"g",function(){return u}),w.d(Pt,"c",function(){return p});var H="range",i="type",y="percent",t="#f0f0f0",n="indicator-view",u="range-view",p="range-mask-view"},"5nFI":function(qe,Pt,w){"use strict";var H=w("VTBJ"),i=w("cIOH"),y=w("6D9b"),t=w("cWXX"),n=w("rePB"),u=w("wx14"),p=w("q1tI"),b=w("TSYQ"),c=w.n(b),S=w("H84U"),I=w("/ezw"),m=w("B6l+"),r=w.n(m),s=function(J){var ct=J.value,it=J.formatter,_=J.precision,R=J.decimalSeparator,Q=J.groupSeparator,k=Q===void 0?"":Q,g=J.prefixCls,O;if(typeof it=="function")O=it(ct);else{var F=String(ct),V=F.match(/^(-?)(\d*)(\.(\d+))?$/);if(!V||F==="-")O=F;else{var rt=V[1],ot=V[2]||"0",st=V[4]||"";ot=ot.replace(/\B(?=(\d{3})+(?!\d))/g,k),typeof _=="number"&&(st=r()(st,_,"0").slice(0,_)),st&&(st="".concat(R).concat(st)),O=[p.createElement("span",{key:"int",className:"".concat(g,"-content-value-int")},rt,ot),st&&p.createElement("span",{key:"decimal",className:"".concat(g,"-content-value-decimal")},st)]}}return p.createElement("span",{className:"".concat(g,"-content-value")},O)},d=s,C=function(J){var ct=J.prefixCls,it=J.className,_=J.style,R=J.valueStyle,Q=J.value,k=Q===void 0?0:Q,g=J.title,O=J.valueRender,F=J.prefix,V=J.suffix,rt=J.loading,ot=J.direction,st=J.onMouseEnter,Mt=J.onMouseLeave,yt=p.createElement(d,Object(u.a)({},J,{value:k})),xt=c()(ct,Object(n.a)({},"".concat(ct,"-rtl"),ot==="rtl"),it);return p.createElement("div",{className:xt,style:_,onMouseEnter:st,onMouseLeave:Mt},g&&p.createElement("div",{className:"".concat(ct,"-title")},g),p.createElement(I.a,{paragraph:!1,loading:rt},p.createElement("div",{style:R,className:"".concat(ct,"-content")},F&&p.createElement("span",{className:"".concat(ct,"-content-prefix")},F),O?O(yt):yt,V&&p.createElement("span",{className:"".concat(ct,"-content-suffix")},V))))};C.defaultProps={decimalSeparator:".",groupSeparator:",",loading:!1};var E=Object(S.c)({prefixCls:"statistic"})(C),A=E,f=w("1OyB"),x=w("vuIU"),j=w("Ji7U"),P=w("LK+K"),W=w("ODXe"),X=w("QQZ/"),$=w.n(X),ft=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function Z(wt,J){var ct=wt,it=/\[[^\]]*]/g,_=(J.match(it)||[]).map(function(g){return g.slice(1,-1)}),R=J.replace(it,"[]"),Q=ft.reduce(function(g,O){var F=Object(W.a)(O,2),V=F[0],rt=F[1];if(g.indexOf(V)!==-1){var ot=Math.floor(ct/rt);return ct-=ot*rt,g.replace(new RegExp("".concat(V,"+"),"g"),function(st){var Mt=st.length;return $()(ot.toString(),Mt,"0")})}return g},R),k=0;return Q.replace(it,function(){var g=_[k];return k+=1,g})}function lt(wt,J){var ct=J.format,it=ct===void 0?"":ct,_=new Date(wt).getTime(),R=Date.now(),Q=Math.max(_-R,0);return Z(Q,it)}var pt=w("0n0R"),gt=1e3/30;function ut(wt){return new Date(wt).getTime()}var Bt=function(wt){Object(j.a)(ct,wt);var J=Object(P.a)(ct);function ct(){var it;return Object(f.a)(this,ct),it=J.apply(this,arguments),it.syncTimer=function(){var _=it.props.value,R=ut(_);R>=Date.now()?it.startTimer():it.stopTimer()},it.startTimer=function(){it.countdownId||(it.countdownId=window.setInterval(function(){it.forceUpdate()},gt))},it.stopTimer=function(){var _=it.props,R=_.onFinish,Q=_.value;if(it.countdownId){clearInterval(it.countdownId),it.countdownId=void 0;var k=ut(Q);R&&k<Date.now()&&R()}},it.formatCountdown=function(_,R){var Q=it.props.format;return lt(_,Object(u.a)(Object(u.a)({},R),{format:Q}))},it.valueRender=function(_){return Object(pt.a)(_,{title:void 0})},it}return Object(x.a)(ct,[{key:"componentDidMount",value:function(){this.syncTimer()}},{key:"componentDidUpdate",value:function(){this.syncTimer()}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"render",value:function(){return p.createElement(A,Object(u.a)({valueRender:this.valueRender},this.props,{formatter:this.formatCountdown}))}}]),ct}(p.Component);Bt.defaultProps={format:"HH:mm:ss"};var Lt=Bt;A.Countdown=Lt;var St=A,K=w("nKUr"),dt=w("Ff2n"),mt=function(J){var ct=J.title,it=ct===void 0?"title":ct,_=J.value,R=_===void 0?0:_,Q=J.precision,k=Q===void 0?2:Q,g=J.isNormal,O=g===void 0?!0:g,F=Object(dt.a)(J,["title","value","precision","isNormal"]),V=function(){return O?"#000":R>=0?"#389e0d":"#cf1322"};return Object(K.jsx)(St,Object(H.a)({title:it,value:R,precision:k,valueStyle:{color:V(),fontWeight:600},prefix:!O&&Number(R)>=0?"+":""},F))},bt=Pt.a=mt},"5z4m":function(qe,Pt,w){"use strict";var H=w("mrSG"),i=w("aFU3"),y=w("iTfj"),t=w("aN7R"),n=w("c0lT"),u=w("APlK"),p=w("IvmH"),b=w("c+wO"),c=function(S){Object(H.b)(I,S);function I(){return S!==null&&S.apply(this,arguments)||this}return I.prototype.isEntityGroup=function(){return!0},I.prototype.createDom=function(){var m=Object(b.b)("g");this.set("el",m);var r=this.getParent();if(r){var s=r.get("el");s||(s=r.createDom(),r.set("el",s)),s.appendChild(m)}return m},I.prototype.afterAttrsChange=function(m){S.prototype.afterAttrsChange.call(this,m);var r=this.get("canvas");if(r&&r.get("autoDraw")){var s=r.get("context");this.createPath(s,m)}},I.prototype.onCanvasChange=function(m){Object(n.b)(this,m)},I.prototype.getShapeBase=function(){return t},I.prototype.getGroupBase=function(){return I},I.prototype.draw=function(m){var r=this.getChildren(),s=this.get("el");this.get("destroyed")?s&&s.parentNode.removeChild(s):(s||this.createDom(),Object(u.a)(this,m),this.createPath(m),r.length&&Object(n.a)(m,r))},I.prototype.createPath=function(m,r){var s=this.attr(),d=this.get("el");Object(y.each)(r||s,function(C,E){p.b[E]&&d.setAttribute(p.b[E],C)}),Object(u.c)(this)},I}(i.AbstractGroup);Pt.a=c},"6D9b":function(qe,Pt,w){},"6JdA":function(qe,Pt,w){"use strict";w.d(Pt,"b",function(){return H}),w.d(Pt,"c",function(){return dt}),w.d(Pt,"d",function(){return mt}),w.d(Pt,"a",function(){return i});var H={};w.r(H),w.d(H,"create",function(){return t}),w.d(H,"fromMat4",function(){return n}),w.d(H,"clone",function(){return u}),w.d(H,"copy",function(){return p}),w.d(H,"fromValues",function(){return b}),w.d(H,"set",function(){return c}),w.d(H,"identity",function(){return S}),w.d(H,"transpose",function(){return I}),w.d(H,"invert",function(){return m}),w.d(H,"adjoint",function(){return r}),w.d(H,"determinant",function(){return s}),w.d(H,"multiply",function(){return d}),w.d(H,"translate",function(){return C}),w.d(H,"rotate",function(){return E}),w.d(H,"scale",function(){return A}),w.d(H,"fromTranslation",function(){return f}),w.d(H,"fromRotation",function(){return x}),w.d(H,"fromScaling",function(){return j}),w.d(H,"fromMat2d",function(){return P}),w.d(H,"fromQuat",function(){return W}),w.d(H,"normalFromMat4",function(){return X}),w.d(H,"projection",function(){return $}),w.d(H,"str",function(){return ft}),w.d(H,"frob",function(){return Z}),w.d(H,"add",function(){return lt}),w.d(H,"subtract",function(){return pt}),w.d(H,"multiplyScalar",function(){return gt}),w.d(H,"multiplyScalarAndAdd",function(){return ut}),w.d(H,"exactEquals",function(){return Bt}),w.d(H,"equals",function(){return Lt}),w.d(H,"mul",function(){return St}),w.d(H,"sub",function(){return K});var i={};w.r(i),w.d(i,"leftTranslate",function(){return bt}),w.d(i,"leftRotate",function(){return wt}),w.d(i,"leftScale",function(){return J}),w.d(i,"transform",function(){return it}),w.d(i,"direction",function(){return _}),w.d(i,"angleTo",function(){return R}),w.d(i,"vertical",function(){return Q});var y=w("yU0y");function t(){var k=new y.a(9);return y.a!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[5]=0,k[6]=0,k[7]=0),k[0]=1,k[4]=1,k[8]=1,k}function n(k,g){return k[0]=g[0],k[1]=g[1],k[2]=g[2],k[3]=g[4],k[4]=g[5],k[5]=g[6],k[6]=g[8],k[7]=g[9],k[8]=g[10],k}function u(k){var g=new y.a(9);return g[0]=k[0],g[1]=k[1],g[2]=k[2],g[3]=k[3],g[4]=k[4],g[5]=k[5],g[6]=k[6],g[7]=k[7],g[8]=k[8],g}function p(k,g){return k[0]=g[0],k[1]=g[1],k[2]=g[2],k[3]=g[3],k[4]=g[4],k[5]=g[5],k[6]=g[6],k[7]=g[7],k[8]=g[8],k}function b(k,g,O,F,V,rt,ot,st,Mt){var yt=new y.a(9);return yt[0]=k,yt[1]=g,yt[2]=O,yt[3]=F,yt[4]=V,yt[5]=rt,yt[6]=ot,yt[7]=st,yt[8]=Mt,yt}function c(k,g,O,F,V,rt,ot,st,Mt,yt){return k[0]=g,k[1]=O,k[2]=F,k[3]=V,k[4]=rt,k[5]=ot,k[6]=st,k[7]=Mt,k[8]=yt,k}function S(k){return k[0]=1,k[1]=0,k[2]=0,k[3]=0,k[4]=1,k[5]=0,k[6]=0,k[7]=0,k[8]=1,k}function I(k,g){if(k===g){var O=g[1],F=g[2],V=g[5];k[1]=g[3],k[2]=g[6],k[3]=O,k[5]=g[7],k[6]=F,k[7]=V}else k[0]=g[0],k[1]=g[3],k[2]=g[6],k[3]=g[1],k[4]=g[4],k[5]=g[7],k[6]=g[2],k[7]=g[5],k[8]=g[8];return k}function m(k,g){var O=g[0],F=g[1],V=g[2],rt=g[3],ot=g[4],st=g[5],Mt=g[6],yt=g[7],xt=g[8],Ot=xt*ot-st*yt,jt=-xt*rt+st*Mt,Dt=yt*rt-ot*Mt,zt=O*Ot+F*jt+V*Dt;return zt?(zt=1/zt,k[0]=Ot*zt,k[1]=(-xt*F+V*yt)*zt,k[2]=(st*F-V*ot)*zt,k[3]=jt*zt,k[4]=(xt*O-V*Mt)*zt,k[5]=(-st*O+V*rt)*zt,k[6]=Dt*zt,k[7]=(-yt*O+F*Mt)*zt,k[8]=(ot*O-F*rt)*zt,k):null}function r(k,g){var O=g[0],F=g[1],V=g[2],rt=g[3],ot=g[4],st=g[5],Mt=g[6],yt=g[7],xt=g[8];return k[0]=ot*xt-st*yt,k[1]=V*yt-F*xt,k[2]=F*st-V*ot,k[3]=st*Mt-rt*xt,k[4]=O*xt-V*Mt,k[5]=V*rt-O*st,k[6]=rt*yt-ot*Mt,k[7]=F*Mt-O*yt,k[8]=O*ot-F*rt,k}function s(k){var g=k[0],O=k[1],F=k[2],V=k[3],rt=k[4],ot=k[5],st=k[6],Mt=k[7],yt=k[8];return g*(yt*rt-ot*Mt)+O*(-yt*V+ot*st)+F*(Mt*V-rt*st)}function d(k,g,O){var F=g[0],V=g[1],rt=g[2],ot=g[3],st=g[4],Mt=g[5],yt=g[6],xt=g[7],Ot=g[8],jt=O[0],Dt=O[1],zt=O[2],Tt=O[3],Wt=O[4],Ht=O[5],re=O[6],pe=O[7],me=O[8];return k[0]=jt*F+Dt*ot+zt*yt,k[1]=jt*V+Dt*st+zt*xt,k[2]=jt*rt+Dt*Mt+zt*Ot,k[3]=Tt*F+Wt*ot+Ht*yt,k[4]=Tt*V+Wt*st+Ht*xt,k[5]=Tt*rt+Wt*Mt+Ht*Ot,k[6]=re*F+pe*ot+me*yt,k[7]=re*V+pe*st+me*xt,k[8]=re*rt+pe*Mt+me*Ot,k}function C(k,g,O){var F=g[0],V=g[1],rt=g[2],ot=g[3],st=g[4],Mt=g[5],yt=g[6],xt=g[7],Ot=g[8],jt=O[0],Dt=O[1];return k[0]=F,k[1]=V,k[2]=rt,k[3]=ot,k[4]=st,k[5]=Mt,k[6]=jt*F+Dt*ot+yt,k[7]=jt*V+Dt*st+xt,k[8]=jt*rt+Dt*Mt+Ot,k}function E(k,g,O){var F=g[0],V=g[1],rt=g[2],ot=g[3],st=g[4],Mt=g[5],yt=g[6],xt=g[7],Ot=g[8],jt=Math.sin(O),Dt=Math.cos(O);return k[0]=Dt*F+jt*ot,k[1]=Dt*V+jt*st,k[2]=Dt*rt+jt*Mt,k[3]=Dt*ot-jt*F,k[4]=Dt*st-jt*V,k[5]=Dt*Mt-jt*rt,k[6]=yt,k[7]=xt,k[8]=Ot,k}function A(k,g,O){var F=O[0],V=O[1];return k[0]=F*g[0],k[1]=F*g[1],k[2]=F*g[2],k[3]=V*g[3],k[4]=V*g[4],k[5]=V*g[5],k[6]=g[6],k[7]=g[7],k[8]=g[8],k}function f(k,g){return k[0]=1,k[1]=0,k[2]=0,k[3]=0,k[4]=1,k[5]=0,k[6]=g[0],k[7]=g[1],k[8]=1,k}function x(k,g){var O=Math.sin(g),F=Math.cos(g);return k[0]=F,k[1]=O,k[2]=0,k[3]=-O,k[4]=F,k[5]=0,k[6]=0,k[7]=0,k[8]=1,k}function j(k,g){return k[0]=g[0],k[1]=0,k[2]=0,k[3]=0,k[4]=g[1],k[5]=0,k[6]=0,k[7]=0,k[8]=1,k}function P(k,g){return k[0]=g[0],k[1]=g[1],k[2]=0,k[3]=g[2],k[4]=g[3],k[5]=0,k[6]=g[4],k[7]=g[5],k[8]=1,k}function W(k,g){var O=g[0],F=g[1],V=g[2],rt=g[3],ot=O+O,st=F+F,Mt=V+V,yt=O*ot,xt=F*ot,Ot=F*st,jt=V*ot,Dt=V*st,zt=V*Mt,Tt=rt*ot,Wt=rt*st,Ht=rt*Mt;return k[0]=1-Ot-zt,k[3]=xt-Ht,k[6]=jt+Wt,k[1]=xt+Ht,k[4]=1-yt-zt,k[7]=Dt-Tt,k[2]=jt-Wt,k[5]=Dt+Tt,k[8]=1-yt-Ot,k}function X(k,g){var O=g[0],F=g[1],V=g[2],rt=g[3],ot=g[4],st=g[5],Mt=g[6],yt=g[7],xt=g[8],Ot=g[9],jt=g[10],Dt=g[11],zt=g[12],Tt=g[13],Wt=g[14],Ht=g[15],re=O*st-F*ot,pe=O*Mt-V*ot,me=O*yt-rt*ot,Se=F*Mt-V*st,Le=F*yt-rt*st,Je=V*yt-rt*Mt,On=xt*Tt-Ot*zt,gn=xt*Wt-jt*zt,Wn=xt*Ht-Dt*zt,kn=Ot*Wt-jt*Tt,Vn=Ot*Ht-Dt*Tt,Dn=jt*Ht-Dt*Wt,Nn=re*Dn-pe*Vn+me*kn+Se*Wn-Le*gn+Je*On;return Nn?(Nn=1/Nn,k[0]=(st*Dn-Mt*Vn+yt*kn)*Nn,k[1]=(Mt*Wn-ot*Dn-yt*gn)*Nn,k[2]=(ot*Vn-st*Wn+yt*On)*Nn,k[3]=(V*Vn-F*Dn-rt*kn)*Nn,k[4]=(O*Dn-V*Wn+rt*gn)*Nn,k[5]=(F*Wn-O*Vn-rt*On)*Nn,k[6]=(Tt*Je-Wt*Le+Ht*Se)*Nn,k[7]=(Wt*me-zt*Je-Ht*pe)*Nn,k[8]=(zt*Le-Tt*me+Ht*re)*Nn,k):null}function $(k,g,O){return k[0]=2/g,k[1]=0,k[2]=0,k[3]=0,k[4]=-2/O,k[5]=0,k[6]=-1,k[7]=1,k[8]=1,k}function ft(k){return"mat3("+k[0]+", "+k[1]+", "+k[2]+", "+k[3]+", "+k[4]+", "+k[5]+", "+k[6]+", "+k[7]+", "+k[8]+")"}function Z(k){return Math.hypot(k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],k[8])}function lt(k,g,O){return k[0]=g[0]+O[0],k[1]=g[1]+O[1],k[2]=g[2]+O[2],k[3]=g[3]+O[3],k[4]=g[4]+O[4],k[5]=g[5]+O[5],k[6]=g[6]+O[6],k[7]=g[7]+O[7],k[8]=g[8]+O[8],k}function pt(k,g,O){return k[0]=g[0]-O[0],k[1]=g[1]-O[1],k[2]=g[2]-O[2],k[3]=g[3]-O[3],k[4]=g[4]-O[4],k[5]=g[5]-O[5],k[6]=g[6]-O[6],k[7]=g[7]-O[7],k[8]=g[8]-O[8],k}function gt(k,g,O){return k[0]=g[0]*O,k[1]=g[1]*O,k[2]=g[2]*O,k[3]=g[3]*O,k[4]=g[4]*O,k[5]=g[5]*O,k[6]=g[6]*O,k[7]=g[7]*O,k[8]=g[8]*O,k}function ut(k,g,O,F){return k[0]=g[0]+O[0]*F,k[1]=g[1]+O[1]*F,k[2]=g[2]+O[2]*F,k[3]=g[3]+O[3]*F,k[4]=g[4]+O[4]*F,k[5]=g[5]+O[5]*F,k[6]=g[6]+O[6]*F,k[7]=g[7]+O[7]*F,k[8]=g[8]+O[8]*F,k}function Bt(k,g){return k[0]===g[0]&&k[1]===g[1]&&k[2]===g[2]&&k[3]===g[3]&&k[4]===g[4]&&k[5]===g[5]&&k[6]===g[6]&&k[7]===g[7]&&k[8]===g[8]}function Lt(k,g){var O=k[0],F=k[1],V=k[2],rt=k[3],ot=k[4],st=k[5],Mt=k[6],yt=k[7],xt=k[8],Ot=g[0],jt=g[1],Dt=g[2],zt=g[3],Tt=g[4],Wt=g[5],Ht=g[6],re=g[7],pe=g[8];return Math.abs(O-Ot)<=y.b*Math.max(1,Math.abs(O),Math.abs(Ot))&&Math.abs(F-jt)<=y.b*Math.max(1,Math.abs(F),Math.abs(jt))&&Math.abs(V-Dt)<=y.b*Math.max(1,Math.abs(V),Math.abs(Dt))&&Math.abs(rt-zt)<=y.b*Math.max(1,Math.abs(rt),Math.abs(zt))&&Math.abs(ot-Tt)<=y.b*Math.max(1,Math.abs(ot),Math.abs(Tt))&&Math.abs(st-Wt)<=y.b*Math.max(1,Math.abs(st),Math.abs(Wt))&&Math.abs(Mt-Ht)<=y.b*Math.max(1,Math.abs(Mt),Math.abs(Ht))&&Math.abs(yt-re)<=y.b*Math.max(1,Math.abs(yt),Math.abs(re))&&Math.abs(xt-pe)<=y.b*Math.max(1,Math.abs(xt),Math.abs(pe))}var St=d,K=pt,dt=w("ZxFD"),mt=w("n+fv");function bt(k,g,O){var F=[0,0,0,0,0,0,0,0,0];return H.fromTranslation(F,O),H.multiply(k,F,g)}function wt(k,g,O){var F=[0,0,0,0,0,0,0,0,0];return H.fromRotation(F,O),H.multiply(k,F,g)}function J(k,g,O){var F=[0,0,0,0,0,0,0,0,0];return H.fromScaling(F,O),H.multiply(k,F,g)}function ct(k,g,O){return H.multiply(k,O,g)}function it(k,g){for(var O=k?[].concat(k):[1,0,0,0,1,0,0,0,1],F=0,V=g.length;F<V;F++){var rt=g[F];switch(rt[0]){case"t":bt(O,O,[rt[1],rt[2]]);break;case"s":J(O,O,[rt[1],rt[2]]);break;case"r":wt(O,O,rt[1]);break;case"m":ct(O,O,rt[1]);break;default:break}}return O}function _(k,g){return k[0]*g[1]-g[0]*k[1]}function R(k,g,O){var F=dt.angle(k,g),V=_(k,g)>=0;return O?V?Math.PI*2-F:F:V?F:Math.PI*2-F}function Q(k,g,O){return O?(k[0]=g[1],k[1]=-1*g[0]):(k[0]=-1*g[1],k[1]=g[0]),k}},"6UX8":function(qe,Pt,w){"use strict";var H=w("iTfj"),i=/rgba?\(([\s.,0-9]+)\)/,y=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,t=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,n=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,u=function(A){return/^[r,R,L,l]{1}[\s]*\(/.test(A)},p=function(){var A=document.createElement("i");return A.title="Web Colour Picker",A.style.display="none",document.body.appendChild(A),A},b=function(A,f,x,j){return A[j]+(f[j]-A[j])*x};function c(E){return"#"+I(E[0])+I(E[1])+I(E[2])}var S=function(A){return[parseInt(A.substr(1,2),16),parseInt(A.substr(3,2),16),parseInt(A.substr(5,2),16)]},I=function(A){var f=Math.round(A).toString(16);return f.length===1?"0"+f:f},m=function(A,f){var x=isNaN(Number(f))||f<0?0:f>1?1:Number(f),j=A.length-1,P=Math.floor(j*x),W=j*x-P,X=A[P],$=P===j?X:A[P+1];return c([b(X,$,W,0),b(X,$,W,1),b(X,$,W,2)])},r,s=function(A){if(A[0]==="#"&&A.length===7)return A;r||(r=p()),r.style.color=A;var f=document.defaultView.getComputedStyle(r,"").getPropertyValue("color"),x=i.exec(f),j=x[1].split(/\s*,\s*/).map(function(P){return Number(P)});return f=c(j),f},d=function(A){var f=Object(H.isString)(A)?A.split("-"):A,x=Object(H.map)(f,function(j){return S(j.indexOf("#")===-1?s(j):j)});return function(j){return m(x,j)}},C=function(A){if(u(A)){var f,x=void 0;if(A[0]==="l"){var j=y.exec(A),P=+j[1]+90;x=j[2],f="linear-gradient("+P+"deg, "}else if(A[0]==="r"){f="radial-gradient(";var j=t.exec(A);x=j[4]}var W=x.match(n);return Object(H.each)(W,function(X,$){var ft=X.split(":");f+=ft[1]+" "+ft[0]*100+"%",$!==W.length-1&&(f+=", ")}),f+=")",f}return A};Pt.a={rgb2arr:S,gradient:d,toRGB:Object(H.memoize)(s),toCSSGradient:C}},"6sVZ":function(qe,Pt){var w=Object.prototype;function H(i){var y=i&&i.constructor,t=typeof y=="function"&&y.prototype||w;return i===t}qe.exports=H},"7+4w":function(qe,Pt,w){"use strict";var H=w("mrSG"),i=w("YuPD"),y=w("zJSt"),t=function(n){Object(H.b)(u,n);function u(p,b,c,S){var I=n.call(this,p,Object(i.b)({},S,b))||this;return I.type="g2-plot",I.defaultOptions=S,I.adaptor=c,I}return u.prototype.getDefaultOptions=function(){return this.defaultOptions},u.prototype.getSchemaAdaptor=function(){return this.adaptor},u}(y.a)},"711d":function(qe,Pt){function w(H){return function(i){return i==null?void 0:i[H]}}qe.exports=w},"77Zs":function(qe,Pt,w){var H=w("Xi7e");function i(){this.__data__=new H,this.size=0}qe.exports=i},"7GkX":function(qe,Pt,w){var H=w("b80T"),i=w("A90E"),y=w("MMmD");function t(n){return y(n)?H(n):i(n)}qe.exports=t},"7IPS":function(qe,Pt,w){"use strict";Pt.a=function(H,i,y,t,n){for(var u=H.children,p,b=-1,c=u.length,S=H.value&&(n-y)/H.value;++b<c;)p=u[b],p.x0=i,p.x1=t,p.y0=y,p.y1=y+=p.value*S}},"7Kak":function(qe,Pt,w){"use strict";var H=w("cIOH"),i=w.n(H),y=w("KPFz"),t=w.n(y)},"7ZbV":function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return P});var H=w("mrSG"),i=w("zJSt"),y=w("YuPD"),t=w("iTfj"),n=w("w02o"),u=w("tKoa"),p="first-axes-view",b="second-axes-view",c="series-field-key";function S(W,X,$,ft,Z){var lt=[];X.forEach(function(St){ft.forEach(function(K){var dt,mt=(dt={},dt[W]=K[W],dt[$]=St,dt[St]=K[St],dt);lt.push(mt)})});var pt=Object.values(Object(t.groupBy)(lt,$)),gt=pt[0],ut=gt===void 0?[]:gt,Bt=pt[1],Lt=Bt===void 0?[]:Bt;return Z?[ut.reverse(),Lt.reverse()]:[ut,Lt]}function I(W){return W!=="vertical"}function m(W,X,$){var ft=X[0],Z=X[1],lt=ft.autoPadding,pt=Z.autoPadding,gt=W.__axisPosition,ut=gt.layout,Bt=gt.position;if(I(ut)&&Bt==="top"&&(ft.autoPadding=$.instance(lt.top,0,lt.bottom,lt.left),Z.autoPadding=$.instance(pt.top,lt.left,pt.bottom,0)),I(ut)&&Bt==="bottom"&&(ft.autoPadding=$.instance(lt.top,lt.right/2+5,lt.bottom,lt.left),Z.autoPadding=$.instance(pt.top,pt.right,pt.bottom,lt.right/2+5)),!I(ut)&&Bt==="bottom"){var Lt=lt.left>=pt.left?lt.left:pt.left;ft.autoPadding=$.instance(lt.top,lt.right,lt.bottom/2+5,Lt),Z.autoPadding=$.instance(lt.bottom/2+5,pt.right,pt.bottom,Lt)}if(!I(ut)&&Bt==="top"){var Lt=lt.left>=pt.left?lt.left:pt.left;ft.autoPadding=$.instance(lt.top,lt.right,0,Lt),Z.autoPadding=$.instance(0,pt.right,lt.top,Lt)}}function r(W){var X=W.chart,$=W.options,ft=$.data,Z=$.xField,lt=$.yField,pt=$.color,gt=$.barStyle,ut=$.widthRatio,Bt=$.legend,Lt=$.layout,St=S(Z,lt,c,ft,I(Lt));Bt?X.legend(c,Bt):Bt===!1&&X.legend(!1);var K,dt,mt=St[0],bt=St[1];I(Lt)?(K=X.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:p}),K.coordinate().transpose().reflect("x"),dt=X.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:b}),dt.coordinate().transpose(),K.data(mt),dt.data(bt)):(K=X.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:p}),dt=X.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:b}),dt.coordinate().reflect("y").rotate(Math.PI*0),K.data(mt),dt.data(bt));var wt=Object(y.b)({},W,{chart:K,options:{widthRatio:ut,xField:Z,yField:lt[0],seriesField:c,interval:{color:pt,style:gt}}});Object(u.c)(wt);var J=Object(y.b)({},W,{chart:dt,options:{xField:Z,yField:lt[1],seriesField:c,widthRatio:ut,interval:{color:pt,style:gt}}});return Object(u.c)(J),W}function s(W){var X,$,ft,Z=W.options,lt=W.chart,pt=Z.xAxis,gt=Z.yAxis,ut=Z.xField,Bt=Z.yField,Lt=Object(y.d)(lt,p),St=Object(y.d)(lt,b),K={};return Object(t.keys)((Z==null?void 0:Z.meta)||{}).map(function(dt){Object(t.get)(Z==null?void 0:Z.meta,[dt,"alias"])&&(K[dt]=Z.meta[dt].alias)}),lt.scale((X={},X[c]={sync:!0,formatter:function(mt){return Object(t.get)(K,mt,mt)}},X)),Object(n.f)(($={},$[ut]=pt,$[Bt[0]]=gt[Bt[0]],$))(Object(y.b)({},W,{chart:Lt})),Object(n.f)((ft={},ft[ut]=pt,ft[Bt[1]]=gt[Bt[1]],ft))(Object(y.b)({},W,{chart:St})),W}function d(W){var X=W.chart,$=W.options,ft=$.xAxis,Z=$.yAxis,lt=$.xField,pt=$.yField,gt=$.layout,ut=Object(y.d)(X,p),Bt=Object(y.d)(X,b);return Bt.axis(lt,!1),ft===!1?ut.axis(lt,!1):ut.axis(lt,Object(H.a)({position:I(gt)?"top":"bottom"},ft)),Z===!1?(ut.axis(pt[0],!1),Bt.axis(pt[1],!1)):(ut.axis(pt[0],Z[pt[0]]),Bt.axis(pt[1],Z[pt[1]])),X.__axisPosition={position:ut.getOptions().axes[lt].position,layout:gt},W}function C(W){var X=W.chart;return Object(n.c)(Object(y.b)({},W,{chart:Object(y.d)(X,p)})),Object(n.c)(Object(y.b)({},W,{chart:Object(y.d)(X,b)})),W}function E(W){var X=W.chart,$=W.options,ft=$.yField,Z=$.yAxis;return Object(n.e)(Object(y.b)({},W,{chart:Object(y.d)(X,p),options:{yAxis:Z[ft[0]]}})),Object(n.e)(Object(y.b)({},W,{chart:Object(y.d)(X,b),options:{yAxis:Z[ft[1]]}})),W}function A(W){var X=W.chart;return Object(n.j)(Object(y.b)({},W,{chart:Object(y.d)(X,p)})),Object(n.j)(Object(y.b)({},W,{chart:Object(y.d)(X,b)})),W}function f(W){var X=W.chart;return Object(n.a)(Object(y.b)({},W,{chart:Object(y.d)(X,p)})),Object(n.a)(Object(y.b)({},W,{chart:Object(y.d)(X,b)})),W}function x(W){var X=W.chart,$=W.options,ft=$.label,Z=$.yField,lt=Object(y.d)(X,p),pt=Object(y.d)(X,b),gt=Object(y.c)(lt,"interval"),ut=Object(y.c)(pt,"interval");if(!ft)gt.label(!1),ut.label(!1);else{var Bt=ft.callback,Lt=Object(H.c)(ft,["callback"]);gt.label({fields:[Z[0]],callback:Bt,cfg:Object(y.o)(Lt)}),ut.label({fields:[Z[1]],callback:Bt,cfg:Object(y.o)(Lt)})}return W}function j(W){return Object(y.e)(r,s,d,E,A,x,n.k,C,f)(W)}var P=function(W){Object(H.b)(X,W);function X(){var $=W!==null&&W.apply(this,arguments)||this;return $.type="bidirectional-bar",$}return X.prototype.getDefaultOptions=function(){return Object(y.b)({},W.prototype.getDefaultOptions.call(this),{syncViewPadding:m})},X.prototype.getSchemaAdaptor=function(){return j},X}(i.a)},"7cv3":function(qe,Pt,w){"use strict";w.d(Pt,"b",function(){return i}),w.d(Pt,"c",function(){return y}),w.d(Pt,"a",function(){return t});var H=w("iTfj"),i="x",y="y",t={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(u,p){return""+Object(H.get)(p,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}}},"7fqy":function(qe,Pt){function w(H){var i=-1,y=Array(H.size);return H.forEach(function(t,n){y[++i]=[n,t]}),y}qe.exports=w},"7s0d":function(qe,Pt,w){"use strict";var H=w("FH2j");w.d(Pt,"getAdjust",function(){return H.getAdjust});var i=w("Qci9"),y=w("lOPJ"),t=w("KavR"),n=w("8FoI"),u=w("96lr"),p=w("WbAE"),b=w.n(p);Object(H.registerAdjust)("Dodge",y.a),Object(H.registerAdjust)("Jitter",t.a),Object(H.registerAdjust)("Stack",n.a),Object(H.registerAdjust)("Symmetric",u.a)},"815F":function(qe,Pt,w){"use strict";w.d(Pt,"e",function(){return b}),w.d(Pt,"c",function(){return S}),w.d(Pt,"d",function(){return I}),w.d(Pt,"a",function(){return r}),w.d(Pt,"f",function(){return s}),w.d(Pt,"b",function(){return d});var H=w("U8pU"),i=w("KQm4"),y=w("VTBJ"),t=w("Ff2n"),n=w("Zm9Q"),u=w("Kwbf"),p=w("OZM5");function b(C,E){return C!=null?C:E}function c(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],E=new Map;function A(f){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";(f||[]).forEach(function(j){var P=j.key,W=j.children;Object(u.a)(P!=null,"Tree node must have a certain key: [".concat(x).concat(P,"]"));var X=String(P);Object(u.a)(!E.has(X)||P===null||P===void 0,"Same 'key' exist in the Tree: ".concat(X)),E.set(X,!0),A(W,"".concat(x).concat(X," > "))})}A(C)}function S(C){function E(A){var f=Object(n.a)(A);return f.map(function(x){if(!Object(p.i)(x))return Object(u.a)(!x,"Tree/TreeNode can only accept TreeNode as children."),null;var j=x.key,P=x.props,W=P.children,X=Object(t.a)(P,["children"]),$=Object(y.a)({key:j},X),ft=E(W);return ft.length&&($.children=ft),$}).filter(function(x){return x})}return E(C)}function I(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],A=new Set(E===!0?[]:E),f=[];function x(j){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return j.map(function(W,X){var $=Object(p.h)(P?P.pos:"0",X),ft=b(W.key,$),Z=Object(y.a)(Object(y.a)({},W),{},{parent:P,pos:$,children:null,data:W,isStart:[].concat(Object(i.a)(P?P.isStart:[]),[X===0]),isEnd:[].concat(Object(i.a)(P?P.isEnd:[]),[X===j.length-1])});return f.push(Z),E===!0||A.has(ft)?Z.children=x(W.children||[],Z):Z.children=[],Z})}return x(C),f}function m(C,E,A){var f=null,x,j=Object(H.a)(A);j==="function"||j==="string"?f=A:A&&j==="object"&&(x=A.childrenPropName,f=A.externalGetKey),x=x||"children";var P;f?typeof f=="string"?P=function($){return $[f]}:typeof f=="function"&&(P=function($){return f($)}):P=function($,ft){return b($.key,ft)};function W(X,$,ft){var Z=X?X[x]:C,lt=X?Object(p.h)(ft.pos,$):"0";if(X){var pt=P(X,lt),gt={node:X,index:$,pos:lt,key:pt,parentPos:ft.node?ft.pos:null,level:ft.level+1};E(gt)}Z&&Z.forEach(function(ut,Bt){W(ut,Bt,{node:X,pos:lt,level:ft?ft.level+1:-1})})}W(null)}function r(C){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},A=E.initWrapper,f=E.processEntity,x=E.onProcessFinished,j=E.externalGetKey,P=E.childrenPropName,W=arguments.length>2?arguments[2]:void 0,X=j||W,$={},ft={},Z={posEntities:$,keyEntities:ft};return A&&(Z=A(Z)||Z),m(C,function(lt){var pt=lt.node,gt=lt.index,ut=lt.pos,Bt=lt.key,Lt=lt.parentPos,St=lt.level,K={node:pt,index:gt,key:Bt,pos:ut,level:St},dt=b(Bt,ut);$[ut]=K,ft[dt]=K,K.parent=$[Lt],K.parent&&(K.parent.children=K.parent.children||[],K.parent.children.push(K)),f&&f(K,Z)},{externalGetKey:X,childrenPropName:P}),x&&x(Z),Z}function s(C,E){var A=E.expandedKeys,f=E.selectedKeys,x=E.loadedKeys,j=E.loadingKeys,P=E.checkedKeys,W=E.halfCheckedKeys,X=E.dragOverNodeKey,$=E.dropPosition,ft=E.keyEntities,Z=ft[C],lt={eventKey:C,expanded:A.indexOf(C)!==-1,selected:f.indexOf(C)!==-1,loaded:x.indexOf(C)!==-1,loading:j.indexOf(C)!==-1,checked:P.indexOf(C)!==-1,halfChecked:W.indexOf(C)!==-1,pos:String(Z?Z.pos:""),dragOver:X===C&&$===0,dragOverGapTop:X===C&&$===-1,dragOverGapBottom:X===C&&$===1};return lt}function d(C){var E=C.data,A=C.expanded,f=C.selected,x=C.checked,j=C.loaded,P=C.loading,W=C.halfChecked,X=C.dragOver,$=C.dragOverGapTop,ft=C.dragOverGapBottom,Z=C.pos,lt=C.active,pt=Object(y.a)(Object(y.a)({},E),{},{expanded:A,selected:f,checked:x,loaded:j,loading:P,halfChecked:W,dragOver:X,dragOverGapTop:$,dragOverGapBottom:ft,pos:Z,active:lt});return"props"in pt||Object.defineProperty(pt,"props",{get:function(){return Object(u.a)(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),C}}),pt}},"8FoI":function(qe,Pt,w){"use strict";var H=w("AA7f"),i=w("iTfj"),y=w("Qci9"),t=i.Cache,n=function(u){Object(H.b)(p,u);function p(b){var c=u.call(this,b)||this,S=b.adjustNames,I=S===void 0?["y"]:S,m=b.height,r=m===void 0?NaN:m,s=b.size,d=s===void 0?10:s,C=b.reverseOrder,E=C===void 0?!1:C;return c.adjustNames=I,c.height=r,c.size=d,c.reverseOrder=E,c}return p.prototype.process=function(b){var c=this,S=c.yField,I=c.reverseOrder,m=S?this.processStack(b):this.processOneDimStack(b);return I?this.reverse(m):m},p.prototype.reverse=function(b){return b.slice(0).reverse()},p.prototype.processStack=function(b){var c=this,S=c.xField,I=c.yField,m=c.reverseOrder,r=m?this.reverse(b):b,s=new t,d=new t;return r.map(function(C){return C.map(function(E){var A,f=i.get(E,S,0),x=i.get(E,[I]),j=f.toString();if(x=i.isArray(x)?x[1]:x,!i.isNil(x)){var P=x>=0?s:d;P.has(j)||P.set(j,0);var W=P.get(j),X=x+W;return P.set(j,X),Object(H.a)(Object(H.a)({},E),(A={},A[I]=[W,X],A))}return E})})},p.prototype.processOneDimStack=function(b){var c=this,S=this,I=S.xField,m=S.height,r=S.reverseOrder,s="y",d=r?this.reverse(b):b,C=new t;return d.map(function(E){return E.map(function(A){var f,x=c.size,j=A[I],P=x*2/m;C.has(j)||C.set(j,P/2);var W=C.get(j);return C.set(j,W+P),Object(H.a)(Object(H.a)({},A),(f={},f[s]=W,f))})})},p}(y.a);Pt.a=n},"8vsG":function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return S}),w.d(Pt,"b",function(){return zt}),w.d(Pt,"c",function(){return p}),w.d(Pt,"d",function(){return Dn});var H={};w.r(H),w.d(H,"default",function(){return it}),w.d(H,"assign",function(){return x}),w.d(H,"format",function(){return wt}),w.d(H,"parse",function(){return J}),w.d(H,"defaultI18n",function(){return $}),w.d(H,"setGlobalDateI18n",function(){return Z}),w.d(H,"setGlobalDateMasks",function(){return bt});var i=w("iTfj"),y={};function t(ae){return y[ae]}function n(ae,Kt){y[ae]=Kt}var u=function(){function ae(Kt){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=Kt,this.initCfg(),this.init()}return ae.prototype.translate=function(Kt){return Kt},ae.prototype.change=function(Kt){Object(i.assign)(this.__cfg__,Kt),this.init()},ae.prototype.clone=function(){return this.constructor(this.__cfg__)},ae.prototype.getTicks=function(){var Kt=this;return Object(i.map)(this.ticks,function(te,Oe){return Object(i.isObject)(te)?te:{text:Kt.getText(te,Oe),tickValue:te,value:Kt.scale(te)}})},ae.prototype.getText=function(Kt,te){var Oe=this.formatter,Ze=Oe?Oe(Kt,te):Kt;return Object(i.isNil)(Ze)||!Object(i.isFunction)(Ze.toString)?"":Ze.toString()},ae.prototype.getConfig=function(Kt){return this.__cfg__[Kt]},ae.prototype.init=function(){Object(i.assign)(this,this.__cfg__),this.setDomain(),Object(i.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},ae.prototype.initCfg=function(){},ae.prototype.setDomain=function(){},ae.prototype.calculateTicks=function(){var Kt=this.tickMethod,te=[];if(Object(i.isString)(Kt)){var Oe=t(Kt);if(!Oe)throw new Error("There is no method to to calculate ticks!");te=Oe(this)}else Object(i.isFunction)(Kt)&&(te=Kt(this));return te},ae.prototype.rangeMin=function(){return Object(i.head)(this.range)},ae.prototype.rangeMax=function(){return Object(i.last)(this.range)},ae.prototype.calcPercent=function(Kt,te,Oe){return Object(i.isNumber)(Kt)?(Kt-te)/(Oe-te):NaN},ae.prototype.calcValue=function(Kt,te,Oe){return te+Kt*(Oe-te)},ae}(),p=u,b=w("mrSG"),c=function(ae){Object(b.b)(Kt,ae);function Kt(){var te=ae!==null&&ae.apply(this,arguments)||this;return te.type="cat",te.isCategory=!0,te.cache=new Map,te}return Kt.prototype.translate=function(te){if(this.cache.has(te))return this.cache.get(te);var Oe=Object(i.indexOf)(this.values,te);return Oe===-1&&(Oe=Object(i.isNumber)(te)?te:NaN),this.cache.set(te,Oe),Oe},Kt.prototype.scale=function(te){var Oe=this.translate(te),Ze=this.calcPercent(Oe,this.min,this.max);return this.calcValue(Ze,this.rangeMin(),this.rangeMax())},Kt.prototype.invert=function(te){var Oe=this.max-this.min,Ze=this.calcPercent(te,this.rangeMin(),this.rangeMax()),An=Math.round(Oe*Ze)+this.min;return An<this.min||An>this.max?NaN:this.values[An]},Kt.prototype.getText=function(te){for(var Oe=[],Ze=1;Ze<arguments.length;Ze++)Oe[Ze-1]=arguments[Ze];var An=te;return Object(i.isNumber)(te)&&!this.values.includes(te)&&(An=this.values[An]),ae.prototype.getText.apply(this,Object(b.d)([An],Oe))},Kt.prototype.initCfg=function(){this.tickMethod="cat"},Kt.prototype.setDomain=function(){if(Object(i.isNil)(this.getConfig("min"))&&(this.min=0),Object(i.isNil)(this.getConfig("max"))){var te=this.values.length;this.max=te>1?te-1:te}this.cache&&this.cache.clear()},Kt}(p),S=c,I=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,m="[1-9]\\d?",r="\\d\\d",s="\\d{3}",d="\\d{4}",C="[^\\s]+",E=/\[([^]*?)\]/gm;function A(ae,Kt){for(var te=[],Oe=0,Ze=ae.length;Oe<Ze;Oe++)te.push(ae[Oe].substr(0,Kt));return te}var f=function(Kt){return function(te,Oe){var Ze=Oe[Kt].map(function(qn){return qn.toLowerCase()}),An=Ze.indexOf(te.toLowerCase());return An>-1?An:null}};function x(ae){for(var Kt=[],te=1;te<arguments.length;te++)Kt[te-1]=arguments[te];for(var Oe=0,Ze=Kt;Oe<Ze.length;Oe++){var An=Ze[Oe];for(var qn in An)ae[qn]=An[qn]}return ae}var j=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],P=["January","February","March","April","May","June","July","August","September","October","November","December"],W=A(P,3),X=A(j,3),$={dayNamesShort:X,dayNames:j,monthNamesShort:W,monthNames:P,amPm:["am","pm"],DoFn:function(Kt){return Kt+["th","st","nd","rd"][Kt%10>3?0:(Kt-Kt%10!=10?1:0)*Kt%10]}},ft=x({},$),Z=function(Kt){return ft=x(ft,Kt)},lt=function(Kt){return Kt.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},pt=function(Kt,te){for(te===void 0&&(te=2),Kt=String(Kt);Kt.length<te;)Kt="0"+Kt;return Kt},gt={D:function(Kt){return String(Kt.getDate())},DD:function(Kt){return pt(Kt.getDate())},Do:function(Kt,te){return te.DoFn(Kt.getDate())},d:function(Kt){return String(Kt.getDay())},dd:function(Kt){return pt(Kt.getDay())},ddd:function(Kt,te){return te.dayNamesShort[Kt.getDay()]},dddd:function(Kt,te){return te.dayNames[Kt.getDay()]},M:function(Kt){return String(Kt.getMonth()+1)},MM:function(Kt){return pt(Kt.getMonth()+1)},MMM:function(Kt,te){return te.monthNamesShort[Kt.getMonth()]},MMMM:function(Kt,te){return te.monthNames[Kt.getMonth()]},YY:function(Kt){return pt(String(Kt.getFullYear()),4).substr(2)},YYYY:function(Kt){return pt(Kt.getFullYear(),4)},h:function(Kt){return String(Kt.getHours()%12||12)},hh:function(Kt){return pt(Kt.getHours()%12||12)},H:function(Kt){return String(Kt.getHours())},HH:function(Kt){return pt(Kt.getHours())},m:function(Kt){return String(Kt.getMinutes())},mm:function(Kt){return pt(Kt.getMinutes())},s:function(Kt){return String(Kt.getSeconds())},ss:function(Kt){return pt(Kt.getSeconds())},S:function(Kt){return String(Math.round(Kt.getMilliseconds()/100))},SS:function(Kt){return pt(Math.round(Kt.getMilliseconds()/10),2)},SSS:function(Kt){return pt(Kt.getMilliseconds(),3)},a:function(Kt,te){return Kt.getHours()<12?te.amPm[0]:te.amPm[1]},A:function(Kt,te){return Kt.getHours()<12?te.amPm[0].toUpperCase():te.amPm[1].toUpperCase()},ZZ:function(Kt){var te=Kt.getTimezoneOffset();return(te>0?"-":"+")+pt(Math.floor(Math.abs(te)/60)*100+Math.abs(te)%60,4)},Z:function(Kt){var te=Kt.getTimezoneOffset();return(te>0?"-":"+")+pt(Math.floor(Math.abs(te)/60),2)+":"+pt(Math.abs(te)%60,2)}},ut=function(Kt){return+Kt-1},Bt=[null,m],Lt=[null,C],St=["isPm",C,function(ae,Kt){var te=ae.toLowerCase();return te===Kt.amPm[0]?0:te===Kt.amPm[1]?1:null}],K=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(ae){var Kt=(ae+"").match(/([+-]|\d\d)/gi);if(Kt){var te=+Kt[1]*60+parseInt(Kt[2],10);return Kt[0]==="+"?te:-te}return 0}],dt={D:["day",m],DD:["day",r],Do:["day",m+C,function(ae){return parseInt(ae,10)}],M:["month",m,ut],MM:["month",r,ut],YY:["year",r,function(ae){var Kt=new Date,te=+(""+Kt.getFullYear()).substr(0,2);return+(""+(+ae>68?te-1:te)+ae)}],h:["hour",m,void 0,"isPm"],hh:["hour",r,void 0,"isPm"],H:["hour",m],HH:["hour",r],m:["minute",m],mm:["minute",r],s:["second",m],ss:["second",r],YYYY:["year",d],S:["millisecond","\\d",function(ae){return+ae*100}],SS:["millisecond",r,function(ae){return+ae*10}],SSS:["millisecond",s],d:Bt,dd:Bt,ddd:Lt,dddd:Lt,MMM:["month",C,f("monthNamesShort")],MMMM:["month",C,f("monthNames")],a:St,A:St,ZZ:K,Z:K},mt={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},bt=function(Kt){return x(mt,Kt)},wt=function(Kt,te,Oe){if(te===void 0&&(te=mt.default),Oe===void 0&&(Oe={}),typeof Kt=="number"&&(Kt=new Date(Kt)),Object.prototype.toString.call(Kt)!=="[object Date]"||isNaN(Kt.getTime()))throw new Error("Invalid Date pass to format");te=mt[te]||te;var Ze=[];te=te.replace(E,function(qn,rr){return Ze.push(rr),"@@@"});var An=x(x({},ft),Oe);return te=te.replace(I,function(qn){return gt[qn](Kt,An)}),te.replace(/@@@/g,function(){return Ze.shift()})};function J(ae,Kt,te){if(te===void 0&&(te={}),typeof Kt!="string")throw new Error("Invalid format in fecha parse");if(Kt=mt[Kt]||Kt,ae.length>1e3)return null;var Oe=new Date,Ze={year:Oe.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},An=[],qn=[],rr=Kt.replace(E,function(Hr,ei){return qn.push(lt(ei)),"@@@"}),tn={},sn={};rr=lt(rr).replace(I,function(Hr){var ei=dt[Hr],Kr=ei[0],Qr=ei[1],Oi=ei[3];if(tn[Kr])throw new Error("Invalid format. "+Kr+" specified twice in format");return tn[Kr]=!0,Oi&&(sn[Oi]=!0),An.push(ei),"("+Qr+")"}),Object.keys(sn).forEach(function(Hr){if(!tn[Hr])throw new Error("Invalid format. "+Hr+" is required in specified format")}),rr=rr.replace(/@@@/g,function(){return qn.shift()});var un=ae.match(new RegExp(rr,"i"));if(!un)return null;for(var ur=x(x({},ft),te),jr=1;jr<un.length;jr++){var wr=An[jr-1],yr=wr[0],ni=wr[2],_r=ni?ni(un[jr],ur):+un[jr];if(_r==null)return null;Ze[yr]=_r}Ze.isPm===1&&Ze.hour!=null&&+Ze.hour!=12?Ze.hour=+Ze.hour+12:Ze.isPm===0&&+Ze.hour==12&&(Ze.hour=0);for(var Fr=new Date(Ze.year,Ze.month,Ze.day,Ze.hour,Ze.minute,Ze.second,Ze.millisecond),Lr=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],jr=0,Gr=Lr.length;jr<Gr;jr++)if(tn[Lr[jr][0]]&&Ze[Lr[jr][0]]!==Fr[Lr[jr][1]]())return null;return Ze.timezoneOffset==null?Fr:new Date(Date.UTC(Ze.year,Ze.month,Ze.day,Ze.hour,Ze.minute-Ze.timezoneOffset,Ze.second,Ze.millisecond))}var ct={format:wt,parse:J,defaultI18n:$,setGlobalDateI18n:Z,setGlobalDateMasks:bt},it=ct,_=function(ae){return function(Kt,te,Oe,Ze){for(var An=Object(i.isNil)(Oe)?0:Oe,qn=Object(i.isNil)(Ze)?Kt.length:Ze;An<qn;){var rr=An+qn>>>1;ae(Kt[rr])>te?qn=rr:An=rr+1}return An}},R="format";function Q(ae,Kt){var te=H[R]||it[R];return te(ae,Kt)}function k(ae){return Object(i.isString)(ae)&&(ae.indexOf("T")>0?ae=new Date(ae).getTime():ae=new Date(ae.replace(/-/gi,"/")).getTime()),Object(i.isDate)(ae)&&(ae=ae.getTime()),ae}var g=1e3,O=60*g,F=60*O,V=24*F,rt=V*31,ot=V*365,st=[["HH:mm:ss",g],["HH:mm:ss",g*10],["HH:mm:ss",g*30],["HH:mm",O],["HH:mm",O*10],["HH:mm",O*30],["HH",F],["HH",F*6],["HH",F*12],["YYYY-MM-DD",V],["YYYY-MM-DD",V*4],["YYYY-WW",V*7],["YYYY-MM",rt],["YYYY-MM",rt*4],["YYYY-MM",rt*6],["YYYY",V*380]];function Mt(ae,Kt,te){var Oe=(Kt-ae)/te,Ze=_(function(qn){return qn[1]})(st,Oe)-1,An=st[Ze];return Ze<0?An=st[0]:Ze>=st.length&&(An=Object(i.last)(st)),An}var yt=function(ae){Object(b.b)(Kt,ae);function Kt(){var te=ae!==null&&ae.apply(this,arguments)||this;return te.type="timeCat",te}return Kt.prototype.translate=function(te){te=k(te);var Oe=this.values.indexOf(te);return Oe===-1&&(Object(i.isNumber)(te)&&te<this.values.length?Oe=te:Oe=NaN),Oe},Kt.prototype.getText=function(te,Oe){var Ze=this.translate(te);if(Ze>-1){var An=this.values[Ze],qn=this.formatter;return An=qn?qn(An,Oe):Q(An,this.mask),An}return te},Kt.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},Kt.prototype.setDomain=function(){var te=this.values;Object(i.each)(te,function(Oe,Ze){te[Ze]=k(Oe)}),te.sort(function(Oe,Ze){return Oe-Ze}),ae.prototype.setDomain.call(this)},Kt}(S),xt=yt,Ot=function(ae){Object(b.b)(Kt,ae);function Kt(){var te=ae!==null&&ae.apply(this,arguments)||this;return te.isContinuous=!0,te}return Kt.prototype.scale=function(te){if(Object(i.isNil)(te))return NaN;var Oe=this.rangeMin(),Ze=this.rangeMax(),An=this.max,qn=this.min;if(An===qn)return Oe;var rr=this.getScalePercent(te);return Oe+rr*(Ze-Oe)},Kt.prototype.init=function(){ae.prototype.init.call(this);var te=this.ticks,Oe=Object(i.head)(te),Ze=Object(i.last)(te);Oe<this.min&&(this.min=Oe),Ze>this.max&&(this.max=Ze),Object(i.isNil)(this.minLimit)||(this.min=Oe),Object(i.isNil)(this.maxLimit)||(this.max=Ze)},Kt.prototype.setDomain=function(){var te=Object(i.getRange)(this.values),Oe=te.min,Ze=te.max;Object(i.isNil)(this.min)&&(this.min=Oe),Object(i.isNil)(this.max)&&(this.max=Ze),this.min>this.max&&(this.min=Oe,this.max=Ze)},Kt.prototype.calculateTicks=function(){var te=this,Oe=ae.prototype.calculateTicks.call(this);return this.nice||(Oe=Object(i.filter)(Oe,function(Ze){return Ze>=te.min&&Ze<=te.max})),Oe},Kt.prototype.getScalePercent=function(te){var Oe=this.max,Ze=this.min;return(te-Ze)/(Oe-Ze)},Kt.prototype.getInvertPercent=function(te){return(te-this.rangeMin())/(this.rangeMax()-this.rangeMin())},Kt}(p),jt=Ot,Dt=function(ae){Object(b.b)(Kt,ae);function Kt(){var te=ae!==null&&ae.apply(this,arguments)||this;return te.type="linear",te.isLinear=!0,te}return Kt.prototype.invert=function(te){var Oe=this.getInvertPercent(te);return this.min+Oe*(this.max-this.min)},Kt.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},Kt}(jt),zt=Dt;function Tt(ae,Kt){var te=Math.E,Oe;return Kt>=0?Oe=Math.pow(te,Math.log(Kt)/ae):Oe=Math.pow(te,Math.log(-Kt)/ae)*-1,Oe}function Wt(ae,Kt){return ae===1?1:Math.log(Kt)/Math.log(ae)}function Ht(ae,Kt,te){Object(i.isNil)(te)&&(te=Math.max.apply(null,ae));var Oe=te;return Object(i.each)(ae,function(Ze){Ze>0&&Ze<Oe&&(Oe=Ze)}),Oe===te&&(Oe=te/Kt),Oe>1&&(Oe=1),Oe}var re=function(ae){Object(b.b)(Kt,ae);function Kt(){var te=ae!==null&&ae.apply(this,arguments)||this;return te.type="log",te}return Kt.prototype.invert=function(te){var Oe=this.base,Ze=Wt(Oe,this.max),An=this.rangeMin(),qn=this.rangeMax()-An,rr,tn=this.positiveMin;if(tn){if(te===0)return 0;rr=Wt(Oe,tn/Oe);var sn=1/(Ze-rr)*qn;if(te<sn)return te/sn*tn}else rr=Wt(Oe,this.min);var un=(te-An)/qn,ur=un*(Ze-rr)+rr;return Math.pow(Oe,ur)},Kt.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},Kt.prototype.setDomain=function(){ae.prototype.setDomain.call(this);var te=this.min;if(te<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");te===0&&(this.positiveMin=Ht(this.values,this.base,this.max))},Kt.prototype.getScalePercent=function(te){var Oe=this.max,Ze=this.min;if(Oe===Ze||te<=0)return 0;var An=this.base,qn=this.positiveMin;qn&&(Ze=qn*1/An);var rr;return te<qn?rr=te/qn/(Wt(An,Oe)-Wt(An,Ze)):rr=(Wt(An,te)-Wt(An,Ze))/(Wt(An,Oe)-Wt(An,Ze)),rr},Kt}(jt),pe=re,me=function(ae){Object(b.b)(Kt,ae);function Kt(){var te=ae!==null&&ae.apply(this,arguments)||this;return te.type="pow",te}return Kt.prototype.invert=function(te){var Oe=this.getInvertPercent(te),Ze=this.exponent,An=Tt(Ze,this.max),qn=Tt(Ze,this.min),rr=Oe*(An-qn)+qn,tn=rr>=0?1:-1;return Math.pow(rr,Ze)*tn},Kt.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},Kt.prototype.getScalePercent=function(te){var Oe=this.max,Ze=this.min;if(Oe===Ze)return 0;var An=this.exponent,qn=(Tt(An,te)-Tt(An,Ze))/(Tt(An,Oe)-Tt(An,Ze));return qn},Kt}(jt),Se=me,Le=function(ae){Object(b.b)(Kt,ae);function Kt(){var te=ae!==null&&ae.apply(this,arguments)||this;return te.type="time",te}return Kt.prototype.getText=function(te,Oe){var Ze=this.translate(te),An=this.formatter;return An?An(Ze,Oe):Q(Ze,this.mask)},Kt.prototype.scale=function(te){var Oe=te;return(Object(i.isString)(Oe)||Object(i.isDate)(Oe))&&(Oe=this.translate(Oe)),ae.prototype.scale.call(this,Oe)},Kt.prototype.translate=function(te){return k(te)},Kt.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},Kt.prototype.setDomain=function(){var te=this.values,Oe=this.getConfig("min"),Ze=this.getConfig("max");if((!Object(i.isNil)(Oe)||!Object(i.isNumber)(Oe))&&(this.min=this.translate(this.min)),(!Object(i.isNil)(Ze)||!Object(i.isNumber)(Ze))&&(this.max=this.translate(this.max)),te&&te.length){var An=[],qn=Infinity,rr=qn,tn=0;Object(i.each)(te,function(sn){var un=k(sn);if(isNaN(un))throw new TypeError("Invalid Time: "+sn+" in time scale!");qn>un?(rr=qn,qn=un):rr>un&&(rr=un),tn<un&&(tn=un),An.push(un)}),te.length>1&&(this.minTickInterval=rr-qn),Object(i.isNil)(Oe)&&(this.min=qn),Object(i.isNil)(Ze)&&(this.max=tn)}},Kt}(zt),Je=Le,On=function(ae){Object(b.b)(Kt,ae);function Kt(){var te=ae!==null&&ae.apply(this,arguments)||this;return te.type="quantize",te}return Kt.prototype.invert=function(te){var Oe=this.ticks,Ze=Oe.length,An=this.getInvertPercent(te),qn=Math.floor(An*(Ze-1));if(qn>=Ze-1)return Object(i.last)(Oe);if(qn<0)return Object(i.head)(Oe);var rr=Oe[qn],tn=Oe[qn+1],sn=qn/(Ze-1),un=(qn+1)/(Ze-1);return rr+(An-sn)/(un-sn)*(tn-rr)},Kt.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},Kt.prototype.calculateTicks=function(){var te=ae.prototype.calculateTicks.call(this);return this.nice||(Object(i.last)(te)!==this.max&&te.push(this.max),Object(i.head)(te)!==this.min&&te.unshift(this.min)),te},Kt.prototype.getScalePercent=function(te){var Oe=this.ticks;if(te<Object(i.head)(Oe))return 0;if(te>Object(i.last)(Oe))return 1;var Ze=0;return Object(i.each)(Oe,function(An,qn){if(te>=An)Ze=qn;else return!1}),Ze/(Oe.length-1)},Kt}(jt),gn=On,Wn=function(ae){Object(b.b)(Kt,ae);function Kt(){var te=ae!==null&&ae.apply(this,arguments)||this;return te.type="quantile",te}return Kt.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},Kt}(gn),kn=Wn,Vn={};function Dn(ae){return Vn[ae]}function Nn(ae,Kt){if(Dn(ae))throw new Error("type '"+ae+"' existed.");Vn[ae]=Kt}var Qn=function(ae){Object(b.b)(Kt,ae);function Kt(){var te=ae!==null&&ae.apply(this,arguments)||this;return te.type="identity",te.isIdentity=!0,te}return Kt.prototype.calculateTicks=function(){return this.values},Kt.prototype.scale=function(te){return this.values[0]!==te&&Object(i.isNumber)(te)?te:this.range[0]},Kt.prototype.invert=function(te){var Oe=this.range;return te<Oe[0]||te>Oe[1]?NaN:this.values[0]},Kt}(p),ir=Qn,hr=[1,5,2,2.5,4,3],Sr=[1,5,2,2.5,4,3,1.5,7,6,8,9],mr=Number.EPSILON*100;function dr(ae,Kt){return(ae%Kt+Kt)%Kt}function Br(ae,Kt,te,Oe,Ze,An){var qn=Object(i.size)(Kt),rr=Object(i.indexOf)(Kt,ae),tn=0,sn=dr(Oe,An);return(sn<mr||An-sn<mr)&&Oe<=0&&Ze>=0&&(tn=1),1-rr/(qn-1)-te+tn}function ii(ae,Kt,te){var Oe=Object(i.size)(Kt),Ze=Object(i.indexOf)(Kt,ae),An=1;return 1-Ze/(Oe-1)-te+An}function mi(ae,Kt,te,Oe,Ze,An){var qn=(ae-1)/(An-Ze),rr=(Kt-1)/(Math.max(An,Oe)-Math.min(te,Ze));return 2-Math.max(qn/rr,rr/qn)}function Pi(ae,Kt){return ae>=Kt?2-(ae-1)/(Kt-1):1}function sa(ae,Kt,te,Oe){var Ze=Kt-ae;return 1-.5*(Math.pow(Kt-Oe,2)+Math.pow(ae-te,2))/Math.pow(.1*Ze,2)}function Pa(ae,Kt,te){var Oe=Kt-ae;if(te>Oe){var Ze=(te-Oe)/2;return 1-Math.pow(Ze,2)/Math.pow(.1*Oe,2)}return 1}function Mi(){return 1}function Ki(ae,Kt,te,Oe,Ze,An){if(te===void 0&&(te=5),Oe===void 0&&(Oe=!0),Ze===void 0&&(Ze=hr),An===void 0&&(An=[.25,.2,.5,.05]),typeof ae!="number"||typeof Kt!="number")return{min:0,max:0,ticks:[]};if(ae===Kt||te===1)return{min:ae,max:Kt,ticks:[ae]};for(var qn={score:-2,lmin:0,lmax:0,lstep:0},rr=1;rr<Infinity;){for(var tn=0,sn=Ze;tn<sn.length;tn++){var un=sn[tn],ur=ii(un,Ze,rr);if(Number.isNaN(ur))throw new Error("NaN");if(An[0]*ur+An[1]+An[2]+An[3]<qn.score){rr=Infinity;break}for(var jr=2;jr<Infinity;){var wr=Pi(jr,te);if(An[0]*ur+An[1]+An[2]*wr+An[3]<qn.score)break;for(var yr=(Kt-ae)/(jr+1)/rr/un,ni=Math.ceil(Math.log10(yr));ni<Infinity;){var _r=rr*un*Math.pow(10,ni),Fr=Pa(ae,Kt,_r*(jr-1));if(An[0]*ur+An[1]*Fr+An[2]*wr+An[3]<qn.score)break;var Lr=Math.floor(Kt/_r)*rr-(jr-1)*rr,Gr=Math.ceil(ae/_r)*rr;if(Lr>Gr){ni=ni+1;continue}for(var Hr=Lr;Hr<=Gr;Hr=Hr+1){var ei=Hr*(_r/rr),Kr=ei+_r*(jr-1),Qr=_r,Oi=Br(un,Ze,rr,ei,Kr,Qr),Ri=sa(ae,Kt,ei,Kr),Si=mi(jr,te,ae,Kt,ei,Kr),Gi=Mi(),ca=An[0]*Oi+An[1]*Ri+An[2]*Si+An[3]*Gi;ca>qn.score&&(!Oe||ei<=ae&&Kr>=Kt)&&(qn.lmin=ei,qn.lmax=Kr,qn.lstep=Qr,qn.score=ca)}ni=ni+1}jr=jr+1}}rr=rr+1}for(var ha=Number.isInteger(qn.lstep)?0:Math.ceil(Math.abs(Math.log10(qn.lstep))),na=[],Zi=qn.lmin;Zi<=qn.lmax;Zi+=qn.lstep)na.push(Zi);var ve=ha?Object(i.map)(na,function(U){return Number.parseFloat(U.toFixed(ha))}):na;return{min:Math.min(ae,Object(i.head)(ve)),max:Math.max(Kt,Object(i.last)(ve)),ticks:ve}}function fa(ae){var Kt=ae.values,te=ae.tickInterval,Oe=ae.tickCount,Ze=Kt;if(Object(i.isNumber)(te))return Object(i.filter)(Ze,function(sn,un){return un%te==0});var An=ae.min,qn=ae.max;if(Object(i.isNil)(An)&&(An=0),Object(i.isNil)(qn)&&(qn=Kt.length-1),Object(i.isNumber)(Oe)&&Oe<qn-An){var rr=Ki(An,qn,Oe,!1,[1,2,5,3,4,7,6,8,9]).ticks,tn=Object(i.filter)(rr,function(sn){return sn>=An&&sn<=qn});return tn.map(function(sn){return Kt[sn]})}return Kt.slice(An,qn+1)}function oa(ae){var Kt=ae.min,te=ae.max,Oe=ae.nice,Ze=ae.tickCount,An=new Pr;return An.domain([Kt,te]),Oe&&An.nice(Ze),An.ticks(Ze)}var pa=5,La=Math.sqrt(50),Yr=Math.sqrt(10),Sa=Math.sqrt(2),Pr=function(){function ae(){this._domain=[0,1]}return ae.prototype.domain=function(Kt){return Kt?(this._domain=Array.from(Kt,Number),this):this._domain.slice()},ae.prototype.nice=function(Kt){var te,Oe;Kt===void 0&&(Kt=pa);var Ze=this._domain.slice(),An=0,qn=this._domain.length-1,rr=this._domain[An],tn=this._domain[qn],sn;return tn<rr&&(te=[tn,rr],rr=te[0],tn=te[1],Oe=[qn,An],An=Oe[0],qn=Oe[1]),sn=ti(rr,tn,Kt),sn>0?(rr=Math.floor(rr/sn)*sn,tn=Math.ceil(tn/sn)*sn,sn=ti(rr,tn,Kt)):sn<0&&(rr=Math.ceil(rr*sn)/sn,tn=Math.floor(tn*sn)/sn,sn=ti(rr,tn,Kt)),sn>0?(Ze[An]=Math.floor(rr/sn)*sn,Ze[qn]=Math.ceil(tn/sn)*sn,this.domain(Ze)):sn<0&&(Ze[An]=Math.ceil(rr*sn)/sn,Ze[qn]=Math.floor(tn*sn)/sn,this.domain(Ze)),this},ae.prototype.ticks=function(Kt){return Kt===void 0&&(Kt=pa),si(this._domain[0],this._domain[this._domain.length-1],Kt||pa)},ae}();function si(ae,Kt,te){var Oe,Ze=-1,An,qn,rr;if(Kt=+Kt,ae=+ae,te=+te,ae===Kt&&te>0)return[ae];if((Oe=Kt<ae)&&(An=ae,ae=Kt,Kt=An),(rr=ti(ae,Kt,te))===0||!isFinite(rr))return[];if(rr>0)for(ae=Math.ceil(ae/rr),Kt=Math.floor(Kt/rr),qn=new Array(An=Math.ceil(Kt-ae+1));++Ze<An;)qn[Ze]=(ae+Ze)*rr;else for(ae=Math.floor(ae*rr),Kt=Math.ceil(Kt*rr),qn=new Array(An=Math.ceil(ae-Kt+1));++Ze<An;)qn[Ze]=(ae-Ze)/rr;return Oe&&qn.reverse(),qn}function ti(ae,Kt,te){var Oe=(Kt-ae)/Math.max(0,te),Ze=Math.floor(Math.log(Oe)/Math.LN10),An=Oe/Math.pow(10,Ze);return Ze>=0?(An>=La?10:An>=Yr?5:An>=Sa?2:1)*Math.pow(10,Ze):-Math.pow(10,-Ze)/(An>=La?10:An>=Yr?5:An>=Sa?2:1)}function $r(ae,Kt,te){var Oe;return te==="ceil"?Oe=Math.ceil(ae/Kt):te==="floor"?Oe=Math.floor(ae/Kt):Oe=Math.round(ae/Kt),Oe*Kt}function ui(ae,Kt,te){var Oe=$r(ae,te,"floor"),Ze=$r(Kt,te,"ceil");Oe=Object(i.fixedBase)(Oe,te),Ze=Object(i.fixedBase)(Ze,te);for(var An=[],qn=Oe;qn<=Ze;qn=qn+te){var rr=Object(i.fixedBase)(qn,te);An.push(rr)}return{min:Oe,max:Ze,ticks:An}}function li(ae,Kt,te){var Oe,Ze=ae.minLimit,An=ae.maxLimit,qn=ae.min,rr=ae.max,tn=ae.tickCount,sn=tn===void 0?5:tn,un=Object(i.isNil)(Ze)?Object(i.isNil)(Kt)?qn:Kt:Ze,ur=Object(i.isNil)(An)?Object(i.isNil)(te)?rr:te:An;if(un>ur&&(Oe=[un,ur],ur=Oe[0],un=Oe[1]),sn<=2)return[un,ur];for(var jr=(ur-un)/(sn-1),wr=[],yr=0;yr<sn;yr++)wr.push(un+jr*yr);return wr}function xi(ae){var Kt=ae.min,te=ae.max,Oe=ae.tickInterval,Ze=ae.minLimit,An=ae.maxLimit,qn=oa(ae);return!Object(i.isNil)(Ze)||!Object(i.isNil)(An)?li(ae,Object(i.head)(qn),Object(i.last)(qn)):Oe?ui(Kt,te,Oe).ticks:qn}function Ci(ae){var Kt=ae.min,te=ae.max,Oe=ae.tickCount,Ze=ae.nice,An=ae.tickInterval,qn=ae.minLimit,rr=ae.maxLimit,tn=Ki(Kt,te,Oe,Ze).ticks;return!Object(i.isNil)(qn)||!Object(i.isNil)(rr)?li(ae,Object(i.head)(tn),Object(i.last)(tn)):An?ui(Kt,te,An).ticks:tn}function di(ae){var Kt=ae.base,te=ae.tickCount,Oe=ae.min,Ze=ae.max,An=ae.values,qn,rr=Wt(Kt,Ze);if(Oe>0)qn=Math.floor(Wt(Kt,Oe));else{var tn=Ht(An,Kt,Ze);qn=Math.floor(Wt(Kt,tn))}for(var sn=rr-qn,un=Math.ceil(sn/te),ur=[],jr=qn;jr<rr+un;jr=jr+un)ur.push(Math.pow(Kt,jr));return Oe<=0&&ur.unshift(0),ur}function Ti(ae,Kt,te){te===void 0&&(te=5);var Oe={max:0,min:0,ticks:[]};if(ae===Kt)return{max:Kt,min:ae,ticks:[ae]};var Ze=1.5,An=.5+1.5*Ze,qn=Kt-ae,rr=qn/te,tn=Math.pow(10,Math.floor(Math.log10(rr))),sn=tn<1?Math.ceil(Math.abs(Math.log10(tn))):0,un=tn;2*tn-rr<Ze*(rr-un)&&(un=2*tn,5*tn-rr<An*(rr-un)&&(un=5*tn,10*tn-rr<Ze*(rr-un)&&(un=10*tn)));var ur=Math.ceil(Kt/un),jr=Math.floor(ae/un);Oe.max=Math.max(ur*un,Kt),Oe.min=Math.min(jr*un,ae);for(var wr=Number.parseFloat((jr*un).toFixed(sn));wr<Kt;)Oe.ticks.push(wr),wr+=un,sn&&(wr=Number.parseFloat(wr.toFixed(sn)));return Oe.ticks.push(wr),Oe}function pi(ae){var Kt=ae.exponent,te=ae.tickCount,Oe=Math.ceil(Tt(Kt,ae.max)),Ze=Math.floor(Tt(Kt,ae.min)),An=Ti(Ze,Oe,te).ticks;return An.map(function(qn){var rr=qn>=0?1:-1;return Math.pow(qn,Kt)*rr})}function Ni(ae,Kt){var te=ae.length*Kt;return Kt===1?ae[ae.length-1]:Kt===0?ae[0]:te%1!=0?ae[Math.ceil(te)-1]:ae.length%2==0?(ae[te-1]+ae[te])/2:ae[te]}function Bi(ae){var Kt=ae.tickCount,te=ae.values;if(!te||!te.length)return[];for(var Oe=te.slice().sort(function(rr,tn){return rr-tn}),Ze=[],An=0;An<Kt;An++){var qn=An/(Kt-1);Ze.push(Ni(Oe,qn))}return Ze}function Fi(ae){var Kt=ae.min,te=ae.max,Oe=ae.tickCount,Ze=ae.tickInterval,An=ae.minLimit,qn=ae.maxLimit,rr=Ti(Kt,te,Oe).ticks;return!Object(i.isNil)(An)||!Object(i.isNil)(qn)?li(ae,Object(i.head)(rr),Object(i.last)(rr)):Ze?ui(Kt,te,Ze).ticks:rr}function ma(ae){var Kt=ae.min,te=ae.max,Oe=ae.minTickInterval,Ze=ae.tickInterval,An=ae.tickCount;if(Ze)An=Math.ceil((te-Kt)/Ze);else{Ze=Mt(Kt,te,An)[1];var qn=(te-Kt)/Ze,rr=qn/An;rr>1&&(Ze=Ze*Math.ceil(rr)),Oe&&Ze<Oe&&(Ze=Oe)}for(var tn=[],sn=Kt;sn<te+Ze;sn+=Ze)tn.push(sn);return tn}function ua(ae){var Kt=fa(ae),te=Object(i.last)(ae.values);return te!==Object(i.last)(Kt)&&Kt.push(te),Kt}function Ra(ae){return new Date(ae).getFullYear()}function xa(ae){return new Date(ae,0,1).getTime()}function Ma(ae){return new Date(ae).getMonth()}function Qi(ae,Kt){var te=Ra(ae),Oe=Ra(Kt),Ze=Ma(ae),An=Ma(Kt);return(Oe-te)*12+(An-Ze)%12}function ka(ae,Kt){return new Date(ae,Kt,1).getTime()}function vo(ae,Kt){return Math.ceil((Kt-ae)/V)}function za(ae,Kt){return Math.ceil((Kt-ae)/F)}function Ga(ae,Kt){return Math.ceil((Kt-ae)/(60*1e3))}function eo(ae){var Kt=ae.min,te=ae.max,Oe=ae.minTickInterval,Ze=ae.tickCount,An=ae.tickInterval,qn=[];An||(An=(te-Kt)/Ze,Oe&&An<Oe&&(An=Oe));var rr=Ra(Kt);if(An>ot)for(var tn=Ra(te),sn=Math.ceil(An/ot),un=rr;un<=tn+sn;un=un+sn)qn.push(xa(un));else if(An>rt)for(var ur=Math.ceil(An/rt),jr=Ma(Kt),wr=Qi(Kt,te),un=0;un<=wr+ur;un=un+ur)qn.push(ka(rr,un+jr));else if(An>V)for(var yr=new Date(Kt),ni=yr.getFullYear(),_r=yr.getMonth(),Fr=yr.getDate(),Lr=Math.ceil(An/V),Gr=vo(Kt,te),un=0;un<Gr+Lr;un=un+Lr)qn.push(new Date(ni,_r,Fr+un).getTime());else if(An>F)for(var yr=new Date(Kt),ni=yr.getFullYear(),_r=yr.getMonth(),Lr=yr.getDate(),Hr=yr.getHours(),ei=Math.ceil(An/F),Kr=za(Kt,te),un=0;un<=Kr+ei;un=un+ei)qn.push(new Date(ni,_r,Lr,Hr+un).getTime());else if(An>O)for(var Qr=Ga(Kt,te),Oi=Math.ceil(An/O),un=0;un<=Qr+Oi;un=un+Oi)qn.push(Kt+un*O);else{var Ri=An;Ri<g&&(Ri=g);for(var Si=Math.floor(Kt/g)*g,Gi=Math.ceil((te-Kt)/g),ca=Math.ceil(Ri/g),un=0;un<Gi+ca;un=un+ca)qn.push(Si+un*g)}return qn.length>=512&&console.warn("Notice: current ticks length("+qn.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+An+") is too small, increase the value to solve the problem!"),qn}n("cat",fa),n("time-cat",ua),n("wilkinson-extended",Ci),n("r-pretty",Fi),n("time",ma),n("time-pretty",eo),n("log",di),n("pow",pi),n("quantile",Bi),n("d3-linear",xi),Nn("cat",S),Nn("category",S),Nn("identity",ir),Nn("linear",zt),Nn("log",pe),Nn("pow",Se),Nn("time",Je),Nn("timeCat",xt),Nn("quantize",gn),Nn("quantile",kn)},"96lr":function(qe,Pt,w){"use strict";var H=w("AA7f"),i=w("iTfj"),y=w("Qci9"),t=function(n){Object(H.b)(u,n);function u(){return n!==null&&n.apply(this,arguments)||this}return u.prototype.process=function(p){var b=i.flatten(p),c=this,S=c.xField,I=c.yField,m=this.getXValuesMaxMap(b),r=Math.max.apply(Math,Object.keys(m).map(function(s){return m[s]}));return i.map(p,function(s){return i.map(s,function(d){var C,E,A=d[I],f=d[S];if(i.isArray(A)){var x=(r-m[f])/2;return Object(H.a)(Object(H.a)({},d),(C={},C[I]=i.map(A,function(P){return x+P}),C))}var j=(r-A)/2;return Object(H.a)(Object(H.a)({},d),(E={},E[I]=[j,A+j],E))})})},u.prototype.getXValuesMaxMap=function(p){var b=this,c=this,S=c.xField,I=c.yField,m=i.groupBy(p,function(r){return r[S]});return i.mapValues(m,function(r){return b.getDimMaxValue(r,I)})},u.prototype.getDimMaxValue=function(p,b){var c=i.map(p,function(I){return i.get(I,b,[])}),S=i.flatten(c);return Math.max.apply(Math,S)},u}(y.a);Pt.a=t},"9eUa":function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return p}),w.d(Pt,"d",function(){return b}),w.d(Pt,"b",function(){return c}),w.d(Pt,"c",function(){return I}),w.d(Pt,"e",function(){return s}),w.d(Pt,"h",function(){return d}),w.d(Pt,"f",function(){return E}),w.d(Pt,"g",function(){return A});var H=w("iTfj"),i=w("r0DC"),y=w("nCnq"),t=w("cyZq"),n=w("nycV"),u={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function p(f,x){var j=x.attr();for(var P in j){var W=j[P],X=u[P]?u[P]:P;X==="matrix"&&W?f.transform(W[0],W[1],W[3],W[4],W[6],W[7]):X==="lineDash"&&f.setLineDash?Object(H.isArray)(W)&&f.setLineDash(W):(X==="strokeStyle"||X==="fillStyle"?W=Object(i.b)(f,x,W):X==="globalAlpha"&&(W=W*f.globalAlpha),f[X]=W)}}function b(f,x,j){for(var P=0;P<x.length;P++){var W=x[P];W.cfg.visible?W.draw(f,j):W.skipDraw()}}function c(f,x,j){var P=f.get("refreshElements");Object(H.each)(P,function(W){if(W!==f)for(var X=W.cfg.parent;X&&X!==f&&!X.cfg.refresh;)X.cfg.refresh=!0,X=X.cfg.parent}),P[0]===f?m(x,j):S(x,j)}function S(f,x){for(var j=0;j<f.length;j++){var P=f[j];if(P.cfg.visible)if(P.cfg.hasChanged)P.cfg.refresh=!0,P.isGroup()&&m(P.cfg.children,x);else if(P.cfg.refresh)P.isGroup()&&S(P.cfg.children,x);else{var W=r(P,x);P.cfg.refresh=W,W&&P.isGroup()&&S(P.cfg.children,x)}}}function I(f){for(var x=0;x<f.length;x++){var j=f[x];j.cfg.hasChanged=!1,j.isGroup()&&!j.destroyed&&I(j.cfg.children)}}function m(f,x){for(var j=0;j<f.length;j++){var P=f[j];P.cfg.refresh=!0,P.isGroup()&&m(P.get("children"),x)}}function r(f,x){var j=f.cfg.cacheCanvasBBox,P=f.cfg.isInView&&j&&Object(t.f)(j,x);return P}function s(f,x,j,P){var W=j.path,X=j.startArrow,$=j.endArrow;if(!!W){var ft=[0,0],Z=[0,0],lt={dx:0,dy:0};x.beginPath();for(var pt=0;pt<W.length;pt++){var gt=W[pt],ut=gt[0];if(pt===0&&X&&X.d){var Bt=f.getStartTangent();lt=n.c(Bt[0][0],Bt[0][1],Bt[1][0],Bt[1][1],X.d)}else if(pt===W.length-2&&W[pt+1][0]==="Z"&&$&&$.d){var Lt=W[pt+1];if(Lt[0]==="Z"){var Bt=f.getEndTangent();lt=n.c(Bt[0][0],Bt[0][1],Bt[1][0],Bt[1][1],$.d)}}else if(pt===W.length-1&&$&&$.d&&W[0]!=="Z"){var Bt=f.getEndTangent();lt=n.c(Bt[0][0],Bt[0][1],Bt[1][0],Bt[1][1],$.d)}var St=lt.dx,K=lt.dy;switch(ut){case"M":x.moveTo(gt[1]-St,gt[2]-K),Z=[gt[1],gt[2]];break;case"L":x.lineTo(gt[1]-St,gt[2]-K);break;case"Q":x.quadraticCurveTo(gt[1],gt[2],gt[3]-St,gt[4]-K);break;case"C":x.bezierCurveTo(gt[1],gt[2],gt[3],gt[4],gt[5]-St,gt[6]-K);break;case"A":{var dt=void 0;P?(dt=P[pt],dt||(dt=Object(y.a)(ft,gt),P[pt]=dt)):dt=Object(y.a)(ft,gt);var mt=dt.cx,bt=dt.cy,wt=dt.rx,J=dt.ry,ct=dt.startAngle,it=dt.endAngle,_=dt.xRotation,R=dt.sweepFlag;if(x.ellipse)x.ellipse(mt,bt,wt,J,_,ct,it,1-R);else{var Q=wt>J?wt:J,k=wt>J?1:wt/J,g=wt>J?J/wt:1;x.translate(mt,bt),x.rotate(_),x.scale(k,g),x.arc(0,0,Q,ct,it,1-R),x.scale(1/k,1/g),x.rotate(-_),x.translate(-mt,-bt)}break}case"Z":x.closePath();break;default:break}if(ut==="Z")ft=Z;else{var O=gt.length;ft=[gt[O-2],gt[O-1]]}}}}function d(f,x){var j=f.get("canvas");j&&(x==="remove"&&(f._cacheCanvasBBox=f.get("cacheCanvasBBox")),f.get("hasChanged")||(f.set("hasChanged",!0),f.cfg.parent&&f.cfg.parent.get("hasChanged")||(j.refreshElement(f,x,j),j.get("autoDraw")&&j.draw())))}function C(f){var x;if(f.destroyed)x=f._cacheCanvasBBox;else{var j=f.get("cacheCanvasBBox"),P=j&&!!(j.width&&j.height),W=f.getCanvasBBox(),X=W&&!!(W.width&&W.height);P&&X?x=Object(t.l)(j,W):P?x=j:X&&(x=W)}return x}function E(f){if(!f.length)return null;var x=[],j=[],P=[],W=[];return Object(H.each)(f,function(X){var $=C(X);$&&(x.push($.minX),j.push($.minY),P.push($.maxX),W.push($.maxY))}),{minX:Math.min.apply(null,x),minY:Math.min.apply(null,j),maxX:Math.max.apply(null,P),maxY:Math.max.apply(null,W)}}function A(f,x){return!f||!x||!Object(t.f)(f,x)?null:{minX:Math.max(f.minX,x.minX),minY:Math.max(f.minY,x.minY),maxX:Math.min(f.maxX,x.maxX),maxY:Math.min(f.maxY,x.maxY)}}},"9yH6":function(qe,Pt,w){"use strict";var H=w("rePB"),i=w("wx14"),y=w("q1tI"),t=w("x1Ya"),n=w("TSYQ"),u=w.n(n),p=w("c+Xe"),b=w("H84U"),c=y.createContext(null),S=c.Provider,I=c,m=w("uaoM"),r=function(Z,lt){var pt={};for(var gt in Z)Object.prototype.hasOwnProperty.call(Z,gt)&&lt.indexOf(gt)<0&&(pt[gt]=Z[gt]);if(Z!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ut=0,gt=Object.getOwnPropertySymbols(Z);ut<gt.length;ut++)lt.indexOf(gt[ut])<0&&Object.prototype.propertyIsEnumerable.call(Z,gt[ut])&&(pt[gt[ut]]=Z[gt[ut]]);return pt},s=function(lt,pt){var gt,ut=y.useContext(I),Bt=y.useContext(b.b),Lt=Bt.getPrefixCls,St=Bt.direction,K=y.useRef(),dt=Object(p.a)(pt,K);y.useEffect(function(){Object(m.a)(!("optionType"in lt),"Radio","`optionType` is only support in Radio.Group.")},[]);var mt=function(g){lt.onChange&&lt.onChange(g),(ut==null?void 0:ut.onChange)&&ut.onChange(g)},bt=lt.prefixCls,wt=lt.className,J=lt.children,ct=lt.style,it=r(lt,["prefixCls","className","children","style"]),_=Lt("radio",bt),R=Object(i.a)({},it);ut&&(R.name=ut.name,R.onChange=mt,R.checked=lt.value===ut.value,R.disabled=lt.disabled||ut.disabled);var Q=u()("".concat(_,"-wrapper"),(gt={},Object(H.a)(gt,"".concat(_,"-wrapper-checked"),R.checked),Object(H.a)(gt,"".concat(_,"-wrapper-disabled"),R.disabled),Object(H.a)(gt,"".concat(_,"-wrapper-rtl"),St==="rtl"),gt),wt);return y.createElement("label",{className:Q,style:ct,onMouseEnter:lt.onMouseEnter,onMouseLeave:lt.onMouseLeave},y.createElement(t.a,Object(i.a)({},R,{prefixCls:_,ref:dt})),J!==void 0?y.createElement("span",null,J):null)},d=y.forwardRef(s);d.displayName="Radio",d.defaultProps={type:"radio"};var C=d,E=w("ODXe"),A=w("6cGi"),f=w("3Nzz"),x=y.forwardRef(function(Z,lt){var pt=y.useContext(b.b),gt=pt.getPrefixCls,ut=pt.direction,Bt=y.useContext(f.b),Lt=Object(A.a)(Z.defaultValue,{value:Z.value}),St=Object(E.a)(Lt,2),K=St[0],dt=St[1],mt=function(J){var ct=K,it=J.target.value;"value"in Z||dt(it);var _=Z.onChange;_&&it!==ct&&_(J)},bt=function(){var J,ct=Z.prefixCls,it=Z.className,_=it===void 0?"":it,R=Z.options,Q=Z.optionType,k=Z.buttonStyle,g=k===void 0?"outline":k,O=Z.disabled,F=Z.children,V=Z.size,rt=Z.style,ot=Z.id,st=Z.onMouseEnter,Mt=Z.onMouseLeave,yt=gt("radio",ct),xt="".concat(yt,"-group"),Ot=F;if(R&&R.length>0){var jt=Q==="button"?"".concat(yt,"-button"):yt;Ot=R.map(function(Tt){return typeof Tt=="string"?y.createElement(C,{key:Tt,prefixCls:jt,disabled:O,value:Tt,checked:K===Tt},Tt):y.createElement(C,{key:"radio-group-value-options-".concat(Tt.value),prefixCls:jt,disabled:Tt.disabled||O,value:Tt.value,checked:K===Tt.value,style:Tt.style},Tt.label)})}var Dt=V||Bt,zt=u()(xt,"".concat(xt,"-").concat(g),(J={},Object(H.a)(J,"".concat(xt,"-").concat(Dt),Dt),Object(H.a)(J,"".concat(xt,"-rtl"),ut==="rtl"),J),_);return y.createElement("div",{className:zt,style:rt,onMouseEnter:st,onMouseLeave:Mt,id:ot,ref:lt},Ot)};return y.createElement(S,{value:{onChange:mt,value:K,disabled:Z.disabled,name:Z.name}},bt())}),j=y.memo(x),P=function(Z,lt){var pt={};for(var gt in Z)Object.prototype.hasOwnProperty.call(Z,gt)&&lt.indexOf(gt)<0&&(pt[gt]=Z[gt]);if(Z!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ut=0,gt=Object.getOwnPropertySymbols(Z);ut<gt.length;ut++)lt.indexOf(gt[ut])<0&&Object.prototype.propertyIsEnumerable.call(Z,gt[ut])&&(pt[gt[ut]]=Z[gt[ut]]);return pt},W=function(lt,pt){var gt=y.useContext(I),ut=y.useContext(b.b),Bt=ut.getPrefixCls,Lt=lt.prefixCls,St=P(lt,["prefixCls"]),K=Bt("radio-button",Lt);return gt&&(St.checked=lt.value===gt.value,St.disabled=lt.disabled||gt.disabled),y.createElement(C,Object(i.a)({prefixCls:K},St,{type:"radio",ref:pt}))},X=y.forwardRef(W),$=C;$.Button=X,$.Group=j;var ft=Pt.a=$},A90E:function(qe,Pt,w){var H=w("6sVZ"),i=w("V6Ve"),y=Object.prototype,t=y.hasOwnProperty;function n(u){if(!H(u))return i(u);var p=[];for(var b in Object(u))t.call(u,b)&&b!="constructor"&&p.push(b);return p}qe.exports=n},AA7f:function(qe,Pt,w){"use strict";w.d(Pt,"b",function(){return i}),w.d(Pt,"a",function(){return y});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var H=function(ft,Z){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(lt,pt){lt.__proto__=pt}||function(lt,pt){for(var gt in pt)pt.hasOwnProperty(gt)&&(lt[gt]=pt[gt])},H(ft,Z)};function i($,ft){H($,ft);function Z(){this.constructor=$}$.prototype=ft===null?Object.create(ft):(Z.prototype=ft.prototype,new Z)}var y=function(){return y=Object.assign||function(Z){for(var lt,pt=1,gt=arguments.length;pt<gt;pt++){lt=arguments[pt];for(var ut in lt)Object.prototype.hasOwnProperty.call(lt,ut)&&(Z[ut]=lt[ut])}return Z},y.apply(this,arguments)};function t($,ft){var Z={};for(var lt in $)Object.prototype.hasOwnProperty.call($,lt)&&ft.indexOf(lt)<0&&(Z[lt]=$[lt]);if($!=null&&typeof Object.getOwnPropertySymbols=="function")for(var pt=0,lt=Object.getOwnPropertySymbols($);pt<lt.length;pt++)ft.indexOf(lt[pt])<0&&Object.prototype.propertyIsEnumerable.call($,lt[pt])&&(Z[lt[pt]]=$[lt[pt]]);return Z}function n($,ft,Z,lt){var pt=arguments.length,gt=pt<3?ft:lt===null?lt=Object.getOwnPropertyDescriptor(ft,Z):lt,ut;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")gt=Reflect.decorate($,ft,Z,lt);else for(var Bt=$.length-1;Bt>=0;Bt--)(ut=$[Bt])&&(gt=(pt<3?ut(gt):pt>3?ut(ft,Z,gt):ut(ft,Z))||gt);return pt>3&&gt&&Object.defineProperty(ft,Z,gt),gt}function u($,ft){return function(Z,lt){ft(Z,lt,$)}}function p($,ft){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata($,ft)}function b($,ft,Z,lt){function pt(gt){return gt instanceof Z?gt:new Z(function(ut){ut(gt)})}return new(Z||(Z=Promise))(function(gt,ut){function Bt(K){try{St(lt.next(K))}catch(dt){ut(dt)}}function Lt(K){try{St(lt.throw(K))}catch(dt){ut(dt)}}function St(K){K.done?gt(K.value):pt(K.value).then(Bt,Lt)}St((lt=lt.apply($,ft||[])).next())})}function c($,ft){var Z={label:0,sent:function(){if(gt[0]&1)throw gt[1];return gt[1]},trys:[],ops:[]},lt,pt,gt,ut;return ut={next:Bt(0),throw:Bt(1),return:Bt(2)},typeof Symbol=="function"&&(ut[Symbol.iterator]=function(){return this}),ut;function Bt(St){return function(K){return Lt([St,K])}}function Lt(St){if(lt)throw new TypeError("Generator is already executing.");for(;Z;)try{if(lt=1,pt&&(gt=St[0]&2?pt.return:St[0]?pt.throw||((gt=pt.return)&&gt.call(pt),0):pt.next)&&!(gt=gt.call(pt,St[1])).done)return gt;switch(pt=0,gt&&(St=[St[0]&2,gt.value]),St[0]){case 0:case 1:gt=St;break;case 4:return Z.label++,{value:St[1],done:!1};case 5:Z.label++,pt=St[1],St=[0];continue;case 7:St=Z.ops.pop(),Z.trys.pop();continue;default:if(gt=Z.trys,!(gt=gt.length>0&&gt[gt.length-1])&&(St[0]===6||St[0]===2)){Z=0;continue}if(St[0]===3&&(!gt||St[1]>gt[0]&&St[1]<gt[3])){Z.label=St[1];break}if(St[0]===6&&Z.label<gt[1]){Z.label=gt[1],gt=St;break}if(gt&&Z.label<gt[2]){Z.label=gt[2],Z.ops.push(St);break}gt[2]&&Z.ops.pop(),Z.trys.pop();continue}St=ft.call($,Z)}catch(K){St=[6,K],pt=0}finally{lt=gt=0}if(St[0]&5)throw St[1];return{value:St[0]?St[1]:void 0,done:!0}}}function S($,ft,Z,lt){lt===void 0&&(lt=Z),$[lt]=ft[Z]}function I($,ft){for(var Z in $)Z!=="default"&&!ft.hasOwnProperty(Z)&&(ft[Z]=$[Z])}function m($){var ft=typeof Symbol=="function"&&Symbol.iterator,Z=ft&&$[ft],lt=0;if(Z)return Z.call($);if($&&typeof $.length=="number")return{next:function(){return $&&lt>=$.length&&($=void 0),{value:$&&$[lt++],done:!$}}};throw new TypeError(ft?"Object is not iterable.":"Symbol.iterator is not defined.")}function r($,ft){var Z=typeof Symbol=="function"&&$[Symbol.iterator];if(!Z)return $;var lt=Z.call($),pt,gt=[],ut;try{for(;(ft===void 0||ft-- >0)&&!(pt=lt.next()).done;)gt.push(pt.value)}catch(Bt){ut={error:Bt}}finally{try{pt&&!pt.done&&(Z=lt.return)&&Z.call(lt)}finally{if(ut)throw ut.error}}return gt}function s(){for(var $=[],ft=0;ft<arguments.length;ft++)$=$.concat(r(arguments[ft]));return $}function d(){for(var $=0,ft=0,Z=arguments.length;ft<Z;ft++)$+=arguments[ft].length;for(var lt=Array($),pt=0,ft=0;ft<Z;ft++)for(var gt=arguments[ft],ut=0,Bt=gt.length;ut<Bt;ut++,pt++)lt[pt]=gt[ut];return lt}function C($){return this instanceof C?(this.v=$,this):new C($)}function E($,ft,Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var lt=Z.apply($,ft||[]),pt,gt=[];return pt={},ut("next"),ut("throw"),ut("return"),pt[Symbol.asyncIterator]=function(){return this},pt;function ut(mt){lt[mt]&&(pt[mt]=function(bt){return new Promise(function(wt,J){gt.push([mt,bt,wt,J])>1||Bt(mt,bt)})})}function Bt(mt,bt){try{Lt(lt[mt](bt))}catch(wt){dt(gt[0][3],wt)}}function Lt(mt){mt.value instanceof C?Promise.resolve(mt.value.v).then(St,K):dt(gt[0][2],mt)}function St(mt){Bt("next",mt)}function K(mt){Bt("throw",mt)}function dt(mt,bt){mt(bt),gt.shift(),gt.length&&Bt(gt[0][0],gt[0][1])}}function A($){var ft,Z;return ft={},lt("next"),lt("throw",function(pt){throw pt}),lt("return"),ft[Symbol.iterator]=function(){return this},ft;function lt(pt,gt){ft[pt]=$[pt]?function(ut){return(Z=!Z)?{value:C($[pt](ut)),done:pt==="return"}:gt?gt(ut):ut}:gt}}function f($){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ft=$[Symbol.asyncIterator],Z;return ft?ft.call($):($=typeof m=="function"?m($):$[Symbol.iterator](),Z={},lt("next"),lt("throw"),lt("return"),Z[Symbol.asyncIterator]=function(){return this},Z);function lt(gt){Z[gt]=$[gt]&&function(ut){return new Promise(function(Bt,Lt){ut=$[gt](ut),pt(Bt,Lt,ut.done,ut.value)})}}function pt(gt,ut,Bt,Lt){Promise.resolve(Lt).then(function(St){gt({value:St,done:Bt})},ut)}}function x($,ft){return Object.defineProperty?Object.defineProperty($,"raw",{value:ft}):$.raw=ft,$}function j($){if($&&$.__esModule)return $;var ft={};if($!=null)for(var Z in $)Object.hasOwnProperty.call($,Z)&&(ft[Z]=$[Z]);return ft.default=$,ft}function P($){return $&&$.__esModule?$:{default:$}}function W($,ft){if(!ft.has($))throw new TypeError("attempted to get private field on non-instance");return ft.get($)}function X($,ft,Z){if(!ft.has($))throw new TypeError("attempted to set private field on non-instance");return ft.set($,Z),Z}},APlK:function(qe,Pt,w){"use strict";w.d(Pt,"b",function(){return i}),w.d(Pt,"c",function(){return y}),w.d(Pt,"a",function(){return t});var H=w("c+wO");function i(n,u){var p=n.cfg.el,b=n.attr(),c={dx:b.shadowOffsetX,dy:b.shadowOffsetY,blur:b.shadowBlur,color:b.shadowColor};if(!c.dx&&!c.dy&&!c.blur&&!c.color)p.removeAttribute("filter");else{var S=u.find("filter",c);S||(S=u.addShadow(c)),p.setAttribute("filter","url(#"+S+")")}}function y(n){var u=n.attr().matrix;if(u){for(var p=n.cfg.el,b=[],c=0;c<9;c+=3)b.push(u[c]+","+u[c+1]);b=b.join(","),b.indexOf("NaN")===-1?p.setAttribute("transform","matrix("+b+")"):console.warn("invalid matrix:",u)}}function t(n,u){var p=n.getClip(),b=n.get("el");if(!p)b.removeAttribute("clip-path");else if(p&&!b.hasAttribute("clip-path")){Object(H.a)(p),p.createPath(u);var c=u.addClip(p);b.setAttribute("clip-path","url(#"+c+")")}}},"B+CY":function(qe,Pt){},B0vJ:function(qe,Pt){},"B2d+":function(qe,Pt){},B3DA:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return y});var H=w("iTfj"),i=w("F/eT");function y(t){var n=Object(H.clamp)(Object(i.a)(t)?t:0,0,1);return[{type:"current",percent:n},{type:"target",percent:1-n}]}},"B6l+":function(qe,Pt,w){var H=w("Sq3C"),i=w("Z1HP"),y=w("Sxd8"),t=w("dt0z");function n(u,p,b){u=t(u),p=y(p);var c=p?i(u):0;return p&&c<p?u+H(p-c,b):u}qe.exports=n},B8du:function(qe,Pt){function w(){return!1}qe.exports=w},BYeR:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return s});var H=w("mrSG"),i=w("zJSt"),y=w("YuPD"),t=w("iTfj"),n=w("w02o"),u=w("tKoa");function p(d){var C=d.data,E=d.xField,A=d.measureField,f=d.rangeField,x=d.targetField,j=d.layout,P=[],W=[];C.forEach(function(ft,Z){var lt;ft[f].sort(function(pt,gt){return pt-gt}),ft[f].forEach(function(pt,gt){var ut,Bt=gt===0?pt:ft[f][gt]-ft[f][gt-1];P.push((ut={rKey:f+"_"+gt},ut[E]=E?ft[E]:String(Z),ut[f]=Bt,ut))}),ft[A].forEach(function(pt,gt){var ut;P.push((ut={mKey:ft[A].length>1?A+"_"+gt:""+A},ut[E]=E?ft[E]:String(Z),ut[A]=pt,ut))}),P.push((lt={tKey:""+x},lt[E]=E?ft[E]:String(Z),lt[x]=ft[x],lt)),W.push(ft[f],ft[A],ft[x])});var X=Math.min.apply(Math,W.flat(Infinity)),$=Math.max.apply(Math,W.flat(Infinity));return X=X>0?0:X,j==="vertical"&&P.reverse(),{min:X,max:$,ds:P}}function b(d){var C=d.chart,E=d.options,A=E.bulletStyle,f=E.targetField,x=E.rangeField,j=E.measureField,P=E.xField,W=E.color,X=E.layout,$=E.size,ft=E.label,Z=p(E),lt=Z.min,pt=Z.max,gt=Z.ds;C.data(gt);var ut=Object(y.b)({},d,{options:{xField:P,yField:x,seriesField:"rKey",isStack:!0,label:Object(t.get)(ft,"range"),interval:{color:Object(t.get)(W,"range"),style:Object(t.get)(A,"range"),size:Object(t.get)($,"range")}}});Object(u.c)(ut),C.geometries[0].tooltip(!1);var Bt=Object(y.b)({},d,{options:{xField:P,yField:j,seriesField:"mKey",isStack:!0,label:Object(t.get)(ft,"measure"),interval:{color:Object(t.get)(W,"measure"),style:Object(t.get)(A,"measure"),size:Object(t.get)($,"measure")}}});Object(u.c)(Bt);var Lt=Object(y.b)({},d,{options:{xField:P,yField:f,seriesField:"tKey",label:Object(t.get)(ft,"target"),point:{color:Object(t.get)(W,"target"),style:Object(t.get)(A,"target"),size:Object(t.get)($,"target")/2,shape:X==="horizontal"?"line":"hyphen"}}});return Object(u.e)(Lt),X==="horizontal"&&C.coordinate().transpose(),Object(H.a)(Object(H.a)({},d),{ext:{data:{min:lt,max:pt}}})}function c(d){var C,E,A=d.options,f=d.ext,x=A.xAxis,j=A.yAxis,P=A.targetField,W=A.rangeField,X=A.measureField,$=A.xField,ft=f.data;return Object(y.e)(Object(n.f)((C={},C[$]=x,C[X]=j,C),(E={},E[X]={min:ft==null?void 0:ft.min,max:ft==null?void 0:ft.max},E[P]={sync:""+X},E[W]={sync:""+X},E)))(d)}function S(d){var C=d.chart,E=d.options,A=E.xAxis,f=E.yAxis,x=E.xField,j=E.measureField,P=E.rangeField,W=E.targetField;return C.axis(""+P,!1),C.axis(""+W,!1),A===!1?C.axis(""+x,!1):C.axis(""+x,A),f===!1?C.axis(""+j,!1):C.axis(""+j,f),d}function I(d){var C=d.chart,E=d.options,A=E.legend;return C.removeInteraction("legend-filter"),C.legend(A),C.legend("rKey",!1),C.legend("mKey",!1),C.legend("tKey",!1),d}function m(d){var C=d.chart,E=d.options,A=E.label,f=E.measureField,x=E.targetField,j=E.rangeField,P=C.geometries,W=P[0],X=P[1],$=P[2];return Object(t.get)(A,"range")?W.label(""+j,Object(H.a)({layout:[{type:"limit-in-plot"}]},Object(y.o)(A.range))):W.label(!1),Object(t.get)(A,"measure")?X.label(""+f,Object(H.a)({layout:[{type:"limit-in-plot"}]},Object(y.o)(A.measure))):X.label(!1),Object(t.get)(A,"target")?$.label(""+x,Object(H.a)({layout:[{type:"limit-in-plot"}]},Object(y.o)(A.target))):$.label(!1),d}function r(d){Object(y.e)(b,c,S,I,n.j,m,n.k,n.c,n.a)(d)}var s=function(d){Object(H.b)(C,d);function C(){var E=d!==null&&d.apply(this,arguments)||this;return E.type="bullet",E}return C.prototype.changeData=function(E){this.updateOption({data:E});var A=p(this.options),f=A.min,x=A.max,j=A.ds;c({options:this.options,ext:{data:{min:f,max:x}},chart:this.chart}),this.chart.changeData(j)},C.prototype.getSchemaAdaptor=function(){return r},C.prototype.getDefaultOptions=function(){return Object(y.b)({},d.prototype.getDefaultOptions.call(this),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}})},C}(i.a)},BgvD:function(qe,Pt,w){"use strict";w.d(Pt,"b",function(){return S}),w.d(Pt,"a",function(){return r});var H=w("iTfj"),i="\u2026";function y(s){for(var d=0,C=0;C<s.length;C++)d+=t(s,C);return d}function t(s,d){return s.charCodeAt(d)>0&&s.charCodeAt(d)<128?1:2}function n(s,d,C){C===void 0&&(C="tail");var E=s.length,A="";if(C==="tail"){for(var f=0,x=0;f<d;){var j=t(s,x);if(f+j<=d)A+=s[x],f+=t(s,x),x++;else break}A+=i}else if(C==="head"){for(var f=0,x=E-1;f<d;){var j=t(s,x);if(f+j<=d)A+=s[x],f+=t(s,x),x--;else break}A=i+A}else{for(var P="",W="",f=0,X=0,$=E-1;f<d;){var ft=t(s,X),Z=!1;ft+f<=d&&(P+=s[X],X++,f+=ft,Z=!0);var lt=t(s,$);if(lt+f<=d&&(W=s[$]+W,f+=lt,$--,Z=!0),!Z)break}A=P+i+W}return A}var u="\u2026",p=2,b=400;function c(s){for(var d=s.map(function(P){var W=P.attr("text");return Object(H.isNil)(W)?"":""+W}),C=0,E=0,A=0;A<d.length;A+=1){for(var f=0,x=0;x<=d[A].length;x+=1){var j=d[A].charCodeAt(x);j>=19968&&j<=40869?f+=2:f+=1}f>C&&(C=f,E=A)}return s[E].getBBox().width}function S(s){if(s.length>b)return c(s);var d=0;return Object(H.each)(s,function(C){var E=C.getBBox(),A=E.width;d<A&&(d=A)}),d}function I(s,d){var C=d.getCanvasBBox();return s?C.width:C.height}function m(s,d){return s.getBBox().width<d}function r(s,d,C,E){E===void 0&&(E="tail");var A=d.attr("text"),f=I(s,d),x=y(A),j=!1;if(C<f){var P=Math.floor(C/f*x)-p,W=void 0;P>=0?W=n(A,P,E):W=u,W&&(d.attr("text",W),j=!0)}return j?d.set("tip",A):d.set("tip",null),j}},BwSJ:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return d});var H=w("mrSG"),i=w("zJSt"),y=w("YuPD"),t=w("iTfj");function n(C,E){var A=Math.floor(C/E);return[E*A,E*(A+1)]}function u(C){return Math.ceil(Math.log(C.length)/Math.LN2)+1}function p(C,E,A,f,x){var j=Object(t.clone)(C);Object(t.sortBy)(j,E);var P=Object(t.valuesOfKey)(j,E),W=Object(t.getRange)(P),X=W.max-W.min,$=A;if(!A&&f&&($=X/f),!A&&!f){var ft=u(P);$=X/ft}var Z={},lt=Object(t.groupBy)(j,x);Object(t.isEmpty)(lt)?Object(t.each)(j,function(gt){var ut=gt[E],Bt=n(ut,$),Lt=Bt[0]+"-"+Bt[1];Object(t.hasKey)(Z,Lt)||(Z[Lt]={range:Bt,count:0}),Z[Lt].count+=1}):Object.keys(lt).forEach(function(gt){Object(t.each)(lt[gt],function(ut){var Bt=ut[E],Lt=n(Bt,$),St=Lt[0]+"-"+Lt[1],K=St+"-"+gt;Object(t.hasKey)(Z,K)||(Z[K]={range:Lt,count:0},Z[K][x]=gt),Z[K].count+=1})});var pt=[];return Object(t.each)(Z,function(gt){pt.push(gt)}),pt}var b=w("w02o"),c=w("tKoa");function S(C){var E=C.chart,A=C.options,f=A.data,x=A.binField,j=A.binNumber,P=A.binWidth,W=A.color,X=A.stackField,$=A.legend,ft=A.columnStyle,Z=p(f,x,P,j,X);E.data(Z);var lt=Object(y.b)({},C,{options:{xField:"range",yField:"count",seriesField:X,isStack:!0,interval:{color:W,style:ft}}});return Object(c.c)(lt),$&&X&&E.legend(X,$),C}function I(C){var E=C.options,A=E.xAxis,f=E.yAxis;return Object(y.e)(Object(b.f)({range:A,count:f}))(C)}function m(C){var E=C.chart,A=C.options,f=A.xAxis,x=A.yAxis;return f===!1?E.axis("range",!1):E.axis("range",f),x===!1?E.axis("count",!1):E.axis("count",x),C}function r(C){var E=C.chart,A=C.options,f=A.label,x=Object(y.c)(E,"interval");if(!f)x.label(!1);else{var j=f.callback,P=Object(H.c)(f,["callback"]);x.label({fields:["count"],callback:j,cfg:Object(y.o)(P)})}return C}function s(C){return Object(y.e)(S,I,m,b.j,r,b.k,b.c,b.a)(C)}var d=function(C){Object(H.b)(E,C);function E(){var A=C!==null&&C.apply(this,arguments)||this;return A.type="histogram",A}return E.prototype.changeData=function(A){this.updateOption({data:A});var f=this.options,x=f.binField,j=f.binNumber,P=f.binWidth,W=f.stackField;this.chart.changeData(p(A,x,P,j,W))},E.prototype.getDefaultOptions=function(){return Object(y.b)({},C.prototype.getDefaultOptions.call(this),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]})},E.prototype.getSchemaAdaptor=function(){return s},E}(i.a)},CBiR:function(qe,Pt,w){"use strict";Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.getReplaceAttrs=Pt.getPolygonCentroid=Pt.getAngle=Pt.getArcPath=Pt.getSectorPath=Pt.polarToCartesian=void 0;var H=w("iTfj");function i(c){if(H.isEmpty(c))return null;var S=c[0].x,I=c[0].x,m=c[0].y,r=c[0].y;return H.each(c,function(s){S=S>s.x?s.x:S,I=I<s.x?s.x:I,m=m>s.y?s.y:m,r=r<s.y?s.y:r}),{minX:S,maxX:I,minY:m,maxY:r,centerX:(S+I)/2,centerY:(m+r)/2}}function y(c,S,I,m){return{x:c+I*Math.cos(m),y:S+I*Math.sin(m)}}Pt.polarToCartesian=y;function t(c,S,I,m,r,s){s===void 0&&(s=0);var d=y(c,S,I,m),C=y(c,S,I,r),E=y(c,S,s,m),A=y(c,S,s,r);if(r-m==Math.PI*2){var f=y(c,S,I,m+Math.PI),x=y(c,S,s,m+Math.PI),j=[["M",d.x,d.y],["A",I,I,0,1,1,f.x,f.y],["A",I,I,0,1,1,C.x,C.y],["M",E.x,E.y]];return s&&(j.push(["A",s,s,0,1,0,x.x,x.y]),j.push(["A",s,s,0,1,0,A.x,A.y])),j.push(["M",d.x,d.y]),j.push(["Z"]),j}var P=r-m<=Math.PI?0:1,W=[["M",d.x,d.y],["A",I,I,0,P,1,C.x,C.y],["L",A.x,A.y]];return s&&W.push(["A",s,s,0,P,0,E.x,E.y]),W.push(["L",d.x,d.y]),W.push(["Z"]),W}Pt.getSectorPath=t;function n(c,S,I,m,r){var s=y(c,S,I,m),d=y(c,S,I,r);if(H.isNumberEqual(r-m,Math.PI*2)){var C=y(c,S,I,m+Math.PI);return[["M",s.x,s.y],["A",I,I,0,1,1,C.x,C.y],["A",I,I,0,1,1,s.x,s.y],["A",I,I,0,1,0,C.x,C.y],["A",I,I,0,1,0,s.x,s.y],["Z"]]}var E=r-m<=Math.PI?0:1;return[["M",s.x,s.y],["A",I,I,0,E,1,d.x,d.y]]}Pt.getArcPath=n;function u(c,S){var I=c.points,m=i(I),r,s,d=S.startAngle,C=S.endAngle,E=C-d;return S.isTransposed?(r=m.maxY*E,s=m.minY*E):(r=m.maxX*E,s=m.minX*E),r+=d,s+=d,{startAngle:s,endAngle:r}}Pt.getAngle=u;function p(c,S){if(H.isNumber(c)&&H.isNumber(S))return[c,S];for(var I=-1,m=0,r=0,s,d=c.length-1,C,E=0;++I<c.length;)s=d,d=I,E+=C=c[s]*S[d]-c[d]*S[s],m+=(c[s]+c[d])*C,r+=(S[s]+S[d])*C;return E*=3,[m/E,r/E]}Pt.getPolygonCentroid=p;function b(c,S){var I=c.attr(),m=S.attr();return H.each(I,function(r,s){m[s]===void 0&&(m[s]=void 0)}),m}Pt.getReplaceAttrs=b},CH3K:function(qe,Pt){function w(H,i){for(var y=-1,t=i.length,n=H.length;++y<t;)H[n+y]=i[y];return H}qe.exports=w},CSvP:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return H});function H(){return 0}Pt.b=function(i){return function(){return i}}},"Ch+T":function(qe,Pt,w){"use strict";w.r(Pt),w.d(Pt,"Html",function(){return C});var H=w("mrSG"),i=w("6UX8"),y=w("fIp6"),t=w("iTfj"),n=w("de35"),u=w("5UbV"),p=w("u60a"),b=w("L16w"),c,S=(c={},c[""+p.CONTAINER_CLASS]={position:"absolute",visibility:"visible",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:b.a.fontFamily,lineHeight:"20px",padding:"10px 10px 6px 10px"},c[""+p.TITLE_CLASS]={marginBottom:"4px"},c[""+p.LIST_CLASS]={margin:"0px",listStyleType:"none",padding:"0px"},c[""+p.LIST_ITEM_CLASS]={listStyleType:"none",marginBottom:"4px"},c[""+p.MARKER_CLASS]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},c[""+p.VALUE_CLASS]={display:"inline-block",float:"right",marginLeft:"30px"},c[""+p.CROSSHAIR_X]={position:"absolute",width:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},c[""+p.CROSSHAIR_Y]={position:"absolute",height:"1px",backgroundColor:"rgba(0, 0, 0, 0.25)"},c);function I(E,A,f,x,j){var P={left:E<j.x,right:E+f>j.x+j.width,top:A<j.y,bottom:A+x>j.y+j.height};return P}function m(E,A,f,x,j,P){var W=E,X=A;switch(P){case"left":W=E-x-f,X=A-j/2;break;case"right":W=E+f,X=A-j/2;break;case"top":W=E-x/2,X=A-j-f;break;case"bottom":W=E-x/2,X=A+f;break;default:W=E+f,X=A-j-f;break}return{x:W,y:X}}function r(E,A,f,x,j,P,W){var X=m(E,A,f,x,j,P);if(W){var $=I(X.x,X.y,x,j,W);P==="auto"?($.right&&(X.x=Math.max(0,E-x-f)),$.top&&(X.y=Math.max(0,A-j-f))):P==="top"||P==="bottom"?($.left&&(X.x=W.x),$.right&&(X.x=W.x+W.width-x),P==="top"&&$.top&&(X.y=A+f),P==="bottom"&&$.bottom&&(X.y=A-j-f)):($.top&&(X.y=W.y),$.bottom&&(X.y=W.y+W.height-j),P==="left"&&$.left&&(X.x=E+f),P==="right"&&$.right&&(X.x=E-x-f))}return X}function s(E,A){var f=!1;return Object(t.each)(A,function(x){if(Object(t.hasKey)(E,x))return f=!0,!1}),f}var d=function(E){Object(H.b)(A,E);function A(){return E!==null&&E.apply(this,arguments)||this}return A.prototype.getDefaultCfg=function(){var f=E.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},f),{name:"tooltip",type:"html",x:0,y:0,items:[],customContent:null,containerTpl:'<div class="'+p.CONTAINER_CLASS+'"><div class="'+p.TITLE_CLASS+'"></div><ul class="'+p.LIST_CLASS+'"></ul></div>',itemTpl:'<li class="'+p.LIST_ITEM_CLASS+`" data-index={index}>
          <span class="`+p.MARKER_CLASS+`" style="background:{color}"></span>
          <span class="`+p.NAME_CLASS+`">{name}</span>:
          <span class="`+p.VALUE_CLASS+`">{value}</span>
        </li>`,xCrosshairTpl:'<div class="'+p.CROSSHAIR_X+'"></div>',yCrosshairTpl:'<div class="'+p.CROSSHAIR_Y+'"></div>',title:null,showTitle:!0,region:null,crosshairsRegion:null,containerClassName:p.CONTAINER_CLASS,crosshairs:null,offset:10,position:"right",domStyles:null,defaultStyles:S})},A.prototype.render=function(){this.get("customContent")?this.renderCustomContent():(this.resetTitle(),this.renderItems()),this.resetPosition()},A.prototype.clear=function(){this.clearCrosshairs(),this.setTitle(""),this.clearItemDoms()},A.prototype.show=function(){var f=this.getContainer();!f||this.destroyed||(this.set("visible",!0),Object(y.e)(f,{visibility:"visible"}),this.setCrossHairsVisible(!0))},A.prototype.hide=function(){var f=this.getContainer();!f||this.destroyed||(this.set("visible",!1),Object(y.e)(f,{visibility:"hidden"}),this.setCrossHairsVisible(!1))},A.prototype.getLocation=function(){return{x:this.get("x"),y:this.get("y")}},A.prototype.setLocation=function(f){this.set("x",f.x),this.set("y",f.y),this.resetPosition()},A.prototype.setCrossHairsVisible=function(f){var x=f?"":"none",j=this.get("xCrosshairDom"),P=this.get("yCrosshairDom");j&&Object(y.e)(j,{display:x}),P&&Object(y.e)(P,{display:x})},A.prototype.initContainer=function(){if(E.prototype.initContainer.call(this),this.get("customContent")){this.get("container")&&this.get("container").remove();var f=this.getHtmlContentNode();this.get("parent").appendChild(f),this.set("container",f),this.resetStyles(),this.applyStyles()}},A.prototype.updateInner=function(f){this.get("customContent")?this.renderCustomContent():(s(f,["title","showTitle"])&&this.resetTitle(),Object(t.hasKey)(f,"items")&&this.renderItems()),E.prototype.updateInner.call(this,f)},A.prototype.initDom=function(){this.cacheDoms()},A.prototype.removeDom=function(){E.prototype.removeDom.call(this),this.clearCrosshairs()},A.prototype.resetPosition=function(){var f=this.get("x"),x=this.get("y"),j=this.get("offset"),P=this.getOffset(),W=P.offsetX,X=P.offsetY,$=this.get("position"),ft=this.get("region"),Z=this.getContainer(),lt=this.getBBox(),pt=lt.width,gt=lt.height,ut;ft&&(ut=Object(u.k)(ft));var Bt=r(f,x,j,pt,gt,$,ut);Object(y.e)(Z,{left:Object(u.l)(Bt.x+W),top:Object(u.l)(Bt.y+X)}),this.resetCrosshairs()},A.prototype.renderCustomContent=function(){var f=this.getHtmlContentNode(),x=this.get("parent"),j=this.get("container");j&&j.parentNode===x?x.replaceChild(f,j):x.appendChild(f),this.set("container",f),this.resetStyles(),this.applyStyles()},A.prototype.getHtmlContentNode=function(){var f,x=this.get("customContent");if(x){var j=x(this.get("title"),this.get("items"));Object(t.isElement)(j)?f=j:f=Object(y.b)(j)}return f},A.prototype.cacheDoms=function(){var f=this.getContainer(),x=f.getElementsByClassName(p.TITLE_CLASS)[0],j=f.getElementsByClassName(p.LIST_CLASS)[0];this.set("titleDom",x),this.set("listDom",j)},A.prototype.resetTitle=function(){var f=this.get("title"),x=this.get("showTitle");x&&f?this.setTitle(f):this.setTitle("")},A.prototype.setTitle=function(f){var x=this.get("titleDom");x&&(x.innerText=f)},A.prototype.resetCrosshairs=function(){var f=this.get("crosshairsRegion"),x=this.get("crosshairs");if(!f||!x)this.clearCrosshairs();else{var j=Object(u.k)(f),P=this.get("xCrosshairDom"),W=this.get("yCrosshairDom");x==="x"?(this.resetCrosshair("x",j),W&&(W.remove(),this.set("yCrosshairDom",null))):x==="y"?(this.resetCrosshair("y",j),P&&(P.remove(),this.set("xCrosshairDom",null))):(this.resetCrosshair("x",j),this.resetCrosshair("y",j)),this.setCrossHairsVisible(this.get("visible"))}},A.prototype.resetCrosshair=function(f,x){var j=this.checkCrosshair(f),P=this.get(f);f==="x"?Object(y.e)(j,{left:Object(u.l)(P),top:Object(u.l)(x.y),height:Object(u.l)(x.height)}):Object(y.e)(j,{top:Object(u.l)(P),left:Object(u.l)(x.x),width:Object(u.l)(x.width)})},A.prototype.checkCrosshair=function(f){var x=f+"CrosshairDom",j=f+"CrosshairTpl",P="CROSSHAIR_"+f.toUpperCase(),W=p[P],X=this.get(x),$=this.get("parent");return X||(X=Object(y.b)(this.get(j)),this.applyStyle(W,X),$.appendChild(X),this.set(x,X)),X},A.prototype.renderItems=function(){this.clearItemDoms();var f=this.get("items"),x=this.get("itemTpl"),j=this.get("listDom");j&&(Object(t.each)(f,function(P){var W=i.a.toCSSGradient(P.color),X=Object(H.a)(Object(H.a)({},P),{color:W}),$=Object(t.substitute)(x,X),ft=Object(y.b)($);j.appendChild(ft)}),this.applyChildrenStyles(j,this.get("domStyles")))},A.prototype.clearItemDoms=function(){this.get("listDom")&&Object(u.a)(this.get("listDom"))},A.prototype.clearCrosshairs=function(){var f=this.get("xCrosshairDom"),x=this.get("yCrosshairDom");f&&f.remove(),x&&x.remove(),this.set("xCrosshairDom",null),this.set("yCrosshairDom",null)},A}(n.a),C=d},CmcY:function(qe,Pt,w){"use strict";var H=w("nKUr"),i=w("q1tI"),y=w("ek7X"),t=w("0NbB"),n=function(I){var m=I.direction,r=m===void 0?"up":m;return Object(H.jsx)(H.Fragment,{children:r==="up"?Object(H.jsx)(y.a,{className:"up"}):Object(H.jsx)(t.a,{className:"down"})})},u=n,p=w("5nFI"),b=function(I){var m=I.title,r=I.value,s=I.percent,d=I.precision,C=d===void 0?0:d,E=I.text,A=E===void 0?"\u6628\u65E5":E,f=s>=0?"up":"down";return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(p.a,{title:m,value:r,precision:C}),Object(H.jsxs)("div",{children:[A," ",Object(H.jsx)(u,{direction:f}),Object(H.jsxs)("span",{className:f,children:[Math.abs(s),"%"]})]})]})},c=Pt.a=b},Cr25:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return X});var H=w("mrSG"),i=w("zJSt"),y=w("iTfj"),t=w("w02o"),n=w("tKoa"),u=w("YuPD"),p=Object(u.b)({},i.a.getDefaultOptions(),{legend:{position:"right"},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}});function b($,ft){var Z=null;return Object(y.each)($,function(lt){typeof lt[ft]=="number"&&(Z+=lt[ft])}),Z}function c($,ft){var Z;switch($){case"inner":return Z="-30%",Object(y.isString)(ft)&&ft.endsWith("%")?parseFloat(ft)*.01>0?Z:ft:ft<0?ft:Z;case"outer":return Z=12,Object(y.isString)(ft)&&ft.endsWith("%")?parseFloat(ft)*.01<0?Z:ft:ft>0?ft:Z;default:return ft}}function S($,ft){var Z=Object(y.filter)($,function(lt){var pt=lt[ft];return typeof pt=="number"&&!isNaN(pt)||pt===null});return Object(u.j)(u.a.WARN,Z.length===$.length,"illegal data existed in chart data."),Z}function I($,ft){return Object(y.every)($,function(Z){return Z[ft]===0})}function m($){var ft=$.chart,Z=$.options,lt=Z.data,pt=Z.angleField,gt=Z.colorField,ut=Z.color,Bt=Z.pieStyle,Lt=S(lt,pt);if(I(Lt,pt)){var St="$$percentage$$";Lt=Lt.map(function(dt){var mt;return Object(H.a)(Object(H.a)({},dt),(mt={},mt[St]=1/Lt.length,mt))}),ft.data(Lt);var K=Object(u.b)({},$,{options:{xField:"1",yField:St,seriesField:gt,isStack:!0,interval:{color:ut,style:Bt},args:{zIndexReversed:!0}}});Object(n.c)(K),ft.geometries[0].tooltip(gt+"*"+pt)}else{ft.data(Lt);var K=Object(u.b)({},$,{options:{xField:"1",yField:pt,seriesField:gt,isStack:!0,interval:{color:ut,style:Bt},args:{zIndexReversed:!0}}});Object(n.c)(K)}return $}function r($){var ft,Z=$.chart,lt=$.options,pt=lt.meta,gt=lt.colorField,ut=Object(u.b)({},pt);return Z.scale(ut,(ft={},ft[gt]={type:"cat"},ft)),$}function s($){var ft=$.chart,Z=$.options,lt=Z.radius,pt=Z.innerRadius,gt=Z.startAngle,ut=Z.endAngle;return ft.coordinate({type:"theta",cfg:{radius:lt,innerRadius:pt,startAngle:gt,endAngle:ut}}),$}function d($){var ft=$.chart,Z=$.options,lt=Z.label,pt=Z.colorField,gt=Z.angleField,ut=ft.geometries[0];if(!lt)ut.label(!1);else{var Bt=lt.callback,Lt=Object(H.c)(lt,["callback"]),St=Object(u.o)(Lt);if(St.content){var K=St.content;St.content=function(wt,J,ct){var it=wt[pt],_=wt[gt],R=ft.getScaleByField(gt),Q=R==null?void 0:R.scale(_);return Object(y.isFunction)(K)?K(Object(H.a)(Object(H.a)({},wt),{percent:Q}),J,ct):Object(y.isString)(K)?Object(u.n)(K,{value:_,name:it,percentage:Object(y.isNumber)(Q)&&!Object(y.isNil)(_)?(Q*100).toFixed(2)+"%":null}):K}}var dt={inner:"",outer:"pie-outer",spider:"pie-spider"},mt=St.type?dt[St.type]:"pie-outer",bt=St.layout?Object(y.isArray)(St.layout)?St.layout:[St.layout]:[];St.layout=(mt?[{type:mt}]:[]).concat(bt),ut.label({fields:pt?[gt,pt]:[gt],callback:Bt,cfg:Object(H.a)(Object(H.a)({},St),{offset:c(St.type,St.offset),type:"pie"})})}return $}function C($){var ft=$.chart,Z=$.options,lt=Z.innerRadius,pt=Z.statistic,gt=Z.angleField,ut=Z.colorField,Bt=Z.meta;if(ft.getController("annotation").clear(!0),Object(u.e)(Object(t.b)())($),lt&&pt){var Lt=Object(u.b)({},p.statistic,pt),St=Lt.title,K=Lt.content;St!==!1&&(St=Object(u.b)({},{formatter:function(mt){return mt?mt[ut]:"\u603B\u8BA1"}},St)),K!==!1&&(K=Object(u.b)({},{formatter:function(mt,bt){var wt=Object(y.get)(Bt,[gt,"formatter"]),J=mt?mt[gt]:b(bt,gt);return wt?wt(J):J}},K)),Object(u.m)(ft,{statistic:{title:St,content:K},plotType:"pie"})}return $}function E($){return Object(y.get)($,["options","tooltip"])!==!1?Object(u.b)({},$,{options:{tooltip:{shared:!1}}}):$}function A($){return Object(u.e)(m,r,t.j,s,t.d,function(ft){return Object(t.k)(E(ft))},d,t.i,C,t.c,t.a)($)}var f=w("Ihc8"),x=w("qaDU"),j=function($){Object(H.b)(ft,$);function ft(){return $!==null&&$.apply(this,arguments)||this}return ft.prototype.getActiveElements=function(){var Z=f.Util.getDelegationObject(this.context);if(Z){var lt=this.context.view,pt=Z.component,gt=Z.item,ut=pt.get("field");if(ut){var Bt=lt.geometries[0].elements;return Bt.filter(function(Lt){return Lt.getModel().data[ut]===gt.value})}}return[]},ft.prototype.getActiveElementLabels=function(){var Z=this.context.view,lt=this.getActiveElements(),pt=Z.geometries[0].labelsContainer.getChildren();return pt.filter(function(gt){return lt.find(function(ut){return Object(y.isEqual)(ut.getData(),gt.get("data"))})})},ft.prototype.transfrom=function(Z){Z===void 0&&(Z=7.5);var lt=this.getActiveElements(),pt=this.getActiveElementLabels();lt.forEach(function(gt,ut){var Bt=pt[ut],Lt=gt.geometry.coordinate;if(Lt.isPolar&&Lt.isTransposed){var St=f.Util.getAngle(gt.getModel(),Lt),K=St.startAngle,dt=St.endAngle,mt=(K+dt)/2,bt=Z,wt=bt*Math.cos(mt),J=bt*Math.sin(mt);gt.shape.setMatrix(Object(x.a)([["t",wt,J]])),Bt.setMatrix(Object(x.a)([["t",wt,J]]))}})},ft.prototype.active=function(){this.transfrom()},ft.prototype.reset=function(){this.transfrom(0)},ft}(f.Action),P=w("mj6g"),W=function($){Object(H.b)(ft,$);function ft(){return $!==null&&$.apply(this,arguments)||this}return ft.prototype.getAnnotations=function(Z){var lt=Z||this.context.view;return lt.getController("annotation").option},ft.prototype.getInitialAnnotation=function(){return this.initialAnnotation},ft.prototype.init=function(){var Z=this,lt=this.context.view;lt.removeInteraction("tooltip"),lt.on("afterchangesize",function(){var pt=Z.getAnnotations(lt);Z.initialAnnotation=pt})},ft.prototype.change=function(){var Z=this.context,lt=Z.view,pt=Z.event,gt=this.getAnnotations();this.initialAnnotation||(this.initialAnnotation=gt);var ut=((pt==null?void 0:pt.data)||{}).data;if(pt.type.match("legend-item")){var Bt=f.Util.getDelegationObject(this.context),Lt=lt.getGroupedFields()[0];if(Bt&&Lt){var St=Bt.item;ut=lt.getData().find(function(Q){return Q[Lt]===St.value})}}if(ut){var K=lt.getController("annotation");K.clear(!0);var dt=lt.getScaleFields(),mt=dt[1],bt=dt[2],wt=lt.getScaleByField(mt),J=lt.getScaleByField(bt),ct=gt.filter(function(Q){return!Object(y.get)(Q,"key","").match("statistic")}),it=gt.filter(function(Q){return Object(y.get)(Q,"key","").match("statistic")}),_=it.filter(function(Q){return Q.key==="top-statistic"}),R=it.filter(function(Q){return Q.key==="bottom-statistic"});Object(y.each)(it,function(Q){var k,g;Q.key==="top-statistic"?(k=J?J.getText(ut[bt]):null,g=R?"translate(-50%, -100%)":"translate(-50%, -50%)"):(k=wt?wt.getText(ut[mt]):ut[mt],g=_?"translate(-50%, 0)":"translate(-50%,-50%)"),ct.push(Object(H.a)(Object(H.a)({},Q),{html:function(F,V){var rt=V.getCoordinate(),ot=rt.getRadius()*rt.innerRadius*2,st=Object(y.isFunction)(Q.style)?Q.style():Q.style;Object(P.d)(F,Object(H.a)({width:ot+"px",transform:g},Object(P.a)(st)));var Mt=V.getData();return Q.customHtml?Q.customHtml(F,V,ut,Mt):(Q.formatter&&(k=Q.formatter(ut,Mt)),k?Object(y.isString)(k)?k:""+k:"<div></div>")}})),ct.forEach(function(O){K.annotation(O)}),lt.render(!0)})}},ft.prototype.reset=function(){var Z=this.context.view,lt=Z.getController("annotation");lt.clear(!0);var pt=this.getInitialAnnotation();Object(y.each)(pt,function(gt){Z.annotation()[gt.type](gt)}),Z.render(!0)},ft}(f.Action);Object(f.registerAction)("pie-statistic",W),Object(f.registerInteraction)("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]}),Object(f.registerAction)("pie-legend",j),Object(f.registerInteraction)("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});var X=function($){Object(H.b)(ft,$);function ft(){var Z=$!==null&&$.apply(this,arguments)||this;return Z.type="pie",Z}return ft.getDefaultOptions=function(){return p},ft.prototype.changeData=function(Z){var lt=this.options,pt=this.options.angleField,gt=S(lt.data,pt),ut=S(Z,pt);I(gt,pt)||I(ut,pt)?this.update({data:Z}):(this.updateOption({data:Z}),this.chart.data(ut),C({chart:this.chart,options:this.options}),this.chart.render(!0))},ft.prototype.getDefaultOptions=function(){return ft.getDefaultOptions()},ft.prototype.getSchemaAdaptor=function(){return A},ft}(i.a)},Cwc5:function(qe,Pt,w){var H=w("NKxu"),i=w("Npjl");function y(t,n){var u=i(t,n);return H(u)?u:void 0}qe.exports=y},DMQx:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return X});var H=w("mrSG"),i=w("YuPD"),y=w("w02o"),t=w("iTfj"),n=w("Ihc8"),u=w("5OoT");function p($,ft){return Object(i.b)({size:ft?32:80,spacing:ft?8:12,offset:ft?32:0,arrow:$.arrow!==!1&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:$.text!==!1&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:u.a}},$)}function b($,ft){return Object(t.map)(ft.getModel().points,function(Z){return $.convertPoint(Z)})}function c($,ft,Z){var lt=$.view,pt=$.geometry,gt=$.group,ut=$.options,Bt=$.horizontal,Lt=ut.offset,St=ut.size,K=ut.arrow,dt=lt.getCoordinate(),mt=b(dt,ft)[Bt?3:0],bt=b(dt,Z)[Bt?0:3],wt=bt.y-mt.y,J=bt.x-mt.x;if(typeof K!="boolean"){var ct=K.headSize,it=ut.spacing,_;Bt?(J-ct)/2<it?(it=Math.max(1,(J-ct)/2),_=[[mt.x+it,mt.y-Lt],[mt.x+it,mt.y-Lt-St],[bt.x-it,bt.y-Lt-St/2]]):_=[[mt.x+it,mt.y-Lt],[mt.x+it,mt.y-Lt-St],[bt.x-it-ct,bt.y-Lt-St],[bt.x-it,bt.y-Lt-St/2],[bt.x-it-ct,bt.y-Lt]]:(wt-ct)/2<it?(it=Math.max(1,(wt-ct)/2),_=[[mt.x+Lt,mt.y+it],[mt.x+Lt+St,mt.y+it],[bt.x+Lt+St/2,bt.y-it]]):_=[[mt.x+Lt,mt.y+it],[mt.x+Lt+St,mt.y+it],[bt.x+Lt+St,bt.y-it-ct],[bt.x+Lt+St/2,bt.y-it],[bt.x+Lt,bt.y-it-ct]],gt.addShape("polygon",{id:lt.id+"-conversion-tag-arrow-"+pt.getElementId(ft.getModel().mappingData),name:"conversion-tag-arrow",attrs:Object(H.a)(Object(H.a)({},K.style||{}),{points:_})})}}function S($,ft,Z){var lt,pt,gt,ut=$.view,Bt=$.geometry,Lt=$.group,St=$.options,K=$.field,dt=$.horizontal,mt=St.offset,bt=St.size;if(typeof St.text!="boolean"){var wt=ut.getCoordinate(),J=((lt=St.text)===null||lt===void 0?void 0:lt.formatter)&&((pt=St.text)===null||pt===void 0?void 0:pt.formatter(ft.getData()[K],Z.getData()[K])),ct=b(wt,ft)[dt?3:0],it=b(wt,Z)[dt?0:3],_=Lt.addShape("text",{id:ut.id+"-conversion-tag-text-"+Bt.getElementId(ft.getModel().mappingData),name:"conversion-tag-text",attrs:Object(H.a)(Object(H.a)({},((gt=St.text)===null||gt===void 0?void 0:gt.style)||{}),{text:J,x:dt?(ct.x+it.x)/2:ct.x+mt+bt/2,y:dt?ct.y-mt-bt/2:(ct.y+it.y)/2})});if(dt){var R=it.x-ct.x,Q=_.getBBox().width;if(Q>R){var k=Q/J.length,g=Math.max(1,Math.ceil(R/k)-1),O=J.slice(0,g)+"...";_.attr("text",O)}}}}function I($,ft,Z){c($,ft,Z),S($,ft,Z)}function m($,ft,Z){return ft===void 0&&(ft=!0),Z===void 0&&(Z=!1),function(lt){var pt=lt.options,gt=lt.chart,ut=pt.conversionTag,Bt=pt.theme;return ut&&!Z&&(gt.theme(Object(i.b)({},Object(t.isObject)(Bt)?Bt:Object(n.getTheme)(Bt),{columnWidthRatio:1/3})),gt.annotation().shape({render:function(St,K){var dt=St.addGroup({id:gt.id+"-conversion-tag-group",name:"conversion-tag-group"}),mt=Object(t.find)(gt.geometries,function(J){return J.type==="interval"}),bt={view:K,geometry:mt,group:dt,field:$,horizontal:ft,options:p(ut,ft)},wt=ft?mt.elements:mt.elements.slice().reverse();Object(t.each)(wt,function(J,ct){ct>0&&I(bt,wt[ct-1],J)})}})),lt}}var r={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"};Object(n.registerInteraction)(r.hover,{start:[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"]}],end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]}),Object(n.registerInteraction)(r.click,{start:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"]}],end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});function s($){return $===void 0&&($=!1),function(ft){var Z=ft.chart,lt=ft.options,pt=lt.connectedArea,gt=function(){Z.removeInteraction(r.hover),Z.removeInteraction(r.click)};if(!$&&pt){var ut=pt.trigger||"hover";gt(),Z.interaction(r[ut])}else gt();return ft}}var d=w("tKoa"),C=w("sqD9"),E=w("DyAw");function A($){var ft=$.options,Z=ft.legend,lt=ft.seriesField,pt=ft.isStack;return lt?Z!==!1&&(Z=Object(H.a)({position:pt?"right-top":"top-left"},Z)):Z=!1,$.options.legend=Z,$}function f($){var ft=$.chart,Z=$.options,lt=Z.data,pt=Z.columnStyle,gt=Z.color,ut=Z.columnWidthRatio,Bt=Z.isPercent,Lt=Z.xField,St=Z.yField,K=Z.seriesField,dt=Z.tooltip;ft.data(Object(C.a)(lt,St,Lt,St,Bt));var mt=Bt?Object(H.a)({formatter:function(J){return{name:J[K]||J[Lt],value:(Number(J[St])*100).toFixed(2)+"%"}}},dt):dt,bt=Object(i.b)({},$,{options:{widthRatio:ut,tooltip:mt,interval:{style:pt,color:gt}}});return Object(d.c)(bt),$}function x($){var ft,Z,lt=$.options,pt=lt.xAxis,gt=lt.yAxis,ut=lt.xField,Bt=lt.yField,Lt=lt.data,St=lt.isPercent,K=St?{max:1,min:0,minLimit:0,maxLimit:1}:{};return Object(i.e)(Object(y.f)((ft={},ft[ut]=pt,ft[Bt]=gt,ft),(Z={},Z[ut]={type:"cat"},Z[Bt]=Object(H.a)(Object(H.a)({},Object(E.a)(Lt,Bt)),K),Z)))($)}function j($){var ft=$.chart,Z=$.options,lt=Z.xAxis,pt=Z.yAxis,gt=Z.xField,ut=Z.yField;return lt===!1?ft.axis(gt,!1):ft.axis(gt,lt),pt===!1?ft.axis(ut,!1):ft.axis(ut,pt),$}function P($){var ft=$.chart,Z=$.options,lt=Z.legend,pt=Z.seriesField;return lt&&pt?ft.legend(pt,lt):lt===!1&&ft.legend(!1),$}function W($){var ft=$.chart,Z=$.options,lt=Z.label,pt=Z.yField,gt=Z.isRange,ut=Object(i.c)(ft,"interval");if(!lt)ut.label(!1);else{var Bt=lt.callback,Lt=Object(H.c)(lt,["callback"]);ut.label({fields:[pt],callback:Bt,cfg:Object(H.a)({layout:(Lt==null?void 0:Lt.position)?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Object(i.o)(gt?Object(H.a)({content:function(K){var dt;return(dt=K[pt])===null||dt===void 0?void 0:dt.join("-")}},Lt):Lt))})}return $}function X($,ft){ft===void 0&&(ft=!1);var Z=$.options,lt=Z.seriesField;return Object(i.e)(A,y.j,f,x,j,P,y.k,y.h,y.g,W,y.c,y.a,Object(y.b)(),m(Z.yField,!ft,!!lt),s(!Z.isStack),y.e)($)}},DSRE:function(qe,Pt,w){(function(H){var i=w("Kz5y"),y=w("B8du"),t=Pt&&!Pt.nodeType&&Pt,n=t&&typeof H=="object"&&H&&!H.nodeType&&H,u=n&&n.exports===t,p=u?i.Buffer:void 0,b=p?p.isBuffer:void 0,c=b||y;H.exports=c}).call(this,w("YuTi")(qe))},DdT1:function(qe,Pt,w){"use strict";Pt.a=function(H){H.x0=Math.round(H.x0),H.y0=Math.round(H.y0),H.x1=Math.round(H.x1),H.y1=Math.round(H.y1)}},Djfg:function(qe,Pt,w){"use strict";var H=w("XiRp"),i=w.n(H),y=w("h4/5"),t=w.n(y),n=w("N9hJ"),u=w.n(n),p=w("3T7b"),b=w.n(p),c=w("B0vJ"),S=w.n(c),I=w("B2d+"),m=w.n(I)},DjyN:function(qe,Pt,w){"use strict";var H=w("cIOH"),i=w.n(H),y=w("Urep"),t=w.n(y),n=w("OaEy")},DyAw:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return i}),w.d(Pt,"b",function(){return y});var H=w("iTfj");function i(t,n){var u=t.filter(function(c){var S=Object(H.get)(c,[n]);return Object(H.isNumber)(S)&&!isNaN(S)}),p=u.every(function(c){return Object(H.get)(c,[n])>=0}),b=u.every(function(c){return Object(H.get)(c,[n])<=0});return p?{min:0}:b?{max:0}:{}}function y(t,n,u,p){if(!Array.isArray(t))return{nodes:[],links:[]};var b=[],c={},S=-1;return t.forEach(function(I){var m=I[n],r=I[u],s=I[p];c[m]||(c[m]={id:++S,name:m}),c[r]||(c[r]={id:++S,name:r}),b.push({source:c[m].id,target:c[r].id,value:s})}),{nodes:Object.values(c),links:b}}},E2jh:function(qe,Pt,w){var H=w("2gN3"),i=function(){var t=/[^.]+$/.exec(H&&H.keys&&H.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function y(t){return!!i&&i in t}qe.exports=y},EYNi:function(qe,Pt,w){"use strict";w.d(Pt,"e",function(){return f}),w.d(Pt,"b",function(){return $}),w.d(Pt,"a",function(){return mt}),w.d(Pt,"c",function(){return S}),w.d(Pt,"d",function(){return _}),w.d(Pt,"f",function(){return H});var H={};w.r(H),w.d(H,"distance",function(){return t}),w.d(H,"isNumberEqual",function(){return n}),w.d(H,"getBBoxByArray",function(){return u}),w.d(H,"getBBoxRange",function(){return p}),w.d(H,"piMod",function(){return b});function i(k){return Math.min.apply(null,k)}function y(k){return Math.max.apply(null,k)}function t(k,g,O,F){var V=k-O,rt=g-F;return Math.sqrt(V*V+rt*rt)}function n(k,g){return Math.abs(k-g)<.001}function u(k,g){var O=i(k),F=i(g),V=y(k),rt=y(g);return{x:O,y:F,width:V-O,height:rt-F}}function p(k,g,O,F){return{minX:i([k,O]),maxX:y([k,O]),minY:i([g,F]),maxY:y([g,F])}}function b(k){return(k+Math.PI*2)%(Math.PI*2)}var c=w("ZxFD"),S={box:function(g,O,F,V){return u([g,F],[O,V])},length:function(g,O,F,V){return t(g,O,F,V)},pointAt:function(g,O,F,V,rt){return{x:(1-rt)*g+rt*F,y:(1-rt)*O+rt*V}},pointDistance:function(g,O,F,V,rt,ot){var st=(F-g)*(rt-g)+(V-O)*(ot-O);if(st<0)return t(g,O,rt,ot);var Mt=(F-g)*(F-g)+(V-O)*(V-O);return st>Mt?t(F,V,rt,ot):this.pointToLine(g,O,F,V,rt,ot)},pointToLine:function(g,O,F,V,rt,ot){var st=[F-g,V-O];if(c.exactEquals(st,[0,0]))return Math.sqrt((rt-g)*(rt-g)+(ot-O)*(ot-O));var Mt=[-st[1],st[0]];c.normalize(Mt,Mt);var yt=[rt-g,ot-O];return Math.abs(c.dot(yt,Mt))},tangentAngle:function(g,O,F,V){return Math.atan2(V-O,F-g)}},I=1e-4;function m(k,g,O,F,V,rt){var ot,st=Infinity,Mt=[O,F],yt=20;rt&&rt>200&&(yt=rt/10);for(var xt=1/yt,Ot=xt/10,jt=0;jt<=yt;jt++){var Dt=jt*xt,zt=[V.apply(null,k.concat([Dt])),V.apply(null,g.concat([Dt]))],Tt=t(Mt[0],Mt[1],zt[0],zt[1]);Tt<st&&(ot=Dt,st=Tt)}if(ot===0)return{x:k[0],y:g[0]};if(ot===1){var Wt=k.length;return{x:k[Wt-1],y:g[Wt-1]}}st=Infinity;for(var jt=0;jt<32&&!(Ot<I);jt++){var Ht=ot-Ot,re=ot+Ot,zt=[V.apply(null,k.concat([Ht])),V.apply(null,g.concat([Ht]))],Tt=t(Mt[0],Mt[1],zt[0],zt[1]);if(Ht>=0&&Tt<st)ot=Ht,st=Tt;else{var pe=[V.apply(null,k.concat([re])),V.apply(null,g.concat([re]))],me=t(Mt[0],Mt[1],pe[0],pe[1]);re<=1&&me<st?(ot=re,st=me):Ot*=.5}}return{x:V.apply(null,k.concat([ot])),y:V.apply(null,g.concat([ot]))}}function r(k,g){for(var O=0,F=k.length,V=0;V<F;V++){var rt=k[V],ot=g[V],st=k[(V+1)%F],Mt=g[(V+1)%F];O+=t(rt,ot,st,Mt)}return O/2}function s(k,g,O,F){var V=1-F;return V*V*k+2*F*V*g+F*F*O}function d(k,g,O){var F=k+O-2*g;if(n(F,0))return[.5];var V=(k-g)/F;return V<=1&&V>=0?[V]:[]}function C(k,g,O,F){return 2*(1-F)*(g-k)+2*F*(O-g)}function E(k,g,O,F,V,rt,ot){var st=s(k,O,V,ot),Mt=s(g,F,rt,ot),yt=S.pointAt(k,g,O,F,ot),xt=S.pointAt(O,F,V,rt,ot);return[[k,g,yt.x,yt.y,st,Mt],[st,Mt,xt.x,xt.y,V,rt]]}function A(k,g,O,F,V,rt,ot){if(ot===0)return(t(k,g,O,F)+t(O,F,V,rt)+t(k,g,V,rt))/2;var st=E(k,g,O,F,V,rt,.5),Mt=st[0],yt=st[1];return Mt.push(ot-1),yt.push(ot-1),A.apply(null,Mt)+A.apply(null,yt)}var f={box:function(g,O,F,V,rt,ot){var st=d(g,F,rt)[0],Mt=d(O,V,ot)[0],yt=[g,rt],xt=[O,ot];return st!==void 0&&yt.push(s(g,F,rt,st)),Mt!==void 0&&xt.push(s(O,V,ot,Mt)),u(yt,xt)},length:function(g,O,F,V,rt,ot){return A(g,O,F,V,rt,ot,3)},nearestPoint:function(g,O,F,V,rt,ot,st,Mt){return m([g,F,rt],[O,V,ot],st,Mt,s)},pointDistance:function(g,O,F,V,rt,ot,st,Mt){var yt=this.nearestPoint(g,O,F,V,rt,ot,st,Mt);return t(yt.x,yt.y,st,Mt)},interpolationAt:s,pointAt:function(g,O,F,V,rt,ot,st){return{x:s(g,F,rt,st),y:s(O,V,ot,st)}},divide:function(g,O,F,V,rt,ot,st){return E(g,O,F,V,rt,ot,st)},tangentAngle:function(g,O,F,V,rt,ot,st){var Mt=C(g,F,rt,st),yt=C(O,V,ot,st),xt=Math.atan2(yt,Mt);return b(xt)}};function x(k,g,O,F,V){var rt=1-V;return rt*rt*rt*k+3*g*V*rt*rt+3*O*V*V*rt+F*V*V*V}function j(k,g,O,F,V){var rt=1-V;return 3*(rt*rt*(g-k)+2*rt*V*(O-g)+V*V*(F-O))}function P(k,g,O,F){var V=-3*k+9*g-9*O+3*F,rt=6*k-12*g+6*O,ot=3*g-3*k,st=[],Mt,yt,xt;if(n(V,0))n(rt,0)||(Mt=-ot/rt,Mt>=0&&Mt<=1&&st.push(Mt));else{var Ot=rt*rt-4*V*ot;n(Ot,0)?st.push(-rt/(2*V)):Ot>0&&(xt=Math.sqrt(Ot),Mt=(-rt+xt)/(2*V),yt=(-rt-xt)/(2*V),Mt>=0&&Mt<=1&&st.push(Mt),yt>=0&&yt<=1&&st.push(yt))}return st}function W(k,g,O,F,V,rt,ot,st,Mt){var yt=x(k,O,V,ot,Mt),xt=x(g,F,rt,st,Mt),Ot=S.pointAt(k,g,O,F,Mt),jt=S.pointAt(O,F,V,rt,Mt),Dt=S.pointAt(V,rt,ot,st,Mt),zt=S.pointAt(Ot.x,Ot.y,jt.x,jt.y,Mt),Tt=S.pointAt(jt.x,jt.y,Dt.x,Dt.y,Mt);return[[k,g,Ot.x,Ot.y,zt.x,zt.y,yt,xt],[yt,xt,Tt.x,Tt.y,Dt.x,Dt.y,ot,st]]}function X(k,g,O,F,V,rt,ot,st,Mt){if(Mt===0)return r([k,O,V,ot],[g,F,rt,st]);var yt=W(k,g,O,F,V,rt,ot,st,.5),xt=yt[0],Ot=yt[1];return xt.push(Mt-1),Ot.push(Mt-1),X.apply(null,xt)+X.apply(null,Ot)}var $={extrema:P,box:function(g,O,F,V,rt,ot,st,Mt){for(var yt=[g,st],xt=[O,Mt],Ot=P(g,F,rt,st),jt=P(O,V,ot,Mt),Dt=0;Dt<Ot.length;Dt++)yt.push(x(g,F,rt,st,Ot[Dt]));for(var Dt=0;Dt<jt.length;Dt++)xt.push(x(O,V,ot,Mt,jt[Dt]));return u(yt,xt)},length:function(g,O,F,V,rt,ot,st,Mt){return X(g,O,F,V,rt,ot,st,Mt,3)},nearestPoint:function(g,O,F,V,rt,ot,st,Mt,yt,xt,Ot){return m([g,F,rt,st],[O,V,ot,Mt],yt,xt,x,Ot)},pointDistance:function(g,O,F,V,rt,ot,st,Mt,yt,xt,Ot){var jt=this.nearestPoint(g,O,F,V,rt,ot,st,Mt,yt,xt,Ot);return t(jt.x,jt.y,yt,xt)},interpolationAt:x,pointAt:function(g,O,F,V,rt,ot,st,Mt,yt){return{x:x(g,F,rt,st,yt),y:x(O,V,ot,Mt,yt)}},divide:function(g,O,F,V,rt,ot,st,Mt,yt){return W(g,O,F,V,rt,ot,st,Mt,yt)},tangentAngle:function(g,O,F,V,rt,ot,st,Mt,yt){var xt=j(g,F,rt,st,yt),Ot=j(O,V,ot,Mt,yt);return b(Math.atan2(Ot,xt))}};function ft(k,g){var O=Math.abs(k);return g>0?O:O*-1}var Z={box:function(g,O,F,V){return{x:g-F,y:O-V,width:F*2,height:V*2}},length:function(g,O,F,V){return Math.PI*(3*(F+V)-Math.sqrt((3*F+V)*(F+3*V)))},nearestPoint:function(g,O,F,V,rt,ot){var st=F,Mt=V;if(st===0||Mt===0)return{x:g,y:O};for(var yt=rt-g,xt=ot-O,Ot=Math.abs(yt),jt=Math.abs(xt),Dt=st*st,zt=Mt*Mt,Tt=Math.PI/4,Wt,Ht,re=0;re<4;re++){Wt=st*Math.cos(Tt),Ht=Mt*Math.sin(Tt);var pe=(Dt-zt)*Math.pow(Math.cos(Tt),3)/st,me=(zt-Dt)*Math.pow(Math.sin(Tt),3)/Mt,Se=Wt-pe,Le=Ht-me,Je=Ot-pe,On=jt-me,gn=Math.hypot(Le,Se),Wn=Math.hypot(On,Je),kn=gn*Math.asin((Se*On-Le*Je)/(gn*Wn)),Vn=kn/Math.sqrt(Dt+zt-Wt*Wt-Ht*Ht);Tt+=Vn,Tt=Math.min(Math.PI/2,Math.max(0,Tt))}return{x:g+ft(Wt,yt),y:O+ft(Ht,xt)}},pointDistance:function(g,O,F,V,rt,ot){var st=this.nearestPoint(g,O,F,V,rt,ot);return t(st.x,st.y,rt,ot)},pointAt:function(g,O,F,V,rt){var ot=2*Math.PI*rt;return{x:g+F*Math.cos(ot),y:O+V*Math.sin(ot)}},tangentAngle:function(g,O,F,V,rt){var ot=2*Math.PI*rt,st=Math.atan2(V*Math.cos(ot),-F*Math.sin(ot));return b(st)}};function lt(k,g,O,F,V,rt,ot,st){return-1*O*Math.cos(V)*Math.sin(st)-F*Math.sin(V)*Math.cos(st)}function pt(k,g,O,F,V,rt,ot,st){return-1*O*Math.sin(V)*Math.sin(st)+F*Math.cos(V)*Math.cos(st)}function gt(k,g,O){return Math.atan(-g/k*Math.tan(O))}function ut(k,g,O){return Math.atan(g/(k*Math.tan(O)))}function Bt(k,g,O,F,V,rt){return O*Math.cos(V)*Math.cos(rt)-F*Math.sin(V)*Math.sin(rt)+k}function Lt(k,g,O,F,V,rt){return O*Math.sin(V)*Math.cos(rt)+F*Math.cos(V)*Math.sin(rt)+g}function St(k,g,O,F){var V=Math.atan2(F*k,O*g);return(V+Math.PI*2)%(Math.PI*2)}function K(k,g,O){return{x:k*Math.cos(O),y:g*Math.sin(O)}}function dt(k,g,O){var F=Math.cos(O),V=Math.sin(O);return[k*F-g*V,k*V+g*F]}var mt={box:function(g,O,F,V,rt,ot,st){for(var Mt=gt(F,V,rt),yt=Infinity,xt=-Infinity,Ot=[ot,st],jt=-Math.PI*2;jt<=Math.PI*2;jt+=Math.PI){var Dt=Mt+jt;ot<st?ot<Dt&&Dt<st&&Ot.push(Dt):st<Dt&&Dt<ot&&Ot.push(Dt)}for(var jt=0;jt<Ot.length;jt++){var zt=Bt(g,O,F,V,rt,Ot[jt]);zt<yt&&(yt=zt),zt>xt&&(xt=zt)}for(var Tt=ut(F,V,rt),Wt=Infinity,Ht=-Infinity,re=[ot,st],jt=-Math.PI*2;jt<=Math.PI*2;jt+=Math.PI){var pe=Tt+jt;ot<st?ot<pe&&pe<st&&re.push(pe):st<pe&&pe<ot&&re.push(pe)}for(var jt=0;jt<re.length;jt++){var me=Lt(g,O,F,V,rt,re[jt]);me<Wt&&(Wt=me),me>Ht&&(Ht=me)}return{x:yt,y:Wt,width:xt-yt,height:Ht-Wt}},length:function(g,O,F,V,rt,ot,st){},nearestPoint:function(g,O,F,V,rt,ot,st,Mt,yt){var xt=dt(Mt-g,yt-O,-rt),Ot=xt[0],jt=xt[1],Dt=Z.nearestPoint(0,0,F,V,Ot,jt),zt=St(F,V,Dt.x,Dt.y);zt<ot?Dt=K(F,V,ot):zt>st&&(Dt=K(F,V,st));var Tt=dt(Dt.x,Dt.y,rt);return{x:Tt[0]+g,y:Tt[1]+O}},pointDistance:function(g,O,F,V,rt,ot,st,Mt,yt){var xt=this.nearestPoint(g,O,F,V,Mt,yt);return t(xt.x,xt.y,Mt,yt)},pointAt:function(g,O,F,V,rt,ot,st,Mt){var yt=(st-ot)*Mt+ot;return{x:Bt(g,O,F,V,rt,yt),y:Lt(g,O,F,V,rt,yt)}},tangentAngle:function(g,O,F,V,rt,ot,st,Mt){var yt=(st-ot)*Mt+ot,xt=lt(g,O,F,V,rt,ot,st,yt),Ot=pt(g,O,F,V,rt,ot,st,yt);return b(Math.atan2(Ot,xt))}};function bt(k){for(var g=0,O=[],F=0;F<k.length-1;F++){var V=k[F],rt=k[F+1],ot=t(V[0],V[1],rt[0],rt[1]),st={from:V,to:rt,length:ot};O.push(st),g+=ot}return{segments:O,totalLength:g}}function wt(k){if(k.length<2)return 0;for(var g=0,O=0;O<k.length-1;O++){var F=k[O],V=k[O+1];g+=t(F[0],F[1],V[0],V[1])}return g}function J(k,g){if(g>1||g<0||k.length<2)return null;var O=bt(k),F=O.segments,V=O.totalLength;if(V===0)return{x:k[0][0],y:k[0][1]};for(var rt=0,ot=null,st=0;st<F.length;st++){var Mt=F[st],yt=Mt.from,xt=Mt.to,Ot=Mt.length/V;if(g>=rt&&g<=rt+Ot){var jt=(g-rt)/Ot;ot=S.pointAt(yt[0],yt[1],xt[0],xt[1],jt);break}rt+=Ot}return ot}function ct(k,g){if(g>1||g<0||k.length<2)return 0;for(var O=bt(k),F=O.segments,V=O.totalLength,rt=0,ot=0,st=0;st<F.length;st++){var Mt=F[st],yt=Mt.from,xt=Mt.to,Ot=Mt.length/V;if(g>=rt&&g<=rt+Ot){ot=Math.atan2(xt[1]-yt[1],xt[0]-yt[0]);break}rt+=Ot}return ot}function it(k,g,O){for(var F=Infinity,V=0;V<k.length-1;V++){var rt=k[V],ot=k[V+1],st=S.pointDistance(rt[0],rt[1],ot[0],ot[1],g,O);st<F&&(F=st)}return F}var _={box:function(g){for(var O=[],F=[],V=0;V<g.length;V++){var rt=g[V];O.push(rt[0]),F.push(rt[1])}return u(O,F)},length:function(g){return wt(g)},pointAt:function(g,O){return J(g,O)},pointDistance:function(g,O,F){return it(g,O,F)},tangentAngle:function(g,O){return ct(g,O)}};function R(k){var g=k.slice(0);return k.length&&g.push(k[0]),g}var Q={box:function(g){return _.box(g)},length:function(g){return wt(R(g))},pointAt:function(g,O){return J(R(g),O)},pointDistance:function(g,O,F){return it(R(g),O,F)},tangentAngle:function(g,O){return ct(R(g),O)}}},EkMX:function(qe,Pt,w){"use strict";var H={};w.r(H),w.d(H,"easeLinear",function(){return Z}),w.d(H,"easeQuad",function(){return gt}),w.d(H,"easeQuadIn",function(){return lt}),w.d(H,"easeQuadOut",function(){return pt}),w.d(H,"easeQuadInOut",function(){return gt}),w.d(H,"easeCubic",function(){return Lt}),w.d(H,"easeCubicIn",function(){return ut}),w.d(H,"easeCubicOut",function(){return Bt}),w.d(H,"easeCubicInOut",function(){return Lt}),w.d(H,"easePoly",function(){return mt}),w.d(H,"easePolyIn",function(){return K}),w.d(H,"easePolyOut",function(){return dt}),w.d(H,"easePolyInOut",function(){return mt}),w.d(H,"easeSin",function(){return it}),w.d(H,"easeSinIn",function(){return J}),w.d(H,"easeSinOut",function(){return ct}),w.d(H,"easeSinInOut",function(){return it}),w.d(H,"easeExp",function(){return k}),w.d(H,"easeExpIn",function(){return R}),w.d(H,"easeExpOut",function(){return Q}),w.d(H,"easeExpInOut",function(){return k}),w.d(H,"easeCircle",function(){return F}),w.d(H,"easeCircleIn",function(){return g}),w.d(H,"easeCircleOut",function(){return O}),w.d(H,"easeCircleInOut",function(){return F}),w.d(H,"easeBounce",function(){return Tt}),w.d(H,"easeBounceIn",function(){return zt}),w.d(H,"easeBounceOut",function(){return Tt}),w.d(H,"easeBounceInOut",function(){return Wt}),w.d(H,"easeBack",function(){return me}),w.d(H,"easeBackIn",function(){return re}),w.d(H,"easeBackOut",function(){return pe}),w.d(H,"easeBackInOut",function(){return me}),w.d(H,"easeElastic",function(){return gn}),w.d(H,"easeElasticIn",function(){return On}),w.d(H,"easeElasticOut",function(){return gn}),w.d(H,"easeElasticInOut",function(){return Wn});var i=w("mrSG"),y=w("e0ae"),t=w("Mw2x"),n=w("sstZ"),u=w("iTfj"),p=0,b=0,c=0,S=1e3,I,m,r=0,s=0,d=0,C=typeof performance=="object"&&performance.now?performance:Date,E=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(U){setTimeout(U,17)};function A(){return s||(E(f),s=C.now()+d)}function f(){s=0}function x(){this._call=this._time=this._next=null}x.prototype=j.prototype={constructor:x,restart:function(G,nt,vt){if(typeof G!="function")throw new TypeError("callback is not a function");vt=(vt==null?A():+vt)+(nt==null?0:+nt),!this._next&&m!==this&&(m?m._next=this:I=this,m=this),this._call=G,this._time=vt,ft()},stop:function(){this._call&&(this._call=null,this._time=Infinity,ft())}};function j(U,G,nt){var vt=new x;return vt.restart(U,G,nt),vt}function P(){A(),++p;for(var U=I,G;U;)(G=s-U._time)>=0&&U._call.call(null,G),U=U._next;--p}function W(){s=(r=C.now())+d,p=b=0;try{P()}finally{p=0,$(),s=0}}function X(){var U=C.now(),G=U-r;G>S&&(d-=G,r=U)}function $(){for(var U,G=I,nt,vt=Infinity;G;)G._call?(vt>G._time&&(vt=G._time),U=G,G=G._next):(nt=G._next,G._next=null,G=U?U._next=nt:I=nt);m=U,ft(vt)}function ft(U){if(!p){b&&(b=clearTimeout(b));var G=U-s;G>24?(U<Infinity&&(b=setTimeout(W,U-C.now()-d)),c&&(c=clearInterval(c))):(c||(r=C.now(),c=setInterval(X,S)),p=1,E(W))}}function Z(U){return+U}function lt(U){return U*U}function pt(U){return U*(2-U)}function gt(U){return((U*=2)<=1?U*U:--U*(2-U)+1)/2}function ut(U){return U*U*U}function Bt(U){return--U*U*U+1}function Lt(U){return((U*=2)<=1?U*U*U:(U-=2)*U*U+2)/2}var St=3,K=function U(G){G=+G;function nt(vt){return Math.pow(vt,G)}return nt.exponent=U,nt}(St),dt=function U(G){G=+G;function nt(vt){return 1-Math.pow(1-vt,G)}return nt.exponent=U,nt}(St),mt=function U(G){G=+G;function nt(vt){return((vt*=2)<=1?Math.pow(vt,G):2-Math.pow(2-vt,G))/2}return nt.exponent=U,nt}(St),bt=Math.PI,wt=bt/2;function J(U){return+U==1?1:1-Math.cos(U*wt)}function ct(U){return Math.sin(U*wt)}function it(U){return(1-Math.cos(bt*U))/2}function _(U){return(Math.pow(2,-10*U)-.0009765625)*1.0009775171065494}function R(U){return _(1-+U)}function Q(U){return 1-_(U)}function k(U){return((U*=2)<=1?_(1-U):2-_(U-1))/2}function g(U){return 1-Math.sqrt(1-U*U)}function O(U){return Math.sqrt(1- --U*U)}function F(U){return((U*=2)<=1?1-Math.sqrt(1-U*U):Math.sqrt(1-(U-=2)*U)+1)/2}var V=4/11,rt=6/11,ot=8/11,st=3/4,Mt=9/11,yt=10/11,xt=15/16,Ot=21/22,jt=63/64,Dt=1/V/V;function zt(U){return 1-Tt(1-U)}function Tt(U){return(U=+U)<V?Dt*U*U:U<ot?Dt*(U-=rt)*U+st:U<yt?Dt*(U-=Mt)*U+xt:Dt*(U-=Ot)*U+jt}function Wt(U){return((U*=2)<=1?1-Tt(1-U):Tt(U-1)+1)/2}var Ht=1.70158,re=function U(G){G=+G;function nt(vt){return(vt=+vt)*vt*(G*(vt-1)+vt)}return nt.overshoot=U,nt}(Ht),pe=function U(G){G=+G;function nt(vt){return--vt*vt*((vt+1)*G+vt)+1}return nt.overshoot=U,nt}(Ht),me=function U(G){G=+G;function nt(vt){return((vt*=2)<1?vt*vt*((G+1)*vt-G):(vt-=2)*vt*((G+1)*vt+G)+2)/2}return nt.overshoot=U,nt}(Ht),Se=2*Math.PI,Le=1,Je=.3,On=function U(G,nt){var vt=Math.asin(1/(G=Math.max(1,G)))*(nt/=Se);function Gt(Jt){return G*_(- --Jt)*Math.sin((vt-Jt)/nt)}return Gt.amplitude=function(Jt){return U(Jt,nt*Se)},Gt.period=function(Jt){return U(G,Jt)},Gt}(Le,Je),gn=function U(G,nt){var vt=Math.asin(1/(G=Math.max(1,G)))*(nt/=Se);function Gt(Jt){return 1-G*_(Jt=+Jt)*Math.sin((Jt+vt)/nt)}return Gt.amplitude=function(Jt){return U(Jt,nt*Se)},Gt.period=function(Jt){return U(G,Jt)},Gt}(Le,Je),Wn=function U(G,nt){var vt=Math.asin(1/(G=Math.max(1,G)))*(nt/=Se);function Gt(Jt){return((Jt=Jt*2-1)<0?G*_(-Jt)*Math.sin((vt-Jt)/nt):2-G*_(Jt)*Math.sin((vt+Jt)/nt))/2}return Gt.amplitude=function(Jt){return U(Jt,nt*Se)},Gt.period=function(Jt){return U(G,Jt)},Gt}(Le,Je),kn=function(U,G,nt){U.prototype=G.prototype=nt,nt.constructor=U};function Vn(U,G){var nt=Object.create(U.prototype);for(var vt in G)nt[vt]=G[vt];return nt}function Dn(){}var Nn=.7,Qn=1/Nn,ir="\\s*([+-]?\\d+)\\s*",hr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Sr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mr=/^#([0-9a-f]{3,8})$/,dr=new RegExp("^rgb\\("+[ir,ir,ir]+"\\)$"),Br=new RegExp("^rgb\\("+[Sr,Sr,Sr]+"\\)$"),ii=new RegExp("^rgba\\("+[ir,ir,ir,hr]+"\\)$"),mi=new RegExp("^rgba\\("+[Sr,Sr,Sr,hr]+"\\)$"),Pi=new RegExp("^hsl\\("+[hr,Sr,Sr]+"\\)$"),sa=new RegExp("^hsla\\("+[hr,Sr,Sr,hr]+"\\)$"),Pa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};kn(Dn,oa,{copy:function(G){return Object.assign(new this.constructor,this,G)},displayable:function(){return this.rgb().displayable()},hex:Mi,formatHex:Mi,formatHsl:Ki,formatRgb:fa,toString:fa});function Mi(){return this.rgb().formatHex()}function Ki(){return li(this).formatHsl()}function fa(){return this.rgb().formatRgb()}function oa(U){var G,nt;return U=(U+"").trim().toLowerCase(),(G=mr.exec(U))?(nt=G[1].length,G=parseInt(G[1],16),nt===6?pa(G):nt===3?new Pr(G>>8&15|G>>4&240,G>>4&15|G&240,(G&15)<<4|G&15,1):nt===8?La(G>>24&255,G>>16&255,G>>8&255,(G&255)/255):nt===4?La(G>>12&15|G>>8&240,G>>8&15|G>>4&240,G>>4&15|G&240,((G&15)<<4|G&15)/255):null):(G=dr.exec(U))?new Pr(G[1],G[2],G[3],1):(G=Br.exec(U))?new Pr(G[1]*255/100,G[2]*255/100,G[3]*255/100,1):(G=ii.exec(U))?La(G[1],G[2],G[3],G[4]):(G=mi.exec(U))?La(G[1]*255/100,G[2]*255/100,G[3]*255/100,G[4]):(G=Pi.exec(U))?ui(G[1],G[2]/100,G[3]/100,1):(G=sa.exec(U))?ui(G[1],G[2]/100,G[3]/100,G[4]):Pa.hasOwnProperty(U)?pa(Pa[U]):U==="transparent"?new Pr(NaN,NaN,NaN,0):null}function pa(U){return new Pr(U>>16&255,U>>8&255,U&255,1)}function La(U,G,nt,vt){return vt<=0&&(U=G=nt=NaN),new Pr(U,G,nt,vt)}function Yr(U){return U instanceof Dn||(U=oa(U)),U?(U=U.rgb(),new Pr(U.r,U.g,U.b,U.opacity)):new Pr}function Sa(U,G,nt,vt){return arguments.length===1?Yr(U):new Pr(U,G,nt,vt==null?1:vt)}function Pr(U,G,nt,vt){this.r=+U,this.g=+G,this.b=+nt,this.opacity=+vt}kn(Pr,Sa,Vn(Dn,{brighter:function(G){return G=G==null?Qn:Math.pow(Qn,G),new Pr(this.r*G,this.g*G,this.b*G,this.opacity)},darker:function(G){return G=G==null?Nn:Math.pow(Nn,G),new Pr(this.r*G,this.g*G,this.b*G,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:si,formatHex:si,formatRgb:ti,toString:ti}));function si(){return"#"+$r(this.r)+$r(this.g)+$r(this.b)}function ti(){var U=this.opacity;return U=isNaN(U)?1:Math.max(0,Math.min(1,U)),(U===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(U===1?")":", "+U+")")}function $r(U){return U=Math.max(0,Math.min(255,Math.round(U)||0)),(U<16?"0":"")+U.toString(16)}function ui(U,G,nt,vt){return vt<=0?U=G=nt=NaN:nt<=0||nt>=1?U=G=NaN:G<=0&&(U=NaN),new Ci(U,G,nt,vt)}function li(U){if(U instanceof Ci)return new Ci(U.h,U.s,U.l,U.opacity);if(U instanceof Dn||(U=oa(U)),!U)return new Ci;if(U instanceof Ci)return U;U=U.rgb();var G=U.r/255,nt=U.g/255,vt=U.b/255,Gt=Math.min(G,nt,vt),Jt=Math.max(G,nt,vt),ie=NaN,ue=Jt-Gt,Ce=(Jt+Gt)/2;return ue?(G===Jt?ie=(nt-vt)/ue+(nt<vt)*6:nt===Jt?ie=(vt-G)/ue+2:ie=(G-nt)/ue+4,ue/=Ce<.5?Jt+Gt:2-Jt-Gt,ie*=60):ue=Ce>0&&Ce<1?0:ie,new Ci(ie,ue,Ce,U.opacity)}function xi(U,G,nt,vt){return arguments.length===1?li(U):new Ci(U,G,nt,vt==null?1:vt)}function Ci(U,G,nt,vt){this.h=+U,this.s=+G,this.l=+nt,this.opacity=+vt}kn(Ci,xi,Vn(Dn,{brighter:function(G){return G=G==null?Qn:Math.pow(Qn,G),new Ci(this.h,this.s,this.l*G,this.opacity)},darker:function(G){return G=G==null?Nn:Math.pow(Nn,G),new Ci(this.h,this.s,this.l*G,this.opacity)},rgb:function(){var G=this.h%360+(this.h<0)*360,nt=isNaN(G)||isNaN(this.s)?0:this.s,vt=this.l,Gt=vt+(vt<.5?vt:1-vt)*nt,Jt=2*vt-Gt;return new Pr(di(G>=240?G-240:G+120,Jt,Gt),di(G,Jt,Gt),di(G<120?G+240:G-120,Jt,Gt),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var G=this.opacity;return G=isNaN(G)?1:Math.max(0,Math.min(1,G)),(G===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(G===1?")":", "+G+")")}}));function di(U,G,nt){return(U<60?G+(nt-G)*U/60:U<180?nt:U<240?G+(nt-G)*(240-U)/60:G)*255}function Ti(U,G,nt,vt,Gt){var Jt=U*U,ie=Jt*U;return((1-3*U+3*Jt-ie)*G+(4-6*Jt+3*ie)*nt+(1+3*U+3*Jt-3*ie)*vt+ie*Gt)/6}var pi=function(U){var G=U.length-1;return function(nt){var vt=nt<=0?nt=0:nt>=1?(nt=1,G-1):Math.floor(nt*G),Gt=U[vt],Jt=U[vt+1],ie=vt>0?U[vt-1]:2*Gt-Jt,ue=vt<G-1?U[vt+2]:2*Jt-Gt;return Ti((nt-vt/G)*G,ie,Gt,Jt,ue)}},Ni=function(U){var G=U.length;return function(nt){var vt=Math.floor(((nt%=1)<0?++nt:nt)*G),Gt=U[(vt+G-1)%G],Jt=U[vt%G],ie=U[(vt+1)%G],ue=U[(vt+2)%G];return Ti((nt-vt/G)*G,Gt,Jt,ie,ue)}},Bi=function(U){return function(){return U}};function Fi(U,G){return function(nt){return U+nt*G}}function ma(U,G,nt){return U=Math.pow(U,nt),G=Math.pow(G,nt)-U,nt=1/nt,function(vt){return Math.pow(U+vt*G,nt)}}function ua(U,G){var nt=G-U;return nt?Fi(U,nt>180||nt<-180?nt-360*Math.round(nt/360):nt):Bi(isNaN(U)?G:U)}function Ra(U){return(U=+U)==1?xa:function(G,nt){return nt-G?ma(G,nt,U):Bi(isNaN(G)?nt:G)}}function xa(U,G){var nt=G-U;return nt?Fi(U,nt):Bi(isNaN(U)?G:U)}var Ma=function U(G){var nt=Ra(G);function vt(Gt,Jt){var ie=nt((Gt=Sa(Gt)).r,(Jt=Sa(Jt)).r),ue=nt(Gt.g,Jt.g),Ce=nt(Gt.b,Jt.b),we=xa(Gt.opacity,Jt.opacity);return function(cn){return Gt.r=ie(cn),Gt.g=ue(cn),Gt.b=Ce(cn),Gt.opacity=we(cn),Gt+""}}return vt.gamma=U,vt}(1);function Qi(U){return function(G){var nt=G.length,vt=new Array(nt),Gt=new Array(nt),Jt=new Array(nt),ie,ue;for(ie=0;ie<nt;++ie)ue=Sa(G[ie]),vt[ie]=ue.r||0,Gt[ie]=ue.g||0,Jt[ie]=ue.b||0;return vt=U(vt),Gt=U(Gt),Jt=U(Jt),ue.opacity=1,function(Ce){return ue.r=vt(Ce),ue.g=Gt(Ce),ue.b=Jt(Ce),ue+""}}}var ka=Qi(pi),vo=Qi(Ni),za=function(U,G){G||(G=[]);var nt=U?Math.min(G.length,U.length):0,vt=G.slice(),Gt;return function(Jt){for(Gt=0;Gt<nt;++Gt)vt[Gt]=U[Gt]*(1-Jt)+G[Gt]*Jt;return vt}};function Ga(U){return ArrayBuffer.isView(U)&&!(U instanceof DataView)}var eo=function(U,G){return(Ga(G)?za:ae)(U,G)};function ae(U,G){var nt=G?G.length:0,vt=U?Math.min(nt,U.length):0,Gt=new Array(vt),Jt=new Array(nt),ie;for(ie=0;ie<vt;++ie)Gt[ie]=sn(U[ie],G[ie]);for(;ie<nt;++ie)Jt[ie]=G[ie];return function(ue){for(ie=0;ie<vt;++ie)Jt[ie]=Gt[ie](ue);return Jt}}var Kt=function(U,G){var nt=new Date;return U=+U,G=+G,function(vt){return nt.setTime(U*(1-vt)+G*vt),nt}},te=function(U,G){return U=+U,G=+G,function(nt){return U*(1-nt)+G*nt}},Oe=function(U,G){var nt={},vt={},Gt;(U===null||typeof U!="object")&&(U={}),(G===null||typeof G!="object")&&(G={});for(Gt in G)Gt in U?nt[Gt]=sn(U[Gt],G[Gt]):vt[Gt]=G[Gt];return function(Jt){for(Gt in nt)vt[Gt]=nt[Gt](Jt);return vt}},Ze=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,An=new RegExp(Ze.source,"g");function qn(U){return function(){return U}}function rr(U){return function(G){return U(G)+""}}var tn=function(U,G){var nt=Ze.lastIndex=An.lastIndex=0,vt,Gt,Jt,ie=-1,ue=[],Ce=[];for(U=U+"",G=G+"";(vt=Ze.exec(U))&&(Gt=An.exec(G));)(Jt=Gt.index)>nt&&(Jt=G.slice(nt,Jt),ue[ie]?ue[ie]+=Jt:ue[++ie]=Jt),(vt=vt[0])===(Gt=Gt[0])?ue[ie]?ue[ie]+=Gt:ue[++ie]=Gt:(ue[++ie]=null,Ce.push({i:ie,x:te(vt,Gt)})),nt=An.lastIndex;return nt<G.length&&(Jt=G.slice(nt),ue[ie]?ue[ie]+=Jt:ue[++ie]=Jt),ue.length<2?Ce[0]?rr(Ce[0].x):qn(G):(G=Ce.length,function(we){for(var cn=0,Cn;cn<G;++cn)ue[(Cn=Ce[cn]).i]=Cn.x(we);return ue.join("")})},sn=function(U,G){var nt=typeof G,vt;return G==null||nt==="boolean"?Bi(G):(nt==="number"?te:nt==="string"?(vt=oa(G))?(G=vt,Ma):tn:G instanceof oa?Ma:G instanceof Date?Kt:Ga(G)?za:Array.isArray(G)?ae:typeof G.valueOf!="function"&&typeof G.toString!="function"||isNaN(G)?Oe:te)(U,G)},un=w("tvuL"),ur=function(G){return["fill","stroke","fillStyle","strokeStyle"].includes(G)},jr=function(G){return/^[r,R,L,l]{1}[\s]*\(/.test(G)},wr=[1,0,0,0,1,0,0,0,1];function yr(U,G,nt){var vt={},Gt=G.fromAttrs,Jt=G.toAttrs;if(!U.destroyed){var ie;for(var ue in Jt)if(!Object(u.isEqual)(Gt[ue],Jt[ue]))if(ue==="path"){var Ce=Jt[ue],we=Gt[ue];Ce.length>we.length?(Ce=un.parsePathString(Jt[ue]),we=un.parsePathString(Gt[ue]),we=un.fillPathByDiff(we,Ce),we=un.formatPath(we,Ce),G.fromAttrs.path=we,G.toAttrs.path=Ce):G.pathFormatted||(Ce=un.parsePathString(Jt[ue]),we=un.parsePathString(Gt[ue]),we=un.formatPath(we,Ce),G.fromAttrs.path=we,G.toAttrs.path=Ce,G.pathFormatted=!0),vt[ue]=[];for(var cn=0;cn<Ce.length;cn++){for(var Cn=Ce[cn],_t=we[cn],Xt=[],Ee=0;Ee<Cn.length;Ee++)Object(u.isNumber)(Cn[Ee])&&_t&&Object(u.isNumber)(_t[Ee])?(ie=sn(_t[Ee],Cn[Ee]),Xt.push(ie(nt))):Xt.push(Cn[Ee]);vt[ue].push(Xt)}}else if(ue==="matrix"){var Vt=eo(Gt[ue]||wr,Jt[ue]||wr),ce=Vt(nt);vt[ue]=ce}else ur(ue)&&jr(Jt[ue])?vt[ue]=Jt[ue]:Object(u.isFunction)(Jt[ue])||(ie=sn(Gt[ue],Jt[ue]),vt[ue]=ie(nt));U.attr(vt)}}function ni(U,G,nt){var vt=G.startTime,Gt=G.delay;if(nt<vt+Gt||G._paused)return!1;var Jt,ie=G.duration,ue=G.easing;if(nt=nt-vt-G.delay,G.repeat)Jt=nt%ie/ie,Jt=H[ue](Jt);else if(Jt=nt/ie,Jt<1)Jt=H[ue](Jt);else return G.onFrame?U.attr(G.onFrame(1)):U.attr(G.toAttrs),!0;if(G.onFrame){var Ce=G.onFrame(Jt);U.attr(Ce)}else yr(U,G,Jt);return!1}var _r=function(){function U(G){this.animators=[],this.current=0,this.timer=null,this.canvas=G}return U.prototype.initTimer=function(){var G=this,nt=!1,vt,Gt,Jt;this.timer=j(function(ie){if(G.current=ie,G.animators.length>0){for(var ue=G.animators.length-1;ue>=0;ue--){if(vt=G.animators[ue],vt.destroyed){G.removeAnimator(ue);continue}if(!vt.isAnimatePaused()){Gt=vt.get("animations");for(var Ce=Gt.length-1;Ce>=0;Ce--)Jt=Gt[Ce],nt=ni(vt,Jt,ie),nt&&(Gt.splice(Ce,1),nt=!1,Jt.callback&&Jt.callback())}Gt.length===0&&G.removeAnimator(ue)}var we=G.canvas.get("autoDraw");we||G.canvas.draw()}})},U.prototype.addAnimator=function(G){this.animators.push(G)},U.prototype.removeAnimator=function(G){this.animators.splice(G,1)},U.prototype.isAnimating=function(){return!!this.animators.length},U.prototype.stop=function(){this.timer&&this.timer.stop()},U.prototype.stopAllAnimations=function(G){G===void 0&&(G=!0),this.animators.forEach(function(nt){nt.stopAnimate(G)}),this.animators=[],this.canvas.draw()},U.prototype.getTime=function(){return this.current},U}(),Fr=_r,Lr=w("5eLp"),Gr=40,Hr=0,ei=":",Kr=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Qr(U,G){for(var nt in U)if(U.hasOwnProperty(nt)&&nt.indexOf(ei+G)>=0)return!0;return!1}function Oi(U,G,nt){nt.name=G,nt.target=U,nt.currentTarget=U,nt.delegateTarget=U,U.emit(G,nt)}function Ri(U,G,nt){if(nt.bubbles){var vt=void 0,Gt=!1;if(G==="mouseenter"?(vt=nt.fromShape,Gt=!0):G==="mouseleave"&&(Gt=!0,vt=nt.toShape),U.isCanvas()&&Gt)return;if(vt&&Object(n.g)(U,vt)){nt.bubbles=!1;return}nt.name=G,nt.currentTarget=U,nt.delegateTarget=U,U.emit(G,nt)}}var Si=function(){function U(G){var nt=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(vt){var Gt=vt.type;nt._triggerEvent(Gt,vt)},this._onDocumentMove=function(vt){var Gt=nt.canvas,Jt=Gt.get("el");if(Jt!==vt.target&&(nt.dragging||nt.currentShape)){var ie=nt._getPointInfo(vt);nt.dragging&&nt._emitEvent("drag",vt,ie,nt.draggingShape)}},this._onDocumentMouseUp=function(vt){var Gt=nt.canvas,Jt=Gt.get("el");if(Jt!==vt.target&&nt.dragging){var ie=nt._getPointInfo(vt);nt.draggingShape&&nt._emitEvent("drop",vt,ie,null),nt._emitEvent("dragend",vt,ie,nt.draggingShape),nt._afterDrag(nt.draggingShape,ie,vt)}},this.canvas=G.canvas}return U.prototype.init=function(){this._bindEvents()},U.prototype._bindEvents=function(){var G=this,nt=this.canvas.get("el");Object(n.a)(Kr,function(vt){nt.addEventListener(vt,G._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},U.prototype._clearEvents=function(){var G=this,nt=this.canvas.get("el");Object(n.a)(Kr,function(vt){nt.removeEventListener(vt,G._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},U.prototype._getEventObj=function(G,nt,vt,Gt,Jt,ie){var ue=new Lr.a(G,nt);return ue.fromShape=Jt,ue.toShape=ie,ue.x=vt.x,ue.y=vt.y,ue.clientX=vt.clientX,ue.clientY=vt.clientY,ue.propagationPath.push(Gt),ue},U.prototype._getShape=function(G,nt){return this.canvas.getShape(G.x,G.y,nt)},U.prototype._getPointInfo=function(G){var nt=this.canvas,vt=nt.getClientByEvent(G),Gt=nt.getPointByEvent(G);return{x:Gt.x,y:Gt.y,clientX:vt.x,clientY:vt.y}},U.prototype._triggerEvent=function(G,nt){var vt=this._getPointInfo(nt),Gt=this._getShape(vt,nt),Jt=this["_on"+G],ie=!1;if(Jt)Jt.call(this,vt,Gt,nt);else{var ue=this.currentShape;G==="mouseenter"||G==="dragenter"||G==="mouseover"?(this._emitEvent(G,nt,vt,null,null,Gt),Gt&&this._emitEvent(G,nt,vt,Gt,null,Gt),G==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",nt,vt,null)):G==="mouseleave"||G==="dragleave"||G==="mouseout"?(ie=!0,ue&&this._emitEvent(G,nt,vt,ue,ue,null),this._emitEvent(G,nt,vt,null,ue,null),G==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",nt,vt,null)):this._emitEvent(G,nt,vt,Gt,null,null)}if(ie||(this.currentShape=Gt),Gt&&!Gt.get("destroyed")){var Ce=this.canvas,we=Ce.get("el");we.style.cursor=Gt.attr("cursor")||Ce.get("cursor")}},U.prototype._onmousedown=function(G,nt,vt){vt.button===Hr&&(this.mousedownShape=nt,this.mousedownPoint=G,this.mousedownTimeStamp=vt.timeStamp),this._emitEvent("mousedown",vt,G,nt,null,null)},U.prototype._emitMouseoverEvents=function(G,nt,vt,Gt){var Jt=this.canvas.get("el");vt!==Gt&&(vt&&(this._emitEvent("mouseout",G,nt,vt,vt,Gt),this._emitEvent("mouseleave",G,nt,vt,vt,Gt),(!Gt||Gt.get("destroyed"))&&(Jt.style.cursor=this.canvas.get("cursor"))),Gt&&(this._emitEvent("mouseover",G,nt,Gt,vt,Gt),this._emitEvent("mouseenter",G,nt,Gt,vt,Gt)))},U.prototype._emitDragoverEvents=function(G,nt,vt,Gt,Jt){Gt?(Gt!==vt&&(vt&&this._emitEvent("dragleave",G,nt,vt,vt,Gt),this._emitEvent("dragenter",G,nt,Gt,vt,Gt)),Jt||this._emitEvent("dragover",G,nt,Gt)):vt&&this._emitEvent("dragleave",G,nt,vt,vt,Gt),Jt&&this._emitEvent("dragover",G,nt,Gt)},U.prototype._afterDrag=function(G,nt,vt){G&&(G.set("capture",!0),this.draggingShape=null),this.dragging=!1;var Gt=this._getShape(nt,vt);Gt!==G&&this._emitMouseoverEvents(vt,nt,G,Gt),this.currentShape=Gt},U.prototype._onmouseup=function(G,nt,vt){if(vt.button===Hr){var Gt=this.draggingShape;this.dragging?(Gt&&this._emitEvent("drop",vt,G,nt),this._emitEvent("dragend",vt,G,Gt),this._afterDrag(Gt,G,vt)):(this._emitEvent("mouseup",vt,G,nt),nt===this.mousedownShape&&this._emitEvent("click",vt,G,nt),this.mousedownShape=null,this.mousedownPoint=null)}},U.prototype._ondragover=function(G,nt,vt){vt.preventDefault();var Gt=this.currentShape;this._emitDragoverEvents(vt,G,Gt,nt,!0)},U.prototype._onmousemove=function(G,nt,vt){var Gt=this.canvas,Jt=this.currentShape,ie=this.draggingShape;if(this.dragging)ie&&this._emitDragoverEvents(vt,G,Jt,nt,!1),this._emitEvent("drag",vt,G,ie);else{var ue=this.mousedownPoint;if(ue){var Ce=this.mousedownShape,we=vt.timeStamp,cn=we-this.mousedownTimeStamp,Cn=ue.clientX-G.clientX,_t=ue.clientY-G.clientY,Xt=Cn*Cn+_t*_t;cn>120||Xt>Gr?Ce&&Ce.get("draggable")?(ie=this.mousedownShape,ie.set("capture",!1),this.draggingShape=ie,this.dragging=!0,this._emitEvent("dragstart",vt,G,ie),this.mousedownShape=null,this.mousedownPoint=null):!Ce&&Gt.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",vt,G,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(vt,G,Jt,nt),this._emitEvent("mousemove",vt,G,nt)):(this._emitMouseoverEvents(vt,G,Jt,nt),this._emitEvent("mousemove",vt,G,nt))}else this._emitMouseoverEvents(vt,G,Jt,nt),this._emitEvent("mousemove",vt,G,nt)}},U.prototype._emitEvent=function(G,nt,vt,Gt,Jt,ie){var ue=this._getEventObj(G,nt,vt,Gt,Jt,ie);if(Gt){ue.shape=Gt,Oi(Gt,G,ue);for(var Ce=Gt.getParent();Ce;)Ce.emitDelegation(G,ue),ue.propagationStopped||Ri(Ce,G,ue),ue.propagationPath.push(Ce),Ce=Ce.getParent()}else{var we=this.canvas;Oi(we,G,ue)}},U.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},U}(),Gi=Si,ca="px",ha=Object(y.a)(),na=ha&&ha.name==="firefox",Zi=function(U){Object(i.b)(G,U);function G(nt){var vt=U.call(this,nt)||this;return vt.initContainer(),vt.initDom(),vt.initEvents(),vt.initTimeline(),vt}return G.prototype.getDefaultCfg=function(){var nt=U.prototype.getDefaultCfg.call(this);return nt.cursor="default",nt.supportCSSTransform=!1,nt},G.prototype.initContainer=function(){var nt=this.get("container");Object(n.h)(nt)&&(nt=document.getElementById(nt),this.set("container",nt))},G.prototype.initDom=function(){var nt=this.createDom();this.set("el",nt);var vt=this.get("container");vt.appendChild(nt),this.setDOMSize(this.get("width"),this.get("height"))},G.prototype.initEvents=function(){var nt=new Gi({canvas:this});nt.init(),this.set("eventController",nt)},G.prototype.initTimeline=function(){var nt=new Fr(this);this.set("timeline",nt)},G.prototype.setDOMSize=function(nt,vt){var Gt=this.get("el");n.c&&(Gt.style.width=nt+ca,Gt.style.height=vt+ca)},G.prototype.changeSize=function(nt,vt){this.setDOMSize(nt,vt),this.set("width",nt),this.set("height",vt),this.onCanvasChange("changeSize")},G.prototype.getRenderer=function(){return this.get("renderer")},G.prototype.getCursor=function(){return this.get("cursor")},G.prototype.setCursor=function(nt){this.set("cursor",nt);var vt=this.get("el");n.c&&vt&&(vt.style.cursor=nt)},G.prototype.getPointByEvent=function(nt){var vt=this.get("supportCSSTransform");if(vt){if(na&&!Object(n.e)(nt.layerX)&&nt.layerX!==nt.offsetX)return{x:nt.layerX,y:nt.layerY};if(!Object(n.e)(nt.offsetX))return{x:nt.offsetX,y:nt.offsetY}}var Gt=this.getClientByEvent(nt),Jt=Gt.x,ie=Gt.y;return this.getPointByClient(Jt,ie)},G.prototype.getClientByEvent=function(nt){var vt=nt;return nt.touches&&(nt.type==="touchend"?vt=nt.changedTouches[0]:vt=nt.touches[0]),{x:vt.clientX,y:vt.clientY}},G.prototype.getPointByClient=function(nt,vt){var Gt=this.get("el"),Jt=Gt.getBoundingClientRect();return{x:nt-Jt.left,y:vt-Jt.top}},G.prototype.getClientByPoint=function(nt,vt){var Gt=this.get("el"),Jt=Gt.getBoundingClientRect();return{x:nt+Jt.left,y:vt+Jt.top}},G.prototype.draw=function(){},G.prototype.removeDom=function(){var nt=this.get("el");nt.parentNode.removeChild(nt)},G.prototype.clearEvents=function(){var nt=this.get("eventController");nt.destroy()},G.prototype.isCanvas=function(){return!0},G.prototype.getParent=function(){return null},G.prototype.destroy=function(){var nt=this.get("timeline");this.get("destroyed")||(this.clear(),nt&&nt.stop(),this.clearEvents(),this.removeDom(),U.prototype.destroy.call(this))},G}(t.a),ve=Pt.a=Zi},Em2t:function(qe,Pt,w){var H=w("bahg"),i=w("quyA"),y=w("0JQy");function t(n){return i(n)?y(n):H(n)}qe.exports=t},EpBk:function(qe,Pt){function w(H){var i=typeof H;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?H!=="__proto__":H===null}qe.exports=w},"F/eT":function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return H});function H(i){return typeof i=="number"&&!isNaN(i)}},FAXy:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return j});var H=w("mrSG"),i=w("zJSt"),y=w("iTfj"),t=w("w02o"),n=w("YuPD"),u=w("tKoa"),p="liquid";function b(P){return[{percent:P,type:p}]}function c(P){var W=P.chart,X=P.options,$=X.percent,ft=X.color,Z=X.liquidStyle,lt=X.radius,pt=X.outline,gt=X.wave;W.scale({percent:{min:0,max:1}}),W.data(b($));var ut=Object(n.b)({},P,{options:{xField:"type",yField:"percent",widthRatio:lt,interval:{color:ft,style:Z,shape:"liquid-fill-gauge"}}}),Bt=Object(u.c)(ut).ext,Lt=Bt.geometry;return Lt.customInfo({radius:lt,outline:pt,wave:gt}),W.legend(!1),W.axis(!1),W.tooltip(!1),P}function S(P,W){var X=P.chart,$=P.options,ft=$.statistic,Z=$.percent,lt=$.meta;if(X.getController("annotation").clear(!0),ft.content&&!ft.content.formatter){var pt=Object(y.get)(lt,["percent","formatter"]);ft.content.formatter=function(gt){var ut=gt.percent;return pt?pt(ut):(ut*100).toFixed(2)+"%"}}return Object(n.m)(X,{statistic:ft,plotType:"liquid"},{percent:Z}),W&&X.render(!0),P}function I(P){return Object(n.e)(c,S,Object(t.f)({}),t.a,t.j,t.c)(P)}var m=w("Ihc8"),r=w("qaDU"),s=5e3;function d(P,W,X){return P+(W-P)*X}function C(P){var W=Object(H.a)({opacity:1},P.style);return P.color&&!W.fill&&(W.fill=P.color),W}function E(P){var W={fill:"#fff",fillOpacity:0,lineWidth:4},X=Object(y.mix)({},W,P.style);return P.color&&!X.stroke&&(X.stroke=P.color),Object(y.isNumber)(P.opacity)&&(X.opacity=X.strokeOpacity=P.opacity),X}function A(P,W,X,$){return W===0?[[P+1/2*X/Math.PI/2,$/2],[P+1/2*X/Math.PI,$],[P+X/4,$]]:W===1?[[P+1/2*X/Math.PI/2*(Math.PI-2),$],[P+1/2*X/Math.PI/2*(Math.PI-1),$/2],[P+X/4,0]]:W===2?[[P+1/2*X/Math.PI/2,-$/2],[P+1/2*X/Math.PI,-$],[P+X/4,-$]]:[[P+1/2*X/Math.PI/2*(Math.PI-2),-$],[P+1/2*X/Math.PI/2*(Math.PI-1),-$/2],[P+X/4,0]]}function f(P,W,X,$,ft,Z,lt){for(var pt=Math.ceil(2*P/X*4)*4,gt=[],ut=$;ut<-Math.PI*2;)ut+=Math.PI*2;for(;ut>0;)ut-=Math.PI*2;ut=ut/Math.PI/2*X;var Bt=Z-P+ut-P*2;gt.push(["M",Bt,W]);for(var Lt=0,St=0;St<pt;++St){var K=St%4,dt=A(St*X/4,K,X,ft);gt.push(["C",dt[0][0]+Bt,-dt[0][1]+W,dt[1][0]+Bt,-dt[1][1]+W,dt[2][0]+Bt,-dt[2][1]+W]),St===pt-1&&(Lt=dt[2][0])}return gt.push(["L",Lt+Bt,lt+P]),gt.push(["L",Bt,lt+P]),gt.push(["Z"]),gt}function x(P,W,X,$,ft,Z,lt,pt,gt){for(var ut=ft.fill,Bt=ft.opacity,Lt=lt.getBBox(),St=Lt.maxX-Lt.minX,K=Lt.maxY-Lt.minY,dt=0;dt<$;dt++){var mt=$<=1?0:dt/($-1),bt=Z.addShape("path",{name:"waterwave-path",attrs:{path:f(pt,Lt.minY+K*X,gt,0,St/32,P,W),fill:ut,opacity:d(.2,.9,mt)*Bt}});try{var wt=Object(r.a)([["t",gt,0]]);bt.stopAnimate(),bt.animate({matrix:wt},{duration:d(.5*s,s,mt),repeat:!0})}catch(J){console.warn("off-screen group animate error!")}}}Object(m.registerShape)("interval","liquid-fill-gauge",{draw:function(W,X){var $=.5,ft=.5,Z=W.customInfo,lt=Z.radius,pt=Z.outline,gt=Z.wave,ut=pt.border,Bt=pt.distance,Lt=gt.count,St=gt.length,K=Object(y.reduce)(W.points,function(R,Q){return Math.min(R,Q.x)},Infinity),dt=this.parsePoint({x:$,y:ft}),mt=this.parsePoint({x:K,y:ft}),bt=dt.x-mt.x,wt=Math.min(bt,mt.y*lt),J=C(W),ct=E(W);X.addShape("circle",{name:"wrap",attrs:Object(y.mix)(ct,{x:dt.x,y:dt.y,r:wt,fill:"transparent",lineWidth:ut})});var it=X.addGroup({name:"waves"}),_=it.setClip({type:"circle",attrs:{x:dt.x,y:dt.y,r:wt-Bt-ut/2}});return x(dt.x,dt.y,1-W.points[1].y,Lt,J,it,_,wt*2,St),X}});var j=function(P){Object(H.b)(W,P);function W(){var X=P!==null&&P.apply(this,arguments)||this;return X.type="liquid",X}return W.prototype.getDefaultOptions=function(){return{color:"#6a99f9",radius:.9,statistic:{title:!1,content:{formatter:function($){var ft=$.percent;return(ft*100).toFixed(2)+"%"},style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192}}},W.prototype.changeData=function(X){this.updateOption({percent:X}),this.chart.data(b(X)),S({chart:this.chart,options:this.options},!0)},W.prototype.getSchemaAdaptor=function(){return I},W}(i.a)},FH2j:function(qe,Pt,w){"use strict";w.d(Pt,"getAdjust",function(){return n}),w.d(Pt,"registerAdjust",function(){return u});var H=w("Qci9"),i=w("WbAE"),y=w.n(i),t={},n=function(b){return t[b.toLowerCase()]},u=function(b,c){if(n(b))throw new Error("Adjust type '"+b+"' existed.");t[b.toLowerCase()]=c}},FLLP:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return W});var H=w("mrSG"),i=w("zJSt"),y=w("iTfj"),t=w("w02o"),n=w("tKoa"),u=w("YuPD"),p="$$yField$$",b="$$diffField$$",c="$$absoluteField$$",S="$$isTotal$$";function I(X,$,ft,Z,lt){var pt,gt=[];if(Object(y.reduce)(X,function(Bt,Lt){var St;Object(u.j)(u.a.WARN,Object(y.isNumber)(Lt[ft]),Lt[ft]+" is not a valid number");var K=Object(y.isUndefined)(Lt[ft])?null:Lt[ft];return gt.push(Object(H.a)(Object(H.a)({},Lt),(St={},St[Z]=[Bt,Bt+K],St))),Bt+K},0),gt.length&&lt){var ut=Object(y.get)(gt,[[X.length-1],Z,[1]]);gt.push((pt={},pt[$]=lt.label,pt[ft]=ut,pt[Z]=[0,ut],pt))}return gt}function m(X,$,ft,Z){var lt=I(X,$,ft,p,Z);return lt.map(function(pt,gt){var ut;return Object(y.isObject)(pt)?Object(H.a)(Object(H.a)({},pt),(ut={},ut[c]=pt[p][1],ut[b]=pt[p][1]-pt[p][0],ut[S]=gt===X.length,ut)):pt})}var r=w("Ihc8");function s(X){for(var $=[],ft=0;ft<X.length;ft++){var Z=X[ft];if(Z){var lt=ft===0?"M":"L";$.push([lt,Z.x,Z.y])}}var pt=X[0];return $.push(["L",pt.x,pt.y]),$.push(["z"]),$}function d(X){return Object(u.b)({},X.defaultStyle,X.style,{fill:X.color})}Object(r.registerShape)("interval","waterfall",{draw:function($,ft){var Z=$.customInfo,lt=$.points,pt=$.nextPoints,gt=ft.addGroup(),ut=this.parsePath(s(lt)),Bt=d($);gt.addShape("path",{attrs:Object(H.a)(Object(H.a)({},Bt),{path:ut})});var Lt=Object(y.get)(Z,"leaderLine");if(Lt&&pt){var St=[["M",lt[2].x,lt[2].y],["L",pt[0].x,pt[0].y]];lt[2].y===pt[1].y&&(St[1]=["L",pt[1].x,pt[1].y]),St=this.parsePath(St),gt.addShape("path",{attrs:Object(H.a)({path:St},Lt.style||{})})}return gt}});function C(X){var $=X.chart,ft=X.options,Z=ft.data,lt=ft.xField,pt=ft.yField,gt=ft.total,ut=ft.leaderLine,Bt=ft.columnWidthRatio,Lt=ft.waterfallStyle,St=ft.risingFill,K=ft.fallingFill,dt=ft.color;$.data(m(Z,lt,pt,gt));var mt=dt||function(ct){return Object(y.get)(ct,[S])?Object(y.get)(gt,["style","fill"],""):Object(y.get)(ct,[p,1])-Object(y.get)(ct,[p,0])>0?St:K},bt=Object(u.b)({},X,{options:{xField:lt,yField:p,seriesField:lt,rawFields:[pt,b,S,p],widthRatio:Bt,interval:{style:Lt,shape:"waterfall",color:mt}}}),wt=Object(n.c)(bt).ext,J=wt.geometry;return J.customInfo({leaderLine:ut}),X}function E(X){var $,ft,Z=X.options,lt=Z.xAxis,pt=Z.yAxis,gt=Z.xField,ut=Z.yField,Bt=Z.meta,Lt=Object(u.b)({},{alias:ut},Object(y.get)(Bt,ut));return Object(u.e)(Object(t.f)(($={},$[gt]=lt,$[ut]=pt,$[p]=pt,$),Object(u.b)({},Bt,(ft={},ft[p]=Lt,ft[b]=Lt,ft[c]=Lt,ft))))(X)}function A(X){var $=X.chart,ft=X.options,Z=ft.xAxis,lt=ft.yAxis,pt=ft.xField,gt=ft.yField;return Z===!1?$.axis(pt,!1):$.axis(pt,Z),lt===!1?($.axis(gt,!1),$.axis(p,!1)):($.axis(gt,lt),$.axis(p,lt)),X}function f(X){var $=X.chart,ft=X.options,Z=ft.legend,lt=ft.total,pt=ft.risingFill,gt=ft.fallingFill;if(Z===!1)$.legend(!1);else{var ut=[{name:"\u589E\u52A0",value:"increase",marker:{symbol:"square",style:{r:5,fill:pt}}},{name:"\u51CF\u5C11",value:"decrease",marker:{symbol:"square",style:{r:5,fill:gt}}}];lt&&ut.push({name:lt.label||"",value:"total",marker:{symbol:"square",style:Object(u.b)({},{r:5},Object(y.get)(lt,"style"))}}),$.legend(Object(u.b)({},{custom:!0,position:"top",items:ut},Z)),$.removeInteraction("legend-filter")}return X}function x(X){var $=X.chart,ft=X.options,Z=ft.label,lt=ft.labelMode,pt=ft.xField,gt=Object(u.c)($,"interval");if(!Z)gt.label(!1);else{var ut=Z.callback,Bt=Object(H.c)(Z,["callback"]);gt.label({fields:lt==="absolute"?[c,pt]:[b,pt],callback:ut,cfg:Object(u.o)(Bt)})}return X}function j(X){var $=X.chart,ft=X.options,Z=ft.tooltip,lt=ft.xField,pt=ft.yField;if(Z!==!1){$.tooltip(Object(H.a)({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[pt]},Z));var gt=$.geometries[0];(Z==null?void 0:Z.formatter)?gt.tooltip(lt+"*"+pt,Z.formatter):gt.tooltip(pt)}else $.tooltip(!1);return X}function P(X){return Object(u.e)(C,E,A,f,j,x,t.i,t.j,t.c,t.a,Object(t.b)())(X)}var W=function(X){Object(H.b)($,X);function $(){var ft=X!==null&&X.apply(this,arguments)||this;return ft.type="waterfall",ft}return $.prototype.changeData=function(ft){var Z=this.options,lt=Z.xField,pt=Z.yField,gt=Z.total;this.updateOption({data:ft}),this.chart.changeData(m(ft,lt,pt,gt))},$.prototype.getSchemaAdaptor=function(){return P},$.prototype.getDefaultOptions=function(){return{label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{label:"\u603B\u8BA1",style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}}},$}(i.a)},FPPI:function(qe,Pt,w){"use strict";Pt.a=function(H,i,y,t,n){for(var u=H.children,p,b=-1,c=u.length,S=H.value&&(t-i)/H.value;++b<c;)p=u[b],p.y0=y,p.y1=n,p.x0=i,p.x1=i+=p.value*S}},FxDU:function(qe,Pt,w){"use strict";Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.createSensor=void 0;var H=w("QO+J"),i=w("j5sG"),y=typeof ResizeObserver!="undefined"?i.createSensor:H.createSensor;Pt.createSensor=y},H8j4:function(qe,Pt,w){var H=w("QkVE");function i(y,t){var n=H(this,y),u=n.size;return n.set(y,t),this.size+=n.size==u?0:1,this}qe.exports=i},HDyB:function(qe,Pt,w){var H=w("nmnc"),i=w("JHRd"),y=w("ljhN"),t=w("or5M"),n=w("7fqy"),u=w("rEGp"),p=1,b=2,c="[object Boolean]",S="[object Date]",I="[object Error]",m="[object Map]",r="[object Number]",s="[object RegExp]",d="[object Set]",C="[object String]",E="[object Symbol]",A="[object ArrayBuffer]",f="[object DataView]",x=H?H.prototype:void 0,j=x?x.valueOf:void 0;function P(W,X,$,ft,Z,lt,pt){switch($){case f:if(W.byteLength!=X.byteLength||W.byteOffset!=X.byteOffset)return!1;W=W.buffer,X=X.buffer;case A:return!(W.byteLength!=X.byteLength||!lt(new i(W),new i(X)));case c:case S:case r:return y(+W,+X);case I:return W.name==X.name&&W.message==X.message;case s:case C:return W==X+"";case m:var gt=n;case d:var ut=ft&p;if(gt||(gt=u),W.size!=X.size&&!ut)return!1;var Bt=pt.get(W);if(Bt)return Bt==X;ft|=b,pt.set(W,X);var Lt=t(gt(W),gt(X),ft,Z,lt,pt);return pt.delete(W),Lt;case E:if(j)return j.call(W)==j.call(X)}return!1}qe.exports=P},HOxn:function(qe,Pt,w){var H=w("Cwc5"),i=w("Kz5y"),y=H(i,"Promise");qe.exports=y},Hvzi:function(qe,Pt){function w(H){var i=this.has(H)&&delete this.__data__[H];return this.size-=i?1:0,i}qe.exports=w},I4jL:function(qe,Pt,w){"use strict";w.d(Pt,"b",function(){return y}),w.d(Pt,"c",function(){return t});var H=w("FPPI"),i=w("7IPS"),y=(1+Math.sqrt(5))/2;function t(n,u,p,b,c,S){for(var I=[],m=u.children,r,s,d=0,C=0,E=m.length,A,f,x=u.value,j,P,W,X,$,ft,Z;d<E;){A=c-p,f=S-b;do j=m[C++].value;while(!j&&C<E);for(P=W=j,ft=Math.max(f/A,A/f)/(x*n),Z=j*j*ft,$=Math.max(W/Z,Z/P);C<E;++C){if(j+=s=m[C].value,s<P&&(P=s),s>W&&(W=s),Z=j*j*ft,X=Math.max(W/Z,Z/P),X>$){j-=s;break}$=X}I.push(r={value:j,dice:A<f,children:m.slice(d,C)}),r.dice?Object(H.a)(r,p,b,c,x?b+=f*j/x:S):Object(i.a)(r,p,b,x?p+=A*j/x:c,S),x-=j,d=C}return I}Pt.a=function n(u){function p(b,c,S,I,m){t(u,b,c,S,I,m)}return p.ratio=function(b){return n((b=+b)>1?b:1)},p}(y)},I7nc:function(qe,Pt,w){"use strict";w.d(Pt,"b",function(){return y}),w.d(Pt,"a",function(){return t});var H=w("iTfj"),i="Invalid field: it must be a string!";function y(n,u){var p=n.field,b=n.fields;if(Object(H.isString)(p))return p;if(Object(H.isArray)(p))return console.warn(i),p[0];if(console.warn(i+" will try to get fields instead."),Object(H.isString)(b))return b;if(Object(H.isArray)(b)&&b.length)return b[0];if(u)return u;throw new TypeError(i)}function t(n){var u=[];return n&&n.each?n.each(function(p){u.push(p)}):n&&n.eachNode&&n.eachNode(function(p){u.push(p)}),u}},IeU1:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return H}),w.d(Pt,"b",function(){return i});function H(y){return y==null?null:i(y)}function i(y){if(typeof y!="function")throw new Error;return y}},Ihc8:function(qe,Pt,w){"use strict";w.r(Pt),w.d(Pt,"VERSION",function(){return Rr}),w.d(Pt,"Chart",function(){return Va}),w.d(Pt,"View",function(){return Eo}),w.d(Pt,"Event",function(){return $i}),w.d(Pt,"ComponentController",function(){return ja}),w.d(Pt,"TooltipController",function(){return wa}),w.d(Pt,"Geometry",function(){return Da}),w.d(Pt,"Element",function(){return Lo}),w.d(Pt,"GeometryLabel",function(){return Ge}),w.d(Pt,"Interaction",function(){return Cr}),w.d(Pt,"Action",function(){return vt}),w.d(Pt,"Facet",function(){return Zi}),w.d(Pt,"InteractionAction",function(){return vt}),w.d(Pt,"registerComponentController",function(){return er}),w.d(Pt,"registerGeometry",function(){return Ea}),w.d(Pt,"registerShape",function(){return ia}),w.d(Pt,"registerShapeFactory",function(){return mo}),w.d(Pt,"getShapeFactory",function(){return Bo}),w.d(Pt,"registerGeometryLabel",function(){return Rn}),w.d(Pt,"registerGeometryLabelLayout",function(){return wo}),w.d(Pt,"getGeometryLabel",function(){return uo}),w.d(Pt,"getGeometryLabelLayout",function(){return qo}),w.d(Pt,"getInteraction",function(){return Oa}),w.d(Pt,"registerInteraction",function(){return Aa}),w.d(Pt,"registerAction",function(){return we}),w.d(Pt,"getActionClass",function(){return Ce}),w.d(Pt,"getFacet",function(){return U}),w.d(Pt,"registerFacet",function(){return G}),w.d(Pt,"getTheme",function(){return sr}),w.d(Pt,"registerTheme",function(){return vr}),w.d(Pt,"registerEngine",function(){return A}),w.d(Pt,"getEngine",function(){return E}),w.d(Pt,"registerAnimation",function(){return va}),w.d(Pt,"getAnimation",function(){return Xo}),w.d(Pt,"LAYER",function(){return y}),w.d(Pt,"DIRECTION",function(){return t}),w.d(Pt,"Types",function(){return Ue}),w.d(Pt,"Coordinate",function(){return Pr}),w.d(Pt,"Scale",function(){return Se.c}),w.d(Pt,"Util",function(){return yi});var H=w("mrSG"),i=w("iTfj"),y;(function(h){h.FORE="fore",h.MID="mid",h.BG="bg"})(y||(y={}));var t;(function(h){h.TOP="top",h.TOP_LEFT="top-left",h.TOP_RIGHT="top-right",h.RIGHT="right",h.RIGHT_TOP="right-top",h.RIGHT_BOTTOM="right-bottom",h.LEFT="left",h.LEFT_TOP="left-top",h.LEFT_BOTTOM="left-bottom",h.BOTTOM="bottom",h.BOTTOM_LEFT="bottom-left",h.BOTTOM_RIGHT="bottom-right",h.RADIUS="radius",h.CIRCLE="circle",h.NONE="none"})(t||(t={}));var n;(function(h){h.AXIS="axis",h.GRID="grid",h.LEGEND="legend",h.TOOLTIP="tooltip",h.ANNOTATION="annotation",h.SLIDER="slider",h.SCROLLBAR="scrollbar",h.OTHER="other"})(n||(n={}));var u={FORE:3,MID:2,BG:1},p;(function(h){h.BEFORE_RENDER="beforerender",h.AFTER_RENDER="afterrender",h.BEFORE_PAINT="beforepaint",h.AFTER_PAINT="afterpaint",h.BEFORE_CHANGE_DATA="beforechangedata",h.AFTER_CHANGE_DATA="afterchangedata",h.BEFORE_CLEAR="beforeclear",h.AFTER_CLEAR="afterclear",h.BEFORE_DESTROY="beforedestroy",h.BEFORE_CHANGE_SIZE="beforechangesize",h.AFTER_CHANGE_SIZE="afterchangesize"})(p||(p={}));var b;(function(h){h.BEFORE_DRAW_ANIMATE="beforeanimate",h.AFTER_DRAW_ANIMATE="afteranimate"})(b||(b={}));var c;(function(h){h.MOUSE_ENTER="plot:mouseenter",h.MOUSE_DOWN="plot:mousedown",h.MOUSE_MOVE="plot:mousemove",h.MOUSE_UP="plot:mouseup",h.MOUSE_LEAVE="plot:mouseleave",h.TOUCH_START="plot:touchstart",h.TOUCH_MOVE="plot:touchmove",h.TOUCH_END="plot:touchend",h.TOUCH_CANCEL="plot:touchcancel",h.CLICK="plot:click",h.DBLCLICK="plot:dblclick",h.CONTEXTMENU="plot:contextmenu",h.LEAVE="plot:leave",h.ENTER="plot:enter"})(c||(c={}));var S;(function(h){h.ACTIVE="active",h.INACTIVE="inactive",h.SELECTED="selected",h.DEFAULT="default"})(S||(S={}));var I=["color","shape","size"],m="_origin",r=1,s=1,d=.25,C={};function E(h){var o=C[h];if(!o)throw new Error("G engine '"+h+"' is not exist, please register it at first.");return o}function A(h,o){C[h]=o}var f=w("fIp6");function x(h){var o=getComputedStyle(h);return{width:(h.clientWidth||parseInt(o.width,10))-parseInt(o.paddingLeft,10)-parseInt(o.paddingRight,10),height:(h.clientHeight||parseInt(o.height,10))-parseInt(o.paddingTop,10)-parseInt(o.paddingBottom,10)}}function j(h){return typeof h=="number"&&!isNaN(h)}function P(h,o,e,a){var M=e,N=a;if(o){var at=x(h);M=at.width?at.width:M,N=at.height?at.height:N}return{width:Math.max(j(M)?M:r,r),height:Math.max(j(N)?N:s,s)}}function W(h){var o=h.parentNode;o&&o.removeChild(h)}var X=w("f6Jy"),$=function(h){Object(H.b)(o,h);function o(e){var a=h.call(this)||this;a.destroyed=!1;var M=e.visible,N=M===void 0?!0:M;return a.visible=N,a}return o.prototype.show=function(){var e=this.visible;e||this.changeVisible(!0)},o.prototype.hide=function(){var e=this.visible;e&&this.changeVisible(!1)},o.prototype.destroy=function(){this.off(),this.destroyed=!0},o.prototype.changeVisible=function(e){this.visible!==e&&(this.visible=e)},o}(X.a),ft=$,Z=w("aFU3"),lt=w("7s0d"),pt=function(o,e){return Object(i.isString)(e)?e:o.invert(o.scale(e))},gt=function(){function h(o){this.names=[],this.scales=[],this.linear=!1,this.values=[],this.callback=function(){return[]},this._parseCfg(o)}return h.prototype.mapping=function(){for(var o=this,e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];var M=e.map(function(N,at){return o._toOriginParam(N,o.scales[at])});return this.callback.apply(this,M)},h.prototype.getLinearValue=function(o){var e=this.values.length-1,a=Math.floor(e*o),M=e*o-a,N=this.values[a],at=a===e?N:this.values[a+1];return N+(at-N)*M},h.prototype.getNames=function(){for(var o=this.scales,e=this.names,a=Math.min(o.length,e.length),M=[],N=0;N<a;N+=1)M.push(e[N]);return M},h.prototype.getFields=function(){return this.scales.map(function(o){return o.field})},h.prototype.getScale=function(o){return this.scales[this.names.indexOf(o)]},h.prototype.defaultCallback=function(){for(var o=this,e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];return e.length===0?this.values:e.map(function(M,N){var at=o.scales[N];return at.type==="identity"?at.values[0]:o._getAttributeValue(at,M)})},h.prototype._parseCfg=function(o){var e=this,a=o.type,M=a===void 0?"base":a,N=o.names,at=N===void 0?[]:N,Ct=o.scales,Ft=Ct===void 0?[]:Ct,ne=o.values,ge=ne===void 0?[]:ne,be=o.callback;this.type=M,this.scales=Ft,this.values=ge,this.names=at,this.callback=function(){for(var Ae=[],Xe=0;Xe<arguments.length;Xe++)Ae[Xe]=arguments[Xe];if(be){var fn=be.apply(void 0,Ae);if(!Object(i.isNil)(fn))return[fn]}return e.defaultCallback.apply(e,Ae)}},h.prototype._getAttributeValue=function(o,e){if(o.isCategory&&!this.linear){var a=o.translate(e);return this.values[a%this.values.length]}var M=o.scale(e);return this.getLinearValue(M)},h.prototype._toOriginParam=function(o,e){return e.isLinear?o:Object(i.isArray)(o)?o.map(function(a){return pt(e,a)}):pt(e,o)},h}(),ut=gt;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Bt=function(o,e){return Bt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,M){a.__proto__=M}||function(a,M){for(var N in M)M.hasOwnProperty(N)&&(a[N]=M[N])},Bt(o,e)};function Lt(h,o){Bt(h,o);function e(){this.constructor=h}h.prototype=o===null?Object.create(o):(e.prototype=o.prototype,new e)}var St=function(){return St=Object.assign||function(e){for(var a,M=1,N=arguments.length;M<N;M++){a=arguments[M];for(var at in a)Object.prototype.hasOwnProperty.call(a,at)&&(e[at]=a[at])}return e},St.apply(this,arguments)};function K(h,o){var e={};for(var a in h)Object.prototype.hasOwnProperty.call(h,a)&&o.indexOf(a)<0&&(e[a]=h[a]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var M=0,a=Object.getOwnPropertySymbols(h);M<a.length;M++)o.indexOf(a[M])<0&&Object.prototype.propertyIsEnumerable.call(h,a[M])&&(e[a[M]]=h[a[M]]);return e}function dt(h,o,e,a){var M=arguments.length,N=M<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,e):a,at;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(h,o,e,a);else for(var Ct=h.length-1;Ct>=0;Ct--)(at=h[Ct])&&(N=(M<3?at(N):M>3?at(o,e,N):at(o,e))||N);return M>3&&N&&Object.defineProperty(o,e,N),N}function mt(h,o){return function(e,a){o(e,a,h)}}function bt(h,o){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(h,o)}function wt(h,o,e,a){function M(N){return N instanceof e?N:new e(function(at){at(N)})}return new(e||(e=Promise))(function(N,at){function Ct(ge){try{ne(a.next(ge))}catch(be){at(be)}}function Ft(ge){try{ne(a.throw(ge))}catch(be){at(be)}}function ne(ge){ge.done?N(ge.value):M(ge.value).then(Ct,Ft)}ne((a=a.apply(h,o||[])).next())})}function J(h,o){var e={label:0,sent:function(){if(N[0]&1)throw N[1];return N[1]},trys:[],ops:[]},a,M,N,at;return at={next:Ct(0),throw:Ct(1),return:Ct(2)},typeof Symbol=="function"&&(at[Symbol.iterator]=function(){return this}),at;function Ct(ne){return function(ge){return Ft([ne,ge])}}function Ft(ne){if(a)throw new TypeError("Generator is already executing.");for(;e;)try{if(a=1,M&&(N=ne[0]&2?M.return:ne[0]?M.throw||((N=M.return)&&N.call(M),0):M.next)&&!(N=N.call(M,ne[1])).done)return N;switch(M=0,N&&(ne=[ne[0]&2,N.value]),ne[0]){case 0:case 1:N=ne;break;case 4:return e.label++,{value:ne[1],done:!1};case 5:e.label++,M=ne[1],ne=[0];continue;case 7:ne=e.ops.pop(),e.trys.pop();continue;default:if(N=e.trys,!(N=N.length>0&&N[N.length-1])&&(ne[0]===6||ne[0]===2)){e=0;continue}if(ne[0]===3&&(!N||ne[1]>N[0]&&ne[1]<N[3])){e.label=ne[1];break}if(ne[0]===6&&e.label<N[1]){e.label=N[1],N=ne;break}if(N&&e.label<N[2]){e.label=N[2],e.ops.push(ne);break}N[2]&&e.ops.pop(),e.trys.pop();continue}ne=o.call(h,e)}catch(ge){ne=[6,ge],M=0}finally{a=N=0}if(ne[0]&5)throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}}function ct(h,o,e,a){a===void 0&&(a=e),h[a]=o[e]}function it(h,o){for(var e in h)e!=="default"&&!o.hasOwnProperty(e)&&(o[e]=h[e])}function _(h){var o=typeof Symbol=="function"&&Symbol.iterator,e=o&&h[o],a=0;if(e)return e.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&a>=h.length&&(h=void 0),{value:h&&h[a++],done:!h}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}function R(h,o){var e=typeof Symbol=="function"&&h[Symbol.iterator];if(!e)return h;var a=e.call(h),M,N=[],at;try{for(;(o===void 0||o-- >0)&&!(M=a.next()).done;)N.push(M.value)}catch(Ct){at={error:Ct}}finally{try{M&&!M.done&&(e=a.return)&&e.call(a)}finally{if(at)throw at.error}}return N}function Q(){for(var h=[],o=0;o<arguments.length;o++)h=h.concat(R(arguments[o]));return h}function k(){for(var h=0,o=0,e=arguments.length;o<e;o++)h+=arguments[o].length;for(var a=Array(h),M=0,o=0;o<e;o++)for(var N=arguments[o],at=0,Ct=N.length;at<Ct;at++,M++)a[M]=N[at];return a}function g(h){return this instanceof g?(this.v=h,this):new g(h)}function O(h,o,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=e.apply(h,o||[]),M,N=[];return M={},at("next"),at("throw"),at("return"),M[Symbol.asyncIterator]=function(){return this},M;function at(Ae){a[Ae]&&(M[Ae]=function(Xe){return new Promise(function(fn,En){N.push([Ae,Xe,fn,En])>1||Ct(Ae,Xe)})})}function Ct(Ae,Xe){try{Ft(a[Ae](Xe))}catch(fn){be(N[0][3],fn)}}function Ft(Ae){Ae.value instanceof g?Promise.resolve(Ae.value.v).then(ne,ge):be(N[0][2],Ae)}function ne(Ae){Ct("next",Ae)}function ge(Ae){Ct("throw",Ae)}function be(Ae,Xe){Ae(Xe),N.shift(),N.length&&Ct(N[0][0],N[0][1])}}function F(h){var o,e;return o={},a("next"),a("throw",function(M){throw M}),a("return"),o[Symbol.iterator]=function(){return this},o;function a(M,N){o[M]=h[M]?function(at){return(e=!e)?{value:g(h[M](at)),done:M==="return"}:N?N(at):at}:N}}function V(h){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=h[Symbol.asyncIterator],e;return o?o.call(h):(h=typeof _=="function"?_(h):h[Symbol.iterator](),e={},a("next"),a("throw"),a("return"),e[Symbol.asyncIterator]=function(){return this},e);function a(N){e[N]=h[N]&&function(at){return new Promise(function(Ct,Ft){at=h[N](at),M(Ct,Ft,at.done,at.value)})}}function M(N,at,Ct,Ft){Promise.resolve(Ft).then(function(ne){N({value:ne,done:Ct})},at)}}function rt(h,o){return Object.defineProperty?Object.defineProperty(h,"raw",{value:o}):h.raw=o,h}function ot(h){if(h&&h.__esModule)return h;var o={};if(h!=null)for(var e in h)Object.hasOwnProperty.call(h,e)&&(o[e]=h[e]);return o.default=h,o}function st(h){return h&&h.__esModule?h:{default:h}}function Mt(h,o){if(!o.has(h))throw new TypeError("attempted to get private field on non-instance");return o.get(h)}function yt(h,o,e){if(!o.has(h))throw new TypeError("attempted to set private field on non-instance");return o.set(h,e),e}var xt=w("6UX8"),Ot=function(h){Lt(o,h);function o(e){var a=h.call(this,e)||this;return a.type="color",a.names=["color"],Object(i.isString)(a.values)&&(a.linear=!0),a.gradient=xt.a.gradient(a.values),a}return o.prototype.getLinearValue=function(e){return this.gradient(e)},o}(ut),jt=Ot,Dt=function(h){Lt(o,h);function o(e){var a=h.call(this,e)||this;return a.type="opacity",a.names=["opacity"],a}return o}(ut),zt=Dt,Tt=function(h){Lt(o,h);function o(e){var a=h.call(this,e)||this;return a.names=["x","y"],a.type="position",a}return o.prototype.mapping=function(e,a){var M=this.scales,N=M[0],at=M[1];return Object(i.isNil)(e)||Object(i.isNil)(a)?[]:[Object(i.isArray)(e)?e.map(function(Ct){return N.scale(Ct)}):N.scale(e),Object(i.isArray)(a)?a.map(function(Ct){return at.scale(Ct)}):at.scale(a)]},o}(ut),Wt=Tt,Ht=function(h){Lt(o,h);function o(e){var a=h.call(this,e)||this;return a.type="shape",a.names=["shape"],a}return o.prototype.getLinearValue=function(e){var a=Math.round((this.values.length-1)*e);return this.values[a]},o}(ut),re=Ht,pe=function(h){Lt(o,h);function o(e){var a=h.call(this,e)||this;return a.type="size",a.names=["size"],a}return o}(ut),me=pe,Se=w("8vsG"),Le={},Je=function(o){return Le[o.toLowerCase()]},On=function(o,e){if(Je(o))throw new Error("Attribute type '"+o+"' existed.");Le[o.toLowerCase()]=e};On("Color",jt),On("Opacity",zt),On("Position",Wt),On("Shape",re),On("Size",me);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gn=function(o,e){return gn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,M){a.__proto__=M}||function(a,M){for(var N in M)M.hasOwnProperty(N)&&(a[N]=M[N])},gn(o,e)};function Wn(h,o){gn(h,o);function e(){this.constructor=h}h.prototype=o===null?Object.create(o):(e.prototype=o.prototype,new e)}var kn=function(){return kn=Object.assign||function(e){for(var a,M=1,N=arguments.length;M<N;M++){a=arguments[M];for(var at in a)Object.prototype.hasOwnProperty.call(a,at)&&(e[at]=a[at])}return e},kn.apply(this,arguments)};function Vn(h,o){var e={};for(var a in h)Object.prototype.hasOwnProperty.call(h,a)&&o.indexOf(a)<0&&(e[a]=h[a]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var M=0,a=Object.getOwnPropertySymbols(h);M<a.length;M++)o.indexOf(a[M])<0&&Object.prototype.propertyIsEnumerable.call(h,a[M])&&(e[a[M]]=h[a[M]]);return e}function Dn(h,o,e,a){var M=arguments.length,N=M<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,e):a,at;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(h,o,e,a);else for(var Ct=h.length-1;Ct>=0;Ct--)(at=h[Ct])&&(N=(M<3?at(N):M>3?at(o,e,N):at(o,e))||N);return M>3&&N&&Object.defineProperty(o,e,N),N}function Nn(h,o){return function(e,a){o(e,a,h)}}function Qn(h,o){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(h,o)}function ir(h,o,e,a){function M(N){return N instanceof e?N:new e(function(at){at(N)})}return new(e||(e=Promise))(function(N,at){function Ct(ge){try{ne(a.next(ge))}catch(be){at(be)}}function Ft(ge){try{ne(a.throw(ge))}catch(be){at(be)}}function ne(ge){ge.done?N(ge.value):M(ge.value).then(Ct,Ft)}ne((a=a.apply(h,o||[])).next())})}function hr(h,o){var e={label:0,sent:function(){if(N[0]&1)throw N[1];return N[1]},trys:[],ops:[]},a,M,N,at;return at={next:Ct(0),throw:Ct(1),return:Ct(2)},typeof Symbol=="function"&&(at[Symbol.iterator]=function(){return this}),at;function Ct(ne){return function(ge){return Ft([ne,ge])}}function Ft(ne){if(a)throw new TypeError("Generator is already executing.");for(;e;)try{if(a=1,M&&(N=ne[0]&2?M.return:ne[0]?M.throw||((N=M.return)&&N.call(M),0):M.next)&&!(N=N.call(M,ne[1])).done)return N;switch(M=0,N&&(ne=[ne[0]&2,N.value]),ne[0]){case 0:case 1:N=ne;break;case 4:return e.label++,{value:ne[1],done:!1};case 5:e.label++,M=ne[1],ne=[0];continue;case 7:ne=e.ops.pop(),e.trys.pop();continue;default:if(N=e.trys,!(N=N.length>0&&N[N.length-1])&&(ne[0]===6||ne[0]===2)){e=0;continue}if(ne[0]===3&&(!N||ne[1]>N[0]&&ne[1]<N[3])){e.label=ne[1];break}if(ne[0]===6&&e.label<N[1]){e.label=N[1],N=ne;break}if(N&&e.label<N[2]){e.label=N[2],e.ops.push(ne);break}N[2]&&e.ops.pop(),e.trys.pop();continue}ne=o.call(h,e)}catch(ge){ne=[6,ge],M=0}finally{a=N=0}if(ne[0]&5)throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}}function Sr(h,o,e,a){a===void 0&&(a=e),h[a]=o[e]}function mr(h,o){for(var e in h)e!=="default"&&!o.hasOwnProperty(e)&&(o[e]=h[e])}function dr(h){var o=typeof Symbol=="function"&&Symbol.iterator,e=o&&h[o],a=0;if(e)return e.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&a>=h.length&&(h=void 0),{value:h&&h[a++],done:!h}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}function Br(h,o){var e=typeof Symbol=="function"&&h[Symbol.iterator];if(!e)return h;var a=e.call(h),M,N=[],at;try{for(;(o===void 0||o-- >0)&&!(M=a.next()).done;)N.push(M.value)}catch(Ct){at={error:Ct}}finally{try{M&&!M.done&&(e=a.return)&&e.call(a)}finally{if(at)throw at.error}}return N}function ii(){for(var h=[],o=0;o<arguments.length;o++)h=h.concat(Br(arguments[o]));return h}function mi(){for(var h=0,o=0,e=arguments.length;o<e;o++)h+=arguments[o].length;for(var a=Array(h),M=0,o=0;o<e;o++)for(var N=arguments[o],at=0,Ct=N.length;at<Ct;at++,M++)a[M]=N[at];return a}function Pi(h){return this instanceof Pi?(this.v=h,this):new Pi(h)}function sa(h,o,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=e.apply(h,o||[]),M,N=[];return M={},at("next"),at("throw"),at("return"),M[Symbol.asyncIterator]=function(){return this},M;function at(Ae){a[Ae]&&(M[Ae]=function(Xe){return new Promise(function(fn,En){N.push([Ae,Xe,fn,En])>1||Ct(Ae,Xe)})})}function Ct(Ae,Xe){try{Ft(a[Ae](Xe))}catch(fn){be(N[0][3],fn)}}function Ft(Ae){Ae.value instanceof Pi?Promise.resolve(Ae.value.v).then(ne,ge):be(N[0][2],Ae)}function ne(Ae){Ct("next",Ae)}function ge(Ae){Ct("throw",Ae)}function be(Ae,Xe){Ae(Xe),N.shift(),N.length&&Ct(N[0][0],N[0][1])}}function Pa(h){var o,e;return o={},a("next"),a("throw",function(M){throw M}),a("return"),o[Symbol.iterator]=function(){return this},o;function a(M,N){o[M]=h[M]?function(at){return(e=!e)?{value:Pi(h[M](at)),done:M==="return"}:N?N(at):at}:N}}function Mi(h){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=h[Symbol.asyncIterator],e;return o?o.call(h):(h=typeof dr=="function"?dr(h):h[Symbol.iterator](),e={},a("next"),a("throw"),a("return"),e[Symbol.asyncIterator]=function(){return this},e);function a(N){e[N]=h[N]&&function(at){return new Promise(function(Ct,Ft){at=h[N](at),M(Ct,Ft,at.done,at.value)})}}function M(N,at,Ct,Ft){Promise.resolve(Ft).then(function(ne){N({value:ne,done:Ct})},at)}}function Ki(h,o){return Object.defineProperty?Object.defineProperty(h,"raw",{value:o}):h.raw=o,h}function fa(h){if(h&&h.__esModule)return h;var o={};if(h!=null)for(var e in h)Object.hasOwnProperty.call(h,e)&&(o[e]=h[e]);return o.default=h,o}function oa(h){return h&&h.__esModule?h:{default:h}}function pa(h,o){if(!o.has(h))throw new TypeError("attempted to get private field on non-instance");return o.get(h)}function La(h,o,e){if(!o.has(h))throw new TypeError("attempted to set private field on non-instance");return o.set(h,e),e}var Yr=w("6JdA"),Sa=function(){function h(o){this.type="coordinate",this.isRect=!1,this.isHelix=!1,this.isPolar=!1,this.isReflectX=!1,this.isReflectY=!1;var e=o.start,a=o.end,M=o.matrix,N=M===void 0?[1,0,0,0,1,0,0,0,1]:M,at=o.isTransposed,Ct=at===void 0?!1:at;this.start=e,this.end=a,this.matrix=N,this.originalMatrix=mi(N),this.isTransposed=Ct}return h.prototype.initial=function(){this.center={x:(this.start.x+this.end.x)/2,y:(this.start.y+this.end.y)/2},this.width=Math.abs(this.end.x-this.start.x),this.height=Math.abs(this.end.y-this.start.y)},h.prototype.update=function(o){Object(i.assign)(this,o),this.initial()},h.prototype.convertDim=function(o,e){var a,M=this[e],N=M.start,at=M.end;return this.isReflect(e)&&(a=[at,N],N=a[0],at=a[1]),N+o*(at-N)},h.prototype.invertDim=function(o,e){var a,M=this[e],N=M.start,at=M.end;return this.isReflect(e)&&(a=[at,N],N=a[0],at=a[1]),(o-N)/(at-N)},h.prototype.applyMatrix=function(o,e,a){a===void 0&&(a=0);var M=this.matrix,N=[o,e,a];return Yr.d.transformMat3(N,N,M),N},h.prototype.invertMatrix=function(o,e,a){a===void 0&&(a=0);var M=this.matrix,N=Yr.b.invert([0,0,0,0,0,0,0,0,0],M),at=[o,e,a];return N&&Yr.d.transformMat3(at,at,N),at},h.prototype.convert=function(o){var e=this.convertPoint(o),a=e.x,M=e.y,N=this.applyMatrix(a,M,1);return{x:N[0],y:N[1]}},h.prototype.invert=function(o){var e=this.invertMatrix(o.x,o.y,1);return this.invertPoint({x:e[0],y:e[1]})},h.prototype.rotate=function(o){var e=this.matrix,a=this.center;return Yr.a.leftTranslate(e,e,[-a.x,-a.y]),Yr.a.leftRotate(e,e,o),Yr.a.leftTranslate(e,e,[a.x,a.y]),this},h.prototype.reflect=function(o){return o==="x"?this.isReflectX=!this.isReflectX:this.isReflectY=!this.isReflectY,this},h.prototype.scale=function(o,e){var a=this.matrix,M=this.center;return Yr.a.leftTranslate(a,a,[-M.x,-M.y]),Yr.a.leftScale(a,a,[o,e]),Yr.a.leftTranslate(a,a,[M.x,M.y]),this},h.prototype.translate=function(o,e){var a=this.matrix;return Yr.a.leftTranslate(a,a,[o,e]),this},h.prototype.transpose=function(){return this.isTransposed=!this.isTransposed,this},h.prototype.getCenter=function(){return this.center},h.prototype.getWidth=function(){return this.width},h.prototype.getHeight=function(){return this.height},h.prototype.getRadius=function(){return this.radius},h.prototype.isReflect=function(o){return o==="x"?this.isReflectX:this.isReflectY},h.prototype.resetMatrix=function(o){this.matrix=o||mi(this.originalMatrix)},h}(),Pr=Sa,si=function(h){Wn(o,h);function o(e){var a=h.call(this,e)||this;return a.isRect=!0,a.type="cartesian",a.initial(),a}return o.prototype.initial=function(){h.prototype.initial.call(this);var e=this.start,a=this.end;this.x={start:e.x,end:a.x},this.y={start:e.y,end:a.y}},o.prototype.convertPoint=function(e){var a,M=e.x,N=e.y;return this.isTransposed&&(a=[N,M],M=a[0],N=a[1]),{x:this.convertDim(M,"x"),y:this.convertDim(N,"y")}},o.prototype.invertPoint=function(e){var a,M=this.invertDim(e.x,"x"),N=this.invertDim(e.y,"y");return this.isTransposed&&(a=[N,M],M=a[0],N=a[1]),{x:M,y:N}},o}(Pr),ti=si,$r=function(h){Wn(o,h);function o(e){var a=h.call(this,e)||this;a.isHelix=!0,a.type="helix";var M=e.startAngle,N=M===void 0?1.25*Math.PI:M,at=e.endAngle,Ct=at===void 0?7.25*Math.PI:at,Ft=e.innerRadius,ne=Ft===void 0?0:Ft,ge=e.radius;return a.startAngle=N,a.endAngle=Ct,a.innerRadius=ne,a.radius=ge,a.initial(),a}return o.prototype.initial=function(){h.prototype.initial.call(this);var e=(this.endAngle-this.startAngle)/(2*Math.PI)+1,a=Math.min(this.width,this.height)/2;this.radius&&this.radius>=0&&this.radius<=1&&(a=a*this.radius),this.d=Math.floor(a*(1-this.innerRadius)/e),this.a=this.d/(Math.PI*2),this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*a,end:this.innerRadius*a+this.d*.99}},o.prototype.convertPoint=function(e){var a,M=e.x,N=e.y;this.isTransposed&&(a=[N,M],M=a[0],N=a[1]);var at=this.convertDim(M,"x"),Ct=this.a*at,Ft=this.convertDim(N,"y");return{x:this.center.x+Math.cos(at)*(Ct+Ft),y:this.center.y+Math.sin(at)*(Ct+Ft)}},o.prototype.invertPoint=function(e){var a,M=this.d+this.y.start,N=Yr.c.subtract([0,0],[e.x,e.y],[this.center.x,this.center.y]),at=Yr.a.angleTo(N,[1,0],!0),Ct=at*this.a;Yr.c.length(N)<Ct&&(Ct=Yr.c.length(N));var Ft=Math.floor((Yr.c.length(N)-Ct)/M);at=2*Ft*Math.PI+at;var ne=this.a*at,ge=Yr.c.length(N)-ne;ge=Object(i.isNumberEqual)(ge,0)?0:ge;var be=this.invertDim(at,"x"),Ae=this.invertDim(ge,"y");return be=Object(i.isNumberEqual)(be,0)?0:be,Ae=Object(i.isNumberEqual)(Ae,0)?0:Ae,this.isTransposed&&(a=[Ae,be],be=a[0],Ae=a[1]),{x:be,y:Ae}},o}(Pr),ui=$r,li=function(h){Wn(o,h);function o(e){var a=h.call(this,e)||this;a.isPolar=!0,a.type="polar";var M=e.startAngle,N=M===void 0?-Math.PI/2:M,at=e.endAngle,Ct=at===void 0?Math.PI*3/2:at,Ft=e.innerRadius,ne=Ft===void 0?0:Ft,ge=e.radius;return a.startAngle=N,a.endAngle=Ct,a.innerRadius=ne,a.radius=ge,a.initial(),a}return o.prototype.initial=function(){for(h.prototype.initial.call(this);this.endAngle<this.startAngle;)this.endAngle+=Math.PI*2;var e=this.getOneBox(),a=e.maxX-e.minX,M=e.maxY-e.minY,N=Math.abs(e.minX)/a,at=Math.abs(e.minY)/M,Ct;this.height/M>this.width/a?(Ct=this.width/a,this.circleCenter={x:this.center.x-(.5-N)*this.width,y:this.center.y-(.5-at)*Ct*M}):(Ct=this.height/M,this.circleCenter={x:this.center.x-(.5-N)*Ct*a,y:this.center.y-(.5-at)*this.height}),this.polarRadius=this.radius,this.radius?this.radius>0&&this.radius<=1?this.polarRadius=Ct*this.radius:(this.radius<=0||this.radius>Ct)&&(this.polarRadius=Ct):this.polarRadius=Ct,this.x={start:this.startAngle,end:this.endAngle},this.y={start:this.innerRadius*this.polarRadius,end:this.polarRadius}},o.prototype.getRadius=function(){return this.polarRadius},o.prototype.convertPoint=function(e){var a,M=this.getCenter(),N=e.x,at=e.y;return this.isTransposed&&(a=[at,N],N=a[0],at=a[1]),N=this.convertDim(N,"x"),at=this.convertDim(at,"y"),{x:M.x+Math.cos(N)*at,y:M.y+Math.sin(N)*at}},o.prototype.invertPoint=function(e){var a=this.getCenter(),M=[e.x-a.x,e.y-a.y],N=[1,0,0,0,1,0,0,0,1];Yr.a.leftRotate(N,N,this.startAngle);var at=[1,0,0];Yr.d.transformMat3(at,at,N);var Ct=[at[0],at[1]],Ft=Yr.a.angleTo(Ct,M,this.endAngle<this.startAngle);Object(i.isNumberEqual)(Ft,Math.PI*2)&&(Ft=0);var ne=Yr.c.length(M),ge=Ft/(this.endAngle-this.startAngle);ge=this.endAngle-this.startAngle>0?ge:-ge;var be=this.invertDim(ne,"y"),Ae={x:0,y:0};return Ae.x=this.isTransposed?be:ge,Ae.y=this.isTransposed?ge:be,Ae},o.prototype.getCenter=function(){return this.circleCenter},o.prototype.getOneBox=function(){var e=this.startAngle,a=this.endAngle;if(Math.abs(a-e)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var M=[0,Math.cos(e),Math.cos(a)],N=[0,Math.sin(e),Math.sin(a)],at=Math.min(e,a);at<Math.max(e,a);at+=Math.PI/18)M.push(Math.cos(at)),N.push(Math.sin(at));return{minX:Math.min.apply(Math,M),maxX:Math.max.apply(Math,M),minY:Math.min.apply(Math,N),maxY:Math.max.apply(Math,N)}},o}(Pr),xi=li,Ci={},di=function(o){return Ci[o.toLowerCase()]},Ti=function(o,e){Ci[o.toLowerCase()]=e};Ti("rect",ti),Ti("cartesian",ti),Ti("polar",xi),Ti("helix",ui);var pi=w("17Tr"),Ni=pi.Axis.Line,Bi=pi.Axis.Circle,Fi=pi.Grid.Line,ma=pi.Grid.Circle,ua=pi.Legend.Category,Ra=pi.Legend.Continuous,xa=pi.Tooltip.Html;function Ma(h){if(Object(i.isEmpty)(h))return null;var o=h[0].x,e=h[0].x,a=h[0].y,M=h[0].y;return Object(i.each)(h,function(N){o=o>N.x?N.x:o,e=e<N.x?N.x:e,a=a>N.y?N.y:a,M=M<N.y?N.y:M}),{minX:o,maxX:e,minY:a,maxY:M,centerX:(o+e)/2,centerY:(a+M)/2}}function Qi(h,o,e,a){return{x:h+e*Math.cos(a),y:o+e*Math.sin(a)}}function ka(h,o,e,a,M,N){N===void 0&&(N=0);var at=Qi(h,o,e,a),Ct=Qi(h,o,e,M),Ft=Qi(h,o,N,a),ne=Qi(h,o,N,M);if(M-a==Math.PI*2){var ge=Qi(h,o,e,a+Math.PI),be=Qi(h,o,N,a+Math.PI),Ae=[["M",at.x,at.y],["A",e,e,0,1,1,ge.x,ge.y],["A",e,e,0,1,1,Ct.x,Ct.y],["M",Ft.x,Ft.y]];return N&&(Ae.push(["A",N,N,0,1,0,be.x,be.y]),Ae.push(["A",N,N,0,1,0,ne.x,ne.y])),Ae.push(["M",at.x,at.y]),Ae.push(["Z"]),Ae}var Xe=M-a<=Math.PI?0:1,fn=[["M",at.x,at.y],["A",e,e,0,Xe,1,Ct.x,Ct.y],["L",ne.x,ne.y]];return N&&fn.push(["A",N,N,0,Xe,0,Ft.x,Ft.y]),fn.push(["L",at.x,at.y]),fn.push(["Z"]),fn}function vo(h,o,e,a,M){var N=Qi(h,o,e,a),at=Qi(h,o,e,M);if(Object(i.isNumberEqual)(M-a,Math.PI*2)){var Ct=Qi(h,o,e,a+Math.PI);return[["M",N.x,N.y],["A",e,e,0,1,1,Ct.x,Ct.y],["A",e,e,0,1,1,N.x,N.y],["A",e,e,0,1,0,Ct.x,Ct.y],["A",e,e,0,1,0,N.x,N.y],["Z"]]}var Ft=M-a<=Math.PI?0:1;return[["M",N.x,N.y],["A",e,e,0,Ft,1,at.x,at.y]]}function za(h,o){var e=h.points,a=Ma(e),M,N,at=o.startAngle,Ct=o.endAngle,Ft=Ct-at;return o.isTransposed?(M=a.maxY*Ft,N=a.minY*Ft):(M=a.maxX*Ft,N=a.minX*Ft),M+=at,N+=at,{startAngle:N,endAngle:M}}function Ga(h,o){if(Object(i.isNumber)(h)&&Object(i.isNumber)(o))return[h,o];for(var e=-1,a=0,M=0,N,at=h.length-1,Ct,Ft=0;++e<h.length;)N=at,at=e,Ft+=Ct=h[N]*o[at]-h[at]*o[N],a+=(h[N]+h[at])*Ct,M+=(o[N]+o[at])*Ct;return Ft*=3,[a/Ft,M/Ft]}function eo(h,o){var e=h.attr(),a=o.attr();return Object(i.each)(e,function(M,N){a[N]===void 0&&(a[N]=void 0)}),a}function ae(h,o,e){var a=Math.min(o,e),M=Math.max(o,e);return h>=a&&h<=M}function Kt(h,o,e){if(Object(i.isString)(h))return h.padEnd(o,e);if(Object(i.isArray)(h)){var a=h.length;if(a<o)for(var M=o-a,N=0;N<M;N++)h.push(e)}return h}function te(h,o){return o.forEach(function(e){delete h[e]}),h}function Oe(h,o,e){o===void 0&&(o=[]),e===void 0&&(e={});for(var a=0,M=h;a<M.length;a++){var N=M[a];e[N]||(o.push(N),e[N]=!0)}return o}var Ze=function(){function h(o,e,a,M){o===void 0&&(o=0),e===void 0&&(e=0),a===void 0&&(a=0),M===void 0&&(M=0),this.x=o,this.y=e,this.height=M,this.width=a}return h.fromRange=function(o,e,a,M){return new h(o,e,a-o,M-e)},h.fromObject=function(o){return new h(o.minX,o.minY,o.width,o.height)},Object.defineProperty(h.prototype,"minX",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"maxX",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"minY",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"maxY",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"tl",{get:function(){return{x:this.x,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"tr",{get:function(){return{x:this.maxX,y:this.y}},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"bl",{get:function(){return{x:this.x,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"br",{get:function(){return{x:this.maxX,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"top",{get:function(){return{x:this.x+this.width/2,y:this.minY}},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"right",{get:function(){return{x:this.maxX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"bottom",{get:function(){return{x:this.x+this.width/2,y:this.maxY}},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"left",{get:function(){return{x:this.minX,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),h.prototype.isEqual=function(o){return this.x===o.x&&this.y===o.y&&this.width===o.width&&this.height===o.height},h.prototype.contains=function(o){return o.minX>=this.minX&&o.maxX<=this.maxX&&o.minY>=this.minY&&o.maxY<=this.maxY},h.prototype.clone=function(){return new h(this.x,this.y,this.width,this.height)},h.prototype.add=function(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];var a=this.clone();return Object(i.each)(o,function(M){a.x=Math.min(M.x,a.x),a.y=Math.min(M.y,a.y),a.width=Math.max(M.maxX,a.maxX)-a.x,a.height=Math.max(M.maxY,a.maxY)-a.y}),a},h.prototype.merge=function(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];var a=this.clone();return Object(i.each)(o,function(M){a.x=Math.max(M.x,a.x),a.y=Math.max(M.y,a.y),a.width=Math.min(M.maxX,a.maxX)-a.x,a.height=Math.min(M.maxY,a.maxY)-a.y}),a},h.prototype.cut=function(o,e){var a=o.width,M=o.height;switch(e){case t.TOP:case t.TOP_LEFT:case t.TOP_RIGHT:return h.fromRange(this.minX,this.minY+M,this.maxX,this.maxY);case t.RIGHT:case t.RIGHT_TOP:case t.RIGHT_BOTTOM:return h.fromRange(this.minX,this.minY,this.maxX-a,this.maxY);case t.BOTTOM:case t.BOTTOM_LEFT:case t.BOTTOM_RIGHT:return h.fromRange(this.minX,this.minY,this.maxX,this.maxY-M);case t.LEFT:case t.LEFT_TOP:case t.LEFT_BOTTOM:return h.fromRange(this.minX+a,this.minY,this.maxX,this.maxY);default:return this}},h.prototype.shrink=function(o){var e=o[0],a=o[1],M=o[2],N=o[3];return new h(this.x+N,this.y+e,this.width-N-a,this.height-e-M)},h.prototype.expand=function(o){var e=o[0],a=o[1],M=o[2],N=o[3];return new h(this.x-N,this.y-e,this.width+N+a,this.height+e+M)},h.prototype.exceed=function(o){return[Math.max(-this.minY+o.minY,0),Math.max(this.maxX-o.maxX,0),Math.max(this.maxY-o.maxY,0),Math.max(-this.minX+o.minX,0)]},h.prototype.collide=function(o){return this.minX<o.maxX&&this.maxX>o.minX&&this.minY<o.maxY&&this.maxY>o.minY},h.prototype.size=function(){return this.width*this.height},h.prototype.isPointIn=function(o){return o.x>=this.minX&&o.x<=this.maxX&&o.y>=this.minY&&o.y<=this.maxY},h}(),An=function(o,e){var a=e.start,M=e.end;return new Ze(o.x+o.width*a.x,o.y+o.height*a.y,o.width*Math.abs(M.x-a.x),o.height*Math.abs(M.y-a.y))};function qn(h){return[[h.minX,h.minY],[h.maxX,h.minY],[h.maxX,h.maxY],[h.minX,h.maxY]]}function rr(h){if(h.isPolar&&!h.isTransposed)return(h.endAngle-h.startAngle)*h.getRadius();var o=h.convert({x:0,y:0}),e=h.convert({x:1,y:0});return Math.sqrt(Math.pow(e.x-o.x,2)+Math.pow(e.y-o.y,2))}function tn(h){if(h.isPolar){var o=h.startAngle,e=h.endAngle;return e-o==Math.PI*2}return!1}function sn(h,o){var e=h.getCenter();return Math.sqrt(Math.pow(o.x-e.x,2)+Math.pow(o.y-e.y,2))}function un(h,o){var e=!1;if(h)if(h.type==="theta"){var a=h.start,M=h.end;e=ae(o.x,a.x,M.x)&&ae(o.y,a.y,M.y)}else{var N=h.invert(o);e=ae(N.x,0,1)&&ae(N.y,0,1)}return e}function ur(h,o){var e=h.getCenter();return Math.atan2(o.y-e.y,o.x-e.x)}function jr(h,o){o===void 0&&(o=0);var e=h.start,a=h.end,M=h.getWidth(),N=h.getHeight();if(h.isPolar){var at=h.startAngle,Ct=h.endAngle,Ft=h.getCenter(),ne=h.getRadius();return{type:"path",startState:{path:ka(Ft.x,Ft.y,ne+o,at,at)},endState:function(Ae){var Xe=(Ct-at)*Ae+at,fn=ka(Ft.x,Ft.y,ne+o,at,Xe);return{path:fn}},attrs:{path:ka(Ft.x,Ft.y,ne+o,at,Ct)}}}var ge;return h.isTransposed?ge={height:N+o*2}:ge={width:M+o*2},{type:"rect",startState:{x:e.x-o,y:a.y-o,width:h.isTransposed?M+o*2:0,height:h.isTransposed?0:N+o*2},endState:ge,attrs:{x:e.x-o,y:a.y-o,width:M+o*2,height:N+o*2}}}function wr(h,o){o===void 0&&(o=0);var e=h.start,a=h.end,M=h.getWidth(),N=h.getHeight(),at=Math.min(e.x,a.x),Ct=Math.min(e.y,a.y);return Ze.fromRange(at-o,Ct-o,at+M+o,Ct+N+o)}var yr=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function ni(h){var o="linear";return yr.test(h)?o="timeCat":Object(i.isString)(h)&&(o="cat"),o}function _r(h,o,e){var a=o||[];if(Object(i.isNumber)(h)||Object(i.isNil)(Object(i.firstValue)(a,h))&&Object(i.isEmpty)(e)){var M=Object(Se.d)("identity");return new M({field:h.toString(),values:[h]})}var N=Object(i.valuesOfKey)(a,h),at=Object(i.get)(e,"type",ni(N[0])),Ct=Object(Se.d)(at);return new Ct(Object(H.a)({field:h,values:N},e))}function Fr(h,o){if(h.type!=="identity"&&o.type!=="identity"){var e={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);h.change(e)}}function Lr(h){return h.alias||h.field}function Gr(h,o,e){var a=h.values,M=a.length,N;if(M===1)N=[.5,1];else{var at=1,Ct=0;tn(o)?o.isTransposed?(at=Object(i.get)(e,"widthRatio.multiplePie",1/1.3),Ct=1/M*at,N=[Ct/2,1-Ct/2]):N=[0,1-1/M]:(Ct=1/M/2,N=[Ct,1-Ct])}return N}function Hr(h){var o,e;switch(h){case t.TOP:o={x:0,y:1},e={x:1,y:1};break;case t.RIGHT:o={x:1,y:0},e={x:1,y:1};break;case t.BOTTOM:o={x:0,y:0},e={x:1,y:0};break;case t.LEFT:o={x:0,y:0},e={x:0,y:1};break;default:o=e={x:0,y:0}}return{start:o,end:e}}function ei(h){var o,e;return h.isTransposed?(o={x:0,y:0},e={x:1,y:0}):(o={x:0,y:0},e={x:0,y:1}),{start:o,end:e}}function Kr(h,o){var e={start:{x:0,y:0},end:{x:0,y:0}};h.isRect?e=Hr(o):h.isPolar&&(e=ei(h));var a=e.start,M=e.end;return{start:h.convert(a),end:h.convert(M)}}function Qr(h,o){if(h.isRect)return h.isTransposed?[t.RIGHT,t.BOTTOM].includes(o)?1:-1:[t.BOTTOM,t.RIGHT].includes(o)?-1:1;if(h.isPolar){var e=h.x.start;return e<0?-1:1}return 1}function Oi(h){var o=h.start,e=h.end;return o.x===e.x}function Ri(h,o){var e=h.start,a=h.end,M=Oi(h);return M?(e.y-a.y)*(o.x-e.x)>0?1:-1:(a.x-e.x)*(e.y-o.y)>0?-1:1}function Si(h,o){return Object(i.get)(h,["components","axis",o],{})}function Gi(h){var o=h.x,e=h.y,a=h.circleCenter,M=e.start>e.end,N=h.isTransposed?h.convert({x:M?0:1,y:0}):h.convert({x:0,y:M?0:1}),at=[N.x-a.x,N.y-a.y],Ct=[1,0],Ft=N.y>a.y?Yr.c.angle(at,Ct):Yr.c.angle(at,Ct)*-1,ne=Ft+(o.end-o.start),ge=Math.sqrt(Math.pow(N.x-a.x,2)+Math.pow(N.y-a.y,2));return{center:a,radius:ge,startAngle:Ft,endAngle:ne}}function ca(h,o){return Object(i.isBoolean)(h)?h===!1?!1:{}:Object(i.get)(h,[o])}function ha(h,o){return Object(i.get)(h,"position",o)}function na(h,o){return Object(i.get)(o,["title","text"],Lr(h))}var Zi=function(){function h(o,e){this.destroyed=!1,this.facets=[],this.view=o,this.cfg=Object(i.deepMix)({},this.getDefaultCfg(),e)}return h.prototype.init=function(){this.container||(this.container=this.createContainer());var o=this.view.getData();this.facets=this.generateFacets(o)},h.prototype.render=function(){this.renderViews()},h.prototype.update=function(){},h.prototype.clear=function(){this.clearFacetViews()},h.prototype.destroy=function(){this.clear(),this.container&&(this.container.remove(!0),this.container=void 0),this.destroyed=!0,this.view=void 0,this.facets=[]},h.prototype.facetToView=function(o){var e=o.region,a=o.data,M=o.padding,N=M===void 0?this.cfg.padding:M,at=this.view.createView({region:e,padding:N});at.data(a||[]),o.view=at,this.beforeEachView(at,o);var Ct=this.cfg.eachView;return Ct&&Ct(at,o),this.afterEachView(at,o),at},h.prototype.createContainer=function(){var o=this.view.getLayer(y.FORE);return o.addGroup()},h.prototype.renderViews=function(){this.createFacetViews()},h.prototype.createFacetViews=function(){var o=this;return this.facets.map(function(e){return o.facetToView(e)})},h.prototype.clearFacetViews=function(){var o=this;Object(i.each)(this.facets,function(e){e.view&&(o.view.removeView(e.view),e.view=void 0)})},h.prototype.getFieldValues=function(o,e){var a=[],M={};return Object(i.each)(o,function(N){var at=N[e];!Object(i.isNil)(at)&&!M[at]&&(a.push(at),M[at]=!0)}),a},h.prototype.getRegion=function(o,e,a,M){var N=1/(e===0?1:e),at=1/(o===0?1:o),Ct={x:N*a,y:at*M},Ft={x:N*(a+1),y:at*(M+1)};return{start:Ct,end:Ft}},h.prototype.getDefaultCfg=function(){return{eachView:void 0,showTitle:!0,padding:10,fields:[]}},h.prototype.getDefaultTitleCfg=function(){var o=this.view.getTheme().fontFamily;return{style:{fontSize:14,fill:"#666",fontFamily:o}}},h.prototype.processAxis=function(o,e){var a=o.getOptions(),M=a.coordinate,N=o.geometries,at=Object(i.get)(M,"type","rect");if(at==="rect"&&N.length){Object(i.isNil)(a.axes)&&(a.axes={});var Ct=a.axes,Ft=N[0].getXYFields(),ne=Ft[0],ge=Ft[1],be=ca(Ct,ne),Ae=ca(Ct,ge);be!==!1&&(a.axes[ne]=this.getXAxisOption(ne,Ct,be,e)),Ae!==!1&&(a.axes[ge]=this.getYAxisOption(ge,Ct,Ae,e))}},h.prototype.getFacetDataFilter=function(o){return function(e){return Object(i.every)(o,function(a){var M=a.field,N=a.value;return!Object(i.isNil)(N)&&M?e[M]===N:!0})}},h}(),ve={},U=function(o){return ve[Object(i.lowerCase)(o)]},G=function(o,e){ve[Object(i.lowerCase)(o)]=e},nt=function(){function h(o,e){this.context=o,this.cfg=e,o.addAction(this)}return h.prototype.applyCfg=function(o){Object(i.assign)(this,o)},h.prototype.init=function(){this.applyCfg(this.cfg)},h.prototype.destroy=function(){this.context.removeAction(this),this.context=null},h}(),vt=nt,Gt=function(h){Object(H.b)(o,h);function o(){return h!==null&&h.apply(this,arguments)||this}return o.prototype.execute=function(){this.callback&&this.callback(this.context)},o.prototype.destroy=function(){h.prototype.destroy.call(this),this.callback=null},o}(vt),Jt=Gt,ie={};function ue(h,o){var e=ie[h],a=null;if(e){var M=e.ActionClass,N=e.cfg;a=new M(o,N),a.name=h,a.init()}return a}function Ce(h){var o=ie[h];return Object(i.get)(o,"ActionClass")}function we(h,o,e){ie[h]={ActionClass:o,cfg:e}}function cn(h){delete ie[h]}function Cn(h,o){var e=new Jt(o);return e.callback=h,e.name="callback",e}function _t(h,o){var e=[];if(h.length){e.push(["M",h[0].x,h[0].y]);for(var a=1,M=h.length;a<M;a+=1){var N=h[a];e.push(["L",N.x,N.y])}o&&e.push(["Z"])}return e}function Xt(h,o){for(var e=[h[0]],a=1,M=h.length;a<M;a=a+2){var N=o.convert({x:h[a],y:h[a+1]});e.push(N.x,N.y)}return e}function Ee(h,o){var e=o.isTransposed,a=h[1],M=h[6],N=h[7],at=o.convert({x:M,y:N}),Ct=e?0:1;return["A",a,a,0,0,Ct,at.x,at.y]}function Vt(h,o,e){var a=e.isTransposed,M=e.startAngle,N=e.endAngle,at=h[0].toLowerCase()==="a"?{x:h[6],y:h[7]}:{x:h[1],y:h[2]},Ct={x:o[1],y:o[2]},Ft=[],ne=a?"y":"x",ge=Math.abs(Ct[ne]-at[ne])*(N-M),be=Ct[ne]>=at[ne]?1:0,Ae=ge>Math.PI?1:0,Xe=e.convert(Ct),fn=sn(e,Xe);if(fn>=.5)if(ge===Math.PI*2){var En={x:(Ct.x+at.x)/2,y:(Ct.y+at.y)/2},nr=e.convert(En);Ft.push(["A",fn,fn,0,Ae,be,nr.x,nr.y]),Ft.push(["A",fn,fn,0,Ae,be,Xe.x,Xe.y])}else Ft.push(["A",fn,fn,0,Ae,be,Xe.x,Xe.y]);return Ft}function ce(h){Object(i.each)(h,function(o,e){var a=o;if(a[0].toLowerCase()==="a"){var M=h[e-1],N=h[e+1];N&&N[0].toLowerCase()==="a"?M&&M[0].toLowerCase()==="l"&&(M[0]="M"):M&&M[0].toLowerCase()==="a"&&N&&N[0].toLowerCase()==="l"&&(N[0]="M")}})}var yn=function(o,e,a,M){var N=[],at,Ct,Ft=!!M,ne,ge;if(Ft){ne=[Infinity,Infinity],ge=[-Infinity,-Infinity];for(var be=0,Ae=o.length;be<Ae;be++){var Xe=o[be];ne=Yr.c.min([0,0],ne,Xe),ge=Yr.c.max([0,0],ge,Xe)}ne=Yr.c.min([0,0],ne,M[0]),ge=Yr.c.max([0,0],ge,M[1])}for(var be=0,fn=o.length;be<fn;be++){var Xe=o[be];if(a)at=o[be?be-1:fn-1],Ct=o[(be+1)%fn];else if(be===0||be===fn-1){N.push(Xe);continue}else at=o[be-1],Ct=o[be+1];var En=[0,0];En=Yr.c.sub(En,Ct,at),En=Yr.c.scale(En,En,e);var nr=Yr.c.distance(Xe,at),ar=Yr.c.distance(Xe,Ct),Er=nr+ar;Er!==0&&(nr/=Er,ar/=Er);var Mr=Yr.c.scale([0,0],En,-nr),qr=Yr.c.scale([0,0],En,ar),oi=Yr.c.add([0,0],Xe,Mr),ai=Yr.c.add([0,0],Xe,qr);Ft&&(oi=Yr.c.max([0,0],oi,ne),oi=Yr.c.min([0,0],oi,ge),ai=Yr.c.max([0,0],ai,ne),ai=Yr.c.min([0,0],ai,ge)),N.push(oi),N.push(ai)}return a&&N.push(N.shift()),N};function Bn(h,o,e){for(var a=!!o,M=[],N=0,at=h.length;N<at;N+=2)M.push([h[N],h[N+1]]);for(var Ct=yn(M,.4,a,e),Ft=M.length,ne=[],ge,be,Ae,N=0;N<Ft-1;N++)ge=Ct[N*2],be=Ct[N*2+1],Ae=M[N+1],ne.push(["C",ge[0],ge[1],be[0],be[1],Ae[0],Ae[1]]);return a&&(ge=Ct[Ft],be=Ct[Ft+1],Ae=M[0],ne.push(["C",ge[0],ge[1],be[0],be[1],Ae[0],Ae[1]])),ne}function Zn(h,o){return _t(h,o)}function Kn(h,o,e){var a=[],M=h[0],N=null;if(h.length<=2)return Zn(h,o);for(var at=0,Ct=h.length;at<Ct;at++){var Ft=h[at];(!N||!(N.x===Ft.x&&N.y===Ft.y))&&(a.push(Ft.x),a.push(Ft.y),N=Ft)}var ne=e||[[0,0],[1,1]],ge=Bn(a,o,ne);return ge.unshift(["M",M.x,M.y]),ge}function $e(h,o){var e=[];return Object(i.each)(o,function(a){var M=a[0];switch(M.toLowerCase()){case"m":case"l":case"c":e.push(Xt(a,h));break;case"a":e.push(Ee(a,h));break;case"z":default:e.push(a);break}}),e}function je(h,o){var e=[],a,M,N,at;return Object(i.each)(o,function(Ct,Ft){var ne=Ct[0];switch(ne.toLowerCase()){case"m":case"c":case"q":e.push(Xt(Ct,h));break;case"l":a=o[Ft-1],M=Ct,N=h.isTransposed,at=N?a[a.length-2]===M[1]:a[a.length-1]===M[2],at?e=e.concat(Vt(a,M,h)):e.push(Xt(Ct,h));break;case"a":e.push(Ee(Ct,h));break;case"z":default:e.push(Ct);break}}),ce(e),e}var L=w("LvGN");function Et(h,o){var e=h.event,a=e.target,M=a.getCanvasBBox();return M.width>=o||M.height>=o?M:null}function $t(h,o){var e=h.event,a=e.target,M=a.getCanvasBBox();return M.width>=o||M.height>=o?a.attr("path"):null}function ye(h){var o=h.event,e,a=o.target;return a&&(e=a.get("element")),e}function Zt(h){var o=h.event,e=o.target,a;return e&&(a=e.get("delegateObject")),a}function de(h){var o=h.event.gEvent;return!(o&&o.fromShape&&o.toShape&&o.fromShape.get("element")===o.toShape.get("element"))}function he(h){return h&&h.component&&h.component.isList()}function le(h){return h&&h.component&&h.component.isSlider()}function Me(h){var o=h.event,e=o.target;return e&&e.get("name")==="mask"}function Ve(h,o){var e=h.event.target;if(e.get("type")==="path"){var a=$t(h,o);return a?jn(h.view,a):void 0}var M=Et(h,o);return M?on(h.view,M):null}function Ye(h,o,e){var a=Et(h,e);if(!a)return null;var M=h.view,N=_e(M,o,{x:a.x,y:a.y}),at=_e(M,o,{x:a.maxX,y:a.maxY}),Ct={minX:N.x,minY:N.y,maxX:at.x,maxY:at.y};return on(o,Ct)}function ke(h){var o=h.geometries,e=[];return Object(i.each)(o,function(a){var M=a.elements;e=e.concat(M)}),h.views&&h.views.length&&Object(i.each)(h.views,function(a){e=e.concat(ke(a))}),e}function nn(h,o,e){var a=ke(h);return a.filter(function(M){return hn(M,o)===e})}function Re(h,o){var e=h.geometries,a=[];return Object(i.each)(e,function(M){var N=M.getElementsBy(function(at){return at.hasState(o)});a=a.concat(N)}),a}function hn(h,o){var e=h.getModel(),a=e.data,M;return Object(i.isArray)(a)?M=a[0][o]:M=a[o],M}function pn(h,o){return!(o.minX>h.maxX||o.maxX<h.minX||o.minY>h.maxY||o.maxY<h.minY)}function on(h,o){var e=ke(h),a=[];return Object(i.each)(e,function(M){var N=M.shape,at=N.getCanvasBBox();pn(o,at)&&a.push(M)}),a}function mn(h){var o=[];return Object(i.each)(h,function(e){var a=e[0];if(a!=="A")for(var M=1;M<e.length;M=M+2)o.push([e[M],e[M+1]]);else{var N=e.length;o.push([e[N-2],e[N-1]])}}),o}function jn(h,o){var e=ke(h),a=mn(o),M=e.filter(function(N){var at=N.shape,Ct;if(at.get("type")==="path")Ct=mn(at.attr("path"));else{var Ft=at.getCanvasBBox();Ct=qn(Ft)}return Object(L.b)(a,Ct)});return M}function Ie(h){return h.getComponents().map(function(o){return o.component})}function fe(h,o){var e=o.x-h.x,a=o.y-h.y;return Math.sqrt(e*e+a*a)}function Ne(h,o){if(h.length<=2)return Zn(h,!1);var e=h[0],a=[];Object(i.each)(h,function(N){a.push(N.x),a.push(N.y)});var M=Bn(a,o,null);return M.unshift(["M",e.x,e.y]),M}function Fe(h,o){return h.x<=o.x&&h.maxX>=o.x&&h.y<=o.y&&h.maxY>o.y}function rn(h){var o=h.parent,e=null;return o&&(e=o.views.filter(function(a){return a!==h})),e}function ln(h,o){var e=h.getCoordinate();return e.invert(o)}function _e(h,o,e){var a=ln(h,e);return o.getCoordinate().convert(a)}function dn(h,o,e,a){var M=!1;return Object(i.each)(h,function(N){if(N[e]===o[e]&&N[a]===o[a])return M=!0,!1}),M}function Sn(h,o){var e=h.getScaleByField(o);return!e&&h.views&&Object(i.each)(h.views,function(a){if(e=Sn(a,o),e)return!1}),e}var tr=function(){function h(o){this.actions=[],this.event=null,this.cacheMap={},this.view=o}return h.prototype.cache=function(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];if(o.length===1)return this.cacheMap[o[0]];o.length===2&&(this.cacheMap[o[0]]=o[1])},h.prototype.getAction=function(o){return this.actions.find(function(e){return e.name===o})},h.prototype.addAction=function(o){this.actions.push(o)},h.prototype.removeAction=function(o){var e=this.actions,a=this.actions.indexOf(o);a>=0&&e.splice(a,1)},h.prototype.getCurrentPoint=function(){var o=this.event;if(o)if(o.target instanceof HTMLElement){var e=this.view.getCanvas(),a=e.getPointByClient(o.clientX,o.clientY);return a}else return{x:o.x,y:o.y};return null},h.prototype.getCurrentShape=function(){return Object(i.get)(this.event,["gEvent","shape"])},h.prototype.isInPlot=function(){var o=this.getCurrentPoint();return o?this.view.isPointInPlot(o):!1},h.prototype.isInShape=function(o){var e=this.getCurrentShape();return e?e.get("name")===o:!1},h.prototype.isInComponent=function(o){var e=Ie(this.view),a=this.getCurrentPoint();return a?!!e.find(function(M){var N=M.getBBox();return o?M.get("name")===o&&Fe(N,a):Fe(N,a)}):!1},h.prototype.destroy=function(){this.view=null,this.event=null,Object(i.each)(this.actions.slice(),function(o){o.destroy()}),this.actions=null,this.cacheMap=null},h}(),Pn=tr,Fn=function(){function h(o,e){this.view=o,this.cfg=e}return h.prototype.init=function(){this.initEvents()},h.prototype.initEvents=function(){},h.prototype.clearEvents=function(){},h.prototype.destroy=function(){this.clearEvents()},h}(),Cr=Fn;function fi(h,o){var e=h.split(":"),a=e[0],M=o.getAction(a)||ue(a,o);if(!M)throw new Error("There is no action named "+a);var N=e[1];return{action:M,methodName:N}}function ri(h){var o=h.action,e=h.methodName;if(o[e])o[e]();else throw new Error("Action("+o.name+") doesn't have a method called "+e)}var zr={START:"start",SHOW_ENABLE:"showEnable",END:"end",ROLLBACK:"rollback",PROCESSING:"processing"},wi=function(h){Object(H.b)(o,h);function o(e,a){var M=h.call(this,e,a)||this;return M.callbackCaches={},M.emitCaches={},M.steps=a,M}return o.prototype.init=function(){this.initContext(),h.prototype.init.call(this)},o.prototype.destroy=function(){h.prototype.destroy.call(this),this.steps=null,this.context&&(this.context.destroy(),this.context=null),this.callbackCaches=null,this.view=null},o.prototype.initEvents=function(){var e=this;Object(i.each)(this.steps,function(a,M){Object(i.each)(a,function(N){var at=e.getActionCallback(M,N);at&&e.bindEvent(N.trigger,at)})})},o.prototype.clearEvents=function(){var e=this;Object(i.each)(this.steps,function(a,M){Object(i.each)(a,function(N){var at=e.getActionCallback(M,N);at&&e.offEvent(N.trigger,at)})})},o.prototype.initContext=function(){var e=this.view,a=new Pn(e);this.context=a;var M=this.steps;Object(i.each)(M,function(N){Object(i.each)(N,function(at){if(Object(i.isFunction)(at.action))at.actionObject={action:Cn(at.action,a),methodName:"execute"};else if(Object(i.isString)(at.action))at.actionObject=fi(at.action,a);else if(Object(i.isArray)(at.action)){var Ct=at.action;at.actionObject=[],Object(i.each)(Ct,function(Ft){at.actionObject.push(fi(Ft,a))})}})})},o.prototype.isAllowStep=function(e){var a=this.currentStepName,M=this.steps;if(a===e||e===zr.SHOW_ENABLE)return!0;if(e===zr.PROCESSING)return a===zr.START;if(e===zr.START)return a!==zr.PROCESSING;if(e===zr.END)return a===zr.PROCESSING||a===zr.START;if(e===zr.ROLLBACK){if(M[zr.END])return a===zr.END;if(a===zr.START)return!0}return!1},o.prototype.isAllowExecute=function(e,a){if(this.isAllowStep(e)){var M=this.getKey(e,a);return a.once&&this.emitCaches[M]?!1:a.isEnable?a.isEnable(this.context):!0}return!1},o.prototype.enterStep=function(e){this.currentStepName=e,this.emitCaches={}},o.prototype.afterExecute=function(e,a){e!==zr.SHOW_ENABLE&&this.currentStepName!==e&&this.enterStep(e);var M=this.getKey(e,a);this.emitCaches[M]=!0},o.prototype.getKey=function(e,a){return e+a.trigger+a.action},o.prototype.getActionCallback=function(e,a){var M=this,N=this.context,at=this.callbackCaches,Ct=a.actionObject;if(a.action&&Ct){var Ft=this.getKey(e,a);if(!at[Ft]){var ne=function(be){N.event=be,M.isAllowExecute(e,a)?(Object(i.isArray)(Ct)?Object(i.each)(Ct,function(Ae){N.event=be,ri(Ae)}):(N.event=be,ri(Ct)),M.afterExecute(e,a),a.callback&&(N.event=be,a.callback(N))):N.event=null};a.debounce?at[Ft]=Object(i.debounce)(ne,a.debounce.wait,a.debounce.immediate):a.throttle?at[Ft]=Object(i.throttle)(ne,a.throttle.wait,{leading:a.throttle.leading,trailing:a.throttle.trailing}):at[Ft]=ne}return at[Ft]}return null},o.prototype.bindEvent=function(e,a){var M=e.split(":");M[0]==="window"?window.addEventListener(M[1],a):M[0]==="document"?document.addEventListener(M[1],a):this.view.on(e,a)},o.prototype.offEvent=function(e,a){var M=e.split(":");M[0]==="window"?window.removeEventListener(M[1],a):M[0]==="document"?document.removeEventListener(M[1],a):this.view.off(e,a)},o}(Cr),Ai=wi,gi={};function Oa(h){return gi[Object(i.lowerCase)(h)]}function Aa(h,o){gi[Object(i.lowerCase)(h)]=o}function Oo(h,o,e){var a=Oa(h);if(!a)return null;if(Object(i.isPlainObject)(a)){var M=Object(i.mix)(Object(i.clone)(a),e);return new Ai(o,M)}else{var N=a;return new N(o,e)}}function Fo(h){return{title:{autoRotate:!0,position:"center",spacing:h.axisTitleSpacing,style:{fill:h.axisTitleTextFillColor,fontSize:h.axisTitleTextFontSize,lineHeight:h.axisTitleTextLineHeight,textBaseline:"middle",fontFamily:h.fontFamily}},label:{autoRotate:!1,autoEllipsis:!1,autoHide:{type:"equidistance",cfg:{minGap:6}},offset:h.axisLabelOffset,style:{fill:h.axisLabelFillColor,fontSize:h.axisLabelFontSize,lineHeight:h.axisLabelLineHeight,fontFamily:h.fontFamily}},line:{style:{lineWidth:h.axisLineBorder,stroke:h.axisLineBorderColor}},grid:{line:{type:"line",style:{stroke:h.axisGridBorderColor,lineWidth:h.axisGridBorder,lineDash:h.axisGridLineDash}},alignTick:!0,animate:!0},tickLine:{style:{lineWidth:h.axisTickLineBorder,stroke:h.axisTickLineBorderColor},alignTick:!0,length:h.axisTickLineLength},subTickLine:null,animate:!0}}function Yo(h){return{title:null,marker:{symbol:"circle",spacing:h.legendMarkerSpacing,style:{r:h.legendCircleMarkerSize,fill:h.legendMarkerColor}},itemName:{spacing:5,style:{fill:h.legendItemNameFillColor,fontFamily:h.fontFamily,fontSize:h.legendItemNameFontSize,lineHeight:h.legendItemNameLineHeight,fontWeight:h.legendItemNameFontWeight,textAlign:"start",textBaseline:"middle"}},flipPage:!0,animate:!1,maxItemWidth:200,itemSpacing:h.legendItemSpacing,itemMarginBottom:h.legendItemMarginBottom,padding:h.legendPadding}}function De(h){var o,e={point:{default:{fill:h.pointFillColor,r:h.pointSize,stroke:h.pointBorderColor,lineWidth:h.pointBorder,fillOpacity:h.pointFillOpacity},active:{stroke:h.pointActiveBorderColor,lineWidth:h.pointActiveBorder},selected:{stroke:h.pointSelectedBorderColor,lineWidth:h.pointSelectedBorder},inactive:{fillOpacity:h.pointInactiveFillOpacity,strokeOpacity:h.pointInactiveBorderOpacity}},hollowPoint:{default:{fill:h.hollowPointFillColor,lineWidth:h.hollowPointBorder,stroke:h.hollowPointBorderColor,strokeOpacity:h.hollowPointBorderOpacity,r:h.hollowPointSize},active:{stroke:h.hollowPointActiveBorderColor,strokeOpacity:h.hollowPointActiveBorderOpacity},selected:{lineWidth:h.hollowPointSelectedBorder,stroke:h.hollowPointSelectedBorderColor,strokeOpacity:h.hollowPointSelectedBorderOpacity},inactive:{strokeOpacity:h.hollowPointInactiveBorderOpacity}},area:{default:{fill:h.areaFillColor,fillOpacity:h.areaFillOpacity,stroke:null},active:{fillOpacity:h.areaActiveFillOpacity},selected:{fillOpacity:h.areaSelectedFillOpacity},inactive:{fillOpacity:h.areaInactiveFillOpacity}},hollowArea:{default:{fill:null,stroke:h.hollowAreaBorderColor,lineWidth:h.hollowAreaBorder,strokeOpacity:h.hollowAreaBorderOpacity},active:{fill:null,lineWidth:h.hollowAreaActiveBorder},selected:{fill:null,lineWidth:h.hollowAreaSelectedBorder},inactive:{strokeOpacity:h.hollowAreaInactiveBorderOpacity}},interval:{default:{fill:h.intervalFillColor,fillOpacity:h.intervalFillOpacity},active:{stroke:h.intervalActiveBorderColor,lineWidth:h.intervalActiveBorder},selected:{stroke:h.intervalSelectedBorderColor,lineWidth:h.intervalSelectedBorder},inactive:{fillOpacity:h.intervalInactiveFillOpacity,strokeOpacity:h.intervalInactiveBorderOpacity}},hollowInterval:{default:{fill:h.hollowIntervalFillColor,stroke:h.hollowIntervalBorderColor,lineWidth:h.hollowIntervalBorder,strokeOpacity:h.hollowIntervalBorderOpacity},active:{stroke:h.hollowIntervalActiveBorderColor,lineWidth:h.hollowIntervalActiveBorder,strokeOpacity:h.hollowIntervalActiveBorderOpacity},selected:{stroke:h.hollowIntervalSelectedBorderColor,lineWidth:h.hollowIntervalSelectedBorder,strokeOpacity:h.hollowIntervalSelectedBorderOpacity},inactive:{stroke:h.hollowIntervalInactiveBorderColor,lineWidth:h.hollowIntervalInactiveBorder,strokeOpacity:h.hollowIntervalInactiveBorderOpacity}},line:{default:{stroke:h.lineBorderColor,lineWidth:h.lineBorder,strokeOpacity:h.lineBorderOpacity,fill:null,lineAppendWidth:10,lineCap:"round",lineJoin:"round"},active:{lineWidth:h.lineActiveBorder},selected:{lineWidth:h.lineSelectedBorder},inactive:{strokeOpacity:h.lineInactiveBorderOpacity}}},a=Fo(h),M=Yo(h);return{background:h.backgroundColor,defaultColor:h.brandColor,padding:"auto",fontFamily:h.fontFamily,columnWidthRatio:1/2,maxColumnWidth:null,minColumnWidth:null,roseWidthRatio:.9999999,multiplePieWidthRatio:1/1.3,colors10:h.paletteQualitative10,colors20:h.paletteQualitative20,shapes:{point:["hollow-circle","hollow-square","hollow-bowtie","hollow-diamond","hollow-hexagon","hollow-triangle","hollow-triangle-down","circle","square","bowtie","diamond","hexagon","triangle","triangle-down","cross","tick","plus","hyphen","line"],line:["line","dash","dot","smooth"],area:["area","smooth","line","smooth-line"],interval:["rect","hollow-rect","line","tick"]},sizes:[1,10],geometries:{interval:{rect:{default:{style:e.interval.default},active:{style:e.interval.active},inactive:{style:e.interval.inactive},selected:{style:function(at){var Ct=at.geometry.coordinate;if(Ct.isPolar&&Ct.isTransposed){var Ft=za(at.getModel(),Ct),ne=Ft.startAngle,ge=Ft.endAngle,be=(ne+ge)/2,Ae=7.5,Xe=Ae*Math.cos(be),fn=Ae*Math.sin(be);return{matrix:Yr.a.transform(null,[["t",Xe,fn]])}}return e.interval.selected}}},"hollow-rect":{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}},line:{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}},tick:{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}},funnel:{default:{style:e.interval.default},active:{style:e.interval.active},inactive:{style:e.interval.inactive},selected:{style:e.interval.selected}},pyramid:{default:{style:e.interval.default},active:{style:e.interval.active},inactive:{style:e.interval.inactive},selected:{style:e.interval.selected}}},line:{line:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},dot:{default:{style:Object(H.a)(Object(H.a)({},e.line.default),{lineCap:null,lineDash:[1,1]})},active:{style:Object(H.a)(Object(H.a)({},e.line.active),{lineCap:null,lineDash:[1,1]})},inactive:{style:Object(H.a)(Object(H.a)({},e.line.inactive),{lineCap:null,lineDash:[1,1]})},selected:{style:Object(H.a)(Object(H.a)({},e.line.selected),{lineCap:null,lineDash:[1,1]})}},dash:{default:{style:Object(H.a)(Object(H.a)({},e.line.default),{lineCap:null,lineDash:[5.5,1]})},active:{style:Object(H.a)(Object(H.a)({},e.line.active),{lineCap:null,lineDash:[5.5,1]})},inactive:{style:Object(H.a)(Object(H.a)({},e.line.inactive),{lineCap:null,lineDash:[5.5,1]})},selected:{style:Object(H.a)(Object(H.a)({},e.line.selected),{lineCap:null,lineDash:[5.5,1]})}},smooth:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},hv:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},vh:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},hvh:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},vhv:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}}},polygon:{polygon:{default:{style:e.interval.default},active:{style:e.interval.active},inactive:{style:e.interval.inactive},selected:{style:e.interval.selected}}},point:{circle:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},square:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},bowtie:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},diamond:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},hexagon:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},triangle:{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},"triangle-down":{default:{style:e.point.default},active:{style:e.point.active},inactive:{style:e.point.inactive},selected:{style:e.point.selected}},"hollow-circle":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-square":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-bowtie":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-diamond":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-hexagon":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-triangle":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},"hollow-triangle-down":{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},cross:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},tick:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},plus:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},hyphen:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}},line:{default:{style:e.hollowPoint.default},active:{style:e.hollowPoint.active},inactive:{style:e.hollowPoint.inactive},selected:{style:e.hollowPoint.selected}}},area:{area:{default:{style:e.area.default},active:{style:e.area.active},inactive:{style:e.area.inactive},selected:{style:e.area.selected}},smooth:{default:{style:e.area.default},active:{style:e.area.active},inactive:{style:e.area.inactive},selected:{style:e.area.selected}},line:{default:{style:e.hollowArea.default},active:{style:e.hollowArea.active},inactive:{style:e.hollowArea.inactive},selected:{style:e.hollowArea.selected}},"smooth-line":{default:{style:e.hollowArea.default},active:{style:e.hollowArea.active},inactive:{style:e.hollowArea.inactive},selected:{style:e.hollowArea.selected}}},schema:{candle:{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}},box:{default:{style:e.hollowInterval.default},active:{style:e.hollowInterval.active},inactive:{style:e.hollowInterval.inactive},selected:{style:e.hollowInterval.selected}}},edge:{line:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},vhv:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},smooth:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}},arc:{default:{style:e.line.default},active:{style:e.line.active},inactive:{style:e.line.inactive},selected:{style:e.line.selected}}}},components:{axis:{common:a,top:Object(i.deepMix)({},a,{position:"top",grid:null,title:null,verticalLimitLength:1/2}),bottom:Object(i.deepMix)({},a,{position:"bottom",grid:null,title:null,verticalLimitLength:1/2}),left:Object(i.deepMix)({},a,{position:"left",title:null,line:null,tickLine:null,verticalLimitLength:1/3}),right:Object(i.deepMix)({},a,{position:"right",title:null,line:null,tickLine:null,verticalLimitLength:1/3}),circle:Object(i.deepMix)({},a,{title:null,grid:Object(i.deepMix)({},a.grid,{line:{type:"line"}})}),radius:Object(i.deepMix)({},a,{title:null,grid:Object(i.deepMix)({},a.grid,{line:{type:"circle"}})})},legend:{common:M,right:Object(i.deepMix)({},M,{layout:"vertical",padding:h.legendVerticalPadding}),left:Object(i.deepMix)({},M,{layout:"vertical",padding:h.legendVerticalPadding}),top:Object(i.deepMix)({},M,{layout:"horizontal",padding:h.legendHorizontalPadding}),bottom:Object(i.deepMix)({},M,{layout:"horizontal",padding:h.legendHorizontalPadding}),continuous:{title:null,background:null,track:{},rail:{type:"color",size:h.sliderRailHeight,defaultLength:h.sliderRailWidth,style:{fill:h.sliderRailFillColor,stroke:h.sliderRailBorderColor,lineWidth:h.sliderRailBorder}},label:{align:"rail",spacing:4,formatter:null,style:{fill:h.sliderLabelTextFillColor,fontSize:h.sliderLabelTextFontSize,lineHeight:h.sliderLabelTextLineHeight,textBaseline:"middle",fontFamily:h.fontFamily}},handler:{size:h.sliderHandlerWidth,style:{fill:h.sliderHandlerFillColor,stroke:h.sliderHandlerBorderColor}},slidable:!0,padding:M.padding}},tooltip:{showContent:!0,follow:!0,showCrosshairs:!1,showMarkers:!0,shared:!1,enterable:!1,position:"auto",marker:{symbol:"circle",stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffSetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,r:4},crosshairs:{line:{style:{stroke:h.tooltipCrosshairsBorderColor,lineWidth:h.tooltipCrosshairsBorder}},text:null,textBackground:{padding:2,style:{fill:"rgba(0, 0, 0, 0.25)",lineWidth:0,stroke:null}},follow:!1},domStyles:(o={},o[""+pi.TOOLTIP_CSS_CONST.CONTAINER_CLASS]={position:"absolute",visibility:"hidden",zIndex:8,transition:"left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s",backgroundColor:h.tooltipContainerFillColor,opacity:h.tooltipContainerFillOpacity,boxShadow:h.tooltipContainerShadow,borderRadius:h.tooltipContainerBorderRadius+"px",color:h.tooltipTextFillColor,fontSize:h.tooltipTextFontSize+"px",fontFamily:h.fontFamily,lineHeight:h.tooltipTextLineHeight+"px",padding:"0 12px 0 12px"},o[""+pi.TOOLTIP_CSS_CONST.TITLE_CLASS]={marginBottom:"12px",marginTop:"12px"},o[""+pi.TOOLTIP_CSS_CONST.LIST_CLASS]={margin:0,listStyleType:"none",padding:0},o[""+pi.TOOLTIP_CSS_CONST.LIST_ITEM_CLASS]={listStyleType:"none",padding:0,marginBottom:"12px",marginTop:"12px",marginLeft:0,marginRight:0},o[""+pi.TOOLTIP_CSS_CONST.MARKER_CLASS]={width:"8px",height:"8px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},o[""+pi.TOOLTIP_CSS_CONST.VALUE_CLASS]={display:"inline-block",float:"right",marginLeft:"30px"},o)},annotation:{arc:{style:{stroke:h.annotationArcBorderColor,lineWidth:h.annotationArcBorder},animate:!0},line:{style:{stroke:h.annotationLineBorderColor,lineDash:h.annotationLineDash,lineWidth:h.annotationLineBorder},text:{position:"start",autoRotate:!0,style:{fill:h.annotationTextFillColor,stroke:h.annotationTextBorderColor,lineWidth:h.annotationTextBorder,fontSize:h.annotationTextFontSize,textAlign:"start",fontFamily:h.fontFamily,textBaseline:"bottom"}},animate:!0},text:{style:{fill:h.annotationTextFillColor,stroke:h.annotationTextBorderColor,lineWidth:h.annotationTextBorder,fontSize:h.annotationTextFontSize,textBaseline:"middle",textAlign:"start",fontFamily:h.fontFamily},animate:!0},region:{top:!1,style:{lineWidth:h.annotationRegionBorder,stroke:h.annotationRegionBorderColor,fill:h.annotationRegionFillColor,fillOpacity:h.annotationRegionFillOpacity},animate:!0},image:{top:!1,animate:!0},dataMarker:{top:!0,point:{style:{r:3,stroke:h.brandColor,lineWidth:2}},line:{style:{stroke:h.annotationLineBorderColor,lineWidth:h.annotationLineBorder},length:h.annotationDataMarkerLineLength},text:{style:{textAlign:"start",fill:h.annotationTextFillColor,stroke:h.annotationTextBorderColor,lineWidth:h.annotationTextBorder,fontSize:h.annotationTextFontSize,fontFamily:h.fontFamily}},direction:"upward",autoAdjust:!0,animate:!0},dataRegion:{style:{region:{fill:h.annotationRegionFillColor,fillOpacity:h.annotationRegionFillOpacity},text:{textAlign:"center",textBaseline:"bottom",fill:h.annotationTextFillColor,stroke:h.annotationTextBorderColor,lineWidth:h.annotationTextBorder,fontSize:h.annotationTextFontSize,fontFamily:h.fontFamily}},animate:!0}},slider:{common:{padding:[8,8,8,8]}},scrollbar:{common:{padding:[8,8,8,8]}}},labels:{offset:12,style:{fill:h.labelFillColor,fontSize:h.labelFontSize,fontFamily:h.fontFamily,stroke:h.labelBorderColor,lineWidth:h.labelBorder},fillColorDark:h.labelFillColorDark,fillColorLight:h.labelFillColorLight,autoRotate:!0},innerLabels:{style:{fill:h.innerLabelFillColor,fontSize:h.innerLabelFontSize,fontFamily:h.fontFamily,stroke:h.innerLabelBorderColor,lineWidth:h.innerLabelBorder},autoRotate:!0},overflowLabels:{style:{fill:h.overflowLabelFillColor,fontSize:h.overflowLabelFontSize,fontFamily:h.fontFamily,stroke:h.overflowLabelBorderColor,lineWidth:h.overflowLabelBorder}},pieLabels:{labelHeight:14,offset:10,labelLine:{style:{lineWidth:h.labelLineBorder}},autoRotate:!0}}}var an={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},Mn={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},xn=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],bn=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],Yn=function(o){o===void 0&&(o={});var e=o.backgroundColor,a=e===void 0?"transparent":e,M=o.paletteQualitative10,N=M===void 0?xn:M,at=o.paletteQualitative20,Ct=at===void 0?bn:at,Ft=o.paletteSemanticRed,ne=Ft===void 0?"#F4664A":Ft,ge=o.paletteSemanticGreen,be=ge===void 0?"#30BF78":ge,Ae=o.paletteSemanticYellow,Xe=Ae===void 0?"#FAAD14":Ae,fn=o.fontFamily,En=fn===void 0?`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`:fn,nr=o.brandColor,ar=nr===void 0?N[0]:nr;return{backgroundColor:a,brandColor:ar,paletteQualitative10:N,paletteQualitative20:Ct,paletteSemanticRed:ne,paletteSemanticGreen:be,paletteSemanticYellow:Xe,fontFamily:En,axisLineBorderColor:an[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:an[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:an[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:an[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:an[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:an[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:an[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:ar,legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:an[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],sliderRailFillColor:an[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:an[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:an[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:an[25],annotationArcBorderColor:an[15],annotationArcBorder:1,annotationLineBorderColor:an[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:an[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:an[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:an[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"rgb(255, 255, 255)",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 0px 10px #aeaeae",tooltipContainerBorderRadius:3,tooltipTextFillColor:an[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:an[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Mn[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:an[65],overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:Mn[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:an[25],pointFillColor:ar,pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Mn[100],pointBorderOpacity:1,pointActiveBorderColor:an[100],pointSelectedBorder:2,pointSelectedBorderColor:an[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:ar,hollowPointBorderOpacity:.95,hollowPointFillColor:Mn[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:an[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:an[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:ar,lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:ar,areaFillOpacity:.25,areaActiveFillColor:ar,areaActiveFillOpacity:.5,areaSelectedFillColor:ar,areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:ar,hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:an[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:an[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:ar,intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:an[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:an[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:ar,hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Mn[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:an[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:an[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}},Jn=Yn();function $n(h){var o=h.styleSheet,e=o===void 0?{}:o,a=Object(H.c)(h,["styleSheet"]),M=Yn(e);return Object(i.deepMix)({},De(M),a)}var _n=$n({}),fr={default:_n};function sr(h){return Object(i.get)(fr,Object(i.lowerCase)(h),fr.default)}function vr(h,o){fr[Object(i.lowerCase)(h)]=$n(o)}function pr(h,o,e){var a=e.translate(h),M=e.translate(o);return Object(i.isNumberEqual)(a,M)}function Vr(h,o){var e=o.coordinate,a=o.getXScale(),M=a.range,N=M[M.length-1],at=M[0],Ct=e.invert(h),Ft=Ct.x;return e.isPolar&&Ft>(1+N)/2&&(Ft=at),a.translate(a.invert(Ft))}function Ur(h,o,e){var a=e.coordinate,M=e.getYScale(),N=M.field,at=a.invert(o),Ct=M.invert(at.y),Ft=Object(i.find)(h,function(ne){var ge=ne[m];return ge[N][0]<=Ct&&ge[N][1]>=Ct});return Ft||h[h.length-1]}var Ii=Object(i.memoize)(function(h){if(h.isCategory)return 1;for(var o=h.values,e=o.length,a=h.translate(o[0]),M=a,N=0;N<e;N++){var at=o[N],Ct=h.translate(at);Ct<a&&(a=Ct),Ct>M&&(M=Ct)}return(M-a)/(e-1)});function br(h,o,e){var a=o.getAttribute("position"),M=a.getFields(),N=o.scales,at=Object(i.isFunction)(e)||!e?M[0]:e,Ct=N[at],Ft=Ct?Ct.getText(h[at]):h[at]||at;return Object(i.isFunction)(e)?e(Ft,h):Ft}function hi(h){var o=Object(i.values)(h.attributes);return Object(i.filter)(o,function(e){return Object(i.contains)(I,e.type)})}function Wr(h){for(var o=hi(h),e,a=0,M=o;a<M.length;a++){var N=M[a],at=N.getScale(N.type);if(at&&at.isLinear){e=at;break}}var Ct=h.getXScale(),Ft=h.getYScale();return e||Ft||Ct}function ji(h,o){var e=o.field,a=h[e];if(Object(i.isArray)(a)){var M=a.map(function(N){return o.getText(N)});return M.join("-")}return o.getText(a)}function zi(h,o){var e,a=o.getGroupScales();if(a.length&&(e=a[0]),e){var M=e.field;return e.getText(h[M])}var N=Wr(o);return Lr(N)}function Ui(h,o,e){if(o.length===0)return null;var a=e.type,M=e.getXScale(),N=e.getYScale(),at=M.field,Ct=N.field,Ft=null;if(a==="heatmap"||a==="point"){for(var ne=e.coordinate,ge=ne.invert(h),be=M.invert(ge.x),Ae=N.invert(ge.y),Xe=Infinity,fn=0;fn<o.length;fn++){var En=o[fn],nr=En[m],ar=Math.pow(nr[at]-be,2)+Math.pow(nr[Ct]-Ae,2);ar<Xe&&(Xe=ar,Ft=En)}return Ft}var Er=o[0],Mr=o[o.length-1],qr=Vr(h,e),oi=Er[m][at],ai=Er[m][Ct],aa=Mr[m][at],Ji=N.isLinear&&Object(i.isArray)(ai);if(Object(i.isArray)(oi)){for(var fn=0;fn<o.length;fn++){var _i=o[fn],nr=_i[m];if(M.translate(nr[at][0])<=qr&&M.translate(nr[at][1])>=qr)if(Ji)Object(i.isArray)(Ft)||(Ft=[]),Ft.push(_i);else{Ft=_i;break}}Object(i.isArray)(Ft)&&(Ft=Ur(Ft,h,e))}else{var Ca=void 0;if(!M.isLinear&&M.type!=="timeCat"){for(var fn=0;fn<o.length;fn++){var _i=o[fn],nr=_i[m];if(pr(nr[at],qr,M))if(Ji)Object(i.isArray)(Ft)||(Ft=[]),Ft.push(_i);else{Ft=_i;break}else M.translate(nr[at])<=qr&&(Mr=_i,Ca=o[fn+1])}Object(i.isArray)(Ft)&&(Ft=Ur(Ft,h,e))}else{if((qr>M.translate(aa)||qr<M.translate(oi))&&(qr>M.max||qr<M.min))return null;for(var io=0,ao=o.length-1,co=void 0;io<=ao;){co=Math.floor((io+ao)/2);var go=o[co][m][at];if(pr(go,qr,M))return o[co];M.translate(go)<=M.translate(qr)?(io=co+1,Mr=o[co],Ca=o[co+1]):(ao===0&&(Mr=o[0]),ao=co-1)}}Mr&&Ca&&Math.abs(M.translate(Mr[m][at])-qr)>Math.abs(M.translate(Ca[m][at])-qr)&&(Mr=Ca)}var et=Ii(e.getXScale());return!Ft&&Math.abs(M.translate(Mr[m][at])-qr)<=et/2&&(Ft=Mr),Ft}function ra(h,o,e,a){e===void 0&&(e=""),a===void 0&&(a=!1);var M=h[m],N=br(M,o,e),at=o.tooltipOption,Ct=o.theme.defaultColor,Ft=[],ne,ge;function be(aa,Ji){if(a||!Object(i.isNil)(Ji)&&Ji!==""){var _i={title:N,data:M,mappingData:h,name:aa,value:Ji,color:h.color||Ct,marker:!0};Ft.push(_i)}}if(Object(i.isObject)(at)){var Ae=at.fields,Xe=at.callback;if(Xe){var fn=Ae.map(function(aa){return h[m][aa]}),En=Xe.apply(void 0,fn),nr=Object(H.a)({data:h[m],mappingData:h,title:N,color:h.color||Ct,marker:!0},En);Ft.push(nr)}else for(var ar=o.scales,Er=0,Mr=Ae;Er<Mr.length;Er++){var qr=Mr[Er];if(!Object(i.isNil)(M[qr])){var oi=ar[qr];ne=Lr(oi),ge=oi.getText(M[qr]),be(ne,ge)}}}else{var ai=Wr(o);ge=ji(M,ai),ne=zi(M,o),be(ne,ge)}return Ft}function da(h){return!Object(i.isNumber)(h)&&!Object(i.isArray)(h)}function Di(h){h===void 0&&(h=0);var o=Object(i.isArray)(h)?h:[h];switch(o.length){case 0:o=[0,0,0,0];break;case 1:o=new Array(4).fill(o[0]);break;case 2:o=Object(H.d)(o,o);break;case 3:o=Object(H.d)(o,[o[1]]);break;default:o=o.slice(0,4);break}return o}var kr={};function er(h,o){kr[h]=o}function Wi(h){delete kr[h]}function _a(){return Object.keys(kr)}function Ei(h){return kr[h]}var Yi=function(){function h(o){this.option=this.wrapperOption(o)}return h.prototype.update=function(o){return this.option=this.wrapperOption(o),this},h.prototype.hasAction=function(o){var e=this.option.actions;return Object(i.some)(e,function(a){return a[0]===o})},h.prototype.create=function(o,e){var a=this.option,M=a.type,N=a.cfg,at=M==="theta",Ct=Object(H.a)({start:o,end:e},N),Ft=di(at?"polar":M);return this.coordinate=new Ft(Ct),this.coordinate.type=M,at&&(this.hasAction("transpose")||this.transpose()),this.execActions(),this.coordinate},h.prototype.adjust=function(o,e){return this.coordinate.update({start:o,end:e}),this.coordinate.resetMatrix(),this.execActions(["scale","rotate","translate"]),this.coordinate},h.prototype.rotate=function(o){return this.option.actions.push(["rotate",o]),this},h.prototype.reflect=function(o){return this.option.actions.push(["reflect",o]),this},h.prototype.scale=function(o,e){return this.option.actions.push(["scale",o,e]),this},h.prototype.transpose=function(){return this.option.actions.push(["transpose"]),this},h.prototype.getOption=function(){return this.option},h.prototype.getCoordinate=function(){return this.coordinate},h.prototype.wrapperOption=function(o){return Object(H.a)({type:"rect",actions:[],cfg:{}},o)},h.prototype.execActions=function(o){var e=this,a=this.option.actions;Object(i.each)(a,function(M){var N,at=M[0],Ct=M.slice(1),Ft=Object(i.isNil)(o)?!0:o.includes(at);Ft&&(N=e.coordinate)[at].apply(N,Ct)})},h}(),ea=Yi,no=function(){function h(o,e,a){this.view=o,this.gEvent=e,this.data=a,this.type=e.type}return h.fromData=function(o,e,a){return new h(o,new Z.Event(e,{}),a)},Object.defineProperty(h.prototype,"target",{get:function(){return this.gEvent.target},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"event",{get:function(){return this.gEvent.originalEvent},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"x",{get:function(){return this.gEvent.x},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"y",{get:function(){return this.gEvent.y},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"clientX",{get:function(){return this.gEvent.clientX},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"clientY",{get:function(){return this.gEvent.clientY},enumerable:!1,configurable:!0}),h.prototype.toString=function(){return"[Event (type="+this.type+")]"},h.prototype.clone=function(){return new h(this.view,this.gEvent,this.data)},h}(),$i=no;function Wa(h){var o=h.getController("axis"),e=h.getController("legend"),a=h.getController("annotation"),M=h.getController("slider"),N=h.getController("scrollbar");[o,M,N,e,a].forEach(function(at){at&&at.layout()})}var Ta=function(){function h(){this.scales=new Map,this.syncScales=new Map}return h.prototype.createScale=function(o,e,a,M){var N=a,at=this.getScaleMeta(M);if(e.length===0&&at){var Ct=at.scale,Ft={type:Ct.type};Ct.isCategory&&(Ft.values=Ct.values),N=Object(i.deepMix)(Ft,at.scaleDef,a)}var ne=_r(o,e,N);return this.cacheScale(ne,a,M),ne},h.prototype.sync=function(o,e){var a=this;this.syncScales.forEach(function(M,N){var at=Number.MAX_SAFE_INTEGER,Ct=Number.MIN_SAFE_INTEGER,Ft=[];Object(i.each)(M,function(ne){var ge=a.getScale(ne);Ct=Object(i.isNumber)(ge.max)?Math.max(Ct,ge.max):Ct,at=Object(i.isNumber)(ge.min)?Math.min(at,ge.min):at,Object(i.each)(ge.values,function(be){Ft.includes(be)||Ft.push(be)})}),Object(i.each)(M,function(ne){var ge=a.getScale(ne);if(ge.isContinuous)ge.change({min:at,max:Ct,values:Ft});else if(ge.isCategory){var be=ge.range,Ae=a.getScaleMeta(ne);Ft&&!Object(i.get)(Ae,["scaleDef","range"])&&(be=Gr(Object(i.deepMix)({},ge,{values:Ft}),o,e)),ge.change({values:Ft,range:be})}})})},h.prototype.cacheScale=function(o,e,a){var M=this.getScaleMeta(a);M&&M.scale.type===o.type?(Fr(M.scale,o),M.scaleDef=e):(M={key:a,scale:o,scaleDef:e},this.scales.set(a,M));var N=this.getSyncKey(M);if(M.syncKey=N,this.removeFromSyncScales(a),N){var at=this.syncScales.get(N);at||(at=[],this.syncScales.set(N,at)),at.push(a)}},h.prototype.getScale=function(o){var e=this.getScaleMeta(o);if(!e){var a=Object(i.last)(o.split("-")),M=this.syncScales.get(a);M&&M.length&&(e=this.getScaleMeta(M[0]))}return e&&e.scale},h.prototype.deleteScale=function(o){var e=this.getScaleMeta(o);if(e){var a=e.syncKey,M=this.syncScales.get(a);if(M&&M.length){var N=M.indexOf(o);N!==-1&&M.splice(N,1)}}this.scales.delete(o)},h.prototype.clear=function(){this.scales.clear(),this.syncScales.clear()},h.prototype.removeFromSyncScales=function(o){var e=this;this.syncScales.forEach(function(a,M){var N=a.indexOf(o);if(N!==-1)return a.splice(N,1),a.length===0&&e.syncScales.delete(M),!1})},h.prototype.getSyncKey=function(o){var e=o.scale,a=o.scaleDef,M=e.field,N=Object(i.get)(a,["sync"]);return N===!0?M:N===!1?void 0:N},h.prototype.getScaleMeta=function(o){return this.scales.get(o)},h}(),bo=function(){function h(o,e,a,M){o===void 0&&(o=0),e===void 0&&(e=0),a===void 0&&(a=0),M===void 0&&(M=0),this.top=o,this.right=e,this.bottom=a,this.left=M}return h.instance=function(o,e,a,M){return o===void 0&&(o=0),e===void 0&&(e=0),a===void 0&&(a=0),M===void 0&&(M=0),new h(o,e,a,M)},h.prototype.max=function(o){var e=o[0],a=o[1],M=o[2],N=o[3];return this.top=Math.max(this.top,e),this.right=Math.max(this.right,a),this.bottom=Math.max(this.bottom,M),this.left=Math.max(this.left,N),this},h.prototype.shrink=function(o){var e=o[0],a=o[1],M=o[2],N=o[3];return this.top+=e,this.right+=a,this.bottom+=M,this.left+=N,this},h.prototype.inc=function(o,e){var a=o.width,M=o.height;switch(e){case t.TOP:case t.TOP_LEFT:case t.TOP_RIGHT:this.top+=M;break;case t.RIGHT:case t.RIGHT_TOP:case t.RIGHT_BOTTOM:this.right+=a;break;case t.BOTTOM:case t.BOTTOM_LEFT:case t.BOTTOM_RIGHT:this.bottom+=M;break;case t.LEFT:case t.LEFT_TOP:case t.LEFT_BOTTOM:this.left+=a;break;default:break}return this},h.prototype.getPadding=function(){return[this.top,this.right,this.bottom,this.left]},h.prototype.clone=function(){return new(h.bind.apply(h,Object(H.d)([void 0],this.getPadding())))},h}();function Na(h){var o=h.padding;if(!da(o))return new(bo.bind.apply(bo,Object(H.d)([void 0],Di(o))));var e=h.viewBBox,a=new bo,M=[],N=[],at=[];return Object(i.each)(h.getComponents(),function(Ct){var Ft=Ct.type;Ft===n.AXIS?M.push(Ct):[n.LEGEND,n.SLIDER,n.SCROLLBAR].includes(Ft)?N.push(Ct):Ft!==n.GRID&&Ft!==n.TOOLTIP&&at.push(Ct)}),Object(i.each)(M,function(Ct){var Ft=Ct.component,ne=Ft.getLayoutBBox(),ge=new Ze(ne.x,ne.y,ne.width,ne.height),be=ge.exceed(e);a.max(be)}),Object(i.each)(N,function(Ct){var Ft=Ct.component,ne=Ct.direction,ge=Ft.getLayoutBBox(),be=Ft.get("padding"),Ae=new Ze(ge.x,ge.y,ge.width,ge.height).expand(be);a.inc(Ae,ne)}),Object(i.each)(at,function(Ct){var Ft=Ct.component,ne=Ct.direction,ge=Ft.getLayoutBBox(),be=new Ze(ge.x,ge.y,ge.width,ge.height);a.inc(be,ne)}),a}function Fa(h,o,e){var a=e.instance();o.forEach(function(M){M.autoPadding=a.max(M.autoPadding.getPadding())})}var ro=function(h){Object(H.b)(o,h);function o(e){var a=h.call(this,{visible:e.visible})||this;a.views=[],a.geometries=[],a.controllers=[],a.interactions={},a.limitInPlot=!1,a.options={data:[],animate:!0},a.usedControllers=_a(),a.scalePool=new Ta,a.layoutFunc=Wa,a.isPreMouseInPlot=!1,a.isDataChanged=!1,a.isCoordinateChanged=!1,a.createdScaleKeys=new Map,a.onCanvasEvent=function(Mr){var qr=Mr.name;if(!qr.includes(":")){var oi=a.createViewEvent(Mr);a.doPlotEvent(oi),a.emit(qr,oi)}},a.onDelegateEvents=function(Mr){var qr=Mr.name;if(!!qr.includes(":")){var oi=a.createViewEvent(Mr);a.emit(qr,oi)}};var M=e.id,N=M===void 0?Object(i.uniqueId)("view"):M,at=e.parent,Ct=e.canvas,Ft=e.backgroundGroup,ne=e.middleGroup,ge=e.foregroundGroup,be=e.region,Ae=be===void 0?{start:{x:0,y:0},end:{x:1,y:1}}:be,Xe=e.padding,fn=e.appendPadding,En=e.theme,nr=e.options,ar=e.limitInPlot,Er=e.syncViewPadding;return a.parent=at,a.canvas=Ct,a.backgroundGroup=Ft,a.middleGroup=ne,a.foregroundGroup=ge,a.region=Ae,a.padding=Xe,a.appendPadding=fn,a.options=Object(H.a)(Object(H.a)({},a.options),nr),a.limitInPlot=ar,a.id=N,a.syncViewPadding=Er,a.themeObject=Object(i.isObject)(En)?Object(i.deepMix)({},sr("default"),$n(En)):sr(En),a.init(),a}return o.prototype.setLayout=function(e){this.layoutFunc=e},o.prototype.init=function(){this.calculateViewBBox(),this.initEvents(),this.initComponentController(),this.initOptions()},o.prototype.render=function(e){e===void 0&&(e=!1),this.emit(p.BEFORE_RENDER),this.paint(e),this.emit(p.AFTER_RENDER),this.visible===!1&&this.changeVisible(!1)},o.prototype.clear=function(){var e=this;this.emit(p.BEFORE_CLEAR),this.filteredData=[],this.coordinateInstance=void 0,this.isDataChanged=!1,this.isCoordinateChanged=!1;for(var a=this.geometries,M=0;M<a.length;M++)a[M].clear(),a[M].container.remove(!0);this.geometries=[];for(var N=this.controllers,M=0;M<N.length;M++)N[M].name==="annotation"?N[M].clear(!0):N[M].clear();this.createdScaleKeys.forEach(function(Ct,Ft){e.getRootView().scalePool.deleteScale(Ft)}),this.createdScaleKeys.clear();for(var at=this.views,M=0;M<at.length;M++)at[M].clear();this.emit(p.AFTER_CLEAR)},o.prototype.destroy=function(){this.emit(p.BEFORE_DESTROY);var e=this.interactions;Object(i.each)(e,function(Ct){Ct&&Ct.destroy()}),this.clear();for(var a=this.controllers,M=0,N=a.length;M<N;M++){var at=a[M];at.destroy()}this.backgroundGroup.remove(!0),this.middleGroup.remove(!0),this.foregroundGroup.remove(!0),h.prototype.destroy.call(this)},o.prototype.changeVisible=function(e){h.prototype.changeVisible.call(this,e);for(var a=this.geometries,M=0,N=a.length;M<N;M++){var at=a[M];at.changeVisible(e)}for(var Ct=this.controllers,M=0,N=Ct.length;M<N;M++){var Ft=Ct[M];Ft.changeVisible(e)}return this.foregroundGroup.set("visible",e),this.middleGroup.set("visible",e),this.backgroundGroup.set("visible",e),this.getCanvas().draw(),this},o.prototype.data=function(e){return Object(i.set)(this.options,"data",e),this.isDataChanged=!0,this},o.prototype.source=function(e){return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."),this.data(e)},o.prototype.filter=function(e,a){return Object(i.isFunction)(a)?(Object(i.set)(this.options,["filters",e],a),this):(!a&&Object(i.get)(this.options,["filters",e])&&delete this.options.filters[e],this)},o.prototype.axis=function(e,a){return Object(i.isBoolean)(e)?Object(i.set)(this.options,["axes"],e):Object(i.set)(this.options,["axes",e],a),this},o.prototype.legend=function(e,a){return Object(i.isBoolean)(e)?Object(i.set)(this.options,["legends"],e):Object(i.isString)(e)?Object(i.set)(this.options,["legends",e],a):Object(i.set)(this.options,["legends"],e),this},o.prototype.scale=function(e,a){var M=this;return Object(i.isString)(e)?Object(i.set)(this.options,["scales",e],a):Object(i.isObject)(e)&&Object(i.each)(e,function(N,at){Object(i.set)(M.options,["scales",at],N)}),this},o.prototype.tooltip=function(e){return Object(i.set)(this.options,"tooltip",e),this},o.prototype.annotation=function(){return this.getController("annotation")},o.prototype.guide=function(){return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."),this.annotation()},o.prototype.coordinate=function(e,a){return Object(i.isString)(e)?Object(i.set)(this.options,"coordinate",{type:e,cfg:a}):Object(i.set)(this.options,"coordinate",e),this.coordinateController.update(this.options.coordinate),this.coordinateController},o.prototype.coord=function(e,a){return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."),this.coordinate(e,a)},o.prototype.facet=function(e,a){this.facetInstance&&this.facetInstance.destroy();var M=U(e);if(!M)throw new Error("facet '"+e+"' is not exist!");return this.facetInstance=new M(this,Object(H.a)(Object(H.a)({},a),{type:e})),this},o.prototype.animate=function(e){return Object(i.set)(this.options,"animate",e),this},o.prototype.updateOptions=function(e){return this.clear(),Object(i.mix)(this.options,e),this.views.forEach(function(a){return a.destroy()}),this.views=[],this.initOptions(),this.coordinateBBox=this.viewBBox,this},o.prototype.option=function(e,a){if(o.prototype[e])throw new Error(`Can't use built in variable name "`+e+'", please change another one.');return Object(i.set)(this.options,e,a),this},o.prototype.theme=function(e){return this.themeObject=Object(i.isObject)(e)?Object(i.deepMix)({},this.themeObject,$n(e)):sr(e),this},o.prototype.interaction=function(e,a){var M=this.interactions[e];M&&M.destroy();var N=Oo(e,this,a);return N&&(N.init(),this.interactions[e]=N),this},o.prototype.removeInteraction=function(e){var a=this.interactions[e];a&&(a.destroy(),this.interactions[e]=void 0)},o.prototype.changeData=function(e){this.isDataChanged=!0,this.emit(p.BEFORE_CHANGE_DATA),this.data(e),this.paint(!0);for(var a=this.views,M=0,N=a.length;M<N;M++){var at=a[M];at.changeData(e)}this.emit(p.AFTER_CHANGE_DATA)},o.prototype.createView=function(e){this.parent&&this.parent.parent&&console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it.");var a={data:this.options.data,scales:Object(i.clone)(this.options.scales),axes:Object(i.clone)(this.options.axes),coordinate:Object(i.clone)(this.coordinateController.getOption()),tooltip:Object(i.clone)(this.options.tooltip),legends:Object(i.clone)(this.options.legends),animate:this.options.animate,visible:this.visible},M=new o(Object(H.a)(Object(H.a)({parent:this,canvas:this.canvas,backgroundGroup:this.backgroundGroup.addGroup({zIndex:u.BG}),middleGroup:this.middleGroup.addGroup({zIndex:u.MID}),foregroundGroup:this.foregroundGroup.addGroup({zIndex:u.FORE}),theme:this.themeObject,padding:this.padding},e),{options:Object(H.a)(Object(H.a)({},a),Object(i.get)(e,"options",{}))}));return this.views.push(M),M},o.prototype.view=function(e){return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."),this.createView(e)},o.prototype.removeView=function(e){var a=Object(i.remove)(this.views,function(M){return M===e})[0];return a&&a.destroy(),a},o.prototype.getCoordinate=function(){return this.coordinateInstance},o.prototype.getTheme=function(){return this.themeObject},o.prototype.getXScale=function(){var e=this.geometries[0];return e?e.getXScale():null},o.prototype.getYScales=function(){var e={};return this.geometries.map(function(a){var M=a.getYScale(),N=M.field;if(!e[N])return e[N]=!0,M})},o.prototype.getScalesByDim=function(e){for(var a=this.geometries,M={},N=0,at=a.length;N<at;N++){var Ct=a[N],Ft=e==="x"?Ct.getXScale():Ct.getYScale();Ft&&!M[Ft.field]&&(M[Ft.field]=Ft)}return M},o.prototype.getScaleByField=function(e,a){var M=a||this.getScaleKey(e);return this.getRootView().scalePool.getScale(M)},o.prototype.getOptions=function(){return this.options},o.prototype.getData=function(){return this.filteredData},o.prototype.getLayer=function(e){return e===y.BG?this.backgroundGroup:e===y.MID?this.middleGroup:e===y.FORE?this.foregroundGroup:this.foregroundGroup},o.prototype.isPointInPlot=function(e){return un(this.getCoordinate(),e)},o.prototype.getLegendAttributes=function(){return Object(i.flatten)(this.geometries.map(function(e){return e.getGroupAttributes()}))},o.prototype.getGroupScales=function(){var e=this.geometries.map(function(a){return a.getGroupScales()});return Oe(Object(i.flatten)(e))},o.prototype.getCanvas=function(){return this.getRootView().canvas},o.prototype.getRootView=function(){for(var e=this;;){if(e.parent){e=e.parent;continue}break}return e},o.prototype.getXY=function(e){var a=this.getCoordinate(),M=this.getScalesByDim("x"),N=this.getScalesByDim("y"),at,Ct;if(Object(i.each)(e,function(Ft,ne){M[ne]&&(at=M[ne].scale(Ft)),N[ne]&&(Ct=N[ne].scale(Ft))}),!Object(i.isNil)(at)&&!Object(i.isNil)(Ct))return a.convert({x:at,y:Ct})},o.prototype.getController=function(e){return Object(i.find)(this.controllers,function(a){return a.name===e})},o.prototype.showTooltip=function(e){var a=this.getController("tooltip");return a&&a.showTooltip(e),this},o.prototype.hideTooltip=function(){var e=this.getController("tooltip");return e&&e.hideTooltip(),this},o.prototype.lockTooltip=function(){var e=this.getController("tooltip");return e&&e.lockTooltip(),this},o.prototype.unlockTooltip=function(){var e=this.getController("tooltip");return e&&e.unlockTooltip(),this},o.prototype.isTooltipLocked=function(){var e=this.getController("tooltip");return e&&e.isTooltipLocked()},o.prototype.getTooltipItems=function(e){var a=this.getController("tooltip");return a?a.getTooltipItems(e):[]},o.prototype.getSnapRecords=function(e){for(var a=this.geometries,M=[],N=0,at=a.length;N<at;N++){var Ct=a[N],Ft=Ct.dataArray;Ct.sort(Ft);for(var ne=void 0,ge=0,be=Ft.length;ge<be;ge++){var Ae=Ft[ge];ne=Ui(e,Ae,Ct),ne&&M.push(ne)}}for(var Xe=this.views,N=0,at=Xe.length;N<at;N++){var fn=Xe[N],En=fn.getSnapRecords(e);M=M.concat(En)}return M},o.prototype.getComponents=function(){for(var e=[],a=this.controllers,M=0,N=a.length;M<N;M++){var at=a[M];e=e.concat(at.getComponents())}return e},o.prototype.filterData=function(e){var a=this.options.filters;return Object(i.size)(a)===0?e:Object(i.filter)(e,function(M,N){var at=Object.keys(a);return at.every(function(Ct){var Ft=a[Ct];return Ft(M[Ct],M,N)})})},o.prototype.filterFieldData=function(e,a){var M=this.options.filters,N=Object(i.get)(M,e);return Object(i.isUndefined)(N)?a:a.filter(function(at,Ct){return N(at[e],at,Ct)})},o.prototype.adjustCoordinate=function(){var e=this.getCoordinate(),a=e.start,M=e.end,N=this.coordinateBBox.bl,at=this.coordinateBBox.tr;if(Object(i.isEqual)(a,N)&&Object(i.isEqual)(M,at)){this.isCoordinateChanged=!1;return}this.isCoordinateChanged=!0,this.coordinateInstance=this.coordinateController.adjust(N,at)},o.prototype.paint=function(e){this.renderDataRecursive(e),this.syncScale(),this.emit(p.BEFORE_PAINT),this.renderPaddingRecursive(e),this.renderLayoutRecursive(e),this.renderBackgroundStyleShape(),this.renderPaintRecursive(e),this.emit(p.AFTER_PAINT),this.isDataChanged=!1},o.prototype.renderBackgroundStyleShape=function(){if(!this.parent){var e=Object(i.get)(this.themeObject,"background");if(e){this.backgroundStyleRectShape||(this.backgroundStyleRectShape=this.backgroundGroup.addShape("rect",{attrs:{},zIndex:-1,capture:!1}),this.backgroundStyleRectShape.toBack());var a=this.viewBBox,M=a.x,N=a.y,at=a.width,Ct=a.height;this.backgroundStyleRectShape.attr({fill:e,x:M,y:N,width:at,height:Ct})}else this.backgroundStyleRectShape&&(this.backgroundStyleRectShape.remove(!0),this.backgroundStyleRectShape=void 0)}},o.prototype.renderPaddingRecursive=function(e){this.calculateViewBBox(),this.adjustCoordinate(),this.initComponents(e),this.autoPadding=Na(this).shrink(Di(this.appendPadding)),this.coordinateBBox=this.viewBBox.shrink(this.autoPadding.getPadding()),this.adjustCoordinate();for(var a=this.views,M=0,N=a.length;M<N;M++){var at=a[M];at.renderPaddingRecursive(e)}},o.prototype.renderLayoutRecursive=function(e){var a=this.syncViewPadding===!0?Fa:Object(i.isFunction)(this.syncViewPadding)?this.syncViewPadding:void 0;a&&(a(this,this.views,bo),this.views.forEach(function(Ft){Ft.coordinateBBox=Ft.viewBBox.shrink(Ft.autoPadding.getPadding()),Ft.adjustCoordinate()})),this.doLayout();for(var M=this.views,N=0,at=M.length;N<at;N++){var Ct=M[N];Ct.renderLayoutRecursive(e)}},o.prototype.renderPaintRecursive=function(e){var a=this.middleGroup;if(this.limitInPlot){var M=jr(this.coordinateInstance),N=M.type,at=M.attrs;a.setClip({type:N,attrs:at})}else a.setClip(void 0);this.paintGeometries(e),this.renderComponents(e);for(var Ct=this.views,Ft=0,ne=Ct.length;Ft<ne;Ft++){var ge=Ct[Ft];ge.renderPaintRecursive(e)}},o.prototype.createScale=function(e,a,M,N){var at=Object(i.get)(this.options.scales,[e]),Ct=Object(H.a)(Object(H.a)({},at),M);return this.parent?this.parent.createScale(e,a,Ct,N):this.scalePool.createScale(e,a,Ct,N)},o.prototype.renderDataRecursive=function(e){this.doFilterData(),this.createCoordinate(),this.initGeometries(e),this.renderFacet(e);for(var a=this.views,M=0,N=a.length;M<N;M++){var at=a[M];at.renderDataRecursive(e)}},o.prototype.calculateViewBBox=function(){var e,a,M,N;if(this.parent){var at=this.parent.coordinateBBox;e=at.x,a=at.y,M=at.width,N=at.height}else e=0,a=0,M=this.canvas.get("width"),N=this.canvas.get("height");var Ct=this.region,Ft=Ct.start,ne=Ct.end,ge=new Ze(e+M*Ft.x,a+N*Ft.y,M*(ne.x-Ft.x),N*(ne.y-Ft.y));(!this.viewBBox||!this.viewBBox.isEqual(ge))&&(this.viewBBox=new Ze(e+M*Ft.x,a+N*Ft.y,M*(ne.x-Ft.x),N*(ne.y-Ft.y))),this.coordinateBBox=this.viewBBox},o.prototype.initEvents=function(){this.foregroundGroup.on("*",this.onDelegateEvents),this.middleGroup.on("*",this.onDelegateEvents),this.backgroundGroup.on("*",this.onDelegateEvents),this.canvas.on("*",this.onCanvasEvent)},o.prototype.initComponentController=function(){for(var e=this.usedControllers,a=0,M=e.length;a<M;a++){var N=e[a],at=Ei(N);at&&this.controllers.push(new at(this))}},o.prototype.createViewEvent=function(e){var a=e.shape,M=e.name,N=a?a.get("origin"):null,at=new $i(this,e,N);return at.type=M,at},o.prototype.doPlotEvent=function(e){var a=e.type,M=e.x,N=e.y,at={x:M,y:N},Ct=["mousedown","mouseup","mousemove","mouseleave","mousewheel","touchstart","touchmove","touchend","touchcancel","click","dblclick","contextmenu"];if(Ct.includes(a)){var Ft=this.isPointInPlot(at);if(Ft){var ne="plot:"+a;e.type=ne,this.emit(ne,e),(a==="mouseleave"||a==="touchend")&&(this.isPreMouseInPlot=!1)}a==="mousemove"||a==="touchmove"?(this.isPreMouseInPlot&&!Ft?(a==="mousemove"&&(e.type=c.MOUSE_LEAVE,this.emit(c.MOUSE_LEAVE,e)),e.type=c.LEAVE,this.emit(c.LEAVE,e)):!this.isPreMouseInPlot&&Ft&&(a==="mousemove"&&(e.type=c.MOUSE_ENTER,this.emit(c.MOUSE_ENTER,e)),e.type=c.ENTER,this.emit(c.ENTER,e)),this.isPreMouseInPlot=Ft):(a==="mouseleave"||a==="touchend")&&this.isPreMouseInPlot&&(a==="mouseleave"&&(e.type=c.MOUSE_LEAVE,this.emit(c.MOUSE_LEAVE,e)),e.type=c.LEAVE,this.emit(c.LEAVE,e),this.isPreMouseInPlot=!1)}},o.prototype.doFilterData=function(){var e=this.options.data;this.filteredData=this.filterData(e)},o.prototype.initGeometries=function(e){this.createOrUpdateScales();for(var a=this.getCoordinate(),M=Object(i.get)(this.options,"scales",{}),N=this.geometries,at=0,Ct=N.length;at<Ct;at++){var Ft=N[at];Ft.scales=this.getGeometryScales();var ne={coordinate:a,scaleDefs:M,data:this.filteredData,theme:this.themeObject,isDataChanged:this.isDataChanged,isCoordinateChanged:this.isCoordinateChanged};e?Ft.update(ne):Ft.init(ne)}this.adjustScales()},o.prototype.createOrUpdateScales=function(){for(var e=this.getScaleFields(),a=this.getGroupedFields(),M=this.getOptions(),N=M.data,at=M.scales,Ct=at===void 0?{}:at,Ft=this.filteredData,ne=0,ge=e.length;ne<ge;ne++){var be=e[ne],Ae=Ct[be],Xe=this.getScaleKey(be);this.createScale(be,a.includes(be)?N:Ft,Ae,Xe),this.createdScaleKeys.set(Xe,!0)}},o.prototype.syncScale=function(){this.getRootView().scalePool.sync(this.getCoordinate(),this.theme)},o.prototype.getGeometryScales=function(){for(var e=this.getScaleFields(),a={},M=0;M<e.length;M++){var N=e[M];a[N]=this.getScaleByField(N)}return a},o.prototype.getScaleFields=function(){for(var e=[],a={},M=this.geometries,N=0;N<M.length;N++){var at=M[N],Ct=at.getScaleFields();Oe(Ct,e,a)}return e},o.prototype.getGroupedFields=function(){for(var e=[],a={},M=this.geometries,N=0;N<M.length;N++){var at=M[N],Ct=at.getGroupFields();Oe(Ct,e,a)}return e},o.prototype.adjustScales=function(){this.adjustCategoryScaleRange()},o.prototype.adjustCategoryScaleRange=function(){var e=this,a=Object(H.d)([this.getXScale()],this.getYScales()).filter(function(at){return!!at}),M=this.getCoordinate(),N=this.options.scales;Object(i.each)(a,function(at){var Ct=at.field,Ft=at.values,ne=at.isCategory,ge=at.isIdentity;(ne||ge)&&Ft&&!Object(i.get)(N,[Ct,"range"])&&(at.range=Gr(at,M,e.theme))})},o.prototype.initComponents=function(e){for(var a=this.controllers,M=0;M<a.length;M++){var N=a[M];e?N.update():(N.clear(),N.render())}},o.prototype.doLayout=function(){this.layoutFunc(this)},o.prototype.createCoordinate=function(){var e=this.coordinateBBox.bl,a=this.coordinateBBox.tr;this.coordinateInstance=this.coordinateController.create(e,a)},o.prototype.paintGeometries=function(e){for(var a=this.options.animate,M=this.getCoordinate(),N={x:this.viewBBox.x,y:this.viewBBox.y,minX:this.viewBBox.minX,minY:this.viewBBox.minY,maxX:this.viewBBox.maxX,maxY:this.viewBBox.maxY,width:this.viewBBox.width,height:this.viewBBox.height},at=this.geometries,Ct=0;Ct<at.length;Ct++){var Ft=at[Ct];Ft.coordinate=M,Ft.canvasRegion=N,a||Ft.animate(!1),Ft.paint(e)}},o.prototype.renderComponents=function(e){for(var a=0;a<this.getComponents().length;a++){var M=this.getComponents()[a];M.component.render()}},o.prototype.renderFacet=function(e){this.facetInstance&&(e?this.facetInstance.update():(this.facetInstance.clear(),this.facetInstance.init(),this.facetInstance.render()))},o.prototype.initOptions=function(){var e=this,a=this.options,M=a.geometries,N=M===void 0?[]:M,at=a.interactions,Ct=at===void 0?[]:at,Ft=a.views,ne=Ft===void 0?[]:Ft,ge=a.annotations,be=ge===void 0?[]:ge,Ae=a.coordinate,Xe=a.events,fn=a.facets;this.coordinateController?Ae&&this.coordinateController.update(Ae):this.coordinateController=new ea(Ae);for(var En=0;En<N.length;En++){var nr=N[En];this.createGeometry(nr)}for(var ar=0;ar<Ct.length;ar++){var Er=Ct[ar],Mr=Er.type,qr=Er.cfg;this.interaction(Mr,qr)}for(var oi=0;oi<ne.length;oi++){var ai=ne[oi];this.createView(ai)}for(var aa=this.getController("annotation"),Ji=0;Ji<be.length;Ji++){var _i=be[Ji];aa.annotation(_i)}Xe&&Object(i.each)(Xe,function(Ca,io){e.on(io,Ca)}),fn&&Object(i.each)(fn,function(Ca){var io=Ca.type,ao=Object(H.c)(Ca,["type"]);e.facet(io,ao)})},o.prototype.createGeometry=function(e){var a=e.type,M=e.cfg,N=M===void 0?{}:M;if(this[a]){var at=this[a](N);Object(i.each)(e,function(Ct,Ft){Object(i.isFunction)(at[Ft])&&at[Ft](Ct)})}},o.prototype.getScaleKey=function(e){return this.id+"-"+e},o}(ft);function Ea(h,o){ro.prototype[h.toLowerCase()]=function(e){e===void 0&&(e={});var a=Object(H.a)({container:this.middleGroup.addGroup(),labelsContainer:this.foregroundGroup.addGroup()},e),M=new o(a);return this.geometries.push(M),M}}var Eo=ro,Ua=function(h){Object(H.b)(o,h);function o(e){var a=this,M=e.container,N=e.width,at=e.height,Ct=e.autoFit,Ft=Ct===void 0?!1:Ct,ne=e.padding,ge=e.appendPadding,be=e.renderer,Ae=be===void 0?"canvas":be,Xe=e.pixelRatio,fn=e.localRefresh,En=fn===void 0?!0:fn,nr=e.visible,ar=nr===void 0?!0:nr,Er=e.supportCSSTransform,Mr=Er===void 0?!1:Er,qr=e.defaultInteractions,oi=qr===void 0?["tooltip","legend-filter","legend-active","continuous-filter","ellipsis-text"]:qr,ai=e.options,aa=e.limitInPlot,Ji=e.theme,_i=e.syncViewPadding,Ca=Object(i.isString)(M)?document.getElementById(M):M,io=Object(f.b)('<div style="position:relative;"></div>');Ca.appendChild(io);var ao=P(Ca,Ft,N,at),co=E(Ae),go=new co.Canvas(Object(H.a)({container:io,pixelRatio:Xe,localRefresh:En,supportCSSTransform:Mr},ao));return a=h.call(this,{parent:null,canvas:go,backgroundGroup:go.addGroup({zIndex:u.BG}),middleGroup:go.addGroup({zIndex:u.MID}),foregroundGroup:go.addGroup({zIndex:u.FORE}),padding:ne,appendPadding:ge,visible:ar,options:ai,limitInPlot:aa,theme:Ji,syncViewPadding:_i})||this,a.onResize=Object(i.debounce)(function(){a.forceFit()},300),a.ele=Ca,a.canvas=go,a.width=ao.width,a.height=ao.height,a.autoFit=Ft,a.localRefresh=En,a.renderer=Ae,a.wrapperElement=io,a.updateCanvasStyle(),a.bindAutoFit(),a.initDefaultInteractions(oi),a}return o.prototype.initDefaultInteractions=function(e){var a=this;Object(i.each)(e,function(M){a.interaction(M)})},o.prototype.changeSize=function(e,a){return this.width===e&&this.height===a?this:(this.emit(p.BEFORE_CHANGE_SIZE),this.width=e,this.height=a,this.canvas.changeSize(e,a),this.render(!0),this.emit(p.AFTER_CHANGE_SIZE),this)},o.prototype.destroy=function(){h.prototype.destroy.call(this),this.unbindAutoFit(),this.canvas.destroy(),W(this.wrapperElement),this.wrapperElement=null},o.prototype.changeVisible=function(e){return h.prototype.changeVisible.call(this,e),this.wrapperElement.style.display=e?"":"none",this},o.prototype.forceFit=function(){if(!this.destroyed){var e=P(this.ele,!0,this.width,this.height),a=e.width,M=e.height;this.changeSize(a,M)}},o.prototype.updateCanvasStyle=function(){Object(f.e)(this.canvas.get("el"),{display:"inline-block",verticalAlign:"middle"})},o.prototype.bindAutoFit=function(){this.autoFit&&window.addEventListener("resize",this.onResize)},o.prototype.unbindAutoFit=function(){this.autoFit&&window.removeEventListener("resize",this.onResize)},o}(Eo),Va=Ua,ja=function(){function h(o){this.visible=!0,this.components=[],this.view=o}return h.prototype.clear=function(o){Object(i.each)(this.components,function(e){e.component.destroy()}),this.components=[]},h.prototype.destroy=function(){this.clear()},h.prototype.getComponents=function(){return this.components},h.prototype.changeVisible=function(o){this.visible!==o&&(this.components.forEach(function(e){o?e.component.show():e.component.hide()}),this.visible=o)},h}();function to(h){for(var o=[],e=function(N){var at=h[N],Ct=Object(i.find)(o,function(Ft){return Ft.color===at.color&&Ft.name===at.name&&Ft.value===at.value&&Ft.title===at.title});Ct||o.push(at)},a=0;a<h.length;a++)e(a);return o}var fo=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.isLocked=!1,e}return Object.defineProperty(o.prototype,"name",{get:function(){return"tooltip"},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.isVisible=function(){var e=this.view.getOptions().tooltip;return e!==!1},o.prototype.render=function(){},o.prototype.showTooltip=function(e){if(this.point=e,!!this.isVisible()){var a=this.view,M=this.getTooltipItems(e);if(!M.length){this.hideTooltip();return}var N=this.getTitle(M),at={x:M[0].x,y:M[0].y};a.emit("tooltip:show",$i.fromData(a,"tooltip:show",Object(H.a)({items:M,title:N},e)));var Ct=this.getTooltipCfg(),Ft=Ct.follow,ne=Ct.showMarkers,ge=Ct.showCrosshairs,be=Ct.showContent,Ae=Ct.marker,Xe=this.items,fn=this.title;if(!Object(i.isEqual)(fn,N)||!Object(i.isEqual)(Xe,M)?(a.emit("tooltip:change",$i.fromData(a,"tooltip:change",Object(H.a)({items:M,title:N},e))),be&&(this.tooltip||this.renderTooltip(),this.tooltip.update(Object(i.mix)({},Ct,{items:this.getItemsAfterProcess(M),title:N},Ft?e:{})),this.tooltip.show()),ne&&this.renderTooltipMarkers(M,Ae)):(this.tooltip&&Ft&&(this.tooltip.update(e),this.tooltip.show()),this.tooltipMarkersGroup&&this.tooltipMarkersGroup.show()),this.items=M,this.title=N,ge){var En=Object(i.get)(Ct,["crosshairs","follow"],!1);this.renderCrosshairs(En?e:at,Ct)}}},o.prototype.hideTooltip=function(){var e=this.getTooltipCfg().follow;if(!e){this.point=null;return}var a=this.tooltipMarkersGroup;a&&a.hide();var M=this.xCrosshair,N=this.yCrosshair;M&&M.hide(),N&&N.hide();var at=this.tooltip;at&&at.hide(),this.view.emit("tooltip:hide",$i.fromData(this.view,"tooltip:hide",{})),this.point=null},o.prototype.lockTooltip=function(){this.isLocked=!0,this.tooltip&&this.tooltip.setCapture(!0)},o.prototype.unlockTooltip=function(){this.isLocked=!1;var e=this.getTooltipCfg();this.tooltip&&this.tooltip.setCapture(e.capture)},o.prototype.isTooltipLocked=function(){return this.isLocked},o.prototype.clear=function(){var e=this,a=e.tooltip,M=e.xCrosshair,N=e.yCrosshair,at=e.tooltipMarkersGroup;a&&(a.hide(),a.clear()),M&&M.clear(),N&&N.clear(),at&&at.clear(),this.reset()},o.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.xCrosshair&&this.xCrosshair.destroy(),this.yCrosshair&&this.yCrosshair.destroy(),this.guideGroup&&this.guideGroup.remove(!0),this.reset()},o.prototype.reset=function(){this.items=null,this.title=null,this.tooltipMarkersGroup=null,this.tooltipCrosshairsGroup=null,this.xCrosshair=null,this.yCrosshair=null,this.tooltip=null,this.guideGroup=null,this.isLocked=!1,this.point=null},o.prototype.changeVisible=function(e){if(this.visible!==e){var a=this,M=a.tooltip,N=a.tooltipMarkersGroup,at=a.xCrosshair,Ct=a.yCrosshair;e?(M&&M.show(),N&&N.show(),at&&at.show(),Ct&&Ct.show()):(M&&M.hide(),N&&N.hide(),at&&at.hide(),Ct&&Ct.hide()),this.visible=e}},o.prototype.getTooltipItems=function(e){var a=this.findItemsFromView(this.view,e);if(a.length){a=Object(i.flatten)(a);for(var M=0,N=a;M<N.length;M++)for(var at=N[M],Ct=0,Ft=at;Ct<Ft.length;Ct++){var ne=Ft[Ct],ge=ne.mappingData,be=ge.x,Ae=ge.y;ne.x=Object(i.isArray)(be)?be[be.length-1]:be,ne.y=Object(i.isArray)(Ae)?Ae[Ae.length-1]:Ae}var Xe=this.getTooltipCfg().shared;if(Xe===!1&&a.length>1){for(var fn=a[0],En=Math.abs(e.y-fn[0].y),nr=0,ar=a;nr<ar.length;nr++){var Er=ar[nr],Mr=Math.abs(e.y-Er[0].y);Mr<=En&&(fn=Er,En=Mr)}a=[fn]}return to(Object(i.flatten)(a))}return[]},o.prototype.layout=function(){},o.prototype.update=function(){if(this.point&&this.showTooltip(this.point),this.tooltip){var e=this.view.getCanvas();this.tooltip.set("region",{start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}})}},o.prototype.isCursorEntered=function(e){if(this.tooltip){var a=this.tooltip.getContainer(),M=this.tooltip.get("capture");if(a&&M){var N=a.getBoundingClientRect(),at=N.x,Ct=N.y,Ft=N.width,ne=N.height;return new Ze(at,Ct,Ft,ne).isPointIn(e)}}return!1},o.prototype.getTooltipCfg=function(){var e=this.view,a=e.getOptions().tooltip,M=this.processCustomContent(a),N=e.getTheme(),at=Object(i.get)(N,["components","tooltip"],{}),Ct=Object(i.get)(M,"enterable",at.enterable);return Object(i.deepMix)({},at,M,{capture:!!(Ct||this.isLocked)})},o.prototype.processCustomContent=function(e){if(Object(i.isBoolean)(e)||!Object(i.get)(e,"customContent"))return e;var a=e.customContent,M=function(at,Ct){var Ft=a(at,Ct)||"";return Object(i.isString)(Ft)?'<div class="g2-tooltip">'+Ft+"</div>":Ft};return Object(H.a)(Object(H.a)({},e),{customContent:M})},o.prototype.getTitle=function(e){var a=e[0].title||e[0].name;return this.title=a,a},o.prototype.renderTooltip=function(){var e=this.view.getCanvas(),a={start:{x:0,y:0},end:{x:e.get("width"),y:e.get("height")}},M=this.getTooltipCfg(),N=new xa(Object(H.a)(Object(H.a)({parent:e.get("el").parentNode,region:a},M),{visible:!1,crosshairs:null}));N.init(),this.tooltip=N},o.prototype.renderTooltipMarkers=function(e,a){for(var M=this.getTooltipMarkersGroup(),N=0,at=e;N<at.length;N++){var Ct=at[N],Ft=Ct.x,ne=Ct.y,ge=Object(H.a)(Object(H.a)({fill:Ct.color,symbol:"circle",shadowColor:Ct.color},a),{x:Ft,y:ne});M.addShape("marker",{attrs:ge})}},o.prototype.renderCrosshairs=function(e,a){var M=Object(i.get)(a,["crosshairs","type"],"x");M==="x"?(this.yCrosshair&&this.yCrosshair.hide(),this.renderXCrosshairs(e,a)):M==="y"?(this.xCrosshair&&this.xCrosshair.hide(),this.renderYCrosshairs(e,a)):M==="xy"&&(this.renderXCrosshairs(e,a),this.renderYCrosshairs(e,a))},o.prototype.renderXCrosshairs=function(e,a){var M=this.getViewWithGeometry(this.view).getCoordinate();if(!!un(M,e)){var N,at;if(M.isRect)M.isTransposed?(N={x:M.start.x,y:e.y},at={x:M.end.x,y:e.y}):(N={x:e.x,y:M.end.y},at={x:e.x,y:M.start.y});else{var Ct=ur(M,e),Ft=M.getCenter(),ne=M.getRadius();at=Qi(Ft.x,Ft.y,ne,Ct),N=Ft}var ge=Object(i.deepMix)({start:N,end:at,container:this.getTooltipCrosshairsGroup()},Object(i.get)(a,"crosshairs",{}),this.getCrosshairsText("x",e,a));delete ge.type;var be=this.xCrosshair;be?be.update(ge):(be=new pi.Crosshair.Line(ge),be.init()),be.render(),be.show(),this.xCrosshair=be}},o.prototype.renderYCrosshairs=function(e,a){var M=this.getViewWithGeometry(this.view).getCoordinate();if(!!un(M,e)){var N,at;if(M.isRect){var Ct=void 0,Ft=void 0;M.isTransposed?(Ct={x:e.x,y:M.end.y},Ft={x:e.x,y:M.start.y}):(Ct={x:M.start.x,y:e.y},Ft={x:M.end.x,y:e.y}),N={start:Ct,end:Ft},at="Line"}else N={center:M.getCenter(),radius:sn(M,e),startAngle:M.startAngle,endAngle:M.endAngle},at="Circle";N=Object(i.deepMix)({container:this.getTooltipCrosshairsGroup()},N,Object(i.get)(a,"crosshairs",{}),this.getCrosshairsText("y",e,a)),delete N.type;var ne=this.yCrosshair;ne?M.isRect&&ne.get("type")==="circle"||!M.isRect&&ne.get("type")==="line"?(ne=new pi.Crosshair[at](N),ne.init()):ne.update(N):(ne=new pi.Crosshair[at](N),ne.init()),ne.render(),ne.show(),this.yCrosshair=ne}},o.prototype.getCrosshairsText=function(e,a,M){var N=Object(i.get)(M,["crosshairs","text"]),at=Object(i.get)(M,["crosshairs","follow"]),Ct=this.items;if(N){var Ft=this.getViewWithGeometry(this.view),ne=Ct[0],ge=Ft.getXScale(),be=Ft.getYScales()[0],Ae=void 0,Xe=void 0;if(at){var fn=this.view.getCoordinate().invert(a);Ae=ge.invert(fn.x),Xe=be.invert(fn.y)}else Ae=ne.data[ge.field],Xe=ne.data[be.field];var En=e==="x"?Ae:Xe;return Object(i.isFunction)(N)?N=N(e,En,Ct,a):N.content=En,{text:N}}},o.prototype.getGuideGroup=function(){if(!this.guideGroup){var e=this.view.foregroundGroup;this.guideGroup=e.addGroup({name:"tooltipGuide",capture:!1})}return this.guideGroup},o.prototype.getTooltipMarkersGroup=function(){var e=this.tooltipMarkersGroup;return e&&!e.destroyed?(e.clear(),e.show()):(e=this.getGuideGroup().addGroup({name:"tooltipMarkersGroup"}),e.toFront(),this.tooltipMarkersGroup=e),e},o.prototype.getTooltipCrosshairsGroup=function(){var e=this.tooltipCrosshairsGroup;return e||(e=this.getGuideGroup().addGroup({name:"tooltipCrosshairsGroup",capture:!1}),e.toBack(),this.tooltipCrosshairsGroup=e),e},o.prototype.getTooltipItemsByHitShape=function(e,a,M){var N=this.getTooltipCfg().showNil,at=[],Ct=e.container,Ft=Ct.getShape(a.x,a.y);if(Ft&&Ft.get("visible")&&Ft.get("origin")){var ne=Ft.get("origin").mappingData,ge=ra(ne,e,M,N);ge.length&&at.push(ge)}return at},o.prototype.getTooltipItemsByFindData=function(e,a,M){var N=this.getTooltipCfg().showNil,at=[],Ct=e.dataArray;if(!Object(i.isEmpty)(Ct)){e.sort(Ct);for(var Ft=0,ne=Ct;Ft<ne.length;Ft++){var ge=ne[Ft],be=Ui(a,ge,e);if(be){var Ae=e.getElementId(be),Xe=e.elementsMap[Ae];if(e.type==="heatmap"||Xe.visible){var fn=ra(be,e,M,N);fn.length&&at.push(fn)}}}}return at},o.prototype.findItemsFromView=function(e,a){if(e.getOptions().tooltip===!1)return[];for(var M=[],N=e.geometries,at=this.getTooltipCfg(),Ct=at.shared,Ft=at.title,ne=at.reversed,ge=0,be=N;ge<be.length;ge++){var Ae=be[ge];if(Ae.visible&&Ae.tooltipOption!==!1){var Xe=Ae.type,fn=void 0;["point","edge","polygon"].includes(Xe)?fn=this.getTooltipItemsByHitShape(Ae,a,Ft):["area","line","path","heatmap"].includes(Xe)?fn=this.getTooltipItemsByFindData(Ae,a,Ft):Ct!==!1?fn=this.getTooltipItemsByFindData(Ae,a,Ft):fn=this.getTooltipItemsByHitShape(Ae,a,Ft),fn.length&&(ne&&fn.reverse(),M.push(fn))}}for(var En=0,nr=e.views;En<nr.length;En++){var ar=nr[En];M=M.concat(this.findItemsFromView(ar,a))}return M},o.prototype.getViewWithGeometry=function(e){var a=this;return e.geometries.length?e:Object(i.find)(e.views,function(M){return a.getViewWithGeometry(M)})},o.prototype.getItemsAfterProcess=function(e){var a=this.getTooltipCfg().customItems,M=a||function(N){return N};return M(e)},o}(ja),wa=fo,gr={};function Xo(h){return gr[h.toLowerCase()]}function va(h,o){gr[h.toLowerCase()]=o}var Ya={appear:{duration:450,easing:"easeQuadOut"},update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},So={interval:function(o){return{enter:{animation:o.isRect?o.isTransposed?"scale-in-x":"scale-in-y":"fade-in"},update:{animation:o.isPolar&&o.isTransposed?"sector-path-update":null},leave:{animation:"fade-out"}}},line:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},path:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},point:{appear:{animation:"zoom-in"},enter:{animation:"zoom-in"},leave:{animation:"zoom-out"}},area:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},polygon:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},schema:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},edge:{enter:{animation:"fade-in"},leave:{animation:"fade-out"}},label:{appear:{animation:"fade-in",delay:450},enter:{animation:"fade-in"},update:{animation:"position-update"},leave:{animation:"fade-out"}}},No={line:function(){return{animation:"wave-in"}},area:function(){return{animation:"wave-in"}},path:function(){return{animation:"fade-in"}},interval:function(o){var e;return o.isRect?e=o.isTransposed?"grow-in-x":"grow-in-y":(e="grow-in-xy",o.isPolar&&o.isTransposed&&(e="wave-in")),{animation:e}},schema:function(o){var e;return o.isRect?e=o.isTransposed?"grow-in-x":"grow-in-y":e="grow-in-xy",{animation:e}},polygon:function(){return{animation:"fade-in",duration:500}},edge:function(){return{animation:"fade-in"}}};function Gn(h,o){return{delay:Object(i.isFunction)(h.delay)?h.delay(o):h.delay,easing:Object(i.isFunction)(h.easing)?h.easing(o):h.easing,duration:Object(i.isFunction)(h.duration)?h.duration(o):h.duration,callback:h.callback}}function se(h,o,e){var a=So[h];return a&&(Object(i.isFunction)(a)&&(a=a(o)),a=Object(i.deepMix)({},Ya,a),e)?a[e]:a}function Ia(h,o,e){var a=Object(i.get)(h.get("origin"),"data",m),M=o.animation,N=Gn(o,a);if(M){var at=Xo(M);at&&at(h,N,e)}else h.animate(e.toAttrs,N)}function ho(h,o,e,a,M){if(No[e]){var N=No[e](a),at=Xo(Object(i.get)(N,"animation",""));if(at){var Ct=Object(H.a)(Object(H.a)(Object(H.a)({},Ya.appear),N),o);h.stopAnimate(),at(h,Ct,{coordinate:a,minYPoint:M,toAttrs:null})}}}var Xa="element-background",so=function(h){Object(H.b)(o,h);function o(e){var a=h.call(this,e)||this;a.states=[];var M=e.shapeFactory,N=e.container,at=e.offscreenGroup,Ct=e.visible,Ft=Ct===void 0?!0:Ct;return a.shapeFactory=M,a.container=N,a.offscreenGroup=at,a.visible=Ft,a}return o.prototype.draw=function(e,a){a===void 0&&(a=!1),this.model=e,this.data=e.data,this.shapeType=this.getShapeType(e),this.drawShape(e,a),this.visible===!1&&this.changeVisible(!1)},o.prototype.update=function(e){var a=this,M=a.shapeFactory,N=a.shape;if(!!N){this.model=e,this.data=e.data,this.shapeType=this.getShapeType(e),this.setShapeInfo(N,e);var at=this.getOffscreenGroup(),Ct=M.drawShape(this.shapeType,e,at);Ct.cfg.data=this.data,Ct.cfg.origin=e,Ct.cfg.element=this,this.syncShapeStyle(N,Ct,this.getStates(),this.getAnimateCfg("update"))}},o.prototype.destroy=function(){var e=this,a=e.shapeFactory,M=e.shape;if(M){var N=this.getAnimateCfg("leave");N?Ia(M,N,{coordinate:a.coordinate,toAttrs:Object(H.a)({},M.attr())}):M.remove(!0)}this.states=[],this.shapeFactory=void 0,this.container=void 0,this.shape=void 0,this.animate=void 0,this.geometry=void 0,this.labelShape=void 0,this.model=void 0,this.data=void 0,this.offscreenGroup=void 0,this.statesStyle=void 0,h.prototype.destroy.call(this)},o.prototype.changeVisible=function(e){h.prototype.changeVisible.call(this,e),e?(this.shape&&this.shape.show(),this.labelShape&&this.labelShape.forEach(function(a){a.show()})):(this.shape&&this.shape.hide(),this.labelShape&&this.labelShape.forEach(function(a){a.hide()}))},o.prototype.setState=function(e,a){var M=this,N=M.states,at=M.shapeFactory,Ct=M.model,Ft=M.shape,ne=M.shapeType,ge=N.indexOf(e);if(a){if(ge>-1)return;N.push(e),(e==="active"||e==="selected")&&Ft.toFront()}else{if(ge===-1)return;N.splice(ge,1),(e==="active"||e==="selected")&&Ft.toBack()}var be=at.drawShape(ne,Ct,this.getOffscreenGroup());N.length?this.syncShapeStyle(Ft,be,N,null):this.syncShapeStyle(Ft,be,["reset"],null),be.remove(!0);var Ae={state:e,stateStatus:a,element:this,target:this.container};this.container.emit("statechange",Ae),Object(pi.propagationDelegate)(this.shape,"statechange",Ae)},o.prototype.clearStates=function(){var e=this,a=this.states;Object(i.each)(a,function(M){e.setState(M,!1)}),this.states=[]},o.prototype.hasState=function(e){return this.states.includes(e)},o.prototype.getStates=function(){return this.states},o.prototype.getData=function(){return this.data},o.prototype.getModel=function(){return this.model},o.prototype.getBBox=function(){var e=this,a=e.shape,M=e.labelShape,N={x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};return a&&(N=a.getCanvasBBox()),M&&M.forEach(function(at){var Ct=at.getCanvasBBox();N.x=Math.min(Ct.x,N.x),N.y=Math.min(Ct.y,N.y),N.minX=Math.min(Ct.minX,N.minX),N.minY=Math.min(Ct.minY,N.minY),N.maxX=Math.max(Ct.maxX,N.maxX),N.maxY=Math.max(Ct.maxY,N.maxY)}),N.width=N.maxX-N.minX,N.height=N.maxY-N.minY,N},o.prototype.getStatesStyle=function(){if(!this.statesStyle){var e=this,a=e.shapeType,M=e.geometry,N=e.shapeFactory,at=M.stateOption,Ct=N.defaultShapeType,Ft=N.theme[a]||N.theme[Ct];this.statesStyle=Object(i.deepMix)({},Ft,at)}return this.statesStyle},o.prototype.getStateStyle=function(e,a){var M=this.getStatesStyle(),N=Object(i.get)(M,[e,"style"],{}),at=N[a]||N;return Object(i.isFunction)(at)?at(this):at},o.prototype.getAnimateCfg=function(e){var a=this,M=this.animate;if(M){var N=M[e];return N&&Object(H.a)(Object(H.a)({},N),{callback:function(){var Ct;Object(i.isFunction)(N.callback)&&N.callback(),(Ct=a.geometry)===null||Ct===void 0||Ct.emit(b.AFTER_DRAW_ANIMATE)}})}return null},o.prototype.drawShape=function(e,a){var M;a===void 0&&(a=!1);var N=this,at=N.shapeFactory,Ct=N.container,Ft=N.shapeType;if(this.shape=at.drawShape(Ft,e,Ct),this.shape){this.setShapeInfo(this.shape,e);var ne=this.shape.cfg.name;ne?Object(i.isString)(ne)&&(this.shape.cfg.name=["element",ne]):this.shape.cfg.name=["element",this.shapeFactory.geometryType];var ge=a?"enter":"appear",be=this.getAnimateCfg(ge);be&&((M=this.geometry)===null||M===void 0||M.emit(b.BEFORE_DRAW_ANIMATE),Ia(this.shape,be,{coordinate:at.coordinate,toAttrs:Object(H.a)({},this.shape.attr())}))}},o.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var e=this.container.getGroupBase();this.offscreenGroup=new e({})}return this.offscreenGroup},o.prototype.setShapeInfo=function(e,a){var M=this;if(e.cfg.origin=a,e.cfg.element=this,e.isGroup()){var N=e.get("children");N.forEach(function(at){M.setShapeInfo(at,a)})}},o.prototype.syncShapeStyle=function(e,a,M,N,at){var Ct=this,Ft;if(M===void 0&&(M=[]),at===void 0&&(at=0),!(!e||!a)){var ne=e.get("clipShape"),ge=a.get("clipShape");if(this.syncShapeStyle(ne,ge,M,N),e.isGroup())for(var be=e.get("children"),Ae=a.get("children"),Xe=0;Xe<be.length;Xe++)this.syncShapeStyle(be[Xe],Ae[Xe],M,N,at+Xe);else{if(!Object(i.isEmpty)(M)&&!Object(i.isEqual)(M,["reset"])){var fn=e.get("name");Object(i.isArray)(fn)&&(fn=fn[1]),Object(i.each)(M,function(nr){if(a.get("name")!==Xa){var ar=Ct.getStateStyle(nr,fn||at);a.attr(ar)}})}var En=eo(e,a);this.animate?N?((Ft=this.geometry)===null||Ft===void 0||Ft.emit(b.BEFORE_DRAW_ANIMATE),Ia(e,N,{coordinate:this.shapeFactory.coordinate,toAttrs:En,shapeModel:this.model})):Object(i.isEmpty)(M)?(e.stopAnimate(),e.animate(En,{duration:300})):e.attr(En):e.attr(En)}}},o.prototype.getShapeType=function(e){var a=Object(i.get)(e,"shape");return Object(i.isArray)(a)?a[0]:a},o}(ft),Lo=so,zo={},Jo={};function uo(h){return zo[h.toLowerCase()]}function Rn(h,o){zo[h.toLowerCase()]=o}function qo(h){return Jo[h.toLowerCase()]}function wo(h,o){Jo[h.toLowerCase()]=o}var Ho={coordinate:null,defaultShapeType:null,theme:null,getShapePoints:function(o,e){var a=this.getShape(o);return a.getPoints?a.getPoints(e):this.getDefaultPoints(e)},getShape:function(o){var e=this[o]||this[this.defaultShapeType];return e.coordinate=this.coordinate,e},getDefaultPoints:function(){return[]},getDefaultStyle:function(o){return Object(i.get)(o,[this.defaultShapeType,"default","style"],{})},getMarker:function(o,e){var a=this.getShape(o);if(!a.getMarker){var M=this.defaultShapeType;a=this.getShape(M)}var N=this.theme,at=Object(i.get)(N,[o,"default"],{}),Ct=a.getMarker(e);return Object(i.deepMix)({},at,Ct)},drawShape:function(o,e,a){var M=this.getShape(o);return M.draw(e,a)}},ss={coordinate:null,parsePath:function(o){var e=this.coordinate,a=Object(L.c)(o);return e.isPolar?a=je(e,a):a=$e(e,a),a},parsePoint:function(o){var e=this.coordinate;return e.convert(o)},parsePoints:function(o){var e=this.coordinate;return o.map(function(a){return e.convert(a)})},draw:function(o,e){}},ts={};function mo(h,o){var e=Object(i.upperFirst)(h),a=Object(H.a)(Object(H.a)(Object(H.a)({},Ho),o),{geometryType:h});return ts[e]=a,a}function ia(h,o,e){var a=Object(i.upperFirst)(h),M=ts[a],N=Object(H.a)(Object(H.a)({},ss),e);return M[o]=N,N}function Bo(h){var o=Object(i.upperFirst)(h);return ts[o]}function Io(h,o,e){if(e===void 0&&(e={}),!o)return[h];var a=Object(i.groupToMap)(h,o),M=[];if(o.length===1&&e[o[0]])for(var N=e[o[0]],at=0,Ct=N;at<Ct.length;at++){var Ft=Ct[at],ne=a["_"+Ft];ne&&M.push(ne)}else for(var ge in a)if(a.hasOwnProperty(ge)){var be=a[ge];M.push(be)}return M}function Qa(h,o){return Object(i.some)(["color","shape","size","x","y","isInCircle","data","style","defaultStyle","points","mappingData"],function(e){return!Object(i.isEqual)(h[e],o[e])})}function yo(h){return Object(i.isArray)(h)?h:h.split("*")}function Co(h,o){var e=[];return Object(i.each)(o,function(a,M){var N=M.split(" ")[0];N===h&&e.push(a)}),e}var Do=function(h){Object(H.b)(o,h);function o(e){var a=h.call(this,e)||this;a.type="base",a.attributes={},a.elements=[],a.elementsMap={},a.animateOption=!0,a.attributeOption={},a.lastElementsMap={},a.generatePoints=!1,a.beforeMappingData=null,a.adjusts={},a.idFields=[],a.hasSorted=!1,a.isCoordinateChanged=!1;var M=e.container,N=e.labelsContainer,at=e.coordinate,Ct=e.data,Ft=e.sortable,ne=Ft===void 0?!1:Ft,ge=e.visible,be=ge===void 0?!0:ge,Ae=e.theme,Xe=e.scales,fn=Xe===void 0?{}:Xe,En=e.scaleDefs,nr=En===void 0?{}:En,ar=e.intervalPadding,Er=e.dodgePadding,Mr=e.maxColumnWidth,qr=e.minColumnWidth,oi=e.columnWidthRatio,ai=e.roseWidthRatio,aa=e.multiplePieWidthRatio,Ji=e.zIndexReversed;return a.container=M,a.labelsContainer=N,a.coordinate=at,a.data=Ct,a.sortable=ne,a.visible=be,a.userTheme=Ae,a.scales=fn,a.scaleDefs=nr,a.intervalPadding=ar,a.dodgePadding=Er,a.maxColumnWidth=Mr,a.minColumnWidth=qr,a.columnWidthRatio=oi,a.roseWidthRatio=ai,a.multiplePieWidthRatio=aa,a.zIndexReversed=Ji,a}return o.prototype.position=function(e){var a=e;Object(i.isPlainObject)(e)||(a={fields:yo(e)});var M=Object(i.get)(a,"fields");return M.length===1&&(M.unshift("1"),Object(i.set)(a,"fields",M)),Object(i.set)(this.attributeOption,"position",a),this},o.prototype.color=function(e,a){return this.createAttrOption("color",e,a),this},o.prototype.shape=function(e,a){return this.createAttrOption("shape",e,a),this},o.prototype.size=function(e,a){return this.createAttrOption("size",e,a),this},o.prototype.adjust=function(e){var a=e;return(Object(i.isString)(e)||Object(i.isPlainObject)(e))&&(a=[e]),Object(i.each)(a,function(M,N){Object(i.isObject)(M)||(a[N]={type:M})}),this.adjustOption=a,this},o.prototype.style=function(e,a){if(Object(i.isString)(e)){var M=yo(e);this.styleOption={fields:M,callback:a}}else{var N=e,M=N.fields,at=N.callback,Ct=N.cfg;M||at||Ct?this.styleOption=e:this.styleOption={cfg:e}}return this},o.prototype.tooltip=function(e,a){if(Object(i.isString)(e)){var M=yo(e);this.tooltipOption={fields:M,callback:a}}else this.tooltipOption=e;return this},o.prototype.animate=function(e){return this.animateOption=e,this},o.prototype.label=function(e,a,M){if(Object(i.isString)(e)){var N={},at=yo(e);N.fields=at,Object(i.isFunction)(a)?N.callback=a:Object(i.isPlainObject)(a)&&(N.cfg=a),M&&(N.cfg=M),this.labelOption=N}else this.labelOption=e;return this},o.prototype.state=function(e){return this.stateOption=e,this},o.prototype.customInfo=function(e){return this.customOption=e,this},o.prototype.init=function(e){e===void 0&&(e={}),this.setCfg(e),this.initAttributes(),this.processData(this.data),this.adjustScale()},o.prototype.update=function(e){e===void 0&&(e={});var a=e.data,M=e.isDataChanged,N=e.isCoordinateChanged,at=this,Ct=at.attributeOption,Ft=at.lastAttributeOption;Object(i.isEqual)(Ct,Ft)?a&&(M||!Object(i.isEqual)(a,this.data))?(this.setCfg(e),this.initAttributes(),this.processData(a)):this.setCfg(e):this.init(e),this.adjustScale(),this.isCoordinateChanged=N},o.prototype.paint=function(e){var a=this;e===void 0&&(e=!1),this.animateOption&&(this.animateOption=Object(i.deepMix)({},se(this.type,this.coordinate),this.animateOption)),this.defaultSize=void 0,this.elements=[],this.elementsMap={};var M=this.getOffscreenGroup();M.clear();for(var N=this.beforeMappingData,at=this.beforeMapping(N),Ct=[],Ft=0,ne=at.length;Ft<ne;Ft++){var ge=at[Ft],be=this.mapping(ge);Ct.push(be),this.createElements(be,Ft,e)}if(this.canDoGroupAnimation(e)){var Ae=this.container,Xe=this.type,fn=this.coordinate,En=Object(i.get)(this.animateOption,"appear"),nr=this.getYScale(),ar=fn.convert({x:0,y:nr.scale(this.getYMinValue())});ho(Ae,En,Xe,fn,ar)}this.labelOption&&this.renderLabels(Object(i.flatten)(Ct),e),this.dataArray=Ct,Object(i.each)(this.lastElementsMap,function(Er){Er.animate=a.animateOption,Er.destroy()}),this.lastElementsMap=this.elementsMap,this.lastAttributeOption=Object(H.a)({},this.attributeOption),this.visible===!1&&this.changeVisible(!1)},o.prototype.clear=function(){var e=this,a=e.container,M=e.geometryLabel,N=e.offscreenGroup;a&&a.clear(),M&&M.clear(),N&&N.clear(),this.scaleDefs=void 0,this.attributes={},this.scales={},this.elementsMap={},this.lastElementsMap={},this.elements=[],this.adjusts={},this.dataArray=null,this.beforeMappingData=null,this.lastAttributeOption=void 0,this.defaultSize=void 0,this.idFields=[],this.groupScales=void 0,this.hasSorted=!1,this.isCoordinateChanged=!1},o.prototype.destroy=function(){this.clear();var e=this.container;e.remove(!0),this.offscreenGroup&&(this.offscreenGroup.remove(!0),this.offscreenGroup=null),this.geometryLabel&&(this.geometryLabel.destroy(),this.geometryLabel=null),this.theme=void 0,this.shapeFactory=void 0,h.prototype.destroy.call(this)},o.prototype.getGroupScales=function(){return this.groupScales},o.prototype.getAttribute=function(e){return this.attributes[e]},o.prototype.getXScale=function(){return this.getAttribute("position").scales[0]},o.prototype.getYScale=function(){return this.getAttribute("position").scales[1]},o.prototype.getGroupAttributes=function(){var e=[];return Object(i.each)(this.attributes,function(a){I.includes(a.type)&&e.push(a)}),e},o.prototype.getDefaultValue=function(e){var a,M=this.getAttribute(e);return M&&Object(i.isEmpty)(M.scales)&&(a=M.values[0]),a},o.prototype.getAttributeValues=function(e,a){for(var M=[],N=e.scales,at=0,Ct=N.length;at<Ct;at++){var Ft=N[at],ne=Ft.field;Ft.isIdentity?M.push(Ft.values):M.push(a[ne])}return e.mapping.apply(e,M)},o.prototype.getAdjust=function(e){return this.adjusts[e]},o.prototype.getShapeMarker=function(e,a){var M=this.getShapeFactory();return M.getMarker(e,a)},o.prototype.getElementsBy=function(e){return this.elements.filter(function(a){return e(a)})},o.prototype.getElementId=function(e){e=Object(i.isArray)(e)?e[0]:e;var a=e[m];if(this.idFields.length){for(var M=a[this.idFields[0]],N=1;N<this.idFields.length;N++)M+="-"+a[this.idFields[N]];return M}var at=this.type,Ct=this.getXScale(),Ft=this.getYScale(),ne=Ct.field||"x",ge=Ft.field||"y",be=a[ge],Ae;Ct.type==="identity"?Ae=Ct.values[0]:Ae=a[ne];var Xe;at==="interval"||at==="schema"?Xe=""+Ae:at==="line"||at==="area"||at==="path"?Xe=at:Xe=Ae+"-"+be;for(var fn=this.groupScales,N=0,En=fn.length;N<En;N++){var nr=fn[N],ar=nr.field;Xe=Xe+"-"+a[ar]}var Er=this.getAdjust("dodge");if(Er){var Mr=Er.dodgeBy;Mr&&(Xe=Xe+"-"+a[Mr])}return this.getAdjust("jitter")&&(Xe=Xe+"-"+e.x+"-"+e.y),Xe},o.prototype.getScaleFields=function(){var e=[],a={},M=this,N=M.attributeOption,at=M.labelOption,Ct=M.tooltipOption;for(var Ft in N)if(N.hasOwnProperty(Ft)){var ne=N[Ft];ne.fields?Oe(ne.fields,e,a):ne.values&&Oe(ne.values,e,a)}return at&&at.fields&&Oe(at.fields,e,a),Object(i.isObject)(Ct)&&Ct.fields&&Oe(Ct.fields,e,a),e},o.prototype.changeVisible=function(e){h.prototype.changeVisible.call(this,e);for(var a=this.elements,M=0,N=a.length;M<N;M++){var at=a[M];at.changeVisible(e)}e?(this.container&&this.container.show(),this.labelsContainer&&this.labelsContainer.show()):(this.container&&this.container.hide(),this.labelsContainer&&this.labelsContainer.hide())},o.prototype.getGroupFields=function(){for(var e=[],a={},M=0,N=I.length;M<N;M++){var at=I[M],Ct=this.attributeOption[at];Ct&&Ct.fields&&Oe(Ct.fields,e,a)}return e},o.prototype.getXYFields=function(){var e=this.attributeOption.position.fields,a=e[0],M=e[1];return[a,M]},o.prototype.getShapes=function(){return this.elements.map(function(e){return e.shape})},o.prototype.getOffscreenGroup=function(){if(!this.offscreenGroup){var e=this.container.getGroupBase();this.offscreenGroup=new e({})}return this.offscreenGroup},o.prototype.sort=function(e){if(!this.hasSorted)for(var a=this.getXScale(),M=a.field,N=0;N<e.length;N++){var at=e[N];at.sort(function(Ct,Ft){return a.translate(Ct[m][M])-a.translate(Ft[m][M])})}this.hasSorted=!0},o.prototype.adjustScale=function(){var e=this.getYScale();e&&this.getAdjust("stack")&&this.updateStackRange(e,this.beforeMappingData)},o.prototype.getShapeFactory=function(){var e=this.shapeType;if(!!Bo(e))return this.shapeFactory||(this.shapeFactory=Object(i.clone)(Bo(e))),this.shapeFactory.coordinate=this.coordinate,this.shapeFactory.theme=this.theme.geometries[e]||{},this.shapeFactory},o.prototype.createShapePointsCfg=function(e){var a=this.getXScale(),M=this.getYScale(),N=this.normalizeValues(e[a.field],a),at;return M?at=this.normalizeValues(e[M.field],M):at=e.y?e.y:.1,{x:N,y:at,y0:M?M.scale(this.getYMinValue()):void 0}},o.prototype.createElement=function(e,a){a===void 0&&(a=!1);var M=this.container,N=this.getDrawCfg(e),at=this.getShapeFactory(),Ct=new Lo({shapeFactory:at,container:M,offscreenGroup:this.getOffscreenGroup()});return Ct.animate=this.animateOption,Ct.geometry=this,Ct.draw(N,a),Ct},o.prototype.getDrawCfg=function(e){var a=e[m],M={mappingData:e,data:a,x:e.x,y:e.y,color:e.color,size:e.size,isInCircle:this.coordinate.isPolar,customInfo:this.customOption},N=e.shape;!N&&this.getShapeFactory()&&(N=this.getShapeFactory().defaultShapeType),M.shape=N;var at=this.theme.geometries[this.shapeType];M.defaultStyle=Object(i.get)(at,[N,"default"],{}).style,!M.defaultStyle&&this.getShapeFactory()&&(M.defaultStyle=this.getShapeFactory().getDefaultStyle(at));var Ct=this.styleOption;return Ct&&(M.style=this.getStyleCfg(Ct,a)),this.generatePoints&&(M.points=e.points,M.nextPoints=e.nextPoints),M},o.prototype.createElements=function(e,a,M){M===void 0&&(M=!1);for(var N=this,at=N.lastElementsMap,Ct=N.elementsMap,Ft=N.elements,ne=0,ge=e.length;ne<ge;ne++){var be=e[ne],Ae=this.getElementId(be);Ct[Ae]&&(Ae=Ae+"-"+a+"-"+ne);var Xe=at[Ae];if(!Xe)Xe=this.createElement(be,M);else{var fn=this.getDrawCfg(be),En=Xe.getModel();(this.isCoordinateChanged||Qa(fn,En))&&(Xe.animate=this.animateOption,Xe.update(fn)),delete at[Ae]}Ft.push(Xe),Ct[Ae]=Xe}if(this.zIndexReversed){var nr=Ft.length;Ft.forEach(function(ar,Er){ar.shape.setZIndex(nr-Er)})}return Ft},o.prototype.getLabelType=function(){var e=this,a=e.labelOption,M=e.coordinate,N=e.type,at=M.type,Ct=M.isTransposed,Ft=Object(i.get)(a,["cfg","type"]);return Ft||(at==="polar"?Ft=Ct?"pie":"polar":at==="theta"?Ft="pie":N==="interval"||N==="polygon"?Ft="interval":Ft="base"),Ft},o.prototype.getYMinValue=function(){var e=this.getYScale(),a=e.min,M=e.max,N;return a>=0?N=a:M<=0?N=M:N=0,N},o.prototype.createAttrOption=function(e,a,M){if(Object(i.isNil)(a)||Object(i.isObject)(a))Object(i.isObject)(a)&&Object(i.isEqual)(Object.keys(a),["values"])?Object(i.set)(this.attributeOption,e,{fields:a.values}):Object(i.set)(this.attributeOption,e,a);else{var N={};Object(i.isNumber)(a)?N.values=[a]:N.fields=yo(a),M&&(Object(i.isFunction)(M)?N.callback=M:N.values=M),Object(i.set)(this.attributeOption,e,N)}},o.prototype.initAttributes=function(){var e=this,a=this,M=a.attributes,N=a.attributeOption,at=a.theme,Ct=a.shapeType;this.groupScales=[];var Ft={},ne=function(Xe){if(N.hasOwnProperty(Xe)){var fn=N[Xe];if(!fn)return{value:void 0};var En=Object(H.a)({},fn),nr=En.callback,ar=En.values,Er=En.fields,Mr=Er===void 0?[]:Er,qr=Mr.map(function(ai){var aa=e.scales[ai];return aa.isCategory&&!Ft[ai]&&I.includes(Xe)&&(e.groupScales.push(aa),Ft[ai]=!0),aa});En.scales=qr,Xe!=="position"&&qr.length===1&&qr[0].type==="identity"?En.values=qr[0].values:!nr&&!ar&&(Xe==="size"?En.values=at.sizes:Xe==="shape"?En.values=at.shapes[Ct]||[]:Xe==="color"&&(qr.length?En.values=qr[0].values.length<=10?at.colors10:at.colors20:En.values=at.colors10));var oi=Je(Xe);M[Xe]=new oi(En)}};for(var ge in N){var be=ne(ge);if(typeof be=="object")return be.value}},o.prototype.processData=function(e){this.hasSorted=!1;for(var a=this.getAttribute("position").scales,M=a.filter(function(oi){return oi.isCategory}),N=this.groupData(e),at=[],Ct=0,Ft=N.length;Ct<Ft;Ct++){for(var ne=N[Ct],ge=[],be=0,Ae=ne.length;be<Ae;be++){var Xe=ne[be],fn={};for(var En in Xe)fn[En]=Xe[En];fn[m]=Xe;for(var nr=0,ar=M;nr<ar.length;nr++){var Er=ar[nr],Mr=Er.field;fn[Mr]=Er.translate(fn[Mr])}ge.push(fn)}at.push(ge)}var qr=this.adjustData(at);return this.beforeMappingData=qr,qr},o.prototype.adjustData=function(e){var a=this.adjustOption,M=this,N=M.intervalPadding,at=M.dodgePadding,Ct=M.theme,Ft=this.maxColumnWidth||Ct.maxColumnWidth,ne=this.minColumnWidth||Ct.minColumnWidth,ge=this.columnWidthRatio||Ct.columnWidthRatio,be=e;if(a){var Ae=this.getXScale(),Xe=this.getYScale(),fn=Ae.field,En=Xe?Xe.field:null,nr=rr(this.coordinate),ar=Ae.values.length,Er=this.getAttribute("size"),Mr=void 0;Er&&(Mr=Er.values[0]);for(var qr=0,oi=a.length;qr<oi;qr++){var ai=a[qr],aa=Object(H.a)({xField:fn,yField:En,intervalPadding:N,dodgePadding:at,xDimensionLength:nr,groupNum:ar,defaultSize:Mr,maxColumnWidth:Ft,minColumnWidth:ne,columnWidthRatio:ge},ai),Ji=ai.type;if(Ji==="dodge"){var _i=[];if(Ae.isCategory||Ae.type==="identity")_i.push("x");else if(!Xe)_i.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");aa.adjustNames=_i,aa.dodgeRatio=ge}else if(Ji==="stack"){var Ca=this.coordinate;if(!Xe){aa.height=Ca.getHeight();var io=this.getDefaultValue("size")||3;aa.size=io}!Ca.isTransposed&&Object(i.isNil)(aa.reverseOrder)&&(aa.reverseOrder=!0)}var ao=Object(lt.getAdjust)(Ji),co=new ao(aa);be=co.process(be),this.adjusts[Ji]=co}}return be},o.prototype.groupData=function(e){for(var a=this.getGroupScales(),M=this.scaleDefs,N={},at=[],Ct=0;Ct<a.length;Ct++){var Ft=a[Ct],ne=Ft.field;at.push(ne),Object(i.get)(M,[ne,"values"])&&(N[ne]=M[ne].values)}return Io(e,at,N)},o.prototype.updateStackRange=function(e,a){for(var M=Object(i.flatten)(a),N=e.field,at=e.min,Ct=e.max,Ft=0;Ft<M.length;Ft++){var ne=M[Ft],ge=Math.min.apply(null,ne[N]),be=Math.max.apply(null,ne[N]);ge<at&&(at=ge),be>Ct&&(Ct=be)}var Ae=this.scaleDefs,Xe={};at<e.min&&!Object(i.get)(Ae,[N,"min"])&&(Xe.min=at),Ct>e.max&&!Object(i.get)(Ae,[N,"max"])&&(Xe.max=Ct),e.change(Xe)},o.prototype.beforeMapping=function(e){var a=e;if(this.sortable&&this.sort(a),this.generatePoints)for(var M=0,N=a.length;M<N;M++){var at=a[M];this.generateShapePoints(at);var Ct=a[M+1];Ct&&(this.generateShapePoints(Ct),at[0].nextPoints=Ct[0].points)}return a},o.prototype.generateShapePoints=function(e){for(var a=this.getShapeFactory(),M=this.getAttribute("shape"),N=0;N<e.length;N++){var at=e[N],Ct=this.createShapePointsCfg(at),Ft=M?this.getAttributeValues(M,at):null,ne=a.getShapePoints(Ft,Ct);at.points=ne}},o.prototype.normalizeValues=function(e,a){var M=[];if(Object(i.isArray)(e))for(var N=0;N<e.length;N++){var at=e[N];M.push(a.scale(at))}else M=a.scale(e);return M},o.prototype.mapping=function(e){for(var a=this.attributes,M=[],N=0;N<e.length;N++){var at=e[N],Ct={_origin:at[m],points:at.points,nextPoints:at.nextPoints};for(var Ft in a)if(a.hasOwnProperty(Ft)){var ne=a[Ft],ge=ne.names,be=this.getAttributeValues(ne,at);if(ge.length>1)for(var Ae=0;Ae<be.length;Ae+=1){var Xe=be[Ae],fn=ge[Ae];Ct[fn]=Object(i.isArray)(Xe)&&Xe.length===1?Xe[0]:Xe}else Ct[ge[0]]=be.length===1?be[0]:be}this.convertPoint(Ct),M.push(Ct)}return M},o.prototype.convertPoint=function(e){var a=e.x,M=e.y,N,at,Ct,Ft=this.coordinate;if(Object(i.isArray)(a)&&Object(i.isArray)(M)){N=[],at=[];for(var ne=0,ge=0,be=a.length,Ae=M.length;ne<be&&ge<Ae;ne+=1,ge+=1)Ct=Ft.convert({x:a[ne],y:M[ge]}),N.push(Ct.x),at.push(Ct.y)}else if(Object(i.isArray)(M)){at=[];for(var Xe=0;Xe<M.length;Xe++){var fn=M[Xe];Ct=Ft.convert({x:a,y:fn}),N&&N!==Ct.x?(Object(i.isArray)(N)||(N=[N]),N.push(Ct.x)):N=Ct.x,at.push(Ct.y)}}else if(Object(i.isArray)(a)){N=[];for(var Xe=0;Xe<a.length;Xe++){var En=a[Xe];Ct=Ft.convert({x:En,y:M}),at&&at!==Ct.y?(Object(i.isArray)(at)||(at=[at]),at.push(Ct.y)):at=Ct.y,N.push(Ct.x)}}else{var nr=Ft.convert({x:a,y:M});N=nr.x,at=nr.y}e.x=N,e.y=at},o.prototype.getStyleCfg=function(e,a){var M=e.fields,N=M===void 0?[]:M,at=e.callback,Ct=e.cfg;if(Ct)return Ct;var Ft=N.map(function(ne){return a[ne]});return at.apply(void 0,Ft)},o.prototype.setCfg=function(e){var a=this,M=e.coordinate,N=e.data,at=e.theme,Ct=e.scaleDefs;M&&(this.coordinate=M),N&&(this.data=N),Ct&&(this.scaleDefs=Ct,this.idFields=[],Object(i.each)(Ct,function(Ft,ne){Ft&&Ft.key&&a.idFields.push(ne)})),at&&(this.theme=this.userTheme?Object(i.deepMix)({},at,this.userTheme):at)},o.prototype.renderLabels=function(e,a){a===void 0&&(a=!1);var M=this.geometryLabel;if(!M){var N=this.getLabelType(),at=uo(N);M=new at(this),this.geometryLabel=M}M.render(e,a);var Ct=M.labelsRenderer.shapesMap;Object(i.each)(this.elementsMap,function(Ft,ne){var ge=Co(ne,Ct);if(ge.length){Ft.labelShape=ge;for(var be=0;be<ge.length;be++)for(var Ae=ge[be],Xe=Ae.getChildren(),fn=0;fn<Xe.length;fn++){var En=Xe[fn];En.cfg.name=["element","label"],En.cfg.element=Ft}}})},o.prototype.canDoGroupAnimation=function(e){return!e&&this.animateOption&&(Object(i.get)(this.animateOption,"appear")===void 0||Object(i.get)(this.animateOption,"appear")&&Object(i.get)(this.animateOption,["appear","animation"])===void 0)},o}(ft),Da=Do,_o=Yr.a.transform;function Ko(h,o,e){var a=_o(h.getMatrix(),[["t",o,e]]);h.setMatrix(a)}function is(h,o){var e=h.attr(),a=e.x,M=e.y,N=_o(h.getMatrix(),[["t",-a,-M],["r",o],["t",a,M]]);return N}function kt(h,o){var e=is(h,o);h.setMatrix(e)}function v(){return[1,0,0,0,1,0,0,0,1]}function l(h,o){var e=h.getBBox(),a=(e.minX+e.maxX)/2,M=(e.minY+e.maxY)/2;h.applyToMatrix([a,M,1]);var N=_o(h.getMatrix(),[["t",-a,-M],["s",o,o],["t",a,M]]);h.setMatrix(N)}function D(h){return h.find(function(o){return o.get("type")==="text"})}function Y(h,o,e){e===void 0&&(e=[0,0,0,0]);var a=h.getChildren()[0];if(a){var M=a.clone();(o==null?void 0:o.rotate)&&kt(M,-o.rotate);var N=M.getCanvasBBox(),at=N.x,Ct=N.y,Ft=N.width,ne=N.height;M.destroy();var ge=e;return Object(i.isNil)(ge)?ge=[2,2,2,2]:Object(i.isNumber)(ge)&&(ge=new Array(4).fill(ge)),{x:at-ge[3],y:Ct-ge[0],width:Ft+ge[1]+ge[3],height:ne+ge[0]+ge[2],rotation:(o==null?void 0:o.rotate)||0}}}function ht(h,o,e){e===void 0&&(e=0);var a=Math.max(0,Math.min(h.x+h.width+e,o.x+o.width+e)-Math.max(h.x-e,o.x-e)),M=Math.max(0,Math.min(h.y+h.height+e,o.y+o.height+e)-Math.max(h.y-e,o.y-e));return a*M}function At(h,o){var e=h.getBBox();return Object(i.some)(o,function(a){var M=a.getBBox();return ht(e,M,2)>0})}function Ut(h,o,e){var a=e.data,M=e.origin,N=e.animateCfg,at=e.coordinate,Ct=Object(i.get)(N,"update");h.set("data",a),h.set("origin",M),h.set("animateCfg",N),h.set("coordinate",at),h.set("visible",o.get("visible")),h.getChildren().forEach(function(Ft,ne){var ge=o.getChildByIndex(ne);if(!ge)h.removeChild(Ft),Ft.remove(!0);else{Ft.set("data",a),Ft.set("origin",M),Ft.set("animateCfg",N),Ft.set("coordinate",at);var be=eo(Ft,ge);Ct?Ia(Ft,Ct,{toAttrs:be,coordinate:at}):Ft.attr(be),ge.isGroup()&&Ut(Ft,ge,e)}}),Object(i.each)(o.getChildren(),function(Ft,ne){ne>=h.getCount()&&(Ft.destroyed||h.add(Ft))})}var Yt=function(){function h(o){this.shapesMap={},this.lastShapesMap={};var e=o.layout,a=o.container;this.layout=e,this.container=a}return h.prototype.render=function(o,e,a){var M=this;a===void 0&&(a=!1),this.shapesMap={};var N=this.container,at=this.createOffscreenGroup();if(o.length){for(var Ct=0,Ft=o;Ct<Ft.length;Ct++){var ne=Ft[Ct];ne&&this.renderLabel(ne,at)}this.doLayout(o,e),this.renderLabelLine(o),this.renderLabelBackground(o),this.adjustLabel(o)}var ge=this.lastShapesMap,be=this.shapesMap;Object(i.each)(be,function(Ae,Xe){if(Ae.destroyed)delete be[Xe];else{if(ge[Xe]){var fn=Ae.get("data"),En=Ae.get("origin"),nr=Ae.get("coordinate"),ar=Ae.get("animateCfg"),Er=ge[Xe];Ut(Er,be[Xe],{data:fn,origin:En,animateCfg:ar,coordinate:nr}),M.shapesMap[Xe]=Er}else{N.add(Ae);var Mr=Object(i.get)(Ae.get("animateCfg"),a?"enter":"appear");Mr&&Ia(Ae,Mr,{toAttrs:Object(H.a)({},Ae.attr()),coordinate:Ae.get("coordinate")})}delete ge[Xe]}}),Object(i.each)(ge,function(Ae){var Xe=Object(i.get)(Ae.get("animateCfg"),"leave");Xe?Ia(Ae,Xe,{toAttrs:null,coordinate:Ae.get("coordinate")}):Ae.remove(!0)}),this.lastShapesMap=be,at.destroy()},h.prototype.clear=function(){this.container.clear(),this.shapesMap={},this.lastShapesMap={}},h.prototype.destroy=function(){this.container.destroy(),this.shapesMap=null,this.lastShapesMap=null},h.prototype.renderLabel=function(o,e){var a=o.id,M=o.elementId,N=o.data,at=o.mappingData,Ct=o.coordinate,Ft=o.animate,ne=o.content,ge={id:a,elementId:M,data:N,origin:Object(H.a)(Object(H.a)({},at),{data:at[m]}),coordinate:Ct},be=e.addGroup(Object(H.a)({name:"label",animateCfg:this.animate===!1||Ft===null||Ft===!1?!1:Object(i.deepMix)({},this.animate,Ft)},ge)),Ae;if(ne.isGroup&&ne.isGroup()||ne.isShape&&ne.isShape()){var Xe=ne.getCanvasBBox(),fn=Xe.width,En=Xe.height,nr=Object(i.get)(o,"textAlign","left"),ar=o.x,Er=o.y-En/2;nr==="center"?ar=ar-fn/2:(nr==="right"||nr==="end")&&(ar=ar-fn),Ko(ne,ar,Er),Ae=ne,be.add(ne)}else{var Mr=Object(i.get)(o,["style","fill"]);Ae=be.addShape("text",Object(H.a)({attrs:Object(H.a)(Object(H.a)({x:o.x,y:o.y,textAlign:o.textAlign,textBaseline:Object(i.get)(o,"textBaseline","middle"),text:o.content},o.style),{fill:Object(i.isNull)(Mr)?o.color:Mr})},ge))}o.rotate&&kt(Ae,o.rotate),this.shapesMap[a]=be},h.prototype.doLayout=function(o,e){var a=this;if(this.layout){var M=Object(i.isArray)(this.layout)?this.layout:[this.layout];Object(i.each)(M,function(N){var at=qo(Object(i.get)(N,"type",""));if(at){var Ct=[],Ft=[];Object(i.each)(a.shapesMap,function(ne,ge){Ct.push(ne),Ft.push(e[ne.get("elementId")])}),at(o,Ct,Ft,a.region,N.cfg)}})}},h.prototype.renderLabelLine=function(o){var e=this;Object(i.each)(o,function(a){var M=Object(i.get)(a,"coordinate");if(!(!a||!M)){var N=M.getCenter(),at=M.getRadius();if(!!a.labelLine){var Ct=Object(i.get)(a,"labelLine",{}),Ft=a.id,ne=Ct.path;if(!ne){var ge=Qi(N.x,N.y,at,a.angle);ne=[["M",ge.x,ge.y],["L",a.x,a.y]]}var be=e.shapesMap[Ft];be.destroyed||be.addShape("path",{capture:!1,attrs:Object(H.a)({path:ne,stroke:a.color?a.color:Object(i.get)(a,["style","fill"],"#000"),fill:null},Ct.style),id:Ft,origin:a.mappingData,data:a.data,coordinate:a.coordinate})}}})},h.prototype.renderLabelBackground=function(o){var e=this;Object(i.each)(o,function(a){var M=Object(i.get)(a,"coordinate"),N=Object(i.get)(a,"background");if(!(!N||!M)){var at=a.id,Ct=e.shapesMap[at];if(!Ct.destroyed){var Ft=Ct.getChildren()[0];if(Ft){var ne=Y(Ct,a,N.padding),ge=ne.rotation,be=Object(H.c)(ne,["rotation"]),Ae=Ct.addShape("rect",{attrs:Object(H.a)(Object(H.a)({},be),N.style||{}),id:at,origin:a.mappingData,data:a.data,coordinate:a.coordinate});if(Ae.setZIndex(-1),ge){var Xe=Ft.getMatrix();Ae.setMatrix(Xe)}}}}})},h.prototype.createOffscreenGroup=function(){var o=this.container,e=o.getGroupBase(),a=new e({});return a},h.prototype.adjustLabel=function(o){var e=this;Object(i.each)(o,function(a){if(a){var M=a.id,N=e.shapesMap[M];if(!N.destroyed){var at=N.findAll(function(Ct){return Ct.get("type")!=="path"});Object(i.each)(at,function(Ct){Ct&&(a.offsetX&&Ct.attr("x",Ct.attr("x")+a.offsetX),a.offsetY&&Ct.attr("y",Ct.attr("y")+a.offsetY))})}}})},h}(),qt=Yt;function oe(h){var o=0;return Object(i.each)(h,function(e){o+=e}),o/h.length}var Te=function(){function h(o){this.geometry=o}return h.prototype.getLabelItems=function(o){var e=this,a=[],M=this.getLabelCfgs(o);return Object(i.each)(o,function(N,at){var Ct=M[at];if(!Ct||Object(i.isNil)(N.x)||Object(i.isNil)(N.y)){a.push(null);return}var Ft=Object(i.isArray)(Ct.content)?Ct.content:[Ct.content];Ct.content=Ft;var ne=Ft.length;Object(i.each)(Ft,function(ge,be){if(Object(i.isNil)(ge)||ge===""){a.push(null);return}var Ae=Object(H.a)(Object(H.a)({},Ct),e.getLabelPoint(Ct,N,be));Ae.textAlign||(Ae.textAlign=e.getLabelAlign(Ae,be,ne)),Ae.offset<=0&&(Ae.labelLine=null),a.push(Ae)})}),a},h.prototype.render=function(o,e){e===void 0&&(e=!1);var a=this.getLabelItems(o),M=this.getLabelsRenderer(),N=this.getGeometryShapes();M.render(a,N,e)},h.prototype.clear=function(){var o=this.labelsRenderer;o&&o.clear()},h.prototype.destroy=function(){var o=this.labelsRenderer;o&&o.destroy(),this.labelsRenderer=null},h.prototype.getCoordinate=function(){return this.geometry.coordinate},h.prototype.getDefaultLabelCfg=function(o,e){var a=this.geometry,M=a.type,N=a.theme;return M==="polygon"||M==="interval"&&e==="middle"||o<0&&!["line","point","path"].includes(M)?Object(i.get)(N,"innerLabels",{}):Object(i.get)(N,"labels",{})},h.prototype.getThemedLabelCfg=function(o){var e=this.geometry,a=this.getDefaultLabelCfg(),M=e.type,N=e.theme,at;return M==="polygon"||o.offset<0&&!["line","point","path"].includes(M)?at=Object(i.deepMix)({},a,N.innerLabels,o):at=Object(i.deepMix)({},a,N.labels,o),at},h.prototype.setLabelPosition=function(o,e,a,M){},h.prototype.getLabelOffset=function(o){var e=this.getCoordinate(),a=this.getOffsetVector(o);return e.isTransposed?a[0]:a[1]},h.prototype.getLabelOffsetPoint=function(o,e,a){var M=o.offset,N=this.getCoordinate(),at=N.isTransposed,Ct=at?"x":"y",Ft=at?1:-1,ne={x:0,y:0};return e>0||a===1?ne[Ct]=M*Ft:ne[Ct]=M*Ft*-1,ne},h.prototype.getLabelPoint=function(o,e,a){var M=this.getCoordinate(),N=o.content.length;function at(nr,ar,Er){Er===void 0&&(Er=!1);var Mr=nr;return Object(i.isArray)(Mr)&&(o.content.length===1?Er?Mr=oe(Mr):Mr.length<=2?Mr=Mr[nr.length-1]:Mr=oe(Mr):Mr=Mr[ar]),Mr}var Ct={content:o.content[a],x:0,y:0,start:{x:0,y:0},color:"#fff"},Ft=Object(i.isArray)(e.shape)?e.shape[0]:e.shape,ne=Ft==="funnel"||Ft==="pyramid";if(this.geometry.type==="polygon"){var ge=Ga(e.x,e.y);Ct.x=ge[0],Ct.y=ge[1]}else this.geometry.type==="interval"&&!ne?(Ct.x=at(e.x,a,!0),Ct.y=at(e.y,a)):(Ct.x=at(e.x,a),Ct.y=at(e.y,a));if(ne){var be=Object(i.get)(e,"nextPoints"),Ae=Object(i.get)(e,"points");if(be){var Xe=M.convert(Ae[1]),fn=M.convert(be[1]);Ct.x=(Xe.x+fn.x)/2,Ct.y=(Xe.y+fn.y)/2}else if(Ft==="pyramid"){var Xe=M.convert(Ae[1]),fn=M.convert(Ae[2]);Ct.x=(Xe.x+fn.x)/2,Ct.y=(Xe.y+fn.y)/2}}o.position&&this.setLabelPosition(Ct,e,a,o.position);var En=this.getLabelOffsetPoint(o,a,N);return Ct.start={x:Ct.x,y:Ct.y},Ct.x+=En.x,Ct.y+=En.y,Ct.color=e.color,Ct},h.prototype.getLabelAlign=function(o,e,a){var M="center",N=this.getCoordinate();if(N.isTransposed){var at=o.offset;at<0?M="right":at===0?M="center":M="left",a>1&&e===0&&(M==="right"?M="left":M==="left"&&(M="right"))}return M},h.prototype.getLabelId=function(o){var e=this.geometry,a=e.type,M=e.getXScale(),N=e.getYScale(),at=o[m],Ct=e.getElementId(o);return a==="line"||a==="area"?Ct+=" "+at[M.field]:a==="path"&&(Ct+=" "+at[M.field]+"-"+at[N.field]),Ct},h.prototype.getLabelsRenderer=function(){var o=this.geometry,e=o.labelsContainer,a=o.labelOption,M=o.canvasRegion,N=o.animateOption,at=this.geometry.coordinate,Ct=this.labelsRenderer;return Ct||(Ct=new qt({container:e,layout:Object(i.get)(a,["cfg","layout"],{type:this.defaultLayout})}),this.labelsRenderer=Ct),Ct.region=M,Ct.animate=N?se("label",at):!1,Ct},h.prototype.getLabelCfgs=function(o){var e=this,a=this.geometry,M=a.labelOption,N=a.scales,at=a.coordinate,Ct=M,Ft=Ct.fields,ne=Ct.callback,ge=Ct.cfg,be=Ft.map(function(Xe){return N[Xe]}),Ae=[];return Object(i.each)(o,function(Xe,fn){var En=Xe[m],nr=e.getLabelText(En,be),ar;if(ne){var Er=Ft.map(function(aa){return En[aa]});if(ar=ne.apply(void 0,Er),Object(i.isNil)(ar)){Ae.push(null);return}}var Mr=Object(H.a)(Object(H.a)({id:e.getLabelId(Xe),elementId:e.geometry.getElementId(Xe),data:En,mappingData:Xe,coordinate:at},ge),ar);Object(i.isFunction)(Mr.position)&&(Mr.position=Mr.position(En,Xe,fn));var qr=e.getLabelOffset(Mr.offset||0),oi=e.getDefaultLabelCfg(qr,Mr.position);Mr=Object(i.deepMix)({},oi,Mr),Mr.offset=e.getLabelOffset(Mr.offset||0);var ai=Mr.content;Object(i.isFunction)(ai)?Mr.content=ai(En,Xe,fn):Object(i.isUndefined)(ai)&&(Mr.content=nr[0]),Ae.push(Mr)}),Ae},h.prototype.getLabelText=function(o,e){var a=[];return Object(i.each)(e,function(M){var N=o[M.field];Object(i.isArray)(N)?N=N.map(function(at){return M.getText(at)}):N=M.getText(N),Object(i.isNil)(N)||N===""?a.push(null):a.push(N)}),a},h.prototype.getOffsetVector=function(o){o===void 0&&(o=0);var e=this.getCoordinate(),a=0;return Object(i.isNumber)(o)&&(a=o),e.isTransposed?e.applyMatrix(a,0):e.applyMatrix(0,a)},h.prototype.getGeometryShapes=function(){var o=this.geometry,e={};return Object(i.each)(o.elementsMap,function(a,M){e[M]=a.shape}),Object(i.each)(o.getOffscreenGroup().getChildren(),function(a){var M=o.getElementId(a.get("origin").mappingData);e[M]=a}),e},h}(),Ge=Te,Ue=w("B+CY");function We(h,o,e){if(!h)return e;var a;if(h.callback&&h.callback.length>1){var M=Array(h.callback.length-1).fill("");a=h.mapping.apply(h,Object(H.d)([o],M)).join("")}else a=h.mapping(o).join("");return a||e}var vn={hexagon:function(o,e,a){var M=a/2*Math.sqrt(3);return[["M",o,e-a],["L",o+M,e-a/2],["L",o+M,e+a/2],["L",o,e+a],["L",o-M,e+a/2],["L",o-M,e-a/2],["Z"]]},bowtie:function(o,e,a){var M=a-1.5;return[["M",o-a,e-M],["L",o+a,e+M],["L",o+a,e-M],["L",o-a,e+M],["Z"]]},cross:function(o,e,a){return[["M",o-a,e-a],["L",o+a,e+a],["M",o+a,e-a],["L",o-a,e+a]]},tick:function(o,e,a){return[["M",o-a/2,e-a],["L",o+a/2,e-a],["M",o,e-a],["L",o,e+a],["M",o-a/2,e+a],["L",o+a/2,e+a]]},plus:function(o,e,a){return[["M",o-a,e],["L",o+a,e],["M",o,e-a],["L",o,e+a]]},hyphen:function(o,e,a){return[["M",o-a,e],["L",o+a,e]]},line:function(o,e,a){return[["M",o,e-a],["L",o,e+a]]}},Tn=["line","cross","tick","plus","hyphen"];function Ln(h,o){var e=h.symbol;Object(i.isString)(e)&&Tn.indexOf(e)!==-1&&(h.style=Object(i.deepMix)({},h.style,{lineWidth:1,stroke:o,fill:null}))}function Un(h){var o=h.symbol;Object(i.isString)(o)&&vn[o]&&(h.symbol=vn[o])}function Hn(h){return h.startsWith(t.LEFT)||h.startsWith(t.RIGHT)?"vertical":"horizontal"}function xr(h,o,e,a,M){var N=e.getScale(e.type);if(N.isCategory){var at=N.field,Ct=o.getAttribute("color"),Ft=o.getAttribute("shape"),ne=h.getTheme().defaultColor,ge=o.coordinate.isPolar;return N.getTicks().map(function(be){var Ae,Xe=be.text,fn=be.value,En=Xe,nr=N.invert(fn),ar=h.filterFieldData(at,[(Ae={},Ae[at]=nr,Ae)]).length===0;Object(i.each)(h.views,function(oi){var ai;oi.filterFieldData(at,[(ai={},ai[at]=nr,ai)]).length||(ar=!0)});var Er=We(Ct,nr,ne),Mr=We(Ft,nr,"point"),qr=o.getShapeMarker(Mr,{color:Er,isInPolar:ge});return qr=Object(i.deepMix)({},a,qr,M),Ln(qr,Er),Un(qr),{id:nr,name:En,value:nr,marker:qr,unchecked:ar}})}return[]}function Or(h,o,e){return e.map(function(a){var M=Object(i.deepMix)({},h,o,a.marker);return Un(M),a.marker=M,a})}var Rr="4.1.9",yi={getLegendItems:xr,translate:Ko,rotate:kt,zoom:l,transform:_o,getAngle:za,getSectorPath:ka,polarToCartesian:Qi,getDelegationObject:Zt,getTooltipItems:ra},Xi={100:"#000",95:"#0D0D0D",85:"#262626",65:"#595959",45:"#8C8C8C",25:"#BFBFBF",15:"#D9D9D9",6:"#F0F0F0"},Zr={100:"#FFFFFF",95:"#F2F2F2",85:"#D9D9D9",65:"#A6A6A6",45:"#737373",25:"#404040",15:"#262626",6:"#0F0F0F"},ki=["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"],Ba=["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#E86452","#F8D0CB","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"],Ha=function(o){o===void 0&&(o={});var e=o.backgroundColor,a=e===void 0?"#141414":e,M=o.paletteQualitative10,N=M===void 0?ki:M,at=o.paletteQualitative20,Ct=at===void 0?Ba:at,Ft=o.paletteSemanticRed,ne=Ft===void 0?"#F4664A":Ft,ge=o.paletteSemanticGreen,be=ge===void 0?"#30BF78":ge,Ae=o.paletteSemanticYellow,Xe=Ae===void 0?"#FAAD14":Ae,fn=o.fontFamily,En=fn===void 0?`"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,
    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
    "Noto Color Emoji"`:fn,nr=o.brandColor,ar=nr===void 0?N[0]:nr;return{backgroundColor:a,brandColor:ar,paletteQualitative10:N,paletteQualitative20:Ct,paletteSemanticRed:ne,paletteSemanticGreen:be,paletteSemanticYellow:Xe,fontFamily:En,axisLineBorderColor:Zr[25],axisLineBorder:1,axisLineDash:null,axisTitleTextFillColor:Zr[65],axisTitleTextFontSize:12,axisTitleTextLineHeight:12,axisTitleTextFontWeight:"normal",axisTitleSpacing:12,axisTickLineBorderColor:Zr[25],axisTickLineLength:4,axisTickLineBorder:1,axisSubTickLineBorderColor:Zr[15],axisSubTickLineLength:2,axisSubTickLineBorder:1,axisLabelFillColor:Zr[45],axisLabelFontSize:12,axisLabelLineHeight:12,axisLabelFontWeight:"normal",axisLabelOffset:8,axisGridBorderColor:Zr[15],axisGridBorder:1,axisGridLineDash:null,legendTitleTextFillColor:Zr[45],legendTitleTextFontSize:12,legendTitleTextLineHeight:21,legendTitleTextFontWeight:"normal",legendMarkerColor:ki[0],legendMarkerSpacing:8,legendMarkerSize:4,legendCircleMarkerSize:4,legendSquareMarkerSize:4,legendLineMarkerSize:5,legendItemNameFillColor:Zr[65],legendItemNameFontSize:12,legendItemNameLineHeight:12,legendItemNameFontWeight:"normal",legendItemSpacing:24,legendItemMarginBottom:12,legendSpacing:16,legendPadding:[8,8,8,8],legendHorizontalPadding:[8,0,8,0],legendVerticalPadding:[0,8,0,8],sliderRailFillColor:Zr[15],sliderRailBorder:0,sliderRailBorderColor:null,sliderRailWidth:100,sliderRailHeight:12,sliderLabelTextFillColor:Zr[45],sliderLabelTextFontSize:12,sliderLabelTextLineHeight:12,sliderLabelTextFontWeight:"normal",sliderHandlerFillColor:Xi[6],sliderHandlerWidth:10,sliderHandlerHeight:14,sliderHandlerBorder:1,sliderHandlerBorderColor:Xi[25],annotationArcBorderColor:Zr[15],annotationArcBorder:1,annotationLineBorderColor:Zr[25],annotationLineBorder:1,annotationLineDash:null,annotationTextFillColor:Zr[65],annotationTextFontSize:12,annotationTextLineHeight:12,annotationTextFontWeight:"normal",annotationTextBorderColor:null,annotationTextBorder:0,annotationRegionFillColor:Zr[100],annotationRegionFillOpacity:.06,annotationRegionBorder:0,annotationRegionBorderColor:null,annotationDataMarkerLineLength:16,tooltipCrosshairsBorderColor:Zr[25],tooltipCrosshairsBorder:1,tooltipCrosshairsLineDash:null,tooltipContainerFillColor:"#1f1f1f",tooltipContainerFillOpacity:.95,tooltipContainerShadow:"0px 2px 4px rgba(0,0,0,.5)",tooltipContainerBorderRadius:3,tooltipTextFillColor:Zr[65],tooltipTextFontSize:12,tooltipTextLineHeight:12,tooltipTextFontWeight:"bold",labelFillColor:Zr[65],labelFillColorDark:"#2c3542",labelFillColorLight:"#ffffff",labelFontSize:12,labelLineHeight:12,labelFontWeight:"normal",labelBorderColor:null,labelBorder:0,innerLabelFillColor:Xi[100],innerLabelFontSize:12,innerLabelLineHeight:12,innerLabelFontWeight:"normal",innerLabelBorderColor:null,innerLabelBorder:0,overflowLabelFillColor:Zr[65],overflowLabelFillColorDark:"#2c3542",overflowLabelFillColorLight:"#ffffff",overflowLabelFontSize:12,overflowLabelLineHeight:12,overflowLabelFontWeight:"normal",overflowLabelBorderColor:Xi[100],overflowLabelBorder:1,labelLineBorder:1,labelLineBorderColor:Zr[25],pointFillColor:ki[0],pointFillOpacity:.95,pointSize:4,pointBorder:1,pointBorderColor:Xi[100],pointBorderOpacity:1,pointActiveBorderColor:Zr[100],pointSelectedBorder:2,pointSelectedBorderColor:Zr[100],pointInactiveFillOpacity:.3,pointInactiveBorderOpacity:.3,hollowPointSize:4,hollowPointBorder:1,hollowPointBorderColor:ki[0],hollowPointBorderOpacity:.95,hollowPointFillColor:Xi[100],hollowPointActiveBorder:1,hollowPointActiveBorderColor:Zr[100],hollowPointActiveBorderOpacity:1,hollowPointSelectedBorder:2,hollowPointSelectedBorderColor:Zr[100],hollowPointSelectedBorderOpacity:1,hollowPointInactiveBorderOpacity:.3,lineBorder:2,lineBorderColor:ki[0],lineBorderOpacity:1,lineActiveBorder:3,lineSelectedBorder:3,lineInactiveBorderOpacity:.3,areaFillColor:ki[0],areaFillOpacity:.25,areaActiveFillColor:ki[0],areaActiveFillOpacity:.5,areaSelectedFillColor:ki[0],areaSelectedFillOpacity:.5,areaInactiveFillOpacity:.3,hollowAreaBorderColor:ki[0],hollowAreaBorder:2,hollowAreaBorderOpacity:1,hollowAreaActiveBorder:3,hollowAreaActiveBorderColor:Zr[100],hollowAreaSelectedBorder:3,hollowAreaSelectedBorderColor:Zr[100],hollowAreaInactiveBorderOpacity:.3,intervalFillColor:ki[0],intervalFillOpacity:.95,intervalActiveBorder:1,intervalActiveBorderColor:Zr[100],intervalActiveBorderOpacity:1,intervalSelectedBorder:2,intervalSelectedBorderColor:Zr[100],intervalSelectedBorderOpacity:1,intervalInactiveBorderOpacity:.3,intervalInactiveFillOpacity:.3,hollowIntervalBorder:2,hollowIntervalBorderColor:ki[0],hollowIntervalBorderOpacity:1,hollowIntervalFillColor:Xi[100],hollowIntervalActiveBorder:2,hollowIntervalActiveBorderColor:Zr[100],hollowIntervalSelectedBorder:3,hollowIntervalSelectedBorderColor:Zr[100],hollowIntervalSelectedBorderOpacity:1,hollowIntervalInactiveBorderOpacity:.3}},Ka=Ha(),Ja=w("U8jP"),ya=w("v7Ed");function Mo(h){return h?!1:h==null||isNaN(h)}function jo(h){if(Object(i.isArray)(h))return Mo(h[1].y);var o=h.y;return Object(i.isArray)(o)?Mo(o[0]):Mo(o)}function Ro(h,o,e){if(o===void 0&&(o=!1),e===void 0&&(e=!0),!h.length||h.length===1&&!e)return[];if(o){for(var a=[],M=0,N=h.length;M<N;M++){var at=h[M];jo(at)||a.push(at)}return[a]}for(var Ct=[],Ft=[],M=0,N=h.length;M<N;M++){var at=h[M];jo(at)?Ft.length&&(Ft.length===1&&!e||Ct.push(Ft),Ft=[]):Ft.push(at)}return Ft.length&&Ct.push(Ft),Ct}function Za(h,o,e,a){a===void 0&&(a="");var M=h.style,N=M===void 0?{}:M,at=h.defaultStyle,Ct=h.color,Ft=h.size,ne=Object(H.a)(Object(H.a)({},at),N);return Ct&&(o&&(N.stroke||(ne.stroke=Ct)),e&&(N.fill||(ne.fill=Ct))),a&&Object(i.isNil)(N[a])&&!Object(i.isNil)(Ft)&&(ne[a]=Ft),ne}function Ao(h){return Object(i.deepMix)({},{fill:"#CCD6EC",fillOpacity:.3},Object(i.get)(h,["background","style"]))}function $a(h){var o=h.x,e=Object(i.isArray)(h.y)?h.y:[h.y];return e.map(function(a,M){return{x:Object(i.isArray)(o)?o[M]:o,y:a}})}var ns={line:function(o,e,a){return[["M",o-a,e],["L",o+a,e]]},dot:function(o,e,a){return[["M",o-a,e],["L",o+a,e]]},dash:function(o,e,a){return[["M",o-a,e],["L",o+a,e]]},smooth:function(o,e,a){return[["M",o-a,e],["A",a/2,a/2,0,1,1,o,e],["A",a/2,a/2,0,1,0,o+a,e]]},hv:function(o,e,a){return[["M",o-a-1,e-2.5],["L",o,e-2.5],["L",o,e+2.5],["L",o+a+1,e+2.5]]},vh:function(o,e,a){return[["M",o-a-1,e+2.5],["L",o,e+2.5],["L",o,e-2.5],["L",o+a+1,e-2.5]]},hvh:function(o,e,a){return[["M",o-(a+1),e+2.5],["L",o-a/2,e+2.5],["L",o-a/2,e-2.5],["L",o+a/2,e-2.5],["L",o+a/2,e+2.5],["L",o+a+1,e+2.5]]},vhv:function(o,e){return[["M",o-5,e+2.5],["L",o-5,e],["L",o,e],["L",o,e-3],["L",o,e+3],["L",o+6.5,e+3]]}};function ba(h,o){var e=h.color;return{symbol:ns[o],style:{lineWidth:2,r:6,stroke:e}}}function qa(h,o,e){for(var a=h.isStack,M=h.connectNulls,N=h.isInCircle,at=h.showSinglePoint,Ct=Za(h,!0,!1,"lineWidth"),Ft=Ro(h.points,M,at),ne=[],ge=0,be=Ft.length;ge<be;ge++){var Ae=Ft[ge];ne=ne.concat(Nu(Ae,N,a,o,e,Ct))}return Ct.path=ne,Ct}function Po(h,o,e,a,M){if(h.length===1)return[["M",h[0].x,h[0].y-M.lineWidth/2],["L",h[0].x,h[0].y],["L",h[0].x,h[0].y+M.lineWidth/2]];var N;return e?(o&&h.length&&h.push({x:h[0].x,y:h[0].y}),N=Kn(h,!1,a)):(N=Zn(h,!1),o&&N.push(["Z"])),N}function Qo(h,o,e,a,M,N){var at=[],Ct=[];Object(i.each)(h,function(ge){var be=$a(ge);at.push(be[1]),Ct.push(be[0])});var Ft=Po(at,o,a,M,N),ne=Po(Ct,o,a,M,N);return e?Ft:Ft.concat(ne)}function Nu(h,o,e,a,M,N){if(h.length){var at=h[0];return Object(i.isArray)(at.y)?Qo(h,o,e,a,M,N):Po(h,o,a,M,N)}return[]}var ds=mo("line",{defaultShapeType:"line"});Object(i.each)(["line","dot","dash","smooth"],function(h){ia("line",h,{draw:function(e,a){var M=h==="smooth",N;if(M){var at=this.coordinate,Ct=at.start,Ft=at.end;N=[[Ct.x,Ft.y],[Ft.x,Ct.y]]}var ne=qa(e,M,N),ge=a.addShape({type:"path",attrs:ne,name:"line",capture:!M});return ge},getMarker:function(e){return ba(e,h)}})});var Lu=ds,$s=function(h){Object(H.b)(o,h);function o(e){var a=h.call(this,e)||this;a.type="path",a.shapeType="line";var M=e.connectNulls,N=M===void 0?!1:M,at=e.showSinglePoint,Ct=at===void 0?!0:at;return a.connectNulls=N,a.showSinglePoint=Ct,a}return o.prototype.createElements=function(e,a,M){M===void 0&&(M=!1);var N=this,at=N.lastElementsMap,Ct=N.elementsMap,Ft=N.elements,ne=N.container,ge=this.getElementId(e),be=this.getShapeInfo(e),Ae=at[ge];if(Ae){var fn=Ae.getModel();(this.isCoordinateChanged||Qa(fn,be))&&(Ae.animate=this.animateOption,Ae.update(be)),delete at[ge]}else{var Xe=this.getShapeFactory();Ae=new Lo({shapeFactory:Xe,container:ne,offscreenGroup:this.getOffscreenGroup()}),Ae.geometry=this,Ae.animate=this.animateOption,Ae.draw(be,M)}return Ft.push(Ae),Ct[ge]=Ae,Ft},o.prototype.getPointsAndData=function(e){for(var a=[],M=[],N=0,at=e.length;N<at;N++){var Ct=e[N];a.push({x:Ct.x,y:Ct.y}),M.push(Ct[m])}return{points:a,data:M}},o.prototype.getShapeInfo=function(e){var a=this.getDrawCfg(e[0]),M=this.getPointsAndData(e),N=M.points,at=M.data;return a.mappingData=e,a.data=at,a.isStack=!!this.getAdjust("stack"),a.points=N,a.connectNulls=this.connectNulls,a.showSinglePoint=this.showSinglePoint,a},o}(Da),_s=$s;function hu(h,o,e,a,M){var N=[];if(h.length){for(var at=[],Ct=[],Ft=0,ne=h.length;Ft<ne;Ft++){var ge=h[Ft];at.push(ge[1]),Ct.push(ge[0])}Ct=Ct.reverse(),Object(i.each)([at,Ct],function(be,Ae){var Xe=[],fn=a.parsePoints(be),En=fn[0];at.length===1&&Ct.length===1?Xe=Ae===0?[["M",En.x-.5,En.y],["L",En.x+.5,En.y]]:[["L",En.x+.5,En.y],["L",En.x-.5,En.y]]:(o&&fn.push({x:En.x,y:En.y}),e?Xe=Kn(fn,!1,M):Xe=Zn(fn,!1),Ae>0&&(Xe[0][0]="L")),N=N.concat(Xe)}),N.push(["Z"])}return N}function Bu(h,o,e,a,M){for(var N=Za(h,o,!o,"lineWidth"),at=h.connectNulls,Ct=h.isInCircle,Ft=h.points,ne=h.showSinglePoint,ge=Ro(Ft,at,ne),be=[],Ae=0,Xe=ge.length;Ae<Xe;Ae++){var fn=ge[Ae];be=be.concat(hu(fn,Ct,e,a,M))}return N.path=be,N}function du(h){var o=h.start,e=h.end;return[[o.x,e.y],[e.x,o.y]]}var tl=mo("area",{defaultShapeType:"area",getDefaultPoints:function(o){var e=o.x,a=o.y0,M=Object(i.isArray)(o.y)?o.y:[a,o.y];return M.map(function(N){return{x:e,y:N}})}});ia("area","area",{draw:function(o,e){var a=Bu(o,!1,!1,this),M=e.addShape({type:"path",attrs:a,name:"area"});return M},getMarker:function(o){var e=o.color;return{symbol:function(M,N,at){return at===void 0&&(at=5.5),[["M",M-at,N-4],["L",M+at,N-4],["L",M+at,N+4],["L",M-at,N+4],["Z"]]},style:{r:5,fill:e}}}});var bh=tl,el=function(h){Object(H.b)(o,h);function o(e){var a=h.call(this,e)||this;a.type="area",a.shapeType="area",a.generatePoints=!0,a.startOnZero=!0;var M=e.startOnZero,N=M===void 0?!0:M,at=e.sortable,Ct=at===void 0?!1:at,Ft=e.showSinglePoint,ne=Ft===void 0?!1:Ft;return a.startOnZero=N,a.sortable=Ct,a.showSinglePoint=ne,a}return o.prototype.getPointsAndData=function(e){for(var a=[],M=[],N=0,at=e.length;N<at;N++){var Ct=e[N];a.push(Ct.points),M.push(Ct[m])}return{points:a,data:M}},o.prototype.getYMinValue=function(){if(this.startOnZero)return h.prototype.getYMinValue.call(this);var e=this.getYScale();return e.min},o}(_s),nl=el,rl=mo("edge",{defaultShapeType:"line",getDefaultPoints:function(o){return $a(o)}});ia("edge","line",{draw:function(o,e){var a=Za(o,!0,!1,"lineWidth"),M=Zn(this.parsePoints(o.points),this.coordinate.isPolar);return e.addShape("path",{attrs:Object(H.a)(Object(H.a)({},a),{path:M})})},getMarker:function(o){return{symbol:"circle",style:{r:4.5,fill:o.color}}}});var dc=rl,il=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.type="edge",e.shapeType="edge",e.generatePoints=!0,e}return o}(Da),al=il,ol=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.type="heatmap",e.paletteCache={},e}return o.prototype.createElements=function(e,a,M){M===void 0&&(M=!1);var N=this.prepareRange(e),at=this.prepareSize(),Ct=Object(i.get)(this.styleOption,["style","shadowBlur"]);return Object(i.isNumber)(Ct)||(Ct=at/2),this.prepareGreyScaleBlurredCircle(at,Ct),this.drawWithRange(e,N,at,Ct),null},o.prototype.clear=function(){h.prototype.clear.call(this),this.clearShadowCanvasCtx(),this.paletteCache={}},o.prototype.prepareRange=function(e){var a=this.getAttribute("color"),M=a.getFields()[0],N=Infinity,at=-Infinity;return e.forEach(function(Ct){var Ft=Ct[m][M];Ft>at&&(at=Ft),Ft<N&&(N=Ft)}),N===at&&(N=at-1),[N,at]},o.prototype.prepareSize=function(){var e=this.getDefaultValue("size");return Object(i.isNumber)(e)||(e=this.getDefaultSize()),e},o.prototype.prepareGreyScaleBlurredCircle=function(e,a){var M=this.getGrayScaleBlurredCanvas(),N=e+a,at=M.getContext("2d");M.width=M.height=N*2,at.clearRect(0,0,M.width,M.height),at.shadowOffsetX=at.shadowOffsetY=N*2,at.shadowBlur=a,at.shadowColor="black",at.beginPath(),at.arc(-N,-N,e,0,Math.PI*2,!0),at.closePath(),at.fill()},o.prototype.drawWithRange=function(e,a,M,N){var at=this.coordinate,Ct=at.start,Ft=at.end,ne=this.coordinate.getWidth(),ge=this.coordinate.getHeight(),be=this.getAttribute("color"),Ae=be.getFields()[0];this.clearShadowCanvasCtx();var Xe=this.getShadowCanvasCtx();a&&(e=e.filter(function(Ji){return Ji[m][Ae]<=a[1]&&Ji[m][Ae]>=a[0]}));for(var fn=this.scales[Ae],En=0,nr=e;En<nr.length;En++){var ar=nr[En],Er=this.getDrawCfg(ar),Mr=Er.x,qr=Er.y,oi=fn.scale(ar[m][Ae]);this.drawGrayScaleBlurredCircle(Mr-Ct.x,qr-Ft.y,M+N,oi,Xe)}var ai=Xe.getImageData(0,0,ne,ge);this.clearShadowCanvasCtx(),this.colorize(ai),Xe.putImageData(ai,0,0);var aa=this.getImageShape();aa.attr("x",Ct.x),aa.attr("y",Ft.y),aa.attr("width",ne),aa.attr("height",ge),aa.attr("img",Xe.canvas),aa.set("origin",this.getShapeInfo(e))},o.prototype.getDefaultSize=function(){var e=this.getAttribute("position"),a=this.coordinate;return Math.min(a.getWidth()/(e.scales[0].ticks.length*4),a.getHeight()/(e.scales[1].ticks.length*4))},o.prototype.clearShadowCanvasCtx=function(){var e=this.getShadowCanvasCtx();e.clearRect(0,0,e.canvas.width,e.canvas.height)},o.prototype.getShadowCanvasCtx=function(){var e=this.shadowCanvas;return e||(e=document.createElement("canvas"),this.shadowCanvas=e),e.width=this.coordinate.getWidth(),e.height=this.coordinate.getHeight(),e.getContext("2d")},o.prototype.getGrayScaleBlurredCanvas=function(){return this.grayScaleBlurredCanvas||(this.grayScaleBlurredCanvas=document.createElement("canvas")),this.grayScaleBlurredCanvas},o.prototype.drawGrayScaleBlurredCircle=function(e,a,M,N,at){var Ct=this.getGrayScaleBlurredCanvas();at.globalAlpha=N,at.drawImage(Ct,e-M,a-M)},o.prototype.colorize=function(e){for(var a=this.getAttribute("color"),M=e.data,N=this.paletteCache,at=3;at<M.length;at+=4){var Ct=M[at];if(Object(i.isNumber)(Ct)){var Ft=N[Ct]?N[Ct]:xt.a.rgb2arr(a.gradient(Ct/256));M[at-3]=Ft[0],M[at-2]=Ft[1],M[at-1]=Ft[2],M[at]=Ct}}},o.prototype.getImageShape=function(){var e=this.imageShape;if(e)return e;var a=this.container;return e=a.addShape({type:"image",attrs:{}}),this.imageShape=e,e},o.prototype.getShapeInfo=function(e){var a=this.getDrawCfg(e[0]);return Object(H.a)(Object(H.a)({},a),{mappingData:e,data:this.getData(e)})},o.prototype.getData=function(e){return e.map(function(a){return a[m]})},o}(Da),sl=ol;function Fu(h,o){o===void 0&&(o=!1);var e=h.x,a=h.y,M=h.y0,N=h.size,at,Ct;Object(i.isArray)(a)?(at=a[0],Ct=a[1]):(at=M,Ct=a);var Ft,ne;Object(i.isArray)(e)?(Ft=e[0],ne=e[1]):(Ft=e-N/2,ne=e+N/2);var ge=[{x:Ft,y:at},{x:Ft,y:Ct}];return o?ge.push({x:ne,y:(Ct+at)/2}):ge.push({x:ne,y:Ct},{x:ne,y:at}),ge}function Gu(h,o){o===void 0&&(o=!0);var e=[],a=h[0];e.push(["M",a.x,a.y]);for(var M=1,N=h.length;M<N;M++)e.push(["L",h[M].x,h[M].y]);return o&&(e.push(["L",a.x,a.y]),e.push(["z"])),e}function qs(h,o){var e=0,a=0,M=0,N=0;return Object(i.isArray)(h)?h.length===1?e=a=M=N=h[0]:h.length===2?(e=M=h[0],a=N=h[1]):h.length===3?(e=h[0],a=N=h[1],M=h[2]):(e=h[0],a=h[1],M=h[2],N=h[3]):e=a=M=N=h,e+a>o&&(e=e?o/(1+a/e):0,a=o-e),M+N>o&&(M=M?o/(1+N/M):0,N=o-M),[e||0,a||0,M||0,N||0]}function vc(h,o,e){var a=[];if(e.isRect){var M=e.isTransposed?{x:e.start.x,y:o[0].y}:{x:o[0].x,y:e.start.y},N=e.isTransposed?{x:e.end.x,y:o[2].y}:{x:o[3].x,y:e.end.y},at=Object(i.get)(h,["background","style","radius"]);if(at){var Ct=e.isTransposed?Math.abs(o[0].y-o[2].y):o[2].x-o[1].x,Ft=e.isTransposed?e.getWidth():e.getHeight(),ne=qs(at,Math.min(Ct,Ft)),ge=ne[0],be=ne[1],Ae=ne[2],Xe=ne[3];a.push(["M",M.x,N.y+ge]),ge!==0&&a.push(["A",ge,ge,0,0,1,M.x+ge,N.y]),a.push(["L",N.x-be,N.y]),be!==0&&a.push(["A",be,be,0,0,1,N.x,N.y+be]),a.push(["L",N.x,M.y-Ae]),Ae!==0&&a.push(["A",Ae,Ae,0,0,1,N.x-Ae,M.y]),a.push(["L",M.x+Xe,M.y]),Xe!==0&&a.push(["A",Xe,Xe,0,0,1,M.x,M.y-Xe])}else a.push(["M",M.x,M.y]),a.push(["L",N.x,M.y]),a.push(["L",N.x,N.y]),a.push(["L",M.x,N.y]),a.push(["L",M.x,M.y]);a.push(["z"])}if(e.isPolar){var fn=e.getCenter(),En=za(h,e),nr=En.startAngle,ar=En.endAngle;if(e.type!=="theta"&&!e.isTransposed)a=ka(fn.x,fn.y,e.getRadius(),nr,ar);else{var Er=function(ai){return Math.pow(ai,2)},ge=Math.sqrt(Er(fn.x-o[0].x)+Er(fn.y-o[0].y)),be=Math.sqrt(Er(fn.x-o[2].x)+Er(fn.y-o[2].y));a=ka(fn.x,fn.y,ge,e.startAngle,e.endAngle,be)}}return a}function ul(h,o,e){var a=e.getWidth(),M=e.getHeight(),N=e.type==="rect",at=[],Ct=(h[2].x-h[1].x)/2,Ft=e.isTransposed?Ct*M/a:Ct*a/M;return o==="round"?(N?(at.push(["M",h[0].x,h[0].y+Ft]),at.push(["L",h[1].x,h[1].y-Ft]),at.push(["A",Ct,Ct,0,0,1,h[2].x,h[2].y-Ft]),at.push(["L",h[3].x,h[3].y+Ft]),at.push(["A",Ct,Ct,0,0,1,h[0].x,h[0].y+Ft])):(at.push(["M",h[0].x,h[0].y]),at.push(["L",h[1].x,h[1].y]),at.push(["A",Ct,Ct,0,0,1,h[2].x,h[2].y]),at.push(["L",h[3].x,h[3].y]),at.push(["A",Ct,Ct,0,0,1,h[0].x,h[0].y])),at.push(["z"])):at=Gu(h),at}function pc(h,o,e){var a=[];return Object(i.isNil)(o)?e?a.push(["M",h[0].x,h[0].y],["L",h[1].x,h[1].y],["L",h[2].x,h[2].y],["L",h[2].x,h[2].y],["Z"]):a.push(["M",h[0].x,h[0].y],["L",h[1].x,h[1].y],["L",h[2].x,h[2].y],["L",h[3].x,h[3].y],["Z"]):a.push(["M",h[0].x,h[0].y],["L",h[1].x,h[1].y],["L",o[1].x,o[1].y],["L",o[0].x,o[0].y],["Z"]),a}function tu(h,o,e){var a,M,N,at,Ct=h[0],Ft=h[1],ne=h[2],ge=h[3],be=[0,0,0,0],Ae=be[0],Xe=be[1],fn=be[2],En=be[3];Ct.y<Ft.y?(Ft=h[0],Ct=h[1],ge=h[2],ne=h[3],a=qs(e,Math.min(ge.x-Ct.x,Ct.y-Ft.y)),En=a[0],fn=a[1],Xe=a[2],Ae=a[3]):(M=qs(e,Math.min(ge.x-Ct.x,Ct.y-Ft.y)),Ae=M[0],Xe=M[1],fn=M[2],En=M[3]),o.isTransposed&&(Ct=h[0],ge=h[1],ne=h[2],Ft=h[3],h[0].x>h[1].x?(ge=h[0],Ct=h[1],Ft=h[2],ne=h[3],N=qs(e,Math.min(ge.x-Ct.x,Ct.y-Ft.y)),Ae=N[0],En=N[1],fn=N[2],Xe=N[3]):(at=qs(e,Math.min(ge.x-Ct.x,Ct.y-Ft.y)),Xe=at[0],fn=at[1],En=at[2],Ae=at[3]));var nr=[];return nr.push(["M",Ft.x,Ft.y+Ae]),Ae!==0&&nr.push(["A",Ae,Ae,0,0,1,Ft.x+Ae,Ft.y]),nr.push(["L",ne.x-Xe,ne.y]),Xe!==0&&nr.push(["A",Xe,Xe,0,0,1,ne.x,ne.y+Xe]),nr.push(["L",ge.x,ge.y-fn]),fn!==0&&nr.push(["A",fn,fn,0,0,1,ge.x-fn,ge.y]),nr.push(["L",Ct.x+En,Ct.y]),En!==0&&nr.push(["A",En,En,0,0,1,Ct.x,Ct.y-En]),nr.push(["L",Ft.x,Ft.y+Ae]),nr.push(["z"]),nr}var cl=mo("interval",{defaultShapeType:"rect",getDefaultPoints:function(o){return Fu(o)}});ia("interval","rect",{draw:function(o,e){var a=Za(o,!1,!0),M=e,N=o==null?void 0:o.background;if(N){M=e.addGroup();var at=Ao(o),Ct=vc(o,this.parsePoints(o.points),this.coordinate);M.addShape("path",{attrs:Object(H.a)(Object(H.a)({},at),{path:Ct}),zIndex:-1,name:Xa})}var Ft;a.radius&&this.coordinate.isRect?Ft=tu(this.parsePoints(o.points),this.coordinate,a.radius):Ft=this.parsePath(ul(o.points,a.lineCap,this.coordinate));var ne=M.addShape("path",{attrs:Object(H.a)(Object(H.a)({},a),{path:Ft}),name:"interval"});return N?M:ne},getMarker:function(o){var e=o.color,a=o.isInPolar;return a?{symbol:"circle",style:{r:4.5,fill:e}}:{symbol:"square",style:{r:4,fill:e}}}});var xh=cl;function ll(h,o){var e=h.length,a=h;Object(i.isString)(a[0])&&(a=h.map(function(Ct){return o.translate(Ct)}));for(var M=a[1]-a[0],N=2;N<e;N++){var at=a[N]-a[N-1];M>at&&(M=at)}return M}function fl(h,o){if(o){var e=Object(i.flatten)(h),a=Object(i.valuesOfKey)(e,o);return a.length}return h.length}function gc(h){var o=h.theme,e=h.coordinate,a=h.getXScale(),M=a.values,N=h.beforeMappingData,at=M.length,Ct=rr(h.coordinate),Ft=h.intervalPadding,ne=h.dodgePadding,ge=h.maxColumnWidth||o.maxColumnWidth,be=h.minColumnWidth||o.minColumnWidth,Ae=h.columnWidthRatio||o.columnWidthRatio,Xe=h.multiplePieWidthRatio||o.multiplePieWidthRatio,fn=h.roseWidthRatio||o.roseWidthRatio;if(a.isLinear&&M.length>1){M.sort();var En=ll(M,a);at=(a.max-a.min)/En,M.length>at&&(at=M.length)}var nr=a.range,ar=1/at,Er=1;if(e.isPolar?e.isTransposed&&at>1?Er=Xe:Er=fn:(a.isLinear&&(ar*=nr[1]-nr[0]),Er=Ae),!Object(i.isNil)(Ft)&&Ft>=0){var Mr=Ft/Ct;ar=(1-(at-1)*Mr)/at}else ar*=Er;if(h.getAdjust("dodge")){var qr=h.getAdjust("dodge"),oi=qr.dodgeBy,ai=fl(N,oi);if(!Object(i.isNil)(ne)&&ne>=0){var aa=ne/Ct;ar=(ar-aa*(ai-1))/ai}else!Object(i.isNil)(Ft)&&Ft>=0&&(ar*=Er),ar=ar/ai;ar=ar>=0?ar:0}if(!Object(i.isNil)(ge)&&ge>=0){var Ji=ge/Ct;ar>Ji&&(ar=Ji)}if(!Object(i.isNil)(be)&&be>=0){var _i=be/Ct;ar<_i&&(ar=_i)}return ar}var hl=function(h){Object(H.b)(o,h);function o(e){var a=h.call(this,e)||this;a.type="interval",a.shapeType="interval",a.generatePoints=!0;var M=e.background;return a.background=M,a}return o.prototype.createShapePointsCfg=function(e){var a=h.prototype.createShapePointsCfg.call(this,e),M,N=this.getAttribute("size");if(N){M=this.getAttributeValues(N,e)[0];var at=this.coordinate,Ct=rr(at);M=M/Ct}else this.defaultSize||(this.defaultSize=gc(this)),M=this.defaultSize;return a.size=M,a},o.prototype.adjustScale=function(){h.prototype.adjustScale.call(this);var e=this.getYScale();if(this.coordinate.type==="theta")e.change({nice:!1,min:0,max:Math.max(Math.max.apply(null,e.values),e.max)});else{var a=this.scaleDefs,M=e.field,N=e.min,at=e.max,Ct=e.type;Ct!=="time"&&(N>0&&!Object(i.get)(a,[M,"min"])&&e.change({min:0}),at<=0&&!Object(i.get)(a,[M,"max"])&&e.change({max:0}))}},o.prototype.getDrawCfg=function(e){var a=h.prototype.getDrawCfg.call(this,e);return a.background=this.background,a},o}(Da),eu=hl,Uu=function(h){Object(H.b)(o,h);function o(e){var a=h.call(this,e)||this;a.type="line";var M=e.sortable,N=M===void 0?!1:M;return a.sortable=N,a}return o}(_s),mc=Uu,yc=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],dl=["cross","tick","plus","hyphen","line"];function zu(h,o,e,a,M){var N=Za(o,M,!M,"r"),at=h.parsePoints(o.points),Ct=at[0];if(o.isStack)Ct=at[1];else if(at.length>1){for(var Ft=e.addGroup(),ne=0,ge=at;ne<ge.length;ne++){var be=ge[ne];Ft.addShape({type:"marker",attrs:Object(H.a)(Object(H.a)(Object(H.a)({},N),{symbol:vn[a]||a}),be)})}return Ft}return e.addShape({type:"marker",attrs:Object(H.a)(Object(H.a)(Object(H.a)({},N),{symbol:vn[a]||a}),Ct)})}var vl=mo("point",{defaultShapeType:"hollow-circle",getDefaultPoints:function(o){return $a(o)}});Object(i.each)(yc,function(h){ia("point","hollow-"+h,{draw:function(e,a){return zu(this,e,a,h,!0)},getMarker:function(e){var a=e.color;return{symbol:vn[h]||h,style:{r:4.5,stroke:a,fill:null}}}})});var Oh=vl,pl=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.type="point",e.shapeType="point",e.generatePoints=!0,e}return o.prototype.getDrawCfg=function(e){var a=h.prototype.getDrawCfg.call(this,e);return Object(H.a)(Object(H.a)({},a),{isStack:!!this.getAdjust("stack")})},o}(Da),gl=pl;function ml(h){for(var o=h[0],e=1,a=[["M",o.x,o.y]];e<h.length;){var M=h[e];(M.x!==h[e-1].x||M.y!==h[e-1].y)&&(a.push(["L",M.x,M.y]),M.x===o.x&&M.y===o.y&&e<h.length-1&&(o=h[e+1],a.push(["Z"]),a.push(["M",o.x,o.y]),e++)),e++}return Object(i.isEqual)(Object(i.last)(a),o)||a.push(["L",o.x,o.y]),a.push(["Z"]),a}var nu=mo("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(o){var e=[];return Object(i.each)(o.x,function(a,M){var N=o.y[M];e.push({x:a,y:N})}),e}});ia("polygon","polygon",{draw:function(o,e){if(!Object(i.isEmpty)(o.points)){var a=Za(o,!0,!0),M=this.parsePath(ml(o.points));return e.addShape("path",{attrs:Object(H.a)(Object(H.a)({},a),{path:M}),name:"polygon"})}},getMarker:function(o){var e=o.color;return{symbol:"square",style:{r:4,fill:e}}}});var Eh=nu,yl=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.type="polygon",e.shapeType="polygon",e.generatePoints=!0,e}return o.prototype.createShapePointsCfg=function(e){var a=h.prototype.createShapePointsCfg.call(this,e),M=a.x,N=a.y,at;if(!(Object(i.isArray)(M)&&Object(i.isArray)(N))){var Ct=this.getXScale(),Ft=this.getYScale(),ne=Ct.values.length,ge=Ft.values.length,be=.5*1/ne,Ae=.5*1/ge;Ct.isCategory&&Ft.isCategory?(M=[M-be,M-be,M+be,M+be],N=[N-Ae,N+Ae,N+Ae,N-Ae]):Object(i.isArray)(M)?(at=M,M=[at[0],at[0],at[1],at[1]],N=[N-Ae/2,N+Ae/2,N+Ae/2,N-Ae/2]):Object(i.isArray)(N)&&(at=N,N=[at[0],at[1],at[1],at[0]],M=[M-be/2,M-be/2,M+be/2,M+be/2]),a.x=M,a.y=N}return a},o}(Da),bl=yl,xl=mo("schema",{defaultShapeType:""}),jd=xl,Ol=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.type="schema",e.shapeType="schema",e.generatePoints=!0,e}return o.prototype.createShapePointsCfg=function(e){var a=h.prototype.createShapePointsCfg.call(this,e),M,N=this.getAttribute("size");if(N){M=this.getAttributeValues(N,e)[0];var at=this.coordinate,Ct=rr(at);M=M/Ct}else this.defaultSize||(this.defaultSize=gc(this)),M=this.defaultSize;return a.size=M,a},o}(Da),bc=Ol;ia("area","line",{draw:function(o,e){var a=Bu(o,!0,!1,this),M=e.addShape({type:"path",attrs:a,name:"area"});return M},getMarker:function(o){var e=o.color;return{symbol:function(M,N,at){return at===void 0&&(at=5.5),[["M",M-at,N-4],["L",M+at,N-4],["L",M+at,N+4],["L",M-at,N+4],["Z"]]},style:{r:5,stroke:e,fill:null}}}}),ia("area","smooth",{draw:function(o,e){var a=this.coordinate,M=Bu(o,!1,!0,this,du(a)),N=e.addShape({type:"path",attrs:M,name:"area"});return N},getMarker:function(o){var e=o.color;return{symbol:function(M,N,at){return at===void 0&&(at=5.5),[["M",M-at,N-4],["L",M+at,N-4],["L",M+at,N+4],["L",M-at,N+4],["Z"]]},style:{r:5,fill:e}}}}),ia("area","smooth-line",{draw:function(o,e){var a=this.coordinate,M=Bu(o,!0,!0,this,du(a)),N=e.addShape({type:"path",attrs:M,name:"area"});return N},getMarker:function(o){var e=o.color;return{symbol:function(M,N,at){return at===void 0&&(at=5.5),[["M",M-at,N-4],["L",M+at,N-4],["L",M+at,N+4],["L",M-at,N+4],["Z"]]},style:{r:5,stroke:e,fill:null}}}});function xc(h,o){return["C",h.x*1/2+o.x*1/2,h.y,h.x*1/2+o.x*1/2,o.y,o.x,o.y]}function Oc(h,o){var e=[];e.push({x:o.x,y:o.y}),e.push(h);var a=["Q"];return Object(i.each)(e,function(M){a.push(M.x,M.y)}),a}function El(h,o,e){var a=Oc(o,e),M=[["M",h.x,h.y]];return M.push(a),M}function Sl(h,o){var e=Oc(h[1],o),a=Oc(h[3],o),M=[["M",h[0].x,h[0].y]];return M.push(a),M.push(["L",h[3].x,h[3].y]),M.push(["L",h[2].x,h[2].y]),M.push(e),M.push(["L",h[1].x,h[1].y]),M.push(["L",h[0].x,h[0].y]),M.push(["Z"]),M}ia("edge","arc",{draw:function(o,e){var a=Za(o,!0,!1,"lineWidth"),M=o.points,N=M.length>2?"weight":"normal",at;if(o.isInCircle){var Ct={x:0,y:1};return N==="normal"?at=El(M[0],M[1],Ct):(a.fill=a.stroke,at=Sl(M,Ct)),at=this.parsePath(at),e.addShape("path",{attrs:Object(H.a)(Object(H.a)({},a),{path:at})})}else{if(N==="normal")return M=this.parsePoints(M),at=vo((M[1].x+M[0].x)/2,M[0].y,Math.abs(M[1].x-M[0].x)/2,Math.PI,Math.PI*2),e.addShape("path",{attrs:Object(H.a)(Object(H.a)({},a),{path:at})});var Ft=xc(M[1],M[3]),ne=xc(M[2],M[0]);return at=[["M",M[0].x,M[0].y],["L",M[1].x,M[1].y],Ft,["L",M[3].x,M[3].y],["L",M[2].x,M[2].y],ne,["Z"]],at=this.parsePath(at),a.fill=a.stroke,e.addShape("path",{attrs:Object(H.a)(Object(H.a)({},a),{path:at})})}},getMarker:function(o){return{symbol:"circle",style:{r:4.5,fill:o.color}}}});function wl(h,o){var e=xc(h,o),a=[["M",h.x,h.y]];return a.push(e),a}ia("edge","smooth",{draw:function(o,e){var a=Za(o,!0,!1,"lineWidth"),M=o.points,N=this.parsePath(wl(M[0],M[1]));return e.addShape("path",{attrs:Object(H.a)(Object(H.a)({},a),{path:N})})},getMarker:function(o){return{symbol:"circle",style:{r:4.5,fill:o.color}}}});var vu=1/3;function Cl(h,o){var e=[];e.push({x:h.x,y:h.y*(1-vu)+o.y*vu}),e.push({x:o.x,y:h.y*(1-vu)+o.y*vu}),e.push(o);var a=[["M",h.x,h.y]];return Object(i.each)(e,function(M){a.push(["L",M.x,M.y])}),a}ia("edge","vhv",{draw:function(o,e){var a=Za(o,!0,!1,"lineWidth"),M=o.points,N=this.parsePath(Cl(M[0],M[1]));return e.addShape("path",{attrs:Object(H.a)(Object(H.a)({},a),{path:N})})},getMarker:function(o){return{symbol:"circle",style:{r:4.5,fill:o.color}}}}),ia("interval","funnel",{getPoints:function(o){return o.size=o.size*2,Fu(o)},draw:function(o,e){var a=Za(o,!1,!0),M=this.parsePath(pc(o.points,o.nextPoints,!1)),N=e.addShape("path",{attrs:Object(H.a)(Object(H.a)({},a),{path:M}),name:"interval"});return N},getMarker:function(o){var e=o.color;return{symbol:"square",style:{r:4,fill:e}}}}),ia("interval","hollow-rect",{draw:function(o,e){var a=Za(o,!0,!1),M=e,N=o==null?void 0:o.background;if(N){M=e.addGroup();var at=Ao(o),Ct=vc(o,this.parsePoints(o.points),this.coordinate);M.addShape("path",{attrs:Object(H.a)(Object(H.a)({},at),{path:Ct}),zIndex:-1,name:Xa})}var Ft=this.parsePath(Gu(o.points)),ne=M.addShape("path",{attrs:Object(H.a)(Object(H.a)({},a),{path:Ft}),name:"interval"});return N?M:ne},getMarker:function(o){var e=o.color,a=o.isInPolar;return a?{symbol:"circle",style:{r:4.5,stroke:e,fill:null}}:{symbol:"square",style:{r:4,stroke:e,fill:null}}}});function pu(h){var o=h.x,e=h.y,a=h.y0;return Object(i.isArray)(e)?e.map(function(M,N){return{x:Object(i.isArray)(o)?o[N]:o,y:M}}):[{x:o,y:a},{x:o,y:e}]}ia("interval","line",{getPoints:function(o){return pu(o)},draw:function(o,e){var a=Za(o,!0,!1,"lineWidth"),M=te(Object(H.a)({},a),["fill"]),N=this.parsePath(Gu(o.points,!1)),at=e.addShape("path",{attrs:Object(H.a)(Object(H.a)({},M),{path:N}),name:"interval"});return at},getMarker:function(o){var e=o.color;return{symbol:function(M,N,at){return[["M",M,N-at],["L",M,N+at]]},style:{r:5,stroke:e}}}}),ia("interval","pyramid",{getPoints:function(o){return o.size=o.size*2,Fu(o,!0)},draw:function(o,e){var a=Za(o,!1,!0),M=this.parsePath(pc(o.points,o.nextPoints,!0)),N=e.addShape("path",{attrs:Object(H.a)(Object(H.a)({},a),{path:M}),name:"interval"});return N},getMarker:function(o){var e=o.color;return{symbol:"square",style:{r:4,fill:e}}}});function Ml(h){var o=h.x,e=h.y,a=h.y0,M=h.size,N,at;Object(i.isArray)(e)?(N=e[0],at=e[1]):(N=a,at=e);var Ct=o+M/2,Ft=o-M/2;return[{x:o,y:N},{x:o,y:at},{x:Ft,y:N},{x:Ct,y:N},{x:Ft,y:at},{x:Ct,y:at}]}function Al(h){return[["M",h[0].x,h[0].y],["L",h[1].x,h[1].y],["M",h[2].x,h[2].y],["L",h[3].x,h[3].y],["M",h[4].x,h[4].y],["L",h[5].x,h[5].y]]}ia("interval","tick",{getPoints:function(o){return Ml(o)},draw:function(o,e){var a=Za(o,!0,!1),M=this.parsePath(Al(o.points)),N=e.addShape("path",{attrs:Object(H.a)(Object(H.a)({},a),{path:M}),name:"interval"});return N},getMarker:function(o){var e=o.color;return{symbol:function(M,N,at){return[["M",M-at/2,N-at],["L",M+at/2,N-at],["M",M,N-at],["L",M,N+at],["M",M-at/2,N+at],["L",M+at/2,N+at]]},style:{r:5,stroke:e}}}});var Tl=function(o,e,a){var M=o.x,N=o.y,at=e.x,Ct=e.y,Ft;switch(a){case"hv":Ft=[{x:at,y:N}];break;case"vh":Ft=[{x:M,y:Ct}];break;case"hvh":var ne=(at+M)/2;Ft=[{x:ne,y:N},{x:ne,y:Ct}];break;case"vhv":var ge=(N+Ct)/2;Ft=[{x:M,y:ge},{x:at,y:ge}];break;default:break}return Ft};function Sh(h,o){var e=[];return Object(i.each)(h,function(a,M){var N=h[M+1];if(e.push(a),N){var at=Tl(a,N,o);e=e.concat(at)}}),e}function wh(h){return h.map(function(o,e){return e===0?["M",o.x,o.y]:["L",o.x,o.y]})}function Ch(h,o){var e=Ro(h.points,h.connectNulls,h.showSinglePoint),a=[];return Object(i.each)(e,function(M){var N=Sh(M,o);a=a.concat(wh(N))}),Object(H.a)(Object(H.a)({},Za(h,!0,!1,"lineWidth")),{path:a})}Object(i.each)(["hv","vh","hvh","vhv"],function(h){ia("line",h,{draw:function(e,a){var M=Ch(e,h),N=a.addShape({type:"path",attrs:M,name:"line"});return N},getMarker:function(e){return ba(e,h)}})}),Object(i.each)(dl,function(h){ia("point",h,{draw:function(e,a){return zu(this,e,a,h,!0)},getMarker:function(e){var a=e.color;return{symbol:vn[h],style:{r:4.5,stroke:a,fill:null}}}})}),ia("point","image",{draw:function(o,e){var a=Za(o,!1,!1,"r").r,M=this.parsePoints(o.points),N=M[0];if(o.isStack)N=M[1];else if(M.length>1){for(var at=e.addGroup(),Ct=0,Ft=M;Ct<Ft.length;Ct++){var ne=Ft[Ct];at.addShape("image",{attrs:{x:ne.x-a/2,y:ne.y-a,width:a,height:a,img:o.shape[1]}})}return at}return e.addShape("image",{attrs:{x:N.x-a/2,y:N.y-a,width:a,height:a,img:o.shape[1]}})},getMarker:function(o){var e=o.color;return{symbol:"circle",style:{r:4.5,fill:e}}}}),Object(i.each)(yc,function(h){ia("point",h,{draw:function(e,a){return zu(this,e,a,h,!1)},getMarker:function(e){var a=e.color;return{symbol:vn[h]||h,style:{r:4.5,fill:a}}}})});function Ec(h){var o=Object(i.isArray)(h)?h:[h],e=o[0],a=o[o.length-1],M=o.length>1?o[1]:e,N=o.length>3?o[3]:a,at=o.length>2?o[2]:M;return{min:e,max:a,min1:M,max1:N,median:at}}function Sc(h,o,e){var a=e/2,M;if(Object(i.isArray)(o)){var N=Ec(o),at=N.min,Ct=N.max,Ft=N.median,ne=N.min1,ge=N.max1,be=h-a,Ae=h+a;M=[[be,Ct],[Ae,Ct],[h,Ct],[h,ge],[be,ne],[be,ge],[Ae,ge],[Ae,ne],[h,ne],[h,at],[be,at],[Ae,at],[be,Ft],[Ae,Ft]]}else{o=Object(i.isNil)(o)?.5:o;var Xe=Ec(h),at=Xe.min,Ct=Xe.max,Ft=Xe.median,ne=Xe.min1,ge=Xe.max1,fn=o-a,En=o+a;M=[[at,fn],[at,En],[at,o],[ne,o],[ne,fn],[ne,En],[ge,En],[ge,fn],[ge,o],[Ct,o],[Ct,fn],[Ct,En],[Ft,fn],[Ft,En]]}return M.map(function(nr){return{x:nr[0],y:nr[1]}})}function jl(h){return[["M",h[0].x,h[0].y],["L",h[1].x,h[1].y],["M",h[2].x,h[2].y],["L",h[3].x,h[3].y],["M",h[4].x,h[4].y],["L",h[5].x,h[5].y],["L",h[6].x,h[6].y],["L",h[7].x,h[7].y],["L",h[4].x,h[4].y],["Z"],["M",h[8].x,h[8].y],["L",h[9].x,h[9].y],["M",h[10].x,h[10].y],["L",h[11].x,h[11].y],["M",h[12].x,h[12].y],["L",h[13].x,h[13].y]]}ia("schema","box",{getPoints:function(o){var e=o.x,a=o.y,M=o.size;return Sc(e,a,M)},draw:function(o,e){var a=Za(o,!0,!1),M=this.parsePath(jl(o.points)),N=e.addShape("path",{attrs:Object(H.a)(Object(H.a)({},a),{path:M,name:"schema"})});return N},getMarker:function(o){var e=o.color;return{symbol:function(M,N,at){var Ct=[N-6,N-3,N,N+3,N+6],Ft=Sc(M,Ct,at);return[["M",Ft[0].x+1,Ft[0].y],["L",Ft[1].x-1,Ft[1].y],["M",Ft[2].x,Ft[2].y],["L",Ft[3].x,Ft[3].y],["M",Ft[4].x,Ft[4].y],["L",Ft[5].x,Ft[5].y],["L",Ft[6].x,Ft[6].y],["L",Ft[7].x,Ft[7].y],["L",Ft[4].x,Ft[4].y],["Z"],["M",Ft[8].x,Ft[8].y],["L",Ft[9].x,Ft[9].y],["M",Ft[10].x+1,Ft[10].y],["L",Ft[11].x-1,Ft[11].y],["M",Ft[12].x,Ft[12].y],["L",Ft[13].x,Ft[13].y]]},style:{r:6,lineWidth:1,stroke:e}}}});function Il(h){var o=Object(i.isArray)(h)?h:[h],e=o.sort(function(a,M){return M-a});return Kt(e,4,e[e.length-1])}function _u(h,o,e){var a=Il(o);return[{x:h,y:a[0]},{x:h,y:a[1]},{x:h-e/2,y:a[2]},{x:h-e/2,y:a[1]},{x:h+e/2,y:a[1]},{x:h+e/2,y:a[2]},{x:h,y:a[2]},{x:h,y:a[3]}]}function Pl(h){return[["M",h[0].x,h[0].y],["L",h[1].x,h[1].y],["M",h[2].x,h[2].y],["L",h[3].x,h[3].y],["L",h[4].x,h[4].y],["L",h[5].x,h[5].y],["Z"],["M",h[6].x,h[6].y],["L",h[7].x,h[7].y]]}ia("schema","candle",{getPoints:function(o){var e=o.x,a=o.y,M=o.size;return _u(e,a,M)},draw:function(o,e){var a=Za(o,!0,!0),M=this.parsePath(Pl(o.points)),N=e.addShape("path",{attrs:Object(H.a)(Object(H.a)({},a),{path:M,name:"schema"})});return N},getMarker:function(o){var e=o.color;return{symbol:function(M,N,at){var Ct=[N+7.5,N+3,N-3,N-7.5],Ft=_u(M,Ct,at);return[["M",Ft[0].x,Ft[0].y],["L",Ft[1].x,Ft[1].y],["M",Ft[2].x,Ft[2].y],["L",Ft[3].x,Ft[3].y],["L",Ft[4].x,Ft[4].y],["L",Ft[5].x,Ft[5].y],["Z"],["M",Ft[6].x,Ft[6].y],["L",Ft[7].x,Ft[7].y]]},style:{lineWidth:1,stroke:e,fill:e,r:6}}}});function Dl(h,o){var e=Math.abs(h[0].x-h[2].x),a=Math.abs(h[0].y-h[2].y),M=Math.min(e,a);o&&(M=Object(i.clamp)(o,0,Math.min(e,a))),M=M/2;var N=(h[0].x+h[2].x)/2,at=(h[0].y+h[2].y)/2;return{x:N-M,y:at-M,width:M*2,height:M*2}}ia("polygon","square",{draw:function(o,e){if(!Object(i.isEmpty)(o.points)){var a=Za(o,!0,!0),M=this.parsePoints(o.points);return e.addShape("rect",{attrs:Object(H.a)(Object(H.a)({},a),Dl(M,o.size)),name:"polygon"})}},getMarker:function(o){var e=o.color;return{symbol:"square",style:{r:4,fill:e}}}});var Mh=function(h){Object(H.b)(o,h);function o(){return h!==null&&h.apply(this,arguments)||this}return o.prototype.getLabelValueDir=function(e){var a="y",M=e.points;return M[0][a]<=M[2][a]?1:-1},o.prototype.getLabelOffsetPoint=function(e,a,M){var N,at=h.prototype.getLabelOffsetPoint.call(this,e,a,M),Ct=this.getCoordinate().isTransposed,Ft=Ct?"x":"y",ne=this.getLabelValueDir(e.mappingData);return Object(H.a)(Object(H.a)({},at),(N={},N[Ft]=at[Ft]*ne,N))},o.prototype.getThemedLabelCfg=function(e){var a=this.geometry,M=this.getDefaultLabelCfg(),N=a.theme;return Object(i.deepMix)({},M,N.labels,e.position==="middle"?{offset:0}:{},e)},o.prototype.setLabelPosition=function(e,a,M,N){var at=this.getCoordinate(),Ct=at.isTransposed,Ft=a.points,ne=at.convert(Ft[0]),ge=at.convert(Ft[2]),be=this.getLabelValueDir(a),Ae,Xe,fn,En,nr=Object(i.isArray)(a.shape)?a.shape[0]:a.shape;if(nr==="funnel"||nr==="pyramid"){var ar=Object(i.get)(a,"nextPoints"),Er=Object(i.get)(a,"points");if(ar){var Mr=at.convert(Er[0]),qr=at.convert(Er[1]),oi=at.convert(ar[0]),ai=at.convert(ar[1]);Ct?(Ae=Math.min(oi.y,Mr.y),fn=Math.max(oi.y,Mr.y),Xe=(qr.x+ai.x)/2,En=(Mr.x+oi.x)/2):(Ae=Math.min((qr.y+ai.y)/2,(Mr.y+oi.y)/2),fn=Math.max((qr.y+ai.y)/2,(Mr.y+oi.y)/2),Xe=ai.x,En=Mr.x)}else Ae=Math.min(ge.y,ne.y),fn=Math.max(ge.y,ne.y),Xe=ge.x,En=ne.x}else Ae=Math.min(ge.y,ne.y),fn=Math.max(ge.y,ne.y),Xe=ge.x,En=ne.x;switch(N){case"right":e.x=Xe,e.y=(Ae+fn)/2,e.textAlign=Object(i.get)(e,"textAlign",be>0?"left":"right");break;case"left":e.x=En,e.y=(Ae+fn)/2,e.textAlign=Object(i.get)(e,"textAlign",be>0?"left":"right");break;case"bottom":Ct&&(e.x=(Xe+En)/2),e.y=fn,e.textAlign=Object(i.get)(e,"textAlign","center"),e.textBaseline=Object(i.get)(e,"textBaseline",be>0?"bottom":"top");break;case"middle":Ct&&(e.x=(Xe+En)/2),e.y=(Ae+fn)/2,e.textAlign=Object(i.get)(e,"textAlign","center"),e.textBaseline=Object(i.get)(e,"textBaseline","middle");break;case"top":Ct&&(e.x=(Xe+En)/2),e.y=Ae,e.textAlign=Object(i.get)(e,"textAlign","center"),e.textBaseline=Object(i.get)(e,"textBaseline",be>0?"bottom":"top");break;default:break}},o}(Ge),Ah=Mh,Wu=Math.PI/2,Th=function(h){Object(H.b)(o,h);function o(){return h!==null&&h.apply(this,arguments)||this}return o.prototype.getLabelOffset=function(e){var a=this.getCoordinate(),M=0;if(Object(i.isNumber)(e))M=e;else if(Object(i.isString)(e)&&e.indexOf("%")!==-1){var N=a.getRadius();a.innerRadius>0&&(N=N*(1-a.innerRadius)),M=parseFloat(e)*.01*N}return M},o.prototype.getLabelItems=function(e){var a=h.prototype.getLabelItems.call(this,e),M=this.geometry.getYScale();return Object(i.map)(a,function(N){if(N&&M){var at=M.scale(Object(i.get)(N.data,M.field));return Object(H.a)(Object(H.a)({},N),{percent:at})}return N})},o.prototype.getLabelAlign=function(e){var a=this.getCoordinate(),M;if(e.labelEmit)M=e.angle<=Math.PI/2&&e.angle>=-Math.PI/2?"left":"right";else if(!a.isTransposed)M="center";else{var N=a.getCenter(),at=e.offset;Math.abs(e.x-N.x)<1?M="center":e.angle>Math.PI||e.angle<=0?M=at>0?"left":"right":M=at>0?"right":"left"}return M},o.prototype.getLabelPoint=function(e,a,M){var N=1,at,Ct=e.content[M];this.isToMiddle(a)?at=this.getMiddlePoint(a.points):(e.content.length===1&&M===0?M=1:M===0&&(N=-1),at=this.getArcPoint(a,M));var Ft=e.offset*N,ne=this.getPointAngle(at),ge=e.labelEmit,be=this.getCirclePoint(ne,Ft,at,ge);return be.r===0?be.content="":(be.content=Ct,be.angle=ne,be.color=a.color),be.rotate=e.autoRotate?this.getLabelRotate(ne,Ft,ge):e.rotate,be.start={x:at.x,y:at.y},be},o.prototype.getArcPoint=function(e,a){return a===void 0&&(a=0),!Object(i.isArray)(e.x)&&!Object(i.isArray)(e.y)?{x:e.x,y:e.y}:{x:Object(i.isArray)(e.x)?e.x[a]:e.x,y:Object(i.isArray)(e.y)?e.y[a]:e.y}},o.prototype.getPointAngle=function(e){return ur(this.getCoordinate(),e)},o.prototype.getCirclePoint=function(e,a,M,N){var at=this.getCoordinate(),Ct=at.getCenter(),Ft=sn(at,M);if(Ft===0)return Object(H.a)(Object(H.a)({},Ct),{r:Ft});var ne=e;if(at.isTransposed&&Ft>a&&!N){var ge=Math.asin(a/(2*Ft));ne=e+ge*2}else Ft=Ft+a;return{x:Ct.x+Ft*Math.cos(ne),y:Ct.y+Ft*Math.sin(ne),r:Ft}},o.prototype.getLabelRotate=function(e,a,M){var N=e+Wu;return M&&(N-=Wu),N&&(N>Wu?N=N-Math.PI:N<-Wu&&(N=N+Math.PI)),N},o.prototype.getMiddlePoint=function(e){var a=this.getCoordinate(),M=e.length,N={x:0,y:0};return Object(i.each)(e,function(at){N.x+=at.x,N.y+=at.y}),N.x/=M,N.y/=M,N=a.convert(N),N},o.prototype.isToMiddle=function(e){return e.x.length>2},o}(Ge),wc=Th,Rl=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.defaultLayout="distribute",e}return o.prototype.getDefaultLabelCfg=function(e,a){var M=h.prototype.getDefaultLabelCfg.call(this,e,a);return Object(i.deepMix)({},M,Object(i.get)(this.geometry.theme,"pieLabels",{}))},o.prototype.getLabelOffset=function(e){return h.prototype.getLabelOffset.call(this,e)||0},o.prototype.getLabelRotate=function(e,a,M){var N;return a<0&&(N=e,N>Math.PI/2&&(N=N-Math.PI),N<-Math.PI/2&&(N=N+Math.PI)),N},o.prototype.getLabelAlign=function(e){var a=this.getCoordinate(),M=a.getCenter(),N;return e.angle<=Math.PI/2&&e.x>=M.x?N="left":N="right",e.offset<=0&&(N==="right"?N="left":N="right"),N},o.prototype.getArcPoint=function(e){return e},o.prototype.getPointAngle=function(e){var a=this.getCoordinate(),M={x:Object(i.isArray)(e.x)?e.x[0]:e.x,y:e.y[0]},N={x:Object(i.isArray)(e.x)?e.x[1]:e.x,y:e.y[1]},at,Ct=ur(a,M);if(e.points&&e.points[0].y===e.points[1].y)at=Ct;else{var Ft=ur(a,N);Ct>=Ft&&(Ft=Ft+Math.PI*2),at=Ct+(Ft-Ct)/2}return at},o.prototype.getCirclePoint=function(e,a){var M=this.getCoordinate(),N=M.getCenter(),at=M.getRadius()+a;return Object(H.a)(Object(H.a)({},Qi(N.x,N.y,at,e)),{angle:e,r:at})},o}(wc),jh=Rl,kl=4;function Ih(h,o,e,a,M,N){var at=!0,Ct=a.start,Ft=a.end,ne=Math.min(Ct.y,Ft.y),ge=Math.abs(Ct.y-Ft.y),be,Ae=0,Xe=Number.MIN_VALUE,fn=o.map(function(oi){return oi.y>Ae&&(Ae=oi.y),oi.y<Xe&&(Xe=oi.y),{size:e,targets:[oi.y-ne]}});for(Xe-=ne,Ae-ne>ge&&(ge=Ae-ne);at;)for(fn.forEach(function(oi){var ai=(Math.min.apply(Xe,oi.targets)+Math.max.apply(Xe,oi.targets))/2;oi.pos=Math.min(Math.max(Xe,ai-oi.size/2),ge-oi.size)}),at=!1,be=fn.length;be--;)if(be>0){var En=fn[be-1],nr=fn[be];En.pos+En.size>nr.pos&&(En.size+=nr.size,En.targets=En.targets.concat(nr.targets),En.pos+En.size>ge&&(En.pos=ge-En.size),fn.splice(be,1),at=!0)}be=0,fn.forEach(function(oi){var ai=ne+e/2;oi.targets.forEach(function(){o[be].y=oi.pos+ai,ai+=e,be++})});for(var ar={},Er=0,Mr=h;Er<Mr.length;Er++){var qr=Mr[Er];ar[qr.get("id")]=qr}o.forEach(function(oi){var ai=oi.r*oi.r,aa=Math.pow(Math.abs(oi.y-M.y),2);if(ai<aa)oi.x=M.x;else{var Ji=Math.sqrt(ai-aa);N?oi.x=M.x+Ji:oi.x=M.x-Ji}var _i=ar[oi.id];_i.attr("x",oi.x),_i.attr("y",oi.y);var Ca=Object(i.find)(_i.getChildren(),function(io){return io.get("type")==="text"});Ca&&(Ca.attr("y",oi.y),Ca.attr("x",oi.x))})}function Ph(h,o,e,a){if(!(!h.length||!o.length)){var M=h[0]?h[0].offset:0,N=o[0].get("coordinate"),at=N.getRadius(),Ct=N.getCenter();if(M>0){var Ft=14,ne=at+M,ge=ne*2+Ft*2,be={start:N.start,end:N.end},Ae=[[],[]];h.forEach(function(Xe){!Xe||(Xe.textAlign==="right"?Ae[0].push(Xe):Ae[1].push(Xe))}),Ae.forEach(function(Xe,fn){var En=ge/Ft;Xe.length>En&&(Xe.sort(function(nr,ar){return ar["..percent"]-nr["..percent"]}),Xe.splice(En,Xe.length-En)),Xe.sort(function(nr,ar){return nr.y-ar.y}),Ih(o,Xe,Ft,be,Ct,fn)})}Object(i.each)(h,function(Xe){if(Xe&&Xe.labelLine){var fn=Xe.offset,En=Xe.angle,nr=Qi(Ct.x,Ct.y,at,En),ar=Qi(Ct.x,Ct.y,at+fn/2,En),Er=Xe.x+Object(i.get)(Xe,"offsetX",0),Mr=Xe.y+Object(i.get)(Xe,"offsetY",0),qr={x:Er-Math.cos(En)*kl,y:Mr-Math.sin(En)*kl};Object(i.isObject)(Xe.labelLine)||(Xe.labelLine={}),Xe.labelLine.path=["M "+nr.x,nr.y+" Q"+ar.x,ar.y+" "+qr.x,qr.y].join(",")}})}}function Nl(h,o,e){var a=h.filter(function(fn){return!fn.invisible});a.sort(function(fn,En){return fn.y-En.y});var M=!0,N=e.minY,at=e.maxY,Ct=Math.abs(N-at),Ft,ne=0,ge=Number.MIN_VALUE,be=a.map(function(fn){return fn.y>ne&&(ne=fn.y),fn.y<ge&&(ge=fn.y),{content:fn.content,size:o,targets:[fn.y-N],pos:null}});for(ge-=N,ne-N>Ct&&(Ct=ne-N);M;)for(be.forEach(function(fn){var En=(Math.min.apply(ge,fn.targets)+Math.max.apply(ge,fn.targets))/2;fn.pos=Math.min(Math.max(ge,En-fn.size/2),Ct-fn.size),fn.pos=Math.max(0,fn.pos)}),M=!1,Ft=be.length;Ft--;)if(Ft>0){var Ae=be[Ft-1],Xe=be[Ft];Ae.pos+Ae.size>Xe.pos&&(Ae.size+=Xe.size,Ae.targets=Ae.targets.concat(Xe.targets),Ae.pos+Ae.size>Ct&&(Ae.pos=Ct-Ae.size),be.splice(Ft,1),M=!0)}Ft=0,be.forEach(function(fn){var En=N+o/2;fn.targets.forEach(function(){a[Ft].y=fn.pos+En,En+=o,Ft++})})}var Cc=4;function Dh(h,o){var e=o.getCenter(),a=o.getRadius();if(h&&h.labelLine){var M=h.angle,N=h.offset,at=Qi(e.x,e.y,a,M),Ct=h.x+Object(i.get)(h,"offsetX",0)*(Math.cos(M)>0?1:-1),Ft=h.y+Object(i.get)(h,"offsetY",0)*(Math.sin(M)>0?1:-1),ne={x:Ct-Math.cos(M)*Cc,y:Ft-Math.sin(M)*Cc},ge=h.labelLine.smooth,be=[],Ae=ne.x-e.x,Xe=ne.y-e.y,fn=Math.atan(Xe/Ae);if(Ae<0&&(fn+=Math.PI),ge===!1){Object(i.isObject)(h.labelLine)||(h.labelLine={});var En=0;(M<0&&M>-Math.PI/2||M>Math.PI*1.5)&&ne.y>at.y&&(En=1),M>=0&&M<Math.PI/2&&ne.y>at.y&&(En=1),M>=Math.PI/2&&M<Math.PI&&at.y>ne.y&&(En=1),(M<-Math.PI/2||M>=Math.PI&&M<Math.PI*1.5)&&at.y>ne.y&&(En=1);var nr=N/2>4?4:Math.max(N/2-1,0),ar=Qi(e.x,e.y,a+nr,M),Er=Qi(e.x,e.y,a+N/2,fn),Mr=0;be.push("M "+at.x+" "+at.y),be.push("L "+ar.x+" "+ar.y),be.push("A "+e.x+" "+e.y+" 0 "+Mr+" "+En+" "+Er.x+" "+Er.y),be.push("L "+ne.x+" "+ne.y)}else{var ar=Qi(e.x,e.y,a+(N/2>4?4:Math.max(N/2-1,0)),M),qr=at.x<e.x?1:-1;be.push("M "+ne.x+" "+ne.y);var oi=(at.y-e.y)/(at.x-e.x),ai=(ne.y-e.y)/(ne.x-e.x);Math.abs(oi-ai)>Math.pow(Math.E,-16)&&be.push.apply(be,["C",ne.x+qr*4,ne.y,2*ar.x-at.x,2*ar.y-at.y,at.x,at.y]),be.push("L "+at.x+" "+at.y)}h.labelLine.path=be.join(" ")}}function Ll(h,o,e,a){var M=Object(i.filter)(h,function(ai){return!Object(i.isNil)(ai)}),N=o[0]&&o[0].get("coordinate");if(!!N){for(var at=N.getCenter(),Ct=N.getRadius(),Ft={},ne=0,ge=o;ne<ge.length;ne++){var be=ge[ne];Ft[be.get("id")]=be}var Ae=Object(i.get)(M[0],"labelHeight",14),Xe=Object(i.get)(M[0],"offset",0);if(!(Xe<=0)){var fn="left",En="right",nr=Object(i.groupBy)(M,function(ai){return ai.x<at.x?fn:En}),ar=N.start,Er=N.end,Mr=Math.min((Ct+Xe+Ae)*2,N.getHeight()),qr=Mr/2,oi={minX:ar.x,maxX:Er.x,minY:at.y-qr,maxY:at.y+qr};Object(i.each)(nr,function(ai,aa){var Ji=Math.floor(Mr/Ae);ai.length>Ji&&(ai.sort(function(_i,Ca){return Ca.percent-_i.percent}),Object(i.each)(ai,function(_i,Ca){Ca+1>Ji&&(Ft[_i.id].set("visible",!1),_i.invisible=!0)})),Nl(ai,Ae,oi)}),Object(i.each)(nr,function(ai,aa){Object(i.each)(ai,function(Ji){var _i=aa===En,Ca=Ft[Ji.id],io=Ca.getChildByIndex(0);if(io){var ao=Ct+Xe,co=Ji.y-at.y,go=Math.pow(ao,2),et=Math.pow(co,2),z=go-et>0?go-et:0,T=Math.sqrt(z),B=Math.abs(Math.cos(Ji.angle)*ao);_i?Ji.x=at.x+Math.max(T,B):Ji.x=at.x-Math.max(T,B)}io&&(io.attr("y",Ji.y),io.attr("x",Ji.x)),Dh(Ji,N)})})}}}var Vu=4,gu=4,Bl=4;function Rh(h,o,e){var a=o.getCenter(),M=o.getRadius(),N={x:h.x-(e?Bl:-Bl),y:h.y},at=Qi(a.x,a.y,M+Vu,h.angle),Ct={x:N.x,y:N.y},Ft={x:at.x,y:at.y},ne=Qi(a.x,a.y,M,h.angle),ge="";if(N.y!==at.y){var be=e?4:-4;Ct.y=N.y,h.angle<0&&h.angle>=-Math.PI/2&&(Ct.x=Math.max(at.x,N.x-be),N.y<at.y?Ft.y=Ct.y:(Ft.y=at.y,Ft.x=Math.max(Ft.x,Ct.x-be))),h.angle>0&&h.angle<Math.PI/2&&(Ct.x=Math.max(at.x,N.x-be),N.y>at.y?Ft.y=Ct.y:(Ft.y=at.y,Ft.x=Math.max(Ft.x,Ct.x-be))),h.angle>Math.PI/2&&(Ct.x=Math.min(at.x,N.x-be),N.y>at.y?Ft.y=Ct.y:(Ft.y=at.y,Ft.x=Math.min(Ft.x,Ct.x-be))),h.angle<-Math.PI/2&&(Ct.x=Math.min(at.x,N.x-be),N.y<at.y?Ft.y=Ct.y:(Ft.y=at.y,Ft.x=Math.min(Ft.x,Ct.x-be)))}ge=["M "+N.x+","+N.y,"L "+Ct.x+","+Ct.y,"L "+Ft.x+","+Ft.y,"L "+at.x+","+at.y,"L "+ne.x+","+ne.y].join(" "),h.labelLine=Object(i.deepMix)({},h.labelLine,{path:ge})}function kh(h,o,e,a){var M=o[0]&&o[0].get("coordinate");if(!!M){for(var N=M.getCenter(),at=M.getRadius(),Ct={},Ft=0,ne=o;Ft<ne.length;Ft++){var ge=ne[Ft];Ct[ge.get("id")]=ge}var be=Object(i.get)(h[0],"labelHeight",14),Ae=Math.max(Object(i.get)(h[0],"offset",0),Vu);Object(i.each)(h,function(ai){var aa=Object(i.get)(Ct,ai.id);if(!!aa){var Ji=ai.x>N.x||ai.x===N.x&&ai.y>N.y,_i=Object(i.isNil)(ai.offsetX)?gu:ai.offsetX,Ca=Qi(N.x,N.y,at+Vu,ai.angle),io=Ae+_i;ai.x=N.x+(Ji?1:-1)*(at+io),ai.y=Ca.y}});var Xe=M.start,fn=M.end,En="left",nr="right",ar=Object(i.groupBy)(h,function(ai){return ai.x<N.x?En:nr}),Er=(at+Ae)*2+be;Object(i.each)(ar,function(ai){var aa=ai.length*be;aa>Er&&(Er=Math.min(aa,Math.abs(Xe.y-fn.y)))});var Mr={minX:Xe.x,maxX:fn.x,minY:N.y-Er/2,maxY:N.y+Er/2};Object(i.each)(ar,function(ai,aa){var Ji=Er/be;ai.length>Ji&&(ai.sort(function(_i,Ca){return Ca.percent-_i.percent}),Object(i.each)(ai,function(_i,Ca){Ca>Ji&&(Ct[_i.id].set("visible",!1),_i.invisible=!0)})),Nl(ai,be,Mr)});var qr=Mr.minY,oi=Mr.maxY;Object(i.each)(ar,function(ai,aa){var Ji=aa===nr;Object(i.each)(ai,function(_i){var Ca=Object(i.get)(Ct,_i&&_i.id);if(!!Ca){if(_i.y<qr||_i.y>oi){Ca.set("visible",!1);return}var io=Ca.getChildByIndex(0),ao=io.getCanvasBBox(),co={x:Ji?ao.x:ao.maxX,y:ao.y+ao.height/2};Ko(io,_i.x-co.x,_i.y-co.y),_i.labelLine&&Rh(_i,M,Ji)}})})}}function us(h,o,e,a){Object(i.each)(o,function(M){var N=a.minX,at=a.minY,Ct=a.maxX,Ft=a.maxY,ne=M.getCanvasBBox(),ge=ne.minX,be=ne.minY,Ae=ne.maxX,Xe=ne.maxY,fn=ne.x,En=ne.y,nr=ne.width,ar=ne.height,Er=fn,Mr=En;(ge<N||Ae<N)&&(Er=N),(be<at||Xe<at)&&(Mr=at),ge>Ct?Er=Ct-nr:Ae>Ct&&(Er=Er-(Ae-Ct)),be>Ft?Mr=Ft-ar:Xe>Ft&&(Mr=Mr-(Xe-Ft)),(Er!==fn||Mr!==En)&&Ko(M,Er-fn,Mr-En)})}function Nh(h,o,e,a){Object(i.each)(o,function(M,N){var at=M.getCanvasBBox(),Ct=e[N].getBBox();(at.minX<Ct.minX||at.minY<Ct.minY||at.maxX>Ct.maxX||at.maxY>Ct.maxY)&&M.remove(!0)})}var Fl=100,js=function(){function h(o){o===void 0&&(o={}),this.bitmap={};var e=o.xGap,a=e===void 0?1:e,M=o.yGap,N=M===void 0?8:M;this.xGap=a,this.yGap=N}return h.prototype.hasGap=function(o){for(var e=!0,a=this.bitmap,M=Math.round(o.minX),N=Math.round(o.maxX),at=Math.round(o.minY),Ct=Math.round(o.maxY),Ft=M;Ft<=N;Ft+=1){if(!a[Ft]){a[Ft]={};continue}if(Ft===M||Ft===N){for(var ne=at;ne<=Ct;ne++)if(a[Ft][ne]){e=!1;break}}else if(a[Ft][at]||a[Ft][Ct]){e=!1;break}}return e},h.prototype.fillGap=function(o){for(var e=this.bitmap,a=Math.round(o.minX),M=Math.round(o.maxX),N=Math.round(o.minY),at=Math.round(o.maxY),Ct=a;Ct<=M;Ct+=1)e[Ct]||(e[Ct]={});for(var Ct=a;Ct<=M;Ct+=this.xGap){for(var Ft=N;Ft<=at;Ft+=this.yGap)e[Ct][Ft]=!0;e[Ct][at]=!0}if(this.yGap!==1)for(var Ct=N;Ct<=at;Ct+=1)e[a][Ct]=!0,e[M][Ct]=!0;if(this.xGap!==1)for(var Ct=a;Ct<=M;Ct+=1)e[Ct][N]=!0,e[Ct][at]=!0},h.prototype.destroy=function(){this.bitmap={}},h}();function Gl(h,o,e){e===void 0&&(e=Fl);var a=-1,M=h.attr(),N=M.x,at=M.y,Ct=h.getCanvasBBox(),Ft=Math.sqrt(Ct.width*Ct.width+Ct.height*Ct.height),ne,ge=-a,be=0,Ae=0,Xe=function(Er){var Mr=Er*.1;return[Mr*Math.cos(Mr),Mr*Math.sin(Mr)]};if(o.hasGap(Ct))return o.fillGap(Ct),!0;for(var fn=!1,En=0,nr={};Math.min(Math.abs(be),Math.abs(Ae))<Ft&&En<e;)if(ne=Xe(ge+=a),be=~~ne[0],Ae=~~ne[1],!(!be&&!Ae||nr[be+"-"+Ae])&&(h.attr({x:N+be,y:at+Ae}),be+Ae<0&&h.attr("textAlign","right"),En++,o.hasGap(h.getCanvasBBox()))){o.fillGap(h.getCanvasBBox()),fn=!0,nr[be+"-"+Ae]=!0;break}return fn}function Is(h,o,e,a){var M=h.getCanvasBBox(),N=M.width,at=M.height,Ct={x:o,y:e,textAlign:"center"};switch(a){case 0:Ct.y-=at+1,Ct.x+=1,Ct.textAlign="left";break;case 1:Ct.y-=at+1,Ct.x-=1,Ct.textAlign="right";break;case 2:Ct.y+=at+1,Ct.x-=1,Ct.textAlign="right";break;case 3:Ct.y+=at+1,Ct.x+=1,Ct.textAlign="left";break;case 5:Ct.y-=at*2+2;break;case 6:Ct.y+=at*2+2;break;case 7:Ct.x+=N+1,Ct.textAlign="left";break;case 8:Ct.x-=N+1,Ct.textAlign="right";break;default:break}return h.attr(Ct),h.getCanvasBBox()}function mu(h,o,e,a){var M=new js;Object(i.each)(o,function(N){var at=N.find(function(Ct){return Ct.get("type")==="text"});Gl(at,M)||N.remove(!0)}),M.destroy()}function es(h,o,e,a){var M=new js;Object(i.each)(o,function(N){for(var at=N.find(function(Xe){return Xe.get("type")==="text"}),Ct=at.attr(),Ft=Ct.x,ne=Ct.y,ge=!1,be=0;be<=8;be++){var Ae=Is(at,Ft,ne,be);if(M.hasGap(Ae)){M.fillGap(Ae),ge=!0;break}}ge||N.remove(!0)}),M.destroy()}var xs=Yr.c.dot;function Ps(h){if(h.length>4)return[];var o=function(N,at){return[at.x-N.x,at.y-N.y]},e=o(h[0],h[1]),a=o(h[1],h[2]);return[e,a]}function yu(h,o,e){o===void 0&&(o=0),e===void 0&&(e={x:0,y:0});var a=h.x,M=h.y;return{x:(a-e.x)*Math.cos(-o)+(M-e.y)*Math.sin(-o)+e.x,y:(e.x-a)*Math.sin(-o)+(M-e.y)*Math.cos(-o)+e.y}}function Mc(h){var o=[{x:h.x,y:h.y},{x:h.x+h.width,y:h.y},{x:h.x+h.width,y:h.y+h.height},{x:h.x,y:h.y+h.height}],e=h.rotation;return e?[yu(o[0],e,o[0]),yu(o[1],e,o[0]),yu(o[2],e,o[0]),yu(o[3],e,o[0])]:o}function Ac(h,o){if(h.length>4)return{min:0,max:0};var e=[];return h.forEach(function(a){e.push(xs([a.x,a.y],o))}),{min:Math.min.apply(Math,e),max:Math.max.apply(Math,e)}}function Tc(h,o){return h.max>o.min&&h.min<o.max}function Ul(h,o,e){return e===void 0&&(e=0),!(o.x>h.x+h.width+e||o.x+o.width<h.x-e||o.y>h.y+h.height+e||o.y+o.height<h.y-e)}function po(h,o){if(!h.rotation&&!o.rotation)return Ul(h,o);for(var e=Mc(h),a=Mc(o),M=Object(H.d)(Ps(e),Ps(a)),N=0;N<M.length;N++){var at=M[N],Ct=Ac(e,at),Ft=Ac(a,at);if(!Tc(Ct,Ft))return!1}return!0}function Yu(h,o,e,a){for(var M=0;M<o.length;M++){var N=o[M];if(o[M].get("visible"))for(var at=M+1;at<o.length;at++){var Ct=o[at];if(N&&Ct&&N!==Ct&&Ct.get("visible")){var Ft=Y(N,h[M],Object(i.get)(h[M],"background.padding")),ne=Y(Ct,h[at],Object(i.get)(h[at],"background.padding"));po(Ft,ne)&&o[at].set("visible",!1)}}}}var Ds={"#5B8FF9":!0},zl=function(o){var e=xt.a.toRGB(o).toUpperCase();if(Ds[e])return Ds[e];var a=xt.a.rgb2arr(e),M=a[0],N=a[1],at=a[2],Ct=(M*299+N*587+at*114)/1e3<128;return Ct};function _l(h,o,e){if(e.length!==0){var a=e[0].get("element"),M=a.geometry.theme,N=M.labels||{},at=N.fillColorLight,Ct=N.fillColorDark;e.forEach(function(Ft,ne){var ge=o[ne],be=ge.find(function(ar){return ar.get("type")==="text"}),Ae=Ze.fromObject(Ft.getBBox()),Xe=Ze.fromObject(be.getCanvasBBox()),fn=!Ae.contains(Xe),En=Ft.attr("fill"),nr=zl(En);fn?be.attr(M.overflowLabels.style):nr?at&&be.attr("fill",at):Ct&&be.attr("fill",Ct)})}}function Wl(h,o,e){var a=h.coordinate,M=D(o),N=Ze.fromObject(M.getCanvasBBox()),at=Ze.fromObject(e.getBBox());return a.isTransposed?at.height>=N.height:at.width>=N.width}function Vl(h,o,e){var a=!!h.getAdjust("stack");return a||o.every(function(M,N){var at=e[N];return Wl(h,M,at)})}function Yl(h,o,e){var a=h.coordinate,M=Ze.fromObject(e.getBBox()),N=D(o);a.isTransposed?N.attr({x:M.minX+M.width/2,textAlign:"center"}):N.attr({y:M.minY+M.height/2,textBaseline:"middle"})}function Xu(h,o,e){var a;if(e.length!==0){var M=(a=e[0])===null||a===void 0?void 0:a.get("element"),N=M==null?void 0:M.geometry;if(!(!N||N.type!=="interval")){var at=Vl(N,o,e);at&&e.forEach(function(Ct,Ft){var ne=o[Ft];Yl(N,ne,Ct)})}}}function Xl(h){var o=500,e=[],a=Math.max(Math.floor(h.length/o),1);return Object(i.each)(h,function(M,N){N%a==0?e.push(M):M.set("visible",!1)}),e}function Hl(h,o,e){var a;if(e.length!==0){var M=(a=e[0])===null||a===void 0?void 0:a.get("element"),N=M==null?void 0:M.geometry;if(!(!N||N.type!=="interval")){var at=Xl(o),Ct=N.getXYFields()[0],Ft=[],ne=[],ge=Object(i.groupBy)(at,function(En){return En.get("data")[Ct]}),be=Object(i.uniq)(Object(i.map)(at,function(En){return En.get("data")[Ct]})),Ae;at.forEach(function(En){En.set("visible",!0)});var Xe=function(nr){nr&&(nr.length&&ne.push(nr.pop()),ne.push.apply(ne,nr))};for(Object(i.size)(be)>0&&(Ae=be.shift(),Xe(ge[Ae])),Object(i.size)(be)>0&&(Ae=be.pop(),Xe(ge[Ae])),Object(i.each)(be.reverse(),function(En){Xe(ge[En])});ne.length>0;){var fn=ne.shift();fn.get("visible")&&(At(fn,Ft)?fn.set("visible",!1):Ft.push(fn))}}}}function Os(h,o){var e=h.getXYFields()[1],a=[],M=o.sort(function(N,at){return N.get("data")[e]-N.get("data")[e]});return M.length>0&&a.push(M.shift()),M.length>0&&a.push(M.pop()),a.push.apply(a,M),a}function Ws(h,o,e){return h.some(function(a){return e(a,o)})}function Kl(h,o,e){e===void 0&&(e=0);var a=Math.max(0,Math.min(h.x+h.width+e,o.x+o.width+e)-Math.max(h.x-e,o.x-e)),M=Math.max(0,Math.min(h.y+h.height+e,o.y+o.height+e)-Math.max(h.y-e,o.y-e));return a*M}function Jl(h,o){return Ws(h,o,function(e,a){var M=D(e),N=D(a);return Kl(M.getCanvasBBox(),N.getCanvasBBox(),2)>0})}function Hu(h,o,e,a,M){var N,at;if(e.length!==0){var Ct=(N=e[0])===null||N===void 0?void 0:N.get("element"),Ft=Ct==null?void 0:Ct.geometry;if(!(!Ft||Ft.type!=="point")){var ne=Ft.getXYFields(),ge=ne[0],be=ne[1],Ae=Object(i.groupBy)(o,function(En){return En.get("data")[ge]}),Xe=[],fn=M&&M.offset||((at=h[0])===null||at===void 0?void 0:at.offset)||12;Object(i.map)(Object(i.keys)(Ae).reverse(),function(En){for(var nr=Os(Ft,Ae[En]);nr.length;){var ar=nr.shift(),Er=D(ar);if(Ws(Xe,ar,function(oi,ai){return oi.get("data")[ge]===ai.get("data")[ge]&&oi.get("data")[be]===ai.get("data")[be]})){Er.set("visible",!1);continue}var Mr=Jl(Xe,ar),qr=!1;if(Mr&&(Er.attr("y",Er.attr("y")+2*fn),qr=Jl(Xe,ar)),qr){Er.set("visible",!1);continue}Xe.push(ar)}})}}}function Lh(h,o){var e=h.getXYFields()[1],a=[],M=o.sort(function(N,at){return N.get("data")[e]-N.get("data")[e]});return M.length>0&&a.push(M.shift()),M.length>0&&a.push(M.pop()),a.push.apply(a,M),a}function Ql(h,o,e){return h.some(function(a){return e(a,o)})}function ci(h,o,e){e===void 0&&(e=0);var a=Math.max(0,Math.min(h.x+h.width+e,o.x+o.width+e)-Math.max(h.x-e,o.x-e)),M=Math.max(0,Math.min(h.y+h.height+e,o.y+o.height+e)-Math.max(h.y-e,o.y-e));return a*M}function jc(h,o){return Ql(h,o,function(e,a){var M=D(e),N=D(a);return ci(M.getCanvasBBox(),N.getCanvasBBox(),2)>0})}function Zl(h,o,e,a,M){var N,at;if(e.length!==0){var Ct=(N=e[0])===null||N===void 0?void 0:N.get("element"),Ft=Ct==null?void 0:Ct.geometry;if(!(!Ft||["path","line","area"].indexOf(Ft.type)<0)){var ne=Ft.getXYFields(),ge=ne[0],be=ne[1],Ae=Object(i.groupBy)(o,function(En){return En.get("data")[ge]}),Xe=[],fn=M&&M.offset||((at=h[0])===null||at===void 0?void 0:at.offset)||12;Object(i.map)(Object(i.keys)(Ae).reverse(),function(En){for(var nr=Lh(Ft,Ae[En]);nr.length;){var ar=nr.shift(),Er=D(ar);if(Ql(Xe,ar,function(oi,ai){return oi.get("data")[ge]===ai.get("data")[ge]&&oi.get("data")[be]===ai.get("data")[be]})){Er.set("visible",!1);continue}var Mr=jc(Xe,ar),qr=!1;if(Mr&&(Er.attr("y",Er.attr("y")+2*fn),qr=jc(Xe,ar)),qr){Er.set("visible",!1);continue}Xe.push(ar)}})}}}var Ku;function $l(){return Ku||(Ku=document.createElement("canvas").getContext("2d")),Ku}var bu=Object(i.memoize)(function(h,o){o===void 0&&(o={});var e=o.fontSize,a=o.fontFamily,M=o.fontWeight,N=o.fontStyle,at=o.fontVariant,Ct=$l();return Ct.font=[N,at,M,e+"px",a].join(" "),Ct.measureText(Object(i.isString)(h)?h:"").width},function(h,o){return o===void 0&&(o={}),Object(H.d)([h],Object(i.values)(o)).join("")}),ql=function(o,e,a){var M=16,N=bu("...",a),at;Object(i.isString)(o)?at=o:at=Object(i.toString)(o);var Ct=e,Ft=[],ne,ge;if(bu(o,a)<=e)return o;for(;ne=at.substr(0,M),ge=bu(ne,a),!(ge+N>Ct&&ge>Ct);)if(Ft.push(ne),Ct-=ge,at=at.substr(M),!at)return Ft.join("");for(;ne=at.substr(0,1),ge=bu(ne,a),!(ge+N>Ct);)if(Ft.push(ne),Ct-=ge,at=at.substr(1),!at)return Ft.join("");return Ft.join("")+"..."};function tf(h,o,e,a,M){if(!(o.length<=0)){var N=(M==null?void 0:M.direction)||["top","right","bottom","left"],at=(M==null?void 0:M.action)||"translate",Ct=(M==null?void 0:M.margin)||0,Ft=o[0].get("coordinate");if(!!Ft){var ne=wr(Ft,Ct),ge=ne.minX,be=ne.minY,Ae=ne.maxX,Xe=ne.maxY;Object(i.each)(o,function(fn){var En=fn.getCanvasBBox(),nr=En.minX,ar=En.minY,Er=En.maxX,Mr=En.maxY,qr=En.x,oi=En.y,ai=En.width,aa=En.height,Ji=qr,_i=oi;if(N.indexOf("left")>=0&&(nr<ge||Er<ge)&&(Ji=ge),N.indexOf("top")>=0&&(ar<be||Mr<be)&&(_i=be),N.indexOf("right")>=0&&(nr>Ae?Ji=Ae-ai:Er>Ae&&(Ji=Ji-(Er-Ae))),N.indexOf("bottom")>=0&&(ar>Xe?_i=Xe-aa:Mr>Xe&&(_i=_i-(Mr-Xe))),Ji!==qr||_i!==oi){var Ca=Ji-qr;if(at==="translate")Ko(fn,Ca,_i-oi);else if(at==="ellipsis"){var io=fn.findAll(function(ao){return ao.get("type")==="text"});io.forEach(function(ao){var co=Object(i.pick)(ao.attr(),["fontSize","fontFamily","fontWeight","fontStyle","fontVariant"]),go=ao.getCanvasBBox(),et=ql(ao.attr("text"),go.width-Math.abs(Ca),co);ao.attr("text",et)})}else fn.hide()}})}}}function ef(h,o,e){var a={fillOpacity:Object(i.isNil)(h.attr("fillOpacity"))?1:h.attr("fillOpacity"),strokeOpacity:Object(i.isNil)(h.attr("strokeOpacity"))?1:h.attr("strokeOpacity"),opacity:Object(i.isNil)(h.attr("opacity"))?1:h.attr("opacity")};h.attr({fillOpacity:0,strokeOpacity:0,opacity:0}),h.animate(a,o)}function nf(h,o,e){var a={fillOpacity:0,strokeOpacity:0,opacity:0},M=o.easing,N=o.duration,at=o.delay;h.animate(a,N,M,function(){h.remove(!0)},at)}function rf(h,o,e){var a,M=o[0],N=o[1];return h.applyToMatrix([M,N,1]),e==="x"?(h.setMatrix(Yr.a.transform(h.getMatrix(),[["t",-M,-N],["s",.01,1],["t",M,N]])),a=Yr.a.transform(h.getMatrix(),[["t",-M,-N],["s",100,1],["t",M,N]])):e==="y"?(h.setMatrix(Yr.a.transform(h.getMatrix(),[["t",-M,-N],["s",1,.01],["t",M,N]])),a=Yr.a.transform(h.getMatrix(),[["t",-M,-N],["s",1,100],["t",M,N]])):e==="xy"&&(h.setMatrix(Yr.a.transform(h.getMatrix(),[["t",-M,-N],["s",.01,.01],["t",M,N]])),a=Yr.a.transform(h.getMatrix(),[["t",-M,-N],["s",100,100],["t",M,N]])),a}function Rs(h,o,e,a,M){var N=e.start,at=e.end,Ct=e.getWidth(),Ft=e.getHeight(),ne,ge;M==="y"?(ne=N.x+Ct/2,ge=a.y<N.y?a.y:N.y):M==="x"?(ne=a.x>N.x?a.x:N.x,ge=N.y+Ft/2):M==="xy"&&(e.isPolar?(ne=e.getCenter().x,ge=e.getCenter().y):(ne=(N.x+at.x)/2,ge=(N.y+at.y)/2));var be=rf(h,[ne,ge],M);h.animate({matrix:be},o)}function af(h,o,e){var a=e.coordinate,M=e.minYPoint;Rs(h,o,a,M,"x")}function of(h,o,e){var a=e.coordinate,M=e.minYPoint;Rs(h,o,a,M,"y")}function sf(h,o,e){var a=e.coordinate,M=e.minYPoint;Rs(h,o,a,M,"xy")}function uf(h,o,e){var a=h.getTotalLength();h.attr("lineDash",[a]),h.animate(function(M){return{lineDashOffset:(1-M)*a}},o)}function Ju(h,o,e){var a=e.toAttrs,M=a.x,N=a.y;delete a.x,delete a.y,h.attr(a),h.animate({x:M,y:N},o)}function cf(h,o,e){var a=h.getBBox(),M=h.get("origin").mappingData,N=M.points,at=N[0].y-N[1].y>0?a.maxX:a.minX,Ct=(a.minY+a.maxY)/2;h.applyToMatrix([at,Ct,1]);var Ft=Yr.a.transform(h.getMatrix(),[["t",-at,-Ct],["s",.01,1],["t",at,Ct]]);h.setMatrix(Ft),h.animate({matrix:Yr.a.transform(h.getMatrix(),[["t",-at,-Ct],["s",100,1],["t",at,Ct]])},o)}function Es(h,o,e){var a=h.getBBox(),M=h.get("origin").mappingData,N=(a.minX+a.maxX)/2,at=M.points,Ct=at[0].y-at[1].y<=0?a.maxY:a.minY;h.applyToMatrix([N,Ct,1]);var Ft=Yr.a.transform(h.getMatrix(),[["t",-N,-Ct],["s",1,.01],["t",N,Ct]]);h.setMatrix(Ft),h.animate({matrix:Yr.a.transform(h.getMatrix(),[["t",-N,-Ct],["s",1,100],["t",N,Ct]])},o)}function ru(h,o){var e,a=Object(Ja.getArcParams)(h,o),M=a.startAngle,N=a.endAngle;return!Object(i.isNumberEqual)(M,-Math.PI*.5)&&M<-Math.PI*.5&&(M+=Math.PI*2),!Object(i.isNumberEqual)(N,-Math.PI*.5)&&N<-Math.PI*.5&&(N+=Math.PI*2),o[5]===0&&(e=[N,M],M=e[0],N=e[1]),Object(i.isNumberEqual)(M,Math.PI*1.5)&&(M=Math.PI*-.5),Object(i.isNumberEqual)(N,Math.PI*-.5)&&(N=Math.PI*1.5),{startAngle:M,endAngle:N}}function vs(h){var o;return h[0]==="M"||h[0]==="L"?o=[h[1],h[2]]:(h[0]==="a"||h[0]==="A")&&(o=[h[h.length-2],h[h.length-1]]),o}function rs(h){var o,e,a,M=h.filter(function(Mr){return Mr[0]==="A"||Mr[0]==="a"}),N=M[0],at=M.length>1?M[1]:M[0],Ct=h.indexOf(N),Ft=h.indexOf(at),ne=vs(h[Ct-1]),ge=vs(h[Ft-1]),be=ru(ne,N),Ae=be.startAngle,Xe=be.endAngle,fn=ru(ge,at),En=fn.startAngle,nr=fn.endAngle;Object(i.isNumberEqual)(Ae,En)&&Object(i.isNumberEqual)(Xe,nr)?(e=Ae,a=Xe):(e=Math.min(Ae,En),a=Math.max(Xe,nr));var ar=N[1],Er=M[M.length-1][1];return ar<Er?(o=[Er,ar],ar=o[0],Er=o[1]):ar===Er&&(Er=0),{startAngle:e,endAngle:a,radius:ar,innerRadius:Er}}function xu(h,o,e){var a=e.toAttrs,M=e.coordinate,N=a.path||[],at=N.map(function(Er){return Er[0]});if(!(N.length<1)){var Ct=rs(N),Ft=Ct.startAngle,ne=Ct.endAngle,ge=Ct.radius,be=Ct.innerRadius,Ae=rs(h.attr("path")),Xe=Ae.startAngle,fn=Ae.endAngle,En=M.getCenter(),nr=Ft-Xe,ar=ne-fn;h.animate(function(Er){var Mr=Xe+Er*nr,qr=fn+Er*ar;return Object(H.a)(Object(H.a)({},a),{path:Object(i.isEqual)(at,["M","A","A","Z"])?vo(En.x,En.y,ge,Mr,qr):ka(En.x,En.y,ge,Mr,qr,be)})},Object(H.a)(Object(H.a)({},o),{callback:function(){h.attr("path",N)}}))}}function ks(h,o,e){var a=jr(e.coordinate,20),M=a.type,N=a.startState,at=a.endState,Ct=h.setClip({type:M,attrs:N});Ct.animate(at,Object(H.a)(Object(H.a)({},o),{callback:function(){h&&!h.get("destroyed")&&h.set("clipShape",null),Ct.remove(!0)}}))}function Vs(h,o,e){if(h.isGroup())Object(i.each)(h.getChildren(),function(Ct){Vs(Ct,o,e)});else{var a=h.getBBox(),M=(a.minX+a.maxX)/2,N=(a.minY+a.maxY)/2;if(h.applyToMatrix([M,N,1]),e==="zoomIn"){var at=Yr.a.transform(h.getMatrix(),[["t",-M,-N],["s",.01,.01],["t",M,N]]);h.setMatrix(at),h.animate({matrix:Yr.a.transform(h.getMatrix(),[["t",-M,-N],["s",100,100],["t",M,N]])},o)}else h.animate({matrix:Yr.a.transform(h.getMatrix(),[["t",-M,-N],["s",.01,.01],["t",M,N]])},Object(H.a)(Object(H.a)({},o),{callback:function(){h.remove(!0)}}))}}function Qu(h,o,e){Vs(h,o,"zoomIn")}function ps(h,o,e){Vs(h,o,"zoomOut")}function Zo(h){return[t.TOP,t.BOTTOM].includes(h)?{offsetX:0,offsetY:h===t.TOP?-8:8,style:{textAlign:"center",textBaseline:h===t.TOP?"bottom":"top"}}:[t.LEFT,t.RIGHT].includes(h)?{offsetX:h===t.LEFT?-8:8,offsetY:0,style:{textAlign:h===t.LEFT?"right":"left",textBaseline:"middle",rotate:Math.PI/2}}:{}}function Wo(h,o,e){return{x:h.x+o*Math.cos(e),y:h.y+o*Math.sin(e)}}var gs=function(h){Object(H.b)(o,h);function o(){return h!==null&&h.apply(this,arguments)||this}return o.prototype.getDefaultCfg=function(){return Object(i.deepMix)({},h.prototype.getDefaultCfg.call(this),{type:"circle",showTitle:!0,title:h.prototype.getDefaultTitleCfg.call(this)})},o.prototype.render=function(){h.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.getRegion=function(e,a){var M=1/2,N={x:.5,y:.5},at=Math.PI*2/e,Ct=-1*Math.PI/2+at*a,Ft=M/(1+1/Math.sin(at/2)),ne=Wo(N,M-Ft,Ct),ge=Math.PI*5/4,be=Math.PI*1/4;return{start:Wo(ne,Ft,ge),end:Wo(ne,Ft,be)}},o.prototype.afterEachView=function(e,a){this.processAxis(e,a)},o.prototype.beforeEachView=function(e,a){},o.prototype.generateFacets=function(e){var a=this,M=this.cfg,N=M.fields,at=M.type,Ct=N[0];if(!Ct)throw new Error("No `fields` specified!");var Ft=this.getFieldValues(e,Ct),ne=Ft.length,ge=[];return Ft.forEach(function(be,Ae){var Xe=[{field:Ct,value:be,values:Ft}],fn=Object(i.filter)(e,a.getFacetDataFilter(Xe)),En={type:at,data:fn,region:a.getRegion(ne,Ae),columnValue:be,columnField:Ct,columnIndex:Ae,columnValuesLength:ne,rowValue:null,rowField:null,rowIndex:0,rowValuesLength:1};ge.push(En)}),ge},o.prototype.getXAxisOption=function(e,a,M,N){return M},o.prototype.getYAxisOption=function(e,a,M,N){return M},o.prototype.renderTitle=function(){var e=this;Object(i.each)(this.facets,function(a){var M=a.columnValue,N=a.view,at=Object(i.get)(e.cfg.title,"formatter"),Ct=Object(i.deepMix)({position:["50%","0%"],content:at?at(M):M},Zo(t.TOP),e.cfg.title);N.annotation().text(Ct)})},o}(Zi),ms=gs,Zu=function(h){Object(H.b)(o,h);function o(){return h!==null&&h.apply(this,arguments)||this}return o.prototype.getDefaultCfg=function(){return Object(i.deepMix)({},h.prototype.getDefaultCfg.call(this),{type:"list",cols:null,showTitle:!0,title:h.prototype.getDefaultTitleCfg.call(this)})},o.prototype.render=function(){h.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.afterEachView=function(e,a){this.processAxis(e,a)},o.prototype.beforeEachView=function(e,a){},o.prototype.generateFacets=function(e){var a=this,M=this.cfg.fields,N=this.cfg.cols,at=M[0];if(!at)throw new Error("No `fields` specified!");var Ct=this.getFieldValues(e,at),Ft=Ct.length;N=N||Ft;var ne=this.getPageCount(Ft,N),ge=[];return Ct.forEach(function(be,Ae){var Xe=a.getRowCol(Ae,N),fn=Xe.row,En=Xe.col,nr=[{field:at,value:be,values:Ct}],ar=Object(i.filter)(e,a.getFacetDataFilter(nr)),Er={type:a.cfg.type,data:ar,region:a.getRegion(ne,N,En,fn),columnValue:be,rowValue:be,columnField:at,rowField:null,columnIndex:En,rowIndex:fn,columnValuesLength:N,rowValuesLength:ne,total:Ft};ge.push(Er)}),ge},o.prototype.getXAxisOption=function(e,a,M,N){return N.rowIndex!==N.rowValuesLength-1&&N.columnValuesLength*N.rowIndex+N.columnIndex+1+N.columnValuesLength<=N.total?Object(H.a)(Object(H.a)({},M),{label:null,title:null}):M},o.prototype.getYAxisOption=function(e,a,M,N){return N.columnIndex!==0?Object(H.a)(Object(H.a)({},M),{title:null,label:null}):M},o.prototype.renderTitle=function(){var e=this;Object(i.each)(this.facets,function(a){var M=a.columnValue,N=a.view,at=Object(i.get)(e.cfg.title,"formatter"),Ct=Object(i.deepMix)({position:["50%","0%"],content:at?at(M):M},Zo(t.TOP),e.cfg.title);N.annotation().text(Ct)})},o.prototype.getPageCount=function(e,a){return Math.floor((e+a-1)/a)},o.prototype.getRowCol=function(e,a){var M=Math.floor(e/a),N=e%a;return{row:M,col:N}},o}(Zi),lf=Zu,Ns=function(h){Object(H.b)(o,h);function o(){return h!==null&&h.apply(this,arguments)||this}return o.prototype.getDefaultCfg=function(){return Object(i.deepMix)({},h.prototype.getDefaultCfg.call(this),{type:"matrix",showTitle:!1,columnTitle:Object(H.a)({},h.prototype.getDefaultTitleCfg.call(this)),rowTitle:Object(H.a)({},h.prototype.getDefaultTitleCfg.call(this))})},o.prototype.render=function(){h.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.afterEachView=function(e,a){this.processAxis(e,a)},o.prototype.beforeEachView=function(e,a){},o.prototype.generateFacets=function(e){for(var a=this.cfg,M=a.fields,N=a.type,at=M.length,Ct=at,Ft=[],ne=0;ne<Ct;ne++)for(var ge=M[ne],be=0;be<at;be++){var Ae=M[be],Xe={type:N,data:e,region:this.getRegion(at,Ct,ne,be),columnValue:ge,rowValue:Ae,columnField:ge,rowField:Ae,columnIndex:ne,rowIndex:be,columnValuesLength:Ct,rowValuesLength:at};Ft.push(Xe)}return Ft},o.prototype.getXAxisOption=function(e,a,M,N){return N.rowIndex!==N.rowValuesLength-1?Object(H.a)(Object(H.a)({},M),{label:null,title:null}):M},o.prototype.getYAxisOption=function(e,a,M,N){return N.columnIndex!==0?Object(H.a)(Object(H.a)({},M),{title:null,label:null}):M},o.prototype.renderTitle=function(){var e=this;Object(i.each)(this.facets,function(a,M){var N=a.columnIndex,at=a.rowIndex,Ct=a.columnValuesLength,Ft=a.rowValuesLength,ne=a.columnValue,ge=a.rowValue,be=a.view;if(at===0){var Ae=Object(i.get)(e.cfg.columnTitle,"formatter"),Xe=Object(i.deepMix)({position:["50%","0%"],content:Ae?Ae(ne):ne},Zo(t.TOP),e.cfg.columnTitle);be.annotation().text(Xe)}if(N===Ct-1){var Ae=Object(i.get)(e.cfg.rowTitle,"formatter"),Xe=Object(i.deepMix)({position:["100%","50%"],content:Ae?Ae(ge):ge},Zo(t.RIGHT),e.cfg.rowTitle);be.annotation().text(Xe)}})},o}(Zi),Bh=Ns,Fh=function(h){Object(H.b)(o,h);function o(){return h!==null&&h.apply(this,arguments)||this}return o.prototype.getDefaultCfg=function(){return Object(i.deepMix)({},h.prototype.getDefaultCfg.call(this),{type:"mirror",showTitle:!0,title:h.prototype.getDefaultTitleCfg.call(this),transpose:!1})},o.prototype.render=function(){h.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.beforeEachView=function(e,a){this.cfg.transpose?a.columnIndex%2==0?e.coordinate().transpose().reflect("x"):e.coordinate().transpose():a.rowIndex%2!=0&&e.coordinate().reflect("y")},o.prototype.afterEachView=function(e,a){this.processAxis(e,a)},o.prototype.generateFacets=function(e){var a=this,M=this.cfg.fields[0],N=[],at=1,Ct=1,Ft=[""],ne=[""],ge,be;return this.cfg.transpose?(ge=M,Ft=this.getFieldValues(e,ge).slice(0,2),at=Ft.length):(be=M,ne=this.getFieldValues(e,be).slice(0,2),Ct=ne.length),Ft.forEach(function(Ae,Xe){ne.forEach(function(fn,En){var nr=[{field:ge,value:Ae,values:Ft},{field:be,value:fn,values:ne}],ar=Object(i.filter)(e,a.getFacetDataFilter(nr)),Er={type:a.cfg.type,data:ar,region:a.getRegion(Ct,at,Xe,En),columnValue:Ae,rowValue:fn,columnField:ge,rowField:be,columnIndex:Xe,rowIndex:En,columnValuesLength:at,rowValuesLength:Ct};N.push(Er)})}),N},o.prototype.getXAxisOption=function(e,a,M,N){return N.columnIndex===1||N.rowIndex===1?Object(H.a)(Object(H.a)({},M),{label:null,title:null}):M},o.prototype.getYAxisOption=function(e,a,M,N){return M},o.prototype.renderTitle=function(){var e=this;Object(i.each)(this.facets,function(a,M){var N=a.columnValue,at=a.rowValue,Ct=a.view,Ft=Object(i.get)(e.cfg.title,"formatter");if(e.cfg.transpose){var ne=Object(i.deepMix)({position:["50%","0%"],content:Ft?Ft(N):N},Zo(t.TOP),e.cfg.title);Ct.annotation().text(ne)}else{var ne=Object(i.deepMix)({position:["100%","50%"],content:Ft?Ft(at):at},Zo(t.RIGHT),e.cfg.title);Ct.annotation().text(ne)}})},o}(Zi),Gh=Fh,Uh=function(h){Object(H.b)(o,h);function o(){return h!==null&&h.apply(this,arguments)||this}return o.prototype.afterEachView=function(e,a){this.processAxis(e,a)},o.prototype.beforeEachView=function(e,a){},o.prototype.getDefaultCfg=function(){return Object(i.deepMix)({},h.prototype.getDefaultCfg.call(this),{type:"rect",columnTitle:Object(H.a)({},h.prototype.getDefaultTitleCfg.call(this)),rowTitle:Object(H.a)({},h.prototype.getDefaultTitleCfg.call(this))})},o.prototype.render=function(){h.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.generateFacets=function(e){var a=this,M=this.cfg.fields,N=M[0],at=M[1],Ct=[],Ft=1,ne=1,ge=[""],be=[""];return N&&(ge=this.getFieldValues(e,N),Ft=ge.length),at&&(be=this.getFieldValues(e,at),ne=be.length),ge.forEach(function(Ae,Xe){be.forEach(function(fn,En){var nr=[{field:N,value:Ae,values:ge},{field:at,value:fn,values:be}],ar=Object(i.filter)(e,a.getFacetDataFilter(nr)),Er={type:a.cfg.type,data:ar,region:a.getRegion(ne,Ft,Xe,En),columnValue:Ae,rowValue:fn,columnField:N,rowField:at,columnIndex:Xe,rowIndex:En,columnValuesLength:Ft,rowValuesLength:ne};Ct.push(Er)})}),Ct},o.prototype.renderTitle=function(){var e=this;Object(i.each)(this.facets,function(a,M){var N=a.columnIndex,at=a.rowIndex,Ct=a.columnValuesLength,Ft=a.columnValue,ne=a.rowValue,ge=a.view;if(at===0){var be=Object(i.get)(e.cfg.columnTitle,"formatter"),Ae=Object(i.deepMix)({position:["50%","0%"],content:be?be(Ft):Ft},Zo(t.TOP),e.cfg.columnTitle);ge.annotation().text(Ae)}if(N===Ct-1){var be=Object(i.get)(e.cfg.rowTitle,"formatter"),Ae=Object(i.deepMix)({position:["100%","50%"],content:be?be(ne):ne},Zo(t.RIGHT),e.cfg.rowTitle);ge.annotation().text(Ae)}})},o.prototype.getXAxisOption=function(e,a,M,N){return N.rowIndex!==N.rowValuesLength-1?Object(H.a)(Object(H.a)({},M),{title:null,label:null}):N.columnIndex!==Math.floor((N.columnValuesLength-1)/2)?Object(H.a)(Object(H.a)({},M),{title:null}):M},o.prototype.getYAxisOption=function(e,a,M,N){return N.columnIndex!==0?Object(H.a)(Object(H.a)({},M),{title:null,label:null}):N.rowIndex!==Math.floor((N.rowValuesLength-1)/2)?Object(H.a)(Object(H.a)({},M),{title:null}):M},o}(Zi),ff=Uh,Ic=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.afterChartRender=function(){e.facets&&e.cfg.line&&(e.container.clear(),e.drawLines(e.facets))},e}return o.prototype.afterEachView=function(e,a){this.processAxis(e,a)},o.prototype.beforeEachView=function(e,a){},o.prototype.init=function(){h.prototype.init.call(this),this.view.on(p.AFTER_RENDER,this.afterChartRender)},o.prototype.getDefaultCfg=function(){return Object(i.deepMix)({},h.prototype.getDefaultCfg.call(this),{type:"tree",line:{style:{lineWidth:1,stroke:"#ddd"},smooth:!1},showTitle:!0,title:h.prototype.getDefaultTitleCfg.call(this)})},o.prototype.generateFacets=function(e){var a=this.cfg.fields;if(!a.length)throw new Error("Please specify for the fields for rootFacet!");var M=[],N={type:this.cfg.type,data:e,region:null,rowValuesLength:this.getRows(),columnValuesLength:1,rowIndex:0,columnIndex:0,rowField:"",columnField:"",rowValue:"",columnValue:""};return M.push(N),N.children=this.getChildFacets(e,1,M),this.setRegion(M),M},o.prototype.setRegion=function(e){var a=this;this.forceColIndex(e),e.forEach(function(M){M.region=a.getRegion(M.rowValuesLength,M.columnValuesLength,M.columnIndex,M.rowIndex)})},o.prototype.getRegion=function(e,a,M,N){var at=1/a,Ct=1/e,Ft={x:at*M,y:Ct*N},ne={x:Ft.x+at,y:Ft.y+Ct*2/3};return{start:Ft,end:ne}},o.prototype.forceColIndex=function(e){var a=this,M=[],N=0;e.forEach(function(Ae){a.isLeaf(Ae)&&(M.push(Ae),Ae.columnIndex=N,N++)}),M.forEach(function(Ae){Ae.columnValuesLength=M.length});for(var at=this.cfg.fields.length,Ct=at-1;Ct>=0;Ct--)for(var Ft=this.getFacetsByLevel(e,Ct),ne=0,ge=Ft;ne<ge.length;ne++){var be=ge[ne];this.isLeaf(be)||(be.originColIndex=be.columnIndex,be.columnIndex=this.getRegionIndex(be.children),be.columnValuesLength=M.length)}},o.prototype.getFacetsByLevel=function(e,a){var M=[];return e.forEach(function(N){N.rowIndex===a&&M.push(N)}),M},o.prototype.getRegionIndex=function(e){var a=e[0],M=e[e.length-1];return(M.columnIndex-a.columnIndex)/2+a.columnIndex},o.prototype.isLeaf=function(e){return!e.children||!e.children.length},o.prototype.getRows=function(){return this.cfg.fields.length+1},o.prototype.getChildFacets=function(e,a,M){var N=this,at=this.cfg.fields,Ct=at.length;if(!(Ct<a)){var Ft=[],ne=at[a-1],ge=this.getFieldValues(e,ne);return ge.forEach(function(be,Ae){var Xe=[{field:ne,value:be,values:ge}],fn=e.filter(N.getFacetDataFilter(Xe));if(fn.length){var En={type:N.cfg.type,data:fn,region:null,columnValue:be,rowValue:"",columnField:ne,rowField:"",columnIndex:Ae,rowValuesLength:N.getRows(),columnValuesLength:1,rowIndex:a,children:N.getChildFacets(fn,a+1,M)};Ft.push(En),M.push(En)}}),Ft}},o.prototype.render=function(){h.prototype.render.call(this),this.cfg.showTitle&&this.renderTitle()},o.prototype.renderTitle=function(){var e=this;Object(i.each)(this.facets,function(a){var M=a.columnValue,N=a.view,at=Object(i.get)(e.cfg.title,"formatter"),Ct=Object(i.deepMix)({position:["50%","0%"],content:at?at(M):M},Zo(t.TOP),e.cfg.title);N.annotation().text(Ct)})},o.prototype.drawLines=function(e){var a=this;e.forEach(function(M){if(!a.isLeaf(M)){var N=M.children;a.addFacetLines(M,N)}})},o.prototype.addFacetLines=function(e,a){var M=this,N=e.view,at=N.coordinateBBox,Ct={x:at.x+at.width/2,y:at.y+at.height};a.forEach(function(Ft){var ne=Ft.view.coordinateBBox,ge={x:ne.bl.x+(ne.tr.x-ne.bl.x)/2,y:ne.tr.y},be={x:Ct.x,y:Ct.y+(ge.y-Ct.y)/2},Ae={x:ge.x,y:be.y};M.drawLine([Ct,be,Ae,ge])})},o.prototype.getPath=function(e){var a=[],M=this.cfg.line.smooth;return M?(a.push(["M",e[0].x,e[0].y]),a.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y])):e.forEach(function(N,at){at===0?a.push(["M",N.x,N.y]):a.push(["L",N.x,N.y])}),a},o.prototype.drawLine=function(e){var a=this.getPath(e),M=this.cfg.line.style;this.container.addShape("path",{attrs:Object(i.assign)({path:a},M)})},o.prototype.getXAxisOption=function(e,a,M,N){return N.rowIndex!==N.rowValuesLength-1?Object(H.a)(Object(H.a)({},M),{title:null,label:null}):M},o.prototype.getYAxisOption=function(e,a,M,N){return N.originColIndex!==0&&N.columnIndex!==0?Object(H.a)(Object(H.a)({},M),{title:null,label:null}):M},o}(Zi),zh=Ic;function hf(h){var o=Object(H.d)(h);o.sort(function(a,M){return a-M});var e=o.length;return e===0?0:e%2==1?o[(e-1)/2]:(o[e/2]+o[e/2-1])/2}function df(h){var o=Object(i.reduce)(h,function(e,a){return e+=isNaN(a)||!Object(i.isNumber)(a)?0:a},0);return h.length===0?0:o/h.length}function Ou(h,o){var e;switch(h){case"start":return 0;case"end":return 1;case"median":{e=o.isCategory?hf(o.values.map(function(a,M){return M})):hf(o.values);break}case"mean":{e=o.isCategory?(o.values.length-1)/2:df(o.values);break}case"min":e=o.isCategory?0:o[h];break;case"max":e=o.isCategory?o.values.length-1:o[h];break;default:e=h;break}return o.scale(e)}var $u=["regionFilter","shape"],_h=function(h){Object(H.b)(o,h);function o(e){var a=h.call(this,e)||this;return a.cache=new Map,a.foregroundContainer=a.view.getLayer(y.FORE).addGroup(),a.backgroundContainer=a.view.getLayer(y.BG).addGroup(),a.option=[],a}return Object.defineProperty(o.prototype,"name",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.layout=function(){this.update()},o.prototype.render=function(){},o.prototype.update=function(){var e=this;this.onAfterRender(function(){var M=new Map;Object(i.each)(e.option,function(N){if(Object(i.includes)($u,N.type)){var at=e.updateOrCreate(N);at&&M.set(e.getCacheKey(N),at)}}),e.cache=e.syncCache(M)});var a=new Map;Object(i.each)(this.option,function(M){if(!Object(i.includes)($u,M.type)){var N=e.updateOrCreate(M);N&&a.set(e.getCacheKey(M),N)}}),this.cache=this.syncCache(a)},o.prototype.clear=function(e){e===void 0&&(e=!1),h.prototype.clear.call(this),this.clearComponents(),this.foregroundContainer.clear(),this.backgroundContainer.clear(),e&&(this.option=[])},o.prototype.destroy=function(){this.clear(!0),this.foregroundContainer.remove(!0),this.backgroundContainer.remove(!0)},o.prototype.getComponents=function(){var e=[];return this.cache.forEach(function(a){e.push(a)}),e},o.prototype.clearComponents=function(){this.getComponents().forEach(function(e){e.component.destroy()}),this.cache.clear()},o.prototype.onAfterRender=function(e){this.view.getOptions().animate?this.view.geometries.forEach(function(a){a.animateOption&&a.once(b.AFTER_DRAW_ANIMATE,function(){e()})}):this.view.getRootView().once(p.AFTER_RENDER,function(){e()})},o.prototype.createAnnotation=function(e){var a=e.type,M=pi.Annotation[Object(i.upperFirst)(a)];if(M){var N=this.getAnnotationTheme(a),at=this.getAnnotationCfg(a,e,N),Ct=new M(at);return{component:Ct,layer:this.isTop(at)?y.FORE:y.BG,direction:t.NONE,type:n.ANNOTATION,extra:e}}},o.prototype.annotation=function(e){this.option.push(e)},o.prototype.arc=function(e){return this.annotation(Object(H.a)({type:"arc"},e)),this},o.prototype.image=function(e){return this.annotation(Object(H.a)({type:"image"},e)),this},o.prototype.line=function(e){return this.annotation(Object(H.a)({type:"line"},e)),this},o.prototype.region=function(e){return this.annotation(Object(H.a)({type:"region"},e)),this},o.prototype.text=function(e){return this.annotation(Object(H.a)({type:"text"},e)),this},o.prototype.dataMarker=function(e){return this.annotation(Object(H.a)({type:"dataMarker"},e)),this},o.prototype.dataRegion=function(e){this.annotation(Object(H.a)({type:"dataRegion"},e))},o.prototype.regionFilter=function(e){this.annotation(Object(H.a)({type:"regionFilter"},e))},o.prototype.shape=function(e){this.annotation(Object(H.a)({type:"shape"},e))},o.prototype.html=function(e){this.annotation(Object(H.a)({type:"html"},e))},o.prototype.parsePosition=function(e){var a=this.view.getXScale(),M=this.view.getScalesByDim("y"),N=Object(i.isFunction)(e)?e.call(null,a,M):e,at=0,Ct=0;if(Object(i.isArray)(N)){var Ft=N[0],ne=N[1];if(Object(i.isString)(Ft)&&Ft.indexOf("%")!==-1&&!isNaN(Ft.slice(0,-1)))return this.parsePercentPosition(N);at=Ou(Ft,a),Ct=Ou(ne,Object.values(M)[0])}else if(!Object(i.isNil)(N))for(var ge=0,be=Object(i.keys)(N);ge<be.length;ge++){var Ae=be[ge],Xe=N[Ae];Ae===a.field&&(at=Ou(Xe,a)),M[Ae]&&(Ct=Ou(Xe,M[Ae]))}return this.view.getCoordinate().convert({x:at,y:Ct})},o.prototype.getRegionPoints=function(e,a){var M=this,N=this.view.getXScale(),at=this.view.getScalesByDim("y"),Ct=Object.values(at)[0],Ft=N.field,ne=this.view.getData(),ge=Object(i.isArray)(e)?e[0]:e[Ft],be=Object(i.isArray)(a)?a[0]:a[Ft],Ae=[],Xe;return Object(i.each)(ne,function(fn,En){if(fn[Ft]===ge&&(Xe=En),En>=Xe){var nr=M.parsePosition([fn[Ft],fn[Ct.field]]);nr&&Ae.push(nr)}if(fn[Ft]===be)return!1}),Ae},o.prototype.parsePercentPosition=function(e){var a=parseFloat(e[0])/100,M=parseFloat(e[1])/100,N=this.view.getCoordinate(),at=N.start,Ct=N.end,Ft={x:Math.min(at.x,Ct.x),y:Math.min(at.y,Ct.y)},ne=N.getWidth()*a+Ft.x,ge=N.getHeight()*M+Ft.y;return{x:ne,y:ge}},o.prototype.getCoordinateBBox=function(){var e=this.view.getCoordinate(),a=e.start,M=e.end,N=e.getWidth(),at=e.getHeight(),Ct={x:Math.min(a.x,M.x),y:Math.min(a.y,M.y)};return{x:Ct.x,y:Ct.y,minX:Ct.x,minY:Ct.y,maxX:Ct.x+N,maxY:Ct.y+at,width:N,height:at}},o.prototype.getAnnotationCfg=function(e,a,M){var N=this,at=this.view.getCoordinate(),Ct=this.view.getCanvas(),Ft={};if(Object(i.isNil)(a))return null;if(e==="arc"){var ne=a,ge=ne.start,be=ne.end,Ae=this.parsePosition(ge),Xe=this.parsePosition(be),fn=ur(at,Ae),En=ur(at,Xe);fn>En&&(En=Math.PI*2+En),Ft={center:at.getCenter(),radius:sn(at,Ae),startAngle:fn,endAngle:En}}else if(e==="image"){var nr=a,ge=nr.start,be=nr.end;Ft={start:this.parsePosition(ge),end:this.parsePosition(be),src:a.src}}else if(e==="line"){var ar=a,ge=ar.start,be=ar.end;Ft={start:this.parsePosition(ge),end:this.parsePosition(be),text:Object(i.get)(a,"text",null)}}else if(e==="region"){var Er=a,ge=Er.start,be=Er.end;Ft={start:this.parsePosition(ge),end:this.parsePosition(be)}}else if(e==="text"){var Mr=this.view.getData(),qr=a,oi=qr.position,ai=qr.content,aa=Object(H.c)(qr,["position","content"]),Ji=ai;Object(i.isFunction)(ai)&&(Ji=ai(Mr)),Ft=Object(H.a)(Object(H.a)(Object(H.a)({},this.parsePosition(oi)),aa),{content:Ji})}else if(e==="dataMarker"){var _i=a,oi=_i.position,Ca=_i.point,io=_i.line,ao=_i.text,co=_i.autoAdjust,go=_i.direction;Ft=Object(H.a)(Object(H.a)({},this.parsePosition(oi)),{coordinateBBox:this.getCoordinateBBox(),point:Ca,line:io,text:ao,autoAdjust:co,direction:go})}else if(e==="dataRegion"){var et=a,ge=et.start,be=et.end,z=et.region,ao=et.text,T=et.lineLength;Ft={points:this.getRegionPoints(ge,be),region:z,text:ao,lineLength:T}}else if(e==="regionFilter"){var B=a,ge=B.start,be=B.end,tt=B.apply,It=B.color,Nt=this.view.geometries,q=[],Rt=function wn(zn){!zn||(zn.isGroup()?zn.getChildren().forEach(function(In){return wn(In)}):q.push(zn))};Object(i.each)(Nt,function(wn){tt?Object(i.contains)(tt,wn.type)&&Object(i.each)(wn.elements,function(zn){Rt(zn.shape)}):Object(i.each)(wn.elements,function(zn){Rt(zn.shape)})}),Ft={color:It,shapes:q,start:this.parsePosition(ge),end:this.parsePosition(be)}}else if(e==="shape"){var Qt=a,ee=Qt.render,xe=Object(H.c)(Qt,["render"]),Pe=function(en){if(Object(i.isFunction)(a.render))return ee(en,N.view,{parsePosition:N.parsePosition.bind(N)})};Ft=Object(H.a)(Object(H.a)({},xe),{render:Pe})}else if(e==="html"){var He=a,Be=He.html,oi=He.position,xe=Object(H.c)(He,["html","position"]),Ke=function(zn){return Object(i.isFunction)(Be)?Be(zn,N.view):Be};Ft=Object(H.a)(Object(H.a)(Object(H.a)({},xe),this.parsePosition(oi)),{parent:Ct.get("el").parentNode,html:Ke})}var Qe=Object(i.deepMix)({},M,Object(H.a)(Object(H.a)({},Ft),{top:a.top,style:a.style,offsetX:a.offsetX,offsetY:a.offsetY}));return e!=="html"&&(Qe.container=this.getComponentContainer(Qe)),Qe.animate=this.view.getOptions().animate&&Qe.animate&&Object(i.get)(a,"animate",Qe.animate),Qe.animateOption=Object(i.deepMix)({},Ya,Qe.animateOption,a.animateOption),Qe},o.prototype.isTop=function(e){return Object(i.get)(e,"top",!0)},o.prototype.getComponentContainer=function(e){return this.isTop(e)?this.foregroundContainer:this.backgroundContainer},o.prototype.getAnnotationTheme=function(e){return Object(i.get)(this.view.getTheme(),["components","annotation",e],{})},o.prototype.updateOrCreate=function(e){var a=this.cache.get(this.getCacheKey(e));if(a){var M=e.type,N=this.getAnnotationTheme(M),at=this.getAnnotationCfg(M,e,N);te(at,["container"]),a.component.update(at),Object(i.includes)($u,e.type)&&a.component.render()}else a=this.createAnnotation(e),a&&(a.component.init(),Object(i.includes)($u,e.type)&&a.component.render());return a},o.prototype.syncCache=function(e){var a=this,M=new Map(this.cache);return e.forEach(function(N,at){M.set(at,N)}),M.forEach(function(N,at){Object(i.find)(a.option,function(Ct){return at===a.getCacheKey(Ct)})||(N.component.destroy(),M.delete(at))}),M},o.prototype.getCacheKey=function(e){return e},o}(ja),vf=_h;function Eu(h,o){return Object(i.get)(h,["components","axis",o,"grid"],{})}function qu(h,o,e,a){var M=[],N=o.getTicks();return h.isPolar&&N.push({value:1,text:"",tickValue:""}),N.reduce(function(at,Ct,Ft){var ne=Ct.value;if(a)M.push({points:[h.convert(e==="y"?{x:0,y:ne}:{x:ne,y:0}),h.convert(e==="y"?{x:1,y:ne}:{x:ne,y:1})]});else if(Ft){var ge=at.value,be=(ge+ne)/2;M.push({points:[h.convert(e==="y"?{x:0,y:be}:{x:be,y:0}),h.convert(e==="y"?{x:1,y:be}:{x:be,y:1})]})}return Ct},N[0]),M}function Ls(h,o,e,a,M){var N=o.values.length,at=[],Ct=e.getTicks();return Ct.reduce(function(Ft,ne){var ge=Ft?Ft.value:ne.value,be=ne.value,Ae=(ge+be)/2;return M==="x"?at.push({points:[h.convert({x:a?be:Ae,y:0}),h.convert({x:a?be:Ae,y:1})]}):at.push({points:Object(i.map)(Array(N+1),function(Xe,fn){return h.convert({x:fn/N,y:a?be:Ae})})}),ne},Ct[0]),at}function pf(h,o){var e=Object(i.get)(o,"grid");if(e===null)return!1;var a=Object(i.get)(h,"grid");return!(e===void 0&&a===null)}var Bs=["container"],gf=Object(H.a)(Object(H.a)({},Ya),{appear:null}),Go=function(h){Object(H.b)(o,h);function o(e){var a=h.call(this,e)||this;return a.cache=new Map,a.gridContainer=a.view.getLayer(y.BG).addGroup(),a.axisContainer=a.view.getLayer(y.BG).addGroup(),a}return Object.defineProperty(o.prototype,"name",{get:function(){return"axis"},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.render=function(){this.update()},o.prototype.layout=function(){var e=this,a=this.view.getCoordinate();Object(i.each)(this.getComponents(),function(M){var N=M.component,at=M.direction,Ct=M.type,Ft=M.extra,ne=Ft.dim,ge=Ft.scale,be=Ft.alignTick,Ae;if(Ct===n.AXIS)a.isPolar?ne==="x"?Ae=a.isTransposed?Kr(a,at):Gi(a):ne==="y"&&(Ae=a.isTransposed?Gi(a):Kr(a,at)):Ae=Kr(a,at);else if(Ct===n.GRID)if(a.isPolar){var Xe=void 0;a.isTransposed?Xe=ne==="x"?Ls(a,e.view.getYScales()[0],ge,be,ne):qu(a,ge,ne,be):Xe=ne==="x"?qu(a,ge,ne,be):Ls(a,e.view.getXScale(),ge,be,ne),Ae={items:Xe,center:e.view.getCoordinate().getCenter()}}else Ae={items:qu(a,ge,ne,be)};N.update(Ae)})},o.prototype.update=function(){this.option=this.view.getOptions().axes;var e=new Map;this.updateXAxes(e),this.updateYAxes(e);var a=new Map;this.cache.forEach(function(M,N){e.has(N)?a.set(N,M):M.component.destroy()}),this.cache=a},o.prototype.clear=function(){h.prototype.clear.call(this),this.cache.clear(),this.gridContainer.clear(),this.axisContainer.clear()},o.prototype.destroy=function(){h.prototype.destroy.call(this),this.gridContainer.remove(!0),this.axisContainer.remove(!0)},o.prototype.getComponents=function(){var e=[];return this.cache.forEach(function(a){e.push(a)}),e},o.prototype.updateXAxes=function(e){var a=this.view.getXScale();if(!(!a||a.isIdentity)){var M=ca(this.option,a.field);if(M!==!1){var N=ha(M,t.BOTTOM),at=y.BG,Ct="x",Ft=this.view.getCoordinate(),ne=this.getId("axis",a.field),ge=this.getId("grid",a.field);if(Ft.isRect){var be=this.cache.get(ne);if(be){var Ae=this.getLineAxisCfg(a,M,N);te(Ae,Bs),be.component.update(Ae),e.set(ne,be)}else be=this.createLineAxis(a,M,at,N,Ct),this.cache.set(ne,be),e.set(ne,be);var Xe=this.cache.get(ge);if(Xe){var Ae=this.getLineGridCfg(a,M,N,Ct);te(Ae,Bs),Xe.component.update(Ae),e.set(ge,Xe)}else Xe=this.createLineGrid(a,M,at,N,Ct),Xe&&(this.cache.set(ge,Xe),e.set(ge,Xe))}else if(Ft.isPolar){var be=this.cache.get(ne);if(be){var Ae=Ft.isTransposed?this.getLineAxisCfg(a,M,t.RADIUS):this.getCircleAxisCfg(a,M,N);te(Ae,Bs),be.component.update(Ae),e.set(ne,be)}else{if(Ft.isTransposed){if(Object(i.isUndefined)(M))return;be=this.createLineAxis(a,M,at,t.RADIUS,Ct)}else be=this.createCircleAxis(a,M,at,N,Ct);this.cache.set(ne,be),e.set(ne,be)}var Xe=this.cache.get(ge);if(Xe){var Ae=Ft.isTransposed?this.getCircleGridCfg(a,M,t.RADIUS,Ct):this.getLineGridCfg(a,M,t.CIRCLE,Ct);te(Ae,Bs),Xe.component.update(Ae),e.set(ge,Xe)}else{if(Ft.isTransposed){if(Object(i.isUndefined)(M))return;Xe=this.createCircleGrid(a,M,at,t.RADIUS,Ct)}else Xe=this.createLineGrid(a,M,at,t.CIRCLE,Ct);Xe&&(this.cache.set(ge,Xe),e.set(ge,Xe))}}}}},o.prototype.updateYAxes=function(e){var a=this,M=this.view.getYScales();Object(i.each)(M,function(N,at){if(!(!N||N.isIdentity)){var Ct=N.field,Ft=ca(a.option,Ct);if(Ft!==!1){var ne=y.BG,ge="y",be=a.getId("axis",Ct),Ae=a.getId("grid",Ct),Xe=a.view.getCoordinate();if(Xe.isRect){var fn=ha(Ft,at===0?t.LEFT:t.RIGHT),En=a.cache.get(be);if(En){var nr=a.getLineAxisCfg(N,Ft,fn);te(nr,Bs),En.component.update(nr),e.set(be,En)}else En=a.createLineAxis(N,Ft,ne,fn,ge),a.cache.set(be,En),e.set(be,En);var ar=a.cache.get(Ae);if(ar){var nr=a.getLineGridCfg(N,Ft,fn,ge);te(nr,Bs),ar.component.update(nr),e.set(Ae,ar)}else ar=a.createLineGrid(N,Ft,ne,fn,ge),ar&&(a.cache.set(Ae,ar),e.set(Ae,ar))}else if(Xe.isPolar){var En=a.cache.get(be);if(En){var nr=Xe.isTransposed?a.getCircleAxisCfg(N,Ft,t.CIRCLE):a.getLineAxisCfg(N,Ft,t.RADIUS);te(nr,Bs),En.component.update(nr),e.set(be,En)}else{if(Xe.isTransposed){if(Object(i.isUndefined)(Ft))return;En=a.createCircleAxis(N,Ft,ne,t.CIRCLE,ge)}else En=a.createLineAxis(N,Ft,ne,t.RADIUS,ge);a.cache.set(be,En),e.set(be,En)}var ar=a.cache.get(Ae);if(ar){var nr=Xe.isTransposed?a.getLineGridCfg(N,Ft,t.CIRCLE,ge):a.getCircleGridCfg(N,Ft,t.RADIUS,ge);te(nr,Bs),ar.component.update(nr),e.set(Ae,ar)}else{if(Xe.isTransposed){if(Object(i.isUndefined)(Ft))return;ar=a.createLineGrid(N,Ft,ne,t.CIRCLE,ge)}else ar=a.createCircleGrid(N,Ft,ne,t.RADIUS,ge);ar&&(a.cache.set(Ae,ar),e.set(Ae,ar))}}}}})},o.prototype.createLineAxis=function(e,a,M,N,at){var Ct={component:new Ni(this.getLineAxisCfg(e,a,N)),layer:M,direction:N===t.RADIUS?t.NONE:N,type:n.AXIS,extra:{dim:at,scale:e}};return Ct.component.set("field",e.field),Ct.component.init(),Ct},o.prototype.createLineGrid=function(e,a,M,N,at){var Ct=this.getLineGridCfg(e,a,N,at);if(Ct){var Ft={component:new Fi(Ct),layer:M,direction:t.NONE,type:n.GRID,extra:{dim:at,scale:e,alignTick:Object(i.get)(Ct,"alignTick",!0)}};return Ft.component.init(),Ft}},o.prototype.createCircleAxis=function(e,a,M,N,at){var Ct={component:new Bi(this.getCircleAxisCfg(e,a,N)),layer:M,direction:N,type:n.AXIS,extra:{dim:at,scale:e}};return Ct.component.set("field",e.field),Ct.component.init(),Ct},o.prototype.createCircleGrid=function(e,a,M,N,at){var Ct=this.getCircleGridCfg(e,a,N,at);if(Ct){var Ft={component:new ma(Ct),layer:M,direction:t.NONE,type:n.GRID,extra:{dim:at,scale:e,alignTick:Object(i.get)(Ct,"alignTick",!0)}};return Ft.component.init(),Ft}},o.prototype.getLineAxisCfg=function(e,a,M){var N=this.axisContainer,at=this.view.getCoordinate(),Ct=Kr(at,M),Ft=na(e,a),ne=Si(this.view.getTheme(),M),ge=Object(i.get)(a,["title"])?Object(i.deepMix)({title:{style:{text:Ft}}},{title:Object(i.get)(Si(this.view.getTheme(),"common"),"title")},a):a,be=Object(i.deepMix)(Object(H.a)(Object(H.a)({container:N},Ct),{ticks:e.getTicks().map(function(Mr){return{id:""+Mr.tickValue,name:Mr.text,value:Mr.value}}),verticalFactor:at.isPolar?Ri(Ct,at.getCenter())*-1:Ri(Ct,at.getCenter()),theme:ne}),ne,ge),Ae=this.getAnimateCfg(be),Xe=Ae.animate,fn=Ae.animateOption;be.animateOption=fn,be.animate=Xe;var En=Oi(Ct),nr=Object(i.get)(be,"verticalLimitLength",En?1/3:1/2);if(nr<=1){var ar=this.view.getCanvas().get("width"),Er=this.view.getCanvas().get("height");be.verticalLimitLength=nr*(En?ar:Er)}return be},o.prototype.getLineGridCfg=function(e,a,M,N){if(!!pf(Si(this.view.getTheme(),M),a)){var at=Eu(this.view.getTheme(),M),Ct=Object(i.deepMix)({container:this.gridContainer},at,Object(i.get)(a,"grid"),this.getAnimateCfg(a));return Ct.items=qu(this.view.getCoordinate(),e,N,Object(i.get)(Ct,"alignTick",!0)),Ct}},o.prototype.getCircleAxisCfg=function(e,a,M){var N=this.axisContainer,at=this.view.getCoordinate(),Ct=e.getTicks().map(function(En){return{id:""+En.tickValue,name:En.text,value:En.value}});!e.isCategory&&Math.abs(at.endAngle-at.startAngle)===Math.PI*2&&Ct.pop();var Ft=na(e,a),ne=Si(this.view.getTheme(),t.CIRCLE),ge=Object(i.get)(a,["title"])?Object(i.deepMix)({title:{style:{text:Ft}}},{title:Object(i.get)(Si(this.view.getTheme(),"common"),"title")},a):a,be=Object(i.deepMix)(Object(H.a)(Object(H.a)({container:N},Gi(this.view.getCoordinate())),{ticks:Ct,verticalFactor:1,theme:ne}),ne,ge),Ae=this.getAnimateCfg(be),Xe=Ae.animate,fn=Ae.animateOption;return be.animate=Xe,be.animateOption=fn,be},o.prototype.getCircleGridCfg=function(e,a,M,N){if(!!pf(Si(this.view.getTheme(),M),a)){var at=Eu(this.view.getTheme(),t.RADIUS),Ct=Object(i.deepMix)({container:this.gridContainer,center:this.view.getCoordinate().getCenter()},at,Object(i.get)(a,"grid"),this.getAnimateCfg(a)),Ft=Object(i.get)(Ct,"alignTick",!0),ne=N==="x"?this.view.getYScales()[0]:this.view.getXScale();return Ct.items=Ls(this.view.getCoordinate(),ne,e,Ft,N),Ct}},o.prototype.getId=function(e,a){var M=this.view.getCoordinate();return e+"-"+a+"-"+M.type},o.prototype.getAnimateCfg=function(e){return{animate:this.view.getOptions().animate&&Object(i.get)(e,"animate"),animateOption:e&&e.animateOption?Object(i.deepMix)({},gf,e.animateOption):gf}},o}(ja),mf=Go;function Ss(h,o,e){return e===t.TOP?[h.minX+h.width/2-o.width/2,h.minY]:e===t.BOTTOM?[h.minX+h.width/2-o.width/2,h.maxY-o.height]:e===t.LEFT?[h.minX,h.minY+h.height/2-o.height/2]:e===t.RIGHT?[h.maxX-o.width,h.minY+h.height/2-o.height/2]:e===t.TOP_LEFT||e===t.LEFT_TOP?[h.tl.x,h.tl.y]:e===t.TOP_RIGHT||e===t.RIGHT_TOP?[h.tr.x-o.width,h.tr.y]:e===t.BOTTOM_LEFT||e===t.LEFT_BOTTOM?[h.bl.x,h.bl.y-o.height]:e===t.BOTTOM_RIGHT||e===t.RIGHT_BOTTOM?[h.br.x-o.width,h.br.y-o.height]:[0,0]}function yf(h,o){if(o.isTransposed)switch(h){case t.BOTTOM:return t.LEFT;case t.LEFT:return t.BOTTOM;case t.RIGHT:return t.TOP;case t.TOP:return t.RIGHT}return h}function bf(h){return h===t.LEFT?t.RIGHT:h===t.RIGHT?t.LEFT:h}function xf(h){return h===t.TOP?t.BOTTOM:h===t.BOTTOM?t.TOP:h}function Wh(h,o){var e=o.matrix[0],a=o.matrix[4],M=h;return e<0&&(M=bf(M)),a<0&&(M=xf(M)),M}function Vh(h,o){var e=h;return o.isReflect("x")&&(e=bf(e)),o.isReflect("y")&&(e=xf(e)),e}function Yh(h,o){var e=h;return e=yf(e,o),e=Wh(e,o),e=Vh(e,o),e}function Of(h,o){return Object(i.isBoolean)(h)?h===!1?!1:{}:Object(i.get)(h,[o],h)}function tc(h){return Object(i.get)(h,"position",t.BOTTOM)}var Su=function(h){Object(H.b)(o,h);function o(e){var a=h.call(this,e)||this;return a.container=a.view.getLayer(y.FORE).addGroup(),a}return Object.defineProperty(o.prototype,"name",{get:function(){return"legend"},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.render=function(){this.update()},o.prototype.layout=function(){var e=this;this.layoutBBox=this.view.viewBBox,Object(i.each)(this.components,function(a){var M=a.component,N=a.direction,at=Hn(N),Ct=e.getCategoryLegendSizeCfg(at),Ft=M.get("maxWidth"),ne=M.get("maxHeight");M.update({maxWidth:Math.min(Ct.maxWidth,Ft||0),maxHeight:Math.min(Ct.maxHeight,ne||0)});var ge=M.get("padding"),be=M.getLayoutBBox(),Ae=new Ze(be.x,be.y,be.width,be.height).expand(ge),Xe=Ss(e.view.viewBBox,Ae,N),fn=Xe[0],En=Xe[1],nr=Ss(e.layoutBBox,Ae,N),ar=nr[0],Er=nr[1],Mr=0,qr=0;N.startsWith("top")||N.startsWith("bottom")?(Mr=fn,qr=Er):(Mr=ar,qr=En),M.setLocation({x:Mr+ge[3],y:qr+ge[0]}),e.layoutBBox=e.layoutBBox.cut(Ae,N)})},o.prototype.update=function(){var e=this;this.option=this.view.getOptions().legends;var a={},M=function(Xe,fn,En){var nr=e.getId(En.field),ar=e.getComponentById(nr);if(ar){var Er=void 0,Mr=Of(e.option,En.field);Mr!==!1&&(Object(i.get)(Mr,"custom")?Er=e.getCategoryCfg(Xe,fn,En,Mr,!0):En.isLinear?Er=e.getContinuousCfg(Xe,fn,En,Mr):En.isCategory&&(Er=e.getCategoryCfg(Xe,fn,En,Mr))),Er&&(te(Er,["container"]),ar.direction=tc(Mr),ar.component.update(Er),a[nr]=!0)}else{var qr=e.createFieldLegend(Xe,fn,En);qr&&(qr.component.init(),e.components.push(qr),a[nr]=!0)}};if(Object(i.get)(this.option,"custom")){var N="global-custom",at=this.getComponentById(N);if(at){var Ct=this.getCategoryCfg(void 0,void 0,void 0,this.option,!0);te(Ct,["container"]),at.component.update(Ct),a[N]=!0}else{var Ft=this.createCustomLegend(void 0,void 0,void 0,this.option);if(Ft){Ft.init();var ne=y.FORE,ge=tc(this.option);this.components.push({id:N,component:Ft,layer:ne,direction:ge,type:n.LEGEND,extra:void 0}),a[N]=!0}}}else this.loopLegends(M);var be=[];Object(i.each)(this.getComponents(),function(Ae){a[Ae.id]?be.push(Ae):Ae.component.destroy()}),this.components=be},o.prototype.clear=function(){h.prototype.clear.call(this),this.container.clear()},o.prototype.destroy=function(){h.prototype.destroy.call(this),this.container.remove(!0)},o.prototype.getGeometries=function(e){var a=this,M=e.geometries;return Object(i.each)(e.views,function(N){M=M.concat(a.getGeometries(N))}),M},o.prototype.loopLegends=function(e){var a=this.view.getRootView()===this.view;if(!!a){var M=this.getGeometries(this.view),N={};Object(i.each)(M,function(at){var Ct=at.getGroupAttributes();Object(i.each)(Ct,function(Ft){var ne=Ft.getScale(Ft.type);!ne||ne.type==="identity"||N[ne.field]||(e(at,Ft,ne),N[ne.field]=!0)})})}},o.prototype.createFieldLegend=function(e,a,M){var N,at=Of(this.option,M.field),Ct=y.FORE,Ft=tc(at);if(at!==!1&&(Object(i.get)(at,"custom")?N=this.createCustomLegend(e,a,M,at):M.isLinear?N=this.createContinuousLegend(e,a,M,at):M.isCategory&&(N=this.createCategoryLegend(e,a,M,at))),N)return N.set("field",M.field),{id:this.getId(M.field),component:N,layer:Ct,direction:Ft,type:n.LEGEND,extra:{scale:M}}},o.prototype.createCustomLegend=function(e,a,M,N){var at=this.getCategoryCfg(e,a,M,N,!0);return new ua(at)},o.prototype.createContinuousLegend=function(e,a,M,N){var at=this.getContinuousCfg(e,a,M,N);return new Ra(at)},o.prototype.createCategoryLegend=function(e,a,M,N){var at=this.getCategoryCfg(e,a,M,N);return new ua(at)},o.prototype.getContinuousCfg=function(e,a,M,N){var at=M.getTicks(),Ct=Object(i.find)(at,function(En){return En.value===0}),Ft=Object(i.find)(at,function(En){return En.value===1}),ne=at.map(function(En){var nr=En.value,ar=En.tickValue,Er=a.mapping(M.invert(nr)).join("");return{value:ar,attrValue:Er,color:Er,scaleValue:nr}});Ct||ne.push({value:M.min,attrValue:a.mapping(M.invert(0)).join(""),color:a.mapping(M.invert(0)).join(""),scaleValue:0}),Ft||ne.push({value:M.max,attrValue:a.mapping(M.invert(1)).join(""),color:a.mapping(M.invert(1)).join(""),scaleValue:1}),ne.sort(function(En,nr){return En.value-nr.value});var ge={min:Object(i.head)(ne).value,max:Object(i.last)(ne).value,colors:[],rail:{type:a.type},track:{}};a.type==="size"&&(ge.track={style:{fill:a.type==="size"?this.view.getTheme().defaultColor:void 0}}),a.type==="color"&&(ge.colors=ne.map(function(En){return En.attrValue}));var be=this.container,Ae=tc(N),Xe=Hn(Ae),fn=Object(i.get)(N,"title");return fn&&(fn=Object(i.deepMix)({text:Lr(M)},fn)),ge.container=be,ge.layout=Xe,ge.title=fn,ge.animateOption=Ya,this.mergeLegendCfg(ge,N,"continuous")},o.prototype.getCategoryCfg=function(e,a,M,N,at){var Ct=this.container,Ft=Object(i.get)(N,"position",t.BOTTOM),ne=Object(i.get)(this.view.getTheme(),["components","legend",Ft,"marker"]),ge=Object(i.get)(N,"marker"),be=Hn(Ft),Ae=at?Or(ne,ge,N.items):xr(this.view,e,a,ne,ge),Xe=Object(i.get)(N,"title");Xe&&(Xe=Object(i.deepMix)({text:M?Lr(M):""},Xe));var fn=this.getCategoryLegendSizeCfg(be);fn.container=Ct,fn.layout=be,fn.items=Ae,fn.title=Xe,fn.animateOption=Ya;var En=this.mergeLegendCfg(fn,N,Ft);En.reversed&&En.items.reverse();var nr=Object(i.get)(En,"maxItemWidth");return nr&&nr<=1&&(En.maxItemWidth=this.view.viewBBox.width*nr),En},o.prototype.mergeLegendCfg=function(e,a,M){var N=M.split("-")[0],at=Object(i.get)(this.view.getTheme(),["components","legend",N],{});return Object(i.deepMix)({},at,e,a)},o.prototype.getId=function(e){return this.name+"-"+e},o.prototype.getComponentById=function(e){return Object(i.find)(this.components,function(a){return a.id===e})},o.prototype.getCategoryLegendSizeCfg=function(e){var a=this.view.viewBBox,M=a.width,N=a.height;return e==="vertical"?{maxWidth:M*d,maxHeight:N}:{maxWidth:M,maxHeight:N*d}},o}(ja),Ef=Su,iu=function(h){Object(H.b)(o,h);function o(e){var a=h.call(this,e)||this;return a.onChangeFn=i.noop,a.resetMeasure=function(){a.clear()},a.onValueChange=function(M){var N=M[0],at=M[1];a.start=N,a.end=at,a.changeViewData(N,at)},a.container=a.view.getLayer(y.FORE).addGroup(),a.onChangeFn=Object(i.throttle)(a.onValueChange,20,{leading:!0}),a.width=0,a.view.on(p.BEFORE_CHANGE_DATA,a.resetMeasure),a.view.on(p.BEFORE_CHANGE_SIZE,a.resetMeasure),a}return Object.defineProperty(o.prototype,"name",{get:function(){return"slider"},enumerable:!1,configurable:!0}),o.prototype.destroy=function(){h.prototype.destroy.call(this),this.view.off(p.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(p.BEFORE_CHANGE_SIZE,this.resetMeasure)},o.prototype.init=function(){},o.prototype.render=function(){this.option=this.view.getOptions().slider;var e=this.getSliderCfg(),a=e.start,M=e.end;Object(i.isNil)(this.start)&&(this.start=a,this.end=M);var N=this.view.getOptions().data;this.option&&!Object(i.isEmpty)(N)?this.slider?this.slider=this.updateSlider():(this.slider=this.createSlider(),this.slider.component.on("sliderchange",this.onChangeFn)):this.slider&&(this.slider.component.destroy(),this.slider=void 0)},o.prototype.layout=function(){var e=this;if(this.option&&!this.width&&(this.measureSlider(),setTimeout(function(){e.view.destroyed||e.changeViewData(e.start,e.end)},0)),this.slider){var a=this.view.coordinateBBox.width,M=this.slider.component.get("padding"),N=M[0],at=M[1],Ct=M[2],Ft=M[3],ne=this.slider.component.getLayoutBBox(),ge=new Ze(ne.x,ne.y,Math.min(ne.width,a),ne.height).expand(M),be=this.getMinMaxText(this.start,this.end),Ae=be.minText,Xe=be.maxText,fn=Ss(this.view.viewBBox,ge,t.BOTTOM),En=fn[0],nr=fn[1],ar=Ss(this.view.coordinateBBox,ge,t.BOTTOM),Er=ar[0],Mr=ar[1];this.slider.component.update(Object(H.a)(Object(H.a)({},this.getSliderCfg()),{x:Er+Ft,y:nr+N,width:this.width,start:this.start,end:this.end,minText:Ae,maxText:Xe})),this.view.viewBBox=this.view.viewBBox.cut(ge,t.BOTTOM)}},o.prototype.update=function(){this.render()},o.prototype.createSlider=function(){var e=this.getSliderCfg(),a=new pi.Slider(Object(H.a)({container:this.container},e));return a.init(),{component:a,layer:y.FORE,direction:t.BOTTOM,type:n.SLIDER}},o.prototype.updateSlider=function(){var e=this.getSliderCfg();if(this.width){var a=this.getMinMaxText(this.start,this.end),M=a.minText,N=a.maxText;e=Object(H.a)(Object(H.a)({},e),{width:this.width,start:this.start,end:this.end,minText:M,maxText:N})}return this.slider.component.update(e),this.slider},o.prototype.measureSlider=function(){var e=this.getSliderCfg().width;this.width=e},o.prototype.getSliderCfg=function(){var e={height:16,start:0,end:1,minText:"",maxText:"",x:0,y:0,width:this.view.coordinateBBox.width};if(Object(i.isObject)(this.option)){var a=Object(H.a)({data:this.getData()},Object(i.get)(this.option,"trendCfg",{}));e=Object(i.deepMix)({},e,this.getThemeOptions(),this.option),e=Object(H.a)(Object(H.a)({},e),{trendCfg:a})}return e.start=Object(i.clamp)(Math.min(Object(i.isNil)(e.start)?0:e.start,Object(i.isNil)(e.end)?1:e.end),0,1),e.end=Object(i.clamp)(Math.max(Object(i.isNil)(e.start)?0:e.start,Object(i.isNil)(e.end)?1:e.end),0,1),e},o.prototype.getData=function(){var e=this.view.getOptions().data,a=this.view.getYScales()[0],M=this.view.getGroupScales();if(M.length){var N=M[0],at=N.field,Ct=N.ticks;return e.reduce(function(Ft,ne){return ne[at]===Ct[0]&&Ft.push(ne[a.field]),Ft},[])}return e.map(function(Ft){return Ft[a.field]||0})},o.prototype.getThemeOptions=function(){var e=this.view.getTheme();return Object(i.get)(e,["components","slider","common"],{})},o.prototype.getMinMaxText=function(e,a){var M=this.view.getOptions().data,N=this.view.getXScale(),at=!0,Ct=Object(i.valuesOfKey)(M,N.field),Ft=at?Ct:Ct.reverse(),ne=Object(i.size)(M);if(!N||!ne)return{};var ge=Object(i.size)(Ft),be=Math.floor(e*(ge-1)),Ae=Math.floor(a*(ge-1)),Xe=Object(i.get)(Ft,[be]),fn=Object(i.get)(Ft,[Ae]),En=this.getSliderCfg().formatter;return En&&(Xe=En(Xe,M[be],be),fn=En(fn,M[Ae],Ae)),{minText:Xe,maxText:fn}},o.prototype.changeViewData=function(e,a){var M=this.view.getOptions().data,N=this.view.getXScale(),at=!0,Ct=Object(i.valuesOfKey)(M,N.field),Ft=at?Ct:Ct.reverse(),ne=Object(i.size)(M);if(!(!N||!ne)){var ge=Object(i.size)(Ft),be=Math.floor(e*(ge-1)),Ae=Math.floor(a*(ge-1));this.view.filter(N.field,function(Xe,fn){var En=Ft.indexOf(Xe);return En>-1?ae(En,be,Ae):!0}),this.view.render(!0)}},o.prototype.getComponents=function(){return this.slider?[this.slider]:[]},o.prototype.clear=function(){this.slider&&(this.slider.component.destroy(),this.slider=void 0),this.width=0,this.start=void 0,this.end=void 0},o}(ja),Sf=iu,Ys=0,wf=8,Xh=32,Hh=20,Kh=function(h){Object(H.b)(o,h);function o(e){var a=h.call(this,e)||this;return a.onChangeFn=i.noop,a.resetMeasure=function(){a.clear()},a.onValueChange=function(M){var N=M.ratio,at=a.getValidScrollbarCfg().animate;a.ratio=Object(i.clamp)(N,0,1);var Ct=a.view.getOptions().animate;at||a.view.animate(!1),a.changeViewData(a.getScrollRange(),!0),a.view.animate(Ct)},a.container=a.view.getLayer(y.FORE).addGroup(),a.onChangeFn=Object(i.throttle)(a.onValueChange,20,{leading:!0}),a.trackLen=0,a.thumbLen=0,a.ratio=0,a.view.on(p.BEFORE_CHANGE_DATA,a.resetMeasure),a.view.on(p.BEFORE_CHANGE_SIZE,a.resetMeasure),a}return Object.defineProperty(o.prototype,"name",{get:function(){return"scrollbar"},enumerable:!1,configurable:!0}),o.prototype.destroy=function(){h.prototype.destroy.call(this),this.view.off(p.BEFORE_CHANGE_DATA,this.resetMeasure),this.view.off(p.BEFORE_CHANGE_SIZE,this.resetMeasure)},o.prototype.init=function(){},o.prototype.render=function(){this.option=this.view.getOptions().scrollbar,this.option?this.scrollbar?this.scrollbar=this.updateScrollbar():(this.scrollbar=this.createScrollbar(),this.scrollbar.component.on("scrollchange",this.onChangeFn)):this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0)},o.prototype.layout=function(){var e=this;if(this.option&&!this.trackLen&&(this.measureScrollbar(),setTimeout(function(){e.view.destroyed||e.changeViewData(e.getScrollRange(),!0)})),this.scrollbar){var a=this.view.coordinateBBox.width,M=this.scrollbar.component.get("padding"),N=this.scrollbar.component.getLayoutBBox(),at=new Ze(N.x,N.y,Math.min(N.width,a),N.height).expand(M),Ct=this.getScrollbarComponentCfg(),Ft=void 0,ne=void 0;if(Ct.isHorizontal){var ge=Ss(this.view.viewBBox,at,t.BOTTOM),be=ge[0],Ae=ge[1],Xe=Ss(this.view.coordinateBBox,at,t.BOTTOM),fn=Xe[0],En=Xe[1];Ft=fn,ne=Ae}else{var nr=Ss(this.view.viewBBox,at,t.RIGHT),be=nr[0],Ae=nr[1],ar=Ss(this.view.viewBBox,at,t.RIGHT),fn=ar[0],En=ar[1];Ft=fn,ne=Ae}Ft+=M[3],ne+=M[0],this.trackLen?this.scrollbar.component.update(Object(H.a)(Object(H.a)({},Ct),{x:Ft,y:ne,trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio})):this.scrollbar.component.update(Object(H.a)(Object(H.a)({},Ct),{x:Ft,y:ne})),this.view.viewBBox=this.view.viewBBox.cut(at,Ct.isHorizontal?t.BOTTOM:t.RIGHT)}},o.prototype.update=function(){this.render()},o.prototype.getComponents=function(){return this.scrollbar?[this.scrollbar]:[]},o.prototype.clear=function(){this.scrollbar&&(this.scrollbar.component.destroy(),this.scrollbar=void 0),this.trackLen=0,this.thumbLen=0,this.ratio=0,this.cnt=0,this.step=0,this.data=void 0,this.xScaleCfg=void 0,this.yScalesCfg=[]},o.prototype.getThemeOptions=function(){var e=this.view.getTheme();return Object(i.get)(e,["components","slider","common"],{})},o.prototype.measureScrollbar=function(){var e=this.view.getXScale(),a=this.view.getYScales().slice();this.data=this.view.getOptions().data,this.step=this.getStep(),this.cnt=this.getCnt();var M=this.getScrollbarComponentCfg(),N=M.trackLen,at=M.thumbLen;this.trackLen=N,this.thumbLen=at,this.xScaleCfg={field:e.field,values:e.values||[]},this.yScalesCfg=a},o.prototype.getScrollRange=function(){var e=Math.floor((this.cnt-this.step)*Object(i.clamp)(this.ratio,0,1)),a=Math.min(e+this.step-1,this.cnt-1);return[e,a]},o.prototype.changeViewData=function(e,a){var M=this,N=e[0],at=e[1],Ct=this.getValidScrollbarCfg().type,Ft=Ct!=="vertical",ne=Object(i.valuesOfKey)(this.data,this.xScaleCfg.field),ge=Ft?ne:ne.reverse();this.yScalesCfg.forEach(function(be){M.view.scale(be.field,{formatter:be.formatter,type:be.type,min:be.min,max:be.max})}),this.view.filter(this.xScaleCfg.field,function(be){var Ae=ge.indexOf(be);return Ae>-1?ae(Ae,N,at):!0}),this.view.render(!0)},o.prototype.createScrollbar=function(){var e=this.getValidScrollbarCfg().type,a=e!=="vertical",M=new pi.Scrollbar(Object(H.a)(Object(H.a)({container:this.container},this.getScrollbarComponentCfg()),{x:0,y:0}));return M.init(),{component:M,layer:y.FORE,direction:a?t.BOTTOM:t.RIGHT,type:n.SCROLLBAR}},o.prototype.updateScrollbar=function(){var e=this.getScrollbarComponentCfg(),a=this.trackLen?Object(H.a)(Object(H.a)({},e),{trackLen:this.trackLen,thumbLen:this.thumbLen,thumbOffset:(this.trackLen-this.thumbLen)*this.ratio}):Object(H.a)({},e);return this.scrollbar.component.update(a),this.scrollbar},o.prototype.getStep=function(){if(this.step)return this.step;var e=this.view.coordinateBBox,a=this.getValidScrollbarCfg(),M=a.type,N=a.categorySize,at=M!=="vertical";return Math.floor((at?e.width:e.height)/N)},o.prototype.getCnt=function(){if(this.cnt)return this.cnt;var e=this.view.getXScale(),a=this.view.getOptions().data,M=Object(i.valuesOfKey)(a,e.field);return Object(i.size)(M)},o.prototype.getScrollbarComponentCfg=function(){var e=this.view,a=e.coordinateBBox,M=e.viewBBox,N=this.view.getXScale(),at=this.getValidScrollbarCfg(),Ct=at.type,Ft=at.padding,ne=at.width,ge=at.height,be=Ct!=="vertical",Ae=Ft[0],Xe=Ft[1],fn=Ft[2],En=Ft[3],nr=be?{x:a.minX+En,y:M.maxY-ge-fn}:{x:M.maxX-ne-Xe,y:a.minY+Ae},ar=this.getStep(),Er=this.getCnt(),Mr=be?a.width-En-Xe:a.height-Ae-fn,qr=Math.max(Mr*Object(i.clamp)(ar/Er,0,1),Hh);return Object(H.a)(Object(H.a)({},this.getThemeOptions()),{x:nr.x,y:nr.y,size:be?ge:ne,isHorizontal:be,trackLen:Mr,thumbLen:qr,thumbOffset:0})},o.prototype.getValidScrollbarCfg=function(){var e={type:"horizontal",categorySize:Xh,width:wf,height:wf,padding:[0,0,0,0],animate:!0};return Object(i.isObject)(this.option)&&(e=Object(H.a)(Object(H.a)({},e),this.option)),(!Object(i.isObject)(this.option)||!this.option.padding)&&(e.padding=e.type==="horizontal"?[Ys,0,Ys,0]:[0,Ys,0,Ys]),e},o}(ja),Jh=Kh,Qh=function(h){Object(H.b)(o,h);function o(){return h!==null&&h.apply(this,arguments)||this}return o.prototype.show=function(){var e=this.context.view,a=this.context.event,M=e.getTooltipItems({x:a.x,y:a.y});if(!Object(i.isEqual)(M,this.items)&&(this.items=M,M.length)){var N=e.getXScale().field,at=M[0].data[N],Ct=[],Ft=e.geometries;if(Object(i.each)(Ft,function(co){if(co.type==="interval"||co.type==="schema"){var go=co.getElementsBy(function(et){var z=et.getData();return z[N]===at});Ct=Ct.concat(go)}}),Ct.length){var ne=e.getCoordinate(),ge=Ct[0].shape.getCanvasBBox(),be=Ct[0].shape.getCanvasBBox(),Ae=ge;Object(i.each)(Ct,function(co){var go=co.shape.getCanvasBBox();ne.isTransposed?(go.minY<ge.minY&&(ge=go),go.maxY>be.maxY&&(be=go)):(go.minX<ge.minX&&(ge=go),go.maxX>be.maxX&&(be=go)),Ae.x=Math.min(go.minX,Ae.minX),Ae.y=Math.min(go.minY,Ae.minY),Ae.width=Math.max(go.maxX,Ae.maxX)-Ae.x,Ae.height=Math.max(go.maxY,Ae.maxY)-Ae.y});var Xe=e.backgroundGroup,fn=e.coordinateBBox,En=void 0;if(ne.isRect){var nr=e.getXScale(),ar=nr.isLinear?0:.25,Er=void 0,Mr=void 0,qr=void 0,oi=void 0;ne.isTransposed?(Er=fn.minX,Mr=Math.min(be.minY,ge.minY)-ar*be.height,qr=fn.width,oi=Ae.height+ar*2*be.height):(Er=Math.min(ge.minX,be.minX)-ar*ge.width,Mr=Math.min(fn.minY,ge.minY),qr=Ae.width+ar*2*ge.width,oi=fn.height),En=[["M",Er,Mr],["L",Er+qr,Mr],["L",Er+qr,Mr+oi],["L",Er,Mr+oi],["Z"]]}else{var ai=Object(i.head)(Ct),aa=Object(i.last)(Ct),Ji=za(ai.getModel(),ne).startAngle,_i=za(aa.getModel(),ne).endAngle,Ca=ne.getCenter(),io=ne.getRadius(),ao=ne.innerRadius*io;En=ka(Ca.x,Ca.y,io,Ji,_i,ao)}this.regionPath?(this.regionPath.attr("path",En),this.regionPath.show()):this.regionPath=Xe.addShape({type:"path",name:"active-region",capture:!1,attrs:{path:En,fill:"#CCD6EC",opacity:.3}})}}},o.prototype.hide=function(){this.regionPath&&this.regionPath.hide(),this.items=null},o.prototype.destroy=function(){this.hide(),this.regionPath&&this.regionPath.remove(!0),h.prototype.destroy.call(this)},o}(vt),Cf=Qh,ws=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.timeStamp=0,e}return o.prototype.show=function(){var e=this.context,a=e.event,M=e.view,N=M.isTooltipLocked();if(!N){var at=this.timeStamp,Ct=+new Date,Ft=Object(i.get)(e.view.getOptions(),"tooltip.showDelay",16);if(Ct-at>Ft){var ne=this.location,ge={x:a.x,y:a.y};(!ne||!Object(i.isEqual)(ne,ge))&&this.showTooltip(M,ge),this.timeStamp=Ct,this.location=ge}}},o.prototype.hide=function(){var e=this.context.view,a=e.getController("tooltip"),M=this.context.event,N=M.clientX,at=M.clientY;a.isCursorEntered({x:N,y:at})||e.isTooltipLocked()||(this.hideTooltip(e),this.location=null)},o.prototype.showTooltip=function(e,a){e.showTooltip(a)},o.prototype.hideTooltip=function(e){e.hideTooltip()},o}(vt),cs=ws,Xs=function(h){Object(H.b)(o,h);function o(){return h!==null&&h.apply(this,arguments)||this}return o.prototype.showTooltip=function(e,a){var M=rn(e);Object(i.each)(M,function(N){var at=_e(e,N,a);N.showTooltip(at)})},o.prototype.hideTooltip=function(e){var a=rn(e);Object(i.each)(a,function(M){M.hideTooltip()})},o}(cs),$o=Xs,au=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.timeStamp=0,e}return o.prototype.destroy=function(){h.prototype.destroy.call(this),this.tooltip&&this.tooltip.destroy()},o.prototype.show=function(){var e=this.context,a=e.event,M=this.timeStamp,N=+new Date;if(N-M>16){var at=this.location,Ct={x:a.x,y:a.y};(!at||!Object(i.isEqual)(at,Ct))&&this.showTooltip(Ct),this.timeStamp=N,this.location=Ct}},o.prototype.hide=function(){this.hideTooltip(),this.location=null},o.prototype.showTooltip=function(e){var a=this.context,M=a.event,N=M.target;if(N&&N.get("tip")){this.tooltip||this.renderTooltip();var at=N.get("tip");this.tooltip.update(Object(H.a)({title:at},e)),this.tooltip.show()}},o.prototype.hideTooltip=function(){this.tooltip&&this.tooltip.hide()},o.prototype.renderTooltip=function(){var e,a=this.context.view,M=a.canvas,N={start:{x:0,y:0},end:{x:M.get("width"),y:M.get("height")}},at=a.getTheme(),Ct=Object(i.get)(at,["components","tooltip","domStyles"],{}),Ft=new xa({parent:M.get("el").parentNode,region:N,visible:!1,crosshairs:null,domStyles:Object(H.a)({},Object(i.deepMix)({},Ct,(e={},e[pi.TOOLTIP_CSS_CONST.CONTAINER_CLASS]={"max-width":"50%"},e[pi.TOOLTIP_CSS_CONST.TITLE_CLASS]={"word-break":"break-all"},e)))});Ft.init(),Ft.setCapture(!1),this.tooltip=Ft},o}(vt),ec=au,wu=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.stateName="",e}return o.prototype.hasState=function(e){return e.hasState(this.stateName)},o.prototype.setElementState=function(e,a){e.setState(this.stateName,a)},o.prototype.setState=function(){this.setStateEnable(!0)},o.prototype.clear=function(){var e=this.context.view;this.clearViewState(e)},o.prototype.clearViewState=function(e){var a=this,M=Re(e,this.stateName);Object(i.each)(M,function(N){a.setElementState(N,!1)})},o}(vt),Pc=wu;function Hs(h){return Object(i.get)(h.get("delegateObject"),"item")}var Zh=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.ignoreListItemStates=["unchecked"],e}return o.prototype.isItemIgnore=function(e,a){var M=this.ignoreListItemStates,N=M.filter(function(at){return a.hasState(e,at)});return!!N.length},o.prototype.setStateByComponent=function(e,a,M){var N=this.context.view,at=e.get("field"),Ct=ke(N);this.setElementsStateByItem(Ct,at,a,M)},o.prototype.setStateByElement=function(e,a){this.setElementState(e,a)},o.prototype.isMathItem=function(e,a,M){var N=this.context.view,at=Sn(N,a),Ct=hn(e,a);return!Object(i.isNil)(Ct)&&M.name===at.getText(Ct)},o.prototype.setElementsStateByItem=function(e,a,M,N){var at=this;Object(i.each)(e,function(Ct){at.isMathItem(Ct,a,M)&&Ct.setState(at.stateName,N)})},o.prototype.setStateEnable=function(e){var a=ye(this.context);if(a)de(this.context)&&this.setStateByElement(a,e);else{var M=Zt(this.context);if(he(M)){var N=M.item,at=M.component;if(N&&at&&!this.isItemIgnore(N,at)){var Ct=this.context.event.gEvent;if(Ct&&Ct.fromShape&&Ct.toShape&&Hs(Ct.fromShape)===Hs(Ct.toShape))return;this.setStateByComponent(at,N,e)}}}},o.prototype.toggle=function(){var e=ye(this.context);if(e){var a=e.hasState(this.stateName);this.setElementState(e,!a)}},o.prototype.reset=function(){this.setStateEnable(!1)},o}(Pc),Cu=Zh,$h=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.stateName="active",e}return o.prototype.active=function(){this.setState()},o}(Cu),qh=$h,td=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.cache={},e}return o.prototype.getColorScale=function(e,a){var M=a.geometry.getAttribute("color");if(!M)return null;var N=e.getScaleByField(M.getFields()[0]);return N},o.prototype.getLinkPath=function(e,a){var M=this.context.view,N=M.getCoordinate().isTransposed,at=e.shape.getCanvasBBox(),Ct=a.shape.getCanvasBBox(),Ft=N?[["M",at.minX,at.minY],["L",Ct.minX,Ct.maxY],["L",Ct.maxX,Ct.maxY],["L",at.maxX,at.minY],["Z"]]:[["M",at.maxX,at.minY],["L",Ct.minX,Ct.minY],["L",Ct.minX,Ct.maxY],["L",at.maxX,at.maxY],["Z"]];return Ft},o.prototype.addLinkShape=function(e,a,M){e.addShape({type:"path",attrs:{opacity:.4,fill:a.shape.attr("fill"),path:this.getLinkPath(a,M)}})},o.prototype.linkByElement=function(e){var a=this,M=this.context.view,N=this.getColorScale(M,e);if(!!N){var at=hn(e,N.field);if(!this.cache[at]){var Ct=nn(M,N.field,at),Ft=this.linkGroup,ne=Ft.addGroup();this.cache[at]=ne;var ge=Ct.length;Object(i.each)(Ct,function(be,Ae){if(Ae<ge-1){var Xe=Ct[Ae+1];a.addLinkShape(ne,be,Xe)}})}}},o.prototype.removeLink=function(e){var a=this.getColorScale(this.context.view,e);if(!!a){var M=hn(e,a.field);this.cache[M]&&(this.cache[M].remove(),this.cache[M]=null)}},o.prototype.link=function(){var e=this.context;this.linkGroup||(this.linkGroup=e.view.foregroundGroup.addGroup({capture:!1}));var a=ye(e);a&&this.linkByElement(a)},o.prototype.unlink=function(){var e=ye(this.context);e&&this.removeLink(e)},o.prototype.clear=function(){this.linkGroup&&this.linkGroup.clear(),this.cache={}},o.prototype.destroy=function(){h.prototype.destroy.call(this),this.linkGroup&&this.linkGroup.remove()},o}(vt),ed=td,nd=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.startPoint=null,e.endPoint=null,e.isStarted=!1,e.effectSiblings=!1,e.effectByRecord=!1,e}return o.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},o.prototype.start=function(){this.clear(),this.startPoint=this.getCurrentPoint(),this.isStarted=!0},o.prototype.getIntersectElements=function(){var e=null;if(Me(this.context))e=Ve(this.context,10);else{var a=this.startPoint,M=this.isStarted?this.getCurrentPoint():this.endPoint;if(!a||!M)return;var N={minX:Math.min(a.x,M.x),minY:Math.min(a.y,M.y),maxX:Math.max(a.x,M.x),maxY:Math.max(a.y,M.y)},at=this.context.view;e=on(at,N)}return e},o.prototype.setStateEnable=function(e){if(this.effectSiblings&&!this.effectByRecord)this.setSiblingsState(e);else{var a=ke(this.context.view),M=this.getIntersectElements();M&&M.length?this.effectByRecord?this.setSiblingsStateByRecord(M,e):this.setElementsState(M,e,a):this.clear()}},o.prototype.setSiblingsStateByRecord=function(e,a){var M=this,N=this.context.view,at=rn(N),Ct=e.map(function(ge){return ge.getModel().data}),Ft=N.getXScale().field,ne=N.getYScales()[0].field;Object(i.each)(at,function(ge){var be=ke(ge),Ae=be.filter(function(Xe){var fn=Xe.getModel().data;return dn(Ct,fn,Ft,ne)});M.setElementsState(Ae,a,be)})},o.prototype.setSiblingsState=function(e){var a=this,M=this.context.view,N=rn(M);Me(this.context)&&Object(i.each)(N,function(at){var Ct=ke(at),Ft=Ye(a.context,at,10);Ft&&Ft.length?a.setElementsState(Ft,e,Ct):a.clearViewState(at)})},o.prototype.setElementsState=function(e,a,M){var N=this;Object(i.each)(M,function(at){e.includes(at)?N.setElementState(at,a):N.setElementState(at,!1)})},o.prototype.end=function(){this.isStarted=!1,this.endPoint=this.getCurrentPoint()},o.prototype.clear=function(){var e=this,a=this.context.view;if(this.effectSiblings){var M=rn(a);Object(i.each)(M,function(N){e.clearViewState(N)})}else this.clearViewState(a)},o}(Pc),nc=nd,rc=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.stateName="active",e}return o.prototype.active=function(){this.setState()},o}(nc),rd=rc,Mf=function(h){Object(H.b)(o,h);function o(){return h!==null&&h.apply(this,arguments)||this}return o.prototype.setStateEnable=function(e){var a=ye(this.context);if(a){if(!de(this.context))return;e?(this.clear(),this.setElementState(a,!0)):this.hasState(a)&&this.setElementState(a,!1)}},o.prototype.toggle=function(){var e=ye(this.context);if(e){var a=this.hasState(e);a||this.clear(),this.setElementState(e,!a)}},o.prototype.reset=function(){this.setStateEnable(!1)},o}(Pc),Mu=Mf,id=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.stateName="active",e}return o.prototype.active=function(){this.setState()},o}(Mu),ad=id,Au="inactive",ou="active";function Fs(h){var o=ke(h);Object(i.each)(o,function(e){e.hasState(ou)&&e.setState(ou,!1),e.hasState(Au)&&e.setState(Au,!1)})}function Af(h,o,e){Object(i.each)(h,function(a){o(a)?(a.hasState(Au)&&a.setState(Au,!1),a.setState(ou,e)):(a.hasState(ou)&&a.setState(ou,!1),a.setState(Au,e))})}var Gs=S.INACTIVE,ys=S.ACTIVE,Tf=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.stateName=ys,e}return o.prototype.setElementsStateByItem=function(e,a,M,N){var at=this,Ct=function(ne){return at.isMathItem(ne,a,M)};this.setHighlightBy(e,Ct,N)},o.prototype.setElementHighlight=function(e,a){a(e)?(e.hasState(Gs)&&e.setState(Gs,!1),e.setState(ys,!0)):e.hasState(ys)||e.setState(Gs,!0)},o.prototype.setHighlightBy=function(e,a,M){var N=this;if(M)Object(i.each)(e,function(Ft){N.setElementHighlight(Ft,a)});else{var at=Re(this.context.view,ys),Ct=!0;Object(i.each)(at,function(Ft){if(!a(Ft))return Ct=!1,!1}),Ct?this.clear():Object(i.each)(e,function(Ft){a(Ft)&&(Ft.hasState(ys)&&Ft.setState(ys,!1),Ft.setState(Gs,!0))})}},o.prototype.setElementState=function(e,a){var M=this.context.view,N=ke(M);this.setHighlightBy(N,function(at){return e===at},a)},o.prototype.highlight=function(){this.setState()},o.prototype.clear=function(){var e=this.context.view;Fs(e)},o}(Cu),ic=Tf,jf=function(h){Object(H.b)(o,h);function o(){return h!==null&&h.apply(this,arguments)||this}return o.prototype.setStateByElement=function(e,a){var M=this.context.view,N=e.geometry.getAttribute("color");if(!!N){var at=M.getScaleByField(N.getFields()[0]),Ct=hn(e,at.field),Ft=ke(M),ne=Ft.filter(function(ge){return hn(ge,at.field)===Ct});this.setHighlightBy(Ft,function(ge){return ne.includes(ge)},a)}},o}(ic),If=jf,Pf=function(h){Object(H.b)(o,h);function o(){return h!==null&&h.apply(this,arguments)||this}return o.prototype.setElementHighlight=function(e,a){a(e)?(e.hasState(Gs)&&e.setState(Gs,!1),e.setState(ys,!0)):(e.setState(Gs,!0),e.hasState(ys)&&e.setState(ys,!1))},o.prototype.setStateByElement=function(e,a){var M=this.context.view,N=M.getXScale(),at=hn(e,N.field),Ct=ke(M),Ft=Ct.filter(function(ne){return hn(ne,N.field)===at});this.setHighlightBy(Ct,function(ne){return Ft.includes(ne)},a)},o.prototype.toggle=function(){var e=ye(this.context);if(e){var a=e.hasState(this.stateName);this.setStateByElement(e,!a)}},o}(ic),Df=Pf,Tu=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.stateName="active",e}return o.prototype.clearViewState=function(e){Fs(e)},o.prototype.highlight=function(){this.setState()},o.prototype.setElementsState=function(e,a,M){Af(M,function(N){return e.indexOf(N)>=0},a)},o}(nc),Dc=Tu,Rf=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.stateName="active",e}return o.prototype.highlight=function(){this.setState()},o.prototype.setElementState=function(e,a){var M=this.context.view,N=ke(M);Af(N,function(at){return e===at},a)},o.prototype.clear=function(){var e=this.context.view;Fs(e)},o}(Mu),kf=Rf,od=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.stateName="selected",e}return o.prototype.selected=function(){this.setState()},o}(nc),sd=od,ud=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.stateName="selected",e}return o.prototype.selected=function(){this.setState()},o}(Cu),cd=ud,ld=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.stateName="selected",e}return o.prototype.selected=function(){this.setState()},o}(Mu),ac=ld,Ks=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.stateName="",e.ignoreItemStates=[],e}return o.prototype.getTriggerListInfo=function(){var e=Zt(this.context),a=null;return he(e)&&(a={item:e.item,list:e.component}),a},o.prototype.getAllowComponents=function(){var e=this,a=this.context.view,M=Ie(a),N=[];return Object(i.each)(M,function(at){at.isList()&&e.allowSetStateByElement(at)&&N.push(at)}),N},o.prototype.hasState=function(e,a){return e.hasState(a,this.stateName)},o.prototype.clearAllComponentsState=function(){var e=this,a=this.getAllowComponents();Object(i.each)(a,function(M){M.clearItemsState(e.stateName)})},o.prototype.allowSetStateByElement=function(e){var a=e.get("field");if(!a)return!1;if(this.cfg&&this.cfg.componentNames){var M=e.get("name");if(this.cfg.componentNames.indexOf(M)===-1)return!1}var N=this.context.view,at=Sn(N,a);return at&&at.isCategory},o.prototype.allowSetStateByItem=function(e,a){var M=this.ignoreItemStates;if(M.length){var N=M.filter(function(at){return a.hasState(e,at)});return N.length===0}return!0},o.prototype.setStateByElement=function(e,a,M){var N=e.get("field"),at=this.context.view,Ct=Sn(at,N),Ft=hn(a,N),ne=Ct.getText(Ft);this.setItemsState(e,ne,M)},o.prototype.setStateEnable=function(e){var a=this,M=ye(this.context);if(M){var N=this.getAllowComponents();Object(i.each)(N,function(ne){a.setStateByElement(ne,M,e)})}else{var at=Zt(this.context);if(he(at)){var Ct=at.item,Ft=at.component;this.allowSetStateByElement(Ft)&&this.allowSetStateByItem(Ct,Ft)&&this.setItemState(Ft,Ct,e)}}},o.prototype.setItemsState=function(e,a,M){var N=this,at=e.getItems();Object(i.each)(at,function(Ct){Ct.name===a&&N.setItemState(e,Ct,M)})},o.prototype.setItemState=function(e,a,M){e.setItemState(a,this.stateName,M)},o.prototype.setState=function(){this.setStateEnable(!0)},o.prototype.reset=function(){this.setStateEnable(!1)},o.prototype.toggle=function(){var e=this.getTriggerListInfo();if(e&&e.item){var a=e.list,M=e.item,N=this.hasState(a,M);this.setItemState(a,M,!N)}},o.prototype.clear=function(){var e=this.getTriggerListInfo();e?e.list.clearItemsState(this.stateName):this.clearAllComponentsState()},o}(vt),Js=Ks,ju=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.stateName="active",e}return o.prototype.active=function(){this.setState()},o}(Js),Nf=ju,Rc="inactive",kc="active";function Lf(h){var o=h.getItems();Object(i.each)(o,function(e){h.hasState(e,kc)&&h.setItemState(e,kc,!1),h.hasState(e,Rc)&&h.setItemState(e,Rc,!1)})}var su="inactive",Us="active",Bf=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.stateName=Us,e.ignoreItemStates=["unchecked"],e}return o.prototype.setItemsState=function(e,a,M){this.setHighlightBy(e,function(N){return N.name===a},M)},o.prototype.setItemState=function(e,a,M){var N=e.getItems();this.setHighlightBy(e,function(at){return at===a},M)},o.prototype.setHighlightBy=function(e,a,M){var N=e.getItems();if(M)Object(i.each)(N,function(Ft){a(Ft)?(e.hasState(Ft,su)&&e.setItemState(Ft,su,!1),e.setItemState(Ft,Us,!0)):e.hasState(Ft,Us)||e.setItemState(Ft,su,!0)});else{var at=e.getItemsByState(Us),Ct=!0;Object(i.each)(at,function(Ft){if(!a(Ft))return Ct=!1,!1}),Ct?this.clear():Object(i.each)(N,function(Ft){a(Ft)&&(e.hasState(Ft,Us)&&e.setItemState(Ft,Us,!1),e.setItemState(Ft,su,!0))})}},o.prototype.highlight=function(){this.setState()},o.prototype.clear=function(){var e=this.getTriggerListInfo();if(e)Lf(e.list);else{var a=this.getAllowComponents();Object(i.each)(a,function(M){M.clearItemsState(Us),M.clearItemsState(su)})}},o}(Js),Qs=Bf,Ff=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.stateName="selected",e}return o.prototype.selected=function(){this.setState()},o}(Js),Gf=Ff,Uf=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.stateName="unchecked",e}return o.prototype.unchecked=function(){this.setState()},o}(Js),fd=Uf,zf=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.maskShape=null,e.points=[],e.starting=!1,e.moving=!1,e.preMovePoint=null,e.shapeType="path",e}return o.prototype.getCurrentPoint=function(){var e=this.context.event;return{x:e.x,y:e.y}},o.prototype.emitEvent=function(e){var a="mask:"+e,M=this.context.view,N=this.context.event;M.emit(a,{target:this.maskShape,shape:this.maskShape,points:this.points,x:N.x,y:N.y})},o.prototype.createMask=function(){var e=this.context.view,a=this.getMaskAttrs(),M=e.foregroundGroup.addShape({type:this.shapeType,name:"mask",draggable:!0,attrs:Object(H.a)({fill:"#C5D4EB",opacity:.3},a)});return M},o.prototype.getMaskPath=function(){return[]},o.prototype.show=function(){this.maskShape&&(this.maskShape.show(),this.emitEvent("show"))},o.prototype.start=function(){this.starting=!0,this.moving=!1,this.points=[this.getCurrentPoint()],this.maskShape||(this.maskShape=this.createMask(),this.maskShape.set("capture",!1)),this.updateMask(),this.emitEvent("start")},o.prototype.moveStart=function(){this.moving=!0,this.preMovePoint=this.getCurrentPoint()},o.prototype.move=function(){if(!(!this.moving||!this.maskShape)){var e=this.getCurrentPoint(),a=this.preMovePoint,M=e.x-a.x,N=e.y-a.y,at=this.points;Object(i.each)(at,function(Ct){Ct.x+=M,Ct.y+=N}),this.updateMask(),this.emitEvent("change"),this.preMovePoint=e}},o.prototype.updateMask=function(){var e=this.getMaskAttrs();this.maskShape.attr(e)},o.prototype.moveEnd=function(){this.moving=!1,this.preMovePoint=null},o.prototype.end=function(){this.starting=!1,this.emitEvent("end"),this.maskShape&&this.maskShape.set("capture",!0)},o.prototype.hide=function(){this.maskShape&&(this.maskShape.hide(),this.emitEvent("hide"))},o.prototype.resize=function(){this.starting&&this.maskShape&&(this.points.push(this.getCurrentPoint()),this.updateMask(),this.emitEvent("change"))},o.prototype.destroy=function(){this.points=[],this.maskShape&&this.maskShape.remove(),this.maskShape=null,this.preMovePoint=null,h.prototype.destroy.call(this)},o}(vt),oc=zf,_f=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.shapeType="circle",e}return o.prototype.getMaskAttrs=function(){var e=this.points,a=Object(i.last)(this.points),M=0,N=0,at=0;if(e.length){var Ct=e[0];M=fe(Ct,a)/2,N=(a.x+Ct.x)/2,at=(a.y+Ct.y)/2}return{x:N,y:at,r:M}},o}(oc),Wf=_f,Vf=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.shapeType="rect",e}return o.prototype.getRegion=function(){var e=this.points;return{start:Object(i.head)(e),end:Object(i.last)(e)}},o.prototype.getMaskAttrs=function(){var e=this.getRegion(),a=e.start,M=e.end,N=Math.min(a.x,M.x),at=Math.min(a.y,M.y),Ct=Math.abs(M.x-a.x),Ft=Math.abs(M.y-a.y);return{x:N,y:at,width:Ct,height:Ft}},o}(oc),Nc=Vf;function Lc(h){h.x=Object(i.clamp)(h.x,0,1),h.y=Object(i.clamp)(h.y,0,1)}var Iu=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.dim="x",e.inPlot=!0,e}return o.prototype.getRegion=function(){var e=null,a=null,M=this.points,N=this.dim,at=this.context.view.getCoordinate(),Ct=at.invert(Object(i.head)(M)),Ft=at.invert(Object(i.last)(M));return this.inPlot&&(Lc(Ct),Lc(Ft)),N==="x"?(e=at.convert({x:Ct.x,y:0}),a=at.convert({x:Ft.x,y:1})):(e=at.convert({x:0,y:Ct.y}),a=at.convert({x:1,y:Ft.y})),{start:e,end:a}},o}(Nc),Bc=Iu,Yf=function(h){Object(H.b)(o,h);function o(){return h!==null&&h.apply(this,arguments)||this}return o.prototype.getMaskPath=function(){var e=this.points,a=[];return e.length&&(Object(i.each)(e,function(M,N){N===0?a.push(["M",M.x,M.y]):a.push(["L",M.x,M.y])}),a.push(["L",e[0].x,e[0].y])),a},o.prototype.getMaskAttrs=function(){return{path:this.getMaskPath()}},o.prototype.addPoint=function(){this.resize()},o}(oc),Fc=Yf,hd=function(h){Object(H.b)(o,h);function o(){return h!==null&&h.apply(this,arguments)||this}return o.prototype.getMaskPath=function(){var e=this.points;return Ne(e,!0)},o}(Fc),Xf=hd,dd=function(h){Object(H.b)(o,h);function o(){return h!==null&&h.apply(this,arguments)||this}return o.prototype.setCursor=function(e){var a=this.context.view;a.getCanvas().setCursor(e)},o.prototype.default=function(){this.setCursor("default")},o.prototype.pointer=function(){this.setCursor("pointer")},o.prototype.move=function(){this.setCursor("move")},o.prototype.crosshair=function(){this.setCursor("crosshair")},o.prototype.wait=function(){this.setCursor("wait")},o.prototype.help=function(){this.setCursor("help")},o.prototype.text=function(){this.setCursor("text")},o.prototype.eResize=function(){this.setCursor("e-resize")},o.prototype.wResize=function(){this.setCursor("w-resize")},o.prototype.nResize=function(){this.setCursor("n-resize")},o.prototype.sResize=function(){this.setCursor("s-resize")},o.prototype.neResize=function(){this.setCursor("ne-resize")},o.prototype.nwResize=function(){this.setCursor("nw-resize")},o.prototype.seResize=function(){this.setCursor("se-resize")},o.prototype.swResize=function(){this.setCursor("sw-resize")},o.prototype.nsResize=function(){this.setCursor("ns-resize")},o.prototype.ewResize=function(){this.setCursor("ew-resize")},o}(vt),vd=dd,Hf=function(h){Object(H.b)(o,h);function o(){return h!==null&&h.apply(this,arguments)||this}return o.prototype.filterView=function(e,a,M){var N=this;e.getScaleByField(a)&&e.filter(a,M),e.views&&e.views.length&&Object(i.each)(e.views,function(at){N.filterView(at,a,M)})},o.prototype.filter=function(){var e=Zt(this.context);if(e){var a=this.context.view,M=e.component,N=M.get("field");if(he(e)){if(N){var at=M.getItemsByState("unchecked"),Ct=Sn(a,N),Ft=at.map(function(Ae){return Ae.name});Ft.length?this.filterView(a,N,function(Ae){var Xe=Ct.getText(Ae);return!Ft.includes(Xe)}):this.filterView(a,N,null),a.render(!0)}}else if(le(e)){var ne=M.getValue(),ge=ne[0],be=ne[1];this.filterView(a,N,function(Ae){return Ae>=ge&&Ae<=be}),a.render(!0)}}},o}(vt),Kf=Hf;function Gc(h,o,e,a){var M=Math.min(e[o],a[o]),N=Math.max(e[o],a[o]),at=h.range,Ct=at[0],Ft=at[1];if(M<Ct&&(M=Ct),N>Ft&&(N=Ft),M===Ft&&N===Ft)return null;var ne=h.invert(M),ge=h.invert(N);if(h.isCategory){var be=h.values.indexOf(ne),Ae=h.values.indexOf(ge),Xe=h.values.slice(be,Ae+1);return function(fn){return Xe.includes(fn)}}else return function(fn){return fn>=ne&&fn<=ge}}var Jf=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.dims=["x","y"],e.startPoint=null,e.isStarted=!1,e}return o.prototype.hasDim=function(e){return this.dims.includes(e)},o.prototype.start=function(){var e=this.context;this.isStarted=!0,this.startPoint=e.getCurrentPoint()},o.prototype.filter=function(){var e,a;if(Me(this.context)){var M=this.context.event.target,N=M.getCanvasBBox();e={x:N.x,y:N.y},a={x:N.maxX,y:N.maxY}}else{if(!this.isStarted)return;e=this.startPoint,a=this.context.getCurrentPoint()}if(!(Math.abs(e.x-a.x)<5||Math.abs(e.x-a.y)<5)){var at=this.context.view,Ct=at.getCoordinate(),Ft=Ct.invert(a),ne=Ct.invert(e);if(this.hasDim("x")){var ge=at.getXScale(),be=Gc(ge,"x",Ft,ne);this.filterView(at,ge.field,be)}if(this.hasDim("y")){var Ae=at.getYScales()[0],be=Gc(Ae,"y",Ft,ne);this.filterView(at,Ae.field,be)}this.reRender(at)}},o.prototype.end=function(){this.isStarted=!1},o.prototype.reset=function(){var e=this.context.view;if(this.isStarted=!1,this.hasDim("x")){var a=e.getXScale();this.filterView(e,a.field,null)}if(this.hasDim("y")){var M=e.getYScales()[0];this.filterView(e,M.field,null)}this.reRender(e)},o.prototype.filterView=function(e,a,M){e.filter(a,M)},o.prototype.reRender=function(e){e.render(!0)},o}(vt),Pu=Jf,Du=function(h){Object(H.b)(o,h);function o(){return h!==null&&h.apply(this,arguments)||this}return o.prototype.filterView=function(e,a,M){var N=rn(e);Object(i.each)(N,function(at){at.filter(a,M)})},o.prototype.reRender=function(e){var a=rn(e);Object(i.each)(a,function(M){M.render(!0)})},o}(Pu),sc=Du,Qf=function(h){Object(H.b)(o,h);function o(){return h!==null&&h.apply(this,arguments)||this}return o.prototype.filter=function(){var e=Zt(this.context),a=this.context.view,M=ke(a);if(Me(this.context)){var N=Ve(this.context,10);N&&Object(i.each)(M,function(fn){N.includes(fn)?fn.show():fn.hide()})}else if(e){var at=e.component,Ct=at.get("field");if(he(e)){if(Ct){var Ft=at.getItemsByState("unchecked"),ne=Sn(a,Ct),ge=Ft.map(function(fn){return fn.name});Object(i.each)(M,function(fn){var En=hn(fn,Ct),nr=ne.getText(En);ge.indexOf(nr)>=0?fn.hide():fn.show()})}}else if(le(e)){var be=at.getValue(),Ae=be[0],Xe=be[1];Object(i.each)(M,function(fn){var En=hn(fn,Ct);En>=Ae&&En<=Xe?fn.show():fn.hide()})}}},o.prototype.clear=function(){var e=ke(this.context.view);Object(i.each)(e,function(a){a.show()})},o.prototype.reset=function(){this.clear()},o}(vt),Zf=Qf,pd=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.byRecord=!1,e}return o.prototype.filter=function(){Me(this.context)&&(this.byRecord?this.filterByRecord():this.filterByBBox())},o.prototype.filterByRecord=function(){var e=this.context.view,a=Ve(this.context,10);if(!!a){var M=e.getXScale().field,N=e.getYScales()[0].field,at=a.map(function(Ft){return Ft.getModel().data}),Ct=rn(e);Object(i.each)(Ct,function(Ft){var ne=ke(Ft);Object(i.each)(ne,function(ge){var be=ge.getModel().data;dn(at,be,M,N)?ge.show():ge.hide()})})}},o.prototype.filterByBBox=function(){var e=this,a=this.context.view,M=rn(a);Object(i.each)(M,function(N){var at=Ye(e.context,N,10),Ct=ke(N);at&&Object(i.each)(Ct,function(Ft){at.includes(Ft)?Ft.show():Ft.hide()})})},o.prototype.reset=function(){var e=rn(this.context.view);Object(i.each)(e,function(a){var M=ke(a);Object(i.each)(M,function(N){N.show()})})},o}(vt),Uc=pd,$f=10,qf=5,th=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.buttonGroup=null,e.buttonCfg={name:"button",text:"button",textStyle:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"},padding:[8,10],style:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},activeStyle:{fill:"#e6e6e6"}},e}return o.prototype.getButtonCfg=function(){return Object(i.deepMix)(this.buttonCfg,this.cfg)},o.prototype.drawButton=function(){var e=this.getButtonCfg(),a=this.context.view.foregroundGroup.addGroup({name:e.name}),M=a.addShape({type:"text",name:"button-text",attrs:Object(H.a)({text:e.text},e.textStyle)}),N=M.getBBox(),at=Di(e.padding),Ct=a.addShape({type:"rect",name:"button-rect",attrs:Object(H.a)({x:N.x-at[3],y:N.y-at[0],width:N.width+at[1]+at[3],height:N.height+at[0]+at[2]},e.style)});Ct.toBack(),a.on("mouseenter",function(){Ct.attr(e.activeStyle)}),a.on("mouseleave",function(){Ct.attr(e.style)}),this.buttonGroup=a},o.prototype.resetPosition=function(){var e=this.context.view,a=e.getCoordinate(),M=a.convert({x:1,y:1}),N=this.buttonGroup,at=N.getBBox(),Ct=Yr.a.transform(null,[["t",M.x-at.width-$f,M.y+at.height+qf]]);N.setMatrix(Ct)},o.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},o.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},o.prototype.destroy=function(){var e=this.buttonGroup;e&&e.remove(),h.prototype.destroy.call(this)},o}(vt),eh=th,nh=4,rh=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.starting=!1,e.dragStart=!1,e}return o.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint()},o.prototype.drag=function(){if(!!this.startPoint){var e=this.context.getCurrentPoint(),a=this.context.view,M=this.context.event;this.dragStart?a.emit("drag",{target:M.target,x:M.x,y:M.y}):fe(e,this.startPoint)>nh&&(a.emit("dragstart",{target:M.target,x:M.x,y:M.y}),this.dragStart=!0)}},o.prototype.end=function(){if(this.dragStart){var e=this.context.view,a=this.context.event;e.emit("dragend",{target:a.target,x:a.x,y:a.y})}this.starting=!1,this.dragStart=!1},o}(vt),zc=rh,ih=5,ah=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.starting=!1,e.isMoving=!1,e.startPoint=null,e.startMatrix=null,e}return o.prototype.start=function(){this.starting=!0,this.startPoint=this.context.getCurrentPoint(),this.startMatrix=this.context.view.middleGroup.getMatrix()},o.prototype.move=function(){if(!!this.starting){var e=this.startPoint,a=this.context.getCurrentPoint(),M=fe(e,a);if(M>ih&&!this.isMoving&&(this.isMoving=!0),this.isMoving){var N=this.context.view,at=Yr.a.transform(this.startMatrix,[["t",a.x-e.x,a.y-e.y]]);N.backgroundGroup.setMatrix(at),N.foregroundGroup.setMatrix(at),N.middleGroup.setMatrix(at)}}},o.prototype.end=function(){this.isMoving&&(this.isMoving=!1),this.startMatrix=null,this.starting=!1,this.startPoint=null},o.prototype.reset=function(){this.starting=!1,this.startPoint=null,this.isMoving=!1;var e=this.context.view;e.backgroundGroup.resetMatrix(),e.foregroundGroup.resetMatrix(),e.middleGroup.resetMatrix(),this.isMoving=!1},o}(vt),oh=ah,_c="x",uc="y",sh=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.dims=[_c,uc],e.cfgFields=["dims"],e.cacheScaleDefs={},e}return o.prototype.hasDim=function(e){return this.dims.includes(e)},o.prototype.getScale=function(e){var a=this.context.view;return e==="x"?a.getXScale():a.getYScales()[0]},o.prototype.resetDim=function(e){var a=this.context.view;if(this.hasDim(e)&&this.cacheScaleDefs[e]){var M=this.getScale(e);a.scale(M.field,this.cacheScaleDefs[e]),this.cacheScaleDefs[e]=null}},o.prototype.reset=function(){this.resetDim(_c),this.resetDim(uc);var e=this.context.view;e.render(!0)},o}(vt),Wc=sh,uh=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.startPoint=null,e.starting=!1,e.startCache={},e}return o.prototype.start=function(){var e=this;this.startPoint=this.context.getCurrentPoint(),this.starting=!0;var a=this.dims;Object(i.each)(a,function(M){var N=e.getScale(M),at=N.min,Ct=N.max,Ft=N.values;e.startCache[M]={min:at,max:Ct,values:Ft}})},o.prototype.end=function(){this.startPoint=null,this.starting=!1,this.startCache={}},o.prototype.translate=function(){var e=this;if(!!this.starting){var a=this.startPoint,M=this.context.view.getCoordinate(),N=this.context.getCurrentPoint(),at=M.invert(a),Ct=M.invert(N),Ft=Ct.x-at.x,ne=Ct.y-at.y,ge=this.context.view,be=this.dims;Object(i.each)(be,function(Ae){e.translateDim(Ae,{x:Ft*-1,y:ne*-1})}),ge.render(!0)}},o.prototype.translateDim=function(e,a){if(this.hasDim(e)){var M=this.getScale(e);M.isLinear&&this.translateLinear(e,M,a)}},o.prototype.translateLinear=function(e,a,M){var N=this.context.view,at=this.startCache[e],Ct=at.min,Ft=at.max,ne=Ft-Ct,ge=M[e]*ne;this.cacheScaleDefs[e]||(this.cacheScaleDefs[e]={nice:a.nice,min:Ct,max:Ft}),N.scale(a.field,{nice:!1,min:Ct+ge,max:Ft+ge})},o.prototype.reset=function(){h.prototype.reset.call(this),this.startPoint=null,this.starting=!1},o}(Wc),ch=uh,lh=function(h){Object(H.b)(o,h);function o(){var e=h!==null&&h.apply(this,arguments)||this;return e.zoomRatio=.05,e}return o.prototype.zoomIn=function(){this.zoom(this.zoomRatio)},o.prototype.zoom=function(e){var a=this,M=this.dims;Object(i.each)(M,function(N){a.zoomDim(N,e)}),this.context.view.render(!0)},o.prototype.zoomOut=function(){this.zoom(-1*this.zoomRatio)},o.prototype.zoomDim=function(e,a){if(this.hasDim(e)){var M=this.getScale(e);M.isLinear&&this.zoomLinear(e,M,a)}},o.prototype.zoomLinear=function(e,a,M){var N=this.context.view;this.cacheScaleDefs[e]||(this.cacheScaleDefs[e]={nice:a.nice,min:a.min,max:a.max});var at=this.cacheScaleDefs[e],Ct=at.max-at.min,Ft=a.min,ne=a.max,ge=M*Ct,be=Ft-ge,Ae=ne+ge,Xe=Ae-be,fn=Xe/Ct;Ae>be&&fn<100&&fn>.01&&N.scale(a.field,{nice:!1,min:Ft-ge,max:ne+ge})},o}(Wc),gd=lh;vr("dark",De(Ka)),A("canvas",Ja),A("svg",ya),Ea("Polygon",bl),Ea("Interval",eu),Ea("Schema",bc),Ea("Path",_s),Ea("Point",gl),Ea("Line",mc),Ea("Area",nl),Ea("Edge",al),Ea("Heatmap",sl),Rn("base",Ge),Rn("interval",Ah),Rn("pie",jh),Rn("polar",wc),wo("overlap",es),wo("distribute",Ph),wo("fixed-overlap",mu),wo("hide-overlap",Yu),wo("limit-in-shape",Nh),wo("limit-in-canvas",us),wo("limit-in-plot",tf),wo("pie-outer",Ll),wo("adjust-color",_l),wo("interval-adjust-position",Xu),wo("interval-hide-overlap",Hl),wo("point-adjust-position",Hu),wo("pie-spider",kh),wo("path-adjust-position",Zl),va("fade-in",ef),va("fade-out",nf),va("grow-in-x",af),va("grow-in-xy",sf),va("grow-in-y",of),va("scale-in-x",cf),va("scale-in-y",Es),va("wave-in",ks),va("zoom-in",Qu),va("zoom-out",ps),va("position-update",Ju),va("sector-path-update",xu),va("path-in",uf),G("rect",ff),G("mirror",Gh),G("list",lf),G("matrix",Bh),G("circle",ms),G("tree",zh),er("axis",mf),er("legend",Ef),er("tooltip",wa),er("annotation",vf),er("slider",Sf),er("scrollbar",Jh),we("tooltip",cs),we("sibling-tooltip",$o),we("ellipsis-text",ec),we("element-active",qh),we("element-single-active",ad),we("element-range-active",rd),we("element-highlight",ic),we("element-highlight-by-x",Df),we("element-highlight-by-color",If),we("element-single-highlight",kf),we("element-range-highlight",Dc),we("element-sibling-highlight",Dc,{effectSiblings:!0,effectByRecord:!0}),we("element-selected",cd),we("element-single-selected",ac),we("element-range-selected",sd),we("element-link-by-color",ed),we("active-region",Cf),we("list-active",Nf),we("list-selected",Gf),we("list-highlight",Qs),we("list-unchecked",fd),we("legend-item-highlight",Qs,{componentNames:["legend"]}),we("axis-label-highlight",Qs,{componentNames:["axis"]}),we("rect-mask",Nc),we("x-rect-mask",Bc,{dim:"x"}),we("y-rect-mask",Bc,{dim:"y"}),we("circle-mask",Wf),we("path-mask",Fc),we("smooth-path-mask",Xf),we("cursor",vd),we("data-filter",Kf),we("brush",Pu),we("brush-x",Pu,{dims:["x"]}),we("brush-y",Pu,{dims:["y"]}),we("sibling-filter",sc),we("sibling-x-filter",sc),we("sibling-y-filter",sc),we("element-filter",Zf),we("element-sibling-filter",Uc),we("element-sibling-filter-record",Uc,{byRecord:!0}),we("view-drag",zc),we("view-move",oh),we("scale-translate",ch),we("scale-zoom",gd),we("reset-button",eh,{name:"reset-button",text:"reset"});function ls(h){return h.isInPlot()}Aa("tooltip",{start:[{trigger:"plot:mousemove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"plot:touchmove",action:"tooltip:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseleave",action:"tooltip:hide"},{trigger:"plot:leave",action:"tooltip:hide"},{trigger:"plot:touchend",action:"tooltip:hide"}]}),Aa("ellipsis-text",{start:[{trigger:"legend-item-name:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"legend-item-name:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:mousemove",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}},{trigger:"axis-label:touchstart",action:"ellipsis-text:show",throttle:{wait:50,leading:!0,trailing:!1}}],end:[{trigger:"legend-item-name:mouseleave",action:"ellipsis-text:hide"},{trigger:"legend-item-name:touchend",action:"ellipsis-text:hide"},{trigger:"axis-label:mouseleave",action:"ellipsis-text:hide"},{trigger:"axis-label:touchend",action:"ellipsis-text:hide"}]}),Aa("element-active",{start:[{trigger:"element:mouseenter",action:"element-active:active"}],end:[{trigger:"element:mouseleave",action:"element-active:reset"}]}),Aa("element-selected",{start:[{trigger:"element:click",action:"element-selected:toggle"}]}),Aa("element-highlight",{start:[{trigger:"element:mouseenter",action:"element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight:reset"}]}),Aa("element-highlight-by-x",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-x:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-x:reset"}]}),Aa("element-highlight-by-color",{start:[{trigger:"element:mouseenter",action:"element-highlight-by-color:highlight"}],end:[{trigger:"element:mouseleave",action:"element-highlight-by-color:reset"}]}),Aa("legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","element-active:reset"]}]}),Aa("legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","element-highlight:reset"]}]}),Aa("axis-label-highlight",{start:[{trigger:"axis-label:mouseenter",action:["axis-label-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"axis-label:mouseleave",action:["axis-label-highlight:reset","element-highlight:reset"]}]}),Aa("element-list-highlight",{start:[{trigger:"element:mouseenter",action:["list-highlight:highlight","element-highlight:highlight"]}],end:[{trigger:"element:mouseleave",action:["list-highlight:reset","element-highlight:reset"]}]}),Aa("element-range-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"mask:mouseenter",action:"cursor:move"},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:function(o){return!o.isInShape("mask")},action:["rect-mask:start","rect-mask:show"]},{trigger:"mask:dragstart",action:["rect-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:drag",action:["rect-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end"]},{trigger:"mask:dragend",action:["rect-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(o){return!o.isInPlot()},action:["element-range-highlight:clear","rect-mask:end","rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear","rect-mask:hide"]}]}),Aa("brush",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:ls,action:["brush:start","rect-mask:start","rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:ls,action:["rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:ls,action:["brush:filter","brush:end","rect-mask:end","rect-mask:hide","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["brush:reset","reset-button:hide","cursor:crosshair"]}]}),Aa("brush-visible",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"plot:mousedown",action:["rect-mask:start","rect-mask:show"]}],processing:[{trigger:"plot:mousemove",action:["rect-mask:resize"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:["rect-mask:end","rect-mask:hide","element-filter:filter","element-range-highlight:clear"]}],rollback:[{trigger:"dblclick",action:["element-filter:clear"]}]}),Aa("brush-x",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:ls,action:["brush-x:start","x-rect-mask:start","x-rect-mask:show"]}],processing:[{trigger:"mousemove",isEnable:ls,action:["x-rect-mask:resize"]}],end:[{trigger:"mouseup",isEnable:ls,action:["brush-x:filter","brush-x:end","x-rect-mask:end","x-rect-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]}),Aa("element-path-highlight",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:ls,action:"path-mask:start"},{trigger:"mousedown",isEnable:ls,action:"path-mask:show"}],processing:[{trigger:"mousemove",action:"path-mask:addPoint"}],end:[{trigger:"mouseup",action:"path-mask:end"}],rollback:[{trigger:"dblclick",action:"path-mask:hide"}]}),Aa("element-single-selected",{start:[{trigger:"element:click",action:"element-single-selected:toggle"}]}),Aa("legend-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","data-filter:filter"]}]}),Aa("continuous-filter",{start:[{trigger:"legend:valuechanged",action:"data-filter:filter"}]}),Aa("continuous-visible-filter",{start:[{trigger:"legend:valuechanged",action:"element-filter:filter"}]}),Aa("legend-visible-filter",{showEnable:[{trigger:"legend-item:mouseenter",action:"cursor:pointer"},{trigger:"legend-item:mouseleave",action:"cursor:default"}],start:[{trigger:"legend-item:click",action:["list-unchecked:toggle","element-filter:filter"]}]}),Aa("active-region",{start:[{trigger:"plot:mousemove",action:"active-region:show"}],end:[{trigger:"plot:mouseleave",action:"active-region:hide"}]});function Zs(h){return h.gEvent.preventDefault(),h.gEvent.originalEvent.deltaY>0}Aa("view-zoom",{start:[{trigger:"plot:mousewheel",isEnable:function(o){return Zs(o.event)},action:"scale-zoom:zoomOut",throttle:{wait:100,leading:!0,trailing:!1}},{trigger:"plot:mousewheel",isEnable:function(o){return!Zs(o.event)},action:"scale-zoom:zoomIn",throttle:{wait:100,leading:!0,trailing:!1}}]}),Aa("sibling-tooltip",{start:[{trigger:"plot:mousemove",action:"sibling-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"sibling-tooltip:hide"}]})},IvmH:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return H}),w.d(Pt,"b",function(){return i});var H={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},i={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},y=["click","mousedown","mouseup","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","wheel"]},JHRd:function(qe,Pt,w){var H=w("Kz5y"),i=H.Uint8Array;qe.exports=i},JHgL:function(qe,Pt,w){var H=w("QkVE");function i(y){return H(this,y).get(y)}qe.exports=i},JSQU:function(qe,Pt,w){var H=w("YESw"),i="__lodash_hash_undefined__";function y(t,n){var u=this.__data__;return this.size+=this.has(t)?0:1,u[t]=H&&n===void 0?i:n,this}qe.exports=y},JTzB:function(qe,Pt,w){var H=w("NykK"),i=w("ExA7"),y="[object Arguments]";function t(n){return i(n)&&H(n)==y}qe.exports=t},KCY9:function(qe,Pt,w){},KMYG:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return n});var H=w("mrSG"),i=w("5HRO"),y=w("YuPD"),t=w("WOQw");function n(u){var p=u.options,b=p.polygon,c=p.xField,S=p.yField,I=p.seriesField,m=p.tooltip,r=Object(i.a)(m,[c,S,I]),s=r.fields,d=r.formatter;return b?Object(t.a)(Object(y.b)({},u,{options:{type:"polygon",colorField:I,tooltipFields:s,mapping:Object(H.a)({tooltip:d},b)}})):u}},KMkd:function(qe,Pt){function w(){this.__data__=[],this.size=0}qe.exports=w},KPFz:function(qe,Pt,w){},KavR:function(qe,Pt,w){"use strict";var H=w("AA7f"),i=w("iTfj"),y=w("0Xep"),t=w("Qci9");function n(p,b){return(b-p)*Math.random()+p}var u=function(p){Object(H.b)(b,p);function b(){return p!==null&&p.apply(this,arguments)||this}return b.prototype.process=function(c){var S=i.clone(c),I=i.flatten(S);return this.adjustData(S,I),S},b.prototype.adjustDim=function(c,S,I){var m=this,r=this.groupData(I,c);return i.each(r,function(s,d){return m.adjustGroup(s,c,parseFloat(d),S)})},b.prototype.getAdjustOffset=function(c){var S=c.pre,I=c.next,m=(I-S)*y.c;return n(S+m,I-m)},b.prototype.adjustGroup=function(c,S,I,m){var r=this,s=this.getAdjustRange(S,I,m);return i.each(c,function(d){d[S]=r.getAdjustOffset(s)}),c},b}(t.a);Pt.a=u},KxBF:function(qe,Pt){function w(H,i,y){var t=-1,n=H.length;i<0&&(i=-i>n?0:n+i),y=y>n?n:y,y<0&&(y+=n),n=i>y?0:y-i>>>0,i>>>=0;for(var u=Array(n);++t<n;)u[t]=H[t+i];return u}qe.exports=w},L16w:function(qe,Pt,w){"use strict";Pt.a={fontFamily:`
  "-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",
  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
  SimSun, "sans-serif"`,textColor:"#2C3542",activeTextColor:"#333333",uncheckedColor:"#D8D8D8",lineColor:"#416180",regionColor:"#CCD7EB",verticalAxisRotate:-Math.PI/4,horizontalAxisRotate:Math.PI/4}},L8xA:function(qe,Pt){function w(H){var i=this.__data__,y=i.delete(H);return this.size=i.size,y}qe.exports=w},LXxW:function(qe,Pt){function w(H,i){for(var y=-1,t=H==null?0:H.length,n=0,u=[];++y<t;){var p=H[y];i(p,y,H)&&(u[n++]=p)}return u}qe.exports=w},LmB6:function(qe,Pt,w){"use strict";var H=w("mrSG"),i=w("f6Jy"),y=w("sstZ"),t=function(n){Object(H.b)(u,n);function u(p){var b=n.call(this)||this;b.destroyed=!1;var c=b.getDefaultCfg();return b.cfg=Object(y.i)(c,p),b}return u.prototype.getDefaultCfg=function(){return{}},u.prototype.get=function(p){return this.cfg[p]},u.prototype.set=function(p,b){this.cfg[p]=b},u.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},u}(i.a);Pt.a=t},LvGN:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return u}),w.d(Pt,"c",function(){return j}),w.d(Pt,"d",function(){return X}),w.d(Pt,"e",function(){return F}),w.d(Pt,"b",function(){return zt});var H=w("iTfj"),i=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,y=/[^\s\,]+/ig;function t(Tt){var Wt=Tt||[];if(Object(H.isArray)(Wt))return Wt;if(Object(H.isString)(Wt))return Wt=Wt.match(i),Object(H.each)(Wt,function(Ht,re){if(Ht=Ht.match(y),Ht[0].length>1){var pe=Ht[0].charAt(0);Ht.splice(1,0,Ht[0].substr(1)),Ht[0]=pe}Object(H.each)(Ht,function(me,Se){isNaN(me)||(Ht[Se]=+me)}),Wt[re]=Ht}),Wt}var n=t;function u(Tt,Wt){for(var Ht=[],re=0,pe=Tt.length;pe-2*!Wt>re;re+=2){var me=[{x:+Tt[re-2],y:+Tt[re-1]},{x:+Tt[re],y:+Tt[re+1]},{x:+Tt[re+2],y:+Tt[re+3]},{x:+Tt[re+4],y:+Tt[re+5]}];Wt?re?pe-4===re?me[3]={x:+Tt[0],y:+Tt[1]}:pe-2===re&&(me[2]={x:+Tt[0],y:+Tt[1]},me[3]={x:+Tt[2],y:+Tt[3]}):me[0]={x:+Tt[pe-2],y:+Tt[pe-1]}:pe-4===re?me[3]=me[2]:re||(me[0]={x:+Tt[re],y:+Tt[re+1]}),Ht.push(["C",(-me[0].x+6*me[1].x+me[2].x)/6,(-me[0].y+6*me[1].y+me[2].y)/6,(me[1].x+6*me[2].x-me[3].x)/6,(me[1].y+6*me[2].y-me[3].y)/6,me[2].x,me[2].y])}return Ht}function p(Tt,Wt){var Ht=[],re=[];function pe(me,Se){if(me.length===1)Ht.push(me[0]),re.push(me[0]);else{for(var Le=[],Je=0;Je<me.length-1;Je++)Je===0&&Ht.push(me[0]),Je===me.length-2&&re.push(me[Je+1]),Le[Je]=[(1-Se)*me[Je][0]+Se*me[Je+1][0],(1-Se)*me[Je][1]+Se*me[Je+1][1]];pe(Le,Se)}}return Tt.length&&pe(Tt,Wt),{left:Ht,right:re.reverse()}}function b(Tt,Wt,Ht){var re=[[Tt[1],Tt[2]]];Ht=Ht||2;var pe=[];Wt[0]==="A"?(re.push(Wt[6]),re.push(Wt[7])):Wt[0]==="C"?(re.push([Wt[1],Wt[2]]),re.push([Wt[3],Wt[4]]),re.push([Wt[5],Wt[6]])):Wt[0]==="S"||Wt[0]==="Q"?(re.push([Wt[1],Wt[2]]),re.push([Wt[3],Wt[4]])):re.push([Wt[1],Wt[2]]);for(var me=re,Se=1/Ht,Le=0;Le<Ht-1;Le++){var Je=Se/(1-Se*Le),On=p(me,Je);pe.push(On.left),me=On.right}pe.push(me);var gn=pe.map(function(Wn){var kn=[];return Wn.length===4&&(kn.push("C"),kn=kn.concat(Wn[2])),Wn.length>=3&&(Wn.length===3&&kn.push("Q"),kn=kn.concat(Wn[1])),Wn.length===2&&kn.push("L"),kn=kn.concat(Wn[Wn.length-1]),kn});return gn}function c(Tt,Wt,Ht){if(Ht===1)return[[].concat(Tt)];var re=[];if(Wt[0]==="L"||Wt[0]==="C"||Wt[0]==="Q")re=re.concat(b(Tt,Wt,Ht));else{var pe=[].concat(Tt);pe[0]==="M"&&(pe[0]="L");for(var me=0;me<=Ht-1;me++)re.push(pe)}return re}function S(Tt,Wt){if(Tt.length===1)return Tt;var Ht=Tt.length-1,re=Wt.length-1,pe=Ht/re,me=[];if(Tt.length===1&&Tt[0][0]==="M"){for(var Se=0;Se<re-Ht;Se++)Tt.push(Tt[0]);return Tt}for(var Se=0;Se<re;Se++){var Le=Math.floor(pe*Se);me[Le]=(me[Le]||0)+1}var Je=me.reduce(function(On,gn,Wn){return Wn===Ht?On.concat(Tt[Ht]):On.concat(c(Tt[Wn],Tt[Wn+1],gn))},[]);return Je.unshift(Tt[0]),(Wt[re]==="Z"||Wt[re]==="z")&&Je.push("Z"),Je}function I(Tt,Wt,Ht){var re=null,pe=Ht;return Wt<pe&&(pe=Wt,re="add"),Tt<pe&&(pe=Tt,re="del"),{type:re,min:pe}}var m=function(Wt,Ht){var re=Wt.length,pe=Ht.length,me,Se,Le=0;if(re===0||pe===0)return null;for(var Je=[],On=0;On<=re;On++)Je[On]=[],Je[On][0]={min:On};for(var gn=0;gn<=pe;gn++)Je[0][gn]={min:gn};for(var On=1;On<=re;On++){me=Wt[On-1];for(var gn=1;gn<=pe;gn++){Se=Ht[gn-1],Object(H.isEqual)(me,Se)?Le=0:Le=1;var Wn=Je[On-1][gn].min+1,kn=Je[On][gn-1].min+1,Vn=Je[On-1][gn-1].min+Le;Je[On][gn]=I(Wn,kn,Vn)}}return Je};function r(Tt,Wt){var Ht=m(Tt,Wt),re=Tt.length,pe=Wt.length,me=[],Se=1,Le=1;if(Ht[re][pe]!==re){for(var Je=1;Je<=re;Je++){var On=Ht[Je][Je].min;Le=Je;for(var gn=Se;gn<=pe;gn++)Ht[Je][gn].min<On&&(On=Ht[Je][gn].min,Le=gn);Se=Le,Ht[Je][Se].type&&me.push({index:Je-1,type:Ht[Je][Se].type})}for(var Je=me.length-1;Je>=0;Je--)Se=me[Je].index,me[Je].type==="add"?Tt.splice(Se,0,[].concat(Tt[Se])):Tt.splice(Se,1)}if(re=Tt.length,re<pe)for(var Je=0;Je<pe-re;Je++)Tt[re-1][0]==="z"||Tt[re-1][0]==="Z"?Tt.splice(re-2,0,Tt[re-2]):Tt.push(Tt[re-1]);return Tt}function s(Tt){var Wt=[];switch(Tt[0]){case"M":Wt.push([Tt[1],Tt[2]]);break;case"L":Wt.push([Tt[1],Tt[2]]);break;case"A":Wt.push([Tt[6],Tt[7]]);break;case"Q":Wt.push([Tt[3],Tt[4]]),Wt.push([Tt[1],Tt[2]]);break;case"T":Wt.push([Tt[1],Tt[2]]);break;case"C":Wt.push([Tt[5],Tt[6]]),Wt.push([Tt[1],Tt[2]]),Wt.push([Tt[3],Tt[4]]);break;case"S":Wt.push([Tt[3],Tt[4]]),Wt.push([Tt[1],Tt[2]]);break;case"H":Wt.push([Tt[1],Tt[1]]);break;case"V":Wt.push([Tt[1],Tt[1]]);break;default:}return Wt}function d(Tt,Wt,Ht){for(var re=[].concat(Tt),pe,me=1/(Ht+1),Se=s(Wt)[0],Le=1;Le<=Ht;Le++)me*=Le,pe=Math.floor(Tt.length*me),pe===0?re.unshift([Se[0]*me+Tt[pe][0]*(1-me),Se[1]*me+Tt[pe][1]*(1-me)]):re.splice(pe,0,[Se[0]*me+Tt[pe][0]*(1-me),Se[1]*me+Tt[pe][1]*(1-me)]);return re}function C(Tt,Wt){if(Tt.length<=1)return Tt;for(var Ht,re=0;re<Wt.length;re++)if(Tt[re][0]!==Wt[re][0])switch(Ht=s(Tt[re]),Wt[re][0]){case"M":Tt[re]=["M"].concat(Ht[0]);break;case"L":Tt[re]=["L"].concat(Ht[0]);break;case"A":Tt[re]=[].concat(Wt[re]),Tt[re][6]=Ht[0][0],Tt[re][7]=Ht[0][1];break;case"Q":if(Ht.length<2)if(re>0)Ht=d(Ht,Tt[re-1],1);else{Tt[re]=Wt[re];break}Tt[re]=["Q"].concat(Ht.reduce(function(pe,me){return pe.concat(me)},[]));break;case"T":Tt[re]=["T"].concat(Ht[0]);break;case"C":if(Ht.length<3)if(re>0)Ht=d(Ht,Tt[re-1],2);else{Tt[re]=Wt[re];break}Tt[re]=["C"].concat(Ht.reduce(function(pe,me){return pe.concat(me)},[]));break;case"S":if(Ht.length<2)if(re>0)Ht=d(Ht,Tt[re-1],1);else{Tt[re]=Wt[re];break}Tt[re]=["S"].concat(Ht.reduce(function(pe,me){return pe.concat(me)},[]));break;default:Tt[re]=Wt[re]}return Tt}function E(Tt,Wt,Ht,re,pe){return pe?[["M",+Tt+ +pe,Wt],["l",Ht-pe*2,0],["a",pe,pe,0,0,1,pe,pe],["l",0,re-pe*2],["a",pe,pe,0,0,1,-pe,pe],["l",pe*2-Ht,0],["a",pe,pe,0,0,1,-pe,-pe],["l",0,pe*2-re],["a",pe,pe,0,0,1,pe,-pe],["z"]]:[["M",Tt,Wt],["l",Ht,0],["l",0,re],["l",-Ht,0],["z"]]}var A=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,f=new RegExp("([a-z])["+A+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+A+"]*,?["+A+"]*)+)","ig"),x=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+A+"]*,?["+A+"]*","ig");function j(Tt){if(!Tt)return null;if(Object(H.isArray)(Tt))return Tt;var Wt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},Ht=[];return String(Tt).replace(f,function(re,pe,me){var Se=[],Le=pe.toLowerCase();if(me.replace(x,function(Je,On){On&&Se.push(+On)}),Le==="m"&&Se.length>2&&(Ht.push([pe].concat(Se.splice(0,2))),Le="l",pe=pe==="m"?"l":"L"),Le==="o"&&Se.length===1&&Ht.push([pe,Se[0]]),Le==="r")Ht.push([pe].concat(Se));else for(;Se.length>=Wt[Le]&&(Ht.push([pe].concat(Se.splice(0,Wt[Le]))),!!Wt[Le]););return""}),Ht}var P=/[a-z]/;function W(Tt,Wt){return[Wt[0]+(Wt[0]-Tt[0]),Wt[1]+(Wt[1]-Tt[1])]}function X(Tt){var Wt=j(Tt);if(!Wt||!Wt.length)return[["M",0,0]];for(var Ht=!1,re=0;re<Wt.length;re++){var pe=Wt[re][0];if(P.test(pe)||["V","H","T","S"].indexOf(pe)>=0){Ht=!0;break}}if(!Ht)return Wt;var me=[],Se=0,Le=0,Je=0,On=0,gn=0,Wn,kn,Vn=Wt[0];(Vn[0]==="M"||Vn[0]==="m")&&(Se=+Vn[1],Le=+Vn[2],Je=Se,On=Le,gn++,me[0]=["M",Se,Le]);for(var re=gn,Dn=Wt.length;re<Dn;re++){var Nn=Wt[re],Qn=me[re-1],ir=[],pe=Nn[0],hr=pe.toUpperCase();if(pe!==hr)switch(ir[0]=hr,hr){case"A":ir[1]=Nn[1],ir[2]=Nn[2],ir[3]=Nn[3],ir[4]=Nn[4],ir[5]=Nn[5],ir[6]=+Nn[6]+Se,ir[7]=+Nn[7]+Le;break;case"V":ir[1]=+Nn[1]+Le;break;case"H":ir[1]=+Nn[1]+Se;break;case"M":Je=+Nn[1]+Se,On=+Nn[2]+Le;break;default:for(var Sr=1,mr=Nn.length;Sr<mr;Sr++)ir[Sr]=+Nn[Sr]+(Sr%2?Se:Le)}else ir=Wt[re];switch(hr){case"Z":Se=+Je,Le=+On;break;case"H":Se=ir[1],ir=["L",Se,Le];break;case"V":Le=ir[1],ir=["L",Se,Le];break;case"T":Se=ir[1],Le=ir[2];var dr=W([Qn[1],Qn[2]],[Qn[3],Qn[4]]);ir=["Q",dr[0],dr[1],Se,Le];break;case"S":Se=ir[ir.length-2],Le=ir[ir.length-1];var Br=Qn.length,ii=W([Qn[Br-4],Qn[Br-3]],[Qn[Br-2],Qn[Br-1]]);ir=["C",ii[0],ii[1],ir[1],ir[2],Se,Le];break;case"M":Je=ir[ir.length-2],On=ir[ir.length-1];break;default:Se=ir[ir.length-2],Le=ir[ir.length-1]}me.push(ir)}return me}var $=function Tt(Wt,Ht,re,pe,me,Se,Le,Je,On,gn){re===pe&&(re+=1);var Wn=Math.PI*120/180,kn=Math.PI/180*(+me||0),Vn=[],Dn,Nn,Qn,ir,hr,Sr=function(Ti,pi,Ni){var Bi=Ti*Math.cos(Ni)-pi*Math.sin(Ni),Fi=Ti*Math.sin(Ni)+pi*Math.cos(Ni);return{x:Bi,y:Fi}};if(gn)Nn=gn[0],Qn=gn[1],ir=gn[2],hr=gn[3];else{Dn=Sr(Wt,Ht,-kn),Wt=Dn.x,Ht=Dn.y,Dn=Sr(Je,On,-kn),Je=Dn.x,On=Dn.y,Wt===Je&&Ht===On&&(Je+=1,On+=1);var mr=(Wt-Je)/2,dr=(Ht-On)/2,Br=mr*mr/(re*re)+dr*dr/(pe*pe);Br>1&&(Br=Math.sqrt(Br),re=Br*re,pe=Br*pe);var ii=re*re,mi=pe*pe,Pi=(Se===Le?-1:1)*Math.sqrt(Math.abs((ii*mi-ii*dr*dr-mi*mr*mr)/(ii*dr*dr+mi*mr*mr)));ir=Pi*re*dr/pe+(Wt+Je)/2,hr=Pi*-pe*mr/re+(Ht+On)/2,Nn=Math.asin(Number(((Ht-hr)/pe).toFixed(9))),Qn=Math.asin(Number(((On-hr)/pe).toFixed(9))),Nn=Wt<ir?Math.PI-Nn:Nn,Qn=Je<ir?Math.PI-Qn:Qn,Nn<0&&(Nn=Math.PI*2+Nn),Qn<0&&(Qn=Math.PI*2+Qn),Le&&Nn>Qn&&(Nn=Nn-Math.PI*2),!Le&&Qn>Nn&&(Qn=Qn-Math.PI*2)}var sa=Qn-Nn;if(Math.abs(sa)>Wn){var Pa=Qn,Mi=Je,Ki=On;Qn=Nn+Wn*(Le&&Qn>Nn?1:-1),Je=ir+re*Math.cos(Qn),On=hr+pe*Math.sin(Qn),Vn=Tt(Je,On,re,pe,me,0,Le,Mi,Ki,[Qn,Pa,ir,hr])}sa=Qn-Nn;var fa=Math.cos(Nn),oa=Math.sin(Nn),pa=Math.cos(Qn),La=Math.sin(Qn),Yr=Math.tan(sa/4),Sa=4/3*re*Yr,Pr=4/3*pe*Yr,si=[Wt,Ht],ti=[Wt+Sa*oa,Ht-Pr*fa],$r=[Je+Sa*La,On-Pr*pa],ui=[Je,On];if(ti[0]=2*si[0]-ti[0],ti[1]=2*si[1]-ti[1],gn)return[ti,$r,ui].concat(Vn);Vn=[ti,$r,ui].concat(Vn).join().split(",");for(var li=[],xi=0,Ci=Vn.length;xi<Ci;xi++)li[xi]=xi%2?Sr(Vn[xi-1],Vn[xi],kn).y:Sr(Vn[xi],Vn[xi+1],kn).x;return li},ft=function(Wt,Ht,re,pe){return[Wt,Ht,re,pe,re,pe]},Z=function(Wt,Ht,re,pe,me,Se){var Le=1/3,Je=2/3;return[Le*Wt+Je*re,Le*Ht+Je*pe,Le*me+Je*re,Le*Se+Je*pe,me,Se]};function lt(Tt,Wt){var Ht=X(Tt),re=Wt&&X(Wt),pe={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},me={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Se=[],Le=[],Je="",On="",gn,Wn=function(mr,dr,Br){var ii,mi;if(!mr)return["C",dr.x,dr.y,dr.x,dr.y,dr.x,dr.y];switch(!(mr[0]in{T:1,Q:1})&&(dr.qx=dr.qy=null),mr[0]){case"M":dr.X=mr[1],dr.Y=mr[2];break;case"A":mr=["C"].concat($.apply(0,[dr.x,dr.y].concat(mr.slice(1))));break;case"S":Br==="C"||Br==="S"?(ii=dr.x*2-dr.bx,mi=dr.y*2-dr.by):(ii=dr.x,mi=dr.y),mr=["C",ii,mi].concat(mr.slice(1));break;case"T":Br==="Q"||Br==="T"?(dr.qx=dr.x*2-dr.qx,dr.qy=dr.y*2-dr.qy):(dr.qx=dr.x,dr.qy=dr.y),mr=["C"].concat(Z(dr.x,dr.y,dr.qx,dr.qy,mr[1],mr[2]));break;case"Q":dr.qx=mr[1],dr.qy=mr[2],mr=["C"].concat(Z(dr.x,dr.y,mr[1],mr[2],mr[3],mr[4]));break;case"L":mr=["C"].concat(ft(dr.x,dr.y,mr[1],mr[2]));break;case"H":mr=["C"].concat(ft(dr.x,dr.y,mr[1],dr.y));break;case"V":mr=["C"].concat(ft(dr.x,dr.y,dr.x,mr[1]));break;case"Z":mr=["C"].concat(ft(dr.x,dr.y,dr.X,dr.Y));break;default:break}return mr},kn=function(mr,dr){if(mr[dr].length>7){mr[dr].shift();for(var Br=mr[dr];Br.length;)Se[dr]="A",re&&(Le[dr]="A"),mr.splice(dr++,0,["C"].concat(Br.splice(0,6)));mr.splice(dr,1),gn=Math.max(Ht.length,re&&re.length||0)}},Vn=function(mr,dr,Br,ii,mi){mr&&dr&&mr[mi][0]==="M"&&dr[mi][0]!=="M"&&(dr.splice(mi,0,["M",ii.x,ii.y]),Br.bx=0,Br.by=0,Br.x=mr[mi][1],Br.y=mr[mi][2],gn=Math.max(Ht.length,re&&re.length||0))};gn=Math.max(Ht.length,re&&re.length||0);for(var Dn=0;Dn<gn;Dn++){Ht[Dn]&&(Je=Ht[Dn][0]),Je!=="C"&&(Se[Dn]=Je,Dn&&(On=Se[Dn-1])),Ht[Dn]=Wn(Ht[Dn],pe,On),Se[Dn]!=="A"&&Je==="C"&&(Se[Dn]="C"),kn(Ht,Dn),re&&(re[Dn]&&(Je=re[Dn][0]),Je!=="C"&&(Le[Dn]=Je,Dn&&(On=Le[Dn-1])),re[Dn]=Wn(re[Dn],me,On),Le[Dn]!=="A"&&Je==="C"&&(Le[Dn]="C"),kn(re,Dn)),Vn(Ht,re,pe,me,Dn),Vn(re,Ht,me,pe,Dn);var Nn=Ht[Dn],Qn=re&&re[Dn],ir=Nn.length,hr=re&&Qn.length;pe.x=Nn[ir-2],pe.y=Nn[ir-1],pe.bx=parseFloat(Nn[ir-4])||pe.x,pe.by=parseFloat(Nn[ir-3])||pe.y,me.bx=re&&(parseFloat(Qn[hr-4])||me.x),me.by=re&&(parseFloat(Qn[hr-3])||me.y),me.x=re&&Qn[hr-2],me.y=re&&Qn[hr-1]}return re?[Ht,re]:Ht}var pt=function(Wt,Ht,re,pe,me){var Se=-3*Ht+9*re-9*pe+3*me,Le=Wt*Se+6*Ht-12*re+6*pe;return Wt*Le-3*Ht+3*re},gt=function(Wt,Ht,re,pe,me,Se,Le,Je,On){On===null&&(On=1),On=On>1?1:On<0?0:On;for(var gn=On/2,Wn=12,kn=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Vn=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Dn=0,Nn=0;Nn<Wn;Nn++){var Qn=gn*kn[Nn]+gn,ir=pt(Qn,Wt,re,me,Le),hr=pt(Qn,Ht,pe,Se,Je),Sr=ir*ir+hr*hr;Dn+=Vn[Nn]*Math.sqrt(Sr)}return gn*Dn},ut=function(Wt,Ht,re,pe,me,Se,Le,Je){for(var On=[],gn=[[],[]],Wn,kn,Vn,Dn,Nn=0;Nn<2;++Nn){if(Nn===0?(kn=6*Wt-12*re+6*me,Wn=-3*Wt+9*re-9*me+3*Le,Vn=3*re-3*Wt):(kn=6*Ht-12*pe+6*Se,Wn=-3*Ht+9*pe-9*Se+3*Je,Vn=3*pe-3*Ht),Math.abs(Wn)<1e-12){if(Math.abs(kn)<1e-12)continue;Dn=-Vn/kn,Dn>0&&Dn<1&&On.push(Dn);continue}var Qn=kn*kn-4*Vn*Wn,ir=Math.sqrt(Qn);if(!(Qn<0)){var hr=(-kn+ir)/(2*Wn);hr>0&&hr<1&&On.push(hr);var Sr=(-kn-ir)/(2*Wn);Sr>0&&Sr<1&&On.push(Sr)}}for(var mr=On.length,dr=mr,Br;mr--;)Dn=On[mr],Br=1-Dn,gn[0][mr]=Br*Br*Br*Wt+3*Br*Br*Dn*re+3*Br*Dn*Dn*me+Dn*Dn*Dn*Le,gn[1][mr]=Br*Br*Br*Ht+3*Br*Br*Dn*pe+3*Br*Dn*Dn*Se+Dn*Dn*Dn*Je;return gn[0][dr]=Wt,gn[1][dr]=Ht,gn[0][dr+1]=Le,gn[1][dr+1]=Je,gn[0].length=gn[1].length=dr+2,{min:{x:Math.min.apply(0,gn[0]),y:Math.min.apply(0,gn[1])},max:{x:Math.max.apply(0,gn[0]),y:Math.max.apply(0,gn[1])}}},Bt=function(Wt,Ht,re,pe,me,Se,Le,Je){if(!(Math.max(Wt,re)<Math.min(me,Le)||Math.min(Wt,re)>Math.max(me,Le)||Math.max(Ht,pe)<Math.min(Se,Je)||Math.min(Ht,pe)>Math.max(Se,Je))){var On=(Wt*pe-Ht*re)*(me-Le)-(Wt-re)*(me*Je-Se*Le),gn=(Wt*pe-Ht*re)*(Se-Je)-(Ht-pe)*(me*Je-Se*Le),Wn=(Wt-re)*(Se-Je)-(Ht-pe)*(me-Le);if(!!Wn){var kn=On/Wn,Vn=gn/Wn,Dn=+kn.toFixed(2),Nn=+Vn.toFixed(2);if(!(Dn<+Math.min(Wt,re).toFixed(2)||Dn>+Math.max(Wt,re).toFixed(2)||Dn<+Math.min(me,Le).toFixed(2)||Dn>+Math.max(me,Le).toFixed(2)||Nn<+Math.min(Ht,pe).toFixed(2)||Nn>+Math.max(Ht,pe).toFixed(2)||Nn<+Math.min(Se,Je).toFixed(2)||Nn>+Math.max(Se,Je).toFixed(2)))return{x:kn,y:Vn}}}},Lt=function(Wt,Ht,re){return Ht>=Wt.x&&Ht<=Wt.x+Wt.width&&re>=Wt.y&&re<=Wt.y+Wt.height},St=function(Wt,Ht,re,pe){return Wt===null&&(Wt=Ht=re=pe=0),Ht===null&&(Ht=Wt.y,re=Wt.width,pe=Wt.height,Wt=Wt.x),{x:Wt,y:Ht,width:re,w:re,height:pe,h:pe,x2:Wt+re,y2:Ht+pe,cx:Wt+re/2,cy:Ht+pe/2,r1:Math.min(re,pe)/2,r2:Math.max(re,pe)/2,r0:Math.sqrt(re*re+pe*pe)/2,path:E(Wt,Ht,re,pe),vb:[Wt,Ht,re,pe].join(" ")}},K=function(Wt,Ht){return Wt=St(Wt),Ht=St(Ht),Lt(Ht,Wt.x,Wt.y)||Lt(Ht,Wt.x2,Wt.y)||Lt(Ht,Wt.x,Wt.y2)||Lt(Ht,Wt.x2,Wt.y2)||Lt(Wt,Ht.x,Ht.y)||Lt(Wt,Ht.x2,Ht.y)||Lt(Wt,Ht.x,Ht.y2)||Lt(Wt,Ht.x2,Ht.y2)||(Wt.x<Ht.x2&&Wt.x>Ht.x||Ht.x<Wt.x2&&Ht.x>Wt.x)&&(Wt.y<Ht.y2&&Wt.y>Ht.y||Ht.y<Wt.y2&&Ht.y>Wt.y)},dt=function(Wt,Ht,re,pe,me,Se,Le,Je){Object(H.isArray)(Wt)||(Wt=[Wt,Ht,re,pe,me,Se,Le,Je]);var On=ut.apply(null,Wt);return St(On.min.x,On.min.y,On.max.x-On.min.x,On.max.y-On.min.y)},mt=function(Wt,Ht,re,pe,me,Se,Le,Je,On){var gn=1-On,Wn=Math.pow(gn,3),kn=Math.pow(gn,2),Vn=On*On,Dn=Vn*On,Nn=Wn*Wt+kn*3*On*re+gn*3*On*On*me+Dn*Le,Qn=Wn*Ht+kn*3*On*pe+gn*3*On*On*Se+Dn*Je,ir=Wt+2*On*(re-Wt)+Vn*(me-2*re+Wt),hr=Ht+2*On*(pe-Ht)+Vn*(Se-2*pe+Ht),Sr=re+2*On*(me-re)+Vn*(Le-2*me+re),mr=pe+2*On*(Se-pe)+Vn*(Je-2*Se+pe),dr=gn*Wt+On*re,Br=gn*Ht+On*pe,ii=gn*me+On*Le,mi=gn*Se+On*Je,Pi=90-Math.atan2(ir-Sr,hr-mr)*180/Math.PI;return{x:Nn,y:Qn,m:{x:ir,y:hr},n:{x:Sr,y:mr},start:{x:dr,y:Br},end:{x:ii,y:mi},alpha:Pi}},bt=function(Wt,Ht,re){var pe=dt(Wt),me=dt(Ht);if(!K(pe,me))return re?0:[];for(var Se=gt.apply(0,Wt),Le=gt.apply(0,Ht),Je=~~(Se/8),On=~~(Le/8),gn=[],Wn=[],kn={},Vn=re?0:[],Dn=0;Dn<Je+1;Dn++){var Nn=mt.apply(0,Wt.concat(Dn/Je));gn.push({x:Nn.x,y:Nn.y,t:Dn/Je})}for(var Dn=0;Dn<On+1;Dn++){var Nn=mt.apply(0,Ht.concat(Dn/On));Wn.push({x:Nn.x,y:Nn.y,t:Dn/On})}for(var Dn=0;Dn<Je;Dn++)for(var Qn=0;Qn<On;Qn++){var ir=gn[Dn],hr=gn[Dn+1],Sr=Wn[Qn],mr=Wn[Qn+1],dr=Math.abs(hr.x-ir.x)<.001?"y":"x",Br=Math.abs(mr.x-Sr.x)<.001?"y":"x",ii=Bt(ir.x,ir.y,hr.x,hr.y,Sr.x,Sr.y,mr.x,mr.y);if(ii){if(kn[ii.x.toFixed(4)]===ii.y.toFixed(4))continue;kn[ii.x.toFixed(4)]=ii.y.toFixed(4);var mi=ir.t+Math.abs((ii[dr]-ir[dr])/(hr[dr]-ir[dr]))*(hr.t-ir.t),Pi=Sr.t+Math.abs((ii[Br]-Sr[Br])/(mr[Br]-Sr[Br]))*(mr.t-Sr.t);mi>=0&&mi<=1&&Pi>=0&&Pi<=1&&(re?Vn++:Vn.push({x:ii.x,y:ii.y,t1:mi,t2:Pi}))}}return Vn},wt=function(Wt,Ht,re){Wt=lt(Wt),Ht=lt(Ht);for(var pe,me,Se,Le,Je,On,gn,Wn,kn,Vn,Dn=re?0:[],Nn=0,Qn=Wt.length;Nn<Qn;Nn++){var ir=Wt[Nn];if(ir[0]==="M")pe=Je=ir[1],me=On=ir[2];else{ir[0]==="C"?(kn=[pe,me].concat(ir.slice(1)),pe=kn[6],me=kn[7]):(kn=[pe,me,pe,me,Je,On,Je,On],pe=Je,me=On);for(var hr=0,Sr=Ht.length;hr<Sr;hr++){var mr=Ht[hr];if(mr[0]==="M")Se=gn=mr[1],Le=Wn=mr[2];else{mr[0]==="C"?(Vn=[Se,Le].concat(mr.slice(1)),Se=Vn[6],Le=Vn[7]):(Vn=[Se,Le,Se,Le,gn,Wn,gn,Wn],Se=gn,Le=Wn);var dr=bt(kn,Vn,re);if(re)Dn+=dr;else{for(var Br=0,ii=dr.length;Br<ii;Br++)dr[Br].segment1=Nn,dr[Br].segment2=hr,dr[Br].bez1=kn,dr[Br].bez2=Vn;Dn=Dn.concat(dr)}}}}}return Dn};function J(Tt,Wt){return wt(Tt,Wt)}var ct=/,?([a-z]),?/gi;function it(Tt){return Tt.join(",").replace(ct,"$1")}function _(Tt){return Math.sqrt(Tt[0]*Tt[0]+Tt[1]*Tt[1])}function R(Tt,Wt){return _(Tt)*_(Wt)?(Tt[0]*Wt[0]+Tt[1]*Wt[1])/(_(Tt)*_(Wt)):1}function Q(Tt,Wt){return(Tt[0]*Wt[1]<Tt[1]*Wt[0]?-1:1)*Math.acos(R(Tt,Wt))}function k(Tt,Wt){return Tt[0]===Wt[0]&&Tt[1]===Wt[1]}function g(Tt,Wt){var Ht=Wt[1],re=Wt[2],pe=Object(H.mod)(Object(H.toRadian)(Wt[3]),Math.PI*2),me=Wt[4],Se=Wt[5],Le=Tt[0],Je=Tt[1],On=Wt[6],gn=Wt[7],Wn=Math.cos(pe)*(Le-On)/2+Math.sin(pe)*(Je-gn)/2,kn=-1*Math.sin(pe)*(Le-On)/2+Math.cos(pe)*(Je-gn)/2,Vn=Wn*Wn/(Ht*Ht)+kn*kn/(re*re);Vn>1&&(Ht*=Math.sqrt(Vn),re*=Math.sqrt(Vn));var Dn=Ht*Ht*(kn*kn)+re*re*(Wn*Wn),Nn=Dn?Math.sqrt((Ht*Ht*(re*re)-Dn)/Dn):1;me===Se&&(Nn*=-1),isNaN(Nn)&&(Nn=0);var Qn=re?Nn*Ht*kn/re:0,ir=Ht?Nn*-re*Wn/Ht:0,hr=(Le+On)/2+Math.cos(pe)*Qn-Math.sin(pe)*ir,Sr=(Je+gn)/2+Math.sin(pe)*Qn+Math.cos(pe)*ir,mr=[(Wn-Qn)/Ht,(kn-ir)/re],dr=[(-1*Wn-Qn)/Ht,(-1*kn-ir)/re],Br=Q([1,0],mr),ii=Q(mr,dr);return R(mr,dr)<=-1&&(ii=Math.PI),R(mr,dr)>=1&&(ii=0),Se===0&&ii>0&&(ii=ii-2*Math.PI),Se===1&&ii<0&&(ii=ii+2*Math.PI),{cx:hr,cy:Sr,rx:k(Tt,[On,gn])?0:Ht,ry:k(Tt,[On,gn])?0:re,startAngle:Br,endAngle:Br+ii,xRotation:pe,arcFlag:me,sweepFlag:Se}}function O(Tt,Wt){return[Wt[0]+(Wt[0]-Tt[0]),Wt[1]+(Wt[1]-Tt[1])]}function F(Tt){Tt=n(Tt);for(var Wt=[],Ht=null,re=null,pe=null,me=0,Se=Tt.length,Le=0;Le<Se;Le++){var Je=Tt[Le];re=Tt[Le+1];var On=Je[0],gn={command:On,prePoint:Ht,params:Je,startTangent:null,endTangent:null};switch(On){case"M":pe=[Je[1],Je[2]],me=Le;break;case"A":var Wn=g(Ht,Je);gn.arcParams=Wn;break;default:break}if(On==="Z")Ht=pe,re=Tt[me+1];else{var kn=Je.length;Ht=[Je[kn-2],Je[kn-1]]}re&&re[0]==="Z"&&(re=Tt[me],Wt[me]&&(Wt[me].prePoint=Ht)),gn.currentPoint=Ht,Wt[me]&&k(Ht,Wt[me].currentPoint)&&(Wt[me].prePoint=gn.prePoint);var Vn=re?[re[re.length-2],re[re.length-1]]:null;gn.nextPoint=Vn;var Dn=gn.prePoint;if(["L","H","V"].includes(On))gn.startTangent=[Dn[0]-Ht[0],Dn[1]-Ht[1]],gn.endTangent=[Ht[0]-Dn[0],Ht[1]-Dn[1]];else if(On==="Q"){var Nn=[Je[1],Je[2]];gn.startTangent=[Dn[0]-Nn[0],Dn[1]-Nn[1]],gn.endTangent=[Ht[0]-Nn[0],Ht[1]-Nn[1]]}else if(On==="T"){var Qn=Wt[Le-1],Nn=O(Qn.currentPoint,Dn);Qn.command==="Q"?(gn.command="Q",gn.startTangent=[Dn[0]-Nn[0],Dn[1]-Nn[1]],gn.endTangent=[Ht[0]-Nn[0],Ht[1]-Nn[1]]):(gn.command="TL",gn.startTangent=[Dn[0]-Ht[0],Dn[1]-Ht[1]],gn.endTangent=[Ht[0]-Dn[0],Ht[1]-Dn[1]])}else if(On==="C"){var ir=[Je[1],Je[2]],hr=[Je[3],Je[4]];gn.startTangent=[Dn[0]-ir[0],Dn[1]-ir[1]],gn.endTangent=[Ht[0]-hr[0],Ht[1]-hr[1]]}else if(On==="S"){var Qn=Wt[Le-1],ir=O(Qn.currentPoint,Dn),hr=[Je[1],Je[2]];Qn.command==="C"?(gn.command="C",gn.startTangent=[Dn[0]-ir[0],Dn[1]-ir[1]],gn.endTangent=[Ht[0]-hr[0],Ht[1]-hr[1]]):(gn.command="SQ",gn.startTangent=[Dn[0]-hr[0],Dn[1]-hr[1]],gn.endTangent=[Ht[0]-hr[0],Ht[1]-hr[1]])}else if(On==="A"){var Sr=.001,mr=gn.arcParams||{},dr=mr.cx,Br=dr===void 0?0:dr,ii=mr.cy,mi=ii===void 0?0:ii,Pi=mr.rx,sa=Pi===void 0?0:Pi,Pa=mr.ry,Mi=Pa===void 0?0:Pa,Ki=mr.sweepFlag,fa=Ki===void 0?0:Ki,oa=mr.startAngle,pa=oa===void 0?0:oa,La=mr.endAngle,Yr=La===void 0?0:La;fa===0&&(Sr*=-1);var Sa=sa*Math.cos(pa-Sr)+Br,Pr=Mi*Math.sin(pa-Sr)+mi;gn.startTangent=[Sa-pe[0],Pr-pe[1]];var si=sa*Math.cos(pa+Yr+Sr)+Br,ti=Mi*Math.sin(pa+Yr-Sr)+mi;gn.endTangent=[Dn[0]-si,Dn[1]-ti]}Wt.push(gn)}return Wt}var V=function(Wt,Ht,re){return Wt>=Ht&&Wt<=re};function rt(Tt,Wt,Ht,re){var pe=.001,me={x:Ht.x-Tt.x,y:Ht.y-Tt.y},Se={x:Wt.x-Tt.x,y:Wt.y-Tt.y},Le={x:re.x-Ht.x,y:re.y-Ht.y},Je=Se.x*Le.y-Se.y*Le.x,On=Je*Je,gn=Se.x*Se.x+Se.y*Se.y,Wn=Le.x*Le.x+Le.y*Le.y,kn=null;if(On>pe*gn*Wn){var Vn=(me.x*Le.y-me.y*Le.x)/Je,Dn=(me.x*Se.y-me.y*Se.x)/Je;V(Vn,0,1)&&V(Dn,0,1)&&(kn={x:Tt.x+Vn*Se.x,y:Tt.y+Vn*Se.y})}return kn}var ot=1e-6;function st(Tt){return Math.abs(Tt)<ot?0:Tt<0?-1:1}function Mt(Tt,Wt,Ht){return(Ht[0]-Tt[0])*(Wt[1]-Tt[1])==(Wt[0]-Tt[0])*(Ht[1]-Tt[1])&&Math.min(Tt[0],Wt[0])<=Ht[0]&&Ht[0]<=Math.max(Tt[0],Wt[0])&&Math.min(Tt[1],Wt[1])<=Ht[1]&&Ht[1]<=Math.max(Tt[1],Wt[1])}function yt(Tt,Wt,Ht){var re=!1,pe=Tt.length;if(pe<=2)return!1;for(var me=0;me<pe;me++){var Se=Tt[me],Le=Tt[(me+1)%pe];if(Mt(Se,Le,[Wt,Ht]))return!0;st(Se[1]-Ht)>0!=st(Le[1]-Ht)>0&&st(Wt-(Ht-Se[1])*(Se[0]-Le[0])/(Se[1]-Le[1])-Se[0])<0&&(re=!re)}return re}function xt(Tt){for(var Wt=[],Ht=Tt.length,re=0;re<Ht-1;re++){var pe=Tt[re],me=Tt[re+1];Wt.push({from:{x:pe[0],y:pe[1]},to:{x:me[0],y:me[1]}})}if(Wt.length>1){var Se=Tt[0],Le=Tt[Ht-1];Wt.push({from:{x:Le[0],y:Le[1]},to:{x:Se[0],y:Se[1]}})}return Wt}function Ot(Tt,Wt){var Ht=!1;return Object(H.each)(Tt,function(re){if(rt(re.from,re.to,Wt.from,Wt.to))return Ht=!0,!1}),Ht}function jt(Tt){var Wt=Tt.map(function(re){return re[0]}),Ht=Tt.map(function(re){return re[1]});return{minX:Math.min.apply(null,Wt),maxX:Math.max.apply(null,Wt),minY:Math.min.apply(null,Ht),maxY:Math.max.apply(null,Ht)}}function Dt(Tt,Wt){return!(Wt.minX>Tt.maxX||Wt.maxX<Tt.minX||Wt.minY>Tt.maxY||Wt.maxY<Tt.minY)}function zt(Tt,Wt){if(Tt.length<2||Wt.length<2)return!1;var Ht=jt(Tt),re=jt(Wt);if(!Dt(Ht,re))return!1;var pe=!1;if(Object(H.each)(Wt,function(Je){if(yt(Tt,Je[0],Je[1]))return pe=!0,!1}),pe||(Object(H.each)(Tt,function(Je){if(yt(Wt,Je[0],Je[1]))return pe=!0,!1}),pe))return!0;var me=xt(Tt),Se=xt(Wt),Le=!1;return Object(H.each)(Se,function(Je){if(Ot(me,Je))return Le=!0,!1}),Le}},MMmD:function(qe,Pt,w){var H=w("lSCD"),i=w("shjB");function y(t){return t!=null&&i(t.length)&&!H(t)}qe.exports=y},MaEA:function(qe,Pt,w){"use strict";var H=w("mrSG"),i=w("zK8m"),y=w("aSjE"),t=function(n){Object(H.b)(u,n);function u(p){return n.call(this,p)||this}return u.prototype._isInBBox=function(p,b){var c=this.getBBox();return c.minX<=p&&c.maxX>=p&&c.minY<=b&&c.maxY>=b},u.prototype.afterAttrsChange=function(p){n.prototype.afterAttrsChange.call(this,p),this.clearCacheBBox()},u.prototype.getBBox=function(){var p=this.cfg.bbox;return p||(p=this.calculateBBox(),this.set("bbox",p)),p},u.prototype.getCanvasBBox=function(){var p=this.cfg.canvasBBox;return p||(p=this.calculateCanvasBBox(),this.set("canvasBBox",p)),p},u.prototype.applyMatrix=function(p){n.prototype.applyMatrix.call(this,p),this.set("canvasBBox",null)},u.prototype.calculateCanvasBBox=function(){var p=this.getBBox(),b=this.getTotalMatrix(),c=p.minX,S=p.minY,I=p.maxX,m=p.maxY;if(b){var r=Object(y.c)(b,[p.minX,p.minY]),s=Object(y.c)(b,[p.maxX,p.minY]),d=Object(y.c)(b,[p.minX,p.maxY]),C=Object(y.c)(b,[p.maxX,p.maxY]);c=Math.min(r[0],s[0],d[0],C[0]),I=Math.max(r[0],s[0],d[0],C[0]),S=Math.min(r[1],s[1],d[1],C[1]),m=Math.max(r[1],s[1],d[1],C[1])}var E=this.attrs;if(E.shadowColor){var A=E.shadowBlur,f=A===void 0?0:A,x=E.shadowOffsetX,j=x===void 0?0:x,P=E.shadowOffsetY,W=P===void 0?0:P,X=c-f+j,$=I+f+j,ft=S-f+W,Z=m+f+W;c=Math.min(c,X),I=Math.max(I,$),S=Math.min(S,ft),m=Math.max(m,Z)}return{x:c,y:S,minX:c,minY:S,maxX:I,maxY:m,width:I-c,height:m-S}},u.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},u.prototype.isClipShape=function(){return this.get("isClipShape")},u.prototype.isInShape=function(p,b){return!1},u.prototype.isOnlyHitBox=function(){return!1},u.prototype.isHit=function(p,b){var c=this.get("startArrowShape"),S=this.get("endArrowShape"),I=[p,b,1];I=this.invertFromMatrix(I);var m=I[0],r=I[1],s=this._isInBBox(m,r);return this.isOnlyHitBox()?s:!!(s&&!this.isClipped(m,r)&&(this.isInShape(m,r)||c&&c.isHit(m,r)||S&&S.isHit(m,r)))},u}(i.a);Pt.a=t},MeYt:function(qe,Pt,w){"use strict";var H=w("mrSG"),i=w("iTfj"),y=w("1//c"),t=w("jqgP"),n=w("5UbV"),u=w("NmWf"),p="update_status",b=["visible","tip","delegateObject"],c=["container","group","shapesMap","isRegister","isUpdating","destroyed"],S=function(I){Object(H.b)(m,I);function m(){return I!==null&&I.apply(this,arguments)||this}return m.prototype.getDefaultCfg=function(){var r=I.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},r),{container:null,shapesMap:{},group:null,capture:!0,isRegister:!1,isUpdating:!1,isInit:!0})},m.prototype.remove=function(){this.clear();var r=this.get("group");r.remove()},m.prototype.clear=function(){var r=this.get("group");r.clear(),this.set("shapesMap",{}),this.clearOffScreenCache(),this.set("isInit",!0)},m.prototype.getChildComponentById=function(r){var s=this.getElementById(r),d=s&&s.get("component");return d},m.prototype.getElementById=function(r){return this.get("shapesMap")[r]},m.prototype.getElementByLocalId=function(r){var s=this.getElementId(r);return this.getElementById(s)},m.prototype.getElementsByName=function(r){var s=[];return Object(i.each)(this.get("shapesMap"),function(d){d.get("name")===r&&s.push(d)}),s},m.prototype.getContainer=function(){return this.get("container")},m.prototype.updateInner=function(r){this.offScreenRender(),this.get("updateAutoRender")&&this.render()},m.prototype.render=function(){var r=this.get("offScreenGroup");r||(r=this.offScreenRender());var s=this.get("group");this.updateElements(r,s),this.deleteElements(),this.applyOffset(),this.get("eventInitted")||(this.initEvent(),this.set("eventInitted",!0)),this.set("isInit",!1)},m.prototype.show=function(){var r=this.get("group");r.show(),this.set("visible",!0)},m.prototype.hide=function(){var r=this.get("group");r.hide(),this.set("visible",!1)},m.prototype.setCapture=function(r){var s=this.get("group");s.set("capture",r),this.set("capture",r)},m.prototype.destroy=function(){this.removeEvent(),this.remove(),I.prototype.destroy.call(this)},m.prototype.getBBox=function(){return this.get("group").getCanvasBBox()},m.prototype.getLayoutBBox=function(){var r=this.get("group"),s=this.getInnerLayoutBBox(),d=r.getTotalMatrix();return d&&(s=Object(t.a)(d,s)),s},m.prototype.on=function(r,s,d){var C=this.get("group");return C.on(r,s,d),this},m.prototype.off=function(r,s){var d=this.get("group");return d&&d.off(r,s),this},m.prototype.emit=function(r,s){var d=this.get("group");d.emit(r,s)},m.prototype.init=function(){I.prototype.init.call(this),this.get("group")||this.initGroup(),this.offScreenRender()},m.prototype.getInnerLayoutBBox=function(){return this.get("offScreenBBox")||this.get("group").getBBox()},m.prototype.delegateEmit=function(r,s){var d=this.get("group");s.target=d,d.emit(r,s),Object(y.a)(d,r,s)},m.prototype.createOffScreenGroup=function(){var r=this.get("group"),s=r.getGroupBase(),d=new s({delegateObject:this.getDelegateObject()});return d},m.prototype.applyOffset=function(){var r=this.get("offsetX"),s=this.get("offsetY");this.moveElementTo(this.get("group"),{x:r,y:s})},m.prototype.initGroup=function(){var r=this.get("container");this.set("group",r.addGroup({id:this.get("id"),name:this.get("name"),capture:this.get("capture"),visible:this.get("visible"),isComponent:!0,component:this,delegateObject:this.getDelegateObject()}))},m.prototype.offScreenRender=function(){this.clearOffScreenCache();var r=this.createOffScreenGroup();return this.renderInner(r),this.set("offScreenGroup",r),this.set("offScreenBBox",Object(n.d)(r)),r},m.prototype.addGroup=function(r,s){this.appendDelegateObject(r,s);var d=r.addGroup(s);return this.get("isRegister")&&this.registerElement(d),d},m.prototype.addShape=function(r,s){this.appendDelegateObject(r,s);var d=r.addShape(s);return this.get("isRegister")&&this.registerElement(d),d},m.prototype.addComponent=function(r,s){var d=s.id,C=s.component,E=Object(H.c)(s,["id","component"]),A=new C(Object(H.a)(Object(H.a)({},E),{id:d,container:r,updateAutoRender:this.get("updateAutoRender")}));return A.init(),A.render(),this.get("isRegister")&&this.registerElement(A.get("group")),A},m.prototype.initEvent=function(){},m.prototype.removeEvent=function(){var r=this.get("group");r.off()},m.prototype.getElementId=function(r){var s=this.get("id"),d=this.get("name");return s+"-"+d+"-"+r},m.prototype.registerElement=function(r){var s=r.get("id");this.get("shapesMap")[s]=r},m.prototype.unregisterElement=function(r){var s=r.get("id");delete this.get("shapesMap")[s]},m.prototype.moveElementTo=function(r,s){var d=Object(t.f)(s);r.attr("matrix",d)},m.prototype.addAnimation=function(r,s,d){var C=s.attr("opacity");Object(i.isNil)(C)&&(C=1),s.attr("opacity",0),s.animate({opacity:C},d)},m.prototype.removeAnimation=function(r,s,d){s.animate({opacity:0},d)},m.prototype.updateAnimation=function(r,s,d,C){s.animate(d,C)},m.prototype.updateElements=function(r,s){var d=this,C=this.get("animate"),E=this.get("animateOption"),A=r.getChildren().slice(0),f;Object(i.each)(A,function(x){var j=x.get("id"),P=d.getElementById(j),W=x.get("name");if(P)if(x.get("isComponent")){var X=x.get("component"),$=P.get("component"),ft=Object(i.pick)(X.cfg,Object(i.difference)(Object(i.keys)(X.cfg),c));$.update(ft),P.set(p,"update")}else{var Z=d.getReplaceAttrs(P,x);C&&E.update?d.updateAnimation(W,P,Z,E.update):P.attr(Z),x.isGroup()&&d.updateElements(x,P),Object(i.each)(b,function(ut){P.set(ut,x.get(ut))}),Object(n.m)(P,x),f=P,P.set(p,"update")}else{s.add(x);var lt=s.getChildren();if(lt.splice(lt.length-1,1),f){var pt=lt.indexOf(f);lt.splice(pt+1,0,x)}else lt.unshift(x);if(d.registerElement(x),x.set(p,"add"),x.get("isComponent")){var X=x.get("component");X.set("container",s)}else x.isGroup()&&d.registerNewGroup(x);if(f=x,C){var gt=d.get("isInit")?E.appear:E.enter;gt&&d.addAnimation(W,x,gt)}}})},m.prototype.clearUpdateStatus=function(r){var s=r.getChildren();Object(i.each)(s,function(d){d.set(p,null)})},m.prototype.clearOffScreenCache=function(){var r=this.get("offScreenGroup");r&&r.destroy(),this.set("offScreenGroup",null),this.set("offScreenBBox",null)},m.prototype.getDelegateObject=function(){var r,s=this.get("name"),d=(r={},r[s]=this,r.component=this,r);return d},m.prototype.appendDelegateObject=function(r,s){var d=r.get("delegateObject");s.delegateObject||(s.delegateObject={}),Object(i.mix)(s.delegateObject,d)},m.prototype.getReplaceAttrs=function(r,s){var d=r.attr(),C=s.attr();return Object(i.each)(d,function(E,A){C[A]===void 0&&(C[A]=void 0)}),C},m.prototype.registerNewGroup=function(r){var s=this,d=r.getChildren();Object(i.each)(d,function(C){s.registerElement(C),C.set(p,"add"),C.isGroup()&&s.registerNewGroup(C)})},m.prototype.deleteElements=function(){var r=this,s=this.get("shapesMap"),d=[];Object(i.each)(s,function(A,f){!A.get(p)||A.destroyed?d.push([f,A]):A.set(p,null)});var C=this.get("animate"),E=this.get("animateOption");Object(i.each)(d,function(A){var f=A[0],x=A[1];if(!x.destroyed){var j=x.get("name");if(C&&E.leave){var P=Object(i.mix)({callback:function(){r.removeElement(x)}},E.leave);r.removeAnimation(j,x,P)}else r.removeElement(x)}delete s[f]})},m.prototype.removeElement=function(r){if(r.get("isGroup")){var s=r.get("component");s&&s.destroy()}r.remove()},m}(u.a);Pt.a=S},Mj7Y:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return k});var H=w("mrSG"),i=w("zJSt"),y=w("YuPD"),t=w("w02o"),n=w("tKoa"),u=w("iTfj"),p={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function b(g,O){return O=Object(u.assign)({},p,O),c(g,O)}function c(g,O){var F=pt();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach(function(yt){Object(u.isNil)(O[yt])||F[yt](O[yt])}),F.words(g),O.imageMask&&F.createMask(O.imageMask);var V=F.start(),rt=V._tags;rt.forEach(function(yt){yt.x+=O.size[0]/2,yt.y+=O.size[1]/2});var ot=O.size,st=ot[0],Mt=ot[1];return rt.push({text:"",value:0,x:0,y:0,opacity:0}),rt.push({text:"",value:0,x:st,y:Mt,opacity:0}),rt}var S=Math.PI/180,I=1<<11>>5,m=1<<11;function r(g){return g.text}function s(){return"serif"}function d(){return"normal"}function C(g){return g.value}function E(){return~~(Math.random()*2)*90}function A(){return 1}function f(g,O,F,V){if(!O.sprite){var rt=g.context,ot=g.ratio;rt.clearRect(0,0,(I<<5)/ot,m/ot);var st=0,Mt=0,yt=0,xt=F.length;for(--V;++V<xt;){O=F[V],rt.save(),rt.font=O.style+" "+O.weight+" "+~~((O.size+1)/ot)+"px "+O.font;var Ot=rt.measureText(O.text+"m").width*ot,jt=O.size<<1;if(O.rotate){var Dt=Math.sin(O.rotate*S),zt=Math.cos(O.rotate*S),Tt=Ot*zt,Wt=Ot*Dt,Ht=jt*zt,re=jt*Dt;Ot=Math.max(Math.abs(Tt+re),Math.abs(Tt-re))+31>>5<<5,jt=~~Math.max(Math.abs(Wt+Ht),Math.abs(Wt-Ht))}else Ot=Ot+31>>5<<5;if(jt>yt&&(yt=jt),st+Ot>=I<<5&&(st=0,Mt+=yt,yt=0),Mt+jt>=m)break;rt.translate((st+(Ot>>1))/ot,(Mt+(jt>>1))/ot),O.rotate&&rt.rotate(O.rotate*S),rt.fillText(O.text,0,0),O.padding&&(rt.lineWidth=2*O.padding,rt.strokeText(O.text,0,0)),rt.restore(),O.width=Ot,O.height=jt,O.xoff=st,O.yoff=Mt,O.x1=Ot>>1,O.y1=jt>>1,O.x0=-O.x1,O.y0=-O.y1,O.hasText=!0,st+=Ot}for(var pe=rt.getImageData(0,0,(I<<5)/ot,m/ot).data,me=[];--V>=0;)if(O=F[V],!!O.hasText){for(var Ot=O.width,Se=Ot>>5,jt=O.y1-O.y0,Le=0;Le<jt*Se;Le++)me[Le]=0;if(st=O.xoff,st==null)return;Mt=O.yoff;for(var Je=0,On=-1,gn=0;gn<jt;gn++){for(var Le=0;Le<Ot;Le++){var Wn=Se*gn+(Le>>5),kn=pe[(Mt+gn)*(I<<5)+(st+Le)<<2]?1<<31-Le%32:0;me[Wn]|=kn,Je|=kn}Je?On=gn:(O.y0++,jt--,gn--,Mt++)}O.y1=O.y0+On,O.sprite=me.slice(0,(O.y1-O.y0)*Se)}}}function x(g,O,F){F>>=5;for(var V=g.sprite,rt=g.width>>5,ot=g.x-(rt<<4),st=ot&127,Mt=32-st,yt=g.y1-g.y0,xt=(g.y+g.y0)*F+(ot>>5),Ot,jt=0;jt<yt;jt++){Ot=0;for(var Dt=0;Dt<=rt;Dt++)if((Ot<<Mt|(Dt<rt?(Ot=V[jt*rt+Dt])>>>st:0))&O[xt+Dt])return!0;xt+=F}return!1}function j(g,O){var F=g[0],V=g[1];O.x+O.x0<F.x&&(F.x=O.x+O.x0),O.y+O.y0<F.y&&(F.y=O.y+O.y0),O.x+O.x1>V.x&&(V.x=O.x+O.x1),O.y+O.y1>V.y&&(V.y=O.y+O.y1)}function P(g,O){return g.x+g.x1>O[0].x&&g.x+g.x0<O[1].x&&g.y+g.y1>O[0].y&&g.y+g.y0<O[1].y}function W(g){var O=g[0]/g[1];return function(F){return[O*(F*=.1)*Math.cos(F),F*Math.sin(F)]}}function X(g){var O=4,F=O*g[0]/g[1],V=0,rt=0;return function(ot){var st=ot<0?-1:1;switch(Math.sqrt(1+4*st*ot)-st&3){case 0:V+=F;break;case 1:rt+=O;break;case 2:V-=F;break;default:rt-=O;break}return[V,rt]}}function $(g){for(var O=[],F=-1;++F<g;)O[F]=0;return O}function ft(){return document.createElement("canvas")}function Z(g){return Object(u.isFunction)(g)?g:function(){return g}}var lt={archimedean:W,rectangular:X};function pt(){var g=[256,256],O=s,F=C,V=d,rt=E,ot=A,st=W,Mt=Math.random,yt=[],xt=Infinity,Ot=r,jt=d,Dt=ft,zt={};zt.start=function(){var Ht=g[0],re=g[1],pe=Tt(Dt()),me=zt.board?zt.board:$((g[0]>>5)*g[1]),Se=yt.length,Le=[],Je=yt.map(function(kn,Vn,Dn){return kn.text=Ot.call(this,kn,Vn,Dn),kn.font=O.call(this,kn,Vn,Dn),kn.style=jt.call(this,kn,Vn,Dn),kn.weight=V.call(this,kn,Vn,Dn),kn.rotate=rt.call(this,kn,Vn,Dn),kn.size=~~F.call(this,kn,Vn,Dn),kn.padding=ot.call(this,kn,Vn,Dn),kn}).sort(function(kn,Vn){return Vn.size-kn.size}),On=-1,gn=zt.board?[{x:0,y:0},{x:Ht,y:re}]:null;Wn();function Wn(){for(var kn=Date.now();Date.now()-kn<xt&&++On<Se;){var Vn=Je[On];Vn.x=Ht*(Mt()+.5)>>1,Vn.y=re*(Mt()+.5)>>1,f(pe,Vn,Je,On),Vn.hasText&&Wt(me,Vn,gn)&&(Le.push(Vn),gn?zt.hasImage||j(gn,Vn):gn=[{x:Vn.x+Vn.x0,y:Vn.y+Vn.y0},{x:Vn.x+Vn.x1,y:Vn.y+Vn.y1}],Vn.x-=g[0]>>1,Vn.y-=g[1]>>1)}zt._tags=Le,zt._bounds=gn}return zt};function Tt(Ht){Ht.width=Ht.height=1;var re=Math.sqrt(Ht.getContext("2d").getImageData(0,0,1,1).data.length>>2);Ht.width=(I<<5)/re,Ht.height=m/re;var pe=Ht.getContext("2d");return pe.fillStyle=pe.strokeStyle="red",pe.textAlign="center",{context:pe,ratio:re}}function Wt(Ht,re,pe){for(var me=re.x,Se=re.y,Le=Math.sqrt(g[0]*g[0]+g[1]*g[1]),Je=st(g),On=Mt()<.5?1:-1,gn,Wn=-On,kn,Vn;(gn=Je(Wn+=On))&&(kn=~~gn[0],Vn=~~gn[1],!(Math.min(Math.abs(kn),Math.abs(Vn))>=Le));)if(re.x=me+kn,re.y=Se+Vn,!(re.x+re.x0<0||re.y+re.y0<0||re.x+re.x1>g[0]||re.y+re.y1>g[1])&&(!pe||!x(re,Ht,g[0]))&&(!pe||P(re,pe))){for(var Dn=re.sprite,Nn=re.width>>5,Qn=g[0]>>5,ir=re.x-(Nn<<4),hr=ir&127,Sr=32-hr,mr=re.y1-re.y0,dr=void 0,Br=(re.y+re.y0)*Qn+(ir>>5),ii=0;ii<mr;ii++){dr=0;for(var mi=0;mi<=Nn;mi++)Ht[Br+mi]|=dr<<Sr|(mi<Nn?(dr=Dn[ii*Nn+mi])>>>hr:0);Br+=Qn}return delete re.sprite,!0}return!1}return zt.createMask=function(Ht){var re=document.createElement("canvas"),pe=g[0],me=g[1];if(!(!pe||!me)){var Se=pe>>5,Le=$((pe>>5)*me);re.width=pe,re.height=me;var Je=re.getContext("2d");Je.drawImage(Ht,0,0,Ht.width,Ht.height,0,0,pe,me);for(var On=Je.getImageData(0,0,pe,me).data,gn=0;gn<me;gn++)for(var Wn=0;Wn<pe;Wn++){var kn=Se*gn+(Wn>>5),Vn=gn*pe+Wn<<2,Dn=On[Vn]>=250&&On[Vn+1]>=250&&On[Vn+2]>=250,Nn=Dn?1<<31-Wn%32:0;Le[kn]|=Nn}zt.board=Le,zt.hasImage=!0}},zt.timeInterval=function(Ht){xt=Ht==null?Infinity:Ht},zt.words=function(Ht){yt=Ht},zt.size=function(Ht){g=[+Ht[0],+Ht[1]]},zt.font=function(Ht){O=Z(Ht)},zt.fontWeight=function(Ht){V=Z(Ht)},zt.rotate=function(Ht){rt=Z(Ht)},zt.spiral=function(Ht){st=lt[Ht]||Ht},zt.fontSize=function(Ht){F=Z(Ht)},zt.padding=function(Ht){ot=Z(Ht)},zt.random=function(Ht){Mt=Z(Ht)},zt}function gt(g){var O=g.options,F=g.chart,V=F,rt=V.width,ot=V.height,st=V.padding,Mt=V.appendPadding,yt=V.ele,xt=O.data,Ot=O.imageMask,jt=O.wordField,Dt=O.weightField,zt=O.colorField,Tt=O.wordStyle,Wt=O.timeInterval,Ht=O.random,re=O.spiral,pe=O.autoFit,me=pe===void 0?!0:pe,Se=O.placementStrategy;if(!xt||!xt.length)return[];var Le=Tt.fontFamily,Je=Tt.fontWeight,On=Tt.padding,gn=Tt.fontSize,Wn=dt(xt,Dt),kn=[wt(Wn),J(Wn)],Vn=xt.map(function(Qn){return{text:Qn[jt],value:Qn[Dt],color:Qn[zt],datum:Qn}}),Dn={imageMask:Ot,font:Le,fontSize:K(gn,kn),fontWeight:Je,size:ut({width:rt,height:ot,padding:st,appendPadding:Mt,autoFit:me,container:yt}),padding:On,timeInterval:Wt,random:Ht,spiral:re,rotate:mt(O)};if(Object(u.isFunction)(Se)){var Nn=Vn.map(function(Qn,ir,hr){return Object(H.a)(Object(H.a)(Object(H.a)({},Qn),{hasText:!!Qn.text,font:Z(Dn.font)(Qn,ir,hr),weight:Z(Dn.fontWeight)(Qn,ir,hr),rotate:Z(Dn.rotate)(Qn,ir,hr),size:Z(Dn.fontSize)(Qn,ir,hr),style:"normal"}),Se.call(F,Qn,ir,hr))});return Nn.push({text:"",value:0,x:0,y:0,opacity:0}),Nn.push({text:"",value:0,x:Dn.size[0],y:Dn.size[1],opacity:0}),Nn}return b(Vn,Dn)}function ut(g){var O=g.width,F=g.height,V=g.container,rt=g.autoFit,ot=g.padding,st=g.appendPadding;if(rt){var Mt=Object(y.g)(V);O=Mt.width,F=Mt.height}O=O||400,F=F||400;var yt=Bt({padding:ot,appendPadding:st}),xt=yt[0],Ot=yt[1],jt=yt[2],Dt=yt[3],zt=[O-(Dt+Ot),F-(xt+jt)];return zt}function Bt(g){var O=Lt(g.padding),F=Lt(g.appendPadding),V=O[0]+F[0],rt=O[1]+F[1],ot=O[2]+F[2],st=O[3]+F[3];return[V,rt,ot,st]}function Lt(g){if(Object(u.isNumber)(g))return[g,g,g,g];if(Object(u.isArray)(g)){var O=g.length;if(O===1)return[g[0],g[0],g[0],g[0]];if(O===2)return[g[0],g[1],g[0],g[1]];if(O===3)return[g[0],g[1],g[2],g[1]];if(O===4)return g}return[0,0,0,0]}function St(g){return new Promise(function(O,F){if(g instanceof HTMLImageElement){O(g);return}if(Object(u.isString)(g)){var V=new Image;V.crossOrigin="anonymous",V.src=g,V.onload=function(){O(V)},V.onerror=function(){Object(y.j)(y.a.ERROR,!1,"image %s load failed !!!",g),F()};return}Object(y.j)(y.a.WARN,g===void 0,"The type of imageMask option must be String or HTMLImageElement."),F()})}function K(g,O){if(Object(u.isFunction)(g))return g;if(Object(u.isArray)(g)){var F=g[0],V=g[1];if(!O)return function(){return(V+F)/2};var rt=O[0],ot=O[1];return ot===rt?function(){return(V+F)/2}:function(Mt){var yt=Mt.value;return(V-F)/(ot-rt)*(yt-rt)+F}}return function(){return g}}function dt(g,O){return g.map(function(F){return F[O]}).filter(function(F){return typeof F=="number"&&!isNaN(F)})}function mt(g){var O=bt(g),F=O.rotation,V=O.rotationSteps;if(!Object(u.isArray)(F))return F;var rt=F[0],ot=F[1],st=V===1?0:(ot-rt)/(V-1);return function(){return ot===rt?ot:Math.floor(Math.random()*V)*st}}function bt(g){var O=g.wordStyle.rotationSteps;return O<1&&(Object(y.j)(y.a.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),O=1),{rotation:g.wordStyle.rotation,rotationSteps:O}}function wt(g){return Math.min.apply(Math,g)}function J(g){return Math.max.apply(Math,g)}function ct(g){var O=g.chart,F=g.options,V=F.colorField,rt=F.color,ot=gt(g);O.data(ot);var st=Object(y.b)({},g,{options:{xField:"x",yField:"y",seriesField:V&&"color",point:{color:rt,shape:"word-cloud"}}}),Mt=Object(n.e)(st).ext;return Mt.geometry.label(!1),O.coordinate().reflect("y"),O.axis(!1),g}function it(g){return Object(y.e)(Object(t.f)({x:{nice:!1},y:{nice:!1}}))(g)}function _(g){Object(y.e)(ct,it,t.k,t.d,t.c,t.a,t.j,t.i)(g)}var R=w("Ihc8");Object(R.registerShape)("point","word-cloud",{draw:function(O,F){var V=O.x,rt=O.y,ot=F.addShape("text",{attrs:Object(H.a)(Object(H.a)({},Q(O)),{x:V,y:rt})}),st=O.data.rotate;return typeof st=="number"&&R.Util.rotate(ot,st*Math.PI/180),ot}});function Q(g){return{fontSize:g.data.size,text:g.data.text,textAlign:"center",fontFamily:g.data.font,fontWeight:g.data.weight,fill:g.color||g.defaultStyle.stroke,textBaseline:"alphabetic"}}var k=function(g){Object(H.b)(O,g);function O(){var F=g!==null&&g.apply(this,arguments)||this;return F.type="word-cloud",F}return O.prototype.changeData=function(F){this.updateOption({data:F}),this.options.imageMask?this.render():this.chart.changeData(gt({chart:this.chart,options:this.options}))},O.prototype.getDefaultOptions=function(){return Object(y.b)({},g.prototype.getDefaultOptions.call(this),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value","color"],formatter:function(V){return{name:V.text,value:V.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}})},O.prototype.render=function(){var F=this;return new Promise(function(V){var rt=F.options.imageMask;if(!rt){g.prototype.render.call(F),V();return}var ot=function(Mt){F.options=Object(H.a)(Object(H.a)({},F.options),{imageMask:Mt||null}),g.prototype.render.call(F),V()};St(rt).then(ot).catch(ot)})},O.prototype.getSchemaAdaptor=function(){return _},O.prototype.triggerResize=function(){var F=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout(function(){g.prototype.triggerResize.call(F)}))},O}(i.a)},MvSz:function(qe,Pt,w){var H=w("LXxW"),i=w("0ycA"),y=Object.prototype,t=y.propertyIsEnumerable,n=Object.getOwnPropertySymbols,u=n?function(p){return p==null?[]:(p=Object(p),H(n(p),function(b){return t.call(p,b)}))}:i;qe.exports=u},Mw2x:function(qe,Pt,w){"use strict";var H=w("mrSG"),i=w("zK8m"),y=w("sstZ"),t={},n="_INDEX";function u(m,r){if(m.set("canvas",r),m.isGroup()){var s=m.get("children");s.length&&s.forEach(function(d){u(d,r)})}}function p(m,r){if(m.set("timeline",r),m.isGroup()){var s=m.get("children");s.length&&s.forEach(function(d){p(d,r)})}}function b(m,r){var s=m.getChildren();return s.indexOf(r)>=0}function c(m,r,s){s===void 0&&(s=!0),s?r.destroy():(r.set("parent",null),r.set("canvas",null)),Object(y.j)(m.getChildren(),r)}function S(m){return function(r,s){var d=m(r,s);return d===0?r[n]-s[n]:d}}var I=function(m){Object(H.b)(r,m);function r(){return m!==null&&m.apply(this,arguments)||this}return r.prototype.isCanvas=function(){return!1},r.prototype.getBBox=function(){var s=Infinity,d=-Infinity,C=Infinity,E=-Infinity,A=[],f=[],x=this.getChildren().filter(function(P){return P.get("visible")&&(!P.isGroup()||P.isGroup()&&P.getChildren().length>0)});x.length>0?(Object(y.a)(x,function(P){var W=P.getBBox();A.push(W.minX,W.maxX),f.push(W.minY,W.maxY)}),s=Math.min.apply(null,A),d=Math.max.apply(null,A),C=Math.min.apply(null,f),E=Math.max.apply(null,f)):(s=0,d=0,C=0,E=0);var j={x:s,y:C,minX:s,minY:C,maxX:d,maxY:E,width:d-s,height:E-C};return j},r.prototype.getCanvasBBox=function(){var s=Infinity,d=-Infinity,C=Infinity,E=-Infinity,A=[],f=[],x=this.getChildren().filter(function(P){return P.get("visible")&&(!P.isGroup()||P.isGroup()&&P.getChildren().length>0)});x.length>0?(Object(y.a)(x,function(P){var W=P.getCanvasBBox();A.push(W.minX,W.maxX),f.push(W.minY,W.maxY)}),s=Math.min.apply(null,A),d=Math.max.apply(null,A),C=Math.min.apply(null,f),E=Math.max.apply(null,f)):(s=0,d=0,C=0,E=0);var j={x:s,y:C,minX:s,minY:C,maxX:d,maxY:E,width:d-s,height:E-C};return j},r.prototype.getDefaultCfg=function(){var s=m.prototype.getDefaultCfg.call(this);return s.children=[],s},r.prototype.onAttrChange=function(s,d,C){if(m.prototype.onAttrChange.call(this,s,d,C),s==="matrix"){var E=this.getTotalMatrix();this._applyChildrenMarix(E)}},r.prototype.applyMatrix=function(s){var d=this.getTotalMatrix();m.prototype.applyMatrix.call(this,s);var C=this.getTotalMatrix();C!==d&&this._applyChildrenMarix(C)},r.prototype._applyChildrenMarix=function(s){var d=this.getChildren();Object(y.a)(d,function(C){C.applyMatrix(s)})},r.prototype.addShape=function(){for(var s=[],d=0;d<arguments.length;d++)s[d]=arguments[d];var C=s[0],E=s[1];Object(y.f)(C)?E=C:E.type=C;var A=t[E.type];A||(A=Object(y.k)(E.type),t[E.type]=A);var f=this.getShapeBase(),x=new f[A](E);return this.add(x),x},r.prototype.addGroup=function(){for(var s=[],d=0;d<arguments.length;d++)s[d]=arguments[d];var C=s[0],E=s[1],A;if(Object(y.d)(C))E?A=new C(E):A=new C({parent:this});else{var f=C||{},x=this.getGroupBase();A=new x(f)}return this.add(A),A},r.prototype.getCanvas=function(){var s;return this.isCanvas()?s=this:s=this.get("canvas"),s},r.prototype.getShape=function(s,d,C){if(!Object(y.b)(this))return null;var E=this.getChildren(),A;if(this.isCanvas())A=this._findShape(E,s,d,C);else{var f=[s,d,1];f=this.invertFromMatrix(f),this.isClipped(f[0],f[1])||(A=this._findShape(E,f[0],f[1],C))}return A},r.prototype._findShape=function(s,d,C,E){for(var A=null,f=s.length-1;f>=0;f--){var x=s[f];if(Object(y.b)(x)&&(x.isGroup()?A=x.getShape(d,C,E):x.isHit(d,C)&&(A=x)),A)break}return A},r.prototype.add=function(s){var d=this.getCanvas(),C=this.getChildren(),E=this.get("timeline"),A=s.getParent();A&&c(A,s,!1),s.set("parent",this),d&&u(s,d),E&&p(s,E),C.push(s),s.onCanvasChange("add"),this._applyElementMatrix(s)},r.prototype._applyElementMatrix=function(s){var d=this.getTotalMatrix();d&&s.applyMatrix(d)},r.prototype.getChildren=function(){return this.get("children")},r.prototype.sort=function(){var s=this.getChildren();Object(y.a)(s,function(d,C){return d[n]=C,d}),s.sort(S(function(d,C){return d.get("zIndex")-C.get("zIndex")})),this.onCanvasChange("sort")},r.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var s=this.getChildren(),d=s.length-1;d>=0;d--)s[d].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},r.prototype.destroy=function(){this.get("destroyed")||(this.clear(),m.prototype.destroy.call(this))},r.prototype.getFirst=function(){return this.getChildByIndex(0)},r.prototype.getLast=function(){var s=this.getChildren();return this.getChildByIndex(s.length-1)},r.prototype.getChildByIndex=function(s){var d=this.getChildren();return d[s]},r.prototype.getCount=function(){var s=this.getChildren();return s.length},r.prototype.contain=function(s){var d=this.getChildren();return d.indexOf(s)>-1},r.prototype.removeChild=function(s,d){d===void 0&&(d=!0),this.contain(s)&&s.remove(d)},r.prototype.findAll=function(s){var d=[],C=this.getChildren();return Object(y.a)(C,function(E){s(E)&&d.push(E),E.isGroup()&&(d=d.concat(E.findAll(s)))}),d},r.prototype.find=function(s){var d=null,C=this.getChildren();return Object(y.a)(C,function(E){if(s(E)?d=E:E.isGroup()&&(d=E.find(s)),d)return!1}),d},r.prototype.findById=function(s){return this.find(function(d){return d.get("id")===s})},r.prototype.findByClassName=function(s){return this.find(function(d){return d.get("className")===s})},r.prototype.findAllByName=function(s){return this.findAll(function(d){return d.get("name")===s})},r}(i.a);Pt.a=I},N9hJ:function(qe,Pt){},NKxu:function(qe,Pt,w){var H=w("lSCD"),i=w("E2jh"),y=w("GoyQ"),t=w("3Fdi"),n=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,p=Function.prototype,b=Object.prototype,c=p.toString,S=b.hasOwnProperty,I=RegExp("^"+c.call(S).replace(n,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(r){if(!y(r)||i(r))return!1;var s=H(r)?I:u;return s.test(t(r))}qe.exports=m},NmWf:function(qe,Pt,w){"use strict";var H=w("mrSG"),i=w("aFU3"),y=w("iTfj"),t={none:[],point:["x","y"],region:["start","end"],points:["points"],circle:["center","radius","startAngle","endAngle"]},n=function(u){Object(H.b)(p,u);function p(b){var c=u.call(this,b)||this;return c.initCfg(),c}return p.prototype.getDefaultCfg=function(){return{id:"",name:"",type:"",locationType:"none",offsetX:0,offsetY:0,animate:!1,capture:!0,updateAutoRender:!1,animateOption:{appear:null,update:{duration:400,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut"},leave:{duration:350,easing:"easeQuadIn"}},events:null,defaultCfg:{},visible:!0}},p.prototype.clear=function(){},p.prototype.update=function(b){var c=this,S=this.get("defaultCfg");Object(y.each)(b,function(I,m){var r=c.get(m),s=I;r!==I&&(Object(y.isObject)(I)&&S[m]&&(s=Object(y.deepMix)({},S[m],I)),c.set(m,s))}),this.updateInner(b),this.afterUpdate(b)},p.prototype.updateInner=function(b){},p.prototype.afterUpdate=function(b){Object(y.hasKey)(b,"visible")&&(b.visible?this.show():this.hide()),Object(y.hasKey)(b,"capture")&&this.setCapture(b.capture)},p.prototype.getLayoutBBox=function(){return this.getBBox()},p.prototype.getLocationType=function(){return this.get("locationType")},p.prototype.getOffset=function(){return{offsetX:this.get("offsetX"),offsetY:this.get("offsetY")}},p.prototype.setOffset=function(b,c){this.update({offsetX:b,offsetY:c})},p.prototype.setLocation=function(b){var c=Object(H.a)({},b);this.update(c)},p.prototype.getLocation=function(){var b=this,c={},S=this.get("locationType"),I=t[S];return Object(y.each)(I,function(m){c[m]=b.get(m)}),c},p.prototype.isList=function(){return!1},p.prototype.isSlider=function(){return!1},p.prototype.init=function(){},p.prototype.initCfg=function(){var b=this,c=this.get("defaultCfg");Object(y.each)(c,function(S,I){var m=b.get(I);if(Object(y.isObject)(m)){var r=Object(y.deepMix)({},S,m);b.set(I,r)}})},p}(i.Base);Pt.a=n},NohK:function(qe,Pt,w){"use strict";Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.default=void 0;var H=function(y){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,n=null;return function(){for(var u=this,p=arguments.length,b=new Array(p),c=0;c<p;c++)b[c]=arguments[c];clearTimeout(n),n=setTimeout(function(){y.apply(u,b)},t)}};Pt.default=H},Npjl:function(qe,Pt){function w(H,i){return H==null?void 0:H[i]}qe.exports=w},NvD2:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return u});var H=w("Kwbf");function i(p,b){var c=new Set;return p.forEach(function(S){b.has(S)||c.add(S)}),c}function y(p){var b=p||{},c=b.disabled,S=b.disableCheckbox,I=b.checkable;return!!(c||S)||I===!1}function t(p,b,c,S){for(var I=new Set(p),m=new Set,r=0;r<=c;r+=1){var s=b.get(r)||new Set;s.forEach(function(A){var f=A.key,x=A.node,j=A.children,P=j===void 0?[]:j;I.has(f)&&!S(x)&&P.filter(function(W){return!S(W.node)}).forEach(function(W){I.add(W.key)})})}for(var d=new Set,C=c;C>=0;C-=1){var E=b.get(C)||new Set;E.forEach(function(A){var f=A.parent,x=A.node;if(!(S(x)||!A.parent||d.has(A.parent.key))){if(S(A.parent.node)){d.add(f.key);return}var j=!0,P=!1;(f.children||[]).filter(function(W){return!S(W.node)}).forEach(function(W){var X=W.key,$=I.has(X);j&&!$&&(j=!1),!P&&($||m.has(X))&&(P=!0)}),j&&I.add(f.key),P&&m.add(f.key),d.add(f.key)}})}return{checkedKeys:Array.from(I),halfCheckedKeys:Array.from(i(m,I))}}function n(p,b,c,S,I){for(var m=new Set(p),r=new Set(b),s=0;s<=S;s+=1){var d=c.get(s)||new Set;d.forEach(function(f){var x=f.key,j=f.node,P=f.children,W=P===void 0?[]:P;!m.has(x)&&!r.has(x)&&!I(j)&&W.filter(function(X){return!I(X.node)}).forEach(function(X){m.delete(X.key)})})}r=new Set;for(var C=new Set,E=S;E>=0;E-=1){var A=c.get(E)||new Set;A.forEach(function(f){var x=f.parent,j=f.node;if(!(I(j)||!f.parent||C.has(f.parent.key))){if(I(f.parent.node)){C.add(x.key);return}var P=!0,W=!1;(x.children||[]).filter(function(X){return!I(X.node)}).forEach(function(X){var $=X.key,ft=m.has($);P&&!ft&&(P=!1),!W&&(ft||r.has($))&&(W=!0)}),P||m.delete(x.key),W&&r.add(x.key),C.add(x.key)}})}return{checkedKeys:Array.from(m),halfCheckedKeys:Array.from(i(r,m))}}function u(p,b,c,S){var I=[],m;S?m=S:m=y;var r=new Set(p.filter(function(E){var A=!!c[E];return A||I.push(E),A})),s=new Map,d=0;Object.keys(c).forEach(function(E){var A=c[E],f=A.level,x=s.get(f);x||(x=new Set,s.set(f,x)),x.add(A),d=Math.max(d,f)}),Object(H.a)(!I.length,"Tree missing follow keys: ".concat(I.slice(0,100).map(function(E){return"'".concat(E,"'")}).join(", ")));var C;return b===!0?C=t(r,s,d,m):C=n(r,b.halfCheckedKeys,s,d,m),C}},NzZ7:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return p});var H=w("tvR+"),i=w("yUfG"),y=w("a8tM"),t=w("iTfj"),n=w("I7nc"),u={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"]};function p(b,c){c=Object(t.assign)({},u,c);var S=c.as;if(!Object(t.isArray)(S)||S.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var I;try{I=Object(n.b)(c)}catch(C){console.warn(C)}var m=function(E){return H.a().tile(i[c.tile]).size(c.size).round(c.round).padding(c.padding).paddingInner(c.paddingInner).paddingOuter(c.paddingOuter).paddingTop(c.paddingTop).paddingRight(c.paddingRight).paddingBottom(c.paddingBottom).paddingLeft(c.paddingLeft)(y.c(E).sum(function(A){return c.ignoreParentValue&&A.children?0:A[I]}))},r=m(b),s=S[0],d=S[1];return r.each(function(C){C[s]=[C.x0,C.x1,C.x1,C.x0],C[d]=[C.y1,C.y1,C.y0,C.y0],["x0","x1","y0","y1"].forEach(function(E){S.indexOf(E)===-1&&delete C[E]})}),Object(n.a)(r)}},OZM5:function(qe,Pt,w){"use strict";w.d(Pt,"b",function(){return b}),w.d(Pt,"a",function(){return c}),w.d(Pt,"k",function(){return S}),w.d(Pt,"h",function(){return I}),w.d(Pt,"i",function(){return m}),w.d(Pt,"g",function(){return r}),w.d(Pt,"c",function(){return C}),w.d(Pt,"d",function(){return E}),w.d(Pt,"j",function(){return x}),w.d(Pt,"e",function(){return j}),w.d(Pt,"f",function(){return P});var H=w("KQm4"),i=w("U8pU"),y=w("Ff2n"),t=w("q1tI"),n=w.n(t),u=w("Kwbf"),p=w("WaYH");function b(W,X){var $=W.slice(),ft=$.indexOf(X);return ft>=0&&$.splice(ft,1),$}function c(W,X){var $=W.slice();return $.indexOf(X)===-1&&$.push(X),$}function S(W){return W.split("-")}function I(W,X){return"".concat(W,"-").concat(X)}function m(W){return W&&W.type&&W.type.isTreeNode}function r(W,X){var $=[],ft=X[W];function Z(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];lt.forEach(function(pt){var gt=pt.key,ut=pt.children;$.push(gt),Z(ut)})}return Z(ft.children),$}function s(W){if(W.parent){var X=S(W.pos);return Number(X[X.length-1])===W.parent.children.length-1}return!1}function d(W){var X=S(W.pos);return Number(X[X.length-1])===0}function C(W,X,$,ft,Z,lt,pt,gt,ut){var Bt,Lt=W.clientX,St=W.clientY,K=W.target.getBoundingClientRect(),dt=K.top,mt=K.height,bt=(ut==="rtl"?-1:1)*(((ft==null?void 0:ft.x)||0)-Lt),wt=(bt-12)/$,J=pt[X.props.eventKey];if(St<dt+mt/2){var ct=lt.findIndex(function(rt){return rt.data.key===J.key}),it=ct<=0?0:ct-1,_=lt[it].data.key;J=pt[_]}for(var R=J,Q=J.key,k=0,g=0,O=0;O<wt&&s(J);O+=1)J=J.parent,g+=1;var F=J.node,V=!0;return d(J)&&J.level===0&&St<dt+mt/2&&Z({dropNode:F,dropPosition:-1})&&J.key===X.props.eventKey?k=-1:(R.children||[]).length&&gt.includes(Q)?Z({dropNode:F,dropPosition:0})?k=0:V=!1:g===0?wt>-1.5?Z({dropNode:F,dropPosition:1})?k=1:V=!1:Z({dropNode:F,dropPosition:0})?k=0:Z({dropNode:F,dropPosition:1})?k=1:V=!1:Z({dropNode:F,dropPosition:1})?k=1:V=!1,{dropPosition:k,dropLevelOffset:g,dropTargetKey:J.key,dropTargetPos:J.pos,dragOverNodeKey:Q,dropContainerKey:k===0?null:((Bt=J.parent)===null||Bt===void 0?void 0:Bt.key)||null,dropAllowed:V}}function E(W,X){if(!!W){var $=X.multiple;return $?W.slice():W.length?[W[0]]:W}}var A=function(X){return X};function f(W,X){if(!W)return[];var $=X||{},ft=$.processProps,Z=ft===void 0?A:ft,lt=Array.isArray(W)?W:[W];return lt.map(function(pt){var gt=pt.children,ut=Object(y.a)(pt,["children"]),Bt=f(gt,X);return n.a.createElement(p.a,Z(ut),Bt)})}function x(W){if(!W)return null;var X;if(Array.isArray(W))X={checkedKeys:W,halfCheckedKeys:void 0};else if(Object(i.a)(W)==="object")X={checkedKeys:W.checked||void 0,halfCheckedKeys:W.halfChecked||void 0};else return Object(u.a)(!1,"`checkedKeys` is not an array or an object"),null;return X}function j(W,X){var $=new Set;function ft(Z){if(!$.has(Z)){var lt=X[Z];if(!!lt){$.add(Z);var pt=lt.parent,gt=lt.node;gt.disabled||pt&&ft(pt.key)}}}return(W||[]).forEach(function(Z){ft(Z)}),Object(H.a)($)}function P(W){var X={};return Object.keys(W).forEach(function($){($.startsWith("data-")||$.startsWith("aria-"))&&(X[$]=W[$])}),X}},"Of+w":function(qe,Pt,w){var H=w("Cwc5"),i=w("Kz5y"),y=H(i,"WeakMap");qe.exports=y},P4Qj:function(qe,Pt,w){"use strict";Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.removeSensor=Pt.getSensor=void 0;var H=t(w("chpo")),i=w("FxDU"),y=w("24YM");function t(b){return b&&b.__esModule?b:{default:b}}var n={},u=function(c){var S=c.getAttribute(y.SizeSensorId);if(S&&n[S])return n[S];var I=(0,H.default)();c.setAttribute(y.SizeSensorId,I);var m=(0,i.createSensor)(c);return n[I]=m,m};Pt.getSensor=u;var p=function(c){var S=c.element.getAttribute(y.SizeSensorId);c.element.removeAttribute(y.SizeSensorId),c.destroy(),S&&n[S]&&delete n[S]};Pt.removeSensor=p},QG4C:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return S});var H=w("mrSG"),i=w("zJSt"),y=w("iTfj"),t=w("WOQw"),n=w("w02o"),u=w("YuPD"),p=w("n/J0");function b(I){var m=I.chart,r=I.options,s=r.views,d=r.legend,C=r.tooltip;return Object(y.each)(s,function(E){var A=E.region,f=E.data,x=E.meta,j=E.axes,P=E.coordinate,W=E.interactions,X=E.annotations,$=E.geometries,ft=m.createView({region:A});ft.data(f);var Z={};j&&Object(y.each)(j,function(lt,pt){Z[pt]=Object(u.k)(lt,p.a)}),Z=Object(u.b)({},x,Z),ft.scale(Z),j?Object(y.each)(j,function(lt,pt){ft.axis(pt,lt)}):ft.axis(!1),ft.coordinate(P),Object(y.each)($,function(lt){var pt=Object(t.a)({chart:ft,options:lt}).ext,gt=lt.adjust;gt&&pt.geometry.adjust(gt)}),Object(y.each)(W,function(lt){lt.enable===!1?ft.removeInteraction(lt.type):ft.interaction(lt.type,lt.cfg)}),Object(y.each)(X,function(lt){ft.annotation()[lt.type](Object(H.a)({},lt))})}),d?Object(y.each)(d,function(E,A){m.legend(A,E)}):m.legend(!1),m.tooltip(C),I}function c(I){return Object(u.e)(n.a,b,n.c,n.a,n.j,n.k)(I)}var S=function(I){Object(H.b)(m,I);function m(){var r=I!==null&&I.apply(this,arguments)||this;return r.type="multi-view",r}return m.prototype.getSchemaAdaptor=function(){return c},m}(i.a)},"QO+J":function(qe,Pt,w){"use strict";Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.createSensor=void 0;var H=y(w("NohK")),i=w("24YM");function y(n){return n&&n.__esModule?n:{default:n}}var t=function(u){var p=void 0,b=[],c=function(){getComputedStyle(u).position==="static"&&(u.style.position="relative");var d=document.createElement("object");return d.onload=function(){d.contentDocument.defaultView.addEventListener("resize",S),S()},d.style.display="block",d.style.position="absolute",d.style.top="0",d.style.left="0",d.style.height="100%",d.style.width="100%",d.style.overflow="hidden",d.style.pointerEvents="none",d.style.zIndex="-1",d.style.opacity="0",d.setAttribute("class",i.SensorClassName),d.setAttribute("tabindex",i.SensorTabIndex),d.type="text/html",u.appendChild(d),d.data="about:blank",d},S=(0,H.default)(function(){b.forEach(function(s){s(u)})}),I=function(d){p||(p=c()),b.indexOf(d)===-1&&b.push(d)},m=function(){p&&p.parentNode&&(p.contentDocument&&p.contentDocument.defaultView.removeEventListener("resize",S),p.parentNode.removeChild(p),p=void 0,b=[])},r=function(d){var C=b.indexOf(d);C!==-1&&b.splice(C,1),b.length===0&&p&&m()};return{element:u,bind:I,destroy:m,unbind:r}};Pt.createSensor=t},"QQZ/":function(qe,Pt,w){var H=w("Sq3C"),i=w("Z1HP"),y=w("Sxd8"),t=w("dt0z");function n(u,p,b){u=t(u),p=y(p);var c=p?i(u):0;return p&&c<p?H(p-c,b)+u:u}qe.exports=n},Qci9:function(qe,Pt,w){"use strict";var H=w("iTfj"),i=w("0Xep"),y=function(){function t(n){var u=n.xField,p=n.yField,b=n.adjustNames,c=b===void 0?["x","y"]:b;this.adjustNames=c,this.xField=u,this.yField=p}return t.prototype.isAdjust=function(n){return this.adjustNames.indexOf(n)>=0},t.prototype.getAdjustRange=function(n,u,p){var b=this.yField,c=p.indexOf(u),S=p.length,I,m;return!b&&this.isAdjust("y")?(I=0,m=1):S>1?(I=p[c===0?0:c-1],m=p[c===S-1?S-1:c+1],c!==0?I+=(u-I)/2:I-=(m-u)/2,c!==S-1?m-=(m-u)/2:m+=(u-p[S-2])/2):(I=u===0?0:u-.5,m=u===0?1:u+.5),{pre:I,next:m}},t.prototype.adjustData=function(n,u){var p=this,b=this.getDimValues(u);H.each(n,function(c,S){H.each(b,function(I,m){p.adjustDim(m,I,c,S)})})},t.prototype.groupData=function(n,u){return H.each(n,function(p){p[u]===void 0&&(p[u]=i.a)}),H.groupBy(n,u)},t.prototype.adjustDim=function(n,u,p,b){},t.prototype.getDimValues=function(n){var u=this,p=u.xField,b=u.yField,c={},S=[];if(p&&this.isAdjust("x")&&S.push(p),b&&this.isAdjust("y")&&S.push(b),S.forEach(function(m){c[m]=H.valuesOfKey(n,m).sort(function(r,s){return r-s})}),!b&&this.isAdjust("y")){var I="y";c[I]=[i.a,1]}return c},t}();Pt.a=y},QkVE:function(qe,Pt,w){var H=w("EpBk");function i(y,t){var n=y.__data__;return H(t)?n[typeof t=="string"?"string":"hash"]:n.map}qe.exports=i},QoRX:function(qe,Pt){function w(H,i){for(var y=-1,t=H==null?0:H.length;++y<t;)if(i(H[y],y,H))return!0;return!1}qe.exports=w},QqLw:function(qe,Pt,w){var H=w("tadb"),i=w("ebwN"),y=w("HOxn"),t=w("yGk4"),n=w("Of+w"),u=w("NykK"),p=w("3Fdi"),b="[object Map]",c="[object Object]",S="[object Promise]",I="[object Set]",m="[object WeakMap]",r="[object DataView]",s=p(H),d=p(i),C=p(y),E=p(t),A=p(n),f=u;(H&&f(new H(new ArrayBuffer(1)))!=r||i&&f(new i)!=b||y&&f(y.resolve())!=S||t&&f(new t)!=I||n&&f(new n)!=m)&&(f=function(x){var j=u(x),P=j==c?x.constructor:void 0,W=P?p(P):"";if(W)switch(W){case s:return r;case d:return b;case C:return S;case E:return I;case A:return m}return j}),qe.exports=f},R5nb:function(qe,Pt,w){"use strict";w.r(Pt),w.d(Pt,"Base",function(){return b}),w.d(Pt,"Circle",function(){return S}),w.d(Pt,"Ellipse",function(){return r}),w.d(Pt,"Image",function(){return C}),w.d(Pt,"Line",function(){return j}),w.d(Pt,"Marker",function(){return ft}),w.d(Pt,"Path",function(){return it}),w.d(Pt,"Polygon",function(){return Q}),w.d(Pt,"Polyline",function(){return g}),w.d(Pt,"Rect",function(){return ot}),w.d(Pt,"Text",function(){return Mt});var H={};w.r(H),w.d(H,"Base",function(){return b}),w.d(H,"Circle",function(){return S}),w.d(H,"Ellipse",function(){return r}),w.d(H,"Image",function(){return C}),w.d(H,"Line",function(){return j}),w.d(H,"Marker",function(){return ft}),w.d(H,"Path",function(){return it}),w.d(H,"Polygon",function(){return Q}),w.d(H,"Polyline",function(){return g}),w.d(H,"Rect",function(){return ot}),w.d(H,"Text",function(){return Mt});var i=w("mrSG"),y=w("aFU3"),t=w("cyZq"),n=w("9eUa"),u=w("wq2r"),p=function(yt){Object(i.b)(xt,yt);function xt(){return yt!==null&&yt.apply(this,arguments)||this}return xt.prototype.getDefaultAttrs=function(){var Ot=yt.prototype.getDefaultAttrs.call(this);return Object(i.a)(Object(i.a)({},Ot),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},xt.prototype.getShapeBase=function(){return H},xt.prototype.getGroupBase=function(){return u.a},xt.prototype.onCanvasChange=function(Ot){Object(n.h)(this,Ot)},xt.prototype.calculateBBox=function(){var Ot=this.get("type"),jt=this.getHitLineWidth(),Dt=Object(y.getBBoxMethod)(Ot),zt=Dt(this),Tt=jt/2,Wt=zt.x-Tt,Ht=zt.y-Tt,re=zt.x+zt.width+Tt,pe=zt.y+zt.height+Tt;return{x:Wt,minX:Wt,y:Ht,minY:Ht,width:zt.width+jt,height:zt.height+jt,maxX:re,maxY:pe}},xt.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},xt.prototype.isStroke=function(){return!!this.attrs.stroke},xt.prototype._applyClip=function(Ot,jt){jt&&(Ot.save(),Object(n.a)(Ot,jt),jt.createPath(Ot),Ot.restore(),Ot.clip(),jt._afterDraw())},xt.prototype.draw=function(Ot,jt){var Dt=this.cfg.clipShape;if(jt){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var zt=this.getCanvasBBox();if(!Object(t.f)(jt,zt)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}Ot.save(),Object(n.a)(Ot,this),this._applyClip(Ot,Dt),this.drawPath(Ot),Ot.restore(),this._afterDraw()},xt.prototype.getCanvasViewBox=function(){var Ot=this.cfg.canvas;return Ot?Ot.getViewRange():null},xt.prototype.cacheCanvasBBox=function(){var Ot=this.getCanvasViewBox();if(Ot){var jt=this.getCanvasBBox(),Dt=Object(t.f)(jt,Ot);this.set("isInView",Dt),Dt?this.set("cacheCanvasBBox",jt):this.set("cacheCanvasBBox",null)}},xt.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},xt.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},xt.prototype.drawPath=function(Ot){this.createPath(Ot),this.strokeAndFill(Ot),this.afterDrawPath(Ot)},xt.prototype.fill=function(Ot){Ot.fill()},xt.prototype.stroke=function(Ot){Ot.stroke()},xt.prototype.strokeAndFill=function(Ot){var jt=this.attrs,Dt=jt.lineWidth,zt=jt.opacity,Tt=jt.strokeOpacity,Wt=jt.fillOpacity;this.isFill()&&(!Object(t.i)(Wt)&&Wt!==1?(Ot.globalAlpha=Wt,this.fill(Ot),Ot.globalAlpha=zt):this.fill(Ot)),this.isStroke()&&Dt>0&&(!Object(t.i)(Tt)&&Tt!==1&&(Ot.globalAlpha=Tt),this.stroke(Ot)),this.afterDrawPath(Ot)},xt.prototype.createPath=function(Ot){},xt.prototype.afterDrawPath=function(Ot){},xt.prototype.isInShape=function(Ot,jt){var Dt=this.isStroke(),zt=this.isFill(),Tt=this.getHitLineWidth();return this.isInStrokeOrPath(Ot,jt,Dt,zt,Tt)},xt.prototype.isInStrokeOrPath=function(Ot,jt,Dt,zt,Tt){return!1},xt.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var Ot=this.attrs;return Ot.lineWidth+Ot.lineAppendWidth},xt}(y.AbstractShape),b=p,c=function(yt){Object(i.b)(xt,yt);function xt(){return yt!==null&&yt.apply(this,arguments)||this}return xt.prototype.getDefaultAttrs=function(){var Ot=yt.prototype.getDefaultAttrs.call(this);return Object(i.a)(Object(i.a)({},Ot),{x:0,y:0,r:0})},xt.prototype.isInStrokeOrPath=function(Ot,jt,Dt,zt,Tt){var Wt=this.attr(),Ht=Wt.x,re=Wt.y,pe=Wt.r,me=Tt/2,Se=Object(t.b)(Ht,re,Ot,jt);return zt&&Dt?Se<=pe+me:zt?Se<=pe:Dt?Se>=pe-me&&Se<=pe+me:!1},xt.prototype.createPath=function(Ot){var jt=this.attr(),Dt=jt.x,zt=jt.y,Tt=jt.r;Ot.beginPath(),Ot.arc(Dt,zt,Tt,0,Math.PI*2,!1),Ot.closePath()},xt}(b),S=c;function I(yt,xt,Ot,jt){return yt/(Ot*Ot)+xt/(jt*jt)}var m=function(yt){Object(i.b)(xt,yt);function xt(){return yt!==null&&yt.apply(this,arguments)||this}return xt.prototype.getDefaultAttrs=function(){var Ot=yt.prototype.getDefaultAttrs.call(this);return Object(i.a)(Object(i.a)({},Ot),{x:0,y:0,rx:0,ry:0})},xt.prototype.isInStrokeOrPath=function(Ot,jt,Dt,zt,Tt){var Wt=this.attr(),Ht=Tt/2,re=Wt.x,pe=Wt.y,me=Wt.rx,Se=Wt.ry,Le=(Ot-re)*(Ot-re),Je=(jt-pe)*(jt-pe);return zt&&Dt?I(Le,Je,me+Ht,Se+Ht)<=1:zt?I(Le,Je,me,Se)<=1:Dt?I(Le,Je,me-Ht,Se-Ht)>=1&&I(Le,Je,me+Ht,Se+Ht)<=1:!1},xt.prototype.createPath=function(Ot){var jt=this.attr(),Dt=jt.x,zt=jt.y,Tt=jt.rx,Wt=jt.ry;if(Ot.beginPath(),Ot.ellipse)Ot.ellipse(Dt,zt,Tt,Wt,0,0,Math.PI*2,!1);else{var Ht=Tt>Wt?Tt:Wt,re=Tt>Wt?1:Tt/Wt,pe=Tt>Wt?Wt/Tt:1;Ot.save(),Ot.translate(Dt,zt),Ot.scale(re,pe),Ot.arc(0,0,Ht,0,Math.PI*2),Ot.restore(),Ot.closePath()}},xt}(b),r=m;function s(yt){return yt instanceof HTMLElement&&Object(t.k)(yt.nodeName)&&yt.nodeName.toUpperCase()==="CANVAS"}var d=function(yt){Object(i.b)(xt,yt);function xt(){return yt!==null&&yt.apply(this,arguments)||this}return xt.prototype.getDefaultAttrs=function(){var Ot=yt.prototype.getDefaultAttrs.call(this);return Object(i.a)(Object(i.a)({},Ot),{x:0,y:0,width:0,height:0})},xt.prototype.initAttrs=function(Ot){this._setImage(Ot.img)},xt.prototype.isStroke=function(){return!1},xt.prototype.isOnlyHitBox=function(){return!0},xt.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var Ot=this.get("canvas");Ot?Ot.draw():this.createPath(this.get("context"))}},xt.prototype._setImage=function(Ot){var jt=this,Dt=this.attrs;if(Object(t.k)(Ot)){var zt=new Image;zt.onload=function(){if(jt.destroyed)return!1;jt.attr("img",zt),jt.set("loading",!1),jt._afterLoading();var Tt=jt.get("callback");Tt&&Tt.call(jt)},zt.crossOrigin="Anonymous",zt.src=Ot,this.set("loading",!0)}else Ot instanceof Image?(Dt.width||(Dt.width=Ot.width),Dt.height||(Dt.height=Ot.height)):s(Ot)&&(Dt.width||(Dt.width=Number(Ot.getAttribute("width"))),Dt.height||(Dt.height,Number(Ot.getAttribute("height"))))},xt.prototype.onAttrChange=function(Ot,jt,Dt){yt.prototype.onAttrChange.call(this,Ot,jt,Dt),Ot==="img"&&this._setImage(jt)},xt.prototype.createPath=function(Ot){if(this.get("loading")){this.set("toDraw",!0),this.set("context",Ot);return}var jt=this.attr(),Dt=jt.x,zt=jt.y,Tt=jt.width,Wt=jt.height,Ht=jt.sx,re=jt.sy,pe=jt.swidth,me=jt.sheight,Se=jt.img;(Se instanceof Image||s(Se))&&(!Object(t.i)(Ht)&&!Object(t.i)(re)&&!Object(t.i)(pe)&&!Object(t.i)(me)?Ot.drawImage(Se,Ht,re,pe,me,Dt,zt,Tt,Wt):Ot.drawImage(Se,Dt,zt,Tt,Wt))},xt}(b),C=d,E=w("EYNi");function A(yt,xt,Ot,jt,Dt,zt,Tt){var Wt=Math.min(yt,Ot),Ht=Math.max(yt,Ot),re=Math.min(xt,jt),pe=Math.max(xt,jt),me=Dt/2;return zt>=Wt-me&&zt<=Ht+me&&Tt>=re-me&&Tt<=pe+me?E.c.pointToLine(yt,xt,Ot,jt,zt,Tt)<=Dt/2:!1}var f=w("nycV"),x=function(yt){Object(i.b)(xt,yt);function xt(){return yt!==null&&yt.apply(this,arguments)||this}return xt.prototype.getDefaultAttrs=function(){var Ot=yt.prototype.getDefaultAttrs.call(this);return Object(i.a)(Object(i.a)({},Ot),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},xt.prototype.initAttrs=function(Ot){this.setArrow()},xt.prototype.onAttrChange=function(Ot,jt,Dt){yt.prototype.onAttrChange.call(this,Ot,jt,Dt),this.setArrow()},xt.prototype.setArrow=function(){var Ot=this.attr(),jt=Ot.x1,Dt=Ot.y1,zt=Ot.x2,Tt=Ot.y2,Wt=Ot.startArrow,Ht=Ot.endArrow;Wt&&f.b(this,Ot,zt,Tt,jt,Dt),Ht&&f.a(this,Ot,jt,Dt,zt,Tt)},xt.prototype.isInStrokeOrPath=function(Ot,jt,Dt,zt,Tt){if(!Dt||!Tt)return!1;var Wt=this.attr(),Ht=Wt.x1,re=Wt.y1,pe=Wt.x2,me=Wt.y2;return A(Ht,re,pe,me,Tt,Ot,jt)},xt.prototype.createPath=function(Ot){var jt=this.attr(),Dt=jt.x1,zt=jt.y1,Tt=jt.x2,Wt=jt.y2,Ht=jt.startArrow,re=jt.endArrow,pe={dx:0,dy:0},me={dx:0,dy:0};Ht&&Ht.d&&(pe=f.c(Dt,zt,Tt,Wt,jt.startArrow.d)),re&&re.d&&(me=f.c(Dt,zt,Tt,Wt,jt.endArrow.d)),Ot.beginPath(),Ot.moveTo(Dt+pe.dx,zt+pe.dy),Ot.lineTo(Tt-me.dx,Wt-me.dy)},xt.prototype.afterDrawPath=function(Ot){var jt=this.get("startArrowShape"),Dt=this.get("endArrowShape");jt&&jt.draw(Ot),Dt&&Dt.draw(Ot)},xt.prototype.getTotalLength=function(){var Ot=this.attr(),jt=Ot.x1,Dt=Ot.y1,zt=Ot.x2,Tt=Ot.y2;return E.c.length(jt,Dt,zt,Tt)},xt.prototype.getPoint=function(Ot){var jt=this.attr(),Dt=jt.x1,zt=jt.y1,Tt=jt.x2,Wt=jt.y2;return E.c.pointAt(Dt,zt,Tt,Wt,Ot)},xt}(b),j=x,P=w("iTfj"),W=w("LvGN"),X={circle:function(xt,Ot,jt){return[["M",xt-jt,Ot],["A",jt,jt,0,1,0,xt+jt,Ot],["A",jt,jt,0,1,0,xt-jt,Ot]]},square:function(xt,Ot,jt){return[["M",xt-jt,Ot-jt],["L",xt+jt,Ot-jt],["L",xt+jt,Ot+jt],["L",xt-jt,Ot+jt],["Z"]]},diamond:function(xt,Ot,jt){return[["M",xt-jt,Ot],["L",xt,Ot-jt],["L",xt+jt,Ot],["L",xt,Ot+jt],["Z"]]},triangle:function(xt,Ot,jt){var Dt=jt*Math.sin(1/3*Math.PI);return[["M",xt-jt,Ot+Dt],["L",xt,Ot-Dt],["L",xt+jt,Ot+Dt],["Z"]]},"triangle-down":function(xt,Ot,jt){var Dt=jt*Math.sin(1/3*Math.PI);return[["M",xt-jt,Ot-Dt],["L",xt+jt,Ot-Dt],["L",xt,Ot+Dt],["Z"]]}},$=function(yt){Object(i.b)(xt,yt);function xt(){return yt!==null&&yt.apply(this,arguments)||this}return xt.prototype.initAttrs=function(Ot){this._resetParamsCache()},xt.prototype._resetParamsCache=function(){this.set("paramsCache",{})},xt.prototype.onAttrChange=function(Ot,jt,Dt){yt.prototype.onAttrChange.call(this,Ot,jt,Dt),["symbol","x","y","r","radius"].indexOf(Ot)!==-1&&this._resetParamsCache()},xt.prototype.isOnlyHitBox=function(){return!0},xt.prototype._getR=function(Ot){return Object(P.isNil)(Ot.r)?Ot.radius:Ot.r},xt.prototype._getPath=function(){var Ot=this.attr(),jt=Ot.x,Dt=Ot.y,zt=Ot.symbol||"circle",Tt=this._getR(Ot),Wt,Ht;if(Object(t.h)(zt))Wt=zt,Ht=Wt(jt,Dt,Tt),Ht=Object(W.d)(Ht);else{if(Wt=xt.Symbols[zt],!Wt)return console.warn(zt+" marker is not supported."),null;Ht=Wt(jt,Dt,Tt)}return Ht},xt.prototype.createPath=function(Ot){var jt=this._getPath(),Dt=this.get("paramsCache");Object(n.e)(this,Ot,{path:jt},Dt)},xt.Symbols=X,xt}(b),ft=$;function Z(yt,xt,Ot){var jt=Object(y.getOffScreenContext)();return yt.createPath(jt),jt.isPointInPath(xt,Ot)}var lt=1e-6;function pt(yt){return Math.abs(yt)<lt?0:yt<0?-1:1}function gt(yt,xt,Ot){return(Ot[0]-yt[0])*(xt[1]-yt[1])==(xt[0]-yt[0])*(Ot[1]-yt[1])&&Math.min(yt[0],xt[0])<=Ot[0]&&Ot[0]<=Math.max(yt[0],xt[0])&&Math.min(yt[1],xt[1])<=Ot[1]&&Ot[1]<=Math.max(yt[1],xt[1])}function ut(yt,xt,Ot){var jt=!1,Dt=yt.length;if(Dt<=2)return!1;for(var zt=0;zt<Dt;zt++){var Tt=yt[zt],Wt=yt[(zt+1)%Dt];if(gt(Tt,Wt,[xt,Ot]))return!0;pt(Tt[1]-Ot)>0!=pt(Wt[1]-Ot)>0&&pt(xt-(Ot-Tt[1])*(Tt[0]-Wt[0])/(Tt[1]-Wt[1])-Tt[0])<0&&(jt=!jt)}return jt}var Bt=w("6JdA"),Lt=w("n+fv");function St(yt,xt,Ot,jt,Dt,zt,Tt,Wt){var Ht=(Math.atan2(Wt-xt,Tt-yt)+Math.PI*2)%(Math.PI*2);if(Ht<jt||Ht>Dt)return!1;var re={x:yt+Ot*Math.cos(Ht),y:xt+Ot*Math.sin(Ht)};return Object(t.b)(re.x,re.y,Tt,Wt)<=zt/2}var K=Bt.a.transform;function dt(yt){for(var xt=!1,Ot=yt.length,jt=0;jt<Ot;jt++){var Dt=yt[jt],zt=Dt[0];if(zt==="C"||zt==="A"||zt==="Q"){xt=!0;break}}return xt}function mt(yt,xt,Ot,jt,Dt){for(var zt=!1,Tt=xt/2,Wt=0;Wt<yt.length;Wt++){var Ht=yt[Wt],re=Ht.currentPoint,pe=Ht.params,me=Ht.prePoint,Se=Ht.box;if(!(Se&&!Object(t.e)(Se.x-Tt,Se.y-Tt,Se.width+xt,Se.height+xt,Ot,jt))){switch(Ht.command){case"L":case"Z":zt=A(me[0],me[1],re[0],re[1],xt,Ot,jt);break;case"Q":var Le=E.e.pointDistance(me[0],me[1],pe[1],pe[2],pe[3],pe[4],Ot,jt);zt=Le<=xt/2;break;case"C":var Je=E.b.pointDistance(me[0],me[1],pe[1],pe[2],pe[3],pe[4],pe[5],pe[6],Ot,jt,Dt);zt=Je<=xt/2;break;case"A":var On=Ht.arcParams,gn=On.cx,Wn=On.cy,kn=On.rx,Vn=On.ry,Dn=On.startAngle,Nn=On.endAngle,Qn=On.xRotation,ir=[Ot,jt,1],hr=kn>Vn?kn:Vn,Sr=kn>Vn?1:kn/Vn,mr=kn>Vn?Vn/kn:1,dr=K(null,[["t",-gn,-Wn],["r",-Qn],["s",1/Sr,1/mr]]);Lt.transformMat3(ir,ir,dr),zt=St(0,0,hr,Dn,Nn,xt,ir[0],ir[1]);break;default:break}if(zt)break}}return zt}function bt(yt){for(var xt=yt.length,Ot=[],jt=[],Dt=[],zt=0;zt<xt;zt++){var Tt=yt[zt],Wt=Tt[0];Wt==="M"?(Dt.length&&(jt.push(Dt),Dt=[]),Dt.push([Tt[1],Tt[2]])):Wt==="Z"?Dt.length&&(Ot.push(Dt),Dt=[]):Dt.push([Tt[1],Tt[2]])}return Dt.length>0&&jt.push(Dt),{polygons:Ot,polylines:jt}}var wt=Object(i.a)({hasArc:dt,extractPolygons:bt,isPointInStroke:mt},y.PathUtil);function J(yt,xt,Ot){for(var jt=!1,Dt=0;Dt<yt.length;Dt++){var zt=yt[Dt];if(jt=ut(zt,xt,Ot),jt)break}return jt}var ct=function(yt){Object(i.b)(xt,yt);function xt(){return yt!==null&&yt.apply(this,arguments)||this}return xt.prototype.getDefaultAttrs=function(){var Ot=yt.prototype.getDefaultAttrs.call(this);return Object(i.a)(Object(i.a)({},Ot),{startArrow:!1,endArrow:!1})},xt.prototype.initAttrs=function(Ot){this._setPathArr(Ot.path),this.setArrow()},xt.prototype.onAttrChange=function(Ot,jt,Dt){yt.prototype.onAttrChange.call(this,Ot,jt,Dt),Ot==="path"&&this._setPathArr(jt),this.setArrow()},xt.prototype._setPathArr=function(Ot){this.attrs.path=Object(W.d)(Ot);var jt=wt.hasArc(Ot);this.set("hasArc",jt),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},xt.prototype.getSegments=function(){var Ot=this.get("segements");return Ot||(Ot=Object(W.e)(this.attr("path")),this.set("segments",Ot)),Ot},xt.prototype.setArrow=function(){var Ot=this.attr(),jt=Ot.startArrow,Dt=Ot.endArrow;if(jt){var zt=this.getStartTangent();f.b(this,Ot,zt[0][0],zt[0][1],zt[1][0],zt[1][1])}if(Dt){var zt=this.getEndTangent();f.a(this,Ot,zt[0][0],zt[0][1],zt[1][0],zt[1][1])}},xt.prototype.isInStrokeOrPath=function(Ot,jt,Dt,zt,Tt){var Wt=this.getSegments(),Ht=this.get("hasArc"),re=!1;if(Dt){var pe=this.getTotalLength();re=wt.isPointInStroke(Wt,Tt,Ot,jt,pe)}if(!re&&zt)if(Ht)re=Z(this,Ot,jt);else{var me=this.attr("path"),Se=wt.extractPolygons(me);re=J(Se.polygons,Ot,jt)||J(Se.polylines,Ot,jt)}return re},xt.prototype.createPath=function(Ot){var jt=this.attr(),Dt=this.get("paramsCache");Object(n.e)(this,Ot,jt,Dt)},xt.prototype.afterDrawPath=function(Ot){var jt=this.get("startArrowShape"),Dt=this.get("endArrowShape");jt&&jt.draw(Ot),Dt&&Dt.draw(Ot)},xt.prototype.getTotalLength=function(){var Ot=this.get("totalLength");return Object(P.isNil)(Ot)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):Ot},xt.prototype.getPoint=function(Ot){var jt=this.get("tCache");jt||(this._calculateCurve(),this._setTcache(),jt=this.get("tCache"));var Dt,zt,Tt=this.get("curve");if(!jt||jt.length===0)return Tt?{x:Tt[0][1],y:Tt[0][2]}:null;Object(P.each)(jt,function(pe,me){Ot>=pe[0]&&Ot<=pe[1]&&(Dt=(Ot-pe[0])/(pe[1]-pe[0]),zt=me)});var Wt=Tt[zt];if(Object(P.isNil)(Wt)||Object(P.isNil)(zt))return null;var Ht=Wt.length,re=Tt[zt+1];return E.b.pointAt(Wt[Ht-2],Wt[Ht-1],re[1],re[2],re[3],re[4],re[5],re[6],Dt)},xt.prototype._calculateCurve=function(){var Ot=this.attr().path;this.set("curve",wt.pathToCurve(Ot))},xt.prototype._setTcache=function(){var Ot=0,jt=0,Dt=[],zt,Tt,Wt,Ht,re=this.get("curve");if(!!re){if(Object(P.each)(re,function(pe,me){Wt=re[me+1],Ht=pe.length,Wt&&(Ot+=E.b.length(pe[Ht-2],pe[Ht-1],Wt[1],Wt[2],Wt[3],Wt[4],Wt[5],Wt[6])||0)}),this.set("totalLength",Ot),Ot===0){this.set("tCache",[]);return}Object(P.each)(re,function(pe,me){Wt=re[me+1],Ht=pe.length,Wt&&(zt=[],zt[0]=jt/Ot,Tt=E.b.length(pe[Ht-2],pe[Ht-1],Wt[1],Wt[2],Wt[3],Wt[4],Wt[5],Wt[6]),jt+=Tt||0,zt[1]=jt/Ot,Dt.push(zt))}),this.set("tCache",Dt)}},xt.prototype.getStartTangent=function(){var Ot=this.getSegments(),jt;if(Ot.length>1){var Dt=Ot[0].currentPoint,zt=Ot[1].currentPoint,Tt=Ot[1].startTangent;jt=[],Tt?(jt.push([Dt[0]-Tt[0],Dt[1]-Tt[1]]),jt.push([Dt[0],Dt[1]])):(jt.push([zt[0],zt[1]]),jt.push([Dt[0],Dt[1]]))}return jt},xt.prototype.getEndTangent=function(){var Ot=this.getSegments(),jt=Ot.length,Dt;if(jt>1){var zt=Ot[jt-2].currentPoint,Tt=Ot[jt-1].currentPoint,Wt=Ot[jt-1].endTangent;Dt=[],Wt?(Dt.push([Tt[0]-Wt[0],Tt[1]-Wt[1]]),Dt.push([Tt[0],Tt[1]])):(Dt.push([zt[0],zt[1]]),Dt.push([Tt[0],Tt[1]]))}return Dt},xt}(b),it=ct;function _(yt,xt,Ot,jt,Dt){var zt=yt.length;if(zt<2)return!1;for(var Tt=0;Tt<zt-1;Tt++){var Wt=yt[Tt][0],Ht=yt[Tt][1],re=yt[Tt+1][0],pe=yt[Tt+1][1];if(A(Wt,Ht,re,pe,xt,Ot,jt))return!0}if(Dt){var me=yt[0],Se=yt[zt-1];if(A(me[0],me[1],Se[0],Se[1],xt,Ot,jt))return!0}return!1}var R=function(yt){Object(i.b)(xt,yt);function xt(){return yt!==null&&yt.apply(this,arguments)||this}return xt.prototype.isInStrokeOrPath=function(Ot,jt,Dt,zt,Tt){var Wt=this.attr().points,Ht=!1;return Dt&&(Ht=_(Wt,Tt,Ot,jt,!0)),!Ht&&zt&&(Ht=ut(Wt,Ot,jt)),Ht},xt.prototype.createPath=function(Ot){var jt=this.attr(),Dt=jt.points;if(!(Dt.length<2)){Ot.beginPath();for(var zt=0;zt<Dt.length;zt++){var Tt=Dt[zt];zt===0?Ot.moveTo(Tt[0],Tt[1]):Ot.lineTo(Tt[0],Tt[1])}Ot.closePath()}},xt}(b),Q=R,k=function(yt){Object(i.b)(xt,yt);function xt(){return yt!==null&&yt.apply(this,arguments)||this}return xt.prototype.getDefaultAttrs=function(){var Ot=yt.prototype.getDefaultAttrs.call(this);return Object(i.a)(Object(i.a)({},Ot),{startArrow:!1,endArrow:!1})},xt.prototype.initAttrs=function(Ot){this.setArrow()},xt.prototype.onAttrChange=function(Ot,jt,Dt){yt.prototype.onAttrChange.call(this,Ot,jt,Dt),this.setArrow(),["points"].indexOf(Ot)!==-1&&this._resetCache()},xt.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},xt.prototype.setArrow=function(){var Ot=this.attr(),jt=this.attrs,Dt=jt.points,zt=jt.startArrow,Tt=jt.endArrow,Wt=Dt.length,Ht=Dt[0][0],re=Dt[0][1],pe=Dt[Wt-1][0],me=Dt[Wt-1][1];zt&&f.b(this,Ot,Dt[1][0],Dt[1][1],Ht,re),Tt&&f.a(this,Ot,Dt[Wt-2][0],Dt[Wt-2][1],pe,me)},xt.prototype.isFill=function(){return!1},xt.prototype.isInStrokeOrPath=function(Ot,jt,Dt,zt,Tt){if(!Dt||!Tt)return!1;var Wt=this.attr().points;return _(Wt,Tt,Ot,jt,!1)},xt.prototype.isStroke=function(){return!0},xt.prototype.createPath=function(Ot){var jt=this.attr(),Dt=jt.points,zt=jt.startArrow,Tt=jt.endArrow,Wt=Dt.length;if(!(Dt.length<2)){var Ht=Dt[0][0],re=Dt[0][1],pe=Dt[Wt-1][0],me=Dt[Wt-1][1];if(zt&&zt.d){var Se=f.c(Ht,re,Dt[1][0],Dt[1][1],zt.d);Ht+=Se.dx,re+=Se.dy}if(Tt&&Tt.d){var Se=f.c(Dt[Wt-2][0],Dt[Wt-2][1],pe,me,Tt.d);pe-=Se.dx,me-=Se.dy}Ot.beginPath(),Ot.moveTo(Ht,re);for(var Le=0;Le<Wt-1;Le++){var Je=Dt[Le];Ot.lineTo(Je[0],Je[1])}Ot.lineTo(pe,me)}},xt.prototype.afterDrawPath=function(Ot){var jt=this.get("startArrowShape"),Dt=this.get("endArrowShape");jt&&jt.draw(Ot),Dt&&Dt.draw(Ot)},xt.prototype.getTotalLength=function(){var Ot=this.attr().points,jt=this.get("totalLength");return Object(P.isNil)(jt)?(this.set("totalLength",E.d.length(Ot)),this.get("totalLength")):jt},xt.prototype.getPoint=function(Ot){var jt=this.attr().points,Dt=this.get("tCache");Dt||(this._setTcache(),Dt=this.get("tCache"));var zt,Tt;return Object(P.each)(Dt,function(Wt,Ht){Ot>=Wt[0]&&Ot<=Wt[1]&&(zt=(Ot-Wt[0])/(Wt[1]-Wt[0]),Tt=Ht)}),E.c.pointAt(jt[Tt][0],jt[Tt][1],jt[Tt+1][0],jt[Tt+1][1],zt)},xt.prototype._setTcache=function(){var Ot=this.attr().points;if(!(!Ot||Ot.length===0)){var jt=this.getTotalLength();if(!(jt<=0)){var Dt=0,zt=[],Tt,Wt;Object(P.each)(Ot,function(Ht,re){Ot[re+1]&&(Tt=[],Tt[0]=Dt/jt,Wt=E.c.length(Ht[0],Ht[1],Ot[re+1][0],Ot[re+1][1]),Dt+=Wt,Tt[1]=Dt/jt,zt.push(Tt))}),this.set("tCache",zt)}}},xt.prototype.getStartTangent=function(){var Ot=this.attr().points,jt=[];return jt.push([Ot[1][0],Ot[1][1]]),jt.push([Ot[0][0],Ot[0][1]]),jt},xt.prototype.getEndTangent=function(){var Ot=this.attr().points,jt=Ot.length-1,Dt=[];return Dt.push([Ot[jt-1][0],Ot[jt-1][1]]),Dt.push([Ot[jt][0],Ot[jt][1]]),Dt},xt}(b),g=k,O=w("r0DC");function F(yt,xt,Ot,jt,Dt,zt,Tt){var Wt=Dt/2;return Object(t.e)(yt-Wt,xt-Wt,Ot,Dt,zt,Tt)||Object(t.e)(yt+Ot-Wt,xt-Wt,Dt,jt,zt,Tt)||Object(t.e)(yt+Wt,xt+jt-Wt,Ot,Dt,zt,Tt)||Object(t.e)(yt-Wt,xt+Wt,Dt,jt,zt,Tt)}function V(yt,xt,Ot,jt,Dt,zt,Tt,Wt){var Ht=zt/2;return A(yt+Dt,xt,yt+Ot-Dt,xt,zt,Tt,Wt)||A(yt+Ot,xt+Dt,yt+Ot,xt+jt-Dt,zt,Tt,Wt)||A(yt+Ot-Dt,xt+jt,yt+Dt,xt+jt,zt,Tt,Wt)||A(yt,xt+jt-Dt,yt,xt+Dt,zt,Tt,Wt)||St(yt+Ot-Dt,xt+Dt,Dt,1.5*Math.PI,2*Math.PI,zt,Tt,Wt)||St(yt+Ot-Dt,xt+jt-Dt,Dt,0,.5*Math.PI,zt,Tt,Wt)||St(yt+Dt,xt+jt-Dt,Dt,.5*Math.PI,Math.PI,zt,Tt,Wt)||St(yt+Dt,xt+Dt,Dt,Math.PI,1.5*Math.PI,zt,Tt,Wt)}var rt=function(yt){Object(i.b)(xt,yt);function xt(){return yt!==null&&yt.apply(this,arguments)||this}return xt.prototype.getDefaultAttrs=function(){var Ot=yt.prototype.getDefaultAttrs.call(this);return Object(i.a)(Object(i.a)({},Ot),{x:0,y:0,width:0,height:0,radius:0})},xt.prototype.isInStrokeOrPath=function(Ot,jt,Dt,zt,Tt){var Wt=this.attr(),Ht=Wt.x,re=Wt.y,pe=Wt.width,me=Wt.height,Se=Wt.radius;if(Se){var Je=!1;return Dt&&(Je=V(Ht,re,pe,me,Se,Tt,Ot,jt)),!Je&&zt&&(Je=Z(this,Ot,jt)),Je}else{var Le=Tt/2;if(zt&&Dt)return Object(t.e)(Ht-Le,re-Le,pe+Le,me+Le,Ot,jt);if(zt)return Object(t.e)(Ht,re,pe,me,Ot,jt);if(Dt)return F(Ht,re,pe,me,Tt,Ot,jt)}},xt.prototype.createPath=function(Ot){var jt=this.attr(),Dt=jt.x,zt=jt.y,Tt=jt.width,Wt=jt.height,Ht=jt.radius;if(Ot.beginPath(),Ht===0)Ot.rect(Dt,zt,Tt,Wt);else{var re=Object(O.a)(Ht),pe=re[0],me=re[1],Se=re[2],Le=re[3];Ot.moveTo(Dt+pe,zt),Ot.lineTo(Dt+Tt-me,zt),me!==0&&Ot.arc(Dt+Tt-me,zt+me,me,-Math.PI/2,0),Ot.lineTo(Dt+Tt,zt+Wt-Se),Se!==0&&Ot.arc(Dt+Tt-Se,zt+Wt-Se,Se,0,Math.PI/2),Ot.lineTo(Dt+Le,zt+Wt),Le!==0&&Ot.arc(Dt+Le,zt+Wt-Le,Le,Math.PI/2,Math.PI),Ot.lineTo(Dt,zt+pe),pe!==0&&Ot.arc(Dt+pe,zt+pe,pe,Math.PI,Math.PI*1.5),Ot.closePath()}},xt}(b),ot=rt,st=function(yt){Object(i.b)(xt,yt);function xt(){return yt!==null&&yt.apply(this,arguments)||this}return xt.prototype.getDefaultAttrs=function(){var Ot=yt.prototype.getDefaultAttrs.call(this);return Object(i.a)(Object(i.a)({},Ot),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},xt.prototype.isOnlyHitBox=function(){return!0},xt.prototype.initAttrs=function(Ot){this._assembleFont(),Ot.text&&this._setText(Ot.text)},xt.prototype._assembleFont=function(){var Ot=this.attrs;Ot.font=Object(y.assembleFont)(Ot)},xt.prototype._setText=function(Ot){var jt=null;Object(t.k)(Ot)&&Ot.indexOf(`
`)!==-1&&(jt=Ot.split(`
`)),this.set("textArr",jt)},xt.prototype.onAttrChange=function(Ot,jt,Dt){yt.prototype.onAttrChange.call(this,Ot,jt,Dt),Ot.startsWith("font")&&this._assembleFont(),Ot==="text"&&this._setText(jt)},xt.prototype._getSpaceingY=function(){var Ot=this.attrs,jt=Ot.lineHeight,Dt=Ot.fontSize*1;return jt?jt-Dt:Dt*.14},xt.prototype._drawTextArr=function(Ot,jt,Dt){var zt=this.attrs,Tt=zt.textBaseline,Wt=zt.x,Ht=zt.y,re=zt.fontSize*1,pe=this._getSpaceingY(),me=Object(y.getTextHeight)(zt.text,zt.fontSize,zt.lineHeight),Se;Object(t.c)(jt,function(Le,Je){Se=Ht+Je*(pe+re)-me+re,Tt==="middle"&&(Se+=me-re-(me-re)/2),Tt==="top"&&(Se+=me-re),Dt?Ot.fillText(Le,Wt,Se):Ot.strokeText(Le,Wt,Se)})},xt.prototype._drawText=function(Ot,jt){var Dt=this.attr(),zt=Dt.x,Tt=Dt.y,Wt=this.get("textArr");if(Wt)this._drawTextArr(Ot,Wt,jt);else{var Ht=Dt.text;jt?Ot.fillText(Ht,zt,Tt):Ot.strokeText(Ht,zt,Tt)}},xt.prototype.strokeAndFill=function(Ot){var jt=this.attrs,Dt=jt.lineWidth,zt=jt.opacity,Tt=jt.strokeOpacity,Wt=jt.fillOpacity;this.isStroke()&&Dt>0&&(!Object(t.i)(Tt)&&Tt!==1&&(Ot.globalAlpha=zt),this.stroke(Ot)),this.isFill()&&(!Object(t.i)(Wt)&&Wt!==1?(Ot.globalAlpha=Wt,this.fill(Ot),Ot.globalAlpha=zt):this.fill(Ot)),this.afterDrawPath(Ot)},xt.prototype.fill=function(Ot){this._drawText(Ot,!0)},xt.prototype.stroke=function(Ot){this._drawText(Ot,!1)},xt}(b),Mt=st},SZbK:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return H});var H=["#FAAD14","#E8EDF3"]},SfRM:function(qe,Pt,w){var H=w("YESw");function i(){this.__data__=H?H(null):{},this.size=0}qe.exports=i},ShmH:function(qe,Pt,w){var H=w("o0o1");(function(i,y){qe.exports=y()})(this,function(){return function(i){var y={};function t(n){if(y[n])return y[n].exports;var u=y[n]={i:n,l:!1,exports:{}};return i[n].call(u.exports,u,u.exports,t),u.l=!0,u.exports}return t.m=i,t.c=y,t.d=function(n,u,p){t.o(n,u)||Object.defineProperty(n,u,{enumerable:!0,get:p})},t.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,u){if(1&u&&(n=t(n)),8&u||4&u&&typeof n=="object"&&n&&n.__esModule)return n;var p=Object.create(null);if(t.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:n}),2&u&&typeof n!="string")for(var b in n)t.d(p,b,function(c){return n[c]}.bind(null,b));return p},t.n=function(n){var u=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(u,"a",u),u},t.o=function(n,u){return Object.prototype.hasOwnProperty.call(n,u)},t.p="",t(t.s=262)}([function(i,y,t){"use strict";t.d(y,"j",function(){return A}),t.d(y,"k",function(){return j}),t.d(y,"y",function(){return P}),t.d(y,"g",function(){return u}),t.d(y,"J",function(){return W}),t.d(y,"h",function(){return X}),t.d(y,"u",function(){return ft}),t.d(y,"B",function(){return Z}),t.d(y,"G",function(){return pt}),t.d(y,"I",function(){return ut}),t.d(y,"m",function(){return I}),t.d(y,"n",function(){return St}),t.d(y,"o",function(){return K}),t.d(y,"r",function(){return c}),t.d(y,"s",function(){return S}),t.d(y,"t",function(){return $}),t.d(y,"v",function(){return r}),t.d(y,"w",function(){return E}),t.d(y,"x",function(){return x}),t.d(y,"D",function(){return bt}),t.d(y,"b",function(){return wt}),t.d(y,"c",function(){return _}),t.d(y,"d",function(){return R}),t.d(y,"e",function(){return k}),t.d(y,"f",function(){return s}),t.d(y,"l",function(){return g}),t.d(y,"p",function(){return F}),t.d(y,"q",function(){return V}),t.d(y,"z",function(){return rt}),t.d(y,"A",function(){return ct}),t.d(y,"a",function(){return ct}),t.d(y,"i",function(){return ot}),t.d(y,"F",function(){return st}),t.d(y,"H",function(){return yt}),t.d(y,"C",function(){return xt}),t.d(y,"E",function(){return Ot});var n=function(Dt){return Dt!==null&&typeof Dt!="function"&&isFinite(Dt.length)},u=function(Dt,zt){if(!n(Dt))return Dt;for(var Tt=[],Wt=0;Wt<Dt.length;Wt++){var Ht=Dt[Wt];zt(Ht,Wt)&&Tt.push(Ht)}return Tt},p={}.toString,b=function(Dt,zt){return p.call(Dt)==="[object "+zt+"]"},c=function(Dt){return b(Dt,"Function")},S=function(Dt){return Dt==null},I=function(Dt){return Array.isArray?Array.isArray(Dt):b(Dt,"Array")};function m(jt){return(m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Dt){return typeof Dt}:function(Dt){return Dt&&typeof Symbol=="function"&&Dt.constructor===Symbol&&Dt!==Symbol.prototype?"symbol":typeof Dt})(jt)}var r=function(Dt){var zt=m(Dt);return Dt!==null&&zt==="object"||zt==="function"},s=function(Dt,zt){if(Dt){if(I(Dt))for(var Tt=0,Wt=Dt.length;Tt<Wt&&zt(Dt[Tt],Tt)!==!1;Tt++);else if(r(Dt)){for(var Ht in Dt)if(Dt.hasOwnProperty(Ht)&&zt(Dt[Ht],Ht)===!1)break}}};function d(jt){return(d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Dt){return typeof Dt}:function(Dt){return Dt&&typeof Symbol=="function"&&Dt.constructor===Symbol&&Dt!==Symbol.prototype?"symbol":typeof Dt})(jt)}var C=function(Dt){return d(Dt)==="object"&&Dt!==null},E=function(Dt){if(!C(Dt)||!b(Dt,"Object"))return!1;if(Object.getPrototypeOf(Dt)===null)return!0;for(var zt=Dt;Object.getPrototypeOf(zt)!==null;)zt=Object.getPrototypeOf(zt);return Object.getPrototypeOf(Dt)===zt},A=function(Dt){var zt=Dt.filter(function(re){return!isNaN(re)});if(!zt.length)return{min:0,max:0};if(I(Dt[0])){for(var Tt=[],Wt=0;Wt<Dt.length;Wt++)Tt=Tt.concat(Dt[Wt]);zt=Tt}var Ht=Math.max.apply(null,zt);return{min:Math.min.apply(null,zt),max:Ht}},f=Array.prototype,x=(f.splice,f.indexOf,Array.prototype.splice,function(jt){return b(jt,"String")});function j(jt){if(n(jt))return jt[0]}function P(jt){if(n(jt))return jt[jt.length-1]}var W=function(Dt,zt){if(Dt["_wrap_"+zt])return Dt["_wrap_"+zt];var Tt=function(Ht){Dt[zt](Ht)};return Dt["_wrap_"+zt]=Tt,Tt},X=function(Dt,zt){var Tt=zt.toString(),Wt=Tt.indexOf(".");if(Wt===-1)return Math.round(Dt);var Ht=Tt.substr(Wt+1).length;return Ht>20&&(Ht=20),parseFloat(Dt.toFixed(Ht))},$=function(Dt){return b(Dt,"Number")};Number.isInteger&&Number.isInteger;function ft(jt,Dt,zt){return zt===void 0&&(zt=1e-5),Math.abs(jt-Dt)<zt}var Z=function(Dt,zt){return(Dt%zt+zt)%zt},lt=(parseInt,Math.PI/180),pt=function(Dt){return lt*Dt},gt=function(jt){return S(jt)?"":jt.toString()},ut=function(Dt){var zt=gt(Dt);return zt.charAt(0).toUpperCase()+zt.substring(1)},Bt={}.toString,Lt=function(Dt){return Bt.call(Dt).replace(/^\[object /,"").replace(/]$/,"")},St=function(Dt){return b(Dt,"Boolean")},K=function(Dt){return b(Dt,"Date")},dt=Object.prototype,mt=function(Dt){var zt=Dt&&Dt.constructor;return Dt===(typeof zt=="function"&&zt.prototype||dt)};function bt(jt){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Dt){return setTimeout(Dt,16)})(jt)}function wt(jt){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(jt)}function J(jt,Dt){for(var zt in Dt)Dt.hasOwnProperty(zt)&&zt!=="constructor"&&Dt[zt]!==void 0&&(jt[zt]=Dt[zt])}function ct(jt,Dt,zt,Tt){return Dt&&J(jt,Dt),zt&&J(jt,zt),Tt&&J(jt,Tt),jt}function it(jt){return(it=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Dt){return typeof Dt}:function(Dt){return Dt&&typeof Symbol=="function"&&Dt.constructor===Symbol&&Dt!==Symbol.prototype?"symbol":typeof Dt})(jt)}var _=function jt(Dt){if(it(Dt)!=="object"||Dt===null)return Dt;var zt;if(I(Dt)){zt=[];for(var Tt=0,Wt=Dt.length;Tt<Wt;Tt++)it(Dt[Tt])==="object"&&Dt[Tt]!=null?zt[Tt]=jt(Dt[Tt]):zt[Tt]=Dt[Tt]}else for(var Ht in zt={},Dt)it(Dt[Ht])==="object"&&Dt[Ht]!=null?zt[Ht]=jt(Dt[Ht]):zt[Ht]=Dt[Ht];return zt},R=function(Dt,zt,Tt){var Wt;return function(){var Ht=this,re=arguments,pe=function(){Wt=null,Tt||Dt.apply(Ht,re)},me=Tt&&!Wt;clearTimeout(Wt),Wt=setTimeout(pe,zt),me&&Dt.apply(Ht,re)}};function Q(jt,Dt,zt,Tt){for(var Wt in zt=zt||0,Tt=Tt||5,Dt)if(Dt.hasOwnProperty(Wt)){var Ht=Dt[Wt];Ht!==null&&E(Ht)?(E(jt[Wt])||(jt[Wt]={}),zt<Tt?Q(jt[Wt],Ht,zt+1,Tt):jt[Wt]=Dt[Wt]):I(Ht)?(jt[Wt]=[],jt[Wt]=jt[Wt].concat(Ht)):Ht!==void 0&&(jt[Wt]=Ht)}}var k=function(Dt){for(var zt=[],Tt=1;Tt<arguments.length;Tt++)zt[Tt-1]=arguments[Tt];for(var Wt=0;Wt<zt.length;Wt+=1)Q(Dt,zt[Wt]);return Dt},g=function(Dt,zt){if(!n(Dt))return-1;var Tt=Array.prototype.indexOf;if(Tt)return Tt.call(Dt,zt);for(var Wt=-1,Ht=0;Ht<Dt.length;Ht++)if(Dt[Ht]===zt){Wt=Ht;break}return Wt},O=Object.prototype.hasOwnProperty,F=function(Dt){if(S(Dt))return!0;if(n(Dt))return!Dt.length;var zt=Lt(Dt);if(zt==="Map"||zt==="Set")return!Dt.size;if(mt(Dt))return!Object.keys(Dt).length;for(var Tt in Dt)if(O.call(Dt,Tt))return!1;return!0},V=function jt(Dt,zt){if(Dt===zt)return!0;if(!Dt||!zt||x(Dt)||x(zt))return!1;if(n(Dt)||n(zt)){if(Dt.length!==zt.length)return!1;for(var Tt=!0,Wt=0;Wt<Dt.length&&(Tt=jt(Dt[Wt],zt[Wt]));Wt++);return Tt}if(C(Dt)||C(zt)){var Ht=Object.keys(Dt),re=Object.keys(zt);if(Ht.length!==re.length)return!1;for(Tt=!0,Wt=0;Wt<Ht.length&&(Tt=jt(Dt[Ht[Wt]],zt[Ht[Wt]]));Wt++);return Tt}return!1},rt=function(Dt,zt){if(!n(Dt))return Dt;for(var Tt=[],Wt=0;Wt<Dt.length;Wt++){var Ht=Dt[Wt];Tt.push(zt(Ht,Wt))}return Tt},ot=function(Dt,zt,Tt){for(var Wt=0,Ht=x(zt)?zt.split("."):zt;Dt&&Wt<Ht.length;)Dt=Dt[Ht[Wt++]];return Dt===void 0||Wt<Ht.length?Tt:Dt},st=function(jt){return n(jt)?Array.prototype.slice.call(jt):[]},Mt={},yt=function(Dt){return Mt[Dt=Dt||"g"]?Mt[Dt]+=1:Mt[Dt]=1,Dt+Mt[Dt]},xt=function(){};function Ot(jt){return S(jt)?0:n(jt)?jt.length:Object.keys(jt).length}(function(){function jt(){this.map={}}jt.prototype.has=function(Dt){return this.map[Dt]!==void 0},jt.prototype.get=function(Dt,zt){var Tt=this.map[Dt];return Tt===void 0?zt:Tt},jt.prototype.set=function(Dt,zt){this.map[Dt]=zt},jt.prototype.clear=function(){this.map={}},jt.prototype.delete=function(Dt){delete this.map[Dt]},jt.prototype.size=function(){return Object.keys(this.map).length}})()},function(i,y,t){"use strict";t.d(y,"b",function(){return u}),t.d(y,"a",function(){return p}),t.d(y,"c",function(){return b}),t.d(y,"d",function(){return c});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var n=function(I,m){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(r[d]=s[d])})(I,m)};function u(S,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");function m(){this.constructor=S}n(S,I),S.prototype=I===null?Object.create(I):(m.prototype=I.prototype,new m)}var p=function(){return(p=Object.assign||function(I){for(var m,r=1,s=arguments.length;r<s;r++)for(var d in m=arguments[r])Object.prototype.hasOwnProperty.call(m,d)&&(I[d]=m[d]);return I}).apply(this,arguments)};function b(S,I){var m={};for(var r in S)Object.prototype.hasOwnProperty.call(S,r)&&I.indexOf(r)<0&&(m[r]=S[r]);if(S!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(r=Object.getOwnPropertySymbols(S);s<r.length;s++)I.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(S,r[s])&&(m[r[s]]=S[r[s]])}return m}function c(){for(var S=0,I=0,m=arguments.length;I<m;I++)S+=arguments[I].length;var r=Array(S),s=0;for(I=0;I<m;I++)for(var d=arguments[I],C=0,E=d.length;C<E;C++,s++)r[s]=d[C];return r}},function(i,y,t){"use strict";t.d(y,"a",function(){return n}),t.d(y,"b",function(){return u}),t.d(y,"c",function(){return b}),t.d(y,"d",function(){return je}),t.d(y,"e",function(){return Mi}),t.d(y,"f",function(){return p});var n={};t.r(n),t.d(n,"create",function(){return S}),t.d(n,"fromMat4",function(){return I}),t.d(n,"clone",function(){return m}),t.d(n,"copy",function(){return r}),t.d(n,"fromValues",function(){return s}),t.d(n,"set",function(){return d}),t.d(n,"identity",function(){return C}),t.d(n,"transpose",function(){return E}),t.d(n,"invert",function(){return A}),t.d(n,"adjoint",function(){return f}),t.d(n,"determinant",function(){return x}),t.d(n,"multiply",function(){return j}),t.d(n,"translate",function(){return P}),t.d(n,"rotate",function(){return W}),t.d(n,"scale",function(){return X}),t.d(n,"fromTranslation",function(){return $}),t.d(n,"fromRotation",function(){return ft}),t.d(n,"fromScaling",function(){return Z}),t.d(n,"fromMat2d",function(){return lt}),t.d(n,"fromQuat",function(){return pt}),t.d(n,"normalFromMat4",function(){return gt}),t.d(n,"projection",function(){return ut}),t.d(n,"str",function(){return Bt}),t.d(n,"frob",function(){return Lt}),t.d(n,"add",function(){return St}),t.d(n,"subtract",function(){return K}),t.d(n,"multiplyScalar",function(){return dt}),t.d(n,"multiplyScalarAndAdd",function(){return mt}),t.d(n,"exactEquals",function(){return bt}),t.d(n,"equals",function(){return wt}),t.d(n,"mul",function(){return J}),t.d(n,"sub",function(){return ct});var u={};t.r(u),t.d(u,"create",function(){return it}),t.d(u,"clone",function(){return _}),t.d(u,"copy",function(){return R}),t.d(u,"fromValues",function(){return Q}),t.d(u,"set",function(){return k}),t.d(u,"identity",function(){return g}),t.d(u,"transpose",function(){return O}),t.d(u,"invert",function(){return F}),t.d(u,"adjoint",function(){return V}),t.d(u,"determinant",function(){return rt}),t.d(u,"multiply",function(){return ot}),t.d(u,"translate",function(){return st}),t.d(u,"scale",function(){return Mt}),t.d(u,"rotate",function(){return yt}),t.d(u,"rotateX",function(){return xt}),t.d(u,"rotateY",function(){return Ot}),t.d(u,"rotateZ",function(){return jt}),t.d(u,"fromTranslation",function(){return Dt}),t.d(u,"fromScaling",function(){return zt}),t.d(u,"fromRotation",function(){return Tt}),t.d(u,"fromXRotation",function(){return Wt}),t.d(u,"fromYRotation",function(){return Ht}),t.d(u,"fromZRotation",function(){return re}),t.d(u,"fromRotationTranslation",function(){return pe}),t.d(u,"fromQuat2",function(){return me}),t.d(u,"getTranslation",function(){return Se}),t.d(u,"getScaling",function(){return Le}),t.d(u,"getRotation",function(){return Je}),t.d(u,"fromRotationTranslationScale",function(){return On}),t.d(u,"fromRotationTranslationScaleOrigin",function(){return gn}),t.d(u,"fromQuat",function(){return Wn}),t.d(u,"frustum",function(){return kn}),t.d(u,"perspective",function(){return Vn}),t.d(u,"perspectiveFromFieldOfView",function(){return Dn}),t.d(u,"ortho",function(){return Nn}),t.d(u,"lookAt",function(){return Qn}),t.d(u,"targetTo",function(){return ir}),t.d(u,"str",function(){return hr}),t.d(u,"frob",function(){return Sr}),t.d(u,"add",function(){return mr}),t.d(u,"subtract",function(){return dr}),t.d(u,"multiplyScalar",function(){return Br}),t.d(u,"multiplyScalarAndAdd",function(){return ii}),t.d(u,"exactEquals",function(){return mi}),t.d(u,"equals",function(){return Pi}),t.d(u,"mul",function(){return sa}),t.d(u,"sub",function(){return Pa});var p={};t.r(p),t.d(p,"create",function(){return Ki}),t.d(p,"clone",function(){return fa}),t.d(p,"fromValues",function(){return oa}),t.d(p,"copy",function(){return pa}),t.d(p,"set",function(){return La}),t.d(p,"add",function(){return Yr}),t.d(p,"subtract",function(){return Sa}),t.d(p,"multiply",function(){return Pr}),t.d(p,"divide",function(){return si}),t.d(p,"ceil",function(){return ti}),t.d(p,"floor",function(){return $r}),t.d(p,"min",function(){return ui}),t.d(p,"max",function(){return li}),t.d(p,"round",function(){return xi}),t.d(p,"scale",function(){return Ci}),t.d(p,"scaleAndAdd",function(){return di}),t.d(p,"distance",function(){return Ti}),t.d(p,"squaredDistance",function(){return pi}),t.d(p,"length",function(){return Ni}),t.d(p,"squaredLength",function(){return Bi}),t.d(p,"negate",function(){return Fi}),t.d(p,"inverse",function(){return ma}),t.d(p,"normalize",function(){return ua}),t.d(p,"dot",function(){return Ra}),t.d(p,"cross",function(){return xa}),t.d(p,"lerp",function(){return Ma}),t.d(p,"random",function(){return Qi}),t.d(p,"transformMat4",function(){return ka}),t.d(p,"transformQuat",function(){return vo}),t.d(p,"zero",function(){return za}),t.d(p,"str",function(){return Ga}),t.d(p,"exactEquals",function(){return eo}),t.d(p,"equals",function(){return ae}),t.d(p,"sub",function(){return te}),t.d(p,"mul",function(){return Oe}),t.d(p,"div",function(){return Ze}),t.d(p,"dist",function(){return An}),t.d(p,"sqrDist",function(){return qn}),t.d(p,"len",function(){return rr}),t.d(p,"sqrLen",function(){return tn}),t.d(p,"forEach",function(){return sn});var b={};t.r(b),t.d(b,"create",function(){return un}),t.d(b,"identity",function(){return ur}),t.d(b,"setAxisAngle",function(){return jr}),t.d(b,"getAxisAngle",function(){return wr}),t.d(b,"getAngle",function(){return yr}),t.d(b,"multiply",function(){return ni}),t.d(b,"rotateX",function(){return _r}),t.d(b,"rotateY",function(){return Fr}),t.d(b,"rotateZ",function(){return Lr}),t.d(b,"calculateW",function(){return Gr}),t.d(b,"exp",function(){return Hr}),t.d(b,"ln",function(){return ei}),t.d(b,"pow",function(){return Kr}),t.d(b,"slerp",function(){return Qr}),t.d(b,"random",function(){return Oi}),t.d(b,"invert",function(){return Ri}),t.d(b,"conjugate",function(){return Si}),t.d(b,"fromMat3",function(){return Gi}),t.d(b,"fromEuler",function(){return ca}),t.d(b,"str",function(){return ha}),t.d(b,"clone",function(){return vt}),t.d(b,"fromValues",function(){return Gt}),t.d(b,"copy",function(){return Jt}),t.d(b,"set",function(){return ie}),t.d(b,"add",function(){return ue}),t.d(b,"mul",function(){return Ce}),t.d(b,"scale",function(){return we}),t.d(b,"dot",function(){return cn}),t.d(b,"lerp",function(){return Cn}),t.d(b,"length",function(){return _t}),t.d(b,"len",function(){return Xt}),t.d(b,"squaredLength",function(){return Ee}),t.d(b,"sqrLen",function(){return Vt}),t.d(b,"normalize",function(){return ce}),t.d(b,"exactEquals",function(){return yn}),t.d(b,"equals",function(){return Bn}),t.d(b,"rotationTo",function(){return Zn}),t.d(b,"sqlerp",function(){return Kn}),t.d(b,"setAxes",function(){return $e});var c=t(11);function S(){var L=new c.a(9);return c.a!=Float32Array&&(L[1]=0,L[2]=0,L[3]=0,L[5]=0,L[6]=0,L[7]=0),L[0]=1,L[4]=1,L[8]=1,L}function I(L,Et){return L[0]=Et[0],L[1]=Et[1],L[2]=Et[2],L[3]=Et[4],L[4]=Et[5],L[5]=Et[6],L[6]=Et[8],L[7]=Et[9],L[8]=Et[10],L}function m(L){var Et=new c.a(9);return Et[0]=L[0],Et[1]=L[1],Et[2]=L[2],Et[3]=L[3],Et[4]=L[4],Et[5]=L[5],Et[6]=L[6],Et[7]=L[7],Et[8]=L[8],Et}function r(L,Et){return L[0]=Et[0],L[1]=Et[1],L[2]=Et[2],L[3]=Et[3],L[4]=Et[4],L[5]=Et[5],L[6]=Et[6],L[7]=Et[7],L[8]=Et[8],L}function s(L,Et,$t,ye,Zt,de,he,le,Me){var Ve=new c.a(9);return Ve[0]=L,Ve[1]=Et,Ve[2]=$t,Ve[3]=ye,Ve[4]=Zt,Ve[5]=de,Ve[6]=he,Ve[7]=le,Ve[8]=Me,Ve}function d(L,Et,$t,ye,Zt,de,he,le,Me,Ve){return L[0]=Et,L[1]=$t,L[2]=ye,L[3]=Zt,L[4]=de,L[5]=he,L[6]=le,L[7]=Me,L[8]=Ve,L}function C(L){return L[0]=1,L[1]=0,L[2]=0,L[3]=0,L[4]=1,L[5]=0,L[6]=0,L[7]=0,L[8]=1,L}function E(L,Et){if(L===Et){var $t=Et[1],ye=Et[2],Zt=Et[5];L[1]=Et[3],L[2]=Et[6],L[3]=$t,L[5]=Et[7],L[6]=ye,L[7]=Zt}else L[0]=Et[0],L[1]=Et[3],L[2]=Et[6],L[3]=Et[1],L[4]=Et[4],L[5]=Et[7],L[6]=Et[2],L[7]=Et[5],L[8]=Et[8];return L}function A(L,Et){var $t=Et[0],ye=Et[1],Zt=Et[2],de=Et[3],he=Et[4],le=Et[5],Me=Et[6],Ve=Et[7],Ye=Et[8],ke=Ye*he-le*Ve,nn=-Ye*de+le*Me,Re=Ve*de-he*Me,hn=$t*ke+ye*nn+Zt*Re;return hn?(hn=1/hn,L[0]=ke*hn,L[1]=(-Ye*ye+Zt*Ve)*hn,L[2]=(le*ye-Zt*he)*hn,L[3]=nn*hn,L[4]=(Ye*$t-Zt*Me)*hn,L[5]=(-le*$t+Zt*de)*hn,L[6]=Re*hn,L[7]=(-Ve*$t+ye*Me)*hn,L[8]=(he*$t-ye*de)*hn,L):null}function f(L,Et){var $t=Et[0],ye=Et[1],Zt=Et[2],de=Et[3],he=Et[4],le=Et[5],Me=Et[6],Ve=Et[7],Ye=Et[8];return L[0]=he*Ye-le*Ve,L[1]=Zt*Ve-ye*Ye,L[2]=ye*le-Zt*he,L[3]=le*Me-de*Ye,L[4]=$t*Ye-Zt*Me,L[5]=Zt*de-$t*le,L[6]=de*Ve-he*Me,L[7]=ye*Me-$t*Ve,L[8]=$t*he-ye*de,L}function x(L){var Et=L[0],$t=L[1],ye=L[2],Zt=L[3],de=L[4],he=L[5],le=L[6],Me=L[7],Ve=L[8];return Et*(Ve*de-he*Me)+$t*(-Ve*Zt+he*le)+ye*(Me*Zt-de*le)}function j(L,Et,$t){var ye=Et[0],Zt=Et[1],de=Et[2],he=Et[3],le=Et[4],Me=Et[5],Ve=Et[6],Ye=Et[7],ke=Et[8],nn=$t[0],Re=$t[1],hn=$t[2],pn=$t[3],on=$t[4],mn=$t[5],jn=$t[6],Ie=$t[7],fe=$t[8];return L[0]=nn*ye+Re*he+hn*Ve,L[1]=nn*Zt+Re*le+hn*Ye,L[2]=nn*de+Re*Me+hn*ke,L[3]=pn*ye+on*he+mn*Ve,L[4]=pn*Zt+on*le+mn*Ye,L[5]=pn*de+on*Me+mn*ke,L[6]=jn*ye+Ie*he+fe*Ve,L[7]=jn*Zt+Ie*le+fe*Ye,L[8]=jn*de+Ie*Me+fe*ke,L}function P(L,Et,$t){var ye=Et[0],Zt=Et[1],de=Et[2],he=Et[3],le=Et[4],Me=Et[5],Ve=Et[6],Ye=Et[7],ke=Et[8],nn=$t[0],Re=$t[1];return L[0]=ye,L[1]=Zt,L[2]=de,L[3]=he,L[4]=le,L[5]=Me,L[6]=nn*ye+Re*he+Ve,L[7]=nn*Zt+Re*le+Ye,L[8]=nn*de+Re*Me+ke,L}function W(L,Et,$t){var ye=Et[0],Zt=Et[1],de=Et[2],he=Et[3],le=Et[4],Me=Et[5],Ve=Et[6],Ye=Et[7],ke=Et[8],nn=Math.sin($t),Re=Math.cos($t);return L[0]=Re*ye+nn*he,L[1]=Re*Zt+nn*le,L[2]=Re*de+nn*Me,L[3]=Re*he-nn*ye,L[4]=Re*le-nn*Zt,L[5]=Re*Me-nn*de,L[6]=Ve,L[7]=Ye,L[8]=ke,L}function X(L,Et,$t){var ye=$t[0],Zt=$t[1];return L[0]=ye*Et[0],L[1]=ye*Et[1],L[2]=ye*Et[2],L[3]=Zt*Et[3],L[4]=Zt*Et[4],L[5]=Zt*Et[5],L[6]=Et[6],L[7]=Et[7],L[8]=Et[8],L}function $(L,Et){return L[0]=1,L[1]=0,L[2]=0,L[3]=0,L[4]=1,L[5]=0,L[6]=Et[0],L[7]=Et[1],L[8]=1,L}function ft(L,Et){var $t=Math.sin(Et),ye=Math.cos(Et);return L[0]=ye,L[1]=$t,L[2]=0,L[3]=-$t,L[4]=ye,L[5]=0,L[6]=0,L[7]=0,L[8]=1,L}function Z(L,Et){return L[0]=Et[0],L[1]=0,L[2]=0,L[3]=0,L[4]=Et[1],L[5]=0,L[6]=0,L[7]=0,L[8]=1,L}function lt(L,Et){return L[0]=Et[0],L[1]=Et[1],L[2]=0,L[3]=Et[2],L[4]=Et[3],L[5]=0,L[6]=Et[4],L[7]=Et[5],L[8]=1,L}function pt(L,Et){var $t=Et[0],ye=Et[1],Zt=Et[2],de=Et[3],he=$t+$t,le=ye+ye,Me=Zt+Zt,Ve=$t*he,Ye=ye*he,ke=ye*le,nn=Zt*he,Re=Zt*le,hn=Zt*Me,pn=de*he,on=de*le,mn=de*Me;return L[0]=1-ke-hn,L[3]=Ye-mn,L[6]=nn+on,L[1]=Ye+mn,L[4]=1-Ve-hn,L[7]=Re-pn,L[2]=nn-on,L[5]=Re+pn,L[8]=1-Ve-ke,L}function gt(L,Et){var $t=Et[0],ye=Et[1],Zt=Et[2],de=Et[3],he=Et[4],le=Et[5],Me=Et[6],Ve=Et[7],Ye=Et[8],ke=Et[9],nn=Et[10],Re=Et[11],hn=Et[12],pn=Et[13],on=Et[14],mn=Et[15],jn=$t*le-ye*he,Ie=$t*Me-Zt*he,fe=$t*Ve-de*he,Ne=ye*Me-Zt*le,Fe=ye*Ve-de*le,rn=Zt*Ve-de*Me,ln=Ye*pn-ke*hn,_e=Ye*on-nn*hn,dn=Ye*mn-Re*hn,Sn=ke*on-nn*pn,tr=ke*mn-Re*pn,Pn=nn*mn-Re*on,Fn=jn*Pn-Ie*tr+fe*Sn+Ne*dn-Fe*_e+rn*ln;return Fn?(Fn=1/Fn,L[0]=(le*Pn-Me*tr+Ve*Sn)*Fn,L[1]=(Me*dn-he*Pn-Ve*_e)*Fn,L[2]=(he*tr-le*dn+Ve*ln)*Fn,L[3]=(Zt*tr-ye*Pn-de*Sn)*Fn,L[4]=($t*Pn-Zt*dn+de*_e)*Fn,L[5]=(ye*dn-$t*tr-de*ln)*Fn,L[6]=(pn*rn-on*Fe+mn*Ne)*Fn,L[7]=(on*fe-hn*rn-mn*Ie)*Fn,L[8]=(hn*Fe-pn*fe+mn*jn)*Fn,L):null}function ut(L,Et,$t){return L[0]=2/Et,L[1]=0,L[2]=0,L[3]=0,L[4]=-2/$t,L[5]=0,L[6]=-1,L[7]=1,L[8]=1,L}function Bt(L){return"mat3("+L[0]+", "+L[1]+", "+L[2]+", "+L[3]+", "+L[4]+", "+L[5]+", "+L[6]+", "+L[7]+", "+L[8]+")"}function Lt(L){return Math.hypot(L[0],L[1],L[2],L[3],L[4],L[5],L[6],L[7],L[8])}function St(L,Et,$t){return L[0]=Et[0]+$t[0],L[1]=Et[1]+$t[1],L[2]=Et[2]+$t[2],L[3]=Et[3]+$t[3],L[4]=Et[4]+$t[4],L[5]=Et[5]+$t[5],L[6]=Et[6]+$t[6],L[7]=Et[7]+$t[7],L[8]=Et[8]+$t[8],L}function K(L,Et,$t){return L[0]=Et[0]-$t[0],L[1]=Et[1]-$t[1],L[2]=Et[2]-$t[2],L[3]=Et[3]-$t[3],L[4]=Et[4]-$t[4],L[5]=Et[5]-$t[5],L[6]=Et[6]-$t[6],L[7]=Et[7]-$t[7],L[8]=Et[8]-$t[8],L}function dt(L,Et,$t){return L[0]=Et[0]*$t,L[1]=Et[1]*$t,L[2]=Et[2]*$t,L[3]=Et[3]*$t,L[4]=Et[4]*$t,L[5]=Et[5]*$t,L[6]=Et[6]*$t,L[7]=Et[7]*$t,L[8]=Et[8]*$t,L}function mt(L,Et,$t,ye){return L[0]=Et[0]+$t[0]*ye,L[1]=Et[1]+$t[1]*ye,L[2]=Et[2]+$t[2]*ye,L[3]=Et[3]+$t[3]*ye,L[4]=Et[4]+$t[4]*ye,L[5]=Et[5]+$t[5]*ye,L[6]=Et[6]+$t[6]*ye,L[7]=Et[7]+$t[7]*ye,L[8]=Et[8]+$t[8]*ye,L}function bt(L,Et){return L[0]===Et[0]&&L[1]===Et[1]&&L[2]===Et[2]&&L[3]===Et[3]&&L[4]===Et[4]&&L[5]===Et[5]&&L[6]===Et[6]&&L[7]===Et[7]&&L[8]===Et[8]}function wt(L,Et){var $t=L[0],ye=L[1],Zt=L[2],de=L[3],he=L[4],le=L[5],Me=L[6],Ve=L[7],Ye=L[8],ke=Et[0],nn=Et[1],Re=Et[2],hn=Et[3],pn=Et[4],on=Et[5],mn=Et[6],jn=Et[7],Ie=Et[8];return Math.abs($t-ke)<=c.b*Math.max(1,Math.abs($t),Math.abs(ke))&&Math.abs(ye-nn)<=c.b*Math.max(1,Math.abs(ye),Math.abs(nn))&&Math.abs(Zt-Re)<=c.b*Math.max(1,Math.abs(Zt),Math.abs(Re))&&Math.abs(de-hn)<=c.b*Math.max(1,Math.abs(de),Math.abs(hn))&&Math.abs(he-pn)<=c.b*Math.max(1,Math.abs(he),Math.abs(pn))&&Math.abs(le-on)<=c.b*Math.max(1,Math.abs(le),Math.abs(on))&&Math.abs(Me-mn)<=c.b*Math.max(1,Math.abs(Me),Math.abs(mn))&&Math.abs(Ve-jn)<=c.b*Math.max(1,Math.abs(Ve),Math.abs(jn))&&Math.abs(Ye-Ie)<=c.b*Math.max(1,Math.abs(Ye),Math.abs(Ie))}var J=j,ct=K;function it(){var L=new c.a(16);return c.a!=Float32Array&&(L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[11]=0,L[12]=0,L[13]=0,L[14]=0),L[0]=1,L[5]=1,L[10]=1,L[15]=1,L}function _(L){var Et=new c.a(16);return Et[0]=L[0],Et[1]=L[1],Et[2]=L[2],Et[3]=L[3],Et[4]=L[4],Et[5]=L[5],Et[6]=L[6],Et[7]=L[7],Et[8]=L[8],Et[9]=L[9],Et[10]=L[10],Et[11]=L[11],Et[12]=L[12],Et[13]=L[13],Et[14]=L[14],Et[15]=L[15],Et}function R(L,Et){return L[0]=Et[0],L[1]=Et[1],L[2]=Et[2],L[3]=Et[3],L[4]=Et[4],L[5]=Et[5],L[6]=Et[6],L[7]=Et[7],L[8]=Et[8],L[9]=Et[9],L[10]=Et[10],L[11]=Et[11],L[12]=Et[12],L[13]=Et[13],L[14]=Et[14],L[15]=Et[15],L}function Q(L,Et,$t,ye,Zt,de,he,le,Me,Ve,Ye,ke,nn,Re,hn,pn){var on=new c.a(16);return on[0]=L,on[1]=Et,on[2]=$t,on[3]=ye,on[4]=Zt,on[5]=de,on[6]=he,on[7]=le,on[8]=Me,on[9]=Ve,on[10]=Ye,on[11]=ke,on[12]=nn,on[13]=Re,on[14]=hn,on[15]=pn,on}function k(L,Et,$t,ye,Zt,de,he,le,Me,Ve,Ye,ke,nn,Re,hn,pn,on){return L[0]=Et,L[1]=$t,L[2]=ye,L[3]=Zt,L[4]=de,L[5]=he,L[6]=le,L[7]=Me,L[8]=Ve,L[9]=Ye,L[10]=ke,L[11]=nn,L[12]=Re,L[13]=hn,L[14]=pn,L[15]=on,L}function g(L){return L[0]=1,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=1,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=1,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}function O(L,Et){if(L===Et){var $t=Et[1],ye=Et[2],Zt=Et[3],de=Et[6],he=Et[7],le=Et[11];L[1]=Et[4],L[2]=Et[8],L[3]=Et[12],L[4]=$t,L[6]=Et[9],L[7]=Et[13],L[8]=ye,L[9]=de,L[11]=Et[14],L[12]=Zt,L[13]=he,L[14]=le}else L[0]=Et[0],L[1]=Et[4],L[2]=Et[8],L[3]=Et[12],L[4]=Et[1],L[5]=Et[5],L[6]=Et[9],L[7]=Et[13],L[8]=Et[2],L[9]=Et[6],L[10]=Et[10],L[11]=Et[14],L[12]=Et[3],L[13]=Et[7],L[14]=Et[11],L[15]=Et[15];return L}function F(L,Et){var $t=Et[0],ye=Et[1],Zt=Et[2],de=Et[3],he=Et[4],le=Et[5],Me=Et[6],Ve=Et[7],Ye=Et[8],ke=Et[9],nn=Et[10],Re=Et[11],hn=Et[12],pn=Et[13],on=Et[14],mn=Et[15],jn=$t*le-ye*he,Ie=$t*Me-Zt*he,fe=$t*Ve-de*he,Ne=ye*Me-Zt*le,Fe=ye*Ve-de*le,rn=Zt*Ve-de*Me,ln=Ye*pn-ke*hn,_e=Ye*on-nn*hn,dn=Ye*mn-Re*hn,Sn=ke*on-nn*pn,tr=ke*mn-Re*pn,Pn=nn*mn-Re*on,Fn=jn*Pn-Ie*tr+fe*Sn+Ne*dn-Fe*_e+rn*ln;return Fn?(Fn=1/Fn,L[0]=(le*Pn-Me*tr+Ve*Sn)*Fn,L[1]=(Zt*tr-ye*Pn-de*Sn)*Fn,L[2]=(pn*rn-on*Fe+mn*Ne)*Fn,L[3]=(nn*Fe-ke*rn-Re*Ne)*Fn,L[4]=(Me*dn-he*Pn-Ve*_e)*Fn,L[5]=($t*Pn-Zt*dn+de*_e)*Fn,L[6]=(on*fe-hn*rn-mn*Ie)*Fn,L[7]=(Ye*rn-nn*fe+Re*Ie)*Fn,L[8]=(he*tr-le*dn+Ve*ln)*Fn,L[9]=(ye*dn-$t*tr-de*ln)*Fn,L[10]=(hn*Fe-pn*fe+mn*jn)*Fn,L[11]=(ke*fe-Ye*Fe-Re*jn)*Fn,L[12]=(le*_e-he*Sn-Me*ln)*Fn,L[13]=($t*Sn-ye*_e+Zt*ln)*Fn,L[14]=(pn*Ie-hn*Ne-on*jn)*Fn,L[15]=(Ye*Ne-ke*Ie+nn*jn)*Fn,L):null}function V(L,Et){var $t=Et[0],ye=Et[1],Zt=Et[2],de=Et[3],he=Et[4],le=Et[5],Me=Et[6],Ve=Et[7],Ye=Et[8],ke=Et[9],nn=Et[10],Re=Et[11],hn=Et[12],pn=Et[13],on=Et[14],mn=Et[15];return L[0]=le*(nn*mn-Re*on)-ke*(Me*mn-Ve*on)+pn*(Me*Re-Ve*nn),L[1]=-(ye*(nn*mn-Re*on)-ke*(Zt*mn-de*on)+pn*(Zt*Re-de*nn)),L[2]=ye*(Me*mn-Ve*on)-le*(Zt*mn-de*on)+pn*(Zt*Ve-de*Me),L[3]=-(ye*(Me*Re-Ve*nn)-le*(Zt*Re-de*nn)+ke*(Zt*Ve-de*Me)),L[4]=-(he*(nn*mn-Re*on)-Ye*(Me*mn-Ve*on)+hn*(Me*Re-Ve*nn)),L[5]=$t*(nn*mn-Re*on)-Ye*(Zt*mn-de*on)+hn*(Zt*Re-de*nn),L[6]=-($t*(Me*mn-Ve*on)-he*(Zt*mn-de*on)+hn*(Zt*Ve-de*Me)),L[7]=$t*(Me*Re-Ve*nn)-he*(Zt*Re-de*nn)+Ye*(Zt*Ve-de*Me),L[8]=he*(ke*mn-Re*pn)-Ye*(le*mn-Ve*pn)+hn*(le*Re-Ve*ke),L[9]=-($t*(ke*mn-Re*pn)-Ye*(ye*mn-de*pn)+hn*(ye*Re-de*ke)),L[10]=$t*(le*mn-Ve*pn)-he*(ye*mn-de*pn)+hn*(ye*Ve-de*le),L[11]=-($t*(le*Re-Ve*ke)-he*(ye*Re-de*ke)+Ye*(ye*Ve-de*le)),L[12]=-(he*(ke*on-nn*pn)-Ye*(le*on-Me*pn)+hn*(le*nn-Me*ke)),L[13]=$t*(ke*on-nn*pn)-Ye*(ye*on-Zt*pn)+hn*(ye*nn-Zt*ke),L[14]=-($t*(le*on-Me*pn)-he*(ye*on-Zt*pn)+hn*(ye*Me-Zt*le)),L[15]=$t*(le*nn-Me*ke)-he*(ye*nn-Zt*ke)+Ye*(ye*Me-Zt*le),L}function rt(L){var Et=L[0],$t=L[1],ye=L[2],Zt=L[3],de=L[4],he=L[5],le=L[6],Me=L[7],Ve=L[8],Ye=L[9],ke=L[10],nn=L[11],Re=L[12],hn=L[13],pn=L[14],on=L[15];return(Et*he-$t*de)*(ke*on-nn*pn)-(Et*le-ye*de)*(Ye*on-nn*hn)+(Et*Me-Zt*de)*(Ye*pn-ke*hn)+($t*le-ye*he)*(Ve*on-nn*Re)-($t*Me-Zt*he)*(Ve*pn-ke*Re)+(ye*Me-Zt*le)*(Ve*hn-Ye*Re)}function ot(L,Et,$t){var ye=Et[0],Zt=Et[1],de=Et[2],he=Et[3],le=Et[4],Me=Et[5],Ve=Et[6],Ye=Et[7],ke=Et[8],nn=Et[9],Re=Et[10],hn=Et[11],pn=Et[12],on=Et[13],mn=Et[14],jn=Et[15],Ie=$t[0],fe=$t[1],Ne=$t[2],Fe=$t[3];return L[0]=Ie*ye+fe*le+Ne*ke+Fe*pn,L[1]=Ie*Zt+fe*Me+Ne*nn+Fe*on,L[2]=Ie*de+fe*Ve+Ne*Re+Fe*mn,L[3]=Ie*he+fe*Ye+Ne*hn+Fe*jn,Ie=$t[4],fe=$t[5],Ne=$t[6],Fe=$t[7],L[4]=Ie*ye+fe*le+Ne*ke+Fe*pn,L[5]=Ie*Zt+fe*Me+Ne*nn+Fe*on,L[6]=Ie*de+fe*Ve+Ne*Re+Fe*mn,L[7]=Ie*he+fe*Ye+Ne*hn+Fe*jn,Ie=$t[8],fe=$t[9],Ne=$t[10],Fe=$t[11],L[8]=Ie*ye+fe*le+Ne*ke+Fe*pn,L[9]=Ie*Zt+fe*Me+Ne*nn+Fe*on,L[10]=Ie*de+fe*Ve+Ne*Re+Fe*mn,L[11]=Ie*he+fe*Ye+Ne*hn+Fe*jn,Ie=$t[12],fe=$t[13],Ne=$t[14],Fe=$t[15],L[12]=Ie*ye+fe*le+Ne*ke+Fe*pn,L[13]=Ie*Zt+fe*Me+Ne*nn+Fe*on,L[14]=Ie*de+fe*Ve+Ne*Re+Fe*mn,L[15]=Ie*he+fe*Ye+Ne*hn+Fe*jn,L}function st(L,Et,$t){var ye,Zt,de,he,le,Me,Ve,Ye,ke,nn,Re,hn,pn=$t[0],on=$t[1],mn=$t[2];return Et===L?(L[12]=Et[0]*pn+Et[4]*on+Et[8]*mn+Et[12],L[13]=Et[1]*pn+Et[5]*on+Et[9]*mn+Et[13],L[14]=Et[2]*pn+Et[6]*on+Et[10]*mn+Et[14],L[15]=Et[3]*pn+Et[7]*on+Et[11]*mn+Et[15]):(ye=Et[0],Zt=Et[1],de=Et[2],he=Et[3],le=Et[4],Me=Et[5],Ve=Et[6],Ye=Et[7],ke=Et[8],nn=Et[9],Re=Et[10],hn=Et[11],L[0]=ye,L[1]=Zt,L[2]=de,L[3]=he,L[4]=le,L[5]=Me,L[6]=Ve,L[7]=Ye,L[8]=ke,L[9]=nn,L[10]=Re,L[11]=hn,L[12]=ye*pn+le*on+ke*mn+Et[12],L[13]=Zt*pn+Me*on+nn*mn+Et[13],L[14]=de*pn+Ve*on+Re*mn+Et[14],L[15]=he*pn+Ye*on+hn*mn+Et[15]),L}function Mt(L,Et,$t){var ye=$t[0],Zt=$t[1],de=$t[2];return L[0]=Et[0]*ye,L[1]=Et[1]*ye,L[2]=Et[2]*ye,L[3]=Et[3]*ye,L[4]=Et[4]*Zt,L[5]=Et[5]*Zt,L[6]=Et[6]*Zt,L[7]=Et[7]*Zt,L[8]=Et[8]*de,L[9]=Et[9]*de,L[10]=Et[10]*de,L[11]=Et[11]*de,L[12]=Et[12],L[13]=Et[13],L[14]=Et[14],L[15]=Et[15],L}function yt(L,Et,$t,ye){var Zt,de,he,le,Me,Ve,Ye,ke,nn,Re,hn,pn,on,mn,jn,Ie,fe,Ne,Fe,rn,ln,_e,dn,Sn,tr=ye[0],Pn=ye[1],Fn=ye[2],Cr=Math.hypot(tr,Pn,Fn);return Cr<c.b?null:(tr*=Cr=1/Cr,Pn*=Cr,Fn*=Cr,Zt=Math.sin($t),he=1-(de=Math.cos($t)),le=Et[0],Me=Et[1],Ve=Et[2],Ye=Et[3],ke=Et[4],nn=Et[5],Re=Et[6],hn=Et[7],pn=Et[8],on=Et[9],mn=Et[10],jn=Et[11],Ie=tr*tr*he+de,fe=Pn*tr*he+Fn*Zt,Ne=Fn*tr*he-Pn*Zt,Fe=tr*Pn*he-Fn*Zt,rn=Pn*Pn*he+de,ln=Fn*Pn*he+tr*Zt,_e=tr*Fn*he+Pn*Zt,dn=Pn*Fn*he-tr*Zt,Sn=Fn*Fn*he+de,L[0]=le*Ie+ke*fe+pn*Ne,L[1]=Me*Ie+nn*fe+on*Ne,L[2]=Ve*Ie+Re*fe+mn*Ne,L[3]=Ye*Ie+hn*fe+jn*Ne,L[4]=le*Fe+ke*rn+pn*ln,L[5]=Me*Fe+nn*rn+on*ln,L[6]=Ve*Fe+Re*rn+mn*ln,L[7]=Ye*Fe+hn*rn+jn*ln,L[8]=le*_e+ke*dn+pn*Sn,L[9]=Me*_e+nn*dn+on*Sn,L[10]=Ve*_e+Re*dn+mn*Sn,L[11]=Ye*_e+hn*dn+jn*Sn,Et!==L&&(L[12]=Et[12],L[13]=Et[13],L[14]=Et[14],L[15]=Et[15]),L)}function xt(L,Et,$t){var ye=Math.sin($t),Zt=Math.cos($t),de=Et[4],he=Et[5],le=Et[6],Me=Et[7],Ve=Et[8],Ye=Et[9],ke=Et[10],nn=Et[11];return Et!==L&&(L[0]=Et[0],L[1]=Et[1],L[2]=Et[2],L[3]=Et[3],L[12]=Et[12],L[13]=Et[13],L[14]=Et[14],L[15]=Et[15]),L[4]=de*Zt+Ve*ye,L[5]=he*Zt+Ye*ye,L[6]=le*Zt+ke*ye,L[7]=Me*Zt+nn*ye,L[8]=Ve*Zt-de*ye,L[9]=Ye*Zt-he*ye,L[10]=ke*Zt-le*ye,L[11]=nn*Zt-Me*ye,L}function Ot(L,Et,$t){var ye=Math.sin($t),Zt=Math.cos($t),de=Et[0],he=Et[1],le=Et[2],Me=Et[3],Ve=Et[8],Ye=Et[9],ke=Et[10],nn=Et[11];return Et!==L&&(L[4]=Et[4],L[5]=Et[5],L[6]=Et[6],L[7]=Et[7],L[12]=Et[12],L[13]=Et[13],L[14]=Et[14],L[15]=Et[15]),L[0]=de*Zt-Ve*ye,L[1]=he*Zt-Ye*ye,L[2]=le*Zt-ke*ye,L[3]=Me*Zt-nn*ye,L[8]=de*ye+Ve*Zt,L[9]=he*ye+Ye*Zt,L[10]=le*ye+ke*Zt,L[11]=Me*ye+nn*Zt,L}function jt(L,Et,$t){var ye=Math.sin($t),Zt=Math.cos($t),de=Et[0],he=Et[1],le=Et[2],Me=Et[3],Ve=Et[4],Ye=Et[5],ke=Et[6],nn=Et[7];return Et!==L&&(L[8]=Et[8],L[9]=Et[9],L[10]=Et[10],L[11]=Et[11],L[12]=Et[12],L[13]=Et[13],L[14]=Et[14],L[15]=Et[15]),L[0]=de*Zt+Ve*ye,L[1]=he*Zt+Ye*ye,L[2]=le*Zt+ke*ye,L[3]=Me*Zt+nn*ye,L[4]=Ve*Zt-de*ye,L[5]=Ye*Zt-he*ye,L[6]=ke*Zt-le*ye,L[7]=nn*Zt-Me*ye,L}function Dt(L,Et){return L[0]=1,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=1,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=1,L[11]=0,L[12]=Et[0],L[13]=Et[1],L[14]=Et[2],L[15]=1,L}function zt(L,Et){return L[0]=Et[0],L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=Et[1],L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=Et[2],L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}function Tt(L,Et,$t){var ye,Zt,de,he=$t[0],le=$t[1],Me=$t[2],Ve=Math.hypot(he,le,Me);return Ve<c.b?null:(he*=Ve=1/Ve,le*=Ve,Me*=Ve,ye=Math.sin(Et),de=1-(Zt=Math.cos(Et)),L[0]=he*he*de+Zt,L[1]=le*he*de+Me*ye,L[2]=Me*he*de-le*ye,L[3]=0,L[4]=he*le*de-Me*ye,L[5]=le*le*de+Zt,L[6]=Me*le*de+he*ye,L[7]=0,L[8]=he*Me*de+le*ye,L[9]=le*Me*de-he*ye,L[10]=Me*Me*de+Zt,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L)}function Wt(L,Et){var $t=Math.sin(Et),ye=Math.cos(Et);return L[0]=1,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=ye,L[6]=$t,L[7]=0,L[8]=0,L[9]=-$t,L[10]=ye,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}function Ht(L,Et){var $t=Math.sin(Et),ye=Math.cos(Et);return L[0]=ye,L[1]=0,L[2]=-$t,L[3]=0,L[4]=0,L[5]=1,L[6]=0,L[7]=0,L[8]=$t,L[9]=0,L[10]=ye,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}function re(L,Et){var $t=Math.sin(Et),ye=Math.cos(Et);return L[0]=ye,L[1]=$t,L[2]=0,L[3]=0,L[4]=-$t,L[5]=ye,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=1,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}function pe(L,Et,$t){var ye=Et[0],Zt=Et[1],de=Et[2],he=Et[3],le=ye+ye,Me=Zt+Zt,Ve=de+de,Ye=ye*le,ke=ye*Me,nn=ye*Ve,Re=Zt*Me,hn=Zt*Ve,pn=de*Ve,on=he*le,mn=he*Me,jn=he*Ve;return L[0]=1-(Re+pn),L[1]=ke+jn,L[2]=nn-mn,L[3]=0,L[4]=ke-jn,L[5]=1-(Ye+pn),L[6]=hn+on,L[7]=0,L[8]=nn+mn,L[9]=hn-on,L[10]=1-(Ye+Re),L[11]=0,L[12]=$t[0],L[13]=$t[1],L[14]=$t[2],L[15]=1,L}function me(L,Et){var $t=new c.a(3),ye=-Et[0],Zt=-Et[1],de=-Et[2],he=Et[3],le=Et[4],Me=Et[5],Ve=Et[6],Ye=Et[7],ke=ye*ye+Zt*Zt+de*de+he*he;return ke>0?($t[0]=2*(le*he+Ye*ye+Me*de-Ve*Zt)/ke,$t[1]=2*(Me*he+Ye*Zt+Ve*ye-le*de)/ke,$t[2]=2*(Ve*he+Ye*de+le*Zt-Me*ye)/ke):($t[0]=2*(le*he+Ye*ye+Me*de-Ve*Zt),$t[1]=2*(Me*he+Ye*Zt+Ve*ye-le*de),$t[2]=2*(Ve*he+Ye*de+le*Zt-Me*ye)),pe(L,Et,$t),L}function Se(L,Et){return L[0]=Et[12],L[1]=Et[13],L[2]=Et[14],L}function Le(L,Et){var $t=Et[0],ye=Et[1],Zt=Et[2],de=Et[4],he=Et[5],le=Et[6],Me=Et[8],Ve=Et[9],Ye=Et[10];return L[0]=Math.hypot($t,ye,Zt),L[1]=Math.hypot(de,he,le),L[2]=Math.hypot(Me,Ve,Ye),L}function Je(L,Et){var $t=new c.a(3);Le($t,Et);var ye=1/$t[0],Zt=1/$t[1],de=1/$t[2],he=Et[0]*ye,le=Et[1]*Zt,Me=Et[2]*de,Ve=Et[4]*ye,Ye=Et[5]*Zt,ke=Et[6]*de,nn=Et[8]*ye,Re=Et[9]*Zt,hn=Et[10]*de,pn=he+Ye+hn,on=0;return pn>0?(on=2*Math.sqrt(pn+1),L[3]=.25*on,L[0]=(ke-Re)/on,L[1]=(nn-Me)/on,L[2]=(le-Ve)/on):he>Ye&&he>hn?(on=2*Math.sqrt(1+he-Ye-hn),L[3]=(ke-Re)/on,L[0]=.25*on,L[1]=(le+Ve)/on,L[2]=(nn+Me)/on):Ye>hn?(on=2*Math.sqrt(1+Ye-he-hn),L[3]=(nn-Me)/on,L[0]=(le+Ve)/on,L[1]=.25*on,L[2]=(ke+Re)/on):(on=2*Math.sqrt(1+hn-he-Ye),L[3]=(le-Ve)/on,L[0]=(nn+Me)/on,L[1]=(ke+Re)/on,L[2]=.25*on),L}function On(L,Et,$t,ye){var Zt=Et[0],de=Et[1],he=Et[2],le=Et[3],Me=Zt+Zt,Ve=de+de,Ye=he+he,ke=Zt*Me,nn=Zt*Ve,Re=Zt*Ye,hn=de*Ve,pn=de*Ye,on=he*Ye,mn=le*Me,jn=le*Ve,Ie=le*Ye,fe=ye[0],Ne=ye[1],Fe=ye[2];return L[0]=(1-(hn+on))*fe,L[1]=(nn+Ie)*fe,L[2]=(Re-jn)*fe,L[3]=0,L[4]=(nn-Ie)*Ne,L[5]=(1-(ke+on))*Ne,L[6]=(pn+mn)*Ne,L[7]=0,L[8]=(Re+jn)*Fe,L[9]=(pn-mn)*Fe,L[10]=(1-(ke+hn))*Fe,L[11]=0,L[12]=$t[0],L[13]=$t[1],L[14]=$t[2],L[15]=1,L}function gn(L,Et,$t,ye,Zt){var de=Et[0],he=Et[1],le=Et[2],Me=Et[3],Ve=de+de,Ye=he+he,ke=le+le,nn=de*Ve,Re=de*Ye,hn=de*ke,pn=he*Ye,on=he*ke,mn=le*ke,jn=Me*Ve,Ie=Me*Ye,fe=Me*ke,Ne=ye[0],Fe=ye[1],rn=ye[2],ln=Zt[0],_e=Zt[1],dn=Zt[2],Sn=(1-(pn+mn))*Ne,tr=(Re+fe)*Ne,Pn=(hn-Ie)*Ne,Fn=(Re-fe)*Fe,Cr=(1-(nn+mn))*Fe,fi=(on+jn)*Fe,ri=(hn+Ie)*rn,zr=(on-jn)*rn,wi=(1-(nn+pn))*rn;return L[0]=Sn,L[1]=tr,L[2]=Pn,L[3]=0,L[4]=Fn,L[5]=Cr,L[6]=fi,L[7]=0,L[8]=ri,L[9]=zr,L[10]=wi,L[11]=0,L[12]=$t[0]+ln-(Sn*ln+Fn*_e+ri*dn),L[13]=$t[1]+_e-(tr*ln+Cr*_e+zr*dn),L[14]=$t[2]+dn-(Pn*ln+fi*_e+wi*dn),L[15]=1,L}function Wn(L,Et){var $t=Et[0],ye=Et[1],Zt=Et[2],de=Et[3],he=$t+$t,le=ye+ye,Me=Zt+Zt,Ve=$t*he,Ye=ye*he,ke=ye*le,nn=Zt*he,Re=Zt*le,hn=Zt*Me,pn=de*he,on=de*le,mn=de*Me;return L[0]=1-ke-hn,L[1]=Ye+mn,L[2]=nn-on,L[3]=0,L[4]=Ye-mn,L[5]=1-Ve-hn,L[6]=Re+pn,L[7]=0,L[8]=nn+on,L[9]=Re-pn,L[10]=1-Ve-ke,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}function kn(L,Et,$t,ye,Zt,de,he){var le=1/($t-Et),Me=1/(Zt-ye),Ve=1/(de-he);return L[0]=2*de*le,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=2*de*Me,L[6]=0,L[7]=0,L[8]=($t+Et)*le,L[9]=(Zt+ye)*Me,L[10]=(he+de)*Ve,L[11]=-1,L[12]=0,L[13]=0,L[14]=he*de*2*Ve,L[15]=0,L}function Vn(L,Et,$t,ye,Zt){var de,he=1/Math.tan(Et/2);return L[0]=he/$t,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=he,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[11]=-1,L[12]=0,L[13]=0,L[15]=0,Zt!=null&&Zt!==1/0?(de=1/(ye-Zt),L[10]=(Zt+ye)*de,L[14]=2*Zt*ye*de):(L[10]=-1,L[14]=-2*ye),L}function Dn(L,Et,$t,ye){var Zt=Math.tan(Et.upDegrees*Math.PI/180),de=Math.tan(Et.downDegrees*Math.PI/180),he=Math.tan(Et.leftDegrees*Math.PI/180),le=Math.tan(Et.rightDegrees*Math.PI/180),Me=2/(he+le),Ve=2/(Zt+de);return L[0]=Me,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=Ve,L[6]=0,L[7]=0,L[8]=-(he-le)*Me*.5,L[9]=(Zt-de)*Ve*.5,L[10]=ye/($t-ye),L[11]=-1,L[12]=0,L[13]=0,L[14]=ye*$t/($t-ye),L[15]=0,L}function Nn(L,Et,$t,ye,Zt,de,he){var le=1/(Et-$t),Me=1/(ye-Zt),Ve=1/(de-he);return L[0]=-2*le,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=-2*Me,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=2*Ve,L[11]=0,L[12]=(Et+$t)*le,L[13]=(Zt+ye)*Me,L[14]=(he+de)*Ve,L[15]=1,L}function Qn(L,Et,$t,ye){var Zt,de,he,le,Me,Ve,Ye,ke,nn,Re,hn=Et[0],pn=Et[1],on=Et[2],mn=ye[0],jn=ye[1],Ie=ye[2],fe=$t[0],Ne=$t[1],Fe=$t[2];return Math.abs(hn-fe)<c.b&&Math.abs(pn-Ne)<c.b&&Math.abs(on-Fe)<c.b?g(L):(Ye=hn-fe,ke=pn-Ne,nn=on-Fe,Zt=jn*(nn*=Re=1/Math.hypot(Ye,ke,nn))-Ie*(ke*=Re),de=Ie*(Ye*=Re)-mn*nn,he=mn*ke-jn*Ye,(Re=Math.hypot(Zt,de,he))?(Zt*=Re=1/Re,de*=Re,he*=Re):(Zt=0,de=0,he=0),le=ke*he-nn*de,Me=nn*Zt-Ye*he,Ve=Ye*de-ke*Zt,(Re=Math.hypot(le,Me,Ve))?(le*=Re=1/Re,Me*=Re,Ve*=Re):(le=0,Me=0,Ve=0),L[0]=Zt,L[1]=le,L[2]=Ye,L[3]=0,L[4]=de,L[5]=Me,L[6]=ke,L[7]=0,L[8]=he,L[9]=Ve,L[10]=nn,L[11]=0,L[12]=-(Zt*hn+de*pn+he*on),L[13]=-(le*hn+Me*pn+Ve*on),L[14]=-(Ye*hn+ke*pn+nn*on),L[15]=1,L)}function ir(L,Et,$t,ye){var Zt=Et[0],de=Et[1],he=Et[2],le=ye[0],Me=ye[1],Ve=ye[2],Ye=Zt-$t[0],ke=de-$t[1],nn=he-$t[2],Re=Ye*Ye+ke*ke+nn*nn;Re>0&&(Ye*=Re=1/Math.sqrt(Re),ke*=Re,nn*=Re);var hn=Me*nn-Ve*ke,pn=Ve*Ye-le*nn,on=le*ke-Me*Ye;return(Re=hn*hn+pn*pn+on*on)>0&&(hn*=Re=1/Math.sqrt(Re),pn*=Re,on*=Re),L[0]=hn,L[1]=pn,L[2]=on,L[3]=0,L[4]=ke*on-nn*pn,L[5]=nn*hn-Ye*on,L[6]=Ye*pn-ke*hn,L[7]=0,L[8]=Ye,L[9]=ke,L[10]=nn,L[11]=0,L[12]=Zt,L[13]=de,L[14]=he,L[15]=1,L}function hr(L){return"mat4("+L[0]+", "+L[1]+", "+L[2]+", "+L[3]+", "+L[4]+", "+L[5]+", "+L[6]+", "+L[7]+", "+L[8]+", "+L[9]+", "+L[10]+", "+L[11]+", "+L[12]+", "+L[13]+", "+L[14]+", "+L[15]+")"}function Sr(L){return Math.hypot(L[0],L[1],L[2],L[3],L[4],L[5],L[6],L[7],L[8],L[9],L[10],L[11],L[12],L[13],L[14],L[15])}function mr(L,Et,$t){return L[0]=Et[0]+$t[0],L[1]=Et[1]+$t[1],L[2]=Et[2]+$t[2],L[3]=Et[3]+$t[3],L[4]=Et[4]+$t[4],L[5]=Et[5]+$t[5],L[6]=Et[6]+$t[6],L[7]=Et[7]+$t[7],L[8]=Et[8]+$t[8],L[9]=Et[9]+$t[9],L[10]=Et[10]+$t[10],L[11]=Et[11]+$t[11],L[12]=Et[12]+$t[12],L[13]=Et[13]+$t[13],L[14]=Et[14]+$t[14],L[15]=Et[15]+$t[15],L}function dr(L,Et,$t){return L[0]=Et[0]-$t[0],L[1]=Et[1]-$t[1],L[2]=Et[2]-$t[2],L[3]=Et[3]-$t[3],L[4]=Et[4]-$t[4],L[5]=Et[5]-$t[5],L[6]=Et[6]-$t[6],L[7]=Et[7]-$t[7],L[8]=Et[8]-$t[8],L[9]=Et[9]-$t[9],L[10]=Et[10]-$t[10],L[11]=Et[11]-$t[11],L[12]=Et[12]-$t[12],L[13]=Et[13]-$t[13],L[14]=Et[14]-$t[14],L[15]=Et[15]-$t[15],L}function Br(L,Et,$t){return L[0]=Et[0]*$t,L[1]=Et[1]*$t,L[2]=Et[2]*$t,L[3]=Et[3]*$t,L[4]=Et[4]*$t,L[5]=Et[5]*$t,L[6]=Et[6]*$t,L[7]=Et[7]*$t,L[8]=Et[8]*$t,L[9]=Et[9]*$t,L[10]=Et[10]*$t,L[11]=Et[11]*$t,L[12]=Et[12]*$t,L[13]=Et[13]*$t,L[14]=Et[14]*$t,L[15]=Et[15]*$t,L}function ii(L,Et,$t,ye){return L[0]=Et[0]+$t[0]*ye,L[1]=Et[1]+$t[1]*ye,L[2]=Et[2]+$t[2]*ye,L[3]=Et[3]+$t[3]*ye,L[4]=Et[4]+$t[4]*ye,L[5]=Et[5]+$t[5]*ye,L[6]=Et[6]+$t[6]*ye,L[7]=Et[7]+$t[7]*ye,L[8]=Et[8]+$t[8]*ye,L[9]=Et[9]+$t[9]*ye,L[10]=Et[10]+$t[10]*ye,L[11]=Et[11]+$t[11]*ye,L[12]=Et[12]+$t[12]*ye,L[13]=Et[13]+$t[13]*ye,L[14]=Et[14]+$t[14]*ye,L[15]=Et[15]+$t[15]*ye,L}function mi(L,Et){return L[0]===Et[0]&&L[1]===Et[1]&&L[2]===Et[2]&&L[3]===Et[3]&&L[4]===Et[4]&&L[5]===Et[5]&&L[6]===Et[6]&&L[7]===Et[7]&&L[8]===Et[8]&&L[9]===Et[9]&&L[10]===Et[10]&&L[11]===Et[11]&&L[12]===Et[12]&&L[13]===Et[13]&&L[14]===Et[14]&&L[15]===Et[15]}function Pi(L,Et){var $t=L[0],ye=L[1],Zt=L[2],de=L[3],he=L[4],le=L[5],Me=L[6],Ve=L[7],Ye=L[8],ke=L[9],nn=L[10],Re=L[11],hn=L[12],pn=L[13],on=L[14],mn=L[15],jn=Et[0],Ie=Et[1],fe=Et[2],Ne=Et[3],Fe=Et[4],rn=Et[5],ln=Et[6],_e=Et[7],dn=Et[8],Sn=Et[9],tr=Et[10],Pn=Et[11],Fn=Et[12],Cr=Et[13],fi=Et[14],ri=Et[15];return Math.abs($t-jn)<=c.b*Math.max(1,Math.abs($t),Math.abs(jn))&&Math.abs(ye-Ie)<=c.b*Math.max(1,Math.abs(ye),Math.abs(Ie))&&Math.abs(Zt-fe)<=c.b*Math.max(1,Math.abs(Zt),Math.abs(fe))&&Math.abs(de-Ne)<=c.b*Math.max(1,Math.abs(de),Math.abs(Ne))&&Math.abs(he-Fe)<=c.b*Math.max(1,Math.abs(he),Math.abs(Fe))&&Math.abs(le-rn)<=c.b*Math.max(1,Math.abs(le),Math.abs(rn))&&Math.abs(Me-ln)<=c.b*Math.max(1,Math.abs(Me),Math.abs(ln))&&Math.abs(Ve-_e)<=c.b*Math.max(1,Math.abs(Ve),Math.abs(_e))&&Math.abs(Ye-dn)<=c.b*Math.max(1,Math.abs(Ye),Math.abs(dn))&&Math.abs(ke-Sn)<=c.b*Math.max(1,Math.abs(ke),Math.abs(Sn))&&Math.abs(nn-tr)<=c.b*Math.max(1,Math.abs(nn),Math.abs(tr))&&Math.abs(Re-Pn)<=c.b*Math.max(1,Math.abs(Re),Math.abs(Pn))&&Math.abs(hn-Fn)<=c.b*Math.max(1,Math.abs(hn),Math.abs(Fn))&&Math.abs(pn-Cr)<=c.b*Math.max(1,Math.abs(pn),Math.abs(Cr))&&Math.abs(on-fi)<=c.b*Math.max(1,Math.abs(on),Math.abs(fi))&&Math.abs(mn-ri)<=c.b*Math.max(1,Math.abs(mn),Math.abs(ri))}var sa=ot,Pa=dr,Mi=t(40);function Ki(){var L=new c.a(4);return c.a!=Float32Array&&(L[0]=0,L[1]=0,L[2]=0,L[3]=0),L}function fa(L){var Et=new c.a(4);return Et[0]=L[0],Et[1]=L[1],Et[2]=L[2],Et[3]=L[3],Et}function oa(L,Et,$t,ye){var Zt=new c.a(4);return Zt[0]=L,Zt[1]=Et,Zt[2]=$t,Zt[3]=ye,Zt}function pa(L,Et){return L[0]=Et[0],L[1]=Et[1],L[2]=Et[2],L[3]=Et[3],L}function La(L,Et,$t,ye,Zt){return L[0]=Et,L[1]=$t,L[2]=ye,L[3]=Zt,L}function Yr(L,Et,$t){return L[0]=Et[0]+$t[0],L[1]=Et[1]+$t[1],L[2]=Et[2]+$t[2],L[3]=Et[3]+$t[3],L}function Sa(L,Et,$t){return L[0]=Et[0]-$t[0],L[1]=Et[1]-$t[1],L[2]=Et[2]-$t[2],L[3]=Et[3]-$t[3],L}function Pr(L,Et,$t){return L[0]=Et[0]*$t[0],L[1]=Et[1]*$t[1],L[2]=Et[2]*$t[2],L[3]=Et[3]*$t[3],L}function si(L,Et,$t){return L[0]=Et[0]/$t[0],L[1]=Et[1]/$t[1],L[2]=Et[2]/$t[2],L[3]=Et[3]/$t[3],L}function ti(L,Et){return L[0]=Math.ceil(Et[0]),L[1]=Math.ceil(Et[1]),L[2]=Math.ceil(Et[2]),L[3]=Math.ceil(Et[3]),L}function $r(L,Et){return L[0]=Math.floor(Et[0]),L[1]=Math.floor(Et[1]),L[2]=Math.floor(Et[2]),L[3]=Math.floor(Et[3]),L}function ui(L,Et,$t){return L[0]=Math.min(Et[0],$t[0]),L[1]=Math.min(Et[1],$t[1]),L[2]=Math.min(Et[2],$t[2]),L[3]=Math.min(Et[3],$t[3]),L}function li(L,Et,$t){return L[0]=Math.max(Et[0],$t[0]),L[1]=Math.max(Et[1],$t[1]),L[2]=Math.max(Et[2],$t[2]),L[3]=Math.max(Et[3],$t[3]),L}function xi(L,Et){return L[0]=Math.round(Et[0]),L[1]=Math.round(Et[1]),L[2]=Math.round(Et[2]),L[3]=Math.round(Et[3]),L}function Ci(L,Et,$t){return L[0]=Et[0]*$t,L[1]=Et[1]*$t,L[2]=Et[2]*$t,L[3]=Et[3]*$t,L}function di(L,Et,$t,ye){return L[0]=Et[0]+$t[0]*ye,L[1]=Et[1]+$t[1]*ye,L[2]=Et[2]+$t[2]*ye,L[3]=Et[3]+$t[3]*ye,L}function Ti(L,Et){var $t=Et[0]-L[0],ye=Et[1]-L[1],Zt=Et[2]-L[2],de=Et[3]-L[3];return Math.hypot($t,ye,Zt,de)}function pi(L,Et){var $t=Et[0]-L[0],ye=Et[1]-L[1],Zt=Et[2]-L[2],de=Et[3]-L[3];return $t*$t+ye*ye+Zt*Zt+de*de}function Ni(L){var Et=L[0],$t=L[1],ye=L[2],Zt=L[3];return Math.hypot(Et,$t,ye,Zt)}function Bi(L){var Et=L[0],$t=L[1],ye=L[2],Zt=L[3];return Et*Et+$t*$t+ye*ye+Zt*Zt}function Fi(L,Et){return L[0]=-Et[0],L[1]=-Et[1],L[2]=-Et[2],L[3]=-Et[3],L}function ma(L,Et){return L[0]=1/Et[0],L[1]=1/Et[1],L[2]=1/Et[2],L[3]=1/Et[3],L}function ua(L,Et){var $t=Et[0],ye=Et[1],Zt=Et[2],de=Et[3],he=$t*$t+ye*ye+Zt*Zt+de*de;return he>0&&(he=1/Math.sqrt(he)),L[0]=$t*he,L[1]=ye*he,L[2]=Zt*he,L[3]=de*he,L}function Ra(L,Et){return L[0]*Et[0]+L[1]*Et[1]+L[2]*Et[2]+L[3]*Et[3]}function xa(L,Et,$t,ye){var Zt=$t[0]*ye[1]-$t[1]*ye[0],de=$t[0]*ye[2]-$t[2]*ye[0],he=$t[0]*ye[3]-$t[3]*ye[0],le=$t[1]*ye[2]-$t[2]*ye[1],Me=$t[1]*ye[3]-$t[3]*ye[1],Ve=$t[2]*ye[3]-$t[3]*ye[2],Ye=Et[0],ke=Et[1],nn=Et[2],Re=Et[3];return L[0]=ke*Ve-nn*Me+Re*le,L[1]=-Ye*Ve+nn*he-Re*de,L[2]=Ye*Me-ke*he+Re*Zt,L[3]=-Ye*le+ke*de-nn*Zt,L}function Ma(L,Et,$t,ye){var Zt=Et[0],de=Et[1],he=Et[2],le=Et[3];return L[0]=Zt+ye*($t[0]-Zt),L[1]=de+ye*($t[1]-de),L[2]=he+ye*($t[2]-he),L[3]=le+ye*($t[3]-le),L}function Qi(L,Et){var $t,ye,Zt,de,he,le;Et=Et||1;do he=($t=2*c.c()-1)*$t+(ye=2*c.c()-1)*ye;while(he>=1);do le=(Zt=2*c.c()-1)*Zt+(de=2*c.c()-1)*de;while(le>=1);var Me=Math.sqrt((1-he)/le);return L[0]=Et*$t,L[1]=Et*ye,L[2]=Et*Zt*Me,L[3]=Et*de*Me,L}function ka(L,Et,$t){var ye=Et[0],Zt=Et[1],de=Et[2],he=Et[3];return L[0]=$t[0]*ye+$t[4]*Zt+$t[8]*de+$t[12]*he,L[1]=$t[1]*ye+$t[5]*Zt+$t[9]*de+$t[13]*he,L[2]=$t[2]*ye+$t[6]*Zt+$t[10]*de+$t[14]*he,L[3]=$t[3]*ye+$t[7]*Zt+$t[11]*de+$t[15]*he,L}function vo(L,Et,$t){var ye=Et[0],Zt=Et[1],de=Et[2],he=$t[0],le=$t[1],Me=$t[2],Ve=$t[3],Ye=Ve*ye+le*de-Me*Zt,ke=Ve*Zt+Me*ye-he*de,nn=Ve*de+he*Zt-le*ye,Re=-he*ye-le*Zt-Me*de;return L[0]=Ye*Ve+Re*-he+ke*-Me-nn*-le,L[1]=ke*Ve+Re*-le+nn*-he-Ye*-Me,L[2]=nn*Ve+Re*-Me+Ye*-le-ke*-he,L[3]=Et[3],L}function za(L){return L[0]=0,L[1]=0,L[2]=0,L[3]=0,L}function Ga(L){return"vec4("+L[0]+", "+L[1]+", "+L[2]+", "+L[3]+")"}function eo(L,Et){return L[0]===Et[0]&&L[1]===Et[1]&&L[2]===Et[2]&&L[3]===Et[3]}function ae(L,Et){var $t=L[0],ye=L[1],Zt=L[2],de=L[3],he=Et[0],le=Et[1],Me=Et[2],Ve=Et[3];return Math.abs($t-he)<=c.b*Math.max(1,Math.abs($t),Math.abs(he))&&Math.abs(ye-le)<=c.b*Math.max(1,Math.abs(ye),Math.abs(le))&&Math.abs(Zt-Me)<=c.b*Math.max(1,Math.abs(Zt),Math.abs(Me))&&Math.abs(de-Ve)<=c.b*Math.max(1,Math.abs(de),Math.abs(Ve))}var Kt,te=Sa,Oe=Pr,Ze=si,An=Ti,qn=pi,rr=Ni,tn=Bi,sn=(Kt=Ki(),function(L,Et,$t,ye,Zt,de){var he,le;for(Et||(Et=4),$t||($t=0),le=ye?Math.min(ye*Et+$t,L.length):L.length,he=$t;he<le;he+=Et)Kt[0]=L[he],Kt[1]=L[he+1],Kt[2]=L[he+2],Kt[3]=L[he+3],Zt(Kt,Kt,de),L[he]=Kt[0],L[he+1]=Kt[1],L[he+2]=Kt[2],L[he+3]=Kt[3];return L});function un(){var L=new c.a(4);return c.a!=Float32Array&&(L[0]=0,L[1]=0,L[2]=0),L[3]=1,L}function ur(L){return L[0]=0,L[1]=0,L[2]=0,L[3]=1,L}function jr(L,Et,$t){$t*=.5;var ye=Math.sin($t);return L[0]=ye*Et[0],L[1]=ye*Et[1],L[2]=ye*Et[2],L[3]=Math.cos($t),L}function wr(L,Et){var $t=2*Math.acos(Et[3]),ye=Math.sin($t/2);return ye>c.b?(L[0]=Et[0]/ye,L[1]=Et[1]/ye,L[2]=Et[2]/ye):(L[0]=1,L[1]=0,L[2]=0),$t}function yr(L,Et){var $t=cn(L,Et);return Math.acos(2*$t*$t-1)}function ni(L,Et,$t){var ye=Et[0],Zt=Et[1],de=Et[2],he=Et[3],le=$t[0],Me=$t[1],Ve=$t[2],Ye=$t[3];return L[0]=ye*Ye+he*le+Zt*Ve-de*Me,L[1]=Zt*Ye+he*Me+de*le-ye*Ve,L[2]=de*Ye+he*Ve+ye*Me-Zt*le,L[3]=he*Ye-ye*le-Zt*Me-de*Ve,L}function _r(L,Et,$t){$t*=.5;var ye=Et[0],Zt=Et[1],de=Et[2],he=Et[3],le=Math.sin($t),Me=Math.cos($t);return L[0]=ye*Me+he*le,L[1]=Zt*Me+de*le,L[2]=de*Me-Zt*le,L[3]=he*Me-ye*le,L}function Fr(L,Et,$t){$t*=.5;var ye=Et[0],Zt=Et[1],de=Et[2],he=Et[3],le=Math.sin($t),Me=Math.cos($t);return L[0]=ye*Me-de*le,L[1]=Zt*Me+he*le,L[2]=de*Me+ye*le,L[3]=he*Me-Zt*le,L}function Lr(L,Et,$t){$t*=.5;var ye=Et[0],Zt=Et[1],de=Et[2],he=Et[3],le=Math.sin($t),Me=Math.cos($t);return L[0]=ye*Me+Zt*le,L[1]=Zt*Me-ye*le,L[2]=de*Me+he*le,L[3]=he*Me-de*le,L}function Gr(L,Et){var $t=Et[0],ye=Et[1],Zt=Et[2];return L[0]=$t,L[1]=ye,L[2]=Zt,L[3]=Math.sqrt(Math.abs(1-$t*$t-ye*ye-Zt*Zt)),L}function Hr(L,Et){var $t=Et[0],ye=Et[1],Zt=Et[2],de=Et[3],he=Math.sqrt($t*$t+ye*ye+Zt*Zt),le=Math.exp(de),Me=he>0?le*Math.sin(he)/he:0;return L[0]=$t*Me,L[1]=ye*Me,L[2]=Zt*Me,L[3]=le*Math.cos(he),L}function ei(L,Et){var $t=Et[0],ye=Et[1],Zt=Et[2],de=Et[3],he=Math.sqrt($t*$t+ye*ye+Zt*Zt),le=he>0?Math.atan2(he,de)/he:0;return L[0]=$t*le,L[1]=ye*le,L[2]=Zt*le,L[3]=.5*Math.log($t*$t+ye*ye+Zt*Zt+de*de),L}function Kr(L,Et,$t){return ei(L,Et),we(L,L,$t),Hr(L,L),L}function Qr(L,Et,$t,ye){var Zt,de,he,le,Me,Ve=Et[0],Ye=Et[1],ke=Et[2],nn=Et[3],Re=$t[0],hn=$t[1],pn=$t[2],on=$t[3];return(de=Ve*Re+Ye*hn+ke*pn+nn*on)<0&&(de=-de,Re=-Re,hn=-hn,pn=-pn,on=-on),1-de>c.b?(Zt=Math.acos(de),he=Math.sin(Zt),le=Math.sin((1-ye)*Zt)/he,Me=Math.sin(ye*Zt)/he):(le=1-ye,Me=ye),L[0]=le*Ve+Me*Re,L[1]=le*Ye+Me*hn,L[2]=le*ke+Me*pn,L[3]=le*nn+Me*on,L}function Oi(L){var Et=c.c(),$t=c.c(),ye=c.c(),Zt=Math.sqrt(1-Et),de=Math.sqrt(Et);return L[0]=Zt*Math.sin(2*Math.PI*$t),L[1]=Zt*Math.cos(2*Math.PI*$t),L[2]=de*Math.sin(2*Math.PI*ye),L[3]=de*Math.cos(2*Math.PI*ye),L}function Ri(L,Et){var $t=Et[0],ye=Et[1],Zt=Et[2],de=Et[3],he=$t*$t+ye*ye+Zt*Zt+de*de,le=he?1/he:0;return L[0]=-$t*le,L[1]=-ye*le,L[2]=-Zt*le,L[3]=de*le,L}function Si(L,Et){return L[0]=-Et[0],L[1]=-Et[1],L[2]=-Et[2],L[3]=Et[3],L}function Gi(L,Et){var $t,ye=Et[0]+Et[4]+Et[8];if(ye>0)$t=Math.sqrt(ye+1),L[3]=.5*$t,$t=.5/$t,L[0]=(Et[5]-Et[7])*$t,L[1]=(Et[6]-Et[2])*$t,L[2]=(Et[1]-Et[3])*$t;else{var Zt=0;Et[4]>Et[0]&&(Zt=1),Et[8]>Et[3*Zt+Zt]&&(Zt=2);var de=(Zt+1)%3,he=(Zt+2)%3;$t=Math.sqrt(Et[3*Zt+Zt]-Et[3*de+de]-Et[3*he+he]+1),L[Zt]=.5*$t,$t=.5/$t,L[3]=(Et[3*de+he]-Et[3*he+de])*$t,L[de]=(Et[3*de+Zt]+Et[3*Zt+de])*$t,L[he]=(Et[3*he+Zt]+Et[3*Zt+he])*$t}return L}function ca(L,Et,$t,ye){var Zt=.5*Math.PI/180;Et*=Zt,$t*=Zt,ye*=Zt;var de=Math.sin(Et),he=Math.cos(Et),le=Math.sin($t),Me=Math.cos($t),Ve=Math.sin(ye),Ye=Math.cos(ye);return L[0]=de*Me*Ye-he*le*Ve,L[1]=he*le*Ye+de*Me*Ve,L[2]=he*Me*Ve-de*le*Ye,L[3]=he*Me*Ye+de*le*Ve,L}function ha(L){return"quat("+L[0]+", "+L[1]+", "+L[2]+", "+L[3]+")"}var na,Zi,ve,U,G,nt,vt=fa,Gt=oa,Jt=pa,ie=La,ue=Yr,Ce=ni,we=Ci,cn=Ra,Cn=Ma,_t=Ni,Xt=_t,Ee=Bi,Vt=Ee,ce=ua,yn=eo,Bn=ae,Zn=(na=Mi.create(),Zi=Mi.fromValues(1,0,0),ve=Mi.fromValues(0,1,0),function(L,Et,$t){var ye=Mi.dot(Et,$t);return ye<-.999999?(Mi.cross(na,Zi,Et),Mi.len(na)<1e-6&&Mi.cross(na,ve,Et),Mi.normalize(na,na),jr(L,na,Math.PI),L):ye>.999999?(L[0]=0,L[1]=0,L[2]=0,L[3]=1,L):(Mi.cross(na,Et,$t),L[0]=na[0],L[1]=na[1],L[2]=na[2],L[3]=1+ye,ce(L,L))}),Kn=(U=un(),G=un(),function(L,Et,$t,ye,Zt,de){return Qr(U,Et,Zt,de),Qr(G,$t,ye,de),Qr(L,U,G,2*de*(1-de)),L}),$e=(nt=S(),function(L,Et,$t,ye){return nt[0]=$t[0],nt[3]=$t[1],nt[6]=$t[2],nt[1]=ye[0],nt[4]=ye[1],nt[7]=ye[2],nt[2]=-Et[0],nt[5]=-Et[1],nt[8]=-Et[2],ce(L,Gi(L,nt))}),je=t(80)},function(i,y){i.exports=function(t,n,u){return n in t?Object.defineProperty(t,n,{value:u,enumerable:!0,configurable:!0,writable:!0}):t[n]=u,t}},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.METADATA_KEY=void 0;var n=t(32);y.METADATA_KEY=n;var u=t(446);Object.defineProperty(y,"Container",{enumerable:!0,get:function(){return u.Container}});var p=t(55);Object.defineProperty(y,"BindingScopeEnum",{enumerable:!0,get:function(){return p.BindingScopeEnum}}),Object.defineProperty(y,"BindingTypeEnum",{enumerable:!0,get:function(){return p.BindingTypeEnum}}),Object.defineProperty(y,"TargetTypeEnum",{enumerable:!0,get:function(){return p.TargetTypeEnum}});var b=t(462);Object.defineProperty(y,"AsyncContainerModule",{enumerable:!0,get:function(){return b.AsyncContainerModule}}),Object.defineProperty(y,"ContainerModule",{enumerable:!0,get:function(){return b.ContainerModule}});var c=t(463);Object.defineProperty(y,"injectable",{enumerable:!0,get:function(){return c.injectable}});var S=t(464);Object.defineProperty(y,"tagged",{enumerable:!0,get:function(){return S.tagged}});var I=t(465);Object.defineProperty(y,"named",{enumerable:!0,get:function(){return I.named}});var m=t(222);Object.defineProperty(y,"inject",{enumerable:!0,get:function(){return m.inject}}),Object.defineProperty(y,"LazyServiceIdentifer",{enumerable:!0,get:function(){return m.LazyServiceIdentifer}});var r=t(466);Object.defineProperty(y,"optional",{enumerable:!0,get:function(){return r.optional}});var s=t(467);Object.defineProperty(y,"unmanaged",{enumerable:!0,get:function(){return s.unmanaged}});var d=t(468);Object.defineProperty(y,"multiInject",{enumerable:!0,get:function(){return d.multiInject}});var C=t(469);Object.defineProperty(y,"targetName",{enumerable:!0,get:function(){return C.targetName}});var E=t(470);Object.defineProperty(y,"postConstruct",{enumerable:!0,get:function(){return E.postConstruct}});var A=t(220);Object.defineProperty(y,"MetadataReader",{enumerable:!0,get:function(){return A.MetadataReader}});var f=t(67);Object.defineProperty(y,"id",{enumerable:!0,get:function(){return f.id}});var x=t(59);Object.defineProperty(y,"decorate",{enumerable:!0,get:function(){return x.decorate}});var j=t(225);Object.defineProperty(y,"traverseAncerstors",{enumerable:!0,get:function(){return j.traverseAncerstors}}),Object.defineProperty(y,"taggedConstraint",{enumerable:!0,get:function(){return j.taggedConstraint}}),Object.defineProperty(y,"namedConstraint",{enumerable:!0,get:function(){return j.namedConstraint}}),Object.defineProperty(y,"typeConstraint",{enumerable:!0,get:function(){return j.typeConstraint}});var P=t(88);Object.defineProperty(y,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return P.getServiceIdentifierAsString}});var W=t(471);Object.defineProperty(y,"multiBindToService",{enumerable:!0,get:function(){return W.multiBindToService}})},function(i,y,t){"use strict";t.d(y,"i",function(){return jt}),t.d(y,"h",function(){return Gr}),t.d(y,"d",function(){return Hr}),t.d(y,"m",function(){return Kr}),t.d(y,"l",function(){return $r}),t.d(y,"g",function(){return ti}),t.d(y,"f",function(){return ui}),t.d(y,"j",function(){return Ze}),t.d(y,"k",function(){return ei}),t.d(y,"r",function(){return Gi}),t.d(y,"p",function(){return ha}),t.d(y,"b",function(){return qn}),t.d(y,"n",function(){return Oi}),t.d(y,"q",function(){return ca}),t.d(y,"o",function(){return na}),t.d(y,"c",function(){return Ri}),t.d(y,"a",function(){return Si}),t.d(y,"e",function(){return Zi});var n={};t.r(n),t.d(n,"compare",function(){return A}),t.d(n,"getLineIntersect",function(){return x}),t.d(n,"getRectIntersectByPoint",function(){return j}),t.d(n,"getCircleIntersectByPoint",function(){return P}),t.d(n,"getEllipseIntersectByPoint",function(){return W}),t.d(n,"applyMatrix",function(){return X}),t.d(n,"invertMatrix",function(){return $}),t.d(n,"getCircleCenterByPoints",function(){return ft}),t.d(n,"distance",function(){return Z}),t.d(n,"scaleMatrix",function(){return lt}),t.d(n,"floydWarshall",function(){return pt}),t.d(n,"getAdjMatrix",function(){return gt}),t.d(n,"translate",function(){return ut}),t.d(n,"move",function(){return Bt}),t.d(n,"scale",function(){return Lt}),t.d(n,"rotate",function(){return St}),t.d(n,"getDegree",function(){return K}),t.d(n,"isPointInPolygon",function(){return mt}),t.d(n,"intersectBBox",function(){return bt}),t.d(n,"isPolygonsIntersect",function(){return wt}),t.d(n,"Line",function(){return J}),t.d(n,"getBBoxBoundLine",function(){return ct}),t.d(n,"itemIntersectByLine",function(){return _}),t.d(n,"fractionToLine",function(){return R}),t.d(n,"getPointsCenter",function(){return Q}),t.d(n,"squareDist",function(){return k}),t.d(n,"pointLineSquareDist",function(){return g}),t.d(n,"isPointsOverlap",function(){return O}),t.d(n,"pointRectSquareDist",function(){return F});var u={};t.r(u),t.d(u,"uniqueId",function(){return Dt}),t.d(u,"formatPadding",function(){return zt}),t.d(u,"cloneEvent",function(){return Tt}),t.d(u,"isViewportChanged",function(){return Wt}),t.d(u,"isNaN",function(){return Ht}),t.d(u,"calculationItemsBBox",function(){return re}),t.d(u,"processParallelEdges",function(){return pe});var p={};t.r(p),t.d(p,"getBBox",function(){return kn}),t.d(p,"getLoopCfgs",function(){return Vn}),t.d(p,"getLabelPosition",function(){return Dn}),t.d(p,"traverseTree",function(){return Qn}),t.d(p,"traverseTreeUp",function(){return ir}),t.d(p,"getLetterWidth",function(){return hr}),t.d(p,"getTextSize",function(){return Sr}),t.d(p,"plainCombosToTrees",function(){return mr}),t.d(p,"reconstructTree",function(){return dr}),t.d(p,"getComboBBox",function(){return Br}),t.d(p,"shouldRefreshEdge",function(){return ii}),t.d(p,"cloneBesidesImg",function(){return mi});var b={};t.r(b),t.d(b,"getSpline",function(){return pi}),t.d(b,"getControlPoint",function(){return Ni}),t.d(b,"pointsToPolygon",function(){return Bi}),t.d(b,"pathToPoints",function(){return Fi}),t.d(b,"getClosedSpline",function(){return ma}),t.d(b,"roundedHull",function(){return Ma}),t.d(b,"paddedHull",function(){return Qi});var c=t(0),S={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(U){return Object.assign(this,U),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(U){var G=this,nt=this.events;this.graph=U,this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||U.get("canvas").set("draggable",!0),Object(c.f)(nt,function(vt,Gt){U.on(Gt,vt)}),document.addEventListener("visibilitychange",function(){G.keydown=!1})},unbind:function(U){var G=this.events;this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||U.get("canvas").set("draggable",!1),Object(c.f)(G,function(nt,vt){U.off(vt,nt)})},get:function(U){return this[U]},set:function(U,G){return this[U]=G,this}},I=function(){function ve(){}return ve.registerBehavior=function(U,G){if(!G)throw new Error("please specify handler for this behavior: "+U);var nt=Object(c.c)(S);Object.assign(nt,G);var vt=function(Jt){var ie=this;Object.assign(this,this.getDefaultCfg(),Jt);var ue=this.getEvents();this.events=null;var Ce={};ue&&(Object(c.f)(ue,function(we,cn){Ce[cn]=Object(c.J)(ie,we)}),this.events=Ce)};vt.prototype=nt,ve.types[U]=vt},ve.hasBehavior=function(U){return!!ve.types[U]},ve.getBehavior=function(U){return ve.types[U]},ve.types={},ve}(),m=I,r=t(1),s=t(79),d=t(10),C=t(33),E=d.a.transform,A=function(U){return function(G,nt){return G[U]-nt[U]}},f=function(U,G,nt){return U>=G&&U<=nt},x=function(U,G,nt,vt){var Gt=nt.x-U.x,Jt=nt.y-U.y,ie=G.x-U.x,ue=G.y-U.y,Ce=vt.x-nt.x,we=vt.y-nt.y,cn=ie*we-ue*Ce,Cn=1/cn,_t=null;if(cn*cn>1e-4*(ie*ie+ue*ue)*(Ce*Ce+we*we)){var Xt=(Gt*we-Jt*Ce)*Cn,Ee=(Gt*ue-Jt*ie)*Cn;f(Xt,0,1)&&f(Ee,0,1)&&(_t={x:U.x+Xt*ie,y:U.y+Xt*ue})}return _t},j=function(U,G){var nt=U.x,vt=U.y,Gt=U.width,Jt=U.height,ie=[],ue={x:nt+Gt/2,y:vt+Jt/2};ie.push({x:nt,y:vt}),ie.push({x:nt+Gt,y:vt}),ie.push({x:nt+Gt,y:vt+Jt}),ie.push({x:nt,y:vt+Jt}),ie.push({x:nt,y:vt});for(var Ce=null,we=1;we<ie.length&&!(Ce=x(ie[we-1],ie[we],ue,G));we++);return Ce},P=function(U,G){var nt=U.x,vt=U.y,Gt=U.r,Jt=G.x-nt,ie=G.y-vt;if(Math.sqrt(Jt*Jt+ie*ie)<Gt)return null;var ue=Math.sign(Jt),Ce=Math.sign(ie),we=Math.atan(ie/Jt);return{x:nt+Math.abs(Gt*Math.cos(we))*ue,y:vt+Math.abs(Gt*Math.sin(we))*Ce}},W=function(U,G){var nt=U.rx,vt=U.ry,Gt=U.x,Jt=U.y,ie=G.x-Gt,ue=G.y-Jt,Ce=Math.atan2(ue/vt,ie/nt);return Ce<0&&(Ce+=2*Math.PI),{x:Gt+nt*Math.cos(Ce),y:Jt+vt*Math.sin(Ce)}},X=function(U,G,nt){nt===void 0&&(nt=1);var vt=[U.x,U.y,nt];return G&&!isNaN(G[0])||(G=[1,0,0,0,1,0,0,0,1]),d.d.transformMat3(vt,vt,G),{x:vt[0],y:vt[1]}},$=function(U,G,nt){nt===void 0&&(nt=1),G&&!isNaN(G[0])||(G=[1,0,0,0,1,0,0,0,1]);var vt=d.b.invert([1,0,0,0,1,0,0,0,1],G);vt||(vt=[1,0,0,0,1,0,0,0,1]);var Gt=[U.x,U.y,nt];return d.d.transformMat3(Gt,Gt,vt),{x:Gt[0],y:Gt[1]}},ft=function(U,G,nt){var vt=U.x-G.x,Gt=U.y-G.y,Jt=U.x-nt.x,ie=U.y-nt.y,ue=(U.x*U.x-G.x*G.x-G.y*G.y+U.y*U.y)/2,Ce=(U.x*U.x-nt.x*nt.x-nt.y*nt.y+U.y*U.y)/2,we=Gt*Jt-vt*ie;return{x:-(ie*ue-Gt*Ce)/we,y:-(vt*Ce-Jt*ue)/we}},Z=function(U,G){var nt=U.x-G.x,vt=U.y-G.y;return Math.sqrt(nt*nt+vt*vt)},lt=function(U,G){var nt=[];return U.forEach(function(vt){var Gt=[];vt.forEach(function(Jt){Gt.push(Jt*G)}),nt.push(Gt)}),nt},pt=function(U){for(var G=[],nt=U.length,vt=0;vt<nt;vt+=1){G[vt]=[];for(var Gt=0;Gt<nt;Gt+=1)vt===Gt?G[vt][Gt]=0:U[vt][Gt]!==0&&U[vt][Gt]?G[vt][Gt]=U[vt][Gt]:G[vt][Gt]=1/0}for(var Jt=0;Jt<nt;Jt+=1)for(vt=0;vt<nt;vt+=1)for(Gt=0;Gt<nt;Gt+=1)G[vt][Gt]>G[vt][Jt]+G[Jt][Gt]&&(G[vt][Gt]=G[vt][Jt]+G[Jt][Gt]);return G},gt=function(U,G){var nt=U.nodes,vt=U.edges,Gt=[],Jt={};if(!nt)throw new Error("invalid nodes data!");return nt&&nt.forEach(function(ie,ue){Jt[ie.id]=ue,Gt.push([])}),vt&&vt.forEach(function(ie){var ue=ie.source,Ce=ie.target,we=Jt[ue],cn=Jt[Ce];Gt[we][cn]=1,G||(Gt[cn][we]=1)}),Gt},ut=function(U,G){U.translate(G.x,G.y)},Bt=function(U,G){var nt=U.getMatrix();nt||(nt=[1,0,0,0,1,0,0,0,1]);var vt=U.getCanvasBBox(),Gt=G.x-vt.minX,Jt=G.y-vt.minY,ie=E(nt,[["t",Gt,Jt]]);U.setMatrix(ie)},Lt=function(U,G){var nt=U.getMatrix();nt||(nt=[1,0,0,0,1,0,0,0,1]);var vt=G;Object(c.m)(G)||(vt=[G,G]),Object(c.m)(G)&&G.length===1&&(vt=[G[0],G[0]]),nt=E(nt,[["s",vt[0],vt[1]]]),U.setMatrix(nt)},St=function(U,G){var nt=U.getMatrix();nt||(nt=[1,0,0,0,1,0,0,0,1]),nt=E(nt,[["r",G]]),U.setMatrix(nt)},K=function(U,G,nt){for(var vt=[],Gt=0;Gt<U;Gt++)vt[Gt]=0;return nt.forEach(function(Jt){Jt.source&&(vt[G[Jt.source]]+=1),Jt.target&&(vt[G[Jt.target]]+=1)}),vt};function dt(ve,U,G){return(G[0]-ve[0])*(U[1]-ve[1])==(U[0]-ve[0])*(G[1]-ve[1])&&Math.min(ve[0],U[0])<=G[0]&&G[0]<=Math.max(ve[0],U[0])&&Math.min(ve[1],U[1])<=G[1]&&G[1]<=Math.max(ve[1],U[1])}var mt=function(U,G,nt){var vt=!1,Gt=U.length;function Jt(we){return Math.abs(we)<1e-6?0:we<0?-1:1}if(Gt<=2)return!1;for(var ie=0;ie<Gt;ie++){var ue=U[ie],Ce=U[(ie+1)%Gt];if(dt(ue,Ce,[G,nt]))return!0;Jt(ue[1]-nt)>0!=Jt(Ce[1]-nt)>0&&Jt(G-(nt-ue[1])*(ue[0]-Ce[0])/(ue[1]-Ce[1])-ue[0])<0&&(vt=!vt)}return vt},bt=function(U,G){return!(G.minX>U.maxX||G.maxX<U.minX||G.minY>U.maxY||G.maxY<U.minY)},wt=function(U,G){var nt=function(Cn){var _t=Cn.map(function(Ee){return Ee[0]}),Xt=Cn.map(function(Ee){return Ee[1]});return{minX:Math.min.apply(null,_t),maxX:Math.max.apply(null,_t),minY:Math.min.apply(null,Xt),maxY:Math.max.apply(null,Xt)}},vt=function(Cn){for(var _t=[],Xt=Cn.length,Ee=0;Ee<Xt-1;Ee++){var Vt=Cn[Ee],ce=Cn[Ee+1];_t.push({from:{x:Vt[0],y:Vt[1]},to:{x:ce[0],y:ce[1]}})}if(_t.length>1){var yn=Cn[0],Bn=Cn[Xt-1];_t.push({from:{x:Bn[0],y:Bn[1]},to:{x:yn[0],y:yn[1]}})}return _t};if(U.length<2||G.length<2)return!1;var Gt=nt(U),Jt=nt(G);if(!bt(Gt,Jt))return!1;var ie=!1;if(Object(c.f)(G,function(cn){if(mt(U,cn[0],cn[1]))return ie=!0,!1}),ie||(Object(c.f)(U,function(cn){if(mt(G,cn[0],cn[1]))return ie=!0,!1}),ie))return!0;var ue=vt(U),Ce=vt(G),we=!1;return Object(c.f)(Ce,function(cn){if(function(Cn,_t){var Xt=!1;return Object(c.f)(Cn,function(Ee){if(x(Ee.from,Ee.to,_t.from,_t.to))return Xt=!0,!1}),Xt}(ue,cn))return we=!0,!1}),we},J=function(){function ve(U,G,nt,vt){this.x1=U,this.y1=G,this.x2=nt,this.y2=vt}return ve.prototype.getBBox=function(){var U=Math.min(this.x1,this.x2),G=Math.min(this.y1,this.y2),nt=Math.max(this.x1,this.x2),vt=Math.max(this.y1,this.y2);return{x:U,y:G,minX:U,minY:G,maxX:nt,maxY:vt,width:nt-U,height:vt-G}},ve}(),ct=function(U,G){return{top:[U.minX,U.minY,U.maxX,U.minY],left:[U.minX,U.minY,U.minX,U.maxY],bottom:[U.minX,U.maxY,U.maxX,U.maxY],right:[U.maxX,U.minY,U.maxX,U.maxY]}[G]},it=function(U,G){var nt=(G.x2-G.x1)*(U.y1-G.y1)-(G.y2-G.y1)*(U.x1-G.x1),vt=(U.x2-U.x1)*(U.y1-G.y1)-(U.y2-U.y1)*(U.x1-G.x1),Gt=(G.y2-G.y1)*(U.x2-U.x1)-(G.x2-G.x1)*(U.y2-U.y1);if(Gt){var Jt=nt/Gt,ie=vt/Gt;if(Jt>=0&&Jt<=1&&ie>=0&&ie<=1)return Jt}return Number.POSITIVE_INFINITY},_=function(U,G){for(var nt=["top","left","bottom","right"],vt=U.getBBox(),Gt=0,Jt=[],ie=0;ie<4;ie++){var ue=ct(vt,nt[ie]),Ce=ue[0],we=ue[1],cn=ue[2],Cn=ue[3];Jt[ie]=x({x:G.x1,y:G.y1},{x:G.x2,y:G.y2},{x:Ce,y:we},{x:cn,y:Cn}),Jt[ie]&&(Gt+=1)}return[Jt,Gt]},R=function(U,G){for(var nt=["top","left","bottom","right"],vt=U.getBBox(),Gt=Number.POSITIVE_INFINITY,Jt=0,ie=0;ie<4;ie++){var ue=ct(vt,nt[ie]),Ce=ue[0],we=ue[1],cn=ue[2],Cn=ue[3],_t=it(G,new J(Ce,we,cn,Cn));(_t=Math.abs(_t-.5))>=0&&_t<=1&&(Jt+=1,Gt=_t<Gt?_t:Gt)}return Jt===0?-1:Gt},Q=function(U){var G=0,nt=0;if(U.length>0){for(var vt=0,Gt=U;vt<Gt.length;vt++){var Jt=Gt[vt];G+=Jt.x,nt+=Jt.y}G/=U.length,nt/=U.length}return{x:G,y:nt}},k=function(U,G){return Math.pow(U.x-G.x,2)+Math.pow(U.y-G.y,2)},g=function(U,G){var nt,vt=G.x1,Gt=G.y1,Jt=G.x2-vt,ie=G.y2-Gt,ue=U.x-vt,Ce=U.y-Gt,we=ue*Jt+Ce*ie;nt=we<=0||(we=(ue=Jt-ue)*Jt+(Ce=ie-Ce)*ie)<=0?0:we*we/(Jt*Jt+ie*ie);var cn=ue*ue+Ce*Ce-nt;return cn<0&&(cn=0),cn},O=function(U,G,nt){return nt===void 0&&(nt=.001),Math.pow(U.x-G.x,2)+Math.pow(U.y-G.y,2)<Math.pow(nt,2)},F=function(U,G){var nt=U.x<G.x,vt=U.x>G.x+G.width,Gt=U.y>G.y+G.height,Jt=U.y<G.y;if(!(nt||vt||Gt||Jt))return 0;if(Gt&&!nt&&!vt)return Math.pow(G.y+G.height-U.y,2);if(Jt&&!nt&&!vt)return Math.pow(U.y-G.y,2);if(nt&&!Gt&&!Jt)return Math.pow(G.x-U.x,2);if(vt&&!Gt&&!Jt)return Math.pow(G.x+G.width-U.x,2);var ie=Math.min(Math.abs(G.x-U.x),Math.abs(G.x+G.width-U.x)),ue=Math.min(Math.abs(G.y-U.y),Math.abs(G.y+G.height-U.y));return ie*ie+ue*ue},V="rgb(95, 149, 255)",rt="rgb(253, 253, 253)",ot="rgb(247, 250, 255)",st="rgb(224, 224, 224)",Mt="rgb(224, 224, 224)",yt={version:"0.0.9",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:V,fill:"rgb(239, 244, 255)"},size:20,color:V,linkPoints:{size:8,lineWidth:1,fill:ot,stroke:V}},nodeStateStyles:{active:{fill:ot,stroke:V,lineWidth:2,shadowColor:V,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:V,lineWidth:4,shadowColor:V,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:"#4572d9",lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:"rgb(247, 250, 255)",stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:"rgb(250, 250, 250)",stroke:"rgb(224, 224, 224)",lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:st,lineAppendWidth:2},color:st},edgeStateStyles:{active:{stroke:V,lineWidth:1},selected:{stroke:V,lineWidth:2,shadowColor:V,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:V,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(234, 234, 234)",lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:rt,lineWidth:1,stroke:Mt,r:5,width:20,height:10},size:[20,5],color:Mt,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:V,lineWidth:1,fill:"rgb(247, 250, 255)"},selected:{stroke:V,lineWidth:2,fill:rt,shadowColor:V,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:"#4572d9",lineWidth:2,fill:rt,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(224, 224, 224)",fill:rt,lineWidth:1},disable:{stroke:"rgb(234, 234, 234)",fill:"rgb(250, 250, 250)",lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]}},xt=function(){function ve(U){this.graph=U,this.destroyed=!1,this.modes=U.get("modes")||{default:[]},this.formatModes(),this.mode=U.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return ve.prototype.formatModes=function(){var U=this.modes;Object(c.f)(U,function(G){Object(c.f)(G,function(nt,vt){Object(c.x)(nt)&&(G[vt]={type:nt})})})},ve.prototype.setBehaviors=function(U){var G,nt=this.graph,vt=this.modes[U],Gt=[];Object(c.f)(vt||[],function(Jt){var ie=I.getBehavior(Jt.type||Jt);ie&&(G=new ie(Jt))&&(G.bind(nt),Gt.push(G))}),this.currentBehaves=Gt},ve.mergeBehaviors=function(U,G){return Object(c.f)(G,function(nt){U.indexOf(nt)<0&&(Object(c.x)(nt)&&(nt={type:nt}),U.push(nt))}),U},ve.filterBehaviors=function(U,G){var nt=[];return U.forEach(function(vt){var Gt="";Gt=Object(c.x)(vt)?vt:vt.type,G.indexOf(Gt)<0&&nt.push(vt)}),nt},ve.prototype.setMode=function(U){var G=this.modes,nt=this.graph,vt=U;G[vt]&&(nt.emit("beforemodechange",{mode:U}),Object(c.f)(this.currentBehaves,function(Gt){Gt.delegate&&Gt.delegate.remove(),Gt.unbind(nt)}),this.setBehaviors(vt),nt.emit("aftermodechange",{mode:U}),this.mode=U)},ve.prototype.getMode=function(){return this.mode},ve.prototype.manipulateBehaviors=function(U,G,nt){var vt,Gt=this;if(vt=Object(c.m)(U)?U:[U],Object(c.m)(G))return Object(c.f)(G,function(ie){Gt.modes[ie]?Gt.modes[ie]=nt?ve.mergeBehaviors(Gt.modes[ie]||[],vt):ve.filterBehaviors(Gt.modes[ie]||[],vt):nt&&(Gt.modes[ie]=vt)}),this;var Jt=G;return G||(Jt=this.mode),this.modes[Jt]||nt&&(this.modes[Jt]=vt),this.modes[Jt]=nt?ve.mergeBehaviors(this.modes[Jt]||[],vt):ve.filterBehaviors(this.modes[Jt]||[],vt),this.setMode(this.mode),this},ve.prototype.updateBehavior=function(U,G,nt){Object(c.x)(U)&&(U={type:U});var vt=[];if(nt&&nt!==this.mode&&nt!=="default"){if(!(vt=this.modes[nt])||!vt.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;var Gt=vt.length;for(ie=0;ie<Gt;ie++){if((ue=vt[ie]).type===U.type||ue===U.type)return ue===U.type&&(ue={type:ue}),Object.assign(ue,G),vt[ie]=ue,this;ie===Gt-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(!(vt=this.currentBehaves)||!vt.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var Jt=vt.length,ie=0;ie<Jt;ie++){var ue;if((ue=vt[ie]).type===U.type)return ue.updateCfg(G),this;ie===Jt-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},ve.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},ve}(),Ot=t(14),jt=function(ve){function U(G,nt){var vt=ve.call(this,G,nt)||this;return vt.item=nt.item,vt.canvasX=nt.canvasX,vt.canvasY=nt.canvasY,vt.wheelDelta=nt.wheelDelta,vt.detail=nt.detail,vt}return Object(r.b)(U,ve),U}(t(18).Event),Dt=function(U){return U+"-"+Math.random()+Date.now()},zt=function(U){var G=0,nt=0,vt=0,Gt=0;return Object(c.t)(U)?G=nt=vt=Gt=U:Object(c.x)(U)?G=nt=vt=Gt=parseInt(U,10):Object(c.m)(U)&&(G=U[0],vt=Object(c.s)(U[1])?U[0]:U[1],Gt=Object(c.s)(U[2])?U[0]:U[2],nt=Object(c.s)(U[3])?vt:U[3]),[G,vt,Gt,nt]},Tt=function(U){var G=new jt(U.type,U);return G.clientX=U.clientX,G.clientY=U.clientY,G.x=U.x,G.y=U.y,G.target=U.target,G.currentTarget=U.currentTarget,G.bubbles=!0,G.item=U.item,G},Wt=function(U){if(!U)return!1;for(var G=[1,0,0,0,1,0,0,0,1],nt=0;nt<9;nt++)if(U[nt]!==G[nt])return!0;return!1},Ht=function(U){return Number.isNaN(Number(U))},re=function(U){for(var G=1/0,nt=-1/0,vt=1/0,Gt=-1/0,Jt=0;Jt<U.length;Jt++){var ie=U[Jt].getBBox(),ue=ie.minX,Ce=ie.minY,we=ie.maxX,cn=ie.maxY;ue<G&&(G=ue),Ce<vt&&(vt=Ce),we>nt&&(nt=we),cn>Gt&&(Gt=cn)}return{x:Math.floor(G),y:Math.floor(vt),width:Math.ceil(nt)-Math.floor(G),height:Math.ceil(Gt)-Math.floor(vt),minX:G,minY:vt,maxX:nt,maxY:Gt}},pe=function(U,G,nt,vt,Gt){G===void 0&&(G=15),nt===void 0&&(nt="quadratic");for(var Jt=U.length,ie=2*G,ue=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],Ce={},we=[],cn={},Cn=0;Cn<Jt;Cn++){var _t=U[Cn],Xt=_t.source,Ee=_t.target,Vt=Xt+"-"+Ee;if(!we[Cn]){Ce[Vt]||(Ce[Vt]=[]),we[Cn]=!0,Ce[Vt].push(_t);for(var ce=0;ce<Jt;ce++)if(Cn!==ce){var yn=U[ce],Bn=yn.source,Zn=yn.target;we[ce]||(Xt===Zn&&Ee===Bn?(Ce[Vt].push(yn),we[ce]=!0,cn[Bn+"|"+Zn+"|"+(Ce[Vt].length-1)]=!0):Xt===Bn&&Ee===Zn&&(Ce[Vt].push(yn),we[ce]=!0))}}}for(var Kn in Ce)for(var $e=Ce[Kn],je=$e.length,L=0;L<je;L++){var Et=$e[L];if(Et.source!==Et.target)if(je===1&&vt&&Et.source!==Et.target)Et.type=vt;else{Et.type=nt;var $t=(L%2==0?1:-1)*(cn[Et.source+"|"+Et.target+"|"+L]?-1:1);Et.curveOffset=je%2==1?$t*Math.ceil(L/2)*ie:$t*(Math.floor(L/2)*ie+G)}else Gt&&(Et.type=Gt),Et.loopCfg={position:ue[L%8],dist:20*Math.floor(L/8)+50}}return U},me=function(){function ve(U){this.destroyed=!1,this.graph=U,this.destroyed=!1}return ve.prototype.getViewCenter=function(){var U=this.getFormatPadding(),G=this.graph,nt=this.graph.get("width"),vt=G.get("height");return{x:(nt-U[1]-U[3])/2+U[3],y:(vt-U[0]-U[2])/2+U[0]}},ve.prototype.fitCenter=function(){var U=this.graph,G=U.get("group");G.resetMatrix();var nt=G.getCanvasBBox();if(nt.width!==0&&nt.height!==0){var vt=this.getViewCenter(),Gt=nt.x+nt.width/2,Jt=nt.y+nt.height/2;U.translate(vt.x-Gt,vt.y-Jt)}},ve.prototype.fitView=function(){var U=this.graph,G=this.getFormatPadding(),nt=U.get("width"),vt=U.get("height"),Gt=U.get("group");Gt.resetMatrix();var Jt=Gt.getCanvasBBox();if(Jt.width!==0&&Jt.height!==0){var ie=this.getViewCenter(),ue=Jt.x+Jt.width/2,Ce=Jt.y+Jt.height/2;U.translate(ie.x-ue,ie.y-Ce);var we=(nt-G[1]-G[3])/Jt.width,cn=(vt-G[0]-G[2])/Jt.height,Cn=we;we>cn&&(Cn=cn),U.zoom(Cn,ie)}},ve.prototype.getFormatPadding=function(){var U=this.graph.get("fitViewPadding");return zt(U)},ve.prototype.focusPoint=function(U,G,nt){var vt=this,Gt=this.getViewCenter(),Jt=this.getPointByCanvas(Gt.x,Gt.y),ie=this.graph.get("group").getMatrix();if(ie||(ie=[1,0,0,0,1,0,0,0,1]),G){var ue=(Jt.x-U.x)*ie[0],Ce=(Jt.y-U.y)*ie[4],we=0,cn=0,Cn=0,_t=0;this.graph.get("canvas").animate(function(Xt){Cn=ue*Xt,_t=Ce*Xt,vt.graph.translate(Cn-we,_t-cn),we=Cn,cn=_t},Object(r.a)({},nt))}else this.graph.translate((Jt.x-U.x)*ie[0],(Jt.y-U.y)*ie[4])},ve.prototype.getPointByCanvas=function(U,G){var nt=this.graph.get("group").getMatrix();return nt||(nt=[1,0,0,0,1,0,0,0,1]),$({x:U,y:G},nt)},ve.prototype.getPointByClient=function(U,G){var nt=this.graph.get("canvas").getPointByClient(U,G);return this.getPointByCanvas(nt.x,nt.y)},ve.prototype.getClientByPoint=function(U,G){var nt=this.graph.get("canvas"),vt=this.getCanvasByPoint(U,G),Gt=nt.getClientByPoint(vt.x,vt.y);return{x:Gt.x,y:Gt.y}},ve.prototype.getCanvasByPoint=function(U,G){var nt=this.graph.get("group").getMatrix();return nt||(nt=[1,0,0,0,1,0,0,0,1]),X({x:U,y:G},nt)},ve.prototype.focus=function(U,G,nt){Object(c.x)(U)&&(U=this.graph.findById(U));var vt=U.get("group").getMatrix();vt||(vt=[1,0,0,0,1,0,0,0,1]),U&&this.focusPoint({x:vt[6],y:vt[7]},G,nt)},ve.prototype.changeSize=function(U,G){var nt=this.graph;if(!Object(c.t)(U)||!Object(c.t)(G))throw Error("invalid canvas width & height, please make sure width & height type is number");nt.set({width:U,height:G}),nt.get("canvas").changeSize(U,G),nt.get("plugins").forEach(function(vt){if(vt.get("gridContainer")){var Gt=nt.get("minZoom");Object(Ot.c)(vt.get("container"),{width:U+"px",height:G+"px"}),Object(Ot.c)(vt.get("gridContainer"),{width:U/Gt+"px",height:G/Gt+"px",left:0,top:0})}})},ve.prototype.destroy=function(){this.graph=null,this.destroyed=!1},ve}(),Se={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},Le=Math.PI,Je=Math.sin,On=Math.cos,gn=Je(Le/8),Wn=On(Le/8),kn=function(U,G){var nt=U.getBBox(),vt={x:nt.minX,y:nt.minY},Gt={x:nt.maxX,y:nt.maxY};if(G){var Jt=G.getMatrix();Jt||(Jt=[1,0,0,0,1,0,0,0,1]),vt=X(vt,Jt),Gt=X(Gt,Jt)}var ie=vt.x,ue=vt.y,Ce=Gt.x,we=Gt.y;return{x:ie,y:ue,minX:ie,minY:ue,maxX:Ce,maxY:we,width:Ce-ie,height:we-ue}},Vn=function(U){var G=U.sourceNode||U.targetNode,nt=G.get("group").getMatrix();nt||(nt=[1,0,0,0,1,0,0,0,1]);var vt=G.getKeyShape().getBBox(),Gt=U.loopCfg||{},Jt=Gt.dist||2*Math.max(vt.width,vt.height),ie=Gt.position||yt.defaultLoopPosition,ue=[nt[6],nt[7]],Ce=[U.startPoint.x,U.startPoint.y],we=[U.endPoint.x,U.endPoint.y],cn=vt.height/2,Cn=vt.height/2,_t=cn*gn,Xt=cn*Wn,Ee=Cn*gn,Vt=Cn*Wn;if(Ce[0]===we[0]&&Ce[1]===we[1]){switch(ie){case"top":Ce=[ue[0]-_t,ue[1]-Xt],we=[ue[0]+Ee,ue[1]-Vt];break;case"top-right":cn=vt.height/2,Cn=vt.width/2,Ce=[ue[0]+(_t=cn*gn),ue[1]-(Xt=cn*Wn)],we=[ue[0]+(Vt=Cn*Wn),ue[1]-(Ee=Cn*gn)];break;case"right":cn=vt.width/2,Cn=vt.width/2,Ce=[ue[0]+(Xt=cn*Wn),ue[1]-(_t=cn*gn)],we=[ue[0]+(Vt=Cn*Wn),ue[1]+(Ee=Cn*gn)];break;case"bottom-right":cn=vt.width/2,Cn=vt.height/2,Ce=[ue[0]+(Xt=cn*Wn),ue[1]+(_t=cn*gn)],we=[ue[0]+(Ee=Cn*gn),ue[1]+(Vt=Cn*Wn)];break;case"bottom":cn=vt.height/2,Cn=vt.height/2,Ce=[ue[0]+(_t=cn*gn),ue[1]+(Xt=cn*Wn)],we=[ue[0]-(Ee=Cn*gn),ue[1]+(Vt=Cn*Wn)];break;case"bottom-left":cn=vt.height/2,Cn=vt.width/2,Ce=[ue[0]-(_t=cn*gn),ue[1]+(Xt=cn*Wn)],we=[ue[0]-(Vt=Cn*Wn),ue[1]+(Ee=Cn*gn)];break;case"left":cn=vt.width/2,Cn=vt.width/2,Ce=[ue[0]-(Xt=cn*Wn),ue[1]+(_t=cn*gn)],we=[ue[0]-(Vt=Cn*Wn),ue[1]-(Ee=Cn*gn)];break;case"top-left":cn=vt.width/2,Cn=vt.height/2,Ce=[ue[0]-(Xt=cn*Wn),ue[1]-(_t=cn*gn)],we=[ue[0]-(Ee=Cn*gn),ue[1]-(Vt=Cn*Wn)];break;default:cn=vt.width/2,Cn=vt.width/2,Ce=[ue[0]-(_t=cn*gn),ue[1]-(Xt=cn*Wn)],we=[ue[0]+(Ee=Cn*gn),ue[1]-(Vt=Cn*Wn)]}if(Gt.clockwise===!1){var ce=[Ce[0],Ce[1]];Ce=[we[0],we[1]],we=[ce[0],ce[1]]}}var yn=[Ce[0]-ue[0],Ce[1]-ue[1]],Bn=(cn+Jt)/cn,Zn=(Cn+Jt)/Cn;Gt.clockwise===!1&&(Bn=(Cn+Jt)/Cn,Zn=(cn+Jt)/cn);var Kn=d.c.scale([0,0],yn,Bn),$e=[ue[0]+Kn[0],ue[1]+Kn[1]],je=[we[0]-ue[0],we[1]-ue[1]],L=d.c.scale([0,0],je,Zn),Et=[ue[0]+L[0],ue[1]+L[1]];return U.startPoint={x:Ce[0],y:Ce[1]},U.endPoint={x:we[0],y:we[1]},U.controlPoints=[{x:$e[0],y:$e[1]},{x:Et[0],y:Et[1]}],U},Dn=function(U,G,nt,vt,Gt){var Jt=[],ie=U.getPoint(G);if(ie===null)return{x:0,y:0,angle:0};if(G<1e-4)Jt=U.getStartTangent().reverse();else if(G>.9999)Jt=U.getEndTangent();else{var ue=U.getPoint(G+1e-4);Jt.push([ie.x,ie.y]),Jt.push([ue.x,ue.y])}var Ce=Math.atan2(Jt[1][1]-Jt[0][1],Jt[1][0]-Jt[0][0]);if(Ce<0&&(Ce+=2*Le),nt&&(ie.x+=On(Ce)*nt,ie.y+=Je(Ce)*nt),vt){var we=Ce-Le/2;Ce>.5*Le&&Ce<1.5*Le&&(we-=Le),ie.x+=On(we)*vt,ie.y+=Je(we)*vt}var cn={x:ie.x,y:ie.y,angle:Ce};return Gt?(Ce>.5*Le&&Ce<1.5*Le&&(Ce-=Le),Object(r.a)({rotate:Ce},cn)):cn},Nn=function ve(U,G){if(G(U)===!1)return!1;if(U&&U.children){for(var nt=U.children.length-1;nt>=0;nt--)if(!ve(U.children[nt],G))return!1}return!0},Qn=function(U,G){typeof G=="function"&&Nn(U,G)},ir=function(U,G){typeof G=="function"&&function nt(vt,Gt){if(vt&&vt.children){for(var Jt=vt.children.length-1;Jt>=0;Jt--)if(!nt(vt.children[Jt],Gt))return}return Gt(vt)!==!1}(U,G)},hr=function(U,G){return G*(Se[U]||1)},Sr=function(U,G){var nt=0,vt=new RegExp("[\u4E00-\u9FA5]+");return U.split("").forEach(function(Gt){vt.test(Gt)?nt+=G:nt+=hr(Gt,G)}),[nt,G]},mr=function(U,G){var nt=[],vt={},Gt={};U.forEach(function(ue){Gt[ue.id]=ue}),U.forEach(function(ue,Ce){var we=Object(c.c)(ue);we.itemType="combo",we.children=void 0,we.parentId===we.id?(console.warn("The parentId for combo "+we.id+" can not be the same as the combo's id"),delete we.parentId):we.parentId&&!Gt[we.parentId]&&(console.warn("The parent combo for combo "+we.id+" does not exist!"),delete we.parentId);var cn=vt[we.id];if(cn){if(we.children=cn.children,vt[we.id]=we,!(cn=we).parentId)return void nt.push(cn);var Cn=vt[cn.parentId];if(Cn)Cn.children?Cn.children.push(we):Cn.children=[we];else{var _t={id:cn.parentId,children:[cn]};vt[cn.parentId]=_t,vt[we.id]=we}}else if(Object(c.x)(ue.parentId)){var Xt=vt[ue.parentId];if(Xt)Xt.children?Xt.children.push(we):Xt.children=[we],vt[we.id]=we;else{var Ee={id:ue.parentId,children:[we]};vt[Ee.id]=Ee,vt[we.id]=we}}else nt.push(we),vt[we.id]=we});var Jt={};(G||[]).forEach(function(ue){Jt[ue.id]=ue;var Ce=vt[ue.comboId];if(Ce){var we={id:ue.id,comboId:ue.comboId};Ce.children?Ce.children.push(we):Ce.children=[we],we.itemType="node",vt[ue.id]=we}});var ie=0;return nt.forEach(function(ue){ue.depth=ie+10,Nn(ue,function(Ce){var we,cn=vt[Ce.id].itemType;we=cn==="node"?vt[Ce.comboId]:vt[Ce.parentId],Ce.depth=we&&cn==="node"?ie+1:ie+10,ie<Ce.depth&&(ie=Ce.depth);var Cn=Jt[Ce.id];return Cn&&(Cn.depth=Ce.depth),!0})}),nt},dr=function(U,G,nt){var vt,Gt=U,Jt={root:{children:U}},ie=!1,ue="root";(U||[]).forEach(function(_t){if(!ie)return _t.id===G?(vt=_t,_t.itemType==="combo"?vt.parentId=nt:vt.comboId=nt,void(ie=!0)):void Qn(_t,function(Xt){return Jt[Xt.id]={children:Xt.children},Gt=Jt[Xt.parentId||Xt.comboId||"root"].children,!Xt||!Xt.removed&&G!==Xt.id||!Gt||(ue=Xt.parentId||Xt.comboId||"root",vt=Xt,Xt.itemType==="combo"?vt.parentId=nt:vt.comboId=nt,ie=!0,!1)})});var Ce=(Gt=Jt[ue].children)?Gt.indexOf(vt):-1;if(Ce>-1&&Gt.splice(Ce,1),ie||(vt={id:G,itemType:"node",comboId:nt},Jt[G]={children:void 0}),G){var we=!1;if(nt){var cn=0;(U||[]).forEach(function(_t){we||Qn(_t,function(Xt){return nt!==Xt.id||(we=!0,Xt.children?Xt.children.push(vt):Xt.children=[vt],cn=Xt.depth,vt.itemType==="node"?vt.depth=cn+2:vt.depth=cn+1,!1)})})}else nt&&we||vt.itemType==="node"||U.push(vt);var Cn=vt.depth;Qn(vt,function(_t){return _t.itemType==="node"?Cn+=2:Cn+=1,_t.depth=Cn,!0})}return U},Br=function(U,G){var nt={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return U&&U.length!==0&&(U.forEach(function(vt){var Gt=G.findById(vt.id);if(Gt&&Gt.isVisible()){Gt.set("bboxCanvasCache",void 0);var Jt=Gt.getCanvasBBox();Jt.x&&nt.minX>Jt.minX&&(nt.minX=Jt.minX),Jt.y&&nt.minY>Jt.minY&&(nt.minY=Jt.minY),Jt.x&&nt.maxX<Jt.maxX&&(nt.maxX=Jt.maxX),Jt.y&&nt.maxY<Jt.maxY&&(nt.maxY=Jt.maxY)}}),nt.x=(nt.minX+nt.maxX)/2,nt.y=(nt.minY+nt.maxY)/2,nt.width=nt.maxX-nt.minX,nt.height=nt.maxY-nt.minY,nt.centerX=(nt.minX+nt.maxX)/2,nt.centerY=(nt.minY+nt.maxY)/2,Object.keys(nt).forEach(function(vt){nt[vt]!==1/0&&nt[vt]!==-1/0||(nt[vt]=void 0)})),nt},ii=function(U){var G=Object(c.t)(U.x)||Object(c.t)(U.y)||U.type||U.anchorPoints||U.size;return U.style&&(G=G||Object(c.t)(U.style.r)||Object(c.t)(U.style.width)||Object(c.t)(U.style.height)||Object(c.t)(U.style.rx)||Object(c.t)(U.style.ry)),G},mi=function(U){var G={};return Object.keys(U).forEach(function(nt){var vt=U[nt];if(Object(c.v)(vt)){var Gt={};Object.keys(vt).forEach(function(Jt){var ie=vt[Jt];(Jt!=="img"||Object(c.x)(ie))&&(Gt[Jt]=Object(c.c)(ie))}),G[nt]=Gt}else G[nt]=Object(c.c)(vt)}),G};function Pi(ve){return(Pi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(ve)}function sa(ve){if(typeof ve!="string")return ve;var U=function($e){if(typeof $e!="string")return $e;try{return JSON.parse($e.trim())}catch(je){return $e.trim()}},G=U(ve);if(typeof G!="string")return G;for(var nt=function($e){return $e[$e.length-1]},vt=ve.trim(),Gt=[],Jt=[],ie=function(){for(var $e=[],je=0;je<arguments.length;je++)$e[je]=arguments[je];return $e.some(function(L){return nt(Jt)===L})},ue=null,Ce=0,we="";Ce<vt.length;){var cn=vt[Ce],Cn=ie('"',"'");if(Cn||cn.trim()){var _t=vt[Ce-1]==="\\",Xt=ie("}"),Ee=ie("]"),Vt=ie(","),ce=nt(Gt);if(Cn)if(nt(Jt)!==cn||_t)we+=cn;else{Jt.pop();var yn=U(we);ce.push(yn),ue=yn,we=""}else if(Ee&&cn===",")we&&(ce.push(U(we)),we="");else if(Xt&&cn===":")Jt.push(","),we&&(ce.push(we),we="");else if(Vt&&cn===",")we&&(ce.push(U(we)),we=""),Jt.pop();else if(cn==="}"&&(Xt||Vt)){we&&(ce.push(U(we)),we=""),Vt&&Jt.pop();for(var Bn={},Zn=1;Zn<ce.length;Zn+=2)Bn[ce[Zn-1]]=ce[Zn];Gt.pop(),Gt.length&&nt(Gt).push(Bn),Jt.pop(),ue=Bn}else cn==="]"&&Ee?(we&&(ce.push(U(we)),we=""),Gt.pop(),Gt.length&&nt(Gt).push(ce),Jt.pop(),ue=ce):cn==="{"?(Gt.push([]),Jt.push("}")):cn==="["?(Gt.push([]),Jt.push("]")):cn==='"'?Jt.push('"'):cn==="'"?Jt.push("'"):we+=cn;Ce+=1}else Ce+=1}return ue||we}function Pa(ve,U){var G;U===void 0&&(U={x:0,y:0});var nt=Object(r.a)({x:0,y:0,width:0,height:0},U);if((G=ve.children)===null||G===void 0?void 0:G.length){var vt=ve.attrs,Gt=vt===void 0?{}:vt,Jt=Gt.marginTop,ie=Object(r.a)({},U);Jt&&(ie.y+=Jt);for(var ue=0;ue<ve.children.length;ue++){ve.children[ue].attrs.key=(Gt.key||"root")+" -"+ue+" ";var Ce=Pa(ve.children[ue],ie);if(Ce.bbox){var we=Ce.bbox;Ce.attrs.next==="inline"?ie.x+=Ce.bbox.width:ie.y+=Ce.bbox.height,we.width+we.x>nt.width&&(nt.width=we.width+we.x),we.height+we.y>nt.height&&(nt.height=we.height+we.y)}}}return ve.bbox=function(cn,Cn,_t){var Xt,Ee,Vt=cn.attrs,ce=Vt===void 0?{}:Vt,yn={x:Cn.x||0,y:Cn.y||0,width:_t.width||0,height:_t.height||0};switch(cn.type){case"maker":case"circle":ce.r&&(Ee=2*ce.r,Xt=2*ce.r);break;case"text":ce.text&&(Ee=Sr(ce.text,ce.fontSize||12)[0],Xt=16,yn.y+=Xt,yn.height=Xt,yn.width=Ee,cn.attrs=Object(r.a)({fontSize:12,fill:"#000"},ce));break;default:ce.width&&(Ee=ce.width),ce.height&&(Xt=ce.height)}return Xt>=0&&(yn.height=Xt),Ee>=0&&(yn.width=Ee),ce.marginTop&&(yn.y+=ce.marginTop),ce.marginLeft&&(yn.x+=ce.marginLeft),yn}(ve,U,nt),ve.attrs=Object(r.a)(Object(r.a)({},ve.attrs),ve.bbox),ve}function Mi(ve){var U={},G=function(vt){var Gt=function(ue){return function(Ce){for(var we=ue.length,cn=[],Cn=0,_t="";Cn<we;)if(ue[Cn]==="{"&&ue[Cn+1]==="{")cn.push(_t),_t="",Cn+=2;else if(ue[Cn]==="}"&&ue[Cn+1]==="}"){if(cn.length){var Xt=cn.pop();_t=Object(c.i)(Ce,_t,Xt.endsWith("=")?'"{'+_t+'}"':_t),cn.push(Xt+_t)}Cn+=2,_t=""}else _t+=ue[Cn],Cn+=1;return cn.push(_t),cn.map(function(Ee,Vt){return cn[Vt-1]&&cn[Vt-1].endsWith("=")?'"{'+Ee+'}"':Ee}).join("")}}(typeof ve=="function"?ve(vt):ve)(vt),Jt=document.createElement("div");Jt.innerHTML=Gt;var ie=Pa(function ue(Ce,we){var cn={},Cn=Ce.getAttributeNames&&Ce.getAttributeNames()||[],_t=Ce.children&&Array.from(Ce.children).map(function(Vt){return ue(Vt,we)}),Xt={},Ee=Ce.tagName?Ce.tagName.toLowerCase():"group";return Ee==="text"&&(cn.text=Ce.innerText),Xt.type=Ee,Ee==="img"&&(Xt.type="image"),Array.from(Cn).forEach(function(Vt){var ce=Vt.split("-").reduce(function(Zn,Kn){return Zn+Kn.charAt(0).toUpperCase()+Kn.slice(1)}),yn=Ce.getAttribute(Vt);try{if(ce==="style"||ce==="attrs"){var Bn=sa(yn);cn=Object(r.a)(Object(r.a)({},cn),Bn)}else Xt[ce]=sa(yn)}catch(Zn){if(ce==="style")throw Zn;Xt[ce]=yn}}),Xt.attrs=cn,we&&we.style&&Xt.name&&Pi(we.style[Xt.name])==="object"&&(Xt.attrs=Object(r.a)(Object(r.a)({},Xt.attrs),we.style[Xt.name])),we&&we.style&&Xt.keyshape&&(Xt.attrs=Object(r.a)(Object(r.a)({},Xt.attrs),we.style)),_t.length&&(Xt.children=_t),Xt}(Jt.children[0],vt));return Jt.remove(),ie};return{draw:function(vt,Gt){var Jt=G(vt),ie=Gt;return function ue(Ce){var we=Ce.attrs,cn=we===void 0?{}:we,Cn=Ce.bbox,_t=Ce.type,Xt=Ce.children,Ee=Object(r.c)(Ce,["attrs","bbox","type","children"]);if(Ce.type!=="group"){var Vt=Gt.addShape(Ce.type,Object(r.a)({attrs:cn,origin:{bbox:Cn,type:_t,children:Xt}},Ee));Ce.keyshape&&(ie=Vt)}Ce.children&&Ce.children.forEach(function(ce){return ue(ce)})}(Jt),U[vt.id]=[Jt],ie},update:function(vt,Gt){U[vt.id]||(U[vt.id]=[]);var Jt=Gt.getContainer(),ie=Jt.get("children"),ue=G(vt),Ce=function Cn(_t,Xt){var Ee,Vt,ce,yn,Bn=(_t||{}).type,Zn=((Xt==null?void 0:Xt.attrs)||{}).key;if(Zn&&_t&&(_t.attrs.key=Zn),!_t&&Xt)return{action:"delete",val:Xt,type:Bn,key:Zn};if(_t&&!Xt)return{action:"add",val:_t,type:Bn};if(!_t&&!Xt)return{action:"same",type:Bn};var Kn=[];if(((Ee=_t.children)===null||Ee===void 0?void 0:Ee.length)>0||((Vt=Xt.children)===null||Vt===void 0?void 0:Vt.length)>0)for(var $e=Math.max((ce=_t.children)===null||ce===void 0?void 0:ce.length,(yn=Xt.children)===null||yn===void 0?void 0:yn.length),je=Xt.children||[],L=_t.children||[],Et=0;Et<$e;Et+=1)Kn.push(Cn(L[Et],je[Et]));var $t=Object.keys(Xt.attrs),ye=Object.keys(_t.attrs);return Xt.type!==_t.type?{action:"restructure",nowTarget:_t,formerTarget:Xt,key:Zn,children:Kn}:$t.filter(function(Zt){return Zt!=="children"}).some(function(Zt){return _t.attrs[Zt]!==Xt.attrs[Zt]||!ye.includes(Zt)})?{action:"change",val:_t,children:Kn,type:Bn,key:Zn}:{action:"same",children:Kn,type:Bn,key:Zn}}(ue,U[vt.id].pop()),we=function Cn(_t){var Xt;_t.type!=="group"&&Jt.addShape(_t.type,{attrs:_t.attrs}),((Xt=_t.children)===null||Xt===void 0?void 0:Xt.length)&&_t.children.map(function(Ee){return Cn(Ee)})},cn=function Cn(_t){var Xt,Ee=ie.find(function(Vt){return Vt.attrs.key===_t.attrs.key});Ee&&Jt.removeChild(Ee),((Xt=_t.children)===null||Xt===void 0?void 0:Xt.length)&&_t.children.map(function(Vt){return Cn(Vt)})};(function Cn(_t){var Xt=_t.key;if(_t.type!=="group"){var Ee=ie.find(function(ce){return ce.attrs.key===Xt});switch(_t.action){case"change":if(Ee){var Vt=_t.val.keyshape?Gt.getOriginStyle():{};Ee.attr(Object(r.a)(Object(r.a)({},Vt),_t.val.attrs))}break;case"add":we(_t.val);break;case"delete":cn(_t.val);break;case"restructure":cn(_t.formerTarget),we(_t.nowTarget)}}_t.children&&_t.children.forEach(function(ce){return Cn(ce)})})(Ce),U[vt.id].push(ue)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Ki={};function fa(ve){return Ki[ve]||(Ki[ve]=Object(c.I)(ve)),Ki[ve]}var oa={defaultShapeType:"defaultType",className:null,getShape:function(U){return this[U]||this[this.defaultShapeType]||this["simple-circle"]},draw:function(U,G,nt){var vt=this.getShape(U),Gt=vt.draw(G,nt);return vt.afterDraw&&vt.afterDraw(G,nt,Gt),Gt},baseUpdate:function(U,G,nt){var vt=this.getShape(U);vt.update&&vt.update(G,nt),vt.afterUpdate&&vt.afterUpdate(G,nt)},setState:function(U,G,nt,vt){this.getShape(U).setState(G,nt,vt)},shouldUpdate:function(U){return!!this.getShape(U).update},getControlPoints:function(U,G){return this.getShape(U).getControlPoints(G)},getAnchorPoints:function(U,G){return this.getShape(U).getAnchorPoints(G)}},pa={options:{},draw:function(U,G){return this.drawShape(U,G)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(U){return U.controlPoints},getAnchorPoints:function(U){var G=this.options.anchorPoints;return U.anchorPoints||G}},La=function(){function ve(){}return ve.registerFactory=function(U,G){var nt=fa(U),vt=oa,Gt=Object(r.a)(Object(r.a)({},vt),G);return ve[nt]=Gt,Gt.className=nt,Gt},ve.getFactory=function(U){return ve[fa(U)]},ve.registerNode=function(U,G,nt){var vt,Gt=ve.Node;if(typeof G=="string"||typeof G=="function"){var Jt=Mi(G);vt=Object(r.a)(Object(r.a)({},Gt.getShape("single-node")),Jt)}else if(G.jsx)Jt=Mi(G.jsx),vt=Object(r.a)(Object(r.a)(Object(r.a)({},Gt.getShape("single-node")),Jt),G);else{Gt.getShape(nt);var ie=nt?Gt.getShape(nt):pa;vt=Object(r.a)(Object(r.a)({},ie),G)}return vt.type=U,vt.itemType="node",Gt[U]=vt,vt},ve.registerEdge=function(U,G,nt){var vt=ve.Edge,Gt=nt?vt.getShape(nt):pa,Jt=Object(r.a)(Object(r.a)({},Gt),G);return Jt.type=U,Jt.itemType="edge",vt[U]=Jt,Jt},ve.registerCombo=function(U,G,nt){var vt=ve.Combo,Gt=nt?vt.getShape(nt):pa,Jt=Object(r.a)(Object(r.a)({},Gt),G);return Jt.type=U,Jt.itemType="combo",vt[U]=Jt,Jt},ve}(),Yr=La;La.registerFactory("node",{defaultShapeType:"circle"}),La.registerFactory("edge",{defaultShapeType:"line"}),La.registerFactory("combo",{defaultShapeType:"circle"});var Sa=["startArrow","endArrow"],Pr=function(){function ve(U){this._cfg={},this.destroyed=!1;var G={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(G,this.getDefaultCfg(),U);var nt=this.get("model"),vt=nt.id,Gt=this.get("type");vt||(vt=Dt(Gt),this.get("model").id=vt),this.set("id",vt);var Jt=U.group;Jt&&(Jt.set("item",this),Jt.set("id",vt)),this.init(),this.draw();var ie=nt.shape||nt.type||(Gt==="edge"?"line":"circle"),ue=this.get("shapeFactory");if(ue&&ue[ie]){var Ce=ue[ie].options;if(Ce&&Ce.stateStyles){var we=this.get("styles")||nt.stateStyles;we=Object(c.e)({},Ce.stateStyles,we),this.set("styles",we)}}}return ve.prototype.calculateBBox=function(){var U=this.get("keyShape"),G=this.get("group"),nt=kn(U,G);return nt.x=nt.minX,nt.y=nt.minY,nt.width=nt.maxX-nt.minX,nt.height=nt.maxY-nt.minY,nt.centerX=(nt.minX+nt.maxX)/2,nt.centerY=(nt.minY+nt.maxY)/2,nt},ve.prototype.calculateCanvasBBox=function(){var U=this.get("keyShape"),G=this.get("group"),nt=kn(U,G);return nt.x=nt.minX,nt.y=nt.minY,nt.width=nt.maxX-nt.minX,nt.height=nt.maxY-nt.minY,nt.centerX=(nt.minX+nt.maxX)/2,nt.centerY=(nt.minY+nt.maxY)/2,nt},ve.prototype.drawInner=function(){var U=this.get("shapeFactory"),G=this.get("group"),nt=this.get("model");G.clear();var vt=nt.visible;if(vt===void 0||vt||this.changeVisibility(vt),U){this.updatePosition(nt);var Gt=this.getShapeCfg(nt),Jt=Gt.type,ie=U.draw(Jt,Gt,G);ie&&(this.set("keyShape",ie),ie.set("isKeyShape",!0),ie.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",Jt),this.restoreStates(U,Jt)}},ve.prototype.setOriginStyle=function(U){var G=this.get("group").get("children"),nt=this.getKeyShape(),vt=this,Gt=nt.get("name");if(this.get("originStyle")){var Jt=this.getOriginStyle();Gt&&!Jt[Gt]&&(Jt[Gt]={});var ie=this.getCurrentStatesStyle();Object(c.f)(G,function(Ce){var we=Ce.get("name"),cn=Ce.attr();if(we&&we!==Gt){var Cn=ie[we];Jt[we]||(Jt[we]={}),Cn?Object.keys(cn).forEach(function(Ee){var Vt=cn[Ee];Vt!==Cn[Ee]&&(Jt[we][Ee]=Vt)}):Jt[we]=Object(c.c)(cn)}else{var _t=Ce.attr(),Xt=Object(r.a)(Object(r.a)({},ie),ie[Gt]);Object.keys(_t).forEach(function(Ee){var Vt=_t[Ee];Object(c.w)(Vt)&&Sa.indexOf(we)===-1||Xt[Ee]!==Vt&&(Gt?Jt[Gt][Ee]=Vt:Jt[Ee]=Vt)})}}),Jt.path&&delete Jt.path,Jt.matrix&&delete Jt.matrix,vt.set("originStyle",Jt)}else{var ue={};Object(c.f)(G,function(Ce){var we=Ce.get("type"),cn=Ce.get("name");if(cn&&cn!==Gt)ue[cn]=we!=="image"?Object(c.c)(Ce.attr()):vt.getShapeStyleByName(cn);else{var Cn=vt.getShapeStyleByName();if(Cn.path&&delete Cn.path,Cn.matrix&&delete Cn.matrix,Gt)if(cn)ue[Gt]=Cn;else{var _t=Dt("shape");Ce.set("name",_t),ue[_t]=we!=="image"?Object(c.c)(Ce.attr()):vt.getShapeStyleByName(cn)}else Object.assign(ue,Cn)}}),vt.set("originStyle",ue)}},ve.prototype.restoreStates=function(U,G){var nt=this,vt=nt.get("states");Object(c.f)(vt,function(Gt){U.setState(G,Gt,!0,nt)})},ve.prototype.init=function(){var U=Yr.getFactory(this.get("type"));this.set("shapeFactory",U)},ve.prototype.get=function(U){return this._cfg[U]},ve.prototype.set=function(U,G){Object(c.w)(U)?this._cfg=Object(r.a)(Object(r.a)({},this._cfg),U):this._cfg[U]=G},ve.prototype.getDefaultCfg=function(){return{}},ve.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null)},ve.prototype.beforeDraw=function(){},ve.prototype.afterDraw=function(){},ve.prototype.afterUpdate=function(){},ve.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},ve.prototype.getShapeStyleByName=function(U){var G,nt=this.get("group");if(G=U?nt.find(function(Gt){return Gt.get("name")===U}):this.getKeyShape()){var vt={};return Object(c.f)(G.attr(),function(Gt,Jt){Jt!=="img"&&(vt[Jt]=Gt)}),vt}return{}},ve.prototype.getShapeCfg=function(U){var G=this.get("styles");if(G){var nt=U;return nt.style=Object(r.a)(Object(r.a)({},G),U.style),nt}return U},ve.prototype.getStateStyle=function(U){var G=this.get("styles");return G&&G[U]},ve.prototype.getOriginStyle=function(){return this.get("originStyle")},ve.prototype.getCurrentStatesStyle=function(){var U=this,G={},nt=U.getStates();return nt&&nt.length?(Object(c.f)(U.getStates(),function(vt){G=Object.assign(G,U.getStateStyle(vt))}),G):this.getOriginStyle()},ve.prototype.setState=function(U,G){var nt=this.get("states"),vt=this.get("shapeFactory"),Gt=U,Jt=U;Object(c.x)(G)&&(Gt=U+":"+G,Jt=U+":");var ie=nt;if(Object(c.n)(G)){var ue=nt.indexOf(Jt);if(G){if(ue>-1)return;nt.push(Gt)}else ue>-1&&nt.splice(ue,1)}else if(Object(c.x)(G)){var Ce=nt.filter(function(cn){return cn.includes(Jt)});Ce.length>0&&this.clearStates(Ce),(ie=ie.filter(function(cn){return!cn.includes(Jt)})).push(Gt),this.set("states",ie)}if(vt){var we=this.get("model").type;vt.setState(we,U,G,this)}},ve.prototype.clearStates=function(U){var G=this,nt=G.getStates(),vt=G.get("shapeFactory"),Gt=G.get("model").type;U||(U=nt),Object(c.x)(U)&&(U=[U]);var Jt=nt.filter(function(ie){return U.indexOf(ie)===-1});G.set("states",Jt),U.forEach(function(ie){vt.setState(Gt,ie,!1,G)})},ve.prototype.getContainer=function(){return this.get("group")},ve.prototype.getKeyShape=function(){return this.get("keyShape")},ve.prototype.getModel=function(){return this.get("model")},ve.prototype.getType=function(){return this.get("type")},ve.prototype.getID=function(){return this.get("id")},ve.prototype.isItem=function(){return!0},ve.prototype.getStates=function(){return this.get("states")},ve.prototype.hasState=function(U){return this.getStates().indexOf(U)>=0},ve.prototype.refresh=function(){var U=this.get("model");this.updatePosition(U),this.updateShape(),this.afterUpdate(),this.clearCache()},ve.prototype.isOnlyMove=function(U){return!1},ve.prototype.update=function(U,G){G===void 0&&(G=!1);var nt=this.get("model"),vt=nt.visible,Gt=U.visible;vt!==Gt&&Gt!==void 0&&this.changeVisibility(Gt);var Jt=nt.x,ie=nt.y;U.x=isNaN(U.x)?nt.x:U.x,U.y=isNaN(U.y)?nt.y:U.y;var ue=this.get("styles");if(U.stateStyles){var Ce=U.stateStyles;Object(c.A)(ue,Ce),delete U.stateStyles}Object.assign(nt,U),G?this.updatePosition(U):(Jt===U.x&&ie===U.y||this.updatePosition(U),this.updateShape()),this.afterUpdate(),this.clearCache()},ve.prototype.updateShape=function(){var U=this.get("shapeFactory"),G=this.get("model"),nt=G.type;if(U.shouldUpdate(nt)&&nt===this.get("currentShape")){var vt=this.getShapeCfg(G);U.baseUpdate(nt,vt,this)}else this.draw();this.setOriginStyle(G),this.restoreStates(U,nt)},ve.prototype.updatePosition=function(U){var G=this.get("model"),nt=Object(c.s)(U.x)?G.x:U.x,vt=Object(c.s)(U.y)?G.y:U.y,Gt=this.get("group");Object(c.s)(nt)||Object(c.s)(vt)||(Gt.resetMatrix(),ut(Gt,{x:nt,y:vt}),G.x=nt,G.y=vt,this.clearCache())},ve.prototype.getBBox=function(){var U=this.get("bboxCache");return U||(U=this.calculateBBox(),this.set("bboxCache",U)),U},ve.prototype.getCanvasBBox=function(){var U=this.get("bboxCanvasCache");return U||(U=this.calculateCanvasBBox(),this.set("bboxCanvasCache",U)),U},ve.prototype.toFront=function(){this.get("group").toFront()},ve.prototype.toBack=function(){this.get("group").toBack()},ve.prototype.show=function(){this.changeVisibility(!0)},ve.prototype.hide=function(){this.changeVisibility(!1)},ve.prototype.changeVisibility=function(U){var G=this.get("group");U?G.show():G.hide(),this.set("visible",U)},ve.prototype.isVisible=function(){return this.get("visible")},ve.prototype.enableCapture=function(U){var G=this.get("group");G&&G.set("capture",U)},ve.prototype.destroy=function(){if(!this.destroyed){var U=this.get("animate"),G=this.get("group");U&&G.stopAnimate(),this.clearCache(),G.remove(),this._cfg=null,this.destroyed=!0}},ve}(),si={source:"start",target:"end"},ti=function(ve){function U(){return ve!==null&&ve.apply(this,arguments)||this}return Object(r.b)(U,ve),U.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},U.prototype.setEnd=function(G,nt){var vt=si[G]+"Point",Gt=G+"Node",Jt=this.get(Gt);Jt&&!Jt.destroyed&&Jt.removeEdge(this),Object(c.w)(nt)?(this.set(vt,nt),this.set(Gt,null)):(nt.addEdge(this),this.set(Gt,nt),this.set(vt,null))},U.prototype.getLinkPoint=function(G,nt,vt){var Gt=si[G]+"Point",Jt=G+"Node",ie=this.get(Gt);if(!ie){var ue=this.get(Jt),Ce=G+"Anchor",we=this.getPrePoint(G,vt),cn=nt[Ce];Object(c.s)(cn)||(ie=ue.getLinkPointByAnchor(cn)),ie=ie||ue.getLinkPoint(we),Object(c.s)(ie.index)||this.set(G+"AnchorIndex",ie.index)}return ie},U.prototype.getPrePoint=function(G,nt){if(nt&&nt.length)return nt[G==="source"?0:nt.length-1];var vt=G==="source"?"target":"source";return this.getEndPoint(vt)},U.prototype.getEndPoint=function(G){var nt=G+"Node",vt=si[G]+"Point",Gt=this.get(nt);return Gt?Gt.get("model"):this.get(vt)},U.prototype.getControlPointsByCenter=function(G){var nt=this.getEndPoint("source"),vt=this.getEndPoint("target"),Gt=this.get("shapeFactory"),Jt=G.type;return Gt.getControlPoints(Jt,{startPoint:nt,endPoint:vt})},U.prototype.getEndCenter=function(G){var nt=G+"Node",vt=si[G]+"Point",Gt=this.get(nt);if(Gt){var Jt=Gt.getBBox();return{x:Jt.centerX,y:Jt.centerY}}return this.get(vt)},U.prototype.init=function(){ve.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},U.prototype.getShapeCfg=function(G){var nt=this.get("linkCenter"),vt=ve.prototype.getShapeCfg.call(this,G);if(nt)vt.startPoint=this.getEndCenter("source"),vt.endPoint=this.getEndCenter("target");else{var Gt=vt.controlPoints||this.getControlPointsByCenter(vt);vt.startPoint=this.getLinkPoint("source",G,Gt),vt.endPoint=this.getLinkPoint("target",G,Gt)}return vt.sourceNode=this.get("sourceNode"),vt.targetNode=this.get("targetNode"),vt},U.prototype.getModel=function(){var G=this.get("model"),nt=this.get("sourceNode"),vt=this.get("targetNode");return nt?delete G.sourceNode:G.source=this.get("startPoint"),vt?delete G.targetNode:G.target=this.get("endPoint"),Object(c.x)(G.source)||Object(c.w)(G.source)||(G.source=G.source.getID()),Object(c.x)(G.target)||Object(c.w)(G.target)||(G.target=G.target.getID()),G},U.prototype.setSource=function(G){this.setEnd("source",G),this.set("source",G)},U.prototype.setTarget=function(G){this.setEnd("target",G),this.set("target",G)},U.prototype.getSource=function(){return this.get("source")},U.prototype.getTarget=function(){return this.get("target")},U.prototype.updatePosition=function(){},U.prototype.update=function(G,nt){nt===void 0&&(nt=!1);var vt=this.get("model"),Gt=vt.visible,Jt=G.visible;Gt!==Jt&&Jt!==void 0&&this.changeVisibility(Jt);var ie=this.get("styles");if(G.stateStyles){var ue=G.stateStyles;Object(c.A)(ie,ue),delete G.stateStyles}Object.assign(vt,G),this.updateShape(),this.afterUpdate(),this.clearCache()},U.prototype.destroy=function(){var G=this.get("sourceNode"),nt=this.get("targetNode");G&&!G.destroyed&&G.removeEdge(this),nt&&!nt.destroyed&&nt.removeEdge(this),ve.prototype.destroy.call(this)},U}(Pr),$r=function(ve){function U(){return ve!==null&&ve.apply(this,arguments)||this}return Object(r.b)(U,ve),U.prototype.getNearestPoint=function(G,nt){for(var vt=0,Gt=G[0],Jt=Z(G[0],nt),ie=0;ie<G.length;ie++){var ue=G[ie],Ce=Z(ue,nt);Ce<Jt&&(Gt=ue,Jt=Ce,vt=ie)}return Gt.anchorIndex=vt,Gt},U.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},U.prototype.getEdges=function(){return this.get("edges")},U.prototype.getInEdges=function(){var G=this;return this.get("edges").filter(function(nt){return nt.get("target")===G})},U.prototype.getOutEdges=function(){var G=this;return this.get("edges").filter(function(nt){return nt.get("source")===G})},U.prototype.getNeighbors=function(G){var nt=this,vt=this.get("edges");return G==="target"?vt.filter(function(Gt){return Gt.getSource()===nt}).map(function(Gt){return Gt.getTarget()}):G==="source"?vt.filter(function(Gt){return Gt.getTarget()===nt}).map(function(Gt){return Gt.getSource()}):vt.map(function(Gt){return Gt.getSource()===nt?Gt.getTarget():Gt.getSource()})},U.prototype.getLinkPointByAnchor=function(G){return this.getAnchorPoints()[G]},U.prototype.getLinkPoint=function(G){var nt,vt,Gt=this.get("keyShape").get("type"),Jt=this.get("type"),ie=this.getBBox();Jt==="combo"?(nt=ie.centerX||(ie.maxX+ie.minX)/2,vt=ie.centerY||(ie.maxY+ie.minY)/2):(nt=ie.centerX,vt=ie.centerY);var ue,Ce=this.getAnchorPoints();switch(Gt){case"circle":ue=P({x:nt,y:vt,r:ie.width/2},G);break;case"ellipse":ue=W({x:nt,y:vt,rx:ie.width/2,ry:ie.height/2},G);break;default:ue=j(ie,G)}var we=ue;return Ce.length&&(we||(we=G),we=this.getNearestPoint(Ce,we)),we||(we={x:nt,y:vt}),we},U.prototype.getAnchorPoints=function(){var G=this.get("anchorPointsCache");if(!G){G=[];var nt=this.get("shapeFactory"),vt=this.getBBox(),Gt=this.get("model"),Jt=this.getShapeCfg(Gt),ie=Gt.type,ue=nt.getAnchorPoints(ie,Jt)||[];Object(c.f)(ue,function(Ce,we){var cn={x:vt.minX+Ce[0]*vt.width,y:vt.minY+Ce[1]*vt.height,anchorIndex:we};G.push(cn)}),this.set("anchorPointsCache",G)}return G},U.prototype.addEdge=function(G){this.get("edges").push(G)},U.prototype.lock=function(){this.set("locked",!0)},U.prototype.unlock=function(){this.set("locked",!1)},U.prototype.hasLocked=function(){return this.get("locked")},U.prototype.removeEdge=function(G){var nt=this.getEdges(),vt=nt.indexOf(G);vt>-1&&nt.splice(vt,1)},U.prototype.clearCache=function(){this.set("bboxCache",null),this.set("anchorPointsCache",null)},U.prototype.isOnlyMove=function(G){if(!G)return!1;var nt=!Object(c.s)(G.x),vt=!Object(c.s)(G.y),Gt=Object.keys(G);return Gt.length===1&&(nt||vt)||Gt.length===2&&nt&&vt},U}(Pr),ui=function(ve){function U(){return ve!==null&&ve.apply(this,arguments)||this}return Object(r.b)(U,ve),U.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},U.prototype.getShapeCfg=function(G){var nt=this.get("styles"),vt=this.get("bbox");if(nt&&vt){var Gt=G,Jt={r:Math.hypot(vt.height,vt.width)/2||yt.defaultCombo.size[0]/2,width:vt.width||yt.defaultCombo.size[0],height:vt.height||yt.defaultCombo.size[1]};Gt.style=Object(r.a)(Object(r.a)(Object(r.a)({},nt),G.style),Jt);var ie=G.padding||yt.defaultCombo.padding;return Object(c.t)(ie)?(Jt.r+=ie,Jt.width+=2*ie,Jt.height+=2*ie):(Jt.r+=ie[0],Jt.width+=ie[1]+ie[3]||2*ie[1],Jt.height+=ie[0]+ie[2]||2*ie[0]),this.set("sizeCache",Jt),Gt}return G},U.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var G=this.get("keyShape"),nt=this.get("group"),vt=kn(G,nt);vt.centerX=(vt.minX+vt.maxX)/2,vt.centerY=(vt.minY+vt.maxY)/2;var Gt=this.get("sizeCache"),Jt=this.get("bboxCache")||{},ie=Jt.x,ue=Jt.x;return Gt?(G.get("type")==="circle"?(vt.width=2*Gt.r,vt.height=2*Gt.r):(vt.width=Gt.width,vt.height=Gt.height),vt.minX=vt.centerX-vt.width/2,vt.minY=vt.centerY-vt.height/2,vt.maxX=vt.centerX+vt.width/2,vt.maxY=vt.centerY+vt.height/2):(vt.width=vt.maxX-vt.minX,vt.height=vt.maxY-vt.minY,vt.centerX=(vt.minX+vt.maxX)/2,vt.centerY=(vt.minY+vt.maxY)/2),vt.x=vt.minX,vt.y=vt.minY,vt.x===ie&&vt.y===ue||this.set("anchorPointsCache",null),vt}},U.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},U.prototype.getNodes=function(){return this.get("nodes")},U.prototype.getCombos=function(){return this.get("combos")},U.prototype.addChild=function(G){switch(G.getType()){case"node":this.addNode(G);break;case"combo":this.addCombo(G);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},U.prototype.addCombo=function(G){return this.get("combos").push(G),!0},U.prototype.addNode=function(G){return this.get("nodes").push(G),!0},U.prototype.removeChild=function(G){switch(G.getType()){case"node":this.removeNode(G);break;case"combo":this.removeCombo(G);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},U.prototype.removeCombo=function(G){if(G){var nt=this.getCombos(),vt=nt.indexOf(G);return vt>-1&&(nt.splice(vt,1),!0)}},U.prototype.removeNode=function(G){if(G){var nt=this.getNodes(),vt=nt.indexOf(G);return vt>-1&&(nt.splice(vt,1),!0)}},U.prototype.isOnlyMove=function(G){return!1},U.prototype.getBBox=function(){return this.set("bboxCanvasCache",null),this.calculateCanvasBBox()},U.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null),this.set("anchorPointsCache",null)},U.prototype.destroy=function(){if(!this.destroyed){var G=this.get("animate"),nt=this.get("group");G&&nt.stopAnimate(),this.clearCache(),this.set("sizeCache",null),this.set("bbox",null),nt.remove(),this._cfg=null,this.destroyed=!0}},U}($r),li=function(){function ve(U){this.graph=U,this.destroyed=!1}return ve.prototype.addItem=function(U,G){var nt=this,vt=this.graph,Gt=U==="vedge"?"edge":U,Jt=vt.get(Gt+"Group")||vt.get("group"),ie=Object(c.I)(Gt),ue=null,Ce=vt.get(Gt+Object(c.I)("stateStyles"))||{},we=vt.get("default"+ie);G.stateStyles&&(Ce=G.stateStyles),we&&Object(c.f)(we,function(Bn,Zn){Object(c.v)(Bn)&&!Object(c.m)(Bn)?G[Zn]=Object(c.e)({},Bn,G[Zn]):Object(c.m)(Bn)?G[Zn]=G[Zn]||Object(c.c)(we[Zn]):G[Zn]=G[Zn]||we[Zn]});var cn=vt.get(Gt+"Mapper");if(cn){var Cn=cn(G);Cn.stateStyles&&(Ce=Cn.stateStyles,delete Cn.stateStyles),Object(c.f)(Cn,function(Bn,Zn){Object(c.v)(Bn)&&!Object(c.m)(Bn)?G[Zn]=Object(c.e)({},G[Zn],Bn):G[Zn]=Cn[Zn]||G[Zn]})}if(vt.emit("beforeadditem",{type:U,model:G}),U==="edge"||U==="vedge"){var _t=void 0,Xt=void 0;if(_t=G.source,Xt=G.target,_t&&Object(c.x)(_t)&&(_t=vt.findById(_t)),Xt&&Object(c.x)(Xt)&&(Xt=vt.findById(Xt)),!_t||!Xt)return void console.warn("The source or target node of edge "+G.id+" does not exist!");_t.getType&&_t.getType()==="combo"&&(G.isComboEdge=!0),Xt.getType&&Xt.getType()==="combo"&&(G.isComboEdge=!0),ue=new ti({model:G,source:_t,target:Xt,styles:Ce,linkCenter:vt.get("linkCenter"),group:Jt.addGroup()})}else if(U==="node")ue=new $r({model:G,styles:Ce,group:Jt.addGroup()});else if(U==="combo"){var Ee=G.children,Vt=Br(Ee,vt);G.x=Vt.x||G.x||100*Math.random(),G.y=Vt.y||G.y||100*Math.random();var ce=Jt.addGroup();ce.setZIndex(G.depth);var yn=(ue=new ui({model:G,styles:Ce,bbox:Vt,group:ce})).getModel();(Ee||[]).forEach(function(Bn){var Zn=vt.findById(Bn.id);ue.addChild(Zn),Bn.depth=yn.depth+2}),G.collapsed&&setTimeout(function(){vt.collapseCombo(ue),nt.updateCombo(ue,[])},250)}if(ue)return vt.get(U+"s").push(ue),vt.get("itemMap")[ue.get("id")]=ue,vt.emit("afteradditem",{item:ue,model:G}),ue},ve.prototype.updateItem=function(U,G){var nt,vt,Gt=this.graph;if(Object(c.x)(U)&&(U=Gt.findById(U)),U&&!U.destroyed){var Jt="";U.getType&&(Jt=U.getType());var ie=Gt.get(Jt+"Mapper"),ue=U.getModel(),Ce=U.isOnlyMove(G);if(ie){var we=ie(Object(c.e)({},ue,G)),cn=Object(c.e)({},ue,we,G);we.stateStyles&&(U.set("styles",cn.stateStyles),delete cn.stateStyles),Object(c.f)(cn,function(yn,Bn){G[Bn]=yn})}else Object(c.f)(G,function(yn,Bn){ue[Bn]&&Object(c.v)(yn)&&!Object(c.m)(yn)&&(G[Bn]=Object(r.a)(Object(r.a)({},ue[Bn]),G[Bn]))});if(Gt.emit("beforeupdateitem",{item:U,cfg:G}),Jt==="edge"){if(G.source){var Cn=G.source;Object(c.x)(Cn)&&(Cn=Gt.findById(Cn)),U.setSource(Cn)}if(G.target){var _t=G.target;Object(c.x)(_t)&&(_t=Gt.findById(_t)),U.setTarget(_t)}U.update(G)}if(Jt==="node"||Jt==="combo"){U.update(G,Ce);var Xt=U.getEdges(),Ee=ii(G);if(Ee&&Jt==="node")Object(c.f)(Xt,function(yn){yn.refresh()});else if(Ee&&Jt==="combo"){var Vt=U.get("shapeFactory"),ce=ue.type||"circle";(ue.animate===void 0||G.animate===void 0?(vt=(nt=Vt[ce])===null||nt===void 0?void 0:nt.options)===null||vt===void 0?void 0:vt.animate:ue.animate||G.animate)?setTimeout(function(){if(U&&!U.destroyed){var yn=U.getKeyShape();yn&&!yn.destroyed&&Object(c.f)(Xt,function(Bn){Bn&&!Bn.destroyed&&Bn.refresh()})}},201):Object(c.f)(Xt,function(yn){yn.refresh()})}}Gt.emit("afterupdateitem",{item:U,cfg:G})}},ve.prototype.updateCombo=function(U,G){var nt,vt,Gt=this.graph;if(Object(c.x)(U)&&(U=Gt.findById(U)),U&&!U.destroyed){var Jt=Br(G,Gt);U.set("bbox",Jt),U.update({x:Jt.x,y:Jt.y});var ie=U.getEdges()||[],ue=ie.length,Ce=U.getModel(),we=U.get("shapeFactory"),cn=Ce.type||"circle";if(Ce.animate===void 0?(vt=(nt=we[cn])===null||nt===void 0?void 0:nt.options)===null||vt===void 0?void 0:vt.animate:Ce.animate)setTimeout(function(){if(U&&!U.destroyed){var Xt=U.getKeyShape();if(Xt&&!Xt.destroyed)for(var Ee=0;Ee<ue;Ee++){var Vt=ie[Ee];Vt&&!Vt.destroyed&&Vt.refresh()}}},201);else for(var Cn=0;Cn<ue;Cn++){var _t=ie[Cn];_t&&!_t.destroyed&&_t.refresh()}}},ve.prototype.collapseCombo=function(U){var G=this.graph;Object(c.x)(U)&&(U=G.findById(U));var nt=U.getChildren();nt.nodes.forEach(function(vt){G.hideItem(vt)}),nt.combos.forEach(function(vt){G.hideItem(vt)})},ve.prototype.expandCombo=function(U){var G=this.graph;Object(c.x)(U)&&(U=G.findById(U));var nt=U.getChildren();nt.nodes.forEach(function(vt){G.showItem(vt)}),nt.combos.forEach(function(vt){vt.getModel().collapsed?vt.show():G.showItem(vt)})},ve.prototype.removeItem=function(U){var G=this,nt=this.graph;if(Object(c.x)(U)&&(U=nt.findById(U)),U&&!U.destroyed){var vt=Object(c.c)(U.getModel());nt.emit("beforeremoveitem",{item:vt});var Gt="";U.getType&&(Gt=U.getType());var Jt=nt.get(Gt+"s"),ie=Jt.indexOf(U);if(ie>-1&&Jt.splice(ie,1),Gt==="edge"){var ue=nt.get("v"+Gt+"s"),Ce=ue.indexOf(U);Ce>-1&&ue.splice(Ce,1)}var we=U.get("id");delete nt.get("itemMap")[we];var cn=nt.get("comboTrees"),Cn=U.get("id");if(Gt==="node"){var _t=U.getModel().comboId;if(cn){var Xt=cn,Ee=!1;cn.forEach(function(Kn){Ee||Qn(Kn,function($e){if($e.id===Cn&&Xt){var je=Xt.indexOf($e);return Xt.splice(je,1),Ee=!0,!1}return Xt=$e.children,!0})})}for(var Vt=(Zn=U.getEdges()).length-1;Vt>=0;Vt--)nt.removeItem(Zn[Vt],!1);_t&&nt.updateCombo(_t)}else if(Gt==="combo"){var ce,yn=U.getModel().parentId,Bn=!1;(cn||[]).forEach(function(Kn){Bn||Qn(Kn,function($e){return $e.id!==Cn||(ce=$e,Bn=!0,!1)})}),ce.removed=!0,ce&&ce.children&&ce.children.forEach(function(Kn){G.removeItem(Kn.id)});var Zn;for(Vt=(Zn=U.getEdges()).length;Vt>=0;Vt--)nt.removeItem(Zn[Vt],!1);yn&&nt.updateCombo(yn)}U.destroy(),nt.emit("afterremoveitem",{item:vt})}},ve.prototype.setItemState=function(U,G,nt){var vt=this.graph,Gt=G;Object(c.x)(nt)&&(Gt=G+":"+nt),U.hasState(Gt)===nt&&nt||Object(c.x)(nt)&&U.hasState(Gt)||(vt.emit("beforeitemstatechange",{item:U,state:Gt,enabled:nt}),U.setState(G,nt),vt.autoPaint(),vt.emit("afteritemstatechange",{item:U,state:Gt,enabled:nt}))},ve.prototype.priorityState=function(U,G){var nt=this.graph,vt=U;Object(c.x)(U)&&(vt=nt.findById(U)),this.setItemState(vt,G,!1),this.setItemState(vt,G,!0)},ve.prototype.clearItemStates=function(U,G){var nt=this.graph;Object(c.x)(U)&&(U=nt.findById(U)),nt.emit("beforeitemstatesclear",{item:U,states:G}),U.clearStates(G),nt.emit("afteritemstatesclear",{item:U,states:G})},ve.prototype.refreshItem=function(U){var G=this.graph;Object(c.x)(U)&&(U=G.findById(U)),G.emit("beforeitemrefresh",{item:U}),U.refresh(),G.emit("afteritemrefresh",{item:U})},ve.prototype.addCombos=function(U,G){var nt=this,vt=this.graph;(U||[]).forEach(function(Jt){ir(Jt,function(ie){var ue;return G.forEach(function(Ce){Ce.id===ie.id&&(Ce.children=ie.children,Ce.depth=ie.depth,ue=Ce)}),ue&&nt.addItem("combo",ue),!0})});var Gt=vt.get("comboGroup");Gt&&Gt.sort()},ve.prototype.changeItemVisibility=function(U,G){var nt=this,vt=this.graph;if(Object(c.x)(U)&&(U=vt.findById(U)),U){if(vt.emit("beforeitemvisibilitychange",{item:U,visible:G}),U.changeVisibility(G),U.getType&&U.getType()==="node"){var Gt=U.getEdges();Object(c.f)(Gt,function(we){(!G||we.get("source").isVisible()&&we.get("target").isVisible())&&nt.changeItemVisibility(we,G)})}else if(U.getType&&U.getType()==="combo"){var Jt=vt.get("comboTrees"),ie=U.get("id"),ue=[],Ce=!1;(Jt||[]).forEach(function(we){Ce||we.children&&we.children.length!==0&&Qn(we,function(cn){return cn.id!==ie||(ue=cn.children,Ce=!0,!1)})}),ue&&ue.forEach(function(we){var cn=vt.findById(we.id);nt.changeItemVisibility(cn,G)}),Gt=U.getEdges(),Object(c.f)(Gt,function(we){(!G||we.get("source").isVisible()&&we.get("target").isVisible())&&nt.changeItemVisibility(we,G)})}return vt.emit("afteritemvisibilitychange",{item:U,visible:G}),U}console.warn("The item to be shown or hidden does not exist!")},ve.prototype.destroy=function(){this.graph=null,this.destroyed=!0},ve}(),xi=null,Ci=function(){function ve(U){this.graph=U,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return ve.checkCache=function(U,G,nt){if(nt[G]){var vt=nt[G].indexOf(U);vt>=0&&nt[G].splice(vt,1)}},ve.cacheState=function(U,G,nt){nt[G]||(nt[G]=[]),nt[G].push(U)},ve.prototype.updateState=function(U,G,nt){var vt=this,Gt=ve.checkCache,Jt=ve.cacheState;if(!U.destroyed){var ie=this.cachedStates,ue=ie.enabled,Ce=ie.disabled;nt?(Gt(U,G,Ce),Jt(U,G,ue)):(Gt(U,G,ue),Jt(U,G,Ce)),xi&&clearTimeout(xi),xi=setTimeout(function(){xi=null,vt.updateGraphStates()},16)}},ve.prototype.updateStates=function(U,G,nt){var vt=this;Object(c.x)(G)?this.updateState(U,G,nt):G.forEach(function(Gt){vt.updateState(U,Gt,nt)})},ve.prototype.updateGraphStates=function(){var U=this.graph.get("states"),G=this.cachedStates;Object(c.f)(G.disabled,function(nt,vt){U[vt]&&(U[vt]=U[vt].filter(function(Gt){return nt.indexOf(Gt)<0&&!nt.destroyed}))}),Object(c.f)(G.enabled,function(nt,vt){if(U[vt]){var Gt={};U[vt].forEach(function(Jt){Jt.destroyed||(Gt[Jt.get("id")]=!0)}),nt.forEach(function(Jt){if(!Jt.destroyed){var ie=Jt.get("id");Gt[ie]||(Gt[ie]=!0,U[vt].push(Jt))}})}else U[vt]=nt}),this.graph.emit("graphstatechange",{states:U}),this.cachedStates={enabled:{},disabled:{}}},ve.prototype.destroy=function(){this.graph=null,this.cachedStates=null,xi&&clearTimeout(xi),xi=null,this.destroyed=!0},ve}(),di=t(31),Ti=function(U,G){return U&&G?U.replace(/\\?\{([^{}]+)\}/g,function(nt,vt){if(nt.charAt(0)==="\\")return nt.slice(1);var Gt=G[vt];return Gt===0&&(Gt="0"),Gt||""}):U},pi=function(U){var G=[];if(U.length<2)throw new Error("point length must largn than 2, now it's "+U.length);for(var nt=0,vt=U;nt<vt.length;nt++){var Gt=vt[nt],Jt=Gt.x,ie=Gt.y;G.push(Jt),G.push(ie)}var ue=Object(di.a)(G);return ue.unshift(["M",U[0].x,U[0].y]),ue},Ni=function(U,G,nt,vt){nt===void 0&&(nt=0),vt===void 0&&(vt=0);var Gt={x:(1-nt)*U.x+nt*G.x,y:(1-nt)*U.y+nt*G.y},Jt=[0,0];d.c.normalize(Jt,[G.x-U.x,G.y-U.y]),Jt&&(Jt[0]||Jt[1])||(Jt=[0,0]);var ie=[-Jt[1]*vt,Jt[0]*vt];return Gt.x+=ie[0],Gt.y+=ie[1],Gt},Bi=function(U,G){var nt=U.length;if(!nt)return"";for(var vt="",Gt=0;Gt<nt;Gt++){var Jt=U[Gt];vt+=Ti(Gt===0?"M{x} {y}":"L{x} {y}",Jt)}return G&&(vt+="Z"),vt},Fi=function(U){var G=[];return U.forEach(function(nt){if(nt[0]!=="A")for(var vt=1;vt<nt.length;vt+=2)G.push([nt[vt],nt[vt+1]]);else{var Gt=nt.length;G.push([nt[Gt-2],nt[Gt-1]])}}),G},ma=function(U){if(U.length<2)throw new Error("point length must largn than 2, now it's "+U.length);var G=U[0],nt=U[1],vt=U[U.length-1],Gt=U[U.length-2];U.unshift(vt),U.unshift(Gt),U.push(G),U.push(nt);for(var Jt=[],ie=1;ie<U.length-2;ie+=1){var ue=U[ie-1].x,Ce=U[ie-1].y,we=U[ie].x,cn=U[ie].y,Cn=U[ie+1].x,_t=U[ie+1].y,Xt=we+(Cn-ue)/6,Ee=cn+(_t-Ce)/6,Vt=Cn-((ie!==U.length-2?U[ie+2].x:Cn)-we)/6,ce=_t-((ie!==U.length-2?U[ie+2].y:_t)-cn)/6;Jt.push(["C",Xt,Ee,Vt,ce,Cn,_t])}return Jt.unshift(["M",vt.x,vt.y]),Jt},ua=function(U,G){return d.c.scale([0,0],d.c.normalize([0,0],U),G)},Ra=function(U,G){var nt=[U[1]-G[1],G[0]-U[0]],vt=Math.sqrt(nt[0]*nt[0]+nt[1]*nt[1]);if(vt===0)throw new Error("p0 should not be equal to p1");return[nt[0]/vt,nt[1]/vt]},xa=function(U,G){return[G[0]-U[0],G[1]-U[1]]};function Ma(ve,U){if(!ve||ve.length<1)return"";if(ve.length===1)return function(ue){var Ce=[ue[0][0],ue[0][1]-U],we=[ue[0][0],ue[0][1]+U];return"M "+Ce+" A "+U+","+U+",0,0,0,"+we+" A "+U+","+U+",0,0,0,"+Ce}(ve);if(ve.length===2)return function(ue){var Ce=d.c.scale([0,0],Ra(ue[0],ue[1]),U),we=d.c.scale([0,0],Ce,-1),cn=d.c.add([0,0],ue[0],Ce),Cn=d.c.add([0,0],ue[1],Ce),_t=d.c.add([0,0],ue[1],we),Xt=d.c.add([0,0],ue[0],we);return"M "+cn+" L "+Cn+" A "+[U,U,"0,0,0",_t].join(",")+" L "+Xt+" A "+[U,U,"0,0,0",cn].join(",")}(ve);for(var G=new Array(ve.length),nt=0;nt<G.length;++nt){var vt=nt===0?ve[ve.length-1]:ve[nt-1],Gt=ve[nt],Jt=d.c.scale([0,0],Ra(vt,Gt),U);G[nt]=[d.c.add([0,0],vt,Jt),d.c.add([0,0],Gt,Jt)]}var ie="A "+[U,U,"0,0,0,"].join(",");return(G=G.map(function(ue,Ce){var we="";return Ce===0&&(we="M "+G[G.length-1][1]+" "),we+=ie+ue[0]+" L "+ue[1]})).join(" ")}function Qi(ve,U){var G,nt,vt,Gt=ve.length;if(!ve||Gt<1)return"";if(Gt===1)return nt=[(G=ve)[0][0],G[0][1]-U],vt=[G[0][0],G[0][1]+U],"M "+nt+" A "+[U,U,"0,0,0",vt].join(",")+" A "+[U,U,"0,0,0",nt].join(",");if(Gt===2)return function(we){var cn=xa(we[0],we[1]),Cn=ua(cn,U),_t=d.c.add([0,0],we[0],d.c.scale([0,0],Cn,-1)),Xt=d.c.add([0,0],we[1],Cn),Ee=1.2*U,Vt=ua(d.c.normalize([0,0],cn),Ee),ce=d.c.scale([0,0],Vt,-1),yn=d.c.add([0,0],_t,ce),Bn=d.c.add([0,0],Xt,ce),Zn=d.c.add([0,0],_t,Vt);return"M "+_t+" C "+[yn,Bn,Xt].join(",")+" S "+[Zn,_t].join(",")+" Z"}(ve);for(var Jt=ve.map(function(we,cn){var Cn=ve[(cn+1)%Gt];return{p:we,v:d.c.normalize([0,0],xa(we,Cn))}}),ie=0;ie<Jt.length;++ie){var ue=ie>0?ie-1:Gt-1,Ce=d.c.normalize([0,0],d.c.add([0,0],Jt[ue].v,d.c.scale([0,0],Jt[ie].v,-1)));Jt[ie].p=d.c.add([0,0],Jt[ie].p,d.c.scale([0,0],Ce,U))}return Jt.map(function(we){var cn=we.p;return{x:cn[0],y:cn[1]}})}var ka=function(U,G,nt){return(U.y-nt.y)*(G.x-nt.x)-(U.x-nt.x)*(G.y-nt.y)},vo=function(U){var G=U.map(function(Jt){return{x:Jt.getModel().x,y:Jt.getModel().y}});if(G.sort(function(Jt,ie){return Jt.x===ie.x?Jt.y-ie.y:Jt.x-ie.x}),G.length===1)return G;for(var nt=[],vt=0;vt<G.length;vt++){for(;nt.length>=2&&ka(nt[nt.length-2],nt[nt.length-1],G[vt])<=0;)nt.pop();nt.push(G[vt])}var Gt=[];for(vt=G.length-1;vt>=0;vt--){for(;Gt.length>=2&&ka(Gt[Gt.length-2],Gt[Gt.length-1],G[vt])<=0;)Gt.pop();Gt.push(G[vt])}return Gt.pop(),nt.pop(),nt.concat(Gt)},za={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function Ga(ve,U,G){var nt=!1,vt=function(ue,Ce){return U.cells[ue+Ce*U.width]},Gt=function(ue,Ce){var we=0;return vt(ue-1,Ce-1)>=G&&(we+=1),vt(ue,Ce-1)>G&&(we+=2),vt(ue-1,Ce)>G&&(we+=4),vt(ue,Ce)>G&&(we+=8),we},Jt=function(ue,Ce){for(var we,cn,Cn=ue,_t=Ce,Xt=0;Xt<U.width*U.height;Xt++){if(we=Cn,cn=_t,ve.findIndex(function(Vt){return Vt.x===Cn&&Vt.y===_t})>-1){if(ve[0].x===Cn&&ve[0].y===_t)return!0}else ve.push({x:Cn,y:_t});var Ee=Gt(Cn,_t);switch(Ee){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:Cn++;break;case 12:case 14:case 4:Cn--;break;case 6:we===0&&(cn===-1?Cn-=1:Cn+=1);break;case 1:case 13:case 5:_t--;break;case 9:we===1&&(cn===0?_t-=1:_t+=1);break;case 10:case 8:case 11:_t++;break;default:return console.warn("Marching squares invalid state: "+Ee),!0}}};this.march=function(){for(var ie=0;ie<U.width&&!nt;ie+=1)for(var ue=0;ue<U.height&&!nt;ue+=1)vt(ie,ue)>G&&Gt(ie,ue)!==15&&(nt=Jt(ie,ue));return nt}}var eo=function(U,G){var nt=Number.POSITIVE_INFINITY,vt=null;return U.forEach(function(Gt){var Jt=R(Gt,G);Jt>=0&&Jt<nt&&(vt=Gt,nt=Jt)}),vt};function ae(ve,U,G,nt,vt){var Gt=function(Jt,ie,ue){var Ce=null,we=Number.POSITIVE_INFINITY;return ie.forEach(function(cn){var Cn={x:Jt.getModel().x,y:Jt.getModel().y},_t={x:cn.getModel().x,y:cn.getModel().y},Xt=k(Cn,_t),Ee=new J(Cn.x,Cn.y,_t.x,_t.y),Vt=ue.reduce(function(ce,yn){return R(yn,Ee)>0?ce+1:ce},0);Xt*Math.pow(Vt+1,2)<we&&(Ce=cn,we=Xt*Math.pow(Vt+1,2))}),Ce}(ve,G,U);return Gt===null?[]:function(Jt){for(var ie=[];Jt.length>0;){var ue=Jt.pop();if(Jt.length===0){ie.push(ue);break}var Ce=Jt.pop(),we=new J(ue.x1,ue.y1,Ce.x2,Ce.y2);eo(U,we)?(ie.push(ue),Jt.push(Ce)):Jt.push(we)}return ie}(function(Jt,ie,ue,Ce){var we=[],cn=[];cn.push(Jt);for(var Cn=!0,_t=0,Xt=function(yn,Bn){var Zn=!1;return Bn.forEach(function(Kn){Zn||(O(yn,{x:Kn.x1,y:Kn.y1})||O(yn,{x:Kn.x2,y:Kn.y2}))&&(Zn=!0)}),Zn},Ee=function(yn,Bn){for(var Zn=0,Kn=Bn;Zn<Kn.length;Zn++){var $e=Kn[Zn].getBBox(),je=[[$e.x,$e.y],[$e.x+$e.width,$e.y],[$e.x,$e.y+$e.height],[$e.x+$e.width,$e.y+$e.height]];if(mt(je,yn.x,yn.y))return!0}return!1};Cn&&_t<ue;){Cn=!1;for(var Vt=function(){var yn=cn.pop(),Bn=eo(ie,yn);if(Bn){var Zn=_(Bn,yn),Kn=Zn[0];if(Zn[1]===2){var $e=function(L){for(var Et=Ce,$t=Oe(Bn,Et,Kn,L),ye=Xt($t,cn)||Xt($t,we),Zt=Ee($t,ie);!ye&&Zt&&Et>=1;)$t=Oe(Bn,Et/=1.5,Kn,L),ye=Xt($t,cn)||Xt($t,we),Zt=Ee($t,ie);!$t||ye||L&&Zt||(cn.push(new J(yn.x1,yn.y1,$t.x,$t.y)),cn.push(new J($t.x,$t.y,yn.x2,yn.y2)),Cn=!0)};$e(!0),Cn||$e(!1)}}Cn||we.push(yn),_t+=1};!Cn&&cn.length;)Vt()}for(;cn.length;)we.push(cn.pop());return we}(new J(ve.getModel().x,ve.getModel().y,Gt.getModel().x,Gt.getModel().y),U,nt,vt))}var Kt=function(U,G,nt){var vt=Object.assign(za,nt),Gt=Q(U.map(function($e){return{x:$e.getModel().x,y:$e.getModel().y}}));U=U.sort(function($e,je){return k({x:$e.getModel().x,y:$e.getModel().y},Gt)-k({x:je.getModel().x,y:je.getModel().y},Gt)});var Jt=[],ie=[];U.forEach(function($e){ae($e,G,Jt,vt.maxRoutingIterations,vt.morphBuffer).forEach(function(je){ie.push(je)}),Jt.push($e)});for(var ue,Ce,we,cn,Cn,_t=function($e,je,L){var Et={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},$t=[];$e.forEach(function(he){$t.push(he.getBBox())}),je.forEach(function(he){$t.push(he.getBBox())});for(var ye=0,Zt=$t;ye<Zt.length;ye++){var de=Zt[ye];Et.minX=(de.minX<Et.minX?de.minX:Et.minX)-L,Et.minY=(de.minY<Et.minY?de.minY:Et.minY)-L,Et.maxX=(de.maxX>Et.maxX?de.maxX:Et.maxX)+L,Et.maxY=(de.maxY>Et.maxY?de.maxY:Et.maxY)+L}return Et.width=Et.maxX-Et.minX,Et.height=Et.maxY-Et.minY,Et.x=Et.minX,Et.y=Et.minY,Et}(U,ie,vt.nodeR0),Xt=(ue=_t.width,Ce=_t.height,we=vt.pixelGroupSize,cn=Math.ceil(ue/we),Cn=Math.ceil(Ce/we),{cells:new Float32Array(Math.max(0,cn*Cn)).fill(0),width:cn,height:Cn}),Ee=[],Vt=[],ce=0;ce<vt.maxMarchingIterations;ce++)if(te(U,G,ie,_t,Xt,vt),Vt=[],new Ga(Ee=[],Xt,vt.threshold).march()){var yn=Ee.map(function($e){return{x:Math.round($e.x*vt.pixelGroupSize+_t.minX),y:Math.round($e.y*vt.pixelGroupSize+_t.minY)}});if(yn){var Bn=yn.length;if(vt.skip>1)for(Bn=Math.floor(yn.length/vt.skip);Bn<3&&vt.skip>1;)vt.skip-=1,Bn=Math.floor(yn.length/vt.skip);for(var Zn=0,Kn=0;Kn<Bn;Kn+=1,Zn+=vt.skip)Vt.push({x:yn[Zn].x,y:yn[Zn].y})}if(Vt&&function(){for(var $e=0,je=U;$e<je.length;$e++){var L=je[$e],Et=Vt.map(function($t){return[$t.x,$t.y]});if(!mt(Et,L.getBBox().centerX,L.getBBox().centerY))return!1}return!0}())return Vt;if(vt.threshold*=.9,ce<=.5*vt.maxMarchingIterations)vt.memberInfluenceFactor*=1.2,vt.edgeInfluenceFactor*=1.2;else{if(!(vt.nonMemberInfluenceFactor!==0&&G.length>0))break;vt.nonMemberInfluenceFactor*=.8}}return Vt};function te(ve,U,G,nt,vt,Gt){function Jt(Cn,_t){var Xt=Math.floor((Cn-_t)/Gt.pixelGroupSize);return Xt<0?0:Xt}function ie(Cn,_t){return Cn*Gt.pixelGroupSize+_t}var ue=(Gt.nodeR0-Gt.nodeR1)*(Gt.nodeR0-Gt.nodeR1),Ce=(Gt.edgeR0-Gt.edgeR1)*(Gt.edgeR0-Gt.edgeR1),we=function(_t,Xt){return[Math.min(Jt(_t.minX,Xt+nt.minX),vt.width),Math.min(Jt(_t.minY,Xt+nt.minY),vt.height),Math.min(Jt(_t.maxX,-Xt+nt.minX),vt.width),Math.min(Jt(_t.maxY,-Xt+nt.minY),vt.height)]},cn=function(_t,Xt){for(var Ee=_t.getBBox(),Vt=we(Ee,Gt.nodeR1),ce=Vt[0],yn=Vt[1],Bn=Vt[2],Zn=Vt[3],Kn=yn;Kn<Zn;Kn+=1)for(var $e=ce;$e<Bn;$e+=1)if(!(Xt<0&&vt[$e+Kn*vt.width]<=0)){var je=ie($e,nt.minX),L=ie(Kn,nt.minY),Et=F({x:je,y:L},{x:Ee.minX,y:Ee.minY,width:Ee.width,height:Ee.height});if(Et<Math.pow(Gt.nodeR1,2)){var $t=Math.sqrt(Et)-Gt.nodeR1;vt.cells[$e+Kn*vt.width]+=Xt*$t*$t}}};Gt.nodeInfluenceFactor&&ve.forEach(function(Cn){cn(Cn,Gt.nodeInfluenceFactor/ue)}),Gt.edgeInfluenceFactor&&G.forEach(function(Cn){(function(_t,Xt){for(var Ee=_t.getBBox(),Vt=we(Ee,Gt.edgeR1),ce=Vt[0],yn=Vt[1],Bn=Vt[2],Zn=Vt[3],Kn=yn;Kn<Zn;Kn+=1)for(var $e=ce;$e<Bn;$e+=1)if(!(Xt<0&&vt.cells[$e+Kn*vt.width]<=0)){var je=ie($e,nt.minX),L=ie(Kn,nt.minY),Et=g({x:je,y:L},_t);if(Et<Math.pow(Gt.edgeR1,2)){var $t=Math.sqrt(Et)-Gt.edgeR1;vt.cells[$e+Kn*vt.width]+=Xt*$t*$t}}})(Cn,Gt.edgeInfluenceFactor/Ce)}),Gt.negativeNodeInfluenceFactor&&U.forEach(function(Cn){cn(Cn,Gt.negativeNodeInfluenceFactor/ue)})}function Oe(ve,U,G,nt){var vt=ve.getBBox(),Gt=G[0],Jt=G[1],ie=G[2],ue=G[3],Ce={topLeft:{x:vt.minX-U,y:vt.minY-U},topRight:{x:vt.maxX+U,y:vt.minY-U},bottomLeft:{x:vt.minX-U,y:vt.maxY+U},bottomRight:{x:vt.maxX+U,y:vt.maxY+U}},we=vt.height*vt.width;function cn(Cn,_t){return vt.width*(.5*(Cn.y-vt.minY+(_t.y-vt.minY)))}if(Jt)return Gt?nt?Ce.topLeft:Ce.bottomRight:ie?nt?Ce.bottomLeft:Ce.topRight:cn(Jt,ue)<.5*we?Jt.y>ue.y?nt?Ce.topLeft:Ce.bottomRight:nt?Ce.topRight:Ce.bottomLeft:Jt.y<ue.y?nt?Ce.bottomLeft:Ce.topRight:nt?Ce.bottomRight:Ce.topLeft;if(ue){if(Gt)return nt?Ce.topRight:Ce.bottomLeft;if(ie)return nt?Ce.bottomRight:Ce.topLeft}return cn(Gt,ie)<.5*we?Gt.x>ie.x?nt?Ce.topLeft:Ce.bottomRight:nt?Ce.bottomLeft:Ce.topRight:Gt.x<ie.x?nt?Ce.topRight:Ce.bottomLeft:nt?Ce.bottomRight:Ce.topLeft}var Ze=function(){function ve(U,G){this.cfg=Object(c.e)(this.getDefaultCfg(),G),this.graph=U,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(nt){return Object(c.x)(nt)?U.findById(nt):nt}),this.nonMembers=this.cfg.nonMembers.map(function(nt){return Object(c.x)(nt)?U.findById(nt):nt}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return ve.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},ve.prototype.setPadding=function(){var U=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+U:10+U,this.cfg.bubbleCfg={nodeR0:this.padding-U,nodeR1:this.padding-U,morphBuffer:this.padding-U}},ve.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},ve.prototype.calcPath=function(U,G){var nt,vt,Gt;switch(this.type){case"round-convex":Gt=Ma((nt=vo(U)).map(function(Jt){return[Jt.x,Jt.y]}),this.padding),vt=Object(di.b)(Gt);break;case"smooth-convex":(nt=vo(U)).length===2?(Gt=Ma(nt.map(function(Jt){return[Jt.x,Jt.y]}),this.padding),vt=Object(di.b)(Gt)):nt.length>2&&(Gt=Qi(nt.map(function(Jt){return[Jt.x,Jt.y]}),this.padding),vt=ma(Gt));break;case"bubble":vt=(nt=Kt(U,G,this.cfg.bubbleCfg)).length>=2&&ma(nt)}return vt},ve.prototype.render=function(){this.group.addShape("path",{attrs:Object(r.a)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id}),this.group.toBack()},ve.prototype.addMember=function(U){if(U){Object(c.x)(U)&&(U=this.graph.findById(U)),this.members.push(U);var G=this.nonMembers.indexOf(U);return G>-1&&this.nonMembers.splice(G,1),this.updateData(this.members,this.nonMembers),!0}},ve.prototype.addNonMember=function(U){if(U){Object(c.x)(U)&&(U=this.graph.findById(U)),this.nonMembers.push(U);var G=this.members.indexOf(U);return G>-1&&this.members.splice(G,1),this.updateData(this.members,this.nonMembers),!0}},ve.prototype.removeMember=function(U){if(U){Object(c.x)(U)&&(U=this.graph.findById(U));var G=this.members.indexOf(U);return G>-1&&(this.members.splice(G,1),this.updateData(this.members,this.nonMembers),!0)}},ve.prototype.removeNonMember=function(U){if(U){Object(c.x)(U)&&(U=this.graph.findById(U));var G=this.nonMembers.indexOf(U);return G>-1&&(this.nonMembers.splice(G,1),this.updateData(this.members,this.nonMembers),!0)}},ve.prototype.updateData=function(U,G){var nt=this;this.group.findById(this.id).remove(),U&&(this.members=U.map(function(vt){return Object(c.x)(vt)?nt.graph.findById(vt):vt})),G&&(this.nonMembers=G.map(function(vt){return Object(c.x)(vt)?nt.graph.findById(vt):vt})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},ve.prototype.updateStyle=function(U){this.group.findById(this.id).attr(Object(r.a)({},U))},ve.prototype.updateCfg=function(U){var G=this;this.cfg=Object(c.e)(this.cfg,U),this.id=this.cfg.id,this.group=this.cfg.group,U.members&&(this.members=this.cfg.members.map(function(nt){return Object(c.x)(nt)?G.graph.findById(nt):nt})),U.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(nt){return Object(c.x)(nt)?G.graph.findById(nt):nt})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},ve.prototype.contain=function(U){var G,nt,vt=this,Gt=(G=Object(c.x)(U)?this.graph.findById(U):U).getKeyShape();if(G.get("type")==="path")nt=Fi(Gt.attr("path"));else{var Jt=Gt.getCanvasBBox();nt=[[Jt.minX,Jt.minY],[Jt.maxX,Jt.minY],[Jt.maxX,Jt.maxY],[Jt.minX,Jt.maxY]]}return nt=nt.map(function(ie){var ue=vt.graph.getPointByCanvas(ie[0],ie[1]);return[ue.x,ue.y]}),wt(nt,Fi(this.path))},ve.prototype.destroy=function(){this.group.remove(),this.cfg=null},ve}(),An=d.a.transform,qn=function(ve){function U(G){var nt=ve.call(this)||this;return nt.cfg=Object(c.e)(nt.getDefaultCfg(),G),nt.init(),nt.animating=!1,nt.destroyed=!1,nt.cfg.enabledStack&&(nt.undoStack=new C.Stack(nt.cfg.maxStep),nt.redoStack=new C.Stack(nt.cfg.maxStep)),nt}return Object(r.b)(U,ve),U.prototype.init=function(){this.initCanvas();var G=new me(this),nt=new xt(this),vt=new li(this),Gt=new Ci(this);this.set({viewController:G,modeController:nt,itemController:vt,stateController:Gt}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},U.prototype.initGroups=function(){var G=this.get("canvas"),nt=this.get("canvas").get("el").id,vt=G.addGroup({id:nt+"-root",className:yt.rootContainerClassName});if(this.get("groupByTypes")){var Gt=vt.addGroup({id:nt+"-edge",className:yt.edgeContainerClassName}),Jt=vt.addGroup({id:nt+"-node",className:yt.nodeContainerClassName}),ie=vt.addGroup({id:nt+"-combo",className:yt.comboContainerClassName});ie.toBack(),this.set({nodeGroup:Jt,edgeGroup:Gt,comboGroup:ie})}var ue=vt.addGroup({id:nt+"-delegate",className:yt.delegateContainerClassName});this.set({delegateGroup:ue}),this.set("group",vt)},U.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[]}},U.prototype.set=function(G,nt){return Object(c.w)(G)?this.cfg=Object(r.a)(Object(r.a)({},this.cfg),G):this.cfg[G]=nt,this},U.prototype.get=function(G){return this.cfg[G]},U.prototype.getGroup=function(){return this.get("group")},U.prototype.getContainer=function(){return this.get("container")},U.prototype.getMinZoom=function(){return this.get("minZoom")},U.prototype.setMinZoom=function(G){return this.set("minZoom",G)},U.prototype.getMaxZoom=function(){return this.get("maxZoom")},U.prototype.setMaxZoom=function(G){return this.set("maxZoom",G)},U.prototype.getWidth=function(){return this.get("width")},U.prototype.getHeight=function(){return this.get("height")},U.prototype.clearItemStates=function(G,nt){Object(c.x)(G)&&(G=this.findById(G));var vt=this.get("itemController");nt||(nt=G.get("states")),vt.clearItemStates(G,nt),this.get("stateController").updateStates(G,nt,!1)},U.prototype.node=function(G){typeof G=="function"&&this.set("nodeMapper",G)},U.prototype.edge=function(G){typeof G=="function"&&this.set("edgeMapper",G)},U.prototype.combo=function(G){typeof G=="function"&&this.set("comboMapper",G)},U.prototype.findById=function(G){return this.get("itemMap")[G]},U.prototype.find=function(G,nt){var vt,Gt=this.get(G+"s");return Object(c.f)(Gt,function(Jt,ie){if(nt(Jt,ie))return vt=Jt}),vt},U.prototype.findAll=function(G,nt){var vt=[];return Object(c.f)(this.get(G+"s"),function(Gt,Jt){nt(Gt,Jt)&&vt.push(Gt)}),vt},U.prototype.findAllByState=function(G,nt){return this.findAll(G,function(vt){return vt.hasState(nt)})},U.prototype.translate=function(G,nt){var vt=this.get("group"),Gt=Object(c.c)(vt.getMatrix());Gt||(Gt=[1,0,0,0,1,0,0,0,1]),Gt=An(Gt,[["t",G,nt]]),vt.setMatrix(Gt),this.emit("viewportchange",{action:"translate",matrix:vt.getMatrix()}),this.autoPaint()},U.prototype.moveTo=function(G,nt){var vt=this.get("group");Bt(vt,{x:G,y:nt}),this.emit("viewportchange",{action:"move",matrix:vt.getMatrix()})},U.prototype.fitView=function(G){G&&this.set("fitViewPadding",G),this.get("viewController").fitView(),this.autoPaint()},U.prototype.fitCenter=function(){this.get("viewController").fitCenter(),this.autoPaint()},U.prototype.addBehaviors=function(G,nt){return this.get("modeController").manipulateBehaviors(G,nt,!0),this},U.prototype.removeBehaviors=function(G,nt){return this.get("modeController").manipulateBehaviors(G,nt,!1),this},U.prototype.updateBehavior=function(G,nt,vt){return this.get("modeController").updateBehavior(G,nt,vt),this},U.prototype.zoom=function(G,nt){var vt=this.get("group"),Gt=Object(c.c)(vt.getMatrix()),Jt=this.get("minZoom"),ie=this.get("maxZoom");Gt||(Gt=[1,0,0,0,1,0,0,0,1]),Gt=An(Gt,nt?[["t",-nt.x,-nt.y],["s",G,G],["t",nt.x,nt.y]]:[["s",G,G]]),Jt&&Gt[0]<Jt||ie&&Gt[0]>ie||(vt.setMatrix(Gt),this.emit("viewportchange",{action:"zoom",matrix:Gt}),this.autoPaint())},U.prototype.zoomTo=function(G,nt){var vt=G/this.getZoom();this.zoom(vt,nt)},U.prototype.focusItem=function(G,nt,vt){var Gt=this.get("viewController"),Jt=!1;nt?Jt=!0:nt===void 0&&(Jt=this.get("animate"));var ie={};vt?ie=vt:vt===void 0&&(ie=this.get("animateCfg")),Gt.focus(G,Jt,ie),this.autoPaint()},U.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},U.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},U.prototype.getPointByClient=function(G,nt){return this.get("viewController").getPointByClient(G,nt)},U.prototype.getClientByPoint=function(G,nt){return this.get("viewController").getClientByPoint(G,nt)},U.prototype.getPointByCanvas=function(G,nt){return this.get("viewController").getPointByCanvas(G,nt)},U.prototype.getCanvasByPoint=function(G,nt){return this.get("viewController").getCanvasByPoint(G,nt)},U.prototype.showItem=function(G,nt){nt===void 0&&(nt=!0);var vt=this.get("itemController").changeItemVisibility(G,!0);if(nt&&this.get("enabledStack")){var Gt=vt.getID(),Jt={},ie={};switch(vt.getType()){case"node":Jt.nodes=[{id:Gt,visible:!1}],ie.nodes=[{id:Gt,visible:!0}];break;case"edge":Jt.nodes=[{id:Gt,visible:!1}],ie.edges=[{id:Gt,visible:!0}];break;case"combo":Jt.nodes=[{id:Gt,visible:!1}],ie.combos=[{id:Gt,visible:!0}]}this.pushStack("visible",{before:Jt,after:ie})}},U.prototype.hideItem=function(G,nt){nt===void 0&&(nt=!0);var vt=this.get("itemController").changeItemVisibility(G,!1);if(nt&&this.get("enabledStack")){var Gt=vt.getID(),Jt={},ie={};switch(vt.getType()){case"node":Jt.nodes=[{id:Gt,visible:!0}],ie.nodes=[{id:Gt,visible:!1}];break;case"edge":Jt.nodes=[{id:Gt,visible:!0}],ie.edges=[{id:Gt,visible:!1}];break;case"combo":Jt.nodes=[{id:Gt,visible:!0}],ie.combos=[{id:Gt,visible:!1}]}this.pushStack("visible",{before:Jt,after:ie})}},U.prototype.refreshItem=function(G){this.get("itemController").refreshItem(G)},U.prototype.setAutoPaint=function(G){this.set("autoPaint",G),this.get("canvas").set("autoDraw",G)},U.prototype.remove=function(G,nt){nt===void 0&&(nt=!0),this.removeItem(G,nt)},U.prototype.removeItem=function(G,nt){nt===void 0&&(nt=!0);var vt=G;if(Object(c.x)(G)&&(vt=this.findById(G)),!vt&&Object(c.x)(G))console.warn("The item to be removed does not exist!");else if(vt){var Gt="";if(vt.getType&&(Gt=vt.getType()),nt&&this.get("enabledStack")){var Jt=Object(r.a)(Object(r.a)({},vt.getModel()),{itemType:Gt}),ie={};switch(Gt){case"node":ie.nodes=[Jt],ie.edges=[];for(var ue=vt.getEdges(),Ce=ue.length-1;Ce>=0;Ce--)ie.edges.push(Object(r.a)(Object(r.a)({},ue[Ce].getModel()),{itemType:"edge"}));break;case"edge":ie.edges=[Jt];break;case"combo":ie.combos=[Jt]}this.pushStack("delete",{before:ie,after:{}})}if(Gt==="node"&&vt.getModel().comboId&&this.updateComboTree(vt),this.get("itemController").removeItem(vt),Gt==="combo"){var we=dr(this.get("comboTrees"));this.set("comboTrees",we)}}},U.prototype.addItem=function(G,nt,vt,Gt){vt===void 0&&(vt=!0),Gt===void 0&&(Gt=!0);var Jt=this.get("comboSorted");this.set("comboSorted",Jt&&!Gt);var ie=this.get("itemController");if(!nt.id||!this.findById(nt.id)){var ue,Ce=this.get("comboTrees");if(Ce||(Ce=[]),G==="combo"){var we=this.get("itemMap"),cn=!1;if(Ce.forEach(function(Zn){cn||ir(Zn,function(Kn){if(nt.parentId===Kn.id){cn=!0;var $e=Object(r.a)({id:nt.id,depth:Kn.depth+2},nt);Kn.children?Kn.children.push($e):Kn.children=[$e],nt.depth=$e.depth,ue=ie.addItem(G,nt)}var je=we[Kn.id];return cn&&je&&je.getType&&je.getType()==="combo"&&ie.updateCombo(je,Kn.children),!0})}),!cn){var Cn=Object(r.a)({id:nt.id,depth:0},nt);nt.depth=Cn.depth,Ce.push(Cn),ue=ie.addItem(G,nt)}this.set("comboTrees",Ce)}else if(G==="node"&&Object(c.x)(nt.comboId)&&Ce){var _t;if((_t=this.findById(nt.comboId))&&_t.getType&&_t.getType()!=="combo")return void console.warn("'"+nt.comboId+"' is a not id of a combo in the graph, the node will be added without combo.");ue=ie.addItem(G,nt);var Xt=this.get("itemMap"),Ee=!1,Vt=!1;(Ce||[]).forEach(function(Zn){Vt||Ee||ir(Zn,function(Kn){if(Kn.id===nt.id)return Vt=!0,!1;if(nt.comboId===Kn.id&&!Vt){Ee=!0;var $e=Object(c.c)(nt);$e.itemType="node",Kn.children?Kn.children.push($e):Kn.children=[$e],nt.depth=Kn.depth+1}return Ee&&Xt[Kn.id].getType&&Xt[Kn.id].getType()==="combo"&&ie.updateCombo(Xt[Kn.id],Kn.children),!0})})}else ue=ie.addItem(G,nt);(G==="node"&&nt.comboId||G==="combo"&&nt.parentId)&&(_t=this.findById(nt.comboId||nt.parentId))&&_t.addChild(ue);var ce=this.get("combos");if(ce&&ce.length>0&&this.sortCombos(),this.autoPaint(),vt&&this.get("enabledStack")){var yn=Object(r.a)(Object(r.a)({},ue.getModel()),{itemType:G}),Bn={};switch(G){case"node":Bn.nodes=[yn];break;case"edge":Bn.edges=[yn];break;case"combo":Bn.combos=[yn]}this.pushStack("add",{before:{},after:Bn})}return ue}console.warn("This item exists already. Be sure the id %c"+nt.id+"%c is unique.","font-size: 20px; color: red;","")},U.prototype.add=function(G,nt,vt,Gt){return vt===void 0&&(vt=!0),Gt===void 0&&(Gt=!0),this.addItem(G,nt,vt,Gt)},U.prototype.updateItem=function(G,nt,vt){var Gt=this;vt===void 0&&(vt=!0);var Jt,ie=this.get("itemController");Jt=Object(c.x)(G)?this.findById(G):G;var ue=Object(c.c)(Jt.getModel()),Ce="";Jt.getType&&(Ce=Jt.getType());var we=Object(r.d)(Jt.getStates());if(Ce==="combo"&&Object(c.f)(we,function(Xt){return Gt.setItemState(Jt,Xt,!1)}),ie.updateItem(Jt,nt),Ce==="combo"&&Object(c.f)(we,function(Xt){return Gt.setItemState(Jt,Xt,!0)}),vt&&this.get("enabledStack")){var cn={nodes:[],edges:[],combos:[]},Cn={nodes:[],edges:[],combos:[]},_t=Object(r.a)({id:ue.id},nt);switch(Ce){case"node":cn.nodes.push(ue),Cn.nodes.push(_t);break;case"edge":cn.edges.push(ue),Cn.edges.push(_t);break;case"combo":cn.combos.push(ue),Cn.combos.push(_t)}Ce==="node"&&cn.nodes.push(ue),this.pushStack("update",{before:cn,after:Cn})}},U.prototype.update=function(G,nt,vt){vt===void 0&&(vt=!0),this.updateItem(G,nt,vt)},U.prototype.setItemState=function(G,nt,vt){Object(c.x)(G)&&(G=this.findById(G)),this.get("itemController").setItemState(G,nt,vt);var Gt=this.get("stateController");Object(c.x)(vt)?Gt.updateState(G,nt+":"+vt,!0):Gt.updateState(G,nt,vt)},U.prototype.priorityState=function(G,nt){this.get("itemController").priorityState(G,nt)},U.prototype.data=function(G){this.set("data",G)},U.prototype.render=function(){var G=this;this.set("comboSorted",!1);var nt=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!nt)throw new Error("data must be defined first");var vt=nt.nodes,Gt=vt===void 0?[]:vt,Jt=nt.edges,ie=Jt===void 0?[]:Jt,ue=nt.combos,Ce=ue===void 0?[]:ue;if(this.clear(),this.emit("beforerender"),Object(c.f)(Gt,function(_t){G.add("node",_t,!1,!1)}),Ce&&Ce.length!==0){var we=mr(Ce,Gt);this.set("comboTrees",we),G.addCombos(Ce)}Object(c.f)(ie,function(_t){G.add("edge",_t,!1,!1)});var cn=G.get("animate");(G.get("fitView")||G.get("fitCenter"))&&G.set("animate",!1);var Cn=G.get("layoutController");if(Cn){if(Cn.layout(function(){G.get("fitView")?G.fitView():G.get("fitCenter")&&G.fitCenter(),G.autoPaint(),G.emit("afterrender"),(G.get("fitView")||G.get("fitCenter"))&&G.set("animate",cn)}),this.destroyed)return}else G.get("fitView")&&G.fitView(),G.get("fitCenter")&&G.fitCenter(),G.emit("afterrender"),G.set("animate",cn);this.get("groupByTypes")||(Ce&&Ce.length!==0?this.sortCombos():nt.nodes&&nt.edges&&nt.nodes.length<nt.edges.length?this.getNodes().forEach(function(_t){_t.toFront()}):this.getEdges().forEach(function(_t){_t.toBack()})),this.get("enabledStack")&&this.pushStack("render")},U.prototype.read=function(G){this.data(G),this.render()},U.prototype.diffItems=function(G,nt,vt){var Gt,Jt=this,ie=this.get("itemMap");Object(c.f)(vt,function(ue){if(Gt=ie[ue.id]){if(Jt.get("animate")&&G==="node"){var Ce=Gt.getContainer().getMatrix();Ce||(Ce=[1,0,0,0,1,0,0,0,1]),Gt.set("originAttrs",{x:Ce[6],y:Ce[7]})}Jt.updateItem(Gt,ue,!1)}else Gt=Jt.addItem(G,ue,!1);Gt&&nt[G+"s"].push(Gt)})},U.prototype.changeData=function(G,nt){nt===void 0&&(nt=!0);var vt=this;if(!G)return this;nt&&this.get("enabledStack")&&this.pushStack("changedata",{before:vt.save(),after:G}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(Xt){return vt.clearItemStates(Xt)}),this.getEdges().map(function(Xt){return vt.clearItemStates(Xt)});var Gt=this.get("canvas"),Jt=Gt.get("localRefresh");Gt.set("localRefresh",!1),vt.get("data")||(vt.data(G),vt.render());var ie=this.get("itemMap"),ue={nodes:[],edges:[]},Ce=G.combos;if(Ce){var we=mr(Ce,G.nodes);this.set("comboTrees",we)}this.diffItems("node",ue,G.nodes),Object(c.f)(ie,function(Xt,Ee){ie[Ee].getModel().depth=0,Xt.getType&&Xt.getType()==="edge"||(Xt.getType&&Xt.getType()==="combo"?(delete ie[Ee],Xt.destroy()):ue.nodes.indexOf(Xt)<0&&(delete ie[Ee],vt.remove(Xt,!1)))});for(var cn=this.getCombos(),Cn=cn.length-1;Cn>=0;Cn--)cn[Cn].destroyed&&cn.splice(Cn,1);Ce&&(vt.addCombos(Ce),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",ue,G.edges),Object(c.f)(ie,function(Xt,Ee){(!Xt.getType||Xt.getType()!=="node"&&Xt.getType()!=="combo")&&ue.edges.indexOf(Xt)<0&&(delete ie[Ee],vt.remove(Xt,!1))}),this.set({nodes:ue.nodes,edges:ue.edges});var _t=this.get("layoutController");return _t&&(_t.changeData(),vt.get("animate")&&!_t.getLayoutType()?vt.positionsAnimate():vt.autoPaint()),setTimeout(function(){Gt.set("localRefresh",Jt)},16),this},U.prototype.addCombos=function(G){var nt=this.get("comboTrees");this.get("itemController").addCombos(nt,G)},U.prototype.createCombo=function(G,nt){var vt=this;this.set("comboSorted",!1);var Gt,Jt="";if(G){if(Object(c.x)(G))Jt=G,Gt={id:G};else{if(!(Jt=G.id))return void console.warn("Create combo failed. Please assign a unique string id for the adding combo.");Gt=G}var ie=nt.map(function(Ce){var we=vt.findById(Ce),cn="";we.getType&&(cn=we.getType());var Cn={id:we.getID(),itemType:cn};return cn==="combo"?Cn.parentId=Jt:cn==="node"&&(Cn.comboId=Jt),Cn});Gt.children=ie,this.addItem("combo",Gt,!1),this.set("comboSorted",!1);var ue=this.get("comboTrees");(ue||[]).forEach(function(Ce){ir(Ce,function(we){return we.id!==Jt||(we.itemType="combo",we.children=ie,!1)})}),ue&&this.sortCombos()}},U.prototype.uncombo=function(G){var nt=this,vt=G;if(Object(c.x)(G)&&(vt=this.findById(G)),!vt||vt.getType&&vt.getType()!=="combo")console.warn("The item is not a combo!");else{var Gt=vt.getModel().parentId,Jt=this.get("comboTrees");Jt||(Jt=[]);var ie,ue=this.get("itemMap"),Ce=vt.get("id"),we=[],cn=this.get("combos"),Cn=this.findById(Gt);if(Jt.forEach(function(Xt){ie||ir(Xt,function(Ee){if(Ee.id===Ce){ie=Ee,vt.getEdges().forEach(function(ce){nt.removeItem(ce,!1)});var Vt=cn.indexOf(G);cn.splice(Vt,1),delete ue[Ce],vt.destroy()}return!Gt||!ie||Ee.id!==Gt||(Cn.removeCombo(vt),(Vt=(we=Ee.children).indexOf(ie))!==-1&&we.splice(Vt,1),ie.children.forEach(function(ce){var yn=nt.findById(ce.id),Bn=yn.getModel();yn.getType&&yn.getType()==="combo"?(ce.parentId=Gt,delete ce.comboId,Bn.parentId=Gt,delete Bn.comboId):yn.getType&&yn.getType()==="node"&&(ce.comboId=Gt,Bn.comboId=Gt),Cn.addChild(yn),we.push(ce)}),!1)})}),!Gt&&ie){var _t=Jt.indexOf(ie);Jt.splice(_t,1),ie.children.forEach(function(Xt){Xt.parentId=void 0,nt.findById(Xt.id).getModel().parentId=void 0,Xt.itemType!=="node"&&Jt.push(Xt)})}}},U.prototype.updateCombos=function(){var G=this,nt=this.get("comboTrees"),vt=this.get("itemController"),Gt=this.get("itemMap");(nt||[]).forEach(function(Jt){ir(Jt,function(ie){if(!ie)return!0;var ue=Gt[ie.id];if(ue&&ue.getType&&ue.getType()==="combo"){var Ce=Object(r.d)(ue.getStates());Object(c.f)(Ce,function(we){return G.setItemState(ue,we,!1)}),vt.updateCombo(ue,ie.children),Object(c.f)(Ce,function(we){return G.setItemState(ue,we,!0)})}return!0})}),this.sortCombos()},U.prototype.updateCombo=function(G){var nt,vt=this,Gt=G;if(Object(c.x)(G)&&(Gt=this.findById(G)),!Gt||Gt.getType&&Gt.getType()!=="combo")console.warn("The item to be updated is not a combo!");else{nt=Gt.get("id");var Jt=this.get("comboTrees"),ie=this.get("itemController"),ue=this.get("itemMap");(Jt||[]).forEach(function(Ce){ir(Ce,function(we){if(!we)return!0;var cn=ue[we.id];if(nt===we.id&&cn&&cn.getType&&cn.getType()==="combo"){var Cn=Object(r.d)(cn.getStates());Object(c.f)(Cn,function(_t){cn.getStateStyle(_t)&&vt.setItemState(cn,_t,!1)}),ie.updateCombo(cn,we.children),Object(c.f)(Cn,function(_t){cn.getStateStyle(_t)&&vt.setItemState(cn,_t,!0)}),nt&&(nt=we.parentId)}return!0})})}},U.prototype.updateComboTree=function(G,nt,vt){vt===void 0&&(vt=!0);var Gt;this.set("comboSorted",!1);var Jt,ie=(Gt=Object(c.x)(G)?this.findById(G):G).getModel(),ue=ie.comboId||ie.parentId,Ce="";if(Gt.getType&&(Ce=Gt.getType()),nt&&Ce==="combo"){var we,cn=this.get("comboTrees"),Cn=!0;if((cn||[]).forEach(function(ce){we||Qn(ce,function(yn){if(!we)return yn.id===Gt.getID()&&(we=yn),!0})}),Qn(we,function(ce){return ce.id!==nt||(Cn=!1,!1)}),!Cn)return void console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!")}if(vt&&this.get("enabledStack")){var _t={},Xt={};Ce==="combo"?(_t.combos=[{id:ie.id,parentId:ie.parentId}],Xt.combos=[{id:ie.id,parentId:nt}]):Ce==="node"&&(_t.nodes=[{id:ie.id,parentId:ie.comboId}],Xt.nodes=[{id:ie.id,parentId:nt}]),this.pushStack("updateComboTree",{before:_t,after:Xt})}if(ie.parentId||ie.comboId){var Ee=this.findById(ie.parentId||ie.comboId);Ee&&Ee.removeChild(Gt)}Ce==="combo"?ie.parentId=nt:Ce==="node"&&(ie.comboId=nt),nt&&(Jt=this.findById(nt))&&Jt.addChild(Gt),ue&&(Jt=this.findById(ue))&&Jt.removeChild(Gt);var Vt=dr(this.get("comboTrees"),ie.id,nt);this.set("comboTrees",Vt),this.updateCombos()},U.prototype.save=function(){var G=[],nt=[],vt=[];return Object(c.f)(this.get("nodes"),function(Gt){G.push(Gt.getModel())}),Object(c.f)(this.get("edges"),function(Gt){nt.push(Gt.getModel())}),Object(c.f)(this.get("combos"),function(Gt){vt.push(Gt.getModel())}),{nodes:G,edges:nt,combos:vt}},U.prototype.changeSize=function(G,nt){return this.get("viewController").changeSize(G,nt),this},U.prototype.refresh=function(){if(this.emit("beforegraphrefresh"),this.get("animate"))this.positionsAnimate();else{var G=this.get("nodes"),nt=this.get("edges"),vt=this.get("edges");Object(c.f)(G,function(Gt){Gt.refresh()}),Object(c.f)(nt,function(Gt){Gt.refresh()}),Object(c.f)(vt,function(Gt){Gt.refresh()})}this.emit("aftergraphrefresh"),this.autoPaint()},U.prototype.getNodes=function(){return this.get("nodes")},U.prototype.getEdges=function(){return this.get("edges")},U.prototype.getCombos=function(){return this.get("combos")},U.prototype.getComboChildren=function(G){if(Object(c.x)(G)&&(G=this.findById(G)),G&&(!G.getType||G.getType()==="combo"))return G.getChildren();console.warn("The combo does not exist!")},U.prototype.positionsAnimate=function(){var G=this;G.emit("beforeanimate");var nt=G.get("animateCfg"),vt=nt.onFrame,Gt=G.getNodes(),Jt=Gt.map(function(ie){var ue=ie.getModel();return{id:ue.id,x:ue.x,y:ue.y}});G.isAnimating()&&G.stopAnimate(),G.get("canvas").animate(function(ie){Object(c.f)(Jt,function(ue){var Ce=G.findById(ue.id);if(Ce&&!Ce.destroyed){var we=Ce.get("originAttrs"),cn=Ce.get("model");if(!we){var Cn=Ce.getContainer().getMatrix();Cn||(Cn=[1,0,0,0,1,0,0,0,1]),we={x:Cn[6],y:Cn[7]},Ce.set("originAttrs",we)}if(vt){var _t=vt(Ce,ie,ue,we);Ce.set("model",Object.assign(cn,_t))}else cn.x=we.x+(ue.x-we.x)*ie,cn.y=we.y+(ue.y-we.y)*ie}}),G.refreshPositions()},{duration:nt.duration,easing:nt.easing,callback:function(){Object(c.f)(Gt,function(ue){ue.set("originAttrs",null)}),nt.callback&&nt.callback(),G.emit("afteranimate"),G.animating=!1}})},U.prototype.refreshPositions=function(){this.emit("beforegraphrefreshposition");var G,nt=this.get("nodes"),vt=this.get("edges"),Gt=this.get("vedges"),Jt=this.get("combos"),ie={};Object(c.f)(nt,function(ue){G=ue.getModel();var Ce=ue.get("originAttrs");Ce&&G.x===Ce.x&&G.y===Ce.y||(ue.updatePosition({x:G.x,y:G.y}),ie[G.id]=!0,G.comboId&&(ie[G.comboId]=!0))}),Jt&&Jt.length!==0&&this.updateCombos(),Object(c.f)(vt,function(ue){var Ce=ue.getSource().getModel(),we=ue.getTarget().getModel();(ie[Ce.id]||ie[we.id]||ue.getModel().isComboEdge)&&ue.refresh()}),Object(c.f)(Gt,function(ue){ue.refresh()}),this.emit("aftergraphrefreshposition"),this.autoPaint()},U.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},U.prototype.isAnimating=function(){return this.animating},U.prototype.getZoom=function(){var G=this.get("group").getMatrix();return G?G[0]:1},U.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},U.prototype.setMode=function(G){return this.get("modeController").setMode(G),this},U.prototype.clear=function(){return this.get("canvas").clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),this.emit("afterrender"),this},U.prototype.updateLayout=function(G){var nt,vt=this.get("layoutController");Object(c.x)(G)?G={type:nt=G}:nt=G.type;var Gt=this.get("layout"),Jt=Gt?Gt.type:void 0;if(nt&&Jt!==nt||G.gpuEnabled!==void 0&&G.gpuEnabled!==Gt.gpuEnabled)nt||(nt=Jt),this.set("layout",G),vt.changeLayout(nt);else{var ie={};Object.assign(ie,Gt,G),ie.type=Jt||"random",this.set("layout",ie),vt.updateLayoutCfg(ie)}},U.prototype.destroyLayout=function(){this.get("layoutController").destroyLayout()},U.prototype.layout=function(){var G=this.get("layoutController"),nt=this.get("layout");nt&&G&&(nt.workerEnabled?G.layout():G.layoutMethod?G.relayout(!0):G.layout())},U.prototype.collapseCombo=function(G){var nt=this;if(Object(c.x)(G)&&(G=this.findById(G)),G){this.emit("beforecollapseexpandcombo",{action:"expand",item:G});var vt=G.getModel();this.get("itemController").collapseCombo(G),vt.collapsed=!0;var Gt=this.getEdges().concat(this.get("vedges")),Jt=[],ie=[],ue=this.get("comboTrees"),Ce=!1,we={};(ue||[]).forEach(function(_t){we[_t.id]=_t}),(ue||[]).forEach(function(_t){Ce||Qn(_t,function(Xt){if(Ce&&we[Xt.id])return!1;if(vt.parentId===Xt.id?(we={},Xt.children.forEach(function(Vt){we[Vt.id]=Vt})):vt.id===Xt.id&&(Ce=!0),Ce){var Ee=nt.findById(Xt.id);Ee&&Ee.getType&&Ee.getType()==="combo"&&(Jt=Jt.concat(Ee.getNodes()),ie=ie.concat(Ee.getCombos()))}return!0})});var cn={},Cn=[];Gt.forEach(function(_t){if(!_t.isVisible()||_t.getModel().isVEdge){var Xt=_t.getSource(),Ee=_t.getTarget();if((Jt.includes(Xt)||ie.includes(Xt))&&!Jt.includes(Ee)&&!ie.includes(Ee)||Xt.getModel().id===vt.id){if((Bn=_t.getModel()).isVEdge)return void nt.removeItem(_t,!1);for(var Vt=Ee.getModel();!Ee.isVisible();){if(!(Ee=nt.findById(Vt.parentId||Vt.comboId))||!Vt.parentId&&!Vt.comboId)return;Vt=Ee.getModel()}var ce=Vt.id;if(cn[vt.id+"-"+ce])return void(cn[vt.id+"-"+ce]+=Bn.size||1);var yn=nt.addItem("vedge",{source:vt.id,target:ce,isVEdge:!0},!1);cn[vt.id+"-"+ce]=Bn.size||1,Cn.push(yn)}else if(!Jt.includes(Xt)&&!ie.includes(Xt)&&(Jt.includes(Ee)||ie.includes(Ee))||Ee.getModel().id===vt.id){var Bn;if((Bn=_t.getModel()).isVEdge)return void nt.removeItem(_t,!1);for(var Zn=Xt.getModel();!Xt.isVisible();){if(!(Xt=nt.findById(Zn.parentId||Zn.comboId))||!Zn.parentId&&!Zn.comboId)return;Zn=Xt.getModel()}var Kn=Zn.id;if(cn[Kn+"-"+vt.id])return void(cn[Kn+"-"+vt.id]+=Bn.size||1);yn=nt.addItem("vedge",{target:vt.id,source:Kn,isVEdge:!0},!1),cn[Kn+"-"+vt.id]=Bn.size||1,Cn.push(yn)}}}),Cn.forEach(function(_t){var Xt=_t.getModel();nt.updateItem(_t,{size:cn[Xt.source+"-"+Xt.target]},!1)}),this.emit("aftercollapseexpandcombo",{action:"collapse",item:G})}else console.warn("The combo to be collapsed does not exist!")},U.prototype.expandCombo=function(G){var nt=this;if(Object(c.x)(G)&&(G=this.findById(G)),!G||G.getType&&G.getType()!=="combo")console.warn("The combo to be collapsed does not exist!");else{this.emit("beforecollapseexpandcombo",{action:"expand",item:G});var vt=G.getModel();this.get("itemController").expandCombo(G),vt.collapsed=!1;var Gt=this.getEdges().concat(this.get("vedges")),Jt=[],ie=[],ue=this.get("comboTrees"),Ce=!1,we={};(ue||[]).forEach(function(_t){we[_t.id]=_t}),(ue||[]).forEach(function(_t){Ce||Qn(_t,function(Xt){if(Ce&&we[Xt.id])return!1;if(vt.parentId===Xt.id?(we={},Xt.children.forEach(function(Vt){we[Vt.id]=Vt})):vt.id===Xt.id&&(Ce=!0),Ce){var Ee=nt.findById(Xt.id);Ee&&Ee.getType&&Ee.getType()==="combo"&&(Jt=Jt.concat(Ee.getNodes()),ie=ie.concat(Ee.getCombos()))}return!0})});var cn={},Cn={};Gt.forEach(function(_t){if(!_t.isVisible()||_t.getModel().isVEdge){var Xt=_t.getSource(),Ee=_t.getTarget(),Vt=Xt.get("id"),ce=Ee.get("id");if((Jt.includes(Xt)||ie.includes(Xt))&&!Jt.includes(Ee)&&!ie.includes(Ee)||Vt===vt.id){if(_t.getModel().isVEdge)return void nt.removeItem(_t,!1);for(var yn=Ee.getModel();!Ee.isVisible();){if(!(Ee=nt.findById(yn.comboId||yn.parentId))||!yn.parentId&&!yn.comboId)return;yn=Ee.getModel()}ce=yn.id;for(var Bn=Xt.getModel();!Xt.isVisible();){if(!(Xt=nt.findById(Bn.comboId||Bn.parentId))||!Bn.parentId&&!Bn.comboId)return;if(Bn.comboId===vt.id||Bn.parentId===vt.id)break;Bn=Xt.getModel()}if(Vt=Bn.id,ce){if(cn[Kn=Vt+"-"+ce])return cn[Kn]+=_t.getModel().size||1,void nt.updateItem(Cn[Kn],{size:cn[Kn]},!1);var Zn=nt.addItem("vedge",{source:Vt,target:ce,isVEdge:!0},!1);cn[Kn]=_t.getModel().size||1,Cn[Kn]=Zn}}else if(!Jt.includes(Xt)&&!ie.includes(Xt)&&(Jt.includes(Ee)||ie.includes(Ee))||ce===vt.id){if(_t.getModel().isVEdge)return void nt.removeItem(_t,!1);for(Bn=Xt.getModel();!Xt.isVisible();){if(!(Xt=nt.findById(Bn.comboId||Bn.parentId))||!Bn.parentId&&!Bn.comboId)return;Bn=Xt.getModel()}for(Vt=Bn.id,yn=Ee.getModel();!Ee.isVisible();){if(!(Ee=nt.findById(yn.comboId||yn.parentId))||!yn.parentId&&!yn.comboId)return;if(yn.comboId===vt.id||yn.parentId===vt.id)break;yn=Ee.getModel()}if(ce=yn.id,Vt){var Kn;if(cn[Kn=Vt+"-"+ce])return cn[Kn]+=_t.getModel().size||1,void nt.updateItem(Cn[Kn],{size:cn[Kn]},!1);Zn=nt.addItem("vedge",{target:ce,source:Vt,isVEdge:!0},!1),cn[Kn]=_t.getModel().size||1,Cn[Kn]=Zn}}else(Jt.includes(Xt)||ie.includes(Xt))&&(Jt.includes(Ee)||ie.includes(Ee))&&Xt.isVisible()&&Ee.isVisible()&&_t.show()}}),this.emit("aftercollapseexpandcombo",{action:"expand",item:G})}},U.prototype.collapseExpandCombo=function(G){if(Object(c.x)(G)&&(G=this.findById(G)),!G.getType||G.getType()==="combo"){for(var nt=G.getModel(),vt=this.findById(nt.parentId);vt;){var Gt=vt.getModel();if(Gt.collapsed)return console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),void(vt=void 0);vt=this.findById(Gt.parentId)}nt.collapsed?this.expandCombo(G):this.collapseCombo(G),this.updateCombo(G)}},U.prototype.sortCombos=function(){var G=this;if(!this.get("comboSorted")){this.set("comboSorted",!0);var nt=[],vt={};(this.get("comboTrees")||[]).forEach(function(Gt){Qn(Gt,function(Jt){return nt[Jt.depth]?nt[Jt.depth].push(Jt.id):nt[Jt.depth]=[Jt.id],vt[Jt.id]=Jt.depth,!0})}),(this.getEdges().concat(this.get("vedges"))||[]).forEach(function(Gt){var Jt=Gt.getModel(),ie=vt[Jt.source]||0,ue=vt[Jt.target]||0,Ce=Math.max(ie,ue);nt[Ce]?nt[Ce].push(Jt.id):nt[Ce]=[Jt.id]}),nt.forEach(function(Gt){if(Gt&&Gt.length)for(var Jt=Gt.length-1;Jt>=0;Jt--){var ie=G.findById(Gt[Jt]);ie&&ie.toFront()}})}},U.prototype.getNeighbors=function(G,nt){var vt=G;return Object(c.x)(G)&&(vt=this.findById(G)),vt.getNeighbors(nt)},U.prototype.getNodeDegree=function(G,nt){nt===void 0&&(nt=void 0);var vt=G;Object(c.x)(G)&&(vt=this.findById(G));var Gt=this.get("degrees");Gt||(Gt=Object(C.getDegree)(this.get("data"))),this.set("degees",Gt);var Jt,ie=Gt[vt.getID()];switch(nt){case"in":Jt=ie.inDegree;break;case"out":Jt=ie.outDegree;break;case"all":Jt=ie;break;default:Jt=ie.degree}return Jt},U.prototype.getUndoStack=function(){return this.undoStack},U.prototype.getRedoStack=function(){return this.redoStack},U.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},U.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},U.prototype.pushStack=function(G,nt,vt){if(G===void 0&&(G="update"),vt===void 0&&(vt="undo"),this.get("enabledStack")){var Gt=nt?Object(c.c)(nt):{before:{},after:Object(c.c)(this.save())};vt==="redo"?this.redoStack.push({action:G,data:Gt}):this.undoStack.push({action:G,data:Gt}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})}else console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !")},U.prototype.getAdjMatrix=function(G,nt){G===void 0&&(G=!0),nt===void 0&&(nt=this.get("directed"));var vt=this.get("adjMatrix");return vt&&G||(vt=Object(C.getAdjMatrix)(this.save(),nt),this.set("adjMatrix",vt)),vt},U.prototype.getShortestPathMatrix=function(G,nt){G===void 0&&(G=!0),nt===void 0&&(nt=this.get("directed"));var vt=this.get("adjMatrix"),Gt=this.get("shortestPathMatrix");return vt&&G||(vt=Object(C.getAdjMatrix)(this.save(),nt),this.set("adjMatrix",vt)),Gt&&G||(Gt=Object(C.floydWarshall)(this.save(),nt),this.set("shortestPathMatrix",Gt)),Gt},U.prototype.on=function(G,nt,vt){return ve.prototype.on.call(this,G,nt,vt)},U.prototype.destroy=function(){this.clear(),this.clearStack(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("canvas").destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},U.prototype.createHull=function(G){if(G.members&&!(G.members.length<1)){var nt=this.get("hullGroup"),vt=this.get("hullMap");if(vt||(vt={},this.set("hullMap",vt)),nt||((nt=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",nt)),vt[G.id])return console.warn("Existed hull id."),vt[G.id];var Gt=nt.addGroup({id:G.id+"-container"}),Jt=new Ze(this,Object(r.a)(Object(r.a)({},G),{group:Gt}));return vt[Jt.id]=Jt,Jt}console.warn("Create hull failed! The members is empty.")},U.prototype.getHulls=function(){return this.get("hullMap")},U.prototype.getHullById=function(G){return this.get("hullMap")[G]},U.prototype.removeHull=function(G){var nt;nt=Object(c.x)(G)?this.getHullById(G):G,delete this.get("hullMap")[nt.id],nt.destroy()},U.prototype.removeHulls=function(){var G=this.getHulls();G&&Object.keys(G).length&&(G.forEach(function(nt){nt.destroy()}),this.set("hullMap",{}))},U}(s.a);function rr(ve){return(rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(ve)}var tn=d.a.transform,sn=["startArrow","endArrow"],un={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},ur={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:un,combo:un},jr={options:{},itemType:"",type:"",getCustomConfig:function(U){return{}},getOptions:function(U){return Object(c.e)({labelCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}},descriptionCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}}},this.options,this.getCustomConfig(U)||{},U)},draw:function(U,G){var nt=this.drawShape(U,G);return nt.set("className",this.itemType+"-shape"),U.label&&this.drawLabel(U,G).set("className",this.itemType+"-label"),nt},afterDraw:function(U,G,nt){},drawShape:function(U,G){return null},drawLabel:function(U,G){var nt=this.getOptions(U).labelCfg||{},vt=this.getLabelStyle(U,nt,G),Gt=vt.rotate;delete vt.rotate;var Jt=G.addShape("text",{attrs:vt,draggable:!0,className:"text-shape",name:"text-shape"});if(Gt){var ie=Jt.getBBox(),ue=Jt.getMatrix();if(ue||(ue=[1,0,0,0,1,0,0,0,1]),vt.rotateCenter)switch(vt.rotateCenter){case"center":ue=tn(ue,[["t",-ie.width/2,-ie.height/2],["r",Gt],["t",ie.width/2,ie.height/2]]);break;case"lefttop":ue=tn(ue,[["t",-vt.x,-vt.y],["r",Gt],["t",vt.x,vt.y]]);break;case"leftcenter":ue=tn(ue,[["t",-vt.x,-vt.y-ie.height/2],["r",Gt],["t",vt.x,vt.y+ie.height/2]]);break;default:ue=tn(ue,[["t",-ie.width/2,-ie.height/2],["r",Gt],["t",ie.width/2,ie.height/2]])}else ue=tn(ue,[["t",-vt.x,-vt.y-ie.height/2],["r",Gt],["t",vt.x,vt.y+ie.height/2]]);Jt.setMatrix(ue)}if(vt.background){var Ce=this.drawLabelBg(U,G,Jt),we=this.itemType+"-label-bg";Ce.set("classname",we),Jt.toFront()}return Jt},drawLabelBg:function(U,G,nt){var vt=this.options.labelCfg,Gt=Object(c.A)({},vt,U.labelCfg),Jt=this.getLabelBgStyleByPosition(nt,U,Gt,G);return G.addShape("rect",{name:"text-bg-shape",attrs:Jt})},getLabelStyleByPosition:function(U,G,nt){return{text:U.label}},getLabelBgStyleByPosition:function(U,G,nt,vt){return{}},getLabelStyle:function(U,G,nt){var vt=this.getLabelStyleByPosition(U,G,nt),Gt=this.itemType+"Label",Jt=yt[Gt]?yt[Gt].style:null;return Object(r.a)(Object(r.a)(Object(r.a)({},Jt),vt),G.style)},getShapeStyle:function(U){return U.style},update:function(U,G){this.updateShapeStyle(U,G),this.updateLabel(U,G)},updateShapeStyle:function(U,G){var nt=G.getContainer(),vt=G.getKeyShape(),Gt=Object(c.A)({},vt.attr(),U.style),Jt=function(Ce){var we,cn=Gt[Ce];if(Object(c.w)(cn)){var Cn=nt.find(function(_t){return _t.get("name")===Ce});Cn&&Cn.attr(cn)}else vt.attr(((we={})[Ce]=cn,we))};for(var ie in Gt)Jt(ie)},updateLabel:function(U,G){var nt=G.getContainer(),vt=this.getOptions({}).labelCfg,Gt=this.itemType+"-label",Jt=nt.find(function(Zn){return Zn.get("className")===Gt}),ie=this.itemType+"-label-bg",ue=nt.find(function(Zn){return Zn.get("classname")===ie});if(U.label||U.label==="")if(Jt){var Ce={};G.getModel&&(Ce=G.getModel().labelCfg);var we=Object(c.e)({},vt,Ce,U.labelCfg),cn=this.getLabelStyleByPosition(U,we,nt),Cn=U.labelCfg?U.labelCfg.style:void 0,_t=we.style&&we.style.background,Xt=Object(r.a)(Object(r.a)(Object(r.a)({},Jt.attr()),cn),Cn),Ee=Xt.rotate;if(delete Xt.rotate,Ee){var Vt=[1,0,0,0,1,0,0,0,1];Vt=tn(Vt,[["t",-Xt.x,-Xt.y],["r",Ee],["t",Xt.x,Xt.y]]),Jt.resetMatrix(),Jt.attr(Object(r.a)(Object(r.a)({},Xt),{matrix:Vt}))}else Jt.resetMatrix(),Jt.attr(Xt);if(ue)if(Xt.background){var ce=this.getLabelBgStyleByPosition(Jt,U,we,nt),yn=Object(r.a)(Object(r.a)({},ce),_t);if(ue.resetMatrix(),Ee){var Bn=[1,0,0,0,1,0,0,0,1];Bn=tn(Bn,[["t",-yn.x,-yn.y],["r",Ee],["t",yn.x,yn.y]]),yn.matrix=Bn}ue.attr(yn)}else nt.removeChild(ue);else Xt.background&&((ue=this.drawLabelBg(U,nt,Jt)).set("classname",ie),Jt.toFront())}else this.drawLabel(U,nt).set("className",Gt)},afterUpdate:function(U,G){},setState:function(U,G,nt){var vt,Gt,Jt=nt.get("keyShape");if(Jt){var ie=nt.getType(),ue=Object(c.n)(G)?U:U+":"+G,Ce=this.getStateStyle(ue,nt),we=nt.getStateStyle(ue);if(we||Ce){var cn=Object(c.A)({},we||Ce),Cn=nt.getContainer(),_t={x:1,y:1,cx:1,cy:1};if(ie==="combo"&&(_t.r=1,_t.width=1,_t.height=1),G){var Xt=function(le){var Me,Ve=cn[le];if(Object(c.w)(Ve)&&!sn.includes(le)){var Ye=Cn.find(function(ke){return ke.get("name")===le});Ye&&Ye.attr(Ve)}else Jt.attr(((Me={})[le]=Ve,Me))};for(var Ee in cn)Xt(Ee)}else{var Vt=mi(nt.getCurrentStatesStyle()),ce=nt.getModel(),yn=Object(c.A)({},ce.style,mi(nt.getOriginStyle())),Bn=Jt.get("name"),Zn=Jt.attr(),Kn={};Object.keys(Zn).forEach(function(he){if(he!=="img"){var le=Zn[he];le&&rr(le)==="object"?Kn[he]=Object(c.c)(le):Kn[he]=le}});var $e={},je=function(le){var Me=cn[le];if(Object(c.w)(Me)&&!sn.includes(le)){var Ve=Cn.find(function(nn){return nn.get("name")===le});if(Ve){var Ye=Object(c.c)(Ve.attr());Object(c.f)(Me,function(nn,Re){if(le===Bn&&Kn[Re]&&!_t[Re]){delete Kn[Re];var hn=yn[le][Re]||ur[ie][Re];Jt.attr(Re,hn)}else if(Ye[Re]||Ye[Re]===0){delete Ye[Re];var pn=yn[le][Re]||ur[ie][Re];Ve.attr(Re,pn)}}),$e[le]=Ye}}else if(Kn[le]&&!_t[le]){delete Kn[le];var ke=yn[le]||(yn[Bn]?yn[Bn][le]:void 0)||ur[ie][le];Jt.attr(le,ke)}};for(var L in cn)je(L);for(var Ee in Bn?$e[Bn]=Kn:Object(c.A)($e,Kn),Vt)if(!_t[Ee]){var Et=Vt[Ee];Object(c.w)(Et)&&!sn.includes(Ee)||(Bn?(Object(c.A)(yn[Bn],((Gt={})[Ee]=Et,Gt)),delete yn[Ee]):Object(c.A)(yn,((vt={})[Ee]=Et,vt)),delete Vt[Ee])}var $t={};Object(c.e)($t,yn,$e,Vt);var ye=!1,Zt=function(le){var Me,Ve,Ye=$t[le];if(Object(c.w)(Ye)&&!sn.includes(le)){var ke=Cn.find(function(Re){return Re.get("name")===le});ke&&(le===Bn&&(ie==="combo"&&(delete Ye.r,delete Ye.width,delete Ye.height),ye=!0),ke.attr(Ye))}else if(!ye){var nn=Ye||ur[ie][le];ie==="combo"?Bn||Jt.attr(((Me={})[le]=nn,Me)):Jt.attr(((Ve={})[le]=nn,Ve))}};for(var de in $t)Zt(de)}}}},getStateStyle:function(U,G){var nt=G.getModel(),vt=G.getType(),Gt=this.getOptions(nt),Jt=Gt.stateStyles,ie=Gt.style,ue=ie===void 0?{}:ie,Ce=nt.stateStyles?nt.stateStyles[U]:Jt&&Jt[U];return vt==="combo"?Object(c.c)(Ce):Object(c.A)({},ue,Ce)},getControlPoints:function(U){return U.controlPoints},getAnchorPoints:function(U){return this.getOptions(U).anchorPoints}},wr={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:yt.nodeLabel.offset,getSize:function(U){var G=U.size||this.getOptions({}).size||yt.defaultNode.size;return Object(c.m)(G)&&G.length===1&&(G=[G[0],G[0]]),Object(c.m)(G)||(G=[G,G]),G},getLabelStyleByPosition:function(U,G){var nt=G.position||this.labelPosition;if(nt==="center")return{x:0,y:0,text:U.label};var vt=G.offset;Object(c.s)(vt)&&(vt=this.offset);var Gt,Jt=this.getSize(U),ie=Jt[0],ue=Jt[1];switch(nt){case"top":Gt={x:0,y:0-ue/2-vt,textBaseline:"bottom"};break;case"bottom":Gt={x:0,y:ue/2+vt,textBaseline:"top"};break;case"left":Gt={x:0-ie/2-vt,y:0,textAlign:"right"};break;default:Gt={x:ie/2+vt,y:0,textAlign:"left"}}return Gt.text=U.label,Gt},getLabelBgStyleByPosition:function(U,G,nt,vt){if(!U)return{};var Gt=U.getBBox(),Jt=nt.style&&nt.style.background;if(!Jt)return{};var ie,ue=zt(Jt.padding),Ce=Gt.width+ue[1]+ue[3],we=Gt.height+ue[0]+ue[2],cn=nt.offset;return Object(c.s)(cn)&&(cn=this.offset),ie={x:Gt.minX-ue[3],y:Gt.minY-ue[0]},ie=Object(r.a)(Object(r.a)(Object(r.a)({},ie),Jt),{width:Ce,height:we})},drawShape:function(U,G){var nt=this.shapeType,vt=this.getShapeStyle(U);return G.addShape(nt,{attrs:vt,draggable:!0,name:"node-shape"})},updateLinkPoints:function(U,G){var nt,vt=this.getOptions(U).linkPoints,Gt=G.find(function(je){return je.get("className")==="link-point-left"}),Jt=G.find(function(je){return je.get("className")==="link-point-right"}),ie=G.find(function(je){return je.get("className")==="link-point-top"}),ue=G.find(function(je){return je.get("className")==="link-point-bottom"});Gt&&(nt=Gt.attr()),Jt&&!nt&&(nt=Jt.attr()),ie&&!nt&&(nt=ie.attr()),ue&&!nt&&(nt=ue.attr()),nt||(nt=vt);var Ce=Object(c.A)({},nt,U.linkPoints),we=Ce.fill,cn=Ce.stroke,Cn=Ce.lineWidth,_t=Ce.size/2;_t||(_t=Ce.r);var Xt=U.linkPoints?U.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},Ee=Xt.left,Vt=Xt.right,ce=Xt.top,yn=Xt.bottom,Bn=this.getSize(U),Zn=Bn[0],Kn=Bn[1],$e={r:_t,fill:we,stroke:cn,lineWidth:Cn};Gt?Ee||Ee===void 0?Gt.attr(Object(r.a)(Object(r.a)({},$e),{x:-Zn/2,y:0})):Gt.remove():Ee&&G.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},$e),{x:-Zn/2,y:0}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),Jt?(Vt||Vt===void 0||Jt.remove(),Jt.attr(Object(r.a)(Object(r.a)({},$e),{x:Zn/2,y:0}))):Vt&&G.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},$e),{x:Zn/2,y:0}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),ie?(ce||ce===void 0||ie.remove(),ie.attr(Object(r.a)(Object(r.a)({},$e),{x:0,y:-Kn/2}))):ce&&G.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},$e),{x:0,y:-Kn/2}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),ue?yn||yn===void 0?ue.attr(Object(r.a)(Object(r.a)({},$e),{x:0,y:Kn/2})):ue.remove():yn&&G.addShape("circle",{attrs:Object(r.a)(Object(r.a)({},$e),{x:0,y:Kn/2}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},updateShape:function(U,G,nt,vt){G.get("keyShape").attr(Object(r.a)({},nt)),this.updateLabel(U,G),vt&&this.updateIcon(U,G)},updateIcon:function(U,G){var nt=this,vt=G.getContainer(),Gt=this.getOptions(U).icon,Jt=(U.icon?U.icon:{show:void 0}).show,ie=vt.find(function(Cn){return Cn.get("className")===nt.type+"-icon"});if(ie)if(Jt||Jt===void 0){var ue=Object(c.A)({},ie.attr(),Gt),Ce=ue.width,we=ue.height;ie.attr(Object(r.a)(Object(r.a)({},ue),{x:-Ce/2,y:-we/2}))}else ie.remove();else if(Jt){Ce=Gt.width,we=Gt.height,vt.addShape("image",{attrs:Object(r.a)(Object(r.a)({},Gt),{x:-Ce/2,y:-we/2}),className:this.type+"-icon",name:this.type+"-icon"});var cn=vt.find(function(Cn){return Cn.get("className")==="node-label"});cn&&cn.toFront()}}},yr=Object(r.a)(Object(r.a)({},jr),wr);Yr.registerNode("single-node",yr);var ni={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:yt.defaultEdge.size,style:{x:0,y:0,stroke:yt.defaultEdge.style.stroke,lineAppendWidth:yt.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:yt.edgeLabel.style.fill,fontSize:yt.edgeLabel.style.fontSize}},stateStyles:Object(r.a)({},yt.edgeStateStyles)},getPath:function(U){var G=[];return Object(c.f)(U,function(nt,vt){vt===0?G.push(["M",nt.x,nt.y]):G.push(["L",nt.x,nt.y])}),G},getShapeStyle:function(U){var G=this.options.style,nt={stroke:U.color},vt=Object(c.A)({},G,nt,U.style),Gt=U.size||yt.defaultEdge.size,Jt=(U=this.getPathPoints(U)).startPoint,ie=U.endPoint,ue=this.getControlPoints(U),Ce=[Jt];ue&&(Ce=Ce.concat(ue)),Ce.push(ie);var we=this.getPath(Ce);return Object(c.A)({},yt.defaultEdge.style,{stroke:yt.defaultEdge.color,lineWidth:Gt,path:we},vt)},updateShapeStyle:function(U,G){var nt=G.getContainer(),vt={stroke:U.color},Gt=nt.find(function(yn){return yn.get("className")==="edge-shape"})||G.getKeyShape(),Jt=U.size,ie=(U=this.getPathPoints(U)).startPoint,ue=U.endPoint,Ce=this.getControlPoints(U),we=[ie];Ce&&(we=we.concat(Ce)),we.push(ue);var cn=Gt.attr(),Cn=Object(c.A)({},vt,cn,U.style),_t=U.sourceNode,Xt=U.targetNode,Ee={radius:Cn.radius};Ce||(Ee={source:_t,target:Xt,offset:Cn.offset,radius:Cn.radius}),cn.endArrow&&Cn.endArrow===!1&&(U.style.endArrow={path:""}),cn.startArrow&&Cn.startArrow===!1&&(U.style.startArrow={path:""});var Vt=this.getPath(we,Ee),ce=Object(c.A)(vt,Gt.attr(),{lineWidth:Jt,path:Vt},U.style);Gt&&Gt.attr(ce)},getLabelStyleByPosition:function(U,G,nt){var vt,Gt=G.position||this.labelPosition,Jt={},ie=nt&&nt.find(function(Cn){return Cn.get("className")==="edge-shape"});vt=Gt==="start"?0:Gt==="end"?1:.5;var ue=G.refX||this.refX,Ce=G.refY||this.refY;if(U.startPoint.x===U.endPoint.x&&U.startPoint.y===U.endPoint.y)return Jt.x=U.startPoint.x+ue,Jt.y=U.startPoint.y+Ce,Jt.text=U.label,Jt;var we=Object(c.s)(G.autoRotate)?this.labelAutoRotate:G.autoRotate,cn=Dn(ie,vt,ue,Ce,we);return Jt.x=cn.x,Jt.y=cn.y,Jt.rotate=cn.rotate,Jt.textAlign=this._getTextAlign(Gt,cn.angle),Jt.text=U.label,Jt},getLabelBgStyleByPosition:function(U,G,nt,vt){if(!U)return{};var Gt=U.getBBox(),Jt=nt.style&&nt.style.background;if(!Jt)return{};var ie,ue=Jt.padding,Ce=Gt.width+ue[1]+ue[3],we=Gt.height+ue[0]+ue[2],cn=nt.position||this.labelPosition,Cn=Object(r.a)(Object(r.a)({},Jt),{width:Ce,height:we,x:Gt.minX-ue[2],y:Gt.minY-ue[0],rotate:0}),_t=Object(c.s)(nt.autoRotate)?this.labelAutoRotate:nt.autoRotate,Xt=vt&&vt.find(function(Bn){return Bn.get("className")==="edge-shape"});ie=cn==="start"?0:cn==="end"?1:.5;var Ee=nt.refX||this.refX,Vt=nt.refY||this.refY;if(G.startPoint.x===G.endPoint.x&&G.startPoint.y===G.endPoint.y)return Cn.x=G.startPoint.x+Ee-Ce/2,Cn.y=G.startPoint.y+Vt-we/2,Cn;var ce=Dn(Xt,ie,Ee-Ce/2,Vt+we/2,_t),yn=ce.angle;return yn>.5*Math.PI&&yn<1.5*Math.PI&&(ce=Dn(Xt,ie,Ee+Ce/2,Vt+we/2,_t)),_t&&(Cn.x=ce.x,Cn.y=ce.y),Cn.rotate=ce.rotate,Cn},_getTextAlign:function(U,G){var nt="center";return G?(G%=2*Math.PI,U!=="center"&&(nt=G>=0&&G<=Math.PI/2||G>=1.5*Math.PI&&G<2*Math.PI?U:function(vt){var Gt=vt;return vt==="start"?Gt="end":vt==="end"&&(Gt="start"),Gt}(U)),nt):U},getControlPoints:function(U){return U.controlPoints},getPathPoints:function(U){return U},drawShape:function(U,G){var nt=this.getShapeStyle(U);return G.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:nt})},drawLabel:function(U,G){var nt=this.options.labelCfg,vt=Object(c.e)({fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},nt,U.labelCfg),Gt=this.getLabelStyle(U,vt,G),Jt=Gt.rotate;delete Gt.rotate;var ie=G.addShape("text",{attrs:Gt,name:"text-shape"});if(Jt&&ie.rotateAtStart(Jt),Gt.background){var ue=this.drawLabelBg(U,G,ie),Ce=this.itemType+"-label-bg";ue.set("classname",Ce),ie.toFront()}return ie},drawLabelBg:function(U,G,nt){var vt=this.options.labelCfg,Gt=Object(c.e)({},vt,U.labelCfg),Jt=this.getLabelStyle(U,Gt,G).rotate,ie=this.getLabelBgStyleByPosition(nt,U,Gt,G);delete ie.rotate;var ue=G.addShape("rect",{name:"text-bg-shape",attrs:ie});return Jt&&ue.rotateAtStart(Jt),ue}},_r=Object(r.a)(Object(r.a)({},jr),ni);Yr.registerEdge("single-edge",_r),Yr.registerEdge("line",{getControlPoints:function(){}},"single-edge"),Yr.registerEdge("spline",{getPath:function(U){return pi(U)}},"single-edge"),Yr.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(U){var G,nt,vt=U.startPoint,Gt=U.endPoint,Jt=(vt.x+Gt.x)/2,ie=(vt.y+Gt.y)/2;if(U.controlPoints!==void 0){if(nt=U.controlPoints[0],G=ft(vt,nt,Gt),vt.x<=Gt.x&&vt.y>Gt.y?this.clockwise=G.x>nt.x?0:1:vt.x<=Gt.x&&vt.y<Gt.y?this.clockwise=G.x>nt.x?1:0:vt.x>Gt.x&&vt.y<=Gt.y?this.clockwise=G.y<nt.y?0:1:this.clockwise=G.y<nt.y?1:0,(nt.x-vt.x)/(nt.y-vt.y)==(Gt.x-vt.x)/(Gt.y-vt.y))return[]}else{U.curveOffset===void 0&&(U.curveOffset=this.curveOffset),Object(c.m)(U.curveOffset)&&(U.curveOffset=U.curveOffset[0]),U.curveOffset<0?this.clockwise=0:this.clockwise=1;var ue={x:Gt.x-vt.x,y:Gt.y-vt.y},Ce=Math.atan2(ue.y,ue.x);nt={x:U.curveOffset*Math.cos(-Math.PI/2+Ce)+Jt,y:U.curveOffset*Math.sin(-Math.PI/2+Ce)+ie},G=ft(vt,nt,Gt)}var we=Z(vt,G);return[{x:we,y:we}]},getPath:function(U){var G=[];return G.push(["M",U[0].x,U[0].y]),U.length===2?G.push(["L",U[1].x,U[1].y]):G.push(["A",U[1].x,U[1].y,0,0,this.clockwise,U[2].x,U[2].y]),G}},"single-edge"),Yr.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(U){var G=U.controlPoints;if(!G||!G.length){var nt=U.startPoint,vt=U.endPoint;U.curveOffset===void 0&&(U.curveOffset=this.curveOffset),U.curvePosition===void 0&&(U.curvePosition=this.curvePosition),Object(c.m)(this.curveOffset)&&(U.curveOffset=U.curveOffset[0]),Object(c.m)(this.curvePosition)&&(U.curvePosition=U.curveOffset[0]),G=[Ni(nt,vt,U.curvePosition,U.curveOffset)]}return G},getPath:function(U){var G=[];return G.push(["M",U[0].x,U[0].y]),G.push(["Q",U[1].x,U[1].y,U[2].x,U[2].y]),G}},"single-edge"),Yr.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(U){var G=U.controlPoints;if(U.curveOffset===void 0&&(U.curveOffset=this.curveOffset),U.curvePosition===void 0&&(U.curvePosition=this.curvePosition),Object(c.t)(U.curveOffset)&&(U.curveOffset=[U.curveOffset,-U.curveOffset]),Object(c.t)(U.curvePosition)&&(U.curvePosition=[U.curvePosition,1-U.curvePosition]),!G||!G.length||G.length<2){var nt=U.startPoint,vt=U.endPoint;G=[Ni(nt,vt,U.curvePosition[0],U.curveOffset[0]),Ni(nt,vt,U.curvePosition[1],U.curveOffset[1])]}return G},getPath:function(U){var G=[];return G.push(["M",U[0].x,U[0].y]),G.push(["C",U[1].x,U[1].y,U[2].x,U[2].y,U[3].x,U[3].y]),G}},"single-edge"),Yr.registerEdge("cubic-vertical",{curvePosition:[.5,.5],getControlPoints:function(U){var G=U.startPoint,nt=U.endPoint;return U.curvePosition!==void 0&&(this.curvePosition=U.curvePosition),Object(c.t)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]),[{x:G.x,y:(nt.y-G.y)*this.curvePosition[0]+G.y},{x:nt.x,y:(nt.y-G.y)*this.curvePosition[1]+G.y}]}},"cubic"),Yr.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],getControlPoints:function(U){var G=U.startPoint,nt=U.endPoint;return U.curvePosition!==void 0&&(this.curvePosition=U.curvePosition),Object(c.t)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]),[{x:(nt.x-G.x)*this.curvePosition[0]+G.x,y:G.y},{x:(nt.x-G.x)*this.curvePosition[1]+G.x,y:nt.y}]}},"cubic"),Yr.registerEdge("loop",{getPathPoints:function(U){return Vn(U)},getControlPoints:function(U){return U.controlPoints},afterDraw:function(U){U.controlPoints=void 0},afterUpdate:function(U){U.controlPoints=void 0}},"cubic");var Fr={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:yt.comboLabel.refX,refY:yt.comboLabel.refY,options:{style:{stroke:yt.defaultCombo.style.stroke,fill:yt.defaultCombo.style.fill,lineWidth:yt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:yt.comboLabel.style.fill,fontSize:yt.comboLabel.style.fontSize}},stateStyles:Object(r.a)({},yt.comboStateStyles)},getSize:function(U){var G=Object(c.c)(U.size||this.options.size||yt.defaultCombo.size);return Object(c.m)(G)&&G.length===1&&(G=[G[0],G[0]]),Object(c.m)(G)||(G=[G,G]),G},getLabelStyleByPosition:function(U,G){var nt=G.position||this.labelPosition,vt=U.style,Gt=U.padding||this.options.padding;Object(c.m)(Gt)&&(Gt=Gt[0]);var Jt=G.refX,ie=G.refY;Object(c.s)(Jt)&&(Jt=this.refX),Object(c.s)(ie)&&(ie=this.refY);var ue,Ce=this.getSize(U),we=(Math.max(vt.r,Ce[0]/2)||Ce[0]/2)+Gt;switch(nt){case"top":ue={x:0,y:-we-ie,textBaseline:"bottom",textAlign:"center"};break;case"bottom":ue={x:0,y:we+ie,textBaseline:"bottom",textAlign:"center"};break;case"left":ue={x:-we+Jt,y:0,textAlign:"left"};break;case"center":ue={x:0,y:0,text:U.label,textAlign:"center"};break;default:ue={x:we+Jt,y:0,textAlign:"right"}}return ue.text=U.label,ue},drawShape:function(U,G){var nt=this.shapeType,vt=this.getShapeStyle(U);return G.addShape(nt,{attrs:vt,draggable:!0,name:"combo-shape"})},updateShape:function(U,G,nt){var vt=G.get("keyShape");(U.animate===void 0?this.options.animate:U.animate)&&vt.animate?vt.animate(nt,{duration:200,easing:"easeLinear"}):vt.attr(Object(r.a)({},nt)),this.updateLabel(U,G)}},Lr=Object(r.a)(Object(r.a)({},jr),Fr);Yr.registerCombo("single-combo",Lr),Yr.registerCombo("circle",{options:{size:[yt.defaultCombo.size[0],yt.defaultCombo.size[0]],padding:yt.defaultCombo.padding[0],animate:!0,style:{stroke:yt.defaultCombo.style.stroke,fill:yt.defaultCombo.style.fill,lineWidth:yt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:yt.comboLabel.style.fill,fontSize:yt.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:Object(r.a)({},yt.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function(U,G){var nt=this.getShapeStyle(U);return delete nt.height,delete nt.width,G.addShape("circle",{attrs:nt,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(U){var G=this.options.style,nt=U.padding||this.options.padding;Object(c.m)(nt)&&(nt=nt[0]);var vt,Gt={stroke:U.color},Jt=Object(c.A)({},G,Gt,U.style),ie=this.getSize(U);vt=!Object(c.t)(Jt.r)||isNaN(Jt.r)?ie[0]/2||yt.defaultCombo.style.r:Math.max(Jt.r,ie[0]/2)||ie[0]/2,Jt.r=vt+nt;var ue=Object(r.a)({x:0,y:0},Jt);return U.style?U.style.r=vt:U.style={r:vt},ue},update:function(U,G){var nt=this.getSize(U),vt=U.padding||this.options.padding;Object(c.m)(vt)&&(vt=vt[0]);var Gt=Object(c.c)(U.style),Jt=Math.max(Gt.r,nt[0]/2)||nt[0]/2;Gt.r=Jt+vt;var ie=G.get("sizeCache");ie&&(ie.r=Gt.r);var ue={stroke:U.color},Ce=G.get("keyShape"),we=Object(c.A)({},Ce.attr(),ue,Gt);U.style?U.style.r=Jt:U.style={r:Jt},this.updateShape(U,G,we,!0)}},"single-combo"),Yr.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:yt.defaultCombo.style.stroke,fill:yt.defaultCombo.style.fill,lineWidth:yt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:yt.comboLabel.style.fill,fontSize:yt.comboLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(r.a)({},yt.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function(U,G){var nt=this.getShapeStyle(U);return G.addShape("rect",{attrs:nt,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(U,G){var nt=G.position||this.labelPosition,vt=U.style,Gt=U.padding||this.options.padding;Object(c.t)(Gt)&&(Gt=[Gt,Gt,Gt,Gt]);var Jt=G.refX,ie=G.refY;Object(c.s)(Jt)&&(Jt=this.refX),Object(c.s)(ie)&&(ie=this.refY);var ue,Ce=vt.width/2+Gt[3],we=vt.height/2+Gt[0];switch(nt){case"top":ue={x:0-Ce+Jt,y:0-we+ie,textBaseline:"top",textAlign:"left"};break;case"bottom":ue={x:0,y:we+ie,textBaseline:"bottom",textAlign:"center"};break;case"left":ue={x:0-Ce+ie,y:0,textAlign:"left"};break;case"center":ue={x:0,y:0,text:U.label,textAlign:"center"};break;default:ue={x:Ce+Jt,y:0,textAlign:"right"}}return ue.text=U.label,ue},getShapeStyle:function(U){var G=this.options.style,nt=U.padding||this.options.padding;Object(c.t)(nt)&&(nt=[nt,nt,nt,nt]);var vt,Gt,Jt={stroke:U.color},ie=Object(c.A)({},G,Jt,U.style),ue=this.getSize(U);vt=!Object(c.t)(ie.width)||isNaN(ie.width)?ue[0]||yt.defaultCombo.style.width:Math.max(ie.width,ue[0])||ue[0],Gt=!Object(c.t)(ie.height)||isNaN(ie.height)?ue[1]||yt.defaultCombo.style.height:Math.max(ie.height,ue[1])||ue[1];var Ce=-vt/2-nt[3],we=-Gt/2-nt[0];ie.width=vt+nt[1]+nt[3],ie.height=Gt+nt[0]+nt[2];var cn=Object(r.a)({x:Ce,y:we},ie);return U.style?(U.style.width=vt,U.style.height=Gt):U.style={width:vt,height:Gt},cn},update:function(U,G){var nt=this.getSize(U),vt=U.padding||this.options.padding;Object(c.t)(vt)&&(vt=[vt,vt,vt,vt]);var Gt=Object(c.c)(U.style),Jt=Math.max(Gt.width,nt[0])||nt[0],ie=Math.max(Gt.height,nt[1])||nt[1];Gt.width=Jt+vt[1]+vt[3],Gt.height=ie+vt[0]+vt[2];var ue=G.get("sizeCache");ue&&(ue.width=Gt.width,ue.height=Gt.height),Gt.x=-Jt/2-vt[3],Gt.y=-ie/2-vt[0];var Ce={stroke:U.color},we=G.get("keyShape"),cn=Object(c.A)({},we.attr(),Ce,Gt);U.style?(U.style.width=Jt,U.style.height=ie):U.style={width:Jt,height:ie},this.updateShape(U,G,cn,!1)},updateShape:function(U,G,nt){var vt=G.get("keyShape");(U.animate===void 0?this.options.animate:U.animate)&&vt.animate?vt.animate(nt,{duration:200,easing:"easeLinear"}):vt.attr(Object(r.a)({},nt)),this.updateLabel(U,G)}},"single-combo"),Yr.registerNode("simple-circle",{options:{size:yt.defaultNode.size,style:{x:0,y:0,stroke:yt.defaultNode.style.stroke,fill:yt.defaultNode.style.fill,lineWidth:yt.defaultNode.style.lineWidth},labelCfg:{style:{fill:yt.nodeLabel.style.fill,fontSize:yt.nodeLabel.style.fontSize}},stateStyles:Object(r.a)({},yt.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",drawShape:function(U,G){var nt=this.getShapeStyle(U);return G.addShape("circle",{attrs:nt,className:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(U){var G=this.getOptions(U).style,nt={stroke:U.color},vt=Object(c.e)({},G,nt),Gt=this.getSize(U)[0]/2;return Object(r.a)({x:0,y:0,r:Gt},vt)},update:function(U,G){var nt=this.getSize(U),vt={stroke:U.color,r:nt[0]/2},Gt=G.get("keyShape"),Jt=Object(c.e)({},Gt.attr(),vt,U.style);this.updateShape(U,G,Jt,!0)}},"single-node"),Yr.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:yt.defaultNode.style.stroke,fill:yt.defaultNode.style.fill,lineWidth:yt.defaultNode.style.lineWidth},labelCfg:{style:{fill:yt.nodeLabel.style.fill,fontSize:yt.nodeLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(r.a)({},yt.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(U,G){var nt=this.getShapeStyle(U);return G.addShape("rect",{attrs:nt,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(U){var G=this.getOptions(U).style,nt={stroke:U.color},vt=Object(c.A)({},G,nt),Gt=this.getSize(U),Jt=vt.width||Gt[0],ie=vt.height||Gt[1];return Object(r.a)({x:-Jt/2,y:-ie/2,width:Jt,height:ie},vt)},update:function(U,G){G.getContainer();var nt=this.getOptions({}).style,vt=this.getSize(U),Gt=G.get("keyShape");U.size||(vt[0]=Gt.attr("width")||nt.width,vt[1]=Gt.attr("height")||nt.height);var Jt={stroke:U.color,x:-vt[0]/2,y:-vt[1]/2,width:vt[0],height:vt[1]},ie=Object(c.A)({},nt,Gt.attr(),Jt);ie=Object(c.A)(ie,U.style),this.updateShape(U,G,ie,!1)}},"single-node"),Yr.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(U,G){var nt=this.shapeType,vt=this.getShapeStyle(U);delete vt.fill;var Gt=G.addShape(nt,{attrs:vt,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(U,Gt),Gt},drawClip:function(U,G){var nt=this.getOptions(U).clipCfg;if(nt.show){var vt=nt.type,Gt=nt.x,Jt=nt.y,ie=nt.style;if(vt==="circle"){var ue=nt.r;G.setClip({type:"circle",attrs:Object(r.a)({r:ue,x:Gt,y:Jt},ie)})}else if(vt==="rect"){var Ce=nt.width,we=nt.height,cn=Gt-Ce/2,Cn=Jt-we/2;G.setClip({type:"rect",attrs:Object(r.a)({x:cn,y:Cn,width:Ce,height:we},ie)})}else if(vt==="ellipse"){var _t=nt.rx,Xt=nt.ry;G.setClip({type:"ellipse",attrs:Object(r.a)({x:Gt,y:Jt,rx:_t,ry:Xt},ie)})}else if(vt==="polygon"){var Ee=nt.points;G.setClip({type:"polygon",attrs:Object(r.a)({points:Ee},ie)})}else if(vt==="path"){var Vt=nt.path;G.setClip({type:"path",attrs:Object(r.a)({path:Vt},ie)})}}},getShapeStyle:function(U){var G=this.getOptions(U).style,nt=this.getSize(U),vt=this.getOptions(U).img,Gt=nt[0],Jt=nt[1];return G&&(Gt=G.width||nt[0],Jt=G.height||nt[1]),Object(r.a)({x:-Gt/2,y:-Jt/2,width:Gt,height:Jt,img:vt},G)},updateShapeStyle:function(U,G){var nt=G.getContainer(),vt=this.itemType+"-shape",Gt=nt.find(function(ie){return ie.get("className")===vt})||G.getKeyShape(),Jt=this.getShapeStyle(U);Gt&&Gt.attr(Jt)}},"single-node");var Gr,Hr={triangle:function(U,G,nt){U===void 0&&(U=10),G===void 0&&(G=15),nt===void 0&&(nt=0);var vt=2*nt;return"M "+vt+",0 L "+(vt+G)+",-"+U/2+" L "+(vt+G)+","+U/2+" Z"},vee:function(U,G,nt){U===void 0&&(U=15),G===void 0&&(G=20),nt===void 0&&(nt=0);var vt=2*nt;return"M "+vt+",0 L "+(vt+G)+",-"+U/2+`
        L `+(vt+2*G/3)+",0 L "+(vt+G)+","+U/2+" Z"},circle:function(U,G){return U===void 0&&(U=5),G===void 0&&(G=0),"M "+2*G+`, 0
            a `+U+","+U+" 0 1,0 "+2*U+`,0
            a `+U+","+U+" 0 1,0 "+2*-U+",0"},rect:function(U,G,nt){U===void 0&&(U=10),G===void 0&&(G=10),nt===void 0&&(nt=0);var vt=2*nt;return"M "+vt+","+-U/2+` 
        L `+(vt+G)+","+-U/2+` 
        L `+(vt+G)+","+U/2+` 
        L `+vt+","+U/2+" Z"},diamond:function(U,G,nt){U===void 0&&(U=15),G===void 0&&(G=15),nt===void 0&&(nt=0);var vt=2*nt;return"M "+vt+`,0 
        L `+(vt+G/2)+","+-U/2+` 
        L `+(vt+G)+`,0 
        L `+(vt+G/2)+","+U/2+" Z"},triangleRect:function(U,G,nt,vt,Gt,Jt){U===void 0&&(U=15),G===void 0&&(G=15),nt===void 0&&(nt=15),vt===void 0&&(vt=3),Gt===void 0&&(Gt=5),Jt===void 0&&(Jt=0);var ie=2*Jt,ue=ie+G+Gt;return"M "+ie+",0 L "+(ie+G)+",-"+U/2+" L "+(ie+G)+","+U/2+` Z
            M `+ue+", -"+nt/2+`
            L `+(ue+vt)+" -"+nt/2+`
            L `+(ue+vt)+" "+nt/2+`
            L `+ue+" "+nt/2+`
            Z`}},ei={collapse:function(U,G,nt){return[["M",U-nt,G],["a",nt,nt,0,1,0,2*nt,0],["a",nt,nt,0,1,0,2*-nt,0],["M",U-nt+4,G],["L",U+nt-4,G]]},expand:function(U,G,nt){return[["M",U-nt,G],["a",nt,nt,0,1,0,2*nt,0],["a",nt,nt,0,1,0,2*-nt,0],["M",U-nt+4,G],["L",U-nt+2*nt-4,G],["M",U-nt+nt,G-nt+4],["L",U,G+nt-4]]},upTriangle:function(U,G,nt){var vt=nt*Math.cos(Math.PI/6),Gt=nt*Math.sin(Math.PI/6);return[["M",U-vt,G+Gt],["L",U+vt,G+Gt],["L",U,G-nt],["Z"]]},downTriangle:function(U,G,nt){var vt=nt*Math.cos(Math.PI/6),Gt=nt*Math.sin(Math.PI/6);return[["M",U-vt,G-Gt],["L",U+vt,G-Gt],["L",U,G+nt],["Z"]]}},Kr=Yr,Qr=d.a.transform,Oi=Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({},u),p),b),n),{transform:Qr,mat3:d.b}),Ri=function(){function ve(U){this.graph=U,this.layoutCfg=U.get("layout")||{},this.layoutType=this.layoutCfg.type,this.initLayout()}return ve.prototype.initLayout=function(){},ve.prototype.getLayoutType=function(){return this.layoutCfg.type},ve.prototype.refreshLayout=function(){var U=this.graph;U&&(U.get("animate")?U.positionsAnimate():U.refreshPositions())},ve.prototype.changeLayout=function(U){var G=this.graph,nt=this.layoutMethod;this.layoutType=U,this.layoutCfg=G.get("layout")||{},this.layoutCfg.type=U,nt&&nt.destroy(),this.layout()},ve.prototype.changeData=function(){var U=this.layoutMethod;U&&U.destroy(),this.layout()},ve.prototype.destroyLayout=function(){var U=this.layoutMethod,G=this.graph;U&&U.destroy(),G.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethod=void 0},ve.prototype.setDataFromGraph=function(){for(var U=[],G=[],nt=[],vt=this.graph.getNodes(),Gt=this.graph.getEdges(),Jt=this.graph.getCombos(),ie=vt.length,ue=0;ue<ie;ue++){var Ce=vt[ue];if(Ce.isVisible()){var we=Ce.getModel();U.push(we)}}var cn=Gt.length;for(ue=0;ue<cn;ue++){var Cn=Gt[ue];Cn&&!Cn.destroyed&&Cn.isVisible()&&((we=Cn.getModel()).isComboEdge||G.push(we))}var _t=Jt.length;for(ue=0;ue<_t;ue++){var Xt=Jt[ue];!Xt.destroyed&&Xt.isVisible()&&(we=Xt.getModel(),nt.push(we))}return{nodes:U,edges:G,combos:nt}},ve.prototype.relayout=function(U){var G=this.graph,nt=this.layoutMethod,vt=this.layoutCfg;if(U){this.data=this.setDataFromGraph();var Gt=this.data.nodes;if(!Gt)return!1;this.initPositions(vt.center,Gt),nt.init(this.data)}this.layoutType==="force"&&(nt.ticking=!1,nt.forceSimulation.stop()),G.emit("beforelayout"),nt.execute(U),nt.isCustomLayout&&vt.onLayoutEnd&&vt.onLayoutEnd()},ve.prototype.layoutAnimate=function(){},ve.prototype.moveToZero=function(){var U=this.graph.get("data").nodes;if(U[0].x!==void 0&&U[0].x!==null&&!Ht(U[0].x)){for(var G=[0,0],nt=U.length,vt=0;vt<nt;vt++){var Gt=U[vt];G[0]+=Gt.x,G[1]+=Gt.y}for(G[0]/=U.length,G[1]/=U.length,vt=0;vt<nt;vt++)(Gt=U[vt]).x-=G[0],Gt.y-=G[1]}},ve.prototype.initPositions=function(U,G){var nt=this.graph;if(!G)return!1;var vt=!0,Gt=.85*nt.get("width"),Jt=.85*nt.get("height"),ie=G.length,ue=Math.ceil(Math.sqrt(ie)*(Gt/Jt)),Ce=Gt/(ue-1),we=Jt/(Math.ceil(ie/ue)-1);isFinite(Ce)&&Ce||(Ce=0),isFinite(we)&&Ce||(we=0);for(var cn=U[0]-Gt/2,Cn=U[1]-Jt/2,_t=G.length,Xt=0;Xt<_t;Xt++){var Ee=G[Xt];Ht(Ee.x)&&(vt=!1,Ee.x=Xt%ue*Ce+cn),Ht(Ee.y)&&(vt=!1,Ee.y=Math.floor(Xt/ue)*we+Cn)}return vt},ve.prototype.destroy=function(){var U=this.layoutMethod;this.graph=null,U&&(U.destroy(),U.destroyed=!0),this.destroyed=!0},ve}(),Si=function(U){this.graph=U,this.destroyed=!1,this.initEvents()};(function(ve){ve.CLICK="click",ve.DBLCLICK="dblclick",ve.MOUSEDOWN="mousedown",ve.MOUDEUP="mouseup",ve.CONTEXTMENU="contextmenu",ve.MOUSEENTER="mouseenter",ve.MOUSEOUT="mouseout",ve.MOUSEOVER="mouseover",ve.MOUSEMOVE="mousemove",ve.MOUSELEAVE="mouseleave",ve.DRAGSTART="dragstart",ve.DRAGEND="dragend",ve.DRAG="drag",ve.DRAGENTER="dragenter",ve.DRAGLEAVE="dragleave",ve.DRAGOVER="dragover",ve.DRAGOUT="dragout",ve.DDROP="drop",ve.KEYUP="keyup",ve.KEYDOWN="keydown",ve.WHEEL="wheel",ve.FOCUS="focus",ve.BLUR="blur",ve.TOUCHSTART="touchstart",ve.TOUCHMOVE="touchmove",ve.TOUCHEND="touchend",ve.NODE_CONTEXTMENU="node:contextmenu",ve.NODE_CLICK="node:click",ve.NODE_DBLCLICK="node:dblclick",ve.NODE_MOUSEDOWN="node:mousedown",ve.NODE_MOUSEUP="node:mouseup",ve.NODE_MOUSEENTER="node:mouseenter",ve.NODE_MOUSELEAVE="node:mouseleave",ve.NODE_MOUSEMOVE="node:mousemove",ve.NODE_MOUSEOUT="node:mouseout",ve.NODE_MOUSEOVER="node:mouseover",ve.NODE_DROP="node:drop",ve.NODE_DRAGOVER="node:dragover",ve.NODE_DRAGENTER="node:dragenter",ve.NODE_DRAGLEAVE="node:dragleave",ve.NODE_DRAGSTART="node:dragstart",ve.NODE_DRAG="node:drag",ve.NODE_DRAGEND="node:dragend",ve.COMBO_CONTEXTMENU="combo:contextmenu",ve.COMBO_CLICK="combo:click",ve.COMBO_DBLCLICK="combo:dblclick",ve.COMBO_MOUSEDOWN="combo:mousedown",ve.COMBO_MOUSEUP="combo:mouseup",ve.COMBO_MOUSEENTER="combo:mouseenter",ve.COMBO_MOUSELEAVE="combo:mouseleave",ve.COMBO_MOUSEMOVE="combo:mousemove",ve.COMBO_MOUSEOUT="combo:mouseout",ve.COMBO_MOUSEOVER="combo:mouseover",ve.COMBO_DROP="combo:drop",ve.COMBO_DRAGOVER="combo:dragover",ve.COMBO_DRAGENTER="combo:dragenter",ve.COMBO_DRAGLEAVE="combo:dragleave",ve.COMBO_DRAGSTART="combo:dragstart",ve.COMBO_DRAG="combo:drag",ve.COMBO_DRAGEND="combo:dragend",ve.EDGE_CONTEXTMENU="edge:contextmenu",ve.EDGE_CLICK="edge:click",ve.EDGE_DBLCLICK="edge:dblclick",ve.EDGE_MOUSEDOWN="edge:mousedown",ve.EDGE_MOUSEUP="edge:mouseup",ve.EDGE_MOUSEENTER="edge:mouseenter",ve.EDGE_MOUSELEAVE="edge:mouseleave",ve.EDGE_MOUSEMOVE="edge:mousemove",ve.EDGE_MOUSEOUT="edge:mouseout",ve.EDGE_MOUSEOVER="edge:mouseover",ve.EDGE_DROP="edge:drop",ve.EDGE_DRAGOVER="edge:dragover",ve.EDGE_DRAGENTER="edge:dragenter",ve.EDGE_DRAGLEAVE="edge:dragleave",ve.CANVAS_CONTEXTMENU="canvas:contextmenu",ve.CANVAS_CLICK="canvas:click",ve.CANVAS_DBLCLICK="canvas:dblclick",ve.CANVAS_MOUSEDOWN="canvas:mousedown",ve.CANVAS_MOUSEUP="canvas:mouseup",ve.CANVAS_MOUSEENTER="canvas:mouseenter",ve.CANVAS_MOUSELEAVE="canvas:mouseleave",ve.CANVAS_MOUSEMOVE="canvas:mousemove",ve.CANVAS_MOUSEOUT="canvas:mouseout",ve.CANVAS_MOUSEOVER="canvas:mouseover",ve.CANVAS_DROP="canvas:drop",ve.CANVAS_DRAGENTER="canvas:dragenter",ve.CANVAS_DRAGLEAVE="canvas:dragleave",ve.CANVAS_DRAGSTART="canvas:dragstart",ve.CANVAS_DRAG="canvas:drag",ve.CANVAS_DRAGEND="canvas:dragend",ve.BEFORERENDER="beforerender",ve.AFTERRENDER="afterrender",ve.BEFOREADDITEM="beforeadditem",ve.AFTERADDITEM="afteradditem",ve.BEFOREREMOVEITEM="beforeremoveitem",ve.AFTERREMOVEITEM="afterremoveitem",ve.BEFOREUPDATEITEM="beforeupdateitem",ve.AFTERUPDATEITEM="afterupdateitem",ve.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",ve.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",ve.BEFOREITEMSTATECHANGE="beforeitemstatechange",ve.AFTERITEMSTATECHANGE="afteritemstatechange",ve.BEFOREITEMREFRESH="beforeitemrefresh",ve.AFTERITEMREFRESH="afteritemrefresh",ve.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",ve.AFTERITEMSTATESCLEAR="afteritemstatesclear",ve.BEFOREMODECHANGE="beforemodechange",ve.AFTERMODECHANGE="aftermodechange",ve.BEFORELAYOUT="beforelayout",ve.AFTERLAYOUT="afterlayout",ve.BEFORECREATEEDGE="beforecreateedge",ve.AFTERCREATEEDGE="aftercreateedge",ve.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",ve.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",ve.BEFOREGRAPHREFRESH="beforegraphrefresh",ve.AFTERGRAPHREFRESH="aftergraphrefresh",ve.BEFOREANIMATE="beforeanimate",ve.AFTERANIMATE="afteranimate",ve.BEFOREPAINT="beforepaint",ve.AFTERPAINT="afterpaint",ve.BEFORECOLLAPSEEXPANDCOMBO="beforecollapseexpandcombo",ve.AFTERCOLLAPSEEXPANDCOMBO="aftercollapseexpandcombo",ve.GRAPHSTATECHANGE="graphstatechange",ve.AFTERACTIVATERELATIONS="afteractivaterelations",ve.NODESELECTCHANGE="nodeselectchange",ve.TOOLTIPCHANGE="tooltipchange",ve.WHEELZOOM="wheelzoom",ve.VIEWPORTCHANGE="viewportchange",ve.DRAGNODEEND="dragnodeend",ve.STACKCHANGE="stackchange"})(Gr||(Gr={}));var Gi=Kr.registerNode,ca=Kr.registerEdge,ha=Kr.registerCombo,na=m.registerBehavior,Zi=yt;Kr.registerNode,Kr.registerEdge,Kr.registerCombo,m.registerBehavior},function(i,y){i.exports=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),function(n){n.TextureCompressionBC="texture-compression-bc"}(y.ExtensionName||(y.ExtensionName={})),function(n){n.ClampToEdge="clamp-to-edge",n.Repeat="repeat",n.MirrorRepeat="mirror-repeat"}(y.AddressMode||(y.AddressMode={})),function(n){n.UniformBuffer="uniform-buffer",n.StorageBuffer="storage-buffer",n.ReadonlyStorageBuffer="readonly-storage-buffer",n.Sampler="sampler",n.ComparisonSampler="comparison-sampler",n.SampledTexture="sampled-texture",n.ReadonlyStorageTexture="readonly-storage-texture",n.WriteonlyStorageTexture="writeonly-storage-texture"}(y.BindingType||(y.BindingType={})),function(n){n.Zero="zero",n.One="one",n.SrcColor="src-color",n.OneMinusSrcColor="one-minus-src-color",n.SrcAlpha="src-alpha",n.OneMinusSrcAlpha="one-minus-src-alpha",n.DstColor="dst-color",n.OneMinusDstColor="one-minus-dst-color",n.DstAlpha="dst-alpha",n.OneMinusDstAlpha="one-minus-dst-alpha",n.SrcAlphaSaturated="src-alpha-saturated",n.BlendColor="blend-color",n.OneMinusBlendColor="one-minus-blend-color"}(y.BlendFactor||(y.BlendFactor={})),function(n){n.Add="add",n.Subtract="subtract",n.ReverseSubtract="reverse-subtract",n.Min="min",n.Max="max"}(y.BlendOperation||(y.BlendOperation={})),function(n){n.Never="never",n.Less="less",n.Equal="equal",n.LessEqual="less-equal",n.Greater="greater",n.NotEqual="not-equal",n.GreaterEqual="greater-equal",n.Always="always"}(y.CompareFunction||(y.CompareFunction={})),function(n){n.None="none",n.Front="front",n.Back="back"}(y.CullMode||(y.CullMode={})),function(n){n.Nearest="nearest",n.Linear="linear"}(y.FilterMode||(y.FilterMode={})),function(n){n.CCW="ccw",n.CW="cw"}(y.FrontFace||(y.FrontFace={})),function(n){n.Uint16="uint16",n.Uint32="uint32"}(y.IndexFormat||(y.IndexFormat={})),function(n){n.Vertex="vertex",n.Instance="instance"}(y.InputStepMode||(y.InputStepMode={})),function(n){n.Load="load"}(y.LoadOp||(y.LoadOp={})),function(n){n.PointList="point-list",n.LineList="line-list",n.LineStrip="line-strip",n.TriangleList="triangle-list",n.TriangleStrip="triangle-strip"}(y.PrimitiveTopology||(y.PrimitiveTopology={})),function(n){n.Keep="keep",n.Zero="zero",n.Replace="replace",n.Invert="invert",n.IncrementClamp="increment-clamp",n.DecrementClamp="decrement-clamp",n.IncrementWrap="increment-wrap",n.DecrementWrap="decrement-wrap"}(y.StencilOperation||(y.StencilOperation={})),function(n){n.Store="store",n.Clear="clear"}(y.StoreOp||(y.StoreOp={})),function(n){n.E1d="1d",n.E2d="2d",n.E3d="3d"}(y.TextureDimension||(y.TextureDimension={})),function(n){n.R8Unorm="r8unorm",n.R8Snorm="r8snorm",n.R8Uint="r8uint",n.R8Sint="r8sint",n.R16Uint="r16uint",n.R16Sint="r16sint",n.R16Float="r16float",n.RG8Unorm="rg8unorm",n.RG8Snorm="rg8snorm",n.RG8Uint="rg8uint",n.RG8Sint="rg8sint",n.R32Uint="r32uint",n.R32Sint="r32sint",n.R32Float="r32float",n.RG16Uint="rg16uint",n.RG16Sint="rg16sint",n.RG16Float="rg16float",n.RGBA8Unorm="rgba8unorm",n.RGBA8UnormSRGB="rgba8unorm-srgb",n.RGBA8Snorm="rgba8snorm",n.RGBA8Uint="rgba8uint",n.RGBA8Sint="rgba8sint",n.BGRA8Unorm="bgra8unorm",n.BGRA8UnormSRGB="bgra8unorm-srgb",n.RGB10A2Unorm="rgb10a2unorm",n.RG11B10Float="rg11b10float",n.RG32Uint="rg32uint",n.RG32Sint="rg32sint",n.RG32Float="rg32float",n.RGBA16Uint="rgba16uint",n.RGBA16Sint="rgba16sint",n.RGBA16Float="rgba16float",n.RGBA32Uint="rgba32uint",n.RGBA32Sint="rgba32sint",n.RGBA32Float="rgba32float",n.Depth32Float="depth32float",n.Depth24Plus="depth24plus",n.Depth24PlusStencil8="depth24plus-stencil8"}(y.TextureFormat||(y.TextureFormat={})),function(n){n.Float="float",n.Sint="sint",n.Uint="uint"}(y.TextureComponentType||(y.TextureComponentType={})),function(n){n.E1d="1d",n.E2d="2d",n.E2dArray="2d-array",n.Cube="cube",n.CubeArray="cube-array",n.E3d="3d"}(y.TextureViewDimension||(y.TextureViewDimension={})),function(n){n.Uchar2="uchar2",n.Uchar4="uchar4",n.Char2="char2",n.Char4="char4",n.Uchar2Norm="uchar2norm",n.Uchar4Norm="uchar4norm",n.Char2Norm="char2norm",n.Char4Norm="char4norm",n.Ushort2="ushort2",n.Ushort4="ushort4",n.Short2="short2",n.Short4="short4",n.Ushort2Norm="ushort2norm",n.Ushort4Norm="ushort4norm",n.Short2Norm="short2norm",n.Short4Norm="short4norm",n.Half2="half2",n.Half4="half4",n.Float="float",n.Float2="float2",n.Float3="float3",n.Float4="float4",n.Uint="uint",n.Uint2="uint2",n.Uint3="uint3",n.Uint4="uint4",n.Int="int",n.Int2="int2",n.Int3="int3",n.Int4="int4"}(y.VertexFormat||(y.VertexFormat={})),function(n){n.All="all",n.StencilOnly="stencil-only",n.DepthOnly="depth-only"}(y.TextureAspect||(y.TextureAspect={})),function(n){n.Error="error",n.Warning="warning",n.Info="info"}(y.CompilationMessageType||(y.CompilationMessageType={})),function(n){n.Occlusion="occlusion"}(y.QueryType||(y.QueryType={})),function(n){n[n.MapRead=1]="MapRead",n[n.MapWrite=2]="MapWrite",n[n.CopySrc=4]="CopySrc",n[n.CopyDst=8]="CopyDst",n[n.Index=16]="Index",n[n.Vertex=32]="Vertex",n[n.Uniform=64]="Uniform",n[n.Storage=128]="Storage",n[n.Indirect=256]="Indirect",n[n.QueryResolve=512]="QueryResolve"}(y.BufferUsage||(y.BufferUsage={})),function(n){n[n.Red=1]="Red",n[n.Green=2]="Green",n[n.Blue=4]="Blue",n[n.Alpha=8]="Alpha",n[n.All=15]="All"}(y.ColorWrite||(y.ColorWrite={})),function(n){n[n.Vertex=1]="Vertex",n[n.Fragment=2]="Fragment",n[n.Compute=4]="Compute"}(y.ShaderStage||(y.ShaderStage={})),function(n){n[n.CopySrc=1]="CopySrc",n[n.CopyDst=2]="CopyDst",n[n.Sampled=4]="Sampled",n[n.Storage=8]="Storage",n[n.OutputAttachment=16]="OutputAttachment"}(y.TextureUsage||(y.TextureUsage={})),function(n){n[n.Read=1]="Read",n[n.Write=2]="Write"}(y.MapMode||(y.MapMode={}))},function(i,y){function t(n,u){for(var p=0;p<u.length;p++){var b=u[p];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(n,b.key,b)}}i.exports=function(n,u,p){return u&&t(n.prototype,u),p&&t(n,p),n}},function(i,y,t){i.exports=t(442)},function(i,y,t){"use strict";t.d(y,"b",function(){return u.a}),t.d(y,"c",function(){return u.d}),t.d(y,"d",function(){return u.e}),t.d(y,"a",function(){return n});var n={};t.r(n),t.d(n,"leftTranslate",function(){return p}),t.d(n,"leftRotate",function(){return b}),t.d(n,"leftScale",function(){return c}),t.d(n,"transform",function(){return S}),t.d(n,"direction",function(){return I}),t.d(n,"angleTo",function(){return m}),t.d(n,"vertical",function(){return r});var u=t(2);function p(s,d,C){var E=[0,0,0,0,0,0,0,0,0];return u.a.fromTranslation(E,C),u.a.multiply(s,E,d)}function b(s,d,C){var E=[0,0,0,0,0,0,0,0,0];return u.a.fromRotation(E,C),u.a.multiply(s,E,d)}function c(s,d,C){var E=[0,0,0,0,0,0,0,0,0];return u.a.fromScaling(E,C),u.a.multiply(s,E,d)}function S(s,d){for(var C,E,A,f=s?[].concat(s):[1,0,0,0,1,0,0,0,1],x=0,j=d.length;x<j;x++){var P=d[x];switch(P[0]){case"t":p(f,f,[P[1],P[2]]);break;case"s":c(f,f,[P[1],P[2]]);break;case"r":b(f,f,P[1]);break;case"m":C=f,E=f,A=P[1],u.a.multiply(C,A,E)}}return f}function I(s,d){return s[0]*d[1]-d[0]*s[1]}function m(s,d,C){var E=u.d.angle(s,d),A=I(s,d)>=0;return C?A?2*Math.PI-E:E:A?E:2*Math.PI-E}function r(s,d,C){return C?(s[0]=d[1],s[1]=-1*d[0]):(s[0]=-1*d[1],s[1]=d[0]),s}},function(i,y,t){"use strict";t.d(y,"b",function(){return n}),t.d(y,"a",function(){return u}),t.d(y,"c",function(){return p});var n=1e-6,u=typeof Float32Array!="undefined"?Float32Array:Array,p=Math.random;Math.hypot||(Math.hypot=function(){for(var b=0,c=arguments.length;c--;)b+=arguments[c]*arguments[c];return Math.sqrt(b)})},function(i,y){i.exports=function(t,n,u,p){u&&Object.defineProperty(t,n,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(p):void 0})}},function(i,y){i.exports=function(t,n,u,p,b){var c={};return Object.keys(p).forEach(function(S){c[S]=p[S]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=u.slice().reverse().reduce(function(S,I){return I(t,n,S)||S},c),b&&c.initializer!==void 0&&(c.value=c.initializer?c.initializer.call(b):void 0,c.initializer=void 0),c.initializer===void 0&&(Object.defineProperty(t,n,c),c=null),c}},function(i,y,t){"use strict";function n(m,r,s){if(m){if(typeof m.addEventListener=="function")return m.addEventListener(r,s,!1),{remove:function(){m.removeEventListener(r,s,!1)}};if(typeof m.attachEvent=="function")return m.attachEvent("on"+r,s),{remove:function(){m.detachEvent("on"+r,s)}}}}var u,p,b,c;function S(m){u||(u=document.createElement("table"),p=document.createElement("tr"),b=/^\s*<(\w+|!)[^>]*>/,c={tr:document.createElement("tbody"),tbody:u,thead:u,tfoot:u,td:p,th:p,"*":document.createElement("div")});var r=b.test(m)&&RegExp.$1;r&&r in c||(r="*");var s=c[r];m=m.replace(/(^\s*)|(\s*$)/g,""),s.innerHTML=""+m;var d=s.childNodes[0];return s.removeChild(d),d}function I(m,r){if(m)for(var s in r)r.hasOwnProperty(s)&&(m.style[s]=r[s]);return m}t.d(y,"a",function(){return n}),t.d(y,"b",function(){return S}),t.d(y,"c",function(){return I})},function(i,y){function t(n,u,p,b,c,S,I){try{var m=n[S](I),r=m.value}catch(s){return void p(s)}m.done?u(r):Promise.resolve(r).then(b,c)}i.exports=function(n){return function(){var u=this,p=arguments;return new Promise(function(b,c){var S=n.apply(u,p);function I(r){t(S,b,c,I,m,"next",r)}function m(r){t(S,b,c,I,m,"throw",r)}I(void 0)})}}},function(i,y,t){"use strict";t.d(y,"a",function(){return n}),t.d(y,"b",function(){return u});var n={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},u={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"}},function(i,y,t){"use strict";t.d(y,"d",function(){return u}),t.d(y,"b",function(){return p}),t.d(y,"e",function(){return b}),t.d(y,"f",function(){return c}),t.d(y,"l",function(){return S}),t.d(y,"j",function(){return I});var n=t(0);function u(){return window?window.devicePixelRatio:1}function p(m,r,s,d){var C=m-s,E=r-d;return Math.sqrt(C*C+E*E)}function b(m,r,s,d,C,E){return C>=m&&C<=m+s&&E>=r&&E<=r+d}function c(m,r){return!(r.minX>m.maxX||r.maxX<m.minX||r.minY>m.maxY||r.maxY<m.minY)}function S(m,r){return m&&r?{minX:Math.min(m.minX,r.minX),minY:Math.min(m.minY,r.minY),maxX:Math.max(m.maxX,r.maxX),maxY:Math.max(m.maxY,r.maxY)}:m||r}function I(m,r){return m[0]===r[0]&&m[1]===r[1]}t.d(y,"i",function(){return n.s}),t.d(y,"k",function(){return n.x}),t.d(y,"h",function(){return n.r}),t.d(y,"g",function(){return n.m}),t.d(y,"c",function(){return n.f}),t.d(y,"o",function(){return n.G}),t.d(y,"m",function(){return n.B}),t.d(y,"n",function(){return n.D}),t.d(y,"a",function(){return n.b})},function(i,y,t){"use strict";var n=t(51);t.d(y,"PathUtil",function(){return n});var u=t(156);t.o(u,"ICanvas")&&t.d(y,"ICanvas",function(){return u.ICanvas}),t.o(u,"IGroup")&&t.d(y,"IGroup",function(){return u.IGroup}),t.o(u,"IShape")&&t.d(y,"IShape",function(){return u.IShape});var p=t(157);t.o(p,"ICanvas")&&t.d(y,"ICanvas",function(){return p.ICanvas}),t.o(p,"IGroup")&&t.d(y,"IGroup",function(){return p.IGroup}),t.o(p,"IShape")&&t.d(y,"IShape",function(){return p.IShape});var b=t(114);t.d(y,"Event",function(){return b.a}),t(115);var c=t(247);t.d(y,"AbstractCanvas",function(){return c.a});var S=t(159);t.d(y,"AbstractGroup",function(){return S.a});var I=t(160);t.d(y,"AbstractShape",function(){return I.a});var m=t(248);t.d(y,"getBBoxMethod",function(){return m.a});var r=t(68);t.d(y,"getTextHeight",function(){return r.b}),t.d(y,"assembleFont",function(){return r.a});var s=t(19);t.d(y,"isAllowCapture",function(){return s.b});var d=t(39);t.d(y,"multiplyVec2",function(){return d.c}),t.d(y,"invert",function(){return d.a});var C=t(116);t.d(y,"getOffScreenContext",function(){return C.a})},function(i,y,t){"use strict";t.d(y,"j",function(){return u}),t.d(y,"c",function(){return p}),t.d(y,"g",function(){return b}),t.d(y,"b",function(){return c});var n=t(0);function u(S,I){var m=S.indexOf(I);m!==-1&&S.splice(m,1)}t.d(y,"e",function(){return n.s}),t.d(y,"d",function(){return n.r}),t.d(y,"h",function(){return n.x}),t.d(y,"f",function(){return n.v}),t.d(y,"i",function(){return n.A}),t.d(y,"a",function(){return n.f}),t.d(y,"k",function(){return n.I});var p=typeof window!="undefined"&&window.document!==void 0;function b(S,I){if(S.isCanvas())return!0;for(var m=I.getParent(),r=!1;m;){if(m===S){r=!0;break}m=m.getParent()}return r}function c(S){return S.cfg.visible&&S.cfg.capture}},function(i,y,t){"use strict";t.d(y,"e",function(){return x}),t.d(y,"b",function(){return ft}),t.d(y,"a",function(){return Lt}),t.d(y,"c",function(){return s}),t.d(y,"d",function(){return wt}),t.d(y,"f",function(){return n});var n={};function u(J){return Math.min.apply(null,J)}function p(J){return Math.max.apply(null,J)}function b(J,ct,it,_){var R=J-it,Q=ct-_;return Math.sqrt(R*R+Q*Q)}function c(J,ct){return Math.abs(J-ct)<.001}function S(J,ct){var it=u(J),_=u(ct);return{x:it,y:_,width:p(J)-it,height:p(ct)-_}}function I(J,ct,it,_){return{minX:u([J,it]),maxX:p([J,it]),minY:u([ct,_]),maxY:p([ct,_])}}function m(J){return(J+2*Math.PI)%(2*Math.PI)}t.r(n),t.d(n,"distance",function(){return b}),t.d(n,"isNumberEqual",function(){return c}),t.d(n,"getBBoxByArray",function(){return S}),t.d(n,"getBBoxRange",function(){return I}),t.d(n,"piMod",function(){return m});var r=t(80),s={box:function(ct,it,_,R){return S([ct,_],[it,R])},length:function(ct,it,_,R){return b(ct,it,_,R)},pointAt:function(ct,it,_,R,Q){return{x:(1-Q)*ct+Q*_,y:(1-Q)*it+Q*R}},pointDistance:function(ct,it,_,R,Q,k){var g=(_-ct)*(Q-ct)+(R-it)*(k-it);return g<0?b(ct,it,Q,k):g>(_-ct)*(_-ct)+(R-it)*(R-it)?b(_,R,Q,k):this.pointToLine(ct,it,_,R,Q,k)},pointToLine:function(ct,it,_,R,Q,k){var g=[_-ct,R-it];if(r.exactEquals(g,[0,0]))return Math.sqrt((Q-ct)*(Q-ct)+(k-it)*(k-it));var O=[-g[1],g[0]];r.normalize(O,O);var F=[Q-ct,k-it];return Math.abs(r.dot(F,O))},tangentAngle:function(ct,it,_,R){return Math.atan2(R-it,_-ct)}};function d(J,ct,it,_,R,Q){var k,g=1/0,O=[it,_],F=20;Q&&Q>200&&(F=Q/10);for(var V=1/F,rt=V/10,ot=0;ot<=F;ot++){var st=ot*V,Mt=[R.apply(null,J.concat([st])),R.apply(null,ct.concat([st]))];(jt=b(O[0],O[1],Mt[0],Mt[1]))<g&&(k=st,g=jt)}if(k===0)return{x:J[0],y:ct[0]};if(k===1){var yt=J.length;return{x:J[yt-1],y:ct[yt-1]}}for(g=1/0,ot=0;ot<32&&!(rt<1e-4);ot++){var xt=k-rt,Ot=k+rt,jt=(Mt=[R.apply(null,J.concat([xt])),R.apply(null,ct.concat([xt]))],b(O[0],O[1],Mt[0],Mt[1]));if(xt>=0&&jt<g)k=xt,g=jt;else{var Dt=[R.apply(null,J.concat([Ot])),R.apply(null,ct.concat([Ot]))],zt=b(O[0],O[1],Dt[0],Dt[1]);Ot<=1&&zt<g?(k=Ot,g=zt):rt*=.5}}return{x:R.apply(null,J.concat([k])),y:R.apply(null,ct.concat([k]))}}function C(J,ct,it,_){var R=1-_;return R*R*J+2*_*R*ct+_*_*it}function E(J,ct,it){var _=J+it-2*ct;if(c(_,0))return[.5];var R=(J-ct)/_;return R<=1&&R>=0?[R]:[]}function A(J,ct,it,_){return 2*(1-_)*(ct-J)+2*_*(it-ct)}function f(J,ct,it,_,R,Q,k){var g=C(J,it,R,k),O=C(ct,_,Q,k),F=s.pointAt(J,ct,it,_,k),V=s.pointAt(it,_,R,Q,k);return[[J,ct,F.x,F.y,g,O],[g,O,V.x,V.y,R,Q]]}var x={box:function(ct,it,_,R,Q,k){var g=E(ct,_,Q)[0],O=E(it,R,k)[0],F=[ct,Q],V=[it,k];return g!==void 0&&F.push(C(ct,_,Q,g)),O!==void 0&&V.push(C(it,R,k,O)),S(F,V)},length:function(ct,it,_,R,Q,k){return function g(O,F,V,rt,ot,st,Mt){if(Mt===0)return(b(O,F,V,rt)+b(V,rt,ot,st)+b(O,F,ot,st))/2;var yt=f(O,F,V,rt,ot,st,.5),xt=yt[0],Ot=yt[1];return xt.push(Mt-1),Ot.push(Mt-1),g.apply(null,xt)+g.apply(null,Ot)}(ct,it,_,R,Q,k,3)},nearestPoint:function(ct,it,_,R,Q,k,g,O){return d([ct,_,Q],[it,R,k],g,O,C)},pointDistance:function(ct,it,_,R,Q,k,g,O){var F=this.nearestPoint(ct,it,_,R,Q,k,g,O);return b(F.x,F.y,g,O)},interpolationAt:C,pointAt:function(ct,it,_,R,Q,k,g){return{x:C(ct,_,Q,g),y:C(it,R,k,g)}},divide:function(ct,it,_,R,Q,k,g){return f(ct,it,_,R,Q,k,g)},tangentAngle:function(ct,it,_,R,Q,k,g){var O=A(ct,_,Q,g),F=A(it,R,k,g);return m(Math.atan2(F,O))}};function j(J,ct,it,_,R){var Q=1-R;return Q*Q*Q*J+3*ct*R*Q*Q+3*it*R*R*Q+_*R*R*R}function P(J,ct,it,_,R){var Q=1-R;return 3*(Q*Q*(ct-J)+2*Q*R*(it-ct)+R*R*(_-it))}function W(J,ct,it,_){var R,Q,k,g=-3*J+9*ct-9*it+3*_,O=6*J-12*ct+6*it,F=3*ct-3*J,V=[];if(c(g,0))c(O,0)||(R=-F/O)>=0&&R<=1&&V.push(R);else{var rt=O*O-4*g*F;c(rt,0)?V.push(-O/(2*g)):rt>0&&(Q=(-O-(k=Math.sqrt(rt)))/(2*g),(R=(-O+k)/(2*g))>=0&&R<=1&&V.push(R),Q>=0&&Q<=1&&V.push(Q))}return V}function X(J,ct,it,_,R,Q,k,g,O){var F=j(J,it,R,k,O),V=j(ct,_,Q,g,O),rt=s.pointAt(J,ct,it,_,O),ot=s.pointAt(it,_,R,Q,O),st=s.pointAt(R,Q,k,g,O),Mt=s.pointAt(rt.x,rt.y,ot.x,ot.y,O),yt=s.pointAt(ot.x,ot.y,st.x,st.y,O);return[[J,ct,rt.x,rt.y,Mt.x,Mt.y,F,V],[F,V,yt.x,yt.y,st.x,st.y,k,g]]}function $(J,ct,it,_,R,Q,k,g,O){if(O===0)return function(ot,st){for(var Mt=0,yt=ot.length,xt=0;xt<yt;xt++)Mt+=b(ot[xt],st[xt],ot[(xt+1)%yt],st[(xt+1)%yt]);return Mt/2}([J,it,R,k],[ct,_,Q,g]);var F=X(J,ct,it,_,R,Q,k,g,.5),V=F[0],rt=F[1];return V.push(O-1),rt.push(O-1),$.apply(null,V)+$.apply(null,rt)}var ft={extrema:W,box:function(ct,it,_,R,Q,k,g,O){for(var F=[ct,g],V=[it,O],rt=W(ct,_,Q,g),ot=W(it,R,k,O),st=0;st<rt.length;st++)F.push(j(ct,_,Q,g,rt[st]));for(st=0;st<ot.length;st++)V.push(j(it,R,k,O,ot[st]));return S(F,V)},length:function(ct,it,_,R,Q,k,g,O){return $(ct,it,_,R,Q,k,g,O,3)},nearestPoint:function(ct,it,_,R,Q,k,g,O,F,V,rt){return d([ct,_,Q,g],[it,R,k,O],F,V,j,rt)},pointDistance:function(ct,it,_,R,Q,k,g,O,F,V,rt){var ot=this.nearestPoint(ct,it,_,R,Q,k,g,O,F,V,rt);return b(ot.x,ot.y,F,V)},interpolationAt:j,pointAt:function(ct,it,_,R,Q,k,g,O,F){return{x:j(ct,_,Q,g,F),y:j(it,R,k,O,F)}},divide:function(ct,it,_,R,Q,k,g,O,F){return X(ct,it,_,R,Q,k,g,O,F)},tangentAngle:function(ct,it,_,R,Q,k,g,O,F){var V=P(ct,_,Q,g,F),rt=P(it,R,k,O,F);return m(Math.atan2(rt,V))}};function Z(J,ct){var it=Math.abs(J);return ct>0?it:-1*it}var lt=function(ct,it,_,R,Q,k){var g=_,O=R;if(g===0||O===0)return{x:ct,y:it};for(var F,V,rt=Q-ct,ot=k-it,st=Math.abs(rt),Mt=Math.abs(ot),yt=g*g,xt=O*O,Ot=Math.PI/4,jt=0;jt<4;jt++){F=g*Math.cos(Ot),V=O*Math.sin(Ot);var Dt=(yt-xt)*Math.pow(Math.cos(Ot),3)/g,zt=(xt-yt)*Math.pow(Math.sin(Ot),3)/O,Tt=F-Dt,Wt=V-zt,Ht=st-Dt,re=Mt-zt,pe=Math.hypot(Wt,Tt),me=Math.hypot(re,Ht);Ot+=pe*Math.asin((Tt*re-Wt*Ht)/(pe*me))/Math.sqrt(yt+xt-F*F-V*V),Ot=Math.min(Math.PI/2,Math.max(0,Ot))}return{x:ct+Z(F,rt),y:it+Z(V,ot)}};function pt(J,ct,it,_,R,Q){return it*Math.cos(R)*Math.cos(Q)-_*Math.sin(R)*Math.sin(Q)+J}function gt(J,ct,it,_,R,Q){return it*Math.sin(R)*Math.cos(Q)+_*Math.cos(R)*Math.sin(Q)+ct}function ut(J,ct,it){return{x:J*Math.cos(it),y:ct*Math.sin(it)}}function Bt(J,ct,it){var _=Math.cos(it),R=Math.sin(it);return[J*_-ct*R,J*R+ct*_]}var Lt={box:function(ct,it,_,R,Q,k,g){for(var O=function(Tt,Wt,Ht){return Math.atan(-Wt/Tt*Math.tan(Ht))}(_,R,Q),F=1/0,V=-1/0,rt=[k,g],ot=2*-Math.PI;ot<=2*Math.PI;ot+=Math.PI){var st=O+ot;k<g?k<st&&st<g&&rt.push(st):g<st&&st<k&&rt.push(st)}for(ot=0;ot<rt.length;ot++){var Mt=pt(ct,0,_,R,Q,rt[ot]);Mt<F&&(F=Mt),Mt>V&&(V=Mt)}var yt=function(Tt,Wt,Ht){return Math.atan(Wt/(Tt*Math.tan(Ht)))}(_,R,Q),xt=1/0,Ot=-1/0,jt=[k,g];for(ot=2*-Math.PI;ot<=2*Math.PI;ot+=Math.PI){var Dt=yt+ot;k<g?k<Dt&&Dt<g&&jt.push(Dt):g<Dt&&Dt<k&&jt.push(Dt)}for(ot=0;ot<jt.length;ot++){var zt=gt(0,it,_,R,Q,jt[ot]);zt<xt&&(xt=zt),zt>Ot&&(Ot=zt)}return{x:F,y:xt,width:V-F,height:Ot-xt}},length:function(ct,it,_,R,Q,k,g){},nearestPoint:function(ct,it,_,R,Q,k,g,O,F){var V=Bt(O-ct,F-it,-Q),rt=V[0],ot=V[1],st=lt(0,0,_,R,rt,ot),Mt=function(xt,Ot,jt,Dt){return(Math.atan2(Dt*xt,jt*Ot)+2*Math.PI)%(2*Math.PI)}(_,R,st.x,st.y);Mt<k?st=ut(_,R,k):Mt>g&&(st=ut(_,R,g));var yt=Bt(st.x,st.y,Q);return{x:yt[0]+ct,y:yt[1]+it}},pointDistance:function(ct,it,_,R,Q,k,g,O,F){var V=this.nearestPoint(ct,it,_,R,O,F);return b(V.x,V.y,O,F)},pointAt:function(ct,it,_,R,Q,k,g,O){var F=(g-k)*O+k;return{x:pt(ct,0,_,R,Q,F),y:gt(0,it,_,R,Q,F)}},tangentAngle:function(ct,it,_,R,Q,k,g,O){var F=(g-k)*O+k,V=function(ot,st,Mt,yt,xt,Ot,jt,Dt){return-1*Mt*Math.cos(xt)*Math.sin(Dt)-yt*Math.sin(xt)*Math.cos(Dt)}(0,0,_,R,Q,0,0,F),rt=function(ot,st,Mt,yt,xt,Ot,jt,Dt){return-1*Mt*Math.sin(xt)*Math.sin(Dt)+yt*Math.cos(xt)*Math.cos(Dt)}(0,0,_,R,Q,0,0,F);return m(Math.atan2(rt,V))}};function St(J){for(var ct=0,it=[],_=0;_<J.length-1;_++){var R=J[_],Q=J[_+1],k=b(R[0],R[1],Q[0],Q[1]),g={from:R,to:Q,length:k};it.push(g),ct+=k}return{segments:it,totalLength:ct}}function K(J){if(J.length<2)return 0;for(var ct=0,it=0;it<J.length-1;it++){var _=J[it],R=J[it+1];ct+=b(_[0],_[1],R[0],R[1])}return ct}function dt(J,ct){if(ct>1||ct<0||J.length<2)return null;var it=St(J),_=it.segments,R=it.totalLength;if(R===0)return{x:J[0][0],y:J[0][1]};for(var Q=0,k=null,g=0;g<_.length;g++){var O=_[g],F=O.from,V=O.to,rt=O.length/R;if(ct>=Q&&ct<=Q+rt){var ot=(ct-Q)/rt;k=s.pointAt(F[0],F[1],V[0],V[1],ot);break}Q+=rt}return k}function mt(J,ct){if(ct>1||ct<0||J.length<2)return 0;for(var it=St(J),_=it.segments,R=it.totalLength,Q=0,k=0,g=0;g<_.length;g++){var O=_[g],F=O.from,V=O.to,rt=O.length/R;if(ct>=Q&&ct<=Q+rt){k=Math.atan2(V[1]-F[1],V[0]-F[0]);break}Q+=rt}return k}function bt(J,ct,it){for(var _=1/0,R=0;R<J.length-1;R++){var Q=J[R],k=J[R+1],g=s.pointDistance(Q[0],Q[1],k[0],k[1],ct,it);g<_&&(_=g)}return _}var wt={box:function(ct){for(var it=[],_=[],R=0;R<ct.length;R++){var Q=ct[R];it.push(Q[0]),_.push(Q[1])}return S(it,_)},length:function(ct){return K(ct)},pointAt:function(ct,it){return dt(ct,it)},pointDistance:function(ct,it,_){return bt(ct,it,_)},tangentAngle:function(ct,it){return mt(ct,it)}}},function(i,y){function t(n){return i.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},t(n)}i.exports=t},function(i,y,t){"use strict";t.d(y,"b",function(){return p}),t.d(y,"a",function(){return b}),t.d(y,"d",function(){return c}),t.d(y,"c",function(){return S});var n=t(0),u=t(16);function p(I){return document.createElementNS("http://www.w3.org/2000/svg",I)}function b(I){var m=u.a[I.type],r=I.getParent();if(!m)throw new Error("the type "+I.type+" is not supported by svg");var s=p(m);if(I.get("id")&&(s.id=I.get("id")),I.set("el",s),I.set("attrs",{}),r){var d=r.get("el");d||(d=r.createDom(),r.set("el",d)),d.appendChild(s)}return s}function c(I,m){var r=I.get("el"),s=Object(n.F)(r.children).sort(m),d=document.createDocumentFragment();s.forEach(function(C){d.appendChild(C)}),r.appendChild(d)}function S(I,m){var r=I.parentNode,s=Array.from(r.childNodes).filter(function(A){return A.nodeType===1&&A.nodeName.toLowerCase()!=="defs"}),d=s[m],C=s.indexOf(I);if(d){if(C>m)r.insertBefore(I,d);else if(C<m){var E=s[m+1];E?r.insertBefore(I,E):r.appendChild(I)}}else r.appendChild(I)}},function(i,y,t){var n=t(474),u=t(475),p=t(218),b=t(476);i.exports=function(c){return n(c)||u(c)||p(c)||b()}},function(i,y,t){var n;try{n={cloneDeep:t(383),constant:t(134),defaults:t(384),each:t(181),filter:t(184),find:t(385),flatten:t(212),forEach:t(182),forIn:t(390),has:t(195),isUndefined:t(196),last:t(391),map:t(197),mapValues:t(392),max:t(393),merge:t(395),min:t(400),minBy:t(401),now:t(402),pick:t(403),range:t(408),reduce:t(199),sortBy:t(411),uniqueId:t(416),values:t(205),zipObject:t(417)}}catch(u){}n||(n=window._),i.exports=n},function(i,y){i.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(i,y){var t=Array.isArray;i.exports=t},function(i,y,t){var n=t(472);i.exports=function(u,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),p&&n(u,p)}},function(i,y,t){var n=t(90),u=t(25);i.exports=function(p,b){return!b||n(b)!=="object"&&typeof b!="function"?u(p):b}},function(i,y,t){"use strict";t.d(y,"a",function(){return I}),t.d(y,"d",function(){return m}),t.d(y,"b",function(){return r}),t.d(y,"c",function(){return s}),t.d(y,"e",function(){return E}),t.d(y,"h",function(){return A}),t.d(y,"f",function(){return f}),t.d(y,"g",function(){return x});var n=t(0),u=t(120),p=t(89),b=t(17),c=t(34),S={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function I(j,P){var W=P.attr();for(var X in W){var $=W[X],ft=S[X]?S[X]:X;ft==="matrix"&&$?j.transform($[0],$[1],$[3],$[4],$[6],$[7]):ft==="lineDash"&&j.setLineDash?Object(n.m)($)&&j.setLineDash($):(ft==="strokeStyle"||ft==="fillStyle"?$=Object(u.b)(j,P,$):ft==="globalAlpha"&&($*=j.globalAlpha),j[ft]=$)}}function m(j,P,W){for(var X=0;X<P.length;X++){var $=P[X];$.cfg.visible?$.draw(j,W):$.skipDraw()}}function r(j,P,W){var X=j.get("refreshElements");Object(n.f)(X,function($){if($!==j)for(var ft=$.cfg.parent;ft&&ft!==j&&!ft.cfg.refresh;)ft.cfg.refresh=!0,ft=ft.cfg.parent}),X[0]===j?d(P,W):function $(ft,Z){for(var lt=0;lt<ft.length;lt++){var pt=ft[lt];if(pt.cfg.visible)if(pt.cfg.hasChanged)pt.cfg.refresh=!0,pt.isGroup()&&d(pt.cfg.children,Z);else if(pt.cfg.refresh)pt.isGroup()&&$(pt.cfg.children,Z);else{var gt=C(pt,Z);pt.cfg.refresh=gt,gt&&pt.isGroup()&&$(pt.cfg.children,Z)}}}(P,W)}function s(j){for(var P=0;P<j.length;P++){var W=j[P];W.cfg.hasChanged=!1,W.isGroup()&&!W.destroyed&&s(W.cfg.children)}}function d(j,P){for(var W=0;W<j.length;W++){var X=j[W];X.cfg.refresh=!0,X.isGroup()&&d(X.get("children"),P)}}function C(j,P){var W=j.cfg.cacheCanvasBBox;return j.cfg.isInView&&W&&Object(b.f)(W,P)}function E(j,P,W,X){var $=W.path,ft=W.startArrow,Z=W.endArrow;if($){var lt=[0,0],pt=[0,0],gt={dx:0,dy:0};P.beginPath();for(var ut=0;ut<$.length;ut++){var Bt=$[ut],Lt=Bt[0];if(ut===0&&ft&&ft.d){var St=j.getStartTangent();gt=c.c(St[0][0],St[0][1],St[1][0],St[1][1],ft.d)}else ut===$.length-2&&$[ut+1][0]==="Z"&&Z&&Z.d?$[ut+1][0]==="Z"&&(St=j.getEndTangent(),gt=c.c(St[0][0],St[0][1],St[1][0],St[1][1],Z.d)):ut===$.length-1&&Z&&Z.d&&$[0]!=="Z"&&(St=j.getEndTangent(),gt=c.c(St[0][0],St[0][1],St[1][0],St[1][1],Z.d));var K=gt.dx,dt=gt.dy;switch(Lt){case"M":P.moveTo(Bt[1]-K,Bt[2]-dt),pt=[Bt[1],Bt[2]];break;case"L":P.lineTo(Bt[1]-K,Bt[2]-dt);break;case"Q":P.quadraticCurveTo(Bt[1],Bt[2],Bt[3]-K,Bt[4]-dt);break;case"C":P.bezierCurveTo(Bt[1],Bt[2],Bt[3],Bt[4],Bt[5]-K,Bt[6]-dt);break;case"A":var mt=void 0;X?(mt=X[ut])||(mt=Object(p.a)(lt,Bt),X[ut]=mt):mt=Object(p.a)(lt,Bt);var bt=mt.cx,wt=mt.cy,J=mt.rx,ct=mt.ry,it=mt.startAngle,_=mt.endAngle,R=mt.xRotation,Q=mt.sweepFlag;if(P.ellipse)P.ellipse(bt,wt,J,ct,R,it,_,1-Q);else{var k=J>ct?J:ct,g=J>ct?1:J/ct,O=J>ct?ct/J:1;P.translate(bt,wt),P.rotate(R),P.scale(g,O),P.arc(0,0,k,it,_,1-Q),P.scale(1/g,1/O),P.rotate(-R),P.translate(-bt,-wt)}break;case"Z":P.closePath()}if(Lt==="Z")lt=pt;else{var F=Bt.length;lt=[Bt[F-2],Bt[F-1]]}}}}function A(j,P){var W=j.get("canvas");W&&(P==="remove"&&(j._cacheCanvasBBox=j.get("cacheCanvasBBox")),j.get("hasChanged")||(j.set("hasChanged",!0),j.cfg.parent&&j.cfg.parent.get("hasChanged")||(W.refreshElement(j,P,W),W.get("autoDraw")&&W.draw())))}function f(j){if(!j.length)return null;var P=[],W=[],X=[],$=[];return Object(n.f)(j,function(ft){var Z=function(lt){var pt;if(lt.destroyed)pt=lt._cacheCanvasBBox;else{var gt=lt.get("cacheCanvasBBox"),ut=gt&&!(!gt.width||!gt.height),Bt=lt.getCanvasBBox(),Lt=Bt&&!(!Bt.width||!Bt.height);ut&&Lt?pt=Object(b.l)(gt,Bt):ut?pt=gt:Lt&&(pt=Bt)}return pt}(ft);Z&&(P.push(Z.minX),W.push(Z.minY),X.push(Z.maxX),$.push(Z.maxY))}),{minX:Math.min.apply(null,P),minY:Math.min.apply(null,W),maxX:Math.max.apply(null,X),maxY:Math.max.apply(null,$)}}function x(j,P){return j&&P&&Object(b.f)(j,P)?{minX:Math.max(j.minX,P.minX),minY:Math.max(j.minY,P.minY),maxX:Math.min(j.maxX,P.maxX),maxY:Math.min(j.maxY,P.maxY)}:null}},function(i,y){i.exports=function(t,n){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}},function(i,y,t){"use strict";t.d(y,"a",function(){return c}),t.d(y,"b",function(){return r}),t.d(y,"c",function(){return C}),t.d(y,"d",function(){return W});var n=t(0),u=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,p=/[^\s\,]+/gi,b=function($){var ft=$||[];return Object(n.m)(ft)?ft:Object(n.x)(ft)?(ft=ft.match(u),Object(n.f)(ft,function(Z,lt){if((Z=Z.match(p))[0].length>1){var pt=Z[0].charAt(0);Z.splice(1,0,Z[0].substr(1)),Z[0]=pt}Object(n.f)(Z,function(gt,ut){isNaN(gt)||(Z[ut]=+gt)}),ft[lt]=Z}),ft):void 0};function c(X,$){for(var ft=[],Z=0,lt=X.length;lt-2*!$>Z;Z+=2){var pt=[{x:+X[Z-2],y:+X[Z-1]},{x:+X[Z],y:+X[Z+1]},{x:+X[Z+2],y:+X[Z+3]},{x:+X[Z+4],y:+X[Z+5]}];$?Z?lt-4===Z?pt[3]={x:+X[0],y:+X[1]}:lt-2===Z&&(pt[2]={x:+X[0],y:+X[1]},pt[3]={x:+X[2],y:+X[3]}):pt[0]={x:+X[lt-2],y:+X[lt-1]}:lt-4===Z?pt[3]=pt[2]:Z||(pt[0]={x:+X[Z],y:+X[Z+1]}),ft.push(["C",(-pt[0].x+6*pt[1].x+pt[2].x)/6,(-pt[0].y+6*pt[1].y+pt[2].y)/6,(pt[1].x+6*pt[2].x-pt[3].x)/6,(pt[1].y+6*pt[2].y-pt[3].y)/6,pt[2].x,pt[2].y])}return ft}var S=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,I=new RegExp("([a-z])["+S+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+S+"]*,?["+S+"]*)+)","ig"),m=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+S+"]*,?["+S+"]*","ig");function r(X){if(!X)return null;if(Object(n.m)(X))return X;var $={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},ft=[];return String(X).replace(I,function(Z,lt,pt){var gt=[],ut=lt.toLowerCase();if(pt.replace(m,function(Bt,Lt){Lt&&gt.push(+Lt)}),ut==="m"&&gt.length>2&&(ft.push([lt].concat(gt.splice(0,2))),ut="l",lt=lt==="m"?"l":"L"),ut==="o"&&gt.length===1&&ft.push([lt,gt[0]]),ut==="r")ft.push([lt].concat(gt));else for(;gt.length>=$[ut]&&(ft.push([lt].concat(gt.splice(0,$[ut]))),$[ut]););return""}),ft}var s=/[a-z]/;function d(X,$){return[$[0]+($[0]-X[0]),$[1]+($[1]-X[1])]}function C(X){var $=r(X);if(!$||!$.length)return[["M",0,0]];for(var ft=!1,Z=0;Z<$.length;Z++){var lt=$[Z][0];if(s.test(lt)||["V","H","T","S"].indexOf(lt)>=0){ft=!0;break}}if(!ft)return $;var pt=[],gt=0,ut=0,Bt=0,Lt=0,St=0,K=$[0];K[0]!=="M"&&K[0]!=="m"||(Bt=gt=+K[1],Lt=ut=+K[2],St++,pt[0]=["M",gt,ut]),Z=St;for(var dt=$.length;Z<dt;Z++){var mt=$[Z],bt=pt[Z-1],wt=[],J=(lt=mt[0]).toUpperCase();if(lt!==J)switch(wt[0]=J,J){case"A":wt[1]=mt[1],wt[2]=mt[2],wt[3]=mt[3],wt[4]=mt[4],wt[5]=mt[5],wt[6]=+mt[6]+gt,wt[7]=+mt[7]+ut;break;case"V":wt[1]=+mt[1]+ut;break;case"H":wt[1]=+mt[1]+gt;break;case"M":Bt=+mt[1]+gt,Lt=+mt[2]+ut;break;default:for(var ct=1,it=mt.length;ct<it;ct++)wt[ct]=+mt[ct]+(ct%2?gt:ut)}else wt=$[Z];switch(J){case"Z":gt=+Bt,ut=+Lt;break;case"H":wt=["L",gt=wt[1],ut];break;case"V":wt=["L",gt,ut=wt[1]];break;case"T":gt=wt[1],ut=wt[2];var _=d([bt[1],bt[2]],[bt[3],bt[4]]);wt=["Q",_[0],_[1],gt,ut];break;case"S":gt=wt[wt.length-2],ut=wt[wt.length-1];var R=bt.length,Q=d([bt[R-4],bt[R-3]],[bt[R-2],bt[R-1]]);wt=["C",Q[0],Q[1],wt[1],wt[2],gt,ut];break;case"M":Bt=wt[wt.length-2],Lt=wt[wt.length-1];break;default:gt=wt[wt.length-2],ut=wt[wt.length-1]}pt.push(wt)}return pt}function E(X){return Math.sqrt(X[0]*X[0]+X[1]*X[1])}function A(X,$){return E(X)*E($)?(X[0]*$[0]+X[1]*$[1])/(E(X)*E($)):1}function f(X,$){return(X[0]*$[1]<X[1]*$[0]?-1:1)*Math.acos(A(X,$))}function x(X,$){return X[0]===$[0]&&X[1]===$[1]}function j(X,$){var ft=$[1],Z=$[2],lt=Object(n.B)(Object(n.G)($[3]),2*Math.PI),pt=$[4],gt=$[5],ut=X[0],Bt=X[1],Lt=$[6],St=$[7],K=Math.cos(lt)*(ut-Lt)/2+Math.sin(lt)*(Bt-St)/2,dt=-1*Math.sin(lt)*(ut-Lt)/2+Math.cos(lt)*(Bt-St)/2,mt=K*K/(ft*ft)+dt*dt/(Z*Z);mt>1&&(ft*=Math.sqrt(mt),Z*=Math.sqrt(mt));var bt=ft*ft*(dt*dt)+Z*Z*(K*K),wt=bt?Math.sqrt((ft*ft*(Z*Z)-bt)/bt):1;pt===gt&&(wt*=-1),isNaN(wt)&&(wt=0);var J=Z?wt*ft*dt/Z:0,ct=ft?wt*-Z*K/ft:0,it=(ut+Lt)/2+Math.cos(lt)*J-Math.sin(lt)*ct,_=(Bt+St)/2+Math.sin(lt)*J+Math.cos(lt)*ct,R=[(K-J)/ft,(dt-ct)/Z],Q=[(-1*K-J)/ft,(-1*dt-ct)/Z],k=f([1,0],R),g=f(R,Q);return A(R,Q)<=-1&&(g=Math.PI),A(R,Q)>=1&&(g=0),gt===0&&g>0&&(g-=2*Math.PI),gt===1&&g<0&&(g+=2*Math.PI),{cx:it,cy:_,rx:x(X,[Lt,St])?0:ft,ry:x(X,[Lt,St])?0:Z,startAngle:k,endAngle:k+g,xRotation:lt,arcFlag:pt,sweepFlag:gt}}function P(X,$){return[$[0]+($[0]-X[0]),$[1]+($[1]-X[1])]}function W(X){for(var $=[],ft=null,Z=null,lt=null,pt=0,gt=(X=b(X)).length,ut=0;ut<gt;ut++){var Bt=X[ut];Z=X[ut+1];var Lt=Bt[0],St={command:Lt,prePoint:ft,params:Bt,startTangent:null,endTangent:null};switch(Lt){case"M":lt=[Bt[1],Bt[2]],pt=ut;break;case"A":var K=j(ft,Bt);St.arcParams=K}if(Lt==="Z")ft=lt,Z=X[pt+1];else{var dt=Bt.length;ft=[Bt[dt-2],Bt[dt-1]]}Z&&Z[0]==="Z"&&(Z=X[pt],$[pt]&&($[pt].prePoint=ft)),St.currentPoint=ft,$[pt]&&x(ft,$[pt].currentPoint)&&($[pt].prePoint=St.prePoint);var mt=Z?[Z[Z.length-2],Z[Z.length-1]]:null;St.nextPoint=mt;var bt=St.prePoint;if(["L","H","V"].includes(Lt))St.startTangent=[bt[0]-ft[0],bt[1]-ft[1]],St.endTangent=[ft[0]-bt[0],ft[1]-bt[1]];else if(Lt==="Q"){var wt=[Bt[1],Bt[2]];St.startTangent=[bt[0]-wt[0],bt[1]-wt[1]],St.endTangent=[ft[0]-wt[0],ft[1]-wt[1]]}else if(Lt==="T")wt=P((it=$[ut-1]).currentPoint,bt),it.command==="Q"?(St.command="Q",St.startTangent=[bt[0]-wt[0],bt[1]-wt[1]],St.endTangent=[ft[0]-wt[0],ft[1]-wt[1]]):(St.command="TL",St.startTangent=[bt[0]-ft[0],bt[1]-ft[1]],St.endTangent=[ft[0]-bt[0],ft[1]-bt[1]]);else if(Lt==="C"){var J=[Bt[1],Bt[2]],ct=[Bt[3],Bt[4]];St.startTangent=[bt[0]-J[0],bt[1]-J[1]],St.endTangent=[ft[0]-ct[0],ft[1]-ct[1]]}else if(Lt==="S"){var it;J=P((it=$[ut-1]).currentPoint,bt),ct=[Bt[1],Bt[2]],it.command==="C"?(St.command="C",St.startTangent=[bt[0]-J[0],bt[1]-J[1]],St.endTangent=[ft[0]-ct[0],ft[1]-ct[1]]):(St.command="SQ",St.startTangent=[bt[0]-ct[0],bt[1]-ct[1]],St.endTangent=[ft[0]-ct[0],ft[1]-ct[1]])}else if(Lt==="A"){var _=.001,R=St.arcParams||{},Q=R.cx,k=Q===void 0?0:Q,g=R.cy,O=g===void 0?0:g,F=R.rx,V=F===void 0?0:F,rt=R.ry,ot=rt===void 0?0:rt,st=R.sweepFlag,Mt=st===void 0?0:st,yt=R.startAngle,xt=yt===void 0?0:yt,Ot=R.endAngle,jt=Ot===void 0?0:Ot;Mt===0&&(_*=-1);var Dt=V*Math.cos(xt-_)+k,zt=ot*Math.sin(xt-_)+O;St.startTangent=[Dt-lt[0],zt-lt[1]];var Tt=V*Math.cos(xt+jt+_)+k,Wt=ot*Math.sin(xt+jt-_)+O;St.endTangent=[bt[0]-Tt,bt[1]-Wt]}$.push(St)}return $}},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.POST_CONSTRUCT=y.DESIGN_PARAM_TYPES=y.PARAM_TYPES=y.TAGGED_PROP=y.TAGGED=y.MULTI_INJECT_TAG=y.INJECT_TAG=y.OPTIONAL_TAG=y.UNMANAGED_TAG=y.NAME_TAG=y.NAMED_TAG=void 0,y.NAMED_TAG="named",y.NAME_TAG="name",y.UNMANAGED_TAG="unmanaged",y.OPTIONAL_TAG="optional",y.INJECT_TAG="inject",y.MULTI_INJECT_TAG="multi_inject",y.TAGGED="inversify:tagged",y.TAGGED_PROP="inversify:tagged_props",y.PARAM_TYPES="inversify:paramtypes",y.DESIGN_PARAM_TYPES="design:paramtypes",y.POST_CONSTRUCT="post_construct"},function(i,y,t){var n,u,p;function b(c){return(b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(c)}(function(c,S){b(y)=="object"&&i!==void 0?S(y):(u=[y],(p=typeof(n=S)=="function"?n.apply(y,u):n)===void 0||(i.exports=p))})(0,function(c){"use strict";var S=function(dt,mt){var bt=dt.nodes,wt=dt.edges,J=[],ct={};if(!bt)throw Error("invalid nodes data!");return bt&&bt.forEach(function(it,_){ct[it.id]=_,J.push([])}),wt&&wt.forEach(function(it){var _=ct[it.source],R=ct[it.target];J[_][R]=1,mt||(J[R][_]=1)}),J};function I(K,dt){if(!(K instanceof dt))throw new TypeError("Cannot call a class as a function")}function m(K,dt){for(var mt=0;dt.length>mt;mt++){var bt=dt[mt];bt.enumerable=bt.enumerable||!1,bt.configurable=!0,"value"in bt&&(bt.writable=!0),Object.defineProperty(K,bt.key,bt)}}function r(K,dt,mt){return dt&&m(K.prototype,dt),mt&&m(K,mt),K}function s(K){return function(dt){if(Array.isArray(dt))return C(dt)}(K)||function(dt){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(dt))return Array.from(dt)}(K)||d(K)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(K,dt){if(K){if(typeof K=="string")return C(K,dt);var mt=Object.prototype.toString.call(K).slice(8,-1);return mt==="Object"&&K.constructor&&(mt=K.constructor.name),mt==="Map"||mt==="Set"?Array.from(K):mt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(mt)?C(K,dt):void 0}}function C(K,dt){(dt==null||dt>K.length)&&(dt=K.length);for(var mt=0,bt=Array(dt);dt>mt;mt++)bt[mt]=K[mt];return bt}function E(K,dt){var mt;if(typeof Symbol=="undefined"||K[Symbol.iterator]==null){if(Array.isArray(K)||(mt=d(K))||dt&&K&&typeof K.length=="number"){mt&&(K=mt);var bt=0,wt=function(){};return{s:wt,n:function(){return K.length>bt?{done:!1,value:K[bt++]}:{done:!0}},e:function(R){throw R},f:wt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var J,ct=!0,it=!1;return{s:function(){mt=K[Symbol.iterator]()},n:function(){var R=mt.next();return ct=R.done,R},e:function(R){it=!0,J=R},f:function(){try{ct||mt.return==null||mt.return()}finally{if(it)throw J}}}}var A=function(dt,mt){return dt===mt},f=function(){function K(dt){var mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;I(this,K),this.value=dt,this.next=mt}return r(K,[{key:"toString",value:function(mt){return mt?mt(this.value):"".concat(this.value)}}]),K}(),x=function(){function K(){var dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:A;I(this,K),this.head=null,this.tail=null,this.compare=dt}return r(K,[{key:"prepend",value:function(mt){var bt=new f(mt,this.head);return this.head=bt,this.tail||(this.tail=bt),this}},{key:"append",value:function(mt){var bt=new f(mt);return this.head?(this.tail.next=bt,this.tail=bt,this):(this.head=bt,this.tail=bt,this)}},{key:"delete",value:function(mt){if(!this.head)return null;for(var bt=null;this.head&&this.compare(this.head.value,mt);)bt=this.head,this.head=this.head.next;var wt=this.head;if(wt!==null)for(;wt.next;)this.compare(wt.next.value,mt)?(bt=wt.next,wt.next=wt.next.next):wt=wt.next;return this.compare(this.tail.value,mt)&&(this.tail=wt),bt}},{key:"find",value:function(mt){var bt=mt.value,wt=bt===void 0?void 0:bt,J=mt.callback,ct=J===void 0?void 0:J;if(!this.head)return null;for(var it=this.head;it;){if(ct&&ct(it.value)||wt!==void 0&&this.compare(it.value,wt))return it;it=it.next}return null}},{key:"deleteTail",value:function(){var mt=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,mt;for(var bt=this.head;bt.next;)bt.next.next?bt=bt.next:bt.next=null;return this.tail=bt,mt}},{key:"deleteHead",value:function(){if(!this.head)return null;var mt=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),mt}},{key:"fromArray",value:function(mt){var bt=this;return mt.forEach(function(wt){return bt.append(wt)}),this}},{key:"toArray",value:function(){for(var mt=[],bt=this.head;bt;)mt.push(bt),bt=bt.next;return mt}},{key:"reverse",value:function(){for(var mt=this.head,bt=null,wt=null;mt;)wt=mt.next,mt.next=bt,bt=mt,mt=wt;this.tail=this.head,this.head=bt}},{key:"toString",value:function(){var mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;return""+this.toArray().map(function(bt){return bt.toString(mt)})}}]),K}(),j=function(){function K(){I(this,K),this.linkedList=new x}return r(K,[{key:"isEmpty",value:function(){return!this.linkedList.head}},{key:"peek",value:function(){return this.linkedList.head?this.linkedList.head.value:null}},{key:"enqueue",value:function(mt){this.linkedList.append(mt)}},{key:"dequeue",value:function(){var mt=this.linkedList.deleteHead();return mt?mt.value:null}},{key:"toString",value:function(mt){return this.linkedList.toString(mt)}}]),K}(),P=function(dt){var mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],bt=arguments.length>2?arguments[2]:void 0,wt=mt.filter(function(_){return _.source===dt||_.target===dt});if(bt==="target"){var J=function(R){return R.source===dt};return wt.filter(J).map(function(_){return _.target})}if(bt==="source"){var ct=function(R){return R.target===dt};return wt.filter(ct).map(function(_){return _.source})}var it=function(R){return R.source===dt?R.target:R.source};return wt.map(it)},W=function(dt,mt){return mt.filter(function(bt){return bt.source===dt||bt.target===dt})},X=function(){var dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,mt="".concat(Math.random()).split(".")[1].substr(0,5),bt="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(dt,"-").concat(mt).concat(bt)},$=function(dt){var mt={},bt=dt.nodes,wt=dt.edges,J=wt===void 0?[]:wt;return(bt===void 0?[]:bt).forEach(function(ct){mt[ct.id]={degree:0,inDegree:0,outDegree:0}}),J.forEach(function(ct){mt[ct.source].degree++,mt[ct.source].outDegree++,mt[ct.target].degree++,mt[ct.target].inDegree++}),mt};function ft(K,dt,mt){(function bt(wt,J,ct,it){it.enter({current:J,previous:ct});var _=wt.edges;P(J,_===void 0?[]:_,"target").forEach(function(R){it.allowTraversal({previous:ct,current:J,next:R})&&bt(wt,R,J,it)}),it.leave({current:J,previous:ct})})(K,dt,"",function(){var bt,wt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},J=wt,ct=function(){},it=(bt={},function(_){var R=_.next;return!bt[R]&&(bt[R]=!0,!0)});return J.allowTraversal=wt.allowTraversal||it,J.enter=wt.enter||ct,J.leave=wt.leave||ct,J}(mt))}var Z=function(dt,mt,bt,wt){var J=dt.nodes,ct=J===void 0?[]:J,it=dt.edges,_=it===void 0?[]:it,R={},Q={},k={};ct.forEach(function(Mt,yt){var xt=Mt.id;Q[xt]=1/0,xt===mt&&(Q[xt]=0)});for(var g=ct.length,O=function(yt){var xt=function(jt,Dt,zt){for(var Tt,Wt=1/0,Ht=0;Dt.length>Ht;Ht++){var re=Dt[Ht].id;zt[re]||jt[re]>Wt||(Wt=jt[re],Tt=Dt[Ht])}return Tt}(Q,ct,R),Ot=xt.id;if(R[Ot]=!0,Q[Ot]===1/0)return"continue";(bt?function(jt,Dt){return Dt.filter(function(zt){return zt.source===jt})}(Ot,_):W(Ot,_)).forEach(function(jt){var Dt=jt.target,zt=Dt===Ot?jt.source:Dt,Tt=wt&&jt[wt]?jt[wt]:1;Q[zt]>Q[xt.id]+Tt?(Q[zt]=Q[xt.id]+Tt,k[zt]=[xt.id]):Q[zt]===Q[xt.id]+Tt&&k[zt].push(xt.id)})},F=0;g>F;F++)O();k[mt]=[mt];var V={};for(var rt in Q)Q[rt]!==1/0&&lt(mt,rt,k,V);var ot={};for(var st in V)ot[st]=V[st][0];return{length:Q,path:ot,allPaths:V}};function lt(K,dt,mt,bt){if(K===dt)return[K];if(bt[dt])return bt[dt];var wt,J=[],ct=E(mt[dt]);try{for(ct.s();!(wt=ct.n()).done;){var it,_=E(lt(K,wt.value,mt,bt));try{for(_.s();!(it=_.n()).done;)J.push([].concat(s(it.value),[dt]))}catch(R){_.e(R)}finally{_.f()}}}catch(R){ct.e(R)}finally{ct.f()}bt[dt]=J}var pt=function(dt,mt,bt,wt){for(var J=mt.length,ct=2*wt,it=0,_=0;J>_;_++)for(var R=dt[_].clusterId,Q=0;J>Q;Q++)R===dt[Q].clusterId&&(it+=(mt[_][Q]||0)-(bt[_]||0)*(bt[Q]||0)/ct);return it*(1/ct)},gt=function(){function K(dt){I(this,K),this.count=dt.length,this.parent={};var mt,bt=E(dt);try{for(bt.s();!(mt=bt.n()).done;){var wt=mt.value;this.parent[wt]=wt}}catch(J){bt.e(J)}finally{bt.f()}}return r(K,[{key:"find",value:function(mt){for(;this.parent[mt]!==mt;)mt=this.parent[mt];return mt}},{key:"union",value:function(mt,bt){var wt=this.find(mt),J=this.find(bt);wt!==J&&(J>wt?(this.parent[bt]!==bt&&this.union(this.parent[bt],mt),this.parent[bt]=this.parent[mt]):(this.parent[mt]!==mt&&this.union(this.parent[mt],bt),this.parent[mt]=this.parent[bt]))}},{key:"connected",value:function(mt,bt){return this.find(mt)===this.find(bt)}}]),K}(),ut=function(dt,mt){return dt-mt},Bt=function(){function K(){var dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ut;I(this,K),this.compareFn=dt,this.list=[]}return r(K,[{key:"getLeft",value:function(mt){return 2*mt+1}},{key:"getRight",value:function(mt){return 2*mt+2}},{key:"getParent",value:function(mt){return mt===0?null:Math.floor((mt-1)/2)}},{key:"isEmpty",value:function(){return 0>=this.list.length}},{key:"top",value:function(){return this.isEmpty()?void 0:this.list[0]}},{key:"delMin",value:function(){var mt=this.top(),bt=this.list.pop();return this.list.length>0&&(this.list[0]=bt,this.moveDown(0)),mt}},{key:"insert",value:function(mt){return mt!==null&&(this.list.push(mt),this.moveUp(this.list.length-1),!0)}},{key:"moveUp",value:function(mt){for(var bt=this.getParent(mt);mt&&mt>0&&this.compareFn(this.list[bt],this.list[mt])>0;){var wt=this.list[bt];this.list[bt]=this.list[mt],this.list[mt]=wt,bt=this.getParent(mt=bt)}}},{key:"moveDown",value:function(mt){var bt=mt,wt=this.getLeft(mt),J=this.getRight(mt),ct=this.list.length;if(wt!==null&&ct>wt&&this.compareFn(this.list[bt],this.list[wt])>0?bt=wt:J!==null&&ct>J&&this.compareFn(this.list[bt],this.list[J])>0&&(bt=J),mt!==bt){var it=[this.list[bt],this.list[mt]];this.list[mt]=it[0],this.list[bt]=it[1],this.moveDown(bt)}}}]),K}(),Lt=function(dt,mt){var bt=[],wt=dt.nodes,J=wt===void 0?[]:wt,ct=dt.edges,it=ct===void 0?[]:ct;if(J.length===0)return bt;var _=J[0],R=new Set;R.add(_);var Q=new Bt(function(F,V){return mt?F.weight-V.weight:0});for(W(_.id,it).forEach(function(F){Q.insert(F)});!Q.isEmpty();){var k=Q.delMin(),g=k.source,O=k.target;R.has(g)&&R.has(O)||(bt.push(k),R.has(g)||(R.add(g),W(g,it).forEach(function(F){Q.insert(F)})),R.has(O)||(R.add(O),W(O,it).forEach(function(F){Q.insert(F)})))}return bt},St=function(dt,mt){var bt=[],wt=dt.nodes,J=wt===void 0?[]:wt,ct=dt.edges;if(J.length===0)return bt;var it=(ct===void 0?[]:ct).map(function(g){return g});mt&&it.sort(function(g,O){return g.weight-O.weight});for(var _=new gt(J.map(function(g){return g.id}));it.length>0;){var R=it.shift(),Q=R.source,k=R.target;_.connected(Q,k)||(bt.push(R),_.union(Q,k))}return bt};c.Stack=function(){function K(){var dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10;I(this,K),this.linkedList=new x,this.maxStep=dt}return r(K,[{key:"isEmpty",value:function(){return!this.linkedList.head}},{key:"isMaxStack",value:function(){return this.toArray().length>=this.maxStep}},{key:"peek",value:function(){return this.isEmpty()?null:this.linkedList.head.value}},{key:"push",value:function(mt){this.linkedList.prepend(mt),this.length>this.maxStep&&this.linkedList.deleteTail()}},{key:"pop",value:function(){var mt=this.linkedList.deleteHead();return mt?mt.value:null}},{key:"toArray",value:function(){return this.linkedList.toArray().map(function(mt){return mt.value})}},{key:"clear",value:function(){for(;!this.isEmpty();)this.pop()}},{key:"length",get:function(){return this.linkedList.toArray().length}}]),K}(),c.breadthFirstSearch=function(K,dt,mt){var bt=function(){var R,Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},k=Q,g=function(){},O=(R={},function(F){var V=F.next;return!R[V]&&(R[V]=!0,!0)});return k.allowTraversal=Q.allowTraversal||O,k.enter=Q.enter||g,k.leave=Q.leave||g,k}(mt),wt=new j,J=K.edges,ct=J===void 0?[]:J;wt.enqueue(dt);for(var it="",_=function(){var Q=wt.dequeue();bt.enter({current:Q,previous:it}),P(Q,ct,"target").forEach(function(k){bt.allowTraversal({previous:it,current:Q,next:k})&&wt.enqueue(k)}),bt.leave({current:Q,previous:it}),it=Q};!wt.isEmpty();)_()},c.connectedComponent=function(K,dt){return dt?function(mt){var bt,wt=mt.nodes,J=wt===void 0?[]:wt,ct=mt.edges,it=ct===void 0?[]:ct,_=[],R={},Q={},k={},g=[],O=0,F=function ot(st){Q[st.id]=O,k[st.id]=O,O+=1,_.push(st),R[st.id]=!0;for(var Mt=P(st.id,it,"target").filter(function(Dt){return J.map(function(zt){return zt.id}).indexOf(Dt)>-1}),yt=function(zt){var Tt=Mt[zt];if(Q[Tt]||Q[Tt]===0)R[Tt]&&(k[st.id]=Math.min(k[st.id],Q[Tt]));else{var Wt=J.filter(function(Ht){return Ht.id===Tt});Wt.length>0&&ot(Wt[0]),k[st.id]=Math.min(k[st.id],k[Tt])}},xt=0;Mt.length>xt;xt++)yt(xt);if(k[st.id]===Q[st.id]){for(var Ot=[];_.length>0;){var jt=_.pop();if(R[jt.id]=!1,Ot.push(jt),jt===st)break}Ot.length>0&&g.push(Ot)}},V=E(J);try{for(V.s();!(bt=V.n()).done;){var rt=bt.value;Q[rt.id]||Q[rt.id]===0||F(rt)}}catch(ot){V.e(ot)}finally{V.f()}return g}(K):function(mt){for(var bt=mt.nodes,wt=bt===void 0?[]:bt,J=mt.edges,ct=J===void 0?[]:J,it=[],_={},R=[],Q=function F(V){R.push(V),_[V.id]=!0;for(var rt=P(V.id,ct),ot=function(yt){var xt=rt[yt];if(!_[xt]){var Ot=wt.filter(function(jt){return jt.id===xt});Ot.length>0&&F(Ot[0])}},st=0;rt.length>st;++st)ot(st)},k=0;wt.length>k;k++){var g=wt[k];if(!_[g.id]){Q(g);for(var O=[];R.length>0;)O.push(R.pop());it.push(O)}}return it}(K)},c.depthFirstSearch=ft,c.detectCycle=function(K){var dt=null,mt=K.nodes,bt={},wt={},J={},ct={};(mt===void 0?[]:mt).forEach(function(_){wt[_.id]=_});for(var it={enter:function(R){var Q=R.current,k=R.previous;if(J[Q]){dt={};for(var g=Q,O=k;O!==Q;)dt[g]=O,g=O,O=bt[O];dt[g]=O}else J[Q]=Q,delete wt[Q],bt[Q]=k},leave:function(R){var Q=R.current;ct[Q]=Q,delete J[Q]},allowTraversal:function(R){return!dt&&!ct[R.next]}};Object.keys(wt).length;)ft(K,Object.keys(wt)[0],it);return dt},c.dijkstra=Z,c.findAllPath=function(K,dt,mt,bt){if(dt===mt)return[[dt]];var wt,J,ct=K.edges,it=ct===void 0?[]:ct,_=[dt],R=((J=dt)in(wt={})?Object.defineProperty(wt,J,{value:!0,enumerable:!0,configurable:!0,writable:!0}):wt[J]=!0,wt),Q=[],k=[],g=bt?P(dt,it,"target"):P(dt,it);for(Q.push(g);_.length>0&&Q.length>0;){var O=Q[Q.length-1];if(O.length){var F=O.shift();if(F&&(_.push(F),R[F]=!0,g=bt?P(F,it,"target"):P(F,it),Q.push(g.filter(function(st){return!R[st]}))),_[_.length-1]===mt){var V=_.map(function(st){return st});k.push(V);var rt=_.pop();R[rt]=!1,Q.pop()}}else{var ot=_.pop();R[ot]=!1,Q.pop()}}return k},c.findShortestPath=function(K,dt,mt,bt,wt){var J=Z(K,dt,bt,wt);return{length:J.length[mt],path:J.path[mt],allPath:J.allPaths[mt]}},c.floydWarshall=function(K,dt){for(var mt=S(K,dt),bt=[],wt=mt.length,J=0;wt>J;J+=1){bt[J]=[];for(var ct=0;wt>ct;ct+=1)bt[J][ct]=J===ct?0:mt[J][ct]!==0&&mt[J][ct]?mt[J][ct]:1/0}for(var it=0;wt>it;it+=1)for(var _=0;wt>_;_+=1)for(var R=0;wt>R;R+=1)bt[_][R]>bt[_][it]+bt[it][R]&&(bt[_][R]=bt[_][it]+bt[it][R]);return bt},c.getAdjMatrix=S,c.getDegree=$,c.getInDegree=function(K,dt){return $(K)[dt]?$(K)[dt].inDegree:0},c.getNeighbors=P,c.getOutDegree=function(K,dt){return $(K)[dt]?$(K)[dt].outDegree:0},c.labelPropagation=function(K){var dt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],mt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"weight",bt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e3,wt=K.nodes,J=wt===void 0?[]:wt,ct=K.edges,it=ct===void 0?[]:ct,_={},R={};J.forEach(function(ot,st){var Mt=X();ot.clusterId=Mt,_[Mt]={id:Mt,nodes:[ot]},R[ot.id]={node:ot,idx:st}});var Q=S(K,dt),k={};Q.forEach(function(ot,st){var Mt=J[st].id;k[Mt]={},ot.forEach(function(yt,xt){yt&&(k[Mt][J[xt].id]=yt)})});for(var g=0;bt>g;){var O=!1;if(J.forEach(function(ot){var st={};Object.keys(k[ot.id]).forEach(function(Tt){var Wt=k[ot.id][Tt],Ht=R[Tt].node.clusterId;st[Ht]||(st[Ht]=0),st[Ht]+=Wt});var Mt=-1/0,yt=[];if(Object.keys(st).forEach(function(Tt){st[Tt]>Mt?(Mt=st[Tt],yt=[Tt]):Mt===st[Tt]&&yt.push(Tt)}),yt.length!==1||yt[0]!==ot.clusterId){var xt=yt.indexOf(ot.clusterId);if(0>xt||yt.splice(xt,1),yt&&yt.length){O=!0;var Ot=_[ot.clusterId],jt=Ot.nodes.indexOf(ot);Ot.nodes.splice(jt,1);var Dt=Math.floor(Math.random()*yt.length),zt=_[yt[Dt]];zt.nodes.push(ot),ot.clusterId=zt.id}}}),!O)break;g++}Object.keys(_).forEach(function(ot){var st=_[ot];st.nodes&&st.nodes.length||delete _[ot]});var F=[],V={};it.forEach(function(ot){var st=ot[mt]||1,Mt=R[ot.source].node.clusterId,yt=R[ot.target].node.clusterId,xt="".concat(Mt,"---").concat(yt);if(V[xt])V[xt].weight+=st,V[xt].count++;else{var Ot={source:Mt,target:yt,weight:st,count:1};V[xt]=Ot,F.push(Ot)}});var rt=[];return Object.keys(_).forEach(function(ot){rt.push(_[ot])}),{clusters:rt,clusterEdges:F}},c.louvain=function(K){var dt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],mt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"weight",bt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e-4,wt=K.nodes,J=wt===void 0?[]:wt,ct=K.edges,it=ct===void 0?[]:ct,_={},R={};J.forEach(function(yt,xt){var Ot=X();yt.clusterId=Ot,_[Ot]={id:Ot,nodes:[yt]},R[yt.id]={node:yt,idx:xt}});var Q=S(K,dt),k=[],g={},O=0;Q.forEach(function(yt,xt){var Ot=0,jt=J[xt].id;g[jt]={},yt.forEach(function(Dt,zt){Dt&&(Ot+=Dt,g[jt][J[zt].id]=Dt,O+=Dt)}),k.push(Ot)}),O/=2;for(var F=1/0,V=1/0,rt=0;F=pt(J,Q,k,O),Math.abs(F-V)>=bt&&100>=rt;)V=F,rt++,Object.keys(_).forEach(function(yt){var xt=0;it.forEach(function(Ot){var jt=R[Ot.source].node.clusterId,Dt=R[Ot.target].node.clusterId;(jt===yt&&Dt!==yt||Dt===yt&&jt!==yt)&&(xt+=Ot[mt]||1)}),_[yt].sumTot=xt}),J.forEach(function(yt,xt){var Ot,jt=_[yt.clusterId],Dt=0,zt=k[xt]/(2*O),Tt=0;jt.nodes.forEach(function(Se){Tt+=Q[xt][R[Se.id].idx]||0});var Wt=Tt-jt.sumTot*zt;if(Object.keys(g[yt.id]).forEach(function(Se){var Le=R[Se].node.clusterId;if(Le!==yt.clusterId){var Je=_[Le],On=Je.nodes;if(On&&On.length){var gn=0;On.forEach(function(kn){gn+=Q[xt][R[kn.id].idx]||0});var Wn=gn-Je.sumTot*zt-Wt;Wn>Dt&&(Dt=Wn,Ot=Je)}}}),Dt>0){Ot.nodes.push(yt);var Ht=yt.clusterId;yt.clusterId=Ot.id;var re=jt.nodes.indexOf(yt);jt.nodes.splice(re,1);var pe=0,me=0;it.forEach(function(Se){var Le=R[Se.source].node.clusterId,Je=R[Se.target].node.clusterId;(Le===Ot.id&&Je!==Ot.id||Je===Ot.id&&Le!==Ot.id)&&(pe+=Se[mt]||1),(Le===Ht&&Je!==Ht||Je===Ht&&Le!==Ht)&&(me+=Se[mt]||1)}),Ot.sumTot=pe,jt.sumTot=me}});Object.keys(_).forEach(function(yt){var xt=_[yt];xt.nodes&&xt.nodes.length||delete _[yt]});var ot=[],st={};it.forEach(function(yt){var xt=yt[mt]||1,Ot=R[yt.source].node.clusterId,jt=R[yt.target].node.clusterId,Dt="".concat(Ot,"---").concat(jt);if(st[Dt])st[Dt].weight+=xt,st[Dt].count++;else{var zt={source:Ot,target:jt,weight:xt,count:1};st[Dt]=zt,ot.push(zt)}});var Mt=[];return Object.keys(_).forEach(function(yt){Mt.push(_[yt])}),{clusters:Mt,clusterEdges:ot}},c.minimumSpanningTree=function(K,dt,mt){return mt?{prim:Lt,kruskal:St}[mt](K,dt):St(K,dt)},c.pageRank=function(K,dt,mt){typeof dt!="number"&&(dt=1e-6),typeof mt!="number"&&(mt=.85);for(var bt,wt=1,J=0,ct=1e3,it=K.nodes,_=it===void 0?[]:it,R=K.edges,Q=R===void 0?[]:R,k=_.length,g={},O={},F=0;k>F;++F){var V=_[F].id;g[V]=1/k,O[V]=1/k}for(var rt=$(K);ct>0&&wt>dt;){J=0;for(var ot=0;k>ot;++ot){var st=_[ot],Mt=st.id;if(bt=0,rt[st.id].inDegree===0)g[Mt]=0;else{for(var yt=P(Mt,Q,"source"),xt=0;yt.length>xt;++xt){var Ot=yt[xt],jt=rt[Ot].outDegree;jt>0&&(bt+=O[Ot]/jt)}g[Mt]=mt*bt,J+=g[Mt]}}J=(1-J)/k,wt=0;for(var Dt=0;k>Dt;++Dt){var zt=_[Dt].id;wt+=Math.abs((bt=g[zt]+J)-O[zt]),O[zt]=bt}ct-=1}return O},Object.defineProperty(c,"__esModule",{value:!0})})},function(i,y,t){"use strict";t.d(y,"c",function(){return s}),t.d(y,"b",function(){return d}),t.d(y,"a",function(){return C});var n=t(1),u=t(56);function p(E){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(E)}var b=Math.sin,c=Math.cos,S=Math.atan2,I=Math.PI;function m(E,A,f,x,j,P,W){var X=A.stroke,$=A.lineWidth,ft=S(x-P,f-j),Z=new u.Path({type:"path",canvas:E.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*c(I/6)+","+10*b(I/6)+" L0,0 L"+10*c(I/6)+",-"+10*b(I/6),stroke:X,lineWidth:$}});Z.translate(j,P),Z.rotateAtPoint(j,P,ft),E.set(W?"startArrowShape":"endArrowShape",Z)}function r(E,A,f,x,j,P,W){var X=A.startArrow,$=A.endArrow,ft=A.stroke,Z=A.lineWidth,lt=W?X:$,pt=lt.d,gt=lt.fill,ut=lt.stroke,Bt=lt.lineWidth,Lt=Object(n.c)(lt,["d","fill","stroke","lineWidth"]),St=S(x-P,f-j);pt&&(j-=c(St)*pt,P-=b(St)*pt);var K=new u.Path({type:"path",canvas:E.get("canvas"),isArrowShape:!0,attrs:Object(n.a)(Object(n.a)({},Lt),{stroke:ut||ft,lineWidth:Bt||Z,fill:gt})});K.translate(j,P),K.rotateAtPoint(j,P,St),E.set(W?"startArrowShape":"endArrowShape",K)}function s(E,A,f,x,j){var P=S(x-A,f-E);return{dx:c(P)*j,dy:b(P)*j}}function d(E,A,f,x,j,P){p(A.startArrow)==="object"?r(E,A,f,x,j,P,!0):A.startArrow?m(E,A,f,x,j,P,!0):E.set("startArrowShape",null)}function C(E,A,f,x,j,P){p(A.endArrow)==="object"?r(E,A,f,x,j,P,!1):A.endArrow?m(E,A,f,x,j,P,!1):E.set("startArrowShape",null)}},function(i,y,t){"use strict";var n={};t.r(n),t.d(n,"leftTranslate",function(){return $}),t.d(n,"leftRotate",function(){return ft}),t.d(n,"leftScale",function(){return Z}),t.d(n,"transform",function(){return lt}),t.d(n,"direction",function(){return pt}),t.d(n,"angleTo",function(){return gt}),t.d(n,"vertical",function(){return ut});var u={};t.r(u),t.d(u,"default",function(){return Sr}),t.d(u,"assign",function(){return zt}),t.d(u,"format",function(){return ir}),t.d(u,"parse",function(){return hr}),t.d(u,"defaultI18n",function(){return re}),t.d(u,"setGlobalDateI18n",function(){return me}),t.d(u,"setGlobalDateMasks",function(){return Qn});var p={};t.r(p),t.d(p,"compare",function(){return ce}),t.d(p,"getLineIntersect",function(){return Bn}),t.d(p,"getRectIntersectByPoint",function(){return Zn}),t.d(p,"getCircleIntersectByPoint",function(){return Kn}),t.d(p,"getEllipseIntersectByPoint",function(){return $e}),t.d(p,"applyMatrix",function(){return je}),t.d(p,"invertMatrix",function(){return L}),t.d(p,"getCircleCenterByPoints",function(){return Et}),t.d(p,"distance",function(){return $t}),t.d(p,"scaleMatrix",function(){return ye}),t.d(p,"floydWarshall",function(){return Zt}),t.d(p,"getAdjMatrix",function(){return de}),t.d(p,"translate",function(){return he}),t.d(p,"move",function(){return le}),t.d(p,"scale",function(){return Me}),t.d(p,"rotate",function(){return Ve}),t.d(p,"getDegree",function(){return Ye}),t.d(p,"isPointInPolygon",function(){return nn}),t.d(p,"intersectBBox",function(){return Re}),t.d(p,"isPolygonsIntersect",function(){return hn}),t.d(p,"Line",function(){return pn}),t.d(p,"getBBoxBoundLine",function(){return on}),t.d(p,"itemIntersectByLine",function(){return jn}),t.d(p,"fractionToLine",function(){return Ie}),t.d(p,"getPointsCenter",function(){return fe}),t.d(p,"squareDist",function(){return Ne}),t.d(p,"pointLineSquareDist",function(){return Fe}),t.d(p,"isPointsOverlap",function(){return rn}),t.d(p,"pointRectSquareDist",function(){return ln});var b={};t.r(b),t.d(b,"uniqueId",function(){return ri}),t.d(b,"formatPadding",function(){return zr}),t.d(b,"cloneEvent",function(){return wi}),t.d(b,"isViewportChanged",function(){return Ai}),t.d(b,"isNaN",function(){return gi}),t.d(b,"calculationItemsBBox",function(){return Oa}),t.d(b,"processParallelEdges",function(){return Aa});var c={};t.r(c),t.d(c,"getBBox",function(){return bn}),t.d(c,"getLoopCfgs",function(){return Yn}),t.d(c,"getLabelPosition",function(){return Jn}),t.d(c,"traverseTree",function(){return _n}),t.d(c,"traverseTreeUp",function(){return fr}),t.d(c,"getLetterWidth",function(){return sr}),t.d(c,"getTextSize",function(){return vr}),t.d(c,"plainCombosToTrees",function(){return pr}),t.d(c,"reconstructTree",function(){return Vr}),t.d(c,"getComboBBox",function(){return Ur}),t.d(c,"shouldRefreshEdge",function(){return Ii}),t.d(c,"cloneBesidesImg",function(){return br});var S={};t.r(S),t.d(S,"getSpline",function(){return Na}),t.d(S,"getControlPoint",function(){return Fa}),t.d(S,"pointsToPolygon",function(){return ro}),t.d(S,"pathToPoints",function(){return Ea}),t.d(S,"getClosedSpline",function(){return Eo}),t.d(S,"roundedHull",function(){return to}),t.d(S,"paddedHull",function(){return fo});var I,m=t(14),r=t(0),s=function(){function kt(v){this._cfgs=Object(r.e)(this.getDefaultCfgs(),v),this._events={},this.destroyed=!1}return kt.prototype.getDefaultCfgs=function(){return{}},kt.prototype.initPlugin=function(v){var l=this;l.set("graph",v);var D=l.getEvents(),Y={};Object(r.f)(D,function(ht,At){var Ut=Object(r.J)(l,ht);Y[At]=Ut,v.on(At,Ut)}),this._events=Y,this.init()},kt.prototype.getEvents=function(){return{}},kt.prototype.get=function(v){return this._cfgs[v]},kt.prototype.set=function(v,l){this._cfgs[v]=l},kt.prototype.destroy=function(){},kt.prototype.destroyPlugin=function(){this.destroy();var v=this.get("graph"),l=this._events;Object(r.f)(l,function(D,Y){v.off(Y,D)}),this._events=null,this._cfgs=null,this.destroyed=!0},kt}(),d=(I=function(v,l){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,Y){D.__proto__=Y}||function(D,Y){for(var ht in Y)Object.prototype.hasOwnProperty.call(Y,ht)&&(D[ht]=Y[ht])})(v,l)},function(kt,v){function l(){this.constructor=kt}I(kt,v),kt.prototype=v===null?Object.create(v):(l.prototype=v.prototype,new l)}),C="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",E=function(kt){function v(){return kt!==null&&kt.apply(this,arguments)||this}return d(v,kt),v.prototype.getDefaultCfgs=function(){return{img:C}},v.prototype.init=function(){var l=this.get("graph"),D=l.get("minZoom"),Y=l.get("container"),ht=l.get("canvas").get("el"),At=l.get("width"),Ut=l.get("height"),Yt=this.get("img")||C,qt=Object(m.b)(`<div class='g6-grid-container' style="position: absolute; left:0;top:0;right:0;bottom:0;overflow: hidden;z-index: -1;"></div>`),oe=Object(m.b)(`<div 
        class='g6-grid' 
        style='position:absolute;
        transform-origin: 0% 0% 0px;
        background-image: `+Yt+`;
        user-select: none
        '></div>`);qt.appendChild(oe),Object(m.c)(qt,{width:At+"px",height:Ut+"px",left:Y.offsetLeft+"px",top:Y.offsetTop+"px"}),Object(m.c)(oe,{width:At/D+"px",height:Ut/D+"px",left:"0px",top:"0px"}),Y.insertBefore(qt,ht),this.set("container",qt),this.set("gridContainer",oe)},v.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},v.prototype.updateGrid=function(l){var D=this.get("gridContainer"),Y=l.matrix;Y||(Y=[1,0,0,0,1,0,0,0,1]);var ht="matrix("+Y[0]+", "+Y[1]+", "+Y[3]+", "+Y[4]+", 0, 0)";Object(m.c)(D,{transform:ht})},v.prototype.getContainer=function(){return this.get("container")},v.prototype.destroy=function(){var l=this.get("graph").get("container"),D=this.get("container");l.removeChild(D)},v}(s),A=t(81),f=t.n(A),x=function(){var kt=function(l,D){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,ht){Y.__proto__=ht}||function(Y,ht){for(var At in ht)Object.prototype.hasOwnProperty.call(ht,At)&&(Y[At]=ht[At])})(l,D)};return function(v,l){function D(){this.constructor=v}kt(v,l),v.prototype=l===null?Object.create(l):(D.prototype=l.prototype,new D)}}();f()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var j=function(kt){function v(){return kt!==null&&kt.apply(this,arguments)||this}return x(v,kt),v.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(D){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(D){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"]}},v.prototype.getEvents=function(){return{contextmenu:"onMenuShow"}},v.prototype.init=function(){var l=this.get("className"),D=Object(m.b)("<div class="+(l||"g6-component-contextmenu")+"></div>");Object(m.c)(D,{top:"0px",position:"absolute",visibility:"hidden"});var Y=this.get("container");Y||(Y=this.get("graph").get("container")),Object(r.x)(Y)&&(Y=document.getElementById(Y)),Y.appendChild(D),this.set("menu",D)},v.prototype.onMenuShow=function(l){var D=this;l.preventDefault(),l.stopPropagation();var Y=this.get("itemTypes");if(l.item){if(l.item&&l.item.getType&&Y.indexOf(l.item.getType())===-1)return void D.onMenuHide()}else if(Y.indexOf("canvas")===-1)return;if(this.get("shouldBegin")(l)){var ht=this.get("menu"),At=this.get("getContent"),Ut=this.get("graph"),Yt=At(l,Ut);Object(r.x)(Yt)?ht.innerHTML=Yt:ht.innerHTML=Yt.outerHTML,this.removeMenuEventListener();var qt=this.get("handleMenuClick");if(qt){var oe=function(Rr){qt(Rr.target,l.item,Ut)};this.set("handleMenuClickWrapper",oe),ht.addEventListener("click",oe)}var Te=Ut.get("width"),Ge=Ut.get("height"),Ue=ht.getBoundingClientRect(),We=this.get("offsetX")||0,vn=this.get("offsetY")||0,Tn=Ut.getContainer().offsetTop,Ln=Ut.getContainer().offsetLeft,Un=l.canvasX+Ln+We,Hn=l.canvasY+Tn+vn;Un+Ue.width>Te&&(Un=l.canvasX-Ue.width-We+Ln),Hn+Ue.height>Ge&&(Hn=l.canvasY-Ue.height-vn+Tn),Object(m.c)(ht,{top:Hn+"px",left:Un+"px",visibility:"visible"});var xr=function(Rr){D.onMenuHide()};document.body.addEventListener("click",xr),this.set("handler",xr)}},v.prototype.removeMenuEventListener=function(){var l=this.get("handleMenuClickWrapper"),D=this.get("handler");l&&(this.get("menu").removeEventListener("click",l),this.set("handleMenuClickWrapper",null)),D&&document.body.removeEventListener("click",D)},v.prototype.onMenuHide=function(){var l=this.get("menu");l&&Object(m.c)(l,{visibility:"hidden"}),this.removeMenuEventListener()},v.prototype.destroy=function(){var l=this.get("menu");if(this.removeMenuEventListener(),l){var D=this.get("container");D||(D=this.get("graph").get("container")),Object(r.x)(D)&&(D=document.getElementById(D)),D.removeChild(l)}},v}(s),P=t(52),W=t(62),X=t(2);function $(kt,v,l){var D=[0,0,0,0,0,0,0,0,0];return X.a.fromTranslation(D,l),X.a.multiply(kt,D,v)}function ft(kt,v,l){var D=[0,0,0,0,0,0,0,0,0];return X.a.fromRotation(D,l),X.a.multiply(kt,D,v)}function Z(kt,v,l){var D=[0,0,0,0,0,0,0,0,0];return X.a.fromScaling(D,l),X.a.multiply(kt,D,v)}function lt(kt,v){for(var l,D,Y,ht=kt?[].concat(kt):[1,0,0,0,1,0,0,0,1],At=0,Ut=v.length;At<Ut;At++){var Yt=v[At];switch(Yt[0]){case"t":$(ht,ht,[Yt[1],Yt[2]]);break;case"s":Z(ht,ht,[Yt[1],Yt[2]]);break;case"r":ft(ht,ht,Yt[1]);break;case"m":l=ht,D=ht,Y=Yt[1],X.a.multiply(l,Y,D)}}return ht}function pt(kt,v){return kt[0]*v[1]-v[0]*kt[1]}function gt(kt,v,l){var D=X.d.angle(kt,v),Y=pt(kt,v)>=0;return l?Y?2*Math.PI-D:D:Y?D:2*Math.PI-D}function ut(kt,v,l){return l?(kt[0]=v[1],kt[1]=-1*v[0]):(kt[0]=-1*v[1],kt[1]=v[0]),kt}var Bt=function(){var kt=function(l,D){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,ht){Y.__proto__=ht}||function(Y,ht){for(var At in ht)Object.prototype.hasOwnProperty.call(ht,At)&&(Y[At]=ht[At])})(l,D)};return function(v,l){function D(){this.constructor=v}kt(v,l),v.prototype=l===null?Object.create(l):(D.prototype=l.prototype,new D)}}(),Lt=function(){return(Lt=Object.assign||function(v){for(var l,D=1,Y=arguments.length;D<Y;D++)for(var ht in l=arguments[D])Object.prototype.hasOwnProperty.call(l,ht)&&(v[ht]=l[ht]);return v}).apply(this,arguments)},St=Math.max,K=n.transform,dt=function(kt){function v(){var l=kt!==null&&kt.apply(this,arguments)||this;return l.handleUpdateCanvas=Object(r.d)(function(D){var Y=l;Y.destroyed||Y.updateCanvas()},100,!1),l}return Bt(v,kt),v.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},v.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},v.prototype.disableRefresh=function(){this.set("refresh",!1)},v.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},v.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},v.prototype.initViewport=function(){var l=this,D=this._cfgs,Y=D.size,ht=D.graph;if(!this.destroyed){var At=this.get("canvas").get("container"),Ut=Object(m.b)(`
      <div
        class=`+D.viewportClassName+`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff'
        draggable=true>
      </div>`),Yt=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,qt=0,oe=0,Te=!1,Ge=0,Ue=0,We=0,vn=0,Tn=0,Ln=0;Ut.addEventListener("dragstart",function(Un){var Hn,xr;if(Un.dataTransfer){var Or=new Image;Or.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(xr=(Hn=Un.dataTransfer).setDragImage)===null||xr===void 0||xr.call(Hn,Or,0,0);try{Un.dataTransfer.setData("text/html","view-port-minimap")}catch(yi){Un.dataTransfer.setData("text","view-port-minimap")}}if(D.refresh=!1,Un.target===Ut){var Rr=Ut.style;Ge=parseInt(Rr.left,10),Ue=parseInt(Rr.top,10),We=parseInt(Rr.width,10),vn=parseInt(Rr.height,10),We>Y[0]||vn>Y[1]||(Ln=ht.getZoom(),Tn=l.get("ratio"),Te=!0,qt=Un.clientX,oe=Un.clientY)}},!1),Ut.addEventListener(Yt?"dragover":"drag",function(Un){if(Te&&!Object(r.s)(Un.clientX)&&!Object(r.s)(Un.clientY)){var Hn=qt-Un.clientX,xr=oe-Un.clientY;(Ge-Hn<0||Ge-Hn+We>=Y[0])&&(Hn=0),(Ue-xr<0||Ue-xr+vn>=Y[1])&&(xr=0),Ge-=Hn,Ue-=xr,Object(m.c)(Ut,{left:Ge+"px",top:Ue+"px"}),ht.translate(Hn*Ln/Tn,xr*Ln/Tn),qt=Un.clientX,oe=Un.clientY}},!1),Ut.addEventListener("dragend",function(){Te=!1,D.refresh=!0},!1),this.set("viewport",Ut),At.appendChild(Ut)}},v.prototype.updateViewport=function(){if(!this.destroyed){var l=this.get("ratio"),D=(this.get("dx"),this.get("dy"),this.get("totaldx")),Y=this.get("totaldy"),ht=this.get("graph"),At=this.get("size"),Ut=ht.get("width"),Yt=ht.get("height"),qt=ht.getPointByCanvas(0,0),oe=ht.getPointByCanvas(Ut,Yt),Te=this.get("viewport");Te||this.initViewport(),ht.getZoom();var Ge=(oe.x-qt.x)*l,Ue=(oe.y-qt.y)*l,We=qt.x*l+D,vn=qt.y*l+Y,Tn=We+Ge,Ln=vn+Ue;We<0&&(Ge+=We,We=0),Tn>At[0]&&(Ge-=Tn-At[0]),vn<0&&(Ue+=vn,vn=0),Ln>At[1]&&(Ue-=Ln-At[1]),this.set("ratio",l);var Un=We+"px",Hn=vn+"px";Object(m.c)(Te,{left:Un,top:Hn,width:Ge+"px",height:Ue+"px"})}},v.prototype.updateGraphShapes=function(){var l=this._cfgs.graph,D=this.get("canvas"),Y=l.get("group");if(!Y.destroyed){var ht=Y.clone();ht.resetMatrix(),D.clear(),D.add(ht),l.get("renderer")==="svg"&&this.updateVisible(ht)}},v.prototype.updateVisible=function(l){var D=this;if(l.isGroup()||l.get("visible")){var Y=l.get("children");if(!Y||!Y.length)return;Y.forEach(function(ht){ht.get("visible")||ht.hide(),D.updateVisible(ht)})}else l.hide()},v.prototype.updateKeyShapes=function(){var l=this,D=this._cfgs.graph;Object(r.f)(D.getEdges(),function(Y){l.updateOneEdgeKeyShape(Y)}),Object(r.f)(D.getNodes(),function(Y){l.updateOneNodeKeyShape(Y)}),this.clearDestroyedShapes()},v.prototype.updateOneNodeKeyShape=function(l){var D=this.get("canvas"),Y=D.get("children")[0]||D.addGroup(),ht=this.get("itemMap")||{},At=ht[l.get("id")],Ut=l.getBBox(),Yt=l.get("keyShape").clone(),qt=Yt.attr(),oe={x:Ut.centerX,y:Ut.centerY};At?oe=Object.assign(qt,oe):(At=Yt,Y.add(At));var Te=At.get("type");Te!=="rect"&&Te!=="image"||(oe.x=Ut.minX,oe.y=Ut.minY),At.attr(oe),l.isVisible()||At.hide(),At.exist=!0,ht[l.get("id")]=At,this.set("itemMap",ht)},v.prototype.updateDelegateShapes=function(){var l=this,D=this._cfgs.graph;Object(r.f)(D.getEdges(),function(Y){l.updateOneEdgeKeyShape(Y)}),Object(r.f)(D.getNodes(),function(Y){l.updateOneNodeDelegateShape(Y)}),this.clearDestroyedShapes()},v.prototype.clearDestroyedShapes=function(){var l=this.get("itemMap")||{},D=Object.keys(l);if(D&&D.length!==0)for(var Y=D.length-1;Y>=0;Y--){var ht=l[D[Y]],At=ht.exist;ht.exist=!1,At||(ht.remove(),delete l[D[Y]])}},v.prototype.updateOneEdgeKeyShape=function(l){var D=this.get("canvas"),Y=D.get("children")[0]||D.addGroup(),ht=this.get("itemMap")||{},At=ht[l.get("id")];if(At){var Ut=l.get("keyShape").attr("path");At.attr("path",Ut)}else At=l.get("keyShape").clone(),Y.add(At),At.toBack();l.isVisible()||At.hide(),At.exist=!0,ht[l.get("id")]=At,this.set("itemMap",ht)},v.prototype.updateOneNodeDelegateShape=function(l){var D=this.get("canvas"),Y=D.get("children")[0]||D.addGroup(),ht=this.get("delegateStyle"),At=this.get("itemMap")||{},Ut=At[l.get("id")],Yt=l.getBBox();if(Ut){var qt={x:Yt.minX,y:Yt.minY,width:Yt.width,height:Yt.height};Ut.attr(qt)}else Ut=Y.addShape("rect",{attrs:Lt({x:Yt.minX,y:Yt.minY,width:Yt.width,height:Yt.height},ht),name:"minimap-node-shape"});l.isVisible()||Ut.hide(),Ut.exist=!0,At[l.get("id")]=Ut,this.set("itemMap",At)},v.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},v.prototype.initContainer=function(){var l=this.get("graph"),D=this.get("size"),Y=this.get("className"),ht=this.get("container"),At=Object(m.b)("<div class='"+Y+"' style='width: "+D[0]+"px; height: "+D[1]+"px; overflow: hidden'></div>");Object(r.x)(ht)&&(ht=document.getElementById(ht)),ht?ht.appendChild(At):l.get("container").appendChild(At),this.set("container",At);var Ut,Yt=Object(m.b)('<div class="g6-minimap-container" style="position: relative;"></div>');At.appendChild(Yt),Ut=l.get("renderer")==="svg"?new W.Canvas({container:Yt,width:D[0],height:D[1]}):new P.Canvas({container:Yt,width:D[0],height:D[1]}),this.set("canvas",Ut),this.updateCanvas()},v.prototype.updateCanvas=function(){if(this.get("refresh")){var l=this.get("graph");if(!l.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var D=this.get("size"),Y=this.get("canvas"),ht=this.get("type"),At=this.get("padding");if(!Y.destroyed){switch(ht){case"default":this.updateGraphShapes();break;case"keyShape":this.updateKeyShapes();break;case"delegate":this.updateDelegateShapes()}var Ut=Y.get("children")[0];if(Ut){Ut.resetMatrix();var Yt=Ut.getCanvasBBox(),qt=l.get("canvas").getCanvasBBox(),oe=qt.width,Te=qt.height;Number.isFinite(Yt.width)&&(oe=St(Yt.width,oe),Te=St(Yt.height,Te)),oe+=2*At,Te+=2*At;var Ge=Math.min(D[0]/oe,D[1]/Te),Ue=[1,0,0,0,1,0,0,0,1],We=0,vn=0;Number.isFinite(Yt.minX)&&(We=-Yt.minX),Number.isFinite(Yt.minY)&&(vn=-Yt.minY);var Tn=(D[0]-(oe-2*At)*Ge)/2,Ln=(D[1]-(Te-2*At)*Ge)/2;Ue=K(Ue,[["t",We,vn],["s",Ge,Ge],["t",Tn,Ln]]),Ut.setMatrix(Ue),this.set("ratio",Ge),this.set("totaldx",Tn+We*Ge),this.set("totaldy",Ln+vn*Ge),this.set("dx",Tn),this.set("dy",Ln),this.updateViewport()}}}}},v.prototype.getCanvas=function(){return this.get("canvas")},v.prototype.getViewport=function(){return this.get("viewport")},v.prototype.getContainer=function(){return this.get("container")},v.prototype.destroy=function(){this.get("canvas").destroy();var l=this.get("container");l.parentNode.removeChild(l)},v}(s),mt=function(){var kt=function(l,D){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,ht){Y.__proto__=ht}||function(Y,ht){for(var At in ht)Object.prototype.hasOwnProperty.call(ht,At)&&(Y[At]=ht[At])})(l,D)};return function(v,l){function D(){this.constructor=v}kt(v,l),v.prototype=l===null?Object.create(l):(D.prototype=l.prototype,new D)}}();function bt(kt,v,l){var D=kt.x-v.x,Y=kt.y-v.y;return!l||Math.abs(D)>l||Math.abs(Y)>l?Math.sqrt(D*D+Y*Y):l}function wt(kt,v){var l=(v.source.y-v.target.y)/(v.source.x-v.target.x),D=(l*l*v.source.x+l*(kt.y-v.source.y)+kt.x)/(l*l+1);return{x:D,y:l*(D-v.source.x)+v.source.y}}var J=function(kt){function v(){return kt!==null&&kt.apply(this,arguments)||this}return mt(v,kt),v.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},v.prototype.init=function(){var l=this.get("graph"),D=this.get("onTick");this.set("tick",function(){D&&D(),l.refreshPositions()})},v.prototype.bundling=function(l){var D=this;if(D.set("data",l),!D.isTicking()){var Y=l.edges||[],ht=l.nodes||[],At={},Ut=!1;if(ht.forEach(function(Hn){Hn.x!==null&&!Hn.y!==null&&Hn.x!==void 0&&!Hn.y!==void 0||(Ut=!0),At[Hn.id]=Hn}),Ut)throw new Error("please layout the graph or assign x and y for nodes first");D.set("nodeIdMap",At);var Yt=D.get("divisions"),qt=D.get("divRate"),oe=D.divideEdges(Yt);D.set("edgePoints",oe);var Te=D.getEdgeBundles();D.set("edgeBundles",Te);for(var Ge=D.get("cycles"),Ue=D.get("iterations"),We=D.get("iterRate"),vn=D.get("lambda"),Tn=0;Tn<Ge;Tn++){for(var Ln=function(xr){var Or=[];Y.forEach(function(Rr,yi){if(Rr.source!==Rr.target){var Xi=At[Rr.source],Zr=At[Rr.target];Or[yi]=D.getEdgeForces({source:Xi,target:Zr},yi,Yt,vn);for(var ki=0;ki<Yt+1;ki++)oe[yi][ki].x+=Or[yi][ki].x,oe[yi][ki].y+=Or[yi][ki].y}})},Un=0;Un<Ue;Un++)Ln();vn/=2,Yt*=qt,Ue*=We,oe=D.divideEdges(Yt),D.set("edgePoints",oe)}Y.forEach(function(Hn,xr){Hn.source!==Hn.target&&(Hn.type="polyline",Hn.controlPoints=oe[xr].slice(1,oe[xr].length-1))}),D.get("graph").refresh()}},v.prototype.updateBundling=function(l){var D=this,Y=l.data;if(Y&&D.set("data",Y),D.get("ticking")&&D.set("ticking",!1),Object.keys(l).forEach(function(At){D.set(At,l[At])}),l.onTick){var ht=this.get("graph");D.set("tick",function(){l.onTick(),ht.refresh()})}D.bundling(Y)},v.prototype.divideEdges=function(l){var D=this,Y=D.get("data").edges,ht=D.get("nodeIdMap"),At=D.get("edgePoints");return At&&At!==void 0||(At=[]),Y.forEach(function(Ut,Yt){At[Yt]&&At[Yt]!==void 0||(At[Yt]=[]);var qt=ht[Ut.source],oe=ht[Ut.target];if(l===1)At[Yt].push({x:qt.x,y:qt.y}),At[Yt].push({x:.5*(qt.x+oe.x),y:.5*(qt.y+oe.y)}),At[Yt].push({x:oe.x,y:oe.y});else{var Te=(At[Yt]&&At[Yt]!==[]?D.getEdgeLength(At[Yt]):bt({x:qt.x,y:qt.y},{x:oe.x,y:oe.y}))/(l+1),Ge=Te,Ue=[{x:qt.x,y:qt.y}];At[Yt].forEach(function(We,vn){if(vn!==0){for(var Tn=bt(We,At[Yt][vn-1]);Tn>Ge;){var Ln=Ge/Tn,Un={x:At[Yt][vn-1].x,y:At[Yt][vn-1].y};Un.x+=Ln*(We.x-At[Yt][vn-1].x),Un.y+=Ln*(We.y-At[Yt][vn-1].y),Ue.push(Un),Tn-=Ge,Ge=Te}Ge-=Tn}}),Ue.push({x:oe.x,y:oe.y}),At[Yt]=Ue}}),At},v.prototype.getEdgeLength=function(l){var D=0;return l.forEach(function(Y,ht){ht!==0&&(D+=bt(Y,l[ht-1]))}),D},v.prototype.getEdgeBundles=function(){var l=this,D=l.get("data").edges||[],Y=l.get("bundleThreshold"),ht=l.get("nodeIdMap"),At=l.get("edgeBundles");return At||(At=[]),D.forEach(function(Ut,Yt){At[Yt]&&At[Yt]!==void 0||(At[Yt]=[])}),D.forEach(function(Ut,Yt){var qt=ht[Ut.source],oe=ht[Ut.target];D.forEach(function(Te,Ge){if(!(Ge<=Yt)){var Ue=ht[Te.source],We=ht[Te.target];l.getBundleScore({source:qt,target:oe},{source:Ue,target:We})>=Y&&(At[Yt].push(Ge),At[Ge].push(Yt))}})}),At},v.prototype.getBundleScore=function(l,D){return l.vx=l.target.x-l.source.x,l.vy=l.target.y-l.source.y,D.vx=D.target.x-D.source.x,D.vy=D.target.y-D.source.y,l.length=bt({x:l.source.x,y:l.source.y},{x:l.target.x,y:l.target.y}),D.length=bt({x:D.source.x,y:D.source.y},{x:D.target.x,y:D.target.y}),this.getAngleScore(l,D)*this.getScaleScore(l,D)*this.getPositionScore(l,D)*this.getVisibilityScore(l,D)},v.prototype.getAngleScore=function(l,D){return function(Y,ht){return Y.x*ht.x+Y.y*ht.y}({x:l.vx,y:l.vy},{x:D.vx,y:D.vy})/(l.length*D.length)},v.prototype.getScaleScore=function(l,D){var Y=(l.length+D.length)/2;return 2/(Y/Math.min(l.length,D.length)+Math.max(l.length,D.length)/Y)},v.prototype.getPositionScore=function(l,D){var Y=(l.length+D.length)/2;return Y/(Y+bt({x:(l.source.x+l.target.x)/2,y:(l.source.y+l.target.y)/2},{x:(D.source.x+D.target.x)/2,y:(D.source.y+D.target.y)/2}))},v.prototype.getVisibilityScore=function(l,D){var Y=this.getEdgeVisibility(l,D),ht=this.getEdgeVisibility(D,l);return Y<ht?Y:ht},v.prototype.getEdgeVisibility=function(l,D){var Y=wt(D.source,l),ht=wt(D.target,l),At={x:(Y.x+ht.x)/2,y:(Y.y+ht.y)/2},Ut={x:(l.source.x+l.target.x)/2,y:(l.source.y+l.target.y)/2};return Math.max(0,1-2*bt(At,Ut)/bt(Y,ht))},v.prototype.getEdgeForces=function(l,D,Y,ht){for(var At=this.get("edgePoints"),Ut=this.get("K")/(bt(l.source,l.target)*(Y+1)),Yt=[{x:0,y:0}],qt=1;qt<Y;qt++){var oe={x:0,y:0},Te=this.getSpringForce({pre:At[D][qt-1],cur:At[D][qt],next:At[D][qt+1]},Ut),Ge=this.getElectrostaticForce(qt,D);oe.x=ht*(Te.x+Ge.x),oe.y=ht*(Te.y+Ge.y),Yt.push(oe)}return Yt.push({x:0,y:0}),Yt},v.prototype.getSpringForce=function(l,D){var Y=l.pre.x+l.next.x-2*l.cur.x,ht=l.pre.y+l.next.y-2*l.cur.y;return{x:Y*=D,y:ht*=D}},v.prototype.getElectrostaticForce=function(l,D){var Y=this.get("eps"),ht=this.get("edgeBundles"),At=this.get("edgePoints"),Ut=ht[D],Yt={x:0,y:0};return Ut.forEach(function(qt){var oe={x:At[qt][l].x-At[D][l].x,y:At[qt][l].y-At[D][l].y};if(Math.abs(oe.x)>Y||Math.abs(oe.y)>Y){var Te=1/bt(At[qt][l],At[D][l]);Yt.x+=oe.x*Te,Yt.y+=oe.y*Te}}),Yt},v.prototype.isTicking=function(){return this.get("ticking")},v.prototype.getSimulation=function(){return this.get("forceSimulation")},v.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),kt.prototype.destroy.call(this)},v}(s),ct=function(){var kt=function(l,D){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,ht){Y.__proto__=ht}||function(Y,ht){for(var At in ht)Object.prototype.hasOwnProperty.call(ht,At)&&(Y[At]=ht[At])})(l,D)};return function(v,l){function D(){this.constructor=v}kt(v,l),v.prototype=l===null?Object.create(l):(D.prototype=l.prototype,new D)}}(),it=function(){return(it=Object.assign||function(v){for(var l,D=1,Y=arguments.length;D<Y;D++)for(var ht in l=arguments[D])Object.prototype.hasOwnProperty.call(l,ht)&&(v[ht]=l[ht]);return v}).apply(this,arguments)},_={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},R=function(kt){function v(){return kt!==null&&kt.apply(this,arguments)||this}return ct(v,kt),v.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:Object(r.c)(_),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},v.prototype.getEvents=function(){var l;switch(this.get("trigger")){case"click":l={click:"magnify"};break;case"drag":l={click:"createDelegate"};break;default:l={mousemove:"magnify"}}return l},v.prototype.init=function(){var l=this.get("r");this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{}),this.set("r2",l*l);var D=this.get("d");this.set("molecularParam",(D+1)*l)},v.prototype.createDelegate=function(l){var D=this,Y=this,ht=Y.get("delegate");ht&&!ht.destroyed||(Y.magnify(l),(ht=Y.get("delegate")).on("dragstart",function(At){Y.set("delegateCenterDiff",{x:ht.attr("x")-At.x,y:ht.attr("y")-At.y})}),ht.on("drag",function(At){Y.magnify(At)}),this.get("scaleDBy")==="wheel"&&ht.on("mousewheel",function(At){D.scaleDByWheel(At)}),this.get("scaleRBy")==="wheel"&&ht.on("mousewheel",function(At){Y.scaleRByWheel(At)}))},v.prototype.scaleRByWheel=function(l){if(l&&l.originalEvent){l.preventDefault&&l.preventDefault();var D,Y=this.get("graph"),ht=this.get("delegate"),At=(ht?{x:ht.attr("x"),y:ht.attr("y")}:void 0)||Y.getPointByClient(l.clientX,l.clientY);D=l.originalEvent.wheelDelta<0?.95:1/.95;var Ut=this.get("maxR"),Yt=this.get("minR"),qt=this.get("r");(qt>(Ut||Y.get("height"))&&D>1||qt<(Yt||.05*Y.get("height"))&&D<1)&&(D=1),qt*=D,this.set("r",qt),this.set("r2",qt*qt);var oe=this.get("d");this.set("molecularParam",(oe+1)*qt),this.set("delegateCenterDiff",void 0),this.magnify(l,At)}},v.prototype.scaleRByDrag=function(l){if(l){var D,Y=this.get("dragPrePos"),ht=this.get("graph"),At=ht.getPointByClient(l.clientX,l.clientY);D=l.x-Y.x<0?.95:1/.95;var Ut=this.get("maxR"),Yt=this.get("minR"),qt=this.get("r");(qt>(Ut||ht.get("height"))&&D>1||qt<(Yt||.05*ht.get("height"))&&D<1)&&(D=1),qt*=D,this.set("r",qt),this.set("r2",qt*qt);var oe=this.get("d");this.set("molecularParam",(oe+1)*qt),this.magnify(l,At),this.set("dragPrePos",{x:l.x,y:l.y})}},v.prototype.scaleDByWheel=function(l){if(l||l.originalEvent){l.preventDefault&&l.preventDefault();var D=0;D=l.originalEvent.wheelDelta<0?-.1:.1;var Y=this.get("d")+D,ht=this.get("maxD"),At=this.get("minD");if(Y<ht&&Y>At){this.set("d",Y);var Ut=this.get("r");this.set("molecularParam",(Y+1)*Ut);var Yt=this.get("delegate"),qt=Yt?{x:Yt.attr("x"),y:Yt.attr("y")}:void 0;this.set("delegateCenterDiff",void 0),this.magnify(l,qt)}}},v.prototype.scaleDByDrag=function(l){var D=this.get("dragPrePos"),Y=l.x-D.x>0?.1:-.1,ht=this.get("d")+Y,At=this.get("maxD"),Ut=this.get("minD");if(ht<At&&ht>Ut){this.set("d",ht);var Yt=this.get("r");this.set("molecularParam",(ht+1)*Yt),this.magnify(l)}this.set("dragPrePos",{x:l.x,y:l.y})},v.prototype.magnify=function(l,D){this.restoreCache();var Y=this.get("graph"),ht=this.get("cachedMagnifiedModels"),At=this.get("cachedOriginPositions"),Ut=this.get("showLabel"),Yt=this.get("r"),qt=this.get("r2"),oe=this.get("d"),Te=this.get("molecularParam"),Ge=Y.getNodes(),Ue=Ge.length,We=D?{x:D.x,y:D.y}:{x:l.x,y:l.y};!this.get("dragging")||this.get("trigger")!=="mousemove"&&this.get("trigger")!=="click"||(We=this.get("cacheCenter"));var vn=this.get("delegateCenterDiff");vn&&(We.x+=vn.x,We.y+=vn.y),this.updateDelegate(We,Yt);for(var Tn=0;Tn<Ue;Tn++){var Ln=Ge[Tn].getModel(),Un=Ln.x,Hn=Ln.y;if(!isNaN(Un)&&!isNaN(Hn)){var xr=(Un-We.x)*(Un-We.x)+(Hn-We.y)*(Hn-We.y);if(!isNaN(xr)&&xr<qt&&xr!==0){var Or=Math.sqrt(xr),Rr=Te*Or/(oe*Or+Yt),yi=(Un-We.x)/Or,Xi=(Hn-We.y)/Or;if(Ln.x=yi*Rr+We.x,Ln.y=Xi*Rr+We.y,At[Ln.id]||(At[Ln.id]={x:Un,y:Hn,texts:[]}),ht.push(Ln),Ut&&2*Or<Yt)for(var Zr=Ge[Tn].getContainer().getChildren(),ki=Zr.length,Ba=0;Ba<ki;Ba++){var Ha=Zr[Ba];Ha.get("type")==="text"&&(At[Ln.id].texts.push({visible:Ha.get("visible"),shape:Ha}),Ha.set("visible",!0))}}}}Y.refreshPositions()},v.prototype.restoreCache=function(){for(var l=this.get("cachedMagnifiedModels"),D=this.get("cachedOriginPositions"),Y=l.length,ht=0;ht<Y;ht++){var At=l[ht],Ut=D[At.id];At.x=Ut.x,At.y=Ut.y;for(var Yt=Ut.texts.length,qt=0;qt<Yt;qt++){var oe=Ut.texts[qt];oe.shape.set("visible",oe.visible)}}this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{})},v.prototype.updateParams=function(l){var D=l.r,Y=l.d,ht=l.trigger,At=l.minD,Ut=l.maxD,Yt=l.minR,qt=l.maxR,oe=l.scaleDBy,Te=l.scaleRBy;isNaN(l.r)||(this.set("r",D),this.set("r2",D*D)),isNaN(Y)||this.set("d",Y),isNaN(Ut)||this.set("maxD",Ut),isNaN(At)||this.set("minD",At),isNaN(qt)||this.set("maxR",qt),isNaN(Yt)||this.set("minR",Yt);var Ge,Ue=this.get("d"),We=this.get("r");this.set("molecularParam",(Ue+1)*We),ht!=="mousemove"&&ht!=="click"&&ht!=="drag"||this.set("trigger",ht),(oe==="drag"||oe==="wheel"||oe==="unset")&&(this.set("scaleDBy",oe),this.get("delegate").remove(),this.get("delegate").destroy(),(Ge=this.get("dPercentText"))&&(Ge.remove(),Ge.destroy())),Te!=="drag"&&Te!=="wheel"&&Te!=="unset"||(this.set("scaleRBy",Te),this.get("delegate").remove(),this.get("delegate").destroy(),(Ge=this.get("dPercentText"))&&(Ge.remove(),Ge.destroy()))},v.prototype.updateDelegate=function(l,D){var Y=this,ht=this,At=ht.get("graph"),Ut=ht.get("delegate");if(!Ut||Ut.destroyed){var Yt=At.get("group"),qt=ht.get("delegateStyle")||_;Ut=Yt.addShape("circle",{attrs:it({r:D/1.5,x:l.x,y:l.y},qt),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?Ut.on("mousewheel",function(Ue){ht.scaleRByWheel(Ue)}):this.get("scaleRBy")==="drag"&&(Ut.on("dragstart",function(Ue){ht.set("dragging",!0),ht.set("cacheCenter",{x:Ue.x,y:Ue.y}),ht.set("dragPrePos",{x:Ue.x,y:Ue.y})}),Ut.on("drag",function(Ue){ht.scaleRByDrag(Ue)}),Ut.on("dragend",function(Ue){ht.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?Ut.on("mousewheel",function(Ue){Y.scaleDByWheel(Ue)}):this.get("scaleDBy")==="drag"&&(Ut.on("dragstart",function(Ue){ht.set("dragging",!0),ht.set("cacheCenter",{x:Ue.x,y:Ue.y}),ht.set("dragPrePos",{x:Ue.x,y:Ue.y})}),Ut.on("drag",function(Ue){Y.scaleDByDrag(Ue)}),Ut.on("dragend",function(Ue){ht.set("dragging",!1)})))}else Ut.attr({x:l.x,y:l.y,r:D/1.5});if(ht.get("showDPercent")){var oe=Math.round((ht.get("d")-ht.get("minD"))/(ht.get("maxD")-ht.get("minD"))*100),Te=ht.get("dPercentText"),Ge=l.y+D/1.5+16;!Te||Te.destroyed?(Te=At.get("group").addShape("text",{attrs:{text:oe+"%",x:l.x,y:Ge,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),ht.set("dPercentText",Te)):Te.attr({text:oe+"%",x:l.x,y:Ge})}ht.set("delegate",Ut)},v.prototype.clear=function(){var l=this.get("graph");this.restoreCache(),l.refreshPositions();var D=this.get("delegate");D&&!D.destroyed&&(D.remove(),D.destroy());var Y=this.get("dPercentText");Y&&!Y.destroyed&&(Y.remove(),Y.destroy())},v.prototype.destroy=function(){this.clear()},v}(s),Q=function(){var kt=function(l,D){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,ht){Y.__proto__=ht}||function(Y,ht){for(var At in ht)Object.prototype.hasOwnProperty.call(ht,At)&&(Y[At]=ht[At])})(l,D)};return function(v,l){function D(){this.constructor=v}kt(v,l),v.prototype=l===null?Object.create(l):(D.prototype=l.prototype,new D)}}();f()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var k=function(kt){function v(){return kt!==null&&kt.apply(this,arguments)||this}return Q(v,kt),v.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(D){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},v.prototype.init=function(){var l=this,D=this.get("graph"),Y=this.get("getContent")(D),ht=Y;Object(r.x)(Y)&&(ht=Object(m.b)(Y));var At=this.get("className");ht.setAttribute("class",At||"g6-component-toolbar");var Ut=this.get("container");Ut||(Ut=this.get("graph").get("container")),Object(r.x)(Ut)&&(Ut=document.getElementById(Ut)),Ut.appendChild(ht),this.set("toolBar",ht);var Yt=this.get("handleClick");ht.addEventListener("click",function(oe){var Te=function(Ue){if(!Ue)return[];if(Ue.composedPath)return Ue.composedPath();for(var We=[],vn=Ue.target;vn;){if(We.push(vn),vn.tagName==="HTML")return We.push(document,window),We;vn=vn.parentElement}return We}(oe).filter(function(Ue){return Ue.nodeName==="LI"});if(Te.length!==0){var Ge=Te[0].getAttribute("code");Ge&&(Yt?Yt(Ge,D):l.handleDefaultOperator(Ge,D))}});var qt=this.get("position");qt&&Object(m.c)(ht,{top:qt.y+"px",left:qt.x+"px"}),this.bindUndoRedo()},v.prototype.bindUndoRedo=function(){var l=this.get("graph"),D=document.querySelector('.g6-component-toolbar li[code="undo"]'),Y=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),ht=document.querySelector('.g6-component-toolbar li[code="redo"]'),At=document.querySelector('.g6-component-toolbar li[code="redo"] svg');D&&Y&&ht&&At&&l.on("stackchange",function(Ut){var Yt=Ut.undoStack,qt=Ut.redoStack,oe=Yt.length,Te=qt.length;oe===1?(D.setAttribute("style","cursor: not-allowed"),Y.setAttribute("style","opacity: 0.4")):(D.removeAttribute("style"),Y.removeAttribute("style")),Te===0?(ht.setAttribute("style","cursor: not-allowed"),At.setAttribute("style","opacity: 0.4")):(ht.removeAttribute("style"),At.removeAttribute("style"))})},v.prototype.undo=function(){var l=this.get("graph"),D=l.getUndoStack();if(D&&D.length!==0){var Y=D.pop();if(Y){var ht=Y.action;l.pushStack(ht,Object(r.c)(Y.data),"redo");var At=Y.data.before;if(ht==="add"&&(At=Y.data.after),!At)return;switch(ht){case"visible":Object.keys(At).forEach(function(Ut){var Yt=At[Ut];Yt&&Yt.forEach(function(qt){var oe=l.findById(qt.id);qt.visible?l.showItem(oe,!1):l.hideItem(oe,!1)})});break;case"render":case"update":Object.keys(At).forEach(function(Ut){var Yt=At[Ut];Yt&&Yt.forEach(function(qt){l.updateItem(qt.id,qt,!1)})});break;case"changedata":l.changeData(At,!1);break;case"delete":Object.keys(At).forEach(function(Ut){var Yt=At[Ut];Yt&&Yt.forEach(function(qt){var oe=qt.itemType;delete qt.itemType,l.addItem(oe,qt,!1)})});break;case"add":Object.keys(At).forEach(function(Ut){var Yt=At[Ut];Yt&&Yt.forEach(function(qt){l.removeItem(qt.id,!1)})});break;case"updateComboTree":Object.keys(At).forEach(function(Ut){var Yt=At[Ut];Yt&&Yt.forEach(function(qt){l.updateComboTree(qt.id,qt.parentId,!1)})})}}}},v.prototype.redo=function(){var l=this.get("graph"),D=l.getRedoStack();if(D&&D.length!==0){var Y=D.pop();if(Y){var ht=Y.action,At=Y.data.after;if(l.pushStack(ht,Object(r.c)(Y.data)),ht==="delete"&&(At=Y.data.before),!At)return;switch(ht){case"visible":Object.keys(At).forEach(function(Ut){var Yt=At[Ut];Yt&&Yt.forEach(function(qt){var oe=l.findById(qt.id);qt.visible?l.showItem(oe,!1):l.hideItem(oe,!1)})});break;case"render":case"update":Object.keys(At).forEach(function(Ut){var Yt=At[Ut];Yt&&Yt.forEach(function(qt){l.updateItem(qt.id,qt,!1)})});break;case"changedata":l.changeData(At,!1);break;case"delete":At.edges&&At.edges.forEach(function(Ut){l.removeItem(Ut.id,!1)}),At.nodes&&At.nodes.forEach(function(Ut){l.removeItem(Ut.id,!1)}),At.combos&&At.combos.forEach(function(Ut){l.removeItem(Ut.id,!1)});break;case"add":Object.keys(At).forEach(function(Ut){var Yt=At[Ut];Yt&&Yt.forEach(function(qt){var oe=qt.itemType;delete qt.itemType,l.addItem(oe,qt,!1)})});break;case"updateComboTree":Object.keys(At).forEach(function(Ut){var Yt=At[Ut];Yt&&Yt.forEach(function(qt){l.updateComboTree(qt.id,qt.parentId,!1)})})}}}},v.prototype.handleDefaultOperator=function(l,D){var Y=D.getZoom();switch(l){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":var ht=1/(1-.05*this.get("zoomSensitivity"));if(ht*Y>(this.get("maxZoom")||D.get("maxZoom")))return;D.zoomTo(Y*ht);break;case"zoomIn":var At=1-.05*this.get("zoomSensitivity");if(At*Y<(this.get("minZoom")||D.get("minZoom")))return;D.zoomTo(Y*At);break;case"realZoom":D.zoomTo(1);break;case"autoZoom":D.fitView([20,20])}},v.prototype.destroy=function(){var l=this.get("toolBar");if(l){var D=this.get("container");D||(D=this.get("graph").get("container")),Object(r.x)(D)&&(D=document.getElementById(D)),D.removeChild(l)}var Y=this.get("handleClick");Y&&l.removeEventListener("click",Y)},v}(s),g=function(){var kt=function(l,D){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,ht){Y.__proto__=ht}||function(Y,ht){for(var At in ht)Object.prototype.hasOwnProperty.call(ht,At)&&(Y[At]=ht[At])})(l,D)};return function(v,l){function D(){this.constructor=v}kt(v,l),v.prototype=l===null?Object.create(l):(D.prototype=l.prototype,new D)}}();f()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var O=function(kt){function v(){return kt!==null&&kt.apply(this,arguments)||this}return g(v,kt),v.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(D){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`+D.item.getType()+`</h4>
          <span class='tooltip-id'>ID\uFF1A`+D.item.getID()+`</span>
        `},shouldBegin:function(D){return!0},itemTypes:["node","edge","combo"]}},v.prototype.getEvents=function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},v.prototype.init=function(){var l=this.get("className")||"g6-component-tooltip",D=Object(m.b)("<div class="+l+"></div>"),Y=this.get("container");Y||(Y=this.get("graph").get("container")),Object(r.x)(Y)&&(Y=document.getElementById(Y)),Object(m.c)(D,{position:"absolute",visibility:"hidden"}),Y.appendChild(D),this.set("tooltip",D)},v.prototype.onMouseEnter=function(l){var D=this.get("itemTypes");if(!l.item||!l.item.getType||D.indexOf(l.item.getType())!==-1){var Y=l.item,ht=this.get("graph");this.currentTarget=Y,this.showTooltip(l),ht.emit("tooltipchange",{item:l.item,action:"show"})}},v.prototype.onMouseMove=function(l){var D=this.get("itemTypes");l.item&&l.item.getType&&D.indexOf(l.item.getType())===-1||this.currentTarget&&l.item===this.currentTarget&&this.showTooltip(l)},v.prototype.onMouseLeave=function(){this.hideTooltip(),this.get("graph").emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},v.prototype.showTooltip=function(l){if(l.item){var D=this.get("itemTypes");if(!l.item.getType||D.indexOf(l.item.getType())!==-1){var Y=this.get("tooltip"),ht=this.get("getContent")(l);Object(r.x)(ht)?Y.innerHTML=ht:Y.innerHTML=ht.outerHTML,this.updatePosition(l)}}},v.prototype.hideTooltip=function(){var l=this.get("tooltip");l&&Object(m.c)(l,{visibility:"hidden"})},v.prototype.updatePosition=function(l){var D=this.get("shouldBegin"),Y=this.get("tooltip");if(D(l)){var ht=this.get("graph"),At=ht.get("width"),Ut=ht.get("height"),Yt=this.get("offsetX")||0,qt=this.get("offsetY")||0,oe=ht.getPointByClient(l.clientX,l.clientY),Te=ht.getCanvasByPoint(oe.x,oe.y),Ge=Te.x,Ue=Te.y;Ge+=Yt,Ue+=qt;var We=Y.getBoundingClientRect();Ge+We.width>At&&(Ge=Ge-We.width-Yt),Ue+We.height>Ut&&(Ue=Ue-We.height-qt),Object(m.c)(Y,{left:Ge+"px",top:Ue+"px",visibility:"visible"})}else Object(m.c)(Y,{visibility:"hidden"})},v.prototype.hide=function(){this.onMouseLeave()},v.prototype.destroy=function(){var l=this.get("tooltip");if(l){var D=this.get("container");D||(D=this.get("graph").get("container")),Object(r.x)(D)&&(D=document.getElementById(D)),D.removeChild(l)}},v}(s),F=t(31),V={};function rt(kt,v){V[kt]=v}var ot=function(){function kt(v){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=v,this.initCfg(),this.init()}return kt.prototype.translate=function(v){return v},kt.prototype.change=function(v){Object(r.a)(this.__cfg__,v),this.init()},kt.prototype.clone=function(){return this.constructor(this.__cfg__)},kt.prototype.getTicks=function(){var v=this;return Object(r.z)(this.ticks,function(l,D){return Object(r.v)(l)?l:{text:v.getText(l,D),tickValue:l,value:v.scale(l)}})},kt.prototype.getText=function(v,l){var D=this.formatter,Y=D?D(v,l):v;return Object(r.s)(Y)||!Object(r.r)(Y.toString)?"":Y.toString()},kt.prototype.getConfig=function(v){return this.__cfg__[v]},kt.prototype.init=function(){Object(r.a)(this,this.__cfg__),this.setDomain(),Object(r.p)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},kt.prototype.initCfg=function(){},kt.prototype.setDomain=function(){},kt.prototype.calculateTicks=function(){var v=this.tickMethod,l=[];if(Object(r.x)(v)){var D=V[v];if(!D)throw new Error("There is no method to to calculate ticks!");l=D(this)}else Object(r.r)(v)&&(l=v(this));return l},kt.prototype.rangeMin=function(){return Object(r.k)(this.range)},kt.prototype.rangeMax=function(){return Object(r.y)(this.range)},kt.prototype.calcPercent=function(v,l,D){return Object(r.t)(v)?(v-l)/(D-l):NaN},kt.prototype.calcValue=function(v,l,D){return l+v*(D-l)},kt}(),st=t(1),Mt=function(kt){function v(){var l=kt!==null&&kt.apply(this,arguments)||this;return l.type="cat",l.isCategory=!0,l.cache=new Map,l}return Object(st.b)(v,kt),v.prototype.translate=function(l){if(this.cache.has(l))return this.cache.get(l);var D=Object(r.l)(this.values,l);return D===-1&&(D=Object(r.t)(l)?l:NaN),this.cache.set(l,D),D},v.prototype.scale=function(l){var D=this.translate(l),Y=this.calcPercent(D,this.min,this.max);return this.calcValue(Y,this.rangeMin(),this.rangeMax())},v.prototype.invert=function(l){var D=this.max-this.min,Y=this.calcPercent(l,this.rangeMin(),this.rangeMax()),ht=Math.round(D*Y)+this.min;return ht<this.min||ht>this.max?NaN:this.values[ht]},v.prototype.getText=function(l){for(var D=[],Y=1;Y<arguments.length;Y++)D[Y-1]=arguments[Y];var ht=l;return Object(r.t)(l)&&!this.values.includes(l)&&(ht=this.values[ht]),kt.prototype.getText.apply(this,Object(st.d)([ht],D))},v.prototype.initCfg=function(){this.tickMethod="cat"},v.prototype.setDomain=function(){if(Object(r.s)(this.getConfig("min"))&&(this.min=0),Object(r.s)(this.getConfig("max"))){var l=this.values.length;this.max=l>1?l-1:l}this.cache&&this.cache.clear()},v}(ot),yt=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,xt="[^\\s]+",Ot=/\[([^]*?)\]/gm;function jt(kt,v){for(var l=[],D=0,Y=kt.length;D<Y;D++)l.push(kt[D].substr(0,v));return l}var Dt=function(v){return function(l,D){var Y=D[v].map(function(ht){return ht.toLowerCase()}).indexOf(l.toLowerCase());return Y>-1?Y:null}};function zt(kt){for(var v=[],l=1;l<arguments.length;l++)v[l-1]=arguments[l];for(var D=0,Y=v;D<Y.length;D++){var ht=Y[D];for(var At in ht)kt[At]=ht[At]}return kt}var Tt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Wt=["January","February","March","April","May","June","July","August","September","October","November","December"],Ht=jt(Wt,3),re={dayNamesShort:jt(Tt,3),dayNames:Tt,monthNamesShort:Ht,monthNames:Wt,amPm:["am","pm"],DoFn:function(v){return v+["th","st","nd","rd"][v%10>3?0:(v-v%10!=10?1:0)*v%10]}},pe=zt({},re),me=function(v){return pe=zt(pe,v)},Se=function(v){return v.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},Le=function(v,l){for(l===void 0&&(l=2),v=String(v);v.length<l;)v="0"+v;return v},Je={D:function(v){return String(v.getDate())},DD:function(v){return Le(v.getDate())},Do:function(v,l){return l.DoFn(v.getDate())},d:function(v){return String(v.getDay())},dd:function(v){return Le(v.getDay())},ddd:function(v,l){return l.dayNamesShort[v.getDay()]},dddd:function(v,l){return l.dayNames[v.getDay()]},M:function(v){return String(v.getMonth()+1)},MM:function(v){return Le(v.getMonth()+1)},MMM:function(v,l){return l.monthNamesShort[v.getMonth()]},MMMM:function(v,l){return l.monthNames[v.getMonth()]},YY:function(v){return Le(String(v.getFullYear()),4).substr(2)},YYYY:function(v){return Le(v.getFullYear(),4)},h:function(v){return String(v.getHours()%12||12)},hh:function(v){return Le(v.getHours()%12||12)},H:function(v){return String(v.getHours())},HH:function(v){return Le(v.getHours())},m:function(v){return String(v.getMinutes())},mm:function(v){return Le(v.getMinutes())},s:function(v){return String(v.getSeconds())},ss:function(v){return Le(v.getSeconds())},S:function(v){return String(Math.round(v.getMilliseconds()/100))},SS:function(v){return Le(Math.round(v.getMilliseconds()/10),2)},SSS:function(v){return Le(v.getMilliseconds(),3)},a:function(v,l){return v.getHours()<12?l.amPm[0]:l.amPm[1]},A:function(v,l){return v.getHours()<12?l.amPm[0].toUpperCase():l.amPm[1].toUpperCase()},ZZ:function(v){var l=v.getTimezoneOffset();return(l>0?"-":"+")+Le(100*Math.floor(Math.abs(l)/60)+Math.abs(l)%60,4)},Z:function(v){var l=v.getTimezoneOffset();return(l>0?"-":"+")+Le(Math.floor(Math.abs(l)/60),2)+":"+Le(Math.abs(l)%60,2)}},On=function(v){return+v-1},gn=[null,"[1-9]\\d?"],Wn=[null,xt],kn=["isPm",xt,function(kt,v){var l=kt.toLowerCase();return l===v.amPm[0]?0:l===v.amPm[1]?1:null}],Vn=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(kt){var v=(kt+"").match(/([+-]|\d\d)/gi);if(v){var l=60*+v[1]+parseInt(v[2],10);return v[0]==="+"?l:-l}return 0}],Dn={D:["day","[1-9]\\d?"],DD:["day","\\d\\d"],Do:["day","[1-9]\\d?"+xt,function(kt){return parseInt(kt,10)}],M:["month","[1-9]\\d?",On],MM:["month","\\d\\d",On],YY:["year","\\d\\d",function(kt){var v=+(""+new Date().getFullYear()).substr(0,2);return+(""+(+kt>68?v-1:v)+kt)}],h:["hour","[1-9]\\d?",void 0,"isPm"],hh:["hour","\\d\\d",void 0,"isPm"],H:["hour","[1-9]\\d?"],HH:["hour","\\d\\d"],m:["minute","[1-9]\\d?"],mm:["minute","\\d\\d"],s:["second","[1-9]\\d?"],ss:["second","\\d\\d"],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(kt){return 100*+kt}],SS:["millisecond","\\d\\d",function(kt){return 10*+kt}],SSS:["millisecond","\\d{3}"],d:gn,dd:gn,ddd:Wn,dddd:Wn,MMM:["month",xt,Dt("monthNamesShort")],MMMM:["month",xt,Dt("monthNames")],a:kn,A:kn,ZZ:Vn,Z:Vn},Nn={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Qn=function(v){return zt(Nn,v)},ir=function(v,l,D){if(l===void 0&&(l=Nn.default),D===void 0&&(D={}),typeof v=="number"&&(v=new Date(v)),Object.prototype.toString.call(v)!=="[object Date]"||isNaN(v.getTime()))throw new Error("Invalid Date pass to format");var Y=[];l=(l=Nn[l]||l).replace(Ot,function(At,Ut){return Y.push(Ut),"@@@"});var ht=zt(zt({},pe),D);return(l=l.replace(yt,function(At){return Je[At](v,ht)})).replace(/@@@/g,function(){return Y.shift()})};function hr(kt,v,l){if(l===void 0&&(l={}),typeof v!="string")throw new Error("Invalid format in fecha parse");if(v=Nn[v]||v,kt.length>1e3)return null;var D={year:new Date().getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},Y=[],ht=[],At=v.replace(Ot,function(Hn,xr){return ht.push(Se(xr)),"@@@"}),Ut={},Yt={};At=Se(At).replace(yt,function(Hn){var xr=Dn[Hn],Or=xr[0],Rr=xr[1],yi=xr[3];if(Ut[Or])throw new Error("Invalid format. "+Or+" specified twice in format");return Ut[Or]=!0,yi&&(Yt[yi]=!0),Y.push(xr),"("+Rr+")"}),Object.keys(Yt).forEach(function(Hn){if(!Ut[Hn])throw new Error("Invalid format. "+Hn+" is required in specified format")}),At=At.replace(/@@@/g,function(){return ht.shift()});var qt=kt.match(new RegExp(At,"i"));if(!qt)return null;for(var oe=zt(zt({},pe),l),Te=1;Te<qt.length;Te++){var Ge=Y[Te-1],Ue=Ge[0],We=Ge[2],vn=We?We(qt[Te],oe):+qt[Te];if(vn==null)return null;D[Ue]=vn}D.isPm===1&&D.hour!=null&&+D.hour!=12?D.hour=+D.hour+12:D.isPm===0&&+D.hour==12&&(D.hour=0);for(var Tn=new Date(D.year,D.month,D.day,D.hour,D.minute,D.second,D.millisecond),Ln=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],Un=(Te=0,Ln.length);Te<Un;Te++)if(Ut[Ln[Te][0]]&&D[Ln[Te][0]]!==Tn[Ln[Te][1]]())return null;return D.timezoneOffset==null?Tn:new Date(Date.UTC(D.year,D.month,D.day,D.hour,D.minute-D.timezoneOffset,D.second,D.millisecond))}var Sr={format:ir,parse:hr,defaultI18n:re,setGlobalDateI18n:me,setGlobalDateMasks:Qn};function mr(kt,v){return(u.format||Sr.format)(kt,v)}function dr(kt){return Object(r.x)(kt)&&(kt=kt.indexOf("T")>0?new Date(kt).getTime():new Date(kt.replace(/-/gi,"/")).getTime()),Object(r.o)(kt)&&(kt=kt.getTime()),kt}var Br=36e5,ii=24*Br,mi=31*ii,Pi=[["HH:mm:ss",1e3],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",6e4],["HH:mm",6e5],["HH:mm",18e5],["HH",Br],["HH",6*Br],["HH",12*Br],["YYYY-MM-DD",ii],["YYYY-MM-DD",4*ii],["YYYY-WW",7*ii],["YYYY-MM",mi],["YYYY-MM",4*mi],["YYYY-MM",6*mi],["YYYY",380*ii]];function sa(kt,v,l){var D,Y=(D=function(Ut){return Ut[1]},function(At,Ut,Yt,qt){for(var oe=Object(r.s)(Yt)?0:Yt,Te=Object(r.s)(qt)?At.length:qt;oe<Te;){var Ge=oe+Te>>>1;D(At[Ge])>Ut?Te=Ge:oe=Ge+1}return oe})(Pi,(v-kt)/l)-1,ht=Pi[Y];return Y<0?ht=Pi[0]:Y>=Pi.length&&(ht=Object(r.y)(Pi)),ht}var Pa=function(kt){function v(){var l=kt!==null&&kt.apply(this,arguments)||this;return l.type="timeCat",l}return Object(st.b)(v,kt),v.prototype.translate=function(l){l=dr(l);var D=this.values.indexOf(l);return D===-1&&(D=Object(r.t)(l)&&l<this.values.length?l:NaN),D},v.prototype.getText=function(l,D){var Y=this.translate(l);if(Y>-1){var ht=this.values[Y],At=this.formatter;return ht=At?At(ht,D):mr(ht,this.mask)}return l},v.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},v.prototype.setDomain=function(){var l=this.values;Object(r.f)(l,function(D,Y){l[Y]=dr(D)}),l.sort(function(D,Y){return D-Y}),kt.prototype.setDomain.call(this)},v}(Mt),Mi=function(kt){function v(){var l=kt!==null&&kt.apply(this,arguments)||this;return l.isContinuous=!0,l}return Object(st.b)(v,kt),v.prototype.scale=function(l){if(Object(r.s)(l))return NaN;var D=this.rangeMin(),Y=this.rangeMax();return this.max===this.min?D:D+this.getScalePercent(l)*(Y-D)},v.prototype.init=function(){kt.prototype.init.call(this);var l=this.ticks,D=Object(r.k)(l),Y=Object(r.y)(l);D<this.min&&(this.min=D),Y>this.max&&(this.max=Y),Object(r.s)(this.minLimit)||(this.min=D),Object(r.s)(this.maxLimit)||(this.max=Y)},v.prototype.setDomain=function(){var l=Object(r.j)(this.values),D=l.min,Y=l.max;Object(r.s)(this.min)&&(this.min=D),Object(r.s)(this.max)&&(this.max=Y),this.min>this.max&&(this.min=D,this.max=Y)},v.prototype.calculateTicks=function(){var l=this,D=kt.prototype.calculateTicks.call(this);return this.nice||(D=Object(r.g)(D,function(Y){return Y>=l.min&&Y<=l.max})),D},v.prototype.getScalePercent=function(l){var D=this.max,Y=this.min;return(l-Y)/(D-Y)},v.prototype.getInvertPercent=function(l){return(l-this.rangeMin())/(this.rangeMax()-this.rangeMin())},v}(ot),Ki=function(kt){function v(){var l=kt!==null&&kt.apply(this,arguments)||this;return l.type="linear",l.isLinear=!0,l}return Object(st.b)(v,kt),v.prototype.invert=function(l){var D=this.getInvertPercent(l);return this.min+D*(this.max-this.min)},v.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},v}(Mi);function fa(kt,v){var l=Math.E;return v>=0?Math.pow(l,Math.log(v)/kt):-1*Math.pow(l,Math.log(-v)/kt)}function oa(kt,v){return kt===1?1:Math.log(v)/Math.log(kt)}function pa(kt,v,l){Object(r.s)(l)&&(l=Math.max.apply(null,kt));var D=l;return Object(r.f)(kt,function(Y){Y>0&&Y<D&&(D=Y)}),D===l&&(D=l/v),D>1&&(D=1),D}var La=function(kt){function v(){var l=kt!==null&&kt.apply(this,arguments)||this;return l.type="log",l}return Object(st.b)(v,kt),v.prototype.invert=function(l){var D,Y=this.base,ht=oa(Y,this.max),At=this.rangeMin(),Ut=this.rangeMax()-At,Yt=this.positiveMin;if(Yt){if(l===0)return 0;var qt=1/(ht-(D=oa(Y,Yt/Y)))*Ut;if(l<qt)return l/qt*Yt}else D=oa(Y,this.min);var oe=(l-At)/Ut*(ht-D)+D;return Math.pow(Y,oe)},v.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},v.prototype.setDomain=function(){kt.prototype.setDomain.call(this);var l=this.min;if(l<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");l===0&&(this.positiveMin=pa(this.values,this.base,this.max))},v.prototype.getScalePercent=function(l){var D=this.max,Y=this.min;if(D===Y||l<=0)return 0;var ht=this.base,At=this.positiveMin;return At&&(Y=1*At/ht),l<At?l/At/(oa(ht,D)-oa(ht,Y)):(oa(ht,l)-oa(ht,Y))/(oa(ht,D)-oa(ht,Y))},v}(Mi),Yr=function(kt){function v(){var l=kt!==null&&kt.apply(this,arguments)||this;return l.type="pow",l}return Object(st.b)(v,kt),v.prototype.invert=function(l){var D=this.getInvertPercent(l),Y=this.exponent,ht=fa(Y,this.max),At=fa(Y,this.min),Ut=D*(ht-At)+At,Yt=Ut>=0?1:-1;return Math.pow(Ut,Y)*Yt},v.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},v.prototype.getScalePercent=function(l){var D=this.max,Y=this.min;if(D===Y)return 0;var ht=this.exponent;return(fa(ht,l)-fa(ht,Y))/(fa(ht,D)-fa(ht,Y))},v}(Mi),Sa=function(kt){function v(){var l=kt!==null&&kt.apply(this,arguments)||this;return l.type="time",l}return Object(st.b)(v,kt),v.prototype.getText=function(l,D){var Y=this.translate(l),ht=this.formatter;return ht?ht(Y,D):mr(Y,this.mask)},v.prototype.scale=function(l){var D=l;return(Object(r.x)(D)||Object(r.o)(D))&&(D=this.translate(D)),kt.prototype.scale.call(this,D)},v.prototype.translate=function(l){return dr(l)},v.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},v.prototype.setDomain=function(){var l=this.values,D=this.getConfig("min"),Y=this.getConfig("max");if(Object(r.s)(D)&&Object(r.t)(D)||(this.min=this.translate(this.min)),Object(r.s)(Y)&&Object(r.t)(Y)||(this.max=this.translate(this.max)),l&&l.length){var ht=[],At=1/0,Ut=At,Yt=0;Object(r.f)(l,function(qt){var oe=dr(qt);if(isNaN(oe))throw new TypeError("Invalid Time: "+qt+" in time scale!");At>oe?(Ut=At,At=oe):Ut>oe&&(Ut=oe),Yt<oe&&(Yt=oe),ht.push(oe)}),l.length>1&&(this.minTickInterval=Ut-At),Object(r.s)(D)&&(this.min=At),Object(r.s)(Y)&&(this.max=Yt)}},v}(Ki),Pr=function(kt){function v(){var l=kt!==null&&kt.apply(this,arguments)||this;return l.type="quantize",l}return Object(st.b)(v,kt),v.prototype.invert=function(l){var D=this.ticks,Y=D.length,ht=this.getInvertPercent(l),At=Math.floor(ht*(Y-1));if(At>=Y-1)return Object(r.y)(D);if(At<0)return Object(r.k)(D);var Ut=D[At],Yt=At/(Y-1);return Ut+(ht-Yt)/((At+1)/(Y-1)-Yt)*(D[At+1]-Ut)},v.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},v.prototype.calculateTicks=function(){var l=kt.prototype.calculateTicks.call(this);return this.nice||(Object(r.y)(l)!==this.max&&l.push(this.max),Object(r.k)(l)!==this.min&&l.unshift(this.min)),l},v.prototype.getScalePercent=function(l){var D=this.ticks;if(l<Object(r.k)(D))return 0;if(l>Object(r.y)(D))return 1;var Y=0;return Object(r.f)(D,function(ht,At){if(!(l>=ht))return!1;Y=At}),Y/(D.length-1)},v}(Mi),si=function(kt){function v(){var l=kt!==null&&kt.apply(this,arguments)||this;return l.type="quantile",l}return Object(st.b)(v,kt),v.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},v}(Pr),ti={};function $r(kt,v){if(function(l){return ti[l]}(kt))throw new Error("type '"+kt+"' existed.");ti[kt]=v}var ui=function(kt){function v(){var l=kt!==null&&kt.apply(this,arguments)||this;return l.type="identity",l.isIdentity=!0,l}return Object(st.b)(v,kt),v.prototype.calculateTicks=function(){return this.values},v.prototype.scale=function(l){return this.values[0]!==l&&Object(r.t)(l)?l:this.range[0]},v.prototype.invert=function(l){var D=this.range;return l<D[0]||l>D[1]?NaN:this.values[0]},v}(ot),li=[1,5,2,2.5,4,3],xi=100*Number.EPSILON;function Ci(kt,v,l,D,Y,ht){var At=Object(r.E)(v),Ut=Object(r.l)(v,kt),Yt=0,qt=function(oe,Te){return(oe%Te+Te)%Te}(D,ht);return(qt<xi||ht-qt<xi)&&D<=0&&Y>=0&&(Yt=1),1-Ut/(At-1)-l+Yt}function di(kt,v,l){var D=Object(r.E)(v);return 1-Object(r.l)(v,kt)/(D-1)-l+1}function Ti(kt,v,l,D,Y,ht){var At=(kt-1)/(ht-Y),Ut=(v-1)/(Math.max(ht,D)-Math.min(l,Y));return 2-Math.max(At/Ut,Ut/At)}function pi(kt,v){return kt>=v?2-(kt-1)/(v-1):1}function Ni(kt,v,l,D){var Y=v-kt;return 1-.5*(Math.pow(v-D,2)+Math.pow(kt-l,2))/Math.pow(.1*Y,2)}function Bi(kt,v,l){var D=v-kt;if(l>D){var Y=(l-D)/2;return 1-Math.pow(Y,2)/Math.pow(.1*D,2)}return 1}function Fi(kt,v,l,D,Y,ht){if(l===void 0&&(l=5),D===void 0&&(D=!0),Y===void 0&&(Y=li),ht===void 0&&(ht=[.25,.2,.5,.05]),typeof kt!="number"||typeof v!="number")return{min:0,max:0,ticks:[]};if(kt===v||l===1)return{min:kt,max:v,ticks:[kt]};for(var At={score:-2,lmin:0,lmax:0,lstep:0},Ut=1;Ut<1/0;){for(var Yt=0,qt=Y;Yt<qt.length;Yt++){var oe=qt[Yt],Te=di(oe,Y,Ut);if(Number.isNaN(Te))throw new Error("NaN");if(ht[0]*Te+ht[1]+ht[2]+ht[3]<At.score){Ut=1/0;break}for(var Ge=2;Ge<1/0;){var Ue=pi(Ge,l);if(ht[0]*Te+ht[1]+ht[2]*Ue+ht[3]<At.score)break;for(var We=(v-kt)/(Ge+1)/Ut/oe,vn=Math.ceil(Math.log10(We));vn<1/0;){var Tn=Ut*oe*Math.pow(10,vn),Ln=Bi(kt,v,Tn*(Ge-1));if(ht[0]*Te+ht[1]*Ln+ht[2]*Ue+ht[3]<At.score)break;var Un=Math.floor(v/Tn)*Ut-(Ge-1)*Ut,Hn=Math.ceil(kt/Tn)*Ut;if(Un>Hn)vn+=1;else{for(var xr=Un;xr<=Hn;xr+=1){var Or=xr*(Tn/Ut),Rr=Or+Tn*(Ge-1),yi=Tn,Xi=Ci(oe,Y,Ut,Or,Rr,yi),Zr=Ni(kt,v,Or,Rr),ki=Ti(Ge,l,kt,v,Or,Rr),Ba=ht[0]*Xi+ht[1]*Zr+ht[2]*ki+1*ht[3];Ba>At.score&&(!D||Or<=kt&&Rr>=v)&&(At.lmin=Or,At.lmax=Rr,At.lstep=yi,At.score=Ba)}vn+=1}}Ge+=1}}Ut+=1}for(var Ha=Number.isInteger(At.lstep)?0:Math.ceil(Math.abs(Math.log10(At.lstep))),Ka=[],Ja=At.lmin;Ja<=At.lmax;Ja+=At.lstep)Ka.push(Ja);var ya=Ha?Object(r.z)(Ka,function(Mo){return Number.parseFloat(Mo.toFixed(Ha))}):Ka;return{min:Math.min(kt,Object(r.k)(ya)),max:Math.max(v,Object(r.y)(ya)),ticks:ya}}function ma(kt){var v=kt.values,l=kt.tickInterval,D=kt.tickCount,Y=v;if(Object(r.t)(l))return Object(r.g)(Y,function(Yt,qt){return qt%l==0});var ht=kt.min,At=kt.max;if(Object(r.s)(ht)&&(ht=0),Object(r.s)(At)&&(At=v.length-1),Object(r.t)(D)&&D<At-ht){var Ut=Fi(ht,At,D,!1,[1,2,5,3,4,7,6,8,9]).ticks;return Object(r.g)(Ut,function(Yt){return Yt>=ht&&Yt<=At}).map(function(Yt){return v[Yt]})}return v.slice(ht,At+1)}var ua=Math.sqrt(50),Ra=Math.sqrt(10),xa=Math.sqrt(2),Ma=function(){function kt(){this._domain=[0,1]}return kt.prototype.domain=function(v){return v?(this._domain=Array.from(v,Number),this):this._domain.slice()},kt.prototype.nice=function(v){var l,D;v===void 0&&(v=5);var Y,ht=this._domain.slice(),At=0,Ut=this._domain.length-1,Yt=this._domain[At],qt=this._domain[Ut];return qt<Yt&&(Yt=(l=[qt,Yt])[0],qt=l[1],At=(D=[Ut,At])[0],Ut=D[1]),(Y=Qi(Yt,qt,v))>0?Y=Qi(Yt=Math.floor(Yt/Y)*Y,qt=Math.ceil(qt/Y)*Y,v):Y<0&&(Y=Qi(Yt=Math.ceil(Yt*Y)/Y,qt=Math.floor(qt*Y)/Y,v)),Y>0?(ht[At]=Math.floor(Yt/Y)*Y,ht[Ut]=Math.ceil(qt/Y)*Y,this.domain(ht)):Y<0&&(ht[At]=Math.ceil(Yt*Y)/Y,ht[Ut]=Math.floor(qt*Y)/Y,this.domain(ht)),this},kt.prototype.ticks=function(v){return v===void 0&&(v=5),function(l,D,Y){var ht,At,Ut,Yt,qt=-1;if(Y=+Y,(l=+l)==(D=+D)&&Y>0)return[l];if((ht=D<l)&&(At=l,l=D,D=At),(Yt=Qi(l,D,Y))===0||!isFinite(Yt))return[];if(Yt>0)for(l=Math.ceil(l/Yt),D=Math.floor(D/Yt),Ut=new Array(At=Math.ceil(D-l+1));++qt<At;)Ut[qt]=(l+qt)*Yt;else for(l=Math.floor(l*Yt),D=Math.ceil(D*Yt),Ut=new Array(At=Math.ceil(l-D+1));++qt<At;)Ut[qt]=(l-qt)/Yt;return ht&&Ut.reverse(),Ut}(this._domain[0],this._domain[this._domain.length-1],v||5)},kt}();function Qi(kt,v,l){var D=(v-kt)/Math.max(0,l),Y=Math.floor(Math.log(D)/Math.LN10),ht=D/Math.pow(10,Y);return Y>=0?(ht>=ua?10:ht>=Ra?5:ht>=xa?2:1)*Math.pow(10,Y):-Math.pow(10,-Y)/(ht>=ua?10:ht>=Ra?5:ht>=xa?2:1)}function ka(kt,v,l){return(l==="ceil"?Math.ceil(kt/v):l==="floor"?Math.floor(kt/v):Math.round(kt/v))*v}function vo(kt,v,l){var D=ka(kt,l,"floor"),Y=ka(v,l,"ceil");D=Object(r.h)(D,l),Y=Object(r.h)(Y,l);for(var ht=[],At=D;At<=Y;At+=l){var Ut=Object(r.h)(At,l);ht.push(Ut)}return{min:D,max:Y,ticks:ht}}function za(kt,v,l){var D,Y=kt.minLimit,ht=kt.maxLimit,At=kt.min,Ut=kt.max,Yt=kt.tickCount,qt=Yt===void 0?5:Yt,oe=Object(r.s)(Y)?Object(r.s)(v)?At:v:Y,Te=Object(r.s)(ht)?Object(r.s)(l)?Ut:l:ht;if(oe>Te&&(Te=(D=[oe,Te])[0],oe=D[1]),qt<=2)return[oe,Te];for(var Ge=(Te-oe)/(qt-1),Ue=[],We=0;We<qt;We++)Ue.push(oe+Ge*We);return Ue}function Ga(kt,v,l){l===void 0&&(l=5);var D={max:0,min:0,ticks:[]};if(kt===v)return{max:v,min:kt,ticks:[kt]};var Y=(v-kt)/l,ht=Math.pow(10,Math.floor(Math.log10(Y))),At=ht<1?Math.ceil(Math.abs(Math.log10(ht))):0,Ut=ht;2*ht-Y<1.5*(Y-Ut)&&5*ht-Y<2.75*(Y-(Ut=2*ht))&&10*ht-Y<1.5*(Y-(Ut=5*ht))&&(Ut=10*ht);var Yt=Math.ceil(v/Ut),qt=Math.floor(kt/Ut);D.max=Math.max(Yt*Ut,v),D.min=Math.min(qt*Ut,kt);for(var oe=Number.parseFloat((qt*Ut).toFixed(At));oe<v;)D.ticks.push(oe),oe+=Ut,At&&(oe=Number.parseFloat(oe.toFixed(At)));return D.ticks.push(oe),D}function eo(kt,v){var l=kt.length*v;return v===1?kt[kt.length-1]:v===0?kt[0]:l%1!=0?kt[Math.ceil(l)-1]:kt.length%2==0?(kt[l-1]+kt[l])/2:kt[l]}function ae(kt){return new Date(kt).getFullYear()}function Kt(kt){return new Date(kt,0,1).getTime()}function te(kt){return new Date(kt).getMonth()}function Oe(kt,v){return new Date(kt,v,1).getTime()}rt("cat",ma),rt("time-cat",function(kt){var v=ma(kt),l=Object(r.y)(kt.values);return l!==Object(r.y)(v)&&v.push(l),v}),rt("wilkinson-extended",function(kt){var v=kt.min,l=kt.max,D=kt.tickCount,Y=kt.nice,ht=kt.tickInterval,At=kt.minLimit,Ut=kt.maxLimit,Yt=Fi(v,l,D,Y).ticks;return Object(r.s)(At)&&Object(r.s)(Ut)?ht?vo(v,l,ht).ticks:Yt:za(kt,Object(r.k)(Yt),Object(r.y)(Yt))}),rt("r-pretty",function(kt){var v=kt.min,l=kt.max,D=kt.tickCount,Y=kt.tickInterval,ht=kt.minLimit,At=kt.maxLimit,Ut=Ga(v,l,D).ticks;return Object(r.s)(ht)&&Object(r.s)(At)?Y?vo(v,l,Y).ticks:Ut:za(kt,Object(r.k)(Ut),Object(r.y)(Ut))}),rt("time",function(kt){var v=kt.min,l=kt.max,D=kt.minTickInterval,Y=kt.tickInterval,ht=kt.tickCount;if(Y)ht=Math.ceil((l-v)/Y);else{var At=(l-v)/(Y=sa(v,l,ht)[1])/ht;At>1&&(Y*=Math.ceil(At)),D&&Y<D&&(Y=D)}for(var Ut=[],Yt=v;Yt<l+Y;Yt+=Y)Ut.push(Yt);return Ut}),rt("time-pretty",function(kt){var v=kt.min,l=kt.max,D=kt.minTickInterval,Y=kt.tickCount,ht=kt.tickInterval,At=[];ht||(ht=(l-v)/Y,D&&ht<D&&(ht=D));var Ut=ae(v);if(ht>31536e6)for(var Yt=ae(l),qt=Math.ceil(ht/31536e6),oe=Ut;oe<=Yt+qt;oe+=qt)At.push(Kt(oe));else if(ht>mi){var Te=Math.ceil(ht/mi),Ge=te(v),Ue=function(Ka,Ja){var ya=ae(Ka),Mo=ae(Ja),jo=te(Ka);return 12*(Mo-ya)+(te(Ja)-jo)%12}(v,l);for(oe=0;oe<=Ue+Te;oe+=Te)At.push(Oe(Ut,oe+Ge))}else if(ht>ii){var We=(Hn=new Date(v)).getFullYear(),vn=Hn.getMonth(),Tn=Hn.getDate(),Ln=Math.ceil(ht/ii),Un=function(Ka,Ja){return Math.ceil((Ja-Ka)/ii)}(v,l);for(oe=0;oe<Un+Ln;oe+=Ln)At.push(new Date(We,vn,Tn+oe).getTime())}else if(ht>Br){We=(Hn=new Date(v)).getFullYear(),vn=Hn.getMonth(),Ln=Hn.getDate();var Hn,xr=Hn.getHours(),Or=Math.ceil(ht/Br),Rr=function(Ka,Ja){return Math.ceil((Ja-Ka)/Br)}(v,l);for(oe=0;oe<=Rr+Or;oe+=Or)At.push(new Date(We,vn,Ln,xr+oe).getTime())}else if(ht>6e4){var yi=function(Ka,Ja){return Math.ceil((Ja-Ka)/6e4)}(v,l),Xi=Math.ceil(ht/6e4);for(oe=0;oe<=yi+Xi;oe+=Xi)At.push(v+6e4*oe)}else{var Zr=ht;Zr<1e3&&(Zr=1e3);var ki=1e3*Math.floor(v/1e3),Ba=Math.ceil((l-v)/1e3),Ha=Math.ceil(Zr/1e3);for(oe=0;oe<Ba+Ha;oe+=Ha)At.push(ki+1e3*oe)}return At.length>=512&&console.warn("Notice: current ticks length("+At.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+ht+") is too small, increase the value to solve the problem!"),At}),rt("log",function(kt){var v,l=kt.base,D=kt.tickCount,Y=kt.min,ht=kt.max,At=kt.values,Ut=oa(l,ht);if(Y>0)v=Math.floor(oa(l,Y));else{var Yt=pa(At,l,ht);v=Math.floor(oa(l,Yt))}for(var qt=Ut-v,oe=Math.ceil(qt/D),Te=[],Ge=v;Ge<Ut+oe;Ge+=oe)Te.push(Math.pow(l,Ge));return Y<=0&&Te.unshift(0),Te}),rt("pow",function(kt){var v=kt.exponent,l=kt.tickCount,D=Math.ceil(fa(v,kt.max));return Ga(Math.floor(fa(v,kt.min)),D,l).ticks.map(function(Y){var ht=Y>=0?1:-1;return Math.pow(Y,v)*ht})}),rt("quantile",function(kt){var v=kt.tickCount,l=kt.values;if(!l||!l.length)return[];for(var D=l.slice().sort(function(Ut,Yt){return Ut-Yt}),Y=[],ht=0;ht<v;ht++){var At=ht/(v-1);Y.push(eo(D,At))}return Y}),rt("d3-linear",function(kt){var v=kt.min,l=kt.max,D=kt.tickInterval,Y=kt.minLimit,ht=kt.maxLimit,At=function(Ut){var Yt=Ut.min,qt=Ut.max,oe=Ut.nice,Te=Ut.tickCount,Ge=new Ma;return Ge.domain([Yt,qt]),oe&&Ge.nice(Te),Ge.ticks(Te)}(kt);return Object(r.s)(Y)&&Object(r.s)(ht)?D?vo(v,l,D).ticks:At:za(kt,Object(r.k)(At),Object(r.y)(At))}),$r("cat",Mt),$r("category",Mt),$r("identity",ui),$r("linear",Ki),$r("log",La),$r("pow",Yr),$r("time",Sa),$r("timeCat",Pa),$r("quantize",Pr),$r("quantile",si);var Ze=function(){for(var v=0,l=0,D=arguments.length;l<D;l++)v+=arguments[l].length;var Y=Array(v),ht=0;for(l=0;l<D;l++)for(var At=arguments[l],Ut=0,Yt=At.length;Ut<Yt;Ut++,ht++)Y[ht]=At[Ut];return Y};function An(kt){return function(v){return Object(r.z)(v,function(l,D){return[D===0?"M":"L",l[0],l[1]]})}(kt)}function qn(kt,v,l,D){D===void 0&&(D=!0);var Y=new Ki({values:kt}),ht=new Mt({values:Object(r.z)(kt,function(Ut,Yt){return Yt})}),At=Object(r.z)(kt,function(Ut,Yt){return[ht.scale(Yt)*v,l-Y.scale(Ut)*l]});return D?function(Ut){if(Ut.length<=2)return An(Ut);var Yt=[];Object(r.f)(Ut,function(Ue){Object(r.q)(Ue,Yt.slice(Yt.length-2))||Yt.push(Ue[0],Ue[1])});var qt=F.a(Yt,!1),oe=Object(r.k)(Ut),Te=oe[0],Ge=oe[1];return qt.unshift(["M",Te,Ge]),qt}(At):An(At)}function rr(kt,v,l){for(var D=new Ki({values:kt}),Y=new Mt({values:Object(r.z)(kt,function(oe,Te){return Te})}),ht=Object(r.z)(kt,function(oe,Te){return[Y.scale(Te)*v,l-D.scale(oe)*l]}),At=[],Ut=0;Ut<ht.length;Ut++){var Yt=ht[Ut],qt=sn({x:Yt[0],y:Yt[1],y0:l,size:5});At.push.apply(At,qt)}return function(oe,Te){Te===void 0&&(Te=!0);var Ge=[],Ue=oe[0];Ge.push(["M",Ue.x,Ue.y]);for(var We=1,vn=oe.length;We<vn;We++)Ge.push(["L",oe[We].x,oe[We].y]);return Te&&(Ge.push(["L",Ue.x,Ue.y]),Ge.push(["z"])),Ge}(At)}function tn(kt,v,l,D){var Y=Ze(kt),ht=function(At,Ut){var Yt=new Ki({values:At}),qt=Math.max(0,Yt.min);return Ut-Yt.scale(qt)*Ut}(D,l);return Y.push(["L",v,ht]),Y.push(["L",0,ht]),Y.push(["Z"]),Y}function sn(kt){var v,l,D,Y,ht=kt.x,At=kt.y,Ut=kt.y0,Yt=kt.size;Object(r.m)(At)?(v=At[0],l=At[1]):(v=Ut,l=At),Object(r.m)(ht)?(D=ht[0],Y=ht[1]):(D=ht-Yt/2,Y=ht+Yt/2);var qt=[{x:D,y:v},{x:D,y:l}];return qt.push({x:Y,y:l},{x:Y,y:v}),qt}var un=function(){return(un=Object.assign||function(v){for(var l,D=1,Y=arguments.length;D<Y;D++)for(var ht in l=arguments[D])Object.prototype.hasOwnProperty.call(l,ht)&&(v[ht]=l[ht]);return v}).apply(this,arguments)},ur={stroke:"#C5C5C5",strokeOpacity:.85},jr={fill:"#CACED4",opacity:.85},wr=function(){function kt(v){var l=v.x,D=l===void 0?0:l,Y=v.y,ht=Y===void 0?0:Y,At=v.width,Ut=At===void 0?200:At,Yt=v.height,qt=Yt===void 0?26:Yt,oe=v.smooth,Te=oe===void 0||oe,Ge=v.isArea,Ue=Ge!==void 0&&Ge,We=v.data,vn=We===void 0?[]:We,Tn=v.lineStyle,Ln=v.areaStyle,Un=v.group,Hn=v.interval,xr=Hn===void 0?null:Hn;this.group=Un,this.x=D,this.y=ht,this.width=Ut,this.height=qt,this.data=vn,this.smooth=Te,this.isArea=Ue,this.lineStyle=Object.assign({},ur,Tn),this.areaStyle=Object.assign({},jr,Ln),this.intervalConfig=xr,this.renderLine()}return kt.prototype.renderLine=function(){var v=this,l=v.x,D=v.y,Y=v.width,ht=v.height,At=v.data,Ut=v.smooth,Yt=v.isArea,qt=(v.backgroundStyle,v.lineStyle),oe=v.areaStyle,Te=this.group.addGroup({name:"trend-group"});if(At){var Ge=qn(At,Y,ht,Ut);if(Te.addShape("path",{attrs:un({path:Ge},qt)}),Yt){var Ue=tn(Ge,Y,ht,At);Te.addShape("path",{attrs:un({path:Ue},oe)})}}this.intervalConfig&&Te.addShape("path",{attrs:un({path:rr(this.intervalConfig.data,Y,ht)},this.intervalConfig.style)}),Te.move(l,D)},kt.prototype.destory=function(){this.group.destroy()},kt}(),yr=function(){return(yr=Object.assign||function(v){for(var l,D=1,Y=arguments.length;D<Y;D++)for(var ht in l=arguments[D])Object.prototype.hasOwnProperty.call(l,ht)&&(v[ht]=l[ht]);return v}).apply(this,arguments)},ni={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},_r={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},Fr=function(){function kt(v){var l=v.group,D=v.name,Y=v.type,ht=v.x,At=ht===void 0?0:ht,Ut=v.y,Yt=Ut===void 0?0:Ut,qt=v.width,oe=qt===void 0?2:qt,Te=v.height,Ge=Te===void 0?24:Te,Ue=v.style,We=Ue===void 0?{}:Ue;this.group=l,this.name=D,this.handleType=Y,this.x=At,this.y=Yt,this.width=oe,this.height=Ge,Y==="trend"?this.style=yr(yr({},ni),We):Y==="simple"&&(this.style=yr(yr({},_r),We)),this.renderHandle()}return kt.prototype.setX=function(v){this.setXY(v,void 0)},kt.prototype.setY=function(v){this.setXY(void 0,v)},kt.prototype.setXY=function(v,l){Object(r.t)(v)&&(this.x=v),Object(r.t)(l)&&(this.y=l),this.updateXY()},kt.prototype.renderHandle=function(){var v=this.width,l=this.height,D=this.style,Y=this.name,ht=D.fill,At=D.stroke,Ut=D.radius,Yt=D.opacity,qt=D.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.background=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:v,height:l,fill:ht,stroke:At,radius:Ut,opacity:Yt,cursor:qt},name:Y+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:v/2,y:0,r:2*v,fill:ht,stroke:At,radius:Ut,opacity:Yt,cursor:qt},name:Y+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:v/2,y:l,r:2*v,fill:ht,stroke:At,radius:Ut,opacity:Yt,cursor:qt},name:Y+"-handler"})):this.handleType==="simple"&&(this.handleGroup.addShape("circle",{attrs:{x:v/2,y:l/2,r:2*v,fill:ht,stroke:At,radius:Ut,opacity:Yt,cursor:qt},name:Y+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:v/2,y:l/2,r:2*v,fill:ht,stroke:At,radius:Ut,opacity:Yt,cursor:qt},name:Y+"-handler"})),this.updateXY(),this.handleType==="trend"&&this.bindEvents()},kt.prototype.bindEvents=function(){var v=this,l=this.name;this.handleGroup.on(l+"-handler:mouseenter",function(){var D=v.style.highLightFill;v.background.attr("fill",D)}),this.handleGroup.on(l+"-handler:mouseleave",function(){var D=v.style.fill;v.background.attr("fill",D)})},kt.prototype.show=function(){this.handleGroup.show()},kt.prototype.hide=function(){this.handleGroup.hide()},kt.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},kt}(),Lr=function(){return(Lr=Object.assign||function(v){for(var l,D=1,Y=arguments.length;D<Y;D++)for(var ht in l=arguments[D])Object.prototype.hasOwnProperty.call(l,ht)&&(v[ht]=l[ht]);return v}).apply(this,arguments)},Gr=function(){function kt(v){this.config=Object(r.e)({},v),this.init()}return kt.prototype.update=function(v){this.config=Object(r.e)({},this.config,v),this.updateElement(),this.renderMarker()},kt.prototype.init=function(){this.initElement(),this.renderMarker()},kt.prototype.initElement=function(){var v=this.config,l=v.group,D=v.style;this.circle=l.addShape("circle",{attrs:Lr({x:this.config.x,y:this.config.y,r:this.config.r},D)}),this.startMarker=l.addShape("path",{attrs:{path:this.getStartMarkerPath(),fill:"#ccc"},name:"playPauseBtn"}),this.pauseGroupMarker=l.addGroup();var Y=1/4*this.config.r,ht=.5*this.config.r*Math.sqrt(3);this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x-.375*this.config.r,y:this.config.y-ht/2,width:2.5*Y,height:ht,fill:"#fff"},name:"playPauseBtn"}),this.pauseLeftMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x-.375*this.config.r,y:this.config.y-ht/2,width:Y,height:ht,fill:"#ccc"},name:"playPauseBtn"}),this.pauseRightMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x+1/8*this.config.r,y:this.config.y-ht/2,width:Y,height:ht,fill:"#ccc"},name:"playPauseBtn"})},kt.prototype.updateElement=function(){this.circle.attr("x",this.config.x),this.circle.attr("y",this.config.y),this.circle.attr("r",this.config.r),this.startMarker.attr("path",this.getStartMarkerPath());var v=1/4*this.config.r,l=.5*this.config.r*Math.sqrt(3);this.pauseLeftMarker.attr("x",this.config.x-.375*this.config.r),this.pauseLeftMarker.attr("y",this.config.y-l/2),this.pauseLeftMarker.attr("width",v),this.pauseLeftMarker.attr("height",l),this.pauseRightMarker.attr("x",this.config.x+1/8*this.config.r),this.pauseRightMarker.attr("y",this.config.y-l/2),this.pauseRightMarker.attr("width",v),this.pauseRightMarker.attr("height",l)},kt.prototype.renderMarker=function(){this.config.isPlay?(this.startMarker.hide(),this.pauseGroupMarker.show()):(this.startMarker.show(),this.pauseGroupMarker.hide())},kt.prototype.getStartMarkerPath=function(){var v=.5*this.config.r*Math.sqrt(3);return[["M",this.config.x-v/Math.sqrt(3)/2,this.config.y-v/2],["L",this.config.x+v/Math.sqrt(3),this.config.y],["L",this.config.x-v/Math.sqrt(3)/2,this.config.y+v/2]]},kt}(),Hr=function(){return(Hr=Object.assign||function(v){for(var l,D=1,Y=arguments.length;D<Y;D++)for(var ht in l=arguments[D])Object.prototype.hasOwnProperty.call(l,ht)&&(v[ht]=l[ht]);return v}).apply(this,arguments)},ei={fill:"#607889",stroke:"#607889"},Kr={fill:"#fff"},Qr={fill:"green"},Oi={speed:2,loop:!1,fill:"#fff",stroke:"#fff",hiddleToggle:!1,preBtnStyle:{fill:"#ccc",stroke:"#ccc"},nextBtnStyle:{fill:"#ccc",stroke:"#ccc"},playBtnStyle:{fill:"#fff",stroke:"#ccc"}},Ri=function(){function kt(v){this.controllerCfg=Object(r.e)({},Oi,v),this.group=v.group,this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType="range",this.fontFamily=v.fontFamily||"Arial, sans-serif",this.init()}return kt.prototype.init=function(){this.renderPlayButton()},kt.prototype.getNextMarkerPath=function(v,l,D){return[["M",v,l-D],["L",v+D,l],["L",v,l+D]]},kt.prototype.getPreMarkerPath=function(v,l,D){return[["M",v,l-D],["L",v-D,l],["L",v,l+D]]},kt.prototype.renderPlayButton=function(){var v=this.controllerCfg,l=v.width,D=v.height,Y=v.x,ht=v.y,At=v.hiddleToggle,Ut=v.fill,Yt=Ut===void 0?"#ccc":Ut,qt=v.stroke,oe=qt===void 0?"green":qt,Te=v.playBtnStyle,Ge=Te===void 0?ei:Te,Ue=v.preBtnStyle,We=Ue===void 0?Kr:Ue,vn=v.nextBtnStyle,Tn=vn===void 0?Qr:vn,Ln=D/2-5,Un=ht+10,Hn=this.group.addShape("rect",{attrs:{x:Y,y:Un,width:l,height:D,stroke:oe,fill:Yt},name:"container-rect"});this.playButton?this.playButton.update({x:l/2,y:Un,r:Ln}):this.playButton=new Gr({group:this.group,x:l/2,y:Un+Ln+5,r:Ln,isPlay:this.isPlay,style:Ge}),this.group.addShape("path",{attrs:Hr({path:this.getPreMarkerPath(l/2-5*Ln,Un+Ln+5,.5*Ln)},We),name:"preStepBtn"}),this.group.addShape("path",{attrs:Hr({path:this.getPreMarkerPath(l/2-4.5*Ln,Un+Ln+5,.5*Ln)},We),name:"preStepBtn"}),this.group.addShape("path",{attrs:Hr({path:this.getNextMarkerPath(l/2+5*Ln,Un+Ln+5,.5*Ln)},Tn),name:"nextStepBtn"}),this.group.addShape("path",{attrs:Hr({path:this.getNextMarkerPath(l/2+4.5*Ln,Un+Ln+5,.5*Ln)},Tn),name:"nextStepBtn"}),Hn.toBack(),this.renderSpeedBtn(),At||this.renderToggleTime(),this.bindEvent()},kt.prototype.renderSpeedBtn=function(){var v=this.controllerCfg,l=v.y,D=v.width,Y=v.hiddleToggle,ht=this.group.addGroup({name:"speed-group"});this.speedGroup=ht;for(var At=1,Ut=[],Yt=9,qt=0;qt<5;qt++){var oe=l+15+qt*(qt+1)+At;ht.addShape("rect",{attrs:{x:D-(Y?50:110),y:oe,width:15,height:2,fill:"#ccc"},speed:Yt,name:"speed-rect"}),this.speedAxisY.push(oe),Ut.push(Yt),Yt-=2,At++}for(qt=0;qt<4;qt++)ht.addShape("rect",{attrs:{x:D-(Y?50:110),y:this.speedAxisY[qt]+2,width:15,height:2*qt+1,fill:"#fff",opacity:.3},speed:Ut[qt]-1,name:"speed-rect"});this.speedText=ht.addShape("text",{attrs:{x:D-(Y?50:110)+20,y:this.speedAxisY[1]+15,text:"1.0X",fill:"#ccc",fontFamily:this.fontFamily||"Arial, sans-serif"}}),this.speedPoint=ht.addShape("path",{attrs:{path:this.getPath(D-(Y?50:110),this.speedAxisY[4]),fill:"#ccc"}})},kt.prototype.getPath=function(v,l){return[["M",v,l],["L",v-12,l-6],["L",v-12,l+6],["Z"]]},kt.prototype.renderToggleTime=function(){var v,l=this.controllerCfg.width;this.toggleGroup=this.group.addGroup({name:"toggle-group"}),this.toggleGroup.addShape("rect",{attrs:{width:14,height:14,x:l-50,y:this.speedAxisY[1],fill:"#fff",stroke:"#ccc",lineWidth:2,radius:3},isChecked:!1,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:{path:[["M",l-50+3,this.speedAxisY[1]+6],["L",l-50+7,this.speedAxisY[1]+10],["L",l-50+12,this.speedAxisY[1]+4]],stroke:"green",lineWidth:3},capture:!1}),this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:{text:((v=this.controllerCfg)===null||v===void 0?void 0:v.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:l-50+20,y:this.speedAxisY[1]+15,fill:"#ccc",fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}})},kt.prototype.bindEvent=function(){var v=this,l=this.controllerCfg,D=l.width,Y=l.hiddleToggle;this.speedGroup.on("speed-rect:click",function(ht){v.speedPoint.attr("path",v.getPath(D-(Y?50:110),ht.y)),v.currentSpeed=ht.target.get("speed"),v.speedText.attr("text",v.currentSpeed+".0X"),v.group.emit("timebarConfigChanged",{speed:v.currentSpeed,type:v.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(ht){var At,Ut,Yt=ht.target.get("isChecked");Yt?(v.checkedIcon.hide(),v.checkedText.attr("text",((Ut=v.controllerCfg)===null||Ut===void 0?void 0:Ut.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),v.currentType="range"):(v.checkedIcon.show(),v.checkedText.attr("text",((At=v.controllerCfg)===null||At===void 0?void 0:At.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),v.currentType="single"),ht.target.set("isChecked",!Yt),v.group.emit("timebarConfigChanged",{type:v.currentType,speed:v.currentSpeed})})},kt.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},kt}(),Si=function(){return(Si=Object.assign||function(v){for(var l,D=1,Y=arguments.length;D<Y;D++)for(var ht in l=arguments[D])Object.prototype.hasOwnProperty.call(l,ht)&&(v[ht]=l[ht]);return v}).apply(this,arguments)},Gi={fill:"#416180",opacity:.05},ca={fill:"#416180",opacity:.15,radius:5},ha={fill:"#5B8FF9",opacity:.3,cursor:"move"},na={width:2,height:24},Zi={textBaseline:"middle",fill:"#000",opacity:.45},ve=function(){function kt(v){var l=this;this.prevX=0,this.onMouseDown=function(Ao){return function($a){l.currentHandler=Ao;var ns=$a.originalEvent;ns.stopPropagation(),ns.preventDefault(),l.prevX=Object(r.i)(ns,"touches.0.pageX",ns.pageX);var ba=l.canvas.get("container");ba.addEventListener("mousemove",l.onMouseMove),ba.addEventListener("mouseup",l.onMouseUp),ba.addEventListener("mouseleave",l.onMouseUp),ba.addEventListener("touchmove",l.onMouseMove),ba.addEventListener("touchend",l.onMouseUp),ba.addEventListener("touchcancel",l.onMouseUp)}},this.onMouseMove=function(Ao){Ao.stopPropagation(),Ao.preventDefault();var $a=Object(r.i)(Ao,"touches.0.pageX",Ao.pageX),ns=$a-l.prevX,ba=l.adjustOffsetRange(ns/l.width);l.updateStartEnd(ba),l.updateUI(),l.prevX=$a},this.onMouseUp=function(){l.currentHandler&&(l.currentHandler=void 0);var Ao=l.canvas.get("container");Ao&&(Ao.removeEventListener("mousemove",l.onMouseMove),Ao.removeEventListener("mouseup",l.onMouseUp),Ao.removeEventListener("mouseleave",l.onMouseUp),Ao.removeEventListener("touchmove",l.onMouseMove),Ao.removeEventListener("touchend",l.onMouseUp),Ao.removeEventListener("touchcancel",l.onMouseUp))};var D=v.x,Y=D===void 0?0:D,ht=v.y,At=ht===void 0?0:ht,Ut=v.width,Yt=Ut===void 0?100:Ut,qt=v.height,oe=v.padding,Te=oe===void 0?10:oe,Ge=v.trendCfg,Ue=v.controllerCfg,We=Ue===void 0?{speed:1}:Ue,vn=v.backgroundStyle,Tn=vn===void 0?{}:vn,Ln=v.foregroundStyle,Un=Ln===void 0?{}:Ln,Hn=v.handlerStyle,xr=Hn===void 0?{}:Hn,Or=v.textStyle,Rr=Or===void 0?{}:Or,yi=v.start,Xi=yi===void 0?0:yi,Zr=v.end,ki=Zr===void 0?1:Zr,Ba=v.minText,Ha=Ba===void 0?"":Ba,Ka=v.maxText,Ja=Ka===void 0?"":Ka,ya=v.group,Mo=v.graph,jo=v.canvas,Ro=v.ticks,Za=v.type;this.graph=Mo,this.canvas=jo,this.group=ya,this.timeBarType=Za,this.x=Y,this.y=At,this.width=Yt,this.height=qt,this.padding=Te,this.ticks=Ro,this.trendCfg=Ge,this.controllerCfg=We,this.currentSpeed=We.speed||1,Za==="trend"?this.backgroundStyle=Si(Si({},Gi),Tn):Za==="simple"&&(this.backgroundStyle=Si(Si({},ca),Tn)),this.foregroundStyle=Si(Si({},ha),Un),this.handlerStyle=Si(Si({},na),xr),this.textStyle=Si(Si({},Zi),Rr),this.currentMode="range",this.start=Xi,this.end=ki,this.minText=Ha,this.maxText=Ja,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return kt.prototype.update=function(v){var l=v.x,D=v.y,Y=v.width,ht=v.height,At=v.minText,Ut=v.maxText,Yt=v.start,qt=v.end;this.start=Math.min(1,Math.max(Yt,0)),this.end=Math.min(1,Math.max(qt,0)),Object(r.a)(this,{x:l,y:D,width:Y,height:ht,minText:At,maxText:Ut}),this.updateUI()},kt.prototype.setText=function(v,l){this.minTextShape.attr("text",v),this.maxTextShape.attr("text",l)},kt.prototype.renderSlider=function(){var v=this,l=this.width,D=this.height,Y=this.timeBarType;if(Y==="trend"&&Object(r.E)(Object(r.i)(this.trendCfg,"data"))){var ht=new wr(Si(Si({x:this.x,y:this.y,width:l,height:D},this.trendCfg),{group:this.group}));this.trendComponent=ht}var At=this.group.addGroup({name:"slider-group"});At.addShape("rect",{attrs:Si({x:0,y:0,width:l,height:D},this.backgroundStyle)});var Ut=this.group.addGroup();Y==="trend"?(this.minTextShape=Ut.addShape("text",{attrs:Si({x:0,y:D/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=Ut.addShape("text",{attrs:Si({y:D/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})):(this.minTextShape=Ut.addShape("text",{attrs:Si({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=Ut.addShape("text",{attrs:Si({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:Si({x:0,y:this.y,height:D},this.foregroundStyle)});var Yt=Object(r.i)(this.handlerStyle,"width",2),qt=Object(r.i)(this.handlerStyle,"height",24),oe=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new Fr(Si({name:"minHandlerShape",group:oe,type:Y,x:this.x,y:this.y,width:Yt,height:qt,cursor:"ew-resize"},this.handlerStyle));var Te=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new Fr(Si({name:"maxHandlerShape",group:Te,type:Y,x:this.x,y:this.y,width:Yt,height:qt,cursor:"ew-resize"},this.handlerStyle));var Ge=this.ticks,Ue=l/(Ge.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(vn){vn.destroy()});var We=-1/0;this.textList=Ge.map(function(vn,Tn){v.tickPosList.push(v.x+Tn*Ue);var Ln=v.group.addShape("text",{attrs:{x:v.x+Tn*Ue,y:v.y+D+5,text:vn,textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35,fontFamily:v.fontFamily||"Arial, sans-serif"}}),Un=v.group.addShape("line",{attrs:{x1:v.x+Tn*Ue,y1:v.y+D+2,x2:v.x+Tn*Ue,y2:v.y+D+6,lineWidth:1,stroke:"#ccc"}}),Hn=Ln.getBBox();return Hn.minX>We?(Ln.show(),Un.show(),We=Hn.minX+Hn.width+10):(Ln.hide(),Un.hide()),Ln}),this.controllerBtnGroup=new Ri(Si({group:this.group,x:this.x,y:this.y+D+25,width:l,height:40},this.controllerCfg)),this.updateUI(),At.move(this.x,this.y),this.bindEvents()},kt.prototype.bindEvents=function(){var v=this,l=this.group.find(function(Y){return Y.get("name")==="minHandlerShape"});l&&(l.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),l.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var D=this.group.find(function(Y){return Y.get("name")==="maxHandlerShape"});D&&(D.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),D.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("playPauseBtn:click",function(){v.isPlay=!v.isPlay,v.currentHandler=v.maxHandlerShape,v.changePlayStatus()}),this.group.on("nextStepBtn:click",function(){v.currentHandler=v.maxHandlerShape,v.updateStartEnd(.01),v.updateUI()}),this.group.on("preStepBtn:click",function(){v.currentHandler=v.maxHandlerShape,v.updateStartEnd(-.01),v.updateUI()}),this.group.on("timebarConfigChanged",function(Y){var ht=Y.type,At=Y.speed;v.currentSpeed=At,v.currentMode=ht,ht==="single"?(v.minHandlerShape.hide(),v.foregroundShape.hide(),v.minTextShape.hide()):ht==="range"&&(v.minHandlerShape.show(),v.foregroundShape.show(),v.minTextShape.show())})},kt.prototype.adjustTickIndex=function(v){for(var l=0;l<this.tickPosList.length-1;l++)if(this.tickPosList[l]<=v&&v<=this.tickPosList[l+1])return Math.abs(this.tickPosList[l]-v)<Math.abs(v-this.tickPosList[l+1])?l:l+1},kt.prototype.adjustOffsetRange=function(v){switch(this.currentHandler){case this.minHandlerShape:var l=0-this.start,D=1-this.start;return Math.min(D,Math.max(l,v));case this.maxHandlerShape:return l=0-this.end,D=1-this.end,Math.min(D,Math.max(l,v));case this.foregroundShape:return l=0-this.start,D=1-this.end,Math.min(D,Math.max(l,v));default:return 0}},kt.prototype.updateStartEnd=function(v){switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=v,this.minText=this.ticks[this.adjustTickIndex(this.start*this.width)];break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=v,this.maxText=this.ticks[this.adjustTickIndex(this.end*this.width)];break;case this.foregroundShape:this.start+=v,this.end+=v,this.minText=this.ticks[this.adjustTickIndex(this.start*this.width)],this.maxText=this.ticks[this.adjustTickIndex(this.end*this.width)]}},kt.prototype.updateUI=function(){var v=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var l=this.start*this.width,D=this.end*this.width;this.foregroundShape.attr("x",l),this.foregroundShape.attr("width",D-l);var Y=Object(r.i)(this.handlerStyle,"width",2);this.setText(this.minText,this.maxText);var ht=this.dodgeText([l,D]),At=ht[0],Ut=ht[1];this.minHandlerShape.setX(l-Y/2),Object(r.f)(At,function(Yt,qt){return v.minTextShape.attr(qt,Yt)}),this.maxHandlerShape.setX(D-Y/2),Object(r.f)(Ut,function(Yt,qt){return v.maxTextShape.attr(qt,Yt)}),this.currentMode==="range"?this.graph.emit("valueChange",{value:[this.start,this.end].sort()}):this.currentMode==="single"&&this.graph.emit("valueChange",{value:[this.end,this.end]})},kt.prototype.dodgeText=function(v){var l,D,Y=Object(r.i)(this.handlerStyle,"width",2),ht=this.minTextShape,At=this.maxTextShape,Ut=v[0],Yt=v[1],qt=!1;Ut>Yt&&(Ut=(l=[Yt,Ut])[0],Yt=l[1],ht=(D=[At,ht])[0],At=D[1],qt=!0);var oe=ht.getBBox(),Te=At.getBBox(),Ge=null,Ue=null;return this.timeBarType==="trend"?(Ge=oe.width>Ut-2?{x:Ut+Y/2+2,textAlign:"left"}:{x:Ut-Y/2-2,textAlign:"right"},Ue=Te.width>this.width-Yt-2?{x:Yt-Y/2-2,textAlign:"right"}:{x:Yt+Y/2+2,textAlign:"left"}):this.timeBarType==="simple"&&(Ge=oe.width>Ut-2?{x:Ut+Y/2+2,textAlign:"center"}:{x:Ut-Y/2-2,textAlign:"center"},Ue=Te.width>this.width-Yt-2?{x:Yt-Y/2-2,textAlign:"center"}:{x:Yt+Y/2+2,textAlign:"center"}),qt?[Ue,Ge]:[Ge,Ue]},kt.prototype.startPlay=function(){var v=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var l=v,D=l.ticks,Y=l.width,ht=v.currentSpeed,At=Y/D.length/(1e3*(10-ht)/60),Ut=v.adjustOffsetRange(At/v.width);v.updateStartEnd(Ut),v.updateUI(),v.isPlay&&(v.playHandler=v.startPlay())}):void 0},kt.prototype.changePlayStatus=function(v){v===void 0&&(v=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit("timelinestart",null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),v&&this.graph.emit("timelineend",null))},kt.prototype.destory=function(){this.graph.off("valueChange");var v=this.group,l=v.find(function(Y){return Y.get("name")==="minHandlerShape"});l&&(l.off("minHandlerShape-handler:mousedown"),l.off("minHandlerShape-handler:touchstart"),l.destroy());var D=v.find(function(Y){return Y.get("name")==="maxHandlerShape"});D&&(D.off("maxHandlerShape-handler:mousedown"),D.off("maxHandlerShape-handler:touchstart"),D.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),v.off("playPauseBtn:click"),v.off("nextStepBtn:click"),v.off("preStepBtn:click"),v.off("timebarConfigChanged"),v.destroy(),this.trendComponent&&this.trendComponent.destory()},kt}(),U=function(){function kt(v){var l=v.x,D=l===void 0?0:l,Y=v.y,ht=Y===void 0?0:Y,At=v.container,Ut=v.text,Yt=v.padding,qt=Yt===void 0?[4,4,4,4]:Yt,oe=v.className,Te=oe===void 0?"g6-component-timebar-tooltip":oe,Ge=v.backgroundColor,Ue=Ge===void 0?"#000":Ge,We=v.textColor,vn=We===void 0?"#fff":We,Tn=v.opacity,Ln=Tn===void 0?.8:Tn,Un=v.fontSize,Hn=Un===void 0?12:Un;this.container=At,this.className=Te,this.backgroundColor=Ue,this.textColor=vn,this.x=D,this.y=ht,this.text=Ut,this.padding=qt,this.opacity=Ln,this.fontSize=Hn,this.render()}return kt.prototype.render=function(){var v=this.className,l=(this.x,this.y,this.backgroundColor),D=this.textColor,Y=this.text,ht=this.padding,At=this.opacity,Ut=this.fontSize,Yt=this.container,qt=Object(m.b)("<div class='"+v+`' style="position: absolute; width: fit-content; height: fit-content; opacity: `+At+'"></div>');Object(r.x)(Yt)&&(Yt=document.getElementById(Yt)),Yt.appendChild(qt),this.parentHeight=Yt.offsetHeight,this.parentWidth=Yt.offsetWidth,Object(m.c)(qt,{visibility:"hidden",top:0,left:0});var oe=Object(m.b)(`
      <div style='position: absolute; white-space:nowrap; background-color: `+l+"; font-size: "+Ut+"px; border-radius: 4px; width: fit-content; height: fit-content; color: "+D+"; padding: "+ht[0]+"px "+ht[1]+"px "+ht[2]+"px "+ht[3]+"px'></div>");oe.innerHTML=Y,qt.appendChild(oe),this.backgroundDOM=oe;var Te=Object(m.b)("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid "+l+"'></div>");qt.appendChild(Te),this.arrowDOM=Te,this.container=qt},kt.prototype.show=function(v){var l=v.text,D=v.x;v.y,v.clientX,v.clientY,this.backgroundDOM.innerHTML=l;var Y=this.backgroundDOM.offsetWidth,ht=this.backgroundDOM.offsetHeight,At=this.arrowDOM.offsetWidth,Ut=this.arrowDOM.offsetHeight;Object(m.c)(this.container,{top:-ht-Ut+"px",left:D+"px",visibility:"visible"}),Object(m.c)(this.backgroundDOM,{marginLeft:-Y/2+"px"}),Object(m.c)(this.arrowDOM,{marginLeft:-At/2+"px",top:ht+"px"});var Yt=D-Y/2,qt=D+Y/2;Yt<0?Object(m.c)(this.backgroundDOM,{marginLeft:-Y/2-Yt+"px"}):qt>this.parentWidth&&Object(m.c)(this.backgroundDOM,{marginLeft:-Y/2-qt+this.parentWidth+12+"px"})},kt.prototype.hide=function(){Object(m.c)(this.container,{top:0,left:0,visibility:"hidden"})},kt}(),G=function(){return(G=Object.assign||function(v){for(var l,D=1,Y=arguments.length;D<Y;D++)for(var ht in l=arguments[D])Object.prototype.hasOwnProperty.call(l,ht)&&(v[ht]=l[ht]);return v}).apply(this,arguments)},nt={fill:"#5B8FF9"},vt={fill:"#e6e8e9"},Gt=function(){function kt(v){this.frameCount=0,this.fontFamily="Arial, sans-serif";var l=v.graph,D=v.canvas,Y=v.group,ht=v.width,At=v.height,Ut=v.padding,Yt=v.data,qt=v.start,oe=v.end,Te=v.x,Ge=Te===void 0?0:Te,Ue=v.y,We=Ue===void 0?0:Ue,vn=v.tickLabelFormatter,Tn=v.selectedTickStyle,Ln=Tn===void 0?nt:Tn,Un=v.unselectedTickStyle,Hn=Un===void 0?vt:Un,xr=v.tooltipBackgroundColor,Or=v.tooltipFomatter;this.graph=l,this.group=Y,this.sliceGroup=Y.addGroup({name:"slice-group"}),this.canvas=D,this.width=ht,this.height=At,this.padding=Ut,this.data=Yt,this.start=qt,this.end=oe,this.tickLabelFormatter=vn,this.selectedTickStyle=Ln,this.unselectedTickStyle=Hn,this.x=Ge,this.y=We,this.tooltipBackgroundColor=xr,this.tooltipFomatter=Or,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return kt.prototype.renderSlices=function(){var v=this,l=this,D=l.width,Y=l.height,ht=l.padding,At=l.data,Ut=l.start,Yt=l.end,qt=l.tickLabelFormatter,oe=l.selectedTickStyle,Te=l.unselectedTickStyle,Ge=D-2*ht,Ue=Y-(3*ht+4+10)-2*ht,We=At.length,vn=(Ge-2*(We-1))/We;this.tickWidth=vn;var Tn=this.sliceGroup,Ln=[],Un=[],Hn=Math.round(We*Ut),xr=Math.round(We*Yt);this.startTickRectId=Hn,this.endTickRectId=xr,At.forEach(function(Rr,yi){var Xi=yi>=Hn&&yi<=xr?oe:Te,Zr=Tn.addShape("rect",{attrs:G({x:ht+yi*(vn+2),y:ht,width:vn,height:Ue},Xi),draggable:!0,name:"tick-rect-"+yi}),ki=Tn.addShape("rect",{attrs:{x:ht+yi*vn+2*(2*yi-1)/2,y:ht,width:yi===0||yi===We-1?vn+1:vn+2,height:Ue,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-"+yi});ki.toFront();var Ba,Ha=Zr.getBBox(),Ka=(Ha.minX+Ha.maxX)/2;if(Ln.push({rect:Zr,pickRect:ki,value:Rr.date,x:Ka,y:Ha.minY}),qt?(Ba=qt(Rr),!Object(r.x)(Ba)&&Ba&&(Ba=Rr.date)):yi%Math.round(We/10)==0&&(Ba=Rr.date),Ba){Un.push(Ba);var Ja=Ha.maxY+2*ht;Tn.addShape("line",{attrs:{stroke:"#BFBFBF",x1:Ka,y1:Ja,x2:Ka,y2:Ja+4}});var ya=Ja+4+ht,Mo=Tn.addShape("text",{attrs:{fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:Ka,y:ya,textAlign:"center",text:Ba,textBaseline:"top",fontSize:10,fontFamily:v.fontFamily||"Arial, sans-serif"},capture:!1}),jo=Mo.getBBox();jo.maxX>D?Mo.attr("textAlign","right"):jo.minX<0&&Mo.attr("textAlign","left")}}),this.tickRects=Ln;var Or=this.group;this.currentSpeed=1,this.controllerBtnGroup=new Ri({group:Or,x:this.x,y:this.y+Y+5,width:D,height:40,hiddleToggle:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"})},kt.prototype.initEvent=function(){var v=this,l=this.sliceGroup;l.on("click",function(qt){var oe=qt.target;if(oe.get("type")==="rect"&&oe.get("name")){var Te=parseInt(oe.get("name").split("-")[2],10);if(!isNaN(Te)){var Ge=v.tickRects,Ue=v.unselectedTickStyle;Ge.forEach(function(Tn){Tn.rect.attr(Ue)});var We=v.selectedTickStyle;Ge[Te].rect.attr(We),v.startTickRectId=Te,v.endTickRectId=Te;var vn=Te/Ge.length;v.graph.emit("valueChange",{value:[vn,vn]})}}}),l.on("dragstart",function(qt){var oe=v.tickRects,Te=v.unselectedTickStyle;oe.forEach(function(Tn){Tn.rect.attr(Te)});var Ge=qt.target,Ue=parseInt(Ge.get("name").split("-")[2],10),We=v.selectedTickStyle;oe[Ue].rect.attr(We),v.startTickRectId=Ue;var vn=Ue/oe.length;v.graph.emit("valueChange",{value:[vn,vn]}),v.dragging=!0}),l.on("dragover",function(qt){if(v.dragging&&qt.target.get("type")==="rect"){for(var oe=parseInt(qt.target.get("name").split("-")[2],10),Te=v.startTickRectId,Ge=v.tickRects,Ue=v.selectedTickStyle,We=v.unselectedTickStyle,vn=0;vn<Ge.length;vn++){var Tn=vn>=Te&&vn<=oe?Ue:We;Ge[vn].rect.attr(Tn)}var Ln=Ge.length;v.endTickRectId=oe;var Un=Te/Ln,Hn=oe/Ln;v.graph.emit("valueChange",{value:[Un,Hn]})}}),l.on("drop",function(qt){if(v.dragging&&(v.dragging=!1,qt.target.get("type")==="rect")){var oe=v.startTickRectId,Te=parseInt(qt.target.get("name").split("-")[2],10);if(!(Te<oe)){var Ge=v.selectedTickStyle,Ue=v.tickRects;Ue[Te].rect.attr(Ge),v.endTickRectId=Te;var We=Ue.length,vn=oe/We,Tn=Te/We;v.graph.emit("valueChange",{value:[vn,Tn]})}}});var D=this.tooltipBackgroundColor,Y=this.tooltipFomatter,ht=this.canvas,At=new U({container:ht.get("container"),backgroundColor:D}),Ut=this.tickRects;Ut.forEach(function(qt){var oe=qt.pickRect;oe.on("mouseenter",function(Te){var Ge=Te.target;if(Ge.get("type")==="rect"){var Ue=parseInt(Ge.get("name").split("-")[2],10),We=ht.getClientByPoint(Ut[Ue].x,Ut[Ue].y);At.show({x:Ut[Ue].x,y:Ut[Ue].y,clientX:We.x,clientY:We.y,text:Y?Y(Ut[Ue].value):Ut[Ue].value})}}),oe.on("mouseleave",function(Te){At.hide()})});var Yt=this.group;Yt.on("playPauseBtn:click",function(){v.isPlay=!v.isPlay,v.changePlayStatus()}),Yt.on("nextStepBtn:click",function(){v.updateStartEnd(1)}),Yt.on("preStepBtn:click",function(){v.updateStartEnd(-1)}),Yt.on("timebarConfigChanged",function(qt){qt.type;var oe=qt.speed;v.currentSpeed=oe})},kt.prototype.changePlayStatus=function(v){v===void 0&&(v=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit("timelinestart",null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),v&&this.graph.emit("timelineend",null))},kt.prototype.startPlay=function(){var v=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var l=v.currentSpeed;v.frameCount%(60/l)==0&&(v.frameCount=0,v.updateStartEnd(1)),v.frameCount++,v.isPlay&&(v.playHandler=v.startPlay())}):void 0},kt.prototype.updateStartEnd=function(v){var l=this.tickRects,D=l.length,Y=this.unselectedTickStyle,ht=this.selectedTickStyle,At=this.endTickRectId;if(v>0?this.endTickRectId++:(l[this.endTickRectId].rect.attr(Y),this.endTickRectId--),At!==this.startTickRectId)this.endTickRectId<this.startTickRectId&&(this.startTickRectId=this.endTickRectId);else{for(var Ut=this.startTickRectId;Ut<=this.endTickRectId-1;Ut++)l[Ut].rect.attr(Y);this.startTickRectId=this.endTickRectId}if(l[this.endTickRectId]){l[this.endTickRectId].rect.attr(ht);var Yt=this.startTickRectId/D,qt=this.endTickRectId/D;this.graph.emit("valueChange",{value:[Yt,qt]})}},kt.prototype.destory=function(){this.graph.off("valueChange");var v=this.sliceGroup;v.off("click"),v.off("dragstart"),v.off("dragover"),v.off("drop"),this.tickRects.forEach(function(l){var D=l.pickRect;D.off("mouseenter"),D.off("mouseleave")}),this.tickRects.length=0,v.off("playPauseBtn:click"),v.off("nextStepBtn:click"),v.off("preStepBtn:click"),v.off("timebarConfigChanged"),this.sliceGroup.destroy()},kt}(),Jt=function(){var kt=function(l,D){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,ht){Y.__proto__=ht}||function(Y,ht){for(var At in ht)Object.prototype.hasOwnProperty.call(ht,At)&&(Y[At]=ht[At])})(l,D)};return function(v,l){function D(){this.constructor=v}kt(v,l),v.prototype=l===null?Object.create(l):(D.prototype=l.prototype,new D)}}(),ie=function(){return(ie=Object.assign||function(v){for(var l,D=1,Y=arguments.length;D<Y;D++)for(var ht in l=arguments[D])Object.prototype.hasOwnProperty.call(l,ht)&&(v[ht]=l[ht]);return v}).apply(this,arguments)},ue=function(v,l){var D={};for(var Y in v)Object.prototype.hasOwnProperty.call(v,Y)&&l.indexOf(Y)<0&&(D[Y]=v[Y]);if(v!=null&&typeof Object.getOwnPropertySymbols=="function"){var ht=0;for(Y=Object.getOwnPropertySymbols(v);ht<Y.length;ht++)l.indexOf(Y[ht])<0&&Object.prototype.propertyIsEnumerable.call(v,Y[ht])&&(D[Y[ht]]=v[Y[ht]])}return D},Ce=function(kt){function v(){return kt!==null&&kt.apply(this,arguments)||this}return Jt(v,kt),v.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:2,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{}}},v.prototype.initContainer=function(){var l,D,Y=this.get("graph"),ht=this._cfgs,At=ht.width,Ut=ht.height,Yt=this.get("className")||"g6-component-timebar",qt=this.get("container"),oe=this.get("graph").get("container");qt?(Object(r.x)(qt)&&(qt=document.getElementById(qt)),l=qt):(l=Object(m.b)("<div class='"+Yt+"'></div>"),Object(m.c)(l,{position:"relative"})),oe.appendChild(l),this.set("timeBarContainer",l),D=Y.get("renderer")==="SVG"?new W.Canvas({container:l,width:At,height:Ut}):new P.Canvas({container:l,width:At,height:Ut}),this.set("canvas",D)},v.prototype.init=function(){this.initContainer();var l=this.get("canvas").addGroup({name:"timebar-group"});this.set("timeBarGroup",l),this.renderTrend(),this.initEvent();var D=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",D)},v.prototype.renderTrend=function(){var l=this._cfgs,D=l.width,Y=l.x,ht=l.y,At=l.padding,Ut=l.type,Yt=l.trend,qt=l.slider,oe=l.controllerCfg,Te=l.textStyle,Ge=Yt.data,Ue=ue(Yt,["data"]),We=D-2*At,vn=Ut==="trend"?26:8,Tn=this.get("graph"),Ln=this.get("timeBarGroup"),Un=this.get("canvas"),Hn=null;if(Ut==="trend"||Ut==="simple")Hn=new ve(ie(ie({graph:Tn,canvas:Un,group:Ln,type:Ut,x:Y+At,y:Ut==="trend"?ht+At:ht+At+15,width:We,height:vn,padding:At,trendCfg:ie(ie({},Ue),{data:Ge.map(function(Or){return Or.value})})},qt),{ticks:Ge.map(function(Or){return Or.date}),handlerStyle:ie(ie({},qt.handlerStyle),{height:qt.height||vn}),controllerCfg:oe,textStyle:Te}));else if(Ut==="tick"){var xr=this._cfgs.tick;Hn=new Gt(ie({graph:Tn,canvas:Un,group:Ln,x:Y+At,y:ht+At},xr))}this.set("timebar",Hn)},v.prototype.filterData=function(l){var D=l.value,Y=null,ht=this._cfgs.type;if(ht==="trend"||ht==="simple"?Y=this._cfgs.trend.data:ht==="tick"&&(Y=this._cfgs.tick.data),Y&&Y.length!==0){var At=this.get("rangeChange"),Ut=this.get("graph"),Yt=Math.round(Y.length*D[0]),qt=Math.round(Y.length*D[1]);qt=qt>=Y.length?Y.length-1:qt;var oe=Y[Yt].date,Te=Y[qt].date;if(ht!=="tick"&&this.get("timebar").setText(oe,Te),At)At(Ut,oe,Te);else{var Ge=Ut.save();(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=Ge);var Ue=this.cacheGraphData.nodes.filter(function(Tn){return Tn.date>=oe&&Tn.date<=Te}),We=Ue.map(function(Tn){return Tn.id}),vn=this.cacheGraphData.edges.filter(function(Tn){return We.includes(Tn.source)&&We.includes(Tn.target)});Ut.changeData({nodes:Ue,edges:vn})}}else console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E")},v.prototype.initEvent=function(){var l=this,D=0,Y=0,ht=this._cfgs.type;ht&&ht!=="trend"&&ht!=="simple"?ht==="tick"&&(D=this._cfgs.tick.start,Y=this._cfgs.tick.end):(D=this._cfgs.slider.start,Y=this._cfgs.slider.end);var At=this.get("graph");At.on("afterrender",function(){l.filterData({value:[D,Y]})}),At.on("valueChange",function(Ut){l.filterData(Ut)})},v.prototype.destroy=function(){var l=this.get("timebar");l&&l.destory&&l.destory(),kt.prototype.destroy.call(this);var D=this.get("timeBarContainer");if(D){var Y=this.get("container");Y||(Y=this.get("graph").get("container")),Object(r.x)(Y)&&(Y=document.getElementById(Y)),Y.removeChild(D)}},v}(s),we={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(v){return Object.assign(this,v),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(v){var l=this,D=this.events;this.graph=v,this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||v.get("canvas").set("draggable",!0),Object(r.f)(D,function(Y,ht){v.on(ht,Y)}),document.addEventListener("visibilitychange",function(){l.keydown=!1})},unbind:function(v){var l=this.events;this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||v.get("canvas").set("draggable",!1),Object(r.f)(l,function(D,Y){v.off(Y,D)})},get:function(v){return this[v]},set:function(v,l){return this[v]=l,this}},cn=function(){function kt(){}return kt.registerBehavior=function(v,l){if(!l)throw new Error("please specify handler for this behavior: "+v);var D=Object(r.c)(we);Object.assign(D,l);var Y=function(At){var Ut=this;Object.assign(this,this.getDefaultCfg(),At);var Yt=this.getEvents();this.events=null;var qt={};Yt&&(Object(r.f)(Yt,function(oe,Te){qt[Te]=Object(r.J)(Ut,oe)}),this.events=qt)};Y.prototype=D,kt.types[v]=Y},kt.hasBehavior=function(v){return!!kt.types[v]},kt.getBehavior=function(v){return kt.types[v]},kt.types={},kt}(),Cn=cn,_t=t(79),Xt=t(10),Ee=t(33),Vt=Xt.a.transform,ce=function(v){return function(l,D){return l[v]-D[v]}},yn=function(v,l,D){return v>=l&&v<=D},Bn=function(v,l,D,Y){var ht=D.x-v.x,At=D.y-v.y,Ut=l.x-v.x,Yt=l.y-v.y,qt=Y.x-D.x,oe=Y.y-D.y,Te=Ut*oe-Yt*qt,Ge=null;if(Te*Te>.001*(Ut*Ut+Yt*Yt)*(qt*qt+oe*oe)){var Ue=(ht*oe-At*qt)/Te,We=(ht*Yt-At*Ut)/Te;yn(Ue,0,1)&&yn(We,0,1)&&(Ge={x:v.x+Ue*Ut,y:v.y+Ue*Yt})}return Ge},Zn=function(v,l){var D=v.x,Y=v.y,ht=v.width,At=v.height,Ut=[],Yt={x:D+ht/2,y:Y+At/2};Ut.push({x:D,y:Y}),Ut.push({x:D+ht,y:Y}),Ut.push({x:D+ht,y:Y+At}),Ut.push({x:D,y:Y+At}),Ut.push({x:D,y:Y});for(var qt=null,oe=1;oe<Ut.length&&!(qt=Bn(Ut[oe-1],Ut[oe],Yt,l));oe++);return qt},Kn=function(v,l){var D=v.x,Y=v.y,ht=v.r,At=l.x-D,Ut=l.y-Y;if(Math.sqrt(At*At+Ut*Ut)<ht)return null;var Yt=Math.sign(At),qt=Math.sign(Ut),oe=Math.atan(Ut/At);return{x:D+Math.abs(ht*Math.cos(oe))*Yt,y:Y+Math.abs(ht*Math.sin(oe))*qt}},$e=function(v,l){var D=v.rx,Y=v.ry,ht=v.x,At=v.y,Ut=l.x-ht,Yt=l.y-At,qt=Math.atan2(Yt/Y,Ut/D);return qt<0&&(qt+=2*Math.PI),{x:ht+D*Math.cos(qt),y:At+Y*Math.sin(qt)}},je=function(v,l,D){D===void 0&&(D=1);var Y=[v.x,v.y,D];return l&&!isNaN(l[0])||(l=[1,0,0,0,1,0,0,0,1]),Xt.d.transformMat3(Y,Y,l),{x:Y[0],y:Y[1]}},L=function(v,l,D){D===void 0&&(D=1),l&&!isNaN(l[0])||(l=[1,0,0,0,1,0,0,0,1]);var Y=Xt.b.invert([1,0,0,0,1,0,0,0,1],l);Y||(Y=[1,0,0,0,1,0,0,0,1]);var ht=[v.x,v.y,D];return Xt.d.transformMat3(ht,ht,Y),{x:ht[0],y:ht[1]}},Et=function(v,l,D){var Y=v.x-l.x,ht=v.y-l.y,At=v.x-D.x,Ut=v.y-D.y,Yt=(v.x*v.x-l.x*l.x-l.y*l.y+v.y*v.y)/2,qt=(v.x*v.x-D.x*D.x-D.y*D.y+v.y*v.y)/2,oe=ht*At-Y*Ut;return{x:-(Ut*Yt-ht*qt)/oe,y:-(Y*qt-At*Yt)/oe}},$t=function(v,l){var D=v.x-l.x,Y=v.y-l.y;return Math.sqrt(D*D+Y*Y)},ye=function(v,l){var D=[];return v.forEach(function(Y){var ht=[];Y.forEach(function(At){ht.push(At*l)}),D.push(ht)}),D},Zt=function(v){for(var l=[],D=v.length,Y=0;Y<D;Y+=1){l[Y]=[];for(var ht=0;ht<D;ht+=1)Y===ht?l[Y][ht]=0:v[Y][ht]!==0&&v[Y][ht]?l[Y][ht]=v[Y][ht]:l[Y][ht]=1/0}for(var At=0;At<D;At+=1)for(Y=0;Y<D;Y+=1)for(ht=0;ht<D;ht+=1)l[Y][ht]>l[Y][At]+l[At][ht]&&(l[Y][ht]=l[Y][At]+l[At][ht]);return l},de=function(v,l){var D=v.nodes,Y=v.edges,ht=[],At={};if(!D)throw new Error("invalid nodes data!");return D&&D.forEach(function(Ut,Yt){At[Ut.id]=Yt,ht.push([])}),Y&&Y.forEach(function(Ut){var Yt=Ut.source,qt=Ut.target,oe=At[Yt],Te=At[qt];ht[oe][Te]=1,l||(ht[Te][oe]=1)}),ht},he=function(v,l){v.translate(l.x,l.y)},le=function(v,l){var D=v.getMatrix();D||(D=[1,0,0,0,1,0,0,0,1]);var Y=v.getCanvasBBox(),ht=l.x-Y.minX,At=l.y-Y.minY,Ut=Vt(D,[["t",ht,At]]);v.setMatrix(Ut)},Me=function(v,l){var D=v.getMatrix();D||(D=[1,0,0,0,1,0,0,0,1]);var Y=l;Object(r.m)(l)||(Y=[l,l]),Object(r.m)(l)&&l.length===1&&(Y=[l[0],l[0]]),D=Vt(D,[["s",Y[0],Y[1]]]),v.setMatrix(D)},Ve=function(v,l){var D=v.getMatrix();D||(D=[1,0,0,0,1,0,0,0,1]),D=Vt(D,[["r",l]]),v.setMatrix(D)},Ye=function(v,l,D){for(var Y=[],ht=0;ht<v;ht++)Y[ht]=0;return D.forEach(function(At){At.source&&(Y[l[At.source]]+=1),At.target&&(Y[l[At.target]]+=1)}),Y};function ke(kt,v,l){return(l[0]-kt[0])*(v[1]-kt[1])==(v[0]-kt[0])*(l[1]-kt[1])&&Math.min(kt[0],v[0])<=l[0]&&l[0]<=Math.max(kt[0],v[0])&&Math.min(kt[1],v[1])<=l[1]&&l[1]<=Math.max(kt[1],v[1])}var nn=function(v,l,D){var Y=!1,ht=v.length;function At(oe){return Math.abs(oe)<1e-6?0:oe<0?-1:1}if(ht<=2)return!1;for(var Ut=0;Ut<ht;Ut++){var Yt=v[Ut],qt=v[(Ut+1)%ht];if(ke(Yt,qt,[l,D]))return!0;At(Yt[1]-D)>0!=At(qt[1]-D)>0&&At(l-(D-Yt[1])*(Yt[0]-qt[0])/(Yt[1]-qt[1])-Yt[0])<0&&(Y=!Y)}return Y},Re=function(v,l){return!(l.minX>v.maxX||l.maxX<v.minX||l.minY>v.maxY||l.maxY<v.minY)},hn=function(v,l){var D=function(Ge){var Ue=Ge.map(function(vn){return vn[0]}),We=Ge.map(function(vn){return vn[1]});return{minX:Math.min.apply(null,Ue),maxX:Math.max.apply(null,Ue),minY:Math.min.apply(null,We),maxY:Math.max.apply(null,We)}},Y=function(Ge){for(var Ue=[],We=Ge.length,vn=0;vn<We-1;vn++){var Tn=Ge[vn],Ln=Ge[vn+1];Ue.push({from:{x:Tn[0],y:Tn[1]},to:{x:Ln[0],y:Ln[1]}})}if(Ue.length>1){var Un=Ge[0],Hn=Ge[We-1];Ue.push({from:{x:Hn[0],y:Hn[1]},to:{x:Un[0],y:Un[1]}})}return Ue};if(v.length<2||l.length<2)return!1;var ht=D(v),At=D(l);if(!Re(ht,At))return!1;var Ut=!1;if(Object(r.f)(l,function(Te){if(nn(v,Te[0],Te[1]))return Ut=!0,!1}),Ut||(Object(r.f)(v,function(Te){if(nn(l,Te[0],Te[1]))return Ut=!0,!1}),Ut))return!0;var Yt=Y(v),qt=Y(l),oe=!1;return Object(r.f)(qt,function(Te){if(function(Ge,Ue){var We=!1;return Object(r.f)(Ge,function(vn){if(Bn(vn.from,vn.to,Ue.from,Ue.to))return We=!0,!1}),We}(Yt,Te))return oe=!0,!1}),oe},pn=function(){function kt(v,l,D,Y){this.x1=v,this.y1=l,this.x2=D,this.y2=Y}return kt.prototype.getBBox=function(){var v=Math.min(this.x1,this.x2),l=Math.min(this.y1,this.y2),D=Math.max(this.x1,this.x2),Y=Math.max(this.y1,this.y2);return{x:v,y:l,minX:v,minY:l,maxX:D,maxY:Y,width:D-v,height:Y-l}},kt}(),on=function(v,l){return{top:[v.minX,v.minY,v.maxX,v.minY],left:[v.minX,v.minY,v.minX,v.maxY],bottom:[v.minX,v.maxY,v.maxX,v.maxY],right:[v.maxX,v.minY,v.maxX,v.maxY]}[l]},mn=function(v,l){var D=(l.x2-l.x1)*(v.y1-l.y1)-(l.y2-l.y1)*(v.x1-l.x1),Y=(v.x2-v.x1)*(v.y1-l.y1)-(v.y2-v.y1)*(v.x1-l.x1),ht=(l.y2-l.y1)*(v.x2-v.x1)-(l.x2-l.x1)*(v.y2-v.y1);if(ht){var At=D/ht,Ut=Y/ht;if(At>=0&&At<=1&&Ut>=0&&Ut<=1)return At}return Number.POSITIVE_INFINITY},jn=function(v,l){for(var D=["top","left","bottom","right"],Y=v.getBBox(),ht=0,At=[],Ut=0;Ut<4;Ut++){var Yt=on(Y,D[Ut]),qt=Yt[0],oe=Yt[1],Te=Yt[2],Ge=Yt[3];At[Ut]=Bn({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},{x:qt,y:oe},{x:Te,y:Ge}),At[Ut]&&(ht+=1)}return[At,ht]},Ie=function(v,l){for(var D=["top","left","bottom","right"],Y=v.getBBox(),ht=Number.POSITIVE_INFINITY,At=0,Ut=0;Ut<4;Ut++){var Yt=on(Y,D[Ut]),qt=Yt[0],oe=Yt[1],Te=Yt[2],Ge=Yt[3],Ue=mn(l,new pn(qt,oe,Te,Ge));(Ue=Math.abs(Ue-.5))>=0&&Ue<=1&&(At+=1,ht=Ue<ht?Ue:ht)}return At===0?-1:ht},fe=function(v){var l=0,D=0;if(v.length>0){for(var Y=0,ht=v;Y<ht.length;Y++){var At=ht[Y];l+=At.x,D+=At.y}l/=v.length,D/=v.length}return{x:l,y:D}},Ne=function(v,l){return Math.pow(v.x-l.x,2)+Math.pow(v.y-l.y,2)},Fe=function(v,l){var D,Y=l.x1,ht=l.y1,At=l.x2-Y,Ut=l.y2-ht,Yt=v.x-Y,qt=v.y-ht,oe=Yt*At+qt*Ut;D=oe<=0||(oe=(Yt=At-Yt)*At+(qt=Ut-qt)*Ut)<=0?0:oe*oe/(At*At+Ut*Ut);var Te=Yt*Yt+qt*qt-D;return Te<0&&(Te=0),Te},rn=function(v,l,D){return D===void 0&&(D=.001),Math.pow(v.x-l.x,2)+Math.pow(v.y-l.y,2)<Math.pow(D,2)},ln=function(v,l){var D=v.x<l.x,Y=v.x>l.x+l.width,ht=v.y>l.y+l.height,At=v.y<l.y;if(!(D||Y||ht||At))return 0;if(ht&&!D&&!Y)return Math.pow(l.y+l.height-v.y,2);if(At&&!D&&!Y)return Math.pow(v.y-l.y,2);if(D&&!ht&&!At)return Math.pow(l.x-v.x,2);if(Y&&!ht&&!At)return Math.pow(l.x+l.width-v.x,2);var Ut=Math.min(Math.abs(l.x-v.x),Math.abs(l.x+l.width-v.x)),Yt=Math.min(Math.abs(l.y-v.y),Math.abs(l.y+l.height-v.y));return Ut*Ut+Yt*Yt},_e="rgb(95, 149, 255)",dn="rgb(253, 253, 253)",Sn="rgb(247, 250, 255)",tr="rgb(224, 224, 224)",Pn="rgb(224, 224, 224)",Fn={version:"0.0.8",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:_e,fill:"rgb(239, 244, 255)"},size:20,color:_e,linkPoints:{size:8,lineWidth:1,fill:Sn,stroke:_e}},nodeStateStyles:{active:{fill:Sn,stroke:_e,lineWidth:2,shadowColor:_e,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:_e,lineWidth:4,shadowColor:_e,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:"#4572d9",lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:"rgb(247, 250, 255)",stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:"rgb(250, 250, 250)",stroke:"rgb(224, 224, 224)",lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:tr,lineAppendWidth:2},color:tr},edgeStateStyles:{active:{stroke:_e,lineWidth:1},selected:{stroke:_e,lineWidth:2,shadowColor:_e,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:_e,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(234, 234, 234)",lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:dn,lineWidth:1,stroke:Pn,r:5,width:20,height:10},size:[20,5],color:Pn,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:_e,lineWidth:1,fill:"rgb(247, 250, 255)"},selected:{stroke:_e,lineWidth:2,fill:dn,shadowColor:_e,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:"#4572d9",lineWidth:2,fill:dn,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(224, 224, 224)",fill:dn,lineWidth:1},disable:{stroke:"rgb(234, 234, 234)",fill:"rgb(250, 250, 250)",lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]}},Cr=function(){function kt(v){this.graph=v,this.destroyed=!1,this.modes=v.get("modes")||{default:[]},this.formatModes(),this.mode=v.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return kt.prototype.formatModes=function(){var v=this.modes;Object(r.f)(v,function(l){Object(r.f)(l,function(D,Y){Object(r.x)(D)&&(l[Y]={type:D})})})},kt.prototype.setBehaviors=function(v){var l,D=this.graph,Y=this.modes[v],ht=[];Object(r.f)(Y||[],function(At){var Ut=cn.getBehavior(At.type||At);Ut&&(l=new Ut(At))&&(l.bind(D),ht.push(l))}),this.currentBehaves=ht},kt.mergeBehaviors=function(v,l){return Object(r.f)(l,function(D){v.indexOf(D)<0&&(Object(r.x)(D)&&(D={type:D}),v.push(D))}),v},kt.filterBehaviors=function(v,l){var D=[];return v.forEach(function(Y){var ht="";ht=Object(r.x)(Y)?Y:Y.type,l.indexOf(ht)<0&&D.push(Y)}),D},kt.prototype.setMode=function(v){var l=this.modes,D=this.graph,Y=v;l[Y]&&(D.emit("beforemodechange",{mode:v}),Object(r.f)(this.currentBehaves,function(ht){ht.delegate&&ht.delegate.remove(),ht.unbind(D)}),this.setBehaviors(Y),D.emit("aftermodechange",{mode:v}),this.mode=v)},kt.prototype.getMode=function(){return this.mode},kt.prototype.manipulateBehaviors=function(v,l,D){var Y,ht=this;if(Y=Object(r.m)(v)?v:[v],Object(r.m)(l))return Object(r.f)(l,function(Ut){ht.modes[Ut]?ht.modes[Ut]=D?kt.mergeBehaviors(ht.modes[Ut]||[],Y):kt.filterBehaviors(ht.modes[Ut]||[],Y):D&&(ht.modes[Ut]=Y)}),this;var At=l;return l||(At=this.mode),this.modes[At]||D&&(this.modes[At]=Y),this.modes[At]=D?kt.mergeBehaviors(this.modes[At]||[],Y):kt.filterBehaviors(this.modes[At]||[],Y),this.setMode(this.mode),this},kt.prototype.updateBehavior=function(v,l,D){Object(r.x)(v)&&(v={type:v});var Y=[];if(D&&D!==this.mode&&D!=="default"){if(!(Y=this.modes[D])||!Y.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;var ht=Y.length;for(Ut=0;Ut<ht;Ut++){if((Yt=Y[Ut]).type===v.type||Yt===v.type)return Yt===v.type&&(Yt={type:Yt}),Object.assign(Yt,l),Y[Ut]=Yt,this;Ut===ht-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(!(Y=this.currentBehaves)||!Y.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var At=Y.length,Ut=0;Ut<At;Ut++){var Yt;if((Yt=Y[Ut]).type===v.type)return Yt.updateCfg(l),this;Ut===At-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},kt.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},kt}(),fi=function(kt){function v(l,D){var Y=kt.call(this,l,D)||this;return Y.item=D.item,Y.canvasX=D.canvasX,Y.canvasY=D.canvasY,Y.wheelDelta=D.wheelDelta,Y.detail=D.detail,Y}return Object(st.b)(v,kt),v}(t(18).Event),ri=function(v){return v+"-"+Math.random()+Date.now()},zr=function(v){var l=0,D=0,Y=0,ht=0;return Object(r.t)(v)?l=D=Y=ht=v:Object(r.x)(v)?l=D=Y=ht=parseInt(v,10):Object(r.m)(v)&&(l=v[0],Y=Object(r.s)(v[1])?v[0]:v[1],ht=Object(r.s)(v[2])?v[0]:v[2],D=Object(r.s)(v[3])?Y:v[3]),[l,Y,ht,D]},wi=function(v){var l=new fi(v.type,v);return l.clientX=v.clientX,l.clientY=v.clientY,l.x=v.x,l.y=v.y,l.target=v.target,l.currentTarget=v.currentTarget,l.bubbles=!0,l.item=v.item,l},Ai=function(v){if(!v)return!1;for(var l=[1,0,0,0,1,0,0,0,1],D=0;D<9;D++)if(v[D]!==l[D])return!0;return!1},gi=function(v){return Number.isNaN(Number(v))},Oa=function(v){for(var l=1/0,D=-1/0,Y=1/0,ht=-1/0,At=0;At<v.length;At++){var Ut=v[At].getBBox(),Yt=Ut.minX,qt=Ut.minY,oe=Ut.maxX,Te=Ut.maxY;Yt<l&&(l=Yt),qt<Y&&(Y=qt),oe>D&&(D=oe),Te>ht&&(ht=Te)}return{x:Math.floor(l),y:Math.floor(Y),width:Math.ceil(D)-Math.floor(l),height:Math.ceil(ht)-Math.floor(Y),minX:l,minY:Y,maxX:D,maxY:ht}},Aa=function(v,l,D,Y,ht){l===void 0&&(l=15),D===void 0&&(D="quadratic");for(var At=v.length,Ut=2*l,Yt=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],qt={},oe=[],Te={},Ge=0;Ge<At;Ge++){var Ue=v[Ge],We=Ue.source,vn=Ue.target,Tn=We+"-"+vn;if(!oe[Ge]){qt[Tn]||(qt[Tn]=[]),oe[Ge]=!0,qt[Tn].push(Ue);for(var Ln=0;Ln<At;Ln++)if(Ge!==Ln){var Un=v[Ln],Hn=Un.source,xr=Un.target;oe[Ln]||(We===xr&&vn===Hn?(qt[Tn].push(Un),oe[Ln]=!0,Te[Hn+"|"+xr+"|"+(qt[Tn].length-1)]=!0):We===Hn&&vn===xr&&(qt[Tn].push(Un),oe[Ln]=!0))}}}for(var Or in qt)for(var Rr=qt[Or],yi=Rr.length,Xi=0;Xi<yi;Xi++){var Zr=Rr[Xi];if(Zr.source!==Zr.target)if(yi===1&&Y&&Zr.source!==Zr.target)Zr.type=Y;else{Zr.type=D;var ki=(Xi%2==0?1:-1)*(Te[Zr.source+"|"+Zr.target+"|"+Xi]?-1:1);Zr.curveOffset=yi%2==1?ki*Math.ceil(Xi/2)*Ut:ki*(Math.floor(Xi/2)*Ut+l)}else ht&&(Zr.type=ht),Zr.loopCfg={position:Yt[Xi%8],dist:20*Math.floor(Xi/8)+50}}return v},Oo=function(){function kt(v){this.destroyed=!1,this.graph=v,this.destroyed=!1}return kt.prototype.getViewCenter=function(){var v=this.getFormatPadding(),l=this.graph,D=this.graph.get("width"),Y=l.get("height");return{x:(D-v[1]-v[3])/2+v[3],y:(Y-v[0]-v[2])/2+v[0]}},kt.prototype.fitCenter=function(){var v=this.graph,l=v.get("group");l.resetMatrix();var D=l.getCanvasBBox();if(D.width!==0&&D.height!==0){var Y=this.getViewCenter(),ht=D.x+D.width/2,At=D.y+D.height/2;v.translate(Y.x-ht,Y.y-At)}},kt.prototype.fitView=function(){var v=this.graph,l=this.getFormatPadding(),D=v.get("width"),Y=v.get("height"),ht=v.get("group");ht.resetMatrix();var At=ht.getCanvasBBox();if(At.width!==0&&At.height!==0){var Ut=this.getViewCenter(),Yt=At.x+At.width/2,qt=At.y+At.height/2;v.translate(Ut.x-Yt,Ut.y-qt);var oe=(D-l[1]-l[3])/At.width,Te=(Y-l[0]-l[2])/At.height,Ge=oe;oe>Te&&(Ge=Te),v.zoom(Ge,Ut)}},kt.prototype.getFormatPadding=function(){var v=this.graph.get("fitViewPadding");return zr(v)},kt.prototype.focusPoint=function(v,l,D){var Y=this,ht=this.getViewCenter(),At=this.getPointByCanvas(ht.x,ht.y),Ut=this.graph.get("group").getMatrix();if(Ut||(Ut=[1,0,0,0,1,0,0,0,1]),l){var Yt=(At.x-v.x)*Ut[0],qt=(At.y-v.y)*Ut[4],oe=0,Te=0,Ge=0,Ue=0;this.graph.get("canvas").animate(function(We){Ge=Yt*We,Ue=qt*We,Y.graph.translate(Ge-oe,Ue-Te),oe=Ge,Te=Ue},Object(st.a)({},D))}else this.graph.translate((At.x-v.x)*Ut[0],(At.y-v.y)*Ut[4])},kt.prototype.getPointByCanvas=function(v,l){var D=this.graph.get("group").getMatrix();return D||(D=[1,0,0,0,1,0,0,0,1]),L({x:v,y:l},D)},kt.prototype.getPointByClient=function(v,l){var D=this.graph.get("canvas").getPointByClient(v,l);return this.getPointByCanvas(D.x,D.y)},kt.prototype.getClientByPoint=function(v,l){var D=this.graph.get("canvas"),Y=this.getCanvasByPoint(v,l),ht=D.getClientByPoint(Y.x,Y.y);return{x:ht.x,y:ht.y}},kt.prototype.getCanvasByPoint=function(v,l){var D=this.graph.get("group").getMatrix();return D||(D=[1,0,0,0,1,0,0,0,1]),je({x:v,y:l},D)},kt.prototype.focus=function(v,l,D){Object(r.x)(v)&&(v=this.graph.findById(v));var Y=v.get("group").getMatrix();Y||(Y=[1,0,0,0,1,0,0,0,1]),v&&this.focusPoint({x:Y[6],y:Y[7]},l,D)},kt.prototype.changeSize=function(v,l){var D=this.graph;if(!Object(r.t)(v)||!Object(r.t)(l))throw Error("invalid canvas width & height, please make sure width & height type is number");D.set({width:v,height:l}),D.get("canvas").changeSize(v,l),D.get("plugins").forEach(function(Y){if(Y.get("gridContainer")){var ht=D.get("minZoom");Object(m.c)(Y.get("container"),{width:v+"px",height:l+"px"}),Object(m.c)(Y.get("gridContainer"),{width:v/ht+"px",height:l/ht+"px",left:0,top:0})}})},kt.prototype.destroy=function(){this.graph=null,this.destroyed=!1},kt}(),Fo={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},Yo=Math.PI,De=Math.sin,an=Math.cos,Mn=De(Yo/8),xn=an(Yo/8),bn=function(v,l){var D=v.getBBox(),Y={x:D.minX,y:D.minY},ht={x:D.maxX,y:D.maxY};if(l){var At=l.getMatrix();At||(At=[1,0,0,0,1,0,0,0,1]),Y=je(Y,At),ht=je(ht,At)}var Ut=Y.x,Yt=Y.y,qt=ht.x,oe=ht.y;return{x:Ut,y:Yt,minX:Ut,minY:Yt,maxX:qt,maxY:oe,width:qt-Ut,height:oe-Yt}},Yn=function(v){var l=v.sourceNode||v.targetNode,D=l.get("group").getMatrix();D||(D=[1,0,0,0,1,0,0,0,1]);var Y=l.getKeyShape().getBBox(),ht=v.loopCfg||{},At=ht.dist||2*Math.max(Y.width,Y.height),Ut=ht.position||Fn.defaultLoopPosition,Yt=[D[6],D[7]],qt=[v.startPoint.x,v.startPoint.y],oe=[v.endPoint.x,v.endPoint.y],Te=Y.height/2,Ge=Y.height/2,Ue=Te*Mn,We=Te*xn,vn=Ge*Mn,Tn=Ge*xn;if(qt[0]===oe[0]&&qt[1]===oe[1]){switch(Ut){case"top":qt=[Yt[0]-Ue,Yt[1]-We],oe=[Yt[0]+vn,Yt[1]-Tn];break;case"top-right":Te=Y.height/2,Ge=Y.width/2,qt=[Yt[0]+(Ue=Te*Mn),Yt[1]-(We=Te*xn)],oe=[Yt[0]+(Tn=Ge*xn),Yt[1]-(vn=Ge*Mn)];break;case"right":Te=Y.width/2,Ge=Y.width/2,qt=[Yt[0]+(We=Te*xn),Yt[1]-(Ue=Te*Mn)],oe=[Yt[0]+(Tn=Ge*xn),Yt[1]+(vn=Ge*Mn)];break;case"bottom-right":Te=Y.width/2,Ge=Y.height/2,qt=[Yt[0]+(We=Te*xn),Yt[1]+(Ue=Te*Mn)],oe=[Yt[0]+(vn=Ge*Mn),Yt[1]+(Tn=Ge*xn)];break;case"bottom":Te=Y.height/2,Ge=Y.height/2,qt=[Yt[0]+(Ue=Te*Mn),Yt[1]+(We=Te*xn)],oe=[Yt[0]-(vn=Ge*Mn),Yt[1]+(Tn=Ge*xn)];break;case"bottom-left":Te=Y.height/2,Ge=Y.width/2,qt=[Yt[0]-(Ue=Te*Mn),Yt[1]+(We=Te*xn)],oe=[Yt[0]-(Tn=Ge*xn),Yt[1]+(vn=Ge*Mn)];break;case"left":Te=Y.width/2,Ge=Y.width/2,qt=[Yt[0]-(We=Te*xn),Yt[1]+(Ue=Te*Mn)],oe=[Yt[0]-(Tn=Ge*xn),Yt[1]-(vn=Ge*Mn)];break;case"top-left":Te=Y.width/2,Ge=Y.height/2,qt=[Yt[0]-(We=Te*xn),Yt[1]-(Ue=Te*Mn)],oe=[Yt[0]-(vn=Ge*Mn),Yt[1]-(Tn=Ge*xn)];break;default:Te=Y.width/2,Ge=Y.width/2,qt=[Yt[0]-(Ue=Te*Mn),Yt[1]-(We=Te*xn)],oe=[Yt[0]+(vn=Ge*Mn),Yt[1]-(Tn=Ge*xn)]}if(ht.clockwise===!1){var Ln=[qt[0],qt[1]];qt=[oe[0],oe[1]],oe=[Ln[0],Ln[1]]}}var Un=[qt[0]-Yt[0],qt[1]-Yt[1]],Hn=(Te+At)/Te,xr=(Ge+At)/Ge;ht.clockwise===!1&&(Hn=(Ge+At)/Ge,xr=(Te+At)/Te);var Or=Xt.c.scale([0,0],Un,Hn),Rr=[Yt[0]+Or[0],Yt[1]+Or[1]],yi=[oe[0]-Yt[0],oe[1]-Yt[1]],Xi=Xt.c.scale([0,0],yi,xr),Zr=[Yt[0]+Xi[0],Yt[1]+Xi[1]];return v.startPoint={x:qt[0],y:qt[1]},v.endPoint={x:oe[0],y:oe[1]},v.controlPoints=[{x:Rr[0],y:Rr[1]},{x:Zr[0],y:Zr[1]}],v},Jn=function(v,l,D,Y,ht){var At=[],Ut=v.getPoint(l);if(Ut===null)return{x:0,y:0,angle:0};if(l<1e-4)At=v.getStartTangent().reverse();else if(l>.9999)At=v.getEndTangent();else{var Yt=v.getPoint(l+1e-4);At.push([Ut.x,Ut.y]),At.push([Yt.x,Yt.y])}var qt=Math.atan2(At[1][1]-At[0][1],At[1][0]-At[0][0]);if(qt<0&&(qt+=2*Yo),D&&(Ut.x+=an(qt)*D,Ut.y+=De(qt)*D),Y){var oe=qt-Yo/2;qt>.5*Yo&&qt<1.5*Yo&&(oe-=Yo),Ut.x+=an(oe)*Y,Ut.y+=De(oe)*Y}var Te={x:Ut.x,y:Ut.y,angle:qt};return ht?(qt>.5*Yo&&qt<1.5*Yo&&(qt-=Yo),Object(st.a)({rotate:qt},Te)):Te},$n=function kt(v,l){if(l(v)===!1)return!1;if(v&&v.children){for(var D=v.children.length-1;D>=0;D--)if(!kt(v.children[D],l))return!1}return!0},_n=function(v,l){typeof l=="function"&&$n(v,l)},fr=function(v,l){typeof l=="function"&&function D(Y,ht){if(Y&&Y.children){for(var At=Y.children.length-1;At>=0;At--)if(!D(Y.children[At],ht))return}return ht(Y)!==!1}(v,l)},sr=function(v,l){return l*(Fo[v]||1)},vr=function(v,l){var D=0,Y=new RegExp("[\u4E00-\u9FA5]+");return v.split("").forEach(function(ht){Y.test(ht)?D+=l:D+=sr(ht,l)}),[D,l]},pr=function(v,l){var D=[],Y={},ht={};v.forEach(function(Yt){ht[Yt.id]=Yt}),v.forEach(function(Yt,qt){var oe=Object(r.c)(Yt);oe.itemType="combo",oe.children=void 0,oe.parentId===oe.id?(console.warn("The parentId for combo "+oe.id+" can not be the same as the combo's id"),delete oe.parentId):oe.parentId&&!ht[oe.parentId]&&(console.warn("The parent combo for combo "+oe.id+" does not exist!"),delete oe.parentId);var Te=Y[oe.id];if(Te){if(oe.children=Te.children,Y[oe.id]=oe,!(Te=oe).parentId)return void D.push(Te);var Ge=Y[Te.parentId];if(Ge)Ge.children?Ge.children.push(oe):Ge.children=[oe];else{var Ue={id:Te.parentId,children:[Te]};Y[Te.parentId]=Ue,Y[oe.id]=oe}}else if(Object(r.x)(Yt.parentId)){var We=Y[Yt.parentId];if(We)We.children?We.children.push(oe):We.children=[oe],Y[oe.id]=oe;else{var vn={id:Yt.parentId,children:[oe]};Y[vn.id]=vn,Y[oe.id]=oe}}else D.push(oe),Y[oe.id]=oe});var At={};(l||[]).forEach(function(Yt){At[Yt.id]=Yt;var qt=Y[Yt.comboId];if(qt){var oe={id:Yt.id,comboId:Yt.comboId};qt.children?qt.children.push(oe):qt.children=[oe],oe.itemType="node",Y[Yt.id]=oe}});var Ut=0;return D.forEach(function(Yt){Yt.depth=Ut+10,$n(Yt,function(qt){var oe,Te=Y[qt.id].itemType;oe=Te==="node"?Y[qt.comboId]:Y[qt.parentId],qt.depth=oe&&Te==="node"?Ut+1:Ut+10,Ut<qt.depth&&(Ut=qt.depth);var Ge=At[qt.id];return Ge&&(Ge.depth=qt.depth),!0})}),D},Vr=function(v,l,D){var Y,ht=v,At={root:{children:v}},Ut=!1,Yt="root";(v||[]).forEach(function(Ue){if(!Ut)return Ue.id===l?(Y=Ue,Ue.itemType==="combo"?Y.parentId=D:Y.comboId=D,void(Ut=!0)):void _n(Ue,function(We){return At[We.id]={children:We.children},ht=At[We.parentId||We.comboId||"root"].children,!We||!We.removed&&l!==We.id||!ht||(Yt=We.parentId||We.comboId||"root",Y=We,We.itemType==="combo"?Y.parentId=D:Y.comboId=D,Ut=!0,!1)})});var qt=(ht=At[Yt].children)?ht.indexOf(Y):-1;if(qt>-1&&ht.splice(qt,1),Ut||(Y={id:l,itemType:"node",comboId:D},At[l]={children:void 0}),l){var oe=!1;if(D){var Te=0;(v||[]).forEach(function(Ue){oe||_n(Ue,function(We){return D!==We.id||(oe=!0,We.children?We.children.push(Y):We.children=[Y],Te=We.depth,Y.itemType==="node"?Y.depth=Te+2:Y.depth=Te+1,!1)})})}else D&&oe||Y.itemType==="node"||v.push(Y);var Ge=Y.depth;_n(Y,function(Ue){return Ue.itemType==="node"?Ge+=2:Ge+=1,Ue.depth=Ge,!0})}return v},Ur=function(v,l){var D={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return v&&v.length!==0&&(v.forEach(function(Y){var ht=l.findById(Y.id);if(ht&&ht.isVisible()){ht.set("bboxCanvasCache",void 0);var At=ht.getCanvasBBox();At.x&&D.minX>At.minX&&(D.minX=At.minX),At.y&&D.minY>At.minY&&(D.minY=At.minY),At.x&&D.maxX<At.maxX&&(D.maxX=At.maxX),At.y&&D.maxY<At.maxY&&(D.maxY=At.maxY)}}),D.x=(D.minX+D.maxX)/2,D.y=(D.minY+D.maxY)/2,D.width=D.maxX-D.minX,D.height=D.maxY-D.minY,D.centerX=(D.minX+D.maxX)/2,D.centerY=(D.minY+D.maxY)/2,Object.keys(D).forEach(function(Y){D[Y]!==1/0&&D[Y]!==-1/0||(D[Y]=void 0)})),D},Ii=function(v){var l=Object(r.t)(v.x)||Object(r.t)(v.y)||v.type||v.anchorPoints||v.size;return v.style&&(l=l||Object(r.t)(v.style.r)||Object(r.t)(v.style.width)||Object(r.t)(v.style.height)||Object(r.t)(v.style.rx)||Object(r.t)(v.style.ry)),l},br=function(v){var l={};return Object.keys(v).forEach(function(D){var Y=v[D];if(Object(r.v)(Y)){var ht={};Object.keys(Y).forEach(function(At){var Ut=Y[At];(At!=="img"||Object(r.x)(Ut))&&(ht[At]=Object(r.c)(Ut))}),l[D]=ht}else l[D]=Object(r.c)(Y)}),l};function hi(kt){return(hi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(kt)}function Wr(kt){if(typeof kt!="string")return kt;var v=function(Rr){if(typeof Rr!="string")return Rr;try{return JSON.parse(Rr.trim())}catch(yi){return Rr.trim()}},l=v(kt);if(typeof l!="string")return l;for(var D=function(Rr){return Rr[Rr.length-1]},Y=kt.trim(),ht=[],At=[],Ut=function(){for(var Rr=[],yi=0;yi<arguments.length;yi++)Rr[yi]=arguments[yi];return Rr.some(function(Xi){return D(At)===Xi})},Yt=null,qt=0,oe="";qt<Y.length;){var Te=Y[qt],Ge=Ut('"',"'");if(Ge||Te.trim()){var Ue=Y[qt-1]==="\\",We=Ut("}"),vn=Ut("]"),Tn=Ut(","),Ln=D(ht);if(Ge)if(D(At)!==Te||Ue)oe+=Te;else{At.pop();var Un=v(oe);Ln.push(Un),Yt=Un,oe=""}else if(vn&&Te===",")oe&&(Ln.push(v(oe)),oe="");else if(We&&Te===":")At.push(","),oe&&(Ln.push(oe),oe="");else if(Tn&&Te===",")oe&&(Ln.push(v(oe)),oe=""),At.pop();else if(Te==="}"&&(We||Tn)){oe&&(Ln.push(v(oe)),oe=""),Tn&&At.pop();for(var Hn={},xr=1;xr<Ln.length;xr+=2)Hn[Ln[xr-1]]=Ln[xr];ht.pop(),ht.length&&D(ht).push(Hn),At.pop(),Yt=Hn}else Te==="]"&&vn?(oe&&(Ln.push(v(oe)),oe=""),ht.pop(),ht.length&&D(ht).push(Ln),At.pop(),Yt=Ln):Te==="{"?(ht.push([]),At.push("}")):Te==="["?(ht.push([]),At.push("]")):Te==='"'?At.push('"'):Te==="'"?At.push("'"):oe+=Te;qt+=1}else qt+=1}return Yt||oe}function ji(kt,v){var l;v===void 0&&(v={x:0,y:0});var D=Object(st.a)({x:0,y:0,width:0,height:0},v);if((l=kt.children)===null||l===void 0?void 0:l.length){var Y=kt.attrs,ht=Y===void 0?{}:Y,At=ht.marginTop,Ut=Object(st.a)({},v);At&&(Ut.y+=At);for(var Yt=0;Yt<kt.children.length;Yt++){kt.children[Yt].attrs.key=(ht.key||"root")+" -"+Yt+" ";var qt=ji(kt.children[Yt],Ut);if(qt.bbox){var oe=qt.bbox;qt.attrs.next==="inline"?Ut.x+=qt.bbox.width:Ut.y+=qt.bbox.height,oe.width+oe.x>D.width&&(D.width=oe.width+oe.x),oe.height+oe.y>D.height&&(D.height=oe.height+oe.y)}}}return kt.bbox=function(Te,Ge,Ue){var We,vn,Tn=Te.attrs,Ln=Tn===void 0?{}:Tn,Un={x:Ge.x||0,y:Ge.y||0,width:Ue.width||0,height:Ue.height||0};switch(Te.type){case"maker":case"circle":Ln.r&&(vn=2*Ln.r,We=2*Ln.r);break;case"text":Ln.text&&(vn=vr(Ln.text,Ln.fontSize||12)[0],We=16,Un.y+=We,Un.height=We,Un.width=vn,Te.attrs=Object(st.a)({fontSize:12,fill:"#000"},Ln));break;default:Ln.width&&(vn=Ln.width),Ln.height&&(We=Ln.height)}return We>=0&&(Un.height=We),vn>=0&&(Un.width=vn),Ln.marginTop&&(Un.y+=Ln.marginTop),Ln.marginLeft&&(Un.x+=Ln.marginLeft),Un}(kt,v,D),kt.attrs=Object(st.a)(Object(st.a)({},kt.attrs),kt.bbox),kt}function zi(kt){var v={},l=function(Y){var ht=function(Yt){return function(qt){for(var oe=Yt.length,Te=[],Ge=0,Ue="";Ge<oe;)if(Yt[Ge]==="{"&&Yt[Ge+1]==="{")Te.push(Ue),Ue="",Ge+=2;else if(Yt[Ge]==="}"&&Yt[Ge+1]==="}"){if(Te.length){var We=Te.pop();Ue=Object(r.i)(qt,Ue,We.endsWith("=")?'"{'+Ue+'}"':Ue),Te.push(We+Ue)}Ge+=2,Ue=""}else Ue+=Yt[Ge],Ge+=1;return Te.push(Ue),Te.map(function(vn,Tn){return Te[Tn-1]&&Te[Tn-1].endsWith("=")?'"{'+vn+'}"':vn}).join("")}}(typeof kt=="function"?kt(Y):kt)(Y),At=document.createElement("div");At.innerHTML=ht;var Ut=ji(function Yt(qt,oe){var Te={},Ge=qt.getAttributeNames&&qt.getAttributeNames()||[],Ue=qt.children&&Array.from(qt.children).map(function(Tn){return Yt(Tn,oe)}),We={},vn=qt.tagName?qt.tagName.toLowerCase():"group";return vn==="text"&&(Te.text=qt.innerText),We.type=vn,vn==="img"&&(We.type="image"),Array.from(Ge).forEach(function(Tn){var Ln=Tn.split("-").reduce(function(xr,Or){return xr+Or.charAt(0).toUpperCase()+Or.slice(1)}),Un=qt.getAttribute(Tn);try{if(Ln==="style"||Ln==="attrs"){var Hn=Wr(Un);Te=Object(st.a)(Object(st.a)({},Te),Hn)}else We[Ln]=Wr(Un)}catch(xr){if(Ln==="style")throw xr;We[Ln]=Un}}),We.attrs=Te,oe&&oe.style&&We.name&&hi(oe.style[We.name])==="object"&&(We.attrs=Object(st.a)(Object(st.a)({},We.attrs),oe.style[We.name])),oe&&oe.style&&We.keyshape&&(We.attrs=Object(st.a)(Object(st.a)({},We.attrs),oe.style)),Ue.length&&(We.children=Ue),We}(At.children[0],Y));return At.remove(),Ut};return{draw:function(Y,ht){var At=l(Y),Ut=ht;return function Yt(qt){var oe=qt.attrs,Te=oe===void 0?{}:oe,Ge=qt.bbox,Ue=qt.type,We=qt.children,vn=Object(st.c)(qt,["attrs","bbox","type","children"]);if(qt.type!=="group"){var Tn=ht.addShape(qt.type,Object(st.a)({attrs:Te,origin:{bbox:Ge,type:Ue,children:We}},vn));qt.keyshape&&(Ut=Tn)}qt.children&&qt.children.forEach(function(Ln){return Yt(Ln)})}(At),v[Y.id]=[At],Ut},update:function(Y,ht){v[Y.id]||(v[Y.id]=[]);var At=ht.getContainer(),Ut=At.get("children"),Yt=l(Y),qt=function Ge(Ue,We){var vn,Tn,Ln,Un,Hn=(Ue||{}).type,xr=((We==null?void 0:We.attrs)||{}).key;if(xr&&Ue&&(Ue.attrs.key=xr),!Ue&&We)return{action:"delete",val:We,type:Hn,key:xr};if(Ue&&!We)return{action:"add",val:Ue,type:Hn};if(!Ue&&!We)return{action:"same",type:Hn};var Or=[];if(((vn=Ue.children)===null||vn===void 0?void 0:vn.length)>0||((Tn=We.children)===null||Tn===void 0?void 0:Tn.length)>0)for(var Rr=Math.max((Ln=Ue.children)===null||Ln===void 0?void 0:Ln.length,(Un=We.children)===null||Un===void 0?void 0:Un.length),yi=We.children||[],Xi=Ue.children||[],Zr=0;Zr<Rr;Zr+=1)Or.push(Ge(Xi[Zr],yi[Zr]));var ki=Object.keys(We.attrs),Ba=Object.keys(Ue.attrs);return We.type!==Ue.type?{action:"restructure",nowTarget:Ue,formerTarget:We,key:xr,children:Or}:ki.filter(function(Ha){return Ha!=="children"}).some(function(Ha){return Ue.attrs[Ha]!==We.attrs[Ha]||!Ba.includes(Ha)})?{action:"change",val:Ue,children:Or,type:Hn,key:xr}:{action:"same",children:Or,type:Hn,key:xr}}(Yt,v[Y.id].pop()),oe=function Ge(Ue){var We;Ue.type!=="group"&&At.addShape(Ue.type,{attrs:Ue.attrs}),((We=Ue.children)===null||We===void 0?void 0:We.length)&&Ue.children.map(function(vn){return Ge(vn)})},Te=function Ge(Ue){var We,vn=Ut.find(function(Tn){return Tn.attrs.key===Ue.attrs.key});vn&&At.removeChild(vn),((We=Ue.children)===null||We===void 0?void 0:We.length)&&Ue.children.map(function(Tn){return Ge(Tn)})};(function Ge(Ue){var We=Ue.key;if(Ue.type!=="group"){var vn=Ut.find(function(Ln){return Ln.attrs.key===We});switch(Ue.action){case"change":if(vn){var Tn=Ue.val.keyshape?ht.getOriginStyle():{};vn.attr(Object(st.a)(Object(st.a)({},Tn),Ue.val.attrs))}break;case"add":oe(Ue.val);break;case"delete":Te(Ue.val);break;case"restructure":Te(Ue.formerTarget),oe(Ue.nowTarget)}}Ue.children&&Ue.children.forEach(function(Ln){return Ge(Ln)})})(qt),v[Y.id].push(Yt)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Ui={};function ra(kt){return Ui[kt]||(Ui[kt]=Object(r.I)(kt)),Ui[kt]}var da={defaultShapeType:"defaultType",className:null,getShape:function(v){return this[v]||this[this.defaultShapeType]||this["simple-circle"]},draw:function(v,l,D){var Y=this.getShape(v),ht=Y.draw(l,D);return Y.afterDraw&&Y.afterDraw(l,D,ht),ht},baseUpdate:function(v,l,D){var Y=this.getShape(v);Y.update&&Y.update(l,D),Y.afterUpdate&&Y.afterUpdate(l,D)},setState:function(v,l,D,Y){this.getShape(v).setState(l,D,Y)},shouldUpdate:function(v){return!!this.getShape(v).update},getControlPoints:function(v,l){return this.getShape(v).getControlPoints(l)},getAnchorPoints:function(v,l){return this.getShape(v).getAnchorPoints(l)}},Di={options:{},draw:function(v,l){return this.drawShape(v,l)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(v){return v.controlPoints},getAnchorPoints:function(v){var l=this.options.anchorPoints;return v.anchorPoints||l}},kr=function(){function kt(){}return kt.registerFactory=function(v,l){var D=ra(v),Y=da,ht=Object(st.a)(Object(st.a)({},Y),l);return kt[D]=ht,ht.className=D,ht},kt.getFactory=function(v){return kt[ra(v)]},kt.registerNode=function(v,l,D){var Y,ht=kt.Node;if(typeof l=="string"||typeof l=="function"){var At=zi(l);Y=Object(st.a)(Object(st.a)({},ht.getShape("single-node")),At)}else if(l.jsx)At=zi(l.jsx),Y=Object(st.a)(Object(st.a)(Object(st.a)({},ht.getShape("single-node")),At),l);else{ht.getShape(D);var Ut=D?ht.getShape(D):Di;Y=Object(st.a)(Object(st.a)({},Ut),l)}return Y.type=v,Y.itemType="node",ht[v]=Y,Y},kt.registerEdge=function(v,l,D){var Y=kt.Edge,ht=D?Y.getShape(D):Di,At=Object(st.a)(Object(st.a)({},ht),l);return At.type=v,At.itemType="edge",Y[v]=At,At},kt.registerCombo=function(v,l,D){var Y=kt.Combo,ht=D?Y.getShape(D):Di,At=Object(st.a)(Object(st.a)({},ht),l);return At.type=v,At.itemType="combo",Y[v]=At,At},kt}(),er=kr;kr.registerFactory("node",{defaultShapeType:"circle"}),kr.registerFactory("edge",{defaultShapeType:"line"}),kr.registerFactory("combo",{defaultShapeType:"circle"});var Wi=["startArrow","endArrow"],_a=function(){function kt(v){this._cfg={},this.destroyed=!1;var l={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(l,this.getDefaultCfg(),v);var D=this.get("model"),Y=D.id,ht=this.get("type");Y||(Y=ri(ht),this.get("model").id=Y),this.set("id",Y);var At=v.group;At&&(At.set("item",this),At.set("id",Y)),this.init(),this.draw();var Ut=D.shape||D.type||(ht==="edge"?"line":"circle"),Yt=this.get("shapeFactory");if(Yt&&Yt[Ut]){var qt=Yt[Ut].options;if(qt&&qt.stateStyles){var oe=this.get("styles")||D.stateStyles;oe=Object(r.e)({},qt.stateStyles,oe),this.set("styles",oe)}}}return kt.prototype.calculateBBox=function(){var v=this.get("keyShape"),l=this.get("group"),D=bn(v,l);return D.x=D.minX,D.y=D.minY,D.width=D.maxX-D.minX,D.height=D.maxY-D.minY,D.centerX=(D.minX+D.maxX)/2,D.centerY=(D.minY+D.maxY)/2,D},kt.prototype.calculateCanvasBBox=function(){var v=this.get("keyShape"),l=this.get("group"),D=bn(v,l);return D.x=D.minX,D.y=D.minY,D.width=D.maxX-D.minX,D.height=D.maxY-D.minY,D.centerX=(D.minX+D.maxX)/2,D.centerY=(D.minY+D.maxY)/2,D},kt.prototype.drawInner=function(){var v=this.get("shapeFactory"),l=this.get("group"),D=this.get("model");l.clear();var Y=D.visible;if(Y===void 0||Y||this.changeVisibility(Y),v){this.updatePosition(D);var ht=this.getShapeCfg(D),At=ht.type,Ut=v.draw(At,ht,l);Ut&&(this.set("keyShape",Ut),Ut.set("isKeyShape",!0),Ut.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",At),this.restoreStates(v,At)}},kt.prototype.setOriginStyle=function(v){var l=this.get("group").get("children"),D=this.getKeyShape(),Y=this,ht=D.get("name");if(this.get("originStyle")){var At=this.getOriginStyle();ht&&!At[ht]&&(At[ht]={});var Ut=this.getCurrentStatesStyle();Object(r.f)(l,function(qt){var oe=qt.get("name"),Te=qt.attr();if(oe&&oe!==ht){var Ge=Ut[oe];At[oe]||(At[oe]={}),Ge?Object.keys(Te).forEach(function(vn){var Tn=Te[vn];Tn!==Ge[vn]&&(At[oe][vn]=Tn)}):At[oe]=Object(r.c)(Te)}else{var Ue=qt.attr(),We=Object(st.a)(Object(st.a)({},Ut),Ut[ht]);Object.keys(Ue).forEach(function(vn){var Tn=Ue[vn];Object(r.w)(Tn)&&Wi.indexOf(oe)===-1||We[vn]!==Tn&&(ht?At[ht][vn]=Tn:At[vn]=Tn)})}}),At.path&&delete At.path,At.matrix&&delete At.matrix,Y.set("originStyle",At)}else{var Yt={};Object(r.f)(l,function(qt){var oe=qt.get("type"),Te=qt.get("name");if(Te&&Te!==ht)Yt[Te]=oe!=="image"?Object(r.c)(qt.attr()):Y.getShapeStyleByName(Te);else{var Ge=Y.getShapeStyleByName();if(Ge.path&&delete Ge.path,Ge.matrix&&delete Ge.matrix,ht)if(Te)Yt[ht]=Ge;else{var Ue=ri("shape");qt.set("name",Ue),Yt[Ue]=oe!=="image"?Object(r.c)(qt.attr()):Y.getShapeStyleByName(Te)}else Object.assign(Yt,Ge)}}),Y.set("originStyle",Yt)}},kt.prototype.restoreStates=function(v,l){var D=this,Y=D.get("states");Object(r.f)(Y,function(ht){v.setState(l,ht,!0,D)})},kt.prototype.init=function(){var v=er.getFactory(this.get("type"));this.set("shapeFactory",v)},kt.prototype.get=function(v){return this._cfg[v]},kt.prototype.set=function(v,l){Object(r.w)(v)?this._cfg=Object(st.a)(Object(st.a)({},this._cfg),v):this._cfg[v]=l},kt.prototype.getDefaultCfg=function(){return{}},kt.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null)},kt.prototype.beforeDraw=function(){},kt.prototype.afterDraw=function(){},kt.prototype.afterUpdate=function(){},kt.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},kt.prototype.getShapeStyleByName=function(v){var l,D=this.get("group");if(l=v?D.find(function(ht){return ht.get("name")===v}):this.getKeyShape()){var Y={};return Object(r.f)(l.attr(),function(ht,At){At!=="img"&&(Y[At]=ht)}),Y}return{}},kt.prototype.getShapeCfg=function(v){var l=this.get("styles");if(l){var D=v;return D.style=Object(st.a)(Object(st.a)({},l),v.style),D}return v},kt.prototype.getStateStyle=function(v){var l=this.get("styles");return l&&l[v]},kt.prototype.getOriginStyle=function(){return this.get("originStyle")},kt.prototype.getCurrentStatesStyle=function(){var v=this,l={},D=v.getStates();return D&&D.length?(Object(r.f)(v.getStates(),function(Y){l=Object.assign(l,v.getStateStyle(Y))}),l):this.getOriginStyle()},kt.prototype.setState=function(v,l){var D=this.get("states"),Y=this.get("shapeFactory"),ht=v,At=v;Object(r.x)(l)&&(ht=v+":"+l,At=v+":");var Ut=D;if(Object(r.n)(l)){var Yt=D.indexOf(At);if(l){if(Yt>-1)return;D.push(ht)}else Yt>-1&&D.splice(Yt,1)}else if(Object(r.x)(l)){var qt=D.filter(function(Te){return Te.includes(At)});qt.length>0&&this.clearStates(qt),(Ut=Ut.filter(function(Te){return!Te.includes(At)})).push(ht),this.set("states",Ut)}if(Y){var oe=this.get("model").type;Y.setState(oe,v,l,this)}},kt.prototype.clearStates=function(v){var l=this,D=l.getStates(),Y=l.get("shapeFactory"),ht=l.get("model").type;v||(v=D),Object(r.x)(v)&&(v=[v]);var At=D.filter(function(Ut){return v.indexOf(Ut)===-1});l.set("states",At),v.forEach(function(Ut){Y.setState(ht,Ut,!1,l)})},kt.prototype.getContainer=function(){return this.get("group")},kt.prototype.getKeyShape=function(){return this.get("keyShape")},kt.prototype.getModel=function(){return this.get("model")},kt.prototype.getType=function(){return this.get("type")},kt.prototype.getID=function(){return this.get("id")},kt.prototype.isItem=function(){return!0},kt.prototype.getStates=function(){return this.get("states")},kt.prototype.hasState=function(v){return this.getStates().indexOf(v)>=0},kt.prototype.refresh=function(){var v=this.get("model");this.updatePosition(v),this.updateShape(),this.afterUpdate(),this.clearCache()},kt.prototype.isOnlyMove=function(v){return!1},kt.prototype.update=function(v,l){l===void 0&&(l=!1);var D=this.get("model"),Y=D.visible,ht=v.visible;Y!==ht&&ht!==void 0&&this.changeVisibility(ht);var At=D.x,Ut=D.y;v.x=isNaN(v.x)?D.x:v.x,v.y=isNaN(v.y)?D.y:v.y;var Yt=this.get("styles");if(v.stateStyles){var qt=v.stateStyles;Object(r.A)(Yt,qt),delete v.stateStyles}Object.assign(D,v),l?this.updatePosition(v):(At===v.x&&Ut===v.y||this.updatePosition(v),this.updateShape()),this.afterUpdate(),this.clearCache()},kt.prototype.updateShape=function(){var v=this.get("shapeFactory"),l=this.get("model"),D=l.type;if(v.shouldUpdate(D)&&D===this.get("currentShape")){var Y=this.getShapeCfg(l);v.baseUpdate(D,Y,this)}else this.draw();this.setOriginStyle(l),this.restoreStates(v,D)},kt.prototype.updatePosition=function(v){var l=this.get("model"),D=Object(r.s)(v.x)?l.x:v.x,Y=Object(r.s)(v.y)?l.y:v.y,ht=this.get("group");Object(r.s)(D)||Object(r.s)(Y)||(ht.resetMatrix(),he(ht,{x:D,y:Y}),l.x=D,l.y=Y,this.clearCache())},kt.prototype.getBBox=function(){var v=this.get("bboxCache");return v||(v=this.calculateBBox(),this.set("bboxCache",v)),v},kt.prototype.getCanvasBBox=function(){var v=this.get("bboxCanvasCache");return v||(v=this.calculateCanvasBBox(),this.set("bboxCanvasCache",v)),v},kt.prototype.toFront=function(){this.get("group").toFront()},kt.prototype.toBack=function(){this.get("group").toBack()},kt.prototype.show=function(){this.changeVisibility(!0)},kt.prototype.hide=function(){this.changeVisibility(!1)},kt.prototype.changeVisibility=function(v){var l=this.get("group");v?l.show():l.hide(),this.set("visible",v)},kt.prototype.isVisible=function(){return this.get("visible")},kt.prototype.enableCapture=function(v){var l=this.get("group");l&&l.set("capture",v)},kt.prototype.destroy=function(){if(!this.destroyed){var v=this.get("animate"),l=this.get("group");v&&l.stopAnimate(),this.clearCache(),l.remove(),this._cfg=null,this.destroyed=!0}},kt}(),Ei={source:"start",target:"end"},Yi=function(kt){function v(){return kt!==null&&kt.apply(this,arguments)||this}return Object(st.b)(v,kt),v.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},v.prototype.setEnd=function(l,D){var Y=Ei[l]+"Point",ht=l+"Node",At=this.get(ht);At&&!At.destroyed&&At.removeEdge(this),Object(r.w)(D)?(this.set(Y,D),this.set(ht,null)):(D.addEdge(this),this.set(ht,D),this.set(Y,null))},v.prototype.getLinkPoint=function(l,D,Y){var ht=Ei[l]+"Point",At=l+"Node",Ut=this.get(ht);if(!Ut){var Yt=this.get(At),qt=l+"Anchor",oe=this.getPrePoint(l,Y),Te=D[qt];Object(r.s)(Te)||(Ut=Yt.getLinkPointByAnchor(Te)),Ut=Ut||Yt.getLinkPoint(oe),Object(r.s)(Ut.index)||this.set(l+"AnchorIndex",Ut.index)}return Ut},v.prototype.getPrePoint=function(l,D){if(D&&D.length)return D[l==="source"?0:D.length-1];var Y=l==="source"?"target":"source";return this.getEndPoint(Y)},v.prototype.getEndPoint=function(l){var D=l+"Node",Y=Ei[l]+"Point",ht=this.get(D);return ht?ht.get("model"):this.get(Y)},v.prototype.getControlPointsByCenter=function(l){var D=this.getEndPoint("source"),Y=this.getEndPoint("target"),ht=this.get("shapeFactory"),At=l.type;return ht.getControlPoints(At,{startPoint:D,endPoint:Y})},v.prototype.getEndCenter=function(l){var D=l+"Node",Y=Ei[l]+"Point",ht=this.get(D);if(ht){var At=ht.getBBox();return{x:At.centerX,y:At.centerY}}return this.get(Y)},v.prototype.init=function(){kt.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},v.prototype.getShapeCfg=function(l){var D=this.get("linkCenter"),Y=kt.prototype.getShapeCfg.call(this,l);if(D)Y.startPoint=this.getEndCenter("source"),Y.endPoint=this.getEndCenter("target");else{var ht=Y.controlPoints||this.getControlPointsByCenter(Y);Y.startPoint=this.getLinkPoint("source",l,ht),Y.endPoint=this.getLinkPoint("target",l,ht)}return Y.sourceNode=this.get("sourceNode"),Y.targetNode=this.get("targetNode"),Y},v.prototype.getModel=function(){var l=this.get("model"),D=this.get("sourceNode"),Y=this.get("targetNode");return D?delete l.sourceNode:l.source=this.get("startPoint"),Y?delete l.targetNode:l.target=this.get("endPoint"),Object(r.x)(l.source)||Object(r.w)(l.source)||(l.source=l.source.getID()),Object(r.x)(l.target)||Object(r.w)(l.target)||(l.target=l.target.getID()),l},v.prototype.setSource=function(l){this.setEnd("source",l),this.set("source",l)},v.prototype.setTarget=function(l){this.setEnd("target",l),this.set("target",l)},v.prototype.getSource=function(){return this.get("source")},v.prototype.getTarget=function(){return this.get("target")},v.prototype.updatePosition=function(){},v.prototype.update=function(l,D){D===void 0&&(D=!1);var Y=this.get("model"),ht=Y.visible,At=l.visible;ht!==At&&At!==void 0&&this.changeVisibility(At);var Ut=this.get("styles");if(l.stateStyles){var Yt=l.stateStyles;Object(r.A)(Ut,Yt),delete l.stateStyles}Object.assign(Y,l),this.updateShape(),this.afterUpdate(),this.clearCache()},v.prototype.destroy=function(){var l=this.get("sourceNode"),D=this.get("targetNode");l&&!l.destroyed&&l.removeEdge(this),D&&!D.destroyed&&D.removeEdge(this),kt.prototype.destroy.call(this)},v}(_a),ea=function(kt){function v(){return kt!==null&&kt.apply(this,arguments)||this}return Object(st.b)(v,kt),v.prototype.getNearestPoint=function(l,D){for(var Y=0,ht=l[0],At=$t(l[0],D),Ut=0;Ut<l.length;Ut++){var Yt=l[Ut],qt=$t(Yt,D);qt<At&&(ht=Yt,At=qt,Y=Ut)}return ht.anchorIndex=Y,ht},v.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},v.prototype.getEdges=function(){return this.get("edges")},v.prototype.getInEdges=function(){var l=this;return this.get("edges").filter(function(D){return D.get("target")===l})},v.prototype.getOutEdges=function(){var l=this;return this.get("edges").filter(function(D){return D.get("source")===l})},v.prototype.getNeighbors=function(l){var D=this,Y=this.get("edges");return l==="target"?Y.filter(function(ht){return ht.getSource()===D}).map(function(ht){return ht.getTarget()}):l==="source"?Y.filter(function(ht){return ht.getTarget()===D}).map(function(ht){return ht.getSource()}):Y.map(function(ht){return ht.getSource()===D?ht.getTarget():ht.getSource()})},v.prototype.getLinkPointByAnchor=function(l){return this.getAnchorPoints()[l]},v.prototype.getLinkPoint=function(l){var D,Y,ht=this.get("keyShape").get("type"),At=this.get("type"),Ut=this.getBBox();At==="combo"?(D=Ut.centerX||(Ut.maxX+Ut.minX)/2,Y=Ut.centerY||(Ut.maxY+Ut.minY)/2):(D=Ut.centerX,Y=Ut.centerY);var Yt,qt=this.getAnchorPoints();switch(ht){case"circle":Yt=Kn({x:D,y:Y,r:Ut.width/2},l);break;case"ellipse":Yt=$e({x:D,y:Y,rx:Ut.width/2,ry:Ut.height/2},l);break;default:Yt=Zn(Ut,l)}var oe=Yt;return qt.length&&(oe||(oe=l),oe=this.getNearestPoint(qt,oe)),oe||(oe={x:D,y:Y}),oe},v.prototype.getAnchorPoints=function(){var l=this.get("anchorPointsCache");if(!l){l=[];var D=this.get("shapeFactory"),Y=this.getBBox(),ht=this.get("model"),At=this.getShapeCfg(ht),Ut=ht.type,Yt=D.getAnchorPoints(Ut,At)||[];Object(r.f)(Yt,function(qt,oe){var Te={x:Y.minX+qt[0]*Y.width,y:Y.minY+qt[1]*Y.height,anchorIndex:oe};l.push(Te)}),this.set("anchorPointsCache",l)}return l},v.prototype.addEdge=function(l){this.get("edges").push(l)},v.prototype.lock=function(){this.set("locked",!0)},v.prototype.unlock=function(){this.set("locked",!1)},v.prototype.hasLocked=function(){return this.get("locked")},v.prototype.removeEdge=function(l){var D=this.getEdges(),Y=D.indexOf(l);Y>-1&&D.splice(Y,1)},v.prototype.clearCache=function(){this.set("bboxCache",null),this.set("anchorPointsCache",null)},v.prototype.isOnlyMove=function(l){if(!l)return!1;var D=!Object(r.s)(l.x),Y=!Object(r.s)(l.y),ht=Object.keys(l);return ht.length===1&&(D||Y)||ht.length===2&&D&&Y},v}(_a),no=function(kt){function v(){return kt!==null&&kt.apply(this,arguments)||this}return Object(st.b)(v,kt),v.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},v.prototype.getShapeCfg=function(l){var D=this.get("styles"),Y=this.get("bbox");if(D&&Y){var ht=l,At={r:Math.hypot(Y.height,Y.width)/2||Fn.defaultCombo.size[0]/2,width:Y.width||Fn.defaultCombo.size[0],height:Y.height||Fn.defaultCombo.size[1]};ht.style=Object(st.a)(Object(st.a)(Object(st.a)({},D),l.style),At);var Ut=l.padding||Fn.defaultCombo.padding;return Object(r.t)(Ut)?(At.r+=Ut,At.width+=2*Ut,At.height+=2*Ut):(At.r+=Ut[0],At.width+=Ut[1]+Ut[3]||2*Ut[1],At.height+=Ut[0]+Ut[2]||2*Ut[0]),this.set("sizeCache",At),ht}return l},v.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var l=this.get("keyShape"),D=this.get("group"),Y=bn(l,D);Y.centerX=(Y.minX+Y.maxX)/2,Y.centerY=(Y.minY+Y.maxY)/2;var ht=this.get("sizeCache"),At=this.get("bboxCache")||{},Ut=At.x,Yt=At.x;return ht?(l.get("type")==="circle"?(Y.width=2*ht.r,Y.height=2*ht.r):(Y.width=ht.width,Y.height=ht.height),Y.minX=Y.centerX-Y.width/2,Y.minY=Y.centerY-Y.height/2,Y.maxX=Y.centerX+Y.width/2,Y.maxY=Y.centerY+Y.height/2):(Y.width=Y.maxX-Y.minX,Y.height=Y.maxY-Y.minY,Y.centerX=(Y.minX+Y.maxX)/2,Y.centerY=(Y.minY+Y.maxY)/2),Y.x=Y.minX,Y.y=Y.minY,Y.x===Ut&&Y.y===Yt||this.set("anchorPointsCache",null),Y}},v.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},v.prototype.getNodes=function(){return this.get("nodes")},v.prototype.getCombos=function(){return this.get("combos")},v.prototype.addChild=function(l){switch(l.getType()){case"node":this.addNode(l);break;case"combo":this.addCombo(l);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},v.prototype.addCombo=function(l){return this.get("combos").push(l),!0},v.prototype.addNode=function(l){return this.get("nodes").push(l),!0},v.prototype.removeChild=function(l){switch(l.getType()){case"node":this.removeNode(l);break;case"combo":this.removeCombo(l);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},v.prototype.removeCombo=function(l){if(l){var D=this.getCombos(),Y=D.indexOf(l);return Y>-1&&(D.splice(Y,1),!0)}},v.prototype.removeNode=function(l){if(l){var D=this.getNodes(),Y=D.indexOf(l);return Y>-1&&(D.splice(Y,1),!0)}},v.prototype.isOnlyMove=function(l){return!1},v.prototype.getBBox=function(){return this.set("bboxCanvasCache",null),this.calculateCanvasBBox()},v.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null),this.set("anchorPointsCache",null)},v.prototype.destroy=function(){if(!this.destroyed){var l=this.get("animate"),D=this.get("group");l&&D.stopAnimate(),this.clearCache(),this.set("sizeCache",null),this.set("bbox",null),D.remove(),this._cfg=null,this.destroyed=!0}},v}(ea),$i=function(){function kt(v){this.graph=v,this.destroyed=!1}return kt.prototype.addItem=function(v,l){var D=this,Y=this.graph,ht=v==="vedge"?"edge":v,At=Y.get(ht+"Group")||Y.get("group"),Ut=Object(r.I)(ht),Yt=null,qt=Y.get(ht+Object(r.I)("stateStyles"))||{},oe=Y.get("default"+Ut);l.stateStyles&&(qt=l.stateStyles),oe&&Object(r.f)(oe,function(Hn,xr){Object(r.v)(Hn)&&!Object(r.m)(Hn)?l[xr]=Object(r.e)({},Hn,l[xr]):Object(r.m)(Hn)?l[xr]=l[xr]||Object(r.c)(oe[xr]):l[xr]=l[xr]||oe[xr]});var Te=Y.get(ht+"Mapper");if(Te){var Ge=Te(l);Ge.stateStyles&&(qt=Ge.stateStyles,delete Ge.stateStyles),Object(r.f)(Ge,function(Hn,xr){Object(r.v)(Hn)&&!Object(r.m)(Hn)?l[xr]=Object(r.e)({},l[xr],Hn):l[xr]=Ge[xr]||l[xr]})}if(Y.emit("beforeadditem",{type:v,model:l}),v==="edge"||v==="vedge"){var Ue=void 0,We=void 0;if(Ue=l.source,We=l.target,Ue&&Object(r.x)(Ue)&&(Ue=Y.findById(Ue)),We&&Object(r.x)(We)&&(We=Y.findById(We)),!Ue||!We)return void console.warn("The source or target node of edge "+l.id+" does not exist!");Ue.getType&&Ue.getType()==="combo"&&(l.isComboEdge=!0),We.getType&&We.getType()==="combo"&&(l.isComboEdge=!0),Yt=new Yi({model:l,source:Ue,target:We,styles:qt,linkCenter:Y.get("linkCenter"),group:At.addGroup()})}else if(v==="node")Yt=new ea({model:l,styles:qt,group:At.addGroup()});else if(v==="combo"){var vn=l.children,Tn=Ur(vn,Y);l.x=Tn.x||l.x||100*Math.random(),l.y=Tn.y||l.y||100*Math.random();var Ln=At.addGroup();Ln.setZIndex(l.depth);var Un=(Yt=new no({model:l,styles:qt,bbox:Tn,group:Ln})).getModel();(vn||[]).forEach(function(Hn){var xr=Y.findById(Hn.id);Yt.addChild(xr),Hn.depth=Un.depth+2}),l.collapsed&&setTimeout(function(){Y.collapseCombo(Yt),D.updateCombo(Yt,[])},250)}if(Yt)return Y.get(v+"s").push(Yt),Y.get("itemMap")[Yt.get("id")]=Yt,Y.emit("afteradditem",{item:Yt,model:l}),Yt},kt.prototype.updateItem=function(v,l){var D,Y,ht=this.graph;if(Object(r.x)(v)&&(v=ht.findById(v)),v&&!v.destroyed){var At="";v.getType&&(At=v.getType());var Ut=ht.get(At+"Mapper"),Yt=v.getModel(),qt=v.isOnlyMove(l);if(Ut){var oe=Ut(Object(r.e)({},Yt,l)),Te=Object(r.e)({},Yt,oe,l);oe.stateStyles&&(v.set("styles",Te.stateStyles),delete Te.stateStyles),Object(r.f)(Te,function(Un,Hn){l[Hn]=Un})}else Object(r.f)(l,function(Un,Hn){Yt[Hn]&&Object(r.v)(Un)&&!Object(r.m)(Un)&&(l[Hn]=Object(st.a)(Object(st.a)({},Yt[Hn]),l[Hn]))});if(ht.emit("beforeupdateitem",{item:v,cfg:l}),At==="edge"){if(l.source){var Ge=l.source;Object(r.x)(Ge)&&(Ge=ht.findById(Ge)),v.setSource(Ge)}if(l.target){var Ue=l.target;Object(r.x)(Ue)&&(Ue=ht.findById(Ue)),v.setTarget(Ue)}v.update(l)}if(At==="node"||At==="combo"){v.update(l,qt);var We=v.getEdges(),vn=Ii(l);if(vn&&At==="node")Object(r.f)(We,function(Un){Un.refresh()});else if(vn&&At==="combo"){var Tn=v.get("shapeFactory"),Ln=Yt.type||"circle";(Yt.animate===void 0||l.animate===void 0?(Y=(D=Tn[Ln])===null||D===void 0?void 0:D.options)===null||Y===void 0?void 0:Y.animate:Yt.animate||l.animate)?setTimeout(function(){if(v&&!v.destroyed){var Un=v.getKeyShape();Un&&!Un.destroyed&&Object(r.f)(We,function(Hn){Hn&&!Hn.destroyed&&Hn.refresh()})}},201):Object(r.f)(We,function(Un){Un.refresh()})}}ht.emit("afterupdateitem",{item:v,cfg:l})}},kt.prototype.updateCombo=function(v,l){var D,Y,ht=this.graph;if(Object(r.x)(v)&&(v=ht.findById(v)),v&&!v.destroyed){var At=Ur(l,ht);v.set("bbox",At),v.update({x:At.x,y:At.y});var Ut=v.getEdges()||[],Yt=Ut.length,qt=v.getModel(),oe=v.get("shapeFactory"),Te=qt.type||"circle";if(qt.animate===void 0?(Y=(D=oe[Te])===null||D===void 0?void 0:D.options)===null||Y===void 0?void 0:Y.animate:qt.animate)setTimeout(function(){if(v&&!v.destroyed){var We=v.getKeyShape();if(We&&!We.destroyed)for(var vn=0;vn<Yt;vn++){var Tn=Ut[vn];Tn&&!Tn.destroyed&&Tn.refresh()}}},201);else for(var Ge=0;Ge<Yt;Ge++){var Ue=Ut[Ge];Ue&&!Ue.destroyed&&Ue.refresh()}}},kt.prototype.collapseCombo=function(v){var l=this.graph;Object(r.x)(v)&&(v=l.findById(v));var D=v.getChildren();D.nodes.forEach(function(Y){l.hideItem(Y)}),D.combos.forEach(function(Y){l.hideItem(Y)})},kt.prototype.expandCombo=function(v){var l=this.graph;Object(r.x)(v)&&(v=l.findById(v));var D=v.getChildren();D.nodes.forEach(function(Y){l.showItem(Y)}),D.combos.forEach(function(Y){Y.getModel().collapsed?Y.show():l.showItem(Y)})},kt.prototype.removeItem=function(v){var l=this,D=this.graph;if(Object(r.x)(v)&&(v=D.findById(v)),v&&!v.destroyed){var Y=Object(r.c)(v.getModel());D.emit("beforeremoveitem",{item:Y});var ht="";v.getType&&(ht=v.getType());var At=D.get(ht+"s"),Ut=At.indexOf(v);if(Ut>-1&&At.splice(Ut,1),ht==="edge"){var Yt=D.get("v"+ht+"s"),qt=Yt.indexOf(v);qt>-1&&Yt.splice(qt,1)}var oe=v.get("id");delete D.get("itemMap")[oe];var Te=D.get("comboTrees"),Ge=v.get("id");if(ht==="node"){var Ue=v.getModel().comboId;if(Te){var We=Te,vn=!1;Te.forEach(function(Or){vn||_n(Or,function(Rr){if(Rr.id===Ge&&We){var yi=We.indexOf(Rr);return We.splice(yi,1),vn=!0,!1}return We=Rr.children,!0})})}for(var Tn=(xr=v.getEdges()).length-1;Tn>=0;Tn--)D.removeItem(xr[Tn],!1);Ue&&D.updateCombo(Ue)}else if(ht==="combo"){var Ln,Un=v.getModel().parentId,Hn=!1;(Te||[]).forEach(function(Or){Hn||_n(Or,function(Rr){return Rr.id!==Ge||(Ln=Rr,Hn=!0,!1)})}),Ln.removed=!0,Ln&&Ln.children&&Ln.children.forEach(function(Or){l.removeItem(Or.id)});var xr;for(Tn=(xr=v.getEdges()).length;Tn>=0;Tn--)D.removeItem(xr[Tn],!1);Un&&D.updateCombo(Un)}v.destroy(),D.emit("afterremoveitem",{item:Y})}},kt.prototype.setItemState=function(v,l,D){var Y=this.graph,ht=l;Object(r.x)(D)&&(ht=l+":"+D),v.hasState(ht)===D&&D||Object(r.x)(D)&&v.hasState(ht)||(Y.emit("beforeitemstatechange",{item:v,state:ht,enabled:D}),v.setState(l,D),Y.autoPaint(),Y.emit("afteritemstatechange",{item:v,state:ht,enabled:D}))},kt.prototype.priorityState=function(v,l){var D=this.graph,Y=v;Object(r.x)(v)&&(Y=D.findById(v)),this.setItemState(Y,l,!1),this.setItemState(Y,l,!0)},kt.prototype.clearItemStates=function(v,l){var D=this.graph;Object(r.x)(v)&&(v=D.findById(v)),D.emit("beforeitemstatesclear",{item:v,states:l}),v.clearStates(l),D.emit("afteritemstatesclear",{item:v,states:l})},kt.prototype.refreshItem=function(v){var l=this.graph;Object(r.x)(v)&&(v=l.findById(v)),l.emit("beforeitemrefresh",{item:v}),v.refresh(),l.emit("afteritemrefresh",{item:v})},kt.prototype.addCombos=function(v,l){var D=this,Y=this.graph;(v||[]).forEach(function(At){fr(At,function(Ut){var Yt;return l.forEach(function(qt){qt.id===Ut.id&&(qt.children=Ut.children,qt.depth=Ut.depth,Yt=qt)}),Yt&&D.addItem("combo",Yt),!0})});var ht=Y.get("comboGroup");ht&&ht.sort()},kt.prototype.changeItemVisibility=function(v,l){var D=this,Y=this.graph;if(Object(r.x)(v)&&(v=Y.findById(v)),v){if(Y.emit("beforeitemvisibilitychange",{item:v,visible:l}),v.changeVisibility(l),v.getType&&v.getType()==="node"){var ht=v.getEdges();Object(r.f)(ht,function(oe){(!l||oe.get("source").isVisible()&&oe.get("target").isVisible())&&D.changeItemVisibility(oe,l)})}else if(v.getType&&v.getType()==="combo"){var At=Y.get("comboTrees"),Ut=v.get("id"),Yt=[],qt=!1;(At||[]).forEach(function(oe){qt||oe.children&&oe.children.length!==0&&_n(oe,function(Te){return Te.id!==Ut||(Yt=Te.children,qt=!0,!1)})}),Yt&&Yt.forEach(function(oe){var Te=Y.findById(oe.id);D.changeItemVisibility(Te,l)}),ht=v.getEdges(),Object(r.f)(ht,function(oe){(!l||oe.get("source").isVisible()&&oe.get("target").isVisible())&&D.changeItemVisibility(oe,l)})}return Y.emit("afteritemvisibilitychange",{item:v,visible:l}),v}console.warn("The item to be shown or hidden does not exist!")},kt.prototype.destroy=function(){this.graph=null,this.destroyed=!0},kt}(),Wa=null,Ta=function(){function kt(v){this.graph=v,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return kt.checkCache=function(v,l,D){if(D[l]){var Y=D[l].indexOf(v);Y>=0&&D[l].splice(Y,1)}},kt.cacheState=function(v,l,D){D[l]||(D[l]=[]),D[l].push(v)},kt.prototype.updateState=function(v,l,D){var Y=this,ht=kt.checkCache,At=kt.cacheState;if(!v.destroyed){var Ut=this.cachedStates,Yt=Ut.enabled,qt=Ut.disabled;D?(ht(v,l,qt),At(v,l,Yt)):(ht(v,l,Yt),At(v,l,qt)),Wa&&clearTimeout(Wa),Wa=setTimeout(function(){Wa=null,Y.updateGraphStates()},16)}},kt.prototype.updateStates=function(v,l,D){var Y=this;Object(r.x)(l)?this.updateState(v,l,D):l.forEach(function(ht){Y.updateState(v,ht,D)})},kt.prototype.updateGraphStates=function(){var v=this.graph.get("states"),l=this.cachedStates;Object(r.f)(l.disabled,function(D,Y){v[Y]&&(v[Y]=v[Y].filter(function(ht){return D.indexOf(ht)<0&&!D.destroyed}))}),Object(r.f)(l.enabled,function(D,Y){if(v[Y]){var ht={};v[Y].forEach(function(At){At.destroyed||(ht[At.get("id")]=!0)}),D.forEach(function(At){if(!At.destroyed){var Ut=At.get("id");ht[Ut]||(ht[Ut]=!0,v[Y].push(At))}})}else v[Y]=D}),this.graph.emit("graphstatechange",{states:v}),this.cachedStates={enabled:{},disabled:{}}},kt.prototype.destroy=function(){this.graph=null,this.cachedStates=null,Wa&&clearTimeout(Wa),Wa=null,this.destroyed=!0},kt}(),bo=function(v,l){return v&&l?v.replace(/\\?\{([^{}]+)\}/g,function(D,Y){if(D.charAt(0)==="\\")return D.slice(1);var ht=l[Y];return ht===0&&(ht="0"),ht||""}):v},Na=function(v){var l=[];if(v.length<2)throw new Error("point length must largn than 2, now it's "+v.length);for(var D=0,Y=v;D<Y.length;D++){var ht=Y[D],At=ht.x,Ut=ht.y;l.push(At),l.push(Ut)}var Yt=Object(F.a)(l);return Yt.unshift(["M",v[0].x,v[0].y]),Yt},Fa=function(v,l,D,Y){D===void 0&&(D=0),Y===void 0&&(Y=0);var ht={x:(1-D)*v.x+D*l.x,y:(1-D)*v.y+D*l.y},At=[0,0];Xt.c.normalize(At,[l.x-v.x,l.y-v.y]),At&&(At[0]||At[1])||(At=[0,0]);var Ut=[-At[1]*Y,At[0]*Y];return ht.x+=Ut[0],ht.y+=Ut[1],ht},ro=function(v,l){var D=v.length;if(!D)return"";for(var Y="",ht=0;ht<D;ht++){var At=v[ht];Y+=bo(ht===0?"M{x} {y}":"L{x} {y}",At)}return l&&(Y+="Z"),Y},Ea=function(v){var l=[];return v.forEach(function(D){if(D[0]!=="A")for(var Y=1;Y<D.length;Y+=2)l.push([D[Y],D[Y+1]]);else{var ht=D.length;l.push([D[ht-2],D[ht-1]])}}),l},Eo=function(v){if(v.length<2)throw new Error("point length must largn than 2, now it's "+v.length);var l=v[0],D=v[1],Y=v[v.length-1],ht=v[v.length-2];v.unshift(Y),v.unshift(ht),v.push(l),v.push(D);for(var At=[],Ut=1;Ut<v.length-2;Ut+=1){var Yt=v[Ut-1].x,qt=v[Ut-1].y,oe=v[Ut].x,Te=v[Ut].y,Ge=v[Ut+1].x,Ue=v[Ut+1].y,We=oe+(Ge-Yt)/6,vn=Te+(Ue-qt)/6,Tn=Ge-((Ut!==v.length-2?v[Ut+2].x:Ge)-oe)/6,Ln=Ue-((Ut!==v.length-2?v[Ut+2].y:Ue)-Te)/6;At.push(["C",We,vn,Tn,Ln,Ge,Ue])}return At.unshift(["M",Y.x,Y.y]),At},Ua=function(v,l){return Xt.c.scale([0,0],Xt.c.normalize([0,0],v),l)},Va=function(v,l){var D=[v[1]-l[1],l[0]-v[0]],Y=Math.sqrt(D[0]*D[0]+D[1]*D[1]);if(Y===0)throw new Error("p0 should not be equal to p1");return[D[0]/Y,D[1]/Y]},ja=function(v,l){return[l[0]-v[0],l[1]-v[1]]};function to(kt,v){if(!kt||kt.length<1)return"";if(kt.length===1)return function(Yt){var qt=[Yt[0][0],Yt[0][1]-v],oe=[Yt[0][0],Yt[0][1]+v];return"M "+qt+" A "+v+","+v+",0,0,0,"+oe+" A "+v+","+v+",0,0,0,"+qt}(kt);if(kt.length===2)return function(Yt){var qt=Xt.c.scale([0,0],Va(Yt[0],Yt[1]),v),oe=Xt.c.scale([0,0],qt,-1),Te=Xt.c.add([0,0],Yt[0],qt),Ge=Xt.c.add([0,0],Yt[1],qt),Ue=Xt.c.add([0,0],Yt[1],oe),We=Xt.c.add([0,0],Yt[0],oe);return"M "+Te+" L "+Ge+" A "+[v,v,"0,0,0",Ue].join(",")+" L "+We+" A "+[v,v,"0,0,0",Te].join(",")}(kt);for(var l=new Array(kt.length),D=0;D<l.length;++D){var Y=D===0?kt[kt.length-1]:kt[D-1],ht=kt[D],At=Xt.c.scale([0,0],Va(Y,ht),v);l[D]=[Xt.c.add([0,0],Y,At),Xt.c.add([0,0],ht,At)]}var Ut="A "+[v,v,"0,0,0,"].join(",");return(l=l.map(function(Yt,qt){var oe="";return qt===0&&(oe="M "+l[l.length-1][1]+" "),oe+=Ut+Yt[0]+" L "+Yt[1]})).join(" ")}function fo(kt,v){var l,D,Y,ht=kt.length;if(!kt||ht<1)return"";if(ht===1)return D=[(l=kt)[0][0],l[0][1]-v],Y=[l[0][0],l[0][1]+v],"M "+D+" A "+[v,v,"0,0,0",Y].join(",")+" A "+[v,v,"0,0,0",D].join(",");if(ht===2)return function(oe){var Te=ja(oe[0],oe[1]),Ge=Ua(Te,v),Ue=Xt.c.add([0,0],oe[0],Xt.c.scale([0,0],Ge,-1)),We=Xt.c.add([0,0],oe[1],Ge),vn=1.2*v,Tn=Ua(Xt.c.normalize([0,0],Te),vn),Ln=Xt.c.scale([0,0],Tn,-1),Un=Xt.c.add([0,0],Ue,Ln),Hn=Xt.c.add([0,0],We,Ln),xr=Xt.c.add([0,0],Ue,Tn);return"M "+Ue+" C "+[Un,Hn,We].join(",")+" S "+[xr,Ue].join(",")+" Z"}(kt);for(var At=kt.map(function(oe,Te){var Ge=kt[(Te+1)%ht];return{p:oe,v:Xt.c.normalize([0,0],ja(oe,Ge))}}),Ut=0;Ut<At.length;++Ut){var Yt=Ut>0?Ut-1:ht-1,qt=Xt.c.normalize([0,0],Xt.c.add([0,0],At[Yt].v,Xt.c.scale([0,0],At[Ut].v,-1)));At[Ut].p=Xt.c.add([0,0],At[Ut].p,Xt.c.scale([0,0],qt,v))}return At.map(function(oe){var Te=oe.p;return{x:Te[0],y:Te[1]}})}var wa=function(v,l,D){return(v.y-D.y)*(l.x-D.x)-(v.x-D.x)*(l.y-D.y)},gr=function(v){var l=v.map(function(At){return{x:At.getModel().x,y:At.getModel().y}});if(l.sort(function(At,Ut){return At.x===Ut.x?At.y-Ut.y:At.x-Ut.x}),l.length===1)return l;for(var D=[],Y=0;Y<l.length;Y++){for(;D.length>=2&&wa(D[D.length-2],D[D.length-1],l[Y])<=0;)D.pop();D.push(l[Y])}var ht=[];for(Y=l.length-1;Y>=0;Y--){for(;ht.length>=2&&wa(ht[ht.length-2],ht[ht.length-1],l[Y])<=0;)ht.pop();ht.push(l[Y])}return ht.pop(),D.pop(),D.concat(ht)},Xo={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function va(kt,v,l){var D=!1,Y=function(Yt,qt){return v.cells[Yt+qt*v.width]},ht=function(Yt,qt){var oe=0;return Y(Yt-1,qt-1)>=l&&(oe+=1),Y(Yt,qt-1)>l&&(oe+=2),Y(Yt-1,qt)>l&&(oe+=4),Y(Yt,qt)>l&&(oe+=8),oe},At=function(Yt,qt){for(var oe,Te,Ge=Yt,Ue=qt,We=0;We<v.width*v.height;We++){if(oe=Ge,Te=Ue,kt.findIndex(function(Tn){return Tn.x===Ge&&Tn.y===Ue})>-1){if(kt[0].x===Ge&&kt[0].y===Ue)return!0}else kt.push({x:Ge,y:Ue});var vn=ht(Ge,Ue);switch(vn){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:Ge++;break;case 12:case 14:case 4:Ge--;break;case 6:oe===0&&(Te===-1?Ge-=1:Ge+=1);break;case 1:case 13:case 5:Ue--;break;case 9:oe===1&&(Te===0?Ue-=1:Ue+=1);break;case 10:case 8:case 11:Ue++;break;default:return console.warn("Marching squares invalid state: "+vn),!0}}};this.march=function(){for(var Ut=0;Ut<v.width&&!D;Ut+=1)for(var Yt=0;Yt<v.height&&!D;Yt+=1)Y(Ut,Yt)>l&&ht(Ut,Yt)!==15&&(D=At(Ut,Yt));return D}}var Ya=function(v,l){var D=Number.POSITIVE_INFINITY,Y=null;return v.forEach(function(ht){var At=Ie(ht,l);At>=0&&At<D&&(Y=ht,D=At)}),Y};function So(kt,v,l,D,Y){var ht=function(At,Ut,Yt){var qt=null,oe=Number.POSITIVE_INFINITY;return Ut.forEach(function(Te){var Ge={x:At.getModel().x,y:At.getModel().y},Ue={x:Te.getModel().x,y:Te.getModel().y},We=Ne(Ge,Ue),vn=new pn(Ge.x,Ge.y,Ue.x,Ue.y),Tn=Yt.reduce(function(Ln,Un){return Ie(Un,vn)>0?Ln+1:Ln},0);We*Math.pow(Tn+1,2)<oe&&(qt=Te,oe=We*Math.pow(Tn+1,2))}),qt}(kt,l,v);return ht===null?[]:function(At){for(var Ut=[];At.length>0;){var Yt=At.pop();if(At.length===0){Ut.push(Yt);break}var qt=At.pop(),oe=new pn(Yt.x1,Yt.y1,qt.x2,qt.y2);Ya(v,oe)?(Ut.push(Yt),At.push(qt)):At.push(oe)}return Ut}(function(At,Ut,Yt,qt){var oe=[],Te=[];Te.push(At);for(var Ge=!0,Ue=0,We=function(Un,Hn){var xr=!1;return Hn.forEach(function(Or){xr||(rn(Un,{x:Or.x1,y:Or.y1})||rn(Un,{x:Or.x2,y:Or.y2}))&&(xr=!0)}),xr},vn=function(Un,Hn){for(var xr=0,Or=Hn;xr<Or.length;xr++){var Rr=Or[xr].getBBox(),yi=[[Rr.x,Rr.y],[Rr.x+Rr.width,Rr.y],[Rr.x,Rr.y+Rr.height],[Rr.x+Rr.width,Rr.y+Rr.height]];if(nn(yi,Un.x,Un.y))return!0}return!1};Ge&&Ue<Yt;){Ge=!1;for(var Tn=function(){var Un=Te.pop(),Hn=Ya(Ut,Un);if(Hn){var xr=jn(Hn,Un),Or=xr[0];if(xr[1]===2){var Rr=function(Xi){for(var Zr=qt,ki=se(Hn,Zr,Or,Xi),Ba=We(ki,Te)||We(ki,oe),Ha=vn(ki,Ut);!Ba&&Ha&&Zr>=1;)ki=se(Hn,Zr/=1.5,Or,Xi),Ba=We(ki,Te)||We(ki,oe),Ha=vn(ki,Ut);!ki||Ba||Xi&&Ha||(Te.push(new pn(Un.x1,Un.y1,ki.x,ki.y)),Te.push(new pn(ki.x,ki.y,Un.x2,Un.y2)),Ge=!0)};Rr(!0),Ge||Rr(!1)}}Ge||oe.push(Un),Ue+=1};!Ge&&Te.length;)Tn()}for(;Te.length;)oe.push(Te.pop());return oe}(new pn(kt.getModel().x,kt.getModel().y,ht.getModel().x,ht.getModel().y),v,D,Y))}var No=function(v,l,D){var Y=Object.assign(Xo,D),ht=fe(v.map(function(Rr){return{x:Rr.getModel().x,y:Rr.getModel().y}}));v=v.sort(function(Rr,yi){return Ne({x:Rr.getModel().x,y:Rr.getModel().y},ht)-Ne({x:yi.getModel().x,y:yi.getModel().y},ht)});var At=[],Ut=[];v.forEach(function(Rr){So(Rr,l,At,Y.maxRoutingIterations,Y.morphBuffer).forEach(function(yi){Ut.push(yi)}),At.push(Rr)});for(var Yt,qt,oe,Te,Ge,Ue=function(Rr,yi,Xi){var Zr={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},ki=[];Rr.forEach(function(Ja){ki.push(Ja.getBBox())}),yi.forEach(function(Ja){ki.push(Ja.getBBox())});for(var Ba=0,Ha=ki;Ba<Ha.length;Ba++){var Ka=Ha[Ba];Zr.minX=(Ka.minX<Zr.minX?Ka.minX:Zr.minX)-Xi,Zr.minY=(Ka.minY<Zr.minY?Ka.minY:Zr.minY)-Xi,Zr.maxX=(Ka.maxX>Zr.maxX?Ka.maxX:Zr.maxX)+Xi,Zr.maxY=(Ka.maxY>Zr.maxY?Ka.maxY:Zr.maxY)+Xi}return Zr.width=Zr.maxX-Zr.minX,Zr.height=Zr.maxY-Zr.minY,Zr.x=Zr.minX,Zr.y=Zr.minY,Zr}(v,Ut,Y.nodeR0),We=(Yt=Ue.width,qt=Ue.height,oe=Y.pixelGroupSize,Te=Math.ceil(Yt/oe),Ge=Math.ceil(qt/oe),{cells:new Float32Array(Math.max(0,Te*Ge)).fill(0),width:Te,height:Ge}),vn=[],Tn=[],Ln=0;Ln<Y.maxMarchingIterations;Ln++)if(Gn(v,l,Ut,Ue,We,Y),Tn=[],new va(vn=[],We,Y.threshold).march()){var Un=vn.map(function(Rr){return{x:Math.round(Rr.x*Y.pixelGroupSize+Ue.minX),y:Math.round(Rr.y*Y.pixelGroupSize+Ue.minY)}});if(Un){var Hn=Un.length;if(Y.skip>1)for(Hn=Math.floor(Un.length/Y.skip);Hn<3&&Y.skip>1;)Y.skip-=1,Hn=Math.floor(Un.length/Y.skip);for(var xr=0,Or=0;Or<Hn;Or+=1,xr+=Y.skip)Tn.push({x:Un[xr].x,y:Un[xr].y})}if(Tn&&function(){for(var Rr=0,yi=v;Rr<yi.length;Rr++){var Xi=yi[Rr],Zr=Tn.map(function(ki){return[ki.x,ki.y]});if(!nn(Zr,Xi.getBBox().centerX,Xi.getBBox().centerY))return!1}return!0}())return Tn;if(Y.threshold*=.9,Ln<=.5*Y.maxMarchingIterations)Y.memberInfluenceFactor*=1.2,Y.edgeInfluenceFactor*=1.2;else{if(!(Y.nonMemberInfluenceFactor!==0&&l.length>0))break;Y.nonMemberInfluenceFactor*=.8}}return Tn};function Gn(kt,v,l,D,Y,ht){function At(Ge,Ue){var We=Math.floor((Ge-Ue)/ht.pixelGroupSize);return We<0?0:We}function Ut(Ge,Ue){return Ge*ht.pixelGroupSize+Ue}var Yt=(ht.nodeR0-ht.nodeR1)*(ht.nodeR0-ht.nodeR1),qt=(ht.edgeR0-ht.edgeR1)*(ht.edgeR0-ht.edgeR1),oe=function(Ue,We){return[Math.min(At(Ue.minX,We+D.minX),Y.width),Math.min(At(Ue.minY,We+D.minY),Y.height),Math.min(At(Ue.maxX,-We+D.minX),Y.width),Math.min(At(Ue.maxY,-We+D.minY),Y.height)]},Te=function(Ue,We){for(var vn=Ue.getBBox(),Tn=oe(vn,ht.nodeR1),Ln=Tn[0],Un=Tn[1],Hn=Tn[2],xr=Tn[3],Or=Un;Or<xr;Or+=1)for(var Rr=Ln;Rr<Hn;Rr+=1)if(!(We<0&&Y[Rr+Or*Y.width]<=0)){var yi=Ut(Rr,D.minX),Xi=Ut(Or,D.minY),Zr=ln({x:yi,y:Xi},{x:vn.minX,y:vn.minY,width:vn.width,height:vn.height});if(Zr<Math.pow(ht.nodeR1,2)){var ki=Math.sqrt(Zr)-ht.nodeR1;Y.cells[Rr+Or*Y.width]+=We*ki*ki}}};ht.nodeInfluenceFactor&&kt.forEach(function(Ge){Te(Ge,ht.nodeInfluenceFactor/Yt)}),ht.edgeInfluenceFactor&&l.forEach(function(Ge){(function(Ue,We){for(var vn=Ue.getBBox(),Tn=oe(vn,ht.edgeR1),Ln=Tn[0],Un=Tn[1],Hn=Tn[2],xr=Tn[3],Or=Un;Or<xr;Or+=1)for(var Rr=Ln;Rr<Hn;Rr+=1)if(!(We<0&&Y.cells[Rr+Or*Y.width]<=0)){var yi=Ut(Rr,D.minX),Xi=Ut(Or,D.minY),Zr=Fe({x:yi,y:Xi},Ue);if(Zr<Math.pow(ht.edgeR1,2)){var ki=Math.sqrt(Zr)-ht.edgeR1;Y.cells[Rr+Or*Y.width]+=We*ki*ki}}})(Ge,ht.edgeInfluenceFactor/qt)}),ht.negativeNodeInfluenceFactor&&v.forEach(function(Ge){Te(Ge,ht.negativeNodeInfluenceFactor/Yt)})}function se(kt,v,l,D){var Y=kt.getBBox(),ht=l[0],At=l[1],Ut=l[2],Yt=l[3],qt={topLeft:{x:Y.minX-v,y:Y.minY-v},topRight:{x:Y.maxX+v,y:Y.minY-v},bottomLeft:{x:Y.minX-v,y:Y.maxY+v},bottomRight:{x:Y.maxX+v,y:Y.maxY+v}},oe=Y.height*Y.width;function Te(Ge,Ue){return Y.width*(.5*(Ge.y-Y.minY+(Ue.y-Y.minY)))}if(At)return ht?D?qt.topLeft:qt.bottomRight:Ut?D?qt.bottomLeft:qt.topRight:Te(At,Yt)<.5*oe?At.y>Yt.y?D?qt.topLeft:qt.bottomRight:D?qt.topRight:qt.bottomLeft:At.y<Yt.y?D?qt.bottomLeft:qt.topRight:D?qt.bottomRight:qt.topLeft;if(Yt){if(ht)return D?qt.topRight:qt.bottomLeft;if(Ut)return D?qt.bottomRight:qt.topLeft}return Te(ht,Ut)<.5*oe?ht.x>Ut.x?D?qt.topLeft:qt.bottomRight:D?qt.bottomLeft:qt.topRight:ht.x<Ut.x?D?qt.topRight:qt.bottomLeft:D?qt.bottomRight:qt.topLeft}var Ia=function(){function kt(v,l){this.cfg=Object(r.e)(this.getDefaultCfg(),l),this.graph=v,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(D){return Object(r.x)(D)?v.findById(D):D}),this.nonMembers=this.cfg.nonMembers.map(function(D){return Object(r.x)(D)?v.findById(D):D}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return kt.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},kt.prototype.setPadding=function(){var v=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+v:10+v,this.cfg.bubbleCfg={nodeR0:this.padding-v,nodeR1:this.padding-v,morphBuffer:this.padding-v}},kt.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},kt.prototype.calcPath=function(v,l){var D,Y,ht;switch(this.type){case"round-convex":ht=to((D=gr(v)).map(function(At){return[At.x,At.y]}),this.padding),Y=Object(F.b)(ht);break;case"smooth-convex":(D=gr(v)).length===2?(ht=to(D.map(function(At){return[At.x,At.y]}),this.padding),Y=Object(F.b)(ht)):D.length>2&&(ht=fo(D.map(function(At){return[At.x,At.y]}),this.padding),Y=Eo(ht));break;case"bubble":Y=(D=No(v,l,this.cfg.bubbleCfg)).length>=2&&Eo(D)}return Y},kt.prototype.render=function(){this.group.addShape("path",{attrs:Object(st.a)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id}),this.group.toBack()},kt.prototype.addMember=function(v){if(v){Object(r.x)(v)&&(v=this.graph.findById(v)),this.members.push(v);var l=this.nonMembers.indexOf(v);return l>-1&&this.nonMembers.splice(l,1),this.updateData(this.members,this.nonMembers),!0}},kt.prototype.addNonMember=function(v){if(v){Object(r.x)(v)&&(v=this.graph.findById(v)),this.nonMembers.push(v);var l=this.members.indexOf(v);return l>-1&&this.members.splice(l,1),this.updateData(this.members,this.nonMembers),!0}},kt.prototype.removeMember=function(v){if(v){Object(r.x)(v)&&(v=this.graph.findById(v));var l=this.members.indexOf(v);return l>-1&&(this.members.splice(l,1),this.updateData(this.members,this.nonMembers),!0)}},kt.prototype.removeNonMember=function(v){if(v){Object(r.x)(v)&&(v=this.graph.findById(v));var l=this.nonMembers.indexOf(v);return l>-1&&(this.nonMembers.splice(l,1),this.updateData(this.members,this.nonMembers),!0)}},kt.prototype.updateData=function(v,l){var D=this;this.group.findById(this.id).remove(),v&&(this.members=v.map(function(Y){return Object(r.x)(Y)?D.graph.findById(Y):Y})),l&&(this.nonMembers=l.map(function(Y){return Object(r.x)(Y)?D.graph.findById(Y):Y})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},kt.prototype.updateStyle=function(v){this.group.findById(this.id).attr(Object(st.a)({},v))},kt.prototype.updateCfg=function(v){var l=this;this.cfg=Object(r.e)(this.cfg,v),this.id=this.cfg.id,this.group=this.cfg.group,v.members&&(this.members=this.cfg.members.map(function(D){return Object(r.x)(D)?l.graph.findById(D):D})),v.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(D){return Object(r.x)(D)?l.graph.findById(D):D})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},kt.prototype.contain=function(v){var l,D,Y=this,ht=(l=Object(r.x)(v)?this.graph.findById(v):v).getKeyShape();if(l.get("type")==="path")D=Ea(ht.attr("path"));else{var At=ht.getCanvasBBox();D=[[At.minX,At.minY],[At.maxX,At.minY],[At.maxX,At.maxY],[At.minX,At.maxY]]}return D=D.map(function(Ut){var Yt=Y.graph.getPointByCanvas(Ut[0],Ut[1]);return[Yt.x,Yt.y]}),hn(D,Ea(this.path))},kt.prototype.destroy=function(){this.group.remove(),this.cfg=null},kt}(),ho=Xt.a.transform;(function(kt){function v(l){var D=kt.call(this)||this;return D.cfg=Object(r.e)(D.getDefaultCfg(),l),D.init(),D.animating=!1,D.destroyed=!1,D.cfg.enabledStack&&(D.undoStack=new Ee.Stack(D.cfg.maxStep),D.redoStack=new Ee.Stack(D.cfg.maxStep)),D}Object(st.b)(v,kt),v.prototype.init=function(){this.initCanvas();var l=new Oo(this),D=new Cr(this),Y=new $i(this),ht=new Ta(this);this.set({viewController:l,modeController:D,itemController:Y,stateController:ht}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},v.prototype.initGroups=function(){var l=this.get("canvas"),D=this.get("canvas").get("el").id,Y=l.addGroup({id:D+"-root",className:Fn.rootContainerClassName});if(this.get("groupByTypes")){var ht=Y.addGroup({id:D+"-edge",className:Fn.edgeContainerClassName}),At=Y.addGroup({id:D+"-node",className:Fn.nodeContainerClassName}),Ut=Y.addGroup({id:D+"-combo",className:Fn.comboContainerClassName});Ut.toBack(),this.set({nodeGroup:At,edgeGroup:ht,comboGroup:Ut})}var Yt=Y.addGroup({id:D+"-delegate",className:Fn.delegateContainerClassName});this.set({delegateGroup:Yt}),this.set("group",Y)},v.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[]}},v.prototype.set=function(l,D){return Object(r.w)(l)?this.cfg=Object(st.a)(Object(st.a)({},this.cfg),l):this.cfg[l]=D,this},v.prototype.get=function(l){return this.cfg[l]},v.prototype.getGroup=function(){return this.get("group")},v.prototype.getContainer=function(){return this.get("container")},v.prototype.getMinZoom=function(){return this.get("minZoom")},v.prototype.setMinZoom=function(l){return this.set("minZoom",l)},v.prototype.getMaxZoom=function(){return this.get("maxZoom")},v.prototype.setMaxZoom=function(l){return this.set("maxZoom",l)},v.prototype.getWidth=function(){return this.get("width")},v.prototype.getHeight=function(){return this.get("height")},v.prototype.clearItemStates=function(l,D){Object(r.x)(l)&&(l=this.findById(l));var Y=this.get("itemController");D||(D=l.get("states")),Y.clearItemStates(l,D),this.get("stateController").updateStates(l,D,!1)},v.prototype.node=function(l){typeof l=="function"&&this.set("nodeMapper",l)},v.prototype.edge=function(l){typeof l=="function"&&this.set("edgeMapper",l)},v.prototype.combo=function(l){typeof l=="function"&&this.set("comboMapper",l)},v.prototype.findById=function(l){return this.get("itemMap")[l]},v.prototype.find=function(l,D){var Y,ht=this.get(l+"s");return Object(r.f)(ht,function(At,Ut){if(D(At,Ut))return Y=At}),Y},v.prototype.findAll=function(l,D){var Y=[];return Object(r.f)(this.get(l+"s"),function(ht,At){D(ht,At)&&Y.push(ht)}),Y},v.prototype.findAllByState=function(l,D){return this.findAll(l,function(Y){return Y.hasState(D)})},v.prototype.translate=function(l,D){var Y=this.get("group"),ht=Object(r.c)(Y.getMatrix());ht||(ht=[1,0,0,0,1,0,0,0,1]),ht=ho(ht,[["t",l,D]]),Y.setMatrix(ht),this.emit("viewportchange",{action:"translate",matrix:Y.getMatrix()}),this.autoPaint()},v.prototype.moveTo=function(l,D){var Y=this.get("group");le(Y,{x:l,y:D}),this.emit("viewportchange",{action:"move",matrix:Y.getMatrix()})},v.prototype.fitView=function(l){l&&this.set("fitViewPadding",l),this.get("viewController").fitView(),this.autoPaint()},v.prototype.fitCenter=function(){this.get("viewController").fitCenter(),this.autoPaint()},v.prototype.addBehaviors=function(l,D){return this.get("modeController").manipulateBehaviors(l,D,!0),this},v.prototype.removeBehaviors=function(l,D){return this.get("modeController").manipulateBehaviors(l,D,!1),this},v.prototype.updateBehavior=function(l,D,Y){return this.get("modeController").updateBehavior(l,D,Y),this},v.prototype.zoom=function(l,D){var Y=this.get("group"),ht=Object(r.c)(Y.getMatrix()),At=this.get("minZoom"),Ut=this.get("maxZoom");ht||(ht=[1,0,0,0,1,0,0,0,1]),ht=ho(ht,D?[["t",-D.x,-D.y],["s",l,l],["t",D.x,D.y]]:[["s",l,l]]),At&&ht[0]<At||Ut&&ht[0]>Ut||(Y.setMatrix(ht),this.emit("viewportchange",{action:"zoom",matrix:ht}),this.autoPaint())},v.prototype.zoomTo=function(l,D){var Y=l/this.getZoom();this.zoom(Y,D)},v.prototype.focusItem=function(l,D,Y){var ht=this.get("viewController"),At=!1;D?At=!0:D===void 0&&(At=this.get("animate"));var Ut={};Y?Ut=Y:Y===void 0&&(Ut=this.get("animateCfg")),ht.focus(l,At,Ut),this.autoPaint()},v.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},v.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},v.prototype.getPointByClient=function(l,D){return this.get("viewController").getPointByClient(l,D)},v.prototype.getClientByPoint=function(l,D){return this.get("viewController").getClientByPoint(l,D)},v.prototype.getPointByCanvas=function(l,D){return this.get("viewController").getPointByCanvas(l,D)},v.prototype.getCanvasByPoint=function(l,D){return this.get("viewController").getCanvasByPoint(l,D)},v.prototype.showItem=function(l,D){D===void 0&&(D=!0);var Y=this.get("itemController").changeItemVisibility(l,!0);if(D&&this.get("enabledStack")){var ht=Y.getID(),At={},Ut={};switch(Y.getType()){case"node":At.nodes=[{id:ht,visible:!1}],Ut.nodes=[{id:ht,visible:!0}];break;case"edge":At.nodes=[{id:ht,visible:!1}],Ut.edges=[{id:ht,visible:!0}];break;case"combo":At.nodes=[{id:ht,visible:!1}],Ut.combos=[{id:ht,visible:!0}]}this.pushStack("visible",{before:At,after:Ut})}},v.prototype.hideItem=function(l,D){D===void 0&&(D=!0);var Y=this.get("itemController").changeItemVisibility(l,!1);if(D&&this.get("enabledStack")){var ht=Y.getID(),At={},Ut={};switch(Y.getType()){case"node":At.nodes=[{id:ht,visible:!0}],Ut.nodes=[{id:ht,visible:!1}];break;case"edge":At.nodes=[{id:ht,visible:!0}],Ut.edges=[{id:ht,visible:!1}];break;case"combo":At.nodes=[{id:ht,visible:!0}],Ut.combos=[{id:ht,visible:!1}]}this.pushStack("visible",{before:At,after:Ut})}},v.prototype.refreshItem=function(l){this.get("itemController").refreshItem(l)},v.prototype.setAutoPaint=function(l){this.set("autoPaint",l),this.get("canvas").set("autoDraw",l)},v.prototype.remove=function(l,D){D===void 0&&(D=!0),this.removeItem(l,D)},v.prototype.removeItem=function(l,D){D===void 0&&(D=!0);var Y=l;if(Object(r.x)(l)&&(Y=this.findById(l)),!Y&&Object(r.x)(l))console.warn("The item to be removed does not exist!");else if(Y){var ht="";if(Y.getType&&(ht=Y.getType()),D&&this.get("enabledStack")){var At=Object(st.a)(Object(st.a)({},Y.getModel()),{itemType:ht}),Ut={};switch(ht){case"node":Ut.nodes=[At],Ut.edges=[];for(var Yt=Y.getEdges(),qt=Yt.length-1;qt>=0;qt--)Ut.edges.push(Object(st.a)(Object(st.a)({},Yt[qt].getModel()),{itemType:"edge"}));break;case"edge":Ut.edges=[At];break;case"combo":Ut.combos=[At]}this.pushStack("delete",{before:Ut,after:{}})}if(ht==="node"&&Y.getModel().comboId&&this.updateComboTree(Y),this.get("itemController").removeItem(Y),ht==="combo"){var oe=Vr(this.get("comboTrees"));this.set("comboTrees",oe)}}},v.prototype.addItem=function(l,D,Y,ht){Y===void 0&&(Y=!0),ht===void 0&&(ht=!0);var At=this.get("comboSorted");this.set("comboSorted",At&&!ht);var Ut=this.get("itemController");if(!D.id||!this.findById(D.id)){var Yt,qt=this.get("comboTrees");if(qt||(qt=[]),l==="combo"){var oe=this.get("itemMap"),Te=!1;if(qt.forEach(function(xr){Te||fr(xr,function(Or){if(D.parentId===Or.id){Te=!0;var Rr=Object(st.a)({id:D.id,depth:Or.depth+2},D);Or.children?Or.children.push(Rr):Or.children=[Rr],D.depth=Rr.depth,Yt=Ut.addItem(l,D)}var yi=oe[Or.id];return Te&&yi&&yi.getType&&yi.getType()==="combo"&&Ut.updateCombo(yi,Or.children),!0})}),!Te){var Ge=Object(st.a)({id:D.id,depth:0},D);D.depth=Ge.depth,qt.push(Ge),Yt=Ut.addItem(l,D)}this.set("comboTrees",qt)}else if(l==="node"&&Object(r.x)(D.comboId)&&qt){var Ue;if((Ue=this.findById(D.comboId))&&Ue.getType&&Ue.getType()!=="combo")return void console.warn("'"+D.comboId+"' is a not id of a combo in the graph, the node will be added without combo.");Yt=Ut.addItem(l,D);var We=this.get("itemMap"),vn=!1,Tn=!1;(qt||[]).forEach(function(xr){Tn||vn||fr(xr,function(Or){if(Or.id===D.id)return Tn=!0,!1;if(D.comboId===Or.id&&!Tn){vn=!0;var Rr=Object(r.c)(D);Rr.itemType="node",Or.children?Or.children.push(Rr):Or.children=[Rr],D.depth=Or.depth+1}return vn&&We[Or.id].getType&&We[Or.id].getType()==="combo"&&Ut.updateCombo(We[Or.id],Or.children),!0})})}else Yt=Ut.addItem(l,D);(l==="node"&&D.comboId||l==="combo"&&D.parentId)&&(Ue=this.findById(D.comboId||D.parentId))&&Ue.addChild(Yt);var Ln=this.get("combos");if(Ln&&Ln.length>0&&this.sortCombos(),this.autoPaint(),Y&&this.get("enabledStack")){var Un=Object(st.a)(Object(st.a)({},Yt.getModel()),{itemType:l}),Hn={};switch(l){case"node":Hn.nodes=[Un];break;case"edge":Hn.edges=[Un];break;case"combo":Hn.combos=[Un]}this.pushStack("add",{before:{},after:Hn})}return Yt}console.warn("This item exists already. Be sure the id %c"+D.id+"%c is unique.","font-size: 20px; color: red;","")},v.prototype.add=function(l,D,Y,ht){return Y===void 0&&(Y=!0),ht===void 0&&(ht=!0),this.addItem(l,D,Y,ht)},v.prototype.updateItem=function(l,D,Y){var ht=this;Y===void 0&&(Y=!0);var At,Ut=this.get("itemController");At=Object(r.x)(l)?this.findById(l):l;var Yt=Object(r.c)(At.getModel()),qt="";At.getType&&(qt=At.getType());var oe=Object(st.d)(At.getStates());if(qt==="combo"&&Object(r.f)(oe,function(We){return ht.setItemState(At,We,!1)}),Ut.updateItem(At,D),qt==="combo"&&Object(r.f)(oe,function(We){return ht.setItemState(At,We,!0)}),Y&&this.get("enabledStack")){var Te={nodes:[],edges:[],combos:[]},Ge={nodes:[],edges:[],combos:[]},Ue=Object(st.a)({id:Yt.id},D);switch(qt){case"node":Te.nodes.push(Yt),Ge.nodes.push(Ue);break;case"edge":Te.edges.push(Yt),Ge.edges.push(Ue);break;case"combo":Te.combos.push(Yt),Ge.combos.push(Ue)}qt==="node"&&Te.nodes.push(Yt),this.pushStack("update",{before:Te,after:Ge})}},v.prototype.update=function(l,D,Y){Y===void 0&&(Y=!0),this.updateItem(l,D,Y)},v.prototype.setItemState=function(l,D,Y){Object(r.x)(l)&&(l=this.findById(l)),this.get("itemController").setItemState(l,D,Y);var ht=this.get("stateController");Object(r.x)(Y)?ht.updateState(l,D+":"+Y,!0):ht.updateState(l,D,Y)},v.prototype.priorityState=function(l,D){this.get("itemController").priorityState(l,D)},v.prototype.data=function(l){this.set("data",l)},v.prototype.render=function(){var l=this;this.set("comboSorted",!1);var D=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!D)throw new Error("data must be defined first");var Y=D.nodes,ht=Y===void 0?[]:Y,At=D.edges,Ut=At===void 0?[]:At,Yt=D.combos,qt=Yt===void 0?[]:Yt;if(this.clear(),this.emit("beforerender"),Object(r.f)(ht,function(Ue){l.add("node",Ue,!1,!1)}),qt&&qt.length!==0){var oe=pr(qt,ht);this.set("comboTrees",oe),l.addCombos(qt)}Object(r.f)(Ut,function(Ue){l.add("edge",Ue,!1,!1)});var Te=l.get("animate");(l.get("fitView")||l.get("fitCenter"))&&l.set("animate",!1);var Ge=l.get("layoutController");if(Ge){if(Ge.layout(function(){l.get("fitView")?l.fitView():l.get("fitCenter")&&l.fitCenter(),l.autoPaint(),l.emit("afterrender"),(l.get("fitView")||l.get("fitCenter"))&&l.set("animate",Te)}),this.destroyed)return}else l.get("fitView")&&l.fitView(),l.get("fitCenter")&&l.fitCenter(),l.emit("afterrender"),l.set("animate",Te);this.get("groupByTypes")||(qt&&qt.length!==0?this.sortCombos():D.nodes&&D.edges&&D.nodes.length<D.edges.length?this.getNodes().forEach(function(Ue){Ue.toFront()}):this.getEdges().forEach(function(Ue){Ue.toBack()})),this.get("enabledStack")&&this.pushStack("render")},v.prototype.read=function(l){this.data(l),this.render()},v.prototype.diffItems=function(l,D,Y){var ht,At=this,Ut=this.get("itemMap");Object(r.f)(Y,function(Yt){if(ht=Ut[Yt.id]){if(At.get("animate")&&l==="node"){var qt=ht.getContainer().getMatrix();qt||(qt=[1,0,0,0,1,0,0,0,1]),ht.set("originAttrs",{x:qt[6],y:qt[7]})}At.updateItem(ht,Yt,!1)}else ht=At.addItem(l,Yt,!1);ht&&D[l+"s"].push(ht)})},v.prototype.changeData=function(l,D){D===void 0&&(D=!0);var Y=this;if(!l)return this;D&&this.get("enabledStack")&&this.pushStack("changedata",{before:Y.save(),after:l}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(We){return Y.clearItemStates(We)}),this.getEdges().map(function(We){return Y.clearItemStates(We)});var ht=this.get("canvas"),At=ht.get("localRefresh");ht.set("localRefresh",!1),Y.get("data")||(Y.data(l),Y.render());var Ut=this.get("itemMap"),Yt={nodes:[],edges:[]},qt=l.combos;if(qt){var oe=pr(qt,l.nodes);this.set("comboTrees",oe)}this.diffItems("node",Yt,l.nodes),Object(r.f)(Ut,function(We,vn){Ut[vn].getModel().depth=0,We.getType&&We.getType()==="edge"||(We.getType&&We.getType()==="combo"?(delete Ut[vn],We.destroy()):Yt.nodes.indexOf(We)<0&&(delete Ut[vn],Y.remove(We,!1)))});for(var Te=this.getCombos(),Ge=Te.length-1;Ge>=0;Ge--)Te[Ge].destroyed&&Te.splice(Ge,1);qt&&(Y.addCombos(qt),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",Yt,l.edges),Object(r.f)(Ut,function(We,vn){(!We.getType||We.getType()!=="node"&&We.getType()!=="combo")&&Yt.edges.indexOf(We)<0&&(delete Ut[vn],Y.remove(We,!1))}),this.set({nodes:Yt.nodes,edges:Yt.edges});var Ue=this.get("layoutController");return Ue&&(Ue.changeData(),Y.get("animate")&&!Ue.getLayoutType()?Y.positionsAnimate():Y.autoPaint()),setTimeout(function(){ht.set("localRefresh",At)},16),this},v.prototype.addCombos=function(l){var D=this.get("comboTrees");this.get("itemController").addCombos(D,l)},v.prototype.createCombo=function(l,D){var Y=this;this.set("comboSorted",!1);var ht,At="";if(l){if(Object(r.x)(l))At=l,ht={id:l};else{if(!(At=l.id))return void console.warn("Create combo failed. Please assign a unique string id for the adding combo.");ht=l}var Ut=D.map(function(qt){var oe=Y.findById(qt),Te="";oe.getType&&(Te=oe.getType());var Ge={id:oe.getID(),itemType:Te};return Te==="combo"?Ge.parentId=At:Te==="node"&&(Ge.comboId=At),Ge});ht.children=Ut,this.addItem("combo",ht,!1),this.set("comboSorted",!1);var Yt=this.get("comboTrees");(Yt||[]).forEach(function(qt){fr(qt,function(oe){return oe.id!==At||(oe.itemType="combo",oe.children=Ut,!1)})}),Yt&&this.sortCombos()}},v.prototype.uncombo=function(l){var D=this,Y=l;if(Object(r.x)(l)&&(Y=this.findById(l)),!Y||Y.getType&&Y.getType()!=="combo")console.warn("The item is not a combo!");else{var ht=Y.getModel().parentId,At=this.get("comboTrees");At||(At=[]);var Ut,Yt=this.get("itemMap"),qt=Y.get("id"),oe=[],Te=this.get("combos"),Ge=this.findById(ht);if(At.forEach(function(We){Ut||fr(We,function(vn){if(vn.id===qt){Ut=vn,Y.getEdges().forEach(function(Ln){D.removeItem(Ln,!1)});var Tn=Te.indexOf(l);Te.splice(Tn,1),delete Yt[qt],Y.destroy()}return!ht||!Ut||vn.id!==ht||(Ge.removeCombo(Y),(Tn=(oe=vn.children).indexOf(Ut))!==-1&&oe.splice(Tn,1),Ut.children.forEach(function(Ln){var Un=D.findById(Ln.id),Hn=Un.getModel();Un.getType&&Un.getType()==="combo"?(Ln.parentId=ht,delete Ln.comboId,Hn.parentId=ht,delete Hn.comboId):Un.getType&&Un.getType()==="node"&&(Ln.comboId=ht,Hn.comboId=ht),Ge.addChild(Un),oe.push(Ln)}),!1)})}),!ht&&Ut){var Ue=At.indexOf(Ut);At.splice(Ue,1),Ut.children.forEach(function(We){We.parentId=void 0,D.findById(We.id).getModel().parentId=void 0,We.itemType!=="node"&&At.push(We)})}}},v.prototype.updateCombos=function(){var l=this,D=this.get("comboTrees"),Y=this.get("itemController"),ht=this.get("itemMap");(D||[]).forEach(function(At){fr(At,function(Ut){if(!Ut)return!0;var Yt=ht[Ut.id];if(Yt&&Yt.getType&&Yt.getType()==="combo"){var qt=Object(st.d)(Yt.getStates());Object(r.f)(qt,function(oe){return l.setItemState(Yt,oe,!1)}),Y.updateCombo(Yt,Ut.children),Object(r.f)(qt,function(oe){return l.setItemState(Yt,oe,!0)})}return!0})}),this.sortCombos()},v.prototype.updateCombo=function(l){var D,Y=this,ht=l;if(Object(r.x)(l)&&(ht=this.findById(l)),!ht||ht.getType&&ht.getType()!=="combo")console.warn("The item to be updated is not a combo!");else{D=ht.get("id");var At=this.get("comboTrees"),Ut=this.get("itemController"),Yt=this.get("itemMap");(At||[]).forEach(function(qt){fr(qt,function(oe){if(!oe)return!0;var Te=Yt[oe.id];if(D===oe.id&&Te&&Te.getType&&Te.getType()==="combo"){var Ge=Object(st.d)(Te.getStates());Object(r.f)(Ge,function(Ue){Te.getStateStyle(Ue)&&Y.setItemState(Te,Ue,!1)}),Ut.updateCombo(Te,oe.children),Object(r.f)(Ge,function(Ue){Te.getStateStyle(Ue)&&Y.setItemState(Te,Ue,!0)}),D&&(D=oe.parentId)}return!0})})}},v.prototype.updateComboTree=function(l,D,Y){Y===void 0&&(Y=!0);var ht;this.set("comboSorted",!1);var At,Ut=(ht=Object(r.x)(l)?this.findById(l):l).getModel(),Yt=Ut.comboId||Ut.parentId,qt="";if(ht.getType&&(qt=ht.getType()),D&&qt==="combo"){var oe,Te=this.get("comboTrees"),Ge=!0;if((Te||[]).forEach(function(Ln){oe||_n(Ln,function(Un){if(!oe)return Un.id===ht.getID()&&(oe=Un),!0})}),_n(oe,function(Ln){return Ln.id!==D||(Ge=!1,!1)}),!Ge)return void console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!")}if(Y&&this.get("enabledStack")){var Ue={},We={};qt==="combo"?(Ue.combos=[{id:Ut.id,parentId:Ut.parentId}],We.combos=[{id:Ut.id,parentId:D}]):qt==="node"&&(Ue.nodes=[{id:Ut.id,parentId:Ut.comboId}],We.nodes=[{id:Ut.id,parentId:D}]),this.pushStack("updateComboTree",{before:Ue,after:We})}if(Ut.parentId||Ut.comboId){var vn=this.findById(Ut.parentId||Ut.comboId);vn&&vn.removeChild(ht)}qt==="combo"?Ut.parentId=D:qt==="node"&&(Ut.comboId=D),D&&(At=this.findById(D))&&At.addChild(ht),Yt&&(At=this.findById(Yt))&&At.removeChild(ht);var Tn=Vr(this.get("comboTrees"),Ut.id,D);this.set("comboTrees",Tn),this.updateCombos()},v.prototype.save=function(){var l=[],D=[],Y=[];return Object(r.f)(this.get("nodes"),function(ht){l.push(ht.getModel())}),Object(r.f)(this.get("edges"),function(ht){D.push(ht.getModel())}),Object(r.f)(this.get("combos"),function(ht){Y.push(ht.getModel())}),{nodes:l,edges:D,combos:Y}},v.prototype.changeSize=function(l,D){return this.get("viewController").changeSize(l,D),this},v.prototype.refresh=function(){if(this.emit("beforegraphrefresh"),this.get("animate"))this.positionsAnimate();else{var l=this.get("nodes"),D=this.get("edges"),Y=this.get("edges");Object(r.f)(l,function(ht){ht.refresh()}),Object(r.f)(D,function(ht){ht.refresh()}),Object(r.f)(Y,function(ht){ht.refresh()})}this.emit("aftergraphrefresh"),this.autoPaint()},v.prototype.getNodes=function(){return this.get("nodes")},v.prototype.getEdges=function(){return this.get("edges")},v.prototype.getCombos=function(){return this.get("combos")},v.prototype.getComboChildren=function(l){if(Object(r.x)(l)&&(l=this.findById(l)),l&&(!l.getType||l.getType()==="combo"))return l.getChildren();console.warn("The combo does not exist!")},v.prototype.positionsAnimate=function(){var l=this;l.emit("beforeanimate");var D=l.get("animateCfg"),Y=D.onFrame,ht=l.getNodes(),At=ht.map(function(Ut){var Yt=Ut.getModel();return{id:Yt.id,x:Yt.x,y:Yt.y}});l.isAnimating()&&l.stopAnimate(),l.get("canvas").animate(function(Ut){Object(r.f)(At,function(Yt){var qt=l.findById(Yt.id);if(qt&&!qt.destroyed){var oe=qt.get("originAttrs"),Te=qt.get("model");if(!oe){var Ge=qt.getContainer().getMatrix();Ge||(Ge=[1,0,0,0,1,0,0,0,1]),oe={x:Ge[6],y:Ge[7]},qt.set("originAttrs",oe)}if(Y){var Ue=Y(qt,Ut,Yt,oe);qt.set("model",Object.assign(Te,Ue))}else Te.x=oe.x+(Yt.x-oe.x)*Ut,Te.y=oe.y+(Yt.y-oe.y)*Ut}}),l.refreshPositions()},{duration:D.duration,easing:D.easing,callback:function(){Object(r.f)(ht,function(Yt){Yt.set("originAttrs",null)}),D.callback&&D.callback(),l.emit("afteranimate"),l.animating=!1}})},v.prototype.refreshPositions=function(){this.emit("beforegraphrefreshposition");var l,D=this.get("nodes"),Y=this.get("edges"),ht=this.get("vedges"),At=this.get("combos"),Ut={};Object(r.f)(D,function(Yt){l=Yt.getModel();var qt=Yt.get("originAttrs");qt&&l.x===qt.x&&l.y===qt.y||(Yt.updatePosition({x:l.x,y:l.y}),Ut[l.id]=!0,l.comboId&&(Ut[l.comboId]=!0))}),At&&At.length!==0&&this.updateCombos(),Object(r.f)(Y,function(Yt){var qt=Yt.getSource().getModel(),oe=Yt.getTarget().getModel();(Ut[qt.id]||Ut[oe.id]||Yt.getModel().isComboEdge)&&Yt.refresh()}),Object(r.f)(ht,function(Yt){Yt.refresh()}),this.emit("aftergraphrefreshposition"),this.autoPaint()},v.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},v.prototype.isAnimating=function(){return this.animating},v.prototype.getZoom=function(){var l=this.get("group").getMatrix();return l?l[0]:1},v.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},v.prototype.setMode=function(l){return this.get("modeController").setMode(l),this},v.prototype.clear=function(){return this.get("canvas").clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),this.emit("afterrender"),this},v.prototype.updateLayout=function(l){var D,Y=this.get("layoutController");Object(r.x)(l)?l={type:D=l}:D=l.type;var ht=this.get("layout"),At=ht?ht.type:void 0;if(D&&At!==D||l.gpuEnabled!==void 0&&l.gpuEnabled!==ht.gpuEnabled)D||(D=At),this.set("layout",l),Y.changeLayout(D);else{var Ut={};Object.assign(Ut,ht,l),Ut.type=At||"random",this.set("layout",Ut),Y.updateLayoutCfg(Ut)}},v.prototype.destroyLayout=function(){this.get("layoutController").destroyLayout()},v.prototype.layout=function(){var l=this.get("layoutController"),D=this.get("layout");D&&l&&(D.workerEnabled?l.layout():l.layoutMethod?l.relayout(!0):l.layout())},v.prototype.collapseCombo=function(l){var D=this;if(Object(r.x)(l)&&(l=this.findById(l)),l){this.emit("beforecollapseexpandcombo",{action:"expand",item:l});var Y=l.getModel();this.get("itemController").collapseCombo(l),Y.collapsed=!0;var ht=this.getEdges().concat(this.get("vedges")),At=[],Ut=[],Yt=this.get("comboTrees"),qt=!1,oe={};(Yt||[]).forEach(function(Ue){oe[Ue.id]=Ue}),(Yt||[]).forEach(function(Ue){qt||_n(Ue,function(We){if(qt&&oe[We.id])return!1;if(Y.parentId===We.id?(oe={},We.children.forEach(function(Tn){oe[Tn.id]=Tn})):Y.id===We.id&&(qt=!0),qt){var vn=D.findById(We.id);vn&&vn.getType&&vn.getType()==="combo"&&(At=At.concat(vn.getNodes()),Ut=Ut.concat(vn.getCombos()))}return!0})});var Te={},Ge=[];ht.forEach(function(Ue){if(!Ue.isVisible()||Ue.getModel().isVEdge){var We=Ue.getSource(),vn=Ue.getTarget();if((At.includes(We)||Ut.includes(We))&&!At.includes(vn)&&!Ut.includes(vn)||We.getModel().id===Y.id){if((Hn=Ue.getModel()).isVEdge)return void D.removeItem(Ue,!1);for(var Tn=vn.getModel();!vn.isVisible();){if(!(vn=D.findById(Tn.parentId||Tn.comboId))||!Tn.parentId&&!Tn.comboId)return;Tn=vn.getModel()}var Ln=Tn.id;if(Te[Y.id+"-"+Ln])return void(Te[Y.id+"-"+Ln]+=Hn.size||1);var Un=D.addItem("vedge",{source:Y.id,target:Ln,isVEdge:!0},!1);Te[Y.id+"-"+Ln]=Hn.size||1,Ge.push(Un)}else if(!At.includes(We)&&!Ut.includes(We)&&(At.includes(vn)||Ut.includes(vn))||vn.getModel().id===Y.id){var Hn;if((Hn=Ue.getModel()).isVEdge)return void D.removeItem(Ue,!1);for(var xr=We.getModel();!We.isVisible();){if(!(We=D.findById(xr.parentId||xr.comboId))||!xr.parentId&&!xr.comboId)return;xr=We.getModel()}var Or=xr.id;if(Te[Or+"-"+Y.id])return void(Te[Or+"-"+Y.id]+=Hn.size||1);Un=D.addItem("vedge",{target:Y.id,source:Or,isVEdge:!0},!1),Te[Or+"-"+Y.id]=Hn.size||1,Ge.push(Un)}}}),Ge.forEach(function(Ue){var We=Ue.getModel();D.updateItem(Ue,{size:Te[We.source+"-"+We.target]},!1)}),this.emit("aftercollapseexpandcombo",{action:"collapse",item:l})}else console.warn("The combo to be collapsed does not exist!")},v.prototype.expandCombo=function(l){var D=this;if(Object(r.x)(l)&&(l=this.findById(l)),!l||l.getType&&l.getType()!=="combo")console.warn("The combo to be collapsed does not exist!");else{this.emit("beforecollapseexpandcombo",{action:"expand",item:l});var Y=l.getModel();this.get("itemController").expandCombo(l),Y.collapsed=!1;var ht=this.getEdges().concat(this.get("vedges")),At=[],Ut=[],Yt=this.get("comboTrees"),qt=!1,oe={};(Yt||[]).forEach(function(Ue){oe[Ue.id]=Ue}),(Yt||[]).forEach(function(Ue){qt||_n(Ue,function(We){if(qt&&oe[We.id])return!1;if(Y.parentId===We.id?(oe={},We.children.forEach(function(Tn){oe[Tn.id]=Tn})):Y.id===We.id&&(qt=!0),qt){var vn=D.findById(We.id);vn&&vn.getType&&vn.getType()==="combo"&&(At=At.concat(vn.getNodes()),Ut=Ut.concat(vn.getCombos()))}return!0})});var Te={},Ge={};ht.forEach(function(Ue){if(!Ue.isVisible()||Ue.getModel().isVEdge){var We=Ue.getSource(),vn=Ue.getTarget(),Tn=We.get("id"),Ln=vn.get("id");if((At.includes(We)||Ut.includes(We))&&!At.includes(vn)&&!Ut.includes(vn)||Tn===Y.id){if(Ue.getModel().isVEdge)return void D.removeItem(Ue,!1);for(var Un=vn.getModel();!vn.isVisible();){if(!(vn=D.findById(Un.comboId||Un.parentId))||!Un.parentId&&!Un.comboId)return;Un=vn.getModel()}Ln=Un.id;for(var Hn=We.getModel();!We.isVisible();){if(!(We=D.findById(Hn.comboId||Hn.parentId))||!Hn.parentId&&!Hn.comboId)return;if(Hn.comboId===Y.id||Hn.parentId===Y.id)break;Hn=We.getModel()}if(Tn=Hn.id,Ln){if(Te[Or=Tn+"-"+Ln])return Te[Or]+=Ue.getModel().size||1,void D.updateItem(Ge[Or],{size:Te[Or]},!1);var xr=D.addItem("vedge",{source:Tn,target:Ln,isVEdge:!0},!1);Te[Or]=Ue.getModel().size||1,Ge[Or]=xr}}else if(!At.includes(We)&&!Ut.includes(We)&&(At.includes(vn)||Ut.includes(vn))||Ln===Y.id){if(Ue.getModel().isVEdge)return void D.removeItem(Ue,!1);for(Hn=We.getModel();!We.isVisible();){if(!(We=D.findById(Hn.comboId||Hn.parentId))||!Hn.parentId&&!Hn.comboId)return;Hn=We.getModel()}for(Tn=Hn.id,Un=vn.getModel();!vn.isVisible();){if(!(vn=D.findById(Un.comboId||Un.parentId))||!Un.parentId&&!Un.comboId)return;if(Un.comboId===Y.id||Un.parentId===Y.id)break;Un=vn.getModel()}if(Ln=Un.id,Tn){var Or;if(Te[Or=Tn+"-"+Ln])return Te[Or]+=Ue.getModel().size||1,void D.updateItem(Ge[Or],{size:Te[Or]},!1);xr=D.addItem("vedge",{target:Ln,source:Tn,isVEdge:!0},!1),Te[Or]=Ue.getModel().size||1,Ge[Or]=xr}}else(At.includes(We)||Ut.includes(We))&&(At.includes(vn)||Ut.includes(vn))&&We.isVisible()&&vn.isVisible()&&Ue.show()}}),this.emit("aftercollapseexpandcombo",{action:"expand",item:l})}},v.prototype.collapseExpandCombo=function(l){if(Object(r.x)(l)&&(l=this.findById(l)),!l.getType||l.getType()==="combo"){for(var D=l.getModel(),Y=this.findById(D.parentId);Y;){var ht=Y.getModel();if(ht.collapsed)return console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),void(Y=void 0);Y=this.findById(ht.parentId)}D.collapsed?this.expandCombo(l):this.collapseCombo(l),this.updateCombo(l)}},v.prototype.sortCombos=function(){var l=this;if(!this.get("comboSorted")){this.set("comboSorted",!0);var D=[],Y={};(this.get("comboTrees")||[]).forEach(function(ht){_n(ht,function(At){return D[At.depth]?D[At.depth].push(At.id):D[At.depth]=[At.id],Y[At.id]=At.depth,!0})}),(this.getEdges().concat(this.get("vedges"))||[]).forEach(function(ht){var At=ht.getModel(),Ut=Y[At.source]||0,Yt=Y[At.target]||0,qt=Math.max(Ut,Yt);D[qt]?D[qt].push(At.id):D[qt]=[At.id]}),D.forEach(function(ht){if(ht&&ht.length)for(var At=ht.length-1;At>=0;At--){var Ut=l.findById(ht[At]);Ut&&Ut.toFront()}})}},v.prototype.getNeighbors=function(l,D){var Y=l;return Object(r.x)(l)&&(Y=this.findById(l)),Y.getNeighbors(D)},v.prototype.getNodeDegree=function(l,D){D===void 0&&(D=void 0);var Y=l;Object(r.x)(l)&&(Y=this.findById(l));var ht=this.get("degrees");ht||(ht=Object(Ee.getDegree)(this.get("data"))),this.set("degees",ht);var At,Ut=ht[Y.getID()];switch(D){case"in":At=Ut.inDegree;break;case"out":At=Ut.outDegree;break;case"all":At=Ut;break;default:At=Ut.degree}return At},v.prototype.getUndoStack=function(){return this.undoStack},v.prototype.getRedoStack=function(){return this.redoStack},v.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},v.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},v.prototype.pushStack=function(l,D,Y){if(l===void 0&&(l="update"),Y===void 0&&(Y="undo"),this.get("enabledStack")){var ht=D?Object(r.c)(D):{before:{},after:Object(r.c)(this.save())};Y==="redo"?this.redoStack.push({action:l,data:ht}):this.undoStack.push({action:l,data:ht}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})}else console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !")},v.prototype.getAdjMatrix=function(l,D){l===void 0&&(l=!0),D===void 0&&(D=this.get("directed"));var Y=this.get("adjMatrix");return Y&&l||(Y=Object(Ee.getAdjMatrix)(this.save(),D),this.set("adjMatrix",Y)),Y},v.prototype.getShortestPathMatrix=function(l,D){l===void 0&&(l=!0),D===void 0&&(D=this.get("directed"));var Y=this.get("adjMatrix"),ht=this.get("shortestPathMatrix");return Y&&l||(Y=Object(Ee.getAdjMatrix)(this.save(),D),this.set("adjMatrix",Y)),ht&&l||(ht=Object(Ee.floydWarshall)(this.save(),D),this.set("shortestPathMatrix",ht)),ht},v.prototype.on=function(l,D,Y){return kt.prototype.on.call(this,l,D,Y)},v.prototype.destroy=function(){this.clear(),this.clearStack(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("canvas").destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},v.prototype.createHull=function(l){if(l.members&&!(l.members.length<1)){var D=this.get("hullGroup"),Y=this.get("hullMap");if(Y||(Y={},this.set("hullMap",Y)),D||((D=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",D)),Y[l.id])return console.warn("Existed hull id."),Y[l.id];var ht=D.addGroup({id:l.id+"-container"}),At=new Ia(this,Object(st.a)(Object(st.a)({},l),{group:ht}));return Y[At.id]=At,At}console.warn("Create hull failed! The members is empty.")},v.prototype.getHulls=function(){return this.get("hullMap")},v.prototype.getHullById=function(l){return this.get("hullMap")[l]},v.prototype.removeHull=function(l){var D;D=Object(r.x)(l)?this.getHullById(l):l,delete this.get("hullMap")[D.id],D.destroy()},v.prototype.removeHulls=function(){var l=this.getHulls();l&&Object.keys(l).length&&(l.forEach(function(D){D.destroy()}),this.set("hullMap",{}))}})(_t.a);function Xa(kt){return(Xa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(kt)}var so=Xt.a.transform,Lo=["startArrow","endArrow"],zo={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Jo={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:zo,combo:zo},uo={options:{},itemType:"",type:"",getCustomConfig:function(v){return{}},getOptions:function(v){return Object(r.e)({labelCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}},descriptionCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}}},this.options,this.getCustomConfig(v)||{},v)},draw:function(v,l){var D=this.drawShape(v,l);return D.set("className",this.itemType+"-shape"),v.label&&this.drawLabel(v,l).set("className",this.itemType+"-label"),D},afterDraw:function(v,l,D){},drawShape:function(v,l){return null},drawLabel:function(v,l){var D=this.getOptions(v).labelCfg||{},Y=this.getLabelStyle(v,D,l),ht=Y.rotate;delete Y.rotate;var At=l.addShape("text",{attrs:Y,draggable:!0,className:"text-shape",name:"text-shape"});if(ht){var Ut=At.getBBox(),Yt=At.getMatrix();if(Yt||(Yt=[1,0,0,0,1,0,0,0,1]),Y.rotateCenter)switch(Y.rotateCenter){case"center":Yt=so(Yt,[["t",-Ut.width/2,-Ut.height/2],["r",ht],["t",Ut.width/2,Ut.height/2]]);break;case"lefttop":Yt=so(Yt,[["t",-Y.x,-Y.y],["r",ht],["t",Y.x,Y.y]]);break;case"leftcenter":Yt=so(Yt,[["t",-Y.x,-Y.y-Ut.height/2],["r",ht],["t",Y.x,Y.y+Ut.height/2]]);break;default:Yt=so(Yt,[["t",-Ut.width/2,-Ut.height/2],["r",ht],["t",Ut.width/2,Ut.height/2]])}else Yt=so(Yt,[["t",-Y.x,-Y.y-Ut.height/2],["r",ht],["t",Y.x,Y.y+Ut.height/2]]);At.setMatrix(Yt)}if(Y.background){var qt=this.drawLabelBg(v,l,At),oe=this.itemType+"-label-bg";qt.set("classname",oe),At.toFront()}return At},drawLabelBg:function(v,l,D){var Y=this.options.labelCfg,ht=Object(r.A)({},Y,v.labelCfg),At=this.getLabelBgStyleByPosition(D,v,ht,l);return l.addShape("rect",{name:"text-bg-shape",attrs:At})},getLabelStyleByPosition:function(v,l,D){return{text:v.label}},getLabelBgStyleByPosition:function(v,l,D,Y){return{}},getLabelStyle:function(v,l,D){var Y=this.getLabelStyleByPosition(v,l,D),ht=this.itemType+"Label",At=Fn[ht]?Fn[ht].style:null;return Object(st.a)(Object(st.a)(Object(st.a)({},At),Y),l.style)},getShapeStyle:function(v){return v.style},update:function(v,l){this.updateShapeStyle(v,l),this.updateLabel(v,l)},updateShapeStyle:function(v,l){var D=l.getContainer(),Y=l.getKeyShape(),ht=Object(r.A)({},Y.attr(),v.style),At=function(qt){var oe,Te=ht[qt];if(Object(r.w)(Te)){var Ge=D.find(function(Ue){return Ue.get("name")===qt});Ge&&Ge.attr(Te)}else Y.attr(((oe={})[qt]=Te,oe))};for(var Ut in ht)At(Ut)},updateLabel:function(v,l){var D=l.getContainer(),Y=this.getOptions({}).labelCfg,ht=this.itemType+"-label",At=D.find(function(xr){return xr.get("className")===ht}),Ut=this.itemType+"-label-bg",Yt=D.find(function(xr){return xr.get("classname")===Ut});if(v.label||v.label==="")if(At){var qt={};l.getModel&&(qt=l.getModel().labelCfg);var oe=Object(r.e)({},Y,qt,v.labelCfg),Te=this.getLabelStyleByPosition(v,oe,D),Ge=v.labelCfg?v.labelCfg.style:void 0,Ue=oe.style&&oe.style.background,We=Object(st.a)(Object(st.a)(Object(st.a)({},At.attr()),Te),Ge),vn=We.rotate;if(delete We.rotate,vn){var Tn=[1,0,0,0,1,0,0,0,1];Tn=so(Tn,[["t",-We.x,-We.y],["r",vn],["t",We.x,We.y]]),At.resetMatrix(),At.attr(Object(st.a)(Object(st.a)({},We),{matrix:Tn}))}else At.resetMatrix(),At.attr(We);if(Yt)if(We.background){var Ln=this.getLabelBgStyleByPosition(At,v,oe,D),Un=Object(st.a)(Object(st.a)({},Ln),Ue);if(Yt.resetMatrix(),vn){var Hn=[1,0,0,0,1,0,0,0,1];Hn=so(Hn,[["t",-Un.x,-Un.y],["r",vn],["t",Un.x,Un.y]]),Un.matrix=Hn}Yt.attr(Un)}else D.removeChild(Yt);else We.background&&((Yt=this.drawLabelBg(v,D,At)).set("classname",Ut),At.toFront())}else this.drawLabel(v,D).set("className",ht)},afterUpdate:function(v,l){},setState:function(v,l,D){var Y,ht,At=D.get("keyShape");if(At){var Ut=D.getType(),Yt=Object(r.n)(l)?v:v+":"+l,qt=this.getStateStyle(Yt,D),oe=D.getStateStyle(Yt);if(oe||qt){var Te=Object(r.A)({},oe||qt),Ge=D.getContainer(),Ue={x:1,y:1,cx:1,cy:1};if(Ut==="combo"&&(Ue.r=1,Ue.width=1,Ue.height=1),l){var We=function(ya){var Mo,jo=Te[ya];if(Object(r.w)(jo)&&!Lo.includes(ya)){var Ro=Ge.find(function(Za){return Za.get("name")===ya});Ro&&Ro.attr(jo)}else At.attr(((Mo={})[ya]=jo,Mo))};for(var vn in Te)We(vn)}else{var Tn=br(D.getCurrentStatesStyle()),Ln=D.getModel(),Un=Object(r.A)({},Ln.style,br(D.getOriginStyle())),Hn=At.get("name"),xr=At.attr(),Or={};Object.keys(xr).forEach(function(Ja){if(Ja!=="img"){var ya=xr[Ja];ya&&Xa(ya)==="object"?Or[Ja]=Object(r.c)(ya):Or[Ja]=ya}});var Rr={},yi=function(ya){var Mo=Te[ya];if(Object(r.w)(Mo)&&!Lo.includes(ya)){var jo=Ge.find(function(Ao){return Ao.get("name")===ya});if(jo){var Ro=Object(r.c)(jo.attr());Object(r.f)(Mo,function(Ao,$a){if(ya===Hn&&Or[$a]&&!Ue[$a]){delete Or[$a];var ns=Un[ya][$a]||Jo[Ut][$a];At.attr($a,ns)}else if(Ro[$a]||Ro[$a]===0){delete Ro[$a];var ba=Un[ya][$a]||Jo[Ut][$a];jo.attr($a,ba)}}),Rr[ya]=Ro}}else if(Or[ya]&&!Ue[ya]){delete Or[ya];var Za=Un[ya]||(Un[Hn]?Un[Hn][ya]:void 0)||Jo[Ut][ya];At.attr(ya,Za)}};for(var Xi in Te)yi(Xi);for(var vn in Hn?Rr[Hn]=Or:Object(r.A)(Rr,Or),Tn)if(!Ue[vn]){var Zr=Tn[vn];Object(r.w)(Zr)&&!Lo.includes(vn)||(Hn?(Object(r.A)(Un[Hn],((ht={})[vn]=Zr,ht)),delete Un[vn]):Object(r.A)(Un,((Y={})[vn]=Zr,Y)),delete Tn[vn])}var ki={};Object(r.e)(ki,Un,Rr,Tn);var Ba=!1,Ha=function(ya){var Mo,jo,Ro=ki[ya];if(Object(r.w)(Ro)&&!Lo.includes(ya)){var Za=Ge.find(function($a){return $a.get("name")===ya});Za&&(ya===Hn&&(Ut==="combo"&&(delete Ro.r,delete Ro.width,delete Ro.height),Ba=!0),Za.attr(Ro))}else if(!Ba){var Ao=Ro||Jo[Ut][ya];Ut==="combo"?Hn||At.attr(((Mo={})[ya]=Ao,Mo)):At.attr(((jo={})[ya]=Ao,jo))}};for(var Ka in ki)Ha(Ka)}}}},getStateStyle:function(v,l){var D=l.getModel(),Y=l.getType(),ht=this.getOptions(D),At=ht.stateStyles,Ut=ht.style,Yt=Ut===void 0?{}:Ut,qt=D.stateStyles?D.stateStyles[v]:At&&At[v];return Y==="combo"?Object(r.c)(qt):Object(r.A)({},Yt,qt)},getControlPoints:function(v){return v.controlPoints},getAnchorPoints:function(v){return this.getOptions(v).anchorPoints}},Rn={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:Fn.nodeLabel.offset,getSize:function(v){var l=v.size||this.getOptions({}).size||Fn.defaultNode.size;return Object(r.m)(l)&&l.length===1&&(l=[l[0],l[0]]),Object(r.m)(l)||(l=[l,l]),l},getLabelStyleByPosition:function(v,l){var D=l.position||this.labelPosition;if(D==="center")return{x:0,y:0,text:v.label};var Y=l.offset;Object(r.s)(Y)&&(Y=this.offset);var ht,At=this.getSize(v),Ut=At[0],Yt=At[1];switch(D){case"top":ht={x:0,y:0-Yt/2-Y,textBaseline:"bottom"};break;case"bottom":ht={x:0,y:Yt/2+Y,textBaseline:"top"};break;case"left":ht={x:0-Ut/2-Y,y:0,textAlign:"right"};break;default:ht={x:Ut/2+Y,y:0,textAlign:"left"}}return ht.text=v.label,ht},getLabelBgStyleByPosition:function(v,l,D,Y){if(!v)return{};var ht=v.getBBox(),At=D.style&&D.style.background;if(!At)return{};var Ut,Yt=zr(At.padding),qt=ht.width+Yt[1]+Yt[3],oe=ht.height+Yt[0]+Yt[2],Te=D.offset;return Object(r.s)(Te)&&(Te=this.offset),Ut={x:ht.minX-Yt[3],y:ht.minY-Yt[0]},Ut=Object(st.a)(Object(st.a)(Object(st.a)({},Ut),At),{width:qt,height:oe})},drawShape:function(v,l){var D=this.shapeType,Y=this.getShapeStyle(v);return l.addShape(D,{attrs:Y,draggable:!0,name:"node-shape"})},updateLinkPoints:function(v,l){var D,Y=this.getOptions(v).linkPoints,ht=l.find(function(yi){return yi.get("className")==="link-point-left"}),At=l.find(function(yi){return yi.get("className")==="link-point-right"}),Ut=l.find(function(yi){return yi.get("className")==="link-point-top"}),Yt=l.find(function(yi){return yi.get("className")==="link-point-bottom"});ht&&(D=ht.attr()),At&&!D&&(D=At.attr()),Ut&&!D&&(D=Ut.attr()),Yt&&!D&&(D=Yt.attr()),D||(D=Y);var qt=Object(r.A)({},D,v.linkPoints),oe=qt.fill,Te=qt.stroke,Ge=qt.lineWidth,Ue=qt.size/2;Ue||(Ue=qt.r);var We=v.linkPoints?v.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},vn=We.left,Tn=We.right,Ln=We.top,Un=We.bottom,Hn=this.getSize(v),xr=Hn[0],Or=Hn[1],Rr={r:Ue,fill:oe,stroke:Te,lineWidth:Ge};ht?vn||vn===void 0?ht.attr(Object(st.a)(Object(st.a)({},Rr),{x:-xr/2,y:0})):ht.remove():vn&&l.addShape("circle",{attrs:Object(st.a)(Object(st.a)({},Rr),{x:-xr/2,y:0}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),At?(Tn||Tn===void 0||At.remove(),At.attr(Object(st.a)(Object(st.a)({},Rr),{x:xr/2,y:0}))):Tn&&l.addShape("circle",{attrs:Object(st.a)(Object(st.a)({},Rr),{x:xr/2,y:0}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Ut?(Ln||Ln===void 0||Ut.remove(),Ut.attr(Object(st.a)(Object(st.a)({},Rr),{x:0,y:-Or/2}))):Ln&&l.addShape("circle",{attrs:Object(st.a)(Object(st.a)({},Rr),{x:0,y:-Or/2}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),Yt?Un||Un===void 0?Yt.attr(Object(st.a)(Object(st.a)({},Rr),{x:0,y:Or/2})):Yt.remove():Un&&l.addShape("circle",{attrs:Object(st.a)(Object(st.a)({},Rr),{x:0,y:Or/2}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},updateShape:function(v,l,D,Y){l.get("keyShape").attr(Object(st.a)({},D)),this.updateLabel(v,l),Y&&this.updateIcon(v,l)},updateIcon:function(v,l){var D=this,Y=l.getContainer(),ht=this.getOptions(v).icon,At=(v.icon?v.icon:{show:void 0}).show,Ut=Y.find(function(Ge){return Ge.get("className")===D.type+"-icon"});if(Ut)if(At||At===void 0){var Yt=Object(r.A)({},Ut.attr(),ht),qt=Yt.width,oe=Yt.height;Ut.attr(Object(st.a)(Object(st.a)({},Yt),{x:-qt/2,y:-oe/2}))}else Ut.remove();else if(At){qt=ht.width,oe=ht.height,Y.addShape("image",{attrs:Object(st.a)(Object(st.a)({},ht),{x:-qt/2,y:-oe/2}),className:this.type+"-icon",name:this.type+"-icon"});var Te=Y.find(function(Ge){return Ge.get("className")==="node-label"});Te&&Te.toFront()}}},qo=Object(st.a)(Object(st.a)({},uo),Rn);er.registerNode("single-node",qo);var wo={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:Fn.defaultEdge.size,style:{x:0,y:0,stroke:Fn.defaultEdge.style.stroke,lineAppendWidth:Fn.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Fn.edgeLabel.style.fill,fontSize:Fn.edgeLabel.style.fontSize}},stateStyles:Object(st.a)({},Fn.edgeStateStyles)},getPath:function(v){var l=[];return Object(r.f)(v,function(D,Y){Y===0?l.push(["M",D.x,D.y]):l.push(["L",D.x,D.y])}),l},getShapeStyle:function(v){var l=this.options.style,D={stroke:v.color},Y=Object(r.A)({},l,D,v.style),ht=v.size||Fn.defaultEdge.size,At=(v=this.getPathPoints(v)).startPoint,Ut=v.endPoint,Yt=this.getControlPoints(v),qt=[At];Yt&&(qt=qt.concat(Yt)),qt.push(Ut);var oe=this.getPath(qt);return Object(r.A)({},Fn.defaultEdge.style,{stroke:Fn.defaultEdge.color,lineWidth:ht,path:oe},Y)},updateShapeStyle:function(v,l){var D=l.getContainer(),Y={stroke:v.color},ht=D.find(function(Un){return Un.get("className")==="edge-shape"})||l.getKeyShape(),At=v.size,Ut=(v=this.getPathPoints(v)).startPoint,Yt=v.endPoint,qt=this.getControlPoints(v),oe=[Ut];qt&&(oe=oe.concat(qt)),oe.push(Yt);var Te=ht.attr(),Ge=Object(r.A)({},Y,Te,v.style),Ue=v.sourceNode,We=v.targetNode,vn={radius:Ge.radius};qt||(vn={source:Ue,target:We,offset:Ge.offset,radius:Ge.radius}),Te.endArrow&&Ge.endArrow===!1&&(v.style.endArrow={path:""}),Te.startArrow&&Ge.startArrow===!1&&(v.style.startArrow={path:""});var Tn=this.getPath(oe,vn),Ln=Object(r.A)(Y,ht.attr(),{lineWidth:At,path:Tn},v.style);ht&&ht.attr(Ln)},getLabelStyleByPosition:function(v,l,D){var Y,ht=l.position||this.labelPosition,At={},Ut=D&&D.find(function(Ge){return Ge.get("className")==="edge-shape"});Y=ht==="start"?0:ht==="end"?1:.5;var Yt=l.refX||this.refX,qt=l.refY||this.refY;if(v.startPoint.x===v.endPoint.x&&v.startPoint.y===v.endPoint.y)return At.x=v.startPoint.x+Yt,At.y=v.startPoint.y+qt,At.text=v.label,At;var oe=Object(r.s)(l.autoRotate)?this.labelAutoRotate:l.autoRotate,Te=Jn(Ut,Y,Yt,qt,oe);return At.x=Te.x,At.y=Te.y,At.rotate=Te.rotate,At.textAlign=this._getTextAlign(ht,Te.angle),At.text=v.label,At},getLabelBgStyleByPosition:function(v,l,D,Y){if(!v)return{};var ht=v.getBBox(),At=D.style&&D.style.background;if(!At)return{};var Ut,Yt=At.padding,qt=ht.width+Yt[1]+Yt[3],oe=ht.height+Yt[0]+Yt[2],Te=D.position||this.labelPosition,Ge=Object(st.a)(Object(st.a)({},At),{width:qt,height:oe,x:ht.minX-Yt[2],y:ht.minY-Yt[0],rotate:0}),Ue=Object(r.s)(D.autoRotate)?this.labelAutoRotate:D.autoRotate,We=Y&&Y.find(function(Hn){return Hn.get("className")==="edge-shape"});Ut=Te==="start"?0:Te==="end"?1:.5;var vn=D.refX||this.refX,Tn=D.refY||this.refY;if(l.startPoint.x===l.endPoint.x&&l.startPoint.y===l.endPoint.y)return Ge.x=l.startPoint.x+vn-qt/2,Ge.y=l.startPoint.y+Tn-oe/2,Ge;var Ln=Jn(We,Ut,vn-qt/2,Tn+oe/2,Ue),Un=Ln.angle;return Un>.5*Math.PI&&Un<1.5*Math.PI&&(Ln=Jn(We,Ut,vn+qt/2,Tn+oe/2,Ue)),Ue&&(Ge.x=Ln.x,Ge.y=Ln.y),Ge.rotate=Ln.rotate,Ge},_getTextAlign:function(v,l){var D="center";return l?(l%=2*Math.PI,v!=="center"&&(D=l>=0&&l<=Math.PI/2||l>=1.5*Math.PI&&l<2*Math.PI?v:function(Y){var ht=Y;return Y==="start"?ht="end":Y==="end"&&(ht="start"),ht}(v)),D):v},getControlPoints:function(v){return v.controlPoints},getPathPoints:function(v){return v},drawShape:function(v,l){var D=this.getShapeStyle(v);return l.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:D})},drawLabel:function(v,l){var D=this.options.labelCfg,Y=Object(r.e)({fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},D,v.labelCfg),ht=this.getLabelStyle(v,Y,l),At=ht.rotate;delete ht.rotate;var Ut=l.addShape("text",{attrs:ht,name:"text-shape"});if(At&&Ut.rotateAtStart(At),ht.background){var Yt=this.drawLabelBg(v,l,Ut),qt=this.itemType+"-label-bg";Yt.set("classname",qt),Ut.toFront()}return Ut},drawLabelBg:function(v,l,D){var Y=this.options.labelCfg,ht=Object(r.e)({},Y,v.labelCfg),At=this.getLabelStyle(v,ht,l).rotate,Ut=this.getLabelBgStyleByPosition(D,v,ht,l);delete Ut.rotate;var Yt=l.addShape("rect",{name:"text-bg-shape",attrs:Ut});return At&&Yt.rotateAtStart(At),Yt}},Ho=Object(st.a)(Object(st.a)({},uo),wo);er.registerEdge("single-edge",Ho),er.registerEdge("line",{getControlPoints:function(){}},"single-edge"),er.registerEdge("spline",{getPath:function(v){return Na(v)}},"single-edge"),er.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(v){var l,D,Y=v.startPoint,ht=v.endPoint,At=(Y.x+ht.x)/2,Ut=(Y.y+ht.y)/2;if(v.controlPoints!==void 0){if(D=v.controlPoints[0],l=Et(Y,D,ht),Y.x<=ht.x&&Y.y>ht.y?this.clockwise=l.x>D.x?0:1:Y.x<=ht.x&&Y.y<ht.y?this.clockwise=l.x>D.x?1:0:Y.x>ht.x&&Y.y<=ht.y?this.clockwise=l.y<D.y?0:1:this.clockwise=l.y<D.y?1:0,(D.x-Y.x)/(D.y-Y.y)==(ht.x-Y.x)/(ht.y-Y.y))return[]}else{v.curveOffset===void 0&&(v.curveOffset=this.curveOffset),Object(r.m)(v.curveOffset)&&(v.curveOffset=v.curveOffset[0]),v.curveOffset<0?this.clockwise=0:this.clockwise=1;var Yt={x:ht.x-Y.x,y:ht.y-Y.y},qt=Math.atan2(Yt.y,Yt.x);D={x:v.curveOffset*Math.cos(-Math.PI/2+qt)+At,y:v.curveOffset*Math.sin(-Math.PI/2+qt)+Ut},l=Et(Y,D,ht)}var oe=$t(Y,l);return[{x:oe,y:oe}]},getPath:function(v){var l=[];return l.push(["M",v[0].x,v[0].y]),v.length===2?l.push(["L",v[1].x,v[1].y]):l.push(["A",v[1].x,v[1].y,0,0,this.clockwise,v[2].x,v[2].y]),l}},"single-edge"),er.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(v){var l=v.controlPoints;if(!l||!l.length){var D=v.startPoint,Y=v.endPoint;v.curveOffset===void 0&&(v.curveOffset=this.curveOffset),v.curvePosition===void 0&&(v.curvePosition=this.curvePosition),Object(r.m)(this.curveOffset)&&(v.curveOffset=v.curveOffset[0]),Object(r.m)(this.curvePosition)&&(v.curvePosition=v.curveOffset[0]),l=[Fa(D,Y,v.curvePosition,v.curveOffset)]}return l},getPath:function(v){var l=[];return l.push(["M",v[0].x,v[0].y]),l.push(["Q",v[1].x,v[1].y,v[2].x,v[2].y]),l}},"single-edge"),er.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(v){var l=v.controlPoints;if(v.curveOffset===void 0&&(v.curveOffset=this.curveOffset),v.curvePosition===void 0&&(v.curvePosition=this.curvePosition),Object(r.t)(v.curveOffset)&&(v.curveOffset=[v.curveOffset,-v.curveOffset]),Object(r.t)(v.curvePosition)&&(v.curvePosition=[v.curvePosition,1-v.curvePosition]),!l||!l.length||l.length<2){var D=v.startPoint,Y=v.endPoint;l=[Fa(D,Y,v.curvePosition[0],v.curveOffset[0]),Fa(D,Y,v.curvePosition[1],v.curveOffset[1])]}return l},getPath:function(v){var l=[];return l.push(["M",v[0].x,v[0].y]),l.push(["C",v[1].x,v[1].y,v[2].x,v[2].y,v[3].x,v[3].y]),l}},"single-edge"),er.registerEdge("cubic-vertical",{curvePosition:[.5,.5],getControlPoints:function(v){var l=v.startPoint,D=v.endPoint;return v.curvePosition!==void 0&&(this.curvePosition=v.curvePosition),Object(r.t)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]),[{x:l.x,y:(D.y-l.y)*this.curvePosition[0]+l.y},{x:D.x,y:(D.y-l.y)*this.curvePosition[1]+l.y}]}},"cubic"),er.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],getControlPoints:function(v){var l=v.startPoint,D=v.endPoint;return v.curvePosition!==void 0&&(this.curvePosition=v.curvePosition),Object(r.t)(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]),[{x:(D.x-l.x)*this.curvePosition[0]+l.x,y:l.y},{x:(D.x-l.x)*this.curvePosition[1]+l.x,y:D.y}]}},"cubic"),er.registerEdge("loop",{getPathPoints:function(v){return Yn(v)},getControlPoints:function(v){return v.controlPoints},afterDraw:function(v){v.controlPoints=void 0},afterUpdate:function(v){v.controlPoints=void 0}},"cubic");var ss={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:Fn.comboLabel.refX,refY:Fn.comboLabel.refY,options:{style:{stroke:Fn.defaultCombo.style.stroke,fill:Fn.defaultCombo.style.fill,lineWidth:Fn.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Fn.comboLabel.style.fill,fontSize:Fn.comboLabel.style.fontSize}},stateStyles:Object(st.a)({},Fn.comboStateStyles)},getSize:function(v){var l=Object(r.c)(v.size||this.options.size||Fn.defaultCombo.size);return Object(r.m)(l)&&l.length===1&&(l=[l[0],l[0]]),Object(r.m)(l)||(l=[l,l]),l},getLabelStyleByPosition:function(v,l){var D=l.position||this.labelPosition,Y=v.style,ht=v.padding||this.options.padding;Object(r.m)(ht)&&(ht=ht[0]);var At=l.refX,Ut=l.refY;Object(r.s)(At)&&(At=this.refX),Object(r.s)(Ut)&&(Ut=this.refY);var Yt,qt=this.getSize(v),oe=(Math.max(Y.r,qt[0]/2)||qt[0]/2)+ht;switch(D){case"top":Yt={x:0,y:-oe-Ut,textBaseline:"bottom",textAlign:"center"};break;case"bottom":Yt={x:0,y:oe+Ut,textBaseline:"bottom",textAlign:"center"};break;case"left":Yt={x:-oe+At,y:0,textAlign:"left"};break;case"center":Yt={x:0,y:0,text:v.label,textAlign:"center"};break;default:Yt={x:oe+At,y:0,textAlign:"right"}}return Yt.text=v.label,Yt},drawShape:function(v,l){var D=this.shapeType,Y=this.getShapeStyle(v);return l.addShape(D,{attrs:Y,draggable:!0,name:"combo-shape"})},updateShape:function(v,l,D){var Y=l.get("keyShape");(v.animate===void 0?this.options.animate:v.animate)&&Y.animate?Y.animate(D,{duration:200,easing:"easeLinear"}):Y.attr(Object(st.a)({},D)),this.updateLabel(v,l)}},ts=Object(st.a)(Object(st.a)({},uo),ss);er.registerCombo("single-combo",ts),er.registerCombo("circle",{options:{size:[Fn.defaultCombo.size[0],Fn.defaultCombo.size[0]],padding:Fn.defaultCombo.padding[0],animate:!0,style:{stroke:Fn.defaultCombo.style.stroke,fill:Fn.defaultCombo.style.fill,lineWidth:Fn.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Fn.comboLabel.style.fill,fontSize:Fn.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:Object(st.a)({},Fn.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function(v,l){var D=this.getShapeStyle(v);return delete D.height,delete D.width,l.addShape("circle",{attrs:D,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(v){var l=this.options.style,D=v.padding||this.options.padding;Object(r.m)(D)&&(D=D[0]);var Y,ht={stroke:v.color},At=Object(r.A)({},l,ht,v.style),Ut=this.getSize(v);Y=!Object(r.t)(At.r)||isNaN(At.r)?Ut[0]/2||Fn.defaultCombo.style.r:Math.max(At.r,Ut[0]/2)||Ut[0]/2,At.r=Y+D;var Yt=Object(st.a)({x:0,y:0},At);return v.style?v.style.r=Y:v.style={r:Y},Yt},update:function(v,l){var D=this.getSize(v),Y=v.padding||this.options.padding;Object(r.m)(Y)&&(Y=Y[0]);var ht=Object(r.c)(v.style),At=Math.max(ht.r,D[0]/2)||D[0]/2;ht.r=At+Y;var Ut=l.get("sizeCache");Ut&&(Ut.r=ht.r);var Yt={stroke:v.color},qt=l.get("keyShape"),oe=Object(r.A)({},qt.attr(),Yt,ht);v.style?v.style.r=At:v.style={r:At},this.updateShape(v,l,oe,!0)}},"single-combo"),er.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:Fn.defaultCombo.style.stroke,fill:Fn.defaultCombo.style.fill,lineWidth:Fn.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Fn.comboLabel.style.fill,fontSize:Fn.comboLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(st.a)({},Fn.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function(v,l){var D=this.getShapeStyle(v);return l.addShape("rect",{attrs:D,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(v,l){var D=l.position||this.labelPosition,Y=v.style,ht=v.padding||this.options.padding;Object(r.t)(ht)&&(ht=[ht,ht,ht,ht]);var At=l.refX,Ut=l.refY;Object(r.s)(At)&&(At=this.refX),Object(r.s)(Ut)&&(Ut=this.refY);var Yt,qt=Y.width/2+ht[3],oe=Y.height/2+ht[0];switch(D){case"top":Yt={x:0-qt+At,y:0-oe+Ut,textBaseline:"top",textAlign:"left"};break;case"bottom":Yt={x:0,y:oe+Ut,textBaseline:"bottom",textAlign:"center"};break;case"left":Yt={x:0-qt+Ut,y:0,textAlign:"left"};break;case"center":Yt={x:0,y:0,text:v.label,textAlign:"center"};break;default:Yt={x:qt+At,y:0,textAlign:"right"}}return Yt.text=v.label,Yt},getShapeStyle:function(v){var l=this.options.style,D=v.padding||this.options.padding;Object(r.t)(D)&&(D=[D,D,D,D]);var Y,ht,At={stroke:v.color},Ut=Object(r.A)({},l,At,v.style),Yt=this.getSize(v);Y=!Object(r.t)(Ut.width)||isNaN(Ut.width)?Yt[0]||Fn.defaultCombo.style.width:Math.max(Ut.width,Yt[0])||Yt[0],ht=!Object(r.t)(Ut.height)||isNaN(Ut.height)?Yt[1]||Fn.defaultCombo.style.height:Math.max(Ut.height,Yt[1])||Yt[1];var qt=-Y/2-D[3],oe=-ht/2-D[0];Ut.width=Y+D[1]+D[3],Ut.height=ht+D[0]+D[2];var Te=Object(st.a)({x:qt,y:oe},Ut);return v.style?(v.style.width=Y,v.style.height=ht):v.style={width:Y,height:ht},Te},update:function(v,l){var D=this.getSize(v),Y=v.padding||this.options.padding;Object(r.t)(Y)&&(Y=[Y,Y,Y,Y]);var ht=Object(r.c)(v.style),At=Math.max(ht.width,D[0])||D[0],Ut=Math.max(ht.height,D[1])||D[1];ht.width=At+Y[1]+Y[3],ht.height=Ut+Y[0]+Y[2];var Yt=l.get("sizeCache");Yt&&(Yt.width=ht.width,Yt.height=ht.height),ht.x=-At/2-Y[3],ht.y=-Ut/2-Y[0];var qt={stroke:v.color},oe=l.get("keyShape"),Te=Object(r.A)({},oe.attr(),qt,ht);v.style?(v.style.width=At,v.style.height=Ut):v.style={width:At,height:Ut},this.updateShape(v,l,Te,!1)},updateShape:function(v,l,D){var Y=l.get("keyShape");(v.animate===void 0?this.options.animate:v.animate)&&Y.animate?Y.animate(D,{duration:200,easing:"easeLinear"}):Y.attr(Object(st.a)({},D)),this.updateLabel(v,l)}},"single-combo"),er.registerNode("simple-circle",{options:{size:Fn.defaultNode.size,style:{x:0,y:0,stroke:Fn.defaultNode.style.stroke,fill:Fn.defaultNode.style.fill,lineWidth:Fn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Fn.nodeLabel.style.fill,fontSize:Fn.nodeLabel.style.fontSize}},stateStyles:Object(st.a)({},Fn.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",drawShape:function(v,l){var D=this.getShapeStyle(v);return l.addShape("circle",{attrs:D,className:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(v){var l=this.getOptions(v).style,D={stroke:v.color},Y=Object(r.e)({},l,D),ht=this.getSize(v)[0]/2;return Object(st.a)({x:0,y:0,r:ht},Y)},update:function(v,l){var D=this.getSize(v),Y={stroke:v.color,r:D[0]/2},ht=l.get("keyShape"),At=Object(r.e)({},ht.attr(),Y,v.style);this.updateShape(v,l,At,!0)}},"single-node"),er.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:Fn.defaultNode.style.stroke,fill:Fn.defaultNode.style.fill,lineWidth:Fn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Fn.nodeLabel.style.fill,fontSize:Fn.nodeLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(st.a)({},Fn.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(v,l){var D=this.getShapeStyle(v);return l.addShape("rect",{attrs:D,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(v){var l=this.getOptions(v).style,D={stroke:v.color},Y=Object(r.A)({},l,D),ht=this.getSize(v),At=Y.width||ht[0],Ut=Y.height||ht[1];return Object(st.a)({x:-At/2,y:-Ut/2,width:At,height:Ut},Y)},update:function(v,l){l.getContainer();var D=this.getOptions({}).style,Y=this.getSize(v),ht=l.get("keyShape");v.size||(Y[0]=ht.attr("width")||D.width,Y[1]=ht.attr("height")||D.height);var At={stroke:v.color,x:-Y[0]/2,y:-Y[1]/2,width:Y[0],height:Y[1]},Ut=Object(r.A)({},D,ht.attr(),At);Ut=Object(r.A)(Ut,v.style),this.updateShape(v,l,Ut,!1)}},"single-node"),er.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(v,l){var D=this.shapeType,Y=this.getShapeStyle(v);delete Y.fill;var ht=l.addShape(D,{attrs:Y,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(v,ht),ht},drawClip:function(v,l){var D=this.getOptions(v).clipCfg;if(D.show){var Y=D.type,ht=D.x,At=D.y,Ut=D.style;if(Y==="circle"){var Yt=D.r;l.setClip({type:"circle",attrs:Object(st.a)({r:Yt,x:ht,y:At},Ut)})}else if(Y==="rect"){var qt=D.width,oe=D.height,Te=ht-qt/2,Ge=At-oe/2;l.setClip({type:"rect",attrs:Object(st.a)({x:Te,y:Ge,width:qt,height:oe},Ut)})}else if(Y==="ellipse"){var Ue=D.rx,We=D.ry;l.setClip({type:"ellipse",attrs:Object(st.a)({x:ht,y:At,rx:Ue,ry:We},Ut)})}else if(Y==="polygon"){var vn=D.points;l.setClip({type:"polygon",attrs:Object(st.a)({points:vn},Ut)})}else if(Y==="path"){var Tn=D.path;l.setClip({type:"path",attrs:Object(st.a)({path:Tn},Ut)})}}},getShapeStyle:function(v){var l=this.getOptions(v).style,D=this.getSize(v),Y=this.getOptions(v).img,ht=D[0],At=D[1];return l&&(ht=l.width||D[0],At=l.height||D[1]),Object(st.a)({x:-ht/2,y:-At/2,width:ht,height:At,img:Y},l)},updateShapeStyle:function(v,l){var D=l.getContainer(),Y=this.itemType+"-shape",ht=D.find(function(Ut){return Ut.get("className")===Y})||l.getKeyShape(),At=this.getShapeStyle(v);ht&&ht.attr(At)}},"single-node");var mo,ia=er,Bo=Xt.a.transform,Io=Object(st.a)(Object(st.a)(Object(st.a)(Object(st.a)(Object(st.a)({},b),c),S),p),{transform:Bo,mat3:Xt.b});(function(){function kt(v){this.graph=v,this.layoutCfg=v.get("layout")||{},this.layoutType=this.layoutCfg.type,this.initLayout()}kt.prototype.initLayout=function(){},kt.prototype.getLayoutType=function(){return this.layoutCfg.type},kt.prototype.refreshLayout=function(){var v=this.graph;v&&(v.get("animate")?v.positionsAnimate():v.refreshPositions())},kt.prototype.changeLayout=function(v){var l=this.graph,D=this.layoutMethod;this.layoutType=v,this.layoutCfg=l.get("layout")||{},this.layoutCfg.type=v,D&&D.destroy(),this.layout()},kt.prototype.changeData=function(){var v=this.layoutMethod;v&&v.destroy(),this.layout()},kt.prototype.destroyLayout=function(){var v=this.layoutMethod,l=this.graph;v&&v.destroy(),l.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethod=void 0},kt.prototype.setDataFromGraph=function(){for(var v=[],l=[],D=[],Y=this.graph.getNodes(),ht=this.graph.getEdges(),At=this.graph.getCombos(),Ut=Y.length,Yt=0;Yt<Ut;Yt++){var qt=Y[Yt];if(qt.isVisible()){var oe=qt.getModel();v.push(oe)}}var Te=ht.length;for(Yt=0;Yt<Te;Yt++){var Ge=ht[Yt];Ge&&!Ge.destroyed&&Ge.isVisible()&&((oe=Ge.getModel()).isComboEdge||l.push(oe))}var Ue=At.length;for(Yt=0;Yt<Ue;Yt++){var We=At[Yt];!We.destroyed&&We.isVisible()&&(oe=We.getModel(),D.push(oe))}return{nodes:v,edges:l,combos:D}},kt.prototype.relayout=function(v){var l=this.graph,D=this.layoutMethod,Y=this.layoutCfg;if(v){this.data=this.setDataFromGraph();var ht=this.data.nodes;if(!ht)return!1;this.initPositions(Y.center,ht),D.init(this.data)}this.layoutType==="force"&&(D.ticking=!1,D.forceSimulation.stop()),l.emit("beforelayout"),D.execute(v),D.isCustomLayout&&Y.onLayoutEnd&&Y.onLayoutEnd()},kt.prototype.layoutAnimate=function(){},kt.prototype.moveToZero=function(){var v=this.graph.get("data").nodes;if(v[0].x!==void 0&&v[0].x!==null&&!gi(v[0].x)){for(var l=[0,0],D=v.length,Y=0;Y<D;Y++){var ht=v[Y];l[0]+=ht.x,l[1]+=ht.y}for(l[0]/=v.length,l[1]/=v.length,Y=0;Y<D;Y++)(ht=v[Y]).x-=l[0],ht.y-=l[1]}},kt.prototype.initPositions=function(v,l){var D=this.graph;if(!l)return!1;var Y=!0,ht=.85*D.get("width"),At=.85*D.get("height"),Ut=l.length,Yt=Math.ceil(Math.sqrt(Ut)*(ht/At)),qt=ht/(Yt-1),oe=At/(Math.ceil(Ut/Yt)-1);isFinite(qt)&&qt||(qt=0),isFinite(oe)&&qt||(oe=0);for(var Te=v[0]-ht/2,Ge=v[1]-At/2,Ue=l.length,We=0;We<Ue;We++){var vn=l[We];gi(vn.x)&&(Y=!1,vn.x=We%Yt*qt+Te),gi(vn.y)&&(Y=!1,vn.y=Math.floor(We/Yt)*oe+Ge)}return Y},kt.prototype.destroy=function(){var v=this.layoutMethod;this.graph=null,v&&(v.destroy(),v.destroyed=!0),this.destroyed=!0}})(),function(kt){kt.CLICK="click",kt.DBLCLICK="dblclick",kt.MOUSEDOWN="mousedown",kt.MOUDEUP="mouseup",kt.CONTEXTMENU="contextmenu",kt.MOUSEENTER="mouseenter",kt.MOUSEOUT="mouseout",kt.MOUSEOVER="mouseover",kt.MOUSEMOVE="mousemove",kt.MOUSELEAVE="mouseleave",kt.DRAGSTART="dragstart",kt.DRAGEND="dragend",kt.DRAG="drag",kt.DRAGENTER="dragenter",kt.DRAGLEAVE="dragleave",kt.DRAGOVER="dragover",kt.DRAGOUT="dragout",kt.DDROP="drop",kt.KEYUP="keyup",kt.KEYDOWN="keydown",kt.WHEEL="wheel",kt.FOCUS="focus",kt.BLUR="blur",kt.TOUCHSTART="touchstart",kt.TOUCHMOVE="touchmove",kt.TOUCHEND="touchend",kt.NODE_CONTEXTMENU="node:contextmenu",kt.NODE_CLICK="node:click",kt.NODE_DBLCLICK="node:dblclick",kt.NODE_MOUSEDOWN="node:mousedown",kt.NODE_MOUSEUP="node:mouseup",kt.NODE_MOUSEENTER="node:mouseenter",kt.NODE_MOUSELEAVE="node:mouseleave",kt.NODE_MOUSEMOVE="node:mousemove",kt.NODE_MOUSEOUT="node:mouseout",kt.NODE_MOUSEOVER="node:mouseover",kt.NODE_DROP="node:drop",kt.NODE_DRAGOVER="node:dragover",kt.NODE_DRAGENTER="node:dragenter",kt.NODE_DRAGLEAVE="node:dragleave",kt.NODE_DRAGSTART="node:dragstart",kt.NODE_DRAG="node:drag",kt.NODE_DRAGEND="node:dragend",kt.COMBO_CONTEXTMENU="combo:contextmenu",kt.COMBO_CLICK="combo:click",kt.COMBO_DBLCLICK="combo:dblclick",kt.COMBO_MOUSEDOWN="combo:mousedown",kt.COMBO_MOUSEUP="combo:mouseup",kt.COMBO_MOUSEENTER="combo:mouseenter",kt.COMBO_MOUSELEAVE="combo:mouseleave",kt.COMBO_MOUSEMOVE="combo:mousemove",kt.COMBO_MOUSEOUT="combo:mouseout",kt.COMBO_MOUSEOVER="combo:mouseover",kt.COMBO_DROP="combo:drop",kt.COMBO_DRAGOVER="combo:dragover",kt.COMBO_DRAGENTER="combo:dragenter",kt.COMBO_DRAGLEAVE="combo:dragleave",kt.COMBO_DRAGSTART="combo:dragstart",kt.COMBO_DRAG="combo:drag",kt.COMBO_DRAGEND="combo:dragend",kt.EDGE_CONTEXTMENU="edge:contextmenu",kt.EDGE_CLICK="edge:click",kt.EDGE_DBLCLICK="edge:dblclick",kt.EDGE_MOUSEDOWN="edge:mousedown",kt.EDGE_MOUSEUP="edge:mouseup",kt.EDGE_MOUSEENTER="edge:mouseenter",kt.EDGE_MOUSELEAVE="edge:mouseleave",kt.EDGE_MOUSEMOVE="edge:mousemove",kt.EDGE_MOUSEOUT="edge:mouseout",kt.EDGE_MOUSEOVER="edge:mouseover",kt.EDGE_DROP="edge:drop",kt.EDGE_DRAGOVER="edge:dragover",kt.EDGE_DRAGENTER="edge:dragenter",kt.EDGE_DRAGLEAVE="edge:dragleave",kt.CANVAS_CONTEXTMENU="canvas:contextmenu",kt.CANVAS_CLICK="canvas:click",kt.CANVAS_DBLCLICK="canvas:dblclick",kt.CANVAS_MOUSEDOWN="canvas:mousedown",kt.CANVAS_MOUSEUP="canvas:mouseup",kt.CANVAS_MOUSEENTER="canvas:mouseenter",kt.CANVAS_MOUSELEAVE="canvas:mouseleave",kt.CANVAS_MOUSEMOVE="canvas:mousemove",kt.CANVAS_MOUSEOUT="canvas:mouseout",kt.CANVAS_MOUSEOVER="canvas:mouseover",kt.CANVAS_DROP="canvas:drop",kt.CANVAS_DRAGENTER="canvas:dragenter",kt.CANVAS_DRAGLEAVE="canvas:dragleave",kt.CANVAS_DRAGSTART="canvas:dragstart",kt.CANVAS_DRAG="canvas:drag",kt.CANVAS_DRAGEND="canvas:dragend",kt.BEFORERENDER="beforerender",kt.AFTERRENDER="afterrender",kt.BEFOREADDITEM="beforeadditem",kt.AFTERADDITEM="afteradditem",kt.BEFOREREMOVEITEM="beforeremoveitem",kt.AFTERREMOVEITEM="afterremoveitem",kt.BEFOREUPDATEITEM="beforeupdateitem",kt.AFTERUPDATEITEM="afterupdateitem",kt.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",kt.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",kt.BEFOREITEMSTATECHANGE="beforeitemstatechange",kt.AFTERITEMSTATECHANGE="afteritemstatechange",kt.BEFOREITEMREFRESH="beforeitemrefresh",kt.AFTERITEMREFRESH="afteritemrefresh",kt.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",kt.AFTERITEMSTATESCLEAR="afteritemstatesclear",kt.BEFOREMODECHANGE="beforemodechange",kt.AFTERMODECHANGE="aftermodechange",kt.BEFORELAYOUT="beforelayout",kt.AFTERLAYOUT="afterlayout",kt.BEFORECREATEEDGE="beforecreateedge",kt.AFTERCREATEEDGE="aftercreateedge",kt.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",kt.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",kt.BEFOREGRAPHREFRESH="beforegraphrefresh",kt.AFTERGRAPHREFRESH="aftergraphrefresh",kt.BEFOREANIMATE="beforeanimate",kt.AFTERANIMATE="afteranimate",kt.BEFOREPAINT="beforepaint",kt.AFTERPAINT="afterpaint",kt.BEFORECOLLAPSEEXPANDCOMBO="beforecollapseexpandcombo",kt.AFTERCOLLAPSEEXPANDCOMBO="aftercollapseexpandcombo",kt.GRAPHSTATECHANGE="graphstatechange",kt.AFTERACTIVATERELATIONS="afteractivaterelations",kt.NODESELECTCHANGE="nodeselectchange",kt.TOOLTIPCHANGE="tooltipchange",kt.WHEELZOOM="wheelzoom",kt.VIEWPORTCHANGE="viewportchange",kt.DRAGNODEEND="dragnodeend",kt.STACKCHANGE="stackchange"}(mo||(mo={})),ia.registerNode,ia.registerEdge,ia.registerCombo,Cn.registerBehavior,ia.registerNode,ia.registerEdge,ia.registerCombo,Cn.registerBehavior;var Qa=function(){var kt=function(l,D){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,ht){Y.__proto__=ht}||function(Y,ht){for(var At in ht)Object.prototype.hasOwnProperty.call(ht,At)&&(Y[At]=ht[At])})(l,D)};return function(v,l){function D(){this.constructor=v}kt(v,l),v.prototype=l===null?Object.create(l):(D.prototype=l.prototype,new D)}}(),yo=Io.applyMatrix,Co=function(kt){function v(){return kt!==null&&kt.apply(this,arguments)||this}return Qa(v,kt),v.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},v.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},v.prototype.disableRefresh=function(){this.set("refresh",!1)},v.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},v.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},v.prototype.initViewport=function(){var l=this,D=this._cfgs,Y=D.graph;if(!this.destroyed){var ht=this.get("container");Object(r.x)(ht)&&(ht=document.getElementById(ht));var At=Object(m.b)("<div class="+D.viewportClassName+`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff'>
      </div>`),Ut=0,Yt=0,qt=!1,oe=0,Te=0,Ge=0,Ue=0,We=0,vn=0;ht.addEventListener("mousedown",function(Tn){if(D.refresh=!1,Tn.target===At){var Ln=At.style;Ge=parseInt(Ln.width,10),Ue=parseInt(Ln.height,10);var Un=l.get("width"),Hn=l.get("height");Ge>Un||Ue>Hn||(vn=Y.getZoom(),We=l.get("ratio"),qt=!0,Ut=Tn.clientX,Yt=Tn.clientY)}},!1),ht.addEventListener("mousemove",function(Tn){if(qt&&!Object(r.s)(Tn.clientX)&&!Object(r.s)(Tn.clientY)){var Ln=l.get("width"),Un=l.get("height"),Hn=At.style;oe=parseInt(Hn.left,10),Te=parseInt(Hn.top,10),Ge=parseInt(Hn.width,10),Ue=parseInt(Hn.height,10);var xr=Ut-Tn.clientX,Or=Yt-Tn.clientY;oe-xr<0?xr=oe:oe-xr+Ge>=Ln&&(xr=0),Te-Or<0?Or=Te:Te-Or+Ue>=Un&&(Or=0),oe-=xr,Te-=Or,Object(m.c)(At,{left:oe+"px",top:Te+"px"}),Y.translate(xr*vn/We,Or*vn/We),Ut=Tn.clientX,Yt=Tn.clientY}},!1),ht.addEventListener("mouseleave",function(){qt=!1,D.refresh=!0},!1),ht.addEventListener("mouseup",function(){qt=!1,D.refresh=!0},!1),this.set("viewport",At),ht.appendChild(At)}},v.prototype.updateViewport=function(){if(!this.destroyed){var l=this.get("ratio"),D=this.get("width"),Y=this.get("height"),ht=this.get("graph"),At=ht.get("width"),Ut=At/ht.get("height"),Yt=ht.getGroup(),qt=Yt.getCanvasBBox(),oe=[(qt.minX+qt.maxX)/2,(qt.minY+qt.maxY)/2],Te=[qt.maxX-qt.minX,qt.maxY-qt.minY],Ge={centerX:oe[0],centerY:oe[1],width:0,height:0,minX:0,minY:0};qt[0]/qt[1]>Ut?(Ge.width=Te[0],Ge.height=Ge.width/Ut):(Ge.height=Te[1],Ge.width=Ge.height*Ut),Ge.minX=oe[0]-Ge.width/2,Ge.minY=oe[1]-Ge.height/2;var Ue=Yt.getMatrix();Ue||(Ue=[1,0,0,0,1,0,0,0,1]);var We=X.a.invert([1,0,0,0,1,0,0,0,1],Ue),vn=yo({x:Ge.minX,y:Ge.minY},We),Tn=ht.getCanvasByPoint(vn.x,vn.y),Ln=this.get("viewport");Ln||this.initViewport();var Un=At/Ge.width,Hn=Un*D,xr=Un*Y,Or=D*-Tn.x/Ge.width,Rr=Y*-Tn.y/Ge.height,yi=Or+Hn,Xi=Rr+xr;Or<0&&(Hn+=Or,Or=0),yi>D&&(Hn-=yi-D),Rr<0&&(xr+=Rr,Rr=0),Xi>Y&&(xr-=Xi-Y),this.set("ratio",l);var Zr=Or+"px",ki=Rr+"px";Object(m.c)(Ln,{left:Zr,top:ki,width:Hn+"px",height:xr+"px"})}},v.prototype.init=function(){this.initContainer()},v.prototype.initContainer=function(){var l=this.get("graph"),D=l.get("width"),Y=l.get("height")/D,ht=this.get("className"),At=this.get("container"),Ut=this.get("width"),Yt=this.get("height");Ut||Yt||(Ut=200),Ut?(Yt=Y*Ut,this.set("height",Yt)):(Ut=1/Y*Yt,this.set("width",Ut));var qt=Object(m.b)("<div class='"+ht+"' style='width: "+Ut+"px; height: "+Yt+"px; overflow: hidden; position: relative;'></div>");Object(r.x)(At)&&(At=document.getElementById(At)),At?At.appendChild(qt):l.get("container").appendChild(qt),this.set("container",qt);var oe=Object(m.b)('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');qt.appendChild(oe);var Te=Object(m.b)('<span style="display: table-cell; vertical-align: middle; "></span>');oe.appendChild(Te),this.set("containerDOM",oe),this.set("containerSpan",Te);var Ge=Object(m.b)('<img alt="" src="'+this.get("graphImg")+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');this.set("imgDOM",Ge),this.updateImgSize(),Te.appendChild(Ge),this.updateCanvas()},v.prototype.updateImgSize=function(){var l=this.get("imgDOM"),D=this.get("width"),Y=this.get("height");l.onload=function(){var ht=function(At,Ut){var Yt,qt;if(At.naturalWidth)Yt=At.naturalWidth,qt=At.naturalHeight;else{var oe=new Image;oe.src=At.src,oe.onload=function(){Ut&&Ut(oe.width,oe.height)}}return[Yt,qt]}(l);ht[0]>ht[1]?l.width=D:l.height=Y}},v.prototype.updateCanvas=function(){if(this.get("refresh")){var l=this.get("graph");if(!l.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var D=this.get("width")/l.get("canvas").getCanvasBBox().width;this.set("ratio",D),this.updateViewport()}}},v.prototype.getViewport=function(){return this.get("viewport")},v.prototype.getContainer=function(){return this.get("container")},v.prototype.updateGraphImg=function(l){this.get("imgDOM").remove(),this.set("graphImg",l);var D=Object(m.b)('<img alt="" src="'+l+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');this.set("imgDOM",D),D.src=l,this.updateImgSize(),this.get("containerSpan").appendChild(D),this.updateCanvas()},v.prototype.destroy=function(){var l=this.get("container");l.parentNode.removeChild(l)},v}(s),Do=function(){var kt=function(l,D){return(kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,ht){Y.__proto__=ht}||function(Y,ht){for(var At in ht)Object.prototype.hasOwnProperty.call(ht,At)&&(Y[At]=ht[At])})(l,D)};return function(v,l){function D(){this.constructor=v}kt(v,l),v.prototype=l===null?Object.create(l):(D.prototype=l.prototype,new D)}}(),Da=function(){return(Da=Object.assign||function(v){for(var l,D=1,Y=arguments.length;D<Y;D++)for(var ht in l=arguments[D])Object.prototype.hasOwnProperty.call(l,ht)&&(v[ht]=l[ht]);return v}).apply(this,arguments)},_o=Io.distance,Ko={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},is={PluginBase:s,Menu:j,Grid:E,Minimap:dt,Bundling:J,ToolBar:k,Tooltip:O,Fisheye:R,TimeBar:Ce,ImageMinimap:Co,EdgeFilterLens:function(kt){function v(){return kt!==null&&kt.apply(this,arguments)||this}return Do(v,kt),v.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:Object(r.c)(Ko),showLabel:"edge",scaleRBy:"wheel"}},v.prototype.getEvents=function(){var l;switch(this.get("trigger")){case"click":l={click:"filter"};break;case"drag":l={click:"createDelegate"};break;default:l={mousemove:"filter"}}return l},v.prototype.init=function(){var l=this.get("showLabel"),D=l==="node"||l==="both",Y=l==="edge"||l==="both";this.set("showNodeLabel",D),this.set("showEdgeLabel",Y),this.get("shouldShow")||this.set("shouldShow",function(){return!0})},v.prototype.createDelegate=function(l){var D=this,Y=D.get("delegate");Y&&!Y.destroyed||(D.filter(l),(Y=D.get("delegate")).on("dragstart",function(ht){}),Y.on("drag",function(ht){D.filter(ht)}),this.get("scaleRBy")==="wheel"&&Y.on("mousewheel",function(ht){D.scaleRByWheel(ht)}))},v.prototype.scaleRByWheel=function(l){if(l&&l.originalEvent){l.preventDefault&&l.preventDefault();var D,Y=this.get("graph"),ht=this.get("delegate");(ht?{x:ht.attr("x"),y:ht.attr("y")}:void 0)||Y.getPointByClient(l.clientX,l.clientY),D=l.originalEvent.wheelDelta<0?.95:1/.95;var At=this.get("maxR"),Ut=this.get("minR"),Yt=this.get("r");(Yt>(At||Y.get("height"))&&D>1||Yt<(Ut||.05*Y.get("height"))&&D<1)&&(D=1),Yt*=D,this.set("r",Yt),this.filter(l)}},v.prototype.filter=function(l){var D=this.get("graph"),Y=D.getNodes(),ht={},At=this.get("r"),Ut=this.get("type"),Yt={x:l.x,y:l.y};this.updateDelegate(Yt,At);var qt=this.get("shouldShow"),oe=this.get("vShapes");oe&&oe.forEach(function(Tn){Tn.remove(),Tn.destroy()}),oe=[],Y.forEach(function(Tn){var Ln=Tn.getModel(),Un=Ln.x,Hn=Ln.y;_o({x:Un,y:Hn},Yt)<At&&(ht[Ln.id]=Tn)});var Te=D.getEdges(),Ge=[];Te.forEach(function(Tn){var Ln=Tn.getModel(),Un=Ln.source,Hn=Ln.target;qt(Ln)&&(Ut==="only-source"||Ut==="one"?ht[Un]&&!ht[Hn]&&Ge.push(Tn):Ut==="only-target"||Ut==="one"?ht[Hn]&&!ht[Un]&&Ge.push(Tn):Ut==="both"&&ht[Un]&&ht[Hn]&&Ge.push(Tn))});var Ue=this.get("showNodeLabel"),We=this.get("showEdgelabel"),vn=D.get("group");Ge.forEach(function(Tn){Tn.get("group").get("children").forEach(function(Ln){var Un=Ln.get("type"),Hn=vn.addShape(Un,{attrs:Ln.attr()});oe.push(Hn),Ue&&Un==="text"&&Hn.set("visible",!0)})}),Object.keys(ht).forEach(function(Tn){var Ln=ht[Tn].get("group").clone();if(vn.add(Ln),oe.push(Ln),We)for(var Un=Ln.get("children"),Hn=0;Hn<Un.length;Hn++){var xr=Un[Hn];xr.get("type")==="text"&&xr.set("visible",!0)}}),this.set("vShapes",oe)},v.prototype.updateParams=function(l){var D=l.r,Y=l.trigger,ht=l.minR,At=l.maxR,Ut=l.scaleRBy,Yt=l.showLabel,qt=l.shouldShow;if(isNaN(l.r)||this.set("r",D),isNaN(At)||this.set("maxR",At),isNaN(ht)||this.set("minR",ht),Y!=="mousemove"&&Y!=="click"||this.set("trigger",Y),Ut==="wheel"||Ut==="unset"){this.set("scaleRBy",Ut),this.get("delegate").remove(),this.get("delegate").destroy();var oe=this.get("dPercentText");oe&&(oe.remove(),oe.destroy())}Yt!=="node"&&Yt!=="both"||this.set("showNodeLabel",!0),Yt!=="edge"&&Yt!=="both"||this.set("showEdgeLabel",!0),qt&&this.set("shouldShow",qt)},v.prototype.updateDelegate=function(l,D){var Y=this,ht=Y.get("graph"),At=Y.get("delegate");if(!At||At.destroyed){var Ut=ht.get("group"),Yt=Y.get("delegateStyle")||Ko;At=Ut.addShape("circle",{attrs:Da({r:D,x:l.x,y:l.y},Yt),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&At.on("mousewheel",function(qt){Y.scaleRByWheel(qt)})}else At.attr({x:l.x,y:l.y,r:D});Y.set("delegate",At)},v.prototype.clear=function(){var l=this.get("vShapes");l&&l.forEach(function(Y){Y.remove(),Y.destroy()}),l=[],this.set("vShapes",l);var D=this.get("delegate");D&&!D.destroyed&&(D.remove(),D.destroy())},v.prototype.destroy=function(){this.clear()},v}(s)};y.a=is},function(i,y,t){"use strict";t.d(y,"b",function(){return u}),t.d(y,"c",function(){return p}),t.d(y,"a",function(){return b});var n=t(22);function u(c,S){var I=c.cfg.el,m=c.attr(),r={dx:m.shadowOffsetX,dy:m.shadowOffsetY,blur:m.shadowBlur,color:m.shadowColor};if(r.dx||r.dy||r.blur||r.color){var s=S.find("filter",r);s||(s=S.addShadow(r)),I.setAttribute("filter","url(#"+s+")")}else I.removeAttribute("filter")}function p(c){var S=c.attr().matrix;if(S){for(var I=c.cfg.el,m=[],r=0;r<9;r+=3)m.push(S[r]+","+S[r+1]);(m=m.join(",")).indexOf("NaN")===-1?I.setAttribute("transform","matrix("+m+")"):console.warn("invalid matrix:",S)}}function b(c,S){var I=c.getClip(),m=c.get("el");if(I){if(I&&!m.hasAttribute("clip-path")){Object(n.a)(I),I.createPath(S);var r=S.addClip(I);m.setAttribute("clip-path","url(#"+r+")")}}else m.removeAttribute("clip-path")}},function(i,y,t){"use strict";var n=t(24),u=t(46).Graph;function p(c,S,I,m){var r;do r=n.uniqueId(m);while(c.hasNode(r));return I.dummy=S,c.setNode(r,I),r}function b(c){return n.max(n.map(c.nodes(),function(S){var I=c.node(S).rank;if(!n.isUndefined(I))return I}))}i.exports={addDummyNode:p,simplify:function(S){var I=new u().setGraph(S.graph());return n.forEach(S.nodes(),function(m){I.setNode(m,S.node(m))}),n.forEach(S.edges(),function(m){var r=I.edge(m.v,m.w)||{weight:0,minlen:1},s=S.edge(m);I.setEdge(m.v,m.w,{weight:r.weight+s.weight,minlen:Math.max(r.minlen,s.minlen)})}),I},asNonCompoundGraph:function(S){var I=new u({multigraph:S.isMultigraph()}).setGraph(S.graph());return n.forEach(S.nodes(),function(m){S.children(m).length||I.setNode(m,S.node(m))}),n.forEach(S.edges(),function(m){I.setEdge(m,S.edge(m))}),I},successorWeights:function(S){var I=n.map(S.nodes(),function(m){var r={};return n.forEach(S.outEdges(m),function(s){r[s.w]=(r[s.w]||0)+S.edge(s).weight}),r});return n.zipObject(S.nodes(),I)},predecessorWeights:function(S){var I=n.map(S.nodes(),function(m){var r={};return n.forEach(S.inEdges(m),function(s){r[s.v]=(r[s.v]||0)+S.edge(s).weight}),r});return n.zipObject(S.nodes(),I)},intersectRect:function(S,I){var m,r,s=S.x,d=S.y,C=I.x-s,E=I.y-d,A=S.width/2,f=S.height/2;if(!C&&!E)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(E)*A>Math.abs(C)*f?(E<0&&(f=-f),m=f*C/E,r=f):(C<0&&(A=-A),m=A,r=A*E/C),{x:s+m,y:d+r}},buildLayerMatrix:function(S){var I=n.map(n.range(b(S)+1),function(){return[]});return n.forEach(S.nodes(),function(m){var r=S.node(m),s=r.rank;n.isUndefined(s)||(I[s][r.order]=m)}),I},normalizeRanks:function(S){var I=n.min(n.map(S.nodes(),function(m){return S.node(m).rank}));n.forEach(S.nodes(),function(m){var r=S.node(m);n.has(r,"rank")&&(r.rank-=I)})},removeEmptyRanks:function(S){var I=n.min(n.map(S.nodes(),function(d){return S.node(d).rank})),m=[];n.forEach(S.nodes(),function(d){var C=S.node(d).rank-I;m[C]||(m[C]=[]),m[C].push(d)});var r=0,s=S.graph().nodeRankFactor;n.forEach(m,function(d,C){n.isUndefined(d)&&C%s!=0?--r:r&&n.forEach(d,function(E){S.node(E).rank+=r})})},addBorderNode:function(S,I,m,r){var s={width:0,height:0};return arguments.length>=4&&(s.rank=m,s.order=r),p(S,"border",s,I)},maxRank:b,partition:function(S,I){var m={lhs:[],rhs:[]};return n.forEach(S,function(r){I(r)?m.lhs.push(r):m.rhs.push(r)}),m},time:function(S,I){var m=n.now();try{return I()}finally{console.log(S+" time: "+(n.now()-m)+"ms")}},notime:function(S,I){return I()}}},function(i,y,t){"use strict";var n={};t.r(n),t.d(n,"proccessToFunc",function(){return I}),t.d(n,"buildTextureData",function(){return m}),t.d(n,"buildTextureDataWithOneEdgeAttr",function(){return r}),t.d(n,"buildTextureDataWithTwoEdgeAttr",function(){return s}),t.d(n,"attributesToTextureData",function(){return d}),t.d(n,"arrayToTextureData",function(){return C}),t.d(n,"radialLayout",function(){return E});var u=t(1),p=t(123),b=t(5),c=t(0),S=b.n.traverseTree,I=function(j,P){return j?Object(c.t)(j)?function(W){return j}:j:function(W){return P||1}},m=function(j,P){var W=[],X=[],$={},ft=0;for(ft=0;ft<j.length;ft++){var Z=j[ft];$[Z.id]=ft,W.push(Z.x),W.push(Z.y),W.push(0),W.push(0),X.push([])}for(ft=0;ft<P.length;ft++){var lt=P[ft];X[$[lt.source]].push($[lt.target]),X[$[lt.target]].push($[lt.source])}var pt=0;for(ft=0;ft<j.length;ft++){var gt=W.length,ut=X[ft],Bt=ut.length;W[4*ft+2]=gt,W[4*ft+3]=ut.length,pt=Math.max(pt,ut.length);for(var Lt=0;Lt<Bt;++Lt){var St=ut[Lt];W.push(+St)}}for(;W.length%4!=0;)W.push(0);return{array:new Float32Array(W),maxEdgePerVetex:pt}},r=function(j,P,W){var X=[],$=[],ft={},Z=0;for(Z=0;Z<j.length;Z++){var lt=j[Z];ft[lt.id]=Z,X.push(lt.x),X.push(lt.y),X.push(0),X.push(0),$.push([])}for(Z=0;Z<P.length;Z++){var pt=P[Z];$[ft[pt.source]].push(ft[pt.target]),$[ft[pt.source]].push(W(pt)),$[ft[pt.target]].push(ft[pt.source]),$[ft[pt.target]].push(W(pt))}var gt=0;for(Z=0;Z<j.length;Z++){var ut=X.length,Bt=$[Z],Lt=Bt.length;X[4*Z+2]=ut,X[4*Z+3]=Lt/2,gt=Math.max(gt,Lt/2);for(var St=0;St<Lt;++St){var K=Bt[St];X.push(+K)}}for(;X.length%4!=0;)X.push(0);return{array:new Float32Array(X),maxEdgePerVetex:gt}},s=function(j,P,W,X){var $=[],ft=[],Z={},lt=0;for(lt=0;lt<j.length;lt++){var pt=j[lt];Z[pt.id]=lt,$.push(pt.x),$.push(pt.y),$.push(0),$.push(0),ft.push([])}for(lt=0;lt<P.length;lt++){var gt=P[lt];ft[Z[gt.source]].push(Z[gt.target]),ft[Z[gt.source]].push(W(gt)),ft[Z[gt.source]].push(X(gt)),ft[Z[gt.source]].push(0),ft[Z[gt.target]].push(Z[gt.source]),ft[Z[gt.target]].push(W(gt)),ft[Z[gt.target]].push(X(gt)),ft[Z[gt.target]].push(0)}var ut=0;for(lt=0;lt<j.length;lt++){var Bt=$.length,Lt=ft[lt],St=Lt.length;$[4*lt+2]=Bt+1048576*St/4,$[4*lt+3]=0,ut=Math.max(ut,St/4);for(var K=0;K<St;++K){var dt=Lt[K];$.push(+dt)}}for(;$.length%4!=0;)$.push(0);return{array:new Float32Array($),maxEdgePerVetex:ut}},d=function(j,P){var W=[],X=j.length,$={};return P.forEach(function(ft){j.forEach(function(Z,lt){if($[ft[Z]]===void 0&&($[ft[Z]]=Object.keys($).length),W.push($[ft[Z]]),lt===X-1)for(;W.length%4!=0;)W.push(0)})}),{array:new Float32Array(W),count:Object.keys($).length}},C=function(j){for(var P=[],W=j.length,X=j[0].length,$=function(lt){j.forEach(function(pt,gt){if(P.push(pt[lt]),gt===W-1)for(;P.length%4!=0;)P.push(0)})},ft=0;ft<X;ft++)$(ft);return new Float32Array(P)},E=function(j,P){var W={x:1/0,y:1/0},X={x:-1/0,y:-1/0},$="x",ft="y";P&&["V","TB","BT"].indexOf(P)>=0&&(ft="x",$="y");var Z=0;S(j,function(gt){return Z++,gt.x>X.x&&(X.x=gt.x),gt.x<W.x&&(W.x=gt.x),gt.y>X.y&&(X.y=gt.y),gt.y<W.y&&(W.y=gt.y),!0});var lt=2*Math.PI/Z,pt=X[ft]-W[ft];return pt===0||S(j,function(gt){var ut=(gt[ft]-W[ft])/pt*(2*Math.PI-lt)+lt,Bt=Math.abs($==="x"?gt.x-j.x:gt.y-j.y);return gt.x=Bt*Math.cos(ut),gt.y=Bt*Math.sin(ut),!0}),j},A=t(121),f=Object(u.a)(Object(u.a)(Object(u.a)(Object(u.a)({},b.n),p),n),A);y.a=f},function(i,y,t){"use strict";function n(b,c){var S=[],I=b[0],m=b[1],r=b[2],s=b[3],d=b[4],C=b[5],E=b[6],A=b[7],f=b[8],x=c[0],j=c[1],P=c[2],W=c[3],X=c[4],$=c[5],ft=c[6],Z=c[7],lt=c[8];return S[0]=x*I+j*s+P*E,S[1]=x*m+j*d+P*A,S[2]=x*r+j*C+P*f,S[3]=W*I+X*s+$*E,S[4]=W*m+X*d+$*A,S[5]=W*r+X*C+$*f,S[6]=ft*I+Z*s+lt*E,S[7]=ft*m+Z*d+lt*A,S[8]=ft*r+Z*C+lt*f,S}function u(b,c){var S=[],I=c[0],m=c[1];return S[0]=b[0]*I+b[3]*m+b[6],S[1]=b[1]*I+b[4]*m+b[7],S}function p(b){var c=[],S=b[0],I=b[1],m=b[2],r=b[3],s=b[4],d=b[5],C=b[6],E=b[7],A=b[8],f=A*s-d*E,x=-A*r+d*C,j=E*r-s*C,P=S*f+I*x+m*j;return P?(P=1/P,c[0]=f*P,c[1]=(-A*I+m*E)*P,c[2]=(d*I-m*s)*P,c[3]=x*P,c[4]=(A*S-m*C)*P,c[5]=(-d*S+m*r)*P,c[6]=j*P,c[7]=(-E*S+I*C)*P,c[8]=(s*S-I*r)*P,c):null}t.d(y,"b",function(){return n}),t.d(y,"c",function(){return u}),t.d(y,"a",function(){return p})},function(i,y,t){"use strict";t.r(y),t.d(y,"create",function(){return u}),t.d(y,"clone",function(){return p}),t.d(y,"length",function(){return b}),t.d(y,"fromValues",function(){return c}),t.d(y,"copy",function(){return S}),t.d(y,"set",function(){return I}),t.d(y,"add",function(){return m}),t.d(y,"subtract",function(){return r}),t.d(y,"multiply",function(){return s}),t.d(y,"divide",function(){return d}),t.d(y,"ceil",function(){return C}),t.d(y,"floor",function(){return E}),t.d(y,"min",function(){return A}),t.d(y,"max",function(){return f}),t.d(y,"round",function(){return x}),t.d(y,"scale",function(){return j}),t.d(y,"scaleAndAdd",function(){return P}),t.d(y,"distance",function(){return W}),t.d(y,"squaredDistance",function(){return X}),t.d(y,"squaredLength",function(){return $}),t.d(y,"negate",function(){return ft}),t.d(y,"inverse",function(){return Z}),t.d(y,"normalize",function(){return lt}),t.d(y,"dot",function(){return pt}),t.d(y,"cross",function(){return gt}),t.d(y,"lerp",function(){return ut}),t.d(y,"hermite",function(){return Bt}),t.d(y,"bezier",function(){return Lt}),t.d(y,"random",function(){return St}),t.d(y,"transformMat4",function(){return K}),t.d(y,"transformMat3",function(){return dt}),t.d(y,"transformQuat",function(){return mt}),t.d(y,"rotateX",function(){return bt}),t.d(y,"rotateY",function(){return wt}),t.d(y,"rotateZ",function(){return J}),t.d(y,"angle",function(){return ct}),t.d(y,"zero",function(){return it}),t.d(y,"str",function(){return _}),t.d(y,"exactEquals",function(){return R}),t.d(y,"equals",function(){return Q}),t.d(y,"sub",function(){return g}),t.d(y,"mul",function(){return O}),t.d(y,"div",function(){return F}),t.d(y,"dist",function(){return V}),t.d(y,"sqrDist",function(){return rt}),t.d(y,"len",function(){return ot}),t.d(y,"sqrLen",function(){return st}),t.d(y,"forEach",function(){return Mt});var n=t(11);function u(){var yt=new n.a(3);return n.a!=Float32Array&&(yt[0]=0,yt[1]=0,yt[2]=0),yt}function p(yt){var xt=new n.a(3);return xt[0]=yt[0],xt[1]=yt[1],xt[2]=yt[2],xt}function b(yt){var xt=yt[0],Ot=yt[1],jt=yt[2];return Math.hypot(xt,Ot,jt)}function c(yt,xt,Ot){var jt=new n.a(3);return jt[0]=yt,jt[1]=xt,jt[2]=Ot,jt}function S(yt,xt){return yt[0]=xt[0],yt[1]=xt[1],yt[2]=xt[2],yt}function I(yt,xt,Ot,jt){return yt[0]=xt,yt[1]=Ot,yt[2]=jt,yt}function m(yt,xt,Ot){return yt[0]=xt[0]+Ot[0],yt[1]=xt[1]+Ot[1],yt[2]=xt[2]+Ot[2],yt}function r(yt,xt,Ot){return yt[0]=xt[0]-Ot[0],yt[1]=xt[1]-Ot[1],yt[2]=xt[2]-Ot[2],yt}function s(yt,xt,Ot){return yt[0]=xt[0]*Ot[0],yt[1]=xt[1]*Ot[1],yt[2]=xt[2]*Ot[2],yt}function d(yt,xt,Ot){return yt[0]=xt[0]/Ot[0],yt[1]=xt[1]/Ot[1],yt[2]=xt[2]/Ot[2],yt}function C(yt,xt){return yt[0]=Math.ceil(xt[0]),yt[1]=Math.ceil(xt[1]),yt[2]=Math.ceil(xt[2]),yt}function E(yt,xt){return yt[0]=Math.floor(xt[0]),yt[1]=Math.floor(xt[1]),yt[2]=Math.floor(xt[2]),yt}function A(yt,xt,Ot){return yt[0]=Math.min(xt[0],Ot[0]),yt[1]=Math.min(xt[1],Ot[1]),yt[2]=Math.min(xt[2],Ot[2]),yt}function f(yt,xt,Ot){return yt[0]=Math.max(xt[0],Ot[0]),yt[1]=Math.max(xt[1],Ot[1]),yt[2]=Math.max(xt[2],Ot[2]),yt}function x(yt,xt){return yt[0]=Math.round(xt[0]),yt[1]=Math.round(xt[1]),yt[2]=Math.round(xt[2]),yt}function j(yt,xt,Ot){return yt[0]=xt[0]*Ot,yt[1]=xt[1]*Ot,yt[2]=xt[2]*Ot,yt}function P(yt,xt,Ot,jt){return yt[0]=xt[0]+Ot[0]*jt,yt[1]=xt[1]+Ot[1]*jt,yt[2]=xt[2]+Ot[2]*jt,yt}function W(yt,xt){var Ot=xt[0]-yt[0],jt=xt[1]-yt[1],Dt=xt[2]-yt[2];return Math.hypot(Ot,jt,Dt)}function X(yt,xt){var Ot=xt[0]-yt[0],jt=xt[1]-yt[1],Dt=xt[2]-yt[2];return Ot*Ot+jt*jt+Dt*Dt}function $(yt){var xt=yt[0],Ot=yt[1],jt=yt[2];return xt*xt+Ot*Ot+jt*jt}function ft(yt,xt){return yt[0]=-xt[0],yt[1]=-xt[1],yt[2]=-xt[2],yt}function Z(yt,xt){return yt[0]=1/xt[0],yt[1]=1/xt[1],yt[2]=1/xt[2],yt}function lt(yt,xt){var Ot=xt[0],jt=xt[1],Dt=xt[2],zt=Ot*Ot+jt*jt+Dt*Dt;return zt>0&&(zt=1/Math.sqrt(zt)),yt[0]=xt[0]*zt,yt[1]=xt[1]*zt,yt[2]=xt[2]*zt,yt}function pt(yt,xt){return yt[0]*xt[0]+yt[1]*xt[1]+yt[2]*xt[2]}function gt(yt,xt,Ot){var jt=xt[0],Dt=xt[1],zt=xt[2],Tt=Ot[0],Wt=Ot[1],Ht=Ot[2];return yt[0]=Dt*Ht-zt*Wt,yt[1]=zt*Tt-jt*Ht,yt[2]=jt*Wt-Dt*Tt,yt}function ut(yt,xt,Ot,jt){var Dt=xt[0],zt=xt[1],Tt=xt[2];return yt[0]=Dt+jt*(Ot[0]-Dt),yt[1]=zt+jt*(Ot[1]-zt),yt[2]=Tt+jt*(Ot[2]-Tt),yt}function Bt(yt,xt,Ot,jt,Dt,zt){var Tt=zt*zt,Wt=Tt*(2*zt-3)+1,Ht=Tt*(zt-2)+zt,re=Tt*(zt-1),pe=Tt*(3-2*zt);return yt[0]=xt[0]*Wt+Ot[0]*Ht+jt[0]*re+Dt[0]*pe,yt[1]=xt[1]*Wt+Ot[1]*Ht+jt[1]*re+Dt[1]*pe,yt[2]=xt[2]*Wt+Ot[2]*Ht+jt[2]*re+Dt[2]*pe,yt}function Lt(yt,xt,Ot,jt,Dt,zt){var Tt=1-zt,Wt=Tt*Tt,Ht=zt*zt,re=Wt*Tt,pe=3*zt*Wt,me=3*Ht*Tt,Se=Ht*zt;return yt[0]=xt[0]*re+Ot[0]*pe+jt[0]*me+Dt[0]*Se,yt[1]=xt[1]*re+Ot[1]*pe+jt[1]*me+Dt[1]*Se,yt[2]=xt[2]*re+Ot[2]*pe+jt[2]*me+Dt[2]*Se,yt}function St(yt,xt){xt=xt||1;var Ot=2*n.c()*Math.PI,jt=2*n.c()-1,Dt=Math.sqrt(1-jt*jt)*xt;return yt[0]=Math.cos(Ot)*Dt,yt[1]=Math.sin(Ot)*Dt,yt[2]=jt*xt,yt}function K(yt,xt,Ot){var jt=xt[0],Dt=xt[1],zt=xt[2],Tt=Ot[3]*jt+Ot[7]*Dt+Ot[11]*zt+Ot[15];return Tt=Tt||1,yt[0]=(Ot[0]*jt+Ot[4]*Dt+Ot[8]*zt+Ot[12])/Tt,yt[1]=(Ot[1]*jt+Ot[5]*Dt+Ot[9]*zt+Ot[13])/Tt,yt[2]=(Ot[2]*jt+Ot[6]*Dt+Ot[10]*zt+Ot[14])/Tt,yt}function dt(yt,xt,Ot){var jt=xt[0],Dt=xt[1],zt=xt[2];return yt[0]=jt*Ot[0]+Dt*Ot[3]+zt*Ot[6],yt[1]=jt*Ot[1]+Dt*Ot[4]+zt*Ot[7],yt[2]=jt*Ot[2]+Dt*Ot[5]+zt*Ot[8],yt}function mt(yt,xt,Ot){var jt=Ot[0],Dt=Ot[1],zt=Ot[2],Tt=Ot[3],Wt=xt[0],Ht=xt[1],re=xt[2],pe=Dt*re-zt*Ht,me=zt*Wt-jt*re,Se=jt*Ht-Dt*Wt,Le=Dt*Se-zt*me,Je=zt*pe-jt*Se,On=jt*me-Dt*pe,gn=2*Tt;return pe*=gn,me*=gn,Se*=gn,Le*=2,Je*=2,On*=2,yt[0]=Wt+pe+Le,yt[1]=Ht+me+Je,yt[2]=re+Se+On,yt}function bt(yt,xt,Ot,jt){var Dt=[],zt=[];return Dt[0]=xt[0]-Ot[0],Dt[1]=xt[1]-Ot[1],Dt[2]=xt[2]-Ot[2],zt[0]=Dt[0],zt[1]=Dt[1]*Math.cos(jt)-Dt[2]*Math.sin(jt),zt[2]=Dt[1]*Math.sin(jt)+Dt[2]*Math.cos(jt),yt[0]=zt[0]+Ot[0],yt[1]=zt[1]+Ot[1],yt[2]=zt[2]+Ot[2],yt}function wt(yt,xt,Ot,jt){var Dt=[],zt=[];return Dt[0]=xt[0]-Ot[0],Dt[1]=xt[1]-Ot[1],Dt[2]=xt[2]-Ot[2],zt[0]=Dt[2]*Math.sin(jt)+Dt[0]*Math.cos(jt),zt[1]=Dt[1],zt[2]=Dt[2]*Math.cos(jt)-Dt[0]*Math.sin(jt),yt[0]=zt[0]+Ot[0],yt[1]=zt[1]+Ot[1],yt[2]=zt[2]+Ot[2],yt}function J(yt,xt,Ot,jt){var Dt=[],zt=[];return Dt[0]=xt[0]-Ot[0],Dt[1]=xt[1]-Ot[1],Dt[2]=xt[2]-Ot[2],zt[0]=Dt[0]*Math.cos(jt)-Dt[1]*Math.sin(jt),zt[1]=Dt[0]*Math.sin(jt)+Dt[1]*Math.cos(jt),zt[2]=Dt[2],yt[0]=zt[0]+Ot[0],yt[1]=zt[1]+Ot[1],yt[2]=zt[2]+Ot[2],yt}function ct(yt,xt){var Ot=yt[0],jt=yt[1],Dt=yt[2],zt=xt[0],Tt=xt[1],Wt=xt[2],Ht=Math.sqrt(Ot*Ot+jt*jt+Dt*Dt)*Math.sqrt(zt*zt+Tt*Tt+Wt*Wt),re=Ht&&pt(yt,xt)/Ht;return Math.acos(Math.min(Math.max(re,-1),1))}function it(yt){return yt[0]=0,yt[1]=0,yt[2]=0,yt}function _(yt){return"vec3("+yt[0]+", "+yt[1]+", "+yt[2]+")"}function R(yt,xt){return yt[0]===xt[0]&&yt[1]===xt[1]&&yt[2]===xt[2]}function Q(yt,xt){var Ot=yt[0],jt=yt[1],Dt=yt[2],zt=xt[0],Tt=xt[1],Wt=xt[2];return Math.abs(Ot-zt)<=n.b*Math.max(1,Math.abs(Ot),Math.abs(zt))&&Math.abs(jt-Tt)<=n.b*Math.max(1,Math.abs(jt),Math.abs(Tt))&&Math.abs(Dt-Wt)<=n.b*Math.max(1,Math.abs(Dt),Math.abs(Wt))}var k,g=r,O=s,F=d,V=W,rt=X,ot=b,st=$,Mt=(k=u(),function(yt,xt,Ot,jt,Dt,zt){var Tt,Wt;for(xt||(xt=3),Ot||(Ot=0),Wt=jt?Math.min(jt*xt+Ot,yt.length):yt.length,Tt=Ot;Tt<Wt;Tt+=xt)k[0]=yt[Tt],k[1]=yt[Tt+1],k[2]=yt[Tt+2],Dt(k,k,zt),yt[Tt]=k[0],yt[Tt+1]=k[1],yt[Tt+2]=k[2];return yt})},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.STACK_OVERFLOW=y.CIRCULAR_DEPENDENCY_IN_FACTORY=y.POST_CONSTRUCT_ERROR=y.MULTIPLE_POST_CONSTRUCT_METHODS=y.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=y.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=y.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=y.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=y.ARGUMENTS_LENGTH_MISMATCH=y.INVALID_DECORATOR_OPERATION=y.INVALID_TO_SELF_VALUE=y.INVALID_FUNCTION_BINDING=y.INVALID_MIDDLEWARE_RETURN=y.NO_MORE_SNAPSHOTS_AVAILABLE=y.INVALID_BINDING_TYPE=y.NOT_IMPLEMENTED=y.CIRCULAR_DEPENDENCY=y.UNDEFINED_INJECT_ANNOTATION=y.MISSING_INJECT_ANNOTATION=y.MISSING_INJECTABLE_ANNOTATION=y.NOT_REGISTERED=y.CANNOT_UNBIND=y.AMBIGUOUS_MATCH=y.KEY_NOT_FOUND=y.NULL_ARGUMENT=y.DUPLICATED_METADATA=y.DUPLICATED_INJECTABLE_DECORATOR=void 0,y.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",y.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",y.NULL_ARGUMENT="NULL argument",y.KEY_NOT_FOUND="Key Not Found",y.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",y.CANNOT_UNBIND="Could not unbind serviceIdentifier:",y.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",y.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",y.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",y.UNDEFINED_INJECT_ANNOTATION=function(n){return"@inject called with undefined this could mean that the class "+n+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},y.CIRCULAR_DEPENDENCY="Circular dependency found:",y.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",y.INVALID_BINDING_TYPE="Invalid binding type:",y.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",y.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",y.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",y.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",y.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",y.ARGUMENTS_LENGTH_MISMATCH=function(){for(var n=[],u=0;u<arguments.length;u++)n[u]=arguments[u];return"The number of constructor arguments in the derived class "+n[0]+" must be >= than the number of constructor arguments of its base class."},y.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",y.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",y.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",y.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",y.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",y.POST_CONSTRUCT_ERROR=function(){for(var n=[],u=0;u<arguments.length;u++)n[u]=arguments[u];return"@postConstruct error in class "+n[0]+": "+n[1]},y.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var n=[],u=0;u<arguments.length;u++)n[u]=arguments[u];return"It looks like there is a circular dependency in one of the '"+n[0]+"' bindings. Please investigate bindings withservice identifier '"+n[1]+"'."},y.STACK_OVERFLOW="Maximum call stack size exceeded"},function(i,y,t){var n;try{n={clone:t(272),constant:t(134),each:t(181),filter:t(184),has:t(195),isArray:t(26),isEmpty:t(348),isFunction:t(83),isUndefined:t(196),keys:t(58),map:t(197),reduce:t(199),size:t(351),transform:t(357),union:t(358),values:t(205)}}catch(u){}n||(n=window._),i.exports=n},function(i,y){function t(n){return(t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(n)}i.exports=function(n){var u=t(n);return n!=null&&(u=="object"||u=="function")}},function(i,y,t){var n=t(305),u=t(103),p=t(129),b=p&&p.isTypedArray,c=b?u(b):n;i.exports=c},function(i,y,t){"use strict";var n=t(123),u=Object(n.getColorsWithSubjectColor)("rgb(95, 149, 255)","rgb(255, 255, 255)");y.a={version:"0.0.12",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:u.mainStroke,fill:u.mainFill},size:20,color:u.mainStroke,linkPoints:{size:8,lineWidth:1,fill:u.activeFill,stroke:u.activeStroke}},nodeStateStyles:{active:{fill:u.activeFill,stroke:u.activeStroke,lineWidth:2,shadowColor:u.mainStroke,shadowBlur:10},selected:{fill:u.selectedFill,stroke:u.selectedStroke,lineWidth:4,shadowColor:u.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:u.highlightFill,stroke:u.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:u.inactiveFill,stroke:u.inactiveStroke,lineWidth:1},disable:{fill:u.disableFill,stroke:u.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:u.edgeMainStroke,lineAppendWidth:2},color:u.edgeMainStroke},edgeStateStyles:{active:{stroke:u.edgeActiveStroke,lineWidth:1},selected:{stroke:u.edgeSelectedStroke,lineWidth:2,shadowColor:u.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:u.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:u.edgeInactiveStroke,lineWidth:1},disable:{stroke:u.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:u.comboMainFill,lineWidth:1,stroke:u.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:u.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:u.comboActiveStroke,lineWidth:1,fill:u.comboActiveFill},selected:{stroke:u.comboSelectedStroke,lineWidth:2,fill:u.comboSelectedFill,shadowColor:u.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:u.comboHighlightStroke,lineWidth:2,fill:u.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:u.comboInactiveStroke,fill:u.comboInactiveFill,lineWidth:1},disable:{stroke:u.comboDisableStroke,fill:u.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"}},function(i,y,t){var n;try{n=t(270)}catch(u){}n||(n=window.graphlib),i.exports=n},function(i,y,t){function n(c){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(c)}var u=t(163),p=(typeof self=="undefined"?"undefined":n(self))=="object"&&self&&self.Object===Object&&self,b=u||p||Function("return this")();i.exports=b},function(i,y){function t(n){return(t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(n)}i.exports=function(n){return n!=null&&t(n)=="object"}},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.Metadata=void 0;var n=t(32),u=function(){function p(b,c){this.key=b,this.value=c}return p.prototype.toString=function(){return this.key===n.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},p}();y.Metadata=u},function(i,y){},function(i,y,t){"use strict";t.r(y),t.d(y,"catmullRomToBezier",function(){return S}),t.d(y,"fillPath",function(){return Bt}),t.d(y,"fillPathByDiff",function(){return K}),t.d(y,"formatPath",function(){return bt}),t.d(y,"intersection",function(){return pt}),t.d(y,"parsePathArray",function(){return A}),t.d(y,"parsePathString",function(){return c}),t.d(y,"pathToAbsolute",function(){return m}),t.d(y,"pathToCurve",function(){return C}),t.d(y,"rectPath",function(){return X});var n=t(0),u=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,p=new RegExp("([a-z])["+u+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+u+"]*,?["+u+"]*)+)","ig"),b=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+u+"]*,?["+u+"]*","ig"),c=function(J){if(!J)return null;if(Object(n.m)(J))return J;var ct={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},it=[];return String(J).replace(p,function(_,R,Q){var k=[],g=R.toLowerCase();if(Q.replace(b,function(O,F){F&&k.push(+F)}),g==="m"&&k.length>2&&(it.push([R].concat(k.splice(0,2))),g="l",R=R==="m"?"l":"L"),g==="o"&&k.length===1&&it.push([R,k[0]]),g==="r")it.push([R].concat(k));else for(;k.length>=ct[g]&&(it.push([R].concat(k.splice(0,ct[g]))),ct[g]););return J}),it},S=function(J,ct){for(var it=[],_=0,R=J.length;R-2*!ct>_;_+=2){var Q=[{x:+J[_-2],y:+J[_-1]},{x:+J[_],y:+J[_+1]},{x:+J[_+2],y:+J[_+3]},{x:+J[_+4],y:+J[_+5]}];ct?_?R-4===_?Q[3]={x:+J[0],y:+J[1]}:R-2===_&&(Q[2]={x:+J[0],y:+J[1]},Q[3]={x:+J[2],y:+J[3]}):Q[0]={x:+J[R-2],y:+J[R-1]}:R-4===_?Q[3]=Q[2]:_||(Q[0]={x:+J[_],y:+J[_+1]}),it.push(["C",(-Q[0].x+6*Q[1].x+Q[2].x)/6,(-Q[0].y+6*Q[1].y+Q[2].y)/6,(Q[1].x+6*Q[2].x-Q[3].x)/6,(Q[1].y+6*Q[2].y-Q[3].y)/6,Q[2].x,Q[2].y])}return it},I=function(J,ct,it,_,R){var Q=[];if(R===null&&_===null&&(_=it),J=+J,ct=+ct,it=+it,_=+_,R!==null){var k=Math.PI/180,g=J+it*Math.cos(-_*k),O=J+it*Math.cos(-R*k);Q=[["M",g,ct+it*Math.sin(-_*k)],["A",it,it,0,+(R-_>180),0,O,ct+it*Math.sin(-R*k)]]}else Q=[["M",J,ct],["m",0,-_],["a",it,_,0,1,1,0,2*_],["a",it,_,0,1,1,0,-2*_],["z"]];return Q},m=function(J){if(!(J=c(J))||!J.length)return[["M",0,0]];var ct,it,_=[],R=0,Q=0,k=0,g=0,O=0;J[0][0]==="M"&&(k=R=+J[0][1],g=Q=+J[0][2],O++,_[0]=["M",R,Q]);for(var F=J.length===3&&J[0][0]==="M"&&J[1][0].toUpperCase()==="R"&&J[2][0].toUpperCase()==="Z",V=void 0,rt=void 0,ot=O,st=J.length;ot<st;ot++){if(_.push(V=[]),(ct=(rt=J[ot])[0])!==ct.toUpperCase())switch(V[0]=ct.toUpperCase(),V[0]){case"A":V[1]=rt[1],V[2]=rt[2],V[3]=rt[3],V[4]=rt[4],V[5]=rt[5],V[6]=+rt[6]+R,V[7]=+rt[7]+Q;break;case"V":V[1]=+rt[1]+Q;break;case"H":V[1]=+rt[1]+R;break;case"R":for(var Mt=2,yt=(it=[R,Q].concat(rt.slice(1))).length;Mt<yt;Mt++)it[Mt]=+it[Mt]+R,it[++Mt]=+it[Mt]+Q;_.pop(),_=_.concat(S(it,F));break;case"O":_.pop(),(it=I(R,Q,rt[1],rt[2])).push(it[0]),_=_.concat(it);break;case"U":_.pop(),_=_.concat(I(R,Q,rt[1],rt[2],rt[3])),V=["U"].concat(_[_.length-1].slice(-2));break;case"M":k=+rt[1]+R,g=+rt[2]+Q;break;default:for(Mt=1,yt=rt.length;Mt<yt;Mt++)V[Mt]=+rt[Mt]+(Mt%2?R:Q)}else if(ct==="R")it=[R,Q].concat(rt.slice(1)),_.pop(),_=_.concat(S(it,F)),V=["R"].concat(rt.slice(-2));else if(ct==="O")_.pop(),(it=I(R,Q,rt[1],rt[2])).push(it[0]),_=_.concat(it);else if(ct==="U")_.pop(),_=_.concat(I(R,Q,rt[1],rt[2],rt[3])),V=["U"].concat(_[_.length-1].slice(-2));else for(var xt=0,Ot=rt.length;xt<Ot;xt++)V[xt]=rt[xt];if((ct=ct.toUpperCase())!=="O")switch(V[0]){case"Z":R=+k,Q=+g;break;case"H":R=V[1];break;case"V":Q=V[1];break;case"M":k=V[V.length-2],g=V[V.length-1];break;default:R=V[V.length-2],Q=V[V.length-1]}}return _},r=function(J,ct,it,_){return[J,ct,it,_,it,_]},s=function(J,ct,it,_,R,Q){return[1/3*J+2/3*it,1/3*ct+2/3*_,1/3*R+2/3*it,1/3*Q+2/3*_,R,Q]},d=function wt(J,ct,it,_,R,Q,k,g,O,F){it===_&&(it+=1);var V,rt,ot,st,Mt,yt=120*Math.PI/180,xt=Math.PI/180*(+R||0),Ot=[],jt=function(ii,mi,Pi){return{x:ii*Math.cos(Pi)-mi*Math.sin(Pi),y:ii*Math.sin(Pi)+mi*Math.cos(Pi)}};if(F)rt=F[0],ot=F[1],st=F[2],Mt=F[3];else{J=(V=jt(J,ct,-xt)).x,ct=V.y,g=(V=jt(g,O,-xt)).x,O=V.y,J===g&&ct===O&&(g+=1,O+=1);var Dt=(J-g)/2,zt=(ct-O)/2,Tt=Dt*Dt/(it*it)+zt*zt/(_*_);Tt>1&&(it*=Tt=Math.sqrt(Tt),_*=Tt);var Wt=it*it,Ht=_*_,re=(Q===k?-1:1)*Math.sqrt(Math.abs((Wt*Ht-Wt*zt*zt-Ht*Dt*Dt)/(Wt*zt*zt+Ht*Dt*Dt)));st=re*it*zt/_+(J+g)/2,Mt=re*-_*Dt/it+(ct+O)/2,rt=Math.asin(((ct-Mt)/_).toFixed(9)),ot=Math.asin(((O-Mt)/_).toFixed(9)),rt=J<st?Math.PI-rt:rt,ot=g<st?Math.PI-ot:ot,rt<0&&(rt=2*Math.PI+rt),ot<0&&(ot=2*Math.PI+ot),k&&rt>ot&&(rt-=2*Math.PI),!k&&ot>rt&&(ot-=2*Math.PI)}var pe=ot-rt;if(Math.abs(pe)>yt){var me=ot,Se=g,Le=O;ot=rt+yt*(k&&ot>rt?1:-1),Ot=wt(g=st+it*Math.cos(ot),O=Mt+_*Math.sin(ot),it,_,R,0,k,Se,Le,[ot,me,st,Mt])}pe=ot-rt;var Je=Math.cos(rt),On=Math.sin(rt),gn=Math.cos(ot),Wn=Math.sin(ot),kn=Math.tan(pe/4),Vn=4/3*it*kn,Dn=4/3*_*kn,Nn=[J,ct],Qn=[J+Vn*On,ct-Dn*Je],ir=[g+Vn*Wn,O-Dn*gn],hr=[g,O];if(Qn[0]=2*Nn[0]-Qn[0],Qn[1]=2*Nn[1]-Qn[1],F)return[Qn,ir,hr].concat(Ot);for(var Sr=[],mr=0,dr=(Ot=[Qn,ir,hr].concat(Ot).join().split(",")).length;mr<dr;mr++)Sr[mr]=mr%2?jt(Ot[mr-1],Ot[mr],xt).y:jt(Ot[mr],Ot[mr+1],xt).x;return Sr},C=function(J,ct){var it,_=m(J),R=ct&&m(ct),Q={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},g=[],O=[],F="",V="",rt=function(zt,Tt,Wt){var Ht,re;if(!zt)return["C",Tt.x,Tt.y,Tt.x,Tt.y,Tt.x,Tt.y];switch(!(zt[0]in{T:1,Q:1})&&(Tt.qx=Tt.qy=null),zt[0]){case"M":Tt.X=zt[1],Tt.Y=zt[2];break;case"A":zt=["C"].concat(d.apply(0,[Tt.x,Tt.y].concat(zt.slice(1))));break;case"S":Wt==="C"||Wt==="S"?(Ht=2*Tt.x-Tt.bx,re=2*Tt.y-Tt.by):(Ht=Tt.x,re=Tt.y),zt=["C",Ht,re].concat(zt.slice(1));break;case"T":Wt==="Q"||Wt==="T"?(Tt.qx=2*Tt.x-Tt.qx,Tt.qy=2*Tt.y-Tt.qy):(Tt.qx=Tt.x,Tt.qy=Tt.y),zt=["C"].concat(s(Tt.x,Tt.y,Tt.qx,Tt.qy,zt[1],zt[2]));break;case"Q":Tt.qx=zt[1],Tt.qy=zt[2],zt=["C"].concat(s(Tt.x,Tt.y,zt[1],zt[2],zt[3],zt[4]));break;case"L":zt=["C"].concat(r(Tt.x,Tt.y,zt[1],zt[2]));break;case"H":zt=["C"].concat(r(Tt.x,Tt.y,zt[1],Tt.y));break;case"V":zt=["C"].concat(r(Tt.x,Tt.y,Tt.x,zt[1]));break;case"Z":zt=["C"].concat(r(Tt.x,Tt.y,Tt.X,Tt.Y))}return zt},ot=function(zt,Tt){if(zt[Tt].length>7){zt[Tt].shift();for(var Wt=zt[Tt];Wt.length;)g[Tt]="A",R&&(O[Tt]="A"),zt.splice(Tt++,0,["C"].concat(Wt.splice(0,6)));zt.splice(Tt,1),it=Math.max(_.length,R&&R.length||0)}},st=function(zt,Tt,Wt,Ht,re){zt&&Tt&&zt[re][0]==="M"&&Tt[re][0]!=="M"&&(Tt.splice(re,0,["M",Ht.x,Ht.y]),Wt.bx=0,Wt.by=0,Wt.x=zt[re][1],Wt.y=zt[re][2],it=Math.max(_.length,R&&R.length||0))};it=Math.max(_.length,R&&R.length||0);for(var Mt=0;Mt<it;Mt++){_[Mt]&&(F=_[Mt][0]),F!=="C"&&(g[Mt]=F,Mt&&(V=g[Mt-1])),_[Mt]=rt(_[Mt],Q,V),g[Mt]!=="A"&&F==="C"&&(g[Mt]="C"),ot(_,Mt),R&&(R[Mt]&&(F=R[Mt][0]),F!=="C"&&(O[Mt]=F,Mt&&(V=O[Mt-1])),R[Mt]=rt(R[Mt],k,V),O[Mt]!=="A"&&F==="C"&&(O[Mt]="C"),ot(R,Mt)),st(_,R,Q,k,Mt),st(R,_,k,Q,Mt);var yt=_[Mt],xt=R&&R[Mt],Ot=yt.length,jt=R&&xt.length;Q.x=yt[Ot-2],Q.y=yt[Ot-1],Q.bx=parseFloat(yt[Ot-4])||Q.x,Q.by=parseFloat(yt[Ot-3])||Q.y,k.bx=R&&(parseFloat(xt[jt-4])||k.x),k.by=R&&(parseFloat(xt[jt-3])||k.y),k.x=R&&xt[jt-2],k.y=R&&xt[jt-1]}return R?[_,R]:_},E=/,?([a-z]),?/gi,A=function(J){return J.join(",").replace(E,"$1")},f=function(J,ct,it,_,R){return J*(J*(-3*ct+9*it-9*_+3*R)+6*ct-12*it+6*_)-3*ct+3*it},x=function(J,ct,it,_,R,Q,k,g,O){O===null&&(O=1);for(var F=(O=O>1?1:O<0?0:O)/2,V=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],rt=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],ot=0,st=0;st<12;st++){var Mt=F*V[st]+F,yt=f(Mt,J,it,R,k),xt=f(Mt,ct,_,Q,g),Ot=yt*yt+xt*xt;ot+=rt[st]*Math.sqrt(Ot)}return F*ot},j=function(J,ct,it,_,R,Q,k,g){for(var O,F,V,rt,ot=[],st=[[],[]],Mt=0;Mt<2;++Mt)if(Mt===0?(F=6*J-12*it+6*R,O=-3*J+9*it-9*R+3*k,V=3*it-3*J):(F=6*ct-12*_+6*Q,O=-3*ct+9*_-9*Q+3*g,V=3*_-3*ct),Math.abs(O)<1e-12){if(Math.abs(F)<1e-12)continue;(rt=-V/F)>0&&rt<1&&ot.push(rt)}else{var yt=F*F-4*V*O,xt=Math.sqrt(yt);if(!(yt<0)){var Ot=(-F+xt)/(2*O);Ot>0&&Ot<1&&ot.push(Ot);var jt=(-F-xt)/(2*O);jt>0&&jt<1&&ot.push(jt)}}for(var Dt,zt=ot.length,Tt=zt;zt--;)Dt=1-(rt=ot[zt]),st[0][zt]=Dt*Dt*Dt*J+3*Dt*Dt*rt*it+3*Dt*rt*rt*R+rt*rt*rt*k,st[1][zt]=Dt*Dt*Dt*ct+3*Dt*Dt*rt*_+3*Dt*rt*rt*Q+rt*rt*rt*g;return st[0][Tt]=J,st[1][Tt]=ct,st[0][Tt+1]=k,st[1][Tt+1]=g,st[0].length=st[1].length=Tt+2,{min:{x:Math.min.apply(0,st[0]),y:Math.min.apply(0,st[1])},max:{x:Math.max.apply(0,st[0]),y:Math.max.apply(0,st[1])}}},P=function(J,ct,it,_,R,Q,k,g){if(!(Math.max(J,it)<Math.min(R,k)||Math.min(J,it)>Math.max(R,k)||Math.max(ct,_)<Math.min(Q,g)||Math.min(ct,_)>Math.max(Q,g))){var O=(J-it)*(Q-g)-(ct-_)*(R-k);if(O){var F=((J*_-ct*it)*(R-k)-(J-it)*(R*g-Q*k))/O,V=((J*_-ct*it)*(Q-g)-(ct-_)*(R*g-Q*k))/O,rt=+F.toFixed(2),ot=+V.toFixed(2);if(!(rt<+Math.min(J,it).toFixed(2)||rt>+Math.max(J,it).toFixed(2)||rt<+Math.min(R,k).toFixed(2)||rt>+Math.max(R,k).toFixed(2)||ot<+Math.min(ct,_).toFixed(2)||ot>+Math.max(ct,_).toFixed(2)||ot<+Math.min(Q,g).toFixed(2)||ot>+Math.max(Q,g).toFixed(2)))return{x:F,y:V}}}},W=function(J,ct,it){return ct>=J.x&&ct<=J.x+J.width&&it>=J.y&&it<=J.y+J.height},X=function(J,ct,it,_,R){if(R)return[["M",+J+ +R,ct],["l",it-2*R,0],["a",R,R,0,0,1,R,R],["l",0,_-2*R],["a",R,R,0,0,1,-R,R],["l",2*R-it,0],["a",R,R,0,0,1,-R,-R],["l",0,2*R-_],["a",R,R,0,0,1,R,-R],["z"]];var Q=[["M",J,ct],["l",it,0],["l",0,_],["l",-it,0],["z"]];return Q.parsePathArray=A,Q},$=function(J,ct,it,_){return J===null&&(J=ct=it=_=0),ct===null&&(ct=J.y,it=J.width,_=J.height,J=J.x),{x:J,y:ct,width:it,w:it,height:_,h:_,x2:J+it,y2:ct+_,cx:J+it/2,cy:ct+_/2,r1:Math.min(it,_)/2,r2:Math.max(it,_)/2,r0:Math.sqrt(it*it+_*_)/2,path:X(J,ct,it,_),vb:[J,ct,it,_].join(" ")}},ft=function(J,ct,it,_,R,Q,k,g){Object(n.m)(J)||(J=[J,ct,it,_,R,Q,k,g]);var O=j.apply(null,J);return $(O.min.x,O.min.y,O.max.x-O.min.x,O.max.y-O.min.y)},Z=function(J,ct,it,_,R,Q,k,g,O){var F=1-O,V=Math.pow(F,3),rt=Math.pow(F,2),ot=O*O,st=ot*O,Mt=J+2*O*(it-J)+ot*(R-2*it+J),yt=ct+2*O*(_-ct)+ot*(Q-2*_+ct),xt=it+2*O*(R-it)+ot*(k-2*R+it),Ot=_+2*O*(Q-_)+ot*(g-2*Q+_);return{x:V*J+3*rt*O*it+3*F*O*O*R+st*k,y:V*ct+3*rt*O*_+3*F*O*O*Q+st*g,m:{x:Mt,y:yt},n:{x:xt,y:Ot},start:{x:F*J+O*it,y:F*ct+O*_},end:{x:F*R+O*k,y:F*Q+O*g},alpha:90-180*Math.atan2(Mt-xt,yt-Ot)/Math.PI}},lt=function(J,ct,it){if(!function(Tt,Wt){return Tt=$(Tt),Wt=$(Wt),W(Wt,Tt.x,Tt.y)||W(Wt,Tt.x2,Tt.y)||W(Wt,Tt.x,Tt.y2)||W(Wt,Tt.x2,Tt.y2)||W(Tt,Wt.x,Wt.y)||W(Tt,Wt.x2,Wt.y)||W(Tt,Wt.x,Wt.y2)||W(Tt,Wt.x2,Wt.y2)||(Tt.x<Wt.x2&&Tt.x>Wt.x||Wt.x<Tt.x2&&Wt.x>Tt.x)&&(Tt.y<Wt.y2&&Tt.y>Wt.y||Wt.y<Tt.y2&&Wt.y>Tt.y)}(ft(J),ft(ct)))return it?0:[];for(var _=~~(x.apply(0,J)/8),R=~~(x.apply(0,ct)/8),Q=[],k=[],g={},O=it?0:[],F=0;F<_+1;F++){var V=Z.apply(0,J.concat(F/_));Q.push({x:V.x,y:V.y,t:F/_})}for(F=0;F<R+1;F++)V=Z.apply(0,ct.concat(F/R)),k.push({x:V.x,y:V.y,t:F/R});for(F=0;F<_;F++)for(var rt=0;rt<R;rt++){var ot=Q[F],st=Q[F+1],Mt=k[rt],yt=k[rt+1],xt=Math.abs(st.x-ot.x)<.001?"y":"x",Ot=Math.abs(yt.x-Mt.x)<.001?"y":"x",jt=P(ot.x,ot.y,st.x,st.y,Mt.x,Mt.y,yt.x,yt.y);if(jt){if(g[jt.x.toFixed(4)]===jt.y.toFixed(4))continue;g[jt.x.toFixed(4)]=jt.y.toFixed(4);var Dt=ot.t+Math.abs((jt[xt]-ot[xt])/(st[xt]-ot[xt]))*(st.t-ot.t),zt=Mt.t+Math.abs((jt[Ot]-Mt[Ot])/(yt[Ot]-Mt[Ot]))*(yt.t-Mt.t);Dt>=0&&Dt<=1&&zt>=0&&zt<=1&&(it?O+=1:O.push({x:jt.x,y:jt.y,t1:Dt,t2:zt}))}}return O},pt=function(J,ct){return function(it,_,R){var Q,k,g,O,F,V,rt,ot,st,Mt;it=C(it),_=C(_);for(var yt=R?0:[],xt=0,Ot=it.length;xt<Ot;xt++){var jt=it[xt];if(jt[0]==="M")Q=F=jt[1],k=V=jt[2];else{jt[0]==="C"?(st=[Q,k].concat(jt.slice(1)),Q=st[6],k=st[7]):(st=[Q,k,Q,k,F,V,F,V],Q=F,k=V);for(var Dt=0,zt=_.length;Dt<zt;Dt++){var Tt=_[Dt];if(Tt[0]==="M")g=rt=Tt[1],O=ot=Tt[2];else{Tt[0]==="C"?(Mt=[g,O].concat(Tt.slice(1)),g=Mt[6],O=Mt[7]):(Mt=[g,O,g,O,rt,ot,rt,ot],g=rt,O=ot);var Wt=lt(st,Mt,R);if(R)yt+=Wt;else{for(var Ht=0,re=Wt.length;Ht<re;Ht++)Wt[Ht].segment1=xt,Wt[Ht].segment2=Dt,Wt[Ht].bez1=st,Wt[Ht].bez2=Mt;yt=yt.concat(Wt)}}}}}return yt}(J,ct)};function gt(wt,J){var ct=[],it=[];return wt.length&&function _(R,Q){if(R.length===1)ct.push(R[0]),it.push(R[0]);else{for(var k=[],g=0;g<R.length-1;g++)g===0&&ct.push(R[0]),g===R.length-2&&it.push(R[g+1]),k[g]=[(1-Q)*R[g][0]+Q*R[g+1][0],(1-Q)*R[g][1]+Q*R[g+1][1]];_(k,Q)}}(wt,J),{left:ct,right:it.reverse()}}var ut=function(J,ct,it){if(it===1)return[[].concat(J)];var _=[];if(ct[0]==="L"||ct[0]==="C"||ct[0]==="Q")_=_.concat(function(k,g,O){var F=[[k[1],k[2]]];O=O||2;var V=[];g[0]==="A"?(F.push(g[6]),F.push(g[7])):g[0]==="C"?(F.push([g[1],g[2]]),F.push([g[3],g[4]]),F.push([g[5],g[6]])):g[0]==="S"||g[0]==="Q"?(F.push([g[1],g[2]]),F.push([g[3],g[4]])):F.push([g[1],g[2]]);for(var rt=F,ot=1/O,st=0;st<O-1;st++){var Mt=gt(rt,ot/(1-ot*st));V.push(Mt.left),rt=Mt.right}return V.push(rt),V.map(function(yt){var xt=[];return yt.length===4&&(xt.push("C"),xt=xt.concat(yt[2])),yt.length>=3&&(yt.length===3&&xt.push("Q"),xt=xt.concat(yt[1])),yt.length===2&&xt.push("L"),xt=xt.concat(yt[yt.length-1])})}(J,ct,it));else{var R=[].concat(J);R[0]==="M"&&(R[0]="L");for(var Q=0;Q<=it-1;Q++)_.push(R)}return _},Bt=function(J,ct){if(J.length===1)return J;var it=J.length-1,_=ct.length-1,R=it/_,Q=[];if(J.length===1&&J[0][0]==="M"){for(var k=0;k<_-it;k++)J.push(J[0]);return J}for(k=0;k<_;k++){var g=Math.floor(R*k);Q[g]=(Q[g]||0)+1}var O=Q.reduce(function(F,V,rt){return rt===it?F.concat(J[it]):F.concat(ut(J[rt],J[rt+1],V))},[]);return O.unshift(J[0]),ct[_]!=="Z"&&ct[_]!=="z"||O.push("Z"),O},Lt=function(J,ct){if(J.length!==ct.length)return!1;var it=!0;return Object(n.f)(J,function(_,R){if(_!==ct[R])return it=!1,!1}),it};function St(wt,J,ct){var it=null,_=ct;return J<_&&(_=J,it="add"),wt<_&&(_=wt,it="del"),{type:it,min:_}}var K=function(J,ct){var it=function(ot,st){var Mt,yt,xt=ot.length,Ot=st.length,jt=0;if(xt===0||Ot===0)return null;for(var Dt=[],zt=0;zt<=xt;zt++)Dt[zt]=[],Dt[zt][0]={min:zt};for(var Tt=0;Tt<=Ot;Tt++)Dt[0][Tt]={min:Tt};for(zt=1;zt<=xt;zt++)for(Mt=ot[zt-1],Tt=1;Tt<=Ot;Tt++){yt=st[Tt-1],jt=Lt(Mt,yt)?0:1;var Wt=Dt[zt-1][Tt].min+1,Ht=Dt[zt][Tt-1].min+1,re=Dt[zt-1][Tt-1].min+jt;Dt[zt][Tt]=St(Wt,Ht,re)}return Dt}(J,ct),_=J.length,R=ct.length,Q=[],k=1,g=1;if(it[_][R].min!==_){for(var O=1;O<=_;O++){var F=it[O][O].min;g=O;for(var V=k;V<=R;V++)it[O][V].min<F&&(F=it[O][V].min,g=V);k=g,it[O][k].type&&Q.push({index:O-1,type:it[O][k].type})}for(O=Q.length-1;O>=0;O--)k=Q[O].index,Q[O].type==="add"?J.splice(k,0,[].concat(J[k])):J.splice(k,1)}var rt=R-(_=J.length);if(_<R)for(O=0;O<rt;O++)J[_-1][0]==="z"||J[_-1][0]==="Z"?J.splice(_-2,0,J[_-2]):J.push(J[_-1]),_+=1;return J};function dt(wt,J,ct){for(var it,_=[].concat(wt),R=1/(ct+1),Q=mt(J)[0],k=1;k<=ct;k++)R*=k,(it=Math.floor(wt.length*R))===0?_.unshift([Q[0]*R+wt[it][0]*(1-R),Q[1]*R+wt[it][1]*(1-R)]):_.splice(it,0,[Q[0]*R+wt[it][0]*(1-R),Q[1]*R+wt[it][1]*(1-R)]);return _}function mt(wt){var J=[];switch(wt[0]){case"M":case"L":J.push([wt[1],wt[2]]);break;case"A":J.push([wt[6],wt[7]]);break;case"Q":J.push([wt[3],wt[4]]),J.push([wt[1],wt[2]]);break;case"T":J.push([wt[1],wt[2]]);break;case"C":J.push([wt[5],wt[6]]),J.push([wt[1],wt[2]]),J.push([wt[3],wt[4]]);break;case"S":J.push([wt[3],wt[4]]),J.push([wt[1],wt[2]]);break;case"H":case"V":J.push([wt[1],wt[1]])}return J}var bt=function(J,ct){if(J.length<=1)return J;for(var it,_=0;_<ct.length;_++)if(J[_][0]!==ct[_][0])switch(it=mt(J[_]),ct[_][0]){case"M":J[_]=["M"].concat(it[0]);break;case"L":J[_]=["L"].concat(it[0]);break;case"A":J[_]=[].concat(ct[_]),J[_][6]=it[0][0],J[_][7]=it[0][1];break;case"Q":if(it.length<2){if(!(_>0)){J[_]=ct[_];break}it=dt(it,J[_-1],1)}J[_]=["Q"].concat(it.reduce(function(R,Q){return R.concat(Q)},[]));break;case"T":J[_]=["T"].concat(it[0]);break;case"C":if(it.length<3){if(!(_>0)){J[_]=ct[_];break}it=dt(it,J[_-1],2)}J[_]=["C"].concat(it.reduce(function(R,Q){return R.concat(Q)},[]));break;case"S":if(it.length<2){if(!(_>0)){J[_]=ct[_];break}it=dt(it,J[_-1],1)}J[_]=["S"].concat(it.reduce(function(R,Q){return R.concat(Q)},[]));break;default:J[_]=ct[_]}return J}},function(i,y,t){"use strict";t(56),t(18);var n=t(250);t.d(y,"Canvas",function(){return n.a}),t(76),t(89)},function(i,y,t){var n=t(83),u=t(128);i.exports=function(p){return p!=null&&u(p.length)&&!n(p)}},function(i,y,t){function n(I){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(I)}var u=t(328),p=t(338),b=t(66),c=t(26),S=t(345);i.exports=function(I){return typeof I=="function"?I:I==null?b:n(I)=="object"?c(I)?p(I[0],I[1]):u(I):S(I)}},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.TargetTypeEnum=y.BindingTypeEnum=y.BindingScopeEnum=void 0,y.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"},y.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},y.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},function(i,y,t){"use strict";t.r(y),t.d(y,"Base",function(){return I}),t.d(y,"Circle",function(){return m}),t.d(y,"Ellipse",function(){return s}),t.d(y,"Image",function(){return C}),t.d(y,"Line",function(){return x}),t.d(y,"Marker",function(){return X}),t.d(y,"Path",function(){return K}),t.d(y,"Polygon",function(){return mt}),t.d(y,"Polyline",function(){return bt}),t.d(y,"Rect",function(){return J}),t.d(y,"Text",function(){return ct});var n={};t.r(n),t.d(n,"Base",function(){return I}),t.d(n,"Circle",function(){return m}),t.d(n,"Ellipse",function(){return s}),t.d(n,"Image",function(){return C}),t.d(n,"Line",function(){return x}),t.d(n,"Marker",function(){return X}),t.d(n,"Path",function(){return K}),t.d(n,"Polygon",function(){return mt}),t.d(n,"Polyline",function(){return bt}),t.d(n,"Rect",function(){return J}),t.d(n,"Text",function(){return ct});var u=t(1),p=t(18),b=t(17),c=t(29),S=t(76),I=function(it){function _(){return it!==null&&it.apply(this,arguments)||this}return Object(u.b)(_,it),_.prototype.getDefaultAttrs=function(){var R=it.prototype.getDefaultAttrs.call(this);return Object(u.a)(Object(u.a)({},R),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},_.prototype.getShapeBase=function(){return n},_.prototype.getGroupBase=function(){return S.a},_.prototype.onCanvasChange=function(R){Object(c.h)(this,R)},_.prototype.calculateBBox=function(){var R=this.get("type"),Q=this.getHitLineWidth(),k=Object(p.getBBoxMethod)(R)(this),g=Q/2,O=k.x-g,F=k.y-g,V=k.x+k.width+g,rt=k.y+k.height+g;return{x:O,minX:O,y:F,minY:F,width:k.width+Q,height:k.height+Q,maxX:V,maxY:rt}},_.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},_.prototype.isStroke=function(){return!!this.attrs.stroke},_.prototype._applyClip=function(R,Q){Q&&(R.save(),Object(c.a)(R,Q),Q.createPath(R),R.restore(),R.clip(),Q._afterDraw())},_.prototype.draw=function(R,Q){var k=this.cfg.clipShape;if(Q){if(this.cfg.refresh===!1)return void this.set("hasChanged",!1);var g=this.getCanvasBBox();if(!Object(b.f)(Q,g))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}R.save(),Object(c.a)(R,this),this._applyClip(R,k),this.drawPath(R),R.restore(),this._afterDraw()},_.prototype.getCanvasViewBox=function(){var R=this.cfg.canvas;return R?R.getViewRange():null},_.prototype.cacheCanvasBBox=function(){var R=this.getCanvasViewBox();if(R){var Q=this.getCanvasBBox(),k=Object(b.f)(Q,R);this.set("isInView",k),k?this.set("cacheCanvasBBox",Q):this.set("cacheCanvasBBox",null)}},_.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},_.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},_.prototype.drawPath=function(R){this.createPath(R),this.strokeAndFill(R),this.afterDrawPath(R)},_.prototype.fill=function(R){R.fill()},_.prototype.stroke=function(R){R.stroke()},_.prototype.strokeAndFill=function(R){var Q=this.attrs,k=Q.lineWidth,g=Q.opacity,O=Q.strokeOpacity,F=Q.fillOpacity;this.isFill()&&(Object(b.i)(F)||F===1?this.fill(R):(R.globalAlpha=F,this.fill(R),R.globalAlpha=g)),this.isStroke()&&k>0&&(Object(b.i)(O)||O===1||(R.globalAlpha=O),this.stroke(R)),this.afterDrawPath(R)},_.prototype.createPath=function(R){},_.prototype.afterDrawPath=function(R){},_.prototype.isInShape=function(R,Q){var k=this.isStroke(),g=this.isFill(),O=this.getHitLineWidth();return this.isInStrokeOrPath(R,Q,k,g,O)},_.prototype.isInStrokeOrPath=function(R,Q,k,g,O){return!1},_.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var R=this.attrs;return R.lineWidth+R.lineAppendWidth},_}(p.AbstractShape),m=function(it){function _(){return it!==null&&it.apply(this,arguments)||this}return Object(u.b)(_,it),_.prototype.getDefaultAttrs=function(){var R=it.prototype.getDefaultAttrs.call(this);return Object(u.a)(Object(u.a)({},R),{x:0,y:0,r:0})},_.prototype.isInStrokeOrPath=function(R,Q,k,g,O){var F=this.attr(),V=F.x,rt=F.y,ot=F.r,st=O/2,Mt=Object(b.b)(V,rt,R,Q);return g&&k?Mt<=ot+st:g?Mt<=ot:!!k&&Mt>=ot-st&&Mt<=ot+st},_.prototype.createPath=function(R){var Q=this.attr(),k=Q.x,g=Q.y,O=Q.r;R.beginPath(),R.arc(k,g,O,0,2*Math.PI,!1),R.closePath()},_}(I);function r(it,_,R,Q){return it/(R*R)+_/(Q*Q)}var s=function(it){function _(){return it!==null&&it.apply(this,arguments)||this}return Object(u.b)(_,it),_.prototype.getDefaultAttrs=function(){var R=it.prototype.getDefaultAttrs.call(this);return Object(u.a)(Object(u.a)({},R),{x:0,y:0,rx:0,ry:0})},_.prototype.isInStrokeOrPath=function(R,Q,k,g,O){var F=this.attr(),V=O/2,rt=F.x,ot=F.y,st=F.rx,Mt=F.ry,yt=(R-rt)*(R-rt),xt=(Q-ot)*(Q-ot);return g&&k?r(yt,xt,st+V,Mt+V)<=1:g?r(yt,xt,st,Mt)<=1:!!k&&r(yt,xt,st-V,Mt-V)>=1&&r(yt,xt,st+V,Mt+V)<=1},_.prototype.createPath=function(R){var Q=this.attr(),k=Q.x,g=Q.y,O=Q.rx,F=Q.ry;if(R.beginPath(),R.ellipse)R.ellipse(k,g,O,F,0,0,2*Math.PI,!1);else{var V=O>F?O:F,rt=O>F?1:O/F,ot=O>F?F/O:1;R.save(),R.translate(k,g),R.scale(rt,ot),R.arc(0,0,V,0,2*Math.PI),R.restore(),R.closePath()}},_}(I);function d(it){return it instanceof HTMLElement&&Object(b.k)(it.nodeName)&&it.nodeName.toUpperCase()==="CANVAS"}var C=function(it){function _(){return it!==null&&it.apply(this,arguments)||this}return Object(u.b)(_,it),_.prototype.getDefaultAttrs=function(){var R=it.prototype.getDefaultAttrs.call(this);return Object(u.a)(Object(u.a)({},R),{x:0,y:0,width:0,height:0})},_.prototype.initAttrs=function(R){this._setImage(R.img)},_.prototype.isStroke=function(){return!1},_.prototype.isOnlyHitBox=function(){return!0},_.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var R=this.get("canvas");R?R.draw():this.createPath(this.get("context"))}},_.prototype._setImage=function(R){var Q=this,k=this.attrs;if(Object(b.k)(R)){var g=new Image;g.onload=function(){if(Q.destroyed)return!1;Q.attr("img",g),Q.set("loading",!1),Q._afterLoading();var O=Q.get("callback");O&&O.call(Q)},g.crossOrigin="Anonymous",g.src=R,this.set("loading",!0)}else R instanceof Image?(k.width||(k.width=R.width),k.height||(k.height=R.height)):d(R)&&(k.width||(k.width=Number(R.getAttribute("width"))),k.height||(k.height,Number(R.getAttribute("height"))))},_.prototype.onAttrChange=function(R,Q,k){it.prototype.onAttrChange.call(this,R,Q,k),R==="img"&&this._setImage(Q)},_.prototype.createPath=function(R){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",R);var Q=this.attr(),k=Q.x,g=Q.y,O=Q.width,F=Q.height,V=Q.sx,rt=Q.sy,ot=Q.swidth,st=Q.sheight,Mt=Q.img;(Mt instanceof Image||d(Mt))&&(Object(b.i)(V)||Object(b.i)(rt)||Object(b.i)(ot)||Object(b.i)(st)?R.drawImage(Mt,k,g,O,F):R.drawImage(Mt,V,rt,ot,st,k,g,O,F))},_}(I),E=t(20);function A(it,_,R,Q,k,g,O){var F=Math.min(it,R),V=Math.max(it,R),rt=Math.min(_,Q),ot=Math.max(_,Q),st=k/2;return g>=F-st&&g<=V+st&&O>=rt-st&&O<=ot+st&&E.c.pointToLine(it,_,R,Q,g,O)<=k/2}var f=t(34),x=function(it){function _(){return it!==null&&it.apply(this,arguments)||this}return Object(u.b)(_,it),_.prototype.getDefaultAttrs=function(){var R=it.prototype.getDefaultAttrs.call(this);return Object(u.a)(Object(u.a)({},R),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},_.prototype.initAttrs=function(R){this.setArrow()},_.prototype.onAttrChange=function(R,Q,k){it.prototype.onAttrChange.call(this,R,Q,k),this.setArrow()},_.prototype.setArrow=function(){var R=this.attr(),Q=R.x1,k=R.y1,g=R.x2,O=R.y2,F=R.startArrow,V=R.endArrow;F&&f.b(this,R,g,O,Q,k),V&&f.a(this,R,Q,k,g,O)},_.prototype.isInStrokeOrPath=function(R,Q,k,g,O){if(!k||!O)return!1;var F=this.attr();return A(F.x1,F.y1,F.x2,F.y2,O,R,Q)},_.prototype.createPath=function(R){var Q=this.attr(),k=Q.x1,g=Q.y1,O=Q.x2,F=Q.y2,V=Q.startArrow,rt=Q.endArrow,ot={dx:0,dy:0},st={dx:0,dy:0};V&&V.d&&(ot=f.c(k,g,O,F,Q.startArrow.d)),rt&&rt.d&&(st=f.c(k,g,O,F,Q.endArrow.d)),R.beginPath(),R.moveTo(k+ot.dx,g+ot.dy),R.lineTo(O-st.dx,F-st.dy)},_.prototype.afterDrawPath=function(R){var Q=this.get("startArrowShape"),k=this.get("endArrowShape");Q&&Q.draw(R),k&&k.draw(R)},_.prototype.getTotalLength=function(){var R=this.attr(),Q=R.x1,k=R.y1,g=R.x2,O=R.y2;return E.c.length(Q,k,g,O)},_.prototype.getPoint=function(R){var Q=this.attr(),k=Q.x1,g=Q.y1,O=Q.x2,F=Q.y2;return E.c.pointAt(k,g,O,F,R)},_}(I),j=t(0),P=t(31),W={circle:function(_,R,Q){return[["M",_-Q,R],["A",Q,Q,0,1,0,_+Q,R],["A",Q,Q,0,1,0,_-Q,R]]},square:function(_,R,Q){return[["M",_-Q,R-Q],["L",_+Q,R-Q],["L",_+Q,R+Q],["L",_-Q,R+Q],["Z"]]},diamond:function(_,R,Q){return[["M",_-Q,R],["L",_,R-Q],["L",_+Q,R],["L",_,R+Q],["Z"]]},triangle:function(_,R,Q){var k=Q*Math.sin(1/3*Math.PI);return[["M",_-Q,R+k],["L",_,R-k],["L",_+Q,R+k],["Z"]]},"triangle-down":function(_,R,Q){var k=Q*Math.sin(1/3*Math.PI);return[["M",_-Q,R-k],["L",_+Q,R-k],["L",_,R+k],["Z"]]}},X=function(it){function _(){return it!==null&&it.apply(this,arguments)||this}return Object(u.b)(_,it),_.prototype.initAttrs=function(R){this._resetParamsCache()},_.prototype._resetParamsCache=function(){this.set("paramsCache",{})},_.prototype.onAttrChange=function(R,Q,k){it.prototype.onAttrChange.call(this,R,Q,k),["symbol","x","y","r","radius"].indexOf(R)!==-1&&this._resetParamsCache()},_.prototype.isOnlyHitBox=function(){return!0},_.prototype._getR=function(R){return Object(j.s)(R.r)?R.radius:R.r},_.prototype._getPath=function(){var R,Q,k=this.attr(),g=k.x,O=k.y,F=k.symbol||"circle",V=this._getR(k);if(Object(b.h)(F))Q=(R=F)(g,O,V),Q=Object(P.c)(Q);else{if(!(R=_.Symbols[F]))return console.warn(F+" marker is not supported."),null;Q=R(g,O,V)}return Q},_.prototype.createPath=function(R){var Q=this._getPath(),k=this.get("paramsCache");Object(c.e)(this,R,{path:Q},k)},_.Symbols=W,_}(I);function $(it,_,R){var Q=Object(p.getOffScreenContext)();return it.createPath(Q),Q.isPointInPath(_,R)}function ft(it){return Math.abs(it)<1e-6?0:it<0?-1:1}function Z(it,_,R){return(R[0]-it[0])*(_[1]-it[1])==(_[0]-it[0])*(R[1]-it[1])&&Math.min(it[0],_[0])<=R[0]&&R[0]<=Math.max(it[0],_[0])&&Math.min(it[1],_[1])<=R[1]&&R[1]<=Math.max(it[1],_[1])}function lt(it,_,R){var Q=!1,k=it.length;if(k<=2)return!1;for(var g=0;g<k;g++){var O=it[g],F=it[(g+1)%k];if(Z(O,F,[_,R]))return!0;ft(O[1]-R)>0!=ft(F[1]-R)>0&&ft(_-(R-O[1])*(O[0]-F[0])/(O[1]-F[1])-O[0])<0&&(Q=!Q)}return Q}var pt=t(10),gt=t(40);function ut(it,_,R,Q,k,g,O,F){var V=(Math.atan2(F-_,O-it)+2*Math.PI)%(2*Math.PI);if(V<Q||V>k)return!1;var rt={x:it+R*Math.cos(V),y:_+R*Math.sin(V)};return Object(b.b)(rt.x,rt.y,O,F)<=g/2}var Bt=pt.a.transform,Lt=Object(u.a)({hasArc:function(_){for(var R=!1,Q=_.length,k=0;k<Q;k++){var g=_[k][0];if(g==="C"||g==="A"||g==="Q"){R=!0;break}}return R},extractPolygons:function(_){for(var R=_.length,Q=[],k=[],g=[],O=0;O<R;O++){var F=_[O],V=F[0];V==="M"?(g.length&&(k.push(g),g=[]),g.push([F[1],F[2]])):V==="Z"?g.length&&(Q.push(g),g=[]):g.push([F[1],F[2]])}return g.length>0&&k.push(g),{polygons:Q,polylines:k}},isPointInStroke:function(_,R,Q,k,g){for(var O=!1,F=R/2,V=0;V<_.length;V++){var rt=_[V],ot=rt.currentPoint,st=rt.params,Mt=rt.prePoint,yt=rt.box;if(!yt||Object(b.e)(yt.x-F,yt.y-F,yt.width+R,yt.height+R,Q,k)){switch(rt.command){case"L":case"Z":O=A(Mt[0],Mt[1],ot[0],ot[1],R,Q,k);break;case"Q":O=E.e.pointDistance(Mt[0],Mt[1],st[1],st[2],st[3],st[4],Q,k)<=R/2;break;case"C":O=E.b.pointDistance(Mt[0],Mt[1],st[1],st[2],st[3],st[4],st[5],st[6],Q,k,g)<=R/2;break;case"A":var xt=rt.arcParams,Ot=xt.cx,jt=xt.cy,Dt=xt.rx,zt=xt.ry,Tt=xt.startAngle,Wt=xt.endAngle,Ht=xt.xRotation,re=[Q,k,1],pe=Dt>zt?Dt:zt,me=Bt(null,[["t",-Ot,-jt],["r",-Ht],["s",1/(Dt>zt?1:Dt/zt),1/(Dt>zt?zt/Dt:1)]]);gt.transformMat3(re,re,me),O=ut(0,0,pe,Tt,Wt,R,re[0],re[1])}if(O)break}}return O}},p.PathUtil);function St(it,_,R){for(var Q=!1,k=0;k<it.length&&!(Q=lt(it[k],_,R));k++);return Q}var K=function(it){function _(){return it!==null&&it.apply(this,arguments)||this}return Object(u.b)(_,it),_.prototype.getDefaultAttrs=function(){var R=it.prototype.getDefaultAttrs.call(this);return Object(u.a)(Object(u.a)({},R),{startArrow:!1,endArrow:!1})},_.prototype.initAttrs=function(R){this._setPathArr(R.path),this.setArrow()},_.prototype.onAttrChange=function(R,Q,k){it.prototype.onAttrChange.call(this,R,Q,k),R==="path"&&this._setPathArr(Q),this.setArrow()},_.prototype._setPathArr=function(R){this.attrs.path=Object(P.c)(R);var Q=Lt.hasArc(R);this.set("hasArc",Q),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},_.prototype.getSegments=function(){var R=this.get("segements");return R||(R=Object(P.d)(this.attr("path")),this.set("segments",R)),R},_.prototype.setArrow=function(){var R=this.attr(),Q=R.startArrow,k=R.endArrow;if(Q){var g=this.getStartTangent();f.b(this,R,g[0][0],g[0][1],g[1][0],g[1][1])}k&&(g=this.getEndTangent(),f.a(this,R,g[0][0],g[0][1],g[1][0],g[1][1]))},_.prototype.isInStrokeOrPath=function(R,Q,k,g,O){var F=this.getSegments(),V=this.get("hasArc"),rt=!1;if(k){var ot=this.getTotalLength();rt=Lt.isPointInStroke(F,O,R,Q,ot)}if(!rt&&g)if(V)rt=$(this,R,Q);else{var st=this.attr("path"),Mt=Lt.extractPolygons(st);rt=St(Mt.polygons,R,Q)||St(Mt.polylines,R,Q)}return rt},_.prototype.createPath=function(R){var Q=this.attr(),k=this.get("paramsCache");Object(c.e)(this,R,Q,k)},_.prototype.afterDrawPath=function(R){var Q=this.get("startArrowShape"),k=this.get("endArrowShape");Q&&Q.draw(R),k&&k.draw(R)},_.prototype.getTotalLength=function(){var R=this.get("totalLength");return Object(j.s)(R)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):R},_.prototype.getPoint=function(R){var Q,k,g=this.get("tCache");g||(this._calculateCurve(),this._setTcache(),g=this.get("tCache"));var O=this.get("curve");if(!g||g.length===0)return O?{x:O[0][1],y:O[0][2]}:null;Object(j.f)(g,function(ot,st){R>=ot[0]&&R<=ot[1]&&(Q=(R-ot[0])/(ot[1]-ot[0]),k=st)});var F=O[k];if(Object(j.s)(F)||Object(j.s)(k))return null;var V=F.length,rt=O[k+1];return E.b.pointAt(F[V-2],F[V-1],rt[1],rt[2],rt[3],rt[4],rt[5],rt[6],Q)},_.prototype._calculateCurve=function(){var R=this.attr().path;this.set("curve",Lt.pathToCurve(R))},_.prototype._setTcache=function(){var R,Q,k,g,O=0,F=0,V=[],rt=this.get("curve");rt&&(Object(j.f)(rt,function(ot,st){k=rt[st+1],g=ot.length,k&&(O+=E.b.length(ot[g-2],ot[g-1],k[1],k[2],k[3],k[4],k[5],k[6])||0)}),this.set("totalLength",O),O!==0?(Object(j.f)(rt,function(ot,st){k=rt[st+1],g=ot.length,k&&((R=[])[0]=F/O,Q=E.b.length(ot[g-2],ot[g-1],k[1],k[2],k[3],k[4],k[5],k[6]),F+=Q||0,R[1]=F/O,V.push(R))}),this.set("tCache",V)):this.set("tCache",[]))},_.prototype.getStartTangent=function(){var R,Q=this.getSegments();if(Q.length>1){var k=Q[0].currentPoint,g=Q[1].currentPoint,O=Q[1].startTangent;R=[],O?(R.push([k[0]-O[0],k[1]-O[1]]),R.push([k[0],k[1]])):(R.push([g[0],g[1]]),R.push([k[0],k[1]]))}return R},_.prototype.getEndTangent=function(){var R,Q=this.getSegments(),k=Q.length;if(k>1){var g=Q[k-2].currentPoint,O=Q[k-1].currentPoint,F=Q[k-1].endTangent;R=[],F?(R.push([O[0]-F[0],O[1]-F[1]]),R.push([O[0],O[1]])):(R.push([g[0],g[1]]),R.push([O[0],O[1]]))}return R},_}(I);function dt(it,_,R,Q,k){var g=it.length;if(g<2)return!1;for(var O=0;O<g-1;O++)if(A(it[O][0],it[O][1],it[O+1][0],it[O+1][1],_,R,Q))return!0;if(k){var F=it[0],V=it[g-1];if(A(F[0],F[1],V[0],V[1],_,R,Q))return!0}return!1}var mt=function(it){function _(){return it!==null&&it.apply(this,arguments)||this}return Object(u.b)(_,it),_.prototype.isInStrokeOrPath=function(R,Q,k,g,O){var F=this.attr().points,V=!1;return k&&(V=dt(F,O,R,Q,!0)),!V&&g&&(V=lt(F,R,Q)),V},_.prototype.createPath=function(R){var Q=this.attr().points;if(!(Q.length<2)){R.beginPath();for(var k=0;k<Q.length;k++){var g=Q[k];k===0?R.moveTo(g[0],g[1]):R.lineTo(g[0],g[1])}R.closePath()}},_}(I),bt=function(it){function _(){return it!==null&&it.apply(this,arguments)||this}return Object(u.b)(_,it),_.prototype.getDefaultAttrs=function(){var R=it.prototype.getDefaultAttrs.call(this);return Object(u.a)(Object(u.a)({},R),{startArrow:!1,endArrow:!1})},_.prototype.initAttrs=function(R){this.setArrow()},_.prototype.onAttrChange=function(R,Q,k){it.prototype.onAttrChange.call(this,R,Q,k),this.setArrow(),["points"].indexOf(R)!==-1&&this._resetCache()},_.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},_.prototype.setArrow=function(){var R=this.attr(),Q=this.attrs,k=Q.points,g=Q.startArrow,O=Q.endArrow,F=k.length,V=k[0][0],rt=k[0][1],ot=k[F-1][0],st=k[F-1][1];g&&f.b(this,R,k[1][0],k[1][1],V,rt),O&&f.a(this,R,k[F-2][0],k[F-2][1],ot,st)},_.prototype.isFill=function(){return!1},_.prototype.isInStrokeOrPath=function(R,Q,k,g,O){return!(!k||!O)&&dt(this.attr().points,O,R,Q,!1)},_.prototype.isStroke=function(){return!0},_.prototype.createPath=function(R){var Q=this.attr(),k=Q.points,g=Q.startArrow,O=Q.endArrow,F=k.length;if(!(k.length<2)){var V,rt=k[0][0],ot=k[0][1],st=k[F-1][0],Mt=k[F-1][1];g&&g.d&&(rt+=(V=f.c(rt,ot,k[1][0],k[1][1],g.d)).dx,ot+=V.dy),O&&O.d&&(st-=(V=f.c(k[F-2][0],k[F-2][1],st,Mt,O.d)).dx,Mt-=V.dy),R.beginPath(),R.moveTo(rt,ot);for(var yt=0;yt<F-1;yt++){var xt=k[yt];R.lineTo(xt[0],xt[1])}R.lineTo(st,Mt)}},_.prototype.afterDrawPath=function(R){var Q=this.get("startArrowShape"),k=this.get("endArrowShape");Q&&Q.draw(R),k&&k.draw(R)},_.prototype.getTotalLength=function(){var R=this.attr().points,Q=this.get("totalLength");return Object(j.s)(Q)?(this.set("totalLength",E.d.length(R)),this.get("totalLength")):Q},_.prototype.getPoint=function(R){var Q,k,g=this.attr().points,O=this.get("tCache");return O||(this._setTcache(),O=this.get("tCache")),Object(j.f)(O,function(F,V){R>=F[0]&&R<=F[1]&&(Q=(R-F[0])/(F[1]-F[0]),k=V)}),E.c.pointAt(g[k][0],g[k][1],g[k+1][0],g[k+1][1],Q)},_.prototype._setTcache=function(){var R=this.attr().points;if(R&&R.length!==0){var Q=this.getTotalLength();if(!(Q<=0)){var k,g,O=0,F=[];Object(j.f)(R,function(V,rt){R[rt+1]&&((k=[])[0]=O/Q,g=E.c.length(V[0],V[1],R[rt+1][0],R[rt+1][1]),O+=g,k[1]=O/Q,F.push(k))}),this.set("tCache",F)}}},_.prototype.getStartTangent=function(){var R=this.attr().points,Q=[];return Q.push([R[1][0],R[1][1]]),Q.push([R[0][0],R[0][1]]),Q},_.prototype.getEndTangent=function(){var R=this.attr().points,Q=R.length-1,k=[];return k.push([R[Q-1][0],R[Q-1][1]]),k.push([R[Q][0],R[Q][1]]),k},_}(I),wt=t(120),J=function(it){function _(){return it!==null&&it.apply(this,arguments)||this}return Object(u.b)(_,it),_.prototype.getDefaultAttrs=function(){var R=it.prototype.getDefaultAttrs.call(this);return Object(u.a)(Object(u.a)({},R),{x:0,y:0,width:0,height:0,radius:0})},_.prototype.isInStrokeOrPath=function(R,Q,k,g,O){var F=this.attr(),V=F.x,rt=F.y,ot=F.width,st=F.height,Mt=F.radius;if(Mt){var yt=!1;return k&&(yt=function(Ot,jt,Dt,zt,Tt,Wt,Ht,re){return A(Ot+Tt,jt,Ot+Dt-Tt,jt,Wt,Ht,re)||A(Ot+Dt,jt+Tt,Ot+Dt,jt+zt-Tt,Wt,Ht,re)||A(Ot+Dt-Tt,jt+zt,Ot+Tt,jt+zt,Wt,Ht,re)||A(Ot,jt+zt-Tt,Ot,jt+Tt,Wt,Ht,re)||ut(Ot+Dt-Tt,jt+Tt,Tt,1.5*Math.PI,2*Math.PI,Wt,Ht,re)||ut(Ot+Dt-Tt,jt+zt-Tt,Tt,0,.5*Math.PI,Wt,Ht,re)||ut(Ot+Tt,jt+zt-Tt,Tt,.5*Math.PI,Math.PI,Wt,Ht,re)||ut(Ot+Tt,jt+Tt,Tt,Math.PI,1.5*Math.PI,Wt,Ht,re)}(V,rt,ot,st,Mt,O,R,Q)),!yt&&g&&(yt=$(this,R,Q)),yt}var xt=O/2;return g&&k?Object(b.e)(V-xt,rt-xt,ot+xt,st+xt,R,Q):g?Object(b.e)(V,rt,ot,st,R,Q):k?function(Ot,jt,Dt,zt,Tt,Wt,Ht){var re=Tt/2;return Object(b.e)(Ot-re,jt-re,Dt,Tt,Wt,Ht)||Object(b.e)(Ot+Dt-re,jt-re,Tt,zt,Wt,Ht)||Object(b.e)(Ot+re,jt+zt-re,Dt,Tt,Wt,Ht)||Object(b.e)(Ot-re,jt+re,Tt,zt,Wt,Ht)}(V,rt,ot,st,O,R,Q):void 0},_.prototype.createPath=function(R){var Q=this.attr(),k=Q.x,g=Q.y,O=Q.width,F=Q.height,V=Q.radius;if(R.beginPath(),V===0)R.rect(k,g,O,F);else{var rt=Object(wt.a)(V),ot=rt[0],st=rt[1],Mt=rt[2],yt=rt[3];R.moveTo(k+ot,g),R.lineTo(k+O-st,g),st!==0&&R.arc(k+O-st,g+st,st,-Math.PI/2,0),R.lineTo(k+O,g+F-Mt),Mt!==0&&R.arc(k+O-Mt,g+F-Mt,Mt,0,Math.PI/2),R.lineTo(k+yt,g+F),yt!==0&&R.arc(k+yt,g+F-yt,yt,Math.PI/2,Math.PI),R.lineTo(k,g+ot),ot!==0&&R.arc(k+ot,g+ot,ot,Math.PI,1.5*Math.PI),R.closePath()}},_}(I),ct=function(it){function _(){return it!==null&&it.apply(this,arguments)||this}return Object(u.b)(_,it),_.prototype.getDefaultAttrs=function(){var R=it.prototype.getDefaultAttrs.call(this);return Object(u.a)(Object(u.a)({},R),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},_.prototype.isOnlyHitBox=function(){return!0},_.prototype.initAttrs=function(R){this._assembleFont(),R.text&&this._setText(R.text)},_.prototype._assembleFont=function(){var R=this.attrs;R.font=Object(p.assembleFont)(R)},_.prototype._setText=function(R){var Q=null;Object(b.k)(R)&&R.indexOf(`
`)!==-1&&(Q=R.split(`
`)),this.set("textArr",Q)},_.prototype.onAttrChange=function(R,Q,k){it.prototype.onAttrChange.call(this,R,Q,k),R.startsWith("font")&&this._assembleFont(),R==="text"&&this._setText(Q)},_.prototype._getSpaceingY=function(){var R=this.attrs,Q=R.lineHeight,k=1*R.fontSize;return Q?Q-k:.14*k},_.prototype._drawTextArr=function(R,Q,k){var g,O=this.attrs,F=O.textBaseline,V=O.x,rt=O.y,ot=1*O.fontSize,st=this._getSpaceingY(),Mt=Object(p.getTextHeight)(O.text,O.fontSize,O.lineHeight);Object(b.c)(Q,function(yt,xt){g=rt+xt*(st+ot)-Mt+ot,F==="middle"&&(g+=Mt-ot-(Mt-ot)/2),F==="top"&&(g+=Mt-ot),k?R.fillText(yt,V,g):R.strokeText(yt,V,g)})},_.prototype._drawText=function(R,Q){var k=this.attr(),g=k.x,O=k.y,F=this.get("textArr");if(F)this._drawTextArr(R,F,Q);else{var V=k.text;Q?R.fillText(V,g,O):R.strokeText(V,g,O)}},_.prototype.strokeAndFill=function(R){var Q=this.attrs,k=Q.lineWidth,g=Q.opacity,O=Q.strokeOpacity,F=Q.fillOpacity;this.isStroke()&&k>0&&(Object(b.i)(O)||O===1||(R.globalAlpha=g),this.stroke(R)),this.isFill()&&(Object(b.i)(F)||F===1?this.fill(R):(R.globalAlpha=F,this.fill(R),R.globalAlpha=g)),this.afterDrawPath(R)},_.prototype.fill=function(R){this._drawText(R,!0)},_.prototype.stroke=function(R){this._drawText(R,!1)},_}(I)},function(i,y,t){var n=t(72),u=t(284),p=t(285),b=n?n.toStringTag:void 0;i.exports=function(c){return c==null?c===void 0?"[object Undefined]":"[object Null]":b&&b in Object(c)?u(c):p(c)}},function(i,y,t){var n=t(167),u=t(130),p=t(53);i.exports=function(b){return p(b)?n(b):u(b)}},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.tagProperty=y.tagParameter=y.decorate=void 0;var n=t(41),u=t(32);function p(S,I,m,r,s){var d={},C=typeof s=="number",E=s!==void 0&&C?s.toString():m;if(C&&m!==void 0)throw new Error(n.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(S,I)&&(d=Reflect.getMetadata(S,I));var A=d[E];if(Array.isArray(A))for(var f=0,x=A;f<x.length;f++){var j=x[f];if(j.key===r.key)throw new Error(n.DUPLICATED_METADATA+" "+j.key.toString())}else A=[];A.push(r),d[E]=A,Reflect.defineMetadata(S,d,I)}function b(S,I){Reflect.decorate(S,I)}function c(S,I){return function(m,r){I(m,r,S)}}y.tagParameter=function(S,I,m,r){p(u.TAGGED,S,I,r,m)},y.tagProperty=function(S,I,m){p(u.TAGGED_PROP,S.constructor,I,m)},y.decorate=function(S,I,m){typeof m=="number"?b([c(m,S)],I):typeof m=="string"?Reflect.decorate([S],I,m):b([S],I)}},function(i,y,t){var n=t(443),u=t(444),p=t(218),b=t(445);i.exports=function(c,S){return n(c)||u(c,S)||p(c,S)||b()}},function(i,y,t){var n=t(57),u=t(48);i.exports=function(p){return typeof p=="number"||u(p)&&n(p)=="[object Number]"}},function(i,y,t){"use strict";t(78),t(18);var n=t(249);t.d(y,"Canvas",function(){return n.a}),t(77)},function(i,y,t){var n=t(236),u=t(235),p=t(243),b=t(150),c=t(244),S=[0,0];i.exports.computeMiter=function(I,m,r,s,d){return n(I,r,s),p(I,I),u(m,-I[1],I[0]),u(S,-r[1],r[0]),d/c(m,S)},i.exports.normal=function(I,m){return u(I,-m[1],m[0]),I},i.exports.direction=function(I,m,r){return b(I,m,r),p(I,I),I}},function(i,y,t){var n=t(283),u=t(288);i.exports=function(p,b){var c=u(p,b);return n(c)?c:void 0}},function(i,y,t){var n=t(167),u=t(308),p=t(53);i.exports=function(b){return p(b)?n(b,!0):u(b)}},function(i,y){i.exports=function(t){return t}},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.id=void 0;var n=0;y.id=function(){return n++}},function(i,y,t){"use strict";t.d(y,"b",function(){return p}),t.d(y,"c",function(){return b}),t.d(y,"a",function(){return c});var n=t(19),u=t(116);function p(S,I,m){var r=1;return Object(n.h)(S)&&(r=S.split(`
`).length),r>1?I*r+function(s,d){return d?d-s:.14*s}(I,m)*(r-1):I}function b(S,I){var m=Object(u.a)(),r=0;if(Object(n.e)(S)||S==="")return r;if(m.save(),m.font=I,Object(n.h)(S)&&S.includes(`
`)){var s=S.split(`
`);Object(n.a)(s,function(d){var C=m.measureText(d).width;r<C&&(r=C)})}else r=m.measureText(S).width;return m.restore(),r}function c(S){var I=S.fontSize,m=S.fontFamily,r=S.fontWeight;return[S.fontStyle,S.fontVariant,r,I+"px",m].join(" ").trim()}},function(i,y,t){"use strict";t.d(y,"a",function(){return ao}),t.d(y,"b",function(){return go});var n,u,p=function(z){return typeof z=="string"},b=/-(\w)/g,c=(n=function(z){return z.replace(b,function(T,B){return B?B.toUpperCase():""})},u=Object.create(null),Array.isArray),S=function(z){return typeof z=="number"},I=function(z){return Number.isNaN(Number(z))},m=function(z,T,B){for(var tt=[],It=0;It<z;It++)tt[It]=0;return B&&B.forEach(function(Nt){Nt.source&&(tt[T[Nt.source]]+=1),Nt.target&&(tt[T[Nt.target]]+=1)}),tt},r=function(z){for(var T=[],B=z.length,tt=0;tt<B;tt+=1){T[tt]=[];for(var It=0;It<B;It+=1)tt===It?T[tt][It]=0:z[tt][It]!==0&&z[tt][It]?T[tt][It]=z[tt][It]:T[tt][It]=1/0}for(var Nt=0;Nt<B;Nt+=1)for(var q=0;q<B;q+=1)for(var Rt=0;Rt<B;Rt+=1)T[q][Rt]>T[q][Nt]+T[Nt][Rt]&&(T[q][Rt]=T[q][Nt]+T[Nt][Rt]);return T},s=function(z,T){var B=z.nodes,tt=z.edges,It=[],Nt={};if(!B)throw new Error("invalid nodes data!");return B&&B.forEach(function(q,Rt){Nt[q.id]=Rt,It.push([])}),tt&&tt.forEach(function(q){var Rt=q.source,Qt=q.target,ee=Nt[Rt],xe=Nt[Qt];It[ee][xe]=1,T||(It[xe][ee]=1)}),It},d=function(z,T){typeof T=="function"&&function B(tt,It){if(tt&&tt.children){for(var Nt=tt.children.length-1;Nt>=0;Nt--)if(!B(tt.children[Nt],It))return}return!!It(tt)}(z,T)};function C(et){return(C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(et)}var E=function et(z){if(z===null)return z;if(z instanceof Date)return new Date(z.getTime());if(z instanceof Array){var T=[];return z.forEach(function(tt){T.push(tt)}),T.map(function(tt){return et(tt)})}if(C(z)==="object"&&z!=={}){var B=Object.assign({},z);return Object.keys(B).forEach(function(tt){B[tt]=et(B[tt])}),B}return z},A=function(z){return typeof z=="function"};function f(et,z){for(var T=0;T<z.length;T++){var B=z[T];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(et,B.key,B)}}var x=function(){function et(){(function(tt,It){if(!(tt instanceof It))throw new TypeError("Cannot call a class as a function")})(this,et),this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}var z,T,B;return z=et,(T=[{key:"layout",value:function(It){return this.init(It),this.execute(!0)}},{key:"init",value:function(It){this.nodes=It.nodes||[],this.edges=It.edges||[],this.combos=It.combos||[]}},{key:"execute",value:function(It){}},{key:"executeWithWorker",value:function(){}},{key:"getDefaultCfg",value:function(){return{}}},{key:"updateCfg",value:function(It){It&&Object.assign(this,It)}},{key:"getType",value:function(){return"base"}},{key:"destroy",value:function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}])&&f(z.prototype,T),B&&f(z,B),et}();function j(et){return(j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(et)}function P(et,z){for(var T=0;T<z.length;T++){var B=z[T];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(et,B.key,B)}}function W(et,z){return(W=Object.setPrototypeOf||function(T,B){return T.__proto__=B,T})(et,z)}function X(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=ft(et);if(z){var tt=ft(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return $(this,T)}}function $(et,z){return!z||j(z)!=="object"&&typeof z!="function"?function(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}(et):z}function ft(et){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(et)}var Z=function(et){(function(Nt,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(q&&q.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),q&&W(Nt,q)})(It,et);var z,T,B,tt=X(It);function It(Nt){var q;return function(Rt,Qt){if(!(Rt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(q=tt.call(this)).begin=[0,0],q.preventOverlap=!0,q.preventOverlapPadding=10,q.condense=!1,q.sortBy="degree",q.nodeSize=30,q.nodes=[],q.edges=[],q.width=300,q.height=300,q.row=0,q.col=0,q.cellWidth=0,q.cellHeight=0,q.cellUsed={},q.id2manPos={},q.onLayoutEnd=function(){},q.updateCfg(Nt),q}return z=It,(T=[{key:"getDefaultCfg",value:function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}},{key:"execute",value:function(){var q=this,Rt=q.nodes,Qt=Rt.length,ee=q.begin;if(Qt!==0){if(Qt===1)return Rt[0].x=ee[0],Rt[0].y=ee[1],void(q.onLayoutEnd&&q.onLayoutEnd());var xe=q.edges,Pe=[];Rt.forEach(function(lr){Pe.push(lr)});var He={};if(Pe.forEach(function(lr,Ar){He[lr.id]=Ar}),(q.sortBy==="degree"||!p(q.sortBy)||Pe[0][q.sortBy]===void 0)&&(q.sortBy="degree",I(Rt[0].degree))){var Be=m(Pe.length,He,xe);Pe.forEach(function(lr,Ar){lr.degree=Be[Ar]})}Pe.sort(function(lr,Ar){return Ar[q.sortBy]-lr[q.sortBy]}),q.width||typeof window=="undefined"||(q.width=window.innerWidth),q.height||typeof window=="undefined"||(q.height=window.innerHeight);var Ke=q.rows,Qe=q.cols!=null?q.cols:q.columns;if(q.cells=Qt,Ke!=null&&Qe!=null?(q.rows=Ke,q.cols=Qe):Ke!=null&&Qe==null?(q.rows=Ke,q.cols=Math.ceil(q.cells/q.rows)):Ke==null&&Qe!=null?(q.cols=Qe,q.rows=Math.ceil(q.cells/q.cols)):(q.splits=Math.sqrt(q.cells*q.height/q.width),q.rows=Math.round(q.splits),q.cols=Math.round(q.width/q.height*q.splits)),q.cols*q.rows>q.cells){var ze=q.small(),en=q.large();(ze-1)*en>=q.cells?q.small(ze-1):(en-1)*ze>=q.cells&&q.large(en-1)}else for(;q.cols*q.rows<q.cells;){var wn=q.small(),zn=q.large();(zn+1)*wn>=q.cells?q.large(zn+1):q.small(wn+1)}q.cellWidth=q.width/q.cols,q.cellHeight=q.height/q.rows,q.condense&&(q.cellWidth=0,q.cellHeight=0),q.preventOverlap&&Pe.forEach(function(lr){var Ar,Nr;lr.x&&lr.y||(lr.x=0,lr.y=0),c(lr.size)?(Ar=lr.size[0],Nr=lr.size[1]):S(lr.size)&&(Ar=lr.size,Nr=lr.size),Ar!==void 0&&Nr!==void 0||(c(q.nodeSize)?(Ar=q.nodeSize[0],Nr=q.nodeSize[1]):S(q.nodeSize)?(Ar=q.nodeSize,Nr=q.nodeSize):(Ar=30,Nr=30));var Dr=q.preventOverlapPadding,Tr=Ar+Dr,Xr=Nr+Dr;q.cellWidth=Math.max(q.cellWidth,Tr),q.cellHeight=Math.max(q.cellHeight,Xr)}),q.cellUsed={},q.row=0,q.col=0,q.id2manPos={};for(var In=0;In<Pe.length;In++){var Xn=Pe[In],cr=void 0;if(q.position&&(cr=q.position(Xn)),cr&&(cr.row!==void 0||cr.col!==void 0)){var or={row:cr.row,col:cr.col};if(or.col===void 0)for(or.col=0;q.used(or.row,or.col);)or.col++;else if(or.row===void 0)for(or.row=0;q.used(or.row,or.col);)or.row++;q.id2manPos[Xn.id]=or,q.use(or.row,or.col)}q.getPos(Xn)}return q.onLayoutEnd&&q.onLayoutEnd(),{edges:xe,nodes:Pe}}q.onLayoutEnd&&q.onLayoutEnd()}},{key:"small",value:function(q){var Rt,Qt=this.rows||5,ee=this.cols||5;return q==null?Rt=Math.min(Qt,ee):Math.min(Qt,ee)===this.rows?this.rows=q:this.cols=q,Rt}},{key:"large",value:function(q){var Rt,Qt=this.rows||5,ee=this.cols||5;return q==null?Rt=Math.max(Qt,ee):Math.max(Qt,ee)===this.rows?this.rows=q:this.cols=q,Rt}},{key:"used",value:function(q,Rt){return this.cellUsed["c-".concat(q,"-").concat(Rt)]||!1}},{key:"use",value:function(q,Rt){this.cellUsed["c-".concat(q,"-").concat(Rt)]=!0}},{key:"moveToNextCell",value:function(){var q=this.cols||5;this.col++,this.col>=q&&(this.col=0,this.row++)}},{key:"getPos",value:function(q){var Rt,Qt,ee=this.begin,xe=this.cellWidth,Pe=this.cellHeight,He=this.id2manPos[q.id];if(He)Rt=He.col*xe+xe/2+ee[0],Qt=He.row*Pe+Pe/2+ee[1];else{for(;this.used(this.row,this.col);)this.moveToNextCell();Rt=this.col*xe+xe/2+ee[0],Qt=this.row*Pe+Pe/2+ee[1],this.use(this.row,this.col),this.moveToNextCell()}q.x=Rt,q.y=Qt}},{key:"getType",value:function(){return"grid"}}])&&P(z.prototype,T),B&&P(z,B),It}(x);function lt(et){return(lt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(et)}function pt(et,z){for(var T=0;T<z.length;T++){var B=z[T];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(et,B.key,B)}}function gt(et,z){return(gt=Object.setPrototypeOf||function(T,B){return T.__proto__=B,T})(et,z)}function ut(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=Lt(et);if(z){var tt=Lt(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return Bt(this,T)}}function Bt(et,z){return!z||lt(z)!=="object"&&typeof z!="function"?function(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}(et):z}function Lt(et){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(et)}var St=function(et){(function(Nt,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(q&&q.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),q&&gt(Nt,q)})(It,et);var z,T,B,tt=ut(It);function It(Nt){var q;return function(Rt,Qt){if(!(Rt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(q=tt.call(this)).center=[0,0],q.width=300,q.height=300,q.nodes=[],q.edges=[],q.onLayoutEnd=function(){},q.updateCfg(Nt),q}return z=It,(T=[{key:"getDefaultCfg",value:function(){return{center:[0,0],width:300,height:300}}},{key:"execute",value:function(){var q=this,Rt=q.nodes,Qt=q.center;return q.width||typeof window=="undefined"||(q.width=window.innerWidth),q.height||typeof window=="undefined"||(q.height=window.innerHeight),Rt&&Rt.forEach(function(ee){ee.x=.9*(Math.random()-.5)*q.width+Qt[0],ee.y=.9*(Math.random()-.5)*q.height+Qt[1]}),q.onLayoutEnd&&q.onLayoutEnd(),{nodes:Rt,edges:this.edges}}},{key:"getType",value:function(){return"random"}}])&&pt(z.prototype,T),B&&pt(z,B),It}(x);function K(et){return(K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(et)}function dt(et,z){for(var T=0;T<z.length;T++){var B=z[T];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(et,B.key,B)}}function mt(et,z){return(mt=Object.setPrototypeOf||function(T,B){return T.__proto__=B,T})(et,z)}function bt(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=J(et);if(z){var tt=J(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return wt(this,T)}}function wt(et,z){return!z||K(z)!=="object"&&typeof z!="function"?function(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}(et):z}function J(et){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(et)}var ct=function(z,T){return z?S(z)?function(B){return z}:z:function(B){return T||1}},it=function(et){(function(Nt,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(q&&q.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),q&&mt(Nt,q)})(It,et);var z,T,B,tt=bt(It);function It(Nt){var q;return function(Rt,Qt){if(!(Rt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(q=tt.call(this)).maxIteration=1e3,q.edgeStrength=200,q.nodeStrength=1e3,q.coulombDisScale=.005,q.damping=.9,q.maxSpeed=1e3,q.minMovement=.5,q.interval=.02,q.factor=1,q.linkDistance=1,q.gravity=10,q.preventOverlap=!0,q.tick=function(){},q.nodes=[],q.edges=[],q.width=300,q.height=300,q.nodeMap={},q.nodeIdxMap={},q.updateCfg(Nt),q}return z=It,(T=[{key:"getDefaultCfg",value:function(){return{maxIteration:500,gravity:10,enableTick:!0}}},{key:"execute",value:function(){var q=this,Rt=q.nodes;if(q.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(q.timeInterval),Rt&&Rt.length!==0){q.width||typeof window=="undefined"||(q.width=window.innerWidth),q.height||typeof window=="undefined"||(q.height=window.innerHeight),q.center||(q.center=[q.width/2,q.height/2]);var Qt=q.center;if(Rt.length===1)return Rt[0].x=Qt[0],Rt[0].y=Qt[1],void(q.onLayoutEnd&&q.onLayoutEnd());var ee={},xe={};Rt.forEach(function(ze,en){S(ze.x)||(ze.x=Math.random()*q.width),S(ze.y)||(ze.y=Math.random()*q.height),ee[ze.id]=ze,xe[ze.id]=en}),q.nodeMap=ee,q.nodeIdxMap=xe,q.linkDistance=ct(q.linkDistance,1),q.nodeStrength=ct(q.nodeStrength,1),q.edgeStrength=ct(q.edgeStrength,1);var Pe,He=q.nodeSize;if(q.preventOverlap){var Be,Ke=q.nodeSpacing;Be=S(Ke)?function(){return Ke}:A(Ke)?Ke:function(){return 0},Pe=He?c(He)?function(ze){return(He[0]>He[1]?He[0]:He[1])+Be(ze)}:function(ze){return He+Be(ze)}:function(ze){return ze.size?c(ze.size)?(ze.size[0]>ze.size[1]?ze.size[0]:ze.size[1])+Be(ze):ze.size+Be(ze):10+Be(ze)}}q.nodeSize=Pe;var Qe=q.edges;q.degrees=m(Rt.length,q.nodeIdxMap,Qe),q.getMass||(q.getMass=function(ze){return q.degrees[q.nodeIdxMap[ze.id]]}),q.run()}else q.onLayoutEnd&&q.onLayoutEnd()}},{key:"run",value:function(){var q=this,Rt=q.nodes,Qt=q.edges,ee=q.maxIteration;if(typeof window!="undefined"){var xe=0;this.timeInterval=window.setInterval(function(){var Pe=[],He=[];if(Rt){Rt.forEach(function(ze,en){Pe[2*en]=0,Pe[2*en+1]=0,He[2*en]=0,He[2*en+1]=0}),q.calRepulsive(Pe,Rt),Qt&&q.calAttractive(Pe,Qt),q.calGravity(Pe,Rt);var Be=Math.max(.02,q.interval-.002*xe);q.updateVelocity(Pe,He,Be,Rt);var Ke=[];Rt.forEach(function(ze){Ke.push({x:ze.x,y:ze.y})}),q.updatePosition(He,Be,Rt),q.tick&&q.tick();var Qe=0;Rt.forEach(function(ze,en){var wn=ze.x-Ke[en].x,zn=ze.y-Ke[en].y;Qe+=Math.sqrt(wn*wn+zn*zn)}),(Qe/=Rt.length)<q.minMovement&&(window.clearInterval(q.timeInterval),q.onLayoutEnd&&q.onLayoutEnd()),++xe>ee&&(window.clearInterval(q.timeInterval),q.onLayoutEnd&&q.onLayoutEnd())}},0)}}},{key:"calRepulsive",value:function(q,Rt){var Qt=this.getMass,ee=this.nodeStrength,xe=this.factor,Pe=this.coulombDisScale,He=this.preventOverlap,Be=this.nodeSize;Rt.forEach(function(Ke,Qe){var ze=Qt?Qt(Ke):1;Rt.forEach(function(en,wn){if(!(Qe>=wn)){var zn=Ke.x-en.x,In=Ke.y-en.y,Xn=Math.sqrt(zn*zn+In*In)+.01,cr=(Xn+.1)*Pe,or=zn/Xn,lr=In/Xn,Ar=(ee(Ke)+ee(en))/2*xe/(cr*cr),Nr=Qt?Qt(en):1;if(q[2*Qe]+=or*Ar/ze,q[2*Qe+1]+=lr*Ar/ze,q[2*wn]-=or*Ar/Nr,q[2*wn+1]-=lr*Ar/Nr,He&&Xn<(Be(Ke)+Be(en))/2){var Dr=(ee(Ke)+ee(en))/2/(Xn*Xn);q[2*Qe]+=or*Dr/ze,q[2*Qe+1]+=lr*Dr/ze,q[2*wn]-=or*Dr/Nr,q[2*wn+1]-=lr*Dr/Nr}}})})}},{key:"calAttractive",value:function(q,Rt){var Qt=this.nodeMap,ee=this.nodeIdxMap,xe=this.linkDistance,Pe=this.edgeStrength,He=this.getMass;Rt.forEach(function(Be,Ke){var Qe=Qt[Be.source],ze=Qt[Be.target],en=ze.x-Qe.x,wn=ze.y-Qe.y,zn=Math.sqrt(en*en+wn*wn)+.01,In=en/zn,Xn=wn/zn,cr=((xe(Be)||1)-zn)*Pe(Be),or=ee[Be.source],lr=ee[Be.target],Ar=He?He(Qe):1,Nr=He?He(ze):1;q[2*or]-=In*cr/Ar,q[2*or+1]-=Xn*cr/Ar,q[2*lr]+=In*cr/Nr,q[2*lr+1]+=Xn*cr/Nr})}},{key:"calGravity",value:function(q,Rt){for(var Qt=this.center,ee=this.gravity,xe=this.degrees,Pe=Rt.length,He=0;He<Pe;He++){var Be=Rt[He],Ke=Be.x-Qt[0],Qe=Be.y-Qt[1],ze=ee;if(this.getCenter){var en=this.getCenter(Be,xe[He]);en&&S(en[0])&&S(en[1])&&S(en[2])&&(Ke=Be.x-en[0],Qe=Be.y-en[1],ze=en[2])}ze&&(q[2*He]-=ze*Ke,q[2*He+1]-=ze*Qe)}}},{key:"updateVelocity",value:function(q,Rt,Qt,ee){var xe=this,Pe=Qt*xe.damping;ee.forEach(function(He,Be){var Ke=q[2*Be]*Pe||.01,Qe=q[2*Be+1]*Pe||.01,ze=Math.sqrt(Ke*Ke+Qe*Qe);if(ze>xe.maxSpeed){var en=xe.maxSpeed/ze;Ke*=en,Qe*=en}Rt[2*Be]=Ke,Rt[2*Be+1]=Qe})}},{key:"updatePosition",value:function(q,Rt,Qt){Qt.forEach(function(ee,xe){var Pe=q[2*xe]*Rt,He=q[2*xe+1]*Rt;ee.x+=Pe,ee.y+=He})}},{key:"stop",value:function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}},{key:"destroy",value:function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0}},{key:"getType",value:function(){return"gForce"}}])&&dt(z.prototype,T),B&&dt(z,B),It}(x);function _(et,z,T,B){if(isNaN(z)||isNaN(T))return et;var tt,It,Nt,q,Rt,Qt,ee,xe,Pe,He=et._root,Be={data:B},Ke=et._x0,Qe=et._y0,ze=et._x1,en=et._y1;if(!He)return et._root=Be,et;for(;He.length;)if((Qt=z>=(It=(Ke+ze)/2))?Ke=It:ze=It,(ee=T>=(Nt=(Qe+en)/2))?Qe=Nt:en=Nt,tt=He,!(He=He[xe=ee<<1|Qt]))return tt[xe]=Be,et;if(q=+et._x.call(null,He.data),Rt=+et._y.call(null,He.data),z===q&&T===Rt)return Be.next=He,tt?tt[xe]=Be:et._root=Be,et;do tt=tt?tt[xe]=new Array(4):et._root=new Array(4),(Qt=z>=(It=(Ke+ze)/2))?Ke=It:ze=It,(ee=T>=(Nt=(Qe+en)/2))?Qe=Nt:en=Nt;while((xe=ee<<1|Qt)==(Pe=(Rt>=Nt)<<1|q>=It));return tt[Pe]=He,tt[xe]=Be,et}var R=function(z,T,B,tt,It){this.node=z,this.x0=T,this.y0=B,this.x1=tt,this.y1=It};function Q(et){return et[0]}function k(et){return et[1]}function g(et,z,T){var B=new O(z==null?Q:z,T==null?k:T,NaN,NaN,NaN,NaN);return et==null?B:B.addAll(et)}function O(et,z,T,B,tt,It){this._x=et,this._y=z,this._x0=T,this._y0=B,this._x1=tt,this._y1=It,this._root=void 0}function F(et){for(var z={data:et.data},T=z;et=et.next;)T=T.next={data:et.data};return z}var V=g.prototype=O.prototype;V.copy=function(){var et,z,T=new O(this._x,this._y,this._x0,this._y0,this._x1,this._y1),B=this._root;if(!B)return T;if(!B.length)return T._root=F(B),T;for(et=[{source:B,target:T._root=new Array(4)}];B=et.pop();)for(var tt=0;tt<4;++tt)(z=B.source[tt])&&(z.length?et.push({source:z,target:B.target[tt]=new Array(4)}):B.target[tt]=F(z));return T},V.add=function(et){var z=+this._x.call(null,et),T=+this._y.call(null,et);return _(this.cover(z,T),z,T,et)},V.addAll=function(et){var z,T,B,tt,It=et.length,Nt=new Array(It),q=new Array(It),Rt=1/0,Qt=1/0,ee=-1/0,xe=-1/0;for(T=0;T<It;++T)isNaN(B=+this._x.call(null,z=et[T]))||isNaN(tt=+this._y.call(null,z))||(Nt[T]=B,q[T]=tt,B<Rt&&(Rt=B),B>ee&&(ee=B),tt<Qt&&(Qt=tt),tt>xe&&(xe=tt));if(Rt>ee||Qt>xe)return this;for(this.cover(Rt,Qt).cover(ee,xe),T=0;T<It;++T)_(this,Nt[T],q[T],et[T]);return this},V.cover=function(et,z){if(isNaN(et=+et)||isNaN(z=+z))return this;var T=this._x0,B=this._y0,tt=this._x1,It=this._y1;if(isNaN(T))tt=(T=Math.floor(et))+1,It=(B=Math.floor(z))+1;else{for(var Nt,q,Rt=tt-T||1,Qt=this._root;T>et||et>=tt||B>z||z>=It;)switch(q=(z<B)<<1|et<T,(Nt=new Array(4))[q]=Qt,Qt=Nt,Rt*=2,q){case 0:tt=T+Rt,It=B+Rt;break;case 1:T=tt-Rt,It=B+Rt;break;case 2:tt=T+Rt,B=It-Rt;break;case 3:T=tt-Rt,B=It-Rt}this._root&&this._root.length&&(this._root=Qt)}return this._x0=T,this._y0=B,this._x1=tt,this._y1=It,this},V.data=function(){var et=[];return this.visit(function(z){if(!z.length)do et.push(z.data);while(z=z.next)}),et},V.extent=function(et){return arguments.length?this.cover(+et[0][0],+et[0][1]).cover(+et[1][0],+et[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},V.find=function(et,z,T){var B,tt,It,Nt,q,Rt,Qt,ee=this._x0,xe=this._y0,Pe=this._x1,He=this._y1,Be=[],Ke=this._root;for(Ke&&Be.push(new R(Ke,ee,xe,Pe,He)),T==null?T=1/0:(ee=et-T,xe=z-T,Pe=et+T,He=z+T,T*=T);Rt=Be.pop();)if(!(!(Ke=Rt.node)||(tt=Rt.x0)>Pe||(It=Rt.y0)>He||(Nt=Rt.x1)<ee||(q=Rt.y1)<xe))if(Ke.length){var Qe=(tt+Nt)/2,ze=(It+q)/2;Be.push(new R(Ke[3],Qe,ze,Nt,q),new R(Ke[2],tt,ze,Qe,q),new R(Ke[1],Qe,It,Nt,ze),new R(Ke[0],tt,It,Qe,ze)),(Qt=(z>=ze)<<1|et>=Qe)&&(Rt=Be[Be.length-1],Be[Be.length-1]=Be[Be.length-1-Qt],Be[Be.length-1-Qt]=Rt)}else{var en=et-+this._x.call(null,Ke.data),wn=z-+this._y.call(null,Ke.data),zn=en*en+wn*wn;if(zn<T){var In=Math.sqrt(T=zn);ee=et-In,xe=z-In,Pe=et+In,He=z+In,B=Ke.data}}return B},V.remove=function(et){if(isNaN(It=+this._x.call(null,et))||isNaN(Nt=+this._y.call(null,et)))return this;var z,T,B,tt,It,Nt,q,Rt,Qt,ee,xe,Pe,He=this._root,Be=this._x0,Ke=this._y0,Qe=this._x1,ze=this._y1;if(!He)return this;if(He.length)for(;;){if((Qt=It>=(q=(Be+Qe)/2))?Be=q:Qe=q,(ee=Nt>=(Rt=(Ke+ze)/2))?Ke=Rt:ze=Rt,z=He,!(He=He[xe=ee<<1|Qt]))return this;if(!He.length)break;(z[xe+1&3]||z[xe+2&3]||z[xe+3&3])&&(T=z,Pe=xe)}for(;He.data!==et;)if(B=He,!(He=He.next))return this;return(tt=He.next)&&delete He.next,B?(tt?B.next=tt:delete B.next,this):z?(tt?z[xe]=tt:delete z[xe],(He=z[0]||z[1]||z[2]||z[3])&&He===(z[3]||z[2]||z[1]||z[0])&&!He.length&&(T?T[Pe]=He:this._root=He),this):(this._root=tt,this)},V.removeAll=function(et){for(var z=0,T=et.length;z<T;++z)this.remove(et[z]);return this},V.root=function(){return this._root},V.size=function(){var et=0;return this.visit(function(z){if(!z.length)do++et;while(z=z.next)}),et},V.visit=function(et){var z,T,B,tt,It,Nt,q=[],Rt=this._root;for(Rt&&q.push(new R(Rt,this._x0,this._y0,this._x1,this._y1));z=q.pop();)if(!et(Rt=z.node,B=z.x0,tt=z.y0,It=z.x1,Nt=z.y1)&&Rt.length){var Qt=(B+It)/2,ee=(tt+Nt)/2;(T=Rt[3])&&q.push(new R(T,Qt,ee,It,Nt)),(T=Rt[2])&&q.push(new R(T,B,ee,Qt,Nt)),(T=Rt[1])&&q.push(new R(T,Qt,tt,It,ee)),(T=Rt[0])&&q.push(new R(T,B,tt,Qt,ee))}return this},V.visitAfter=function(et){var z,T=[],B=[];for(this._root&&T.push(new R(this._root,this._x0,this._y0,this._x1,this._y1));z=T.pop();){var tt=z.node;if(tt.length){var It,Nt=z.x0,q=z.y0,Rt=z.x1,Qt=z.y1,ee=(Nt+Rt)/2,xe=(q+Qt)/2;(It=tt[0])&&T.push(new R(It,Nt,q,ee,xe)),(It=tt[1])&&T.push(new R(It,ee,q,Rt,xe)),(It=tt[2])&&T.push(new R(It,Nt,xe,ee,Qt)),(It=tt[3])&&T.push(new R(It,ee,xe,Rt,Qt))}B.push(z)}for(;z=B.pop();)et(z.node,z.x0,z.y0,z.x1,z.y1);return this},V.x=function(et){return arguments.length?(this._x=et,this):this._x},V.y=function(et){return arguments.length?(this._y=et,this):this._y};var rt=function(z){return function(){return z}},ot=function(z){return 1e-6*(z()-.5)},st={value:function(){}};function Mt(){for(var et,z=0,T=arguments.length,B={};z<T;++z){if(!(et=arguments[z]+"")||et in B||/[\s.]/.test(et))throw new Error("illegal type: "+et);B[et]=[]}return new yt(B)}function yt(et){this._=et}function xt(et,z){return et.trim().split(/^|\s+/).map(function(T){var B="",tt=T.indexOf(".");if(tt>=0&&(B=T.slice(tt+1),T=T.slice(0,tt)),T&&!z.hasOwnProperty(T))throw new Error("unknown type: "+T);return{type:T,name:B}})}function Ot(et,z){for(var T,B=0,tt=et.length;B<tt;++B)if((T=et[B]).name===z)return T.value}function jt(et,z,T){for(var B=0,tt=et.length;B<tt;++B)if(et[B].name===z){et[B]=st,et=et.slice(0,B).concat(et.slice(B+1));break}return T!=null&&et.push({name:z,value:T}),et}yt.prototype=Mt.prototype={constructor:yt,on:function(z,T){var B,tt=this._,It=xt(z+"",tt),Nt=-1,q=It.length;if(!(arguments.length<2)){if(T!=null&&typeof T!="function")throw new Error("invalid callback: "+T);for(;++Nt<q;)if(B=(z=It[Nt]).type)tt[B]=jt(tt[B],z.name,T);else if(T==null)for(B in tt)tt[B]=jt(tt[B],z.name,null);return this}for(;++Nt<q;)if((B=(z=It[Nt]).type)&&(B=Ot(tt[B],z.name)))return B},copy:function(){var z={},T=this._;for(var B in T)z[B]=T[B].slice();return new yt(z)},call:function(z,T){if((B=arguments.length-2)>0)for(var B,tt,It=new Array(B),Nt=0;Nt<B;++Nt)It[Nt]=arguments[Nt+2];if(!this._.hasOwnProperty(z))throw new Error("unknown type: "+z);for(Nt=0,B=(tt=this._[z]).length;Nt<B;++Nt)tt[Nt].value.apply(T,It)},apply:function(z,T,B){if(!this._.hasOwnProperty(z))throw new Error("unknown type: "+z);for(var tt=this._[z],It=0,Nt=tt.length;It<Nt;++It)tt[It].value.apply(T,B)}};var Dt=Mt;function zt(et){return(zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(et)}var Tt,Wt,Ht=0,re=0,pe=0,me=0,Se=0,Le=0,Je=(typeof performance=="undefined"?"undefined":zt(performance))==="object"&&performance.now?performance:Date,On=(typeof window=="undefined"?"undefined":zt(window))==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(et){setTimeout(et,17)};function gn(){return Se||(On(Wn),Se=Je.now()+Le)}function Wn(){Se=0}function kn(){this._call=this._time=this._next=null}function Vn(et,z,T){var B=new kn;return B.restart(et,z,T),B}function Dn(){Se=(me=Je.now())+Le,Ht=re=0;try{(function(){gn(),++Ht;for(var et,z=Tt;z;)(et=Se-z._time)>=0&&z._call.call(null,et),z=z._next;--Ht})()}finally{Ht=0,function(){for(var et,z,T=Tt,B=1/0;T;)T._call?(B>T._time&&(B=T._time),et=T,T=T._next):(z=T._next,T._next=null,T=et?et._next=z:Tt=z);Wt=et,Qn(B)}(),Se=0}}function Nn(){var et=Je.now(),z=et-me;z>1e3&&(Le-=z,me=et)}function Qn(et){Ht||(re&&(re=clearTimeout(re)),et-Se>24?(et<1/0&&(re=setTimeout(Dn,et-Je.now()-Le)),pe&&(pe=clearInterval(pe))):(pe||(me=Je.now(),pe=setInterval(Nn,1e3)),Ht=1,On(Dn)))}kn.prototype=Vn.prototype={constructor:kn,restart:function(z,T,B){if(typeof z!="function")throw new TypeError("callback is not a function");B=(B==null?gn():+B)+(T==null?0:+T),this._next||Wt===this||(Wt?Wt._next=this:Tt=this,Wt=this),this._call=z,this._time=B,Qn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Qn())}};function ir(et){return et.x}function hr(et){return et.y}var Sr=Math.PI*(3-Math.sqrt(5)),mr=function(z){var T,B,tt=1,It=.001,Nt=1-Math.pow(It,1/300),q=0,Rt=.6,Qt=new Map,ee=Vn(He),xe=Dt("tick","end"),Pe=(B=1,function(){return(B=(1664525*B+1013904223)%4294967296)/4294967296});function He(){Be(),xe.call("tick",T),tt<It&&(ee.stop(),xe.call("end",T))}function Be(ze){var en,wn,zn=z.length;ze===void 0&&(ze=1);for(var In=0;In<ze;++In)for(tt+=(q-tt)*Nt,Qt.forEach(function(Xn){Xn(tt)}),en=0;en<zn;++en)(wn=z[en]).fx==null?wn.x+=wn.vx*=Rt:(wn.x=wn.fx,wn.vx=0),wn.fy==null?wn.y+=wn.vy*=Rt:(wn.y=wn.fy,wn.vy=0);return T}function Ke(){for(var ze,en=0,wn=z.length;en<wn;++en){if((ze=z[en]).index=en,ze.fx!=null&&(ze.x=ze.fx),ze.fy!=null&&(ze.y=ze.fy),isNaN(ze.x)||isNaN(ze.y)){var zn=10*Math.sqrt(.5+en),In=en*Sr;ze.x=zn*Math.cos(In),ze.y=zn*Math.sin(In)}(isNaN(ze.vx)||isNaN(ze.vy))&&(ze.vx=ze.vy=0)}}function Qe(ze){return ze.initialize&&ze.initialize(z,Pe),ze}return z==null&&(z=[]),Ke(),T={tick:Be,restart:function(){return ee.restart(He),T},stop:function(){return ee.stop(),T},nodes:function(en){return arguments.length?(z=en,Ke(),Qt.forEach(Qe),T):z},alpha:function(en){return arguments.length?(tt=+en,T):tt},alphaMin:function(en){return arguments.length?(It=+en,T):It},alphaDecay:function(en){return arguments.length?(Nt=+en,T):+Nt},alphaTarget:function(en){return arguments.length?(q=+en,T):q},velocityDecay:function(en){return arguments.length?(Rt=1-en,T):1-Rt},randomSource:function(en){return arguments.length?(Pe=en,Qt.forEach(Qe),T):Pe},force:function(en,wn){return arguments.length>1?(wn==null?Qt.delete(en):Qt.set(en,Qe(wn)),T):Qt.get(en)},find:function(en,wn,zn){var In,Xn,cr,or,lr,Ar=0,Nr=z.length;for(zn==null?zn=1/0:zn*=zn,Ar=0;Ar<Nr;++Ar)(cr=(In=en-(or=z[Ar]).x)*In+(Xn=wn-or.y)*Xn)<zn&&(lr=or,zn=cr);return lr},on:function(en,wn){return arguments.length>1?(xe.on(en,wn),T):xe.on(en)}}},dr=function(){var z,T,B,tt,It,Nt=rt(-30),q=1,Rt=1/0,Qt=.81;function ee(Be){var Ke,Qe=z.length,ze=g(z,ir,hr).visitAfter(Pe);for(tt=Be,Ke=0;Ke<Qe;++Ke)T=z[Ke],ze.visit(He)}function xe(){if(z){var Be,Ke,Qe=z.length;for(It=new Array(Qe),Be=0;Be<Qe;++Be)Ke=z[Be],It[Ke.index]=+Nt(Ke,Be,z)}}function Pe(Be){var Ke,Qe,ze,en,wn,zn=0,In=0;if(Be.length){for(ze=en=wn=0;wn<4;++wn)(Ke=Be[wn])&&(Qe=Math.abs(Ke.value))&&(zn+=Ke.value,In+=Qe,ze+=Qe*Ke.x,en+=Qe*Ke.y);Be.x=ze/In,Be.y=en/In}else{(Ke=Be).x=Ke.data.x,Ke.y=Ke.data.y;do zn+=It[Ke.data.index];while(Ke=Ke.next)}Be.value=zn}function He(Be,Ke,Qe,ze){if(!Be.value)return!0;var en=Be.x-T.x,wn=Be.y-T.y,zn=ze-Ke,In=en*en+wn*wn;if(zn*zn/Qt<In)return In<Rt&&(en===0&&(In+=(en=ot(B))*en),wn===0&&(In+=(wn=ot(B))*wn),In<q&&(In=Math.sqrt(q*In)),T.vx+=en*Be.value*tt/In,T.vy+=wn*Be.value*tt/In),!0;if(!(Be.length||In>=Rt)){(Be.data!==T||Be.next)&&(en===0&&(In+=(en=ot(B))*en),wn===0&&(In+=(wn=ot(B))*wn),In<q&&(In=Math.sqrt(q*In)));do Be.data!==T&&(zn=It[Be.data.index]*tt/In,T.vx+=en*zn,T.vy+=wn*zn);while(Be=Be.next)}}return ee.initialize=function(Be,Ke){z=Be,B=Ke,xe()},ee.strength=function(Be){return arguments.length?(Nt=typeof Be=="function"?Be:rt(+Be),xe(),ee):Nt},ee.distanceMin=function(Be){return arguments.length?(q=Be*Be,ee):Math.sqrt(q)},ee.distanceMax=function(Be){return arguments.length?(Rt=Be*Be,ee):Math.sqrt(Rt)},ee.theta=function(Be){return arguments.length?(Qt=Be*Be,ee):Math.sqrt(Qt)},ee};function Br(et){return(Br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(et)}function ii(et){return et.index}function mi(et,z){var T=et.get(z);if(!T)throw new Error("node not found: "+z);return T}var Pi=function(z){var T,B,tt,It,Nt,q,Rt=ii,Qt=function(ze){return 1/Math.min(It[ze.source.index],It[ze.target.index])},ee=rt(30),xe=1;function Pe(Qe){for(var ze=0,en=z.length;ze<xe;++ze)for(var wn,zn,In,Xn,cr,or,lr,Ar=0;Ar<en;++Ar)zn=(wn=z[Ar]).source,Xn=(In=wn.target).x+In.vx-zn.x-zn.vx||ot(q),cr=In.y+In.vy-zn.y-zn.vy||ot(q),Xn*=or=((or=Math.sqrt(Xn*Xn+cr*cr))-B[Ar])/or*Qe*T[Ar],cr*=or,In.vx-=Xn*(lr=Nt[Ar]),In.vy-=cr*lr,zn.vx+=Xn*(lr=1-lr),zn.vy+=cr*lr}function He(){if(tt){var Qe,ze,en=tt.length,wn=z.length,zn=new Map(tt.map(function(In,Xn){return[Rt(In,Xn,tt),In]}));for(Qe=0,It=new Array(en);Qe<wn;++Qe)(ze=z[Qe]).index=Qe,Br(ze.source)!=="object"&&(ze.source=mi(zn,ze.source)),Br(ze.target)!=="object"&&(ze.target=mi(zn,ze.target)),It[ze.source.index]=(It[ze.source.index]||0)+1,It[ze.target.index]=(It[ze.target.index]||0)+1;for(Qe=0,Nt=new Array(wn);Qe<wn;++Qe)ze=z[Qe],Nt[Qe]=It[ze.source.index]/(It[ze.source.index]+It[ze.target.index]);T=new Array(wn),Be(),B=new Array(wn),Ke()}}function Be(){if(tt)for(var Qe=0,ze=z.length;Qe<ze;++Qe)T[Qe]=+Qt(z[Qe],Qe,z)}function Ke(){if(tt)for(var Qe=0,ze=z.length;Qe<ze;++Qe)B[Qe]=+ee(z[Qe],Qe,z)}return z==null&&(z=[]),Pe.initialize=function(Qe,ze){tt=Qe,q=ze,He()},Pe.links=function(Qe){return arguments.length?(z=Qe,He(),Pe):z},Pe.id=function(Qe){return arguments.length?(Rt=Qe,Pe):Rt},Pe.iterations=function(Qe){return arguments.length?(xe=+Qe,Pe):xe},Pe.strength=function(Qe){return arguments.length?(Qt=typeof Qe=="function"?Qe:rt(+Qe),Be(),Pe):Qt},Pe.distance=function(Qe){return arguments.length?(ee=typeof Qe=="function"?Qe:rt(+Qe),Ke(),Pe):ee},Pe};function sa(et){return et.x+et.vx}function Pa(et){return et.y+et.vy}var Mi=function(z){var T,B,tt,It=1,Nt=1;function q(){for(var ee,xe,Pe,He,Be,Ke,Qe,ze=T.length,en=0;en<Nt;++en)for(xe=g(T,sa,Pa).visitAfter(Rt),ee=0;ee<ze;++ee)Pe=T[ee],Ke=B[Pe.index],Qe=Ke*Ke,He=Pe.x+Pe.vx,Be=Pe.y+Pe.vy,xe.visit(wn);function wn(zn,In,Xn,cr,or){var lr=zn.data,Ar=zn.r,Nr=Ke+Ar;if(!lr)return In>He+Nr||cr<He-Nr||Xn>Be+Nr||or<Be-Nr;if(lr.index>Pe.index){var Dr=He-lr.x-lr.vx,Tr=Be-lr.y-lr.vy,Xr=Dr*Dr+Tr*Tr;Xr<Nr*Nr&&(Dr===0&&(Xr+=(Dr=ot(tt))*Dr),Tr===0&&(Xr+=(Tr=ot(tt))*Tr),Xr=(Nr-(Xr=Math.sqrt(Xr)))/Xr*It,Pe.vx+=(Dr*=Xr)*(Nr=(Ar*=Ar)/(Qe+Ar)),Pe.vy+=(Tr*=Xr)*Nr,lr.vx-=Dr*(Nr=1-Nr),lr.vy-=Tr*Nr)}}}function Rt(ee){if(ee.data)return ee.r=B[ee.data.index];for(var xe=ee.r=0;xe<4;++xe)ee[xe]&&ee[xe].r>ee.r&&(ee.r=ee[xe].r)}function Qt(){if(T){var ee,xe,Pe=T.length;for(B=new Array(Pe),ee=0;ee<Pe;++ee)xe=T[ee],B[xe.index]=+z(xe,ee,T)}}return typeof z!="function"&&(z=rt(z==null?1:+z)),q.initialize=function(ee,xe){T=ee,tt=xe,Qt()},q.iterations=function(ee){return arguments.length?(Nt=+ee,q):Nt},q.strength=function(ee){return arguments.length?(It=+ee,q):It},q.radius=function(ee){return arguments.length?(z=typeof ee=="function"?ee:rt(+ee),Qt(),q):z},q};function Ki(et,z){return function(T){if(Array.isArray(T))return T}(et)||function(T,B){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(T)))){var tt=[],It=!0,Nt=!1,q=void 0;try{for(var Rt,Qt=T[Symbol.iterator]();!(It=(Rt=Qt.next()).done)&&(tt.push(Rt.value),!B||tt.length!==B);It=!0);}catch(ee){Nt=!0,q=ee}finally{try{It||Qt.return==null||Qt.return()}finally{if(Nt)throw q}}return tt}}(et,z)||function(T,B){if(!!T){if(typeof T=="string")return fa(T,B);var tt=Object.prototype.toString.call(T).slice(8,-1);if(tt==="Object"&&T.constructor&&(tt=T.constructor.name),tt==="Map"||tt==="Set")return Array.from(T);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return fa(T,B)}}(et,z)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function fa(et,z){(z==null||z>et.length)&&(z=et.length);for(var T=0,B=new Array(z);T<z;T++)B[T]=et[T];return B}function oa(){function et(Xn){return function(){return Xn}}var z,T=function(cr){return cr.cluster},B=et(1),tt=et(-1),It=et(100),Nt=et(.1),q=[0,0],Rt=[],Qt={},ee=[],xe=100,Pe=100,He={none:{x:0,y:0}},Be=[],Ke="force",Qe=!0,ze=.1;function en(Xn){if(!Qe)return en;z.tick(),zn();for(var cr,or=0,lr=Rt.length,Ar=Xn*ze;or<lr;++or)(cr=Rt[or]).vx+=(He[T(cr)].x-cr.x)*Ar,cr.vy+=(He[T(cr)].y-cr.y)*Ar}function wn(){Rt&&function(){if(!(!Rt||!Rt.length)){if(T(Rt[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Xn=(or=[],lr=[],Ar={},Nr=[],cr=function(Dr){var Tr={};return Dr.forEach(function(Xr){var Ir=T(Xr);Tr[Ir]||(Tr[Ir]={count:0,sumforceNodeSize:0})}),Dr.forEach(function(Xr){var Ir=T(Xr),vi=B(Xr),bi=Tr[Ir];bi.count=bi.count+1,bi.sumforceNodeSize=bi.sumforceNodeSize+Math.PI*(vi*vi)*1.3,Tr[Ir]=bi}),Tr}(Rt),Nr=function(Dr){var Tr={},Xr=[];return Dr.forEach(function(Ir){var vi=function(Vi){var Jr=T(Qt[Vi.source]),Li=T(Qt[Vi.target]);return Jr<=Li?"".concat(Jr,"~").concat(Li):"".concat(Li,"~").concat(Jr)}(Ir),bi=0;Tr[vi]!==void 0&&(bi=Tr[vi]),bi+=1,Tr[vi]=bi}),Object.entries(Tr).forEach(function(Ir){var vi=Ki(Ir,2),bi=vi[0],Vi=vi[1],Jr=bi.split("~")[0],Li=bi.split("~")[1];Jr!==void 0&&Li!==void 0&&Xr.push({source:Jr,target:Li,count:Vi})}),Xr}(ee),Object.keys(cr).forEach(function(Dr,Tr){var Xr=cr[Dr];or.push({id:Dr,size:Xr.count,r:Math.sqrt(Xr.sumforceNodeSize/Math.PI)}),Ar[Dr]=Tr}),Nr.forEach(function(Dr){var Tr=Ar[Dr.source],Xr=Ar[Dr.target];Tr!==void 0&&Xr!==void 0&&lr.push({source:Tr,target:Xr,count:Dr.count})}),{nodes:or,links:lr}),cr,or,lr,Ar,Nr;z=mr(Xn.nodes).force("x",function(Dr){var Tr,Xr,Ir,vi=rt(.1);function bi(Jr){for(var Li,Hi=0,qi=Tr.length;Hi<qi;++Hi)(Li=Tr[Hi]).vx+=(Ir[Hi]-Li.x)*Xr[Hi]*Jr}function Vi(){if(Tr){var Jr,Li=Tr.length;for(Xr=new Array(Li),Ir=new Array(Li),Jr=0;Jr<Li;++Jr)Xr[Jr]=isNaN(Ir[Jr]=+Dr(Tr[Jr],Jr,Tr))?0:+vi(Tr[Jr],Jr,Tr)}}return typeof Dr!="function"&&(Dr=rt(Dr==null?0:+Dr)),bi.initialize=function(Jr){Tr=Jr,Vi()},bi.strength=function(Jr){return arguments.length?(vi=typeof Jr=="function"?Jr:rt(+Jr),Vi(),bi):vi},bi.x=function(Jr){return arguments.length?(Dr=typeof Jr=="function"?Jr:rt(+Jr),Vi(),bi):Dr},bi}(xe).strength(.1)).force("y",function(Dr){var Tr,Xr,Ir,vi=rt(.1);function bi(Jr){for(var Li,Hi=0,qi=Tr.length;Hi<qi;++Hi)(Li=Tr[Hi]).vy+=(Ir[Hi]-Li.y)*Xr[Hi]*Jr}function Vi(){if(Tr){var Jr,Li=Tr.length;for(Xr=new Array(Li),Ir=new Array(Li),Jr=0;Jr<Li;++Jr)Xr[Jr]=isNaN(Ir[Jr]=+Dr(Tr[Jr],Jr,Tr))?0:+vi(Tr[Jr],Jr,Tr)}}return typeof Dr!="function"&&(Dr=rt(Dr==null?0:+Dr)),bi.initialize=function(Jr){Tr=Jr,Vi()},bi.strength=function(Jr){return arguments.length?(vi=typeof Jr=="function"?Jr:rt(+Jr),Vi(),bi):vi},bi.y=function(Jr){return arguments.length?(Dr=typeof Jr=="function"?Jr:rt(+Jr),Vi(),bi):Dr},bi}(Pe).strength(.1)).force("collide",Mi(function(Dr){return Dr.r}).iterations(4)).force("charge",dr().strength(tt)).force("links",Pi(Xn.nodes.length?Xn.links:[]).distance(It).strength(Nt)),Be=z.nodes(),zn()}}()}function zn(){return He={none:{x:0,y:0}},Be.forEach(function(Xn){He[Xn.id]={x:Xn.x-q[0],y:Xn.y-q[1]}}),He}function In(Xn){Qt={},Xn.forEach(function(cr){Qt[cr.id]=cr})}return en.initialize=function(Xn){Rt=Xn,wn()},en.template=function(Xn){return arguments.length?(Ke=Xn,wn(),en):Ke},en.groupBy=function(Xn){return arguments.length?typeof Xn=="string"?(T=function(or){return or[Xn]},en):(T=Xn,en):T},en.enableGrouping=function(Xn){return arguments.length?(Qe=Xn,en):Qe},en.strength=function(Xn){return arguments.length?(ze=Xn,en):ze},en.centerX=function(Xn){return arguments.length?(xe=Xn,en):xe},en.centerY=function(Xn){return arguments.length?(Pe=Xn,en):Pe},en.nodes=function(Xn){return arguments.length?(In(Xn||[]),Rt=Xn||[],en):Rt},en.links=function(Xn){return arguments.length?(ee=Xn||[],wn(),en):ee},en.forceNodeSize=function(Xn){return arguments.length?(B=typeof Xn=="function"?Xn:et(+Xn),wn(),en):B},en.nodeSize=en.forceNodeSize,en.forceCharge=function(Xn){return arguments.length?(tt=typeof Xn=="function"?Xn:et(+Xn),wn(),en):tt},en.forceLinkDistance=function(Xn){return arguments.length?(It=typeof Xn=="function"?Xn:et(+Xn),wn(),en):It},en.forceLinkStrength=function(Xn){return arguments.length?(Nt=typeof Xn=="function"?Xn:et(+Xn),wn(),en):Nt},en.offset=function(Xn){return arguments.length?(q=Xn,en):q},en.getFocis=zn,en}var pa="LAYOUT_RUN",La="LAYOUT_END",Yr="LAYOUT_ERROR",Sa="LAYOUT_TICK",Pr="GPU_LAYOUT_RUN",si="GPU_LAYOUT_END";function ti(et){return(ti=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(et)}function $r(et,z){for(var T=0;T<z.length;T++){var B=z[T];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(et,B.key,B)}}function ui(et,z){return(ui=Object.setPrototypeOf||function(T,B){return T.__proto__=B,T})(et,z)}function li(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=Ci(et);if(z){var tt=Ci(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return xi(this,T)}}function xi(et,z){return!z||ti(z)!=="object"&&typeof z!="function"?function(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}(et):z}function Ci(et){return(Ci=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(et)}var di=function(et){(function(Nt,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(q&&q.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),q&&ui(Nt,q)})(It,et);var z,T,B,tt=li(It);function It(Nt){var q;return function(Rt,Qt){if(!(Rt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(q=tt.call(this)).center=[0,0],q.nodeStrength=null,q.edgeStrength=null,q.preventOverlap=!1,q.clusterNodeStrength=null,q.clusterEdgeStrength=null,q.clusterEdgeDistance=null,q.clusterNodeSize=null,q.clusterFociStrength=null,q.linkDistance=50,q.alphaDecay=.028,q.alphaMin=.001,q.alpha=.3,q.collideStrength=1,q.workerEnabled=!1,q.tick=function(){},q.onLayoutEnd=function(){},q.ticking=void 0,Nt&&q.updateCfg(Nt),q}return z=It,(T=[{key:"getDefaultCfg",value:function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}}},{key:"init",value:function(q){this.nodes=q.nodes||[];var Rt=q.edges||[];this.edges=Rt.map(function(Qt){var ee={},xe=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(Qt).forEach(function(Pe){xe.indexOf(Pe)>-1||(ee[Pe]=Qt[Pe])}),ee}),this.ticking=!1}},{key:"execute",value:function(q){var Rt=this,Qt=Rt.nodes,ee=Rt.edges;if(!Rt.ticking){var xe=Rt.forceSimulation,Pe=Rt.alphaMin,He=Rt.alphaDecay,Be=Rt.alpha;if(xe){if(q){if(Rt.clustering&&Rt.clusterForce&&(Rt.clusterForce.nodes(Qt),Rt.clusterForce.links(ee)),xe.nodes(Qt),ee&&Rt.edgeForce)Rt.edgeForce.links(ee);else if(ee&&!Rt.edgeForce){var Ke=Pi().id(function(In){return In.id}).links(ee);Rt.edgeStrength&&Ke.strength(Rt.edgeStrength),Rt.linkDistance&&Ke.distance(Rt.linkDistance),Rt.edgeForce=Ke,xe.force("link",Ke)}}Rt.preventOverlap&&Rt.overlapProcess(xe),xe.alpha(Be).restart(),this.ticking=!0}else try{var Qe=dr();if(Rt.nodeStrength&&Qe.strength(Rt.nodeStrength),xe=mr().nodes(Qt),Rt.clustering){var ze=oa();ze.centerX(Rt.center[0]).centerY(Rt.center[1]).template("force").strength(Rt.clusterFociStrength),ee&&ze.links(ee),Qt&&ze.nodes(Qt),ze.forceLinkDistance(Rt.clusterEdgeDistance).forceLinkStrength(Rt.clusterEdgeStrength).forceCharge(Rt.clusterNodeStrength).forceNodeSize(Rt.clusterNodeSize),Rt.clusterForce=ze,xe.force("group",ze)}if(xe.force("center",function(In,Xn){var cr,or=1;function lr(){var Ar,Nr,Dr=cr.length,Tr=0,Xr=0;for(Ar=0;Ar<Dr;++Ar)Tr+=(Nr=cr[Ar]).x,Xr+=Nr.y;for(Tr=(Tr/Dr-In)*or,Xr=(Xr/Dr-Xn)*or,Ar=0;Ar<Dr;++Ar)(Nr=cr[Ar]).x-=Tr,Nr.y-=Xr}return In==null&&(In=0),Xn==null&&(Xn=0),lr.initialize=function(Ar){cr=Ar},lr.x=function(Ar){return arguments.length?(In=+Ar,lr):In},lr.y=function(Ar){return arguments.length?(Xn=+Ar,lr):Xn},lr.strength=function(Ar){return arguments.length?(or=+Ar,lr):or},lr}(Rt.center[0],Rt.center[1])).force("charge",Qe).alpha(Be).alphaDecay(He).alphaMin(Pe),Rt.preventOverlap&&Rt.overlapProcess(xe),ee){var en=Pi().id(function(In){return In.id}).links(ee);Rt.edgeStrength&&en.strength(Rt.edgeStrength),Rt.linkDistance&&en.distance(Rt.linkDistance),Rt.edgeForce=en,xe.force("link",en)}if(Rt.workerEnabled&&!Ti()&&(Rt.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),Rt.workerEnabled){xe.stop();for(var wn=function(In){var Xn=In.alphaMin(),cr=In.alphaTarget(),or=In.alpha(),lr=Math.log((Xn-cr)/(or-cr))/Math.log(1-In.alphaDecay());return Math.ceil(lr)}(xe),zn=1;zn<=wn;zn++)xe.tick(),postMessage({nodes:Qt,currentTick:zn,totalTicks:wn,type:Sa},void 0);Rt.ticking=!1}else xe.on("tick",function(){Rt.tick()}).on("end",function(){Rt.ticking=!1,Rt.onLayoutEnd&&Rt.onLayoutEnd()}),Rt.ticking=!0;Rt.forceSimulation=xe,Rt.ticking=!0}catch(In){Rt.ticking=!1,console.warn(In)}}}},{key:"overlapProcess",value:function(q){var Rt,Qt,ee=this.nodeSize,xe=this.nodeSpacing,Pe=this.collideStrength;if(Qt=S(xe)?function(){return xe}:A(xe)?xe:function(){return 0},ee)if(A(ee))Rt=function(Qe){return ee(Qe)+Qt(Qe)};else if(c(ee)){var He=(ee[0]>ee[1]?ee[0]:ee[1])/2;Rt=function(Qe){return He+Qt(Qe)}}else if(S(ee)){var Be=ee/2;Rt=function(Qe){return Be+Qt(Qe)}}else Rt=function(){return 10};else Rt=function(Qe){return Qe.size?c(Qe.size)?(Qe.size[0]>Qe.size[1]?Qe.size[0]:Qe.size[1])/2+Qt(Qe):Qe.size/2+Qt(Qe):10+Qt(Qe)};q.force("collisionForce",Mi(Rt).strength(Pe))}},{key:"updateCfg",value:function(q){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.forceSimulation=null,Object.assign(this,q)}},{key:"destroy",value:function(){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.nodes=null,this.edges=null,this.destroyed=!0}}])&&$r(z.prototype,T),B&&$r(z,B),It}(x);function Ti(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function pi(et){return(pi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(et)}function Ni(et,z){for(var T=0;T<z.length;T++){var B=z[T];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(et,B.key,B)}}function Bi(et,z){return(Bi=Object.setPrototypeOf||function(T,B){return T.__proto__=B,T})(et,z)}function Fi(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=ua(et);if(z){var tt=ua(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return ma(this,T)}}function ma(et,z){return!z||pi(z)!=="object"&&typeof z!="function"?function(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}(et):z}function ua(et){return(ua=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(et)}function Ra(et,z,T,B){et.forEach(function(tt,It){et[It].children=[],et[It].parent=[]}),B?z.forEach(function(tt){var It=0;tt.source&&(It=T[tt.source]);var Nt=0;tt.target&&(Nt=T[tt.target]);var q=et[It].children,Rt=et[Nt].parent;q.push(et[Nt].id),Rt.push(et[It].id)}):z.forEach(function(tt){var It=0;tt.source&&(It=T[tt.source]);var Nt=0;tt.target&&(Nt=T[tt.target]);var q=et[It].children,Rt=et[Nt].children;q.push(et[Nt].id),Rt.push(et[It].id)})}function xa(et,z,T){for(var B=T.length,tt=0;tt<B;tt++)if(et.id===T[tt].source&&z.id===T[tt].target||z.id===T[tt].source&&et.id===T[tt].target)return!0;return!1}function Ma(et,z){var T=et.degree,B=z.degree;return T<B?-1:T>B?1:0}var Qi=function(et){(function(Nt,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(q&&q.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),q&&Bi(Nt,q)})(It,et);var z,T,B,tt=Fi(It);function It(Nt){var q;return function(Rt,Qt){if(!(Rt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(q=tt.call(this)).radius=null,q.startRadius=null,q.endRadius=null,q.startAngle=0,q.endAngle=2*Math.PI,q.clockwise=!0,q.divisions=1,q.ordering=null,q.angleRatio=1,q.nodes=[],q.edges=[],q.nodeMap={},q.degrees=[],q.width=300,q.height=300,q.updateCfg(Nt),q}return z=It,(T=[{key:"getDefaultCfg",value:function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}},{key:"execute",value:function(){var q=this.nodes,Rt=this.edges,Qt=q.length;if(Qt!==0){this.width||typeof window=="undefined"||(this.width=window.innerWidth),this.height||typeof window=="undefined"||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var ee=this.center;if(Qt===1)return q[0].x=ee[0],q[0].y=ee[1],void(this.onLayoutEnd&&this.onLayoutEnd());var xe=this.radius,Pe=this.startRadius,He=this.endRadius,Be=this.divisions,Ke=this.startAngle,Qe=this.endAngle,ze=(Qe-Ke)/Qt,en={};q.forEach(function(Dr,Tr){en[Dr.id]=Tr}),this.nodeMap=en;var wn=m(q.length,en,Rt);this.degrees=wn,xe||Pe||He?!Pe&&He?Pe=He:Pe&&!He&&(He=Pe):xe=this.height>this.width?this.width/2:this.height/2;var zn=ze*this.angleRatio,In=this.ordering,Xn=[];Xn=In==="topology"?this.topologyOrdering():In==="topology-directed"?this.topologyOrdering(!0):In==="degree"?this.degreeOrdering():q;for(var cr=this.clockwise,or=Math.ceil(Qt/Be),lr=0;lr<Qt;++lr){var Ar=xe;Ar||Pe===null||He===null||(Ar=Pe+lr*(He-Pe)/(Qt-1)),Ar||(Ar=10+100*lr/(Qt-1));var Nr=Ke+lr%or*zn+2*Math.PI/Be*Math.floor(lr/or);cr||(Nr=Qe-lr%or*zn-2*Math.PI/Be*Math.floor(lr/or)),Xn[lr].x=ee[0]+Math.cos(Nr)*Ar,Xn[lr].y=ee[1]+Math.sin(Nr)*Ar,Xn[lr].weight=wn[lr]}return this.onLayoutEnd&&this.onLayoutEnd(),{nodes:Xn,edges:this.edges}}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"topologyOrdering",value:function(){var q=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Rt=this,Qt=Rt.degrees,ee=Rt.edges,xe=Rt.nodes,Pe=E(xe),He=Rt.nodeMap,Be=[Pe[0]],Ke=[xe[0]],Qe=[],ze=xe.length;Qe[0]=!0,Ra(Pe,ee,He,q);var en=0;return Pe.forEach(function(wn,zn){if(zn!==0)if(zn!==ze-1&&Qt[zn]===Qt[zn+1]&&!xa(Be[en],wn,ee)||Qe[zn]){for(var In=Be[en].children,Xn=!1,cr=0;cr<In.length;cr++){var or=He[In[cr]];if(Qt[or]===Qt[zn]&&!Qe[or]){Be.push(Pe[or]),Ke.push(xe[He[Pe[or].id]]),Qe[or]=!0,Xn=!0;break}}for(var lr=0;!Xn&&(Qe[lr]||(Be.push(Pe[lr]),Ke.push(xe[He[Pe[lr].id]]),Qe[lr]=!0,Xn=!0),++lr!==ze););}else Be.push(wn),Ke.push(xe[He[wn.id]]),Qe[zn]=!0,en++}),Ke}},{key:"degreeOrdering",value:function(){var q=this.nodes,Rt=[],Qt=this.degrees;return q.forEach(function(ee,xe){ee.degree=Qt[xe],Rt.push(ee)}),Rt.sort(Ma),Rt}},{key:"getType",value:function(){return"circular"}}])&&Ni(z.prototype,T),B&&Ni(z,B),It}(x),ka=t(153),vo=t.n(ka);function za(et){return(za=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(et)}function Ga(et,z){for(var T=0;T<z.length;T++){var B=z[T];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(et,B.key,B)}}function eo(et,z){return(eo=Object.setPrototypeOf||function(T,B){return T.__proto__=B,T})(et,z)}function ae(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=te(et);if(z){var tt=te(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return Kt(this,T)}}function Kt(et,z){return!z||za(z)!=="object"&&typeof z!="function"?function(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}(et):z}function te(et){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(et)}var Oe=function(et){(function(Nt,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(q&&q.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),q&&eo(Nt,q)})(It,et);var z,T,B,tt=ae(It);function It(Nt){var q;return function(Rt,Qt){if(!(Rt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(q=tt.call(this)).rankdir="TB",q.nodesep=50,q.ranksep=50,q.controlPoints=!1,q.sortByCombo=!1,q.nodes=[],q.edges=[],q.onLayoutEnd=function(){},q.updateCfg(Nt),q}return z=It,(T=[{key:"getDefaultCfg",value:function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}},{key:"execute",value:function(){var q=this,Rt=q.nodes,Qt=q.nodeSize,ee=q.rankdir;if(Rt){var xe,Pe=q.edges||[],He=new vo.a.graphlib.Graph;xe=Qt?c(Qt)?function(){return Qt}:function(){return[Qt,Qt]}:function(ze){return ze.size?c(ze.size)?ze.size:[ze.size,ze.size]:[40,40]};var Be,Ke=Ze(q.nodesepFunc,q.nodesep,50),Qe=Ze(q.ranksepFunc,q.ranksep,50);return ee!=="LR"&&ee!=="RL"||(Ke=Ze(q.ranksepFunc,q.ranksep,50),Qe=Ze(q.nodesepFunc,q.nodesep,50)),He.setDefaultEdgeLabel(function(){return{}}),He.setGraph(q),Rt.forEach(function(ze){var en=xe(ze),wn=Qe(ze),zn=Ke(ze),In=en[0]+2*zn,Xn=en[1]+2*wn;He.setNode(ze.id,{width:In,height:Xn})}),Pe.forEach(function(ze){He.setEdge(ze.source,ze.target,{weight:ze.weight||1})}),vo.a.layout(He),He.nodes().forEach(function(ze){Be=He.node(ze);var en=Rt.findIndex(function(wn){return wn.id===ze});Rt[en].x=Be.x,Rt[en].y=Be.y}),He.edges().forEach(function(ze){Be=He.edge(ze);var en=Pe.findIndex(function(wn){return wn.source===ze.v&&wn.target===ze.w});q.controlPoints&&Pe[en].type!=="loop"&&(Pe[en].controlPoints=Be.points.slice(1,Be.points.length-1))}),q.sortByCombo&&q.sortLevel("comboId"),q.onLayoutEnd&&q.onLayoutEnd(),{nodes:Rt,edges:Pe}}}},{key:"sortLevel",value:function(q){var Rt=this,Qt=Rt.nodes,ee={};Qt.forEach(function(xe){ee[xe.y]||(ee[xe.y]={y:xe.y,nodes:[]}),ee[xe.y].nodes.push(xe)}),Object.keys(ee).forEach(function(xe){var Pe=ee[xe].nodes,He=Pe.length,Be={};if(Pe.forEach(function(en){var wn=en.comboId;Be[wn]||(Be[wn]={x:0,y:0,count:0}),Be[wn].x+=en.x,Be[wn].y+=en.y,Be[wn].count++}),Object.keys(Be).forEach(function(en){Be[en].x/=Be[en].count,Be[en].y/=Be[en].count}),He!==1){var Ke=Pe.sort(function(en,wn){return en.x-wn.x}),Qe=Ke[0].x,ze=(Ke[He-1].x-Qe)/(He-1);Pe.sort(function(en,wn){var zn=en[q]||"undefined",In=wn[q]||"undefined";return zn<In?-1:zn>In?1:0}).forEach(function(en,wn){en.x=Qe+wn*ze})}else Rt.onLayoutEnd&&Rt.onLayoutEnd()})}},{key:"getType",value:function(){return"dagre"}}])&&Ga(z.prototype,T),B&&Ga(z,B),It}(x);function Ze(et,z,T){return et||(S(z)?function(){return z}:function(){return T})}var An=Object.prototype.toString;function qn(et){return An.call(et).endsWith("Array]")}var rr=function(z){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!qn(z))throw new TypeError("input must be an array");if(z.length===0)throw new TypeError("input must not be empty");var B=T.fromIndex,tt=B===void 0?0:B,It=T.toIndex,Nt=It===void 0?z.length:It;if(tt<0||tt>=z.length||!Number.isInteger(tt))throw new Error("fromIndex must be a positive integer smaller than length");if(Nt<=tt||Nt>z.length||!Number.isInteger(Nt))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var q=z[tt],Rt=tt+1;Rt<Nt;Rt++)z[Rt]>q&&(q=z[Rt]);return q},tn=function(z){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!qn(z))throw new TypeError("input must be an array");if(z.length===0)throw new TypeError("input must not be empty");var B=T.fromIndex,tt=B===void 0?0:B,It=T.toIndex,Nt=It===void 0?z.length:It;if(tt<0||tt>=z.length||!Number.isInteger(tt))throw new Error("fromIndex must be a positive integer smaller than length");if(Nt<=tt||Nt>z.length||!Number.isInteger(Nt))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var q=z[tt],Rt=tt+1;Rt<Nt;Rt++)z[Rt]<q&&(q=z[Rt]);return q},sn=function(z){var T,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!qn(z))throw new TypeError("input must be an array");if(z.length===0)throw new TypeError("input must not be empty");if(B.output!==void 0){if(!qn(B.output))throw new TypeError("output option must be an array if specified");T=B.output}else T=new Array(z.length);var tt=tn(z),It=rr(z);if(tt===It)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var Nt=B.min,q=Nt===void 0?B.autoMinMax?tt:0:Nt,Rt=B.max,Qt=Rt===void 0?B.autoMinMax?It:1:Rt;if(q>=Qt)throw new RangeError("min option must be smaller than max option");for(var ee=(Qt-q)/(It-tt),xe=0;xe<z.length;xe++)T[xe]=(z[xe]-tt)*ee+q;return T},un=" ".repeat(2),ur=" ".repeat(4);function jr(et){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},T=z.maxRows,B=T===void 0?15:T,tt=z.maxColumns,It=tt===void 0?10:tt,Nt=z.maxNumSize,q=Nt===void 0?8:Nt;return"".concat(et.constructor.name,` {
`).concat(un,`[
`).concat(ur).concat(wr(et,B,It,q),`
`).concat(un,`]
`).concat(un,"rows: ").concat(et.rows,`
`).concat(un,"columns: ").concat(et.columns,`
}`)}function wr(et,z,T,B){for(var tt=et.rows,It=et.columns,Nt=Math.min(tt,z),q=Math.min(It,T),Rt=[],Qt=0;Qt<Nt;Qt++){for(var ee=[],xe=0;xe<q;xe++)ee.push(yr(et.get(Qt,xe),B));Rt.push("".concat(ee.join(" ")))}return q!==It&&(Rt[Rt.length-1]+=" ... ".concat(It-T," more columns")),Nt!==tt&&Rt.push("... ".concat(tt-z," more rows")),Rt.join(`
`.concat(ur))}function yr(et,z){var T=String(et);if(T.length<=z)return T.padEnd(z," ");var B=et.toPrecision(z-2);if(B.length<=z)return B;var tt=et.toExponential(z-2),It=tt.indexOf("e"),Nt=tt.slice(It);return tt.slice(0,z-Nt.length)+Nt}function ni(et){return(ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(et)}function _r(et,z,T){var B=T?et.rows:et.rows-1;if(z<0||z>B)throw new RangeError("Row index out of range")}function Fr(et,z,T){var B=T?et.columns:et.columns-1;if(z<0||z>B)throw new RangeError("Column index out of range")}function Lr(et,z){if(z.to1DArray&&(z=z.to1DArray()),z.length!==et.columns)throw new RangeError("vector size must be the same as the number of columns");return z}function Gr(et,z){if(z.to1DArray&&(z=z.to1DArray()),z.length!==et.rows)throw new RangeError("vector size must be the same as the number of rows");return z}function Hr(et,z){if(ni(z)!=="object")throw new TypeError("unexpected type for row indices");if(z.some(function(T){return T<0||T>=et.rows}))throw new RangeError("row indices are out of range");return Array.isArray(z)||(z=Array.from(z)),z}function ei(et,z){if(ni(z)!=="object")throw new TypeError("unexpected type for column indices");if(z.some(function(T){return T<0||T>=et.columns}))throw new RangeError("column indices are out of range");return Array.isArray(z)||(z=Array.from(z)),z}function Kr(et,z,T,B,tt){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Oi("startRow",z),Oi("endRow",T),Oi("startColumn",B),Oi("endColumn",tt),z>T||B>tt||z<0||z>=et.rows||T<0||T>=et.rows||B<0||B>=et.columns||tt<0||tt>=et.columns)throw new RangeError("Submatrix indices are out of range")}function Qr(et){for(var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,T=[],B=0;B<et;B++)T.push(z);return T}function Oi(et,z){if(typeof z!="number")throw new TypeError("".concat(et," must be a number"))}function Ri(et){if(et.isEmpty())throw new Error("Empty matrix has no elements to index")}function Si(et,z,T){for(var B=et.rows,tt=et.columns,It=[],Nt=0;Nt<B;Nt++){for(var q=0,Rt=0,Qt=0,ee=0;ee<tt;ee++)q+=Qt=et.get(Nt,ee)-T[Nt],Rt+=Qt*Qt;z?It.push((Rt-q*q/tt)/(tt-1)):It.push((Rt-q*q/tt)/tt)}return It}function Gi(et,z,T){for(var B=et.rows,tt=et.columns,It=[],Nt=0;Nt<tt;Nt++){for(var q=0,Rt=0,Qt=0,ee=0;ee<B;ee++)q+=Qt=et.get(ee,Nt)-T[Nt],Rt+=Qt*Qt;z?It.push((Rt-q*q/B)/(B-1)):It.push((Rt-q*q/B)/B)}return It}function ca(et,z,T){for(var B=et.rows,tt=et.columns,It=B*tt,Nt=0,q=0,Rt=0,Qt=0;Qt<B;Qt++)for(var ee=0;ee<tt;ee++)Nt+=Rt=et.get(Qt,ee)-T,q+=Rt*Rt;return z?(q-Nt*Nt/It)/(It-1):(q-Nt*Nt/It)/It}function ha(et,z){for(var T=0;T<et.rows;T++)for(var B=0;B<et.columns;B++)et.set(T,B,et.get(T,B)-z[T])}function na(et,z){for(var T=0;T<et.rows;T++)for(var B=0;B<et.columns;B++)et.set(T,B,et.get(T,B)-z[B])}function Zi(et,z){for(var T=0;T<et.rows;T++)for(var B=0;B<et.columns;B++)et.set(T,B,et.get(T,B)-z)}function ve(et){for(var z=[],T=0;T<et.rows;T++){for(var B=0,tt=0;tt<et.columns;tt++)B+=Math.pow(et.get(T,tt),2)/(et.columns-1);z.push(Math.sqrt(B))}return z}function U(et,z){for(var T=0;T<et.rows;T++)for(var B=0;B<et.columns;B++)et.set(T,B,et.get(T,B)/z[T])}function G(et){for(var z=[],T=0;T<et.columns;T++){for(var B=0,tt=0;tt<et.rows;tt++)B+=Math.pow(et.get(tt,T),2)/(et.rows-1);z.push(Math.sqrt(B))}return z}function nt(et,z){for(var T=0;T<et.rows;T++)for(var B=0;B<et.columns;B++)et.set(T,B,et.get(T,B)/z[B])}function vt(et){for(var z=et.size-1,T=0,B=0;B<et.columns;B++)for(var tt=0;tt<et.rows;tt++)T+=Math.pow(et.get(tt,B),2)/z;return Math.sqrt(T)}function Gt(et,z){for(var T=0;T<et.rows;T++)for(var B=0;B<et.columns;B++)et.set(T,B,et.get(T,B)/z)}function Jt(et,z){return(Jt=Object.setPrototypeOf||function(T,B){return T.__proto__=B,T})(et,z)}function ie(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=Ce(et);if(z){var tt=Ce(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return ue(this,T)}}function ue(et,z){return!z||we(z)!=="object"&&typeof z!="function"?function(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}(et):z}function Ce(et){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(et)}function we(et){return(we=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(et)}function cn(et,z){if(!(et instanceof z))throw new TypeError("Cannot call a class as a function")}function Cn(et,z){for(var T=0;T<z.length;T++){var B=z[T];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(et,B.key,B)}}function _t(et,z,T){return z&&Cn(et.prototype,z),T&&Cn(et,T),et}var Xt=function(){function et(){cn(this,et)}return _t(et,[{key:"apply",value:function(T){if(typeof T!="function")throw new TypeError("callback must be a function");for(var B=0;B<this.rows;B++)for(var tt=0;tt<this.columns;tt++)T.call(this,B,tt);return this}},{key:"to1DArray",value:function(){for(var T=[],B=0;B<this.rows;B++)for(var tt=0;tt<this.columns;tt++)T.push(this.get(B,tt));return T}},{key:"to2DArray",value:function(){for(var T=[],B=0;B<this.rows;B++){T.push([]);for(var tt=0;tt<this.columns;tt++)T[B].push(this.get(B,tt))}return T}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var T=0;T<this.rows;T++)for(var B=0;B<=T;B++)if(this.get(T,B)!==this.get(B,T))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var T=0,B=0,tt=-1,It=!0,Nt=!1;T<this.rows&&It;){for(B=0,Nt=!1;B<this.columns&&Nt===!1;)this.get(T,B)===0?B++:this.get(T,B)===1&&B>tt?(Nt=!0,tt=B):(It=!1,Nt=!0);T++}return It}},{key:"isReducedEchelonForm",value:function(){for(var T=0,B=0,tt=-1,It=!0,Nt=!1;T<this.rows&&It;){for(B=0,Nt=!1;B<this.columns&&Nt===!1;)this.get(T,B)===0?B++:this.get(T,B)===1&&B>tt?(Nt=!0,tt=B):(It=!1,Nt=!0);for(var q=B+1;q<this.rows;q++)this.get(T,q)!==0&&(It=!1);T++}return It}},{key:"echelonForm",value:function(){for(var T=this.clone(),B=0,tt=0;B<T.rows&&tt<T.columns;){for(var It=B,Nt=B;Nt<T.rows;Nt++)T.get(Nt,tt)>T.get(It,tt)&&(It=Nt);if(T.get(It,tt)===0)tt++;else{T.swapRows(B,It);for(var q=T.get(B,tt),Rt=tt;Rt<T.columns;Rt++)T.set(B,Rt,T.get(B,Rt)/q);for(var Qt=B+1;Qt<T.rows;Qt++){var ee=T.get(Qt,tt)/T.get(B,tt);T.set(Qt,tt,0);for(var xe=tt+1;xe<T.columns;xe++)T.set(Qt,xe,T.get(Qt,xe)-T.get(B,xe)*ee)}B++,tt++}}return T}},{key:"reducedEchelonForm",value:function(){for(var T=this.echelonForm(),B=T.columns,tt=T.rows,It=tt-1;It>=0;)if(T.maxRow(It)===0)It--;else{for(var Nt=0,q=!1;Nt<tt&&q===!1;)T.get(It,Nt)===1?q=!0:Nt++;for(var Rt=0;Rt<It;Rt++)for(var Qt=T.get(Rt,Nt),ee=Nt;ee<B;ee++){var xe=T.get(Rt,ee)-Qt*T.get(It,ee);T.set(Rt,ee,xe)}It--}return T}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(we(T)!=="object")throw new TypeError("options must be an object");var B=T.rows,tt=B===void 0?1:B,It=T.columns,Nt=It===void 0?1:It;if(!Number.isInteger(tt)||tt<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(Nt)||Nt<=0)throw new TypeError("columns must be a positive integer");for(var q=new yn(this.rows*tt,this.columns*Nt),Rt=0;Rt<tt;Rt++)for(var Qt=0;Qt<Nt;Qt++)q.setSubMatrix(this,this.rows*Rt,this.columns*Qt);return q}},{key:"fill",value:function(T){for(var B=0;B<this.rows;B++)for(var tt=0;tt<this.columns;tt++)this.set(B,tt,T);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(T){_r(this,T);for(var B=[],tt=0;tt<this.columns;tt++)B.push(this.get(T,tt));return B}},{key:"getRowVector",value:function(T){return yn.rowVector(this.getRow(T))}},{key:"setRow",value:function(T,B){_r(this,T),B=Lr(this,B);for(var tt=0;tt<this.columns;tt++)this.set(T,tt,B[tt]);return this}},{key:"swapRows",value:function(T,B){_r(this,T),_r(this,B);for(var tt=0;tt<this.columns;tt++){var It=this.get(T,tt);this.set(T,tt,this.get(B,tt)),this.set(B,tt,It)}return this}},{key:"getColumn",value:function(T){Fr(this,T);for(var B=[],tt=0;tt<this.rows;tt++)B.push(this.get(tt,T));return B}},{key:"getColumnVector",value:function(T){return yn.columnVector(this.getColumn(T))}},{key:"setColumn",value:function(T,B){Fr(this,T),B=Gr(this,B);for(var tt=0;tt<this.rows;tt++)this.set(tt,T,B[tt]);return this}},{key:"swapColumns",value:function(T,B){Fr(this,T),Fr(this,B);for(var tt=0;tt<this.rows;tt++){var It=this.get(tt,T);this.set(tt,T,this.get(tt,B)),this.set(tt,B,It)}return this}},{key:"addRowVector",value:function(T){T=Lr(this,T);for(var B=0;B<this.rows;B++)for(var tt=0;tt<this.columns;tt++)this.set(B,tt,this.get(B,tt)+T[tt]);return this}},{key:"subRowVector",value:function(T){T=Lr(this,T);for(var B=0;B<this.rows;B++)for(var tt=0;tt<this.columns;tt++)this.set(B,tt,this.get(B,tt)-T[tt]);return this}},{key:"mulRowVector",value:function(T){T=Lr(this,T);for(var B=0;B<this.rows;B++)for(var tt=0;tt<this.columns;tt++)this.set(B,tt,this.get(B,tt)*T[tt]);return this}},{key:"divRowVector",value:function(T){T=Lr(this,T);for(var B=0;B<this.rows;B++)for(var tt=0;tt<this.columns;tt++)this.set(B,tt,this.get(B,tt)/T[tt]);return this}},{key:"addColumnVector",value:function(T){T=Gr(this,T);for(var B=0;B<this.rows;B++)for(var tt=0;tt<this.columns;tt++)this.set(B,tt,this.get(B,tt)+T[B]);return this}},{key:"subColumnVector",value:function(T){T=Gr(this,T);for(var B=0;B<this.rows;B++)for(var tt=0;tt<this.columns;tt++)this.set(B,tt,this.get(B,tt)-T[B]);return this}},{key:"mulColumnVector",value:function(T){T=Gr(this,T);for(var B=0;B<this.rows;B++)for(var tt=0;tt<this.columns;tt++)this.set(B,tt,this.get(B,tt)*T[B]);return this}},{key:"divColumnVector",value:function(T){T=Gr(this,T);for(var B=0;B<this.rows;B++)for(var tt=0;tt<this.columns;tt++)this.set(B,tt,this.get(B,tt)/T[B]);return this}},{key:"mulRow",value:function(T,B){_r(this,T);for(var tt=0;tt<this.columns;tt++)this.set(T,tt,this.get(T,tt)*B);return this}},{key:"mulColumn",value:function(T,B){Fr(this,T);for(var tt=0;tt<this.rows;tt++)this.set(tt,T,this.get(tt,T)*B);return this}},{key:"max",value:function(){if(this.isEmpty())return NaN;for(var T=this.get(0,0),B=0;B<this.rows;B++)for(var tt=0;tt<this.columns;tt++)this.get(B,tt)>T&&(T=this.get(B,tt));return T}},{key:"maxIndex",value:function(){Ri(this);for(var T=this.get(0,0),B=[0,0],tt=0;tt<this.rows;tt++)for(var It=0;It<this.columns;It++)this.get(tt,It)>T&&(T=this.get(tt,It),B[0]=tt,B[1]=It);return B}},{key:"min",value:function(){if(this.isEmpty())return NaN;for(var T=this.get(0,0),B=0;B<this.rows;B++)for(var tt=0;tt<this.columns;tt++)this.get(B,tt)<T&&(T=this.get(B,tt));return T}},{key:"minIndex",value:function(){Ri(this);for(var T=this.get(0,0),B=[0,0],tt=0;tt<this.rows;tt++)for(var It=0;It<this.columns;It++)this.get(tt,It)<T&&(T=this.get(tt,It),B[0]=tt,B[1]=It);return B}},{key:"maxRow",value:function(T){if(_r(this,T),this.isEmpty())return NaN;for(var B=this.get(T,0),tt=1;tt<this.columns;tt++)this.get(T,tt)>B&&(B=this.get(T,tt));return B}},{key:"maxRowIndex",value:function(T){_r(this,T),Ri(this);for(var B=this.get(T,0),tt=[T,0],It=1;It<this.columns;It++)this.get(T,It)>B&&(B=this.get(T,It),tt[1]=It);return tt}},{key:"minRow",value:function(T){if(_r(this,T),this.isEmpty())return NaN;for(var B=this.get(T,0),tt=1;tt<this.columns;tt++)this.get(T,tt)<B&&(B=this.get(T,tt));return B}},{key:"minRowIndex",value:function(T){_r(this,T),Ri(this);for(var B=this.get(T,0),tt=[T,0],It=1;It<this.columns;It++)this.get(T,It)<B&&(B=this.get(T,It),tt[1]=It);return tt}},{key:"maxColumn",value:function(T){if(Fr(this,T),this.isEmpty())return NaN;for(var B=this.get(0,T),tt=1;tt<this.rows;tt++)this.get(tt,T)>B&&(B=this.get(tt,T));return B}},{key:"maxColumnIndex",value:function(T){Fr(this,T),Ri(this);for(var B=this.get(0,T),tt=[0,T],It=1;It<this.rows;It++)this.get(It,T)>B&&(B=this.get(It,T),tt[0]=It);return tt}},{key:"minColumn",value:function(T){if(Fr(this,T),this.isEmpty())return NaN;for(var B=this.get(0,T),tt=1;tt<this.rows;tt++)this.get(tt,T)<B&&(B=this.get(tt,T));return B}},{key:"minColumnIndex",value:function(T){Fr(this,T),Ri(this);for(var B=this.get(0,T),tt=[0,T],It=1;It<this.rows;It++)this.get(It,T)<B&&(B=this.get(It,T),tt[0]=It);return tt}},{key:"diag",value:function(){for(var T=Math.min(this.rows,this.columns),B=[],tt=0;tt<T;tt++)B.push(this.get(tt,tt));return B}},{key:"norm",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",B=0;if(T==="max")return this.max();if(T==="frobenius"){for(var tt=0;tt<this.rows;tt++)for(var It=0;It<this.columns;It++)B+=this.get(tt,It)*this.get(tt,It);return Math.sqrt(B)}throw new RangeError("unknown norm type: ".concat(T))}},{key:"cumulativeSum",value:function(){for(var T=0,B=0;B<this.rows;B++)for(var tt=0;tt<this.columns;tt++)T+=this.get(B,tt),this.set(B,tt,T);return this}},{key:"dot",value:function(T){et.isMatrix(T)&&(T=T.to1DArray());var B=this.to1DArray();if(B.length!==T.length)throw new RangeError("vectors do not have the same size");for(var tt=0,It=0;It<B.length;It++)tt+=B[It]*T[It];return tt}},{key:"mmul",value:function(T){T=yn.checkMatrix(T);for(var B=this.rows,tt=this.columns,It=T.columns,Nt=new yn(B,It),q=new Float64Array(tt),Rt=0;Rt<It;Rt++){for(var Qt=0;Qt<tt;Qt++)q[Qt]=T.get(Qt,Rt);for(var ee=0;ee<B;ee++){for(var xe=0,Pe=0;Pe<tt;Pe++)xe+=this.get(ee,Pe)*q[Pe];Nt.set(ee,Rt,xe)}}return Nt}},{key:"strassen2x2",value:function(T){T=yn.checkMatrix(T);var B=new yn(2,2),tt=this.get(0,0),It=T.get(0,0),Nt=this.get(0,1),q=T.get(0,1),Rt=this.get(1,0),Qt=T.get(1,0),ee=this.get(1,1),xe=T.get(1,1),Pe=(tt+ee)*(It+xe),He=(Rt+ee)*It,Be=tt*(q-xe),Ke=ee*(Qt-It),Qe=(tt+Nt)*xe,ze=Pe+Ke-Qe+(Nt-ee)*(Qt+xe),en=Be+Qe,wn=He+Ke,zn=Pe-He+Be+(Rt-tt)*(It+q);return B.set(0,0,ze),B.set(0,1,en),B.set(1,0,wn),B.set(1,1,zn),B}},{key:"strassen3x3",value:function(T){T=yn.checkMatrix(T);var B=new yn(3,3),tt=this.get(0,0),It=this.get(0,1),Nt=this.get(0,2),q=this.get(1,0),Rt=this.get(1,1),Qt=this.get(1,2),ee=this.get(2,0),xe=this.get(2,1),Pe=this.get(2,2),He=T.get(0,0),Be=T.get(0,1),Ke=T.get(0,2),Qe=T.get(1,0),ze=T.get(1,1),en=T.get(1,2),wn=T.get(2,0),zn=T.get(2,1),In=T.get(2,2),Xn=(tt-q)*(-Be+ze),cr=(-tt+q+Rt)*(He-Be+ze),or=(q+Rt)*(-He+Be),lr=tt*He,Ar=(-tt+ee+xe)*(He-Ke+en),Nr=(-tt+ee)*(Ke-en),Dr=(ee+xe)*(-He+Ke),Tr=(-Nt+xe+Pe)*(ze+wn-zn),Xr=(Nt-Pe)*(ze-zn),Ir=Nt*wn,vi=(xe+Pe)*(-wn+zn),bi=(-Nt+Rt+Qt)*(en+wn-In),Vi=(Nt-Qt)*(en-In),Jr=(Rt+Qt)*(-wn+In),Li=lr+Ir+It*Qe,Hi=(tt+It+Nt-q-Rt-xe-Pe)*ze+cr+or+lr+Tr+Ir+vi,qi=lr+Ar+Dr+(tt+It+Nt-Rt-Qt-ee-xe)*en+Ir+bi+Jr,xo=Xn+Rt*(-He+Be+Qe-ze-en-wn+In)+cr+lr+Ir+bi+Vi,oo=Xn+cr+or+lr+Qt*zn,ta=Ir+bi+Vi+Jr+q*Ke,ga=lr+Ar+Nr+xe*(-He+Ke+Qe-ze-en-wn+zn)+Tr+Xr+Ir,ko=Tr+Xr+Ir+vi+ee*Be,Vo=lr+Ar+Nr+Dr+Pe*In;return B.set(0,0,Li),B.set(0,1,Hi),B.set(0,2,qi),B.set(1,0,xo),B.set(1,1,oo),B.set(1,2,ta),B.set(2,0,ga),B.set(2,1,ko),B.set(2,2,Vo),B}},{key:"mmulStrassen",value:function(T){T=yn.checkMatrix(T);var B=this.clone(),tt=B.rows,It=B.columns,Nt=T.rows,q=T.columns;function Rt(xe,Pe,He){var Be=xe.rows,Ke=xe.columns;if(Be===Pe&&Ke===He)return xe;var Qe=et.zeros(Pe,He);return Qe=Qe.setSubMatrix(xe,0,0)}It!==Nt&&console.warn("Multiplying ".concat(tt," x ").concat(It," and ").concat(Nt," x ").concat(q," matrix: dimensions do not match."));var Qt=Math.max(tt,Nt),ee=Math.max(It,q);return function xe(Pe,He,Be,Ke){if(Be<=512||Ke<=512)return Pe.mmul(He);Be%2==1&&Ke%2==1?(Pe=Rt(Pe,Be+1,Ke+1),He=Rt(He,Be+1,Ke+1)):Be%2==1?(Pe=Rt(Pe,Be+1,Ke),He=Rt(He,Be+1,Ke)):Ke%2==1&&(Pe=Rt(Pe,Be,Ke+1),He=Rt(He,Be,Ke+1));var Qe=parseInt(Pe.rows/2,10),ze=parseInt(Pe.columns/2,10),en=Pe.subMatrix(0,Qe-1,0,ze-1),wn=He.subMatrix(0,Qe-1,0,ze-1),zn=Pe.subMatrix(0,Qe-1,ze,Pe.columns-1),In=He.subMatrix(0,Qe-1,ze,He.columns-1),Xn=Pe.subMatrix(Qe,Pe.rows-1,0,ze-1),cr=He.subMatrix(Qe,He.rows-1,0,ze-1),or=Pe.subMatrix(Qe,Pe.rows-1,ze,Pe.columns-1),lr=He.subMatrix(Qe,He.rows-1,ze,He.columns-1),Ar=xe(et.add(en,or),et.add(wn,lr),Qe,ze),Nr=xe(et.add(Xn,or),wn,Qe,ze),Dr=xe(en,et.sub(In,lr),Qe,ze),Tr=xe(or,et.sub(cr,wn),Qe,ze),Xr=xe(et.add(en,zn),lr,Qe,ze),Ir=xe(et.sub(Xn,en),et.add(wn,In),Qe,ze),vi=xe(et.sub(zn,or),et.add(cr,lr),Qe,ze),bi=et.add(Ar,Tr);bi.sub(Xr),bi.add(vi);var Vi=et.add(Dr,Xr),Jr=et.add(Nr,Tr),Li=et.sub(Ar,Nr);Li.add(Dr),Li.add(Ir);var Hi=et.zeros(2*bi.rows,2*bi.columns);return(Hi=(Hi=(Hi=(Hi=Hi.setSubMatrix(bi,0,0)).setSubMatrix(Vi,bi.rows,0)).setSubMatrix(Jr,0,bi.columns)).setSubMatrix(Li,bi.rows,bi.columns)).subMatrix(0,Be-1,0,Ke-1)}(B=Rt(B,Qt,ee),T=Rt(T,Qt,ee),Qt,ee)}},{key:"scaleRows",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(we(T)!=="object")throw new TypeError("options must be an object");var B=T.min,tt=B===void 0?0:B,It=T.max,Nt=It===void 0?1:It;if(!Number.isFinite(tt))throw new TypeError("min must be a number");if(!Number.isFinite(Nt))throw new TypeError("max must be a number");if(tt>=Nt)throw new RangeError("min must be smaller than max");for(var q=new yn(this.rows,this.columns),Rt=0;Rt<this.rows;Rt++){var Qt=this.getRow(Rt);Qt.length>0&&sn(Qt,{min:tt,max:Nt,output:Qt}),q.setRow(Rt,Qt)}return q}},{key:"scaleColumns",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(we(T)!=="object")throw new TypeError("options must be an object");var B=T.min,tt=B===void 0?0:B,It=T.max,Nt=It===void 0?1:It;if(!Number.isFinite(tt))throw new TypeError("min must be a number");if(!Number.isFinite(Nt))throw new TypeError("max must be a number");if(tt>=Nt)throw new RangeError("min must be smaller than max");for(var q=new yn(this.rows,this.columns),Rt=0;Rt<this.columns;Rt++){var Qt=this.getColumn(Rt);Qt.length&&sn(Qt,{min:tt,max:Nt,output:Qt}),q.setColumn(Rt,Qt)}return q}},{key:"flipRows",value:function(){for(var T=Math.ceil(this.columns/2),B=0;B<this.rows;B++)for(var tt=0;tt<T;tt++){var It=this.get(B,tt),Nt=this.get(B,this.columns-1-tt);this.set(B,tt,Nt),this.set(B,this.columns-1-tt,It)}return this}},{key:"flipColumns",value:function(){for(var T=Math.ceil(this.rows/2),B=0;B<this.columns;B++)for(var tt=0;tt<T;tt++){var It=this.get(tt,B),Nt=this.get(this.rows-1-tt,B);this.set(tt,B,Nt),this.set(this.rows-1-tt,B,It)}return this}},{key:"kroneckerProduct",value:function(T){T=yn.checkMatrix(T);for(var B=this.rows,tt=this.columns,It=T.rows,Nt=T.columns,q=new yn(B*It,tt*Nt),Rt=0;Rt<B;Rt++)for(var Qt=0;Qt<tt;Qt++)for(var ee=0;ee<It;ee++)for(var xe=0;xe<Nt;xe++)q.set(It*Rt+ee,Nt*Qt+xe,this.get(Rt,Qt)*T.get(ee,xe));return q}},{key:"transpose",value:function(){for(var T=new yn(this.columns,this.rows),B=0;B<this.rows;B++)for(var tt=0;tt<this.columns;tt++)T.set(tt,B,this.get(B,tt));return T}},{key:"sortRows",value:function(){for(var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ee,B=0;B<this.rows;B++)this.setRow(B,this.getRow(B).sort(T));return this}},{key:"sortColumns",value:function(){for(var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ee,B=0;B<this.columns;B++)this.setColumn(B,this.getColumn(B).sort(T));return this}},{key:"subMatrix",value:function(T,B,tt,It){Kr(this,T,B,tt,It);for(var Nt=new yn(B-T+1,It-tt+1),q=T;q<=B;q++)for(var Rt=tt;Rt<=It;Rt++)Nt.set(q-T,Rt-tt,this.get(q,Rt));return Nt}},{key:"subMatrixRow",value:function(T,B,tt){if(B===void 0&&(B=0),tt===void 0&&(tt=this.columns-1),B>tt||B<0||B>=this.columns||tt<0||tt>=this.columns)throw new RangeError("Argument out of range");for(var It=new yn(T.length,tt-B+1),Nt=0;Nt<T.length;Nt++)for(var q=B;q<=tt;q++){if(T[Nt]<0||T[Nt]>=this.rows)throw new RangeError("Row index out of range: ".concat(T[Nt]));It.set(Nt,q-B,this.get(T[Nt],q))}return It}},{key:"subMatrixColumn",value:function(T,B,tt){if(B===void 0&&(B=0),tt===void 0&&(tt=this.rows-1),B>tt||B<0||B>=this.rows||tt<0||tt>=this.rows)throw new RangeError("Argument out of range");for(var It=new yn(tt-B+1,T.length),Nt=0;Nt<T.length;Nt++)for(var q=B;q<=tt;q++){if(T[Nt]<0||T[Nt]>=this.columns)throw new RangeError("Column index out of range: ".concat(T[Nt]));It.set(q-B,Nt,this.get(q,T[Nt]))}return It}},{key:"setSubMatrix",value:function(T,B,tt){if((T=yn.checkMatrix(T)).isEmpty())return this;Kr(this,B,B+T.rows-1,tt,tt+T.columns-1);for(var It=0;It<T.rows;It++)for(var Nt=0;Nt<T.columns;Nt++)this.set(B+It,tt+Nt,T.get(It,Nt));return this}},{key:"selection",value:function(T,B){for(var tt=function(ee,xe,Pe){return{row:Hr(ee,xe),column:ei(ee,Pe)}}(this,T,B),It=new yn(T.length,B.length),Nt=0;Nt<tt.row.length;Nt++)for(var q=tt.row[Nt],Rt=0;Rt<tt.column.length;Rt++){var Qt=tt.column[Rt];It.set(Nt,Rt,this.get(q,Qt))}return It}},{key:"trace",value:function(){for(var T=Math.min(this.rows,this.columns),B=0,tt=0;tt<T;tt++)B+=this.get(tt,tt);return B}},{key:"clone",value:function(){for(var T=new yn(this.rows,this.columns),B=0;B<this.rows;B++)for(var tt=0;tt<this.columns;tt++)T.set(B,tt,this.get(B,tt));return T}},{key:"sum",value:function(T){switch(T){case"row":return function(B){for(var tt=Qr(B.rows),It=0;It<B.rows;++It)for(var Nt=0;Nt<B.columns;++Nt)tt[It]+=B.get(It,Nt);return tt}(this);case"column":return function(B){for(var tt=Qr(B.columns),It=0;It<B.rows;++It)for(var Nt=0;Nt<B.columns;++Nt)tt[Nt]+=B.get(It,Nt);return tt}(this);case void 0:return function(B){for(var tt=0,It=0;It<B.rows;It++)for(var Nt=0;Nt<B.columns;Nt++)tt+=B.get(It,Nt);return tt}(this);default:throw new Error("invalid option: ".concat(T))}}},{key:"product",value:function(T){switch(T){case"row":return function(B){for(var tt=Qr(B.rows,1),It=0;It<B.rows;++It)for(var Nt=0;Nt<B.columns;++Nt)tt[It]*=B.get(It,Nt);return tt}(this);case"column":return function(B){for(var tt=Qr(B.columns,1),It=0;It<B.rows;++It)for(var Nt=0;Nt<B.columns;++Nt)tt[Nt]*=B.get(It,Nt);return tt}(this);case void 0:return function(B){for(var tt=1,It=0;It<B.rows;It++)for(var Nt=0;Nt<B.columns;Nt++)tt*=B.get(It,Nt);return tt}(this);default:throw new Error("invalid option: ".concat(T))}}},{key:"mean",value:function(T){var B=this.sum(T);switch(T){case"row":for(var tt=0;tt<this.rows;tt++)B[tt]/=this.columns;return B;case"column":for(var It=0;It<this.columns;It++)B[It]/=this.rows;return B;case void 0:return B/this.size;default:throw new Error("invalid option: ".concat(T))}}},{key:"variance",value:function(T){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(we(T)==="object"&&(B=T,T=void 0),we(B)!=="object")throw new TypeError("options must be an object");var tt=B,It=tt.unbiased,Nt=It===void 0||It,q=tt.mean,Rt=q===void 0?this.mean(T):q;if(typeof Nt!="boolean")throw new TypeError("unbiased must be a boolean");switch(T){case"row":if(!Array.isArray(Rt))throw new TypeError("mean must be an array");return Si(this,Nt,Rt);case"column":if(!Array.isArray(Rt))throw new TypeError("mean must be an array");return Gi(this,Nt,Rt);case void 0:if(typeof Rt!="number")throw new TypeError("mean must be a number");return ca(this,Nt,Rt);default:throw new Error("invalid option: ".concat(T))}}},{key:"standardDeviation",value:function(T,B){we(T)==="object"&&(B=T,T=void 0);var tt=this.variance(T,B);if(T===void 0)return Math.sqrt(tt);for(var It=0;It<tt.length;It++)tt[It]=Math.sqrt(tt[It]);return tt}},{key:"center",value:function(T){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(we(T)==="object"&&(B=T,T=void 0),we(B)!=="object")throw new TypeError("options must be an object");var tt=B,It=tt.center,Nt=It===void 0?this.mean(T):It;switch(T){case"row":if(!Array.isArray(Nt))throw new TypeError("center must be an array");return ha(this,Nt),this;case"column":if(!Array.isArray(Nt))throw new TypeError("center must be an array");return na(this,Nt),this;case void 0:if(typeof Nt!="number")throw new TypeError("center must be a number");return Zi(this,Nt),this;default:throw new Error("invalid option: ".concat(T))}}},{key:"scale",value:function(T){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(we(T)==="object"&&(B=T,T=void 0),we(B)!=="object")throw new TypeError("options must be an object");var tt=B.scale;switch(T){case"row":if(tt===void 0)tt=ve(this);else if(!Array.isArray(tt))throw new TypeError("scale must be an array");return U(this,tt),this;case"column":if(tt===void 0)tt=G(this);else if(!Array.isArray(tt))throw new TypeError("scale must be an array");return nt(this,tt),this;case void 0:if(tt===void 0)tt=vt(this);else if(typeof tt!="number")throw new TypeError("scale must be a number");return Gt(this,tt),this;default:throw new Error("invalid option: ".concat(T))}}},{key:"toString",value:function(T){return jr(this,T)}},{key:"size",get:function(){return this.rows*this.columns}}],[{key:"from1DArray",value:function(T,B,tt){if(T*B!==tt.length)throw new RangeError("data length does not match given dimensions");for(var It=new yn(T,B),Nt=0;Nt<T;Nt++)for(var q=0;q<B;q++)It.set(Nt,q,tt[Nt*B+q]);return It}},{key:"rowVector",value:function(T){for(var B=new yn(1,T.length),tt=0;tt<T.length;tt++)B.set(0,tt,T[tt]);return B}},{key:"columnVector",value:function(T){for(var B=new yn(T.length,1),tt=0;tt<T.length;tt++)B.set(tt,0,T[tt]);return B}},{key:"zeros",value:function(T,B){return new yn(T,B)}},{key:"ones",value:function(T,B){return new yn(T,B).fill(1)}},{key:"rand",value:function(T,B){var tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(we(tt)!=="object")throw new TypeError("options must be an object");for(var It=tt.random,Nt=It===void 0?Math.random:It,q=new yn(T,B),Rt=0;Rt<T;Rt++)for(var Qt=0;Qt<B;Qt++)q.set(Rt,Qt,Nt());return q}},{key:"randInt",value:function(T,B){var tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(we(tt)!=="object")throw new TypeError("options must be an object");var It=tt.min,Nt=It===void 0?0:It,q=tt.max,Rt=q===void 0?1e3:q,Qt=tt.random,ee=Qt===void 0?Math.random:Qt;if(!Number.isInteger(Nt))throw new TypeError("min must be an integer");if(!Number.isInteger(Rt))throw new TypeError("max must be an integer");if(Nt>=Rt)throw new RangeError("min must be smaller than max");for(var xe=Rt-Nt,Pe=new yn(T,B),He=0;He<T;He++)for(var Be=0;Be<B;Be++){var Ke=Nt+Math.round(ee()*xe);Pe.set(He,Be,Ke)}return Pe}},{key:"eye",value:function(T,B,tt){B===void 0&&(B=T),tt===void 0&&(tt=1);for(var It=Math.min(T,B),Nt=this.zeros(T,B),q=0;q<It;q++)Nt.set(q,q,tt);return Nt}},{key:"diag",value:function(T,B,tt){var It=T.length;B===void 0&&(B=It),tt===void 0&&(tt=B);for(var Nt=Math.min(It,B,tt),q=this.zeros(B,tt),Rt=0;Rt<Nt;Rt++)q.set(Rt,Rt,T[Rt]);return q}},{key:"min",value:function(T,B){T=this.checkMatrix(T),B=this.checkMatrix(B);for(var tt=T.rows,It=T.columns,Nt=new yn(tt,It),q=0;q<tt;q++)for(var Rt=0;Rt<It;Rt++)Nt.set(q,Rt,Math.min(T.get(q,Rt),B.get(q,Rt)));return Nt}},{key:"max",value:function(T,B){T=this.checkMatrix(T),B=this.checkMatrix(B);for(var tt=T.rows,It=T.columns,Nt=new this(tt,It),q=0;q<tt;q++)for(var Rt=0;Rt<It;Rt++)Nt.set(q,Rt,Math.max(T.get(q,Rt),B.get(q,Rt)));return Nt}},{key:"checkMatrix",value:function(T){return et.isMatrix(T)?T:new yn(T)}},{key:"isMatrix",value:function(T){return T!=null&&T.klass==="Matrix"}}]),et}();function Ee(et,z){return et-z}Xt.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Xt.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return jr(this)}),Xt.random=Xt.rand,Xt.randomInt=Xt.randInt,Xt.diagonal=Xt.diag,Xt.prototype.diagonal=Xt.prototype.diag,Xt.identity=Xt.eye,Xt.prototype.negate=Xt.prototype.neg,Xt.prototype.tensorProduct=Xt.prototype.kroneckerProduct;var Vt,ce,yn=function(et){(function(B,tt){if(typeof tt!="function"&&tt!==null)throw new TypeError("Super expression must either be null or a function");B.prototype=Object.create(tt&&tt.prototype,{constructor:{value:B,writable:!0,configurable:!0}}),tt&&Jt(B,tt)})(T,et);var z=ie(T);function T(B,tt){var It;if(cn(this,T),It=z.call(this),T.isMatrix(B))return ue(It,B.clone());if(Number.isInteger(B)&&B>=0){if(It.data=[],!(Number.isInteger(tt)&&tt>=0))throw new TypeError("nColumns must be a positive integer");for(var Nt=0;Nt<B;Nt++)It.data.push(new Float64Array(tt))}else{if(!Array.isArray(B))throw new TypeError("First argument must be a positive number or an array");var q=B;if(typeof(tt=(B=q.length)?q[0].length:0)!="number")throw new TypeError("Data must be a 2D array with at least one element");It.data=[];for(var Rt=0;Rt<B;Rt++){if(q[Rt].length!==tt)throw new RangeError("Inconsistent array dimensions");It.data.push(Float64Array.from(q[Rt]))}}return It.rows=B,It.columns=tt,It}return _t(T,[{key:"set",value:function(tt,It,Nt){return this.data[tt][It]=Nt,this}},{key:"get",value:function(tt,It){return this.data[tt][It]}},{key:"removeRow",value:function(tt){return _r(this,tt),this.data.splice(tt,1),this.rows-=1,this}},{key:"addRow",value:function(tt,It){return It===void 0&&(It=tt,tt=this.rows),_r(this,tt,!0),It=Float64Array.from(Lr(this,It)),this.data.splice(tt,0,It),this.rows+=1,this}},{key:"removeColumn",value:function(tt){Fr(this,tt);for(var It=0;It<this.rows;It++){for(var Nt=new Float64Array(this.columns-1),q=0;q<tt;q++)Nt[q]=this.data[It][q];for(var Rt=tt+1;Rt<this.columns;Rt++)Nt[Rt-1]=this.data[It][Rt];this.data[It]=Nt}return this.columns-=1,this}},{key:"addColumn",value:function(tt,It){It===void 0&&(It=tt,tt=this.columns),Fr(this,tt,!0),It=Gr(this,It);for(var Nt=0;Nt<this.rows;Nt++){for(var q=new Float64Array(this.columns+1),Rt=0;Rt<tt;Rt++)q[Rt]=this.data[Nt][Rt];for(q[Rt++]=It[Nt];Rt<this.columns+1;Rt++)q[Rt]=this.data[Nt][Rt-1];this.data[Nt]=q}return this.columns+=1,this}}]),T}(Xt);function Bn(et){return(Bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(et)}function Zn(et,z){for(var T=0;T<z.length;T++){var B=z[T];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(et,B.key,B)}}function Kn(et,z){return(Kn=Object.setPrototypeOf||function(T,B){return T.__proto__=B,T})(et,z)}function $e(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=L(et);if(z){var tt=L(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return je(this,T)}}function je(et,z){return!z||Bn(z)!=="object"&&typeof z!="function"?function(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}(et):z}function L(et){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(et)}ce=yn,(Vt=Xt).prototype.add=function(et){return typeof et=="number"?this.addS(et):this.addM(et)},Vt.prototype.addS=function(et){for(var z=0;z<this.rows;z++)for(var T=0;T<this.columns;T++)this.set(z,T,this.get(z,T)+et);return this},Vt.prototype.addM=function(et){if(et=ce.checkMatrix(et),this.rows!==et.rows||this.columns!==et.columns)throw new RangeError("Matrices dimensions must be equal");for(var z=0;z<this.rows;z++)for(var T=0;T<this.columns;T++)this.set(z,T,this.get(z,T)+et.get(z,T));return this},Vt.add=function(et,z){return new ce(et).add(z)},Vt.prototype.sub=function(et){return typeof et=="number"?this.subS(et):this.subM(et)},Vt.prototype.subS=function(et){for(var z=0;z<this.rows;z++)for(var T=0;T<this.columns;T++)this.set(z,T,this.get(z,T)-et);return this},Vt.prototype.subM=function(et){if(et=ce.checkMatrix(et),this.rows!==et.rows||this.columns!==et.columns)throw new RangeError("Matrices dimensions must be equal");for(var z=0;z<this.rows;z++)for(var T=0;T<this.columns;T++)this.set(z,T,this.get(z,T)-et.get(z,T));return this},Vt.sub=function(et,z){return new ce(et).sub(z)},Vt.prototype.subtract=Vt.prototype.sub,Vt.prototype.subtractS=Vt.prototype.subS,Vt.prototype.subtractM=Vt.prototype.subM,Vt.subtract=Vt.sub,Vt.prototype.mul=function(et){return typeof et=="number"?this.mulS(et):this.mulM(et)},Vt.prototype.mulS=function(et){for(var z=0;z<this.rows;z++)for(var T=0;T<this.columns;T++)this.set(z,T,this.get(z,T)*et);return this},Vt.prototype.mulM=function(et){if(et=ce.checkMatrix(et),this.rows!==et.rows||this.columns!==et.columns)throw new RangeError("Matrices dimensions must be equal");for(var z=0;z<this.rows;z++)for(var T=0;T<this.columns;T++)this.set(z,T,this.get(z,T)*et.get(z,T));return this},Vt.mul=function(et,z){return new ce(et).mul(z)},Vt.prototype.multiply=Vt.prototype.mul,Vt.prototype.multiplyS=Vt.prototype.mulS,Vt.prototype.multiplyM=Vt.prototype.mulM,Vt.multiply=Vt.mul,Vt.prototype.div=function(et){return typeof et=="number"?this.divS(et):this.divM(et)},Vt.prototype.divS=function(et){for(var z=0;z<this.rows;z++)for(var T=0;T<this.columns;T++)this.set(z,T,this.get(z,T)/et);return this},Vt.prototype.divM=function(et){if(et=ce.checkMatrix(et),this.rows!==et.rows||this.columns!==et.columns)throw new RangeError("Matrices dimensions must be equal");for(var z=0;z<this.rows;z++)for(var T=0;T<this.columns;T++)this.set(z,T,this.get(z,T)/et.get(z,T));return this},Vt.div=function(et,z){return new ce(et).div(z)},Vt.prototype.divide=Vt.prototype.div,Vt.prototype.divideS=Vt.prototype.divS,Vt.prototype.divideM=Vt.prototype.divM,Vt.divide=Vt.div,Vt.prototype.mod=function(et){return typeof et=="number"?this.modS(et):this.modM(et)},Vt.prototype.modS=function(et){for(var z=0;z<this.rows;z++)for(var T=0;T<this.columns;T++)this.set(z,T,this.get(z,T)%et);return this},Vt.prototype.modM=function(et){if(et=ce.checkMatrix(et),this.rows!==et.rows||this.columns!==et.columns)throw new RangeError("Matrices dimensions must be equal");for(var z=0;z<this.rows;z++)for(var T=0;T<this.columns;T++)this.set(z,T,this.get(z,T)%et.get(z,T));return this},Vt.mod=function(et,z){return new ce(et).mod(z)},Vt.prototype.modulus=Vt.prototype.mod,Vt.prototype.modulusS=Vt.prototype.modS,Vt.prototype.modulusM=Vt.prototype.modM,Vt.modulus=Vt.mod,Vt.prototype.and=function(et){return typeof et=="number"?this.andS(et):this.andM(et)},Vt.prototype.andS=function(et){for(var z=0;z<this.rows;z++)for(var T=0;T<this.columns;T++)this.set(z,T,this.get(z,T)&et);return this},Vt.prototype.andM=function(et){if(et=ce.checkMatrix(et),this.rows!==et.rows||this.columns!==et.columns)throw new RangeError("Matrices dimensions must be equal");for(var z=0;z<this.rows;z++)for(var T=0;T<this.columns;T++)this.set(z,T,this.get(z,T)&et.get(z,T));return this},Vt.and=function(et,z){return new ce(et).and(z)},Vt.prototype.or=function(et){return typeof et=="number"?this.orS(et):this.orM(et)},Vt.prototype.orS=function(et){for(var z=0;z<this.rows;z++)for(var T=0;T<this.columns;T++)this.set(z,T,this.get(z,T)|et);return this},Vt.prototype.orM=function(et){if(et=ce.checkMatrix(et),this.rows!==et.rows||this.columns!==et.columns)throw new RangeError("Matrices dimensions must be equal");for(var z=0;z<this.rows;z++)for(var T=0;T<this.columns;T++)this.set(z,T,this.get(z,T)|et.get(z,T));return this},Vt.or=function(et,z){return new ce(et).or(z)},Vt.prototype.xor=function(et){return typeof et=="number"?this.xorS(et):this.xorM(et)},Vt.prototype.xorS=function(et){for(var z=0;z<this.rows;z++)for(var T=0;T<this.columns;T++)this.set(z,T,this.get(z,T)^et);return this},Vt.prototype.xorM=function(et){if(et=ce.checkMatrix(et),this.rows!==et.rows||this.columns!==et.columns)throw new RangeError("Matrices dimensions must be equal");for(var z=0;z<this.rows;z++)for(var T=0;T<this.columns;T++)this.set(z,T,this.get(z,T)^et.get(z,T));return this},Vt.xor=function(et,z){return new ce(et).xor(z)},Vt.prototype.leftShift=function(et){return typeof et=="number"?this.leftShiftS(et):this.leftShiftM(et)},Vt.prototype.leftShiftS=function(et){for(var z=0;z<this.rows;z++)for(var T=0;T<this.columns;T++)this.set(z,T,this.get(z,T)<<et);return this},Vt.prototype.leftShiftM=function(et){if(et=ce.checkMatrix(et),this.rows!==et.rows||this.columns!==et.columns)throw new RangeError("Matrices dimensions must be equal");for(var z=0;z<this.rows;z++)for(var T=0;T<this.columns;T++)this.set(z,T,this.get(z,T)<<et.get(z,T));return this},Vt.leftShift=function(et,z){return new ce(et).leftShift(z)},Vt.prototype.signPropagatingRightShift=function(et){return typeof et=="number"?this.signPropagatingRightShiftS(et):this.signPropagatingRightShiftM(et)},Vt.prototype.signPropagatingRightShiftS=function(et){for(var z=0;z<this.rows;z++)for(var T=0;T<this.columns;T++)this.set(z,T,this.get(z,T)>>et);return this},Vt.prototype.signPropagatingRightShiftM=function(et){if(et=ce.checkMatrix(et),this.rows!==et.rows||this.columns!==et.columns)throw new RangeError("Matrices dimensions must be equal");for(var z=0;z<this.rows;z++)for(var T=0;T<this.columns;T++)this.set(z,T,this.get(z,T)>>et.get(z,T));return this},Vt.signPropagatingRightShift=function(et,z){return new ce(et).signPropagatingRightShift(z)},Vt.prototype.rightShift=function(et){return typeof et=="number"?this.rightShiftS(et):this.rightShiftM(et)},Vt.prototype.rightShiftS=function(et){for(var z=0;z<this.rows;z++)for(var T=0;T<this.columns;T++)this.set(z,T,this.get(z,T)>>>et);return this},Vt.prototype.rightShiftM=function(et){if(et=ce.checkMatrix(et),this.rows!==et.rows||this.columns!==et.columns)throw new RangeError("Matrices dimensions must be equal");for(var z=0;z<this.rows;z++)for(var T=0;T<this.columns;T++)this.set(z,T,this.get(z,T)>>>et.get(z,T));return this},Vt.rightShift=function(et,z){return new ce(et).rightShift(z)},Vt.prototype.zeroFillRightShift=Vt.prototype.rightShift,Vt.prototype.zeroFillRightShiftS=Vt.prototype.rightShiftS,Vt.prototype.zeroFillRightShiftM=Vt.prototype.rightShiftM,Vt.zeroFillRightShift=Vt.rightShift,Vt.prototype.not=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,~this.get(et,z));return this},Vt.not=function(et){return new ce(et).not()},Vt.prototype.abs=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.abs(this.get(et,z)));return this},Vt.abs=function(et){return new ce(et).abs()},Vt.prototype.acos=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.acos(this.get(et,z)));return this},Vt.acos=function(et){return new ce(et).acos()},Vt.prototype.acosh=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.acosh(this.get(et,z)));return this},Vt.acosh=function(et){return new ce(et).acosh()},Vt.prototype.asin=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.asin(this.get(et,z)));return this},Vt.asin=function(et){return new ce(et).asin()},Vt.prototype.asinh=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.asinh(this.get(et,z)));return this},Vt.asinh=function(et){return new ce(et).asinh()},Vt.prototype.atan=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.atan(this.get(et,z)));return this},Vt.atan=function(et){return new ce(et).atan()},Vt.prototype.atanh=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.atanh(this.get(et,z)));return this},Vt.atanh=function(et){return new ce(et).atanh()},Vt.prototype.cbrt=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.cbrt(this.get(et,z)));return this},Vt.cbrt=function(et){return new ce(et).cbrt()},Vt.prototype.ceil=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.ceil(this.get(et,z)));return this},Vt.ceil=function(et){return new ce(et).ceil()},Vt.prototype.clz32=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.clz32(this.get(et,z)));return this},Vt.clz32=function(et){return new ce(et).clz32()},Vt.prototype.cos=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.cos(this.get(et,z)));return this},Vt.cos=function(et){return new ce(et).cos()},Vt.prototype.cosh=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.cosh(this.get(et,z)));return this},Vt.cosh=function(et){return new ce(et).cosh()},Vt.prototype.exp=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.exp(this.get(et,z)));return this},Vt.exp=function(et){return new ce(et).exp()},Vt.prototype.expm1=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.expm1(this.get(et,z)));return this},Vt.expm1=function(et){return new ce(et).expm1()},Vt.prototype.floor=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.floor(this.get(et,z)));return this},Vt.floor=function(et){return new ce(et).floor()},Vt.prototype.fround=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.fround(this.get(et,z)));return this},Vt.fround=function(et){return new ce(et).fround()},Vt.prototype.log=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.log(this.get(et,z)));return this},Vt.log=function(et){return new ce(et).log()},Vt.prototype.log1p=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.log1p(this.get(et,z)));return this},Vt.log1p=function(et){return new ce(et).log1p()},Vt.prototype.log10=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.log10(this.get(et,z)));return this},Vt.log10=function(et){return new ce(et).log10()},Vt.prototype.log2=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.log2(this.get(et,z)));return this},Vt.log2=function(et){return new ce(et).log2()},Vt.prototype.round=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.round(this.get(et,z)));return this},Vt.round=function(et){return new ce(et).round()},Vt.prototype.sign=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.sign(this.get(et,z)));return this},Vt.sign=function(et){return new ce(et).sign()},Vt.prototype.sin=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.sin(this.get(et,z)));return this},Vt.sin=function(et){return new ce(et).sin()},Vt.prototype.sinh=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.sinh(this.get(et,z)));return this},Vt.sinh=function(et){return new ce(et).sinh()},Vt.prototype.sqrt=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.sqrt(this.get(et,z)));return this},Vt.sqrt=function(et){return new ce(et).sqrt()},Vt.prototype.tan=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.tan(this.get(et,z)));return this},Vt.tan=function(et){return new ce(et).tan()},Vt.prototype.tanh=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.tanh(this.get(et,z)));return this},Vt.tanh=function(et){return new ce(et).tanh()},Vt.prototype.trunc=function(){for(var et=0;et<this.rows;et++)for(var z=0;z<this.columns;z++)this.set(et,z,Math.trunc(this.get(et,z)));return this},Vt.trunc=function(et){return new ce(et).trunc()},Vt.pow=function(et,z){return new ce(et).pow(z)},Vt.prototype.pow=function(et){return typeof et=="number"?this.powS(et):this.powM(et)},Vt.prototype.powS=function(et){for(var z=0;z<this.rows;z++)for(var T=0;T<this.columns;T++)this.set(z,T,Math.pow(this.get(z,T),et));return this},Vt.prototype.powM=function(et){if(et=ce.checkMatrix(et),this.rows!==et.rows||this.columns!==et.columns)throw new RangeError("Matrices dimensions must be equal");for(var z=0;z<this.rows;z++)for(var T=0;T<this.columns;T++)this.set(z,T,Math.pow(this.get(z,T),et.get(z,T)));return this};var Et=function(et){(function(Nt,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(q&&q.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),q&&Kn(Nt,q)})(It,et);var z,T,B,tt=$e(It);function It(Nt){var q;return function(Rt,Qt){if(!(Rt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(q=tt.call(this)).data=Nt,q.rows=Nt.length,q.columns=Nt[0].length,q}return z=It,(T=[{key:"set",value:function(q,Rt,Qt){return this.data[q][Rt]=Qt,this}},{key:"get",value:function(q,Rt){return this.data[q][Rt]}}])&&Zn(z.prototype,T),B&&Zn(z,B),It}(Xt);function $t(et,z){var T=0;return Math.abs(et)>Math.abs(z)?(T=z/et,Math.abs(et)*Math.sqrt(1+T*T)):z!==0?(T=et/z,Math.abs(z)*Math.sqrt(1+T*T)):0}function ye(et,z){if(!(et instanceof z))throw new TypeError("Cannot call a class as a function")}function Zt(et,z){for(var T=0;T<z.length;T++){var B=z[T];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(et,B.key,B)}}var de=function(){function et(tt){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ye(this,et),(tt=Et.checkMatrix(tt)).isEmpty())throw new Error("Matrix must be non-empty");var Nt,q=tt.rows,Rt=tt.columns,Qt=It.computeLeftSingularVectors,ee=Qt===void 0||Qt,xe=It.computeRightSingularVectors,Pe=xe===void 0||xe,He=It.autoTranspose,Be=He!==void 0&&He,Ke=Boolean(ee),Qe=Boolean(Pe),ze=!1;if(q<Rt)if(Be){q=(Nt=tt.transpose()).rows,Rt=Nt.columns,ze=!0;var en=Ke;Ke=Qe,Qe=en}else Nt=tt.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else Nt=tt.clone();for(var wn=Math.min(q,Rt),zn=Math.min(q+1,Rt),In=new Float64Array(zn),Xn=new yn(q,wn),cr=new yn(Rt,Rt),or=new Float64Array(Rt),lr=new Float64Array(q),Ar=new Float64Array(zn),Nr=0;Nr<zn;Nr++)Ar[Nr]=Nr;for(var Dr=Math.min(q-1,Rt),Tr=Math.max(0,Math.min(Rt-2,q)),Xr=Math.max(Dr,Tr),Ir=0;Ir<Xr;Ir++){if(Ir<Dr){In[Ir]=0;for(var vi=Ir;vi<q;vi++)In[Ir]=$t(In[Ir],Nt.get(vi,Ir));if(In[Ir]!==0){Nt.get(Ir,Ir)<0&&(In[Ir]=-In[Ir]);for(var bi=Ir;bi<q;bi++)Nt.set(bi,Ir,Nt.get(bi,Ir)/In[Ir]);Nt.set(Ir,Ir,Nt.get(Ir,Ir)+1)}In[Ir]=-In[Ir]}for(var Vi=Ir+1;Vi<Rt;Vi++){if(Ir<Dr&&In[Ir]!==0){for(var Jr=0,Li=Ir;Li<q;Li++)Jr+=Nt.get(Li,Ir)*Nt.get(Li,Vi);Jr=-Jr/Nt.get(Ir,Ir);for(var Hi=Ir;Hi<q;Hi++)Nt.set(Hi,Vi,Nt.get(Hi,Vi)+Jr*Nt.get(Hi,Ir))}or[Vi]=Nt.get(Ir,Vi)}if(Ke&&Ir<Dr)for(var qi=Ir;qi<q;qi++)Xn.set(qi,Ir,Nt.get(qi,Ir));if(Ir<Tr){or[Ir]=0;for(var xo=Ir+1;xo<Rt;xo++)or[Ir]=$t(or[Ir],or[xo]);if(or[Ir]!==0){or[Ir+1]<0&&(or[Ir]=0-or[Ir]);for(var oo=Ir+1;oo<Rt;oo++)or[oo]/=or[Ir];or[Ir+1]+=1}if(or[Ir]=-or[Ir],Ir+1<q&&or[Ir]!==0){for(var ta=Ir+1;ta<q;ta++)lr[ta]=0;for(var ga=Ir+1;ga<q;ga++)for(var ko=Ir+1;ko<Rt;ko++)lr[ga]+=or[ko]*Nt.get(ga,ko);for(var Vo=Ir+1;Vo<Rt;Vo++)for(var Cs=-or[Vo]/or[Ir+1],fs=Ir+1;fs<q;fs++)Nt.set(fs,Vo,Nt.get(fs,Vo)+Cs*lr[fs])}if(Qe)for(var zs=Ir+1;zs<Rt;zs++)cr.set(zs,Ir,or[zs])}}var To=Math.min(Rt,q+1);if(Dr<Rt&&(In[Dr]=Nt.get(Dr,Dr)),q<To&&(In[To-1]=0),Tr+1<To&&(or[Tr]=Nt.get(Tr,To-1)),or[To-1]=0,Ke){for(var Vc=Dr;Vc<wn;Vc++){for(var md=0;md<q;md++)Xn.set(md,Vc,0);Xn.set(Vc,Vc,1)}for(var Uo=Dr-1;Uo>=0;Uo--)if(In[Uo]!==0){for(var Yc=Uo+1;Yc<wn;Yc++){for(var fh=0,hh=Uo;hh<q;hh++)fh+=Xn.get(hh,Uo)*Xn.get(hh,Yc);fh=-fh/Xn.get(Uo,Uo);for(var Xc=Uo;Xc<q;Xc++)Xn.set(Xc,Yc,Xn.get(Xc,Yc)+fh*Xn.get(Xc,Uo))}for(var dh=Uo;dh<q;dh++)Xn.set(dh,Uo,-Xn.get(dh,Uo));Xn.set(Uo,Uo,1+Xn.get(Uo,Uo));for(var yd=0;yd<Uo-1;yd++)Xn.set(yd,Uo,0)}else{for(var bd=0;bd<q;bd++)Xn.set(bd,Uo,0);Xn.set(Uo,Uo,1)}}if(Qe)for(var as=Rt-1;as>=0;as--){if(as<Tr&&or[as]!==0)for(var Hc=as+1;Hc<Rt;Hc++){for(var vh=0,ph=as+1;ph<Rt;ph++)vh+=cr.get(ph,as)*cr.get(ph,Hc);vh=-vh/cr.get(as+1,as);for(var Kc=as+1;Kc<Rt;Kc++)cr.set(Kc,Hc,cr.get(Kc,Hc)+vh*cr.get(Kc,as))}for(var xd=0;xd<Rt;xd++)cr.set(xd,as,0);cr.set(as,as,1)}for(var Id=To-1,Pd=Number.EPSILON;To>0;){var la=void 0,Jc=void 0;for(la=To-2;la>=-1&&la!==-1;la--){var Rd=Number.MIN_VALUE+Pd*Math.abs(In[la]+Math.abs(In[la+1]));if(Math.abs(or[la])<=Rd||Number.isNaN(or[la])){or[la]=0;break}}if(la===To-2)Jc=4;else{var hs=void 0;for(hs=To-1;hs>=la&&hs!==la;hs--){var kd=(hs!==To?Math.abs(or[hs]):0)+(hs!==la+1?Math.abs(or[hs-1]):0);if(Math.abs(In[hs])<=Pd*kd){In[hs]=0;break}}hs===la?Jc=3:hs===To-1?Jc=1:(Jc=2,la=hs)}switch(la++,Jc){case 1:var Od=or[To-2];or[To-2]=0;for(var bs=To-2;bs>=la;bs--){var Qc=$t(In[bs],Od),Ed=In[bs]/Qc,Sd=Od/Qc;if(In[bs]=Qc,bs!==la&&(Od=-Sd*or[bs-1],or[bs-1]=Ed*or[bs-1]),Qe)for(var uu=0;uu<Rt;uu++)Qc=Ed*cr.get(uu,bs)+Sd*cr.get(uu,To-1),cr.set(uu,To-1,-Sd*cr.get(uu,bs)+Ed*cr.get(uu,To-1)),cr.set(uu,bs,Qc)}break;case 2:var wd=or[la-1];or[la-1]=0;for(var Ms=la;Ms<To;Ms++){var Zc=$t(In[Ms],wd),Cd=In[Ms]/Zc,Md=wd/Zc;if(In[Ms]=Zc,wd=-Md*or[Ms],or[Ms]=Cd*or[Ms],Ke)for(var cu=0;cu<q;cu++)Zc=Cd*Xn.get(cu,Ms)+Md*Xn.get(cu,la-1),Xn.set(cu,la-1,-Md*Xn.get(cu,Ms)+Cd*Xn.get(cu,la-1)),Xn.set(cu,Ms,Zc)}break;case 3:var $c=Math.max(Math.abs(In[To-1]),Math.abs(In[To-2]),Math.abs(or[To-2]),Math.abs(In[la]),Math.abs(or[la])),cc=In[To-1]/$c,Dd=In[To-2]/$c,gh=or[To-2]/$c,Ad=In[la]/$c,Nd=or[la]/$c,Ru=((Dd+cc)*(Dd-cc)+gh*gh)/2,mh=cc*gh*(cc*gh),Td=0;Ru===0&&mh===0||(Td=mh/(Ru+(Td=Ru<0?0-Math.sqrt(Ru*Ru+mh):Math.sqrt(Ru*Ru+mh))));for(var ku=(Ad+cc)*(Ad-cc)+Td,lc=Ad*Nd,lo=la;lo<To-1;lo++){var os=$t(ku,lc);os===0&&(os=Number.MIN_VALUE);var As=ku/os,Ts=lc/os;if(lo!==la&&(or[lo-1]=os),ku=As*In[lo]+Ts*or[lo],or[lo]=As*or[lo]-Ts*In[lo],lc=Ts*In[lo+1],In[lo+1]=As*In[lo+1],Qe)for(var lu=0;lu<Rt;lu++)os=As*cr.get(lu,lo)+Ts*cr.get(lu,lo+1),cr.set(lu,lo+1,-Ts*cr.get(lu,lo)+As*cr.get(lu,lo+1)),cr.set(lu,lo,os);if((os=$t(ku,lc))===0&&(os=Number.MIN_VALUE),As=ku/os,Ts=lc/os,In[lo]=os,ku=As*or[lo]+Ts*In[lo+1],In[lo+1]=-Ts*or[lo]+As*In[lo+1],lc=Ts*or[lo+1],or[lo+1]=As*or[lo+1],Ke&&lo<q-1)for(var fu=0;fu<q;fu++)os=As*Xn.get(fu,lo)+Ts*Xn.get(fu,lo+1),Xn.set(fu,lo+1,-Ts*Xn.get(fu,lo)+As*Xn.get(fu,lo+1)),Xn.set(fu,lo,os)}or[To-2]=ku;break;case 4:if(In[la]<=0&&(In[la]=In[la]<0?-In[la]:0,Qe))for(var yh=0;yh<=Id;yh++)cr.set(yh,la,-cr.get(yh,la));for(;la<Id&&!(In[la]>=In[la+1]);){var qc=In[la];if(In[la]=In[la+1],In[la+1]=qc,Qe&&la<Rt-1)for(var fc=0;fc<Rt;fc++)qc=cr.get(fc,la+1),cr.set(fc,la+1,cr.get(fc,la)),cr.set(fc,la,qc);if(Ke&&la<q-1)for(var hc=0;hc<q;hc++)qc=Xn.get(hc,la+1),Xn.set(hc,la+1,Xn.get(hc,la)),Xn.set(hc,la,qc);la++}To--}}if(ze){var Ld=cr;cr=Xn,Xn=Ld}this.m=q,this.n=Rt,this.s=In,this.U=Xn,this.V=cr}var z,T,B;return z=et,(T=[{key:"solve",value:function(It){for(var Nt=It,q=this.threshold,Rt=this.s.length,Qt=yn.zeros(Rt,Rt),ee=0;ee<Rt;ee++)Math.abs(this.s[ee])<=q?Qt.set(ee,ee,0):Qt.set(ee,ee,1/this.s[ee]);for(var xe=this.U,Pe=this.rightSingularVectors,He=Pe.mmul(Qt),Be=Pe.rows,Ke=xe.rows,Qe=yn.zeros(Be,Ke),ze=0;ze<Be;ze++)for(var en=0;en<Ke;en++){for(var wn=0,zn=0;zn<Rt;zn++)wn+=He.get(ze,zn)*xe.get(en,zn);Qe.set(ze,en,wn)}return Qe.mmul(Nt)}},{key:"solveForDiagonal",value:function(It){return this.solve(yn.diag(It))}},{key:"inverse",value:function(){for(var It=this.V,Nt=this.threshold,q=It.rows,Rt=It.columns,Qt=new yn(q,this.s.length),ee=0;ee<q;ee++)for(var xe=0;xe<Rt;xe++)Math.abs(this.s[xe])>Nt&&Qt.set(ee,xe,It.get(ee,xe)/this.s[xe]);for(var Pe=this.U,He=Pe.rows,Be=Pe.columns,Ke=new yn(q,He),Qe=0;Qe<q;Qe++)for(var ze=0;ze<He;ze++){for(var en=0,wn=0;wn<Be;wn++)en+=Qt.get(Qe,wn)*Pe.get(ze,wn);Ke.set(Qe,ze,en)}return Ke}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var It=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,Nt=0,q=this.s,Rt=0,Qt=q.length;Rt<Qt;Rt++)q[Rt]>It&&Nt++;return Nt}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return yn.diag(this.s)}}])&&Zt(z.prototype,T),B&&Zt(z,B),et}();function he(et,z){for(var T=0;T<z.length;T++){var B=z[T];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(et,B.key,B)}}var le=function(){function et(tt){(function(It,Nt){if(!(It instanceof Nt))throw new TypeError("Cannot call a class as a function")})(this,et),this.distances=tt.distances,this.dimension=tt.dimension||2,this.linkDistance=tt.linkDistance}var z,T,B;return z=et,(T=[{key:"layout",value:function(){var It=this.dimension,Nt=this.distances,q=this.linkDistance;try{var Rt=yn.mul(yn.pow(Nt,2),-.5),Qt=Rt.mean("row"),ee=Rt.mean("column"),xe=Rt.mean();Rt.add(xe).subRowVector(Qt).subColumnVector(ee);var Pe=new de(Rt),He=yn.sqrt(Pe.diagonalMatrix).diagonal();return Pe.leftSingularVectors.toJSON().map(function(en){return yn.mul([en],[He]).toJSON()[0].splice(0,It)})}catch(en){for(var Be=[],Ke=0;Ke<Nt.length;Ke++){var Qe=Math.random()*q,ze=Math.random()*q;Be.push([Qe,ze])}return Be}}}])&&he(z.prototype,T),B&&he(z,B),et}();function Me(et,z){for(var T=0;T<z.length;T++){var B=z[T];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(et,B.key,B)}}var Ve=function(){function et(tt){(function(It,Nt){if(!(It instanceof Nt))throw new TypeError("Cannot call a class as a function")})(this,et),this.disp=[],this.positions=tt.positions,this.adjMatrix=tt.adjMatrix,this.focusID=tt.focusID,this.radii=tt.radii,this.iterations=tt.iterations||10,this.height=tt.height||10,this.width=tt.width||10,this.speed=tt.speed||100,this.gravity=tt.gravity||10,this.nodeSizeFunc=tt.nodeSizeFunc,this.k=tt.k||5,this.strictRadial=tt.strictRadial,this.nodes=tt.nodes}var z,T,B;return z=et,(T=[{key:"layout",value:function(){var It=this.positions,Nt=[],q=this.iterations,Rt=this.width/10;this.maxDisplace=Rt,this.disp=Nt;for(var Qt=0;Qt<q;Qt++)It.forEach(function(ee,xe){Nt[xe]={x:0,y:0}}),this.getRepulsion(),this.updatePositions();return It}},{key:"getRepulsion",value:function(){var It=this,Nt=It.positions,q=It.nodes,Rt=It.disp,Qt=It.k,ee=It.radii||[];Nt.forEach(function(xe,Pe){Rt[Pe]={x:0,y:0},Nt.forEach(function(He,Be){if(Pe!==Be&&ee[Pe]===ee[Be]){var Ke=xe[0]-He[0],Qe=xe[1]-He[1],ze=Math.sqrt(Ke*Ke+Qe*Qe);if(ze===0){ze=1;var en=Pe>Be?1:-1;Ke=.01*en,Qe=.01*en}if(ze<It.nodeSizeFunc(q[Pe])/2+It.nodeSizeFunc(q[Be])/2){var wn=Qt*Qt/ze;Rt[Pe].x+=Ke/ze*wn,Rt[Pe].y+=Qe/ze*wn}}})})}},{key:"updatePositions",value:function(){var It=this.positions,Nt=this.disp,q=this.speed,Rt=this.strictRadial,Qt=this.focusID,ee=this.maxDisplace||this.width/10;Rt&&Nt.forEach(function(Pe,He){var Be=It[He][0]-It[Qt][0],Ke=It[He][1]-It[Qt][1],Qe=Math.sqrt(Be*Be+Ke*Ke),ze=Ke/Qe,en=-Be/Qe,wn=Math.sqrt(Pe.x*Pe.x+Pe.y*Pe.y),zn=Math.acos((ze*Pe.x+en*Pe.y)/wn);zn>Math.PI/2&&(zn-=Math.PI/2,ze*=-1,en*=-1);var In=Math.cos(zn)*wn;Pe.x=ze*In,Pe.y=en*In});var xe=this.radii;It.forEach(function(Pe,He){if(He!==Qt){var Be=Math.sqrt(Nt[He].x*Nt[He].x+Nt[He].y*Nt[He].y);if(Be>0&&He!==Qt){var Ke=Math.min(ee*(q/800),Be);if(Pe[0]+=Nt[He].x/Be*Ke,Pe[1]+=Nt[He].y/Be*Ke,Rt){var Qe=Pe[0]-It[Qt][0],ze=Pe[1]-It[Qt][1],en=Math.sqrt(Qe*Qe+ze*ze);Qe=Qe/en*xe[He],ze=ze/en*xe[He],Pe[0]=It[Qt][0]+Qe,Pe[1]=It[Qt][1]+ze}}}})}}])&&Me(z.prototype,T),B&&Me(z,B),et}();function Ye(et){return(Ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(et)}function ke(et){return function(z){if(Array.isArray(z))return nn(z)}(et)||function(z){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(z))return Array.from(z)}(et)||function(z,T){if(!!z){if(typeof z=="string")return nn(z,T);var B=Object.prototype.toString.call(z).slice(8,-1);if(B==="Object"&&z.constructor&&(B=z.constructor.name),B==="Map"||B==="Set")return Array.from(z);if(B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B))return nn(z,T)}}(et)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function nn(et,z){(z==null||z>et.length)&&(z=et.length);for(var T=0,B=new Array(z);T<z;T++)B[T]=et[T];return B}function Re(et,z){for(var T=0;T<z.length;T++){var B=z[T];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(et,B.key,B)}}function hn(et,z){return(hn=Object.setPrototypeOf||function(T,B){return T.__proto__=B,T})(et,z)}function pn(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=mn(et);if(z){var tt=mn(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return on(this,T)}}function on(et,z){return!z||Ye(z)!=="object"&&typeof z!="function"?function(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}(et):z}function mn(et){return(mn=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(et)}function jn(et,z){return Math.sqrt((et[0]-z[0])*(et[0]-z[0])+(et[1]-z[1])*(et[1]-z[1]))}var Ie=function(et){(function(Nt,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(q&&q.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),q&&hn(Nt,q)})(It,et);var z,T,B,tt=pn(It);function It(Nt){var q;return function(Rt,Qt){if(!(Rt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(q=tt.call(this)).maxIteration=1e3,q.focusNode=null,q.unitRadius=null,q.linkDistance=50,q.preventOverlap=!1,q.strictRadial=!0,q.maxPreventOverlapIteration=200,q.sortStrength=10,q.nodes=[],q.edges=[],q.updateCfg(Nt),q}return z=It,(T=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}},{key:"execute",value:function(){var q=this,Rt=q.nodes,Qt=q.edges||[];if(Rt&&Rt.length!==0){q.width||typeof window=="undefined"||(q.width=window.innerWidth),q.height||typeof window=="undefined"||(q.height=window.innerHeight),q.center||(q.center=[q.width/2,q.height/2]);var ee=q.center;if(Rt.length===1)return Rt[0].x=ee[0],Rt[0].y=ee[1],void(q.onLayoutEnd&&q.onLayoutEnd());var xe=q.linkDistance,Pe=null;if(p(q.focusNode)){for(var He=!1,Be=0;Be<Rt.length;Be++)Rt[Be].id===q.focusNode&&(Pe=Rt[Be],q.focusNode=Pe,He=!0,Be=Rt.length);He||(Pe=null)}else Pe=q.focusNode;Pe||(Pe=Rt[0],q.focusNode=Pe);var Ke,Qe,ze,en=(Ke=Rt,Qe=Pe.id,ze=-1,Ke.forEach(function(ta,ga){ta.id===Qe&&(ze=ga)}),ze);q.focusIndex=en;var wn=s({nodes:Rt,edges:Qt},!1),zn=r(wn),In=q.maxToFocus(zn,en);q.handleInfinity(zn,en,In+1),q.distances=zn;var Xn=zn[en],cr=q.width||500,or=q.height||500,lr=cr-ee[0]>ee[0]?ee[0]:cr-ee[0],Ar=or-ee[1]>ee[1]?ee[1]:or-ee[1];lr===0&&(lr=cr/2),Ar===0&&(Ar=or/2);var Nr=Ar>lr?lr:Ar,Dr=Math.max.apply(Math,ke(Xn)),Tr=[];Xn.forEach(function(ta,ga){q.unitRadius||(q.unitRadius=Nr/Dr),Tr[ga]=ta*q.unitRadius}),q.radii=Tr;var Xr=q.eIdealDisMatrix();q.eIdealDistances=Xr;var Ir=function(ta){for(var ga=ta.length,ko=ta[0].length,Vo=[],Cs=0;Cs<ga;Cs++){for(var fs=[],zs=0;zs<ko;zs++)ta[Cs][zs]!==0?fs.push(1/(ta[Cs][zs]*ta[Cs][zs])):fs.push(0);Vo.push(fs)}return Vo}(Xr);q.weights=Ir;var vi=new le({linkDistance:xe,distances:Xr}).layout();vi.forEach(function(ta){I(ta[0])&&(ta[0]=Math.random()*xe),I(ta[1])&&(ta[1]=Math.random()*xe)}),q.positions=vi,vi.forEach(function(ta,ga){Rt[ga].x=ta[0]+ee[0],Rt[ga].y=ta[1]+ee[1]}),vi.forEach(function(ta){ta[0]-=vi[en][0],ta[1]-=vi[en][1]}),q.run();var bi,Vi=q.preventOverlap,Jr=q.nodeSize,Li=q.strictRadial;if(Vi){var Hi,qi=q.nodeSpacing;Hi=S(qi)?function(){return qi}:A(qi)?qi:function(){return 0},bi=Jr?c(Jr)?function(ta){return(Jr[0]>Jr[1]?Jr[0]:Jr[1])+Hi(ta)}:function(ta){return Jr+Hi(ta)}:function(ta){return ta.size?c(ta.size)?(ta.size[0]>ta.size[1]?ta.size[0]:ta.size[1])+Hi(ta):ta.size+Hi(ta):10+Hi(ta)};var xo={nodes:Rt,nodeSizeFunc:bi,adjMatrix:wn,positions:vi,radii:Tr,height:or,width:cr,strictRadial:Li,focusID:en,iterations:q.maxPreventOverlapIteration||200,k:vi.length/4.5},oo=new Ve(xo);vi=oo.layout()}return vi.forEach(function(ta,ga){Rt[ga].x=ta[0]+ee[0],Rt[ga].y=ta[1]+ee[1]}),q.onLayoutEnd&&q.onLayoutEnd(),{nodes:Rt,edges:Qt}}q.onLayoutEnd&&q.onLayoutEnd()}},{key:"run",value:function(){for(var q=this.maxIteration,Rt=this.positions||[],Qt=this.weights||[],ee=this.eIdealDistances||[],xe=this.radii||[],Pe=0;Pe<=q;Pe++){var He=Pe/q;this.oneIteration(He,Rt,xe,ee,Qt)}}},{key:"oneIteration",value:function(q,Rt,Qt,ee,xe){var Pe=1-q,He=this.focusIndex;Rt.forEach(function(Be,Ke){var Qe=jn(Be,[0,0]),ze=Qe===0?0:1/Qe;if(Ke!==He){var en=0,wn=0,zn=0;Rt.forEach(function(Xn,cr){if(Ke!==cr){var or=jn(Be,Xn),lr=or===0?0:1/or,Ar=ee[cr][Ke];zn+=xe[Ke][cr],en+=xe[Ke][cr]*(Xn[0]+Ar*(Be[0]-Xn[0])*lr),wn+=xe[Ke][cr]*(Xn[1]+Ar*(Be[1]-Xn[1])*lr)}});var In=Qt[Ke]===0?0:1/Qt[Ke];zn*=Pe,zn+=q*In*In,en*=Pe,en+=q*In*Be[0]*ze,Be[0]=en/zn,wn*=Pe,wn+=q*In*Be[1]*ze,Be[1]=wn/zn}})}},{key:"eIdealDisMatrix",value:function(){var q=this,Rt=q.nodes;if(!Rt)return[];var Qt=q.distances,ee=q.linkDistance,xe=q.radii||[],Pe=q.unitRadius||50,He=[];return Qt&&Qt.forEach(function(Be,Ke){var Qe=[];Be.forEach(function(ze,en){if(Ke===en)Qe.push(0);else if(xe[Ke]===xe[en])if(q.sortBy==="data")Qe.push(ze*(Math.abs(Ke-en)*q.sortStrength)/(xe[Ke]/Pe));else if(q.sortBy){var wn=Rt[Ke][q.sortBy]||0,zn=Rt[en][q.sortBy]||0;p(wn)&&(wn=wn.charCodeAt(0)),p(zn)&&(zn=zn.charCodeAt(0)),Qe.push(ze*(Math.abs(wn-zn)*q.sortStrength)/(xe[Ke]/Pe))}else Qe.push(ze*ee/(xe[Ke]/Pe));else{var In=(ee+Pe)/2;Qe.push(ze*In)}}),He.push(Qe)}),He}},{key:"handleInfinity",value:function(q,Rt,Qt){for(var ee=q.length,xe=0;xe<ee;xe++)if(q[Rt][xe]===1/0){q[Rt][xe]=Qt,q[xe][Rt]=Qt;for(var Pe=0;Pe<ee;Pe++)q[xe][Pe]!==1/0&&q[Rt][Pe]===1/0&&(q[Rt][Pe]=Qt+q[xe][Pe],q[Pe][Rt]=Qt+q[xe][Pe])}for(var He=0;He<ee;He++)if(He!==Rt){for(var Be=0;Be<ee;Be++)if(q[He][Be]===1/0){var Ke=Math.abs(q[Rt][He]-q[Rt][Be]);Ke=Ke===0?1:Ke,q[He][Be]=Ke}}}},{key:"maxToFocus",value:function(q,Rt){for(var Qt=0,ee=0;ee<q[Rt].length;ee++)q[Rt][ee]!==1/0&&(Qt=q[Rt][ee]>Qt?q[Rt][ee]:Qt);return Qt}},{key:"getType",value:function(){return"radial"}}])&&Re(z.prototype,T),B&&Re(z,B),It}(x);function fe(et){return(fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(et)}function Ne(et,z){return(Ne=Object.setPrototypeOf||function(T,B){return T.__proto__=B,T})(et,z)}function Fe(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=_e(et);if(z){var tt=_e(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return rn(this,T)}}function rn(et,z){return!z||fe(z)!=="object"&&typeof z!="function"?ln(et):z}function ln(et){if(et===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return et}function _e(et){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(et)}var dn=new Map,Sn=function(z,T){if(dn.get(z)&&console.warn("The layout with the name ".concat(z," exists already, it will be overridden")),(tt=T)!==null&&C(tt)==="object"){var B=function(It){(function(Rt,Qt){if(typeof Qt!="function"&&Qt!==null)throw new TypeError("Super expression must either be null or a function");Rt.prototype=Object.create(Qt&&Qt.prototype,{constructor:{value:Rt,writable:!0,configurable:!0}}),Qt&&Ne(Rt,Qt)})(q,It);var Nt=Fe(q);function q(Rt){var Qt;(function(He,Be){if(!(He instanceof Be))throw new TypeError("Cannot call a class as a function")})(this,q);var ee=ln(Qt=Nt.call(this)),xe={},Pe=ee.getDefaultCfg();return Object.assign(xe,Pe,T,Rt),Object.keys(xe).forEach(function(He){var Be=xe[He];ee[He]=Be}),Qt}return q}(x);dn.set(z,B)}else dn.set(z,T);var tt},tr=function(z){return dn.has(z)?dn.get(z):null};function Pn(et){return(Pn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(et)}function Fn(et,z){for(var T=0;T<z.length;T++){var B=z[T];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(et,B.key,B)}}function Cr(et,z){return(Cr=Object.setPrototypeOf||function(T,B){return T.__proto__=B,T})(et,z)}function fi(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=zr(et);if(z){var tt=zr(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return ri(this,T)}}function ri(et,z){return!z||Pn(z)!=="object"&&typeof z!="function"?function(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}(et):z}function zr(et){return(zr=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(et)}var wi=function(et){(function(Nt,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(q&&q.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),q&&Cr(Nt,q)})(It,et);var z,T,B,tt=fi(It);function It(Nt){var q;return function(Rt,Qt){if(!(Rt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(q=tt.call(this)).nodeSize=30,q.minNodeSpacing=10,q.preventOverlap=!1,q.equidistant=!1,q.startAngle=1.5*Math.PI,q.clockwise=!0,q.sortBy="degree",q.nodes=[],q.edges=[],q.width=300,q.height=300,q.onLayoutEnd=function(){},q.updateCfg(Nt),q}return z=It,(T=[{key:"getDefaultCfg",value:function(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}},{key:"execute",value:function(){var q=this,Rt=q.nodes,Qt=q.edges,ee=Rt.length;if(ee!==0){q.width||typeof window=="undefined"||(q.width=window.innerWidth),q.height||typeof window=="undefined"||(q.height=window.innerHeight),q.center||(q.center=[q.width/2,q.height/2]);var xe=q.center;if(ee===1)return Rt[0].x=xe[0],Rt[0].y=xe[1],void(q.onLayoutEnd&&q.onLayoutEnd());var Pe,He=[];Pe=c(q.nodeSize)?Math.max(q.nodeSize[0],q.nodeSize[1]):q.nodeSize,Rt.forEach(function(Nr){He.push(Nr);var Dr=Pe;c(Nr.size)?Dr=Math.max(Nr.size[0],Nr.size[1]):S(Nr.size)&&(Dr=Nr.size),Pe=Math.max(Pe,Dr)}),q.clockwise=q.counterclockwise!==void 0?!q.counterclockwise:q.clockwise;var Be={},Ke={};if(He.forEach(function(Nr,Dr){Be[Nr.id]=Nr,Ke[Nr.id]=Dr}),!(q.sortBy!=="degree"&&p(q.sortBy)&&He[0][q.sortBy]!==void 0||(q.sortBy="degree",S(Rt[0].degree)))){var Qe=m(Rt.length,Ke,Qt);He.forEach(function(Nr,Dr){Nr.degree=Qe[Dr]})}He.sort(function(Nr,Dr){return Dr[q.sortBy]-Nr[q.sortBy]}),q.maxValueNode=He[0],q.maxLevelDiff=q.maxLevelDiff||q.maxValueNode[q.sortBy]/4;var ze=[[]],en=ze[0];He.forEach(function(Nr){if(en.length>0){var Dr=Math.abs(en[0][q.sortBy]-Nr[q.sortBy]);q.maxLevelDiff&&Dr>=q.maxLevelDiff&&(en=[],ze.push(en))}en.push(Nr)});var wn=Pe+q.minNodeSpacing;if(!q.preventOverlap){var zn=ze.length>0&&ze[0].length>1,In=(Math.min(q.width,q.height)/2-wn)/(ze.length+(zn?1:0));wn=Math.min(wn,In)}var Xn=0;if(ze.forEach(function(Nr){var Dr=q.sweep;Dr===void 0&&(Dr=2*Math.PI-2*Math.PI/Nr.length);var Tr=Nr.dTheta=Dr/Math.max(1,Nr.length-1);if(Nr.length>1&&q.preventOverlap){var Xr=Math.cos(Tr)-Math.cos(0),Ir=Math.sin(Tr)-Math.sin(0),vi=Math.sqrt(wn*wn/(Xr*Xr+Ir*Ir));Xn=Math.max(vi,Xn)}Nr.r=Xn,Xn+=wn}),q.equidistant){for(var cr=0,or=0,lr=0;lr<ze.length;lr++){var Ar=ze[lr].r-or;cr=Math.max(cr,Ar)}or=0,ze.forEach(function(Nr,Dr){Dr===0&&(or=Nr.r),Nr.r=or,or+=cr})}return ze.forEach(function(Nr){var Dr=Nr.dTheta,Tr=Nr.r;Nr.forEach(function(Xr,Ir){var vi=q.startAngle+(q.clockwise?1:-1)*Dr*Ir;Xr.x=xe[0]+Tr*Math.cos(vi),Xr.y=xe[1]+Tr*Math.sin(vi)})}),q.onLayoutEnd&&q.onLayoutEnd(),{nodes:Rt,edges:Qt}}q.onLayoutEnd&&q.onLayoutEnd()}},{key:"getType",value:function(){return"concentric"}}])&&Fn(z.prototype,T),B&&Fn(z,B),It}(x);function Ai(et){return(Ai=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(et)}function gi(et,z){for(var T=0;T<z.length;T++){var B=z[T];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(et,B.key,B)}}function Oa(et,z){return(Oa=Object.setPrototypeOf||function(T,B){return T.__proto__=B,T})(et,z)}function Aa(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=Fo(et);if(z){var tt=Fo(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return Oo(this,T)}}function Oo(et,z){return!z||Ai(z)!=="object"&&typeof z!="function"?function(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}(et):z}function Fo(et){return(Fo=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(et)}var Yo=function(et){(function(Nt,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(q&&q.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),q&&Oa(Nt,q)})(It,et);var z,T,B,tt=Aa(It);function It(Nt){var q;return function(Rt,Qt){if(!(Rt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(q=tt.call(this)).center=[0,0],q.linkDistance=50,q.nodes=[],q.edges=[],q.onLayoutEnd=function(){},q.updateCfg(Nt),q}return z=It,(T=[{key:"getDefaultCfg",value:function(){return{center:[0,0],linkDistance:50}}},{key:"execute",value:function(){var q=this.nodes,Rt=this.edges,Qt=Rt===void 0?[]:Rt,ee=this.center;if(q&&q.length!==0){if(q.length===1)return q[0].x=ee[0],q[0].y=ee[1],void(this.onLayoutEnd&&this.onLayoutEnd());var xe=this.linkDistance,Pe=s({nodes:q,edges:Qt},!1),He=r(Pe);this.handleInfinity(He);var Be,Ke,Qe=(Be=xe,Ke=[],He.forEach(function(en){var wn=[];en.forEach(function(zn){wn.push(zn*Be)}),Ke.push(wn)}),Ke);this.scaledDistances=Qe;var ze=this.runMDS();return this.positions=ze,ze.forEach(function(en,wn){q[wn].x=en[0]+ee[0],q[wn].y=en[1]+ee[1]}),this.onLayoutEnd&&this.onLayoutEnd(),{nodes:q,edges:Qt}}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"runMDS",value:function(){var q=this.scaledDistances,Rt=yn.mul(yn.pow(q,2),-.5),Qt=Rt.mean("row"),ee=Rt.mean("column"),xe=Rt.mean();Rt.add(xe).subRowVector(Qt).subColumnVector(ee);var Pe=new de(Rt),He=yn.sqrt(Pe.diagonalMatrix).diagonal();return Pe.leftSingularVectors.toJSON().map(function(Be){return yn.mul([Be],[He]).toJSON()[0].splice(0,2)})}},{key:"handleInfinity",value:function(q){var Rt=-999999;q.forEach(function(Qt){Qt.forEach(function(ee){ee!==1/0&&Rt<ee&&(Rt=ee)})}),q.forEach(function(Qt,ee){Qt.forEach(function(xe,Pe){xe===1/0&&(q[ee][Pe]=Rt)})})}},{key:"getType",value:function(){return"mds"}}])&&gi(z.prototype,T),B&&gi(z,B),It}(x);function De(et){return(De=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(et)}function an(et,z){for(var T=0;T<z.length;T++){var B=z[T];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(et,B.key,B)}}function Mn(et,z){return(Mn=Object.setPrototypeOf||function(T,B){return T.__proto__=B,T})(et,z)}function xn(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=Yn(et);if(z){var tt=Yn(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return bn(this,T)}}function bn(et,z){return!z||De(z)!=="object"&&typeof z!="function"?function(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}(et):z}function Yn(et){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(et)}var Jn=function(et){(function(Nt,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(q&&q.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),q&&Mn(Nt,q)})(It,et);var z,T,B,tt=xn(It);function It(Nt){var q;return function(Rt,Qt){if(!(Rt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(q=tt.call(this)).maxIteration=1e3,q.gravity=10,q.speed=1,q.clustering=!1,q.clusterGravity=10,q.nodes=[],q.edges=[],q.width=300,q.height=300,q.nodeMap={},q.nodeIdxMap={},q.onLayoutEnd=function(){},q.updateCfg(Nt),q}return z=It,(T=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){var q=this,Rt=this.nodes;if(Rt&&Rt.length!==0){this.width||typeof window=="undefined"||(this.width=window.innerWidth),this.height||typeof window=="undefined"||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var Qt=this.center;if(Rt.length===1)return Rt[0].x=Qt[0],Rt[0].y=Qt[1],void(this.onLayoutEnd&&this.onLayoutEnd());var ee={},xe={};return Rt.forEach(function(Pe,He){S(Pe.x)||(Pe.x=Math.random()*q.width),S(Pe.y)||(Pe.y=Math.random()*q.height),ee[Pe.id]=Pe,xe[Pe.id]=He}),this.nodeMap=ee,this.nodeIdxMap=xe,this.run()}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"run",value:function(){var q=this,Rt=q.nodes,Qt=q.edges,ee=q.maxIteration,xe=q.center,Pe=q.height*q.width,He=Math.sqrt(Pe)/10,Be=Pe/(Rt.length+1),Ke=Math.sqrt(Be),Qe=q.gravity,ze=q.speed,en=q.clustering,wn={};if(en)for(var zn in Rt.forEach(function(cr){if(wn[cr.cluster]===void 0){var or={name:cr.cluster,cx:0,cy:0,count:0};wn[cr.cluster]=or}var lr=wn[cr.cluster];S(cr.x)&&(lr.cx+=cr.x),S(cr.y)&&(lr.cy+=cr.y),lr.count++}),wn)wn[zn].cx/=wn[zn].count,wn[zn].cy/=wn[zn].count;for(var In=function(or){var lr=[];if(Rt.forEach(function(Tr,Xr){lr[Xr]={x:0,y:0}}),q.applyCalculate(Rt,Qt,lr,Ke,Be),en){var Ar=q.clusterGravity||Qe;for(var Nr in Rt.forEach(function(Tr,Xr){if(S(Tr.x)&&S(Tr.y)){var Ir=wn[Tr.cluster],vi=Math.sqrt((Tr.x-Ir.cx)*(Tr.x-Ir.cx)+(Tr.y-Ir.cy)*(Tr.y-Ir.cy)),bi=Ke*Ar;lr[Xr].x-=bi*(Tr.x-Ir.cx)/vi,lr[Xr].y-=bi*(Tr.y-Ir.cy)/vi}}),wn)wn[Nr].cx=0,wn[Nr].cy=0,wn[Nr].count=0;for(var Dr in Rt.forEach(function(Tr){var Xr=wn[Tr.cluster];S(Tr.x)&&(Xr.cx+=Tr.x),S(Tr.y)&&(Xr.cy+=Tr.y),Xr.count++}),wn)wn[Dr].cx/=wn[Dr].count,wn[Dr].cy/=wn[Dr].count}Rt.forEach(function(Tr,Xr){if(S(Tr.x)&&S(Tr.y)){var Ir=.01*Ke*Qe;lr[Xr].x-=Ir*(Tr.x-xe[0]),lr[Xr].y-=Ir*(Tr.y-xe[1])}}),Rt.forEach(function(Tr,Xr){if(S(Tr.x)&&S(Tr.y)){var Ir=Math.sqrt(lr[Xr].x*lr[Xr].x+lr[Xr].y*lr[Xr].y);if(Ir>0){var vi=Math.min(He*(ze/800),Ir);Tr.x+=lr[Xr].x/Ir*vi,Tr.y+=lr[Xr].y/Ir*vi}}})},Xn=0;Xn<ee;Xn++)In();return q.onLayoutEnd&&q.onLayoutEnd(),{nodes:Rt,edges:Qt}}},{key:"applyCalculate",value:function(q,Rt,Qt,ee,xe){this.calRepulsive(q,Qt,xe),this.calAttractive(Rt,Qt,ee)}},{key:"calRepulsive",value:function(q,Rt,Qt){q.forEach(function(ee,xe){Rt[xe]={x:0,y:0},q.forEach(function(Pe,He){if(xe!==He&&S(ee.x)&&S(Pe.x)&&S(ee.y)&&S(Pe.y)){var Be=ee.x-Pe.x,Ke=ee.y-Pe.y,Qe=Be*Be+Ke*Ke;if(Qe===0){Qe=1;var ze=xe>He?1:-1;Be=.01*ze,Ke=.01*ze}var en=Qt/Qe;Rt[xe].x+=Be*en,Rt[xe].y+=Ke*en}})})}},{key:"calAttractive",value:function(q,Rt,Qt){var ee=this;q.forEach(function(xe){if(xe.source&&xe.target){var Pe=ee.nodeIdxMap[xe.source],He=ee.nodeIdxMap[xe.target];if(Pe!==He){var Be=ee.nodeMap[xe.source],Ke=ee.nodeMap[xe.target];if(S(Ke.x)&&S(Be.x)&&S(Ke.y)&&S(Be.y)){var Qe=Ke.x-Be.x,ze=Ke.y-Be.y,en=Math.sqrt(Qe*Qe+ze*ze),wn=en*en/Qt;Rt[He].x-=Qe/en*wn,Rt[He].y-=ze/en*wn,Rt[Pe].x+=Qe/en*wn,Rt[Pe].y+=ze/en*wn}}}})}},{key:"getType",value:function(){return"fruchterman"}}])&&an(z.prototype,T),B&&an(z,B),It}(x),$n=t(12),_n=t.n($n),fr=t(6),sr=t.n(fr),vr=t(8),pr=t.n(vr),Vr=t(13),Ur=t.n(Vr),Ii=(t(30),t(217),t(9)),br=t.n(Ii),hi=t(15),Wr=t.n(hi),ji=1;function zi(){return ji++}var Ui=function et(z){sr()(this,et)},ra=function(){function et(T){sr()(this,et),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=T}var z;return pr()(et,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(B){return this.lookup[B]>-1}},{key:"create",value:function(B,tt){this.lookup[B]=this.components.length;var It=new this.clazz(tt||{});return this.components.push(It),this.entities.push(B),It}},{key:"remove",value:function(B){var tt=this.lookup[B];tt>-1&&tt<this.components.length-1&&(this.components[tt]=this.components[this.components.length-1],this.entities[tt]=this.entities[this.entities.length-1],this.lookup[this.entities[tt]]=tt),this.components.pop(),this.entities.pop(),delete this.lookup[B]}},{key:"removeKeepSorted",value:function(B){var tt=this.lookup[B];if(tt>-1){var It=this.entities[tt];if(tt<this.components.length-1){for(var Nt=tt+1;Nt<this.components.length;++Nt)this.components[Nt-1]=this.components[Nt];for(var q=tt+1;q<this.entities.length;++q)this.entities[q-1]=this.entities[q],this.lookup[this.entities[q-1]]=q-1}this.components.pop(),this.entities.pop(),delete this.lookup[It]}}},{key:"moveItem",value:function(B,tt){if(B!==tt){for(var It=this.components[B],Nt=this.entities[B],q=B<tt?1:-1,Rt=B;Rt!==tt;Rt+=q){var Qt=Rt+q;this.components[Rt]=this.components[Qt],this.entities[Rt]=this.entities[Qt],this.lookup[this.entities[Rt]]=Rt}this.components[tt]=It,this.entities[tt]=Nt,this.lookup[Nt]=tt}}},{key:"getEntity",value:function(B){return this.entities[B]}},{key:"getComponent",value:function(B){return this.components[B]}},{key:"getComponentByEntity",value:function(B){var tt=this.lookup[B];return tt>-1?this.components[tt]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(B){for(var tt=0,It=Object.keys(this.lookup);tt<It.length;tt++){var Nt=It[tt],q=Number(Nt);if(this.lookup[q]===B)return q}return-1}},{key:"find",value:function(B){for(var tt=0;tt<this.getCount();tt++){var It=this.getComponent(tt);if(B(It,tt))return It}return null}},{key:"findIndex",value:function(B){for(var tt=0;tt<this.getCount();tt++)if(B(this.getComponent(tt),tt))return tt;return-1}},{key:"forEach",value:function(B){for(var tt=0,It=Object.keys(this.lookup);tt<It.length;tt++){var Nt=It[tt],q=Number(Nt),Rt=this.lookup[q];B(q,this.getComponent(Rt))}}},{key:"forEachAsync",value:(z=Wr()(br.a.mark(function T(B){var tt,It,Nt,q,Rt;return br.a.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:tt=0,It=Object.keys(this.lookup);case 1:if(!(tt<It.length)){Qt.next=10;break}return Nt=It[tt],q=Number(Nt),Rt=this.lookup[q],Qt.next=7,B(q,this.getComponent(Rt));case 7:tt++,Qt.next=1;break;case 10:case"end":return Qt.stop()}},T,this)})),function(T){return z.apply(this,arguments)})},{key:"map",value:function(B){for(var tt=[],It=0,Nt=Object.keys(this.lookup);It<Nt.length;It++){var q=Nt[It],Rt=Number(q),Qt=this.lookup[Rt];tt.push(B(Rt,this.getComponent(Qt)))}return tt}}]),et}(),da=t(60),Di=t.n(da),kr=t(4),er={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")},Wi=function et(){sr()(this,et),this.index=void 0},_a=function et(){sr()(this,et),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},Ei=function(){function et(){sr()(this,et),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return pr()(et,[{key:"read",value:function(T){return this.reads.find(function(B){return B.index===T.index})||this.reads.push(T),T}},{key:"sample",value:function(T){return this.read(T),T}},{key:"write",value:function(T,B){if(this.writes.find(function(Nt){return Nt.index===B.index}))return B;var tt=T.getResourceNode(B);tt.resource.version++,tt.resource.imported&&(this.hasSideEffect=!0);var It=T.createResourceNode(tt.resource);return T.getResourceNode(It).writer=this,this.writes.push(It),It}}]),et}(),Yi=t(27),ea=t.n(Yi),no=t(28),$i=t.n(no),Wa=t(21),Ta=t.n(Wa);function bo(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=Ta()(et);if(z){var tt=Ta()(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return $i()(this,T)}}var Na,Fa,ro,Ea,Eo,Ua=function(et){ea()(T,et);var z=bo(T);function T(){var B;sr()(this,T);for(var tt=arguments.length,It=new Array(tt),Nt=0;Nt<tt;Nt++)It[Nt]=arguments[Nt];return(B=z.call.apply(z,[this].concat(It))).version=0,B.refs=0,B.name=void 0,B.imported=void 0,B.priority=void 0,B.discardStart=!0,B.discardEnd=!1,B.descriptor=void 0,B.resource=void 0,B}return pr()(T,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){this.imported}}]),T}(function et(){sr()(this,et),this.first=void 0,this.last=void 0}),Va=function et(){sr()(this,et),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0};function ja(et,z){var T;if(typeof Symbol=="undefined"||et[Symbol.iterator]==null){if(Array.isArray(et)||(T=function(Rt,Qt){if(!!Rt){if(typeof Rt=="string")return to(Rt,Qt);var ee=Object.prototype.toString.call(Rt).slice(8,-1);if(ee==="Object"&&Rt.constructor&&(ee=Rt.constructor.name),ee==="Map"||ee==="Set")return Array.from(Rt);if(ee==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ee))return to(Rt,Qt)}}(et))||z&&et&&typeof et.length=="number"){T&&(et=T);var B=0,tt=function(){};return{s:tt,n:function(){return B>=et.length?{done:!0}:{done:!1,value:et[B++]}},e:function(Qt){throw Qt},f:tt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var It,Nt=!0,q=!1;return{s:function(){T=et[Symbol.iterator]()},n:function(){var Qt=T.next();return Nt=Qt.done,Qt},e:function(Qt){q=!0,It=Qt},f:function(){try{Nt||T.return==null||T.return()}finally{if(q)throw It}}}}function to(et,z){(z==null||z>et.length)&&(z=et.length);for(var T=0,B=new Array(z);T<z;T++)B[T]=et[T];return B}var fo=(Na=Object(kr.injectable)(),Fa=Object(kr.inject)(er.RenderEngine),Na((Ea=function(){function et(){sr()(this,et),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],_n()(this,"engine",Eo,this)}var z,T;return pr()(et,[{key:"execute",value:(T=Wr()(br.a.mark(function B(tt){return br.a.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:return this.compile(),It.next=3,this.executePassNodes(tt);case 3:case"end":return It.stop()}},B,this)})),function(B){return T.apply(this,arguments)})},{key:"tearDown",value:function(){this.frameGraphPasses.forEach(function(tt){tt.tearDown&&tt.tearDown()}),this.reset()}},{key:"addPass",value:function(tt,It,Nt,q){var Rt=new _a;Rt.execute=Nt,q&&(Rt.tearDown=q),Rt.name=tt;var Qt=new Ei;return Qt.name=tt,this.passNodes.push(Qt),this.frameGraphPasses.push(Rt),It(this,Qt,Rt),Rt}},{key:"getPass",value:function(tt){return this.frameGraphPasses.find(function(It){return It.name===tt})}},{key:"compile",value:function(){var tt,It=this,Nt=ja(this.passNodes);try{for(Nt.s();!(tt=Nt.n()).done;){var q=tt.value;q.refCount=q.writes.length+(q.hasSideEffect?1:0),q.reads.forEach(function(Jr){It.resourceNodes[Jr.index].readerCount++})}}catch(Jr){Nt.e(Jr)}finally{Nt.f()}var Rt,Qt=[],ee=ja(this.resourceNodes);try{for(ee.s();!(Rt=ee.n()).done;){var xe=Rt.value;xe.readerCount===0&&Qt.push(xe)}}catch(Jr){ee.e(Jr)}finally{ee.f()}for(;Qt.length;){var Pe=Qt.pop(),He=Pe&&Pe.writer;if(He&&--He.refCount==0){var Be,Ke=ja(He.reads);try{for(Ke.s();!(Be=Ke.n()).done;){var Qe=Be.value,ze=this.resourceNodes[Qe.index];--ze.readerCount==0&&Qt.push(ze)}}catch(Jr){Ke.e(Jr)}finally{Ke.f()}}}this.resourceNodes.forEach(function(Jr){Jr.resource.refs+=Jr.readerCount});var en,wn=ja(this.passNodes);try{for(wn.s();!(en=wn.n()).done;){var zn=en.value;if(zn.refCount){var In,Xn=ja(zn.reads);try{for(Xn.s();!(In=Xn.n()).done;){var cr=In.value,or=this.resourceNodes[cr.index].resource;or.first=or.first?or.first:zn,or.last=zn}}catch(Jr){Xn.e(Jr)}finally{Xn.f()}var lr,Ar=ja(zn.writes);try{for(Ar.s();!(lr=Ar.n()).done;){var Nr=lr.value,Dr=this.resourceNodes[Nr.index].resource;Dr.first=Dr.first?Dr.first:zn,Dr.last=zn}}catch(Jr){Ar.e(Jr)}finally{Ar.f()}}}}catch(Jr){wn.e(Jr)}finally{wn.f()}for(var Tr=0;Tr<2;Tr++){var Xr,Ir=ja(this.resourceNodes);try{for(Ir.s();!(Xr=Ir.n()).done;){var vi=Xr.value.resource;if(vi.priority===Tr&&vi.refs){var bi=vi.first,Vi=vi.last;bi&&Vi&&(bi.devirtualize.push(vi),Vi.destroy.push(vi))}}}catch(Jr){Ir.e(Jr)}finally{Ir.f()}}}},{key:"executePassNodes",value:(z=Wr()(br.a.mark(function B(tt){var It,Nt,q,Rt,Qt,ee,xe,Pe,He,Be,Ke,Qe,ze;return br.a.wrap(function(en){for(;;)switch(en.prev=en.next){case 0:It=ja(this.passNodes.entries()),en.prev=1,It.s();case 3:if((Nt=It.n()).done){en.next=18;break}if(q=Di()(Nt.value,2),Rt=q[0],!(Qt=q[1]).refCount){en.next=16;break}ee=ja(Qt.devirtualize);try{for(ee.s();!(xe=ee.n()).done;)xe.value.preExecuteDevirtualize(this.engine)}catch(wn){ee.e(wn)}finally{ee.f()}Pe=ja(Qt.destroy);try{for(Pe.s();!(He=Pe.n()).done;)He.value.preExecuteDestroy(this.engine)}catch(wn){Pe.e(wn)}finally{Pe.f()}return en.next=12,this.frameGraphPasses[Rt].execute(this,this.frameGraphPasses[Rt],tt);case 12:Be=ja(Qt.devirtualize);try{for(Be.s();!(Ke=Be.n()).done;)Ke.value.postExecuteDevirtualize(this.engine)}catch(wn){Be.e(wn)}finally{Be.f()}Qe=ja(Qt.destroy);try{for(Qe.s();!(ze=Qe.n()).done;)ze.value.postExecuteDestroy(this.engine)}catch(wn){Qe.e(wn)}finally{Qe.f()}case 16:en.next=3;break;case 18:en.next=23;break;case 20:en.prev=20,en.t0=en.catch(1),It.e(en.t0);case 23:return en.prev=23,It.f(),en.finish(23);case 26:this.reset();case 27:case"end":return en.stop()}},B,this,[[1,20,23,26]])})),function(B){return z.apply(this,arguments)})},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(tt){return this.resourceNodes[tt.index]}},{key:"createResourceNode",value:function(tt){var It=new Va;It.resource=tt,It.version=tt.version,this.resourceNodes.push(It);var Nt=new Wi;return Nt.index=this.resourceNodes.length-1,Nt}},{key:"createTexture",value:function(tt,It,Nt){var q=new Ua;return q.name=It,q.descriptor=Nt,this.createResourceNode(q)}},{key:"createRenderTarget",value:function(tt,It,Nt){var q=new Ua;return q.name=It,q.descriptor=Nt,this.createResourceNode(q)}},{key:"present",value:function(tt){this.addPass("Present",function(It,Nt){Nt.read(tt),Nt.hasSideEffect=!0},Wr()(br.a.mark(function It(){return br.a.wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:case"end":return Nt.stop()}},It)})))}}]),et}(),Eo=Ur()(Ea.prototype,"engine",[Fa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ro=Ea))||ro),wa=t(3),gr=t.n(wa),Xo=t(25),va=t.n(Xo);function Ya(et,z){var T=Object.keys(et);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(et);z&&(B=B.filter(function(tt){return Object.getOwnPropertyDescriptor(et,tt).enumerable})),T.push.apply(T,B)}return T}function So(et){for(var z=1;z<arguments.length;z++){var T=arguments[z]!=null?arguments[z]:{};z%2?Ya(Object(T),!0).forEach(function(B){gr()(et,B,T[B])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(T)):Ya(Object(T)).forEach(function(B){Object.defineProperty(et,B,Object.getOwnPropertyDescriptor(T,B))})}return et}function No(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=Ta()(et);if(z){var tt=Ta()(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return $i()(this,T)}}var Gn,se,Ia,ho,Xa,so,Lo,zo,Jo,uo=function(et){ea()(T,et);var z=No(T);function T(B){var tt;return sr()(this,T),(tt=z.call(this,B)).dirty=!0,tt.attributes=[],tt.indices=void 0,tt.indicesBuffer=void 0,tt.vertexCount=void 0,tt.maxInstancedCount=void 0,tt.aabb=void 0,Object.assign(va()(tt),B),tt}return pr()(T,[{key:"setAttribute",value:function(tt,It,Nt,q){var Rt=this.attributes.find(function(Qt){return Qt.name===tt});return Rt?(Rt.data=It,Rt.dirty=!0):this.attributes.push(So(So({dirty:!0,name:tt,data:It},Nt),{},{bufferGetter:q})),this.dirty=!0,this}},{key:"setIndex",value:function(tt){return this.indices=new Uint32Array(tt.buffer?tt.buffer:tt),this.dirty=!0,this}}]),T}(Ui),Rn=(t(226),t(2)),qo=function(){function et(z,T){sr()(this,et),this.center=void 0,this.halfExtents=void 0,this.min=Rn.e.create(),this.max=Rn.e.create(),this.update(z,T)}return pr()(et,[{key:"update",value:function(T,B){this.center=T||Rn.e.create(),this.halfExtents=B||Rn.e.fromValues(.5,.5,.5),this.min=Rn.e.sub(this.min,this.center,this.halfExtents),this.max=Rn.e.add(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(T,B){Rn.e.add(this.center,B,T),Rn.e.scale(this.center,this.center,.5),Rn.e.sub(this.halfExtents,B,T),Rn.e.scale(this.halfExtents,this.halfExtents,.5),Rn.e.copy(this.min,T),Rn.e.copy(this.max,B)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(T){var B=this.center,tt=B[0],It=B[1],Nt=B[2],q=this.halfExtents,Rt=q[0],Qt=q[1],ee=q[2],xe=tt-Rt,Pe=tt+Rt,He=It-Qt,Be=It+Qt,Ke=Nt-ee,Qe=Nt+ee,ze=T.center,en=ze[0],wn=ze[1],zn=ze[2],In=T.halfExtents,Xn=In[0],cr=In[1],or=In[2],lr=en-Xn,Ar=en+Xn,Nr=wn-cr,Dr=wn+cr,Tr=zn-or,Xr=zn+or;lr<xe&&(xe=lr),Ar>Pe&&(Pe=Ar),Nr<He&&(He=Nr),Dr>Be&&(Be=Dr),Tr<Ke&&(Ke=Tr),Xr>Qe&&(Qe=Xr),B[0]=.5*(xe+Pe),B[1]=.5*(He+Be),B[2]=.5*(Ke+Qe),q[0]=.5*(Pe-xe),q[1]=.5*(Be-He),q[2]=.5*(Qe-Ke),this.min[0]=xe,this.min[1]=He,this.min[2]=Ke,this.max[0]=Pe,this.max[1]=Be,this.max[2]=Qe}},{key:"intersects",value:function(T){var B=this.getMax(),tt=this.getMin(),It=T.getMax(),Nt=T.getMin();return tt[0]<=It[0]&&B[0]>=Nt[0]&&tt[1]<=It[1]&&B[1]>=Nt[1]&&tt[2]<=It[2]&&B[2]>=Nt[2]}},{key:"containsPoint",value:function(T){var B=this.getMin(),tt=this.getMax();return!(T[0]<B[0]||T[0]>tt[0]||T[1]<B[1]||T[1]>tt[1]||T[2]<B[2]||T[2]>tt[2])}},{key:"getNegativeFarPoint",value:function(T){return T.pnVertexFlag===273?Rn.e.copy(Rn.e.create(),this.min):T.pnVertexFlag===272?Rn.e.fromValues(this.min[0],this.min[1],this.max[2]):T.pnVertexFlag===257?Rn.e.fromValues(this.min[0],this.max[1],this.min[2]):T.pnVertexFlag===256?Rn.e.fromValues(this.min[0],this.max[1],this.max[2]):T.pnVertexFlag===17?Rn.e.fromValues(this.max[0],this.min[1],this.min[2]):T.pnVertexFlag===16?Rn.e.fromValues(this.max[0],this.min[1],this.max[2]):T.pnVertexFlag===1?Rn.e.fromValues(this.max[0],this.max[1],this.min[2]):Rn.e.fromValues(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(T){return T.pnVertexFlag===273?Rn.e.copy(Rn.e.create(),this.max):T.pnVertexFlag===272?Rn.e.fromValues(this.max[0],this.max[1],this.min[2]):T.pnVertexFlag===257?Rn.e.fromValues(this.max[0],this.min[1],this.max[2]):T.pnVertexFlag===256?Rn.e.fromValues(this.max[0],this.min[1],this.min[2]):T.pnVertexFlag===17?Rn.e.fromValues(this.min[0],this.max[1],this.max[2]):T.pnVertexFlag===16?Rn.e.fromValues(this.min[0],this.max[1],this.min[2]):T.pnVertexFlag===1?Rn.e.fromValues(this.min[0],this.min[1],this.max[2]):Rn.e.fromValues(this.min[0],this.min[1],this.min[2])}}]),et}();function wo(et){for(var z=new qo,T=Rn.e.fromValues(et[0],et[1],et[2]),B=Rn.e.fromValues(et[0],et[1],et[2]),tt=3;tt<et.length;){var It=et[tt++],Nt=et[tt++],q=et[tt++];It<T[0]&&(T[0]=It),Nt<T[1]&&(T[1]=Nt),q<T[2]&&(T[2]=q),It>B[0]&&(B[0]=It),Nt>B[1]&&(B[1]=Nt),q>B[2]&&(B[2]=q)}return z.setMinMax(T,B),z}(se=Gn||(Gn={}))[se.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",se[se.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",se[se.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",se[se.POINTS=0]="POINTS",se[se.LINES=1]="LINES",se[se.LINE_LOOP=2]="LINE_LOOP",se[se.LINE_STRIP=3]="LINE_STRIP",se[se.TRIANGLES=4]="TRIANGLES",se[se.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",se[se.TRIANGLE_FAN=6]="TRIANGLE_FAN",se[se.ZERO=0]="ZERO",se[se.ONE=1]="ONE",se[se.SRC_COLOR=768]="SRC_COLOR",se[se.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",se[se.SRC_ALPHA=770]="SRC_ALPHA",se[se.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",se[se.DST_ALPHA=772]="DST_ALPHA",se[se.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",se[se.DST_COLOR=774]="DST_COLOR",se[se.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",se[se.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",se[se.FUNC_ADD=32774]="FUNC_ADD",se[se.BLEND_EQUATION=32777]="BLEND_EQUATION",se[se.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",se[se.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",se[se.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",se[se.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",se[se.MAX_EXT=32776]="MAX_EXT",se[se.MIN_EXT=32775]="MIN_EXT",se[se.BLEND_DST_RGB=32968]="BLEND_DST_RGB",se[se.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",se[se.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",se[se.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",se[se.CONSTANT_COLOR=32769]="CONSTANT_COLOR",se[se.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",se[se.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",se[se.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",se[se.BLEND_COLOR=32773]="BLEND_COLOR",se[se.ARRAY_BUFFER=34962]="ARRAY_BUFFER",se[se.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",se[se.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",se[se.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",se[se.STREAM_DRAW=35040]="STREAM_DRAW",se[se.STATIC_DRAW=35044]="STATIC_DRAW",se[se.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",se[se.BUFFER_SIZE=34660]="BUFFER_SIZE",se[se.BUFFER_USAGE=34661]="BUFFER_USAGE",se[se.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",se[se.FRONT=1028]="FRONT",se[se.BACK=1029]="BACK",se[se.FRONT_AND_BACK=1032]="FRONT_AND_BACK",se[se.CULL_FACE=2884]="CULL_FACE",se[se.BLEND=3042]="BLEND",se[se.DITHER=3024]="DITHER",se[se.STENCIL_TEST=2960]="STENCIL_TEST",se[se.DEPTH_TEST=2929]="DEPTH_TEST",se[se.SCISSOR_TEST=3089]="SCISSOR_TEST",se[se.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",se[se.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",se[se.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",se[se.NO_ERROR=0]="NO_ERROR",se[se.INVALID_ENUM=1280]="INVALID_ENUM",se[se.INVALID_VALUE=1281]="INVALID_VALUE",se[se.INVALID_OPERATION=1282]="INVALID_OPERATION",se[se.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",se[se.CW=2304]="CW",se[se.CCW=2305]="CCW",se[se.LINE_WIDTH=2849]="LINE_WIDTH",se[se.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",se[se.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",se[se.CULL_FACE_MODE=2885]="CULL_FACE_MODE",se[se.FRONT_FACE=2886]="FRONT_FACE",se[se.DEPTH_RANGE=2928]="DEPTH_RANGE",se[se.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",se[se.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",se[se.DEPTH_FUNC=2932]="DEPTH_FUNC",se[se.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",se[se.STENCIL_FUNC=2962]="STENCIL_FUNC",se[se.STENCIL_FAIL=2964]="STENCIL_FAIL",se[se.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",se[se.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",se[se.STENCIL_REF=2967]="STENCIL_REF",se[se.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",se[se.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",se[se.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",se[se.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",se[se.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",se[se.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",se[se.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",se[se.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",se[se.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",se[se.VIEWPORT=2978]="VIEWPORT",se[se.SCISSOR_BOX=3088]="SCISSOR_BOX",se[se.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",se[se.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",se[se.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",se[se.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",se[se.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",se[se.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",se[se.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",se[se.RED_BITS=3410]="RED_BITS",se[se.GREEN_BITS=3411]="GREEN_BITS",se[se.BLUE_BITS=3412]="BLUE_BITS",se[se.ALPHA_BITS=3413]="ALPHA_BITS",se[se.DEPTH_BITS=3414]="DEPTH_BITS",se[se.STENCIL_BITS=3415]="STENCIL_BITS",se[se.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",se[se.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",se[se.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",se[se.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",se[se.SAMPLES=32937]="SAMPLES",se[se.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",se[se.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",se[se.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",se[se.DONT_CARE=4352]="DONT_CARE",se[se.FASTEST=4353]="FASTEST",se[se.NICEST=4354]="NICEST",se[se.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",se[se.BYTE=5120]="BYTE",se[se.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",se[se.SHORT=5122]="SHORT",se[se.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",se[se.INT=5124]="INT",se[se.UNSIGNED_INT=5125]="UNSIGNED_INT",se[se.FLOAT=5126]="FLOAT",se[se.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",se[se.ALPHA=6406]="ALPHA",se[se.RGB=6407]="RGB",se[se.RGBA=6408]="RGBA",se[se.LUMINANCE=6409]="LUMINANCE",se[se.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",se[se.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",se[se.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",se[se.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",se[se.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",se[se.VERTEX_SHADER=35633]="VERTEX_SHADER",se[se.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",se[se.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",se[se.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",se[se.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",se[se.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",se[se.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",se[se.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",se[se.SHADER_TYPE=35663]="SHADER_TYPE",se[se.DELETE_STATUS=35712]="DELETE_STATUS",se[se.LINK_STATUS=35714]="LINK_STATUS",se[se.VALIDATE_STATUS=35715]="VALIDATE_STATUS",se[se.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",se[se.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",se[se.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",se[se.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",se[se.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",se[se.NEVER=512]="NEVER",se[se.LESS=513]="LESS",se[se.EQUAL=514]="EQUAL",se[se.LEQUAL=515]="LEQUAL",se[se.GREATER=516]="GREATER",se[se.NOTEQUAL=517]="NOTEQUAL",se[se.GEQUAL=518]="GEQUAL",se[se.ALWAYS=519]="ALWAYS",se[se.KEEP=7680]="KEEP",se[se.REPLACE=7681]="REPLACE",se[se.INCR=7682]="INCR",se[se.DECR=7683]="DECR",se[se.INVERT=5386]="INVERT",se[se.INCR_WRAP=34055]="INCR_WRAP",se[se.DECR_WRAP=34056]="DECR_WRAP",se[se.VENDOR=7936]="VENDOR",se[se.RENDERER=7937]="RENDERER",se[se.VERSION=7938]="VERSION",se[se.NEAREST=9728]="NEAREST",se[se.LINEAR=9729]="LINEAR",se[se.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",se[se.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",se[se.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",se[se.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",se[se.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",se[se.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",se[se.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",se[se.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",se[se.TEXTURE_2D=3553]="TEXTURE_2D",se[se.TEXTURE=5890]="TEXTURE",se[se.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",se[se.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",se[se.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",se[se.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",se[se.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",se[se.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",se[se.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",se[se.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",se[se.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",se[se.TEXTURE0=33984]="TEXTURE0",se[se.TEXTURE1=33985]="TEXTURE1",se[se.TEXTURE2=33986]="TEXTURE2",se[se.TEXTURE3=33987]="TEXTURE3",se[se.TEXTURE4=33988]="TEXTURE4",se[se.TEXTURE5=33989]="TEXTURE5",se[se.TEXTURE6=33990]="TEXTURE6",se[se.TEXTURE7=33991]="TEXTURE7",se[se.TEXTURE8=33992]="TEXTURE8",se[se.TEXTURE9=33993]="TEXTURE9",se[se.TEXTURE10=33994]="TEXTURE10",se[se.TEXTURE11=33995]="TEXTURE11",se[se.TEXTURE12=33996]="TEXTURE12",se[se.TEXTURE13=33997]="TEXTURE13",se[se.TEXTURE14=33998]="TEXTURE14",se[se.TEXTURE15=33999]="TEXTURE15",se[se.TEXTURE16=34e3]="TEXTURE16",se[se.TEXTURE17=34001]="TEXTURE17",se[se.TEXTURE18=34002]="TEXTURE18",se[se.TEXTURE19=34003]="TEXTURE19",se[se.TEXTURE20=34004]="TEXTURE20",se[se.TEXTURE21=34005]="TEXTURE21",se[se.TEXTURE22=34006]="TEXTURE22",se[se.TEXTURE23=34007]="TEXTURE23",se[se.TEXTURE24=34008]="TEXTURE24",se[se.TEXTURE25=34009]="TEXTURE25",se[se.TEXTURE26=34010]="TEXTURE26",se[se.TEXTURE27=34011]="TEXTURE27",se[se.TEXTURE28=34012]="TEXTURE28",se[se.TEXTURE29=34013]="TEXTURE29",se[se.TEXTURE30=34014]="TEXTURE30",se[se.TEXTURE31=34015]="TEXTURE31",se[se.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",se[se.REPEAT=10497]="REPEAT",se[se.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",se[se.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",se[se.FLOAT_VEC2=35664]="FLOAT_VEC2",se[se.FLOAT_VEC3=35665]="FLOAT_VEC3",se[se.FLOAT_VEC4=35666]="FLOAT_VEC4",se[se.INT_VEC2=35667]="INT_VEC2",se[se.INT_VEC3=35668]="INT_VEC3",se[se.INT_VEC4=35669]="INT_VEC4",se[se.BOOL=35670]="BOOL",se[se.BOOL_VEC2=35671]="BOOL_VEC2",se[se.BOOL_VEC3=35672]="BOOL_VEC3",se[se.BOOL_VEC4=35673]="BOOL_VEC4",se[se.FLOAT_MAT2=35674]="FLOAT_MAT2",se[se.FLOAT_MAT3=35675]="FLOAT_MAT3",se[se.FLOAT_MAT4=35676]="FLOAT_MAT4",se[se.SAMPLER_2D=35678]="SAMPLER_2D",se[se.SAMPLER_CUBE=35680]="SAMPLER_CUBE",se[se.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",se[se.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",se[se.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",se[se.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",se[se.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",se[se.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",se[se.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",se[se.COMPILE_STATUS=35713]="COMPILE_STATUS",se[se.LOW_FLOAT=36336]="LOW_FLOAT",se[se.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",se[se.HIGH_FLOAT=36338]="HIGH_FLOAT",se[se.LOW_INT=36339]="LOW_INT",se[se.MEDIUM_INT=36340]="MEDIUM_INT",se[se.HIGH_INT=36341]="HIGH_INT",se[se.FRAMEBUFFER=36160]="FRAMEBUFFER",se[se.RENDERBUFFER=36161]="RENDERBUFFER",se[se.RGBA4=32854]="RGBA4",se[se.RGB5_A1=32855]="RGB5_A1",se[se.RGB565=36194]="RGB565",se[se.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",se[se.STENCIL_INDEX=6401]="STENCIL_INDEX",se[se.STENCIL_INDEX8=36168]="STENCIL_INDEX8",se[se.DEPTH_STENCIL=34041]="DEPTH_STENCIL",se[se.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",se[se.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",se[se.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",se[se.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",se[se.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",se[se.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",se[se.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",se[se.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",se[se.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",se[se.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",se[se.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",se[se.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",se[se.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",se[se.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",se[se.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",se[se.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",se[se.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",se[se.NONE=0]="NONE",se[se.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",se[se.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",se[se.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",se[se.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",se[se.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",se[se.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",se[se.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",se[se.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",se[se.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",se[se.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",se[se.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",se[se.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",se[se.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",se[se.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",se[se.COPY_SRC=1]="COPY_SRC",se[se.COPY_DST=2]="COPY_DST",se[se.SAMPLED=4]="SAMPLED",se[se.STORAGE=8]="STORAGE",se[se.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT";var Ho=(Ia=Object(kr.injectable)(),ho=Object(kr.inject)(er.GeometryComponentManager),Xa=Object(kr.inject)(er.RenderEngine),Ia((Lo=function(){function et(){sr()(this,et),_n()(this,"geometry",zo,this),_n()(this,"engine",Jo,this)}var z;return pr()(et,[{key:"execute",value:(z=Wr()(br.a.mark(function T(){var B=this;return br.a.wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:this.geometry.forEach(function(It,Nt){Nt.dirty&&(Nt.attributes.forEach(function(q){var Rt;q.dirty&&q.data&&(q.buffer?(Rt=q.buffer)===null||Rt===void 0||Rt.subData({data:q.data,offset:0}):q.buffer=B.engine.createBuffer({data:q.data,type:Gn.FLOAT}),q.dirty=!1)}),Nt.indices&&(Nt.indicesBuffer?Nt.indicesBuffer.subData({data:Nt.indices,offset:0}):Nt.indicesBuffer=B.engine.createElements({data:Nt.indices,count:Nt.indices.length,type:Gn.UNSIGNED_INT,usage:Gn.STATIC_DRAW})),Nt.dirty=!1)});case 1:case"end":return tt.stop()}},T,this)})),function(){return z.apply(this,arguments)})},{key:"tearDown",value:function(){this.geometry.forEach(function(B,tt){tt.indicesBuffer&&tt.indicesBuffer.destroy(),tt.attributes.forEach(function(It){It.buffer&&It.buffer.destroy()})}),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{vertexCount:3},tt=B.vertexCount,It=zi();return this.geometry.create(It,{vertexCount:tt})}},{key:"createInstancedBufferGeometry",value:function(B){var tt=B.maxInstancedCount,It=B.vertexCount,Nt=zi();return this.geometry.create(Nt,{maxInstancedCount:tt,vertexCount:It})}},{key:"createBox",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},tt=B.widthSegments||1,It=B.heightSegments||1,Nt=B.depthSegments||1,q=B.halfExtents||Rn.e.fromValues(.5,.5,.5),Rt=Di()(q,3),Qt=Rt[0],ee=Rt[1],xe=Rt[2],Pe=[Rn.e.fromValues(-Qt,-ee,xe),Rn.e.fromValues(Qt,-ee,xe),Rn.e.fromValues(Qt,ee,xe),Rn.e.fromValues(-Qt,ee,xe),Rn.e.fromValues(Qt,-ee,-xe),Rn.e.fromValues(-Qt,-ee,-xe),Rn.e.fromValues(-Qt,ee,-xe),Rn.e.fromValues(Qt,ee,-xe)],He=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],Be=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],Ke={FRONT:0,BACK:1,TOP:2,BOTTOM:3,RIGHT:4,LEFT:5},Qe=[],ze=[],en=[],wn=[],zn=[],In=0,Xn=function(Ar,Nr,Dr){var Tr,Xr,Ir,vi;for(Ir=0;Ir<=Nr;Ir++)for(vi=0;vi<=Dr;vi++){var bi=Rn.e.create(),Vi=Rn.e.create(),Jr=Rn.e.create(),Li=Rn.e.create();Rn.e.lerp(bi,Pe[He[Ar][0]],Pe[He[Ar][1]],Ir/Nr),Rn.e.lerp(Vi,Pe[He[Ar][0]],Pe[He[Ar][2]],vi/Dr),Rn.e.sub(Jr,Vi,Pe[He[Ar][0]]),Rn.e.add(Li,bi,Jr),Tr=Ir/Nr,Xr=vi/Dr,Qe.push(Li[0],Li[1],Li[2]),ze.push(Be[Ar][0],Be[Ar][1],Be[Ar][2]),en.push(Tr,Xr),Tr=.875*(Tr/=3)+4/64,Xr=.875*(Xr/=3)+4/64,Tr+=Ar%3/3,Xr+=Math.floor(Ar/3)/3,wn.push(Tr,Xr),Ir<Nr&&vi<Dr&&(zn.push(In+Dr+1,In+1,In),zn.push(In+Dr+1,In+Dr+2,In+1)),In++}};Xn(Ke.FRONT,tt,It),Xn(Ke.BACK,tt,It),Xn(Ke.TOP,tt,Nt),Xn(Ke.BOTTOM,tt,Nt),Xn(Ke.RIGHT,Nt,It),Xn(Ke.LEFT,Nt,It);var cr=wo(Qe),or=zi();return this.geometry.create(or,{indices:Uint32Array.from(zn),aabb:cr,attributes:[{dirty:!0,name:"position",data:Float32Array.from(Qe),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]}]})}}]),et}(),zo=Ur()(Lo.prototype,"geometry",[ho],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jo=Ur()(Lo.prototype,"engine",[Xa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),so=Lo))||so);t(227);function ss(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=Ta()(et);if(z){var tt=Ta()(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return $i()(this,T)}}var ts,mo,ia,Bo,Io,Qa,yo,Co,Do,Da=function(et){ea()(T,et);var z=ss(T);function T(B){var tt;return sr()(this,T),(tt=z.call(this,B)).vertexShaderGLSL=void 0,tt.fragmentShaderGLSL=void 0,tt.dirty=!0,tt.uniforms=[],tt.cull={enable:!0,face:Gn.BACK},tt.depth={enable:!0},tt.blend=void 0,Object.assign(va()(tt),B),tt}return pr()(T,[{key:"setCull",value:function(tt){return this.cull=tt,this}},{key:"setDepth",value:function(tt){return this.depth=tt,this}},{key:"setBlend",value:function(tt){return this.blend=tt,this}},{key:"setUniform",value:function(tt,It){var Nt=this;if(typeof tt!="string")return Object.keys(tt).forEach(function(Rt){return Nt.setUniform(Rt,tt[Rt])}),this;var q=this.uniforms.find(function(Rt){return Rt.name===tt});return q?(q.dirty=!0,q.data=It):this.uniforms.push({name:tt,dirty:!0,data:It}),this.dirty=!0,this}}]),T}(Ui);function _o(et,z){var T=Object.keys(et);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(et);z&&(B=B.filter(function(tt){return Object.getOwnPropertyDescriptor(et,tt).enumerable})),T.push.apply(T,B)}return T}function Ko(et){for(var z=1;z<arguments.length;z++){var T=arguments[z]!=null?arguments[z]:{};z%2?_o(Object(T),!0).forEach(function(B){gr()(et,B,T[B])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(T)):_o(Object(T)).forEach(function(B){Object.defineProperty(et,B,Object.getOwnPropertyDescriptor(T,B))})}return et}var is,kt=(ts=Object(kr.injectable)(),mo=Object(kr.inject)(er.MaterialComponentManager),ia=Object(kr.inject)(er.RenderEngine),Bo=Object(kr.inject)(er.ShaderModuleService),ts((Qa=function(){function et(){sr()(this,et),_n()(this,"material",yo,this),_n()(this,"engine",Co,this),_n()(this,"shaderModule",Do,this)}var z;return pr()(et,[{key:"execute",value:(z=Wr()(br.a.mark(function T(){return br.a.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,Promise.all(this.material.map(function(){var tt=Wr()(br.a.mark(function It(Nt,q){return br.a.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:case"end":return Rt.stop()}},It)}));return function(It,Nt){return tt.apply(this,arguments)}}()));case 2:case"end":return B.stop()}},T,this)})),function(){return z.apply(this,arguments)})},{key:"tearDown",value:function(){this.material.clear()}},{key:"createBasicMaterial",value:function(){var B=zi();return this.material.create(B,{vertexShaderGLSL:this.engine.supportWebGPU?`layout(set = 0, binding = 0) uniform Uniforms {
  vec4 color;
  mat4 projectionMatrix;
  mat4 modelViewMatrix;
} uniforms;

layout(location = 0) in vec3 position;
// layout(location = 1) in vec3 barycentric;

layout(location = 0) out vec4 fragColor;
// layout(location = 1) out vec3 v_Barycentric;

void main() {
  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);
  fragColor = uniforms.color;
  // v_Barycentric = barycentric;
}`:`attribute vec3 position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform vec4 color;

varying vec4 fragColor;

void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  fragColor = color;
}`,fragmentShaderGLSL:this.engine.supportWebGPU?`// layout(set = 0, binding = 1) uniform WireframeUniforms {
//   float lineWidth;
//   vec4 lineColor;
// } wireframe;

layout(location = 0) in vec4 fragColor;
// layout(location = 1) in vec3 v_Barycentric;

layout(location = 0) out vec4 outColor;

// wireframe
// float edgeFactor() {
//   vec3 d = fwidth(v_Barycentric);
//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);
//   return min(min(a3.x, a3.y), a3.z);
// }

void main() {
  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));
  outColor = fragColor;
}`:`varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`})}},{key:"createShaderMaterial",value:function(B){var tt=zi(),It=B.vertexShader,Nt=B.fragmentShader,q=[];if(!this.engine.supportWebGPU){var Rt="material-".concat(tt);this.shaderModule.registerModule(Rt,{vs:B.vertexShader,fs:B.fragmentShader});var Qt=this.shaderModule.getModule(Rt);It=Qt.vs,Nt=Qt.fs,Qt.uniforms&&(q=Object.keys(Qt.uniforms).map(function(ee){return{dirty:!0,name:ee,data:Qt.uniforms[ee]}}))}return this.material.create(tt,Ko(Ko({vertexShaderGLSL:It,fragmentShaderGLSL:Nt},B),{},{uniforms:q}))}}]),et}(),yo=Ur()(Qa.prototype,"material",[mo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Co=Ur()(Qa.prototype,"engine",[ia],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Do=Ur()(Qa.prototype,"shaderModule",[Bo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Io=Qa))||Io);function v(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=Ta()(et);if(z){var tt=Ta()(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return $i()(this,T)}}(function(et){et[et.Standard=0]="Standard"})(is||(is={}));var l=function(et){ea()(T,et);var z=v(T);function T(B){var tt;return sr()(this,T),(tt=z.call(this,B)).strategy=is.Standard,tt.visibilityPlaneMask=0,tt.visible=!1,Object.assign(va()(tt),B),tt}return T}(Ui);t(228);function D(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=Ta()(et);if(z){var tt=Ta()(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return $i()(this,T)}}var Y,ht=function(et){ea()(T,et);var z=D(T);function T(B){var tt;return sr()(this,T),(tt=z.call(this,B)).material=void 0,tt.geometry=void 0,tt.aabb=new qo,tt.aabbDirty=!0,tt.model=void 0,tt.visible=!0,Object.assign(va()(tt),B),tt}return T}(Ui),At=function(){function et(z,T){sr()(this,et),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=z||0,this.normal=T||Rn.e.fromValues(0,1,0),this.updatePNVertexFlag()}return pr()(et,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(T){return Rn.e.dot(T,this.normal)-this.distance}},{key:"normalize",value:function(){var T=1/Rn.e.len(this.normal);Rn.e.scale(this.normal,this.normal,T),this.distance*=T}},{key:"intersectsLine",value:function(T,B,tt){var It=this.distanceToPoint(T),Nt=It/(It-this.distanceToPoint(B)),q=Nt>=0&&Nt<=1;return q&&tt&&Rn.e.lerp(tt,T,B,Nt),q}}]),et}();(function(et){et[et.OUTSIDE=4294967295]="OUTSIDE",et[et.INSIDE=0]="INSIDE",et[et.INDETERMINATE=2147483647]="INDETERMINATE"})(Y||(Y={}));var Ut,Yt,qt,oe,Te,Ge,Ue,We,vn,Tn,Ln,Un,Hn,xr=function(){function et(z){if(sr()(this,et),this.planes=[],z)this.planes=z;else for(var T=0;T<6;T++)this.planes.push(new At)}return pr()(et,[{key:"extractFromVPMatrix",value:function(T){var B=Di()(T,16),tt=B[0],It=B[1],Nt=B[2],q=B[3],Rt=B[4],Qt=B[5],ee=B[6],xe=B[7],Pe=B[8],He=B[9],Be=B[10],Ke=B[11],Qe=B[12],ze=B[13],en=B[14],wn=B[15];Rn.e.set(this.planes[0].normal,q-tt,xe-Rt,Ke-Pe),this.planes[0].distance=-(wn-Qe),Rn.e.set(this.planes[1].normal,q+tt,xe+Rt,Ke+Pe),this.planes[1].distance=-(wn+Qe),Rn.e.set(this.planes[2].normal,q+It,xe+Qt,Ke+He),this.planes[2].distance=-(wn+ze),Rn.e.set(this.planes[3].normal,q-It,xe-Qt,Ke-He),this.planes[3].distance=-(wn-ze),Rn.e.set(this.planes[4].normal,q-Nt,xe-ee,Ke-Be),this.planes[4].distance=-(wn-en),Rn.e.set(this.planes[5].normal,q+Nt,xe+ee,Ke+Be),this.planes[5].distance=-(wn+en),this.planes.forEach(function(zn){zn.normalize(),zn.updatePNVertexFlag()})}}]),et}(),Or=t(61),Rr=t.n(Or);function yi(et,z){var T;if(typeof Symbol=="undefined"||et[Symbol.iterator]==null){if(Array.isArray(et)||(T=function(Rt,Qt){if(!!Rt){if(typeof Rt=="string")return Xi(Rt,Qt);var ee=Object.prototype.toString.call(Rt).slice(8,-1);if(ee==="Object"&&Rt.constructor&&(ee=Rt.constructor.name),ee==="Map"||ee==="Set")return Array.from(Rt);if(ee==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ee))return Xi(Rt,Qt)}}(et))||z&&et&&typeof et.length=="number"){T&&(et=T);var B=0,tt=function(){};return{s:tt,n:function(){return B>=et.length?{done:!0}:{done:!1,value:et[B++]}},e:function(Qt){throw Qt},f:tt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var It,Nt=!0,q=!1;return{s:function(){T=et[Symbol.iterator]()},n:function(){var Qt=T.next();return Nt=Qt.done,Qt},e:function(Qt){q=!0,It=Qt},f:function(){try{Nt||T.return==null||T.return()}finally{if(q)throw It}}}}function Xi(et,z){(z==null||z>et.length)&&(z=et.length);for(var T=0,B=new Array(z);T<z;T++)B[T]=et[T];return B}var Zr,ki,Ba,Ha,Ka,Ja,ya,Mo,jo,Ro,Za,Ao,$a,ns,ba,qa,Po,Qo,Nu,ds,Lu,$s,_s,hu,Bu=(Ut=Object(kr.injectable)(),Yt=Object(kr.inject)(er.MeshComponentManager),qt=Object(kr.inject)(er.CullableComponentManager),oe=Object(kr.inject)(er.GeometryComponentManager),Te=Object(kr.inject)(er.HierarchyComponentManager),Ge=Object(kr.inject)(er.TransformComponentManager),Ut((We=function(){function et(){sr()(this,et),_n()(this,"mesh",vn,this),_n()(this,"cullable",Tn,this),_n()(this,"geometry",Ln,this),_n()(this,"hierarchy",Un,this),_n()(this,"transform",Hn,this),this.planes=void 0}var z;return pr()(et,[{key:"setFrustumPlanes",value:function(B){this.planes=B}},{key:"execute",value:(z=Wr()(br.a.mark(function T(B){var tt,It,Nt,q=this;return br.a.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:tt=yi(B);try{for(Nt=function(){var ee=It.value,xe=(ee.getScene(),ee.getCamera());q.mesh.forEach(function(Pe,He){var Be,Ke,Qe=q.hierarchy.getComponentByEntity(Pe),ze=q.cullable.getComponentByEntity(Pe),en=He.geometry,wn=q.transform.getComponentByEntity(Pe);if(en&&en.aabb&&wn&&He.aabbDirty){var zn=wn.worldTransform,In=en.aabb,Xn=In.center,cr=In.halfExtents,or=Rn.e.transformMat4(Rn.e.create(),Xn,zn),lr=(Be=zn,(Ke=Rn.a.create())[0]=Be[0],Ke[1]=Be[1],Ke[2]=Be[2],Ke[3]=Be[4],Ke[4]=Be[5],Ke[5]=Be[6],Ke[6]=Be[8],Ke[7]=Be[9],Ke[8]=Be[10],Ke),Ar=Rn.e.transformMat3(Rn.e.create(),cr,lr);He.aabb.update(or,Ar),He.aabbDirty=!1}if(ze&&en){var Nr=q.cullable.getComponentByEntity((Qe==null?void 0:Qe.parentID)||-1);ze.visibilityPlaneMask=q.computeVisibilityWithPlaneMask(He.aabb,(Nr==null?void 0:Nr.visibilityPlaneMask)||Y.INDETERMINATE,q.planes||xe.getFrustum().planes),ze.visible=ze.visibilityPlaneMask!==Y.OUTSIDE}})},tt.s();!(It=tt.n()).done;)Nt()}catch(Qt){tt.e(Qt)}finally{tt.f()}case 2:case"end":return Rt.stop()}},T)})),function(T){return z.apply(this,arguments)})},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(B,tt,It){if(tt===Y.OUTSIDE||tt===Y.INSIDE)return tt;for(var Nt=Y.INSIDE,q=0,Rt=It.length;q<Rt;++q){var Qt=q<31?1<<q:0;if(!(q<31&&(tt&Qt)==0)){var ee=It[q],xe=ee.normal,Pe=ee.distance;if(Rn.e.dot(xe,B.getNegativeFarPoint(It[q]))+Pe>0)return Y.OUTSIDE;Rn.e.dot(xe,B.getPositiveFarPoint(It[q]))+Pe>0&&(Nt|=Qt)}}return Nt}}]),et}(),vn=Ur()(We.prototype,"mesh",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tn=Ur()(We.prototype,"cullable",[qt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ln=Ur()(We.prototype,"geometry",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Un=Ur()(We.prototype,"hierarchy",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hn=Ur()(We.prototype,"transform",[Ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ue=We))||Ue);function du(et,z){var T;if(typeof Symbol=="undefined"||et[Symbol.iterator]==null){if(Array.isArray(et)||(T=function(Rt,Qt){if(!!Rt){if(typeof Rt=="string")return tl(Rt,Qt);var ee=Object.prototype.toString.call(Rt).slice(8,-1);if(ee==="Object"&&Rt.constructor&&(ee=Rt.constructor.name),ee==="Map"||ee==="Set")return Array.from(Rt);if(ee==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ee))return tl(Rt,Qt)}}(et))||z&&et&&typeof et.length=="number"){T&&(et=T);var B=0,tt=function(){};return{s:tt,n:function(){return B>=et.length?{done:!0}:{done:!1,value:et[B++]}},e:function(Qt){throw Qt},f:tt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var It,Nt=!0,q=!1;return{s:function(){T=et[Symbol.iterator]()},n:function(){var Qt=T.next();return Nt=Qt.done,Qt},e:function(Qt){q=!0,It=Qt},f:function(){try{Nt||T.return==null||T.return()}finally{if(q)throw It}}}}function tl(et,z){(z==null||z>et.length)&&(z=et.length);for(var T=0,B=new Array(z);T<z;T++)B[T]=et[T];return B}var bh,el,nl,rl,dc,il,al,ol,sl,Fu,Gu,qs,vc,ul,pc,tu,cl,xh,ll,fl,gc,hl,eu=(Zr=Object(kr.injectable)(),ki=Object(kr.inject)(er.MeshComponentManager),Ba=Object(kr.inject)(er.GeometryComponentManager),Ha=Object(kr.inject)(er.MaterialComponentManager),Ka=Object(kr.inject)(er.CullableComponentManager),Ja=Object(kr.inject)(er.TransformComponentManager),ya=Object(kr.inject)(er.HierarchyComponentManager),Mo=Object(kr.inject)(er.Systems),jo=Object(kr.named)(er.FrameGraphSystem),Ro=Object(kr.inject)(er.RenderEngine),Za=Object(kr.inject)(er.ResourcePool),Zr((hu=_s=function(){function et(){var B=this;sr()(this,et),_n()(this,"mesh",ns,this),_n()(this,"geometry",ba,this),_n()(this,"material",qa,this),_n()(this,"cullable",Po,this),_n()(this,"transform",Qo,this),_n()(this,"hierarchy",Nu,this),_n()(this,"frameGraphSystem",ds,this),_n()(this,"engine",Lu,this),_n()(this,"resourcePool",$s,this),this.setup=function(tt,It,Nt){var q=tt.createRenderTarget(It,"color buffer",{width:1,height:1,usage:Gn.RENDER_ATTACHMENT|Gn.SAMPLED|Gn.COPY_SRC});Nt.data={output:It.write(tt,q)}},this.execute=function(){var tt=Wr()(br.a.mark(function It(Nt,q,Rt){var Qt,ee,xe,Pe,He,Be;return br.a.wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:Qt=Nt.getResourceNode(q.data.output),ee=B.resourcePool.getOrCreateResource(Qt.resource),xe=du(Rt),Ke.prev=3,xe.s();case 5:if((Pe=xe.n()).done){Ke.next=11;break}return He=Pe.value,Ke.next=9,B.initView(He);case 9:Ke.next=5;break;case 11:Ke.next=16;break;case 13:Ke.prev=13,Ke.t0=Ke.catch(3),xe.e(Ke.t0);case 16:return Ke.prev=16,xe.f(),Ke.finish(16);case 19:Be=B.engine.getCanvas(),ee.resize({width:Be.width,height:Be.height}),B.engine.setScissor({enable:!1}),B.engine.clear({framebuffer:ee,color:Rt[0].getClearColor(),depth:1}),B.engine.useFramebuffer(ee,function(){var Qe,ze=du(Rt);try{for(ze.s();!(Qe=ze.n()).done;){var en=Qe.value;B.renderView(en)}}catch(wn){ze.e(wn)}finally{ze.f()}});case 24:case"end":return Ke.stop()}},It,null,[[3,13,16,19]])}));return function(It,Nt,q){return tt.apply(this,arguments)}}()}var z,T;return pr()(et,[{key:"renderView",value:function(tt){var It=tt.getScene(),Nt=tt.getCamera(),q=Nt.getViewTransform(),Rt=Rn.b.multiply(Rn.b.create(),Nt.getPerspective(),q);Nt.getFrustum().extractFromVPMatrix(Rt);var Qt=tt.getViewport(),ee=Qt.x,xe=Qt.y,Pe=Qt.width,He=Qt.height;this.engine.viewport({x:ee,y:xe,width:Pe,height:He});var Be,Ke=du(It.getEntities());try{for(Ke.s();!(Be=Ke.n()).done;){var Qe=Be.value;this.renderMesh(Qe,{camera:Nt,view:tt,viewMatrix:q})}}catch(ze){Ke.e(ze)}finally{Ke.f()}}},{key:"renderMesh",value:function(tt,It){var Nt=this,q=It.camera,Rt=It.view,Qt=It.viewMatrix,ee=this.mesh.getComponentByEntity(tt);if(ee.visible){this.hierarchy.forEach(function(en,wn){wn.parentID===tt&&Nt.renderMesh(en,{camera:q,view:Rt,viewMatrix:Qt})});var xe=ee.material,Pe=ee.geometry;if(Pe&&!Pe.dirty&&xe){var He=this.transform.getComponentByEntity(tt),Be=Rn.b.multiply(Rn.b.create(),Qt,He.worldTransform),Ke=Rt.getViewport(),Qe=Ke.width,ze=Ke.height;xe.setUniform({projectionMatrix:q.getPerspective(),modelViewMatrix:Be,modelMatrix:He.worldTransform,viewMatrix:Qt,cameraPosition:q.getPosition(),u_viewport:[Qe,ze]}),ee.model&&(ee.model.draw({uniforms:xe.uniforms.reduce(function(en,wn){return en[wn.name]=wn.data,en},{})}),xe.uniforms.forEach(function(en){en.dirty=!1}),xe.dirty=!1)}}}},{key:"initMesh",value:(T=Wr()(br.a.mark(function B(tt,It){var Nt,q,Rt,Qt,ee,xe,Pe,He=this;return br.a.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:if(Nt=this.mesh.getComponentByEntity(tt)){Be.next=3;break}return Be.abrupt("return");case 3:return q=Nt.material,Rt=Nt.geometry,Be.next=7,this.hierarchy.forEachAsync(function(){var Ke=Wr()(br.a.mark(function Qe(ze,en){return br.a.wrap(function(wn){for(;;)switch(wn.prev=wn.next){case 0:if(en.parentID!==tt){wn.next=4;break}return wn.next=4,He.initMesh(ze,It);case 4:case"end":return wn.stop()}},Qe)}));return function(Qe,ze){return Ke.apply(this,arguments)}}());case 7:if(Rt&&!Rt.dirty&&q){Be.next=9;break}return Be.abrupt("return");case 9:if(Nt.model){Be.next=21;break}return q.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),Qt=this.engine,ee=Qt.createModel,xe=Qt.createAttribute,Pe={vs:q.vertexShaderGLSL,fs:q.fragmentShaderGLSL,attributes:Rt.attributes.reduce(function(Ke,Qe){return Qe.data&&Qe.buffer&&(Ke[Qe.name]=xe({buffer:Qe.buffer,attributes:Qe.attributes,arrayStride:Qe.arrayStride,stepMode:Qe.stepMode,divisor:Qe.stepMode==="vertex"?0:1})),Ke},{}),uniforms:q.uniforms.reduce(function(Ke,Qe){return Ke[Qe.name]=Qe.data,Ke},{}),scissor:{enable:!0,box:function(){return It.getViewport()}}},q.cull&&(Pe.cull=q.cull),q.depth&&(Pe.depth=q.depth),q.blend&&(Pe.blend=q.blend),Rt.indicesBuffer&&(Pe.elements=Rt.indicesBuffer),Rt.maxInstancedCount&&(Pe.instances=Rt.maxInstancedCount,Pe.count=Rt.vertexCount||3),Be.next=20,ee(Pe);case 20:Nt.model=Be.sent;case 21:case"end":return Be.stop()}},B,this)})),function(B,tt){return T.apply(this,arguments)})},{key:"initView",value:(z=Wr()(br.a.mark(function B(tt){var It,Nt,q,Rt;return br.a.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:It=tt.getScene(),Nt=du(It.getEntities()),Qt.prev=2,Nt.s();case 4:if((q=Nt.n()).done){Qt.next=10;break}return Rt=q.value,Qt.next=8,this.initMesh(Rt,tt);case 8:Qt.next=4;break;case 10:Qt.next=15;break;case 12:Qt.prev=12,Qt.t0=Qt.catch(2),Nt.e(Qt.t0);case 15:return Qt.prev=15,Nt.f(),Qt.finish(15);case 18:case"end":return Qt.stop()}},B,this,[[2,12,15,18]])})),function(B){return z.apply(this,arguments)})}]),et}(),_s.IDENTIFIER="Render Pass",$a=hu,ns=Ur()($a.prototype,"mesh",[ki],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ba=Ur()($a.prototype,"geometry",[Ba],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qa=Ur()($a.prototype,"material",[Ha],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Po=Ur()($a.prototype,"cullable",[Ka],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qo=Ur()($a.prototype,"transform",[Ja],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nu=Ur()($a.prototype,"hierarchy",[ya],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ds=Ur()($a.prototype,"frameGraphSystem",[Mo,jo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lu=Ur()($a.prototype,"engine",[Ro],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$s=Ur()($a.prototype,"resourcePool",[Za],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ao=$a))||Ao),Uu=(bh=Object(kr.injectable)(),el=Object(kr.inject)(er.RenderEngine),nl=Object(kr.inject)(er.ResourcePool),bh((sl=ol=function et(){var z=this;sr()(this,et),_n()(this,"engine",il,this),_n()(this,"resourcePool",al,this),this.model=void 0,this.setup=function(T,B,tt){var It=T.getPass(eu.IDENTIFIER);if(It){var Nt=T.createRenderTarget(B,"render to screen",{width:1,height:1});tt.data={input:B.read(It.data.output),output:B.write(T,Nt)}}},this.execute=function(){var T=Wr()(br.a.mark(function B(tt,It){var Nt,q,Rt,Qt,ee,xe,Pe;return br.a.wrap(function(He){for(;;)switch(He.prev=He.next){case 0:if(Nt=z.engine,q=Nt.createModel,Rt=Nt.createAttribute,Qt=Nt.createBuffer,z.model){He.next=6;break}return He.next=4,q({vs:z.engine.supportWebGPU?`layout(location = 0) in vec2 a_Position;
layout(location = 0) out vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`:`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,fs:z.engine.supportWebGPU?`layout(set = 0, binding = 0) uniform sampler u_TextureSampler;
layout(set = 0, binding = 1) uniform texture2D u_Texture;

layout(location = 0) in vec2 v_UV;
layout(location = 0) out vec4 outColor;

void main() {
  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);
}`:`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,attributes:{a_Position:Rt({buffer:Qt({data:[-4,-4,4,-4,0,4],type:Gn.FLOAT}),size:2,arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:ee=He.sent,z.model=ee;case 6:xe=tt.getResourceNode(It.data.input),Pe=z.resourcePool.getOrCreateResource(xe.resource),z.engine.useFramebuffer(null,function(){z.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),z.model.draw({uniforms:{u_Texture:Pe}})});case 9:case"end":return He.stop()}},B)}));return function(B,tt){return T.apply(this,arguments)}}(),this.tearDown=function(){z.model=void 0}},ol.IDENTIFIER="Copy Pass",dc=sl,il=Ur()(dc.prototype,"engine",[el],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),al=Ur()(dc.prototype,"resourcePool",[nl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rl=dc))||rl);function mc(et,z){var T;if(typeof Symbol=="undefined"||et[Symbol.iterator]==null){if(Array.isArray(et)||(T=function(Rt,Qt){if(!!Rt){if(typeof Rt=="string")return yc(Rt,Qt);var ee=Object.prototype.toString.call(Rt).slice(8,-1);if(ee==="Object"&&Rt.constructor&&(ee=Rt.constructor.name),ee==="Map"||ee==="Set")return Array.from(Rt);if(ee==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ee))return yc(Rt,Qt)}}(et))||z&&et&&typeof et.length=="number"){T&&(et=T);var B=0,tt=function(){};return{s:tt,n:function(){return B>=et.length?{done:!0}:{done:!1,value:et[B++]}},e:function(Qt){throw Qt},f:tt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var It,Nt=!0,q=!1;return{s:function(){T=et[Symbol.iterator]()},n:function(){var Qt=T.next();return Nt=Qt.done,Qt},e:function(Qt){q=!0,It=Qt},f:function(){try{Nt||T.return==null||T.return()}finally{if(q)throw It}}}}function yc(et,z){(z==null||z>et.length)&&(z=et.length);for(var T=0,B=new Array(z);T<z;T++)B[T]=et[T];return B}var dl,zu,vl,Oh,pl,gl,ml,nu,Eh,yl,bl,xl,jd=1,Ol=2,bc=(Fu=Object(kr.injectable)(),Gu=Object(kr.inject)(er.RenderEngine),qs=Object(kr.inject)(er.ResourcePool),vc=Object(kr.inject)(er.RenderPassFactory),ul=Object(kr.inject)(er.MeshComponentManager),Fu((hl=gc=function(){function et(){var z=this;sr()(this,et),_n()(this,"engine",cl,this),_n()(this,"resourcePool",xh,this),_n()(this,"renderPassFactory",ll,this),_n()(this,"mesh",fl,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(T,B,tt){var It=T.createRenderTarget(B,"picking fbo",{width:1,height:1});tt.data={output:B.write(T,It)},B.hasSideEffect=!0},this.execute=function(){var T=Wr()(br.a.mark(function B(tt,It,Nt){var q,Rt,Qt;return br.a.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(z.views=Nt,!z.alreadyInRendering){ee.next=3;break}return ee.abrupt("return");case 3:q=mc(Nt);try{for(Qt=function(){var Pe=Rt.value,He=Pe.getViewport(),Be=He.width,Ke=He.height;z.alreadyInRendering=!0;var Qe=tt.getResourceNode(It.data.output);z.pickingFBO=z.resourcePool.getOrCreateResource(Qe.resource),z.pickingFBO.resize({width:Be,height:Ke}),z.engine.useFramebuffer(z.pickingFBO,function(){z.engine.clear({framebuffer:z.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var ze,en=z.renderPassFactory(eu.IDENTIFIER),wn=[],zn=mc(Pe.getScene().getEntities());try{for(zn.s();!(ze=zn.n()).done;){var In=ze.value,Xn=z.mesh.getComponentByEntity(In);Xn.material.setUniform("u_PickingStage",jd),wn.push(Xn)}}catch(cr){zn.e(cr)}finally{zn.f()}en.renderView(Pe),wn.forEach(function(cr){cr.material.setUniform("u_PickingStage",Ol)}),z.alreadyInRendering=!1})},q.s();!(Rt=q.n()).done;)Qt()}catch(xe){q.e(xe)}finally{q.f()}case 5:case"end":return ee.stop()}},B)}));return function(B,tt,It){return T.apply(this,arguments)}}(),this.pick=function(T,B){var tt,It,Nt=T.x,q=T.y,Rt=z.engine,Qt=Rt.readPixels,ee=Rt.useFramebuffer,xe=B.getViewport(),Pe=xe.width,He=xe.height,Be=Nt*window.devicePixelRatio,Ke=q*window.devicePixelRatio;if(!(Be>Pe||Be<0||Ke>He||Ke<0))return ee(z.pickingFBO,function(){var Qe,ze;(tt=Qt({x:Math.round(Be),y:Math.round(He-(q+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(4),framebuffer:z.pickingFBO}))[0]===0&&tt[1]===0&&tt[2]===0||(Qe=tt,ze=Di()(Qe,3),It=ze[0]+256*ze[1]+65536*ze[2]-1,z.highlightEnabled&&z.highlightPickedFeature(tt,B))}),It}}return pr()(et,[{key:"enableHighlight",value:function(T){this.highlightEnabled=T}},{key:"setHighlightColor",value:function(T){this.highlightColor=T}},{key:"highlightPickedFeature",value:function(T,B){if(T){var tt,It=mc(B.getScene().getEntities());try{for(It.s();!(tt=It.n()).done;){var Nt=tt.value,q=this.mesh.getComponentByEntity(Nt).material;q.setUniform("u_PickingStage",Ol),q.setUniform("u_PickingColor",[T[0],T[1],T[2]]),q.setUniform("u_HighlightColor",this.highlightColor)}}catch(Rt){It.e(Rt)}finally{It.f()}}}}]),et}(),gc.IDENTIFIER="PixelPicking Pass",tu=hl,cl=Ur()(tu.prototype,"engine",[Gu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xh=Ur()(tu.prototype,"resourcePool",[qs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ll=Ur()(tu.prototype,"renderPassFactory",[vc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fl=Ur()(tu.prototype,"mesh",[ul],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pc=tu))||pc),xc=(dl=Object(kr.injectable)(),zu=Object(kr.inject)(er.Systems),vl=Object(kr.named)(er.FrameGraphSystem),Oh=Object(kr.inject)(er.RenderPassFactory),pl=Object(kr.inject)(er.ConfigService),gl=Object(kr.inject)(er.ResourcePool),dl((nu=function(){function et(){sr()(this,et),_n()(this,"frameGraphSystem",Eh,this),_n()(this,"renderPassFactory",yl,this),_n()(this,"configService",bl,this),_n()(this,"resourcePool",xl,this)}var z;return pr()(et,[{key:"execute",value:(z=Wr()(br.a.mark(function T(B){var tt,It,Nt,q,Rt,Qt,ee,xe;return br.a.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:tt=this.renderPassFactory(eu.IDENTIFIER),It=tt.setup,Nt=tt.execute,this.frameGraphSystem.addPass(eu.IDENTIFIER,It,Nt),q=this.renderPassFactory(Uu.IDENTIFIER),Rt=q.setup,Qt=q.execute,ee=q.tearDown,xe=this.frameGraphSystem.addPass(Uu.IDENTIFIER,Rt,Qt,ee),this.frameGraphSystem.present(xe.data.output);case 5:case"end":return Pe.stop()}},T,this)})),function(T){return z.apply(this,arguments)})},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(B,tt){return this.renderPassFactory(bc.IDENTIFIER).pick(B,tt)}}]),et}(),Eh=Ur()(nu.prototype,"frameGraphSystem",[zu,vl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yl=Ur()(nu.prototype,"renderPassFactory",[Oh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bl=Ur()(nu.prototype,"configService",[pl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xl=Ur()(nu.prototype,"resourcePool",[gl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ml=nu))||ml);function Oc(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=Ta()(et);if(z){var tt=Ta()(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return $i()(this,T)}}var El,Sl,wl,vu,Cl,pu,Ml,Al,Tl,Sh=function(et){ea()(T,et);var z=Oc(T);function T(B){var tt;return sr()(this,T),(tt=z.call(this,B)).parentID=void 0,Object.assign(va()(tt),B),tt}return T}(Ui),wh=(El=Object(kr.injectable)(),Sl=Object(kr.inject)(er.HierarchyComponentManager),wl=Object(kr.inject)(er.TransformComponentManager),vu=Object(kr.inject)(er.MeshComponentManager),El((pu=function(){function et(){sr()(this,et),_n()(this,"hierarchy",Ml,this),_n()(this,"transform",Al,this),_n()(this,"mesh",Tl,this)}var z;return pr()(et,[{key:"execute",value:(z=Wr()(br.a.mark(function T(){return br.a.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return B.stop()}},T,this)})),function(){return z.apply(this,arguments)})},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var B=this;this.transform.forEach(function(tt,It){It.isDirty()&&(B.setMeshAABBDirty(tt),It.updateTransform())})}},{key:"runHierarchyUpdateSystem",value:function(){var B=this;this.hierarchy.forEach(function(tt,It){var Nt=B.transform.getComponentByEntity(tt),q=B.transform.getComponentByEntity(It.parentID);Nt!==null&&q!==null&&Nt.updateTransformWithParent(q)})}},{key:"attach",value:function(B,tt,It){if(this.hierarchy.contains(B)&&this.detach(B),this.hierarchy.create(B,{parentID:tt}),this.setMeshAABBDirty(tt),this.hierarchy.getCount()>1){for(var Nt=this.hierarchy.getCount()-1;Nt>0;--Nt)for(var q=this.hierarchy.getEntity(Nt),Rt=0;Rt<Nt;++Rt)if(this.hierarchy.getComponent(Rt).parentID===q){this.hierarchy.moveItem(Nt,Rt),++Nt;break}}this.hierarchy.getComponentByEntity(B);var Qt=this.transform.getComponentByEntity(tt);Qt===null&&(Qt=this.transform.create(tt));var ee=this.transform.getComponentByEntity(B);ee===null&&(ee=this.transform.create(B),Qt=this.transform.getComponentByEntity(tt)),!It&&Qt&&(ee.matrixTransform(Rn.b.invert(Rn.b.create(),Qt.worldTransform)),ee.updateTransform()),Qt&&ee.updateTransformWithParent(Qt)}},{key:"detach",value:function(B){if(this.hierarchy.getComponentByEntity(B)!==null){var tt=this.transform.getComponentByEntity(B);tt!==null&&tt.applyTransform(),this.hierarchy.removeKeepSorted(B),this.setMeshAABBDirty(B)}}},{key:"detachChildren",value:function(B){for(var tt=0;tt<this.hierarchy.getCount();){var It;if(((It=this.hierarchy.getComponent(tt))===null||It===void 0?void 0:It.parentID)===B){var Nt=this.hierarchy.getEntity(tt);this.detach(Nt)}else++tt}}},{key:"setMeshAABBDirty",value:function(B){var tt=this.mesh.getComponentByEntity(B);tt&&(tt.aabbDirty=!0)}}]),et}(),Ml=Ur()(pu.prototype,"hierarchy",[Sl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Al=Ur()(pu.prototype,"transform",[wl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tl=Ur()(pu.prototype,"mesh",[vu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cl=pu))||Cl);function Ch(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=Ta()(et);if(z){var tt=Ta()(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return $i()(this,T)}}var Ec=function(et){ea()(T,et);var z=Ch(T);function T(B){var tt,It,Nt,q,Rt,Qt,ee,xe,Pe,He,Be,Ke,Qe,ze,en;return sr()(this,T),(tt=z.call(this,B)).dirtyFlag=void 0,tt.localTranslation=Rn.e.fromValues(0,0,0),tt.localRotation=Rn.c.fromValues(0,0,0,1),tt.localScale=Rn.e.fromValues(1,1,1),tt.localTransform=Rn.b.create(),tt.worldTransform=Rn.b.create(),tt.getRotation=(It=Rn.c.create(),function(){return Rn.b.getRotation(It,tt.worldTransform),It}),tt.getScale=(Nt=Rn.e.create(),function(){return Rn.b.getScaling(Nt,tt.worldTransform),Nt}),tt.getPosition=(q=Rn.e.create(),function(){return Rn.b.getTranslation(q,tt.worldTransform),q}),tt.getLocalMatrix=(Rt=Rn.b.create(),function(){return Rn.b.fromRotationTranslationScale(Rt,tt.localRotation,tt.localTranslation,tt.localScale),Rt}),tt.matrixTransform=(Qt=Rn.b.create(),function(wn){Rn.b.multiply(Qt,tt.getLocalMatrix(),wn),Rn.b.getScaling(tt.localScale,Qt),Rn.b.getTranslation(tt.localTranslation,Qt),Rn.b.getRotation(tt.localRotation,Qt)}),tt.rotateRollPitchYaw=(ee=Rn.c.create(),xe=Rn.c.create(),Pe=Rn.c.create(),function(wn,zn,In){tt.setDirty(),Rn.c.fromEuler(ee,wn,0,0),Rn.c.fromEuler(xe,0,zn,0),Rn.c.fromEuler(Pe,0,0,In),Rn.c.multiply(tt.localRotation,ee,tt.localRotation),Rn.c.multiply(tt.localRotation,tt.localRotation,xe),Rn.c.multiply(tt.localRotation,Pe,tt.localRotation),Rn.c.normalize(tt.localRotation,tt.localRotation)}),tt.lerp=(He=Rn.e.create(),Be=Rn.c.create(),Ke=Rn.e.create(),Qe=Rn.e.create(),ze=Rn.c.create(),en=Rn.e.create(),function(wn,zn,In){tt.setDirty(),Rn.b.getScaling(He,wn.worldTransform),Rn.b.getTranslation(Ke,wn.worldTransform),Rn.b.getRotation(Be,wn.worldTransform),Rn.b.getScaling(Qe,zn.worldTransform),Rn.b.getTranslation(en,zn.worldTransform),Rn.b.getRotation(ze,zn.worldTransform),Rn.e.lerp(tt.localScale,He,Qe,In),Rn.c.slerp(tt.localRotation,Be,ze,In),Rn.e.lerp(tt.localTranslation,Ke,en,In)}),tt}return pr()(T,[{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var tt=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];tt?this.dirtyFlag|=T.DIRTY:this.dirtyFlag&=~T.DIRTY}},{key:"updateTransform",value:function(){this.isDirty()&&(this.setDirty(!1),Rn.b.copy(this.worldTransform,this.getLocalMatrix()))}},{key:"updateTransformWithParent",value:function(tt){Rn.b.multiply(this.worldTransform,this.getLocalMatrix(),tt.worldTransform)}},{key:"applyTransform",value:function(){this.setDirty(),Rn.b.getScaling(this.localScale,this.worldTransform),Rn.b.getTranslation(this.localTranslation,this.worldTransform),Rn.b.getRotation(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localTranslation=Rn.e.fromValues(0,0,0),this.localRotation=Rn.c.fromValues(0,0,0,1),this.localScale=Rn.e.fromValues(1,1,1)}},{key:"translate",value:function(tt){return this.setDirty(),Rn.e.add(this.localTranslation,this.localTranslation,tt),this}},{key:"scale",value:function(tt){return this.setDirty(),Rn.e.multiply(this.localScale,this.localScale,tt),this}},{key:"rotate",value:function(tt){return this.setDirty(),Rn.c.multiply(this.localRotation,this.localRotation,tt),Rn.c.normalize(this.localRotation,this.localRotation),this}}]),T}(Ui);Ec.DIRTY=1,t(143),t(144),t(229),t(145),t(146),t(113),t(147),t(50),t(148),t(230);var Sc,jl,Il,_u,Pl,Dl=t(154),Mh=t(251),Ah=t.n(Mh),Wu=(Sc=Object(kr.injectable)(),jl=Object(kr.inject)(er.RenderEngine),Sc((_u=function(){function et(){sr()(this,et),_n()(this,"engine",Pl,this),this.resourcePool={}}return pr()(et,[{key:"getOrCreateResource",value:function(T){if(!this.resourcePool[T.name]){var B=T.descriptor,tt=B.width,It=B.height,Nt=B.usage;this.resourcePool[T.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:tt,height:It,wrapS:Gn.CLAMP_TO_EDGE,wrapT:Gn.CLAMP_TO_EDGE,usage:Nt})})}return this.resourcePool[T.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),et}(),Pl=Ur()(_u.prototype,"engine",[jl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Il=_u))||Il);function Th(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=Ta()(et);if(z){var tt=Ta()(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return $i()(this,T)}}var wc,Rl,jh=function(et){ea()(T,et);var z=Th(T);function T(B){var tt;return sr()(this,T),(tt=z.call(this,B)).name=void 0,tt.name=B.name||"",tt}return T}(Ui),kl=Object(kr.injectable)()(wc=function(){function et(){sr()(this,et),this.config=void 0}return pr()(et,[{key:"get",value:function(){return this.config}},{key:"set",value:function(T){this.config=T}}]),et}())||wc,Ih=Object(kr.injectable)()(Rl=function(){function et(){sr()(this,et)}return pr()(et,[{key:"listen",value:function(T){}},{key:"on",value:function(T,B){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),et}())||Rl,Ph=t(252),Nl=t.n(Ph),Cc,Dh=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function Ll(et){var z={};return{content:et=et.replace(Dh,function(T,B,tt){var It=tt.split(":"),Nt=It[0].trim(),q="";switch(It.length>1&&(q=It[1].trim()),B){case"bool":q=q==="true";break;case"float":case"int":q=Number(q);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":q=q?q.replace("[","").replace("]","").split(",").reduce(function(Rt,Qt){return Rt.push(Number(Qt.trim())),Rt},[]):new Array(function(Rt){var Qt=0;switch(Rt){case"vec2":case"ivec2":Qt=2;break;case"vec3":case"ivec3":Qt=3;break;case"vec4":case"ivec4":case"mat2":Qt=4;break;case"mat3":Qt=9;break;case"mat4":Qt=16}return Qt}(B)).fill(0)}return z[Nt]=q,"uniform ".concat(B," ").concat(Nt,`;
`)}),uniforms:z}}function Vu(et,z){var T=Object.keys(et);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(et);z&&(B=B.filter(function(tt){return Object.getOwnPropertyDescriptor(et,tt).enumerable})),T.push.apply(T,B)}return T}function gu(et){for(var z=1;z<arguments.length;z++){var T=arguments[z]!=null?arguments[z]:{};z%2?Vu(Object(T),!0).forEach(function(B){gr()(et,B,T[B])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(T)):Vu(Object(T)).forEach(function(B){Object.defineProperty(et,B,Object.getOwnPropertyDescriptor(T,B))})}return et}var Bl=/precision\s+(high|low|medium)p\s+float/,Rh=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,kh=Object(kr.injectable)()(Cc=function(){function et(){sr()(this,et),this.moduleCache={},this.rawContentCache={}}return pr()(et,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}`,fs:`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`}),this.registerModule("sdf2d",{vs:"",fs:`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}`})}},{key:"registerModule",value:function(T,B){if(!this.rawContentCache[T]){var tt=B.vs,It=B.fs,Nt=B.uniforms,q=Ll(tt),Rt=q.content,Qt=q.uniforms,ee=Ll(It),xe=ee.content,Pe=ee.uniforms;this.rawContentCache[T]={fs:xe,uniforms:gu(gu(gu({},Qt),Pe),Nt),vs:Rt}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(T){var B=this;if(this.moduleCache[T])return this.moduleCache[T];var tt=this.rawContentCache[T].vs,It=this.rawContentCache[T].fs,Nt=this.processModule(tt,[],"vs"),q=Nt.content,Rt=Nt.includeList,Qt=this.processModule(It,[],"fs"),ee=Qt.content,xe=Qt.includeList,Pe=ee,He=Nl()(Rt.concat(xe).concat(T)).reduce(function(Be,Ke){return gu(gu({},Be),B.rawContentCache[Ke].uniforms)},{});return Bl.test(ee)||(Pe=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`+ee),this.moduleCache[T]={fs:Pe.trim(),uniforms:He,vs:q.trim()},this.moduleCache[T]}},{key:"processModule",value:function(T,B,tt){var It=this;return{content:T.replace(Rh,function(Nt,q){var Rt=q.split(" ")[0].replace(/"/g,"");if(B.indexOf(Rt)>-1)return"";var Qt=It.rawContentCache[Rt][tt];return B.push(Rt),It.processModule(Qt,B,tt).content}),includeList:B}}}]),et}())||Cc,us=new kr.Container;Object(kr.decorate)(Object(kr.injectable)(),Dl.EventEmitter),us.bind(er.IEventEmitter).to(Dl.EventEmitter),Ah()(us,!1);function Nh(){var et=new kr.Container;return et.parent=us,et.bind(er.Systems).to(wh).inSingletonScope().whenTargetNamed(er.SceneGraphSystem),et.bind(er.Systems).to(fo).inSingletonScope().whenTargetNamed(er.FrameGraphSystem),et.bind(er.Systems).to(Bu).inSingletonScope().whenTargetNamed(er.MeshSystem),et.bind(er.Systems).to(Ho).inSingletonScope().whenTargetNamed(er.GeometrySystem),et.bind(er.Systems).to(kt).inSingletonScope().whenTargetNamed(er.MaterialSystem),et.bind(er.Systems).to(xc).inSingletonScope().whenTargetNamed(er.RendererSystem),et.bind(er.ResourcePool).to(Wu).inSingletonScope(),et.bind(er.ConfigService).to(kl).inSingletonScope(),et.bind(er.InteractorService).to(Ih).inSingletonScope(),et.bind(er.RenderPass).to(eu).inSingletonScope().whenTargetNamed(eu.IDENTIFIER),et.bind(er.RenderPass).to(Uu).inSingletonScope().whenTargetNamed(Uu.IDENTIFIER),et.bind(er.RenderPass).to(bc).inSingletonScope().whenTargetNamed(bc.IDENTIFIER),et.bind(er.RenderPassFactory).toFactory(function(z){return function(T){return z.container.getNamed(er.RenderPass,T)}}),et}us.bind(er.ShaderModuleService).to(kh).inSingletonScope(),us.bind(er.NameComponentManager).toConstantValue(new ra(jh)),us.bind(er.HierarchyComponentManager).toConstantValue(new ra(Sh)),us.bind(er.TransformComponentManager).toConstantValue(new ra(Ec)),us.bind(er.MeshComponentManager).toConstantValue(new ra(ht)),us.bind(er.CullableComponentManager).toConstantValue(new ra(l)),us.bind(er.GeometryComponentManager).toConstantValue(new ra(uo)),us.bind(er.MaterialComponentManager).toConstantValue(new ra(Da));var Fl;t(231),t(149),function(et){et.PANSTART="PANSTART",et.PANEND="PANEND",et.PANMOVE="PANMOVE",et.PINCH="PINCH",et.KEYDOWN="KEYDOWN",et.KEYUP="KEYUP",et.HOVER="HOVER"}(Fl||(Fl={})),t(232);var js,Gl,Is,mu,es=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);(function(et){et.Void="Void",et.Boolean="Boolean",et.Float="Float",et.Uint32="Uint32",et.Int32="Int32",et.Vector="Vector",et.Vector2Float="vec2<f32>",et.Vector3Float="vec3<f32>",et.Vector4Float="vec4<f32>",et.Vector2Boolean="vec2<bool>",et.Vector3Boolean="vec3<bool>",et.Vector4Boolean="vec4<bool>",et.Vector2Uint="vec2<u32>",et.Vector3Uint="vec3<u32>",et.Vector4Uint="vec4<u32>",et.Vector2Int="vec2<i32>",et.Vector3Int="vec3<i32>",et.Vector4Int="vec4<i32>",et.Matrix="Matrix",et.Matrix3x3Float="mat3x3<f32>",et.Matrix4x4Float="mat4x4<i32>",et.Struct="Struct",et.FloatArray="Float[]",et.Vector4FloatArray="vec4<f32>[]"})(js||(js={})),function(et){et.Program="Program",et.Identifier="Identifier",et.VariableDeclaration="VariableDeclaration",et.BlockStatement="BlockStatement",et.ReturnStatement="ReturnStatement",et.FunctionDeclaration="FunctionDeclaration",et.VariableDeclarator="VariableDeclarator",et.AssignmentExpression="AssignmentExpression",et.LogicalExpression="LogicalExpression",et.BinaryExpression="BinaryExpression",et.ArrayExpression="ArrayExpression",et.UnaryExpression="UnaryExpression",et.UpdateExpression="UpdateExpression",et.FunctionExpression="FunctionExpression",et.MemberExpression="MemberExpression",et.ConditionalExpression="ConditionalExpression",et.ExpressionStatement="ExpressionStatement",et.CallExpression="CallExpression",et.NumThreadStatement="NumThreadStatement",et.StorageStatement="StorageStatement",et.DoWhileStatement="DoWhileStatement",et.WhileStatement="WhileStatement",et.ForStatement="ForStatement",et.BreakStatement="BreakStatement",et.ContinueStatement="ContinueStatement",et.IfStatement="IfStatement",et.ImportedFunctionStatement="ImportedFunctionStatement"}(Gl||(Gl={})),function(et){et.Input="Input",et.Output="Output",et.Uniform="Uniform",et.Workgroup="Workgroup",et.UniformConstant="UniformConstant",et.Image="Image",et.StorageBuffer="StorageBuffer",et.Private="Private",et.Function="Function"}(Is||(Is={})),function(et){et.GLSL100="GLSL100",et.GLSL450="GLSL450",et.WGSL="WGSL"}(mu||(mu={}));function xs(et){return et===void 0?0:et>360||et<-360?et%360:et}function Ps(et,z,T){return Rr()(et)?Rn.e.fromValues(et,z,T):et.length===3?Rn.e.clone(et):Rn.e.fromValues(et[0],et[1],et[2])}var yu,Mc,Ac,Tc,Ul,po,Yu,Ds,zl=function(){function et(z,T){sr()(this,et),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=z,this.matrix=Rn.b.clone(T.matrix),this.right=Rn.e.clone(T.right),this.up=Rn.e.clone(T.up),this.forward=Rn.e.clone(T.forward),this.position=Rn.e.clone(T.position),this.focalPoint=Rn.e.clone(T.focalPoint),this.distanceVector=Rn.e.clone(T.distanceVector),this.azimuth=T.azimuth,this.elevation=T.elevation,this.roll=T.roll,this.relAzimuth=T.relAzimuth,this.relElevation=T.relElevation,this.relRoll=T.relRoll,this.dollyingStep=T.dollyingStep,this.distance=T.distance}return pr()(et,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(T){T.matrix=Rn.b.copy(T.matrix,this.matrix),T.right=Rn.e.copy(T.right,this.right),T.up=Rn.e.copy(T.up,this.up),T.forward=Rn.e.copy(T.forward,this.forward),T.position=Rn.e.copy(T.position,this.position),T.focalPoint=Rn.e.copy(T.focalPoint,this.focalPoint),T.distanceVector=Rn.e.copy(T.distanceVector,this.distanceVector),T.azimuth=this.azimuth,T.elevation=this.elevation,T.roll=this.roll,T.relAzimuth=this.relAzimuth,T.relElevation=this.relElevation,T.relRoll=this.relRoll,T.dollyingStep=this.dollyingStep,T.distance=this.distance}}]),et}();(function(et){et.ORBITING="ORBITING",et.EXPLORING="EXPLORING",et.TRACKING="TRACKING"})(po||(po={})),function(et){et.DEFAULT="DEFAULT",et.ROTATIONAL="ROTATIONAL",et.TRANSLATIONAL="TRANSLATIONAL",et.CINEMATIC="CINEMATIC"}(Yu||(Yu={})),function(et){et.ORTHOGRAPHIC="ORTHOGRAPHIC",et.PERSPECTIVE="PERSPECTIVE"}(Ds||(Ds={}));var _l,Wl,Vl,Yl,Xu,Xl,Hl,Os=Math.PI/180,Ws=180/Math.PI,Kl=(yu=Object(kr.injectable)(),Mc=Object(kr.inject)(er.InteractorService),yu((Tc=function(){function et(){sr()(this,et),this.matrix=Rn.b.create(),this.right=Rn.e.fromValues(1,0,0),this.up=Rn.e.fromValues(0,1,0),this.forward=Rn.e.fromValues(0,0,1),this.position=Rn.e.fromValues(0,0,1),this.focalPoint=Rn.e.fromValues(0,0,0),this.distanceVector=Rn.e.fromValues(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.rotateWorld=!1,_n()(this,"interactor",Ul,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=Rn.b.create(),this.view=void 0,this.following=void 0,this.type=po.EXPLORING,this.trackingMode=Yu.DEFAULT,this.projectionMode=Ds.PERSPECTIVE,this.frustum=new xr,this.landmarks=[],this.landmarkAnimationID=void 0}return pr()(et,[{key:"clone",value:function(){var T=new et;return T.setType(this.type,void 0),T.interactor=this.interactor,T}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(T,B){return this.type=T,this.type===po.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===po.TRACKING&&B!==void 0&&this.setTrackingMode(B),this}},{key:"setProjectionMode",value:function(T){return this.projectionMode=T,this}},{key:"setTrackingMode",value:function(T){if(this.type!==po.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=T,this}},{key:"setWorldRotation",value:function(T){this.rotateWorld=T,this._getAngles()}},{key:"getViewTransform",value:function(){return Rn.b.invert(Rn.b.create(),this.matrix)}},{key:"setMatrix",value:function(T){return this.matrix=T,this._update(),this}},{key:"setAspect",value:function(T){return this.setPerspective(this.near,this.far,this.fov,T),this}},{key:"setViewOffset",value:function(T,B,tt,It,Nt,q){return this.aspect=T/B,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=T,this.view.fullHeight=B,this.view.offsetX=tt,this.view.offsetY=It,this.view.width=Nt,this.view.height=q,this.projectionMode===Ds.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===Ds.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(T,B,tt,It){return this.projectionMode=Ds.PERSPECTIVE,this.fov=tt,this.near=T,this.far=B,this.aspect=It,Rn.b.perspective(this.perspective,this.fov*Os,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(T,B,tt,It,Nt,q){this.projectionMode=Ds.ORTHOGRAPHIC,this.rright=B,this.left=T,this.top=tt,this.bottom=It,this.near=Nt,this.far=q;var Rt=(this.rright-this.left)/(2*this.zoom),Qt=(this.top-this.bottom)/(2*this.zoom),ee=(this.rright+this.left)/2,xe=(this.top+this.bottom)/2,Pe=ee-Rt,He=ee+Rt,Be=xe+Qt,Ke=xe-Qt;if(this.view!==void 0&&this.view.enabled){var Qe=(this.rright-this.left)/this.view.fullWidth/this.zoom,ze=(this.top-this.bottom)/this.view.fullHeight/this.zoom;He=(Pe+=Qe*this.view.offsetX)+Qe*this.view.width,Ke=(Be-=ze*this.view.offsetY)-ze*this.view.height}return Rn.b.ortho(this.perspective,Pe,He,Be,Ke,Nt,q),this}},{key:"setPosition",value:function(T,B,tt){return this._setPosition(T,B,tt),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(T,B,tt){var It=Rn.e.fromValues(0,1,0);if(this.focalPoint=Ps(T,B,tt),this.trackingMode===Yu.CINEMATIC){var Nt=Rn.e.subtract(Rn.e.create(),this.focalPoint,this.position);T=Nt[0],B=Nt[1],tt=Nt[2];var q=Rn.e.length(Nt),Rt=Math.asin(B/q)*Ws,Qt=90+Math.atan2(tt,T)*Ws,ee=Rn.b.create();Rn.b.rotateY(ee,ee,Qt*Os),Rn.b.rotateX(ee,ee,Rt*Os),It=Rn.e.transformMat4(Rn.e.create(),[0,1,0],ee)}return Rn.b.invert(this.matrix,Rn.b.lookAt(Rn.b.create(),this.position,this.focalPoint,It)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(T){if(!(this.distance===T||T<0)){this.distance=T,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var B=Rn.e.create();T=this.distance;var tt=this.forward,It=this.focalPoint;return B[0]=T*tt[0]+It[0],B[1]=T*tt[1]+It[1],B[2]=T*tt[2]+It[2],this._setPosition(B),this}}},{key:"changeAzimuth",value:function(T){return this.setAzimuth(this.azimuth+T),this}},{key:"changeElevation",value:function(T){return this.setElevation(this.elevation+T),this}},{key:"changeRoll",value:function(T){return this.setRoll(this.roll+T),this}},{key:"setAzimuth",value:function(T){return this.azimuth=xs(T),this.computeMatrix(),this._getAxes(),this.type===po.ORBITING||this.type===po.EXPLORING?this._getPosition():this.type===po.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(T){return this.elevation=xs(T),this.computeMatrix(),this._getAxes(),this.type===po.ORBITING||this.type===po.EXPLORING?this._getPosition():this.type===po.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(T){return this.roll=xs(T),this.computeMatrix(),this._getAxes(),this.type===po.ORBITING||this.type===po.EXPLORING?this._getPosition():this.type===po.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(T,B,tt){if(this.type===po.EXPLORING){T=xs(T),B=xs(B),tt=xs(tt);var It=Rn.c.setAxisAngle(Rn.c.create(),[1,0,0],(this.rotateWorld?1:-1)*B*Os),Nt=Rn.c.setAxisAngle(Rn.c.create(),[0,1,0],(this.rotateWorld?1:-1)*T*Os),q=Rn.c.setAxisAngle(Rn.c.create(),[0,0,1],tt*Os),Rt=Rn.c.multiply(Rn.c.create(),Nt,It);Rt=Rn.c.multiply(Rn.c.create(),Rt,q);var Qt=Rn.b.fromQuat(Rn.b.create(),Rt);Rn.b.translate(this.matrix,this.matrix,[0,0,-this.distance]),Rn.b.multiply(this.matrix,this.matrix,Qt),Rn.b.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+B)>90)return;this.relElevation=xs(B),this.relAzimuth=xs(T),this.relRoll=xs(tt),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===po.ORBITING||this.type===po.EXPLORING?this._getPosition():this.type===po.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(T,B){var tt=Ps(T,B,0),It=Rn.e.clone(this.position);return Rn.e.add(It,It,Rn.e.scale(Rn.e.create(),this.right,tt[0])),Rn.e.add(It,It,Rn.e.scale(Rn.e.create(),this.up,tt[1])),this._setPosition(It),this}},{key:"dolly",value:function(T){var B=this.forward,tt=Rn.e.clone(this.position),It=T*this.dollyingStep;return tt[0]+=It*B[0],tt[1]+=It*B[1],tt[2]+=It*B[2],this._setPosition(tt),this.type===po.ORBITING||this.type===po.EXPLORING?this._getDistance():this.type===po.TRACKING&&Rn.e.add(this.focalPoint,tt,this.distanceVector),this}},{key:"createLandmark",value:function(T,B){var tt=this.clone();tt.setPosition(B.position),tt.setFocalPoint(B.focalPoint),B.roll!==void 0&&tt.setRoll(B.roll);var It=new zl(T,tt);return this.landmarks.push(It),It}},{key:"setLandmark",value:function(T){var B=new zl(T,this);return this.landmarks.push(B),this}},{key:"gotoLandmark",value:function(T){var B=this,tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,It=this.landmarks.find(function(xe){return xe.name===T});if(It){if(tt===0)return void It.retrieve(this);this.landmarkAnimationID!==void 0&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var Nt,q=It.getPosition(),Rt=It.getFocalPoint(),Qt=It.getRoll(),ee=function xe(Pe){Nt===void 0&&(Nt=Pe);var He,Be=Pe-Nt,Ke=(1-Math.cos(Be/tt*Math.PI))/2,Qe=Rn.e.create(),ze=Rn.e.create();if(Rn.e.lerp(Qe,B.focalPoint,Rt,Ke),Rn.e.lerp(ze,B.position,q,Ke),He=B.roll*(1-Ke)+Qt*Ke,B.setFocalPoint(Qe),B.setPosition(ze),B.setRoll(He),B.computeMatrix(),!(Rn.e.dist(Qe,Rt)+Rn.e.dist(ze,q)>.01))return B.setFocalPoint(Qe),B.setPosition(ze),B.setRoll(He),B.computeMatrix(),void B.interactor.connect();Be<tt&&(B.landmarkAnimationID=window.requestAnimationFrame(xe))};window.requestAnimationFrame(ee)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var T,B,tt=Rn.c.setAxisAngle(Rn.c.create(),[0,0,1],this.roll*Os);Rn.b.identity(this.matrix),T=Rn.c.setAxisAngle(Rn.c.create(),[1,0,0],(this.rotateWorld&&this.type!==po.TRACKING||this.type===po.TRACKING?1:-1)*this.elevation*Os),B=Rn.c.setAxisAngle(Rn.c.create(),[0,1,0],(this.rotateWorld&&this.type!==po.TRACKING||this.type===po.TRACKING?1:-1)*this.azimuth*Os);var It=Rn.c.multiply(Rn.c.create(),B,T);It=Rn.c.multiply(Rn.c.create(),It,tt);var Nt=Rn.b.fromQuat(Rn.b.create(),It);this.type===po.ORBITING||this.type===po.EXPLORING?(Rn.b.translate(this.matrix,this.matrix,this.focalPoint),Rn.b.multiply(this.matrix,this.matrix,Nt),Rn.b.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===po.TRACKING&&(Rn.b.translate(this.matrix,this.matrix,this.position),Rn.b.multiply(this.matrix,this.matrix,Nt))}},{key:"_setPosition",value:function(T,B,tt){this.position=Ps(T,B,tt);var It=this.matrix;It[12]=this.position[0],It[13]=this.position[1],It[14]=this.position[2],It[15]=1}},{key:"_getAxes",value:function(){Rn.e.copy(this.right,Ps(Rn.f.transformMat4(Rn.f.create(),[1,0,0,0],this.matrix))),Rn.e.copy(this.up,Ps(Rn.f.transformMat4(Rn.f.create(),[0,1,0,0],this.matrix))),Rn.e.copy(this.forward,Ps(Rn.f.transformMat4(Rn.f.create(),[0,0,1,0],this.matrix))),Rn.e.normalize(this.right,this.right),Rn.e.normalize(this.up,this.up),Rn.e.normalize(this.forward,this.forward)}},{key:"_getAngles",value:function(){var T=this.distanceVector[0],B=this.distanceVector[1],tt=this.distanceVector[2],It=Rn.e.length(this.distanceVector);if(It===0)return this.elevation=0,void(this.azimuth=0);this.type===po.TRACKING||this.rotateWorld?(this.elevation=Math.asin(B/It)*Ws,this.azimuth=Math.atan2(-T,-tt)*Ws):(this.elevation=-Math.asin(B/It)*Ws,this.azimuth=-Math.atan2(-T,-tt)*Ws)}},{key:"_getPosition",value:function(){Rn.e.copy(this.position,Ps(Rn.f.transformMat4(Rn.f.create(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){Rn.e.transformMat3(this.distanceVector,[0,0,-this.distance],Rn.a.fromMat4(Rn.a.create(),this.matrix)),Rn.e.add(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=Rn.e.subtract(Rn.e.create(),this.focalPoint,this.position),this.distance=Rn.e.length(this.distanceVector),this.dollyingStep=this.distance/100}}]),et}(),Ul=Ur()(Tc.prototype,"interactor",[Mc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ac=Tc))||Ac),Jl=t(44),Hu=t.n(Jl),Lh=t(26),Ql=t.n(Lh),ci=t(7);function jc(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Zl(et,z){var T=Object.keys(et);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(et);z&&(B=B.filter(function(tt){return Object.getOwnPropertyDescriptor(et,tt).enumerable})),T.push.apply(T,B)}return T}function Ku(et){for(var z=1;z<arguments.length;z++){var T=arguments[z]!=null?arguments[z]:{};z%2?Zl(Object(T),!0).forEach(function(B){gr()(et,B,T[B])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(T)):Zl(Object(T)).forEach(function(B){Object.defineProperty(et,B,Object.getOwnPropertyDescriptor(T,B))})}return et}var $l,bu,ql,tf,ef,nf,rf,Rs,af,of,sf,uf,Ju,cf,Es,ru,vs,rs,xu,ks,Vs,Qu,ps,Zo,Wo,gs,ms,Zu,lf=(_l=Object(kr.injectable)(),Wl=Object(kr.inject)(er.RenderEngine),Vl=Object(kr.inject)(er.ConfigService),_l((Xu=function(){function et(){sr()(this,et),_n()(this,"engine",Xl,this),_n()(this,"configService",Hl,this),this.entity=zi(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}var z,T,B;return pr()(et,[{key:"init",value:function(){var It=this.configService.get(),Nt=It.canvas,q=It.engineOptions;this.initPromise=this.engine.init(Ku({canvas:Nt||jc(),swapChainFormat:ci.TextureFormat.BGRA8Unorm,antialiasing:!1},q))}},{key:"setBundle",value:function(It){this.compiledBundle=JSON.parse(JSON.stringify(It))}},{key:"setDispatch",value:function(It){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=It),this}},{key:"setMaxIteration",value:function(It){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=It),this}},{key:"setBinding",value:function(It,Nt){var q=this;if(typeof It=="string"){var Rt=Rr()(Nt)||Hu()(Nt)||Ql()(Nt);if(this.compiledBundle&&this.compiledBundle.context){var Qt=this.compiledBundle.context.defines.find(function(xe){return xe.name===It});if(Qt)return Qt.value=Nt,this;var ee=this.compiledBundle.context.uniforms.find(function(xe){return xe.name===It});ee&&(Rt?(ee.data=Nt,ee.isReferer=!1,ee.storageClass===Is.Uniform?this.model&&this.model.updateUniform(It,Nt):this.model&&this.model.updateBuffer(It,Nt)):(ee.isReferer=!0,ee.data=Nt))}}else Object.keys(It).forEach(function(xe){q.setBinding(xe,It[xe])});return this}},{key:"execute",value:(B=Wr()(br.a.mark(function tt(){var It,Nt,q=this,Rt=arguments;return br.a.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:if(It=Rt.length>0&&Rt[0]!==void 0?Rt[0]:1,!this.dirty){Qt.next=6;break}return this.compiledBundle.context&&(It>1?this.compiledBundle.context.maxIteration=It:this.compiledBundle.context.maxIteration++),Qt.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(ee){return ee.isReferer}).forEach(function(ee){var xe=ee.data,Pe=ee.name;q.model.confirmInput(xe.model,Pe)}),Nt=0;Nt<It;Nt++)this.model.run();return this.engine.endFrame(),Qt.abrupt("return",this);case 12:case"end":return Qt.stop()}},tt,this)})),function(){return B.apply(this,arguments)})},{key:"getOutput",value:(T=Wr()(br.a.mark(function tt(){return br.a.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:return It.abrupt("return",this.model.readData());case 1:case"end":return It.stop()}},tt,this)})),function(){return T.apply(this,arguments)})},{key:"compile",value:(z=Wr()(br.a.mark(function tt(){var It,Nt,q;return br.a.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return Rt.next=2,this.initPromise;case 2:return It=Ku({},this.compiledBundle.context),Nt=this.engine.supportWebGPU?this.engine.useWGSL?mu.WGSL:mu.GLSL450:mu.GLSL100,q=this.compiledBundle.shaders[Nt],It.defines.filter(function(Qt){return Qt.runtime}).forEach(function(Qt){var ee="".concat("__DefineValuePlaceholder__").concat(Qt.name);q=q.replace(ee,"".concat(Qt.value))}),It.shader=q,It.uniforms.forEach(function(Qt){if(!Qt.data&&Qt.storageClass===Is.StorageBuffer){var ee=1;Qt.type===js.FloatArray?ee=1:Qt.type===js.Vector4FloatArray&&(ee=4),Qt.data=new Float32Array(It.output.length*ee).fill(0)}}),this.compiledBundle.context=It,Rt.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=Rt.sent;case 12:case"end":return Rt.stop()}},tt,this)})),function(){return z.apply(this,arguments)})}]),et}(),Xl=Ur()(Xu.prototype,"engine",[Wl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hl=Ur()(Xu.prototype,"configService",[Vl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yl=Xu))||Yl),Ns=($l=Object(kr.injectable)(),bu=Object(kr.inject)(er.MeshComponentManager),ql=Object(kr.inject)(er.CullableComponentManager),tf=Object(kr.inject)(er.TransformComponentManager),ef=Object(kr.inject)(er.Systems),nf=Object(kr.named)(er.SceneGraphSystem),$l((cf=Ju=function(){function et(){sr()(this,et),this.attributes={},this.config=void 0,_n()(this,"mesh",af,this),_n()(this,"cullable",of,this),_n()(this,"transform",sf,this),_n()(this,"sceneGraphSystem",uf,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return pr()(et,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(T){this.config=T}},{key:"setEntity",value:function(T){this.entity=T,this.cullable.create(T),this.meshComponent=this.mesh.create(T),this.transformComponent=this.transform.create(T),this.onEntityCreated()}},{key:"setMaterial",value:function(T){return this.meshComponent.material=T,this}},{key:"setGeometry",value:function(T){return this.meshComponent.geometry=T,this}},{key:"setAttributes",value:function(T){var B=this;Object.keys(T).forEach(function(tt){T[tt]!==void 0&&T[tt]!==B.attributes[tt]&&(B.onAttributeChanged({name:tt,data:T[tt]}),B.attributes[tt]=T[tt])})}},{key:"setVisible",value:function(T){return this.meshComponent.visible=T,this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(T){return this.sceneGraphSystem.attach(this.entity,T.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(T){var B=T.name,tt=T.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(B),tt)}},{key:"convertAttributeName2UniformName",value:function(T){return T}}]),et}(),Ju.POINT="point",Ju.LINE="line",Ju.GRID="grid",Rs=cf,af=Ur()(Rs.prototype,"mesh",[bu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),of=Ur()(Rs.prototype,"cullable",[ql],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sf=Ur()(Rs.prototype,"transform",[tf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uf=Ur()(Rs.prototype,"sceneGraphSystem",[ef,nf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rf=Rs))||rf),Bh=t(253),Fh=t.n(Bh),Gh=function(){function et(z,T){sr()(this,et),this.attribute=void 0,this.buffer=void 0;var B=T.buffer,tt=T.offset,It=T.stride,Nt=T.normalized,q=T.size,Rt=T.divisor;this.buffer=B,this.attribute={buffer:B.get(),offset:tt||0,stride:It||0,normalized:Nt||!1,divisor:Rt||0},q&&(this.attribute.size=q)}return pr()(et,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(T){this.buffer.subData(T)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),et}(),Uh=(Es={},gr()(Es,Gn.POINTS,"points"),gr()(Es,Gn.LINES,"lines"),gr()(Es,Gn.LINE_LOOP,"line loop"),gr()(Es,Gn.LINE_STRIP,"line strip"),gr()(Es,Gn.TRIANGLES,"triangles"),gr()(Es,Gn.TRIANGLE_FAN,"triangle fan"),gr()(Es,Gn.TRIANGLE_STRIP,"triangle strip"),Es),ff=(ru={},gr()(ru,Gn.STATIC_DRAW,"static"),gr()(ru,Gn.DYNAMIC_DRAW,"dynamic"),gr()(ru,Gn.STREAM_DRAW,"stream"),ru),Ic=(vs={},gr()(vs,Gn.BYTE,"int8"),gr()(vs,Gn.UNSIGNED_INT,"int16"),gr()(vs,Gn.INT,"int32"),gr()(vs,Gn.UNSIGNED_BYTE,"uint8"),gr()(vs,Gn.UNSIGNED_SHORT,"uint16"),gr()(vs,Gn.UNSIGNED_INT,"uint32"),gr()(vs,Gn.FLOAT,"float"),vs),zh=(rs={},gr()(rs,Gn.ALPHA,"alpha"),gr()(rs,Gn.LUMINANCE,"luminance"),gr()(rs,Gn.LUMINANCE_ALPHA,"luminance alpha"),gr()(rs,Gn.RGB,"rgb"),gr()(rs,Gn.RGBA,"rgba"),gr()(rs,Gn.RGBA4,"rgba4"),gr()(rs,Gn.RGB5_A1,"rgb5 a1"),gr()(rs,Gn.RGB565,"rgb565"),gr()(rs,Gn.DEPTH_COMPONENT,"depth"),gr()(rs,Gn.DEPTH_STENCIL,"depth stencil"),rs),hf=(xu={},gr()(xu,Gn.DONT_CARE,"dont care"),gr()(xu,Gn.NICEST,"nice"),gr()(xu,Gn.FASTEST,"fast"),xu),df=(ks={},gr()(ks,Gn.NEAREST,"nearest"),gr()(ks,Gn.LINEAR,"linear"),gr()(ks,Gn.LINEAR_MIPMAP_LINEAR,"mipmap"),gr()(ks,Gn.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),gr()(ks,Gn.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),gr()(ks,Gn.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),ks),Ou=(Vs={},gr()(Vs,Gn.REPEAT,"repeat"),gr()(Vs,Gn.CLAMP_TO_EDGE,"clamp"),gr()(Vs,Gn.MIRRORED_REPEAT,"mirror"),Vs),$u=(Qu={},gr()(Qu,Gn.NONE,"none"),gr()(Qu,Gn.BROWSER_DEFAULT_WEBGL,"browser"),Qu),_h=(ps={},gr()(ps,Gn.NEVER,"never"),gr()(ps,Gn.ALWAYS,"always"),gr()(ps,Gn.LESS,"less"),gr()(ps,Gn.LEQUAL,"lequal"),gr()(ps,Gn.GREATER,"greater"),gr()(ps,Gn.GEQUAL,"gequal"),gr()(ps,Gn.EQUAL,"equal"),gr()(ps,Gn.NOTEQUAL,"notequal"),ps),vf=(Zo={},gr()(Zo,Gn.FUNC_ADD,"add"),gr()(Zo,Gn.MIN_EXT,"min"),gr()(Zo,Gn.MAX_EXT,"max"),gr()(Zo,Gn.FUNC_SUBTRACT,"subtract"),gr()(Zo,Gn.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Zo),Eu=(Wo={},gr()(Wo,Gn.ZERO,"zero"),gr()(Wo,Gn.ONE,"one"),gr()(Wo,Gn.SRC_COLOR,"src color"),gr()(Wo,Gn.ONE_MINUS_SRC_COLOR,"one minus src color"),gr()(Wo,Gn.SRC_ALPHA,"src alpha"),gr()(Wo,Gn.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),gr()(Wo,Gn.DST_COLOR,"dst color"),gr()(Wo,Gn.ONE_MINUS_DST_COLOR,"one minus dst color"),gr()(Wo,Gn.DST_ALPHA,"dst alpha"),gr()(Wo,Gn.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),gr()(Wo,Gn.CONSTANT_COLOR,"constant color"),gr()(Wo,Gn.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),gr()(Wo,Gn.CONSTANT_ALPHA,"constant alpha"),gr()(Wo,Gn.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),gr()(Wo,Gn.SRC_ALPHA_SATURATE,"src alpha saturate"),Wo),qu=(gs={},gr()(gs,Gn.NEVER,"never"),gr()(gs,Gn.ALWAYS,"always"),gr()(gs,Gn.LESS,"less"),gr()(gs,Gn.LEQUAL,"lequal"),gr()(gs,Gn.GREATER,"greater"),gr()(gs,Gn.GEQUAL,"gequal"),gr()(gs,Gn.EQUAL,"equal"),gr()(gs,Gn.NOTEQUAL,"notequal"),gs),Ls=(ms={},gr()(ms,Gn.ZERO,"zero"),gr()(ms,Gn.KEEP,"keep"),gr()(ms,Gn.REPLACE,"replace"),gr()(ms,Gn.INVERT,"invert"),gr()(ms,Gn.INCR,"increment"),gr()(ms,Gn.DECR,"decrement"),gr()(ms,Gn.INCR_WRAP,"increment wrap"),gr()(ms,Gn.DECR_WRAP,"decrement wrap"),ms),pf=(Zu={},gr()(Zu,Gn.FRONT,"front"),gr()(Zu,Gn.BACK,"back"),Zu),Bs=function(){function et(z,T){sr()(this,et),this.buffer=void 0;var B=T.data,tt=T.usage,It=T.type;this.buffer=z.buffer({data:B,usage:ff[tt||Gn.STATIC_DRAW],type:Ic[It||Gn.UNSIGNED_BYTE]})}return pr()(et,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(T){var B=T.data,tt=T.offset;this.buffer.subdata(B,tt)}}]),et}(),gf=t(23),Go=t.n(gf);function mf(et,z){var T=Object.keys(et);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(et);z&&(B=B.filter(function(tt){return Object.getOwnPropertyDescriptor(et,tt).enumerable})),T.push.apply(T,B)}return T}function Ss(et){for(var z=1;z<arguments.length;z++){var T=arguments[z]!=null?arguments[z]:{};z%2?mf(Object(T),!0).forEach(function(B){gr()(et,B,T[B])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(T)):mf(Object(T)).forEach(function(B){Object.defineProperty(et,B,Object.getOwnPropertyDescriptor(T,B))})}return et}var yf=0,bf=function(){function et(T,B){var tt=this;sr()(this,et),this.reGl=T,this.context=B,this.entity=zi(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var It={};this.context.uniforms.forEach(function(ee){var xe=ee.name,Pe=ee.type,He=ee.data,Be=ee.isReferer,Ke=ee.storageClass;if(Ke===Is.StorageBuffer){if(Be)tt.textureCache[xe]={data:void 0},It["".concat(xe,"Size")]=function(){return He.compiledBundle.context.output.textureSize};else{tt.textureCache[xe]=tt.calcDataTexture(xe,Pe,He);var Qe=tt.textureCache[xe],ze=Qe.textureWidth,en=Qe.isOutput;It["".concat(xe,"Size")]=[ze,ze],en&&(tt.outputTextureName=xe,tt.context.needPingpong&&(tt.outputTextureName="".concat(xe,"Output"),tt.textureCache[tt.outputTextureName]=tt.calcDataTexture(xe,Pe,He)))}It[xe]=function(){return tt.textureCache[xe].texture}}else if(Ke===Is.Uniform){if(He&&(Array.isArray(He)||Hu()(He))&&He.length>16)throw new Error("invalid data type ".concat(Pe));It[xe]=function(){return ee.data}}});var Nt=this.getOuputDataTexture(),q=Nt.textureWidth,Rt=Nt.texelCount;It.u_OutputTextureSize=[q,q],It.u_OutputTexelCount=Rt,this.context.output.textureSize=[q,q];var Qt={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:It,vert:`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(Qt)}var z;return pr()(et,[{key:"run",value:function(){var B=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){B.computeCommand()})}},{key:"readData",value:(z=Wr()(br.a.mark(function T(){var B,tt,It,Nt,q,Rt,Qt,ee,xe=this;return br.a.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){B=xe.reGl.read()}),!B){Pe.next=6;break}if(tt=this.getOuputDataTexture(),It=tt.originalDataLength,Nt=tt.elementsPerTexel,q=tt.typedArrayConstructor,Rt=q===void 0?Float32Array:q,Qt=[],Nt!==4)for(ee=0;ee<B.length;ee+=4)Nt===1?Qt.push(B[ee]):Nt===2?Qt.push(B[ee],B[ee+1]):Qt.push(B[ee],B[ee+1],B[ee+2]);else Qt=B;return Pe.abrupt("return",new Rt(Qt.slice(0,It)));case 6:return Pe.abrupt("return",new Float32Array);case 7:case"end":return Pe.stop()}},T,this)})),function(){return z.apply(this,arguments)})},{key:"confirmInput",value:function(B,tt){var It;this.entity===B.entity?(this.dynamicPingpong=!0,It=this):It=B,this.textureCache[tt].id=It.getOuputDataTexture().id,this.textureCache[tt].texture=It.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(B,tt){var It=this.context.uniforms.find(function(Qt){return Qt.name===B});if(It){var Nt=this.calcDataTexture(B,It.type,tt),q=Nt.texture,Rt=Nt.data;this.textureCache[B].data=Rt,this.textureCache[B].texture=q}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var B=this.context.output.name;this.textureCache[B].id=this.getOuputDataTexture().id,this.textureCache[B].texture=this.getOuputDataTexture().texture}var tt=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=tt}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var B=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=B}},{key:"cloneDataTexture",value:function(B){var tt=B.data,It=B.textureWidth;return Ss(Ss({},B),{},{id:yf++,texture:this.reGl.texture({width:It,height:It,data:tt,type:"float"})})}},{key:"calcDataTexture",value:function(B,tt,It){var Nt=1;tt===js.Vector4FloatArray&&(Nt=4);for(var q=[],Rt=0;Rt<It.length;Rt+=Nt)Nt===1?q.push(It[Rt],0,0,0):Nt===2?q.push(It[Rt],It[Rt+1],0,0):Nt===3?q.push(It[Rt],It[Rt+1],It[Rt+2],0):Nt===4&&q.push(It[Rt],It[Rt+1],It[Rt+2],It[Rt+3]);var Qt=It.length,ee=Math.ceil(Qt/Nt),xe=Math.ceil(Math.sqrt(ee)),Pe=xe*xe;ee<Pe&&q.push.apply(q,Go()(new Array(4*(Pe-ee)).fill(0)));var He=this.reGl.texture({width:xe,height:xe,data:q,type:"float"});return{id:yf++,data:q,originalDataLength:Qt,typedArrayConstructor:Hu()(It)?It.constructor:void 0,textureWidth:xe,texture:He,texelCount:ee,elementsPerTexel:Nt,isOutput:B===this.context.output.name}}}]),et}(),xf=function(){function et(z,T){sr()(this,et),this.elements=void 0;var B=T.data,tt=T.usage,It=T.type,Nt=T.count;this.elements=z.elements({data:B,usage:ff[tt||Gn.STATIC_DRAW],type:Ic[It||Gn.UNSIGNED_BYTE],count:Nt})}return pr()(et,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(T){var B=T.data;this.elements.subdata(B)}},{key:"destroy",value:function(){this.elements.destroy()}}]),et}(),Wh=function(){function et(z,T){sr()(this,et),this.framebuffer=void 0;var B=T.width,tt=T.height,It=T.color,Nt=T.colors,q=(T.depth,T.stencil,{width:B,height:tt});Array.isArray(Nt)&&(q.colors=Nt.map(function(Rt){return Rt.get()})),It&&typeof It!="boolean"&&(q.color=It.get()),this.framebuffer=z.framebuffer(q)}return pr()(et,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(T){var B=T.width,tt=T.height;this.framebuffer.resize(B,tt)}}]),et}(),Vh=t(90),Yh=t.n(Vh),Of=t(151),tc=t.n(Of);function Su(et){var z={};return Object.keys(et).forEach(function(T){(function B(tt,It,Nt,q){if(It===null||typeof It=="number"||typeof It=="boolean"||Array.isArray(It)&&typeof It[0]=="number"||Hu()(It)||It===""||"resize"in It)return void(Nt["".concat(q&&q+".").concat(tt)]=It);tc()(It)&&Object.keys(It).forEach(function(Rt){B(Rt,It[Rt],Nt,"".concat(q&&q+".").concat(tt))}),Array.isArray(It)&&It.forEach(function(Rt,Qt){Object.keys(Rt).forEach(function(ee){B(ee,Rt[ee],Nt,"".concat(q&&q+".").concat(tt,"[").concat(Qt,"]"))})})})(T,et[T],z,"")}),z}function Ef(et,z){var T=Object.keys(et);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(et);z&&(B=B.filter(function(tt){return Object.getOwnPropertyDescriptor(et,tt).enumerable})),T.push.apply(T,B)}return T}function iu(et){for(var z=1;z<arguments.length;z++){var T=arguments[z]!=null?arguments[z]:{};z%2?Ef(Object(T),!0).forEach(function(B){gr()(et,B,T[B])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(T)):Ef(Object(T)).forEach(function(B){Object.defineProperty(et,B,Object.getOwnPropertyDescriptor(T,B))})}return et}var Sf,Ys,wf=function(){function et(z,T){sr()(this,et),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=z;var B=T.vs,tt=T.fs,It=T.attributes,Nt=T.uniforms,q=T.primitive,Rt=T.count,Qt=T.elements,ee=T.depth,xe=T.blend,Pe=T.stencil,He=T.cull,Be=T.instances,Ke=T.scissor,Qe=T.viewport,ze={};Nt&&(this.uniforms=Su(Nt),Object.keys(Nt).forEach(function(zn){ze[zn]=z.prop(zn)}));var en={};Object.keys(It).forEach(function(zn){en[zn]=It[zn].get()});var wn={attributes:en,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(tt),uniforms:ze,vert:B,primitive:Uh[q===void 0?Gn.TRIANGLES:q]};Be&&(wn.instances=Be),Rt&&(wn.count=Rt),Qt&&(wn.elements=Qt.get()),Ke&&(wn.scissor=Ke),Qe&&(wn.viewport=Qe),this.initDepthDrawParams({depth:ee},wn),this.initBlendDrawParams({blend:xe},wn),this.initStencilDrawParams({stencil:Pe},wn),this.initCullDrawParams({cull:He},wn),this.drawCommand=z(wn)}return pr()(et,[{key:"addUniforms",value:function(T){this.uniforms=iu(iu({},this.uniforms),Su(T))}},{key:"draw",value:function(T){var B=iu(iu({},this.uniforms),Su(T.uniforms||{})),tt={};Object.keys(B).forEach(function(It){var Nt=Yh()(B[It]);Nt==="boolean"||Nt==="number"||Array.isArray(B[It])||B[It].BYTES_PER_ELEMENT?tt[It]=B[It]:tt[It]=B[It].get()}),this.drawCommand(tt)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(T,B){var tt=T.depth;tt&&(B.depth={enable:tt.enable===void 0||!!tt.enable,mask:tt.mask===void 0||!!tt.mask,func:_h[tt.func||Gn.LESS],range:tt.range||[0,1]})}},{key:"initBlendDrawParams",value:function(T,B){var tt=T.blend;if(tt){var It=tt.enable,Nt=tt.func,q=tt.equation,Rt=tt.color,Qt=Rt===void 0?[0,0,0,0]:Rt;B.blend={enable:!!It,func:{srcRGB:Eu[Nt&&Nt.srcRGB||Gn.SRC_ALPHA],srcAlpha:Eu[Nt&&Nt.srcAlpha||Gn.SRC_ALPHA],dstRGB:Eu[Nt&&Nt.dstRGB||Gn.ONE_MINUS_SRC_ALPHA],dstAlpha:Eu[Nt&&Nt.dstAlpha||Gn.ONE_MINUS_SRC_ALPHA]},equation:{rgb:vf[q&&q.rgb||Gn.FUNC_ADD],alpha:vf[q&&q.alpha||Gn.FUNC_ADD]},color:Qt}}}},{key:"initStencilDrawParams",value:function(T,B){var tt=T.stencil;if(tt){var It=tt.enable,Nt=tt.mask,q=Nt===void 0?-1:Nt,Rt=tt.func,Qt=Rt===void 0?{cmp:Gn.ALWAYS,ref:0,mask:-1}:Rt,ee=tt.opFront,xe=ee===void 0?{fail:Gn.KEEP,zfail:Gn.KEEP,zpass:Gn.KEEP}:ee,Pe=tt.opBack,He=Pe===void 0?{fail:Gn.KEEP,zfail:Gn.KEEP,zpass:Gn.KEEP}:Pe;B.stencil={enable:!!It,mask:q,func:iu(iu({},Qt),{},{cmp:qu[Qt.cmp]}),opFront:{fail:Ls[xe.fail],zfail:Ls[xe.zfail],zpass:Ls[xe.zpass]},opBack:{fail:Ls[He.fail],zfail:Ls[He.zfail],zpass:Ls[He.zpass]}}}}},{key:"initCullDrawParams",value:function(T,B){var tt=T.cull;if(tt){var It=tt.enable,Nt=tt.face,q=Nt===void 0?Gn.BACK:Nt;B.cull={enable:!!It,face:pf[q]}}}}]),et}(),Xh=function(){function et(z,T){sr()(this,et),this.texture=void 0,this.width=void 0,this.height=void 0;var B=T.data,tt=T.type,It=tt===void 0?Gn.UNSIGNED_BYTE:tt,Nt=T.width,q=T.height,Rt=T.flipY,Qt=Rt!==void 0&&Rt,ee=T.format,xe=ee===void 0?Gn.RGBA:ee,Pe=T.mipmap,He=Pe!==void 0&&Pe,Be=T.wrapS,Ke=Be===void 0?Gn.CLAMP_TO_EDGE:Be,Qe=T.wrapT,ze=Qe===void 0?Gn.CLAMP_TO_EDGE:Qe,en=T.aniso,wn=en===void 0?0:en,zn=T.alignment,In=zn===void 0?1:zn,Xn=T.premultiplyAlpha,cr=Xn!==void 0&&Xn,or=T.mag,lr=or===void 0?Gn.NEAREST:or,Ar=T.min,Nr=Ar===void 0?Gn.NEAREST:Ar,Dr=T.colorSpace,Tr=Dr===void 0?Gn.BROWSER_DEFAULT_WEBGL:Dr;this.width=Nt,this.height=q;var Xr={width:Nt,height:q,type:Ic[It],format:zh[xe],wrapS:Ou[Ke],wrapT:Ou[ze],mag:df[lr],min:df[Nr],alignment:In,flipY:Qt,colorSpace:$u[Tr],premultiplyAlpha:cr,aniso:wn};B&&(Xr.data=B),typeof He=="number"?Xr.mipmap=hf[He]:typeof He=="boolean"&&(Xr.mipmap=He),this.texture=z.texture(Xr)}return pr()(et,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(T){var B=T.width,tt=T.height;this.texture.resize(B,tt),this.width=B,this.height=tt}},{key:"destroy",value:function(){this.texture.destroy()}}]),et}(),Hh=Object(kr.injectable)()(Sf=function(){function et(){var T=this;sr()(this,et),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var B=Wr()(br.a.mark(function tt(It){return br.a.wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return Nt.abrupt("return",new wf(T.gl,It));case 1:case"end":return Nt.stop()}},tt)}));return function(tt){return B.apply(this,arguments)}}(),this.createAttribute=function(B){return new Gh(T.gl,B)},this.createBuffer=function(B){return new Bs(T.gl,B)},this.createElements=function(B){return new xf(T.gl,B)},this.createTexture2D=function(B){return new Xh(T.gl,B)},this.createFramebuffer=function(B){return new Wh(T.gl,B)},this.useFramebuffer=function(B,tt){T.gl({framebuffer:B?B.get():null})(tt)},this.createComputeModel=function(){var B=Wr()(br.a.mark(function tt(It){return br.a.wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return Nt.abrupt("return",new bf(T.gl,It));case 1:case"end":return Nt.stop()}},tt)}));return function(tt){return B.apply(this,arguments)}}(),this.clear=function(B){var tt=B.color,It=B.depth,Nt=B.stencil,q=B.framebuffer,Rt=q===void 0?null:q,Qt={color:tt,depth:It,stencil:Nt};Qt.framebuffer=Rt===null?Rt:Rt.get(),T.gl.clear(Qt)},this.setScissor=function(B){T.gl&&T.gl._gl&&(B.enable&&B.box?(T.gl._gl.enable(Gn.SCISSOR_TEST),T.gl._gl.scissor(B.box.x,B.box.y,B.box.width,B.box.height)):T.gl._gl.disable(Gn.SCISSOR_TEST),T.gl._refresh())},this.viewport=function(B){var tt=B.x,It=B.y,Nt=B.width,q=B.height;T.gl&&T.gl._gl&&(T.gl._gl.viewport(tt,It,Nt,q),T.gl._refresh())},this.readPixels=function(B){var tt=B.framebuffer,It={x:B.x,y:B.y,width:B.width,height:B.height};return tt&&(It.framebuffer=tt.get()),T.gl.read(It)},this.getCanvas=function(){return T.$canvas},this.getGLContext=function(){return T.gl._gl},this.destroy=function(){T.gl&&(T.gl.destroy(),T.inited=!1)}}var z;return pr()(et,[{key:"init",value:(z=Wr()(br.a.mark(function T(B){return br.a.wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:if(!this.inited){tt.next=2;break}return tt.abrupt("return");case 2:return this.$canvas=B.canvas,tt.next=5,new Promise(function(It,Nt){Fh()({canvas:B.canvas,attributes:{alpha:!0,antialias:B.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(Rt,Qt){!Rt&&Qt||Nt(Rt),It(Qt)}})});case 5:this.gl=tt.sent,this.inited=!0;case 7:case"end":return tt.stop()}},T,this)})),function(T){return z.apply(this,arguments)})},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),et}())||Sf;function Kh(et,z,T,B){if(typeof window!="undefined"){var tt=document.getElementsByTagName("head")[0],It=document.createElement("script");It.setAttribute("type","text/javascript"),It.setAttribute("src",et),B&&(It.id=B),It.onload=function(){z&&z()},It.onerror=function(Nt){T&&T("Unable to load script '".concat(et,"'"),Nt)},tt.appendChild(It)}}function Jh(et,z){return new Promise(function(T,B){Kh(et,function(){T()},function(tt,It){B(It)})})}var Qh=function(){return Cf.apply(this,arguments)};function Cf(){return(Cf=Wr()(br.a.mark(function et(){return br.a.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!Ys){z.next=2;break}return z.abrupt("return",Ys);case 2:return z.next=4,Jh("https://preview.babylonjs.com/glslang/glslang.js");case 4:return Ys=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),z.abrupt("return",Ys);case 6:case"end":return z.stop()}},et)}))).apply(this,arguments)}var ws,cs,Xs,$o,au,ec,wu,Pc=function(){function et(z,T){sr()(this,et),this.engine=z,this.options=T,this.attribute=void 0,this.buffer=void 0;var B=T,tt=B.buffer,It=B.offset,Nt=B.stride,q=B.normalized,Rt=B.size,Qt=B.divisor,ee=B.arrayStride,xe=B.attributes,Pe=B.stepMode;this.buffer=tt,this.attribute={buffer:tt.get(),offset:It||0,stride:Nt||0,normalized:q||!1,divisor:Qt||0,arrayStride:ee||0,attributes:xe,stepMode:Pe||"vertex"},Rt&&(this.attribute.size=Rt)}return pr()(et,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(T){this.buffer.subData(T)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),et}(),Hs=function(){function et(z,T){sr()(this,et),this.engine=z,this.options=T,this.buffer=void 0;var B=T,tt=B.data,It=B.usage;B.type,this.buffer=this.createBuffer(tt instanceof Array?new Float32Array(tt):tt,It||ci.BufferUsage.Vertex|ci.BufferUsage.CopyDst)}return pr()(et,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(T){var B=T.data,tt=T.offset;this.setSubData(this.buffer,tt,B instanceof Array?new Float32Array(B):B)}},{key:"createBuffer",value:function(T,B){var tt=T.byteLength%4,It={size:T.byteLength+tt,usage:B},Nt=this.engine.device.createBuffer(It);return this.setSubData(Nt,0,T),Nt}},{key:"setSubData",value:function(T,B,tt){(es?this.engine.device.getQueue():this.engine.device.defaultQueue).writeBuffer(T,B,tt)}}]),et}(),Zh=t(92),Cu=t.n(Zh),$h=function(){function et(tt,It){sr()(this,et),this.engine=tt,this.context=It,this.entity=zi(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}var z,T,B;return pr()(et,[{key:"init",value:(B=Wr()(br.a.mark(function tt(){var It,Nt,q,Rt,Qt,ee,xe,Pe=this;return br.a.wrap(function(He){for(;;)switch(He.prev=He.next){case 0:return He.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:It=He.sent,Nt=It.computeStage,q=this.context.uniforms.filter(function(Be){return Be.storageClass===Is.StorageBuffer}),Rt=this.context.uniforms.filter(function(Be){return Be.storageClass===Is.Uniform}),Qt=Rt.length?1:0,this.bindGroupEntries=[],Qt&&(ee=0,xe=[],Rt.forEach(function(Be){if(Rr()(Be.data))Pe.uniformGPUBufferLayout.push({name:Be.name,offset:ee}),ee+=4,xe.push(Be.data);else{var Ke,Qe=((Ke=Be.data)===null||Ke===void 0?void 0:Ke.length)||1;Qe===3&&(Qe=4,Be.data.push(0));var ze=ee/4%4;if(ze>0){var en=4-ze;if(Qe>1&&Qe<=en)Qe===2&&(en===3&&(ee+=4,xe.push(0)),xe.push.apply(xe,Go()(Be.data)),Pe.uniformGPUBufferLayout.push({name:Be.name,offset:ee}));else{for(var wn=0;wn<en;wn++)ee+=4,xe.push(0);xe.push.apply(xe,Go()(Be.data)),Pe.uniformGPUBufferLayout.push({name:Be.name,offset:ee})}}ee+=4*Qe}}),this.uniformBuffer=new Hs(this.engine,{data:xe instanceof Array?new Float32Array(xe):xe,usage:ci.BufferUsage.Uniform|ci.BufferUsage.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),q.forEach(function(Be){var Ke;Cu()(Be.data)||Be.type!==js.Vector4FloatArray&&Be.type!==js.FloatArray||(Be.name===Pe.context.output.name?(Ke=new Hs(Pe.engine,{data:isFinite(Number(Be.data))?[Be.data]:Be.data,usage:ci.BufferUsage.Storage|ci.BufferUsage.CopyDst|ci.BufferUsage.CopySrc}),Pe.outputBuffer=Ke,Pe.context.output={name:Be.name,length:isFinite(Number(Be.data))?1:Be.data.length,typedArrayConstructor:Float32Array,gpuBuffer:Ke.get()}):Be.isReferer?Be.data.model&&Be.data.model.outputBuffer&&(Ke=Be.data.model.outputBuffer):Ke=new Hs(Pe.engine,{data:isFinite(Number(Be.data))?[Be.data]:Be.data,usage:ci.BufferUsage.Storage|ci.BufferUsage.CopyDst|ci.BufferUsage.CopySrc}),Pe.vertexBuffers[Be.name]=Ke,Pe.bindGroupEntries.push({binding:Qt,resource:{name:Be.name,refer:Ke?void 0:Be.data,buffer:Ke?Ke.get():void 0}}),Qt++)}),this.computePipeline=this.engine.device.createComputePipeline({computeStage:Nt}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return He.stop()}},tt,this)})),function(){return B.apply(this,arguments)})},{key:"destroy",value:function(){var It=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach(function(Nt){return It.vertexBuffers[Nt].destroy()})}},{key:"readData",value:(T=Wr()(br.a.mark(function tt(){var It,Nt,q,Rt,Qt,ee,xe,Pe,He;return br.a.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:if(!(It=this.context.output)){Be.next=16;break}if(Nt=It.length,q=It.typedArrayConstructor,!(Rt=It.gpuBuffer)){Be.next=16;break}return Qt=Nt*q.BYTES_PER_ELEMENT,ee=this.engine.device.createBuffer({size:Qt,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),(xe=this.engine.device.createCommandEncoder()).copyBufferToBuffer(Rt,0,ee,0,Qt),(es?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([xe.finish()]),Be.next=12,ee.mapAsync(ci.MapMode.Read);case 12:return Pe=ee.getMappedRange(),He=new q(Pe.slice(0)),ee.unmap(),Be.abrupt("return",He);case 16:return Be.abrupt("return",new Float32Array);case 17:case"end":return Be.stop()}},tt,this)})),function(){return T.apply(this,arguments)})},{key:"run",value:function(){var It;this.engine.currentComputePass&&(this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(It=this.engine.currentComputePass).dispatch.apply(It,Go()(this.context.dispatch)))}},{key:"updateBuffer",value:function(It,Nt){var q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Rt=this.vertexBuffers[It];Rt&&Rt.subData({data:Nt,offset:q})}},{key:"updateUniform",value:function(It,Nt){var q=this.uniformGPUBufferLayout.find(function(Rt){return Rt.name===It});q&&this.uniformBuffer.subData({data:Number.isFinite(Nt)?new Float32Array([Nt]):new Float32Array(Nt),offset:q.offset})}},{key:"confirmInput",value:function(It,Nt){var q=this.vertexBuffers[Nt],Rt=It.outputBuffer;if(q&&Rt&&q!==Rt){var Qt=this.engine.device.createCommandEncoder(),ee=It.context.output,xe=ee.length*ee.typedArrayConstructor.BYTES_PER_ELEMENT;Qt.copyBufferToBuffer(Rt.get(),0,q.get(),0,xe),(es?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([Qt.finish()])}}},{key:"compileShaderToSpirV",value:function(It,Nt,q){return this.compileRawShaderToSpirV(q+It,Nt)}},{key:"compileRawShaderToSpirV",value:function(It,Nt){return this.engine.glslang.compileGLSL(It,Nt)}},{key:"compileComputePipelineStageDescriptor",value:(z=Wr()(br.a.mark(function tt(It){var Nt;return br.a.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(Nt=It,this.engine.options.useWGSL){q.next=6;break}return q.next=5,this.compileShaderToSpirV(It,"compute",`#version 450
`);case 5:Nt=q.sent;case 6:return q.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:Nt,isWHLSL:es}),entryPoint:"main"}});case 7:case"end":return q.stop()}},tt,this)})),function(tt){return z.apply(this,arguments)})}]),et}(),qh=function(){function et(z,T){sr()(this,et),this.engine=z,this.options=T,this.indexCount=void 0,this.buffer=void 0;var B=T,tt=B.data,It=(B.usage,B.type,B.count);this.indexCount=It||0,this.buffer=new Hs(z,{data:tt instanceof Array?new Uint16Array(tt):tt,usage:ci.BufferUsage.Index|ci.BufferUsage.CopyDst})}return pr()(et,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(T){this.buffer.subData(T)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),et}(),td=function(){function et(z,T){sr()(this,et),this.engine=z,this.options=T,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var B=T,tt=(B.width,B.height,B.color),It=(B.colors,B.depth);B.stencil,tt&&(this.colorTexture=tt),It&&(this.depthTexture=It)}return pr()(et,[{key:"get",value:function(){var T,B;return{color:(T=this.colorTexture)===null||T===void 0?void 0:T.get(),depth:(B=this.depthTexture)===null||B===void 0?void 0:B.get()}}},{key:"destroy",value:function(){var T,B;(T=this.colorTexture)===null||T===void 0||T.destroy(),(B=this.depthTexture)===null||B===void 0||B.destroy()}},{key:"resize",value:function(T){var B,tt,It=T.width,Nt=T.height;It===this.width&&Nt===this.height||((B=this.colorTexture)===null||B===void 0||B.resize({width:It,height:Nt}),(tt=this.depthTexture)===null||tt===void 0||tt.resize({width:It,height:Nt})),this.width=It,this.height=Nt}}]),et}(),ed=(ws={},gr()(ws,Gn.POINTS,ci.PrimitiveTopology.PointList),gr()(ws,Gn.LINES,ci.PrimitiveTopology.LineList),gr()(ws,Gn.LINE_LOOP,ci.PrimitiveTopology.LineList),gr()(ws,Gn.LINE_STRIP,ci.PrimitiveTopology.LineStrip),gr()(ws,Gn.TRIANGLES,ci.PrimitiveTopology.TriangleList),gr()(ws,Gn.TRIANGLE_FAN,ci.PrimitiveTopology.TriangleList),gr()(ws,Gn.TRIANGLE_STRIP,ci.PrimitiveTopology.TriangleStrip),ws),nd=(cs={},gr()(cs,Gn.NEVER,ci.CompareFunction.Never),gr()(cs,Gn.ALWAYS,ci.CompareFunction.Always),gr()(cs,Gn.LESS,ci.CompareFunction.Less),gr()(cs,Gn.LEQUAL,ci.CompareFunction.LessEqual),gr()(cs,Gn.GREATER,ci.CompareFunction.Greater),gr()(cs,Gn.GEQUAL,ci.CompareFunction.GreaterEqual),gr()(cs,Gn.EQUAL,ci.CompareFunction.Equal),gr()(cs,Gn.NOTEQUAL,ci.CompareFunction.NotEqual),cs),nc=(Xs={},gr()(Xs,Gn.FUNC_ADD,ci.BlendOperation.Add),gr()(Xs,Gn.MIN_EXT,ci.BlendOperation.Min),gr()(Xs,Gn.MAX_EXT,ci.BlendOperation.Max),gr()(Xs,Gn.FUNC_SUBTRACT,ci.BlendOperation.Subtract),gr()(Xs,Gn.FUNC_REVERSE_SUBTRACT,ci.BlendOperation.ReverseSubtract),Xs),rc=($o={},gr()($o,Gn.ZERO,ci.BlendFactor.Zero),gr()($o,Gn.ONE,ci.BlendFactor.One),gr()($o,Gn.SRC_COLOR,ci.BlendFactor.SrcColor),gr()($o,Gn.ONE_MINUS_SRC_COLOR,ci.BlendFactor.OneMinusSrcColor),gr()($o,Gn.SRC_ALPHA,ci.BlendFactor.SrcAlpha),gr()($o,Gn.ONE_MINUS_SRC_ALPHA,ci.BlendFactor.OneMinusSrcAlpha),gr()($o,Gn.DST_COLOR,ci.BlendFactor.DstColor),gr()($o,Gn.ONE_MINUS_DST_COLOR,ci.BlendFactor.OneMinusDstColor),gr()($o,Gn.DST_ALPHA,ci.BlendFactor.DstAlpha),gr()($o,Gn.ONE_MINUS_DST_ALPHA,ci.BlendFactor.OneMinusDstAlpha),gr()($o,Gn.CONSTANT_COLOR,ci.BlendFactor.BlendColor),gr()($o,Gn.ONE_MINUS_CONSTANT_COLOR,ci.BlendFactor.OneMinusBlendColor),gr()($o,Gn.SRC_ALPHA_SATURATE,ci.BlendFactor.SrcAlphaSaturated),$o),rd=(au={},gr()(au,Gn.ALPHA,"r8unorm"),gr()(au,Gn.RGBA,"rgba8unorm"),gr()(au,Gn.DEPTH_COMPONENT,"depth32float"),gr()(au,Gn.DEPTH_STENCIL,"depth24plus-stencil8"),au),Mf=(ec={},gr()(ec,Gn.NEAREST,"nearest"),gr()(ec,Gn.LINEAR,"linear"),ec),Mu=(wu={},gr()(wu,Gn.REPEAT,"repeat"),gr()(wu,Gn.CLAMP_TO_EDGE,"clamp-to-edge"),gr()(wu,Gn.MIRRORED_REPEAT,"mirror-repeat"),wu);function id(et){var z=et.cull;return z&&z.enable?z.face?z.face===Gn.FRONT?ci.CullMode.Front:ci.CullMode.Back:void 0:ci.CullMode.None}function ad(et){var z=et.depth,T=(et.stencil,{compare:ci.CompareFunction.Always,depthFailOp:ci.StencilOperation.Keep,failOp:ci.StencilOperation.Keep,passOp:ci.StencilOperation.Keep});return{depthWriteEnabled:z&&z.enable,depthCompare:nd[(z==null?void 0:z.func)||Gn.ALWAYS],format:ci.TextureFormat.Depth24PlusStencil8,stencilFront:T,stencilBack:T,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function Au(et,z){var T=et.blend;return[{format:z,alphaBlend:{srcFactor:rc[T&&T.func&&T.func.srcAlpha||Gn.ONE],dstFactor:rc[T&&T.func&&T.func.dstAlpha||Gn.ZERO],operation:nc[T&&T.equation&&T.equation.alpha||Gn.FUNC_ADD]},colorBlend:{srcFactor:rc[T&&T.func&&T.func.srcRGB||Gn.ONE],dstFactor:rc[T&&T.func&&T.func.dstRGB||Gn.ZERO],operation:nc[T&&T.equation&&T.equation.rgb||Gn.FUNC_ADD]},writeMask:ci.ColorWrite.All}]}function ou(et,z){var T=Object.keys(et);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(et);z&&(B=B.filter(function(tt){return Object.getOwnPropertyDescriptor(et,tt).enumerable})),T.push.apply(T,B)}return T}function Fs(et){for(var z=1;z<arguments.length;z++){var T=arguments[z]!=null?arguments[z]:{};z%2?ou(Object(T),!0).forEach(function(B){gr()(et,B,T[B])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(T)):ou(Object(T)).forEach(function(B){Object.defineProperty(et,B,Object.getOwnPropertyDescriptor(T,B))})}return et}function Af(et){for(var z=0,T=arguments.length,B=new Array(T>1?T-1:0),tt=1;tt<T;tt++)B[tt-1]=arguments[tt];for(var It=0,Nt=B;It<Nt.length;It++){var q=Nt[It];z+=q.length}for(var Rt=new et(z),Qt=0,ee=0,xe=B;ee<xe.length;ee++){var Pe=xe[ee];Rt.set(Pe,Qt),Qt+=Pe.length}return Rt}var Gs,ys,Tf,ic,jf,If,Pf,Df,Tu,Dc,Rf,kf,od=function(){function et(B,tt){sr()(this,et),this.engine=B,this.options=tt,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}var z,T;return pr()(et,[{key:"init",value:(T=Wr()(br.a.mark(function B(){var tt,It,Nt,q,Rt,Qt,ee,xe,Pe,He,Be,Ke,Qe,ze,en,wn,zn=this;return br.a.wrap(function(In){for(;;)switch(In.prev=In.next){case 0:return tt=this.options,It=tt.vs,Nt=tt.fs,q=tt.attributes,Rt=tt.uniforms,Qt=tt.primitive,tt.count,ee=tt.elements,xe=tt.depth,Pe=tt.blend,He=tt.stencil,Be=tt.cull,tt.instances,In.next=3,this.compilePipelineStageDescriptor(It,Nt,null);case 3:Ke=In.sent,Qe=Ke.vertexStage,ze=Ke.fragmentStage,Rt&&this.buildUniformBindGroup(Rt),ee&&(this.indexBuffer=ee.get(),this.indexCount=ee.indexCount),en={vertexBuffers:Object.keys(q).map(function(Xn,cr){var or=q[Xn],lr=or.get(),Ar=lr.arrayStride,Nr=lr.stepMode,Dr=lr.attributes;return zn.attributeCache[Xn]=or,{arrayStride:Ar,stepMode:Nr,attributes:Dr}})},wn={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:ed[Qt||Gn.TRIANGLES],rasterizationState:Fs(Fs({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:id({cull:Be})}),depthStencilState:ad({depth:xe,stencil:He}),colorStates:Au({blend:Pe},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:Qe,fragmentStage:ze,vertexState:en},this.renderPipeline=this.engine.device.createRenderPipeline(wn);case 11:case"end":return In.stop()}},B,this)})),function(){return T.apply(this,arguments)})},{key:"addUniforms",value:function(tt){this.uniforms=Fs(Fs({},this.uniforms),Su(tt))}},{key:"draw",value:function(tt){var It=this,Nt=this.engine.getCurrentRenderPass(),q=Fs(Fs({},this.uniforms),Su(tt.uniforms||{})),Rt=[];Object.keys(q).forEach(function(Qt){var ee=Yh()(q[Qt]);if(ee==="boolean"||ee==="number"||Array.isArray(q[Qt])||q[Qt].BYTES_PER_ELEMENT){var xe,Pe=(xe=It.uniformGPUBufferLayout.find(function(wn){return wn.name===Qt}))===null||xe===void 0?void 0:xe.offset;Cu()(Pe)||It.uniformBuffer.subData({data:q[Qt],offset:Pe})}else{var He,Be=(He=It.uniformGPUBufferLayout.find(function(wn){return wn.name===Qt}))===null||He===void 0?void 0:He.offset;if(!Cu()(Be)){var Ke=q[Qt].get(),Qe=Ke.color||Ke,ze=Qe.texture,en=Qe.sampler;en&&(Rt.push({binding:Be,resource:en}),Be++),Rt.push({binding:Be,resource:ze.createView()})}}}),this.uniformBuffer&&(Rt[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:Rt}),this.renderPipeline&&Nt.setPipeline(this.renderPipeline),Nt.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&Nt.setIndexBuffer(this.indexBuffer.get(),ci.IndexFormat.Uint32,0),Object.keys(this.attributeCache).forEach(function(Qt,ee){Nt.setVertexBuffer(0+ee,It.attributeCache[Qt].get().buffer,0)}),this.indexBuffer?Nt.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):Nt.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:(z=Wr()(br.a.mark(function B(tt,It,Nt){var q,Rt,Qt;return br.a.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(q=`#version 450
`,Rt=tt,Qt=It,this.engine.options.useWGSL){ee.next=10;break}return ee.next=6,this.compileShaderToSpirV(tt,"vertex",q);case 6:return Rt=ee.sent,ee.next=9,this.compileShaderToSpirV(It,"fragment",q);case 9:Qt=ee.sent;case 10:return ee.abrupt("return",this.createPipelineStageDescriptor(Rt,Qt));case 11:case"end":return ee.stop()}},B,this)})),function(B,tt,It){return z.apply(this,arguments)})},{key:"compileShaderToSpirV",value:function(tt,It,Nt){return this.compileRawShaderToSpirV(Nt+tt,It)}},{key:"compileRawShaderToSpirV",value:function(tt,It){return this.engine.glslang.compileGLSL(tt,It)}},{key:"createPipelineStageDescriptor",value:function(tt,It){return{vertexStage:{module:this.engine.device.createShaderModule({code:tt,isWHLSL:es}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:It,isWHLSL:es}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:ci.FrontFace.CCW,cullMode:ci.CullMode.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(tt){var It=this,Nt=0,q=Af.apply(void 0,[Float32Array].concat(Go()(Object.keys(tt).map(function(ee){return tt[ee]?(It.uniformGPUBufferLayout.push({name:ee,offset:Nt}),Nt+=4*(tt[ee].length||1),tt[ee]):[]})))),Rt=[],Qt=!1;q.length&&(Qt=!0,Rt.push({binding:0,visibility:ci.ShaderStage.Fragment|ci.ShaderStage.Vertex,type:ci.BindingType.UniformBuffer})),Object.keys(tt).filter(function(ee){return tt[ee]===null}).forEach(function(ee,xe){It.uniformGPUBufferLayout.push({name:ee,offset:2*xe+(Qt?1:0)}),Rt.push({binding:2*xe+(Qt?1:0),visibility:ci.ShaderStage.Fragment,type:ci.BindingType.Sampler},{binding:2*xe+(Qt?1:0)+1,visibility:ci.ShaderStage.Fragment,type:ci.BindingType.SampledTexture})}),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:Rt}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),Qt&&(this.uniformBuffer=new Hs(this.engine,{data:q instanceof Array?new Float32Array(q):q,usage:ci.BufferUsage.Uniform|ci.BufferUsage.CopyDst}))}}]),et}(),sd=function(){function et(z,T){sr()(this,et),this.engine=z,this.options=T,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return pr()(et,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(T){var B=T.width,tt=T.height;B===this.width&&tt===this.height||(this.destroy(),this.createTexture()),this.width=B,this.height=tt}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var T=this.options,B=(T.data,T.type),tt=(B===void 0&&Gn.UNSIGNED_BYTE,T.width),It=T.height,Nt=(T.flipY,T.format),q=Nt===void 0?Gn.RGBA:Nt,Rt=(T.mipmap,T.wrapS),Qt=Rt===void 0?Gn.CLAMP_TO_EDGE:Rt,ee=T.wrapT,xe=ee===void 0?Gn.CLAMP_TO_EDGE:ee,Pe=T.aniso,He=Pe===void 0?0:Pe,Be=(T.alignment,T.premultiplyAlpha,T.mag),Ke=Be===void 0?Gn.NEAREST:Be,Qe=T.min,ze=Qe===void 0?Gn.NEAREST:Qe,en=T.colorSpace,wn=(en===void 0&&Gn.BROWSER_DEFAULT_WEBGL,T.usage);this.width=tt,this.height=It,this.texture=this.engine.device.createTexture({size:[tt,It,1],mipLevelCount:1,sampleCount:1,dimension:ci.TextureDimension.E2d,format:rd[q],usage:wn||ci.TextureUsage.Sampled|ci.TextureUsage.CopyDst}),(!wn||wn&ci.TextureUsage.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:Mu[Qt],addressModeV:Mu[xe],addressModeW:Mu[Qt],magFilter:Mf[Ke],minFilter:Mf[ze],maxAnisotropy:He}))}}]),et}(),ud=Object(kr.injectable)()(Gs=function(){function et(){var B=this;sr()(this,et),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(tt){tt.framebuffer;var It=tt.color,Nt=tt.depth,q=tt.stencil;B.options.supportCompute&&B.startComputePass(),B.currentRenderTarget?(B.currentRenderPass&&B.endRenderTargetRenderPass(),B.startRenderTargetRenderPass(B.currentRenderTarget,It||null,!!Nt,!!q)):(B.mainColorAttachments[0].loadValue=It||ci.LoadOp.Load,B.mainDepthAttachment.depthLoadValue=Nt||ci.LoadOp.Load,B.mainDepthAttachment.stencilLoadValue=q?B.clearStencilValue:ci.LoadOp.Load,B.mainRenderPass&&B.endMainRenderPass(),B.startMainRenderPass())},this.createModel=function(){var tt=Wr()(br.a.mark(function It(Nt){var q;return br.a.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return q=new od(B,Nt),Rt.next=3,q.init();case 3:return Rt.abrupt("return",q);case 4:case"end":return Rt.stop()}},It)}));return function(It){return tt.apply(this,arguments)}}(),this.createAttribute=function(tt){return new Pc(B,tt)},this.createBuffer=function(tt){return new Hs(B,tt)},this.createElements=function(tt){return new qh(B,tt)},this.createTexture2D=function(tt){return new sd(B,tt)},this.createFramebuffer=function(tt){return new td(B,tt)},this.useFramebuffer=function(tt,It){B.currentRenderTarget&&B.unbindFramebuffer(B.currentRenderTarget),B.currentRenderTarget=tt,B.currentRenderTargetViewDescriptor={dimension:ci.TextureViewDimension.E2d,arrayLayerCount:1,aspect:ci.TextureAspect.All},B.currentRenderPass=null,It()},this.createComputeModel=function(){var tt=Wr()(br.a.mark(function It(Nt){var q;return br.a.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return q=new $h(B,Nt),Rt.next=3,q.init();case 3:return Rt.abrupt("return",q);case 4:case"end":return Rt.stop()}},It)}));return function(It){return tt.apply(this,arguments)}}(),this.getCanvas=function(){return B.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(tt){var It=tt.x,Nt=tt.y,q=tt.width,Rt=tt.height;B.currentRenderPass?B.transientViewport.x!==1/0?B.getCurrentRenderPass().setViewport(B.transientViewport.x,B.transientViewport.y,B.transientViewport.width,B.transientViewport.height,0,1):(It!==B.cachedViewport.x||Nt!==B.cachedViewport.y||q!==B.cachedViewport.width||Rt!==B.cachedViewport.height)&&(B.cachedViewport={x:It,y:Nt,width:q,height:Rt},B.getCurrentRenderPass().setViewport(It,Nt,q,Rt,0,1)):B.transientViewport={x:It,y:Nt,width:q,height:Rt}},this.readPixels=function(tt){throw new Error("Method not implemented.")}}var z,T;return pr()(et,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:(T=Wr()(br.a.mark(function B(tt){return br.a.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:return this.canvas=tt.canvas,this.options=tt,this.useWGSL=!!tt.useWGSL,this.mainPassSampleCount=tt.antialiasing?this.defaultSampleCount:1,It.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return It.stop()}},B,this)})),function(B){return T.apply(this,arguments)})},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach(function(tt){return tt.destroy()}),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),es?this.device.getQueue().submit(this.commandBuffers.filter(function(tt){return tt})):this.device.defaultQueue.submit(this.commandBuffers.filter(function(tt){return tt}))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:(z=Wr()(br.a.mark(function B(){var tt,It;return br.a.wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return Nt.next=2,Qh();case 2:return this.glslang=Nt.sent,Nt.next=5,(tt=navigator)===null||tt===void 0||(It=tt.gpu)===null||It===void 0?void 0:It.requestAdapter();case 5:return this.adapter=Nt.sent,Nt.next=8,this.adapter.requestDevice();case 8:this.device=Nt.sent;case 9:case"end":return Nt.stop()}},B,this)})),function(){return z.apply(this,arguments)})},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(es?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:ci.TextureUsage.OutputAttachment|ci.TextureUsage.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var tt={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:ci.TextureDimension.E2d,format:ci.TextureFormat.BGRA8Unorm,usage:ci.TextureUsage.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(tt),this.mainColorAttachments=[{attachment:es?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:ci.StoreOp.Store}]}else this.mainColorAttachments=[{attachment:es?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:ci.StoreOp.Store}];var It={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:ci.TextureDimension.E2d,format:es?"depth32float-stencil8":ci.TextureFormat.Depth24PlusStencil8,usage:ci.TextureUsage.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(It),this.mainDepthAttachment={attachment:es?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:ci.StoreOp.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:ci.StoreOp.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=es?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=es?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(tt,It,Nt){var q,Rt,Qt,ee=arguments.length>3&&arguments[3]!==void 0&&arguments[3],xe=(q=tt.get().color)===null||q===void 0?void 0:q.texture;xe&&(Qt=xe.createView(this.currentRenderTargetViewDescriptor));var Pe,He=(Rt=tt.get().depth)===null||Rt===void 0?void 0:Rt.texture;He&&(Pe=He.createView());var Be=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:Qt,loadValue:It!==null?It:ci.LoadOp.Load,storeOp:ci.StoreOp.Store}],depthStencilAttachment:He&&Pe?{attachment:Pe,depthLoadValue:Nt?this.clearDepthValue:ci.LoadOp.Load,depthStoreOp:ci.StoreOp.Store,stencilLoadValue:ee?this.clearStencilValue:ci.LoadOp.Load,stencilStoreOp:ci.StoreOp.Store}:void 0});this.currentRenderPass=Be,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&this.currentRenderPass!==null&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(tt){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),et}())||Gs;function cd(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=Ta()(et);if(z){var tt=Ta()(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return $i()(this,T)}}var ld=(ys=Object(kr.injectable)(),Tf=Object(kr.inject)(er.Systems),ic=Object(kr.named)(er.MaterialSystem),jf=Object(kr.inject)(er.Systems),If=Object(kr.named)(er.GeometrySystem),Pf=Object(kr.inject)(er.ShaderModuleService),ys((Tu=function(et){ea()(T,et);var z=cd(T);function T(){var B;sr()(this,T);for(var tt=arguments.length,It=new Array(tt),Nt=0;Nt<tt;Nt++)It[Nt]=arguments[Nt];return B=z.call.apply(z,[this].concat(It)),_n()(B,"materialSystem",Dc,va()(B)),_n()(B,"geometrySystem",Rf,va()(B)),_n()(B,"shaderModuleService",kf,va()(B)),B}return pr()(T,[{key:"onAttributeChanged",value:function(tt){var It=tt.name,Nt=tt.data,q=this.getMeshComponent();q&&q.material&&(It==="gridColor"?(q.material.setUniform("u_GridColor",Nt),q.material.setUniform("u_GridColor2",Nt)):It==="gridSize"&&(q.material.setUniform("u_GridSize",Nt),q.material.setUniform("u_GridSize2",Nt)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:`attribute vec3 a_Position;

varying vec3 v_Position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

void main() {
  v_Position = a_Position;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);
}`,fs:`// generate grid, borrow from clay.gl viewer
// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl
#extension GL_OES_standard_derivatives : enable

varying vec3 v_Position;
// varying vec3 v_Normal;

uniform float u_GridSize : 5;
uniform float u_GridSize2 : .5;
uniform vec4 u_GridColor : [0, 0, 0, 1];
uniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];
uniform bool u_GridEnabled : true;

// uniform vec3 u_LightDirection;
// uniform vec3 u_LightColor;
// uniform vec3 u_Camera;

void main() {
  // vec3 n = v_Normal;
  // vec3 l = normalize(u_LightDirection);
  // float NdotL = clamp(dot(n, l), 0.001, 1.0);

  gl_FragColor = vec4(1.);

  if (u_GridEnabled) {
    float wx = v_Position.x;
    float wz = v_Position.z;
    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;
    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;

    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;
    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;

    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);
    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);
    // if (v0 > 0.1) {
        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);
    // }
    // else {
        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);
    // }
  }

  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);
  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;

  // gl_FragColor.rgb *= diffuseColor;
}`});var tt=this.shaderModuleService.getModule("grid"),It=tt.vs,Nt=tt.fs,q=tt.uniforms,Rt=this.materialSystem.createShaderMaterial({vertexShader:It,fragmentShader:Nt});this.setMaterial(Rt);var Qt=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(Qt),Rt.setCull({enable:!1,face:Gn.BACK}).setDepth({enable:!0,func:Gn.LESS}),Rt.setUniform(q),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),Qt.setIndex([0,3,2,2,1,0]),Qt.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),T}(Ns),Dc=Ur()(Tu.prototype,"materialSystem",[Tf,ic],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rf=Ur()(Tu.prototype,"geometrySystem",[jf,If],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kf=Ur()(Tu.prototype,"shaderModuleService",[Pf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Df=Tu))||Df),ac=t(94),Ks=t(63);function Js(et,z,T,B,tt){ju(z,B,-tt),ju(z,B,tt),et.push(T),et.push(T)}function ju(et,z,T){et.push([[z[0],z[1]],T])}var Nf,Rc,kc,Lf,su,Us,Bf,Qs,Ff,Gf,Uf;function fd(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=Ta()(et);if(z){var tt=Ta()(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return $i()(this,T)}}var zf,oc,_f,Wf,Vf,Nc,Lc,Iu,Bc,Yf,Fc,hd=(Nf=Object(kr.injectable)(),Rc=Object(kr.inject)(er.Systems),kc=Object(kr.named)(er.MaterialSystem),Lf=Object(kr.inject)(er.Systems),su=Object(kr.named)(er.GeometrySystem),Us=Object(kr.inject)(er.ShaderModuleService),Nf((Qs=function(et){ea()(T,et);var z=fd(T);function T(){var B;sr()(this,T);for(var tt=arguments.length,It=new Array(tt),Nt=0;Nt<tt;Nt++)It[Nt]=arguments[Nt];return B=z.call.apply(z,[this].concat(It)),_n()(B,"materialSystem",Ff,va()(B)),_n()(B,"geometrySystem",Gf,va()(B)),_n()(B,"shaderModuleService",Uf,va()(B)),B.vertexCount=void 0,B}return pr()(T,[{key:"onAttributeChanged",value:function(tt){var It=tt.name,Nt=tt.data,q=this.getMeshComponent();if(q&&q.material)switch(It){case"dashArray":q.material.setUniform("u_dash_array",Nt);break;case"dashOffset":q.material.setUniform("u_dash_offset",Nt);break;case"dashRatio":q.material.setUniform("u_dash_ratio",Nt);break;case"thickness":q.material.setUniform("u_thickness",Nt);break;case"color":var Rt=new Array(this.vertexCount).fill(void 0).map(function(){return Nt}).reduce(function(Qt,ee){return[].concat(Go()(Qt),Go()(ee))},[]);q.geometry.setAttribute("a_color",Float32Array.from(Rt),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]})}}},{key:"onEntityCreated",value:function(){var tt=this;this.shaderModuleService.registerModule("line",{vs:`attribute vec2 a_pos;
attribute vec4 a_color;
attribute float a_line_miter;
attribute vec2 a_line_normal;
attribute float a_counters;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform float u_thickness : 0.02;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
  v_color = a_color;
  v_counters = a_counters;

  vec3 normal = normalize(vec3(a_line_normal, 0.0));

  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);

  v_normal = vec2(normal * sign(a_line_miter));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;
}
`,fs:`uniform float u_dash_array : 0.02;
uniform float u_dash_offset : 0;
uniform float u_dash_ratio : 0;
uniform float u_thickness : 0.02;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
    float blur = 1. - smoothstep(0.98, 1., length(v_normal));

    gl_FragColor = v_color;
    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));
}`});var It=this.shaderModuleService.getModule("line"),Nt=It.vs,q=It.fs,Rt=It.uniforms,Qt=this.materialSystem.createShaderMaterial({vertexShader:Nt,fragmentShader:q}),ee=function(zn,In,Xn){var cr=[0,0],or=[0,0],lr=[0,0],Ar=[0,0],Nr=-1,Dr=!1,Tr=null,Xr=Object(ac.create)(),Ir=Xn||0,vi=[],bi=[],Vi=[],Jr=[0,0];In&&(zn=zn.slice()).push(zn[0]);for(var Li=zn.length,Hi=1;Hi<Li;Hi++){var qi=Ir,xo=zn[Hi-1],oo=zn[Hi],ta=Hi<zn.length-1?zn[Hi+1]:null;if(Jr.push(Hi/Li,Hi/Li),Object(Ks.direction)(cr,oo,xo),Tr||(Tr=[0,0],Object(Ks.normal)(Tr,cr)),Dr||(Dr=!0,Js(bi,vi,xo,Tr,1)),Vi.push([qi+0,qi+1,qi+2]),ta){Object(Ks.direction)(or,ta,oo);var ga=Object(Ks.computeMiter)(lr,Ar,cr,or,1),ko=Object(ac.dot)(lr,Tr)<0?-1:1,Vo=ga>3;if(!isFinite(ga)){Object(Ks.normal)(Tr,cr),Js(bi,vi,oo,Tr,1),Vi.push(Nr===1?[qi,qi+2,qi+3]:[qi+2,qi+1,qi+3]),Ir+=2,Nr=ko;continue}Vo?(ga=3,Jr.push(Hi/Li),ju(vi,Tr,-ko),bi.push(oo),ju(vi,Ar,ga*ko),bi.push(oo),Vi.push(Nr!==-ko?[qi,qi+2,qi+3]:[qi+2,qi+1,qi+3]),Vi.push([qi+2,qi+3,qi+4]),Object(Ks.normal)(Xr,or),Object(ac.copy)(Tr,Xr),ju(vi,Tr,-ko),bi.push(oo),Ir+=3):(Js(bi,vi,oo,Ar,ga),Vi.push(Nr===1?[qi,qi+2,qi+3]:[qi+2,qi+1,qi+3]),ko=-1,Object(ac.copy)(Tr,Ar),Ir+=2),Nr=ko}else Object(Ks.normal)(Tr,cr),Js(bi,vi,oo,Tr,1),Vi.push(Nr===1?[qi,qi+2,qi+3]:[qi+2,qi+1,qi+3]),Ir+=2}return{normals:vi,attrIndex:Vi,attrPos:bi,attrCounters:Jr}}(this.config.points,!1),xe=ee.normals,Pe=ee.attrIndex,He=ee.attrPos,Be=ee.attrCounters,Ke=He.length;this.vertexCount=Ke;var Qe=this.geometrySystem.createBufferGeometry({vertexCount:Ke});this.setMaterial(Qt),this.setGeometry(Qe),Qt.setCull({enable:!1,face:Gn.BACK}).setUniform(Rt),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var ze=[],en=[];xe.forEach(function(zn){var In=zn[0],Xn=zn[1];ze.push([In[0],In[1]]),en.push(Xn)}),Qe.setIndex(Pe.reduce(function(zn,In){return[].concat(Go()(zn),Go()(In))},[])),Qe.setAttribute("a_pos",Float32Array.from(He.reduce(function(zn,In){return[].concat(Go()(zn),Go()(In))},[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var wn=new Array(Ke).fill(void 0).map(function(){return Go()(tt.config.color)}).reduce(function(zn,In){return[].concat(Go()(zn),Go()(In))},[]);Qe.setAttribute("a_color",Float32Array.from(wn),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),Qe.setAttribute("a_line_miter",Float32Array.from(en),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),Qe.setAttribute("a_line_normal",Float32Array.from(ze.reduce(function(zn,In){return[].concat(Go()(zn),Go()(In))},[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),Qe.setAttribute("a_counters",Float32Array.from(Be),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),T}(Ns),Ff=Ur()(Qs.prototype,"materialSystem",[Rc,kc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gf=Ur()(Qs.prototype,"geometrySystem",[Lf,su],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Uf=Ur()(Qs.prototype,"shaderModuleService",[Us],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bf=Qs))||Bf);function Xf(et,z){var T=Object.keys(et);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(et);z&&(B=B.filter(function(tt){return Object.getOwnPropertyDescriptor(et,tt).enumerable})),T.push.apply(T,B)}return T}function dd(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=Ta()(et);if(z){var tt=Ta()(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return $i()(this,T)}}var vd=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"];console.log();var Hf,Kf,Gc,Jf,Pu,Du,sc,Qf,Zf,pd=(zf=Object(kr.injectable)(),oc=Object(kr.inject)(er.Systems),_f=Object(kr.named)(er.MaterialSystem),Wf=Object(kr.inject)(er.Systems),Vf=Object(kr.named)(er.GeometrySystem),Nc=Object(kr.inject)(er.ShaderModuleService),zf((Iu=function(et){ea()(T,et);var z=dd(T);function T(){var B;sr()(this,T);for(var tt=arguments.length,It=new Array(tt),Nt=0;Nt<tt;Nt++)It[Nt]=arguments[Nt];return B=z.call.apply(z,[this].concat(It)),_n()(B,"materialSystem",Bc,va()(B)),_n()(B,"geometrySystem",Yf,va()(B)),_n()(B,"shaderModuleService",Fc,va()(B)),B}return pr()(T,[{key:"onAttributeChanged",value:function(tt){var It=tt.name,Nt=tt.data,q=this.getMeshComponent();q&&q.material&&(It==="strokeWidth"?q.material.setUniform("u_stroke_width",Nt):It==="strokeColor"?q.material.setUniform("u_stroke_color",Nt):It==="strokeOpacity"?q.material.setUniform("u_stroke_opacity",Nt):It==="opacity"?q.material.setUniform("u_opacity",Nt):It==="blur"&&q.material.setUniform("u_blur",Nt))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:`attribute vec2 position;
attribute vec4 color;
attribute float shape;
attribute vec2 offset;
attribute float size;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

uniform float u_stroke_width : 0.01;
uniform float u_device_pixel_ratio;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "picking"

void main() {
  v_color = color;
  v_radius = size;

  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);

  // construct point coords
  v_data = vec4(position, antialiasblur, shape);

  gl_Position = projectionMatrix * modelViewMatrix
    * vec4(position * size + offset, 0.0, 1.0);

  setPickingColor(a_PickingColor);
}`,fs:`uniform float u_blur : 0.05;
uniform float u_opacity : 0.7;
uniform float u_stroke_width : 0.01;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "sdf2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  // if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  // } else if (shape == 1) {
  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  // } else if (shape == 2) {
  //   outer_df = sdBox(v_data.xy, vec2(1.));
  //   inner_df = sdBox(v_data.xy, vec2(r));
  // } else if (shape == 3) {
  //   outer_df = sdPentagon(v_data.xy, 0.8);
  //   inner_df = sdPentagon(v_data.xy, r * 0.8);
  // } else if (shape == 4) {
  //   outer_df = sdHexagon(v_data.xy, 0.8);
  //   inner_df = sdHexagon(v_data.xy, r * 0.8);
  // } else if (shape == 5) {
  //   outer_df = sdOctogon(v_data.xy, 1.0);
  //   inner_df = sdOctogon(v_data.xy, r);
  // } else if (shape == 6) {
  //   outer_df = sdHexagram(v_data.xy, 0.52);
  //   inner_df = sdHexagram(v_data.xy, r * 0.52);
  // } else if (shape == 7) {
  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));
  //   inner_df = sdRhombus(v_data.xy, vec2(r));
  // } else if (shape == 8) {
  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);
  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  // }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;

  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;

  gl_FragColor = filterColor(gl_FragColor);
}`});var tt=this.shaderModuleService.getModule("grid"),It=tt.vs,Nt=tt.fs,q=tt.uniforms,Rt=this.materialSystem.createShaderMaterial({vertexShader:It,fragmentShader:Nt,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:Gn.SRC_ALPHA,dstRGB:Gn.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});Rt.setUniform(function(xe){for(var Pe=1;Pe<arguments.length;Pe++){var He=arguments[Pe]!=null?arguments[Pe]:{};Pe%2?Xf(Object(He),!0).forEach(function(Be){gr()(xe,Be,He[Be])}):Object.getOwnPropertyDescriptors?Object.defineProperties(xe,Object.getOwnPropertyDescriptors(He)):Xf(Object(He)).forEach(function(Be){Object.defineProperty(xe,Be,Object.getOwnPropertyDescriptor(He,Be))})}return xe}({u_device_pixel_ratio:window.devicePixelRatio},q));var Qt=this.buildAttributes(),ee=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:Qt.instancedOffsets.length/2,vertexCount:6});ee.setIndex([0,2,1,0,3,2]),ee.setAttribute("position",Float32Array.from(Qt.positions),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),ee.setAttribute("offset",Float32Array.from(Qt.instancedOffsets),{arrayStride:8,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),ee.setAttribute("color",Float32Array.from(Qt.instancedColors),{arrayStride:16,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),ee.setAttribute("size",Float32Array.from(Qt.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),ee.setAttribute("shape",Float32Array.from(Qt.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),ee.setAttribute("a_PickingColor",Float32Array.from(Qt.instancedPickingColors),{arrayStride:12,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(Rt),this.setGeometry(ee)}},{key:"buildAttribute",value:function(tt,It,Nt){var q,Rt,Qt,ee,xe;(q=It.instancedPickingColors).push.apply(q,Go()([(xe=tt.id||Nt)+1&255,xe+1>>8&255,xe+1>>8>>8&255])),It.instancedShapes.push(vd.indexOf(tt.shape||"circle")),(Rt=It.instancedColors).push.apply(Rt,Go()(tt.color||[1,0,0,1])),(Qt=It.instancedOffsets).push.apply(Qt,Go()(tt.position||[0,0])),(ee=It.instancedSizes).push.apply(ee,Go()(tt.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var tt=this,It={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach(function(Nt,q){tt.buildAttribute(Nt,It,q)}):this.buildAttribute(this.config,It,0),It}}]),T}(Ns),Bc=Ur()(Iu.prototype,"materialSystem",[oc,_f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yf=Ur()(Iu.prototype,"geometrySystem",[Wf,Vf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fc=Ur()(Iu.prototype,"shaderModuleService",[Nc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lc=Iu))||Lc);function Uc(et,z){var T;if(typeof Symbol=="undefined"||et[Symbol.iterator]==null){if(Array.isArray(et)||(T=function(Rt,Qt){if(!!Rt){if(typeof Rt=="string")return $f(Rt,Qt);var ee=Object.prototype.toString.call(Rt).slice(8,-1);if(ee==="Object"&&Rt.constructor&&(ee=Rt.constructor.name),ee==="Map"||ee==="Set")return Array.from(Rt);if(ee==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ee))return $f(Rt,Qt)}}(et))||z&&et&&typeof et.length=="number"){T&&(et=T);var B=0,tt=function(){};return{s:tt,n:function(){return B>=et.length?{done:!0}:{done:!1,value:et[B++]}},e:function(Qt){throw Qt},f:tt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var It,Nt=!0,q=!1;return{s:function(){T=et[Symbol.iterator]()},n:function(){var Qt=T.next();return Nt=Qt.done,Qt},e:function(Qt){q=!0,It=Qt},f:function(){try{Nt||T.return==null||T.return()}finally{if(q)throw It}}}}function $f(et,z){(z==null||z>et.length)&&(z=et.length);for(var T=0,B=new Array(z);T<z;T++)B[T]=et[T];return B}var qf,th,eh,nh,rh,zc,ih,ah,oh,_c,uc,sh,Wc=(Hf=Object(kr.injectable)(),Kf=Object(kr.inject)(er.RenderEngine),Gc=Object(kr.inject)(er.ShaderModuleService),Jf=Object(kr.inject)(er.ConfigService),Hf((Du=function(){function et(){sr()(this,et),_n()(this,"engine",sc,this),_n()(this,"shaderModule",Qf,this),_n()(this,"configService",Zf,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0,this.container=void 0}var z,T;return pr()(et,[{key:"init",value:(T=Wr()(br.a.mark(function B(){var tt,It,Nt,q,Rt;return br.a.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:if(this.shaderModule.registerBuiltinModules(),tt=this.container.getAll(er.Systems),!(It=this.configService.get()).canvas){Qt.next=25;break}return Qt.next=6,this.engine.init({canvas:It.canvas,swapChainFormat:ci.TextureFormat.BGRA8Unorm,antialiasing:!1});case 6:Nt=Uc(tt),Qt.prev=7,Nt.s();case 9:if((q=Nt.n()).done){Qt.next=16;break}if(!(Rt=q.value).initialize){Qt.next=14;break}return Qt.next=14,Rt.initialize();case 14:Qt.next=9;break;case 16:Qt.next=21;break;case 18:Qt.prev=18,Qt.t0=Qt.catch(7),Nt.e(Qt.t0);case 21:return Qt.prev=21,Nt.f(),Qt.finish(21);case 24:this.inited=!0;case 25:case"end":return Qt.stop()}},B,this,[[7,18,21,24]])})),function(){return T.apply(this,arguments)})},{key:"render",value:(z=Wr()(br.a.mark(function B(){var tt,It,Nt,q,Rt,Qt,ee,xe=arguments;return br.a.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(this.inited&&!this.rendering){Pe.next=2;break}return Pe.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach(function(He){He()}),this.rendering=!0,this.engine.beginFrame(),tt=this.container.getAll(er.Systems),It=xe.length,Nt=new Array(It),q=0;q<It;q++)Nt[q]=xe[q];Rt=Uc(tt),Pe.prev=8,Rt.s();case 10:if((Qt=Rt.n()).done){Pe.next=17;break}if(!(ee=Qt.value).execute){Pe.next=15;break}return Pe.next=15,ee.execute(Nt);case 15:Pe.next=10;break;case 17:Pe.next=22;break;case 19:Pe.prev=19,Pe.t0=Pe.catch(8),Rt.e(Pe.t0);case 22:return Pe.prev=22,Rt.f(),Pe.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return Pe.stop()}},B,this,[[8,19,22,25]])})),function(){return z.apply(this,arguments)})},{key:"clear",value:function(tt){var It=this;return this.inited?this.engine.clear(tt):this.pendings.unshift(function(){It.engine.clear(tt),It.pendings.shift()}),this}},{key:"setSize",value:function(tt){var It=tt.width,Nt=tt.height,q=this.engine.getCanvas();return this.size={width:It,height:Nt},q.width=It,q.height=Nt,this}},{key:"getSize",value:function(){return this.size}}]),et}(),sc=Ur()(Du.prototype,"engine",[Kf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qf=Ur()(Du.prototype,"shaderModule",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zf=Ur()(Du.prototype,"configService",[Jf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pu=Du))||Pu),uh=Object(kr.injectable)()(qf=function(){function et(){sr()(this,et),this.entities=[]}return pr()(et,[{key:"getEntities",value:function(){return this.entities}},{key:"addEntity",value:function(T){return this.entities.indexOf(T)===-1&&this.entities.push(T),this}},{key:"removeEntity",value:function(T){var B=this.entities.indexOf(T);return this.entities.splice(B,1),this}}]),et}())||qf,ch=(th=Object(kr.injectable)(),eh=Object(kr.inject)(er.Systems),nh=Object(kr.named)(er.RendererSystem),th((zc=function(){function et(){sr()(this,et),_n()(this,"rendererSystem",ih,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return pr()(et,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(T){return this.camera=T,this}},{key:"setScene",value:function(T){return this.scene=T,this}},{key:"setViewport",value:function(T){return this.viewport=T,this}},{key:"setClearColor",value:function(T){return this.clearColor=T,this}},{key:"pick",value:function(T){return this.rendererSystem.pick(T,this)}}]),et}(),ih=Ur()(zc.prototype,"rendererSystem",[eh,nh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rh=zc))||rh);function lh(et,z){var T=Object.keys(et);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(et);z&&(B=B.filter(function(tt){return Object.getOwnPropertyDescriptor(et,tt).enumerable})),T.push.apply(T,B)}return T}function gd(et){for(var z=1;z<arguments.length;z++){var T=arguments[z]!=null?arguments[z]:{};z%2?lh(Object(T),!0).forEach(function(B){gr()(et,B,T[B])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(T)):lh(Object(T)).forEach(function(B){Object.defineProperty(et,B,Object.getOwnPropertyDescriptor(T,B))})}return et}var ls=(ah=Object(kr.injectable)(),oh=Object(kr.inject)(er.ConfigService),ah((uc=function(){function et(){sr()(this,et),_n()(this,"configService",sh,this),this.container=void 0}var z;return pr()(et,[{key:"getEngine",value:(z=Wr()(br.a.mark(function T(){var B,tt,It,Nt;return br.a.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return B=this.container.get(er.RenderEngine),tt=this.configService.get(),It=tt.canvas,Nt=tt.engineOptions,q.next=4,B.init(gd({canvas:It||jc(),swapChainFormat:ci.TextureFormat.BGRA8Unorm,antialiasing:!1},Nt));case 4:return q.abrupt("return",B);case 5:case"end":return q.stop()}},T,this)})),function(){return z.apply(this,arguments)})},{key:"getTransformComponent",value:function(B){return this.container.get(er.TransformComponentManager).getComponentByEntity(B)}},{key:"getMeshComponent",value:function(B){return this.container.get(er.MeshComponentManager).getComponentByEntity(B)}},{key:"setConfig",value:function(B){this.configService.set(B)}},{key:"setContainer",value:function(B){this.container=B}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return zi()}},{key:"createScene",value:function(){return this.container.get(uh)}},{key:"createCamera",value:function(){return this.container.get(Kl)}},{key:"createView",value:function(){return this.container.get(ch)}},{key:"createRenderable",value:function(B,tt,It){var Nt=tt?this.container.getNamed(er.Renderable,tt):this.container.get(Ns);return Nt.setConfig(It||{}),Nt.setEntity(B),Nt}},{key:"createBoxGeometry",value:function(B){return this.container.getNamed(er.Systems,er.GeometrySystem).createBox(B)}},{key:"createBufferGeometry",value:function(B){return this.container.getNamed(er.Systems,er.GeometrySystem).createBufferGeometry(B)}},{key:"createInstancedBufferGeometry",value:function(B){return this.container.getNamed(er.Systems,er.GeometrySystem).createInstancedBufferGeometry(B)}},{key:"createBasicMaterial",value:function(){return this.container.getNamed(er.Systems,er.MaterialSystem).createBasicMaterial()}},{key:"createShaderMaterial",value:function(B){return this.container.getNamed(er.Systems,er.MaterialSystem).createShaderMaterial(B)}},{key:"createKernel",value:function(B){var tt=this.container.get(lf);return typeof B=="string"?tt.setBundle(JSON.parse(B)):tt.setBundle(B),tt.init(),tt}},{key:"createRenderer",value:function(){var B=this.container.get(Wc);return B.container=this.container,B.init(),B}},{key:"destroy",value:function(){this.container.getAll(er.Systems).forEach(function(B){B.tearDown&&B.tearDown()}),this.container.get(er.RenderEngine).destroy(),this.container.get(er.InteractorService).destroy()}}],[{key:"create",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},tt=Nh(),It=navigator.gpu?ud:Hh;tt.isBound(er.RenderEngine)||tt.bind(er.RenderEngine).to(It).inSingletonScope(),tt.bind(Wc).toSelf(),tt.bind(lf).toSelf(),tt.bind(Ns).toSelf(),tt.bind(ch).toSelf(),tt.bind(Kl).toSelf(),tt.bind(uh).toSelf(),tt.bind(et).toSelf(),tt.bind(er.Renderable).to(pd).whenTargetNamed(Ns.POINT),tt.bind(er.Renderable).to(hd).whenTargetNamed(Ns.LINE),tt.bind(er.Renderable).to(ld).whenTargetNamed(Ns.GRID);var Nt=tt.get(et);return Nt.setContainer(tt),Nt.setConfig(B),Nt}}]),et}(),sh=Ur()(uc.prototype,"configService",[oh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_c=uc))||_c),Zs=function(z,T){return z?S(z)?function(){return z}:z:function(){return T||1}},h=function(z,T){var B=[],tt=[],It={},Nt=0;for(Nt=0;Nt<z.length;Nt++){var q=z[Nt];It[q.id]=Nt,B.push(q.x),B.push(q.y),B.push(0),B.push(0),tt.push([])}for(Nt=0;Nt<T.length;Nt++){var Rt=T[Nt];tt[It[Rt.source]].push(It[Rt.target]),tt[It[Rt.target]].push(It[Rt.source])}var Qt=0;for(Nt=0;Nt<z.length;Nt++){var ee=B.length,xe=tt[Nt],Pe=xe.length;B[4*Nt+2]=ee,B[4*Nt+3]=xe.length,Qt=Math.max(Qt,xe.length);for(var He=0;He<Pe;++He){var Be=xe[He];B.push(+Be)}}for(;B.length%4!=0;)B.push(0);return{maxEdgePerVetex:Qt,array:new Float32Array(B)}},o=function(z,T,B,tt){var It=[],Nt=[],q={},Rt=0;for(Rt=0;Rt<z.length;Rt++){var Qt=z[Rt];q[Qt.id]=Rt,It.push(Qt.x),It.push(Qt.y),It.push(0),It.push(0),Nt.push([])}for(Rt=0;Rt<T.length;Rt++){var ee=T[Rt];Nt[q[ee.source]].push(q[ee.target]),Nt[q[ee.source]].push(B(ee)),Nt[q[ee.source]].push(tt(ee)),Nt[q[ee.source]].push(0),Nt[q[ee.target]].push(q[ee.source]),Nt[q[ee.target]].push(B(ee)),Nt[q[ee.target]].push(tt(ee)),Nt[q[ee.target]].push(0)}var xe=0;for(Rt=0;Rt<z.length;Rt++){var Pe=It.length,He=Nt[Rt],Be=He.length;It[4*Rt+2]=Pe+1048576*Be/4,It[4*Rt+3]=0,xe=Math.max(xe,Be/4);for(var Ke=0;Ke<Be;++Ke){var Qe=He[Ke];It.push(+Qe)}}for(;It.length%4!=0;)It.push(0);return{maxEdgePerVetex:xe,array:new Float32Array(It)}},e=function(z,T){var B=[],tt=z.length,It={};return T.forEach(function(Nt){z.forEach(function(q,Rt){if(It[Nt[q]]===void 0&&(It[Nt[q]]=Object.keys(It).length),B.push(It[Nt[q]]),Rt===tt-1)for(;B.length%4!=0;)B.push(0)})}),{array:new Float32Array(B),count:Object.keys(It).length}},a=function(z){for(var T=[],B=z.length,tt=z[0].length,It=function(Rt){z.forEach(function(Qt,ee){if(T.push(Qt[Rt]),ee===B-1)for(;T.length%4!=0;)T.push(0)})},Nt=0;Nt<tt;Nt++)It(Nt);return new Float32Array(T)};function M(et){return(M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(et)}function N(et,z){for(var T=0;T<z.length;T++){var B=z[T];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(et,B.key,B)}}function at(et,z){return(at=Object.setPrototypeOf||function(T,B){return T.__proto__=B,T})(et,z)}function Ct(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=ne(et);if(z){var tt=ne(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return Ft(this,T)}}function Ft(et,z){return!z||M(z)!=="object"&&typeof z!="function"?function(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}(et):z}function ne(et){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(et)}var ge=function(z,T,B,tt){return new(B||(B=Promise))(function(It,Nt){function q(ee){try{Qt(tt.next(ee))}catch(xe){Nt(xe)}}function Rt(ee){try{Qt(tt.throw(ee))}catch(xe){Nt(xe)}}function Qt(ee){var xe;ee.done?It(ee.value):(xe=ee.value,xe instanceof B?xe:new B(function(Pe){Pe(xe)})).then(q,Rt)}Qt((tt=tt.apply(z,T||[])).next())})},be=function(et){(function(Nt,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(q&&q.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),q&&at(Nt,q)})(It,et);var z,T,B,tt=Ct(It);function It(Nt){var q;return function(Rt,Qt){if(!(Rt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(q=tt.call(this)).maxIteration=1e3,q.gravity=10,q.speed=1,q.clustering=!1,q.clusterField="cluster",q.clusterGravity=10,q.workerEnabled=!1,q.nodes=[],q.edges=[],q.width=300,q.height=300,q.nodeMap={},q.nodeIdxMap={},q.updateCfg(Nt),q}return z=It,(T=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return ge(this,void 0,void 0,H.mark(function q(){var Rt,Qt,ee,xe,Pe,He=this;return H.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:if((Qt=(Rt=this).nodes)&&Qt.length!==0){Be.next=5;break}return Rt.onLayoutEnd&&Rt.onLayoutEnd(),Be.abrupt("return");case 5:if(Rt.width||typeof window=="undefined"||(Rt.width=window.innerWidth),Rt.height||typeof window=="undefined"||(Rt.height=window.innerHeight),Rt.center||(Rt.center=[Rt.width/2,Rt.height/2]),ee=Rt.center,Qt.length!==1){Be.next=14;break}return Qt[0].x=ee[0],Qt[0].y=ee[1],Rt.onLayoutEnd&&Rt.onLayoutEnd(),Be.abrupt("return");case 14:return xe={},Pe={},Qt.forEach(function(Ke,Qe){S(Ke.x)||(Ke.x=Math.random()*He.width),S(Ke.y)||(Ke.y=Math.random()*He.height),xe[Ke.id]=Ke,Pe[Ke.id]=Qe}),Rt.nodeMap=xe,Rt.nodeIdxMap=Pe,Be.next=21,Rt.run();case 21:case"end":return Be.stop()}},q,this)}))}},{key:"executeWithWorker",value:function(q,Rt){return ge(this,void 0,void 0,H.mark(function Qt(){var ee,xe,Pe,He,Be,Ke=this;return H.wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:if(xe=(ee=this).nodes,Pe=ee.center,xe&&xe.length!==0){Qe.next=5;break}return Qe.abrupt("return");case 5:if(xe.length!==1){Qe.next=9;break}return xe[0].x=Pe[0],xe[0].y=Pe[1],Qe.abrupt("return");case 9:return He={},Be={},xe.forEach(function(ze,en){S(ze.x)||(ze.x=Math.random()*Ke.width),S(ze.y)||(ze.y=Math.random()*Ke.height),He[ze.id]=ze,Be[ze.id]=en}),ee.nodeMap=He,ee.nodeIdxMap=Be,Qe.next=16,ee.run(q,Rt);case 16:case"end":return Qe.stop()}},Qt,this)}))}},{key:"run",value:function(q,Rt){return ge(this,void 0,void 0,H.mark(function Qt(){var ee,xe,Pe,He,Be,Ke,Qe,ze,en,wn,zn,In,Xn,cr,or,lr,Ar,Nr,Dr,Tr,Xr,Ir,vi,bi,Vi,Jr,Li=this;return H.wrap(function(Hi){for(;;)switch(Hi.prev=Hi.next){case 0:for(xe=(ee=this).nodes,Pe=ee.edges,He=ee.maxIteration,Be=ee.center,Ke=ee.height*ee.width,Qe=Math.sqrt(Ke)/10,ze=Ke/(xe.length+1),en=Math.sqrt(ze),wn=ee.speed,zn=ee.clustering,In=e([ee.clusterField],xe),Xn=In.array,cr=In.count,or=xe.length,lr=h(xe,Pe),Ar=lr.maxEdgePerVetex,Nr=lr.array,Dr=ee.workerEnabled,Tr=Dr?ls.create({canvas:q,engineOptions:{supportCompute:!0}}):ls.create({engineOptions:{supportCompute:!0}}),Xr=ee.onLayoutEnd,Ir=[],vi=0;vi<cr;vi++)Ir.push(0,0,0,0);return bi=Tr.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([or,1,1]).setBinding({u_Data:Nr,u_K:en,u_K2:ze,u_Gravity:ee.gravity,u_ClusterGravity:ee.clusterGravity||ee.gravity||1,u_Speed:wn,u_MaxDisplace:Qe,u_Clustering:zn?1:0,u_Center:Be,u_AttributeArray:Xn,u_ClusterCenters:Ir,MAX_EDGE_PER_VERTEX:Ar,VERTEX_COUNT:or}),zn&&(Vi=Tr.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([cr,1,1]).setBinding({u_Data:Nr,u_NodeAttributes:Xn,u_ClusterCenters:Ir,VERTEX_COUNT:or,CLUSTER_COUNT:cr})),Jr=function(){return ge(Li,void 0,void 0,H.mark(function xo(){var oo,ta;return H.wrap(function(ga){for(;;)switch(ga.prev=ga.next){case 0:oo=0;case 1:if(!(oo<He)){ga.next=13;break}return ga.next=4,bi.execute();case 4:if(!zn){ga.next=9;break}return Vi.setBinding({u_Data:bi}),ga.next=8,Vi.execute();case 8:bi.setBinding({u_ClusterCenters:Vi});case 9:bi.setBinding({u_MaxDisplace:Qe*=.99});case 10:oo++,ga.next=1;break;case 13:return ga.next=15,bi.getOutput();case 15:ta=ga.sent,q?Rt.postMessage({type:si,vertexEdgeData:ta}):xe.forEach(function(ko,Vo){var Cs=ta[4*Vo],fs=ta[4*Vo+1];ko.x=Cs,ko.y=fs}),Xr&&Xr();case 18:case"end":return ga.stop()}},xo)}))},Hi.next=24,Jr();case 24:case"end":return Hi.stop()}},Qt,this)}))}},{key:"getType",value:function(){return"fruchterman-gpu"}}])&&N(z.prototype,T),B&&N(z,B),It}(x);function Ae(et){return(Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(et)}function Xe(et,z){for(var T=0;T<z.length;T++){var B=z[T];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(et,B.key,B)}}function fn(et,z){return(fn=Object.setPrototypeOf||function(T,B){return T.__proto__=B,T})(et,z)}function En(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=ar(et);if(z){var tt=ar(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return nr(this,T)}}function nr(et,z){return!z||Ae(z)!=="object"&&typeof z!="function"?function(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}(et):z}function ar(et){return(ar=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(et)}var Er=function(z,T,B,tt){return new(B||(B=Promise))(function(It,Nt){function q(ee){try{Qt(tt.next(ee))}catch(xe){Nt(xe)}}function Rt(ee){try{Qt(tt.throw(ee))}catch(xe){Nt(xe)}}function Qt(ee){var xe;ee.done?It(ee.value):(xe=ee.value,xe instanceof B?xe:new B(function(Pe){Pe(xe)})).then(q,Rt)}Qt((tt=tt.apply(z,T||[])).next())})},Mr=function(et){(function(Nt,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(q&&q.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),q&&fn(Nt,q)})(It,et);var z,T,B,tt=En(It);function It(Nt){var q;return function(Rt,Qt){if(!(Rt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(q=tt.call(this)).maxIteration=1e3,q.edgeStrength=200,q.nodeStrength=1e3,q.coulombDisScale=.005,q.damping=.9,q.maxSpeed=1e3,q.minMovement=1,q.interval=.02,q.factor=1,q.linkDistance=1,q.gravity=10,q.workerEnabled=!1,q.nodes=[],q.edges=[],q.width=300,q.height=300,q.nodeMap={},q.nodeIdxMap={},q.updateCfg(Nt),q}return z=It,(T=[{key:"getDefaultCfg",value:function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return Er(this,void 0,void 0,H.mark(function q(){var Rt,Qt,ee,xe,Pe;return H.wrap(function(He){for(;;)switch(He.prev=He.next){case 0:if((Qt=(Rt=this).nodes)&&Qt.length!==0){He.next=5;break}return Rt.onLayoutEnd&&Rt.onLayoutEnd(),He.abrupt("return");case 5:if(Rt.width||typeof window=="undefined"||(Rt.width=window.innerWidth),Rt.height||typeof window=="undefined"||(Rt.height=window.innerHeight),Rt.center||(Rt.center=[Rt.width/2,Rt.height/2]),ee=Rt.center,Qt.length!==1){He.next=14;break}return Qt[0].x=ee[0],Qt[0].y=ee[1],Rt.onLayoutEnd&&Rt.onLayoutEnd(),He.abrupt("return");case 14:return xe={},Pe={},Qt.forEach(function(Be,Ke){S(Be.x)||(Be.x=Math.random()*Rt.width),S(Be.y)||(Be.y=Math.random()*Rt.height),xe[Be.id]=Be,Pe[Be.id]=Ke}),Rt.nodeMap=xe,Rt.nodeIdxMap=Pe,Rt.nodeStrength=Zs(Rt.nodeStrength,1),Rt.edgeStrength=Zs(Rt.edgeStrength,1),He.next=23,Rt.run();case 23:case"end":return He.stop()}},q,this)}))}},{key:"executeWithWorker",value:function(q,Rt){var Qt=this,ee=Qt.nodes,xe=Qt.center;if(ee&&ee.length!==0){if(ee.length===1)return ee[0].x=xe[0],void(ee[0].y=xe[1]);var Pe={},He={};ee.forEach(function(Be,Ke){S(Be.x)||(Be.x=Math.random()*Qt.width),S(Be.y)||(Be.y=Math.random()*Qt.height),Pe[Be.id]=Be,He[Be.id]=Ke}),Qt.nodeMap=Pe,Qt.nodeIdxMap=He,Qt.nodeStrength=Zs(Qt.nodeStrength,1),Qt.edgeStrength=Zs(Qt.edgeStrength,1),Qt.run(q,Rt)}}},{key:"run",value:function(q,Rt){return Er(this,void 0,void 0,H.mark(function Qt(){var ee,xe,Pe,He,Be,Ke,Qe,ze,en,wn,zn,In,Xn,cr,or,lr,Ar,Nr,Dr,Tr,Xr,Ir,vi,bi,Vi,Jr=this;return H.wrap(function(Li){for(;;)switch(Li.prev=Li.next){case 0:for(xe=(ee=this).nodes,Pe=ee.edges,He=ee.maxIteration,ee.width||typeof window=="undefined"||(ee.width=window.innerWidth),ee.height||typeof window=="undefined"||(ee.height=window.innerHeight),Be=xe.length,ee.linkDistance=Zs(ee.linkDistance),ee.edgeStrength=Zs(ee.edgeStrength),Ke=o(xe,Pe,ee.linkDistance,ee.edgeStrength),Qe=Ke.maxEdgePerVetex,ze=Ke.array,ee.degrees=m(xe.length,ee.nodeIdxMap,Pe),en=[],wn=[],zn=[],In=[],Xn=[],ee.getMass||(ee.getMass=function(Hi){return ee.degrees[ee.nodeIdxMap[Hi.id]]||1}),cr=ee.gravity,or=ee.center,xe.forEach(function(Hi,qi){en.push(ee.getMass(Hi)),wn.push(ee.nodeStrength(Hi)),ee.degrees[qi]||(ee.degrees[qi]=0);var xo=[or[0],or[1],cr];if(ee.getCenter){var oo=ee.getCenter(Hi,ee.degrees[qi]);oo&&S(oo[0])&&S(oo[1])&&S(oo[2])&&(xo=oo)}zn.push(xo[0]),In.push(xo[1]),Xn.push(xo[2])}),lr=a([en,ee.degrees,wn]),Ar=a([zn,In,Xn]),Nr=ee.workerEnabled,Dr=Nr?ls.create({canvas:q,engineOptions:{supportCompute:!0}}):ls.create({engineOptions:{supportCompute:!0}}),Tr=ee.onLayoutEnd,Xr=[],ze.forEach(function(Hi){Xr.push(Hi)}),Ir=0;Ir<4;Ir++)Xr.push(0);return vi=Dr.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = dist * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (1000.0 * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.w;\\nvar ay : f32 = vy * attributes2.w;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = dist * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (1000.0 * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.w;\\nfloat ay = vy * attributes2.w;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = dist * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (1000.0 * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.w;\\nfloat ay = vy * attributes2.w;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([Be,1,1]).setBinding({u_Data:ze,u_damping:ee.damping,u_maxSpeed:ee.maxSpeed,u_minMovement:ee.minMovement,u_coulombDisScale:ee.coulombDisScale,u_factor:ee.factor,u_NodeAttributeArray1:lr,u_NodeAttributeArray2:Ar,MAX_EDGE_PER_VERTEX:Qe,VERTEX_COUNT:Be,u_AveMovement:Xr,u_interval:ee.interval}),bi=Dr.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([1,1,1]).setBinding({u_Data:ze,VERTEX_COUNT:Be,u_AveMovement:[0,0,0,0]}),Vi=function(){return Er(Jr,void 0,void 0,H.mark(function qi(){var xo,oo,ta;return H.wrap(function(ga){for(;;)switch(ga.prev=ga.next){case 0:xo=0;case 1:if(!(xo<He)){ga.next=12;break}return ga.next=4,vi.execute();case 4:return bi.setBinding({u_Data:vi}),ga.next=7,bi.execute();case 7:oo=Math.max(.02,ee.interval-.002*xo),vi.setBinding({u_interval:oo,u_AveMovement:bi});case 9:xo++,ga.next=1;break;case 12:return ga.next=14,vi.getOutput();case 14:ta=ga.sent,q?Rt.postMessage({type:si,vertexEdgeData:ta}):xe.forEach(function(ko,Vo){var Cs=ta[4*Vo],fs=ta[4*Vo+1];ko.x=Cs,ko.y=fs}),Tr&&Tr();case 17:case"end":return ga.stop()}},qi)}))},Li.next=33,Vi();case 33:case"end":return Li.stop()}},Qt,this)}))}},{key:"getType",value:function(){return"gForce-gpu"}}])&&Xe(z.prototype,T),B&&Xe(z,B),It}(x);function qr(et){return(qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(et)}function oi(et,z){for(var T=0;T<z.length;T++){var B=z[T];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(et,B.key,B)}}function ai(et,z){return(ai=Object.setPrototypeOf||function(T,B){return T.__proto__=B,T})(et,z)}function aa(et){var z=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(T){return!1}}();return function(){var T,B=_i(et);if(z){var tt=_i(this).constructor;T=Reflect.construct(B,arguments,tt)}else T=B.apply(this,arguments);return Ji(this,T)}}function Ji(et,z){return!z||qr(z)!=="object"&&typeof z!="function"?function(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}(et):z}function _i(et){return(_i=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(et)}var Ca=function(et){(function(Nt,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");Nt.prototype=Object.create(q&&q.prototype,{constructor:{value:Nt,writable:!0,configurable:!0}}),q&&ai(Nt,q)})(It,et);var z,T,B,tt=aa(It);function It(Nt){var q;return function(Rt,Qt){if(!(Rt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,It),(q=tt.call(this)).center=[0,0],q.maxIteration=100,q.gravity=10,q.comboGravity=10,q.linkDistance=10,q.alpha=1,q.alphaMin=.001,q.alphaDecay=1-Math.pow(q.alphaMin,1/300),q.alphaTarget=0,q.velocityDecay=.6,q.edgeStrength=.6,q.nodeStrength=30,q.preventOverlap=!1,q.preventNodeOverlap=!1,q.preventComboOverlap=!1,q.collideStrength=void 0,q.nodeCollideStrength=.5,q.comboCollideStrength=.5,q.comboSpacing=20,q.comboPadding=10,q.optimizeRangeFactor=1,q.onTick=function(){},q.onLayoutEnd=function(){},q.depthAttractiveForceScale=1,q.depthRepulsiveForceScale=2,q.nodes=[],q.edges=[],q.combos=[],q.comboTrees=[],q.width=300,q.height=300,q.bias=[],q.nodeMap={},q.oriComboMap={},q.indexMap={},q.comboMap={},q.previousLayouted=!1,q.updateCfg(Nt),q}return z=It,(T=[{key:"getDefaultCfg",value:function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}},{key:"execute",value:function(){var q=this.nodes,Rt=this.center;if(this.comboTree={id:"comboTreeRoot",depth:-1,children:this.comboTrees},q&&q.length!==0){if(q.length===1)return q[0].x=Rt[0],q[0].y=Rt[1],void(this.onLayoutEnd&&this.onLayoutEnd());this.initVals(),this.run(),this.onLayoutEnd&&this.onLayoutEnd()}else this.onLayoutEnd&&this.onLayoutEnd()}},{key:"run",value:function(){var q=this,Rt=q.nodes,Qt=q.previousLayouted?q.maxIteration/5:q.maxIteration;q.width||typeof window=="undefined"||(q.width=window.innerWidth),q.height||typeof window=="undefined"||(q.height=window.innerHeight);var ee=q.center,xe=q.velocityDecay,Pe=q.comboMap;q.previousLayouted||q.initPos(Pe);for(var He=function(en){var wn=[];Rt.forEach(function(zn,In){wn[In]={x:0,y:0}}),q.applyCalculate(wn),q.applyComboCenterForce(wn),Rt.forEach(function(zn,In){S(zn.x)&&S(zn.y)&&(zn.x+=wn[In].x*xe,zn.y+=wn[In].y*xe)}),q.alpha+=(q.alphaTarget-q.alpha)*q.alphaDecay,q.onTick()},Be=0;Be<Qt;Be++)He();var Ke=[0,0];Rt.forEach(function(ze){S(ze.x)&&S(ze.y)&&(Ke[0]+=ze.x,Ke[1]+=ze.y)}),Ke[0]/=Rt.length,Ke[1]/=Rt.length;var Qe=[ee[0]-Ke[0],ee[1]-Ke[1]];Rt.forEach(function(ze,en){S(ze.x)&&S(ze.y)&&(ze.x+=Qe[0],ze.y+=Qe[1])}),q.combos.forEach(function(ze){var en=Pe[ze.id];en&&en.empty&&(ze.x=en.cx||ze.x,ze.y=en.cy||ze.y)}),q.previousLayouted=!0}},{key:"initVals",value:function(){var q=this.edges,Rt=this.nodes,Qt=this.combos,ee={},xe={},Pe={};Rt.forEach(function(Jr,Li){xe[Jr.id]=Jr,Pe[Jr.id]=Li}),this.nodeMap=xe,this.indexMap=Pe;var He={};Qt.forEach(function(Jr){He[Jr.id]=Jr}),this.oriComboMap=He,this.comboMap=this.getComboMap();var Be=this.preventOverlap;this.preventComboOverlap=this.preventComboOverlap||Be,this.preventNodeOverlap=this.preventNodeOverlap||Be;var Ke=this.collideStrength;Ke&&(this.comboCollideStrength=Ke,this.nodeCollideStrength=Ke),this.comboCollideStrength=this.comboCollideStrength?this.comboCollideStrength:0,this.nodeCollideStrength=this.nodeCollideStrength?this.nodeCollideStrength:0;for(var Qe=0;Qe<q.length;++Qe)ee[q[Qe].source]?ee[q[Qe].source]++:ee[q[Qe].source]=1,ee[q[Qe].target]?ee[q[Qe].target]++:ee[q[Qe].target]=1;for(var ze=[],en=0;en<q.length;++en)ze[en]=ee[q[en].source]/(ee[q[en].source]+ee[q[en].target]);this.bias=ze;var wn,zn,In=this.nodeSize,Xn=this.nodeSpacing;if(zn=S(Xn)?function(){return Xn}:A(Xn)?Xn:function(){return 0},this.nodeSpacing=zn,In)if(A(In))wn=function(Li){return In(Li)};else if(c(In)){var cr=(In[0]>In[1]?In[0]:In[1])/2;wn=function(Li){return cr}}else{var or=In/2;wn=function(Li){return or}}else wn=function(Li){return Li.size?c(Li.size)?(Li.size[0]>Li.size[1]?Li.size[0]:Li.size[1])/2:Li.size/2:10};this.nodeSize=wn;var lr,Ar=this.comboSpacing;lr=S(Ar)?function(){return Ar}:A(Ar)?Ar:function(){return 0},this.comboSpacing=lr;var Nr,Dr=this.comboPadding;Nr=S(Dr)?function(){return Dr}:c(Dr)?function(){return Math.max.apply(null,Dr)}:A(Dr)?Dr:function(){return 0},this.comboPadding=Nr;var Tr,Xr=this.linkDistance;Xr||(Xr=10),Tr=S(Xr)?function(Jr){return Xr}:Xr,this.linkDistance=Tr;var Ir,vi=this.edgeStrength;vi||(vi=1),Ir=S(vi)?function(Jr){return vi}:vi,this.edgeStrength=Ir;var bi,Vi=this.nodeStrength;Vi||(Vi=30),bi=S(Vi)?function(Jr){return Vi}:Vi,this.nodeStrength=bi}},{key:"initPos",value:function(q){this.nodes.forEach(function(Rt,Qt){var ee=Rt.comboId,xe=q[ee];ee&&xe?(Rt.x=xe.cx+100/(Qt+1),Rt.y=xe.cy+100/(Qt+1)):(Rt.x=100/(Qt+1),Rt.y=100/(Qt+1))})}},{key:"getComboMap",value:function(){var q=this,Rt=q.nodeMap,Qt=q.indexMap,ee=q.comboTrees,xe=q.oriComboMap,Pe={};return(ee||[]).forEach(function(He){var Be=[];d(He,function(Ke){if(Ke.itemType==="node"||!xe[Ke.id])return!0;if(Pe[Ke.id]===void 0){var Qe={id:Ke.id,name:Ke.id,cx:0,cy:0,count:0,depth:q.oriComboMap[Ke.id].depth,children:[]};Pe[Ke.id]=Qe}var ze=Ke.children;ze&&ze.forEach(function(cr){if(!Pe[cr.id]&&!Rt[cr.id])return!0;Be.push(cr)});var en=Pe[Ke.id];if(en.cx=0,en.cy=0,Be.length===0){en.empty=!0;var wn=xe[Ke.id],zn=Object.keys(Rt).length,In="".concat(Ke.id,"-visual-child-").concat(zn),Xn={id:In,x:wn.x,y:wn.y,depth:en.depth+1,itemType:"node"};q.nodes.push(Xn),Rt[In]=Xn,Qt[In]=zn,en.cx=wn.x,en.cy=wn.y,Be.push(Xn)}return Be.forEach(function(cr){if(en.count++,cr.itemType!=="node"){var or=Pe[cr.id];return S(or.cx)&&(en.cx+=or.cx),void(S(or.cy)&&(en.cy+=or.cy))}var lr=Rt[cr.id];lr&&(S(lr.x)&&(en.cx+=lr.x),S(lr.y)&&(en.cy+=lr.y))}),en.cx/=en.count,en.cy/=en.count,en.children=Be,!0})}),Pe}},{key:"applyComboCenterForce",value:function(q){var Rt=this.gravity,Qt=this.comboGravity||Rt,ee=this.alpha,xe=this.comboTrees,Pe=this.indexMap,He=this.nodeMap,Be=this.comboMap;(xe||[]).forEach(function(Ke){d(Ke,function(Qe){if(Qe.itemType==="node"||!Be[Qe.id])return!0;var ze=Be[Qe.id],en=(ze.depth+1)/10*.5,wn=ze.cx,zn=ze.cy;return ze.cx=0,ze.cy=0,ze.children.forEach(function(In){if(In.itemType!=="node"){var Xn=Be[In.id];return Xn&&S(Xn.cx)&&(ze.cx+=Xn.cx),void(Xn&&S(Xn.cy)&&(ze.cy+=Xn.cy))}var cr=He[In.id],or=cr.x-wn||.005,lr=cr.y-zn||.005,Ar=Math.sqrt(or*or+lr*lr),Nr=Pe[cr.id],Dr=Qt*ee/Ar*en;q[Nr].x-=or*Dr,q[Nr].y-=lr*Dr,S(cr.x)&&(ze.cx+=cr.x),S(cr.y)&&(ze.cy+=cr.y)}),ze.cx/=ze.count,ze.cy/=ze.count,!0})})}},{key:"applyCalculate",value:function(q){var Rt=this.comboMap,Qt=this.nodes,ee={};Qt.forEach(function(xe,Pe){Qt.forEach(function(He,Be){if(!(Pe<Be)){var Ke=xe.x-He.x||.005,Qe=xe.y-He.y||.005,ze=Ke*Ke+Qe*Qe,en=Math.sqrt(ze);ze<1&&(ze=en),ee["".concat(xe.id,"-").concat(He.id)]={vx:Ke,vy:Qe,vl2:ze,vl:en},ee["".concat(He.id,"-").concat(xe.id)]={vl2:ze,vl:en,vx:-Ke,vy:-Qe}}})}),this.updateComboSizes(Rt),this.calRepulsive(q,ee),this.calAttractive(q,ee),this.preventComboOverlap&&this.comboNonOverlapping(q,Rt)}},{key:"updateComboSizes",value:function(q){var Rt=this,Qt=Rt.comboTrees,ee=Rt.nodeMap,xe=Rt.nodeSize,Pe=Rt.comboSpacing,He=Rt.comboPadding;(Qt||[]).forEach(function(Be){var Ke=[];d(Be,function(Qe){if(Qe.itemType==="node")return!0;var ze=q[Qe.id];if(!ze)return!1;var en=Qe.children;en&&en.forEach(function(In){(q[In.id]||ee[In.id])&&Ke.push(In)}),ze.minX=1/0,ze.minY=1/0,ze.maxX=-1/0,ze.maxY=-1/0,Ke.forEach(function(In){if(In.itemType!=="node")return!0;var Xn=ee[In.id];if(!Xn)return!0;var cr=xe(Xn),or=Xn.x-cr,lr=Xn.y-cr,Ar=Xn.x+cr,Nr=Xn.y+cr;ze.minX>or&&(ze.minX=or),ze.minY>lr&&(ze.minY=lr),ze.maxX<Ar&&(ze.maxX=Ar),ze.maxY<Nr&&(ze.maxY=Nr)});var wn=Rt.oriComboMap[Qe.id].size||10;c(wn)&&(wn=wn[0]);var zn=Math.max(ze.maxX-ze.minX,ze.maxY-ze.minY,wn);return ze.r=zn/2+Pe(ze)/2+He(ze),!0})})}},{key:"comboNonOverlapping",value:function(q,Rt){var Qt=this.comboTree,ee=this.comboCollideStrength,xe=this.indexMap,Pe=this.nodeMap;d(Qt,function(He){if(!Rt[He.id]&&!Pe[He.id]&&He.id!=="comboTreeRoot")return!1;var Be=He.children;return Be&&Be.length>1&&Be.forEach(function(Ke,Qe){if(Ke.itemType==="node")return!1;var ze=Rt[Ke.id];ze&&Be.forEach(function(en,wn){if(Qe<=wn||en.itemType==="node")return!1;var zn=Rt[en.id];if(!zn)return!1;var In=ze.cx-zn.cx||.005,Xn=ze.cy-zn.cy||.005,cr=In*In+Xn*Xn,or=ze.r,lr=zn.r,Ar=or+lr,Nr=lr*lr,Dr=or*or;if(cr<Ar*Ar){var Tr=Ke.children;if(!Tr||Tr.length===0)return!1;var Xr=en.children;if(!Xr||Xr.length===0)return!1;var Ir=Math.sqrt(cr),vi=(Ar-Ir)/Ir*ee,bi=In*vi,Vi=Xn*vi,Jr=Nr/(Dr+Nr),Li=1-Jr;Tr.forEach(function(Hi){if(Hi.itemType!=="node")return!1;if(Pe[Hi.id]){var qi=xe[Hi.id];Xr.forEach(function(xo){if(xo.itemType!=="node"||!Pe[xo.id])return!1;var oo=xe[xo.id];q[qi].x+=bi*Jr,q[qi].y+=Vi*Jr,q[oo].x-=bi*Li,q[oo].y-=Vi*Li})}})}})}),!0})}},{key:"calRepulsive",value:function(q,Rt){var Qt=this,ee=Qt.nodes,xe=Qt.width*Qt.optimizeRangeFactor,Pe=Qt.nodeStrength,He=Qt.alpha,Be=Qt.nodeCollideStrength,Ke=Qt.preventNodeOverlap,Qe=Qt.nodeSize,ze=Qt.nodeSpacing,en=Qt.depthRepulsiveForceScale,wn=Qt.center;ee.forEach(function(zn,In){if(zn.x&&zn.y){if(wn){var Xn=Qt.gravity,cr=zn.x-wn[0]||.005,or=zn.y-wn[1]||.005,lr=Math.sqrt(cr*cr+or*or);q[In].x-=cr*Xn*He/lr,q[In].y-=or*Xn*He/lr}ee.forEach(function(Ar,Nr){if(In!==Nr&&Ar.x&&Ar.y){var Dr=Rt["".concat(zn.id,"-").concat(Ar.id)],Tr=Dr.vl2,Xr=Dr.vl;if(!(Xr>xe)){var Ir=Rt["".concat(zn.id,"-").concat(Ar.id)],vi=Ir.vx,bi=Ir.vy,Vi=Math.log(Math.abs(Ar.depth-zn.depth)/10)+1||1;Vi=Vi<1?1:Vi,Ar.comboId!==zn.comboId&&(Vi+=1);var Jr=Vi?Math.pow(en,Vi):1,Li=Pe(Ar)*He/Tr*Jr;if(q[In].x+=vi*Li,q[In].y+=bi*Li,In<Nr&&Ke){var Hi=Qe(zn)+ze(zn),qi=Qe(Ar)+ze(Ar),xo=Hi+qi;if(Tr<xo*xo){var oo=(xo-Xr)/Xr*Be,ta=qi*qi,ga=ta/(Hi*Hi+ta),ko=vi*oo,Vo=bi*oo;q[In].x+=ko*ga,q[In].y+=Vo*ga,ga=1-ga,q[Nr].x-=ko*ga,q[Nr].y-=Vo*ga}}}}})}})}},{key:"calAttractive",value:function(q,Rt){var Qt=this,ee=Qt.edges,xe=Qt.linkDistance,Pe=Qt.alpha,He=Qt.edgeStrength,Be=Qt.bias,Ke=Qt.depthAttractiveForceScale;ee.forEach(function(Qe,ze){if(Qe.source&&Qe.target&&Qe.source!==Qe.target){var en=Qt.indexMap[Qe.source],wn=Qt.indexMap[Qe.target],zn=Qt.nodeMap[Qe.source],In=Qt.nodeMap[Qe.target];if(zn&&In){var Xn=Math.log(Math.abs(zn.depth-In.depth)/10);zn.comboId===In.comboId&&(Xn/=2);var cr=Xn?Math.pow(Ke,Xn):1;if(zn.comboId!==In.comboId&&cr===1?cr=Ke/2:zn.comboId===In.comboId&&(cr=2),S(In.x)&&S(zn.x)&&S(In.y)&&S(zn.y)){var or=Rt["".concat(Qe.target,"-").concat(Qe.source)],lr=or.vl,Ar=or.vx,Nr=or.vy,Dr=(lr-xe(Qe))/lr*Pe*He(Qe)*cr,Tr=Ar*Dr,Xr=Nr*Dr,Ir=Be[ze];q[wn].x-=Tr*Ir,q[wn].y-=Xr*Ir,q[en].x+=Tr*(1-Ir),q[en].y+=Xr*(1-Ir)}}}})}},{key:"getType",value:function(){return"comboForce"}}])&&oi(z.prototype,T),B&&oi(z,B),It}(x),io,ao=new Proxy({},{get:function(z,T){return tr(T)},set:function(z,T,B){return Sn(T,B),!0}});io||(io={}),Sn("grid",Z),Sn("random",St),Sn("force",di),Sn("circular",Qi),Sn("dagre",Oe),Sn("radial",Ie),Sn("concentric",wi),Sn("mds",Yo),Sn("fruchterman",Jn),Sn("fruchterman-gpu",be),Sn("gForce",it),Sn("gForce-gpu",Mr),Sn("comboForce",Ca);var co=self;co.onmessage=function(et){(function(z){var T=z.data.type;return T===pa||T===Pr})(et)&&function(z){switch(z.data.type){case pa:var T=z.data,B=T.nodes,tt=T.edges,It=T.layoutCfg,Nt=It===void 0?{}:It,q=Nt.type,Rt=tr(q);if(!Rt){co.postMessage({type:Yr,message:"layout ".concat(q," not found")});break}var Qt=new Rt(Nt);Qt.init({nodes:B,edges:tt}),Qt.execute(),co.postMessage({nodes:B,type:La}),Qt.destroy();break;case Pr:var ee=z.data,xe=ee.nodes,Pe=ee.edges,He=ee.layoutCfg,Be=He===void 0?{}:He,Ke=ee.canvas,Qe=Be.type,ze=tr(Qe);if(!ze){co.postMessage({type:Yr,message:"layout ".concat(Qe," not found")});break}if(Qe.split("-")[1]!=="gpu"){co.postMessage({type:Yr,message:"layout ".concat(Qe," does not support GPU")});break}var en=new ze(Be);en.init({nodes:xe,edges:Pe}),en.executeWithWorker(Ke,co)}}(et)};var go=function(z,T){T.isCustomLayout=!0,Sn(z,T)}},function(i,y,t){"use strict";t.d(y,"a",function(){return p}),t.d(y,"b",function(){return b});var n=t(36),u=t(22);function p(c,S){S.forEach(function(I){I.draw(c)})}function b(c,S){var I=c.get("canvas");if(I&&I.get("autoDraw")){var m=I.get("context"),r=c.getParent(),s=r?r.getChildren():[I],d=c.get("el");if(S==="remove")if(c.get("isClipShape")){var C=d&&d.parentNode,E=C&&C.parentNode;C&&E&&E.removeChild(C)}else d&&d.parentNode&&d.parentNode.removeChild(d);else if(S==="show")d.setAttribute("visibility","visible");else if(S==="hide")d.setAttribute("visibility","hidden");else if(S==="zIndex")Object(u.c)(d,s.indexOf(c));else if(S==="sort"){var A=c.get("children");A&&A.length&&Object(u.d)(c,function(f,x){return A.indexOf(f)-A.indexOf(x)?1:0})}else S==="clear"?d&&(d.innerHTML=""):S==="matrix"?Object(n.c)(c):S==="clip"?Object(n.a)(c,m):S==="attr"||S==="add"&&c.draw(m)}}},function(i,y){i.exports=function(t,n){return t===n||t!=t&&n!=n}},function(i,y,t){var n=t(47).Symbol;i.exports=n},function(i,y,t){(function(n){function u(r){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(r)}var p=t(47),b=t(304),c=u(y)=="object"&&y&&!y.nodeType&&y,S=c&&u(n)=="object"&&n&&!n.nodeType&&n,I=S&&S.exports===c?p.Buffer:void 0,m=(I?I.isBuffer:void 0)||b;n.exports=m}).call(this,t(86)(i))},function(i,y,t){var n=t(313),u=t(125),p=t(314),b=t(176),c=t(315),S=t(57),I=t(165),m=I(n),r=I(u),s=I(p),d=I(b),C=I(c),E=S;(n&&E(new n(new ArrayBuffer(1)))!="[object DataView]"||u&&E(new u)!="[object Map]"||p&&E(p.resolve())!="[object Promise]"||b&&E(new b)!="[object Set]"||c&&E(new c)!="[object WeakMap]")&&(E=function(f){var x=S(f),j=x=="[object Object]"?f.constructor:void 0,P=j?I(j):"";if(P)switch(P){case m:return"[object DataView]";case r:return"[object Map]";case s:return"[object Promise]";case d:return"[object Set]";case C:return"[object WeakMap]"}return x}),i.exports=E},function(i,y,t){function n(b){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(b)}var u=t(57),p=t(48);i.exports=function(b){return n(b)=="symbol"||p(b)&&u(b)=="[object Symbol]"}},function(i,y,t){"use strict";var n=t(1),u=t(18),p=t(56),b=t(29),c=t(0),S=t(17),I=function(m){function r(){return m!==null&&m.apply(this,arguments)||this}return Object(n.b)(r,m),r.prototype.onCanvasChange=function(s){Object(b.h)(this,s)},r.prototype.getShapeBase=function(){return p},r.prototype.getGroupBase=function(){return r},r.prototype._applyClip=function(s,d){d&&(s.save(),Object(b.a)(s,d),d.createPath(s),s.restore(),s.clip(),d._afterDraw())},r.prototype.cacheCanvasBBox=function(){var s=this.cfg.children,d=[],C=[];Object(c.f)(s,function(X){var $=X.cfg.cacheCanvasBBox;$&&X.cfg.isInView&&(d.push($.minX,$.maxX),C.push($.minY,$.maxY))});var E=null;if(d.length){var A=Math.min.apply(null,d),f=Math.max.apply(null,d),x=Math.min.apply(null,C),j=Math.max.apply(null,C);E={minX:A,minY:x,x:A,y:x,maxX:f,maxY:j,width:f-A,height:j-x};var P=this.cfg.canvas;if(P){var W=P.getViewRange();this.set("isInView",Object(S.f)(E,W))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",E)},r.prototype.draw=function(s,d){var C=this.cfg.children,E=!d||this.cfg.refresh;C.length&&E&&(s.save(),Object(b.a)(s,this),this._applyClip(s,this.getClip()),Object(b.d)(s,C,d),s.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},r.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},r}(u.AbstractGroup);y.a=I},function(i,y,t){"use strict";var n=t(1),u=t(18),p=t(0),b=t(78),c=t(70),S=t(36),I=t(16),m=t(22),r=function(s){function d(){return s!==null&&s.apply(this,arguments)||this}return Object(n.b)(d,s),d.prototype.isEntityGroup=function(){return!0},d.prototype.createDom=function(){var C=Object(m.b)("g");this.set("el",C);var E=this.getParent();if(E){var A=E.get("el");A||(A=E.createDom(),E.set("el",A)),A.appendChild(C)}return C},d.prototype.afterAttrsChange=function(C){s.prototype.afterAttrsChange.call(this,C);var E=this.get("canvas");if(E&&E.get("autoDraw")){var A=E.get("context");this.createPath(A,C)}},d.prototype.onCanvasChange=function(C){Object(c.b)(this,C)},d.prototype.getShapeBase=function(){return b},d.prototype.getGroupBase=function(){return d},d.prototype.draw=function(C){var E=this.getChildren(),A=this.get("el");this.get("destroyed")?A&&A.parentNode.removeChild(A):(A||this.createDom(),Object(S.a)(this,C),this.createPath(C),E.length&&Object(c.a)(C,E))},d.prototype.createPath=function(C,E){var A=this.attr(),f=this.get("el");Object(p.f)(E||A,function(x,j){I.b[j]&&f.setAttribute(I.b[j],x)}),Object(S.c)(this)},d}(u.AbstractGroup);y.a=r},function(i,y,t){"use strict";t.r(y),t.d(y,"Base",function(){return r}),t.d(y,"Circle",function(){return d}),t.d(y,"Dom",function(){return C}),t.d(y,"Ellipse",function(){return E}),t.d(y,"Image",function(){return A}),t.d(y,"Line",function(){return x}),t.d(y,"Marker",function(){return W}),t.d(y,"Path",function(){return X}),t.d(y,"Polygon",function(){return $}),t.d(y,"Polyline",function(){return ft}),t.d(y,"Rect",function(){return Z}),t.d(y,"Text",function(){return Bt});var n={};t.r(n),t.d(n,"Base",function(){return r}),t.d(n,"Circle",function(){return d}),t.d(n,"Dom",function(){return C}),t.d(n,"Ellipse",function(){return E}),t.d(n,"Image",function(){return A}),t.d(n,"Line",function(){return x}),t.d(n,"Marker",function(){return W}),t.d(n,"Path",function(){return X}),t.d(n,"Polygon",function(){return $}),t.d(n,"Polyline",function(){return ft}),t.d(n,"Rect",function(){return Z}),t.d(n,"Text",function(){return Bt});var u=t(1),p=t(18),b=t(36),c=t(22),S=t(70),I=t(16),m=t(77),r=function(Lt){function St(){var K=Lt!==null&&Lt.apply(this,arguments)||this;return K.type="svg",K.canFill=!1,K.canStroke=!1,K}return Object(u.b)(St,Lt),St.prototype.getDefaultAttrs=function(){var K=Lt.prototype.getDefaultAttrs.call(this);return Object(u.a)(Object(u.a)({},K),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},St.prototype.afterAttrsChange=function(K){Lt.prototype.afterAttrsChange.call(this,K);var dt=this.get("canvas");if(dt&&dt.get("autoDraw")){var mt=dt.get("context");this.draw(mt,K)}},St.prototype.getShapeBase=function(){return n},St.prototype.getGroupBase=function(){return m.a},St.prototype.onCanvasChange=function(K){Object(S.b)(this,K)},St.prototype.calculateBBox=function(){var K=this.get("el"),dt=null;if(K)dt=K.getBBox();else{var mt=Object(p.getBBoxMethod)(this.get("type"));mt&&(dt=mt(this))}if(dt){var bt=dt.x,wt=dt.y,J=dt.width,ct=dt.height,it=this.getHitLineWidth(),_=it/2,R=bt-_,Q=wt-_;return{x:R,y:Q,minX:R,minY:Q,maxX:bt+J+_,maxY:wt+ct+_,width:J+it,height:ct+it}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},St.prototype.isFill=function(){var K=this.attr(),dt=K.fill,mt=K.fillStyle;return(dt||mt||this.isClipShape())&&this.canFill},St.prototype.isStroke=function(){var K=this.attr(),dt=K.stroke,mt=K.strokeStyle;return(dt||mt)&&this.canStroke},St.prototype.draw=function(K,dt){var mt=this.get("el");this.get("destroyed")?mt&&mt.parentNode.removeChild(mt):(mt||Object(c.a)(this),Object(b.a)(this,K),this.createPath(K,dt),this.shadow(K,dt),this.strokeAndFill(K,dt),this.transform(dt))},St.prototype.createPath=function(K,dt){},St.prototype.strokeAndFill=function(K,dt){var mt=dt||this.attr(),bt=mt.fill,wt=mt.fillStyle,J=mt.stroke,ct=mt.strokeStyle,it=mt.fillOpacity,_=mt.strokeOpacity,R=mt.lineWidth,Q=this.get("el");this.canFill&&(dt?"fill"in mt?this._setColor(K,"fill",bt):"fillStyle"in mt&&this._setColor(K,"fill",wt):this._setColor(K,"fill",bt||wt),it&&Q.setAttribute(I.b.fillOpacity,it)),this.canStroke&&R>0&&(dt?"stroke"in mt?this._setColor(K,"stroke",J):"strokeStyle"in mt&&this._setColor(K,"stroke",ct):this._setColor(K,"stroke",J||ct),_&&Q.setAttribute(I.b.strokeOpacity,_),R&&Q.setAttribute(I.b.lineWidth,R))},St.prototype._setColor=function(K,dt,mt){var bt=this.get("el");if(mt)if(mt=mt.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(mt))(wt=K.find("gradient",mt))||(wt=K.addGradient(mt)),bt.setAttribute(I.b[dt],"url(#"+wt+")");else if(/^[p,P]{1}[\s]*\(/.test(mt)){var wt;(wt=K.find("pattern",mt))||(wt=K.addPattern(mt)),bt.setAttribute(I.b[dt],"url(#"+wt+")")}else bt.setAttribute(I.b[dt],mt);else bt.setAttribute(I.b[dt],"none")},St.prototype.shadow=function(K,dt){var mt=this.attr(),bt=dt||mt,wt=bt.shadowOffsetX,J=bt.shadowOffsetY,ct=bt.shadowBlur,it=bt.shadowColor;(wt||J||ct||it)&&Object(b.b)(this,K)},St.prototype.transform=function(K){var dt=this.attr();(K||dt).matrix&&Object(b.c)(this)},St.prototype.isInShape=function(K,dt){return this.isPointInPath(K,dt)},St.prototype.isPointInPath=function(K,dt){var mt=this.get("el"),bt=this.get("canvas").get("el").getBoundingClientRect(),wt=K+bt.left,J=dt+bt.top,ct=document.elementFromPoint(wt,J);return!(!ct||!ct.isEqualNode(mt))},St.prototype.getHitLineWidth=function(){var K=this.attrs,dt=K.lineWidth,mt=K.lineAppendWidth;return this.isStroke()?dt+mt:0},St}(p.AbstractShape),s=t(0),d=function(Lt){function St(){var K=Lt!==null&&Lt.apply(this,arguments)||this;return K.type="circle",K.canFill=!0,K.canStroke=!0,K}return Object(u.b)(St,Lt),St.prototype.getDefaultAttrs=function(){var K=Lt.prototype.getDefaultAttrs.call(this);return Object(u.a)(Object(u.a)({},K),{x:0,y:0,r:0})},St.prototype.createPath=function(K,dt){var mt=this.attr(),bt=this.get("el");Object(s.f)(dt||mt,function(wt,J){J==="x"||J==="y"?bt.setAttribute("c"+J,wt):I.b[J]&&bt.setAttribute(I.b[J],wt)})},St}(r),C=function(Lt){function St(){var K=Lt!==null&&Lt.apply(this,arguments)||this;return K.type="dom",K.canFill=!1,K.canStroke=!1,K}return Object(u.b)(St,Lt),St.prototype.createPath=function(K,dt){var mt=this.attr(),bt=this.get("el");if(Object(s.f)(dt||mt,function(it,_){I.b[_]&&bt.setAttribute(I.b[_],it)}),typeof mt.html=="function"){var wt=mt.html.call(this,mt);if(wt instanceof Element||wt instanceof HTMLDocument){for(var J=bt.childNodes,ct=J.length-1;ct>=0;ct--)bt.removeChild(J[ct]);bt.appendChild(wt)}else bt.innerHTML=wt}else bt.innerHTML=mt.html},St}(r),E=function(Lt){function St(){var K=Lt!==null&&Lt.apply(this,arguments)||this;return K.type="ellipse",K.canFill=!0,K.canStroke=!0,K}return Object(u.b)(St,Lt),St.prototype.getDefaultAttrs=function(){var K=Lt.prototype.getDefaultAttrs.call(this);return Object(u.a)(Object(u.a)({},K),{x:0,y:0,rx:0,ry:0})},St.prototype.createPath=function(K,dt){var mt=this.attr(),bt=this.get("el");Object(s.f)(dt||mt,function(wt,J){J==="x"||J==="y"?bt.setAttribute("c"+J,wt):I.b[J]&&bt.setAttribute(I.b[J],wt)})},St}(r),A=function(Lt){function St(){var K=Lt!==null&&Lt.apply(this,arguments)||this;return K.type="image",K.canFill=!1,K.canStroke=!1,K}return Object(u.b)(St,Lt),St.prototype.getDefaultAttrs=function(){var K=Lt.prototype.getDefaultAttrs.call(this);return Object(u.a)(Object(u.a)({},K),{x:0,y:0,width:0,height:0})},St.prototype.createPath=function(K,dt){var mt=this,bt=this.attr(),wt=this.get("el");Object(s.f)(dt||bt,function(J,ct){ct==="img"?mt._setImage(bt.img):I.b[ct]&&wt.setAttribute(I.b[ct],J)})},St.prototype.setAttr=function(K,dt){this.attrs[K]=dt,K==="img"&&this._setImage(dt)},St.prototype._setImage=function(K){var dt=this.attr(),mt=this.get("el");if(Object(s.x)(K))mt.setAttribute("href",K);else if(K instanceof window.Image)dt.width||(mt.setAttribute("width",K.width),this.attr("width",K.width)),dt.height||(mt.setAttribute("height",K.height),this.attr("height",K.height)),mt.setAttribute("href",K.src);else if(K instanceof HTMLElement&&Object(s.x)(K.nodeName)&&K.nodeName.toUpperCase()==="CANVAS")mt.setAttribute("href",K.toDataURL());else if(K instanceof ImageData){var bt=document.createElement("canvas");bt.setAttribute("width",""+K.width),bt.setAttribute("height",""+K.height),bt.getContext("2d").putImageData(K,0,0),dt.width||(mt.setAttribute("width",""+K.width),this.attr("width",K.width)),dt.height||(mt.setAttribute("height",""+K.height),this.attr("height",K.height)),mt.setAttribute("href",bt.toDataURL())}},St}(r),f=t(20),x=function(Lt){function St(){var K=Lt!==null&&Lt.apply(this,arguments)||this;return K.type="line",K.canFill=!1,K.canStroke=!0,K}return Object(u.b)(St,Lt),St.prototype.getDefaultAttrs=function(){var K=Lt.prototype.getDefaultAttrs.call(this);return Object(u.a)(Object(u.a)({},K),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},St.prototype.createPath=function(K,dt){var mt=this.attr(),bt=this.get("el");Object(s.f)(dt||mt,function(wt,J){if(J==="startArrow"||J==="endArrow")if(wt){var ct=Object(s.v)(wt)?K.addArrow(mt,I.b[J]):K.getDefaultArrow(mt,I.b[J]);bt.setAttribute(I.b[J],"url(#"+ct+")")}else bt.removeAttribute(I.b[J]);else I.b[J]&&bt.setAttribute(I.b[J],wt)})},St.prototype.getTotalLength=function(){var K=this.attr(),dt=K.x1,mt=K.y1,bt=K.x2,wt=K.y2;return f.c.length(dt,mt,bt,wt)},St.prototype.getPoint=function(K){var dt=this.attr(),mt=dt.x1,bt=dt.y1,wt=dt.x2,J=dt.y2;return f.c.pointAt(mt,bt,wt,J,K)},St}(r),j={circle:function(St,K,dt){return[["M",St,K],["m",-dt,0],["a",dt,dt,0,1,0,2*dt,0],["a",dt,dt,0,1,0,2*-dt,0]]},square:function(St,K,dt){return[["M",St-dt,K-dt],["L",St+dt,K-dt],["L",St+dt,K+dt],["L",St-dt,K+dt],["Z"]]},diamond:function(St,K,dt){return[["M",St-dt,K],["L",St,K-dt],["L",St+dt,K],["L",St,K+dt],["Z"]]},triangle:function(St,K,dt){var mt=dt*Math.sin(1/3*Math.PI);return[["M",St-dt,K+mt],["L",St,K-mt],["L",St+dt,K+mt],["z"]]},triangleDown:function(St,K,dt){var mt=dt*Math.sin(1/3*Math.PI);return[["M",St-dt,K-mt],["L",St+dt,K-mt],["L",St,K+mt],["Z"]]}},P={get:function(St){return j[St]},register:function(St,K){j[St]=K},remove:function(St){delete j[St]},getAll:function(){return j}},W=function(Lt){function St(){var K=Lt!==null&&Lt.apply(this,arguments)||this;return K.type="marker",K.canFill=!0,K.canStroke=!0,K}return Object(u.b)(St,Lt),St.prototype.createPath=function(K){this.get("el").setAttribute("d",this._assembleMarker())},St.prototype._assembleMarker=function(){var K=this._getPath();return Object(s.m)(K)?K.map(function(dt){return dt.join(" ")}).join(""):K},St.prototype._getPath=function(){var K,dt=this.attr(),mt=dt.x,bt=dt.y,wt=dt.r||dt.radius,J=dt.symbol||"circle";return(K=Object(s.r)(J)?J:P.get(J))?K(mt,bt,wt):(console.warn(K+" symbol is not exist."),null)},St.symbolsFactory=P,St}(r),X=function(Lt){function St(){var K=Lt!==null&&Lt.apply(this,arguments)||this;return K.type="path",K.canFill=!0,K.canStroke=!0,K}return Object(u.b)(St,Lt),St.prototype.getDefaultAttrs=function(){var K=Lt.prototype.getDefaultAttrs.call(this);return Object(u.a)(Object(u.a)({},K),{startArrow:!1,endArrow:!1})},St.prototype.createPath=function(K,dt){var mt=this,bt=this.attr(),wt=this.get("el");Object(s.f)(dt||bt,function(J,ct){if(ct==="path"&&Object(s.m)(J))wt.setAttribute("d",mt._formatPath(J));else if(ct==="startArrow"||ct==="endArrow")if(J){var it=Object(s.v)(J)?K.addArrow(bt,I.b[ct]):K.getDefaultArrow(bt,I.b[ct]);wt.setAttribute(I.b[ct],"url(#"+it+")")}else wt.removeAttribute(I.b[ct]);else I.b[ct]&&wt.setAttribute(I.b[ct],J)})},St.prototype._formatPath=function(K){var dt=K.map(function(mt){return mt.join(" ")}).join("");return~dt.indexOf("NaN")?"":dt},St.prototype.getTotalLength=function(){var K=this.get("el");return K?K.getTotalLength():null},St.prototype.getPoint=function(K){var dt=this.get("el"),mt=this.getTotalLength();if(mt===0)return null;var bt=dt?dt.getPointAtLength(K*mt):null;return bt?{x:bt.x,y:bt.y}:null},St}(r),$=function(Lt){function St(){var K=Lt!==null&&Lt.apply(this,arguments)||this;return K.type="polygon",K.canFill=!0,K.canStroke=!0,K}return Object(u.b)(St,Lt),St.prototype.createPath=function(K,dt){var mt=this.attr(),bt=this.get("el");Object(s.f)(dt||mt,function(wt,J){J==="points"&&Object(s.m)(wt)&&wt.length>=2?bt.setAttribute("points",wt.map(function(ct){return ct[0]+","+ct[1]}).join(" ")):I.b[J]&&bt.setAttribute(I.b[J],wt)})},St}(r),ft=function(Lt){function St(){var K=Lt!==null&&Lt.apply(this,arguments)||this;return K.type="polyline",K.canFill=!0,K.canStroke=!0,K}return Object(u.b)(St,Lt),St.prototype.getDefaultAttrs=function(){var K=Lt.prototype.getDefaultAttrs.call(this);return Object(u.a)(Object(u.a)({},K),{startArrow:!1,endArrow:!1})},St.prototype.onAttrChange=function(K,dt,mt){Lt.prototype.onAttrChange.call(this,K,dt,mt),["points"].indexOf(K)!==-1&&this._resetCache()},St.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},St.prototype.createPath=function(K,dt){var mt=this.attr(),bt=this.get("el");Object(s.f)(dt||mt,function(wt,J){J==="points"&&Object(s.m)(wt)&&wt.length>=2?bt.setAttribute("points",wt.map(function(ct){return ct[0]+","+ct[1]}).join(" ")):I.b[J]&&bt.setAttribute(I.b[J],wt)})},St.prototype.getTotalLength=function(){var K=this.attr().points,dt=this.get("totalLength");return Object(s.s)(dt)?(this.set("totalLength",f.d.length(K)),this.get("totalLength")):dt},St.prototype.getPoint=function(K){var dt,mt,bt=this.attr().points,wt=this.get("tCache");return wt||(this._setTcache(),wt=this.get("tCache")),Object(s.f)(wt,function(J,ct){K>=J[0]&&K<=J[1]&&(dt=(K-J[0])/(J[1]-J[0]),mt=ct)}),f.c.pointAt(bt[mt][0],bt[mt][1],bt[mt+1][0],bt[mt+1][1],dt)},St.prototype._setTcache=function(){var K=this.attr().points;if(K&&K.length!==0){var dt=this.getTotalLength();if(!(dt<=0)){var mt,bt,wt=0,J=[];Object(s.f)(K,function(ct,it){K[it+1]&&((mt=[])[0]=wt/dt,bt=f.c.length(ct[0],ct[1],K[it+1][0],K[it+1][1]),wt+=bt,mt[1]=wt/dt,J.push(mt))}),this.set("tCache",J)}}},St.prototype.getStartTangent=function(){var K=this.attr().points,dt=[];return dt.push([K[1][0],K[1][1]]),dt.push([K[0][0],K[0][1]]),dt},St.prototype.getEndTangent=function(){var K=this.attr().points,dt=K.length-1,mt=[];return mt.push([K[dt-1][0],K[dt-1][1]]),mt.push([K[dt][0],K[dt][1]]),mt},St}(r),Z=function(Lt){function St(){var K=Lt!==null&&Lt.apply(this,arguments)||this;return K.type="rect",K.canFill=!0,K.canStroke=!0,K}return Object(u.b)(St,Lt),St.prototype.getDefaultAttrs=function(){var K=Lt.prototype.getDefaultAttrs.call(this);return Object(u.a)(Object(u.a)({},K),{x:0,y:0,width:0,height:0,radius:0})},St.prototype.createPath=function(K,dt){var mt=this,bt=this.attr(),wt=this.get("el"),J=!1,ct=["x","y","width","height","radius"];Object(s.f)(dt||bt,function(it,_){ct.indexOf(_)===-1||J?ct.indexOf(_)===-1&&I.b[_]&&wt.setAttribute(I.b[_],it):(wt.setAttribute("d",mt._assembleRect(bt)),J=!0)})},St.prototype._assembleRect=function(K){var dt=K.x,mt=K.y,bt=K.width,wt=K.height,J=K.radius;if(!J)return"M "+dt+","+mt+" l "+bt+",0 l 0,"+wt+" l"+-bt+" 0 z";var ct=function(it){var _=0,R=0,Q=0,k=0;return Object(s.m)(it)?it.length===1?_=R=Q=k=it[0]:it.length===2?(_=Q=it[0],R=k=it[1]):it.length===3?(_=it[0],R=k=it[1],Q=it[2]):(_=it[0],R=it[1],Q=it[2],k=it[3]):_=R=Q=k=it,{r1:_,r2:R,r3:Q,r4:k}}(J);return Object(s.m)(J)?J.length===1?ct.r1=ct.r2=ct.r3=ct.r4=J[0]:J.length===2?(ct.r1=ct.r3=J[0],ct.r2=ct.r4=J[1]):J.length===3?(ct.r1=J[0],ct.r2=ct.r4=J[1],ct.r3=J[2]):(ct.r1=J[0],ct.r2=J[1],ct.r3=J[2],ct.r4=J[3]):ct.r1=ct.r2=ct.r3=ct.r4=J,[["M "+(dt+ct.r1)+","+mt],["l "+(bt-ct.r1-ct.r2)+",0"],["a "+ct.r2+","+ct.r2+",0,0,1,"+ct.r2+","+ct.r2],["l 0,"+(wt-ct.r2-ct.r3)],["a "+ct.r3+","+ct.r3+",0,0,1,"+-ct.r3+","+ct.r3],["l "+(ct.r3+ct.r4-bt)+",0"],["a "+ct.r4+","+ct.r4+",0,0,1,"+-ct.r4+","+-ct.r4],["l 0,"+(ct.r4+ct.r1-wt)],["a "+ct.r1+","+ct.r1+",0,0,1,"+ct.r1+","+-ct.r1],["z"]].join(" ")},St}(r),lt=t(119),pt={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},gt={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},ut={left:"left",start:"left",center:"middle",right:"end",end:"end"},Bt=function(Lt){function St(){var K=Lt!==null&&Lt.apply(this,arguments)||this;return K.type="text",K.canFill=!0,K.canStroke=!0,K}return Object(u.b)(St,Lt),St.prototype.getDefaultAttrs=function(){var K=Lt.prototype.getDefaultAttrs.call(this);return Object(u.a)(Object(u.a)({},K),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},St.prototype.createPath=function(K,dt){var mt=this,bt=this.attr(),wt=this.get("el");this._setFont(),Object(s.f)(dt||bt,function(J,ct){ct==="text"?mt._setText(""+J):ct==="matrix"&&J?Object(b.c)(mt):I.b[ct]&&wt.setAttribute(I.b[ct],J)}),wt.setAttribute("paint-order","stroke"),wt.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},St.prototype._setFont=function(){var K=this.get("el"),dt=this.attr(),mt=dt.textBaseline,bt=dt.textAlign,wt=Object(lt.a)();wt&&wt.name==="firefox"?K.setAttribute("dominant-baseline",gt[mt]||"alphabetic"):K.setAttribute("alignment-baseline",pt[mt]||"baseline"),K.setAttribute("text-anchor",ut[bt]||"left")},St.prototype._setText=function(K){var dt=this.get("el"),mt=this.attr(),bt=mt.x,wt=mt.textBaseline,J=wt===void 0?"bottom":wt;if(K)if(~K.indexOf(`
`)){var ct=K.split(`
`),it=ct.length-1,_="";Object(s.f)(ct,function(R,Q){Q===0?J==="alphabetic"?_+='<tspan x="'+bt+'" dy="'+-it+'em">'+R+"</tspan>":J==="top"?_+='<tspan x="'+bt+'" dy="0.9em">'+R+"</tspan>":J==="middle"?_+='<tspan x="'+bt+'" dy="'+-(it-1)/2+'em">'+R+"</tspan>":J==="bottom"?_+='<tspan x="'+bt+'" dy="-'+(it+.3)+'em">'+R+"</tspan>":J==="hanging"&&(_+='<tspan x="'+bt+'" dy="'+(-(it-1)-.3)+'em">'+R+"</tspan>"):_+='<tspan x="'+bt+'" dy="1em">'+R+"</tspan>"}),dt.innerHTML=_}else dt.innerHTML=K;else dt.innerHTML=""},St}(r)},function(i,y,t){"use strict";var n=function(){function u(){this._events={}}return u.prototype.on=function(p,b,c){return this._events[p]||(this._events[p]=[]),this._events[p].push({callback:b,once:!!c}),this},u.prototype.once=function(p,b){return this.on(p,b,!0),this},u.prototype.emit=function(p){for(var b=this,c=[],S=1;S<arguments.length;S++)c[S-1]=arguments[S];var I=this._events[p]||[],m=this._events["*"]||[],r=function(d){for(var C=d.length,E=0;E<C;E++)if(d[E]){var A=d[E],f=A.callback;A.once&&(d.splice(E,1),d.length===0&&delete b._events[p],C--,E--),f.apply(b,c)}};r(I),r(m)},u.prototype.off=function(p,b){if(p)if(b){for(var c=this._events[p]||[],S=c.length,I=0;I<S;I++)c[I].callback===b&&(c.splice(I,1),S--,I--);c.length===0&&delete this._events[p]}else delete this._events[p];else this._events={};return this},u.prototype.getEvents=function(){return this._events},u}();y.a=n},function(i,y,t){"use strict";t.r(y),t.d(y,"create",function(){return u}),t.d(y,"clone",function(){return p}),t.d(y,"fromValues",function(){return b}),t.d(y,"copy",function(){return c}),t.d(y,"set",function(){return S}),t.d(y,"add",function(){return I}),t.d(y,"subtract",function(){return m}),t.d(y,"multiply",function(){return r}),t.d(y,"divide",function(){return s}),t.d(y,"ceil",function(){return d}),t.d(y,"floor",function(){return C}),t.d(y,"min",function(){return E}),t.d(y,"max",function(){return A}),t.d(y,"round",function(){return f}),t.d(y,"scale",function(){return x}),t.d(y,"scaleAndAdd",function(){return j}),t.d(y,"distance",function(){return P}),t.d(y,"squaredDistance",function(){return W}),t.d(y,"length",function(){return X}),t.d(y,"squaredLength",function(){return $}),t.d(y,"negate",function(){return ft}),t.d(y,"inverse",function(){return Z}),t.d(y,"normalize",function(){return lt}),t.d(y,"dot",function(){return pt}),t.d(y,"cross",function(){return gt}),t.d(y,"lerp",function(){return ut}),t.d(y,"random",function(){return Bt}),t.d(y,"transformMat2",function(){return Lt}),t.d(y,"transformMat2d",function(){return St}),t.d(y,"transformMat3",function(){return K}),t.d(y,"transformMat4",function(){return dt}),t.d(y,"rotate",function(){return mt}),t.d(y,"angle",function(){return bt}),t.d(y,"zero",function(){return wt}),t.d(y,"str",function(){return J}),t.d(y,"exactEquals",function(){return ct}),t.d(y,"equals",function(){return it}),t.d(y,"len",function(){return R}),t.d(y,"sub",function(){return Q}),t.d(y,"mul",function(){return k}),t.d(y,"div",function(){return g}),t.d(y,"dist",function(){return O}),t.d(y,"sqrDist",function(){return F}),t.d(y,"sqrLen",function(){return V}),t.d(y,"forEach",function(){return rt});var n=t(11);function u(){var ot=new n.a(2);return n.a!=Float32Array&&(ot[0]=0,ot[1]=0),ot}function p(ot){var st=new n.a(2);return st[0]=ot[0],st[1]=ot[1],st}function b(ot,st){var Mt=new n.a(2);return Mt[0]=ot,Mt[1]=st,Mt}function c(ot,st){return ot[0]=st[0],ot[1]=st[1],ot}function S(ot,st,Mt){return ot[0]=st,ot[1]=Mt,ot}function I(ot,st,Mt){return ot[0]=st[0]+Mt[0],ot[1]=st[1]+Mt[1],ot}function m(ot,st,Mt){return ot[0]=st[0]-Mt[0],ot[1]=st[1]-Mt[1],ot}function r(ot,st,Mt){return ot[0]=st[0]*Mt[0],ot[1]=st[1]*Mt[1],ot}function s(ot,st,Mt){return ot[0]=st[0]/Mt[0],ot[1]=st[1]/Mt[1],ot}function d(ot,st){return ot[0]=Math.ceil(st[0]),ot[1]=Math.ceil(st[1]),ot}function C(ot,st){return ot[0]=Math.floor(st[0]),ot[1]=Math.floor(st[1]),ot}function E(ot,st,Mt){return ot[0]=Math.min(st[0],Mt[0]),ot[1]=Math.min(st[1],Mt[1]),ot}function A(ot,st,Mt){return ot[0]=Math.max(st[0],Mt[0]),ot[1]=Math.max(st[1],Mt[1]),ot}function f(ot,st){return ot[0]=Math.round(st[0]),ot[1]=Math.round(st[1]),ot}function x(ot,st,Mt){return ot[0]=st[0]*Mt,ot[1]=st[1]*Mt,ot}function j(ot,st,Mt,yt){return ot[0]=st[0]+Mt[0]*yt,ot[1]=st[1]+Mt[1]*yt,ot}function P(ot,st){var Mt=st[0]-ot[0],yt=st[1]-ot[1];return Math.hypot(Mt,yt)}function W(ot,st){var Mt=st[0]-ot[0],yt=st[1]-ot[1];return Mt*Mt+yt*yt}function X(ot){var st=ot[0],Mt=ot[1];return Math.hypot(st,Mt)}function $(ot){var st=ot[0],Mt=ot[1];return st*st+Mt*Mt}function ft(ot,st){return ot[0]=-st[0],ot[1]=-st[1],ot}function Z(ot,st){return ot[0]=1/st[0],ot[1]=1/st[1],ot}function lt(ot,st){var Mt=st[0],yt=st[1],xt=Mt*Mt+yt*yt;return xt>0&&(xt=1/Math.sqrt(xt)),ot[0]=st[0]*xt,ot[1]=st[1]*xt,ot}function pt(ot,st){return ot[0]*st[0]+ot[1]*st[1]}function gt(ot,st,Mt){var yt=st[0]*Mt[1]-st[1]*Mt[0];return ot[0]=ot[1]=0,ot[2]=yt,ot}function ut(ot,st,Mt,yt){var xt=st[0],Ot=st[1];return ot[0]=xt+yt*(Mt[0]-xt),ot[1]=Ot+yt*(Mt[1]-Ot),ot}function Bt(ot,st){st=st||1;var Mt=2*n.c()*Math.PI;return ot[0]=Math.cos(Mt)*st,ot[1]=Math.sin(Mt)*st,ot}function Lt(ot,st,Mt){var yt=st[0],xt=st[1];return ot[0]=Mt[0]*yt+Mt[2]*xt,ot[1]=Mt[1]*yt+Mt[3]*xt,ot}function St(ot,st,Mt){var yt=st[0],xt=st[1];return ot[0]=Mt[0]*yt+Mt[2]*xt+Mt[4],ot[1]=Mt[1]*yt+Mt[3]*xt+Mt[5],ot}function K(ot,st,Mt){var yt=st[0],xt=st[1];return ot[0]=Mt[0]*yt+Mt[3]*xt+Mt[6],ot[1]=Mt[1]*yt+Mt[4]*xt+Mt[7],ot}function dt(ot,st,Mt){var yt=st[0],xt=st[1];return ot[0]=Mt[0]*yt+Mt[4]*xt+Mt[12],ot[1]=Mt[1]*yt+Mt[5]*xt+Mt[13],ot}function mt(ot,st,Mt,yt){var xt=st[0]-Mt[0],Ot=st[1]-Mt[1],jt=Math.sin(yt),Dt=Math.cos(yt);return ot[0]=xt*Dt-Ot*jt+Mt[0],ot[1]=xt*jt+Ot*Dt+Mt[1],ot}function bt(ot,st){var Mt=ot[0],yt=ot[1],xt=st[0],Ot=st[1],jt=Math.sqrt(Mt*Mt+yt*yt)*Math.sqrt(xt*xt+Ot*Ot),Dt=jt&&(Mt*xt+yt*Ot)/jt;return Math.acos(Math.min(Math.max(Dt,-1),1))}function wt(ot){return ot[0]=0,ot[1]=0,ot}function J(ot){return"vec2("+ot[0]+", "+ot[1]+")"}function ct(ot,st){return ot[0]===st[0]&&ot[1]===st[1]}function it(ot,st){var Mt=ot[0],yt=ot[1],xt=st[0],Ot=st[1];return Math.abs(Mt-xt)<=n.b*Math.max(1,Math.abs(Mt),Math.abs(xt))&&Math.abs(yt-Ot)<=n.b*Math.max(1,Math.abs(yt),Math.abs(Ot))}var _,R=X,Q=m,k=r,g=s,O=P,F=W,V=$,rt=(_=u(),function(ot,st,Mt,yt,xt,Ot){var jt,Dt;for(st||(st=2),Mt||(Mt=0),Dt=yt?Math.min(yt*st+Mt,ot.length):ot.length,jt=Mt;jt<Dt;jt+=st)_[0]=ot[jt],_[1]=ot[jt+1],xt(_,_,Ot),ot[jt]=_[0],ot[jt+1]=_[1];return ot})},function(i,y){var t=[],n=[];function u(p,b){if(b=b||{},p===void 0)throw new Error("insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).");var c,S=b.prepend===!0?"prepend":"append",I=b.container!==void 0?b.container:document.querySelector("head"),m=t.indexOf(I);return m===-1&&(m=t.push(I)-1,n[m]={}),n[m]!==void 0&&n[m][S]!==void 0?c=n[m][S]:(c=n[m][S]=function(){var r=document.createElement("style");return r.setAttribute("type","text/css"),r}(),S==="prepend"?I.insertBefore(c,I.childNodes[0]):I.appendChild(c)),p.charCodeAt(0)===65279&&(p=p.substr(1,p.length)),c.styleSheet?c.styleSheet.cssText+=p:c.textContent+=p,c}i.exports=u,i.exports.insertCss=u},function(i,y,t){"use strict";function n(E){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(E)}var u=t(263),p=t(267),b=[].slice,c=["keyword","gray","hex"],S={};Object.keys(p).forEach(function(E){S[b.call(p[E].labels).sort().join("")]=E});var I={};function m(E,A){if(!(this instanceof m))return new m(E,A);if(A&&A in c&&(A=null),A&&!(A in p))throw new Error("Unknown model: "+A);var f,x;if(E==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(E instanceof m)this.model=E.model,this.color=E.color.slice(),this.valpha=E.valpha;else if(typeof E=="string"){var j=u.get(E);if(j===null)throw new Error("Unable to parse color from string: "+E);this.model=j.model,x=p[this.model].channels,this.color=j.value.slice(0,x),this.valpha=typeof j.value[x]=="number"?j.value[x]:1}else if(E.length){this.model=A||"rgb",x=p[this.model].channels;var P=b.call(E,0,x);this.color=C(P,x),this.valpha=typeof E[x]=="number"?E[x]:1}else if(typeof E=="number")E&=16777215,this.model="rgb",this.color=[E>>16&255,E>>8&255,255&E],this.valpha=1;else{this.valpha=1;var W=Object.keys(E);"alpha"in E&&(W.splice(W.indexOf("alpha"),1),this.valpha=typeof E.alpha=="number"?E.alpha:0);var X=W.sort().join("");if(!(X in S))throw new Error("Unable to parse color from object: "+JSON.stringify(E));this.model=S[X];var $=p[this.model].labels,ft=[];for(f=0;f<$.length;f++)ft.push(E[$[f]]);this.color=C(ft)}if(I[this.model])for(x=p[this.model].channels,f=0;f<x;f++){var Z=I[this.model][f];Z&&(this.color[f]=Z(this.color[f]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function r(E,A,f){return(E=Array.isArray(E)?E:[E]).forEach(function(x){(I[x]||(I[x]=[]))[A]=f}),E=E[0],function(x){var j;return arguments.length?(f&&(x=f(x)),(j=this[E]()).color[A]=x,j):(j=this[E]().color[A],f&&(j=f(j)),j)}}function s(E){return function(A){return Math.max(0,Math.min(E,A))}}function d(E){return Array.isArray(E)?E:[E]}function C(E,A){for(var f=0;f<A;f++)typeof E[f]!="number"&&(E[f]=0);return E}m.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(A){var f=this.model in u.to?this:this.rgb(),x=(f=f.round(typeof A=="number"?A:1)).valpha===1?f.color:f.color.concat(this.valpha);return u.to[f.model](x)},percentString:function(A){var f=this.rgb().round(typeof A=="number"?A:1),x=f.valpha===1?f.color:f.color.concat(this.valpha);return u.to.rgb.percent(x)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var A={},f=p[this.model].channels,x=p[this.model].labels,j=0;j<f;j++)A[x[j]]=this.color[j];return this.valpha!==1&&(A.alpha=this.valpha),A},unitArray:function(){var A=this.rgb().color;return A[0]/=255,A[1]/=255,A[2]/=255,this.valpha!==1&&A.push(this.valpha),A},unitObject:function(){var A=this.rgb().object();return A.r/=255,A.g/=255,A.b/=255,this.valpha!==1&&(A.alpha=this.valpha),A},round:function(A){return A=Math.max(A||0,0),new m(this.color.map(function(f){return function(x){return function(j,P){return Number(j.toFixed(P))}(x,f)}}(A)).concat(this.valpha),this.model)},alpha:function(A){return arguments.length?new m(this.color.concat(Math.max(0,Math.min(1,A))),this.model):this.valpha},red:r("rgb",0,s(255)),green:r("rgb",1,s(255)),blue:r("rgb",2,s(255)),hue:r(["hsl","hsv","hsl","hwb","hcg"],0,function(E){return(E%360+360)%360}),saturationl:r("hsl",1,s(100)),lightness:r("hsl",2,s(100)),saturationv:r("hsv",1,s(100)),value:r("hsv",2,s(100)),chroma:r("hcg",1,s(100)),gray:r("hcg",2,s(100)),white:r("hwb",1,s(100)),wblack:r("hwb",2,s(100)),cyan:r("cmyk",0,s(100)),magenta:r("cmyk",1,s(100)),yellow:r("cmyk",2,s(100)),black:r("cmyk",3,s(100)),x:r("xyz",0,s(100)),y:r("xyz",1,s(100)),z:r("xyz",2,s(100)),l:r("lab",0,s(100)),a:r("lab",1),b:r("lab",2),keyword:function(A){return arguments.length?new m(A):p[this.model].keyword(this.color)},hex:function(A){return arguments.length?new m(A):u.to.hex(this.rgb().round().color)},rgbNumber:function(){var A=this.rgb().color;return(255&A[0])<<16|(255&A[1])<<8|255&A[2]},luminosity:function(){for(var A=this.rgb().color,f=[],x=0;x<A.length;x++){var j=A[x]/255;f[x]=j<=.03928?j/12.92:Math.pow((j+.055)/1.055,2.4)}return .2126*f[0]+.7152*f[1]+.0722*f[2]},contrast:function(A){var f=this.luminosity(),x=A.luminosity();return f>x?(f+.05)/(x+.05):(x+.05)/(f+.05)},level:function(A){var f=this.contrast(A);return f>=7.1?"AAA":f>=4.5?"AA":""},isDark:function(){var A=this.rgb().color;return(299*A[0]+587*A[1]+114*A[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var A=this.rgb(),f=0;f<3;f++)A.color[f]=255-A.color[f];return A},lighten:function(A){var f=this.hsl();return f.color[2]+=f.color[2]*A,f},darken:function(A){var f=this.hsl();return f.color[2]-=f.color[2]*A,f},saturate:function(A){var f=this.hsl();return f.color[1]+=f.color[1]*A,f},desaturate:function(A){var f=this.hsl();return f.color[1]-=f.color[1]*A,f},whiten:function(A){var f=this.hwb();return f.color[1]+=f.color[1]*A,f},blacken:function(A){var f=this.hwb();return f.color[2]+=f.color[2]*A,f},grayscale:function(){var A=this.rgb().color,f=.3*A[0]+.59*A[1]+.11*A[2];return m.rgb(f,f,f)},fade:function(A){return this.alpha(this.valpha-this.valpha*A)},opaquer:function(A){return this.alpha(this.valpha+this.valpha*A)},rotate:function(A){var f=this.hsl(),x=f.color[0];return x=(x=(x+A)%360)<0?360+x:x,f.color[0]=x,f},mix:function(A,f){if(!A||!A.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+n(A));var x=A.rgb(),j=this.rgb(),P=f===void 0?.5:f,W=2*P-1,X=x.alpha()-j.alpha(),$=((W*X==-1?W:(W+X)/(1+W*X))+1)/2,ft=1-$;return m.rgb($*x.red()+ft*j.red(),$*x.green()+ft*j.green(),$*x.blue()+ft*j.blue(),x.alpha()*P+j.alpha()*(1-P))}},Object.keys(p).forEach(function(E){if(c.indexOf(E)===-1){var A=p[E].channels;m.prototype[E]=function(){if(this.model===E)return new m(this);if(arguments.length)return new m(arguments,E);var f=typeof arguments[A]=="number"?A:this.valpha;return new m(d(p[this.model][E].raw(this.color)).concat(f),E)},m[E]=function(f){return typeof f=="number"&&(f=C(b.call(arguments),A)),new m(f,E)}}}),i.exports=m},function(i,y,t){var n=t(57),u=t(43);i.exports=function(p){if(!u(p))return!1;var b=n(p);return b=="[object Function]"||b=="[object GeneratorFunction]"||b=="[object AsyncFunction]"||b=="[object Proxy]"}},function(i,y,t){var n=t(100),u=t(101);i.exports=function(p,b,c,S){var I=!c;c||(c={});for(var m=-1,r=b.length;++m<r;){var s=b[m],d=S?S(c[s],p[s],s,c,p):void 0;d===void 0&&(d=p[s]),I?u(c,s,d):n(c,s,d)}return c}},function(i,y,t){var n=t(303),u=t(48),p=Object.prototype,b=p.hasOwnProperty,c=p.propertyIsEnumerable,S=n(function(){return arguments}())?n:function(I){return u(I)&&b.call(I,"callee")&&!c.call(I,"callee")};i.exports=S},function(i,y){i.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(i,y,t){var n=t(75);i.exports=function(u){if(typeof u=="string"||n(u))return u;var p=u+"";return p=="0"&&1/u==-1/0?"-0":p}},function(i,y,t){"use strict";function n(c){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(c)}Object.defineProperty(y,"__esModule",{value:!0}),y.circularDependencyToException=y.listMetadataForTarget=y.listRegisteredBindingsForServiceIdentifier=y.getServiceIdentifierAsString=y.getFunctionName=void 0;var u=t(41);function p(c){return typeof c=="function"?c.name:n(c)==="symbol"?c.toString():c}function b(c){if(c.name)return c.name;var S=c.toString(),I=S.match(/^function\s*([^\s(]+)/);return I?I[1]:"Anonymous function: "+S}y.getServiceIdentifierAsString=p,y.listRegisteredBindingsForServiceIdentifier=function(c,S,I){var m="",r=I(c,S);return r.length!==0&&(m=`
Registered bindings:`,r.forEach(function(s){var d="Object";s.implementationType!==null&&(d=b(s.implementationType)),m=m+`
 `+d,s.constraint.metaData&&(m=m+" - "+s.constraint.metaData)})),m},y.circularDependencyToException=function c(S){S.childRequests.forEach(function(I){if(function r(s,d){return s.parentRequest!==null&&(s.parentRequest.serviceIdentifier===d||r(s.parentRequest,d))}(I,I.serviceIdentifier)){var m=function(r){return function s(d,C){C===void 0&&(C=[]);var E=p(d.serviceIdentifier);return C.push(E),d.parentRequest!==null?s(d.parentRequest,C):C}(r).reverse().join(" --> ")}(I);throw new Error(u.CIRCULAR_DEPENDENCY+" "+m)}c(I)})},y.listMetadataForTarget=function(c,S){if(S.isTagged()||S.isNamed()){var I="",m=S.getNamedTag(),r=S.getCustomTags();return m!==null&&(I+=m.toString()+`
`),r!==null&&r.forEach(function(s){I+=s.toString()+`
`})," "+c+`
 `+c+" - "+I}return" "+c},y.getFunctionName=b},function(i,y,t){"use strict";t.d(y,"a",function(){return c});var n=t(17);function u(S){return Math.sqrt(S[0]*S[0]+S[1]*S[1])}function p(S,I){return u(S)*u(I)?(S[0]*I[0]+S[1]*I[1])/(u(S)*u(I)):1}function b(S,I){return(S[0]*I[1]<S[1]*I[0]?-1:1)*Math.acos(p(S,I))}function c(S,I){var m=I[1],r=I[2],s=Object(n.m)(Object(n.o)(I[3]),2*Math.PI),d=I[4],C=I[5],E=S[0],A=S[1],f=I[6],x=I[7],j=Math.cos(s)*(E-f)/2+Math.sin(s)*(A-x)/2,P=-1*Math.sin(s)*(E-f)/2+Math.cos(s)*(A-x)/2,W=j*j/(m*m)+P*P/(r*r);W>1&&(m*=Math.sqrt(W),r*=Math.sqrt(W));var X=m*m*(P*P)+r*r*(j*j),$=X?Math.sqrt((m*m*(r*r)-X)/X):1;d===C&&($*=-1),isNaN($)&&($=0);var ft=r?$*m*P/r:0,Z=m?$*-r*j/m:0,lt=(E+f)/2+Math.cos(s)*ft-Math.sin(s)*Z,pt=(A+x)/2+Math.sin(s)*ft+Math.cos(s)*Z,gt=[(j-ft)/m,(P-Z)/r],ut=[(-1*j-ft)/m,(-1*P-Z)/r],Bt=b([1,0],gt),Lt=b(gt,ut);return p(gt,ut)<=-1&&(Lt=Math.PI),p(gt,ut)>=1&&(Lt=0),C===0&&Lt>0&&(Lt-=2*Math.PI),C===1&&Lt<0&&(Lt+=2*Math.PI),{cx:lt,cy:pt,rx:Object(n.j)(S,[f,x])?0:m,ry:Object(n.j)(S,[f,x])?0:r,startAngle:Bt,endAngle:Bt+Lt,xRotation:s,arcFlag:d,sweepFlag:C}}},function(i,y){function t(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?i.exports=t=function(p){return typeof p}:i.exports=t=function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},t(n)}i.exports=t},function(i,y,t){"use strict";var n=t(1),u=t(52),p=t(62),b=t(122),c=t(0),S=t(5),I=t(45),m=t(14),r=S.n.cloneEvent,s=S.n.isViewportChanged,d=function(dt){function mt(bt){var wt=dt.call(this,bt)||this;return wt.extendEvents=[],wt.dragging=!1,wt.preItem=null,wt.graph=bt,wt.destroyed=!1,wt.initEvents(),wt}return Object(n.b)(mt,dt),mt.prototype.initEvents=function(){var bt=this.graph,wt=this.extendEvents,J=wt===void 0?[]:wt,ct=bt.get("canvas"),it=ct.get("el"),_=Object(c.J)(this,"onCanvasEvents"),R=Object(c.J)(this,"onExtendEvents"),Q=Object(c.J)(this,"onWheelEvent");ct.off("*").on("*",_),this.canvasHandler=_,J.push(Object(m.a)(it,"DOMMouseScroll",Q)),J.push(Object(m.a)(it,"mousewheel",Q)),typeof window!="undefined"&&(J.push(Object(m.a)(window,"keydown",R)),J.push(Object(m.a)(window,"keyup",R)),J.push(Object(m.a)(window,"focus",R)))},mt.getItemRoot=function(bt){for(;bt&&!bt.get("item");)bt=bt.get("parent");return bt},mt.prototype.onCanvasEvents=function(bt){var wt=this.graph,J=wt.get("canvas"),ct=bt.target,it=bt.type;bt.canvasX=bt.x,bt.canvasY=bt.y;var _={x:bt.canvasX,y:bt.canvasY},R=wt.get("group").getMatrix();if(R||(R=[1,0,0,0,1,0,0,0,1]),s(R)&&(_=wt.getPointByClient(bt.clientX,bt.clientY)),bt.x=_.x,bt.y=_.y,bt.currentTarget=wt,ct===J)return it==="mousemove"&&this.handleMouseMove(bt,"canvas"),bt.target=J,bt.item=null,wt.emit(it,bt),void wt.emit("canvas:"+it,bt);var Q=mt.getItemRoot(ct);if(Q){var k=Q.get("item");if(!k.destroyed){var g=k.getType();if(bt.target=ct,bt.item=k,bt.canvasX===bt.x&&bt.canvasY===bt.y){var O=wt.getCanvasByPoint(bt.x,bt.y);bt.canvasX=O.x,bt.canvasY=O.y}wt.emit(it,bt),bt.name&&!bt.name.includes(":")?wt.emit(g+":"+it,bt):wt.emit(bt.name,bt),it==="dragstart"&&(this.dragging=!0),it==="dragend"&&(this.dragging=!1),it==="mousemove"&&this.handleMouseMove(bt,g)}}else wt.emit(it,bt)},mt.prototype.onExtendEvents=function(bt){this.graph.emit(bt.type,bt)},mt.prototype.onWheelEvent=function(bt){Object(c.s)(bt.wheelDelta)&&(bt.wheelDelta=-bt.detail),this.graph.emit("wheel",bt)},mt.prototype.handleMouseMove=function(bt,wt){var J=this.graph,ct=this.preItem,it=J.get("canvas"),_=bt.target===it?null:bt.item;bt=r(bt),ct&&ct!==_&&!ct.destroyed&&(bt.item=ct,this.emitCustomEvent(ct.getType(),"mouseleave",bt),this.dragging&&this.emitCustomEvent(ct.getType(),"dragleave",bt)),_&&ct!==_&&(bt.item=_,this.emitCustomEvent(wt,"mouseenter",bt),this.dragging&&this.emitCustomEvent(wt,"dragenter",bt)),this.preItem=_},mt.prototype.emitCustomEvent=function(bt,wt,J){J.type=wt,this.graph.emit(bt+":"+wt,J)},mt.prototype.destroy=function(){var bt=this.graph,wt=this.canvasHandler,J=this.extendEvents;bt.get("canvas").off("*",wt),Object(c.f)(J,function(ct){ct.remove()}),this.dragging=!1,this.preItem=null,this.extendEvents.length=0,this.canvasHandler=null,this.destroyed=!0},mt}(S.a),C=t(69),E=t(254),A=t.n(E);function f(){return A()(`!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=436)}([function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.METADATA_KEY=void 0;var r=n(17);e.METADATA_KEY=r;var o=n(374);Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return o.Container}});var i=n(30);Object.defineProperty(e,"BindingScopeEnum",{enumerable:!0,get:function(){return i.BindingScopeEnum}}),Object.defineProperty(e,"BindingTypeEnum",{enumerable:!0,get:function(){return i.BindingTypeEnum}}),Object.defineProperty(e,"TargetTypeEnum",{enumerable:!0,get:function(){return i.TargetTypeEnum}});var a=n(390);Object.defineProperty(e,"AsyncContainerModule",{enumerable:!0,get:function(){return a.AsyncContainerModule}}),Object.defineProperty(e,"ContainerModule",{enumerable:!0,get:function(){return a.ContainerModule}});var u=n(391);Object.defineProperty(e,"injectable",{enumerable:!0,get:function(){return u.injectable}});var s=n(392);Object.defineProperty(e,"tagged",{enumerable:!0,get:function(){return s.tagged}});var c=n(393);Object.defineProperty(e,"named",{enumerable:!0,get:function(){return c.named}});var f=n(164);Object.defineProperty(e,"inject",{enumerable:!0,get:function(){return f.inject}}),Object.defineProperty(e,"LazyServiceIdentifer",{enumerable:!0,get:function(){return f.LazyServiceIdentifer}});var l=n(394);Object.defineProperty(e,"optional",{enumerable:!0,get:function(){return l.optional}});var h=n(395);Object.defineProperty(e,"unmanaged",{enumerable:!0,get:function(){return h.unmanaged}});var d=n(396);Object.defineProperty(e,"multiInject",{enumerable:!0,get:function(){return d.multiInject}});var p=n(397);Object.defineProperty(e,"targetName",{enumerable:!0,get:function(){return p.targetName}});var v=n(398);Object.defineProperty(e,"postConstruct",{enumerable:!0,get:function(){return v.postConstruct}});var m=n(162);Object.defineProperty(e,"MetadataReader",{enumerable:!0,get:function(){return m.MetadataReader}});var y=n(40);Object.defineProperty(e,"id",{enumerable:!0,get:function(){return y.id}});var g=n(33);Object.defineProperty(e,"decorate",{enumerable:!0,get:function(){return g.decorate}});var b=n(167);Object.defineProperty(e,"traverseAncerstors",{enumerable:!0,get:function(){return b.traverseAncerstors}}),Object.defineProperty(e,"taggedConstraint",{enumerable:!0,get:function(){return b.taggedConstraint}}),Object.defineProperty(e,"namedConstraint",{enumerable:!0,get:function(){return b.namedConstraint}}),Object.defineProperty(e,"typeConstraint",{enumerable:!0,get:function(){return b.typeConstraint}});var _=n(50);Object.defineProperty(e,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return _.getServiceIdentifierAsString}});var x=n(399);Object.defineProperty(e,"multiBindToService",{enumerable:!0,get:function(){return x.multiBindToService}})},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.TextureCompressionBC="texture-compression-bc"}(e.ExtensionName||(e.ExtensionName={})),function(t){t.ClampToEdge="clamp-to-edge",t.Repeat="repeat",t.MirrorRepeat="mirror-repeat"}(e.AddressMode||(e.AddressMode={})),function(t){t.UniformBuffer="uniform-buffer",t.StorageBuffer="storage-buffer",t.ReadonlyStorageBuffer="readonly-storage-buffer",t.Sampler="sampler",t.ComparisonSampler="comparison-sampler",t.SampledTexture="sampled-texture",t.ReadonlyStorageTexture="readonly-storage-texture",t.WriteonlyStorageTexture="writeonly-storage-texture"}(e.BindingType||(e.BindingType={})),function(t){t.Zero="zero",t.One="one",t.SrcColor="src-color",t.OneMinusSrcColor="one-minus-src-color",t.SrcAlpha="src-alpha",t.OneMinusSrcAlpha="one-minus-src-alpha",t.DstColor="dst-color",t.OneMinusDstColor="one-minus-dst-color",t.DstAlpha="dst-alpha",t.OneMinusDstAlpha="one-minus-dst-alpha",t.SrcAlphaSaturated="src-alpha-saturated",t.BlendColor="blend-color",t.OneMinusBlendColor="one-minus-blend-color"}(e.BlendFactor||(e.BlendFactor={})),function(t){t.Add="add",t.Subtract="subtract",t.ReverseSubtract="reverse-subtract",t.Min="min",t.Max="max"}(e.BlendOperation||(e.BlendOperation={})),function(t){t.Never="never",t.Less="less",t.Equal="equal",t.LessEqual="less-equal",t.Greater="greater",t.NotEqual="not-equal",t.GreaterEqual="greater-equal",t.Always="always"}(e.CompareFunction||(e.CompareFunction={})),function(t){t.None="none",t.Front="front",t.Back="back"}(e.CullMode||(e.CullMode={})),function(t){t.Nearest="nearest",t.Linear="linear"}(e.FilterMode||(e.FilterMode={})),function(t){t.CCW="ccw",t.CW="cw"}(e.FrontFace||(e.FrontFace={})),function(t){t.Uint16="uint16",t.Uint32="uint32"}(e.IndexFormat||(e.IndexFormat={})),function(t){t.Vertex="vertex",t.Instance="instance"}(e.InputStepMode||(e.InputStepMode={})),function(t){t.Load="load"}(e.LoadOp||(e.LoadOp={})),function(t){t.PointList="point-list",t.LineList="line-list",t.LineStrip="line-strip",t.TriangleList="triangle-list",t.TriangleStrip="triangle-strip"}(e.PrimitiveTopology||(e.PrimitiveTopology={})),function(t){t.Keep="keep",t.Zero="zero",t.Replace="replace",t.Invert="invert",t.IncrementClamp="increment-clamp",t.DecrementClamp="decrement-clamp",t.IncrementWrap="increment-wrap",t.DecrementWrap="decrement-wrap"}(e.StencilOperation||(e.StencilOperation={})),function(t){t.Store="store",t.Clear="clear"}(e.StoreOp||(e.StoreOp={})),function(t){t.E1d="1d",t.E2d="2d",t.E3d="3d"}(e.TextureDimension||(e.TextureDimension={})),function(t){t.R8Unorm="r8unorm",t.R8Snorm="r8snorm",t.R8Uint="r8uint",t.R8Sint="r8sint",t.R16Uint="r16uint",t.R16Sint="r16sint",t.R16Float="r16float",t.RG8Unorm="rg8unorm",t.RG8Snorm="rg8snorm",t.RG8Uint="rg8uint",t.RG8Sint="rg8sint",t.R32Uint="r32uint",t.R32Sint="r32sint",t.R32Float="r32float",t.RG16Uint="rg16uint",t.RG16Sint="rg16sint",t.RG16Float="rg16float",t.RGBA8Unorm="rgba8unorm",t.RGBA8UnormSRGB="rgba8unorm-srgb",t.RGBA8Snorm="rgba8snorm",t.RGBA8Uint="rgba8uint",t.RGBA8Sint="rgba8sint",t.BGRA8Unorm="bgra8unorm",t.BGRA8UnormSRGB="bgra8unorm-srgb",t.RGB10A2Unorm="rgb10a2unorm",t.RG11B10Float="rg11b10float",t.RG32Uint="rg32uint",t.RG32Sint="rg32sint",t.RG32Float="rg32float",t.RGBA16Uint="rgba16uint",t.RGBA16Sint="rgba16sint",t.RGBA16Float="rgba16float",t.RGBA32Uint="rgba32uint",t.RGBA32Sint="rgba32sint",t.RGBA32Float="rgba32float",t.Depth32Float="depth32float",t.Depth24Plus="depth24plus",t.Depth24PlusStencil8="depth24plus-stencil8"}(e.TextureFormat||(e.TextureFormat={})),function(t){t.Float="float",t.Sint="sint",t.Uint="uint"}(e.TextureComponentType||(e.TextureComponentType={})),function(t){t.E1d="1d",t.E2d="2d",t.E2dArray="2d-array",t.Cube="cube",t.CubeArray="cube-array",t.E3d="3d"}(e.TextureViewDimension||(e.TextureViewDimension={})),function(t){t.Uchar2="uchar2",t.Uchar4="uchar4",t.Char2="char2",t.Char4="char4",t.Uchar2Norm="uchar2norm",t.Uchar4Norm="uchar4norm",t.Char2Norm="char2norm",t.Char4Norm="char4norm",t.Ushort2="ushort2",t.Ushort4="ushort4",t.Short2="short2",t.Short4="short4",t.Ushort2Norm="ushort2norm",t.Ushort4Norm="ushort4norm",t.Short2Norm="short2norm",t.Short4Norm="short4norm",t.Half2="half2",t.Half4="half4",t.Float="float",t.Float2="float2",t.Float3="float3",t.Float4="float4",t.Uint="uint",t.Uint2="uint2",t.Uint3="uint3",t.Uint4="uint4",t.Int="int",t.Int2="int2",t.Int3="int3",t.Int4="int4"}(e.VertexFormat||(e.VertexFormat={})),function(t){t.All="all",t.StencilOnly="stencil-only",t.DepthOnly="depth-only"}(e.TextureAspect||(e.TextureAspect={})),function(t){t.Error="error",t.Warning="warning",t.Info="info"}(e.CompilationMessageType||(e.CompilationMessageType={})),function(t){t.Occlusion="occlusion"}(e.QueryType||(e.QueryType={})),function(t){t[t.MapRead=1]="MapRead",t[t.MapWrite=2]="MapWrite",t[t.CopySrc=4]="CopySrc",t[t.CopyDst=8]="CopyDst",t[t.Index=16]="Index",t[t.Vertex=32]="Vertex",t[t.Uniform=64]="Uniform",t[t.Storage=128]="Storage",t[t.Indirect=256]="Indirect",t[t.QueryResolve=512]="QueryResolve"}(e.BufferUsage||(e.BufferUsage={})),function(t){t[t.Red=1]="Red",t[t.Green=2]="Green",t[t.Blue=4]="Blue",t[t.Alpha=8]="Alpha",t[t.All=15]="All"}(e.ColorWrite||(e.ColorWrite={})),function(t){t[t.Vertex=1]="Vertex",t[t.Fragment=2]="Fragment",t[t.Compute=4]="Compute"}(e.ShaderStage||(e.ShaderStage={})),function(t){t[t.CopySrc=1]="CopySrc",t[t.CopyDst=2]="CopyDst",t[t.Sampled=4]="Sampled",t[t.Storage=8]="Storage",t[t.OutputAttachment=16]="OutputAttachment"}(e.TextureUsage||(e.TextureUsage={})),function(t){t[t.Read=1]="Read",t[t.Write=2]="Write"}(e.MapMode||(e.MapMode={}))},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){t.exports=n(370)},function(t,e){t.exports=function(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}},function(t,e){t.exports=function(t,e,n,r,o){var i={};return Object.keys(r).forEach((function(t){i[t]=r[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}},function(t,e){function n(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function u(t){n(a,o,i,u,s,"next",t)}function s(t){n(a,o,i,u,s,"throw",t)}u(void 0)}))}}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(402),o=n(403),i=n(160),a=n(404);t.exports=function(t){return r(t)||o(t)||i(t)||a()}},function(t,e,n){var r;try{r={cloneDeep:n(310),constant:n(84),defaults:n(311),each:n(123),filter:n(126),find:n(312),flatten:n(154),forEach:n(124),forIn:n(317),has:n(137),isUndefined:n(138),last:n(318),map:n(139),mapValues:n(319),max:n(320),merge:n(322),min:n(327),minBy:n(328),now:n(329),pick:n(330),range:n(335),reduce:n(141),sortBy:n(338),uniqueId:n(343),values:n(147),zipObject:n(344)}}catch(t){}r||(r=window._),t.exports=r},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(400);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){var r=n(51),o=n(12);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e}},function(t,e){t.exports=function(t,e){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.POST_CONSTRUCT=e.DESIGN_PARAM_TYPES=e.PARAM_TYPES=e.TAGGED_PROP=e.TAGGED=e.MULTI_INJECT_TAG=e.INJECT_TAG=e.OPTIONAL_TAG=e.UNMANAGED_TAG=e.NAME_TAG=e.NAMED_TAG=void 0,e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct"},function(t,e,n){"use strict";var r=n(11),o=n(23).Graph;function i(t,e,n,o){var i;do{i=r.uniqueId(o)}while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function a(t){return r.max(r.map(t.nodes(),(function(e){var n=t.node(e).rank;if(!r.isUndefined(n))return n})))}t.exports={addDummyNode:i,simplify:function(t){var e=(new o).setGraph(t.graph());return r.forEach(t.nodes(),(function(n){e.setNode(n,t.node(n))})),r.forEach(t.edges(),(function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},o=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})})),e},asNonCompoundGraph:function(t){var e=new o({multigraph:t.isMultigraph()}).setGraph(t.graph());return r.forEach(t.nodes(),(function(n){t.children(n).length||e.setNode(n,t.node(n))})),r.forEach(t.edges(),(function(n){e.setEdge(n,t.edge(n))})),e},successorWeights:function(t){var e=r.map(t.nodes(),(function(e){var n={};return r.forEach(t.outEdges(e),(function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight})),n}));return r.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=r.map(t.nodes(),(function(e){var n={};return r.forEach(t.inEdges(e),(function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight})),n}));return r.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,o=t.x,i=t.y,a=e.x-o,u=e.y-i,s=t.width/2,c=t.height/2;if(!a&&!u)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(u)*s>Math.abs(a)*c?(u<0&&(c=-c),n=c*a/u,r=c):(a<0&&(s=-s),n=s,r=s*u/a);return{x:o+n,y:i+r}},buildLayerMatrix:function(t){var e=r.map(r.range(a(t)+1),(function(){return[]}));return r.forEach(t.nodes(),(function(n){var o=t.node(n),i=o.rank;r.isUndefined(i)||(e[i][o.order]=n)})),e},normalizeRanks:function(t){var e=r.min(r.map(t.nodes(),(function(e){return t.node(e).rank})));r.forEach(t.nodes(),(function(n){var o=t.node(n);r.has(o,"rank")&&(o.rank-=e)}))},removeEmptyRanks:function(t){var e=r.min(r.map(t.nodes(),(function(e){return t.node(e).rank}))),n=[];r.forEach(t.nodes(),(function(r){var o=t.node(r).rank-e;n[o]||(n[o]=[]),n[o].push(r)}));var o=0,i=t.graph().nodeRankFactor;r.forEach(n,(function(e,n){r.isUndefined(e)&&n%i!=0?--o:o&&r.forEach(e,(function(e){t.node(e).rank+=o}))}))},addBorderNode:function(t,e,n,r){var o={width:0,height:0};arguments.length>=4&&(o.rank=n,o.order=r);return i(t,"border",o,e)},maxRank:a,partition:function(t,e){var n={lhs:[],rhs:[]};return r.forEach(t,(function(t){e(t)?n.lhs.push(t):n.rhs.push(t)})),n},time:function(t,e){var n=r.now();try{return e()}finally{console.log(t+" time: "+(r.now()-n)+"ms")}},notime:function(t,e){return e()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STACK_OVERFLOW=e.CIRCULAR_DEPENDENCY_IN_FACTORY=e.POST_CONSTRUCT_ERROR=e.MULTIPLE_POST_CONSTRUCT_METHODS=e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=e.ARGUMENTS_LENGTH_MISMATCH=e.INVALID_DECORATOR_OPERATION=e.INVALID_TO_SELF_VALUE=e.INVALID_FUNCTION_BINDING=e.INVALID_MIDDLEWARE_RETURN=e.NO_MORE_SNAPSHOTS_AVAILABLE=e.INVALID_BINDING_TYPE=e.NOT_IMPLEMENTED=e.CIRCULAR_DEPENDENCY=e.UNDEFINED_INJECT_ANNOTATION=e.MISSING_INJECT_ANNOTATION=e.MISSING_INJECTABLE_ANNOTATION=e.NOT_REGISTERED=e.CANNOT_UNBIND=e.AMBIGUOUS_MATCH=e.KEY_NOT_FOUND=e.NULL_ARGUMENT=e.DUPLICATED_METADATA=e.DUPLICATED_INJECTABLE_DECORATOR=void 0,e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",e.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",e.ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",e.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]},e.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.STACK_OVERFLOW="Maximum call stack size exceeded"},function(t,e,n){var r;try{r={clone:n(199),constant:n(84),each:n(123),filter:n(126),has:n(137),isArray:n(13),isEmpty:n(275),isFunction:n(46),isUndefined:n(138),keys:n(32),map:n(139),reduce:n(141),size:n(278),transform:n(284),union:n(285),values:n(147)}}catch(t){}r||(r=window._),t.exports=r},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e=n(t);return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var r=n(232),o=n(63),i=n(79),a=i&&i.isTypedArray,u=a?o(a):r;t.exports=u},function(t,e,n){var r;try{r=n(197)}catch(t){}r||(r=window.graphlib),t.exports=r},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(105),i="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,a=o||i||Function("return this")();t.exports=a},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return null!=t&&"object"==n(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var r=n(17),o=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===r.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();e.Metadata=o},function(t,e){},function(t,e,n){var r=n(46),o=n(78);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(255),i=n(265),a=n(39),u=n(13),s=n(272);t.exports=function(t){return"function"==typeof t?t:null==t?a:"object"==r(t)?u(t)?i(t[0],t[1]):o(t):s(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TargetTypeEnum=e.BindingTypeEnum=e.BindingScopeEnum=void 0;e.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};e.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};e.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},function(t,e,n){var r=n(42),o=n(211),i=n(212),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?o(t):i(t)}},function(t,e,n){var r=n(109),o=n(80),i=n(28);t.exports=function(t){return i(t)?r(t):o(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagProperty=e.tagParameter=e.decorate=void 0;var r=n(19),o=n(17);function i(t,e,n,o,i){var a={},u="number"==typeof i,s=void 0!==i&&u?i.toString():n;if(u&&void 0!==n)throw new Error(r.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(a=Reflect.getMetadata(t,e));var c=a[s];if(Array.isArray(c))for(var f=0,l=c;f<l.length;f++){var h=l[f];if(h.key===o.key)throw new Error(r.DUPLICATED_METADATA+" "+h.key.toString())}else c=[];c.push(o),a[s]=c,Reflect.defineMetadata(t,a,e)}function a(t,e){Reflect.decorate(t,e)}function u(t,e){return function(n,r){e(n,r,t)}}e.tagParameter=function(t,e,n,r){i(o.TAGGED,t,e,r,n)},e.tagProperty=function(t,e,n){i(o.TAGGED_PROP,t.constructor,e,n)},e.decorate=function(t,e,n){"number"==typeof n?a([u(n,t)],e):"string"==typeof n?Reflect.decorate([t],e,n):a([t],e)}},function(t,e,n){var r=n(371),o=n(372),i=n(160),a=n(373);t.exports=function(t,e){return r(t)||o(t,e)||i(t,e)||a()}},function(t,e,n){var r=n(31),o=n(25);t.exports=function(t){return"number"==typeof t||o(t)&&"[object Number]"==r(t)}},function(t,e,n){var r=n(178),o=n(177),i=n(185),a=n(100),u=n(186),s=[0,0];t.exports.computeMiter=function(t,e,n,a,c){return r(t,n,a),i(t,t),o(e,-t[1],t[0]),o(s,-n[1],n[0]),c/u(e,s)},t.exports.normal=function(t,e){return o(t,-e[1],e[0]),t},t.exports.direction=function(t,e,n){return a(t,e,n),i(t,t),t}},function(t,e,n){var r=n(210),o=n(215);t.exports=function(t,e){var n=o(t,e);return r(n)?n:void 0}},function(t,e,n){var r=n(109),o=n(235),i=n(28);t.exports=function(t){return i(t)?r(t,!0):o(t)}},function(t,e){t.exports=function(t){return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.id=void 0;var r=0;e.id=function(){return r++}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(24).Symbol;t.exports=r},function(t,e,n){(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(24),i=n(231),a="object"==r(e)&&e&&!e.nodeType&&e,u=a&&"object"==r(t)&&t&&!t.nodeType&&t,s=u&&u.exports===a?o.Buffer:void 0,c=(s?s.isBuffer:void 0)||i;t.exports=c}).call(this,n(61)(t))},function(t,e,n){var r=n(240),o=n(75),i=n(241),a=n(118),u=n(242),s=n(31),c=n(107),f=c(r),l=c(o),h=c(i),d=c(a),p=c(u),v=s;(r&&"[object DataView]"!=v(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=v(new o)||i&&"[object Promise]"!=v(i.resolve())||a&&"[object Set]"!=v(new a)||u&&"[object WeakMap]"!=v(new u))&&(v=function(t){var e=s(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case f:return"[object DataView]";case l:return"[object Map]";case h:return"[object Promise]";case d:return"[object Set]";case p:return"[object WeakMap]"}return e}),t.exports=v},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(31),i=n(25);t.exports=function(t){return"symbol"==r(t)||i(t)&&"[object Symbol]"==o(t)}},function(t,e,n){var r=n(31),o=n(21);t.exports=function(t){if(!o(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){var r=n(59),o=n(60);t.exports=function(t,e,n,i){var a=!n;n||(n={});for(var u=-1,s=e.length;++u<s;){var c=e[u],f=i?i(n[c],t[c],c,n,t):void 0;void 0===f&&(f=t[c]),a?o(n,c,f):r(n,c,f)}return n}},function(t,e,n){var r=n(230),o=n(25),i=Object.prototype,a=i.hasOwnProperty,u=i.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(t){return o(t)&&a.call(t,"callee")&&!u.call(t,"callee")};t.exports=s},function(t,e,n){var r=n(45);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.circularDependencyToException=e.listMetadataForTarget=e.listRegisteredBindingsForServiceIdentifier=e.getServiceIdentifierAsString=e.getFunctionName=void 0;var o=n(19);function i(t){return"function"==typeof t?t.name:"symbol"===r(t)?t.toString():t}function a(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\\s*([^\\s(]+)/);return n?n[1]:"Anonymous function: "+e}e.getServiceIdentifierAsString=i,e.listRegisteredBindingsForServiceIdentifier=function(t,e,n){var r="",o=n(t,e);return 0!==o.length&&(r="\\nRegistered bindings:",o.forEach((function(t){var e="Object";null!==t.implementationType&&(e=a(t.implementationType)),r=r+"\\n "+e,t.constraint.metaData&&(r=r+" - "+t.constraint.metaData)}))),r},e.circularDependencyToException=function t(e){e.childRequests.forEach((function(e){if(function t(e,n){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===n||t(e.parentRequest,n))}(e,e.serviceIdentifier)){var n=function(t){return function t(e,n){void 0===n&&(n=[]);var r=i(e.serviceIdentifier);return n.push(r),null!==e.parentRequest?t(e.parentRequest,n):n}(t).reverse().join(" --\\x3e ")}(e);throw new Error(o.CIRCULAR_DEPENDENCY+" "+n)}t(e)}))},e.listMetadataForTarget=function(t,e){if(e.isTagged()||e.isNamed()){var n="",r=e.getNamedTag(),o=e.getCustomTags();return null!==r&&(n+=r.toString()+"\\n"),null!==o&&o.forEach((function(t){n+=t.toString()+"\\n"}))," "+t+"\\n "+t+" - "+n}return" "+t},e.getFunctionName=a},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e){t.exports=function(t){return null==t}},function(t,e,n){t.exports={EPSILON:n(175),create:n(176),clone:n(405),fromValues:n(406),copy:n(407),set:n(177),equals:n(408),exactEquals:n(409),add:n(178),subtract:n(100),sub:n(410),multiply:n(179),mul:n(411),divide:n(180),div:n(412),inverse:n(413),min:n(414),max:n(415),rotate:n(416),floor:n(417),ceil:n(418),round:n(419),scale:n(420),scaleAndAdd:n(421),distance:n(181),dist:n(422),squaredDistance:n(182),sqrDist:n(423),length:n(183),len:n(424),squaredLength:n(184),sqrLen:n(425),negate:n(426),normalize:n(185),dot:n(186),cross:n(427),lerp:n(428),random:n(429),transformMat2:n(430),transformMat2d:n(431),transformMat3:n(432),transformMat4:n(433),forEach:n(434),limit:n(435)}},function(t,e,n){var r=n(55),o=n(205),i=n(206),a=n(207),u=n(208),s=n(209);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=u,c.prototype.set=s,t.exports=c},function(t,e,n){var r=n(200),o=n(201),i=n(202),a=n(203),u=n(204);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e,n){var r=n(41);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(37)(Object,"create");t.exports=r},function(t,e,n){var r=n(224);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(60),o=n(41),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];i.call(t,e)&&o(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(108);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=/^(?:0|[1-9]\\d*)$/;t.exports=function(t,e){var o=n(t);return!!(e=null==e?9007199254740991:e)&&("number"==o||"symbol"!=o&&r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(110)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){var r=n(85),o=n(253)(r);t.exports=o},function(t,e,n){var r=n(68),o=n(49);t.exports=function(t,e){for(var n=0,i=(e=r(e,t)).length;null!=t&&n<i;)t=t[o(e[n++])];return n&&n==i?t:void 0}},function(t,e,n){var r=n(13),o=n(88),i=n(267),a=n(133);t.exports=function(t,e){return r(t)?t:o(t,e)?[t]:i(a(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},function(t,e,n){var r=n(39),o=n(142),i=n(143);t.exports=function(t,e){return i(o(t,e,r),t+"")}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(41),i=n(28),a=n(62),u=n(21);t.exports=function(t,e,n){if(!u(n))return!1;var s=r(e);return!!("number"==s?i(n)&&a(e,n.length):"string"==s&&e in n)&&o(n[e],t)}},function(t,e,n){"use strict";var r=n(11);t.exports={longestPath:function(t){var e={};r.forEach(t.sources(),(function n(o){var i=t.node(o);if(r.has(e,o))return i.rank;e[o]=!0;var a=r.min(r.map(t.outEdges(o),(function(e){return n(e.w)-t.edge(e).minlen})));return a!==Number.POSITIVE_INFINITY&&null!=a||(a=0),i.rank=a}))},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},function(t,e){},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(20);t.exports=i;function i(t){this._isDirected=!o.has(t,"directed")||t.directed,this._isMultigraph=!!o.has(t,"multigraph")&&t.multigraph,this._isCompound=!!o.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=o.constant(void 0),this._defaultEdgeLabelFn=o.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function a(t,e){t[e]?t[e]++:t[e]=1}function u(t,e){--t[e]||delete t[e]}function s(t,e,n,r){var i=""+e,a=""+n;if(!t&&i>a){var u=i;i=a,a=u}return i+""+a+""+(o.isUndefined(r)?"\\0":r)}function c(t,e,n,r){var o=""+e,i=""+n;if(!t&&o>i){var a=o;o=i,i=a}var u={v:o,w:i};return r&&(u.name=r),u}function f(t,e){return s(t,e.v,e.w,e.name)}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(t){return this._label=t,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(t){return o.isFunction(t)||(t=o.constant(t)),this._defaultNodeLabelFn=t,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return o.keys(this._nodes)},i.prototype.sources=function(){var t=this;return o.filter(this.nodes(),(function(e){return o.isEmpty(t._in[e])}))},i.prototype.sinks=function(){var t=this;return o.filter(this.nodes(),(function(e){return o.isEmpty(t._out[e])}))},i.prototype.setNodes=function(t,e){var n=arguments,r=this;return o.each(t,(function(t){n.length>1?r.setNode(t,e):r.setNode(t)})),this},i.prototype.setNode=function(t,e){return o.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]="\\0",this._children[t]={},this._children["\\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},i.prototype.node=function(t){return this._nodes[t]},i.prototype.hasNode=function(t){return o.has(this._nodes,t)},i.prototype.removeNode=function(t){var e=this;if(o.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],o.each(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),o.each(o.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],o.each(o.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},i.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(o.isUndefined(e))e="\\0";else{for(var n=e+="";!o.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},i.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},i.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if("\\0"!==e)return e}},i.prototype.children=function(t){if(o.isUndefined(t)&&(t="\\0"),this._isCompound){var e=this._children[t];if(e)return o.keys(e)}else{if("\\0"===t)return this.nodes();if(this.hasNode(t))return[]}},i.prototype.predecessors=function(t){var e=this._preds[t];if(e)return o.keys(e)},i.prototype.successors=function(t){var e=this._sucs[t];if(e)return o.keys(e)},i.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return o.union(e,this.successors(t))},i.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},i.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;o.each(this._nodes,(function(n,r){t(r)&&e.setNode(r,n)})),o.each(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))}));var r={};return this._isCompound&&o.each(e.nodes(),(function(t){e.setParent(t,function t(o){var i=n.parent(o);return void 0===i||e.hasNode(i)?(r[o]=i,i):i in r?r[i]:t(i)}(t))})),e},i.prototype.setDefaultEdgeLabel=function(t){return o.isFunction(t)||(t=o.constant(t)),this._defaultEdgeLabelFn=t,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return o.values(this._edgeObjs)},i.prototype.setPath=function(t,e){var n=this,r=arguments;return o.reduce(t,(function(t,o){return r.length>1?n.setEdge(t,o,e):n.setEdge(t,o),o})),this},i.prototype.setEdge=function(){var t,e,n,i,u=!1,f=arguments[0];"object"===r(f)&&null!==f&&"v"in f?(t=f.v,e=f.w,n=f.name,2===arguments.length&&(i=arguments[1],u=!0)):(t=f,e=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],u=!0)),t=""+t,e=""+e,o.isUndefined(n)||(n=""+n);var l=s(this._isDirected,t,e,n);if(o.has(this._edgeLabels,l))return u&&(this._edgeLabels[l]=i),this;if(!o.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[l]=u?i:this._defaultEdgeLabelFn(t,e,n);var h=c(this._isDirected,t,e,n);return t=h.v,e=h.w,Object.freeze(h),this._edgeObjs[l]=h,a(this._preds[e],t),a(this._sucs[t],e),this._in[e][l]=h,this._out[t][l]=h,this._edgeCount++,this},i.prototype.edge=function(t,e,n){var r=1===arguments.length?f(this._isDirected,arguments[0]):s(this._isDirected,t,e,n);return this._edgeLabels[r]},i.prototype.hasEdge=function(t,e,n){var r=1===arguments.length?f(this._isDirected,arguments[0]):s(this._isDirected,t,e,n);return o.has(this._edgeLabels,r)},i.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?f(this._isDirected,arguments[0]):s(this._isDirected,t,e,n),o=this._edgeObjs[r];return o&&(t=o.v,e=o.w,delete this._edgeLabels[r],delete this._edgeObjs[r],u(this._preds[e],t),u(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},i.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var r=o.values(n);return e?o.filter(r,(function(t){return t.v===e})):r}},i.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var r=o.values(n);return e?o.filter(r,(function(t){return t.w===e})):r}},i.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},function(t,e,n){var r=n(37)(n(24),"Map");t.exports=r},function(t,e,n){var r=n(216),o=n(223),i=n(225),a=n(226),u=n(227);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e,n){(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(105),i="object"==r(e)&&e&&!e.nodeType&&e,a=i&&"object"==r(t)&&t&&!t.nodeType&&t,u=a&&a.exports===i&&o.process,s=function(){try{var t=a&&a.require&&a.require("util").types;return t||u&&u.binding&&u.binding("util")}catch(t){}}();t.exports=s}).call(this,n(61)(t))},function(t,e,n){var r=n(64),o=n(233),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=[];for(var n in Object(t))i.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var r=n(113),o=n(114),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,u=a?function(t){return null==t?[]:(t=Object(t),r(a(t),(function(e){return i.call(t,e)})))}:o;t.exports=u},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},function(t,e,n){var r=n(119);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e,n){var r=n(86),o=n(32);t.exports=function(t,e){return t&&r(t,e,o)}},function(t,e,n){var r=n(252)();t.exports=r},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(13),i=n(45),a=/\\.|\\[(?:[^[\\]]*|(["'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,u=/^\\w*$/;t.exports=function(t,e){if(o(t))return!1;var n=r(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(u.test(t)||!a.test(t)||null!=e&&t in Object(e))}},function(t,e,n){var r=n(82),o=n(286);t.exports=function t(e,n,i,a,u){var s=-1,c=e.length;for(i||(i=o),u||(u=[]);++s<c;){var f=e[s];n>0&&i(f)?n>1?t(f,n-1,i,a,u):r(u,f):a||(u[u.length]=f)}return u}},function(t,e,n){var r=n(45);t.exports=function(t,e,n){for(var o=-1,i=t.length;++o<i;){var a=t[o],u=e(a);if(null!=u&&(void 0===s?u==u&&!r(u):n(u,s)))var s=u,c=a}return c}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingOnSyntax=void 0;var r=n(92),o=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new r.BindingWhenSyntax(this._binding)},t}();e.BindingOnSyntax=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenSyntax=void 0;var r=n(91),o=n(167),i=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=o.namedConstraint(t),new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=o.taggedConstraint(t)(e),new r.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return o.typeConstraint(t)(e.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return o.namedConstraint(t)(e.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return o.taggedConstraint(t)(e)(n.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return o.traverseAncerstors(e,o.typeConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!o.traverseAncerstors(e,o.typeConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return o.traverseAncerstors(e,o.namedConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!o.traverseAncerstors(e,o.namedConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return o.traverseAncerstors(n,o.taggedConstraint(t)(e))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!o.traverseAncerstors(n,o.taggedConstraint(t)(e))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return o.traverseAncerstors(e,t)},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!o.traverseAncerstors(e,t)},new r.BindingOnSyntax(this._binding)},t}();e.BindingWhenSyntax=i},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}},function(t,e,n){var r=n(31),o=n(65),i=n(25),a=Function.prototype,u=Object.prototype,s=a.toString,c=u.hasOwnProperty,f=s.call(Object);t.exports=function(t){if(!i(t)||"[object Object]"!=r(t))return!1;var e=o(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==f}},function(t,e,n){t.exports={graphlib:n(23),layout:n(309),debug:n(367),util:{time:n(18).time,notime:n(18).notime},version:n(368)}},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,o="~";function i(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function u(t,e,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var u=new a(n,r||t,i),s=o?o+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],u]:t._events[s].push(u):(t._events[s]=u,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function c(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),c.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(o?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},c.prototype.listeners=function(t){var e=o?o+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,a=new Array(i);r<i;r++)a[r]=n[r].fn;return a},c.prototype.listenerCount=function(t){var e=o?o+t:t,n=this._events[e];return n?n.fn?1:n.length:0},c.prototype.emit=function(t,e,n,r,i,a){var u=o?o+t:t;if(!this._events[u])return!1;var s,c,f=this._events[u],l=arguments.length;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),l){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,e),!0;case 3:return f.fn.call(f.context,e,n),!0;case 4:return f.fn.call(f.context,e,n,r),!0;case 5:return f.fn.call(f.context,e,n,r,i),!0;case 6:return f.fn.call(f.context,e,n,r,i,a),!0}for(c=1,s=new Array(l-1);c<l;c++)s[c-1]=arguments[c];f.fn.apply(f.context,s)}else{var h,d=f.length;for(c=0;c<d;c++)switch(f[c].once&&this.removeListener(t,f[c].fn,void 0,!0),l){case 1:f[c].fn.call(f[c].context);break;case 2:f[c].fn.call(f[c].context,e);break;case 3:f[c].fn.call(f[c].context,e,n);break;case 4:f[c].fn.call(f[c].context,e,n,r);break;default:if(!s)for(h=1,s=new Array(l-1);h<l;h++)s[h-1]=arguments[h];f[c].fn.apply(f[c].context,s)}}return!0},c.prototype.on=function(t,e,n){return u(this,t,e,n,!1)},c.prototype.once=function(t,e,n){return u(this,t,e,n,!0)},c.prototype.removeListener=function(t,e,n,r){var i=o?o+t:t;if(!this._events[i])return this;if(!e)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||r&&!a.once||n&&a.context!==n||s(this,i);else{for(var u=0,c=[],f=a.length;u<f;u++)(a[u].fn!==e||r&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[i]=1===c.length?c[0]:c:s(this,i)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=o?o+t:t,this._events[e]&&s(this,e)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=o,c.EventEmitter=c,t.exports=c},function(t,e,n){var r=n(54),o=n(77),i=n(59),a=n(228),u=n(234),s=n(111),c=n(112),f=n(237),l=n(238),h=n(116),d=n(239),p=n(44),v=n(243),m=n(244),y=n(121),g=n(13),b=n(43),_=n(248),x=n(21),w=n(250),E=n(32),S=n(38),T={};T["[object Arguments]"]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T["[object Object]"]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T["[object Function]"]=T["[object WeakMap]"]=!1,t.exports=function t(e,n,A,I,k,O){var D,R=1&n,M=2&n,C=4&n;if(A&&(D=k?A(e,I,k,O):A(e)),void 0!==D)return D;if(!x(e))return e;var N=g(e);if(N){if(D=v(e),!R)return c(e,D)}else{var P=p(e),G="[object Function]"==P||"[object GeneratorFunction]"==P;if(b(e))return s(e,R);if("[object Object]"==P||"[object Arguments]"==P||G&&!k){if(D=M||G?{}:y(e),!R)return M?l(e,u(D,e)):f(e,a(D,e))}else{if(!T[P])return k?e:{};D=m(e,P,R)}}O||(O=new r);var j=O.get(e);if(j)return j;O.set(e,D),w(e)?e.forEach((function(r){D.add(t(r,n,A,r,e,O))})):_(e)&&e.forEach((function(r,o){D.set(o,t(r,n,A,o,e,O))}));var L=N?void 0:(C?M?d:h:M?S:E)(e);return o(L||e,(function(r,o){L&&(r=e[o=r]),i(D,o,t(r,n,A,o,e,O))})),D}},function(t,e,n){(function(e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r="object"==(void 0===e?"undefined":n(e))&&e&&e.Object===Object&&e;t.exports=r}).call(this,n(106))},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}t.exports=r},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var r=n(37),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e,n){var r=n(229),o=n(48),i=n(13),a=n(43),u=n(62),s=n(22),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=i(t),f=!n&&o(t),l=!n&&!f&&a(t),h=!n&&!f&&!l&&s(t),d=n||f||l||h,p=d?r(t.length,String):[],v=p.length;for(var m in t)!e&&!c.call(t,m)||d&&("length"==m||l&&("offset"==m||"parent"==m)||h&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||u(m,v))||p.push(m);return p}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(24),i="object"==r(e)&&e&&!e.nodeType&&e,a=i&&"object"==r(t)&&t&&!t.nodeType&&t,u=a&&a.exports===i?o.Buffer:void 0,s=u?u.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(61)(t))},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(82),o=n(65),i=n(81),a=n(114),u=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,i(t)),t=o(t);return e}:a;t.exports=u},function(t,e,n){var r=n(117),o=n(81),i=n(32);t.exports=function(t){return r(t,i,o)}},function(t,e,n){var r=n(82),o=n(13);t.exports=function(t,e,n){var i=e(t);return o(t)?i:r(i,n(t))}},function(t,e,n){var r=n(37)(n(24),"Set");t.exports=r},function(t,e,n){var r=n(24).Uint8Array;t.exports=r},function(t,e,n){var r=n(83);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(122),o=n(65),i=n(64);t.exports=function(t){return"function"!=typeof t.constructor||i(t)?{}:r(o(t))}},function(t,e,n){var r=n(21),o=Object.create,i=function(){function t(){}return function(e){if(!r(e))return{};if(o)return o(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=i},function(t,e,n){t.exports=n(124)},function(t,e,n){var r=n(77),o=n(66),i=n(125),a=n(13);t.exports=function(t,e){return(a(t)?r:o)(t,i(e))}},function(t,e,n){var r=n(39);t.exports=function(t){return"function"==typeof t?t:r}},function(t,e,n){var r=n(113),o=n(254),i=n(29),a=n(13);t.exports=function(t,e){return(a(t)?r:o)(t,i(e,3))}},function(t,e,n){var r=n(257),o=n(25);t.exports=function t(e,n,i,a,u){return e===n||(null==e||null==n||!o(e)&&!o(n)?e!=e&&n!=n:r(e,n,i,a,t,u))}},function(t,e,n){var r=n(129),o=n(260),i=n(130);t.exports=function(t,e,n,a,u,s){var c=1&n,f=t.length,l=e.length;if(f!=l&&!(c&&l>f))return!1;var h=s.get(t),d=s.get(e);if(h&&d)return h==e&&d==t;var p=-1,v=!0,m=2&n?new r:void 0;for(s.set(t,e),s.set(e,t);++p<f;){var y=t[p],g=e[p];if(a)var b=c?a(g,y,p,e,t,s):a(y,g,p,t,e,s);if(void 0!==b){if(b)continue;v=!1;break}if(m){if(!o(e,(function(t,e){if(!i(m,e)&&(y===t||u(y,t,n,a,s)))return m.push(e)}))){v=!1;break}}else if(y!==g&&!u(y,g,n,a,s)){v=!1;break}}return s.delete(t),s.delete(e),v}},function(t,e,n){var r=n(76),o=n(258),i=n(259);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,t.exports=a},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(21);t.exports=function(t){return t==t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},function(t,e,n){var r=n(270);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(271),o=n(135);t.exports=function(t,e){return null!=t&&o(t,e,r)}},function(t,e,n){var r=n(68),o=n(48),i=n(13),a=n(62),u=n(78),s=n(49);t.exports=function(t,e,n){for(var c=-1,f=(e=r(e,t)).length,l=!1;++c<f;){var h=s(e[c]);if(!(l=null!=t&&n(t,h)))break;t=t[h]}return l||++c!=f?l:!!(f=null==t?0:t.length)&&u(f)&&a(h,f)&&(i(t)||o(t))}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(274),o=n(135);t.exports=function(t,e){return null!=t&&o(t,e,r)}},function(t,e){t.exports=function(t){return void 0===t}},function(t,e,n){var r=n(69),o=n(29),i=n(140),a=n(13);t.exports=function(t,e){return(a(t)?r:i)(t,o(e,3))}},function(t,e,n){var r=n(66),o=n(28);t.exports=function(t,e){var n=-1,i=o(t)?Array(t.length):[];return r(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}},function(t,e,n){var r=n(276),o=n(66),i=n(29),a=n(277),u=n(13);t.exports=function(t,e,n){var s=u(t)?r:a,c=arguments.length<3;return s(t,i(e,4),n,c,o)}},function(t,e,n){var r=n(287),o=Math.max;t.exports=function(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var i=arguments,a=-1,u=o(i.length-e,0),s=Array(u);++a<u;)s[a]=i[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=i[a];return c[e]=n(s),r(t,this,c)}}},function(t,e,n){var r=n(288),o=n(289)(r);t.exports=o},function(t,e,n){var r=n(129),o=n(290),i=n(294),a=n(130),u=n(295),s=n(87);t.exports=function(t,e,n){var c=-1,f=o,l=t.length,h=!0,d=[],p=d;if(n)h=!1,f=i;else if(l>=200){var v=e?null:u(t);if(v)return s(v);h=!1,f=a,p=new r}else p=e?[]:d;t:for(;++c<l;){var m=t[c],y=e?e(m):m;if(m=n||0!==m?m:0,h&&y==y){for(var g=p.length;g--;)if(p[g]===y)continue t;e&&p.push(y),d.push(m)}else f(p,y,n)||(p!==d&&p.push(y),d.push(m))}return d}},function(t,e){t.exports=function(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}},function(t,e,n){var r=n(28),o=n(25);t.exports=function(t){return o(t)&&r(t)}},function(t,e,n){var r=n(297),o=n(32);t.exports=function(t){return null==t?[]:r(t,o(t))}},function(t,e,n){var r=n(20),o=n(149);t.exports=function(t,e,n,r){return function(t,e,n,r){var i,a,u={},s=new o,c=function(t){var e=t.v!==i?t.v:t.w,r=u[e],o=n(t),c=a.distance+o;if(o<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+o);c<r.distance&&(r.distance=c,r.predecessor=i,s.decrease(e,c))};t.nodes().forEach((function(t){var n=t===e?0:Number.POSITIVE_INFINITY;u[t]={distance:n},s.add(t,n)}));for(;s.size()>0&&(i=s.removeMin(),(a=u[i]).distance!==Number.POSITIVE_INFINITY);)r(i).forEach(c);return u}(t,String(e),n||i,r||function(e){return t.outEdges(e)})};var i=r.constant(1)},function(t,e,n){var r=n(20);function o(){this._arr=[],this._keyIndices={}}t.exports=o,o.prototype.size=function(){return this._arr.length},o.prototype.keys=function(){return this._arr.map((function(t){return t.key}))},o.prototype.has=function(t){return r.has(this._keyIndices,t)},o.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},o.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},o.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!r.has(n,t)){var o=this._arr,i=o.length;return n[t]=i,o.push({key:t,priority:e}),this._decrease(i),!0}return!1},o.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},o.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},o.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,o=t;n<e.length&&(o=e[n].priority<e[o].priority?n:o,r<e.length&&(o=e[r].priority<e[o].priority?r:o),o!==t&&(this._swap(t,o),this._heapify(o)))},o.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},o.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,o=n[t],i=n[e];n[t]=i,n[e]=o,r[i.key]=t,r[o.key]=e}},function(t,e,n){var r=n(20);t.exports=function(t){var e=0,n=[],o={},i=[];return t.nodes().forEach((function(a){r.has(o,a)||function a(u){var s=o[u]={onStack:!0,lowlink:e,index:e++};if(n.push(u),t.successors(u).forEach((function(t){r.has(o,t)?o[t].onStack&&(s.lowlink=Math.min(s.lowlink,o[t].index)):(a(t),s.lowlink=Math.min(s.lowlink,o[t].lowlink))})),s.lowlink===s.index){var c,f=[];do{c=n.pop(),o[c].onStack=!1,f.push(c)}while(u!==c);i.push(f)}}(a)})),i}},function(t,e,n){var r=n(20);function o(t){var e={},n={},o=[];if(r.each(t.sinks(),(function a(u){if(r.has(n,u))throw new i;r.has(e,u)||(n[u]=!0,e[u]=!0,r.each(t.predecessors(u),a),delete n[u],o.push(u))})),r.size(e)!==t.nodeCount())throw new i;return o}function i(){}t.exports=o,o.CycleException=i,i.prototype=new Error},function(t,e,n){var r=n(20);t.exports=function(t,e,n){r.isArray(e)||(e=[e]);var o=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],a={};return r.each(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);!function t(e,n,o,i,a,u){r.has(i,n)||(i[n]=!0,o||u.push(n),r.each(a(n),(function(n){t(e,n,o,i,a,u)})),o&&u.push(n))}(t,e,"post"===n,a,o,i)})),i}},function(t,e,n){var r=n(316);t.exports=function(t){return t?(t=r(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},function(t,e,n){var r=n(89);t.exports=function(t){return(null==t?0:t.length)?r(t,1):[]}},function(t,e,n){var r=n(60),o=n(41);t.exports=function(t,e,n){(void 0!==n&&!o(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}},function(t,e){t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},function(t,e){t.exports=function(t,e){return t<e}},function(t,e,n){"use strict";var r=n(11),o=n(23).Graph,i=n(72).slack;function a(t,e){return r.forEach(t.nodes(),(function n(o){r.forEach(e.nodeEdges(o),(function(r){var a=r.v,u=o===a?r.w:a;t.hasNode(u)||i(e,r)||(t.setNode(u,{}),t.setEdge(o,u,{}),n(u))}))})),t.nodeCount()}function u(t,e){return r.minBy(e.edges(),(function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return i(e,n)}))}function s(t,e,n){r.forEach(t.nodes(),(function(t){e.node(t).rank+=n}))}t.exports=function(t){var e,n,r=new o({directed:!1}),c=t.nodes()[0],f=t.nodeCount();r.setNode(c,{});for(;a(r,t)<f;)e=u(r,t),n=r.hasNode(e.v)?i(t,e):-i(t,e),s(r,t,n);return r}},function(t,e,n){(function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var r;!function(r){!function(o){var i="object"===(void 0===e?"undefined":n(e))?e:"object"===("undefined"==typeof self?"undefined":n(self))?self:"object"===n(this)?this:Function("return this;")(),a=u(r);function u(t,e){return function(n,r){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}void 0===i.Reflect?i.Reflect=r:a=u(i.Reflect,a),function(e){var r=Object.prototype.hasOwnProperty,o="function"==typeof Symbol,i=o&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",a=o&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",u="function"==typeof Object.create,s={__proto__:[]}instanceof Array,c=!u&&!s,f={create:u?function(){return N(Object.create(null))}:s?function(){return N({__proto__:null})}:function(){return N({})},has:c?function(t,e){return r.call(t,e)}:function(t,e){return e in t},get:c?function(t,e){return r.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},l=Object.getPrototypeOf(Function),h="object"===(void 0===t?"undefined":n(t))&&t.env&&"true"===t.env.REFLECT_METADATA_USE_MAP_POLYFILL,d=h||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[a]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var r=this._keys.length,o=n+1;o<r;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,r)},e.prototype.values=function(){return new n(this._keys,this._values,o)},e.prototype.entries=function(){return new n(this._keys,this._values,i)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[a]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function r(t,e){return t}function o(t,e){return e}function i(t,e){return[t,e]}}():Map,p=h||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new d}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[a]=function(){return this.keys()},t}():Set,v=new(h||"function"!=typeof WeakMap?function(){var t=f.create(),e=n();return function(){function t(){this._key=n()}return t.prototype.has=function(t){var e=o(t,!1);return void 0!==e&&f.has(e,this._key)},t.prototype.get=function(t){var e=o(t,!1);return void 0!==e?f.get(e,this._key):void 0},t.prototype.set=function(t,e){return o(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=o(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=n()},t}();function n(){var e;do{e="@@WeakMap@@"+a()}while(f.has(t,e));return t[e]=!0,e}function o(t,n){if(!r.call(t,e)){if(!n)return;Object.defineProperty(t,e,{value:f.create()})}return t[e]}function i(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function a(){var t,e=(t=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):i(new Uint8Array(t),t):i(new Array(t),t));e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",r=0;r<16;++r){var o=e[r];4!==r&&6!==r&&8!==r||(n+="-"),o<16&&(n+="0"),n+=o.toString(16).toLowerCase()}return n}}():WeakMap);function m(t,e,n){var r=v.get(t);if(w(r)){if(!n)return;r=new d,v.set(t,r)}var o=r.get(e);if(w(o)){if(!n)return;o=new d,r.set(e,o)}return o}function y(t,e,n){var r=m(e,n,!1);return!w(r)&&!!r.has(t)}function g(t,e,n){var r=m(e,n,!1);if(!w(r))return r.get(t)}function b(t,e,n,r){m(n,r,!0).set(t,e)}function _(t,e){var n=[],r=m(t,e,!1);if(w(r))return n;for(var o=function(t){var e=D(t,a);if(!k(e))throw new TypeError;var n=e.call(t);if(!S(n))throw new TypeError;return n}(r.keys()),i=0;;){var u=R(o);if(!u)return n.length=i,n;var s=u.value;try{n[i]=s}catch(t){try{M(o)}finally{throw t}}i++}}function x(t){if(null===t)return 1;switch(n(t)){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function w(t){return void 0===t}function E(t){return null===t}function S(t){return"object"===n(t)?null!==t:"function"==typeof t}function T(t,e){switch(x(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",r=D(t,i);if(void 0!==r){var o=r.call(t,n);if(S(o))throw new TypeError;return o}return function(t,e){if("string"===e){var n=t.toString;if(k(n))if(!S(o=n.call(t)))return o;if(k(r=t.valueOf))if(!S(o=r.call(t)))return o}else{var r;if(k(r=t.valueOf))if(!S(o=r.call(t)))return o;var o,i=t.toString;if(k(i))if(!S(o=i.call(t)))return o}throw new TypeError}(t,"default"===n?"number":n)}function A(t){var e=T(t,3);return"symbol"===n(e)?e:function(t){return""+t}(e)}function I(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function k(t){return"function"==typeof t}function O(t){return"function"==typeof t}function D(t,e){var n=t[e];if(null!=n){if(!k(n))throw new TypeError;return n}}function R(t){var e=t.next();return!e.done&&e}function M(t){var e=t.return;e&&e.call(t)}function C(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===l)return e;if(e!==l)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var o=r.constructor;return"function"!=typeof o||o===t?e:o}function N(t){return t.__=void 0,delete t.__,t}e("decorate",(function(t,e,n,r){if(w(n)){if(!I(t))throw new TypeError;if(!O(e))throw new TypeError;return function(t,e){for(var n=t.length-1;n>=0;--n){var r=(0,t[n])(e);if(!w(r)&&!E(r)){if(!O(r))throw new TypeError;e=r}}return e}(t,e)}if(!I(t))throw new TypeError;if(!S(e))throw new TypeError;if(!S(r)&&!w(r)&&!E(r))throw new TypeError;return E(r)&&(r=void 0),function(t,e,n,r){for(var o=t.length-1;o>=0;--o){var i=(0,t[o])(e,n,r);if(!w(i)&&!E(i)){if(!S(i))throw new TypeError;r=i}}return r}(t,e,n=A(n),r)})),e("metadata",(function(t,e){return function(n,r){if(!S(n))throw new TypeError;if(!w(r)&&!function(t){switch(x(t)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;b(t,e,n,r)}})),e("defineMetadata",(function(t,e,n,r){if(!S(n))throw new TypeError;return w(r)||(r=A(r)),b(t,e,n,r)})),e("hasMetadata",(function(t,e,n){if(!S(e))throw new TypeError;return w(n)||(n=A(n)),function t(e,n,r){if(y(e,n,r))return!0;var o=C(n);return!E(o)&&t(e,o,r)}(t,e,n)})),e("hasOwnMetadata",(function(t,e,n){if(!S(e))throw new TypeError;return w(n)||(n=A(n)),y(t,e,n)})),e("getMetadata",(function(t,e,n){if(!S(e))throw new TypeError;return w(n)||(n=A(n)),function t(e,n,r){if(y(e,n,r))return g(e,n,r);var o=C(n);return E(o)?void 0:t(e,o,r)}(t,e,n)})),e("getOwnMetadata",(function(t,e,n){if(!S(e))throw new TypeError;return w(n)||(n=A(n)),g(t,e,n)})),e("getMetadataKeys",(function(t,e){if(!S(t))throw new TypeError;return w(e)||(e=A(e)),function t(e,n){var r=_(e,n),o=C(e);if(null===o)return r;var i=t(o,n);if(i.length<=0)return r;if(r.length<=0)return i;for(var a=new p,u=[],s=0,c=r;s<c.length;s++){var f=c[s];a.has(f)||(a.add(f),u.push(f))}for(var l=0,h=i;l<h.length;l++){f=h[l];a.has(f)||(a.add(f),u.push(f))}return u}(t,e)})),e("getOwnMetadataKeys",(function(t,e){if(!S(t))throw new TypeError;return w(e)||(e=A(e)),_(t,e)})),e("deleteMetadata",(function(t,e,n){if(!S(e))throw new TypeError;w(n)||(n=A(n));var r=m(e,n,!1);if(w(r))return!1;if(!r.delete(t))return!1;if(r.size>0)return!0;var o=v.get(e);return o.delete(n),o.size>0||v.delete(e),!0}))}(a)}()}(r||(r={}))}).call(this,n(369),n(106))},function(t,e,n){var r=n(161);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MetadataReader=void 0;var r=n(17),o=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(r.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(r.TAGGED,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(r.TAGGED_PROP,t)||[]},t}();e.MetadataReader=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isStackOverflowExeption=void 0;var r=n(19);e.isStackOverflowExeption=function(t){return t instanceof RangeError||t.message===r.STACK_OVERFLOW}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.inject=e.LazyServiceIdentifer=void 0;var r=n(19),o=n(17),i=n(26),a=n(33),u=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();e.LazyServiceIdentifer=u,e.inject=function(t){return function(e,n,u){if(void 0===t)throw new Error(r.UNDEFINED_INJECT_ANNOTATION(e.name));var s=new i.Metadata(o.INJECT_TAG,t);"number"==typeof u?a.tagParameter(e,n,u,s):a.tagProperty(e,n,s)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Target=void 0;var r=n(17),o=n(40),i=n(26),a=n(381),u=function(){function t(t,e,n,u){this.id=o.id(),this.type=t,this.serviceIdentifier=n,this.name=new a.QueryableString(e||""),this.metadata=new Array;var s=null;"string"==typeof u?s=new i.Metadata(r.NAMED_TAG,u):u instanceof i.Metadata&&(s=u),null!==s&&this.metadata.push(s)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){if(n[e].key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(r.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(t){return this.matchesTag(r.MULTI_INJECT_TAG)(t)},t.prototype.isNamed=function(){return this.hasTag(r.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some((function(t){return t.key!==r.INJECT_TAG&&t.key!==r.MULTI_INJECT_TAG&&t.key!==r.NAME_TAG&&t.key!==r.UNMANAGED_TAG&&t.key!==r.NAMED_TAG}))},t.prototype.isOptional=function(){return this.matchesTag(r.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===r.NAMED_TAG}))[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return t.key!==r.INJECT_TAG&&t.key!==r.MULTI_INJECT_TAG&&t.key!==r.NAME_TAG&&t.key!==r.UNMANAGED_TAG&&t.key!==r.NAMED_TAG})):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(r.NAMED_TAG)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var r=0,o=e.metadata;r<o.length;r++){var i=o[r];if(i.key===t&&i.value===n)return!0}return!1}},t}();e.Target=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenOnSyntax=void 0;var r=n(91),o=n(92),i=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingWhenOnSyntax=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.typeConstraint=e.namedConstraint=e.taggedConstraint=e.traverseAncerstors=void 0;var r=n(17),o=n(26);e.traverseAncerstors=function t(e,n){var r=e.parentRequest;return null!==r&&(!!n(r)||t(r,n))};var i=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new o.Metadata(t,e),n}};e.taggedConstraint=i;var a=i(r.NAMED_TAG);e.namedConstraint=a;e.typeConstraint=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"==typeof t)return n.serviceIdentifier===t;var r=e.bindings[0].implementationType;return t===r}return!1}}},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){t.exports=1e-6},function(t,e){t.exports=function(){var t=new Float32Array(2);return t[0]=0,t[1]=0,t}},function(t,e){t.exports=function(t,e,n){return t[0]=e,t[1]=n,t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}},function(t,e){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}},function(t,e){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}},function(t,e){t.exports=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}},function(t,e){t.exports=function(t){var e=t[0],n=t[1];return e*e+n*n}},function(t,e){t.exports=function(t,e){var n=e[0],r=e[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o);return t}},function(t,e){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(401);e.default=function(t,e){return void 0===e&&(e=!0),{lazyInject:r.makePropertyInjectDecorator(t,e),lazyInjectNamed:r.makePropertyInjectNamedDecorator(t,e),lazyInjectTagged:r.makePropertyInjectTaggedDecorator(t,e),lazyMultiInject:r.makePropertyMultiInjectDecorator(t,e)}}},function(t,e,n){var r=n(144);t.exports=function(t){return t&&t.length?r(t):[]}},function(t,e,n){var r,o,i;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i=function(){"use strict";var t=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},e=function(t,e){for(var n=Object.keys(e),r=0;r<n.length;++r)t[n[r]]=e[n[r]];return t};function n(t){var e=new Error("(regl) "+t);throw console.error(e),e}function r(t,e){t||n(e)}function o(t){return t?": "+t:""}function i(t,e){switch(e){case"number":return"number"==typeof t;case"object":return"object"===a(t);case"string":return"string"==typeof t;case"boolean":return"boolean"==typeof t;case"function":return"function"==typeof t;case"undefined":return void 0===t;case"symbol":return"symbol"===a(t)}}function u(t,e,r){e.indexOf(t)<0&&n("invalid value"+o(r)+". must be one of: "+e)}var s=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function c(t,e){for(t+="";t.length<e;)t=" "+t;return t}function f(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function l(t,e){this.number=t,this.line=e,this.errors=[]}function h(t,e,n){this.file=t,this.line=e,this.message=n}function d(){var t=new Error,e=(t.stack||t).toString(),n=/compileProcedure.*\\n\\s*at.*\\((.*)\\)/.exec(e);if(n)return n[1];var r=/compileProcedure.*\\n\\s*at\\s+(.*)(\\n|$)/.exec(e);return r?r[1]:"unknown"}function p(){var t=new Error,e=(t.stack||t).toString(),n=/at REGLCommand.*\\n\\s+at.*\\((.*)\\)/.exec(e);if(n)return n[1];var r=/at REGLCommand.*\\n\\s+at\\s+(.*)\\n/.exec(e);return r?r[1]:"unknown"}function v(t,e){var n,r=t.split("\\n"),o=1,i=0,a={unknown:new f,0:new f};a.unknown.name=a[0].name=e||d(),a.unknown.lines.push(new l(0,""));for(var u=0;u<r.length;++u){var s=r[u],c=/^\\s*#\\s*(\\w+)\\s+(.+)\\s*$/.exec(s);if(c)switch(c[1]){case"line":var h=/(\\d+)(\\s+\\d+)?/.exec(c[2]);h&&(o=0|h[1],h[2]&&((i=0|h[2])in a||(a[i]=new f)));break;case"define":var p=/SHADER_NAME(_B64)?\\s+(.*)$/.exec(c[2]);p&&(a[i].name=p[1]?(n=p[2],"undefined"!=typeof atob?atob(n):"base64:"+n):p[2])}a[i].lines.push(new l(o++,s))}return Object.keys(a).forEach((function(t){var e=a[t];e.lines.forEach((function(t){e.index[t.number]=t}))})),a}function m(t){t._commandRef=d()}function y(t,e){var r=p();n(t+" in command "+(e||d())+("unknown"===r?"":" called from "+r))}function g(t,e,n,r){i(t,e)||y("invalid parameter type"+o(n)+". expected "+e+", got "+a(t),r||d())}var b={};function _(t,e){return 32820===t||32819===t||33635===t?2:34042===t?4:b[t]*e}function x(t){return!(t&t-1||!t)}b[5120]=b[5121]=1,b[5122]=b[5123]=b[36193]=b[33635]=b[32819]=b[32820]=2,b[5124]=b[5125]=b[5126]=b[34042]=4;var w=e(r,{optional:function(t){t()},raise:n,commandRaise:y,command:function(t,e,n){t||y(e,n||d())},parameter:function(t,e,r){t in e||n("unknown parameter ("+t+")"+o(r)+". possible values: "+Object.keys(e).join())},commandParameter:function(t,e,n,r){t in e||y("unknown parameter ("+t+")"+o(n)+". possible values: "+Object.keys(e).join(),r||d())},constructor:function(t){Object.keys(t).forEach((function(t){s.indexOf(t)<0&&n('invalid regl constructor argument "'+t+'". must be one of '+s)}))},type:function(t,e,r){i(t,e)||n("invalid parameter type"+o(r)+". expected "+e+", got "+a(t))},commandType:g,isTypedArray:function(e,r){t(e)||n("invalid parameter type"+o(r)+". must be a typed array")},nni:function(t,e){t>=0&&(0|t)===t||n("invalid parameter type, ("+t+")"+o(e)+". must be a nonnegative integer")},oneOf:u,shaderError:function(t,e,n,o,i){if(!t.getShaderParameter(e,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(e),u=o===t.FRAGMENT_SHADER?"fragment":"vertex";g(n,"string",u+" shader source must be a string",i);var s=v(n,i),f=function(t){var e=[];return t.split("\\n").forEach((function(t){if(!(t.length<5)){var n=/^ERROR:\\s+(\\d+):(\\d+):\\s*(.*)$/.exec(t);n?e.push(new h(0|n[1],0|n[2],n[3].trim())):t.length>0&&e.push(new h("unknown",0,t))}})),e}(a);!function(t,e){e.forEach((function(e){var n=t[e.file];if(n){var r=n.index[e.line];if(r)return r.errors.push(e),void(n.hasErrors=!0)}t.unknown.hasErrors=!0,t.unknown.lines[0].errors.push(e)}))}(s,f),Object.keys(s).forEach((function(t){var e=s[t];if(e.hasErrors){var n=[""],r=[""];o("file number "+t+": "+e.name+"\\n","color:red;text-decoration:underline;font-weight:bold"),e.lines.forEach((function(t){if(t.errors.length>0){o(c(t.number,4)+"|  ","background-color:yellow; font-weight:bold"),o(t.line+"\\n","color:red; background-color:yellow; font-weight:bold");var e=0;t.errors.forEach((function(n){var r=n.message,i=/^\\s*'(.*)'\\s*:\\s*(.*)$/.exec(r);if(i){var a=i[1];switch(r=i[2],a){case"assign":a="="}e=Math.max(t.line.indexOf(a,e),0)}else e=0;o(c("| ",6)),o(c("^^^",e+3)+"\\n","font-weight:bold"),o(c("| ",6)),o(r+"\\n","font-weight:bold")})),o(c("| ",6)+"\\n")}else o(c(t.number,4)+"|  "),o(t.line+"\\n","color:red")})),"undefined"==typeof document||window.chrome?console.log(n.join("")):(r[0]=n.join("%c"),console.log.apply(console,r))}function o(t,e){n.push(t),r.push(e||"")}})),r.raise("Error compiling "+u+" shader, "+s[0].name)}},linkError:function(t,e,n,o,i){if(!t.getProgramParameter(e,t.LINK_STATUS)){var a=t.getProgramInfoLog(e),u=v(n,i),s='Error linking program with vertex shader, "'+v(o,i)[0].name+'", and fragment shader "'+u[0].name+'"';"undefined"!=typeof document?console.log("%c"+s+"\\n%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(s+"\\n"+a),r.raise(s)}},callSite:p,saveCommandRef:m,saveDrawInfo:function(t,e,n,r){function o(t){return t?r.id(t):0}function i(t,e){Object.keys(e).forEach((function(e){t[r.id(e)]=!0}))}m(t),t._fragId=o(t.static.frag),t._vertId=o(t.static.vert);var a=t._uniformSet={};i(a,e.static),i(a,e.dynamic);var u=t._attributeSet={};i(u,n.static),i(u,n.dynamic),t._hasCount="count"in t.static||"count"in t.dynamic||"elements"in t.static||"elements"in t.dynamic},framebufferFormat:function(t,e,n){t.texture?u(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):u(t.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")},guessCommand:d,texture2D:function(t,e,n){var o,i=e.width,a=e.height,u=e.channels;r(i>0&&i<=n.maxTextureSize&&a>0&&a<=n.maxTextureSize,"invalid texture shape"),33071===t.wrapS&&33071===t.wrapT||r(x(i)&&x(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==i&&1!==a&&r(9984!==t.minFilter&&9986!==t.minFilter&&9985!==t.minFilter&&9987!==t.minFilter,"min filter requires mipmap"):(r(x(i)&&x(a),"texture must be a square power of 2 to support mipmapping"),r(e.mipmask===(i<<1)-1,"missing or incomplete mipmap data")),5126===e.type&&(n.extensions.indexOf("oes_texture_float_linear")<0&&r(9728===t.minFilter&&9728===t.magFilter,"filter not supported, must enable oes_texture_float_linear"),r(!t.genMipmaps,"mipmap generation not supported with float textures"));var s=e.images;for(o=0;o<16;++o)if(s[o]){var c=i>>o,f=a>>o;r(e.mipmask&1<<o,"missing mipmap data");var l=s[o];if(r(l.width===c&&l.height===f,"invalid shape for mip images"),r(l.format===e.format&&l.internalformat===e.internalformat&&l.type===e.type,"incompatible type for mip image"),l.compressed);else if(l.data){var h=Math.ceil(_(l.type,u)*c/l.unpackAlignment)*l.unpackAlignment;r(l.data.byteLength===h*f,"invalid data for image, buffer size is inconsistent with image format")}else l.element||l.copy}else t.genMipmaps||r(0==(e.mipmask&1<<o),"extra mipmap data");e.compressed&&r(!t.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(t,e,n,o){var i=t.width,a=t.height,u=t.channels;r(i>0&&i<=o.maxTextureSize&&a>0&&a<=o.maxTextureSize,"invalid texture shape"),r(i===a,"cube map must be square"),r(33071===e.wrapS&&33071===e.wrapT,"wrap mode not supported by cube map");for(var s=0;s<n.length;++s){var c=n[s];r(c.width===i&&c.height===a,"inconsistent cube map face shape"),e.genMipmaps&&(r(!c.compressed,"can not generate mipmap for compressed textures"),r(1===c.mipmask,"can not specify mipmaps and generate mipmaps"));for(var f=c.images,l=0;l<16;++l){var h=f[l];if(h){var d=i>>l,p=a>>l;r(c.mipmask&1<<l,"missing mipmap data"),r(h.width===d&&h.height===p,"invalid shape for mip images"),r(h.format===t.format&&h.internalformat===t.internalformat&&h.type===t.type,"incompatible type for mip image"),h.compressed||(h.data?r(h.data.byteLength===d*p*Math.max(_(h.type,u),h.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):h.element||h.copy)}}}}}),E=0;function S(t,e){this.id=E++,this.type=t,this.data=e}function T(t){return t.replace(/\\\\/g,"\\\\\\\\").replace(/"/g,'\\\\"')}function A(t){return"["+function t(e){if(0===e.length)return[];var n=e.charAt(0),r=e.charAt(e.length-1);if(e.length>1&&n===r&&('"'===n||"'"===n))return['"'+T(e.substr(1,e.length-2))+'"'];var o=/\\[(false|true|null|\\d+|'[^']*'|"[^"]*")\\]/.exec(e);if(o)return t(e.substr(0,o.index)).concat(t(o[1])).concat(t(e.substr(o.index+o[0].length)));var i=e.split(".");if(1===i.length)return['"'+T(e)+'"'];for(var a=[],u=0;u<i.length;++u)a=a.concat(t(i[u]));return a}(t).join("][")+"]"}var I={DynamicVariable:S,define:function(t,e){return new S(t,A(e+""))},isDynamic:function(t){return"function"==typeof t&&!t._reglType||t instanceof S},unbox:function t(e,n){return"function"==typeof e?new S(0,e):"number"==typeof e||"boolean"==typeof e?new S(5,e):Array.isArray(e)?new S(6,e.map((function(e,r){return t(e,n+"["+r+"]")}))):e instanceof S?e:void w(!1,"invalid option type in uniform "+n)},accessor:A},k={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},O="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function D(t){return"string"==typeof t?t.split():(w(Array.isArray(t),"invalid extension array"),t)}function R(t){return"string"==typeof t?(w("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function M(t){var n,r,o,i,u,s=t||{},c={},f=[],l=[],h="undefined"==typeof window?1:window.devicePixelRatio,d=!1,p=function(t){t&&w.raise(t)},v=function(){};if("string"==typeof s?(w("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),n=document.querySelector(s),w(n,"invalid query string for element")):"object"===a(s)?"string"==typeof(u=s).nodeName&&"function"==typeof u.appendChild&&"function"==typeof u.getBoundingClientRect?n=s:function(t){return"function"==typeof t.drawArrays||"function"==typeof t.drawElements}(s)?o=(i=s).canvas:(w.constructor(s),"gl"in s?i=s.gl:"canvas"in s?o=R(s.canvas):"container"in s&&(r=R(s.container)),"attributes"in s&&(c=s.attributes,w.type(c,"object","invalid context attributes")),"extensions"in s&&(f=D(s.extensions)),"optionalExtensions"in s&&(l=D(s.optionalExtensions)),"onDone"in s&&(w.type(s.onDone,"function","invalid or missing onDone callback"),p=s.onDone),"profile"in s&&(d=!!s.profile),"pixelRatio"in s&&(h=+s.pixelRatio,w(h>0,"invalid pixel ratio"))):w.raise("invalid arguments to regl"),n&&("canvas"===n.nodeName.toLowerCase()?o=n:r=n),!i){if(!o){w("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var m=function(t,n,r){var o,i=document.createElement("canvas");function a(){var n=window.innerWidth,o=window.innerHeight;if(t!==document.body){var a=t.getBoundingClientRect();n=a.right-a.left,o=a.bottom-a.top}i.width=r*n,i.height=r*o,e(i.style,{width:n+"px",height:o+"px"})}return e(i.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(i),t===document.body&&(i.style.position="absolute",e(t.style,{margin:0,padding:0})),t!==document.body&&"function"==typeof ResizeObserver?(o=new ResizeObserver((function(){setTimeout(a)}))).observe(t):window.addEventListener("resize",a,!1),a(),{canvas:i,onDestroy:function(){o?o.disconnect():window.removeEventListener("resize",a),t.removeChild(i)}}}(r||document.body,0,h);if(!m)return null;o=m.canvas,v=m.onDestroy}void 0===c.premultipliedAlpha&&(c.premultipliedAlpha=!0),i=function(t,e){function n(n){try{return t.getContext(n,e)}catch(t){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}(o,c)}return i?{gl:i,canvas:o,container:r,extensions:f,optionalExtensions:l,pixelRatio:h,profile:d,onDone:p,onDestroy:v}:(v(),p("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function C(t,e){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r);return n}function N(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1}function P(){var t=C(8,(function(){return[]}));function e(e){var n=function(t){for(var e=16;e<=1<<28;e*=16)if(t<=e)return e;return 0}(e),r=t[N(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(e){t[N(e.byteLength)>>2].push(e)}return{alloc:e,free:n,allocType:function(t,n){var r=null;switch(t){case 5120:r=new Int8Array(e(n),0,n);break;case 5121:r=new Uint8Array(e(n),0,n);break;case 5122:r=new Int16Array(e(2*n),0,n);break;case 5123:r=new Uint16Array(e(2*n),0,n);break;case 5124:r=new Int32Array(e(4*n),0,n);break;case 5125:r=new Uint32Array(e(4*n),0,n);break;case 5126:r=new Float32Array(e(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r},freeType:function(t){n(t.buffer)}}}var G=P();function j(e){return!!e&&"object"===a(e)&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||t(e.data))}G.zero=P();var L=function(t){return Object.keys(t).map((function(e){return t[e]}))},U={shape:function(t){for(var e=[],n=t;n.length;n=n[0])e.push(n.length);return e},flatten:function(t,e,n,r){var o=1;if(e.length)for(var i=0;i<e.length;++i)o*=e[i];else o=0;var a=r||G.allocType(n,o);switch(e.length){case 0:break;case 1:!function(t,e,n){for(var r=0;r<e;++r)n[r]=t[r]}(t,e[0],a);break;case 2:!function(t,e,n,r){for(var o=0,i=0;i<e;++i)for(var a=t[i],u=0;u<n;++u)r[o++]=a[u]}(t,e[0],e[1],a);break;case 3:B(t,e[0],e[1],e[2],a,0);break;default:!function t(e,n,r,o,i){for(var a=1,u=r+1;u<n.length;++u)a*=n[u];var s=n[r];if(n.length-r==4){var c=n[r+1],f=n[r+2],l=n[r+3];for(u=0;u<s;++u)B(e[u],c,f,l,o,i),i+=a}else for(u=0;u<s;++u)t(e[u],n,r+1,o,i),i+=a}(t,e,0,a,0)}return a}};function B(t,e,n,r,o,i){for(var a=i,u=0;u<e;++u)for(var s=t[u],c=0;c<n;++c)for(var f=s[c],l=0;l<r;++l)o[a++]=f[l]}var F={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},z={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},V={dynamic:35048,stream:35040,static:35044},W=U.flatten,X=U.shape,H=[];function q(t){return 0|F[Object.prototype.toString.call(t)]}function Y(t,e){for(var n=0;n<e.length;++n)t[n]=e[n]}function K(t,e,n,r,o,i,a){for(var u=0,s=0;s<n;++s)for(var c=0;c<r;++c)t[u++]=e[o*s+i*c+a]}H[5120]=1,H[5122]=2,H[5124]=4,H[5121]=1,H[5123]=2,H[5125]=4,H[5126]=4;var Z={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Q=new Float32Array(1),J=new Uint32Array(Q.buffer);function $(t){for(var e=G.allocType(5123,t.length),n=0;n<t.length;++n)if(isNaN(t[n]))e[n]=65535;else if(t[n]===1/0)e[n]=31744;else if(t[n]===-1/0)e[n]=64512;else{Q[0]=t[n];var r=J[0],o=r>>>31<<15,i=(r<<1>>>24)-127,a=r>>13&1023;if(i<-24)e[n]=o;else if(i<-14){var u=-14-i;e[n]=o+(a+1024>>u)}else e[n]=i>15?o+31744:o+(i+15<<10)+a}return e}function tt(e){return Array.isArray(e)||t(e)}var et=function(t){return!(t&t-1||!t)},nt=[9984,9986,9985,9987],rt=[0,6409,6410,6407,6408],ot={};function it(t){return"[object "+t+"]"}ot[6409]=ot[6406]=ot[6402]=1,ot[34041]=ot[6410]=2,ot[6407]=ot[35904]=3,ot[6408]=ot[35906]=4;var at=it("HTMLCanvasElement"),ut=it("OffscreenCanvas"),st=it("CanvasRenderingContext2D"),ct=it("ImageBitmap"),ft=it("HTMLImageElement"),lt=it("HTMLVideoElement"),ht=Object.keys(F).concat([at,ut,st,ct,ft,lt]),dt=[];dt[5121]=1,dt[5126]=4,dt[36193]=2,dt[5123]=2,dt[5125]=4;var pt=[];function vt(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function mt(t){return!!Array.isArray(t)&&!(0===t.length||!tt(t[0]))}function yt(t){return Object.prototype.toString.call(t)}function gt(t){return yt(t)===at}function bt(t){return yt(t)===ut}function _t(t){if(!t)return!1;var e=yt(t);return ht.indexOf(e)>=0||vt(t)||mt(t)||j(t)}function xt(t){return 0|F[Object.prototype.toString.call(t)]}function wt(t,e){return G.allocType(36193===t.type?5126:t.type,e)}function Et(t,e){36193===t.type?(t.data=$(e),G.freeType(e)):t.data=e}function St(t,e,n,r,o,i){var a;if(a=void 0!==pt[t]?pt[t]:ot[t]*dt[e],i&&(a*=6),o){for(var u=0,s=n;s>=1;)u+=a*s*s,s/=2;return u}return a*n*r}function Tt(n,r,o,i,u,s,c){var f={"don't care":4352,"dont care":4352,nice:4354,fast:4353},l={repeat:10497,clamp:33071,mirror:33648},h={nearest:9728,linear:9729},d=e({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},h),p={none:0,browser:37444},v={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},m={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},y={};r.ext_srgb&&(m.srgb=35904,m.srgba=35906),r.oes_texture_float&&(v.float32=v.float=5126),r.oes_texture_half_float&&(v.float16=v["half float"]=36193),r.webgl_depth_texture&&(e(m,{depth:6402,"depth stencil":34041}),e(v,{uint16:5123,uint32:5125,"depth stencil":34042})),r.webgl_compressed_texture_s3tc&&e(y,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),r.webgl_compressed_texture_atc&&e(y,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),r.webgl_compressed_texture_pvrtc&&e(y,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),r.webgl_compressed_texture_etc1&&(y["rgb etc1"]=36196);var g=Array.prototype.slice.call(n.getParameter(34467));Object.keys(y).forEach((function(t){var e=y[t];g.indexOf(e)>=0&&(m[t]=e)}));var b=Object.keys(m);o.textureFormats=b;var _=[];Object.keys(m).forEach((function(t){var e=m[t];_[e]=t}));var x=[];Object.keys(v).forEach((function(t){var e=v[t];x[e]=t}));var E=[];Object.keys(h).forEach((function(t){E[h[t]]=t}));var S=[];Object.keys(d).forEach((function(t){var e=d[t];S[e]=t}));var T=[];Object.keys(l).forEach((function(t){T[l[t]]=t}));var A=b.reduce((function(t,e){var n=m[e];return 6409===n||6406===n||6409===n||6410===n||6402===n||34041===n||r.ext_srgb&&(35904===n||35906===n)?t[n]=n:32855===n||e.indexOf("rgba")>=0?t[n]=6408:t[n]=6407,t}),{});function I(){this.internalformat=6408,this.format=6408,this.type=5121,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0}function k(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function O(t,e){if("object"===a(e)&&e){if("premultiplyAlpha"in e&&(w.type(e.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=e.premultiplyAlpha),"flipY"in e&&(w.type(e.flipY,"boolean","invalid texture flip"),t.flipY=e.flipY),"alignment"in e&&(w.oneOf(e.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=e.alignment),"colorSpace"in e&&(w.parameter(e.colorSpace,p,"invalid colorSpace"),t.colorSpace=p[e.colorSpace]),"type"in e){var n=e.type;w(r.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),w(r.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),w(r.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),w.parameter(n,v,"invalid texture type"),t.type=v[n]}var i=t.width,u=t.height,s=t.channels,c=!1;"shape"in e?(w(Array.isArray(e.shape)&&e.shape.length>=2,"shape must be an array"),i=e.shape[0],u=e.shape[1],3===e.shape.length&&(s=e.shape[2],w(s>0&&s<=4,"invalid number of channels"),c=!0),w(i>=0&&i<=o.maxTextureSize,"invalid width"),w(u>=0&&u<=o.maxTextureSize,"invalid height")):("radius"in e&&(i=u=e.radius,w(i>=0&&i<=o.maxTextureSize,"invalid radius")),"width"in e&&(i=e.width,w(i>=0&&i<=o.maxTextureSize,"invalid width")),"height"in e&&(u=e.height,w(u>=0&&u<=o.maxTextureSize,"invalid height")),"channels"in e&&(s=e.channels,w(s>0&&s<=4,"invalid number of channels"),c=!0)),t.width=0|i,t.height=0|u,t.channels=0|s;var f=!1;if("format"in e){var l=e.format;w(r.webgl_depth_texture||!("depth"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),w.parameter(l,m,"invalid texture format");var h=t.internalformat=m[l];t.format=A[h],l in v&&("type"in e||(t.type=v[l])),l in y&&(t.compressed=!0),f=!0}!c&&f?t.channels=ot[t.format]:c&&!f?t.channels!==rt[t.format]&&(t.format=t.internalformat=rt[t.channels]):f&&c&&w(t.channels===ot[t.format],"number of channels inconsistent with specified format")}}function D(t){n.pixelStorei(37440,t.flipY),n.pixelStorei(37441,t.premultiplyAlpha),n.pixelStorei(37443,t.colorSpace),n.pixelStorei(3317,t.unpackAlignment)}function R(){I.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function M(e,n){var r=null;if(_t(n)?r=n:n&&(w.type(n,"object","invalid pixel data type"),O(e,n),"x"in n&&(e.xOffset=0|n.x),"y"in n&&(e.yOffset=0|n.y),_t(n.data)&&(r=n.data)),w(!e.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){w(!r,"can not specify copy and data field for the same texture");var i=u.viewportWidth,a=u.viewportHeight;e.width=e.width||i-e.xOffset,e.height=e.height||a-e.yOffset,e.needsCopy=!0,w(e.xOffset>=0&&e.xOffset<i&&e.yOffset>=0&&e.yOffset<a&&e.width>0&&e.width<=i&&e.height>0&&e.height<=a,"copy texture read out of bounds")}else if(r){if(t(r))e.channels=e.channels||4,e.data=r,"type"in n||5121!==e.type||(e.type=xt(r));else if(vt(r))e.channels=e.channels||4,function(t,e){var n=e.length;switch(t.type){case 5121:case 5123:case 5125:case 5126:var r=G.allocType(t.type,n);r.set(e),t.data=r;break;case 36193:t.data=$(e);break;default:w.raise("unsupported texture type, must specify a typed array")}}(e,r),e.alignment=1,e.needsFree=!0;else if(j(r)){var s=r.data;Array.isArray(s)||5121!==e.type||(e.type=xt(s));var c,f,l,h,d,p,v=r.shape,m=r.stride;3===v.length?(l=v[2],p=m[2]):(w(2===v.length,"invalid ndarray pixel data, must be 2 or 3D"),l=1,p=1),c=v[0],f=v[1],h=m[0],d=m[1],e.alignment=1,e.width=c,e.height=f,e.channels=l,e.format=e.internalformat=rt[l],e.needsFree=!0,function(t,e,n,r,o,i){for(var a=t.width,u=t.height,s=t.channels,c=wt(t,a*u*s),f=0,l=0;l<u;++l)for(var h=0;h<a;++h)for(var d=0;d<s;++d)c[f++]=e[n*h+r*l+o*d+i];Et(t,c)}(e,s,h,d,p,r.offset)}else if(gt(r)||bt(r)||yt(r)===st)gt(r)||bt(r)?e.element=r:e.element=r.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(function(t){return yt(t)===ct}(r))e.element=r,e.width=r.width,e.height=r.height,e.channels=4;else if(function(t){return yt(t)===ft}(r))e.element=r,e.width=r.naturalWidth,e.height=r.naturalHeight,e.channels=4;else if(function(t){return yt(t)===lt}(r))e.element=r,e.width=r.videoWidth,e.height=r.videoHeight,e.channels=4;else if(mt(r)){var y=e.width||r[0].length,g=e.height||r.length,b=e.channels;b=tt(r[0][0])?b||r[0][0].length:b||1;for(var _=U.shape(r),x=1,E=0;E<_.length;++E)x*=_[E];var S=wt(e,x);U.flatten(r,_,"",S),Et(e,S),e.alignment=1,e.width=y,e.height=g,e.channels=b,e.format=e.internalformat=rt[b],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;5126===e.type?w(o.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):36193===e.type&&w(o.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function C(t,e,r){var o=t.element,a=t.data,u=t.internalformat,s=t.format,c=t.type,f=t.width,l=t.height;D(t),o?n.texImage2D(e,r,s,s,c,o):t.compressed?n.compressedTexImage2D(e,r,u,f,l,0,a):t.needsCopy?(i(),n.copyTexImage2D(e,r,s,t.xOffset,t.yOffset,f,l,0)):n.texImage2D(e,r,s,f,l,0,s,c,a||null)}function N(t,e,r,o,a){var u=t.element,s=t.data,c=t.internalformat,f=t.format,l=t.type,h=t.width,d=t.height;D(t),u?n.texSubImage2D(e,a,r,o,f,l,u):t.compressed?n.compressedTexSubImage2D(e,a,r,o,c,h,d,s):t.needsCopy?(i(),n.copyTexSubImage2D(e,a,r,o,t.xOffset,t.yOffset,h,d)):n.texSubImage2D(e,a,r,o,h,d,f,l,s)}var P=[];function B(){return P.pop()||new R}function F(t){t.needsFree&&G.freeType(t.data),R.call(t),P.push(t)}function z(){I.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function V(t,e,n){var r=t.images[0]=B();t.mipmask=1,r.width=t.width=e,r.height=t.height=n,r.channels=t.channels=4}function W(t,e){var n=null;if(_t(e))k(n=t.images[0]=B(),t),M(n,e),t.mipmask=1;else if(O(t,e),Array.isArray(e.mipmap))for(var r=e.mipmap,o=0;o<r.length;++o)k(n=t.images[o]=B(),t),n.width>>=o,n.height>>=o,M(n,r[o]),t.mipmask|=1<<o;else k(n=t.images[0]=B(),t),M(n,e),t.mipmask=1;k(t,t.images[0]),!t.compressed||33776!==t.internalformat&&33777!==t.internalformat&&33778!==t.internalformat&&33779!==t.internalformat||w(t.width%4==0&&t.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function X(t,e){for(var n=t.images,r=0;r<n.length;++r){if(!n[r])return;C(n[r],e,r)}}var H=[];function q(){var t=H.pop()||new z;I.call(t),t.mipmask=0;for(var e=0;e<16;++e)t.images[e]=null;return t}function Y(t){for(var e=t.images,n=0;n<e.length;++n)e[n]&&F(e[n]),e[n]=null;H.push(t)}function K(){this.minFilter=9728,this.magFilter=9728,this.wrapS=33071,this.wrapT=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Z(t,e){if("min"in e){var n=e.min;w.parameter(n,d),t.minFilter=d[n],nt.indexOf(t.minFilter)>=0&&!("faces"in e)&&(t.genMipmaps=!0)}if("mag"in e){var r=e.mag;w.parameter(r,h),t.magFilter=h[r]}var i=t.wrapS,u=t.wrapT;if("wrap"in e){var s=e.wrap;"string"==typeof s?(w.parameter(s,l),i=u=l[s]):Array.isArray(s)&&(w.parameter(s[0],l),w.parameter(s[1],l),i=l[s[0]],u=l[s[1]])}else{if("wrapS"in e){var c=e.wrapS;w.parameter(c,l),i=l[c]}if("wrapT"in e){var p=e.wrapT;w.parameter(p,l),u=l[p]}}if(t.wrapS=i,t.wrapT=u,"anisotropic"in e){var v=e.anisotropic;w("number"==typeof v&&v>=1&&v<=o.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic}if("mipmap"in e){var m=!1;switch(a(e.mipmap)){case"string":w.parameter(e.mipmap,f,"invalid mipmap hint"),t.mipmapHint=f[e.mipmap],t.genMipmaps=!0,m=!0;break;case"boolean":m=t.genMipmaps=e.mipmap;break;case"object":w(Array.isArray(e.mipmap),"invalid mipmap type"),t.genMipmaps=!1,m=!0;break;default:w.raise("invalid mipmap type")}m&&!("min"in e)&&(t.minFilter=9984)}}function Q(t,e){n.texParameteri(e,10241,t.minFilter),n.texParameteri(e,10240,t.magFilter),n.texParameteri(e,10242,t.wrapS),n.texParameteri(e,10243,t.wrapT),r.ext_texture_filter_anisotropic&&n.texParameteri(e,34046,t.anisotropic),t.genMipmaps&&(n.hint(33170,t.mipmapHint),n.generateMipmap(e))}var J=0,it={},at=o.maxTextureUnits,ut=Array(at).map((function(){return null}));function ht(t){I.call(this),this.mipmask=0,this.internalformat=6408,this.id=J++,this.refCount=1,this.target=t,this.texture=n.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new K,c.profile&&(this.stats={size:0})}function dt(t){n.activeTexture(33984),n.bindTexture(t.target,t.texture)}function pt(){var t=ut[0];t?n.bindTexture(t.target,t.texture):n.bindTexture(3553,null)}function Tt(t){var e=t.texture;w(e,"must not double destroy texture");var r=t.unit,o=t.target;r>=0&&(n.activeTexture(33984+r),n.bindTexture(o,null),ut[r]=null),n.deleteTexture(e),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete it[t.id],s.textureCount--}return e(ht.prototype,{bind:function(){this.bindCount+=1;var t=this.unit;if(t<0){for(var e=0;e<at;++e){var r=ut[e];if(r){if(r.bindCount>0)continue;r.unit=-1}ut[e]=this,t=e;break}t>=at&&w.raise("insufficient number of texture units"),c.profile&&s.maxTextureUnits<t+1&&(s.maxTextureUnits=t+1),this.unit=t,n.activeTexture(33984+t),n.bindTexture(this.target,this.texture)}return t},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Tt(this)}}),c.profile&&(s.getTotalTextureSize=function(){var t=0;return Object.keys(it).forEach((function(e){t+=it[e].stats.size})),t}),{create2D:function(t,e){var r=new ht(3553);function i(t,e){var n=r.texInfo;K.call(n);var a=q();return"number"==typeof t?V(a,0|t,"number"==typeof e?0|e:0|t):t?(w.type(t,"object","invalid arguments to regl.texture"),Z(n,t),W(a,t)):V(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),r.mipmask=a.mipmask,k(r,a),w.texture2D(n,a,o),r.internalformat=a.internalformat,i.width=a.width,i.height=a.height,dt(r),X(a,3553),Q(n,3553),pt(),Y(a),c.profile&&(r.stats.size=St(r.internalformat,r.type,a.width,a.height,n.genMipmaps,!1)),i.format=_[r.internalformat],i.type=x[r.type],i.mag=E[n.magFilter],i.min=S[n.minFilter],i.wrapS=T[n.wrapS],i.wrapT=T[n.wrapT],i}return it[r.id]=r,s.textureCount++,i(t,e),i.subimage=function(t,e,n,o){w(!!t,"must specify image data");var a=0|e,u=0|n,s=0|o,c=B();return k(c,r),c.width=0,c.height=0,M(c,t),c.width=c.width||(r.width>>s)-a,c.height=c.height||(r.height>>s)-u,w(r.type===c.type&&r.format===c.format&&r.internalformat===c.internalformat,"incompatible format for texture.subimage"),w(a>=0&&u>=0&&a+c.width<=r.width&&u+c.height<=r.height,"texture.subimage write out of bounds"),w(r.mipmask&1<<s,"missing mipmap data"),w(c.data||c.element||c.needsCopy,"missing image data"),dt(r),N(c,3553,a,u,s),pt(),F(c),i},i.resize=function(t,e){var o=0|t,a=0|e||o;if(o===r.width&&a===r.height)return i;i.width=r.width=o,i.height=r.height=a,dt(r);for(var u=0;r.mipmask>>u;++u){var s=o>>u,f=a>>u;if(!s||!f)break;n.texImage2D(3553,u,r.format,s,f,0,r.format,r.type,null)}return pt(),c.profile&&(r.stats.size=St(r.internalformat,r.type,o,a,!1,!1)),i},i._reglType="texture2d",i._texture=r,c.profile&&(i.stats=r.stats),i.destroy=function(){r.decRef()},i},createCube:function(t,e,r,i,u,f){var l=new ht(34067);it[l.id]=l,s.cubeCount++;var h=new Array(6);function d(t,e,n,r,i,u){var s,f=l.texInfo;for(K.call(f),s=0;s<6;++s)h[s]=q();if("number"!=typeof t&&t)if("object"===a(t))if(e)W(h[0],t),W(h[1],e),W(h[2],n),W(h[3],r),W(h[4],i),W(h[5],u);else if(Z(f,t),O(l,t),"faces"in t){var p=t.faces;for(w(Array.isArray(p)&&6===p.length,"cube faces must be a length 6 array"),s=0;s<6;++s)w("object"===a(p[s])&&!!p[s],"invalid input for cube map face"),k(h[s],l),W(h[s],p[s])}else for(s=0;s<6;++s)W(h[s],t);else w.raise("invalid arguments to cube map");else{var v=0|t||1;for(s=0;s<6;++s)V(h[s],v,v)}for(k(l,h[0]),o.npotTextureCube||w(et(l.width)&&et(l.height),"your browser does not support non power or two texture dimensions"),f.genMipmaps?l.mipmask=(h[0].width<<1)-1:l.mipmask=h[0].mipmask,w.textureCube(l,f,h,o),l.internalformat=h[0].internalformat,d.width=h[0].width,d.height=h[0].height,dt(l),s=0;s<6;++s)X(h[s],34069+s);for(Q(f,34067),pt(),c.profile&&(l.stats.size=St(l.internalformat,l.type,d.width,d.height,f.genMipmaps,!0)),d.format=_[l.internalformat],d.type=x[l.type],d.mag=E[f.magFilter],d.min=S[f.minFilter],d.wrapS=T[f.wrapS],d.wrapT=T[f.wrapT],s=0;s<6;++s)Y(h[s]);return d}return d(t,e,r,i,u,f),d.subimage=function(t,e,n,r,o){w(!!e,"must specify image data"),w("number"==typeof t&&t===(0|t)&&t>=0&&t<6,"invalid face");var i=0|n,a=0|r,u=0|o,s=B();return k(s,l),s.width=0,s.height=0,M(s,e),s.width=s.width||(l.width>>u)-i,s.height=s.height||(l.height>>u)-a,w(l.type===s.type&&l.format===s.format&&l.internalformat===s.internalformat,"incompatible format for texture.subimage"),w(i>=0&&a>=0&&i+s.width<=l.width&&a+s.height<=l.height,"texture.subimage write out of bounds"),w(l.mipmask&1<<u,"missing mipmap data"),w(s.data||s.element||s.needsCopy,"missing image data"),dt(l),N(s,34069+t,i,a,u),pt(),F(s),d},d.resize=function(t){var e=0|t;if(e!==l.width){d.width=l.width=e,d.height=l.height=e,dt(l);for(var r=0;r<6;++r)for(var o=0;l.mipmask>>o;++o)n.texImage2D(34069+r,o,l.format,e>>o,e>>o,0,l.format,l.type,null);return pt(),c.profile&&(l.stats.size=St(l.internalformat,l.type,d.width,d.height,!1,!0)),d}},d._reglType="textureCube",d._texture=l,c.profile&&(d.stats=l.stats),d.destroy=function(){l.decRef()},d},clear:function(){for(var t=0;t<at;++t)n.activeTexture(33984+t),n.bindTexture(3553,null),ut[t]=null;L(it).forEach(Tt),s.cubeCount=0,s.textureCount=0},getTexture:function(t){return null},restore:function(){for(var t=0;t<at;++t){var e=ut[t];e&&(e.bindCount=0,e.unit=-1,ut[t]=null)}L(it).forEach((function(t){t.texture=n.createTexture(),n.bindTexture(t.target,t.texture);for(var e=0;e<32;++e)if(0!=(t.mipmask&1<<e))if(3553===t.target)n.texImage2D(3553,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);else for(var r=0;r<6;++r)n.texImage2D(34069+r,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);Q(t.texInfo,t.target)}))},refresh:function(){for(var t=0;t<at;++t){var e=ut[t];e&&(e.bindCount=0,e.unit=-1,ut[t]=null),n.activeTexture(33984+t),n.bindTexture(3553,null),n.bindTexture(34067,null)}}}}pt[32854]=2,pt[32855]=2,pt[36194]=2,pt[34041]=4,pt[33776]=.5,pt[33777]=.5,pt[33778]=1,pt[33779]=1,pt[35986]=.5,pt[35987]=1,pt[34798]=1,pt[35840]=.5,pt[35841]=.25,pt[35842]=.5,pt[35843]=.25,pt[36196]=.5;var At=[];function It(t,e,n){return At[t]*e*n}At[32854]=2,At[32855]=2,At[36194]=2,At[33189]=2,At[36168]=1,At[34041]=4,At[35907]=4,At[34836]=16,At[34842]=8,At[34843]=6;var kt=[6407,6408],Ot=[];Ot[6408]=4,Ot[6407]=3;var Dt=[];Dt[5121]=1,Dt[5126]=4,Dt[36193]=2;var Rt=[32854,32855,36194,35907,34842,34843,34836],Mt={};function Ct(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0}function Nt(e,n,r,o,i,a,u){function s(s){var c;null===n.next?(w(i.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),c=5121):(w(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),c=n.next.colorAttachments[0].texture._texture.type,a.oes_texture_float?(w(5121===c||5126===c,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===c&&w(u.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):w(5121===c,"Reading from a framebuffer is only allowed for the type 'uint8'"));var f=0,l=0,h=o.framebufferWidth,d=o.framebufferHeight,p=null;t(s)?p=s:s&&(w.type(s,"object","invalid arguments to regl.read()"),f=0|s.x,l=0|s.y,w(f>=0&&f<o.framebufferWidth,"invalid x offset for regl.read"),w(l>=0&&l<o.framebufferHeight,"invalid y offset for regl.read"),h=0|(s.width||o.framebufferWidth-f),d=0|(s.height||o.framebufferHeight-l),p=s.data||null),p&&(5121===c?w(p instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===c&&w(p instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),w(h>0&&h+f<=o.framebufferWidth,"invalid width for read pixels"),w(d>0&&d+l<=o.framebufferHeight,"invalid height for read pixels"),r();var v=h*d*4;return p||(5121===c?p=new Uint8Array(v):5126===c&&(p=p||new Float32Array(v))),w.isTypedArray(p,"data buffer for regl.read() must be a typedarray"),w(p.byteLength>=v,"data buffer for regl.read() too small"),e.pixelStorei(3333,4),e.readPixels(f,l,h,d,6408,c,p),p}return function(t){return t&&"framebuffer"in t?function(t){var e;return n.setFBO({framebuffer:t.framebuffer},(function(){e=s(t)})),e}(t):s(t)}}function Pt(t){return Array.prototype.slice.call(t)}function Gt(t){return Pt(t).join("")}Mt[36053]="complete",Mt[36054]="incomplete attachment",Mt[36057]="incomplete dimensions",Mt[36055]="incomplete, missing attachment",Mt[36061]="unsupported";var jt="xyzw".split(""),Lt="profile",Ut="framebuffer",Bt="vert",Ft="frag",zt="elements",Vt="primitive",Wt="count",Xt="offset",Ht="instances",qt="vao",Yt=Ut+"Width",Kt=Ut+"Height",Zt=["blend.func","blend.equation","stencil.func","stencil.opFront","stencil.opBack","sample.coverage","viewport","scissor.box","polygonOffset.offset"],Qt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Jt=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],$t={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},te={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ee={frag:35632,vert:35633},ne={cw:2304,ccw:2305};function re(e){return Array.isArray(e)||t(e)||j(e)}function oe(t){return t.sort((function(t,e){return"viewport"===t?-1:"viewport"===e?1:t<e?-1:1}))}function ie(t,e,n,r){this.thisDep=t,this.contextDep=e,this.propDep=n,this.append=r}function ae(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function ue(t){return new ie(!1,!1,!1,t)}function se(t,e){var n=t.type;if(0===n){var r=t.data.length;return new ie(!0,r>=1,r>=2,e)}if(4===n){var o=t.data;return new ie(o.thisDep,o.contextDep,o.propDep,e)}if(5===n)return new ie(!1,!1,!1,e);if(6===n){for(var i=!1,a=!1,u=!1,s=0;s<t.data.length;++s){var c=t.data[s];if(1===c.type)u=!0;else if(2===c.type)a=!0;else if(3===c.type)i=!0;else if(0===c.type){i=!0;var f=c.data;f>=1&&(a=!0),f>=2&&(u=!0)}else 4===c.type&&(i=i||c.data.thisDep,a=a||c.data.contextDep,u=u||c.data.propDep)}return new ie(i,a,u,e)}return new ie(3===n,2===n,1===n,e)}var ce=new ie(!1,!1,!1,(function(){}));function fe(t,n,r,o,i,u,s,c,f,l,h,d,p,v,m){var y=l.Record,g={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(g.min=32775,g.max=32776);var b=r.angle_instanced_arrays,_=r.webgl_draw_buffers,x={dirty:!0,profile:m.profile},E={},S=[],T={},A={};function k(t){return t.replace(".","_")}function O(t,e,n){var r=k(t);S.push(t),E[r]=x[r]=!!n,T[r]=e}function D(t,e,n){var r=k(t);S.push(t),Array.isArray(n)?(x[r]=n.slice(),E[r]=n.slice()):x[r]=E[r]=n,A[r]=e}O("dither",3024),O("blend.enable",3042),D("blend.color","blendColor",[0,0,0,0]),D("blend.equation","blendEquationSeparate",[32774,32774]),D("blend.func","blendFuncSeparate",[1,0,1,0]),O("depth.enable",2929,!0),D("depth.func","depthFunc",513),D("depth.range","depthRange",[0,1]),D("depth.mask","depthMask",!0),D("colorMask","colorMask",[!0,!0,!0,!0]),O("cull.enable",2884),D("cull.face","cullFace",1029),D("frontFace","frontFace",2305),D("lineWidth","lineWidth",1),O("polygonOffset.enable",32823),D("polygonOffset.offset","polygonOffset",[0,0]),O("sample.alpha",32926),O("sample.enable",32928),D("sample.coverage","sampleCoverage",[1,!1]),O("stencil.enable",2960),D("stencil.mask","stencilMask",-1),D("stencil.func","stencilFunc",[519,0,-1]),D("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),D("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),O("scissor.enable",3089),D("scissor.box","scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),D("viewport","viewport",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var R={gl:t,context:p,strings:n,next:E,current:x,draw:d,elements:u,buffer:i,shader:h,attributes:l.state,vao:l,uniforms:f,framebuffer:c,extensions:r,timer:v,isBufferArgs:re},M={primTypes:Z,compareFuncs:$t,blendFuncs:Qt,blendEquations:g,stencilOps:te,glTypes:z,orientationType:ne};w.optional((function(){R.isArrayLike=tt})),_&&(M.backBuffer=[1029],M.drawBuffer=C(o.maxDrawbuffers,(function(t){return 0===t?[0]:C(t,(function(t){return 36064+t}))})));var N=0;function P(){var t=function(){var t=0,n=[],r=[];function o(){var n=[],r=[];return e((function(){n.push.apply(n,Pt(arguments))}),{def:function(){var e="v"+t++;return r.push(e),arguments.length>0&&(n.push(e,"="),n.push.apply(n,Pt(arguments)),n.push(";")),e},toString:function(){return Gt([r.length>0?"var "+r.join(",")+";":"",Gt(n)])}})}function i(){var t=o(),n=o(),r=t.toString,i=n.toString;function a(e,r){n(e,r,"=",t.def(e,r),";")}return e((function(){t.apply(t,Pt(arguments))}),{def:t.def,entry:t,exit:n,save:a,set:function(e,n,r){a(e,n),t(e,n,"=",r,";")},toString:function(){return r()+i()}})}var a=o(),u={};return{global:a,link:function(e){for(var o=0;o<r.length;++o)if(r[o]===e)return n[o];var i="g"+t++;return n.push(i),r.push(e),i},block:o,proc:function(t,n){var r=[];function o(){var t="a"+r.length;return r.push(t),t}n=n||0;for(var a=0;a<n;++a)o();var s=i(),c=s.toString;return u[t]=e(s,{arg:o,toString:function(){return Gt(["function(",r.join(),"){",c(),"}"])}})},scope:i,cond:function(){var t=Gt(arguments),n=i(),r=i(),o=n.toString,a=r.toString;return e(n,{then:function(){return n.apply(n,Pt(arguments)),this},else:function(){return r.apply(r,Pt(arguments)),this},toString:function(){var e=a();return e&&(e="else{"+e+"}"),Gt(["if(",t,"){",o(),"}",e])}})},compile:function(){var t=['"use strict";',a,"return {"];Object.keys(u).forEach((function(e){t.push('"',e,'":',u[e].toString(),",")})),t.push("}");var e=Gt(t).replace(/;/g,";\\n").replace(/}/g,"}\\n").replace(/{/g,"{\\n");return Function.apply(null,n.concat(e)).apply(null,r)}}}(),r=t.link,o=t.global;t.id=N++,t.batchId="0";var i=r(R),a=t.shared={props:"a0"};Object.keys(R).forEach((function(t){a[t]=o.def(i,".",t)})),w.optional((function(){t.CHECK=r(w),t.commandStr=w.guessCommand(),t.command=r(t.commandStr),t.assert=function(t,e,n){t("if(!(",e,"))",this.CHECK,".commandRaise(",r(n),",",this.command,");")},M.invalidBlendCombinations=Jt}));var u=t.next={},s=t.current={};Object.keys(A).forEach((function(t){Array.isArray(x[t])&&(u[t]=o.def(a.next,".",t),s[t]=o.def(a.current,".",t))}));var c=t.constants={};Object.keys(M).forEach((function(t){c[t]=o.def(JSON.stringify(M[t]))})),t.invoke=function(e,n){switch(n.type){case 0:var o=["this",a.context,a.props,t.batchId];return e.def(r(n.data),".call(",o.slice(0,Math.max(n.data.length+1,4)),")");case 1:return e.def(a.props,n.data);case 2:return e.def(a.context,n.data);case 3:return e.def("this",n.data);case 4:return n.data.append(t,e),n.data.ref;case 5:return n.data.toString();case 6:return n.data.map((function(n){return t.invoke(e,n)}))}},t.attribCache={};var f={};return t.scopeAttrib=function(t){var e=n.id(t);if(e in f)return f[e];var o=l.scope[e];return o||(o=l.scope[e]=new y),f[e]=r(o)},t}function G(t,e,s,f,d){var p=t.static,v=t.dynamic;w.optional((function(){var t=[Ut,Bt,Ft,zt,Vt,Xt,Wt,Ht,Lt,qt].concat(S);function e(e){Object.keys(e).forEach((function(e){w.command(t.indexOf(e)>=0,'unknown parameter "'+e+'"',d.commandStr)}))}e(p),e(v)}));var m=function(t,e){var n=t.static;if("string"==typeof n[Ft]&&"string"==typeof n[Bt]){if(Object.keys(e.dynamic).length>0)return null;var r=e.static,o=Object.keys(r);if(o.length>0&&"number"==typeof r[o[0]]){for(var i=[],a=0;a<o.length;++a)w("number"==typeof r[o[a]],"must specify all vertex attribute locations when using vaos"),i.push([0|r[o[a]],o[a]]);return i}}return null}(t,e),_=function(t,e){var n=t.static,r=t.dynamic;if(Ut in n){var o=n[Ut];return o?(o=c.getFramebuffer(o),w.command(o,"invalid framebuffer object"),ue((function(t,e){var n=t.link(o),r=t.shared;e.set(r.framebuffer,".next",n);var i=r.context;return e.set(i,"."+Yt,n+".width"),e.set(i,"."+Kt,n+".height"),n}))):ue((function(t,e){var n=t.shared;e.set(n.framebuffer,".next","null");var r=n.context;return e.set(r,"."+Yt,r+".drawingBufferWidth"),e.set(r,"."+Kt,r+".drawingBufferHeight"),"null"}))}if(Ut in r){var i=r[Ut];return se(i,(function(t,e){var n=t.invoke(e,i),r=t.shared,o=r.framebuffer,a=e.def(o,".getFramebuffer(",n,")");w.optional((function(){t.assert(e,"!"+n+"||"+a,"invalid framebuffer object")})),e.set(o,".next",a);var u=r.context;return e.set(u,"."+Yt,a+"?"+a+".width:"+u+".drawingBufferWidth"),e.set(u,"."+Kt,a+"?"+a+".height:"+u+".drawingBufferHeight"),a}))}return null}(t),x=function(t,e,n){var r=t.static,o=t.dynamic;function i(t){if(t in r){var i=r[t];w.commandType(i,"object","invalid "+t,n.commandStr);var a,u,s=!0,c=0|i.x,f=0|i.y;return"width"in i?(a=0|i.width,w.command(a>=0,"invalid "+t,n.commandStr)):s=!1,"height"in i?(u=0|i.height,w.command(u>=0,"invalid "+t,n.commandStr)):s=!1,new ie(!s&&e&&e.thisDep,!s&&e&&e.contextDep,!s&&e&&e.propDep,(function(t,e){var n=t.shared.context,r=a;"width"in i||(r=e.def(n,".",Yt,"-",c));var o=u;return"height"in i||(o=e.def(n,".",Kt,"-",f)),[c,f,r,o]}))}if(t in o){var l=o[t],h=se(l,(function(e,n){var r=e.invoke(n,l);w.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}));var o=e.shared.context,i=n.def(r,".x|0"),a=n.def(r,".y|0"),u=n.def('"width" in ',r,"?",r,".width|0:","(",o,".",Yt,"-",i,")"),s=n.def('"height" in ',r,"?",r,".height|0:","(",o,".",Kt,"-",a,")");return w.optional((function(){e.assert(n,u+">=0&&"+s+">=0","invalid "+t)})),[i,a,u,s]}));return e&&(h.thisDep=h.thisDep||e.thisDep,h.contextDep=h.contextDep||e.contextDep,h.propDep=h.propDep||e.propDep),h}return e?new ie(e.thisDep,e.contextDep,e.propDep,(function(t,e){var n=t.shared.context;return[0,0,e.def(n,".",Yt),e.def(n,".",Kt)]})):null}var a=i("viewport");if(a){var u=a;a=new ie(a.thisDep,a.contextDep,a.propDep,(function(t,e){var n=u.append(t,e),r=t.shared.context;return e.set(r,".viewportWidth",n[2]),e.set(r,".viewportHeight",n[3]),n}))}return{viewport:a,scissor_box:i("scissor.box")}}(t,_,d),E=function(t,e){var n=t.static,r=t.dynamic,o=function(){if(zt in n){var t=n[zt];re(t)?t=u.getElements(u.create(t,!0)):t&&(t=u.getElements(t),w.command(t,"invalid elements",e.commandStr));var o=ue((function(e,n){if(t){var r=e.link(t);return e.ELEMENTS=r,r}return e.ELEMENTS=null,null}));return o.value=t,o}if(zt in r){var i=r[zt];return se(i,(function(t,e){var n=t.shared,r=n.isBufferArgs,o=n.elements,a=t.invoke(e,i),u=e.def("null"),s=e.def(r,"(",a,")"),c=t.cond(s).then(u,"=",o,".createStream(",a,");").else(u,"=",o,".getElements(",a,");");return w.optional((function(){t.assert(c.else,"!"+a+"||"+u,"invalid elements")})),e.entry(c),e.exit(t.cond(s).then(o,".destroyStream(",u,");")),t.ELEMENTS=u,u}))}return null}();function i(t,i){if(t in n){var a=0|n[t];return w.command(!i||a>=0,"invalid "+t,e.commandStr),ue((function(t,e){return i&&(t.OFFSET=a),a}))}if(t in r){var u=r[t];return se(u,(function(e,n){var r=e.invoke(n,u);return i&&(e.OFFSET=r,w.optional((function(){e.assert(n,r+">=0","invalid "+t)}))),r}))}return i&&o?ue((function(t,e){return t.OFFSET="0",0})):null}var a=i(Xt,!0);return{elements:o,primitive:function(){if(Vt in n){var t=n[Vt];return w.commandParameter(t,Z,"invalid primitve",e.commandStr),ue((function(e,n){return Z[t]}))}if(Vt in r){var i=r[Vt];return se(i,(function(t,e){var n=t.constants.primTypes,r=t.invoke(e,i);return w.optional((function(){t.assert(e,r+" in "+n,"invalid primitive, must be one of "+Object.keys(Z))})),e.def(n,"[",r,"]")}))}return o?ae(o)?o.value?ue((function(t,e){return e.def(t.ELEMENTS,".primType")})):ue((function(){return 4})):new ie(o.thisDep,o.contextDep,o.propDep,(function(t,e){var n=t.ELEMENTS;return e.def(n,"?",n,".primType:",4)})):null}(),count:function(){if(Wt in n){var t=0|n[Wt];return w.command("number"==typeof t&&t>=0,"invalid vertex count",e.commandStr),ue((function(){return t}))}if(Wt in r){var i=r[Wt];return se(i,(function(t,e){var n=t.invoke(e,i);return w.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")})),n}))}if(o){if(ae(o)){if(o)return a?new ie(a.thisDep,a.contextDep,a.propDep,(function(t,e){var n=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return w.optional((function(){t.assert(e,n+">=0","invalid vertex offset/element buffer too small")})),n})):ue((function(t,e){return e.def(t.ELEMENTS,".vertCount")}));var u=ue((function(){return-1}));return w.optional((function(){u.MISSING=!0})),u}var s=new ie(o.thisDep||a.thisDep,o.contextDep||a.contextDep,o.propDep||a.propDep,(function(t,e){var n=t.ELEMENTS;return t.OFFSET?e.def(n,"?",n,".vertCount-",t.OFFSET,":-1"):e.def(n,"?",n,".vertCount:-1")}));return w.optional((function(){s.DYNAMIC=!0})),s}return null}(),instances:i(Ht,!1),offset:a}}(t,d),T=function(t,e){var n=t.static,r=t.dynamic,i={};return S.forEach((function(t){var u=k(t);function s(e,o){if(t in n){var a=e(n[t]);i[u]=ue((function(){return a}))}else if(t in r){var s=r[t];i[u]=se(s,(function(t,e){return o(t,e,t.invoke(e,s))}))}}switch(t){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return s((function(n){return w.commandType(n,"boolean",t,e.commandStr),n}),(function(e,n,r){return w.optional((function(){e.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+t,e.commandStr)})),r}));case"depth.func":return s((function(n){return w.commandParameter(n,$t,"invalid "+t,e.commandStr),$t[n]}),(function(e,n,r){var o=e.constants.compareFuncs;return w.optional((function(){e.assert(n,r+" in "+o,"invalid "+t+", must be one of "+Object.keys($t))})),n.def(o,"[",r,"]")}));case"depth.range":return s((function(t){return w.command(tt(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]&&t[0]<=t[1],"depth range is 2d array",e.commandStr),t}),(function(t,e,n){return w.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")})),[e.def("+",n,"[0]"),e.def("+",n,"[1]")]}));case"blend.func":return s((function(t){w.commandType(t,"object","blend.func",e.commandStr);var n="srcRGB"in t?t.srcRGB:t.src,r="srcAlpha"in t?t.srcAlpha:t.src,o="dstRGB"in t?t.dstRGB:t.dst,i="dstAlpha"in t?t.dstAlpha:t.dst;return w.commandParameter(n,Qt,u+".srcRGB",e.commandStr),w.commandParameter(r,Qt,u+".srcAlpha",e.commandStr),w.commandParameter(o,Qt,u+".dstRGB",e.commandStr),w.commandParameter(i,Qt,u+".dstAlpha",e.commandStr),w.command(-1===Jt.indexOf(n+", "+o),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+o+")",e.commandStr),[Qt[n],Qt[o],Qt[r],Qt[i]]}),(function(e,n,r){var o=e.constants.blendFuncs;function i(i,a){var u=n.def('"',i,a,'" in ',r,"?",r,".",i,a,":",r,".",i);return w.optional((function(){e.assert(n,u+" in "+o,"invalid "+t+"."+i+a+", must be one of "+Object.keys(Qt))})),u}w.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")}));var a=i("src","RGB"),u=i("dst","RGB");w.optional((function(){var t=e.constants.invalidBlendCombinations;e.assert(n,t+".indexOf("+a+'+", "+'+u+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}));var s=n.def(o,"[",a,"]"),c=n.def(o,"[",i("src","Alpha"),"]");return[s,n.def(o,"[",u,"]"),c,n.def(o,"[",i("dst","Alpha"),"]")]}));case"blend.equation":return s((function(n){return"string"==typeof n?(w.commandParameter(n,g,"invalid "+t,e.commandStr),[g[n],g[n]]):"object"===a(n)?(w.commandParameter(n.rgb,g,t+".rgb",e.commandStr),w.commandParameter(n.alpha,g,t+".alpha",e.commandStr),[g[n.rgb],g[n.alpha]]):void w.commandRaise("invalid blend.equation",e.commandStr)}),(function(e,n,r){var o=e.constants.blendEquations,i=n.def(),a=n.def(),u=e.cond("typeof ",r,'==="string"');return w.optional((function(){function n(t,n,r){e.assert(t,r+" in "+o,"invalid "+n+", must be one of "+Object.keys(g))}n(u.then,t,r),e.assert(u.else,r+"&&typeof "+r+'==="object"',"invalid "+t),n(u.else,t+".rgb",r+".rgb"),n(u.else,t+".alpha",r+".alpha")})),u.then(i,"=",a,"=",o,"[",r,"];"),u.else(i,"=",o,"[",r,".rgb];",a,"=",o,"[",r,".alpha];"),n(u),[i,a]}));case"blend.color":return s((function(t){return w.command(tt(t)&&4===t.length,"blend.color must be a 4d array",e.commandStr),C(4,(function(e){return+t[e]}))}),(function(t,e,n){return w.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")})),C(4,(function(t){return e.def("+",n,"[",t,"]")}))}));case"stencil.mask":return s((function(t){return w.commandType(t,"number",u,e.commandStr),0|t}),(function(t,e,n){return w.optional((function(){t.assert(e,"typeof "+n+'==="number"',"invalid stencil.mask")})),e.def(n,"|0")}));case"stencil.func":return s((function(n){w.commandType(n,"object",u,e.commandStr);var r=n.cmp||"keep",o=n.ref||0,i="mask"in n?n.mask:-1;return w.commandParameter(r,$t,t+".cmp",e.commandStr),w.commandType(o,"number",t+".ref",e.commandStr),w.commandType(i,"number",t+".mask",e.commandStr),[$t[r],o,i]}),(function(t,e,n){var r=t.constants.compareFuncs;return w.optional((function(){function o(){t.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}o(n+"&&typeof ",n,'==="object"'),o('!("cmp" in ',n,")||(",n,".cmp in ",r,")")})),[e.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",7680),e.def(n,".ref|0"),e.def('"mask" in ',n,"?",n,".mask|0:-1")]}));case"stencil.opFront":case"stencil.opBack":return s((function(n){w.commandType(n,"object",u,e.commandStr);var r=n.fail||"keep",o=n.zfail||"keep",i=n.zpass||"keep";return w.commandParameter(r,te,t+".fail",e.commandStr),w.commandParameter(o,te,t+".zfail",e.commandStr),w.commandParameter(i,te,t+".zpass",e.commandStr),["stencil.opBack"===t?1029:1028,te[r],te[o],te[i]]}),(function(e,n,r){var o=e.constants.stencilOps;function i(i){return w.optional((function(){e.assert(n,'!("'+i+'" in '+r+")||("+r+"."+i+" in "+o+")","invalid "+t+"."+i+", must be one of "+Object.keys(te))})),n.def('"',i,'" in ',r,"?",o,"[",r,".",i,"]:",7680)}return w.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)})),["stencil.opBack"===t?1029:1028,i("fail"),i("zfail"),i("zpass")]}));case"polygonOffset.offset":return s((function(t){w.commandType(t,"object",u,e.commandStr);var n=0|t.factor,r=0|t.units;return w.commandType(n,"number",u+".factor",e.commandStr),w.commandType(r,"number",u+".units",e.commandStr),[n,r]}),(function(e,n,r){return w.optional((function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)})),[n.def(r,".factor|0"),n.def(r,".units|0")]}));case"cull.face":return s((function(t){var n=0;return"front"===t?n=1028:"back"===t&&(n=1029),w.command(!!n,u,e.commandStr),n}),(function(t,e,n){return w.optional((function(){t.assert(e,n+'==="front"||'+n+'==="back"',"invalid cull.face")})),e.def(n,'==="front"?',1028,":",1029)}));case"lineWidth":return s((function(t){return w.command("number"==typeof t&&t>=o.lineWidthDims[0]&&t<=o.lineWidthDims[1],"invalid line width, must be a positive number between "+o.lineWidthDims[0]+" and "+o.lineWidthDims[1],e.commandStr),t}),(function(t,e,n){return w.optional((function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">="+o.lineWidthDims[0]+"&&"+n+"<="+o.lineWidthDims[1],"invalid line width")})),n}));case"frontFace":return s((function(t){return w.commandParameter(t,ne,u,e.commandStr),ne[t]}),(function(t,e,n){return w.optional((function(){t.assert(e,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")})),e.def(n+'==="cw"?2304:2305')}));case"colorMask":return s((function(t){return w.command(tt(t)&&4===t.length,"color.mask must be length 4 array",e.commandStr),t.map((function(t){return!!t}))}),(function(t,e,n){return w.optional((function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")})),C(4,(function(t){return"!!"+n+"["+t+"]"}))}));case"sample.coverage":return s((function(t){w.command("object"===a(t)&&t,u,e.commandStr);var n="value"in t?t.value:1,r=!!t.invert;return w.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",e.commandStr),[n,r]}),(function(t,e,n){return w.optional((function(){t.assert(e,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")})),[e.def('"value" in ',n,"?+",n,".value:1"),e.def("!!",n,".invert")]}))}})),i}(t,d),A=function(t,e,r){var o=t.static,i=t.dynamic;function a(t){if(t in o){var e=n.id(o[t]);w.optional((function(){h.shader(ee[t],e,w.guessCommand())}));var r=ue((function(){return e}));return r.id=e,r}if(t in i){var a=i[t];return se(a,(function(e,n){var r=e.invoke(n,a),o=n.def(e.shared.strings,".id(",r,")");return w.optional((function(){n(e.shared.shader,".shader(",ee[t],",",o,",",e.command,");")})),o}))}return null}var u,s=a(Ft),c=a(Bt),f=null;return ae(s)&&ae(c)?(f=h.program(c.id,s.id,null,r),u=ue((function(t,e){return t.link(f)}))):u=new ie(s&&s.thisDep||c&&c.thisDep,s&&s.contextDep||c&&c.contextDep,s&&s.propDep||c&&c.propDep,(function(t,e){var n,r=t.shared.shader;n=s?s.append(t,e):e.def(r,".",Ft);var o=r+".program("+(c?c.append(t,e):e.def(r,".",Bt))+","+n;return w.optional((function(){o+=","+t.command})),e.def(o+")")})),{frag:s,vert:c,progVar:u,program:f}}(t,0,m);function I(t){var e=x[t];e&&(T[t]=e)}I("viewport"),I(k("scissor.box"));var O=Object.keys(T).length>0,D={framebuffer:_,draw:E,shader:A,state:T,dirty:O,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(D.profile=function(t){var e,n=t.static,r=t.dynamic;if(Lt in n){var o=!!n[Lt];(e=ue((function(t,e){return o}))).enable=o}else if(Lt in r){var i=r[Lt];e=se(i,(function(t,e){return t.invoke(e,i)}))}return e}(t),D.uniforms=function(t,e){var n=t.static,r=t.dynamic,o={};return Object.keys(n).forEach((function(t){var r,i=n[t];if("number"==typeof i||"boolean"==typeof i)r=ue((function(){return i}));else if("function"==typeof i){var a=i._reglType;"texture2d"===a||"textureCube"===a?r=ue((function(t){return t.link(i)})):"framebuffer"===a||"framebufferCube"===a?(w.command(i.color.length>0,'missing color attachment for framebuffer sent to uniform "'+t+'"',e.commandStr),r=ue((function(t){return t.link(i.color[0])}))):w.commandRaise('invalid data for uniform "'+t+'"',e.commandStr)}else tt(i)?r=ue((function(e){return e.global.def("[",C(i.length,(function(n){return w.command("number"==typeof i[n]||"boolean"==typeof i[n],"invalid uniform "+t,e.commandStr),i[n]})),"]")})):w.commandRaise('invalid or missing data for uniform "'+t+'"',e.commandStr);r.value=i,o[t]=r})),Object.keys(r).forEach((function(t){var e=r[t];o[t]=se(e,(function(t,n){return t.invoke(n,e)}))})),o}(s,d),D.drawVAO=D.scopeVAO=function(t,e){var n=t.static,r=t.dynamic;if(qt in n){var o=n[qt];return null!==o&&null===l.getVAO(o)&&(o=l.createVAO(o)),ue((function(t){return t.link(l.getVAO(o))}))}if(qt in r){var i=r[qt];return se(i,(function(t,e){var n=t.invoke(e,i);return e.def(t.shared.vao+".getVAO("+n+")")}))}return null}(t),!D.drawVAO&&A.program&&!m&&r.angle_instanced_arrays){var R=!0,M=A.program.attributes.map((function(t){var n=e.static[t];return R=R&&!!n,n}));if(R&&M.length>0){var N=l.getVAO(l.createVAO(M));D.drawVAO=new ie(null,null,null,(function(t,e){return t.link(N)})),D.useVAO=!0}}return m?D.useVAO=!0:D.attributes=function(t,e){var r=t.static,o=t.dynamic,u={};return Object.keys(r).forEach((function(t){var o=r[t],s=n.id(t),c=new y;if(re(o))c.state=1,c.buffer=i.getBuffer(i.create(o,34962,!1,!0)),c.type=0;else{var f=i.getBuffer(o);if(f)c.state=1,c.buffer=f,c.type=0;else if(w.command("object"===a(o)&&o,"invalid data for attribute "+t,e.commandStr),"constant"in o){var l=o.constant;c.buffer="null",c.state=2,"number"==typeof l?c.x=l:(w.command(tt(l)&&l.length>0&&l.length<=4,"invalid constant for attribute "+t,e.commandStr),jt.forEach((function(t,e){e<l.length&&(c[t]=l[e])})))}else{f=re(o.buffer)?i.getBuffer(i.create(o.buffer,34962,!1,!0)):i.getBuffer(o.buffer),w.command(!!f,'missing buffer for attribute "'+t+'"',e.commandStr);var h=0|o.offset;w.command(h>=0,'invalid offset for attribute "'+t+'"',e.commandStr);var d=0|o.stride;w.command(d>=0&&d<256,'invalid stride for attribute "'+t+'", must be integer betweeen [0, 255]',e.commandStr);var p=0|o.size;w.command(!("size"in o)||p>0&&p<=4,'invalid size for attribute "'+t+'", must be 1,2,3,4',e.commandStr);var v=!!o.normalized,m=0;"type"in o&&(w.commandParameter(o.type,z,"invalid type for attribute "+t,e.commandStr),m=z[o.type]);var g=0|o.divisor;"divisor"in o&&(w.command(0===g||b,'cannot specify divisor for attribute "'+t+'", instancing not supported',e.commandStr),w.command(g>=0,'invalid divisor for attribute "'+t+'"',e.commandStr)),w.optional((function(){var n=e.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(o).forEach((function(e){w.command(r.indexOf(e)>=0,'unknown parameter "'+e+'" for attribute pointer "'+t+'" (valid parameters are '+r+")",n)}))})),c.buffer=f,c.state=1,c.size=p,c.normalized=v,c.type=m||f.dtype,c.offset=h,c.stride=d,c.divisor=g}}u[t]=ue((function(t,e){var n=t.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(c).forEach((function(t){r[t]=c[t]})),c.buffer&&(r.buffer=t.link(c.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r}))})),Object.keys(o).forEach((function(t){var e=o[t];u[t]=se(e,(function(n,r){var o=n.invoke(r,e),i=n.shared,a=n.constants,u=i.isBufferArgs,s=i.buffer;w.optional((function(){n.assert(r,o+"&&(typeof "+o+'==="object"||typeof '+o+'==="function")&&('+u+"("+o+")||"+s+".getBuffer("+o+")||"+s+".getBuffer("+o+".buffer)||"+u+"("+o+'.buffer)||("constant" in '+o+"&&(typeof "+o+'.constant==="number"||'+i.isArrayLike+"("+o+".constant))))",'invalid dynamic attribute "'+t+'"')}));var c={isStream:r.def(!1)},f=new y;f.state=1,Object.keys(f).forEach((function(t){c[t]=r.def(""+f[t])}));var l=c.buffer,h=c.type;function d(t){r(c[t],"=",o,".",t,"|0;")}return r("if(",u,"(",o,")){",c.isStream,"=true;",l,"=",s,".createStream(",34962,",",o,");",h,"=",l,".dtype;","}else{",l,"=",s,".getBuffer(",o,");","if(",l,"){",h,"=",l,".dtype;",'}else if("constant" in ',o,"){",c.state,"=",2,";","if(typeof "+o+'.constant === "number"){',c[jt[0]],"=",o,".constant;",jt.slice(1).map((function(t){return c[t]})).join("="),"=0;","}else{",jt.map((function(t,e){return c[t]+"="+o+".constant.length>"+e+"?"+o+".constant["+e+"]:0;"})).join(""),"}}else{","if(",u,"(",o,".buffer)){",l,"=",s,".createStream(",34962,",",o,".buffer);","}else{",l,"=",s,".getBuffer(",o,".buffer);","}",h,'="type" in ',o,"?",a.glTypes,"[",o,".type]:",l,".dtype;",c.normalized,"=!!",o,".normalized;"),d("size"),d("offset"),d("stride"),d("divisor"),r("}}"),r.exit("if(",c.isStream,"){",s,".destroyStream(",l,");","}"),c}))})),u}(e,d),D.context=function(t){var e=t.static,n=t.dynamic,r={};return Object.keys(e).forEach((function(t){var n=e[t];r[t]=ue((function(t,e){return"number"==typeof n||"boolean"==typeof n?""+n:t.link(n)}))})),Object.keys(n).forEach((function(t){var e=n[t];r[t]=se(e,(function(t,n){return t.invoke(n,e)}))})),r}(f),D}function j(t,e,n){var r=t.shared.context,o=t.scope();Object.keys(n).forEach((function(i){e.save(r,"."+i);var a=n[i].append(t,e);Array.isArray(a)?o(r,".",i,"=[",a.join(),"];"):o(r,".",i,"=",a,";")})),e(o)}function L(t,e,n,r){var o,i=t.shared,a=i.gl,u=i.framebuffer;_&&(o=e.def(i.extensions,".webgl_draw_buffers"));var s,c=t.constants,f=c.drawBuffer,l=c.backBuffer;s=n?n.append(t,e):e.def(u,".next"),r||e("if(",s,"!==",u,".cur){"),e("if(",s,"){",a,".bindFramebuffer(",36160,",",s,".framebuffer);"),_&&e(o,".drawBuffersWEBGL(",f,"[",s,".colorAttachments.length]);"),e("}else{",a,".bindFramebuffer(",36160,",null);"),_&&e(o,".drawBuffersWEBGL(",l,");"),e("}",u,".cur=",s,";"),r||e("}")}function U(t,e,n){var r=t.shared,o=r.gl,i=t.current,a=t.next,u=r.current,s=r.next,c=t.cond(u,".dirty");S.forEach((function(e){var r,f,l=k(e);if(!(l in n.state))if(l in a){r=a[l],f=i[l];var h=C(x[l].length,(function(t){return c.def(r,"[",t,"]")}));c(t.cond(h.map((function(t,e){return t+"!=="+f+"["+e+"]"})).join("||")).then(o,".",A[l],"(",h,");",h.map((function(t,e){return f+"["+e+"]="+t})).join(";"),";"))}else{r=c.def(s,".",l);var d=t.cond(r,"!==",u,".",l);c(d),l in T?d(t.cond(r).then(o,".enable(",T[l],");").else(o,".disable(",T[l],");"),u,".",l,"=",r,";"):d(o,".",A[l],"(",r,");",u,".",l,"=",r,";")}})),0===Object.keys(n.state).length&&c(u,".dirty=false;"),e(c)}function B(t,e,n,r){var o=t.shared,i=t.current,a=o.current,u=o.gl;oe(Object.keys(n)).forEach((function(o){var s=n[o];if(!r||r(s)){var c=s.append(t,e);if(T[o]){var f=T[o];ae(s)?e(u,c?".enable(":".disable(",f,");"):e(t.cond(c).then(u,".enable(",f,");").else(u,".disable(",f,");")),e(a,".",o,"=",c,";")}else if(tt(c)){var l=i[o];e(u,".",A[o],"(",c,");",c.map((function(t,e){return l+"["+e+"]="+t})).join(";"),";")}else e(u,".",A[o],"(",c,");",a,".",o,"=",c,";")}}))}function F(t,e){b&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function V(t,e,n,r,o){var i,a,u,s=t.shared,c=t.stats,f=s.current,l=s.timer,h=n.profile;function d(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function p(t){t(i=e.def(),"=",d(),";"),"string"==typeof o?t(c,".count+=",o,";"):t(c,".count++;"),v&&(r?t(a=e.def(),"=",l,".getNumPendingQueries();"):t(l,".beginQuery(",c,");"))}function m(t){t(c,".cpuTime+=",d(),"-",i,";"),v&&(r?t(l,".pushScopeStats(",a,",",l,".getNumPendingQueries(),",c,");"):t(l,".endQuery();"))}function y(t){var n=e.def(f,".profile");e(f,".profile=",t,";"),e.exit(f,".profile=",n,";")}if(h){if(ae(h))return void(h.enable?(p(e),m(e.exit),y("true")):y("false"));y(u=h.append(t,e))}else u=e.def(f,".profile");var g=t.block();p(g),e("if(",u,"){",g,"}");var b=t.block();m(b),e.exit("if(",u,"){",b,"}")}function W(t,e,n,r,o){var i=t.shared;r.forEach((function(r){var a,u=r.name,s=n.attributes[u];if(s){if(!o(s))return;a=s.append(t,e)}else{if(!o(ce))return;var c=t.scopeAttrib(u);w.optional((function(){t.assert(e,c+".state","missing attribute "+u)})),a={},Object.keys(new y).forEach((function(t){a[t]=e.def(c,".",t)}))}!function(n,r,o){var a=i.gl,u=e.def(n,".location"),s=e.def(i.attributes,"[",u,"]"),c=o.state,f=o.buffer,l=[o.x,o.y,o.z,o.w],h=["buffer","normalized","offset","stride"];function d(){e("if(!",s,".buffer){",a,".enableVertexAttribArray(",u,");}");var n,i=o.type;if(n=o.size?e.def(o.size,"||",r):r,e("if(",s,".type!==",i,"||",s,".size!==",n,"||",h.map((function(t){return s+"."+t+"!=="+o[t]})).join("||"),"){",a,".bindBuffer(",34962,",",f,".buffer);",a,".vertexAttribPointer(",[u,n,i,o.normalized,o.stride,o.offset],");",s,".type=",i,";",s,".size=",n,";",h.map((function(t){return s+"."+t+"="+o[t]+";"})).join(""),"}"),b){var c=o.divisor;e("if(",s,".divisor!==",c,"){",t.instancing,".vertexAttribDivisorANGLE(",[u,c],");",s,".divisor=",c,";}")}}function p(){e("if(",s,".buffer){",a,".disableVertexAttribArray(",u,");",s,".buffer=null;","}if(",jt.map((function(t,e){return s+"."+t+"!=="+l[e]})).join("||"),"){",a,".vertexAttrib4f(",u,",",l,");",jt.map((function(t,e){return s+"."+t+"="+l[e]+";"})).join(""),"}")}1===c?d():2===c?p():(e("if(",c,"===",1,"){"),d(),e("}else{"),p(),e("}"))}(t.link(r),function(t){switch(t){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(r.info.type),a)}))}function X(t,e,r,o,i){for(var a,u=t.shared,s=u.gl,c=0;c<o.length;++c){var f,l=o[c],h=l.name,d=l.info.type,p=r.uniforms[h],v=t.link(l)+".location";if(p){if(!i(p))continue;if(ae(p)){var m=p.value;if(w.command(null!=m,'missing uniform "'+h+'"',t.commandStr),35678===d||35680===d){w.command("function"==typeof m&&(35678===d&&("texture2d"===m._reglType||"framebuffer"===m._reglType)||35680===d&&("textureCube"===m._reglType||"framebufferCube"===m._reglType)),"invalid texture for uniform "+h,t.commandStr);var y=t.link(m._texture||m.color[0]._texture);e(s,".uniform1i(",v,",",y+".bind());"),e.exit(y,".unbind();")}else if(35674===d||35675===d||35676===d){w.optional((function(){w.command(tt(m),"invalid matrix for uniform "+h,t.commandStr),w.command(35674===d&&4===m.length||35675===d&&9===m.length||35676===d&&16===m.length,"invalid length for matrix uniform "+h,t.commandStr)}));var g=t.global.def("new Float32Array(["+Array.prototype.slice.call(m)+"])"),b=2;35675===d?b=3:35676===d&&(b=4),e(s,".uniformMatrix",b,"fv(",v,",false,",g,");")}else{switch(d){case 5126:w.commandType(m,"number","uniform "+h,t.commandStr),a="1f";break;case 35664:w.command(tt(m)&&2===m.length,"uniform "+h,t.commandStr),a="2f";break;case 35665:w.command(tt(m)&&3===m.length,"uniform "+h,t.commandStr),a="3f";break;case 35666:w.command(tt(m)&&4===m.length,"uniform "+h,t.commandStr),a="4f";break;case 35670:w.commandType(m,"boolean","uniform "+h,t.commandStr),a="1i";break;case 5124:w.commandType(m,"number","uniform "+h,t.commandStr),a="1i";break;case 35671:case 35667:w.command(tt(m)&&2===m.length,"uniform "+h,t.commandStr),a="2i";break;case 35672:case 35668:w.command(tt(m)&&3===m.length,"uniform "+h,t.commandStr),a="3i";break;case 35673:case 35669:w.command(tt(m)&&4===m.length,"uniform "+h,t.commandStr),a="4i"}e(s,".uniform",a,"(",v,",",tt(m)?Array.prototype.slice.call(m):m,");")}continue}f=p.append(t,e)}else{if(!i(ce))continue;f=e.def(u.uniforms,"[",n.id(h),"]")}35678===d?(w(!Array.isArray(f),"must specify a scalar prop for textures"),e("if(",f,"&&",f,'._reglType==="framebuffer"){',f,"=",f,".color[0];","}")):35680===d&&(w(!Array.isArray(f),"must specify a scalar prop for cube maps"),e("if(",f,"&&",f,'._reglType==="framebufferCube"){',f,"=",f,".color[0];","}")),w.optional((function(){function n(n,r){t.assert(e,n,'bad data or missing for uniform "'+h+'".  '+r)}function r(t){w(!Array.isArray(f),"must not specify an array type for uniform"),n("typeof "+f+'==="'+t+'"',"invalid type, expected "+t)}function o(e,r){Array.isArray(f)?w(f.length===e,"must have length "+e):n(u.isArrayLike+"("+f+")&&"+f+".length==="+e,"invalid vector, should have length "+e,t.commandStr)}function i(e){w(!Array.isArray(f),"must not specify a value type"),n("typeof "+f+'==="function"&&'+f+'._reglType==="texture'+(3553===e?"2d":"Cube")+'"',"invalid texture type",t.commandStr)}switch(d){case 5124:r("number");break;case 35667:o(2);break;case 35668:o(3);break;case 35669:o(4);break;case 5126:r("number");break;case 35664:o(2);break;case 35665:o(3);break;case 35666:o(4);break;case 35670:r("boolean");break;case 35671:o(2);break;case 35672:o(3);break;case 35673:case 35674:o(4);break;case 35675:o(9);break;case 35676:o(16);break;case 35678:i(3553);break;case 35680:i(34067)}}));var _=1;switch(d){case 35678:case 35680:var x=e.def(f,"._texture");e(s,".uniform1i(",v,",",x,".bind());"),e.exit(x,".unbind();");continue;case 5124:case 35670:a="1i";break;case 35667:case 35671:a="2i",_=2;break;case 35668:case 35672:a="3i",_=3;break;case 35669:case 35673:a="4i",_=4;break;case 5126:a="1f";break;case 35664:a="2f",_=2;break;case 35665:a="3f",_=3;break;case 35666:a="4f",_=4;break;case 35674:a="Matrix2fv";break;case 35675:a="Matrix3fv";break;case 35676:a="Matrix4fv"}if(e(s,".uniform",a,"(",v,","),"M"===a.charAt(0)){var E=Math.pow(d-35674+2,2),S=t.global.def("new Float32Array(",E,")");Array.isArray(f)?e("false,(",C(E,(function(t){return S+"["+t+"]="+f[t]})),",",S,")"):e("false,(Array.isArray(",f,")||",f," instanceof Float32Array)?",f,":(",C(E,(function(t){return S+"["+t+"]="+f+"["+t+"]"})),",",S,")")}else _>1?e(C(_,(function(t){return Array.isArray(f)?f[t]:f+"["+t+"]"}))):(w(!Array.isArray(f),"uniform value must not be an array"),e(f));e(");")}}function H(t,e,n,r){var o=t.shared,i=o.gl,a=o.draw,u=r.draw,s=function(){var o,s=u.elements,c=e;return s?((s.contextDep&&r.contextDynamic||s.propDep)&&(c=n),o=s.append(t,c)):o=c.def(a,".",zt),o&&c("if("+o+")"+i+".bindBuffer(34963,"+o+".buffer.buffer);"),o}();function c(o){var i=u[o];return i?i.contextDep&&r.contextDynamic||i.propDep?i.append(t,n):i.append(t,e):e.def(a,".",o)}var f,l,h=c(Vt),d=c(Xt),p=function(){var o,i=u.count,s=e;return i?((i.contextDep&&r.contextDynamic||i.propDep)&&(s=n),o=i.append(t,s),w.optional((function(){i.MISSING&&t.assert(e,"false","missing vertex count"),i.DYNAMIC&&t.assert(s,o+">=0","missing vertex count")}))):(o=s.def(a,".",Wt),w.optional((function(){t.assert(s,o+">=0","missing vertex count")}))),o}();if("number"==typeof p){if(0===p)return}else n("if(",p,"){"),n.exit("}");b&&(f=c(Ht),l=t.instancing);var v=s+".type",m=u.elements&&ae(u.elements);function y(){function t(){n(l,".drawElementsInstancedANGLE(",[h,p,v,d+"<<(("+v+"-5121)>>1)",f],");")}function e(){n(l,".drawArraysInstancedANGLE(",[h,d,p,f],");")}s?m?t():(n("if(",s,"){"),t(),n("}else{"),e(),n("}")):e()}function g(){function t(){n(i+".drawElements("+[h,p,v,d+"<<(("+v+"-5121)>>1)"]+");")}function e(){n(i+".drawArrays("+[h,d,p]+");")}s?m?t():(n("if(",s,"){"),t(),n("}else{"),e(),n("}")):e()}b&&("number"!=typeof f||f>=0)?"string"==typeof f?(n("if(",f,">0){"),y(),n("}else if(",f,"<0){"),g(),n("}")):y():g()}function q(t,e,n,r,o){var i=P(),a=i.proc("body",o);return w.optional((function(){i.commandStr=e.commandStr,i.command=i.link(e.commandStr)})),b&&(i.instancing=a.def(i.shared.extensions,".angle_instanced_arrays")),t(i,a,n,r),i.compile().body}function Y(t,e,n,r){F(t,e),n.useVAO?n.drawVAO?e(t.shared.vao,".setVAO(",n.drawVAO.append(t,e),");"):e(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(e(t.shared.vao,".setVAO(null);"),W(t,e,n,r.attributes,(function(){return!0}))),X(t,e,n,r.uniforms,(function(){return!0})),H(t,e,e,n)}function K(t,e,n,r){function o(){return!0}t.batchId="a1",F(t,e),W(t,e,n,r.attributes,o),X(t,e,n,r.uniforms,o),H(t,e,e,n)}function Q(t,e,n,r){F(t,e);var o=n.contextDep,i=e.def(),a=e.def();t.shared.props=a,t.batchId=i;var u=t.scope(),s=t.scope();function c(t){return t.contextDep&&o||t.propDep}function f(t){return!c(t)}if(e(u.entry,"for(",i,"=0;",i,"<","a1",";++",i,"){",a,"=","a0","[",i,"];",s,"}",u.exit),n.needsContext&&j(t,s,n.context),n.needsFramebuffer&&L(t,s,n.framebuffer),B(t,s,n.state,c),n.profile&&c(n.profile)&&V(t,s,n,!1,!0),r)n.useVAO?n.drawVAO?c(n.drawVAO)?s(t.shared.vao,".setVAO(",n.drawVAO.append(t,s),");"):u(t.shared.vao,".setVAO(",n.drawVAO.append(t,u),");"):u(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(u(t.shared.vao,".setVAO(null);"),W(t,u,n,r.attributes,f),W(t,s,n,r.attributes,c)),X(t,u,n,r.uniforms,f),X(t,s,n,r.uniforms,c),H(t,u,s,n);else{var l=t.global.def("{}"),h=n.shader.progVar.append(t,s),d=s.def(h,".id"),p=s.def(l,"[",d,"]");s(t.shared.gl,".useProgram(",h,".program);","if(!",p,"){",p,"=",l,"[",d,"]=",t.link((function(e){return q(K,t,n,e,2)})),"(",h,");}",p,".call(this,a0[",i,"],",i,");")}}function J(t,e,n){var r=e.static[n];if(r&&function(t){if("object"===a(t)&&!tt(t)){for(var e=Object.keys(t),n=0;n<e.length;++n)if(I.isDynamic(t[e[n]]))return!0;return!1}}(r)){var o=t.global,i=Object.keys(r),u=!1,s=!1,c=!1,f=t.global.def("{}");i.forEach((function(e){var n=r[e];if(I.isDynamic(n)){"function"==typeof n&&(n=r[e]=I.unbox(n));var i=se(n,null);u=u||i.thisDep,c=c||i.propDep,s=s||i.contextDep}else{switch(o(f,".",e,"="),a(n)){case"number":o(n);break;case"string":o('"',n,'"');break;case"object":Array.isArray(n)&&o("[",n.join(),"]");break;default:o(t.link(n))}o(";")}})),e.dynamic[n]=new I.DynamicVariable(4,{thisDep:u,contextDep:s,propDep:c,ref:f,append:function(t,e){i.forEach((function(n){var o=r[n];if(I.isDynamic(o)){var i=t.invoke(e,o);e(f,".",n,"=",i,";")}}))}}),delete e.static[n]}}return{next:E,current:x,procs:function(){var t=P(),e=t.proc("poll"),n=t.proc("refresh"),i=t.block();e(i),n(i);var a,u=t.shared,s=u.gl,c=u.next,f=u.current;i(f,".dirty=false;"),L(t,e),L(t,n,null,!0),b&&(a=t.link(b)),r.oes_vertex_array_object&&n(t.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var l=0;l<o.maxAttributes;++l){var h=n.def(u.attributes,"[",l,"]"),d=t.cond(h,".buffer");d.then(s,".enableVertexAttribArray(",l,");",s,".bindBuffer(",34962,",",h,".buffer.buffer);",s,".vertexAttribPointer(",l,",",h,".size,",h,".type,",h,".normalized,",h,".stride,",h,".offset);").else(s,".disableVertexAttribArray(",l,");",s,".vertexAttrib4f(",l,",",h,".x,",h,".y,",h,".z,",h,".w);",h,".buffer=null;"),n(d),b&&n(a,".vertexAttribDivisorANGLE(",l,",",h,".divisor);")}return n(t.shared.vao,".currentVAO=null;",t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"),Object.keys(T).forEach((function(r){var o=T[r],a=i.def(c,".",r),u=t.block();u("if(",a,"){",s,".enable(",o,")}else{",s,".disable(",o,")}",f,".",r,"=",a,";"),n(u),e("if(",a,"!==",f,".",r,"){",u,"}")})),Object.keys(A).forEach((function(r){var o,a,u=A[r],l=x[r],h=t.block();if(h(s,".",u,"("),tt(l)){var d=l.length;o=t.global.def(c,".",r),a=t.global.def(f,".",r),h(C(d,(function(t){return o+"["+t+"]"})),");",C(d,(function(t){return a+"["+t+"]="+o+"["+t+"];"})).join("")),e("if(",C(d,(function(t){return o+"["+t+"]!=="+a+"["+t+"]"})).join("||"),"){",h,"}")}else o=i.def(c,".",r),a=i.def(f,".",r),h(o,");",f,".",r,"=",o,";"),e("if(",o,"!==",a,"){",h,"}");n(h)})),t.compile()}(),compile:function(t,r,o,i,a){var u=P();u.stats=u.link(a),Object.keys(r.static).forEach((function(t){J(u,r,t)})),Zt.forEach((function(e){J(u,t,e)}));var s=G(t,r,o,i,u);return function(t,e){var n=t.proc("draw",1);F(t,n),j(t,n,e.context),L(t,n,e.framebuffer),U(t,n,e),B(t,n,e.state),V(t,n,e,!1,!0);var r=e.shader.progVar.append(t,n);if(n(t.shared.gl,".useProgram(",r,".program);"),e.shader.program)Y(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var o=t.global.def("{}"),i=n.def(r,".id"),a=n.def(o,"[",i,"]");n(t.cond(a).then(a,".call(this,a0);").else(a,"=",o,"[",i,"]=",t.link((function(n){return q(Y,t,e,n,1)})),"(",r,");",a,".call(this,a0);"))}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}(u,s),function(t,e){var r=t.proc("scope",3);t.batchId="a2";var o=t.shared,i=o.current;function a(n){var i=e.shader[n];i&&r.set(o.shader,"."+n,i.append(t,r))}j(t,r,e.context),e.framebuffer&&e.framebuffer.append(t,r),oe(Object.keys(e.state)).forEach((function(n){var i=e.state[n].append(t,r);tt(i)?i.forEach((function(e,o){r.set(t.next[n],"["+o+"]",e)})):r.set(o.next,"."+n,i)})),V(t,r,e,!0,!0),[zt,Xt,Wt,Ht,Vt].forEach((function(n){var i=e.draw[n];i&&r.set(o.draw,"."+n,""+i.append(t,r))})),Object.keys(e.uniforms).forEach((function(i){var a=e.uniforms[i].append(t,r);Array.isArray(a)&&(a="["+a.join()+"]"),r.set(o.uniforms,"["+n.id(i)+"]",a)})),Object.keys(e.attributes).forEach((function(n){var o=e.attributes[n].append(t,r),i=t.scopeAttrib(n);Object.keys(new y).forEach((function(t){r.set(i,"."+t,o[t])}))})),e.scopeVAO&&r.set(o.vao,".targetVAO",e.scopeVAO.append(t,r)),a(Bt),a(Ft),Object.keys(e.state).length>0&&(r(i,".dirty=true;"),r.exit(i,".dirty=true;")),r("a1(",t.shared.context,",a0,",t.batchId,");")}(u,s),function(t,e){var n=t.proc("batch",2);t.batchId="0",F(t,n);var r=!1,o=!0;Object.keys(e.context).forEach((function(t){r=r||e.context[t].propDep})),r||(j(t,n,e.context),o=!1);var i=e.framebuffer,a=!1;function u(t){return t.contextDep&&r||t.propDep}i?(i.propDep?r=a=!0:i.contextDep&&r&&(a=!0),a||L(t,n,i)):L(t,n,null),e.state.viewport&&e.state.viewport.propDep&&(r=!0),U(t,n,e),B(t,n,e.state,(function(t){return!u(t)})),e.profile&&u(e.profile)||V(t,n,e,!1,"a1"),e.contextDep=r,e.needsContext=o,e.needsFramebuffer=a;var s=e.shader.progVar;if(s.contextDep&&r||s.propDep)Q(t,n,e,null);else{var c=s.append(t,n);if(n(t.shared.gl,".useProgram(",c,".program);"),e.shader.program)Q(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var f=t.global.def("{}"),l=n.def(c,".id"),h=n.def(f,"[",l,"]");n(t.cond(h).then(h,".call(this,a0,a1);").else(h,"=",f,"[",l,"]=",t.link((function(n){return q(Q,t,e,n,2)})),"(",c,");",h,".call(this,a0,a1);"))}}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;")}(u,s),e(u.compile(),{destroy:function(){s.shader.program.destroy()}})}}}var le=function(t,e){if(!e.ext_disjoint_timer_query)return null;var n=[];function r(t){n.push(t)}var o=[];function i(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var a=[];function u(t){a.push(t)}var s=[];function c(t,e,n){var r=a.pop()||new i;r.startQueryIndex=t,r.endQueryIndex=e,r.sum=0,r.stats=n,s.push(r)}var f=[],l=[];return{beginQuery:function(t){var r=n.pop()||e.ext_disjoint_timer_query.createQueryEXT();e.ext_disjoint_timer_query.beginQueryEXT(35007,r),o.push(r),c(o.length-1,o.length,t)},endQuery:function(){e.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:c,update:function(){var t,n,i=o.length;if(0!==i){l.length=Math.max(l.length,i+1),f.length=Math.max(f.length,i+1),f[0]=0,l[0]=0;var a=0;for(t=0,n=0;n<o.length;++n){var c=o[n];e.ext_disjoint_timer_query.getQueryObjectEXT(c,34919)?(a+=e.ext_disjoint_timer_query.getQueryObjectEXT(c,34918),r(c)):o[t++]=c,f[n+1]=a,l[n+1]=t}for(o.length=t,t=0,n=0;n<s.length;++n){var h=s[n],d=h.startQueryIndex,p=h.endQueryIndex;h.sum+=f[p]-f[d];var v=l[d],m=l[p];m===v?(h.stats.gpuTime+=h.sum/1e6,u(h)):(h.startQueryIndex=v,h.endQueryIndex=m,s[t++]=h)}s.length=t}},getNumPendingQueries:function(){return o.length},clear:function(){n.push.apply(n,o);for(var t=0;t<n.length;t++)e.ext_disjoint_timer_query.deleteQueryEXT(n[t]);o.length=0,n.length=0},restore:function(){o.length=0,n.length=0}}};function he(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}return function(n){var r=M(n);if(!r)return null;var o=r.gl,i=o.getContextAttributes(),u=o.isContextLost(),s=function(t,e){var n={};function r(e){w.type(e,"string","extension name must be string");var r,o=e.toLowerCase();try{r=n[o]=t.getExtension(o)}catch(t){}return!!r}for(var o=0;o<e.extensions.length;++o){var i=e.extensions[o];if(!r(i))return e.onDestroy(),e.onDone('"'+i+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach((function(t){if(n[t]&&!r(t))throw new Error("(regl): error restoring extension "+t)}))}}}(o,r);if(!s)return null;var c,f,l=(c={"":0},f=[""],{id:function(t){var e=c[t];return e||(e=c[t]=f.length,f.push(t),e)},str:function(t){return f[t]}}),h={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},d=s.extensions,p=le(0,d),v=O(),m=o.drawingBufferWidth,y=o.drawingBufferHeight,g={tick:0,time:0,viewportWidth:m,viewportHeight:y,framebufferWidth:m,framebufferHeight:y,drawingBufferWidth:m,drawingBufferHeight:y,pixelRatio:r.pixelRatio},b=function(t,e){var n=1;e.ext_texture_filter_anisotropic&&(n=t.getParameter(34047));var r=1,o=1;e.webgl_draw_buffers&&(r=t.getParameter(34852),o=t.getParameter(36063));var i=!!e.oes_texture_float;if(i){var a=t.createTexture();t.bindTexture(3553,a),t.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var u=t.createFramebuffer();if(t.bindFramebuffer(36160,u),t.framebufferTexture2D(36160,36064,3553,a,0),t.bindTexture(3553,null),36053!==t.checkFramebufferStatus(36160))i=!1;else{t.viewport(0,0,1,1),t.clearColor(1,0,0,1),t.clear(16384);var s=G.allocType(5126,4);t.readPixels(0,0,1,1,6408,5126,s),t.getError()?i=!1:(t.deleteFramebuffer(u),t.deleteTexture(a),i=1===s[0]),G.freeType(s)}}var c=!0;if("undefined"==typeof navigator||!(/MSIE/.test(navigator.userAgent)||/Trident\\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var f=t.createTexture(),l=G.allocType(5121,36);t.activeTexture(33984),t.bindTexture(34067,f),t.texImage2D(34069,0,6408,3,3,0,6408,5121,l),G.freeType(l),t.bindTexture(34067,null),t.deleteTexture(f),c=!t.getError()}return{colorBits:[t.getParameter(3410),t.getParameter(3411),t.getParameter(3412),t.getParameter(3413)],depthBits:t.getParameter(3414),stencilBits:t.getParameter(3415),subpixelBits:t.getParameter(3408),extensions:Object.keys(e).filter((function(t){return!!e[t]})),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:o,pointSizeDims:t.getParameter(33901),lineWidthDims:t.getParameter(33902),maxViewportDims:t.getParameter(3386),maxCombinedTextureUnits:t.getParameter(35661),maxCubeMapSize:t.getParameter(34076),maxRenderbufferSize:t.getParameter(34024),maxTextureUnits:t.getParameter(34930),maxTextureSize:t.getParameter(3379),maxAttributes:t.getParameter(34921),maxVertexUniforms:t.getParameter(36347),maxVertexTextureUnits:t.getParameter(35660),maxVaryingVectors:t.getParameter(36348),maxFragmentUniforms:t.getParameter(36349),glsl:t.getParameter(35724),renderer:t.getParameter(7937),vendor:t.getParameter(7936),version:t.getParameter(7938),readFloat:i,npotTextureCube:c}}(o,d),_=function(e,n,r,o){var i=0,a={};function u(t){this.id=i++,this.buffer=e.createBuffer(),this.type=t,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,r.profile&&(this.stats={size:0})}u.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},u.prototype.destroy=function(){l(this)};var s=[];function c(t,n,r){t.byteLength=n.byteLength,e.bufferData(t.type,n,r)}function f(e,n,r,o,i,a){var u,s;if(e.usage=r,Array.isArray(n)){if(e.dtype=o||5126,n.length>0)if(Array.isArray(n[0])){u=X(n);for(var f=1,l=1;l<u.length;++l)f*=u[l];e.dimension=f,c(e,s=W(n,u,e.dtype),r),a?e.persistentData=s:G.freeType(s)}else if("number"==typeof n[0]){e.dimension=i;var h=G.allocType(e.dtype,n.length);Y(h,n),c(e,h,r),a?e.persistentData=h:G.freeType(h)}else t(n[0])?(e.dimension=n[0].length,e.dtype=o||q(n[0])||5126,c(e,s=W(n,[n.length,n[0].length],e.dtype),r),a?e.persistentData=s:G.freeType(s)):w.raise("invalid buffer data")}else if(t(n))e.dtype=o||q(n),e.dimension=i,c(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(j(n)){u=n.shape;var d=n.stride,p=n.offset,v=0,m=0,y=0,g=0;1===u.length?(v=u[0],m=1,y=d[0],g=0):2===u.length?(v=u[0],m=u[1],y=d[0],g=d[1]):w.raise("invalid shape"),e.dtype=o||q(n.data)||5126,e.dimension=m;var b=G.allocType(e.dtype,v*m);K(b,n.data,v,m,y,g,p),c(e,b,r),a?e.persistentData=b:G.freeType(b)}else n instanceof ArrayBuffer?(e.dtype=5121,e.dimension=i,c(e,n,r),a&&(e.persistentData=new Uint8Array(new Uint8Array(n)))):w.raise("invalid buffer data")}function l(t){n.bufferCount--,o(t);var r=t.buffer;w(r,"buffer must not be deleted already"),e.deleteBuffer(r),t.buffer=null,delete a[t.id]}return r.profile&&(n.getTotalBufferSize=function(){var t=0;return Object.keys(a).forEach((function(e){t+=a[e].stats.size})),t}),{create:function(o,i,s,c){n.bufferCount++;var h=new u(i);function d(n){var o=35044,i=null,a=0,u=0,s=1;return Array.isArray(n)||t(n)||j(n)||n instanceof ArrayBuffer?i=n:"number"==typeof n?a=0|n:n&&(w.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(w(null===i||Array.isArray(i)||t(i)||j(i),"invalid data for buffer"),i=n.data),"usage"in n&&(w.parameter(n.usage,V,"invalid buffer usage"),o=V[n.usage]),"type"in n&&(w.parameter(n.type,z,"invalid buffer type"),u=z[n.type]),"dimension"in n&&(w.type(n.dimension,"number","invalid dimension"),s=0|n.dimension),"length"in n&&(w.nni(a,"buffer length must be a nonnegative integer"),a=0|n.length)),h.bind(),i?f(h,i,o,u,s,c):(a&&e.bufferData(h.type,a,o),h.dtype=u||5121,h.usage=o,h.dimension=s,h.byteLength=a),r.profile&&(h.stats.size=h.byteLength*H[h.dtype]),d}function p(t,n){w(n+t.byteLength<=h.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+n+" to a buffer of size "+h.byteLength),e.bufferSubData(h.type,n,t)}return a[h.id]=h,s||d(o),d._reglType="buffer",d._buffer=h,d.subdata=function(e,n){var r,o=0|(n||0);if(h.bind(),t(e)||e instanceof ArrayBuffer)p(e,o);else if(Array.isArray(e)){if(e.length>0)if("number"==typeof e[0]){var i=G.allocType(h.dtype,e.length);Y(i,e),p(i,o),G.freeType(i)}else if(Array.isArray(e[0])||t(e[0])){r=X(e);var a=W(e,r,h.dtype);p(a,o),G.freeType(a)}else w.raise("invalid buffer data")}else if(j(e)){r=e.shape;var u=e.stride,s=0,c=0,f=0,l=0;1===r.length?(s=r[0],c=1,f=u[0],l=0):2===r.length?(s=r[0],c=r[1],f=u[0],l=u[1]):w.raise("invalid shape");var v=Array.isArray(e.data)?h.dtype:q(e.data),m=G.allocType(v,s*c);K(m,e.data,s,c,f,l,e.offset),p(m,o),G.freeType(m)}else w.raise("invalid data for buffer subdata");return d},r.profile&&(d.stats=h.stats),d.destroy=function(){l(h)},d},createStream:function(t,e){var n=s.pop();return n||(n=new u(t)),n.bind(),f(n,e,35040,0,1,!1),n},destroyStream:function(t){s.push(t)},clear:function(){L(a).forEach(l),s.forEach(l)},getBuffer:function(t){return t&&t._buffer instanceof u?t._buffer:null},restore:function(){L(a).forEach((function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)}))},_initBuffer:f}}(o,h,r,(function(t){return x.destroyBuffer(t)})),x=function(e,n,r,o,i){for(var a=r.maxAttributes,u=new Array(a),s=0;s<a;++s)u[s]=new Ct;var c=0,f={},l={Record:Ct,scope:{},state:u,currentVAO:null,targetVAO:null,restore:h()?function(){h()&&L(f).forEach((function(t){t.refresh()}))}:function(){},createVAO:function(e){var r=new p;function u(e){w(Array.isArray(e),"arguments to vertex array constructor must be an array"),w(e.length<a,"too many attributes"),w(e.length>0,"must specify at least one attribute");var o={},s=r.attributes;s.length=e.length;for(var c=0;c<e.length;++c){var f,l=e[c],h=s[c]=new Ct,d=l.data||l;Array.isArray(d)||t(d)||j(d)?(r.buffers[c]&&(f=r.buffers[c],t(d)&&f._buffer.byteLength>=d.byteLength?f.subdata(d):(f.destroy(),r.buffers[c]=null)),r.buffers[c]||(f=r.buffers[c]=i.create(l,34962,!1,!0)),h.buffer=i.getBuffer(f),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1,o[c]=1):i.getBuffer(l)?(h.buffer=i.getBuffer(l),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1):i.getBuffer(l.buffer)?(h.buffer=i.getBuffer(l.buffer),h.size=0|(+l.size||h.buffer.dimension),h.normalized=!!l.normalized||!1,"type"in l?(w.parameter(l.type,z,"invalid buffer type"),h.type=z[l.type]):h.type=h.buffer.dtype,h.offset=0|(l.offset||0),h.stride=0|(l.stride||0),h.divisor=0|(l.divisor||0),h.state=1,w(h.size>=1&&h.size<=4,"size must be between 1 and 4"),w(h.offset>=0,"invalid offset"),w(h.stride>=0&&h.stride<=255,"stride must be between 0 and 255"),w(h.divisor>=0,"divisor must be positive"),w(!h.divisor||!!n.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in l?(w(c>0,"first attribute must not be a constant"),h.x=+l.x||0,h.y=+l.y||0,h.z=+l.z||0,h.w=+l.w||0,h.state=2):w(!1,"invalid attribute spec for location "+c)}for(var p=0;p<r.buffers.length;++p)!o[p]&&r.buffers[p]&&(r.buffers[p].destroy(),r.buffers[p]=null);return r.refresh(),u}return o.vaoCount+=1,u.destroy=function(){for(var t=0;t<r.buffers.length;++t)r.buffers[t]&&r.buffers[t].destroy();r.buffers.length=0,r.destroy()},u._vao=r,u._reglType="vao",u(e)},getVAO:function(t){return"function"==typeof t&&t._vao?t._vao:null},destroyBuffer:function(t){for(var n=0;n<u.length;++n){var r=u[n];r.buffer===t&&(e.disableVertexAttribArray(n),r.buffer=null)}},setVAO:h()?function(t){if(t!==l.currentVAO){var e=h();t?e.bindVertexArrayOES(t.vao):e.bindVertexArrayOES(null),l.currentVAO=t}}:function(t){if(t!==l.currentVAO){if(t)t.bindAttrs();else for(var n=d(),r=0;r<u.length;++r){var o=u[r];o.buffer?(e.enableVertexAttribArray(r),e.vertexAttribPointer(r,o.size,o.type,o.normalized,o.stride,o.offfset),n&&o.divisor&&n.vertexAttribDivisorANGLE(r,o.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,o.x,o.y,o.z,o.w))}l.currentVAO=t}},clear:h()?function(){L(f).forEach((function(t){t.destroy()}))}:function(){}};function h(){return n.oes_vertex_array_object}function d(){return n.angle_instanced_arrays}function p(){this.id=++c,this.attributes=[];var t=h();this.vao=t?t.createVertexArrayOES():null,f[this.id]=this,this.buffers=[]}return p.prototype.bindAttrs=function(){for(var t=d(),n=this.attributes,r=0;r<n.length;++r){var o=n[r];o.buffer?(e.enableVertexAttribArray(r),e.bindBuffer(34962,o.buffer.buffer),e.vertexAttribPointer(r,o.size,o.type,o.normalized,o.stride,o.offset),t&&o.divisor&&t.vertexAttribDivisorANGLE(r,o.divisor)):(e.disableVertexAttribArray(r),e.vertexAttrib4f(r,o.x,o.y,o.z,o.w))}for(var i=n.length;i<a;++i)e.disableVertexAttribArray(i)},p.prototype.refresh=function(){var t=h();t&&(t.bindVertexArrayOES(this.vao),this.bindAttrs(),l.currentVAO=this)},p.prototype.destroy=function(){if(this.vao){var t=h();this===l.currentVAO&&(l.currentVAO=null,t.bindVertexArrayOES(null)),t.deleteVertexArrayOES(this.vao),this.vao=null}f[this.id]&&(delete f[this.id],o.vaoCount-=1)},l}(o,d,b,h,_),E=function(e,n,r,o){var i={},a=0,u={uint8:5121,uint16:5123};function s(t){this.id=a++,i[this.id]=this,this.buffer=t,this.primType=4,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(u.uint32=5125),s.prototype.bind=function(){this.buffer.bind()};var c=[];function f(o,i,a,u,s,c,f){var l;if(o.buffer.bind(),i){var h=f;f||t(i)&&(!j(i)||t(i.data))||(h=n.oes_element_index_uint?5125:5123),r._initBuffer(o.buffer,i,a,h,3)}else e.bufferData(34963,c,a),o.buffer.dtype=l||5121,o.buffer.usage=a,o.buffer.dimension=3,o.buffer.byteLength=c;if(l=f,!f){switch(o.buffer.dtype){case 5121:case 5120:l=5121;break;case 5123:case 5122:l=5123;break;case 5125:case 5124:l=5125;break;default:w.raise("unsupported type for element array")}o.buffer.dtype=l}o.type=l,w(5125!==l||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var d=s;d<0&&(d=o.buffer.byteLength,5123===l?d>>=1:5125===l&&(d>>=2)),o.vertCount=d;var p=u;if(u<0){p=4;var v=o.buffer.dimension;1===v&&(p=0),2===v&&(p=1),3===v&&(p=4)}o.primType=p}function l(t){o.elementsCount--,w(null!==t.buffer,"must not double destroy elements"),delete i[t.id],t.buffer.destroy(),t.buffer=null}return{create:function(e,n){var i=r.create(null,34963,!0),a=new s(i._buffer);function c(e){if(e)if("number"==typeof e)i(e),a.primType=4,a.vertCount=0|e,a.type=5121;else{var n=null,r=35044,o=-1,s=-1,l=0,h=0;Array.isArray(e)||t(e)||j(e)?n=e:(w.type(e,"object","invalid arguments for elements"),"data"in e&&(n=e.data,w(Array.isArray(n)||t(n)||j(n),"invalid data for element buffer")),"usage"in e&&(w.parameter(e.usage,V,"invalid element buffer usage"),r=V[e.usage]),"primitive"in e&&(w.parameter(e.primitive,Z,"invalid element buffer primitive"),o=Z[e.primitive]),"count"in e&&(w("number"==typeof e.count&&e.count>=0,"invalid vertex count for elements"),s=0|e.count),"type"in e&&(w.parameter(e.type,u,"invalid buffer type"),h=u[e.type]),"length"in e?l=0|e.length:(l=s,5123===h||5122===h?l*=2:5125!==h&&5124!==h||(l*=4))),f(a,n,r,o,s,l,h)}else i(),a.primType=4,a.vertCount=0,a.type=5121;return c}return o.elementsCount++,c(e),c._reglType="elements",c._elements=a,c.subdata=function(t,e){return i.subdata(t,e),c},c.destroy=function(){l(a)},c},createStream:function(t){var e=c.pop();return e||(e=new s(r.create(null,34963,!0,!1)._buffer)),f(e,t,35040,-1,-1,0,0),e},destroyStream:function(t){c.push(t)},getElements:function(t){return"function"==typeof t&&t._elements instanceof s?t._elements:null},clear:function(){L(i).forEach(l)}}}(o,d,_,h),S=function(t,n,r,o){var i={},a={};function u(t,e,n,r){this.name=t,this.id=e,this.location=n,this.info=r}function s(t,e){for(var n=0;n<t.length;++n)if(t[n].id===e.id)return void(t[n].location=e.location);t.push(e)}function c(e,r,o){var u=35632===e?i:a,s=u[r];if(!s){var c=n.str(r);s=t.createShader(e),t.shaderSource(s,c),t.compileShader(s),w.shaderError(t,s,c,e,o),u[r]=s}return s}var f={},l=[],h=0;function d(t,e){this.id=h++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,o.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function p(e,r,i){var a,f,l=c(35632,e.fragId),h=c(35633,e.vertId),d=e.program=t.createProgram();if(t.attachShader(d,l),t.attachShader(d,h),i)for(a=0;a<i.length;++a){var p=i[a];t.bindAttribLocation(d,p[0],p[1])}t.linkProgram(d),w.linkError(t,d,n.str(e.fragId),n.str(e.vertId),r);var v=t.getProgramParameter(d,35718);o.profile&&(e.stats.uniformsCount=v);var m=e.uniforms;for(a=0;a<v;++a)if(f=t.getActiveUniform(d,a))if(f.size>1)for(var y=0;y<f.size;++y){var g=f.name.replace("[0]","["+y+"]");s(m,new u(g,n.id(g),t.getUniformLocation(d,g),f))}else s(m,new u(f.name,n.id(f.name),t.getUniformLocation(d,f.name),f));var b=t.getProgramParameter(d,35721);o.profile&&(e.stats.attributesCount=b);var _=e.attributes;for(a=0;a<b;++a)(f=t.getActiveAttrib(d,a))&&s(_,new u(f.name,n.id(f.name),t.getAttribLocation(d,f.name),f))}return o.profile&&(r.getMaxUniformsCount=function(){var t=0;return l.forEach((function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)})),t},r.getMaxAttributesCount=function(){var t=0;return l.forEach((function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)})),t}),{clear:function(){var e=t.deleteShader.bind(t);L(i).forEach(e),i={},L(a).forEach(e),a={},l.forEach((function(e){t.deleteProgram(e.program)})),l.length=0,f={},r.shaderCount=0},program:function(n,o,u,s){w.command(n>=0,"missing vertex shader",u),w.command(o>=0,"missing fragment shader",u);var c=f[o];c||(c=f[o]={});var h=c[n];if(h&&(h.refCount++,!s))return h;var v=new d(o,n);return r.shaderCount++,p(v,u,s),h||(c[n]=v),l.push(v),e(v,{destroy:function(){if(v.refCount--,v.refCount<=0){t.deleteProgram(v.program);var e=l.indexOf(v);l.splice(e,1),r.shaderCount--}c[v.vertId].refCount<=0&&(t.deleteShader(a[v.vertId]),delete a[v.vertId],delete f[v.fragId][v.vertId]),Object.keys(f[v.fragId]).length||(t.deleteShader(i[v.fragId]),delete i[v.fragId],delete f[v.fragId])}})},restore:function(){i={},a={};for(var t=0;t<l.length;++t)p(l[t],null,l[t].attributes.map((function(t){return[t.location,t.name]})))},shader:c,frag:-1,vert:-1}}(o,l,h,r),T=Tt(o,d,b,(function(){R.procs.poll()}),g,h,r),A=function(t,e,n,r,o){var i={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(i.srgba=35907),e.ext_color_buffer_half_float&&(i.rgba16f=34842,i.rgb16f=34843),e.webgl_color_buffer_float&&(i.rgba32f=34836);var u=[];Object.keys(i).forEach((function(t){var e=i[t];u[e]=t}));var s=0,c={};function f(t){this.id=s++,this.refCount=1,this.renderbuffer=t,this.format=32854,this.width=0,this.height=0,o.profile&&(this.stats={size:0})}function l(e){var n=e.renderbuffer;w(n,"must not double destroy renderbuffer"),t.bindRenderbuffer(36161,null),t.deleteRenderbuffer(n),e.renderbuffer=null,e.refCount=0,delete c[e.id],r.renderbufferCount--}return f.prototype.decRef=function(){--this.refCount<=0&&l(this)},o.profile&&(r.getTotalRenderbufferSize=function(){var t=0;return Object.keys(c).forEach((function(e){t+=c[e].stats.size})),t}),{create:function(e,s){var l=new f(t.createRenderbuffer());function h(e,r){var s=0,c=0,f=32854;if("object"===a(e)&&e){var d=e;if("shape"in d){var p=d.shape;w(Array.isArray(p)&&p.length>=2,"invalid renderbuffer shape"),s=0|p[0],c=0|p[1]}else"radius"in d&&(s=c=0|d.radius),"width"in d&&(s=0|d.width),"height"in d&&(c=0|d.height);"format"in d&&(w.parameter(d.format,i,"invalid renderbuffer format"),f=i[d.format])}else"number"==typeof e?(s=0|e,c="number"==typeof r?0|r:s):e?w.raise("invalid arguments to renderbuffer constructor"):s=c=1;if(w(s>0&&c>0&&s<=n.maxRenderbufferSize&&c<=n.maxRenderbufferSize,"invalid renderbuffer size"),s!==l.width||c!==l.height||f!==l.format)return h.width=l.width=s,h.height=l.height=c,l.format=f,t.bindRenderbuffer(36161,l.renderbuffer),t.renderbufferStorage(36161,f,s,c),w(0===t.getError(),"invalid render buffer format"),o.profile&&(l.stats.size=It(l.format,l.width,l.height)),h.format=u[l.format],h}return c[l.id]=l,r.renderbufferCount++,h(e,s),h.resize=function(e,r){var i=0|e,a=0|r||i;return i===l.width&&a===l.height||(w(i>0&&a>0&&i<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),h.width=l.width=i,h.height=l.height=a,t.bindRenderbuffer(36161,l.renderbuffer),t.renderbufferStorage(36161,l.format,i,a),w(0===t.getError(),"invalid render buffer format"),o.profile&&(l.stats.size=It(l.format,l.width,l.height))),h},h._reglType="renderbuffer",h._renderbuffer=l,o.profile&&(h.stats=l.stats),h.destroy=function(){l.decRef()},h},clear:function(){L(c).forEach(l)},restore:function(){L(c).forEach((function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,e.renderbuffer),t.renderbufferStorage(36161,e.format,e.width,e.height)})),t.bindRenderbuffer(36161,null)}}}(o,d,b,h,r),D=function(t,n,r,o,i,u){var s={cur:null,next:null,dirty:!1,setFBO:null},c=["rgba"],f=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&f.push("srgba"),n.ext_color_buffer_half_float&&f.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&f.push("rgba32f");var l=["uint8"];function h(t,e,n){this.target=t,this.texture=e,this.renderbuffer=n;var r=0,o=0;e?(r=e.width,o=e.height):n&&(r=n.width,o=n.height),this.width=r,this.height=o}function d(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function p(t,e,n){if(t)if(t.texture){var r=t.texture._texture,o=Math.max(1,r.width),i=Math.max(1,r.height);w(o===e&&i===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=t.renderbuffer._renderbuffer;w(a.width===e&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function v(e,n){n&&(n.texture?t.framebufferTexture2D(36160,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(36160,e,36161,n.renderbuffer._renderbuffer.renderbuffer))}function m(t){var e=3553,n=null,r=null,o=t;"object"===a(t)&&(o=t.data,"target"in t&&(e=0|t.target)),w.type(o,"function","invalid attachment data");var i=o._reglType;return"texture2d"===i?(n=o,w(3553===e)):"textureCube"===i?(n=o,w(e>=34069&&e<34075,"invalid cube map target")):"renderbuffer"===i?(r=o,e=36161):w.raise("invalid regl object for attachment"),new h(e,n,r)}function y(t,e,n,r,a){if(n){var u=o.create2D({width:t,height:e,format:r,type:a});return u._texture.refCount=0,new h(3553,u,null)}var s=i.create({width:t,height:e,format:r});return s._renderbuffer.refCount=0,new h(36161,null,s)}function g(t){return t&&(t.texture||t.renderbuffer)}function b(t,e,n){t&&(t.texture?t.texture.resize(e,n):t.renderbuffer&&t.renderbuffer.resize(e,n),t.width=e,t.height=n)}n.oes_texture_half_float&&l.push("half float","float16"),n.oes_texture_float&&l.push("float","float32");var _=0,x={};function E(){this.id=_++,x[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function S(t){t.colorAttachments.forEach(d),d(t.depthAttachment),d(t.stencilAttachment),d(t.depthStencilAttachment)}function T(e){var n=e.framebuffer;w(n,"must not double destroy framebuffer"),t.deleteFramebuffer(n),e.framebuffer=null,u.framebufferCount--,delete x[e.id]}function A(e){var n;t.bindFramebuffer(36160,e.framebuffer);var o=e.colorAttachments;for(n=0;n<o.length;++n)v(36064+n,o[n]);for(n=o.length;n<r.maxColorAttachments;++n)t.framebufferTexture2D(36160,36064+n,3553,null,0);t.framebufferTexture2D(36160,33306,3553,null,0),t.framebufferTexture2D(36160,36096,3553,null,0),t.framebufferTexture2D(36160,36128,3553,null,0),v(36096,e.depthAttachment),v(36128,e.stencilAttachment),v(33306,e.depthStencilAttachment);var i=t.checkFramebufferStatus(36160);t.isContextLost()||36053===i||w.raise("framebuffer configuration not supported, status = "+Mt[i]),t.bindFramebuffer(36160,s.next?s.next.framebuffer:null),s.cur=s.next,t.getError()}function I(t,o){var i=new E;function a(t,e){var o;w(s.next!==i,"can not update framebuffer which is currently in use");var u=0,h=0,d=!0,v=!0,b=null,_=!0,x="rgba",E="uint8",T=1,I=null,k=null,O=null,D=!1;if("number"==typeof t)u=0|t,h=0|e||u;else if(t){w.type(t,"object","invalid arguments for framebuffer");var R=t;if("shape"in R){var M=R.shape;w(Array.isArray(M)&&M.length>=2,"invalid shape for framebuffer"),u=M[0],h=M[1]}else"radius"in R&&(u=h=R.radius),"width"in R&&(u=R.width),"height"in R&&(h=R.height);("color"in R||"colors"in R)&&(b=R.color||R.colors,Array.isArray(b)&&w(1===b.length||n.webgl_draw_buffers,"multiple render targets not supported")),b||("colorCount"in R&&(T=0|R.colorCount,w(T>0,"invalid color buffer count")),"colorTexture"in R&&(_=!!R.colorTexture,x="rgba4"),"colorType"in R&&(E=R.colorType,_?(w(n.oes_texture_float||!("float"===E||"float32"===E),"you must enable OES_texture_float in order to use floating point framebuffer objects"),w(n.oes_texture_half_float||!("half float"===E||"float16"===E),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===E||"float16"===E?(w(n.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),x="rgba16f"):"float"!==E&&"float32"!==E||(w(n.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),x="rgba32f"),w.oneOf(E,l,"invalid color type")),"colorFormat"in R&&(x=R.colorFormat,c.indexOf(x)>=0?_=!0:f.indexOf(x)>=0?_=!1:_?w.oneOf(R.colorFormat,c,"invalid color format for texture"):w.oneOf(R.colorFormat,f,"invalid color format for renderbuffer"))),("depthTexture"in R||"depthStencilTexture"in R)&&(D=!(!R.depthTexture&&!R.depthStencilTexture),w(!D||n.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in R&&("boolean"==typeof R.depth?d=R.depth:(I=R.depth,v=!1)),"stencil"in R&&("boolean"==typeof R.stencil?v=R.stencil:(k=R.stencil,d=!1)),"depthStencil"in R&&("boolean"==typeof R.depthStencil?d=v=R.depthStencil:(O=R.depthStencil,d=!1,v=!1))}else u=h=1;var C=null,N=null,P=null,G=null;if(Array.isArray(b))C=b.map(m);else if(b)C=[m(b)];else for(C=new Array(T),o=0;o<T;++o)C[o]=y(u,h,_,x,E);w(n.webgl_draw_buffers||C.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),w(C.length<=r.maxColorAttachments,"too many color attachments, not supported"),u=u||C[0].width,h=h||C[0].height,I?N=m(I):d&&!v&&(N=y(u,h,D,"depth","uint32")),k?P=m(k):v&&!d&&(P=y(u,h,!1,"stencil","uint8")),O?G=m(O):!I&&!k&&v&&d&&(G=y(u,h,D,"depth stencil","depth stencil")),w(!!I+!!k+!!O<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var j=null;for(o=0;o<C.length;++o)if(p(C[o],u,h),w(!C[o]||C[o].texture&&kt.indexOf(C[o].texture._texture.format)>=0||C[o].renderbuffer&&Rt.indexOf(C[o].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+o+" is invalid"),C[o]&&C[o].texture){var L=Ot[C[o].texture._texture.format]*Dt[C[o].texture._texture.type];null===j?j=L:w(j===L,"all color attachments much have the same number of bits per pixel.")}return p(N,u,h),w(!N||N.texture&&6402===N.texture._texture.format||N.renderbuffer&&33189===N.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object"),p(P,u,h),w(!P||P.renderbuffer&&36168===P.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object"),p(G,u,h),w(!G||G.texture&&34041===G.texture._texture.format||G.renderbuffer&&34041===G.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object"),S(i),i.width=u,i.height=h,i.colorAttachments=C,i.depthAttachment=N,i.stencilAttachment=P,i.depthStencilAttachment=G,a.color=C.map(g),a.depth=g(N),a.stencil=g(P),a.depthStencil=g(G),a.width=i.width,a.height=i.height,A(i),a}return u.framebufferCount++,a(t,o),e(a,{resize:function(t,e){w(s.next!==i,"can not resize a framebuffer which is currently in use");var n=Math.max(0|t,1),r=Math.max(0|e||n,1);if(n===i.width&&r===i.height)return a;for(var o=i.colorAttachments,u=0;u<o.length;++u)b(o[u],n,r);return b(i.depthAttachment,n,r),b(i.stencilAttachment,n,r),b(i.depthStencilAttachment,n,r),i.width=a.width=n,i.height=a.height=r,A(i),a},_reglType:"framebuffer",_framebuffer:i,destroy:function(){T(i),S(i)},use:function(t){s.setFBO({framebuffer:a},t)}})}return e(s,{getFramebuffer:function(t){if("function"==typeof t&&"framebuffer"===t._reglType){var e=t._framebuffer;if(e instanceof E)return e}return null},create:I,createCube:function(t){var i=Array(6);function a(t){var r;w(i.indexOf(s.next)<0,"can not update framebuffer which is currently in use");var u,f={color:null},h=0,d=null,p="rgba",v="uint8",m=1;if("number"==typeof t)h=0|t;else if(t){w.type(t,"object","invalid arguments for framebuffer");var y=t;if("shape"in y){var g=y.shape;w(Array.isArray(g)&&g.length>=2,"invalid shape for framebuffer"),w(g[0]===g[1],"cube framebuffer must be square"),h=g[0]}else"radius"in y&&(h=0|y.radius),"width"in y?(h=0|y.width,"height"in y&&w(y.height===h,"must be square")):"height"in y&&(h=0|y.height);("color"in y||"colors"in y)&&(d=y.color||y.colors,Array.isArray(d)&&w(1===d.length||n.webgl_draw_buffers,"multiple render targets not supported")),d||("colorCount"in y&&(m=0|y.colorCount,w(m>0,"invalid color buffer count")),"colorType"in y&&(w.oneOf(y.colorType,l,"invalid color type"),v=y.colorType),"colorFormat"in y&&(p=y.colorFormat,w.oneOf(y.colorFormat,c,"invalid color format for texture"))),"depth"in y&&(f.depth=y.depth),"stencil"in y&&(f.stencil=y.stencil),"depthStencil"in y&&(f.depthStencil=y.depthStencil)}else h=1;if(d)if(Array.isArray(d))for(u=[],r=0;r<d.length;++r)u[r]=d[r];else u=[d];else{u=Array(m);var b={radius:h,format:p,type:v};for(r=0;r<m;++r)u[r]=o.createCube(b)}for(f.color=Array(u.length),r=0;r<u.length;++r){var _=u[r];w("function"==typeof _&&"textureCube"===_._reglType,"invalid cube map"),h=h||_.width,w(_.width===h&&_.height===h,"invalid cube map shape"),f.color[r]={target:34069,data:u[r]}}for(r=0;r<6;++r){for(var x=0;x<u.length;++x)f.color[x].target=34069+r;r>0&&(f.depth=i[0].depth,f.stencil=i[0].stencil,f.depthStencil=i[0].depthStencil),i[r]?i[r](f):i[r]=I(f)}return e(a,{width:h,height:h,color:u})}return a(t),e(a,{faces:i,resize:function(t){var e,n=0|t;if(w(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===a.width)return a;var o=a.color;for(e=0;e<o.length;++e)o[e].resize(n);for(e=0;e<6;++e)i[e].resize(n);return a.width=a.height=n,a},_reglType:"framebufferCube",destroy:function(){i.forEach((function(t){t.destroy()}))}})},clear:function(){L(x).forEach(T)},restore:function(){s.cur=null,s.next=null,s.dirty=!0,L(x).forEach((function(e){e.framebuffer=t.createFramebuffer(),A(e)}))}})}(o,d,b,T,A,h),R=fe(o,l,d,b,_,E,0,D,{},x,S,{elements:null,primitive:4,count:-1,offset:0,instances:-1},g,p,r),C=Nt(o,D,R.procs.poll,g,i,d,b),N=R.next,P=o.canvas,U=[],B=[],F=[],Q=[r.onDestroy],J=null;function $(){if(0===U.length)return p&&p.update(),void(J=null);J=k.next($),ct();for(var t=U.length-1;t>=0;--t){var e=U[t];e&&e(g,null,0)}o.flush(),p&&p.update()}function tt(){!J&&U.length>0&&(J=k.next($))}function et(){J&&(k.cancel($),J=null)}function nt(t){t.preventDefault(),u=!0,et(),B.forEach((function(t){t()}))}function rt(t){o.getError(),u=!1,s.restore(),S.restore(),_.restore(),T.restore(),A.restore(),D.restore(),x.restore(),p&&p.restore(),R.procs.refresh(),tt(),F.forEach((function(t){t()}))}function ot(t){function n(t,e){var n={},r={};return Object.keys(t).forEach((function(o){var i=t[o];if(I.isDynamic(i))r[o]=I.unbox(i,o);else{if(e&&Array.isArray(i))for(var a=0;a<i.length;++a)if(I.isDynamic(i[a]))return void(r[o]=I.unbox(i,o));n[o]=i}})),{dynamic:r,static:n}}w(!!t,"invalid args to regl({...})"),w.type(t,"object","invalid args to regl({...})");var r=n(t.context||{},!0),o=n(t.uniforms||{},!0),i=n(t.attributes||{},!1),a=n(function(t){var n=e({},t);function r(t){if(t in n){var e=n[t];delete n[t],Object.keys(e).forEach((function(r){n[t+"."+r]=e[r]}))}}return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),"vao"in t&&(n.vao=t.vao),n}(t),!1),s={gpuTime:0,cpuTime:0,count:0},c=R.compile(a,i,o,r,s),f=c.draw,l=c.batch,h=c.scope,d=[];return e((function(t,e){var n;if(u&&w.raise("context lost"),"function"==typeof t)return h.call(this,null,t,0);if("function"==typeof e)if("number"==typeof t)for(n=0;n<t;++n)h.call(this,null,e,n);else{if(!Array.isArray(t))return h.call(this,t,e,0);for(n=0;n<t.length;++n)h.call(this,t[n],e,n)}else if("number"==typeof t){if(t>0)return l.call(this,function(t){for(;d.length<t;)d.push(null);return d}(0|t),0|t)}else{if(!Array.isArray(t))return f.call(this,t);if(t.length)return l.call(this,t,t.length)}}),{stats:s,destroy:function(){c.destroy()}})}P&&(P.addEventListener("webglcontextlost",nt,!1),P.addEventListener("webglcontextrestored",rt,!1));var it=D.setFBO=ot({framebuffer:I.define.call(null,1,"framebuffer")});function at(t,e){var n=0;R.procs.poll();var r=e.color;r&&(o.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=16384),"depth"in e&&(o.clearDepth(+e.depth),n|=256),"stencil"in e&&(o.clearStencil(0|e.stencil),n|=1024),w(!!n,"called regl.clear with no buffer specified"),o.clear(n)}function ut(t){return w.type(t,"function","regl.frame() callback must be a function"),U.push(t),tt(),{cancel:function(){var e=he(U,t);w(e>=0,"cannot cancel a frame twice"),U[e]=function t(){var e=he(U,t);U[e]=U[U.length-1],U.length-=1,U.length<=0&&et()}}}}function st(){var t=N.viewport,e=N.scissor_box;t[0]=t[1]=e[0]=e[1]=0,g.viewportWidth=g.framebufferWidth=g.drawingBufferWidth=t[2]=e[2]=o.drawingBufferWidth,g.viewportHeight=g.framebufferHeight=g.drawingBufferHeight=t[3]=e[3]=o.drawingBufferHeight}function ct(){g.tick+=1,g.time=lt(),st(),R.procs.poll()}function ft(){T.refresh(),st(),R.procs.refresh(),p&&p.update()}function lt(){return(O()-v)/1e3}ft();var ht=e(ot,{clear:function(t){if(w("object"===a(t)&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var n=0;n<6;++n)it(e({framebuffer:t.framebuffer.faces[n]},t),at);else it(t,at);else at(0,t)},prop:I.define.bind(null,1),context:I.define.bind(null,2),this:I.define.bind(null,3),draw:ot({}),buffer:function(t){return _.create(t,34962,!1,!1)},elements:function(t){return E.create(t,!1)},texture:T.create2D,cube:T.createCube,renderbuffer:A.create,framebuffer:D.create,framebufferCube:D.createCube,vao:x.createVAO,attributes:i,frame:ut,on:function(t,e){var n;switch(w.type(e,"function","listener callback must be a function"),t){case"frame":return ut(e);case"lost":n=B;break;case"restore":n=F;break;case"destroy":n=Q;break;default:w.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(e),{cancel:function(){for(var t=0;t<n.length;++t)if(n[t]===e)return n[t]=n[n.length-1],void n.pop()}}},limits:b,hasExtension:function(t){return b.extensions.indexOf(t.toLowerCase())>=0},read:C,destroy:function(){U.length=0,et(),P&&(P.removeEventListener("webglcontextlost",nt),P.removeEventListener("webglcontextrestored",rt)),S.clear(),D.clear(),A.clear(),T.clear(),E.clear(),_.clear(),x.clear(),p&&p.clear(),Q.forEach((function(t){t()}))},_gl:o,_refresh:ft,poll:function(){ct(),p&&p.update()},now:lt,stats:h});return r.onDone(null,ht),ht}},"object"===a(e)&&void 0!==t?t.exports=i():void 0===(o="function"==typeof(r=i)?r.call(e,n,e,t):r)||(t.exports=o)},,,,,,,,function(t,e,n){var r=n(198);t.exports={Graph:r.Graph,json:n(299),alg:n(300),version:r.version}},function(t,e,n){t.exports={Graph:n(74),version:n(298)}},function(t,e,n){var r=n(104);t.exports=function(t){return r(t,4)}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(56),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():o.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(56);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(56);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(56);t.exports=function(t,e){var n=this.__data__,o=r(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}},function(t,e,n){var r=n(55);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(55),o=n(75),i=n(76);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!o||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new i(a)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(46),o=n(213),i=n(21),a=n(107),u=/^\\[object .+?Constructor\\]$/,s=Function.prototype,c=Object.prototype,f=s.toString,l=c.hasOwnProperty,h=RegExp("^"+f.call(l).replace(/[\\\\^$.*+?()[\\]{}|]/g,"\\\\$&").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(r(t)?h:u).test(a(t))}},function(t,e,n){var r=n(42),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,u=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(t){}var o=a.call(t);return r&&(e?t[u]=n:delete t[u]),o}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r,o=n(214),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(24)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(217),o=n(55),i=n(75);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},function(t,e,n){var r=n(218),o=n(219),i=n(220),a=n(221),u=n(222);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e,n){var r=n(57);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(57),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(57),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)}},function(t,e,n){var r=n(57);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var r=n(58);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e=n(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(58);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(58);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(58);t.exports=function(t,e){var n=r(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this}},function(t,e,n){var r=n(47),o=n(32);t.exports=function(t,e){return t&&r(e,o(e),t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(31),o=n(25);t.exports=function(t){return o(t)&&"[object Arguments]"==r(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(31),o=n(78),i=n(25),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!a[r(t)]}},function(t,e,n){var r=n(110)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(47),o=n(38);t.exports=function(t,e){return t&&r(e,o(e),t)}},function(t,e,n){var r=n(21),o=n(64),i=n(236),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=o(t),n=[];for(var u in t)("constructor"!=u||!e&&a.call(t,u))&&n.push(u);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var r=n(47),o=n(81);t.exports=function(t,e){return r(t,o(t),e)}},function(t,e,n){var r=n(47),o=n(115);t.exports=function(t,e){return r(t,o(t),e)}},function(t,e,n){var r=n(117),o=n(115),i=n(38);t.exports=function(t){return r(t,i,o)}},function(t,e,n){var r=n(37)(n(24),"DataView");t.exports=r},function(t,e,n){var r=n(37)(n(24),"Promise");t.exports=r},function(t,e,n){var r=n(37)(n(24),"WeakMap");t.exports=r},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(83),o=n(245),i=n(246),a=n(247),u=n(120);t.exports=function(t,e,n){var s=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new s(+t);case"[object DataView]":return o(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return u(t,n);case"[object Map]":return new s;case"[object Number]":case"[object String]":return new s(t);case"[object RegExp]":return i(t);case"[object Set]":return new s;case"[object Symbol]":return a(t)}}},function(t,e,n){var r=n(83);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(42),o=r?r.prototype:void 0,i=o?o.valueOf:void 0;t.exports=function(t){return i?Object(i.call(t)):{}}},function(t,e,n){var r=n(249),o=n(63),i=n(79),a=i&&i.isMap,u=a?o(a):r;t.exports=u},function(t,e,n){var r=n(44),o=n(25);t.exports=function(t){return o(t)&&"[object Map]"==r(t)}},function(t,e,n){var r=n(251),o=n(63),i=n(79),a=i&&i.isSet,u=a?o(a):r;t.exports=u},function(t,e,n){var r=n(44),o=n(25);t.exports=function(t){return o(t)&&"[object Set]"==r(t)}},function(t,e){t.exports=function(t){return function(e,n,r){for(var o=-1,i=Object(e),a=r(e),u=a.length;u--;){var s=a[t?u:++o];if(!1===n(i[s],s,i))break}return e}}},function(t,e,n){var r=n(28);t.exports=function(t,e){return function(n,o){if(null==n)return n;if(!r(n))return t(n,o);for(var i=n.length,a=e?i:-1,u=Object(n);(e?a--:++a<i)&&!1!==o(u[a],a,u););return n}}},function(t,e,n){var r=n(66);t.exports=function(t,e){var n=[];return r(t,(function(t,r,o){e(t,r,o)&&n.push(t)})),n}},function(t,e,n){var r=n(256),o=n(264),i=n(132);t.exports=function(t){var e=o(t);return 1==e.length&&e[0][2]?i(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(54),o=n(127);t.exports=function(t,e,n,i){var a=n.length,u=a,s=!i;if(null==t)return!u;for(t=Object(t);a--;){var c=n[a];if(s&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++a<u;){var f=(c=n[a])[0],l=t[f],h=c[1];if(s&&c[2]){if(void 0===l&&!(f in t))return!1}else{var d=new r;if(i)var p=i(l,h,f,t,e,d);if(!(void 0===p?o(h,l,3,i,d):p))return!1}}return!0}},function(t,e,n){var r=n(54),o=n(128),i=n(261),a=n(263),u=n(44),s=n(13),c=n(43),f=n(22),l="[object Object]",h=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,d,p,v){var m=s(t),y=s(e),g=m?"[object Array]":u(t),b=y?"[object Array]":u(e),_=(g="[object Arguments]"==g?l:g)==l,x=(b="[object Arguments]"==b?l:b)==l,w=g==b;if(w&&c(t)){if(!c(e))return!1;m=!0,_=!1}if(w&&!_)return v||(v=new r),m||f(t)?o(t,e,n,d,p,v):i(t,e,g,n,d,p,v);if(!(1&n)){var E=_&&h.call(t,"__wrapped__"),S=x&&h.call(e,"__wrapped__");if(E||S){var T=E?t.value():t,A=S?e.value():e;return v||(v=new r),p(T,A,n,d,v)}}return!!w&&(v||(v=new r),a(t,e,n,d,p,v))}},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e,n){var r=n(42),o=n(119),i=n(41),a=n(128),u=n(262),s=n(87),c=r?r.prototype:void 0,f=c?c.valueOf:void 0;t.exports=function(t,e,n,r,c,l,h){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!l(new o(t),new o(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var d=u;case"[object Set]":var p=1&r;if(d||(d=s),t.size!=e.size&&!p)return!1;var v=h.get(t);if(v)return v==e;r|=2,h.set(t,e);var m=a(d(t),d(e),r,c,l,h);return h.delete(t),m;case"[object Symbol]":if(f)return f.call(t)==f.call(e)}return!1}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},function(t,e,n){var r=n(116),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,i,a,u){var s=1&n,c=r(t),f=c.length;if(f!=r(e).length&&!s)return!1;for(var l=f;l--;){var h=c[l];if(!(s?h in e:o.call(e,h)))return!1}var d=u.get(t),p=u.get(e);if(d&&p)return d==e&&p==t;var v=!0;u.set(t,e),u.set(e,t);for(var m=s;++l<f;){var y=t[h=c[l]],g=e[h];if(i)var b=s?i(g,y,h,e,t,u):i(y,g,h,t,e,u);if(!(void 0===b?y===g||a(y,g,n,i,u):b)){v=!1;break}m||(m="constructor"==h)}if(v&&!m){var _=t.constructor,x=e.constructor;_==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x||(v=!1)}return u.delete(t),u.delete(e),v}},function(t,e,n){var r=n(131),o=n(32);t.exports=function(t){for(var e=o(t),n=e.length;n--;){var i=e[n],a=t[i];e[n]=[i,a,r(a)]}return e}},function(t,e,n){var r=n(127),o=n(266),i=n(134),a=n(88),u=n(131),s=n(132),c=n(49);t.exports=function(t,e){return a(t)&&u(e)?s(c(t),e):function(n){var a=o(n,t);return void 0===a&&a===e?i(n,t):r(e,a,3)}}},function(t,e,n){var r=n(67);t.exports=function(t,e,n){var o=null==t?void 0:r(t,e);return void 0===o?n:o}},function(t,e,n){var r=n(268),o=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,i=/\\\\(\\\\)?/g,a=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,(function(t,n,r,o){e.push(r?o.replace(i,"$1"):n||t)})),e}));t.exports=a},function(t,e,n){var r=n(269);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var r=n(76);function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(o.Cache||r),n}o.Cache=r,t.exports=o},function(t,e,n){var r=n(42),o=n(69),i=n(13),a=n(45),u=r?r.prototype:void 0,s=u?u.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(a(e))return s?s.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(136),o=n(273),i=n(88),a=n(49);t.exports=function(t){return i(t)?r(a(t)):o(t)}},function(t,e,n){var r=n(67);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t,e){return null!=t&&n.call(t,e)}},function(t,e,n){var r=n(80),o=n(44),i=n(48),a=n(13),u=n(28),s=n(43),c=n(64),f=n(22),l=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(u(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||s(t)||f(t)||i(t)))return!t.length;var e=o(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(c(t))return!r(t).length;for(var n in t)if(l.call(t,n))return!1;return!0}},function(t,e){t.exports=function(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}},function(t,e){t.exports=function(t,e,n,r,o){return o(t,(function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)})),n}},function(t,e,n){var r=n(80),o=n(44),i=n(28),a=n(279),u=n(280);t.exports=function(t){if(null==t)return 0;if(i(t))return a(t)?u(t):t.length;var e=o(t);return"[object Map]"==e||"[object Set]"==e?t.size:r(t).length}},function(t,e,n){var r=n(31),o=n(13),i=n(25);t.exports=function(t){return"string"==typeof t||!o(t)&&i(t)&&"[object String]"==r(t)}},function(t,e,n){var r=n(281),o=n(282),i=n(283);t.exports=function(t){return o(t)?i(t):r(t)}},function(t,e,n){var r=n(136)("length");t.exports=r},function(t,e){var n=RegExp("[\\\\u200d\\\\ud800-\\\\udfff\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe2f\\\\u20d0-\\\\u20ff\\\\ufe0e\\\\ufe0f]");t.exports=function(t){return n.test(t)}},function(t,e){var n="[\\\\ud800-\\\\udfff]",r="[\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe2f\\\\u20d0-\\\\u20ff]",o="\\\\ud83c[\\\\udffb-\\\\udfff]",i="[^\\\\ud800-\\\\udfff]",a="(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}",u="[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]",s="(?:"+r+"|"+o+")"+"?",c="[\\\\ufe0e\\\\ufe0f]?"+s+("(?:\\\\u200d(?:"+[i,a,u].join("|")+")[\\\\ufe0e\\\\ufe0f]?"+s+")*"),f="(?:"+[i+r+"?",r,a,u,n].join("|")+")",l=RegExp(o+"(?="+o+")|"+f+c,"g");t.exports=function(t){for(var e=l.lastIndex=0;l.test(t);)++e;return e}},function(t,e,n){var r=n(77),o=n(122),i=n(85),a=n(29),u=n(65),s=n(13),c=n(43),f=n(46),l=n(21),h=n(22);t.exports=function(t,e,n){var d=s(t),p=d||c(t)||h(t);if(e=a(e,4),null==n){var v=t&&t.constructor;n=p?d?new v:[]:l(t)&&f(v)?o(u(t)):{}}return(p?r:i)(t,(function(t,r,o){return e(n,t,r,o)})),n}},function(t,e,n){var r=n(89),o=n(70),i=n(144),a=n(146),u=o((function(t){return i(r(t,1,a,!0))}));t.exports=u},function(t,e,n){var r=n(42),o=n(48),i=n(13),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return i(t)||o(t)||!!(a&&t&&t[a])}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(84),o=n(108),i=n(39),a=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:i;t.exports=a},function(t,e){var n=Date.now;t.exports=function(t){var e=0,r=0;return function(){var o=n(),i=16-(o-r);if(r=o,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var r=n(291);t.exports=function(t,e){return!!(null==t?0:t.length)&&r(t,e,0)>-1}},function(t,e,n){var r=n(145),o=n(292),i=n(293);t.exports=function(t,e,n){return e==e?i(t,e,n):r(t,o,n)}},function(t,e){t.exports=function(t){return t!=t}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}},function(t,e){t.exports=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}},function(t,e,n){var r=n(118),o=n(296),i=n(87),a=r&&1/i(new r([,-0]))[1]==1/0?function(t){return new r(t)}:o;t.exports=a},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(69);t.exports=function(t,e){return r(e,(function(e){return t[e]}))}},function(t,e){t.exports="2.1.8"},function(t,e,n){var r=n(20),o=n(74);function i(t){return r.map(t.nodes(),(function(e){var n=t.node(e),o=t.parent(e),i={v:e};return r.isUndefined(n)||(i.value=n),r.isUndefined(o)||(i.parent=o),i}))}function a(t){return r.map(t.edges(),(function(e){var n=t.edge(e),o={v:e.v,w:e.w};return r.isUndefined(e.name)||(o.name=e.name),r.isUndefined(n)||(o.value=n),o}))}t.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:i(t),edges:a(t)};r.isUndefined(t.graph())||(e.value=r.clone(t.graph()));return e},read:function(t){var e=new o(t.options).setGraph(t.value);return r.each(t.nodes,(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)})),r.each(t.edges,(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)})),e}}},function(t,e,n){t.exports={components:n(301),dijkstra:n(148),dijkstraAll:n(302),findCycles:n(303),floydWarshall:n(304),isAcyclic:n(305),postorder:n(306),preorder:n(307),prim:n(308),tarjan:n(150),topsort:n(151)}},function(t,e,n){var r=n(20);t.exports=function(t){var e,n={},o=[];function i(o){r.has(n,o)||(n[o]=!0,e.push(o),r.each(t.successors(o),i),r.each(t.predecessors(o),i))}return r.each(t.nodes(),(function(t){e=[],i(t),e.length&&o.push(e)})),o}},function(t,e,n){var r=n(148),o=n(20);t.exports=function(t,e,n){return o.transform(t.nodes(),(function(o,i){o[i]=r(t,i,e,n)}),{})}},function(t,e,n){var r=n(20),o=n(150);t.exports=function(t){return r.filter(o(t),(function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))}},function(t,e,n){var r=n(20);t.exports=function(t,e,n){return function(t,e,n){var r={},o=t.nodes();return o.forEach((function(t){r[t]={},r[t][t]={distance:0},o.forEach((function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})})),n(t).forEach((function(n){var o=n.v===t?n.w:n.v,i=e(n);r[t][o]={distance:i,predecessor:t}}))})),o.forEach((function(t){var e=r[t];o.forEach((function(n){var i=r[n];o.forEach((function(n){var r=i[t],o=e[n],a=i[n],u=r.distance+o.distance;u<a.distance&&(a.distance=u,a.predecessor=o.predecessor)}))}))})),r}(t,e||o,n||function(e){return t.outEdges(e)})};var o=r.constant(1)},function(t,e,n){var r=n(151);t.exports=function(t){try{r(t)}catch(t){if(t instanceof r.CycleException)return!1;throw t}return!0}},function(t,e,n){var r=n(152);t.exports=function(t,e){return r(t,e,"post")}},function(t,e,n){var r=n(152);t.exports=function(t,e){return r(t,e,"pre")}},function(t,e,n){var r=n(20),o=n(74),i=n(149);t.exports=function(t,e){var n,a=new o,u={},s=new i;function c(t){var r=t.v===n?t.w:t.v,o=s.priority(r);if(void 0!==o){var i=e(t);i<o&&(u[r]=n,s.decrease(r,i))}}if(0===t.nodeCount())return a;r.each(t.nodes(),(function(t){s.add(t,Number.POSITIVE_INFINITY),a.setNode(t)})),s.decrease(t.nodes()[0],0);var f=!1;for(;s.size()>0;){if(n=s.removeMin(),r.has(u,n))a.setEdge(n,u[n]);else{if(f)throw new Error("Input graph is not connected: "+t);f=!0}t.nodeEdges(n).forEach(c)}return a}},function(t,e,n){"use strict";var r=n(11),o=n(346),i=n(349),a=n(350),u=n(18).normalizeRanks,s=n(352),c=n(18).removeEmptyRanks,f=n(353),l=n(354),h=n(355),d=n(356),p=n(365),v=n(18),m=n(23).Graph;t.exports=function(t,e){var n=e&&e.debugTiming?v.time:v.notime;n("layout",(function(){var e=n("  buildLayoutGraph",(function(){return function(t){var e=new m({multigraph:!0,compound:!0}),n=A(t.graph());return e.setGraph(r.merge({},g,T(n,y),r.pick(n,b))),r.forEach(t.nodes(),(function(n){var o=A(t.node(n));e.setNode(n,r.defaults(T(o,_),x)),e.setParent(n,t.parent(n))})),r.forEach(t.edges(),(function(n){var o=A(t.edge(n));e.setEdge(n,r.merge({},E,T(o,w),r.pick(o,S)))})),e}(t)}));n("  runLayout",(function(){!function(t,e){e("    makeSpaceForEdgeLabels",(function(){!function(t){var e=t.graph();e.ranksep/=2,r.forEach(t.edges(),(function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(t)})),e("    removeSelfEdges",(function(){!function(t){r.forEach(t.edges(),(function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}}))}(t)})),e("    acyclic",(function(){o.run(t)})),e("    nestingGraph.run",(function(){f.run(t)})),e("    rank",(function(){a(v.asNonCompoundGraph(t))})),e("    injectEdgeLabelProxies",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),o={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e:e};v.addDummyNode(t,"edge-proxy",o,"_ep")}}))}(t)})),e("    removeEmptyRanks",(function(){c(t)})),e("    nestingGraph.cleanup",(function(){f.cleanup(t)})),e("    normalizeRanks",(function(){u(t)})),e("    assignRankMinMax",(function(){!function(t){var e=0;r.forEach(t.nodes(),(function(n){var o=t.node(n);o.borderTop&&(o.minRank=t.node(o.borderTop).rank,o.maxRank=t.node(o.borderBottom).rank,e=r.max(e,o.maxRank))})),t.graph().maxRank=e}(t)})),e("    removeEdgeLabelProxies",(function(){!function(t){r.forEach(t.nodes(),(function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))}))}(t)})),e("    normalize.run",(function(){i.run(t)})),e("    parentDummyChains",(function(){s(t)})),e("    addBorderSegments",(function(){l(t)})),e("    order",(function(){d(t)})),e("    insertSelfEdges",(function(){!function(t){var e=v.buildLayerMatrix(t);r.forEach(e,(function(e){var n=0;r.forEach(e,(function(e,o){var i=t.node(e);i.order=o+n,r.forEach(i.selfEdges,(function(e){v.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:o+ ++n,e:e.e,label:e.label},"_se")})),delete i.selfEdges}))}))}(t)})),e("    adjustCoordinateSystem",(function(){h.adjust(t)})),e("    position",(function(){p(t)})),e("    positionSelfEdges",(function(){!function(t){r.forEach(t.nodes(),(function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),o=r.x+r.width/2,i=r.y,a=n.x-o,u=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:o+2*a/3,y:i-u},{x:o+5*a/6,y:i-u},{x:o+a,y:i},{x:o+5*a/6,y:i+u},{x:o+2*a/3,y:i+u}],n.label.x=n.x,n.label.y=n.y}}))}(t)})),e("    removeBorderNodes",(function(){!function(t){r.forEach(t.nodes(),(function(e){if(t.children(e).length){var n=t.node(e),o=t.node(n.borderTop),i=t.node(n.borderBottom),a=t.node(r.last(n.borderLeft)),u=t.node(r.last(n.borderRight));n.width=Math.abs(u.x-a.x),n.height=Math.abs(i.y-o.y),n.x=a.x+n.width/2,n.y=o.y+n.height/2}})),r.forEach(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))}(t)})),e("    normalize.undo",(function(){i.undo(t)})),e("    fixupEdgeLabelCoords",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(t)})),e("    undoCoordinateSystem",(function(){h.undo(t)})),e("    translateGraph",(function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,o=Number.POSITIVE_INFINITY,i=0,a=t.graph(),u=a.marginx||0,s=a.marginy||0;function c(t){var r=t.x,a=t.y,u=t.width,s=t.height;e=Math.min(e,r-u/2),n=Math.max(n,r+u/2),o=Math.min(o,a-s/2),i=Math.max(i,a+s/2)}r.forEach(t.nodes(),(function(e){c(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.has(n,"x")&&c(n)})),e-=u,o-=s,r.forEach(t.nodes(),(function(n){var r=t.node(n);r.x-=e,r.y-=o})),r.forEach(t.edges(),(function(n){var i=t.edge(n);r.forEach(i.points,(function(t){t.x-=e,t.y-=o})),r.has(i,"x")&&(i.x-=e),r.has(i,"y")&&(i.y-=o)})),a.width=n-e+u,a.height=i-o+s}(t)})),e("    assignNodeIntersects",(function(){!function(t){r.forEach(t.edges(),(function(e){var n,r,o=t.edge(e),i=t.node(e.v),a=t.node(e.w);o.points?(n=o.points[0],r=o.points[o.points.length-1]):(o.points=[],n=a,r=i),o.points.unshift(v.intersectRect(i,n)),o.points.push(v.intersectRect(a,r))}))}(t)})),e("    reversePoints",(function(){!function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);n.reversed&&n.points.reverse()}))}(t)})),e("    acyclic.undo",(function(){o.undo(t)}))}(e,n)})),n("  updateInputGraph",(function(){!function(t,e){r.forEach(t.nodes(),(function(n){var r=t.node(n),o=e.node(n);r&&(r.x=o.x,r.y=o.y,e.children(n).length&&(r.width=o.width,r.height=o.height))})),r.forEach(t.edges(),(function(n){var o=t.edge(n),i=e.edge(n);o.points=i.points,r.has(i,"x")&&(o.x=i.x,o.y=i.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)}))}))};var y=["nodesep","edgesep","ranksep","marginx","marginy"],g={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],_=["width","height"],x={width:0,height:0},w=["minlen","weight","width","height","labeloffset"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},S=["labelpos"];function T(t,e){return r.mapValues(r.pick(t,e),Number)}function A(t){var e={};return r.forEach(t,(function(t,n){e[n.toLowerCase()]=t})),e}},function(t,e,n){var r=n(104);t.exports=function(t){return r(t,5)}},function(t,e,n){var r=n(70),o=n(41),i=n(71),a=n(38),u=Object.prototype,s=u.hasOwnProperty,c=r((function(t,e){t=Object(t);var n=-1,r=e.length,c=r>2?e[2]:void 0;for(c&&i(e[0],e[1],c)&&(r=1);++n<r;)for(var f=e[n],l=a(f),h=-1,d=l.length;++h<d;){var p=l[h],v=t[p];(void 0===v||o(v,u[p])&&!s.call(t,p))&&(t[p]=f[p])}return t}));t.exports=c},function(t,e,n){var r=n(313)(n(314));t.exports=r},function(t,e,n){var r=n(29),o=n(28),i=n(32);t.exports=function(t){return function(e,n,a){var u=Object(e);if(!o(e)){var s=r(n,3);e=i(e),n=function(t){return s(u[t],t,u)}}var c=t(e,n,a);return c>-1?u[s?e[c]:c]:void 0}}},function(t,e,n){var r=n(145),o=n(29),i=n(315),a=Math.max;t.exports=function(t,e,n){var u=null==t?0:t.length;if(!u)return-1;var s=null==n?0:i(n);return s<0&&(s=a(u+s,0)),r(t,o(e,3),s)}},function(t,e,n){var r=n(153);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},function(t,e,n){var r=n(21),o=n(45),i=/^\\s+|\\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var n=u.test(t);return n||s.test(t)?c(t.slice(2),n?2:8):a.test(t)?NaN:+t}},function(t,e,n){var r=n(86),o=n(125),i=n(38);t.exports=function(t,e){return null==t?t:r(t,o(e),i)}},function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},function(t,e,n){var r=n(60),o=n(85),i=n(29);t.exports=function(t,e){var n={};return e=i(e,3),o(t,(function(t,o,i){r(n,o,e(t,o,i))})),n}},function(t,e,n){var r=n(90),o=n(321),i=n(39);t.exports=function(t){return t&&t.length?r(t,i,o):void 0}},function(t,e){t.exports=function(t,e){return t>e}},function(t,e,n){var r=n(323),o=n(326)((function(t,e,n){r(t,e,n)}));t.exports=o},function(t,e,n){var r=n(54),o=n(155),i=n(86),a=n(324),u=n(21),s=n(38),c=n(156);t.exports=function t(e,n,f,l,h){e!==n&&i(n,(function(i,s){if(h||(h=new r),u(i))a(e,n,s,f,t,l,h);else{var d=l?l(c(e,s),i,s+"",e,n,h):void 0;void 0===d&&(d=i),o(e,s,d)}}),s)}},function(t,e,n){var r=n(155),o=n(111),i=n(120),a=n(112),u=n(121),s=n(48),c=n(13),f=n(146),l=n(43),h=n(46),d=n(21),p=n(101),v=n(22),m=n(156),y=n(325);t.exports=function(t,e,n,g,b,_,x){var w=m(t,n),E=m(e,n),S=x.get(E);if(S)r(t,n,S);else{var T=_?_(w,E,n+"",t,e,x):void 0,A=void 0===T;if(A){var I=c(E),k=!I&&l(E),O=!I&&!k&&v(E);T=E,I||k||O?c(w)?T=w:f(w)?T=a(w):k?(A=!1,T=o(E,!0)):O?(A=!1,T=i(E,!0)):T=[]:p(E)||s(E)?(T=w,s(w)?T=y(w):d(w)&&!h(w)||(T=u(E))):A=!1}A&&(x.set(E,T),b(T,E,g,_,x),x.delete(E)),r(t,n,T)}}},function(t,e,n){var r=n(47),o=n(38);t.exports=function(t){return r(t,o(t))}},function(t,e,n){var r=n(70),o=n(71);t.exports=function(t){return r((function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,u=i>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(i--,a):void 0,u&&o(n[0],n[1],u)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,a)}return e}))}},function(t,e,n){var r=n(90),o=n(157),i=n(39);t.exports=function(t){return t&&t.length?r(t,i,o):void 0}},function(t,e,n){var r=n(90),o=n(29),i=n(157);t.exports=function(t,e){return t&&t.length?r(t,o(e,2),i):void 0}},function(t,e,n){var r=n(24);t.exports=function(){return r.Date.now()}},function(t,e,n){var r=n(331),o=n(334)((function(t,e){return null==t?{}:r(t,e)}));t.exports=o},function(t,e,n){var r=n(332),o=n(134);t.exports=function(t,e){return r(t,e,(function(e,n){return o(t,n)}))}},function(t,e,n){var r=n(67),o=n(333),i=n(68);t.exports=function(t,e,n){for(var a=-1,u=e.length,s={};++a<u;){var c=e[a],f=r(t,c);n(f,c)&&o(s,i(c,t),f)}return s}},function(t,e,n){var r=n(59),o=n(68),i=n(62),a=n(21),u=n(49);t.exports=function(t,e,n,s){if(!a(t))return t;for(var c=-1,f=(e=o(e,t)).length,l=f-1,h=t;null!=h&&++c<f;){var d=u(e[c]),p=n;if("__proto__"===d||"constructor"===d||"prototype"===d)return t;if(c!=l){var v=h[d];void 0===(p=s?s(v,d,h):void 0)&&(p=a(v)?v:i(e[c+1])?[]:{})}r(h,d,p),h=h[d]}return t}},function(t,e,n){var r=n(154),o=n(142),i=n(143);t.exports=function(t){return i(o(t,void 0,r),t+"")}},function(t,e,n){var r=n(336)();t.exports=r},function(t,e,n){var r=n(337),o=n(71),i=n(153);t.exports=function(t){return function(e,n,a){return a&&"number"!=typeof a&&o(e,n,a)&&(n=a=void 0),e=i(e),void 0===n?(n=e,e=0):n=i(n),a=void 0===a?e<n?1:-1:i(a),r(e,n,a,t)}}},function(t,e){var n=Math.ceil,r=Math.max;t.exports=function(t,e,o,i){for(var a=-1,u=r(n((e-t)/(o||1)),0),s=Array(u);u--;)s[i?u:++a]=t,t+=o;return s}},function(t,e,n){var r=n(89),o=n(339),i=n(70),a=n(71),u=i((function(t,e){if(null==t)return[];var n=e.length;return n>1&&a(t,e[0],e[1])?e=[]:n>2&&a(e[0],e[1],e[2])&&(e=[e[0]]),o(t,r(e,1),[])}));t.exports=u},function(t,e,n){var r=n(69),o=n(67),i=n(29),a=n(140),u=n(340),s=n(63),c=n(341),f=n(39),l=n(13);t.exports=function(t,e,n){e=e.length?r(e,(function(t){return l(t)?function(e){return o(e,1===t.length?t[0]:t)}:t})):[f];var h=-1;e=r(e,s(i));var d=a(t,(function(t,n,o){return{criteria:r(e,(function(e){return e(t)})),index:++h,value:t}}));return u(d,(function(t,e){return c(t,e,n)}))}},function(t,e){t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},function(t,e,n){var r=n(342);t.exports=function(t,e,n){for(var o=-1,i=t.criteria,a=e.criteria,u=i.length,s=n.length;++o<u;){var c=r(i[o],a[o]);if(c)return o>=s?c:c*("desc"==n[o]?-1:1)}return t.index-e.index}},function(t,e,n){var r=n(45);t.exports=function(t,e){if(t!==e){var n=void 0!==t,o=null===t,i=t==t,a=r(t),u=void 0!==e,s=null===e,c=e==e,f=r(e);if(!s&&!f&&!a&&t>e||a&&u&&c&&!s&&!f||o&&u&&c||!n&&c||!i)return 1;if(!o&&!a&&!f&&t<e||f&&n&&i&&!o&&!a||s&&n&&i||!u&&i||!c)return-1}return 0}},function(t,e,n){var r=n(133),o=0;t.exports=function(t){var e=++o;return r(t)+e}},function(t,e,n){var r=n(59),o=n(345);t.exports=function(t,e){return o(t||[],e||[],r)}},function(t,e){t.exports=function(t,e,n){for(var r=-1,o=t.length,i=e.length,a={};++r<o;){var u=r<i?e[r]:void 0;n(a,t[r],u)}return a}},function(t,e,n){"use strict";var r=n(11),o=n(347);t.exports={run:function(t){var e="greedy"===t.graph().acyclicer?o(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},o={};function i(a){r.has(o,a)||(o[a]=!0,n[a]=!0,r.forEach(t.outEdges(a),(function(t){r.has(n,t.w)?e.push(t):i(t.w)})),delete n[a])}return r.forEach(t.nodes(),i),e}(t);r.forEach(e,(function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,r.uniqueId("rev"))}))},undo:function(t){r.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}}))}}},function(t,e,n){var r=n(11),o=n(23).Graph,i=n(348);t.exports=function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new o,a=0,u=0;r.forEach(t.nodes(),(function(t){n.setNode(t,{v:t,in:0,out:0})})),r.forEach(t.edges(),(function(t){var r=n.edge(t.v,t.w)||0,o=e(t),i=r+o;n.setEdge(t.v,t.w,i),u=Math.max(u,n.node(t.v).out+=o),a=Math.max(a,n.node(t.w).in+=o)}));var c=r.range(u+a+3).map((function(){return new i})),f=a+1;return r.forEach(n.nodes(),(function(t){s(c,f,n.node(t))})),{graph:n,buckets:c,zeroIdx:f}}(t,e||a),c=function(t,e,n){var r,o=[],i=e[e.length-1],a=e[0];for(;t.nodeCount();){for(;r=a.dequeue();)u(t,e,n,r);for(;r=i.dequeue();)u(t,e,n,r);if(t.nodeCount())for(var s=e.length-2;s>0;--s)if(r=e[s].dequeue()){o=o.concat(u(t,e,n,r,!0));break}}return o}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(c,(function(e){return t.outEdges(e.v,e.w)})),!0)};var a=r.constant(1);function u(t,e,n,o,i){var a=i?[]:void 0;return r.forEach(t.inEdges(o.v),(function(r){var o=t.edge(r),u=t.node(r.v);i&&a.push({v:r.v,w:r.w}),u.out-=o,s(e,n,u)})),r.forEach(t.outEdges(o.v),(function(r){var o=t.edge(r),i=r.w,a=t.node(i);a.in-=o,s(e,n,a)})),t.removeNode(o.v),a}function s(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}},function(t,e){function n(){var t={};t._next=t._prev=t,this._sentinel=t}function r(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function o(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=n,n.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return r(e),e},n.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&r(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},n.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,o)),n=n._prev;return"["+t.join(", ")+"]"}},function(t,e,n){"use strict";var r=n(11),o=n(18);t.exports={run:function(t){t.graph().dummyChains=[],r.forEach(t.edges(),(function(e){!function(t,e){var n,r,i,a=e.v,u=t.node(a).rank,s=e.w,c=t.node(s).rank,f=e.name,l=t.edge(e),h=l.labelRank;if(c===u+1)return;for(t.removeEdge(e),i=0,++u;u<c;++i,++u)l.points=[],r={width:0,height:0,edgeLabel:l,edgeObj:e,rank:u},n=o.addDummyNode(t,"edge",r,"_d"),u===h&&(r.width=l.width,r.height=l.height,r.dummy="edge-label",r.labelpos=l.labelpos),t.setEdge(a,n,{weight:l.weight},f),0===i&&t.graph().dummyChains.push(n),a=n;t.setEdge(a,s,{weight:l.weight},f)}(t,e)}))},undo:function(t){r.forEach(t.graph().dummyChains,(function(e){var n,r=t.node(e),o=r.edgeLabel;for(t.setEdge(r.edgeObj,o);r.dummy;)n=t.successors(e)[0],t.removeNode(e),o.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(o.x=r.x,o.y=r.y,o.width=r.width,o.height=r.height),e=n,r=t.node(e)}))}}},function(t,e,n){"use strict";var r=n(72).longestPath,o=n(158),i=n(351);t.exports=function(t){switch(t.graph().ranker){case"network-simplex":u(t);break;case"tight-tree":!function(t){r(t),o(t)}(t);break;case"longest-path":a(t);break;default:u(t)}};var a=r;function u(t){i(t)}},function(t,e,n){"use strict";var r=n(11),o=n(158),i=n(72).slack,a=n(72).longestPath,u=n(23).alg.preorder,s=n(23).alg.postorder,c=n(18).simplify;function f(t){t=c(t),a(t);var e,n=o(t);for(d(n),l(n,t);e=v(n);)y(n,t,e,m(n,t,e))}function l(t,e){var n=s(t,t.nodes());n=n.slice(0,n.length-1),r.forEach(n,(function(n){!function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=h(t,e,n)}(t,e,n)}))}function h(t,e,n){var o=t.node(n).parent,i=!0,a=e.edge(n,o),u=0;return a||(i=!1,a=e.edge(o,n)),u=a.weight,r.forEach(e.nodeEdges(n),(function(r){var a,s,c=r.v===n,f=c?r.w:r.v;if(f!==o){var l=c===i,h=e.edge(r).weight;if(u+=l?h:-h,a=n,s=f,t.hasEdge(a,s)){var d=t.edge(n,f).cutvalue;u+=l?-d:d}}})),u}function d(t,e){arguments.length<2&&(e=t.nodes()[0]),p(t,{},1,e)}function p(t,e,n,o,i){var a=n,u=t.node(o);return e[o]=!0,r.forEach(t.neighbors(o),(function(i){r.has(e,i)||(n=p(t,e,n,i,o))})),u.low=a,u.lim=n++,i?u.parent=i:delete u.parent,n}function v(t){return r.find(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function m(t,e,n){var o=n.v,a=n.w;e.hasEdge(o,a)||(o=n.w,a=n.v);var u=t.node(o),s=t.node(a),c=u,f=!1;u.lim>s.lim&&(c=s,f=!0);var l=r.filter(e.edges(),(function(e){return f===g(t,t.node(e.v),c)&&f!==g(t,t.node(e.w),c)}));return r.minBy(l,(function(t){return i(e,t)}))}function y(t,e,n,o){var i=n.v,a=n.w;t.removeEdge(i,a),t.setEdge(o.v,o.w,{}),d(t),l(t,e),function(t,e){var n=r.find(t.nodes(),(function(t){return!e.node(t).parent})),o=u(t,n);o=o.slice(1),r.forEach(o,(function(n){var r=t.node(n).parent,o=e.edge(n,r),i=!1;o||(o=e.edge(r,n),i=!0),e.node(n).rank=e.node(r).rank+(i?o.minlen:-o.minlen)}))}(t,e)}function g(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}t.exports=f,f.initLowLimValues=d,f.initCutValues=l,f.calcCutValue=h,f.leaveEdge=v,f.enterEdge=m,f.exchangeEdges=y},function(t,e,n){var r=n(11);t.exports=function(t){var e=function(t){var e={},n=0;function o(i){var a=n;r.forEach(t.children(i),o),e[i]={low:a,lim:n++}}return r.forEach(t.children(),o),e}(t);r.forEach(t.graph().dummyChains,(function(n){for(var r=t.node(n),o=r.edgeObj,i=function(t,e,n,r){var o,i,a=[],u=[],s=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);o=n;do{o=t.parent(o),a.push(o)}while(o&&(e[o].low>s||c>e[o].lim));i=o,o=r;for(;(o=t.parent(o))!==i;)u.push(o);return{path:a.concat(u.reverse()),lca:i}}(t,e,o.v,o.w),a=i.path,u=i.lca,s=0,c=a[s],f=!0;n!==o.w;){if(r=t.node(n),f){for(;(c=a[s])!==u&&t.node(c).maxRank<r.rank;)s++;c===u&&(f=!1)}if(!f){for(;s<a.length-1&&t.node(c=a[s+1]).minRank<=r.rank;)s++;c=a[s]}t.setParent(n,c),n=t.successors(n)[0]}}))}},function(t,e,n){var r=n(11),o=n(18);t.exports={run:function(t){var e=o.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};return r.forEach(t.children(),(function(n){!function n(o,i){var a=t.children(o);a&&a.length&&r.forEach(a,(function(t){n(t,i+1)}));e[o]=i}(n,1)})),e}(t),i=r.max(r.values(n))-1,a=2*i+1;t.graph().nestingRoot=e,r.forEach(t.edges(),(function(e){t.edge(e).minlen*=a}));var u=function(t){return r.reduce(t.edges(),(function(e,n){return e+t.edge(n).weight}),0)}(t)+1;r.forEach(t.children(),(function(s){!function t(e,n,i,a,u,s,c){var f=e.children(c);if(!f.length)return void(c!==n&&e.setEdge(n,c,{weight:0,minlen:i}));var l=o.addBorderNode(e,"_bt"),h=o.addBorderNode(e,"_bb"),d=e.node(c);e.setParent(l,c),d.borderTop=l,e.setParent(h,c),d.borderBottom=h,r.forEach(f,(function(r){t(e,n,i,a,u,s,r);var o=e.node(r),f=o.borderTop?o.borderTop:r,d=o.borderBottom?o.borderBottom:r,p=o.borderTop?a:2*a,v=f!==d?1:u-s[c]+1;e.setEdge(l,f,{weight:p,minlen:v,nestingEdge:!0}),e.setEdge(d,h,{weight:p,minlen:v,nestingEdge:!0})})),e.parent(c)||e.setEdge(n,l,{weight:0,minlen:u+s[c]})}(t,e,a,u,i,n,s)})),t.graph().nodeRankFactor=a},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,r.forEach(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))}}},function(t,e,n){var r=n(11),o=n(18);function i(t,e,n,r,i,a){var u={width:0,height:0,rank:a,borderType:e},s=i[e][a-1],c=o.addDummyNode(t,"border",u,n);i[e][a]=c,t.setParent(c,r),s&&t.setEdge(s,c,{weight:1})}t.exports=function(t){r.forEach(t.children(),(function e(n){var o=t.children(n),a=t.node(n);if(o.length&&r.forEach(o,e),r.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var u=a.minRank,s=a.maxRank+1;u<s;++u)i(t,"borderLeft","_bl",n,a,u),i(t,"borderRight","_br",n,a,u)}}))}},function(t,e,n){"use strict";var r=n(11);function o(t){r.forEach(t.nodes(),(function(e){i(t.node(e))})),r.forEach(t.edges(),(function(e){i(t.edge(e))}))}function i(t){var e=t.width;t.width=t.height,t.height=e}function a(t){t.y=-t.y}function u(t){var e=t.x;t.x=t.y,t.y=e}t.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||o(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){r.forEach(t.nodes(),(function(e){a(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.forEach(n.points,a),r.has(n,"y")&&a(n)}))}(t);"lr"!==e&&"rl"!==e||(!function(t){r.forEach(t.nodes(),(function(e){u(t.node(e))})),r.forEach(t.edges(),(function(e){var n=t.edge(e);r.forEach(n.points,u),r.has(n,"x")&&u(n)}))}(t),o(t))}}},function(t,e,n){"use strict";var r=n(11),o=n(357),i=n(358),a=n(359),u=n(363),s=n(364),c=n(23).Graph,f=n(18);function l(t,e,n){return r.map(e,(function(e){return u(t,e,n)}))}function h(t,e){var n=new c;r.forEach(t,(function(t){var o=t.graph().root,i=a(t,o,n,e);r.forEach(i.vs,(function(e,n){t.node(e).order=n})),s(t,n,i.vs)}))}function d(t,e){r.forEach(e,(function(e){r.forEach(e,(function(e,n){t.node(e).order=n}))}))}t.exports=function(t){var e=f.maxRank(t),n=l(t,r.range(1,e+1),"inEdges"),a=l(t,r.range(e-1,-1,-1),"outEdges"),u=o(t);d(t,u);for(var s,c=Number.POSITIVE_INFINITY,p=0,v=0;v<4;++p,++v){h(p%2?n:a,p%4>=2),u=f.buildLayerMatrix(t);var m=i(t,u);m<c&&(v=0,s=r.cloneDeep(u),c=m)}d(t,s)}},function(t,e,n){"use strict";var r=n(11);t.exports=function(t){var e={},n=r.filter(t.nodes(),(function(e){return!t.children(e).length})),o=r.max(r.map(n,(function(e){return t.node(e).rank}))),i=r.map(r.range(o+1),(function(){return[]}));var a=r.sortBy(n,(function(e){return t.node(e).rank}));return r.forEach(a,(function n(o){if(r.has(e,o))return;e[o]=!0;var a=t.node(o);i[a.rank].push(o),r.forEach(t.successors(o),n)})),i}},function(t,e,n){"use strict";var r=n(11);function o(t,e,n){for(var o=r.zipObject(n,r.map(n,(function(t,e){return e}))),i=r.flatten(r.map(e,(function(e){return r.sortBy(r.map(t.outEdges(e),(function(e){return{pos:o[e.w],weight:t.edge(e).weight}})),"pos")})),!0),a=1;a<n.length;)a<<=1;var u=2*a-1;a-=1;var s=r.map(new Array(u),(function(){return 0})),c=0;return r.forEach(i.forEach((function(t){var e=t.pos+a;s[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=s[e+1]),s[e=e-1>>1]+=t.weight;c+=t.weight*n}))),c}t.exports=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=o(t,e[r-1],e[r]);return n}},function(t,e,n){var r=n(11),o=n(360),i=n(361),a=n(362);t.exports=function t(e,n,u,s){var c=e.children(n),f=e.node(n),l=f?f.borderLeft:void 0,h=f?f.borderRight:void 0,d={};l&&(c=r.filter(c,(function(t){return t!==l&&t!==h})));var p=o(e,c);r.forEach(p,(function(n){if(e.children(n.v).length){var o=t(e,n.v,u,s);d[n.v]=o,r.has(o,"barycenter")&&(i=n,a=o,r.isUndefined(i.barycenter)?(i.barycenter=a.barycenter,i.weight=a.weight):(i.barycenter=(i.barycenter*i.weight+a.barycenter*a.weight)/(i.weight+a.weight),i.weight+=a.weight))}var i,a}));var v=i(p,u);!function(t,e){r.forEach(t,(function(t){t.vs=r.flatten(t.vs.map((function(t){return e[t]?e[t].vs:t})),!0)}))}(v,d);var m=a(v,s);if(l&&(m.vs=r.flatten([l,m.vs,h],!0),e.predecessors(l).length)){var y=e.node(e.predecessors(l)[0]),g=e.node(e.predecessors(h)[0]);r.has(m,"barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+y.order+g.order)/(m.weight+2),m.weight+=2}return m}},function(t,e,n){var r=n(11);t.exports=function(t,e){return r.map(e,(function(e){var n=t.inEdges(e);if(n.length){var o=r.reduce(n,(function(e,n){var r=t.edge(n),o=t.node(n.v);return{sum:e.sum+r.weight*o.order,weight:e.weight+r.weight}}),{sum:0,weight:0});return{v:e,barycenter:o.sum/o.weight,weight:o.weight}}return{v:e}}))}},function(t,e,n){"use strict";var r=n(11);t.exports=function(t,e){var n={};return r.forEach(t,(function(t,e){var o=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};r.isUndefined(t.barycenter)||(o.barycenter=t.barycenter,o.weight=t.weight)})),r.forEach(e.edges(),(function(t){var e=n[t.v],o=n[t.w];r.isUndefined(e)||r.isUndefined(o)||(o.indegree++,e.out.push(n[t.w]))})),function(t){var e=[];function n(t){return function(e){e.merged||(r.isUndefined(e.barycenter)||r.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&function(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight);e.weight&&(n+=e.barycenter*e.weight,r+=e.weight);t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}(t,e)}}function o(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}for(;t.length;){var i=t.pop();e.push(i),r.forEach(i.in.reverse(),n(i)),r.forEach(i.out,o(i))}return r.map(r.filter(e,(function(t){return!t.merged})),(function(t){return r.pick(t,["vs","i","barycenter","weight"])}))}(r.filter(n,(function(t){return!t.indegree})))}},function(t,e,n){var r=n(11),o=n(18);function i(t,e,n){for(var o;e.length&&(o=r.last(e)).i<=n;)e.pop(),t.push(o.vs),n++;return n}t.exports=function(t,e){var n=o.partition(t,(function(t){return r.has(t,"barycenter")})),a=n.lhs,u=r.sortBy(n.rhs,(function(t){return-t.i})),s=[],c=0,f=0,l=0;a.sort((h=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:h?e.i-t.i:t.i-e.i})),l=i(s,u,l),r.forEach(a,(function(t){l+=t.vs.length,s.push(t.vs),c+=t.barycenter*t.weight,f+=t.weight,l=i(s,u,l)}));var h;var d={vs:r.flatten(s,!0)};f&&(d.barycenter=c/f,d.weight=f);return d}},function(t,e,n){var r=n(11),o=n(23).Graph;t.exports=function(t,e,n){var i=function(t){var e;for(;t.hasNode(e=r.uniqueId("_root")););return e}(t),a=new o({compound:!0}).setGraph({root:i}).setDefaultNodeLabel((function(e){return t.node(e)}));return r.forEach(t.nodes(),(function(o){var u=t.node(o),s=t.parent(o);(u.rank===e||u.minRank<=e&&e<=u.maxRank)&&(a.setNode(o),a.setParent(o,s||i),r.forEach(t[n](o),(function(e){var n=e.v===o?e.w:e.v,i=a.edge(n,o),u=r.isUndefined(i)?0:i.weight;a.setEdge(n,o,{weight:t.edge(e).weight+u})})),r.has(u,"minRank")&&a.setNode(o,{borderLeft:u.borderLeft[e],borderRight:u.borderRight[e]}))})),a}},function(t,e,n){var r=n(11);t.exports=function(t,e,n){var o,i={};r.forEach(n,(function(n){for(var r,a,u=t.parent(n);u;){if((r=t.parent(u))?(a=i[r],i[r]=u):(a=o,o=u),a&&a!==u)return void e.setEdge(a,u);u=r}}))}},function(t,e,n){"use strict";var r=n(11),o=n(18),i=n(366).positionX;t.exports=function(t){(function(t){var e=o.buildLayerMatrix(t),n=t.graph().ranksep,i=0;r.forEach(e,(function(e){var o=r.max(r.map(e,(function(e){return t.node(e).height})));r.forEach(e,(function(e){t.node(e).y=i+o/2})),i+=o+n}))})(t=o.asNonCompoundGraph(t)),r.forEach(i(t),(function(e,n){t.node(n).x=e}))}},function(t,e,n){"use strict";var r=n(11),o=n(23).Graph,i=n(18);function a(t,e){var n={};return r.reduce(e,(function(e,o){var i=0,a=0,u=e.length,c=r.last(o);return r.forEach(o,(function(e,f){var l=function(t,e){if(t.node(e).dummy)return r.find(t.predecessors(e),(function(e){return t.node(e).dummy}))}(t,e),h=l?t.node(l).order:u;(l||e===c)&&(r.forEach(o.slice(a,f+1),(function(e){r.forEach(t.predecessors(e),(function(r){var o=t.node(r),a=o.order;!(a<i||h<a)||o.dummy&&t.node(e).dummy||s(n,r,e)}))})),a=f+1,i=h)})),o})),n}function u(t,e){var n={};function o(e,o,i,a,u){var c;r.forEach(r.range(o,i),(function(o){c=e[o],t.node(c).dummy&&r.forEach(t.predecessors(c),(function(e){var r=t.node(e);r.dummy&&(r.order<a||r.order>u)&&s(n,e,c)}))}))}return r.reduce(e,(function(e,n){var i,a=-1,u=0;return r.forEach(n,(function(r,s){if("border"===t.node(r).dummy){var c=t.predecessors(r);c.length&&(i=t.node(c[0]).order,o(n,u,s,a,i),u=s,a=i)}o(n,u,n.length,i,e.length)})),n})),n}function s(t,e,n){if(e>n){var r=e;e=n,n=r}var o=t[e];o||(t[e]=o={}),o[n]=!0}function c(t,e,n){if(e>n){var o=e;e=n,n=o}return r.has(t[e],n)}function f(t,e,n,o){var i={},a={},u={};return r.forEach(e,(function(t){r.forEach(t,(function(t,e){i[t]=t,a[t]=t,u[t]=e}))})),r.forEach(e,(function(t){var e=-1;r.forEach(t,(function(t){var s=o(t);if(s.length)for(var f=((s=r.sortBy(s,(function(t){return u[t]}))).length-1)/2,l=Math.floor(f),h=Math.ceil(f);l<=h;++l){var d=s[l];a[t]===t&&e<u[d]&&!c(n,t,d)&&(a[d]=t,a[t]=i[t]=i[d],e=u[d])}}))})),{root:i,align:a}}function l(t,e,n,i,a){var u={},s=function(t,e,n,i){var a=new o,u=t.graph(),s=function(t,e,n){return function(o,i,a){var u,s=o.node(i),c=o.node(a),f=0;if(f+=s.width/2,r.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=-s.width/2;break;case"r":u=s.width/2}if(u&&(f+=n?u:-u),u=0,f+=(s.dummy?e:t)/2,f+=(c.dummy?e:t)/2,f+=c.width/2,r.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":u=c.width/2;break;case"r":u=-c.width/2}return u&&(f+=n?u:-u),u=0,f}}(u.nodesep,u.edgesep,i);return r.forEach(e,(function(e){var o;r.forEach(e,(function(e){var r=n[e];if(a.setNode(r),o){var i=n[o],u=a.edge(i,r);a.setEdge(i,r,Math.max(s(t,e,o),u||0))}o=e}))})),a}(t,e,n,a),c=a?"borderLeft":"borderRight";function f(t,e){for(var n=s.nodes(),r=n.pop(),o={};r;)o[r]?t(r):(o[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return f((function(t){u[t]=s.inEdges(t).reduce((function(t,e){return Math.max(t,u[e.v]+s.edge(e))}),0)}),s.predecessors.bind(s)),f((function(e){var n=s.outEdges(e).reduce((function(t,e){return Math.min(t,u[e.w]-s.edge(e))}),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==c&&(u[e]=Math.max(u[e],n))}),s.successors.bind(s)),r.forEach(i,(function(t){u[t]=u[n[t]]})),u}function h(t,e){return r.minBy(r.values(e),(function(e){var n=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return r.forIn(e,(function(e,r){var i=function(t,e){return t.node(e).width}(t,r)/2;n=Math.max(e+i,n),o=Math.min(e-i,o)})),n-o}))}function d(t,e){var n=r.values(e),o=r.min(n),i=r.max(n);r.forEach(["u","d"],(function(n){r.forEach(["l","r"],(function(a){var u,s=n+a,c=t[s];if(c!==e){var f=r.values(c);(u="l"===a?o-r.min(f):i-r.max(f))&&(t[s]=r.mapValues(c,(function(t){return t+u})))}}))}))}function p(t,e){return r.mapValues(t.ul,(function(n,o){if(e)return t[e.toLowerCase()][o];var i=r.sortBy(r.map(t,o));return(i[1]+i[2])/2}))}t.exports={positionX:function(t){var e,n=i.buildLayerMatrix(t),o=r.merge(a(t,n),u(t,n)),s={};r.forEach(["u","d"],(function(i){e="u"===i?n:r.values(n).reverse(),r.forEach(["l","r"],(function(n){"r"===n&&(e=r.map(e,(function(t){return r.values(t).reverse()})));var a=("u"===i?t.predecessors:t.successors).bind(t),u=f(t,e,o,a),c=l(t,e,u.root,u.align,"r"===n);"r"===n&&(c=r.mapValues(c,(function(t){return-t}))),s[i+n]=c}))}));var c=h(t,s);return d(s,c),p(s,t.graph().align)},findType1Conflicts:a,findType2Conflicts:u,addConflict:s,hasConflict:c,verticalAlignment:f,horizontalCompaction:l,alignCoordinates:d,findSmallestWidthAlignment:h,balance:p}},function(t,e,n){var r=n(11),o=n(18),i=n(23).Graph;t.exports={debugOrdering:function(t){var e=o.buildLayerMatrix(t),n=new i({compound:!0,multigraph:!0}).setGraph({});return r.forEach(t.nodes(),(function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)})),r.forEach(t.edges(),(function(t){n.setEdge(t.v,t.w,{},t.name)})),r.forEach(e,(function(t,e){var o="layer"+e;n.setNode(o,{rank:"same"}),r.reduce(t,(function(t,e){return n.setEdge(t,e,{style:"invis"}),e}))})),n}}},function(t,e){t.exports="0.8.5"},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var s,c=[],f=!1,l=-1;function h(){f&&s&&(f=!1,s.length?c=s.concat(c):l=-1,c.length&&d())}function d(){if(!f){var t=u(h);f=!0;for(var e=c.length;e;){for(s=c,c=[];++l<e;)s&&s[l].run();l=-1,e=c.length}s=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||f||u(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=function(t){"use strict";var n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=x(a,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=f(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l={};function h(){}function d(){}function p(){}var v={};v[i]=function(){return this};var m=Object.getPrototypeOf,y=m&&m(m(T([])));y&&y!==n&&r.call(y,i)&&(v=y);var g=p.prototype=h.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,n){var o;this._invoke=function(i,a){function u(){return new n((function(o,u){!function o(i,a,u,s){var c=f(t[i],t,a);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"===e(h)&&r.call(h,"__await")?n.resolve(h.__await).then((function(t){o("next",t,u,s)}),(function(t){o("throw",t,u,s)})):n.resolve(h).then((function(t){l.value=t,u(l)}),(function(t){return o("throw",t,u,s)}))}s(c.arg)}(i,a,o,u)}))}return o=o?o.then(u,u):u()}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=f(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return d.prototype=g.constructor=p,p.constructor=d,d.displayName=s(p,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(_.prototype),_.prototype[a]=function(){return this},t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),s(g,u,"Generator"),g[i]=function(){return this},g.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}("object"===e(t)?t.exports:{});try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}}).call(this,n(61)(t))},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var a=n(375),u=n(19),s=n(30),c=n(17),f=n(162),l=n(376),h=n(383),d=n(385),p=n(40),v=n(50),m=n(388),y=n(389),g=function(){function t(t){var e=t||{};if("object"!==r(e))throw new Error(""+u.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===e.defaultScope)e.defaultScope=s.BindingScopeEnum.Transient;else if(e.defaultScope!==s.BindingScopeEnum.Singleton&&e.defaultScope!==s.BindingScopeEnum.Transient&&e.defaultScope!==s.BindingScopeEnum.Request)throw new Error(""+u.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!=typeof e.autoBindInjectable)throw new Error(""+u.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!=typeof e.skipBaseClassChecks)throw new Error(""+u.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=p.id(),this._bindingDictionary=new y.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new f.MetadataReader}return t.merge=function(e,n){var r=new t,o=l.getBindingDictionary(r),i=l.getBindingDictionary(e),a=l.getBindingDictionary(n);function u(t,e){t.traverse((function(t,n){n.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))}return u(i,o),u(a,o),r},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),r=0,o=t;r<o.length;r++){var i=o[r],a=n(i.id);i.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(this,void 0,void 0,(function(){var e,n,r,o,a;return i(this,(function(i){switch(i.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,r=t,i.label=1;case 1:return n<r.length?(o=r[n],a=e(o.id),[4,o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(t){return function(e){return e.moduleId===t}};e.forEach((function(e){var n=r(e.id);t._bindingDictionary.removeByCondition(n)}))},t.prototype.bind=function(t){var e=this.options.defaultScope||s.BindingScopeEnum.Transient,n=new a.Binding(t,e);return this._bindingDictionary.add(t,n),new d.BindingToSyntax(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error(u.CANNOT_UNBIND+" "+v.getServiceIdentifierAsString(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new y.Lookup},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,c.NAMED_TAG,e)},t.prototype.isBoundTagged=function(t,e,n){var r=!1;if(this._bindingDictionary.hasKey(t)){var o=this._bindingDictionary.get(t),i=l.createMockRequest(this,t,e,n);r=o.some((function(t){return t.constraint(i)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(t,e,n)),r},t.prototype.snapshot=function(){this._snapshots.push(m.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(u.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,s.TargetTypeEnum.Variable,t)},t.prototype.getTagged=function(t,e,n){return this._get(!1,!1,s.TargetTypeEnum.Variable,t,e,n)},t.prototype.getNamed=function(t,e){return this.getTagged(t,c.NAMED_TAG,e)},t.prototype.getAll=function(t){return this._get(!0,!0,s.TargetTypeEnum.Variable,t)},t.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,s.TargetTypeEnum.Variable,t,e,n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,c.NAMED_TAG,e)},t.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),e.get(t)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(r){var o=t.rebind.bind(t)(r);return e(o,n),o}};return function(r){return{bindFunction:(o=r,function(n){var r=t.bind.bind(t)(n);return e(r,o),r}),isboundFunction:function(e){return t.isBound.bind(t)(e)},rebindFunction:n(r),unbindFunction:function(e){t.unbind.bind(t)(e)}};var o}},t.prototype._get=function(t,e,n,r,o,i){var a=null,s={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:o,serviceIdentifier:r,targetType:n,value:i};if(this._middleware){if(null==(a=this._middleware(s)))throw new Error(u.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(s);return a},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=l.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return n=e.contextInterceptor(n),h.resolve(n)}},t}();e.Container=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Binding=void 0;var r=n(30),o=n(40),i=function(){function t(t,e){this.id=o.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=r.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=!1,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();e.Binding=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBindingDictionary=e.createMockRequest=e.plan=void 0;var r=n(377),o=n(19),i=n(30),a=n(17),u=n(163),s=n(50),c=n(378),f=n(26),l=n(379),h=n(380),d=n(382),p=n(165);function v(t){return t._bindingDictionary}function m(t,e,n,i,a){var u=y(n.container,a.serviceIdentifier),c=[];return u.length===r.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof a.serviceIdentifier&&t.getConstructorMetadata(a.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(a.serviceIdentifier).toSelf(),u=y(n.container,a.serviceIdentifier)),c=e?u:u.filter((function(t){var e=new d.Request(t.serviceIdentifier,n,i,t,a);return t.constraint(e)})),function(t,e,n,i){switch(e.length){case r.BindingCount.NoBindingsAvailable:if(n.isOptional())return e;var a=s.getServiceIdentifierAsString(t),u=o.NOT_REGISTERED;throw u+=s.listMetadataForTarget(a,n),u+=s.listRegisteredBindingsForServiceIdentifier(i,a,y),new Error(u);case r.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return e;case r.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return e;a=s.getServiceIdentifierAsString(t),u=o.AMBIGUOUS_MATCH+" "+a;throw u+=s.listRegisteredBindingsForServiceIdentifier(i,a,y),new Error(u)}}(a.serviceIdentifier,c,a,n.container),c}function y(t,e){var n=[],r=v(t);return r.hasKey(e)?n=r.get(e):null!==t.parent&&(n=y(t.parent,e)),n}e.getBindingDictionary=v,e.plan=function(t,e,n,r,v,y,g,b){void 0===b&&(b=!1);var _=new c.Context(e),x=function(t,e,n,r,o,i){var u=t?a.MULTI_INJECT_TAG:a.INJECT_TAG,s=new f.Metadata(u,n),c=new p.Target(e,r,n,s);if(void 0!==o){var l=new f.Metadata(o,i);c.metadata.push(l)}return c}(n,r,v,"",y,g);try{return function t(e,n,r,a,u,s){var c,f;if(null===u){c=m(e,n,a,null,s),f=new d.Request(r,a,null,c,s);var p=new l.Plan(a,f);a.addPlan(p)}else c=m(e,n,a,u,s),f=u.addChildRequest(s.serviceIdentifier,c,s);c.forEach((function(n){var r=null;if(s.isArray())r=f.addChildRequest(n.serviceIdentifier,n,s);else{if(n.cache)return;r=f}if(n.type===i.BindingTypeEnum.Instance&&null!==n.implementationType){var u=h.getDependencies(e,n.implementationType);if(!a.container.options.skipBaseClassChecks){var c=h.getBaseClassDependencyCount(e,n.implementationType);if(u.length<c){var l=o.ARGUMENTS_LENGTH_MISMATCH(h.getFunctionName(n.implementationType));throw new Error(l)}}u.forEach((function(n){t(e,!1,n.serviceIdentifier,a,r,n)}))}}))}(t,b,v,_,null,x),_}catch(t){throw u.isStackOverflowExeption(t)&&_.plan&&s.circularDependencyToException(_.plan.rootRequest),t}},e.createMockRequest=function(t,e,n,r){var o=new p.Target(i.TargetTypeEnum.Variable,"",e,new f.Metadata(n,r)),a=new c.Context(t);return new d.Request(e,a,null,[],o)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingCount=void 0;e.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Context=void 0;var r=n(40),o=function(){function t(t){this.id=r.id(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}();e.Context=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Plan=void 0;var r=function(t,e){this.parentContext=t,this.rootRequest=e};e.Plan=r},function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.getFunctionName=e.getBaseClassDependencyCount=e.getDependencies=void 0;var o=n(164),i=n(19),a=n(30),u=n(17),s=n(50);Object.defineProperty(e,"getFunctionName",{enumerable:!0,get:function(){return s.getFunctionName}});var c=n(165);function f(t,e,n,o){var u=t.getConstructorMetadata(n),s=u.compilerGeneratedMetadata;if(void 0===s){var f=i.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(f)}var d=u.userGeneratedMetadata,p=Object.keys(d),v=function(t,e,n,r,o){for(var i=[],a=0;a<o;a++){var u=l(a,t,e,n,r);null!==u&&i.push(u)}return i}(o,e,s,d,0===n.length&&p.length>0?p.length:n.length),m=function t(e,n){for(var o=e.getPropertiesMetadata(n),i=[],u=Object.keys(o),s=0,f=u;s<f.length;s++){var l=f[s],d=o[l],p=h(o[l]),v=p.targetName||l,m=p.inject||p.multiInject,y=new c.Target(a.TargetTypeEnum.ClassProperty,v,m);y.metadata=d,i.push(y)}var g=Object.getPrototypeOf(n.prototype).constructor;if(g!==Object){var b=t(e,g);i=r(i,b)}return i}(t,n);return r(v,m)}function l(t,e,n,r,u){var s=u[t.toString()]||[],f=h(s),l=!0!==f.unmanaged,d=r[t],p=f.inject||f.multiInject;if((d=p||d)instanceof o.LazyServiceIdentifer&&(d=d.unwrap()),l){if(!e&&(d===Object||d===Function||void 0===d)){var v=i.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".";throw new Error(v)}var m=new c.Target(a.TargetTypeEnum.ConstructorArgument,f.targetName,d);return m.metadata=s,m}return null}function h(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e[u.INJECT_TAG],multiInject:e[u.MULTI_INJECT_TAG],targetName:e[u.NAME_TAG],unmanaged:e[u.UNMANAGED_TAG]}}e.getDependencies=function(t,e){return f(t,s.getFunctionName(e),e,!1)},e.getBaseClassDependencyCount=function t(e,n){var r=Object.getPrototypeOf(n.prototype).constructor;if(r!==Object){var o=f(e,s.getFunctionName(r),r,!0),i=o.map((function(t){return t.metadata.filter((function(t){return t.key===u.UNMANAGED_TAG}))})),a=[].concat.apply([],i).length,c=o.length-a;return c>0?c:t(e,r)}return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryableString=void 0;var r=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e,n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();e.QueryableString=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Request=void 0;var r=n(40),o=function(){function t(t,e,n,o,i){this.id=r.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=i,this.childRequests=[],this.bindings=Array.isArray(o)?o:[o],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,r){var o=new t(e,this.parentContext,this,n,r);return this.childRequests.push(o),o},t}();e.Request=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolve=void 0;var r=n(19),o=n(30),i=n(163),a=n(50),u=n(384),s=function(t,e,n){try{return n()}catch(n){throw i.isStackOverflowExeption(n)?new Error(r.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):n}};e.resolve=function(t){return function t(e){return function(n){n.parentContext.setCurrentRequest(n);var i=n.bindings,c=n.childRequests,f=n.target&&n.target.isArray(),l=!(n.parentRequest&&n.parentRequest.target&&n.target&&n.parentRequest.target.matchesArray(n.target.serviceIdentifier));if(f&&l)return c.map((function(n){return t(e)(n)}));var h=null;if(!n.target.isOptional()||0!==i.length){var d=i[0],p=d.scope===o.BindingScopeEnum.Singleton,v=d.scope===o.BindingScopeEnum.Request;if(p&&d.activated)return d.cache;if(v&&null!==e&&e.has(d.id))return e.get(d.id);if(d.type===o.BindingTypeEnum.ConstantValue)h=d.cache;else if(d.type===o.BindingTypeEnum.Function)h=d.cache;else if(d.type===o.BindingTypeEnum.Constructor)h=d.implementationType;else if(d.type===o.BindingTypeEnum.DynamicValue&&null!==d.dynamicValue)h=s("toDynamicValue",d.serviceIdentifier,(function(){return d.dynamicValue(n.parentContext)}));else if(d.type===o.BindingTypeEnum.Factory&&null!==d.factory)h=s("toFactory",d.serviceIdentifier,(function(){return d.factory(n.parentContext)}));else if(d.type===o.BindingTypeEnum.Provider&&null!==d.provider)h=s("toProvider",d.serviceIdentifier,(function(){return d.provider(n.parentContext)}));else{if(d.type!==o.BindingTypeEnum.Instance||null===d.implementationType){var m=a.getServiceIdentifierAsString(n.serviceIdentifier);throw new Error(r.INVALID_BINDING_TYPE+" "+m)}h=u.resolveInstance(d.implementationType,c,t(e))}return"function"==typeof d.onActivation&&(h=d.onActivation(n.parentContext,h)),p&&(d.cache=h,d.activated=!0),v&&null!==e&&!e.has(d.id)&&e.set(d.id,h),h}}}(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}},function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveInstance=void 0;var o=n(19),i=n(30),a=n(17);e.resolveInstance=function(t,e,n){var u,s,c=null;if(e.length>0){var f=e.filter((function(t){return null!==t.target&&t.target.type===i.TargetTypeEnum.ConstructorArgument})).map(n);s=f,c=function(t,e,n){var r=e.filter((function(t){return null!==t.target&&t.target.type===i.TargetTypeEnum.ClassProperty})),o=r.map(n);return r.forEach((function(e,n){var r;r=e.target.name.value();var i=o[n];t[r]=i})),t}(c=new((u=t).bind.apply(u,r([void 0],s))),e,n)}else c=new t;return function(t,e){if(Reflect.hasMetadata(a.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(a.POST_CONSTRUCT,t);try{e[n.value]()}catch(e){throw new Error(o.POST_CONSTRUCT_ERROR(t.name,e.message))}}}(t,c),c}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingToSyntax=void 0;var r=n(19),o=n(30),i=n(386),a=n(166),u=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=o.BindingTypeEnum.Instance,this._binding.implementationType=t,new i.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+r.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=o.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=o.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new i.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=o.BindingTypeEnum.Constructor,this._binding.implementationType=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=o.BindingTypeEnum.Factory,this._binding.factory=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error(r.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=o.BindingTypeEnum.Function,e},t.prototype.toAutoFactory=function(t){return this._binding.type=o.BindingTypeEnum.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},new a.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=o.BindingTypeEnum.Provider,this._binding.provider=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},t}();e.BindingToSyntax=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInWhenOnSyntax=void 0;var r=n(387),o=n(91),i=n(92),a=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new o.BindingOnSyntax(this._binding),this._bindingInSyntax=new r.BindingInSyntax(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingInWhenOnSyntax=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInSyntax=void 0;var r=n(30),o=n(166),i=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=r.BindingScopeEnum.Request,new o.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=r.BindingScopeEnum.Singleton,new o.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=r.BindingScopeEnum.Transient,new o.BindingWhenOnSyntax(this._binding)},t}();e.BindingInSyntax=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContainerSnapshot=void 0;var r=function(){function t(){}return t.of=function(e,n){var r=new t;return r.bindings=e,r.middleware=n,r},t}();e.ContainerSnapshot=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Lookup=void 0;var r=n(19),o=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null==t)throw new Error(r.NULL_ARGUMENT);if(null==e)throw new Error(r.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},t.prototype.get=function(t){if(null==t)throw new Error(r.NULL_ARGUMENT);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(r.KEY_NOT_FOUND)},t.prototype.remove=function(t){if(null==t)throw new Error(r.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(r.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach((function(n,r){var o=n.filter((function(e){return!t(e)}));o.length>0?e._map.set(r,o):e._map.delete(r)}))},t.prototype.hasKey=function(t){if(null==t)throw new Error(r.NULL_ARGUMENT);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){t.forEach((function(t){return e.add(n,t.clone())}))})),e},t.prototype.traverse=function(t){this._map.forEach((function(e,n){t(n,e)}))},t}();e.Lookup=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncContainerModule=e.ContainerModule=void 0;var r=n(40),o=function(t){this.id=r.id(),this.registry=t};e.ContainerModule=o;var i=function(t){this.id=r.id(),this.registry=t};e.AsyncContainerModule=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.injectable=void 0;var r=n(19),o=n(17);e.injectable=function(){return function(t){if(Reflect.hasOwnMetadata(o.PARAM_TYPES,t))throw new Error(r.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(o.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(o.PARAM_TYPES,e,t),t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagged=void 0;var r=n(26),o=n(33);e.tagged=function(t,e){return function(n,i,a){var u=new r.Metadata(t,e);"number"==typeof a?o.tagParameter(n,i,a,u):o.tagProperty(n,i,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.named=void 0;var r=n(17),o=n(26),i=n(33);e.named=function(t){return function(e,n,a){var u=new o.Metadata(r.NAMED_TAG,t);"number"==typeof a?i.tagParameter(e,n,a,u):i.tagProperty(e,n,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.optional=void 0;var r=n(17),o=n(26),i=n(33);e.optional=function(){return function(t,e,n){var a=new o.Metadata(r.OPTIONAL_TAG,!0);"number"==typeof n?i.tagParameter(t,e,n,a):i.tagProperty(t,e,a)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unmanaged=void 0;var r=n(17),o=n(26),i=n(33);e.unmanaged=function(){return function(t,e,n){var a=new o.Metadata(r.UNMANAGED_TAG,!0);i.tagParameter(t,e,n,a)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiInject=void 0;var r=n(17),o=n(26),i=n(33);e.multiInject=function(t){return function(e,n,a){var u=new o.Metadata(r.MULTI_INJECT_TAG,t);"number"==typeof a?i.tagParameter(e,n,a,u):i.tagProperty(e,n,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.targetName=void 0;var r=n(17),o=n(26),i=n(33);e.targetName=function(t){return function(e,n,a){var u=new o.Metadata(r.NAME_TAG,t);i.tagParameter(e,n,a,u)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.postConstruct=void 0;var r=n(19),o=n(17),i=n(26);e.postConstruct=function(){return function(t,e,n){var a=new i.Metadata(o.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(o.POST_CONSTRUCT,t.constructor))throw new Error(r.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(o.POST_CONSTRUCT,a,t.constructor)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=void 0,e.multiBindToService=function(t){return function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach((function(n){return t.bind(n).toService(e)}))}}}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Symbol.for("INJECTION");function o(t,e,n,o){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return o&&!Reflect.hasMetadata(r,this,e)&&Reflect.defineMetadata(r,n(),this,e),Reflect.hasMetadata(r,this,e)?Reflect.getMetadata(r,this,e):n()},set:function(t){Reflect.defineMetadata(r,t,this,e)}})}e.makePropertyInjectDecorator=function(t,e){return function(n){return function(r,i){o(r,i,(function(){return t.get(n)}),e)}}},e.makePropertyInjectNamedDecorator=function(t,e){return function(n,r){return function(i,a){o(i,a,(function(){return t.getNamed(n,r)}),e)}}},e.makePropertyInjectTaggedDecorator=function(t,e){return function(n,r,i){return function(a,u){o(a,u,(function(){return t.getTagged(n,r,i)}),e)}}},e.makePropertyMultiInjectDecorator=function(t,e){return function(n){return function(r,i){o(r,i,(function(){return t.getAll(n)}),e)}}}},function(t,e,n){var r=n(161);t.exports=function(t){if(Array.isArray(t))return r(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e){t.exports=function(t){var e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}},function(t,e){t.exports=function(t,e){var n=new Float32Array(2);return n[0]=t,n[1]=e,n}},function(t,e){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t}},function(t,e,n){t.exports=function(t,e){var n=t[0],o=t[1],i=e[0],a=e[1];return Math.abs(n-i)<=r*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(o-a)<=r*Math.max(1,Math.abs(o),Math.abs(a))};var r=n(175)},function(t,e){t.exports=function(t,e){return t[0]===e[0]&&t[1]===e[1]}},function(t,e,n){t.exports=n(100)},function(t,e,n){t.exports=n(179)},function(t,e,n){t.exports=n(180)},function(t,e){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}},function(t,e){t.exports=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}},function(t,e){t.exports=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}},function(t,e){t.exports=function(t,e,n){var r=Math.cos(n),o=Math.sin(n),i=e[0],a=e[1];return t[0]=i*r-a*o,t[1]=i*o+a*r,t}},function(t,e){t.exports=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}},function(t,e){t.exports=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}},function(t,e){t.exports=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}},function(t,e){t.exports=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}},function(t,e){t.exports=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}},function(t,e,n){t.exports=n(181)},function(t,e,n){t.exports=n(182)},function(t,e,n){t.exports=n(183)},function(t,e,n){t.exports=n(184)},function(t,e){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t}},function(t,e){t.exports=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}},function(t,e){t.exports=function(t,e,n,r){var o=e[0],i=e[1];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t}},function(t,e){t.exports=function(t,e){e=e||1;var n=2*Math.random()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o,t[1]=n[1]*r+n[3]*o,t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o+n[4],t[1]=n[1]*r+n[3]*o+n[5],t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[3]*o+n[6],t[1]=n[1]*r+n[4]*o+n[7],t}},function(t,e){t.exports=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[4]*o+n[12],t[1]=n[1]*r+n[5]*o+n[13],t}},function(t,e,n){t.exports=function(t,e,n,o,i,a){var u,s;e||(e=2);n||(n=0);s=o?Math.min(o*e+n,t.length):t.length;for(u=n;u<s;u+=e)r[0]=t[u],r[1]=t[u+1],i(r,r,a),t[u]=r[0],t[u+1]=r[1];return t};var r=n(176)()},function(t,e){t.exports=function(t,e,n){var r=e[0]*e[0]+e[1]*e[1];if(r>n*n){var o=Math.sqrt(r);t[0]=e[0]/o*n,t[1]=e[1]/o*n}else t[0]=e[0],t[1]=e[1];return t}},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"create",(function(){return go})),n.d(r,"fromMat4",(function(){return bo})),n.d(r,"clone",(function(){return _o})),n.d(r,"copy",(function(){return xo})),n.d(r,"fromValues",(function(){return wo})),n.d(r,"set",(function(){return Eo})),n.d(r,"identity",(function(){return So})),n.d(r,"transpose",(function(){return To})),n.d(r,"invert",(function(){return Ao})),n.d(r,"adjoint",(function(){return Io})),n.d(r,"determinant",(function(){return ko})),n.d(r,"multiply",(function(){return Oo})),n.d(r,"translate",(function(){return Do})),n.d(r,"rotate",(function(){return Ro})),n.d(r,"scale",(function(){return Mo})),n.d(r,"fromTranslation",(function(){return Co})),n.d(r,"fromRotation",(function(){return No})),n.d(r,"fromScaling",(function(){return Po})),n.d(r,"fromMat2d",(function(){return Go})),n.d(r,"fromQuat",(function(){return jo})),n.d(r,"normalFromMat4",(function(){return Lo})),n.d(r,"projection",(function(){return Uo})),n.d(r,"str",(function(){return Bo})),n.d(r,"frob",(function(){return Fo})),n.d(r,"add",(function(){return zo})),n.d(r,"subtract",(function(){return Vo})),n.d(r,"multiplyScalar",(function(){return Wo})),n.d(r,"multiplyScalarAndAdd",(function(){return Xo})),n.d(r,"exactEquals",(function(){return Ho})),n.d(r,"equals",(function(){return qo})),n.d(r,"mul",(function(){return Yo})),n.d(r,"sub",(function(){return Ko}));var o={};n.r(o),n.d(o,"create",(function(){return Zo})),n.d(o,"clone",(function(){return Qo})),n.d(o,"copy",(function(){return Jo})),n.d(o,"fromValues",(function(){return $o})),n.d(o,"set",(function(){return ti})),n.d(o,"identity",(function(){return ei})),n.d(o,"transpose",(function(){return ni})),n.d(o,"invert",(function(){return ri})),n.d(o,"adjoint",(function(){return oi})),n.d(o,"determinant",(function(){return ii})),n.d(o,"multiply",(function(){return ai})),n.d(o,"translate",(function(){return ui})),n.d(o,"scale",(function(){return si})),n.d(o,"rotate",(function(){return ci})),n.d(o,"rotateX",(function(){return fi})),n.d(o,"rotateY",(function(){return li})),n.d(o,"rotateZ",(function(){return hi})),n.d(o,"fromTranslation",(function(){return di})),n.d(o,"fromScaling",(function(){return pi})),n.d(o,"fromRotation",(function(){return vi})),n.d(o,"fromXRotation",(function(){return mi})),n.d(o,"fromYRotation",(function(){return yi})),n.d(o,"fromZRotation",(function(){return gi})),n.d(o,"fromRotationTranslation",(function(){return bi})),n.d(o,"fromQuat2",(function(){return _i})),n.d(o,"getTranslation",(function(){return xi})),n.d(o,"getScaling",(function(){return wi})),n.d(o,"getRotation",(function(){return Ei})),n.d(o,"fromRotationTranslationScale",(function(){return Si})),n.d(o,"fromRotationTranslationScaleOrigin",(function(){return Ti})),n.d(o,"fromQuat",(function(){return Ai})),n.d(o,"frustum",(function(){return Ii})),n.d(o,"perspective",(function(){return ki})),n.d(o,"perspectiveFromFieldOfView",(function(){return Oi})),n.d(o,"ortho",(function(){return Di})),n.d(o,"lookAt",(function(){return Ri})),n.d(o,"targetTo",(function(){return Mi})),n.d(o,"str",(function(){return Ci})),n.d(o,"frob",(function(){return Ni})),n.d(o,"add",(function(){return Pi})),n.d(o,"subtract",(function(){return Gi})),n.d(o,"multiplyScalar",(function(){return ji})),n.d(o,"multiplyScalarAndAdd",(function(){return Li})),n.d(o,"exactEquals",(function(){return Ui})),n.d(o,"equals",(function(){return Bi})),n.d(o,"mul",(function(){return Fi})),n.d(o,"sub",(function(){return zi}));var i={};n.r(i),n.d(i,"create",(function(){return Vi})),n.d(i,"clone",(function(){return Wi})),n.d(i,"length",(function(){return Xi})),n.d(i,"fromValues",(function(){return Hi})),n.d(i,"copy",(function(){return qi})),n.d(i,"set",(function(){return Yi})),n.d(i,"add",(function(){return Ki})),n.d(i,"subtract",(function(){return Zi})),n.d(i,"multiply",(function(){return Qi})),n.d(i,"divide",(function(){return Ji})),n.d(i,"ceil",(function(){return $i})),n.d(i,"floor",(function(){return ta})),n.d(i,"min",(function(){return ea})),n.d(i,"max",(function(){return na})),n.d(i,"round",(function(){return ra})),n.d(i,"scale",(function(){return oa})),n.d(i,"scaleAndAdd",(function(){return ia})),n.d(i,"distance",(function(){return aa})),n.d(i,"squaredDistance",(function(){return ua})),n.d(i,"squaredLength",(function(){return sa})),n.d(i,"negate",(function(){return ca})),n.d(i,"inverse",(function(){return fa})),n.d(i,"normalize",(function(){return la})),n.d(i,"dot",(function(){return ha})),n.d(i,"cross",(function(){return da})),n.d(i,"lerp",(function(){return pa})),n.d(i,"hermite",(function(){return va})),n.d(i,"bezier",(function(){return ma})),n.d(i,"random",(function(){return ya})),n.d(i,"transformMat4",(function(){return ga})),n.d(i,"transformMat3",(function(){return ba})),n.d(i,"transformQuat",(function(){return _a})),n.d(i,"rotateX",(function(){return xa})),n.d(i,"rotateY",(function(){return wa})),n.d(i,"rotateZ",(function(){return Ea})),n.d(i,"angle",(function(){return Sa})),n.d(i,"zero",(function(){return Ta})),n.d(i,"str",(function(){return Aa})),n.d(i,"exactEquals",(function(){return Ia})),n.d(i,"equals",(function(){return ka})),n.d(i,"sub",(function(){return Da})),n.d(i,"mul",(function(){return Ra})),n.d(i,"div",(function(){return Ma})),n.d(i,"dist",(function(){return Ca})),n.d(i,"sqrDist",(function(){return Na})),n.d(i,"len",(function(){return Pa})),n.d(i,"sqrLen",(function(){return Ga})),n.d(i,"forEach",(function(){return ja}));var a={};n.r(a),n.d(a,"create",(function(){return La})),n.d(a,"clone",(function(){return Ua})),n.d(a,"fromValues",(function(){return Ba})),n.d(a,"copy",(function(){return Fa})),n.d(a,"set",(function(){return za})),n.d(a,"add",(function(){return Va})),n.d(a,"subtract",(function(){return Wa})),n.d(a,"multiply",(function(){return Xa})),n.d(a,"divide",(function(){return Ha})),n.d(a,"ceil",(function(){return qa})),n.d(a,"floor",(function(){return Ya})),n.d(a,"min",(function(){return Ka})),n.d(a,"max",(function(){return Za})),n.d(a,"round",(function(){return Qa})),n.d(a,"scale",(function(){return Ja})),n.d(a,"scaleAndAdd",(function(){return $a})),n.d(a,"distance",(function(){return tu})),n.d(a,"squaredDistance",(function(){return eu})),n.d(a,"length",(function(){return nu})),n.d(a,"squaredLength",(function(){return ru})),n.d(a,"negate",(function(){return ou})),n.d(a,"inverse",(function(){return iu})),n.d(a,"normalize",(function(){return au})),n.d(a,"dot",(function(){return uu})),n.d(a,"cross",(function(){return su})),n.d(a,"lerp",(function(){return cu})),n.d(a,"random",(function(){return fu})),n.d(a,"transformMat4",(function(){return lu})),n.d(a,"transformQuat",(function(){return hu})),n.d(a,"zero",(function(){return du})),n.d(a,"str",(function(){return pu})),n.d(a,"exactEquals",(function(){return vu})),n.d(a,"equals",(function(){return mu})),n.d(a,"sub",(function(){return yu})),n.d(a,"mul",(function(){return gu})),n.d(a,"div",(function(){return bu})),n.d(a,"dist",(function(){return _u})),n.d(a,"sqrDist",(function(){return xu})),n.d(a,"len",(function(){return wu})),n.d(a,"sqrLen",(function(){return Eu})),n.d(a,"forEach",(function(){return Su}));var u={};n.r(u),n.d(u,"create",(function(){return Tu})),n.d(u,"identity",(function(){return Au})),n.d(u,"setAxisAngle",(function(){return Iu})),n.d(u,"getAxisAngle",(function(){return ku})),n.d(u,"getAngle",(function(){return Ou})),n.d(u,"multiply",(function(){return Du})),n.d(u,"rotateX",(function(){return Ru})),n.d(u,"rotateY",(function(){return Mu})),n.d(u,"rotateZ",(function(){return Cu})),n.d(u,"calculateW",(function(){return Nu})),n.d(u,"exp",(function(){return Pu})),n.d(u,"ln",(function(){return Gu})),n.d(u,"pow",(function(){return ju})),n.d(u,"slerp",(function(){return Lu})),n.d(u,"random",(function(){return Uu})),n.d(u,"invert",(function(){return Bu})),n.d(u,"conjugate",(function(){return Fu})),n.d(u,"fromMat3",(function(){return zu})),n.d(u,"fromEuler",(function(){return Vu})),n.d(u,"str",(function(){return Wu})),n.d(u,"clone",(function(){return as})),n.d(u,"fromValues",(function(){return us})),n.d(u,"copy",(function(){return ss})),n.d(u,"set",(function(){return cs})),n.d(u,"add",(function(){return fs})),n.d(u,"mul",(function(){return ls})),n.d(u,"scale",(function(){return hs})),n.d(u,"dot",(function(){return ds})),n.d(u,"lerp",(function(){return ps})),n.d(u,"length",(function(){return vs})),n.d(u,"len",(function(){return ms})),n.d(u,"squaredLength",(function(){return ys})),n.d(u,"sqrLen",(function(){return gs})),n.d(u,"normalize",(function(){return bs})),n.d(u,"exactEquals",(function(){return _s})),n.d(u,"equals",(function(){return xs})),n.d(u,"rotationTo",(function(){return ws})),n.d(u,"sqlerp",(function(){return Es})),n.d(u,"setAxes",(function(){return Ss}));var s,c,f="LAYOUT_RUN",l="LAYOUT_END",h="LAYOUT_ERROR",d="GPU_LAYOUT_RUN",p=function(t){return"string"==typeof t},v=/-(\\w)/g,m=(s=function(t){return t.replace(v,(function(t,e){return e?e.toUpperCase():""}))},c=Object.create(null),Array.isArray),y=function(t){return"number"==typeof t},g=function(t){return Number.isNaN(Number(t))},b=function(t,e,n){for(var r=[],o=0;o<t;o++)r[o]=0;return n?(n.forEach((function(t){t.source&&(r[e[t.source]]+=1),t.target&&(r[e[t.target]]+=1)})),r):r},_=function(t){for(var e=[],n=t.length,r=0;r<n;r+=1){e[r]=[];for(var o=0;o<n;o+=1)r===o?e[r][o]=0:0!==t[r][o]&&t[r][o]?e[r][o]=t[r][o]:e[r][o]=1/0}for(var i=0;i<n;i+=1)for(var a=0;a<n;a+=1)for(var u=0;u<n;u+=1)e[a][u]>e[a][i]+e[i][u]&&(e[a][u]=e[a][i]+e[i][u]);return e},x=function(t,e){var n=t.nodes,r=t.edges,o=[],i={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(t,e){i[t.id]=e;o.push([])})),r&&r.forEach((function(t){var n=t.source,r=t.target,a=i[n],u=i[r];o[a][u]=1,e||(o[u][a]=1)})),o},w=function(t,e){"function"==typeof e&&function t(e,n){if(e&&e.children)for(var r=e.children.length-1;r>=0;r--)if(!t(e.children[r],n))return;return!!n(e)}(t,e)};function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var S=function t(e){if(null===e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){var n=[];return e.forEach((function(t){n.push(t)})),n.map((function(e){return t(e)}))}if("object"===E(e)&&e!=={}){var r=Object.assign({},e);return Object.keys(r).forEach((function(e){r[e]=t(r[e])})),r}return e},T=function(t){return"function"==typeof t};function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var I=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}var e,n,r;return e=t,(n=[{key:"layout",value:function(t){return this.init(t),this.execute(!0)}},{key:"init",value:function(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[]}},{key:"execute",value:function(t){}},{key:"executeWithWorker",value:function(){}},{key:"getDefaultCfg",value:function(){return{}}},{key:"updateCfg",value:function(t){t&&Object.assign(this,t)}},{key:"getType",value:function(){return"base"}},{key:"destroy",value:function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}])&&A(e.prototype,n),r&&A(e,r),t}();function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C(t);if(e){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return M(this,n)}}function M(t,e){return!e||"object"!==k(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(i,t);var e,n,r,o=R(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).begin=[0,0],e.preventOverlap=!0,e.preventOverlapPadding=10,e.condense=!1,e.sortBy="degree",e.nodeSize=30,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.row=0,e.col=0,e.cellWidth=0,e.cellHeight=0,e.cellUsed={},e.id2manPos={},e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=e.length,r=t.begin;if(0!==n){if(1===n)return e[0].x=r[0],e[0].y=r[1],void(t.onLayoutEnd&&t.onLayoutEnd());var o=t.edges,i=[];e.forEach((function(t){i.push(t)}));var a={};if(i.forEach((function(t,e){a[t.id]=e})),("degree"===t.sortBy||!p(t.sortBy)||void 0===i[0][t.sortBy])&&(t.sortBy="degree",g(e[0].degree))){var u=b(i.length,a,o);i.forEach((function(t,e){t.degree=u[e]}))}i.sort((function(e,n){return n[t.sortBy]-e[t.sortBy]})),t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);var s=t.rows,c=null!=t.cols?t.cols:t.columns;if(t.cells=n,null!=s&&null!=c?(t.rows=s,t.cols=c):null!=s&&null==c?(t.rows=s,t.cols=Math.ceil(t.cells/t.rows)):null==s&&null!=c?(t.cols=c,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.cols*t.rows>t.cells){var f=t.small(),l=t.large();(f-1)*l>=t.cells?t.small(f-1):(l-1)*f>=t.cells&&t.large(l-1)}else for(;t.cols*t.rows<t.cells;){var h=t.small(),d=t.large();(d+1)*h>=t.cells?t.large(d+1):t.small(h+1)}t.cellWidth=t.width/t.cols,t.cellHeight=t.height/t.rows,t.condense&&(t.cellWidth=0,t.cellHeight=0),t.preventOverlap&&i.forEach((function(e){var n,r;e.x&&e.y||(e.x=0,e.y=0),m(e.size)?(n=e.size[0],r=e.size[1]):y(e.size)&&(n=e.size,r=e.size),void 0!==n&&void 0!==r||(m(t.nodeSize)?(n=t.nodeSize[0],r=t.nodeSize[1]):y(t.nodeSize)?(n=t.nodeSize,r=t.nodeSize):(n=30,r=30));var o=t.preventOverlapPadding,i=n+o,a=r+o;t.cellWidth=Math.max(t.cellWidth,i),t.cellHeight=Math.max(t.cellHeight,a)})),t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(var v=0;v<i.length;v++){var _=i[v],x=void 0;if(t.position&&(x=t.position(_)),x&&(void 0!==x.row||void 0!==x.col)){var w={row:x.row,col:x.col};if(void 0===w.col)for(w.col=0;t.used(w.row,w.col);)w.col++;else if(void 0===w.row)for(w.row=0;t.used(w.row,w.col);)w.row++;t.id2manPos[_.id]=w,t.use(w.row,w.col)}t.getPos(_)}return t.onLayoutEnd&&t.onLayoutEnd(),{edges:o,nodes:i}}t.onLayoutEnd&&t.onLayoutEnd()}},{key:"small",value:function(t){var e,n=this.rows||5,r=this.cols||5;return null==t?e=Math.min(n,r):Math.min(n,r)===this.rows?this.rows=t:this.cols=t,e}},{key:"large",value:function(t){var e,n=this.rows||5,r=this.cols||5;return null==t?e=Math.max(n,r):Math.max(n,r)===this.rows?this.rows=t:this.cols=t,e}},{key:"used",value:function(t,e){return this.cellUsed["c-".concat(t,"-").concat(e)]||!1}},{key:"use",value:function(t,e){this.cellUsed["c-".concat(t,"-").concat(e)]=!0}},{key:"moveToNextCell",value:function(){var t=this.cols||5;this.col++,this.col>=t&&(this.col=0,this.row++)}},{key:"getPos",value:function(t){var e,n,r=this.begin,o=this.cellWidth,i=this.cellHeight,a=this.id2manPos[t.id];if(a)e=a.col*o+o/2+r[0],n=a.row*i+i/2+r[1];else{for(;this.used(this.row,this.col);)this.moveToNextCell();e=this.col*o+o/2+r[0],n=this.row*i+i/2+r[1],this.use(this.row,this.col),this.moveToNextCell()}t.x=e,t.y=n}},{key:"getType",value:function(){return"grid"}}])&&O(e.prototype,n),r&&O(e,r),i}(I);function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function L(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=B(t);if(e){var o=B(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return U(this,n)}}function U(t,e){return!e||"object"!==P(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}(i,t);var e,n,r,o=L(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).center=[0,0],e.width=300,e.height=300,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{center:[0,0],width:300,height:300}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=t.center;return t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),e&&e.forEach((function(e){e.x=.9*(Math.random()-.5)*t.width+n[0],e.y=.9*(Math.random()-.5)*t.height+n[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:this.edges}}},{key:"getType",value:function(){return"random"}}])&&G(e.prototype,n),r&&G(e,r),i}(I);function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function W(t,e){return(W=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function X(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=q(t);if(e){var o=q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return H(this,n)}}function H(t,e){return!e||"object"!==z(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Y=function(t,e){return t?y(t)?function(e){return t}:t:function(t){return e||1}},K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&W(t,e)}(i,t);var e,n,r,o=X(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.edgeStrength=200,e.nodeStrength=1e3,e.coulombDisScale=.005,e.damping=.9,e.maxSpeed=1e3,e.minMovement=.5,e.interval=.02,e.factor=1,e.linkDistance=1,e.gravity=10,e.preventOverlap=!0,e.tick=function(){},e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:500,gravity:10,enableTick:!0}}},{key:"execute",value:function(){var t=this,e=t.nodes;if(void 0!==t.timeInterval&&"undefined"!=typeof window&&window.clearInterval(t.timeInterval),e&&0!==e.length){t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var n=t.center;if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(t.onLayoutEnd&&t.onLayoutEnd());var r={},o={};e.forEach((function(e,n){y(e.x)||(e.x=Math.random()*t.width),y(e.y)||(e.y=Math.random()*t.height),r[e.id]=e,o[e.id]=n})),t.nodeMap=r,t.nodeIdxMap=o,t.linkDistance=Y(t.linkDistance,1),t.nodeStrength=Y(t.nodeStrength,1),t.edgeStrength=Y(t.edgeStrength,1);var i,a=t.nodeSize;if(t.preventOverlap){var u,s=t.nodeSpacing;u=y(s)?function(){return s}:T(s)?s:function(){return 0},i=a?m(a)?function(t){return(a[0]>a[1]?a[0]:a[1])+u(t)}:function(t){return a+u(t)}:function(t){return t.size?m(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])+u(t):t.size+u(t):10+u(t)}}t.nodeSize=i;var c=t.edges;t.degrees=b(e.length,t.nodeIdxMap,c),t.getMass||(t.getMass=function(e){return t.degrees[t.nodeIdxMap[e.id]]}),t.run()}else t.onLayoutEnd&&t.onLayoutEnd()}},{key:"run",value:function(){var t=this,e=t.nodes,n=t.edges,r=t.maxIteration;if("undefined"!=typeof window){var o=0;this.timeInterval=window.setInterval((function(){var i=[],a=[];if(e){e.forEach((function(t,e){i[2*e]=0,i[2*e+1]=0,a[2*e]=0,a[2*e+1]=0})),t.calRepulsive(i,e),n&&t.calAttractive(i,n),t.calGravity(i,e);var u=Math.max(.02,t.interval-.002*o);t.updateVelocity(i,a,u,e);var s=[];e.forEach((function(t){s.push({x:t.x,y:t.y})})),t.updatePosition(a,u,e),t.tick&&t.tick();var c=0;e.forEach((function(t,e){var n=t.x-s[e].x,r=t.y-s[e].y;c+=Math.sqrt(n*n+r*r)})),(c/=e.length)<t.minMovement&&(window.clearInterval(t.timeInterval),t.onLayoutEnd&&t.onLayoutEnd()),++o>r&&(window.clearInterval(t.timeInterval),t.onLayoutEnd&&t.onLayoutEnd())}}),0)}}},{key:"calRepulsive",value:function(t,e){var n=this.getMass,r=this.nodeStrength,o=this.factor,i=this.coulombDisScale,a=this.preventOverlap,u=this.nodeSize;e.forEach((function(s,c){var f=n?n(s):1;e.forEach((function(e,l){if(!(c>=l)){var h=s.x-e.x,d=s.y-e.y,p=Math.sqrt(h*h+d*d)+.01,v=(p+.1)*i,m=h/p,y=d/p,g=(r(s)+r(e))/2*o/(v*v),b=n?n(e):1;if(t[2*c]+=m*g/f,t[2*c+1]+=y*g/f,t[2*l]-=m*g/b,t[2*l+1]-=y*g/b,a&&p<(u(s)+u(e))/2){var _=(r(s)+r(e))/2/(p*p);t[2*c]+=m*_/f,t[2*c+1]+=y*_/f,t[2*l]-=m*_/b,t[2*l+1]-=y*_/b}}}))}))}},{key:"calAttractive",value:function(t,e){var n=this.nodeMap,r=this.nodeIdxMap,o=this.linkDistance,i=this.edgeStrength,a=this.getMass;e.forEach((function(e,u){var s=n[e.source],c=n[e.target],f=c.x-s.x,l=c.y-s.y,h=Math.sqrt(f*f+l*l)+.01,d=f/h,p=l/h,v=((o(e)||1)-h)*i(e),m=r[e.source],y=r[e.target],g=a?a(s):1,b=a?a(c):1;t[2*m]-=d*v/g,t[2*m+1]-=p*v/g,t[2*y]+=d*v/b,t[2*y+1]+=p*v/b}))}},{key:"calGravity",value:function(t,e){for(var n=this.center,r=this.gravity,o=this.degrees,i=e.length,a=0;a<i;a++){var u=e[a],s=u.x-n[0],c=u.y-n[1],f=r;if(this.getCenter){var l=this.getCenter(u,o[a]);l&&y(l[0])&&y(l[1])&&y(l[2])&&(s=u.x-l[0],c=u.y-l[1],f=l[2])}f&&(t[2*a]-=f*s,t[2*a+1]-=f*c)}}},{key:"updateVelocity",value:function(t,e,n,r){var o=this,i=n*o.damping;r.forEach((function(n,r){var a=t[2*r]*i||.01,u=t[2*r+1]*i||.01,s=Math.sqrt(a*a+u*u);if(s>o.maxSpeed){var c=o.maxSpeed/s;a*=c,u*=c}e[2*r]=a,e[2*r+1]=u}))}},{key:"updatePosition",value:function(t,e,n){n.forEach((function(n,r){var o=t[2*r]*e,i=t[2*r+1]*e;n.x+=o,n.y+=i}))}},{key:"stop",value:function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)}},{key:"destroy",value:function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0}},{key:"getType",value:function(){return"gForce"}}])&&V(e.prototype,n),r&&V(e,r),i}(I);function Z(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var o,i,a,u,s,c,f,l,h,d=t._root,p={data:r},v=t._x0,m=t._y0,y=t._x1,g=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=e>=(i=(v+y)/2))?v=i:y=i,(f=n>=(a=(m+g)/2))?m=a:g=a,o=d,!(d=d[l=f<<1|c]))return o[l]=p,t;if(u=+t._x.call(null,d.data),s=+t._y.call(null,d.data),e===u&&n===s)return p.next=d,o?o[l]=p:t._root=p,t;do{o=o?o[l]=new Array(4):t._root=new Array(4),(c=e>=(i=(v+y)/2))?v=i:y=i,(f=n>=(a=(m+g)/2))?m=a:g=a}while((l=f<<1|c)==(h=(s>=a)<<1|u>=i));return o[h]=d,o[l]=p,t}var Q=function(t,e,n,r,o){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=o};function J(t){return t[0]}function $(t){return t[1]}function tt(t,e,n){var r=new et(null==e?J:e,null==n?$:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function et(t,e,n,r,o,i){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=o,this._y1=i,this._root=void 0}function nt(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var rt=tt.prototype=et.prototype;rt.copy=function(){var t,e,n=new et(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=nt(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var o=0;o<4;++o)(e=r.source[o])&&(e.length?t.push({source:e,target:r.target[o]=new Array(4)}):r.target[o]=nt(e));return n},rt.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Z(this.cover(e,n),e,n,t)},rt.addAll=function(t){var e,n,r,o,i=t.length,a=new Array(i),u=new Array(i),s=1/0,c=1/0,f=-1/0,l=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(a[n]=r,u[n]=o,r<s&&(s=r),r>f&&(f=r),o<c&&(c=o),o>l&&(l=o));if(s>f||c>l)return this;for(this.cover(s,c).cover(f,l),n=0;n<i;++n)Z(this,a[n],u[n],t[n]);return this},rt.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,o=this._x1,i=this._y1;if(isNaN(n))o=(n=Math.floor(t))+1,i=(r=Math.floor(e))+1;else{for(var a,u,s=o-n||1,c=this._root;n>t||t>=o||r>e||e>=i;)switch(u=(e<r)<<1|t<n,(a=new Array(4))[u]=c,c=a,s*=2,u){case 0:o=n+s,i=r+s;break;case 1:n=o-s,i=r+s;break;case 2:o=n+s,r=i-s;break;case 3:n=o-s,r=i-s}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=o,this._y1=i,this},rt.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},rt.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},rt.find=function(t,e,n){var r,o,i,a,u,s,c,f=this._x0,l=this._y0,h=this._x1,d=this._y1,p=[],v=this._root;for(v&&p.push(new Q(v,f,l,h,d)),null==n?n=1/0:(f=t-n,l=e-n,h=t+n,d=e+n,n*=n);s=p.pop();)if(!(!(v=s.node)||(o=s.x0)>h||(i=s.y0)>d||(a=s.x1)<f||(u=s.y1)<l))if(v.length){var m=(o+a)/2,y=(i+u)/2;p.push(new Q(v[3],m,y,a,u),new Q(v[2],o,y,m,u),new Q(v[1],m,i,a,y),new Q(v[0],o,i,m,y)),(c=(e>=y)<<1|t>=m)&&(s=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=s)}else{var g=t-+this._x.call(null,v.data),b=e-+this._y.call(null,v.data),_=g*g+b*b;if(_<n){var x=Math.sqrt(n=_);f=t-x,l=e-x,h=t+x,d=e+x,r=v.data}}return r},rt.remove=function(t){if(isNaN(i=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,o,i,a,u,s,c,f,l,h,d=this._root,p=this._x0,v=this._y0,m=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((c=i>=(u=(p+m)/2))?p=u:m=u,(f=a>=(s=(v+y)/2))?v=s:y=s,e=d,!(d=d[l=f<<1|c]))return this;if(!d.length)break;(e[l+1&3]||e[l+2&3]||e[l+3&3])&&(n=e,h=l)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(o=d.next)&&delete d.next,r?(o?r.next=o:delete r.next,this):e?(o?e[l]=o:delete e[l],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=o,this)},rt.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},rt.root=function(){return this._root},rt.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},rt.visit=function(t){var e,n,r,o,i,a,u=[],s=this._root;for(s&&u.push(new Q(s,this._x0,this._y0,this._x1,this._y1));e=u.pop();)if(!t(s=e.node,r=e.x0,o=e.y0,i=e.x1,a=e.y1)&&s.length){var c=(r+i)/2,f=(o+a)/2;(n=s[3])&&u.push(new Q(n,c,f,i,a)),(n=s[2])&&u.push(new Q(n,r,f,c,a)),(n=s[1])&&u.push(new Q(n,c,o,i,f)),(n=s[0])&&u.push(new Q(n,r,o,c,f))}return this},rt.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Q(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var o=e.node;if(o.length){var i,a=e.x0,u=e.y0,s=e.x1,c=e.y1,f=(a+s)/2,l=(u+c)/2;(i=o[0])&&n.push(new Q(i,a,u,f,l)),(i=o[1])&&n.push(new Q(i,f,u,s,l)),(i=o[2])&&n.push(new Q(i,a,l,f,c)),(i=o[3])&&n.push(new Q(i,f,l,s,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},rt.x=function(t){return arguments.length?(this._x=t,this):this._x},rt.y=function(t){return arguments.length?(this._y=t,this):this._y};var ot=function(t){return function(){return t}},it=function(t){return 1e-6*(t()-.5)},at={value:function(){}};function ut(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new st(r)}function st(t){this._=t}function ct(t,e){return t.trim().split(/^|\\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function ft(t,e){for(var n,r=0,o=t.length;r<o;++r)if((n=t[r]).name===e)return n.value}function lt(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=at,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}st.prototype=ut.prototype={constructor:st,on:function(t,e){var n,r=this._,o=ct(t+"",r),i=-1,a=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++i<a;)if(n=(t=o[i]).type)r[n]=lt(r[n],t.name,e);else if(null==e)for(n in r)r[n]=lt(r[n],t.name,null);return this}for(;++i<a;)if((n=(t=o[i]).type)&&(n=ft(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new st(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,n=(r=this._[t]).length;i<n;++i)r[i].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(e,n)}};var ht=ut;function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var pt,vt,mt=0,yt=0,gt=0,bt=0,_t=0,xt=0,wt="object"===("undefined"==typeof performance?"undefined":dt(performance))&&performance.now?performance:Date,Et="object"===("undefined"==typeof window?"undefined":dt(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function St(){return _t||(Et(Tt),_t=wt.now()+xt)}function Tt(){_t=0}function At(){this._call=this._time=this._next=null}function It(t,e,n){var r=new At;return r.restart(t,e,n),r}function kt(){_t=(bt=wt.now())+xt,mt=yt=0;try{!function(){St(),++mt;for(var t,e=pt;e;)(t=_t-e._time)>=0&&e._call.call(null,t),e=e._next;--mt}()}finally{mt=0,function(){var t,e,n=pt,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:pt=e);vt=t,Dt(r)}(),_t=0}}function Ot(){var t=wt.now(),e=t-bt;e>1e3&&(xt-=e,bt=t)}function Dt(t){mt||(yt&&(yt=clearTimeout(yt)),t-_t>24?(t<1/0&&(yt=setTimeout(kt,t-wt.now()-xt)),gt&&(gt=clearInterval(gt))):(gt||(bt=wt.now(),gt=setInterval(Ot,1e3)),mt=1,Et(kt)))}At.prototype=It.prototype={constructor:At,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?St():+n)+(null==e?0:+e),this._next||vt===this||(vt?vt._next=this:pt=this,vt=this),this._call=t,this._time=n,Dt()},stop:function(){this._call&&(this._call=null,this._time=1/0,Dt())}};function Rt(t){return t.x}function Mt(t){return t.y}var Ct=Math.PI*(3-Math.sqrt(5)),Nt=function(t){var e,n,r=1,o=.001,i=1-Math.pow(o,1/300),a=0,u=.6,s=new Map,c=It(h),f=ht("tick","end"),l=(n=1,function(){return(n=(1664525*n+1013904223)%4294967296)/4294967296});function h(){d(),f.call("tick",e),r<o&&(c.stop(),f.call("end",e))}function d(n){var o,c,f=t.length;void 0===n&&(n=1);for(var l=0;l<n;++l)for(r+=(a-r)*i,s.forEach((function(t){t(r)})),o=0;o<f;++o)null==(c=t[o]).fx?c.x+=c.vx*=u:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=u:(c.y=c.fy,c.vy=0);return e}function p(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var o=10*Math.sqrt(.5+n),i=n*Ct;e.x=o*Math.cos(i),e.y=o*Math.sin(i)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function v(e){return e.initialize&&e.initialize(t,l),e}return null==t&&(t=[]),p(),e={tick:d,restart:function(){return c.restart(h),e},stop:function(){return c.stop(),e},nodes:function(n){return arguments.length?(t=n,p(),s.forEach(v),e):t},alpha:function(t){return arguments.length?(r=+t,e):r},alphaMin:function(t){return arguments.length?(o=+t,e):o},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(u=1-t,e):1-u},randomSource:function(t){return arguments.length?(l=t,s.forEach(v),e):l},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,v(n)),e):s.get(t)},find:function(e,n,r){var o,i,a,u,s,c=0,f=t.length;for(null==r?r=1/0:r*=r,c=0;c<f;++c)(a=(o=e-(u=t[c]).x)*o+(i=n-u.y)*i)<r&&(s=u,r=a);return s},on:function(t,n){return arguments.length>1?(f.on(t,n),e):f.on(t)}}},Pt=function(){var t,e,n,r,o,i=ot(-30),a=1,u=1/0,s=.81;function c(n){var o,i=t.length,a=tt(t,Rt,Mt).visitAfter(l);for(r=n,o=0;o<i;++o)e=t[o],a.visit(h)}function f(){if(t){var e,n,r=t.length;for(o=new Array(r),e=0;e<r;++e)n=t[e],o[n.index]=+i(n,e,t)}}function l(t){var e,n,r,i,a,u=0,s=0;if(t.length){for(r=i=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(u+=e.value,s+=n,r+=n*e.x,i+=n*e.y);t.x=r/s,t.y=i/s}else{(e=t).x=e.data.x,e.y=e.data.y;do{u+=o[e.data.index]}while(e=e.next)}t.value=u}function h(t,i,c,f){if(!t.value)return!0;var l=t.x-e.x,h=t.y-e.y,d=f-i,p=l*l+h*h;if(d*d/s<p)return p<u&&(0===l&&(p+=(l=it(n))*l),0===h&&(p+=(h=it(n))*h),p<a&&(p=Math.sqrt(a*p)),e.vx+=l*t.value*r/p,e.vy+=h*t.value*r/p),!0;if(!(t.length||p>=u)){(t.data!==e||t.next)&&(0===l&&(p+=(l=it(n))*l),0===h&&(p+=(h=it(n))*h),p<a&&(p=Math.sqrt(a*p)));do{t.data!==e&&(d=o[t.data.index]*r/p,e.vx+=l*d,e.vy+=h*d)}while(t=t.next)}}return c.initialize=function(e,r){t=e,n=r,f()},c.strength=function(t){return arguments.length?(i="function"==typeof t?t:ot(+t),f(),c):i},c.distanceMin=function(t){return arguments.length?(a=t*t,c):Math.sqrt(a)},c.distanceMax=function(t){return arguments.length?(u=t*t,c):Math.sqrt(u)},c.theta=function(t){return arguments.length?(s=t*t,c):Math.sqrt(s)},c};function Gt(t){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t){return t.index}function Lt(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}var Ut=function(t){var e,n,r,o,i,a,u=jt,s=function(t){return 1/Math.min(o[t.source.index],o[t.target.index])},c=ot(30),f=1;function l(r){for(var o=0,u=t.length;o<f;++o)for(var s,c,l,h,d,p,v,m=0;m<u;++m)c=(s=t[m]).source,h=(l=s.target).x+l.vx-c.x-c.vx||it(a),d=l.y+l.vy-c.y-c.vy||it(a),h*=p=((p=Math.sqrt(h*h+d*d))-n[m])/p*r*e[m],d*=p,l.vx-=h*(v=i[m]),l.vy-=d*v,c.vx+=h*(v=1-v),c.vy+=d*v}function h(){if(r){var a,s,c=r.length,f=t.length,l=new Map(r.map((function(t,e){return[u(t,e,r),t]})));for(a=0,o=new Array(c);a<f;++a)(s=t[a]).index=a,"object"!==Gt(s.source)&&(s.source=Lt(l,s.source)),"object"!==Gt(s.target)&&(s.target=Lt(l,s.target)),o[s.source.index]=(o[s.source.index]||0)+1,o[s.target.index]=(o[s.target.index]||0)+1;for(a=0,i=new Array(f);a<f;++a)s=t[a],i[a]=o[s.source.index]/(o[s.source.index]+o[s.target.index]);e=new Array(f),d(),n=new Array(f),p()}}function d(){if(r)for(var n=0,o=t.length;n<o;++n)e[n]=+s(t[n],n,t)}function p(){if(r)for(var e=0,o=t.length;e<o;++e)n[e]=+c(t[e],e,t)}return null==t&&(t=[]),l.initialize=function(t,e){r=t,a=e,h()},l.links=function(e){return arguments.length?(t=e,h(),l):t},l.id=function(t){return arguments.length?(u=t,l):u},l.iterations=function(t){return arguments.length?(f=+t,l):f},l.strength=function(t){return arguments.length?(s="function"==typeof t?t:ot(+t),d(),l):s},l.distance=function(t){return arguments.length?(c="function"==typeof t?t:ot(+t),p(),l):c},l};function Bt(t){return t.x+t.vx}function Ft(t){return t.y+t.vy}var zt=function(t){var e,n,r,o=1,i=1;function a(){for(var t,a,s,c,f,l,h,d=e.length,p=0;p<i;++p)for(a=tt(e,Bt,Ft).visitAfter(u),t=0;t<d;++t)s=e[t],l=n[s.index],h=l*l,c=s.x+s.vx,f=s.y+s.vy,a.visit(v);function v(t,e,n,i,a){var u=t.data,d=t.r,p=l+d;if(!u)return e>c+p||i<c-p||n>f+p||a<f-p;if(u.index>s.index){var v=c-u.x-u.vx,m=f-u.y-u.vy,y=v*v+m*m;y<p*p&&(0===v&&(y+=(v=it(r))*v),0===m&&(y+=(m=it(r))*m),y=(p-(y=Math.sqrt(y)))/y*o,s.vx+=(v*=y)*(p=(d*=d)/(h+d)),s.vy+=(m*=y)*p,u.vx-=v*(p=1-p),u.vy-=m*p)}}}function u(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var r,o,i=e.length;for(n=new Array(i),r=0;r<i;++r)o=e[r],n[o.index]=+t(o,r,e)}}return"function"!=typeof t&&(t=ot(null==t?1:+t)),a.initialize=function(t,n){e=t,r=n,s()},a.iterations=function(t){return arguments.length?(i=+t,a):i},a.strength=function(t){return arguments.length?(o=+t,a):o},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:ot(+e),s(),a):t},a};function Vt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Wt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xt(){function t(t){return function(){return t}}var e,n=function(t){return t.cluster},r=t(1),o=t(-1),i=t(100),a=t(.1),u=[0,0],s=[],c={},f=[],l=100,h=100,d={none:{x:0,y:0}},p=[],v="force",m=!0,y=.1;function g(t){if(!m)return g;e.tick(),_();for(var r,o=0,i=s.length,a=t*y;o<i;++o)(r=s[o]).vx+=(d[n(r)].x-r.x)*a,r.vy+=(d[n(r)].y-r.y)*a}function b(){s&&function(){if(!s||!s.length)return;if(void 0===n(s[0]))throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var t=(d=[],v=[],m={},y=[],u=function(t){var e={};return t.forEach((function(t){var r=n(t);e[r]||(e[r]={count:0,sumforceNodeSize:0})})),t.forEach((function(t){var o=n(t),i=r(t),a=e[o];a.count=a.count+1,a.sumforceNodeSize=a.sumforceNodeSize+Math.PI*(i*i)*1.3,e[o]=a})),e}(s),y=function(t){var e={},r=[];return t.forEach((function(t){var r=function(t){var e=n(c[t.source]),r=n(c[t.target]);return e<=r?"".concat(e,"~").concat(r):"".concat(r,"~").concat(e)}(t),o=0;void 0!==e[r]&&(o=e[r]),o+=1,e[r]=o})),Object.entries(e).forEach((function(t){var e=Vt(t,2),n=e[0],o=e[1],i=n.split("~")[0],a=n.split("~")[1];void 0!==i&&void 0!==a&&r.push({source:i,target:a,count:o})})),r}(f),Object.keys(u).forEach((function(t,e){var n=u[t];d.push({id:t,size:n.count,r:Math.sqrt(n.sumforceNodeSize/Math.PI)}),m[t]=e})),y.forEach((function(t){var e=m[t.source],n=m[t.target];void 0!==e&&void 0!==n&&v.push({source:e,target:n,count:t.count})})),{nodes:d,links:v});var u,d,v,m,y;e=Nt(t.nodes).force("x",function(t){var e,n,r,o=ot(.1);function i(t){for(var o,i=0,a=e.length;i<a;++i)(o=e[i]).vx+=(r[i]-o.x)*n[i]*t}function a(){if(e){var i,a=e.length;for(n=new Array(a),r=new Array(a),i=0;i<a;++i)n[i]=isNaN(r[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=ot(null==t?0:+t)),i.initialize=function(t){e=t,a()},i.strength=function(t){return arguments.length?(o="function"==typeof t?t:ot(+t),a(),i):o},i.x=function(e){return arguments.length?(t="function"==typeof e?e:ot(+e),a(),i):t},i}(l).strength(.1)).force("y",function(t){var e,n,r,o=ot(.1);function i(t){for(var o,i=0,a=e.length;i<a;++i)(o=e[i]).vy+=(r[i]-o.y)*n[i]*t}function a(){if(e){var i,a=e.length;for(n=new Array(a),r=new Array(a),i=0;i<a;++i)n[i]=isNaN(r[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=ot(null==t?0:+t)),i.initialize=function(t){e=t,a()},i.strength=function(t){return arguments.length?(o="function"==typeof t?t:ot(+t),a(),i):o},i.y=function(e){return arguments.length?(t="function"==typeof e?e:ot(+e),a(),i):t},i}(h).strength(.1)).force("collide",zt((function(t){return t.r})).iterations(4)).force("charge",Pt().strength(o)).force("links",Ut(t.nodes.length?t.links:[]).distance(i).strength(a)),p=e.nodes(),_()}()}function _(){return d={none:{x:0,y:0}},p.forEach((function(t){d[t.id]={x:t.x-u[0],y:t.y-u[1]}})),d}function x(t){c={},t.forEach((function(t){c[t.id]=t}))}return g.initialize=function(t){s=t,b()},g.template=function(t){return arguments.length?(v=t,b(),g):v},g.groupBy=function(t){return arguments.length?"string"==typeof t?(n=function(e){return e[t]},g):(n=t,g):n},g.enableGrouping=function(t){return arguments.length?(m=t,g):m},g.strength=function(t){return arguments.length?(y=t,g):y},g.centerX=function(t){return arguments.length?(l=t,g):l},g.centerY=function(t){return arguments.length?(h=t,g):h},g.nodes=function(t){return arguments.length?(x(t||[]),s=t||[],g):s},g.links=function(t){return arguments.length?(f=t||[],b(),g):f},g.forceNodeSize=function(e){return arguments.length?(r="function"==typeof e?e:t(+e),b(),g):r},g.nodeSize=g.forceNodeSize,g.forceCharge=function(e){return arguments.length?(o="function"==typeof e?e:t(+e),b(),g):o},g.forceLinkDistance=function(e){return arguments.length?(i="function"==typeof e?e:t(+e),b(),g):i},g.forceLinkStrength=function(e){return arguments.length?(a="function"==typeof e?e:t(+e),b(),g):a},g.offset=function(t){return arguments.length?(u=t,g):u},g.getFocis=_,g}var Ht="LAYOUT_RUN",qt="LAYOUT_END",Yt="LAYOUT_ERROR",Kt="LAYOUT_TICK",Zt="GPU_LAYOUT_RUN",Qt="GPU_LAYOUT_END";function Jt(t){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function te(t,e){return(te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ee(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=re(t);if(e){var o=re(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ne(this,n)}}function ne(t,e){return!e||"object"!==Jt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function re(t){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var oe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&te(t,e)}(i,t);var e,n,r,o=ee(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).center=[0,0],e.nodeStrength=null,e.edgeStrength=null,e.preventOverlap=!1,e.clusterNodeStrength=null,e.clusterEdgeStrength=null,e.clusterEdgeDistance=null,e.clusterNodeSize=null,e.clusterFociStrength=null,e.linkDistance=50,e.alphaDecay=.028,e.alphaMin=.001,e.alpha=.3,e.collideStrength=1,e.workerEnabled=!1,e.tick=function(){},e.onLayoutEnd=function(){},e.ticking=void 0,t&&e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}}},{key:"init",value:function(t){this.nodes=t.nodes||[];var e=t.edges||[];this.edges=e.map((function(t){var e={},n=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(t).forEach((function(r){n.indexOf(r)>-1||(e[r]=t[r])})),e})),this.ticking=!1}},{key:"execute",value:function(t){var e=this,n=e.nodes,r=e.edges;if(!e.ticking){var o=e.forceSimulation,i=e.alphaMin,a=e.alphaDecay,u=e.alpha;if(o){if(t)if(e.clustering&&e.clusterForce&&(e.clusterForce.nodes(n),e.clusterForce.links(r)),o.nodes(n),r&&e.edgeForce)e.edgeForce.links(r);else if(r&&!e.edgeForce){var s=Ut().id((function(t){return t.id})).links(r);e.edgeStrength&&s.strength(e.edgeStrength),e.linkDistance&&s.distance(e.linkDistance),e.edgeForce=s,o.force("link",s)}e.preventOverlap&&e.overlapProcess(o),o.alpha(u).restart(),this.ticking=!0}else try{var c=Pt();if(e.nodeStrength&&c.strength(e.nodeStrength),o=Nt().nodes(n),e.clustering){var f=Xt();f.centerX(e.center[0]).centerY(e.center[1]).template("force").strength(e.clusterFociStrength),r&&f.links(r),n&&f.nodes(n),f.forceLinkDistance(e.clusterEdgeDistance).forceLinkStrength(e.clusterEdgeStrength).forceCharge(e.clusterNodeStrength).forceNodeSize(e.clusterNodeSize),e.clusterForce=f,o.force("group",f)}if(o.force("center",function(t,e){var n,r=1;function o(){var o,i,a=n.length,u=0,s=0;for(o=0;o<a;++o)u+=(i=n[o]).x,s+=i.y;for(u=(u/a-t)*r,s=(s/a-e)*r,o=0;o<a;++o)(i=n[o]).x-=u,i.y-=s}return null==t&&(t=0),null==e&&(e=0),o.initialize=function(t){n=t},o.x=function(e){return arguments.length?(t=+e,o):t},o.y=function(t){return arguments.length?(e=+t,o):e},o.strength=function(t){return arguments.length?(r=+t,o):r},o}(e.center[0],e.center[1])).force("charge",c).alpha(u).alphaDecay(a).alphaMin(i),e.preventOverlap&&e.overlapProcess(o),r){var l=Ut().id((function(t){return t.id})).links(r);e.edgeStrength&&l.strength(e.edgeStrength),e.linkDistance&&l.distance(e.linkDistance),e.edgeForce=l,o.force("link",l)}if(e.workerEnabled&&!ie()&&(e.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),e.workerEnabled){o.stop();for(var h=function(t){var e=t.alphaMin(),n=t.alphaTarget(),r=t.alpha(),o=Math.log((e-n)/(r-n))/Math.log(1-t.alphaDecay());return Math.ceil(o)}(o),d=1;d<=h;d++)o.tick(),postMessage({nodes:n,currentTick:d,totalTicks:h,type:Kt},void 0);e.ticking=!1}else o.on("tick",(function(){e.tick()})).on("end",(function(){e.ticking=!1,e.onLayoutEnd&&e.onLayoutEnd()})),e.ticking=!0;e.forceSimulation=o,e.ticking=!0}catch(t){e.ticking=!1,console.warn(t)}}}},{key:"overlapProcess",value:function(t){var e,n,r=this.nodeSize,o=this.nodeSpacing,i=this.collideStrength;if(n=y(o)?function(){return o}:T(o)?o:function(){return 0},r)if(T(r))e=function(t){return r(t)+n(t)};else if(m(r)){var a=(r[0]>r[1]?r[0]:r[1])/2;e=function(t){return a+n(t)}}else if(y(r)){var u=r/2;e=function(t){return u+n(t)}}else e=function(){return 10};else e=function(t){return t.size?m(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2+n(t):t.size/2+n(t):10+n(t)};t.force("collisionForce",zt(e).strength(i))}},{key:"updateCfg",value:function(t){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.forceSimulation=null,Object.assign(this,t)}},{key:"destroy",value:function(){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.nodes=null,this.edges=null,this.destroyed=!0}}])&&$t(e.prototype,n),r&&$t(e,r),i}(I);function ie(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}function ae(t){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function se(t,e){return(se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ce(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=le(t);if(e){var o=le(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fe(this,n)}}function fe(t,e){return!e||"object"!==ae(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function le(t){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function he(t,e,n,r){t.forEach((function(e,n){t[n].children=[],t[n].parent=[]})),r?e.forEach((function(e){var r=0;e.source&&(r=n[e.source]);var o=0;e.target&&(o=n[e.target]);var i=t[r].children,a=t[o].parent;i.push(t[o].id),a.push(t[r].id)})):e.forEach((function(e){var r=0;e.source&&(r=n[e.source]);var o=0;e.target&&(o=n[e.target]);var i=t[r].children,a=t[o].children;i.push(t[o].id),a.push(t[r].id)}))}function de(t,e,n){for(var r=n.length,o=0;o<r;o++)if(t.id===n[o].source&&e.id===n[o].target||e.id===n[o].source&&t.id===n[o].target)return!0;return!1}function pe(t,e){var n=t.degree,r=e.degree;return n<r?-1:n>r?1:0}var ve=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&se(t,e)}(i,t);var e,n,r,o=ce(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).radius=null,e.startRadius=null,e.endRadius=null,e.startAngle=0,e.endAngle=2*Math.PI,e.clockwise=!0,e.divisions=1,e.ordering=null,e.angleRatio=1,e.nodes=[],e.edges=[],e.nodeMap={},e.degrees=[],e.width=300,e.height=300,e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}},{key:"execute",value:function(){var t=this.nodes,e=this.edges,n=t.length;if(0!==n){this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var r=this.center;if(1===n)return t[0].x=r[0],t[0].y=r[1],void(this.onLayoutEnd&&this.onLayoutEnd());var o=this.radius,i=this.startRadius,a=this.endRadius,u=this.divisions,s=this.startAngle,c=this.endAngle,f=(c-s)/n,l={};t.forEach((function(t,e){l[t.id]=e})),this.nodeMap=l;var h=b(t.length,l,e);this.degrees=h,o||i||a?!i&&a?i=a:i&&!a&&(a=i):o=this.height>this.width?this.width/2:this.height/2;var d=f*this.angleRatio,p=this.ordering,v=[];v="topology"===p?this.topologyOrdering():"topology-directed"===p?this.topologyOrdering(!0):"degree"===p?this.degreeOrdering():t;for(var m=this.clockwise,y=Math.ceil(n/u),g=0;g<n;++g){var _=o;_||null===i||null===a||(_=i+g*(a-i)/(n-1)),_||(_=10+100*g/(n-1));var x=s+g%y*d+2*Math.PI/u*Math.floor(g/y);m||(x=c-g%y*d-2*Math.PI/u*Math.floor(g/y)),v[g].x=r[0]+Math.cos(x)*_,v[g].y=r[1]+Math.sin(x)*_,v[g].weight=h[g]}return this.onLayoutEnd&&this.onLayoutEnd(),{nodes:v,edges:this.edges}}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"topologyOrdering",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this,n=e.degrees,r=e.edges,o=e.nodes,i=S(o),a=e.nodeMap,u=[i[0]],s=[o[0]],c=[],f=o.length;c[0]=!0,he(i,r,a,t);var l=0;return i.forEach((function(t,e){if(0!==e)if(e!==f-1&&n[e]===n[e+1]&&!de(u[l],t,r)||c[e]){for(var h=u[l].children,d=!1,p=0;p<h.length;p++){var v=a[h[p]];if(n[v]===n[e]&&!c[v]){u.push(i[v]),s.push(o[a[i[v].id]]),c[v]=!0,d=!0;break}}for(var m=0;!d&&(c[m]||(u.push(i[m]),s.push(o[a[i[m].id]]),c[m]=!0,d=!0),++m!==f););}else u.push(t),s.push(o[a[t.id]]),c[e]=!0,l++})),s}},{key:"degreeOrdering",value:function(){var t=this.nodes,e=[],n=this.degrees;return t.forEach((function(t,r){t.degree=n[r],e.push(t)})),e.sort(pe),e}},{key:"getType",value:function(){return"circular"}}])&&ue(e.prototype,n),r&&ue(e,r),i}(I),me=n(102),ye=n.n(me);function ge(t){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _e(t,e){return(_e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ee(t);if(e){var o=Ee(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return we(this,n)}}function we(t,e){return!e||"object"!==ge(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ee(t){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Se=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_e(t,e)}(i,t);var e,n,r,o=xe(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).rankdir="TB",e.nodesep=50,e.ranksep=50,e.controlPoints=!1,e.sortByCombo=!1,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=t.nodeSize,r=t.rankdir;if(e){var o,i=t.edges||[],a=new ye.a.graphlib.Graph;o=n?m(n)?function(){return n}:function(){return[n,n]}:function(t){return t.size?m(t.size)?t.size:[t.size,t.size]:[40,40]};var u,s=Te(t.nodesepFunc,t.nodesep,50),c=Te(t.ranksepFunc,t.ranksep,50);return"LR"!==r&&"RL"!==r||(s=Te(t.ranksepFunc,t.ranksep,50),c=Te(t.nodesepFunc,t.nodesep,50)),a.setDefaultEdgeLabel((function(){return{}})),a.setGraph(t),e.forEach((function(t){var e=o(t),n=c(t),r=s(t),i=e[0]+2*r,u=e[1]+2*n;a.setNode(t.id,{width:i,height:u})})),i.forEach((function(t){a.setEdge(t.source,t.target,{weight:t.weight||1})})),ye.a.layout(a),a.nodes().forEach((function(t){u=a.node(t);var n=e.findIndex((function(e){return e.id===t}));e[n].x=u.x,e[n].y=u.y})),a.edges().forEach((function(e){u=a.edge(e);var n=i.findIndex((function(t){return t.source===e.v&&t.target===e.w}));t.controlPoints&&"loop"!==i[n].type&&(i[n].controlPoints=u.points.slice(1,u.points.length-1))})),t.sortByCombo&&t.sortLevel("comboId"),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:i}}}},{key:"sortLevel",value:function(t){var e=this,n=e.nodes,r={};n.forEach((function(t){r[t.y]||(r[t.y]={y:t.y,nodes:[]}),r[t.y].nodes.push(t)})),Object.keys(r).forEach((function(n){var o=r[n].nodes,i=o.length,a={};if(o.forEach((function(t){var e=t.comboId;a[e]||(a[e]={x:0,y:0,count:0}),a[e].x+=t.x,a[e].y+=t.y,a[e].count++})),Object.keys(a).forEach((function(t){a[t].x/=a[t].count,a[t].y/=a[t].count})),1!==i){var u=o.sort((function(t,e){return t.x-e.x})),s=u[0].x,c=(u[i-1].x-s)/(i-1);o.sort((function(e,n){var r=e[t]||"undefined",o=n[t]||"undefined";return r<o?-1:r>o?1:0})).forEach((function(t,e){t.x=s+e*c}))}else e.onLayoutEnd&&e.onLayoutEnd()}))}},{key:"getType",value:function(){return"dagre"}}])&&be(e.prototype,n),r&&be(e,r),i}(I);function Te(t,e,n){return t||(y(e)?function(){return e}:function(){return n})}var Ae=Object.prototype.toString;function Ie(t){return Ae.call(t).endsWith("Array]")}var ke=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ie(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,r=void 0===n?0:n,o=e.toIndex,i=void 0===o?t.length:o;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=r||i>t.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[r],u=r+1;u<i;u++)t[u]>a&&(a=t[u]);return a};var Oe=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ie(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,r=void 0===n?0:n,o=e.toIndex,i=void 0===o?t.length:o;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=r||i>t.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[r],u=r+1;u<i;u++)t[u]<a&&(a=t[u]);return a};var De=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ie(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!Ie(n.output))throw new TypeError("output option must be an array if specified");e=n.output}else e=new Array(t.length);var r=Oe(t),o=ke(t);if(r===o)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var i=n.min,a=void 0===i?n.autoMinMax?r:0:i,u=n.max,s=void 0===u?n.autoMinMax?o:1:u;if(a>=s)throw new RangeError("min option must be smaller than max option");for(var c=(s-a)/(o-r),f=0;f<t.length;f++)e[f]=(t[f]-r)*c+a;return e},Re=" ".repeat(2),Me=" ".repeat(4);function Ce(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.maxRows,r=void 0===n?15:n,o=e.maxColumns,i=void 0===o?10:o,a=e.maxNumSize,u=void 0===a?8:a;return"".concat(t.constructor.name," {\\n").concat(Re,"[\\n").concat(Me).concat(Ne(t,r,i,u),"\\n").concat(Re,"]\\n").concat(Re,"rows: ").concat(t.rows,"\\n").concat(Re,"columns: ").concat(t.columns,"\\n}")}function Ne(t,e,n,r){for(var o=t.rows,i=t.columns,a=Math.min(o,e),u=Math.min(i,n),s=[],c=0;c<a;c++){for(var f=[],l=0;l<u;l++)f.push(Pe(t.get(c,l),r));s.push("".concat(f.join(" ")))}return u!==i&&(s[s.length-1]+=" ... ".concat(i-n," more columns")),a!==o&&s.push("... ".concat(o-e," more rows")),s.join("\\n".concat(Me))}function Pe(t,e){var n=String(t);if(n.length<=e)return n.padEnd(e," ");var r=t.toPrecision(e-2);if(r.length<=e)return r;var o=t.toExponential(e-2),i=o.indexOf("e"),a=o.slice(i);return o.slice(0,e-a.length)+a}function Ge(t){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function je(t,e,n){var r=n?t.rows:t.rows-1;if(e<0||e>r)throw new RangeError("Row index out of range")}function Le(t,e,n){var r=n?t.columns:t.columns-1;if(e<0||e>r)throw new RangeError("Column index out of range")}function Ue(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function Be(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function Fe(t,e){if("object"!==Ge(e))throw new TypeError("unexpected type for row indices");if(e.some((function(e){return e<0||e>=t.rows})))throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function ze(t,e){if("object"!==Ge(e))throw new TypeError("unexpected type for column indices");if(e.some((function(e){return e<0||e>=t.columns})))throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function Ve(t,e,n,r,o){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(Xe("startRow",e),Xe("endRow",n),Xe("startColumn",r),Xe("endColumn",o),e>n||r>o||e<0||e>=t.rows||n<0||n>=t.rows||r<0||r>=t.columns||o<0||o>=t.columns)throw new RangeError("Submatrix indices are out of range")}function We(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=0;r<t;r++)n.push(e);return n}function Xe(t,e){if("number"!=typeof e)throw new TypeError("".concat(t," must be a number"))}function He(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}function qe(t,e,n){for(var r=t.rows,o=t.columns,i=[],a=0;a<r;a++){for(var u=0,s=0,c=0,f=0;f<o;f++)u+=c=t.get(a,f)-n[a],s+=c*c;e?i.push((s-u*u/o)/(o-1)):i.push((s-u*u/o)/o)}return i}function Ye(t,e,n){for(var r=t.rows,o=t.columns,i=[],a=0;a<o;a++){for(var u=0,s=0,c=0,f=0;f<r;f++)u+=c=t.get(f,a)-n[a],s+=c*c;e?i.push((s-u*u/r)/(r-1)):i.push((s-u*u/r)/r)}return i}function Ke(t,e,n){for(var r=t.rows,o=t.columns,i=r*o,a=0,u=0,s=0,c=0;c<r;c++)for(var f=0;f<o;f++)a+=s=t.get(c,f)-n,u+=s*s;return e?(u-a*a/i)/(i-1):(u-a*a/i)/i}function Ze(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[n])}function Qe(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[r])}function Je(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e)}function $e(t){for(var e=[],n=0;n<t.rows;n++){for(var r=0,o=0;o<t.columns;o++)r+=Math.pow(t.get(n,o),2)/(t.columns-1);e.push(Math.sqrt(r))}return e}function tn(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[n])}function en(t){for(var e=[],n=0;n<t.columns;n++){for(var r=0,o=0;o<t.rows;o++)r+=Math.pow(t.get(o,n),2)/(t.rows-1);e.push(Math.sqrt(r))}return e}function nn(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[r])}function rn(t){for(var e=t.size-1,n=0,r=0;r<t.columns;r++)for(var o=0;o<t.rows;o++)n+=Math.pow(t.get(o,r),2)/e;return Math.sqrt(n)}function on(t,e){for(var n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e)}function an(t,e){return(an=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function un(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=cn(t);if(e){var o=cn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return sn(this,n)}}function sn(t,e){return!e||"object"!==fn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cn(t){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fn(t){return(fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ln(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dn(t,e,n){return e&&hn(t.prototype,e),n&&hn(t,n),t}var pn=function(){function t(){ln(this,t)}return dn(t,[{key:"apply",value:function(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.call(this,e,n);return this}},{key:"to1DArray",value:function(){for(var t=[],e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.push(this.get(e,n));return t}},{key:"to2DArray",value:function(){for(var t=[],e=0;e<this.rows;e++){t.push([]);for(var n=0;n<this.columns;n++)t[e].push(this.get(e,n))}return t}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return 1===this.rows}},{key:"isColumnVector",value:function(){return 1===this.columns}},{key:"isVector",value:function(){return 1===this.rows||1===this.columns}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return 0===this.rows||0===this.columns}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var t=0,e=0,n=-1,r=!0,o=!1;t<this.rows&&r;){for(e=0,o=!1;e<this.columns&&!1===o;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(o=!0,n=e):(r=!1,o=!0);t++}return r}},{key:"isReducedEchelonForm",value:function(){for(var t=0,e=0,n=-1,r=!0,o=!1;t<this.rows&&r;){for(e=0,o=!1;e<this.columns&&!1===o;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(o=!0,n=e):(r=!1,o=!0);for(var i=e+1;i<this.rows;i++)0!==this.get(t,i)&&(r=!1);t++}return r}},{key:"echelonForm",value:function(){for(var t=this.clone(),e=0,n=0;e<t.rows&&n<t.columns;){for(var r=e,o=e;o<t.rows;o++)t.get(o,n)>t.get(r,n)&&(r=o);if(0===t.get(r,n))n++;else{t.swapRows(e,r);for(var i=t.get(e,n),a=n;a<t.columns;a++)t.set(e,a,t.get(e,a)/i);for(var u=e+1;u<t.rows;u++){var s=t.get(u,n)/t.get(e,n);t.set(u,n,0);for(var c=n+1;c<t.columns;c++)t.set(u,c,t.get(u,c)-t.get(e,c)*s)}e++,n++}}return t}},{key:"reducedEchelonForm",value:function(){for(var t=this.echelonForm(),e=t.columns,n=t.rows,r=n-1;r>=0;)if(0===t.maxRow(r))r--;else{for(var o=0,i=!1;o<n&&!1===i;)1===t.get(r,o)?i=!0:o++;for(var a=0;a<r;a++)for(var u=t.get(a,o),s=o;s<e;s++){var c=t.get(a,s)-u*t.get(r,s);t.set(a,s,c)}r--}return t}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==fn(t))throw new TypeError("options must be an object");var e=t.rows,n=void 0===e?1:e,r=t.columns,o=void 0===r?1:r;if(!Number.isInteger(n)||n<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(o)||o<=0)throw new TypeError("columns must be a positive integer");for(var i=new gn(this.rows*n,this.columns*o),a=0;a<n;a++)for(var u=0;u<o;u++)i.setSubMatrix(this,this.rows*a,this.columns*u);return i}},{key:"fill",value:function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,t);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(t){je(this,t);for(var e=[],n=0;n<this.columns;n++)e.push(this.get(t,n));return e}},{key:"getRowVector",value:function(t){return gn.rowVector(this.getRow(t))}},{key:"setRow",value:function(t,e){je(this,t),e=Ue(this,e);for(var n=0;n<this.columns;n++)this.set(t,n,e[n]);return this}},{key:"swapRows",value:function(t,e){je(this,t),je(this,e);for(var n=0;n<this.columns;n++){var r=this.get(t,n);this.set(t,n,this.get(e,n)),this.set(e,n,r)}return this}},{key:"getColumn",value:function(t){Le(this,t);for(var e=[],n=0;n<this.rows;n++)e.push(this.get(n,t));return e}},{key:"getColumnVector",value:function(t){return gn.columnVector(this.getColumn(t))}},{key:"setColumn",value:function(t,e){Le(this,t),e=Be(this,e);for(var n=0;n<this.rows;n++)this.set(n,t,e[n]);return this}},{key:"swapColumns",value:function(t,e){Le(this,t),Le(this,e);for(var n=0;n<this.rows;n++){var r=this.get(n,t);this.set(n,t,this.get(n,e)),this.set(n,e,r)}return this}},{key:"addRowVector",value:function(t){t=Ue(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[n]);return this}},{key:"subRowVector",value:function(t){t=Ue(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[n]);return this}},{key:"mulRowVector",value:function(t){t=Ue(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[n]);return this}},{key:"divRowVector",value:function(t){t=Ue(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[n]);return this}},{key:"addColumnVector",value:function(t){t=Be(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t[e]);return this}},{key:"subColumnVector",value:function(t){t=Be(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t[e]);return this}},{key:"mulColumnVector",value:function(t){t=Be(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t[e]);return this}},{key:"divColumnVector",value:function(t){t=Be(this,t);for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t[e]);return this}},{key:"mulRow",value:function(t,e){je(this,t);for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this}},{key:"mulColumn",value:function(t,e){Le(this,t);for(var n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*e);return this}},{key:"max",value:function(){if(this.isEmpty())return NaN;for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}},{key:"maxIndex",value:function(){He(this);for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)>t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}},{key:"min",value:function(){if(this.isEmpty())return NaN;for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}},{key:"minIndex",value:function(){He(this);for(var t=this.get(0,0),e=[0,0],n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)this.get(n,r)<t&&(t=this.get(n,r),e[0]=n,e[1]=r);return e}},{key:"maxRow",value:function(t){if(je(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}},{key:"maxRowIndex",value:function(t){je(this,t),He(this);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r),n[1]=r);return n}},{key:"minRow",value:function(t){if(je(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}},{key:"minRowIndex",value:function(t){je(this,t),He(this);for(var e=this.get(t,0),n=[t,0],r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r),n[1]=r);return n}},{key:"maxColumn",value:function(t){if(Le(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t));return e}},{key:"maxColumnIndex",value:function(t){Le(this,t),He(this);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t),n[0]=r);return n}},{key:"minColumn",value:function(t){if(Le(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t));return e}},{key:"minColumnIndex",value:function(t){Le(this,t),He(this);for(var e=this.get(0,t),n=[0,t],r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t),n[0]=r);return n}},{key:"diag",value:function(){for(var t=Math.min(this.rows,this.columns),e=[],n=0;n<t;n++)e.push(this.get(n,n));return e}},{key:"norm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frobenius",e=0;if("max"===t)return this.max();if("frobenius"===t){for(var n=0;n<this.rows;n++)for(var r=0;r<this.columns;r++)e+=this.get(n,r)*this.get(n,r);return Math.sqrt(e)}throw new RangeError("unknown norm type: ".concat(t))}},{key:"cumulativeSum",value:function(){for(var t=0,e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t+=this.get(e,n),this.set(e,n,t);return this}},{key:"dot",value:function(e){t.isMatrix(e)&&(e=e.to1DArray());var n=this.to1DArray();if(n.length!==e.length)throw new RangeError("vectors do not have the same size");for(var r=0,o=0;o<n.length;o++)r+=n[o]*e[o];return r}},{key:"mmul",value:function(t){t=gn.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.columns,o=new gn(e,r),i=new Float64Array(n),a=0;a<r;a++){for(var u=0;u<n;u++)i[u]=t.get(u,a);for(var s=0;s<e;s++){for(var c=0,f=0;f<n;f++)c+=this.get(s,f)*i[f];o.set(s,a,c)}}return o}},{key:"strassen2x2",value:function(t){t=gn.checkMatrix(t);var e=new gn(2,2),n=this.get(0,0),r=t.get(0,0),o=this.get(0,1),i=t.get(0,1),a=this.get(1,0),u=t.get(1,0),s=this.get(1,1),c=t.get(1,1),f=(n+s)*(r+c),l=(a+s)*r,h=n*(i-c),d=s*(u-r),p=(n+o)*c,v=f+d-p+(o-s)*(u+c),m=h+p,y=l+d,g=f-l+h+(a-n)*(r+i);return e.set(0,0,v),e.set(0,1,m),e.set(1,0,y),e.set(1,1,g),e}},{key:"strassen3x3",value:function(t){t=gn.checkMatrix(t);var e=new gn(3,3),n=this.get(0,0),r=this.get(0,1),o=this.get(0,2),i=this.get(1,0),a=this.get(1,1),u=this.get(1,2),s=this.get(2,0),c=this.get(2,1),f=this.get(2,2),l=t.get(0,0),h=t.get(0,1),d=t.get(0,2),p=t.get(1,0),v=t.get(1,1),m=t.get(1,2),y=t.get(2,0),g=t.get(2,1),b=t.get(2,2),_=(n-i)*(-h+v),x=(-n+i+a)*(l-h+v),w=(i+a)*(-l+h),E=n*l,S=(-n+s+c)*(l-d+m),T=(-n+s)*(d-m),A=(s+c)*(-l+d),I=(-o+c+f)*(v+y-g),k=(o-f)*(v-g),O=o*y,D=(c+f)*(-y+g),R=(-o+a+u)*(m+y-b),M=(o-u)*(m-b),C=(a+u)*(-y+b),N=E+O+r*p,P=(n+r+o-i-a-c-f)*v+x+w+E+I+O+D,G=E+S+A+(n+r+o-a-u-s-c)*m+O+R+C,j=_+a*(-l+h+p-v-m-y+b)+x+E+O+R+M,L=_+x+w+E+u*g,U=O+R+M+C+i*d,B=E+S+T+c*(-l+d+p-v-m-y+g)+I+k+O,F=I+k+O+D+s*h,z=E+S+T+A+f*b;return e.set(0,0,N),e.set(0,1,P),e.set(0,2,G),e.set(1,0,j),e.set(1,1,L),e.set(1,2,U),e.set(2,0,B),e.set(2,1,F),e.set(2,2,z),e}},{key:"mmulStrassen",value:function(e){e=gn.checkMatrix(e);var n=this.clone(),r=n.rows,o=n.columns,i=e.rows,a=e.columns;function u(e,n,r){var o=e.rows,i=e.columns;if(o===n&&i===r)return e;var a=t.zeros(n,r);return a=a.setSubMatrix(e,0,0)}o!==i&&console.warn("Multiplying ".concat(r," x ").concat(o," and ").concat(i," x ").concat(a," matrix: dimensions do not match."));var s=Math.max(r,i),c=Math.max(o,a);return function e(n,r,o,i){if(o<=512||i<=512)return n.mmul(r);o%2==1&&i%2==1?(n=u(n,o+1,i+1),r=u(r,o+1,i+1)):o%2==1?(n=u(n,o+1,i),r=u(r,o+1,i)):i%2==1&&(n=u(n,o,i+1),r=u(r,o,i+1));var a=parseInt(n.rows/2,10),s=parseInt(n.columns/2,10),c=n.subMatrix(0,a-1,0,s-1),f=r.subMatrix(0,a-1,0,s-1),l=n.subMatrix(0,a-1,s,n.columns-1),h=r.subMatrix(0,a-1,s,r.columns-1),d=n.subMatrix(a,n.rows-1,0,s-1),p=r.subMatrix(a,r.rows-1,0,s-1),v=n.subMatrix(a,n.rows-1,s,n.columns-1),m=r.subMatrix(a,r.rows-1,s,r.columns-1),y=e(t.add(c,v),t.add(f,m),a,s),g=e(t.add(d,v),f,a,s),b=e(c,t.sub(h,m),a,s),_=e(v,t.sub(p,f),a,s),x=e(t.add(c,l),m,a,s),w=e(t.sub(d,c),t.add(f,h),a,s),E=e(t.sub(l,v),t.add(p,m),a,s),S=t.add(y,_);S.sub(x),S.add(E);var T=t.add(b,x),A=t.add(g,_),I=t.sub(y,g);I.add(b),I.add(w);var k=t.zeros(2*S.rows,2*S.columns);return(k=(k=(k=(k=k.setSubMatrix(S,0,0)).setSubMatrix(T,S.rows,0)).setSubMatrix(A,0,S.columns)).setSubMatrix(I,S.rows,S.columns)).subMatrix(0,o-1,0,i-1)}(n=u(n,s,c),e=u(e,s,c),s,c)}},{key:"scaleRows",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==fn(t))throw new TypeError("options must be an object");var e=t.min,n=void 0===e?0:e,r=t.max,o=void 0===r?1:r;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(n>=o)throw new RangeError("min must be smaller than max");for(var i=new gn(this.rows,this.columns),a=0;a<this.rows;a++){var u=this.getRow(a);u.length>0&&De(u,{min:n,max:o,output:u}),i.setRow(a,u)}return i}},{key:"scaleColumns",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==fn(t))throw new TypeError("options must be an object");var e=t.min,n=void 0===e?0:e,r=t.max,o=void 0===r?1:r;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(n>=o)throw new RangeError("min must be smaller than max");for(var i=new gn(this.rows,this.columns),a=0;a<this.columns;a++){var u=this.getColumn(a);u.length&&De(u,{min:n,max:o,output:u}),i.setColumn(a,u)}return i}},{key:"flipRows",value:function(){for(var t=Math.ceil(this.columns/2),e=0;e<this.rows;e++)for(var n=0;n<t;n++){var r=this.get(e,n),o=this.get(e,this.columns-1-n);this.set(e,n,o),this.set(e,this.columns-1-n,r)}return this}},{key:"flipColumns",value:function(){for(var t=Math.ceil(this.rows/2),e=0;e<this.columns;e++)for(var n=0;n<t;n++){var r=this.get(n,e),o=this.get(this.rows-1-n,e);this.set(n,e,o),this.set(this.rows-1-n,e,r)}return this}},{key:"kroneckerProduct",value:function(t){t=gn.checkMatrix(t);for(var e=this.rows,n=this.columns,r=t.rows,o=t.columns,i=new gn(e*r,n*o),a=0;a<e;a++)for(var u=0;u<n;u++)for(var s=0;s<r;s++)for(var c=0;c<o;c++)i.set(r*a+s,o*u+c,this.get(a,u)*t.get(s,c));return i}},{key:"transpose",value:function(){for(var t=new gn(this.columns,this.rows),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(n,e,this.get(e,n));return t}},{key:"sortRows",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn,e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}},{key:"sortColumns",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn,e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}},{key:"subMatrix",value:function(t,e,n,r){Ve(this,t,e,n,r);for(var o=new gn(e-t+1,r-n+1),i=t;i<=e;i++)for(var a=n;a<=r;a++)o.set(i-t,a-n,this.get(i,a));return o}},{key:"subMatrixRow",value:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.columns-1),e>n||e<0||e>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");for(var r=new gn(t.length,n-e+1),o=0;o<t.length;o++)for(var i=e;i<=n;i++){if(t[o]<0||t[o]>=this.rows)throw new RangeError("Row index out of range: ".concat(t[o]));r.set(o,i-e,this.get(t[o],i))}return r}},{key:"subMatrixColumn",value:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.rows-1),e>n||e<0||e>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");for(var r=new gn(n-e+1,t.length),o=0;o<t.length;o++)for(var i=e;i<=n;i++){if(t[o]<0||t[o]>=this.columns)throw new RangeError("Column index out of range: ".concat(t[o]));r.set(i-e,o,this.get(i,t[o]))}return r}},{key:"setSubMatrix",value:function(t,e,n){if((t=gn.checkMatrix(t)).isEmpty())return this;Ve(this,e,e+t.rows-1,n,n+t.columns-1);for(var r=0;r<t.rows;r++)for(var o=0;o<t.columns;o++)this.set(e+r,n+o,t.get(r,o));return this}},{key:"selection",value:function(t,e){for(var n=function(t,e,n){return{row:Fe(t,e),column:ze(t,n)}}(this,t,e),r=new gn(t.length,e.length),o=0;o<n.row.length;o++)for(var i=n.row[o],a=0;a<n.column.length;a++){var u=n.column[a];r.set(o,a,this.get(i,u))}return r}},{key:"trace",value:function(){for(var t=Math.min(this.rows,this.columns),e=0,n=0;n<t;n++)e+=this.get(n,n);return e}},{key:"clone",value:function(){for(var t=new gn(this.rows,this.columns),e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)t.set(e,n,this.get(e,n));return t}},{key:"sum",value:function(t){switch(t){case"row":return function(t){for(var e=We(t.rows),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[n]+=t.get(n,r);return e}(this);case"column":return function(t){for(var e=We(t.columns),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[r]+=t.get(n,r);return e}(this);case void 0:return function(t){for(var e=0,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e+=t.get(n,r);return e}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"product",value:function(t){switch(t){case"row":return function(t){for(var e=We(t.rows,1),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[n]*=t.get(n,r);return e}(this);case"column":return function(t){for(var e=We(t.columns,1),n=0;n<t.rows;++n)for(var r=0;r<t.columns;++r)e[r]*=t.get(n,r);return e}(this);case void 0:return function(t){for(var e=1,n=0;n<t.rows;n++)for(var r=0;r<t.columns;r++)e*=t.get(n,r);return e}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"mean",value:function(t){var e=this.sum(t);switch(t){case"row":for(var n=0;n<this.rows;n++)e[n]/=this.columns;return e;case"column":for(var r=0;r<this.columns;r++)e[r]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error("invalid option: ".concat(t))}}},{key:"variance",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===fn(t)&&(e=t,t=void 0),"object"!==fn(e))throw new TypeError("options must be an object");var n=e,r=n.unbiased,o=void 0===r||r,i=n.mean,a=void 0===i?this.mean(t):i;if("boolean"!=typeof o)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!Array.isArray(a))throw new TypeError("mean must be an array");return qe(this,o,a);case"column":if(!Array.isArray(a))throw new TypeError("mean must be an array");return Ye(this,o,a);case void 0:if("number"!=typeof a)throw new TypeError("mean must be a number");return Ke(this,o,a);default:throw new Error("invalid option: ".concat(t))}}},{key:"standardDeviation",value:function(t,e){"object"===fn(t)&&(e=t,t=void 0);var n=this.variance(t,e);if(void 0===t)return Math.sqrt(n);for(var r=0;r<n.length;r++)n[r]=Math.sqrt(n[r]);return n}},{key:"center",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===fn(t)&&(e=t,t=void 0),"object"!==fn(e))throw new TypeError("options must be an object");var n=e,r=n.center,o=void 0===r?this.mean(t):r;switch(t){case"row":if(!Array.isArray(o))throw new TypeError("center must be an array");return Ze(this,o),this;case"column":if(!Array.isArray(o))throw new TypeError("center must be an array");return Qe(this,o),this;case void 0:if("number"!=typeof o)throw new TypeError("center must be a number");return Je(this,o),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"scale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===fn(t)&&(e=t,t=void 0),"object"!==fn(e))throw new TypeError("options must be an object");var n=e.scale;switch(t){case"row":if(void 0===n)n=$e(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return tn(this,n),this;case"column":if(void 0===n)n=en(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return nn(this,n),this;case void 0:if(void 0===n)n=rn(this);else if("number"!=typeof n)throw new TypeError("scale must be a number");return on(this,n),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"toString",value:function(t){return Ce(this,t)}},{key:"size",get:function(){return this.rows*this.columns}}],[{key:"from1DArray",value:function(t,e,n){if(t*e!==n.length)throw new RangeError("data length does not match given dimensions");for(var r=new gn(t,e),o=0;o<t;o++)for(var i=0;i<e;i++)r.set(o,i,n[o*e+i]);return r}},{key:"rowVector",value:function(t){for(var e=new gn(1,t.length),n=0;n<t.length;n++)e.set(0,n,t[n]);return e}},{key:"columnVector",value:function(t){for(var e=new gn(t.length,1),n=0;n<t.length;n++)e.set(n,0,t[n]);return e}},{key:"zeros",value:function(t,e){return new gn(t,e)}},{key:"ones",value:function(t,e){return new gn(t,e).fill(1)}},{key:"rand",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==fn(n))throw new TypeError("options must be an object");for(var r=n.random,o=void 0===r?Math.random:r,i=new gn(t,e),a=0;a<t;a++)for(var u=0;u<e;u++)i.set(a,u,o());return i}},{key:"randInt",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==fn(n))throw new TypeError("options must be an object");var r=n.min,o=void 0===r?0:r,i=n.max,a=void 0===i?1e3:i,u=n.random,s=void 0===u?Math.random:u;if(!Number.isInteger(o))throw new TypeError("min must be an integer");if(!Number.isInteger(a))throw new TypeError("max must be an integer");if(o>=a)throw new RangeError("min must be smaller than max");for(var c=a-o,f=new gn(t,e),l=0;l<t;l++)for(var h=0;h<e;h++){var d=o+Math.round(s()*c);f.set(l,h,d)}return f}},{key:"eye",value:function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);for(var r=Math.min(t,e),o=this.zeros(t,e),i=0;i<r;i++)o.set(i,i,n);return o}},{key:"diag",value:function(t,e,n){var r=t.length;void 0===e&&(e=r),void 0===n&&(n=e);for(var o=Math.min(r,e,n),i=this.zeros(e,n),a=0;a<o;a++)i.set(a,a,t[a]);return i}},{key:"min",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,o=new gn(n,r),i=0;i<n;i++)for(var a=0;a<r;a++)o.set(i,a,Math.min(t.get(i,a),e.get(i,a)));return o}},{key:"max",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var n=t.rows,r=t.columns,o=new this(n,r),i=0;i<n;i++)for(var a=0;a<r;a++)o.set(i,a,Math.max(t.get(i,a),e.get(i,a)));return o}},{key:"checkMatrix",value:function(e){return t.isMatrix(e)?e:new gn(e)}},{key:"isMatrix",value:function(t){return null!=t&&"Matrix"===t.klass}}]),t}();function vn(t,e){return t-e}pn.prototype.klass="Matrix","undefined"!=typeof Symbol&&(pn.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return Ce(this)}),pn.random=pn.rand,pn.randomInt=pn.randInt,pn.diagonal=pn.diag,pn.prototype.diagonal=pn.prototype.diag,pn.identity=pn.eye,pn.prototype.negate=pn.prototype.neg,pn.prototype.tensorProduct=pn.prototype.kroneckerProduct;var mn,yn,gn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&an(t,e)}(n,t);var e=un(n);function n(t,r){var o;if(ln(this,n),o=e.call(this),n.isMatrix(t))return sn(o,t.clone());if(Number.isInteger(t)&&t>=0){if(o.data=[],!(Number.isInteger(r)&&r>=0))throw new TypeError("nColumns must be a positive integer");for(var i=0;i<t;i++)o.data.push(new Float64Array(r))}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");var a=t;if("number"!=typeof(r=(t=a.length)?a[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");o.data=[];for(var u=0;u<t;u++){if(a[u].length!==r)throw new RangeError("Inconsistent array dimensions");o.data.push(Float64Array.from(a[u]))}}return o.rows=t,o.columns=r,o}return dn(n,[{key:"set",value:function(t,e,n){return this.data[t][e]=n,this}},{key:"get",value:function(t,e){return this.data[t][e]}},{key:"removeRow",value:function(t){return je(this,t),this.data.splice(t,1),this.rows-=1,this}},{key:"addRow",value:function(t,e){return void 0===e&&(e=t,t=this.rows),je(this,t,!0),e=Float64Array.from(Ue(this,e)),this.data.splice(t,0,e),this.rows+=1,this}},{key:"removeColumn",value:function(t){Le(this,t);for(var e=0;e<this.rows;e++){for(var n=new Float64Array(this.columns-1),r=0;r<t;r++)n[r]=this.data[e][r];for(var o=t+1;o<this.columns;o++)n[o-1]=this.data[e][o];this.data[e]=n}return this.columns-=1,this}},{key:"addColumn",value:function(t,e){void 0===e&&(e=t,t=this.columns),Le(this,t,!0),e=Be(this,e);for(var n=0;n<this.rows;n++){for(var r=new Float64Array(this.columns+1),o=0;o<t;o++)r[o]=this.data[n][o];for(r[o++]=e[n];o<this.columns+1;o++)r[o]=this.data[n][o-1];this.data[n]=r}return this.columns+=1,this}}]),n}(pn);function bn(t){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xn(t,e){return(xn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Sn(t);if(e){var o=Sn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return En(this,n)}}function En(t,e){return!e||"object"!==bn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Sn(t){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}yn=gn,(mn=pn).prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},mn.prototype.addS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t);return this},mn.prototype.addM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)+t.get(e,n));return this},mn.add=function(t,e){return new yn(t).add(e)},mn.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},mn.prototype.subS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t);return this},mn.prototype.subM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)-t.get(e,n));return this},mn.sub=function(t,e){return new yn(t).sub(e)},mn.prototype.subtract=mn.prototype.sub,mn.prototype.subtractS=mn.prototype.subS,mn.prototype.subtractM=mn.prototype.subM,mn.subtract=mn.sub,mn.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},mn.prototype.mulS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this},mn.prototype.mulM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t.get(e,n));return this},mn.mul=function(t,e){return new yn(t).mul(e)},mn.prototype.multiply=mn.prototype.mul,mn.prototype.multiplyS=mn.prototype.mulS,mn.prototype.multiplyM=mn.prototype.mulM,mn.multiply=mn.mul,mn.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},mn.prototype.divS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t);return this},mn.prototype.divM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)/t.get(e,n));return this},mn.div=function(t,e){return new yn(t).div(e)},mn.prototype.divide=mn.prototype.div,mn.prototype.divideS=mn.prototype.divS,mn.prototype.divideM=mn.prototype.divM,mn.divide=mn.div,mn.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},mn.prototype.modS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t);return this},mn.prototype.modM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)%t.get(e,n));return this},mn.mod=function(t,e){return new yn(t).mod(e)},mn.prototype.modulus=mn.prototype.mod,mn.prototype.modulusS=mn.prototype.modS,mn.prototype.modulusM=mn.prototype.modM,mn.modulus=mn.mod,mn.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},mn.prototype.andS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t);return this},mn.prototype.andM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)&t.get(e,n));return this},mn.and=function(t,e){return new yn(t).and(e)},mn.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},mn.prototype.orS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t);return this},mn.prototype.orM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)|t.get(e,n));return this},mn.or=function(t,e){return new yn(t).or(e)},mn.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},mn.prototype.xorS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t);return this},mn.prototype.xorM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)^t.get(e,n));return this},mn.xor=function(t,e){return new yn(t).xor(e)},mn.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},mn.prototype.leftShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t);return this},mn.prototype.leftShiftM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)<<t.get(e,n));return this},mn.leftShift=function(t,e){return new yn(t).leftShift(e)},mn.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},mn.prototype.signPropagatingRightShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t);return this},mn.prototype.signPropagatingRightShiftM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>t.get(e,n));return this},mn.signPropagatingRightShift=function(t,e){return new yn(t).signPropagatingRightShift(e)},mn.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},mn.prototype.rightShiftS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t);return this},mn.prototype.rightShiftM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)>>>t.get(e,n));return this},mn.rightShift=function(t,e){return new yn(t).rightShift(e)},mn.prototype.zeroFillRightShift=mn.prototype.rightShift,mn.prototype.zeroFillRightShiftS=mn.prototype.rightShiftS,mn.prototype.zeroFillRightShiftM=mn.prototype.rightShiftM,mn.zeroFillRightShift=mn.rightShift,mn.prototype.not=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},mn.not=function(t){return new yn(t).not()},mn.prototype.abs=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},mn.abs=function(t){return new yn(t).abs()},mn.prototype.acos=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},mn.acos=function(t){return new yn(t).acos()},mn.prototype.acosh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},mn.acosh=function(t){return new yn(t).acosh()},mn.prototype.asin=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},mn.asin=function(t){return new yn(t).asin()},mn.prototype.asinh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},mn.asinh=function(t){return new yn(t).asinh()},mn.prototype.atan=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},mn.atan=function(t){return new yn(t).atan()},mn.prototype.atanh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},mn.atanh=function(t){return new yn(t).atanh()},mn.prototype.cbrt=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},mn.cbrt=function(t){return new yn(t).cbrt()},mn.prototype.ceil=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},mn.ceil=function(t){return new yn(t).ceil()},mn.prototype.clz32=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},mn.clz32=function(t){return new yn(t).clz32()},mn.prototype.cos=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},mn.cos=function(t){return new yn(t).cos()},mn.prototype.cosh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},mn.cosh=function(t){return new yn(t).cosh()},mn.prototype.exp=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},mn.exp=function(t){return new yn(t).exp()},mn.prototype.expm1=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},mn.expm1=function(t){return new yn(t).expm1()},mn.prototype.floor=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},mn.floor=function(t){return new yn(t).floor()},mn.prototype.fround=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},mn.fround=function(t){return new yn(t).fround()},mn.prototype.log=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},mn.log=function(t){return new yn(t).log()},mn.prototype.log1p=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},mn.log1p=function(t){return new yn(t).log1p()},mn.prototype.log10=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},mn.log10=function(t){return new yn(t).log10()},mn.prototype.log2=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},mn.log2=function(t){return new yn(t).log2()},mn.prototype.round=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},mn.round=function(t){return new yn(t).round()},mn.prototype.sign=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},mn.sign=function(t){return new yn(t).sign()},mn.prototype.sin=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},mn.sin=function(t){return new yn(t).sin()},mn.prototype.sinh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},mn.sinh=function(t){return new yn(t).sinh()},mn.prototype.sqrt=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},mn.sqrt=function(t){return new yn(t).sqrt()},mn.prototype.tan=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},mn.tan=function(t){return new yn(t).tan()},mn.prototype.tanh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},mn.tanh=function(t){return new yn(t).tanh()},mn.prototype.trunc=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},mn.trunc=function(t){return new yn(t).trunc()},mn.pow=function(t,e){return new yn(t).pow(e)},mn.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},mn.prototype.powS=function(t){for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t));return this},mn.prototype.powM=function(t){if(t=yn.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var n=0;n<this.columns;n++)this.set(e,n,Math.pow(this.get(e,n),t.get(e,n)));return this};var Tn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xn(t,e)}(i,t);var e,n,r,o=wn(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).data=t,e.rows=t.length,e.columns=t[0].length,e}return e=i,(n=[{key:"set",value:function(t,e,n){return this.data[t][e]=n,this}},{key:"get",value:function(t,e){return this.data[t][e]}}])&&_n(e.prototype,n),r&&_n(e,r),i}(pn);function An(t,e){var n=0;return Math.abs(t)>Math.abs(e)?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0!==e?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0}function In(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var On=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(In(this,t),(e=Tn.checkMatrix(e)).isEmpty())throw new Error("Matrix must be non-empty");var r,o=e.rows,i=e.columns,a=n.computeLeftSingularVectors,u=void 0===a||a,s=n.computeRightSingularVectors,c=void 0===s||s,f=n.autoTranspose,l=void 0!==f&&f,h=Boolean(u),d=Boolean(c),p=!1;if(o<i)if(l){o=(r=e.transpose()).rows,i=r.columns,p=!0;var v=h;h=d,d=v}else r=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else r=e.clone();for(var m=Math.min(o,i),y=Math.min(o+1,i),g=new Float64Array(y),b=new gn(o,m),_=new gn(i,i),x=new Float64Array(i),w=new Float64Array(o),E=new Float64Array(y),S=0;S<y;S++)E[S]=S;for(var T=Math.min(o-1,i),A=Math.max(0,Math.min(i-2,o)),I=Math.max(T,A),k=0;k<I;k++){if(k<T){g[k]=0;for(var O=k;O<o;O++)g[k]=An(g[k],r.get(O,k));if(0!==g[k]){r.get(k,k)<0&&(g[k]=-g[k]);for(var D=k;D<o;D++)r.set(D,k,r.get(D,k)/g[k]);r.set(k,k,r.get(k,k)+1)}g[k]=-g[k]}for(var R=k+1;R<i;R++){if(k<T&&0!==g[k]){for(var M=0,C=k;C<o;C++)M+=r.get(C,k)*r.get(C,R);M=-M/r.get(k,k);for(var N=k;N<o;N++)r.set(N,R,r.get(N,R)+M*r.get(N,k))}x[R]=r.get(k,R)}if(h&&k<T)for(var P=k;P<o;P++)b.set(P,k,r.get(P,k));if(k<A){x[k]=0;for(var G=k+1;G<i;G++)x[k]=An(x[k],x[G]);if(0!==x[k]){x[k+1]<0&&(x[k]=0-x[k]);for(var j=k+1;j<i;j++)x[j]/=x[k];x[k+1]+=1}if(x[k]=-x[k],k+1<o&&0!==x[k]){for(var L=k+1;L<o;L++)w[L]=0;for(var U=k+1;U<o;U++)for(var B=k+1;B<i;B++)w[U]+=x[B]*r.get(U,B);for(var F=k+1;F<i;F++)for(var z=-x[F]/x[k+1],V=k+1;V<o;V++)r.set(V,F,r.get(V,F)+z*w[V])}if(d)for(var W=k+1;W<i;W++)_.set(W,k,x[W])}}var X=Math.min(i,o+1);if(T<i&&(g[T]=r.get(T,T)),o<X&&(g[X-1]=0),A+1<X&&(x[A]=r.get(A,X-1)),x[X-1]=0,h){for(var H=T;H<m;H++){for(var q=0;q<o;q++)b.set(q,H,0);b.set(H,H,1)}for(var Y=T-1;Y>=0;Y--)if(0!==g[Y]){for(var K=Y+1;K<m;K++){for(var Z=0,Q=Y;Q<o;Q++)Z+=b.get(Q,Y)*b.get(Q,K);Z=-Z/b.get(Y,Y);for(var J=Y;J<o;J++)b.set(J,K,b.get(J,K)+Z*b.get(J,Y))}for(var $=Y;$<o;$++)b.set($,Y,-b.get($,Y));b.set(Y,Y,1+b.get(Y,Y));for(var tt=0;tt<Y-1;tt++)b.set(tt,Y,0)}else{for(var et=0;et<o;et++)b.set(et,Y,0);b.set(Y,Y,1)}}if(d)for(var nt=i-1;nt>=0;nt--){if(nt<A&&0!==x[nt])for(var rt=nt+1;rt<i;rt++){for(var ot=0,it=nt+1;it<i;it++)ot+=_.get(it,nt)*_.get(it,rt);ot=-ot/_.get(nt+1,nt);for(var at=nt+1;at<i;at++)_.set(at,rt,_.get(at,rt)+ot*_.get(at,nt))}for(var ut=0;ut<i;ut++)_.set(ut,nt,0);_.set(nt,nt,1)}for(var st=X-1,ct=Number.EPSILON;X>0;){var ft=void 0,lt=void 0;for(ft=X-2;ft>=-1&&-1!==ft;ft--){var ht=Number.MIN_VALUE+ct*Math.abs(g[ft]+Math.abs(g[ft+1]));if(Math.abs(x[ft])<=ht||Number.isNaN(x[ft])){x[ft]=0;break}}if(ft===X-2)lt=4;else{var dt=void 0;for(dt=X-1;dt>=ft&&dt!==ft;dt--){var pt=(dt!==X?Math.abs(x[dt]):0)+(dt!==ft+1?Math.abs(x[dt-1]):0);if(Math.abs(g[dt])<=ct*pt){g[dt]=0;break}}dt===ft?lt=3:dt===X-1?lt=1:(lt=2,ft=dt)}switch(ft++,lt){case 1:var vt=x[X-2];x[X-2]=0;for(var mt=X-2;mt>=ft;mt--){var yt=An(g[mt],vt),gt=g[mt]/yt,bt=vt/yt;if(g[mt]=yt,mt!==ft&&(vt=-bt*x[mt-1],x[mt-1]=gt*x[mt-1]),d)for(var _t=0;_t<i;_t++)yt=gt*_.get(_t,mt)+bt*_.get(_t,X-1),_.set(_t,X-1,-bt*_.get(_t,mt)+gt*_.get(_t,X-1)),_.set(_t,mt,yt)}break;case 2:var xt=x[ft-1];x[ft-1]=0;for(var wt=ft;wt<X;wt++){var Et=An(g[wt],xt),St=g[wt]/Et,Tt=xt/Et;if(g[wt]=Et,xt=-Tt*x[wt],x[wt]=St*x[wt],h)for(var At=0;At<o;At++)Et=St*b.get(At,wt)+Tt*b.get(At,ft-1),b.set(At,ft-1,-Tt*b.get(At,wt)+St*b.get(At,ft-1)),b.set(At,wt,Et)}break;case 3:var It=Math.max(Math.abs(g[X-1]),Math.abs(g[X-2]),Math.abs(x[X-2]),Math.abs(g[ft]),Math.abs(x[ft])),kt=g[X-1]/It,Ot=g[X-2]/It,Dt=x[X-2]/It,Rt=g[ft]/It,Mt=x[ft]/It,Ct=((Ot+kt)*(Ot-kt)+Dt*Dt)/2,Nt=kt*Dt*(kt*Dt),Pt=0;0===Ct&&0===Nt||(Pt=Nt/(Ct+(Pt=Ct<0?0-Math.sqrt(Ct*Ct+Nt):Math.sqrt(Ct*Ct+Nt))));for(var Gt=(Rt+kt)*(Rt-kt)+Pt,jt=Rt*Mt,Lt=ft;Lt<X-1;Lt++){var Ut=An(Gt,jt);0===Ut&&(Ut=Number.MIN_VALUE);var Bt=Gt/Ut,Ft=jt/Ut;if(Lt!==ft&&(x[Lt-1]=Ut),Gt=Bt*g[Lt]+Ft*x[Lt],x[Lt]=Bt*x[Lt]-Ft*g[Lt],jt=Ft*g[Lt+1],g[Lt+1]=Bt*g[Lt+1],d)for(var zt=0;zt<i;zt++)Ut=Bt*_.get(zt,Lt)+Ft*_.get(zt,Lt+1),_.set(zt,Lt+1,-Ft*_.get(zt,Lt)+Bt*_.get(zt,Lt+1)),_.set(zt,Lt,Ut);if(0===(Ut=An(Gt,jt))&&(Ut=Number.MIN_VALUE),Bt=Gt/Ut,Ft=jt/Ut,g[Lt]=Ut,Gt=Bt*x[Lt]+Ft*g[Lt+1],g[Lt+1]=-Ft*x[Lt]+Bt*g[Lt+1],jt=Ft*x[Lt+1],x[Lt+1]=Bt*x[Lt+1],h&&Lt<o-1)for(var Vt=0;Vt<o;Vt++)Ut=Bt*b.get(Vt,Lt)+Ft*b.get(Vt,Lt+1),b.set(Vt,Lt+1,-Ft*b.get(Vt,Lt)+Bt*b.get(Vt,Lt+1)),b.set(Vt,Lt,Ut)}x[X-2]=Gt,1;break;case 4:if(g[ft]<=0&&(g[ft]=g[ft]<0?-g[ft]:0,d))for(var Wt=0;Wt<=st;Wt++)_.set(Wt,ft,-_.get(Wt,ft));for(;ft<st&&!(g[ft]>=g[ft+1]);){var Xt=g[ft];if(g[ft]=g[ft+1],g[ft+1]=Xt,d&&ft<i-1)for(var Ht=0;Ht<i;Ht++)Xt=_.get(Ht,ft+1),_.set(Ht,ft+1,_.get(Ht,ft)),_.set(Ht,ft,Xt);if(h&&ft<o-1)for(var qt=0;qt<o;qt++)Xt=b.get(qt,ft+1),b.set(qt,ft+1,b.get(qt,ft)),b.set(qt,ft,Xt);ft++}0,X--}}if(p){var Yt=_;_=b,b=Yt}this.m=o,this.n=i,this.s=g,this.U=b,this.V=_}var e,n,r;return e=t,(n=[{key:"solve",value:function(t){for(var e=t,n=this.threshold,r=this.s.length,o=gn.zeros(r,r),i=0;i<r;i++)Math.abs(this.s[i])<=n?o.set(i,i,0):o.set(i,i,1/this.s[i]);for(var a=this.U,u=this.rightSingularVectors,s=u.mmul(o),c=u.rows,f=a.rows,l=gn.zeros(c,f),h=0;h<c;h++)for(var d=0;d<f;d++){for(var p=0,v=0;v<r;v++)p+=s.get(h,v)*a.get(d,v);l.set(h,d,p)}return l.mmul(e)}},{key:"solveForDiagonal",value:function(t){return this.solve(gn.diag(t))}},{key:"inverse",value:function(){for(var t=this.V,e=this.threshold,n=t.rows,r=t.columns,o=new gn(n,this.s.length),i=0;i<n;i++)for(var a=0;a<r;a++)Math.abs(this.s[a])>e&&o.set(i,a,t.get(i,a)/this.s[a]);for(var u=this.U,s=u.rows,c=u.columns,f=new gn(n,s),l=0;l<n;l++)for(var h=0;h<s;h++){for(var d=0,p=0;p<c;p++)d+=o.get(l,p)*u.get(h,p);f.set(l,h,d)}return f}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,n=this.s,r=0,o=n.length;r<o;r++)n[r]>t&&e++;return e}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return gn.diag(this.s)}}])&&kn(e.prototype,n),r&&kn(e,r),t}();function Dn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Rn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.distances=e.distances,this.dimension=e.dimension||2,this.linkDistance=e.linkDistance}var e,n,r;return e=t,(n=[{key:"layout",value:function(){var t=this.dimension,e=this.distances,n=this.linkDistance;try{var r=gn.mul(gn.pow(e,2),-.5),o=r.mean("row"),i=r.mean("column"),a=r.mean();r.add(a).subRowVector(o).subColumnVector(i);var u=new On(r),s=gn.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map((function(e){return gn.mul([e],[s]).toJSON()[0].splice(0,t)}))}catch(t){for(var c=[],f=0;f<e.length;f++){var l=Math.random()*n,h=Math.random()*n;c.push([l,h])}return c}}}])&&Dn(e.prototype,n),r&&Dn(e,r),t}();function Mn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Cn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.disp=[],this.positions=e.positions,this.adjMatrix=e.adjMatrix,this.focusID=e.focusID,this.radii=e.radii,this.iterations=e.iterations||10,this.height=e.height||10,this.width=e.width||10,this.speed=e.speed||100,this.gravity=e.gravity||10,this.nodeSizeFunc=e.nodeSizeFunc,this.k=e.k||5,this.strictRadial=e.strictRadial,this.nodes=e.nodes}var e,n,r;return e=t,(n=[{key:"layout",value:function(){var t=this.positions,e=[],n=this.iterations,r=this.width/10;this.maxDisplace=r,this.disp=e;for(var o=0;o<n;o++)t.forEach((function(t,n){e[n]={x:0,y:0}})),this.getRepulsion(),this.updatePositions();return t}},{key:"getRepulsion",value:function(){var t=this,e=t.positions,n=t.nodes,r=t.disp,o=t.k,i=t.radii||[];e.forEach((function(a,u){r[u]={x:0,y:0},e.forEach((function(e,s){if(u!==s&&i[u]===i[s]){var c=a[0]-e[0],f=a[1]-e[1],l=Math.sqrt(c*c+f*f);if(0===l){l=1;var h=u>s?1:-1;c=.01*h,f=.01*h}if(l<t.nodeSizeFunc(n[u])/2+t.nodeSizeFunc(n[s])/2){var d=o*o/l;r[u].x+=c/l*d,r[u].y+=f/l*d}}}))}))}},{key:"updatePositions",value:function(){var t=this.positions,e=this.disp,n=this.speed,r=this.strictRadial,o=this.focusID,i=this.maxDisplace||this.width/10;r&&e.forEach((function(e,n){var r=t[n][0]-t[o][0],i=t[n][1]-t[o][1],a=Math.sqrt(r*r+i*i),u=i/a,s=-r/a,c=Math.sqrt(e.x*e.x+e.y*e.y),f=Math.acos((u*e.x+s*e.y)/c);f>Math.PI/2&&(f-=Math.PI/2,u*=-1,s*=-1);var l=Math.cos(f)*c;e.x=u*l,e.y=s*l}));var a=this.radii;t.forEach((function(u,s){if(s!==o){var c=Math.sqrt(e[s].x*e[s].x+e[s].y*e[s].y);if(c>0&&s!==o){var f=Math.min(i*(n/800),c);if(u[0]+=e[s].x/c*f,u[1]+=e[s].y/c*f,r){var l=u[0]-t[o][0],h=u[1]-t[o][1],d=Math.sqrt(l*l+h*h);l=l/d*a[s],h=h/d*a[s],u[0]=t[o][0]+l,u[1]=t[o][1]+h}}}}))}}])&&Mn(e.prototype,n),r&&Mn(e,r),t}();function Nn(t){return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pn(t){return function(t){if(Array.isArray(t))return Gn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Gn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gn(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ln(t,e){return(Ln=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Un(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Fn(t);if(e){var o=Fn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Bn(this,n)}}function Bn(t,e){return!e||"object"!==Nn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Fn(t){return(Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zn(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var Vn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ln(t,e)}(i,t);var e,n,r,o=Un(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.focusNode=null,e.unitRadius=null,e.linkDistance=50,e.preventOverlap=!1,e.strictRadial=!0,e.maxPreventOverlapIteration=200,e.sortStrength=10,e.nodes=[],e.edges=[],e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=t.edges||[];if(e&&0!==e.length){t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var r=t.center;if(1===e.length)return e[0].x=r[0],e[0].y=r[1],void(t.onLayoutEnd&&t.onLayoutEnd());var o=t.linkDistance,i=null;if(p(t.focusNode)){for(var a=!1,u=0;u<e.length;u++)e[u].id===t.focusNode&&(i=e[u],t.focusNode=i,a=!0,u=e.length);a||(i=null)}else i=t.focusNode;i||(i=e[0],t.focusNode=i);var s,c,f,l=(s=e,c=i.id,f=-1,s.forEach((function(t,e){t.id===c&&(f=e)})),f);t.focusIndex=l;var h=x({nodes:e,edges:n},!1),d=_(h),v=t.maxToFocus(d,l);t.handleInfinity(d,l,v+1),t.distances=d;var b=d[l],w=t.width||500,E=t.height||500,S=w-r[0]>r[0]?r[0]:w-r[0],A=E-r[1]>r[1]?r[1]:E-r[1];0===S&&(S=w/2),0===A&&(A=E/2);var I=A>S?S:A,k=Math.max.apply(Math,Pn(b)),O=[];b.forEach((function(e,n){t.unitRadius||(t.unitRadius=I/k),O[n]=e*t.unitRadius})),t.radii=O;var D=t.eIdealDisMatrix();t.eIdealDistances=D;var R=function(t){for(var e=t.length,n=t[0].length,r=[],o=0;o<e;o++){for(var i=[],a=0;a<n;a++)0!==t[o][a]?i.push(1/(t[o][a]*t[o][a])):i.push(0);r.push(i)}return r}(D);t.weights=R;var M=new Rn({linkDistance:o,distances:D}).layout();M.forEach((function(t){g(t[0])&&(t[0]=Math.random()*o),g(t[1])&&(t[1]=Math.random()*o)})),t.positions=M,M.forEach((function(t,n){e[n].x=t[0]+r[0],e[n].y=t[1]+r[1]})),M.forEach((function(t){t[0]-=M[l][0],t[1]-=M[l][1]})),t.run();var C,N=t.preventOverlap,P=t.nodeSize,G=t.strictRadial;if(N){var j,L=t.nodeSpacing;j=y(L)?function(){return L}:T(L)?L:function(){return 0},C=P?m(P)?function(t){return(P[0]>P[1]?P[0]:P[1])+j(t)}:function(t){return P+j(t)}:function(t){return t.size?m(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])+j(t):t.size+j(t):10+j(t)};var U={nodes:e,nodeSizeFunc:C,adjMatrix:h,positions:M,radii:O,height:E,width:w,strictRadial:G,focusID:l,iterations:t.maxPreventOverlapIteration||200,k:M.length/4.5},B=new Cn(U);M=B.layout()}return M.forEach((function(t,n){e[n].x=t[0]+r[0],e[n].y=t[1]+r[1]})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}t.onLayoutEnd&&t.onLayoutEnd()}},{key:"run",value:function(){for(var t=this.maxIteration,e=this.positions||[],n=this.weights||[],r=this.eIdealDistances||[],o=this.radii||[],i=0;i<=t;i++){var a=i/t;this.oneIteration(a,e,o,r,n)}}},{key:"oneIteration",value:function(t,e,n,r,o){var i=1-t,a=this.focusIndex;e.forEach((function(u,s){var c=zn(u,[0,0]),f=0===c?0:1/c;if(s!==a){var l=0,h=0,d=0;e.forEach((function(t,e){if(s!==e){var n=zn(u,t),i=0===n?0:1/n,a=r[e][s];d+=o[s][e],l+=o[s][e]*(t[0]+a*(u[0]-t[0])*i),h+=o[s][e]*(t[1]+a*(u[1]-t[1])*i)}}));var p=0===n[s]?0:1/n[s];d*=i,d+=t*p*p,l*=i,l+=t*p*u[0]*f,u[0]=l/d,h*=i,h+=t*p*u[1]*f,u[1]=h/d}}))}},{key:"eIdealDisMatrix",value:function(){var t=this,e=t.nodes;if(!e)return[];var n=t.distances,r=t.linkDistance,o=t.radii||[],i=t.unitRadius||50,a=[];return n&&n.forEach((function(n,u){var s=[];n.forEach((function(n,a){if(u===a)s.push(0);else if(o[u]===o[a])if("data"===t.sortBy)s.push(n*(Math.abs(u-a)*t.sortStrength)/(o[u]/i));else if(t.sortBy){var c=e[u][t.sortBy]||0,f=e[a][t.sortBy]||0;p(c)&&(c=c.charCodeAt(0)),p(f)&&(f=f.charCodeAt(0)),s.push(n*(Math.abs(c-f)*t.sortStrength)/(o[u]/i))}else s.push(n*r/(o[u]/i));else{var l=(r+i)/2;s.push(n*l)}})),a.push(s)})),a}},{key:"handleInfinity",value:function(t,e,n){for(var r=t.length,o=0;o<r;o++)if(t[e][o]===1/0){t[e][o]=n,t[o][e]=n;for(var i=0;i<r;i++)t[o][i]!==1/0&&t[e][i]===1/0&&(t[e][i]=n+t[o][i],t[i][e]=n+t[o][i])}for(var a=0;a<r;a++)if(a!==e)for(var u=0;u<r;u++)if(t[a][u]===1/0){var s=Math.abs(t[e][a]-t[e][u]);s=0===s?1:s,t[a][u]=s}}},{key:"maxToFocus",value:function(t,e){for(var n=0,r=0;r<t[e].length;r++)t[e][r]!==1/0&&(n=t[e][r]>n?t[e][r]:n);return n}},{key:"getType",value:function(){return"radial"}}])&&jn(e.prototype,n),r&&jn(e,r),i}(I);function Wn(t){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xn(t,e){return(Xn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Hn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Kn(t);if(e){var o=Kn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qn(this,n)}}function qn(t,e){return!e||"object"!==Wn(e)&&"function"!=typeof e?Yn(t):e}function Yn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kn(t){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zn=new Map,Qn=function(t,e){if(Zn.get(t)&&console.warn("The layout with the name ".concat(t," exists already, it will be overridden")),null!==(r=e)&&"object"===E(r)){var n=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xn(t,e)}(r,t);var n=Hn(r);function r(t){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var i=Yn(o=n.call(this)),a={},u=i.getDefaultCfg();return Object.assign(a,u,e,t),Object.keys(a).forEach((function(t){var e=a[t];i[t]=e})),o}return r}(I);Zn.set(t,n)}else Zn.set(t,e);var r},Jn=function(t){return Zn.has(t)?Zn.get(t):null};function $n(t){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function er(t,e){return(er=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=or(t);if(e){var o=or(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return rr(this,n)}}function rr(t,e){return!e||"object"!==$n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function or(t){return(or=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ir=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&er(t,e)}(i,t);var e,n,r,o=nr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).nodeSize=30,e.minNodeSpacing=10,e.preventOverlap=!1,e.equidistant=!1,e.startAngle=1.5*Math.PI,e.clockwise=!0,e.sortBy="degree",e.nodes=[],e.edges=[],e.width=300,e.height=300,e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}},{key:"execute",value:function(){var t=this,e=t.nodes,n=t.edges,r=e.length;if(0!==r){t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var o=t.center;if(1===r)return e[0].x=o[0],e[0].y=o[1],void(t.onLayoutEnd&&t.onLayoutEnd());var i,a=[];i=m(t.nodeSize)?Math.max(t.nodeSize[0],t.nodeSize[1]):t.nodeSize,e.forEach((function(t){a.push(t);var e=i;m(t.size)?e=Math.max(t.size[0],t.size[1]):y(t.size)&&(e=t.size),i=Math.max(i,e)})),t.clockwise=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise;var u={},s={};if(a.forEach((function(t,e){u[t.id]=t,s[t.id]=e})),!("degree"!==t.sortBy&&p(t.sortBy)&&void 0!==a[0][t.sortBy]||(t.sortBy="degree",y(e[0].degree)))){var c=b(e.length,s,n);a.forEach((function(t,e){t.degree=c[e]}))}a.sort((function(e,n){return n[t.sortBy]-e[t.sortBy]})),t.maxValueNode=a[0],t.maxLevelDiff=t.maxLevelDiff||t.maxValueNode[t.sortBy]/4;var f=[[]],l=f[0];a.forEach((function(e){if(l.length>0){var n=Math.abs(l[0][t.sortBy]-e[t.sortBy]);t.maxLevelDiff&&n>=t.maxLevelDiff&&(l=[],f.push(l))}l.push(e)}));var h=i+t.minNodeSpacing;if(!t.preventOverlap){var d=f.length>0&&f[0].length>1,v=(Math.min(t.width,t.height)/2-h)/(f.length+(d?1:0));h=Math.min(h,v)}var g=0;if(f.forEach((function(e){var n=t.sweep;void 0===n&&(n=2*Math.PI-2*Math.PI/e.length);var r=e.dTheta=n/Math.max(1,e.length-1);if(e.length>1&&t.preventOverlap){var o=Math.cos(r)-Math.cos(0),i=Math.sin(r)-Math.sin(0),a=Math.sqrt(h*h/(o*o+i*i));g=Math.max(a,g)}e.r=g,g+=h})),t.equidistant){for(var _=0,x=0,w=0;w<f.length;w++){var E=f[w].r-x;_=Math.max(_,E)}x=0,f.forEach((function(t,e){0===e&&(x=t.r),t.r=x,x+=_}))}return f.forEach((function(e){var n=e.dTheta,r=e.r;e.forEach((function(e,i){var a=t.startAngle+(t.clockwise?1:-1)*n*i;e.x=o[0]+r*Math.cos(a),e.y=o[1]+r*Math.sin(a)}))})),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}t.onLayoutEnd&&t.onLayoutEnd()}},{key:"getType",value:function(){return"concentric"}}])&&tr(e.prototype,n),r&&tr(e,r),i}(I);function ar(t){return(ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sr(t,e){return(sr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=lr(t);if(e){var o=lr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fr(this,n)}}function fr(t,e){return!e||"object"!==ar(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lr(t){return(lr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sr(t,e)}(i,t);var e,n,r,o=cr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).center=[0,0],e.linkDistance=50,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{center:[0,0],linkDistance:50}}},{key:"execute",value:function(){var t=this.nodes,e=this.edges,n=void 0===e?[]:e,r=this.center;if(t&&0!==t.length){if(1===t.length)return t[0].x=r[0],t[0].y=r[1],void(this.onLayoutEnd&&this.onLayoutEnd());var o=this.linkDistance,i=x({nodes:t,edges:n},!1),a=_(i);this.handleInfinity(a);var u,s,c=(u=o,s=[],a.forEach((function(t){var e=[];t.forEach((function(t){e.push(t*u)})),s.push(e)})),s);this.scaledDistances=c;var f=this.runMDS();return this.positions=f,f.forEach((function(e,n){t[n].x=e[0]+r[0],t[n].y=e[1]+r[1]})),this.onLayoutEnd&&this.onLayoutEnd(),{nodes:t,edges:n}}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"runMDS",value:function(){var t=this.scaledDistances,e=gn.mul(gn.pow(t,2),-.5),n=e.mean("row"),r=e.mean("column"),o=e.mean();e.add(o).subRowVector(n).subColumnVector(r);var i=new On(e),a=gn.sqrt(i.diagonalMatrix).diagonal();return i.leftSingularVectors.toJSON().map((function(t){return gn.mul([t],[a]).toJSON()[0].splice(0,2)}))}},{key:"handleInfinity",value:function(t){var e=-999999;t.forEach((function(t){t.forEach((function(t){t!==1/0&&e<t&&(e=t)}))})),t.forEach((function(n,r){n.forEach((function(n,o){n===1/0&&(t[r][o]=e)}))}))}},{key:"getType",value:function(){return"mds"}}])&&ur(e.prototype,n),r&&ur(e,r),i}(I);function dr(t){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vr(t,e){return(vr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=gr(t);if(e){var o=gr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return yr(this,n)}}function yr(t,e){return!e||"object"!==dr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gr(t){return(gr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var br=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vr(t,e)}(i,t);var e,n,r,o=mr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.gravity=10,e.speed=1,e.clustering=!1,e.clusterGravity=10,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.onLayoutEnd=function(){},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){var t=this,e=this.nodes;if(e&&0!==e.length){this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var n=this.center;if(1===e.length)return e[0].x=n[0],e[0].y=n[1],void(this.onLayoutEnd&&this.onLayoutEnd());var r={},o={};return e.forEach((function(e,n){y(e.x)||(e.x=Math.random()*t.width),y(e.y)||(e.y=Math.random()*t.height),r[e.id]=e,o[e.id]=n})),this.nodeMap=r,this.nodeIdxMap=o,this.run()}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"run",value:function(){var t=this,e=t.nodes,n=t.edges,r=t.maxIteration,o=t.center,i=t.height*t.width,a=Math.sqrt(i)/10,u=i/(e.length+1),s=Math.sqrt(u),c=t.gravity,f=t.speed,l=t.clustering,h={};if(l)for(var d in e.forEach((function(t){if(void 0===h[t.cluster]){var e={name:t.cluster,cx:0,cy:0,count:0};h[t.cluster]=e}var n=h[t.cluster];y(t.x)&&(n.cx+=t.x),y(t.y)&&(n.cy+=t.y),n.count++})),h)h[d].cx/=h[d].count,h[d].cy/=h[d].count;for(var p=function(r){var i=[];if(e.forEach((function(t,e){i[e]={x:0,y:0}})),t.applyCalculate(e,n,i,s,u),l){var d=t.clusterGravity||c;for(var p in e.forEach((function(t,e){if(y(t.x)&&y(t.y)){var n=h[t.cluster],r=Math.sqrt((t.x-n.cx)*(t.x-n.cx)+(t.y-n.cy)*(t.y-n.cy)),o=s*d;i[e].x-=o*(t.x-n.cx)/r,i[e].y-=o*(t.y-n.cy)/r}})),h)h[p].cx=0,h[p].cy=0,h[p].count=0;for(var v in e.forEach((function(t){var e=h[t.cluster];y(t.x)&&(e.cx+=t.x),y(t.y)&&(e.cy+=t.y),e.count++})),h)h[v].cx/=h[v].count,h[v].cy/=h[v].count}e.forEach((function(t,e){if(y(t.x)&&y(t.y)){var n=.01*s*c;i[e].x-=n*(t.x-o[0]),i[e].y-=n*(t.y-o[1])}})),e.forEach((function(t,e){if(y(t.x)&&y(t.y)){var n=Math.sqrt(i[e].x*i[e].x+i[e].y*i[e].y);if(n>0){var r=Math.min(a*(f/800),n);t.x+=i[e].x/n*r,t.y+=i[e].y/n*r}}}))},v=0;v<r;v++)p();return t.onLayoutEnd&&t.onLayoutEnd(),{nodes:e,edges:n}}},{key:"applyCalculate",value:function(t,e,n,r,o){this.calRepulsive(t,n,o),this.calAttractive(e,n,r)}},{key:"calRepulsive",value:function(t,e,n){t.forEach((function(r,o){e[o]={x:0,y:0},t.forEach((function(t,i){if(o!==i&&y(r.x)&&y(t.x)&&y(r.y)&&y(t.y)){var a=r.x-t.x,u=r.y-t.y,s=a*a+u*u;if(0===s){s=1;var c=o>i?1:-1;a=.01*c,u=.01*c}var f=n/s;e[o].x+=a*f,e[o].y+=u*f}}))}))}},{key:"calAttractive",value:function(t,e,n){var r=this;t.forEach((function(t){if(t.source&&t.target){var o=r.nodeIdxMap[t.source],i=r.nodeIdxMap[t.target];if(o!==i){var a=r.nodeMap[t.source],u=r.nodeMap[t.target];if(y(u.x)&&y(a.x)&&y(u.y)&&y(a.y)){var s=u.x-a.x,c=u.y-a.y,f=Math.sqrt(s*s+c*c),l=f*f/n;e[i].x-=s/f*l,e[i].y-=c/f*l,e[o].x+=s/f*l,e[o].y+=c/f*l}}}}))}},{key:"getType",value:function(){return"fruchterman"}}])&&pr(e.prototype,n),r&&pr(e,r),i}(I),_r=n(6),xr=n.n(_r),wr=n(2),Er=n.n(wr),Sr=n(4),Tr=n.n(Sr),Ar=n(7),Ir=n.n(Ar),kr=(n(16),n(159),n(5)),Or=n.n(kr),Dr=n(8),Rr=n.n(Dr),Mr=1;function Cr(){return Mr++}var Nr=function t(e){Er()(this,t)},Pr=function(){function t(e){Er()(this,t),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=e}var e;return Tr()(t,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(t){return this.lookup[t]>-1}},{key:"create",value:function(t,e){this.lookup[t]=this.components.length;var n=new this.clazz(e||{});return this.components.push(n),this.entities.push(t),n}},{key:"remove",value:function(t){var e=this.lookup[t];e>-1&&e<this.components.length-1&&(this.components[e]=this.components[this.components.length-1],this.entities[e]=this.entities[this.entities.length-1],this.lookup[this.entities[e]]=e),this.components.pop(),this.entities.pop(),delete this.lookup[t]}},{key:"removeKeepSorted",value:function(t){var e=this.lookup[t];if(e>-1){var n=this.entities[e];if(e<this.components.length-1){for(var r=e+1;r<this.components.length;++r)this.components[r-1]=this.components[r];for(var o=e+1;o<this.entities.length;++o)this.entities[o-1]=this.entities[o],this.lookup[this.entities[o-1]]=o-1}this.components.pop(),this.entities.pop(),delete this.lookup[n]}}},{key:"moveItem",value:function(t,e){if(t!==e){for(var n=this.components[t],r=this.entities[t],o=t<e?1:-1,i=t;i!==e;i+=o){var a=i+o;this.components[i]=this.components[a],this.entities[i]=this.entities[a],this.lookup[this.entities[i]]=i}this.components[e]=n,this.entities[e]=r,this.lookup[r]=e}}},{key:"getEntity",value:function(t){return this.entities[t]}},{key:"getComponent",value:function(t){return this.components[t]}},{key:"getComponentByEntity",value:function(t){var e=this.lookup[t];return e>-1?this.components[e]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(t){for(var e=0,n=Object.keys(this.lookup);e<n.length;e++){var r=n[e],o=Number(r);if(this.lookup[o]===t)return o}return-1}},{key:"find",value:function(t){for(var e=0;e<this.getCount();e++){var n=this.getComponent(e);if(t(n,e))return n}return null}},{key:"findIndex",value:function(t){for(var e=0;e<this.getCount();e++){if(t(this.getComponent(e),e))return e}return-1}},{key:"forEach",value:function(t){for(var e=0,n=Object.keys(this.lookup);e<n.length;e++){var r=n[e],o=Number(r),i=this.lookup[o];t(o,this.getComponent(i))}}},{key:"forEachAsync",value:(e=Rr()(Or.a.mark((function t(e){var n,r,o,i,a;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=0,r=Object.keys(this.lookup);case 1:if(!(n<r.length)){t.next=10;break}return o=r[n],i=Number(o),a=this.lookup[i],t.next=7,e(i,this.getComponent(a));case 7:n++,t.next=1;break;case 10:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"map",value:function(t){for(var e=[],n=0,r=Object.keys(this.lookup);n<r.length;n++){var o=r[n],i=Number(o),a=this.lookup[i];e.push(t(i,this.getComponent(a)))}return e}}]),t}(),Gr=n(34),jr=n.n(Gr),Lr=n(1),Ur={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")},Br=function t(){Er()(this,t),this.index=void 0},Fr=function t(){Er()(this,t),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},zr=function(){function t(){Er()(this,t),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return Tr()(t,[{key:"read",value:function(t){return this.reads.find((function(e){return e.index===t.index}))||this.reads.push(t),t}},{key:"sample",value:function(t){return this.read(t),t}},{key:"write",value:function(t,e){if(this.writes.find((function(t){return t.index===e.index})))return e;var n=t.getResourceNode(e);n.resource.version++,n.resource.imported&&(this.hasSideEffect=!0);var r=t.createResourceNode(n.resource);return t.getResourceNode(r).writer=this,this.writes.push(r),r}}]),t}(),Vr=n(14),Wr=n.n(Vr),Xr=n(15),Hr=n.n(Xr),qr=n(9),Yr=n.n(qr);function Kr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Zr,Qr,Jr,$r,to,eo=function(t){Wr()(n,t);var e=Kr(n);function n(){var t;Er()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).version=0,t.refs=0,t.name=void 0,t.imported=void 0,t.priority=void 0,t.discardStart=!0,t.discardEnd=!1,t.descriptor=void 0,t.resource=void 0,t}return Tr()(n,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){this.imported}}]),n}((function t(){Er()(this,t),this.first=void 0,this.last=void 0})),no=function t(){Er()(this,t),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0};function ro(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return oo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oo(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function oo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var io=(Zr=Object(Lr.injectable)(),Qr=Object(Lr.inject)(Ur.RenderEngine),Zr(($r=function(){function t(){Er()(this,t),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],xr()(this,"engine",to,this)}var e,n;return Tr()(t,[{key:"execute",value:(n=Rr()(Or.a.mark((function t(e){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.compile(),t.next=3,this.executePassNodes(e);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"tearDown",value:function(){this.frameGraphPasses.forEach((function(t){t.tearDown&&t.tearDown()})),this.reset()}},{key:"addPass",value:function(t,e,n,r){var o=new Fr;o.execute=n,r&&(o.tearDown=r),o.name=t;var i=new zr;return i.name=t,this.passNodes.push(i),this.frameGraphPasses.push(o),e(this,i,o),o}},{key:"getPass",value:function(t){return this.frameGraphPasses.find((function(e){return e.name===t}))}},{key:"compile",value:function(){var t,e=this,n=ro(this.passNodes);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.refCount=r.writes.length+(r.hasSideEffect?1:0),r.reads.forEach((function(t){e.resourceNodes[t.index].readerCount++}))}}catch(t){n.e(t)}finally{n.f()}var o,i=[],a=ro(this.resourceNodes);try{for(a.s();!(o=a.n()).done;){var u=o.value;0===u.readerCount&&i.push(u)}}catch(t){a.e(t)}finally{a.f()}for(;i.length;){var s=i.pop(),c=s&&s.writer;if(c&&0==--c.refCount){var f,l=ro(c.reads);try{for(l.s();!(f=l.n()).done;){var h=f.value,d=this.resourceNodes[h.index];0==--d.readerCount&&i.push(d)}}catch(t){l.e(t)}finally{l.f()}}}this.resourceNodes.forEach((function(t){t.resource.refs+=t.readerCount}));var p,v=ro(this.passNodes);try{for(v.s();!(p=v.n()).done;){var m=p.value;if(m.refCount){var y,g=ro(m.reads);try{for(g.s();!(y=g.n()).done;){var b=y.value,_=this.resourceNodes[b.index].resource;_.first=_.first?_.first:m,_.last=m}}catch(t){g.e(t)}finally{g.f()}var x,w=ro(m.writes);try{for(w.s();!(x=w.n()).done;){var E=x.value,S=this.resourceNodes[E.index].resource;S.first=S.first?S.first:m,S.last=m}}catch(t){w.e(t)}finally{w.f()}}}}catch(t){v.e(t)}finally{v.f()}for(var T=0;T<2;T++){var A,I=ro(this.resourceNodes);try{for(I.s();!(A=I.n()).done;){var k=A.value.resource;if(k.priority===T&&k.refs){var O=k.first,D=k.last;O&&D&&(O.devirtualize.push(k),D.destroy.push(k))}}}catch(t){I.e(t)}finally{I.f()}}}},{key:"executePassNodes",value:(e=Rr()(Or.a.mark((function t(e){var n,r,o,i,a,u,s,c,f,l,h,d,p;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=ro(this.passNodes.entries()),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=18;break}if(o=jr()(r.value,2),i=o[0],!(a=o[1]).refCount){t.next=16;break}u=ro(a.devirtualize);try{for(u.s();!(s=u.n()).done;)s.value.preExecuteDevirtualize(this.engine)}catch(t){u.e(t)}finally{u.f()}c=ro(a.destroy);try{for(c.s();!(f=c.n()).done;)f.value.preExecuteDestroy(this.engine)}catch(t){c.e(t)}finally{c.f()}return t.next=12,this.frameGraphPasses[i].execute(this,this.frameGraphPasses[i],e);case 12:l=ro(a.devirtualize);try{for(l.s();!(h=l.n()).done;)h.value.postExecuteDevirtualize(this.engine)}catch(t){l.e(t)}finally{l.f()}d=ro(a.destroy);try{for(d.s();!(p=d.n()).done;)p.value.postExecuteDestroy(this.engine)}catch(t){d.e(t)}finally{d.f()}case 16:t.next=3;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(1),n.e(t.t0);case 23:return t.prev=23,n.f(),t.finish(23);case 26:this.reset();case 27:case"end":return t.stop()}}),t,this,[[1,20,23,26]])}))),function(t){return e.apply(this,arguments)})},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(t){return this.resourceNodes[t.index]}},{key:"createResourceNode",value:function(t){var e=new no;e.resource=t,e.version=t.version,this.resourceNodes.push(e);var n=new Br;return n.index=this.resourceNodes.length-1,n}},{key:"createTexture",value:function(t,e,n){var r=new eo;return r.name=e,r.descriptor=n,this.createResourceNode(r)}},{key:"createRenderTarget",value:function(t,e,n){var r=new eo;return r.name=e,r.descriptor=n,this.createResourceNode(r)}},{key:"present",value:function(t){this.addPass("Present",(function(e,n){n.read(t),n.hasSideEffect=!0}),Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))))}}]),t}(),to=Ir()($r.prototype,"engine",[Qr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jr=$r))||Jr),ao=n(0),uo=n.n(ao),so=n(12),co=n.n(so);function fo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fo(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ho(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var po=function(t){Wr()(n,t);var e=ho(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).dirty=!0,r.attributes=[],r.indices=void 0,r.indicesBuffer=void 0,r.vertexCount=void 0,r.maxInstancedCount=void 0,r.aabb=void 0,Object.assign(co()(r),t),r}return Tr()(n,[{key:"setAttribute",value:function(t,e,n,r){var o=this.attributes.find((function(e){return e.name===t}));return o?(o.data=e,o.dirty=!0):this.attributes.push(lo(lo({dirty:!0,name:t,data:e},n),{},{bufferGetter:r})),this.dirty=!0,this}},{key:"setIndex",value:function(t){return this.indices=new Uint32Array(t.buffer?t.buffer:t),this.dirty=!0,this}}]),n}(Nr),vo=(n(168),1e-6),mo="undefined"!=typeof Float32Array?Float32Array:Array,yo=Math.random;Math.PI;function go(){var t=new mo(9);return mo!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function bo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function _o(t){var e=new mo(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function xo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function wo(t,e,n,r,o,i,a,u,s){var c=new mo(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=o,c[5]=i,c[6]=a,c[7]=u,c[8]=s,c}function Eo(t,e,n,r,o,i,a,u,s,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=u,t[7]=s,t[8]=c,t}function So(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function To(t,e){if(t===e){var n=e[1],r=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Ao(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=f*a-u*c,h=-f*i+u*s,d=c*i-a*s,p=n*l+r*h+o*d;return p?(p=1/p,t[0]=l*p,t[1]=(-f*r+o*c)*p,t[2]=(u*r-o*a)*p,t[3]=h*p,t[4]=(f*n-o*s)*p,t[5]=(-u*n+o*i)*p,t[6]=d*p,t[7]=(-c*n+r*s)*p,t[8]=(a*n-r*i)*p,t):null}function Io(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8];return t[0]=a*f-u*c,t[1]=o*c-r*f,t[2]=r*u-o*a,t[3]=u*s-i*f,t[4]=n*f-o*s,t[5]=o*i-n*u,t[6]=i*c-a*s,t[7]=r*s-n*c,t[8]=n*a-r*i,t}function ko(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5],u=t[6],s=t[7],c=t[8];return e*(c*i-a*s)+n*(-c*o+a*u)+r*(s*o-i*u)}function Oo(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=n[0],d=n[1],p=n[2],v=n[3],m=n[4],y=n[5],g=n[6],b=n[7],_=n[8];return t[0]=h*r+d*a+p*c,t[1]=h*o+d*u+p*f,t[2]=h*i+d*s+p*l,t[3]=v*r+m*a+y*c,t[4]=v*o+m*u+y*f,t[5]=v*i+m*s+y*l,t[6]=g*r+b*a+_*c,t[7]=g*o+b*u+_*f,t[8]=g*i+b*s+_*l,t}function Do(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=n[0],d=n[1];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=u,t[5]=s,t[6]=h*r+d*a+c,t[7]=h*o+d*u+f,t[8]=h*i+d*s+l,t}function Ro(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=Math.sin(n),d=Math.cos(n);return t[0]=d*r+h*a,t[1]=d*o+h*u,t[2]=d*i+h*s,t[3]=d*a-h*r,t[4]=d*u-h*o,t[5]=d*s-h*i,t[6]=c,t[7]=f,t[8]=l,t}function Mo(t,e,n){var r=n[0],o=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Co(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function No(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Po(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Go(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function jo(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n+n,u=r+r,s=o+o,c=n*a,f=r*a,l=r*u,h=o*a,d=o*u,p=o*s,v=i*a,m=i*u,y=i*s;return t[0]=1-l-p,t[3]=f-y,t[6]=h+m,t[1]=f+y,t[4]=1-c-p,t[7]=d-v,t[2]=h-m,t[5]=d+v,t[8]=1-c-l,t}function Lo(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],d=e[11],p=e[12],v=e[13],m=e[14],y=e[15],g=n*u-r*a,b=n*s-o*a,_=n*c-i*a,x=r*s-o*u,w=r*c-i*u,E=o*c-i*s,S=f*v-l*p,T=f*m-h*p,A=f*y-d*p,I=l*m-h*v,k=l*y-d*v,O=h*y-d*m,D=g*O-b*k+_*I+x*A-w*T+E*S;return D?(D=1/D,t[0]=(u*O-s*k+c*I)*D,t[1]=(s*A-a*O-c*T)*D,t[2]=(a*k-u*A+c*S)*D,t[3]=(o*k-r*O-i*I)*D,t[4]=(n*O-o*A+i*T)*D,t[5]=(r*A-n*k-i*S)*D,t[6]=(v*E-m*w+y*x)*D,t[7]=(m*_-p*E-y*b)*D,t[8]=(p*w-v*_+y*g)*D,t):null}function Uo(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Bo(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Fo(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function zo(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function Vo(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function Wo(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function Xo(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function Ho(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function qo(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=e[0],h=e[1],d=e[2],p=e[3],v=e[4],m=e[5],y=e[6],g=e[7],b=e[8];return Math.abs(n-l)<=vo*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-h)<=vo*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(o-d)<=vo*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(i-p)<=vo*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-v)<=vo*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(u-m)<=vo*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(s-y)<=vo*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(c-g)<=vo*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(f-b)<=vo*Math.max(1,Math.abs(f),Math.abs(b))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Yo=Oo,Ko=Vo;function Zo(){var t=new mo(16);return mo!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Qo(t){var e=new mo(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Jo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function $o(t,e,n,r,o,i,a,u,s,c,f,l,h,d,p,v){var m=new mo(16);return m[0]=t,m[1]=e,m[2]=n,m[3]=r,m[4]=o,m[5]=i,m[6]=a,m[7]=u,m[8]=s,m[9]=c,m[10]=f,m[11]=l,m[12]=h,m[13]=d,m[14]=p,m[15]=v,m}function ti(t,e,n,r,o,i,a,u,s,c,f,l,h,d,p,v,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=u,t[7]=s,t[8]=c,t[9]=f,t[10]=l,t[11]=h,t[12]=d,t[13]=p,t[14]=v,t[15]=m,t}function ei(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ni(t,e){if(t===e){var n=e[1],r=e[2],o=e[3],i=e[6],a=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=o,t[13]=a,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ri(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],d=e[11],p=e[12],v=e[13],m=e[14],y=e[15],g=n*u-r*a,b=n*s-o*a,_=n*c-i*a,x=r*s-o*u,w=r*c-i*u,E=o*c-i*s,S=f*v-l*p,T=f*m-h*p,A=f*y-d*p,I=l*m-h*v,k=l*y-d*v,O=h*y-d*m,D=g*O-b*k+_*I+x*A-w*T+E*S;return D?(D=1/D,t[0]=(u*O-s*k+c*I)*D,t[1]=(o*k-r*O-i*I)*D,t[2]=(v*E-m*w+y*x)*D,t[3]=(h*w-l*E-d*x)*D,t[4]=(s*A-a*O-c*T)*D,t[5]=(n*O-o*A+i*T)*D,t[6]=(m*_-p*E-y*b)*D,t[7]=(f*E-h*_+d*b)*D,t[8]=(a*k-u*A+c*S)*D,t[9]=(r*A-n*k-i*S)*D,t[10]=(p*w-v*_+y*g)*D,t[11]=(l*_-f*w-d*g)*D,t[12]=(u*T-a*I-s*S)*D,t[13]=(n*I-r*T+o*S)*D,t[14]=(v*b-p*x-m*g)*D,t[15]=(f*x-l*b+h*g)*D,t):null}function oi(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],d=e[11],p=e[12],v=e[13],m=e[14],y=e[15];return t[0]=u*(h*y-d*m)-l*(s*y-c*m)+v*(s*d-c*h),t[1]=-(r*(h*y-d*m)-l*(o*y-i*m)+v*(o*d-i*h)),t[2]=r*(s*y-c*m)-u*(o*y-i*m)+v*(o*c-i*s),t[3]=-(r*(s*d-c*h)-u*(o*d-i*h)+l*(o*c-i*s)),t[4]=-(a*(h*y-d*m)-f*(s*y-c*m)+p*(s*d-c*h)),t[5]=n*(h*y-d*m)-f*(o*y-i*m)+p*(o*d-i*h),t[6]=-(n*(s*y-c*m)-a*(o*y-i*m)+p*(o*c-i*s)),t[7]=n*(s*d-c*h)-a*(o*d-i*h)+f*(o*c-i*s),t[8]=a*(l*y-d*v)-f*(u*y-c*v)+p*(u*d-c*l),t[9]=-(n*(l*y-d*v)-f*(r*y-i*v)+p*(r*d-i*l)),t[10]=n*(u*y-c*v)-a*(r*y-i*v)+p*(r*c-i*u),t[11]=-(n*(u*d-c*l)-a*(r*d-i*l)+f*(r*c-i*u)),t[12]=-(a*(l*m-h*v)-f*(u*m-s*v)+p*(u*h-s*l)),t[13]=n*(l*m-h*v)-f*(r*m-o*v)+p*(r*h-o*l),t[14]=-(n*(u*m-s*v)-a*(r*m-o*v)+p*(r*s-o*u)),t[15]=n*(u*h-s*l)-a*(r*h-o*l)+f*(r*s-o*u),t}function ii(t){var e=t[0],n=t[1],r=t[2],o=t[3],i=t[4],a=t[5],u=t[6],s=t[7],c=t[8],f=t[9],l=t[10],h=t[11],d=t[12],p=t[13],v=t[14],m=t[15];return(e*a-n*i)*(l*m-h*v)-(e*u-r*i)*(f*m-h*p)+(e*s-o*i)*(f*v-l*p)+(n*u-r*a)*(c*m-h*d)-(n*s-o*a)*(c*v-l*d)+(r*s-o*u)*(c*p-f*d)}function ai(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],d=e[10],p=e[11],v=e[12],m=e[13],y=e[14],g=e[15],b=n[0],_=n[1],x=n[2],w=n[3];return t[0]=b*r+_*u+x*l+w*v,t[1]=b*o+_*s+x*h+w*m,t[2]=b*i+_*c+x*d+w*y,t[3]=b*a+_*f+x*p+w*g,b=n[4],_=n[5],x=n[6],w=n[7],t[4]=b*r+_*u+x*l+w*v,t[5]=b*o+_*s+x*h+w*m,t[6]=b*i+_*c+x*d+w*y,t[7]=b*a+_*f+x*p+w*g,b=n[8],_=n[9],x=n[10],w=n[11],t[8]=b*r+_*u+x*l+w*v,t[9]=b*o+_*s+x*h+w*m,t[10]=b*i+_*c+x*d+w*y,t[11]=b*a+_*f+x*p+w*g,b=n[12],_=n[13],x=n[14],w=n[15],t[12]=b*r+_*u+x*l+w*v,t[13]=b*o+_*s+x*h+w*m,t[14]=b*i+_*c+x*d+w*y,t[15]=b*a+_*f+x*p+w*g,t}function ui(t,e,n){var r,o,i,a,u,s,c,f,l,h,d,p,v=n[0],m=n[1],y=n[2];return e===t?(t[12]=e[0]*v+e[4]*m+e[8]*y+e[12],t[13]=e[1]*v+e[5]*m+e[9]*y+e[13],t[14]=e[2]*v+e[6]*m+e[10]*y+e[14],t[15]=e[3]*v+e[7]*m+e[11]*y+e[15]):(r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],d=e[10],p=e[11],t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=u,t[5]=s,t[6]=c,t[7]=f,t[8]=l,t[9]=h,t[10]=d,t[11]=p,t[12]=r*v+u*m+l*y+e[12],t[13]=o*v+s*m+h*y+e[13],t[14]=i*v+c*m+d*y+e[14],t[15]=a*v+f*m+p*y+e[15]),t}function si(t,e,n){var r=n[0],o=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ci(t,e,n,r){var o,i,a,u,s,c,f,l,h,d,p,v,m,y,g,b,_,x,w,E,S,T,A,I,k=r[0],O=r[1],D=r[2],R=Math.hypot(k,O,D);return R<vo?null:(k*=R=1/R,O*=R,D*=R,o=Math.sin(n),a=1-(i=Math.cos(n)),u=e[0],s=e[1],c=e[2],f=e[3],l=e[4],h=e[5],d=e[6],p=e[7],v=e[8],m=e[9],y=e[10],g=e[11],b=k*k*a+i,_=O*k*a+D*o,x=D*k*a-O*o,w=k*O*a-D*o,E=O*O*a+i,S=D*O*a+k*o,T=k*D*a+O*o,A=O*D*a-k*o,I=D*D*a+i,t[0]=u*b+l*_+v*x,t[1]=s*b+h*_+m*x,t[2]=c*b+d*_+y*x,t[3]=f*b+p*_+g*x,t[4]=u*w+l*E+v*S,t[5]=s*w+h*E+m*S,t[6]=c*w+d*E+y*S,t[7]=f*w+p*E+g*S,t[8]=u*T+l*A+v*I,t[9]=s*T+h*A+m*I,t[10]=c*T+d*A+y*I,t[11]=f*T+p*A+g*I,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function fi(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[4],a=e[5],u=e[6],s=e[7],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*o+c*r,t[5]=a*o+f*r,t[6]=u*o+l*r,t[7]=s*o+h*r,t[8]=c*o-i*r,t[9]=f*o-a*r,t[10]=l*o-u*r,t[11]=h*o-s*r,t}function li(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[0],a=e[1],u=e[2],s=e[3],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o-c*r,t[1]=a*o-f*r,t[2]=u*o-l*r,t[3]=s*o-h*r,t[8]=i*r+c*o,t[9]=a*r+f*o,t[10]=u*r+l*o,t[11]=s*r+h*o,t}function hi(t,e,n){var r=Math.sin(n),o=Math.cos(n),i=e[0],a=e[1],u=e[2],s=e[3],c=e[4],f=e[5],l=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o+c*r,t[1]=a*o+f*r,t[2]=u*o+l*r,t[3]=s*o+h*r,t[4]=c*o-i*r,t[5]=f*o-a*r,t[6]=l*o-u*r,t[7]=h*o-s*r,t}function di(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function pi(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function vi(t,e,n){var r,o,i,a=n[0],u=n[1],s=n[2],c=Math.hypot(a,u,s);return c<vo?null:(a*=c=1/c,u*=c,s*=c,r=Math.sin(e),i=1-(o=Math.cos(e)),t[0]=a*a*i+o,t[1]=u*a*i+s*r,t[2]=s*a*i-u*r,t[3]=0,t[4]=a*u*i-s*r,t[5]=u*u*i+o,t[6]=s*u*i+a*r,t[7]=0,t[8]=a*s*i+u*r,t[9]=u*s*i-a*r,t[10]=s*s*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function mi(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function yi(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function gi(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function bi(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=r+r,s=o+o,c=i+i,f=r*u,l=r*s,h=r*c,d=o*s,p=o*c,v=i*c,m=a*u,y=a*s,g=a*c;return t[0]=1-(d+v),t[1]=l+g,t[2]=h-y,t[3]=0,t[4]=l-g,t[5]=1-(f+v),t[6]=p+m,t[7]=0,t[8]=h+y,t[9]=p-m,t[10]=1-(f+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function _i(t,e){var n=new mo(3),r=-e[0],o=-e[1],i=-e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=r*r+o*o+i*i+a*a;return l>0?(n[0]=2*(u*a+f*r+s*i-c*o)/l,n[1]=2*(s*a+f*o+c*r-u*i)/l,n[2]=2*(c*a+f*i+u*o-s*r)/l):(n[0]=2*(u*a+f*r+s*i-c*o),n[1]=2*(s*a+f*o+c*r-u*i),n[2]=2*(c*a+f*i+u*o-s*r)),bi(t,e,n),t}function xi(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function wi(t,e){var n=e[0],r=e[1],o=e[2],i=e[4],a=e[5],u=e[6],s=e[8],c=e[9],f=e[10];return t[0]=Math.hypot(n,r,o),t[1]=Math.hypot(i,a,u),t[2]=Math.hypot(s,c,f),t}function Ei(t,e){var n=new mo(3);wi(n,e);var r=1/n[0],o=1/n[1],i=1/n[2],a=e[0]*r,u=e[1]*o,s=e[2]*i,c=e[4]*r,f=e[5]*o,l=e[6]*i,h=e[8]*r,d=e[9]*o,p=e[10]*i,v=a+f+p,m=0;return v>0?(m=2*Math.sqrt(v+1),t[3]=.25*m,t[0]=(l-d)/m,t[1]=(h-s)/m,t[2]=(u-c)/m):a>f&&a>p?(m=2*Math.sqrt(1+a-f-p),t[3]=(l-d)/m,t[0]=.25*m,t[1]=(u+c)/m,t[2]=(h+s)/m):f>p?(m=2*Math.sqrt(1+f-a-p),t[3]=(h-s)/m,t[0]=(u+c)/m,t[1]=.25*m,t[2]=(l+d)/m):(m=2*Math.sqrt(1+p-a-f),t[3]=(u-c)/m,t[0]=(h+s)/m,t[1]=(l+d)/m,t[2]=.25*m),t}function Si(t,e,n,r){var o=e[0],i=e[1],a=e[2],u=e[3],s=o+o,c=i+i,f=a+a,l=o*s,h=o*c,d=o*f,p=i*c,v=i*f,m=a*f,y=u*s,g=u*c,b=u*f,_=r[0],x=r[1],w=r[2];return t[0]=(1-(p+m))*_,t[1]=(h+b)*_,t[2]=(d-g)*_,t[3]=0,t[4]=(h-b)*x,t[5]=(1-(l+m))*x,t[6]=(v+y)*x,t[7]=0,t[8]=(d+g)*w,t[9]=(v-y)*w,t[10]=(1-(l+p))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Ti(t,e,n,r,o){var i=e[0],a=e[1],u=e[2],s=e[3],c=i+i,f=a+a,l=u+u,h=i*c,d=i*f,p=i*l,v=a*f,m=a*l,y=u*l,g=s*c,b=s*f,_=s*l,x=r[0],w=r[1],E=r[2],S=o[0],T=o[1],A=o[2],I=(1-(v+y))*x,k=(d+_)*x,O=(p-b)*x,D=(d-_)*w,R=(1-(h+y))*w,M=(m+g)*w,C=(p+b)*E,N=(m-g)*E,P=(1-(h+v))*E;return t[0]=I,t[1]=k,t[2]=O,t[3]=0,t[4]=D,t[5]=R,t[6]=M,t[7]=0,t[8]=C,t[9]=N,t[10]=P,t[11]=0,t[12]=n[0]+S-(I*S+D*T+C*A),t[13]=n[1]+T-(k*S+R*T+N*A),t[14]=n[2]+A-(O*S+M*T+P*A),t[15]=1,t}function Ai(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n+n,u=r+r,s=o+o,c=n*a,f=r*a,l=r*u,h=o*a,d=o*u,p=o*s,v=i*a,m=i*u,y=i*s;return t[0]=1-l-p,t[1]=f+y,t[2]=h-m,t[3]=0,t[4]=f-y,t[5]=1-c-p,t[6]=d+v,t[7]=0,t[8]=h+m,t[9]=d-v,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ii(t,e,n,r,o,i,a){var u=1/(n-e),s=1/(o-r),c=1/(i-a);return t[0]=2*i*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*s,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(o+r)*s,t[10]=(a+i)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*i*2*c,t[15]=0,t}function ki(t,e,n,r,o){var i,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(i=1/(r-o),t[10]=(o+r)*i,t[14]=2*o*r*i):(t[10]=-1,t[14]=-2*r),t}function Oi(t,e,n,r){var o=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(a+u),c=2/(o+i);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-u)*s*.5,t[9]=(o-i)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Di(t,e,n,r,o,i,a){var u=1/(e-n),s=1/(r-o),c=1/(i-a);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*u,t[13]=(o+r)*s,t[14]=(a+i)*c,t[15]=1,t}function Ri(t,e,n,r){var o,i,a,u,s,c,f,l,h,d,p=e[0],v=e[1],m=e[2],y=r[0],g=r[1],b=r[2],_=n[0],x=n[1],w=n[2];return Math.abs(p-_)<vo&&Math.abs(v-x)<vo&&Math.abs(m-w)<vo?ei(t):(f=p-_,l=v-x,h=m-w,o=g*(h*=d=1/Math.hypot(f,l,h))-b*(l*=d),i=b*(f*=d)-y*h,a=y*l-g*f,(d=Math.hypot(o,i,a))?(o*=d=1/d,i*=d,a*=d):(o=0,i=0,a=0),u=l*a-h*i,s=h*o-f*a,c=f*i-l*o,(d=Math.hypot(u,s,c))?(u*=d=1/d,s*=d,c*=d):(u=0,s=0,c=0),t[0]=o,t[1]=u,t[2]=f,t[3]=0,t[4]=i,t[5]=s,t[6]=l,t[7]=0,t[8]=a,t[9]=c,t[10]=h,t[11]=0,t[12]=-(o*p+i*v+a*m),t[13]=-(u*p+s*v+c*m),t[14]=-(f*p+l*v+h*m),t[15]=1,t)}function Mi(t,e,n,r){var o=e[0],i=e[1],a=e[2],u=r[0],s=r[1],c=r[2],f=o-n[0],l=i-n[1],h=a-n[2],d=f*f+l*l+h*h;d>0&&(f*=d=1/Math.sqrt(d),l*=d,h*=d);var p=s*h-c*l,v=c*f-u*h,m=u*l-s*f;return(d=p*p+v*v+m*m)>0&&(p*=d=1/Math.sqrt(d),v*=d,m*=d),t[0]=p,t[1]=v,t[2]=m,t[3]=0,t[4]=l*m-h*v,t[5]=h*p-f*m,t[6]=f*v-l*p,t[7]=0,t[8]=f,t[9]=l,t[10]=h,t[11]=0,t[12]=o,t[13]=i,t[14]=a,t[15]=1,t}function Ci(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Ni(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Pi(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Gi(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function ji(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Li(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Ui(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Bi(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=t[9],h=t[10],d=t[11],p=t[12],v=t[13],m=t[14],y=t[15],g=e[0],b=e[1],_=e[2],x=e[3],w=e[4],E=e[5],S=e[6],T=e[7],A=e[8],I=e[9],k=e[10],O=e[11],D=e[12],R=e[13],M=e[14],C=e[15];return Math.abs(n-g)<=vo*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-b)<=vo*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(o-_)<=vo*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(i-x)<=vo*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(a-w)<=vo*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(u-E)<=vo*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(s-S)<=vo*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(c-T)<=vo*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(f-A)<=vo*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(l-I)<=vo*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(h-k)<=vo*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(d-O)<=vo*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(p-D)<=vo*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(v-R)<=vo*Math.max(1,Math.abs(v),Math.abs(R))&&Math.abs(m-M)<=vo*Math.max(1,Math.abs(m),Math.abs(M))&&Math.abs(y-C)<=vo*Math.max(1,Math.abs(y),Math.abs(C))}var Fi=ai,zi=Gi;function Vi(){var t=new mo(3);return mo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Wi(t){var e=new mo(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Xi(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function Hi(t,e,n){var r=new mo(3);return r[0]=t,r[1]=e,r[2]=n,r}function qi(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Yi(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Ki(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Zi(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Qi(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Ji(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function $i(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function ta(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function ea(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function na(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function ra(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function oa(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function ia(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function aa(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return Math.hypot(n,r,o)}function ua(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return n*n+r*r+o*o}function sa(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function ca(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function fa(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function la(t,e){var n=e[0],r=e[1],o=e[2],i=n*n+r*r+o*o;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function ha(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function da(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],u=n[1],s=n[2];return t[0]=o*s-i*u,t[1]=i*a-r*s,t[2]=r*u-o*a,t}function pa(t,e,n,r){var o=e[0],i=e[1],a=e[2];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t[2]=a+r*(n[2]-a),t}function va(t,e,n,r,o,i){var a=i*i,u=a*(2*i-3)+1,s=a*(i-2)+i,c=a*(i-1),f=a*(3-2*i);return t[0]=e[0]*u+n[0]*s+r[0]*c+o[0]*f,t[1]=e[1]*u+n[1]*s+r[1]*c+o[1]*f,t[2]=e[2]*u+n[2]*s+r[2]*c+o[2]*f,t}function ma(t,e,n,r,o,i){var a=1-i,u=a*a,s=i*i,c=u*a,f=3*i*u,l=3*s*a,h=s*i;return t[0]=e[0]*c+n[0]*f+r[0]*l+o[0]*h,t[1]=e[1]*c+n[1]*f+r[1]*l+o[1]*h,t[2]=e[2]*c+n[2]*f+r[2]*l+o[2]*h,t}function ya(t,e){e=e||1;var n=2*yo()*Math.PI,r=2*yo()-1,o=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=r*e,t}function ga(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[3]*r+n[7]*o+n[11]*i+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*o+n[8]*i+n[12])/a,t[1]=(n[1]*r+n[5]*o+n[9]*i+n[13])/a,t[2]=(n[2]*r+n[6]*o+n[10]*i+n[14])/a,t}function ba(t,e,n){var r=e[0],o=e[1],i=e[2];return t[0]=r*n[0]+o*n[3]+i*n[6],t[1]=r*n[1]+o*n[4]+i*n[7],t[2]=r*n[2]+o*n[5]+i*n[8],t}function _a(t,e,n){var r=n[0],o=n[1],i=n[2],a=n[3],u=e[0],s=e[1],c=e[2],f=o*c-i*s,l=i*u-r*c,h=r*s-o*u,d=o*h-i*l,p=i*f-r*h,v=r*l-o*f,m=2*a;return f*=m,l*=m,h*=m,d*=2,p*=2,v*=2,t[0]=u+f+d,t[1]=s+l+p,t[2]=c+h+v,t}function xa(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[0],i[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),i[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function wa(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),i[1]=o[1],i[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Ea(t,e,n,r){var o=[],i=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],i[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),i[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),i[2]=o[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Sa(t,e){var n=t[0],r=t[1],o=t[2],i=e[0],a=e[1],u=e[2],s=Math.sqrt(n*n+r*r+o*o)*Math.sqrt(i*i+a*a+u*u),c=s&&ha(t,e)/s;return Math.acos(Math.min(Math.max(c,-1),1))}function Ta(t){return t[0]=0,t[1]=0,t[2]=0,t}function Aa(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Ia(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function ka(t,e){var n=t[0],r=t[1],o=t[2],i=e[0],a=e[1],u=e[2];return Math.abs(n-i)<=vo*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-a)<=vo*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-u)<=vo*Math.max(1,Math.abs(o),Math.abs(u))}var Oa,Da=Zi,Ra=Qi,Ma=Ji,Ca=aa,Na=ua,Pa=Xi,Ga=sa,ja=(Oa=Vi(),function(t,e,n,r,o,i){var a,u;for(e||(e=3),n||(n=0),u=r?Math.min(r*e+n,t.length):t.length,a=n;a<u;a+=e)Oa[0]=t[a],Oa[1]=t[a+1],Oa[2]=t[a+2],o(Oa,Oa,i),t[a]=Oa[0],t[a+1]=Oa[1],t[a+2]=Oa[2];return t});function La(){var t=new mo(4);return mo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Ua(t){var e=new mo(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Ba(t,e,n,r){var o=new mo(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o}function Fa(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function za(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t}function Va(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function Wa(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Xa(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function Ha(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function qa(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Ya(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Ka(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function Za(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function Qa(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Ja(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function $a(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function tu(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],i=e[3]-t[3];return Math.hypot(n,r,o,i)}function eu(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],i=e[3]-t[3];return n*n+r*r+o*o+i*i}function nu(t){var e=t[0],n=t[1],r=t[2],o=t[3];return Math.hypot(e,n,r,o)}function ru(t){var e=t[0],n=t[1],r=t[2],o=t[3];return e*e+n*n+r*r+o*o}function ou(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function iu(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function au(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*n+r*r+o*o+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=o*a,t[3]=i*a,t}function uu(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function su(t,e,n,r){var o=n[0]*r[1]-n[1]*r[0],i=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],u=n[1]*r[2]-n[2]*r[1],s=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],f=e[0],l=e[1],h=e[2],d=e[3];return t[0]=l*c-h*s+d*u,t[1]=-f*c+h*a-d*i,t[2]=f*s-l*a+d*o,t[3]=-f*u+l*i-h*o,t}function cu(t,e,n,r){var o=e[0],i=e[1],a=e[2],u=e[3];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t[2]=a+r*(n[2]-a),t[3]=u+r*(n[3]-u),t}function fu(t,e){var n,r,o,i,a,u;e=e||1;do{a=(n=2*yo()-1)*n+(r=2*yo()-1)*r}while(a>=1);do{u=(o=2*yo()-1)*o+(i=2*yo()-1)*i}while(u>=1);var s=Math.sqrt((1-a)/u);return t[0]=e*n,t[1]=e*r,t[2]=e*o*s,t[3]=e*i*s,t}function lu(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3];return t[0]=n[0]*r+n[4]*o+n[8]*i+n[12]*a,t[1]=n[1]*r+n[5]*o+n[9]*i+n[13]*a,t[2]=n[2]*r+n[6]*o+n[10]*i+n[14]*a,t[3]=n[3]*r+n[7]*o+n[11]*i+n[15]*a,t}function hu(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],u=n[1],s=n[2],c=n[3],f=c*r+u*i-s*o,l=c*o+s*r-a*i,h=c*i+a*o-u*r,d=-a*r-u*o-s*i;return t[0]=f*c+d*-a+l*-s-h*-u,t[1]=l*c+d*-u+h*-a-f*-s,t[2]=h*c+d*-s+f*-u-l*-a,t[3]=e[3],t}function du(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function pu(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function vu(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function mu(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=e[0],u=e[1],s=e[2],c=e[3];return Math.abs(n-a)<=vo*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-u)<=vo*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-s)<=vo*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-c)<=vo*Math.max(1,Math.abs(i),Math.abs(c))}var yu=Wa,gu=Xa,bu=Ha,_u=tu,xu=eu,wu=nu,Eu=ru,Su=function(){var t=La();return function(e,n,r,o,i,a){var u,s;for(n||(n=4),r||(r=0),s=o?Math.min(o*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],i(t,t,a),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}();function Tu(){var t=new mo(4);return mo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Au(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Iu(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function ku(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>vo?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Ou(t,e){var n=ds(t,e);return Math.acos(2*n*n-1)}function Du(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=n[0],s=n[1],c=n[2],f=n[3];return t[0]=r*f+a*u+o*c-i*s,t[1]=o*f+a*s+i*u-r*c,t[2]=i*f+a*c+r*s-o*u,t[3]=a*f-r*u-o*s-i*c,t}function Ru(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+a*u,t[1]=o*s+i*u,t[2]=i*s-o*u,t[3]=a*s-r*u,t}function Mu(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s-i*u,t[1]=o*s+a*u,t[2]=i*s+r*u,t[3]=a*s-o*u,t}function Cu(t,e,n){n*=.5;var r=e[0],o=e[1],i=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+o*u,t[1]=o*s-r*u,t[2]=i*s+a*u,t[3]=a*s-i*u,t}function Nu(t,e){var n=e[0],r=e[1],o=e[2];return t[0]=n,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),t}function Pu(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=Math.sqrt(n*n+r*r+o*o),u=Math.exp(i),s=a>0?u*Math.sin(a)/a:0;return t[0]=n*s,t[1]=r*s,t[2]=o*s,t[3]=u*Math.cos(a),t}function Gu(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=Math.sqrt(n*n+r*r+o*o),u=a>0?Math.atan2(a,i)/a:0;return t[0]=n*u,t[1]=r*u,t[2]=o*u,t[3]=.5*Math.log(n*n+r*r+o*o+i*i),t}function ju(t,e,n){return Gu(t,e),hs(t,t,n),Pu(t,t),t}function Lu(t,e,n,r){var o,i,a,u,s,c=e[0],f=e[1],l=e[2],h=e[3],d=n[0],p=n[1],v=n[2],m=n[3];return(i=c*d+f*p+l*v+h*m)<0&&(i=-i,d=-d,p=-p,v=-v,m=-m),1-i>vo?(o=Math.acos(i),a=Math.sin(o),u=Math.sin((1-r)*o)/a,s=Math.sin(r*o)/a):(u=1-r,s=r),t[0]=u*c+s*d,t[1]=u*f+s*p,t[2]=u*l+s*v,t[3]=u*h+s*m,t}function Uu(t){var e=yo(),n=yo(),r=yo(),o=Math.sqrt(1-e),i=Math.sqrt(e);return t[0]=o*Math.sin(2*Math.PI*n),t[1]=o*Math.cos(2*Math.PI*n),t[2]=i*Math.sin(2*Math.PI*r),t[3]=i*Math.cos(2*Math.PI*r),t}function Bu(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*n+r*r+o*o+i*i,u=a?1/a:0;return t[0]=-n*u,t[1]=-r*u,t[2]=-o*u,t[3]=i*u,t}function Fu(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function zu(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var i=(o+1)%3,a=(o+2)%3;n=Math.sqrt(e[3*o+o]-e[3*i+i]-e[3*a+a]+1),t[o]=.5*n,n=.5/n,t[3]=(e[3*i+a]-e[3*a+i])*n,t[i]=(e[3*i+o]+e[3*o+i])*n,t[a]=(e[3*a+o]+e[3*o+a])*n}return t}function Vu(t,e,n,r){var o=.5*Math.PI/180;e*=o,n*=o,r*=o;var i=Math.sin(e),a=Math.cos(e),u=Math.sin(n),s=Math.cos(n),c=Math.sin(r),f=Math.cos(r);return t[0]=i*s*f-a*u*c,t[1]=a*u*f+i*s*c,t[2]=a*s*c-i*u*f,t[3]=a*s*f+i*u*c,t}function Wu(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Xu,Hu,qu,Yu,Ku,Zu,Qu,Ju,$u,ts,es,ns,rs,os,is,as=Ua,us=Ba,ss=Fa,cs=za,fs=Va,ls=Du,hs=Ja,ds=uu,ps=cu,vs=nu,ms=vs,ys=ru,gs=ys,bs=au,_s=vu,xs=mu,ws=(Xu=Vi(),Hu=Hi(1,0,0),qu=Hi(0,1,0),function(t,e,n){var r=ha(e,n);return r<-.999999?(da(Xu,Hu,e),Pa(Xu)<1e-6&&da(Xu,qu,e),la(Xu,Xu),Iu(t,Xu,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(da(Xu,e,n),t[0]=Xu[0],t[1]=Xu[1],t[2]=Xu[2],t[3]=1+r,bs(t,t))}),Es=(Yu=Tu(),Ku=Tu(),function(t,e,n,r,o,i){return Lu(Yu,e,o,i),Lu(Ku,n,r,i),Lu(t,Yu,Ku,2*i*(1-i)),t}),Ss=(Zu=go(),function(t,e,n,r){return Zu[0]=n[0],Zu[3]=n[1],Zu[6]=n[2],Zu[1]=r[0],Zu[4]=r[1],Zu[7]=r[2],Zu[2]=-e[0],Zu[5]=-e[1],Zu[8]=-e[2],bs(t,zu(t,Zu))}),Ts=function(){function t(e,n){Er()(this,t),this.center=void 0,this.halfExtents=void 0,this.min=i.create(),this.max=i.create(),this.update(e,n)}return Tr()(t,[{key:"update",value:function(t,e){this.center=t||i.create(),this.halfExtents=e||i.fromValues(.5,.5,.5),this.min=i.sub(this.min,this.center,this.halfExtents),this.max=i.add(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(t,e){i.add(this.center,e,t),i.scale(this.center,this.center,.5),i.sub(this.halfExtents,e,t),i.scale(this.halfExtents,this.halfExtents,.5),i.copy(this.min,t),i.copy(this.max,e)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(t){var e=this.center,n=e[0],r=e[1],o=e[2],i=this.halfExtents,a=i[0],u=i[1],s=i[2],c=n-a,f=n+a,l=r-u,h=r+u,d=o-s,p=o+s,v=t.center,m=v[0],y=v[1],g=v[2],b=t.halfExtents,_=b[0],x=b[1],w=b[2],E=m-_,S=m+_,T=y-x,A=y+x,I=g-w,k=g+w;E<c&&(c=E),S>f&&(f=S),T<l&&(l=T),A>h&&(h=A),I<d&&(d=I),k>p&&(p=k),e[0]=.5*(c+f),e[1]=.5*(l+h),e[2]=.5*(d+p),i[0]=.5*(f-c),i[1]=.5*(h-l),i[2]=.5*(p-d),this.min[0]=c,this.min[1]=l,this.min[2]=d,this.max[0]=f,this.max[1]=h,this.max[2]=p}},{key:"intersects",value:function(t){var e=this.getMax(),n=this.getMin(),r=t.getMax(),o=t.getMin();return n[0]<=r[0]&&e[0]>=o[0]&&n[1]<=r[1]&&e[1]>=o[1]&&n[2]<=r[2]&&e[2]>=o[2]}},{key:"containsPoint",value:function(t){var e=this.getMin(),n=this.getMax();return!(t[0]<e[0]||t[0]>n[0]||t[1]<e[1]||t[1]>n[1]||t[2]<e[2]||t[2]>n[2])}},{key:"getNegativeFarPoint",value:function(t){return 273===t.pnVertexFlag?i.copy(i.create(),this.min):272===t.pnVertexFlag?i.fromValues(this.min[0],this.min[1],this.max[2]):257===t.pnVertexFlag?i.fromValues(this.min[0],this.max[1],this.min[2]):256===t.pnVertexFlag?i.fromValues(this.min[0],this.max[1],this.max[2]):17===t.pnVertexFlag?i.fromValues(this.max[0],this.min[1],this.min[2]):16===t.pnVertexFlag?i.fromValues(this.max[0],this.min[1],this.max[2]):1===t.pnVertexFlag?i.fromValues(this.max[0],this.max[1],this.min[2]):i.fromValues(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(t){return 273===t.pnVertexFlag?i.copy(i.create(),this.max):272===t.pnVertexFlag?i.fromValues(this.max[0],this.max[1],this.min[2]):257===t.pnVertexFlag?i.fromValues(this.max[0],this.min[1],this.max[2]):256===t.pnVertexFlag?i.fromValues(this.max[0],this.min[1],this.min[2]):17===t.pnVertexFlag?i.fromValues(this.min[0],this.max[1],this.max[2]):16===t.pnVertexFlag?i.fromValues(this.min[0],this.max[1],this.min[2]):1===t.pnVertexFlag?i.fromValues(this.min[0],this.min[1],this.max[2]):i.fromValues(this.min[0],this.min[1],this.min[2])}}]),t}();function As(t){for(var e=new Ts,n=i.fromValues(t[0],t[1],t[2]),r=i.fromValues(t[0],t[1],t[2]),o=3;o<t.length;){var a=t[o++],u=t[o++],s=t[o++];a<n[0]&&(n[0]=a),u<n[1]&&(n[1]=u),s<n[2]&&(n[2]=s),a>r[0]&&(r[0]=a),u>r[1]&&(r[1]=u),s>r[2]&&(r[2]=s)}return e.setMinMax(n,r),e}(Ju=Qu||(Qu={}))[Ju.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",Ju[Ju.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",Ju[Ju.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",Ju[Ju.POINTS=0]="POINTS",Ju[Ju.LINES=1]="LINES",Ju[Ju.LINE_LOOP=2]="LINE_LOOP",Ju[Ju.LINE_STRIP=3]="LINE_STRIP",Ju[Ju.TRIANGLES=4]="TRIANGLES",Ju[Ju.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",Ju[Ju.TRIANGLE_FAN=6]="TRIANGLE_FAN",Ju[Ju.ZERO=0]="ZERO",Ju[Ju.ONE=1]="ONE",Ju[Ju.SRC_COLOR=768]="SRC_COLOR",Ju[Ju.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",Ju[Ju.SRC_ALPHA=770]="SRC_ALPHA",Ju[Ju.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",Ju[Ju.DST_ALPHA=772]="DST_ALPHA",Ju[Ju.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",Ju[Ju.DST_COLOR=774]="DST_COLOR",Ju[Ju.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",Ju[Ju.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",Ju[Ju.FUNC_ADD=32774]="FUNC_ADD",Ju[Ju.BLEND_EQUATION=32777]="BLEND_EQUATION",Ju[Ju.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",Ju[Ju.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",Ju[Ju.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",Ju[Ju.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",Ju[Ju.MAX_EXT=32776]="MAX_EXT",Ju[Ju.MIN_EXT=32775]="MIN_EXT",Ju[Ju.BLEND_DST_RGB=32968]="BLEND_DST_RGB",Ju[Ju.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",Ju[Ju.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",Ju[Ju.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",Ju[Ju.CONSTANT_COLOR=32769]="CONSTANT_COLOR",Ju[Ju.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",Ju[Ju.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",Ju[Ju.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",Ju[Ju.BLEND_COLOR=32773]="BLEND_COLOR",Ju[Ju.ARRAY_BUFFER=34962]="ARRAY_BUFFER",Ju[Ju.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",Ju[Ju.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",Ju[Ju.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",Ju[Ju.STREAM_DRAW=35040]="STREAM_DRAW",Ju[Ju.STATIC_DRAW=35044]="STATIC_DRAW",Ju[Ju.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",Ju[Ju.BUFFER_SIZE=34660]="BUFFER_SIZE",Ju[Ju.BUFFER_USAGE=34661]="BUFFER_USAGE",Ju[Ju.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",Ju[Ju.FRONT=1028]="FRONT",Ju[Ju.BACK=1029]="BACK",Ju[Ju.FRONT_AND_BACK=1032]="FRONT_AND_BACK",Ju[Ju.CULL_FACE=2884]="CULL_FACE",Ju[Ju.BLEND=3042]="BLEND",Ju[Ju.DITHER=3024]="DITHER",Ju[Ju.STENCIL_TEST=2960]="STENCIL_TEST",Ju[Ju.DEPTH_TEST=2929]="DEPTH_TEST",Ju[Ju.SCISSOR_TEST=3089]="SCISSOR_TEST",Ju[Ju.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",Ju[Ju.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",Ju[Ju.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",Ju[Ju.NO_ERROR=0]="NO_ERROR",Ju[Ju.INVALID_ENUM=1280]="INVALID_ENUM",Ju[Ju.INVALID_VALUE=1281]="INVALID_VALUE",Ju[Ju.INVALID_OPERATION=1282]="INVALID_OPERATION",Ju[Ju.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",Ju[Ju.CW=2304]="CW",Ju[Ju.CCW=2305]="CCW",Ju[Ju.LINE_WIDTH=2849]="LINE_WIDTH",Ju[Ju.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",Ju[Ju.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",Ju[Ju.CULL_FACE_MODE=2885]="CULL_FACE_MODE",Ju[Ju.FRONT_FACE=2886]="FRONT_FACE",Ju[Ju.DEPTH_RANGE=2928]="DEPTH_RANGE",Ju[Ju.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",Ju[Ju.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",Ju[Ju.DEPTH_FUNC=2932]="DEPTH_FUNC",Ju[Ju.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",Ju[Ju.STENCIL_FUNC=2962]="STENCIL_FUNC",Ju[Ju.STENCIL_FAIL=2964]="STENCIL_FAIL",Ju[Ju.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",Ju[Ju.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",Ju[Ju.STENCIL_REF=2967]="STENCIL_REF",Ju[Ju.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",Ju[Ju.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",Ju[Ju.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",Ju[Ju.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",Ju[Ju.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",Ju[Ju.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",Ju[Ju.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",Ju[Ju.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",Ju[Ju.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",Ju[Ju.VIEWPORT=2978]="VIEWPORT",Ju[Ju.SCISSOR_BOX=3088]="SCISSOR_BOX",Ju[Ju.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",Ju[Ju.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",Ju[Ju.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",Ju[Ju.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",Ju[Ju.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",Ju[Ju.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",Ju[Ju.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",Ju[Ju.RED_BITS=3410]="RED_BITS",Ju[Ju.GREEN_BITS=3411]="GREEN_BITS",Ju[Ju.BLUE_BITS=3412]="BLUE_BITS",Ju[Ju.ALPHA_BITS=3413]="ALPHA_BITS",Ju[Ju.DEPTH_BITS=3414]="DEPTH_BITS",Ju[Ju.STENCIL_BITS=3415]="STENCIL_BITS",Ju[Ju.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",Ju[Ju.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",Ju[Ju.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",Ju[Ju.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",Ju[Ju.SAMPLES=32937]="SAMPLES",Ju[Ju.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",Ju[Ju.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",Ju[Ju.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",Ju[Ju.DONT_CARE=4352]="DONT_CARE",Ju[Ju.FASTEST=4353]="FASTEST",Ju[Ju.NICEST=4354]="NICEST",Ju[Ju.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",Ju[Ju.BYTE=5120]="BYTE",Ju[Ju.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",Ju[Ju.SHORT=5122]="SHORT",Ju[Ju.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",Ju[Ju.INT=5124]="INT",Ju[Ju.UNSIGNED_INT=5125]="UNSIGNED_INT",Ju[Ju.FLOAT=5126]="FLOAT",Ju[Ju.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",Ju[Ju.ALPHA=6406]="ALPHA",Ju[Ju.RGB=6407]="RGB",Ju[Ju.RGBA=6408]="RGBA",Ju[Ju.LUMINANCE=6409]="LUMINANCE",Ju[Ju.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",Ju[Ju.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",Ju[Ju.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",Ju[Ju.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",Ju[Ju.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",Ju[Ju.VERTEX_SHADER=35633]="VERTEX_SHADER",Ju[Ju.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",Ju[Ju.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",Ju[Ju.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",Ju[Ju.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",Ju[Ju.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",Ju[Ju.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",Ju[Ju.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",Ju[Ju.SHADER_TYPE=35663]="SHADER_TYPE",Ju[Ju.DELETE_STATUS=35712]="DELETE_STATUS",Ju[Ju.LINK_STATUS=35714]="LINK_STATUS",Ju[Ju.VALIDATE_STATUS=35715]="VALIDATE_STATUS",Ju[Ju.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",Ju[Ju.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",Ju[Ju.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",Ju[Ju.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",Ju[Ju.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",Ju[Ju.NEVER=512]="NEVER",Ju[Ju.LESS=513]="LESS",Ju[Ju.EQUAL=514]="EQUAL",Ju[Ju.LEQUAL=515]="LEQUAL",Ju[Ju.GREATER=516]="GREATER",Ju[Ju.NOTEQUAL=517]="NOTEQUAL",Ju[Ju.GEQUAL=518]="GEQUAL",Ju[Ju.ALWAYS=519]="ALWAYS",Ju[Ju.KEEP=7680]="KEEP",Ju[Ju.REPLACE=7681]="REPLACE",Ju[Ju.INCR=7682]="INCR",Ju[Ju.DECR=7683]="DECR",Ju[Ju.INVERT=5386]="INVERT",Ju[Ju.INCR_WRAP=34055]="INCR_WRAP",Ju[Ju.DECR_WRAP=34056]="DECR_WRAP",Ju[Ju.VENDOR=7936]="VENDOR",Ju[Ju.RENDERER=7937]="RENDERER",Ju[Ju.VERSION=7938]="VERSION",Ju[Ju.NEAREST=9728]="NEAREST",Ju[Ju.LINEAR=9729]="LINEAR",Ju[Ju.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",Ju[Ju.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",Ju[Ju.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",Ju[Ju.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",Ju[Ju.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",Ju[Ju.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",Ju[Ju.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",Ju[Ju.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",Ju[Ju.TEXTURE_2D=3553]="TEXTURE_2D",Ju[Ju.TEXTURE=5890]="TEXTURE",Ju[Ju.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Ju[Ju.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",Ju[Ju.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Ju[Ju.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Ju[Ju.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Ju[Ju.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Ju[Ju.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Ju[Ju.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",Ju[Ju.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",Ju[Ju.TEXTURE0=33984]="TEXTURE0",Ju[Ju.TEXTURE1=33985]="TEXTURE1",Ju[Ju.TEXTURE2=33986]="TEXTURE2",Ju[Ju.TEXTURE3=33987]="TEXTURE3",Ju[Ju.TEXTURE4=33988]="TEXTURE4",Ju[Ju.TEXTURE5=33989]="TEXTURE5",Ju[Ju.TEXTURE6=33990]="TEXTURE6",Ju[Ju.TEXTURE7=33991]="TEXTURE7",Ju[Ju.TEXTURE8=33992]="TEXTURE8",Ju[Ju.TEXTURE9=33993]="TEXTURE9",Ju[Ju.TEXTURE10=33994]="TEXTURE10",Ju[Ju.TEXTURE11=33995]="TEXTURE11",Ju[Ju.TEXTURE12=33996]="TEXTURE12",Ju[Ju.TEXTURE13=33997]="TEXTURE13",Ju[Ju.TEXTURE14=33998]="TEXTURE14",Ju[Ju.TEXTURE15=33999]="TEXTURE15",Ju[Ju.TEXTURE16=34e3]="TEXTURE16",Ju[Ju.TEXTURE17=34001]="TEXTURE17",Ju[Ju.TEXTURE18=34002]="TEXTURE18",Ju[Ju.TEXTURE19=34003]="TEXTURE19",Ju[Ju.TEXTURE20=34004]="TEXTURE20",Ju[Ju.TEXTURE21=34005]="TEXTURE21",Ju[Ju.TEXTURE22=34006]="TEXTURE22",Ju[Ju.TEXTURE23=34007]="TEXTURE23",Ju[Ju.TEXTURE24=34008]="TEXTURE24",Ju[Ju.TEXTURE25=34009]="TEXTURE25",Ju[Ju.TEXTURE26=34010]="TEXTURE26",Ju[Ju.TEXTURE27=34011]="TEXTURE27",Ju[Ju.TEXTURE28=34012]="TEXTURE28",Ju[Ju.TEXTURE29=34013]="TEXTURE29",Ju[Ju.TEXTURE30=34014]="TEXTURE30",Ju[Ju.TEXTURE31=34015]="TEXTURE31",Ju[Ju.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",Ju[Ju.REPEAT=10497]="REPEAT",Ju[Ju.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",Ju[Ju.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",Ju[Ju.FLOAT_VEC2=35664]="FLOAT_VEC2",Ju[Ju.FLOAT_VEC3=35665]="FLOAT_VEC3",Ju[Ju.FLOAT_VEC4=35666]="FLOAT_VEC4",Ju[Ju.INT_VEC2=35667]="INT_VEC2",Ju[Ju.INT_VEC3=35668]="INT_VEC3",Ju[Ju.INT_VEC4=35669]="INT_VEC4",Ju[Ju.BOOL=35670]="BOOL",Ju[Ju.BOOL_VEC2=35671]="BOOL_VEC2",Ju[Ju.BOOL_VEC3=35672]="BOOL_VEC3",Ju[Ju.BOOL_VEC4=35673]="BOOL_VEC4",Ju[Ju.FLOAT_MAT2=35674]="FLOAT_MAT2",Ju[Ju.FLOAT_MAT3=35675]="FLOAT_MAT3",Ju[Ju.FLOAT_MAT4=35676]="FLOAT_MAT4",Ju[Ju.SAMPLER_2D=35678]="SAMPLER_2D",Ju[Ju.SAMPLER_CUBE=35680]="SAMPLER_CUBE",Ju[Ju.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",Ju[Ju.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",Ju[Ju.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",Ju[Ju.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",Ju[Ju.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",Ju[Ju.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",Ju[Ju.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",Ju[Ju.COMPILE_STATUS=35713]="COMPILE_STATUS",Ju[Ju.LOW_FLOAT=36336]="LOW_FLOAT",Ju[Ju.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",Ju[Ju.HIGH_FLOAT=36338]="HIGH_FLOAT",Ju[Ju.LOW_INT=36339]="LOW_INT",Ju[Ju.MEDIUM_INT=36340]="MEDIUM_INT",Ju[Ju.HIGH_INT=36341]="HIGH_INT",Ju[Ju.FRAMEBUFFER=36160]="FRAMEBUFFER",Ju[Ju.RENDERBUFFER=36161]="RENDERBUFFER",Ju[Ju.RGBA4=32854]="RGBA4",Ju[Ju.RGB5_A1=32855]="RGB5_A1",Ju[Ju.RGB565=36194]="RGB565",Ju[Ju.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",Ju[Ju.STENCIL_INDEX=6401]="STENCIL_INDEX",Ju[Ju.STENCIL_INDEX8=36168]="STENCIL_INDEX8",Ju[Ju.DEPTH_STENCIL=34041]="DEPTH_STENCIL",Ju[Ju.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",Ju[Ju.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",Ju[Ju.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",Ju[Ju.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",Ju[Ju.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",Ju[Ju.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",Ju[Ju.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",Ju[Ju.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",Ju[Ju.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",Ju[Ju.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",Ju[Ju.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",Ju[Ju.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",Ju[Ju.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",Ju[Ju.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",Ju[Ju.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",Ju[Ju.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",Ju[Ju.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",Ju[Ju.NONE=0]="NONE",Ju[Ju.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",Ju[Ju.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",Ju[Ju.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",Ju[Ju.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",Ju[Ju.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",Ju[Ju.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",Ju[Ju.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",Ju[Ju.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",Ju[Ju.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",Ju[Ju.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",Ju[Ju.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",Ju[Ju.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",Ju[Ju.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",Ju[Ju.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",Ju[Ju.COPY_SRC=1]="COPY_SRC",Ju[Ju.COPY_DST=2]="COPY_DST",Ju[Ju.SAMPLED=4]="SAMPLED",Ju[Ju.STORAGE=8]="STORAGE",Ju[Ju.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT";var Is=($u=Object(Lr.injectable)(),ts=Object(Lr.inject)(Ur.GeometryComponentManager),es=Object(Lr.inject)(Ur.RenderEngine),$u((rs=function(){function t(){Er()(this,t),xr()(this,"geometry",os,this),xr()(this,"engine",is,this)}var e;return Tr()(t,[{key:"execute",value:(e=Rr()(Or.a.mark((function t(){var e=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.geometry.forEach((function(t,n){n.dirty&&(n.attributes.forEach((function(t){var n;t.dirty&&t.data&&(t.buffer?null===(n=t.buffer)||void 0===n||n.subData({data:t.data,offset:0}):t.buffer=e.engine.createBuffer({data:t.data,type:Qu.FLOAT}),t.dirty=!1)})),n.indices&&(n.indicesBuffer?n.indicesBuffer.subData({data:n.indices,offset:0}):n.indicesBuffer=e.engine.createElements({data:n.indices,count:n.indices.length,type:Qu.UNSIGNED_INT,usage:Qu.STATIC_DRAW})),n.dirty=!1)}));case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.geometry.forEach((function(t,e){e.indicesBuffer&&e.indicesBuffer.destroy(),e.attributes.forEach((function(t){t.buffer&&t.buffer.destroy()}))})),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{vertexCount:3},e=t.vertexCount,n=Cr();return this.geometry.create(n,{vertexCount:e})}},{key:"createInstancedBufferGeometry",value:function(t){var e=t.maxInstancedCount,n=t.vertexCount,r=Cr();return this.geometry.create(r,{maxInstancedCount:e,vertexCount:n})}},{key:"createBox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.widthSegments||1,n=t.heightSegments||1,r=t.depthSegments||1,o=t.halfExtents||i.fromValues(.5,.5,.5),a=jr()(o,3),u=a[0],s=a[1],c=a[2],f=[i.fromValues(-u,-s,c),i.fromValues(u,-s,c),i.fromValues(u,s,c),i.fromValues(-u,s,c),i.fromValues(u,-s,-c),i.fromValues(-u,-s,-c),i.fromValues(-u,s,-c),i.fromValues(u,s,-c)],l=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],h=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],d={FRONT:0,BACK:1,TOP:2,BOTTOM:3,RIGHT:4,LEFT:5},p=[],v=[],m=[],y=[],g=[],b=0,_=function(t,e,n){var r,o,a,u;for(a=0;a<=e;a++)for(u=0;u<=n;u++){var s=i.create(),c=i.create(),d=i.create(),_=i.create();i.lerp(s,f[l[t][0]],f[l[t][1]],a/e),i.lerp(c,f[l[t][0]],f[l[t][2]],u/n),i.sub(d,c,f[l[t][0]]),i.add(_,s,d),r=a/e,o=u/n,p.push(_[0],_[1],_[2]),v.push(h[t][0],h[t][1],h[t][2]),m.push(r,o),r=.875*(r/=3)+4/64,o=.875*(o/=3)+4/64,r+=t%3/3,o+=Math.floor(t/3)/3,y.push(r,o),a<e&&u<n&&(g.push(b+n+1,b+1,b),g.push(b+n+1,b+n+2,b+1)),b++}};_(d.FRONT,e,n),_(d.BACK,e,n),_(d.TOP,e,r),_(d.BOTTOM,e,r),_(d.RIGHT,r,n),_(d.LEFT,r,n);var x=As(p),w=Cr();return this.geometry.create(w,{indices:Uint32Array.from(g),aabb:x,attributes:[{dirty:!0,name:"position",data:Float32Array.from(p),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]}]})}}]),t}(),os=Ir()(rs.prototype,"geometry",[ts],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),is=Ir()(rs.prototype,"engine",[es],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ns=rs))||ns);n(169);function ks(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Os,Ds,Rs,Ms,Cs,Ns,Ps,Gs,js,Ls=function(t){Wr()(n,t);var e=ks(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).vertexShaderGLSL=void 0,r.fragmentShaderGLSL=void 0,r.dirty=!0,r.uniforms=[],r.cull={enable:!0,face:Qu.BACK},r.depth={enable:!0},r.blend=void 0,Object.assign(co()(r),t),r}return Tr()(n,[{key:"setCull",value:function(t){return this.cull=t,this}},{key:"setDepth",value:function(t){return this.depth=t,this}},{key:"setBlend",value:function(t){return this.blend=t,this}},{key:"setUniform",value:function(t,e){var n=this;if("string"!=typeof t)return Object.keys(t).forEach((function(e){return n.setUniform(e,t[e])})),this;var r=this.uniforms.find((function(e){return e.name===t}));return r?(r.dirty=!0,r.data=e):this.uniforms.push({name:t,dirty:!0,data:e}),this.dirty=!0,this}}]),n}(Nr);function Us(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Bs(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Us(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Us(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Fs,zs=(Os=Object(Lr.injectable)(),Ds=Object(Lr.inject)(Ur.MaterialComponentManager),Rs=Object(Lr.inject)(Ur.RenderEngine),Ms=Object(Lr.inject)(Ur.ShaderModuleService),Os((Ns=function(){function t(){Er()(this,t),xr()(this,"material",Ps,this),xr()(this,"engine",Gs,this),xr()(this,"shaderModule",js,this)}var e;return Tr()(t,[{key:"execute",value:(e=Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(this.material.map(function(){var t=Rr()(Or.a.mark((function t(e,n){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.material.clear()}},{key:"createBasicMaterial",value:function(){var t=Cr();return this.material.create(t,{vertexShaderGLSL:this.engine.supportWebGPU?"layout(set = 0, binding = 0) uniform Uniforms {\\n  vec4 color;\\n  mat4 projectionMatrix;\\n  mat4 modelViewMatrix;\\n} uniforms;\\n\\nlayout(location = 0) in vec3 position;\\n// layout(location = 1) in vec3 barycentric;\\n\\nlayout(location = 0) out vec4 fragColor;\\n// layout(location = 1) out vec3 v_Barycentric;\\n\\nvoid main() {\\n  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);\\n  fragColor = uniforms.color;\\n  // v_Barycentric = barycentric;\\n}":"attribute vec3 position;\\n\\nuniform mat4 projectionMatrix;\\nuniform mat4 modelViewMatrix;\\nuniform vec4 color;\\n\\nvarying vec4 fragColor;\\n\\nvoid main() {\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n  fragColor = color;\\n}",fragmentShaderGLSL:this.engine.supportWebGPU?"// layout(set = 0, binding = 1) uniform WireframeUniforms {\\n//   float lineWidth;\\n//   vec4 lineColor;\\n// } wireframe;\\n\\nlayout(location = 0) in vec4 fragColor;\\n// layout(location = 1) in vec3 v_Barycentric;\\n\\nlayout(location = 0) out vec4 outColor;\\n\\n// wireframe\\n// float edgeFactor() {\\n//   vec3 d = fwidth(v_Barycentric);\\n//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);\\n//   return min(min(a3.x, a3.y), a3.z);\\n// }\\n\\nvoid main() {\\n  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));\\n  outColor = fragColor;\\n}":"varying vec4 fragColor;\\n\\nvoid main() {\\n  gl_FragColor = fragColor;\\n}"})}},{key:"createShaderMaterial",value:function(t){var e=Cr(),n=t.vertexShader,r=t.fragmentShader,o=[];if(!this.engine.supportWebGPU){var i="material-".concat(e);this.shaderModule.registerModule(i,{vs:t.vertexShader,fs:t.fragmentShader});var a=this.shaderModule.getModule(i);n=a.vs,r=a.fs,a.uniforms&&(o=Object.keys(a.uniforms).map((function(t){return{dirty:!0,name:t,data:a.uniforms[t]}})))}return this.material.create(e,Bs(Bs({vertexShaderGLSL:n,fragmentShaderGLSL:r},t),{},{uniforms:o}))}}]),t}(),Ps=Ir()(Ns.prototype,"material",[Ds],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gs=Ir()(Ns.prototype,"engine",[Rs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),js=Ir()(Ns.prototype,"shaderModule",[Ms],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cs=Ns))||Cs);function Vs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}!function(t){t[t.Standard=0]="Standard"}(Fs||(Fs={}));var Ws=function(t){Wr()(n,t);var e=Vs(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).strategy=Fs.Standard,r.visibilityPlaneMask=0,r.visible=!1,Object.assign(co()(r),t),r}return n}(Nr);n(170);function Xs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Hs,qs=function(t){Wr()(n,t);var e=Xs(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).material=void 0,r.geometry=void 0,r.aabb=new Ts,r.aabbDirty=!0,r.model=void 0,r.visible=!0,Object.assign(co()(r),t),r}return n}(Nr),Ys=function(){function t(e,n){Er()(this,t),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=e||0,this.normal=n||i.fromValues(0,1,0),this.updatePNVertexFlag()}return Tr()(t,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(t){return i.dot(t,this.normal)-this.distance}},{key:"normalize",value:function(){var t=1/i.len(this.normal);i.scale(this.normal,this.normal,t),this.distance*=t}},{key:"intersectsLine",value:function(t,e,n){var r=this.distanceToPoint(t),o=r/(r-this.distanceToPoint(e)),a=o>=0&&o<=1;return a&&n&&i.lerp(n,t,e,o),a}}]),t}();!function(t){t[t.OUTSIDE=4294967295]="OUTSIDE",t[t.INSIDE=0]="INSIDE",t[t.INDETERMINATE=2147483647]="INDETERMINATE"}(Hs||(Hs={}));var Ks,Zs,Qs,Js,$s,tc,ec,nc,rc,oc,ic,ac,uc,sc=function(){function t(e){if(Er()(this,t),this.planes=[],e)this.planes=e;else for(var n=0;n<6;n++)this.planes.push(new Ys)}return Tr()(t,[{key:"extractFromVPMatrix",value:function(t){var e=jr()(t,16),n=e[0],r=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],d=e[10],p=e[11],v=e[12],m=e[13],y=e[14],g=e[15];i.set(this.planes[0].normal,a-n,f-u,p-l),this.planes[0].distance=-(g-v),i.set(this.planes[1].normal,a+n,f+u,p+l),this.planes[1].distance=-(g+v),i.set(this.planes[2].normal,a+r,f+s,p+h),this.planes[2].distance=-(g+m),i.set(this.planes[3].normal,a-r,f-s,p-h),this.planes[3].distance=-(g-m),i.set(this.planes[4].normal,a-o,f-c,p-d),this.planes[4].distance=-(g-y),i.set(this.planes[5].normal,a+o,f+c,p+d),this.planes[5].distance=-(g+y),this.planes.forEach((function(t){t.normalize(),t.updatePNVertexFlag()}))}}]),t}(),cc=n(35),fc=n.n(cc);function lc(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return hc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hc(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function hc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var dc,pc,vc,mc,yc,gc,bc,_c,xc,wc,Ec,Sc,Tc,Ac,Ic,kc,Oc,Dc,Rc,Mc,Cc,Nc,Pc,Gc,jc=(Ks=Object(Lr.injectable)(),Zs=Object(Lr.inject)(Ur.MeshComponentManager),Qs=Object(Lr.inject)(Ur.CullableComponentManager),Js=Object(Lr.inject)(Ur.GeometryComponentManager),$s=Object(Lr.inject)(Ur.HierarchyComponentManager),tc=Object(Lr.inject)(Ur.TransformComponentManager),Ks((nc=function(){function t(){Er()(this,t),xr()(this,"mesh",rc,this),xr()(this,"cullable",oc,this),xr()(this,"geometry",ic,this),xr()(this,"hierarchy",ac,this),xr()(this,"transform",uc,this),this.planes=void 0}var e;return Tr()(t,[{key:"setFrustumPlanes",value:function(t){this.planes=t}},{key:"execute",value:(e=Rr()(Or.a.mark((function t(e){var n,o,a,u=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=lc(e);try{for(a=function(){var t=o.value,e=(t.getScene(),t.getCamera());u.mesh.forEach((function(t,n){var o,a,s=u.hierarchy.getComponentByEntity(t),c=u.cullable.getComponentByEntity(t),f=n.geometry,l=u.transform.getComponentByEntity(t);if(f&&f.aabb&&l&&n.aabbDirty){var h=l.worldTransform,d=f.aabb,p=d.center,v=d.halfExtents,m=i.transformMat4(i.create(),p,h),y=(o=h,(a=r.create())[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[4],a[4]=o[5],a[5]=o[6],a[6]=o[8],a[7]=o[9],a[8]=o[10],a),g=i.transformMat3(i.create(),v,y);n.aabb.update(m,g),n.aabbDirty=!1}if(c&&f){var b=u.cullable.getComponentByEntity((null==s?void 0:s.parentID)||-1);c.visibilityPlaneMask=u.computeVisibilityWithPlaneMask(n.aabb,(null==b?void 0:b.visibilityPlaneMask)||Hs.INDETERMINATE,u.planes||e.getFrustum().planes),c.visible=c.visibilityPlaneMask!==Hs.OUTSIDE}}))},n.s();!(o=n.n()).done;)a()}catch(t){n.e(t)}finally{n.f()}case 2:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(t,e,n){if(e===Hs.OUTSIDE||e===Hs.INSIDE)return e;for(var r=Hs.INSIDE,o=0,a=n.length;o<a;++o){var u=o<31?1<<o:0;if(!(o<31&&0==(e&u))){var s=n[o],c=s.normal,f=s.distance;if(i.dot(c,t.getNegativeFarPoint(n[o]))+f>0)return Hs.OUTSIDE;i.dot(c,t.getPositiveFarPoint(n[o]))+f>0&&(r|=u)}}return r}}]),t}(),rc=Ir()(nc.prototype,"mesh",[Zs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oc=Ir()(nc.prototype,"cullable",[Qs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ic=Ir()(nc.prototype,"geometry",[Js],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ac=Ir()(nc.prototype,"hierarchy",[$s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uc=Ir()(nc.prototype,"transform",[tc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ec=nc))||ec);function Lc(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Uc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uc(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Uc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Bc,Fc,zc,Vc,Wc,Xc,Hc,qc,Yc,Kc,Zc,Qc,Jc,$c,tf,ef,nf,rf,of,af,uf,sf,cf=(dc=Object(Lr.injectable)(),pc=Object(Lr.inject)(Ur.MeshComponentManager),vc=Object(Lr.inject)(Ur.GeometryComponentManager),mc=Object(Lr.inject)(Ur.MaterialComponentManager),yc=Object(Lr.inject)(Ur.CullableComponentManager),gc=Object(Lr.inject)(Ur.TransformComponentManager),bc=Object(Lr.inject)(Ur.HierarchyComponentManager),_c=Object(Lr.inject)(Ur.Systems),xc=Object(Lr.named)(Ur.FrameGraphSystem),wc=Object(Lr.inject)(Ur.RenderEngine),Ec=Object(Lr.inject)(Ur.ResourcePool),dc((Gc=Pc=function(){function t(){var e=this;Er()(this,t),xr()(this,"mesh",Ac,this),xr()(this,"geometry",Ic,this),xr()(this,"material",kc,this),xr()(this,"cullable",Oc,this),xr()(this,"transform",Dc,this),xr()(this,"hierarchy",Rc,this),xr()(this,"frameGraphSystem",Mc,this),xr()(this,"engine",Cc,this),xr()(this,"resourcePool",Nc,this),this.setup=function(t,e,n){var r=t.createRenderTarget(e,"color buffer",{width:1,height:1,usage:Qu.RENDER_ATTACHMENT|Qu.SAMPLED|Qu.COPY_SRC});n.data={output:e.write(t,r)}},this.execute=function(){var t=Rr()(Or.a.mark((function t(n,r,o){var i,a,u,s,c,f;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=n.getResourceNode(r.data.output),a=e.resourcePool.getOrCreateResource(i.resource),u=Lc(o),t.prev=3,u.s();case 5:if((s=u.n()).done){t.next=11;break}return c=s.value,t.next=9,e.initView(c);case 9:t.next=5;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),u.e(t.t0);case 16:return t.prev=16,u.f(),t.finish(16);case 19:f=e.engine.getCanvas(),a.resize({width:f.width,height:f.height}),e.engine.setScissor({enable:!1}),e.engine.clear({framebuffer:a,color:o[0].getClearColor(),depth:1}),e.engine.useFramebuffer(a,(function(){var t,n=Lc(o);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.renderView(r)}}catch(t){n.e(t)}finally{n.f()}}));case 24:case"end":return t.stop()}}),t,null,[[3,13,16,19]])})));return function(e,n,r){return t.apply(this,arguments)}}()}var e,n;return Tr()(t,[{key:"renderView",value:function(t){var e=t.getScene(),n=t.getCamera(),r=n.getViewTransform(),i=o.multiply(o.create(),n.getPerspective(),r);n.getFrustum().extractFromVPMatrix(i);var a=t.getViewport(),u=a.x,s=a.y,c=a.width,f=a.height;this.engine.viewport({x:u,y:s,width:c,height:f});var l,h=Lc(e.getEntities());try{for(h.s();!(l=h.n()).done;){var d=l.value;this.renderMesh(d,{camera:n,view:t,viewMatrix:r})}}catch(t){h.e(t)}finally{h.f()}}},{key:"renderMesh",value:function(t,e){var n=this,r=e.camera,i=e.view,a=e.viewMatrix,u=this.mesh.getComponentByEntity(t);if(u.visible){this.hierarchy.forEach((function(e,o){o.parentID===t&&n.renderMesh(e,{camera:r,view:i,viewMatrix:a})}));var s=u.material,c=u.geometry;if(c&&!c.dirty&&s){var f=this.transform.getComponentByEntity(t),l=o.multiply(o.create(),a,f.worldTransform),h=i.getViewport(),d=h.width,p=h.height;s.setUniform({projectionMatrix:r.getPerspective(),modelViewMatrix:l,modelMatrix:f.worldTransform,viewMatrix:a,cameraPosition:r.getPosition(),u_viewport:[d,p]}),u.model&&(u.model.draw({uniforms:s.uniforms.reduce((function(t,e){return t[e.name]=e.data,t}),{})}),s.uniforms.forEach((function(t){t.dirty=!1})),s.dirty=!1)}}}},{key:"initMesh",value:(n=Rr()(Or.a.mark((function t(e,n){var r,o,i,a,u,s,c,f=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.mesh.getComponentByEntity(e)){t.next=3;break}return t.abrupt("return");case 3:return o=r.material,i=r.geometry,t.next=7,this.hierarchy.forEachAsync(function(){var t=Rr()(Or.a.mark((function t(r,o){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.parentID!==e){t.next=4;break}return t.next=4,f.initMesh(r,n);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 7:if(i&&!i.dirty&&o){t.next=9;break}return t.abrupt("return");case 9:if(r.model){t.next=21;break}return o.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),a=this.engine,u=a.createModel,s=a.createAttribute,c={vs:o.vertexShaderGLSL,fs:o.fragmentShaderGLSL,attributes:i.attributes.reduce((function(t,e){return e.data&&e.buffer&&(t[e.name]=s({buffer:e.buffer,attributes:e.attributes,arrayStride:e.arrayStride,stepMode:e.stepMode,divisor:"vertex"===e.stepMode?0:1})),t}),{}),uniforms:o.uniforms.reduce((function(t,e){return t[e.name]=e.data,t}),{}),scissor:{enable:!0,box:function(){return n.getViewport()}}},o.cull&&(c.cull=o.cull),o.depth&&(c.depth=o.depth),o.blend&&(c.blend=o.blend),i.indicesBuffer&&(c.elements=i.indicesBuffer),i.maxInstancedCount&&(c.instances=i.maxInstancedCount,c.count=i.vertexCount||3),t.next=20,u(c);case 20:r.model=t.sent;case 21:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"initView",value:(e=Rr()(Or.a.mark((function t(e){var n,r,o,i;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getScene(),r=Lc(n.getEntities()),t.prev=2,r.s();case 4:if((o=r.n()).done){t.next=10;break}return i=o.value,t.next=8,this.initMesh(i,e);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),r.e(t.t0);case 15:return t.prev=15,r.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[2,12,15,18]])}))),function(t){return e.apply(this,arguments)})}]),t}(),Pc.IDENTIFIER="Render Pass",Tc=Gc,Ac=Ir()(Tc.prototype,"mesh",[pc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ic=Ir()(Tc.prototype,"geometry",[vc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kc=Ir()(Tc.prototype,"material",[mc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oc=Ir()(Tc.prototype,"cullable",[yc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dc=Ir()(Tc.prototype,"transform",[gc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rc=Ir()(Tc.prototype,"hierarchy",[bc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mc=Ir()(Tc.prototype,"frameGraphSystem",[_c,xc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cc=Ir()(Tc.prototype,"engine",[wc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nc=Ir()(Tc.prototype,"resourcePool",[Ec],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sc=Tc))||Sc),ff=(Bc=Object(Lr.injectable)(),Fc=Object(Lr.inject)(Ur.RenderEngine),zc=Object(Lr.inject)(Ur.ResourcePool),Bc((Yc=qc=function t(){var e=this;Er()(this,t),xr()(this,"engine",Xc,this),xr()(this,"resourcePool",Hc,this),this.model=void 0,this.setup=function(t,e,n){var r=t.getPass(cf.IDENTIFIER);if(r){var o=t.createRenderTarget(e,"render to screen",{width:1,height:1});n.data={input:e.read(r.data.output),output:e.write(t,o)}}},this.execute=function(){var t=Rr()(Or.a.mark((function t(n,r){var o,i,a,u,s,c,f;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.engine,i=o.createModel,a=o.createAttribute,u=o.createBuffer,e.model){t.next=6;break}return t.next=4,i({vs:e.engine.supportWebGPU?"layout(location = 0) in vec2 a_Position;\\nlayout(location = 0) out vec2 v_UV;\\n\\nvoid main() {\\n  v_UV = 0.5 * (a_Position + 1.0);\\n  gl_Position = vec4(a_Position, 0., 1.);\\n}":"attribute vec2 a_Position;\\n\\nvarying vec2 v_UV;\\n\\nvoid main() {\\n  v_UV = 0.5 * (a_Position + 1.0);\\n  gl_Position = vec4(a_Position, 0., 1.);\\n}",fs:e.engine.supportWebGPU?"layout(set = 0, binding = 0) uniform sampler u_TextureSampler;\\nlayout(set = 0, binding = 1) uniform texture2D u_Texture;\\n\\nlayout(location = 0) in vec2 v_UV;\\nlayout(location = 0) out vec4 outColor;\\n\\nvoid main() {\\n  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);\\n}":"varying vec2 v_UV;\\n\\nuniform sampler2D u_Texture;\\n\\nvoid main() {\\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\\n}",attributes:{a_Position:a({buffer:u({data:[-4,-4,4,-4,0,4],type:Qu.FLOAT}),size:2,arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:s=t.sent,e.model=s;case 6:c=n.getResourceNode(r.data.input),f=e.resourcePool.getOrCreateResource(c.resource),e.engine.useFramebuffer(null,(function(){e.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),e.model.draw({uniforms:{u_Texture:f}})}));case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),this.tearDown=function(){e.model=void 0}},qc.IDENTIFIER="Copy Pass",Wc=Yc,Xc=Ir()(Wc.prototype,"engine",[Fc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hc=Ir()(Wc.prototype,"resourcePool",[zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vc=Wc))||Vc);function lf(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return hf(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hf(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function hf(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var df,pf,vf,mf,yf,gf,bf,_f,xf,wf,Ef,Sf,Tf=1,Af=2,If=(Kc=Object(Lr.injectable)(),Zc=Object(Lr.inject)(Ur.RenderEngine),Qc=Object(Lr.inject)(Ur.ResourcePool),Jc=Object(Lr.inject)(Ur.RenderPassFactory),$c=Object(Lr.inject)(Ur.MeshComponentManager),Kc((sf=uf=function(){function t(){var e=this;Er()(this,t),xr()(this,"engine",nf,this),xr()(this,"resourcePool",rf,this),xr()(this,"renderPassFactory",of,this),xr()(this,"mesh",af,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(t,e,n){var r=t.createRenderTarget(e,"picking fbo",{width:1,height:1});n.data={output:e.write(t,r)},e.hasSideEffect=!0},this.execute=function(){var t=Rr()(Or.a.mark((function t(n,r,o){var i,a,u;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.views=o,!e.alreadyInRendering){t.next=3;break}return t.abrupt("return");case 3:i=lf(o);try{for(u=function(){var t=a.value,o=t.getViewport(),i=o.width,u=o.height;e.alreadyInRendering=!0;var s=n.getResourceNode(r.data.output);e.pickingFBO=e.resourcePool.getOrCreateResource(s.resource),e.pickingFBO.resize({width:i,height:u}),e.engine.useFramebuffer(e.pickingFBO,(function(){e.engine.clear({framebuffer:e.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var n,r=e.renderPassFactory(cf.IDENTIFIER),o=[],i=lf(t.getScene().getEntities());try{for(i.s();!(n=i.n()).done;){var a=n.value,u=e.mesh.getComponentByEntity(a);u.material.setUniform("u_PickingStage",Tf),o.push(u)}}catch(t){i.e(t)}finally{i.f()}r.renderView(t),o.forEach((function(t){t.material.setUniform("u_PickingStage",Af)})),e.alreadyInRendering=!1}))},i.s();!(a=i.n()).done;)u()}catch(t){i.e(t)}finally{i.f()}case 5:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),this.pick=function(t,n){var r,o,i=t.x,a=t.y,u=e.engine,s=u.readPixels,c=u.useFramebuffer,f=n.getViewport(),l=f.width,h=f.height,d=i*window.devicePixelRatio,p=a*window.devicePixelRatio;if(!(d>l||d<0||p>h||p<0))return c(e.pickingFBO,(function(){var t,i;0===(r=s({x:Math.round(d),y:Math.round(h-(a+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(4),framebuffer:e.pickingFBO}))[0]&&0===r[1]&&0===r[2]||(t=r,i=jr()(t,3),o=i[0]+256*i[1]+65536*i[2]-1,e.highlightEnabled&&e.highlightPickedFeature(r,n))})),o}}return Tr()(t,[{key:"enableHighlight",value:function(t){this.highlightEnabled=t}},{key:"setHighlightColor",value:function(t){this.highlightColor=t}},{key:"highlightPickedFeature",value:function(t,e){if(t){var n,r=lf(e.getScene().getEntities());try{for(r.s();!(n=r.n()).done;){var o=n.value,i=this.mesh.getComponentByEntity(o).material;i.setUniform("u_PickingStage",Af),i.setUniform("u_PickingColor",[t[0],t[1],t[2]]),i.setUniform("u_HighlightColor",this.highlightColor)}}catch(t){r.e(t)}finally{r.f()}}}}]),t}(),uf.IDENTIFIER="PixelPicking Pass",ef=sf,nf=Ir()(ef.prototype,"engine",[Zc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rf=Ir()(ef.prototype,"resourcePool",[Qc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),of=Ir()(ef.prototype,"renderPassFactory",[Jc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),af=Ir()(ef.prototype,"mesh",[$c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tf=ef))||tf),kf=(df=Object(Lr.injectable)(),pf=Object(Lr.inject)(Ur.Systems),vf=Object(Lr.named)(Ur.FrameGraphSystem),mf=Object(Lr.inject)(Ur.RenderPassFactory),yf=Object(Lr.inject)(Ur.ConfigService),gf=Object(Lr.inject)(Ur.ResourcePool),df((_f=function(){function t(){Er()(this,t),xr()(this,"frameGraphSystem",xf,this),xr()(this,"renderPassFactory",wf,this),xr()(this,"configService",Ef,this),xr()(this,"resourcePool",Sf,this)}var e;return Tr()(t,[{key:"execute",value:(e=Rr()(Or.a.mark((function t(e){var n,r,o,i,a,u,s,c;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this.renderPassFactory(cf.IDENTIFIER),r=n.setup,o=n.execute,this.frameGraphSystem.addPass(cf.IDENTIFIER,r,o),i=this.renderPassFactory(ff.IDENTIFIER),a=i.setup,u=i.execute,s=i.tearDown,c=this.frameGraphSystem.addPass(ff.IDENTIFIER,a,u,s),this.frameGraphSystem.present(c.data.output);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(t,e){return this.renderPassFactory(If.IDENTIFIER).pick(t,e)}}]),t}(),xf=Ir()(_f.prototype,"frameGraphSystem",[pf,vf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wf=Ir()(_f.prototype,"renderPassFactory",[mf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ef=Ir()(_f.prototype,"configService",[yf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sf=Ir()(_f.prototype,"resourcePool",[gf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bf=_f))||bf);function Of(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Df,Rf,Mf,Cf,Nf,Pf,Gf,jf,Lf,Uf=function(t){Wr()(n,t);var e=Of(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).parentID=void 0,Object.assign(co()(r),t),r}return n}(Nr),Bf=(Df=Object(Lr.injectable)(),Rf=Object(Lr.inject)(Ur.HierarchyComponentManager),Mf=Object(Lr.inject)(Ur.TransformComponentManager),Cf=Object(Lr.inject)(Ur.MeshComponentManager),Df((Pf=function(){function t(){Er()(this,t),xr()(this,"hierarchy",Gf,this),xr()(this,"transform",jf,this),xr()(this,"mesh",Lf,this)}var e;return Tr()(t,[{key:"execute",value:(e=Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var t=this;this.transform.forEach((function(e,n){n.isDirty()&&(t.setMeshAABBDirty(e),n.updateTransform())}))}},{key:"runHierarchyUpdateSystem",value:function(){var t=this;this.hierarchy.forEach((function(e,n){var r=t.transform.getComponentByEntity(e),o=t.transform.getComponentByEntity(n.parentID);null!==r&&null!==o&&r.updateTransformWithParent(o)}))}},{key:"attach",value:function(t,e,n){if(this.hierarchy.contains(t)&&this.detach(t),this.hierarchy.create(t,{parentID:e}),this.setMeshAABBDirty(e),this.hierarchy.getCount()>1)for(var r=this.hierarchy.getCount()-1;r>0;--r)for(var i=this.hierarchy.getEntity(r),a=0;a<r;++a){if(this.hierarchy.getComponent(a).parentID===i){this.hierarchy.moveItem(r,a),++r;break}}this.hierarchy.getComponentByEntity(t);var u=this.transform.getComponentByEntity(e);null===u&&(u=this.transform.create(e));var s=this.transform.getComponentByEntity(t);null===s&&(s=this.transform.create(t),u=this.transform.getComponentByEntity(e)),!n&&u&&(s.matrixTransform(o.invert(o.create(),u.worldTransform)),s.updateTransform()),u&&s.updateTransformWithParent(u)}},{key:"detach",value:function(t){if(null!==this.hierarchy.getComponentByEntity(t)){var e=this.transform.getComponentByEntity(t);null!==e&&e.applyTransform(),this.hierarchy.removeKeepSorted(t),this.setMeshAABBDirty(t)}}},{key:"detachChildren",value:function(t){for(var e=0;e<this.hierarchy.getCount();){var n;if((null===(n=this.hierarchy.getComponent(e))||void 0===n?void 0:n.parentID)===t){var r=this.hierarchy.getEntity(e);this.detach(r)}else++e}}},{key:"setMeshAABBDirty",value:function(t){var e=this.mesh.getComponentByEntity(t);e&&(e.aabbDirty=!0)}}]),t}(),Gf=Ir()(Pf.prototype,"hierarchy",[Rf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jf=Ir()(Pf.prototype,"transform",[Mf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lf=Ir()(Pf.prototype,"mesh",[Cf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nf=Pf))||Nf);function Ff(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var zf=function(t){Wr()(n,t);var e=Ff(n);function n(t){var r,a,s,c,f,l,h,d,p,v,m,y,g,b,_;return Er()(this,n),(r=e.call(this,t)).dirtyFlag=void 0,r.localTranslation=i.fromValues(0,0,0),r.localRotation=u.fromValues(0,0,0,1),r.localScale=i.fromValues(1,1,1),r.localTransform=o.create(),r.worldTransform=o.create(),r.getRotation=(a=u.create(),function(){return o.getRotation(a,r.worldTransform),a}),r.getScale=(s=i.create(),function(){return o.getScaling(s,r.worldTransform),s}),r.getPosition=(c=i.create(),function(){return o.getTranslation(c,r.worldTransform),c}),r.getLocalMatrix=(f=o.create(),function(){return o.fromRotationTranslationScale(f,r.localRotation,r.localTranslation,r.localScale),f}),r.matrixTransform=(l=o.create(),function(t){o.multiply(l,r.getLocalMatrix(),t),o.getScaling(r.localScale,l),o.getTranslation(r.localTranslation,l),o.getRotation(r.localRotation,l)}),r.rotateRollPitchYaw=(h=u.create(),d=u.create(),p=u.create(),function(t,e,n){r.setDirty(),u.fromEuler(h,t,0,0),u.fromEuler(d,0,e,0),u.fromEuler(p,0,0,n),u.multiply(r.localRotation,h,r.localRotation),u.multiply(r.localRotation,r.localRotation,d),u.multiply(r.localRotation,p,r.localRotation),u.normalize(r.localRotation,r.localRotation)}),r.lerp=(v=i.create(),m=u.create(),y=i.create(),g=i.create(),b=u.create(),_=i.create(),function(t,e,n){r.setDirty(),o.getScaling(v,t.worldTransform),o.getTranslation(y,t.worldTransform),o.getRotation(m,t.worldTransform),o.getScaling(g,e.worldTransform),o.getTranslation(_,e.worldTransform),o.getRotation(b,e.worldTransform),i.lerp(r.localScale,v,g,n),u.slerp(r.localRotation,m,b,n),i.lerp(r.localTranslation,y,_,n)}),r}return Tr()(n,[{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?this.dirtyFlag|=n.DIRTY:this.dirtyFlag&=~n.DIRTY}},{key:"updateTransform",value:function(){this.isDirty()&&(this.setDirty(!1),o.copy(this.worldTransform,this.getLocalMatrix()))}},{key:"updateTransformWithParent",value:function(t){o.multiply(this.worldTransform,this.getLocalMatrix(),t.worldTransform)}},{key:"applyTransform",value:function(){this.setDirty(),o.getScaling(this.localScale,this.worldTransform),o.getTranslation(this.localTranslation,this.worldTransform),o.getRotation(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localTranslation=i.fromValues(0,0,0),this.localRotation=u.fromValues(0,0,0,1),this.localScale=i.fromValues(1,1,1)}},{key:"translate",value:function(t){return this.setDirty(),i.add(this.localTranslation,this.localTranslation,t),this}},{key:"scale",value:function(t){return this.setDirty(),i.multiply(this.localScale,this.localScale,t),this}},{key:"rotate",value:function(t){return this.setDirty(),u.multiply(this.localRotation,this.localRotation,t),u.normalize(this.localRotation,this.localRotation),this}}]),n}(Nr);zf.DIRTY=1;n(93),n(94),n(171),n(95),n(96),n(73),n(97),n(27),n(98),n(172);var Vf,Wf,Xf,Hf,qf,Yf=n(103),Kf=n(187),Zf=n.n(Kf),Qf=(Vf=Object(Lr.injectable)(),Wf=Object(Lr.inject)(Ur.RenderEngine),Vf((Hf=function(){function t(){Er()(this,t),xr()(this,"engine",qf,this),this.resourcePool={}}return Tr()(t,[{key:"getOrCreateResource",value:function(t){if(!this.resourcePool[t.name]){var e=t.descriptor,n=e.width,r=e.height,o=e.usage;this.resourcePool[t.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:n,height:r,wrapS:Qu.CLAMP_TO_EDGE,wrapT:Qu.CLAMP_TO_EDGE,usage:o})})}return this.resourcePool[t.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),t}(),qf=Ir()(Hf.prototype,"engine",[Wf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xf=Hf))||Xf);function Jf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var $f,tl,el=function(t){Wr()(n,t);var e=Jf(n);function n(t){var r;return Er()(this,n),(r=e.call(this,t)).name=void 0,r.name=t.name||"",r}return n}(Nr),nl=Object(Lr.injectable)()($f=function(){function t(){Er()(this,t),this.config=void 0}return Tr()(t,[{key:"get",value:function(){return this.config}},{key:"set",value:function(t){this.config=t}}]),t}())||$f,rl=Object(Lr.injectable)()(tl=function(){function t(){Er()(this,t)}return Tr()(t,[{key:"listen",value:function(t){}},{key:"on",value:function(t,e){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),t}())||tl,ol=n(188),il=n.n(ol);var al,ul=/uniform\\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\\s+([\\s\\S]*?);/g;function sl(t){var e={};return{content:t=t.replace(ul,(function(t,n,r){var o=r.split(":"),i=o[0].trim(),a="";switch(o.length>1&&(a=o[1].trim()),n){case"bool":a="true"===a;break;case"float":case"int":a=Number(a);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":a=a?a.replace("[","").replace("]","").split(",").reduce((function(t,e){return t.push(Number(e.trim())),t}),[]):new Array(function(t){var e=0;switch(t){case"vec2":case"ivec2":e=2;break;case"vec3":case"ivec3":e=3;break;case"vec4":case"ivec4":case"mat2":e=4;break;case"mat3":e=9;break;case"mat4":e=16}return e}(n)).fill(0)}return e[i]=a,"uniform ".concat(n," ").concat(i,";\\n")})),uniforms:e}}function cl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cl(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ll=/precision\\s+(high|low|medium)p\\s+float/,hl=/#pragma include (["^+"]?["\\ "[a-zA-Z_0-9](.*)"]*?)/g,dl=Object(Lr.injectable)()(al=function(){function t(){Er()(this,t),this.moduleCache={},this.rawContentCache={}}return Tr()(t,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:"attribute vec3 a_PickingColor;\\nvarying vec4 v_PickingResult;\\n\\nuniform vec3 u_PickingColor : [0, 0, 0];\\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\\nuniform float u_PickingStage : 0.0;\\nuniform float u_PickingThreshold : 1.0;\\nuniform float u_PickingBuffer: 0.0;\\n\\n#define PICKING_ENCODE 1.0\\n#define PICKING_HIGHLIGHT 2.0\\n#define COLOR_SCALE 1. / 255.\\n\\nbool isVertexPicked(vec3 vertexColor) {\\n  return\\n    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&\\n    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&\\n    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;\\n}\\n\\nvoid setPickingColor(vec3 pickingColor) {\\n  // compares only in highlight stage\\n  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));\\n\\n  // Stores the picking color so that the fragment shader can render it during picking\\n  v_PickingResult.rgb = pickingColor * COLOR_SCALE;\\n}\\n\\nfloat setPickingSize(float x) {\\n   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;\\n}",fs:"varying vec4 v_PickingResult;\\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\\nuniform float u_PickingStage : 0.0;\\n\\n#define PICKING_ENCODE 1.0\\n#define PICKING_HIGHLIGHT 2.0\\n#define COLOR_SCALE 1. / 255.\\n\\n/*\\n * Returns highlight color if this item is selected.\\n */\\nvec4 filterHighlightColor(vec4 color) {\\n  bool selected = bool(v_PickingResult.a);\\n\\n  if (selected) {\\n    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;\\n\\n    float highLightAlpha = highLightColor.a;\\n    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));\\n\\n    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\\n    return vec4(resultRGB, color.a);\\n  } else {\\n    return color;\\n  }\\n}\\n\\n/*\\n * Returns picking color if picking enabled else unmodified argument.\\n */\\nvec4 filterPickingColor(vec4 color) {\\n  vec3 pickingColor = v_PickingResult.rgb;\\n  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {\\n    discard;\\n  }\\n  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;\\n}\\n\\n/*\\n * Returns picking color if picking is enabled if not\\n * highlight color if this item is selected, otherwise unmodified argument.\\n */\\nvec4 filterColor(vec4 color) {\\n  return filterPickingColor(filterHighlightColor(color));\\n}\\n"}),this.registerModule("sdf2d",{vs:"",fs:"/**\\n * 2D signed distance field functions\\n * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\\n */\\n\\nfloat ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }\\n\\nfloat sdCircle(vec2 p, float r) {\\n  return length(p) - r;\\n}\\n\\nfloat sdEquilateralTriangle(vec2 p) {\\n  float k = sqrt(3.0);\\n  p.x = abs(p.x) - 1.0;\\n  p.y = p.y + 1.0/k;\\n  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;\\n  p.x -= clamp( p.x, -2.0, 0.0 );\\n  return -length(p)*sign(p.y);\\n}\\n\\nfloat sdBox(vec2 p, vec2 b) {\\n  vec2 d = abs(p)-b;\\n  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);\\n}\\n\\nfloat sdPentagon(vec2 p, float r) {\\n  vec3 k = vec3(0.809016994,0.587785252,0.726542528);\\n  p.x = abs(p.x);\\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\\n  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);\\n  return length(p)*sign(p.y);\\n}\\n\\nfloat sdHexagon(vec2 p, float r) {\\n  vec3 k = vec3(-0.866025404,0.5,0.577350269);\\n  p = abs(p);\\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\\n  return length(p)*sign(p.y);\\n}\\n\\nfloat sdOctogon(vec2 p, float r) {\\n  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );\\n  p = abs(p);\\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\\n  return length(p)*sign(p.y);\\n}\\n\\nfloat sdHexagram(vec2 p, float r) {\\n  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);\\n  p = abs(p);\\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\\n  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;\\n  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);\\n  return length(p)*sign(p.y);\\n}\\n\\nfloat sdRhombus(vec2 p, vec2 b) {\\n  vec2 q = abs(p);\\n  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);\\n  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );\\n  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );\\n}\\n\\nfloat sdVesica(vec2 p, float r, float d) {\\n  p = abs(p);\\n  float b = sqrt(r*r-d*d); // can delay this sqrt\\n  return ((p.y-b)*d>p.x*b)\\n          ? length(p-vec2(0.0,b))\\n          : length(p-vec2(-d,0.0))-r;\\n}"})}},{key:"registerModule",value:function(t,e){if(!this.rawContentCache[t]){var n=e.vs,r=e.fs,o=e.uniforms,i=sl(n),a=i.content,u=i.uniforms,s=sl(r),c=s.content,f=s.uniforms;this.rawContentCache[t]={fs:c,uniforms:fl(fl(fl({},u),f),o),vs:a}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(t){var e=this;if(this.moduleCache[t])return this.moduleCache[t];var n=this.rawContentCache[t].vs,r=this.rawContentCache[t].fs,o=this.processModule(n,[],"vs"),i=o.content,a=o.includeList,u=this.processModule(r,[],"fs"),s=u.content,c=u.includeList,f=s,l=il()(a.concat(c).concat(t)).reduce((function(t,n){return fl(fl({},t),e.rawContentCache[n].uniforms)}),{});return ll.test(s)||(f="#ifdef GL_FRAGMENT_PRECISION_HIGH\\n precision highp float;\\n #else\\n precision mediump float;\\n#endif\\n"+s),this.moduleCache[t]={fs:f.trim(),uniforms:l,vs:i.trim()},this.moduleCache[t]}},{key:"processModule",value:function(t,e,n){var r=this;return{content:t.replace(hl,(function(t,o){var i=o.split(" ")[0].replace(/"/g,"");if(e.indexOf(i)>-1)return"";var a=r.rawContentCache[i][n];return e.push(i),r.processModule(a,e,n).content})),includeList:e}}}]),t}())||al,pl=new Lr.Container;Object(Lr.decorate)(Object(Lr.injectable)(),Yf.EventEmitter),pl.bind(Ur.IEventEmitter).to(Yf.EventEmitter);Zf()(pl,!1);function vl(){var t=new Lr.Container;return t.parent=pl,t.bind(Ur.Systems).to(Bf).inSingletonScope().whenTargetNamed(Ur.SceneGraphSystem),t.bind(Ur.Systems).to(io).inSingletonScope().whenTargetNamed(Ur.FrameGraphSystem),t.bind(Ur.Systems).to(jc).inSingletonScope().whenTargetNamed(Ur.MeshSystem),t.bind(Ur.Systems).to(Is).inSingletonScope().whenTargetNamed(Ur.GeometrySystem),t.bind(Ur.Systems).to(zs).inSingletonScope().whenTargetNamed(Ur.MaterialSystem),t.bind(Ur.Systems).to(kf).inSingletonScope().whenTargetNamed(Ur.RendererSystem),t.bind(Ur.ResourcePool).to(Qf).inSingletonScope(),t.bind(Ur.ConfigService).to(nl).inSingletonScope(),t.bind(Ur.InteractorService).to(rl).inSingletonScope(),t.bind(Ur.RenderPass).to(cf).inSingletonScope().whenTargetNamed(cf.IDENTIFIER),t.bind(Ur.RenderPass).to(ff).inSingletonScope().whenTargetNamed(ff.IDENTIFIER),t.bind(Ur.RenderPass).to(If).inSingletonScope().whenTargetNamed(If.IDENTIFIER),t.bind(Ur.RenderPassFactory).toFactory((function(t){return function(e){return t.container.getNamed(Ur.RenderPass,e)}})),t}pl.bind(Ur.ShaderModuleService).to(dl).inSingletonScope(),pl.bind(Ur.NameComponentManager).toConstantValue(new Pr(el)),pl.bind(Ur.HierarchyComponentManager).toConstantValue(new Pr(Uf)),pl.bind(Ur.TransformComponentManager).toConstantValue(new Pr(zf)),pl.bind(Ur.MeshComponentManager).toConstantValue(new Pr(qs)),pl.bind(Ur.CullableComponentManager).toConstantValue(new Pr(Ws)),pl.bind(Ur.GeometryComponentManager).toConstantValue(new Pr(po)),pl.bind(Ur.MaterialComponentManager).toConstantValue(new Pr(Ls));var ml;n(173),n(99);!function(t){t.PANSTART="PANSTART",t.PANEND="PANEND",t.PANMOVE="PANMOVE",t.PINCH="PINCH",t.KEYDOWN="KEYDOWN",t.KEYUP="KEYUP",t.HOVER="HOVER"}(ml||(ml={}));n(174);var yl,gl,bl,_l,xl="undefined"!=typeof navigator&&/Version\\/[\\d\\.]+.*Safari/.test(navigator.userAgent);!function(t){t.Void="Void",t.Boolean="Boolean",t.Float="Float",t.Uint32="Uint32",t.Int32="Int32",t.Vector="Vector",t.Vector2Float="vec2<f32>",t.Vector3Float="vec3<f32>",t.Vector4Float="vec4<f32>",t.Vector2Boolean="vec2<bool>",t.Vector3Boolean="vec3<bool>",t.Vector4Boolean="vec4<bool>",t.Vector2Uint="vec2<u32>",t.Vector3Uint="vec3<u32>",t.Vector4Uint="vec4<u32>",t.Vector2Int="vec2<i32>",t.Vector3Int="vec3<i32>",t.Vector4Int="vec4<i32>",t.Matrix="Matrix",t.Matrix3x3Float="mat3x3<f32>",t.Matrix4x4Float="mat4x4<i32>",t.Struct="Struct",t.FloatArray="Float[]",t.Vector4FloatArray="vec4<f32>[]"}(yl||(yl={})),function(t){t.Program="Program",t.Identifier="Identifier",t.VariableDeclaration="VariableDeclaration",t.BlockStatement="BlockStatement",t.ReturnStatement="ReturnStatement",t.FunctionDeclaration="FunctionDeclaration",t.VariableDeclarator="VariableDeclarator",t.AssignmentExpression="AssignmentExpression",t.LogicalExpression="LogicalExpression",t.BinaryExpression="BinaryExpression",t.ArrayExpression="ArrayExpression",t.UnaryExpression="UnaryExpression",t.UpdateExpression="UpdateExpression",t.FunctionExpression="FunctionExpression",t.MemberExpression="MemberExpression",t.ConditionalExpression="ConditionalExpression",t.ExpressionStatement="ExpressionStatement",t.CallExpression="CallExpression",t.NumThreadStatement="NumThreadStatement",t.StorageStatement="StorageStatement",t.DoWhileStatement="DoWhileStatement",t.WhileStatement="WhileStatement",t.ForStatement="ForStatement",t.BreakStatement="BreakStatement",t.ContinueStatement="ContinueStatement",t.IfStatement="IfStatement",t.ImportedFunctionStatement="ImportedFunctionStatement"}(gl||(gl={})),function(t){t.Input="Input",t.Output="Output",t.Uniform="Uniform",t.Workgroup="Workgroup",t.UniformConstant="UniformConstant",t.Image="Image",t.StorageBuffer="StorageBuffer",t.Private="Private",t.Function="Function"}(bl||(bl={})),function(t){t.GLSL100="GLSL100",t.GLSL450="GLSL450",t.WGSL="WGSL"}(_l||(_l={}));function wl(t){return void 0===t?0:t>360||t<-360?t%360:t}function El(t,e,n){return fc()(t)?i.fromValues(t,e,n):3===t.length?i.clone(t):i.fromValues(t[0],t[1],t[2])}var Sl,Tl,Al,Il,kl,Ol,Dl,Rl,Ml=function(){function t(e,n){Er()(this,t),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=e,this.matrix=o.clone(n.matrix),this.right=i.clone(n.right),this.up=i.clone(n.up),this.forward=i.clone(n.forward),this.position=i.clone(n.position),this.focalPoint=i.clone(n.focalPoint),this.distanceVector=i.clone(n.distanceVector),this.azimuth=n.azimuth,this.elevation=n.elevation,this.roll=n.roll,this.relAzimuth=n.relAzimuth,this.relElevation=n.relElevation,this.relRoll=n.relRoll,this.dollyingStep=n.dollyingStep,this.distance=n.distance}return Tr()(t,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(t){t.matrix=o.copy(t.matrix,this.matrix),t.right=i.copy(t.right,this.right),t.up=i.copy(t.up,this.up),t.forward=i.copy(t.forward,this.forward),t.position=i.copy(t.position,this.position),t.focalPoint=i.copy(t.focalPoint,this.focalPoint),t.distanceVector=i.copy(t.distanceVector,this.distanceVector),t.azimuth=this.azimuth,t.elevation=this.elevation,t.roll=this.roll,t.relAzimuth=this.relAzimuth,t.relElevation=this.relElevation,t.relRoll=this.relRoll,t.dollyingStep=this.dollyingStep,t.distance=this.distance}}]),t}();!function(t){t.ORBITING="ORBITING",t.EXPLORING="EXPLORING",t.TRACKING="TRACKING"}(Ol||(Ol={})),function(t){t.DEFAULT="DEFAULT",t.ROTATIONAL="ROTATIONAL",t.TRANSLATIONAL="TRANSLATIONAL",t.CINEMATIC="CINEMATIC"}(Dl||(Dl={})),function(t){t.ORTHOGRAPHIC="ORTHOGRAPHIC",t.PERSPECTIVE="PERSPECTIVE"}(Rl||(Rl={}));var Cl,Nl,Pl,Gl,jl,Ll,Ul,Bl=Math.PI/180,Fl=180/Math.PI,zl=(Sl=Object(Lr.injectable)(),Tl=Object(Lr.inject)(Ur.InteractorService),Sl((Il=function(){function t(){Er()(this,t),this.matrix=o.create(),this.right=i.fromValues(1,0,0),this.up=i.fromValues(0,1,0),this.forward=i.fromValues(0,0,1),this.position=i.fromValues(0,0,1),this.focalPoint=i.fromValues(0,0,0),this.distanceVector=i.fromValues(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.rotateWorld=!1,xr()(this,"interactor",kl,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=o.create(),this.view=void 0,this.following=void 0,this.type=Ol.EXPLORING,this.trackingMode=Dl.DEFAULT,this.projectionMode=Rl.PERSPECTIVE,this.frustum=new sc,this.landmarks=[],this.landmarkAnimationID=void 0}return Tr()(t,[{key:"clone",value:function(){var e=new t;return e.setType(this.type,void 0),e.interactor=this.interactor,e}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(t,e){return this.type=t,this.type===Ol.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Ol.TRACKING&&void 0!==e&&this.setTrackingMode(e),this}},{key:"setProjectionMode",value:function(t){return this.projectionMode=t,this}},{key:"setTrackingMode",value:function(t){if(this.type!==Ol.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this}},{key:"setWorldRotation",value:function(t){this.rotateWorld=t,this._getAngles()}},{key:"getViewTransform",value:function(){return o.invert(o.create(),this.matrix)}},{key:"setMatrix",value:function(t){return this.matrix=t,this._update(),this}},{key:"setAspect",value:function(t){return this.setPerspective(this.near,this.far,this.fov,t),this}},{key:"setViewOffset",value:function(t,e,n,r,o,i){return this.aspect=t/e,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=i,this.projectionMode===Rl.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===Rl.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(t,e,n,r){return this.projectionMode=Rl.PERSPECTIVE,this.fov=n,this.near=t,this.far=e,this.aspect=r,o.perspective(this.perspective,this.fov*Bl,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(t,e,n,r,i,a){this.projectionMode=Rl.ORTHOGRAPHIC,this.rright=e,this.left=t,this.top=n,this.bottom=r,this.near=i,this.far=a;var u=(this.rright-this.left)/(2*this.zoom),s=(this.top-this.bottom)/(2*this.zoom),c=(this.rright+this.left)/2,f=(this.top+this.bottom)/2,l=c-u,h=c+u,d=f+s,p=f-s;if(void 0!==this.view&&this.view.enabled){var v=(this.rright-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;h=(l+=v*this.view.offsetX)+v*this.view.width,p=(d-=m*this.view.offsetY)-m*this.view.height}return o.ortho(this.perspective,l,h,d,p,i,a),this}},{key:"setPosition",value:function(t,e,n){return this._setPosition(t,e,n),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(t,e,n){var r=i.fromValues(0,1,0);if(this.focalPoint=El(t,e,n),this.trackingMode===Dl.CINEMATIC){var a=i.subtract(i.create(),this.focalPoint,this.position);t=a[0],e=a[1],n=a[2];var u=i.length(a),s=Math.asin(e/u)*Fl,c=90+Math.atan2(n,t)*Fl,f=o.create();o.rotateY(f,f,c*Bl),o.rotateX(f,f,s*Bl),r=i.transformMat4(i.create(),[0,1,0],f)}return o.invert(this.matrix,o.lookAt(o.create(),this.position,this.focalPoint,r)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(t){if(!(this.distance===t||t<0)){this.distance=t,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var e=i.create();t=this.distance;var n=this.forward,r=this.focalPoint;return e[0]=t*n[0]+r[0],e[1]=t*n[1]+r[1],e[2]=t*n[2]+r[2],this._setPosition(e),this}}},{key:"changeAzimuth",value:function(t){return this.setAzimuth(this.azimuth+t),this}},{key:"changeElevation",value:function(t){return this.setElevation(this.elevation+t),this}},{key:"changeRoll",value:function(t){return this.setRoll(this.roll+t),this}},{key:"setAzimuth",value:function(t){return this.azimuth=wl(t),this.computeMatrix(),this._getAxes(),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getPosition():this.type===Ol.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(t){return this.elevation=wl(t),this.computeMatrix(),this._getAxes(),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getPosition():this.type===Ol.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(t){return this.roll=wl(t),this.computeMatrix(),this._getAxes(),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getPosition():this.type===Ol.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(t,e,n){if(this.type===Ol.EXPLORING){t=wl(t),e=wl(e),n=wl(n);var r=u.setAxisAngle(u.create(),[1,0,0],(this.rotateWorld?1:-1)*e*Bl),i=u.setAxisAngle(u.create(),[0,1,0],(this.rotateWorld?1:-1)*t*Bl),a=u.setAxisAngle(u.create(),[0,0,1],n*Bl),s=u.multiply(u.create(),i,r);s=u.multiply(u.create(),s,a);var c=o.fromQuat(o.create(),s);o.translate(this.matrix,this.matrix,[0,0,-this.distance]),o.multiply(this.matrix,this.matrix,c),o.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+e)>90)return;this.relElevation=wl(e),this.relAzimuth=wl(t),this.relRoll=wl(n),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getPosition():this.type===Ol.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(t,e){var n=El(t,e,0),r=i.clone(this.position);return i.add(r,r,i.scale(i.create(),this.right,n[0])),i.add(r,r,i.scale(i.create(),this.up,n[1])),this._setPosition(r),this}},{key:"dolly",value:function(t){var e=this.forward,n=i.clone(this.position),r=t*this.dollyingStep;return n[0]+=r*e[0],n[1]+=r*e[1],n[2]+=r*e[2],this._setPosition(n),this.type===Ol.ORBITING||this.type===Ol.EXPLORING?this._getDistance():this.type===Ol.TRACKING&&i.add(this.focalPoint,n,this.distanceVector),this}},{key:"createLandmark",value:function(t,e){var n=this.clone();n.setPosition(e.position),n.setFocalPoint(e.focalPoint),void 0!==e.roll&&n.setRoll(e.roll);var r=new Ml(t,n);return this.landmarks.push(r),r}},{key:"setLandmark",value:function(t){var e=new Ml(t,this);return this.landmarks.push(e),this}},{key:"gotoLandmark",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=this.landmarks.find((function(e){return e.name===t}));if(r){if(0===n)return void r.retrieve(this);void 0!==this.landmarkAnimationID&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var o,a=r.getPosition(),u=r.getFocalPoint(),s=r.getRoll(),c=function t(r){void 0===o&&(o=r);var c,f=r-o,l=(1-Math.cos(f/n*Math.PI))/2,h=i.create(),d=i.create();if(i.lerp(h,e.focalPoint,u,l),i.lerp(d,e.position,a,l),c=e.roll*(1-l)+s*l,e.setFocalPoint(h),e.setPosition(d),e.setRoll(c),e.computeMatrix(),!(i.dist(h,u)+i.dist(d,a)>.01))return e.setFocalPoint(h),e.setPosition(d),e.setRoll(c),e.computeMatrix(),void e.interactor.connect();f<n&&(e.landmarkAnimationID=window.requestAnimationFrame(t))};window.requestAnimationFrame(c)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var t,e,n=u.setAxisAngle(u.create(),[0,0,1],this.roll*Bl);o.identity(this.matrix),t=u.setAxisAngle(u.create(),[1,0,0],(this.rotateWorld&&this.type!==Ol.TRACKING||this.type===Ol.TRACKING?1:-1)*this.elevation*Bl),e=u.setAxisAngle(u.create(),[0,1,0],(this.rotateWorld&&this.type!==Ol.TRACKING||this.type===Ol.TRACKING?1:-1)*this.azimuth*Bl);var r=u.multiply(u.create(),e,t);r=u.multiply(u.create(),r,n);var i=o.fromQuat(o.create(),r);this.type===Ol.ORBITING||this.type===Ol.EXPLORING?(o.translate(this.matrix,this.matrix,this.focalPoint),o.multiply(this.matrix,this.matrix,i),o.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===Ol.TRACKING&&(o.translate(this.matrix,this.matrix,this.position),o.multiply(this.matrix,this.matrix,i))}},{key:"_setPosition",value:function(t,e,n){this.position=El(t,e,n);var r=this.matrix;r[12]=this.position[0],r[13]=this.position[1],r[14]=this.position[2],r[15]=1}},{key:"_getAxes",value:function(){i.copy(this.right,El(a.transformMat4(a.create(),[1,0,0,0],this.matrix))),i.copy(this.up,El(a.transformMat4(a.create(),[0,1,0,0],this.matrix))),i.copy(this.forward,El(a.transformMat4(a.create(),[0,0,1,0],this.matrix))),i.normalize(this.right,this.right),i.normalize(this.up,this.up),i.normalize(this.forward,this.forward)}},{key:"_getAngles",value:function(){var t=this.distanceVector[0],e=this.distanceVector[1],n=this.distanceVector[2],r=i.length(this.distanceVector);if(0===r)return this.elevation=0,void(this.azimuth=0);this.type===Ol.TRACKING||this.rotateWorld?(this.elevation=Math.asin(e/r)*Fl,this.azimuth=Math.atan2(-t,-n)*Fl):(this.elevation=-Math.asin(e/r)*Fl,this.azimuth=-Math.atan2(-t,-n)*Fl)}},{key:"_getPosition",value:function(){i.copy(this.position,El(a.transformMat4(a.create(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){i.transformMat3(this.distanceVector,[0,0,-this.distance],r.fromMat4(r.create(),this.matrix)),i.add(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=i.subtract(i.create(),this.focalPoint,this.position),this.distance=i.length(this.distanceVector),this.dollyingStep=this.distance/100}}]),t}(),kl=Ir()(Il.prototype,"interactor",[Tl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Al=Il))||Al),Vl=n(22),Wl=n.n(Vl),Xl=n(13),Hl=n.n(Xl),ql=n(3);function Yl(){if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Kl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Kl(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ql,Jl,$l,th,eh,nh,rh,oh,ih,ah,uh,sh,ch,fh,lh,hh,dh,ph,vh,mh,yh,gh,bh,_h,xh,wh,Eh,Sh,Th=(Cl=Object(Lr.injectable)(),Nl=Object(Lr.inject)(Ur.RenderEngine),Pl=Object(Lr.inject)(Ur.ConfigService),Cl((jl=function(){function t(){Er()(this,t),xr()(this,"engine",Ll,this),xr()(this,"configService",Ul,this),this.entity=Cr(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}var e,n,r;return Tr()(t,[{key:"init",value:function(){var t=this.configService.get(),e=t.canvas,n=t.engineOptions;this.initPromise=this.engine.init(Zl({canvas:e||Yl(),swapChainFormat:ql.TextureFormat.BGRA8Unorm,antialiasing:!1},n))}},{key:"setBundle",value:function(t){this.compiledBundle=JSON.parse(JSON.stringify(t))}},{key:"setDispatch",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=t),this}},{key:"setMaxIteration",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=t),this}},{key:"setBinding",value:function(t,e){var n=this;if("string"==typeof t){var r=fc()(e)||Wl()(e)||Hl()(e);if(this.compiledBundle&&this.compiledBundle.context){var o=this.compiledBundle.context.defines.find((function(e){return e.name===t}));if(o)return o.value=e,this;var i=this.compiledBundle.context.uniforms.find((function(e){return e.name===t}));i&&(r?(i.data=e,i.isReferer=!1,i.storageClass===bl.Uniform?this.model&&this.model.updateUniform(t,e):this.model&&this.model.updateBuffer(t,e)):(i.isReferer=!0,i.data=e))}}else Object.keys(t).forEach((function(e){n.setBinding(e,t[e])}));return this}},{key:"execute",value:(r=Rr()(Or.a.mark((function t(){var e,n,r=this,o=arguments;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=o.length>0&&void 0!==o[0]?o[0]:1,!this.dirty){t.next=6;break}return this.compiledBundle.context&&(e>1?this.compiledBundle.context.maxIteration=e:this.compiledBundle.context.maxIteration++),t.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter((function(t){return t.isReferer})).forEach((function(t){var e=t.data,n=t.name;r.model.confirmInput(e.model,n)})),n=0;n<e;n++)this.model.run();return this.engine.endFrame(),t.abrupt("return",this);case 12:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"getOutput",value:(n=Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.model.readData());case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"compile",value:(e=Rr()(Or.a.mark((function t(){var e,n,r;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initPromise;case 2:return e=Zl({},this.compiledBundle.context),n=this.engine.supportWebGPU?this.engine.useWGSL?_l.WGSL:_l.GLSL450:_l.GLSL100,r=this.compiledBundle.shaders[n],e.defines.filter((function(t){return t.runtime})).forEach((function(t){var e="".concat("__DefineValuePlaceholder__").concat(t.name);r=r.replace(e,"".concat(t.value))})),e.shader=r,e.uniforms.forEach((function(t){if(!t.data&&t.storageClass===bl.StorageBuffer){var n=1;t.type===yl.FloatArray?n=1:t.type===yl.Vector4FloatArray&&(n=4),t.data=new Float32Array(e.output.length*n).fill(0)}})),this.compiledBundle.context=e,t.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=t.sent;case 12:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}(),Ll=Ir()(jl.prototype,"engine",[Nl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ul=Ir()(jl.prototype,"configService",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gl=jl))||Gl),Ah=(Ql=Object(Lr.injectable)(),Jl=Object(Lr.inject)(Ur.MeshComponentManager),$l=Object(Lr.inject)(Ur.CullableComponentManager),th=Object(Lr.inject)(Ur.TransformComponentManager),eh=Object(Lr.inject)(Ur.Systems),nh=Object(Lr.named)(Ur.SceneGraphSystem),Ql((fh=ch=function(){function t(){Er()(this,t),this.attributes={},this.config=void 0,xr()(this,"mesh",ih,this),xr()(this,"cullable",ah,this),xr()(this,"transform",uh,this),xr()(this,"sceneGraphSystem",sh,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return Tr()(t,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(t){this.config=t}},{key:"setEntity",value:function(t){this.entity=t,this.cullable.create(t),this.meshComponent=this.mesh.create(t),this.transformComponent=this.transform.create(t),this.onEntityCreated()}},{key:"setMaterial",value:function(t){return this.meshComponent.material=t,this}},{key:"setGeometry",value:function(t){return this.meshComponent.geometry=t,this}},{key:"setAttributes",value:function(t){var e=this;Object.keys(t).forEach((function(n){void 0!==t[n]&&t[n]!==e.attributes[n]&&(e.onAttributeChanged({name:n,data:t[n]}),e.attributes[n]=t[n])}))}},{key:"setVisible",value:function(t){return this.meshComponent.visible=t,this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(t){return this.sceneGraphSystem.attach(this.entity,t.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(e),n)}},{key:"convertAttributeName2UniformName",value:function(t){return t}}]),t}(),ch.POINT="point",ch.LINE="line",ch.GRID="grid",oh=fh,ih=Ir()(oh.prototype,"mesh",[Jl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ah=Ir()(oh.prototype,"cullable",[$l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uh=Ir()(oh.prototype,"transform",[th],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sh=Ir()(oh.prototype,"sceneGraphSystem",[eh,nh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rh=oh))||rh),Ih=n(189),kh=n.n(Ih),Oh=function(){function t(e,n){Er()(this,t),this.attribute=void 0,this.buffer=void 0;var r=n.buffer,o=n.offset,i=n.stride,a=n.normalized,u=n.size,s=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:o||0,stride:i||0,normalized:a||!1,divisor:s||0},u&&(this.attribute.size=u)}return Tr()(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),Dh=(lh={},uo()(lh,Qu.POINTS,"points"),uo()(lh,Qu.LINES,"lines"),uo()(lh,Qu.LINE_LOOP,"line loop"),uo()(lh,Qu.LINE_STRIP,"line strip"),uo()(lh,Qu.TRIANGLES,"triangles"),uo()(lh,Qu.TRIANGLE_FAN,"triangle fan"),uo()(lh,Qu.TRIANGLE_STRIP,"triangle strip"),lh),Rh=(hh={},uo()(hh,Qu.STATIC_DRAW,"static"),uo()(hh,Qu.DYNAMIC_DRAW,"dynamic"),uo()(hh,Qu.STREAM_DRAW,"stream"),hh),Mh=(dh={},uo()(dh,Qu.BYTE,"int8"),uo()(dh,Qu.UNSIGNED_INT,"int16"),uo()(dh,Qu.INT,"int32"),uo()(dh,Qu.UNSIGNED_BYTE,"uint8"),uo()(dh,Qu.UNSIGNED_SHORT,"uint16"),uo()(dh,Qu.UNSIGNED_INT,"uint32"),uo()(dh,Qu.FLOAT,"float"),dh),Ch=(ph={},uo()(ph,Qu.ALPHA,"alpha"),uo()(ph,Qu.LUMINANCE,"luminance"),uo()(ph,Qu.LUMINANCE_ALPHA,"luminance alpha"),uo()(ph,Qu.RGB,"rgb"),uo()(ph,Qu.RGBA,"rgba"),uo()(ph,Qu.RGBA4,"rgba4"),uo()(ph,Qu.RGB5_A1,"rgb5 a1"),uo()(ph,Qu.RGB565,"rgb565"),uo()(ph,Qu.DEPTH_COMPONENT,"depth"),uo()(ph,Qu.DEPTH_STENCIL,"depth stencil"),ph),Nh=(vh={},uo()(vh,Qu.DONT_CARE,"dont care"),uo()(vh,Qu.NICEST,"nice"),uo()(vh,Qu.FASTEST,"fast"),vh),Ph=(mh={},uo()(mh,Qu.NEAREST,"nearest"),uo()(mh,Qu.LINEAR,"linear"),uo()(mh,Qu.LINEAR_MIPMAP_LINEAR,"mipmap"),uo()(mh,Qu.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),uo()(mh,Qu.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),uo()(mh,Qu.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),mh),Gh=(yh={},uo()(yh,Qu.REPEAT,"repeat"),uo()(yh,Qu.CLAMP_TO_EDGE,"clamp"),uo()(yh,Qu.MIRRORED_REPEAT,"mirror"),yh),jh=(gh={},uo()(gh,Qu.NONE,"none"),uo()(gh,Qu.BROWSER_DEFAULT_WEBGL,"browser"),gh),Lh=(bh={},uo()(bh,Qu.NEVER,"never"),uo()(bh,Qu.ALWAYS,"always"),uo()(bh,Qu.LESS,"less"),uo()(bh,Qu.LEQUAL,"lequal"),uo()(bh,Qu.GREATER,"greater"),uo()(bh,Qu.GEQUAL,"gequal"),uo()(bh,Qu.EQUAL,"equal"),uo()(bh,Qu.NOTEQUAL,"notequal"),bh),Uh=(_h={},uo()(_h,Qu.FUNC_ADD,"add"),uo()(_h,Qu.MIN_EXT,"min"),uo()(_h,Qu.MAX_EXT,"max"),uo()(_h,Qu.FUNC_SUBTRACT,"subtract"),uo()(_h,Qu.FUNC_REVERSE_SUBTRACT,"reverse subtract"),_h),Bh=(xh={},uo()(xh,Qu.ZERO,"zero"),uo()(xh,Qu.ONE,"one"),uo()(xh,Qu.SRC_COLOR,"src color"),uo()(xh,Qu.ONE_MINUS_SRC_COLOR,"one minus src color"),uo()(xh,Qu.SRC_ALPHA,"src alpha"),uo()(xh,Qu.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),uo()(xh,Qu.DST_COLOR,"dst color"),uo()(xh,Qu.ONE_MINUS_DST_COLOR,"one minus dst color"),uo()(xh,Qu.DST_ALPHA,"dst alpha"),uo()(xh,Qu.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),uo()(xh,Qu.CONSTANT_COLOR,"constant color"),uo()(xh,Qu.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),uo()(xh,Qu.CONSTANT_ALPHA,"constant alpha"),uo()(xh,Qu.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),uo()(xh,Qu.SRC_ALPHA_SATURATE,"src alpha saturate"),xh),Fh=(wh={},uo()(wh,Qu.NEVER,"never"),uo()(wh,Qu.ALWAYS,"always"),uo()(wh,Qu.LESS,"less"),uo()(wh,Qu.LEQUAL,"lequal"),uo()(wh,Qu.GREATER,"greater"),uo()(wh,Qu.GEQUAL,"gequal"),uo()(wh,Qu.EQUAL,"equal"),uo()(wh,Qu.NOTEQUAL,"notequal"),wh),zh=(Eh={},uo()(Eh,Qu.ZERO,"zero"),uo()(Eh,Qu.KEEP,"keep"),uo()(Eh,Qu.REPLACE,"replace"),uo()(Eh,Qu.INVERT,"invert"),uo()(Eh,Qu.INCR,"increment"),uo()(Eh,Qu.DECR,"decrement"),uo()(Eh,Qu.INCR_WRAP,"increment wrap"),uo()(Eh,Qu.DECR_WRAP,"decrement wrap"),Eh),Vh=(Sh={},uo()(Sh,Qu.FRONT,"front"),uo()(Sh,Qu.BACK,"back"),Sh),Wh=function(){function t(e,n){Er()(this,t),this.buffer=void 0;var r=n.data,o=n.usage,i=n.type;this.buffer=e.buffer({data:r,usage:Rh[o||Qu.STATIC_DRAW],type:Mh[i||Qu.UNSIGNED_BYTE]})}return Tr()(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(t){var e=t.data,n=t.offset;this.buffer.subdata(e,n)}}]),t}(),Xh=n(10),Hh=n.n(Xh);function qh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Yh(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qh(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Kh=0,Zh=function(){function t(e,n){var r=this;Er()(this,t),this.reGl=e,this.context=n,this.entity=Cr(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var o={};this.context.uniforms.forEach((function(t){var e=t.name,n=t.type,i=t.data,a=t.isReferer,u=t.storageClass;if(u===bl.StorageBuffer){if(a)r.textureCache[e]={data:void 0},o["".concat(e,"Size")]=function(){return i.compiledBundle.context.output.textureSize};else{r.textureCache[e]=r.calcDataTexture(e,n,i);var s=r.textureCache[e],c=s.textureWidth,f=s.isOutput;o["".concat(e,"Size")]=[c,c],f&&(r.outputTextureName=e,r.context.needPingpong&&(r.outputTextureName="".concat(e,"Output"),r.textureCache[r.outputTextureName]=r.calcDataTexture(e,n,i)))}o[e]=function(){return r.textureCache[e].texture}}else if(u===bl.Uniform){if(i&&(Array.isArray(i)||Wl()(i))&&i.length>16)throw new Error("invalid data type ".concat(n));o[e]=function(){return t.data}}}));var i=this.getOuputDataTexture(),a=i.textureWidth,u=i.texelCount;o.u_OutputTextureSize=[a,a],o.u_OutputTexelCount=u,this.context.output.textureSize=[a,a];var s={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\\n  precision highp float;\\n#else\\n  precision mediump float;\\n#endif\\n".concat(this.context.shader),uniforms:o,vert:"attribute vec3 a_Position;\\nattribute vec2 a_TexCoord;\\n\\nvarying vec2 v_TexCoord;\\n\\nvoid main() {\\n  gl_Position = vec4(a_Position, 1.0);\\n  v_TexCoord = a_TexCoord;\\n}",primitive:"triangle strip",count:4};this.computeCommand=this.reGl(s)}var e;return Tr()(t,[{key:"run",value:function(){var t=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use((function(){t.computeCommand()}))}},{key:"readData",value:(e=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s,c=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.reGl({framebuffer:this.texFBO})((function(){e=c.reGl.read()})),!e){t.next=6;break}if(n=this.getOuputDataTexture(),r=n.originalDataLength,o=n.elementsPerTexel,i=n.typedArrayConstructor,a=void 0===i?Float32Array:i,u=[],4!==o)for(s=0;s<e.length;s+=4)1===o?u.push(e[s]):2===o?u.push(e[s],e[s+1]):u.push(e[s],e[s+1],e[s+2]);else u=e;return t.abrupt("return",new a(u.slice(0,r)));case 6:return t.abrupt("return",new Float32Array);case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"confirmInput",value:function(t,e){var n;this.entity===t.entity?(this.dynamicPingpong=!0,n=this):n=t,this.textureCache[e].id=n.getOuputDataTexture().id,this.textureCache[e].texture=n.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(t,e){var n=this.context.uniforms.find((function(e){return e.name===t}));if(n){var r=this.calcDataTexture(t,n.type,e),o=r.texture,i=r.data;this.textureCache[t].data=i,this.textureCache[t].texture=o}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var t=this.context.output.name;this.textureCache[t].id=this.getOuputDataTexture().id,this.textureCache[t].texture=this.getOuputDataTexture().texture}var e=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=e}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var t=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=t}},{key:"cloneDataTexture",value:function(t){var e=t.data,n=t.textureWidth;return Yh(Yh({},t),{},{id:Kh++,texture:this.reGl.texture({width:n,height:n,data:e,type:"float"})})}},{key:"calcDataTexture",value:function(t,e,n){var r=1;e===yl.Vector4FloatArray&&(r=4);for(var o=[],i=0;i<n.length;i+=r)1===r?o.push(n[i],0,0,0):2===r?o.push(n[i],n[i+1],0,0):3===r?o.push(n[i],n[i+1],n[i+2],0):4===r&&o.push(n[i],n[i+1],n[i+2],n[i+3]);var a=n.length,u=Math.ceil(a/r),s=Math.ceil(Math.sqrt(u)),c=s*s;u<c&&o.push.apply(o,Hh()(new Array(4*(c-u)).fill(0)));var f=this.reGl.texture({width:s,height:s,data:o,type:"float"});return{id:Kh++,data:o,originalDataLength:a,typedArrayConstructor:Wl()(n)?n.constructor:void 0,textureWidth:s,texture:f,texelCount:u,elementsPerTexel:r,isOutput:t===this.context.output.name}}}]),t}(),Qh=function(){function t(e,n){Er()(this,t),this.elements=void 0;var r=n.data,o=n.usage,i=n.type,a=n.count;this.elements=e.elements({data:r,usage:Rh[o||Qu.STATIC_DRAW],type:Mh[i||Qu.UNSIGNED_BYTE],count:a})}return Tr()(t,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){var e=t.data;this.elements.subdata(e)}},{key:"destroy",value:function(){this.elements.destroy()}}]),t}(),Jh=function(){function t(e,n){Er()(this,t),this.framebuffer=void 0;var r=n.width,o=n.height,i=n.color,a=n.colors,u=(n.depth,n.stencil,{width:r,height:o});Array.isArray(a)&&(u.colors=a.map((function(t){return t.get()}))),i&&"boolean"!=typeof i&&(u.color=i.get()),this.framebuffer=e.framebuffer(u)}return Tr()(t,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.framebuffer.resize(e,n)}}]),t}(),$h=n(51),td=n.n($h),ed=n(101),nd=n.n(ed);function rd(t){var e={};return Object.keys(t).forEach((function(n){!function t(e,n,r,o){if(null===n||"number"==typeof n||"boolean"==typeof n||Array.isArray(n)&&"number"==typeof n[0]||Wl()(n)||""===n||"resize"in n)return void(r["".concat(o&&o+".").concat(e)]=n);nd()(n)&&Object.keys(n).forEach((function(i){t(i,n[i],r,"".concat(o&&o+".").concat(e))}));Array.isArray(n)&&n.forEach((function(n,i){Object.keys(n).forEach((function(a){t(a,n[a],r,"".concat(o&&o+".").concat(e,"[").concat(i,"]"))}))}))}(n,t[n],e,"")})),e}function od(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function id(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?od(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):od(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ad,ud,sd=function(){function t(e,n){Er()(this,t),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=e;var r=n.vs,o=n.fs,i=n.attributes,a=n.uniforms,u=n.primitive,s=n.count,c=n.elements,f=n.depth,l=n.blend,h=n.stencil,d=n.cull,p=n.instances,v=n.scissor,m=n.viewport,y={};a&&(this.uniforms=rd(a),Object.keys(a).forEach((function(t){y[t]=e.prop(t)})));var g={};Object.keys(i).forEach((function(t){g[t]=i[t].get()}));var b={attributes:g,frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\\n  precision highp float;\\n#else\\n  precision mediump float;\\n#endif\\n".concat(o),uniforms:y,vert:r,primitive:Dh[void 0===u?Qu.TRIANGLES:u]};p&&(b.instances=p),s&&(b.count=s),c&&(b.elements=c.get()),v&&(b.scissor=v),m&&(b.viewport=m),this.initDepthDrawParams({depth:f},b),this.initBlendDrawParams({blend:l},b),this.initStencilDrawParams({stencil:h},b),this.initCullDrawParams({cull:d},b),this.drawCommand=e(b)}return Tr()(t,[{key:"addUniforms",value:function(t){this.uniforms=id(id({},this.uniforms),rd(t))}},{key:"draw",value:function(t){var e=id(id({},this.uniforms),rd(t.uniforms||{})),n={};Object.keys(e).forEach((function(t){var r=td()(e[t]);"boolean"===r||"number"===r||Array.isArray(e[t])||e[t].BYTES_PER_ELEMENT?n[t]=e[t]:n[t]=e[t].get()})),this.drawCommand(n)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(t,e){var n=t.depth;n&&(e.depth={enable:void 0===n.enable||!!n.enable,mask:void 0===n.mask||!!n.mask,func:Lh[n.func||Qu.LESS],range:n.range||[0,1]})}},{key:"initBlendDrawParams",value:function(t,e){var n=t.blend;if(n){var r=n.enable,o=n.func,i=n.equation,a=n.color,u=void 0===a?[0,0,0,0]:a;e.blend={enable:!!r,func:{srcRGB:Bh[o&&o.srcRGB||Qu.SRC_ALPHA],srcAlpha:Bh[o&&o.srcAlpha||Qu.SRC_ALPHA],dstRGB:Bh[o&&o.dstRGB||Qu.ONE_MINUS_SRC_ALPHA],dstAlpha:Bh[o&&o.dstAlpha||Qu.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Uh[i&&i.rgb||Qu.FUNC_ADD],alpha:Uh[i&&i.alpha||Qu.FUNC_ADD]},color:u}}}},{key:"initStencilDrawParams",value:function(t,e){var n=t.stencil;if(n){var r=n.enable,o=n.mask,i=void 0===o?-1:o,a=n.func,u=void 0===a?{cmp:Qu.ALWAYS,ref:0,mask:-1}:a,s=n.opFront,c=void 0===s?{fail:Qu.KEEP,zfail:Qu.KEEP,zpass:Qu.KEEP}:s,f=n.opBack,l=void 0===f?{fail:Qu.KEEP,zfail:Qu.KEEP,zpass:Qu.KEEP}:f;e.stencil={enable:!!r,mask:i,func:id(id({},u),{},{cmp:Fh[u.cmp]}),opFront:{fail:zh[c.fail],zfail:zh[c.zfail],zpass:zh[c.zpass]},opBack:{fail:zh[l.fail],zfail:zh[l.zfail],zpass:zh[l.zpass]}}}}},{key:"initCullDrawParams",value:function(t,e){var n=t.cull;if(n){var r=n.enable,o=n.face,i=void 0===o?Qu.BACK:o;e.cull={enable:!!r,face:Vh[i]}}}}]),t}(),cd=function(){function t(e,n){Er()(this,t),this.texture=void 0,this.width=void 0,this.height=void 0;var r=n.data,o=n.type,i=void 0===o?Qu.UNSIGNED_BYTE:o,a=n.width,u=n.height,s=n.flipY,c=void 0!==s&&s,f=n.format,l=void 0===f?Qu.RGBA:f,h=n.mipmap,d=void 0!==h&&h,p=n.wrapS,v=void 0===p?Qu.CLAMP_TO_EDGE:p,m=n.wrapT,y=void 0===m?Qu.CLAMP_TO_EDGE:m,g=n.aniso,b=void 0===g?0:g,_=n.alignment,x=void 0===_?1:_,w=n.premultiplyAlpha,E=void 0!==w&&w,S=n.mag,T=void 0===S?Qu.NEAREST:S,A=n.min,I=void 0===A?Qu.NEAREST:A,k=n.colorSpace,O=void 0===k?Qu.BROWSER_DEFAULT_WEBGL:k;this.width=a,this.height=u;var D={width:a,height:u,type:Mh[i],format:Ch[l],wrapS:Gh[v],wrapT:Gh[y],mag:Ph[T],min:Ph[I],alignment:x,flipY:c,colorSpace:jh[O],premultiplyAlpha:E,aniso:b};r&&(D.data=r),"number"==typeof d?D.mipmap=Nh[d]:"boolean"==typeof d&&(D.mipmap=d),this.texture=e.texture(D)}return Tr()(t,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.texture.resize(e,n),this.width=e,this.height=n}},{key:"destroy",value:function(){this.texture.destroy()}}]),t}(),fd=Object(Lr.injectable)()(ad=function(){function t(){var e=this;Er()(this,t),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var t=Rr()(Or.a.mark((function t(n){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new sd(e.gl,n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new Oh(e.gl,t)},this.createBuffer=function(t){return new Wh(e.gl,t)},this.createElements=function(t){return new Qh(e.gl,t)},this.createTexture2D=function(t){return new cd(e.gl,t)},this.createFramebuffer=function(t){return new Jh(e.gl,t)},this.useFramebuffer=function(t,n){e.gl({framebuffer:t?t.get():null})(n)},this.createComputeModel=function(){var t=Rr()(Or.a.mark((function t(n){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Zh(e.gl,n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.clear=function(t){var n=t.color,r=t.depth,o=t.stencil,i=t.framebuffer,a=void 0===i?null:i,u={color:n,depth:r,stencil:o};u.framebuffer=null===a?a:a.get(),e.gl.clear(u)},this.setScissor=function(t){e.gl&&e.gl._gl&&(t.enable&&t.box?(e.gl._gl.enable(Qu.SCISSOR_TEST),e.gl._gl.scissor(t.box.x,t.box.y,t.box.width,t.box.height)):e.gl._gl.disable(Qu.SCISSOR_TEST),e.gl._refresh())},this.viewport=function(t){var n=t.x,r=t.y,o=t.width,i=t.height;e.gl&&e.gl._gl&&(e.gl._gl.viewport(n,r,o,i),e.gl._refresh())},this.readPixels=function(t){var n=t.framebuffer,r={x:t.x,y:t.y,width:t.width,height:t.height};return n&&(r.framebuffer=n.get()),e.gl.read(r)},this.getCanvas=function(){return e.$canvas},this.getGLContext=function(){return e.gl._gl},this.destroy=function(){e.gl&&(e.gl.destroy(),e.inited=!1)}}var e;return Tr()(t,[{key:"init",value:(e=Rr()(Or.a.mark((function t(e){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.inited){t.next=2;break}return t.abrupt("return");case 2:return this.$canvas=e.canvas,t.next=5,new Promise((function(t,n){kh()({canvas:e.canvas,attributes:{alpha:!0,antialias:e.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(e,r){!e&&r||n(e),t(r)}})}));case 5:this.gl=t.sent,this.inited=!0;case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),t}())||ad;function ld(t,e,n,r){if("undefined"!=typeof window){var o=document.getElementsByTagName("head")[0],i=document.createElement("script");i.setAttribute("type","text/javascript"),i.setAttribute("src",t),r&&(i.id=r),i.onload=function(){e&&e()},i.onerror=function(e){n&&n("Unable to load script '".concat(t,"'"),e)},o.appendChild(i)}}function hd(t,e){return new Promise((function(e,n){ld(t,(function(){e()}),(function(t,e){n(e)}))}))}var dd=function(){return pd.apply(this,arguments)};function pd(){return(pd=Rr()(Or.a.mark((function t(){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!ud){t.next=2;break}return t.abrupt("return",ud);case 2:return t.next=4,hd("https://preview.babylonjs.com/glslang/glslang.js");case 4:return ud=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),t.abrupt("return",ud);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var vd,md,yd,gd,bd,_d,xd,wd=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.attribute=void 0,this.buffer=void 0;var r=n,o=r.buffer,i=r.offset,a=r.stride,u=r.normalized,s=r.size,c=r.divisor,f=r.arrayStride,l=r.attributes,h=r.stepMode;this.buffer=o,this.attribute={buffer:o.get(),offset:i||0,stride:a||0,normalized:u||!1,divisor:c||0,arrayStride:f||0,attributes:l,stepMode:h||"vertex"},s&&(this.attribute.size=s)}return Tr()(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),Ed=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.buffer=void 0;var r=n,o=r.data,i=r.usage;r.type;this.buffer=this.createBuffer(o instanceof Array?new Float32Array(o):o,i||ql.BufferUsage.Vertex|ql.BufferUsage.CopyDst)}return Tr()(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(t){var e=t.data,n=t.offset;this.setSubData(this.buffer,n,e instanceof Array?new Float32Array(e):e)}},{key:"createBuffer",value:function(t,e){var n=t.byteLength%4,r={size:t.byteLength+n,usage:e},o=this.engine.device.createBuffer(r);return this.setSubData(o,0,t),o}},{key:"setSubData",value:function(t,e,n){(xl?this.engine.device.getQueue():this.engine.device.defaultQueue).writeBuffer(t,e,n)}}]),t}(),Sd=n(52),Td=n.n(Sd),Ad=function(){function t(e,n){Er()(this,t),this.engine=e,this.context=n,this.entity=Cr(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}var e,n,r;return Tr()(t,[{key:"init",value:(r=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:e=t.sent,n=e.computeStage,r=this.context.uniforms.filter((function(t){return t.storageClass===bl.StorageBuffer})),o=this.context.uniforms.filter((function(t){return t.storageClass===bl.Uniform})),i=o.length?1:0,this.bindGroupEntries=[],i&&(a=0,u=[],o.forEach((function(t){if(fc()(t.data))s.uniformGPUBufferLayout.push({name:t.name,offset:a}),a+=4,u.push(t.data);else{var e,n=(null===(e=t.data)||void 0===e?void 0:e.length)||1;3===n&&(n=4,t.data.push(0));var r=a/4%4;if(r>0){var o=4-r;if(n>1&&n<=o)2===n&&(3===o&&(a+=4,u.push(0)),u.push.apply(u,Hh()(t.data)),s.uniformGPUBufferLayout.push({name:t.name,offset:a}));else{for(var i=0;i<o;i++)a+=4,u.push(0);u.push.apply(u,Hh()(t.data)),s.uniformGPUBufferLayout.push({name:t.name,offset:a})}}a+=4*n}})),this.uniformBuffer=new Ed(this.engine,{data:u instanceof Array?new Float32Array(u):u,usage:ql.BufferUsage.Uniform|ql.BufferUsage.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),r.forEach((function(t){var e;Td()(t.data)||t.type!==yl.Vector4FloatArray&&t.type!==yl.FloatArray||(t.name===s.context.output.name?(e=new Ed(s.engine,{data:isFinite(Number(t.data))?[t.data]:t.data,usage:ql.BufferUsage.Storage|ql.BufferUsage.CopyDst|ql.BufferUsage.CopySrc}),s.outputBuffer=e,s.context.output={name:t.name,length:isFinite(Number(t.data))?1:t.data.length,typedArrayConstructor:Float32Array,gpuBuffer:e.get()}):t.isReferer?t.data.model&&t.data.model.outputBuffer&&(e=t.data.model.outputBuffer):e=new Ed(s.engine,{data:isFinite(Number(t.data))?[t.data]:t.data,usage:ql.BufferUsage.Storage|ql.BufferUsage.CopyDst|ql.BufferUsage.CopySrc}),s.vertexBuffers[t.name]=e,s.bindGroupEntries.push({binding:i,resource:{name:t.name,refer:e?void 0:t.data,buffer:e?e.get():void 0}}),i++)})),this.computePipeline=this.engine.device.createComputePipeline({computeStage:n}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"destroy",value:function(){var t=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach((function(e){return t.vertexBuffers[e].destroy()}))}},{key:"readData",value:(n=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s,c;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this.context.output)){t.next=16;break}if(n=e.length,r=e.typedArrayConstructor,!(o=e.gpuBuffer)){t.next=16;break}return i=n*r.BYTES_PER_ELEMENT,a=this.engine.device.createBuffer({size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),(u=this.engine.device.createCommandEncoder()).copyBufferToBuffer(o,0,a,0,i),(xl?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([u.finish()]),t.next=12,a.mapAsync(ql.MapMode.Read);case 12:return s=a.getMappedRange(),c=new r(s.slice(0)),a.unmap(),t.abrupt("return",c);case 16:return t.abrupt("return",new Float32Array);case 17:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"run",value:function(){var t;this.engine.currentComputePass&&(this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(t=this.engine.currentComputePass).dispatch.apply(t,Hh()(this.context.dispatch)))}},{key:"updateBuffer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.vertexBuffers[t];r&&r.subData({data:e,offset:n})}},{key:"updateUniform",value:function(t,e){var n=this.uniformGPUBufferLayout.find((function(e){return e.name===t}));n&&this.uniformBuffer.subData({data:Number.isFinite(e)?new Float32Array([e]):new Float32Array(e),offset:n.offset})}},{key:"confirmInput",value:function(t,e){var n=this.vertexBuffers[e],r=t.outputBuffer;if(n&&r&&n!==r){var o=this.engine.device.createCommandEncoder(),i=t.context.output,a=i.length*i.typedArrayConstructor.BYTES_PER_ELEMENT;o.copyBufferToBuffer(r.get(),0,n.get(),0,a),(xl?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([o.finish()])}}},{key:"compileShaderToSpirV",value:function(t,e,n){return this.compileRawShaderToSpirV(n+t,e)}},{key:"compileRawShaderToSpirV",value:function(t,e){return this.engine.glslang.compileGLSL(t,e)}},{key:"compileComputePipelineStageDescriptor",value:(e=Rr()(Or.a.mark((function t(e){var n;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e,this.engine.options.useWGSL){t.next=6;break}return t.next=5,this.compileShaderToSpirV(e,"compute","#version 450\\n");case 5:n=t.sent;case 6:return t.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:n,isWHLSL:xl}),entryPoint:"main"}});case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}(),Id=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.indexCount=void 0,this.buffer=void 0;var r=n,o=r.data,i=(r.usage,r.type,r.count);this.indexCount=i||0,this.buffer=new Ed(e,{data:o instanceof Array?new Uint16Array(o):o,usage:ql.BufferUsage.Index|ql.BufferUsage.CopyDst})}return Tr()(t,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}(),kd=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var r=n,o=(r.width,r.height,r.color),i=(r.colors,r.depth);r.stencil;o&&(this.colorTexture=o),i&&(this.depthTexture=i)}return Tr()(t,[{key:"get",value:function(){var t,e;return{color:null===(t=this.colorTexture)||void 0===t?void 0:t.get(),depth:null===(e=this.depthTexture)||void 0===e?void 0:e.get()}}},{key:"destroy",value:function(){var t,e;null===(t=this.colorTexture)||void 0===t||t.destroy(),null===(e=this.depthTexture)||void 0===e||e.destroy()}},{key:"resize",value:function(t){var e,n,r=t.width,o=t.height;r===this.width&&o===this.height||(null===(e=this.colorTexture)||void 0===e||e.resize({width:r,height:o}),null===(n=this.depthTexture)||void 0===n||n.resize({width:r,height:o}));this.width=r,this.height=o}}]),t}(),Od=(vd={},uo()(vd,Qu.POINTS,ql.PrimitiveTopology.PointList),uo()(vd,Qu.LINES,ql.PrimitiveTopology.LineList),uo()(vd,Qu.LINE_LOOP,ql.PrimitiveTopology.LineList),uo()(vd,Qu.LINE_STRIP,ql.PrimitiveTopology.LineStrip),uo()(vd,Qu.TRIANGLES,ql.PrimitiveTopology.TriangleList),uo()(vd,Qu.TRIANGLE_FAN,ql.PrimitiveTopology.TriangleList),uo()(vd,Qu.TRIANGLE_STRIP,ql.PrimitiveTopology.TriangleStrip),vd),Dd=(md={},uo()(md,Qu.NEVER,ql.CompareFunction.Never),uo()(md,Qu.ALWAYS,ql.CompareFunction.Always),uo()(md,Qu.LESS,ql.CompareFunction.Less),uo()(md,Qu.LEQUAL,ql.CompareFunction.LessEqual),uo()(md,Qu.GREATER,ql.CompareFunction.Greater),uo()(md,Qu.GEQUAL,ql.CompareFunction.GreaterEqual),uo()(md,Qu.EQUAL,ql.CompareFunction.Equal),uo()(md,Qu.NOTEQUAL,ql.CompareFunction.NotEqual),md),Rd=(yd={},uo()(yd,Qu.FUNC_ADD,ql.BlendOperation.Add),uo()(yd,Qu.MIN_EXT,ql.BlendOperation.Min),uo()(yd,Qu.MAX_EXT,ql.BlendOperation.Max),uo()(yd,Qu.FUNC_SUBTRACT,ql.BlendOperation.Subtract),uo()(yd,Qu.FUNC_REVERSE_SUBTRACT,ql.BlendOperation.ReverseSubtract),yd),Md=(gd={},uo()(gd,Qu.ZERO,ql.BlendFactor.Zero),uo()(gd,Qu.ONE,ql.BlendFactor.One),uo()(gd,Qu.SRC_COLOR,ql.BlendFactor.SrcColor),uo()(gd,Qu.ONE_MINUS_SRC_COLOR,ql.BlendFactor.OneMinusSrcColor),uo()(gd,Qu.SRC_ALPHA,ql.BlendFactor.SrcAlpha),uo()(gd,Qu.ONE_MINUS_SRC_ALPHA,ql.BlendFactor.OneMinusSrcAlpha),uo()(gd,Qu.DST_COLOR,ql.BlendFactor.DstColor),uo()(gd,Qu.ONE_MINUS_DST_COLOR,ql.BlendFactor.OneMinusDstColor),uo()(gd,Qu.DST_ALPHA,ql.BlendFactor.DstAlpha),uo()(gd,Qu.ONE_MINUS_DST_ALPHA,ql.BlendFactor.OneMinusDstAlpha),uo()(gd,Qu.CONSTANT_COLOR,ql.BlendFactor.BlendColor),uo()(gd,Qu.ONE_MINUS_CONSTANT_COLOR,ql.BlendFactor.OneMinusBlendColor),uo()(gd,Qu.SRC_ALPHA_SATURATE,ql.BlendFactor.SrcAlphaSaturated),gd),Cd=(bd={},uo()(bd,Qu.ALPHA,"r8unorm"),uo()(bd,Qu.RGBA,"rgba8unorm"),uo()(bd,Qu.DEPTH_COMPONENT,"depth32float"),uo()(bd,Qu.DEPTH_STENCIL,"depth24plus-stencil8"),bd),Nd=(_d={},uo()(_d,Qu.NEAREST,"nearest"),uo()(_d,Qu.LINEAR,"linear"),_d),Pd=(xd={},uo()(xd,Qu.REPEAT,"repeat"),uo()(xd,Qu.CLAMP_TO_EDGE,"clamp-to-edge"),uo()(xd,Qu.MIRRORED_REPEAT,"mirror-repeat"),xd);function Gd(t){var e=t.cull;return e&&e.enable?e.face?e.face===Qu.FRONT?ql.CullMode.Front:ql.CullMode.Back:void 0:ql.CullMode.None}function jd(t){var e=t.depth,n=(t.stencil,{compare:ql.CompareFunction.Always,depthFailOp:ql.StencilOperation.Keep,failOp:ql.StencilOperation.Keep,passOp:ql.StencilOperation.Keep});return{depthWriteEnabled:e&&e.enable,depthCompare:Dd[(null==e?void 0:e.func)||Qu.ALWAYS],format:ql.TextureFormat.Depth24PlusStencil8,stencilFront:n,stencilBack:n,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function Ld(t,e){var n=t.blend;return[{format:e,alphaBlend:{srcFactor:Md[n&&n.func&&n.func.srcAlpha||Qu.ONE],dstFactor:Md[n&&n.func&&n.func.dstAlpha||Qu.ZERO],operation:Rd[n&&n.equation&&n.equation.alpha||Qu.FUNC_ADD]},colorBlend:{srcFactor:Md[n&&n.func&&n.func.srcRGB||Qu.ONE],dstFactor:Md[n&&n.func&&n.func.dstRGB||Qu.ZERO],operation:Rd[n&&n.equation&&n.equation.rgb||Qu.FUNC_ADD]},writeMask:ql.ColorWrite.All}]}function Ud(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Bd(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ud(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ud(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Fd(t){for(var e=0,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var i=0,a=r;i<a.length;i++){var u=a[i];e+=u.length}for(var s=new t(e),c=0,f=0,l=r;f<l.length;f++){var h=l[f];s.set(h,c),c+=h.length}return s}var zd,Vd,Wd,Xd,Hd,qd,Yd,Kd,Zd,Qd,Jd,$d,tp=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}var e,n;return Tr()(t,[{key:"init",value:(n=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s,c,f,l,h,d,p,v,m,y=this;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.options,n=e.vs,r=e.fs,o=e.attributes,i=e.uniforms,a=e.primitive,e.count,u=e.elements,s=e.depth,c=e.blend,f=e.stencil,l=e.cull,e.instances,t.next=3,this.compilePipelineStageDescriptor(n,r,null);case 3:h=t.sent,d=h.vertexStage,p=h.fragmentStage,i&&this.buildUniformBindGroup(i),u&&(this.indexBuffer=u.get(),this.indexCount=u.indexCount),v={vertexBuffers:Object.keys(o).map((function(t,e){var n=o[t],r=n.get(),i=r.arrayStride,a=r.stepMode,u=r.attributes;return y.attributeCache[t]=n,{arrayStride:i,stepMode:a,attributes:u}}))},m={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:Od[a||Qu.TRIANGLES],rasterizationState:Bd(Bd({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:Gd({cull:l})}),depthStencilState:jd({depth:s,stencil:f}),colorStates:Ld({blend:c},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:d,fragmentStage:p,vertexState:v},this.renderPipeline=this.engine.device.createRenderPipeline(m);case 11:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"addUniforms",value:function(t){this.uniforms=Bd(Bd({},this.uniforms),rd(t))}},{key:"draw",value:function(t){var e=this,n=this.engine.getCurrentRenderPass(),r=Bd(Bd({},this.uniforms),rd(t.uniforms||{})),o=[];Object.keys(r).forEach((function(t){var n=td()(r[t]);if("boolean"===n||"number"===n||Array.isArray(r[t])||r[t].BYTES_PER_ELEMENT){var i,a=null===(i=e.uniformGPUBufferLayout.find((function(e){return e.name===t})))||void 0===i?void 0:i.offset;Td()(a)||e.uniformBuffer.subData({data:r[t],offset:a})}else{var u,s=null===(u=e.uniformGPUBufferLayout.find((function(e){return e.name===t})))||void 0===u?void 0:u.offset;if(!Td()(s)){var c=r[t].get(),f=c.color||c,l=f.texture,h=f.sampler;h&&(o.push({binding:s,resource:h}),s++),o.push({binding:s,resource:l.createView()})}}})),this.uniformBuffer&&(o[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:o}),this.renderPipeline&&n.setPipeline(this.renderPipeline),n.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&n.setIndexBuffer(this.indexBuffer.get(),ql.IndexFormat.Uint32,0),Object.keys(this.attributeCache).forEach((function(t,r){n.setVertexBuffer(0+r,e.attributeCache[t].get().buffer,0)})),this.indexBuffer?n.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):n.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:(e=Rr()(Or.a.mark((function t(e,n,r){var o,i,a;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o="#version 450\\n",i=e,a=n,this.engine.options.useWGSL){t.next=10;break}return t.next=6,this.compileShaderToSpirV(e,"vertex",o);case 6:return i=t.sent,t.next=9,this.compileShaderToSpirV(n,"fragment",o);case 9:a=t.sent;case 10:return t.abrupt("return",this.createPipelineStageDescriptor(i,a));case 11:case"end":return t.stop()}}),t,this)}))),function(t,n,r){return e.apply(this,arguments)})},{key:"compileShaderToSpirV",value:function(t,e,n){return this.compileRawShaderToSpirV(n+t,e)}},{key:"compileRawShaderToSpirV",value:function(t,e){return this.engine.glslang.compileGLSL(t,e)}},{key:"createPipelineStageDescriptor",value:function(t,e){return{vertexStage:{module:this.engine.device.createShaderModule({code:t,isWHLSL:xl}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:e,isWHLSL:xl}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:ql.FrontFace.CCW,cullMode:ql.CullMode.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(t){var e=this,n=0,r=Fd.apply(void 0,[Float32Array].concat(Hh()(Object.keys(t).map((function(r){return t[r]?(e.uniformGPUBufferLayout.push({name:r,offset:n}),n+=4*(t[r].length||1),t[r]):[]}))))),o=[],i=!1;r.length&&(i=!0,o.push({binding:0,visibility:ql.ShaderStage.Fragment|ql.ShaderStage.Vertex,type:ql.BindingType.UniformBuffer})),Object.keys(t).filter((function(e){return null===t[e]})).forEach((function(t,n){e.uniformGPUBufferLayout.push({name:t,offset:2*n+(i?1:0)}),o.push({binding:2*n+(i?1:0),visibility:ql.ShaderStage.Fragment,type:ql.BindingType.Sampler},{binding:2*n+(i?1:0)+1,visibility:ql.ShaderStage.Fragment,type:ql.BindingType.SampledTexture})})),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:o}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),i&&(this.uniformBuffer=new Ed(this.engine,{data:r instanceof Array?new Float32Array(r):r,usage:ql.BufferUsage.Uniform|ql.BufferUsage.CopyDst}))}}]),t}(),ep=function(){function t(e,n){Er()(this,t),this.engine=e,this.options=n,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return Tr()(t,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(t){var e=t.width,n=t.height;e===this.width&&n===this.height||(this.destroy(),this.createTexture()),this.width=e,this.height=n}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var t=this.options,e=(t.data,t.type),n=(void 0===e&&Qu.UNSIGNED_BYTE,t.width),r=t.height,o=(t.flipY,t.format),i=void 0===o?Qu.RGBA:o,a=(t.mipmap,t.wrapS),u=void 0===a?Qu.CLAMP_TO_EDGE:a,s=t.wrapT,c=void 0===s?Qu.CLAMP_TO_EDGE:s,f=t.aniso,l=void 0===f?0:f,h=(t.alignment,t.premultiplyAlpha,t.mag),d=void 0===h?Qu.NEAREST:h,p=t.min,v=void 0===p?Qu.NEAREST:p,m=t.colorSpace,y=(void 0===m&&Qu.BROWSER_DEFAULT_WEBGL,t.usage);this.width=n,this.height=r,this.texture=this.engine.device.createTexture({size:[n,r,1],mipLevelCount:1,sampleCount:1,dimension:ql.TextureDimension.E2d,format:Cd[i],usage:y||ql.TextureUsage.Sampled|ql.TextureUsage.CopyDst}),(!y||y&ql.TextureUsage.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:Pd[u],addressModeV:Pd[c],addressModeW:Pd[u],magFilter:Nd[d],minFilter:Nd[v],maxAnisotropy:l}))}}]),t}(),np=Object(Lr.injectable)()(zd=function(){function t(){var e=this;Er()(this,t),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(t){t.framebuffer;var n=t.color,r=t.depth,o=t.stencil;e.options.supportCompute&&e.startComputePass(),e.currentRenderTarget?(e.currentRenderPass&&e.endRenderTargetRenderPass(),e.startRenderTargetRenderPass(e.currentRenderTarget,n||null,!!r,!!o)):(e.mainColorAttachments[0].loadValue=n||ql.LoadOp.Load,e.mainDepthAttachment.depthLoadValue=r||ql.LoadOp.Load,e.mainDepthAttachment.stencilLoadValue=o?e.clearStencilValue:ql.LoadOp.Load,e.mainRenderPass&&e.endMainRenderPass(),e.startMainRenderPass())},this.createModel=function(){var t=Rr()(Or.a.mark((function t(n){var r;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new tp(e,n),t.next=3,r.init();case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.createAttribute=function(t){return new wd(e,t)},this.createBuffer=function(t){return new Ed(e,t)},this.createElements=function(t){return new Id(e,t)},this.createTexture2D=function(t){return new ep(e,t)},this.createFramebuffer=function(t){return new kd(e,t)},this.useFramebuffer=function(t,n){e.currentRenderTarget&&e.unbindFramebuffer(e.currentRenderTarget),e.currentRenderTarget=t,e.currentRenderTargetViewDescriptor={dimension:ql.TextureViewDimension.E2d,arrayLayerCount:1,aspect:ql.TextureAspect.All},e.currentRenderPass=null,n()},this.createComputeModel=function(){var t=Rr()(Or.a.mark((function t(n){var r;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Ad(e,n),t.next=3,r.init();case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getCanvas=function(){return e.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(t){var n=t.x,r=t.y,o=t.width,i=t.height;if(e.currentRenderPass){if(e.transientViewport.x!==1/0){e.getCurrentRenderPass().setViewport(e.transientViewport.x,e.transientViewport.y,e.transientViewport.width,e.transientViewport.height,0,1)}else if(n!==e.cachedViewport.x||r!==e.cachedViewport.y||o!==e.cachedViewport.width||i!==e.cachedViewport.height){e.cachedViewport={x:n,y:r,width:o,height:i},e.getCurrentRenderPass().setViewport(n,r,o,i,0,1)}}else e.transientViewport={x:n,y:r,width:o,height:i}},this.readPixels=function(t){throw new Error("Method not implemented.")}}var e,n;return Tr()(t,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:(n=Rr()(Or.a.mark((function t(e){return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.canvas=e.canvas,this.options=e,this.useWGSL=!!e.useWGSL,this.mainPassSampleCount=e.antialiasing?this.defaultSampleCount:1,t.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach((function(t){return t.destroy()})),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),xl?this.device.getQueue().submit(this.commandBuffers.filter((function(t){return t}))):this.device.defaultQueue.submit(this.commandBuffers.filter((function(t){return t})))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:(e=Rr()(Or.a.mark((function t(){var e,n;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dd();case 2:return this.glslang=t.sent,t.next=5,null===(e=navigator)||void 0===e||null===(n=e.gpu)||void 0===n?void 0:n.requestAdapter();case 5:return this.adapter=t.sent,t.next=8,this.adapter.requestDevice();case 8:this.device=t.sent;case 9:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(xl?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:ql.TextureUsage.OutputAttachment|ql.TextureUsage.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var t={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:ql.TextureDimension.E2d,format:ql.TextureFormat.BGRA8Unorm,usage:ql.TextureUsage.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(t),this.mainColorAttachments=[{attachment:xl?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:ql.StoreOp.Store}]}else this.mainColorAttachments=[{attachment:xl?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:ql.StoreOp.Store}];var e={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:ql.TextureDimension.E2d,format:xl?"depth32float-stencil8":ql.TextureFormat.Depth24PlusStencil8,usage:ql.TextureUsage.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(e),this.mainDepthAttachment={attachment:xl?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:ql.StoreOp.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:ql.StoreOp.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=xl?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=xl?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(t,e,n){var r,o,i,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=null===(r=t.get().color)||void 0===r?void 0:r.texture;u&&(i=u.createView(this.currentRenderTargetViewDescriptor));var s,c=null===(o=t.get().depth)||void 0===o?void 0:o.texture;c&&(s=c.createView());var f=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:i,loadValue:null!==e?e:ql.LoadOp.Load,storeOp:ql.StoreOp.Store}],depthStencilAttachment:c&&s?{attachment:s,depthLoadValue:n?this.clearDepthValue:ql.LoadOp.Load,depthStoreOp:ql.StoreOp.Store,stencilLoadValue:a?this.clearStencilValue:ql.LoadOp.Load,stencilStoreOp:ql.StoreOp.Store}:void 0});this.currentRenderPass=f,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&null!==this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(t){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),t}())||zd;function rp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var op=(Vd=Object(Lr.injectable)(),Wd=Object(Lr.inject)(Ur.Systems),Xd=Object(Lr.named)(Ur.MaterialSystem),Hd=Object(Lr.inject)(Ur.Systems),qd=Object(Lr.named)(Ur.GeometrySystem),Yd=Object(Lr.inject)(Ur.ShaderModuleService),Vd((Zd=function(t){Wr()(n,t);var e=rp(n);function n(){var t;Er()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o)),xr()(t,"materialSystem",Qd,co()(t)),xr()(t,"geometrySystem",Jd,co()(t)),xr()(t,"shaderModuleService",$d,co()(t)),t}return Tr()(n,[{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data,r=this.getMeshComponent();r&&r.material&&("gridColor"===e?(r.material.setUniform("u_GridColor",n),r.material.setUniform("u_GridColor2",n)):"gridSize"===e&&(r.material.setUniform("u_GridSize",n),r.material.setUniform("u_GridSize2",n)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:"attribute vec3 a_Position;\\n\\nvarying vec3 v_Position;\\n\\nuniform mat4 projectionMatrix;\\nuniform mat4 modelViewMatrix;\\n\\nvoid main() {\\n  v_Position = a_Position;\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);\\n}",fs:"// generate grid, borrow from clay.gl viewer\\n// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl\\n#extension GL_OES_standard_derivatives : enable\\n\\nvarying vec3 v_Position;\\n// varying vec3 v_Normal;\\n\\nuniform float u_GridSize : 5;\\nuniform float u_GridSize2 : .5;\\nuniform vec4 u_GridColor : [0, 0, 0, 1];\\nuniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];\\nuniform bool u_GridEnabled : true;\\n\\n// uniform vec3 u_LightDirection;\\n// uniform vec3 u_LightColor;\\n// uniform vec3 u_Camera;\\n\\nvoid main() {\\n  // vec3 n = v_Normal;\\n  // vec3 l = normalize(u_LightDirection);\\n  // float NdotL = clamp(dot(n, l), 0.001, 1.0);\\n\\n  gl_FragColor = vec4(1.);\\n\\n  if (u_GridEnabled) {\\n    float wx = v_Position.x;\\n    float wz = v_Position.z;\\n    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;\\n    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;\\n\\n    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;\\n    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;\\n\\n    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);\\n    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);\\n    // if (v0 > 0.1) {\\n        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);\\n    // }\\n    // else {\\n        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);\\n    // }\\n  }\\n\\n  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);\\n  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;\\n\\n  // gl_FragColor.rgb *= diffuseColor;\\n}"});var t=this.shaderModuleService.getModule("grid"),e=t.vs,n=t.fs,r=t.uniforms,o=this.materialSystem.createShaderMaterial({vertexShader:e,fragmentShader:n});this.setMaterial(o);var i=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(i),o.setCull({enable:!1,face:Qu.BACK}).setDepth({enable:!0,func:Qu.LESS}),o.setUniform(r),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),i.setIndex([0,3,2,2,1,0]),i.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),n}(Ah),Qd=Ir()(Zd.prototype,"materialSystem",[Wd,Xd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jd=Ir()(Zd.prototype,"geometrySystem",[Hd,qd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$d=Ir()(Zd.prototype,"shaderModuleService",[Yd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kd=Zd))||Kd),ip=n(53),ap=n(36);function up(t,e,n,r,o){sp(e,r,-o),sp(e,r,o),t.push(n),t.push(n)}function sp(t,e,n){t.push([[e[0],e[1]],n])}var cp,fp,lp,hp,dp,pp,vp,mp,yp,gp,bp;function _p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var xp,wp,Ep,Sp,Tp,Ap,Ip,kp,Op,Dp,Rp,Mp=(cp=Object(Lr.injectable)(),fp=Object(Lr.inject)(Ur.Systems),lp=Object(Lr.named)(Ur.MaterialSystem),hp=Object(Lr.inject)(Ur.Systems),dp=Object(Lr.named)(Ur.GeometrySystem),pp=Object(Lr.inject)(Ur.ShaderModuleService),cp((mp=function(t){Wr()(n,t);var e=_p(n);function n(){var t;Er()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o)),xr()(t,"materialSystem",yp,co()(t)),xr()(t,"geometrySystem",gp,co()(t)),xr()(t,"shaderModuleService",bp,co()(t)),t.vertexCount=void 0,t}return Tr()(n,[{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data,r=this.getMeshComponent();if(r&&r.material)switch(e){case"dashArray":r.material.setUniform("u_dash_array",n);break;case"dashOffset":r.material.setUniform("u_dash_offset",n);break;case"dashRatio":r.material.setUniform("u_dash_ratio",n);break;case"thickness":r.material.setUniform("u_thickness",n);break;case"color":var o=new Array(this.vertexCount).fill(void 0).map((function(){return n})).reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[]);r.geometry.setAttribute("a_color",Float32Array.from(o),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]})}}},{key:"onEntityCreated",value:function(){var t=this;this.shaderModuleService.registerModule("line",{vs:"attribute vec2 a_pos;\\nattribute vec4 a_color;\\nattribute float a_line_miter;\\nattribute vec2 a_line_normal;\\nattribute float a_counters;\\n\\nuniform mat4 projectionMatrix;\\nuniform mat4 modelViewMatrix;\\nuniform float u_thickness : 0.02;\\nuniform vec2 u_viewport;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_counters;\\n\\nvoid main() {\\n  v_color = a_color;\\n  v_counters = a_counters;\\n\\n  vec3 normal = normalize(vec3(a_line_normal, 0.0));\\n\\n  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);\\n\\n  v_normal = vec2(normal * sign(a_line_miter));\\n\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;\\n}\\n",fs:"uniform float u_dash_array : 0.02;\\nuniform float u_dash_offset : 0;\\nuniform float u_dash_ratio : 0;\\nuniform float u_thickness : 0.02;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_counters;\\n\\nvoid main() {\\n    float blur = 1. - smoothstep(0.98, 1., length(v_normal));\\n\\n    gl_FragColor = v_color;\\n    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));\\n}"});var e=this.shaderModuleService.getModule("line"),n=e.vs,r=e.fs,o=e.uniforms,i=this.materialSystem.createShaderMaterial({vertexShader:n,fragmentShader:r}),a=function(t,e,n){var r=[0,0],o=[0,0],i=[0,0],a=[0,0],u=-1,s=!1,c=null,f=Object(ip.create)(),l=n||0,h=[],d=[],p=[],v=[0,0];e&&(t=t.slice()).push(t[0]);for(var m=t.length,y=1;y<m;y++){var g=l,b=t[y-1],_=t[y],x=y<t.length-1?t[y+1]:null;if(v.push(y/m,y/m),Object(ap.direction)(r,_,b),c||(c=[0,0],Object(ap.normal)(c,r)),s||(s=!0,up(d,h,b,c,1)),p.push([g+0,g+1,g+2]),x){Object(ap.direction)(o,x,_);var w=Object(ap.computeMiter)(i,a,r,o,1),E=Object(ip.dot)(i,c)<0?-1:1,S=w>3;if(!isFinite(w)){Object(ap.normal)(c,r),up(d,h,_,c,1),p.push(1===u?[g,g+2,g+3]:[g+2,g+1,g+3]),l+=2,u=E;continue}S?(w=3,v.push(y/m),sp(h,c,-E),d.push(_),sp(h,a,w*E),d.push(_),p.push(u!==-E?[g,g+2,g+3]:[g+2,g+1,g+3]),p.push([g+2,g+3,g+4]),Object(ap.normal)(f,o),Object(ip.copy)(c,f),sp(h,c,-E),d.push(_),l+=3):(up(d,h,_,a,w),p.push(1===u?[g,g+2,g+3]:[g+2,g+1,g+3]),E=-1,Object(ip.copy)(c,a),l+=2),u=E}else Object(ap.normal)(c,r),up(d,h,_,c,1),p.push(1===u?[g,g+2,g+3]:[g+2,g+1,g+3]),l+=2}return{normals:h,attrIndex:p,attrPos:d,attrCounters:v}}(this.config.points,!1),u=a.normals,s=a.attrIndex,c=a.attrPos,f=a.attrCounters,l=c.length;this.vertexCount=l;var h=this.geometrySystem.createBufferGeometry({vertexCount:l});this.setMaterial(i),this.setGeometry(h),i.setCull({enable:!1,face:Qu.BACK}).setUniform(o),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var d=[],p=[];u.forEach((function(t){var e=t[0],n=t[1];d.push([e[0],e[1]]),p.push(n)})),h.setIndex(s.reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[])),h.setAttribute("a_pos",Float32Array.from(c.reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var v=new Array(l).fill(void 0).map((function(){return Hh()(t.config.color)})).reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[]);h.setAttribute("a_color",Float32Array.from(v),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),h.setAttribute("a_line_miter",Float32Array.from(p),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),h.setAttribute("a_line_normal",Float32Array.from(d.reduce((function(t,e){return[].concat(Hh()(t),Hh()(e))}),[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),h.setAttribute("a_counters",Float32Array.from(f),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),n}(Ah),yp=Ir()(mp.prototype,"materialSystem",[fp,lp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gp=Ir()(mp.prototype,"geometrySystem",[hp,dp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bp=Ir()(mp.prototype,"shaderModuleService",[pp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vp=mp))||vp);function Cp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Np(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yr()(t);if(e){var o=Yr()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hr()(this,n)}}var Pp=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"];console.log();var Gp,jp,Lp,Up,Bp,Fp,zp,Vp,Wp,Xp=(xp=Object(Lr.injectable)(),wp=Object(Lr.inject)(Ur.Systems),Ep=Object(Lr.named)(Ur.MaterialSystem),Sp=Object(Lr.inject)(Ur.Systems),Tp=Object(Lr.named)(Ur.GeometrySystem),Ap=Object(Lr.inject)(Ur.ShaderModuleService),xp((kp=function(t){Wr()(n,t);var e=Np(n);function n(){var t;Er()(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o)),xr()(t,"materialSystem",Op,co()(t)),xr()(t,"geometrySystem",Dp,co()(t)),xr()(t,"shaderModuleService",Rp,co()(t)),t}return Tr()(n,[{key:"onAttributeChanged",value:function(t){var e=t.name,n=t.data,r=this.getMeshComponent();r&&r.material&&("strokeWidth"===e?r.material.setUniform("u_stroke_width",n):"strokeColor"===e?r.material.setUniform("u_stroke_color",n):"strokeOpacity"===e?r.material.setUniform("u_stroke_opacity",n):"opacity"===e?r.material.setUniform("u_opacity",n):"blur"===e&&r.material.setUniform("u_blur",n))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:'attribute vec2 position;\\nattribute vec4 color;\\nattribute float shape;\\nattribute vec2 offset;\\nattribute float size;\\n\\nuniform mat4 projectionMatrix;\\nuniform mat4 modelViewMatrix;\\n\\nuniform float u_stroke_width : 0.01;\\nuniform float u_device_pixel_ratio;\\nuniform vec2 u_viewport;\\n\\nvarying vec4 v_color;\\nvarying vec4 v_data;\\nvarying float v_radius;\\n\\n#pragma include "picking"\\n\\nvoid main() {\\n  v_color = color;\\n  v_radius = size;\\n\\n  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);\\n\\n  // construct point coords\\n  v_data = vec4(position, antialiasblur, shape);\\n\\n  gl_Position = projectionMatrix * modelViewMatrix\\n    * vec4(position * size + offset, 0.0, 1.0);\\n\\n  setPickingColor(a_PickingColor);\\n}',fs:"uniform float u_blur : 0.05;\\nuniform float u_opacity : 0.7;\\nuniform float u_stroke_width : 0.01;\\nuniform vec4 u_stroke_color : [0, 0, 0, 0];\\nuniform float u_stroke_opacity : 1;\\n\\nvarying vec4 v_color;\\nvarying vec4 v_data;\\nvarying float v_radius;\\n\\n#pragma include \\"sdf2d\\"\\n#pragma include \\"picking\\"\\n\\nvoid main() {\\n  int shape = int(floor(v_data.w + 0.5));\\n\\n  float antialiasblur = v_data.z;\\n  float antialiased_blur = -max(u_blur, antialiasblur);\\n  float r = v_radius / (v_radius + u_stroke_width);\\n\\n  float outer_df;\\n  float inner_df;\\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\\n  // if (shape == 0) {\\n    outer_df = sdCircle(v_data.xy, 1.0);\\n    inner_df = sdCircle(v_data.xy, r);\\n  // } else if (shape == 1) {\\n  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);\\n  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);\\n  // } else if (shape == 2) {\\n  //   outer_df = sdBox(v_data.xy, vec2(1.));\\n  //   inner_df = sdBox(v_data.xy, vec2(r));\\n  // } else if (shape == 3) {\\n  //   outer_df = sdPentagon(v_data.xy, 0.8);\\n  //   inner_df = sdPentagon(v_data.xy, r * 0.8);\\n  // } else if (shape == 4) {\\n  //   outer_df = sdHexagon(v_data.xy, 0.8);\\n  //   inner_df = sdHexagon(v_data.xy, r * 0.8);\\n  // } else if (shape == 5) {\\n  //   outer_df = sdOctogon(v_data.xy, 1.0);\\n  //   inner_df = sdOctogon(v_data.xy, r);\\n  // } else if (shape == 6) {\\n  //   outer_df = sdHexagram(v_data.xy, 0.52);\\n  //   inner_df = sdHexagram(v_data.xy, r * 0.52);\\n  // } else if (shape == 7) {\\n  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));\\n  //   inner_df = sdRhombus(v_data.xy, vec2(r));\\n  // } else if (shape == 8) {\\n  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);\\n  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);\\n  // }\\n\\n  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);\\n\\n  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(\\n    antialiased_blur,\\n    0.0,\\n    inner_df\\n  );\\n  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;\\n\\n  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);\\n  gl_FragColor.a = gl_FragColor.a * opacity_t;\\n\\n  gl_FragColor = filterColor(gl_FragColor);\\n}"});var t=this.shaderModuleService.getModule("grid"),e=t.vs,n=t.fs,r=t.uniforms,o=this.materialSystem.createShaderMaterial({vertexShader:e,fragmentShader:n,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:Qu.SRC_ALPHA,dstRGB:Qu.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});o.setUniform(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Cp(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({u_device_pixel_ratio:window.devicePixelRatio},r));var i=this.buildAttributes(),a=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:i.instancedOffsets.length/2,vertexCount:6});a.setIndex([0,2,1,0,3,2]),a.setAttribute("position",Float32Array.from(i.positions),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),a.setAttribute("offset",Float32Array.from(i.instancedOffsets),{arrayStride:8,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),a.setAttribute("color",Float32Array.from(i.instancedColors),{arrayStride:16,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),a.setAttribute("size",Float32Array.from(i.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),a.setAttribute("shape",Float32Array.from(i.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),a.setAttribute("a_PickingColor",Float32Array.from(i.instancedPickingColors),{arrayStride:12,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(o),this.setGeometry(a)}},{key:"buildAttribute",value:function(t,e,n){var r,o,i,a,u;(r=e.instancedPickingColors).push.apply(r,Hh()([(u=t.id||n)+1&255,u+1>>8&255,u+1>>8>>8&255])),e.instancedShapes.push(Pp.indexOf(t.shape||"circle")),(o=e.instancedColors).push.apply(o,Hh()(t.color||[1,0,0,1])),(i=e.instancedOffsets).push.apply(i,Hh()(t.position||[0,0])),(a=e.instancedSizes).push.apply(a,Hh()(t.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var t=this,e={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach((function(n,r){t.buildAttribute(n,e,r)})):this.buildAttribute(this.config,e,0),e}}]),n}(Ah),Op=Ir()(kp.prototype,"materialSystem",[wp,Ep],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dp=Ir()(kp.prototype,"geometrySystem",[Sp,Tp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rp=Ir()(kp.prototype,"shaderModuleService",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ip=kp))||Ip);function Hp(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return qp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qp(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function qp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Yp,Kp,Zp,Qp,Jp,$p,tv,ev,nv,rv,ov,iv,av=(Gp=Object(Lr.injectable)(),jp=Object(Lr.inject)(Ur.RenderEngine),Lp=Object(Lr.inject)(Ur.ShaderModuleService),Up=Object(Lr.inject)(Ur.ConfigService),Gp((Fp=function(){function t(){Er()(this,t),xr()(this,"engine",zp,this),xr()(this,"shaderModule",Vp,this),xr()(this,"configService",Wp,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0,this.container=void 0}var e,n;return Tr()(t,[{key:"init",value:(n=Rr()(Or.a.mark((function t(){var e,n,r,o,i;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.shaderModule.registerBuiltinModules(),e=this.container.getAll(Ur.Systems),!(n=this.configService.get()).canvas){t.next=25;break}return t.next=6,this.engine.init({canvas:n.canvas,swapChainFormat:ql.TextureFormat.BGRA8Unorm,antialiasing:!1});case 6:r=Hp(e),t.prev=7,r.s();case 9:if((o=r.n()).done){t.next=16;break}if(!(i=o.value).initialize){t.next=14;break}return t.next=14,i.initialize();case 14:t.next=9;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(7),r.e(t.t0);case 21:return t.prev=21,r.f(),t.finish(21);case 24:this.inited=!0;case 25:case"end":return t.stop()}}),t,this,[[7,18,21,24]])}))),function(){return n.apply(this,arguments)})},{key:"render",value:(e=Rr()(Or.a.mark((function t(){var e,n,r,o,i,a,u,s=arguments;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.inited&&!this.rendering){t.next=2;break}return t.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach((function(t){t()})),this.rendering=!0,this.engine.beginFrame(),e=this.container.getAll(Ur.Systems),n=s.length,r=new Array(n),o=0;o<n;o++)r[o]=s[o];i=Hp(e),t.prev=8,i.s();case 10:if((a=i.n()).done){t.next=17;break}if(!(u=a.value).execute){t.next=15;break}return t.next=15,u.execute(r);case 15:t.next=10;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(8),i.e(t.t0);case 22:return t.prev=22,i.f(),t.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return t.stop()}}),t,this,[[8,19,22,25]])}))),function(){return e.apply(this,arguments)})},{key:"clear",value:function(t){var e=this;return this.inited?this.engine.clear(t):this.pendings.unshift((function(){e.engine.clear(t),e.pendings.shift()})),this}},{key:"setSize",value:function(t){var e=t.width,n=t.height,r=this.engine.getCanvas();return this.size={width:e,height:n},r.width=e,r.height=n,this}},{key:"getSize",value:function(){return this.size}}]),t}(),zp=Ir()(Fp.prototype,"engine",[jp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vp=Ir()(Fp.prototype,"shaderModule",[Lp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wp=Ir()(Fp.prototype,"configService",[Up],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bp=Fp))||Bp),uv=Object(Lr.injectable)()(Yp=function(){function t(){Er()(this,t),this.entities=[]}return Tr()(t,[{key:"getEntities",value:function(){return this.entities}},{key:"addEntity",value:function(t){return-1===this.entities.indexOf(t)&&this.entities.push(t),this}},{key:"removeEntity",value:function(t){var e=this.entities.indexOf(t);return this.entities.splice(e,1),this}}]),t}())||Yp,sv=(Kp=Object(Lr.injectable)(),Zp=Object(Lr.inject)(Ur.Systems),Qp=Object(Lr.named)(Ur.RendererSystem),Kp(($p=function(){function t(){Er()(this,t),xr()(this,"rendererSystem",tv,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return Tr()(t,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(t){return this.camera=t,this}},{key:"setScene",value:function(t){return this.scene=t,this}},{key:"setViewport",value:function(t){return this.viewport=t,this}},{key:"setClearColor",value:function(t){return this.clearColor=t,this}},{key:"pick",value:function(t){return this.rendererSystem.pick(t,this)}}]),t}(),tv=Ir()($p.prototype,"rendererSystem",[Zp,Qp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jp=$p))||Jp);function cv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cv(Object(n),!0).forEach((function(e){uo()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var lv=(ev=Object(Lr.injectable)(),nv=Object(Lr.inject)(Ur.ConfigService),ev((ov=function(){function t(){Er()(this,t),xr()(this,"configService",iv,this),this.container=void 0}var e;return Tr()(t,[{key:"getEngine",value:(e=Rr()(Or.a.mark((function t(){var e,n,r,o;return Or.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.container.get(Ur.RenderEngine),n=this.configService.get(),r=n.canvas,o=n.engineOptions,t.next=4,e.init(fv({canvas:r||Yl(),swapChainFormat:ql.TextureFormat.BGRA8Unorm,antialiasing:!1},o));case 4:return t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"getTransformComponent",value:function(t){return this.container.get(Ur.TransformComponentManager).getComponentByEntity(t)}},{key:"getMeshComponent",value:function(t){return this.container.get(Ur.MeshComponentManager).getComponentByEntity(t)}},{key:"setConfig",value:function(t){this.configService.set(t)}},{key:"setContainer",value:function(t){this.container=t}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return Cr()}},{key:"createScene",value:function(){return this.container.get(uv)}},{key:"createCamera",value:function(){return this.container.get(zl)}},{key:"createView",value:function(){return this.container.get(sv)}},{key:"createRenderable",value:function(t,e,n){var r=e?this.container.getNamed(Ur.Renderable,e):this.container.get(Ah);return r.setConfig(n||{}),r.setEntity(t),r}},{key:"createBoxGeometry",value:function(t){return this.container.getNamed(Ur.Systems,Ur.GeometrySystem).createBox(t)}},{key:"createBufferGeometry",value:function(t){return this.container.getNamed(Ur.Systems,Ur.GeometrySystem).createBufferGeometry(t)}},{key:"createInstancedBufferGeometry",value:function(t){return this.container.getNamed(Ur.Systems,Ur.GeometrySystem).createInstancedBufferGeometry(t)}},{key:"createBasicMaterial",value:function(){return this.container.getNamed(Ur.Systems,Ur.MaterialSystem).createBasicMaterial()}},{key:"createShaderMaterial",value:function(t){return this.container.getNamed(Ur.Systems,Ur.MaterialSystem).createShaderMaterial(t)}},{key:"createKernel",value:function(t){var e=this.container.get(Th);return"string"==typeof t?e.setBundle(JSON.parse(t)):e.setBundle(t),e.init(),e}},{key:"createRenderer",value:function(){var t=this.container.get(av);return t.container=this.container,t.init(),t}},{key:"destroy",value:function(){this.container.getAll(Ur.Systems).forEach((function(t){t.tearDown&&t.tearDown()})),this.container.get(Ur.RenderEngine).destroy(),this.container.get(Ur.InteractorService).destroy()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=vl(),r=navigator.gpu?np:fd;n.isBound(Ur.RenderEngine)||n.bind(Ur.RenderEngine).to(r).inSingletonScope(),n.bind(av).toSelf(),n.bind(Th).toSelf(),n.bind(Ah).toSelf(),n.bind(sv).toSelf(),n.bind(zl).toSelf(),n.bind(uv).toSelf(),n.bind(t).toSelf(),n.bind(Ur.Renderable).to(Xp).whenTargetNamed(Ah.POINT),n.bind(Ur.Renderable).to(Mp).whenTargetNamed(Ah.LINE),n.bind(Ur.Renderable).to(op).whenTargetNamed(Ah.GRID);var o=n.get(t);return o.setContainer(n),o.setConfig(e),o}}]),t}(),iv=Ir()(ov.prototype,"configService",[nv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rv=ov))||rv),hv=function(t,e){return t?y(t)?function(){return t}:t:function(){return e||1}},dv=function(t,e){var n=[],r=[],o={},i=0;for(i=0;i<t.length;i++){var a=t[i];o[a.id]=i,n.push(a.x),n.push(a.y),n.push(0),n.push(0),r.push([])}for(i=0;i<e.length;i++){var u=e[i];r[o[u.source]].push(o[u.target]),r[o[u.target]].push(o[u.source])}var s=0;for(i=0;i<t.length;i++){var c=n.length,f=r[i],l=f.length;n[4*i+2]=c,n[4*i+3]=f.length,s=Math.max(s,f.length);for(var h=0;h<l;++h){var d=f[h];n.push(+d)}}for(;n.length%4!=0;)n.push(0);return{maxEdgePerVetex:s,array:new Float32Array(n)}},pv=function(t,e,n,r){var o=[],i=[],a={},u=0;for(u=0;u<t.length;u++){var s=t[u];a[s.id]=u,o.push(s.x),o.push(s.y),o.push(0),o.push(0),i.push([])}for(u=0;u<e.length;u++){var c=e[u];i[a[c.source]].push(a[c.target]),i[a[c.source]].push(n(c)),i[a[c.source]].push(r(c)),i[a[c.source]].push(0),i[a[c.target]].push(a[c.source]),i[a[c.target]].push(n(c)),i[a[c.target]].push(r(c)),i[a[c.target]].push(0)}var f=0;for(u=0;u<t.length;u++){var l=o.length,h=i[u],d=h.length;o[4*u+2]=l+1048576*d/4,o[4*u+3]=0,f=Math.max(f,d/4);for(var p=0;p<d;++p){var v=h[p];o.push(+v)}}for(;o.length%4!=0;)o.push(0);return{maxEdgePerVetex:f,array:new Float32Array(o)}},vv=function(t,e){var n=[],r=t.length,o={};return e.forEach((function(e){t.forEach((function(t,i){if(void 0===o[e[t]]&&(o[e[t]]=Object.keys(o).length),n.push(o[e[t]]),i===r-1)for(;n.length%4!=0;)n.push(0)}))})),{array:new Float32Array(n),count:Object.keys(o).length}},mv=function(t){for(var e=[],n=t.length,r=t[0].length,o=function(r){t.forEach((function(t,o){if(e.push(t[r]),o===n-1)for(;e.length%4!=0;)e.push(0)}))},i=0;i<r;i++)o(i);return new Float32Array(e)};function yv(t){return(yv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bv(t,e){return(bv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=wv(t);if(e){var o=wv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xv(this,n)}}function xv(t,e){return!e||"object"!==yv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wv(t){return(wv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ev=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},Sv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bv(t,e)}(i,t);var e,n,r,o=_v(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.gravity=10,e.speed=1,e.clustering=!1,e.clusterField="cluster",e.clusterGravity=10,e.workerEnabled=!1,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return Ev(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,r,o,i,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=(e=this).nodes)&&0!==n.length){t.next=5;break}return e.onLayoutEnd&&e.onLayoutEnd(),t.abrupt("return");case 5:if(e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]),r=e.center,1!==n.length){t.next=14;break}return n[0].x=r[0],n[0].y=r[1],e.onLayoutEnd&&e.onLayoutEnd(),t.abrupt("return");case 14:return o={},i={},n.forEach((function(t,e){y(t.x)||(t.x=Math.random()*a.width),y(t.y)||(t.y=Math.random()*a.height),o[t.id]=t,i[t.id]=e})),e.nodeMap=o,e.nodeIdxMap=i,t.next=21,e.run();case 21:case"end":return t.stop()}}),t,this)})))}},{key:"executeWithWorker",value:function(t,e){return Ev(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,i,a,u,s=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=(r=this).nodes,i=r.center,o&&0!==o.length){n.next=5;break}return n.abrupt("return");case 5:if(1!==o.length){n.next=9;break}return o[0].x=i[0],o[0].y=i[1],n.abrupt("return");case 9:return a={},u={},o.forEach((function(t,e){y(t.x)||(t.x=Math.random()*s.width),y(t.y)||(t.y=Math.random()*s.height),a[t.id]=t,u[t.id]=e})),r.nodeMap=a,r.nodeIdxMap=u,n.next=16,r.run(t,e);case 16:case"end":return n.stop()}}),n,this)})))}},{key:"run",value:function(t,e){return Ev(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,i,a,u,s,c,f,l,h,d,p,v,m,y,g,b,_,x,w,E,S,T,A,I,k,O=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(o=(r=this).nodes,i=r.edges,a=r.maxIteration,u=r.center,s=r.height*r.width,c=Math.sqrt(s)/10,f=s/(o.length+1),l=Math.sqrt(f),h=r.speed,d=r.clustering,p=vv([r.clusterField],o),v=p.array,m=p.count,y=o.length,g=dv(o,i),b=g.maxEdgePerVetex,_=g.array,x=r.workerEnabled,w=x?lv.create({canvas:t,engineOptions:{supportCompute:!0}}):lv.create({engineOptions:{supportCompute:!0}}),E=r.onLayoutEnd,S=[],T=0;T<m;T++)S.push(0,0,0,0);return A=w.createKernel('{"shaders":{"WGSL":"import \\\\"GLSL.std.450\\\\" as std;\\\\n\\\\n\\\\n# var gWebGPUDebug : bool = false;\\\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\\\n\\\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\\\n\\\\ntype GWebGPUParams = [[block]] struct {\\\\n  [[offset 0]] u_K : f32;\\\\n  [[offset 4]] u_K2 : f32;\\\\n  [[offset 8]] u_Center : vec2<f32>;\\\\n  [[offset 16]] u_Gravity : f32;\\\\n  [[offset 20]] u_ClusterGravity : f32;\\\\n  [[offset 24]] u_Speed : f32;\\\\n  [[offset 28]] u_MaxDisplace : f32;\\\\n  [[offset 32]] u_Clustering : f32;\\\\n};\\\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\\\ntype GWebGPUBuffer0 = [[block]] struct {\\\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\\\ntype GWebGPUBuffer1 = [[block]] struct {\\\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\\\ntype GWebGPUBuffer2 = [[block]] struct {\\\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\\\nvar dy : f32 = 0.0;\\\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\\\nvar xDist : f32 = currentNode.x - nextNode.x;\\\\nvar yDist : f32 = currentNode.y - nextNode.y;\\\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\\\nif (dist > 0.0) {dx = dx + param * xDist;\\\\ndy = dy + param * yDist;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\\\ndx = dx + param * std::sign;\\\\ndy = dy + param * std::sign;}}}}\\\\nreturn vec2<f32>(dx, dy);}\\\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\\\nvar dy : f32 = 0.0;\\\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\\\ndx = gf * vx;\\\\ndy = gf * vy;\\\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\\\nvar cvx : f32 = currentNode.x - center.x;\\\\nvar cvy : f32 = currentNode.y - center.y;\\\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\\\ndx = dx + parma * cvx;\\\\ndy = dy + parma * cvy;}\\\\nreturn vec2<f32>(dx, dy);}\\\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\\\nvar dy : f32 = 0.0;\\\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\\\nvar node_buffer : vec4<f32>;\\\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\\\nvar arr_idx : i32 = arr_offset + i32(p);\\\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\\\nvar xDist : f32 = currentNode.x - nextNode.x;\\\\nvar yDist : f32 = currentNode.y - nextNode.y;\\\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\\\ndy = dy - yDist * attractiveF;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\\\ndx = dx - std::sign * attractiveF;\\\\ndy = dy - std::sign * attractiveF;}}}\\\\nreturn vec2<f32>(dx, dy);}\\\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\\\nvar dx : f32 = 0.0;\\\\nvar dy : f32 = 0.0;\\\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\\\nreturn ;}\\\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\\\ndx = dx + repulsive.x;\\\\ndy = dy + repulsive.y;\\\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\\\ndx = dx + attractive.x;\\\\ndy = dy + attractive.y;\\\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\\\ndx = dx - gravity.x;\\\\ndy = dy - gravity.y;\\\\ndx = dx * gWebGPUUniformParams.u_Speed;\\\\ndy = dy * gWebGPUUniformParams.u_Speed;\\\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\\\nreturn;}\\\\n\\\\nentry_point compute as \\\\"main\\\\" = main;\\\\n","GLSL450":"\\\\n\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\\\nivec3 workGroupSize = ivec3(1,1,1);\\\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\\\n\\\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\\\n  float u_K;\\\\n  float u_K2;\\\\n  vec2 u_Center;\\\\n  float u_Gravity;\\\\n  float u_ClusterGravity;\\\\n  float u_Speed;\\\\n  float u_MaxDisplace;\\\\n  float u_Clustering;\\\\n} gWebGPUUniformParams;\\\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\\\n  vec4 u_Data[];\\\\n} gWebGPUBuffer0;\\\\n\\\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\\\n  vec4 u_AttributeArray[];\\\\n} gWebGPUBuffer1;\\\\n\\\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\\\n  vec4 u_ClusterCenters[];\\\\n} gWebGPUBuffer2;\\\\n\\\\n\\\\n\\\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\nlayout (\\\\n  local_size_x = 1,\\\\n  local_size_y = 1,\\\\n  local_size_z = 1\\\\n) in;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\\\nfloat dy = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\\\nfloat xDist = currentNode.x - nextNode.x;\\\\nfloat yDist = currentNode.y - nextNode.y;\\\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\\\nif (dist > 0.0) {dx += param * xDist;\\\\ndy += param * yDist;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\\\ndx += param * sign;\\\\ndy += param * sign;}}}}\\\\nreturn vec2(dx, dy);}\\\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\\\nfloat dy = 0.0;\\\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\\\ndx = gf * vx;\\\\ndy = gf * vy;\\\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\\\nfloat cvx = currentNode.x - center.x;\\\\nfloat cvy = currentNode.y - center.y;\\\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\\\ndx += parma * cvx;\\\\ndy += parma * cvy;}\\\\nreturn vec2(dx, dy);}\\\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\\\nfloat dy = 0.0;\\\\nint arr_offset = int(floor(currentNode.z + 0.5));\\\\nint length = int(floor(currentNode.w + 0.5));\\\\nvec4 node_buffer;\\\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\\\nint arr_idx = arr_offset + int(p);\\\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\\\nfloat xDist = currentNode.x - nextNode.x;\\\\nfloat yDist = currentNode.y - nextNode.y;\\\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\\\ndy -= yDist * attractiveF;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\\\ndx -= sign * attractiveF;\\\\ndy -= sign * attractiveF;}}}\\\\nreturn vec2(dx, dy);}\\\\nvoid main() {int i = globalInvocationID.x;\\\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\\\nreturn ;}\\\\nvec2 repulsive = calcRepulsive(i, currentNode);\\\\ndx += repulsive.x;\\\\ndy += repulsive.y;\\\\nvec2 attractive = calcAttractive(i, currentNode);\\\\ndx += attractive.x;\\\\ndy += attractive.y;\\\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\\\ndx -= gravity.x;\\\\ndy -= gravity.y;\\\\ndx *= gWebGPUUniformParams.u_Speed;\\\\ndy *= gWebGPUUniformParams.u_Speed;\\\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\\\n","GLSL100":"\\\\n\\\\nfloat epsilon = 0.00001;\\\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\\\n  vec2 normAddr2D = float(address1D) * conv_const;\\\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\\\n}\\\\n\\\\nvoid barrier() {}\\\\n  \\\\n\\\\nuniform vec2 u_OutputTextureSize;\\\\nuniform int u_OutputTexelCount;\\\\nvarying vec2 v_TexCoord;\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n\\\\nuniform sampler2D u_Data;\\\\nuniform vec2 u_DataSize;\\\\nvec4 getDatau_Data(vec2 address2D) {\\\\n  return vec4(texture2D(u_Data, address2D).rgba);\\\\n}\\\\nvec4 getDatau_Data(float address1D) {\\\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\\\n}\\\\nvec4 getDatau_Data(int address1D) {\\\\n  return getDatau_Data(float(address1D));\\\\n}\\\\nuniform float u_K;\\\\nuniform float u_K2;\\\\nuniform vec2 u_Center;\\\\nuniform float u_Gravity;\\\\nuniform float u_ClusterGravity;\\\\nuniform float u_Speed;\\\\nuniform float u_MaxDisplace;\\\\nuniform float u_Clustering;\\\\nuniform sampler2D u_AttributeArray;\\\\nuniform vec2 u_AttributeArraySize;\\\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\\\n}\\\\nvec4 getDatau_AttributeArray(float address1D) {\\\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\\\n}\\\\nvec4 getDatau_AttributeArray(int address1D) {\\\\n  return getDatau_AttributeArray(float(address1D));\\\\n}\\\\nuniform sampler2D u_ClusterCenters;\\\\nuniform vec2 u_ClusterCentersSize;\\\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\\\n}\\\\nvec4 getDatau_ClusterCenters(float address1D) {\\\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\\\n}\\\\nvec4 getDatau_ClusterCenters(int address1D) {\\\\n  return getDatau_ClusterCenters(float(address1D));\\\\n}\\\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\\\nfloat xDist = currentNode.x - nextNode.x;\\\\nfloat yDist = currentNode.y - nextNode.y;\\\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nfloat param = u_K2 / dist;\\\\nif (dist > 0.0) {dx += param * xDist;\\\\ndy += param * yDist;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\\\ndx += param * sign;\\\\ndy += param * sign;}}}}\\\\nreturn vec2(dx, dy);}\\\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nfloat vx = currentNode.x - u_Center.x;\\\\nfloat vy = currentNode.y - u_Center.y;\\\\nfloat gf = (0.01 * u_K) * u_Gravity;\\\\ndx = gf * vx;\\\\ndy = gf * vy;\\\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\\\nfloat cvx = currentNode.x - center.x;\\\\nfloat cvy = currentNode.y - center.y;\\\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\\\ndx += parma * cvx;\\\\ndy += parma * cvy;}\\\\nreturn vec2(dx, dy);}\\\\nvec2 calcAttractive(int i, vec4 currentNode) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nint arr_offset = int(floor(currentNode.z + 0.5));\\\\nint length = int(floor(currentNode.w + 0.5));\\\\nvec4 node_buffer;\\\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\\\nint arr_idx = arr_offset + int(p);\\\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\\\nvec4 nextNode = getDatau_Data(int(float_j));\\\\nfloat xDist = currentNode.x - nextNode.x;\\\\nfloat yDist = currentNode.y - nextNode.y;\\\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\\\nfloat attractiveF = dist / u_K;\\\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\\\ndy -= yDist * attractiveF;\\\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\\\ndx -= sign * attractiveF;\\\\ndy -= sign * attractiveF;}}}\\\\nreturn vec2(dx, dy);}\\\\nvoid main() {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nint i = globalInvocationID.x;\\\\nvec4 currentNode = getDatau_Data(i);\\\\nfloat dx = 0.0;\\\\nfloat dy = 0.0;\\\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\\\nreturn ;}\\\\nvec2 repulsive = calcRepulsive(i, currentNode);\\\\ndx += repulsive.x;\\\\ndy += repulsive.y;\\\\nvec2 attractive = calcAttractive(i, currentNode);\\\\ndx += attractive.x;\\\\ndy += attractive.y;\\\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\\\ndx -= gravity.x;\\\\ndy -= gravity.y;\\\\ndx *= u_Speed;\\\\ndy *= u_Speed;\\\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\\\n  gl_FragColor = gWebGPUDebugOutput;\\\\n}}\\\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([y,1,1]).setBinding({u_Data:_,u_K:l,u_K2:f,u_Gravity:r.gravity,u_ClusterGravity:r.clusterGravity||r.gravity||1,u_Speed:h,u_MaxDisplace:c,u_Clustering:d?1:0,u_Center:u,u_AttributeArray:v,u_ClusterCenters:S,MAX_EDGE_PER_VERTEX:b,VERTEX_COUNT:y}),d&&(I=w.createKernel('{"shaders":{"WGSL":"import \\\\"GLSL.std.450\\\\" as std;\\\\n\\\\n\\\\n# var gWebGPUDebug : bool = false;\\\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\\\n\\\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\\\n\\\\n\\\\ntype GWebGPUBuffer0 = [[block]] struct {\\\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\\\ntype GWebGPUBuffer1 = [[block]] struct {\\\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\\\ntype GWebGPUBuffer2 = [[block]] struct {\\\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\\\nvar sumx : f32 = 0.0;\\\\nvar sumy : f32 = 0.0;\\\\nvar count : f32 = 0.0;\\\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\\\nvar clusterIdx : i32 = i32(attributes.x);\\\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\\\nsumy = sumy + vertex.y;\\\\ncount = count + 1.0;}}\\\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\\\nreturn;}\\\\n\\\\nentry_point compute as \\\\"main\\\\" = main;\\\\n","GLSL450":"\\\\n\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\\\nivec3 workGroupSize = ivec3(1,1,1);\\\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\\\n\\\\n\\\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\\\n  vec4 u_Data[];\\\\n} gWebGPUBuffer0;\\\\n\\\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\\\n  vec4 u_NodeAttributes[];\\\\n} gWebGPUBuffer1;\\\\n\\\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\\\n  vec4 u_ClusterCenters[];\\\\n} gWebGPUBuffer2;\\\\n\\\\n\\\\n\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\\\nlayout (\\\\n  local_size_x = 1,\\\\n  local_size_y = 1,\\\\n  local_size_z = 1\\\\n) in;\\\\n\\\\n\\\\n\\\\nvoid main() {int i = globalInvocationID.x;\\\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\\\nfloat sumx = 0.0;\\\\nfloat sumy = 0.0;\\\\nfloat count = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\\\nint clusterIdx = int(attributes.x);\\\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\\\nif (clusterIdx == i) {sumx += vertex.x;\\\\nsumy += vertex.y;\\\\ncount += 1.0;}}\\\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\\\n","GLSL100":"\\\\n\\\\nfloat epsilon = 0.00001;\\\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\\\n  vec2 normAddr2D = float(address1D) * conv_const;\\\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\\\n}\\\\n\\\\nvoid barrier() {}\\\\n  \\\\n\\\\nuniform vec2 u_OutputTextureSize;\\\\nuniform int u_OutputTexelCount;\\\\nvarying vec2 v_TexCoord;\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\\\n\\\\nuniform sampler2D u_Data;\\\\nuniform vec2 u_DataSize;\\\\nvec4 getDatau_Data(vec2 address2D) {\\\\n  return vec4(texture2D(u_Data, address2D).rgba);\\\\n}\\\\nvec4 getDatau_Data(float address1D) {\\\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\\\n}\\\\nvec4 getDatau_Data(int address1D) {\\\\n  return getDatau_Data(float(address1D));\\\\n}\\\\nuniform sampler2D u_NodeAttributes;\\\\nuniform vec2 u_NodeAttributesSize;\\\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\\\n}\\\\nvec4 getDatau_NodeAttributes(float address1D) {\\\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\\\n}\\\\nvec4 getDatau_NodeAttributes(int address1D) {\\\\n  return getDatau_NodeAttributes(float(address1D));\\\\n}\\\\nuniform sampler2D u_ClusterCenters;\\\\nuniform vec2 u_ClusterCentersSize;\\\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\\\n}\\\\nvec4 getDatau_ClusterCenters(float address1D) {\\\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\\\n}\\\\nvec4 getDatau_ClusterCenters(int address1D) {\\\\n  return getDatau_ClusterCenters(float(address1D));\\\\n}\\\\nvoid main() {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nint i = globalInvocationID.x;\\\\nvec4 center = getDatau_ClusterCenters(i);\\\\nfloat sumx = 0.0;\\\\nfloat sumy = 0.0;\\\\nfloat count = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\\\nint clusterIdx = int(attributes.x);\\\\nvec4 vertex = getDatau_Data(j);\\\\nif (clusterIdx == i) {sumx += vertex.x;\\\\nsumy += vertex.y;\\\\ncount += 1.0;}}\\\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\\\n  gl_FragColor = gWebGPUDebugOutput;\\\\n}}\\\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([m,1,1]).setBinding({u_Data:_,u_NodeAttributes:v,u_ClusterCenters:S,VERTEX_COUNT:y,CLUSTER_COUNT:m})),k=function(){return Ev(O,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=0;case 1:if(!(r<a)){n.next=13;break}return n.next=4,A.execute();case 4:if(!d){n.next=9;break}return I.setBinding({u_Data:A}),n.next=8,I.execute();case 8:A.setBinding({u_ClusterCenters:I});case 9:A.setBinding({u_MaxDisplace:c*=.99});case 10:r++,n.next=1;break;case 13:return n.next=15,A.getOutput();case 15:i=n.sent,t?e.postMessage({type:Qt,vertexEdgeData:i}):o.forEach((function(t,e){var n=i[4*e],r=i[4*e+1];t.x=n,t.y=r})),E&&E();case 18:case"end":return n.stop()}}),n)})))},n.next=24,k();case 24:case"end":return n.stop()}}),n,this)})))}},{key:"getType",value:function(){return"fruchterman-gpu"}}])&&gv(e.prototype,n),r&&gv(e,r),i}(I);function Tv(t){return(Tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Av(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Iv(t,e){return(Iv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Dv(t);if(e){var o=Dv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ov(this,n)}}function Ov(t,e){return!e||"object"!==Tv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dv(t){return(Dv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Rv=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},Mv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Iv(t,e)}(i,t);var e,n,r,o=kv(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).maxIteration=1e3,e.edgeStrength=200,e.nodeStrength=1e3,e.coulombDisScale=.005,e.damping=.9,e.maxSpeed=1e3,e.minMovement=1,e.interval=.02,e.factor=1,e.linkDistance=1,e.gravity=10,e.workerEnabled=!1,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return Rv(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,r,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=(e=this).nodes)&&0!==n.length){t.next=5;break}return e.onLayoutEnd&&e.onLayoutEnd(),t.abrupt("return");case 5:if(e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]),r=e.center,1!==n.length){t.next=14;break}return n[0].x=r[0],n[0].y=r[1],e.onLayoutEnd&&e.onLayoutEnd(),t.abrupt("return");case 14:return o={},i={},n.forEach((function(t,n){y(t.x)||(t.x=Math.random()*e.width),y(t.y)||(t.y=Math.random()*e.height),o[t.id]=t,i[t.id]=n})),e.nodeMap=o,e.nodeIdxMap=i,e.nodeStrength=hv(e.nodeStrength,1),e.edgeStrength=hv(e.edgeStrength,1),t.next=23,e.run();case 23:case"end":return t.stop()}}),t,this)})))}},{key:"executeWithWorker",value:function(t,e){var n=this,r=n.nodes,o=n.center;if(r&&0!==r.length){if(1===r.length)return r[0].x=o[0],void(r[0].y=o[1]);var i={},a={};r.forEach((function(t,e){y(t.x)||(t.x=Math.random()*n.width),y(t.y)||(t.y=Math.random()*n.height),i[t.id]=t,a[t.id]=e})),n.nodeMap=i,n.nodeIdxMap=a,n.nodeStrength=hv(n.nodeStrength,1),n.edgeStrength=hv(n.edgeStrength,1),n.run(t,e)}}},{key:"run",value:function(t,e){return Rv(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,i,a,u,s,c,f,l,h,d,p,v,m,g,_,x,w,E,S,T,A,I,k,O,D=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(o=(r=this).nodes,i=r.edges,a=r.maxIteration,r.width||"undefined"==typeof window||(r.width=window.innerWidth),r.height||"undefined"==typeof window||(r.height=window.innerHeight),u=o.length,r.linkDistance=hv(r.linkDistance),r.edgeStrength=hv(r.edgeStrength),s=pv(o,i,r.linkDistance,r.edgeStrength),c=s.maxEdgePerVetex,f=s.array,r.degrees=b(o.length,r.nodeIdxMap,i),l=[],h=[],d=[],p=[],v=[],r.getMass||(r.getMass=function(t){return r.degrees[r.nodeIdxMap[t.id]]||1}),m=r.gravity,g=r.center,o.forEach((function(t,e){l.push(r.getMass(t)),h.push(r.nodeStrength(t)),r.degrees[e]||(r.degrees[e]=0);var n=[g[0],g[1],m];if(r.getCenter){var o=r.getCenter(t,r.degrees[e]);o&&y(o[0])&&y(o[1])&&y(o[2])&&(n=o)}d.push(n[0]),p.push(n[1]),v.push(n[2])})),_=mv([l,r.degrees,h]),x=mv([d,p,v]),w=r.workerEnabled,E=w?lv.create({canvas:t,engineOptions:{supportCompute:!0}}):lv.create({engineOptions:{supportCompute:!0}}),S=r.onLayoutEnd,T=[],f.forEach((function(t){T.push(t)})),A=0;A<4;A++)T.push(0);return I=E.createKernel('{"shaders":{"WGSL":"import \\\\"GLSL.std.450\\\\" as std;\\\\n\\\\n\\\\n# var gWebGPUDebug : bool = false;\\\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\\\n\\\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\\\n\\\\ntype GWebGPUParams = [[block]] struct {\\\\n  [[offset 0]] u_damping : f32;\\\\n  [[offset 4]] u_maxSpeed : f32;\\\\n  [[offset 8]] u_minMovement : f32;\\\\n  \\\\n  [[offset 12]] u_coulombDisScale : f32;\\\\n  [[offset 16]] u_factor : f32;\\\\n  \\\\n  \\\\n  [[offset 20]] u_interval : f32;\\\\n};\\\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\\\ntype GWebGPUBuffer0 = [[block]] struct {\\\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\\\ntype GWebGPUBuffer1 = [[block]] struct {\\\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\\\ntype GWebGPUBuffer2 = [[block]] struct {\\\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\\\ntype GWebGPUBuffer3 = [[block]] struct {\\\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\\\nvar v0 : i32 = packedIntValue / 1048576;\\\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\\\nvar ay : f32 = 0.0;\\\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\\\nvar vx : f32 = currentNode.x - nextNode.x;\\\\nvar vy : f32 = currentNode.y - nextNode.y;\\\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nvar n_dist : f32 = dist * gWebGPUUniformParams.u_coulombDisScale;\\\\nvar direx : f32 = vx / dist;\\\\nvar direy : f32 = vy / dist;\\\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\\\nvar massi : f32 = attributesi.x;\\\\nvar nodeStrengthi : f32 = attributesi.z;\\\\nvar nodeStrengthj : f32 = attributesj.z;\\\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\\\nvar param : f32 = (1000.0 * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\\\nax = ax + direx * param;\\\\nay = ay + direy * param;}}\\\\nreturn vec2<f32>(ax, ay);}\\\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\\\nvar vy : f32 = currentNode.y - attributes2.y;\\\\nvar ax : f32 = vx * attributes2.w;\\\\nvar ay : f32 = vy * attributes2.w;\\\\nreturn vec2<f32>(ax, ay);}\\\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\\\nvar ax : f32 = 0.0;\\\\nvar ay : f32 = 0.0;\\\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\\\nvar length : i32 = compressed.x;\\\\nvar arr_offset : i32 = compressed.y;\\\\nvar node_buffer : vec4<f32>;\\\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\\\nvar arr_idx : i32 = arr_offset + (4 * p);\\\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\\\nvar float_j : f32 = node_buffer.x;\\\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\\\nvar vx : f32 = nextNode.x - currentNode.x;\\\\nvar vy : f32 = nextNode.y - currentNode.y;\\\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nvar direx : f32 = vx / dist;\\\\nvar direy : f32 = vy / dist;\\\\nvar edgeLength : f32 = node_buffer.y;\\\\nvar edgeStrength : f32 = node_buffer.z;\\\\nvar diff : f32 = edgeLength - dist;\\\\nvar param : f32 = (diff * edgeStrength) / mass;\\\\nax = ax - direx * param;\\\\nay = ay - direy * param;}\\\\nreturn vec2<f32>(ax, ay);}\\\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\\\nvar ax : f32 = 0.0;\\\\nvar ay : f32 = 0.0;\\\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\\\nreturn ;}\\\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\\\nax = ax + repulsive.x;\\\\nay = ay + repulsive.y;\\\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\\\nax = ax + attractive.x;\\\\nay = ay + attractive.y;\\\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\\\nax = ax - gravity.x;\\\\nay = ay - gravity.y;\\\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\\\nvar vx : f32 = ax * param;\\\\nvar vy : f32 = ay * param;\\\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\\\nvx = param2 * vx;\\\\nvy = param2 * vy;}\\\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);\\\\nreturn;}\\\\n\\\\nentry_point compute as \\\\"main\\\\" = main;\\\\n","GLSL450":"\\\\n\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\\\nivec3 workGroupSize = ivec3(1,1,1);\\\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\\\n\\\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\\\n  float u_damping;\\\\n  float u_maxSpeed;\\\\n  float u_minMovement;\\\\n  \\\\n  float u_coulombDisScale;\\\\n  float u_factor;\\\\n  \\\\n  \\\\n  float u_interval;\\\\n} gWebGPUUniformParams;\\\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\\\n  vec4 u_Data[];\\\\n} gWebGPUBuffer0;\\\\n\\\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\\\n  vec4 u_AveMovement[];\\\\n} gWebGPUBuffer1;\\\\n\\\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\\\n  vec4 u_NodeAttributeArray1[];\\\\n} gWebGPUBuffer2;\\\\n\\\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\\\n  vec4 u_NodeAttributeArray2[];\\\\n} gWebGPUBuffer3;\\\\n\\\\n\\\\n\\\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n#define SHIFT_20 1048576.0\\\\nlayout (\\\\n  local_size_x = 1,\\\\n  local_size_y = 1,\\\\n  local_size_z = 1\\\\n) in;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\\\nint v0 = packedIntValue / int(SHIFT_20);\\\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\\\nfloat ay = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\\\nfloat vx = currentNode.x - nextNode.x;\\\\nfloat vy = currentNode.y - nextNode.y;\\\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nfloat n_dist = dist * gWebGPUUniformParams.u_coulombDisScale;\\\\nfloat direx = vx / dist;\\\\nfloat direy = vy / dist;\\\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\\\nfloat massi = attributesi.x;\\\\nfloat nodeStrengthi = attributesi.z;\\\\nfloat nodeStrengthj = attributesj.z;\\\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\\\nfloat param = (1000.0 * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\\\nax += direx * param;\\\\nay += direy * param;}}\\\\nreturn vec2(ax, ay);}\\\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\\\nfloat vy = currentNode.y - attributes2.y;\\\\nfloat ax = vx * attributes2.w;\\\\nfloat ay = vy * attributes2.w;\\\\nreturn vec2(ax, ay);}\\\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nivec2 compressed = unpack_float(currentNode.z);\\\\nint length = compressed.x;\\\\nint arr_offset = compressed.y;\\\\nvec4 node_buffer;\\\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\\\nint arr_idx = arr_offset + (4 * p);\\\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\\\nfloat float_j = node_buffer.x;\\\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\\\nfloat vx = nextNode.x - currentNode.x;\\\\nfloat vy = nextNode.y - currentNode.y;\\\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nfloat direx = vx / dist;\\\\nfloat direy = vy / dist;\\\\nfloat edgeLength = node_buffer.y;\\\\nfloat edgeStrength = node_buffer.z;\\\\nfloat diff = edgeLength - dist;\\\\nfloat param = (diff * edgeStrength) / mass;\\\\nax -= direx * param;\\\\nay -= direy * param;}\\\\nreturn vec2(ax, ay);}\\\\nvoid main() {int i = globalInvocationID.x;\\\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\\\nreturn ;}\\\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\\\nvec2 repulsive = calcRepulsive(i, currentNode);\\\\nax += repulsive.x;\\\\nay += repulsive.y;\\\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\\\nax += attractive.x;\\\\nay += attractive.y;\\\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\\\nax -= gravity.x;\\\\nay -= gravity.y;\\\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\\\nfloat vx = ax * param;\\\\nfloat vy = ay * param;\\\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\\\nvx = param2 * vx;\\\\nvy = param2 * vy;}\\\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\\\n","GLSL100":"\\\\n\\\\nfloat epsilon = 0.00001;\\\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\\\n  vec2 normAddr2D = float(address1D) * conv_const;\\\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\\\n}\\\\n\\\\nvoid barrier() {}\\\\n  \\\\n\\\\nuniform vec2 u_OutputTextureSize;\\\\nuniform int u_OutputTexelCount;\\\\nvarying vec2 v_TexCoord;\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n#define SHIFT_20 1048576.0\\\\n\\\\nuniform sampler2D u_Data;\\\\nuniform vec2 u_DataSize;\\\\nvec4 getDatau_Data(vec2 address2D) {\\\\n  return vec4(texture2D(u_Data, address2D).rgba);\\\\n}\\\\nvec4 getDatau_Data(float address1D) {\\\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\\\n}\\\\nvec4 getDatau_Data(int address1D) {\\\\n  return getDatau_Data(float(address1D));\\\\n}\\\\nuniform float u_damping;\\\\nuniform float u_maxSpeed;\\\\nuniform float u_minMovement;\\\\nuniform sampler2D u_AveMovement;\\\\nuniform vec2 u_AveMovementSize;\\\\nvec4 getDatau_AveMovement(vec2 address2D) {\\\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\\\n}\\\\nvec4 getDatau_AveMovement(float address1D) {\\\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\\\n}\\\\nvec4 getDatau_AveMovement(int address1D) {\\\\n  return getDatau_AveMovement(float(address1D));\\\\n}\\\\nuniform float u_coulombDisScale;\\\\nuniform float u_factor;\\\\nuniform sampler2D u_NodeAttributeArray1;\\\\nuniform vec2 u_NodeAttributeArray1Size;\\\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\\\n}\\\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\\\n}\\\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\\\n  return getDatau_NodeAttributeArray1(float(address1D));\\\\n}\\\\nuniform sampler2D u_NodeAttributeArray2;\\\\nuniform vec2 u_NodeAttributeArray2Size;\\\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\\\n}\\\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\\\n}\\\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\\\n  return getDatau_NodeAttributeArray2(float(address1D));\\\\n}\\\\nuniform float u_interval;\\\\nivec2 unpack_float(float packedValue) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nint packedIntValue = int(packedValue);\\\\nint v0 = packedIntValue / int(SHIFT_20);\\\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\\\nfloat vx = currentNode.x - nextNode.x;\\\\nfloat vy = currentNode.y - nextNode.y;\\\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nfloat n_dist = dist * u_coulombDisScale;\\\\nfloat direx = vx / dist;\\\\nfloat direy = vy / dist;\\\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\\\nfloat massi = attributesi.x;\\\\nfloat nodeStrengthi = attributesi.z;\\\\nfloat nodeStrengthj = attributesj.z;\\\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\\\nfloat param = (1000.0 * u_factor) / (n_dist * n_dist);\\\\nax += direx * param;\\\\nay += direy * param;}}\\\\nreturn vec2(ax, ay);}\\\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat vx = currentNode.x - attributes2.x;\\\\nfloat vy = currentNode.y - attributes2.y;\\\\nfloat ax = vx * attributes2.w;\\\\nfloat ay = vy * attributes2.w;\\\\nreturn vec2(ax, ay);}\\\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat mass = attributes1.x;\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nivec2 compressed = unpack_float(currentNode.z);\\\\nint length = compressed.x;\\\\nint arr_offset = compressed.y;\\\\nvec4 node_buffer;\\\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\\\nint arr_idx = arr_offset + (4 * p);\\\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\\\nfloat float_j = node_buffer.x;\\\\nvec4 nextNode = getDatau_Data(int(float_j));\\\\nfloat vx = nextNode.x - currentNode.x;\\\\nfloat vy = nextNode.y - currentNode.y;\\\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\\\nfloat direx = vx / dist;\\\\nfloat direy = vy / dist;\\\\nfloat edgeLength = node_buffer.y;\\\\nfloat edgeStrength = node_buffer.z;\\\\nfloat diff = edgeLength - dist;\\\\nfloat param = (diff * edgeStrength) / mass;\\\\nax -= direx * param;\\\\nay -= direy * param;}\\\\nreturn vec2(ax, ay);}\\\\nvoid main() {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nint i = globalInvocationID.x;\\\\nvec4 currentNode = getDatau_Data(i);\\\\nvec4 movement = getDatau_AveMovement(0.0);\\\\nfloat ax = 0.0;\\\\nfloat ay = 0.0;\\\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\\\nreturn ;}\\\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\\\nvec2 repulsive = calcRepulsive(i, currentNode);\\\\nax += repulsive.x;\\\\nay += repulsive.y;\\\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\\\nax += attractive.x;\\\\nay += attractive.y;\\\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\\\nax -= gravity.x;\\\\nay -= gravity.y;\\\\nfloat param = u_interval * u_damping;\\\\nfloat vx = ax * param;\\\\nfloat vy = ay * param;\\\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\\\nvx = param2 * vx;\\\\nvy = param2 * vy;}\\\\nfloat distx = vx * u_interval;\\\\nfloat disty = vy * u_interval;\\\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));if (gWebGPUDebug) {\\\\n  gl_FragColor = gWebGPUDebugOutput;\\\\n}}\\\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([u,1,1]).setBinding({u_Data:f,u_damping:r.damping,u_maxSpeed:r.maxSpeed,u_minMovement:r.minMovement,u_coulombDisScale:r.coulombDisScale,u_factor:r.factor,u_NodeAttributeArray1:_,u_NodeAttributeArray2:x,MAX_EDGE_PER_VERTEX:c,VERTEX_COUNT:u,u_AveMovement:T,u_interval:r.interval}),k=E.createKernel('{"shaders":{"WGSL":"import \\\\"GLSL.std.450\\\\" as std;\\\\n\\\\n\\\\n# var gWebGPUDebug : bool = false;\\\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\\\n\\\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\\\n\\\\ntype GWebGPUParams = [[block]] struct {\\\\n  [[offset 0]] u_iter : f32;\\\\n};\\\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\\\ntype GWebGPUBuffer0 = [[block]] struct {\\\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\\\ntype GWebGPUBuffer1 = [[block]] struct {\\\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\\\n};\\\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\n\\\\nfn main() -> void {var movement : f32 = 0.0;\\\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\\\nmovement = movement + vertex.w;}\\\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\\\nreturn;}\\\\n\\\\nentry_point compute as \\\\"main\\\\" = main;\\\\n","GLSL450":"\\\\n\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\\\nivec3 workGroupSize = ivec3(1,1,1);\\\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\\\n\\\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\\\n  float u_iter;\\\\n} gWebGPUUniformParams;\\\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\\\n  vec4 u_Data[];\\\\n} gWebGPUBuffer0;\\\\n\\\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\\\n  vec4 u_AveMovement[];\\\\n} gWebGPUBuffer1;\\\\n\\\\n\\\\n\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\nlayout (\\\\n  local_size_x = 1,\\\\n  local_size_y = 1,\\\\n  local_size_z = 1\\\\n) in;\\\\n\\\\n\\\\n\\\\nvoid main() {float movement = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\\\nmovement += vertex.w;}\\\\nmovement = movement / float(VERTEX_COUNT);\\\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\\\n","GLSL100":"\\\\n\\\\nfloat epsilon = 0.00001;\\\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\\\n  vec2 normAddr2D = float(address1D) * conv_const;\\\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\\\n}\\\\n\\\\nvoid barrier() {}\\\\n  \\\\n\\\\nuniform vec2 u_OutputTextureSize;\\\\nuniform int u_OutputTexelCount;\\\\nvarying vec2 v_TexCoord;\\\\n\\\\nbool gWebGPUDebug = false;\\\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\\\n\\\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\\\n\\\\nuniform sampler2D u_Data;\\\\nuniform vec2 u_DataSize;\\\\nvec4 getDatau_Data(vec2 address2D) {\\\\n  return vec4(texture2D(u_Data, address2D).rgba);\\\\n}\\\\nvec4 getDatau_Data(float address1D) {\\\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\\\n}\\\\nvec4 getDatau_Data(int address1D) {\\\\n  return getDatau_Data(float(address1D));\\\\n}\\\\nuniform float u_iter;\\\\nuniform sampler2D u_AveMovement;\\\\nuniform vec2 u_AveMovementSize;\\\\nvec4 getDatau_AveMovement(vec2 address2D) {\\\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\\\n}\\\\nvec4 getDatau_AveMovement(float address1D) {\\\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\\\n}\\\\nvec4 getDatau_AveMovement(int address1D) {\\\\n  return getDatau_AveMovement(float(address1D));\\\\n}\\\\nvoid main() {\\\\nivec3 workGroupSize = ivec3(1, 1, 1);\\\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\\\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\\\nfloat movement = 0.0;\\\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\\\nmovement += vertex.w;}\\\\nmovement = movement / float(VERTEX_COUNT);\\\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\\\n  gl_FragColor = gWebGPUDebugOutput;\\\\n}}\\\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([1,1,1]).setBinding({u_Data:f,VERTEX_COUNT:u,u_AveMovement:[0,0,0,0]}),O=function(){return Rv(D,void 0,void 0,regeneratorRuntime.mark((function n(){var i,u,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=0;case 1:if(!(i<a)){n.next=12;break}return n.next=4,I.execute();case 4:return k.setBinding({u_Data:I}),n.next=7,k.execute();case 7:u=Math.max(.02,r.interval-.002*i),I.setBinding({u_interval:u,u_AveMovement:k});case 9:i++,n.next=1;break;case 12:return n.next=14,I.getOutput();case 14:s=n.sent,t?e.postMessage({type:Qt,vertexEdgeData:s}):o.forEach((function(t,e){var n=s[4*e],r=s[4*e+1];t.x=n,t.y=r})),S&&S();case 17:case"end":return n.stop()}}),n)})))},n.next=33,O();case 33:case"end":return n.stop()}}),n,this)})))}},{key:"getType",value:function(){return"gForce-gpu"}}])&&Av(e.prototype,n),r&&Av(e,r),i}(I);function Cv(t){return(Cv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pv(t,e){return(Pv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Lv(t);if(e){var o=Lv(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return jv(this,n)}}function jv(t,e){return!e||"object"!==Cv(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Lv(t){return(Lv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Uv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pv(t,e)}(i,t);var e,n,r,o=Gv(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).center=[0,0],e.maxIteration=100,e.gravity=10,e.comboGravity=10,e.linkDistance=10,e.alpha=1,e.alphaMin=.001,e.alphaDecay=1-Math.pow(e.alphaMin,1/300),e.alphaTarget=0,e.velocityDecay=.6,e.edgeStrength=.6,e.nodeStrength=30,e.preventOverlap=!1,e.preventNodeOverlap=!1,e.preventComboOverlap=!1,e.collideStrength=void 0,e.nodeCollideStrength=.5,e.comboCollideStrength=.5,e.comboSpacing=20,e.comboPadding=10,e.optimizeRangeFactor=1,e.onTick=function(){},e.onLayoutEnd=function(){},e.depthAttractiveForceScale=1,e.depthRepulsiveForceScale=2,e.nodes=[],e.edges=[],e.combos=[],e.comboTrees=[],e.width=300,e.height=300,e.bias=[],e.nodeMap={},e.oriComboMap={},e.indexMap={},e.comboMap={},e.previousLayouted=!1,e.updateCfg(t),e}return e=i,(n=[{key:"getDefaultCfg",value:function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}},{key:"execute",value:function(){var t=this.nodes,e=this.center;if(this.comboTree={id:"comboTreeRoot",depth:-1,children:this.comboTrees},t&&0!==t.length){if(1===t.length)return t[0].x=e[0],t[0].y=e[1],void(this.onLayoutEnd&&this.onLayoutEnd());this.initVals(),this.run(),this.onLayoutEnd&&this.onLayoutEnd()}else this.onLayoutEnd&&this.onLayoutEnd()}},{key:"run",value:function(){var t=this,e=t.nodes,n=t.previousLayouted?t.maxIteration/5:t.maxIteration;t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);var r=t.center,o=t.velocityDecay,i=t.comboMap;t.previousLayouted||t.initPos(i);for(var a=function(n){var r=[];e.forEach((function(t,e){r[e]={x:0,y:0}})),t.applyCalculate(r),t.applyComboCenterForce(r),e.forEach((function(t,e){y(t.x)&&y(t.y)&&(t.x+=r[e].x*o,t.y+=r[e].y*o)})),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()},u=0;u<n;u++)a();var s=[0,0];e.forEach((function(t){y(t.x)&&y(t.y)&&(s[0]+=t.x,s[1]+=t.y)})),s[0]/=e.length,s[1]/=e.length;var c=[r[0]-s[0],r[1]-s[1]];e.forEach((function(t,e){y(t.x)&&y(t.y)&&(t.x+=c[0],t.y+=c[1])})),t.combos.forEach((function(t){var e=i[t.id];e&&e.empty&&(t.x=e.cx||t.x,t.y=e.cy||t.y)})),t.previousLayouted=!0}},{key:"initVals",value:function(){var t=this.edges,e=this.nodes,n=this.combos,r={},o={},i={};e.forEach((function(t,e){o[t.id]=t,i[t.id]=e})),this.nodeMap=o,this.indexMap=i;var a={};n.forEach((function(t){a[t.id]=t})),this.oriComboMap=a,this.comboMap=this.getComboMap();var u=this.preventOverlap;this.preventComboOverlap=this.preventComboOverlap||u,this.preventNodeOverlap=this.preventNodeOverlap||u;var s=this.collideStrength;s&&(this.comboCollideStrength=s,this.nodeCollideStrength=s),this.comboCollideStrength=this.comboCollideStrength?this.comboCollideStrength:0,this.nodeCollideStrength=this.nodeCollideStrength?this.nodeCollideStrength:0;for(var c=0;c<t.length;++c)r[t[c].source]?r[t[c].source]++:r[t[c].source]=1,r[t[c].target]?r[t[c].target]++:r[t[c].target]=1;for(var f=[],l=0;l<t.length;++l)f[l]=r[t[l].source]/(r[t[l].source]+r[t[l].target]);this.bias=f;var h,d,p=this.nodeSize,v=this.nodeSpacing;if(d=y(v)?function(){return v}:T(v)?v:function(){return 0},this.nodeSpacing=d,p)if(T(p))h=function(t){return p(t)};else if(m(p)){var g=(p[0]>p[1]?p[0]:p[1])/2;h=function(t){return g}}else{var b=p/2;h=function(t){return b}}else h=function(t){return t.size?m(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2:t.size/2:10};this.nodeSize=h;var _,x=this.comboSpacing;_=y(x)?function(){return x}:T(x)?x:function(){return 0},this.comboSpacing=_;var w,E=this.comboPadding;w=y(E)?function(){return E}:m(E)?function(){return Math.max.apply(null,E)}:T(E)?E:function(){return 0},this.comboPadding=w;var S,A=this.linkDistance;A||(A=10),S=y(A)?function(t){return A}:A,this.linkDistance=S;var I,k=this.edgeStrength;k||(k=1),I=y(k)?function(t){return k}:k,this.edgeStrength=I;var O,D=this.nodeStrength;D||(D=30),O=y(D)?function(t){return D}:D,this.nodeStrength=O}},{key:"initPos",value:function(t){this.nodes.forEach((function(e,n){var r=e.comboId,o=t[r];r&&o?(e.x=o.cx+100/(n+1),e.y=o.cy+100/(n+1)):(e.x=100/(n+1),e.y=100/(n+1))}))}},{key:"getComboMap",value:function(){var t=this,e=t.nodeMap,n=t.indexMap,r=t.comboTrees,o=t.oriComboMap,i={};return(r||[]).forEach((function(r){var a=[];w(r,(function(r){if("node"===r.itemType)return!0;if(!o[r.id])return!0;if(void 0===i[r.id]){var u={id:r.id,name:r.id,cx:0,cy:0,count:0,depth:t.oriComboMap[r.id].depth,children:[]};i[r.id]=u}var s=r.children;s&&s.forEach((function(t){if(!i[t.id]&&!e[t.id])return!0;a.push(t)}));var c=i[r.id];if(c.cx=0,c.cy=0,0===a.length){c.empty=!0;var f=o[r.id],l=Object.keys(e).length,h="".concat(r.id,"-visual-child-").concat(l),d={id:h,x:f.x,y:f.y,depth:c.depth+1,itemType:"node"};t.nodes.push(d),e[h]=d,n[h]=l,c.cx=f.x,c.cy=f.y,a.push(d)}return a.forEach((function(t){if(c.count++,"node"!==t.itemType){var n=i[t.id];return y(n.cx)&&(c.cx+=n.cx),void(y(n.cy)&&(c.cy+=n.cy))}var r=e[t.id];r&&(y(r.x)&&(c.cx+=r.x),y(r.y)&&(c.cy+=r.y))})),c.cx/=c.count,c.cy/=c.count,c.children=a,!0}))})),i}},{key:"applyComboCenterForce",value:function(t){var e=this.gravity,n=this.comboGravity||e,r=this.alpha,o=this.comboTrees,i=this.indexMap,a=this.nodeMap,u=this.comboMap;(o||[]).forEach((function(e){w(e,(function(e){if("node"===e.itemType)return!0;if(!u[e.id])return!0;var o=u[e.id],s=(o.depth+1)/10*.5,c=o.cx,f=o.cy;return o.cx=0,o.cy=0,o.children.forEach((function(e){if("node"!==e.itemType){var l=u[e.id];return l&&y(l.cx)&&(o.cx+=l.cx),void(l&&y(l.cy)&&(o.cy+=l.cy))}var h=a[e.id],d=h.x-c||.005,p=h.y-f||.005,v=Math.sqrt(d*d+p*p),m=i[h.id],g=n*r/v*s;t[m].x-=d*g,t[m].y-=p*g,y(h.x)&&(o.cx+=h.x),y(h.y)&&(o.cy+=h.y)})),o.cx/=o.count,o.cy/=o.count,!0}))}))}},{key:"applyCalculate",value:function(t){var e=this.comboMap,n=this.nodes,r={};n.forEach((function(t,e){n.forEach((function(n,o){if(!(e<o)){var i=t.x-n.x||.005,a=t.y-n.y||.005,u=i*i+a*a,s=Math.sqrt(u);u<1&&(u=s),r["".concat(t.id,"-").concat(n.id)]={vx:i,vy:a,vl2:u,vl:s},r["".concat(n.id,"-").concat(t.id)]={vl2:u,vl:s,vx:-i,vy:-a}}}))})),this.updateComboSizes(e),this.calRepulsive(t,r),this.calAttractive(t,r),this.preventComboOverlap&&this.comboNonOverlapping(t,e)}},{key:"updateComboSizes",value:function(t){var e=this,n=e.comboTrees,r=e.nodeMap,o=e.nodeSize,i=e.comboSpacing,a=e.comboPadding;(n||[]).forEach((function(n){var u=[];w(n,(function(n){if("node"===n.itemType)return!0;var s=t[n.id];if(!s)return!1;var c=n.children;c&&c.forEach((function(e){(t[e.id]||r[e.id])&&u.push(e)})),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0,u.forEach((function(t){if("node"!==t.itemType)return!0;var e=r[t.id];if(!e)return!0;var n=o(e),i=e.x-n,a=e.y-n,u=e.x+n,c=e.y+n;s.minX>i&&(s.minX=i),s.minY>a&&(s.minY=a),s.maxX<u&&(s.maxX=u),s.maxY<c&&(s.maxY=c)}));var f=e.oriComboMap[n.id].size||10;m(f)&&(f=f[0]);var l=Math.max(s.maxX-s.minX,s.maxY-s.minY,f);return s.r=l/2+i(s)/2+a(s),!0}))}))}},{key:"comboNonOverlapping",value:function(t,e){var n=this.comboTree,r=this.comboCollideStrength,o=this.indexMap,i=this.nodeMap;w(n,(function(n){if(!e[n.id]&&!i[n.id]&&"comboTreeRoot"!==n.id)return!1;var a=n.children;return a&&a.length>1&&a.forEach((function(n,u){if("node"===n.itemType)return!1;var s=e[n.id];s&&a.forEach((function(a,c){if(u<=c)return!1;if("node"===a.itemType)return!1;var f=e[a.id];if(!f)return!1;var l=s.cx-f.cx||.005,h=s.cy-f.cy||.005,d=l*l+h*h,p=s.r,v=f.r,m=p+v,y=v*v,g=p*p;if(d<m*m){var b=n.children;if(!b||0===b.length)return!1;var _=a.children;if(!_||0===_.length)return!1;var x=Math.sqrt(d),w=(m-x)/x*r,E=l*w,S=h*w,T=y/(g+y),A=1-T;b.forEach((function(e){if("node"!==e.itemType)return!1;if(i[e.id]){var n=o[e.id];_.forEach((function(e){if("node"!==e.itemType)return!1;if(!i[e.id])return!1;var r=o[e.id];t[n].x+=E*T,t[n].y+=S*T,t[r].x-=E*A,t[r].y-=S*A}))}}))}}))})),!0}))}},{key:"calRepulsive",value:function(t,e){var n=this,r=n.nodes,o=n.width*n.optimizeRangeFactor,i=n.nodeStrength,a=n.alpha,u=n.nodeCollideStrength,s=n.preventNodeOverlap,c=n.nodeSize,f=n.nodeSpacing,l=n.depthRepulsiveForceScale,h=n.center;r.forEach((function(d,p){if(d.x&&d.y){if(h){var v=n.gravity,m=d.x-h[0]||.005,y=d.y-h[1]||.005,g=Math.sqrt(m*m+y*y);t[p].x-=m*v*a/g,t[p].y-=y*v*a/g}r.forEach((function(n,r){if(p!==r&&n.x&&n.y){var h=e["".concat(d.id,"-").concat(n.id)],v=h.vl2,m=h.vl;if(!(m>o)){var y=e["".concat(d.id,"-").concat(n.id)],g=y.vx,b=y.vy,_=Math.log(Math.abs(n.depth-d.depth)/10)+1||1;_=_<1?1:_,n.comboId!==d.comboId&&(_+=1);var x=_?Math.pow(l,_):1,w=i(n)*a/v*x;if(t[p].x+=g*w,t[p].y+=b*w,p<r&&s){var E=c(d)+f(d),S=c(n)+f(n),T=E+S;if(v<T*T){var A=(T-m)/m*u,I=S*S,k=I/(E*E+I),O=g*A,D=b*A;t[p].x+=O*k,t[p].y+=D*k,k=1-k,t[r].x-=O*k,t[r].y-=D*k}}}}}))}}))}},{key:"calAttractive",value:function(t,e){var n=this,r=n.edges,o=n.linkDistance,i=n.alpha,a=n.edgeStrength,u=n.bias,s=n.depthAttractiveForceScale;r.forEach((function(r,c){if(r.source&&r.target&&r.source!==r.target){var f=n.indexMap[r.source],l=n.indexMap[r.target],h=n.nodeMap[r.source],d=n.nodeMap[r.target];if(h&&d){var p=Math.log(Math.abs(h.depth-d.depth)/10);h.comboId===d.comboId&&(p/=2);var v=p?Math.pow(s,p):1;if(h.comboId!==d.comboId&&1===v?v=s/2:h.comboId===d.comboId&&(v=2),y(d.x)&&y(h.x)&&y(d.y)&&y(h.y)){var m=e["".concat(r.target,"-").concat(r.source)],g=m.vl,b=m.vx,_=m.vy,x=(g-o(r))/g*i*a(r)*v,w=b*x,E=_*x,S=u[c];t[l].x-=w*S,t[l].y-=E*S,t[f].x+=w*(1-S),t[f].y+=E*(1-S)}}}}))}},{key:"getType",value:function(){return"comboForce"}}])&&Nv(e.prototype,n),r&&Nv(e,r),i}(I);var Bv;new Proxy({},{get:function(t,e){return Jn(e)},set:function(t,e,n){return Qn(e,n),!0}});Bv||(Bv={}),Qn("grid",N),Qn("random",F),Qn("force",oe),Qn("circular",ve),Qn("dagre",Se),Qn("radial",Vn),Qn("concentric",ir),Qn("mds",hr),Qn("fruchterman",br),Qn("fruchterman-gpu",Sv),Qn("gForce",K),Qn("gForce-gpu",Mv),Qn("comboForce",Uv);var Fv=self;Fv.onmessage=function(t){(function(t){var e=t.data.type;return e===Ht||e===Zt})(t)&&function(t){switch(t.data.type){case Ht:var e=t.data,n=e.nodes,r=e.edges,o=e.layoutCfg,i=void 0===o?{}:o,a=i.type,u=Jn(a);if(!u){Fv.postMessage({type:Yt,message:"layout ".concat(a," not found")});break}var s=new u(i);s.init({nodes:n,edges:r}),s.execute(),Fv.postMessage({nodes:n,type:qt}),s.destroy();break;case Zt:var c=t.data,f=c.nodes,l=c.edges,h=c.layoutCfg,d=void 0===h?{}:h,p=c.canvas,v=d.type,m=Jn(v);if(!m){Fv.postMessage({type:Yt,message:"layout ".concat(v," not found")});break}if("gpu"!==v.split("-")[1]){Fv.postMessage({type:Yt,message:"layout ".concat(v," does not support GPU")});break}var y=new m(d);y.init({nodes:f,edges:l}),y.executeWithWorker(p,Fv)}}(t)};var zv=self;zv.onmessage=function(t){(function(t){var e=t.data.type;return e===f||e===d})(t)&&function(t){switch(t.data.type){case f:var e=t.data,n=e.nodes,r=e.edges,o=e.layoutCfg,i=(p=void 0===o?{}:o).type;if(!(a=Jn(i))){zv.postMessage({type:h,message:"layout "+i+" not found"});break}(u=new a(p)).init({nodes:n,edges:r}),u.execute(),zv.postMessage({type:l,nodes:n}),u.destroy();break;case d:var a,u,s=t.data,c=(n=s.nodes,r=s.edges,s.layoutCfg),p=void 0===c?{}:c,v=s.canvas;i=p.type;if(!(a=Jn(i))){zv.postMessage({type:h,message:"layout "+i+" not found"});break}if("gpu"!==i.split("-")[1]){zv.postMessage({type:h,message:"layout "+i+" does not support GPU"});break}(u=new a(p)).init({nodes:n,edges:r}),u.executeWithWorker(v,zv)}}(t)};e.default=null}]);
//# sourceMappingURL=g6Layout.worker.js.map`,"Worker",void 0,t.p+"g6Layout.worker.js")}var x="LAYOUT_RUN",j="LAYOUT_END",P="LAYOUT_ERROR",W="LAYOUT_TICK",X="GPU_LAYOUT_RUN",$="GPU_LAYOUT_END",ft=t(121),Z=function(mt){return setTimeout(mt,16)},lt=function(mt){return clearTimeout(mt)},pt=function(mt){return(typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||Z)(mt)},gt=function(mt){return(typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||lt)(mt)},ut=["fruchterman","gForce"],Bt=function(dt){function mt(bt){var wt=dt.call(this,bt)||this;return wt.graph=bt,wt.layoutCfg=bt.get("layout")||{},wt.layoutType=wt.layoutCfg.type,wt.worker=null,wt.workerData={},wt.initLayout(),wt}return Object(n.b)(mt,dt),mt.prototype.initLayout=function(){},mt.prototype.getWorker=function(){return this.worker||(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=new f),this.worker},mt.prototype.stopWorker=function(){var bt=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,bt.requestId&&(gt(bt.requestId),bt.requestId=null),bt.requestId2&&(gt(bt.requestId2),bt.requestId2=null))},mt.prototype.layout=function(bt){var wt=this,J=this.graph;this.data=this.setDataFromGraph();var ct=this.data.nodes;if(!ct)return!1;var it=J.get("width"),_=J.get("height"),R={};Object.assign(R,{width:it,height:_,center:[it/2,_/2]},this.layoutCfg),this.layoutCfg=R;var Q=!!this.layoutType,k=this.layoutMethod;k&&k.destroy(),J.emit("beforelayout"),this.initPositions(R.center,ct);var g=this.layoutType,O=!1;if(g&&g.split("-")[1]==="gpu"&&(g=g.split("-")[0],R.gpuEnabled=!0),g&&R.gpuEnabled){var F=!0;Object(ft.gpuDetector)().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),F=!1),this.hasGPUVersion(g)||(console.warn("The '"+g+"' layout does not support GPU calculation for now, it will run in CPU."),F=!1),F&&(g+="-gpu",O=!0)}if(this.isGPU=O,this.stopWorker(),R.workerEnabled&&this.layoutWithWorker(this.data,bt))return!0;var V=R.onLayoutEnd;if(R.layoutEndFormatted||(R.layoutEndFormatted=!0,R.onLayoutEnd=function(){V&&V(),J.emit("afterlayout"),wt.refreshLayout(),bt&&bt()}),g==="force"||g==="g6force"||g==="gForce"){var rt=R.onTick,ot=function(){rt&&rt(),J.refreshPositions()};R.tick=ot}else this.layoutType==="comboForce"&&(R.comboTrees=J.get("comboTrees"));if(g!==void 0){try{k=new C.a[g](R)}catch(Mt){return console.warn("The layout method: '"+g+"' does not exist! Please specify it first."),!1}if(k.enableTick){var st=R.onTick;ot=function(){st&&st(),J.refreshPositions()},k.tick=ot}k.init(this.data),Q&&(J.emit("beginlayout"),k.execute(),k.isCustomLayout&&R.onLayoutEnd&&R.onLayoutEnd()),this.layoutMethod=k}else R.onLayoutEnd&&R.onLayoutEnd();return!1},mt.prototype.layoutWithWorker=function(bt,wt){var J=this,ct=bt.nodes,it=bt.edges,_=this.layoutCfg,R=this.graph,Q=this.isGPU,k=this.getWorker(),g=this.workerData;if(!k)return!1;g.requestId=null,g.requestId2=null,g.currentTick=null,g.currentTickData=null,R.emit("beforelayout");var O=document.createElement("canvas"),F=Q&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in O,V=function(ot,st){var Mt={};return ot&&typeof ot=="object"?(Object.keys(ot).forEach(function(yt){ot.hasOwnProperty(yt)&&st(ot[yt])&&(Mt[yt]=ot[yt])}),Mt):ot}(_,function(ot){return typeof ot!="function"});if(F){var rt=O.transferControlToOffscreen();V.type=V.type+"-gpu",k.postMessage({type:X,nodes:ct,edges:it,layoutCfg:V,canvas:rt},[rt])}else k.postMessage({type:x,nodes:ct,edges:it,layoutCfg:V});return k.onmessage=function(ot){J.handleWorkerMessage(ot,bt,wt)},!0},mt.prototype.handleWorkerMessage=function(bt,wt,J){var ct=this.graph,it=this.workerData,_=this.layoutCfg,R=bt.data,Q=R.type,k=function(){_.onTick&&_.onTick()},g=function(){_.onLayoutEnd&&_.onLayoutEnd(),ct.emit("afterlayout")};switch(Q){case W:it.currentTick=R.currentTick,it.currentTickData=R,it.requestId||(it.requestId=pt(function(){Lt(wt,R),ct.refreshPositions(),k(),R.currentTick===1&&J&&J(),R.currentTick===R.totalTicks?g():it.currentTick===R.totalTicks&&(it.requestId2=pt(function(){Lt(wt,it.currentTickData),ct.refreshPositions(),it.requestId2=null,k(),g()})),it.requestId=null}));break;case j:it.currentTick==null&&(Lt(wt,R),this.refreshLayout(),J&&J(),ct.emit("afterlayout"));break;case $:it.currentTick==null&&(function(O,F){for(var V=O.nodes,rt=F.vertexEdgeData,ot=V.length,st=0;st<ot;st++){var Mt=V[st],yt=rt[4*st],xt=rt[4*st+1];Mt.x=yt,Mt.y=xt}}(wt,R),this.refreshLayout(),J&&J(),ct.emit("afterlayout"));break;case P:console.warn("Web-Worker layout error!",R.message)}},mt.prototype.updateLayoutCfg=function(bt){var wt=this.graph,J=this.layoutMethod,ct=(this.layoutType,this.layoutCfg);if(this.layoutType=bt.type,!J||J.destroyed)return this.layoutCfg=Object(c.A)({},ct,bt),void this.layout();this.data=this.setDataFromGraph(),this.stopWorker(),bt.workerEnabled&&this.layoutWithWorker(this.data,null)||(J.init(this.data),J.updateCfg(bt),wt.emit("beforelayout"),J.execute(),J.isCustomLayout&&ct.onLayoutEnd&&ct.onLayoutEnd())},mt.prototype.hasGPUVersion=function(bt){for(var wt=ut.length,J=0;J<wt;J++)if(ut[J]===bt)return!0;return!1},mt.prototype.destroy=function(){var bt=this.layoutMethod;bt&&(bt.destroy(),bt.destroyed=!0);var wt=this.worker;wt&&(wt.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethod=void 0,this.graph=null},mt}(S.c);function Lt(dt,mt){for(var bt=dt.nodes,wt=mt.nodes,J=bt.length,ct=0;ct<J;ct++){var it=bt[ct];it.x=wt[ct].x,it.y=wt[ct].y}}var St=b.a.transform,K=function(dt){function mt(bt){var wt=dt.call(this,bt)||this,J=wt.get("defaultNode");return J||wt.set("defaultNode",{type:"circle"}),J.type||(J.type="circle",wt.set("defaultNode",J)),wt.destroyed=!1,wt}return Object(n.b)(mt,dt),mt.prototype.initLayoutController=function(){var bt=new Bt(this);this.set({layoutController:bt})},mt.prototype.initEventController=function(){var bt=new d(this);this.set({eventController:bt})},mt.prototype.initCanvas=function(){var bt=this.get("container");if(typeof bt=="string"&&(bt=document.getElementById(bt),this.set("container",bt)),!bt)throw new Error("invalid container");var wt,J=this.get("width"),ct=this.get("height");if(this.get("renderer")==="svg")wt=new p.Canvas({container:bt,width:J,height:ct});else{var it={container:bt,width:J,height:ct},_=this.get("pixelRatio");_&&(it.pixelRatio=_),wt=new u.Canvas(it)}this.set("canvas",wt)},mt.prototype.initPlugins=function(){var bt=this;Object(c.f)(bt.get("plugins"),function(wt){!wt.destroyed&&wt.initPlugin&&wt.initPlugin(bt)})},mt.prototype.toDataURL=function(bt,wt){var J=this.get("canvas"),ct=J.getRenderer(),it=J.get("el");bt||(bt="image/png");var _="";if(ct==="svg"){var R=it.cloneNode(!0),Q=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),k=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Q);k.replaceChild(R,k.documentElement);var g=new XMLSerializer().serializeToString(k);_="data:image/svg+xml;charset=utf8,"+encodeURIComponent(g)}else{var O=void 0,F=it.getContext("2d"),V=this.get("width"),rt=this.get("height"),ot=void 0;if(wt){var st=typeof window!="undefined"?window.devicePixelRatio:1;O=F.getImageData(0,0,V*st,rt*st),ot=F.globalCompositeOperation,F.globalCompositeOperation="destination-over",F.fillStyle=wt,F.fillRect(0,0,V,rt)}_=it.toDataURL(bt),wt&&(F.clearRect(0,0,V,rt),F.putImageData(O,0,0),F.globalCompositeOperation=ot)}return _},mt.prototype.toFullDataURL=function(bt,wt,J){var ct=this.get("group").getCanvasBBox(),it=ct.height,_=ct.width,R=this.get("renderer"),Q=Object(m.b)('<id="virtual-image"></div>'),k=J?J.backgroundColor:void 0,g=J?J.padding:void 0;g?Object(c.t)(g)&&(g=[g,g,g,g]):g=[0,0,0,0];var O=it+g[0]+g[2],F=_+g[1]+g[3],V={container:Q,height:O,width:F,quickHit:!0},rt=R==="svg"?new p.Canvas(V):new u.Canvas(V),ot=this.get("group").clone(),st=Object(c.c)(ot.getMatrix());st||(st=[1,0,0,0,1,0,0,0,1]);var Mt=(ct.maxX+ct.minX)/2,yt=(ct.maxY+ct.minY)/2;st=St(st,[["t",-Mt,-yt],["t",_/2+g[3],it/2+g[0]]]),ot.resetMatrix(),ot.setMatrix(st),rt.add(ot);var xt=rt.get("el"),Ot="";wt||(wt="image/png"),setTimeout(function(){if(R==="svg"){var jt=xt.cloneNode(!0),Dt=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),zt=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Dt);zt.replaceChild(jt,zt.documentElement);var Tt=new XMLSerializer().serializeToString(zt);Ot="data:image/svg+xml;charset=utf8,"+encodeURIComponent(Tt)}else{var Wt=void 0,Ht=xt.getContext("2d"),re=void 0;if(k){var pe=typeof window!="undefined"?window.devicePixelRatio:1;Wt=Ht.getImageData(0,0,F*pe,O*pe),re=Ht.globalCompositeOperation,Ht.globalCompositeOperation="destination-over",Ht.fillStyle=k,Ht.fillRect(0,0,F,O)}Ot=xt.toDataURL(wt),k&&(Ht.clearRect(0,0,F,O),Ht.putImageData(Wt,0,0),Ht.globalCompositeOperation=re)}bt&&bt(Ot)},16)},mt.prototype.downloadFullImage=function(bt,wt,J){var ct=this,it=this.get("group").getCanvasBBox(),_=it.height,R=it.width,Q=this.get("renderer"),k=Object(m.b)('<id="virtual-image"></div>'),g=J?J.backgroundColor:void 0,O=J?J.padding:void 0;O?Object(c.t)(O)&&(O=[O,O,O,O]):O=[0,0,0,0];var F=_+O[0]+O[2],V=R+O[1]+O[3],rt={container:k,height:F,width:V},ot=Q==="svg"?new p.Canvas(rt):new u.Canvas(rt),st=this.get("group").clone(),Mt=Object(c.c)(st.getMatrix());Mt||(Mt=[1,0,0,0,1,0,0,0,1]);var yt=(it.maxX+it.minX)/2,xt=(it.maxY+it.minY)/2;Mt=St(Mt,[["t",-yt,-xt],["t",R/2+O[3],_/2+O[0]]]),st.resetMatrix(),st.setMatrix(Mt),ot.add(st);var Ot=ot.get("el");wt||(wt="image/png"),setTimeout(function(){var jt="";if(Q==="svg"){var Dt=Ot.cloneNode(!0),zt=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),Tt=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",zt);Tt.replaceChild(Dt,Tt.documentElement);var Wt=new XMLSerializer().serializeToString(Tt);jt="data:image/svg+xml;charset=utf8,"+encodeURIComponent(Wt)}else{var Ht=void 0,re=Ot.getContext("2d"),pe=void 0;if(g){var me=typeof window!="undefined"?window.devicePixelRatio:1;Ht=re.getImageData(0,0,V*me,F*me),pe=re.globalCompositeOperation,re.globalCompositeOperation="destination-over",re.fillStyle=g,re.fillRect(0,0,V,F)}jt=Ot.toDataURL(wt),g&&(re.clearRect(0,0,V,F),re.putImageData(Ht,0,0),re.globalCompositeOperation=pe)}var Se=document.createElement("a"),Le=(bt||"graph")+(Q==="svg"?".svg":"."+wt.split("/")[1]);ct.dataURLToImage(jt,Q,Se,Le);var Je=document.createEvent("MouseEvents");Je.initEvent("click",!1,!1),Se.dispatchEvent(Je)},16)},mt.prototype.downloadImage=function(bt,wt,J){var ct=this,it=this;it.isAnimating()&&it.stopAnimate();var _=it.get("canvas").getRenderer();wt||(wt="image/png");var R=(bt||"graph")+(_==="svg"?".svg":wt.split("/")[1]),Q=document.createElement("a");setTimeout(function(){var k=it.toDataURL(wt,J);ct.dataURLToImage(k,_,Q,R);var g=document.createEvent("MouseEvents");g.initEvent("click",!1,!1),Q.dispatchEvent(g)},16)},mt.prototype.dataURLToImage=function(bt,wt,J,ct){if(typeof window!="undefined")if(window.Blob&&window.URL&&wt!=="svg"){var it=bt.split(","),_="";if(it&&it.length>0){var R=it[0].match(/:(.*?);/);R&&R.length>=2&&(_=R[1])}for(var Q=atob(it[1]),k=Q.length,g=new Uint8Array(k);k--;)g[k]=Q.charCodeAt(k);var O=new Blob([g],{type:_});window.navigator.msSaveBlob?window.navigator.msSaveBlob(O,ct):J.addEventListener("click",function(){J.download=ct,J.href=window.URL.createObjectURL(O)})}else J.addEventListener("click",function(){J.download=ct,J.href=bt})},mt.prototype.addPlugin=function(bt){bt.destroyed||(this.get("plugins").push(bt),bt.initPlugin(this))},mt.prototype.removePlugin=function(bt){var wt=this.get("plugins"),J=wt.indexOf(bt);J>=0&&(bt.destroyPlugin(),wt.splice(J,1))},mt.prototype.setImageWaterMarker=function(bt,wt){bt===void 0&&(bt=I.a.waterMarkerImage);var J=this.get("container");Object(c.x)(J)&&(J=document.getElementById(J)),J.style.position||(J.style.position="relative");var ct=this.get("graphWaterMarker"),it=Object(c.e)({},I.a.imageWaterMarkerConfig,wt),_=it.width,R=it.height,Q=it.compatible,k=it.image;if(!ct){var g={container:J,width:_,height:R,capture:!1},O=this.get("pixelRatio");O&&(g.pixelRatio=O),ct=new u.Canvas(g),this.set("graphWaterMarker",ct)}ct.get("el").style.display="none";var F=ct.get("context"),V=k.rotate,rt=k.x,ot=k.y;F.rotate(-V*Math.PI/180);var st=new Image;st.crossOrigin="anonymous",st.src=bt,st.onload=function(){if(F.drawImage(st,rt,ot,k.width,k.height),F.rotate(V*Math.PI/180),Q)J.style.cssText="background-image: url("+ct.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var Mt=document.querySelector(".g6-graph-watermarker");Mt||((Mt=document.createElement("div")).className="g6-graph-watermarker"),Mt.className="g6-graph-watermarker",ct.destroyed||(Mt.style.cssText="background-image: url("+ct.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;",J.appendChild(Mt))}}},mt.prototype.setTextWaterMarker=function(bt,wt){var J=this.get("container");Object(c.x)(J)&&(J=document.getElementById(J)),J.style.position||(J.style.position="relative");var ct=this.get("graphWaterMarker"),it=Object(c.e)({},I.a.textWaterMarkerConfig,wt),_=it.width,R=it.height,Q=it.compatible,k=it.text;if(!ct){var g={container:J,width:_,height:R,capture:!1},O=this.get("pixelRatio");O&&(g.pixelRatio=O),ct=new u.Canvas(g),this.set("graphWaterMarker",ct)}ct.get("el").style.display="none";var F=ct.get("context"),V=k.rotate,rt=k.fill,ot=k.fontFamily,st=k.fontSize,Mt=k.baseline,yt=k.x,xt=k.y,Ot=k.lineHeight;F.rotate(-V*Math.PI/180),F.font=st+"px "+ot,F.fillStyle=rt,F.textBaseline=Mt;for(var jt=bt.length-1;jt>=0;jt--)F.fillText(bt[jt],yt,xt+jt*Ot);if(F.rotate(V*Math.PI/180),Q)J.style.cssText="background-image: url("+ct.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var Dt=document.querySelector(".g6-graph-watermarker");Dt||((Dt=document.createElement("div")).className="g6-graph-watermarker"),Dt.style.cssText="background-image: url("+ct.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;",J.appendChild(Dt)}},mt.prototype.destroy=function(){Object(c.f)(this.get("plugins"),function(it){it.destroyPlugin()});var bt=this.get("tooltips");if(bt)for(var wt=0;wt<bt.length;wt++){var J=bt[wt];if(J){var ct=J.parentElement;ct&&ct.removeChild(J)}}this.get("eventController").destroy(),this.get("layoutController").destroy(),this.get("graphWaterMarker")&&this.get("graphWaterMarker").destroy(),document.querySelector(".g6-graph-watermarker")&&document.querySelector(".g6-graph-watermarker").remove(),dt.prototype.destroy.call(this)},mt}(S.b);y.a=K},function(i,y){i.exports=function(t){return t==null}},function(i,y,t){var n;function u(p){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(p)}(function(p){var b=/^\s+/,c=/\s+$/,S=0,I=p.round,m=p.min,r=p.max,s=p.random;function d(O,F){if(F=F||{},(O=O||"")instanceof d)return O;if(!(this instanceof d))return new d(O,F);var V=function(rt){var ot={r:0,g:0,b:0},st=1,Mt=null,yt=null,xt=null,Ot=!1,jt=!1;typeof rt=="string"&&(rt=function(Wt){Wt=Wt.replace(b,"").replace(c,"").toLowerCase();var Ht,re=!1;if(Lt[Wt])Wt=Lt[Wt],re=!0;else if(Wt=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(Ht=k.rgb.exec(Wt))?{r:Ht[1],g:Ht[2],b:Ht[3]}:(Ht=k.rgba.exec(Wt))?{r:Ht[1],g:Ht[2],b:Ht[3],a:Ht[4]}:(Ht=k.hsl.exec(Wt))?{h:Ht[1],s:Ht[2],l:Ht[3]}:(Ht=k.hsla.exec(Wt))?{h:Ht[1],s:Ht[2],l:Ht[3],a:Ht[4]}:(Ht=k.hsv.exec(Wt))?{h:Ht[1],s:Ht[2],v:Ht[3]}:(Ht=k.hsva.exec(Wt))?{h:Ht[1],s:Ht[2],v:Ht[3],a:Ht[4]}:(Ht=k.hex8.exec(Wt))?{r:bt(Ht[1]),g:bt(Ht[2]),b:bt(Ht[3]),a:it(Ht[4]),format:re?"name":"hex8"}:(Ht=k.hex6.exec(Wt))?{r:bt(Ht[1]),g:bt(Ht[2]),b:bt(Ht[3]),format:re?"name":"hex"}:(Ht=k.hex4.exec(Wt))?{r:bt(Ht[1]+""+Ht[1]),g:bt(Ht[2]+""+Ht[2]),b:bt(Ht[3]+""+Ht[3]),a:it(Ht[4]+""+Ht[4]),format:re?"name":"hex8"}:(Ht=k.hex3.exec(Wt))?{r:bt(Ht[1]+""+Ht[1]),g:bt(Ht[2]+""+Ht[2]),b:bt(Ht[3]+""+Ht[3]),format:re?"name":"hex"}:!1}(rt)),u(rt)=="object"&&(g(rt.r)&&g(rt.g)&&g(rt.b)?(Dt=rt.r,zt=rt.g,Tt=rt.b,ot={r:255*dt(Dt,255),g:255*dt(zt,255),b:255*dt(Tt,255)},Ot=!0,jt=String(rt.r).substr(-1)==="%"?"prgb":"rgb"):g(rt.h)&&g(rt.s)&&g(rt.v)?(Mt=J(rt.s),yt=J(rt.v),ot=function(Wt,Ht,re){Wt=6*dt(Wt,360),Ht=dt(Ht,100),re=dt(re,100);var pe=p.floor(Wt),me=Wt-pe,Se=re*(1-Ht),Le=re*(1-me*Ht),Je=re*(1-(1-me)*Ht),On=pe%6;return{r:255*[re,Le,Se,Se,Je,re][On],g:255*[Je,re,re,Le,Se,Se][On],b:255*[Se,Se,Je,re,re,Le][On]}}(rt.h,Mt,yt),Ot=!0,jt="hsv"):g(rt.h)&&g(rt.s)&&g(rt.l)&&(Mt=J(rt.s),xt=J(rt.l),ot=function(Wt,Ht,re){var pe,me,Se;function Le(gn,Wn,kn){return kn<0&&(kn+=1),kn>1&&(kn-=1),kn<1/6?gn+6*(Wn-gn)*kn:kn<.5?Wn:kn<2/3?gn+(Wn-gn)*(2/3-kn)*6:gn}if(Wt=dt(Wt,360),Ht=dt(Ht,100),re=dt(re,100),Ht===0)pe=me=Se=re;else{var Je=re<.5?re*(1+Ht):re+Ht-re*Ht,On=2*re-Je;pe=Le(On,Je,Wt+1/3),me=Le(On,Je,Wt),Se=Le(On,Je,Wt-1/3)}return{r:255*pe,g:255*me,b:255*Se}}(rt.h,Mt,xt),Ot=!0,jt="hsl"),rt.hasOwnProperty("a")&&(st=rt.a));var Dt,zt,Tt;return st=K(st),{ok:Ot,format:rt.format||jt,r:m(255,r(ot.r,0)),g:m(255,r(ot.g,0)),b:m(255,r(ot.b,0)),a:st}}(O);this._originalInput=O,this._r=V.r,this._g=V.g,this._b=V.b,this._a=V.a,this._roundA=I(100*this._a)/100,this._format=F.format||V.format,this._gradientType=F.gradientType,this._r<1&&(this._r=I(this._r)),this._g<1&&(this._g=I(this._g)),this._b<1&&(this._b=I(this._b)),this._ok=V.ok,this._tc_id=S++}function C(O,F,V){O=dt(O,255),F=dt(F,255),V=dt(V,255);var rt,ot,st=r(O,F,V),Mt=m(O,F,V),yt=(st+Mt)/2;if(st==Mt)rt=ot=0;else{var xt=st-Mt;switch(ot=yt>.5?xt/(2-st-Mt):xt/(st+Mt),st){case O:rt=(F-V)/xt+(F<V?6:0);break;case F:rt=(V-O)/xt+2;break;case V:rt=(O-F)/xt+4}rt/=6}return{h:rt,s:ot,l:yt}}function E(O,F,V){O=dt(O,255),F=dt(F,255),V=dt(V,255);var rt,ot,st=r(O,F,V),Mt=m(O,F,V),yt=st,xt=st-Mt;if(ot=st===0?0:xt/st,st==Mt)rt=0;else{switch(st){case O:rt=(F-V)/xt+(F<V?6:0);break;case F:rt=(V-O)/xt+2;break;case V:rt=(O-F)/xt+4}rt/=6}return{h:rt,s:ot,v:yt}}function A(O,F,V,rt){var ot=[wt(I(O).toString(16)),wt(I(F).toString(16)),wt(I(V).toString(16))];return rt&&ot[0].charAt(0)==ot[0].charAt(1)&&ot[1].charAt(0)==ot[1].charAt(1)&&ot[2].charAt(0)==ot[2].charAt(1)?ot[0].charAt(0)+ot[1].charAt(0)+ot[2].charAt(0):ot.join("")}function f(O,F,V,rt){return[wt(ct(rt)),wt(I(O).toString(16)),wt(I(F).toString(16)),wt(I(V).toString(16))].join("")}function x(O,F){F=F===0?0:F||10;var V=d(O).toHsl();return V.s-=F/100,V.s=mt(V.s),d(V)}function j(O,F){F=F===0?0:F||10;var V=d(O).toHsl();return V.s+=F/100,V.s=mt(V.s),d(V)}function P(O){return d(O).desaturate(100)}function W(O,F){F=F===0?0:F||10;var V=d(O).toHsl();return V.l+=F/100,V.l=mt(V.l),d(V)}function X(O,F){F=F===0?0:F||10;var V=d(O).toRgb();return V.r=r(0,m(255,V.r-I(-F/100*255))),V.g=r(0,m(255,V.g-I(-F/100*255))),V.b=r(0,m(255,V.b-I(-F/100*255))),d(V)}function $(O,F){F=F===0?0:F||10;var V=d(O).toHsl();return V.l-=F/100,V.l=mt(V.l),d(V)}function ft(O,F){var V=d(O).toHsl(),rt=(V.h+F)%360;return V.h=rt<0?360+rt:rt,d(V)}function Z(O){var F=d(O).toHsl();return F.h=(F.h+180)%360,d(F)}function lt(O){var F=d(O).toHsl(),V=F.h;return[d(O),d({h:(V+120)%360,s:F.s,l:F.l}),d({h:(V+240)%360,s:F.s,l:F.l})]}function pt(O){var F=d(O).toHsl(),V=F.h;return[d(O),d({h:(V+90)%360,s:F.s,l:F.l}),d({h:(V+180)%360,s:F.s,l:F.l}),d({h:(V+270)%360,s:F.s,l:F.l})]}function gt(O){var F=d(O).toHsl(),V=F.h;return[d(O),d({h:(V+72)%360,s:F.s,l:F.l}),d({h:(V+216)%360,s:F.s,l:F.l})]}function ut(O,F,V){F=F||6,V=V||30;var rt=d(O).toHsl(),ot=360/V,st=[d(O)];for(rt.h=(rt.h-(ot*F>>1)+720)%360;--F;)rt.h=(rt.h+ot)%360,st.push(d(rt));return st}function Bt(O,F){F=F||6;for(var V=d(O).toHsv(),rt=V.h,ot=V.s,st=V.v,Mt=[],yt=1/F;F--;)Mt.push(d({h:rt,s:ot,v:st})),st=(st+yt)%1;return Mt}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var F=this.toRgb();return(299*F.r+587*F.g+114*F.b)/1e3},getLuminance:function(){var F,V,rt,ot=this.toRgb();return F=ot.r/255,V=ot.g/255,rt=ot.b/255,.2126*(F<=.03928?F/12.92:p.pow((F+.055)/1.055,2.4))+.7152*(V<=.03928?V/12.92:p.pow((V+.055)/1.055,2.4))+.0722*(rt<=.03928?rt/12.92:p.pow((rt+.055)/1.055,2.4))},setAlpha:function(F){return this._a=K(F),this._roundA=I(100*this._a)/100,this},toHsv:function(){var F=E(this._r,this._g,this._b);return{h:360*F.h,s:F.s,v:F.v,a:this._a}},toHsvString:function(){var F=E(this._r,this._g,this._b),V=I(360*F.h),rt=I(100*F.s),ot=I(100*F.v);return this._a==1?"hsv("+V+", "+rt+"%, "+ot+"%)":"hsva("+V+", "+rt+"%, "+ot+"%, "+this._roundA+")"},toHsl:function(){var F=C(this._r,this._g,this._b);return{h:360*F.h,s:F.s,l:F.l,a:this._a}},toHslString:function(){var F=C(this._r,this._g,this._b),V=I(360*F.h),rt=I(100*F.s),ot=I(100*F.l);return this._a==1?"hsl("+V+", "+rt+"%, "+ot+"%)":"hsla("+V+", "+rt+"%, "+ot+"%, "+this._roundA+")"},toHex:function(F){return A(this._r,this._g,this._b,F)},toHexString:function(F){return"#"+this.toHex(F)},toHex8:function(F){return function(V,rt,ot,st,Mt){var yt=[wt(I(V).toString(16)),wt(I(rt).toString(16)),wt(I(ot).toString(16)),wt(ct(st))];return Mt&&yt[0].charAt(0)==yt[0].charAt(1)&&yt[1].charAt(0)==yt[1].charAt(1)&&yt[2].charAt(0)==yt[2].charAt(1)&&yt[3].charAt(0)==yt[3].charAt(1)?yt[0].charAt(0)+yt[1].charAt(0)+yt[2].charAt(0)+yt[3].charAt(0):yt.join("")}(this._r,this._g,this._b,this._a,F)},toHex8String:function(F){return"#"+this.toHex8(F)},toRgb:function(){return{r:I(this._r),g:I(this._g),b:I(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+I(this._r)+", "+I(this._g)+", "+I(this._b)+")":"rgba("+I(this._r)+", "+I(this._g)+", "+I(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:I(100*dt(this._r,255))+"%",g:I(100*dt(this._g,255))+"%",b:I(100*dt(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+I(100*dt(this._r,255))+"%, "+I(100*dt(this._g,255))+"%, "+I(100*dt(this._b,255))+"%)":"rgba("+I(100*dt(this._r,255))+"%, "+I(100*dt(this._g,255))+"%, "+I(100*dt(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(St[A(this._r,this._g,this._b,!0)]||!1)},toFilter:function(F){var V="#"+f(this._r,this._g,this._b,this._a),rt=V,ot=this._gradientType?"GradientType = 1, ":"";if(F){var st=d(F);rt="#"+f(st._r,st._g,st._b,st._a)}return"progid:DXImageTransform.Microsoft.gradient("+ot+"startColorstr="+V+",endColorstr="+rt+")"},toString:function(F){var V=!!F;F=F||this._format;var rt=!1,ot=this._a<1&&this._a>=0;return V||!ot||F!=="hex"&&F!=="hex6"&&F!=="hex3"&&F!=="hex4"&&F!=="hex8"&&F!=="name"?(F==="rgb"&&(rt=this.toRgbString()),F==="prgb"&&(rt=this.toPercentageRgbString()),F!=="hex"&&F!=="hex6"||(rt=this.toHexString()),F==="hex3"&&(rt=this.toHexString(!0)),F==="hex4"&&(rt=this.toHex8String(!0)),F==="hex8"&&(rt=this.toHex8String()),F==="name"&&(rt=this.toName()),F==="hsl"&&(rt=this.toHslString()),F==="hsv"&&(rt=this.toHsvString()),rt||this.toHexString()):F==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(F,V){var rt=F.apply(null,[this].concat([].slice.call(V)));return this._r=rt._r,this._g=rt._g,this._b=rt._b,this.setAlpha(rt._a),this},lighten:function(){return this._applyModification(W,arguments)},brighten:function(){return this._applyModification(X,arguments)},darken:function(){return this._applyModification($,arguments)},desaturate:function(){return this._applyModification(x,arguments)},saturate:function(){return this._applyModification(j,arguments)},greyscale:function(){return this._applyModification(P,arguments)},spin:function(){return this._applyModification(ft,arguments)},_applyCombination:function(F,V){return F.apply(null,[this].concat([].slice.call(V)))},analogous:function(){return this._applyCombination(ut,arguments)},complement:function(){return this._applyCombination(Z,arguments)},monochromatic:function(){return this._applyCombination(Bt,arguments)},splitcomplement:function(){return this._applyCombination(gt,arguments)},triad:function(){return this._applyCombination(lt,arguments)},tetrad:function(){return this._applyCombination(pt,arguments)}},d.fromRatio=function(O,F){if(u(O)=="object"){var V={};for(var rt in O)O.hasOwnProperty(rt)&&(V[rt]=rt==="a"?O[rt]:J(O[rt]));O=V}return d(O,F)},d.equals=function(O,F){return!(!O||!F)&&d(O).toRgbString()==d(F).toRgbString()},d.random=function(){return d.fromRatio({r:s(),g:s(),b:s()})},d.mix=function(O,F,V){V=V===0?0:V||50;var rt=d(O).toRgb(),ot=d(F).toRgb(),st=V/100;return d({r:(ot.r-rt.r)*st+rt.r,g:(ot.g-rt.g)*st+rt.g,b:(ot.b-rt.b)*st+rt.b,a:(ot.a-rt.a)*st+rt.a})},d.readability=function(O,F){var V=d(O),rt=d(F);return(p.max(V.getLuminance(),rt.getLuminance())+.05)/(p.min(V.getLuminance(),rt.getLuminance())+.05)},d.isReadable=function(O,F,V){var rt,ot,st=d.readability(O,F);switch(ot=!1,(rt=function(Mt){var yt,xt;return yt=((Mt=Mt||{level:"AA",size:"small"}).level||"AA").toUpperCase(),xt=(Mt.size||"small").toLowerCase(),yt!=="AA"&&yt!=="AAA"&&(yt="AA"),xt!=="small"&&xt!=="large"&&(xt="small"),{level:yt,size:xt}}(V)).level+rt.size){case"AAsmall":case"AAAlarge":ot=st>=4.5;break;case"AAlarge":ot=st>=3;break;case"AAAsmall":ot=st>=7}return ot},d.mostReadable=function(O,F,V){var rt,ot,st,Mt,yt=null,xt=0;ot=(V=V||{}).includeFallbackColors,st=V.level,Mt=V.size;for(var Ot=0;Ot<F.length;Ot++)(rt=d.readability(O,F[Ot]))>xt&&(xt=rt,yt=d(F[Ot]));return d.isReadable(O,yt,{level:st,size:Mt})||!ot?yt:(V.includeFallbackColors=!1,d.mostReadable(O,["#fff","#000"],V))};var Lt=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},St=d.hexNames=function(O){var F={};for(var V in O)O.hasOwnProperty(V)&&(F[O[V]]=V);return F}(Lt);function K(O){return O=parseFloat(O),(isNaN(O)||O<0||O>1)&&(O=1),O}function dt(O,F){(function(rt){return typeof rt=="string"&&rt.indexOf(".")!=-1&&parseFloat(rt)===1})(O)&&(O="100%");var V=function(rt){return typeof rt=="string"&&rt.indexOf("%")!=-1}(O);return O=m(F,r(0,parseFloat(O))),V&&(O=parseInt(O*F,10)/100),p.abs(O-F)<1e-6?1:O%F/parseFloat(F)}function mt(O){return m(1,r(0,O))}function bt(O){return parseInt(O,16)}function wt(O){return O.length==1?"0"+O:""+O}function J(O){return O<=1&&(O=100*O+"%"),O}function ct(O){return p.round(255*parseFloat(O)).toString(16)}function it(O){return bt(O)/255}var _,R,Q,k=(R="[\\s|\\(]+("+(_="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+_+")[,|\\s]+("+_+")\\s*\\)?",Q="[\\s|\\(]+("+_+")[,|\\s]+("+_+")[,|\\s]+("+_+")[,|\\s]+("+_+")\\s*\\)?",{CSS_UNIT:new RegExp(_),rgb:new RegExp("rgb"+R),rgba:new RegExp("rgba"+Q),hsl:new RegExp("hsl"+R),hsla:new RegExp("hsla"+Q),hsv:new RegExp("hsv"+R),hsva:new RegExp("hsva"+Q),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function g(O){return!!k.CSS_UNIT.exec(O)}i.exports?i.exports=d:(n=function(){return d}.call(y,t,y,i))===void 0||(i.exports=n)})(Math)},function(i,y,t){i.exports={EPSILON:t(233),create:t(234),clone:t(477),fromValues:t(478),copy:t(479),set:t(235),equals:t(480),exactEquals:t(481),add:t(236),subtract:t(150),sub:t(482),multiply:t(237),mul:t(483),divide:t(238),div:t(484),inverse:t(485),min:t(486),max:t(487),rotate:t(488),floor:t(489),ceil:t(490),round:t(491),scale:t(492),scaleAndAdd:t(493),distance:t(239),dist:t(494),squaredDistance:t(240),sqrDist:t(495),length:t(241),len:t(496),squaredLength:t(242),sqrLen:t(497),negate:t(498),normalize:t(243),dot:t(244),cross:t(499),lerp:t(500),random:t(501),transformMat2:t(502),transformMat2d:t(503),transformMat3:t(504),transformMat4:t(505),forEach:t(506),limit:t(507)}},function(i,y,t){var n=t(96),u=t(278),p=t(279),b=t(280),c=t(281),S=t(282);function I(m){var r=this.__data__=new n(m);this.size=r.size}I.prototype.clear=u,I.prototype.delete=p,I.prototype.get=b,I.prototype.has=c,I.prototype.set=S,i.exports=I},function(i,y,t){var n=t(273),u=t(274),p=t(275),b=t(276),c=t(277);function S(I){var m=-1,r=I==null?0:I.length;for(this.clear();++m<r;){var s=I[m];this.set(s[0],s[1])}}S.prototype.clear=n,S.prototype.delete=u,S.prototype.get=p,S.prototype.has=b,S.prototype.set=c,i.exports=S},function(i,y,t){var n=t(71);i.exports=function(u,p){for(var b=u.length;b--;)if(n(u[b][0],p))return b;return-1}},function(i,y,t){var n=t(64)(Object,"create");i.exports=n},function(i,y,t){var n=t(297);i.exports=function(u,p){var b=u.__data__;return n(p)?b[typeof p=="string"?"string":"hash"]:b.map}},function(i,y,t){var n=t(101),u=t(71),p=Object.prototype.hasOwnProperty;i.exports=function(b,c,S){var I=b[c];p.call(b,c)&&u(I,S)&&(S!==void 0||c in b)||n(b,c,S)}},function(i,y,t){var n=t(166);i.exports=function(u,p,b){p=="__proto__"&&n?n(u,p,{configurable:!0,enumerable:!0,value:b,writable:!0}):u[p]=b}},function(i,y){function t(u){return(t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}var n=/^(?:0|[1-9]\d*)$/;i.exports=function(u,p){var b=t(u);return!!(p=p==null?9007199254740991:p)&&(b=="number"||b!="symbol"&&n.test(u))&&u>-1&&u%1==0&&u<p}},function(i,y){i.exports=function(t){return function(n){return t(n)}}},function(i,y){var t=Object.prototype;i.exports=function(n){var u=n&&n.constructor;return n===(typeof u=="function"&&u.prototype||t)}},function(i,y,t){var n=t(168)(Object.getPrototypeOf,Object);i.exports=n},function(i,y,t){var n=t(135),u=t(326)(n);i.exports=u},function(i,y,t){var n=t(108),u=t(87);i.exports=function(p,b){for(var c=0,S=(b=n(b,p)).length;p!=null&&c<S;)p=p[u(b[c++])];return c&&c==S?p:void 0}},function(i,y,t){var n=t(26),u=t(138),p=t(340),b=t(191);i.exports=function(c,S){return n(c)?c:u(c,S)?[c]:p(b(c))}},function(i,y){i.exports=function(t,n){for(var u=-1,p=t==null?0:t.length,b=Array(p);++u<p;)b[u]=n(t[u],u,t);return b}},function(i,y,t){var n=t(66),u=t(200),p=t(201);i.exports=function(b,c){return p(u(b,c,n),b+"")}},function(i,y,t){function n(S){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I})(S)}var u=t(71),p=t(53),b=t(102),c=t(43);i.exports=function(S,I,m){if(!c(m))return!1;var r=n(I);return!!(r=="number"?p(m)&&b(I,m.length):r=="string"&&I in m)&&u(m[I],S)}},function(i,y,t){"use strict";var n=t(24);i.exports={longestPath:function(p){var b={};n.forEach(p.sources(),function c(S){var I=p.node(S);if(n.has(b,S))return I.rank;b[S]=!0;var m=n.min(n.map(p.outEdges(S),function(r){return c(r.w)-p.edge(r).minlen}));return m!==Number.POSITIVE_INFINITY&&m!=null||(m=0),I.rank=m})},slack:function(p,b){return p.node(b.w).rank-p.node(b.v).rank-p.edge(b).minlen}}},function(i,y){},function(i,y,t){"use strict";var n=function(){function u(p,b){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=p,this.name=p,this.originalEvent=b,this.timeStamp=b.timeStamp}return u.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},u.prototype.stopPropagation=function(){this.propagationStopped=!0},u.prototype.toString=function(){return"[Event (type="+this.type+")]"},u.prototype.save=function(){},u.prototype.restore=function(){},u}();y.a=n},function(i,y,t){"use strict";var n=t(1),u=t(79),p=t(19),b=function(c){function S(I){var m=c.call(this)||this;m.destroyed=!1;var r=m.getDefaultCfg();return m.cfg=Object(p.i)(r,I),m}return Object(n.b)(S,c),S.prototype.getDefaultCfg=function(){return{}},S.prototype.get=function(I){return this.cfg[I]},S.prototype.set=function(I,m){this.cfg[I]=m},S.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},S}(u.a);y.a=b},function(i,y,t){"use strict";t.d(y,"a",function(){return u});var n=null;function u(){if(!n){var p=document.createElement("canvas");p.width=1,p.height=1,n=p.getContext("2d")}return n}},function(i,y,t){"use strict";var n=t(1),u=t(118),p=t(19),b={},c=function(S){function I(){return S!==null&&S.apply(this,arguments)||this}return Object(n.b)(I,S),I.prototype.isCanvas=function(){return!1},I.prototype.getBBox=function(){var m=1/0,r=-1/0,s=1/0,d=-1/0,C=[],E=[],A=this.getChildren().filter(function(f){return f.get("visible")&&(!f.isGroup()||f.isGroup()&&f.getChildren().length>0)});return A.length>0?(Object(p.a)(A,function(f){var x=f.getBBox();C.push(x.minX,x.maxX),E.push(x.minY,x.maxY)}),m=Math.min.apply(null,C),r=Math.max.apply(null,C),s=Math.min.apply(null,E),d=Math.max.apply(null,E)):(m=0,r=0,s=0,d=0),{x:m,y:s,minX:m,minY:s,maxX:r,maxY:d,width:r-m,height:d-s}},I.prototype.getCanvasBBox=function(){var m=1/0,r=-1/0,s=1/0,d=-1/0,C=[],E=[],A=this.getChildren().filter(function(f){return f.get("visible")&&(!f.isGroup()||f.isGroup()&&f.getChildren().length>0)});return A.length>0?(Object(p.a)(A,function(f){var x=f.getCanvasBBox();C.push(x.minX,x.maxX),E.push(x.minY,x.maxY)}),m=Math.min.apply(null,C),r=Math.max.apply(null,C),s=Math.min.apply(null,E),d=Math.max.apply(null,E)):(m=0,r=0,s=0,d=0),{x:m,y:s,minX:m,minY:s,maxX:r,maxY:d,width:r-m,height:d-s}},I.prototype.getDefaultCfg=function(){var m=S.prototype.getDefaultCfg.call(this);return m.children=[],m},I.prototype.onAttrChange=function(m,r,s){if(S.prototype.onAttrChange.call(this,m,r,s),m==="matrix"){var d=this.getTotalMatrix();this._applyChildrenMarix(d)}},I.prototype.applyMatrix=function(m){var r=this.getTotalMatrix();S.prototype.applyMatrix.call(this,m);var s=this.getTotalMatrix();s!==r&&this._applyChildrenMarix(s)},I.prototype._applyChildrenMarix=function(m){var r=this.getChildren();Object(p.a)(r,function(s){s.applyMatrix(m)})},I.prototype.addShape=function(){for(var m=[],r=0;r<arguments.length;r++)m[r]=arguments[r];var s=m[0],d=m[1];Object(p.f)(s)?d=s:d.type=s;var C=b[d.type];C||(C=Object(p.k)(d.type),b[d.type]=C);var E=this.getShapeBase(),A=new E[C](d);return this.add(A),A},I.prototype.addGroup=function(){for(var m=[],r=0;r<arguments.length;r++)m[r]=arguments[r];var s,d=m[0],C=m[1];if(Object(p.d)(d))s=new d(C||{parent:this});else{var E=d||{},A=this.getGroupBase();s=new A(E)}return this.add(s),s},I.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},I.prototype.getShape=function(m,r,s){if(!Object(p.b)(this))return null;var d,C=this.getChildren();if(this.isCanvas())d=this._findShape(C,m,r,s);else{var E=[m,r,1];E=this.invertFromMatrix(E),this.isClipped(E[0],E[1])||(d=this._findShape(C,E[0],E[1],s))}return d},I.prototype._findShape=function(m,r,s,d){for(var C=null,E=m.length-1;E>=0;E--){var A=m[E];if(Object(p.b)(A)&&(A.isGroup()?C=A.getShape(r,s,d):A.isHit(r,s)&&(C=A)),C)break}return C},I.prototype.add=function(m){var r=this.getCanvas(),s=this.getChildren(),d=this.get("timeline"),C=m.getParent();C&&function(E,A,f){f===void 0&&(f=!0),f?A.destroy():(A.set("parent",null),A.set("canvas",null)),Object(p.j)(E.getChildren(),A)}(C,m,!1),m.set("parent",this),r&&function E(A,f){if(A.set("canvas",f),A.isGroup()){var x=A.get("children");x.length&&x.forEach(function(j){E(j,f)})}}(m,r),d&&function E(A,f){if(A.set("timeline",f),A.isGroup()){var x=A.get("children");x.length&&x.forEach(function(j){E(j,f)})}}(m,d),s.push(m),m.onCanvasChange("add"),this._applyElementMatrix(m)},I.prototype._applyElementMatrix=function(m){var r=this.getTotalMatrix();r&&m.applyMatrix(r)},I.prototype.getChildren=function(){return this.get("children")},I.prototype.sort=function(){var m,r=this.getChildren();Object(p.a)(r,function(s,d){return s._INDEX=d,s}),r.sort((m=function(d,C){return d.get("zIndex")-C.get("zIndex")},function(s,d){var C=m(s,d);return C===0?s._INDEX-d._INDEX:C})),this.onCanvasChange("sort")},I.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var m=this.getChildren(),r=m.length-1;r>=0;r--)m[r].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},I.prototype.destroy=function(){this.get("destroyed")||(this.clear(),S.prototype.destroy.call(this))},I.prototype.getFirst=function(){return this.getChildByIndex(0)},I.prototype.getLast=function(){var m=this.getChildren();return this.getChildByIndex(m.length-1)},I.prototype.getChildByIndex=function(m){return this.getChildren()[m]},I.prototype.getCount=function(){return this.getChildren().length},I.prototype.contain=function(m){return this.getChildren().indexOf(m)>-1},I.prototype.removeChild=function(m,r){r===void 0&&(r=!0),this.contain(m)&&m.remove(r)},I.prototype.findAll=function(m){var r=[],s=this.getChildren();return Object(p.a)(s,function(d){m(d)&&r.push(d),d.isGroup()&&(r=r.concat(d.findAll(m)))}),r},I.prototype.find=function(m){var r=null,s=this.getChildren();return Object(p.a)(s,function(d){if(m(d)?r=d:d.isGroup()&&(r=d.find(m)),r)return!1}),r},I.prototype.findById=function(m){return this.find(function(r){return r.get("id")===m})},I.prototype.findByClassName=function(m){return this.find(function(r){return r.get("className")===m})},I.prototype.findAllByName=function(m){return this.findAll(function(r){return r.get("name")===m})},I}(u.a);y.a=c},function(i,y,t){"use strict";var n=t(1),u=t(0),p=t(10),b=t(19),c=t(39),S=t(115),I=p.a.transform,m=["zIndex","capture","visible","type"],r=["repeat"];function s(A,f){var x={},j=f.attrs;for(var P in A)x[P]=j[P];return x}function d(A,f){var x={},j=f.attr();return Object(u.f)(A,function(P,W){r.indexOf(W)!==-1||Object(u.q)(j[W],P)||(x[W]=P)}),x}function C(A,f){if(f.onFrame)return A;var x=f.startTime,j=f.delay,P=f.duration,W=Object.prototype.hasOwnProperty;return Object(u.f)(A,function(X){x+j<X.startTime+X.delay+X.duration&&P>X.delay&&Object(u.f)(f.toAttrs,function($,ft){W.call(X.toAttrs,ft)&&(delete X.toAttrs[ft],delete X.fromAttrs[ft])})}),A}var E=function(A){function f(x){var j=A.call(this,x)||this;j.attrs={};var P=j.getDefaultAttrs();return Object(u.A)(P,x.attrs),j.attrs=P,j.initAttrs(P),j.initAnimate(),j}return Object(n.b)(f,A),f.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},f.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},f.prototype.onCanvasChange=function(x){},f.prototype.initAttrs=function(x){},f.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},f.prototype.isGroup=function(){return!1},f.prototype.getParent=function(){return this.get("parent")},f.prototype.getCanvas=function(){return this.get("canvas")},f.prototype.attr=function(){for(var x,j=[],P=0;P<arguments.length;P++)j[P]=arguments[P];var W=j[0],X=j[1];if(!W)return this.attrs;if(Object(u.v)(W)){for(var $ in W)this.setAttr($,W[$]);return this.afterAttrsChange(W),this}return j.length===2?(this.setAttr(W,X),this.afterAttrsChange(((x={})[W]=X,x)),this):this.attrs[W]},f.prototype.isClipped=function(x,j){var P=this.getClip();return P&&!P.isHit(x,j)},f.prototype.setAttr=function(x,j){var P=this.attrs[x];P!==j&&(this.attrs[x]=j,this.onAttrChange(x,j,P))},f.prototype.onAttrChange=function(x,j,P){x==="matrix"&&this.set("totalMatrix",null)},f.prototype.afterAttrsChange=function(x){if(this.cfg.isClipShape){var j=this.cfg.applyTo;j&&j.onCanvasChange("clip")}else this.onCanvasChange("attr")},f.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},f.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},f.prototype.setZIndex=function(x){this.set("zIndex",x);var j=this.getParent();return j&&j.sort(),this},f.prototype.toFront=function(){var x=this.getParent();if(x){var j=x.getChildren(),P=(this.get("el"),j.indexOf(this));j.splice(P,1),j.push(this),this.onCanvasChange("zIndex")}},f.prototype.toBack=function(){var x=this.getParent();if(x){var j=x.getChildren(),P=(this.get("el"),j.indexOf(this));j.splice(P,1),j.unshift(this),this.onCanvasChange("zIndex")}},f.prototype.remove=function(x){x===void 0&&(x=!0);var j=this.getParent();j?(Object(b.j)(j.getChildren(),this),j.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),x&&this.destroy()},f.prototype.resetMatrix=function(){this.attr("matrix",this.getDefaultMatrix()),this.onCanvasChange("matrix")},f.prototype.getMatrix=function(){return this.attr("matrix")},f.prototype.setMatrix=function(x){this.attr("matrix",x),this.onCanvasChange("matrix")},f.prototype.getTotalMatrix=function(){var x=this.cfg.totalMatrix;if(!x){var j=this.attr("matrix"),P=this.cfg.parentMatrix;x=P&&j?Object(c.b)(P,j):j||P,this.set("totalMatrix",x)}return x},f.prototype.applyMatrix=function(x){var j=this.attr("matrix"),P=null;P=x&&j?Object(c.b)(x,j):j||x,this.set("totalMatrix",P),this.set("parentMatrix",x)},f.prototype.getDefaultMatrix=function(){return null},f.prototype.applyToMatrix=function(x){var j=this.attr("matrix");return j?Object(c.c)(j,x):x},f.prototype.invertFromMatrix=function(x){var j=this.attr("matrix");if(j){var P=Object(c.a)(j);if(P)return Object(c.c)(P,x)}return x},f.prototype.setClip=function(x){var j=this.getCanvas(),P=null;if(x){var W=this.getShapeBase()[Object(u.I)(x.type)];W&&(P=new W({type:x.type,isClipShape:!0,applyTo:this,attrs:x.attrs,canvas:j}))}return this.set("clipShape",P),this.onCanvasChange("clip"),P},f.prototype.getClip=function(){var x=this.cfg.clipShape;return x||null},f.prototype.clone=function(){var x=this,j=this.attrs,P={};Object(u.f)(j,function(X,$){Object(u.m)(j[$])?P[$]=function(ft){for(var Z=[],lt=0;lt<ft.length;lt++)Object(u.m)(ft[lt])?Z.push([].concat(ft[lt])):Z.push(ft[lt]);return Z}(j[$]):P[$]=j[$]});var W=new this.constructor({attrs:P});return Object(u.f)(m,function(X){W.set(X,x.get(X))}),W},f.prototype.destroy=function(){this.destroyed||(this.attrs={},A.prototype.destroy.call(this))},f.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},f.prototype.animate=function(){for(var x=[],j=0;j<arguments.length;j++)x[j]=arguments[j];var P=this.isCanvas&&this.isCanvas();if(P||this.get("canvas")){this.set("animating",!0);var W=this.get("timeline");W||(W=this.get("canvas").get("timeline"),this.set("timeline",W));var X=this.get("animations")||[];W.timer||W.initTimer();var $,ft,Z,lt,pt,gt=x[0],ut=x[1],Bt=x[2],Lt=Bt===void 0?"easeLinear":Bt,St=x[3],K=St===void 0?u.C:St,dt=x[4],mt=dt===void 0?0:dt;Object(u.r)(gt)?($=gt,gt={}):Object(u.v)(gt)&&gt.onFrame&&($=gt.onFrame,ft=gt.repeat),Object(u.v)(ut)?(ut=(pt=ut).duration,Lt=pt.easing||"easeLinear",mt=pt.delay||0,ft=pt.repeat||ft||!1,K=pt.callback||u.C,Z=pt.pauseCallback||u.C,lt=pt.resumeCallback||u.C):(Object(u.t)(K)&&(mt=K,K=null),Object(u.r)(Lt)?(K=Lt,Lt="easeLinear"):Lt=Lt||"easeLinear");var bt=d(gt,this),wt={fromAttrs:s(bt,this),toAttrs:bt,duration:ut,easing:Lt,repeat:ft,callback:K,pauseCallback:Z,resumeCallback:lt,delay:mt,startTime:W.getTime(),id:Object(u.H)(),onFrame:$,pathFormatted:!1};X.length>0?X=C(X,wt):W.addAnimator(this),X.push(wt),this.set("animations",X),this.set("_pause",{isPaused:!1})}},f.prototype.stopAnimate=function(x){var j=this;x===void 0&&(x=!0);var P=this.get("animations");Object(u.f)(P,function(W){x&&(W.onFrame?j.attr(W.onFrame(1)):j.attr(W.toAttrs)),W.callback&&W.callback()}),this.set("animating",!1),this.set("animations",[])},f.prototype.pauseAnimate=function(){var x=this.get("timeline"),j=this.get("animations"),P=x.getTime();return Object(u.f)(j,function(W){W._paused=!0,W._pauseTime=P,W.pauseCallback&&W.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:P}),this},f.prototype.resumeAnimate=function(){var x=this.get("timeline").getTime(),j=this.get("animations"),P=this.get("_pause").pauseTime;return Object(u.f)(j,function(W){W.startTime=W.startTime+(x-P),W._paused=!1,W._pauseTime=null,W.resumeCallback&&W.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",j),this},f.prototype.emitDelegation=function(x,j){var P,W=this,X=j.propagationPath;this.getEvents(),x==="mouseenter"?P=j.fromShape:x==="mouseleave"&&(P=j.toShape);for(var $=function(pt){var gt=X[pt],ut=gt.get("name");if(ut){if((gt.isGroup()||gt.isCanvas&&gt.isCanvas())&&P&&Object(b.g)(gt,P))return"break";Object(u.m)(ut)?Object(u.f)(ut,function(Bt){W.emitDelegateEvent(gt,Bt,j)}):ft.emitDelegateEvent(gt,ut,j)}},ft=this,Z=0;Z<X.length&&$(Z)!=="break";Z++);},f.prototype.emitDelegateEvent=function(x,j,P){var W=this.getEvents(),X=j+":"+P.type;(W[X]||W["*"])&&(P.name=X,P.currentTarget=x,P.delegateTarget=this,P.delegateObject=x.get("delegateObject"),this.emit(X,P))},f.prototype.translate=function(x,j){x===void 0&&(x=0),j===void 0&&(j=0);var P=this.getMatrix(),W=I(P,[["t",x,j]]);return this.setMatrix(W),this},f.prototype.move=function(x,j){var P=this.attr("x")||0,W=this.attr("y")||0;return this.translate(x-P,j-W),this},f.prototype.moveTo=function(x,j){return this.move(x,j)},f.prototype.scale=function(x,j){var P=this.getMatrix(),W=I(P,[["s",x,j||x]]);return this.setMatrix(W),this},f.prototype.rotate=function(x){var j=this.getMatrix(),P=I(j,[["r",x]]);return this.setMatrix(P),this},f.prototype.rotateAtStart=function(x){var j=this.attr(),P=j.x,W=j.y,X=this.getMatrix(),$=I(X,[["t",-P,-W],["r",x],["t",P,W]]);return this.setMatrix($),this},f.prototype.rotateAtPoint=function(x,j,P){var W=this.getMatrix(),X=I(W,[["t",-x,-j],["r",P],["t",x,j]]);return this.setMatrix(X),this},f}(S.a);y.a=E},function(i,y,t){"use strict";(function(n){t.d(y,"a",function(){return d});var u=function(){for(var f=0,x=0,j=arguments.length;x<j;x++)f+=arguments[x].length;var P=Array(f),W=0;for(x=0;x<j;x++)for(var X=arguments[x],$=0,ft=X.length;$<ft;$++,W++)P[W]=X[$];return P},p=function(f,x,j){this.name=f,this.version=x,this.os=j,this.type="browser"},b=function(f){this.version=f,this.type="node",this.name="node",this.os=n.platform},c=function(f,x,j,P){this.name=f,this.version=x,this.os=j,this.bot=P,this.type="bot-device"},S=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},I=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},m=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,r=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],s=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function d(A){return A?E(A):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new I:typeof navigator!="undefined"?E(navigator.userAgent):n!==void 0&&n.version?new b(n.version.slice(1)):null}function C(A){return A!==""&&r.reduce(function(f,x){var j=x[0],P=x[1];if(f)return f;var W=P.exec(A);return!!W&&[j,W]},!1)}function E(A){var f=C(A);if(!f)return null;var x=f[0],j=f[1];if(x==="searchbot")return new S;var P=j[1]&&j[1].split(/[._]/).slice(0,3);P?P.length<3&&(P=u(P,function(ft){for(var Z=[],lt=0;lt<ft;lt++)Z.push("0");return Z}(3-P.length))):P=[];var W=P.join("."),X=function(ft){for(var Z=0,lt=s.length;Z<lt;Z++){var pt=s[Z],gt=pt[0];if(pt[1].exec(ft))return gt}return null}(A),$=m.exec(A);return $&&$[1]?new c(x,W,X,$[1]):new p(x,W,X)}}).call(this,t(158))},function(i,y,t){"use strict";t.d(y,"b",function(){return I}),t.d(y,"a",function(){return m});var n=t(17),u=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,p=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,b=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,c=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function S(r,s){var d=r.match(c);Object(n.c)(d,function(C){var E=C.split(":");s.addColorStop(E[0],E[1])})}function I(r,s,d){if(Object(n.k)(d)){if(d[1]==="("||d[2]==="("){if(d[0]==="l")return function(C,E,A){var f,x,j=u.exec(A),P=parseFloat(j[1])%360*(Math.PI/180),W=j[2],X=E.getBBox();P>=0&&P<.5*Math.PI?(f={x:X.minX,y:X.minY},x={x:X.maxX,y:X.maxY}):.5*Math.PI<=P&&P<Math.PI?(f={x:X.maxX,y:X.minY},x={x:X.minX,y:X.maxY}):Math.PI<=P&&P<1.5*Math.PI?(f={x:X.maxX,y:X.maxY},x={x:X.minX,y:X.minY}):(f={x:X.minX,y:X.maxY},x={x:X.maxX,y:X.minY});var $=Math.tan(P),ft=$*$,Z=(x.x-f.x+$*(x.y-f.y))/(ft+1)+f.x,lt=$*(x.x-f.x+$*(x.y-f.y))/(ft+1)+f.y,pt=C.createLinearGradient(f.x,f.y,Z,lt);return S(W,pt),pt}(r,s,d);if(d[0]==="r")return function(C,E,A){var f=p.exec(A),x=parseFloat(f[1]),j=parseFloat(f[2]),P=parseFloat(f[3]),W=f[4];if(P===0){var X=W.match(c);return X[X.length-1].split(":")[1]}var $=E.getBBox(),ft=$.maxX-$.minX,Z=$.maxY-$.minY,lt=Math.sqrt(ft*ft+Z*Z)/2,pt=C.createRadialGradient($.minX+ft*x,$.minY+Z*j,0,$.minX+ft/2,$.minY+Z/2,P*lt);return S(W,pt),pt}(r,s,d);if(d[0]==="p")return function(C,E,A){if(E.get("patternSource")&&E.get("patternSource")===A)return E.get("pattern");var f,x,j=b.exec(A),P=j[1],W=j[2];function X(){f=C.createPattern(x,P),E.set("pattern",f),E.set("patternSource",A)}switch(P){case"a":P="repeat";break;case"x":P="repeat-x";break;case"y":P="repeat-y";break;case"n":P="no-repeat";break;default:P="no-repeat"}return x=new Image,W.match(/^data:/i)||(x.crossOrigin="Anonymous"),x.src=W,x.complete?X():(x.onload=X,x.src=x.src),f}(r,s,d)}return d}}function m(r){var s=0,d=0,C=0,E=0;return Object(n.g)(r)?r.length===1?s=d=C=E=r[0]:r.length===2?(s=C=r[0],d=E=r[1]):r.length===3?(s=r[0],d=E=r[1],C=r[2]):(s=r[0],d=r[1],C=r[2],E=r[3]):s=d=C=E=r,[s,d,C,E]}},function(i,y,t){"use strict";t.r(y),t.d(y,"gpuDetector",function(){return n});var n=function u(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var p=document.createElement("canvas");return!(!window.WebGLRenderingContext||!p.getContext("webgl")&&!p.getContext("experimental-webgl"))}catch(b){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var b=document.createElement("div");return b.id="webgl-error-message",b.style.fontFamily="monospace",b.style.fontSize="13px",b.style.fontWeight="normal",b.style.textAlign="center",b.style.background="#fff",b.style.color="#000",b.style.padding="1.5em",b.style.width="400px",b.style.margin="5em auto 0",this.webgl||(b.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),b},addGetWebGLMessage:function(b){var c=(b=b||{}).parent!==void 0?b.parent:document.body,S=b.id!==void 0?b.id:"oldie",I=u().getWebGLErrorMessage();I.id=S,c.appendChild(I)}}}},function(i,y,t){"use strict";t.d(y,"a",function(){return n});var n={};t.r(n),t.d(n,"leftTranslate",function(){return p}),t.d(n,"leftRotate",function(){return b}),t.d(n,"leftScale",function(){return c}),t.d(n,"transform",function(){return S}),t.d(n,"direction",function(){return I}),t.d(n,"angleTo",function(){return m}),t.d(n,"vertical",function(){return r});var u=t(2);function p(s,d,C){var E=[0,0,0,0,0,0,0,0,0];return u.a.fromTranslation(E,C),u.a.multiply(s,E,d)}function b(s,d,C){var E=[0,0,0,0,0,0,0,0,0];return u.a.fromRotation(E,C),u.a.multiply(s,E,d)}function c(s,d,C){var E=[0,0,0,0,0,0,0,0,0];return u.a.fromScaling(E,C),u.a.multiply(s,E,d)}function S(s,d){for(var C,E,A,f=s?[].concat(s):[1,0,0,0,1,0,0,0,1],x=0,j=d.length;x<j;x++){var P=d[x];switch(P[0]){case"t":p(f,f,[P[1],P[2]]);break;case"s":c(f,f,[P[1],P[2]]);break;case"r":b(f,f,P[1]);break;case"m":C=f,E=f,A=P[1],u.a.multiply(C,A,E)}}return f}function I(s,d){return s[0]*d[1]-d[0]*s[1]}function m(s,d,C){var E=u.d.angle(s,d),A=I(s,d)>=0;return C?A?2*Math.PI-E:E:A?E:2*Math.PI-E}function r(s,d,C){return C?(s[0]=d[1],s[1]=-1*d[0]):(s[0]=-1*d[1],s[1]=d[0]),s}},function(i,y,t){"use strict";t.r(y),t.d(y,"mixColor",function(){return E}),t.d(y,"getColorsWithSubjectColor",function(){return A}),t.d(y,"getColorSetsBySubjectColors",function(){return f});var n=t(82),u=t.n(n),p=t(93),b=t.n(p),c=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function S(x,j,P){var W;return(W=Math.round(x.h)>=60&&Math.round(x.h)<=240?P?Math.round(x.h)-2*j:Math.round(x.h)+2*j:P?Math.round(x.h)+2*j:Math.round(x.h)-2*j)<0?W+=360:W>=360&&(W-=360),W}function I(x,j,P){return x.h===0&&x.s===0?x.s:((W=P?x.s-.16*j:j===4?x.s+.16:x.s+.05*j)>1&&(W=1),P&&j===5&&W>.1&&(W=.1),W<.06&&(W=.06),Number(W.toFixed(2)));var W}function m(x,j,P){var W;return(W=P?x.v+.05*j:x.v-.15*j)>1&&(W=1),Number(W.toFixed(2))}function r(x){for(var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},P=[],W=b()(x),X=5;X>0;X-=1){var $=W.toHsv(),ft=b()({h:S($,X,!0),s:I($,X,!0),v:m($,X,!0)}).toHexString();P.push(ft)}P.push(W.toHexString());for(var Z=1;Z<=4;Z+=1){var lt=W.toHsv(),pt=b()({h:S(lt,Z),s:I(lt,Z),v:m(lt,Z)}).toHexString();P.push(pt)}return j.theme==="dark"?c.map(function(gt){var ut=gt.index,Bt=gt.opacity;return b.a.mix(j.backgroundColor||"#141414",P[ut],100*Bt).toHexString()}):P}var s={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},d={},C={};Object.keys(s).forEach(function(x){d[x]=r(s[x]),d[x].primary=d[x][5],C[x]=r(s[x],{theme:"dark",backgroundColor:"#141414"}),C[x].primary=C[x][5]}),d.red,d.volcano,d.gold,d.orange,d.yellow,d.lime,d.green,d.cyan,d.blue,d.geekblue,d.purple,d.magenta,d.grey;var E=function(j,P,W){var X=u()(j),$=u()(P);return u()([(1-W)*X.red()+W*$.red(),(1-W)*X.green()+W*$.green(),(1-W)*X.blue()+W*$.blue()]).rgb()},A=function(j,P,W,X){return P===void 0&&(P="#fff"),W===void 0&&(W="default"),X===void 0&&(X="rgb(150, 150, 150)"),W==="default"?function($,ft,Z){ft===void 0&&(ft="#fff"),Z===void 0&&(Z="rgb(150, 150, 150)");var lt=E(ft,$,.05).rgb().toString(),pt=E(ft,$,.1).rgb().toString(),gt=E(ft,$,.2).rgb().toString(),ut=E(ft,$,.4).rgb().toString(),Bt=E(ft,Z,.02).rgb().toString(),Lt=E(ft,Z,.05).rgb().toString(),St=E(ft,Z,.1).rgb().toString(),K=E(ft,Z,.2).rgb().toString(),dt=E(ft,Z,.3).rgb().toString(),mt=r($,{theme:"default",backgroundColor:ft}),bt=u()($).hex().toLowerCase(),wt=mt.indexOf(bt),J=$;return wt!==-1&&(J=mt[wt+1]),{mainStroke:$,mainFill:pt,activeStroke:$,activeFill:lt,inactiveStroke:ut,inactiveFill:lt,selectedStroke:$,selectedFill:ft,highlightStroke:J,highlightFill:gt,disableStroke:dt,disableFill:Lt,edgeMainStroke:dt,edgeActiveStroke:$,edgeInactiveStroke:K,edgeSelectedStroke:$,edgeHighlightStroke:$,edgeDisableStroke:St,comboMainStroke:dt,comboMainFill:Bt,comboActiveStroke:$,comboActiveFill:lt,comboInactiveStroke:dt,comboInactiveFill:Bt,comboSelectedStroke:$,comboSelectedFill:Bt,comboHighlightStroke:J,comboHighlightFill:Bt,comboDisableStroke:K,comboDisableFill:Lt}}(j,P,"rgb(150, 150, 150)"):function($,ft,Z){ft===void 0&&(ft="#fff"),Z===void 0&&(Z="#777");var lt=E(ft,$,.2).rgb().toString(),pt=E(ft,$,.3).rgb().toString(),gt=E(ft,$,.6).rgb().toString(),ut=E(ft,$,.8).rgb().toString(),Bt=E(ft,Z,.2).rgb().toString(),Lt=E(ft,Z,.25).rgb().toString(),St=E(ft,Z,.3).rgb().toString(),K=E(ft,Z,.4).rgb().toString(),dt=E(ft,Z,.5).rgb().toString(),mt=r($,{theme:"dark",backgroundColor:ft}),bt=u()($).hex().toLowerCase(),wt=mt.indexOf(bt),J=$;return wt!==-1&&(J=mt[wt+1]),{mainStroke:ut,mainFill:lt,activeStroke:$,activeFill:pt,inactiveStroke:ut,inactiveFill:lt,selectedStroke:$,selectedFill:lt,highlightStroke:$,highlightFill:gt,disableStroke:dt,disableFill:Lt,edgeMainStroke:Z,edgeActiveStroke:$,edgeInactiveStroke:Z,edgeSelectedStroke:$,edgeHighlightStroke:$,edgeDisableStroke:St,comboMainStroke:K,comboMainFill:Lt,comboActiveStroke:$,comboActiveFill:Bt,comboInactiveStroke:K,comboInactiveFill:Lt,comboSelectedStroke:$,comboSelectedFill:Bt,comboHighlightStroke:J,comboHighlightFill:Lt,comboDisableStroke:K,comboDisableFill:Bt}}(j,P,"#777")},f=function(j,P,W,X){P===void 0&&(P="#fff"),W===void 0&&(W="default"),X===void 0&&(X="rgb(150, 150, 150)");var $=[];return j.forEach(function(ft){$.push(A(ft,P,W,X))}),$}},function(i,y,t){"use strict";function n(r){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(r)}var u=t(42);i.exports=p;function p(r){this._isDirected=!u.has(r,"directed")||r.directed,this._isMultigraph=!!u.has(r,"multigraph")&&r.multigraph,this._isCompound=!!u.has(r,"compound")&&r.compound,this._label=void 0,this._defaultNodeLabelFn=u.constant(void 0),this._defaultEdgeLabelFn=u.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function b(r,s){r[s]?r[s]++:r[s]=1}function c(r,s){--r[s]||delete r[s]}function S(r,s,d,C){var E=""+s,A=""+d;if(!r&&E>A){var f=E;E=A,A=f}return E+""+A+""+(u.isUndefined(C)?"\0":C)}function I(r,s,d,C){var E=""+s,A=""+d;if(!r&&E>A){var f=E;E=A,A=f}var x={v:E,w:A};return C&&(x.name=C),x}function m(r,s){return S(r,s.v,s.w,s.name)}p.prototype._nodeCount=0,p.prototype._edgeCount=0,p.prototype.isDirected=function(){return this._isDirected},p.prototype.isMultigraph=function(){return this._isMultigraph},p.prototype.isCompound=function(){return this._isCompound},p.prototype.setGraph=function(r){return this._label=r,this},p.prototype.graph=function(){return this._label},p.prototype.setDefaultNodeLabel=function(r){return u.isFunction(r)||(r=u.constant(r)),this._defaultNodeLabelFn=r,this},p.prototype.nodeCount=function(){return this._nodeCount},p.prototype.nodes=function(){return u.keys(this._nodes)},p.prototype.sources=function(){var r=this;return u.filter(this.nodes(),function(s){return u.isEmpty(r._in[s])})},p.prototype.sinks=function(){var r=this;return u.filter(this.nodes(),function(s){return u.isEmpty(r._out[s])})},p.prototype.setNodes=function(r,s){var d=arguments,C=this;return u.each(r,function(E){d.length>1?C.setNode(E,s):C.setNode(E)}),this},p.prototype.setNode=function(r,s){return u.has(this._nodes,r)?(arguments.length>1&&(this._nodes[r]=s),this):(this._nodes[r]=arguments.length>1?s:this._defaultNodeLabelFn(r),this._isCompound&&(this._parent[r]="\0",this._children[r]={},this._children["\0"][r]=!0),this._in[r]={},this._preds[r]={},this._out[r]={},this._sucs[r]={},++this._nodeCount,this)},p.prototype.node=function(r){return this._nodes[r]},p.prototype.hasNode=function(r){return u.has(this._nodes,r)},p.prototype.removeNode=function(r){var s=this;if(u.has(this._nodes,r)){var d=function(E){s.removeEdge(s._edgeObjs[E])};delete this._nodes[r],this._isCompound&&(this._removeFromParentsChildList(r),delete this._parent[r],u.each(this.children(r),function(C){s.setParent(C)}),delete this._children[r]),u.each(u.keys(this._in[r]),d),delete this._in[r],delete this._preds[r],u.each(u.keys(this._out[r]),d),delete this._out[r],delete this._sucs[r],--this._nodeCount}return this},p.prototype.setParent=function(r,s){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(u.isUndefined(s))s="\0";else{for(var d=s+="";!u.isUndefined(d);d=this.parent(d))if(d===r)throw new Error("Setting "+s+" as parent of "+r+" would create a cycle");this.setNode(s)}return this.setNode(r),this._removeFromParentsChildList(r),this._parent[r]=s,this._children[s][r]=!0,this},p.prototype._removeFromParentsChildList=function(r){delete this._children[this._parent[r]][r]},p.prototype.parent=function(r){if(this._isCompound){var s=this._parent[r];if(s!=="\0")return s}},p.prototype.children=function(r){if(u.isUndefined(r)&&(r="\0"),this._isCompound){var s=this._children[r];if(s)return u.keys(s)}else{if(r==="\0")return this.nodes();if(this.hasNode(r))return[]}},p.prototype.predecessors=function(r){var s=this._preds[r];if(s)return u.keys(s)},p.prototype.successors=function(r){var s=this._sucs[r];if(s)return u.keys(s)},p.prototype.neighbors=function(r){var s=this.predecessors(r);if(s)return u.union(s,this.successors(r))},p.prototype.isLeaf=function(r){return(this.isDirected()?this.successors(r):this.neighbors(r)).length===0},p.prototype.filterNodes=function(r){var s=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});s.setGraph(this.graph());var d=this;u.each(this._nodes,function(E,A){r(A)&&s.setNode(A,E)}),u.each(this._edgeObjs,function(E){s.hasNode(E.v)&&s.hasNode(E.w)&&s.setEdge(E,d.edge(E))});var C={};return this._isCompound&&u.each(s.nodes(),function(E){s.setParent(E,function A(f){var x=d.parent(f);return x===void 0||s.hasNode(x)?(C[f]=x,x):x in C?C[x]:A(x)}(E))}),s},p.prototype.setDefaultEdgeLabel=function(r){return u.isFunction(r)||(r=u.constant(r)),this._defaultEdgeLabelFn=r,this},p.prototype.edgeCount=function(){return this._edgeCount},p.prototype.edges=function(){return u.values(this._edgeObjs)},p.prototype.setPath=function(r,s){var d=this,C=arguments;return u.reduce(r,function(E,A){return C.length>1?d.setEdge(E,A,s):d.setEdge(E,A),A}),this},p.prototype.setEdge=function(){var r,s,d,C,E=!1,A=arguments[0];n(A)==="object"&&A!==null&&"v"in A?(r=A.v,s=A.w,d=A.name,arguments.length===2&&(C=arguments[1],E=!0)):(r=A,s=arguments[1],d=arguments[3],arguments.length>2&&(C=arguments[2],E=!0)),r=""+r,s=""+s,u.isUndefined(d)||(d=""+d);var f=S(this._isDirected,r,s,d);if(u.has(this._edgeLabels,f))return E&&(this._edgeLabels[f]=C),this;if(!u.isUndefined(d)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(r),this.setNode(s),this._edgeLabels[f]=E?C:this._defaultEdgeLabelFn(r,s,d);var x=I(this._isDirected,r,s,d);return r=x.v,s=x.w,Object.freeze(x),this._edgeObjs[f]=x,b(this._preds[s],r),b(this._sucs[r],s),this._in[s][f]=x,this._out[r][f]=x,this._edgeCount++,this},p.prototype.edge=function(r,s,d){var C=arguments.length===1?m(this._isDirected,arguments[0]):S(this._isDirected,r,s,d);return this._edgeLabels[C]},p.prototype.hasEdge=function(r,s,d){var C=arguments.length===1?m(this._isDirected,arguments[0]):S(this._isDirected,r,s,d);return u.has(this._edgeLabels,C)},p.prototype.removeEdge=function(r,s,d){var C=arguments.length===1?m(this._isDirected,arguments[0]):S(this._isDirected,r,s,d),E=this._edgeObjs[C];return E&&(r=E.v,s=E.w,delete this._edgeLabels[C],delete this._edgeObjs[C],c(this._preds[s],r),c(this._sucs[r],s),delete this._in[s][C],delete this._out[r][C],this._edgeCount--),this},p.prototype.inEdges=function(r,s){var d=this._in[r];if(d){var C=u.values(d);return s?u.filter(C,function(E){return E.v===s}):C}},p.prototype.outEdges=function(r,s){var d=this._out[r];if(d){var C=u.values(d);return s?u.filter(C,function(E){return E.w===s}):C}},p.prototype.nodeEdges=function(r,s){var d=this.inEdges(r,s);if(d)return d.concat(this.outEdges(r,s))}},function(i,y,t){var n=t(64)(t(47),"Map");i.exports=n},function(i,y,t){var n=t(289),u=t(296),p=t(298),b=t(299),c=t(300);function S(I){var m=-1,r=I==null?0:I.length;for(this.clear();++m<r;){var s=I[m];this.set(s[0],s[1])}}S.prototype.clear=n,S.prototype.delete=u,S.prototype.get=p,S.prototype.has=b,S.prototype.set=c,i.exports=S},function(i,y){i.exports=function(t,n){for(var u=-1,p=t==null?0:t.length;++u<p&&n(t[u],u,t)!==!1;);return t}},function(i,y){i.exports=function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=9007199254740991}},function(i,y,t){(function(n){function u(m){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(m)}var p=t(163),b=u(y)=="object"&&y&&!y.nodeType&&y,c=b&&u(n)=="object"&&n&&!n.nodeType&&n,S=c&&c.exports===b&&p.process,I=function(){try{var m=c&&c.require&&c.require("util").types;return m||S&&S.binding&&S.binding("util")}catch(r){}}();n.exports=I}).call(this,t(86)(i))},function(i,y,t){var n=t(104),u=t(306),p=Object.prototype.hasOwnProperty;i.exports=function(b){if(!n(b))return u(b);var c=[];for(var S in Object(b))p.call(b,S)&&S!="constructor"&&c.push(S);return c}},function(i,y,t){var n=t(171),u=t(172),p=Object.prototype.propertyIsEnumerable,b=Object.getOwnPropertySymbols,c=b?function(S){return S==null?[]:(S=Object(S),n(b(S),function(I){return p.call(S,I)}))}:u;i.exports=c},function(i,y){i.exports=function(t,n){for(var u=-1,p=n.length,b=t.length;++u<p;)t[b+u]=n[u];return t}},function(i,y,t){var n=t(177);i.exports=function(u){var p=new u.constructor(u.byteLength);return new n(p).set(new n(u)),p}},function(i,y){i.exports=function(t){return function(){return t}}},function(i,y,t){var n=t(136),u=t(58);i.exports=function(p,b){return p&&n(p,b,u)}},function(i,y,t){var n=t(325)();i.exports=n},function(i,y){i.exports=function(t){var n=-1,u=Array(t.size);return t.forEach(function(p){u[++n]=p}),u}},function(i,y,t){function n(S){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I})(S)}var u=t(26),p=t(75),b=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/;i.exports=function(S,I){if(u(S))return!1;var m=n(S);return!(m!="number"&&m!="symbol"&&m!="boolean"&&S!=null&&!p(S))||c.test(S)||!b.test(S)||I!=null&&S in Object(I)}},function(i,y,t){var n=t(132),u=t(359);i.exports=function p(b,c,S,I,m){var r=-1,s=b.length;for(S||(S=u),m||(m=[]);++r<s;){var d=b[r];c>0&&S(d)?c>1?p(d,c-1,S,I,m):n(m,d):I||(m[m.length]=d)}return m}},function(i,y,t){var n=t(75);i.exports=function(u,p,b){for(var c=-1,S=u.length;++c<S;){var I=u[c],m=p(I);if(m!=null&&(r===void 0?m==m&&!n(m):b(m,r)))var r=m,s=I}return s}},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.BindingOnSyntax=void 0;var n=t(142),u=function(){function p(b){this._binding=b}return p.prototype.onActivation=function(b){return this._binding.onActivation=b,new n.BindingWhenSyntax(this._binding)},p}();y.BindingOnSyntax=u},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.BindingWhenSyntax=void 0;var n=t(141),u=t(225),p=function(){function b(c){this._binding=c}return b.prototype.when=function(c){return this._binding.constraint=c,new n.BindingOnSyntax(this._binding)},b.prototype.whenTargetNamed=function(c){return this._binding.constraint=u.namedConstraint(c),new n.BindingOnSyntax(this._binding)},b.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(c){return c.target!==null&&!c.target.isNamed()&&!c.target.isTagged()},new n.BindingOnSyntax(this._binding)},b.prototype.whenTargetTagged=function(c,S){return this._binding.constraint=u.taggedConstraint(c)(S),new n.BindingOnSyntax(this._binding)},b.prototype.whenInjectedInto=function(c){return this._binding.constraint=function(S){return u.typeConstraint(c)(S.parentRequest)},new n.BindingOnSyntax(this._binding)},b.prototype.whenParentNamed=function(c){return this._binding.constraint=function(S){return u.namedConstraint(c)(S.parentRequest)},new n.BindingOnSyntax(this._binding)},b.prototype.whenParentTagged=function(c,S){return this._binding.constraint=function(I){return u.taggedConstraint(c)(S)(I.parentRequest)},new n.BindingOnSyntax(this._binding)},b.prototype.whenAnyAncestorIs=function(c){return this._binding.constraint=function(S){return u.traverseAncerstors(S,u.typeConstraint(c))},new n.BindingOnSyntax(this._binding)},b.prototype.whenNoAncestorIs=function(c){return this._binding.constraint=function(S){return!u.traverseAncerstors(S,u.typeConstraint(c))},new n.BindingOnSyntax(this._binding)},b.prototype.whenAnyAncestorNamed=function(c){return this._binding.constraint=function(S){return u.traverseAncerstors(S,u.namedConstraint(c))},new n.BindingOnSyntax(this._binding)},b.prototype.whenNoAncestorNamed=function(c){return this._binding.constraint=function(S){return!u.traverseAncerstors(S,u.namedConstraint(c))},new n.BindingOnSyntax(this._binding)},b.prototype.whenAnyAncestorTagged=function(c,S){return this._binding.constraint=function(I){return u.traverseAncerstors(I,u.taggedConstraint(c)(S))},new n.BindingOnSyntax(this._binding)},b.prototype.whenNoAncestorTagged=function(c,S){return this._binding.constraint=function(I){return!u.traverseAncerstors(I,u.taggedConstraint(c)(S))},new n.BindingOnSyntax(this._binding)},b.prototype.whenAnyAncestorMatches=function(c){return this._binding.constraint=function(S){return u.traverseAncerstors(S,c)},new n.BindingOnSyntax(this._binding)},b.prototype.whenNoAncestorMatches=function(c){return this._binding.constraint=function(S){return!u.traverseAncerstors(S,c)},new n.BindingOnSyntax(this._binding)},b}();y.BindingWhenSyntax=p},function(i,y){},function(i,y){},function(i,y){},function(i,y){},function(i,y){},function(i,y){},function(i,y){},function(i,y){i.exports=function(t,n,u){return t[0]=n[0]-u[0],t[1]=n[1]-u[1],t}},function(i,y,t){var n=t(57),u=t(105),p=t(48),b=Function.prototype,c=Object.prototype,S=b.toString,I=c.hasOwnProperty,m=S.call(Object);i.exports=function(r){if(!p(r)||n(r)!="[object Object]")return!1;var s=u(r);if(s===null)return!0;var d=I.call(s,"constructor")&&s.constructor;return typeof d=="function"&&d instanceof d&&S.call(d)==m}},function(i,y,t){"use strict";var n=t(1),u=t(155),p=t.n(u),b=t(0),c=t(38),S=t(91),I=c.a.radialLayout,m=c.a.traverseTree,r=function(s){function d(C){var E=s.call(this,C)||this;return E.layoutAnimating=!1,E.set("removeList",[]),E.set("layoutMethod",E.getLayout()),E}return Object(n.b)(d,s),d.prototype.getLayout=function(){var C=this.get("layout");return C?typeof C=="function"?C:(C.type||(C.type="dendrogram"),C.direction||(C.direction="TB"),C.radial?function(E){var A=p.a[C.type](E,C);return I(A),A}:function(E){return p.a[C.type](E,C)}):null},d.indexOfChild=function(C,E){var A=-1;return Object(b.f)(C,function(f,x){if(E===f.id)return A=x,!1}),A},d.prototype.getDefaultCfg=function(){var C=s.prototype.getDefaultCfg.call(this);return C.animate=!0,C},d.prototype.innerAddChild=function(C,E,A){var f=this,x=C.data;x&&(x.x=C.x,x.y=C.y,x.depth=C.depth);var j=f.addItem("node",x,!1);if(E){if(j.set("parent",E),A){var P=E.get("originAttrs");if(P)j.set("originAttrs",P);else{var W=E.getModel();j.set("originAttrs",{x:W.x,y:W.y})}}var X=E.get("children");X?X.push(j):E.set("children",[j]),f.addItem("edge",{source:E,target:j,id:E.get("id")+":"+j.get("id")},!1)}return Object(b.f)(C.children||[],function($){f.innerAddChild($,j,A)}),f.emit("afteraddchild",{item:j,parent:E}),j},d.prototype.innerUpdateChild=function(C,E,A){var f=this,x=f.findById(C.id);if(x){Object(b.f)(C.children||[],function(Z){f.innerUpdateChild(Z,x,A)});var j,P,W=x.get("children");if(W&&W.length>0)for(var X=W.length-1;X>=0;X--){var $=W[X].getModel();d.indexOfChild(C.children||[],$.id)===-1&&(f.innerRemoveChild($.id,{x:C.x,y:C.y},A),W.splice(X,1))}x.get("originAttrs")&&(j=x.get("originAttrs").x,P=x.get("originAttrs").y);var ft=x.getModel();A&&x.set("originAttrs",{x:ft.x,y:ft.y}),x.set("model",C.data),j===C.x&&P===C.y||x.updatePosition({x:C.x,y:C.y})}else f.innerAddChild(C,E,A)},d.prototype.innerRemoveChild=function(C,E,A){var f=this,x=f.findById(C);if(x)if(Object(b.f)(x.get("children"),function(P){f.innerRemoveChild(P.getModel().id,E,A)}),A){var j=x.getModel();x.set("to",E),x.set("originAttrs",{x:j.x,y:j.y}),f.get("removeList").push(x)}else f.removeItem(x)},d.prototype.changeData=function(C){var E=this;this.getNodes().map(function(A){return E.clearItemStates(A)}),this.getEdges().map(function(A){return E.clearItemStates(A)}),C?(E.data(C),E.render()):E.layout(this.get("fitView"))},d.prototype.changeLayout=function(C){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon"),this.updateLayout(C)},d.prototype.updateLayout=function(C){C?(this.set("layout",C),this.set("layoutMethod",this.getLayout()),this.layout()):console.warn("layout cannot be null")},d.prototype.refreshLayout=function(C){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon"),this.layout(C)},d.prototype.layout=function(C){var E=this.get("data"),A=this.get("layoutMethod")(E,this.get("layout")),f=this.get("animate");this.emit("beforerefreshlayout",{data:E,layoutData:A}),this.emit("beforelayout"),this.innerUpdateChild(A,void 0,f),C&&this.get("viewController").fitView(),f?this.layoutAnimate(A):(this.refresh(),this.paint()),this.emit("afterrefreshlayout",{data:E,layoutData:A}),this.emit("afterlayout")},d.prototype.addChild=function(C,E){this.emit("beforeaddchild",{model:C,parent:E}),Object(b.x)(E)||(E=E.get("id"));var A=this.findDataById(E);A&&(A.children||(A.children=[]),A.children.push(C),this.changeData())},d.prototype.updateChildren=function(C,E){E&&this.findById(E)?(this.findDataById(E).children=C,this.changeData()):console.warn("Update children failed! There is no node with id '"+E+"'")},d.prototype.updateChild=function(C,E){if(E&&this.findById(E)){var A=this.findDataById(E),f=this.findById(C.id);if(A.children||(A.children=[]),f){var x=d.indexOfChild(A.children,C.id);A.children[x]=C}else A.children.push(C);this.changeData()}else this.changeData(C)},d.prototype.removeChild=function(C){var E=this.findById(C);if(E){var A=E.get("parent");if(A&&!A.destroyed){var f=this.findDataById(A.get("id")),x=f&&f.children||[],j=E.getModel(),P=d.indexOfChild(x,j.id);x.splice(P,1)}this.changeData()}},d.prototype.findDataById=function(C,E){var A=this;if(E||(E=A.get("data")),C===E.id)return E;var f=null;return Object(b.f)(E.children||[],function(x){return x.id===C?(f=x,!1):!(f=A.findDataById(C,x))&&void 0}),f},d.prototype.layoutAnimate=function(C,E){var A=this,f=this.get("animateCfg");A.emit("beforeanimate",{data:C}),A.getEdges().forEach(function(x){var j=x.get("model");j.sourceAnchor||(j.sourceAnchor=x.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(x){m(C,function(j){var P=A.findById(j.id);if(P){var W=P.get("originAttrs"),X=P.get("model");if(W||(W={x:X.x,y:X.y},P.set("originAttrs",W)),E){var $=E(P,x,W,C);P.set("model",Object.assign(X,$))}else X.x=W.x+(j.x-W.x)*x,X.y=W.y+(j.y-W.y)*x}return!0}),Object(b.f)(A.get("removeList"),function(j){var P=j.getModel(),W=j.get("originAttrs"),X=j.get("to");P.x=W.x+(X.x-W.x)*x,P.y=W.y+(X.y-W.y)*x}),A.refreshPositions()},{duration:f.duration,easing:f.ease,callback:function(){Object(b.f)(A.getNodes(),function(j){j.set("originAttrs",null)}),Object(b.f)(A.get("removeList"),function(j){A.removeItem(j)}),A.set("removeList",[]),f.callback&&f.callback(),A.emit("afteranimate",{data:C})},delay:f.delay})},d.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},d.prototype.isLayoutAnimating=function(){return this.layoutAnimating},d.prototype.render=function(){if(!this.get("data"))throw new Error("data must be defined first");this.clear(),this.emit("beforerender"),this.layout(this.get("fitView")),this.emit("afterrender")},d.prototype.save=function(){return this.get("data")},d}(S.a);y.a=r},function(i,y,t){i.exports={graphlib:t(46),layout:t(382),debug:t(440),util:{time:t(37).time,notime:t(37).notime},version:t(441)}},function(i,y,t){"use strict";var n=Object.prototype.hasOwnProperty,u="~";function p(){}function b(m,r,s){this.fn=m,this.context=r,this.once=s||!1}function c(m,r,s,d,C){if(typeof s!="function")throw new TypeError("The listener must be a function");var E=new b(s,d||m,C),A=u?u+r:r;return m._events[A]?m._events[A].fn?m._events[A]=[m._events[A],E]:m._events[A].push(E):(m._events[A]=E,m._eventsCount++),m}function S(m,r){--m._eventsCount==0?m._events=new p:delete m._events[r]}function I(){this._events=new p,this._eventsCount=0}Object.create&&(p.prototype=Object.create(null),new p().__proto__||(u=!1)),I.prototype.eventNames=function(){var m,r,s=[];if(this._eventsCount===0)return s;for(r in m=this._events)n.call(m,r)&&s.push(u?r.slice(1):r);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(m)):s},I.prototype.listeners=function(m){var r=u?u+m:m,s=this._events[r];if(!s)return[];if(s.fn)return[s.fn];for(var d=0,C=s.length,E=new Array(C);d<C;d++)E[d]=s[d].fn;return E},I.prototype.listenerCount=function(m){var r=u?u+m:m,s=this._events[r];return s?s.fn?1:s.length:0},I.prototype.emit=function(m,r,s,d,C,E){var A=u?u+m:m;if(!this._events[A])return!1;var f,x,j=this._events[A],P=arguments.length;if(j.fn){switch(j.once&&this.removeListener(m,j.fn,void 0,!0),P){case 1:return j.fn.call(j.context),!0;case 2:return j.fn.call(j.context,r),!0;case 3:return j.fn.call(j.context,r,s),!0;case 4:return j.fn.call(j.context,r,s,d),!0;case 5:return j.fn.call(j.context,r,s,d,C),!0;case 6:return j.fn.call(j.context,r,s,d,C,E),!0}for(x=1,f=new Array(P-1);x<P;x++)f[x-1]=arguments[x];j.fn.apply(j.context,f)}else{var W,X=j.length;for(x=0;x<X;x++)switch(j[x].once&&this.removeListener(m,j[x].fn,void 0,!0),P){case 1:j[x].fn.call(j[x].context);break;case 2:j[x].fn.call(j[x].context,r);break;case 3:j[x].fn.call(j[x].context,r,s);break;case 4:j[x].fn.call(j[x].context,r,s,d);break;default:if(!f)for(W=1,f=new Array(P-1);W<P;W++)f[W-1]=arguments[W];j[x].fn.apply(j[x].context,f)}}return!0},I.prototype.on=function(m,r,s){return c(this,m,r,s,!1)},I.prototype.once=function(m,r,s){return c(this,m,r,s,!0)},I.prototype.removeListener=function(m,r,s,d){var C=u?u+m:m;if(!this._events[C])return this;if(!r)return S(this,C),this;var E=this._events[C];if(E.fn)E.fn!==r||d&&!E.once||s&&E.context!==s||S(this,C);else{for(var A=0,f=[],x=E.length;A<x;A++)(E[A].fn!==r||d&&!E[A].once||s&&E[A].context!==s)&&f.push(E[A]);f.length?this._events[C]=f.length===1?f[0]:f:S(this,C)}return this},I.prototype.removeAllListeners=function(m){var r;return m?(r=u?u+m:m,this._events[r]&&S(this,r)):(this._events=new p,this._eventsCount=0),this},I.prototype.off=I.prototype.removeListener,I.prototype.addListener=I.prototype.on,I.prefixed=u,I.EventEmitter=I,i.exports=I},function(i,y,t){(function(n){var u,p,b,c;function S(I){return(S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(I)}typeof self!="undefined"&&self,c=function(){return function(m){var r={};function s(d){if(r[d])return r[d].exports;var C=r[d]={i:d,l:!1,exports:{}};return m[d].call(C.exports,C,C.exports,s),C.l=!0,C.exports}return s.m=m,s.c=r,s.d=function(d,C,E){s.o(d,C)||Object.defineProperty(d,C,{configurable:!1,enumerable:!0,get:E})},s.n=function(d){var C=d&&d.__esModule?function(){return d.default}:function(){return d};return s.d(C,"a",C),C},s.o=function(d,C){return Object.prototype.hasOwnProperty.call(d,C)},s.p="",s(s.s=31)}([function(m,r,s){"use strict";var d=s(4);r.a=function(C){return Array.isArray?Array.isArray(C):Object(d.a)(C,"Array")}},function(m,r,s){"use strict";r.a=function(d){return d!==null&&typeof d!="function"&&isFinite(d.length)}},function(m,r,s){"use strict";var d=s(0),C=s(13);r.a=function(E,A){if(E){if(Object(d.a)(E))for(var f=0,x=E.length;f<x&&A(E[f],f)!==!1;f++);else if(Object(C.a)(E)){for(var j in E)if(E.hasOwnProperty(j)&&A(E[j],j)===!1)break}}}},function(m,r,s){"use strict";var d=s(4);r.a=function(C){return Object(d.a)(C,"Function")}},function(m,r,s){"use strict";var d={}.toString;r.a=function(C,E){return d.call(C)==="[object "+E+"]"}},function(m,r,s){"use strict";var d=s(4);r.a=function(C){return Object(d.a)(C,"Number")}},function(m,r,s){"use strict";r.a=function(d){return d==null}},function(m,r,s){var d=s(33).mix;m.exports={assign:d}},function(m,r,s){"use strict";var d=s(4);r.a=function(C){return Object(d.a)(C,"String")}},function(m,r,s){"use strict";var d=s(15),C=s(4);r.a=function(E){if(!Object(d.a)(E)||!Object(C.a)(E,"Object"))return!1;if(Object.getPrototypeOf(E)===null)return!0;for(var A=E;Object.getPrototypeOf(A)!==null;)A=Object.getPrototypeOf(A);return Object.getPrototypeOf(E)===A}},function(m,r,s){"use strict";var d=s(6);r.a=function(C){return Object(d.a)(C)?"":C.toString()}},function(m,r,s){var d=s(18),C=function(){function E(A,f){f===void 0&&(f={}),this.options=f,this.rootNode=d(A,f)}return E.prototype.execute=function(){throw new Error("please override this method")},E}();m.exports=C},function(m,r,s){"use strict";var d=s(1);r.a=function(C,E){return!!Object(d.a)(C)&&C.indexOf(E)>-1}},function(m,r,s){"use strict";r.a=function(d){var C=S(d);return d!==null&&C==="object"||C==="function"}},function(m,r,s){"use strict";var d=s(2),C=s(1);r.a=function(E,A){if(!Object(C.a)(E))return E;var f=[];return Object(d.a)(E,function(x,j){A(x,j)&&f.push(x)}),f}},function(m,r,s){"use strict";r.a=function(d){return S(d)==="object"&&d!==null}},function(m,r,s){"use strict";function d(C,E){for(var A in E)E.hasOwnProperty(A)&&A!=="constructor"&&E[A]!==void 0&&(C[A]=E[A])}r.a=function(C,E,A,f){return E&&d(C,E),A&&d(C,A),f&&d(C,f),C}},function(m,r,s){var d=s(30),C=["LR","RL","TB","BT","H","V"],E=["LR","RL","H"],A=C[0];m.exports=function(f,x,j){var P=x.direction||A;if(x.isHorizontal=function(lt){return E.indexOf(lt)>-1}(P),P&&C.indexOf(P)===-1)throw new TypeError("Invalid direction: "+P);if(P===C[0])j(f,x);else if(P===C[1])j(f,x),f.right2left();else if(P===C[2])j(f,x);else if(P===C[3])j(f,x),f.bottom2top();else if(P===C[4]||P===C[5]){var W=d(f,x),X=W.left,$=W.right;j(X,x),j($,x),x.isHorizontal?X.right2left():X.bottom2top(),$.translate(X.x-$.x,X.y-$.y),f.x=X.x,f.y=$.y;var ft=f.getBoundingBox();x.isHorizontal?ft.top<0&&f.translate(0,-ft.top):ft.left<0&&f.translate(-ft.left,0)}var Z=x.fixedRoot;return Z===void 0&&(Z=!0),Z&&f.translate(-(f.x+f.width/2+f.hgap),-(f.y+f.height/2+f.vgap)),f}},function(m,r,s){var d=s(7),C={getId:function(f){return f.id||f.name},getHGap:function(f){return f.hgap||18},getVGap:function(f){return f.vgap||18},getChildren:function(f){return f.children},getHeight:function(f){return f.height||36},getWidth:function(f){var x=f.label||" ";return f.width||18*x.split("").length}};function E(A,f){var x=this;if(x.vgap=x.hgap=0,A instanceof E)return A;x.data=A;var j=f.getHGap(A),P=f.getVGap(A);return x.width=f.getWidth(A),x.height=f.getHeight(A),x.id=f.getId(A),x.x=x.y=0,x.depth=0,x.children||(x.children=[]),x.addGap(j,P),x}d.assign(E.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(f,x){this.hgap+=f,this.vgap+=x,this.width+=2*f,this.height+=2*x},eachNode:function(f){for(var x,j=[this];x=j.shift();)f(x),j=x.children.concat(j)},DFTraverse:function(f){this.eachNode(f)},BFTraverse:function(f){for(var x,j=[this];x=j.shift();)f(x),j=j.concat(x.children)},getBoundingBox:function(){var f={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(x){f.left=Math.min(f.left,x.x),f.top=Math.min(f.top,x.y),f.width=Math.max(f.width,x.x+x.width),f.height=Math.max(f.height,x.y+x.height)}),f},translate:function(f,x){f===void 0&&(f=0),x===void 0&&(x=0),this.eachNode(function(j){j.x+=f,j.y+=x})},right2left:function(){var f=this.getBoundingBox();this.eachNode(function(x){x.x=x.x-2*(x.x-f.left)-x.width}),this.translate(f.width,0)},bottom2top:function(){var f=this.getBoundingBox();this.eachNode(function(x){x.y=x.y-2*(x.y-f.top)-x.height}),this.translate(0,f.height)}}),m.exports=function(A,f,x){f===void 0&&(f={});var j,P=new E(A,f=d.assign({},C,f)),W=[P];if(!x&&!A.collapsed){for(;j=W.shift();)if(!j.data.collapsed){var X=f.getChildren(j.data),$=X?X.length:0;if(j.children=new Array($),X&&$)for(var ft=0;ft<$;ft++){var Z=new E(X[ft],f);j.children[ft]=Z,W.push(Z),Z.parent=j,Z.depth=j.depth+1}}}return P}},function(m,r,s){"use strict";var d=s(6),C=s(20);r.a=function(E,A){var f=Object(C.a)(A),x=f.length;if(Object(d.a)(E))return!x;for(var j=0;j<x;j+=1){var P=f[j];if(A[P]!==E[P]||!(P in E))return!1}return!0}},function(m,r,s){"use strict";var d=s(2),C=s(3),E=Object.keys?function(A){return Object.keys(A)}:function(A){var f=[];return Object(d.a)(A,function(x,j){Object(C.a)(A)&&j==="prototype"||f.push(j)}),f};r.a=E},function(m,r,s){"use strict";var d=s(1),C=Array.prototype.splice;r.a=function(E,A){if(!Object(d.a)(E))return[];for(var f=E?A.length:0,x=f-1;f--;){var j=void 0,P=A[f];f!==x&&P===j||(j=P,C.call(E,P,1))}return E}},function(m,r,s){"use strict";var d=s(12),C=s(2);r.a=function(E){var A=[];return Object(C.a)(E,function(f){Object(d.a)(A,f)||A.push(f)}),A}},function(m,r,s){"use strict";var d=s(0),C=s(3),E=s(24);r.a=function(A,f){if(!f)return{0:A};if(!Object(C.a)(f)){var x=Object(d.a)(f)?f:f.replace(/\s+/g,"").split("*");f=function(P){for(var W="_",X=0,$=x.length;X<$;X++)W+=P[x[X]]&&P[x[X]].toString();return W}}return Object(E.a)(A,f)}},function(m,r,s){"use strict";var d=s(2),C=s(0),E=s(3),A=Object.prototype.hasOwnProperty;r.a=function(f,x){if(!x||!Object(C.a)(f))return{};var j,P={},W=Object(E.a)(x)?x:function(X){return X[x]};return Object(d.a)(f,function(X){j=W(X),A.call(P,j)?P[j].push(X):P[j]=[X]}),P}},function(m,r,s){"use strict";r.a=function(d,C){return d.hasOwnProperty(C)}},function(m,r,s){"use strict";var d=s(2),C=s(3),E=Object.values?function(A){return Object.values(A)}:function(A){var f=[];return Object(d.a)(A,function(x,j){Object(C.a)(A)&&j==="prototype"||f.push(x)}),f};r.a=E},function(m,r,s){"use strict";var d={}.toString;r.a=function(C){return d.call(C).replace(/^\[object /,"").replace(/]$/,"")}},function(m,r,s){"use strict";var d=Object.prototype;r.a=function(C){var E=C&&C.constructor;return C===(typeof E=="function"&&E.prototype||d)}},function(m,r,s){"use strict";var d=s(15),C=s(1),E=s(8);r.a=function A(f,x){if(f===x)return!0;if(!f||!x||Object(E.a)(f)||Object(E.a)(x))return!1;if(Object(C.a)(f)||Object(C.a)(x)){if(f.length!==x.length)return!1;for(var j=!0,P=0;P<f.length&&(j=A(f[P],x[P]));P++);return j}if(Object(d.a)(f)||Object(d.a)(x)){var W=Object.keys(f),X=Object.keys(x);if(W.length!==X.length)return!1;for(j=!0,P=0;P<W.length&&(j=A(f[W[P]],x[W[P]]));P++);return j}return!1}},function(m,r,s){var d=s(18);m.exports=function(C,E){for(var A=d(C.data,E,!0),f=d(C.data,E,!0),x=C.children.length,j=Math.round(x/2),P=E.getSide||function($,ft){return ft<j?"right":"left"},W=0;W<x;W++){var X=C.children[W];P(X,W)==="right"?f.children.push(X):A.children.push(X)}return A.eachNode(function($){$.isRoot()||($.side="left")}),f.eachNode(function($){$.isRoot()||($.side="right")}),{left:A,right:f}}},function(m,r,s){var d={compactBox:s(32),dendrogram:s(114),indented:s(116),mindmap:s(118)};m.exports=d},function(m,r,s){var d=s(11),C=s(113),E=s(17),A=s(7),f=function(j){var P,W;function X(){return j.apply(this,arguments)||this}return W=j,(P=X).prototype=Object.create(W.prototype),P.prototype.constructor=P,P.__proto__=W,X.prototype.execute=function(){return E(this.rootNode,this.options,C)},X}(d),x={};m.exports=function(j,P){return P=A.assign({},x,P),new f(j,P).execute()}},function(m,r,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var d=s(12);s.d(r,"contains",function(){return d.a}),s.d(r,"includes",function(){return d.a});var C=s(34);s.d(r,"difference",function(){return C.a});var E=s(35);s.d(r,"find",function(){return E.a});var A=s(36);s.d(r,"findIndex",function(){return A.a});var f=s(37);s.d(r,"firstValue",function(){return f.a});var x=s(38);s.d(r,"flatten",function(){return x.a});var j=s(39);s.d(r,"flattenDeep",function(){return j.a});var P=s(40);s.d(r,"getRange",function(){return P.a});var W=s(41);s.d(r,"pull",function(){return W.a});var X=s(21);s.d(r,"pullAt",function(){return X.a});var $=s(42);s.d(r,"reduce",function(){return $.a});var ft=s(43);s.d(r,"remove",function(){return ft.a});var Z=s(44);s.d(r,"sortBy",function(){return Z.a});var lt=s(45);s.d(r,"union",function(){return lt.a});var pt=s(22);s.d(r,"uniq",function(){return pt.a});var gt=s(46);s.d(r,"valuesOfKey",function(){return gt.a});var ut=s(47);s.d(r,"head",function(){return ut.a});var Bt=s(48);s.d(r,"last",function(){return Bt.a});var Lt=s(49);s.d(r,"startsWith",function(){return Lt.a});var St=s(50);s.d(r,"endsWith",function(){return St.a});var K=s(14);s.d(r,"filter",function(){return K.a});var dt=s(51);s.d(r,"every",function(){return dt.a});var mt=s(52);s.d(r,"some",function(){return mt.a});var bt=s(53);s.d(r,"group",function(){return bt.a});var wt=s(24);s.d(r,"groupBy",function(){return wt.a});var J=s(23);s.d(r,"groupToMap",function(){return J.a});var ct=s(54);s.d(r,"getWrapBehavior",function(){return ct.a});var it=s(55);s.d(r,"wrapBehavior",function(){return it.a});var _=s(56);s.d(r,"number2color",function(){return _.a});var R=s(57);s.d(r,"parseRadius",function(){return R.a});var Q=s(58);s.d(r,"clamp",function(){return Q.a});var k=s(59);s.d(r,"fixedBase",function(){return k.a});var g=s(60);s.d(r,"isDecimal",function(){return g.a});var O=s(61);s.d(r,"isEven",function(){return O.a});var F=s(62);s.d(r,"isInteger",function(){return F.a});var V=s(63);s.d(r,"isNegative",function(){return V.a});var rt=s(64);s.d(r,"isNumberEqual",function(){return rt.a});var ot=s(65);s.d(r,"isOdd",function(){return ot.a});var st=s(66);s.d(r,"isPositive",function(){return st.a});var Mt=s(67);s.d(r,"maxBy",function(){return Mt.a});var yt=s(68);s.d(r,"minBy",function(){return yt.a});var xt=s(69);s.d(r,"mod",function(){return xt.a});var Ot=s(70);s.d(r,"toDegree",function(){return Ot.a});var jt=s(71);s.d(r,"toInteger",function(){return jt.a});var Dt=s(72);s.d(r,"toRadian",function(){return Dt.a});var zt=s(73);s.d(r,"forIn",function(){return zt.a});var Tt=s(25);s.d(r,"has",function(){return Tt.a});var Wt=s(74);s.d(r,"hasKey",function(){return Wt.a});var Ht=s(75);s.d(r,"hasValue",function(){return Ht.a});var re=s(20);s.d(r,"keys",function(){return re.a});var pe=s(19);s.d(r,"isMatch",function(){return pe.a});var me=s(26);s.d(r,"values",function(){return me.a});var Se=s(76);s.d(r,"lowerCase",function(){return Se.a});var Le=s(77);s.d(r,"lowerFirst",function(){return Le.a});var Je=s(78);s.d(r,"substitute",function(){return Je.a});var On=s(79);s.d(r,"upperCase",function(){return On.a});var gn=s(80);s.d(r,"upperFirst",function(){return gn.a});var Wn=s(27);s.d(r,"getType",function(){return Wn.a});var kn=s(81);s.d(r,"isArguments",function(){return kn.a});var Vn=s(0);s.d(r,"isArray",function(){return Vn.a});var Dn=s(1);s.d(r,"isArrayLike",function(){return Dn.a});var Nn=s(82);s.d(r,"isBoolean",function(){return Nn.a});var Qn=s(83);s.d(r,"isDate",function(){return Qn.a});var ir=s(84);s.d(r,"isError",function(){return ir.a});var hr=s(3);s.d(r,"isFunction",function(){return hr.a});var Sr=s(85);s.d(r,"isFinite",function(){return Sr.a});var mr=s(6);s.d(r,"isNil",function(){return mr.a});var dr=s(86);s.d(r,"isNull",function(){return dr.a});var Br=s(5);s.d(r,"isNumber",function(){return Br.a});var ii=s(13);s.d(r,"isObject",function(){return ii.a});var mi=s(15);s.d(r,"isObjectLike",function(){return mi.a});var Pi=s(9);s.d(r,"isPlainObject",function(){return Pi.a});var sa=s(28);s.d(r,"isPrototype",function(){return sa.a});var Pa=s(87);s.d(r,"isRegExp",function(){return Pa.a});var Mi=s(8);s.d(r,"isString",function(){return Mi.a});var Ki=s(4);s.d(r,"isType",function(){return Ki.a});var fa=s(88);s.d(r,"isUndefined",function(){return fa.a});var oa=s(89);s.d(r,"isElement",function(){return oa.a});var pa=s(90);s.d(r,"requestAnimationFrame",function(){return pa.a});var La=s(91);s.d(r,"clearAnimationFrame",function(){return La.a});var Yr=s(92);s.d(r,"augment",function(){return Yr.a});var Sa=s(93);s.d(r,"clone",function(){return Sa.a});var Pr=s(94);s.d(r,"debounce",function(){return Pr.a});var si=s(95);s.d(r,"memoize",function(){return si.a});var ti=s(96);s.d(r,"deepMix",function(){return ti.a});var $r=s(2);s.d(r,"each",function(){return $r.a});var ui=s(97);s.d(r,"extend",function(){return ui.a});var li=s(98);s.d(r,"indexOf",function(){return li.a});var xi=s(99);s.d(r,"isEmpty",function(){return xi.a});var Ci=s(29);s.d(r,"isEqual",function(){return Ci.a});var di=s(100);s.d(r,"isEqualWith",function(){return di.a});var Ti=s(101);s.d(r,"map",function(){return Ti.a});var pi=s(102);s.d(r,"mapValues",function(){return pi.a});var Ni=s(16);s.d(r,"mix",function(){return Ni.a}),s.d(r,"assign",function(){return Ni.a});var Bi=s(103);s.d(r,"get",function(){return Bi.a});var Fi=s(104);s.d(r,"set",function(){return Fi.a});var ma=s(105);s.d(r,"pick",function(){return ma.a});var ua=s(106);s.d(r,"throttle",function(){return ua.a});var Ra=s(107);s.d(r,"toArray",function(){return Ra.a});var xa=s(10);s.d(r,"toString",function(){return xa.a});var Ma=s(108);s.d(r,"uniqueId",function(){return Ma.a});var Qi=s(109);s.d(r,"noop",function(){return Qi.a});var ka=s(110);s.d(r,"identity",function(){return ka.a});var vo=s(111);s.d(r,"size",function(){return vo.a});var za=s(112);s.d(r,"Cache",function(){return za.a})},function(m,r,s){"use strict";var d=s(14),C=s(12);r.a=function(E,A){return A===void 0&&(A=[]),Object(d.a)(E,function(f){return!Object(C.a)(A,f)})}},function(m,r,s){"use strict";var d=s(3),C=s(19),E=s(0),A=s(9);r.a=function(f,x){if(!Object(E.a)(f))return null;var j;if(Object(d.a)(x)&&(j=x),Object(A.a)(x)&&(j=function(X){return Object(C.a)(X,x)}),j){for(var P=0;P<f.length;P+=1)if(j(f[P]))return f[P]}return null}},function(m,r,s){"use strict";r.a=function(d,C,E){E===void 0&&(E=0);for(var A=E;A<d.length;A++)if(C(d[A],A))return A;return-1}},function(m,r,s){"use strict";var d=s(6),C=s(0);r.a=function(E,A){for(var f=null,x=0;x<E.length;x++){var j=E[x][A];if(!Object(d.a)(j)){f=Object(C.a)(j)?j[0]:j;break}}return f}},function(m,r,s){"use strict";var d=s(0);r.a=function(C){if(!Object(d.a)(C))return[];for(var E=[],A=0;A<C.length;A++)E=E.concat(C[A]);return E}},function(m,r,s){"use strict";var d=s(0);r.a=function C(E,A){if(A===void 0&&(A=[]),Object(d.a)(E))for(var f=0;f<E.length;f+=1)C(E[f],A);else A.push(E);return A}},function(m,r,s){"use strict";var d=s(0),C=s(14);r.a=function(E){if(!(E=Object(C.a)(E,function(j){return!isNaN(j)})).length)return{min:0,max:0};if(Object(d.a)(E[0])){for(var A=[],f=0;f<E.length;f++)A=A.concat(E[f]);E=A}var x=Math.max.apply(null,E);return{min:Math.min.apply(null,E),max:x}}},function(m,r,s){"use strict";var d=Array.prototype,C=d.splice,E=d.indexOf;r.a=function(A){for(var f=[],x=1;x<arguments.length;x++)f[x-1]=arguments[x];for(var j=0;j<f.length;j++)for(var P=f[j],W=-1;(W=E.call(A,P))>-1;)C.call(A,W,1);return A}},function(m,r,s){"use strict";var d=s(2),C=s(0),E=s(9);r.a=function(A,f,x){if(!Object(C.a)(A)&&!Object(E.a)(A))return A;var j=x;return Object(d.a)(A,function(P,W){j=f(j,P,W)}),j}},function(m,r,s){"use strict";var d=s(1),C=s(21);r.a=function(E,A){var f=[];if(!Object(d.a)(E))return f;for(var x=-1,j=[],P=E.length;++x<P;){var W=E[x];A(W,x,E)&&(f.push(W),j.push(x))}return Object(C.a)(E,j),f}},function(m,r,s){"use strict";var d=s(0),C=s(8),E=s(3);r.a=function(A,f){var x;if(Object(E.a)(f))x=function(W,X){return f(W)-f(X)};else{var j=[];Object(C.a)(f)?j.push(f):Object(d.a)(f)&&(j=f),x=function(W,X){for(var $=0;$<j.length;$+=1){var ft=j[$];if(W[ft]>X[ft])return 1;if(W[ft]<X[ft])return-1}return 0}}return A.sort(x),A}},function(m,r,s){"use strict";var d=s(22);r.a=function(){for(var C=[],E=0;E<arguments.length;E++)C[E]=arguments[E];return Object(d.a)([].concat.apply([],C))}},function(m,r,s){"use strict";var d=s(2),C=s(0),E=s(6);r.a=function(A,f){var x=[],j={};return A.forEach(function(P){var W=P[f];Object(E.a)(W)||(Object(C.a)(W)||(W=[W]),Object(d.a)(W,function(X){j[X]||(x.push(X),j[X]=!0)}))}),x}},function(m,r,s){"use strict";r.a=function(C){if(Object(d.a)(C))return C[0]};var d=s(1)},function(m,r,s){"use strict";r.a=function(C){if(Object(d.a)(C))return C[C.length-1]};var d=s(1)},function(m,r,s){"use strict";var d=s(0),C=s(8);r.a=function(E,A){return!(!Object(d.a)(E)&&!Object(C.a)(E))&&E[0]===A}},function(m,r,s){"use strict";var d=s(0),C=s(8);r.a=function(E,A){return!(!Object(d.a)(E)&&!Object(C.a)(E))&&E[E.length-1]===A}},function(m,r,s){"use strict";r.a=function(d,C){for(var E=0;E<d.length;E++)if(!C(d[E],E))return!1;return!0}},function(m,r,s){"use strict";r.a=function(d,C){for(var E=0;E<d.length;E++)if(C(d[E],E))return!0;return!1}},function(m,r,s){"use strict";var d=s(23);r.a=function(C,E){if(!E)return[C];var A=Object(d.a)(C,E),f=[];for(var x in A)f.push(A[x]);return f}},function(m,r,s){"use strict";r.a=function(d,C){return d["_wrap_"+C]}},function(m,r,s){"use strict";r.a=function(d,C){if(d["_wrap_"+C])return d["_wrap_"+C];var E=function(f){d[C](f)};return d["_wrap_"+C]=E,E}},function(m,r,s){"use strict";var d={};r.a=function(C){var E=d[C];if(!E){for(var A=C.toString(16),f=A.length;f<6;f++)A="0"+A;E="#"+A,d[C]=E}return E}},function(m,r,s){"use strict";var d=s(0);r.a=function(C){var E=0,A=0,f=0,x=0;return Object(d.a)(C)?C.length===1?E=A=f=x=C[0]:C.length===2?(E=f=C[0],A=x=C[1]):C.length===3?(E=C[0],A=x=C[1],f=C[2]):(E=C[0],A=C[1],f=C[2],x=C[3]):E=A=f=x=C,{r1:E,r2:A,r3:f,r4:x}}},function(m,r,s){"use strict";r.a=function(d,C,E){return d<C?C:d>E?E:d}},function(m,r,s){"use strict";r.a=function(d,C){var E=C.toString(),A=E.indexOf(".");if(A===-1)return Math.round(d);var f=E.substr(A+1).length;return f>20&&(f=20),parseFloat(d.toFixed(f))}},function(m,r,s){"use strict";var d=s(5);r.a=function(C){return Object(d.a)(C)&&C%1!=0}},function(m,r,s){"use strict";var d=s(5);r.a=function(C){return Object(d.a)(C)&&C%2==0}},function(m,r,s){"use strict";var d=s(5),C=Number.isInteger?Number.isInteger:function(E){return Object(d.a)(E)&&E%1==0};r.a=C},function(m,r,s){"use strict";var d=s(5);r.a=function(C){return Object(d.a)(C)&&C<0}},function(m,r,s){"use strict";r.a=function(d,C,E){return E===void 0&&(E=1e-5),Math.abs(d-C)<E}},function(m,r,s){"use strict";var d=s(5);r.a=function(C){return Object(d.a)(C)&&C%2!=0}},function(m,r,s){"use strict";var d=s(5);r.a=function(C){return Object(d.a)(C)&&C>0}},function(m,r,s){"use strict";var d=s(2),C=s(0),E=s(3);r.a=function(A,f){if(Object(C.a)(A)){var x,j,P=A[0];return x=Object(E.a)(f)?f(A[0]):A[0][f],Object(d.a)(A,function(W){(j=Object(E.a)(f)?f(W):W[f])>x&&(P=W,x=j)}),P}}},function(m,r,s){"use strict";var d=s(2),C=s(0),E=s(3);r.a=function(A,f){if(Object(C.a)(A)){var x,j,P=A[0];return x=Object(E.a)(f)?f(A[0]):A[0][f],Object(d.a)(A,function(W){(j=Object(E.a)(f)?f(W):W[f])<x&&(P=W,x=j)}),P}}},function(m,r,s){"use strict";r.a=function(d,C){return(d%C+C)%C}},function(m,r,s){"use strict";var d=180/Math.PI;r.a=function(C){return d*C}},function(m,r,s){"use strict";r.a=parseInt},function(m,r,s){"use strict";var d=Math.PI/180;r.a=function(C){return d*C}},function(m,r,s){"use strict";var d=s(2);r.a=d.a},function(m,r,s){"use strict";var d=s(25);r.a=d.a},function(m,r,s){"use strict";var d=s(12),C=s(26);r.a=function(E,A){return Object(d.a)(Object(C.a)(E),A)}},function(m,r,s){"use strict";var d=s(10);r.a=function(C){return Object(d.a)(C).toLowerCase()}},function(m,r,s){"use strict";var d=s(10);r.a=function(C){var E=Object(d.a)(C);return E.charAt(0).toLowerCase()+E.substring(1)}},function(m,r,s){"use strict";r.a=function(d,C){return d&&C?d.replace(/\\?\{([^{}]+)\}/g,function(E,A){return E.charAt(0)==="\\"?E.slice(1):C[A]===void 0?"":C[A]}):d}},function(m,r,s){"use strict";var d=s(10);r.a=function(C){return Object(d.a)(C).toUpperCase()}},function(m,r,s){"use strict";var d=s(10);r.a=function(C){var E=Object(d.a)(C);return E.charAt(0).toUpperCase()+E.substring(1)}},function(m,r,s){"use strict";var d=s(4);r.a=function(C){return Object(d.a)(C,"Arguments")}},function(m,r,s){"use strict";var d=s(4);r.a=function(C){return Object(d.a)(C,"Boolean")}},function(m,r,s){"use strict";var d=s(4);r.a=function(C){return Object(d.a)(C,"Date")}},function(m,r,s){"use strict";var d=s(4);r.a=function(C){return Object(d.a)(C,"Error")}},function(m,r,s){"use strict";var d=s(5);r.a=function(C){return Object(d.a)(C)&&isFinite(C)}},function(m,r,s){"use strict";r.a=function(d){return d===null}},function(m,r,s){"use strict";var d=s(4);r.a=function(C){return Object(d.a)(C,"RegExp")}},function(m,r,s){"use strict";r.a=function(d){return d===void 0}},function(m,r,s){"use strict";r.a=function(d){return d instanceof Element||d instanceof HTMLDocument}},function(m,r,s){"use strict";r.a=function(d){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(C){return setTimeout(C,16)})(d)}},function(m,r,s){"use strict";r.a=function(d){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(d)}},function(m,r,s){"use strict";var d=s(16),C=s(3);r.a=function(){for(var E=[],A=0;A<arguments.length;A++)E[A]=arguments[A];for(var f=E[0],x=1;x<E.length;x++){var j=E[x];Object(C.a)(j)&&(j=j.prototype),Object(d.a)(f.prototype,j)}}},function(m,r,s){"use strict";var d=s(0);r.a=function C(E){if(S(E)!=="object"||E===null)return E;var A;if(Object(d.a)(E)){A=[];for(var f=0,x=E.length;f<x;f++)S(E[f])==="object"&&E[f]!=null?A[f]=C(E[f]):A[f]=E[f]}else for(var j in A={},E)S(E[j])==="object"&&E[j]!=null?A[j]=C(E[j]):A[j]=E[j];return A}},function(m,r,s){"use strict";r.a=function(d,C,E){var A;return function(){var f=this,x=arguments,j=function(){A=null,E||d.apply(f,x)},P=E&&!A;clearTimeout(A),A=setTimeout(j,C),P&&d.apply(f,x)}}},function(m,r,s){"use strict";var d=s(3);r.a=function(C,E){if(!Object(d.a)(C))throw new TypeError("Expected a function");var A=function f(){for(var x=[],j=0;j<arguments.length;j++)x[j]=arguments[j];var P=E?E.apply(this,x):x[0],W=f.cache;if(W.has(P))return W.get(P);var X=C.apply(this,x);return W.set(P,X),X};return A.cache=new Map,A}},function(m,r,s){"use strict";var d=s(0),C=s(9);function E(A,f,x,j){for(var P in x=x||0,j=j||5,f)if(f.hasOwnProperty(P)){var W=f[P];W!==null&&Object(C.a)(W)?(Object(C.a)(A[P])||(A[P]={}),x<j?E(A[P],W,x+1,j):A[P]=f[P]):Object(d.a)(W)?(A[P]=[],A[P]=A[P].concat(W)):W!==void 0&&(A[P]=W)}}r.a=function(A){for(var f=[],x=1;x<arguments.length;x++)f[x-1]=arguments[x];for(var j=0;j<f.length;j+=1)E(A,f[j]);return A}},function(m,r,s){"use strict";var d=s(16),C=s(3);r.a=function(E,A,f,x){Object(C.a)(A)||(f=A,A=E,E=function(){});var j=Object.create?function(W,X){return Object.create(W,{constructor:{value:X}})}:function(W,X){function $(){}$.prototype=W;var ft=new $;return ft.constructor=X,ft},P=j(A.prototype,E);return E.prototype=Object(d.a)(P,E.prototype),E.superclass=j(A.prototype,A),Object(d.a)(P,f),Object(d.a)(E,x),E}},function(m,r,s){"use strict";var d=s(1);r.a=function(C,E){if(!Object(d.a)(C))return-1;var A=Array.prototype.indexOf;if(A)return A.call(C,E);for(var f=-1,x=0;x<C.length;x++)if(C[x]===E){f=x;break}return f}},function(m,r,s){"use strict";var d=s(6),C=s(1),E=s(27),A=s(28),f=Object.prototype.hasOwnProperty;r.a=function(x){if(Object(d.a)(x))return!0;if(Object(C.a)(x))return!x.length;var j=Object(E.a)(x);if(j==="Map"||j==="Set")return!x.size;if(Object(A.a)(x))return!Object.keys(x).length;for(var P in x)if(f.call(x,P))return!1;return!0}},function(m,r,s){"use strict";var d=s(3),C=s(29);r.a=function(E,A,f){return Object(d.a)(f)?!!f(E,A):Object(C.a)(E,A)}},function(m,r,s){"use strict";var d=s(2),C=s(1);r.a=function(E,A){if(!Object(C.a)(E))return E;var f=[];return Object(d.a)(E,function(x,j){f.push(A(x,j))}),f}},function(m,r,s){"use strict";var d=s(6),C=s(13),E=function(f){return f};r.a=function(A,f){f===void 0&&(f=E);var x={};return Object(C.a)(A)&&!Object(d.a)(A)&&Object.keys(A).forEach(function(j){x[j]=f(A[j],j)}),x}},function(m,r,s){"use strict";var d=s(8);r.a=function(C,E,A){for(var f=0,x=Object(d.a)(E)?E.split("."):E;C&&f<x.length;)C=C[x[f++]];return C===void 0||f<x.length?A:C}},function(m,r,s){"use strict";var d=s(13),C=s(8),E=s(5);r.a=function(A,f,x){var j=A,P=Object(C.a)(f)?f.split("."):f;return P.forEach(function(W,X){X<P.length-1?(Object(d.a)(j[W])||(j[W]=Object(E.a)(P[X+1])?[]:{}),j=j[W]):j[W]=x}),A}},function(m,r,s){"use strict";var d=s(2),C=s(9),E=Object.prototype.hasOwnProperty;r.a=function(A,f){if(A===null||!Object(C.a)(A))return{};var x={};return Object(d.a)(f,function(j){E.call(A,j)&&(x[j]=A[j])}),x}},function(m,r,s){"use strict";r.a=function(d,C,E){var A,f,x,j,P=0;E||(E={});var W=function(){P=E.leading===!1?0:Date.now(),A=null,j=d.apply(f,x),A||(f=x=null)},X=function(){var ft=Date.now();P||E.leading!==!1||(P=ft);var Z=C-(ft-P);return f=this,x=arguments,Z<=0||Z>C?(A&&(clearTimeout(A),A=null),P=ft,j=d.apply(f,x),A||(f=x=null)):A||E.trailing===!1||(A=setTimeout(W,Z)),j};return X.cancel=function(){clearTimeout(A),P=0,A=f=x=null},X}},function(m,r,s){"use strict";var d=s(1);r.a=function(C){return Object(d.a)(C)?Array.prototype.slice.call(C):[]}},function(m,r,s){"use strict";var d={};r.a=function(C){return d[C=C||"g"]?d[C]+=1:d[C]=1,C+d[C]}},function(m,r,s){"use strict";r.a=function(){}},function(m,r,s){"use strict";r.a=function(d){return d}},function(m,r,s){"use strict";r.a=function(E){return Object(d.a)(E)?0:Object(C.a)(E)?E.length:Object.keys(E).length};var d=s(6),C=s(1)},function(m,r,s){"use strict";var d=function(){function C(){this.map={}}return C.prototype.has=function(E){return this.map[E]!==void 0},C.prototype.get=function(E,A){var f=this.map[E];return f===void 0?A:f},C.prototype.set=function(E,A){this.map[E]=A},C.prototype.clear=function(){this.map={}},C.prototype.delete=function(E){delete this.map[E]},C.prototype.size=function(){return Object.keys(this.map).length},C}();r.a=d},function(m,r){function s(C,E,A,f){f===void 0&&(f=[]);var x=this;x.w=C||0,x.h=E||0,x.y=A||0,x.x=0,x.c=f||[],x.cs=f.length,x.prelim=0,x.mod=0,x.shift=0,x.change=0,x.tl=null,x.tr=null,x.el=null,x.er=null,x.msel=0,x.mser=0}function d(C,E){var A=function f(x,j){var P=j?x.y:x.x;return x.children.forEach(function(W){P=Math.min(f(W,j),P)}),P}(C,E);(function f(x,j,P){P?x.y+=j:x.x+=j,x.children.forEach(function(W){f(W,j,P)})})(C,-A,E)}s.fromNode=function(C,E){if(!C)return null;var A=[];return C.children.forEach(function(f){A.push(s.fromNode(f,E))}),E?new s(C.height,C.width,C.x,A):new s(C.width,C.height,C.y,A)},m.exports=function(C,E){E===void 0&&(E={});var A=E.isHorizontal;function f(Z){Z.cs===0?(Z.el=Z,Z.er=Z,Z.msel=Z.mser=0):(Z.el=Z.c[0].el,Z.msel=Z.c[0].msel,Z.er=Z.c[Z.cs-1].er,Z.mser=Z.c[Z.cs-1].mser)}function x(Z,lt,pt){for(var gt=Z.c[lt-1],ut=gt.mod,Bt=Z.c[lt],Lt=Bt.mod;gt!==null&&Bt!==null;){X(gt)>pt.low&&(pt=pt.nxt);var St=ut+gt.prelim+gt.w-(Lt+Bt.prelim);St>0&&(Lt+=St,j(Z,lt,pt.index,St));var K=X(gt),dt=X(Bt);K<=dt&&(gt=W(gt))!==null&&(ut+=gt.mod),K>=dt&&(Bt=P(Bt))!==null&&(Lt+=Bt.mod)}!gt&&Bt?function(mt,bt,wt,J){var ct=mt.c[0].el;ct.tl=wt;var it=J-wt.mod-mt.c[0].msel;ct.mod+=it,ct.prelim-=it,mt.c[0].el=mt.c[bt].el,mt.c[0].msel=mt.c[bt].msel}(Z,lt,Bt,Lt):gt&&!Bt&&function(mt,bt,wt,J){var ct=mt.c[bt].er;ct.tr=wt;var it=J-wt.mod-mt.c[bt].mser;ct.mod+=it,ct.prelim-=it,mt.c[bt].er=mt.c[bt-1].er,mt.c[bt].mser=mt.c[bt-1].mser}(Z,lt,gt,ut)}function j(Z,lt,pt,gt){Z.c[lt].mod+=gt,Z.c[lt].msel+=gt,Z.c[lt].mser+=gt,function(ut,Bt,Lt,St){if(Lt!==Bt-1){var K=Bt-Lt;ut.c[Lt+1].shift+=St/K,ut.c[Bt].shift-=St/K,ut.c[Bt].change-=St-St/K}}(Z,lt,pt,gt)}function P(Z){return Z.cs===0?Z.tl:Z.c[0]}function W(Z){return Z.cs===0?Z.tr:Z.c[Z.cs-1]}function X(Z){return Z.y+Z.h}function $(Z,lt,pt){for(;pt!==null&&Z>=pt.low;)pt=pt.nxt;return{low:Z,index:lt,nxt:pt}}(function Z(lt,pt,gt){gt===void 0&&(gt=0),pt?(lt.x=gt,gt+=lt.width):(lt.y=gt,gt+=lt.height),lt.children.forEach(function(ut){Z(ut,pt,gt)})})(C,A);var ft=s.fromNode(C,A);return function Z(lt){if(lt.cs!==0){Z(lt.c[0]);for(var pt=$(X(lt.c[0].el),0,null),gt=1;gt<lt.cs;++gt){Z(lt.c[gt]);var ut=X(lt.c[gt].er);x(lt,gt,pt),pt=$(ut,gt,pt)}(function(Bt){Bt.prelim=(Bt.c[0].prelim+Bt.c[0].mod+Bt.c[Bt.cs-1].mod+Bt.c[Bt.cs-1].prelim+Bt.c[Bt.cs-1].w)/2-Bt.w/2})(lt),f(lt)}else f(lt)}(ft),function Z(lt,pt){pt+=lt.mod,lt.x=lt.prelim+pt,function(ut){for(var Bt=0,Lt=0,St=0;St<ut.cs;St++)Bt+=ut.c[St].shift,Lt+=Bt+ut.c[St].change,ut.c[St].mod+=Lt}(lt);for(var gt=0;gt<lt.cs;gt++)Z(lt.c[gt],pt)}(ft,0),function Z(lt,pt,gt){gt?pt.y=lt.x:pt.x=lt.x,lt.c.forEach(function(ut,Bt){Z(ut,pt.children[Bt],gt)})}(ft,C,A),d(C,A),C}},function(m,r,s){var d=s(11),C=s(115),E=s(17),A=s(7),f=function(j){var P,W;function X(){return j.apply(this,arguments)||this}return W=j,(P=X).prototype=Object.create(W.prototype),P.prototype.constructor=P,P.__proto__=W,X.prototype.execute=function(){return this.rootNode.width=0,E(this.rootNode,this.options,C)},X}(d),x={};m.exports=function(j,P){return P=A.assign({},x,P),new f(j,P).execute()}},function(m,r,s){var d=s(7);function C(A,f){A===void 0&&(A=0),f===void 0&&(f=[]);var x=this;x.x=x.y=0,x.leftChild=x.rightChild=null,x.height=0,x.children=f}var E={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};m.exports=function(A,f){f===void 0&&(f={}),f=d.assign({},E,f);var x,j=0,P=function W(X){if(!X)return null;X.width=0,X.depth&&X.depth>j&&(j=X.depth);var $=X.children,ft=$.length,Z=new C(X.height,[]);return $.forEach(function(lt,pt){var gt=W(lt);Z.children.push(gt),pt===0&&(Z.leftChild=gt),pt===ft-1&&(Z.rightChild=gt)}),Z.originNode=X,Z.isLeaf=X.isLeaf(),Z}(A);return function W(X){if(X.isLeaf||X.children.length===0)X.drawingDepth=j;else{var $=X.children.map(function(Z){return W(Z)}),ft=Math.min.apply(null,$);X.drawingDepth=ft-1}return X.drawingDepth}(P),function W(X){X.x=X.drawingDepth*f.rankSep,X.isLeaf?(X.y=0,x&&(X.y=x.y+x.height+f.nodeSep,X.originNode.parent!==x.originNode.parent&&(X.y+=f.subTreeSep)),x=X):(X.children.forEach(function($){W($)}),X.y=(X.leftChild.y+X.rightChild.y)/2)}(P),function W(X,$,ft){ft?($.x=X.x,$.y=X.y):($.x=X.y,$.y=X.x),X.children.forEach(function(Z,lt){W(Z,$.children[lt],ft)})}(P,A,f.isHorizontal),A}},function(m,r,s){var d=s(11),C=s(117),E=s(30),A=s(7),f=["LR","RL","H"],x=f[0],j=function(W){var X,$;function ft(){return W.apply(this,arguments)||this}return $=W,(X=ft).prototype=Object.create($.prototype),X.prototype.constructor=X,X.__proto__=$,ft.prototype.execute=function(){var Z=this.options,lt=this.rootNode;Z.isHorizontal=!0;var pt=Z.indent,gt=pt===void 0?20:pt,ut=Z.dropCap,Bt=ut===void 0||ut,Lt=Z.direction||x;if(Lt&&f.indexOf(Lt)===-1)throw new TypeError("Invalid direction: "+Lt);if(Lt===f[0])C(lt,gt,Bt);else if(Lt===f[1])C(lt,gt,Bt),lt.right2left();else if(Lt===f[2]){var St=E(lt,Z),K=St.left,dt=St.right;C(K,gt,Bt),K.right2left(),C(dt,gt,Bt);var mt=K.getBoundingBox();dt.translate(mt.width,0),lt.x=dt.x-lt.width/2}return lt},ft}(d),P={};m.exports=function(W,X){return X=A.assign({},P,X),new j(W,X).execute()}},function(m,r){m.exports=function(s,d,C){var E=null;s.eachNode(function(A){(function(f,x,j,P){if(!P)try{if(f.id===f.parent.children[0].id)return f.x+=j*f.depth,void(f.y=x?x.y:0)}catch(W){}f.x+=j*f.depth,f.y=x?x.y+x.height:0})(A,E,d,C),E=A})}},function(m,r,s){var d=s(11),C=s(119),E=s(17),A=s(7),f=function(j){var P,W;function X(){return j.apply(this,arguments)||this}return W=j,(P=X).prototype=Object.create(W.prototype),P.prototype.constructor=P,P.__proto__=W,X.prototype.execute=function(){return E(this.rootNode,this.options,C)},X}(d),x={};m.exports=function(j,P){return P=A.assign({},x,P),new f(j,P).execute()}},function(m,r,s){var d=s(7),C={getSubTreeSep:function(){return 0}};m.exports=function(E,A){A===void 0&&(A={}),A=d.assign({},C,A),E.parent={x:0,width:0,height:0,y:0},E.BFTraverse(function(f){f.x=f.parent.x+f.parent.width}),E.parent=null,function f(x,j){var P=0;return x.children.length?x.children.forEach(function(W){P+=f(W,j)}):P=x.height,x._subTreeSep=j.getSubTreeSep(x.data),x.totalHeight=Math.max(x.height,P)+2*x._subTreeSep,x.totalHeight}(E,A),E.startY=0,E.y=E.totalHeight/2-E.height/2,E.eachNode(function(f){var x=f.children,j=x.length;if(j){var P=x[0];if(P.startY=f.startY+f._subTreeSep,j===1)P.y=f.y+f.height/2-P.height/2;else{P.y=P.startY+P.totalHeight/2-P.height/2;for(var W=1;W<j;W++){var X=x[W];X.startY=x[W-1].startY+x[W-1].totalHeight,X.y=X.startY+X.totalHeight/2-X.height/2}}}}),function f(x){var j=x.children,P=j.length;if(P){j.forEach(function(lt){f(lt)});var W=j[0],X=j[P-1],$=X.y-W.y+X.height,ft=0;if(j.forEach(function(lt){ft+=lt.totalHeight}),$>x.height)x.y=W.y+$/2-x.height/2;else if(j.length!==1||x.height>ft){var Z=x.y+(x.height-$)/2-W.y;j.forEach(function(lt){lt.translate(0,Z)})}else x.y=(W.y+W.height/2+X.y+X.height/2)/2-x.height/2}}(E)}}])},S(y)==="object"&&S(n)==="object"?n.exports=c():(p=[],(b=typeof(u=c)=="function"?u.apply(y,p):u)===void 0||(n.exports=b))}).call(this,t(86)(i))},function(i,y){},function(i,y){},function(i,y){var t,n,u=i.exports={};function p(){throw new Error("setTimeout has not been defined")}function b(){throw new Error("clearTimeout has not been defined")}function c(A){if(t===setTimeout)return setTimeout(A,0);if((t===p||!t)&&setTimeout)return t=setTimeout,setTimeout(A,0);try{return t(A,0)}catch(f){try{return t.call(null,A,0)}catch(x){return t.call(this,A,0)}}}(function(){try{t=typeof setTimeout=="function"?setTimeout:p}catch(A){t=p}try{n=typeof clearTimeout=="function"?clearTimeout:b}catch(A){n=b}})();var S,I=[],m=!1,r=-1;function s(){m&&S&&(m=!1,S.length?I=S.concat(I):r=-1,I.length&&d())}function d(){if(!m){var A=c(s);m=!0;for(var f=I.length;f;){for(S=I,I=[];++r<f;)S&&S[r].run();r=-1,f=I.length}S=null,m=!1,function(x){if(n===clearTimeout)return clearTimeout(x);if((n===b||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(x);try{n(x)}catch(j){try{return n.call(null,x)}catch(P){return n.call(this,x)}}}(A)}}function C(A,f){this.fun=A,this.array=f}function E(){}u.nextTick=function(A){var f=new Array(arguments.length-1);if(arguments.length>1)for(var x=1;x<arguments.length;x++)f[x-1]=arguments[x];I.push(new C(A,f)),I.length!==1||m||c(d)},C.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=E,u.addListener=E,u.once=E,u.off=E,u.removeListener=E,u.removeAllListeners=E,u.emit=E,u.prependListener=E,u.prependOnceListener=E,u.listeners=function(A){return[]},u.binding=function(A){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(A){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(i,y,t){"use strict";var n=t(1),u=function(p){function b(){return p!==null&&p.apply(this,arguments)||this}return Object(n.b)(b,p),b.prototype.isGroup=function(){return!0},b.prototype.isEntityGroup=function(){return!1},b.prototype.clone=function(){for(var c=p.prototype.clone.call(this),S=this.getChildren(),I=0;I<S.length;I++){var m=S[I];c.add(m.clone())}return c},b}(t(117).a);y.a=u},function(i,y,t){"use strict";var n=t(1),u=t(118),p=t(39),b=function(c){function S(I){return c.call(this,I)||this}return Object(n.b)(S,c),S.prototype._isInBBox=function(I,m){var r=this.getBBox();return r.minX<=I&&r.maxX>=I&&r.minY<=m&&r.maxY>=m},S.prototype.afterAttrsChange=function(I){c.prototype.afterAttrsChange.call(this,I),this.clearCacheBBox()},S.prototype.getBBox=function(){var I=this.cfg.bbox;return I||(I=this.calculateBBox(),this.set("bbox",I)),I},S.prototype.getCanvasBBox=function(){var I=this.cfg.canvasBBox;return I||(I=this.calculateCanvasBBox(),this.set("canvasBBox",I)),I},S.prototype.applyMatrix=function(I){c.prototype.applyMatrix.call(this,I),this.set("canvasBBox",null)},S.prototype.calculateCanvasBBox=function(){var I=this.getBBox(),m=this.getTotalMatrix(),r=I.minX,s=I.minY,d=I.maxX,C=I.maxY;if(m){var E=Object(p.c)(m,[I.minX,I.minY]),A=Object(p.c)(m,[I.maxX,I.minY]),f=Object(p.c)(m,[I.minX,I.maxY]),x=Object(p.c)(m,[I.maxX,I.maxY]);r=Math.min(E[0],A[0],f[0],x[0]),d=Math.max(E[0],A[0],f[0],x[0]),s=Math.min(E[1],A[1],f[1],x[1]),C=Math.max(E[1],A[1],f[1],x[1])}var j=this.attrs;if(j.shadowColor){var P=j.shadowBlur,W=P===void 0?0:P,X=j.shadowOffsetX,$=X===void 0?0:X,ft=j.shadowOffsetY,Z=ft===void 0?0:ft,lt=r-W+$,pt=d+W+$,gt=s-W+Z,ut=C+W+Z;r=Math.min(r,lt),d=Math.max(d,pt),s=Math.min(s,gt),C=Math.max(C,ut)}return{x:r,y:s,minX:r,minY:s,maxX:d,maxY:C,width:d-r,height:C-s}},S.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},S.prototype.isClipShape=function(){return this.get("isClipShape")},S.prototype.isInShape=function(I,m){return!1},S.prototype.isOnlyHitBox=function(){return!1},S.prototype.isHit=function(I,m){var r=this.get("startArrowShape"),s=this.get("endArrowShape"),d=[I,m,1],C=(d=this.invertFromMatrix(d))[0],E=d[1],A=this._isInBBox(C,E);return this.isOnlyHitBox()?A:!!(A&&!this.isClipped(C,E)&&(this.isInShape(C,E)||r&&r.isHit(C,E)||s&&s.isHit(C,E)))},S}(u.a);y.a=b},function(i,y,t){var n=t(268),u={};for(var p in n)n.hasOwnProperty(p)&&(u[n[p]]=p);var b=i.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var c in b)if(b.hasOwnProperty(c)){if(!("channels"in b[c]))throw new Error("missing channels property: "+c);if(!("labels"in b[c]))throw new Error("missing channel labels property: "+c);if(b[c].labels.length!==b[c].channels)throw new Error("channel and label counts mismatch: "+c);var S=b[c].channels,I=b[c].labels;delete b[c].channels,delete b[c].labels,Object.defineProperty(b[c],"channels",{value:S}),Object.defineProperty(b[c],"labels",{value:I})}b.rgb.hsl=function(m){var r,s,d=m[0]/255,C=m[1]/255,E=m[2]/255,A=Math.min(d,C,E),f=Math.max(d,C,E),x=f-A;return f===A?r=0:d===f?r=(C-E)/x:C===f?r=2+(E-d)/x:E===f&&(r=4+(d-C)/x),(r=Math.min(60*r,360))<0&&(r+=360),s=(A+f)/2,[r,100*(f===A?0:s<=.5?x/(f+A):x/(2-f-A)),100*s]},b.rgb.hsv=function(m){var r,s,d,C,E,A=m[0]/255,f=m[1]/255,x=m[2]/255,j=Math.max(A,f,x),P=j-Math.min(A,f,x),W=function($){return(j-$)/6/P+.5};return P===0?C=E=0:(E=P/j,r=W(A),s=W(f),d=W(x),A===j?C=d-s:f===j?C=1/3+r-d:x===j&&(C=2/3+s-r),C<0?C+=1:C>1&&(C-=1)),[360*C,100*E,100*j]},b.rgb.hwb=function(m){var r=m[0],s=m[1],d=m[2];return[b.rgb.hsl(m)[0],100*(1/255*Math.min(r,Math.min(s,d))),100*(d=1-1/255*Math.max(r,Math.max(s,d)))]},b.rgb.cmyk=function(m){var r,s=m[0]/255,d=m[1]/255,C=m[2]/255;return[100*((1-s-(r=Math.min(1-s,1-d,1-C)))/(1-r)||0),100*((1-d-r)/(1-r)||0),100*((1-C-r)/(1-r)||0),100*r]},b.rgb.keyword=function(m){var r=u[m];if(r)return r;var s,d,C,E=1/0;for(var A in n)if(n.hasOwnProperty(A)){var f=n[A],x=(d=m,C=f,Math.pow(d[0]-C[0],2)+Math.pow(d[1]-C[1],2)+Math.pow(d[2]-C[2],2));x<E&&(E=x,s=A)}return s},b.keyword.rgb=function(m){return n[m]},b.rgb.xyz=function(m){var r=m[0]/255,s=m[1]/255,d=m[2]/255;return[100*(.4124*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.3576*(s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92)+.1805*(d=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92)),100*(.2126*r+.7152*s+.0722*d),100*(.0193*r+.1192*s+.9505*d)]},b.rgb.lab=function(m){var r=b.rgb.xyz(m),s=r[0],d=r[1],C=r[2];return d/=100,C/=108.883,s=(s/=95.047)>.008856?Math.pow(s,1/3):7.787*s+16/116,[116*(d=d>.008856?Math.pow(d,1/3):7.787*d+16/116)-16,500*(s-d),200*(d-(C=C>.008856?Math.pow(C,1/3):7.787*C+16/116))]},b.hsl.rgb=function(m){var r,s,d,C,E,A=m[0]/360,f=m[1]/100,x=m[2]/100;if(f===0)return[E=255*x,E,E];r=2*x-(s=x<.5?x*(1+f):x+f-x*f),C=[0,0,0];for(var j=0;j<3;j++)(d=A+1/3*-(j-1))<0&&d++,d>1&&d--,E=6*d<1?r+6*(s-r)*d:2*d<1?s:3*d<2?r+(s-r)*(2/3-d)*6:r,C[j]=255*E;return C},b.hsl.hsv=function(m){var r=m[0],s=m[1]/100,d=m[2]/100,C=s,E=Math.max(d,.01);return s*=(d*=2)<=1?d:2-d,C*=E<=1?E:2-E,[r,100*(d===0?2*C/(E+C):2*s/(d+s)),100*((d+s)/2)]},b.hsv.rgb=function(m){var r=m[0]/60,s=m[1]/100,d=m[2]/100,C=Math.floor(r)%6,E=r-Math.floor(r),A=255*d*(1-s),f=255*d*(1-s*E),x=255*d*(1-s*(1-E));switch(d*=255,C){case 0:return[d,x,A];case 1:return[f,d,A];case 2:return[A,d,x];case 3:return[A,f,d];case 4:return[x,A,d];case 5:return[d,A,f]}},b.hsv.hsl=function(m){var r,s,d,C=m[0],E=m[1]/100,A=m[2]/100,f=Math.max(A,.01);return d=(2-E)*A,s=E*f,[C,100*(s=(s/=(r=(2-E)*f)<=1?r:2-r)||0),100*(d/=2)]},b.hwb.rgb=function(m){var r,s,d,C,E,A,f,x=m[0]/360,j=m[1]/100,P=m[2]/100,W=j+P;switch(W>1&&(j/=W,P/=W),d=6*x-(r=Math.floor(6*x)),(1&r)!=0&&(d=1-d),C=j+d*((s=1-P)-j),r){default:case 6:case 0:E=s,A=C,f=j;break;case 1:E=C,A=s,f=j;break;case 2:E=j,A=s,f=C;break;case 3:E=j,A=C,f=s;break;case 4:E=C,A=j,f=s;break;case 5:E=s,A=j,f=C}return[255*E,255*A,255*f]},b.cmyk.rgb=function(m){var r=m[0]/100,s=m[1]/100,d=m[2]/100,C=m[3]/100;return[255*(1-Math.min(1,r*(1-C)+C)),255*(1-Math.min(1,s*(1-C)+C)),255*(1-Math.min(1,d*(1-C)+C))]},b.xyz.rgb=function(m){var r,s,d,C=m[0]/100,E=m[1]/100,A=m[2]/100;return s=-.9689*C+1.8758*E+.0415*A,d=.0557*C+-.204*E+1.057*A,r=(r=3.2406*C+-1.5372*E+-.4986*A)>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:12.92*s,d=d>.0031308?1.055*Math.pow(d,1/2.4)-.055:12.92*d,[255*(r=Math.min(Math.max(0,r),1)),255*(s=Math.min(Math.max(0,s),1)),255*(d=Math.min(Math.max(0,d),1))]},b.xyz.lab=function(m){var r=m[0],s=m[1],d=m[2];return s/=100,d/=108.883,r=(r/=95.047)>.008856?Math.pow(r,1/3):7.787*r+16/116,[116*(s=s>.008856?Math.pow(s,1/3):7.787*s+16/116)-16,500*(r-s),200*(s-(d=d>.008856?Math.pow(d,1/3):7.787*d+16/116))]},b.lab.xyz=function(m){var r,s,d,C=m[0];r=m[1]/500+(s=(C+16)/116),d=s-m[2]/200;var E=Math.pow(s,3),A=Math.pow(r,3),f=Math.pow(d,3);return s=E>.008856?E:(s-16/116)/7.787,r=A>.008856?A:(r-16/116)/7.787,d=f>.008856?f:(d-16/116)/7.787,[r*=95.047,s*=100,d*=108.883]},b.lab.lch=function(m){var r,s=m[0],d=m[1],C=m[2];return(r=360*Math.atan2(C,d)/2/Math.PI)<0&&(r+=360),[s,Math.sqrt(d*d+C*C),r]},b.lch.lab=function(m){var r,s=m[0],d=m[1];return r=m[2]/360*2*Math.PI,[s,d*Math.cos(r),d*Math.sin(r)]},b.rgb.ansi16=function(m){var r=m[0],s=m[1],d=m[2],C=1 in arguments?arguments[1]:b.rgb.hsv(m)[2];if((C=Math.round(C/50))===0)return 30;var E=30+(Math.round(d/255)<<2|Math.round(s/255)<<1|Math.round(r/255));return C===2&&(E+=60),E},b.hsv.ansi16=function(m){return b.rgb.ansi16(b.hsv.rgb(m),m[2])},b.rgb.ansi256=function(m){var r=m[0],s=m[1],d=m[2];return r===s&&s===d?r<8?16:r>248?231:Math.round((r-8)/247*24)+232:16+36*Math.round(r/255*5)+6*Math.round(s/255*5)+Math.round(d/255*5)},b.ansi16.rgb=function(m){var r=m%10;if(r===0||r===7)return m>50&&(r+=3.5),[r=r/10.5*255,r,r];var s=.5*(1+~~(m>50));return[(1&r)*s*255,(r>>1&1)*s*255,(r>>2&1)*s*255]},b.ansi256.rgb=function(m){if(m>=232){var r=10*(m-232)+8;return[r,r,r]}var s;return m-=16,[Math.floor(m/36)/5*255,Math.floor((s=m%36)/6)/5*255,s%6/5*255]},b.rgb.hex=function(m){var r=(((255&Math.round(m[0]))<<16)+((255&Math.round(m[1]))<<8)+(255&Math.round(m[2]))).toString(16).toUpperCase();return"000000".substring(r.length)+r},b.hex.rgb=function(m){var r=m.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!r)return[0,0,0];var s=r[0];r[0].length===3&&(s=s.split("").map(function(C){return C+C}).join(""));var d=parseInt(s,16);return[d>>16&255,d>>8&255,255&d]},b.rgb.hcg=function(m){var r,s=m[0]/255,d=m[1]/255,C=m[2]/255,E=Math.max(Math.max(s,d),C),A=Math.min(Math.min(s,d),C),f=E-A;return r=f<=0?0:E===s?(d-C)/f%6:E===d?2+(C-s)/f:4+(s-d)/f+4,r/=6,[360*(r%=1),100*f,100*(f<1?A/(1-f):0)]},b.hsl.hcg=function(m){var r=m[1]/100,s=m[2]/100,d=1,C=0;return(d=s<.5?2*r*s:2*r*(1-s))<1&&(C=(s-.5*d)/(1-d)),[m[0],100*d,100*C]},b.hsv.hcg=function(m){var r=m[1]/100,s=m[2]/100,d=r*s,C=0;return d<1&&(C=(s-d)/(1-d)),[m[0],100*d,100*C]},b.hcg.rgb=function(m){var r=m[0]/360,s=m[1]/100,d=m[2]/100;if(s===0)return[255*d,255*d,255*d];var C,E=[0,0,0],A=r%1*6,f=A%1,x=1-f;switch(Math.floor(A)){case 0:E[0]=1,E[1]=f,E[2]=0;break;case 1:E[0]=x,E[1]=1,E[2]=0;break;case 2:E[0]=0,E[1]=1,E[2]=f;break;case 3:E[0]=0,E[1]=x,E[2]=1;break;case 4:E[0]=f,E[1]=0,E[2]=1;break;default:E[0]=1,E[1]=0,E[2]=x}return C=(1-s)*d,[255*(s*E[0]+C),255*(s*E[1]+C),255*(s*E[2]+C)]},b.hcg.hsv=function(m){var r=m[1]/100,s=r+m[2]/100*(1-r),d=0;return s>0&&(d=r/s),[m[0],100*d,100*s]},b.hcg.hsl=function(m){var r=m[1]/100,s=m[2]/100*(1-r)+.5*r,d=0;return s>0&&s<.5?d=r/(2*s):s>=.5&&s<1&&(d=r/(2*(1-s))),[m[0],100*d,100*s]},b.hcg.hwb=function(m){var r=m[1]/100,s=r+m[2]/100*(1-r);return[m[0],100*(s-r),100*(1-s)]},b.hwb.hcg=function(m){var r=m[1]/100,s=1-m[2]/100,d=s-r,C=0;return d<1&&(C=(s-d)/(1-d)),[m[0],100*d,100*C]},b.apple.rgb=function(m){return[m[0]/65535*255,m[1]/65535*255,m[2]/65535*255]},b.rgb.apple=function(m){return[m[0]/255*65535,m[1]/255*65535,m[2]/255*65535]},b.gray.rgb=function(m){return[m[0]/100*255,m[0]/100*255,m[0]/100*255]},b.gray.hsl=b.gray.hsv=function(m){return[0,0,m[0]]},b.gray.hwb=function(m){return[0,100,m[0]]},b.gray.cmyk=function(m){return[0,0,0,m[0]]},b.gray.lab=function(m){return[m[0],0,0]},b.gray.hex=function(m){var r=255&Math.round(m[0]/100*255),s=((r<<16)+(r<<8)+r).toString(16).toUpperCase();return"000000".substring(s.length)+s},b.rgb.gray=function(m){return[(m[0]+m[1]+m[2])/3/255*100]}},function(i,y,t){var n=t(95),u=t(127),p=t(100),b=t(301),c=t(307),S=t(169),I=t(170),m=t(310),r=t(311),s=t(174),d=t(312),C=t(74),E=t(316),A=t(317),f=t(179),x=t(26),j=t(73),P=t(321),W=t(43),X=t(323),$=t(58),ft=t(65),Z={};Z["[object Arguments]"]=Z["[object Array]"]=Z["[object ArrayBuffer]"]=Z["[object DataView]"]=Z["[object Boolean]"]=Z["[object Date]"]=Z["[object Float32Array]"]=Z["[object Float64Array]"]=Z["[object Int8Array]"]=Z["[object Int16Array]"]=Z["[object Int32Array]"]=Z["[object Map]"]=Z["[object Number]"]=Z["[object Object]"]=Z["[object RegExp]"]=Z["[object Set]"]=Z["[object String]"]=Z["[object Symbol]"]=Z["[object Uint8Array]"]=Z["[object Uint8ClampedArray]"]=Z["[object Uint16Array]"]=Z["[object Uint32Array]"]=!0,Z["[object Error]"]=Z["[object Function]"]=Z["[object WeakMap]"]=!1,i.exports=function lt(pt,gt,ut,Bt,Lt,St){var K,dt=1&gt,mt=2&gt,bt=4&gt;if(ut&&(K=Lt?ut(pt,Bt,Lt,St):ut(pt)),K!==void 0)return K;if(!W(pt))return pt;var wt=x(pt);if(wt){if(K=E(pt),!dt)return I(pt,K)}else{var J=C(pt),ct=J=="[object Function]"||J=="[object GeneratorFunction]";if(j(pt))return S(pt,dt);if(J=="[object Object]"||J=="[object Arguments]"||ct&&!Lt){if(K=mt||ct?{}:f(pt),!dt)return mt?r(pt,c(K,pt)):m(pt,b(K,pt))}else{if(!Z[J])return Lt?pt:{};K=A(pt,J,dt)}}St||(St=new n);var it=St.get(pt);if(it)return it;St.set(pt,K),X(pt)?pt.forEach(function(R){K.add(lt(R,gt,ut,R,pt,St))}):P(pt)&&pt.forEach(function(R,Q){K.set(Q,lt(R,gt,ut,Q,pt,St))});var _=wt?void 0:(bt?mt?d:s:mt?ft:$)(pt);return u(_||pt,function(R,Q){_&&(R=pt[Q=R]),p(K,Q,lt(R,gt,ut,Q,pt,St))}),K}},function(i,y,t){(function(n){function u(b){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(b)}var p=(n===void 0?"undefined":u(n))=="object"&&n&&n.Object===Object&&n;i.exports=p}).call(this,t(164))},function(i,y){function t(u){return(t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(u){(typeof window=="undefined"?"undefined":t(window))==="object"&&(n=window)}i.exports=n},function(i,y){var t=Function.prototype.toString;i.exports=function(n){if(n!=null){try{return t.call(n)}catch(u){}try{return n+""}catch(u){}}return""}},function(i,y,t){var n=t(64),u=function(){try{var p=n(Object,"defineProperty");return p({},"",{}),p}catch(b){}}();i.exports=u},function(i,y,t){var n=t(302),u=t(85),p=t(26),b=t(73),c=t(102),S=t(44),I=Object.prototype.hasOwnProperty;i.exports=function(m,r){var s=p(m),d=!s&&u(m),C=!s&&!d&&b(m),E=!s&&!d&&!C&&S(m),A=s||d||C||E,f=A?n(m.length,String):[],x=f.length;for(var j in m)!r&&!I.call(m,j)||A&&(j=="length"||C&&(j=="offset"||j=="parent")||E&&(j=="buffer"||j=="byteLength"||j=="byteOffset")||c(j,x))||f.push(j);return f}},function(i,y){i.exports=function(t,n){return function(u){return t(n(u))}}},function(i,y,t){(function(n){function u(m){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(m)}var p=t(47),b=u(y)=="object"&&y&&!y.nodeType&&y,c=b&&u(n)=="object"&&n&&!n.nodeType&&n,S=c&&c.exports===b?p.Buffer:void 0,I=S?S.allocUnsafe:void 0;n.exports=function(m,r){if(r)return m.slice();var s=m.length,d=I?I(s):new m.constructor(s);return m.copy(d),d}}).call(this,t(86)(i))},function(i,y){i.exports=function(t,n){var u=-1,p=t.length;for(n||(n=Array(p));++u<p;)n[u]=t[u];return n}},function(i,y){i.exports=function(t,n){for(var u=-1,p=t==null?0:t.length,b=0,c=[];++u<p;){var S=t[u];n(S,u,t)&&(c[b++]=S)}return c}},function(i,y){i.exports=function(){return[]}},function(i,y,t){var n=t(132),u=t(105),p=t(131),b=t(172),c=Object.getOwnPropertySymbols?function(S){for(var I=[];S;)n(I,p(S)),S=u(S);return I}:b;i.exports=c},function(i,y,t){var n=t(175),u=t(131),p=t(58);i.exports=function(b){return n(b,p,u)}},function(i,y,t){var n=t(132),u=t(26);i.exports=function(p,b,c){var S=b(p);return u(p)?S:n(S,c(p))}},function(i,y,t){var n=t(64)(t(47),"Set");i.exports=n},function(i,y,t){var n=t(47).Uint8Array;i.exports=n},function(i,y,t){var n=t(133);i.exports=function(u,p){var b=p?n(u.buffer):u.buffer;return new u.constructor(b,u.byteOffset,u.length)}},function(i,y,t){var n=t(180),u=t(105),p=t(104);i.exports=function(b){return typeof b.constructor!="function"||p(b)?{}:n(u(b))}},function(i,y,t){var n=t(43),u=Object.create,p=function(){function b(){}return function(c){if(!n(c))return{};if(u)return u(c);b.prototype=c;var S=new b;return b.prototype=void 0,S}}();i.exports=p},function(i,y,t){i.exports=t(182)},function(i,y,t){var n=t(127),u=t(106),p=t(183),b=t(26);i.exports=function(c,S){return(b(c)?n:u)(c,p(S))}},function(i,y,t){var n=t(66);i.exports=function(u){return typeof u=="function"?u:n}},function(i,y,t){var n=t(171),u=t(327),p=t(54),b=t(26);i.exports=function(c,S){return(b(c)?n:u)(c,p(S,3))}},function(i,y,t){var n=t(330),u=t(48);i.exports=function p(b,c,S,I,m){return b===c||(b==null||c==null||!u(b)&&!u(c)?b!=b&&c!=c:n(b,c,S,I,p,m))}},function(i,y,t){var n=t(187),u=t(333),p=t(188);i.exports=function(b,c,S,I,m,r){var s=1&S,d=b.length,C=c.length;if(d!=C&&!(s&&C>d))return!1;var E=r.get(b),A=r.get(c);if(E&&A)return E==c&&A==b;var f=-1,x=!0,j=2&S?new n:void 0;for(r.set(b,c),r.set(c,b);++f<d;){var P=b[f],W=c[f];if(I)var X=s?I(W,P,f,c,b,r):I(P,W,f,b,c,r);if(X!==void 0){if(X)continue;x=!1;break}if(j){if(!u(c,function($,ft){if(!p(j,ft)&&(P===$||m(P,$,S,I,r)))return j.push(ft)})){x=!1;break}}else if(P!==W&&!m(P,W,S,I,r)){x=!1;break}}return r.delete(b),r.delete(c),x}},function(i,y,t){var n=t(126),u=t(331),p=t(332);function b(c){var S=-1,I=c==null?0:c.length;for(this.__data__=new n;++S<I;)this.add(c[S])}b.prototype.add=b.prototype.push=u,b.prototype.has=p,i.exports=b},function(i,y){i.exports=function(t,n){return t.has(n)}},function(i,y,t){var n=t(43);i.exports=function(u){return u==u&&!n(u)}},function(i,y){i.exports=function(t,n){return function(u){return u!=null&&u[t]===n&&(n!==void 0||t in Object(u))}}},function(i,y,t){var n=t(343);i.exports=function(u){return u==null?"":n(u)}},function(i,y,t){var n=t(344),u=t(193);i.exports=function(p,b){return p!=null&&u(p,b,n)}},function(i,y,t){var n=t(108),u=t(85),p=t(26),b=t(102),c=t(128),S=t(87);i.exports=function(I,m,r){for(var s=-1,d=(m=n(m,I)).length,C=!1;++s<d;){var E=S(m[s]);if(!(C=I!=null&&r(I,E)))break;I=I[E]}return C||++s!=d?C:!!(d=I==null?0:I.length)&&c(d)&&b(E,d)&&(p(I)||u(I))}},function(i,y){i.exports=function(t){return function(n){return n==null?void 0:n[t]}}},function(i,y,t){var n=t(347),u=t(193);i.exports=function(p,b){return p!=null&&u(p,b,n)}},function(i,y){i.exports=function(t){return t===void 0}},function(i,y,t){var n=t(109),u=t(54),p=t(198),b=t(26);i.exports=function(c,S){return(b(c)?n:p)(c,u(S,3))}},function(i,y,t){var n=t(106),u=t(53);i.exports=function(p,b){var c=-1,S=u(p)?Array(p.length):[];return n(p,function(I,m,r){S[++c]=b(I,m,r)}),S}},function(i,y,t){var n=t(349),u=t(106),p=t(54),b=t(350),c=t(26);i.exports=function(S,I,m){var r=c(S)?n:b,s=arguments.length<3;return r(S,p(I,4),m,s,u)}},function(i,y,t){var n=t(360),u=Math.max;i.exports=function(p,b,c){return b=u(b===void 0?p.length-1:b,0),function(){for(var S=arguments,I=-1,m=u(S.length-b,0),r=Array(m);++I<m;)r[I]=S[b+I];I=-1;for(var s=Array(b+1);++I<b;)s[I]=S[I];return s[b]=c(r),n(p,this,s)}}},function(i,y,t){var n=t(361),u=t(362)(n);i.exports=u},function(i,y,t){var n=t(187),u=t(363),p=t(367),b=t(188),c=t(368),S=t(137);i.exports=function(I,m,r){var s=-1,d=u,C=I.length,E=!0,A=[],f=A;if(r)E=!1,d=p;else if(C>=200){var x=m?null:c(I);if(x)return S(x);E=!1,d=b,f=new n}else f=m?[]:A;t:for(;++s<C;){var j=I[s],P=m?m(j):j;if(j=r||j!==0?j:0,E&&P==P){for(var W=f.length;W--;)if(f[W]===P)continue t;m&&f.push(P),A.push(j)}else d(f,P,r)||(f!==A&&f.push(P),A.push(j))}return A}},function(i,y){i.exports=function(t,n,u,p){for(var b=t.length,c=u+(p?1:-1);p?c--:++c<b;)if(n(t[c],c,t))return c;return-1}},function(i,y,t){var n=t(53),u=t(48);i.exports=function(p){return u(p)&&n(p)}},function(i,y,t){var n=t(370),u=t(58);i.exports=function(p){return p==null?[]:n(p,u(p))}},function(i,y,t){var n=t(42),u=t(207);i.exports=function(b,c,S,I){return function(m,r,s,d){var C,E,A={},f=new u,x=function(P){var W=P.v!==C?P.v:P.w,X=A[W],$=s(P),ft=E.distance+$;if($<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+P+" Weight: "+$);ft<X.distance&&(X.distance=ft,X.predecessor=C,f.decrease(W,ft))};for(m.nodes().forEach(function(j){var P=j===r?0:Number.POSITIVE_INFINITY;A[j]={distance:P},f.add(j,P)});f.size()>0&&(C=f.removeMin(),(E=A[C]).distance!==Number.POSITIVE_INFINITY);)d(C).forEach(x);return A}(b,String(c),S||p,I||function(m){return b.outEdges(m)})};var p=n.constant(1)},function(i,y,t){var n=t(42);function u(){this._arr=[],this._keyIndices={}}i.exports=u,u.prototype.size=function(){return this._arr.length},u.prototype.keys=function(){return this._arr.map(function(p){return p.key})},u.prototype.has=function(p){return n.has(this._keyIndices,p)},u.prototype.priority=function(p){var b=this._keyIndices[p];if(b!==void 0)return this._arr[b].priority},u.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},u.prototype.add=function(p,b){var c=this._keyIndices;if(p=String(p),!n.has(c,p)){var S=this._arr,I=S.length;return c[p]=I,S.push({key:p,priority:b}),this._decrease(I),!0}return!1},u.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var p=this._arr.pop();return delete this._keyIndices[p.key],this._heapify(0),p.key},u.prototype.decrease=function(p,b){var c=this._keyIndices[p];if(b>this._arr[c].priority)throw new Error("New priority is greater than current priority. Key: "+p+" Old: "+this._arr[c].priority+" New: "+b);this._arr[c].priority=b,this._decrease(c)},u.prototype._heapify=function(p){var b=this._arr,c=2*p,S=c+1,I=p;c<b.length&&(I=b[c].priority<b[I].priority?c:I,S<b.length&&(I=b[S].priority<b[I].priority?S:I),I!==p&&(this._swap(p,I),this._heapify(I)))},u.prototype._decrease=function(p){for(var b,c=this._arr,S=c[p].priority;p!==0&&!(c[b=p>>1].priority<S);)this._swap(p,b),p=b},u.prototype._swap=function(p,b){var c=this._arr,S=this._keyIndices,I=c[p],m=c[b];c[p]=m,c[b]=I,S[m.key]=p,S[I.key]=b}},function(i,y,t){var n=t(42);i.exports=function(u){var p=0,b=[],c={},S=[];return u.nodes().forEach(function(I){n.has(c,I)||function m(r){var s=c[r]={onStack:!0,lowlink:p,index:p++};if(b.push(r),u.successors(r).forEach(function(E){n.has(c,E)?c[E].onStack&&(s.lowlink=Math.min(s.lowlink,c[E].index)):(m(E),s.lowlink=Math.min(s.lowlink,c[E].lowlink))}),s.lowlink===s.index){var d,C=[];do d=b.pop(),c[d].onStack=!1,C.push(d);while(r!==d);S.push(C)}}(I)}),S}},function(i,y,t){var n=t(42);function u(b){var c={},S={},I=[];if(n.each(b.sinks(),function m(r){if(n.has(S,r))throw new p;n.has(c,r)||(S[r]=!0,c[r]=!0,n.each(b.predecessors(r),m),delete S[r],I.push(r))}),n.size(c)!==b.nodeCount())throw new p;return I}function p(){}i.exports=u,u.CycleException=p,p.prototype=new Error},function(i,y,t){var n=t(42);i.exports=function(u,p,b){n.isArray(p)||(p=[p]);var c=(u.isDirected()?u.successors:u.neighbors).bind(u),S=[],I={};return n.each(p,function(m){if(!u.hasNode(m))throw new Error("Graph does not have node: "+m);(function r(s,d,C,E,A,f){n.has(E,d)||(E[d]=!0,C||f.push(d),n.each(A(d),function(x){r(s,x,C,E,A,f)}),C&&f.push(d))})(u,m,b==="post",I,c,S)}),S}},function(i,y,t){var n=t(389);i.exports=function(u){return u?(u=n(u))===1/0||u===-1/0?17976931348623157e292*(u<0?-1:1):u==u?u:0:u===0?u:0}},function(i,y,t){var n=t(139);i.exports=function(u){return(u==null?0:u.length)?n(u,1):[]}},function(i,y,t){var n=t(101),u=t(71);i.exports=function(p,b,c){(c!==void 0&&!u(p[b],c)||c===void 0&&!(b in p))&&n(p,b,c)}},function(i,y){i.exports=function(t,n){if((n!=="constructor"||typeof t[n]!="function")&&n!="__proto__")return t[n]}},function(i,y){i.exports=function(t,n){return t<n}},function(i,y,t){"use strict";var n=t(24),u=t(46).Graph,p=t(112).slack;function b(I,m){return n.forEach(I.nodes(),function r(s){n.forEach(m.nodeEdges(s),function(d){var C=d.v,E=s===C?d.w:C;I.hasNode(E)||p(m,d)||(I.setNode(E,{}),I.setEdge(s,E,{}),r(E))})}),I.nodeCount()}function c(I,m){return n.minBy(m.edges(),function(r){if(I.hasNode(r.v)!==I.hasNode(r.w))return p(m,r)})}function S(I,m,r){n.forEach(I.nodes(),function(s){m.node(s).rank+=r})}i.exports=function(I){var m,r,s=new u({directed:!1}),d=I.nodes()[0],C=I.nodeCount();for(s.setNode(d,{});b(s,I)<C;)m=c(s,I),r=s.hasNode(m.v)?p(I,m):-p(I,m),S(s,I,r);return s}},function(i,y,t){(function(n,u){function p(c){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(c)}/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var b;(function(c){(function(S){var I=(u===void 0?"undefined":p(u))==="object"?u:(typeof self=="undefined"?"undefined":p(self))==="object"?self:p(this)==="object"?this:Function("return this;")(),m=r(c);function r(s,d){return function(C,E){typeof s[C]!="function"&&Object.defineProperty(s,C,{configurable:!0,writable:!0,value:E}),d&&d(C,E)}}I.Reflect===void 0?I.Reflect=c:m=r(I.Reflect,m),function(s){var d=Object.prototype.hasOwnProperty,C=typeof Symbol=="function",E=C&&Symbol.toPrimitive!==void 0?Symbol.toPrimitive:"@@toPrimitive",A=C&&Symbol.iterator!==void 0?Symbol.iterator:"@@iterator",f=typeof Object.create=="function",x={__proto__:[]}instanceof Array,j=!f&&!x,P={create:f?function(){return k(Object.create(null))}:x?function(){return k({__proto__:null})}:function(){return k({})},has:j?function(g,O){return d.call(g,O)}:function(g,O){return O in g},get:j?function(g,O){return d.call(g,O)?g[O]:void 0}:function(g,O){return g[O]}},W=Object.getPrototypeOf(Function),X=(n===void 0?"undefined":p(n))==="object"&&n.env&&n.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",$=X||typeof Map!="function"||typeof Map.prototype.entries!="function"?function(){var g={},O=[],F=function(){function st(Mt,yt,xt){this._index=0,this._keys=Mt,this._values=yt,this._selector=xt}return st.prototype["@@iterator"]=function(){return this},st.prototype[A]=function(){return this},st.prototype.next=function(){var Mt=this._index;if(Mt>=0&&Mt<this._keys.length){var yt=this._selector(this._keys[Mt],this._values[Mt]);return Mt+1>=this._keys.length?(this._index=-1,this._keys=O,this._values=O):this._index++,{value:yt,done:!1}}return{value:void 0,done:!0}},st.prototype.throw=function(Mt){throw this._index>=0&&(this._index=-1,this._keys=O,this._values=O),Mt},st.prototype.return=function(Mt){return this._index>=0&&(this._index=-1,this._keys=O,this._values=O),{value:Mt,done:!0}},st}();return function(){function st(){this._keys=[],this._values=[],this._cacheKey=g,this._cacheIndex=-2}return Object.defineProperty(st.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),st.prototype.has=function(Mt){return this._find(Mt,!1)>=0},st.prototype.get=function(Mt){var yt=this._find(Mt,!1);return yt>=0?this._values[yt]:void 0},st.prototype.set=function(Mt,yt){var xt=this._find(Mt,!0);return this._values[xt]=yt,this},st.prototype.delete=function(Mt){var yt=this._find(Mt,!1);if(yt>=0){for(var xt=this._keys.length,Ot=yt+1;Ot<xt;Ot++)this._keys[Ot-1]=this._keys[Ot],this._values[Ot-1]=this._values[Ot];return this._keys.length--,this._values.length--,Mt===this._cacheKey&&(this._cacheKey=g,this._cacheIndex=-2),!0}return!1},st.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=g,this._cacheIndex=-2},st.prototype.keys=function(){return new F(this._keys,this._values,V)},st.prototype.values=function(){return new F(this._keys,this._values,rt)},st.prototype.entries=function(){return new F(this._keys,this._values,ot)},st.prototype["@@iterator"]=function(){return this.entries()},st.prototype[A]=function(){return this.entries()},st.prototype._find=function(Mt,yt){return this._cacheKey!==Mt&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Mt)),this._cacheIndex<0&&yt&&(this._cacheIndex=this._keys.length,this._keys.push(Mt),this._values.push(void 0)),this._cacheIndex},st}();function V(st,Mt){return st}function rt(st,Mt){return Mt}function ot(st,Mt){return[st,Mt]}}():Map,ft=X||typeof Set!="function"||typeof Set.prototype.entries!="function"?function(){function g(){this._map=new $}return Object.defineProperty(g.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),g.prototype.has=function(O){return this._map.has(O)},g.prototype.add=function(O){return this._map.set(O,O),this},g.prototype.delete=function(O){return this._map.delete(O)},g.prototype.clear=function(){this._map.clear()},g.prototype.keys=function(){return this._map.keys()},g.prototype.values=function(){return this._map.values()},g.prototype.entries=function(){return this._map.entries()},g.prototype["@@iterator"]=function(){return this.keys()},g.prototype[A]=function(){return this.keys()},g}():Set,Z=new(X||typeof WeakMap!="function"?function(){var g=P.create(),O=F();return function(){function st(){this._key=F()}return st.prototype.has=function(Mt){var yt=V(Mt,!1);return yt!==void 0&&P.has(yt,this._key)},st.prototype.get=function(Mt){var yt=V(Mt,!1);return yt!==void 0?P.get(yt,this._key):void 0},st.prototype.set=function(Mt,yt){return V(Mt,!0)[this._key]=yt,this},st.prototype.delete=function(Mt){var yt=V(Mt,!1);return yt!==void 0&&delete yt[this._key]},st.prototype.clear=function(){this._key=F()},st}();function F(){var st;do st="@@WeakMap@@"+ot();while(P.has(g,st));return g[st]=!0,st}function V(st,Mt){if(!d.call(st,O)){if(!Mt)return;Object.defineProperty(st,O,{value:P.create()})}return st[O]}function rt(st,Mt){for(var yt=0;yt<Mt;++yt)st[yt]=255*Math.random()|0;return st}function ot(){var st,Mt=(st=16,typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(st)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(st)):rt(new Uint8Array(st),st):rt(new Array(st),st));Mt[6]=79&Mt[6]|64,Mt[8]=191&Mt[8]|128;for(var yt="",xt=0;xt<16;++xt){var Ot=Mt[xt];xt!==4&&xt!==6&&xt!==8||(yt+="-"),Ot<16&&(yt+="0"),yt+=Ot.toString(16).toLowerCase()}return yt}}():WeakMap);function lt(g,O,F){var V=Z.get(g);if(St(V)){if(!F)return;V=new $,Z.set(g,V)}var rt=V.get(O);if(St(rt)){if(!F)return;rt=new $,V.set(O,rt)}return rt}function pt(g,O,F){var V=lt(O,F,!1);return!St(V)&&!!V.has(g)}function gt(g,O,F){var V=lt(O,F,!1);if(!St(V))return V.get(g)}function ut(g,O,F,V){lt(F,V,!0).set(g,O)}function Bt(g,O){var F=[],V=lt(g,O,!1);if(St(V))return F;for(var rt=function(yt){var xt=it(yt,A);if(!J(xt))throw new TypeError;var Ot=xt.call(yt);if(!dt(Ot))throw new TypeError;return Ot}(V.keys()),ot=0;;){var st=_(rt);if(!st)return F.length=ot,F;var Mt=st.value;try{F[ot]=Mt}catch(yt){try{R(rt)}finally{throw yt}}ot++}}function Lt(g){if(g===null)return 1;switch(p(g)){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return g===null?1:6;default:return 6}}function St(g){return g===void 0}function K(g){return g===null}function dt(g){return p(g)==="object"?g!==null:typeof g=="function"}function mt(g,O){switch(Lt(g)){case 0:case 1:case 2:case 3:case 4:case 5:return g}var F=O===3?"string":O===5?"number":"default",V=it(g,E);if(V!==void 0){var rt=V.call(g,F);if(dt(rt))throw new TypeError;return rt}return function(ot,st){if(st==="string"){var Mt=ot.toString;if(J(Mt)&&!dt(xt=Mt.call(ot))||J(yt=ot.valueOf)&&!dt(xt=yt.call(ot)))return xt}else{var yt;if(J(yt=ot.valueOf)&&!dt(xt=yt.call(ot)))return xt;var xt,Ot=ot.toString;if(J(Ot)&&!dt(xt=Ot.call(ot)))return xt}throw new TypeError}(g,F==="default"?"number":F)}function bt(g){var O=mt(g,3);return p(O)==="symbol"?O:function(F){return""+F}(O)}function wt(g){return Array.isArray?Array.isArray(g):g instanceof Object?g instanceof Array:Object.prototype.toString.call(g)==="[object Array]"}function J(g){return typeof g=="function"}function ct(g){return typeof g=="function"}function it(g,O){var F=g[O];if(F!=null){if(!J(F))throw new TypeError;return F}}function _(g){var O=g.next();return!O.done&&O}function R(g){var O=g.return;O&&O.call(g)}function Q(g){var O=Object.getPrototypeOf(g);if(typeof g!="function"||g===W||O!==W)return O;var F=g.prototype,V=F&&Object.getPrototypeOf(F);if(V==null||V===Object.prototype)return O;var rt=V.constructor;return typeof rt!="function"||rt===g?O:rt}function k(g){return g.__=void 0,delete g.__,g}s("decorate",function(g,O,F,V){if(St(F)){if(!wt(g))throw new TypeError;if(!ct(O))throw new TypeError;return function(rt,ot){for(var st=rt.length-1;st>=0;--st){var Mt=(0,rt[st])(ot);if(!St(Mt)&&!K(Mt)){if(!ct(Mt))throw new TypeError;ot=Mt}}return ot}(g,O)}if(!wt(g))throw new TypeError;if(!dt(O))throw new TypeError;if(!dt(V)&&!St(V)&&!K(V))throw new TypeError;return K(V)&&(V=void 0),function(rt,ot,st,Mt){for(var yt=rt.length-1;yt>=0;--yt){var xt=(0,rt[yt])(ot,st,Mt);if(!St(xt)&&!K(xt)){if(!dt(xt))throw new TypeError;Mt=xt}}return Mt}(g,O,F=bt(F),V)}),s("metadata",function(g,O){return function(F,V){if(!dt(F))throw new TypeError;if(!St(V)&&!function(rt){switch(Lt(rt)){case 3:case 4:return!0;default:return!1}}(V))throw new TypeError;ut(g,O,F,V)}}),s("defineMetadata",function(g,O,F,V){if(!dt(F))throw new TypeError;return St(V)||(V=bt(V)),ut(g,O,F,V)}),s("hasMetadata",function(g,O,F){if(!dt(O))throw new TypeError;return St(F)||(F=bt(F)),function V(rt,ot,st){if(pt(rt,ot,st))return!0;var Mt=Q(ot);return!K(Mt)&&V(rt,Mt,st)}(g,O,F)}),s("hasOwnMetadata",function(g,O,F){if(!dt(O))throw new TypeError;return St(F)||(F=bt(F)),pt(g,O,F)}),s("getMetadata",function(g,O,F){if(!dt(O))throw new TypeError;return St(F)||(F=bt(F)),function V(rt,ot,st){if(pt(rt,ot,st))return gt(rt,ot,st);var Mt=Q(ot);return K(Mt)?void 0:V(rt,Mt,st)}(g,O,F)}),s("getOwnMetadata",function(g,O,F){if(!dt(O))throw new TypeError;return St(F)||(F=bt(F)),gt(g,O,F)}),s("getMetadataKeys",function(g,O){if(!dt(g))throw new TypeError;return St(O)||(O=bt(O)),function F(V,rt){var ot=Bt(V,rt),st=Q(V);if(st===null)return ot;var Mt=F(st,rt);if(Mt.length<=0)return ot;if(ot.length<=0)return Mt;for(var yt=new ft,xt=[],Ot=0,jt=ot;Ot<jt.length;Ot++){var Dt=jt[Ot];yt.has(Dt)||(yt.add(Dt),xt.push(Dt))}for(var zt=0,Tt=Mt;zt<Tt.length;zt++)Dt=Tt[zt],yt.has(Dt)||(yt.add(Dt),xt.push(Dt));return xt}(g,O)}),s("getOwnMetadataKeys",function(g,O){if(!dt(g))throw new TypeError;return St(O)||(O=bt(O)),Bt(g,O)}),s("deleteMetadata",function(g,O,F){if(!dt(O))throw new TypeError;St(F)||(F=bt(F));var V=lt(O,F,!1);if(St(V)||!V.delete(g))return!1;if(V.size>0)return!0;var rt=Z.get(O);return rt.delete(F),rt.size>0||Z.delete(O),!0})}(m)})()})(b||(b={}))}).call(this,t(158),t(164))},function(i,y,t){var n=t(219);i.exports=function(u,p){if(u){if(typeof u=="string")return n(u,p);var b=Object.prototype.toString.call(u).slice(8,-1);return b==="Object"&&u.constructor&&(b=u.constructor.name),b==="Map"||b==="Set"?Array.from(u):b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?n(u,p):void 0}}},function(i,y){i.exports=function(t,n){(n==null||n>t.length)&&(n=t.length);for(var u=0,p=new Array(n);u<n;u++)p[u]=t[u];return p}},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.MetadataReader=void 0;var n=t(32),u=function(){function p(){}return p.prototype.getConstructorMetadata=function(b){return{compilerGeneratedMetadata:Reflect.getMetadata(n.PARAM_TYPES,b),userGeneratedMetadata:Reflect.getMetadata(n.TAGGED,b)||{}}},p.prototype.getPropertiesMetadata=function(b){return Reflect.getMetadata(n.TAGGED_PROP,b)||[]},p}();y.MetadataReader=u},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.isStackOverflowExeption=void 0;var n=t(41);y.isStackOverflowExeption=function(u){return u instanceof RangeError||u.message===n.STACK_OVERFLOW}},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.inject=y.LazyServiceIdentifer=void 0;var n=t(41),u=t(32),p=t(49),b=t(59),c=function(){function S(I){this._cb=I}return S.prototype.unwrap=function(){return this._cb()},S}();y.LazyServiceIdentifer=c,y.inject=function(S){return function(I,m,r){if(S===void 0)throw new Error(n.UNDEFINED_INJECT_ANNOTATION(I.name));var s=new p.Metadata(u.INJECT_TAG,S);typeof r=="number"?b.tagParameter(I,m,r,s):b.tagProperty(I,m,s)}}},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.Target=void 0;var n=t(32),u=t(67),p=t(49),b=t(453),c=function(){function S(I,m,r,s){this.id=u.id(),this.type=I,this.serviceIdentifier=r,this.name=new b.QueryableString(m||""),this.metadata=new Array;var d=null;typeof s=="string"?d=new p.Metadata(n.NAMED_TAG,s):s instanceof p.Metadata&&(d=s),d!==null&&this.metadata.push(d)}return S.prototype.hasTag=function(I){for(var m=0,r=this.metadata;m<r.length;m++)if(r[m].key===I)return!0;return!1},S.prototype.isArray=function(){return this.hasTag(n.MULTI_INJECT_TAG)},S.prototype.matchesArray=function(I){return this.matchesTag(n.MULTI_INJECT_TAG)(I)},S.prototype.isNamed=function(){return this.hasTag(n.NAMED_TAG)},S.prototype.isTagged=function(){return this.metadata.some(function(I){return I.key!==n.INJECT_TAG&&I.key!==n.MULTI_INJECT_TAG&&I.key!==n.NAME_TAG&&I.key!==n.UNMANAGED_TAG&&I.key!==n.NAMED_TAG})},S.prototype.isOptional=function(){return this.matchesTag(n.OPTIONAL_TAG)(!0)},S.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(I){return I.key===n.NAMED_TAG})[0]:null},S.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(I){return I.key!==n.INJECT_TAG&&I.key!==n.MULTI_INJECT_TAG&&I.key!==n.NAME_TAG&&I.key!==n.UNMANAGED_TAG&&I.key!==n.NAMED_TAG}):null},S.prototype.matchesNamedTag=function(I){return this.matchesTag(n.NAMED_TAG)(I)},S.prototype.matchesTag=function(I){var m=this;return function(r){for(var s=0,d=m.metadata;s<d.length;s++){var C=d[s];if(C.key===I&&C.value===r)return!0}return!1}},S}();y.Target=c},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.BindingWhenOnSyntax=void 0;var n=t(141),u=t(142),p=function(){function b(c){this._binding=c,this._bindingWhenSyntax=new u.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new n.BindingOnSyntax(this._binding)}return b.prototype.when=function(c){return this._bindingWhenSyntax.when(c)},b.prototype.whenTargetNamed=function(c){return this._bindingWhenSyntax.whenTargetNamed(c)},b.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},b.prototype.whenTargetTagged=function(c,S){return this._bindingWhenSyntax.whenTargetTagged(c,S)},b.prototype.whenInjectedInto=function(c){return this._bindingWhenSyntax.whenInjectedInto(c)},b.prototype.whenParentNamed=function(c){return this._bindingWhenSyntax.whenParentNamed(c)},b.prototype.whenParentTagged=function(c,S){return this._bindingWhenSyntax.whenParentTagged(c,S)},b.prototype.whenAnyAncestorIs=function(c){return this._bindingWhenSyntax.whenAnyAncestorIs(c)},b.prototype.whenNoAncestorIs=function(c){return this._bindingWhenSyntax.whenNoAncestorIs(c)},b.prototype.whenAnyAncestorNamed=function(c){return this._bindingWhenSyntax.whenAnyAncestorNamed(c)},b.prototype.whenAnyAncestorTagged=function(c,S){return this._bindingWhenSyntax.whenAnyAncestorTagged(c,S)},b.prototype.whenNoAncestorNamed=function(c){return this._bindingWhenSyntax.whenNoAncestorNamed(c)},b.prototype.whenNoAncestorTagged=function(c,S){return this._bindingWhenSyntax.whenNoAncestorTagged(c,S)},b.prototype.whenAnyAncestorMatches=function(c){return this._bindingWhenSyntax.whenAnyAncestorMatches(c)},b.prototype.whenNoAncestorMatches=function(c){return this._bindingWhenSyntax.whenNoAncestorMatches(c)},b.prototype.onActivation=function(c){return this._bindingOnSyntax.onActivation(c)},b}();y.BindingWhenOnSyntax=p},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.typeConstraint=y.namedConstraint=y.taggedConstraint=y.traverseAncerstors=void 0;var n=t(32),u=t(49);y.traverseAncerstors=function c(S,I){var m=S.parentRequest;return m!==null&&(!!I(m)||c(m,I))};var p=function(S){return function(I){var m=function(s){return s!==null&&s.target!==null&&s.target.matchesTag(S)(I)};return m.metaData=new u.Metadata(S,I),m}};y.taggedConstraint=p;var b=p(n.NAMED_TAG);y.namedConstraint=b,y.typeConstraint=function(c){return function(S){var I=null;if(S!==null){if(I=S.bindings[0],typeof c=="string")return I.serviceIdentifier===c;var m=S.bindings[0].implementationType;return c===m}return!1}}},function(i,y){},function(i,y){},function(i,y){},function(i,y){},function(i,y){},function(i,y){},function(i,y){},function(i,y){i.exports=1e-6},function(i,y){i.exports=function(){var t=new Float32Array(2);return t[0]=0,t[1]=0,t}},function(i,y){i.exports=function(t,n,u){return t[0]=n,t[1]=u,t}},function(i,y){i.exports=function(t,n,u){return t[0]=n[0]+u[0],t[1]=n[1]+u[1],t}},function(i,y){i.exports=function(t,n,u){return t[0]=n[0]*u[0],t[1]=n[1]*u[1],t}},function(i,y){i.exports=function(t,n,u){return t[0]=n[0]/u[0],t[1]=n[1]/u[1],t}},function(i,y){i.exports=function(t,n){var u=n[0]-t[0],p=n[1]-t[1];return Math.sqrt(u*u+p*p)}},function(i,y){i.exports=function(t,n){var u=n[0]-t[0],p=n[1]-t[1];return u*u+p*p}},function(i,y){i.exports=function(t){var n=t[0],u=t[1];return Math.sqrt(n*n+u*u)}},function(i,y){i.exports=function(t){var n=t[0],u=t[1];return n*n+u*u}},function(i,y){i.exports=function(t,n){var u=n[0],p=n[1],b=u*u+p*p;return b>0&&(b=1/Math.sqrt(b),t[0]=n[0]*b,t[1]=n[1]*b),t}},function(i,y){i.exports=function(t,n){return t[0]*n[0]+t[1]*n[1]}},function(i,y){},function(i,y){},function(i,y,t){"use strict";var n={};t.r(n),t.d(n,"easeLinear",function(){return pt}),t.d(n,"easeQuad",function(){return Bt}),t.d(n,"easeQuadIn",function(){return gt}),t.d(n,"easeQuadOut",function(){return ut}),t.d(n,"easeQuadInOut",function(){return Bt}),t.d(n,"easeCubic",function(){return K}),t.d(n,"easeCubicIn",function(){return Lt}),t.d(n,"easeCubicOut",function(){return St}),t.d(n,"easeCubicInOut",function(){return K}),t.d(n,"easePoly",function(){return bt}),t.d(n,"easePolyIn",function(){return dt}),t.d(n,"easePolyOut",function(){return mt}),t.d(n,"easePolyInOut",function(){return bt}),t.d(n,"easeSin",function(){return _}),t.d(n,"easeSinIn",function(){return ct}),t.d(n,"easeSinOut",function(){return it}),t.d(n,"easeSinInOut",function(){return _}),t.d(n,"easeExp",function(){return g}),t.d(n,"easeExpIn",function(){return Q}),t.d(n,"easeExpOut",function(){return k}),t.d(n,"easeExpInOut",function(){return g}),t.d(n,"easeCircle",function(){return V}),t.d(n,"easeCircleIn",function(){return O}),t.d(n,"easeCircleOut",function(){return F}),t.d(n,"easeCircleInOut",function(){return V}),t.d(n,"easeBounce",function(){return st}),t.d(n,"easeBounceIn",function(){return ot}),t.d(n,"easeBounceOut",function(){return st}),t.d(n,"easeBounceInOut",function(){return Mt}),t.d(n,"easeBack",function(){return Ot}),t.d(n,"easeBackIn",function(){return yt}),t.d(n,"easeBackOut",function(){return xt}),t.d(n,"easeBackInOut",function(){return Ot}),t.d(n,"easeElastic",function(){return zt}),t.d(n,"easeElasticIn",function(){return Dt}),t.d(n,"easeElasticOut",function(){return zt}),t.d(n,"easeElasticInOut",function(){return Tt});var u=t(1),p=t(119),b=t(117),c=t(19),S=t(0);function I(ae){return(I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Kt){return typeof Kt}:function(Kt){return Kt&&typeof Symbol=="function"&&Kt.constructor===Symbol&&Kt!==Symbol.prototype?"symbol":typeof Kt})(ae)}var m,r,s=0,d=0,C=0,E=0,A=0,f=0,x=(typeof performance=="undefined"?"undefined":I(performance))==="object"&&performance.now?performance:Date,j=(typeof window=="undefined"?"undefined":I(window))==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(ae){setTimeout(ae,17)};function P(){return A||(j(W),A=x.now()+f)}function W(){A=0}function X(){this._call=this._time=this._next=null}function $(ae,Kt,te){var Oe=new X;return Oe.restart(ae,Kt,te),Oe}function ft(){A=(E=x.now())+f,s=d=0;try{(function(){P(),++s;for(var ae,Kt=m;Kt;)(ae=A-Kt._time)>=0&&Kt._call.call(null,ae),Kt=Kt._next;--s})()}finally{s=0,function(){for(var ae,Kt,te=m,Oe=1/0;te;)te._call?(Oe>te._time&&(Oe=te._time),ae=te,te=te._next):(Kt=te._next,te._next=null,te=ae?ae._next=Kt:m=Kt);r=ae,lt(Oe)}(),A=0}}function Z(){var ae=x.now(),Kt=ae-E;Kt>1e3&&(f-=Kt,E=ae)}function lt(ae){s||(d&&(d=clearTimeout(d)),ae-A>24?(ae<1/0&&(d=setTimeout(ft,ae-x.now()-f)),C&&(C=clearInterval(C))):(C||(E=x.now(),C=setInterval(Z,1e3)),s=1,j(ft)))}function pt(ae){return+ae}function gt(ae){return ae*ae}function ut(ae){return ae*(2-ae)}function Bt(ae){return((ae*=2)<=1?ae*ae:--ae*(2-ae)+1)/2}function Lt(ae){return ae*ae*ae}function St(ae){return--ae*ae*ae+1}function K(ae){return((ae*=2)<=1?ae*ae*ae:(ae-=2)*ae*ae+2)/2}X.prototype=$.prototype={constructor:X,restart:function(Kt,te,Oe){if(typeof Kt!="function")throw new TypeError("callback is not a function");Oe=(Oe==null?P():+Oe)+(te==null?0:+te),this._next||r===this||(r?r._next=this:m=this,r=this),this._call=Kt,this._time=Oe,lt()},stop:function(){this._call&&(this._call=null,this._time=1/0,lt())}};var dt=function ae(Kt){function te(Oe){return Math.pow(Oe,Kt)}return Kt=+Kt,te.exponent=ae,te}(3),mt=function ae(Kt){function te(Oe){return 1-Math.pow(1-Oe,Kt)}return Kt=+Kt,te.exponent=ae,te}(3),bt=function ae(Kt){function te(Oe){return((Oe*=2)<=1?Math.pow(Oe,Kt):2-Math.pow(2-Oe,Kt))/2}return Kt=+Kt,te.exponent=ae,te}(3),wt=Math.PI,J=wt/2;function ct(ae){return+ae==1?1:1-Math.cos(ae*J)}function it(ae){return Math.sin(ae*J)}function _(ae){return(1-Math.cos(wt*ae))/2}function R(ae){return 1.0009775171065494*(Math.pow(2,-10*ae)-.0009765625)}function Q(ae){return R(1-+ae)}function k(ae){return 1-R(ae)}function g(ae){return((ae*=2)<=1?R(1-ae):2-R(ae-1))/2}function O(ae){return 1-Math.sqrt(1-ae*ae)}function F(ae){return Math.sqrt(1- --ae*ae)}function V(ae){return((ae*=2)<=1?1-Math.sqrt(1-ae*ae):Math.sqrt(1-(ae-=2)*ae)+1)/2}var rt=7.5625;function ot(ae){return 1-st(1-ae)}function st(ae){return(ae=+ae)<4/11?rt*ae*ae:ae<8/11?rt*(ae-=6/11)*ae+3/4:ae<10/11?rt*(ae-=9/11)*ae+15/16:rt*(ae-=21/22)*ae+63/64}function Mt(ae){return((ae*=2)<=1?1-st(1-ae):st(ae-1)+1)/2}var yt=function ae(Kt){function te(Oe){return(Oe=+Oe)*Oe*(Kt*(Oe-1)+Oe)}return Kt=+Kt,te.overshoot=ae,te}(1.70158),xt=function ae(Kt){function te(Oe){return--Oe*Oe*((Oe+1)*Kt+Oe)+1}return Kt=+Kt,te.overshoot=ae,te}(1.70158),Ot=function ae(Kt){function te(Oe){return((Oe*=2)<1?Oe*Oe*((Kt+1)*Oe-Kt):(Oe-=2)*Oe*((Kt+1)*Oe+Kt)+2)/2}return Kt=+Kt,te.overshoot=ae,te}(1.70158),jt=2*Math.PI,Dt=function ae(Kt,te){var Oe=Math.asin(1/(Kt=Math.max(1,Kt)))*(te/=jt);function Ze(An){return Kt*R(- --An)*Math.sin((Oe-An)/te)}return Ze.amplitude=function(An){return ae(An,te*jt)},Ze.period=function(An){return ae(Kt,An)},Ze}(1,.3),zt=function ae(Kt,te){var Oe=Math.asin(1/(Kt=Math.max(1,Kt)))*(te/=jt);function Ze(An){return 1-Kt*R(An=+An)*Math.sin((An+Oe)/te)}return Ze.amplitude=function(An){return ae(An,te*jt)},Ze.period=function(An){return ae(Kt,An)},Ze}(1,.3),Tt=function ae(Kt,te){var Oe=Math.asin(1/(Kt=Math.max(1,Kt)))*(te/=jt);function Ze(An){return((An=2*An-1)<0?Kt*R(-An)*Math.sin((Oe-An)/te):2-Kt*R(An)*Math.sin((Oe+An)/te))/2}return Ze.amplitude=function(An){return ae(An,te*jt)},Ze.period=function(An){return ae(Kt,An)},Ze}(1,.3),Wt=function(Kt,te,Oe){Kt.prototype=te.prototype=Oe,Oe.constructor=Kt};function Ht(ae,Kt){var te=Object.create(ae.prototype);for(var Oe in Kt)te[Oe]=Kt[Oe];return te}function re(){}var pe="\\s*([+-]?\\d+)\\s*",me="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Se="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Le=/^#([0-9a-f]{3,8})$/,Je=new RegExp("^rgb\\("+[pe,pe,pe]+"\\)$"),On=new RegExp("^rgb\\("+[Se,Se,Se]+"\\)$"),gn=new RegExp("^rgba\\("+[pe,pe,pe,me]+"\\)$"),Wn=new RegExp("^rgba\\("+[Se,Se,Se,me]+"\\)$"),kn=new RegExp("^hsl\\("+[me,Se,Se]+"\\)$"),Vn=new RegExp("^hsla\\("+[me,Se,Se,me]+"\\)$"),Dn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Nn(){return this.rgb().formatHex()}function Qn(){return this.rgb().formatRgb()}function ir(ae){var Kt,te;return ae=(ae+"").trim().toLowerCase(),(Kt=Le.exec(ae))?(te=Kt[1].length,Kt=parseInt(Kt[1],16),te===6?hr(Kt):te===3?new Br(Kt>>8&15|Kt>>4&240,Kt>>4&15|240&Kt,(15&Kt)<<4|15&Kt,1):te===8?Sr(Kt>>24&255,Kt>>16&255,Kt>>8&255,(255&Kt)/255):te===4?Sr(Kt>>12&15|Kt>>8&240,Kt>>8&15|Kt>>4&240,Kt>>4&15|240&Kt,((15&Kt)<<4|15&Kt)/255):null):(Kt=Je.exec(ae))?new Br(Kt[1],Kt[2],Kt[3],1):(Kt=On.exec(ae))?new Br(255*Kt[1]/100,255*Kt[2]/100,255*Kt[3]/100,1):(Kt=gn.exec(ae))?Sr(Kt[1],Kt[2],Kt[3],Kt[4]):(Kt=Wn.exec(ae))?Sr(255*Kt[1]/100,255*Kt[2]/100,255*Kt[3]/100,Kt[4]):(Kt=kn.exec(ae))?sa(Kt[1],Kt[2]/100,Kt[3]/100,1):(Kt=Vn.exec(ae))?sa(Kt[1],Kt[2]/100,Kt[3]/100,Kt[4]):Dn.hasOwnProperty(ae)?hr(Dn[ae]):ae==="transparent"?new Br(NaN,NaN,NaN,0):null}function hr(ae){return new Br(ae>>16&255,ae>>8&255,255&ae,1)}function Sr(ae,Kt,te,Oe){return Oe<=0&&(ae=Kt=te=NaN),new Br(ae,Kt,te,Oe)}function mr(ae){return ae instanceof re||(ae=ir(ae)),ae?new Br((ae=ae.rgb()).r,ae.g,ae.b,ae.opacity):new Br}function dr(ae,Kt,te,Oe){return arguments.length===1?mr(ae):new Br(ae,Kt,te,Oe==null?1:Oe)}function Br(ae,Kt,te,Oe){this.r=+ae,this.g=+Kt,this.b=+te,this.opacity=+Oe}function ii(){return"#"+Pi(this.r)+Pi(this.g)+Pi(this.b)}function mi(){var ae=this.opacity;return((ae=isNaN(ae)?1:Math.max(0,Math.min(1,ae)))===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(ae===1?")":", "+ae+")")}function Pi(ae){return((ae=Math.max(0,Math.min(255,Math.round(ae)||0)))<16?"0":"")+ae.toString(16)}function sa(ae,Kt,te,Oe){return Oe<=0?ae=Kt=te=NaN:te<=0||te>=1?ae=Kt=NaN:Kt<=0&&(ae=NaN),new Mi(ae,Kt,te,Oe)}function Pa(ae){if(ae instanceof Mi)return new Mi(ae.h,ae.s,ae.l,ae.opacity);if(ae instanceof re||(ae=ir(ae)),!ae)return new Mi;if(ae instanceof Mi)return ae;var Kt=(ae=ae.rgb()).r/255,te=ae.g/255,Oe=ae.b/255,Ze=Math.min(Kt,te,Oe),An=Math.max(Kt,te,Oe),qn=NaN,rr=An-Ze,tn=(An+Ze)/2;return rr?(qn=Kt===An?(te-Oe)/rr+6*(te<Oe):te===An?(Oe-Kt)/rr+2:(Kt-te)/rr+4,rr/=tn<.5?An+Ze:2-An-Ze,qn*=60):rr=tn>0&&tn<1?0:qn,new Mi(qn,rr,tn,ae.opacity)}function Mi(ae,Kt,te,Oe){this.h=+ae,this.s=+Kt,this.l=+te,this.opacity=+Oe}function Ki(ae,Kt,te){return 255*(ae<60?Kt+(te-Kt)*ae/60:ae<180?te:ae<240?Kt+(te-Kt)*(240-ae)/60:Kt)}function fa(ae,Kt,te,Oe,Ze){var An=ae*ae,qn=An*ae;return((1-3*ae+3*An-qn)*Kt+(4-6*An+3*qn)*te+(1+3*ae+3*An-3*qn)*Oe+qn*Ze)/6}Wt(re,ir,{copy:function(Kt){return Object.assign(new this.constructor,this,Kt)},displayable:function(){return this.rgb().displayable()},hex:Nn,formatHex:Nn,formatHsl:function(){return Pa(this).formatHsl()},formatRgb:Qn,toString:Qn}),Wt(Br,dr,Ht(re,{brighter:function(Kt){return Kt=Kt==null?1/.7:Math.pow(1/.7,Kt),new Br(this.r*Kt,this.g*Kt,this.b*Kt,this.opacity)},darker:function(Kt){return Kt=Kt==null?.7:Math.pow(.7,Kt),new Br(this.r*Kt,this.g*Kt,this.b*Kt,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ii,formatHex:ii,formatRgb:mi,toString:mi})),Wt(Mi,function(ae,Kt,te,Oe){return arguments.length===1?Pa(ae):new Mi(ae,Kt,te,Oe==null?1:Oe)},Ht(re,{brighter:function(Kt){return Kt=Kt==null?1/.7:Math.pow(1/.7,Kt),new Mi(this.h,this.s,this.l*Kt,this.opacity)},darker:function(Kt){return Kt=Kt==null?.7:Math.pow(.7,Kt),new Mi(this.h,this.s,this.l*Kt,this.opacity)},rgb:function(){var Kt=this.h%360+360*(this.h<0),te=isNaN(Kt)||isNaN(this.s)?0:this.s,Oe=this.l,Ze=Oe+(Oe<.5?Oe:1-Oe)*te,An=2*Oe-Ze;return new Br(Ki(Kt>=240?Kt-240:Kt+120,An,Ze),Ki(Kt,An,Ze),Ki(Kt<120?Kt+240:Kt-120,An,Ze),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Kt=this.opacity;return((Kt=isNaN(Kt)?1:Math.max(0,Math.min(1,Kt)))===1?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(Kt===1?")":", "+Kt+")")}}));var oa=function(Kt){return function(){return Kt}};function pa(ae,Kt){return function(te){return ae+te*Kt}}function La(ae){return(ae=+ae)==1?Yr:function(Kt,te){return te-Kt?function(Oe,Ze,An){return Oe=Math.pow(Oe,An),Ze=Math.pow(Ze,An)-Oe,An=1/An,function(qn){return Math.pow(Oe+qn*Ze,An)}}(Kt,te,ae):oa(isNaN(Kt)?te:Kt)}}function Yr(ae,Kt){var te=Kt-ae;return te?pa(ae,te):oa(isNaN(ae)?Kt:ae)}var Sa=function ae(Kt){var te=La(Kt);function Oe(Ze,An){var qn=te((Ze=dr(Ze)).r,(An=dr(An)).r),rr=te(Ze.g,An.g),tn=te(Ze.b,An.b),sn=Yr(Ze.opacity,An.opacity);return function(un){return Ze.r=qn(un),Ze.g=rr(un),Ze.b=tn(un),Ze.opacity=sn(un),Ze+""}}return Oe.gamma=ae,Oe}(1);function Pr(ae){return function(Kt){var te,Oe,Ze=Kt.length,An=new Array(Ze),qn=new Array(Ze),rr=new Array(Ze);for(te=0;te<Ze;++te)Oe=dr(Kt[te]),An[te]=Oe.r||0,qn[te]=Oe.g||0,rr[te]=Oe.b||0;return An=ae(An),qn=ae(qn),rr=ae(rr),Oe.opacity=1,function(tn){return Oe.r=An(tn),Oe.g=qn(tn),Oe.b=rr(tn),Oe+""}}}Pr(function(ae){var Kt=ae.length-1;return function(te){var Oe=te<=0?te=0:te>=1?(te=1,Kt-1):Math.floor(te*Kt),Ze=ae[Oe],An=ae[Oe+1],qn=Oe>0?ae[Oe-1]:2*Ze-An,rr=Oe<Kt-1?ae[Oe+2]:2*An-Ze;return fa((te-Oe/Kt)*Kt,qn,Ze,An,rr)}}),Pr(function(ae){var Kt=ae.length;return function(te){var Oe=Math.floor(((te%=1)<0?++te:te)*Kt),Ze=ae[(Oe+Kt-1)%Kt],An=ae[Oe%Kt],qn=ae[(Oe+1)%Kt],rr=ae[(Oe+2)%Kt];return fa((te-Oe/Kt)*Kt,Ze,An,qn,rr)}});var si=function(Kt,te){te||(te=[]);var Oe,Ze=Kt?Math.min(te.length,Kt.length):0,An=te.slice();return function(qn){for(Oe=0;Oe<Ze;++Oe)An[Oe]=Kt[Oe]*(1-qn)+te[Oe]*qn;return An}};function ti(ae){return ArrayBuffer.isView(ae)&&!(ae instanceof DataView)}function $r(ae,Kt){var te,Oe=Kt?Kt.length:0,Ze=ae?Math.min(Oe,ae.length):0,An=new Array(Ze),qn=new Array(Oe);for(te=0;te<Ze;++te)An[te]=Bi(ae[te],Kt[te]);for(;te<Oe;++te)qn[te]=Kt[te];return function(rr){for(te=0;te<Ze;++te)qn[te]=An[te](rr);return qn}}var ui=function(Kt,te){var Oe=new Date;return Kt=+Kt,te=+te,function(Ze){return Oe.setTime(Kt*(1-Ze)+te*Ze),Oe}},li=function(Kt,te){return Kt=+Kt,te=+te,function(Oe){return Kt*(1-Oe)+te*Oe}};function xi(ae){return(xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Kt){return typeof Kt}:function(Kt){return Kt&&typeof Symbol=="function"&&Kt.constructor===Symbol&&Kt!==Symbol.prototype?"symbol":typeof Kt})(ae)}var Ci=function(Kt,te){var Oe,Ze={},An={};for(Oe in Kt!==null&&xi(Kt)==="object"||(Kt={}),te!==null&&xi(te)==="object"||(te={}),te)Oe in Kt?Ze[Oe]=Bi(Kt[Oe],te[Oe]):An[Oe]=te[Oe];return function(qn){for(Oe in Ze)An[Oe]=Ze[Oe](qn);return An}},di=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ti=new RegExp(di.source,"g"),pi=function(Kt,te){var Oe,Ze,An,qn=di.lastIndex=Ti.lastIndex=0,rr=-1,tn=[],sn=[];for(Kt+="",te+="";(Oe=di.exec(Kt))&&(Ze=Ti.exec(te));)(An=Ze.index)>qn&&(An=te.slice(qn,An),tn[rr]?tn[rr]+=An:tn[++rr]=An),(Oe=Oe[0])===(Ze=Ze[0])?tn[rr]?tn[rr]+=Ze:tn[++rr]=Ze:(tn[++rr]=null,sn.push({i:rr,x:li(Oe,Ze)})),qn=Ti.lastIndex;return qn<te.length&&(An=te.slice(qn),tn[rr]?tn[rr]+=An:tn[++rr]=An),tn.length<2?sn[0]?function(un){return function(ur){return un(ur)+""}}(sn[0].x):function(un){return function(){return un}}(te):(te=sn.length,function(un){for(var ur,jr=0;jr<te;++jr)tn[(ur=sn[jr]).i]=ur.x(un);return tn.join("")})};function Ni(ae){return(Ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Kt){return typeof Kt}:function(Kt){return Kt&&typeof Symbol=="function"&&Kt.constructor===Symbol&&Kt!==Symbol.prototype?"symbol":typeof Kt})(ae)}var Bi=function(Kt,te){var Oe,Ze=Ni(te);return te==null||Ze==="boolean"?oa(te):(Ze==="number"?li:Ze==="string"?(Oe=ir(te))?(te=Oe,Sa):pi:te instanceof ir?Sa:te instanceof Date?ui:ti(te)?si:Array.isArray(te)?$r:typeof te.valueOf!="function"&&typeof te.toString!="function"||isNaN(te)?Ci:li)(Kt,te)},Fi=t(51),ma=[1,0,0,0,1,0,0,0,1];function ua(ae,Kt,te){var Oe,Ze=Kt.startTime;if(te<Ze+Kt.delay||Kt._paused)return!1;var An=Kt.duration,qn=Kt.easing;if(te=te-Ze-Kt.delay,Kt.repeat)Oe=te%An/An,Oe=n[qn](Oe);else{if(!((Oe=te/An)<1))return Kt.onFrame?ae.attr(Kt.onFrame(1)):ae.attr(Kt.toAttrs),!0;Oe=n[qn](Oe)}if(Kt.onFrame){var rr=Kt.onFrame(Oe);ae.attr(rr)}else(function(tn,sn,un){var ur={},jr=sn.fromAttrs,wr=sn.toAttrs;if(!tn.destroyed){var yr,ni,_r,Fr;for(var Lr in wr)if(!Object(S.q)(jr[Lr],wr[Lr]))if(Lr==="path"){var Gr=wr[Lr],Hr=jr[Lr];Gr.length>Hr.length?(Gr=Fi.parsePathString(wr[Lr]),Hr=Fi.parsePathString(jr[Lr]),Hr=Fi.fillPathByDiff(Hr,Gr),Hr=Fi.formatPath(Hr,Gr),sn.fromAttrs.path=Hr,sn.toAttrs.path=Gr):sn.pathFormatted||(Gr=Fi.parsePathString(wr[Lr]),Hr=Fi.parsePathString(jr[Lr]),Hr=Fi.formatPath(Hr,Gr),sn.fromAttrs.path=Hr,sn.toAttrs.path=Gr,sn.pathFormatted=!0),ur[Lr]=[];for(var ei=0;ei<Gr.length;ei++){for(var Kr=Gr[ei],Qr=Hr[ei],Oi=[],Ri=0;Ri<Kr.length;Ri++)Object(S.t)(Kr[Ri])&&Qr&&Object(S.t)(Qr[Ri])?(yr=Bi(Qr[Ri],Kr[Ri]),Oi.push(yr(un))):Oi.push(Kr[Ri]);ur[Lr].push(Oi)}}else if(Lr==="matrix"){var Si=(_r=jr[Lr]||ma,(ti(Fr=wr[Lr]||ma)?si:$r)(_r,Fr))(un);ur[Lr]=Si}else["fill","stroke","fillStyle","strokeStyle"].includes(Lr)&&(ni=wr[Lr],/^[r,R,L,l]{1}[\s]*\(/.test(ni))?ur[Lr]=wr[Lr]:Object(S.r)(wr[Lr])||(yr=Bi(jr[Lr],wr[Lr]),ur[Lr]=yr(un));tn.attr(ur)}})(ae,Kt,Oe);return!1}var Ra=function(){function ae(Kt){this.animators=[],this.current=0,this.timer=null,this.canvas=Kt}return ae.prototype.initTimer=function(){var Kt,te,Oe,Ze=this;this.timer=$(function(An){if(Ze.current=An,Ze.animators.length>0){for(var qn=Ze.animators.length-1;qn>=0;qn--)if((Kt=Ze.animators[qn]).destroyed)Ze.removeAnimator(qn);else{if(!Kt.isAnimatePaused())for(var rr=(te=Kt.get("animations")).length-1;rr>=0;rr--)Oe=te[rr],ua(Kt,Oe,An)&&(te.splice(rr,1),Oe.callback&&Oe.callback());te.length===0&&Ze.removeAnimator(qn)}Ze.canvas.get("autoDraw")||Ze.canvas.draw()}})},ae.prototype.addAnimator=function(Kt){this.animators.push(Kt)},ae.prototype.removeAnimator=function(Kt){this.animators.splice(Kt,1)},ae.prototype.isAnimating=function(){return!!this.animators.length},ae.prototype.stop=function(){this.timer&&this.timer.stop()},ae.prototype.stopAllAnimations=function(Kt){Kt===void 0&&(Kt=!0),this.animators.forEach(function(te){te.stopAnimate(Kt)}),this.animators=[],this.canvas.draw()},ae.prototype.getTime=function(){return this.current},ae}(),xa=t(114),Ma=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Qi(ae,Kt,te){te.name=Kt,te.target=ae,te.currentTarget=ae,te.delegateTarget=ae,ae.emit(Kt,te)}function ka(ae,Kt,te){if(te.bubbles){var Oe=void 0,Ze=!1;if(Kt==="mouseenter"?(Oe=te.fromShape,Ze=!0):Kt==="mouseleave"&&(Ze=!0,Oe=te.toShape),ae.isCanvas()&&Ze)return;if(Oe&&Object(c.g)(ae,Oe))return void(te.bubbles=!1);te.name=Kt,te.currentTarget=ae,te.delegateTarget=ae,ae.emit(Kt,te)}}var vo=function(){function ae(Kt){var te=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(Oe){var Ze=Oe.type;te._triggerEvent(Ze,Oe)},this._onDocumentMove=function(Oe){if(te.canvas.get("el")!==Oe.target&&(te.dragging||te.currentShape)){var Ze=te._getPointInfo(Oe);te.dragging&&te._emitEvent("drag",Oe,Ze,te.draggingShape)}},this._onDocumentMouseUp=function(Oe){if(te.canvas.get("el")!==Oe.target&&te.dragging){var Ze=te._getPointInfo(Oe);te.draggingShape&&te._emitEvent("drop",Oe,Ze,null),te._emitEvent("dragend",Oe,Ze,te.draggingShape),te._afterDrag(te.draggingShape,Ze,Oe)}},this.canvas=Kt.canvas}return ae.prototype.init=function(){this._bindEvents()},ae.prototype._bindEvents=function(){var Kt=this,te=this.canvas.get("el");Object(c.a)(Ma,function(Oe){te.addEventListener(Oe,Kt._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},ae.prototype._clearEvents=function(){var Kt=this,te=this.canvas.get("el");Object(c.a)(Ma,function(Oe){te.removeEventListener(Oe,Kt._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},ae.prototype._getEventObj=function(Kt,te,Oe,Ze,An,qn){var rr=new xa.a(Kt,te);return rr.fromShape=An,rr.toShape=qn,rr.x=Oe.x,rr.y=Oe.y,rr.clientX=Oe.clientX,rr.clientY=Oe.clientY,rr.propagationPath.push(Ze),rr},ae.prototype._getShape=function(Kt,te){return this.canvas.getShape(Kt.x,Kt.y,te)},ae.prototype._getPointInfo=function(Kt){var te=this.canvas,Oe=te.getClientByEvent(Kt),Ze=te.getPointByEvent(Kt);return{x:Ze.x,y:Ze.y,clientX:Oe.x,clientY:Oe.y}},ae.prototype._triggerEvent=function(Kt,te){var Oe=this._getPointInfo(te),Ze=this._getShape(Oe,te),An=this["_on"+Kt],qn=!1;if(An)An.call(this,Oe,Ze,te);else{var rr=this.currentShape;Kt==="mouseenter"||Kt==="dragenter"||Kt==="mouseover"?(this._emitEvent(Kt,te,Oe,null,null,Ze),Ze&&this._emitEvent(Kt,te,Oe,Ze,null,Ze),Kt==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",te,Oe,null)):Kt==="mouseleave"||Kt==="dragleave"||Kt==="mouseout"?(qn=!0,rr&&this._emitEvent(Kt,te,Oe,rr,rr,null),this._emitEvent(Kt,te,Oe,null,rr,null),Kt==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",te,Oe,null)):this._emitEvent(Kt,te,Oe,Ze,null,null)}if(qn||(this.currentShape=Ze),Ze&&!Ze.get("destroyed")){var tn=this.canvas;tn.get("el").style.cursor=Ze.attr("cursor")||tn.get("cursor")}},ae.prototype._onmousedown=function(Kt,te,Oe){Oe.button===0&&(this.mousedownShape=te,this.mousedownPoint=Kt,this.mousedownTimeStamp=Oe.timeStamp),this._emitEvent("mousedown",Oe,Kt,te,null,null)},ae.prototype._emitMouseoverEvents=function(Kt,te,Oe,Ze){var An=this.canvas.get("el");Oe!==Ze&&(Oe&&(this._emitEvent("mouseout",Kt,te,Oe,Oe,Ze),this._emitEvent("mouseleave",Kt,te,Oe,Oe,Ze),Ze&&!Ze.get("destroyed")||(An.style.cursor=this.canvas.get("cursor"))),Ze&&(this._emitEvent("mouseover",Kt,te,Ze,Oe,Ze),this._emitEvent("mouseenter",Kt,te,Ze,Oe,Ze)))},ae.prototype._emitDragoverEvents=function(Kt,te,Oe,Ze,An){Ze?(Ze!==Oe&&(Oe&&this._emitEvent("dragleave",Kt,te,Oe,Oe,Ze),this._emitEvent("dragenter",Kt,te,Ze,Oe,Ze)),An||this._emitEvent("dragover",Kt,te,Ze)):Oe&&this._emitEvent("dragleave",Kt,te,Oe,Oe,Ze),An&&this._emitEvent("dragover",Kt,te,Ze)},ae.prototype._afterDrag=function(Kt,te,Oe){Kt&&(Kt.set("capture",!0),this.draggingShape=null),this.dragging=!1;var Ze=this._getShape(te,Oe);Ze!==Kt&&this._emitMouseoverEvents(Oe,te,Kt,Ze),this.currentShape=Ze},ae.prototype._onmouseup=function(Kt,te,Oe){if(Oe.button===0){var Ze=this.draggingShape;this.dragging?(Ze&&this._emitEvent("drop",Oe,Kt,te),this._emitEvent("dragend",Oe,Kt,Ze),this._afterDrag(Ze,Kt,Oe)):(this._emitEvent("mouseup",Oe,Kt,te),te===this.mousedownShape&&this._emitEvent("click",Oe,Kt,te),this.mousedownShape=null,this.mousedownPoint=null)}},ae.prototype._ondragover=function(Kt,te,Oe){Oe.preventDefault();var Ze=this.currentShape;this._emitDragoverEvents(Oe,Kt,Ze,te,!0)},ae.prototype._onmousemove=function(Kt,te,Oe){var Ze=this.canvas,An=this.currentShape,qn=this.draggingShape;if(this.dragging)qn&&this._emitDragoverEvents(Oe,Kt,An,te,!1),this._emitEvent("drag",Oe,Kt,qn);else{var rr=this.mousedownPoint;if(rr){var tn=this.mousedownShape,sn=Oe.timeStamp-this.mousedownTimeStamp,un=rr.clientX-Kt.clientX,ur=rr.clientY-Kt.clientY;sn>120||un*un+ur*ur>40?tn&&tn.get("draggable")?((qn=this.mousedownShape).set("capture",!1),this.draggingShape=qn,this.dragging=!0,this._emitEvent("dragstart",Oe,Kt,qn),this.mousedownShape=null,this.mousedownPoint=null):!tn&&Ze.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",Oe,Kt,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(Oe,Kt,An,te),this._emitEvent("mousemove",Oe,Kt,te)):(this._emitMouseoverEvents(Oe,Kt,An,te),this._emitEvent("mousemove",Oe,Kt,te))}else this._emitMouseoverEvents(Oe,Kt,An,te),this._emitEvent("mousemove",Oe,Kt,te)}},ae.prototype._emitEvent=function(Kt,te,Oe,Ze,An,qn){var rr=this._getEventObj(Kt,te,Oe,Ze,An,qn);if(Ze){rr.shape=Ze,Qi(Ze,Kt,rr);for(var tn=Ze.getParent();tn;)tn.emitDelegation(Kt,rr),rr.propagationStopped||ka(tn,Kt,rr),rr.propagationPath.push(tn),tn=tn.getParent()}else Qi(this.canvas,Kt,rr)},ae.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},ae}(),za=Object(p.a)(),Ga=za&&za.name==="firefox",eo=function(ae){function Kt(te){var Oe=ae.call(this,te)||this;return Oe.initContainer(),Oe.initDom(),Oe.initEvents(),Oe.initTimeline(),Oe}return Object(u.b)(Kt,ae),Kt.prototype.getDefaultCfg=function(){var te=ae.prototype.getDefaultCfg.call(this);return te.cursor="default",te.supportCSSTransform=!1,te},Kt.prototype.initContainer=function(){var te=this.get("container");Object(c.h)(te)&&(te=document.getElementById(te),this.set("container",te))},Kt.prototype.initDom=function(){var te=this.createDom();this.set("el",te),this.get("container").appendChild(te),this.setDOMSize(this.get("width"),this.get("height"))},Kt.prototype.initEvents=function(){var te=new vo({canvas:this});te.init(),this.set("eventController",te)},Kt.prototype.initTimeline=function(){var te=new Ra(this);this.set("timeline",te)},Kt.prototype.setDOMSize=function(te,Oe){var Ze=this.get("el");c.c&&(Ze.style.width=te+"px",Ze.style.height=Oe+"px")},Kt.prototype.changeSize=function(te,Oe){this.setDOMSize(te,Oe),this.set("width",te),this.set("height",Oe),this.onCanvasChange("changeSize")},Kt.prototype.getRenderer=function(){return this.get("renderer")},Kt.prototype.getCursor=function(){return this.get("cursor")},Kt.prototype.setCursor=function(te){this.set("cursor",te);var Oe=this.get("el");c.c&&Oe&&(Oe.style.cursor=te)},Kt.prototype.getPointByEvent=function(te){if(this.get("supportCSSTransform")){if(Ga&&!Object(c.e)(te.layerX)&&te.layerX!==te.offsetX)return{x:te.layerX,y:te.layerY};if(!Object(c.e)(te.offsetX))return{x:te.offsetX,y:te.offsetY}}var Oe=this.getClientByEvent(te),Ze=Oe.x,An=Oe.y;return this.getPointByClient(Ze,An)},Kt.prototype.getClientByEvent=function(te){var Oe=te;return te.touches&&(Oe=te.type==="touchend"?te.changedTouches[0]:te.touches[0]),{x:Oe.clientX,y:Oe.clientY}},Kt.prototype.getPointByClient=function(te,Oe){var Ze=this.get("el").getBoundingClientRect();return{x:te-Ze.left,y:Oe-Ze.top}},Kt.prototype.getClientByPoint=function(te,Oe){var Ze=this.get("el").getBoundingClientRect();return{x:te+Ze.left,y:Oe+Ze.top}},Kt.prototype.draw=function(){},Kt.prototype.removeDom=function(){var te=this.get("el");te.parentNode.removeChild(te)},Kt.prototype.clearEvents=function(){this.get("eventController").destroy()},Kt.prototype.isCanvas=function(){return!0},Kt.prototype.getParent=function(){return null},Kt.prototype.destroy=function(){var te=this.get("timeline");this.get("destroyed")||(this.clear(),te&&te.stop(),this.clearEvents(),this.removeDom(),ae.prototype.destroy.call(this))},Kt}(b.a);y.a=eo},function(i,y,t){"use strict";t.d(y,"a",function(){return p});var n=new Map;function u(E,A){n.set(E,A)}function p(E){return n.get(E)}var b=function(A){var f=A.attr();return{x:f.x,y:f.y,width:f.width,height:f.height}},c=function(A){var f=A.attr(),x=f.x,j=f.y,P=f.r;return{x:x-P,y:j-P,width:2*P,height:2*P}},S=t(20);function I(E,A){return E&&A?{minX:Math.min(E.minX,A.minX),minY:Math.min(E.minY,A.minY),maxX:Math.max(E.maxX,A.maxX),maxY:Math.max(E.maxY,A.maxY)}:E||A}function m(E,A){var f=E.get("startArrowShape"),x=E.get("endArrowShape");return f&&(A=I(A,f.getCanvasBBox())),x&&(A=I(A,x.getCanvasBBox())),A}var r=t(68),s=t(31),d=t(0);function C(E,A){var f=E.prePoint,x=E.currentPoint,j=E.nextPoint,P=Math.pow(x[0]-f[0],2)+Math.pow(x[1]-f[1],2),W=Math.pow(x[0]-j[0],2)+Math.pow(x[1]-j[1],2),X=Math.pow(f[0]-j[0],2)+Math.pow(f[1]-j[1],2),$=Math.acos((P+W-X)/(2*Math.sqrt(P)*Math.sqrt(W)));if(!$||Math.sin($)===0||Object(d.u)($,0))return{xExtra:0,yExtra:0};var ft=Math.abs(Math.atan2(j[1]-x[1],j[0]-x[0])),Z=Math.abs(Math.atan2(j[0]-x[0],j[1]-x[1]));return ft=ft>Math.PI/2?Math.PI-ft:ft,Z=Z>Math.PI/2?Math.PI-Z:Z,{xExtra:Math.cos($/2-ft)*(A/2*(1/Math.sin($/2)))-A/2||0,yExtra:Math.cos(Z-$/2)*(A/2*(1/Math.sin($/2)))-A/2||0}}u("rect",b),u("image",b),u("circle",c),u("marker",c),u("polyline",function(E){for(var A=E.attr().points,f=[],x=[],j=0;j<A.length;j++){var P=A[j];f.push(P[0]),x.push(P[1])}var W=S.f.getBBoxByArray(f,x),X=W.x,$=W.y,ft={minX:X,minY:$,maxX:X+W.width,maxY:$+W.height};return{x:(ft=m(E,ft)).minX,y:ft.minY,width:ft.maxX-ft.minX,height:ft.maxY-ft.minY}}),u("polygon",function(E){for(var A=E.attr().points,f=[],x=[],j=0;j<A.length;j++){var P=A[j];f.push(P[0]),x.push(P[1])}return S.f.getBBoxByArray(f,x)}),u("text",function(E){var A=E.attr(),f=A.x,x=A.y,j=A.text,P=A.fontSize,W=A.lineHeight,X=A.font;X||(X=Object(r.a)(A));var $,ft=Object(r.c)(j,X);if(ft){var Z=A.textAlign,lt=A.textBaseline,pt=Object(r.b)(j,P,W),gt={x:f,y:x-pt};Z&&(Z==="end"||Z==="right"?gt.x-=ft:Z==="center"&&(gt.x-=ft/2)),lt&&(lt==="top"?gt.y+=pt:lt==="middle"&&(gt.y+=pt/2)),$={x:gt.x,y:gt.y,width:ft,height:pt}}else $={x:f,y:x,width:0,height:0};return $}),u("path",function(E){var A=E.attr(),f=A.path,x=A.stroke?A.lineWidth:0,j=function($,ft){for(var Z=[],lt=[],pt=[],gt=0;gt<$.length;gt++){var ut=(J=$[gt]).currentPoint,Bt=J.params,Lt=J.prePoint,St=void 0;switch(J.command){case"Q":St=S.e.box(Lt[0],Lt[1],Bt[1],Bt[2],Bt[3],Bt[4]);break;case"C":St=S.b.box(Lt[0],Lt[1],Bt[1],Bt[2],Bt[3],Bt[4],Bt[5],Bt[6]);break;case"A":var K=J.arcParams;St=S.a.box(K.cx,K.cy,K.rx,K.ry,K.xRotation,K.startAngle,K.endAngle);break;default:Z.push(ut[0]),lt.push(ut[1])}St&&(J.box=St,Z.push(St.x,St.x+St.width),lt.push(St.y,St.y+St.height)),ft&&(J.command==="L"||J.command==="M")&&J.prePoint&&J.nextPoint&&pt.push(J)}Z=Z.filter(function(ct){return!Number.isNaN(ct)}),lt=lt.filter(function(ct){return!Number.isNaN(ct)});var dt=Math.min.apply(null,Z),mt=Math.min.apply(null,lt),bt=Math.max.apply(null,Z),wt=Math.max.apply(null,lt);if(pt.length===0)return{x:dt,y:mt,width:bt-dt,height:wt-mt};for(gt=0;gt<pt.length;gt++){var J;(ut=(J=pt[gt]).currentPoint)[0]===dt?dt-=C(J,ft).xExtra:ut[0]===bt&&(bt+=C(J,ft).xExtra),ut[1]===mt?mt-=C(J,ft).yExtra:ut[1]===wt&&(wt+=C(J,ft).yExtra)}return{x:dt,y:mt,width:bt-dt,height:wt-mt}}(E.get("segments")||Object(s.d)(f),x),P=j.x,W=j.y,X={minX:P,minY:W,maxX:P+j.width,maxY:W+j.height};return{x:(X=m(E,X)).minX,y:X.minY,width:X.maxX-X.minX,height:X.maxY-X.minY}}),u("line",function(E){var A=E.attr(),f=A.x1,x=A.y1,j=A.x2,P=A.y2,W={minX:Math.min(f,j),maxX:Math.max(f,j),minY:Math.min(x,P),maxY:Math.max(x,P)};return{x:(W=m(E,W)).minX,y:W.minY,width:W.maxX-W.minX,height:W.maxY-W.minY}}),u("ellipse",function(E){var A=E.attr(),f=A.x,x=A.y,j=A.rx,P=A.ry;return{x:f-j,y:x-P,width:2*j,height:2*P}})},function(i,y,t){"use strict";var n=t(1),u=t(18),p=t(16),b=t(70),c=t(36),S=t(22),I=t(78),m=t(77),r=t(0),s=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,d=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,C=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function E(lt){var pt=lt.match(C);if(!pt)return"";var gt="";return pt.sort(function(ut,Bt){return ut=ut.split(":"),Bt=Bt.split(":"),Number(ut[0])-Number(Bt[0])}),Object(r.f)(pt,function(ut){ut=ut.split(":"),gt+='<stop offset="'+ut[0]+'" stop-color="'+ut[1]+'"></stop>'}),gt}var A=function(){function lt(pt){this.cfg={};var gt=null,ut=Object(r.H)("gradient_");return pt.toLowerCase()[0]==="l"?function(Bt,Lt){var St,K,dt=s.exec(Bt),mt=Object(r.B)(Object(r.G)(parseFloat(dt[1])),2*Math.PI),bt=dt[2];mt>=0&&mt<.5*Math.PI?(St={x:0,y:0},K={x:1,y:1}):.5*Math.PI<=mt&&mt<Math.PI?(St={x:1,y:0},K={x:0,y:1}):Math.PI<=mt&&mt<1.5*Math.PI?(St={x:1,y:1},K={x:0,y:0}):(St={x:0,y:1},K={x:1,y:0});var wt=Math.tan(mt),J=wt*wt,ct=(K.x-St.x+wt*(K.y-St.y))/(J+1)+St.x,it=wt*(K.x-St.x+wt*(K.y-St.y))/(J+1)+St.y;Lt.setAttribute("x1",St.x),Lt.setAttribute("y1",St.y),Lt.setAttribute("x2",ct),Lt.setAttribute("y2",it),Lt.innerHTML=E(bt)}(pt,gt=Object(S.b)("linearGradient")):function(Bt,Lt){var St=d.exec(Bt),K=parseFloat(St[1]),dt=parseFloat(St[2]),mt=parseFloat(St[3]),bt=St[4];Lt.setAttribute("cx",K),Lt.setAttribute("cy",dt),Lt.setAttribute("r",mt),Lt.innerHTML=E(bt)}(pt,gt=Object(S.b)("radialGradient")),gt.setAttribute("id",ut),this.el=gt,this.id=ut,this.cfg=pt,this}return lt.prototype.match=function(pt,gt){return this.cfg===gt},lt}(),f={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},x={x:"-40%",y:"-40%",width:"200%",height:"200%"},j=function(){function lt(pt){this.type="filter",this.cfg={},this.type="filter";var gt=Object(S.b)("filter");return Object(r.f)(x,function(ut,Bt){gt.setAttribute(Bt,ut)}),this.el=gt,this.id=Object(r.H)("filter_"),this.el.id=this.id,this.cfg=pt,this._parseShadow(pt,gt),this}return lt.prototype.match=function(pt,gt){if(this.type!==pt)return!1;var ut=!0,Bt=this.cfg;return Object(r.f)(Object.keys(Bt),function(Lt){if(Bt[Lt]!==gt[Lt])return ut=!1,!1}),ut},lt.prototype.update=function(pt,gt){var ut=this.cfg;return ut[f[pt]]=gt,this._parseShadow(ut,this.el),this},lt.prototype._parseShadow=function(pt,gt){var ut=`<feDropShadow
      dx="`+(pt.dx||0)+`"
      dy="`+(pt.dy||0)+`"
      stdDeviation="`+(pt.blur?pt.blur/10:0)+`"
      flood-color="`+(pt.color?pt.color:"#000")+`"
      flood-opacity="`+(pt.opacity?pt.opacity:1)+`"
      />`;gt.innerHTML=ut},lt}(),P=function(){function lt(pt,gt){this.cfg={};var ut=Object(S.b)("marker"),Bt=Object(r.H)("marker_");ut.setAttribute("id",Bt);var Lt=Object(S.b)("path");Lt.setAttribute("stroke",pt.stroke||"none"),Lt.setAttribute("fill",pt.fill||"none"),ut.appendChild(Lt),ut.setAttribute("overflow","visible"),ut.setAttribute("orient","auto-start-reverse"),this.el=ut,this.child=Lt,this.id=Bt;var St=pt[gt==="marker-start"?"startArrow":"endArrow"];return this.stroke=pt.stroke||"#000",St===!0?this._setDefaultPath(gt,Lt):(this.cfg=St,this._setMarker(pt.lineWidth,Lt)),this}return lt.prototype.match=function(){return!1},lt.prototype._setDefaultPath=function(pt,gt){var ut=this.el;gt.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),ut.setAttribute("refX",""+10*Math.cos(Math.PI/6)),ut.setAttribute("refY","5")},lt.prototype._setMarker=function(pt,gt){var ut=this.el,Bt=this.cfg.path,Lt=this.cfg.d;Object(r.m)(Bt)&&(Bt=Bt.map(function(St){return St.join(" ")}).join("")),gt.setAttribute("d",Bt),ut.appendChild(gt),Lt&&ut.setAttribute("refX",""+Lt/pt)},lt.prototype.update=function(pt){var gt=this.child;gt.attr?gt.attr("fill",pt):gt.setAttribute("fill",pt)},lt}(),W=function(){function lt(pt){this.type="clip",this.cfg={};var gt=Object(S.b)("clipPath");this.el=gt,this.id=Object(r.H)("clip_"),gt.id=this.id;var ut=pt.cfg.el;return gt.appendChild(ut),this.cfg=pt,this}return lt.prototype.match=function(){return!1},lt.prototype.remove=function(){var pt=this.el;pt.parentNode.removeChild(pt)},lt}(),X=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,$=function(){function lt(pt){this.cfg={};var gt=Object(S.b)("pattern");gt.setAttribute("patternUnits","userSpaceOnUse");var ut=Object(S.b)("image");gt.appendChild(ut);var Bt=Object(r.H)("pattern_");gt.id=Bt,this.el=gt,this.id=Bt,this.cfg=pt;var Lt=X.exec(pt)[2];ut.setAttribute("href",Lt);var St=new Image;function K(){gt.setAttribute("width",""+St.width),gt.setAttribute("height",""+St.height)}return Lt.match(/^data:/i)||(St.crossOrigin="Anonymous"),St.src=Lt,St.complete?K():(St.onload=K,St.src=St.src),this}return lt.prototype.match=function(pt,gt){return this.cfg===gt},lt}(),ft=function(){function lt(pt){var gt=Object(S.b)("defs"),ut=Object(r.H)("defs_");gt.id=ut,pt.appendChild(gt),this.children=[],this.defaultArrow={},this.el=gt,this.canvas=pt}return lt.prototype.find=function(pt,gt){for(var ut=this.children,Bt=null,Lt=0;Lt<ut.length;Lt++)if(ut[Lt].match(pt,gt)){Bt=ut[Lt].id;break}return Bt},lt.prototype.findById=function(pt){for(var gt=this.children,ut=null,Bt=0;Bt<gt.length;Bt++)if(gt[Bt].id===pt){ut=gt[Bt];break}return ut},lt.prototype.add=function(pt){this.children.push(pt),pt.canvas=this.canvas,pt.parent=this},lt.prototype.getDefaultArrow=function(pt,gt){var ut=pt.stroke||pt.strokeStyle;if(this.defaultArrow[ut])return this.defaultArrow[ut].id;var Bt=new P(pt,gt);return this.defaultArrow[ut]=Bt,this.el.appendChild(Bt.el),this.add(Bt),Bt.id},lt.prototype.addGradient=function(pt){var gt=new A(pt);return this.el.appendChild(gt.el),this.add(gt),gt.id},lt.prototype.addArrow=function(pt,gt){var ut=new P(pt,gt);return this.el.appendChild(ut.el),this.add(ut),ut.id},lt.prototype.addShadow=function(pt){var gt=new j(pt);return this.el.appendChild(gt.el),this.add(gt),gt.id},lt.prototype.addPattern=function(pt){var gt=new $(pt);return this.el.appendChild(gt.el),this.add(gt),gt.id},lt.prototype.addClip=function(pt){var gt=new W(pt);return this.el.appendChild(gt.el),this.add(gt),gt.id},lt}(),Z=function(lt){function pt(gt){return lt.call(this,Object(n.a)(Object(n.a)({},gt),{autoDraw:!0,renderer:"svg"}))||this}return Object(n.b)(pt,lt),pt.prototype.getShapeBase=function(){return I},pt.prototype.getGroupBase=function(){return m.a},pt.prototype.getShape=function(gt,ut,Bt){var Lt=Bt.target||Bt.srcElement;if(!p.a[Lt.tagName]){for(var St=Lt.parentNode;St&&!p.a[St.tagName];)St=St.parentNode;Lt=St}return this.find(function(K){return K.get("el")===Lt})},pt.prototype.createDom=function(){var gt=Object(S.b)("svg"),ut=new ft(gt);return gt.setAttribute("width",""+this.get("width")),gt.setAttribute("height",""+this.get("height")),this.set("context",ut),gt},pt.prototype.onCanvasChange=function(gt){var ut=this.get("context"),Bt=this.get("el");if(gt==="sort"){var Lt=this.get("children");Lt&&Lt.length&&Object(S.d)(this,function(K,dt){return Lt.indexOf(K)-Lt.indexOf(dt)?1:0})}else if(gt==="clear"){if(Bt){Bt.innerHTML="";var St=ut.el;St.innerHTML="",Bt.appendChild(St)}}else gt==="matrix"?Object(c.c)(this):gt==="clip"?Object(c.a)(this,ut):gt==="changeSize"&&(Bt.setAttribute("width",""+this.get("width")),Bt.setAttribute("height",""+this.get("height")))},pt.prototype.draw=function(){var gt=this.get("context"),ut=this.getChildren();Object(c.a)(this,gt),ut.length&&Object(b.a)(gt,ut)},pt}(u.AbstractCanvas);y.a=Z},function(i,y,t){"use strict";var n=t(1),u=t(18);function p(s,d,C){var E=s.getTotalMatrix();if(E){var A=function(f,x){if(x){var j=Object(u.invert)(x);return Object(u.multiplyVec2)(j,f)}return f}([d,C,1],E);return[A[0],A[1]]}return[d,C]}function b(s,d,C){if(s.isCanvas&&s.isCanvas())return!0;if(!Object(u.isAllowCapture)(s)||s.cfg.isInView===!1)return!1;if(s.cfg.clipShape){var E=p(s,d,C),A=E[0],f=E[1];if(s.isClipped(A,f))return!1}var x=s.cfg.cacheCanvasBBox||s.getCanvasBBox();return d>=x.minX&&d<=x.maxX&&C>=x.minY&&C<=x.maxY}var c=t(56),S=t(76),I=t(17),m=t(29),r=function(s){function d(){return s!==null&&s.apply(this,arguments)||this}return Object(n.b)(d,s),d.prototype.getDefaultCfg=function(){var C=s.prototype.getDefaultCfg.call(this);return C.renderer="canvas",C.autoDraw=!0,C.localRefresh=!0,C.refreshElements=[],C.clipView=!0,C.quickHit=!1,C},d.prototype.onCanvasChange=function(C){C!=="attr"&&C!=="sort"&&C!=="changeSize"||(this.set("refreshElements",[this]),this.draw())},d.prototype.getShapeBase=function(){return c},d.prototype.getGroupBase=function(){return S.a},d.prototype.getPixelRatio=function(){var C=this.get("pixelRatio")||Object(I.d)();return C>=1?Math.ceil(C):1},d.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},d.prototype.createDom=function(){var C=document.createElement("canvas"),E=C.getContext("2d");return this.set("context",E),C},d.prototype.setDOMSize=function(C,E){s.prototype.setDOMSize.call(this,C,E);var A=this.get("context"),f=this.get("el"),x=this.getPixelRatio();f.width=x*C,f.height=x*E,x>1&&A.scale(x,x)},d.prototype.clear=function(){s.prototype.clear.call(this),this._clearFrame();var C=this.get("context"),E=this.get("el");C.clearRect(0,0,E.width,E.height)},d.prototype.getShape=function(C,E){return this.get("quickHit")?function A(f,x,j){if(!b(f,x,j))return null;for(var P=null,W=f.getChildren(),X=W.length-1;X>=0;X--){var $=W[X];if($.isGroup())P=A($,x,j);else if(b($,x,j)){var ft=$,Z=p($,x,j),lt=Z[0],pt=Z[1];ft.isInShape(lt,pt)&&(P=$)}if(P)break}return P}(this,C,E):s.prototype.getShape.call(this,C,E,null)},d.prototype._getRefreshRegion=function(){var C,E=this.get("refreshElements"),A=this.getViewRange();return E.length&&E[0]===this?C=A:(C=Object(m.f)(E))&&(C.minX=Math.floor(C.minX),C.minY=Math.floor(C.minY),C.maxX=Math.ceil(C.maxX),C.maxY=Math.ceil(C.maxY),C.maxY+=1,this.get("clipView")&&(C=Object(m.g)(C,A))),C},d.prototype.refreshElement=function(C){this.get("refreshElements").push(C)},d.prototype._clearFrame=function(){var C=this.get("drawFrame");C&&(Object(I.a)(C),this.set("drawFrame",null),this.set("refreshElements",[]))},d.prototype.draw=function(){var C=this.get("drawFrame");this.get("autoDraw")&&C||this._startDraw()},d.prototype._drawAll=function(){var C=this.get("context"),E=this.get("el"),A=this.getChildren();C.clearRect(0,0,E.width,E.height),Object(m.a)(C,this),Object(m.d)(C,A),this.set("refreshElements",[])},d.prototype._drawRegion=function(){var C=this.get("context"),E=this.get("refreshElements"),A=this.getChildren(),f=this._getRefreshRegion();f?(C.clearRect(f.minX,f.minY,f.maxX-f.minX,f.maxY-f.minY),C.save(),C.beginPath(),C.rect(f.minX,f.minY,f.maxX-f.minX,f.maxY-f.minY),C.clip(),Object(m.a)(C,this),Object(m.b)(this,A,f),Object(m.d)(C,A,f),C.restore()):E.length&&Object(m.c)(E),Object(I.c)(E,function(x){x.get("hasChanged")&&x.set("hasChanged",!1)}),this.set("refreshElements",[])},d.prototype._startDraw=function(){var C=this,E=this.get("drawFrame");E||(E=Object(I.n)(function(){C.get("localRefresh")?C._drawRegion():C._drawAll(),C.set("drawFrame",null)}),this.set("drawFrame",E))},d.prototype.skipDraw=function(){},d}(u.AbstractCanvas);y.a=r},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var n=t(473);y.default=function(u,p){return p===void 0&&(p=!0),{lazyInject:n.makePropertyInjectDecorator(u,p),lazyInjectNamed:n.makePropertyInjectNamedDecorator(u,p),lazyInjectTagged:n.makePropertyInjectTaggedDecorator(u,p),lazyMultiInject:n.makePropertyMultiInjectDecorator(u,p)}}},function(i,y,t){var n=t(202);i.exports=function(u){return u&&u.length?n(u):[]}},function(i,y,t){var n,u,p;function b(c){return(b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(c)}p=function(){"use strict";var S=function(sn){return sn instanceof Uint8Array||sn instanceof Uint16Array||sn instanceof Uint32Array||sn instanceof Int8Array||sn instanceof Int16Array||sn instanceof Int32Array||sn instanceof Float32Array||sn instanceof Float64Array||sn instanceof Uint8ClampedArray},I=function(sn,un){for(var ur=Object.keys(un),jr=0;jr<ur.length;++jr)sn[ur[jr]]=un[ur[jr]];return sn};function m(tn){var sn=new Error("(regl) "+tn);throw console.error(sn),sn}function r(tn,sn){tn||m(sn)}function s(tn){return tn?": "+tn:""}function d(tn,sn){switch(sn){case"number":return typeof tn=="number";case"object":return b(tn)==="object";case"string":return typeof tn=="string";case"boolean":return typeof tn=="boolean";case"function":return typeof tn=="function";case"undefined":return tn===void 0;case"symbol":return b(tn)==="symbol"}}function C(tn,sn,un){sn.indexOf(tn)<0&&m("invalid value"+s(un)+". must be one of: "+sn)}var E=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function A(tn,sn){for(tn+="";tn.length<sn;)tn=" "+tn;return tn}function f(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function x(tn,sn){this.number=tn,this.line=sn,this.errors=[]}function j(tn,sn,un){this.file=tn,this.line=sn,this.message=un}function P(){var tn=new Error,sn=(tn.stack||tn).toString(),un=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(sn);if(un)return un[1];var ur=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(sn);return ur?ur[1]:"unknown"}function W(){var tn=new Error,sn=(tn.stack||tn).toString(),un=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(sn);if(un)return un[1];var ur=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(sn);return ur?ur[1]:"unknown"}function X(tn,sn){var un,ur=tn.split(`
`),jr=1,wr=0,yr={unknown:new f,0:new f};yr.unknown.name=yr[0].name=sn||P(),yr.unknown.lines.push(new x(0,""));for(var ni=0;ni<ur.length;++ni){var _r=ur[ni],Fr=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(_r);if(Fr)switch(Fr[1]){case"line":var Lr=/(\d+)(\s+\d+)?/.exec(Fr[2]);Lr&&(jr=0|Lr[1],Lr[2]&&((wr=0|Lr[2])in yr||(yr[wr]=new f)));break;case"define":var Gr=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Fr[2]);Gr&&(yr[wr].name=Gr[1]?(un=Gr[2],typeof atob!="undefined"?atob(un):"base64:"+un):Gr[2])}yr[wr].lines.push(new x(jr++,_r))}return Object.keys(yr).forEach(function(Hr){var ei=yr[Hr];ei.lines.forEach(function(Kr){ei.index[Kr.number]=Kr})}),yr}function $(tn){tn._commandRef=P()}function ft(tn,sn){var un=W();m(tn+" in command "+(sn||P())+(un==="unknown"?"":" called from "+un))}function Z(tn,sn,un,ur){d(tn,sn)||ft("invalid parameter type"+s(un)+". expected "+sn+", got "+b(tn),ur||P())}var lt={};function pt(tn,sn){return tn===32820||tn===32819||tn===33635?2:tn===34042?4:lt[tn]*sn}function gt(tn){return!(tn&tn-1||!tn)}lt[5120]=lt[5121]=1,lt[5122]=lt[5123]=lt[36193]=lt[33635]=lt[32819]=lt[32820]=2,lt[5124]=lt[5125]=lt[5126]=lt[34042]=4;var ut=I(r,{optional:function(sn){sn()},raise:m,commandRaise:ft,command:function(sn,un,ur){sn||ft(un,ur||P())},parameter:function(sn,un,ur){sn in un||m("unknown parameter ("+sn+")"+s(ur)+". possible values: "+Object.keys(un).join())},commandParameter:function(sn,un,ur,jr){sn in un||ft("unknown parameter ("+sn+")"+s(ur)+". possible values: "+Object.keys(un).join(),jr||P())},constructor:function(sn){Object.keys(sn).forEach(function(un){E.indexOf(un)<0&&m('invalid regl constructor argument "'+un+'". must be one of '+E)})},type:function(sn,un,ur){d(sn,un)||m("invalid parameter type"+s(ur)+". expected "+un+", got "+b(sn))},commandType:Z,isTypedArray:function(sn,un){S(sn)||m("invalid parameter type"+s(un)+". must be a typed array")},nni:function(sn,un){sn>=0&&(0|sn)===sn||m("invalid parameter type, ("+sn+")"+s(un)+". must be a nonnegative integer")},oneOf:C,shaderError:function(sn,un,ur,jr,wr){if(!sn.getShaderParameter(un,sn.COMPILE_STATUS)){var yr=sn.getShaderInfoLog(un),ni=jr===sn.FRAGMENT_SHADER?"fragment":"vertex";Z(ur,"string",ni+" shader source must be a string",wr);var _r=X(ur,wr),Fr=function(Lr){var Gr=[];return Lr.split(`
`).forEach(function(Hr){if(!(Hr.length<5)){var ei=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Hr);ei?Gr.push(new j(0|ei[1],0|ei[2],ei[3].trim())):Hr.length>0&&Gr.push(new j("unknown",0,Hr))}}),Gr}(yr);(function(Lr,Gr){Gr.forEach(function(Hr){var ei=Lr[Hr.file];if(ei){var Kr=ei.index[Hr.line];if(Kr)return Kr.errors.push(Hr),void(ei.hasErrors=!0)}Lr.unknown.hasErrors=!0,Lr.unknown.lines[0].errors.push(Hr)})})(_r,Fr),Object.keys(_r).forEach(function(Lr){var Gr=_r[Lr];if(Gr.hasErrors){var Hr=[""],ei=[""];Kr("file number "+Lr+": "+Gr.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Gr.lines.forEach(function(Qr){if(Qr.errors.length>0){Kr(A(Qr.number,4)+"|  ","background-color:yellow; font-weight:bold"),Kr(Qr.line+`
`,"color:red; background-color:yellow; font-weight:bold");var Oi=0;Qr.errors.forEach(function(Ri){var Si=Ri.message,Gi=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Si);if(Gi){var ca=Gi[1];switch(Si=Gi[2],ca){case"assign":ca="="}Oi=Math.max(Qr.line.indexOf(ca,Oi),0)}else Oi=0;Kr(A("| ",6)),Kr(A("^^^",Oi+3)+`
`,"font-weight:bold"),Kr(A("| ",6)),Kr(Si+`
`,"font-weight:bold")}),Kr(A("| ",6)+`
`)}else Kr(A(Qr.number,4)+"|  "),Kr(Qr.line+`
`,"color:red")}),typeof document=="undefined"||window.chrome?console.log(Hr.join("")):(ei[0]=Hr.join("%c"),console.log.apply(console,ei))}function Kr(Qr,Oi){Hr.push(Qr),ei.push(Oi||"")}}),r.raise("Error compiling "+ni+" shader, "+_r[0].name)}},linkError:function(sn,un,ur,jr,wr){if(!sn.getProgramParameter(un,sn.LINK_STATUS)){var yr=sn.getProgramInfoLog(un),ni=X(ur,wr),_r='Error linking program with vertex shader, "'+X(jr,wr)[0].name+'", and fragment shader "'+ni[0].name+'"';typeof document!="undefined"?console.log("%c"+_r+`
%c`+yr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(_r+`
`+yr),r.raise(_r)}},callSite:W,saveCommandRef:$,saveDrawInfo:function(sn,un,ur,jr){function wr(Fr){return Fr?jr.id(Fr):0}function yr(Fr,Lr){Object.keys(Lr).forEach(function(Gr){Fr[jr.id(Gr)]=!0})}$(sn),sn._fragId=wr(sn.static.frag),sn._vertId=wr(sn.static.vert);var ni=sn._uniformSet={};yr(ni,un.static),yr(ni,un.dynamic);var _r=sn._attributeSet={};yr(_r,ur.static),yr(_r,ur.dynamic),sn._hasCount="count"in sn.static||"count"in sn.dynamic||"elements"in sn.static||"elements"in sn.dynamic},framebufferFormat:function(sn,un,ur){sn.texture?C(sn.texture._texture.internalformat,un,"unsupported texture format for attachment"):C(sn.renderbuffer._renderbuffer.format,ur,"unsupported renderbuffer format for attachment")},guessCommand:P,texture2D:function(sn,un,ur){var jr,wr=un.width,yr=un.height,ni=un.channels;r(wr>0&&wr<=ur.maxTextureSize&&yr>0&&yr<=ur.maxTextureSize,"invalid texture shape"),sn.wrapS===33071&&sn.wrapT===33071||r(gt(wr)&&gt(yr),"incompatible wrap mode for texture, both width and height must be power of 2"),un.mipmask===1?wr!==1&&yr!==1&&r(sn.minFilter!==9984&&sn.minFilter!==9986&&sn.minFilter!==9985&&sn.minFilter!==9987,"min filter requires mipmap"):(r(gt(wr)&&gt(yr),"texture must be a square power of 2 to support mipmapping"),r(un.mipmask===(wr<<1)-1,"missing or incomplete mipmap data")),un.type===5126&&(ur.extensions.indexOf("oes_texture_float_linear")<0&&r(sn.minFilter===9728&&sn.magFilter===9728,"filter not supported, must enable oes_texture_float_linear"),r(!sn.genMipmaps,"mipmap generation not supported with float textures"));var _r=un.images;for(jr=0;jr<16;++jr)if(_r[jr]){var Fr=wr>>jr,Lr=yr>>jr;r(un.mipmask&1<<jr,"missing mipmap data");var Gr=_r[jr];if(r(Gr.width===Fr&&Gr.height===Lr,"invalid shape for mip images"),r(Gr.format===un.format&&Gr.internalformat===un.internalformat&&Gr.type===un.type,"incompatible type for mip image"),!Gr.compressed)if(Gr.data){var Hr=Math.ceil(pt(Gr.type,ni)*Fr/Gr.unpackAlignment)*Gr.unpackAlignment;r(Gr.data.byteLength===Hr*Lr,"invalid data for image, buffer size is inconsistent with image format")}else Gr.element||Gr.copy}else sn.genMipmaps||r((un.mipmask&1<<jr)==0,"extra mipmap data");un.compressed&&r(!sn.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(sn,un,ur,jr){var wr=sn.width,yr=sn.height,ni=sn.channels;r(wr>0&&wr<=jr.maxTextureSize&&yr>0&&yr<=jr.maxTextureSize,"invalid texture shape"),r(wr===yr,"cube map must be square"),r(un.wrapS===33071&&un.wrapT===33071,"wrap mode not supported by cube map");for(var _r=0;_r<ur.length;++_r){var Fr=ur[_r];r(Fr.width===wr&&Fr.height===yr,"inconsistent cube map face shape"),un.genMipmaps&&(r(!Fr.compressed,"can not generate mipmap for compressed textures"),r(Fr.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Lr=Fr.images,Gr=0;Gr<16;++Gr){var Hr=Lr[Gr];if(Hr){var ei=wr>>Gr,Kr=yr>>Gr;r(Fr.mipmask&1<<Gr,"missing mipmap data"),r(Hr.width===ei&&Hr.height===Kr,"invalid shape for mip images"),r(Hr.format===sn.format&&Hr.internalformat===sn.internalformat&&Hr.type===sn.type,"incompatible type for mip image"),Hr.compressed||(Hr.data?r(Hr.data.byteLength===ei*Kr*Math.max(pt(Hr.type,ni),Hr.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Hr.element||Hr.copy)}}}}}),Bt=0;function Lt(tn,sn){this.id=Bt++,this.type=tn,this.data=sn}function St(tn){return tn.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function K(tn){return"["+function sn(un){if(un.length===0)return[];var ur=un.charAt(0),jr=un.charAt(un.length-1);if(un.length>1&&ur===jr&&(ur==='"'||ur==="'"))return['"'+St(un.substr(1,un.length-2))+'"'];var wr=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(un);if(wr)return sn(un.substr(0,wr.index)).concat(sn(wr[1])).concat(sn(un.substr(wr.index+wr[0].length)));var yr=un.split(".");if(yr.length===1)return['"'+St(un)+'"'];for(var ni=[],_r=0;_r<yr.length;++_r)ni=ni.concat(sn(yr[_r]));return ni}(tn).join("][")+"]"}var dt={DynamicVariable:Lt,define:function(sn,un){return new Lt(sn,K(un+""))},isDynamic:function(sn){return typeof sn=="function"&&!sn._reglType||sn instanceof Lt},unbox:function tn(sn,un){return typeof sn=="function"?new Lt(0,sn):typeof sn=="number"||typeof sn=="boolean"?new Lt(5,sn):Array.isArray(sn)?new Lt(6,sn.map(function(ur,jr){return tn(ur,un+"["+jr+"]")})):sn instanceof Lt?sn:void ut(!1,"invalid option type in uniform "+un)},accessor:K},mt={next:typeof requestAnimationFrame=="function"?function(tn){return requestAnimationFrame(tn)}:function(tn){return setTimeout(tn,16)},cancel:typeof cancelAnimationFrame=="function"?function(tn){return cancelAnimationFrame(tn)}:clearTimeout},bt=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function wt(tn){return typeof tn=="string"?tn.split():(ut(Array.isArray(tn),"invalid extension array"),tn)}function J(tn){return typeof tn=="string"?(ut(typeof document!="undefined","not supported outside of DOM"),document.querySelector(tn)):tn}function ct(tn){var sn,un,ur,jr,wr,yr=tn||{},ni={},_r=[],Fr=[],Lr=typeof window=="undefined"?1:window.devicePixelRatio,Gr=!1,Hr=function(Oi){Oi&&ut.raise(Oi)},ei=function(){};if(typeof yr=="string"?(ut(typeof document!="undefined","selector queries only supported in DOM enviroments"),sn=document.querySelector(yr),ut(sn,"invalid query string for element")):b(yr)==="object"?typeof(wr=yr).nodeName=="string"&&typeof wr.appendChild=="function"&&typeof wr.getBoundingClientRect=="function"?sn=yr:function(Qr){return typeof Qr.drawArrays=="function"||typeof Qr.drawElements=="function"}(yr)?ur=(jr=yr).canvas:(ut.constructor(yr),"gl"in yr?jr=yr.gl:"canvas"in yr?ur=J(yr.canvas):"container"in yr&&(un=J(yr.container)),"attributes"in yr&&(ni=yr.attributes,ut.type(ni,"object","invalid context attributes")),"extensions"in yr&&(_r=wt(yr.extensions)),"optionalExtensions"in yr&&(Fr=wt(yr.optionalExtensions)),"onDone"in yr&&(ut.type(yr.onDone,"function","invalid or missing onDone callback"),Hr=yr.onDone),"profile"in yr&&(Gr=!!yr.profile),"pixelRatio"in yr&&(Lr=+yr.pixelRatio,ut(Lr>0,"invalid pixel ratio"))):ut.raise("invalid arguments to regl"),sn&&(sn.nodeName.toLowerCase()==="canvas"?ur=sn:un=sn),!jr){if(!ur){ut(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var Kr=function(Qr,Oi,Ri){var Si,Gi=document.createElement("canvas");function ca(){var ha=window.innerWidth,na=window.innerHeight;if(Qr!==document.body){var Zi=Qr.getBoundingClientRect();ha=Zi.right-Zi.left,na=Zi.bottom-Zi.top}Gi.width=Ri*ha,Gi.height=Ri*na,I(Gi.style,{width:ha+"px",height:na+"px"})}return I(Gi.style,{border:0,margin:0,padding:0,top:0,left:0}),Qr.appendChild(Gi),Qr===document.body&&(Gi.style.position="absolute",I(Qr.style,{margin:0,padding:0})),Qr!==document.body&&typeof ResizeObserver=="function"?(Si=new ResizeObserver(function(){setTimeout(ca)})).observe(Qr):window.addEventListener("resize",ca,!1),ca(),{canvas:Gi,onDestroy:function(){Si?Si.disconnect():window.removeEventListener("resize",ca),Qr.removeChild(Gi)}}}(un||document.body,0,Lr);if(!Kr)return null;ur=Kr.canvas,ei=Kr.onDestroy}ni.premultipliedAlpha===void 0&&(ni.premultipliedAlpha=!0),jr=function(Qr,Oi){function Ri(Si){try{return Qr.getContext(Si,Oi)}catch(Gi){return null}}return Ri("webgl")||Ri("experimental-webgl")||Ri("webgl-experimental")}(ur,ni)}return jr?{gl:jr,canvas:ur,container:un,extensions:_r,optionalExtensions:Fr,pixelRatio:Lr,profile:Gr,onDone:Hr,onDestroy:ei}:(ei(),Hr("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function it(tn,sn){for(var un=Array(tn),ur=0;ur<tn;++ur)un[ur]=sn(ur);return un}function _(tn){var sn,un;return sn=(tn>65535)<<4,sn|=un=((tn>>>=sn)>255)<<3,sn|=un=((tn>>>=un)>15)<<2,(sn|=un=((tn>>>=un)>3)<<1)|(tn>>>=un)>>1}function R(){var tn=it(8,function(){return[]});function sn(ur){var jr=function(yr){for(var ni=16;ni<=1<<28;ni*=16)if(yr<=ni)return ni;return 0}(ur),wr=tn[_(jr)>>2];return wr.length>0?wr.pop():new ArrayBuffer(jr)}function un(ur){tn[_(ur.byteLength)>>2].push(ur)}return{alloc:sn,free:un,allocType:function(jr,wr){var yr=null;switch(jr){case 5120:yr=new Int8Array(sn(wr),0,wr);break;case 5121:yr=new Uint8Array(sn(wr),0,wr);break;case 5122:yr=new Int16Array(sn(2*wr),0,wr);break;case 5123:yr=new Uint16Array(sn(2*wr),0,wr);break;case 5124:yr=new Int32Array(sn(4*wr),0,wr);break;case 5125:yr=new Uint32Array(sn(4*wr),0,wr);break;case 5126:yr=new Float32Array(sn(4*wr),0,wr);break;default:return null}return yr.length!==wr?yr.subarray(0,wr):yr},freeType:function(jr){un(jr.buffer)}}}var Q=R();function k(tn){return!!tn&&b(tn)==="object"&&Array.isArray(tn.shape)&&Array.isArray(tn.stride)&&typeof tn.offset=="number"&&tn.shape.length===tn.stride.length&&(Array.isArray(tn.data)||S(tn.data))}Q.zero=R();var g=function(sn){return Object.keys(sn).map(function(un){return sn[un]})},O={shape:function(sn){for(var un=[],ur=sn;ur.length;ur=ur[0])un.push(ur.length);return un},flatten:function(sn,un,ur,jr){var wr=1;if(un.length)for(var yr=0;yr<un.length;++yr)wr*=un[yr];else wr=0;var ni=jr||Q.allocType(ur,wr);switch(un.length){case 0:break;case 1:(function(_r,Fr,Lr){for(var Gr=0;Gr<Fr;++Gr)Lr[Gr]=_r[Gr]})(sn,un[0],ni);break;case 2:(function(_r,Fr,Lr,Gr){for(var Hr=0,ei=0;ei<Fr;++ei)for(var Kr=_r[ei],Qr=0;Qr<Lr;++Qr)Gr[Hr++]=Kr[Qr]})(sn,un[0],un[1],ni);break;case 3:F(sn,un[0],un[1],un[2],ni,0);break;default:(function _r(Fr,Lr,Gr,Hr,ei){for(var Kr=1,Qr=Gr+1;Qr<Lr.length;++Qr)Kr*=Lr[Qr];var Oi=Lr[Gr];if(Lr.length-Gr==4){var Ri=Lr[Gr+1],Si=Lr[Gr+2],Gi=Lr[Gr+3];for(Qr=0;Qr<Oi;++Qr)F(Fr[Qr],Ri,Si,Gi,Hr,ei),ei+=Kr}else for(Qr=0;Qr<Oi;++Qr)_r(Fr[Qr],Lr,Gr+1,Hr,ei),ei+=Kr})(sn,un,0,ni,0)}return ni}};function F(tn,sn,un,ur,jr,wr){for(var yr=wr,ni=0;ni<sn;++ni)for(var _r=tn[ni],Fr=0;Fr<un;++Fr)for(var Lr=_r[Fr],Gr=0;Gr<ur;++Gr)jr[yr++]=Lr[Gr]}var V={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},rt={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},ot={dynamic:35048,stream:35040,static:35044},st=O.flatten,Mt=O.shape,yt=[];function xt(tn){return 0|V[Object.prototype.toString.call(tn)]}function Ot(tn,sn){for(var un=0;un<sn.length;++un)tn[un]=sn[un]}function jt(tn,sn,un,ur,jr,wr,yr){for(var ni=0,_r=0;_r<un;++_r)for(var Fr=0;Fr<ur;++Fr)tn[ni++]=sn[jr*_r+wr*Fr+yr]}yt[5120]=1,yt[5122]=2,yt[5124]=4,yt[5121]=1,yt[5123]=2,yt[5125]=4,yt[5126]=4;var Dt={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},zt=new Float32Array(1),Tt=new Uint32Array(zt.buffer);function Wt(tn){for(var sn=Q.allocType(5123,tn.length),un=0;un<tn.length;++un)if(isNaN(tn[un]))sn[un]=65535;else if(tn[un]===1/0)sn[un]=31744;else if(tn[un]===-1/0)sn[un]=64512;else{zt[0]=tn[un];var ur=Tt[0],jr=ur>>>31<<15,wr=(ur<<1>>>24)-127,yr=ur>>13&1023;if(wr<-24)sn[un]=jr;else if(wr<-14){var ni=-14-wr;sn[un]=jr+(yr+1024>>ni)}else sn[un]=wr>15?jr+31744:jr+(wr+15<<10)+yr}return sn}function Ht(tn){return Array.isArray(tn)||S(tn)}var re=function(sn){return!(sn&sn-1||!sn)},pe=[9984,9986,9985,9987],me=[0,6409,6410,6407,6408],Se={};function Le(tn){return"[object "+tn+"]"}Se[6409]=Se[6406]=Se[6402]=1,Se[34041]=Se[6410]=2,Se[6407]=Se[35904]=3,Se[6408]=Se[35906]=4;var Je=Le("HTMLCanvasElement"),On=Le("OffscreenCanvas"),gn=Le("CanvasRenderingContext2D"),Wn=Le("ImageBitmap"),kn=Le("HTMLImageElement"),Vn=Le("HTMLVideoElement"),Dn=Object.keys(V).concat([Je,On,gn,Wn,kn,Vn]),Nn=[];Nn[5121]=1,Nn[5126]=4,Nn[36193]=2,Nn[5123]=2,Nn[5125]=4;var Qn=[];function ir(tn){return Array.isArray(tn)&&(tn.length===0||typeof tn[0]=="number")}function hr(tn){return!!Array.isArray(tn)&&!(tn.length===0||!Ht(tn[0]))}function Sr(tn){return Object.prototype.toString.call(tn)}function mr(tn){return Sr(tn)===Je}function dr(tn){return Sr(tn)===On}function Br(tn){if(!tn)return!1;var sn=Sr(tn);return Dn.indexOf(sn)>=0||ir(tn)||hr(tn)||k(tn)}function ii(tn){return 0|V[Object.prototype.toString.call(tn)]}function mi(tn,sn){return Q.allocType(tn.type===36193?5126:tn.type,sn)}function Pi(tn,sn){tn.type===36193?(tn.data=Wt(sn),Q.freeType(sn)):tn.data=sn}function sa(tn,sn,un,ur,jr,wr){var yr;if(yr=Qn[tn]!==void 0?Qn[tn]:Se[tn]*Nn[sn],wr&&(yr*=6),jr){for(var ni=0,_r=un;_r>=1;)ni+=yr*_r*_r,_r/=2;return ni}return yr*un*ur}function Pa(tn,sn,un,ur,jr,wr,yr){var ni={"don't care":4352,"dont care":4352,nice:4354,fast:4353},_r={repeat:10497,clamp:33071,mirror:33648},Fr={nearest:9728,linear:9729},Lr=I({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Fr),Gr={none:0,browser:37444},Hr={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},ei={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Kr={};sn.ext_srgb&&(ei.srgb=35904,ei.srgba=35906),sn.oes_texture_float&&(Hr.float32=Hr.float=5126),sn.oes_texture_half_float&&(Hr.float16=Hr["half float"]=36193),sn.webgl_depth_texture&&(I(ei,{depth:6402,"depth stencil":34041}),I(Hr,{uint16:5123,uint32:5125,"depth stencil":34042})),sn.webgl_compressed_texture_s3tc&&I(Kr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),sn.webgl_compressed_texture_atc&&I(Kr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),sn.webgl_compressed_texture_pvrtc&&I(Kr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),sn.webgl_compressed_texture_etc1&&(Kr["rgb etc1"]=36196);var Qr=Array.prototype.slice.call(tn.getParameter(34467));Object.keys(Kr).forEach(function(Zt){var de=Kr[Zt];Qr.indexOf(de)>=0&&(ei[Zt]=de)});var Oi=Object.keys(ei);un.textureFormats=Oi;var Ri=[];Object.keys(ei).forEach(function(Zt){var de=ei[Zt];Ri[de]=Zt});var Si=[];Object.keys(Hr).forEach(function(Zt){var de=Hr[Zt];Si[de]=Zt});var Gi=[];Object.keys(Fr).forEach(function(Zt){Gi[Fr[Zt]]=Zt});var ca=[];Object.keys(Lr).forEach(function(Zt){var de=Lr[Zt];ca[de]=Zt});var ha=[];Object.keys(_r).forEach(function(Zt){ha[_r[Zt]]=Zt});var na=Oi.reduce(function(Zt,de){var he=ei[de];return he===6409||he===6406||he===6409||he===6410||he===6402||he===34041||sn.ext_srgb&&(he===35904||he===35906)?Zt[he]=he:he===32855||de.indexOf("rgba")>=0?Zt[he]=6408:Zt[he]=6407,Zt},{});function Zi(){this.internalformat=6408,this.format=6408,this.type=5121,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0}function ve(Zt,de){Zt.internalformat=de.internalformat,Zt.format=de.format,Zt.type=de.type,Zt.compressed=de.compressed,Zt.premultiplyAlpha=de.premultiplyAlpha,Zt.flipY=de.flipY,Zt.unpackAlignment=de.unpackAlignment,Zt.colorSpace=de.colorSpace,Zt.width=de.width,Zt.height=de.height,Zt.channels=de.channels}function U(Zt,de){if(b(de)==="object"&&de){if("premultiplyAlpha"in de&&(ut.type(de.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Zt.premultiplyAlpha=de.premultiplyAlpha),"flipY"in de&&(ut.type(de.flipY,"boolean","invalid texture flip"),Zt.flipY=de.flipY),"alignment"in de&&(ut.oneOf(de.alignment,[1,2,4,8],"invalid texture unpack alignment"),Zt.unpackAlignment=de.alignment),"colorSpace"in de&&(ut.parameter(de.colorSpace,Gr,"invalid colorSpace"),Zt.colorSpace=Gr[de.colorSpace]),"type"in de){var he=de.type;ut(sn.oes_texture_float||!(he==="float"||he==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),ut(sn.oes_texture_half_float||!(he==="half float"||he==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),ut(sn.webgl_depth_texture||!(he==="uint16"||he==="uint32"||he==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ut.parameter(he,Hr,"invalid texture type"),Zt.type=Hr[he]}var le=Zt.width,Me=Zt.height,Ve=Zt.channels,Ye=!1;"shape"in de?(ut(Array.isArray(de.shape)&&de.shape.length>=2,"shape must be an array"),le=de.shape[0],Me=de.shape[1],de.shape.length===3&&(Ve=de.shape[2],ut(Ve>0&&Ve<=4,"invalid number of channels"),Ye=!0),ut(le>=0&&le<=un.maxTextureSize,"invalid width"),ut(Me>=0&&Me<=un.maxTextureSize,"invalid height")):("radius"in de&&(le=Me=de.radius,ut(le>=0&&le<=un.maxTextureSize,"invalid radius")),"width"in de&&(le=de.width,ut(le>=0&&le<=un.maxTextureSize,"invalid width")),"height"in de&&(Me=de.height,ut(Me>=0&&Me<=un.maxTextureSize,"invalid height")),"channels"in de&&(Ve=de.channels,ut(Ve>0&&Ve<=4,"invalid number of channels"),Ye=!0)),Zt.width=0|le,Zt.height=0|Me,Zt.channels=0|Ve;var ke=!1;if("format"in de){var nn=de.format;ut(sn.webgl_depth_texture||!(nn==="depth"||nn==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ut.parameter(nn,ei,"invalid texture format");var Re=Zt.internalformat=ei[nn];Zt.format=na[Re],nn in Hr&&("type"in de||(Zt.type=Hr[nn])),nn in Kr&&(Zt.compressed=!0),ke=!0}!Ye&&ke?Zt.channels=Se[Zt.format]:Ye&&!ke?Zt.channels!==me[Zt.format]&&(Zt.format=Zt.internalformat=me[Zt.channels]):ke&&Ye&&ut(Zt.channels===Se[Zt.format],"number of channels inconsistent with specified format")}}function G(Zt){tn.pixelStorei(37440,Zt.flipY),tn.pixelStorei(37441,Zt.premultiplyAlpha),tn.pixelStorei(37443,Zt.colorSpace),tn.pixelStorei(3317,Zt.unpackAlignment)}function nt(){Zi.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function vt(Zt,de){var he=null;if(Br(de)?he=de:de&&(ut.type(de,"object","invalid pixel data type"),U(Zt,de),"x"in de&&(Zt.xOffset=0|de.x),"y"in de&&(Zt.yOffset=0|de.y),Br(de.data)&&(he=de.data)),ut(!Zt.compressed||he instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),de.copy){ut(!he,"can not specify copy and data field for the same texture");var le=jr.viewportWidth,Me=jr.viewportHeight;Zt.width=Zt.width||le-Zt.xOffset,Zt.height=Zt.height||Me-Zt.yOffset,Zt.needsCopy=!0,ut(Zt.xOffset>=0&&Zt.xOffset<le&&Zt.yOffset>=0&&Zt.yOffset<Me&&Zt.width>0&&Zt.width<=le&&Zt.height>0&&Zt.height<=Me,"copy texture read out of bounds")}else if(he){if(S(he))Zt.channels=Zt.channels||4,Zt.data=he,"type"in de||Zt.type!==5121||(Zt.type=ii(he));else if(ir(he))Zt.channels=Zt.channels||4,function(_e,dn){var Sn=dn.length;switch(_e.type){case 5121:case 5123:case 5125:case 5126:var tr=Q.allocType(_e.type,Sn);tr.set(dn),_e.data=tr;break;case 36193:_e.data=Wt(dn);break;default:ut.raise("unsupported texture type, must specify a typed array")}}(Zt,he),Zt.alignment=1,Zt.needsFree=!0;else if(k(he)){var Ve=he.data;Array.isArray(Ve)||Zt.type!==5121||(Zt.type=ii(Ve));var Ye,ke,nn,Re,hn,pn,on=he.shape,mn=he.stride;on.length===3?(nn=on[2],pn=mn[2]):(ut(on.length===2,"invalid ndarray pixel data, must be 2 or 3D"),nn=1,pn=1),Ye=on[0],ke=on[1],Re=mn[0],hn=mn[1],Zt.alignment=1,Zt.width=Ye,Zt.height=ke,Zt.channels=nn,Zt.format=Zt.internalformat=me[nn],Zt.needsFree=!0,function(_e,dn,Sn,tr,Pn,Fn){for(var Cr=_e.width,fi=_e.height,ri=_e.channels,zr=mi(_e,Cr*fi*ri),wi=0,Ai=0;Ai<fi;++Ai)for(var gi=0;gi<Cr;++gi)for(var Oa=0;Oa<ri;++Oa)zr[wi++]=dn[Sn*gi+tr*Ai+Pn*Oa+Fn];Pi(_e,zr)}(Zt,Ve,Re,hn,pn,he.offset)}else if(mr(he)||dr(he)||Sr(he)===gn)mr(he)||dr(he)?Zt.element=he:Zt.element=he.canvas,Zt.width=Zt.element.width,Zt.height=Zt.element.height,Zt.channels=4;else if(function(_e){return Sr(_e)===Wn}(he))Zt.element=he,Zt.width=he.width,Zt.height=he.height,Zt.channels=4;else if(function(_e){return Sr(_e)===kn}(he))Zt.element=he,Zt.width=he.naturalWidth,Zt.height=he.naturalHeight,Zt.channels=4;else if(function(_e){return Sr(_e)===Vn}(he))Zt.element=he,Zt.width=he.videoWidth,Zt.height=he.videoHeight,Zt.channels=4;else if(hr(he)){var jn=Zt.width||he[0].length,Ie=Zt.height||he.length,fe=Zt.channels;fe=Ht(he[0][0])?fe||he[0][0].length:fe||1;for(var Ne=O.shape(he),Fe=1,rn=0;rn<Ne.length;++rn)Fe*=Ne[rn];var ln=mi(Zt,Fe);O.flatten(he,Ne,"",ln),Pi(Zt,ln),Zt.alignment=1,Zt.width=jn,Zt.height=Ie,Zt.channels=fe,Zt.format=Zt.internalformat=me[fe],Zt.needsFree=!0}}else Zt.width=Zt.width||1,Zt.height=Zt.height||1,Zt.channels=Zt.channels||4;Zt.type===5126?ut(un.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Zt.type===36193&&ut(un.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Gt(Zt,de,he){var le=Zt.element,Me=Zt.data,Ve=Zt.internalformat,Ye=Zt.format,ke=Zt.type,nn=Zt.width,Re=Zt.height;G(Zt),le?tn.texImage2D(de,he,Ye,Ye,ke,le):Zt.compressed?tn.compressedTexImage2D(de,he,Ve,nn,Re,0,Me):Zt.needsCopy?(ur(),tn.copyTexImage2D(de,he,Ye,Zt.xOffset,Zt.yOffset,nn,Re,0)):tn.texImage2D(de,he,Ye,nn,Re,0,Ye,ke,Me||null)}function Jt(Zt,de,he,le,Me){var Ve=Zt.element,Ye=Zt.data,ke=Zt.internalformat,nn=Zt.format,Re=Zt.type,hn=Zt.width,pn=Zt.height;G(Zt),Ve?tn.texSubImage2D(de,Me,he,le,nn,Re,Ve):Zt.compressed?tn.compressedTexSubImage2D(de,Me,he,le,ke,hn,pn,Ye):Zt.needsCopy?(ur(),tn.copyTexSubImage2D(de,Me,he,le,Zt.xOffset,Zt.yOffset,hn,pn)):tn.texSubImage2D(de,Me,he,le,hn,pn,nn,Re,Ye)}var ie=[];function ue(){return ie.pop()||new nt}function Ce(Zt){Zt.needsFree&&Q.freeType(Zt.data),nt.call(Zt),ie.push(Zt)}function we(){Zi.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function cn(Zt,de,he){var le=Zt.images[0]=ue();Zt.mipmask=1,le.width=Zt.width=de,le.height=Zt.height=he,le.channels=Zt.channels=4}function Cn(Zt,de){var he=null;if(Br(de))ve(he=Zt.images[0]=ue(),Zt),vt(he,de),Zt.mipmask=1;else if(U(Zt,de),Array.isArray(de.mipmap))for(var le=de.mipmap,Me=0;Me<le.length;++Me)ve(he=Zt.images[Me]=ue(),Zt),he.width>>=Me,he.height>>=Me,vt(he,le[Me]),Zt.mipmask|=1<<Me;else ve(he=Zt.images[0]=ue(),Zt),vt(he,de),Zt.mipmask=1;ve(Zt,Zt.images[0]),!Zt.compressed||Zt.internalformat!==33776&&Zt.internalformat!==33777&&Zt.internalformat!==33778&&Zt.internalformat!==33779||ut(Zt.width%4==0&&Zt.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function _t(Zt,de){for(var he=Zt.images,le=0;le<he.length;++le){if(!he[le])return;Gt(he[le],de,le)}}var Xt=[];function Ee(){var Zt=Xt.pop()||new we;Zi.call(Zt),Zt.mipmask=0;for(var de=0;de<16;++de)Zt.images[de]=null;return Zt}function Vt(Zt){for(var de=Zt.images,he=0;he<de.length;++he)de[he]&&Ce(de[he]),de[he]=null;Xt.push(Zt)}function ce(){this.minFilter=9728,this.magFilter=9728,this.wrapS=33071,this.wrapT=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function yn(Zt,de){if("min"in de){var he=de.min;ut.parameter(he,Lr),Zt.minFilter=Lr[he],pe.indexOf(Zt.minFilter)>=0&&!("faces"in de)&&(Zt.genMipmaps=!0)}if("mag"in de){var le=de.mag;ut.parameter(le,Fr),Zt.magFilter=Fr[le]}var Me=Zt.wrapS,Ve=Zt.wrapT;if("wrap"in de){var Ye=de.wrap;typeof Ye=="string"?(ut.parameter(Ye,_r),Me=Ve=_r[Ye]):Array.isArray(Ye)&&(ut.parameter(Ye[0],_r),ut.parameter(Ye[1],_r),Me=_r[Ye[0]],Ve=_r[Ye[1]])}else{if("wrapS"in de){var ke=de.wrapS;ut.parameter(ke,_r),Me=_r[ke]}if("wrapT"in de){var nn=de.wrapT;ut.parameter(nn,_r),Ve=_r[nn]}}if(Zt.wrapS=Me,Zt.wrapT=Ve,"anisotropic"in de){var Re=de.anisotropic;ut(typeof Re=="number"&&Re>=1&&Re<=un.maxAnisotropic,"aniso samples must be between 1 and "),Zt.anisotropic=de.anisotropic}if("mipmap"in de){var hn=!1;switch(b(de.mipmap)){case"string":ut.parameter(de.mipmap,ni,"invalid mipmap hint"),Zt.mipmapHint=ni[de.mipmap],Zt.genMipmaps=!0,hn=!0;break;case"boolean":hn=Zt.genMipmaps=de.mipmap;break;case"object":ut(Array.isArray(de.mipmap),"invalid mipmap type"),Zt.genMipmaps=!1,hn=!0;break;default:ut.raise("invalid mipmap type")}hn&&!("min"in de)&&(Zt.minFilter=9984)}}function Bn(Zt,de){tn.texParameteri(de,10241,Zt.minFilter),tn.texParameteri(de,10240,Zt.magFilter),tn.texParameteri(de,10242,Zt.wrapS),tn.texParameteri(de,10243,Zt.wrapT),sn.ext_texture_filter_anisotropic&&tn.texParameteri(de,34046,Zt.anisotropic),Zt.genMipmaps&&(tn.hint(33170,Zt.mipmapHint),tn.generateMipmap(de))}var Zn=0,Kn={},$e=un.maxTextureUnits,je=Array($e).map(function(){return null});function L(Zt){Zi.call(this),this.mipmask=0,this.internalformat=6408,this.id=Zn++,this.refCount=1,this.target=Zt,this.texture=tn.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new ce,yr.profile&&(this.stats={size:0})}function Et(Zt){tn.activeTexture(33984),tn.bindTexture(Zt.target,Zt.texture)}function $t(){var Zt=je[0];Zt?tn.bindTexture(Zt.target,Zt.texture):tn.bindTexture(3553,null)}function ye(Zt){var de=Zt.texture;ut(de,"must not double destroy texture");var he=Zt.unit,le=Zt.target;he>=0&&(tn.activeTexture(33984+he),tn.bindTexture(le,null),je[he]=null),tn.deleteTexture(de),Zt.texture=null,Zt.params=null,Zt.pixels=null,Zt.refCount=0,delete Kn[Zt.id],wr.textureCount--}return I(L.prototype,{bind:function(){this.bindCount+=1;var de=this.unit;if(de<0){for(var he=0;he<$e;++he){var le=je[he];if(le){if(le.bindCount>0)continue;le.unit=-1}je[he]=this,de=he;break}de>=$e&&ut.raise("insufficient number of texture units"),yr.profile&&wr.maxTextureUnits<de+1&&(wr.maxTextureUnits=de+1),this.unit=de,tn.activeTexture(33984+de),tn.bindTexture(this.target,this.texture)}return de},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&ye(this)}}),yr.profile&&(wr.getTotalTextureSize=function(){var Zt=0;return Object.keys(Kn).forEach(function(de){Zt+=Kn[de].stats.size}),Zt}),{create2D:function(de,he){var le=new L(3553);function Me(Ve,Ye){var ke=le.texInfo;ce.call(ke);var nn=Ee();return typeof Ve=="number"?cn(nn,0|Ve,typeof Ye=="number"?0|Ye:0|Ve):Ve?(ut.type(Ve,"object","invalid arguments to regl.texture"),yn(ke,Ve),Cn(nn,Ve)):cn(nn,1,1),ke.genMipmaps&&(nn.mipmask=(nn.width<<1)-1),le.mipmask=nn.mipmask,ve(le,nn),ut.texture2D(ke,nn,un),le.internalformat=nn.internalformat,Me.width=nn.width,Me.height=nn.height,Et(le),_t(nn,3553),Bn(ke,3553),$t(),Vt(nn),yr.profile&&(le.stats.size=sa(le.internalformat,le.type,nn.width,nn.height,ke.genMipmaps,!1)),Me.format=Ri[le.internalformat],Me.type=Si[le.type],Me.mag=Gi[ke.magFilter],Me.min=ca[ke.minFilter],Me.wrapS=ha[ke.wrapS],Me.wrapT=ha[ke.wrapT],Me}return Kn[le.id]=le,wr.textureCount++,Me(de,he),Me.subimage=function(Ve,Ye,ke,nn){ut(!!Ve,"must specify image data");var Re=0|Ye,hn=0|ke,pn=0|nn,on=ue();return ve(on,le),on.width=0,on.height=0,vt(on,Ve),on.width=on.width||(le.width>>pn)-Re,on.height=on.height||(le.height>>pn)-hn,ut(le.type===on.type&&le.format===on.format&&le.internalformat===on.internalformat,"incompatible format for texture.subimage"),ut(Re>=0&&hn>=0&&Re+on.width<=le.width&&hn+on.height<=le.height,"texture.subimage write out of bounds"),ut(le.mipmask&1<<pn,"missing mipmap data"),ut(on.data||on.element||on.needsCopy,"missing image data"),Et(le),Jt(on,3553,Re,hn,pn),$t(),Ce(on),Me},Me.resize=function(Ve,Ye){var ke=0|Ve,nn=0|Ye||ke;if(ke===le.width&&nn===le.height)return Me;Me.width=le.width=ke,Me.height=le.height=nn,Et(le);for(var Re=0;le.mipmask>>Re;++Re){var hn=ke>>Re,pn=nn>>Re;if(!hn||!pn)break;tn.texImage2D(3553,Re,le.format,hn,pn,0,le.format,le.type,null)}return $t(),yr.profile&&(le.stats.size=sa(le.internalformat,le.type,ke,nn,!1,!1)),Me},Me._reglType="texture2d",Me._texture=le,yr.profile&&(Me.stats=le.stats),Me.destroy=function(){le.decRef()},Me},createCube:function(de,he,le,Me,Ve,Ye){var ke=new L(34067);Kn[ke.id]=ke,wr.cubeCount++;var nn=new Array(6);function Re(hn,pn,on,mn,jn,Ie){var fe,Ne=ke.texInfo;for(ce.call(Ne),fe=0;fe<6;++fe)nn[fe]=Ee();if(typeof hn!="number"&&hn)if(b(hn)==="object")if(pn)Cn(nn[0],hn),Cn(nn[1],pn),Cn(nn[2],on),Cn(nn[3],mn),Cn(nn[4],jn),Cn(nn[5],Ie);else if(yn(Ne,hn),U(ke,hn),"faces"in hn){var Fe=hn.faces;for(ut(Array.isArray(Fe)&&Fe.length===6,"cube faces must be a length 6 array"),fe=0;fe<6;++fe)ut(b(Fe[fe])==="object"&&!!Fe[fe],"invalid input for cube map face"),ve(nn[fe],ke),Cn(nn[fe],Fe[fe])}else for(fe=0;fe<6;++fe)Cn(nn[fe],hn);else ut.raise("invalid arguments to cube map");else{var rn=0|hn||1;for(fe=0;fe<6;++fe)cn(nn[fe],rn,rn)}for(ve(ke,nn[0]),un.npotTextureCube||ut(re(ke.width)&&re(ke.height),"your browser does not support non power or two texture dimensions"),Ne.genMipmaps?ke.mipmask=(nn[0].width<<1)-1:ke.mipmask=nn[0].mipmask,ut.textureCube(ke,Ne,nn,un),ke.internalformat=nn[0].internalformat,Re.width=nn[0].width,Re.height=nn[0].height,Et(ke),fe=0;fe<6;++fe)_t(nn[fe],34069+fe);for(Bn(Ne,34067),$t(),yr.profile&&(ke.stats.size=sa(ke.internalformat,ke.type,Re.width,Re.height,Ne.genMipmaps,!0)),Re.format=Ri[ke.internalformat],Re.type=Si[ke.type],Re.mag=Gi[Ne.magFilter],Re.min=ca[Ne.minFilter],Re.wrapS=ha[Ne.wrapS],Re.wrapT=ha[Ne.wrapT],fe=0;fe<6;++fe)Vt(nn[fe]);return Re}return Re(de,he,le,Me,Ve,Ye),Re.subimage=function(hn,pn,on,mn,jn){ut(!!pn,"must specify image data"),ut(typeof hn=="number"&&hn===(0|hn)&&hn>=0&&hn<6,"invalid face");var Ie=0|on,fe=0|mn,Ne=0|jn,Fe=ue();return ve(Fe,ke),Fe.width=0,Fe.height=0,vt(Fe,pn),Fe.width=Fe.width||(ke.width>>Ne)-Ie,Fe.height=Fe.height||(ke.height>>Ne)-fe,ut(ke.type===Fe.type&&ke.format===Fe.format&&ke.internalformat===Fe.internalformat,"incompatible format for texture.subimage"),ut(Ie>=0&&fe>=0&&Ie+Fe.width<=ke.width&&fe+Fe.height<=ke.height,"texture.subimage write out of bounds"),ut(ke.mipmask&1<<Ne,"missing mipmap data"),ut(Fe.data||Fe.element||Fe.needsCopy,"missing image data"),Et(ke),Jt(Fe,34069+hn,Ie,fe,Ne),$t(),Ce(Fe),Re},Re.resize=function(hn){var pn=0|hn;if(pn!==ke.width){Re.width=ke.width=pn,Re.height=ke.height=pn,Et(ke);for(var on=0;on<6;++on)for(var mn=0;ke.mipmask>>mn;++mn)tn.texImage2D(34069+on,mn,ke.format,pn>>mn,pn>>mn,0,ke.format,ke.type,null);return $t(),yr.profile&&(ke.stats.size=sa(ke.internalformat,ke.type,Re.width,Re.height,!1,!0)),Re}},Re._reglType="textureCube",Re._texture=ke,yr.profile&&(Re.stats=ke.stats),Re.destroy=function(){ke.decRef()},Re},clear:function(){for(var de=0;de<$e;++de)tn.activeTexture(33984+de),tn.bindTexture(3553,null),je[de]=null;g(Kn).forEach(ye),wr.cubeCount=0,wr.textureCount=0},getTexture:function(de){return null},restore:function(){for(var de=0;de<$e;++de){var he=je[de];he&&(he.bindCount=0,he.unit=-1,je[de]=null)}g(Kn).forEach(function(le){le.texture=tn.createTexture(),tn.bindTexture(le.target,le.texture);for(var Me=0;Me<32;++Me)if((le.mipmask&1<<Me)!=0)if(le.target===3553)tn.texImage2D(3553,Me,le.internalformat,le.width>>Me,le.height>>Me,0,le.internalformat,le.type,null);else for(var Ve=0;Ve<6;++Ve)tn.texImage2D(34069+Ve,Me,le.internalformat,le.width>>Me,le.height>>Me,0,le.internalformat,le.type,null);Bn(le.texInfo,le.target)})},refresh:function(){for(var de=0;de<$e;++de){var he=je[de];he&&(he.bindCount=0,he.unit=-1,je[de]=null),tn.activeTexture(33984+de),tn.bindTexture(3553,null),tn.bindTexture(34067,null)}}}}Qn[32854]=2,Qn[32855]=2,Qn[36194]=2,Qn[34041]=4,Qn[33776]=.5,Qn[33777]=.5,Qn[33778]=1,Qn[33779]=1,Qn[35986]=.5,Qn[35987]=1,Qn[34798]=1,Qn[35840]=.5,Qn[35841]=.25,Qn[35842]=.5,Qn[35843]=.25,Qn[36196]=.5;var Mi=[];function Ki(tn,sn,un){return Mi[tn]*sn*un}Mi[32854]=2,Mi[32855]=2,Mi[36194]=2,Mi[33189]=2,Mi[36168]=1,Mi[34041]=4,Mi[35907]=4,Mi[34836]=16,Mi[34842]=8,Mi[34843]=6;var fa=[6407,6408],oa=[];oa[6408]=4,oa[6407]=3;var pa=[];pa[5121]=1,pa[5126]=4,pa[36193]=2;var La=[32854,32855,36194,35907,34842,34843,34836],Yr={};function Sa(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0}function Pr(tn,sn,un,ur,jr,wr,yr){function ni(_r){var Fr;sn.next===null?(ut(jr.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Fr=5121):(ut(sn.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Fr=sn.next.colorAttachments[0].texture._texture.type,wr.oes_texture_float?(ut(Fr===5121||Fr===5126,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Fr===5126&&ut(yr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):ut(Fr===5121,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Lr=0,Gr=0,Hr=ur.framebufferWidth,ei=ur.framebufferHeight,Kr=null;S(_r)?Kr=_r:_r&&(ut.type(_r,"object","invalid arguments to regl.read()"),Lr=0|_r.x,Gr=0|_r.y,ut(Lr>=0&&Lr<ur.framebufferWidth,"invalid x offset for regl.read"),ut(Gr>=0&&Gr<ur.framebufferHeight,"invalid y offset for regl.read"),Hr=0|(_r.width||ur.framebufferWidth-Lr),ei=0|(_r.height||ur.framebufferHeight-Gr),Kr=_r.data||null),Kr&&(Fr===5121?ut(Kr instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Fr===5126&&ut(Kr instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),ut(Hr>0&&Hr+Lr<=ur.framebufferWidth,"invalid width for read pixels"),ut(ei>0&&ei+Gr<=ur.framebufferHeight,"invalid height for read pixels"),un();var Qr=Hr*ei*4;return Kr||(Fr===5121?Kr=new Uint8Array(Qr):Fr===5126&&(Kr=Kr||new Float32Array(Qr))),ut.isTypedArray(Kr,"data buffer for regl.read() must be a typedarray"),ut(Kr.byteLength>=Qr,"data buffer for regl.read() too small"),tn.pixelStorei(3333,4),tn.readPixels(Lr,Gr,Hr,ei,6408,Fr,Kr),Kr}return function(_r){return _r&&"framebuffer"in _r?function(Fr){var Lr;return sn.setFBO({framebuffer:Fr.framebuffer},function(){Lr=ni(Fr)}),Lr}(_r):ni(_r)}}function si(tn){return Array.prototype.slice.call(tn)}function ti(tn){return si(tn).join("")}Yr[36053]="complete",Yr[36054]="incomplete attachment",Yr[36057]="incomplete dimensions",Yr[36055]="incomplete, missing attachment",Yr[36061]="unsupported";var $r="xyzw".split(""),ui="profile",li="framebuffer",xi="vert",Ci="frag",di="elements",Ti="primitive",pi="count",Ni="offset",Bi="instances",Fi="vao",ma=li+"Width",ua=li+"Height",Ra=["blend.func","blend.equation","stencil.func","stencil.opFront","stencil.opBack","sample.coverage","viewport","scissor.box","polygonOffset.offset"],xa={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ma=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Qi={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ka={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},vo={frag:35632,vert:35633},za={cw:2304,ccw:2305};function Ga(tn){return Array.isArray(tn)||S(tn)||k(tn)}function eo(tn){return tn.sort(function(sn,un){return sn==="viewport"?-1:un==="viewport"?1:sn<un?-1:1})}function ae(tn,sn,un,ur){this.thisDep=tn,this.contextDep=sn,this.propDep=un,this.append=ur}function Kt(tn){return tn&&!(tn.thisDep||tn.contextDep||tn.propDep)}function te(tn){return new ae(!1,!1,!1,tn)}function Oe(tn,sn){var un=tn.type;if(un===0){var ur=tn.data.length;return new ae(!0,ur>=1,ur>=2,sn)}if(un===4){var jr=tn.data;return new ae(jr.thisDep,jr.contextDep,jr.propDep,sn)}if(un===5)return new ae(!1,!1,!1,sn);if(un===6){for(var wr=!1,yr=!1,ni=!1,_r=0;_r<tn.data.length;++_r){var Fr=tn.data[_r];if(Fr.type===1)ni=!0;else if(Fr.type===2)yr=!0;else if(Fr.type===3)wr=!0;else if(Fr.type===0){wr=!0;var Lr=Fr.data;Lr>=1&&(yr=!0),Lr>=2&&(ni=!0)}else Fr.type===4&&(wr=wr||Fr.data.thisDep,yr=yr||Fr.data.contextDep,ni=ni||Fr.data.propDep)}return new ae(wr,yr,ni,sn)}return new ae(un===3,un===2,un===1,sn)}var Ze=new ae(!1,!1,!1,function(){});function An(tn,sn,un,ur,jr,wr,yr,ni,_r,Fr,Lr,Gr,Hr,ei,Kr){var Qr=Fr.Record,Oi={add:32774,subtract:32778,"reverse subtract":32779};un.ext_blend_minmax&&(Oi.min=32775,Oi.max=32776);var Ri=un.angle_instanced_arrays,Si=un.webgl_draw_buffers,Gi={dirty:!0,profile:Kr.profile},ca={},ha=[],na={},Zi={};function ve($e){return $e.replace(".","_")}function U($e,je,L){var Et=ve($e);ha.push($e),ca[Et]=Gi[Et]=!!L,na[Et]=je}function G($e,je,L){var Et=ve($e);ha.push($e),Array.isArray(L)?(Gi[Et]=L.slice(),ca[Et]=L.slice()):Gi[Et]=ca[Et]=L,Zi[Et]=je}U("dither",3024),U("blend.enable",3042),G("blend.color","blendColor",[0,0,0,0]),G("blend.equation","blendEquationSeparate",[32774,32774]),G("blend.func","blendFuncSeparate",[1,0,1,0]),U("depth.enable",2929,!0),G("depth.func","depthFunc",513),G("depth.range","depthRange",[0,1]),G("depth.mask","depthMask",!0),G("colorMask","colorMask",[!0,!0,!0,!0]),U("cull.enable",2884),G("cull.face","cullFace",1029),G("frontFace","frontFace",2305),G("lineWidth","lineWidth",1),U("polygonOffset.enable",32823),G("polygonOffset.offset","polygonOffset",[0,0]),U("sample.alpha",32926),U("sample.enable",32928),G("sample.coverage","sampleCoverage",[1,!1]),U("stencil.enable",2960),G("stencil.mask","stencilMask",-1),G("stencil.func","stencilFunc",[519,0,-1]),G("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),G("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),U("scissor.enable",3089),G("scissor.box","scissor",[0,0,tn.drawingBufferWidth,tn.drawingBufferHeight]),G("viewport","viewport",[0,0,tn.drawingBufferWidth,tn.drawingBufferHeight]);var nt={gl:tn,context:Hr,strings:sn,next:ca,current:Gi,draw:Gr,elements:wr,buffer:jr,shader:Lr,attributes:Fr.state,vao:Fr,uniforms:_r,framebuffer:ni,extensions:un,timer:ei,isBufferArgs:Ga},vt={primTypes:Dt,compareFuncs:Qi,blendFuncs:xa,blendEquations:Oi,stencilOps:ka,glTypes:rt,orientationType:za};ut.optional(function(){nt.isArrayLike=Ht}),Si&&(vt.backBuffer=[1029],vt.drawBuffer=it(ur.maxDrawbuffers,function($e){return $e===0?[0]:it($e,function(je){return 36064+je})}));var Gt=0;function Jt(){var $e=function(){var le=0,Me=[],Ve=[];function Ye(){var hn=[],pn=[];return I(function(){hn.push.apply(hn,si(arguments))},{def:function(){var mn="v"+le++;return pn.push(mn),arguments.length>0&&(hn.push(mn,"="),hn.push.apply(hn,si(arguments)),hn.push(";")),mn},toString:function(){return ti([pn.length>0?"var "+pn.join(",")+";":"",ti(hn)])}})}function ke(){var hn=Ye(),pn=Ye(),on=hn.toString,mn=pn.toString;function jn(Ie,fe){pn(Ie,fe,"=",hn.def(Ie,fe),";")}return I(function(){hn.apply(hn,si(arguments))},{def:hn.def,entry:hn,exit:pn,save:jn,set:function(fe,Ne,Fe){jn(fe,Ne),hn(fe,Ne,"=",Fe,";")},toString:function(){return on()+mn()}})}var nn=Ye(),Re={};return{global:nn,link:function(pn){for(var on=0;on<Ve.length;++on)if(Ve[on]===pn)return Me[on];var mn="g"+le++;return Me.push(mn),Ve.push(pn),mn},block:Ye,proc:function(pn,on){var mn=[];function jn(){var Fe="a"+mn.length;return mn.push(Fe),Fe}on=on||0;for(var Ie=0;Ie<on;++Ie)jn();var fe=ke(),Ne=fe.toString;return Re[pn]=I(fe,{arg:jn,toString:function(){return ti(["function(",mn.join(),"){",Ne(),"}"])}})},scope:ke,cond:function(){var pn=ti(arguments),on=ke(),mn=ke(),jn=on.toString,Ie=mn.toString;return I(on,{then:function(){return on.apply(on,si(arguments)),this},else:function(){return mn.apply(mn,si(arguments)),this},toString:function(){var Ne=Ie();return Ne&&(Ne="else{"+Ne+"}"),ti(["if(",pn,"){",jn(),"}",Ne])}})},compile:function(){var pn=['"use strict";',nn,"return {"];Object.keys(Re).forEach(function(mn){pn.push('"',mn,'":',Re[mn].toString(),",")}),pn.push("}");var on=ti(pn).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return Function.apply(null,Me.concat(on)).apply(null,Ve)}}}(),je=$e.link,L=$e.global;$e.id=Gt++,$e.batchId="0";var Et=je(nt),$t=$e.shared={props:"a0"};Object.keys(nt).forEach(function(le){$t[le]=L.def(Et,".",le)}),ut.optional(function(){$e.CHECK=je(ut),$e.commandStr=ut.guessCommand(),$e.command=je($e.commandStr),$e.assert=function(le,Me,Ve){le("if(!(",Me,"))",this.CHECK,".commandRaise(",je(Ve),",",this.command,");")},vt.invalidBlendCombinations=Ma});var ye=$e.next={},Zt=$e.current={};Object.keys(Zi).forEach(function(le){Array.isArray(Gi[le])&&(ye[le]=L.def($t.next,".",le),Zt[le]=L.def($t.current,".",le))});var de=$e.constants={};Object.keys(vt).forEach(function(le){de[le]=L.def(JSON.stringify(vt[le]))}),$e.invoke=function(le,Me){switch(Me.type){case 0:var Ve=["this",$t.context,$t.props,$e.batchId];return le.def(je(Me.data),".call(",Ve.slice(0,Math.max(Me.data.length+1,4)),")");case 1:return le.def($t.props,Me.data);case 2:return le.def($t.context,Me.data);case 3:return le.def("this",Me.data);case 4:return Me.data.append($e,le),Me.data.ref;case 5:return Me.data.toString();case 6:return Me.data.map(function(Ye){return $e.invoke(le,Ye)})}},$e.attribCache={};var he={};return $e.scopeAttrib=function(le){var Me=sn.id(le);if(Me in he)return he[Me];var Ve=Fr.scope[Me];return Ve||(Ve=Fr.scope[Me]=new Qr),he[Me]=je(Ve)},$e}function ie($e,je,L,Et,$t){var ye=$e.static,Zt=$e.dynamic;ut.optional(function(){var mn=[li,xi,Ci,di,Ti,Ni,pi,Bi,ui,Fi].concat(ha);function jn(Ie){Object.keys(Ie).forEach(function(fe){ut.command(mn.indexOf(fe)>=0,'unknown parameter "'+fe+'"',$t.commandStr)})}jn(ye),jn(Zt)});var de=function(mn,jn){var Ie=mn.static;if(typeof Ie[Ci]=="string"&&typeof Ie[xi]=="string"){if(Object.keys(jn.dynamic).length>0)return null;var fe=jn.static,Ne=Object.keys(fe);if(Ne.length>0&&typeof fe[Ne[0]]=="number"){for(var Fe=[],rn=0;rn<Ne.length;++rn)ut(typeof fe[Ne[rn]]=="number","must specify all vertex attribute locations when using vaos"),Fe.push([0|fe[Ne[rn]],Ne[rn]]);return Fe}}return null}($e,je),he=function(mn,jn){var Ie=mn.static,fe=mn.dynamic;if(li in Ie){var Ne=Ie[li];return Ne?(Ne=ni.getFramebuffer(Ne),ut.command(Ne,"invalid framebuffer object"),te(function(rn,ln){var _e=rn.link(Ne),dn=rn.shared;ln.set(dn.framebuffer,".next",_e);var Sn=dn.context;return ln.set(Sn,"."+ma,_e+".width"),ln.set(Sn,"."+ua,_e+".height"),_e})):te(function(rn,ln){var _e=rn.shared;ln.set(_e.framebuffer,".next","null");var dn=_e.context;return ln.set(dn,"."+ma,dn+".drawingBufferWidth"),ln.set(dn,"."+ua,dn+".drawingBufferHeight"),"null"})}if(li in fe){var Fe=fe[li];return Oe(Fe,function(rn,ln){var _e=rn.invoke(ln,Fe),dn=rn.shared,Sn=dn.framebuffer,tr=ln.def(Sn,".getFramebuffer(",_e,")");ut.optional(function(){rn.assert(ln,"!"+_e+"||"+tr,"invalid framebuffer object")}),ln.set(Sn,".next",tr);var Pn=dn.context;return ln.set(Pn,"."+ma,tr+"?"+tr+".width:"+Pn+".drawingBufferWidth"),ln.set(Pn,"."+ua,tr+"?"+tr+".height:"+Pn+".drawingBufferHeight"),tr})}return null}($e),le=function(mn,jn,Ie){var fe=mn.static,Ne=mn.dynamic;function Fe(_e){if(_e in fe){var dn=fe[_e];ut.commandType(dn,"object","invalid "+_e,Ie.commandStr);var Sn,tr,Pn=!0,Fn=0|dn.x,Cr=0|dn.y;return"width"in dn?(Sn=0|dn.width,ut.command(Sn>=0,"invalid "+_e,Ie.commandStr)):Pn=!1,"height"in dn?(tr=0|dn.height,ut.command(tr>=0,"invalid "+_e,Ie.commandStr)):Pn=!1,new ae(!Pn&&jn&&jn.thisDep,!Pn&&jn&&jn.contextDep,!Pn&&jn&&jn.propDep,function(zr,wi){var Ai=zr.shared.context,gi=Sn;"width"in dn||(gi=wi.def(Ai,".",ma,"-",Fn));var Oa=tr;return"height"in dn||(Oa=wi.def(Ai,".",ua,"-",Cr)),[Fn,Cr,gi,Oa]})}if(_e in Ne){var fi=Ne[_e],ri=Oe(fi,function(zr,wi){var Ai=zr.invoke(wi,fi);ut.optional(function(){zr.assert(wi,Ai+"&&typeof "+Ai+'==="object"',"invalid "+_e)});var gi=zr.shared.context,Oa=wi.def(Ai,".x|0"),Aa=wi.def(Ai,".y|0"),Oo=wi.def('"width" in ',Ai,"?",Ai,".width|0:","(",gi,".",ma,"-",Oa,")"),Fo=wi.def('"height" in ',Ai,"?",Ai,".height|0:","(",gi,".",ua,"-",Aa,")");return ut.optional(function(){zr.assert(wi,Oo+">=0&&"+Fo+">=0","invalid "+_e)}),[Oa,Aa,Oo,Fo]});return jn&&(ri.thisDep=ri.thisDep||jn.thisDep,ri.contextDep=ri.contextDep||jn.contextDep,ri.propDep=ri.propDep||jn.propDep),ri}return jn?new ae(jn.thisDep,jn.contextDep,jn.propDep,function(zr,wi){var Ai=zr.shared.context;return[0,0,wi.def(Ai,".",ma),wi.def(Ai,".",ua)]}):null}var rn=Fe("viewport");if(rn){var ln=rn;rn=new ae(rn.thisDep,rn.contextDep,rn.propDep,function(_e,dn){var Sn=ln.append(_e,dn),tr=_e.shared.context;return dn.set(tr,".viewportWidth",Sn[2]),dn.set(tr,".viewportHeight",Sn[3]),Sn})}return{viewport:rn,scissor_box:Fe("scissor.box")}}($e,he,$t),Me=function(mn,jn){var Ie=mn.static,fe=mn.dynamic,Ne=function(){if(di in Ie){var ln=Ie[di];Ga(ln)?ln=wr.getElements(wr.create(ln,!0)):ln&&(ln=wr.getElements(ln),ut.command(ln,"invalid elements",jn.commandStr));var _e=te(function(Sn,tr){if(ln){var Pn=Sn.link(ln);return Sn.ELEMENTS=Pn,Pn}return Sn.ELEMENTS=null,null});return _e.value=ln,_e}if(di in fe){var dn=fe[di];return Oe(dn,function(Sn,tr){var Pn=Sn.shared,Fn=Pn.isBufferArgs,Cr=Pn.elements,fi=Sn.invoke(tr,dn),ri=tr.def("null"),zr=tr.def(Fn,"(",fi,")"),wi=Sn.cond(zr).then(ri,"=",Cr,".createStream(",fi,");").else(ri,"=",Cr,".getElements(",fi,");");return ut.optional(function(){Sn.assert(wi.else,"!"+fi+"||"+ri,"invalid elements")}),tr.entry(wi),tr.exit(Sn.cond(zr).then(Cr,".destroyStream(",ri,");")),Sn.ELEMENTS=ri,ri})}return null}();function Fe(ln,_e){if(ln in Ie){var dn=0|Ie[ln];return ut.command(!_e||dn>=0,"invalid "+ln,jn.commandStr),te(function(tr,Pn){return _e&&(tr.OFFSET=dn),dn})}if(ln in fe){var Sn=fe[ln];return Oe(Sn,function(tr,Pn){var Fn=tr.invoke(Pn,Sn);return _e&&(tr.OFFSET=Fn,ut.optional(function(){tr.assert(Pn,Fn+">=0","invalid "+ln)})),Fn})}return _e&&Ne?te(function(tr,Pn){return tr.OFFSET="0",0}):null}var rn=Fe(Ni,!0);return{elements:Ne,primitive:function(){if(Ti in Ie){var ln=Ie[Ti];return ut.commandParameter(ln,Dt,"invalid primitve",jn.commandStr),te(function(dn,Sn){return Dt[ln]})}if(Ti in fe){var _e=fe[Ti];return Oe(_e,function(dn,Sn){var tr=dn.constants.primTypes,Pn=dn.invoke(Sn,_e);return ut.optional(function(){dn.assert(Sn,Pn+" in "+tr,"invalid primitive, must be one of "+Object.keys(Dt))}),Sn.def(tr,"[",Pn,"]")})}return Ne?Kt(Ne)?Ne.value?te(function(dn,Sn){return Sn.def(dn.ELEMENTS,".primType")}):te(function(){return 4}):new ae(Ne.thisDep,Ne.contextDep,Ne.propDep,function(dn,Sn){var tr=dn.ELEMENTS;return Sn.def(tr,"?",tr,".primType:",4)}):null}(),count:function(){if(pi in Ie){var ln=0|Ie[pi];return ut.command(typeof ln=="number"&&ln>=0,"invalid vertex count",jn.commandStr),te(function(){return ln})}if(pi in fe){var _e=fe[pi];return Oe(_e,function(tr,Pn){var Fn=tr.invoke(Pn,_e);return ut.optional(function(){tr.assert(Pn,"typeof "+Fn+'==="number"&&'+Fn+">=0&&"+Fn+"===("+Fn+"|0)","invalid vertex count")}),Fn})}if(Ne){if(Kt(Ne)){if(Ne)return rn?new ae(rn.thisDep,rn.contextDep,rn.propDep,function(tr,Pn){var Fn=Pn.def(tr.ELEMENTS,".vertCount-",tr.OFFSET);return ut.optional(function(){tr.assert(Pn,Fn+">=0","invalid vertex offset/element buffer too small")}),Fn}):te(function(tr,Pn){return Pn.def(tr.ELEMENTS,".vertCount")});var dn=te(function(){return-1});return ut.optional(function(){dn.MISSING=!0}),dn}var Sn=new ae(Ne.thisDep||rn.thisDep,Ne.contextDep||rn.contextDep,Ne.propDep||rn.propDep,function(tr,Pn){var Fn=tr.ELEMENTS;return tr.OFFSET?Pn.def(Fn,"?",Fn,".vertCount-",tr.OFFSET,":-1"):Pn.def(Fn,"?",Fn,".vertCount:-1")});return ut.optional(function(){Sn.DYNAMIC=!0}),Sn}return null}(),instances:Fe(Bi,!1),offset:rn}}($e,$t),Ve=function(mn,jn){var Ie=mn.static,fe=mn.dynamic,Ne={};return ha.forEach(function(Fe){var rn=ve(Fe);function ln(_e,dn){if(Fe in Ie){var Sn=_e(Ie[Fe]);Ne[rn]=te(function(){return Sn})}else if(Fe in fe){var tr=fe[Fe];Ne[rn]=Oe(tr,function(Pn,Fn){return dn(Pn,Fn,Pn.invoke(Fn,tr))})}}switch(Fe){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return ln(function(_e){return ut.commandType(_e,"boolean",Fe,jn.commandStr),_e},function(_e,dn,Sn){return ut.optional(function(){_e.assert(dn,"typeof "+Sn+'==="boolean"',"invalid flag "+Fe,_e.commandStr)}),Sn});case"depth.func":return ln(function(_e){return ut.commandParameter(_e,Qi,"invalid "+Fe,jn.commandStr),Qi[_e]},function(_e,dn,Sn){var tr=_e.constants.compareFuncs;return ut.optional(function(){_e.assert(dn,Sn+" in "+tr,"invalid "+Fe+", must be one of "+Object.keys(Qi))}),dn.def(tr,"[",Sn,"]")});case"depth.range":return ln(function(_e){return ut.command(Ht(_e)&&_e.length===2&&typeof _e[0]=="number"&&typeof _e[1]=="number"&&_e[0]<=_e[1],"depth range is 2d array",jn.commandStr),_e},function(_e,dn,Sn){return ut.optional(function(){_e.assert(dn,_e.shared.isArrayLike+"("+Sn+")&&"+Sn+".length===2&&typeof "+Sn+'[0]==="number"&&typeof '+Sn+'[1]==="number"&&'+Sn+"[0]<="+Sn+"[1]","depth range must be a 2d array")}),[dn.def("+",Sn,"[0]"),dn.def("+",Sn,"[1]")]});case"blend.func":return ln(function(_e){ut.commandType(_e,"object","blend.func",jn.commandStr);var dn="srcRGB"in _e?_e.srcRGB:_e.src,Sn="srcAlpha"in _e?_e.srcAlpha:_e.src,tr="dstRGB"in _e?_e.dstRGB:_e.dst,Pn="dstAlpha"in _e?_e.dstAlpha:_e.dst;return ut.commandParameter(dn,xa,rn+".srcRGB",jn.commandStr),ut.commandParameter(Sn,xa,rn+".srcAlpha",jn.commandStr),ut.commandParameter(tr,xa,rn+".dstRGB",jn.commandStr),ut.commandParameter(Pn,xa,rn+".dstAlpha",jn.commandStr),ut.command(Ma.indexOf(dn+", "+tr)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+dn+", "+tr+")",jn.commandStr),[xa[dn],xa[tr],xa[Sn],xa[Pn]]},function(_e,dn,Sn){var tr=_e.constants.blendFuncs;function Pn(zr,wi){var Ai=dn.def('"',zr,wi,'" in ',Sn,"?",Sn,".",zr,wi,":",Sn,".",zr);return ut.optional(function(){_e.assert(dn,Ai+" in "+tr,"invalid "+Fe+"."+zr+wi+", must be one of "+Object.keys(xa))}),Ai}ut.optional(function(){_e.assert(dn,Sn+"&&typeof "+Sn+'==="object"',"invalid blend func, must be an object")});var Fn=Pn("src","RGB"),Cr=Pn("dst","RGB");ut.optional(function(){var zr=_e.constants.invalidBlendCombinations;_e.assert(dn,zr+".indexOf("+Fn+'+", "+'+Cr+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var fi=dn.def(tr,"[",Fn,"]"),ri=dn.def(tr,"[",Pn("src","Alpha"),"]");return[fi,dn.def(tr,"[",Cr,"]"),ri,dn.def(tr,"[",Pn("dst","Alpha"),"]")]});case"blend.equation":return ln(function(_e){return typeof _e=="string"?(ut.commandParameter(_e,Oi,"invalid "+Fe,jn.commandStr),[Oi[_e],Oi[_e]]):b(_e)==="object"?(ut.commandParameter(_e.rgb,Oi,Fe+".rgb",jn.commandStr),ut.commandParameter(_e.alpha,Oi,Fe+".alpha",jn.commandStr),[Oi[_e.rgb],Oi[_e.alpha]]):void ut.commandRaise("invalid blend.equation",jn.commandStr)},function(_e,dn,Sn){var tr=_e.constants.blendEquations,Pn=dn.def(),Fn=dn.def(),Cr=_e.cond("typeof ",Sn,'==="string"');return ut.optional(function(){function fi(ri,zr,wi){_e.assert(ri,wi+" in "+tr,"invalid "+zr+", must be one of "+Object.keys(Oi))}fi(Cr.then,Fe,Sn),_e.assert(Cr.else,Sn+"&&typeof "+Sn+'==="object"',"invalid "+Fe),fi(Cr.else,Fe+".rgb",Sn+".rgb"),fi(Cr.else,Fe+".alpha",Sn+".alpha")}),Cr.then(Pn,"=",Fn,"=",tr,"[",Sn,"];"),Cr.else(Pn,"=",tr,"[",Sn,".rgb];",Fn,"=",tr,"[",Sn,".alpha];"),dn(Cr),[Pn,Fn]});case"blend.color":return ln(function(_e){return ut.command(Ht(_e)&&_e.length===4,"blend.color must be a 4d array",jn.commandStr),it(4,function(dn){return+_e[dn]})},function(_e,dn,Sn){return ut.optional(function(){_e.assert(dn,_e.shared.isArrayLike+"("+Sn+")&&"+Sn+".length===4","blend.color must be a 4d array")}),it(4,function(tr){return dn.def("+",Sn,"[",tr,"]")})});case"stencil.mask":return ln(function(_e){return ut.commandType(_e,"number",rn,jn.commandStr),0|_e},function(_e,dn,Sn){return ut.optional(function(){_e.assert(dn,"typeof "+Sn+'==="number"',"invalid stencil.mask")}),dn.def(Sn,"|0")});case"stencil.func":return ln(function(_e){ut.commandType(_e,"object",rn,jn.commandStr);var dn=_e.cmp||"keep",Sn=_e.ref||0,tr="mask"in _e?_e.mask:-1;return ut.commandParameter(dn,Qi,Fe+".cmp",jn.commandStr),ut.commandType(Sn,"number",Fe+".ref",jn.commandStr),ut.commandType(tr,"number",Fe+".mask",jn.commandStr),[Qi[dn],Sn,tr]},function(_e,dn,Sn){var tr=_e.constants.compareFuncs;return ut.optional(function(){function Pn(){_e.assert(dn,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Pn(Sn+"&&typeof ",Sn,'==="object"'),Pn('!("cmp" in ',Sn,")||(",Sn,".cmp in ",tr,")")}),[dn.def('"cmp" in ',Sn,"?",tr,"[",Sn,".cmp]",":",7680),dn.def(Sn,".ref|0"),dn.def('"mask" in ',Sn,"?",Sn,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return ln(function(_e){ut.commandType(_e,"object",rn,jn.commandStr);var dn=_e.fail||"keep",Sn=_e.zfail||"keep",tr=_e.zpass||"keep";return ut.commandParameter(dn,ka,Fe+".fail",jn.commandStr),ut.commandParameter(Sn,ka,Fe+".zfail",jn.commandStr),ut.commandParameter(tr,ka,Fe+".zpass",jn.commandStr),[Fe==="stencil.opBack"?1029:1028,ka[dn],ka[Sn],ka[tr]]},function(_e,dn,Sn){var tr=_e.constants.stencilOps;function Pn(Fn){return ut.optional(function(){_e.assert(dn,'!("'+Fn+'" in '+Sn+")||("+Sn+"."+Fn+" in "+tr+")","invalid "+Fe+"."+Fn+", must be one of "+Object.keys(ka))}),dn.def('"',Fn,'" in ',Sn,"?",tr,"[",Sn,".",Fn,"]:",7680)}return ut.optional(function(){_e.assert(dn,Sn+"&&typeof "+Sn+'==="object"',"invalid "+Fe)}),[Fe==="stencil.opBack"?1029:1028,Pn("fail"),Pn("zfail"),Pn("zpass")]});case"polygonOffset.offset":return ln(function(_e){ut.commandType(_e,"object",rn,jn.commandStr);var dn=0|_e.factor,Sn=0|_e.units;return ut.commandType(dn,"number",rn+".factor",jn.commandStr),ut.commandType(Sn,"number",rn+".units",jn.commandStr),[dn,Sn]},function(_e,dn,Sn){return ut.optional(function(){_e.assert(dn,Sn+"&&typeof "+Sn+'==="object"',"invalid "+Fe)}),[dn.def(Sn,".factor|0"),dn.def(Sn,".units|0")]});case"cull.face":return ln(function(_e){var dn=0;return _e==="front"?dn=1028:_e==="back"&&(dn=1029),ut.command(!!dn,rn,jn.commandStr),dn},function(_e,dn,Sn){return ut.optional(function(){_e.assert(dn,Sn+'==="front"||'+Sn+'==="back"',"invalid cull.face")}),dn.def(Sn,'==="front"?',1028,":",1029)});case"lineWidth":return ln(function(_e){return ut.command(typeof _e=="number"&&_e>=ur.lineWidthDims[0]&&_e<=ur.lineWidthDims[1],"invalid line width, must be a positive number between "+ur.lineWidthDims[0]+" and "+ur.lineWidthDims[1],jn.commandStr),_e},function(_e,dn,Sn){return ut.optional(function(){_e.assert(dn,"typeof "+Sn+'==="number"&&'+Sn+">="+ur.lineWidthDims[0]+"&&"+Sn+"<="+ur.lineWidthDims[1],"invalid line width")}),Sn});case"frontFace":return ln(function(_e){return ut.commandParameter(_e,za,rn,jn.commandStr),za[_e]},function(_e,dn,Sn){return ut.optional(function(){_e.assert(dn,Sn+'==="cw"||'+Sn+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),dn.def(Sn+'==="cw"?2304:2305')});case"colorMask":return ln(function(_e){return ut.command(Ht(_e)&&_e.length===4,"color.mask must be length 4 array",jn.commandStr),_e.map(function(dn){return!!dn})},function(_e,dn,Sn){return ut.optional(function(){_e.assert(dn,_e.shared.isArrayLike+"("+Sn+")&&"+Sn+".length===4","invalid color.mask")}),it(4,function(tr){return"!!"+Sn+"["+tr+"]"})});case"sample.coverage":return ln(function(_e){ut.command(b(_e)==="object"&&_e,rn,jn.commandStr);var dn="value"in _e?_e.value:1,Sn=!!_e.invert;return ut.command(typeof dn=="number"&&dn>=0&&dn<=1,"sample.coverage.value must be a number between 0 and 1",jn.commandStr),[dn,Sn]},function(_e,dn,Sn){return ut.optional(function(){_e.assert(dn,Sn+"&&typeof "+Sn+'==="object"',"invalid sample.coverage")}),[dn.def('"value" in ',Sn,"?+",Sn,".value:1"),dn.def("!!",Sn,".invert")]})}}),Ne}($e,$t),Ye=function(mn,jn,Ie){var fe=mn.static,Ne=mn.dynamic;function Fe(Sn){if(Sn in fe){var tr=sn.id(fe[Sn]);ut.optional(function(){Lr.shader(vo[Sn],tr,ut.guessCommand())});var Pn=te(function(){return tr});return Pn.id=tr,Pn}if(Sn in Ne){var Fn=Ne[Sn];return Oe(Fn,function(Cr,fi){var ri=Cr.invoke(fi,Fn),zr=fi.def(Cr.shared.strings,".id(",ri,")");return ut.optional(function(){fi(Cr.shared.shader,".shader(",vo[Sn],",",zr,",",Cr.command,");")}),zr})}return null}var rn,ln=Fe(Ci),_e=Fe(xi),dn=null;return Kt(ln)&&Kt(_e)?(dn=Lr.program(_e.id,ln.id,null,Ie),rn=te(function(Sn,tr){return Sn.link(dn)})):rn=new ae(ln&&ln.thisDep||_e&&_e.thisDep,ln&&ln.contextDep||_e&&_e.contextDep,ln&&ln.propDep||_e&&_e.propDep,function(Sn,tr){var Pn,Fn=Sn.shared.shader;Pn=ln?ln.append(Sn,tr):tr.def(Fn,".",Ci);var Cr=Fn+".program("+(_e?_e.append(Sn,tr):tr.def(Fn,".",xi))+","+Pn;return ut.optional(function(){Cr+=","+Sn.command}),tr.def(Cr+")")}),{frag:ln,vert:_e,progVar:rn,program:dn}}($e,0,de);function ke(mn){var jn=le[mn];jn&&(Ve[mn]=jn)}ke("viewport"),ke(ve("scissor.box"));var nn=Object.keys(Ve).length>0,Re={framebuffer:he,draw:Me,shader:Ye,state:Ve,dirty:nn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Re.profile=function(mn){var jn,Ie=mn.static,fe=mn.dynamic;if(ui in Ie){var Ne=!!Ie[ui];(jn=te(function(rn,ln){return Ne})).enable=Ne}else if(ui in fe){var Fe=fe[ui];jn=Oe(Fe,function(rn,ln){return rn.invoke(ln,Fe)})}return jn}($e),Re.uniforms=function(mn,jn){var Ie=mn.static,fe=mn.dynamic,Ne={};return Object.keys(Ie).forEach(function(Fe){var rn,ln=Ie[Fe];if(typeof ln=="number"||typeof ln=="boolean")rn=te(function(){return ln});else if(typeof ln=="function"){var _e=ln._reglType;_e==="texture2d"||_e==="textureCube"?rn=te(function(dn){return dn.link(ln)}):_e==="framebuffer"||_e==="framebufferCube"?(ut.command(ln.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Fe+'"',jn.commandStr),rn=te(function(dn){return dn.link(ln.color[0])})):ut.commandRaise('invalid data for uniform "'+Fe+'"',jn.commandStr)}else Ht(ln)?rn=te(function(dn){return dn.global.def("[",it(ln.length,function(Sn){return ut.command(typeof ln[Sn]=="number"||typeof ln[Sn]=="boolean","invalid uniform "+Fe,dn.commandStr),ln[Sn]}),"]")}):ut.commandRaise('invalid or missing data for uniform "'+Fe+'"',jn.commandStr);rn.value=ln,Ne[Fe]=rn}),Object.keys(fe).forEach(function(Fe){var rn=fe[Fe];Ne[Fe]=Oe(rn,function(ln,_e){return ln.invoke(_e,rn)})}),Ne}(L,$t),Re.drawVAO=Re.scopeVAO=function(mn,jn){var Ie=mn.static,fe=mn.dynamic;if(Fi in Ie){var Ne=Ie[Fi];return Ne!==null&&Fr.getVAO(Ne)===null&&(Ne=Fr.createVAO(Ne)),te(function(rn){return rn.link(Fr.getVAO(Ne))})}if(Fi in fe){var Fe=fe[Fi];return Oe(Fe,function(rn,ln){var _e=rn.invoke(ln,Fe);return ln.def(rn.shared.vao+".getVAO("+_e+")")})}return null}($e),!Re.drawVAO&&Ye.program&&!de&&un.angle_instanced_arrays){var hn=!0,pn=Ye.program.attributes.map(function(mn){var jn=je.static[mn];return hn=hn&&!!jn,jn});if(hn&&pn.length>0){var on=Fr.getVAO(Fr.createVAO(pn));Re.drawVAO=new ae(null,null,null,function(mn,jn){return mn.link(on)}),Re.useVAO=!0}}return de?Re.useVAO=!0:Re.attributes=function(mn,jn){var Ie=mn.static,fe=mn.dynamic,Ne={};return Object.keys(Ie).forEach(function(Fe){var rn=Ie[Fe],ln=sn.id(Fe),_e=new Qr;if(Ga(rn))_e.state=1,_e.buffer=jr.getBuffer(jr.create(rn,34962,!1,!0)),_e.type=0;else{var dn=jr.getBuffer(rn);if(dn)_e.state=1,_e.buffer=dn,_e.type=0;else if(ut.command(b(rn)==="object"&&rn,"invalid data for attribute "+Fe,jn.commandStr),"constant"in rn){var Sn=rn.constant;_e.buffer="null",_e.state=2,typeof Sn=="number"?_e.x=Sn:(ut.command(Ht(Sn)&&Sn.length>0&&Sn.length<=4,"invalid constant for attribute "+Fe,jn.commandStr),$r.forEach(function(zr,wi){wi<Sn.length&&(_e[zr]=Sn[wi])}))}else{dn=Ga(rn.buffer)?jr.getBuffer(jr.create(rn.buffer,34962,!1,!0)):jr.getBuffer(rn.buffer),ut.command(!!dn,'missing buffer for attribute "'+Fe+'"',jn.commandStr);var tr=0|rn.offset;ut.command(tr>=0,'invalid offset for attribute "'+Fe+'"',jn.commandStr);var Pn=0|rn.stride;ut.command(Pn>=0&&Pn<256,'invalid stride for attribute "'+Fe+'", must be integer betweeen [0, 255]',jn.commandStr);var Fn=0|rn.size;ut.command(!("size"in rn)||Fn>0&&Fn<=4,'invalid size for attribute "'+Fe+'", must be 1,2,3,4',jn.commandStr);var Cr=!!rn.normalized,fi=0;"type"in rn&&(ut.commandParameter(rn.type,rt,"invalid type for attribute "+Fe,jn.commandStr),fi=rt[rn.type]);var ri=0|rn.divisor;"divisor"in rn&&(ut.command(ri===0||Ri,'cannot specify divisor for attribute "'+Fe+'", instancing not supported',jn.commandStr),ut.command(ri>=0,'invalid divisor for attribute "'+Fe+'"',jn.commandStr)),ut.optional(function(){var zr=jn.commandStr,wi=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(rn).forEach(function(Ai){ut.command(wi.indexOf(Ai)>=0,'unknown parameter "'+Ai+'" for attribute pointer "'+Fe+'" (valid parameters are '+wi+")",zr)})}),_e.buffer=dn,_e.state=1,_e.size=Fn,_e.normalized=Cr,_e.type=fi||dn.dtype,_e.offset=tr,_e.stride=Pn,_e.divisor=ri}}Ne[Fe]=te(function(zr,wi){var Ai=zr.attribCache;if(ln in Ai)return Ai[ln];var gi={isStream:!1};return Object.keys(_e).forEach(function(Oa){gi[Oa]=_e[Oa]}),_e.buffer&&(gi.buffer=zr.link(_e.buffer),gi.type=gi.type||gi.buffer+".dtype"),Ai[ln]=gi,gi})}),Object.keys(fe).forEach(function(Fe){var rn=fe[Fe];Ne[Fe]=Oe(rn,function(ln,_e){var dn=ln.invoke(_e,rn),Sn=ln.shared,tr=ln.constants,Pn=Sn.isBufferArgs,Fn=Sn.buffer;ut.optional(function(){ln.assert(_e,dn+"&&(typeof "+dn+'==="object"||typeof '+dn+'==="function")&&('+Pn+"("+dn+")||"+Fn+".getBuffer("+dn+")||"+Fn+".getBuffer("+dn+".buffer)||"+Pn+"("+dn+'.buffer)||("constant" in '+dn+"&&(typeof "+dn+'.constant==="number"||'+Sn.isArrayLike+"("+dn+".constant))))",'invalid dynamic attribute "'+Fe+'"')});var Cr={isStream:_e.def(!1)},fi=new Qr;fi.state=1,Object.keys(fi).forEach(function(Ai){Cr[Ai]=_e.def(""+fi[Ai])});var ri=Cr.buffer,zr=Cr.type;function wi(Ai){_e(Cr[Ai],"=",dn,".",Ai,"|0;")}return _e("if(",Pn,"(",dn,")){",Cr.isStream,"=true;",ri,"=",Fn,".createStream(",34962,",",dn,");",zr,"=",ri,".dtype;","}else{",ri,"=",Fn,".getBuffer(",dn,");","if(",ri,"){",zr,"=",ri,".dtype;",'}else if("constant" in ',dn,"){",Cr.state,"=",2,";","if(typeof "+dn+'.constant === "number"){',Cr[$r[0]],"=",dn,".constant;",$r.slice(1).map(function(Ai){return Cr[Ai]}).join("="),"=0;","}else{",$r.map(function(Ai,gi){return Cr[Ai]+"="+dn+".constant.length>"+gi+"?"+dn+".constant["+gi+"]:0;"}).join(""),"}}else{","if(",Pn,"(",dn,".buffer)){",ri,"=",Fn,".createStream(",34962,",",dn,".buffer);","}else{",ri,"=",Fn,".getBuffer(",dn,".buffer);","}",zr,'="type" in ',dn,"?",tr.glTypes,"[",dn,".type]:",ri,".dtype;",Cr.normalized,"=!!",dn,".normalized;"),wi("size"),wi("offset"),wi("stride"),wi("divisor"),_e("}}"),_e.exit("if(",Cr.isStream,"){",Fn,".destroyStream(",ri,");","}"),Cr})}),Ne}(je,$t),Re.context=function(mn){var jn=mn.static,Ie=mn.dynamic,fe={};return Object.keys(jn).forEach(function(Ne){var Fe=jn[Ne];fe[Ne]=te(function(rn,ln){return typeof Fe=="number"||typeof Fe=="boolean"?""+Fe:rn.link(Fe)})}),Object.keys(Ie).forEach(function(Ne){var Fe=Ie[Ne];fe[Ne]=Oe(Fe,function(rn,ln){return rn.invoke(ln,Fe)})}),fe}(Et),Re}function ue($e,je,L){var Et=$e.shared.context,$t=$e.scope();Object.keys(L).forEach(function(ye){je.save(Et,"."+ye);var Zt=L[ye].append($e,je);Array.isArray(Zt)?$t(Et,".",ye,"=[",Zt.join(),"];"):$t(Et,".",ye,"=",Zt,";")}),je($t)}function Ce($e,je,L,Et){var $t,ye=$e.shared,Zt=ye.gl,de=ye.framebuffer;Si&&($t=je.def(ye.extensions,".webgl_draw_buffers"));var he,le=$e.constants,Me=le.drawBuffer,Ve=le.backBuffer;he=L?L.append($e,je):je.def(de,".next"),Et||je("if(",he,"!==",de,".cur){"),je("if(",he,"){",Zt,".bindFramebuffer(",36160,",",he,".framebuffer);"),Si&&je($t,".drawBuffersWEBGL(",Me,"[",he,".colorAttachments.length]);"),je("}else{",Zt,".bindFramebuffer(",36160,",null);"),Si&&je($t,".drawBuffersWEBGL(",Ve,");"),je("}",de,".cur=",he,";"),Et||je("}")}function we($e,je,L){var Et=$e.shared,$t=Et.gl,ye=$e.current,Zt=$e.next,de=Et.current,he=Et.next,le=$e.cond(de,".dirty");ha.forEach(function(Me){var Ve,Ye,ke=ve(Me);if(!(ke in L.state))if(ke in Zt){Ve=Zt[ke],Ye=ye[ke];var nn=it(Gi[ke].length,function(hn){return le.def(Ve,"[",hn,"]")});le($e.cond(nn.map(function(hn,pn){return hn+"!=="+Ye+"["+pn+"]"}).join("||")).then($t,".",Zi[ke],"(",nn,");",nn.map(function(hn,pn){return Ye+"["+pn+"]="+hn}).join(";"),";"))}else{Ve=le.def(he,".",ke);var Re=$e.cond(Ve,"!==",de,".",ke);le(Re),ke in na?Re($e.cond(Ve).then($t,".enable(",na[ke],");").else($t,".disable(",na[ke],");"),de,".",ke,"=",Ve,";"):Re($t,".",Zi[ke],"(",Ve,");",de,".",ke,"=",Ve,";")}}),Object.keys(L.state).length===0&&le(de,".dirty=false;"),je(le)}function cn($e,je,L,Et){var $t=$e.shared,ye=$e.current,Zt=$t.current,de=$t.gl;eo(Object.keys(L)).forEach(function(he){var le=L[he];if(!Et||Et(le)){var Me=le.append($e,je);if(na[he]){var Ve=na[he];Kt(le)?je(de,Me?".enable(":".disable(",Ve,");"):je($e.cond(Me).then(de,".enable(",Ve,");").else(de,".disable(",Ve,");")),je(Zt,".",he,"=",Me,";")}else if(Ht(Me)){var Ye=ye[he];je(de,".",Zi[he],"(",Me,");",Me.map(function(ke,nn){return Ye+"["+nn+"]="+ke}).join(";"),";")}else je(de,".",Zi[he],"(",Me,");",Zt,".",he,"=",Me,";")}})}function Cn($e,je){Ri&&($e.instancing=je.def($e.shared.extensions,".angle_instanced_arrays"))}function _t($e,je,L,Et,$t){var ye,Zt,de,he=$e.shared,le=$e.stats,Me=he.current,Ve=he.timer,Ye=L.profile;function ke(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}function nn(mn){mn(ye=je.def(),"=",ke(),";"),typeof $t=="string"?mn(le,".count+=",$t,";"):mn(le,".count++;"),ei&&(Et?mn(Zt=je.def(),"=",Ve,".getNumPendingQueries();"):mn(Ve,".beginQuery(",le,");"))}function Re(mn){mn(le,".cpuTime+=",ke(),"-",ye,";"),ei&&(Et?mn(Ve,".pushScopeStats(",Zt,",",Ve,".getNumPendingQueries(),",le,");"):mn(Ve,".endQuery();"))}function hn(mn){var jn=je.def(Me,".profile");je(Me,".profile=",mn,";"),je.exit(Me,".profile=",jn,";")}if(Ye){if(Kt(Ye))return void(Ye.enable?(nn(je),Re(je.exit),hn("true")):hn("false"));hn(de=Ye.append($e,je))}else de=je.def(Me,".profile");var pn=$e.block();nn(pn),je("if(",de,"){",pn,"}");var on=$e.block();Re(on),je.exit("if(",de,"){",on,"}")}function Xt($e,je,L,Et,$t){var ye=$e.shared;Et.forEach(function(Zt){var de,he=Zt.name,le=L.attributes[he];if(le){if(!$t(le))return;de=le.append($e,je)}else{if(!$t(Ze))return;var Me=$e.scopeAttrib(he);ut.optional(function(){$e.assert(je,Me+".state","missing attribute "+he)}),de={},Object.keys(new Qr).forEach(function(Ve){de[Ve]=je.def(Me,".",Ve)})}(function(Ve,Ye,ke){var nn=ye.gl,Re=je.def(Ve,".location"),hn=je.def(ye.attributes,"[",Re,"]"),pn=ke.state,on=ke.buffer,mn=[ke.x,ke.y,ke.z,ke.w],jn=["buffer","normalized","offset","stride"];function Ie(){je("if(!",hn,".buffer){",nn,".enableVertexAttribArray(",Re,");}");var Ne,Fe=ke.type;if(Ne=ke.size?je.def(ke.size,"||",Ye):Ye,je("if(",hn,".type!==",Fe,"||",hn,".size!==",Ne,"||",jn.map(function(ln){return hn+"."+ln+"!=="+ke[ln]}).join("||"),"){",nn,".bindBuffer(",34962,",",on,".buffer);",nn,".vertexAttribPointer(",[Re,Ne,Fe,ke.normalized,ke.stride,ke.offset],");",hn,".type=",Fe,";",hn,".size=",Ne,";",jn.map(function(ln){return hn+"."+ln+"="+ke[ln]+";"}).join(""),"}"),Ri){var rn=ke.divisor;je("if(",hn,".divisor!==",rn,"){",$e.instancing,".vertexAttribDivisorANGLE(",[Re,rn],");",hn,".divisor=",rn,";}")}}function fe(){je("if(",hn,".buffer){",nn,".disableVertexAttribArray(",Re,");",hn,".buffer=null;","}if(",$r.map(function(Ne,Fe){return hn+"."+Ne+"!=="+mn[Fe]}).join("||"),"){",nn,".vertexAttrib4f(",Re,",",mn,");",$r.map(function(Ne,Fe){return hn+"."+Ne+"="+mn[Fe]+";"}).join(""),"}")}pn===1?Ie():pn===2?fe():(je("if(",pn,"===",1,"){"),Ie(),je("}else{"),fe(),je("}"))})($e.link(Zt),function(Ve){switch(Ve){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(Zt.info.type),de)})}function Ee($e,je,L,Et,$t){for(var ye,Zt=$e.shared,de=Zt.gl,he=0;he<Et.length;++he){var le,Me=Et[he],Ve=Me.name,Ye=Me.info.type,ke=L.uniforms[Ve],nn=$e.link(Me)+".location";if(ke){if(!$t(ke))continue;if(Kt(ke)){var Re=ke.value;if(ut.command(Re!=null,'missing uniform "'+Ve+'"',$e.commandStr),Ye===35678||Ye===35680){ut.command(typeof Re=="function"&&(Ye===35678&&(Re._reglType==="texture2d"||Re._reglType==="framebuffer")||Ye===35680&&(Re._reglType==="textureCube"||Re._reglType==="framebufferCube")),"invalid texture for uniform "+Ve,$e.commandStr);var hn=$e.link(Re._texture||Re.color[0]._texture);je(de,".uniform1i(",nn,",",hn+".bind());"),je.exit(hn,".unbind();")}else if(Ye===35674||Ye===35675||Ye===35676){ut.optional(function(){ut.command(Ht(Re),"invalid matrix for uniform "+Ve,$e.commandStr),ut.command(Ye===35674&&Re.length===4||Ye===35675&&Re.length===9||Ye===35676&&Re.length===16,"invalid length for matrix uniform "+Ve,$e.commandStr)});var pn=$e.global.def("new Float32Array(["+Array.prototype.slice.call(Re)+"])"),on=2;Ye===35675?on=3:Ye===35676&&(on=4),je(de,".uniformMatrix",on,"fv(",nn,",false,",pn,");")}else{switch(Ye){case 5126:ut.commandType(Re,"number","uniform "+Ve,$e.commandStr),ye="1f";break;case 35664:ut.command(Ht(Re)&&Re.length===2,"uniform "+Ve,$e.commandStr),ye="2f";break;case 35665:ut.command(Ht(Re)&&Re.length===3,"uniform "+Ve,$e.commandStr),ye="3f";break;case 35666:ut.command(Ht(Re)&&Re.length===4,"uniform "+Ve,$e.commandStr),ye="4f";break;case 35670:ut.commandType(Re,"boolean","uniform "+Ve,$e.commandStr),ye="1i";break;case 5124:ut.commandType(Re,"number","uniform "+Ve,$e.commandStr),ye="1i";break;case 35671:case 35667:ut.command(Ht(Re)&&Re.length===2,"uniform "+Ve,$e.commandStr),ye="2i";break;case 35672:case 35668:ut.command(Ht(Re)&&Re.length===3,"uniform "+Ve,$e.commandStr),ye="3i";break;case 35673:case 35669:ut.command(Ht(Re)&&Re.length===4,"uniform "+Ve,$e.commandStr),ye="4i"}je(de,".uniform",ye,"(",nn,",",Ht(Re)?Array.prototype.slice.call(Re):Re,");")}continue}le=ke.append($e,je)}else{if(!$t(Ze))continue;le=je.def(Zt.uniforms,"[",sn.id(Ve),"]")}Ye===35678?(ut(!Array.isArray(le),"must specify a scalar prop for textures"),je("if(",le,"&&",le,'._reglType==="framebuffer"){',le,"=",le,".color[0];","}")):Ye===35680&&(ut(!Array.isArray(le),"must specify a scalar prop for cube maps"),je("if(",le,"&&",le,'._reglType==="framebufferCube"){',le,"=",le,".color[0];","}")),ut.optional(function(){function Ne(_e,dn){$e.assert(je,_e,'bad data or missing for uniform "'+Ve+'".  '+dn)}function Fe(_e){ut(!Array.isArray(le),"must not specify an array type for uniform"),Ne("typeof "+le+'==="'+_e+'"',"invalid type, expected "+_e)}function rn(_e,dn){Array.isArray(le)?ut(le.length===_e,"must have length "+_e):Ne(Zt.isArrayLike+"("+le+")&&"+le+".length==="+_e,"invalid vector, should have length "+_e,$e.commandStr)}function ln(_e){ut(!Array.isArray(le),"must not specify a value type"),Ne("typeof "+le+'==="function"&&'+le+'._reglType==="texture'+(_e===3553?"2d":"Cube")+'"',"invalid texture type",$e.commandStr)}switch(Ye){case 5124:Fe("number");break;case 35667:rn(2);break;case 35668:rn(3);break;case 35669:rn(4);break;case 5126:Fe("number");break;case 35664:rn(2);break;case 35665:rn(3);break;case 35666:rn(4);break;case 35670:Fe("boolean");break;case 35671:rn(2);break;case 35672:rn(3);break;case 35673:case 35674:rn(4);break;case 35675:rn(9);break;case 35676:rn(16);break;case 35678:ln(3553);break;case 35680:ln(34067)}});var mn=1;switch(Ye){case 35678:case 35680:var jn=je.def(le,"._texture");je(de,".uniform1i(",nn,",",jn,".bind());"),je.exit(jn,".unbind();");continue;case 5124:case 35670:ye="1i";break;case 35667:case 35671:ye="2i",mn=2;break;case 35668:case 35672:ye="3i",mn=3;break;case 35669:case 35673:ye="4i",mn=4;break;case 5126:ye="1f";break;case 35664:ye="2f",mn=2;break;case 35665:ye="3f",mn=3;break;case 35666:ye="4f",mn=4;break;case 35674:ye="Matrix2fv";break;case 35675:ye="Matrix3fv";break;case 35676:ye="Matrix4fv"}if(je(de,".uniform",ye,"(",nn,","),ye.charAt(0)==="M"){var Ie=Math.pow(Ye-35674+2,2),fe=$e.global.def("new Float32Array(",Ie,")");Array.isArray(le)?je("false,(",it(Ie,function(Ne){return fe+"["+Ne+"]="+le[Ne]}),",",fe,")"):je("false,(Array.isArray(",le,")||",le," instanceof Float32Array)?",le,":(",it(Ie,function(Ne){return fe+"["+Ne+"]="+le+"["+Ne+"]"}),",",fe,")")}else mn>1?je(it(mn,function(Ne){return Array.isArray(le)?le[Ne]:le+"["+Ne+"]"})):(ut(!Array.isArray(le),"uniform value must not be an array"),je(le));je(");")}}function Vt($e,je,L,Et){var $t=$e.shared,ye=$t.gl,Zt=$t.draw,de=Et.draw,he=function(){var mn,jn=de.elements,Ie=je;return jn?((jn.contextDep&&Et.contextDynamic||jn.propDep)&&(Ie=L),mn=jn.append($e,Ie)):mn=Ie.def(Zt,".",di),mn&&Ie("if("+mn+")"+ye+".bindBuffer(34963,"+mn+".buffer.buffer);"),mn}();function le(mn){var jn=de[mn];return jn?jn.contextDep&&Et.contextDynamic||jn.propDep?jn.append($e,L):jn.append($e,je):je.def(Zt,".",mn)}var Me,Ve,Ye=le(Ti),ke=le(Ni),nn=function(){var mn,jn=de.count,Ie=je;return jn?((jn.contextDep&&Et.contextDynamic||jn.propDep)&&(Ie=L),mn=jn.append($e,Ie),ut.optional(function(){jn.MISSING&&$e.assert(je,"false","missing vertex count"),jn.DYNAMIC&&$e.assert(Ie,mn+">=0","missing vertex count")})):(mn=Ie.def(Zt,".",pi),ut.optional(function(){$e.assert(Ie,mn+">=0","missing vertex count")})),mn}();if(typeof nn=="number"){if(nn===0)return}else L("if(",nn,"){"),L.exit("}");Ri&&(Me=le(Bi),Ve=$e.instancing);var Re=he+".type",hn=de.elements&&Kt(de.elements);function pn(){function mn(){L(Ve,".drawElementsInstancedANGLE(",[Ye,nn,Re,ke+"<<(("+Re+"-5121)>>1)",Me],");")}function jn(){L(Ve,".drawArraysInstancedANGLE(",[Ye,ke,nn,Me],");")}he?hn?mn():(L("if(",he,"){"),mn(),L("}else{"),jn(),L("}")):jn()}function on(){function mn(){L(ye+".drawElements("+[Ye,nn,Re,ke+"<<(("+Re+"-5121)>>1)"]+");")}function jn(){L(ye+".drawArrays("+[Ye,ke,nn]+");")}he?hn?mn():(L("if(",he,"){"),mn(),L("}else{"),jn(),L("}")):jn()}Ri&&(typeof Me!="number"||Me>=0)?typeof Me=="string"?(L("if(",Me,">0){"),pn(),L("}else if(",Me,"<0){"),on(),L("}")):pn():on()}function ce($e,je,L,Et,$t){var ye=Jt(),Zt=ye.proc("body",$t);return ut.optional(function(){ye.commandStr=je.commandStr,ye.command=ye.link(je.commandStr)}),Ri&&(ye.instancing=Zt.def(ye.shared.extensions,".angle_instanced_arrays")),$e(ye,Zt,L,Et),ye.compile().body}function yn($e,je,L,Et){Cn($e,je),L.useVAO?L.drawVAO?je($e.shared.vao,".setVAO(",L.drawVAO.append($e,je),");"):je($e.shared.vao,".setVAO(",$e.shared.vao,".targetVAO);"):(je($e.shared.vao,".setVAO(null);"),Xt($e,je,L,Et.attributes,function(){return!0})),Ee($e,je,L,Et.uniforms,function(){return!0}),Vt($e,je,je,L)}function Bn($e,je,L,Et){function $t(){return!0}$e.batchId="a1",Cn($e,je),Xt($e,je,L,Et.attributes,$t),Ee($e,je,L,Et.uniforms,$t),Vt($e,je,je,L)}function Zn($e,je,L,Et){Cn($e,je);var $t=L.contextDep,ye=je.def(),Zt=je.def();$e.shared.props=Zt,$e.batchId=ye;var de=$e.scope(),he=$e.scope();function le(Re){return Re.contextDep&&$t||Re.propDep}function Me(Re){return!le(Re)}if(je(de.entry,"for(",ye,"=0;",ye,"<","a1",";++",ye,"){",Zt,"=","a0","[",ye,"];",he,"}",de.exit),L.needsContext&&ue($e,he,L.context),L.needsFramebuffer&&Ce($e,he,L.framebuffer),cn($e,he,L.state,le),L.profile&&le(L.profile)&&_t($e,he,L,!1,!0),Et)L.useVAO?L.drawVAO?le(L.drawVAO)?he($e.shared.vao,".setVAO(",L.drawVAO.append($e,he),");"):de($e.shared.vao,".setVAO(",L.drawVAO.append($e,de),");"):de($e.shared.vao,".setVAO(",$e.shared.vao,".targetVAO);"):(de($e.shared.vao,".setVAO(null);"),Xt($e,de,L,Et.attributes,Me),Xt($e,he,L,Et.attributes,le)),Ee($e,de,L,Et.uniforms,Me),Ee($e,he,L,Et.uniforms,le),Vt($e,de,he,L);else{var Ve=$e.global.def("{}"),Ye=L.shader.progVar.append($e,he),ke=he.def(Ye,".id"),nn=he.def(Ve,"[",ke,"]");he($e.shared.gl,".useProgram(",Ye,".program);","if(!",nn,"){",nn,"=",Ve,"[",ke,"]=",$e.link(function(Re){return ce(Bn,$e,L,Re,2)}),"(",Ye,");}",nn,".call(this,a0[",ye,"],",ye,");")}}function Kn($e,je,L){var Et=je.static[L];if(Et&&function(Me){if(b(Me)==="object"&&!Ht(Me)){for(var Ve=Object.keys(Me),Ye=0;Ye<Ve.length;++Ye)if(dt.isDynamic(Me[Ve[Ye]]))return!0;return!1}}(Et)){var $t=$e.global,ye=Object.keys(Et),Zt=!1,de=!1,he=!1,le=$e.global.def("{}");ye.forEach(function(Me){var Ve=Et[Me];if(dt.isDynamic(Ve)){typeof Ve=="function"&&(Ve=Et[Me]=dt.unbox(Ve));var Ye=Oe(Ve,null);Zt=Zt||Ye.thisDep,he=he||Ye.propDep,de=de||Ye.contextDep}else{switch($t(le,".",Me,"="),b(Ve)){case"number":$t(Ve);break;case"string":$t('"',Ve,'"');break;case"object":Array.isArray(Ve)&&$t("[",Ve.join(),"]");break;default:$t($e.link(Ve))}$t(";")}}),je.dynamic[L]=new dt.DynamicVariable(4,{thisDep:Zt,contextDep:de,propDep:he,ref:le,append:function(Ve,Ye){ye.forEach(function(ke){var nn=Et[ke];if(dt.isDynamic(nn)){var Re=Ve.invoke(Ye,nn);Ye(le,".",ke,"=",Re,";")}})}}),delete je.static[L]}}return{next:ca,current:Gi,procs:function(){var $e=Jt(),je=$e.proc("poll"),L=$e.proc("refresh"),Et=$e.block();je(Et),L(Et);var $t,ye=$e.shared,Zt=ye.gl,de=ye.next,he=ye.current;Et(he,".dirty=false;"),Ce($e,je),Ce($e,L,null,!0),Ri&&($t=$e.link(Ri)),un.oes_vertex_array_object&&L($e.link(un.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var le=0;le<ur.maxAttributes;++le){var Me=L.def(ye.attributes,"[",le,"]"),Ve=$e.cond(Me,".buffer");Ve.then(Zt,".enableVertexAttribArray(",le,");",Zt,".bindBuffer(",34962,",",Me,".buffer.buffer);",Zt,".vertexAttribPointer(",le,",",Me,".size,",Me,".type,",Me,".normalized,",Me,".stride,",Me,".offset);").else(Zt,".disableVertexAttribArray(",le,");",Zt,".vertexAttrib4f(",le,",",Me,".x,",Me,".y,",Me,".z,",Me,".w);",Me,".buffer=null;"),L(Ve),Ri&&L($t,".vertexAttribDivisorANGLE(",le,",",Me,".divisor);")}return L($e.shared.vao,".currentVAO=null;",$e.shared.vao,".setVAO(",$e.shared.vao,".targetVAO);"),Object.keys(na).forEach(function(Ye){var ke=na[Ye],nn=Et.def(de,".",Ye),Re=$e.block();Re("if(",nn,"){",Zt,".enable(",ke,")}else{",Zt,".disable(",ke,")}",he,".",Ye,"=",nn,";"),L(Re),je("if(",nn,"!==",he,".",Ye,"){",Re,"}")}),Object.keys(Zi).forEach(function(Ye){var ke,nn,Re=Zi[Ye],hn=Gi[Ye],pn=$e.block();if(pn(Zt,".",Re,"("),Ht(hn)){var on=hn.length;ke=$e.global.def(de,".",Ye),nn=$e.global.def(he,".",Ye),pn(it(on,function(mn){return ke+"["+mn+"]"}),");",it(on,function(mn){return nn+"["+mn+"]="+ke+"["+mn+"];"}).join("")),je("if(",it(on,function(mn){return ke+"["+mn+"]!=="+nn+"["+mn+"]"}).join("||"),"){",pn,"}")}else ke=Et.def(de,".",Ye),nn=Et.def(he,".",Ye),pn(ke,");",he,".",Ye,"=",ke,";"),je("if(",ke,"!==",nn,"){",pn,"}");L(pn)}),$e.compile()}(),compile:function(je,L,Et,$t,ye){var Zt=Jt();Zt.stats=Zt.link(ye),Object.keys(L.static).forEach(function(he){Kn(Zt,L,he)}),Ra.forEach(function(he){Kn(Zt,je,he)});var de=ie(je,L,Et,$t,Zt);return function(he,le){var Me=he.proc("draw",1);Cn(he,Me),ue(he,Me,le.context),Ce(he,Me,le.framebuffer),we(he,Me,le),cn(he,Me,le.state),_t(he,Me,le,!1,!0);var Ve=le.shader.progVar.append(he,Me);if(Me(he.shared.gl,".useProgram(",Ve,".program);"),le.shader.program)yn(he,Me,le,le.shader.program);else{Me(he.shared.vao,".setVAO(null);");var Ye=he.global.def("{}"),ke=Me.def(Ve,".id"),nn=Me.def(Ye,"[",ke,"]");Me(he.cond(nn).then(nn,".call(this,a0);").else(nn,"=",Ye,"[",ke,"]=",he.link(function(Re){return ce(yn,he,le,Re,1)}),"(",Ve,");",nn,".call(this,a0);"))}Object.keys(le.state).length>0&&Me(he.shared.current,".dirty=true;")}(Zt,de),function(he,le){var Me=he.proc("scope",3);he.batchId="a2";var Ve=he.shared,Ye=Ve.current;function ke(nn){var Re=le.shader[nn];Re&&Me.set(Ve.shader,"."+nn,Re.append(he,Me))}ue(he,Me,le.context),le.framebuffer&&le.framebuffer.append(he,Me),eo(Object.keys(le.state)).forEach(function(nn){var Re=le.state[nn].append(he,Me);Ht(Re)?Re.forEach(function(hn,pn){Me.set(he.next[nn],"["+pn+"]",hn)}):Me.set(Ve.next,"."+nn,Re)}),_t(he,Me,le,!0,!0),[di,Ni,pi,Bi,Ti].forEach(function(nn){var Re=le.draw[nn];Re&&Me.set(Ve.draw,"."+nn,""+Re.append(he,Me))}),Object.keys(le.uniforms).forEach(function(nn){var Re=le.uniforms[nn].append(he,Me);Array.isArray(Re)&&(Re="["+Re.join()+"]"),Me.set(Ve.uniforms,"["+sn.id(nn)+"]",Re)}),Object.keys(le.attributes).forEach(function(nn){var Re=le.attributes[nn].append(he,Me),hn=he.scopeAttrib(nn);Object.keys(new Qr).forEach(function(pn){Me.set(hn,"."+pn,Re[pn])})}),le.scopeVAO&&Me.set(Ve.vao,".targetVAO",le.scopeVAO.append(he,Me)),ke(xi),ke(Ci),Object.keys(le.state).length>0&&(Me(Ye,".dirty=true;"),Me.exit(Ye,".dirty=true;")),Me("a1(",he.shared.context,",a0,",he.batchId,");")}(Zt,de),function(he,le){var Me=he.proc("batch",2);he.batchId="0",Cn(he,Me);var Ve=!1,Ye=!0;Object.keys(le.context).forEach(function(Ie){Ve=Ve||le.context[Ie].propDep}),Ve||(ue(he,Me,le.context),Ye=!1);var ke=le.framebuffer,nn=!1;function Re(Ie){return Ie.contextDep&&Ve||Ie.propDep}ke?(ke.propDep?Ve=nn=!0:ke.contextDep&&Ve&&(nn=!0),nn||Ce(he,Me,ke)):Ce(he,Me,null),le.state.viewport&&le.state.viewport.propDep&&(Ve=!0),we(he,Me,le),cn(he,Me,le.state,function(Ie){return!Re(Ie)}),le.profile&&Re(le.profile)||_t(he,Me,le,!1,"a1"),le.contextDep=Ve,le.needsContext=Ye,le.needsFramebuffer=nn;var hn=le.shader.progVar;if(hn.contextDep&&Ve||hn.propDep)Zn(he,Me,le,null);else{var pn=hn.append(he,Me);if(Me(he.shared.gl,".useProgram(",pn,".program);"),le.shader.program)Zn(he,Me,le,le.shader.program);else{Me(he.shared.vao,".setVAO(null);");var on=he.global.def("{}"),mn=Me.def(pn,".id"),jn=Me.def(on,"[",mn,"]");Me(he.cond(jn).then(jn,".call(this,a0,a1);").else(jn,"=",on,"[",mn,"]=",he.link(function(Ie){return ce(Zn,he,le,Ie,2)}),"(",pn,");",jn,".call(this,a0,a1);"))}}Object.keys(le.state).length>0&&Me(he.shared.current,".dirty=true;")}(Zt,de),I(Zt.compile(),{destroy:function(){de.shader.program.destroy()}})}}}var qn=function(sn,un){if(!un.ext_disjoint_timer_query)return null;var ur=[];function jr(ei){ur.push(ei)}var wr=[];function yr(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var ni=[];function _r(ei){ni.push(ei)}var Fr=[];function Lr(ei,Kr,Qr){var Oi=ni.pop()||new yr;Oi.startQueryIndex=ei,Oi.endQueryIndex=Kr,Oi.sum=0,Oi.stats=Qr,Fr.push(Oi)}var Gr=[],Hr=[];return{beginQuery:function(Kr){var Qr=ur.pop()||un.ext_disjoint_timer_query.createQueryEXT();un.ext_disjoint_timer_query.beginQueryEXT(35007,Qr),wr.push(Qr),Lr(wr.length-1,wr.length,Kr)},endQuery:function(){un.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:Lr,update:function(){var Kr,Qr,Oi=wr.length;if(Oi!==0){Hr.length=Math.max(Hr.length,Oi+1),Gr.length=Math.max(Gr.length,Oi+1),Gr[0]=0,Hr[0]=0;var Ri=0;for(Kr=0,Qr=0;Qr<wr.length;++Qr){var Si=wr[Qr];un.ext_disjoint_timer_query.getQueryObjectEXT(Si,34919)?(Ri+=un.ext_disjoint_timer_query.getQueryObjectEXT(Si,34918),jr(Si)):wr[Kr++]=Si,Gr[Qr+1]=Ri,Hr[Qr+1]=Kr}for(wr.length=Kr,Kr=0,Qr=0;Qr<Fr.length;++Qr){var Gi=Fr[Qr],ca=Gi.startQueryIndex,ha=Gi.endQueryIndex;Gi.sum+=Gr[ha]-Gr[ca];var na=Hr[ca],Zi=Hr[ha];Zi===na?(Gi.stats.gpuTime+=Gi.sum/1e6,_r(Gi)):(Gi.startQueryIndex=na,Gi.endQueryIndex=Zi,Fr[Kr++]=Gi)}Fr.length=Kr}},getNumPendingQueries:function(){return wr.length},clear:function(){ur.push.apply(ur,wr);for(var Kr=0;Kr<ur.length;Kr++)un.ext_disjoint_timer_query.deleteQueryEXT(ur[Kr]);wr.length=0,ur.length=0},restore:function(){wr.length=0,ur.length=0}}};function rr(tn,sn){for(var un=0;un<tn.length;++un)if(tn[un]===sn)return un;return-1}return function(tn){var sn=ct(tn);if(!sn)return null;var un=sn.gl,ur=un.getContextAttributes(),jr=un.isContextLost(),wr=function(je,L){var Et={};function $t(de){ut.type(de,"string","extension name must be string");var he,le=de.toLowerCase();try{he=Et[le]=je.getExtension(le)}catch(Me){}return!!he}for(var ye=0;ye<L.extensions.length;++ye){var Zt=L.extensions[ye];if(!$t(Zt))return L.onDestroy(),L.onDone('"'+Zt+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return L.optionalExtensions.forEach($t),{extensions:Et,restore:function(){Object.keys(Et).forEach(function(he){if(Et[he]&&!$t(he))throw new Error("(regl): error restoring extension "+he)})}}}(un,sn);if(!wr)return null;var yr,ni,_r=(yr={"":0},ni=[""],{id:function(L){var Et=yr[L];return Et||(Et=yr[L]=ni.length,ni.push(L),Et)},str:function(L){return ni[L]}}),Fr={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Lr=wr.extensions,Gr=qn(0,Lr),Hr=bt(),ei=un.drawingBufferWidth,Kr=un.drawingBufferHeight,Qr={tick:0,time:0,viewportWidth:ei,viewportHeight:Kr,framebufferWidth:ei,framebufferHeight:Kr,drawingBufferWidth:ei,drawingBufferHeight:Kr,pixelRatio:sn.pixelRatio},Oi=function(je,L){var Et=1;L.ext_texture_filter_anisotropic&&(Et=je.getParameter(34047));var $t=1,ye=1;L.webgl_draw_buffers&&($t=je.getParameter(34852),ye=je.getParameter(36063));var Zt=!!L.oes_texture_float;if(Zt){var de=je.createTexture();je.bindTexture(3553,de),je.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var he=je.createFramebuffer();if(je.bindFramebuffer(36160,he),je.framebufferTexture2D(36160,36064,3553,de,0),je.bindTexture(3553,null),je.checkFramebufferStatus(36160)!==36053)Zt=!1;else{je.viewport(0,0,1,1),je.clearColor(1,0,0,1),je.clear(16384);var le=Q.allocType(5126,4);je.readPixels(0,0,1,1,6408,5126,le),je.getError()?Zt=!1:(je.deleteFramebuffer(he),je.deleteTexture(de),Zt=le[0]===1),Q.freeType(le)}}var Me=!0;if(typeof navigator=="undefined"||!(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var Ve=je.createTexture(),Ye=Q.allocType(5121,36);je.activeTexture(33984),je.bindTexture(34067,Ve),je.texImage2D(34069,0,6408,3,3,0,6408,5121,Ye),Q.freeType(Ye),je.bindTexture(34067,null),je.deleteTexture(Ve),Me=!je.getError()}return{colorBits:[je.getParameter(3410),je.getParameter(3411),je.getParameter(3412),je.getParameter(3413)],depthBits:je.getParameter(3414),stencilBits:je.getParameter(3415),subpixelBits:je.getParameter(3408),extensions:Object.keys(L).filter(function(ke){return!!L[ke]}),maxAnisotropic:Et,maxDrawbuffers:$t,maxColorAttachments:ye,pointSizeDims:je.getParameter(33901),lineWidthDims:je.getParameter(33902),maxViewportDims:je.getParameter(3386),maxCombinedTextureUnits:je.getParameter(35661),maxCubeMapSize:je.getParameter(34076),maxRenderbufferSize:je.getParameter(34024),maxTextureUnits:je.getParameter(34930),maxTextureSize:je.getParameter(3379),maxAttributes:je.getParameter(34921),maxVertexUniforms:je.getParameter(36347),maxVertexTextureUnits:je.getParameter(35660),maxVaryingVectors:je.getParameter(36348),maxFragmentUniforms:je.getParameter(36349),glsl:je.getParameter(35724),renderer:je.getParameter(7937),vendor:je.getParameter(7936),version:je.getParameter(7938),readFloat:Zt,npotTextureCube:Me}}(un,Lr),Ri=function(je,L,Et,$t){var ye=0,Zt={};function de(Ye){this.id=ye++,this.buffer=je.createBuffer(),this.type=Ye,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Et.profile&&(this.stats={size:0})}de.prototype.bind=function(){je.bindBuffer(this.type,this.buffer)},de.prototype.destroy=function(){Ve(this)};var he=[];function le(Ye,ke,nn){Ye.byteLength=ke.byteLength,je.bufferData(Ye.type,ke,nn)}function Me(Ye,ke,nn,Re,hn,pn){var on,mn;if(Ye.usage=nn,Array.isArray(ke)){if(Ye.dtype=Re||5126,ke.length>0)if(Array.isArray(ke[0])){on=Mt(ke);for(var jn=1,Ie=1;Ie<on.length;++Ie)jn*=on[Ie];Ye.dimension=jn,le(Ye,mn=st(ke,on,Ye.dtype),nn),pn?Ye.persistentData=mn:Q.freeType(mn)}else if(typeof ke[0]=="number"){Ye.dimension=hn;var fe=Q.allocType(Ye.dtype,ke.length);Ot(fe,ke),le(Ye,fe,nn),pn?Ye.persistentData=fe:Q.freeType(fe)}else S(ke[0])?(Ye.dimension=ke[0].length,Ye.dtype=Re||xt(ke[0])||5126,le(Ye,mn=st(ke,[ke.length,ke[0].length],Ye.dtype),nn),pn?Ye.persistentData=mn:Q.freeType(mn)):ut.raise("invalid buffer data")}else if(S(ke))Ye.dtype=Re||xt(ke),Ye.dimension=hn,le(Ye,ke,nn),pn&&(Ye.persistentData=new Uint8Array(new Uint8Array(ke.buffer)));else if(k(ke)){on=ke.shape;var Ne=ke.stride,Fe=ke.offset,rn=0,ln=0,_e=0,dn=0;on.length===1?(rn=on[0],ln=1,_e=Ne[0],dn=0):on.length===2?(rn=on[0],ln=on[1],_e=Ne[0],dn=Ne[1]):ut.raise("invalid shape"),Ye.dtype=Re||xt(ke.data)||5126,Ye.dimension=ln;var Sn=Q.allocType(Ye.dtype,rn*ln);jt(Sn,ke.data,rn,ln,_e,dn,Fe),le(Ye,Sn,nn),pn?Ye.persistentData=Sn:Q.freeType(Sn)}else ke instanceof ArrayBuffer?(Ye.dtype=5121,Ye.dimension=hn,le(Ye,ke,nn),pn&&(Ye.persistentData=new Uint8Array(new Uint8Array(ke)))):ut.raise("invalid buffer data")}function Ve(Ye){L.bufferCount--,$t(Ye);var ke=Ye.buffer;ut(ke,"buffer must not be deleted already"),je.deleteBuffer(ke),Ye.buffer=null,delete Zt[Ye.id]}return Et.profile&&(L.getTotalBufferSize=function(){var Ye=0;return Object.keys(Zt).forEach(function(ke){Ye+=Zt[ke].stats.size}),Ye}),{create:function(ke,nn,Re,hn){L.bufferCount++;var pn=new de(nn);function on(jn){var Ie=35044,fe=null,Ne=0,Fe=0,rn=1;return Array.isArray(jn)||S(jn)||k(jn)||jn instanceof ArrayBuffer?fe=jn:typeof jn=="number"?Ne=0|jn:jn&&(ut.type(jn,"object","buffer arguments must be an object, a number or an array"),"data"in jn&&(ut(fe===null||Array.isArray(fe)||S(fe)||k(fe),"invalid data for buffer"),fe=jn.data),"usage"in jn&&(ut.parameter(jn.usage,ot,"invalid buffer usage"),Ie=ot[jn.usage]),"type"in jn&&(ut.parameter(jn.type,rt,"invalid buffer type"),Fe=rt[jn.type]),"dimension"in jn&&(ut.type(jn.dimension,"number","invalid dimension"),rn=0|jn.dimension),"length"in jn&&(ut.nni(Ne,"buffer length must be a nonnegative integer"),Ne=0|jn.length)),pn.bind(),fe?Me(pn,fe,Ie,Fe,rn,hn):(Ne&&je.bufferData(pn.type,Ne,Ie),pn.dtype=Fe||5121,pn.usage=Ie,pn.dimension=rn,pn.byteLength=Ne),Et.profile&&(pn.stats.size=pn.byteLength*yt[pn.dtype]),on}function mn(jn,Ie){ut(Ie+jn.byteLength<=pn.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+jn.byteLength+" starting from offset "+Ie+" to a buffer of size "+pn.byteLength),je.bufferSubData(pn.type,Ie,jn)}return Zt[pn.id]=pn,Re||on(ke),on._reglType="buffer",on._buffer=pn,on.subdata=function(jn,Ie){var fe,Ne=0|(Ie||0);if(pn.bind(),S(jn)||jn instanceof ArrayBuffer)mn(jn,Ne);else if(Array.isArray(jn)){if(jn.length>0)if(typeof jn[0]=="number"){var Fe=Q.allocType(pn.dtype,jn.length);Ot(Fe,jn),mn(Fe,Ne),Q.freeType(Fe)}else if(Array.isArray(jn[0])||S(jn[0])){fe=Mt(jn);var rn=st(jn,fe,pn.dtype);mn(rn,Ne),Q.freeType(rn)}else ut.raise("invalid buffer data")}else if(k(jn)){fe=jn.shape;var ln=jn.stride,_e=0,dn=0,Sn=0,tr=0;fe.length===1?(_e=fe[0],dn=1,Sn=ln[0],tr=0):fe.length===2?(_e=fe[0],dn=fe[1],Sn=ln[0],tr=ln[1]):ut.raise("invalid shape");var Pn=Array.isArray(jn.data)?pn.dtype:xt(jn.data),Fn=Q.allocType(Pn,_e*dn);jt(Fn,jn.data,_e,dn,Sn,tr,jn.offset),mn(Fn,Ne),Q.freeType(Fn)}else ut.raise("invalid data for buffer subdata");return on},Et.profile&&(on.stats=pn.stats),on.destroy=function(){Ve(pn)},on},createStream:function(ke,nn){var Re=he.pop();return Re||(Re=new de(ke)),Re.bind(),Me(Re,nn,35040,0,1,!1),Re},destroyStream:function(ke){he.push(ke)},clear:function(){g(Zt).forEach(Ve),he.forEach(Ve)},getBuffer:function(ke){return ke&&ke._buffer instanceof de?ke._buffer:null},restore:function(){g(Zt).forEach(function(ke){ke.buffer=je.createBuffer(),je.bindBuffer(ke.type,ke.buffer),je.bufferData(ke.type,ke.persistentData||ke.byteLength,ke.usage)})},_initBuffer:Me}}(un,Fr,sn,function(je){return Si.destroyBuffer(je)}),Si=function(je,L,Et,$t,ye){for(var Zt=Et.maxAttributes,de=new Array(Zt),he=0;he<Zt;++he)de[he]=new Sa;var le=0,Me={},Ve={Record:Sa,scope:{},state:de,currentVAO:null,targetVAO:null,restore:Ye()?function(){Ye()&&g(Me).forEach(function(Re){Re.refresh()})}:function(){},createVAO:function(hn){var pn=new nn;function on(mn){ut(Array.isArray(mn),"arguments to vertex array constructor must be an array"),ut(mn.length<Zt,"too many attributes"),ut(mn.length>0,"must specify at least one attribute");var jn={},Ie=pn.attributes;Ie.length=mn.length;for(var fe=0;fe<mn.length;++fe){var Ne,Fe=mn[fe],rn=Ie[fe]=new Sa,ln=Fe.data||Fe;Array.isArray(ln)||S(ln)||k(ln)?(pn.buffers[fe]&&(Ne=pn.buffers[fe],S(ln)&&Ne._buffer.byteLength>=ln.byteLength?Ne.subdata(ln):(Ne.destroy(),pn.buffers[fe]=null)),pn.buffers[fe]||(Ne=pn.buffers[fe]=ye.create(Fe,34962,!1,!0)),rn.buffer=ye.getBuffer(Ne),rn.size=0|rn.buffer.dimension,rn.normalized=!1,rn.type=rn.buffer.dtype,rn.offset=0,rn.stride=0,rn.divisor=0,rn.state=1,jn[fe]=1):ye.getBuffer(Fe)?(rn.buffer=ye.getBuffer(Fe),rn.size=0|rn.buffer.dimension,rn.normalized=!1,rn.type=rn.buffer.dtype,rn.offset=0,rn.stride=0,rn.divisor=0,rn.state=1):ye.getBuffer(Fe.buffer)?(rn.buffer=ye.getBuffer(Fe.buffer),rn.size=0|(+Fe.size||rn.buffer.dimension),rn.normalized=!!Fe.normalized||!1,"type"in Fe?(ut.parameter(Fe.type,rt,"invalid buffer type"),rn.type=rt[Fe.type]):rn.type=rn.buffer.dtype,rn.offset=0|(Fe.offset||0),rn.stride=0|(Fe.stride||0),rn.divisor=0|(Fe.divisor||0),rn.state=1,ut(rn.size>=1&&rn.size<=4,"size must be between 1 and 4"),ut(rn.offset>=0,"invalid offset"),ut(rn.stride>=0&&rn.stride<=255,"stride must be between 0 and 255"),ut(rn.divisor>=0,"divisor must be positive"),ut(!rn.divisor||!!L.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Fe?(ut(fe>0,"first attribute must not be a constant"),rn.x=+Fe.x||0,rn.y=+Fe.y||0,rn.z=+Fe.z||0,rn.w=+Fe.w||0,rn.state=2):ut(!1,"invalid attribute spec for location "+fe)}for(var _e=0;_e<pn.buffers.length;++_e)!jn[_e]&&pn.buffers[_e]&&(pn.buffers[_e].destroy(),pn.buffers[_e]=null);return pn.refresh(),on}return $t.vaoCount+=1,on.destroy=function(){for(var mn=0;mn<pn.buffers.length;++mn)pn.buffers[mn]&&pn.buffers[mn].destroy();pn.buffers.length=0,pn.destroy()},on._vao=pn,on._reglType="vao",on(hn)},getVAO:function(hn){return typeof hn=="function"&&hn._vao?hn._vao:null},destroyBuffer:function(hn){for(var pn=0;pn<de.length;++pn){var on=de[pn];on.buffer===hn&&(je.disableVertexAttribArray(pn),on.buffer=null)}},setVAO:Ye()?function(Re){if(Re!==Ve.currentVAO){var hn=Ye();Re?hn.bindVertexArrayOES(Re.vao):hn.bindVertexArrayOES(null),Ve.currentVAO=Re}}:function(Re){if(Re!==Ve.currentVAO){if(Re)Re.bindAttrs();else for(var hn=ke(),pn=0;pn<de.length;++pn){var on=de[pn];on.buffer?(je.enableVertexAttribArray(pn),je.vertexAttribPointer(pn,on.size,on.type,on.normalized,on.stride,on.offfset),hn&&on.divisor&&hn.vertexAttribDivisorANGLE(pn,on.divisor)):(je.disableVertexAttribArray(pn),je.vertexAttrib4f(pn,on.x,on.y,on.z,on.w))}Ve.currentVAO=Re}},clear:Ye()?function(){g(Me).forEach(function(Re){Re.destroy()})}:function(){}};function Ye(){return L.oes_vertex_array_object}function ke(){return L.angle_instanced_arrays}function nn(){this.id=++le,this.attributes=[];var Re=Ye();this.vao=Re?Re.createVertexArrayOES():null,Me[this.id]=this,this.buffers=[]}return nn.prototype.bindAttrs=function(){for(var Re=ke(),hn=this.attributes,pn=0;pn<hn.length;++pn){var on=hn[pn];on.buffer?(je.enableVertexAttribArray(pn),je.bindBuffer(34962,on.buffer.buffer),je.vertexAttribPointer(pn,on.size,on.type,on.normalized,on.stride,on.offset),Re&&on.divisor&&Re.vertexAttribDivisorANGLE(pn,on.divisor)):(je.disableVertexAttribArray(pn),je.vertexAttrib4f(pn,on.x,on.y,on.z,on.w))}for(var mn=hn.length;mn<Zt;++mn)je.disableVertexAttribArray(mn)},nn.prototype.refresh=function(){var Re=Ye();Re&&(Re.bindVertexArrayOES(this.vao),this.bindAttrs(),Ve.currentVAO=this)},nn.prototype.destroy=function(){if(this.vao){var Re=Ye();this===Ve.currentVAO&&(Ve.currentVAO=null,Re.bindVertexArrayOES(null)),Re.deleteVertexArrayOES(this.vao),this.vao=null}Me[this.id]&&(delete Me[this.id],$t.vaoCount-=1)},Ve}(un,Lr,Oi,Fr,Ri),Gi=function(je,L,Et,$t){var ye={},Zt=0,de={uint8:5121,uint16:5123};function he(Ye){this.id=Zt++,ye[this.id]=this,this.buffer=Ye,this.primType=4,this.vertCount=0,this.type=0}L.oes_element_index_uint&&(de.uint32=5125),he.prototype.bind=function(){this.buffer.bind()};var le=[];function Me(Ye,ke,nn,Re,hn,pn,on){var mn;if(Ye.buffer.bind(),ke){var jn=on;on||S(ke)&&(!k(ke)||S(ke.data))||(jn=L.oes_element_index_uint?5125:5123),Et._initBuffer(Ye.buffer,ke,nn,jn,3)}else je.bufferData(34963,pn,nn),Ye.buffer.dtype=mn||5121,Ye.buffer.usage=nn,Ye.buffer.dimension=3,Ye.buffer.byteLength=pn;if(mn=on,!on){switch(Ye.buffer.dtype){case 5121:case 5120:mn=5121;break;case 5123:case 5122:mn=5123;break;case 5125:case 5124:mn=5125;break;default:ut.raise("unsupported type for element array")}Ye.buffer.dtype=mn}Ye.type=mn,ut(mn!==5125||!!L.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Ie=hn;Ie<0&&(Ie=Ye.buffer.byteLength,mn===5123?Ie>>=1:mn===5125&&(Ie>>=2)),Ye.vertCount=Ie;var fe=Re;if(Re<0){fe=4;var Ne=Ye.buffer.dimension;Ne===1&&(fe=0),Ne===2&&(fe=1),Ne===3&&(fe=4)}Ye.primType=fe}function Ve(Ye){$t.elementsCount--,ut(Ye.buffer!==null,"must not double destroy elements"),delete ye[Ye.id],Ye.buffer.destroy(),Ye.buffer=null}return{create:function(ke,nn){var Re=Et.create(null,34963,!0),hn=new he(Re._buffer);function pn(on){if(on)if(typeof on=="number")Re(on),hn.primType=4,hn.vertCount=0|on,hn.type=5121;else{var mn=null,jn=35044,Ie=-1,fe=-1,Ne=0,Fe=0;Array.isArray(on)||S(on)||k(on)?mn=on:(ut.type(on,"object","invalid arguments for elements"),"data"in on&&(mn=on.data,ut(Array.isArray(mn)||S(mn)||k(mn),"invalid data for element buffer")),"usage"in on&&(ut.parameter(on.usage,ot,"invalid element buffer usage"),jn=ot[on.usage]),"primitive"in on&&(ut.parameter(on.primitive,Dt,"invalid element buffer primitive"),Ie=Dt[on.primitive]),"count"in on&&(ut(typeof on.count=="number"&&on.count>=0,"invalid vertex count for elements"),fe=0|on.count),"type"in on&&(ut.parameter(on.type,de,"invalid buffer type"),Fe=de[on.type]),"length"in on?Ne=0|on.length:(Ne=fe,Fe===5123||Fe===5122?Ne*=2:Fe!==5125&&Fe!==5124||(Ne*=4))),Me(hn,mn,jn,Ie,fe,Ne,Fe)}else Re(),hn.primType=4,hn.vertCount=0,hn.type=5121;return pn}return $t.elementsCount++,pn(ke),pn._reglType="elements",pn._elements=hn,pn.subdata=function(on,mn){return Re.subdata(on,mn),pn},pn.destroy=function(){Ve(hn)},pn},createStream:function(ke){var nn=le.pop();return nn||(nn=new he(Et.create(null,34963,!0,!1)._buffer)),Me(nn,ke,35040,-1,-1,0,0),nn},destroyStream:function(ke){le.push(ke)},getElements:function(ke){return typeof ke=="function"&&ke._elements instanceof he?ke._elements:null},clear:function(){g(ye).forEach(Ve)}}}(un,Lr,Ri,Fr),ca=function(je,L,Et,$t){var ye={},Zt={};function de(Re,hn,pn,on){this.name=Re,this.id=hn,this.location=pn,this.info=on}function he(Re,hn){for(var pn=0;pn<Re.length;++pn)if(Re[pn].id===hn.id)return void(Re[pn].location=hn.location);Re.push(hn)}function le(Re,hn,pn){var on=Re===35632?ye:Zt,mn=on[hn];if(!mn){var jn=L.str(hn);mn=je.createShader(Re),je.shaderSource(mn,jn),je.compileShader(mn),ut.shaderError(je,mn,jn,Re,pn),on[hn]=mn}return mn}var Me={},Ve=[],Ye=0;function ke(Re,hn){this.id=Ye++,this.fragId=Re,this.vertId=hn,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,$t.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function nn(Re,hn,pn){var on,mn,jn=le(35632,Re.fragId),Ie=le(35633,Re.vertId),fe=Re.program=je.createProgram();if(je.attachShader(fe,jn),je.attachShader(fe,Ie),pn)for(on=0;on<pn.length;++on){var Ne=pn[on];je.bindAttribLocation(fe,Ne[0],Ne[1])}je.linkProgram(fe),ut.linkError(je,fe,L.str(Re.fragId),L.str(Re.vertId),hn);var Fe=je.getProgramParameter(fe,35718);$t.profile&&(Re.stats.uniformsCount=Fe);var rn=Re.uniforms;for(on=0;on<Fe;++on)if(mn=je.getActiveUniform(fe,on))if(mn.size>1)for(var ln=0;ln<mn.size;++ln){var _e=mn.name.replace("[0]","["+ln+"]");he(rn,new de(_e,L.id(_e),je.getUniformLocation(fe,_e),mn))}else he(rn,new de(mn.name,L.id(mn.name),je.getUniformLocation(fe,mn.name),mn));var dn=je.getProgramParameter(fe,35721);$t.profile&&(Re.stats.attributesCount=dn);var Sn=Re.attributes;for(on=0;on<dn;++on)(mn=je.getActiveAttrib(fe,on))&&he(Sn,new de(mn.name,L.id(mn.name),je.getAttribLocation(fe,mn.name),mn))}return $t.profile&&(Et.getMaxUniformsCount=function(){var Re=0;return Ve.forEach(function(hn){hn.stats.uniformsCount>Re&&(Re=hn.stats.uniformsCount)}),Re},Et.getMaxAttributesCount=function(){var Re=0;return Ve.forEach(function(hn){hn.stats.attributesCount>Re&&(Re=hn.stats.attributesCount)}),Re}),{clear:function(){var hn=je.deleteShader.bind(je);g(ye).forEach(hn),ye={},g(Zt).forEach(hn),Zt={},Ve.forEach(function(pn){je.deleteProgram(pn.program)}),Ve.length=0,Me={},Et.shaderCount=0},program:function(hn,pn,on,mn){ut.command(hn>=0,"missing vertex shader",on),ut.command(pn>=0,"missing fragment shader",on);var jn=Me[pn];jn||(jn=Me[pn]={});var Ie=jn[hn];if(Ie&&(Ie.refCount++,!mn))return Ie;var fe=new ke(pn,hn);return Et.shaderCount++,nn(fe,on,mn),Ie||(jn[hn]=fe),Ve.push(fe),I(fe,{destroy:function(){if(fe.refCount--,fe.refCount<=0){je.deleteProgram(fe.program);var Fe=Ve.indexOf(fe);Ve.splice(Fe,1),Et.shaderCount--}jn[fe.vertId].refCount<=0&&(je.deleteShader(Zt[fe.vertId]),delete Zt[fe.vertId],delete Me[fe.fragId][fe.vertId]),Object.keys(Me[fe.fragId]).length||(je.deleteShader(ye[fe.fragId]),delete ye[fe.fragId],delete Me[fe.fragId])}})},restore:function(){ye={},Zt={};for(var hn=0;hn<Ve.length;++hn)nn(Ve[hn],null,Ve[hn].attributes.map(function(pn){return[pn.location,pn.name]}))},shader:le,frag:-1,vert:-1}}(un,_r,Fr,sn),ha=Pa(un,Lr,Oi,function(){ve.procs.poll()},Qr,Fr,sn),na=function(je,L,Et,$t,ye){var Zt={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};L.ext_srgb&&(Zt.srgba=35907),L.ext_color_buffer_half_float&&(Zt.rgba16f=34842,Zt.rgb16f=34843),L.webgl_color_buffer_float&&(Zt.rgba32f=34836);var de=[];Object.keys(Zt).forEach(function(Ye){var ke=Zt[Ye];de[ke]=Ye});var he=0,le={};function Me(Ye){this.id=he++,this.refCount=1,this.renderbuffer=Ye,this.format=32854,this.width=0,this.height=0,ye.profile&&(this.stats={size:0})}function Ve(Ye){var ke=Ye.renderbuffer;ut(ke,"must not double destroy renderbuffer"),je.bindRenderbuffer(36161,null),je.deleteRenderbuffer(ke),Ye.renderbuffer=null,Ye.refCount=0,delete le[Ye.id],$t.renderbufferCount--}return Me.prototype.decRef=function(){--this.refCount<=0&&Ve(this)},ye.profile&&($t.getTotalRenderbufferSize=function(){var Ye=0;return Object.keys(le).forEach(function(ke){Ye+=le[ke].stats.size}),Ye}),{create:function(ke,nn){var Re=new Me(je.createRenderbuffer());function hn(pn,on){var mn=0,jn=0,Ie=32854;if(b(pn)==="object"&&pn){var fe=pn;if("shape"in fe){var Ne=fe.shape;ut(Array.isArray(Ne)&&Ne.length>=2,"invalid renderbuffer shape"),mn=0|Ne[0],jn=0|Ne[1]}else"radius"in fe&&(mn=jn=0|fe.radius),"width"in fe&&(mn=0|fe.width),"height"in fe&&(jn=0|fe.height);"format"in fe&&(ut.parameter(fe.format,Zt,"invalid renderbuffer format"),Ie=Zt[fe.format])}else typeof pn=="number"?(mn=0|pn,jn=typeof on=="number"?0|on:mn):pn?ut.raise("invalid arguments to renderbuffer constructor"):mn=jn=1;if(ut(mn>0&&jn>0&&mn<=Et.maxRenderbufferSize&&jn<=Et.maxRenderbufferSize,"invalid renderbuffer size"),mn!==Re.width||jn!==Re.height||Ie!==Re.format)return hn.width=Re.width=mn,hn.height=Re.height=jn,Re.format=Ie,je.bindRenderbuffer(36161,Re.renderbuffer),je.renderbufferStorage(36161,Ie,mn,jn),ut(je.getError()===0,"invalid render buffer format"),ye.profile&&(Re.stats.size=Ki(Re.format,Re.width,Re.height)),hn.format=de[Re.format],hn}return le[Re.id]=Re,$t.renderbufferCount++,hn(ke,nn),hn.resize=function(pn,on){var mn=0|pn,jn=0|on||mn;return mn===Re.width&&jn===Re.height||(ut(mn>0&&jn>0&&mn<=Et.maxRenderbufferSize&&jn<=Et.maxRenderbufferSize,"invalid renderbuffer size"),hn.width=Re.width=mn,hn.height=Re.height=jn,je.bindRenderbuffer(36161,Re.renderbuffer),je.renderbufferStorage(36161,Re.format,mn,jn),ut(je.getError()===0,"invalid render buffer format"),ye.profile&&(Re.stats.size=Ki(Re.format,Re.width,Re.height))),hn},hn._reglType="renderbuffer",hn._renderbuffer=Re,ye.profile&&(hn.stats=Re.stats),hn.destroy=function(){Re.decRef()},hn},clear:function(){g(le).forEach(Ve)},restore:function(){g(le).forEach(function(ke){ke.renderbuffer=je.createRenderbuffer(),je.bindRenderbuffer(36161,ke.renderbuffer),je.renderbufferStorage(36161,ke.format,ke.width,ke.height)}),je.bindRenderbuffer(36161,null)}}}(un,Lr,Oi,Fr,sn),Zi=function(je,L,Et,$t,ye,Zt){var de={cur:null,next:null,dirty:!1,setFBO:null},he=["rgba"],le=["rgba4","rgb565","rgb5 a1"];L.ext_srgb&&le.push("srgba"),L.ext_color_buffer_half_float&&le.push("rgba16f","rgb16f"),L.webgl_color_buffer_float&&le.push("rgba32f");var Me=["uint8"];function Ve(ln,_e,dn){this.target=ln,this.texture=_e,this.renderbuffer=dn;var Sn=0,tr=0;_e?(Sn=_e.width,tr=_e.height):dn&&(Sn=dn.width,tr=dn.height),this.width=Sn,this.height=tr}function Ye(ln){ln&&(ln.texture&&ln.texture._texture.decRef(),ln.renderbuffer&&ln.renderbuffer._renderbuffer.decRef())}function ke(ln,_e,dn){if(ln)if(ln.texture){var Sn=ln.texture._texture,tr=Math.max(1,Sn.width),Pn=Math.max(1,Sn.height);ut(tr===_e&&Pn===dn,"inconsistent width/height for supplied texture"),Sn.refCount+=1}else{var Fn=ln.renderbuffer._renderbuffer;ut(Fn.width===_e&&Fn.height===dn,"inconsistent width/height for renderbuffer"),Fn.refCount+=1}}function nn(ln,_e){_e&&(_e.texture?je.framebufferTexture2D(36160,ln,_e.target,_e.texture._texture.texture,0):je.framebufferRenderbuffer(36160,ln,36161,_e.renderbuffer._renderbuffer.renderbuffer))}function Re(ln){var _e=3553,dn=null,Sn=null,tr=ln;b(ln)==="object"&&(tr=ln.data,"target"in ln&&(_e=0|ln.target)),ut.type(tr,"function","invalid attachment data");var Pn=tr._reglType;return Pn==="texture2d"?(dn=tr,ut(_e===3553)):Pn==="textureCube"?(dn=tr,ut(_e>=34069&&_e<34075,"invalid cube map target")):Pn==="renderbuffer"?(Sn=tr,_e=36161):ut.raise("invalid regl object for attachment"),new Ve(_e,dn,Sn)}function hn(ln,_e,dn,Sn,tr){if(dn){var Pn=$t.create2D({width:ln,height:_e,format:Sn,type:tr});return Pn._texture.refCount=0,new Ve(3553,Pn,null)}var Fn=ye.create({width:ln,height:_e,format:Sn});return Fn._renderbuffer.refCount=0,new Ve(36161,null,Fn)}function pn(ln){return ln&&(ln.texture||ln.renderbuffer)}function on(ln,_e,dn){ln&&(ln.texture?ln.texture.resize(_e,dn):ln.renderbuffer&&ln.renderbuffer.resize(_e,dn),ln.width=_e,ln.height=dn)}L.oes_texture_half_float&&Me.push("half float","float16"),L.oes_texture_float&&Me.push("float","float32");var mn=0,jn={};function Ie(){this.id=mn++,jn[this.id]=this,this.framebuffer=je.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function fe(ln){ln.colorAttachments.forEach(Ye),Ye(ln.depthAttachment),Ye(ln.stencilAttachment),Ye(ln.depthStencilAttachment)}function Ne(ln){var _e=ln.framebuffer;ut(_e,"must not double destroy framebuffer"),je.deleteFramebuffer(_e),ln.framebuffer=null,Zt.framebufferCount--,delete jn[ln.id]}function Fe(ln){var _e;je.bindFramebuffer(36160,ln.framebuffer);var dn=ln.colorAttachments;for(_e=0;_e<dn.length;++_e)nn(36064+_e,dn[_e]);for(_e=dn.length;_e<Et.maxColorAttachments;++_e)je.framebufferTexture2D(36160,36064+_e,3553,null,0);je.framebufferTexture2D(36160,33306,3553,null,0),je.framebufferTexture2D(36160,36096,3553,null,0),je.framebufferTexture2D(36160,36128,3553,null,0),nn(36096,ln.depthAttachment),nn(36128,ln.stencilAttachment),nn(33306,ln.depthStencilAttachment);var Sn=je.checkFramebufferStatus(36160);je.isContextLost()||Sn===36053||ut.raise("framebuffer configuration not supported, status = "+Yr[Sn]),je.bindFramebuffer(36160,de.next?de.next.framebuffer:null),de.cur=de.next,je.getError()}function rn(ln,_e){var dn=new Ie;function Sn(tr,Pn){var Fn;ut(de.next!==dn,"can not update framebuffer which is currently in use");var Cr=0,fi=0,ri=!0,zr=!0,wi=null,Ai=!0,gi="rgba",Oa="uint8",Aa=1,Oo=null,Fo=null,Yo=null,De=!1;if(typeof tr=="number")Cr=0|tr,fi=0|Pn||Cr;else if(tr){ut.type(tr,"object","invalid arguments for framebuffer");var an=tr;if("shape"in an){var Mn=an.shape;ut(Array.isArray(Mn)&&Mn.length>=2,"invalid shape for framebuffer"),Cr=Mn[0],fi=Mn[1]}else"radius"in an&&(Cr=fi=an.radius),"width"in an&&(Cr=an.width),"height"in an&&(fi=an.height);("color"in an||"colors"in an)&&(wi=an.color||an.colors,Array.isArray(wi)&&ut(wi.length===1||L.webgl_draw_buffers,"multiple render targets not supported")),wi||("colorCount"in an&&(Aa=0|an.colorCount,ut(Aa>0,"invalid color buffer count")),"colorTexture"in an&&(Ai=!!an.colorTexture,gi="rgba4"),"colorType"in an&&(Oa=an.colorType,Ai?(ut(L.oes_texture_float||!(Oa==="float"||Oa==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),ut(L.oes_texture_half_float||!(Oa==="half float"||Oa==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Oa==="half float"||Oa==="float16"?(ut(L.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),gi="rgba16f"):Oa!=="float"&&Oa!=="float32"||(ut(L.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),gi="rgba32f"),ut.oneOf(Oa,Me,"invalid color type")),"colorFormat"in an&&(gi=an.colorFormat,he.indexOf(gi)>=0?Ai=!0:le.indexOf(gi)>=0?Ai=!1:Ai?ut.oneOf(an.colorFormat,he,"invalid color format for texture"):ut.oneOf(an.colorFormat,le,"invalid color format for renderbuffer"))),("depthTexture"in an||"depthStencilTexture"in an)&&(De=!(!an.depthTexture&&!an.depthStencilTexture),ut(!De||L.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in an&&(typeof an.depth=="boolean"?ri=an.depth:(Oo=an.depth,zr=!1)),"stencil"in an&&(typeof an.stencil=="boolean"?zr=an.stencil:(Fo=an.stencil,ri=!1)),"depthStencil"in an&&(typeof an.depthStencil=="boolean"?ri=zr=an.depthStencil:(Yo=an.depthStencil,ri=!1,zr=!1))}else Cr=fi=1;var xn=null,bn=null,Yn=null,Jn=null;if(Array.isArray(wi))xn=wi.map(Re);else if(wi)xn=[Re(wi)];else for(xn=new Array(Aa),Fn=0;Fn<Aa;++Fn)xn[Fn]=hn(Cr,fi,Ai,gi,Oa);ut(L.webgl_draw_buffers||xn.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),ut(xn.length<=Et.maxColorAttachments,"too many color attachments, not supported"),Cr=Cr||xn[0].width,fi=fi||xn[0].height,Oo?bn=Re(Oo):ri&&!zr&&(bn=hn(Cr,fi,De,"depth","uint32")),Fo?Yn=Re(Fo):zr&&!ri&&(Yn=hn(Cr,fi,!1,"stencil","uint8")),Yo?Jn=Re(Yo):!Oo&&!Fo&&zr&&ri&&(Jn=hn(Cr,fi,De,"depth stencil","depth stencil")),ut(!!Oo+!!Fo+!!Yo<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var $n=null;for(Fn=0;Fn<xn.length;++Fn)if(ke(xn[Fn],Cr,fi),ut(!xn[Fn]||xn[Fn].texture&&fa.indexOf(xn[Fn].texture._texture.format)>=0||xn[Fn].renderbuffer&&La.indexOf(xn[Fn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Fn+" is invalid"),xn[Fn]&&xn[Fn].texture){var _n=oa[xn[Fn].texture._texture.format]*pa[xn[Fn].texture._texture.type];$n===null?$n=_n:ut($n===_n,"all color attachments much have the same number of bits per pixel.")}return ke(bn,Cr,fi),ut(!bn||bn.texture&&bn.texture._texture.format===6402||bn.renderbuffer&&bn.renderbuffer._renderbuffer.format===33189,"invalid depth attachment for framebuffer object"),ke(Yn,Cr,fi),ut(!Yn||Yn.renderbuffer&&Yn.renderbuffer._renderbuffer.format===36168,"invalid stencil attachment for framebuffer object"),ke(Jn,Cr,fi),ut(!Jn||Jn.texture&&Jn.texture._texture.format===34041||Jn.renderbuffer&&Jn.renderbuffer._renderbuffer.format===34041,"invalid depth-stencil attachment for framebuffer object"),fe(dn),dn.width=Cr,dn.height=fi,dn.colorAttachments=xn,dn.depthAttachment=bn,dn.stencilAttachment=Yn,dn.depthStencilAttachment=Jn,Sn.color=xn.map(pn),Sn.depth=pn(bn),Sn.stencil=pn(Yn),Sn.depthStencil=pn(Jn),Sn.width=dn.width,Sn.height=dn.height,Fe(dn),Sn}return Zt.framebufferCount++,Sn(ln,_e),I(Sn,{resize:function(Pn,Fn){ut(de.next!==dn,"can not resize a framebuffer which is currently in use");var Cr=Math.max(0|Pn,1),fi=Math.max(0|Fn||Cr,1);if(Cr===dn.width&&fi===dn.height)return Sn;for(var ri=dn.colorAttachments,zr=0;zr<ri.length;++zr)on(ri[zr],Cr,fi);return on(dn.depthAttachment,Cr,fi),on(dn.stencilAttachment,Cr,fi),on(dn.depthStencilAttachment,Cr,fi),dn.width=Sn.width=Cr,dn.height=Sn.height=fi,Fe(dn),Sn},_reglType:"framebuffer",_framebuffer:dn,destroy:function(){Ne(dn),fe(dn)},use:function(Pn){de.setFBO({framebuffer:Sn},Pn)}})}return I(de,{getFramebuffer:function(_e){if(typeof _e=="function"&&_e._reglType==="framebuffer"){var dn=_e._framebuffer;if(dn instanceof Ie)return dn}return null},create:rn,createCube:function(_e){var dn=Array(6);function Sn(tr){var Pn;ut(dn.indexOf(de.next)<0,"can not update framebuffer which is currently in use");var Fn,Cr={color:null},fi=0,ri=null,zr="rgba",wi="uint8",Ai=1;if(typeof tr=="number")fi=0|tr;else if(tr){ut.type(tr,"object","invalid arguments for framebuffer");var gi=tr;if("shape"in gi){var Oa=gi.shape;ut(Array.isArray(Oa)&&Oa.length>=2,"invalid shape for framebuffer"),ut(Oa[0]===Oa[1],"cube framebuffer must be square"),fi=Oa[0]}else"radius"in gi&&(fi=0|gi.radius),"width"in gi?(fi=0|gi.width,"height"in gi&&ut(gi.height===fi,"must be square")):"height"in gi&&(fi=0|gi.height);("color"in gi||"colors"in gi)&&(ri=gi.color||gi.colors,Array.isArray(ri)&&ut(ri.length===1||L.webgl_draw_buffers,"multiple render targets not supported")),ri||("colorCount"in gi&&(Ai=0|gi.colorCount,ut(Ai>0,"invalid color buffer count")),"colorType"in gi&&(ut.oneOf(gi.colorType,Me,"invalid color type"),wi=gi.colorType),"colorFormat"in gi&&(zr=gi.colorFormat,ut.oneOf(gi.colorFormat,he,"invalid color format for texture"))),"depth"in gi&&(Cr.depth=gi.depth),"stencil"in gi&&(Cr.stencil=gi.stencil),"depthStencil"in gi&&(Cr.depthStencil=gi.depthStencil)}else fi=1;if(ri)if(Array.isArray(ri))for(Fn=[],Pn=0;Pn<ri.length;++Pn)Fn[Pn]=ri[Pn];else Fn=[ri];else{Fn=Array(Ai);var Aa={radius:fi,format:zr,type:wi};for(Pn=0;Pn<Ai;++Pn)Fn[Pn]=$t.createCube(Aa)}for(Cr.color=Array(Fn.length),Pn=0;Pn<Fn.length;++Pn){var Oo=Fn[Pn];ut(typeof Oo=="function"&&Oo._reglType==="textureCube","invalid cube map"),fi=fi||Oo.width,ut(Oo.width===fi&&Oo.height===fi,"invalid cube map shape"),Cr.color[Pn]={target:34069,data:Fn[Pn]}}for(Pn=0;Pn<6;++Pn){for(var Fo=0;Fo<Fn.length;++Fo)Cr.color[Fo].target=34069+Pn;Pn>0&&(Cr.depth=dn[0].depth,Cr.stencil=dn[0].stencil,Cr.depthStencil=dn[0].depthStencil),dn[Pn]?dn[Pn](Cr):dn[Pn]=rn(Cr)}return I(Sn,{width:fi,height:fi,color:Fn})}return Sn(_e),I(Sn,{faces:dn,resize:function(Pn){var Fn,Cr=0|Pn;if(ut(Cr>0&&Cr<=Et.maxCubeMapSize,"invalid radius for cube fbo"),Cr===Sn.width)return Sn;var fi=Sn.color;for(Fn=0;Fn<fi.length;++Fn)fi[Fn].resize(Cr);for(Fn=0;Fn<6;++Fn)dn[Fn].resize(Cr);return Sn.width=Sn.height=Cr,Sn},_reglType:"framebufferCube",destroy:function(){dn.forEach(function(Pn){Pn.destroy()})}})},clear:function(){g(jn).forEach(Ne)},restore:function(){de.cur=null,de.next=null,de.dirty=!0,g(jn).forEach(function(_e){_e.framebuffer=je.createFramebuffer(),Fe(_e)})}})}(un,Lr,Oi,ha,na,Fr),ve=An(un,_r,Lr,Oi,Ri,Gi,0,Zi,{},Si,ca,{elements:null,primitive:4,count:-1,offset:0,instances:-1},Qr,Gr,sn),U=Pr(un,Zi,ve.procs.poll,Qr,ur,Lr,Oi),G=ve.next,nt=un.canvas,vt=[],Gt=[],Jt=[],ie=[sn.onDestroy],ue=null;function Ce(){if(vt.length===0)return Gr&&Gr.update(),void(ue=null);ue=mt.next(Ce),Bn();for(var je=vt.length-1;je>=0;--je){var L=vt[je];L&&L(Qr,null,0)}un.flush(),Gr&&Gr.update()}function we(){!ue&&vt.length>0&&(ue=mt.next(Ce))}function cn(){ue&&(mt.cancel(Ce),ue=null)}function Cn(je){je.preventDefault(),jr=!0,cn(),Gt.forEach(function(L){L()})}function _t(je){un.getError(),jr=!1,wr.restore(),ca.restore(),Ri.restore(),ha.restore(),na.restore(),Zi.restore(),Si.restore(),Gr&&Gr.restore(),ve.procs.refresh(),we(),Jt.forEach(function(L){L()})}function Xt(je){function L(ke,nn){var Re={},hn={};return Object.keys(ke).forEach(function(pn){var on=ke[pn];if(dt.isDynamic(on))hn[pn]=dt.unbox(on,pn);else{if(nn&&Array.isArray(on)){for(var mn=0;mn<on.length;++mn)if(dt.isDynamic(on[mn]))return void(hn[pn]=dt.unbox(on,pn))}Re[pn]=on}}),{dynamic:hn,static:Re}}ut(!!je,"invalid args to regl({...})"),ut.type(je,"object","invalid args to regl({...})");var Et=L(je.context||{},!0),$t=L(je.uniforms||{},!0),ye=L(je.attributes||{},!1),Zt=L(function(ke){var nn=I({},ke);function Re(hn){if(hn in nn){var pn=nn[hn];delete nn[hn],Object.keys(pn).forEach(function(on){nn[hn+"."+on]=pn[on]})}}return delete nn.uniforms,delete nn.attributes,delete nn.context,delete nn.vao,"stencil"in nn&&nn.stencil.op&&(nn.stencil.opBack=nn.stencil.opFront=nn.stencil.op,delete nn.stencil.op),Re("blend"),Re("depth"),Re("cull"),Re("stencil"),Re("polygonOffset"),Re("scissor"),Re("sample"),"vao"in ke&&(nn.vao=ke.vao),nn}(je),!1),de={gpuTime:0,cpuTime:0,count:0},he=ve.compile(Zt,ye,$t,Et,de),le=he.draw,Me=he.batch,Ve=he.scope,Ye=[];return I(function(ke,nn){var Re;if(jr&&ut.raise("context lost"),typeof ke=="function")return Ve.call(this,null,ke,0);if(typeof nn=="function")if(typeof ke=="number")for(Re=0;Re<ke;++Re)Ve.call(this,null,nn,Re);else{if(!Array.isArray(ke))return Ve.call(this,ke,nn,0);for(Re=0;Re<ke.length;++Re)Ve.call(this,ke[Re],nn,Re)}else if(typeof ke=="number"){if(ke>0)return Me.call(this,function(hn){for(;Ye.length<hn;)Ye.push(null);return Ye}(0|ke),0|ke)}else{if(!Array.isArray(ke))return le.call(this,ke);if(ke.length)return Me.call(this,ke,ke.length)}},{stats:de,destroy:function(){he.destroy()}})}nt&&(nt.addEventListener("webglcontextlost",Cn,!1),nt.addEventListener("webglcontextrestored",_t,!1));var Ee=Zi.setFBO=Xt({framebuffer:dt.define.call(null,1,"framebuffer")});function Vt(je,L){var Et=0;ve.procs.poll();var $t=L.color;$t&&(un.clearColor(+$t[0]||0,+$t[1]||0,+$t[2]||0,+$t[3]||0),Et|=16384),"depth"in L&&(un.clearDepth(+L.depth),Et|=256),"stencil"in L&&(un.clearStencil(0|L.stencil),Et|=1024),ut(!!Et,"called regl.clear with no buffer specified"),un.clear(Et)}function ce(je){return ut.type(je,"function","regl.frame() callback must be a function"),vt.push(je),we(),{cancel:function(){var Et=rr(vt,je);ut(Et>=0,"cannot cancel a frame twice"),vt[Et]=function $t(){var ye=rr(vt,$t);vt[ye]=vt[vt.length-1],vt.length-=1,vt.length<=0&&cn()}}}}function yn(){var je=G.viewport,L=G.scissor_box;je[0]=je[1]=L[0]=L[1]=0,Qr.viewportWidth=Qr.framebufferWidth=Qr.drawingBufferWidth=je[2]=L[2]=un.drawingBufferWidth,Qr.viewportHeight=Qr.framebufferHeight=Qr.drawingBufferHeight=je[3]=L[3]=un.drawingBufferHeight}function Bn(){Qr.tick+=1,Qr.time=Kn(),yn(),ve.procs.poll()}function Zn(){ha.refresh(),yn(),ve.procs.refresh(),Gr&&Gr.update()}function Kn(){return(bt()-Hr)/1e3}Zn();var $e=I(Xt,{clear:function(L){if(ut(b(L)==="object"&&L,"regl.clear() takes an object as input"),"framebuffer"in L)if(L.framebuffer&&L.framebuffer_reglType==="framebufferCube")for(var Et=0;Et<6;++Et)Ee(I({framebuffer:L.framebuffer.faces[Et]},L),Vt);else Ee(L,Vt);else Vt(0,L)},prop:dt.define.bind(null,1),context:dt.define.bind(null,2),this:dt.define.bind(null,3),draw:Xt({}),buffer:function(L){return Ri.create(L,34962,!1,!1)},elements:function(L){return Gi.create(L,!1)},texture:ha.create2D,cube:ha.createCube,renderbuffer:na.create,framebuffer:Zi.create,framebufferCube:Zi.createCube,vao:Si.createVAO,attributes:ur,frame:ce,on:function(L,Et){var $t;switch(ut.type(Et,"function","listener callback must be a function"),L){case"frame":return ce(Et);case"lost":$t=Gt;break;case"restore":$t=Jt;break;case"destroy":$t=ie;break;default:ut.raise("invalid event, must be one of frame,lost,restore,destroy")}return $t.push(Et),{cancel:function(){for(var Zt=0;Zt<$t.length;++Zt)if($t[Zt]===Et)return $t[Zt]=$t[$t.length-1],void $t.pop()}}},limits:Oi,hasExtension:function(L){return Oi.extensions.indexOf(L.toLowerCase())>=0},read:U,destroy:function(){vt.length=0,cn(),nt&&(nt.removeEventListener("webglcontextlost",Cn),nt.removeEventListener("webglcontextrestored",_t)),ca.clear(),Zi.clear(),na.clear(),ha.clear(),Gi.clear(),Ri.clear(),Si.clear(),Gr&&Gr.clear(),ie.forEach(function(L){L()})},_gl:un,_refresh:Zn,poll:function(){Bn(),Gr&&Gr.update()},now:Kn,stats:Fr});return sn.onDone(null,$e),$e}},b(y)==="object"&&i!==void 0?i.exports=p():(u=typeof(n=p)=="function"?n.call(y,t,y,i):n)===void 0||(i.exports=u)},function(i,y,t){"use strict";i.exports=function(n,u,p,b){try{try{var c;try{c=new window.Blob([n])}catch(r){(c=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(n),c=c.getBlob()}var S=window.URL||window.webkitURL,I=S.createObjectURL(c),m=new window[u](I,p);return S.revokeObjectURL(I),m}catch(r){return new window[u]("data:application/javascript,".concat(encodeURIComponent(n)),p)}}catch(r){if(!b)throw Error("Inline worker is not supported");return new window[u](b,p)}}},,,,,,,,function(i,y,t){"use strict";t.r(y),t.d(y,"Minimap",function(){return E}),t.d(y,"Grid",function(){return A}),t.d(y,"Bundling",function(){return f}),t.d(y,"Menu",function(){return x}),t.d(y,"Fisheye",function(){return j}),t.d(y,"ToolBar",function(){return P}),t.d(y,"Tooltip",function(){return W}),t.d(y,"TimeBar",function(){return X}),t.d(y,"ImageMinimap",function(){return $}),t.d(y,"EdgeFilterLens",function(){return ft});var n=t(5);t.d(y,"Arrow",function(){return n.d}),t.d(y,"Marker",function(){return n.k}),t.d(y,"Shape",function(){return n.m});var u=t(18);t.d(y,"ICanvas",function(){return u.ICanvas}),t.d(y,"IGroup",function(){return u.IGroup}),t.d(y,"IShape",function(){return u.IShape});var p=t(33);t.d(y,"Algorithm",function(){return p});var b=t(91);t.d(y,"Graph",function(){return b.a});var c=t(152);t.d(y,"TreeGraph",function(){return c.a});var S=t(69);t.d(y,"Layout",function(){return S.a}),t.d(y,"registerLayout",function(){return S.b});var I=t(45);t.d(y,"Global",function(){return I.a});var m=t(38);t.d(y,"Util",function(){return m.a});var r=t(35);t(509),t(508),t.d(y,"G6GraphEvent",function(){return n.i}),t.d(y,"G6Event",function(){return n.h}),t.d(y,"Node",function(){return n.l}),t.d(y,"Edge",function(){return n.g}),t.d(y,"Combo",function(){return n.f}),t.d(y,"Hull",function(){return n.j}),t.d(y,"registerNode",function(){return n.r}),t.d(y,"registerCombo",function(){return n.p}),t.d(y,"AbstractGraph",function(){return n.b}),t.d(y,"registerEdge",function(){return n.q}),t.d(y,"registerBehavior",function(){return n.o}),t.d(y,"AbstractLayout",function(){return n.c}),t.d(y,"AbstractEvent",function(){return n.a}),t.d(y,"BaseGlobal",function(){return n.e});var s=t(245);for(var d in s)["default","Graph","TreeGraph","Util","Layout","registerLayout","Global","Minimap","Grid","Bundling","Menu","Fisheye","Algorithm","ToolBar","Tooltip","TimeBar","ImageMinimap","EdgeFilterLens","Arrow","Marker","Shape","ICanvas","IGroup","IShape","G6GraphEvent","G6Event","Node","Edge","Combo","Hull","registerNode","registerCombo","AbstractGraph","registerEdge","registerBehavior","AbstractLayout","AbstractEvent","BaseGlobal"].indexOf(d)<0&&function(Z){t.d(y,Z,function(){return s[Z]})}(d);var C=t(246);for(var d in C)["default","Graph","TreeGraph","Util","Layout","registerLayout","Global","Minimap","Grid","Bundling","Menu","Fisheye","Algorithm","ToolBar","Tooltip","TimeBar","ImageMinimap","EdgeFilterLens","Arrow","Marker","Shape","ICanvas","IGroup","IShape","G6GraphEvent","G6Event","Node","Edge","Combo","Hull","registerNode","registerCombo","AbstractGraph","registerEdge","registerBehavior","AbstractLayout","AbstractEvent","BaseGlobal"].indexOf(d)<0&&function(lt){t.d(y,lt,function(){return C[lt]})}(d);var E=r.a.Minimap,A=r.a.Grid,f=r.a.Bundling,x=r.a.Menu,j=r.a.Fisheye,P=r.a.ToolBar,W=r.a.Tooltip,X=r.a.TimeBar,$=r.a.ImageMinimap,ft=r.a.EdgeFilterLens;y.default={version:I.a.version,Graph:b.a,TreeGraph:c.a,Util:m.a,Layout:S.a,registerLayout:S.b,Global:I.a,registerBehavior:n.o,registerCombo:n.p,registerEdge:n.q,registerNode:n.r,Minimap:r.a.Minimap,Grid:r.a.Grid,Bundling:r.a.Bundling,Menu:r.a.Menu,ToolBar:r.a.ToolBar,Tooltip:r.a.Tooltip,TimeBar:X,Fisheye:j,ImageMinimap:$,EdgeFilterLens:ft,Algorithm:p,Arrow:n.d,Marker:n.k,Shape:n.m}},function(i,y,t){var n=t(264),u=t(265),p={};for(var b in n)n.hasOwnProperty(b)&&(p[n[b]]=b);var c=i.exports={to:{},get:{}};function S(m,r,s){return Math.min(Math.max(r,m),s)}function I(m){var r=m.toString(16).toUpperCase();return r.length<2?"0"+r:r}c.get=function(m){var r,s;switch(m.substring(0,3).toLowerCase()){case"hsl":r=c.get.hsl(m),s="hsl";break;case"hwb":r=c.get.hwb(m),s="hwb";break;default:r=c.get.rgb(m),s="rgb"}return r?{model:s,value:r}:null},c.get.rgb=function(m){if(!m)return null;var r,s,d,C=[0,0,0,1];if(r=m.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(d=r[2],r=r[1],s=0;s<3;s++){var E=2*s;C[s]=parseInt(r.slice(E,E+2),16)}d&&(C[3]=parseInt(d,16)/255)}else if(r=m.match(/^#([a-f0-9]{3,4})$/i)){for(d=(r=r[1])[3],s=0;s<3;s++)C[s]=parseInt(r[s]+r[s],16);d&&(C[3]=parseInt(d+d,16)/255)}else if(r=m.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(s=0;s<3;s++)C[s]=parseInt(r[s+1],0);r[4]&&(C[3]=parseFloat(r[4]))}else{if(!(r=m.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(r=m.match(/(\D+)/))?r[1]==="transparent"?[0,0,0,0]:(C=n[r[1]])?(C[3]=1,C):null:null;for(s=0;s<3;s++)C[s]=Math.round(2.55*parseFloat(r[s+1]));r[4]&&(C[3]=parseFloat(r[4]))}for(s=0;s<3;s++)C[s]=S(C[s],0,255);return C[3]=S(C[3],0,1),C},c.get.hsl=function(m){if(!m)return null;var r=m.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(r){var s=parseFloat(r[4]);return[(parseFloat(r[1])+360)%360,S(parseFloat(r[2]),0,100),S(parseFloat(r[3]),0,100),S(isNaN(s)?1:s,0,1)]}return null},c.get.hwb=function(m){if(!m)return null;var r=m.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(r){var s=parseFloat(r[4]);return[(parseFloat(r[1])%360+360)%360,S(parseFloat(r[2]),0,100),S(parseFloat(r[3]),0,100),S(isNaN(s)?1:s,0,1)]}return null},c.to.hex=function(){var m=u(arguments);return"#"+I(m[0])+I(m[1])+I(m[2])+(m[3]<1?I(Math.round(255*m[3])):"")},c.to.rgb=function(){var m=u(arguments);return m.length<4||m[3]===1?"rgb("+Math.round(m[0])+", "+Math.round(m[1])+", "+Math.round(m[2])+")":"rgba("+Math.round(m[0])+", "+Math.round(m[1])+", "+Math.round(m[2])+", "+m[3]+")"},c.to.rgb.percent=function(){var m=u(arguments),r=Math.round(m[0]/255*100),s=Math.round(m[1]/255*100),d=Math.round(m[2]/255*100);return m.length<4||m[3]===1?"rgb("+r+"%, "+s+"%, "+d+"%)":"rgba("+r+"%, "+s+"%, "+d+"%, "+m[3]+")"},c.to.hsl=function(){var m=u(arguments);return m.length<4||m[3]===1?"hsl("+m[0]+", "+m[1]+"%, "+m[2]+"%)":"hsla("+m[0]+", "+m[1]+"%, "+m[2]+"%, "+m[3]+")"},c.to.hwb=function(){var m=u(arguments),r="";return m.length>=4&&m[3]!==1&&(r=", "+m[3]),"hwb("+m[0]+", "+m[1]+"%, "+m[2]+"%"+r+")"},c.to.keyword=function(m){return p[m.slice(0,3)]}},function(i,y,t){"use strict";i.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(i,y,t){"use strict";var n=t(266),u=Array.prototype.concat,p=Array.prototype.slice,b=i.exports=function(c){for(var S=[],I=0,m=c.length;I<m;I++){var r=c[I];n(r)?S=u.call(S,p.call(r)):S.push(r)}return S};b.wrap=function(c){return function(){return c(b(arguments))}}},function(i,y){i.exports=function(t){return!(!t||typeof t=="string")&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String"))}},function(i,y,t){function n(c){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(c)}var u=t(161),p=t(269),b={};Object.keys(u).forEach(function(c){b[c]={},Object.defineProperty(b[c],"channels",{value:u[c].channels}),Object.defineProperty(b[c],"labels",{value:u[c].labels});var S=p(c);Object.keys(S).forEach(function(I){var m=S[I];b[c][I]=function(r){var s=function(C){if(C==null)return C;arguments.length>1&&(C=Array.prototype.slice.call(arguments));var E=r(C);if(n(E)==="object")for(var A=E.length,f=0;f<A;f++)E[f]=Math.round(E[f]);return E};return"conversion"in r&&(s.conversion=r.conversion),s}(m),b[c][I].raw=function(r){var s=function(C){return C==null?C:(arguments.length>1&&(C=Array.prototype.slice.call(arguments)),r(C))};return"conversion"in r&&(s.conversion=r.conversion),s}(m)})}),i.exports=b},function(i,y,t){"use strict";i.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(i,y,t){var n=t(161);function u(c){var S=function(){for(var A={},f=Object.keys(n),x=f.length,j=0;j<x;j++)A[f[j]]={distance:-1,parent:null};return A}(),I=[c];for(S[c].distance=0;I.length;)for(var m=I.pop(),r=Object.keys(n[m]),s=r.length,d=0;d<s;d++){var C=r[d],E=S[C];E.distance===-1&&(E.distance=S[m].distance+1,E.parent=m,I.unshift(C))}return S}function p(c,S){return function(I){return S(c(I))}}function b(c,S){for(var I=[S[c].parent,c],m=n[S[c].parent][c],r=S[c].parent;S[r].parent;)I.unshift(S[r].parent),m=p(n[S[r].parent][r],m),r=S[r].parent;return m.conversion=I,m}i.exports=function(c){for(var S=u(c),I={},m=Object.keys(S),r=m.length,s=0;s<r;s++){var d=m[s];S[d].parent!==null&&(I[d]=b(d,S))}return I}},function(i,y,t){var n=t(271);i.exports={Graph:n.Graph,json:t(372),alg:t(373),version:n.version}},function(i,y,t){i.exports={Graph:t(124),version:t(371)}},function(i,y,t){var n=t(162);i.exports=function(u){return n(u,4)}},function(i,y){i.exports=function(){this.__data__=[],this.size=0}},function(i,y,t){var n=t(97),u=Array.prototype.splice;i.exports=function(p){var b=this.__data__,c=n(b,p);return!(c<0)&&(c==b.length-1?b.pop():u.call(b,c,1),--this.size,!0)}},function(i,y,t){var n=t(97);i.exports=function(u){var p=this.__data__,b=n(p,u);return b<0?void 0:p[b][1]}},function(i,y,t){var n=t(97);i.exports=function(u){return n(this.__data__,u)>-1}},function(i,y,t){var n=t(97);i.exports=function(u,p){var b=this.__data__,c=n(b,u);return c<0?(++this.size,b.push([u,p])):b[c][1]=p,this}},function(i,y,t){var n=t(96);i.exports=function(){this.__data__=new n,this.size=0}},function(i,y){i.exports=function(t){var n=this.__data__,u=n.delete(t);return this.size=n.size,u}},function(i,y){i.exports=function(t){return this.__data__.get(t)}},function(i,y){i.exports=function(t){return this.__data__.has(t)}},function(i,y,t){var n=t(96),u=t(125),p=t(126);i.exports=function(b,c){var S=this.__data__;if(S instanceof n){var I=S.__data__;if(!u||I.length<199)return I.push([b,c]),this.size=++S.size,this;S=this.__data__=new p(I)}return S.set(b,c),this.size=S.size,this}},function(i,y,t){var n=t(83),u=t(286),p=t(43),b=t(165),c=/^\[object .+?Constructor\]$/,S=Function.prototype,I=Object.prototype,m=S.toString,r=I.hasOwnProperty,s=RegExp("^"+m.call(r).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");i.exports=function(d){return!(!p(d)||u(d))&&(n(d)?s:c).test(b(d))}},function(i,y,t){var n=t(72),u=Object.prototype,p=u.hasOwnProperty,b=u.toString,c=n?n.toStringTag:void 0;i.exports=function(S){var I=p.call(S,c),m=S[c];try{S[c]=void 0;var r=!0}catch(d){}var s=b.call(S);return r&&(I?S[c]=m:delete S[c]),s}},function(i,y){var t=Object.prototype.toString;i.exports=function(n){return t.call(n)}},function(i,y,t){var n,u=t(287),p=(n=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";i.exports=function(b){return!!p&&p in b}},function(i,y,t){var n=t(47)["__core-js_shared__"];i.exports=n},function(i,y){i.exports=function(t,n){return t==null?void 0:t[n]}},function(i,y,t){var n=t(290),u=t(96),p=t(125);i.exports=function(){this.size=0,this.__data__={hash:new n,map:new(p||u),string:new n}}},function(i,y,t){var n=t(291),u=t(292),p=t(293),b=t(294),c=t(295);function S(I){var m=-1,r=I==null?0:I.length;for(this.clear();++m<r;){var s=I[m];this.set(s[0],s[1])}}S.prototype.clear=n,S.prototype.delete=u,S.prototype.get=p,S.prototype.has=b,S.prototype.set=c,i.exports=S},function(i,y,t){var n=t(98);i.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(i,y){i.exports=function(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}},function(i,y,t){var n=t(98),u=Object.prototype.hasOwnProperty;i.exports=function(p){var b=this.__data__;if(n){var c=b[p];return c==="__lodash_hash_undefined__"?void 0:c}return u.call(b,p)?b[p]:void 0}},function(i,y,t){var n=t(98),u=Object.prototype.hasOwnProperty;i.exports=function(p){var b=this.__data__;return n?b[p]!==void 0:u.call(b,p)}},function(i,y,t){var n=t(98);i.exports=function(u,p){var b=this.__data__;return this.size+=this.has(u)?0:1,b[u]=n&&p===void 0?"__lodash_hash_undefined__":p,this}},function(i,y,t){var n=t(99);i.exports=function(u){var p=n(this,u).delete(u);return this.size-=p?1:0,p}},function(i,y){function t(n){return(t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(n)}i.exports=function(n){var u=t(n);return u=="string"||u=="number"||u=="symbol"||u=="boolean"?n!=="__proto__":n===null}},function(i,y,t){var n=t(99);i.exports=function(u){return n(this,u).get(u)}},function(i,y,t){var n=t(99);i.exports=function(u){return n(this,u).has(u)}},function(i,y,t){var n=t(99);i.exports=function(u,p){var b=n(this,u),c=b.size;return b.set(u,p),this.size+=b.size==c?0:1,this}},function(i,y,t){var n=t(84),u=t(58);i.exports=function(p,b){return p&&n(b,u(b),p)}},function(i,y){i.exports=function(t,n){for(var u=-1,p=Array(t);++u<t;)p[u]=n(u);return p}},function(i,y,t){var n=t(57),u=t(48);i.exports=function(p){return u(p)&&n(p)=="[object Arguments]"}},function(i,y){i.exports=function(){return!1}},function(i,y,t){var n=t(57),u=t(128),p=t(48),b={};b["[object Float32Array]"]=b["[object Float64Array]"]=b["[object Int8Array]"]=b["[object Int16Array]"]=b["[object Int32Array]"]=b["[object Uint8Array]"]=b["[object Uint8ClampedArray]"]=b["[object Uint16Array]"]=b["[object Uint32Array]"]=!0,b["[object Arguments]"]=b["[object Array]"]=b["[object ArrayBuffer]"]=b["[object Boolean]"]=b["[object DataView]"]=b["[object Date]"]=b["[object Error]"]=b["[object Function]"]=b["[object Map]"]=b["[object Number]"]=b["[object Object]"]=b["[object RegExp]"]=b["[object Set]"]=b["[object String]"]=b["[object WeakMap]"]=!1,i.exports=function(c){return p(c)&&u(c.length)&&!!b[n(c)]}},function(i,y,t){var n=t(168)(Object.keys,Object);i.exports=n},function(i,y,t){var n=t(84),u=t(65);i.exports=function(p,b){return p&&n(b,u(b),p)}},function(i,y,t){var n=t(43),u=t(104),p=t(309),b=Object.prototype.hasOwnProperty;i.exports=function(c){if(!n(c))return p(c);var S=u(c),I=[];for(var m in c)(m!="constructor"||!S&&b.call(c,m))&&I.push(m);return I}},function(i,y){i.exports=function(t){var n=[];if(t!=null)for(var u in Object(t))n.push(u);return n}},function(i,y,t){var n=t(84),u=t(131);i.exports=function(p,b){return n(p,u(p),b)}},function(i,y,t){var n=t(84),u=t(173);i.exports=function(p,b){return n(p,u(p),b)}},function(i,y,t){var n=t(175),u=t(173),p=t(65);i.exports=function(b){return n(b,p,u)}},function(i,y,t){var n=t(64)(t(47),"DataView");i.exports=n},function(i,y,t){var n=t(64)(t(47),"Promise");i.exports=n},function(i,y,t){var n=t(64)(t(47),"WeakMap");i.exports=n},function(i,y){var t=Object.prototype.hasOwnProperty;i.exports=function(n){var u=n.length,p=new n.constructor(u);return u&&typeof n[0]=="string"&&t.call(n,"index")&&(p.index=n.index,p.input=n.input),p}},function(i,y,t){var n=t(133),u=t(318),p=t(319),b=t(320),c=t(178);i.exports=function(S,I,m){var r=S.constructor;switch(I){case"[object ArrayBuffer]":return n(S);case"[object Boolean]":case"[object Date]":return new r(+S);case"[object DataView]":return u(S,m);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return c(S,m);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(S);case"[object RegExp]":return p(S);case"[object Set]":return new r;case"[object Symbol]":return b(S)}}},function(i,y,t){var n=t(133);i.exports=function(u,p){var b=p?n(u.buffer):u.buffer;return new u.constructor(b,u.byteOffset,u.byteLength)}},function(i,y){var t=/\w*$/;i.exports=function(n){var u=new n.constructor(n.source,t.exec(n));return u.lastIndex=n.lastIndex,u}},function(i,y,t){var n=t(72),u=n?n.prototype:void 0,p=u?u.valueOf:void 0;i.exports=function(b){return p?Object(p.call(b)):{}}},function(i,y,t){var n=t(322),u=t(103),p=t(129),b=p&&p.isMap,c=b?u(b):n;i.exports=c},function(i,y,t){var n=t(74),u=t(48);i.exports=function(p){return u(p)&&n(p)=="[object Map]"}},function(i,y,t){var n=t(324),u=t(103),p=t(129),b=p&&p.isSet,c=b?u(b):n;i.exports=c},function(i,y,t){var n=t(74),u=t(48);i.exports=function(p){return u(p)&&n(p)=="[object Set]"}},function(i,y){i.exports=function(t){return function(n,u,p){for(var b=-1,c=Object(n),S=p(n),I=S.length;I--;){var m=S[t?I:++b];if(u(c[m],m,c)===!1)break}return n}}},function(i,y,t){var n=t(53);i.exports=function(u,p){return function(b,c){if(b==null)return b;if(!n(b))return u(b,c);for(var S=b.length,I=p?S:-1,m=Object(b);(p?I--:++I<S)&&c(m[I],I,m)!==!1;);return b}}},function(i,y,t){var n=t(106);i.exports=function(u,p){var b=[];return n(u,function(c,S,I){p(c,S,I)&&b.push(c)}),b}},function(i,y,t){var n=t(329),u=t(337),p=t(190);i.exports=function(b){var c=u(b);return c.length==1&&c[0][2]?p(c[0][0],c[0][1]):function(S){return S===b||n(S,b,c)}}},function(i,y,t){var n=t(95),u=t(185);i.exports=function(p,b,c,S){var I=c.length,m=I,r=!S;if(p==null)return!m;for(p=Object(p);I--;){var s=c[I];if(r&&s[2]?s[1]!==p[s[0]]:!(s[0]in p))return!1}for(;++I<m;){var d=(s=c[I])[0],C=p[d],E=s[1];if(r&&s[2]){if(C===void 0&&!(d in p))return!1}else{var A=new n;if(S)var f=S(C,E,d,p,b,A);if(!(f===void 0?u(E,C,3,S,A):f))return!1}}return!0}},function(i,y,t){var n=t(95),u=t(186),p=t(334),b=t(336),c=t(74),S=t(26),I=t(73),m=t(44),r="[object Object]",s=Object.prototype.hasOwnProperty;i.exports=function(d,C,E,A,f,x){var j=S(d),P=S(C),W=j?"[object Array]":c(d),X=P?"[object Array]":c(C),$=(W=W=="[object Arguments]"?r:W)==r,ft=(X=X=="[object Arguments]"?r:X)==r,Z=W==X;if(Z&&I(d)){if(!I(C))return!1;j=!0,$=!1}if(Z&&!$)return x||(x=new n),j||m(d)?u(d,C,E,A,f,x):p(d,C,W,E,A,f,x);if(!(1&E)){var lt=$&&s.call(d,"__wrapped__"),pt=ft&&s.call(C,"__wrapped__");if(lt||pt){var gt=lt?d.value():d,ut=pt?C.value():C;return x||(x=new n),f(gt,ut,E,A,x)}}return!!Z&&(x||(x=new n),b(d,C,E,A,f,x))}},function(i,y){i.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(i,y){i.exports=function(t){return this.__data__.has(t)}},function(i,y){i.exports=function(t,n){for(var u=-1,p=t==null?0:t.length;++u<p;)if(n(t[u],u,t))return!0;return!1}},function(i,y,t){var n=t(72),u=t(177),p=t(71),b=t(186),c=t(335),S=t(137),I=n?n.prototype:void 0,m=I?I.valueOf:void 0;i.exports=function(r,s,d,C,E,A,f){switch(d){case"[object DataView]":if(r.byteLength!=s.byteLength||r.byteOffset!=s.byteOffset)return!1;r=r.buffer,s=s.buffer;case"[object ArrayBuffer]":return!(r.byteLength!=s.byteLength||!A(new u(r),new u(s)));case"[object Boolean]":case"[object Date]":case"[object Number]":return p(+r,+s);case"[object Error]":return r.name==s.name&&r.message==s.message;case"[object RegExp]":case"[object String]":return r==s+"";case"[object Map]":var x=c;case"[object Set]":var j=1&C;if(x||(x=S),r.size!=s.size&&!j)return!1;var P=f.get(r);if(P)return P==s;C|=2,f.set(r,s);var W=b(x(r),x(s),C,E,A,f);return f.delete(r),W;case"[object Symbol]":if(m)return m.call(r)==m.call(s)}return!1}},function(i,y){i.exports=function(t){var n=-1,u=Array(t.size);return t.forEach(function(p,b){u[++n]=[b,p]}),u}},function(i,y,t){var n=t(174),u=Object.prototype.hasOwnProperty;i.exports=function(p,b,c,S,I,m){var r=1&c,s=n(p),d=s.length;if(d!=n(b).length&&!r)return!1;for(var C=d;C--;){var E=s[C];if(!(r?E in b:u.call(b,E)))return!1}var A=m.get(p),f=m.get(b);if(A&&f)return A==b&&f==p;var x=!0;m.set(p,b),m.set(b,p);for(var j=r;++C<d;){var P=p[E=s[C]],W=b[E];if(S)var X=r?S(W,P,E,b,p,m):S(P,W,E,p,b,m);if(!(X===void 0?P===W||I(P,W,c,S,m):X)){x=!1;break}j||(j=E=="constructor")}if(x&&!j){var $=p.constructor,ft=b.constructor;$==ft||!("constructor"in p)||!("constructor"in b)||typeof $=="function"&&$ instanceof $&&typeof ft=="function"&&ft instanceof ft||(x=!1)}return m.delete(p),m.delete(b),x}},function(i,y,t){var n=t(189),u=t(58);i.exports=function(p){for(var b=u(p),c=b.length;c--;){var S=b[c],I=p[S];b[c]=[S,I,n(I)]}return b}},function(i,y,t){var n=t(185),u=t(339),p=t(192),b=t(138),c=t(189),S=t(190),I=t(87);i.exports=function(m,r){return b(m)&&c(r)?S(I(m),r):function(s){var d=u(s,m);return d===void 0&&d===r?p(s,m):n(r,d,3)}}},function(i,y,t){var n=t(107);i.exports=function(u,p,b){var c=u==null?void 0:n(u,p);return c===void 0?b:c}},function(i,y,t){var n=t(341),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/\\(\\)?/g,b=n(function(c){var S=[];return c.charCodeAt(0)===46&&S.push(""),c.replace(u,function(I,m,r,s){S.push(r?s.replace(p,"$1"):m||I)}),S});i.exports=b},function(i,y,t){var n=t(342);i.exports=function(u){var p=n(u,function(c){return b.size===500&&b.clear(),c}),b=p.cache;return p}},function(i,y,t){var n=t(126);function u(p,b){if(typeof p!="function"||b!=null&&typeof b!="function")throw new TypeError("Expected a function");var c=function S(){var I=arguments,m=b?b.apply(this,I):I[0],r=S.cache;if(r.has(m))return r.get(m);var s=p.apply(this,I);return S.cache=r.set(m,s)||r,s};return c.cache=new(u.Cache||n),c}u.Cache=n,i.exports=u},function(i,y,t){var n=t(72),u=t(109),p=t(26),b=t(75),c=n?n.prototype:void 0,S=c?c.toString:void 0;i.exports=function I(m){if(typeof m=="string")return m;if(p(m))return u(m,I)+"";if(b(m))return S?S.call(m):"";var r=m+"";return r=="0"&&1/m==-1/0?"-0":r}},function(i,y){i.exports=function(t,n){return t!=null&&n in Object(t)}},function(i,y,t){var n=t(194),u=t(346),p=t(138),b=t(87);i.exports=function(c){return p(c)?n(b(c)):u(c)}},function(i,y,t){var n=t(107);i.exports=function(u){return function(p){return n(p,u)}}},function(i,y){var t=Object.prototype.hasOwnProperty;i.exports=function(n,u){return n!=null&&t.call(n,u)}},function(i,y,t){var n=t(130),u=t(74),p=t(85),b=t(26),c=t(53),S=t(73),I=t(104),m=t(44),r=Object.prototype.hasOwnProperty;i.exports=function(s){if(s==null)return!0;if(c(s)&&(b(s)||typeof s=="string"||typeof s.splice=="function"||S(s)||m(s)||p(s)))return!s.length;var d=u(s);if(d=="[object Map]"||d=="[object Set]")return!s.size;if(I(s))return!n(s).length;for(var C in s)if(r.call(s,C))return!1;return!0}},function(i,y){i.exports=function(t,n,u,p){var b=-1,c=t==null?0:t.length;for(p&&c&&(u=t[++b]);++b<c;)u=n(u,t[b],b,t);return u}},function(i,y){i.exports=function(t,n,u,p,b){return b(t,function(c,S,I){u=p?(p=!1,c):n(u,c,S,I)}),u}},function(i,y,t){var n=t(130),u=t(74),p=t(53),b=t(352),c=t(353);i.exports=function(S){if(S==null)return 0;if(p(S))return b(S)?c(S):S.length;var I=u(S);return I=="[object Map]"||I=="[object Set]"?S.size:n(S).length}},function(i,y,t){var n=t(57),u=t(26),p=t(48);i.exports=function(b){return typeof b=="string"||!u(b)&&p(b)&&n(b)=="[object String]"}},function(i,y,t){var n=t(354),u=t(355),p=t(356);i.exports=function(b){return u(b)?p(b):n(b)}},function(i,y,t){var n=t(194)("length");i.exports=n},function(i,y){var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");i.exports=function(n){return t.test(n)}},function(i,y){var t="[\\ud800-\\udfff]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",u="\\ud83c[\\udffb-\\udfff]",p="[^\\ud800-\\udfff]",b="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",S="(?:"+n+"|"+u+")?",I="[\\ufe0e\\ufe0f]?"+S+("(?:\\u200d(?:"+[p,b,c].join("|")+")[\\ufe0e\\ufe0f]?"+S+")*"),m="(?:"+[p+n+"?",n,b,c,t].join("|")+")",r=RegExp(u+"(?="+u+")|"+m+I,"g");i.exports=function(s){for(var d=r.lastIndex=0;r.test(s);)++d;return d}},function(i,y,t){var n=t(127),u=t(180),p=t(135),b=t(54),c=t(105),S=t(26),I=t(73),m=t(83),r=t(43),s=t(44);i.exports=function(d,C,E){var A=S(d),f=A||I(d)||s(d);if(C=b(C,4),E==null){var x=d&&d.constructor;E=f?A?new x:[]:r(d)&&m(x)?u(c(d)):{}}return(f?n:p)(d,function(j,P,W){return C(E,j,P,W)}),E}},function(i,y,t){var n=t(139),u=t(110),p=t(202),b=t(204),c=u(function(S){return p(n(S,1,b,!0))});i.exports=c},function(i,y,t){var n=t(72),u=t(85),p=t(26),b=n?n.isConcatSpreadable:void 0;i.exports=function(c){return p(c)||u(c)||!!(b&&c&&c[b])}},function(i,y){i.exports=function(t,n,u){switch(u.length){case 0:return t.call(n);case 1:return t.call(n,u[0]);case 2:return t.call(n,u[0],u[1]);case 3:return t.call(n,u[0],u[1],u[2])}return t.apply(n,u)}},function(i,y,t){var n=t(134),u=t(166),p=t(66),b=u?function(c,S){return u(c,"toString",{configurable:!0,enumerable:!1,value:n(S),writable:!0})}:p;i.exports=b},function(i,y){var t=Date.now;i.exports=function(n){var u=0,p=0;return function(){var b=t(),c=16-(b-p);if(p=b,c>0){if(++u>=800)return arguments[0]}else u=0;return n.apply(void 0,arguments)}}},function(i,y,t){var n=t(364);i.exports=function(u,p){return!!(u==null?0:u.length)&&n(u,p,0)>-1}},function(i,y,t){var n=t(203),u=t(365),p=t(366);i.exports=function(b,c,S){return c==c?p(b,c,S):n(b,u,S)}},function(i,y){i.exports=function(t){return t!=t}},function(i,y){i.exports=function(t,n,u){for(var p=u-1,b=t.length;++p<b;)if(t[p]===n)return p;return-1}},function(i,y){i.exports=function(t,n,u){for(var p=-1,b=t==null?0:t.length;++p<b;)if(u(n,t[p]))return!0;return!1}},function(i,y,t){var n=t(176),u=t(369),p=t(137),b=n&&1/p(new n([,-0]))[1]==1/0?function(c){return new n(c)}:u;i.exports=b},function(i,y){i.exports=function(){}},function(i,y,t){var n=t(109);i.exports=function(u,p){return n(p,function(b){return u[b]})}},function(i,y){i.exports="2.1.8"},function(i,y,t){var n=t(42),u=t(124);function p(c){return n.map(c.nodes(),function(S){var I=c.node(S),m=c.parent(S),r={v:S};return n.isUndefined(I)||(r.value=I),n.isUndefined(m)||(r.parent=m),r})}function b(c){return n.map(c.edges(),function(S){var I=c.edge(S),m={v:S.v,w:S.w};return n.isUndefined(S.name)||(m.name=S.name),n.isUndefined(I)||(m.value=I),m})}i.exports={write:function(S){var I={options:{directed:S.isDirected(),multigraph:S.isMultigraph(),compound:S.isCompound()},nodes:p(S),edges:b(S)};return n.isUndefined(S.graph())||(I.value=n.clone(S.graph())),I},read:function(S){var I=new u(S.options).setGraph(S.value);return n.each(S.nodes,function(m){I.setNode(m.v,m.value),m.parent&&I.setParent(m.v,m.parent)}),n.each(S.edges,function(m){I.setEdge({v:m.v,w:m.w,name:m.name},m.value)}),I}}},function(i,y,t){i.exports={components:t(374),dijkstra:t(206),dijkstraAll:t(375),findCycles:t(376),floydWarshall:t(377),isAcyclic:t(378),postorder:t(379),preorder:t(380),prim:t(381),tarjan:t(208),topsort:t(209)}},function(i,y,t){var n=t(42);i.exports=function(u){var p,b={},c=[];function S(I){n.has(b,I)||(b[I]=!0,p.push(I),n.each(u.successors(I),S),n.each(u.predecessors(I),S))}return n.each(u.nodes(),function(I){p=[],S(I),p.length&&c.push(p)}),c}},function(i,y,t){var n=t(206),u=t(42);i.exports=function(p,b,c){return u.transform(p.nodes(),function(S,I){S[I]=n(p,I,b,c)},{})}},function(i,y,t){var n=t(42),u=t(208);i.exports=function(p){return n.filter(u(p),function(b){return b.length>1||b.length===1&&p.hasEdge(b[0],b[0])})}},function(i,y,t){var n=t(42);i.exports=function(p,b,c){return function(S,I,m){var r={},s=S.nodes();return s.forEach(function(d){r[d]={},r[d][d]={distance:0},s.forEach(function(C){d!==C&&(r[d][C]={distance:Number.POSITIVE_INFINITY})}),m(d).forEach(function(C){var E=C.v===d?C.w:C.v,A=I(C);r[d][E]={distance:A,predecessor:d}})}),s.forEach(function(d){var C=r[d];s.forEach(function(E){var A=r[E];s.forEach(function(f){var x=A[d],j=C[f],P=A[f],W=x.distance+j.distance;W<P.distance&&(P.distance=W,P.predecessor=j.predecessor)})})}),r}(p,b||u,c||function(S){return p.outEdges(S)})};var u=n.constant(1)},function(i,y,t){var n=t(209);i.exports=function(u){try{n(u)}catch(p){if(p instanceof n.CycleException)return!1;throw p}return!0}},function(i,y,t){var n=t(210);i.exports=function(u,p){return n(u,p,"post")}},function(i,y,t){var n=t(210);i.exports=function(u,p){return n(u,p,"pre")}},function(i,y,t){var n=t(42),u=t(124),p=t(207);i.exports=function(b,c){var S,I=new u,m={},r=new p;function s(C){var E=C.v===S?C.w:C.v,A=r.priority(E);if(A!==void 0){var f=c(C);f<A&&(m[E]=S,r.decrease(E,f))}}if(b.nodeCount()===0)return I;n.each(b.nodes(),function(C){r.add(C,Number.POSITIVE_INFINITY),I.setNode(C)}),r.decrease(b.nodes()[0],0);for(var d=!1;r.size()>0;){if(S=r.removeMin(),n.has(m,S))I.setEdge(S,m[S]);else{if(d)throw new Error("Input graph is not connected: "+b);d=!0}b.nodeEdges(S).forEach(s)}return I}},function(i,y,t){"use strict";var n=t(24),u=t(419),p=t(422),b=t(423),c=t(37).normalizeRanks,S=t(425),I=t(37).removeEmptyRanks,m=t(426),r=t(427),s=t(428),d=t(429),C=t(438),E=t(37),A=t(46).Graph;i.exports=function(pt,gt){var ut=gt&&gt.debugTiming?E.time:E.notime;ut("layout",function(){var Bt=ut("  buildLayoutGraph",function(){return function(Lt){var St=new A({multigraph:!0,compound:!0}),K=lt(Lt.graph());return St.setGraph(n.merge({},x,Z(K,f),n.pick(K,j))),n.forEach(Lt.nodes(),function(dt){var mt=lt(Lt.node(dt));St.setNode(dt,n.defaults(Z(mt,P),W)),St.setParent(dt,Lt.parent(dt))}),n.forEach(Lt.edges(),function(dt){var mt=lt(Lt.edge(dt));St.setEdge(dt,n.merge({},$,Z(mt,X),n.pick(mt,ft)))}),St}(pt)});ut("  runLayout",function(){(function(Lt,St){St("    makeSpaceForEdgeLabels",function(){(function(K){var dt=K.graph();dt.ranksep/=2,n.forEach(K.edges(),function(mt){var bt=K.edge(mt);bt.minlen*=2,bt.labelpos.toLowerCase()!=="c"&&(dt.rankdir==="TB"||dt.rankdir==="BT"?bt.width+=bt.labeloffset:bt.height+=bt.labeloffset)})})(Lt)}),St("    removeSelfEdges",function(){(function(K){n.forEach(K.edges(),function(dt){if(dt.v===dt.w){var mt=K.node(dt.v);mt.selfEdges||(mt.selfEdges=[]),mt.selfEdges.push({e:dt,label:K.edge(dt)}),K.removeEdge(dt)}})})(Lt)}),St("    acyclic",function(){u.run(Lt)}),St("    nestingGraph.run",function(){m.run(Lt)}),St("    rank",function(){b(E.asNonCompoundGraph(Lt))}),St("    injectEdgeLabelProxies",function(){(function(K){n.forEach(K.edges(),function(dt){var mt=K.edge(dt);if(mt.width&&mt.height){var bt=K.node(dt.v),wt={rank:(K.node(dt.w).rank-bt.rank)/2+bt.rank,e:dt};E.addDummyNode(K,"edge-proxy",wt,"_ep")}})})(Lt)}),St("    removeEmptyRanks",function(){I(Lt)}),St("    nestingGraph.cleanup",function(){m.cleanup(Lt)}),St("    normalizeRanks",function(){c(Lt)}),St("    assignRankMinMax",function(){(function(K){var dt=0;n.forEach(K.nodes(),function(mt){var bt=K.node(mt);bt.borderTop&&(bt.minRank=K.node(bt.borderTop).rank,bt.maxRank=K.node(bt.borderBottom).rank,dt=n.max(dt,bt.maxRank))}),K.graph().maxRank=dt})(Lt)}),St("    removeEdgeLabelProxies",function(){(function(K){n.forEach(K.nodes(),function(dt){var mt=K.node(dt);mt.dummy==="edge-proxy"&&(K.edge(mt.e).labelRank=mt.rank,K.removeNode(dt))})})(Lt)}),St("    normalize.run",function(){p.run(Lt)}),St("    parentDummyChains",function(){S(Lt)}),St("    addBorderSegments",function(){r(Lt)}),St("    order",function(){d(Lt)}),St("    insertSelfEdges",function(){(function(K){var dt=E.buildLayerMatrix(K);n.forEach(dt,function(mt){var bt=0;n.forEach(mt,function(wt,J){var ct=K.node(wt);ct.order=J+bt,n.forEach(ct.selfEdges,function(it){E.addDummyNode(K,"selfedge",{width:it.label.width,height:it.label.height,rank:ct.rank,order:J+ ++bt,e:it.e,label:it.label},"_se")}),delete ct.selfEdges})})})(Lt)}),St("    adjustCoordinateSystem",function(){s.adjust(Lt)}),St("    position",function(){C(Lt)}),St("    positionSelfEdges",function(){(function(K){n.forEach(K.nodes(),function(dt){var mt=K.node(dt);if(mt.dummy==="selfedge"){var bt=K.node(mt.e.v),wt=bt.x+bt.width/2,J=bt.y,ct=mt.x-wt,it=bt.height/2;K.setEdge(mt.e,mt.label),K.removeNode(dt),mt.label.points=[{x:wt+2*ct/3,y:J-it},{x:wt+5*ct/6,y:J-it},{x:wt+ct,y:J},{x:wt+5*ct/6,y:J+it},{x:wt+2*ct/3,y:J+it}],mt.label.x=mt.x,mt.label.y=mt.y}})})(Lt)}),St("    removeBorderNodes",function(){(function(K){n.forEach(K.nodes(),function(dt){if(K.children(dt).length){var mt=K.node(dt),bt=K.node(mt.borderTop),wt=K.node(mt.borderBottom),J=K.node(n.last(mt.borderLeft)),ct=K.node(n.last(mt.borderRight));mt.width=Math.abs(ct.x-J.x),mt.height=Math.abs(wt.y-bt.y),mt.x=J.x+mt.width/2,mt.y=bt.y+mt.height/2}}),n.forEach(K.nodes(),function(dt){K.node(dt).dummy==="border"&&K.removeNode(dt)})})(Lt)}),St("    normalize.undo",function(){p.undo(Lt)}),St("    fixupEdgeLabelCoords",function(){(function(K){n.forEach(K.edges(),function(dt){var mt=K.edge(dt);if(n.has(mt,"x"))switch(mt.labelpos!=="l"&&mt.labelpos!=="r"||(mt.width-=mt.labeloffset),mt.labelpos){case"l":mt.x-=mt.width/2+mt.labeloffset;break;case"r":mt.x+=mt.width/2+mt.labeloffset}})})(Lt)}),St("    undoCoordinateSystem",function(){s.undo(Lt)}),St("    translateGraph",function(){(function(K){var dt=Number.POSITIVE_INFINITY,mt=0,bt=Number.POSITIVE_INFINITY,wt=0,J=K.graph(),ct=J.marginx||0,it=J.marginy||0;function _(R){var Q=R.x,k=R.y,g=R.width,O=R.height;dt=Math.min(dt,Q-g/2),mt=Math.max(mt,Q+g/2),bt=Math.min(bt,k-O/2),wt=Math.max(wt,k+O/2)}n.forEach(K.nodes(),function(R){_(K.node(R))}),n.forEach(K.edges(),function(R){var Q=K.edge(R);n.has(Q,"x")&&_(Q)}),dt-=ct,bt-=it,n.forEach(K.nodes(),function(R){var Q=K.node(R);Q.x-=dt,Q.y-=bt}),n.forEach(K.edges(),function(R){var Q=K.edge(R);n.forEach(Q.points,function(k){k.x-=dt,k.y-=bt}),n.has(Q,"x")&&(Q.x-=dt),n.has(Q,"y")&&(Q.y-=bt)}),J.width=mt-dt+ct,J.height=wt-bt+it})(Lt)}),St("    assignNodeIntersects",function(){(function(K){n.forEach(K.edges(),function(dt){var mt,bt,wt=K.edge(dt),J=K.node(dt.v),ct=K.node(dt.w);wt.points?(mt=wt.points[0],bt=wt.points[wt.points.length-1]):(wt.points=[],mt=ct,bt=J),wt.points.unshift(E.intersectRect(J,mt)),wt.points.push(E.intersectRect(ct,bt))})})(Lt)}),St("    reversePoints",function(){(function(K){n.forEach(K.edges(),function(dt){var mt=K.edge(dt);mt.reversed&&mt.points.reverse()})})(Lt)}),St("    acyclic.undo",function(){u.undo(Lt)})})(Bt,ut)}),ut("  updateInputGraph",function(){(function(Lt,St){n.forEach(Lt.nodes(),function(K){var dt=Lt.node(K),mt=St.node(K);dt&&(dt.x=mt.x,dt.y=mt.y,St.children(K).length&&(dt.width=mt.width,dt.height=mt.height))}),n.forEach(Lt.edges(),function(K){var dt=Lt.edge(K),mt=St.edge(K);dt.points=mt.points,n.has(mt,"x")&&(dt.x=mt.x,dt.y=mt.y)}),Lt.graph().width=St.graph().width,Lt.graph().height=St.graph().height})(pt,Bt)})})};var f=["nodesep","edgesep","ranksep","marginx","marginy"],x={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},j=["acyclicer","ranker","rankdir","align"],P=["width","height"],W={width:0,height:0},X=["minlen","weight","width","height","labeloffset"],$={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},ft=["labelpos"];function Z(pt,gt){return n.mapValues(n.pick(pt,gt),Number)}function lt(pt){var gt={};return n.forEach(pt,function(ut,Bt){gt[Bt.toLowerCase()]=ut}),gt}},function(i,y,t){var n=t(162);i.exports=function(u){return n(u,5)}},function(i,y,t){var n=t(110),u=t(71),p=t(111),b=t(65),c=Object.prototype,S=c.hasOwnProperty,I=n(function(m,r){m=Object(m);var s=-1,d=r.length,C=d>2?r[2]:void 0;for(C&&p(r[0],r[1],C)&&(d=1);++s<d;)for(var E=r[s],A=b(E),f=-1,x=A.length;++f<x;){var j=A[f],P=m[j];(P===void 0||u(P,c[j])&&!S.call(m,j))&&(m[j]=E[j])}return m});i.exports=I},function(i,y,t){var n=t(386)(t(387));i.exports=n},function(i,y,t){var n=t(54),u=t(53),p=t(58);i.exports=function(b){return function(c,S,I){var m=Object(c);if(!u(c)){var r=n(S,3);c=p(c),S=function(C){return r(m[C],C,m)}}var s=b(c,S,I);return s>-1?m[r?c[s]:s]:void 0}}},function(i,y,t){var n=t(203),u=t(54),p=t(388),b=Math.max;i.exports=function(c,S,I){var m=c==null?0:c.length;if(!m)return-1;var r=I==null?0:p(I);return r<0&&(r=b(m+r,0)),n(c,u(S,3),r)}},function(i,y,t){var n=t(211);i.exports=function(u){var p=n(u),b=p%1;return p==p?b?p-b:p:0}},function(i,y,t){var n=t(43),u=t(75),p=/^\s+|\s+$/g,b=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,S=/^0o[0-7]+$/i,I=parseInt;i.exports=function(m){if(typeof m=="number")return m;if(u(m))return NaN;if(n(m)){var r=typeof m.valueOf=="function"?m.valueOf():m;m=n(r)?r+"":r}if(typeof m!="string")return m===0?m:+m;m=m.replace(p,"");var s=c.test(m);return s||S.test(m)?I(m.slice(2),s?2:8):b.test(m)?NaN:+m}},function(i,y,t){var n=t(136),u=t(183),p=t(65);i.exports=function(b,c){return b==null?b:n(b,u(c),p)}},function(i,y){i.exports=function(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}},function(i,y,t){var n=t(101),u=t(135),p=t(54);i.exports=function(b,c){var S={};return c=p(c,3),u(b,function(I,m,r){n(S,m,c(I,m,r))}),S}},function(i,y,t){var n=t(140),u=t(394),p=t(66);i.exports=function(b){return b&&b.length?n(b,p,u):void 0}},function(i,y){i.exports=function(t,n){return t>n}},function(i,y,t){var n=t(396),u=t(399)(function(p,b,c){n(p,b,c)});i.exports=u},function(i,y,t){var n=t(95),u=t(213),p=t(136),b=t(397),c=t(43),S=t(65),I=t(214);i.exports=function m(r,s,d,C,E){r!==s&&p(s,function(A,f){if(E||(E=new n),c(A))b(r,s,f,d,m,C,E);else{var x=C?C(I(r,f),A,f+"",r,s,E):void 0;x===void 0&&(x=A),u(r,f,x)}},S)}},function(i,y,t){var n=t(213),u=t(169),p=t(178),b=t(170),c=t(179),S=t(85),I=t(26),m=t(204),r=t(73),s=t(83),d=t(43),C=t(151),E=t(44),A=t(214),f=t(398);i.exports=function(x,j,P,W,X,$,ft){var Z=A(x,P),lt=A(j,P),pt=ft.get(lt);if(pt)n(x,P,pt);else{var gt=$?$(Z,lt,P+"",x,j,ft):void 0,ut=gt===void 0;if(ut){var Bt=I(lt),Lt=!Bt&&r(lt),St=!Bt&&!Lt&&E(lt);gt=lt,Bt||Lt||St?I(Z)?gt=Z:m(Z)?gt=b(Z):Lt?(ut=!1,gt=u(lt,!0)):St?(ut=!1,gt=p(lt,!0)):gt=[]:C(lt)||S(lt)?(gt=Z,S(Z)?gt=f(Z):d(Z)&&!s(Z)||(gt=c(lt))):ut=!1}ut&&(ft.set(lt,gt),X(gt,lt,W,$,ft),ft.delete(lt)),n(x,P,gt)}}},function(i,y,t){var n=t(84),u=t(65);i.exports=function(p){return n(p,u(p))}},function(i,y,t){var n=t(110),u=t(111);i.exports=function(p){return n(function(b,c){var S=-1,I=c.length,m=I>1?c[I-1]:void 0,r=I>2?c[2]:void 0;for(m=p.length>3&&typeof m=="function"?(I--,m):void 0,r&&u(c[0],c[1],r)&&(m=I<3?void 0:m,I=1),b=Object(b);++S<I;){var s=c[S];s&&p(b,s,S,m)}return b})}},function(i,y,t){var n=t(140),u=t(215),p=t(66);i.exports=function(b){return b&&b.length?n(b,p,u):void 0}},function(i,y,t){var n=t(140),u=t(54),p=t(215);i.exports=function(b,c){return b&&b.length?n(b,u(c,2),p):void 0}},function(i,y,t){var n=t(47);i.exports=function(){return n.Date.now()}},function(i,y,t){var n=t(404),u=t(407)(function(p,b){return p==null?{}:n(p,b)});i.exports=u},function(i,y,t){var n=t(405),u=t(192);i.exports=function(p,b){return n(p,b,function(c,S){return u(p,S)})}},function(i,y,t){var n=t(107),u=t(406),p=t(108);i.exports=function(b,c,S){for(var I=-1,m=c.length,r={};++I<m;){var s=c[I],d=n(b,s);S(d,s)&&u(r,p(s,b),d)}return r}},function(i,y,t){var n=t(100),u=t(108),p=t(102),b=t(43),c=t(87);i.exports=function(S,I,m,r){if(!b(S))return S;for(var s=-1,d=(I=u(I,S)).length,C=d-1,E=S;E!=null&&++s<d;){var A=c(I[s]),f=m;if(A==="__proto__"||A==="constructor"||A==="prototype")return S;if(s!=C){var x=E[A];(f=r?r(x,A,E):void 0)===void 0&&(f=b(x)?x:p(I[s+1])?[]:{})}n(E,A,f),E=E[A]}return S}},function(i,y,t){var n=t(212),u=t(200),p=t(201);i.exports=function(b){return p(u(b,void 0,n),b+"")}},function(i,y,t){var n=t(409)();i.exports=n},function(i,y,t){var n=t(410),u=t(111),p=t(211);i.exports=function(b){return function(c,S,I){return I&&typeof I!="number"&&u(c,S,I)&&(S=I=void 0),c=p(c),S===void 0?(S=c,c=0):S=p(S),I=I===void 0?c<S?1:-1:p(I),n(c,S,I,b)}}},function(i,y){var t=Math.ceil,n=Math.max;i.exports=function(u,p,b,c){for(var S=-1,I=n(t((p-u)/(b||1)),0),m=Array(I);I--;)m[c?I:++S]=u,u+=b;return m}},function(i,y,t){var n=t(139),u=t(412),p=t(110),b=t(111),c=p(function(S,I){if(S==null)return[];var m=I.length;return m>1&&b(S,I[0],I[1])?I=[]:m>2&&b(I[0],I[1],I[2])&&(I=[I[0]]),u(S,n(I,1),[])});i.exports=c},function(i,y,t){var n=t(109),u=t(107),p=t(54),b=t(198),c=t(413),S=t(103),I=t(414),m=t(66),r=t(26);i.exports=function(s,d,C){d=d.length?n(d,function(f){return r(f)?function(x){return u(x,f.length===1?f[0]:f)}:f}):[m];var E=-1;d=n(d,S(p));var A=b(s,function(f,x,j){return{criteria:n(d,function(P){return P(f)}),index:++E,value:f}});return c(A,function(f,x){return I(f,x,C)})}},function(i,y){i.exports=function(t,n){var u=t.length;for(t.sort(n);u--;)t[u]=t[u].value;return t}},function(i,y,t){var n=t(415);i.exports=function(u,p,b){for(var c=-1,S=u.criteria,I=p.criteria,m=S.length,r=b.length;++c<m;){var s=n(S[c],I[c]);if(s)return c>=r?s:s*(b[c]=="desc"?-1:1)}return u.index-p.index}},function(i,y,t){var n=t(75);i.exports=function(u,p){if(u!==p){var b=u!==void 0,c=u===null,S=u==u,I=n(u),m=p!==void 0,r=p===null,s=p==p,d=n(p);if(!r&&!d&&!I&&u>p||I&&m&&s&&!r&&!d||c&&m&&s||!b&&s||!S)return 1;if(!c&&!I&&!d&&u<p||d&&b&&S&&!c&&!I||r&&b&&S||!m&&S||!s)return-1}return 0}},function(i,y,t){var n=t(191),u=0;i.exports=function(p){var b=++u;return n(p)+b}},function(i,y,t){var n=t(100),u=t(418);i.exports=function(p,b){return u(p||[],b||[],n)}},function(i,y){i.exports=function(t,n,u){for(var p=-1,b=t.length,c=n.length,S={};++p<b;){var I=p<c?n[p]:void 0;u(S,t[p],I)}return S}},function(i,y,t){"use strict";var n=t(24),u=t(420);i.exports={run:function(b){var c=b.graph().acyclicer==="greedy"?u(b,function(S){return function(I){return S.edge(I).weight}}(b)):function(S){var I=[],m={},r={};function s(d){n.has(r,d)||(r[d]=!0,m[d]=!0,n.forEach(S.outEdges(d),function(C){n.has(m,C.w)?I.push(C):s(C.w)}),delete m[d])}return n.forEach(S.nodes(),s),I}(b);n.forEach(c,function(S){var I=b.edge(S);b.removeEdge(S),I.forwardName=S.name,I.reversed=!0,b.setEdge(S.w,S.v,I,n.uniqueId("rev"))})},undo:function(b){n.forEach(b.edges(),function(c){var S=b.edge(c);if(S.reversed){b.removeEdge(c);var I=S.forwardName;delete S.reversed,delete S.forwardName,b.setEdge(c.w,c.v,S,I)}})}}},function(i,y,t){var n=t(24),u=t(46).Graph,p=t(421);i.exports=function(I,m){if(I.nodeCount()<=1)return[];var r=function(d,C){var E=new u,A=0,f=0;n.forEach(d.nodes(),function(P){E.setNode(P,{v:P,in:0,out:0})}),n.forEach(d.edges(),function(P){var W=E.edge(P.v,P.w)||0,X=C(P),$=W+X;E.setEdge(P.v,P.w,$),f=Math.max(f,E.node(P.v).out+=X),A=Math.max(A,E.node(P.w).in+=X)});var x=n.range(f+A+3).map(function(){return new p}),j=A+1;return n.forEach(E.nodes(),function(P){S(x,j,E.node(P))}),{graph:E,buckets:x,zeroIdx:j}}(I,m||b),s=function(d,C,E){for(var A,f=[],x=C[C.length-1],j=C[0];d.nodeCount();){for(;A=j.dequeue();)c(d,C,E,A);for(;A=x.dequeue();)c(d,C,E,A);if(d.nodeCount()){for(var P=C.length-2;P>0;--P)if(A=C[P].dequeue()){f=f.concat(c(d,C,E,A,!0));break}}}return f}(r.graph,r.buckets,r.zeroIdx);return n.flatten(n.map(s,function(d){return I.outEdges(d.v,d.w)}),!0)};var b=n.constant(1);function c(I,m,r,s,d){var C=d?[]:void 0;return n.forEach(I.inEdges(s.v),function(E){var A=I.edge(E),f=I.node(E.v);d&&C.push({v:E.v,w:E.w}),f.out-=A,S(m,r,f)}),n.forEach(I.outEdges(s.v),function(E){var A=I.edge(E),f=E.w,x=I.node(f);x.in-=A,S(m,r,x)}),I.removeNode(s.v),C}function S(I,m,r){r.out?r.in?I[r.out-r.in+m].enqueue(r):I[I.length-1].enqueue(r):I[0].enqueue(r)}},function(i,y){function t(){var p={};p._next=p._prev=p,this._sentinel=p}function n(p){p._prev._next=p._next,p._next._prev=p._prev,delete p._next,delete p._prev}function u(p,b){if(p!=="_next"&&p!=="_prev")return b}i.exports=t,t.prototype.dequeue=function(){var p=this._sentinel,b=p._prev;if(b!==p)return n(b),b},t.prototype.enqueue=function(p){var b=this._sentinel;p._prev&&p._next&&n(p),p._next=b._next,b._next._prev=p,b._next=p,p._prev=b},t.prototype.toString=function(){for(var p=[],b=this._sentinel,c=b._prev;c!==b;)p.push(JSON.stringify(c,u)),c=c._prev;return"["+p.join(", ")+"]"}},function(i,y,t){"use strict";var n=t(24),u=t(37);i.exports={run:function(b){b.graph().dummyChains=[],n.forEach(b.edges(),function(c){(function(S,I){var m,r,s,d=I.v,C=S.node(d).rank,E=I.w,A=S.node(E).rank,f=I.name,x=S.edge(I),j=x.labelRank;if(A!==C+1){for(S.removeEdge(I),s=0,++C;C<A;++s,++C)x.points=[],r={width:0,height:0,edgeLabel:x,edgeObj:I,rank:C},m=u.addDummyNode(S,"edge",r,"_d"),C===j&&(r.width=x.width,r.height=x.height,r.dummy="edge-label",r.labelpos=x.labelpos),S.setEdge(d,m,{weight:x.weight},f),s===0&&S.graph().dummyChains.push(m),d=m;S.setEdge(d,E,{weight:x.weight},f)}})(b,c)})},undo:function(b){n.forEach(b.graph().dummyChains,function(c){var S,I=b.node(c),m=I.edgeLabel;for(b.setEdge(I.edgeObj,m);I.dummy;)S=b.successors(c)[0],b.removeNode(c),m.points.push({x:I.x,y:I.y}),I.dummy==="edge-label"&&(m.x=I.x,m.y=I.y,m.width=I.width,m.height=I.height),c=S,I=b.node(c)})}}},function(i,y,t){"use strict";var n=t(112).longestPath,u=t(216),p=t(424);i.exports=function(S){switch(S.graph().ranker){case"network-simplex":c(S);break;case"tight-tree":(function(I){n(I),u(I)})(S);break;case"longest-path":b(S);break;default:c(S)}};var b=n;function c(S){p(S)}},function(i,y,t){"use strict";var n=t(24),u=t(216),p=t(112).slack,b=t(112).longestPath,c=t(46).alg.preorder,S=t(46).alg.postorder,I=t(37).simplify;function m(j){j=I(j),b(j);var P,W=u(j);for(d(W),r(W,j);P=E(W);)f(W,j,P,A(W,j,P))}function r(j,P){var W=S(j,j.nodes());W=W.slice(0,W.length-1),n.forEach(W,function(X){(function($,ft,Z){var lt=$.node(Z).parent;$.edge(Z,lt).cutvalue=s($,ft,Z)})(j,P,X)})}function s(j,P,W){var X=j.node(W).parent,$=!0,ft=P.edge(W,X),Z=0;return ft||($=!1,ft=P.edge(X,W)),Z=ft.weight,n.forEach(P.nodeEdges(W),function(lt){var pt,gt,ut=lt.v===W,Bt=ut?lt.w:lt.v;if(Bt!==X){var Lt=ut===$,St=P.edge(lt).weight;if(Z+=Lt?St:-St,pt=W,gt=Bt,j.hasEdge(pt,gt)){var K=j.edge(W,Bt).cutvalue;Z+=Lt?-K:K}}}),Z}function d(j,P){arguments.length<2&&(P=j.nodes()[0]),C(j,{},1,P)}function C(j,P,W,X,$){var ft=W,Z=j.node(X);return P[X]=!0,n.forEach(j.neighbors(X),function(lt){n.has(P,lt)||(W=C(j,P,W,lt,X))}),Z.low=ft,Z.lim=W++,$?Z.parent=$:delete Z.parent,W}function E(j){return n.find(j.edges(),function(P){return j.edge(P).cutvalue<0})}function A(j,P,W){var X=W.v,$=W.w;P.hasEdge(X,$)||(X=W.w,$=W.v);var ft=j.node(X),Z=j.node($),lt=ft,pt=!1;ft.lim>Z.lim&&(lt=Z,pt=!0);var gt=n.filter(P.edges(),function(ut){return pt===x(j,j.node(ut.v),lt)&&pt!==x(j,j.node(ut.w),lt)});return n.minBy(gt,function(ut){return p(P,ut)})}function f(j,P,W,X){var $=W.v,ft=W.w;j.removeEdge($,ft),j.setEdge(X.v,X.w,{}),d(j),r(j,P),function(Z,lt){var pt=n.find(Z.nodes(),function(ut){return!lt.node(ut).parent}),gt=c(Z,pt);gt=gt.slice(1),n.forEach(gt,function(ut){var Bt=Z.node(ut).parent,Lt=lt.edge(ut,Bt),St=!1;Lt||(Lt=lt.edge(Bt,ut),St=!0),lt.node(ut).rank=lt.node(Bt).rank+(St?Lt.minlen:-Lt.minlen)})}(j,P)}function x(j,P,W){return W.low<=P.lim&&P.lim<=W.lim}i.exports=m,m.initLowLimValues=d,m.initCutValues=r,m.calcCutValue=s,m.leaveEdge=E,m.enterEdge=A,m.exchangeEdges=f},function(i,y,t){var n=t(24);i.exports=function(u){var p=function(b){var c={},S=0;function I(m){var r=S;n.forEach(b.children(m),I),c[m]={low:r,lim:S++}}return n.forEach(b.children(),I),c}(u);n.forEach(u.graph().dummyChains,function(b){for(var c=u.node(b),S=c.edgeObj,I=function(E,A,f,x){var j,P,W=[],X=[],$=Math.min(A[f].low,A[x].low),ft=Math.max(A[f].lim,A[x].lim);j=f;do j=E.parent(j),W.push(j);while(j&&(A[j].low>$||ft>A[j].lim));for(P=j,j=x;(j=E.parent(j))!==P;)X.push(j);return{path:W.concat(X.reverse()),lca:P}}(u,p,S.v,S.w),m=I.path,r=I.lca,s=0,d=m[s],C=!0;b!==S.w;){if(c=u.node(b),C){for(;(d=m[s])!==r&&u.node(d).maxRank<c.rank;)s++;d===r&&(C=!1)}if(!C){for(;s<m.length-1&&u.node(d=m[s+1]).minRank<=c.rank;)s++;d=m[s]}u.setParent(b,d),b=u.successors(b)[0]}})}},function(i,y,t){var n=t(24),u=t(37);i.exports={run:function(b){var c=u.addDummyNode(b,"root",{},"_root"),S=function(s){var d={};return n.forEach(s.children(),function(C){(function E(A,f){var x=s.children(A);x&&x.length&&n.forEach(x,function(j){E(j,f+1)}),d[A]=f})(C,1)}),d}(b),I=n.max(n.values(S))-1,m=2*I+1;b.graph().nestingRoot=c,n.forEach(b.edges(),function(s){b.edge(s).minlen*=m});var r=function(s){return n.reduce(s.edges(),function(d,C){return d+s.edge(C).weight},0)}(b)+1;n.forEach(b.children(),function(s){(function d(C,E,A,f,x,j,P){var W=C.children(P);if(!W.length)return void(P!==E&&C.setEdge(E,P,{weight:0,minlen:A}));var X=u.addBorderNode(C,"_bt"),$=u.addBorderNode(C,"_bb"),ft=C.node(P);C.setParent(X,P),ft.borderTop=X,C.setParent($,P),ft.borderBottom=$,n.forEach(W,function(Z){d(C,E,A,f,x,j,Z);var lt=C.node(Z),pt=lt.borderTop?lt.borderTop:Z,gt=lt.borderBottom?lt.borderBottom:Z,ut=lt.borderTop?f:2*f,Bt=pt!==gt?1:x-j[P]+1;C.setEdge(X,pt,{weight:ut,minlen:Bt,nestingEdge:!0}),C.setEdge(gt,$,{weight:ut,minlen:Bt,nestingEdge:!0})}),C.parent(P)||C.setEdge(E,X,{weight:0,minlen:x+j[P]})})(b,c,m,r,I,S,s)}),b.graph().nodeRankFactor=m},cleanup:function(b){var c=b.graph();b.removeNode(c.nestingRoot),delete c.nestingRoot,n.forEach(b.edges(),function(S){b.edge(S).nestingEdge&&b.removeEdge(S)})}}},function(i,y,t){var n=t(24),u=t(37);function p(b,c,S,I,m,r){var s={width:0,height:0,rank:r,borderType:c},d=m[c][r-1],C=u.addDummyNode(b,"border",s,S);m[c][r]=C,b.setParent(C,I),d&&b.setEdge(d,C,{weight:1})}i.exports=function(b){n.forEach(b.children(),function c(S){var I=b.children(S),m=b.node(S);if(I.length&&n.forEach(I,c),n.has(m,"minRank")){m.borderLeft=[],m.borderRight=[];for(var r=m.minRank,s=m.maxRank+1;r<s;++r)p(b,"borderLeft","_bl",S,m,r),p(b,"borderRight","_br",S,m,r)}})}},function(i,y,t){"use strict";var n=t(24);function u(S){n.forEach(S.nodes(),function(I){p(S.node(I))}),n.forEach(S.edges(),function(I){p(S.edge(I))})}function p(S){var I=S.width;S.width=S.height,S.height=I}function b(S){S.y=-S.y}function c(S){var I=S.x;S.x=S.y,S.y=I}i.exports={adjust:function(I){var m=I.graph().rankdir.toLowerCase();m!=="lr"&&m!=="rl"||u(I)},undo:function(I){var m=I.graph().rankdir.toLowerCase();m!=="bt"&&m!=="rl"||function(r){n.forEach(r.nodes(),function(s){b(r.node(s))}),n.forEach(r.edges(),function(s){var d=r.edge(s);n.forEach(d.points,b),n.has(d,"y")&&b(d)})}(I),m!=="lr"&&m!=="rl"||(function(r){n.forEach(r.nodes(),function(s){c(r.node(s))}),n.forEach(r.edges(),function(s){var d=r.edge(s);n.forEach(d.points,c),n.has(d,"x")&&c(d)})}(I),u(I))}}},function(i,y,t){"use strict";var n=t(24),u=t(430),p=t(431),b=t(432),c=t(436),S=t(437),I=t(46).Graph,m=t(37);function r(C,E,A){return n.map(E,function(f){return c(C,f,A)})}function s(C,E){var A=new I;n.forEach(C,function(f){var x=f.graph().root,j=b(f,x,A,E);n.forEach(j.vs,function(P,W){f.node(P).order=W}),S(f,A,j.vs)})}function d(C,E){n.forEach(E,function(A){n.forEach(A,function(f,x){C.node(f).order=x})})}i.exports=function(C){var E=m.maxRank(C),A=r(C,n.range(1,E+1),"inEdges"),f=r(C,n.range(E-1,-1,-1),"outEdges"),x=u(C);d(C,x);for(var j,P=Number.POSITIVE_INFINITY,W=0,X=0;X<4;++W,++X){s(W%2?A:f,W%4>=2),x=m.buildLayerMatrix(C);var $=p(C,x);$<P&&(X=0,j=n.cloneDeep(x),P=$)}d(C,j)}},function(i,y,t){"use strict";var n=t(24);i.exports=function(u){var p={},b=n.filter(u.nodes(),function(m){return!u.children(m).length}),c=n.max(n.map(b,function(m){return u.node(m).rank})),S=n.map(n.range(c+1),function(){return[]}),I=n.sortBy(b,function(m){return u.node(m).rank});return n.forEach(I,function m(r){if(!n.has(p,r)){p[r]=!0;var s=u.node(r);S[s.rank].push(r),n.forEach(u.successors(r),m)}}),S}},function(i,y,t){"use strict";var n=t(24);function u(p,b,c){for(var S=n.zipObject(c,n.map(c,function(C,E){return E})),I=n.flatten(n.map(b,function(C){return n.sortBy(n.map(p.outEdges(C),function(E){return{pos:S[E.w],weight:p.edge(E).weight}}),"pos")}),!0),m=1;m<c.length;)m<<=1;var r=2*m-1;m-=1;var s=n.map(new Array(r),function(){return 0}),d=0;return n.forEach(I.forEach(function(C){var E=C.pos+m;s[E]+=C.weight;for(var A=0;E>0;)E%2&&(A+=s[E+1]),s[E=E-1>>1]+=C.weight;d+=C.weight*A})),d}i.exports=function(p,b){for(var c=0,S=1;S<b.length;++S)c+=u(p,b[S-1],b[S]);return c}},function(i,y,t){var n=t(24),u=t(433),p=t(434),b=t(435);i.exports=function c(S,I,m,r){var s=S.children(I),d=S.node(I),C=d?d.borderLeft:void 0,E=d?d.borderRight:void 0,A={};C&&(s=n.filter(s,function(X){return X!==C&&X!==E}));var f=u(S,s);n.forEach(f,function(X){if(S.children(X.v).length){var $=c(S,X.v,m,r);A[X.v]=$,n.has($,"barycenter")&&(ft=X,Z=$,n.isUndefined(ft.barycenter)?(ft.barycenter=Z.barycenter,ft.weight=Z.weight):(ft.barycenter=(ft.barycenter*ft.weight+Z.barycenter*Z.weight)/(ft.weight+Z.weight),ft.weight+=Z.weight))}var ft,Z});var x=p(f,m);(function(X,$){n.forEach(X,function(ft){ft.vs=n.flatten(ft.vs.map(function(Z){return $[Z]?$[Z].vs:Z}),!0)})})(x,A);var j=b(x,r);if(C&&(j.vs=n.flatten([C,j.vs,E],!0),S.predecessors(C).length)){var P=S.node(S.predecessors(C)[0]),W=S.node(S.predecessors(E)[0]);n.has(j,"barycenter")||(j.barycenter=0,j.weight=0),j.barycenter=(j.barycenter*j.weight+P.order+W.order)/(j.weight+2),j.weight+=2}return j}},function(i,y,t){var n=t(24);i.exports=function(u,p){return n.map(p,function(b){var c=u.inEdges(b);if(c.length){var S=n.reduce(c,function(I,m){var r=u.edge(m),s=u.node(m.v);return{sum:I.sum+r.weight*s.order,weight:I.weight+r.weight}},{sum:0,weight:0});return{v:b,barycenter:S.sum/S.weight,weight:S.weight}}return{v:b}})}},function(i,y,t){"use strict";var n=t(24);i.exports=function(u,p){var b={};return n.forEach(u,function(c,S){var I=b[c.v]={indegree:0,in:[],out:[],vs:[c.v],i:S};n.isUndefined(c.barycenter)||(I.barycenter=c.barycenter,I.weight=c.weight)}),n.forEach(p.edges(),function(c){var S=b[c.v],I=b[c.w];n.isUndefined(S)||n.isUndefined(I)||(I.indegree++,S.out.push(b[c.w]))}),function(c){var S=[];function I(s){return function(d){d.merged||(n.isUndefined(d.barycenter)||n.isUndefined(s.barycenter)||d.barycenter>=s.barycenter)&&function(C,E){var A=0,f=0;C.weight&&(A+=C.barycenter*C.weight,f+=C.weight),E.weight&&(A+=E.barycenter*E.weight,f+=E.weight),C.vs=E.vs.concat(C.vs),C.barycenter=A/f,C.weight=f,C.i=Math.min(E.i,C.i),E.merged=!0}(s,d)}}function m(s){return function(d){d.in.push(s),--d.indegree==0&&c.push(d)}}for(;c.length;){var r=c.pop();S.push(r),n.forEach(r.in.reverse(),I(r)),n.forEach(r.out,m(r))}return n.map(n.filter(S,function(s){return!s.merged}),function(s){return n.pick(s,["vs","i","barycenter","weight"])})}(n.filter(b,function(c){return!c.indegree}))}},function(i,y,t){var n=t(24),u=t(37);function p(b,c,S){for(var I;c.length&&(I=n.last(c)).i<=S;)c.pop(),b.push(I.vs),S++;return S}i.exports=function(b,c){var S=u.partition(b,function(f){return n.has(f,"barycenter")}),I=S.lhs,m=n.sortBy(S.rhs,function(f){return-f.i}),r=[],s=0,d=0,C=0;I.sort((E=!!c,function(f,x){return f.barycenter<x.barycenter?-1:f.barycenter>x.barycenter?1:E?x.i-f.i:f.i-x.i})),C=p(r,m,C),n.forEach(I,function(f){C+=f.vs.length,r.push(f.vs),s+=f.barycenter*f.weight,d+=f.weight,C=p(r,m,C)});var E,A={vs:n.flatten(r,!0)};return d&&(A.barycenter=s/d,A.weight=d),A}},function(i,y,t){var n=t(24),u=t(46).Graph;i.exports=function(p,b,c){var S=function(m){for(var r;m.hasNode(r=n.uniqueId("_root")););return r}(p),I=new u({compound:!0}).setGraph({root:S}).setDefaultNodeLabel(function(m){return p.node(m)});return n.forEach(p.nodes(),function(m){var r=p.node(m),s=p.parent(m);(r.rank===b||r.minRank<=b&&b<=r.maxRank)&&(I.setNode(m),I.setParent(m,s||S),n.forEach(p[c](m),function(d){var C=d.v===m?d.w:d.v,E=I.edge(C,m),A=n.isUndefined(E)?0:E.weight;I.setEdge(C,m,{weight:p.edge(d).weight+A})}),n.has(r,"minRank")&&I.setNode(m,{borderLeft:r.borderLeft[b],borderRight:r.borderRight[b]}))}),I}},function(i,y,t){var n=t(24);i.exports=function(u,p,b){var c,S={};n.forEach(b,function(I){for(var m,r,s=u.parent(I);s;){if((m=u.parent(s))?(r=S[m],S[m]=s):(r=c,c=s),r&&r!==s)return void p.setEdge(r,s);s=m}})}},function(i,y,t){"use strict";var n=t(24),u=t(37),p=t(439).positionX;i.exports=function(b){(function(c){var S=u.buildLayerMatrix(c),I=c.graph().ranksep,m=0;n.forEach(S,function(r){var s=n.max(n.map(r,function(d){return c.node(d).height}));n.forEach(r,function(d){c.node(d).y=m+s/2}),m+=s+I})})(b=u.asNonCompoundGraph(b)),n.forEach(p(b),function(c,S){b.node(S).x=c})}},function(i,y,t){"use strict";var n=t(24),u=t(46).Graph,p=t(37);function b(E,A){var f={};return n.reduce(A,function(x,j){var P=0,W=0,X=x.length,$=n.last(j);return n.forEach(j,function(ft,Z){var lt=function(gt,ut){if(gt.node(ut).dummy)return n.find(gt.predecessors(ut),function(Bt){return gt.node(Bt).dummy})}(E,ft),pt=lt?E.node(lt).order:X;(lt||ft===$)&&(n.forEach(j.slice(W,Z+1),function(gt){n.forEach(E.predecessors(gt),function(ut){var Bt=E.node(ut),Lt=Bt.order;!(Lt<P||pt<Lt)||Bt.dummy&&E.node(gt).dummy||S(f,ut,gt)})}),W=Z+1,P=pt)}),j}),f}function c(E,A){var f={};function x(j,P,W,X,$){var ft;n.forEach(n.range(P,W),function(Z){ft=j[Z],E.node(ft).dummy&&n.forEach(E.predecessors(ft),function(lt){var pt=E.node(lt);pt.dummy&&(pt.order<X||pt.order>$)&&S(f,lt,ft)})})}return n.reduce(A,function(j,P){var W,X=-1,$=0;return n.forEach(P,function(ft,Z){if(E.node(ft).dummy==="border"){var lt=E.predecessors(ft);lt.length&&(W=E.node(lt[0]).order,x(P,$,Z,X,W),$=Z,X=W)}x(P,$,P.length,W,j.length)}),P}),f}function S(E,A,f){if(A>f){var x=A;A=f,f=x}var j=E[A];j||(E[A]=j={}),j[f]=!0}function I(E,A,f){if(A>f){var x=A;A=f,f=x}return n.has(E[A],f)}function m(E,A,f,x){var j={},P={},W={};return n.forEach(A,function(X){n.forEach(X,function($,ft){j[$]=$,P[$]=$,W[$]=ft})}),n.forEach(A,function(X){var $=-1;n.forEach(X,function(ft){var Z=x(ft);if(Z.length)for(var lt=((Z=n.sortBy(Z,function(Bt){return W[Bt]})).length-1)/2,pt=Math.floor(lt),gt=Math.ceil(lt);pt<=gt;++pt){var ut=Z[pt];P[ft]===ft&&$<W[ut]&&!I(f,ft,ut)&&(P[ut]=ft,P[ft]=j[ft]=j[ut],$=W[ut])}})}),{root:j,align:P}}function r(E,A,f,x,j){var P={},W=function(ft,Z,lt,pt){var gt=new u,ut=ft.graph(),Bt=function(Lt,St,K){return function(dt,mt,bt){var wt,J=dt.node(mt),ct=dt.node(bt),it=0;if(it+=J.width/2,n.has(J,"labelpos"))switch(J.labelpos.toLowerCase()){case"l":wt=-J.width/2;break;case"r":wt=J.width/2}if(wt&&(it+=K?wt:-wt),wt=0,it+=(J.dummy?St:Lt)/2,it+=(ct.dummy?St:Lt)/2,it+=ct.width/2,n.has(ct,"labelpos"))switch(ct.labelpos.toLowerCase()){case"l":wt=ct.width/2;break;case"r":wt=-ct.width/2}return wt&&(it+=K?wt:-wt),wt=0,it}}(ut.nodesep,ut.edgesep,pt);return n.forEach(Z,function(Lt){var St;n.forEach(Lt,function(K){var dt=lt[K];if(gt.setNode(dt),St){var mt=lt[St],bt=gt.edge(mt,dt);gt.setEdge(mt,dt,Math.max(Bt(ft,K,St),bt||0))}St=K})}),gt}(E,A,f,j),X=j?"borderLeft":"borderRight";function $(ft,Z){for(var lt=W.nodes(),pt=lt.pop(),gt={};pt;)gt[pt]?ft(pt):(gt[pt]=!0,lt.push(pt),lt=lt.concat(Z(pt))),pt=lt.pop()}return $(function(ft){P[ft]=W.inEdges(ft).reduce(function(Z,lt){return Math.max(Z,P[lt.v]+W.edge(lt))},0)},W.predecessors.bind(W)),$(function(ft){var Z=W.outEdges(ft).reduce(function(pt,gt){return Math.min(pt,P[gt.w]-W.edge(gt))},Number.POSITIVE_INFINITY),lt=E.node(ft);Z!==Number.POSITIVE_INFINITY&&lt.borderType!==X&&(P[ft]=Math.max(P[ft],Z))},W.successors.bind(W)),n.forEach(x,function(ft){P[ft]=P[f[ft]]}),P}function s(E,A){return n.minBy(n.values(A),function(f){var x=Number.NEGATIVE_INFINITY,j=Number.POSITIVE_INFINITY;return n.forIn(f,function(P,W){var X=function($,ft){return $.node(ft).width}(E,W)/2;x=Math.max(P+X,x),j=Math.min(P-X,j)}),x-j})}function d(E,A){var f=n.values(A),x=n.min(f),j=n.max(f);n.forEach(["u","d"],function(P){n.forEach(["l","r"],function(W){var X,$=P+W,ft=E[$];if(ft!==A){var Z=n.values(ft);(X=W==="l"?x-n.min(Z):j-n.max(Z))&&(E[$]=n.mapValues(ft,function(lt){return lt+X}))}})})}function C(E,A){return n.mapValues(E.ul,function(f,x){if(A)return E[A.toLowerCase()][x];var j=n.sortBy(n.map(E,x));return(j[1]+j[2])/2})}i.exports={positionX:function(A){var f,x=p.buildLayerMatrix(A),j=n.merge(b(A,x),c(A,x)),P={};n.forEach(["u","d"],function(X){f=X==="u"?x:n.values(x).reverse(),n.forEach(["l","r"],function($){$==="r"&&(f=n.map(f,function(pt){return n.values(pt).reverse()}));var ft=(X==="u"?A.predecessors:A.successors).bind(A),Z=m(A,f,j,ft),lt=r(A,f,Z.root,Z.align,$==="r");$==="r"&&(lt=n.mapValues(lt,function(pt){return-pt})),P[X+$]=lt})});var W=s(A,P);return d(P,W),C(P,A.graph().align)},findType1Conflicts:b,findType2Conflicts:c,addConflict:S,hasConflict:I,verticalAlignment:m,horizontalCompaction:r,alignCoordinates:d,findSmallestWidthAlignment:s,balance:C}},function(i,y,t){var n=t(24),u=t(37),p=t(46).Graph;i.exports={debugOrdering:function(c){var S=u.buildLayerMatrix(c),I=new p({compound:!0,multigraph:!0}).setGraph({});return n.forEach(c.nodes(),function(m){I.setNode(m,{label:m}),I.setParent(m,"layer"+c.node(m).rank)}),n.forEach(c.edges(),function(m){I.setEdge(m.v,m.w,{},m.name)}),n.forEach(S,function(m,r){var s="layer"+r;I.setNode(s,{rank:"same"}),n.reduce(m,function(d,C){return I.setEdge(d,C,{style:"invis"}),C})}),I}}},function(i,y){i.exports="0.8.5"},function(i,y,t){(function(n){function u(b){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(b)}var p=function(b){"use strict";var c=Object.prototype,S=c.hasOwnProperty,I=typeof Symbol=="function"?Symbol:{},m=I.iterator||"@@iterator",r=I.asyncIterator||"@@asyncIterator",s=I.toStringTag||"@@toStringTag";function d(St,K,dt){return Object.defineProperty(St,K,{value:dt,enumerable:!0,configurable:!0,writable:!0}),St[K]}try{d({},"")}catch(St){d=function(dt,mt,bt){return dt[mt]=bt}}function C(St,K,dt,mt){var bt=K&&K.prototype instanceof f?K:f,wt=Object.create(bt.prototype),J=new ut(mt||[]);return wt._invoke=function(ct,it,_){var R="suspendedStart";return function(Q,k){if(R==="executing")throw new Error("Generator is already running");if(R==="completed"){if(Q==="throw")throw k;return Lt()}for(_.method=Q,_.arg=k;;){var g=_.delegate;if(g){var O=lt(g,_);if(O){if(O===A)continue;return O}}if(_.method==="next")_.sent=_._sent=_.arg;else if(_.method==="throw"){if(R==="suspendedStart")throw R="completed",_.arg;_.dispatchException(_.arg)}else _.method==="return"&&_.abrupt("return",_.arg);R="executing";var F=E(ct,it,_);if(F.type==="normal"){if(R=_.done?"completed":"suspendedYield",F.arg===A)continue;return{value:F.arg,done:_.done}}F.type==="throw"&&(R="completed",_.method="throw",_.arg=F.arg)}}}(St,dt,J),wt}function E(St,K,dt){try{return{type:"normal",arg:St.call(K,dt)}}catch(mt){return{type:"throw",arg:mt}}}b.wrap=C;var A={};function f(){}function x(){}function j(){}var P={};P[m]=function(){return this};var W=Object.getPrototypeOf,X=W&&W(W(Bt([])));X&&X!==c&&S.call(X,m)&&(P=X);var $=j.prototype=f.prototype=Object.create(P);function ft(St){["next","throw","return"].forEach(function(K){d(St,K,function(dt){return this._invoke(K,dt)})})}function Z(St,K){var dt;this._invoke=function(mt,bt){function wt(){return new K(function(J,ct){(function it(_,R,Q,k){var g=E(St[_],St,R);if(g.type!=="throw"){var O=g.arg,F=O.value;return F&&u(F)==="object"&&S.call(F,"__await")?K.resolve(F.__await).then(function(V){it("next",V,Q,k)},function(V){it("throw",V,Q,k)}):K.resolve(F).then(function(V){O.value=V,Q(O)},function(V){return it("throw",V,Q,k)})}k(g.arg)})(mt,bt,J,ct)})}return dt=dt?dt.then(wt,wt):wt()}}function lt(St,K){var dt=St.iterator[K.method];if(dt===void 0){if(K.delegate=null,K.method==="throw"){if(St.iterator.return&&(K.method="return",K.arg=void 0,lt(St,K),K.method==="throw"))return A;K.method="throw",K.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var mt=E(dt,St.iterator,K.arg);if(mt.type==="throw")return K.method="throw",K.arg=mt.arg,K.delegate=null,A;var bt=mt.arg;return bt?bt.done?(K[St.resultName]=bt.value,K.next=St.nextLoc,K.method!=="return"&&(K.method="next",K.arg=void 0),K.delegate=null,A):bt:(K.method="throw",K.arg=new TypeError("iterator result is not an object"),K.delegate=null,A)}function pt(St){var K={tryLoc:St[0]};1 in St&&(K.catchLoc=St[1]),2 in St&&(K.finallyLoc=St[2],K.afterLoc=St[3]),this.tryEntries.push(K)}function gt(St){var K=St.completion||{};K.type="normal",delete K.arg,St.completion=K}function ut(St){this.tryEntries=[{tryLoc:"root"}],St.forEach(pt,this),this.reset(!0)}function Bt(St){if(St){var K=St[m];if(K)return K.call(St);if(typeof St.next=="function")return St;if(!isNaN(St.length)){var dt=-1,mt=function bt(){for(;++dt<St.length;)if(S.call(St,dt))return bt.value=St[dt],bt.done=!1,bt;return bt.value=void 0,bt.done=!0,bt};return mt.next=mt}}return{next:Lt}}function Lt(){return{value:void 0,done:!0}}return x.prototype=$.constructor=j,j.constructor=x,x.displayName=d(j,s,"GeneratorFunction"),b.isGeneratorFunction=function(St){var K=typeof St=="function"&&St.constructor;return!!K&&(K===x||(K.displayName||K.name)==="GeneratorFunction")},b.mark=function(St){return Object.setPrototypeOf?Object.setPrototypeOf(St,j):(St.__proto__=j,d(St,s,"GeneratorFunction")),St.prototype=Object.create($),St},b.awrap=function(St){return{__await:St}},ft(Z.prototype),Z.prototype[r]=function(){return this},b.AsyncIterator=Z,b.async=function(St,K,dt,mt,bt){bt===void 0&&(bt=Promise);var wt=new Z(C(St,K,dt,mt),bt);return b.isGeneratorFunction(K)?wt:wt.next().then(function(J){return J.done?J.value:wt.next()})},ft($),d($,s,"Generator"),$[m]=function(){return this},$.toString=function(){return"[object Generator]"},b.keys=function(St){var K=[];for(var dt in St)K.push(dt);return K.reverse(),function mt(){for(;K.length;){var bt=K.pop();if(bt in St)return mt.value=bt,mt.done=!1,mt}return mt.done=!0,mt}},b.values=Bt,ut.prototype={constructor:ut,reset:function(K){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(gt),!K)for(var dt in this)dt.charAt(0)==="t"&&S.call(this,dt)&&!isNaN(+dt.slice(1))&&(this[dt]=void 0)},stop:function(){this.done=!0;var K=this.tryEntries[0].completion;if(K.type==="throw")throw K.arg;return this.rval},dispatchException:function(K){if(this.done)throw K;var dt=this;function mt(_,R){return J.type="throw",J.arg=K,dt.next=_,R&&(dt.method="next",dt.arg=void 0),!!R}for(var bt=this.tryEntries.length-1;bt>=0;--bt){var wt=this.tryEntries[bt],J=wt.completion;if(wt.tryLoc==="root")return mt("end");if(wt.tryLoc<=this.prev){var ct=S.call(wt,"catchLoc"),it=S.call(wt,"finallyLoc");if(ct&&it){if(this.prev<wt.catchLoc)return mt(wt.catchLoc,!0);if(this.prev<wt.finallyLoc)return mt(wt.finallyLoc)}else if(ct){if(this.prev<wt.catchLoc)return mt(wt.catchLoc,!0)}else{if(!it)throw new Error("try statement without catch or finally");if(this.prev<wt.finallyLoc)return mt(wt.finallyLoc)}}}},abrupt:function(K,dt){for(var mt=this.tryEntries.length-1;mt>=0;--mt){var bt=this.tryEntries[mt];if(bt.tryLoc<=this.prev&&S.call(bt,"finallyLoc")&&this.prev<bt.finallyLoc){var wt=bt;break}}wt&&(K==="break"||K==="continue")&&wt.tryLoc<=dt&&dt<=wt.finallyLoc&&(wt=null);var J=wt?wt.completion:{};return J.type=K,J.arg=dt,wt?(this.method="next",this.next=wt.finallyLoc,A):this.complete(J)},complete:function(K,dt){if(K.type==="throw")throw K.arg;return K.type==="break"||K.type==="continue"?this.next=K.arg:K.type==="return"?(this.rval=this.arg=K.arg,this.method="return",this.next="end"):K.type==="normal"&&dt&&(this.next=dt),A},finish:function(K){for(var dt=this.tryEntries.length-1;dt>=0;--dt){var mt=this.tryEntries[dt];if(mt.finallyLoc===K)return this.complete(mt.completion,mt.afterLoc),gt(mt),A}},catch:function(K){for(var dt=this.tryEntries.length-1;dt>=0;--dt){var mt=this.tryEntries[dt];if(mt.tryLoc===K){var bt=mt.completion;if(bt.type==="throw"){var wt=bt.arg;gt(mt)}return wt}}throw new Error("illegal catch attempt")},delegateYield:function(K,dt,mt){return this.delegate={iterator:Bt(K),resultName:dt,nextLoc:mt},this.method==="next"&&(this.arg=void 0),A}},b}(u(n)==="object"?n.exports:{});try{regeneratorRuntime=p}catch(b){Function("r","regeneratorRuntime = r")(p)}}).call(this,t(86)(i))},function(i,y){i.exports=function(t){if(Array.isArray(t))return t}},function(i,y){i.exports=function(t,n){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t)){var u=[],p=!0,b=!1,c=void 0;try{for(var S,I=t[Symbol.iterator]();!(p=(S=I.next()).done)&&(u.push(S.value),!n||u.length!==n);p=!0);}catch(m){b=!0,c=m}finally{try{p||I.return==null||I.return()}finally{if(b)throw c}}return u}}},function(i,y){i.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},function(i,y,t){"use strict";function n(j){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})(j)}var u=this&&this.__awaiter||function(j,P,W,X){return new(W||(W=Promise))(function($,ft){function Z(gt){try{pt(X.next(gt))}catch(ut){ft(ut)}}function lt(gt){try{pt(X.throw(gt))}catch(ut){ft(ut)}}function pt(gt){var ut;gt.done?$(gt.value):(ut=gt.value,ut instanceof W?ut:new W(function(Bt){Bt(ut)})).then(Z,lt)}pt((X=X.apply(j,P||[])).next())})},p=this&&this.__generator||function(j,P){var W,X,$,ft,Z={label:0,sent:function(){if(1&$[0])throw $[1];return $[1]},trys:[],ops:[]};return ft={next:lt(0),throw:lt(1),return:lt(2)},typeof Symbol=="function"&&(ft[Symbol.iterator]=function(){return this}),ft;function lt(pt){return function(gt){return function(ut){if(W)throw new TypeError("Generator is already executing.");for(;Z;)try{if(W=1,X&&($=2&ut[0]?X.return:ut[0]?X.throw||(($=X.return)&&$.call(X),0):X.next)&&!($=$.call(X,ut[1])).done)return $;switch(X=0,$&&(ut=[2&ut[0],$.value]),ut[0]){case 0:case 1:$=ut;break;case 4:return Z.label++,{value:ut[1],done:!1};case 5:Z.label++,X=ut[1],ut=[0];continue;case 7:ut=Z.ops.pop(),Z.trys.pop();continue;default:if($=Z.trys,!(($=$.length>0&&$[$.length-1])||ut[0]!==6&&ut[0]!==2)){Z=0;continue}if(ut[0]===3&&(!$||ut[1]>$[0]&&ut[1]<$[3])){Z.label=ut[1];break}if(ut[0]===6&&Z.label<$[1]){Z.label=$[1],$=ut;break}if($&&Z.label<$[2]){Z.label=$[2],Z.ops.push(ut);break}$[2]&&Z.ops.pop(),Z.trys.pop();continue}ut=P.call(j,Z)}catch(Bt){ut=[6,Bt],X=0}finally{W=$=0}if(5&ut[0])throw ut[1];return{value:ut[0]?ut[1]:void 0,done:!0}}([pt,gt])}}};Object.defineProperty(y,"__esModule",{value:!0}),y.Container=void 0;var b=t(447),c=t(41),S=t(55),I=t(32),m=t(220),r=t(448),s=t(455),d=t(457),C=t(67),E=t(88),A=t(460),f=t(461),x=function(){function j(P){var W=P||{};if(n(W)!=="object")throw new Error(""+c.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(W.defaultScope===void 0)W.defaultScope=S.BindingScopeEnum.Transient;else if(W.defaultScope!==S.BindingScopeEnum.Singleton&&W.defaultScope!==S.BindingScopeEnum.Transient&&W.defaultScope!==S.BindingScopeEnum.Request)throw new Error(""+c.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(W.autoBindInjectable===void 0)W.autoBindInjectable=!1;else if(typeof W.autoBindInjectable!="boolean")throw new Error(""+c.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(W.skipBaseClassChecks===void 0)W.skipBaseClassChecks=!1;else if(typeof W.skipBaseClassChecks!="boolean")throw new Error(""+c.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:W.autoBindInjectable,defaultScope:W.defaultScope,skipBaseClassChecks:W.skipBaseClassChecks},this.id=C.id(),this._bindingDictionary=new f.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new m.MetadataReader}return j.merge=function(P,W){var X=new j,$=r.getBindingDictionary(X),ft=r.getBindingDictionary(P),Z=r.getBindingDictionary(W);function lt(pt,gt){pt.traverse(function(ut,Bt){Bt.forEach(function(Lt){gt.add(Lt.serviceIdentifier,Lt.clone())})})}return lt(ft,$),lt(Z,$),X},j.prototype.load=function(){for(var P=[],W=0;W<arguments.length;W++)P[W]=arguments[W];for(var X=this._getContainerModuleHelpersFactory(),$=0,ft=P;$<ft.length;$++){var Z=ft[$],lt=X(Z.id);Z.registry(lt.bindFunction,lt.unbindFunction,lt.isboundFunction,lt.rebindFunction)}},j.prototype.loadAsync=function(){for(var P=[],W=0;W<arguments.length;W++)P[W]=arguments[W];return u(this,void 0,void 0,function(){var X,$,ft,Z,lt;return p(this,function(pt){switch(pt.label){case 0:X=this._getContainerModuleHelpersFactory(),$=0,ft=P,pt.label=1;case 1:return $<ft.length?(Z=ft[$],lt=X(Z.id),[4,Z.registry(lt.bindFunction,lt.unbindFunction,lt.isboundFunction,lt.rebindFunction)]):[3,4];case 2:pt.sent(),pt.label=3;case 3:return $++,[3,1];case 4:return[2]}})})},j.prototype.unload=function(){for(var P=this,W=[],X=0;X<arguments.length;X++)W[X]=arguments[X];var $=function(Z){return function(lt){return lt.moduleId===Z}};W.forEach(function(ft){var Z=$(ft.id);P._bindingDictionary.removeByCondition(Z)})},j.prototype.bind=function(P){var W=this.options.defaultScope||S.BindingScopeEnum.Transient,X=new b.Binding(P,W);return this._bindingDictionary.add(P,X),new d.BindingToSyntax(X)},j.prototype.rebind=function(P){return this.unbind(P),this.bind(P)},j.prototype.unbind=function(P){try{this._bindingDictionary.remove(P)}catch(W){throw new Error(c.CANNOT_UNBIND+" "+E.getServiceIdentifierAsString(P))}},j.prototype.unbindAll=function(){this._bindingDictionary=new f.Lookup},j.prototype.isBound=function(P){var W=this._bindingDictionary.hasKey(P);return!W&&this.parent&&(W=this.parent.isBound(P)),W},j.prototype.isBoundNamed=function(P,W){return this.isBoundTagged(P,I.NAMED_TAG,W)},j.prototype.isBoundTagged=function(P,W,X){var $=!1;if(this._bindingDictionary.hasKey(P)){var ft=this._bindingDictionary.get(P),Z=r.createMockRequest(this,P,W,X);$=ft.some(function(lt){return lt.constraint(Z)})}return!$&&this.parent&&($=this.parent.isBoundTagged(P,W,X)),$},j.prototype.snapshot=function(){this._snapshots.push(A.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},j.prototype.restore=function(){var P=this._snapshots.pop();if(P===void 0)throw new Error(c.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=P.bindings,this._middleware=P.middleware},j.prototype.createChild=function(P){var W=new j(P||this.options);return W.parent=this,W},j.prototype.applyMiddleware=function(){for(var P=[],W=0;W<arguments.length;W++)P[W]=arguments[W];var X=this._middleware?this._middleware:this._planAndResolve();this._middleware=P.reduce(function($,ft){return ft($)},X)},j.prototype.applyCustomMetadataReader=function(P){this._metadataReader=P},j.prototype.get=function(P){return this._get(!1,!1,S.TargetTypeEnum.Variable,P)},j.prototype.getTagged=function(P,W,X){return this._get(!1,!1,S.TargetTypeEnum.Variable,P,W,X)},j.prototype.getNamed=function(P,W){return this.getTagged(P,I.NAMED_TAG,W)},j.prototype.getAll=function(P){return this._get(!0,!0,S.TargetTypeEnum.Variable,P)},j.prototype.getAllTagged=function(P,W,X){return this._get(!1,!0,S.TargetTypeEnum.Variable,P,W,X)},j.prototype.getAllNamed=function(P,W){return this.getAllTagged(P,I.NAMED_TAG,W)},j.prototype.resolve=function(P){var W=this.createChild();return W.bind(P).toSelf(),W.get(P)},j.prototype._getContainerModuleHelpersFactory=function(){var P=this,W=function(ft,Z){ft._binding.moduleId=Z},X=function(ft){return function(Z){var lt=P.rebind.bind(P)(Z);return W(lt,ft),lt}};return function($){return{bindFunction:(ft=$,function(Z){var lt=P.bind.bind(P)(Z);return W(lt,ft),lt}),isboundFunction:function(lt){return P.isBound.bind(P)(lt)},rebindFunction:X($),unbindFunction:function(lt){P.unbind.bind(P)(lt)}};var ft}},j.prototype._get=function(P,W,X,$,ft,Z){var lt=null,pt={avoidConstraints:P,contextInterceptor:function(ut){return ut},isMultiInject:W,key:ft,serviceIdentifier:$,targetType:X,value:Z};if(this._middleware){if((lt=this._middleware(pt))==null)throw new Error(c.INVALID_MIDDLEWARE_RETURN)}else lt=this._planAndResolve()(pt);return lt},j.prototype._planAndResolve=function(){var P=this;return function(W){var X=r.plan(P._metadataReader,P,W.isMultiInject,W.targetType,W.serviceIdentifier,W.key,W.value,W.avoidConstraints);return X=W.contextInterceptor(X),s.resolve(X)}},j}();y.Container=x},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.Binding=void 0;var n=t(55),u=t(67),p=function(){function b(c,S){this.id=u.id(),this.activated=!1,this.serviceIdentifier=c,this.scope=S,this.type=n.BindingTypeEnum.Invalid,this.constraint=function(I){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return b.prototype.clone=function(){var c=new b(this.serviceIdentifier,this.scope);return c.activated=!1,c.implementationType=this.implementationType,c.dynamicValue=this.dynamicValue,c.scope=this.scope,c.type=this.type,c.factory=this.factory,c.provider=this.provider,c.constraint=this.constraint,c.onActivation=this.onActivation,c.cache=this.cache,c},b}();y.Binding=p},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.getBindingDictionary=y.createMockRequest=y.plan=void 0;var n=t(449),u=t(41),p=t(55),b=t(32),c=t(221),S=t(88),I=t(450),m=t(49),r=t(451),s=t(452),d=t(454),C=t(223);function E(x){return x._bindingDictionary}function A(x,j,P,W,X){var $=f(P.container,X.serviceIdentifier),ft=[];return $.length===n.BindingCount.NoBindingsAvailable&&P.container.options.autoBindInjectable&&typeof X.serviceIdentifier=="function"&&x.getConstructorMetadata(X.serviceIdentifier).compilerGeneratedMetadata&&(P.container.bind(X.serviceIdentifier).toSelf(),$=f(P.container,X.serviceIdentifier)),ft=j?$:$.filter(function(Z){var lt=new d.Request(Z.serviceIdentifier,P,W,Z,X);return Z.constraint(lt)}),function(Z,lt,pt,gt){switch(lt.length){case n.BindingCount.NoBindingsAvailable:if(pt.isOptional())return lt;var ut=S.getServiceIdentifierAsString(Z),Bt=u.NOT_REGISTERED;throw Bt+=S.listMetadataForTarget(ut,pt),Bt+=S.listRegisteredBindingsForServiceIdentifier(gt,ut,f),new Error(Bt);case n.BindingCount.OnlyOneBindingAvailable:if(!pt.isArray())return lt;case n.BindingCount.MultipleBindingsAvailable:default:if(pt.isArray())return lt;throw ut=S.getServiceIdentifierAsString(Z),Bt=u.AMBIGUOUS_MATCH+" "+ut,Bt+=S.listRegisteredBindingsForServiceIdentifier(gt,ut,f),new Error(Bt)}}(X.serviceIdentifier,ft,X,P.container),ft}function f(x,j){var P=[],W=E(x);return W.hasKey(j)?P=W.get(j):x.parent!==null&&(P=f(x.parent,j)),P}y.getBindingDictionary=E,y.plan=function(x,j,P,W,X,$,ft,Z){Z===void 0&&(Z=!1);var lt=new I.Context(j),pt=function(gt,ut,Bt,Lt,St,K){var dt=gt?b.MULTI_INJECT_TAG:b.INJECT_TAG,mt=new m.Metadata(dt,Bt),bt=new C.Target(ut,Lt,Bt,mt);if(St!==void 0){var wt=new m.Metadata(St,K);bt.metadata.push(wt)}return bt}(P,W,X,"",$,ft);try{return function gt(ut,Bt,Lt,St,K,dt){var mt,bt;if(K===null){mt=A(ut,Bt,St,null,dt),bt=new d.Request(Lt,St,null,mt,dt);var wt=new r.Plan(St,bt);St.addPlan(wt)}else mt=A(ut,Bt,St,K,dt),bt=K.addChildRequest(dt.serviceIdentifier,mt,dt);mt.forEach(function(J){var ct=null;if(dt.isArray())ct=bt.addChildRequest(J.serviceIdentifier,J,dt);else{if(J.cache)return;ct=bt}if(J.type===p.BindingTypeEnum.Instance&&J.implementationType!==null){var it=s.getDependencies(ut,J.implementationType);if(!St.container.options.skipBaseClassChecks){var _=s.getBaseClassDependencyCount(ut,J.implementationType);if(it.length<_){var R=u.ARGUMENTS_LENGTH_MISMATCH(s.getFunctionName(J.implementationType));throw new Error(R)}}it.forEach(function(Q){gt(ut,!1,Q.serviceIdentifier,St,ct,Q)})}})}(x,Z,X,lt,null,pt),lt}catch(gt){throw c.isStackOverflowExeption(gt)&&lt.plan&&S.circularDependencyToException(lt.plan.rootRequest),gt}},y.createMockRequest=function(x,j,P,W){var X=new C.Target(p.TargetTypeEnum.Variable,"",j,new m.Metadata(P,W)),$=new I.Context(x);return new d.Request(j,$,null,[],X)}},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.BindingCount=void 0,y.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.Context=void 0;var n=t(67),u=function(){function p(b){this.id=n.id(),this.container=b}return p.prototype.addPlan=function(b){this.plan=b},p.prototype.setCurrentRequest=function(b){this.currentRequest=b},p}();y.Context=u},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.Plan=void 0;var n=function(p,b){this.parentContext=p,this.rootRequest=b};y.Plan=n},function(i,y,t){"use strict";var n=this&&this.__spreadArrays||function(){for(var d=0,C=0,E=arguments.length;C<E;C++)d+=arguments[C].length;var A=Array(d),f=0;for(C=0;C<E;C++)for(var x=arguments[C],j=0,P=x.length;j<P;j++,f++)A[f]=x[j];return A};Object.defineProperty(y,"__esModule",{value:!0}),y.getFunctionName=y.getBaseClassDependencyCount=y.getDependencies=void 0;var u=t(222),p=t(41),b=t(55),c=t(32),S=t(88);Object.defineProperty(y,"getFunctionName",{enumerable:!0,get:function(){return S.getFunctionName}});var I=t(223);function m(d,C,E,A){var f=d.getConstructorMetadata(E),x=f.compilerGeneratedMetadata;if(x===void 0){var j=p.MISSING_INJECTABLE_ANNOTATION+" "+C+".";throw new Error(j)}var P=f.userGeneratedMetadata,W=Object.keys(P),X=function(ft,Z,lt,pt,gt){for(var ut=[],Bt=0;Bt<gt;Bt++){var Lt=r(Bt,ft,Z,lt,pt);Lt!==null&&ut.push(Lt)}return ut}(A,C,x,P,E.length===0&&W.length>0?W.length:E.length),$=function ft(Z,lt){for(var pt=Z.getPropertiesMetadata(lt),gt=[],ut=Object.keys(pt),Bt=0,Lt=ut;Bt<Lt.length;Bt++){var St=Lt[Bt],K=pt[St],dt=s(pt[St]),mt=dt.targetName||St,bt=dt.inject||dt.multiInject,wt=new I.Target(b.TargetTypeEnum.ClassProperty,mt,bt);wt.metadata=K,gt.push(wt)}var J=Object.getPrototypeOf(lt.prototype).constructor;if(J!==Object){var ct=ft(Z,J);gt=n(gt,ct)}return gt}(d,E);return n(X,$)}function r(d,C,E,A,f){var x=f[d.toString()]||[],j=s(x),P=j.unmanaged!==!0,W=A[d],X=j.inject||j.multiInject;if((W=X||W)instanceof u.LazyServiceIdentifer&&(W=W.unwrap()),P){if(!C&&(W===Object||W===Function||W===void 0)){var $=p.MISSING_INJECT_ANNOTATION+" argument "+d+" in class "+E+".";throw new Error($)}var ft=new I.Target(b.TargetTypeEnum.ConstructorArgument,j.targetName,W);return ft.metadata=x,ft}return null}function s(d){var C={};return d.forEach(function(E){C[E.key.toString()]=E.value}),{inject:C[c.INJECT_TAG],multiInject:C[c.MULTI_INJECT_TAG],targetName:C[c.NAME_TAG],unmanaged:C[c.UNMANAGED_TAG]}}y.getDependencies=function(d,C){return m(d,S.getFunctionName(C),C,!1)},y.getBaseClassDependencyCount=function d(C,E){var A=Object.getPrototypeOf(E.prototype).constructor;if(A!==Object){var f=m(C,S.getFunctionName(A),A,!0),x=f.map(function(W){return W.metadata.filter(function(X){return X.key===c.UNMANAGED_TAG})}),j=[].concat.apply([],x).length,P=f.length-j;return P>0?P:d(C,A)}return 0}},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.QueryableString=void 0;var n=function(){function u(p){this.str=p}return u.prototype.startsWith=function(p){return this.str.indexOf(p)===0},u.prototype.endsWith=function(p){var b,c=p.split("").reverse().join("");return b=this.str.split("").reverse().join(""),this.startsWith.call({str:b},c)},u.prototype.contains=function(p){return this.str.indexOf(p)!==-1},u.prototype.equals=function(p){return this.str===p},u.prototype.value=function(){return this.str},u}();y.QueryableString=n},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.Request=void 0;var n=t(67),u=function(){function p(b,c,S,I,m){this.id=n.id(),this.serviceIdentifier=b,this.parentContext=c,this.parentRequest=S,this.target=m,this.childRequests=[],this.bindings=Array.isArray(I)?I:[I],this.requestScope=S===null?new Map:null}return p.prototype.addChildRequest=function(b,c,S){var I=new p(b,this.parentContext,this,c,S);return this.childRequests.push(I),I},p}();y.Request=u},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.resolve=void 0;var n=t(41),u=t(55),p=t(221),b=t(88),c=t(456),S=function(m,r,s){try{return s()}catch(d){throw p.isStackOverflowExeption(d)?new Error(n.CIRCULAR_DEPENDENCY_IN_FACTORY(m,r.toString())):d}};y.resolve=function(I){return function m(r){return function(s){s.parentContext.setCurrentRequest(s);var d=s.bindings,C=s.childRequests,E=s.target&&s.target.isArray(),A=!(s.parentRequest&&s.parentRequest.target&&s.target&&s.parentRequest.target.matchesArray(s.target.serviceIdentifier));if(E&&A)return C.map(function(X){return m(r)(X)});var f=null;if(!s.target.isOptional()||d.length!==0){var x=d[0],j=x.scope===u.BindingScopeEnum.Singleton,P=x.scope===u.BindingScopeEnum.Request;if(j&&x.activated)return x.cache;if(P&&r!==null&&r.has(x.id))return r.get(x.id);if(x.type===u.BindingTypeEnum.ConstantValue)f=x.cache;else if(x.type===u.BindingTypeEnum.Function)f=x.cache;else if(x.type===u.BindingTypeEnum.Constructor)f=x.implementationType;else if(x.type===u.BindingTypeEnum.DynamicValue&&x.dynamicValue!==null)f=S("toDynamicValue",x.serviceIdentifier,function(){return x.dynamicValue(s.parentContext)});else if(x.type===u.BindingTypeEnum.Factory&&x.factory!==null)f=S("toFactory",x.serviceIdentifier,function(){return x.factory(s.parentContext)});else if(x.type===u.BindingTypeEnum.Provider&&x.provider!==null)f=S("toProvider",x.serviceIdentifier,function(){return x.provider(s.parentContext)});else{if(x.type!==u.BindingTypeEnum.Instance||x.implementationType===null){var W=b.getServiceIdentifierAsString(s.serviceIdentifier);throw new Error(n.INVALID_BINDING_TYPE+" "+W)}f=c.resolveInstance(x.implementationType,C,m(r))}return typeof x.onActivation=="function"&&(f=x.onActivation(s.parentContext,f)),j&&(x.cache=f,x.activated=!0),P&&r!==null&&!r.has(x.id)&&r.set(x.id,f),f}}}(I.plan.rootRequest.requestScope)(I.plan.rootRequest)}},function(i,y,t){"use strict";var n=this&&this.__spreadArrays||function(){for(var c=0,S=0,I=arguments.length;S<I;S++)c+=arguments[S].length;var m=Array(c),r=0;for(S=0;S<I;S++)for(var s=arguments[S],d=0,C=s.length;d<C;d++,r++)m[r]=s[d];return m};Object.defineProperty(y,"__esModule",{value:!0}),y.resolveInstance=void 0;var u=t(41),p=t(55),b=t(32);y.resolveInstance=function(c,S,I){var m,r,s=null;if(S.length>0){var d=S.filter(function(C){return C.target!==null&&C.target.type===p.TargetTypeEnum.ConstructorArgument}).map(I);r=d,s=function(C,E,A){var f=E.filter(function(j){return j.target!==null&&j.target.type===p.TargetTypeEnum.ClassProperty}),x=f.map(A);return f.forEach(function(j,P){var W;W=j.target.name.value();var X=x[P];C[W]=X}),C}(s=new((m=c).bind.apply(m,n([void 0],r))),S,I)}else s=new c;return function(C,E){if(Reflect.hasMetadata(b.POST_CONSTRUCT,C)){var A=Reflect.getMetadata(b.POST_CONSTRUCT,C);try{E[A.value]()}catch(f){throw new Error(u.POST_CONSTRUCT_ERROR(C.name,f.message))}}}(c,s),s}},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.BindingToSyntax=void 0;var n=t(41),u=t(55),p=t(458),b=t(224),c=function(){function S(I){this._binding=I}return S.prototype.to=function(I){return this._binding.type=u.BindingTypeEnum.Instance,this._binding.implementationType=I,new p.BindingInWhenOnSyntax(this._binding)},S.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+n.INVALID_TO_SELF_VALUE);var I=this._binding.serviceIdentifier;return this.to(I)},S.prototype.toConstantValue=function(I){return this._binding.type=u.BindingTypeEnum.ConstantValue,this._binding.cache=I,this._binding.dynamicValue=null,this._binding.implementationType=null,new b.BindingWhenOnSyntax(this._binding)},S.prototype.toDynamicValue=function(I){return this._binding.type=u.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=I,this._binding.implementationType=null,new p.BindingInWhenOnSyntax(this._binding)},S.prototype.toConstructor=function(I){return this._binding.type=u.BindingTypeEnum.Constructor,this._binding.implementationType=I,new b.BindingWhenOnSyntax(this._binding)},S.prototype.toFactory=function(I){return this._binding.type=u.BindingTypeEnum.Factory,this._binding.factory=I,new b.BindingWhenOnSyntax(this._binding)},S.prototype.toFunction=function(I){if(typeof I!="function")throw new Error(n.INVALID_FUNCTION_BINDING);var m=this.toConstantValue(I);return this._binding.type=u.BindingTypeEnum.Function,m},S.prototype.toAutoFactory=function(I){return this._binding.type=u.BindingTypeEnum.Factory,this._binding.factory=function(m){return function(){return m.container.get(I)}},new b.BindingWhenOnSyntax(this._binding)},S.prototype.toProvider=function(I){return this._binding.type=u.BindingTypeEnum.Provider,this._binding.provider=I,new b.BindingWhenOnSyntax(this._binding)},S.prototype.toService=function(I){this.toDynamicValue(function(m){return m.container.get(I)})},S}();y.BindingToSyntax=c},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.BindingInWhenOnSyntax=void 0;var n=t(459),u=t(141),p=t(142),b=function(){function c(S){this._binding=S,this._bindingWhenSyntax=new p.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new u.BindingOnSyntax(this._binding),this._bindingInSyntax=new n.BindingInSyntax(S)}return c.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},c.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},c.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},c.prototype.when=function(S){return this._bindingWhenSyntax.when(S)},c.prototype.whenTargetNamed=function(S){return this._bindingWhenSyntax.whenTargetNamed(S)},c.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},c.prototype.whenTargetTagged=function(S,I){return this._bindingWhenSyntax.whenTargetTagged(S,I)},c.prototype.whenInjectedInto=function(S){return this._bindingWhenSyntax.whenInjectedInto(S)},c.prototype.whenParentNamed=function(S){return this._bindingWhenSyntax.whenParentNamed(S)},c.prototype.whenParentTagged=function(S,I){return this._bindingWhenSyntax.whenParentTagged(S,I)},c.prototype.whenAnyAncestorIs=function(S){return this._bindingWhenSyntax.whenAnyAncestorIs(S)},c.prototype.whenNoAncestorIs=function(S){return this._bindingWhenSyntax.whenNoAncestorIs(S)},c.prototype.whenAnyAncestorNamed=function(S){return this._bindingWhenSyntax.whenAnyAncestorNamed(S)},c.prototype.whenAnyAncestorTagged=function(S,I){return this._bindingWhenSyntax.whenAnyAncestorTagged(S,I)},c.prototype.whenNoAncestorNamed=function(S){return this._bindingWhenSyntax.whenNoAncestorNamed(S)},c.prototype.whenNoAncestorTagged=function(S,I){return this._bindingWhenSyntax.whenNoAncestorTagged(S,I)},c.prototype.whenAnyAncestorMatches=function(S){return this._bindingWhenSyntax.whenAnyAncestorMatches(S)},c.prototype.whenNoAncestorMatches=function(S){return this._bindingWhenSyntax.whenNoAncestorMatches(S)},c.prototype.onActivation=function(S){return this._bindingOnSyntax.onActivation(S)},c}();y.BindingInWhenOnSyntax=b},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.BindingInSyntax=void 0;var n=t(55),u=t(224),p=function(){function b(c){this._binding=c}return b.prototype.inRequestScope=function(){return this._binding.scope=n.BindingScopeEnum.Request,new u.BindingWhenOnSyntax(this._binding)},b.prototype.inSingletonScope=function(){return this._binding.scope=n.BindingScopeEnum.Singleton,new u.BindingWhenOnSyntax(this._binding)},b.prototype.inTransientScope=function(){return this._binding.scope=n.BindingScopeEnum.Transient,new u.BindingWhenOnSyntax(this._binding)},b}();y.BindingInSyntax=p},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.ContainerSnapshot=void 0;var n=function(){function u(){}return u.of=function(p,b){var c=new u;return c.bindings=p,c.middleware=b,c},u}();y.ContainerSnapshot=n},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.Lookup=void 0;var n=t(41),u=function(){function p(){this._map=new Map}return p.prototype.getMap=function(){return this._map},p.prototype.add=function(b,c){if(b==null)throw new Error(n.NULL_ARGUMENT);if(c==null)throw new Error(n.NULL_ARGUMENT);var S=this._map.get(b);S!==void 0?(S.push(c),this._map.set(b,S)):this._map.set(b,[c])},p.prototype.get=function(b){if(b==null)throw new Error(n.NULL_ARGUMENT);var c=this._map.get(b);if(c!==void 0)return c;throw new Error(n.KEY_NOT_FOUND)},p.prototype.remove=function(b){if(b==null)throw new Error(n.NULL_ARGUMENT);if(!this._map.delete(b))throw new Error(n.KEY_NOT_FOUND)},p.prototype.removeByCondition=function(b){var c=this;this._map.forEach(function(S,I){var m=S.filter(function(r){return!b(r)});m.length>0?c._map.set(I,m):c._map.delete(I)})},p.prototype.hasKey=function(b){if(b==null)throw new Error(n.NULL_ARGUMENT);return this._map.has(b)},p.prototype.clone=function(){var b=new p;return this._map.forEach(function(c,S){c.forEach(function(I){return b.add(S,I.clone())})}),b},p.prototype.traverse=function(b){this._map.forEach(function(c,S){b(S,c)})},p}();y.Lookup=u},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.AsyncContainerModule=y.ContainerModule=void 0;var n=t(67),u=function(c){this.id=n.id(),this.registry=c};y.ContainerModule=u;var p=function(c){this.id=n.id(),this.registry=c};y.AsyncContainerModule=p},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.injectable=void 0;var n=t(41),u=t(32);y.injectable=function(){return function(p){if(Reflect.hasOwnMetadata(u.PARAM_TYPES,p))throw new Error(n.DUPLICATED_INJECTABLE_DECORATOR);var b=Reflect.getMetadata(u.DESIGN_PARAM_TYPES,p)||[];return Reflect.defineMetadata(u.PARAM_TYPES,b,p),p}}},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.tagged=void 0;var n=t(49),u=t(59);y.tagged=function(p,b){return function(c,S,I){var m=new n.Metadata(p,b);typeof I=="number"?u.tagParameter(c,S,I,m):u.tagProperty(c,S,m)}}},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.named=void 0;var n=t(32),u=t(49),p=t(59);y.named=function(b){return function(c,S,I){var m=new u.Metadata(n.NAMED_TAG,b);typeof I=="number"?p.tagParameter(c,S,I,m):p.tagProperty(c,S,m)}}},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.optional=void 0;var n=t(32),u=t(49),p=t(59);y.optional=function(){return function(b,c,S){var I=new u.Metadata(n.OPTIONAL_TAG,!0);typeof S=="number"?p.tagParameter(b,c,S,I):p.tagProperty(b,c,I)}}},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.unmanaged=void 0;var n=t(32),u=t(49),p=t(59);y.unmanaged=function(){return function(b,c,S){var I=new u.Metadata(n.UNMANAGED_TAG,!0);p.tagParameter(b,c,S,I)}}},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.multiInject=void 0;var n=t(32),u=t(49),p=t(59);y.multiInject=function(b){return function(c,S,I){var m=new u.Metadata(n.MULTI_INJECT_TAG,b);typeof I=="number"?p.tagParameter(c,S,I,m):p.tagProperty(c,S,m)}}},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.targetName=void 0;var n=t(32),u=t(49),p=t(59);y.targetName=function(b){return function(c,S,I){var m=new u.Metadata(n.NAME_TAG,b);p.tagParameter(c,S,I,m)}}},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.postConstruct=void 0;var n=t(41),u=t(32),p=t(49);y.postConstruct=function(){return function(b,c,S){var I=new p.Metadata(u.POST_CONSTRUCT,c);if(Reflect.hasOwnMetadata(u.POST_CONSTRUCT,b.constructor))throw new Error(n.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(u.POST_CONSTRUCT,I,b.constructor)}}},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.multiBindToService=void 0,y.multiBindToService=function(n){return function(u){return function(){for(var p=[],b=0;b<arguments.length;b++)p[b]=arguments[b];return p.forEach(function(c){return n.bind(c).toService(u)})}}}},function(i,y){function t(n,u){return i.exports=t=Object.setPrototypeOf||function(p,b){return p.__proto__=b,p},t(n,u)}i.exports=t},function(i,y,t){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var n=Symbol.for("INJECTION");function u(p,b,c,S){Object.defineProperty(p,b,{configurable:!0,enumerable:!0,get:function(){return S&&!Reflect.hasMetadata(n,this,b)&&Reflect.defineMetadata(n,c(),this,b),Reflect.hasMetadata(n,this,b)?Reflect.getMetadata(n,this,b):c()},set:function(m){Reflect.defineMetadata(n,m,this,b)}})}y.makePropertyInjectDecorator=function(p,b){return function(c){return function(S,I){u(S,I,function(){return p.get(c)},b)}}},y.makePropertyInjectNamedDecorator=function(p,b){return function(c,S){return function(I,m){u(I,m,function(){return p.getNamed(c,S)},b)}}},y.makePropertyInjectTaggedDecorator=function(p,b){return function(c,S,I){return function(m,r){u(m,r,function(){return p.getTagged(c,S,I)},b)}}},y.makePropertyMultiInjectDecorator=function(p,b){return function(c){return function(S,I){u(S,I,function(){return p.getAll(c)},b)}}}},function(i,y,t){var n=t(219);i.exports=function(u){if(Array.isArray(u))return n(u)}},function(i,y){i.exports=function(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}},function(i,y){i.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},function(i,y){i.exports=function(t){var n=new Float32Array(2);return n[0]=t[0],n[1]=t[1],n}},function(i,y){i.exports=function(t,n){var u=new Float32Array(2);return u[0]=t,u[1]=n,u}},function(i,y){i.exports=function(t,n){return t[0]=n[0],t[1]=n[1],t}},function(i,y,t){i.exports=function(u,p){var b=u[0],c=u[1],S=p[0],I=p[1];return Math.abs(b-S)<=n*Math.max(1,Math.abs(b),Math.abs(S))&&Math.abs(c-I)<=n*Math.max(1,Math.abs(c),Math.abs(I))};var n=t(233)},function(i,y){i.exports=function(t,n){return t[0]===n[0]&&t[1]===n[1]}},function(i,y,t){i.exports=t(150)},function(i,y,t){i.exports=t(237)},function(i,y,t){i.exports=t(238)},function(i,y){i.exports=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t}},function(i,y){i.exports=function(t,n,u){return t[0]=Math.min(n[0],u[0]),t[1]=Math.min(n[1],u[1]),t}},function(i,y){i.exports=function(t,n,u){return t[0]=Math.max(n[0],u[0]),t[1]=Math.max(n[1],u[1]),t}},function(i,y){i.exports=function(t,n,u){var p=Math.cos(u),b=Math.sin(u),c=n[0],S=n[1];return t[0]=c*p-S*b,t[1]=c*b+S*p,t}},function(i,y){i.exports=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t}},function(i,y){i.exports=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t}},function(i,y){i.exports=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t}},function(i,y){i.exports=function(t,n,u){return t[0]=n[0]*u,t[1]=n[1]*u,t}},function(i,y){i.exports=function(t,n,u,p){return t[0]=n[0]+u[0]*p,t[1]=n[1]+u[1]*p,t}},function(i,y,t){i.exports=t(239)},function(i,y,t){i.exports=t(240)},function(i,y,t){i.exports=t(241)},function(i,y,t){i.exports=t(242)},function(i,y){i.exports=function(t,n){return t[0]=-n[0],t[1]=-n[1],t}},function(i,y){i.exports=function(t,n,u){var p=n[0]*u[1]-n[1]*u[0];return t[0]=t[1]=0,t[2]=p,t}},function(i,y){i.exports=function(t,n,u,p){var b=n[0],c=n[1];return t[0]=b+p*(u[0]-b),t[1]=c+p*(u[1]-c),t}},function(i,y){i.exports=function(t,n){n=n||1;var u=2*Math.random()*Math.PI;return t[0]=Math.cos(u)*n,t[1]=Math.sin(u)*n,t}},function(i,y){i.exports=function(t,n,u){var p=n[0],b=n[1];return t[0]=u[0]*p+u[2]*b,t[1]=u[1]*p+u[3]*b,t}},function(i,y){i.exports=function(t,n,u){var p=n[0],b=n[1];return t[0]=u[0]*p+u[2]*b+u[4],t[1]=u[1]*p+u[3]*b+u[5],t}},function(i,y){i.exports=function(t,n,u){var p=n[0],b=n[1];return t[0]=u[0]*p+u[3]*b+u[6],t[1]=u[1]*p+u[4]*b+u[7],t}},function(i,y){i.exports=function(t,n,u){var p=n[0],b=n[1];return t[0]=u[0]*p+u[4]*b+u[12],t[1]=u[1]*p+u[5]*b+u[13],t}},function(i,y,t){i.exports=function(u,p,b,c,S,I){var m,r;for(p||(p=2),b||(b=0),r=c?Math.min(c*p+b,u.length):u.length,m=b;m<r;m+=p)n[0]=u[m],n[1]=u[m+1],S(n,n,I),u[m]=n[0],u[m+1]=n[1];return u};var n=t(234)()},function(i,y){i.exports=function(t,n,u){var p=n[0]*n[0]+n[1]*n[1];if(p>u*u){var b=Math.sqrt(p);t[0]=n[0]/b*u,t[1]=n[1]/b*u}else t[0]=n[0],t[1]=n[1];return t}},function(i,y,t){"use strict";var n=t(0),u=t(5),p=t(38),b=p.a.cloneEvent,c=p.a.isNaN,S=Math.abs,I=["shift","ctrl","alt","control"],m={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0}},getEvents:function(){return{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onMouseDown",touchmove:"onMouseMove",touchend:"onMouseUp"}},updateViewport:function(R){var Q=this.origin,k=+R.clientX,g=+R.clientY;if(!c(k)&&!c(g)){var O=k-Q.x,F=g-Q.y;this.get("direction")==="x"?F=0:this.get("direction")==="y"&&(O=0),this.origin={x:k,y:g};var V=this.graph.get("width"),rt=this.graph.get("height"),ot=this.graph.get("canvas").getCanvasBBox();(ot.minX<=V+this.scalableRange&&ot.minX+O>V+this.scalableRange||ot.maxX+this.scalableRange>=0&&ot.maxX+this.scalableRange+O<0)&&(O=0),(ot.minY<=rt+this.scalableRange&&ot.minY+F>rt+this.scalableRange||ot.maxY+this.scalableRange>=0&&ot.maxY+this.scalableRange+F<0)&&(F=0),this.graph.translate(O,F)}},onMouseDown:function(R){var Q=R.originalEvent;if((!Q||R.name===u.h.TOUCHSTART||Q.button===0)&&(R.name===u.h.TOUCHSTART||typeof window=="undefined"||!window.event||window.event.buttons||window.event.button)&&this.shouldBegin.call(this,R)&&!this.keydown&&R.target&&R.target.isCanvas&&R.target.isCanvas()&&(this.origin={x:R.clientX,y:R.clientY},this.dragging=!1,this.enableOptimize)){for(var k=this.graph,g=k.getEdges(),O=0,F=g.length;O<F;O++){var V=g[O].get("group").get("children");V&&V.forEach(function(Ot){Ot.set("ori-visibility",Ot.get("ori-visibility")||Ot.get("visible")),Ot.hide()})}for(var rt=k.getNodes(),ot=0,st=rt.length;ot<st;ot++)for(var Mt=0,yt=rt[ot].getContainer().get("children");Mt<yt.length;Mt++){var xt=yt[Mt];xt.get("isKeyShape")||(xt.set("ori-visibility",xt.get("ori-visibility")||xt.get("visible")),xt.hide())}}},onMouseMove:function(R){var Q=this.graph;if(!this.keydown&&R.target&&R.target.isCanvas&&R.target.isCanvas()&&(R=b(R),this.origin)){if(this.dragging)R.type="drag",Q.emit("canvas:drag",R);else{if(S(this.origin.x-R.clientX)+S(this.origin.y-R.clientY)<10)return;this.shouldBegin.call(this,R)&&(R.type="dragstart",Q.emit("canvas:dragstart",R),this.dragging=!0)}this.shouldUpdate.call(this,R)&&this.updateViewport(R)}},onMouseUp:function(R){var Q=this.graph;if(!this.keydown){if(this.enableOptimize){for(var k=Q.getEdges(),g=0,O=k.length;g<O;g++){var F=k[g].get("group").get("children");F&&F.forEach(function(xt){xt.get("ori-visibility")&&xt.show()})}for(var V=Q.getNodes(),rt=0,ot=V.length;rt<ot;rt++)for(var st=0,Mt=V[rt].getContainer().get("children");st<Mt.length;st++){var yt=Mt[st];yt.get("isKeyShape")||yt.get("ori-visibility")&&yt.show()}}this.dragging?(R=b(R),this.shouldEnd.call(this,R)&&this.updateViewport(R),R.type="dragend",Q.emit("canvas:dragend",R),this.endDrag()):this.origin=null}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1},onKeyDown:function(R){var Q=R.key;Q&&(I.indexOf(Q.toLowerCase())>-1?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1}},r=t(1),s=t(45),d={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected"}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas"}},validationCombo:function(R){return!(!this.origin||!R||R.destroyed)&&R.getType()==="combo"},onDragStart:function(R){var Q=this;if(this.shouldBegin.call(this,R)){var k=R.item;if(k&&!k.destroyed&&!k.hasLocked()){k.getContainer().set("capture",!1);var g=R.target;if(g&&g.get("isAnchorPoint"))return;var O=this.graph;this.targets=[],this.targetCombo=null;var F=O.findAllByState("node",this.selectedState),V=k.get("id");F.filter(function(ot){var st=ot.get("id");return V===st}).length===0?this.targets.push(k):F.length>1?F.forEach(function(ot){ot.hasLocked()||Q.targets.push(ot)}):this.targets.push(k);var rt=[];this.targets.forEach(function(ot){rt.push(Object(n.c)(ot.getModel()))}),this.set("beforeDragNodes",rt),this.origin={x:R.x,y:R.y},this.point={},this.originPoint={}}}},onDrag:function(R){var Q=this;this.origin&&this.shouldUpdate(this,R)&&(this.get("enableDelegate")?this.updateDelegate(R):this.targets.map(function(k){Q.update(k,R)}))},onDragEnd:function(R){if(this.origin&&this.shouldEnd.call(this,R)){var Q=R.item;Q&&Q.getContainer().set("capture",!0),this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.updatePositions(R);var k=this.graph;if(k.get("enabledStack")){var g={before:{nodes:this.get("beforeDragNodes"),edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.targets.forEach(function(O){g.after.nodes.push(O.getModel())}),k.pushStack("update",Object(n.c)(g))}k.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(R){var Q=R.item;if(this.validationCombo(Q)){this.updatePositions(R);var k=this.graph;if(this.comboActiveState&&k.setItemState(Q,this.comboActiveState,!1),this.targetCombo=Q,this.onlyChangeComboSize)k.updateCombos();else{var g=Q.getModel();this.targets.map(function(O){O.getModel().comboId!==g.id&&k.updateComboTree(O,g.id)}),k.updateCombo(Q)}k.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(R){var Q=this.graph;this.targets&&this.targets.length!==0&&(this.updatePositions(R),this.onlyChangeComboSize?Q.updateCombos():this.targets.map(function(k){k.getModel().comboId&&Q.updateComboTree(k)}))},onDropNode:function(R){if(this.targets&&this.targets.length!==0){var Q=R.item;this.updatePositions(R);var k=this.graph,g=Q.getModel().comboId;if(g){var O=k.findById(g);this.comboActiveState&&k.setItemState(O,this.comboActiveState,!1),this.targets.map(function(F){var V=F.getModel();g!==V.comboId&&k.updateComboTree(F,g)}),k.updateCombo(O)}else this.targets.map(function(F){F.getModel().comboId&&k.updateComboTree(F)});k.emit("dragnodeend",{items:this.targets,targetItem:Q})}},onDragEnter:function(R){var Q=R.item;if(this.validationCombo(Q)){var k=this.graph;this.comboActiveState&&k.setItemState(Q,this.comboActiveState,!0)}},onDragLeave:function(R){var Q=R.item;if(this.validationCombo(Q)){var k=this.graph;this.comboActiveState&&k.setItemState(Q,this.comboActiveState,!1)}},updatePositions:function(R){var Q=this;this.targets&&this.targets.length!==0&&this.get("enableDelegate")&&this.targets.map(function(k){return Q.update(k,R)})},update:function(R,Q){var k=this.origin,g=R.get("model"),O=R.get("id");this.point[O]||(this.point[O]={x:g.x||0,y:g.y||0});var F={x:Q.x-k.x+this.point[O].x,y:Q.y-k.y+this.point[O].y};this.get("updateEdge")?this.graph.updateItem(R,F,!1):R.updatePosition(F)},updateDelegate:function(R){if(this.graph,this.delegateRect){var Q=R.x-this.origin.x+this.originPoint.minX,k=R.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:Q,y:k})}else{var g=this.graph.get("group"),O=Object(n.e)({},s.a.delegateStyle,this.delegateStyle),F=this.calculationGroupPosition(R),V=F.x,rt=F.y,ot=F.width,st=F.height,Mt=F.minX,yt=F.minY;this.originPoint={x:V,y:rt,width:ot,height:st,minX:Mt,minY:yt},this.delegateRect=g.addShape("rect",{attrs:Object(r.a)({width:ot,height:st,x:V,y:rt},O),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(R){var Q=this.graph.findAllByState("node",this.selectedState);Q.length===0&&Q.push(R.item);for(var k=1/0,g=-1/0,O=1/0,F=-1/0,V=0;V<Q.length;V++){var rt=Q[V].getBBox(),ot=rt.minX,st=rt.minY,Mt=rt.maxX,yt=rt.maxY;ot<k&&(k=ot),st<O&&(O=st),Mt>g&&(g=Mt),yt>F&&(F=yt)}return{x:Math.floor(k),y:Math.floor(O),width:Math.ceil(g)-Math.floor(k),height:Math.ceil(F)-Math.floor(O),minX:k,minY:O}}},C=Math.min,E=Math.max,A=Math.abs,f=["drag","shift","ctrl","alt","control"],x={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return f.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(R){var Q=R.item,k=this.brush;Q||(this.trigger==="drag"||this.keydown)&&(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),k||(k=this.createBrush()),this.originPoint={x:R.canvasX,y:R.canvasY},k.attr({width:0,height:0}),k.show(),this.dragging=!0)},onMouseMove:function(R){this.dragging&&(this.trigger==="drag"||this.keydown)&&this.updateBrush(R)},onMouseUp:function(R){this.graph,(this.brush||this.dragging)&&(this.trigger==="drag"||this.keydown)&&(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(R),this.dragging=!1)},clearStates:function(){var R=this.graph,Q=this.selectedState,k=R.findAllByState("node",Q),g=R.findAllByState("edge",Q);k.forEach(function(O){return R.setItemState(O,Q,!1)}),g.forEach(function(O){return R.setItemState(O,Q,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),R.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedNodes:function(R){var Q=this,k=this.graph,g=this.originPoint,O=this.shouldUpdate,F=this.selectedState,V={x:R.x,y:R.y},rt=k.getPointByCanvas(g.x,g.y),ot=C(V.x,rt.x),st=E(V.x,rt.x),Mt=C(V.y,rt.y),yt=E(V.y,rt.y),xt=[],Ot=[];k.getNodes().forEach(function(Dt){var zt=Dt.getBBox();if(zt.centerX>=ot&&zt.centerX<=st&&zt.centerY>=Mt&&zt.centerY<=yt&&O(Dt,"select")){xt.push(Dt);var Tt=Dt.getModel();Ot.push(Tt.id),k.setItemState(Dt,F,!0)}});var jt=[];this.includeEdges&&xt.forEach(function(Dt){Dt.getOutEdges().forEach(function(zt){var Tt=zt.getModel(),Wt=Tt.source,Ht=Tt.target;Ot.includes(Wt)&&Ot.includes(Ht)&&O(zt,"select")&&(jt.push(zt),k.setItemState(zt,Q.selectedState,!0))})}),this.selectedEdges=jt,this.selectedNodes=xt,this.onSelect&&this.onSelect(xt,jt),k.emit("nodeselectchange",{selectedItems:{nodes:xt,edges:jt},select:!0})},createBrush:function(){var R=this.graph.get("canvas").addShape("rect",{attrs:this.brushStyle,capture:!1,name:"brush-shape"});return this.brush=R,this.delegate=R,R},updateBrush:function(R){var Q=this.originPoint;this.brush.attr({width:A(R.canvasX-Q.x),height:A(R.canvasY-Q.y),x:C(R.canvasX,Q.x),y:C(R.canvasY,Q.y)})},onKeyDown:function(R){var Q=R.key;if(Q){var k=this.trigger.toLowerCase(),g=Q.toLowerCase();this.keydown=g===k||g==="control"&&k==="ctrl"||g==="ctrl"&&k==="control"}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},j=["shift","ctrl","alt","control"],P={getDefaultCfg:function(){return{multiple:!0,trigger:"shift",selectedState:"selected"}},getEvents:function(){return j.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.multiple?{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(R){var Q=this,k=R.item;if(k&&!k.destroyed){var g=k.getType(),O=Q.graph,F=Q.keydown,V=Q.multiple,rt=Q.shouldUpdate;if(Q.shouldBegin.call(Q,R)){if(!F||!V){var ot=O.findAllByState(g,Q.selectedState);Object(n.f)(ot,function(yt){yt!==k&&O.setItemState(yt,Q.selectedState,!1)})}if(k.hasState(Q.selectedState)){rt.call(Q,R)&&O.setItemState(k,Q.selectedState,!1);var st=O.findAllByState("node",Q.selectedState),Mt=O.findAllByState("combo",Q.selectedState);O.emit("nodeselectchange",{target:k,selectedItems:{nodes:st,combos:Mt},select:!1})}else rt.call(Q,R)&&O.setItemState(k,Q.selectedState,!0),st=O.findAllByState("node",Q.selectedState),Mt=O.findAllByState("combo",Q.selectedState),O.emit("nodeselectchange",{target:k,selectedItems:{nodes:st,combos:Mt},select:!0})}}},onCanvasClick:function(){var R=this,Q=this.graph,k=Q.findAllByState("node",this.selectedState);Object(n.f)(k,function(O){Q.setItemState(O,R.selectedState,!1)});var g=Q.findAllByState("combo",this.selectedState);Object(n.f)(g,function(O){Q.setItemState(O,R.selectedState,!1)}),Q.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},onKeyDown:function(R){var Q=R.key;Q&&(Q.toLowerCase()===this.trigger.toLowerCase()||Q.toLowerCase()==="control"?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1}},W=t(122).a.transform,X={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"}}},getEvents:function(){var R=this.fixSelectedItems;return R.fixState||(R.fixState="selected"),R.fixAll&&(R.fixLineWidth=!0,R.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(R){var Q=R.originalEvent.touches,k=Q[0],g=Q[1];R.preventDefault(),g&&(this.startPoint={pageX:k.pageX,pageY:k.pageY},this.moveable=!0,g&&(this.endPoint={pageX:g.pageX,pageY:g.pageY}),this.originScale=this.currentScale||1)},onTouchMove:function(R){if(this.moveable){R.preventDefault();var Q=R.originalEvent.touches,k=Q[0],g=Q[1];if(g){this.endPoint||(this.endPoint={pageX:g.pageX,pageY:g.pageY});var O=function(Mt,yt){return Math.hypot(yt.x-Mt.x,yt.y-Mt.y)},F=O({x:k.pageX,y:k.pageY},{x:g.pageX,y:g.pageY})/O({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),V=this.originScale*F;this.currentScale=V;var rt=this.get("minZoom")||this.graph.get("minZoom");if(!(V>(this.get("maxZoom")||this.graph.get("maxZoom"))||V<rt)){var ot=this.graph.get("canvas").getPointByClient(R.clientX,R.clientY);this.graph.zoomTo(V,{x:ot.x,y:ot.y}),this.graph.emit("wheelzoom",R)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(R){var Q=this,k=this.graph,g=this.fixSelectedItems;if(this.shouldUpdate.call(this,R)){R.preventDefault();var O,F=k.get("canvas").getPointByClient(R.clientX,R.clientY),V=this.get("sensitivity"),rt=k.getZoom();O=rt*(R.wheelDelta<0?1-.05*V:1/(1-.05*V));var ot=this.get("minZoom")||k.get("minZoom");if(!(O>(this.get("maxZoom")||k.get("maxZoom"))||O<ot)){if(this.get("enableOptimize")){var st=this.get("optimizeZoom"),Mt=this.get("optimized"),yt=k.getNodes(),xt=k.getEdges(),Ot=yt.length,jt=xt.length;if(!Mt){for(var Dt=0;Dt<Ot;Dt++)if(!(Je=yt[Dt]).destroyed)for(var zt=(fa=Je.get("group").get("children")).length,Tt=0;Tt<zt;Tt++)(hr=fa[Tt]).destoryed||hr.get("isKeyShape")||(hr.set("ori-visibility",hr.get("ori-visibility")||hr.get("visible")),hr.hide());for(var Wt=0;Wt<jt;Wt++)for(zt=(fa=(Ki=xt[Wt]).get("group").get("children")).length,Tt=0;Tt<zt;Tt++)(hr=fa[Tt]).set("ori-visibility",hr.get("ori-visibility")||hr.get("visible")),hr.hide();this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Ht=setTimeout(function(){var oa=k.getZoom();if(Q.get("optimized")){Q.set("optimized",!1);for(var pa=0;pa<Ot;pa++){var La=yt[pa],Yr=(ti=La.get("group").get("children")).length;if(oa<st)(Pr=($r=La.getKeyShape()).get("ori-visibility"))&&$r.show();else for(var Sa=0;Sa<Yr;Sa++){var Pr=(li=ti[Sa]).get("ori-visibility");!li.get("visible")&&Pr&&Pr&&li.show()}}for(var si=0;si<jt;si++){var ti,$r,ui=xt[si];if(Yr=(ti=ui.get("group").get("children")).length,oa<st)(Pr=($r=ui.getKeyShape()).get("ori-visibility"))&&$r.show();else for(Sa=0;Sa<Yr;Sa++){var li;(li=ti[Sa]).get("visible")||(Pr=li.get("ori-visibility"))&&li.show()}}}},100);this.set("timeout",Ht)}if(rt<=1){var re=void 0,pe=void 0;if(g.fixAll||g.fixLineWidth||g.fixLabel){re=k.findAllByState("node",g.fixState),pe=k.findAllByState("edge",g.fixState);for(var me=rt/O,Se=re.length,Le=0;Le<Se;Le++){var Je,On=(Je=re[Le]).getContainer(),gn=Je.getModel(),Wn=Je.getOriginStyle(),kn=Je.getStateStyle(g.fixState),Vn=Je.get("shapeFactory").getShape(gn.type).getStateStyle(g.fixState,Je)[g.fixState];if(g.fixAll){if(O<=1){var Dn=Object(n.c)(On.getMatrix());Dn||(Dn=[1,0,0,0,1,0,0,0,1]);var Nn=Je.getModel(),Qn=Nn.x,ir=Nn.y;Dn=W(Dn,[["t",-Qn,-ir],["s",me,me],["t",Qn,ir]]),On.setMatrix(Dn)}}else for(zt=(fa=On.get("children")).length,Tt=0;Tt<zt;Tt++){var hr=fa[Tt],Sr=void 0,mr=void 0;if(g.fixLabel&&hr.get("type")==="text"){Sr=hr.attr("fontSize")||12;var dr=kn[hr.get("name")],Br=Vn[hr.get("name")],ii=dr?dr.fontSize:12,mi=Br?Br.fontSize:12,Pi=ii||mi||12;if(O<=1&&hr.attr("fontSize",Pi/O),mr)break}if(g.fixLineWidth&&hr.get("isKeyShape")){mr=hr.attr("lineWidth")||0;var sa=kn.lineWidth||Vn.lineWidth||Wn.lineWidth||0;if(O<=1&&hr.attr("lineWidth",sa/O),Sr)break}}}for(var Pa=pe.length,Mi=0;Mi<Pa;Mi++){var Ki,fa=(On=(Ki=pe[Mi]).getContainer()).get("children");for(gn=Ki.getModel(),kn=Ki.getStateStyle(g.fixState),Vn=Ki.get("shapeFactory").getShape(gn.type).getStateStyle(g.fixState,Ki)[g.fixState],zt=fa.length,Tt=0;Tt<zt&&(hr=fa[Tt],Sr=void 0,mr=void 0,!((g.fixLabel||g.fixAll)&&hr.get("type")==="text"&&(Sr=hr.attr("fontSize")||12,dr=kn[hr.get("name")],Br=Vn[hr.get("name")],ii=dr?dr.fontSize:12,mi=Br?Br.fontSize:12,Pi=ii||mi||12,O<=1&&hr.attr("fontSize",Pi/O),mr)||(g.fixLineWidth||g.fixAll)&&hr.get("isKeyShape")&&(mr=hr.attr("lineWidth")||0,sa=kn.lineWidth||Vn.lineWidth||1,O<=1&&hr.attr("lineWidth",sa/O),Sr)));Tt++);}}}k.zoomTo(O,{x:F.x,y:F.y}),k.emit("wheelzoom",R)}}}},$=t(14),ft={onMouseEnter:function(R){var Q=R.item;this.currentTarget=Q,this.showTooltip(R),this.graph.emit("tooltipchange",{item:R.item,action:"show"})},onMouseMove:function(R){this.shouldUpdate(R)?this.currentTarget&&R.item===this.currentTarget&&this.updatePosition(R):this.hideTooltip()},onMouseLeave:function(R){this.shouldEnd(R)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(R){var Q=this.container;if(R.item&&!R.item.destroyed){Q||(Q=this.createTooltip(this.graph.get("canvas")),this.container=Q);var k=this.formatText(R.item.get("model"),R);Q.innerHTML=k,Object($.c)(this.container,{visibility:"visible"}),this.updatePosition(R)}},hideTooltip:function(){Object($.c)(this.container,{visibility:"hidden"})},updatePosition:function(R){var Q=this.get("shouldBegin"),k=this.width,g=this.height,O=this.container,F=this.graph;if(Q(R)){var V=F.getPointByClient(R.clientX,R.clientY),rt=F.getCanvasByPoint(V.x,V.y),ot=rt.x,st=rt.y,Mt=O.getBoundingClientRect();ot>k/2?ot-=Mt.width:ot+=this.offset,st>g/2?st-=Mt.height:st+=this.offset;var yt=ot+"px",xt=st+"px";Object($.c)(this.container,{left:yt,top:xt,visibility:"visible"})}else Object($.c)(O,{visibility:"hidden"})},createTooltip:function(R){var Q=R.get("el");Q.style.position="relative";var k=Object($.b)('<div class="g6-tooltip g6-'+this.item+'-tooltip"></div>');return Q.parentNode.appendChild(k),Object($.c)(k,{position:"absolute",visibility:"visible"}),this.width=R.get("width"),this.height=R.get("height"),this.container=k,this.graph.get("tooltips").push(k),k}},Z=Object(r.a)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(Q){return Q.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},ft),lt=Object(r.a)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(Q){return"source: "+Q.source+" target: "+Q.target}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},ft),pt=["click","dblclick"],gt={getDefaultCfg:function(){return{trigger:"click",onChange:function(){}}},getEvents:function(){var R,Q;return pt.includes(this.trigger)?Q=this.trigger:(Q="click",console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),(R={})["node:"+Q]="onNodeClick",R.touchstart="onNodeClick",R},onNodeClick:function(R){var Q=R.item,k=this.graph.findDataById(Q.get("id"));if(k){var g=k.children;if(g&&g.length!==0){var O=!k.collapsed;this.shouldBegin(R,O)&&(k.collapsed=O,Q.getModel().collapsed=O,this.graph.emit("itemcollapsed",{item:R.item,collapsed:O}),this.shouldUpdate(R,O)&&(this.onChange(Q,O),this.graph.layout()))}}}},ut=p.a.calculationItemsBBox,Bt=function _(R,Q){if(Q(R)!==!1&&R){var k=R.get("combos");if(k.length===0)return!1;Object(n.f)(k,function(g){_(g,Q)})}},Lt={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected"}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(R){var Q=R.item;return!(!Q||Q.destroyed)&&!!this.shouldUpdate(this,R)&&Q.getType()==="combo"},onDragStart:function(R){var Q=this,k=this.graph,g=R.item;if(this.validationCombo(R)){this.targets=[];var O=k.findAllByState("combo",this.selectedState),F=g.get("id");O.filter(function(V){var rt=V.get("id");return F===rt}).length===0?this.targets.push(g):this.targets=O,this.activeState&&this.targets.map(function(V){var rt=V.getModel();if(rt.parentId){var ot=k.findById(rt.parentId);ot&&k.setItemState(ot,Q.activeState,!0)}}),this.point={},this.originPoint={},this.origin={x:R.x,y:R.y},this.currentItemChildCombos=[],Bt(g,function(V){if(V.destroyed)return!1;var rt=V.getModel();return Q.currentItemChildCombos.push(rt.id),!0})}},onDrag:function(R){var Q=this;if(this.origin&&this.validationCombo(R))if(this.enableDelegate)this.updateDelegate(R);else{if(this.activeState){var k=this.graph,g=R.item,O=g.getModel(),F=k.getCombos(),V=g.getBBox(),rt=V.centerX,ot=V.centerY,st=V.width;F.filter(function(Mt){var yt=Mt.getModel();return O.parentId,yt.id!==O.id&&!Q.currentItemChildCombos.includes(yt.id)}).map(function(Mt){var yt=Mt.getBBox(),xt=yt.centerX,Ot=yt.centerY,jt=yt.width,Dt=rt-xt,zt=ot-Ot,Tt=2*Math.sqrt(Dt*Dt+zt*zt);st+jt-Tt>.8*st?k.setItemState(Mt,Q.activeState,!0):k.setItemState(Mt,Q.activeState,!1)})}Object(n.f)(this.targets,function(Mt){Q.updateCombo(Mt,R)})}},updatePositions:function(R){var Q=this;this.enableDelegate&&Object(n.f)(this.targets,function(k){Q.updateCombo(k,R)})},onDrop:function(R){var Q=this,k=R.item;if(k&&this.targets&&!k.destroyed){this.updatePositions(R);var g=this.graph,O=k.getModel();this.targets.map(function(F){F.getModel().parentId!==O.id?(Q.activeState&&g.setItemState(k,Q.activeState,!1),Q.onlyChangeComboSize?g.updateCombo(F):g.updateComboTree(F,O.id)):g.updateCombo(k)}),this.end(k,R),this.endComparison=!0}},onNodeDrop:function(R){var Q=this;if(this.targets&&this.targets.length!==0){this.updatePositions(R);var k,g=this.graph,O=R.item.getModel().comboId;if(O){if(this.activeState){var F=g.findById(O);g.setItemState(F,this.activeState,!1)}this.targets.map(function(V){Q.onlyChangeComboSize?g.updateCombo(V):O!==V.getID()&&(k=g.findById(O),O!==V.getModel().parentId&&g.updateComboTree(V,O))})}else this.targets.map(function(V){Q.onlyChangeComboSize?g.updateCombo(V):V.getModel().comboId&&g.updateComboTree(V)});this.endComparison=!0,this.end(k,R)}},onDragEnter:function(R){if(this.origin&&this.validationCombo(R)){var Q=R.item,k=this.graph;this.activeState&&k.setItemState(Q,this.activeState,!0)}},onDragLeave:function(R){if(this.origin&&this.validationCombo(R)){var Q=R.item,k=this.graph;this.activeState&&k.setItemState(Q,this.activeState,!1)}},onDragEnd:function(R){if(this.targets&&this.targets.length!==0){var Q=R.item;this.updatePositions(R);var k=this.getParentCombo(Q.getModel().parentId),g=this.graph;k&&this.activeState&&g.setItemState(k,this.activeState,!1),this.end(void 0,R)}},end:function(R,Q){var k=this;if(this.origin){var g=this.graph;this.delegateShape&&(g.get("delegateGroup").clear(),this.delegateShape=null),R&&this.activeState&&g.setItemState(R,this.activeState,!1),R||this.targets.map(function(O){k.onlyChangeComboSize?g.updateCombo(O):g.updateComboTree(O)}),this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(R,Q){var k=this;if(Q(R)!==!1&&R){var g=R.get("combos");Object(n.f)(g,function(F){k.traverse(F,Q)});var O=R.get("nodes");Object(n.f)(O,function(F){k.traverse(F,Q)})}},updateCombo:function(R,Q){var k=this;this.traverse(R,function(g){return!g.destroyed&&(k.updateSignleItem(g,Q),!0)})},updateSignleItem:function(R,Q){var k=this.origin,g=this.graph,O=R.getModel(),F=R.get("id");this.point[F]||(this.point[F]={x:O.x,y:O.y});var V=Q.x-k.x+this.point[F].x,rt=Q.y-k.y+this.point[F].y;g.updateItem(R,{x:V,y:rt})},getParentCombo:function(R){var Q=this.graph;if(R){var k=Q.findById(R);if(k)return k}},updateDelegate:function(R){var Q=this.graph;if(this.delegateShape){var k=R.x-this.origin.x+this.originPoint.minX,g=R.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:k,y:g})}else{var O=Q.get("delegateGroup"),F=null,V=(F=this.targets.length>1?ut(this.targets):this.targets[0].getBBox()).x,rt=F.y,ot=F.width,st=F.height,Mt=F.minX,yt=F.minY;this.originPoint={x:V,y:rt,width:ot,height:st,minX:Mt,minY:yt};var xt=Object(r.a)(Object(r.a)({},s.a.delegateStyle),this.delegateStyle);this.delegateShape=O.addShape("rect",{attrs:Object(r.a)({width:F.width,height:F.height,x:F.x,y:F.y},xt),name:"combo-delegate-shape"}),this.delegate=this.delegateShape}}},St=["click","dblclick"],K={getDefaultCfg:function(){return{trigger:"dblclick",relayout:!0}},getEvents:function(){var R,Q;return St.includes(this.trigger)?Q=this.trigger:(Q="dblclick",console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),(R={})["combo:"+Q]="onComboClick",R},onComboClick:function(R){var Q=R.item,k=this.graph,g=this.relayout;if(Q&&!Q.destroyed&&Q.getType()==="combo"){var O=Q.getModel().id;O&&(k.collapseExpandCombo(O),g&&k.get("layout")?k.layout():k.refreshPositions())}}},dt=p.a.isPolygonsIntersect,mt=p.a.pathToPoints,bt=["drag","shift","ctrl","alt","control"],wt=["click","drag"],J=["shift","ctrl","control","alt","meta",void 0],ct=["shift","ctrl","alt","control"],it={"drag-canvas":m,"zoom-canvas":X,"drag-node":d,"activate-relations":{getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","canvas:click":"clearAllItemStates"}},setAllItemStates:function(R){var Q=R.item,k=this.graph;if(this.item=Q,this.shouldUpdate(R.item,{event:R,action:"activate"})){for(var g=this.activeState,O=this.inactiveState,F=k.getNodes(),V=k.getEdges(),rt=F.length,ot=V.length,st=0;st<rt;st++){var Mt=F[st],yt=Mt.hasState("selected");this.resetSelected&&yt&&k.setItemState(Mt,"selected",!1),k.setItemState(Mt,g,!1),O&&k.setItemState(Mt,O,!0)}for(st=0;st<ot;st++){var xt=V[st];k.setItemState(xt,g,!1),O&&k.setItemState(xt,O,!0)}O&&k.setItemState(Q,O,!1),k.setItemState(Q,g,!0);var Ot=Q.getEdges(),jt=Ot.length;for(st=0;st<jt;st++){var Dt=void 0;Dt=(xt=Ot[st]).getSource()===Q?xt.getTarget():xt.getSource(),O&&k.setItemState(Dt,O,!1),k.setItemState(Dt,g,!0),k.setItemState(xt,O,!1),k.setItemState(xt,g,!0),xt.toFront()}k.emit("afteractivaterelations",{item:R.item,action:"activate"})}},clearActiveState:function(R){var Q=this.get("graph");if(this.shouldUpdate(R.item,{event:R,action:"deactivate"})){var k=this.activeState,g=this.inactiveState,O=Q.get("autoPaint");Q.setAutoPaint(!1);for(var F=Q.getNodes(),V=Q.getEdges(),rt=F.length,ot=V.length,st=0;st<rt;st++){var Mt=F[st];Q.clearItemStates(Mt,[k,g])}for(st=0;st<ot;st++){var yt=V[st];Q.clearItemStates(yt,[k,g,"deactivate"])}Q.paint(),Q.setAutoPaint(O),Q.emit("afteractivaterelations",{item:R.item||this.get("item"),action:"deactivate"})}},clearAllItemStates:function(R){var Q=this.graph;if(this.shouldUpdate(R.item,{event:R,action:"deactivate"})){for(var k=this.activeState,g=this.inactiveState,O=Q.getNodes(),F=Q.getEdges(),V=O.length,rt=F.length,ot=0;ot<V;ot++){var st=O[ot];Q.clearItemStates(st,[k,g])}for(ot=0;ot<rt;ot++){var Mt=F[ot];Q.clearItemStates(Mt,[k,g,"deactivate"])}Q.emit("afteractivaterelations",{item:R.item||this.get("item"),action:"deactivate"})}}},"brush-select":x,"click-select":P,"lasso-select":{getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return bt.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(R){var Q=this.lasso;R.item||(this.trigger==="drag"||this.keydown)&&(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),Q||(Q=this.createLasso()),this.dragging=!0,this.originPoint={x:R.x,y:R.y},this.points.push(this.originPoint),Q.show())},onDragMove:function(R){this.dragging&&(this.trigger==="drag"||this.keydown)&&(this.points.push({x:R.x,y:R.y}),this.updateLasso(R))},onDragEnd:function(R){(this.lasso||this.dragging)&&(this.trigger==="drag"||this.keydown)&&(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var R=this.points,Q=[];return R.length&&(R.forEach(function(k,g){g===0?Q.push(["M",k.x,k.y]):Q.push(["L",k.x,k.y])}),Q.push(["L",R[0].x,R[0].y])),Q},clearStates:function(){var R=this.graph,Q=this.selectedState,k=R.findAllByState("node",Q),g=R.findAllByState("edge",Q);k.forEach(function(O){return R.setItemState(O,Q,!1)}),g.forEach(function(O){return R.setItemState(O,Q,!1)}),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],R.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var R=this,Q=this.graph,k=this.shouldUpdate,g=this.points.map(function(ot){return[Q.getCanvasByPoint(ot.x,ot.y).x,Q.getCanvasByPoint(ot.x,ot.y).y]}),O=this.selectedState,F=[],V=[];Q.getNodes().forEach(function(ot){if(function(Mt,yt){var xt,Ot=Mt.getKeyShape();if(Mt.get("type")==="path")xt=mt(Ot.attr("path"));else{var jt=Ot.getCanvasBBox();xt=[[jt.minX,jt.minY],[jt.maxX,jt.minY],[jt.maxX,jt.maxY],[jt.minX,jt.maxY]]}return dt(yt,xt)}(ot,g)&&k(ot,"select")){F.push(ot);var st=ot.getModel();V.push(st.id),Q.setItemState(ot,O,!0)}});var rt=[];this.includeEdges&&F.forEach(function(ot){ot.getOutEdges().forEach(function(st){var Mt=st.getModel(),yt=Mt.source,xt=Mt.target;V.includes(yt)&&V.includes(xt)&&k(st,"select")&&(rt.push(st),Q.setItemState(st,R.selectedState,!0))})}),this.selectedEdges=rt,this.selectedNodes=F,this.onSelect&&this.onSelect(F,rt),Q.emit("nodeselectchange",{selectedItems:{nodes:F,edges:rt},select:!0})},createLasso:function(){var R=this.graph.get("delegateGroup").addShape("path",{attrs:Object(r.a)({path:[]},this.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=R,this.delegate=R,this.points=[],R},updateLasso:function(R){this.lasso.attr({path:this.getLassoPath()})},onKeyDown:function(R){var Q=R.key;Q&&(Q.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},tooltip:Z,"edge-tooltip":lt,"collapse-expand":gt,"drag-combo":Lt,"collapse-expand-combo":K,"create-edge":{getDefaultCfg:function(){return{trigger:"click",key:void 0,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var R;return wt.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="click",console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),this.key&&J.indexOf(this.key.toLowerCase())===-1&&(this.trigger=void 0,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined")),this.trigger==="drag"?R={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:this.trigger==="click"&&(R={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),this.key&&(R.keydown="onKeyDown",R.keyup="onKeyUp"),R},onDragEnd:function(R){if(!this.key||this.keydown){var Q=R.item;Q&&Q.getID()!==this.source&&Q.getType()==="node"||this.cancelCreating({item:this.edge,x:R.x,y:R.y})}},onClick:function(R){if(!this.key||this.keydown){var Q=R.item,k=this.graph,g=Q.getModel(),O=this.getEdgeConfig;if(this.addingEdge&&this.edge){if(!this.shouldEnd.call(this,R))return;var F=void 0;F=O&&Object(n.r)(O)?O({source:this.source,target:g.id}):this.edgeConfig;var V=Object(r.a)({target:g.id},F);this.source===g.id&&(V.type="loop"),k.emit("beforecreateedge",{}),k.updateItem(this.edge,V),k.emit("aftercreateedge",{edge:this.edge}),this.edge.getKeyShape().set("capture",!0),this.edge=null,this.addingEdge=!1}else{if(!this.shouldBegin.call(this,R))return;F=void 0,F=O&&Object(n.r)(O)?O({source:g.id,target:g.id}):this.edgeConfig,this.edge=k.addItem("edge",Object(r.a)({source:g.id,target:g.id},F),!1),this.source=g.id,this.addingEdge=!0,this.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(R){if(!this.key||this.keydown){var Q={x:R.x,y:R.y};this.graph.findById(this.source)?this.addingEdge&&this.edge&&this.graph.updateItem(this.edge,{target:Q},!1):this.addingEdge=!1}},cancelCreating:function(R){if(!this.key||this.keydown){var Q=this.graph,k=R.item;if(this.addingEdge&&R.target&&R.target.isCanvas&&R.target.isCanvas())return Q.removeItem(this.edge,!1),this.edge=null,void(this.addingEdge=!1);this.addingEdge&&this.edge===k&&(Q.removeItem(this.edge,!1),this.edge=null,this.addingEdge=!1)}},onKeyDown:function(R){var Q=R.key;Q&&(Q.toLowerCase()===this.key.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.addingEdge&&this.edge&&(this.graph.removeItem(this.edge,!1),this.addingEdge=!1,this.edge=null),this.keydown=!1}},"shortcuts-call":{getDefaultCfg:function(){return{trigger:"ctrl",combinedKey:"1",functionName:"fitView",functionParams:[]}},getEvents:function(){return ct.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="ctrl",console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '"+this.trigger+"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(R){var Q=R.key;if(Q){var k=this.trigger.toLowerCase(),g=Q.toLowerCase();this.triggerKeydown||(this.triggerKeydown=g===k||g==="control"&&k==="ctrl"||g==="ctrl"&&k==="control");var O=this.graph;if(!O[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '"+this.functionName+"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D"),{};if(!this.triggerKeydown||this.combinedKey){var F=this.combinedKey.toLowerCase();this.triggerKeydown&&(g===F||g==="control"&&F==="ctrl"||g==="ctrl"&&F==="control")&&(this.functionParams&&this.functionParams.length?O[this.functionName].apply(O,this.functionParams):O[this.functionName]())}else this.functionParams&&this.functionParams.length?O[this.functionName].apply(O,this.functionParams):O[this.functionName]()}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}}};Object(n.f)(it,function(_,R){Object(u.o)(R,_)})},function(i,y,t){"use strict";var n=t(1),u=t(5),p=t(0);function b(St){return(b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K})(St)}Object(u.r)("circle",{options:{size:u.e.defaultNode.size,style:{x:0,y:0,stroke:u.e.defaultNode.style.stroke,fill:u.e.defaultNode.style.fill,lineWidth:u.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:u.e.nodeLabel.style.fill,fontSize:u.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:u.e.defaultNode.linkPoints.size,lineWidth:u.e.defaultNode.linkPoints.lineWidth,fill:u.e.defaultNode.linkPoints.fill,stroke:u.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(n.a)({},u.e.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(K,dt){var mt=this.getOptions(K).icon,bt=mt===void 0?{}:mt,wt=this.getShapeStyle(K),J=Object(p.e)({},bt,K.icon),ct=dt.addShape("circle",{attrs:wt,className:this.type+"-keyShape",draggable:!0}),it=J.width,_=J.height;return J.show&&dt.addShape("image",{attrs:Object(n.a)({x:-it/2,y:-_/2},J),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(K,dt),ct},drawLinkPoints:function(K,dt){var mt=this.getOptions(K).linkPoints,bt=mt===void 0?{}:mt,wt=bt.top,J=bt.left,ct=bt.right,it=bt.bottom,_=bt.size,R=bt.r,Q=Object(n.c)(bt,["top","left","right","bottom","size","r"]),k=this.getSize(K)[0]/2;J&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Q),{x:-k,y:0,r:_/2||R||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),ct&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Q),{x:k,y:0,r:_/2||R||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),wt&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Q),{x:0,y:-k,r:_/2||R||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),it&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Q),{x:0,y:k,r:_/2||R||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(K){var dt=this.getOptions(K).style,mt={stroke:K.color},bt=Object(p.e)({},dt,mt),wt=this.getSize(K)[0]/2;return Object(n.a)({x:0,y:0,r:wt},bt)},update:function(K,dt){var mt=dt.getContainer(),bt=this.getSize(K),wt={stroke:K.color,r:bt[0]/2},J=dt.get("keyShape"),ct=Object(p.e)({},J.attr(),wt,K.style);this.updateShape(K,dt,ct,!0),this.updateLinkPoints(K,mt)}},"single-node"),Object(u.r)("rect",{options:{size:[100,30],style:{radius:0,stroke:u.e.defaultNode.style.stroke,fill:u.e.defaultNode.style.fill,lineWidth:u.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:u.e.nodeLabel.style.fill,fontSize:u.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:u.e.defaultNode.linkPoints.size,lineWidth:u.e.defaultNode.linkPoints.lineWidth,fill:u.e.defaultNode.linkPoints.fill,stroke:u.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(n.a)({},u.e.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(K,dt){var mt=this.getShapeStyle(K),bt=dt.addShape("rect",{attrs:mt,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawLinkPoints(K,dt),bt},drawLinkPoints:function(K,dt){var mt=this.getOptions(K).linkPoints,bt=mt===void 0?{}:mt,wt=bt.top,J=bt.left,ct=bt.right,it=bt.bottom,_=bt.size,R=bt.r,Q=Object(n.c)(bt,["top","left","right","bottom","size","r"]),k=this.getSize(K),g=k[0],O=k[1];J&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Q),{x:-g/2,y:0,r:_/2||R||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),ct&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Q),{x:g/2,y:0,r:_/2||R||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),wt&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Q),{x:0,y:-O/2,r:_/2||R||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),it&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Q),{x:0,y:O/2,r:_/2||R||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(K){var dt=this.getOptions(K).style,mt={stroke:K.color},bt=Object(p.A)({},dt,mt),wt=this.getSize(K),J=bt.width||wt[0],ct=bt.height||wt[1];return Object(n.a)({x:-J/2,y:-ct/2,width:J,height:ct},bt)},update:function(K,dt){var mt=dt.getContainer(),bt=this.getOptions({}).style,wt=this.getSize(K),J=dt.get("keyShape");K.size||(wt[0]=J.attr("width")||bt.width,wt[1]=J.attr("height")||bt.height);var ct={stroke:K.color,x:-wt[0]/2,y:-wt[1]/2,width:wt[0],height:wt[1]},it=Object(p.A)({},bt,J.attr(),ct);it=Object(p.A)(it,K.style),this.updateShape(K,dt,it,!1),this.updateLinkPoints(K,mt)}},"single-node"),Object(u.r)("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:u.e.defaultNode.style.stroke,fill:u.e.defaultNode.style.fill,lineWidth:u.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:u.e.nodeLabel.style.fill,fontSize:u.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:u.e.defaultNode.linkPoints.size,lineWidth:u.e.defaultNode.linkPoints.lineWidth,fill:u.e.defaultNode.linkPoints.fill,stroke:u.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(n.a)({},u.e.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(K,dt){var mt=this.getOptions(K).icon,bt=mt===void 0?{}:mt,wt=this.getShapeStyle(K),J=dt.addShape("ellipse",{attrs:wt,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0}),ct=bt.width,it=bt.height;return bt.show&&dt.addShape("image",{attrs:Object(n.a)({x:-ct/2,y:-it/2},bt),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(K,dt),J},drawLinkPoints:function(K,dt){var mt=this.getOptions(K).linkPoints,bt=mt===void 0?{}:mt,wt=bt.top,J=bt.left,ct=bt.right,it=bt.bottom,_=bt.size,R=bt.r,Q=Object(n.c)(bt,["top","left","right","bottom","size","r"]),k=this.getSize(K),g=k[0]/2,O=k[1]/2;J&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Q),{x:-g,y:0,r:_/2||R||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),ct&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Q),{x:g,y:0,r:_/2||R||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),wt&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Q),{x:0,y:-O,r:_/2||R||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),it&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Q),{x:0,y:O,r:_/2||R||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(K){var dt=this.getOptions(K).style,mt={stroke:K.color},bt=Object(p.A)({},dt,mt),wt=this.getSize(K),J=wt[0]/2,ct=wt[1]/2;return Object(n.a)({x:0,y:0,rx:J,ry:ct},bt)},update:function(K,dt){var mt=dt.getContainer(),bt=this.getOptions({}).style,wt=this.getSize(K),J={stroke:K.color,rx:wt[0]/2,ry:wt[1]/2},ct=dt.get("keyShape"),it=Object(p.A)({},bt,ct.attr(),J);it=Object(p.A)(it,K.style),this.updateShape(K,dt,it,!0),this.updateLinkPoints(K,mt)}},"single-node"),Object(u.r)("diamond",{options:{size:[80,80],style:{stroke:u.e.defaultNode.style.stroke,fill:u.e.defaultNode.style.fill,lineWidth:u.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:u.e.nodeLabel.style.fill,fontSize:u.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:u.e.defaultNode.linkPoints.size,lineWidth:u.e.defaultNode.linkPoints.lineWidth,fill:u.e.defaultNode.linkPoints.fill,stroke:u.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(n.a)({},u.e.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(K,dt){var mt=this.getOptions(K).icon,bt=mt===void 0?{}:mt,wt=this.getShapeStyle(K),J=dt.addShape("path",{attrs:wt,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),ct=bt.width,it=bt.height;return bt.show&&dt.addShape("image",{attrs:Object(n.a)({x:-ct/2,y:-it/2},bt),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(K,dt),J},drawLinkPoints:function(K,dt){var mt=this.getOptions(K).linkPoints,bt=mt===void 0?{}:mt,wt=bt.top,J=bt.left,ct=bt.right,it=bt.bottom,_=bt.size,R=bt.r,Q=Object(n.c)(bt,["top","left","right","bottom","size","r"]),k=this.getSize(K),g=k[0],O=k[1];J&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Q),{x:-g/2,y:0,r:_/2||R||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),ct&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Q),{x:g/2,y:0,r:_/2||R||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),wt&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Q),{x:0,y:-O/2,r:_/2||R||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),it&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Q),{x:0,y:O/2,r:_/2||R||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getPath:function(K){var dt=this.getSize(K),mt=dt[0],bt=dt[1];return[["M",0,-bt/2],["L",mt/2,0],["L",0,bt/2],["L",-mt/2,0],["Z"]]},getShapeStyle:function(K){var dt=this.getOptions(K).style,mt={stroke:K.color},bt=Object(p.A)({},dt,mt),wt=this.getPath(K);return Object(n.a)({path:wt},bt)},update:function(K,dt){var mt=dt.getContainer(),bt=this.getOptions({}).style,wt=this.getPath(K),J={stroke:K.color,path:wt},ct=dt.get("keyShape"),it=Object(p.A)({},bt,ct.attr(),J);it=Object(p.A)(it,K.style),this.updateShape(K,dt,it,!0),this.updateLinkPoints(K,mt)}},"single-node"),Object(u.r)("triangle",{options:{size:40,direction:"up",style:{stroke:u.e.defaultNode.style.stroke,fill:u.e.defaultNode.style.fill,lineWidth:u.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:u.e.nodeLabel.style.fill,fontSize:u.e.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:u.e.defaultNode.linkPoints.size,lineWidth:u.e.defaultNode.linkPoints.lineWidth,fill:u.e.defaultNode.linkPoints.fill,stroke:u.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:Object(n.a)({},u.e.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(K,dt){var mt=this.getOptions(K),bt=mt.icon,wt=bt===void 0?{}:bt,J=mt.direction,ct=this.getShapeStyle(K),it=K.direction||J,_=dt.addShape("path",{attrs:ct,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),R=wt.width,Q=wt.height,k=wt.show,g=wt.offset;if(k){var O=-R/2,F=-Q/2;it!=="up"&&it!=="down"||(F+=g),it!=="left"&&it!=="right"||(O+=g),dt.addShape("image",{attrs:Object(n.a)({x:O,y:F},wt),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})}return this.drawLinkPoints(K,dt),_},drawLinkPoints:function(K,dt){var mt=this.getOptions(K),bt=mt.linkPoints,wt=bt===void 0?{}:bt,J=mt.direction,ct=K.direction||J,it=wt.top,_=wt.left,R=wt.right,Q=wt.bottom,k=wt.size,g=wt.r,O=Object(n.c)(wt,["top","left","right","bottom","size","r"]),F=this.getSize(K)[0];if(_){var V=null,rt=F*Math.sin(1/3*Math.PI),ot=F*Math.sin(1/3*Math.PI);ct==="up"?V=[-ot,rt]:ct==="down"?V=[-ot,-rt]:ct==="left"&&(V=[-ot,ot-rt]),V&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},O),{x:V[0],y:V[1],r:k/2||g||5}),className:"link-point-left",name:"link-point-left"})}if(R){var st=null;rt=F*Math.sin(1/3*Math.PI),ot=F*Math.sin(1/3*Math.PI),ct==="up"?st=[ot,rt]:ct==="down"?st=[ot,-rt]:ct==="right"&&(st=[ot,ot-rt]),st&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},O),{x:st[0],y:st[1],r:k/2||g||5}),className:"link-point-right",name:"link-point-right"})}if(it){var Mt=null;rt=F*Math.sin(1/3*Math.PI),ot=F*Math.sin(1/3*Math.PI),ct==="up"?Mt=[ot-rt,-rt]:ct==="left"?Mt=[ot,-rt]:ct==="right"&&(Mt=[-ot,-rt]),Mt&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},O),{x:Mt[0],y:Mt[1],r:k/2||g||5}),className:"link-point-top",name:"link-point-top"})}if(Q){var yt=null;rt=F*Math.sin(1/3*Math.PI),ot=F*Math.sin(1/3*Math.PI),ct==="down"?yt=[-ot+rt,rt]:ct==="left"?yt=[ot,rt]:ct==="right"&&(yt=[-ot,rt]),yt&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},O),{x:yt[0],y:yt[1],r:k/2||g||5}),className:"link-point-bottom",name:"link-point-bottom"})}},getPath:function(K){var dt=this.getOptions(K).direction,mt=K.direction||dt,bt=this.getSize(K)[0],wt=bt*Math.sin(1/3*Math.PI),J=bt*Math.sin(1/3*Math.PI),ct=[["M",-J,wt],["L",0,-wt],["L",J,wt],["Z"]];return mt==="down"?ct=[["M",-J,-wt],["L",J,-wt],["L",0,wt],["Z"]]:mt==="left"?ct=[["M",-J,J-wt],["L",J,-J],["L",J,J],["Z"]]:mt==="right"&&(ct=[["M",J,J-wt],["L",-J,J],["L",-J,-J],["Z"]]),ct},getShapeStyle:function(K){var dt=this.getOptions(K).style,mt={stroke:K.color},bt=Object(p.A)({},dt,mt),wt=this.getPath(K);return Object(n.a)({path:wt},bt)},update:function(K,dt){var mt=dt.getContainer(),bt=this.getOptions({}).style,wt=this.getPath(K),J={stroke:K.color,path:wt},ct=dt.get("keyShape"),it=Object(p.A)({},bt,ct.attr(),J);it=Object(p.A)(it,K.style),this.updateShape(K,dt,it,!0),this.updateLinkPoints(K,mt)},updateLinkPoints:function(K,dt){var mt=this.getOptions({}),bt=mt.linkPoints,wt=mt.direction,J=K.direction||wt,ct=dt.find(function(pe){return pe.get("className")==="link-point-left"}),it=dt.find(function(pe){return pe.get("className")==="link-point-right"}),_=dt.find(function(pe){return pe.get("className")==="link-point-top"}),R=dt.find(function(pe){return pe.get("className")==="link-point-bottom"}),Q=bt,k=ct||it||_||R;k&&(Q=k.attr());var g=Object(p.A)({},Q,K.linkPoints),O=g.fill,F=g.stroke,V=g.lineWidth,rt=g.size/2;rt||(rt=g.r);var ot=K.linkPoints?K.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},st=ot.left,Mt=ot.right,yt=ot.top,xt=ot.bottom,Ot=this.getSize(K)[0],jt={r:rt,fill:O,stroke:F,lineWidth:V},Dt=null,zt=Ot*Math.sin(1/3*Math.PI),Tt=Ot*Math.sin(1/3*Math.PI);J==="up"?Dt=[-Tt,zt]:J==="down"?Dt=[-Tt,-zt]:J==="left"&&(Dt=[-Tt,Tt-zt]),Dt&&(ct?st||st===void 0?ct.attr(Object(n.a)(Object(n.a)({},jt),{x:Dt[0],y:Dt[1]})):ct.remove():st&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},jt),{x:Dt[0],y:Dt[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}));var Wt=null;J==="up"?Wt=[Tt,zt]:J==="down"?Wt=[Tt,-zt]:J==="right"&&(Wt=[Tt,Tt-zt]),Wt&&(it?Mt||Mt===void 0?it.attr(Object(n.a)(Object(n.a)({},jt),{x:Wt[0],y:Wt[1]})):it.remove():Mt&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},jt),{x:Wt[0],y:Wt[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}));var Ht=null;J==="up"?Ht=[Tt-zt,-zt]:J==="left"?Ht=[Tt,-zt]:J==="right"&&(Ht=[-Tt,-zt]),Ht&&(_?yt||yt===void 0?_.attr(Object(n.a)(Object(n.a)({},jt),{x:Ht[0],y:Ht[1]})):_.remove():yt&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},jt),{x:Ht[0],y:Ht[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}));var re=null;J==="down"?re=[-Tt+zt,zt]:J==="left"?re=[Tt,zt]:J==="right"&&(re=[-Tt,zt]),re&&(R?xt||xt===void 0?R.attr(Object(n.a)(Object(n.a)({},jt),{x:re[0],y:re[1]})):R.remove():xt&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},jt),{x:re[0],y:re[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))}},"single-node"),Object(u.r)("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:u.e.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf"},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(K,dt){var mt=this.getOptions(K).preRect,bt=mt===void 0?{}:mt,wt=this.getShapeStyle(K),J=this.getSize(K),ct=J[0],it=J[1],_=dt.addShape("rect",{attrs:wt,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),R=bt.show,Q=Object(n.c)(bt,["show"]);return R&&dt.addShape("rect",{attrs:Object(n.a)({x:-ct/2,y:-it/2,height:it},Q),className:"pre-rect",name:"pre-rect",draggable:!0}),this.drawLogoIcon(K,dt),this.drawStateIcon(K,dt),this.drawLinkPoints(K,dt),_},drawLogoIcon:function(K,dt){var mt=this.getOptions(K).logoIcon,bt=mt===void 0?{}:mt,wt=this.getSize(K)[0];if(bt.show){var J=bt.width,ct=bt.height,it=bt.x,_=bt.y,R=bt.offset,Q=Object(n.c)(bt,["width","height","x","y","offset"]);dt.addShape("image",{attrs:Object(n.a)(Object(n.a)({},Q),{x:it||-wt/2+J+R,y:_||-ct/2,width:J,height:ct}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(K,dt){var mt=this.getOptions(K).stateIcon,bt=mt===void 0?{}:mt,wt=this.getSize(K)[0];if(bt.show){var J=bt.width,ct=bt.height,it=bt.x,_=bt.y,R=bt.offset,Q=Object(n.c)(bt,["width","height","x","y","offset"]);dt.addShape("image",{attrs:Object(n.a)(Object(n.a)({},Q),{x:it||wt/2-J+R,y:_||-ct/2,width:J,height:ct}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(K,dt){var mt=this.getOptions(K).linkPoints,bt=mt===void 0?{}:mt,wt=bt.top,J=bt.left,ct=bt.right,it=bt.bottom,_=bt.size,R=bt.r,Q=Object(n.c)(bt,["top","left","right","bottom","size","r"]),k=this.getSize(K),g=k[0],O=k[1];J&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Q),{x:-g/2,y:0,r:_/2||R||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),ct&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Q),{x:g/2,y:0,r:_/2||R||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),wt&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Q),{x:0,y:-O/2,r:_/2||R||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),it&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Q),{x:0,y:O/2,r:_/2||R||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},drawLabel:function(K,dt){var mt=this.getOptions(K),bt=mt.labelCfg,wt=bt===void 0?{}:bt,J=mt.logoIcon,ct=J===void 0?{}:J,it=mt.descriptionCfg,_=it===void 0?{}:it,R=this.getSize(K)[0],Q=null,k=ct.show,g=ct.width,O=-R/2+wt.offset;k&&(O=-R/2+g+wt.offset);var F=wt.style,V=_.style,rt=_.paddingTop;return Object(p.x)(K.description)?(Q=dt.addShape("text",{attrs:Object(n.a)(Object(n.a)({},F),{x:O,y:-5,text:K.label}),className:"text-shape",name:"text-shape",draggable:!0}),dt.addShape("text",{attrs:Object(n.a)(Object(n.a)({},V),{x:O,y:17+(rt||0),text:K.description}),className:"rect-description",name:"rect-description",draggable:!0})):Q=dt.addShape("text",{attrs:Object(n.a)(Object(n.a)({},F),{x:O,y:7,text:K.label}),className:"text-shape",name:"text-shape",draggable:!0}),Q},getShapeStyle:function(K){var dt=this.getOptions(K).style,mt={stroke:K.color},bt=Object(p.A)({},dt,mt),wt=this.getSize(K),J=bt.width||wt[0],ct=bt.height||wt[1];return Object(n.a)({x:-J/2,y:-ct/2,width:J,height:ct},bt)},update:function(K,dt){var mt=this.getOptions(K),bt=mt.style,wt=bt===void 0?{}:bt,J=mt.labelCfg,ct=J===void 0?{}:J,it=mt.descriptionCfg,_=it===void 0?{}:it,R=this.getSize(K),Q=R[0],k=R[1];dt.get("keyShape").attr(Object(n.a)(Object(n.a)({},wt),{x:-Q/2,y:-k/2,width:Q,height:k}));var g=dt.getContainer(),O=g.find(function(Dn){return Dn.get("className")==="rect-logo-icon"}),F=O?O.attr():{},V=Object(p.A)({},F,K.logoIcon),rt=V.width;rt===void 0&&(rt=this.options.logoIcon.width);var ot=K.logoIcon?K.logoIcon.show:void 0,st=ct.offset,Mt=-Q/2+rt+st;ot||ot===void 0||(Mt=-Q/2+st);var yt=g.find(function(Dn){return Dn.get("className")==="node-label"}),xt=g.find(function(Dn){return Dn.get("className")==="rect-description"});if(K.label)if(yt){var Ot=K.labelCfg?K.labelCfg.style:{},jt=Object(p.A)({},yt.attr(),Ot);K.label&&(jt.text=K.label),jt.x=Mt,Object(p.x)(K.description)&&(jt.y=-5),xt&&(xt.resetMatrix(),xt.attr({x:Mt})),yt.resetMatrix(),yt.attr(jt)}else g.addShape("text",{attrs:Object(n.a)(Object(n.a)({},ct.style),{x:Mt,y:K.description?-5:7,text:K.label}),className:"node-label",name:"node-label",draggable:!0});if(Object(p.x)(K.description)){var Dt=_.paddingTop;if(xt){Ot=K.descriptionCfg?K.descriptionCfg.style:{};var zt=Object(p.A)({},xt.attr(),Ot);Object(p.x)(K.description)&&(zt.text=K.description),zt.x=Mt,xt.resetMatrix(),xt.attr(Object(n.a)(Object(n.a)({},zt),{y:17+(Dt||0)}))}else g.addShape("text",{attrs:Object(n.a)(Object(n.a)({},_.style),{x:Mt,y:17+(Dt||0),text:K.description}),className:"rect-description",name:"rect-description",draggable:!0})}var Tt=g.find(function(Dn){return Dn.get("className")==="pre-rect"});if(Tt){var Wt=Object(p.A)({},Tt.attr(),K.preRect);Tt.attr(Object(n.a)(Object(n.a)({},Wt),{x:-Q/2,y:-k/2,height:k}))}if(O)if(ot||ot===void 0){var Ht=V.width,re=V.height,pe=V.x,me=V.y,Se=V.offset,Le=Object(n.c)(V,["width","height","x","y","offset"]);O.attr(Object(n.a)(Object(n.a)({},Le),{x:pe||-Q/2+Ht+Se,y:me||-re/2,width:Ht,height:re}))}else O.remove();else ot&&this.drawLogoIcon(K,g);var Je=g.find(function(Dn){return Dn.get("className")==="rect-state-icon"}),On=Je?Je.attr():{},gn=Object(p.A)({},On,K.stateIcon);if(Je){gn.show||gn.show===void 0||Je.remove();var Wn=gn.width,kn=(re=gn.height,pe=gn.x,me=gn.y,gn.offset),Vn=Object(n.c)(gn,["width","height","x","y","offset"]);Je.attr(Object(n.a)(Object(n.a)({},Vn),{x:pe||Q/2-Wn+kn,y:me||-re/2,width:Wn,height:re}))}else gn.show&&this.drawStateIcon(K,g);this.updateLinkPoints(K,g)}},"single-node"),Object(u.r)("star",{options:{size:60,style:{stroke:u.e.defaultNode.style.stroke,fill:u.e.defaultNode.style.fill,lineWidth:u.e.defaultNode.style.lineWidth},labelCfg:{style:{fill:u.e.nodeLabel.style.fill,fontSize:u.e.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:u.e.defaultNode.linkPoints.size,lineWidth:u.e.defaultNode.linkPoints.lineWidth,fill:u.e.defaultNode.linkPoints.fill,stroke:u.e.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(n.a)({},u.e.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(K,dt){var mt=this.getOptions(K).icon,bt=mt===void 0?{}:mt,wt=this.getShapeStyle(K),J=dt.addShape("path",{attrs:wt,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),ct=bt.width,it=bt.height;return bt.show&&dt.addShape("image",{attrs:Object(n.a)({x:-ct/2,y:-it/2},bt),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(K,dt),J},drawLinkPoints:function(K,dt){var mt=this.getOptions(K).linkPoints,bt=mt===void 0?{}:mt,wt=bt.top,J=bt.left,ct=bt.right,it=bt.leftBottom,_=bt.rightBottom,R=bt.size,Q=bt.r,k=Object(n.c)(bt,["top","left","right","leftBottom","rightBottom","size","r"]),g=this.getSize(K)[0];if(ct){var O=Math.cos(.1*Math.PI)*g,F=Math.sin(.1*Math.PI)*g;dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},k),{x:O,y:-F,r:R/2||Q||5}),className:"link-point-right",name:"link-point-right"})}wt&&(O=Math.cos(.5*Math.PI)*g,F=Math.sin(.5*Math.PI)*g,dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},k),{x:O,y:-F,r:R/2||Q||5}),className:"link-point-top",name:"link-point-top"})),J&&(O=Math.cos(.9*Math.PI)*g,F=Math.sin(.9*Math.PI)*g,dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},k),{x:O,y:-F,r:R/2||Q||5}),className:"link-point-left",name:"link-point-left"})),it&&(O=Math.cos(1.3*Math.PI)*g,F=Math.sin(1.3*Math.PI)*g,dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},k),{x:O,y:-F,r:R/2||Q||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})),_&&(O=Math.cos(1.7*Math.PI)*g,F=Math.sin(1.7*Math.PI)*g,dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},k),{x:O,y:-F,r:R/2||Q||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"}))},getPath:function(K){for(var dt=this.getSize(K)[0],mt=3*dt/8,bt=K.innerR||mt,wt=[],J=0;J<5;J++){var ct=Math.cos((18+72*J)/180*Math.PI)*dt,it=Math.sin((18+72*J)/180*Math.PI)*dt,_=Math.cos((54+72*J)/180*Math.PI)*bt,R=Math.sin((54+72*J)/180*Math.PI)*bt;J===0?wt.push(["M",ct,-it]):wt.push(["L",ct,-it]),wt.push(["L",_,-R])}return wt.push(["Z"]),wt},getShapeStyle:function(K){var dt=this.getOptions(K).style,mt={stroke:K.color},bt=Object(p.A)({},dt,mt),wt=this.getPath(K);return Object(n.a)({path:wt},bt)},update:function(K,dt){var mt=dt.getContainer(),bt=this.getOptions({}).style,wt=this.getPath(K),J={stroke:K.color,path:wt},ct=dt.get("keyShape"),it=Object(p.A)({},bt,ct.attr(),J);it=Object(p.A)(it,K.style),this.updateShape(K,dt,it,!0),this.updateLinkPoints(K,mt)},updateLinkPoints:function(K,dt){var mt=this.getOptions({}).linkPoints,bt=dt.find(function(zt){return zt.get("className")==="link-point-left"}),wt=dt.find(function(zt){return zt.get("className")==="link-point-right"}),J=dt.find(function(zt){return zt.get("className")==="link-point-top"}),ct=dt.find(function(zt){return zt.get("className")==="link-point-left-bottom"}),it=dt.find(function(zt){return zt.get("className")==="link-point-right-bottom"}),_=mt,R=bt||wt||J||ct||it;R&&(_=R.attr());var Q=Object(p.A)({},_,K.linkPoints),k=Q.fill,g=Q.stroke,O=Q.lineWidth,F=Q.size/2;F||(F=Q.r);var V=K.linkPoints?K.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},rt=V.left,ot=V.right,st=V.top,Mt=V.leftBottom,yt=V.rightBottom,xt=this.getSize(K)[0],Ot={r:F,fill:k,stroke:g,lineWidth:O},jt=Math.cos(.1*Math.PI)*xt,Dt=Math.sin(.1*Math.PI)*xt;wt?ot||ot===void 0?wt.attr(Object(n.a)(Object(n.a)({},Ot),{x:jt,y:-Dt})):wt.remove():ot&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Ot),{x:jt,y:-Dt}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),jt=Math.cos(.5*Math.PI)*xt,Dt=Math.sin(.5*Math.PI)*xt,J?st||st===void 0?J.attr(Object(n.a)(Object(n.a)({},Ot),{x:jt,y:-Dt})):J.remove():st&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Ot),{x:jt,y:-Dt}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),jt=Math.cos(.9*Math.PI)*xt,Dt=Math.sin(.9*Math.PI)*xt,bt?rt||rt===void 0?bt.attr(Object(n.a)(Object(n.a)({},Ot),{x:jt,y:-Dt})):bt.remove():rt&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Ot),{x:jt,y:-Dt}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),jt=Math.cos(1.3*Math.PI)*xt,Dt=Math.sin(1.3*Math.PI)*xt,ct?Mt||Mt===void 0?ct.attr(Object(n.a)(Object(n.a)({},Ot),{x:jt,y:-Dt})):ct.remove():Mt&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Ot),{x:jt,y:-Dt}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0}),jt=Math.cos(1.7*Math.PI)*xt,Dt=Math.sin(1.7*Math.PI)*xt,it?yt||yt===void 0?it.attr(Object(n.a)(Object(n.a)({},Ot),{x:jt,y:-Dt})):ct.remove():yt&&dt.addShape("circle",{attrs:Object(n.a)(Object(n.a)({},Ot),{x:jt,y:-Dt}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0})}},"single-node");var c=function(K){var dt=K.x,mt=K.y;return{x:dt,y:mt,centerX:dt,centerY:mt,minX:dt,minY:mt,maxX:dt,maxY:mt,height:0,width:0}},S=function(K,dt){return 2*Math.abs(K.centerX-dt.centerX)<K.width+dt.width&&2*Math.abs(K.centerY-dt.centerY)<K.height+dt.height},I=function(K){for(var dt=[],mt={},bt=K.length,wt=0;wt<bt;wt++){var J=K[wt];J.id=J.x+"|||"+J.y,mt[J.id]=J,dt.push(J)}return dt},m=function(K){return K=I(K)},r=function(K,dt){return[K,{x:K.x,y:dt.y},dt]},s=function(K,dt){return K.width===0&&K.height===0?K:{centerX:K.centerX,centerY:K.centerY,minX:K.minX-dt,minY:K.minY-dt,maxX:K.maxX+dt,maxY:K.maxY+dt,height:K.height+2*dt,width:K.width+2*dt}},d=function(K,dt,mt){var bt=function(ct,it){var _=Math.abs(ct.x-it.centerX),R=Math.abs(ct.y-it.centerY);return _===0&&R===0?0:_/it.width>R/it.height}(dt,K);if(bt===0){var wt=K.centerX,J=K.centerY;return mt.y<dt.y?J=K.minY:mt.x>dt.x?wt=K.maxX:mt.x<dt.x?wt=K.minX:mt.x===dt.x&&(J=K.maxY),{x:wt,y:J}}return bt?{x:dt.x>K.centerX?K.maxX:K.minX,y:dt.y}:{x:dt.x,y:dt.y>K.centerY?K.maxY:K.minY}},C=function(K,dt){var mt=Math.min(K.minX,dt.minX),bt=Math.min(K.minY,dt.minY),wt=Math.max(K.maxX,dt.maxX),J=Math.max(K.maxY,dt.maxY);return{centerX:(mt+wt)/2,centerY:(bt+J)/2,minX:mt,minY:bt,maxX:wt,maxY:J,height:J-bt,width:wt-mt}},E=function(K){var dt=K.minX,mt=K.minY,bt=K.maxX,wt=K.maxY;return[{x:dt,y:mt},{x:bt,y:mt},{x:bt,y:wt},{x:dt,y:wt}]},A=function(K,dt){var mt=K.x,bt=K.y;return mt<dt.minX||mt>dt.maxX||bt<dt.minY||bt>dt.maxY},f=function(K,dt){return Math.abs(K.x-dt.x)+Math.abs(K.y-dt.y)},x=function(K,dt,mt,bt,wt){return f(K,dt)+f(K,mt)+function(J,ct){var it=0;return ct.forEach(function(_){_&&(J.x===_.x&&(it+=-2),J.y===_.y&&(it+=-2))}),it}(K,[dt,mt,bt,wt])},j=function(K,dt,mt,bt){var wt=mt.x-K.x,J=mt.y-K.y,ct=bt.x-K.x,it=bt.y-K.y,_=mt.x-dt.x,R=mt.y-dt.y,Q=bt.x-dt.x,k=bt.y-dt.y;return(wt*it-J*ct)*(_*k-R*Q)<=0&&(wt*R-J*_)*(ct*k-it*Q)<=0},P=function(K,dt,mt){if(mt.width===0&&mt.height===0)return!1;var bt=E(mt),wt=bt[0],J=bt[1],ct=bt[2],it=bt[3];return j(K,dt,wt,J)||j(K,dt,wt,it)||j(K,dt,J,ct)||j(K,dt,ct,it)},W=function(K,dt,mt,bt,wt,J,ct){var it=[],_=[dt],R={},Q={},k={};Q[dt.id]=0,k[dt.id]=x(dt,mt,dt);var g={};K.forEach(function(V){g[V.id]=V});for(var O=function(){var rt,ot,st,Mt,yt=1/0;if(_.forEach(function(Ot){k[Ot.id]<yt&&(yt=k[Ot.id],rt=Ot)}),rt===mt){var xt=[];return function Ot(jt,Dt,zt,Tt,Wt){Wt===void 0&&(Wt=0),jt.unshift(Dt[Tt]),zt[Tt]&&zt[Tt]!==Tt&&Wt<=100&&Ot(jt,Dt,zt,zt[Tt],Wt+1)}(xt,g,R,mt.id),{value:xt}}st=rt,(Mt=(ot=_).indexOf(st))>-1&&ot.splice(Mt,1),it.push(rt),function(Ot,jt,Dt,zt){var Tt=[];return Ot.forEach(function(Wt){Wt!==jt&&(Wt.x!==jt.x&&Wt.y!==jt.y||P(Wt,jt,Dt)||P(Wt,jt,zt)||Tt.push(Wt))}),I(Tt)}(K,rt,bt,wt).forEach(function(Ot){if(it.indexOf(Ot)===-1){_.indexOf(Ot)===-1&&_.push(Ot);var jt=k[rt.id]+f(rt,Ot);Q[Ot.id]&&jt>=Q[Ot.id]||(R[Ot.id]=rt.id,Q[Ot.id]=jt,k[Ot.id]=Q[Ot.id]+x(Ot,mt,dt,J,ct))}})};_.length;){var F=O();if(b(F)==="object")return F.value}return[dt,mt]},X=function(K,dt){var mt=[],bt=K[0];return mt.push("M"+bt.x+" "+bt.y),K.forEach(function(wt,J){var ct=K[J+1],it=K[J+2];if(ct&&it)if(function(k,g,O){return!(k.x===g.x&&g.x===O.x||k.y===g.y&&g.y===O.y)}(wt,ct,it)){var _=function(k,g,O,F){var V=f(k,g),rt=f(O,g);return V<F&&(F=V),rt<F&&(F=rt),[{x:g.x-F/V*(g.x-k.x),y:g.y-F/V*(g.y-k.y)},{x:g.x-F/rt*(g.x-O.x),y:g.y-F/rt*(g.y-O.y)}]}(wt,ct,it,dt),R=_[0],Q=_[1];mt.push("L"+R.x+" "+R.y),mt.push("Q"+ct.x+" "+ct.y+" "+Q.x+" "+Q.y),mt.push("L"+Q.x+" "+Q.y)}else mt.push("L"+ct.x+" "+ct.y);else ct&&mt.push("L"+ct.x+" "+ct.y)}),mt.join("")},$=function(K,dt,mt,bt,wt){var J,ct;if(mt&&mt.getType()?mt.getType()==="combo"?((J=mt.getKeyShape().getCanvasBBox()||c(K)).centerX=(J.minX+J.maxX)/2,J.centerY=(J.minY+J.maxY)/2):J=mt.getBBox():J=c(K),bt&&bt.getType()?bt.getType()==="combo"?((ct=bt.getKeyShape().getCanvasBBox()||c(dt)).centerX=(ct.minX+ct.maxX)/2,ct.centerY=(ct.minY+ct.maxY)/2):ct=bt&&bt.getBBox():ct=c(dt),S(J,ct))return m(r(K,dt));var it=s(J,wt),_=s(ct,wt);if(S(it,_))return m(r(K,dt));var R=d(it,K,dt),Q=d(_,dt,K),k=function(ot){ot===void 0&&(ot=[]);var st=[],Mt=[];ot.forEach(function(Dt){st.push(Dt.x),Mt.push(Dt.y)});var yt=Math.min.apply(Math,st),xt=Math.max.apply(Math,st),Ot=Math.min.apply(Math,Mt),jt=Math.max.apply(Math,Mt);return{centerX:(yt+xt)/2,centerY:(Ot+jt)/2,maxX:xt,maxY:jt,minX:yt,minY:Ot,height:jt-Ot,width:xt-yt}}([R,Q]),g=C(it,k),O=C(_,k),F=[];F=(F=F.concat(E(g))).concat(E(O));var V={x:(K.x+dt.x)/2,y:(K.y+dt.y)/2};[k,g,O].forEach(function(ot){F=F.concat(function(st,Mt){return function(yt,xt){return xt<yt.minX||xt>yt.maxX?[]:[{x:xt,y:yt.minY},{x:xt,y:yt.maxY}]}(st,Mt.x).concat(function(yt,xt){return xt<yt.minY||xt>yt.maxY?[]:[{x:yt.minX,y:xt},{x:yt.maxX,y:xt}]}(st,Mt.y))}(ot,V).filter(function(st){return A(st,it)&&A(st,_)}))}),[{x:R.x,y:Q.y},{x:Q.x,y:R.y}].forEach(function(ot){A(ot,it)&&A(ot,_)&&F.push(ot)}),F.unshift(R),F.push(Q),F=I(F);var rt=W(F,R,Q,J,ct,K,dt);return rt.unshift(K),rt.push(dt),m(rt)};function ft(St){return(ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K})(St)}var Z={offset:20,maxAllowedDirectionChange:90,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:function(K,dt){return Math.abs(K.x-dt.x)+Math.abs(K.y-dt.y)},fallbackRoute:function(K,dt,mt,bt,wt){return m($(K,dt,mt,bt,wt.offset))}},lt=function(K,dt){var mt=Math.floor(Math.abs(K/dt));return mt<0?0:(K<0?-1:1)*mt},pt=function(K,dt){var mt=dt.x-K.x,bt=dt.y-K.y;return mt||bt?(360+180*Math.atan2(bt,mt)/Math.PI)%360:0},gt=function(K,dt){var mt=Math.abs(K-dt);return mt>180?360-mt:mt},ut=function(K,dt,mt){for(var bt=1/0,wt=0,J=dt.length;wt<J;wt++){var ct=mt(K,dt[wt]);ct<bt&&(bt=ct)}return bt},Bt=function(K,dt,mt,bt,wt){var J=[];if(!mt)return J;var ct=wt.directions,it=wt.offset,_=mt.getBBox(),R=dt.x>_.minX&&dt.x<_.maxX&&dt.y>_.minY&&dt.y<_.maxY,Q=s(_,it);for(var k in Q)Q[k]=lt(Q[k],wt.gridSize);if(R)for(var g=0,O=ct;g<O.length;g++){var F=O[g],V=[[{x:Q.minX,y:Q.minY},{x:Q.maxX,y:Q.minY}],[{x:Q.minX,y:Q.minY},{x:Q.minX,y:Q.maxY}],[{x:Q.maxX,y:Q.minY},{x:Q.maxX,y:Q.maxY}],[{x:Q.minX,y:Q.maxY},{x:Q.maxX,y:Q.maxY}]];for(k=0;k<4;k++){var rt,ot=V[k];(rt=u.n.getLineIntersect(K,{x:K.x+F.stepX*Q.width,y:K.y+F.stepY*Q.height},ot[0],ot[1]))&&!P(K,rt,_)&&(rt.id=rt.x+"|||"+rt.y,J.push(rt))}}else(rt=d(Q,K,bt)).id=rt.x+"|||"+rt.y,J.push(rt);return J},Lt=function(K,dt,mt,bt,wt){var J=Object(p.e)(Z,wt);J.obstacles=J.obstacles||[];var ct=function(Ot,jt,Dt){var zt={};return Ot.forEach(function(Tt){if(Tt)for(var Wt=s(Tt.getBBox(),Dt),Ht=lt(Wt.minX,jt);Ht<=lt(Wt.maxX,jt);Ht+=1)for(var re=lt(Wt.minY,jt);re<=lt(Wt.maxY,jt);re+=1)zt[Ht+"|||"+re]=!0}),zt}(J.obstacles.concat([mt,bt]),J.gridSize,J.offset),it={x:lt(K.x,J.gridSize),y:lt(K.y,J.gridSize)},_={x:lt(dt.x,J.gridSize),y:lt(dt.y,J.gridSize)};K.id=it.x+"|||"+it.y,dt.id=_.x+"|||"+_.y;var R=Bt(it,K,mt,_,J),Q=Bt(_,dt,bt,it,J);R.forEach(function(Ot){delete ct[Ot.id]}),Q.forEach(function(Ot){delete ct[Ot.id]});for(var k={},g={},O={},F={},V={},rt=0;rt<R.length;rt++){var ot=R[rt];k[ot.id]=ot,F[ot.id]=0,V[ot.id]=ut(ot,Q,J.distFunc)}for(var st=function(jt,Dt){var zt,Tt=pt(jt,Dt);if(O[jt.id]){var Wt=pt({x:parseFloat(O[jt.id].split("|||")[0]),y:parseFloat(O[jt.id].split("|||")[1])},jt);zt=gt(Wt,Tt)}else{var Ht=pt(it,jt);zt=gt(Ht,Tt)}return zt},Mt=J.maximumLoops,yt=function(){var jt,Dt=1/0;for(var zt in k)V[zt]<=Dt&&(Dt=V[zt],jt=k[zt]);if(!jt)return"break";if(Q.findIndex(function(Se){return Se.x===jt.x&&Se.y===jt.y})>-1)return{value:function(Se){var Le=[dt],Je={x:parseFloat(Se.split("|||")[0]),y:parseFloat(Se.split("|||")[1]),id:Se};for(st(Je,_)&&Le.unshift({x:Je.x===_.x?dt.x:Je.x*J.gridSize,y:Je.y===_.y?dt.y:Je.y*J.gridSize});O[Se]&&O[Se]!==Se;){var On={x:parseFloat(Se.split("|||")[0]),y:parseFloat(Se.split("|||")[1]),id:Se},gn=O[Se],Wn={x:parseFloat(gn.split("|||")[0]),y:parseFloat(gn.split("|||")[1]),id:gn};st(Wn,On)&&Le.unshift({x:Wn.x===On.x?Le[0].x:Wn.x*J.gridSize,y:Wn.y===On.y?Le[0].y:Wn.y*J.gridSize}),Se=gn}var kn=parseFloat(Se.split("|||")[0]),Vn=parseFloat(Se.split("|||")[1]);return Le[0].x=kn===it.x?K.x:Le[0].x,Le[0].y=Vn===it.y?K.y:Le[0].y,Le.unshift(K),Le}(jt.id)};delete k[jt.id],g[jt.id]=!0;for(var Tt=0;Tt<J.directions.length;Tt++){var Wt=J.directions[Tt],Ht={x:jt.x+Wt.stepX,y:jt.y+Wt.stepY,id:jt.x+Wt.stepX+"|||"+(jt.y+Wt.stepY)};if(!g[Ht.id]){var re=st(jt,Ht);if(!(re>J.maxAllowedDirectionChange||ct[Ht.id])){k[Ht.id]||(k[Ht.id]=Ht);var pe=J.distFunc(jt,Ht)+(isNaN(J.penalties[re])?J.gridSize:J.penalties[re]),me=F[jt.id]+pe;F[Ht.id]&&me>=F[Ht.id]||(O[Ht.id]=jt.id,F[Ht.id]=me,V[Ht.id]=me+ut(Ht,Q,J.distFunc))}}}Mt-=1};Object.keys(k).length>0&&Mt>0;){var xt=yt();if(ft(xt)==="object")return xt.value;if(xt==="break")break}return J.fallbackRoute(K,dt,mt,bt,J)};Object(u.q)("polyline",{options:{color:u.e.defaultEdge.color,size:u.e.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:u.e.defaultEdge.style.stroke,lineAppendWidth:u.e.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:u.e.edgeLabel.style.fill,fontSize:u.e.edgeLabel.style.fontSize}},routeCfg:{obstacles:[],maxAllowedDirectionChange:90,maximumLoops:500,gridSize:10},stateStyles:Object(n.a)({},u.e.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(K,dt){var mt=this.getShapeStyle(K);return mt.radius===0&&delete mt.radius,dt.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:mt})},getShapeStyle:function(K){var dt=this.options.style,mt={stroke:K.color},bt=Object(p.A)({},dt,mt,K.style);K=this.getPathPoints(K),this.radius=bt.radius,this.offset=bt.offset;var wt=K.startPoint,J=K.endPoint,ct=this.getControlPoints(K),it=[wt];ct&&(it=it.concat(ct)),it.push(J);var _=K.sourceNode,R=K.targetNode,Q=bt.radius,k=this.options.routeCfg;k||(k={}),k.offset=bt.offset;var g=this.getPath(it,_,R,Q,k);return(Object(p.m)(g)&&g.length<=1||Object(p.x)(g)&&g.indexOf("L")===-1)&&(g="M0 0, L0 0"),(isNaN(wt.x)||isNaN(wt.y)||isNaN(J.x)||isNaN(J.y))&&(g="M0 0, L0 0"),Object(p.A)({},u.e.defaultEdge.style,bt,{lineWidth:K.size,path:g})},updateShapeStyle:function(K,dt){var mt=dt.getContainer(),bt={stroke:K.color},wt=mt.find(function(st){return st.get("className")==="edge-shape"})||dt.getKeyShape(),J=K.size,ct=(K=this.getPathPoints(K)).startPoint,it=K.endPoint,_=this.getControlPoints(K),R=[ct];_&&(R=R.concat(_)),R.push(it);var Q=wt.attr(),k=Object(p.A)({},bt,Q,K.style),g=K.sourceNode,O=K.targetNode,F=k.radius,V=this.options.routeCfg;V||(V={}),V.offset=k.offset;var rt=this.getPath(R,g,O,F,V);(Object(p.m)(rt)&&rt.length<=1||Object(p.x)(rt)&&rt.indexOf("L")===-1)&&(rt="M0 0, L0 0"),(isNaN(ct.x)||isNaN(ct.y)||isNaN(it.x)||isNaN(it.y))&&(rt="M0 0, L0 0"),Q.endArrow&&k.endArrow===!1&&(K.style.endArrow={path:""}),Q.startArrow&&k.startArrow===!1&&(K.style.startArrow={path:""});var ot=Object(p.A)(bt,wt.attr(),{lineWidth:J,path:rt},K.style);wt&&wt.attr(ot)},getPath:function(K,dt,mt,bt,wt){var J;if(!wt.offset||K.length>2){if(bt)return X(K,bt);var ct=[];return Object(p.f)(K,function(it,_){_===0?ct.push(["M",it.x,it.y]):ct.push(["L",it.x,it.y])}),ct}return bt?(J=Lt(K[0],K[K.length-1],dt,mt,wt),X(J,bt)):(J=Lt(K[0],K[K.length-1],dt,mt,wt),u.n.pointsToPolygon(J))}},"single-edge")}]).default})},Sq3C:function(qe,Pt,w){var H=w("sKgW"),i=w("zoYe"),y=w("wy8a"),t=w("quyA"),n=w("Z1HP"),u=w("Em2t"),p=Math.ceil;function b(c,S){S=S===void 0?" ":i(S);var I=S.length;if(I<2)return I?H(S,c):S;var m=H(S,p(c/n(S)));return t(S)?y(u(m),0,c).join(""):m.slice(0,c)}qe.exports=b},Sxd8:function(qe,Pt,w){var H=w("ZCgT");function i(y){var t=H(y),n=t%1;return t===t?n?t-n:t:0}qe.exports=i},TEat:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return m});var H=w("mrSG"),i=w("zJSt"),y=w("YuPD"),t=w("w02o"),n=w("tKoa");function u(r,s,d){var C=d.map(function(f){return f[s]}).filter(function(f){return f!==void 0}),E=C.length>0?Math.max.apply(Math,C):0,A=Math.abs(r)%360;return A?E*360/A:E}function p(r){var s=r.chart,d=r.options,C=d.data,E=d.barStyle,A=d.color,f=d.tooltip,x=d.colorField,j=d.type,P=d.xField,W=d.yField;s.data(C);var X=Object(y.b)({},r,{options:{tooltip:f,seriesField:x,interval:{style:E,color:A,shape:j==="line"?"line":"intervel"},minColumnWidth:d.minBarWidth,maxColumnWidth:d.maxBarWidth,columnBackground:d.barBackground}});return Object(n.c)(X),j==="line"&&Object(n.e)({chart:s,options:{xField:P,yField:W,seriesField:x,point:{shape:"circle",color:A}}}),r}function b(r){var s,d=r.options,C=d.yField,E=d.data,A=d.maxAngle;return Object(y.e)(Object(t.f)((s={},s[C]={min:0,max:u(A,C,E)},s)))(r)}function c(r){var s=r.chart,d=r.options,C=d.radius,E=d.innerRadius,A=d.startAngle,f=d.endAngle;return s.coordinate({type:"polar",cfg:{radius:C,innerRadius:E,startAngle:A,endAngle:f}}).transpose(),r}function S(r){var s=r.chart,d=r.options,C=d.xField,E=d.xAxis;return s.axis(C,E),r}function I(r){return Object(y.e)(p,b,S,c,t.c,t.a,t.j,t.k,t.d,Object(t.b)())(r)}var m=function(r){Object(H.b)(s,r);function s(){var d=r!==null&&r.apply(this,arguments)||this;return d.type="radial-bar",d}return s.prototype.changeData=function(d){this.updateOption({data:d}),b({chart:this.chart,options:this.options}),this.chart.changeData(d)},s.prototype.getDefaultOptions=function(){return Object(y.b)({},r.prototype.getDefaultOptions.call(this),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240})},s.prototype.getSchemaAdaptor=function(){return I},s}(i.a)},U8jP:function(qe,Pt,w){"use strict";w.r(Pt),w.d(Pt,"version",function(){return p});var H=w("R5nb");w.d(Pt,"Shape",function(){return H});var i=w("aFU3");for(var y in i)["default","Canvas","Group","Shape","getArcParams","version"].indexOf(y)<0&&function(b){w.d(Pt,b,function(){return i[b]})}(y);var t=w("sYIZ");w.d(Pt,"Canvas",function(){return t.a});var n=w("wq2r");w.d(Pt,"Group",function(){return n.a});var u=w("nCnq");w.d(Pt,"getArcParams",function(){return u.a});var p="0.5.6"},"UNi/":function(qe,Pt){function w(H,i){for(var y=-1,t=Array(H);++y<H;)t[y]=i(y);return t}qe.exports=w},Uo7R:function(qe,Pt,w){"use strict";var H=w("mrSG"),i=w("zJSt"),y=w("w02o"),t=w("YuPD"),n=w("tKoa"),u=w("iTfj"),p={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(gt){return gt.id},source:function(gt){return gt.source},target:function(gt){return gt.target},sourceWeight:function(gt){return gt.value||1},targetWeight:function(gt){return gt.value||1},sortBy:null};function b(pt,gt,ut){Object(u.forIn)(pt,function(Bt,Lt){Bt.inEdges=gt.filter(function(St){return""+ut.target(St)==""+Lt}),Bt.outEdges=gt.filter(function(St){return""+ut.source(St)==""+Lt}),Bt.edges=Bt.outEdges.concat(Bt.inEdges),Bt.frequency=Bt.edges.length,Bt.value=0,Bt.inEdges.forEach(function(St){Bt.value+=ut.targetWeight(St)}),Bt.outEdges.forEach(function(St){Bt.value+=ut.sourceWeight(St)})})}function c(pt,gt){var ut={weight:function(St,K){return K.value-St.value},frequency:function(St,K){return K.frequency-St.frequency},id:function(St,K){return(""+gt.id(St)).localeCompare(""+gt.id(K))}},Bt=ut[gt.sortBy];!Bt&&Object(u.isFunction)(gt.sortBy)&&(Bt=gt.sortBy),Bt&&pt.sort(Bt)}function S(pt,gt){var ut=pt.length;if(!ut)throw new TypeError("Invalid nodes: it's empty!");if(gt.weight){var Bt=gt.nodePaddingRatio;if(Bt<0||Bt>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var Lt=Bt/(2*ut),St=gt.nodeWidthRatio;if(St<=0||St>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var K=0;pt.forEach(function(mt){K+=mt.value}),pt.forEach(function(mt){mt.weight=mt.value/K,mt.width=mt.weight*(1-Bt),mt.height=St}),pt.forEach(function(mt,bt){for(var wt=0,J=bt-1;J>=0;J--)wt+=pt[J].width+2*Lt;var ct=mt.minX=Lt+wt,it=mt.maxX=mt.minX+mt.width,_=mt.minY=gt.y-St/2,R=mt.maxY=_+St;mt.x=[ct,it,it,ct],mt.y=[_,_,R,R]})}else{var dt=1/ut;pt.forEach(function(mt,bt){mt.x=(bt+.5)*dt,mt.y=gt.y})}return pt}function I(pt,gt,ut){if(ut.weight){var Bt={};Object(u.forIn)(pt,function(Lt,St){Bt[St]=Lt.value}),gt.forEach(function(Lt){var St=ut.source(Lt),K=ut.target(Lt),dt=pt[St],mt=pt[K];if(dt&&mt){var bt=Bt[St],wt=ut.sourceWeight(Lt),J=dt.minX+(dt.value-bt)/dt.value*dt.width,ct=J+wt/dt.value*dt.width;Bt[St]-=wt;var it=Bt[K],_=ut.targetWeight(Lt),R=mt.minX+(mt.value-it)/mt.value*mt.width,Q=R+_/mt.value*mt.width;Bt[K]-=_;var k=ut.y;Lt.x=[J,ct,R,Q],Lt.y=[k,k,k,k],Lt.source=dt,Lt.target=mt}})}else gt.forEach(function(Lt){var St=pt[ut.source(Lt)],K=pt[ut.target(Lt)];St&&K&&(Lt.x=[St.x,K.x],Lt.y=[St.y,K.y],Lt.source=St,Lt.target=K)});return gt}function m(pt){return Object(u.assign)({},p,pt)}function r(pt,gt){var ut=m(pt),Bt={},Lt=gt.nodes,St=gt.links;Lt.forEach(function(mt){var bt=ut.id(mt);Bt[bt]=mt}),b(Bt,St,ut),c(Lt,ut);var K=S(Lt,ut),dt=I(Bt,St,ut);return{nodes:K,links:dt}}var s=w("DyAw"),d="x",C="y",E="name",A="source";function f(pt){var gt=pt.options,ut=gt.data,Bt=gt.sourceField,Lt=gt.targetField,St=gt.weightField,K=gt.nodePaddingRatio,dt=gt.nodeWidthRatio,mt=Object(s.b)(ut,Bt,Lt,St),bt=r({weight:!0,nodePaddingRatio:K,nodeWidthRatio:dt},mt),wt=bt.nodes,J=bt.links,ct=wt.map(function(_){return{id:_.id,x:_.x,y:_.y,name:_.name}}),it=J.map(function(_){return{source:_.source.name,target:_.target.name,x:_.x,y:_.y,value:_.value}});return Object(H.a)(Object(H.a)({},pt),{ext:Object(H.a)(Object(H.a)({},pt.ext),{chordData:{nodesData:ct,edgesData:it}})})}function x(pt){var gt,ut=pt.chart;return ut.scale((gt={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}},gt[E]={sync:"color"},gt[A]={sync:"color"},gt)),pt}function j(pt){var gt=pt.chart;return gt.axis(!1),pt}function P(pt){var gt=pt.chart;return gt.legend(!1),pt}function W(pt){var gt=pt.chart;return gt.tooltip({showTitle:!1,showMarkers:!1}),pt}function X(pt){var gt=pt.chart;return gt.coordinate("polar").reflect("y"),pt}function $(pt){var gt=pt.chart,ut=pt.options,Bt=pt.ext.chordData.nodesData,Lt=ut.nodeStyle,St=ut.label,K=gt.createView();return K.data(Bt),Object(n.f)({chart:K,options:{xField:d,yField:C,seriesField:E,polygon:{style:Lt},label:St,tooltip:!1}}),pt}function ft(pt){var gt=pt.chart,ut=pt.options,Bt=pt.ext.chordData.edgesData,Lt=ut.edgeStyle,St=ut.tooltip,K=gt.createView();K.data(Bt);var dt={xField:d,yField:C,seriesField:A,edge:{style:Lt,shape:"arc"},tooltip:St};return Object(n.b)({chart:K,options:dt}),pt}function Z(pt){return Object(t.e)(f,X,x,j,P,W,ft,$,y.c,y.a,y.j)(pt)}var lt=function(pt){Object(H.b)(gt,pt);function gt(){var ut=pt!==null&&pt.apply(this,arguments)||this;return ut.type="chord",ut}return gt.prototype.getDefaultOptions=function(){return{nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(Bt,Lt){var St=(Bt[0]+Bt[1])/2,K=St>.5?-4:4;return{labelEmit:!0,style:{fill:"#8c8c8c"},offsetX:K,content:Lt}}},tooltip:{fields:["source","target","value"],formatter:function(Bt){var Lt=Bt.source,St=Bt.target,K=Bt.value;return{name:Lt+" -> "+St,value:K}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05}},gt.prototype.getSchemaAdaptor=function(){return Z},gt}(i.a)},Urep:function(qe,Pt,w){},V6Ve:function(qe,Pt,w){var H=w("kekF"),i=H(Object.keys,Object);qe.exports=i},VaNO:function(qe,Pt){function w(H){return this.__data__.has(H)}qe.exports=w},WOQw:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return u});var H=w("mrSG"),i=w("iTfj"),y=w("YuPD");function t(p,b){var c=p.xField,S=p.yField,I=p.colorField,m=p.shapeField,r=p.sizeField,s=p.styleField,d=p.rawFields,C=d===void 0?[]:d,E=[];if(b==="color")E=Object(H.d)([I||c],C);else if(b==="shape")E=Object(H.d)([m||c],C);else if(b==="size")E=Object(H.d)([r||c],C);else{E=Object(H.d)([c,S,I,m,r,s],C);var A=["x","y","color","shape","size","style"].indexOf(b),f=E[A];E.splice(A,1),E.unshift(f)}return Object(i.uniq)(E.filter(function(x){return!!x}))}function n(p,b){if(!!b)return function(){for(var c=[],S=0;S<arguments.length;S++)c[S]=arguments[S];var I={};return p.forEach(function(m,r){I[m]=c[r]}),delete I.undefined,b(I)}}function u(p){var b=p.chart,c=p.options,S=c.type,I=c.args,m=c.mapping,r=c.xField,s=c.yField,d=c.colorField,C=c.shapeField,E=c.sizeField,A=c.tooltipFields,f=c.label,x=c.state;if(!m)return p;var j=m.color,P=m.shape,W=m.size,X=m.style,$=m.tooltip,ft=b[S](I).position(r+"*"+s);if(Object(i.isString)(j))d?ft.color(d,j):ft.color(j);else if(Object(i.isFunction)(j)){var Z=t(c,"color");ft.color(Z.join("*"),n(Z,j))}else d&&ft.color(d,j);if(Object(i.isString)(P))C?ft.shape(C,[P]):ft.shape(P);else if(Object(i.isFunction)(P)){var Z=t(c,"shape");ft.shape(Z.join("*"),n(Z,P))}else C&&ft.shape(C,P);if(Object(i.isNumber)(W))E?ft.size(E,W):ft.size(W);else if(Object(i.isFunction)(W)){var Z=t(c,"size");ft.size(Z.join("*"),n(Z,W))}else E&&ft.size(E,W);if(Object(i.isFunction)(X)){var Z=t(c,"style");ft.style(Z.join("*"),n(Z,X))}else Object(i.isObject)(X)&&ft.style(X);if(A===!1?ft.tooltip(!1):Object(i.isEmpty)(A)||ft.tooltip(A.join("*"),n(A,$)),f===!1)ft.label(!1);else if(f){var lt=f.callback,pt=f.fields,gt=Object(H.c)(f,["callback","fields"]);ft.label({fields:pt||[s],callback:lt,cfg:Object(y.o)(gt)})}return x&&ft.state(x),[r,s].filter(function(ut){return ut!==d}).forEach(function(ut){b.legend(ut,!1)}),Object(H.a)(Object(H.a)({},p),{ext:{geometry:ft}})}},WaYH:function(qe,Pt,w){"use strict";var H=w("wx14"),i=w("rePB"),y=w("Ff2n"),t=w("VTBJ"),n=w("1OyB"),u=w("vuIU"),p=w("JX7q"),b=w("Ji7U"),c=w("LK+K"),S=w("q1tI"),I=w("TSYQ"),m=w.n(I),r=w("sboe"),s=w("OZM5"),d=function($){for(var ft=$.prefixCls,Z=$.level,lt=$.isStart,pt=$.isEnd,gt="".concat(ft,"-indent-unit"),ut=[],Bt=0;Bt<Z;Bt+=1){var Lt;ut.push(S.createElement("span",{key:Bt,className:m()(gt,(Lt={},Object(i.a)(Lt,"".concat(gt,"-start"),lt[Bt]),Object(i.a)(Lt,"".concat(gt,"-end"),pt[Bt]),Lt))}))}return S.createElement("span",{"aria-hidden":"true",className:"".concat(ft,"-indent")},ut)},C=d,E=w("815F"),A="open",f="close",x="---",j=function(X){Object(b.a)(ft,X);var $=Object(c.a)(ft);function ft(){var Z;return Object(n.a)(this,ft),Z=$.apply(this,arguments),Z.state={dragNodeHighlight:!1},Z.onSelectorClick=function(lt){var pt=Z.props.context.onNodeClick;pt(lt,Object(E.b)(Z.props)),Z.isSelectable()?Z.onSelect(lt):Z.onCheck(lt)},Z.onSelectorDoubleClick=function(lt){var pt=Z.props.context.onNodeDoubleClick;pt(lt,Object(E.b)(Z.props))},Z.onSelect=function(lt){if(!Z.isDisabled()){var pt=Z.props.context.onNodeSelect;lt.preventDefault(),pt(lt,Object(E.b)(Z.props))}},Z.onCheck=function(lt){if(!Z.isDisabled()){var pt=Z.props,gt=pt.disableCheckbox,ut=pt.checked,Bt=Z.props.context.onNodeCheck;if(!(!Z.isCheckable()||gt)){lt.preventDefault();var Lt=!ut;Bt(lt,Object(E.b)(Z.props),Lt)}}},Z.onMouseEnter=function(lt){var pt=Z.props.context.onNodeMouseEnter;pt(lt,Object(E.b)(Z.props))},Z.onMouseLeave=function(lt){var pt=Z.props.context.onNodeMouseLeave;pt(lt,Object(E.b)(Z.props))},Z.onContextMenu=function(lt){var pt=Z.props.context.onNodeContextMenu;pt(lt,Object(E.b)(Z.props))},Z.onDragStart=function(lt){var pt=Z.props.context.onNodeDragStart;lt.stopPropagation(),Z.setState({dragNodeHighlight:!0}),pt(lt,Object(p.a)(Z));try{lt.dataTransfer.setData("text/plain","")}catch(gt){}},Z.onDragEnter=function(lt){var pt=Z.props.context.onNodeDragEnter;lt.preventDefault(),lt.stopPropagation(),pt(lt,Object(p.a)(Z))},Z.onDragOver=function(lt){var pt=Z.props.context.onNodeDragOver;lt.preventDefault(),lt.stopPropagation(),pt(lt,Object(p.a)(Z))},Z.onDragLeave=function(lt){var pt=Z.props.context.onNodeDragLeave;lt.stopPropagation(),pt(lt,Object(p.a)(Z))},Z.onDragEnd=function(lt){var pt=Z.props.context.onNodeDragEnd;lt.stopPropagation(),Z.setState({dragNodeHighlight:!1}),pt(lt,Object(p.a)(Z))},Z.onDrop=function(lt){var pt=Z.props.context.onNodeDrop;lt.preventDefault(),lt.stopPropagation(),Z.setState({dragNodeHighlight:!1}),pt(lt,Object(p.a)(Z))},Z.onExpand=function(lt){var pt=Z.props,gt=pt.loading,ut=pt.context.onNodeExpand;gt||ut(lt,Object(E.b)(Z.props))},Z.setSelectHandle=function(lt){Z.selectHandle=lt},Z.getNodeState=function(){var lt=Z.props.expanded;return Z.isLeaf()?null:lt?A:f},Z.hasChildren=function(){var lt=Z.props.eventKey,pt=Z.props.context.keyEntities,gt=pt[lt]||{},ut=gt.children;return!!(ut||[]).length},Z.isLeaf=function(){var lt=Z.props,pt=lt.isLeaf,gt=lt.loaded,ut=Z.props.context.loadData,Bt=Z.hasChildren();return pt===!1?!1:pt||!ut&&!Bt||ut&&gt&&!Bt},Z.isDisabled=function(){var lt=Z.props.disabled,pt=Z.props.context.disabled;return!!(pt||lt)},Z.isCheckable=function(){var lt=Z.props.checkable,pt=Z.props.context.checkable;return!pt||lt===!1?!1:pt},Z.syncLoadData=function(lt){var pt=lt.expanded,gt=lt.loading,ut=lt.loaded,Bt=Z.props.context,Lt=Bt.loadData,St=Bt.onNodeLoad;gt||Lt&&pt&&!Z.isLeaf()&&!Z.hasChildren()&&!ut&&St(Object(E.b)(Z.props))},Z.renderSwitcher=function(){var lt=Z.props,pt=lt.expanded,gt=lt.switcherIcon,ut=Z.props.context,Bt=ut.prefixCls,Lt=ut.switcherIcon,St=gt||Lt;if(Z.isLeaf())return S.createElement("span",{className:m()("".concat(Bt,"-switcher"),"".concat(Bt,"-switcher-noop"))},typeof St=="function"?St(Object(t.a)(Object(t.a)({},Z.props),{},{isLeaf:!0})):St);var K=m()("".concat(Bt,"-switcher"),"".concat(Bt,"-switcher_").concat(pt?A:f));return S.createElement("span",{onClick:Z.onExpand,className:K},typeof St=="function"?St(Object(t.a)(Object(t.a)({},Z.props),{},{isLeaf:!1})):St)},Z.renderCheckbox=function(){var lt=Z.props,pt=lt.checked,gt=lt.halfChecked,ut=lt.disableCheckbox,Bt=Z.props.context.prefixCls,Lt=Z.isDisabled(),St=Z.isCheckable();if(!St)return null;var K=typeof St!="boolean"?St:null;return S.createElement("span",{className:m()("".concat(Bt,"-checkbox"),pt&&"".concat(Bt,"-checkbox-checked"),!pt&&gt&&"".concat(Bt,"-checkbox-indeterminate"),(Lt||ut)&&"".concat(Bt,"-checkbox-disabled")),onClick:Z.onCheck},K)},Z.renderIcon=function(){var lt=Z.props.loading,pt=Z.props.context.prefixCls;return S.createElement("span",{className:m()("".concat(pt,"-iconEle"),"".concat(pt,"-icon__").concat(Z.getNodeState()||"docu"),lt&&"".concat(pt,"-icon_loading"))})},Z.renderSelector=function(){var lt=Z.state.dragNodeHighlight,pt=Z.props,gt=pt.title,ut=pt.selected,Bt=pt.icon,Lt=pt.loading,St=pt.data,K=Z.props.context,dt=K.prefixCls,mt=K.showIcon,bt=K.icon,wt=K.draggable,J=K.loadData,ct=K.titleRender,it=Z.isDisabled(),_=typeof wt=="function"?wt(St):wt,R="".concat(dt,"-node-content-wrapper"),Q;if(mt){var k=Bt||bt;Q=k?S.createElement("span",{className:m()("".concat(dt,"-iconEle"),"".concat(dt,"-icon__customize"))},typeof k=="function"?k(Z.props):k):Z.renderIcon()}else J&&Lt&&(Q=Z.renderIcon());var g;typeof gt=="function"?g=gt(St):ct?g=ct(St):g=gt;var O=S.createElement("span",{className:"".concat(dt,"-title")},g);return S.createElement("span",{ref:Z.setSelectHandle,title:typeof gt=="string"?gt:"",className:m()("".concat(R),"".concat(R,"-").concat(Z.getNodeState()||"normal"),!it&&(ut||lt)&&"".concat(dt,"-node-selected"),!it&&_&&"draggable"),draggable:!it&&_||void 0,"aria-grabbed":!it&&_||void 0,onMouseEnter:Z.onMouseEnter,onMouseLeave:Z.onMouseLeave,onContextMenu:Z.onContextMenu,onClick:Z.onSelectorClick,onDoubleClick:Z.onSelectorDoubleClick,onDragStart:_?Z.onDragStart:void 0},Q,O,Z.renderDropIndicator())},Z.renderDropIndicator=function(){var lt=Z.props,pt=lt.disabled,gt=lt.eventKey,ut=Z.props.context,Bt=ut.draggable,Lt=ut.dropLevelOffset,St=ut.dropPosition,K=ut.prefixCls,dt=ut.indent,mt=ut.dropIndicatorRender,bt=ut.dragOverNodeKey,wt=ut.direction,J=Bt!==!1,ct=!pt&&J&&bt===gt;return ct?mt({dropPosition:St,dropLevelOffset:Lt,indent:dt,prefixCls:K,direction:wt}):null},Z}return Object(u.a)(ft,[{key:"componentDidMount",value:function(){this.syncLoadData(this.props)}},{key:"componentDidUpdate",value:function(){this.syncLoadData(this.props)}},{key:"isSelectable",value:function(){var lt=this.props.selectable,pt=this.props.context.selectable;return typeof lt=="boolean"?lt:pt}},{key:"render",value:function(){var lt,pt=this.props,gt=pt.eventKey,ut=pt.className,Bt=pt.style,Lt=pt.dragOver,St=pt.dragOverGapTop,K=pt.dragOverGapBottom,dt=pt.isLeaf,mt=pt.isStart,bt=pt.isEnd,wt=pt.expanded,J=pt.selected,ct=pt.checked,it=pt.halfChecked,_=pt.loading,R=pt.domRef,Q=pt.active,k=pt.data,g=pt.onMouseMove,O=Object(y.a)(pt,["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove"]),F=this.props.context,V=F.prefixCls,rt=F.filterTreeNode,ot=F.draggable,st=F.keyEntities,Mt=F.dropContainerKey,yt=F.dropTargetKey,xt=this.isDisabled(),Ot=Object(s.f)(O),jt=st[gt]||{},Dt=jt.level,zt=bt[bt.length-1],Tt=typeof ot=="function"?ot(k):ot;return S.createElement("div",Object(H.a)({ref:R,className:m()(ut,"".concat(V,"-treenode"),(lt={},Object(i.a)(lt,"".concat(V,"-treenode-disabled"),xt),Object(i.a)(lt,"".concat(V,"-treenode-switcher-").concat(wt?"open":"close"),!dt),Object(i.a)(lt,"".concat(V,"-treenode-checkbox-checked"),ct),Object(i.a)(lt,"".concat(V,"-treenode-checkbox-indeterminate"),it),Object(i.a)(lt,"".concat(V,"-treenode-selected"),J),Object(i.a)(lt,"".concat(V,"-treenode-loading"),_),Object(i.a)(lt,"".concat(V,"-treenode-active"),Q),Object(i.a)(lt,"".concat(V,"-treenode-leaf-last"),zt),Object(i.a)(lt,"drop-target",yt===gt),Object(i.a)(lt,"drop-container",Mt===gt),Object(i.a)(lt,"drag-over",!xt&&Lt),Object(i.a)(lt,"drag-over-gap-top",!xt&&St),Object(i.a)(lt,"drag-over-gap-bottom",!xt&&K),Object(i.a)(lt,"filter-node",rt&&rt(Object(E.b)(this.props))),lt)),style:Bt,onDragEnter:Tt?this.onDragEnter:void 0,onDragOver:Tt?this.onDragOver:void 0,onDragLeave:Tt?this.onDragLeave:void 0,onDrop:Tt?this.onDrop:void 0,onDragEnd:Tt?this.onDragEnd:void 0,onMouseMove:g},Ot),S.createElement(C,{prefixCls:V,level:Dt,isStart:mt,isEnd:bt}),this.renderSwitcher(),this.renderCheckbox(),this.renderSelector())}}]),ft}(S.Component),P=function($){return S.createElement(r.a.Consumer,null,function(ft){return S.createElement(j,Object(H.a)({},$,{context:ft}))})};P.displayName="TreeNode",P.defaultProps={title:x},P.isTreeNode=1;var W=Pt.a=P},WbAE:function(qe,Pt){},Xi7e:function(qe,Pt,w){var H=w("KMkd"),i=w("adU4"),y=w("tMB7"),t=w("+6XX"),n=w("Z8oC");function u(p){var b=-1,c=p==null?0:p.length;for(this.clear();++b<c;){var S=p[b];this.set(S[0],S[1])}}u.prototype.clear=H,u.prototype.delete=i,u.prototype.get=y,u.prototype.has=t,u.prototype.set=n,qe.exports=u},XiRp:function(qe,Pt){},XloR:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return b});var H=w("mrSG"),i=w("zJSt"),y=w("YuPD"),t=w("hJqF"),n=w("Ihc8"),u=w("iTfj"),p=function(c){Object(H.b)(S,c);function S(){return c!==null&&c.apply(this,arguments)||this}return S.prototype.active=function(){var I=this.getView(),m=this.context.event;if(m.data){var r=m.data.items,s=I.geometries.filter(function(d){return d.type==="point"});Object(u.each)(s,function(d){Object(u.each)(d.elements,function(C){var E=Object(u.findIndex)(r,function(A){return A.data===C.data})!==-1;C.setState("active",E)})})}},S.prototype.getView=function(){return this.context.view},S}(n.InteractionAction);Object(n.registerAction)("marker-active",p),Object(n.registerInteraction)("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}]});var b=function(c){Object(H.b)(S,c);function S(){var I=c!==null&&c.apply(this,arguments)||this;return I.type="line",I}return S.prototype.changeData=function(I){this.updateOption({data:I}),this.chart.changeData(I)},S.prototype.getDefaultOptions=function(){return Object(y.b)({},c.prototype.getDefaultOptions.call(this),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left"},isStack:!1})},S.prototype.getSchemaAdaptor=function(){return t.a},S}(i.a)},XpFM:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return f});var H=w("mrSG"),i=w("zJSt"),y=w("iTfj"),t=w("w02o"),n=w("n/J0"),u=w("YuPD"),p=w("5kt6");function b(x){return x.map(function(j,P){var W;return W={},W[p.f]=j-(x[P-1]||0),W[p.e]=""+P,W}).filter(function(j){return!!j[p.f]})}function c(x){var j;return[(j={},j[p.d]=Object(y.clamp)(x,0,1),j)]}function S(x,j){var P=Object(y.get)(j,["ticks"],[]),W=Object(y.size)(P)?P:[0,Object(y.clamp)(x,0,1),1];return b(W)}function I(x){var j=x.chart,P=x.options,W=P.percent,X=P.range,$=P.radius,ft=P.innerRadius,Z=P.startAngle,lt=P.endAngle,pt=P.axis,gt=P.indicator,ut=X.color;if(gt){var Bt=c(W),Lt=j.createView({id:p.b});Lt.data(Bt),Lt.point().position(p.d+"*1").shape("gauge-indicator").customInfo({defaultColor:j.getTheme().defaultColor,indicator:gt}),Lt.coordinate("polar",{startAngle:Z,endAngle:lt,radius:ft*$}),Lt.axis(p.d,pt),Lt.scale(p.d,Object(u.k)(pt,n.a))}var St=S(W,P.range),K=j.createView({id:p.g});K.data(St);var dt=Object(y.isString)(ut)?[ut,p.a]:ut;return K.interval().position("1*"+p.f).color(p.e,dt).adjust("stack"),K.coordinate("polar",{innerRadius:ft,radius:$,startAngle:Z,endAngle:lt}).transpose(),x}function m(x){var j,P=x.chart,W=x.options,X=W.type,$=W.meter;if(X==="meter"){var ft=W.innerRadius,Z=W.radius,lt=W.startAngle,pt=W.endAngle,gt=P.getTheme().background,ut=gt;(!ut||ut==="transparent")&&(ut="#fff");var Bt=P.createView({id:p.c});Bt.data([(j={},j[p.e]="1",j[p.f]=1,j)]),Bt.interval().position("1*"+p.f).color(ut).adjust("stack").shape("meter-gauge").customInfo($||{}),Bt.coordinate("polar",{innerRadius:ft,radius:Z,startAngle:lt,endAngle:pt}).transpose()}return x}function r(x){var j;return Object(u.e)(Object(t.f)((j={range:{min:0,max:1,maxLimit:1,minLimit:0}},j[p.d]={},j)))(x)}function s(x,j){var P=x.chart,W=x.options,X=W.statistic,$=W.percent;if(P.getController("annotation").clear(!0),X){var ft=X.content,Z=void 0;ft&&(Z=Object(u.b)({},{formatter:function(pt){var gt=pt.percent;return(gt*100).toFixed(2)+"%"},style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},ft)),Object(u.l)(P,{statistic:Object(H.a)(Object(H.a)({},X),{content:Z})},{percent:$})}return j&&P.render(!0),x}function d(x){var j=x.chart;return j.legend(!1),j.tooltip(!1),x}function C(x){return Object(u.e)(t.a,I,r,s,t.c,t.j,m,d)(x)}var E=w("Ihc8");Object(E.registerShape)("point","gauge-indicator",{draw:function(j,P){var W=j.customInfo,X=W.indicator,$=W.defaultColor,ft=X,Z=ft.pointer,lt=ft.pin,pt=P.addGroup(),gt=this.parsePoint({x:0,y:0});return Z&&pt.addShape("line",{name:"pointer",attrs:Object(H.a)({x1:gt.x,y1:gt.y,x2:j.x,y2:j.y,stroke:$},Z.style)}),lt&&pt.addShape("circle",{name:"pin",attrs:Object(H.a)({x:gt.x,y:gt.y,stroke:$},lt.style)}),pt}});var A=w("CBiR");Object(E.registerShape)("interval","meter-gauge",{draw:function(j,P){var W=j.customInfo,X=W.steps,$=X===void 0?50:X,ft=W.stepRatio,Z=ft===void 0?.5:ft,lt=this.coordinate.endAngle-this.coordinate.startAngle,pt=lt/$,gt=0;Z>0&&Z<=1&&(pt=lt/((1-Z)/Z*($-1)+$),gt=pt*(1-Z)/Z);var ut=P.addGroup();if(gt>0)for(var Bt=this.coordinate.getCenter(),Lt=this.coordinate.getRadius(),St=E.Util.getAngle(j,this.coordinate),K=St.startAngle,dt=St.endAngle,mt=K,bt=0;mt<dt&&bt<2*$-1;bt++){var wt=bt%2;if(wt){var J=Object(A.getSectorPath)(Bt.x,Bt.y,Lt,mt,Math.min(mt+gt,dt),Lt*this.coordinate.innerRadius);ut.addShape("path",{name:"meter-gauge-mask",attrs:{path:J,fill:j.color,stroke:j.color,lineWidth:.5},capture:!1})}mt+=wt?gt:pt}return ut}});var f=function(x){Object(H.b)(j,x);function j(){var P=x!==null&&x.apply(this,arguments)||this;return P.type="gauge",P}return j.prototype.getDefaultOptions=function(){var P;return{percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(P={},P[p.f]={sync:"v"},P[p.d]={sync:"v",tickCount:5,tickInterval:.2},P),animation:!1}},j.prototype.changeData=function(P){this.updateOption({percent:P});var W=this.chart.views.find(function($){return $.id===p.b});W&&W.data(c(P));var X=this.chart.views.find(function($){return $.id===p.g});X&&X.data(S(P,this.options.range)),s({chart:this.chart,options:this.options},!0)},j.prototype.getSchemaAdaptor=function(){return C},j}(i.a)},"Y+LX":function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return p});var H=w("mrSG"),i=w("zJSt"),y=w("YuPD"),t=w("sqD9"),n=w("DMQx");function u(b){var c=b.chart,S=b.options,I=S.xField,m=S.yField,r=S.xAxis,s=S.yAxis,d=S.barStyle,C=S.barWidthRatio,E=S.label,A=S.data,f=S.seriesField,x=S.isStack,j=S.minBarWidth,P=S.maxBarWidth;E&&!E.position&&(E.position="left",E.layout||(E.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]));var W=S.legend;f?W!==!1&&(W=Object(H.a)({position:x?"top-left":"right-top",reversed:!x},W||{})):W=!1,b.options.legend=W;var X=S.tooltip;return f&&X!==!1&&(X=Object(H.a)({reversed:!x},X||{})),b.options.tooltip=X,c.coordinate().transpose(),Object(n.a)({chart:c,options:Object(H.a)(Object(H.a)({},S),{label:E,xField:m,yField:I,xAxis:s,yAxis:r,columnStyle:d,columnWidthRatio:C,minColumnWidth:j,maxColumnWidth:P,columnBackground:S.barBackground,data:A&&A.slice().reverse()})},!0)}var p=function(b){Object(H.b)(c,b);function c(){var S=b!==null&&b.apply(this,arguments)||this;return S.type="bar",S}return c.prototype.changeData=function(S){this.updateOption({data:S});var I=this.options,m=I.xField,r=I.yField,s=I.isPercent;this.chart.changeData(Object(t.a)(S,m,r,m,s))},c.prototype.getDefaultOptions=function(){return Object(y.b)({},b.prototype.getDefaultOptions.call(this),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]})},c.prototype.getSchemaAdaptor=function(){return u},c}(i.a)},"Y+p1":function(qe,Pt,w){var H=w("wF/u");function i(y,t){return H(y,t)}qe.exports=i},YESw:function(qe,Pt,w){var H=w("Cwc5"),i=H(Object,"create");qe.exports=i},YP77:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return m});var H=w("mrSG"),i=w("zJSt"),y=w("B3DA"),t=w("iTfj"),n=w("YuPD"),u=w("w02o"),p=w("u9/z"),b=w("5kt6");function c(r){var s=r.chart,d=r.options,C=d.innerRadius,E=d.radius;return s.coordinate("theta",{innerRadius:C,radius:E}),r}function S(r,s){var d=r.chart,C=r.options,E=C.innerRadius,A=C.statistic,f=C.percent,x=C.meta;if(d.getController("annotation").clear(!0),E&&A){var j=A.content;j&&!j.formatter&&(j.formatter=function(P){var W=P.percent,X=Object(t.get)(x,[b.d,"formatter"]);return X?X(W):W}),Object(n.m)(d,{statistic:Object(H.a)(Object(H.a)({},A),{content:j}),plotType:"ring-progress"},{percent:f})}return s&&d.render(!0),r}function I(r){return Object(n.e)(p.b,Object(u.f)({}),c,S,u.a,u.j,Object(u.b)())(r)}var m=function(r){Object(H.b)(s,r);function s(){var d=r!==null&&r.apply(this,arguments)||this;return d.type="ring-process",d}return s.prototype.getDefaultOptions=function(){return{percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"},formatter:function(C){var E=C.percent;return(E*100).toFixed(2)+"%"}}},animation:!0}},s.prototype.changeData=function(d){this.updateOption({percent:d}),this.chart.data(Object(y.a)(d)),S({chart:this.chart,options:this.options},!0)},s.prototype.getSchemaAdaptor=function(){return I},s}(i.a)},YuPD:function(qe,Pt,w){"use strict";w.d(Pt,"e",function(){return H}),w.d(Pt,"k",function(){return i}),w.d(Pt,"n",function(){return t}),w.d(Pt,"j",function(){return S}),w.d(Pt,"a",function(){return u}),w.d(Pt,"g",function(){return I}),w.d(Pt,"c",function(){return m}),w.d(Pt,"f",function(){return r}),w.d(Pt,"d",function(){return s.a}),w.d(Pt,"o",function(){return d}),w.d(Pt,"h",function(){return x}),w.d(Pt,"b",function(){return lt}),w.d(Pt,"i",function(){return pt}),w.d(Pt,"m",function(){return gt.c}),w.d(Pt,"l",function(){return gt.b});function H(){for(var St=[],K=0;K<arguments.length;K++)St[K]=arguments[K];return function(dt){return St.reduce(function(mt,bt){return bt(mt)},dt)}}function i(St,K){var dt={};return St!==null&&typeof St=="object"&&K.forEach(function(mt){var bt=St[mt];bt!==void 0&&(dt[mt]=bt)}),dt}var y=w("iTfj");function t(St,K){return Object(y.reduce)(K,function(dt,mt,bt){return dt.replace(new RegExp("{\\s*"+bt+"\\s*}","g"),mt)},St)}var n=w("mrSG"),u;(function(St){St.ERROR="error",St.WARN="warn",St.INFO="log"})(u||(u={}));var p="AntV/G2Plot";function b(St){for(var K=[],dt=1;dt<arguments.length;dt++)K[dt-1]=arguments[dt];var mt=0;return p+": "+St.replace(/%s/g,function(){return""+K[mt++]})}function c(St,K){for(var dt=[],mt=2;mt<arguments.length;mt++)dt[mt-2]=arguments[mt];if(!St){var bt=new Error(b.apply(void 0,Object(n.d)([K],dt)));throw bt.name=p,bt}}function S(St,K,dt){for(var mt=[],bt=3;bt<arguments.length;bt++)mt[bt-3]=arguments[bt];K||console[St](b.apply(void 0,Object(n.d)([dt],mt)))}function I(St){if(!St)return{width:0,height:0};var K=getComputedStyle(St);return{width:(St.clientWidth||parseInt(K.width,10))-parseInt(K.paddingLeft,10)-parseInt(K.paddingRight,10),height:(St.clientHeight||parseInt(K.height,10))-parseInt(K.paddingTop,10)-parseInt(K.paddingBottom,10)}}function m(St,K){return St.geometries.find(function(dt){return dt.type===K})}function r(St){return Object(y.reduce)(St.geometries,function(K,dt){return K.concat(dt.elements)},[])}var s=w("4Olw");function d(St){if(!Object(y.isType)(St,"Object"))return St;var K=Object(n.a)({},St);return K.formatter&&!K.content&&(K.content=K.formatter),K}var C=w("6JdA");function E(St,K){var dt=[];if(St.length){dt.push(["M",St[0].x,St[0].y]);for(var mt=1,bt=St.length;mt<bt;mt+=1){var wt=St[mt];dt.push(["L",wt.x,wt.y])}K&&dt.push(["Z"])}return dt}var A=function(K,dt,mt,bt){var wt=[],J,ct,it=!!bt,_,R;if(it){_=[Infinity,Infinity],R=[-Infinity,-Infinity];for(var Q=0,k=K.length;Q<k;Q++){var g=K[Q];_=C.c.min([0,0],_,g),R=C.c.max([0,0],R,g)}_=C.c.min([0,0],_,bt[0]),R=C.c.max([0,0],R,bt[1])}for(var Q=0,O=K.length;Q<O;Q++){var g=K[Q];if(mt)J=K[Q?Q-1:O-1],ct=K[(Q+1)%O];else if(Q===0||Q===O-1){wt.push(g);continue}else J=K[Q-1],ct=K[Q+1];var F=[0,0];F=C.c.sub(F,ct,J),F=C.c.scale(F,F,dt);var V=C.c.distance(g,J),rt=C.c.distance(g,ct),ot=V+rt;ot!==0&&(V/=ot,rt/=ot);var st=C.c.scale([0,0],F,-V),Mt=C.c.scale([0,0],F,rt),yt=C.c.add([0,0],g,st),xt=C.c.add([0,0],g,Mt);it&&(yt=C.c.max([0,0],yt,_),yt=C.c.min([0,0],yt,R),xt=C.c.max([0,0],xt,_),xt=C.c.min([0,0],xt,R)),wt.push(yt),wt.push(xt)}return mt&&wt.push(wt.shift()),wt};function f(St,K,dt){for(var mt=!!K,bt=[],wt=0,J=St.length;wt<J;wt+=2)bt.push([St[wt],St[wt+1]]);for(var ct=A(bt,.4,mt,dt),it=bt.length,_=[],R,Q,k,wt=0;wt<it-1;wt++)R=ct[wt*2],Q=ct[wt*2+1],k=bt[wt+1],_.push(["C",R[0],R[1],Q[0],Q[1],k[0],k[1]]);return mt&&(R=ct[it],Q=ct[it+1],k=bt[0],_.push(["C",R[0],R[1],Q[0],Q[1],k[0],k[1]])),_}function x(St,K,dt){var mt=[],bt=St[0],wt=null;if(St.length<=2)return E(St,K);for(var J=0,ct=St.length;J<ct;J++){var it=St[J];(!wt||!(wt.x===it.x&&wt.y===it.y))&&(mt.push(it.x),mt.push(it.y),wt=it)}var _=dt||[[0,0],[1,1]],R=f(mt,K,_);return R.unshift(["M",bt.x,bt.y]),R}var j=5,P={}.toString,W=function(K,dt){return P.call(K)==="[object "+dt+"]"},X=function(K){return W(K,"Array")},$=function(K){return typeof K=="object"&&K!==null},ft=function(K){if(!$(K)||!W(K,"Object"))return!1;for(var dt=K;Object.getPrototypeOf(dt)!==null;)dt=Object.getPrototypeOf(dt);return Object.getPrototypeOf(K)===dt},Z=function St(K,dt,mt,bt){mt=mt||0,bt=bt||j;for(var wt in dt)if(Object.prototype.hasOwnProperty.call(dt,wt)){var J=dt[wt];J?ft(J)?(ft(K[wt])||(K[wt]={}),mt<bt?St(K[wt],J,mt+1,bt):K[wt]=dt[wt]):X(J)?(K[wt]=[],K[wt]=K[wt].concat(J)):K[wt]=J:K[wt]=J}},lt=function(K){for(var dt=[],mt=1;mt<arguments.length;mt++)dt[mt-1]=arguments[mt];for(var bt=0;bt<dt.length;bt+=1)Z(K,dt[bt]);return K};function pt(St){if(!St)return St;var K=St.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g);return K.map(function(dt){return dt.toLowerCase()}).join("-")}var gt=w("mj6g"),ut;function Bt(){return ut||(ut=document.createElement("canvas").getContext("2d")),ut}var Lt=Object(y.memoize)(function(St,K){K===void 0&&(K={});var dt=K.fontSize,mt=K.fontFamily,bt=mt===void 0?"sans-serif":mt,wt=K.fontWeight,J=K.fontStyle,ct=K.fontVariant,it=Bt();it.font=[J,wt,ct,dt+"px",bt].join(" ");var _=it.measureText(Object(y.isString)(St)?St:"");return _.width},function(St,K){return K===void 0&&(K={}),Object(n.d)([St],Object(y.values)(K)).join("")})},Z1HP:function(qe,Pt,w){var H=w("ycre"),i=w("quyA"),y=w("q4HE");function t(n){return i(n)?y(n):H(n)}qe.exports=t},Z8oC:function(qe,Pt,w){var H=w("y1pI");function i(y,t){var n=this.__data__,u=H(n,y);return u<0?(++this.size,n.push([y,t])):n[u][1]=t,this}qe.exports=i},ZCgT:function(qe,Pt,w){var H=w("tLB3"),i=1/0,y=17976931348623157e292;function t(n){if(!n)return n===0?n:0;if(n=H(n),n===i||n===-i){var u=n<0?-1:1;return u*y}return n===n?n:0}qe.exports=t},ZxFD:function(qe,Pt,w){"use strict";w.r(Pt),w.d(Pt,"create",function(){return i}),w.d(Pt,"clone",function(){return y}),w.d(Pt,"fromValues",function(){return t}),w.d(Pt,"copy",function(){return n}),w.d(Pt,"set",function(){return u}),w.d(Pt,"add",function(){return p}),w.d(Pt,"subtract",function(){return b}),w.d(Pt,"multiply",function(){return c}),w.d(Pt,"divide",function(){return S}),w.d(Pt,"ceil",function(){return I}),w.d(Pt,"floor",function(){return m}),w.d(Pt,"min",function(){return r}),w.d(Pt,"max",function(){return s}),w.d(Pt,"round",function(){return d}),w.d(Pt,"scale",function(){return C}),w.d(Pt,"scaleAndAdd",function(){return E}),w.d(Pt,"distance",function(){return A}),w.d(Pt,"squaredDistance",function(){return f}),w.d(Pt,"length",function(){return x}),w.d(Pt,"squaredLength",function(){return j}),w.d(Pt,"negate",function(){return P}),w.d(Pt,"inverse",function(){return W}),w.d(Pt,"normalize",function(){return X}),w.d(Pt,"dot",function(){return $}),w.d(Pt,"cross",function(){return ft}),w.d(Pt,"lerp",function(){return Z}),w.d(Pt,"random",function(){return lt}),w.d(Pt,"transformMat2",function(){return pt}),w.d(Pt,"transformMat2d",function(){return gt}),w.d(Pt,"transformMat3",function(){return ut}),w.d(Pt,"transformMat4",function(){return Bt}),w.d(Pt,"rotate",function(){return Lt}),w.d(Pt,"angle",function(){return St}),w.d(Pt,"zero",function(){return K}),w.d(Pt,"str",function(){return dt}),w.d(Pt,"exactEquals",function(){return mt}),w.d(Pt,"equals",function(){return bt}),w.d(Pt,"len",function(){return wt}),w.d(Pt,"sub",function(){return J}),w.d(Pt,"mul",function(){return ct}),w.d(Pt,"div",function(){return it}),w.d(Pt,"dist",function(){return _}),w.d(Pt,"sqrDist",function(){return R}),w.d(Pt,"sqrLen",function(){return Q}),w.d(Pt,"forEach",function(){return k});var H=w("yU0y");function i(){var g=new H.a(2);return H.a!=Float32Array&&(g[0]=0,g[1]=0),g}function y(g){var O=new H.a(2);return O[0]=g[0],O[1]=g[1],O}function t(g,O){var F=new H.a(2);return F[0]=g,F[1]=O,F}function n(g,O){return g[0]=O[0],g[1]=O[1],g}function u(g,O,F){return g[0]=O,g[1]=F,g}function p(g,O,F){return g[0]=O[0]+F[0],g[1]=O[1]+F[1],g}function b(g,O,F){return g[0]=O[0]-F[0],g[1]=O[1]-F[1],g}function c(g,O,F){return g[0]=O[0]*F[0],g[1]=O[1]*F[1],g}function S(g,O,F){return g[0]=O[0]/F[0],g[1]=O[1]/F[1],g}function I(g,O){return g[0]=Math.ceil(O[0]),g[1]=Math.ceil(O[1]),g}function m(g,O){return g[0]=Math.floor(O[0]),g[1]=Math.floor(O[1]),g}function r(g,O,F){return g[0]=Math.min(O[0],F[0]),g[1]=Math.min(O[1],F[1]),g}function s(g,O,F){return g[0]=Math.max(O[0],F[0]),g[1]=Math.max(O[1],F[1]),g}function d(g,O){return g[0]=Math.round(O[0]),g[1]=Math.round(O[1]),g}function C(g,O,F){return g[0]=O[0]*F,g[1]=O[1]*F,g}function E(g,O,F,V){return g[0]=O[0]+F[0]*V,g[1]=O[1]+F[1]*V,g}function A(g,O){var F=O[0]-g[0],V=O[1]-g[1];return Math.hypot(F,V)}function f(g,O){var F=O[0]-g[0],V=O[1]-g[1];return F*F+V*V}function x(g){var O=g[0],F=g[1];return Math.hypot(O,F)}function j(g){var O=g[0],F=g[1];return O*O+F*F}function P(g,O){return g[0]=-O[0],g[1]=-O[1],g}function W(g,O){return g[0]=1/O[0],g[1]=1/O[1],g}function X(g,O){var F=O[0],V=O[1],rt=F*F+V*V;return rt>0&&(rt=1/Math.sqrt(rt)),g[0]=O[0]*rt,g[1]=O[1]*rt,g}function $(g,O){return g[0]*O[0]+g[1]*O[1]}function ft(g,O,F){var V=O[0]*F[1]-O[1]*F[0];return g[0]=g[1]=0,g[2]=V,g}function Z(g,O,F,V){var rt=O[0],ot=O[1];return g[0]=rt+V*(F[0]-rt),g[1]=ot+V*(F[1]-ot),g}function lt(g,O){O=O||1;var F=H.c()*2*Math.PI;return g[0]=Math.cos(F)*O,g[1]=Math.sin(F)*O,g}function pt(g,O,F){var V=O[0],rt=O[1];return g[0]=F[0]*V+F[2]*rt,g[1]=F[1]*V+F[3]*rt,g}function gt(g,O,F){var V=O[0],rt=O[1];return g[0]=F[0]*V+F[2]*rt+F[4],g[1]=F[1]*V+F[3]*rt+F[5],g}function ut(g,O,F){var V=O[0],rt=O[1];return g[0]=F[0]*V+F[3]*rt+F[6],g[1]=F[1]*V+F[4]*rt+F[7],g}function Bt(g,O,F){var V=O[0],rt=O[1];return g[0]=F[0]*V+F[4]*rt+F[12],g[1]=F[1]*V+F[5]*rt+F[13],g}function Lt(g,O,F,V){var rt=O[0]-F[0],ot=O[1]-F[1],st=Math.sin(V),Mt=Math.cos(V);return g[0]=rt*Mt-ot*st+F[0],g[1]=rt*st+ot*Mt+F[1],g}function St(g,O){var F=g[0],V=g[1],rt=O[0],ot=O[1],st=Math.sqrt(F*F+V*V)*Math.sqrt(rt*rt+ot*ot),Mt=st&&(F*rt+V*ot)/st;return Math.acos(Math.min(Math.max(Mt,-1),1))}function K(g){return g[0]=0,g[1]=0,g}function dt(g){return"vec2("+g[0]+", "+g[1]+")"}function mt(g,O){return g[0]===O[0]&&g[1]===O[1]}function bt(g,O){var F=g[0],V=g[1],rt=O[0],ot=O[1];return Math.abs(F-rt)<=H.b*Math.max(1,Math.abs(F),Math.abs(rt))&&Math.abs(V-ot)<=H.b*Math.max(1,Math.abs(V),Math.abs(ot))}var wt=x,J=b,ct=c,it=S,_=A,R=f,Q=j,k=function(){var g=i();return function(O,F,V,rt,ot,st){var Mt,yt;for(F||(F=2),V||(V=0),rt?yt=Math.min(rt*F+V,O.length):yt=O.length,Mt=V;Mt<yt;Mt+=F)g[0]=O[Mt],g[1]=O[Mt+1],ot(g,g,st),O[Mt]=g[0],O[Mt+1]=g[1];return O}}()},a8tM:function(qe,Pt,w){"use strict";w.d(Pt,"c",function(){return j}),w.d(Pt,"b",function(){return ft}),w.d(Pt,"a",function(){return Z});var H=w("rePB");function i(lt){var pt=0,gt=lt.children,ut=gt&&gt.length;if(!ut)pt=1;else for(;--ut>=0;)pt+=gt[ut].value;lt.value=pt}var y=function(){return this.eachAfter(i)},t=w("uFwe"),n=function(lt,pt){var gt=-1,ut=Object(t.a)(this),Bt;try{for(ut.s();!(Bt=ut.n()).done;){var Lt=Bt.value;lt.call(pt,Lt,++gt,this)}}catch(St){ut.e(St)}finally{ut.f()}return this},u=function(lt,pt){for(var gt=this,ut=[gt],Bt,Lt,St=-1;gt=ut.pop();)if(lt.call(pt,gt,++St,this),Bt=gt.children)for(Lt=Bt.length-1;Lt>=0;--Lt)ut.push(Bt[Lt]);return this},p=function(lt,pt){for(var gt=this,ut=[gt],Bt=[],Lt,St,K,dt=-1;gt=ut.pop();)if(Bt.push(gt),Lt=gt.children)for(St=0,K=Lt.length;St<K;++St)ut.push(Lt[St]);for(;gt=Bt.pop();)lt.call(pt,gt,++dt,this);return this},b=function(lt,pt){var gt=-1,ut=Object(t.a)(this),Bt;try{for(ut.s();!(Bt=ut.n()).done;){var Lt=Bt.value;if(lt.call(pt,Lt,++gt,this))return Lt}}catch(St){ut.e(St)}finally{ut.f()}},c=function(lt){return this.eachAfter(function(pt){for(var gt=+lt(pt.data)||0,ut=pt.children,Bt=ut&&ut.length;--Bt>=0;)gt+=ut[Bt].value;pt.value=gt})},S=function(lt){return this.eachBefore(function(pt){pt.children&&pt.children.sort(lt)})},I=function(lt){for(var pt=this,gt=m(pt,lt),ut=[pt];pt!==gt;)pt=pt.parent,ut.push(pt);for(var Bt=ut.length;lt!==gt;)ut.splice(Bt,0,lt),lt=lt.parent;return ut};function m(lt,pt){if(lt===pt)return lt;var gt=lt.ancestors(),ut=pt.ancestors(),Bt=null;for(lt=gt.pop(),pt=ut.pop();lt===pt;)Bt=lt,lt=gt.pop(),pt=ut.pop();return Bt}var r=function(){for(var lt=this,pt=[lt];lt=lt.parent;)pt.push(lt);return pt},s=function(){return Array.from(this)},d=function(){var lt=[];return this.eachBefore(function(pt){pt.children||lt.push(pt)}),lt},C=function(){var lt=this,pt=[];return lt.each(function(gt){gt!==lt&&pt.push({source:gt.parent,target:gt})}),pt},E=w("o0o1"),A=w.n(E),f=A.a.mark(x);function x(){var lt,pt,gt,ut,Bt,Lt;return A.a.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:lt=this,gt=[lt];case 1:pt=gt.reverse(),gt=[];case 2:if(!(lt=pt.pop())){K.next=8;break}return K.next=5,lt;case 5:if(ut=lt.children)for(Bt=0,Lt=ut.length;Bt<Lt;++Bt)gt.push(ut[Bt]);K.next=2;break;case 8:if(gt.length){K.next=1;break}case 9:case"end":return K.stop()}},f,this)}function j(lt,pt){lt instanceof Map?(lt=[void 0,lt],pt===void 0&&(pt=X)):pt===void 0&&(pt=W);for(var gt=new Z(lt),ut,Bt=[gt],Lt,St,K,dt;ut=Bt.pop();)if((St=pt(ut.data))&&(dt=(St=Array.from(St)).length))for(ut.children=St,K=dt-1;K>=0;--K)Bt.push(Lt=St[K]=new Z(St[K])),Lt.parent=ut,Lt.depth=ut.depth+1;return gt.eachBefore(ft)}function P(){return j(this).eachBefore($)}function W(lt){return lt.children}function X(lt){return Array.isArray(lt)?lt[1]:null}function $(lt){lt.data.value!==void 0&&(lt.value=lt.data.value),lt.data=lt.data.data}function ft(lt){var pt=0;do lt.height=pt;while((lt=lt.parent)&&lt.height<++pt)}function Z(lt){this.data=lt,this.depth=this.height=0,this.parent=null}Z.prototype=j.prototype=Object(H.a)({constructor:Z,count:y,each:n,eachAfter:p,eachBefore:u,find:b,sum:c,sort:S,path:I,ancestors:r,descendants:s,leaves:d,links:C,copy:P},Symbol.iterator,x)},aFU3:function(qe,Pt,w){"use strict";w.r(Pt),w.d(Pt,"version",function(){return E});var H=w("tvuL");w.d(Pt,"PathUtil",function(){return H});var i=w("4cbP"),y=w.n(i);for(var t in i)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","version"].indexOf(t)<0&&function(A){w.d(Pt,A,function(){return i[A]})}(t);var n=w("tdXX"),u=w.n(n);for(var t in n)["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","version"].indexOf(t)<0&&function(f){w.d(Pt,f,function(){return n[f]})}(t);var p=w("5eLp");w.d(Pt,"Event",function(){return p.a});var b=w("LmB6");w.d(Pt,"Base",function(){return b.a});var c=w("EkMX");w.d(Pt,"AbstractCanvas",function(){return c.a});var S=w("+DwW");w.d(Pt,"AbstractGroup",function(){return S.a});var I=w("MaEA");w.d(Pt,"AbstractShape",function(){return I.a});var m=w("1MZV");w.d(Pt,"getBBoxMethod",function(){return m.a});var r=w("vIgC");w.d(Pt,"getTextHeight",function(){return r.b}),w.d(Pt,"assembleFont",function(){return r.a});var s=w("sstZ");w.d(Pt,"isAllowCapture",function(){return s.b});var d=w("aSjE");w.d(Pt,"multiplyVec2",function(){return d.c}),w.d(Pt,"invert",function(){return d.a});var C=w("lt7v");w.d(Pt,"getOffScreenContext",function(){return C.a});var E="0.5.4"},aLzy:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return J});var H=w("mrSG"),i=w("zJSt"),y=w("w02o"),t=w("YuPD"),n=w("5OoT"),u=w("iTfj"),p=w("5HRO"),b=w("WOQw"),c="$$percentage$$",S="$$mappingValue$$",I="$$conversion$$",m="$$totalPercentage$$",r="$$x$$",s="$$y$$";function d(ct,it,_){var R=[],Q=_.yField,k=_.maxSize,g=_.minSize,O=Object(u.maxBy)(it,Q)[Q],F=Object(u.isNumber)(k)?k:1,V=Object(u.isNumber)(g)?g:0;return R=Object(u.map)(ct,function(rt,ot){var st=(rt[Q]||0)/O;return rt[c]=st,rt[S]=(F-V)*st+V,rt[I]=[Object(u.get)(ct,[ot-1,Q]),rt[Q]],rt}),R}function C(ct){return function(it){var _=it.chart,R=it.options,Q=R.conversionTag,k=_.getOptions().data;if(Q){var g=Q.formatter;k.forEach(function(O,F){if(!(F<=0)){var V=ct(O,F,k,{top:!0,text:{content:Object(u.isFunction)(g)?g(O,k):g,offsetX:Q.offsetX,offsetY:Q.offsetY,position:"end",autoRotate:!1,style:Object(H.a)({textAlign:"start",textBaseline:"middle"},Q.style)}});_.annotation().line(V)}})}return it}}function E(ct){var it=ct.chart,_=ct.options,R=_.data,Q=R===void 0?[]:R,k=_.yField,g=_.maxSize,O=_.minSize,F=d(Q,Q,{yField:k,maxSize:g,minSize:O});return it.data(F),ct}function A(ct){var it=ct.chart,_=ct.options,R=_.xField,Q=_.yField,k=_.color,g=_.tooltip,O=_.label,F=Object(p.a)(g,[R,Q]),V=F.fields,rt=F.formatter;Object(b.a)({chart:it,options:{type:"interval",xField:R,yField:S,colorField:R,tooltipFields:Object(u.isArray)(V)&&V.concat([c,I]),mapping:{shape:"funnel",tooltip:rt,color:k},label:O}});var ot=Object(t.c)(ct.chart,"interval");return ot.adjust("symmetric"),ct}function f(ct){var it=ct.chart,_=ct.options,R=_.isTransposed;return it.coordinate({type:"rect",actions:R?[]:[["transpose"],["scale",1,-1]]}),ct}function x(ct){var it=ct.options,_=it.maxSize,R=function(k,g,O,F){var V=_-(_-k[S])/2;return Object(H.a)(Object(H.a)({},F),{start:[g-.5,V],end:[g-.5,V+.05]})};return C(R)(ct),ct}function j(ct){return Object(t.e)(E,A,f,x)(ct)}function P(ct){var it,_=ct.chart,R=ct.options,Q=R.data,k=Q===void 0?[]:Q,g=R.yField;return _.data(k),_.scale((it={},it[g]={sync:!0},it)),ct}function W(ct){var it=ct.chart,_=ct.options,R=_.data,Q=_.xField,k=_.yField,g=_.color,O=_.compareField,F=_.isTransposed,V=_.tooltip,rt=_.maxSize,ot=_.minSize,st=_.label;return it.facet("mirror",{fields:[O],transpose:!F,padding:F?0:[32,0,0,0],eachView:function(yt,xt){var Ot=F?xt.rowIndex:xt.columnIndex;F||yt.coordinate({type:"rect",actions:[["transpose"],["scale",Ot===0?-1:1,-1]]});var jt=d(xt.data,R,{yField:k,maxSize:rt,minSize:ot});yt.data(jt);var Dt=Object(p.a)(V,[Q,k,O]),zt=Dt.fields,Tt=Dt.formatter,Wt=F?{offset:Ot===0?10:-23,position:Ot===0?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:Ot===0?"end":"start"}};Object(b.a)({chart:yt,options:{type:"interval",xField:Q,yField:S,colorField:Q,tooltipFields:Object(u.isArray)(zt)&&zt.concat([c,I]),mapping:{shape:"funnel",tooltip:Tt,color:g,style:{lineWidth:1,stroke:"#fff"}},label:st===!1?!1:Object(t.b)({},Wt,st)}})}}),ct}function X(ct){var it=ct.chart,_=ct.options,R=_.conversionTag,Q=_.isTransposed;return it.once("beforepaint",function(){it.views.forEach(function(k,g){var O=function(V,rt,ot,st){var Mt=g===0?-1:1;return Object(t.b)({},st,{start:[rt-.5,V[S]],end:[rt-.5,V[S]+.05],text:Q?{style:{textAlign:"start"}}:{offsetX:R!==!1?Mt*R.offsetX:0,style:{textAlign:g===0?"end":"start"}}})};C(O)(Object(t.b)({},{chart:k,options:_}))})}),ct}function $(ct){return Object(t.e)(P,W,X)(ct)}function ft(ct){var it,_=ct.chart,R=ct.options,Q=R.data,k=Q===void 0?[]:Q,g=R.yField;return _.data(k),_.scale((it={},it[g]={sync:!0},it)),ct}function Z(ct){var it=ct.chart,_=ct.options,R=_.seriesField,Q=_.isTransposed;return it.facet("rect",{fields:[R],padding:[Q?0:32,10,0,10],eachView:function(g,O){j(Object(t.b)({},ct,{chart:g,options:{data:O.data}}))}}),ct}function lt(ct){return Object(t.e)(ft,Z)(ct)}function pt(ct){var it=ct.chart,_=ct.options,R=_.data,Q=R===void 0?[]:R,k=_.yField,g=Object(u.reduce)(Q,function(V,rt){return V+(rt[k]||0)},0),O=Object(u.maxBy)(Q,k)[k],F=Object(u.map)(Q,function(V,rt){var ot=[],st=[];if(V[m]=(V[k]||0)/g,rt){var Mt=Q[rt-1][r],yt=Q[rt-1][s];ot[0]=Mt[3],st[0]=yt[3],ot[1]=Mt[2],st[1]=yt[2]}else ot[0]=-.5,st[0]=1,ot[1]=.5,st[1]=1;return st[2]=st[1]-V[m],ot[2]=(st[2]+1)/4,st[3]=st[2],ot[3]=-ot[2],V[r]=ot,V[s]=st,V[c]=(V[k]||0)/O,V[I]=[Object(u.get)(Q,[rt-1,k]),V[k]],V});return it.data(F),ct}function gt(ct){var it=ct.chart,_=ct.options,R=_.xField,Q=_.yField,k=_.color,g=_.tooltip,O=_.label,F=Object(p.a)(g,[R,Q]),V=F.fields,rt=F.formatter;return Object(b.a)({chart:it,options:{type:"polygon",xField:r,yField:s,colorField:R,tooltipFields:Object(u.isArray)(V)&&V.concat([c,I]),label:O,mapping:{tooltip:rt,color:k}}}),ct}function ut(ct){var it=ct.chart,_=ct.options,R=_.isTransposed;return it.coordinate({type:"rect",actions:R?[["transpose"],["reflect","x"]]:[]}),ct}function Bt(ct){var it=function(R,Q,k,g){return Object(H.a)(Object(H.a)({},g),{start:[R[r][1],R[s][1]],end:[R[r][1]+.05,R[s][1]]})};return C(it)(ct),ct}function Lt(ct){return Object(t.e)(pt,gt,ut,Bt)(ct)}function St(ct){var it,_=ct.options,R=_.compareField,Q=_.xField,k=_.yField,g={minSize:0,maxSize:1,meta:(it={},it[S]={min:0,max:1,nice:!1},it),label:R?{fields:[Q,k,R,c,I],style:{fill:"#fff",fontSize:12},formatter:function(F){return""+F[k]}}:{fields:[Q,k,c,I],offset:0,position:"middle",style:{fill:"#fff",fontSize:12},formatter:function(F){return F[Q]+" "+F[k]}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,title:Q,formatter:function(F){return{name:F[Q],value:F[k]}}},conversionTag:{offsetX:10,offsetY:0,style:{},formatter:function(F){return"\u8F6C\u5316\u7387: "+n.a.apply(void 0,F[I])}}};return Object(t.b)({options:g},ct)}function K(ct){var it=ct.options,_=it.compareField,R=it.dynamicHeight,Q=it.seriesField;return Q?lt(ct):_?$(ct):R?Lt(ct):j(ct)}function dt(ct){var it,_=ct.options,R=_.xAxis,Q=_.yAxis,k=_.xField,g=_.yField;return Object(t.e)(Object(y.f)((it={},it[k]=R,it[g]=Q,it)))(ct)}function mt(ct){var it=ct.chart;return it.axis(!1),ct}function bt(ct){var it=ct.chart,_=ct.options,R=_.legend;return R===!1?it.legend(!1):it.legend(R),ct}function wt(ct){return Object(t.e)(St,K,dt,mt,y.k,y.c,bt,y.a,y.j,Object(y.b)())(ct)}var J=function(ct){Object(H.b)(it,ct);function it(){var _=ct!==null&&ct.apply(this,arguments)||this;return _.type="funnel",_}return it.prototype.getDefaultOptions=function(){return{appendPadding:[0,80]}},it.prototype.getSchemaAdaptor=function(){return wt},it}(i.a)},aN7R:function(qe,Pt,w){"use strict";w.r(Pt),w.d(Pt,"Base",function(){return S}),w.d(Pt,"Circle",function(){return r}),w.d(Pt,"Dom",function(){return d}),w.d(Pt,"Ellipse",function(){return E}),w.d(Pt,"Image",function(){return f}),w.d(Pt,"Line",function(){return P}),w.d(Pt,"Marker",function(){return ft}),w.d(Pt,"Path",function(){return lt}),w.d(Pt,"Polygon",function(){return gt}),w.d(Pt,"Polyline",function(){return Bt}),w.d(Pt,"Rect",function(){return bt}),w.d(Pt,"Text",function(){return Q});var H={};w.r(H),w.d(H,"Base",function(){return S}),w.d(H,"Circle",function(){return r}),w.d(H,"Dom",function(){return d}),w.d(H,"Ellipse",function(){return E}),w.d(H,"Image",function(){return f}),w.d(H,"Line",function(){return P}),w.d(H,"Marker",function(){return ft}),w.d(H,"Path",function(){return lt}),w.d(H,"Polygon",function(){return gt}),w.d(H,"Polyline",function(){return Bt}),w.d(H,"Rect",function(){return bt}),w.d(H,"Text",function(){return Q});var i=w("mrSG"),y=w("aFU3"),t=w("APlK"),n=w("c+wO"),u=w("c0lT"),p=w("IvmH"),b=w("5z4m"),c=function(k){Object(i.b)(g,k);function g(){var O=k!==null&&k.apply(this,arguments)||this;return O.type="svg",O.canFill=!1,O.canStroke=!1,O}return g.prototype.getDefaultAttrs=function(){var O=k.prototype.getDefaultAttrs.call(this);return Object(i.a)(Object(i.a)({},O),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},g.prototype.afterAttrsChange=function(O){k.prototype.afterAttrsChange.call(this,O);var F=this.get("canvas");if(F&&F.get("autoDraw")){var V=F.get("context");this.draw(V,O)}},g.prototype.getShapeBase=function(){return H},g.prototype.getGroupBase=function(){return b.a},g.prototype.onCanvasChange=function(O){Object(u.b)(this,O)},g.prototype.calculateBBox=function(){var O=this.get("el"),F=null;if(O)F=O.getBBox();else{var V=Object(y.getBBoxMethod)(this.get("type"));V&&(F=V(this))}if(F){var rt=F.x,ot=F.y,st=F.width,Mt=F.height,yt=this.getHitLineWidth(),xt=yt/2,Ot=rt-xt,jt=ot-xt,Dt=rt+st+xt,zt=ot+Mt+xt;return{x:Ot,y:jt,minX:Ot,minY:jt,maxX:Dt,maxY:zt,width:st+yt,height:Mt+yt}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},g.prototype.isFill=function(){var O=this.attr(),F=O.fill,V=O.fillStyle;return(F||V||this.isClipShape())&&this.canFill},g.prototype.isStroke=function(){var O=this.attr(),F=O.stroke,V=O.strokeStyle;return(F||V)&&this.canStroke},g.prototype.draw=function(O,F){var V=this.get("el");this.get("destroyed")?V&&V.parentNode.removeChild(V):(V||Object(n.a)(this),Object(t.a)(this,O),this.createPath(O,F),this.shadow(O,F),this.strokeAndFill(O,F),this.transform(F))},g.prototype.createPath=function(O,F){},g.prototype.strokeAndFill=function(O,F){var V=F||this.attr(),rt=V.fill,ot=V.fillStyle,st=V.stroke,Mt=V.strokeStyle,yt=V.fillOpacity,xt=V.strokeOpacity,Ot=V.lineWidth,jt=this.get("el");this.canFill&&(F?"fill"in V?this._setColor(O,"fill",rt):"fillStyle"in V&&this._setColor(O,"fill",ot):this._setColor(O,"fill",rt||ot),yt&&jt.setAttribute(p.b.fillOpacity,yt)),this.canStroke&&Ot>0&&(F?"stroke"in V?this._setColor(O,"stroke",st):"strokeStyle"in V&&this._setColor(O,"stroke",Mt):this._setColor(O,"stroke",st||Mt),xt&&jt.setAttribute(p.b.strokeOpacity,xt),Ot&&jt.setAttribute(p.b.lineWidth,Ot))},g.prototype._setColor=function(O,F,V){var rt=this.get("el");if(!V){rt.setAttribute(p.b[F],"none");return}if(V=V.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(V)){var ot=O.find("gradient",V);ot||(ot=O.addGradient(V)),rt.setAttribute(p.b[F],"url(#"+ot+")")}else if(/^[p,P]{1}[\s]*\(/.test(V)){var ot=O.find("pattern",V);ot||(ot=O.addPattern(V)),rt.setAttribute(p.b[F],"url(#"+ot+")")}else rt.setAttribute(p.b[F],V)},g.prototype.shadow=function(O,F){var V=this.attr(),rt=F||V,ot=rt.shadowOffsetX,st=rt.shadowOffsetY,Mt=rt.shadowBlur,yt=rt.shadowColor;(ot||st||Mt||yt)&&Object(t.b)(this,O)},g.prototype.transform=function(O){var F=this.attr(),V=(O||F).matrix;V&&Object(t.c)(this)},g.prototype.isInShape=function(O,F){return this.isPointInPath(O,F)},g.prototype.isPointInPath=function(O,F){var V=this.get("el"),rt=this.get("canvas"),ot=rt.get("el").getBoundingClientRect(),st=O+ot.left,Mt=F+ot.top,yt=document.elementFromPoint(st,Mt);return!!(yt&&yt.isEqualNode(V))},g.prototype.getHitLineWidth=function(){var O=this.attrs,F=O.lineWidth,V=O.lineAppendWidth;return this.isStroke()?F+V:0},g}(y.AbstractShape),S=c,I=w("iTfj"),m=function(k){Object(i.b)(g,k);function g(){var O=k!==null&&k.apply(this,arguments)||this;return O.type="circle",O.canFill=!0,O.canStroke=!0,O}return g.prototype.getDefaultAttrs=function(){var O=k.prototype.getDefaultAttrs.call(this);return Object(i.a)(Object(i.a)({},O),{x:0,y:0,r:0})},g.prototype.createPath=function(O,F){var V=this.attr(),rt=this.get("el");Object(I.each)(F||V,function(ot,st){st==="x"||st==="y"?rt.setAttribute("c"+st,ot):p.b[st]&&rt.setAttribute(p.b[st],ot)})},g}(S),r=m,s=function(k){Object(i.b)(g,k);function g(){var O=k!==null&&k.apply(this,arguments)||this;return O.type="dom",O.canFill=!1,O.canStroke=!1,O}return g.prototype.createPath=function(O,F){var V=this.attr(),rt=this.get("el");if(Object(I.each)(F||V,function(yt,xt){p.b[xt]&&rt.setAttribute(p.b[xt],yt)}),typeof V.html=="function"){var ot=V.html.call(this,V);if(ot instanceof Element||ot instanceof HTMLDocument){for(var st=rt.childNodes,Mt=st.length-1;Mt>=0;Mt--)rt.removeChild(st[Mt]);rt.appendChild(ot)}else rt.innerHTML=ot}else rt.innerHTML=V.html},g}(S),d=s,C=function(k){Object(i.b)(g,k);function g(){var O=k!==null&&k.apply(this,arguments)||this;return O.type="ellipse",O.canFill=!0,O.canStroke=!0,O}return g.prototype.getDefaultAttrs=function(){var O=k.prototype.getDefaultAttrs.call(this);return Object(i.a)(Object(i.a)({},O),{x:0,y:0,rx:0,ry:0})},g.prototype.createPath=function(O,F){var V=this.attr(),rt=this.get("el");Object(I.each)(F||V,function(ot,st){st==="x"||st==="y"?rt.setAttribute("c"+st,ot):p.b[st]&&rt.setAttribute(p.b[st],ot)})},g}(S),E=C,A=function(k){Object(i.b)(g,k);function g(){var O=k!==null&&k.apply(this,arguments)||this;return O.type="image",O.canFill=!1,O.canStroke=!1,O}return g.prototype.getDefaultAttrs=function(){var O=k.prototype.getDefaultAttrs.call(this);return Object(i.a)(Object(i.a)({},O),{x:0,y:0,width:0,height:0})},g.prototype.createPath=function(O,F){var V=this,rt=this.attr(),ot=this.get("el");Object(I.each)(F||rt,function(st,Mt){Mt==="img"?V._setImage(rt.img):p.b[Mt]&&ot.setAttribute(p.b[Mt],st)})},g.prototype.setAttr=function(O,F){this.attrs[O]=F,O==="img"&&this._setImage(F)},g.prototype._setImage=function(O){var F=this.attr(),V=this.get("el");if(Object(I.isString)(O))V.setAttribute("href",O);else if(O instanceof window.Image)F.width||(V.setAttribute("width",O.width),this.attr("width",O.width)),F.height||(V.setAttribute("height",O.height),this.attr("height",O.height)),V.setAttribute("href",O.src);else if(O instanceof HTMLElement&&Object(I.isString)(O.nodeName)&&O.nodeName.toUpperCase()==="CANVAS")V.setAttribute("href",O.toDataURL());else if(O instanceof ImageData){var rt=document.createElement("canvas");rt.setAttribute("width",""+O.width),rt.setAttribute("height",""+O.height),rt.getContext("2d").putImageData(O,0,0),F.width||(V.setAttribute("width",""+O.width),this.attr("width",O.width)),F.height||(V.setAttribute("height",""+O.height),this.attr("height",O.height)),V.setAttribute("href",rt.toDataURL())}},g}(S),f=A,x=w("EYNi"),j=function(k){Object(i.b)(g,k);function g(){var O=k!==null&&k.apply(this,arguments)||this;return O.type="line",O.canFill=!1,O.canStroke=!0,O}return g.prototype.getDefaultAttrs=function(){var O=k.prototype.getDefaultAttrs.call(this);return Object(i.a)(Object(i.a)({},O),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},g.prototype.createPath=function(O,F){var V=this.attr(),rt=this.get("el");Object(I.each)(F||V,function(ot,st){if(st==="startArrow"||st==="endArrow")if(ot){var Mt=Object(I.isObject)(ot)?O.addArrow(V,p.b[st]):O.getDefaultArrow(V,p.b[st]);rt.setAttribute(p.b[st],"url(#"+Mt+")")}else rt.removeAttribute(p.b[st]);else p.b[st]&&rt.setAttribute(p.b[st],ot)})},g.prototype.getTotalLength=function(){var O=this.attr(),F=O.x1,V=O.y1,rt=O.x2,ot=O.y2;return x.c.length(F,V,rt,ot)},g.prototype.getPoint=function(O){var F=this.attr(),V=F.x1,rt=F.y1,ot=F.x2,st=F.y2;return x.c.pointAt(V,rt,ot,st,O)},g}(S),P=j,W={circle:function(g,O,F){return[["M",g,O],["m",-F,0],["a",F,F,0,1,0,F*2,0],["a",F,F,0,1,0,-F*2,0]]},square:function(g,O,F){return[["M",g-F,O-F],["L",g+F,O-F],["L",g+F,O+F],["L",g-F,O+F],["Z"]]},diamond:function(g,O,F){return[["M",g-F,O],["L",g,O-F],["L",g+F,O],["L",g,O+F],["Z"]]},triangle:function(g,O,F){var V=F*Math.sin(1/3*Math.PI);return[["M",g-F,O+V],["L",g,O-V],["L",g+F,O+V],["z"]]},triangleDown:function(g,O,F){var V=F*Math.sin(1/3*Math.PI);return[["M",g-F,O-V],["L",g+F,O-V],["L",g,O+V],["Z"]]}},X={get:function(g){return W[g]},register:function(g,O){W[g]=O},remove:function(g){delete W[g]},getAll:function(){return W}},$=function(k){Object(i.b)(g,k);function g(){var O=k!==null&&k.apply(this,arguments)||this;return O.type="marker",O.canFill=!0,O.canStroke=!0,O}return g.prototype.createPath=function(O){var F=this.get("el");F.setAttribute("d",this._assembleMarker())},g.prototype._assembleMarker=function(){var O=this._getPath();return Object(I.isArray)(O)?O.map(function(F){return F.join(" ")}).join(""):O},g.prototype._getPath=function(){var O=this.attr(),F=O.x,V=O.y,rt=O.r||O.radius,ot=O.symbol||"circle",st;return Object(I.isFunction)(ot)?st=ot:st=X.get(ot),st?st(F,V,rt):(console.warn(st+" symbol is not exist."),null)},g.symbolsFactory=X,g}(S),ft=$,Z=function(k){Object(i.b)(g,k);function g(){var O=k!==null&&k.apply(this,arguments)||this;return O.type="path",O.canFill=!0,O.canStroke=!0,O}return g.prototype.getDefaultAttrs=function(){var O=k.prototype.getDefaultAttrs.call(this);return Object(i.a)(Object(i.a)({},O),{startArrow:!1,endArrow:!1})},g.prototype.createPath=function(O,F){var V=this,rt=this.attr(),ot=this.get("el");Object(I.each)(F||rt,function(st,Mt){if(Mt==="path"&&Object(I.isArray)(st))ot.setAttribute("d",V._formatPath(st));else if(Mt==="startArrow"||Mt==="endArrow")if(st){var yt=Object(I.isObject)(st)?O.addArrow(rt,p.b[Mt]):O.getDefaultArrow(rt,p.b[Mt]);ot.setAttribute(p.b[Mt],"url(#"+yt+")")}else ot.removeAttribute(p.b[Mt]);else p.b[Mt]&&ot.setAttribute(p.b[Mt],st)})},g.prototype._formatPath=function(O){var F=O.map(function(V){return V.join(" ")}).join("");return~F.indexOf("NaN")?"":F},g.prototype.getTotalLength=function(){var O=this.get("el");return O?O.getTotalLength():null},g.prototype.getPoint=function(O){var F=this.get("el"),V=this.getTotalLength();if(V===0)return null;var rt=F?F.getPointAtLength(O*V):null;return rt?{x:rt.x,y:rt.y}:null},g}(S),lt=Z,pt=function(k){Object(i.b)(g,k);function g(){var O=k!==null&&k.apply(this,arguments)||this;return O.type="polygon",O.canFill=!0,O.canStroke=!0,O}return g.prototype.createPath=function(O,F){var V=this.attr(),rt=this.get("el");Object(I.each)(F||V,function(ot,st){st==="points"&&Object(I.isArray)(ot)&&ot.length>=2?rt.setAttribute("points",ot.map(function(Mt){return Mt[0]+","+Mt[1]}).join(" ")):p.b[st]&&rt.setAttribute(p.b[st],ot)})},g}(S),gt=pt,ut=function(k){Object(i.b)(g,k);function g(){var O=k!==null&&k.apply(this,arguments)||this;return O.type="polyline",O.canFill=!0,O.canStroke=!0,O}return g.prototype.getDefaultAttrs=function(){var O=k.prototype.getDefaultAttrs.call(this);return Object(i.a)(Object(i.a)({},O),{startArrow:!1,endArrow:!1})},g.prototype.onAttrChange=function(O,F,V){k.prototype.onAttrChange.call(this,O,F,V),["points"].indexOf(O)!==-1&&this._resetCache()},g.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},g.prototype.createPath=function(O,F){var V=this.attr(),rt=this.get("el");Object(I.each)(F||V,function(ot,st){st==="points"&&Object(I.isArray)(ot)&&ot.length>=2?rt.setAttribute("points",ot.map(function(Mt){return Mt[0]+","+Mt[1]}).join(" ")):p.b[st]&&rt.setAttribute(p.b[st],ot)})},g.prototype.getTotalLength=function(){var O=this.attr().points,F=this.get("totalLength");return Object(I.isNil)(F)?(this.set("totalLength",x.d.length(O)),this.get("totalLength")):F},g.prototype.getPoint=function(O){var F=this.attr().points,V=this.get("tCache");V||(this._setTcache(),V=this.get("tCache"));var rt,ot;return Object(I.each)(V,function(st,Mt){O>=st[0]&&O<=st[1]&&(rt=(O-st[0])/(st[1]-st[0]),ot=Mt)}),x.c.pointAt(F[ot][0],F[ot][1],F[ot+1][0],F[ot+1][1],rt)},g.prototype._setTcache=function(){var O=this.attr().points;if(!(!O||O.length===0)){var F=this.getTotalLength();if(!(F<=0)){var V=0,rt=[],ot,st;Object(I.each)(O,function(Mt,yt){O[yt+1]&&(ot=[],ot[0]=V/F,st=x.c.length(Mt[0],Mt[1],O[yt+1][0],O[yt+1][1]),V+=st,ot[1]=V/F,rt.push(ot))}),this.set("tCache",rt)}}},g.prototype.getStartTangent=function(){var O=this.attr().points,F=[];return F.push([O[1][0],O[1][1]]),F.push([O[0][0],O[0][1]]),F},g.prototype.getEndTangent=function(){var O=this.attr().points,F=O.length-1,V=[];return V.push([O[F-1][0],O[F-1][1]]),V.push([O[F][0],O[F][1]]),V},g}(S),Bt=ut,Lt=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,St=/[^\s,]+/gi;function K(k){var g=0,O=0,F=0,V=0;return Object(I.isArray)(k)?k.length===1?g=O=F=V=k[0]:k.length===2?(g=F=k[0],O=V=k[1]):k.length===3?(g=k[0],O=V=k[1],F=k[2]):(g=k[0],O=k[1],F=k[2],V=k[3]):g=O=F=V=k,{r1:g,r2:O,r3:F,r4:V}}function dt(k){if(k=k||[],Object(I.isArray)(k))return k;if(Object(I.isString)(k))return k=k.match(Lt),Object(I.each)(k,function(g,O){if(g=g.match(St),g[0].length>1){var F=g[0].charAt(0);g.splice(1,0,g[0].substr(1)),g[0]=F}Object(I.each)(g,function(V,rt){isNaN(V)||(g[rt]=+V)}),k[O]=g}),k}var mt=function(k){Object(i.b)(g,k);function g(){var O=k!==null&&k.apply(this,arguments)||this;return O.type="rect",O.canFill=!0,O.canStroke=!0,O}return g.prototype.getDefaultAttrs=function(){var O=k.prototype.getDefaultAttrs.call(this);return Object(i.a)(Object(i.a)({},O),{x:0,y:0,width:0,height:0,radius:0})},g.prototype.createPath=function(O,F){var V=this,rt=this.attr(),ot=this.get("el"),st=!1,Mt=["x","y","width","height","radius"];Object(I.each)(F||rt,function(yt,xt){Mt.indexOf(xt)!==-1&&!st?(ot.setAttribute("d",V._assembleRect(rt)),st=!0):Mt.indexOf(xt)===-1&&p.b[xt]&&ot.setAttribute(p.b[xt],yt)})},g.prototype._assembleRect=function(O){var F=O.x,V=O.y,rt=O.width,ot=O.height,st=O.radius;if(!st)return"M "+F+","+V+" l "+rt+",0 l 0,"+ot+" l"+-rt+" 0 z";var Mt=K(st);Object(I.isArray)(st)?st.length===1?Mt.r1=Mt.r2=Mt.r3=Mt.r4=st[0]:st.length===2?(Mt.r1=Mt.r3=st[0],Mt.r2=Mt.r4=st[1]):st.length===3?(Mt.r1=st[0],Mt.r2=Mt.r4=st[1],Mt.r3=st[2]):(Mt.r1=st[0],Mt.r2=st[1],Mt.r3=st[2],Mt.r4=st[3]):Mt.r1=Mt.r2=Mt.r3=Mt.r4=st;var yt=[["M "+(F+Mt.r1)+","+V],["l "+(rt-Mt.r1-Mt.r2)+",0"],["a "+Mt.r2+","+Mt.r2+",0,0,1,"+Mt.r2+","+Mt.r2],["l 0,"+(ot-Mt.r2-Mt.r3)],["a "+Mt.r3+","+Mt.r3+",0,0,1,"+-Mt.r3+","+Mt.r3],["l "+(Mt.r3+Mt.r4-rt)+",0"],["a "+Mt.r4+","+Mt.r4+",0,0,1,"+-Mt.r4+","+-Mt.r4],["l 0,"+(Mt.r4+Mt.r1-ot)],["a "+Mt.r1+","+Mt.r1+",0,0,1,"+Mt.r1+","+-Mt.r1],["z"]];return yt.join(" ")},g}(S),bt=mt,wt=w("e0ae"),J=.3,ct={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},it={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},_={left:"left",start:"left",center:"middle",right:"end",end:"end"},R=function(k){Object(i.b)(g,k);function g(){var O=k!==null&&k.apply(this,arguments)||this;return O.type="text",O.canFill=!0,O.canStroke=!0,O}return g.prototype.getDefaultAttrs=function(){var O=k.prototype.getDefaultAttrs.call(this);return Object(i.a)(Object(i.a)({},O),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},g.prototype.createPath=function(O,F){var V=this,rt=this.attr(),ot=this.get("el");this._setFont(),Object(I.each)(F||rt,function(st,Mt){Mt==="text"?V._setText(""+st):Mt==="matrix"&&st?Object(t.c)(V):p.b[Mt]&&ot.setAttribute(p.b[Mt],st)}),ot.setAttribute("paint-order","stroke"),ot.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},g.prototype._setFont=function(){var O=this.get("el"),F=this.attr(),V=F.textBaseline,rt=F.textAlign,ot=Object(wt.a)();ot&&ot.name==="firefox"?O.setAttribute("dominant-baseline",it[V]||"alphabetic"):O.setAttribute("alignment-baseline",ct[V]||"baseline"),O.setAttribute("text-anchor",_[rt]||"left")},g.prototype._setText=function(O){var F=this.get("el"),V=this.attr(),rt=V.x,ot=V.textBaseline,st=ot===void 0?"bottom":ot;if(!O)F.innerHTML="";else if(~O.indexOf(`
`)){var Mt=O.split(`
`),yt=Mt.length-1,xt="";Object(I.each)(Mt,function(Ot,jt){jt===0?st==="alphabetic"?xt+='<tspan x="'+rt+'" dy="'+-yt+'em">'+Ot+"</tspan>":st==="top"?xt+='<tspan x="'+rt+'" dy="0.9em">'+Ot+"</tspan>":st==="middle"?xt+='<tspan x="'+rt+'" dy="'+-(yt-1)/2+'em">'+Ot+"</tspan>":st==="bottom"?xt+='<tspan x="'+rt+'" dy="-'+(yt+J)+'em">'+Ot+"</tspan>":st==="hanging"&&(xt+='<tspan x="'+rt+'" dy="'+(-(yt-1)-J)+'em">'+Ot+"</tspan>"):xt+='<tspan x="'+rt+'" dy="1em">'+Ot+"</tspan>"}),F.innerHTML=xt}else F.innerHTML=O},g}(S),Q=R},aSjE:function(qe,Pt,w){"use strict";w.d(Pt,"b",function(){return H}),w.d(Pt,"c",function(){return i}),w.d(Pt,"a",function(){return y});function H(t,n){var u=[],p=t[0],b=t[1],c=t[2],S=t[3],I=t[4],m=t[5],r=t[6],s=t[7],d=t[8],C=n[0],E=n[1],A=n[2],f=n[3],x=n[4],j=n[5],P=n[6],W=n[7],X=n[8];return u[0]=C*p+E*S+A*r,u[1]=C*b+E*I+A*s,u[2]=C*c+E*m+A*d,u[3]=f*p+x*S+j*r,u[4]=f*b+x*I+j*s,u[5]=f*c+x*m+j*d,u[6]=P*p+W*S+X*r,u[7]=P*b+W*I+X*s,u[8]=P*c+W*m+X*d,u}function i(t,n){var u=[],p=n[0],b=n[1];return u[0]=t[0]*p+t[3]*b+t[6],u[1]=t[1]*p+t[4]*b+t[7],u}function y(t){var n=[],u=t[0],p=t[1],b=t[2],c=t[3],S=t[4],I=t[5],m=t[6],r=t[7],s=t[8],d=s*S-I*r,C=-s*c+I*m,E=r*c-S*m,A=u*d+p*C+b*E;return A?(A=1/A,n[0]=d*A,n[1]=(-s*p+b*r)*A,n[2]=(I*p-b*S)*A,n[3]=C*A,n[4]=(s*u-b*m)*A,n[5]=(-I*u+b*c)*A,n[6]=E*A,n[7]=(-r*u+p*m)*A,n[8]=(S*u-p*c)*A,n):null}},adU4:function(qe,Pt,w){var H=w("y1pI"),i=Array.prototype,y=i.splice;function t(n){var u=this.__data__,p=H(u,n);if(p<0)return!1;var b=u.length-1;return p==b?u.pop():y.call(u,p,1),--this.size,!0}qe.exports=t},b80T:function(qe,Pt,w){var H=w("UNi/"),i=w("03A+"),y=w("Z0cm"),t=w("DSRE"),n=w("wJg7"),u=w("c6wG"),p=Object.prototype,b=p.hasOwnProperty;function c(S,I){var m=y(S),r=!m&&i(S),s=!m&&!r&&t(S),d=!m&&!r&&!s&&u(S),C=m||r||s||d,E=C?H(S.length,String):[],A=E.length;for(var f in S)(I||b.call(S,f))&&!(C&&(f=="length"||s&&(f=="offset"||f=="parent")||d&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||n(f,A)))&&E.push(f);return E}qe.exports=c},bahg:function(qe,Pt){function w(H){return H.split("")}qe.exports=w},"c+wO":function(qe,Pt,w){"use strict";w.d(Pt,"b",function(){return y}),w.d(Pt,"a",function(){return t}),w.d(Pt,"d",function(){return n}),w.d(Pt,"c",function(){return u});var H=w("iTfj"),i=w("IvmH");function y(p){return document.createElementNS("http://www.w3.org/2000/svg",p)}function t(p){var b=i.a[p.type],c=p.getParent();if(!b)throw new Error("the type "+p.type+" is not supported by svg");var S=y(b);if(p.get("id")&&(S.id=p.get("id")),p.set("el",S),p.set("attrs",{}),c){var I=c.get("el");I||(I=c.createDom(),c.set("el",I)),I.appendChild(S)}return S}function n(p,b){var c=p.get("el"),S=Object(H.toArray)(c.children).sort(b),I=document.createDocumentFragment();S.forEach(function(m){I.appendChild(m)}),c.appendChild(I)}function u(p,b){var c=p.parentNode,S=Array.from(c.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),I=S[b],m=S.indexOf(p);if(I){if(m>b)c.insertBefore(p,I);else if(m<b){var r=S[b+1];r?c.insertBefore(p,r):c.appendChild(p)}}else c.appendChild(p)}},c0lT:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return y}),w.d(Pt,"b",function(){return t});var H=w("APlK"),i=w("c+wO");function y(n,u){u.forEach(function(p){p.draw(n)})}function t(n,u){var p=n.get("canvas");if(p&&p.get("autoDraw")){var b=p.get("context"),c=n.getParent(),S=c?c.getChildren():[p],I=n.get("el");if(u==="remove"){var m=n.get("isClipShape");if(m){var r=I&&I.parentNode,s=r&&r.parentNode;r&&s&&s.removeChild(r)}else I&&I.parentNode&&I.parentNode.removeChild(I)}else if(u==="show")I.setAttribute("visibility","visible");else if(u==="hide")I.setAttribute("visibility","hidden");else if(u==="zIndex")Object(i.c)(I,S.indexOf(n));else if(u==="sort"){var d=n.get("children");d&&d.length&&Object(i.d)(n,function(C,E){return d.indexOf(C)-d.indexOf(E)?1:0})}else u==="clear"?I&&(I.innerHTML=""):u==="matrix"?Object(H.c)(n):u==="clip"?Object(H.a)(n,b):u==="attr"||u==="add"&&n.draw(b)}}},c6wG:function(qe,Pt,w){var H=w("dD9F"),i=w("sEf8"),y=w("mdPL"),t=y&&y.isTypedArray,n=t?i(t):H;qe.exports=n},cBFB:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return W});var H=w("mrSG"),i=w("YuPD"),y=w("zJSt"),t=w("tKoa"),n=w("w02o"),u=w("+Nd1"),p=w("a8tM"),b=w("iTfj"),c=w("I7nc"),S={field:"value",size:[1,1],round:!1,padding:0,sort:!0,as:["x","y"]};function I(X,$){$=Object(b.assign)({},S,$);var ft=$.as;if(!Object(b.isArray)(ft)||ft.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var Z;try{Z=Object(c.b)($)}catch(Bt){console.warn(Bt)}var lt=function(Lt){return u.a().size($.size).round($.round).padding($.padding)(p.c(Lt).sum(function(St){return St[Z]}))},pt=lt(X),gt=ft[0],ut=ft[1];return pt.each(function(Bt){Bt[gt]=[Bt.x0,Bt.x1,Bt.x1,Bt.x0],Bt[ut]=[Bt.y1,Bt.y1,Bt.y0,Bt.y0],["x0","x1","y0","y1"].forEach(function(Lt){ft.indexOf(Lt)===-1&&delete Bt[Lt]})}),Object(c.a)(pt)}var m=w("NzZ7");function r(X){var $=X.data,ft=X.type,Z=X.seriesField,lt=X.colorField,pt=X.hierarchyConfig,gt={partition:I,treemap:m.a},ut=gt[ft]($,Object(H.a)(Object(H.a)({},pt),{type:"hierarchy."+ft,field:Z,as:["x","y"]})),Bt=[];return ut.forEach(function(Lt){var St,K,dt,mt,bt;if(Lt.depth===0)return null;var wt=Object(H.a)((St={},St[Z]=Lt.data[Z]||((dt=(K=Lt.parent)===null||K===void 0?void 0:K.data)===null||dt===void 0?void 0:dt[Z]),St[lt]=Lt.data[lt]||((bt=(mt=Lt.parent)===null||mt===void 0?void 0:mt.data)===null||bt===void 0?void 0:bt[lt]),St),Lt);wt.ext=pt,Bt.push(wt)}),Bt}function s(X){var $=X.items,ft=X.formatter,Z=X.fields,lt=$[0]||{},pt=lt.color,gt=lt.mappingData,ut=lt.data,Bt=document.createElement("ul");Bt.className="g2-tooltip";var Lt="",St=function(dt,mt){var bt;return ft?ft(Object(H.a)(Object(H.a)({},dt),{field:mt})):{name:mt,value:(dt==null?void 0:dt[mt])||((bt=dt==null?void 0:dt.data)===null||bt===void 0?void 0:bt[mt])}};return Z.forEach(function(K){var dt=St(ut,K),mt=dt.name,bt=dt.value;Lt+=`<li class="g2-tooltip-list-item" data-index={index} style="margin-bottom:4px;display:flex;align-items: center;">
        <span style="background-color:`+((gt==null?void 0:gt.color)||pt)+`;" class="g2-tooltip-marker"></span>
        <span style="display:inline-flex;flex:1;justify-content:space-between">
        <span style="margin-right: 16px;">`+mt+`:</span>
        <span class="g2-tooltip-list-item-value">`+bt+`</span>
        </span>
    </li>`}),Bt.innerHTML=Lt,Bt}function d(X){var $=X.chart,ft=X.options,Z=ft.color,lt=ft.colorField,pt=ft.sunburstStyle,gt=r(ft);return $.data(gt),Object(t.f)(Object(i.b)({},X,{options:{xField:"x",yField:"y",seriesField:lt,polygon:{color:Z,style:pt}}})),X}function C(X){var $=X.chart;return $.axis(!1),X}function E(X){var $=X.chart;return $.legend(!1),X}function A(X){var $=X.chart,ft=X.options,Z=ft.label,lt=ft.seriesField,pt=Object(i.c)($,"polygon");if(!Z)pt.label(!1);else{var gt=Z.callback,ut=Object(H.c)(Z,["callback"]);pt.label({fields:[lt],callback:gt,cfg:Object(i.o)(ut)})}return X}function f(X){var $=X.chart,ft=X.options,Z=ft.innerRadius,lt=ft.radius,pt=ft.reflect,gt=$.coordinate({type:"polar",cfg:{innerRadius:Z,radius:lt}});return pt&&gt.reflect(pt),X}function x(X){var $=X.chart,ft=X.options,Z=ft.meta;return Z&&$.scale(Z),X}function j(X){var $=X.chart,ft=X.options,Z=ft.tooltip,lt=ft.seriesField,pt=ft.colorField;return Z&&$.tooltip(Object(H.a)(Object(H.a)({},Z),{customContent:Z&&Z.customContent?Z.customContent:function(gt,ut){return s({value:gt,items:ut,formatter:Z&&(Z==null?void 0:Z.formatter),fields:Z&&Z.fields||[lt,pt]})}})),X}function P(X){return Object(i.e)(d,n.j,C,x,E,f,j,A,n.c,n.a,Object(n.b)())(X)}var W=function(X){Object(H.b)($,X);function $(){var ft=X!==null&&X.apply(this,arguments)||this;return ft.type="sunburst",ft}return $.prototype.getDefaultOptions=function(){return Object(i.b)({},X.prototype.getDefaultOptions.call(this),{type:"partition",innerRadius:0,seriesField:"value",tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1}})},$.prototype.getSchemaAdaptor=function(){return P},$}(y.a)},chpo:function(qe,Pt,w){"use strict";Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.default=void 0;var H=1,i=function(){return"".concat(H++)};Pt.default=i},cyZq:function(qe,Pt,w){"use strict";w.d(Pt,"d",function(){return i}),w.d(Pt,"b",function(){return y}),w.d(Pt,"e",function(){return t}),w.d(Pt,"f",function(){return n}),w.d(Pt,"l",function(){return u}),w.d(Pt,"j",function(){return p});var H=w("iTfj");w.d(Pt,"i",function(){return H.isNil}),w.d(Pt,"k",function(){return H.isString}),w.d(Pt,"h",function(){return H.isFunction}),w.d(Pt,"g",function(){return H.isArray}),w.d(Pt,"c",function(){return H.each}),w.d(Pt,"o",function(){return H.toRadian}),w.d(Pt,"m",function(){return H.mod}),w.d(Pt,"n",function(){return H.requestAnimationFrame}),w.d(Pt,"a",function(){return H.clearAnimationFrame});function i(){return window?window.devicePixelRatio:1}function y(b,c,S,I){var m=b-S,r=c-I;return Math.sqrt(m*m+r*r)}function t(b,c,S,I,m,r){return m>=b&&m<=b+S&&r>=c&&r<=c+I}function n(b,c){return!(c.minX>b.maxX||c.maxX<b.minX||c.minY>b.maxY||c.maxY<b.minY)}function u(b,c){return!b||!c?b||c:{minX:Math.min(b.minX,c.minX),minY:Math.min(b.minY,c.minY),maxX:Math.max(b.maxX,c.maxX),maxY:Math.max(b.maxY,c.maxY)}}function p(b,c){return b[0]===c[0]&&b[1]===c[1]}},dD9F:function(qe,Pt,w){var H=w("NykK"),i=w("shjB"),y=w("ExA7"),t="[object Arguments]",n="[object Array]",u="[object Boolean]",p="[object Date]",b="[object Error]",c="[object Function]",S="[object Map]",I="[object Number]",m="[object Object]",r="[object RegExp]",s="[object Set]",d="[object String]",C="[object WeakMap]",E="[object ArrayBuffer]",A="[object DataView]",f="[object Float32Array]",x="[object Float64Array]",j="[object Int8Array]",P="[object Int16Array]",W="[object Int32Array]",X="[object Uint8Array]",$="[object Uint8ClampedArray]",ft="[object Uint16Array]",Z="[object Uint32Array]",lt={};lt[f]=lt[x]=lt[j]=lt[P]=lt[W]=lt[X]=lt[$]=lt[ft]=lt[Z]=!0,lt[t]=lt[n]=lt[E]=lt[u]=lt[A]=lt[p]=lt[b]=lt[c]=lt[S]=lt[I]=lt[m]=lt[r]=lt[s]=lt[d]=lt[C]=!1;function pt(gt){return y(gt)&&i(gt.length)&&!!lt[H(gt)]}qe.exports=pt},de35:function(qe,Pt,w){"use strict";var H=w("mrSG"),i=w("fIp6"),y=w("iTfj"),t=w("5UbV"),n=w("NmWf"),u=function(p){Object(H.b)(b,p);function b(){return p!==null&&p.apply(this,arguments)||this}return b.prototype.getDefaultCfg=function(){var c=p.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},c),{container:null,containerTpl:"<div></div>",updateAutoRender:!0,containerClassName:"",parent:null})},b.prototype.getContainer=function(){return this.get("container")},b.prototype.show=function(){var c=this.get("container");c.style.display="",this.set("visible",!0)},b.prototype.hide=function(){var c=this.get("container");c.style.display="none",this.set("visible",!1)},b.prototype.setCapture=function(c){var S=this.getContainer(),I=c?"auto":"none";S.style.pointerEvents=I,this.set("capture",c)},b.prototype.getBBox=function(){var c=this.getContainer(),S=parseFloat(c.style.left)||0,I=parseFloat(c.style.top)||0;return Object(t.b)(S,I,c.clientWidth,c.clientHeight)},b.prototype.clear=function(){var c=this.get("container");Object(t.a)(c)},b.prototype.destroy=function(){this.removeEvent(),this.removeDom(),p.prototype.destroy.call(this)},b.prototype.init=function(){p.prototype.init.call(this),this.initContainer(),this.initDom(),this.resetStyles(),this.applyStyles(),this.initEvent(),this.initCapture(),this.initVisible()},b.prototype.initCapture=function(){this.setCapture(this.get("capture"))},b.prototype.initVisible=function(){this.get("visible")?this.show():this.hide()},b.prototype.initDom=function(){},b.prototype.initContainer=function(){var c=this.get("container");if(Object(y.isNil)(c)){c=this.createDom();var S=this.get("parent");Object(y.isString)(S)&&(S=document.getElementById(S),this.set("parent",S)),S.appendChild(c),this.set("container",c)}else Object(y.isString)(c)&&(c=document.getElementById(c),this.set("container",c));this.get("parent")||this.set("parent",c.parentNode)},b.prototype.resetStyles=function(){var c=this.get("domStyles"),S=this.get("defaultStyles");c?c=Object(y.deepMix)({},S,c):c=S,this.set("domStyles",c)},b.prototype.applyStyles=function(){var c=this.get("domStyles");if(!!c){var S=this.getContainer();this.applyChildrenStyles(S,c);var I=this.get("containerClassName");if(I&&Object(t.h)(S,I)){var m=c[I];Object(i.e)(S,m)}}},b.prototype.applyChildrenStyles=function(c,S){Object(y.each)(S,function(I,m){var r=c.getElementsByClassName(m);Object(y.each)(r,function(s){Object(i.e)(s,I)})})},b.prototype.applyStyle=function(c,S){var I=this.get("domStyles");Object(i.e)(S,I[c])},b.prototype.createDom=function(){var c=this.get("containerTpl");return Object(i.b)(c)},b.prototype.initEvent=function(){},b.prototype.removeDom=function(){var c=this.get("container");c&&c.parentNode&&c.parentNode.removeChild(c)},b.prototype.removeEvent=function(){},b.prototype.updateInner=function(c){Object(y.hasKey)(c,"domStyles")&&(this.resetStyles(),this.applyStyles()),this.resetPosition()},b.prototype.resetPosition=function(){},b}(n.a);Pt.a=u},dt0z:function(qe,Pt,w){var H=w("zoYe");function i(y){return y==null?"":H(y)}qe.exports=i},e0ae:function(qe,Pt,w){"use strict";(function(H){w.d(Pt,"a",function(){return r});var i=function(){for(var x=0,j=0,P=arguments.length;j<P;j++)x+=arguments[j].length;for(var W=Array(x),X=0,j=0;j<P;j++)for(var $=arguments[j],ft=0,Z=$.length;ft<Z;ft++,X++)W[X]=$[ft];return W},y=function(){function x(j,P,W){this.name=j,this.version=P,this.os=W,this.type="browser"}return x}(),t=function(){function x(j){this.version=j,this.type="node",this.name="node",this.os=H.platform}return x}(),n=function(){function x(j,P,W,X){this.name=j,this.version=P,this.os=W,this.bot=X,this.type="bot-device"}return x}(),u=function(){function x(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return x}(),p=function(){function x(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return x}(),b=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,c=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,S=3,I=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",b]],m=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function r(x){return x?C(x):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new p:typeof navigator!="undefined"?C(navigator.userAgent):A()}function s(x){return x!==""&&I.reduce(function(j,P){var W=P[0],X=P[1];if(j)return j;var $=X.exec(x);return!!$&&[W,$]},!1)}function d(x){var j=s(x);return j?j[0]:null}function C(x){var j=s(x);if(!j)return null;var P=j[0],W=j[1];if(P==="searchbot")return new u;var X=W[1]&&W[1].split(/[._]/).slice(0,3);X?X.length<S&&(X=i(X,f(S-X.length))):X=[];var $=X.join("."),ft=E(x),Z=c.exec(x);return Z&&Z[1]?new n(P,$,ft,Z[1]):new y(P,$,ft)}function E(x){for(var j=0,P=m.length;j<P;j++){var W=m[j],X=W[0],$=W[1],ft=$.exec(x);if(ft)return X}return null}function A(){var x=typeof H!="undefined"&&H.version;return x?new t(H.version.slice(1)):null}function f(x){for(var j=[],P=0;P<x;P++)j.push("0");return j}}).call(this,w("Q2Ig"))},e4Nc:function(qe,Pt,w){var H=w("fGT3"),i=w("k+1r"),y=w("JHgL"),t=w("pSRY"),n=w("H8j4");function u(p){var b=-1,c=p==null?0:p.length;for(this.clear();++b<c;){var S=p[b];this.set(S[0],S[1])}}u.prototype.clear=H,u.prototype.delete=i,u.prototype.get=y,u.prototype.has=t,u.prototype.set=n,qe.exports=u},e5cp:function(qe,Pt,w){var H=w("fmRc"),i=w("or5M"),y=w("HDyB"),t=w("seXi"),n=w("QqLw"),u=w("Z0cm"),p=w("DSRE"),b=w("c6wG"),c=1,S="[object Arguments]",I="[object Array]",m="[object Object]",r=Object.prototype,s=r.hasOwnProperty;function d(C,E,A,f,x,j){var P=u(C),W=u(E),X=P?I:n(C),$=W?I:n(E);X=X==S?m:X,$=$==S?m:$;var ft=X==m,Z=$==m,lt=X==$;if(lt&&p(C)){if(!p(E))return!1;P=!0,ft=!1}if(lt&&!ft)return j||(j=new H),P||b(C)?i(C,E,A,f,x,j):y(C,E,X,A,f,x,j);if(!(A&c)){var pt=ft&&s.call(C,"__wrapped__"),gt=Z&&s.call(E,"__wrapped__");if(pt||gt){var ut=pt?C.value():C,Bt=gt?E.value():E;return j||(j=new H),x(ut,Bt,A,f,j)}}return lt?(j||(j=new H),t(C,E,A,f,x,j)):!1}qe.exports=d},eHqw:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return j});var H=w("mrSG"),i=w("zJSt"),y=w("KMYG"),t=w("w02o"),n=w("YuPD"),u=w("iTfj"),p=w("NzZ7");function b(P){return Object(u.isArray)(P)?P.findIndex(function(W){return W.type==="treemap-drill-down"})>-1:!1}function c(P,W){var X=b(P);return X?P.map(function($){return $.type==="treemap-drill-down"?Object(n.b)({},$,{cfg:{hierarchyConfig:W}}):$}):P}function S(P){var W=P.data,X=P.colorField,$=P.openDrillDown,ft=P.hierarchyConfig,Z=ft===void 0?{}:ft,lt=Object(p.a)(W,Object(H.a)(Object(H.a)({},Z),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),pt=[];return lt.forEach(function(gt){if(gt.depth===0||$&&gt.depth!==1||!$&&gt.children)return null;var ut=Object.assign({},gt.data,{x:gt.x,y:gt.y,depth:gt.depth,value:gt.value});if(!gt.data[X]&&gt.parent){var Bt=gt.ancestors().find(function(Lt){return Lt.data[X]});ut[X]=Bt==null?void 0:Bt.data[X]}else ut[X]=gt.data[X];pt.push(ut)}),pt}function I(P){var W=P.options,X=W.colorField;return Object(n.b)({options:{colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapResquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1,fields:["name","value",X],formatter:function(ft){return{name:ft.name,value:ft.value}}},interactions:[{type:"view-zoom"},{type:"treemap-element-zoom"}]}},P)}function m(P){var W=P.chart,X=P.options,$=X.color,ft=X.colorField,Z=X.rectStyle,lt=S({data:X.data,colorField:X.colorField,openDrillDown:b(X.interactions)});return W.data(lt),Object(y.a)(Object(n.b)({},P,{options:{xField:"x",yField:"y",seriesField:ft,rawFields:["value"],polygon:{color:$,style:Z}}})),P}function r(P){var W=P.chart;return W.axis(!1),P}function s(P){var W=P.chart,X=P.options,$=X.interactions,ft=X.hierarchyConfig;return Object(t.c)({chart:W,options:{interactions:c($,ft)}}),P}function d(P){return Object(n.e)(I,m,r,t.j,t.d,t.k,s,t.a,Object(t.b)())(P)}var C=w("Ihc8"),E=function(P){Object(H.b)(W,P);function W(){var X=P!==null&&P.apply(this,arguments)||this;return X.cacheDataStack=[],X}return W.prototype.drill=function(X){console.log(this.context);var $=this.context.view,ft=$.getData(),Z=$.getGroupScales(),lt=Object(u.get)($,["interactions","treemap-drill-down","cfg","hierarchyConfig"],{}),pt=S({data:X,colorField:Object(u.get)(Z,[0,"field"]),openDrillDown:!0,hierarchyConfig:lt});$.changeData(pt),this.cacheDataStack.push(ft)},W.prototype.click=function(){var X=Object(u.get)(this.context,["event","data","data"]);if(!X)return!1;this.drill(X)},W.prototype.reset=function(){var X=this.context.view;if(!(!Object(u.isArray)(this.cacheDataStack)||this.cacheDataStack.length<=0)){var $=this.cacheDataStack.splice(this.cacheDataStack.length-1,1);X.changeData($[0])}},W}(C.Action);function A(P){var W=Object(u.get)(P,["event","data","data"],{});return Object(u.isArray)(W.children)&&W.children.length>0&&W.depth===1}function f(P){if(!P||!P.getAction)return!1;var W=P.getAction("treemap-drill-down-action");if(!W)return!1;var X=W.cacheDataStack;return Object(u.isArray)(X)&&X.length>0}Object(C.registerAction)("treemap-drill-down-action",E),Object(C.registerInteraction)("treemap-drill-down",{showEnable:[{trigger:"plot:mouseenter",action:"cursor:pointer"},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"element:click",isEnable:A,action:["treemap-drill-down-action:click","reset-button:show"]}],rollback:[{trigger:"reset-button:click",action:["treemap-drill-down-action:reset"]},{trigger:"reset-button:click",action:["reset-button:hide"],isEnable:function(W){return!f(W)}}]});var x=w("hag6"),j=function(P){Object(H.b)(W,P);function W(){var X=P!==null&&P.apply(this,arguments)||this;return X.type="treemap",X}return W.prototype.getSchemaAdaptor=function(){return d},W}(i.a)},eUgh:function(qe,Pt){function w(H,i){for(var y=-1,t=H==null?0:H.length,n=Array(t);++y<t;)n[y]=i(H[y],y,H);return n}qe.exports=w},ebwN:function(qe,Pt,w){var H=w("Cwc5"),i=w("Kz5y"),y=H(i,"Map");qe.exports=y},ekgI:function(qe,Pt,w){var H=w("YESw"),i=Object.prototype,y=i.hasOwnProperty;function t(n){var u=this.__data__;return H?u[n]!==void 0:y.call(u,n)}qe.exports=t},f6Jy:function(qe,Pt,w){"use strict";var H="*",i=function(){function y(){this._events={}}return y.prototype.on=function(t,n,u){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:n,once:!!u}),this},y.prototype.once=function(t,n){return this.on(t,n,!0),this},y.prototype.emit=function(t){for(var n=this,u=[],p=1;p<arguments.length;p++)u[p-1]=arguments[p];var b=this._events[t]||[],c=this._events[H]||[],S=function(m){for(var r=m.length,s=0;s<r;s++)if(!!m[s]){var d=m[s],C=d.callback,E=d.once;E&&(m.splice(s,1),m.length===0&&delete n._events[t],r--,s--),C.apply(n,u)}};S(b),S(c)},y.prototype.off=function(t,n){if(!t)this._events={};else if(!n)delete this._events[t];else{for(var u=this._events[t]||[],p=u.length,b=0;b<p;b++)u[b].callback===n&&(u.splice(b,1),p--,b--);u.length===0&&delete this._events[t]}return this},y.prototype.getEvents=function(){return this._events},y}();Pt.a=i},fD4D:function(qe,Pt,w){"use strict";var H=w("ShmH"),i=w.n(H);i.a.version="4.1.7",Pt.default=i.a;var y="4.1.7"},fFDA:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return ft});var H=w("mrSG"),i=w("iTfj"),y=w("MeYt"),t={opacity:0},n={stroke:"#C5C5C5",strokeOpacity:.85},u={fill:"#CACED4",opacity:.85},p=w("LvGN"),b=w("8vsG");function c(lt){return Object(i.map)(lt,function(pt,gt){var ut=gt===0?"M":"L",Bt=pt[0],Lt=pt[1];return[ut,Bt,Lt]})}function S(lt){return c(lt)}function I(lt){if(lt.length<=2)return S(lt);var pt=[];Object(i.each)(lt,function(St){Object(i.isEqual)(St,pt.slice(pt.length-2))||pt.push(St[0],St[1])});var gt=Object(p.a)(pt,!1),ut=Object(i.head)(lt),Bt=ut[0],Lt=ut[1];return gt.unshift(["M",Bt,Lt]),gt}function m(lt,pt,gt,ut){ut===void 0&&(ut=!0);var Bt=new b.b({values:lt}),Lt=new b.a({values:Object(i.map)(lt,function(K,dt){return dt})}),St=Object(i.map)(lt,function(K,dt){return[Lt.scale(dt)*pt,gt-Bt.scale(K)*gt]});return ut?I(St):S(St)}function r(lt,pt){var gt=new b.b({values:lt}),ut=Math.max(0,gt.min);return pt-gt.scale(ut)*pt}function s(lt,pt,gt,ut){var Bt=Object(H.d)(lt),Lt=r(ut,gt);return Bt.push(["L",pt,Lt]),Bt.push(["L",0,Lt]),Bt.push(["Z"]),Bt}var d=function(lt){Object(H.b)(pt,lt);function pt(){return lt!==null&&lt.apply(this,arguments)||this}return pt.prototype.getDefaultCfg=function(){var gt=lt.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},gt),{name:"trend",x:0,y:0,width:200,height:16,smooth:!0,isArea:!1,data:[],backgroundStyle:t,lineStyle:n,areaStyle:u})},pt.prototype.renderInner=function(gt){var ut=this.cfg,Bt=ut.width,Lt=ut.height,St=ut.data,K=ut.smooth,dt=ut.isArea,mt=ut.backgroundStyle,bt=ut.lineStyle,wt=ut.areaStyle;this.addShape(gt,{id:this.getElementId("background"),type:"rect",attrs:Object(H.a)({x:0,y:0,width:Bt,height:Lt},mt)});var J=m(St,Bt,Lt,K);if(this.addShape(gt,{id:this.getElementId("line"),type:"path",attrs:Object(H.a)({path:J},bt)}),dt){var ct=s(J,Bt,Lt,St);this.addShape(gt,{id:this.getElementId("area"),type:"path",attrs:Object(H.a)({path:ct},wt)})}},pt.prototype.applyOffset=function(){var gt=this.cfg,ut=gt.x,Bt=gt.y;this.moveElementTo(this.get("group"),{x:ut,y:Bt})},pt}(y.a),C=d,E={fill:"#416180",opacity:.05},A={fill:"#5B8FF9",opacity:.15,cursor:"move"},f=10,x={width:f,height:24},j={textBaseline:"middle",fill:"#000",opacity:.45},P="sliderchange",W={fill:"#F7F7F7",stroke:"#BFBFBF",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#FFF"},X=function(lt){Object(H.b)(pt,lt);function pt(){return lt!==null&&lt.apply(this,arguments)||this}return pt.prototype.getDefaultCfg=function(){var gt=lt.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},gt),{name:"handler",x:0,y:0,width:10,height:24,style:W})},pt.prototype.renderInner=function(gt){var ut=this.cfg,Bt=ut.width,Lt=ut.height,St=ut.style,K=St.fill,dt=St.stroke,mt=St.radius,bt=St.opacity,wt=St.cursor;this.addShape(gt,{type:"rect",id:this.getElementId("background"),attrs:{x:0,y:0,width:Bt,height:Lt,fill:K,stroke:dt,radius:mt,opacity:bt,cursor:wt}});var J=1/3*Bt,ct=2/3*Bt,it=1/4*Lt,_=3/4*Lt;this.addShape(gt,{id:this.getElementId("line-left"),type:"line",attrs:{x1:J,y1:it,x2:J,y2:_,stroke:dt,cursor:wt}}),this.addShape(gt,{id:this.getElementId("line-right"),type:"line",attrs:{x1:ct,y1:it,x2:ct,y2:_,stroke:dt,cursor:wt}})},pt.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},pt.prototype.initEvent=function(){this.bindEvents()},pt.prototype.bindEvents=function(){var gt=this;this.get("group").on("mouseenter",function(){var ut=gt.get("style").highLightFill;gt.getElementByLocalId("background").attr("fill",ut),gt.draw()}),this.get("group").on("mouseleave",function(){var ut=gt.get("style").fill;gt.getElementByLocalId("background").attr("fill",ut),gt.draw()})},pt.prototype.draw=function(){var gt=this.get("container").get("canvas");gt&&gt.draw()},pt}(y.a),$=X,ft=function(lt){Object(H.b)(pt,lt);function pt(){var gt=lt!==null&&lt.apply(this,arguments)||this;return gt.onMouseDown=function(ut){return function(Bt){gt.currentTarget=ut;var Lt=Bt.originalEvent;Lt.stopPropagation(),Lt.preventDefault(),gt.prevX=Object(i.get)(Lt,"touches.0.pageX",Lt.pageX),gt.prevY=Object(i.get)(Lt,"touches.0.pageY",Lt.pageY);var St=gt.getContainerDOM();St.addEventListener("mousemove",gt.onMouseMove),St.addEventListener("mouseup",gt.onMouseUp),St.addEventListener("mouseleave",gt.onMouseUp),St.addEventListener("touchmove",gt.onMouseMove),St.addEventListener("touchend",gt.onMouseUp),St.addEventListener("touchcancel",gt.onMouseUp)}},gt.onMouseMove=function(ut){var Bt=gt.cfg.width,Lt=[gt.get("start"),gt.get("end")];ut.stopPropagation(),ut.preventDefault();var St=Object(i.get)(ut,"touches.0.pageX",ut.pageX),K=Object(i.get)(ut,"touches.0.pageY",ut.pageY),dt=St-gt.prevX,mt=gt.adjustOffsetRange(dt/Bt);gt.updateStartEnd(mt),gt.updateUI(gt.getElementByLocalId("foreground"),gt.getElementByLocalId("minText"),gt.getElementByLocalId("maxText")),gt.prevX=St,gt.prevY=K,gt.draw(),gt.emit(P,[gt.get("start"),gt.get("end")].sort()),gt.delegateEmit("valuechanged",{originValue:Lt,value:[gt.get("start"),gt.get("end")]})},gt.onMouseUp=function(){gt.currentTarget&&(gt.currentTarget=void 0);var ut=gt.getContainerDOM();ut&&(ut.removeEventListener("mousemove",gt.onMouseMove),ut.removeEventListener("mouseup",gt.onMouseUp),ut.removeEventListener("mouseleave",gt.onMouseUp),ut.removeEventListener("touchmove",gt.onMouseMove),ut.removeEventListener("touchend",gt.onMouseUp),ut.removeEventListener("touchcancel",gt.onMouseUp))},gt}return pt.prototype.setRange=function(gt,ut){this.set("minLimit",gt),this.set("maxLimit",ut);var Bt=this.get("start"),Lt=this.get("end"),St=Object(i.clamp)(Bt,gt,ut),K=Object(i.clamp)(Lt,gt,ut);!this.get("isInit")&&(Bt!==St||Lt!==K)&&this.setValue([St,K])},pt.prototype.getRange=function(){return{min:this.get("minLimit")||0,max:this.get("maxLimit")||1}},pt.prototype.setValue=function(gt){var ut=this.getRange();if(Object(i.isArray)(gt)&&gt.length===2){var Bt=[this.get("start"),this.get("end")];this.update({start:Object(i.clamp)(gt[0],ut.min,ut.max),end:Object(i.clamp)(gt[1],ut.min,ut.max)}),this.get("updateAutoRender")||this.render(),this.delegateEmit("valuechanged",{originValue:Bt,value:gt})}},pt.prototype.getValue=function(){return[this.get("start"),this.get("end")]},pt.prototype.getDefaultCfg=function(){var gt=lt.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},gt),{name:"slider",x:0,y:0,width:100,height:16,backgroundStyle:{},foregroundStyle:{},handlerStyle:{},textStyle:{},defaultCfg:{backgroundStyle:E,foregroundStyle:A,handlerStyle:x,textStyle:j}})},pt.prototype.update=function(gt){var ut=gt.start,Bt=gt.end,Lt=Object(H.a)({},gt);Object(i.isNil)(ut)||(Lt.start=Object(i.clamp)(ut,0,1)),Object(i.isNil)(Bt)||(Lt.end=Object(i.clamp)(Bt,0,1)),lt.prototype.update.call(this,Lt),this.minHandler=this.getChildComponentById(this.getElementId("minHandler")),this.maxHandler=this.getChildComponentById(this.getElementId("maxHandler")),this.trend=this.getChildComponentById(this.getElementId("trend"))},pt.prototype.init=function(){this.set("start",Object(i.clamp)(this.get("start"),0,1)),this.set("end",Object(i.clamp)(this.get("end"),0,1)),lt.prototype.init.call(this)},pt.prototype.render=function(){lt.prototype.render.call(this),this.updateUI(this.getElementByLocalId("foreground"),this.getElementByLocalId("minText"),this.getElementByLocalId("maxText"))},pt.prototype.renderInner=function(gt){var ut=this.cfg,Bt=ut.start,Lt=ut.end,St=ut.width,K=ut.height,dt=ut.trendCfg,mt=dt===void 0?{}:dt,bt=ut.minText,wt=ut.maxText,J=ut.backgroundStyle,ct=J===void 0?{}:J,it=ut.foregroundStyle,_=it===void 0?{}:it,R=ut.textStyle,Q=R===void 0?{}:R,k=ut.handlerStyle,g=k===void 0?{}:k,O=Bt*St,F=Lt*St;Object(i.size)(Object(i.get)(mt,"data"))&&(this.trend=this.addComponent(gt,Object(H.a)({component:d,id:this.getElementId("trend"),x:0,y:0,width:St,height:K},mt))),this.addShape(gt,{id:this.getElementId("background"),type:"rect",attrs:Object(H.a)({x:0,y:0,width:St,height:K},ct)});var V=this.addShape(gt,{id:this.getElementId("minText"),type:"text",attrs:Object(H.a)({y:K/2,textAlign:"right",text:bt,silent:!1},Q)}),rt=this.addShape(gt,{id:this.getElementId("maxText"),type:"text",attrs:Object(H.a)({y:K/2,textAlign:"left",text:wt,silent:!1},Q)}),ot=this.addShape(gt,{id:this.getElementId("foreground"),name:"foreground",type:"rect",attrs:Object(H.a)({y:0,height:K},_)}),st=Object(i.get)(g,"height",24);this.minHandler=this.addComponent(gt,Object(H.a)({component:X,id:this.getElementId("minHandler"),name:"handler-min",x:0,y:(K-st)/2,width:St,height:st,cursor:"ew-resize"},g)),this.maxHandler=this.addComponent(gt,Object(H.a)({component:X,id:this.getElementId("maxHandler"),name:"handler-max",x:0,y:(K-st)/2,width:St,height:st,cursor:"ew-resize"},g))},pt.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x"),y:this.get("y")})},pt.prototype.initEvent=function(){this.bindEvents()},pt.prototype.updateUI=function(gt,ut,Bt){var Lt=this.cfg,St=Lt.start,K=Lt.end,dt=Lt.width,mt=Lt.minText,bt=Lt.maxText,wt=Lt.handlerStyle,J=Lt.height,ct=St*dt,it=K*dt;this.trend&&(this.trend.update({width:dt,height:J}),this.get("updateAutoRender")||this.trend.render()),gt.attr("x",ct),gt.attr("width",it-ct);var _=Object(i.get)(wt,"width",f);ut.attr("text",mt),Bt.attr("text",bt);var R=this._dodgeText([ct,it],ut,Bt),Q=R[0],k=R[1];this.minHandler&&(this.minHandler.update({x:ct-_/2}),this.get("updateAutoRender")||this.minHandler.render()),Object(i.each)(Q,function(g,O){return ut.attr(O,g)}),this.maxHandler&&(this.maxHandler.update({x:it-_/2}),this.get("updateAutoRender")||this.maxHandler.render()),Object(i.each)(k,function(g,O){return Bt.attr(O,g)})},pt.prototype.bindEvents=function(){var gt=this.get("group");gt.on("handler-min:mousedown",this.onMouseDown("minHandler")),gt.on("handler-min:touchstart",this.onMouseDown("minHandler")),gt.on("handler-max:mousedown",this.onMouseDown("maxHandler")),gt.on("handler-max:touchstart",this.onMouseDown("maxHandler"));var ut=gt.findById(this.getElementId("foreground"));ut.on("mousedown",this.onMouseDown("foreground")),ut.on("touchstart",this.onMouseDown("foreground"))},pt.prototype.adjustOffsetRange=function(gt){var ut=this.cfg,Bt=ut.start,Lt=ut.end;switch(this.currentTarget){case"minHandler":{var St=0-Bt,K=1-Bt;return Math.min(K,Math.max(St,gt))}case"maxHandler":{var St=0-Lt,K=1-Lt;return Math.min(K,Math.max(St,gt))}case"foreground":{var St=0-Bt,K=1-Lt;return Math.min(K,Math.max(St,gt))}}},pt.prototype.updateStartEnd=function(gt){var ut=this.cfg,Bt=ut.start,Lt=ut.end;switch(this.currentTarget){case"minHandler":Bt+=gt;break;case"maxHandler":Lt+=gt;break;case"foreground":Bt+=gt,Lt+=gt;break}this.set("start",Bt),this.set("end",Lt)},pt.prototype._dodgeText=function(gt,ut,Bt){var Lt,St,K=this.cfg,dt=K.handlerStyle,mt=K.width,bt=2,wt=Object(i.get)(dt,"width",f),J=gt[0],ct=gt[1],it=!1;J>ct&&(Lt=[ct,J],J=Lt[0],ct=Lt[1],St=[Bt,ut],ut=St[0],Bt=St[1],it=!0);var _=ut.getBBox(),R=Bt.getBBox(),Q=_.width>J-bt?{x:J+wt/2+bt,textAlign:"left"}:{x:J-wt/2-bt,textAlign:"right"},k=R.width>mt-ct-bt?{x:ct-wt/2-bt,textAlign:"right"}:{x:ct+wt/2+bt,textAlign:"left"};return it?[k,Q]:[Q,k]},pt.prototype.draw=function(){var gt=this.get("container"),ut=gt&&gt.get("canvas");ut&&ut.draw()},pt.prototype.getContainerDOM=function(){var gt=this.get("container"),ut=gt&&gt.get("canvas");return ut&&ut.get("container")},pt}(y.a),Z=ft},fGT3:function(qe,Pt,w){var H=w("4kuk"),i=w("Xi7e"),y=w("ebwN");function t(){this.size=0,this.__data__={hash:new H,map:new(y||i),string:new H}}qe.exports=t},fIp6:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return H}),w.d(Pt,"b",function(){return p}),w.d(Pt,"c",function(){return S}),w.d(Pt,"d",function(){return m}),w.d(Pt,"e",function(){return s});function H(d,C,E){if(d){if(typeof d.addEventListener=="function")return d.addEventListener(C,E,!1),{remove:function(){d.removeEventListener(C,E,!1)}};if(typeof d.attachEvent=="function")return d.attachEvent("on"+C,E),{remove:function(){d.detachEvent("on"+C,E)}}}}var i,y,t,n;function u(){i=document.createElement("table"),y=document.createElement("tr"),t=/^\s*<(\w+|!)[^>]*>/,n={tr:document.createElement("tbody"),tbody:i,thead:i,tfoot:i,td:y,th:y,"*":document.createElement("div")}}function p(d){i||u();var C=t.test(d)&&RegExp.$1;(!C||!(C in n))&&(C="*");var E=n[C];d=d.replace(/(^\s*)|(\s*$)/g,""),E.innerHTML=""+d;var A=E.childNodes[0];return E.removeChild(A),A}function b(d,C,E){var A;try{A=window.getComputedStyle?window.getComputedStyle(d,null)[C]:d.style[C]}catch(f){}finally{A=A===void 0?E:A}return A}function c(d,C){var E=b(d,"height",C);return E==="auto"&&(E=d.offsetHeight),parseFloat(E)}function S(d,C){var E=c(d,C),A=parseFloat(b(d,"borderTopWidth"))||0,f=parseFloat(b(d,"paddingTop"))||0,x=parseFloat(b(d,"paddingBottom"))||0,j=parseFloat(b(d,"borderBottomWidth"))||0,P=parseFloat(b(d,"marginTop"))||0,W=parseFloat(b(d,"marginBottom"))||0;return E+A+j+f+x+P+W}function I(d,C){var E=b(d,"width",C);return E==="auto"&&(E=d.offsetWidth),parseFloat(E)}function m(d,C){var E=I(d,C),A=parseFloat(b(d,"borderLeftWidth"))||0,f=parseFloat(b(d,"paddingLeft"))||0,x=parseFloat(b(d,"paddingRight"))||0,j=parseFloat(b(d,"borderRightWidth"))||0,P=parseFloat(b(d,"marginRight"))||0,W=parseFloat(b(d,"marginLeft"))||0;return E+A+j+f+x+W+P}function r(){return window.devicePixelRatio?window.devicePixelRatio:2}function s(d,C){if(d)for(var E in C)C.hasOwnProperty(E)&&(d.style[E]=C[E]);return d}},fP0w:function(qe,Pt,w){"use strict";w.r(Pt),w.d(Pt,"Line",function(){return bt}),w.d(Pt,"Circle",function(){return J}),w.d(Pt,"Base",function(){return r});var H={};w.r(H),w.d(H,"getDefault",function(){return C}),w.d(H,"ellipsisHead",function(){return E}),w.d(H,"ellipsisTail",function(){return A}),w.d(H,"ellipsisMiddle",function(){return f});var i={};w.r(i),w.d(i,"getDefault",function(){return ft}),w.d(i,"reserveFirst",function(){return Z}),w.d(i,"reserveLast",function(){return lt}),w.d(i,"reserveBoth",function(){return pt}),w.d(i,"equidistance",function(){return gt}),w.d(i,"equidistanceWithReverseBoth",function(){return ut});var y={};w.r(y),w.d(y,"getDefault",function(){return St}),w.d(y,"fixedAngle",function(){return K}),w.d(y,"unfixedAngle",function(){return dt});var t={};w.r(t),w.d(t,"autoHide",function(){return i}),w.d(t,"autoRotate",function(){return y}),w.d(t,"autoEllipsis",function(){return H});var n=w("mrSG"),u=w("6JdA"),p=w("iTfj"),b=w("MeYt"),c=w("jqgP"),S=w("l3hu"),I=w("L16w"),m=function(ct){Object(n.b)(it,ct);function it(){return ct!==null&&ct.apply(this,arguments)||this}return it.prototype.getDefaultCfg=function(){var _=ct.prototype.getDefaultCfg.call(this);return Object(n.a)(Object(n.a)({},_),{name:"axis",ticks:[],line:{},tickLine:{},subTickLine:null,title:null,label:{},verticalFactor:1,verticalLimitLength:null,overlapOrder:["autoRotate","autoEllipsis","autoHide"],tickStates:{},optimize:{},defaultCfg:{line:{style:{lineWidth:1,stroke:I.a.lineColor}},tickLine:{style:{lineWidth:1,stroke:I.a.lineColor},alignTick:!0,length:5,displayWithLabel:!0},subTickLine:{style:{lineWidth:1,stroke:I.a.lineColor},count:4,length:2},label:{autoRotate:!0,autoHide:!1,autoEllipsis:!1,style:{fontSize:12,fill:I.a.textColor,fontFamily:I.a.fontFamily,fontWeight:"normal"},offset:10},title:{autoRotate:!0,spacing:5,position:"center",style:{fontSize:12,fill:I.a.textColor,textBaseline:"middle",fontFamily:I.a.fontFamily,textAlign:"center"}},tickStates:{active:{labelStyle:{fontWeight:500},tickLineStyle:{lineWidth:2}},inactive:{labelStyle:{fill:I.a.uncheckedColor}}},optimize:{enable:!0,threshold:400}},theme:{}})},it.prototype.renderInner=function(_){this.get("line")&&this.drawLine(_),this.drawTicks(_),this.get("title")&&this.drawTitle(_)},it.prototype.isList=function(){return!0},it.prototype.getItems=function(){return this.get("ticks")},it.prototype.setItems=function(_){this.update({ticks:_})},it.prototype.updateItem=function(_,R){Object(p.mix)(_,R),this.clear(),this.render()},it.prototype.clearItems=function(){var _=this.getElementByLocalId("label-group");_&&_.clear()},it.prototype.setItemState=function(_,R,Q){_[R]=Q,this.updateTickStates(_)},it.prototype.hasState=function(_,R){return!!_[R]},it.prototype.getItemStates=function(_){var R=this.get("tickStates"),Q=[];return Object(p.each)(R,function(k,g){_[g]&&Q.push(g)}),Q},it.prototype.clearItemsState=function(_){var R=this,Q=this.getItemsByState(_);Object(p.each)(Q,function(k){R.setItemState(k,_,!1)})},it.prototype.getItemsByState=function(_){var R=this,Q=this.getItems();return Object(p.filter)(Q,function(k){return R.hasState(k,_)})},it.prototype.getSidePoint=function(_,R){var Q=this,k=Q.getSideVector(R,_);return{x:_.x+k[0],y:_.y+k[1]}},it.prototype.getTextAnchor=function(_){var R;return Object(p.isNumberEqual)(_[0],0)?R="center":_[0]>0?R="start":_[0]<0&&(R="end"),R},it.prototype.getTextBaseline=function(_){var R;return Object(p.isNumberEqual)(_[1],0)?R="middle":_[1]>0?R="top":_[1]<0&&(R="bottom"),R},it.prototype.processOverlap=function(_){},it.prototype.drawLine=function(_){var R=this.getLinePath(),Q=this.get("line");this.addShape(_,{type:"path",id:this.getElementId("line"),name:"axis-line",attrs:Object(p.mix)({path:R},Q.style)})},it.prototype.getTickLineItems=function(_){var R=this,Q=[],k=this.get("tickLine"),g=k.alignTick,O=k.length,F=1,V=_.length;return V>=2&&(F=_[1].value-_[0].value),Object(p.each)(_,function(rt){var ot=rt.point;g||(ot=R.getTickPoint(rt.value-F/2));var st=R.getSidePoint(ot,O);Q.push({startPoint:ot,tickValue:rt.value,endPoint:st,tickId:rt.id,id:"tickline-"+rt.id})}),Q},it.prototype.getSubTickLineItems=function(_){var R=[],Q=this.get("subTickLine"),k=Q.count,g=_.length;if(g>=2)for(var O=0;O<g-1;O++)for(var F=_[O],V=_[O+1],rt=0;rt<k;rt++){var ot=(rt+1)/(k+1),st=(1-ot)*F.tickValue+ot*V.tickValue,Mt=this.getTickPoint(st),yt=this.getSidePoint(Mt,Q.length);R.push({startPoint:Mt,endPoint:yt,tickValue:st,id:"sub-"+F.id+"-"+rt})}return R},it.prototype.getTickLineAttrs=function(_,R,Q,k){var g=this.get(R).style,O={points:[_.startPoint,_.endPoint]},F=Object(p.get)(this.get("theme"),["tickLine","style"],{});g=Object(p.isFunction)(g)?Object(p.mix)({},F,g(O,Q,k)):g;var V=_.startPoint,rt=_.endPoint;return Object(n.a)({x1:V.x,y1:V.y,x2:rt.x,y2:rt.y},g)},it.prototype.drawTick=function(_,R,Q,k,g){this.addShape(R,{type:"line",id:this.getElementId(_.id),name:"axis-"+Q,attrs:this.getTickLineAttrs(_,Q,k,g)})},it.prototype.drawTickLines=function(_){var R=this,Q=this.get("ticks"),k=this.get("subTickLine"),g=this.getTickLineItems(Q),O=this.addGroup(_,{name:"axis-tickline-group",id:this.getElementId("tickline-group")}),F=this.get("tickLine");if(Object(p.each)(g,function(rt,ot){if(F.displayWithLabel){var st=R.getElementId("label-"+rt.tickId);_.findById(st)&&R.drawTick(rt,O,"tickLine",ot,g)}else R.drawTick(rt,O,"tickLine",ot,g)}),k){var V=this.getSubTickLineItems(g);Object(p.each)(V,function(rt,ot){R.drawTick(rt,O,"subTickLine",ot,V)})}},it.prototype.processTicks=function(){var _=this,R=this.get("ticks");Object(p.each)(R,function(Q){Q.point=_.getTickPoint(Q.value),Object(p.isNil)(Q.id)&&(Q.id=Q.name)})},it.prototype.drawTicks=function(_){var R=this;this.optimizeTicks(),this.processTicks(),this.get("label")&&this.drawLabels(_),this.get("tickLine")&&this.drawTickLines(_);var Q=this.get("ticks");Object(p.each)(Q,function(k){R.applyTickStates(k,_)})},it.prototype.optimizeTicks=function(){var _=this.get("optimize"),R=this.get("ticks");if(_&&_.enable&&_.threshold>0){var Q=Object(p.size)(R);if(Q>_.threshold){var k=Math.ceil(Q/_.threshold),g=R.filter(function(O,F){return F%k==0});this.set("ticks",g),this.set("originalTicks",R)}}},it.prototype.getLabelAttrs=function(_,R,Q){var k=this.get("label"),g=k.offset,O=k.rotate,F=k.formatter,V=this.getSidePoint(_.point,g),rt=this.getSideVector(g,V),ot=F?F(_.name,_,R):_.name,st=k.style;st=Object(p.isFunction)(st)?Object(p.get)(this.get("theme"),["label","style"],{}):st;var Mt=Object(p.mix)({x:V.x,y:V.y,text:ot,textAlign:this.getTextAnchor(rt),textBaseline:this.getTextBaseline(rt)},st);return O&&(Mt.matrix=Object(c.e)(V,O)),Mt},it.prototype.drawLabels=function(_){var R=this,Q=this.get("ticks"),k=this.addGroup(_,{name:"axis-label-group",id:this.getElementId("label-group")});Object(p.each)(Q,function(st,Mt){R.addShape(k,{type:"text",name:"axis-label",id:R.getElementId("label-"+st.id),attrs:R.getLabelAttrs(st,Mt,Q),delegateObject:{tick:st,item:st,index:Mt}})}),this.processOverlap(k);var g=k.getChildren(),O=Object(p.get)(this.get("theme"),["label","style"],{}),F=this.get("label"),V=F.style,rt=F.formatter;if(Object(p.isFunction)(V)){var ot=g.map(function(st){return Object(p.get)(st.get("delegateObject"),"tick")});Object(p.each)(g,function(st,Mt){var yt=st.get("delegateObject").tick,xt=rt?rt(yt.name,yt,Mt):yt.name,Ot=Object(p.mix)({},O,V(xt,Mt,ot));st.attr(Ot)})}},it.prototype.getTitleAttrs=function(){var _=this.get("title"),R=_.style,Q=_.position,k=_.offset,g=_.spacing,O=g===void 0?0:g,F=_.autoRotate,V=R.fontSize,rt=.5;Q==="start"?rt=0:Q==="end"&&(rt=1);var ot=this.getTickPoint(rt),st=this.getSidePoint(ot,k||O+V/2),Mt=Object(p.mix)({x:st.x,y:st.y,text:_.text},R),yt=_.rotate,xt=yt;if(Object(p.isNil)(yt)&&F){var Ot=this.getAxisVector(ot),jt=[1,0];xt=u.a.angleTo(Ot,jt,!0)}if(xt){var Dt=Object(c.e)(st,xt);Mt.matrix=Dt}return Mt},it.prototype.drawTitle=function(_){this.addShape(_,{type:"text",id:this.getElementId("title"),name:"axis-title",attrs:this.getTitleAttrs()})},it.prototype.applyTickStates=function(_,R){var Q=this.getItemStates(_);if(Q.length){var k=this.get("tickStates"),g=this.getElementId("label-"+_.id),O=R.findById(g);if(O){var F=Object(S.a)(_,"label",k);F&&O.attr(F)}var V=this.getElementId("tickline-"+_.id),rt=R.findById(V);if(rt){var ot=Object(S.a)(_,"tickLine",k);ot&&rt.attr(ot)}}},it.prototype.updateTickStates=function(_){var R=this.getItemStates(_),Q=this.get("tickStates"),k=this.get("label"),g=this.getElementByLocalId("label-"+_.id),O=this.get("tickLine"),F=this.getElementByLocalId("tickline-"+_.id);if(R.length){if(g){var V=Object(S.a)(_,"label",Q);V&&g.attr(V)}if(F){var rt=Object(S.a)(_,"tickLine",Q);rt&&F.attr(rt)}}else g&&g.attr(k.style),F&&F.attr(O.style)},it}(b.a),r=m,s=w("BgvD");function d(ct,it,_,R){var Q=it.getChildren(),k=!1;return Object(p.each)(Q,function(g){var O=Object(s.a)(ct,g,_,R);k=k||O}),k}function C(){return A}function E(ct,it,_){return d(ct,it,_,"head")}function A(ct,it,_){return d(ct,it,_,"tail")}function f(ct,it,_){return d(ct,it,_,"middle")}var x=w("5UbV");function j(ct){var it=ct.attr("matrix");return it&&it[0]!==1}function P(ct){var it=j(ct)?Object(c.d)(ct.attr("matrix")):0;return it%360}function W(ct,it,_,R){var Q=!1,k=P(it),g=Math.abs(ct?_.attr("y")-it.attr("y"):_.attr("x")-it.attr("x")),O=(ct?_.attr("y")>it.attr("y"):_.attr("x")>it.attr("x"))?it.getBBox():_.getBBox();if(ct){var F=Math.abs(Math.cos(k));Object(x.i)(F,0,Math.PI/180)?Q=O.width+R>g:Q=O.height/F+R>g}else{var F=Math.abs(Math.sin(k));Object(x.i)(F,0,Math.PI/180)?Q=O.width+R>g:Q=O.height/F+R>g}return Q}function X(ct,it,_,R){var Q=(R==null?void 0:R.minGap)||0,k=it.getChildren().slice().filter(function(yt){return yt.get("visible")});if(!k.length)return!1;var g=!1;_&&k.reverse();for(var O=k.length,F=k[0],V=F,rt=1;rt<O;rt++){var ot=k[rt],st=ot.getBBox(),Mt=W(ct,V,ot,Q);Mt?(ot.hide(),g=!0):V=ot}return g}function $(ct,it,_){var R=(_==null?void 0:_.minGap)||0,Q=it.getChildren().slice();if(Q.length<2)return!1;var k=!1,g=Q[0],O=g.getBBox(),F=Q[1],V=Q.length,rt=P(g),ot=Math.abs(ct?F.attr("y")-g.attr("y"):F.attr("x")-g.attr("x")),st=0;if(ct){var Mt=Math.abs(Math.cos(rt));if(Object(x.i)(Mt,0,Math.PI/180)){var yt=Object(s.b)(Q);st=(yt+R)/ot}else st=(O.height/Mt+R)/ot}else{var Mt=Math.abs(Math.sin(rt));if(Object(x.i)(Mt,0,Math.PI/180)){var yt=Object(s.b)(Q);st=(yt+R)/ot}else st=(O.height/Mt+R)/ot}if(st>1){st=Math.ceil(st);for(var xt=0;xt<V;xt++)xt%st!=0&&(Q[xt].hide(),k=!0)}return k}function ft(){return gt}function Z(ct,it,_,R){return X(ct,it,!1,R)}function lt(ct,it,_,R){return X(ct,it,!0,R)}function pt(ct,it,_,R){var Q=(R==null?void 0:R.minGap)||0,k=it.getChildren().slice();if(k.length<=2)return!1;for(var g=!1,O=k.length,F=k[0],V=k[O-1],rt=F,ot=1;ot<O-1;ot++){var st=k[ot],Mt=st.getBBox(),yt=W(ct,rt,st,Q);yt?(st.hide(),g=!0):rt=st}var xt=W(ct,rt,V,Q);return xt&&(rt.hide(),g=!0),g}function gt(ct,it,_,R){var Q=$(ct,it,R);return X(ct,it,!1)&&(Q=!0),Q}function ut(ct,it,_,R){var Q=it.getChildren().slice(),k=$(ct,it,R);if(Q.length>2){var g=Q[0],O=Q[Q.length-1];g.get("visible")||(g.show(),X(ct,it,!1,R)&&(k=!0)),O.get("visible")||(O.show(),X(ct,it,!0,R)&&(k=!0))}return k}function Bt(ct,it){Object(p.each)(ct,function(_){var R=_.attr("x"),Q=_.attr("y"),k=Object(c.e)({x:R,y:Q},it);_.attr("matrix",k)})}function Lt(ct,it,_,R){var Q=it.getChildren();if(!Q.length||!ct&&Q.length<2)return!1;var k=Object(s.b)(Q),g=!1;if(ct)g=!!_&&k>_;else{var O=Math.abs(Q[1].attr("x")-Q[0].attr("x"));g=k>O}if(g){var F=R(_,k);Bt(Q,F)}return g}function St(){return K}function K(ct,it,_,R){return Lt(ct,it,_,function(){return Object(p.isNumber)(R)?R:ct?I.a.verticalAxisRotate:I.a.horizontalAxisRotate})}function dt(ct,it,_){return Lt(ct,it,_,function(R,Q){if(!R)return ct?I.a.verticalAxisRotate:I.a.horizontalAxisRotate;if(ct)return-Math.acos(R/Q);var k=0;return R>Q?k=Math.PI/4:(k=Math.asin(R/Q),k>Math.PI/4&&(k=Math.PI/4)),k})}var mt=function(ct){Object(n.b)(it,ct);function it(){return ct!==null&&ct.apply(this,arguments)||this}return it.prototype.getDefaultCfg=function(){var _=ct.prototype.getDefaultCfg.call(this);return Object(n.a)(Object(n.a)({},_),{type:"line",locationType:"region",start:null,end:null})},it.prototype.getLinePath=function(){var _=this.get("start"),R=this.get("end"),Q=[];return Q.push(["M",_.x,_.y]),Q.push(["L",R.x,R.y]),Q},it.prototype.getInnerLayoutBBox=function(){var _=this.get("start"),R=this.get("end"),Q=ct.prototype.getInnerLayoutBBox.call(this),k=Math.min(_.x,R.x,Q.x),g=Math.min(_.y,R.y,Q.y),O=Math.max(_.x,R.x,Q.maxX),F=Math.max(_.y,R.y,Q.maxY);return{x:k,y:g,minX:k,minY:g,maxX:O,maxY:F,width:O-k,height:F-g}},it.prototype.isVertical=function(){var _=this.get("start"),R=this.get("end");return Object(p.isNumberEqual)(_.x,R.x)},it.prototype.isHorizontal=function(){var _=this.get("start"),R=this.get("end");return Object(p.isNumberEqual)(_.y,R.y)},it.prototype.getTickPoint=function(_){var R=this,Q=R.get("start"),k=R.get("end"),g=k.x-Q.x,O=k.y-Q.y;return{x:Q.x+g*_,y:Q.y+O*_}},it.prototype.getSideVector=function(_){var R=this.getAxisVector(),Q=u.c.normalize([0,0],R),k=this.get("verticalFactor"),g=[Q[1],Q[0]*-1];return u.c.scale([0,0],g,_*k)},it.prototype.getAxisVector=function(){var _=this.get("start"),R=this.get("end");return[R.x-_.x,R.y-_.y]},it.prototype.processOverlap=function(_){var R=this,Q=this.isVertical(),k=this.isHorizontal();if(!(!Q&&!k)){var g=this.get("label"),O=this.get("title"),F=this.get("verticalLimitLength"),V=g.offset,rt=F,ot=0,st=0;O&&(ot=O.style.fontSize,st=O.spacing),rt&&(rt=rt-V-st-ot);var Mt=this.get("overlapOrder");if(Object(p.each)(Mt,function(Ot){g[Ot]&&R.canProcessOverlap(Ot)&&R.autoProcessOverlap(Ot,g[Ot],_,rt)}),O&&Object(p.isNil)(O.offset)){var yt=_.getCanvasBBox(),xt=Q?yt.width:yt.height;O.offset=V+xt+st+ot/2}}},it.prototype.canProcessOverlap=function(_){var R=this.get("label");return _==="autoRotate"?Object(p.isNil)(R.rotate):!0},it.prototype.autoProcessOverlap=function(_,R,Q,k){var g=this,O=this.isVertical(),F=!1,V=t[_];if(R===!0){var rt=this.get("label");F=V.getDefault()(O,Q,k)}else if(Object(p.isFunction)(R))F=R(O,Q,k);else if(Object(p.isObject)(R)){var ot=R;V[ot.type]&&(F=V[ot.type](O,Q,k,ot.cfg))}else V[R]&&(F=V[R](O,Q,k));if(_==="autoRotate"){if(F){var st=Q.getChildren(),Mt=this.get("verticalFactor");Object(p.each)(st,function(xt){var Ot=xt.attr("textAlign");if(Ot==="center"){var jt=Mt>0?"end":"start";xt.attr("textAlign",jt)}})}}else if(_==="autoHide"){var yt=Q.getChildren().slice(0);Object(p.each)(yt,function(xt){xt.get("visible")||(g.get("isRegister")&&g.unregisterElement(xt),xt.remove())})}},it}(r),bt=mt,wt=function(ct){Object(n.b)(it,ct);function it(){return ct!==null&&ct.apply(this,arguments)||this}return it.prototype.getDefaultCfg=function(){var _=ct.prototype.getDefaultCfg.call(this);return Object(n.a)(Object(n.a)({},_),{type:"circle",locationType:"circle",center:null,radius:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2})},it.prototype.getLinePath=function(){var _=this.get("center"),R=_.x,Q=_.y,k=this.get("radius"),g=k,O=this.get("startAngle"),F=this.get("endAngle"),V=[];if(Math.abs(F-O)===Math.PI*2)V=[["M",R,Q-g],["A",k,g,0,1,1,R,Q+g],["A",k,g,0,1,1,R,Q-g],["Z"]];else{var rt=this.getCirclePoint(O),ot=this.getCirclePoint(F),st=Math.abs(F-O)>Math.PI?1:0,Mt=O>F?0:1;V=[["M",R,Q],["L",rt.x,rt.y],["A",k,g,0,st,Mt,ot.x,ot.y],["L",R,Q]]}return V},it.prototype.getTickPoint=function(_){var R=this.get("startAngle"),Q=this.get("endAngle"),k=R+(Q-R)*_;return this.getCirclePoint(k)},it.prototype.getSideVector=function(_,R){var Q=this.get("center"),k=[R.x-Q.x,R.y-Q.y],g=this.get("verticalFactor"),O=u.c.length(k);return u.c.scale(k,k,g*_/O),k},it.prototype.getAxisVector=function(_){var R=this.get("center"),Q=[_.x-R.x,_.y-R.y];return[Q[1],-1*Q[0]]},it.prototype.getCirclePoint=function(_,R){var Q=this.get("center");return R=R||this.get("radius"),{x:Q.x+Math.cos(_)*R,y:Q.y+Math.sin(_)*R}},it}(r),J=wt},"fR/l":function(qe,Pt,w){var H=w("CH3K"),i=w("Z0cm");function y(t,n,u){var p=n(t);return i(t)?p:H(p,u(t))}qe.exports=y},fmRc:function(qe,Pt,w){var H=w("Xi7e"),i=w("77Zs"),y=w("L8xA"),t=w("gCq4"),n=w("VaNO"),u=w("0Cz8");function p(b){var c=this.__data__=new H(b);this.size=c.size}p.prototype.clear=i,p.prototype.delete=y,p.prototype.get=t,p.prototype.has=n,p.prototype.set=u,qe.exports=p},ftKO:function(qe,Pt){var w="__lodash_hash_undefined__";function H(i){return this.__data__.set(i,w),this}qe.exports=H},g9YV:function(qe,Pt,w){"use strict";var H=w("cIOH"),i=w.n(H),y=w("pED+"),t=w.n(y),n=w("+L6B"),u=w("R9oj"),p=w("7Kak"),b=w("sRBo"),c=w("qVdP"),S=w("T2oS"),I=w("DjyN"),m=w("5Dmo")},gCq4:function(qe,Pt){function w(H){return this.__data__.get(H)}qe.exports=w},"h4/5":function(qe,Pt){},hJqF:function(qe,Pt,w){"use strict";w.d(Pt,"d",function(){return b}),w.d(Pt,"b",function(){return c}),w.d(Pt,"c",function(){return S}),w.d(Pt,"a",function(){return r});var H=w("mrSG"),i=w("iTfj"),y=w("w02o"),t=w("YuPD"),n=w("tKoa"),u=w("DyAw");function p(s){var d=s.chart,C=s.options,E=C.data,A=C.color,f=C.lineStyle,x=C.lineShape,j=C.point,P=C.seriesField;d.data(E);var W=Object(t.b)({},s,{options:{shapeField:P,line:{color:A,style:f,shape:x},point:j&&Object(H.a)({color:A,shape:"circle"},j),label:void 0}}),X=Object(t.b)({},W,{options:{tooltip:!1}});return Object(n.d)(W),Object(n.e)(X),s}function b(s){var d,C,E=s.options,A=E.xAxis,f=E.yAxis,x=E.xField,j=E.yField,P=E.data;return Object(t.e)(Object(y.f)((d={},d[x]=A,d[j]=f,d),(C={},C[x]={type:"cat"},C[j]=Object(u.a)(P,j),C)))(s)}function c(s){var d=s.chart,C=s.options,E=C.xAxis,A=C.yAxis,f=C.xField,x=C.yField;return E===!1?d.axis(f,!1):d.axis(f,E),A===!1?d.axis(x,!1):d.axis(x,A),s}function S(s){var d=s.chart,C=s.options,E=C.legend,A=C.seriesField;return E&&A?d.legend(A,E):E===!1&&d.legend(!1),s}function I(s){var d=s.chart,C=s.options,E=C.label,A=C.yField,f=Object(t.c)(d,"line");if(!E)f.label(!1);else{var x=E.callback,j=Object(H.c)(E,["callback"]);f.label({fields:[A],callback:x,cfg:Object(H.a)({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Object(t.o)(j))})}return s}function m(s){var d=s.chart,C=s.options,E=C.isStack;return E&&Object(i.each)(d.geometries,function(A){A.adjust("stack")}),s}function r(s){return Object(t.e)(p,b,m,y.j,c,S,y.k,I,y.h,y.c,y.a,Object(y.b)(),y.e)(s)}},hKUY:function(qe,Pt,w){"use strict";var H=w("IzEo"),i=w("bx4M"),y=w("VTBJ"),t=w("14J3"),n=w("BMrR"),u=w("jCWc"),p=w("kPKH"),b=w("nKUr"),c=w.n(b),S=w("q1tI"),I=w.n(S),m=w("CmcY"),r=w("wd/R"),s=w.n(r),d=w("06Lf"),C=w("nMtQ"),E=w.n(C),A=function(x){var j=x.title,P=j===void 0?"":j,W=x.updateTime,X=W===void 0?Date.now():W,$=x.data,ft=$===void 0?[]:$,Z=x.chartConfig,lt=x.chartType;return Object(b.jsxs)(i.a,{title:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{children:P}),Object(b.jsx)("span",{className:E.a.updateTime,children:s()(X).format("YYYY-MM-DD HH:mm:ss")})]}),children:[Object(b.jsx)(n.a,{children:ft.map(function(pt){return Object(b.jsx)(p.a,{sm:24/ft.length,children:Object(b.jsx)(m.a,{title:pt.title,value:pt.value,text:pt.text,percent:pt.percent,precision:pt.precision})},pt.title)})}),Z&&Z.data.length>0&&Object(b.jsx)(n.a,{children:Object(b.jsx)(p.a,{sm:24,children:lt==="column"?Object(b.jsx)(d.a,Object(y.a)({},Z)):Object(b.jsx)(d.b,Object(y.a)({},Z))})})]})};Pt.a=A},hag6:function(qe,Pt,w){"use strict";var H=w("Ihc8");Object(H.registerInteraction)("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]})},hkKa:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return t});var H=w("ODXe"),i=w("q1tI"),y=w.n(i);function t(){var n=i.useReducer(function(b){return b+1},0),u=Object(H.a)(n,2),p=u[1];return p}},iTfj:function(qe,Pt,w){"use strict";w.r(Pt),w.d(Pt,"contains",function(){return t}),w.d(Pt,"includes",function(){return t}),w.d(Pt,"difference",function(){return b}),w.d(Pt,"find",function(){return lt}),w.d(Pt,"findIndex",function(){return gt}),w.d(Pt,"firstValue",function(){return Bt}),w.d(Pt,"flatten",function(){return St}),w.d(Pt,"flattenDeep",function(){return dt}),w.d(Pt,"getRange",function(){return bt}),w.d(Pt,"pull",function(){return _}),w.d(Pt,"pullAt",function(){return k}),w.d(Pt,"reduce",function(){return O}),w.d(Pt,"remove",function(){return V}),w.d(Pt,"sortBy",function(){return st}),w.d(Pt,"union",function(){return Ot}),w.d(Pt,"uniq",function(){return yt}),w.d(Pt,"valuesOfKey",function(){return jt}),w.d(Pt,"head",function(){return Dt}),w.d(Pt,"last",function(){return zt}),w.d(Pt,"startsWith",function(){return Wt}),w.d(Pt,"endsWith",function(){return re}),w.d(Pt,"filter",function(){return u}),w.d(Pt,"every",function(){return me}),w.d(Pt,"some",function(){return Le}),w.d(Pt,"group",function(){return Vn}),w.d(Pt,"groupBy",function(){return gn}),w.d(Pt,"groupToMap",function(){return kn}),w.d(Pt,"getWrapBehavior",function(){return Nn}),w.d(Pt,"wrapBehavior",function(){return ir}),w.d(Pt,"number2color",function(){return mr}),w.d(Pt,"parseRadius",function(){return Br}),w.d(Pt,"clamp",function(){return mi}),w.d(Pt,"fixedBase",function(){return sa}),w.d(Pt,"isDecimal",function(){return fa}),w.d(Pt,"isEven",function(){return pa}),w.d(Pt,"isInteger",function(){return Yr}),w.d(Pt,"isNegative",function(){return Pr}),w.d(Pt,"isNumberEqual",function(){return ti}),w.d(Pt,"isOdd",function(){return ui}),w.d(Pt,"isPositive",function(){return xi}),w.d(Pt,"maxBy",function(){return Ci}),w.d(Pt,"minBy",function(){return di}),w.d(Pt,"mod",function(){return pi}),w.d(Pt,"toDegree",function(){return Fi}),w.d(Pt,"toInteger",function(){return ma}),w.d(Pt,"toRadian",function(){return xa}),w.d(Pt,"forIn",function(){return Ma}),w.d(Pt,"has",function(){return Qi}),w.d(Pt,"hasKey",function(){return ka}),w.d(Pt,"hasValue",function(){return Ga}),w.d(Pt,"keys",function(){return x}),w.d(Pt,"isMatch",function(){return P}),w.d(Pt,"values",function(){return za}),w.d(Pt,"lowerCase",function(){return Kt}),w.d(Pt,"lowerFirst",function(){return Oe}),w.d(Pt,"substitute",function(){return An}),w.d(Pt,"upperCase",function(){return rr}),w.d(Pt,"upperFirst",function(){return sn}),w.d(Pt,"getType",function(){return jr}),w.d(Pt,"isArguments",function(){return yr}),w.d(Pt,"isArray",function(){return d}),w.d(Pt,"isArrayLike",function(){return i}),w.d(Pt,"isBoolean",function(){return _r}),w.d(Pt,"isDate",function(){return Lr}),w.d(Pt,"isError",function(){return Hr}),w.d(Pt,"isFunction",function(){return m}),w.d(Pt,"isFinite",function(){return ei}),w.d(Pt,"isNil",function(){return s}),w.d(Pt,"isNull",function(){return Qr}),w.d(Pt,"isNumber",function(){return Mi}),w.d(Pt,"isObject",function(){return C}),w.d(Pt,"isObjectLike",function(){return X}),w.d(Pt,"isPlainObject",function(){return ft}),w.d(Pt,"isPrototype",function(){return Si}),w.d(Pt,"isRegExp",function(){return ca}),w.d(Pt,"isString",function(){return rt}),w.d(Pt,"isType",function(){return I}),w.d(Pt,"isUndefined",function(){return na}),w.d(Pt,"isElement",function(){return ve}),w.d(Pt,"requestAnimationFrame",function(){return U}),w.d(Pt,"clearAnimationFrame",function(){return G}),w.d(Pt,"augment",function(){return Jt}),w.d(Pt,"clone",function(){return ue}),w.d(Pt,"debounce",function(){return we}),w.d(Pt,"memoize",function(){return cn}),w.d(Pt,"deepMix",function(){return Ee}),w.d(Pt,"each",function(){return A}),w.d(Pt,"extend",function(){return ce}),w.d(Pt,"indexOf",function(){return Bn}),w.d(Pt,"isEmpty",function(){return $e}),w.d(Pt,"isEqual",function(){return L}),w.d(Pt,"isEqualWith",function(){return Et}),w.d(Pt,"map",function(){return ye}),w.d(Pt,"mapValues",function(){return de}),w.d(Pt,"mix",function(){return vt}),w.d(Pt,"assign",function(){return vt}),w.d(Pt,"get",function(){return he}),w.d(Pt,"set",function(){return le}),w.d(Pt,"pick",function(){return Ve}),w.d(Pt,"throttle",function(){return Ye}),w.d(Pt,"toArray",function(){return ke}),w.d(Pt,"toString",function(){return eo}),w.d(Pt,"uniqueId",function(){return Re}),w.d(Pt,"noop",function(){return hn}),w.d(Pt,"identity",function(){return pn}),w.d(Pt,"size",function(){return on}),w.d(Pt,"Cache",function(){return jn});var H=function(fe){return fe!==null&&typeof fe!="function"&&isFinite(fe.length)},i=H,y=function(fe,Ne){return i(fe)?fe.indexOf(Ne)>-1:!1},t=y,n=function(fe,Ne){if(!i(fe))return fe;for(var Fe=[],rn=0;rn<fe.length;rn++){var ln=fe[rn];Ne(ln,rn)&&Fe.push(ln)}return Fe},u=n,p=function(fe,Ne){return Ne===void 0&&(Ne=[]),u(fe,function(Fe){return!t(Ne,Fe)})},b=p,c={}.toString,S=function(fe,Ne){return c.call(fe)==="[object "+Ne+"]"},I=S,m=function(Ie){return I(Ie,"Function")},r=function(fe){return fe==null},s=r,d=function(Ie){return Array.isArray?Array.isArray(Ie):I(Ie,"Array")},C=function(Ie){var fe=typeof Ie;return Ie!==null&&fe==="object"||fe==="function"};function E(Ie,fe){if(!!Ie){var Ne;if(d(Ie))for(var Fe=0,rn=Ie.length;Fe<rn&&(Ne=fe(Ie[Fe],Fe),Ne!==!1);Fe++);else if(C(Ie)){for(var ln in Ie)if(Ie.hasOwnProperty(ln)&&(Ne=fe(Ie[ln],ln),Ne===!1))break}}}var A=E,f=Object.keys?function(Ie){return Object.keys(Ie)}:function(Ie){var fe=[];return A(Ie,function(Ne,Fe){m(Ie)&&Fe==="prototype"||fe.push(Fe)}),fe},x=f;function j(Ie,fe){var Ne=x(fe),Fe=Ne.length;if(s(Ie))return!Fe;for(var rn=0;rn<Fe;rn+=1){var ln=Ne[rn];if(fe[ln]!==Ie[ln]||!(ln in Ie))return!1}return!0}var P=j,W=function(fe){return typeof fe=="object"&&fe!==null},X=W,$=function(fe){if(!X(fe)||!I(fe,"Object"))return!1;if(Object.getPrototypeOf(fe)===null)return!0;for(var Ne=fe;Object.getPrototypeOf(Ne)!==null;)Ne=Object.getPrototypeOf(Ne);return Object.getPrototypeOf(fe)===Ne},ft=$;function Z(Ie,fe){if(!d(Ie))return null;var Ne;if(m(fe)&&(Ne=fe),ft(fe)&&(Ne=function(ln){return P(ln,fe)}),Ne){for(var Fe=0;Fe<Ie.length;Fe+=1)if(Ne(Ie[Fe]))return Ie[Fe]}return null}var lt=Z;function pt(Ie,fe,Ne){Ne===void 0&&(Ne=0);for(var Fe=Ne;Fe<Ie.length;Fe++)if(fe(Ie[Fe],Fe))return Fe;return-1}var gt=pt,ut=function(fe,Ne){for(var Fe=null,rn=0;rn<fe.length;rn++){var ln=fe[rn],_e=ln[Ne];if(!s(_e)){d(_e)?Fe=_e[0]:Fe=_e;break}}return Fe},Bt=ut,Lt=function(fe){if(!d(fe))return[];for(var Ne=[],Fe=0;Fe<fe.length;Fe++)Ne=Ne.concat(fe[Fe]);return Ne},St=Lt,K=function Ie(fe,Ne){if(Ne===void 0&&(Ne=[]),!d(fe))Ne.push(fe);else for(var Fe=0;Fe<fe.length;Fe+=1)Ie(fe[Fe],Ne);return Ne},dt=K,mt=function(fe){var Ne=fe.filter(function(dn){return!isNaN(dn)});if(!Ne.length)return{min:0,max:0};if(d(fe[0])){for(var Fe=[],rn=0;rn<fe.length;rn++)Fe=Fe.concat(fe[rn]);Ne=Fe}var ln=Math.max.apply(null,Ne),_e=Math.min.apply(null,Ne);return{min:_e,max:ln}},bt=mt,wt=Array.prototype,J=wt.splice,ct=wt.indexOf,it=function(fe){for(var Ne=[],Fe=1;Fe<arguments.length;Fe++)Ne[Fe-1]=arguments[Fe];for(var rn=0;rn<Ne.length;rn++)for(var ln=Ne[rn],_e=-1;(_e=ct.call(fe,ln))>-1;)J.call(fe,_e,1);return fe},_=it,R=Array.prototype.splice,Q=function(fe,Ne){if(!i(fe))return[];for(var Fe=fe?Ne.length:0,rn=Fe-1;Fe--;){var ln=void 0,_e=Ne[Fe];(Fe===rn||_e!==ln)&&(ln=_e,R.call(fe,_e,1))}return fe},k=Q,g=function(fe,Ne,Fe){if(!d(fe)&&!ft(fe))return fe;var rn=Fe;return A(fe,function(ln,_e){rn=Ne(rn,ln,_e)}),rn},O=g,F=function(fe,Ne){var Fe=[];if(!i(fe))return Fe;for(var rn=-1,ln=[],_e=fe.length;++rn<_e;){var dn=fe[rn];Ne(dn,rn,fe)&&(Fe.push(dn),ln.push(rn))}return k(fe,ln),Fe},V=F,rt=function(Ie){return I(Ie,"String")};function ot(Ie,fe){var Ne;if(m(fe))Ne=function(ln,_e){return fe(ln)-fe(_e)};else{var Fe=[];rt(fe)?Fe.push(fe):d(fe)&&(Fe=fe),Ne=function(ln,_e){for(var dn=0;dn<Fe.length;dn+=1){var Sn=Fe[dn];if(ln[Sn]>_e[Sn])return 1;if(ln[Sn]<_e[Sn])return-1}return 0}}return Ie.sort(Ne),Ie}var st=ot,Mt=function(fe){var Ne=[];return A(fe,function(Fe){t(Ne,Fe)||Ne.push(Fe)}),Ne},yt=Mt,xt=function(){for(var fe=[],Ne=0;Ne<arguments.length;Ne++)fe[Ne]=arguments[Ne];return yt([].concat.apply([],fe))},Ot=xt,jt=function(Ie,fe){for(var Ne=[],Fe={},rn=0;rn<Ie.length;rn++){var ln=Ie[rn],_e=ln[fe];if(!s(_e)){d(_e)||(_e=[_e]);for(var dn=0;dn<_e.length;dn++){var Sn=_e[dn];Fe[Sn]||(Ne.push(Sn),Fe[Sn]=!0)}}}return Ne};function Dt(Ie){if(i(Ie))return Ie[0]}function zt(Ie){if(i(Ie)){var fe=Ie;return fe[fe.length-1]}}function Tt(Ie,fe){return d(Ie)||rt(Ie)?Ie[0]===fe:!1}var Wt=Tt;function Ht(Ie,fe){return d(Ie)||rt(Ie)?Ie[Ie.length-1]===fe:!1}var re=Ht,pe=function(fe,Ne){for(var Fe=0;Fe<fe.length;Fe++)if(!Ne(fe[Fe],Fe))return!1;return!0},me=pe,Se=function(fe,Ne){for(var Fe=0;Fe<fe.length;Fe++)if(Ne(fe[Fe],Fe))return!0;return!1},Le=Se,Je=Object.prototype.hasOwnProperty;function On(Ie,fe){if(!fe||!d(Ie))return{};for(var Ne={},Fe=m(fe)?fe:function(dn){return dn[fe]},rn,ln=0;ln<Ie.length;ln++){var _e=Ie[ln];rn=Fe(_e),Je.call(Ne,rn)?Ne[rn].push(_e):Ne[rn]=[_e]}return Ne}var gn=On,Wn=function(fe,Ne){if(!Ne)return{0:fe};if(!m(Ne)){var Fe=d(Ne)?Ne:Ne.replace(/\s+/g,"").split("*");Ne=function(_e){for(var dn="_",Sn=0,tr=Fe.length;Sn<tr;Sn++)dn+=_e[Fe[Sn]]&&_e[Fe[Sn]].toString();return dn}}var rn=gn(fe,Ne);return rn},kn=Wn,Vn=function(Ie,fe){if(!fe)return[Ie];var Ne=kn(Ie,fe),Fe=[];for(var rn in Ne)Fe.push(Ne[rn]);return Fe};function Dn(Ie,fe){return Ie["_wrap_"+fe]}var Nn=Dn;function Qn(Ie,fe){if(Ie["_wrap_"+fe])return Ie["_wrap_"+fe];var Ne=function(rn){Ie[fe](rn)};return Ie["_wrap_"+fe]=Ne,Ne}var ir=Qn,hr={};function Sr(Ie){var fe=hr[Ie];if(!fe){for(var Ne=Ie.toString(16),Fe=Ne.length;Fe<6;Fe++)Ne="0"+Ne;fe="#"+Ne,hr[Ie]=fe}return fe}var mr=Sr;function dr(Ie){var fe=0,Ne=0,Fe=0,rn=0;return d(Ie)?Ie.length===1?fe=Ne=Fe=rn=Ie[0]:Ie.length===2?(fe=Fe=Ie[0],Ne=rn=Ie[1]):Ie.length===3?(fe=Ie[0],Ne=rn=Ie[1],Fe=Ie[2]):(fe=Ie[0],Ne=Ie[1],Fe=Ie[2],rn=Ie[3]):fe=Ne=Fe=rn=Ie,{r1:fe,r2:Ne,r3:Fe,r4:rn}}var Br=dr,ii=function(fe,Ne,Fe){return fe<Ne?Ne:fe>Fe?Fe:fe},mi=ii,Pi=function(fe,Ne){var Fe=Ne.toString(),rn=Fe.indexOf(".");if(rn===-1)return Math.round(fe);var ln=Fe.substr(rn+1).length;return ln>20&&(ln=20),parseFloat(fe.toFixed(ln))},sa=Pi,Pa=function(fe){return I(fe,"Number")},Mi=Pa,Ki=function(fe){return Mi(fe)&&fe%1!=0},fa=Ki,oa=function(fe){return Mi(fe)&&fe%2==0},pa=oa,La=Number.isInteger?Number.isInteger:function(Ie){return Mi(Ie)&&Ie%1==0},Yr=La,Sa=function(fe){return Mi(fe)&&fe<0},Pr=Sa,si=1e-5;function ti(Ie,fe,Ne){return Ne===void 0&&(Ne=si),Math.abs(Ie-fe)<Ne}var $r=function(fe){return Mi(fe)&&fe%2!=0},ui=$r,li=function(fe){return Mi(fe)&&fe>0},xi=li,Ci=function(Ie,fe){if(!!d(Ie)){var Ne=Ie[0],Fe;m(fe)?Fe=fe(Ie[0]):Fe=Ie[0][fe];var rn;return A(Ie,function(ln){m(fe)?rn=fe(ln):rn=ln[fe],rn>Fe&&(Ne=ln,Fe=rn)}),Ne}},di=function(Ie,fe){if(!!d(Ie)){var Ne=Ie[0],Fe;m(fe)?Fe=fe(Ie[0]):Fe=Ie[0][fe];var rn;return A(Ie,function(ln){m(fe)?rn=fe(ln):rn=ln[fe],rn<Fe&&(Ne=ln,Fe=rn)}),Ne}},Ti=function(fe,Ne){return(fe%Ne+Ne)%Ne},pi=Ti,Ni=180/Math.PI,Bi=function(fe){return Ni*fe},Fi=Bi,ma=parseInt,ua=Math.PI/180,Ra=function(fe){return ua*fe},xa=Ra,Ma=A,Qi=function(Ie,fe){return Ie.hasOwnProperty(fe)},ka=Qi,vo=Object.values?function(Ie){return Object.values(Ie)}:function(Ie){var fe=[];return A(Ie,function(Ne,Fe){m(Ie)&&Fe==="prototype"||fe.push(Ne)}),fe},za=vo,Ga=function(Ie,fe){return t(za(Ie),fe)},eo=function(Ie){return s(Ie)?"":Ie.toString()},ae=function(fe){return eo(fe).toLowerCase()},Kt=ae,te=function(fe){var Ne=eo(fe);return Ne.charAt(0).toLowerCase()+Ne.substring(1)},Oe=te;function Ze(Ie,fe){return!Ie||!fe?Ie:Ie.replace(/\\?\{([^{}]+)\}/g,function(Ne,Fe){return Ne.charAt(0)==="\\"?Ne.slice(1):fe[Fe]===void 0?"":fe[Fe]})}var An=Ze,qn=function(fe){return eo(fe).toUpperCase()},rr=qn,tn=function(fe){var Ne=eo(fe);return Ne.charAt(0).toUpperCase()+Ne.substring(1)},sn=tn,un={}.toString,ur=function(fe){return un.call(fe).replace(/^\[object /,"").replace(/]$/,"")},jr=ur,wr=function(fe){return I(fe,"Arguments")},yr=wr,ni=function(fe){return I(fe,"Boolean")},_r=ni,Fr=function(fe){return I(fe,"Date")},Lr=Fr,Gr=function(fe){return I(fe,"Error")},Hr=Gr,ei=function(Ie){return Mi(Ie)&&isFinite(Ie)},Kr=function(fe){return fe===null},Qr=Kr,Oi=Object.prototype,Ri=function(fe){var Ne=fe&&fe.constructor,Fe=typeof Ne=="function"&&Ne.prototype||Oi;return fe===Fe},Si=Ri,Gi=function(fe){return I(fe,"RegExp")},ca=Gi,ha=function(fe){return fe===void 0},na=ha,Zi=function(fe){return fe instanceof Element||fe instanceof HTMLDocument},ve=Zi;function U(Ie){var fe=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Ne){return setTimeout(Ne,16)};return fe(Ie)}function G(Ie){var fe=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;fe(Ie)}function nt(Ie,fe){for(var Ne in fe)fe.hasOwnProperty(Ne)&&Ne!=="constructor"&&fe[Ne]!==void 0&&(Ie[Ne]=fe[Ne])}function vt(Ie,fe,Ne,Fe){return fe&&nt(Ie,fe),Ne&&nt(Ie,Ne),Fe&&nt(Ie,Fe),Ie}var Gt=function(){for(var fe=[],Ne=0;Ne<arguments.length;Ne++)fe[Ne]=arguments[Ne];for(var Fe=fe[0],rn=1;rn<fe.length;rn++){var ln=fe[rn];m(ln)&&(ln=ln.prototype),vt(Fe.prototype,ln)}},Jt=Gt,ie=function Ie(fe){if(typeof fe!="object"||fe===null)return fe;var Ne;if(d(fe)){Ne=[];for(var Fe=0,rn=fe.length;Fe<rn;Fe++)typeof fe[Fe]=="object"&&fe[Fe]!=null?Ne[Fe]=Ie(fe[Fe]):Ne[Fe]=fe[Fe]}else{Ne={};for(var ln in fe)typeof fe[ln]=="object"&&fe[ln]!=null?Ne[ln]=Ie(fe[ln]):Ne[ln]=fe[ln]}return Ne},ue=ie;function Ce(Ie,fe,Ne){var Fe;return function(){var rn=this,ln=arguments,_e=function(){Fe=null,Ne||Ie.apply(rn,ln)},dn=Ne&&!Fe;clearTimeout(Fe),Fe=setTimeout(_e,fe),dn&&Ie.apply(rn,ln)}}var we=Ce,cn=function(Ie,fe){if(!m(Ie))throw new TypeError("Expected a function");var Ne=function Fe(){for(var rn=[],ln=0;ln<arguments.length;ln++)rn[ln]=arguments[ln];var _e=fe?fe.apply(this,rn):rn[0],dn=Fe.cache;if(dn.has(_e))return dn.get(_e);var Sn=Ie.apply(this,rn);return dn.set(_e,Sn),Sn};return Ne.cache=new Map,Ne},Cn=5;function _t(Ie,fe,Ne,Fe){Ne=Ne||0,Fe=Fe||Cn;for(var rn in fe)if(fe.hasOwnProperty(rn)){var ln=fe[rn];ln!==null&&ft(ln)?(ft(Ie[rn])||(Ie[rn]={}),Ne<Fe?_t(Ie[rn],ln,Ne+1,Fe):Ie[rn]=fe[rn]):d(ln)?(Ie[rn]=[],Ie[rn]=Ie[rn].concat(ln)):ln!==void 0&&(Ie[rn]=ln)}}var Xt=function(fe){for(var Ne=[],Fe=1;Fe<arguments.length;Fe++)Ne[Fe-1]=arguments[Fe];for(var rn=0;rn<Ne.length;rn+=1)_t(fe,Ne[rn]);return fe},Ee=Xt,Vt=function(fe,Ne,Fe,rn){m(Ne)||(Fe=Ne,Ne=fe,fe=function(){});var ln=Object.create?function(dn,Sn){return Object.create(dn,{constructor:{value:Sn}})}:function(dn,Sn){function tr(){}tr.prototype=dn;var Pn=new tr;return Pn.constructor=Sn,Pn},_e=ln(Ne.prototype,fe);return fe.prototype=vt(_e,fe.prototype),fe.superclass=ln(Ne.prototype,Ne),vt(_e,Fe),vt(fe,rn),fe},ce=Vt,yn=function(fe,Ne){if(!i(fe))return-1;var Fe=Array.prototype.indexOf;if(Fe)return Fe.call(fe,Ne);for(var rn=-1,ln=0;ln<fe.length;ln++)if(fe[ln]===Ne){rn=ln;break}return rn},Bn=yn,Zn=Object.prototype.hasOwnProperty;function Kn(Ie){if(s(Ie))return!0;if(i(Ie))return!Ie.length;var fe=jr(Ie);if(fe==="Map"||fe==="Set")return!Ie.size;if(Si(Ie))return!Object.keys(Ie).length;for(var Ne in Ie)if(Zn.call(Ie,Ne))return!1;return!0}var $e=Kn,je=function Ie(fe,Ne){if(fe===Ne)return!0;if(!fe||!Ne||rt(fe)||rt(Ne))return!1;if(i(fe)||i(Ne)){if(fe.length!==Ne.length)return!1;for(var Fe=!0,rn=0;rn<fe.length&&(Fe=Ie(fe[rn],Ne[rn]),!!Fe);rn++);return Fe}if(X(fe)||X(Ne)){var ln=Object.keys(fe),_e=Object.keys(Ne);if(ln.length!==_e.length)return!1;for(var Fe=!0,rn=0;rn<ln.length&&(Fe=Ie(fe[ln[rn]],Ne[ln[rn]]),!!Fe);rn++);return Fe}return!1},L=je,Et=function(Ie,fe,Ne){return m(Ne)?!!Ne(Ie,fe):L(Ie,fe)},$t=function(fe,Ne){if(!i(fe))return fe;for(var Fe=[],rn=0;rn<fe.length;rn++){var ln=fe[rn];Fe.push(Ne(ln,rn))}return Fe},ye=$t,Zt=function(fe){return fe},de=function(Ie,fe){fe===void 0&&(fe=Zt);var Ne={};return C(Ie)&&!s(Ie)&&Object.keys(Ie).forEach(function(Fe){Ne[Fe]=fe(Ie[Fe],Fe)}),Ne},he=function(Ie,fe,Ne){for(var Fe=0,rn=rt(fe)?fe.split("."):fe;Ie&&Fe<rn.length;)Ie=Ie[rn[Fe++]];return Ie===void 0||Fe<rn.length?Ne:Ie},le=function(Ie,fe,Ne){var Fe=Ie,rn=rt(fe)?fe.split("."):fe;return rn.forEach(function(ln,_e){_e<rn.length-1?(C(Fe[ln])||(Fe[ln]=Mi(rn[_e+1])?[]:{}),Fe=Fe[ln]):Fe[ln]=Ne}),Ie},Me=Object.prototype.hasOwnProperty,Ve=function(Ie,fe){if(Ie===null||!ft(Ie))return{};var Ne={};return A(fe,function(Fe){Me.call(Ie,Fe)&&(Ne[Fe]=Ie[Fe])}),Ne},Ye=function(Ie,fe,Ne){var Fe,rn,ln,_e,dn=0;Ne||(Ne={});var Sn=function(){dn=Ne.leading===!1?0:Date.now(),Fe=null,_e=Ie.apply(rn,ln),Fe||(rn=ln=null)},tr=function(){var Fn=Date.now();!dn&&Ne.leading===!1&&(dn=Fn);var Cr=fe-(Fn-dn);return rn=this,ln=arguments,Cr<=0||Cr>fe?(Fe&&(clearTimeout(Fe),Fe=null),dn=Fn,_e=Ie.apply(rn,ln),Fe||(rn=ln=null)):!Fe&&Ne.trailing!==!1&&(Fe=setTimeout(Sn,Cr)),_e};return tr.cancel=function(){clearTimeout(Fe),dn=0,Fe=rn=ln=null},tr},ke=function(Ie){return i(Ie)?Array.prototype.slice.call(Ie):[]},nn={},Re=function(Ie){return Ie=Ie||"g",nn[Ie]?nn[Ie]+=1:nn[Ie]=1,Ie+nn[Ie]},hn=function(){},pn=function(Ie){return Ie};function on(Ie){return s(Ie)?0:i(Ie)?Ie.length:Object.keys(Ie).length}var mn=function(){function Ie(){this.map={}}return Ie.prototype.has=function(fe){return this.map[fe]!==void 0},Ie.prototype.get=function(fe,Ne){var Fe=this.map[fe];return Fe===void 0?Ne:Fe},Ie.prototype.set=function(fe,Ne){this.map[fe]=Ne},Ie.prototype.clear=function(){this.map={}},Ie.prototype.delete=function(fe){delete this.map[fe]},Ie.prototype.size=function(){return Object.keys(this.map).length},Ie}(),jn=mn},j5sG:function(qe,Pt,w){"use strict";Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.createSensor=void 0;var H=i(w("NohK"));function i(t){return t&&t.__esModule?t:{default:t}}var y=function(n){var u=void 0,p=[],b=(0,H.default)(function(){p.forEach(function(r){r(n)})}),c=function(){var s=new ResizeObserver(b);return s.observe(n),b(),s},S=function(s){u||(u=c()),p.indexOf(s)===-1&&p.push(s)},I=function(){u.disconnect(),p=[],u=void 0},m=function(s){var d=p.indexOf(s);d!==-1&&p.splice(d,1),p.length===0&&u&&I()};return{element:n,bind:S,destroy:I,unbind:m}};Pt.createSensor=y},jqgP:function(qe,Pt,w){"use strict";w.d(Pt,"e",function(){return y}),w.d(Pt,"f",function(){return t}),w.d(Pt,"d",function(){return n}),w.d(Pt,"a",function(){return p}),w.d(Pt,"b",function(){return b}),w.d(Pt,"c",function(){return c});var H=w("6JdA"),i=[1,0,0,0,1,0,0,0,1];function y(S,I,m){if(m===void 0&&(m=i),!I)return null;var r=H.a.transform(m,[["t",-S.x,-S.y],["r",I],["t",S.x,S.y]]);return r}function t(S,I){return!S.x&&!S.y?null:H.a.transform(I||i,[["t",S.x,S.y]])}function n(S){var I=[1,0,0],m=[0,0,0];return H.d.transformMat3(m,I,S),Math.atan2(m[1],m[0])}function u(S,I){var m=[0,0];return H.c.transformMat3(m,I,S),m}function p(S,I){var m=u(S,[I.minX,I.minY]),r=u(S,[I.maxX,I.minY]),s=u(S,[I.minX,I.maxY]),d=u(S,[I.maxX,I.maxY]),C=Math.min(m[0],r[0],s[0],d[0]),E=Math.max(m[0],r[0],s[0],d[0]),A=Math.min(m[1],r[1],s[1],d[1]),f=Math.max(m[1],r[1],s[1],d[1]);return{x:C,y:A,minX:C,minY:A,maxX:E,maxY:f,width:E-C,height:f-A}}function b(S,I,m,r){if(I){var s=y({x:m,y:r},I,S.getMatrix());S.setMatrix(s)}}function c(S,I,m){var r=t({x:I,y:m});S.attr("matrix",r)}},"k+1r":function(qe,Pt,w){var H=w("QkVE");function i(y){var t=H(this,y).delete(y);return this.size-=t?1:0,t}qe.exports=i},kaz8:function(qe,Pt,w){"use strict";var H=w("rePB"),i=w("wx14"),y=w("q1tI"),t=w("TSYQ"),n=w.n(t),u=w("x1Ya"),p=w("KQm4"),b=w("ODXe"),c=w("bT9E"),S=w("H84U"),I=function(P,W){var X={};for(var $ in P)Object.prototype.hasOwnProperty.call(P,$)&&W.indexOf($)<0&&(X[$]=P[$]);if(P!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ft=0,$=Object.getOwnPropertySymbols(P);ft<$.length;ft++)W.indexOf($[ft])<0&&Object.prototype.propertyIsEnumerable.call(P,$[ft])&&(X[$[ft]]=P[$[ft]]);return X},m=y.createContext(null),r=function(W){var X=W.defaultValue,$=W.children,ft=W.options,Z=ft===void 0?[]:ft,lt=W.prefixCls,pt=W.className,gt=W.style,ut=W.onChange,Bt=I(W,["defaultValue","children","options","prefixCls","className","style","onChange"]),Lt=y.useContext(S.b),St=Lt.getPrefixCls,K=Lt.direction,dt=y.useState(Bt.value||X||[]),mt=Object(b.a)(dt,2),bt=mt[0],wt=mt[1],J=y.useState([]),ct=Object(b.a)(J,2),it=ct[0],_=ct[1];y.useEffect(function(){"value"in Bt&&wt(Bt.value||[])},[Bt.value]);var R=function(){return Z.map(function(Mt){return typeof Mt=="string"?{label:Mt,value:Mt}:Mt})},Q=function(Mt){_(function(yt){return yt.filter(function(xt){return xt!==Mt})})},k=function(Mt){_(function(yt){return[].concat(Object(p.a)(yt),[Mt])})},g=function(Mt){var yt=bt.indexOf(Mt.value),xt=Object(p.a)(bt);if(yt===-1?xt.push(Mt.value):xt.splice(yt,1),"value"in Bt||wt(xt),ut){var Ot=R();ut(xt.filter(function(jt){return it.indexOf(jt)!==-1}).sort(function(jt,Dt){var zt=Ot.findIndex(function(Wt){return Wt.value===jt}),Tt=Ot.findIndex(function(Wt){return Wt.value===Dt});return zt-Tt}))}},O=St("checkbox",lt),F="".concat(O,"-group"),V=Object(c.a)(Bt,["value","disabled"]);Z&&Z.length>0&&($=R().map(function(st){return y.createElement(f,{prefixCls:O,key:st.value.toString(),disabled:"disabled"in st?st.disabled:Bt.disabled,value:st.value,checked:bt.indexOf(st.value)!==-1,onChange:st.onChange,className:"".concat(F,"-item"),style:st.style},st.label)}));var rt={toggleOption:g,value:bt,disabled:Bt.disabled,name:Bt.name,registerValue:k,cancelValue:Q},ot=n()(F,Object(H.a)({},"".concat(F,"-rtl"),K==="rtl"),pt);return y.createElement("div",Object(i.a)({className:ot,style:gt},V),y.createElement(m.Provider,{value:rt},$))},s=y.memo(r),d=w("uaoM"),C=function(P,W){var X={};for(var $ in P)Object.prototype.hasOwnProperty.call(P,$)&&W.indexOf($)<0&&(X[$]=P[$]);if(P!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ft=0,$=Object.getOwnPropertySymbols(P);ft<$.length;ft++)W.indexOf($[ft])<0&&Object.prototype.propertyIsEnumerable.call(P,$[ft])&&(X[$[ft]]=P[$[ft]]);return X},E=function(W,X){var $,ft=W.prefixCls,Z=W.className,lt=W.children,pt=W.indeterminate,gt=pt===void 0?!1:pt,ut=W.style,Bt=W.onMouseEnter,Lt=W.onMouseLeave,St=W.skipGroup,K=St===void 0?!1:St,dt=C(W,["prefixCls","className","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup"]),mt=y.useContext(S.b),bt=mt.getPrefixCls,wt=mt.direction,J=y.useContext(m),ct=y.useRef(dt.value);y.useEffect(function(){J==null||J.registerValue(dt.value),Object(d.a)("checked"in dt||!!J||!("value"in dt),"Checkbox","`value` is not a valid prop, do you mean `checked`?")},[]),y.useEffect(function(){if(!K)return dt.value!==ct.current&&(J==null||J.cancelValue(ct.current),J==null||J.registerValue(dt.value)),function(){return J==null?void 0:J.cancelValue(dt.value)}},[dt.value]);var it=bt("checkbox",ft),_=Object(i.a)({},dt);J&&!K&&(_.onChange=function(){dt.onChange&&dt.onChange.apply(dt,arguments),J.toggleOption&&J.toggleOption({label:lt,value:dt.value})},_.name=J.name,_.checked=J.value.indexOf(dt.value)!==-1,_.disabled=dt.disabled||J.disabled);var R=n()(($={},Object(H.a)($,"".concat(it,"-wrapper"),!0),Object(H.a)($,"".concat(it,"-rtl"),wt==="rtl"),Object(H.a)($,"".concat(it,"-wrapper-checked"),_.checked),Object(H.a)($,"".concat(it,"-wrapper-disabled"),_.disabled),$),Z),Q=n()(Object(H.a)({},"".concat(it,"-indeterminate"),gt));return y.createElement("label",{className:R,style:ut,onMouseEnter:Bt,onMouseLeave:Lt},y.createElement(u.a,Object(i.a)({},_,{prefixCls:it,className:Q,ref:X})),lt!==void 0&&y.createElement("span",null,lt))},A=y.forwardRef(E);A.displayName="Checkbox";var f=A,x=f;x.Group=s,x.__ANT_CHECKBOX=!0;var j=Pt.a=x},kekF:function(qe,Pt){function w(H,i){return function(y){return H(i(y))}}qe.exports=w},kwiP:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return u});var H=w("mrSG"),i=w("zJSt"),y=w("u9/z"),t=w("SZbK"),n=w("B3DA"),u=function(p){Object(H.b)(b,p);function b(){var c=p!==null&&p.apply(this,arguments)||this;return c.type="process",c}return b.prototype.getDefaultOptions=function(){return{percent:.2,color:t.a,animation:!0}},b.prototype.changeData=function(c){this.updateOption({percent:c}),this.chart.changeData(Object(n.a)(c))},b.prototype.getSchemaAdaptor=function(){return y.a},b}(i.a)},l3hu:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return i});var H=w("iTfj");function i(y,t,n){var u=t+"Style",p=null;return Object(H.each)(n,function(b,c){y[c]&&b[u]&&(p||(p={}),Object(H.mix)(p,b[u]))}),p}},lFe4:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return i});var H=w("iTfj");function i(y){return Object(H.map)(y||[],function(t,n){return{x:""+n,y:t}})}},lOPJ:function(qe,Pt,w){"use strict";var H=w("AA7f"),i=w("iTfj"),y=w("0Xep"),t=w("Qci9"),n=function(u){Object(H.b)(p,u);function p(b){var c=u.call(this,b)||this;c.cacheMap={},c.adjustDataArray=[],c.mergeData=[];var S=b.marginRatio,I=S===void 0?y.d:S,m=b.dodgeRatio,r=m===void 0?y.b:m,s=b.dodgeBy,d=b.intervalPadding,C=b.dodgePadding,E=b.xDimensionLength,A=b.groupNum,f=b.defaultSize,x=b.maxColumnWidth,j=b.minColumnWidth,P=b.columnWidthRatio;return c.marginRatio=I,c.dodgeRatio=r,c.dodgeBy=s,c.intervalPadding=d,c.dodgePadding=C,c.xDimensionLegenth=E,c.groupNum=A,c.defaultSize=f,c.maxColumnWidth=x,c.minColumnWidth=j,c.columnWidthRatio=P,c}return p.prototype.process=function(b){var c=i.clone(b),S=i.flatten(c),I=this.dodgeBy,m=I?i.group(S,I):c;return this.cacheMap={},this.adjustDataArray=m,this.mergeData=S,this.adjustData(m,S),this.adjustDataArray=[],this.mergeData=[],c},p.prototype.adjustDim=function(b,c,S,I){var m=this,r=this.getDistribution(b),s=this.groupData(S,b);return i.each(s,function(d,C){var E;c.length===1?E={pre:c[0]-1,next:c[0]+1}:E=m.getAdjustRange(b,parseFloat(C),c),i.each(d,function(A){var f=A[b],x=r[f],j=x.indexOf(I);A[b]=m.getDodgeOffset(E,j,x.length)})}),[]},p.prototype.getDodgeOffset=function(b,c,S){var I=this,m=I.dodgeRatio,r=I.marginRatio,s=I.intervalPadding,d=I.dodgePadding,C=b.pre,E=b.next,A=E-C,f;if(!i.isNil(s)&&i.isNil(d)&&s>=0){var x=this.getIntervalOnlyOffset(S,c);f=C+x}else if(!i.isNil(d)&&i.isNil(s)&&d>=0){var x=this.getDodgeOnlyOffset(S,c);f=C+x}else if(!i.isNil(s)&&!i.isNil(d)&&s>=0&&d>=0){var x=this.getIntervalAndDodgeOffset(S,c);f=C+x}else{var j=A*m/S,P=r*j,x=1/2*(A-S*j-(S-1)*P)+((c+1)*j+c*P)-1/2*j-1/2*A;f=(C+E)/2+x}return f},p.prototype.getIntervalOnlyOffset=function(b,c){var S=this,I=S.defaultSize,m=S.intervalPadding,r=S.xDimensionLegenth,s=S.groupNum,d=S.dodgeRatio,C=S.maxColumnWidth,E=S.minColumnWidth,A=S.columnWidthRatio,f=m/r,x=(1-(s-1)*f)/s*d/(b-1),j=((1-f*(s-1))/s-x*(b-1))/b;if(j=i.isNil(A)?j:1/s/b*A,!i.isNil(C)){var P=C/r;j=Math.min(j,P)}if(!i.isNil(E)){var W=E/r;j=Math.max(j,W)}j=I?I/r:j,x=((1-(s-1)*f)/s-b*j)/(b-1);var X=((1/2+c)*j+c*x+1/2*f)*s-f/2;return X},p.prototype.getDodgeOnlyOffset=function(b,c){var S=this,I=S.defaultSize,m=S.dodgePadding,r=S.xDimensionLegenth,s=S.groupNum,d=S.marginRatio,C=S.maxColumnWidth,E=S.minColumnWidth,A=S.columnWidthRatio,f=m/r,x=1*d/(s-1),j=((1-x*(s-1))/s-f*(b-1))/b;if(j=A?1/s/b*A:j,!i.isNil(C)){var P=C/r;j=Math.min(j,P)}if(!i.isNil(E)){var W=E/r;j=Math.max(j,W)}j=I?I/r:j,x=(1-(j*b+f*(b-1))*s)/(s-1);var X=((1/2+c)*j+c*f+1/2*x)*s-x/2;return X},p.prototype.getIntervalAndDodgeOffset=function(b,c){var S=this,I=S.intervalPadding,m=S.dodgePadding,r=S.xDimensionLegenth,s=S.groupNum,d=I/r,C=m/r,E=((1-d*(s-1))/s-C*(b-1))/b,A=((1/2+c)*E+c*C+1/2*d)*s-d/2;return A},p.prototype.getDistribution=function(b){var c=this.adjustDataArray,S=this.cacheMap,I=S[b];return I||(I={},i.each(c,function(m,r){var s=i.valuesOfKey(m,b);s.length||s.push(0),i.each(s,function(d){I[d]||(I[d]=[]),I[d].push(r)})}),S[b]=I),I},p}(t.a);Pt.a=n},lSCD:function(qe,Pt,w){var H=w("NykK"),i=w("GoyQ"),y="[object AsyncFunction]",t="[object Function]",n="[object GeneratorFunction]",u="[object Proxy]";function p(b){if(!i(b))return!1;var c=H(b);return c==t||c==n||c==y||c==u}qe.exports=p},ljhN:function(qe,Pt){function w(H,i){return H===i||H!==H&&i!==i}qe.exports=w},lr9b:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return A});var H=w("mrSG"),i=w("zJSt"),y=w("YuPD"),t=w("iTfj"),n=w("w02o"),u=w("n/J0"),p="$$range$$",b="low-q1-median-q3-high",c="$$y_outliers$$";function S(f){var x=f.chart,j=f.options,P=j.xField,W=j.yField,X=j.groupField,$=j.color,ft=Array.isArray(W)?p:W,Z=x.schema().position(P+"*"+ft).shape("box");X&&Z.color(X,$).adjust("dodge");var lt=j.data;if(Array.isArray(W)){var pt=W[0],gt=W[1],ut=W[2],Bt=W[3],Lt=W[4];lt=Object(t.map)(lt,function(St){return St[p]=[St[pt],St[gt],St[ut],St[Bt],St[Lt]],St})}return x.data(lt),f}function I(f){var x=f.chart,j=f.options,P=j.xField,W=j.data,X=j.outliersField,$=j.outliersStyle,ft=j.padding;if(!X)return f;var Z=x.createView({padding:ft});Z.data(W),Z.axis(!1);var lt=Z.point().position(P+"*"+X).shape("circle");return Object(t.isFunction)($)?lt.style(P+"*"+X,function(pt,gt){var ut;return $((ut={},ut[P]=pt,ut[X]=gt,ut))}):Object(t.isObject)($)&&lt.style($),f}function m(f){var x,j,P=f.chart,W=f.options,X=W.meta,$=W.xAxis,ft=W.yAxis,Z=W.xField,lt=W.yField,pt=W.outliersField,gt=Array.isArray(lt)?p:lt,ut={};if(pt){var Bt=c;ut=(x={},x[pt]={sync:Bt},x[gt]={sync:Bt},x)}var Lt=Object(y.b)(ut,X,(j={},j[Z]=Object(y.k)($,u.a),j[gt]=Object(y.k)(ft,u.a),j));return P.scale(Lt),f}function r(f){var x=f.chart,j=f.options,P=j.xAxis,W=j.yAxis,X=j.xField,$=j.yField,ft=Array.isArray($)?p:$;return P===!1?x.axis(X,!1):x.axis(X,P),W===!1?x.axis(p,!1):x.axis(ft,W),f}function s(f){var x=f.chart,j=f.options,P=j.legend,W=j.groupField;return W?P?x.legend(W,P):x.legend(W,{position:"bottom"}):x.legend(!1),f}function d(f){var x=f.chart,j=f.options,P=j.xField,W=j.yField,X=j.boxStyle,$=Object(y.c)(x,"schema"),ft=Array.isArray(W)?p:W;return Object(t.isFunction)(X)?$.style(P+"*"+ft,function(Z,lt){var pt;return X((pt={},pt[P]=Z,pt[ft]=lt,pt))}):Object(t.isObject)(X)&&$.style(X),f}function C(f){var x=f.chart,j=f.options,P=j.tooltip;return P!==void 0&&x.tooltip(P),f}function E(f){return Object(y.e)(S,I,m,r,d,s,C,n.c,n.a,n.j)(f)}var A=function(f){Object(H.b)(x,f);function x(){var j=f!==null&&f.apply(this,arguments)||this;return j.type="box",j}return x.prototype.getDefaultOptions=function(){var j;return Object(y.b)({},f.prototype.getDefaultOptions.call(this),{meta:(j={},j[p]={min:0,alias:b},j),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,showCrosshairs:!0,shared:!0}})},x.prototype.getSchemaAdaptor=function(){return E},x}(i.a)},lt7v:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return i});var H=null;function i(){if(!H){var y=document.createElement("canvas");y.width=1,y.height=1,H=y.getContext("2d")}return H}},"ma/q":function(qe,Pt,w){"use strict";var H=w("Ihc8");w.d(Pt,"G2",function(){return H});var i=w("zJSt"),y=w("Djfg"),t=w("XloR");w.d(Pt,"Line",function(){return t.a});var n=w("uw/B");w.d(Pt,"Area",function(){return n.a});var u=w("u9VJ");w.d(Pt,"Column",function(){return u.a});var p=w("Y+LX");w.d(Pt,"Bar",function(){return p.a});var b=w("Cr25");w.d(Pt,"Pie",function(){return b.a});var c=w("z4Vf");w.d(Pt,"Rose",function(){return c.a});var S=w("Mj7Y");w.d(Pt,"WordCloud",function(){return S.a});var I=w("tE4n");w.d(Pt,"Scatter",function(){return I.a});var m=w("y753");w.d(Pt,"Radar",function(){return m.a});var r=w("yqCL");w.d(Pt,"DualAxes",function(){return r.a});var s=w("mttH");w.d(Pt,"TinyLine",function(){return s.a});var d=w("027J");w.d(Pt,"TinyColumn",function(){return d.a});var C=w("05BJ");w.d(Pt,"TinyArea",function(){return C.a});var E=w("BwSJ");w.d(Pt,"Histogram",function(){return E.a});var A=w("kwiP");w.d(Pt,"Progress",function(){return A.a});var f=w("YP77");w.d(Pt,"RingProgress",function(){return f.a});var x=w("+wVF");w.d(Pt,"Heatmap",function(){return x.a});var j=w("lr9b");w.d(Pt,"Box",function(){return j.a});var P=w("/+3i");w.d(Pt,"Stock",function(){return P.a});var W=w("aLzy");w.d(Pt,"Funnel",function(){return W.a});var X=w("FAXy");w.d(Pt,"Liquid",function(){return X.a});var $=w("BYeR");w.d(Pt,"Bullet",function(){return $.a});var ft=w("cBFB");w.d(Pt,"Sunburst",function(){return ft.a});var Z=w("XpFM");w.d(Pt,"Gauge",function(){return Z.a});var lt=w("FLLP");w.d(Pt,"Waterfall",function(){return lt.a});var pt=w("TEat");w.d(Pt,"RadialBar",function(){return pt.a});var gt=w("7ZbV");w.d(Pt,"BidirectionalBar",function(){return gt.a});var ut=w("eHqw");w.d(Pt,"Treemap",function(){return ut.a});var Bt=w("rtSP");w.d(Pt,"Sankey",function(){return Bt.a});var Lt=w("Uo7R"),St=w("7+4w"),K=w("QG4C");w.d(Pt,"MultiView",function(){return K.a});var dt=w("YuPD"),mt=w("tKoa"),bt=w("w02o"),wt=w("46lQ"),J="2.3.10",ct={scale:bt.f,legend:bt.d,tooltip:bt.k,annotation:bt.b,interaction:bt.c,theme:bt.j,animation:bt.a}},mdPL:function(qe,Pt,w){(function(H){var i=w("WFqU"),y=Pt&&!Pt.nodeType&&Pt,t=y&&typeof H=="object"&&H&&!H.nodeType&&H,n=t&&t.exports===y,u=n&&i.process,p=function(){try{var b=t&&t.require&&t.require("util").types;return b||u&&u.binding&&u.binding("util")}catch(c){}}();H.exports=p}).call(this,w("YuTi")(qe))},mj6g:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return t}),w.d(Pt,"d",function(){return n}),w.d(Pt,"c",function(){return u}),w.d(Pt,"b",function(){return p});var H=w("mrSG"),i=w("iTfj"),y=w("YuPD");function t(b){var c={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},S=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];Object(i.get)(b,"fill")&&(c.color=b.fill);var I=Object(y.k)(b,S),m=I.shadowColor,r=I.shadowBlur,s=r===void 0?0:r,d=I.shadowOffsetX,C=d===void 0?0:d,E=I.shadowOffsetY,A=E===void 0?0:E;c["text-shadow"]=""+[m,C+"px",A+"px",s+"px"].join(" ");var f=Object(y.k)(b,S),x=f.stroke,j=f.lineWidth,P=j===void 0?0:j;return c["-webkit-text-stroke"]=""+[P+"px",x].join(" "),Object(i.each)(b,function(W,X){["fontSize"].includes(X)&&Object(i.isNumber)(W)?c[Object(y.i)(X)]=W+"px":X&&!S.includes(X)&&(c[Object(y.i)(X)]=""+W)}),c}function n(b,c){b.style["pointer-events"]="none",Object(i.each)(c,function(S,I){I&&S&&(b.style[I]=S)})}var u=function(c,S,I){var m=S.statistic,r=S.plotType,s=m.title,d=m.content;[s,d].forEach(function(C,E){if(!!C){var A="",f="";E===0?f=d?"translate(-50%, -100%)":"translate(-50%, -50%)":f=s?"translate(-50%, 0)":"translate(-50%, -50%)";var x=Object(i.isFunction)(C.style)?C.style(I):C.style;c.annotation().html(Object(H.a)({position:["50%","50%"],html:function(P,W){var X=W.getCoordinate(),$=0;if(r==="pie"||r==="ring-progress")$=X.getRadius()*X.innerRadius*2;else if(r==="liquid"){var ft=Object(i.get)(W.geometries,[0,"elements",0,"shape"]);if(ft){var Z=ft.find(function(gt){return gt.get("type")==="circle"}),lt=Z.getCanvasBBox().width;$=lt}}else $||($=X.getWidth());n(P,Object(H.a)({width:$+"px",transform:f},t(x)));var pt=W.getData();return C.customHtml?C.customHtml(P,W,I,pt):(C.formatter&&(A=C.formatter(I,pt)),A?Object(i.isString)(A)?A:""+A:"<div></div>")},key:(E===0?"top":"bottom")+"-statistic"},Object(y.k)(C,["offsetX","offsetY","rotate","style","formatter"])))}})},p=function(c,S,I){var m=S.statistic,r=m.title,s=m.content;[r,s].forEach(function(d){if(!!d){var C="",E=Object(i.isFunction)(d.style)?d.style(I):d.style;c.annotation().html(Object(H.a)({position:["50%","100%"],html:function(f,x){var j=x.getCoordinate(),P=x.views[0].getCoordinate(),W=P.getCenter(),X=P.getRadius(),$=Math.max(Math.sin(P.startAngle),Math.sin(P.endAngle))*X,ft=W.y+$-j.y.start-parseFloat(Object(i.get)(E,"fontSize",0)),Z=j.getRadius()*j.innerRadius*2;n(f,Object(H.a)({width:Z+"px",transform:"translate(-50%, "+ft+"px)"},t(E)));var lt=x.getData();return d.customHtml?d.customHtml(f,x,I,lt):(d.formatter&&(C=d.formatter(I,lt)),C?Object(i.isString)(C)?C:""+C:"<div></div>")}},Object(y.k)(d,["offsetX","offsetY","rotate","style","formatter"])))}})}},mrSG:function(qe,Pt,w){"use strict";w.d(Pt,"b",function(){return i}),w.d(Pt,"a",function(){return y}),w.d(Pt,"c",function(){return t}),w.d(Pt,"d",function(){return d});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var H=function(lt,pt){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(gt,ut){gt.__proto__=ut}||function(gt,ut){for(var Bt in ut)Object.prototype.hasOwnProperty.call(ut,Bt)&&(gt[Bt]=ut[Bt])},H(lt,pt)};function i(Z,lt){if(typeof lt!="function"&&lt!==null)throw new TypeError("Class extends value "+String(lt)+" is not a constructor or null");H(Z,lt);function pt(){this.constructor=Z}Z.prototype=lt===null?Object.create(lt):(pt.prototype=lt.prototype,new pt)}var y=function(){return y=Object.assign||function(pt){for(var gt,ut=1,Bt=arguments.length;ut<Bt;ut++){gt=arguments[ut];for(var Lt in gt)Object.prototype.hasOwnProperty.call(gt,Lt)&&(pt[Lt]=gt[Lt])}return pt},y.apply(this,arguments)};function t(Z,lt){var pt={};for(var gt in Z)Object.prototype.hasOwnProperty.call(Z,gt)&&lt.indexOf(gt)<0&&(pt[gt]=Z[gt]);if(Z!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ut=0,gt=Object.getOwnPropertySymbols(Z);ut<gt.length;ut++)lt.indexOf(gt[ut])<0&&Object.prototype.propertyIsEnumerable.call(Z,gt[ut])&&(pt[gt[ut]]=Z[gt[ut]]);return pt}function n(Z,lt,pt,gt){var ut=arguments.length,Bt=ut<3?lt:gt===null?gt=Object.getOwnPropertyDescriptor(lt,pt):gt,Lt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Bt=Reflect.decorate(Z,lt,pt,gt);else for(var St=Z.length-1;St>=0;St--)(Lt=Z[St])&&(Bt=(ut<3?Lt(Bt):ut>3?Lt(lt,pt,Bt):Lt(lt,pt))||Bt);return ut>3&&Bt&&Object.defineProperty(lt,pt,Bt),Bt}function u(Z,lt){return function(pt,gt){lt(pt,gt,Z)}}function p(Z,lt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(Z,lt)}function b(Z,lt,pt,gt){function ut(Bt){return Bt instanceof pt?Bt:new pt(function(Lt){Lt(Bt)})}return new(pt||(pt=Promise))(function(Bt,Lt){function St(mt){try{dt(gt.next(mt))}catch(bt){Lt(bt)}}function K(mt){try{dt(gt.throw(mt))}catch(bt){Lt(bt)}}function dt(mt){mt.done?Bt(mt.value):ut(mt.value).then(St,K)}dt((gt=gt.apply(Z,lt||[])).next())})}function c(Z,lt){var pt={label:0,sent:function(){if(Bt[0]&1)throw Bt[1];return Bt[1]},trys:[],ops:[]},gt,ut,Bt,Lt;return Lt={next:St(0),throw:St(1),return:St(2)},typeof Symbol=="function"&&(Lt[Symbol.iterator]=function(){return this}),Lt;function St(dt){return function(mt){return K([dt,mt])}}function K(dt){if(gt)throw new TypeError("Generator is already executing.");for(;pt;)try{if(gt=1,ut&&(Bt=dt[0]&2?ut.return:dt[0]?ut.throw||((Bt=ut.return)&&Bt.call(ut),0):ut.next)&&!(Bt=Bt.call(ut,dt[1])).done)return Bt;switch(ut=0,Bt&&(dt=[dt[0]&2,Bt.value]),dt[0]){case 0:case 1:Bt=dt;break;case 4:return pt.label++,{value:dt[1],done:!1};case 5:pt.label++,ut=dt[1],dt=[0];continue;case 7:dt=pt.ops.pop(),pt.trys.pop();continue;default:if(Bt=pt.trys,!(Bt=Bt.length>0&&Bt[Bt.length-1])&&(dt[0]===6||dt[0]===2)){pt=0;continue}if(dt[0]===3&&(!Bt||dt[1]>Bt[0]&&dt[1]<Bt[3])){pt.label=dt[1];break}if(dt[0]===6&&pt.label<Bt[1]){pt.label=Bt[1],Bt=dt;break}if(Bt&&pt.label<Bt[2]){pt.label=Bt[2],pt.ops.push(dt);break}Bt[2]&&pt.ops.pop(),pt.trys.pop();continue}dt=lt.call(Z,pt)}catch(mt){dt=[6,mt],ut=0}finally{gt=Bt=0}if(dt[0]&5)throw dt[1];return{value:dt[0]?dt[1]:void 0,done:!0}}}var S=Object.create?function(Z,lt,pt,gt){gt===void 0&&(gt=pt),Object.defineProperty(Z,gt,{enumerable:!0,get:function(){return lt[pt]}})}:function(Z,lt,pt,gt){gt===void 0&&(gt=pt),Z[gt]=lt[pt]};function I(Z,lt){for(var pt in Z)pt!=="default"&&!Object.prototype.hasOwnProperty.call(lt,pt)&&S(lt,Z,pt)}function m(Z){var lt=typeof Symbol=="function"&&Symbol.iterator,pt=lt&&Z[lt],gt=0;if(pt)return pt.call(Z);if(Z&&typeof Z.length=="number")return{next:function(){return Z&&gt>=Z.length&&(Z=void 0),{value:Z&&Z[gt++],done:!Z}}};throw new TypeError(lt?"Object is not iterable.":"Symbol.iterator is not defined.")}function r(Z,lt){var pt=typeof Symbol=="function"&&Z[Symbol.iterator];if(!pt)return Z;var gt=pt.call(Z),ut,Bt=[],Lt;try{for(;(lt===void 0||lt-- >0)&&!(ut=gt.next()).done;)Bt.push(ut.value)}catch(St){Lt={error:St}}finally{try{ut&&!ut.done&&(pt=gt.return)&&pt.call(gt)}finally{if(Lt)throw Lt.error}}return Bt}function s(){for(var Z=[],lt=0;lt<arguments.length;lt++)Z=Z.concat(r(arguments[lt]));return Z}function d(){for(var Z=0,lt=0,pt=arguments.length;lt<pt;lt++)Z+=arguments[lt].length;for(var gt=Array(Z),ut=0,lt=0;lt<pt;lt++)for(var Bt=arguments[lt],Lt=0,St=Bt.length;Lt<St;Lt++,ut++)gt[ut]=Bt[Lt];return gt}function C(Z,lt){for(var pt=0,gt=lt.length,ut=Z.length;pt<gt;pt++,ut++)Z[ut]=lt[pt];return Z}function E(Z){return this instanceof E?(this.v=Z,this):new E(Z)}function A(Z,lt,pt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var gt=pt.apply(Z,lt||[]),ut,Bt=[];return ut={},Lt("next"),Lt("throw"),Lt("return"),ut[Symbol.asyncIterator]=function(){return this},ut;function Lt(wt){gt[wt]&&(ut[wt]=function(J){return new Promise(function(ct,it){Bt.push([wt,J,ct,it])>1||St(wt,J)})})}function St(wt,J){try{K(gt[wt](J))}catch(ct){bt(Bt[0][3],ct)}}function K(wt){wt.value instanceof E?Promise.resolve(wt.value.v).then(dt,mt):bt(Bt[0][2],wt)}function dt(wt){St("next",wt)}function mt(wt){St("throw",wt)}function bt(wt,J){wt(J),Bt.shift(),Bt.length&&St(Bt[0][0],Bt[0][1])}}function f(Z){var lt,pt;return lt={},gt("next"),gt("throw",function(ut){throw ut}),gt("return"),lt[Symbol.iterator]=function(){return this},lt;function gt(ut,Bt){lt[ut]=Z[ut]?function(Lt){return(pt=!pt)?{value:E(Z[ut](Lt)),done:ut==="return"}:Bt?Bt(Lt):Lt}:Bt}}function x(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var lt=Z[Symbol.asyncIterator],pt;return lt?lt.call(Z):(Z=typeof m=="function"?m(Z):Z[Symbol.iterator](),pt={},gt("next"),gt("throw"),gt("return"),pt[Symbol.asyncIterator]=function(){return this},pt);function gt(Bt){pt[Bt]=Z[Bt]&&function(Lt){return new Promise(function(St,K){Lt=Z[Bt](Lt),ut(St,K,Lt.done,Lt.value)})}}function ut(Bt,Lt,St,K){Promise.resolve(K).then(function(dt){Bt({value:dt,done:St})},Lt)}}function j(Z,lt){return Object.defineProperty?Object.defineProperty(Z,"raw",{value:lt}):Z.raw=lt,Z}var P=Object.create?function(Z,lt){Object.defineProperty(Z,"default",{enumerable:!0,value:lt})}:function(Z,lt){Z.default=lt};function W(Z){if(Z&&Z.__esModule)return Z;var lt={};if(Z!=null)for(var pt in Z)pt!=="default"&&Object.prototype.hasOwnProperty.call(Z,pt)&&S(lt,Z,pt);return P(lt,Z),lt}function X(Z){return Z&&Z.__esModule?Z:{default:Z}}function $(Z,lt){if(!lt.has(Z))throw new TypeError("attempted to get private field on non-instance");return lt.get(Z)}function ft(Z,lt,pt){if(!lt.has(Z))throw new TypeError("attempted to set private field on non-instance");return lt.set(Z,pt),pt}},mttH:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return I});var H=w("mrSG"),i=w("zJSt"),y=w("YuPD"),t=w("w02o"),n=w("tKoa"),u=w("DyAw"),p=w("lFe4"),b=w("7cv3");function c(m){var r,s,d=m.chart,C=m.options,E=C.data,A=C.xAxis,f=C.yAxis,x=C.color,j=C.lineStyle,P=C.point,W=Object(p.a)(E);d.data(W);var X=Object(y.b)({},m,{options:{xField:b.b,yField:b.c,line:{color:x,style:j},point:P}}),$=Object(y.b)({},X,{options:{tooltip:!1}});return Object(n.d)(X),Object(n.e)($),d.axis(!1),d.legend(!1),Object(t.f)((r={},r[b.b]=A,r[b.c]=f,r),(s={},s[b.b]={type:"cat"},s[b.c]=Object(u.a)(W,b.c),s))(m),m}function S(m){return Object(y.e)(c,t.j,t.k,t.a,Object(t.b)())(m)}var I=function(m){Object(H.b)(r,m);function r(){var s=m!==null&&m.apply(this,arguments)||this;return s.type="tiny-line",s}return r.prototype.changeData=function(s){this.updateOption({data:s}),this.chart.changeData(Object(p.a)(s))},r.prototype.getDefaultOptions=function(){return{appendPadding:2,tooltip:Object(H.a)({},b.a),animation:!0}},r.prototype.getSchemaAdaptor=function(){return S},r}(i.a)},"n+fv":function(qe,Pt,w){"use strict";w.r(Pt),w.d(Pt,"create",function(){return i}),w.d(Pt,"clone",function(){return y}),w.d(Pt,"length",function(){return t}),w.d(Pt,"fromValues",function(){return n}),w.d(Pt,"copy",function(){return u}),w.d(Pt,"set",function(){return p}),w.d(Pt,"add",function(){return b}),w.d(Pt,"subtract",function(){return c}),w.d(Pt,"multiply",function(){return S}),w.d(Pt,"divide",function(){return I}),w.d(Pt,"ceil",function(){return m}),w.d(Pt,"floor",function(){return r}),w.d(Pt,"min",function(){return s}),w.d(Pt,"max",function(){return d}),w.d(Pt,"round",function(){return C}),w.d(Pt,"scale",function(){return E}),w.d(Pt,"scaleAndAdd",function(){return A}),w.d(Pt,"distance",function(){return f}),w.d(Pt,"squaredDistance",function(){return x}),w.d(Pt,"squaredLength",function(){return j}),w.d(Pt,"negate",function(){return P}),w.d(Pt,"inverse",function(){return W}),w.d(Pt,"normalize",function(){return X}),w.d(Pt,"dot",function(){return $}),w.d(Pt,"cross",function(){return ft}),w.d(Pt,"lerp",function(){return Z}),w.d(Pt,"hermite",function(){return lt}),w.d(Pt,"bezier",function(){return pt}),w.d(Pt,"random",function(){return gt}),w.d(Pt,"transformMat4",function(){return ut}),w.d(Pt,"transformMat3",function(){return Bt}),w.d(Pt,"transformQuat",function(){return Lt}),w.d(Pt,"rotateX",function(){return St}),w.d(Pt,"rotateY",function(){return K}),w.d(Pt,"rotateZ",function(){return dt}),w.d(Pt,"angle",function(){return mt}),w.d(Pt,"zero",function(){return bt}),w.d(Pt,"str",function(){return wt}),w.d(Pt,"exactEquals",function(){return J}),w.d(Pt,"equals",function(){return ct}),w.d(Pt,"sub",function(){return it}),w.d(Pt,"mul",function(){return _}),w.d(Pt,"div",function(){return R}),w.d(Pt,"dist",function(){return Q}),w.d(Pt,"sqrDist",function(){return k}),w.d(Pt,"len",function(){return g}),w.d(Pt,"sqrLen",function(){return O}),w.d(Pt,"forEach",function(){return F});var H=w("yU0y");function i(){var V=new H.a(3);return H.a!=Float32Array&&(V[0]=0,V[1]=0,V[2]=0),V}function y(V){var rt=new H.a(3);return rt[0]=V[0],rt[1]=V[1],rt[2]=V[2],rt}function t(V){var rt=V[0],ot=V[1],st=V[2];return Math.hypot(rt,ot,st)}function n(V,rt,ot){var st=new H.a(3);return st[0]=V,st[1]=rt,st[2]=ot,st}function u(V,rt){return V[0]=rt[0],V[1]=rt[1],V[2]=rt[2],V}function p(V,rt,ot,st){return V[0]=rt,V[1]=ot,V[2]=st,V}function b(V,rt,ot){return V[0]=rt[0]+ot[0],V[1]=rt[1]+ot[1],V[2]=rt[2]+ot[2],V}function c(V,rt,ot){return V[0]=rt[0]-ot[0],V[1]=rt[1]-ot[1],V[2]=rt[2]-ot[2],V}function S(V,rt,ot){return V[0]=rt[0]*ot[0],V[1]=rt[1]*ot[1],V[2]=rt[2]*ot[2],V}function I(V,rt,ot){return V[0]=rt[0]/ot[0],V[1]=rt[1]/ot[1],V[2]=rt[2]/ot[2],V}function m(V,rt){return V[0]=Math.ceil(rt[0]),V[1]=Math.ceil(rt[1]),V[2]=Math.ceil(rt[2]),V}function r(V,rt){return V[0]=Math.floor(rt[0]),V[1]=Math.floor(rt[1]),V[2]=Math.floor(rt[2]),V}function s(V,rt,ot){return V[0]=Math.min(rt[0],ot[0]),V[1]=Math.min(rt[1],ot[1]),V[2]=Math.min(rt[2],ot[2]),V}function d(V,rt,ot){return V[0]=Math.max(rt[0],ot[0]),V[1]=Math.max(rt[1],ot[1]),V[2]=Math.max(rt[2],ot[2]),V}function C(V,rt){return V[0]=Math.round(rt[0]),V[1]=Math.round(rt[1]),V[2]=Math.round(rt[2]),V}function E(V,rt,ot){return V[0]=rt[0]*ot,V[1]=rt[1]*ot,V[2]=rt[2]*ot,V}function A(V,rt,ot,st){return V[0]=rt[0]+ot[0]*st,V[1]=rt[1]+ot[1]*st,V[2]=rt[2]+ot[2]*st,V}function f(V,rt){var ot=rt[0]-V[0],st=rt[1]-V[1],Mt=rt[2]-V[2];return Math.hypot(ot,st,Mt)}function x(V,rt){var ot=rt[0]-V[0],st=rt[1]-V[1],Mt=rt[2]-V[2];return ot*ot+st*st+Mt*Mt}function j(V){var rt=V[0],ot=V[1],st=V[2];return rt*rt+ot*ot+st*st}function P(V,rt){return V[0]=-rt[0],V[1]=-rt[1],V[2]=-rt[2],V}function W(V,rt){return V[0]=1/rt[0],V[1]=1/rt[1],V[2]=1/rt[2],V}function X(V,rt){var ot=rt[0],st=rt[1],Mt=rt[2],yt=ot*ot+st*st+Mt*Mt;return yt>0&&(yt=1/Math.sqrt(yt)),V[0]=rt[0]*yt,V[1]=rt[1]*yt,V[2]=rt[2]*yt,V}function $(V,rt){return V[0]*rt[0]+V[1]*rt[1]+V[2]*rt[2]}function ft(V,rt,ot){var st=rt[0],Mt=rt[1],yt=rt[2],xt=ot[0],Ot=ot[1],jt=ot[2];return V[0]=Mt*jt-yt*Ot,V[1]=yt*xt-st*jt,V[2]=st*Ot-Mt*xt,V}function Z(V,rt,ot,st){var Mt=rt[0],yt=rt[1],xt=rt[2];return V[0]=Mt+st*(ot[0]-Mt),V[1]=yt+st*(ot[1]-yt),V[2]=xt+st*(ot[2]-xt),V}function lt(V,rt,ot,st,Mt,yt){var xt=yt*yt,Ot=xt*(2*yt-3)+1,jt=xt*(yt-2)+yt,Dt=xt*(yt-1),zt=xt*(3-2*yt);return V[0]=rt[0]*Ot+ot[0]*jt+st[0]*Dt+Mt[0]*zt,V[1]=rt[1]*Ot+ot[1]*jt+st[1]*Dt+Mt[1]*zt,V[2]=rt[2]*Ot+ot[2]*jt+st[2]*Dt+Mt[2]*zt,V}function pt(V,rt,ot,st,Mt,yt){var xt=1-yt,Ot=xt*xt,jt=yt*yt,Dt=Ot*xt,zt=3*yt*Ot,Tt=3*jt*xt,Wt=jt*yt;return V[0]=rt[0]*Dt+ot[0]*zt+st[0]*Tt+Mt[0]*Wt,V[1]=rt[1]*Dt+ot[1]*zt+st[1]*Tt+Mt[1]*Wt,V[2]=rt[2]*Dt+ot[2]*zt+st[2]*Tt+Mt[2]*Wt,V}function gt(V,rt){rt=rt||1;var ot=H.c()*2*Math.PI,st=H.c()*2-1,Mt=Math.sqrt(1-st*st)*rt;return V[0]=Math.cos(ot)*Mt,V[1]=Math.sin(ot)*Mt,V[2]=st*rt,V}function ut(V,rt,ot){var st=rt[0],Mt=rt[1],yt=rt[2],xt=ot[3]*st+ot[7]*Mt+ot[11]*yt+ot[15];return xt=xt||1,V[0]=(ot[0]*st+ot[4]*Mt+ot[8]*yt+ot[12])/xt,V[1]=(ot[1]*st+ot[5]*Mt+ot[9]*yt+ot[13])/xt,V[2]=(ot[2]*st+ot[6]*Mt+ot[10]*yt+ot[14])/xt,V}function Bt(V,rt,ot){var st=rt[0],Mt=rt[1],yt=rt[2];return V[0]=st*ot[0]+Mt*ot[3]+yt*ot[6],V[1]=st*ot[1]+Mt*ot[4]+yt*ot[7],V[2]=st*ot[2]+Mt*ot[5]+yt*ot[8],V}function Lt(V,rt,ot){var st=ot[0],Mt=ot[1],yt=ot[2],xt=ot[3],Ot=rt[0],jt=rt[1],Dt=rt[2],zt=Mt*Dt-yt*jt,Tt=yt*Ot-st*Dt,Wt=st*jt-Mt*Ot,Ht=Mt*Wt-yt*Tt,re=yt*zt-st*Wt,pe=st*Tt-Mt*zt,me=xt*2;return zt*=me,Tt*=me,Wt*=me,Ht*=2,re*=2,pe*=2,V[0]=Ot+zt+Ht,V[1]=jt+Tt+re,V[2]=Dt+Wt+pe,V}function St(V,rt,ot,st){var Mt=[],yt=[];return Mt[0]=rt[0]-ot[0],Mt[1]=rt[1]-ot[1],Mt[2]=rt[2]-ot[2],yt[0]=Mt[0],yt[1]=Mt[1]*Math.cos(st)-Mt[2]*Math.sin(st),yt[2]=Mt[1]*Math.sin(st)+Mt[2]*Math.cos(st),V[0]=yt[0]+ot[0],V[1]=yt[1]+ot[1],V[2]=yt[2]+ot[2],V}function K(V,rt,ot,st){var Mt=[],yt=[];return Mt[0]=rt[0]-ot[0],Mt[1]=rt[1]-ot[1],Mt[2]=rt[2]-ot[2],yt[0]=Mt[2]*Math.sin(st)+Mt[0]*Math.cos(st),yt[1]=Mt[1],yt[2]=Mt[2]*Math.cos(st)-Mt[0]*Math.sin(st),V[0]=yt[0]+ot[0],V[1]=yt[1]+ot[1],V[2]=yt[2]+ot[2],V}function dt(V,rt,ot,st){var Mt=[],yt=[];return Mt[0]=rt[0]-ot[0],Mt[1]=rt[1]-ot[1],Mt[2]=rt[2]-ot[2],yt[0]=Mt[0]*Math.cos(st)-Mt[1]*Math.sin(st),yt[1]=Mt[0]*Math.sin(st)+Mt[1]*Math.cos(st),yt[2]=Mt[2],V[0]=yt[0]+ot[0],V[1]=yt[1]+ot[1],V[2]=yt[2]+ot[2],V}function mt(V,rt){var ot=V[0],st=V[1],Mt=V[2],yt=rt[0],xt=rt[1],Ot=rt[2],jt=Math.sqrt(ot*ot+st*st+Mt*Mt),Dt=Math.sqrt(yt*yt+xt*xt+Ot*Ot),zt=jt*Dt,Tt=zt&&$(V,rt)/zt;return Math.acos(Math.min(Math.max(Tt,-1),1))}function bt(V){return V[0]=0,V[1]=0,V[2]=0,V}function wt(V){return"vec3("+V[0]+", "+V[1]+", "+V[2]+")"}function J(V,rt){return V[0]===rt[0]&&V[1]===rt[1]&&V[2]===rt[2]}function ct(V,rt){var ot=V[0],st=V[1],Mt=V[2],yt=rt[0],xt=rt[1],Ot=rt[2];return Math.abs(ot-yt)<=H.b*Math.max(1,Math.abs(ot),Math.abs(yt))&&Math.abs(st-xt)<=H.b*Math.max(1,Math.abs(st),Math.abs(xt))&&Math.abs(Mt-Ot)<=H.b*Math.max(1,Math.abs(Mt),Math.abs(Ot))}var it=c,_=S,R=I,Q=f,k=x,g=t,O=j,F=function(){var V=i();return function(rt,ot,st,Mt,yt,xt){var Ot,jt;for(ot||(ot=3),st||(st=0),Mt?jt=Math.min(Mt*ot+st,rt.length):jt=rt.length,Ot=st;Ot<jt;Ot+=ot)V[0]=rt[Ot],V[1]=rt[Ot+1],V[2]=rt[Ot+2],yt(V,V,xt),rt[Ot]=V[0],rt[Ot+1]=V[1],rt[Ot+2]=V[2];return rt}}()},"n/J0":function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return H}),w.d(Pt,"b",function(){return i});var H=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask"],i={GRADIENT:{CONTINUOUS:"#BAE7FF-#1890FF-#0050B3"}}},nCnq:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return n});var H=w("cyZq");function i(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function y(u,p){return i(u)*i(p)?(u[0]*p[0]+u[1]*p[1])/(i(u)*i(p)):1}function t(u,p){return(u[0]*p[1]<u[1]*p[0]?-1:1)*Math.acos(y(u,p))}function n(u,p){var b=p[1],c=p[2],S=Object(H.m)(Object(H.o)(p[3]),Math.PI*2),I=p[4],m=p[5],r=u[0],s=u[1],d=p[6],C=p[7],E=Math.cos(S)*(r-d)/2+Math.sin(S)*(s-C)/2,A=-1*Math.sin(S)*(r-d)/2+Math.cos(S)*(s-C)/2,f=E*E/(b*b)+A*A/(c*c);f>1&&(b*=Math.sqrt(f),c*=Math.sqrt(f));var x=b*b*(A*A)+c*c*(E*E),j=x?Math.sqrt((b*b*(c*c)-x)/x):1;I===m&&(j*=-1),isNaN(j)&&(j=0);var P=c?j*b*A/c:0,W=b?j*-c*E/b:0,X=(r+d)/2+Math.cos(S)*P-Math.sin(S)*W,$=(s+C)/2+Math.sin(S)*P+Math.cos(S)*W,ft=[(E-P)/b,(A-W)/c],Z=[(-1*E-P)/b,(-1*A-W)/c],lt=t([1,0],ft),pt=t(ft,Z);return y(ft,Z)<=-1&&(pt=Math.PI),y(ft,Z)>=1&&(pt=0),m===0&&pt>0&&(pt=pt-2*Math.PI),m===1&&pt<0&&(pt=pt+2*Math.PI),{cx:X,cy:$,rx:Object(H.j)(u,[d,C])?0:b,ry:Object(H.j)(u,[d,C])?0:c,startAngle:lt,endAngle:lt+pt,xRotation:S,arcFlag:I,sweepFlag:m}}},nMtQ:function(qe,Pt,w){qe.exports={updateTime:"updateTime___3zyv9"}},nycV:function(qe,Pt,w){"use strict";w.d(Pt,"c",function(){return c}),w.d(Pt,"b",function(){return S}),w.d(Pt,"a",function(){return I});var H=w("mrSG"),i=w("R5nb"),y=Math.sin,t=Math.cos,n=Math.atan2,u=Math.PI;function p(m,r,s,d,C,E,A){var f=r.stroke,x=r.lineWidth,j=s-C,P=d-E,W=n(P,j),X=new i.Path({type:"path",canvas:m.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*t(u/6)+","+10*y(u/6)+" L0,0 L"+10*t(u/6)+",-"+10*y(u/6),stroke:f,lineWidth:x}});X.translate(C,E),X.rotateAtPoint(C,E,W),m.set(A?"startArrowShape":"endArrowShape",X)}function b(m,r,s,d,C,E,A){var f=r.startArrow,x=r.endArrow,j=r.stroke,P=r.lineWidth,W=A?f:x,X=W.d,$=W.fill,ft=W.stroke,Z=W.lineWidth,lt=Object(H.c)(W,["d","fill","stroke","lineWidth"]),pt=s-C,gt=d-E,ut=n(gt,pt);X&&(C=C-t(ut)*X,E=E-y(ut)*X);var Bt=new i.Path({type:"path",canvas:m.get("canvas"),isArrowShape:!0,attrs:Object(H.a)(Object(H.a)({},lt),{stroke:ft||j,lineWidth:Z||P,fill:$})});Bt.translate(C,E),Bt.rotateAtPoint(C,E,ut),m.set(A?"startArrowShape":"endArrowShape",Bt)}function c(m,r,s,d,C){var E=n(d-r,s-m);return{dx:t(E)*C,dy:y(E)*C}}function S(m,r,s,d,C,E){typeof r.startArrow=="object"?b(m,r,s,d,C,E,!0):r.startArrow?p(m,r,s,d,C,E,!0):m.set("startArrowShape",null)}function I(m,r,s,d,C,E){typeof r.endArrow=="object"?b(m,r,s,d,C,E,!1):r.endArrow?p(m,r,s,d,C,E,!1):m.set("startArrowShape",null)}},or5M:function(qe,Pt,w){var H=w("1hJj"),i=w("QoRX"),y=w("xYSL"),t=1,n=2;function u(p,b,c,S,I,m){var r=c&t,s=p.length,d=b.length;if(s!=d&&!(r&&d>s))return!1;var C=m.get(p),E=m.get(b);if(C&&E)return C==b&&E==p;var A=-1,f=!0,x=c&n?new H:void 0;for(m.set(p,b),m.set(b,p);++A<s;){var j=p[A],P=b[A];if(S)var W=r?S(P,j,A,b,p,m):S(j,P,A,p,b,m);if(W!==void 0){if(W)continue;f=!1;break}if(x){if(!i(b,function(X,$){if(!y(x,$)&&(j===X||I(j,X,c,S,m)))return x.push($)})){f=!1;break}}else if(!(j===P||I(j,P,c,S,m))){f=!1;break}}return m.delete(p),m.delete(b),f}qe.exports=u},"pED+":function(qe,Pt,w){},pSRY:function(qe,Pt,w){var H=w("QkVE");function i(y){return H(this,y).has(y)}qe.exports=i},q4HE:function(qe,Pt){var w="\\ud800-\\udfff",H="\\u0300-\\u036f",i="\\ufe20-\\ufe2f",y="\\u20d0-\\u20ff",t=H+i+y,n="\\ufe0e\\ufe0f",u="["+w+"]",p="["+t+"]",b="\\ud83c[\\udffb-\\udfff]",c="(?:"+p+"|"+b+")",S="[^"+w+"]",I="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",r="\\u200d",s=c+"?",d="["+n+"]?",C="(?:"+r+"(?:"+[S,I,m].join("|")+")"+d+s+")*",E=d+s+C,A="(?:"+[S+p+"?",p,I,m,u].join("|")+")",f=RegExp(b+"(?="+b+")|"+A+E,"g");function x(j){for(var P=f.lastIndex=0;f.test(j);)++P;return P}qe.exports=x},qZTm:function(qe,Pt,w){var H=w("fR/l"),i=w("MvSz"),y=w("7GkX");function t(n){return H(n,y,i)}qe.exports=t},qaDU:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return t});var H=w("mrSG"),i=w("Ihc8"),y=[1,0,0,0,1,0,0,0,1];function t(n,u){var p=u?Object(H.d)(u):Object(H.d)(y);return i.Util.transform(p,n)}},quyA:function(qe,Pt){var w="\\ud800-\\udfff",H="\\u0300-\\u036f",i="\\ufe20-\\ufe2f",y="\\u20d0-\\u20ff",t=H+i+y,n="\\ufe0e\\ufe0f",u="\\u200d",p=RegExp("["+u+w+t+n+"]");function b(c){return p.test(c)}qe.exports=b},qx4F:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return i});var H;function i(y){if(typeof document=="undefined")return 0;if(y||H===void 0){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var n=document.createElement("div"),u=n.style;u.position="absolute",u.top=0,u.left=0,u.pointerEvents="none",u.visibility="hidden",u.width="200px",u.height="150px",u.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var p=t.offsetWidth;n.style.overflow="scroll";var b=t.offsetWidth;p===b&&(b=n.clientWidth),document.body.removeChild(n),H=p-b}return H}},r0DC:function(qe,Pt,w){"use strict";w.d(Pt,"b",function(){return S}),w.d(Pt,"a",function(){return I});var H=w("cyZq"),i=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,y=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,t=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,n=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function u(m,r){var s=m.match(n);Object(H.c)(s,function(d){var C=d.split(":");r.addColorStop(C[0],C[1])})}function p(m,r,s){var d=i.exec(s),C=parseFloat(d[1])%360*(Math.PI/180),E=d[2],A=r.getBBox(),f,x;C>=0&&C<1/2*Math.PI?(f={x:A.minX,y:A.minY},x={x:A.maxX,y:A.maxY}):1/2*Math.PI<=C&&C<Math.PI?(f={x:A.maxX,y:A.minY},x={x:A.minX,y:A.maxY}):Math.PI<=C&&C<3/2*Math.PI?(f={x:A.maxX,y:A.maxY},x={x:A.minX,y:A.minY}):(f={x:A.minX,y:A.maxY},x={x:A.maxX,y:A.minY});var j=Math.tan(C),P=j*j,W=(x.x-f.x+j*(x.y-f.y))/(P+1)+f.x,X=j*(x.x-f.x+j*(x.y-f.y))/(P+1)+f.y,$=m.createLinearGradient(f.x,f.y,W,X);return u(E,$),$}function b(m,r,s){var d=y.exec(s),C=parseFloat(d[1]),E=parseFloat(d[2]),A=parseFloat(d[3]),f=d[4];if(A===0){var x=f.match(n);return x[x.length-1].split(":")[1]}var j=r.getBBox(),P=j.maxX-j.minX,W=j.maxY-j.minY,X=Math.sqrt(P*P+W*W)/2,$=m.createRadialGradient(j.minX+P*C,j.minY+W*E,0,j.minX+P/2,j.minY+W/2,A*X);return u(f,$),$}function c(m,r,s){if(r.get("patternSource")&&r.get("patternSource")===s)return r.get("pattern");var d,C,E=t.exec(s),A=E[1],f=E[2];function x(){d=m.createPattern(C,A),r.set("pattern",d),r.set("patternSource",s)}switch(A){case"a":A="repeat";break;case"x":A="repeat-x";break;case"y":A="repeat-y";break;case"n":A="no-repeat";break;default:A="no-repeat"}return C=new Image,f.match(/^data:/i)||(C.crossOrigin="Anonymous"),C.src=f,C.complete?x():(C.onload=x,C.src=C.src),d}function S(m,r,s){if(Object(H.k)(s)){if(s[1]==="("||s[2]==="("){if(s[0]==="l")return p(m,r,s);if(s[0]==="r")return b(m,r,s);if(s[0]==="p")return c(m,r,s)}return s}}function I(m){var r=0,s=0,d=0,C=0;return Object(H.g)(m)?m.length===1?r=s=d=C=m[0]:m.length===2?(r=d=m[0],s=C=m[1]):m.length===3?(r=m[0],s=C=m[1],d=m[2]):(r=m[0],s=m[1],d=m[2],C=m[3]):r=s=d=C=m,[r,s,d,C]}},rEGp:function(qe,Pt){function w(H){var i=-1,y=Array(H.size);return H.forEach(function(t){y[++i]=t}),y}qe.exports=w},rtSP:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return pe});var H=w("mrSG"),i=w("zJSt"),y=w("w02o"),t=w("YuPD"),n=w("iTfj"),u=w("ODXe"),p=w("uFwe");function b(me,Se){var Le=0;if(Se===void 0){var Je=Object(p.a)(me),On;try{for(Je.s();!(On=Je.n()).done;){var gn=On.value;(gn=+gn)&&(Le+=gn)}}catch(Nn){Je.e(Nn)}finally{Je.f()}}else{var Wn=-1,kn=Object(p.a)(me),Vn;try{for(kn.s();!(Vn=kn.n()).done;){var Dn=Vn.value;(Dn=+Se(Dn,++Wn,me))&&(Le+=Dn)}}catch(Nn){kn.e(Nn)}finally{kn.f()}}return Le}function c(me,Se){var Le;if(Se===void 0){var Je=Object(p.a)(me),On;try{for(Je.s();!(On=Je.n()).done;){var gn=On.value;gn!=null&&(Le<gn||Le===void 0&&gn>=gn)&&(Le=gn)}}catch(Nn){Je.e(Nn)}finally{Je.f()}}else{var Wn=-1,kn=Object(p.a)(me),Vn;try{for(kn.s();!(Vn=kn.n()).done;){var Dn=Vn.value;(Dn=Se(Dn,++Wn,me))!=null&&(Le<Dn||Le===void 0&&Dn>=Dn)&&(Le=Dn)}}catch(Nn){kn.e(Nn)}finally{kn.f()}}return Le}function S(me,Se){var Le;if(Se===void 0){var Je=Object(p.a)(me),On;try{for(Je.s();!(On=Je.n()).done;){var gn=On.value;gn!=null&&(Le>gn||Le===void 0&&gn>=gn)&&(Le=gn)}}catch(Nn){Je.e(Nn)}finally{Je.f()}}else{var Wn=-1,kn=Object(p.a)(me),Vn;try{for(kn.s();!(Vn=kn.n()).done;){var Dn=Vn.value;(Dn=Se(Dn,++Wn,me))!=null&&(Le>Dn||Le===void 0&&Dn>=Dn)&&(Le=Dn)}}catch(Nn){kn.e(Nn)}finally{kn.f()}}return Le}function I(me){return me.target.depth}function m(me){return me.depth}function r(me,Se){return Se-1-me.height}function s(me,Se){return me.sourceLinks.length?me.depth:Se-1}function d(me){return me.targetLinks.length?me.depth:me.sourceLinks.length?S(me.sourceLinks,I)-1:0}function C(me){return function(){return me}}function E(me,Se){return f(me.source,Se.source)||me.index-Se.index}function A(me,Se){return f(me.target,Se.target)||me.index-Se.index}function f(me,Se){return me.y0-Se.y0}function x(me){return me.value}function j(me){return me.index}function P(me){return me.nodes}function W(me){return me.links}function X(me,Se){var Le=me.get(Se);if(!Le)throw new Error("missing: "+Se);return Le}function $(me){var Se=me.nodes,Le=Object(p.a)(Se),Je;try{for(Le.s();!(Je=Le.n()).done;){var On=Je.value,gn=On.y0,Wn=gn,kn=Object(p.a)(On.sourceLinks),Vn;try{for(kn.s();!(Vn=kn.n()).done;){var Dn=Vn.value;Dn.y0=gn+Dn.width/2,gn+=Dn.width}}catch(hr){kn.e(hr)}finally{kn.f()}var Nn=Object(p.a)(On.targetLinks),Qn;try{for(Nn.s();!(Qn=Nn.n()).done;){var ir=Qn.value;ir.y1=Wn+ir.width/2,Wn+=ir.width}}catch(hr){Nn.e(hr)}finally{Nn.f()}}}catch(hr){Le.e(hr)}finally{Le.f()}}function ft(){var me=0,Se=0,Le=1,Je=1,On=24,gn=8,Wn,kn=j,Vn=s,Dn,Nn,Qn=P,ir=W,hr=6;function Sr(){var Pr={nodes:Qn.apply(null,arguments),links:ir.apply(null,arguments)};return mr(Pr),dr(Pr),Br(Pr),ii(Pr),sa(Pr),$(Pr),Pr}Sr.update=function(Pr){return $(Pr),Pr},Sr.nodeId=function(Pr){return arguments.length?(kn=typeof Pr=="function"?Pr:C(Pr),Sr):kn},Sr.nodeAlign=function(Pr){return arguments.length?(Vn=typeof Pr=="function"?Pr:C(Pr),Sr):Vn},Sr.nodeSort=function(Pr){return arguments.length?(Dn=Pr,Sr):Dn},Sr.nodeWidth=function(Pr){return arguments.length?(On=+Pr,Sr):On},Sr.nodePadding=function(Pr){return arguments.length?(gn=Wn=+Pr,Sr):gn},Sr.nodes=function(Pr){return arguments.length?(Qn=typeof Pr=="function"?Pr:C(Pr),Sr):Qn},Sr.links=function(Pr){return arguments.length?(ir=typeof Pr=="function"?Pr:C(Pr),Sr):ir},Sr.linkSort=function(Pr){return arguments.length?(Nn=Pr,Sr):Nn},Sr.size=function(Pr){return arguments.length?(me=Se=0,Le=+Pr[0],Je=+Pr[1],Sr):[Le-me,Je-Se]},Sr.extent=function(Pr){return arguments.length?(me=+Pr[0][0],Le=+Pr[1][0],Se=+Pr[0][1],Je=+Pr[1][1],Sr):[[me,Se],[Le,Je]]},Sr.iterations=function(Pr){return arguments.length?(hr=+Pr,Sr):hr};function mr(Pr){var si=Pr.nodes,ti=Pr.links,$r=Object(p.a)(si.entries()),ui;try{for($r.s();!(ui=$r.n()).done;){var li=ui.value,xi=Object(u.a)(li,2),Ci=xi[0],di=xi[1];di.index=Ci,di.sourceLinks=[],di.targetLinks=[]}}catch(Ga){$r.e(Ga)}finally{$r.f()}var Ti=new Map(si.map(function(Ga,eo){return[kn(Ga,eo,si),Ga]})),pi=Object(p.a)(ti.entries()),Ni;try{for(pi.s();!(Ni=pi.n()).done;){var Bi=Ni.value,Fi=Object(u.a)(Bi,2),ma=Fi[0],ua=Fi[1];ua.index=ma;var Ra=ua.source,xa=ua.target;typeof Ra!="object"&&(Ra=ua.source=X(Ti,Ra)),typeof xa!="object"&&(xa=ua.target=X(Ti,xa)),Ra.sourceLinks.push(ua),xa.targetLinks.push(ua)}}catch(Ga){pi.e(Ga)}finally{pi.f()}if(Nn!=null){var Ma=Object(p.a)(si),Qi;try{for(Ma.s();!(Qi=Ma.n()).done;){var ka=Qi.value,vo=ka.sourceLinks,za=ka.targetLinks;vo.sort(Nn),za.sort(Nn)}}catch(Ga){Ma.e(Ga)}finally{Ma.f()}}}function dr(Pr){var si=Pr.nodes,ti=Object(p.a)(si),$r;try{for(ti.s();!($r=ti.n()).done;){var ui=$r.value;ui.value=ui.fixedValue===void 0?Math.max(b(ui.sourceLinks,x),b(ui.targetLinks,x)):ui.fixedValue}}catch(li){ti.e(li)}finally{ti.f()}}function Br(Pr){for(var si=Pr.nodes,ti=si.length,$r=new Set(si),ui=new Set,li=0;$r.size;){var xi=Object(p.a)($r),Ci;try{for(xi.s();!(Ci=xi.n()).done;){var di=Ci.value;di.depth=li;var Ti=Object(p.a)(di.sourceLinks),pi;try{for(Ti.s();!(pi=Ti.n()).done;){var Ni=pi.value,Bi=Ni.target;ui.add(Bi)}}catch(Fi){Ti.e(Fi)}finally{Ti.f()}}}catch(Fi){xi.e(Fi)}finally{xi.f()}if(++li>ti)throw new Error("circular link");$r=ui,ui=new Set}}function ii(Pr){for(var si=Pr.nodes,ti=si.length,$r=new Set(si),ui=new Set,li=0;$r.size;){var xi=Object(p.a)($r),Ci;try{for(xi.s();!(Ci=xi.n()).done;){var di=Ci.value;di.height=li;var Ti=Object(p.a)(di.targetLinks),pi;try{for(Ti.s();!(pi=Ti.n()).done;){var Ni=pi.value,Bi=Ni.source;ui.add(Bi)}}catch(Fi){Ti.e(Fi)}finally{Ti.f()}}}catch(Fi){xi.e(Fi)}finally{xi.f()}if(++li>ti)throw new Error("circular link");$r=ui,ui=new Set}}function mi(Pr){var si=Pr.nodes,ti=c(si,function(Bi){return Bi.depth})+1,$r=(Le-me-On)/(ti-1),ui=new Array(ti),li=Object(p.a)(si),xi;try{for(li.s();!(xi=li.n()).done;){var Ci=xi.value,di=Math.max(0,Math.min(ti-1,Math.floor(Vn.call(null,Ci,ti))));Ci.layer=di,Ci.x0=me+di*$r,Ci.x1=Ci.x0+On,ui[di]?ui[di].push(Ci):ui[di]=[Ci]}}catch(Bi){li.e(Bi)}finally{li.f()}if(Dn){var Ti=Object(p.a)(ui),pi;try{for(Ti.s();!(pi=Ti.n()).done;){var Ni=pi.value;Ni.sort(Dn)}}catch(Bi){Ti.e(Bi)}finally{Ti.f()}}return ui}function Pi(Pr){var si=S(Pr,function(ma){return(Je-Se-(ma.length-1)*Wn)/b(ma,x)}),ti=Object(p.a)(Pr),$r;try{for(ti.s();!($r=ti.n()).done;){var ui=$r.value,li=Se,xi=Object(p.a)(ui),Ci;try{for(xi.s();!(Ci=xi.n()).done;){var di=Ci.value;di.y0=li,di.y1=li+di.value*si,li=di.y1+Wn;var Ti=Object(p.a)(di.sourceLinks),pi;try{for(Ti.s();!(pi=Ti.n()).done;){var Ni=pi.value;Ni.width=Ni.value*si}}catch(ma){Ti.e(ma)}finally{Ti.f()}}}catch(ma){xi.e(ma)}finally{xi.f()}li=(Je-li+Wn)/(ui.length+1);for(var Bi=0;Bi<ui.length;++Bi){var Fi=ui[Bi];Fi.y0+=li*(Bi+1),Fi.y1+=li*(Bi+1)}La(ui)}}catch(ma){ti.e(ma)}finally{ti.f()}}function sa(Pr){var si=mi(Pr);Wn=Math.min(gn,(Je-Se)/(c(si,function(li){return li.length})-1)),Pi(si);for(var ti=0;ti<hr;++ti){var $r=Math.pow(.99,ti),ui=Math.max(1-$r,(ti+1)/hr);Mi(si,$r,ui),Pa(si,$r,ui)}}function Pa(Pr,si,ti){for(var $r=1,ui=Pr.length;$r<ui;++$r){var li=Pr[$r],xi=Object(p.a)(li),Ci;try{for(xi.s();!(Ci=xi.n()).done;){var di=Ci.value,Ti=0,pi=0,Ni=Object(p.a)(di.targetLinks),Bi;try{for(Ni.s();!(Bi=Ni.n()).done;){var Fi=Bi.value,ma=Fi.source,ua=Fi.value,Ra=ua*(di.layer-ma.layer);Ti+=Yr(ma,di)*Ra,pi+=Ra}}catch(Ma){Ni.e(Ma)}finally{Ni.f()}if(pi>0){var xa=(Ti/pi-di.y0)*si;di.y0+=xa,di.y1+=xa,pa(di)}}}catch(Ma){xi.e(Ma)}finally{xi.f()}Dn===void 0&&li.sort(f),Ki(li,ti)}}function Mi(Pr,si,ti){for(var $r=Pr.length,ui=$r-2;ui>=0;--ui){var li=Pr[ui],xi=Object(p.a)(li),Ci;try{for(xi.s();!(Ci=xi.n()).done;){var di=Ci.value,Ti=0,pi=0,Ni=Object(p.a)(di.sourceLinks),Bi;try{for(Ni.s();!(Bi=Ni.n()).done;){var Fi=Bi.value,ma=Fi.target,ua=Fi.value,Ra=ua*(ma.layer-di.layer);Ti+=Sa(di,ma)*Ra,pi+=Ra}}catch(Ma){Ni.e(Ma)}finally{Ni.f()}if(pi>0){var xa=(Ti/pi-di.y0)*si;di.y0+=xa,di.y1+=xa,pa(di)}}}catch(Ma){xi.e(Ma)}finally{xi.f()}Dn===void 0&&li.sort(f),Ki(li,ti)}}function Ki(Pr,si){var ti=Pr.length>>1,$r=Pr[ti];oa(Pr,$r.y0-Wn,ti-1,si),fa(Pr,$r.y1+Wn,ti+1,si),oa(Pr,Je,Pr.length-1,si),fa(Pr,Se,0,si)}function fa(Pr,si,ti,$r){for(;ti<Pr.length;++ti){var ui=Pr[ti],li=(si-ui.y0)*$r;li>1e-6&&(ui.y0+=li,ui.y1+=li),si=ui.y1+Wn}}function oa(Pr,si,ti,$r){for(;ti>=0;--ti){var ui=Pr[ti],li=(ui.y1-si)*$r;li>1e-6&&(ui.y0-=li,ui.y1-=li),si=ui.y0-Wn}}function pa(Pr){var si=Pr.sourceLinks,ti=Pr.targetLinks;if(Nn===void 0){var $r=Object(p.a)(ti),ui;try{for($r.s();!(ui=$r.n()).done;){var li=ui.value,xi=li.source.sourceLinks;xi.sort(A)}}catch(Ni){$r.e(Ni)}finally{$r.f()}var Ci=Object(p.a)(si),di;try{for(Ci.s();!(di=Ci.n()).done;){var Ti=di.value,pi=Ti.target.targetLinks;pi.sort(E)}}catch(Ni){Ci.e(Ni)}finally{Ci.f()}}}function La(Pr){if(Nn===void 0){var si=Object(p.a)(Pr),ti;try{for(si.s();!(ti=si.n()).done;){var $r=ti.value,ui=$r.sourceLinks,li=$r.targetLinks;ui.sort(A),li.sort(E)}}catch(xi){si.e(xi)}finally{si.f()}}}function Yr(Pr,si){var ti=Pr.y0-(Pr.sourceLinks.length-1)*Wn/2,$r=Object(p.a)(Pr.sourceLinks),ui;try{for($r.s();!(ui=$r.n()).done;){var li=ui.value,xi=li.target,Ci=li.width;if(xi===si)break;ti+=Ci+Wn}}catch(Fi){$r.e(Fi)}finally{$r.f()}var di=Object(p.a)(si.targetLinks),Ti;try{for(di.s();!(Ti=di.n()).done;){var pi=Ti.value,Ni=pi.source,Bi=pi.width;if(Ni===Pr)break;ti-=Bi}}catch(Fi){di.e(Fi)}finally{di.f()}return ti}function Sa(Pr,si){var ti=si.y0-(si.targetLinks.length-1)*Wn/2,$r=Object(p.a)(si.targetLinks),ui;try{for($r.s();!(ui=$r.n()).done;){var li=ui.value,xi=li.source,Ci=li.width;if(xi===Pr)break;ti+=Ci+Wn}}catch(Fi){$r.e(Fi)}finally{$r.f()}var di=Object(p.a)(Pr.sourceLinks),Ti;try{for(di.s();!(Ti=di.n()).done;){var pi=Ti.value,Ni=pi.target,Bi=pi.width;if(Ni===si)break;ti-=Bi}}catch(Fi){di.e(Fi)}finally{di.f()}return ti}return Sr}var Z=Math.PI,lt=2*Z,pt=1e-6,gt=lt-pt;function ut(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Bt(){return new ut}ut.prototype=Bt.prototype={constructor:ut,moveTo:function(Se,Le){this._+="M"+(this._x0=this._x1=+Se)+","+(this._y0=this._y1=+Le)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(Se,Le){this._+="L"+(this._x1=+Se)+","+(this._y1=+Le)},quadraticCurveTo:function(Se,Le,Je,On){this._+="Q"+ +Se+","+ +Le+","+(this._x1=+Je)+","+(this._y1=+On)},bezierCurveTo:function(Se,Le,Je,On,gn,Wn){this._+="C"+ +Se+","+ +Le+","+ +Je+","+ +On+","+(this._x1=+gn)+","+(this._y1=+Wn)},arcTo:function(Se,Le,Je,On,gn){Se=+Se,Le=+Le,Je=+Je,On=+On,gn=+gn;var Wn=this._x1,kn=this._y1,Vn=Je-Se,Dn=On-Le,Nn=Wn-Se,Qn=kn-Le,ir=Nn*Nn+Qn*Qn;if(gn<0)throw new Error("negative radius: "+gn);if(this._x1===null)this._+="M"+(this._x1=Se)+","+(this._y1=Le);else if(ir>pt)if(!(Math.abs(Qn*Vn-Dn*Nn)>pt)||!gn)this._+="L"+(this._x1=Se)+","+(this._y1=Le);else{var hr=Je-Wn,Sr=On-kn,mr=Vn*Vn+Dn*Dn,dr=hr*hr+Sr*Sr,Br=Math.sqrt(mr),ii=Math.sqrt(ir),mi=gn*Math.tan((Z-Math.acos((mr+ir-dr)/(2*Br*ii)))/2),Pi=mi/ii,sa=mi/Br;Math.abs(Pi-1)>pt&&(this._+="L"+(Se+Pi*Nn)+","+(Le+Pi*Qn)),this._+="A"+gn+","+gn+",0,0,"+ +(Qn*hr>Nn*Sr)+","+(this._x1=Se+sa*Vn)+","+(this._y1=Le+sa*Dn)}},arc:function(Se,Le,Je,On,gn,Wn){Se=+Se,Le=+Le,Je=+Je,Wn=!!Wn;var kn=Je*Math.cos(On),Vn=Je*Math.sin(On),Dn=Se+kn,Nn=Le+Vn,Qn=1^Wn,ir=Wn?On-gn:gn-On;if(Je<0)throw new Error("negative radius: "+Je);this._x1===null?this._+="M"+Dn+","+Nn:(Math.abs(this._x1-Dn)>pt||Math.abs(this._y1-Nn)>pt)&&(this._+="L"+Dn+","+Nn),!!Je&&(ir<0&&(ir=ir%lt+lt),ir>gt?this._+="A"+Je+","+Je+",0,1,"+Qn+","+(Se-kn)+","+(Le-Vn)+"A"+Je+","+Je+",0,1,"+Qn+","+(this._x1=Dn)+","+(this._y1=Nn):ir>pt&&(this._+="A"+Je+","+Je+",0,"+ +(ir>=Z)+","+Qn+","+(this._x1=Se+Je*Math.cos(gn))+","+(this._y1=Le+Je*Math.sin(gn))))},rect:function(Se,Le,Je,On){this._+="M"+(this._x0=this._x1=+Se)+","+(this._y0=this._y1=+Le)+"h"+ +Je+"v"+ +On+"h"+-Je+"Z"},toString:function(){return this._}};var Lt=Bt,St=Array.prototype.slice,K=function(me){return function(){return me}};function dt(me){return me[0]}function mt(me){return me[1]}var bt=function(me,Se){return[(Se=+Se)*Math.cos(me-=Math.PI/2),Se*Math.sin(me)]};function wt(me){return me.source}function J(me){return me.target}function ct(me){var Se=wt,Le=J,Je=dt,On=mt,gn=null;function Wn(){var kn,Vn=St.call(arguments),Dn=Se.apply(this,Vn),Nn=Le.apply(this,Vn);if(gn||(gn=kn=Lt()),me(gn,+Je.apply(this,(Vn[0]=Dn,Vn)),+On.apply(this,Vn),+Je.apply(this,(Vn[0]=Nn,Vn)),+On.apply(this,Vn)),kn)return gn=null,kn+""||null}return Wn.source=function(kn){return arguments.length?(Se=kn,Wn):Se},Wn.target=function(kn){return arguments.length?(Le=kn,Wn):Le},Wn.x=function(kn){return arguments.length?(Je=typeof kn=="function"?kn:K(+kn),Wn):Je},Wn.y=function(kn){return arguments.length?(On=typeof kn=="function"?kn:K(+kn),Wn):On},Wn.context=function(kn){return arguments.length?(gn=kn==null?null:kn,Wn):gn},Wn}function it(me,Se,Le,Je,On){me.moveTo(Se,Le),me.bezierCurveTo(Se=(Se+Je)/2,Le,Se,On,Je,On)}function _(me,Se,Le,Je,On){me.moveTo(Se,Le),me.bezierCurveTo(Se,Le=(Le+On)/2,Je,Le,Je,On)}function R(me,Se,Le,Je,On){var gn=bt(Se,Le),Wn=bt(Se,Le=(Le+On)/2),kn=bt(Je,Le),Vn=bt(Je,On);me.moveTo(gn[0],gn[1]),me.bezierCurveTo(Wn[0],Wn[1],kn[0],kn[1],Vn[0],Vn[1])}function Q(){return ct(it)}function k(){return ct(_)}function g(){var me=ct(R);return me.angle=me.x,delete me.x,me.radius=me.y,delete me.y,me}function O(me){return[me.source.x1,me.y0]}function F(me){return[me.target.x0,me.y1]}var V=function(){return Q().source(O).target(F)},rt={left:m,right:r,center:d,justify:s},ot={nodeId:function(Se){return Se.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function st(me){var Se=Object(n.isString)(me)?rt[me]:Object(n.isFunction)(me)?me:null;return Se||s}function Mt(me){return Object(n.assign)({},ot,me)}function yt(me,Se){var Le=Mt(me),Je=Le.nodeId,On=Le.nodeSort,gn=Le.nodeAlign,Wn=Le.nodeWidth,kn=Le.nodePadding,Vn=ft().nodeSort(On).links(function(Nn){return Nn.links}).nodeWidth(Wn).nodePadding(kn).nodeAlign(st(gn)).extent([[0,0],[1,1]]).nodeId(Je),Dn=Vn(Se);return Dn.nodes.forEach(function(Nn){var Qn=Nn.x0,ir=Nn.x1,hr=Nn.y0,Sr=Nn.y1;Nn.x=[Qn,ir,ir,Qn],Nn.y=[hr,hr,Sr,Sr]}),Dn.links.forEach(function(Nn){var Qn=Nn.source,ir=Nn.target,hr=Qn.x1,Sr=ir.x0;Nn.x=[hr,hr,Sr,Sr];var mr=Nn.width/2;Nn.y=[Nn.y0+mr,Nn.y0-mr,Nn.y1+mr,Nn.y1-mr]}),Dn}var xt=w("tKoa"),Ot=w("DyAw"),jt="x",Dt="y",zt="name";function Tt(me,Se,Le){return Object(n.size)(Se)===0?!1:Se.includes(Le)?!0:Se.some(function(Je){return Tt(me,me.get(Je),Le)})}function Wt(me,Se,Le){var Je=[],On=[],gn=new Map;return Object(n.each)(me,function(Wn){var kn=Wn[Se],Vn=Wn[Le];Tt(gn,[kn],Vn)?On.push(Wn):(Je.push(Wn),gn.has(Vn)||gn.set(Vn,[]),gn.get(Vn).push(kn))}),On.length!==0&&console.warn("sankey data contains circle, "+On.length+" records removed.",On),Je}function Ht(me){var Se=me.chart,Le=me.options,Je=Le.data,On=Le.sourceField,gn=Le.targetField,Wn=Le.weightField,kn=Le.color,Vn=Le.nodeStyle,Dn=Le.edgeStyle,Nn=Le.label,Qn=Le.tooltip,ir=Le.nodeAlign,hr=Le.nodePaddingRatio,Sr=Le.nodeWidthRatio,mr=Le.nodeSort;Se.legend(!1),Se.tooltip(Qn),Se.axis(!1);var dr=Object(Ot.b)(Wt(Je,On,gn),On,gn,Wn),Br=yt({nodeAlign:ir,nodePadding:hr,nodeWidth:Sr,nodeSort:mr},dr),ii=Br.nodes,mi=Br.links,Pi=ii.map(function(Ki){return{x:Ki.x,y:Ki.y,name:Ki.name}}),sa=mi.map(function(Ki){return{source:Ki.source.name,target:Ki.target.name,name:Ki.source.name||Ki.target.name,x:Ki.x,y:Ki.y,value:Ki.value}}),Pa=Se.createView();Pa.data(Pi),Object(xt.f)({chart:Pa,options:{xField:jt,yField:Dt,seriesField:zt,polygon:{color:kn,style:Vn},label:Nn,tooltip:!1}});var Mi=Se.createView();return Mi.data(sa),Object(xt.b)({chart:Mi,options:{xField:jt,yField:Dt,seriesField:zt,edge:{color:kn,style:Dn,shape:"arc"},tooltip:Qn,state:{active:{style:{opacity:.8,lineWidth:0}}}}}),Se.interaction("element-active"),Se.scale({x:{sync:!0,nice:!0},y:{sync:!0,nice:!0},name:{sync:"color"}}),me}function re(me){return Object(t.e)(Ht,y.c,y.a,y.j)(me)}var pe=function(me){Object(H.b)(Se,me);function Se(){var Le=me!==null&&me.apply(this,arguments)||this;return Le.type="sankey",Le}return Se.prototype.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},label:{fields:["x","name"],callback:function(Je,On){var gn=Je[1]===1;return{style:{fill:"#545454",textAlign:gn?"end":"start"},offsetX:gn?-8:8,content:On}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value"],formatter:function(Je){var On=Je.source,gn=Je.target,Wn=Je.value;return{name:On+" -> "+gn,value:Wn}}},nodeWidthRatio:.008,nodePaddingRatio:.01}},Se.prototype.getSchemaAdaptor=function(){return re},Se}(i.a)},sEf8:function(qe,Pt){function w(H){return function(i){return H(i)}}qe.exports=w},sKgW:function(qe,Pt){var w=9007199254740991,H=Math.floor;function i(y,t){var n="";if(!y||t<1||t>w)return n;do t%2&&(n+=y),t=H(t/2),t&&(y+=y);while(t);return n}qe.exports=i},sRBo:function(qe,Pt,w){"use strict";var H=w("cIOH"),i=w.n(H),y=w("KCY9"),t=w.n(y)},sYIZ:function(qe,Pt,w){"use strict";var H=w("mrSG"),i=w("aFU3");function y(r,s){if(s){var d=Object(i.invert)(s);return Object(i.multiplyVec2)(d,r)}return r}function t(r,s,d){var C=r.getTotalMatrix();if(C){var E=y([s,d,1],C),A=E[0],f=E[1];return[A,f]}return[s,d]}function n(r,s,d){if(r.isCanvas&&r.isCanvas())return!0;if(!Object(i.isAllowCapture)(r)||r.cfg.isInView===!1)return!1;if(r.cfg.clipShape){var C=t(r,s,d),E=C[0],A=C[1];if(r.isClipped(E,A))return!1}var f=r.cfg.cacheCanvasBBox||r.getCanvasBBox();return s>=f.minX&&s<=f.maxX&&d>=f.minY&&d<=f.maxY}function u(r,s,d){if(!n(r,s,d))return null;for(var C=null,E=r.getChildren(),A=E.length,f=A-1;f>=0;f--){var x=E[f];if(x.isGroup())C=u(x,s,d);else if(n(x,s,d)){var j=x,P=t(x,s,d),W=P[0],X=P[1];j.isInShape(W,X)&&(C=x)}if(C)break}return C}var p=w("R5nb"),b=w("wq2r"),c=w("cyZq"),S=w("9eUa"),I=function(r){Object(H.b)(s,r);function s(){return r!==null&&r.apply(this,arguments)||this}return s.prototype.getDefaultCfg=function(){var d=r.prototype.getDefaultCfg.call(this);return d.renderer="canvas",d.autoDraw=!0,d.localRefresh=!0,d.refreshElements=[],d.clipView=!0,d.quickHit=!1,d},s.prototype.onCanvasChange=function(d){(d==="attr"||d==="sort"||d==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},s.prototype.getShapeBase=function(){return p},s.prototype.getGroupBase=function(){return b.a},s.prototype.getPixelRatio=function(){var d=this.get("pixelRatio")||Object(c.d)();return d>=1?Math.ceil(d):1},s.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},s.prototype.createDom=function(){var d=document.createElement("canvas"),C=d.getContext("2d");return this.set("context",C),d},s.prototype.setDOMSize=function(d,C){r.prototype.setDOMSize.call(this,d,C);var E=this.get("context"),A=this.get("el"),f=this.getPixelRatio();A.width=f*d,A.height=f*C,f>1&&E.scale(f,f)},s.prototype.clear=function(){r.prototype.clear.call(this),this._clearFrame();var d=this.get("context"),C=this.get("el");d.clearRect(0,0,C.width,C.height)},s.prototype.getShape=function(d,C){var E;return this.get("quickHit")?E=u(this,d,C):E=r.prototype.getShape.call(this,d,C,null),E},s.prototype._getRefreshRegion=function(){var d=this.get("refreshElements"),C=this.getViewRange(),E;if(d.length&&d[0]===this)E=C;else if(E=Object(S.f)(d),E){E.minX=Math.floor(E.minX),E.minY=Math.floor(E.minY),E.maxX=Math.ceil(E.maxX),E.maxY=Math.ceil(E.maxY),E.maxY+=1;var A=this.get("clipView");A&&(E=Object(S.g)(E,C))}return E},s.prototype.refreshElement=function(d){var C=this.get("refreshElements");C.push(d)},s.prototype._clearFrame=function(){var d=this.get("drawFrame");d&&(Object(c.a)(d),this.set("drawFrame",null),this.set("refreshElements",[]))},s.prototype.draw=function(){var d=this.get("drawFrame");this.get("autoDraw")&&d||this._startDraw()},s.prototype._drawAll=function(){var d=this.get("context"),C=this.get("el"),E=this.getChildren();d.clearRect(0,0,C.width,C.height),Object(S.a)(d,this),Object(S.d)(d,E),this.set("refreshElements",[])},s.prototype._drawRegion=function(){var d=this.get("context"),C=this.get("refreshElements"),E=this.getChildren(),A=this._getRefreshRegion();A?(d.clearRect(A.minX,A.minY,A.maxX-A.minX,A.maxY-A.minY),d.save(),d.beginPath(),d.rect(A.minX,A.minY,A.maxX-A.minX,A.maxY-A.minY),d.clip(),Object(S.a)(d,this),Object(S.b)(this,E,A),Object(S.d)(d,E,A),d.restore()):C.length&&Object(S.c)(C),Object(c.c)(C,function(f){f.get("hasChanged")&&f.set("hasChanged",!1)}),this.set("refreshElements",[])},s.prototype._startDraw=function(){var d=this,C=this.get("drawFrame");C||(C=Object(c.n)(function(){d.get("localRefresh")?d._drawRegion():d._drawAll(),d.set("drawFrame",null)}),this.set("drawFrame",C))},s.prototype.skipDraw=function(){},s}(i.AbstractCanvas),m=Pt.a=I},sboe:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return y});var H=w("q1tI"),i=w.n(H),y=H.createContext(null)},seXi:function(qe,Pt,w){var H=w("qZTm"),i=1,y=Object.prototype,t=y.hasOwnProperty;function n(u,p,b,c,S,I){var m=b&i,r=H(u),s=r.length,d=H(p),C=d.length;if(s!=C&&!m)return!1;for(var E=s;E--;){var A=r[E];if(!(m?A in p:t.call(p,A)))return!1}var f=I.get(u),x=I.get(p);if(f&&x)return f==p&&x==u;var j=!0;I.set(u,p),I.set(p,u);for(var P=m;++E<s;){A=r[E];var W=u[A],X=p[A];if(c)var $=m?c(X,W,A,p,u,I):c(W,X,A,u,p,I);if(!($===void 0?W===X||S(W,X,b,c,I):$)){j=!1;break}P||(P=A=="constructor")}if(j&&!P){var ft=u.constructor,Z=p.constructor;ft!=Z&&"constructor"in u&&"constructor"in p&&!(typeof ft=="function"&&ft instanceof ft&&typeof Z=="function"&&Z instanceof Z)&&(j=!1)}return I.delete(u),I.delete(p),j}qe.exports=n},shjB:function(qe,Pt){var w=9007199254740991;function H(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=w}qe.exports=H},sqD9:function(qe,Pt,w){"use strict";w.d(Pt,"b",function(){return t}),w.d(Pt,"a",function(){return n});var H=w("mrSG"),i=w("iTfj"),y=w("F/eT");function t(u,p,b,c){var S=Object(i.reduce)(u,function(I,m){var r=m[b],s=I.has(r)?I.get(r):0,d=m[p];return s=Object(y.a)(d)?s+d:s,I.set(r,s),I},new Map);return Object(i.map)(u,function(I){var m,r=I[p],s=I[b],d=Object(y.a)(r)?r/S.get(s):0;return Object(H.a)(Object(H.a)({},I),(m={},m[c]=d,m))})}function n(u,p,b,c,S){return S?t(u,p,b,c):u}},sstZ:function(qe,Pt,w){"use strict";w.d(Pt,"j",function(){return i}),w.d(Pt,"c",function(){return y}),w.d(Pt,"g",function(){return t}),w.d(Pt,"b",function(){return n});var H=w("iTfj");w.d(Pt,"e",function(){return H.isNil}),w.d(Pt,"d",function(){return H.isFunction}),w.d(Pt,"h",function(){return H.isString}),w.d(Pt,"f",function(){return H.isObject}),w.d(Pt,"i",function(){return H.mix}),w.d(Pt,"a",function(){return H.each}),w.d(Pt,"k",function(){return H.upperFirst});function i(u,p){var b=u.indexOf(p);b!==-1&&u.splice(b,1)}var y=typeof window!="undefined"&&typeof window.document!="undefined";function t(u,p){if(u.isCanvas())return!0;for(var b=p.getParent(),c=!1;b;){if(b===u){c=!0;break}b=b.getParent()}return c}function n(u){return u.cfg.visible&&u.cfg.capture}},tE4n:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return k});var H=w("mrSG"),i=w("zJSt"),y=w("YuPD"),t=w("iTfj"),n=w("tKoa"),u=w("w02o"),p=w("ODXe");function b(g,O,F,V){g=g.filter(function(Tt){var Wt=O(Tt),Ht=F(Tt);return Wt!=null&&isFinite(Wt)&&Ht!=null&&isFinite(Ht)}),V&&g.sort(function(Tt,Wt){return O(Tt)-O(Wt)});for(var rt=g.length,ot=new Float64Array(rt),st=new Float64Array(rt),Mt=0,yt=0,xt,Ot,jt,Dt=0;Dt<rt;)jt=g[Dt],ot[Dt]=xt=+O(jt),st[Dt]=Ot=+F(jt),++Dt,Mt+=(xt-Mt)/Dt,yt+=(Ot-yt)/Dt;for(var zt=0;zt<rt;++zt)ot[zt]-=Mt,st[zt]-=yt;return[ot,st,Mt,yt]}function c(g,O,F,V){for(var rt=0,ot=0,st=g.length;ot<st;ot++){var Mt=g[ot],yt=+O(Mt),xt=+F(Mt);yt!=null&&isFinite(yt)&&xt!=null&&isFinite(xt)&&V(yt,xt,rt++)}}function S(g,O,F,V,rt){var ot=0,st=0;return c(g,O,F,function(Mt,yt){var xt=yt-rt(Mt),Ot=yt-V;ot+=xt*xt,st+=Ot*Ot}),1-ot/st}function I(g){return Math.atan2(g[1][1]-g[0][1],g[1][0]-g[0][0])*180/Math.PI}function m(g){return[(g[0][0]+g[1][0])/2,(g[0][1]+g[1][1])/2]}function r(g,O,F){for(var V=Math.log(O-g)*Math.LOG10E+1|0,rt=1*Math.pow(10,-V/2-1),ot=1e4,st=[yt(g),yt(O)],Mt=0;xt(st)&&Mt<ot;);return st;function yt(Ot){return[Ot,F(Ot)]}function xt(Ot){Mt++;for(var jt=Ot.length,Dt=!1,zt=0;zt<jt-1;zt++){var Tt=Ot[zt],Wt=Ot[zt+1],Ht=m([Tt,Wt]),re=yt(Ht[0]),pe=I([Tt,Ht]),me=I([Tt,re]),Se=Math.abs(pe-me);Se>rt&&(Ot.splice(zt+1,0,re),Dt=!0)}return Dt}}function s(g,O,F,V){var rt=V-g*g,ot=Math.abs(rt)<1e-24?0:(F-g*O)/rt,st=O-ot*g;return[st,ot]}var d=function(){var g=function(ot){return ot[0]},O=function(ot){return ot[1]},F;function V(rt){var ot=0,st=0,Mt=0,yt=0,xt=0,Ot=0,jt=F?+F[0]:Infinity,Dt=F?+F[1]:-Infinity;c(rt,g,O,function(me,Se){var Le=Math.log(Se),Je=me*Se;++ot,st+=(Se-st)/ot,yt+=(Je-yt)/ot,Ot+=(me*Je-Ot)/ot,Mt+=(Se*Le-Mt)/ot,xt+=(Je*Le-xt)/ot,F||(me<jt&&(jt=me),me>Dt&&(Dt=me))});var zt=s(yt/st,Mt/st,xt/st,Ot/st),Tt=Object(p.a)(zt,2),Wt=Tt[0],Ht=Tt[1];Wt=Math.exp(Wt);var re=function(Se){return Wt*Math.exp(Ht*Se)},pe=r(jt,Dt,re);return pe.a=Wt,pe.b=Ht,pe.predict=re,pe.rSquared=S(rt,g,O,st,re),pe}return V.domain=function(rt){return arguments.length?(F=rt,V):F},V.x=function(rt){return arguments.length?(g=rt,V):g},V.y=function(rt){return arguments.length?(O=rt,V):O},V},C=function(){var g=function(ot){return ot[0]},O=function(ot){return ot[1]},F;function V(rt){var ot=0,st=0,Mt=0,yt=0,xt=0,Ot=F?+F[0]:Infinity,jt=F?+F[1]:-Infinity;c(rt,g,O,function(pe,me){++ot,st+=(pe-st)/ot,Mt+=(me-Mt)/ot,yt+=(pe*me-yt)/ot,xt+=(pe*pe-xt)/ot,F||(pe<Ot&&(Ot=pe),pe>jt&&(jt=pe))});var Dt=s(st,Mt,yt,xt),zt=Object(p.a)(Dt,2),Tt=zt[0],Wt=zt[1],Ht=function(me){return Wt*me+Tt},re=[[Ot,Ht(Ot)],[jt,Ht(jt)]];return re.a=Wt,re.b=Tt,re.predict=Ht,re.rSquared=S(rt,g,O,Mt,Ht),re}return V.domain=function(rt){return arguments.length?(F=rt,V):F},V.x=function(rt){return arguments.length?(g=rt,V):g},V.y=function(rt){return arguments.length?(O=rt,V):O},V};function E(g){g.sort(function(F,V){return F-V});var O=g.length/2;return O%1==0?(g[O-1]+g[O])/2:g[Math.floor(O)]}var A=2,f=1e-12,x=function(){var g=function(ot){return ot[0]},O=function(ot){return ot[1]},F=.3;function V(rt){for(var ot=b(rt,g,O,!0),st=Object(p.a)(ot,4),Mt=st[0],yt=st[1],xt=st[2],Ot=st[3],jt=Mt.length,Dt=Math.max(2,~~(F*jt)),zt=new Float64Array(jt),Tt=new Float64Array(jt),Wt=new Float64Array(jt).fill(1),Ht=-1;++Ht<=A;){for(var re=[0,Dt-1],pe=0;pe<jt;++pe){for(var me=Mt[pe],Se=re[0],Le=re[1],Je=me-Mt[Se]>Mt[Le]-me?Se:Le,On=0,gn=0,Wn=0,kn=0,Vn=0,Dn=1/Math.abs(Mt[Je]-me||1),Nn=Se;Nn<=Le;++Nn){var Qn=Mt[Nn],ir=yt[Nn],hr=j(Math.abs(me-Qn)*Dn)*Wt[Nn],Sr=Qn*hr;On+=hr,gn+=Sr,Wn+=ir*hr,kn+=ir*Sr,Vn+=Qn*Sr}var mr=s(gn/On,Wn/On,kn/On,Vn/On),dr=Object(p.a)(mr,2),Br=dr[0],ii=dr[1];zt[pe]=Br+ii*me,Tt[pe]=Math.abs(yt[pe]-zt[pe]),P(Mt,pe+1,re)}if(Ht===A)break;var mi=E(Tt);if(Math.abs(mi)<f)break;for(var Pi=0,sa,Pa;Pi<jt;++Pi)sa=Tt[Pi]/(6*mi),Wt[Pi]=sa>=1?f:(Pa=1-sa*sa)*Pa}return W(Mt,zt,xt,Ot)}return V.bandwidth=function(rt){return arguments.length?(F=rt,V):F},V.x=function(rt){return arguments.length?(g=rt,V):g},V.y=function(rt){return arguments.length?(O=rt,V):O},V};function j(g){return(g=1-g*g*g)*g*g}function P(g,O,F){var V=g[O],rt=F[0],ot=F[1]+1;if(!(ot>=g.length))for(;O>rt&&g[ot]-V<=V-g[rt];)F[0]=++rt,F[1]=ot,++ot}function W(g,O,F,V){for(var rt=g.length,ot=[],st=0,Mt=0,yt=[],xt;st<rt;++st)xt=g[st]+F,yt[0]===xt?yt[1]+=(O[st]-yt[1])/++Mt:(Mt=0,yt[1]+=V,yt=[xt,O[st]],ot.push(yt));return yt[1]+=V,ot}var X=function(){var g=function(ot){return ot[0]},O=function(ot){return ot[1]},F;function V(rt){var ot=0,st=0,Mt=0,yt=0,xt=0,Ot=F?+F[0]:Infinity,jt=F?+F[1]:-Infinity;c(rt,g,O,function(pe,me){var Se=Math.log(pe);++ot,st+=(Se-st)/ot,Mt+=(me-Mt)/ot,yt+=(Se*me-yt)/ot,xt+=(Se*Se-xt)/ot,F||(pe<Ot&&(Ot=pe),pe>jt&&(jt=pe))});var Dt=s(st,Mt,yt,xt),zt=Object(p.a)(Dt,2),Tt=zt[0],Wt=zt[1],Ht=function(me){return Wt*Math.log(me)+Tt},re=r(Ot,jt,Ht);return re.a=Wt,re.b=Tt,re.predict=Ht,re.rSquared=S(rt,g,O,Mt,Ht),re}return V.domain=function(rt){return arguments.length?(F=rt,V):F},V.x=function(rt){return arguments.length?(g=rt,V):g},V.y=function(rt){return arguments.length?(O=rt,V):O},V},$=function(){var g=function(ot){return ot[0]},O=function(ot){return ot[1]},F;function V(rt){var ot=b(rt,g,O),st=Object(p.a)(ot,4),Mt=st[0],yt=st[1],xt=st[2],Ot=st[3],jt=Mt.length,Dt=0,zt=0,Tt=0,Wt=0,Ht=0,re,pe,me,Se;for(re=0;re<jt;)pe=Mt[re],me=yt[re++],Se=pe*pe,Dt+=(Se-Dt)/re,zt+=(Se*pe-zt)/re,Tt+=(Se*Se-Tt)/re,Wt+=(pe*me-Wt)/re,Ht+=(Se*me-Ht)/re;var Le=0,Je=0,On=F?+F[0]:Infinity,gn=F?+F[1]:-Infinity;c(rt,g,O,function(hr,Sr){Je++,Le+=(Sr-Le)/Je,F||(hr<On&&(On=hr),hr>gn&&(gn=hr))});var Wn=Tt-Dt*Dt,kn=Dt*Wn-zt*zt,Vn=(Ht*Dt-Wt*zt)/kn,Dn=(Wt*Wn-Ht*zt)/kn,Nn=-Vn*Dt,Qn=function(Sr){return Sr=Sr-xt,Vn*Sr*Sr+Dn*Sr+Nn+Ot},ir=r(On,gn,Qn);return ir.a=Vn,ir.b=Dn-2*Vn*xt,ir.c=Nn-Dn*xt+Vn*xt*xt+Ot,ir.predict=Qn,ir.rSquared=S(rt,g,O,Le,Qn),ir}return V.domain=function(rt){return arguments.length?(F=rt,V):F},V.x=function(rt){return arguments.length?(g=rt,V):g},V.y=function(rt){return arguments.length?(O=rt,V):O},V},ft=function(){var g=function(st){return st[0]},O=function(st){return st[1]},F=3,V;function rt(ot){if(F===1){var st=C().x(g).y(O).domain(V)(ot);return st.coefficients=[st.b,st.a],delete st.a,delete st.b,st}if(F===2){var Mt=$().x(g).y(O).domain(V)(ot);return Mt.coefficients=[Mt.c,Mt.b,Mt.a],delete Mt.a,delete Mt.b,delete Mt.c,Mt}var yt=b(ot,g,O),xt=Object(p.a)(yt,4),Ot=xt[0],jt=xt[1],Dt=xt[2],zt=xt[3],Tt=Ot.length,Wt=[],Ht=[],re=F+1,pe=0,me=0,Se=V?+V[0]:Infinity,Le=V?+V[1]:-Infinity;c(ot,g,O,function(Qn,ir){++me,pe+=(ir-pe)/me,V||(Qn<Se&&(Se=Qn),Qn>Le&&(Le=Qn))});var Je,On,gn,Wn,kn;for(Je=0;Je<re;++Je){for(gn=0,Wn=0;gn<Tt;++gn)Wn+=Math.pow(Ot[gn],Je)*jt[gn];for(Wt.push(Wn),kn=new Float64Array(re),On=0;On<re;++On){for(gn=0,Wn=0;gn<Tt;++gn)Wn+=Math.pow(Ot[gn],Je+On);kn[On]=Wn}Ht.push(kn)}Ht.push(Wt);var Vn=lt(Ht),Dn=function(ir){ir-=Dt;var hr=zt+Vn[0]+Vn[1]*ir+Vn[2]*ir*ir;for(Je=3;Je<re;++Je)hr+=Vn[Je]*Math.pow(ir,Je);return hr},Nn=r(Se,Le,Dn);return Nn.coefficients=Z(re,Vn,-Dt,zt),Nn.predict=Dn,Nn.rSquared=S(ot,g,O,pe,Dn),Nn}return rt.domain=function(ot){return arguments.length?(V=ot,rt):V},rt.x=function(ot){return arguments.length?(g=ot,rt):g},rt.y=function(ot){return arguments.length?(O=ot,rt):O},rt.order=function(ot){return arguments.length?(F=ot,rt):F},rt};function Z(g,O,F,V){var rt=Array(g),ot,st,Mt,yt;for(ot=0;ot<g;++ot)rt[ot]=0;for(ot=g-1;ot>=0;--ot)for(Mt=O[ot],yt=1,rt[ot]+=Mt,st=1;st<=ot;++st)yt*=(ot+1-st)/st,rt[ot-st]+=Mt*Math.pow(F,st)*yt;return rt[0]+=V,rt}function lt(g){var O=g.length-1,F=[],V,rt,ot,st,Mt;for(V=0;V<O;++V){for(st=V,rt=V+1;rt<O;++rt)Math.abs(g[V][rt])>Math.abs(g[V][st])&&(st=rt);for(ot=V;ot<O+1;++ot)Mt=g[ot][V],g[ot][V]=g[ot][st],g[ot][st]=Mt;for(rt=V+1;rt<O;++rt)for(ot=O;ot>=V;ot--)g[ot][rt]-=g[ot][V]*g[V][rt]/g[V][V]}for(rt=O-1;rt>=0;--rt){for(Mt=0,ot=rt+1;ot<O;++ot)Mt+=g[ot][rt]*F[ot];F[rt]=(g[O][rt]-Mt)/g[rt][rt]}return F}var pt=function(){var g=function(ot){return ot[0]},O=function(ot){return ot[1]},F;function V(rt){var ot=0,st=0,Mt=0,yt=0,xt=0,Ot=0,jt=F?+F[0]:Infinity,Dt=F?+F[1]:-Infinity;c(rt,g,O,function(me,Se){var Le=Math.log(me),Je=Math.log(Se);++ot,st+=(Le-st)/ot,Mt+=(Je-Mt)/ot,yt+=(Le*Je-yt)/ot,xt+=(Le*Le-xt)/ot,Ot+=(Se-Ot)/ot,F||(me<jt&&(jt=me),me>Dt&&(Dt=me))});var zt=s(st,Mt,yt,xt),Tt=Object(p.a)(zt,2),Wt=Tt[0],Ht=Tt[1];Wt=Math.exp(Wt);var re=function(Se){return Wt*Math.pow(Se,Ht)},pe=r(jt,Dt,re);return pe.a=Wt,pe.b=Ht,pe.predict=re,pe.rSquared=S(rt,g,O,Ot,re),pe}return V.domain=function(rt){return arguments.length?(F=rt,V):F},V.x=function(rt){return arguments.length?(g=rt,V):g},V.y=function(rt){return arguments.length?(O=rt,V):O},V},gt={exp:d,linear:C,loess:x,log:X,poly:ft,pow:pt,quad:$};function ut(g,O){var F=10,V={regionStyle:[{position:{start:[g,"max"],end:["max",O]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[g,O]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",O],end:[g,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[g,O],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",O],offsetX:-F,offsetY:-F,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",O],offsetX:F,offsetY:-F,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",O],offsetX:F,offsetY:F,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",O],offsetX:-F,offsetY:F,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]};return V}var Bt=function(O,F){var V=F.view,rt=F.options,ot=rt.xField,st=rt.yField,Mt=V.getScaleByField(ot),yt=V.getScaleByField(st),xt=O.map(function(Ot){return V.getCoordinate().convert({x:Mt.scale(Ot[0]),y:yt.scale(Ot[1])})});return Object(y.h)(xt,!1)},Lt=function(O){var F=O.options,V=F.xField,rt=F.yField,ot=F.data,st=F.regressionLine,Mt=st.type,yt=Mt===void 0?"linear":Mt,xt=st.algorithm,Ot;if(xt)Ot=Object(t.isArray)(xt)?xt:xt(ot);else{var jt=gt[yt]().x(function(Dt){return Dt[V]}).y(function(Dt){return Dt[rt]});Ot=jt(ot)}return Bt(Ot,O)},St=function(O){var F,V=O.meta,rt=V===void 0?{}:V,ot=O.xField,st=O.yField,Mt=O.data,yt=Mt[0][ot],xt=Mt[0][st],Ot=yt>0,jt=xt>0,Dt=function(Tt,Wt,Ht){var re=Object(t.get)(rt,[Tt,Wt]);if(Object(t.isNumber)(re))return re;if(Ht==="x"){var pe={min:Ot?0:yt*2,max:Ot?yt*2:0};return pe[Wt]}var me={min:jt?0:xt*2,max:jt?xt*2:0};return me[Wt]};return Object(H.a)(Object(H.a)({},rt),(F={},F[ot]=Object(H.a)(Object(H.a)({},rt[ot]),{min:Dt(ot,"min","x"),max:Dt(ot,"max","x")}),F[st]=Object(H.a)(Object(H.a)({},rt[st]),{min:Dt(st,"min","y"),max:Dt(st,"max","y")}),F))};function K(g){var O=g.data,F=O===void 0?[]:O;return F.length===1?Object(y.b)({},g,{meta:St(g)}):g}function dt(g){var O=g.chart,F=g.options,V=F.data,rt=F.type,ot=F.color,st=F.shape,Mt=F.pointStyle,yt=F.shapeField,xt=F.colorField,Ot=F.xField,jt=F.yField,Dt=F.sizeField,zt=F.size,Tt=F.tooltip;Dt&&(zt||(zt=[2,8]),Object(t.isNumber)(zt)&&(zt=[zt,zt])),Tt&&!Tt.fields&&(Tt=Object(H.a)(Object(H.a)({},Tt),{fields:[Ot,jt,xt,Dt,yt]})),O.data(V),Object(n.e)(Object(y.b)({},g,{options:{seriesField:xt,point:{color:ot,shape:st,size:zt,style:Mt},tooltip:Tt}}));var Wt=Object(y.c)(O,"point");return rt&&Wt.adjust(rt),g}function mt(g){var O,F=g.options,V=F.data,rt=F.xAxis,ot=F.yAxis,st=F.xField,Mt=F.yField,yt=F;return V.length===1&&(yt=K(Object(y.b)({},F,{meta:St(F)}))),Object(y.e)(Object(u.f)((O={},O[st]=rt,O[Mt]=ot,O)))(Object(y.b)({},g,{options:yt}))}function bt(g){var O=g.chart,F=g.options,V=F.xAxis,rt=F.yAxis,ot=F.xField,st=F.yField;return O.axis(ot,V),O.axis(st,rt),g}function wt(g){var O=g.chart,F=g.options,V=F.legend,rt=F.colorField,ot=F.shapeField,st=F.sizeField,Mt=Object(t.isBoolean)(V)?V:V||!!(ot||rt);return Mt?(O.legend(rt||ot,V),st&&O.legend(st,!1)):O.legend(!1),g}function J(g){var O=g.chart,F=g.options,V=F.label,rt=F.yField,ot=Object(y.c)(O,"point");if(!V)ot.label(!1);else{var st=V.callback,Mt=Object(H.c)(V,["callback"]);ot.label({fields:[rt],callback:st,cfg:Object(y.o)(Mt)})}return g}function ct(g){var O=g.options,F=O.quadrant,V=[];if(F){var rt=F.xBaseline,ot=rt===void 0?0:rt,st=F.yBaseline,Mt=st===void 0?0:st,yt=F.labels,xt=F.regionStyle,Ot=F.lineStyle,jt=ut(ot,Mt),Dt=new Array(4).join(",").split(",");Dt.forEach(function(zt,Tt){V.push(Object(H.a)(Object(H.a)({type:"region",top:!1},jt.regionStyle[Tt].position),{style:Object(y.b)({},jt.regionStyle[Tt].style,xt==null?void 0:xt[Tt])}),Object(H.a)({type:"text",top:!0},Object(y.b)({},jt.labelStyle[Tt],yt==null?void 0:yt[Tt])))}),V.push({type:"line",top:!1,start:["min",Mt],end:["max",Mt],style:Object(y.b)({},jt.lineStyle,Ot)},{type:"line",top:!1,start:[ot,"min"],end:[ot,"max"],style:Object(y.b)({},jt.lineStyle,Ot)})}return Object(y.e)(Object(u.b)(V))(g)}function it(g){var O=g.options,F=g.chart,V=O.regressionLine;if(V){var rt=V.style,ot=V.top,st=ot===void 0?!1:ot,Mt={stroke:"#9ba29a",lineWidth:2,opacity:.5};F.annotation().shape({top:st,render:function(xt,Ot){var jt=xt.addGroup({id:F.id+"-regression-line",name:"regression-line-group"}),Dt=Lt({view:Ot,options:O});jt.addShape("path",{name:"regression-line",attrs:Object(H.a)(Object(H.a)({path:Dt},Mt),rt)})}})}return g}function _(g){var O=g.chart,F=g.options,V=F.tooltip;return V?O.tooltip(V):V===!1&&O.tooltip(!1),g}function R(g){return Object(y.e)(dt,mt,bt,wt,_,J,u.c,ct,u.a,u.j,it)(g)}var Q=w("hag6"),k=function(g){Object(H.b)(O,g);function O(){var F=g!==null&&g.apply(this,arguments)||this;return F.type="point",F}return O.prototype.changeData=function(F){this.updateOption(K(Object(y.b)({},this.options,{data:F})));var V=this,rt=V.options,ot=V.chart;mt({chart:ot,options:rt}),this.chart.changeData(F)},O.prototype.getSchemaAdaptor=function(){return R},O.prototype.getDefaultOptions=function(){return Object(y.b)({},g.prototype.getDefaultOptions.call(this),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}})},O}(i.a)},tKoa:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return n}),w.d(Pt,"d",function(){return p}),w.d(Pt,"e",function(){return b}),w.d(Pt,"c",function(){return I}),w.d(Pt,"f",function(){return m.a}),w.d(Pt,"b",function(){return r});var H=w("mrSG"),i=w("5HRO"),y=w("YuPD"),t=w("WOQw");function n(s){var d=s.options,C=d.area,E=d.xField,A=d.yField,f=d.seriesField,x=d.smooth,j=d.tooltip,P=Object(i.a)(j,[E,A,f]),W=P.fields,X=P.formatter;return C?Object(t.a)(Object(y.b)({},s,{options:{type:"area",colorField:f,tooltipFields:W,mapping:Object(H.a)({shape:x?"smooth":"area",tooltip:X},C)}})):s}var u=w("iTfj");function p(s){var d=s.options,C=d.line,E=d.stepType,A=d.xField,f=d.yField,x=d.seriesField,j=d.smooth,P=d.connectNulls,W=d.tooltip,X=Object(i.a)(W,[A,f,x]),$=X.fields,ft=X.formatter;return C?Object(t.a)(Object(y.b)({},s,{options:{type:"line",colorField:x,tooltipFields:$,mapping:Object(u.deepMix)({shape:E||(j?"smooth":"line"),tooltip:ft},C),args:{connectNulls:P}}})):s}function b(s){var d=s.options,C=d.point,E=d.xField,A=d.yField,f=d.seriesField,x=d.sizeField,j=d.shapeField,P=d.tooltip,W=Object(i.a)(P,[E,A,f,x,j]),X=W.fields,$=W.formatter;return C?Object(t.a)(Object(y.b)({},s,{options:{type:"point",colorField:f,shapeField:j,tooltipFields:X,mapping:Object(H.a)({tooltip:$},C)}})):s}var c=w("Ihc8");function S(s){var d=s.chart,C=s.options,E=s.ext,A=C.seriesField,f=C.isGroup,x=C.isStack,j=C.marginRatio,P=C.widthRatio,W=C.groupField,X=C.theme,$=[];if(A&&(f&&$.push({type:"dodge",dodgeBy:W||A,marginRatio:j}),x&&$.push({type:"stack",marginRatio:j})),$.length&&(E==null?void 0:E.geometry)){var ft=E==null?void 0:E.geometry;ft.adjust($)}return Object(u.isNil)(P)||d.theme(Object(y.b)({},Object(u.isObject)(X)?X:Object(c.getTheme)(X),{columnWidthRatio:P})),s}function I(s){var d=s.options,C=d.xField,E=d.yField,A=d.interval,f=d.seriesField,x=d.tooltip,j=d.minColumnWidth,P=d.maxColumnWidth,W=d.columnBackground,X=Object(i.a)(x,[C,E,f]),$=X.fields,ft=X.formatter,Z=(A?Object(t.a)(Object(y.b)({},s,{options:{type:"interval",colorField:f,tooltipFields:$,mapping:Object(H.a)({tooltip:ft},A),args:{minColumnWidth:j,maxColumnWidth:P,background:W}}})):s).ext;return S(Object(H.a)(Object(H.a)({},s),{ext:Z}))}var m=w("KMYG");function r(s){var d=s.options,C=d.edge,E=d.xField,A=d.yField,f=d.seriesField,x=d.tooltip,j=Object(i.a)(x,[E,A,f]),P=j.fields,W=j.formatter;return C?Object(t.a)(Object(y.b)({},s,{options:{type:"edge",colorField:f,tooltipFields:P,mapping:Object(H.a)({tooltip:W},C)}})):s}},tMB7:function(qe,Pt,w){var H=w("y1pI");function i(y){var t=this.__data__,n=H(t,y);return n<0?void 0:t[n][1]}qe.exports=i},tadb:function(qe,Pt,w){var H=w("Cwc5"),i=w("Kz5y"),y=H(i,"DataView");qe.exports=y},tdXX:function(qe,Pt){},"tvR+":function(qe,Pt,w){"use strict";var H=w("DdT1"),i=w("I4jL"),y=w("IeU1"),t=w("CSvP");Pt.a=function(){var n=i.a,u=!1,p=1,b=1,c=[0],S=t.a,I=t.a,m=t.a,r=t.a,s=t.a;function d(E){return E.x0=E.y0=0,E.x1=p,E.y1=b,E.eachBefore(C),c=[0],u&&E.eachBefore(H.a),E}function C(E){var A=c[E.depth],f=E.x0+A,x=E.y0+A,j=E.x1-A,P=E.y1-A;j<f&&(f=j=(f+j)/2),P<x&&(x=P=(x+P)/2),E.x0=f,E.y0=x,E.x1=j,E.y1=P,E.children&&(A=c[E.depth+1]=S(E)/2,f+=s(E)-A,x+=I(E)-A,j-=m(E)-A,P-=r(E)-A,j<f&&(f=j=(f+j)/2),P<x&&(x=P=(x+P)/2),n(E,f,x,j,P))}return d.round=function(E){return arguments.length?(u=!!E,d):u},d.size=function(E){return arguments.length?(p=+E[0],b=+E[1],d):[p,b]},d.tile=function(E){return arguments.length?(n=Object(y.b)(E),d):n},d.padding=function(E){return arguments.length?d.paddingInner(E).paddingOuter(E):d.paddingInner()},d.paddingInner=function(E){return arguments.length?(S=typeof E=="function"?E:Object(t.b)(+E),d):S},d.paddingOuter=function(E){return arguments.length?d.paddingTop(E).paddingRight(E).paddingBottom(E).paddingLeft(E):d.paddingTop()},d.paddingTop=function(E){return arguments.length?(I=typeof E=="function"?E:Object(t.b)(+E),d):I},d.paddingRight=function(E){return arguments.length?(m=typeof E=="function"?E:Object(t.b)(+E),d):m},d.paddingBottom=function(E){return arguments.length?(r=typeof E=="function"?E:Object(t.b)(+E),d):r},d.paddingLeft=function(E){return arguments.length?(s=typeof E=="function"?E:Object(t.b)(+E),d):s},d}},tvuL:function(qe,Pt,w){"use strict";w.r(Pt),w.d(Pt,"catmullRomToBezier",function(){return u}),w.d(Pt,"fillPath",function(){return ut}),w.d(Pt,"fillPathByDiff",function(){return K}),w.d(Pt,"formatPath",function(){return bt}),w.d(Pt,"intersection",function(){return Z}),w.d(Pt,"parsePathArray",function(){return s}),w.d(Pt,"parsePathString",function(){return n}),w.d(Pt,"pathToAbsolute",function(){return b}),w.d(Pt,"pathToCurve",function(){return m}),w.d(Pt,"rectPath",function(){return x});var H=w("iTfj"),i=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,y=new RegExp("([a-z])["+i+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+i+"]*,?["+i+"]*)+)","ig"),t=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+i+"]*,?["+i+"]*","ig"),n=function(J){if(!J)return null;if(Object(H.isArray)(J))return J;var ct={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},it=[];return String(J).replace(y,function(_,R,Q){var k=[],g=R.toLowerCase();if(Q.replace(t,function(O,F){F&&k.push(+F)}),g==="m"&&k.length>2&&(it.push([R].concat(k.splice(0,2))),g="l",R=R==="m"?"l":"L"),g==="o"&&k.length===1&&it.push([R,k[0]]),g==="r")it.push([R].concat(k));else for(;k.length>=ct[g]&&(it.push([R].concat(k.splice(0,ct[g]))),!!ct[g]););return J}),it},u=function(J,ct){for(var it=[],_=0,R=J.length;R-2*!ct>_;_+=2){var Q=[{x:+J[_-2],y:+J[_-1]},{x:+J[_],y:+J[_+1]},{x:+J[_+2],y:+J[_+3]},{x:+J[_+4],y:+J[_+5]}];ct?_?R-4===_?Q[3]={x:+J[0],y:+J[1]}:R-2===_&&(Q[2]={x:+J[0],y:+J[1]},Q[3]={x:+J[2],y:+J[3]}):Q[0]={x:+J[R-2],y:+J[R-1]}:R-4===_?Q[3]=Q[2]:_||(Q[0]={x:+J[_],y:+J[_+1]}),it.push(["C",(-Q[0].x+6*Q[1].x+Q[2].x)/6,(-Q[0].y+6*Q[1].y+Q[2].y)/6,(Q[1].x+6*Q[2].x-Q[3].x)/6,(Q[1].y+6*Q[2].y-Q[3].y)/6,Q[2].x,Q[2].y])}return it},p=function(J,ct,it,_,R){var Q=[];if(R===null&&_===null&&(_=it),J=+J,ct=+ct,it=+it,_=+_,R!==null){var k=Math.PI/180,g=J+it*Math.cos(-_*k),O=J+it*Math.cos(-R*k),F=ct+it*Math.sin(-_*k),V=ct+it*Math.sin(-R*k);Q=[["M",g,F],["A",it,it,0,+(R-_>180),0,O,V]]}else Q=[["M",J,ct],["m",0,-_],["a",it,_,0,1,1,0,2*_],["a",it,_,0,1,1,0,-2*_],["z"]];return Q},b=function(J){if(J=n(J),!J||!J.length)return[["M",0,0]];var ct=[],it=0,_=0,R=0,Q=0,k=0,g,O;J[0][0]==="M"&&(it=+J[0][1],_=+J[0][2],R=it,Q=_,k++,ct[0]=["M",it,_]);for(var F=J.length===3&&J[0][0]==="M"&&J[1][0].toUpperCase()==="R"&&J[2][0].toUpperCase()==="Z",V=void 0,rt=void 0,ot=k,st=J.length;ot<st;ot++){if(ct.push(V=[]),rt=J[ot],g=rt[0],g!==g.toUpperCase())switch(V[0]=g.toUpperCase(),V[0]){case"A":V[1]=rt[1],V[2]=rt[2],V[3]=rt[3],V[4]=rt[4],V[5]=rt[5],V[6]=+rt[6]+it,V[7]=+rt[7]+_;break;case"V":V[1]=+rt[1]+_;break;case"H":V[1]=+rt[1]+it;break;case"R":O=[it,_].concat(rt.slice(1));for(var Mt=2,yt=O.length;Mt<yt;Mt++)O[Mt]=+O[Mt]+it,O[++Mt]=+O[Mt]+_;ct.pop(),ct=ct.concat(u(O,F));break;case"O":ct.pop(),O=p(it,_,rt[1],rt[2]),O.push(O[0]),ct=ct.concat(O);break;case"U":ct.pop(),ct=ct.concat(p(it,_,rt[1],rt[2],rt[3])),V=["U"].concat(ct[ct.length-1].slice(-2));break;case"M":R=+rt[1]+it,Q=+rt[2]+_;break;default:for(var Mt=1,yt=rt.length;Mt<yt;Mt++)V[Mt]=+rt[Mt]+(Mt%2?it:_)}else if(g==="R")O=[it,_].concat(rt.slice(1)),ct.pop(),ct=ct.concat(u(O,F)),V=["R"].concat(rt.slice(-2));else if(g==="O")ct.pop(),O=p(it,_,rt[1],rt[2]),O.push(O[0]),ct=ct.concat(O);else if(g==="U")ct.pop(),ct=ct.concat(p(it,_,rt[1],rt[2],rt[3])),V=["U"].concat(ct[ct.length-1].slice(-2));else for(var xt=0,Ot=rt.length;xt<Ot;xt++)V[xt]=rt[xt];if(g=g.toUpperCase(),g!=="O")switch(V[0]){case"Z":it=+R,_=+Q;break;case"H":it=V[1];break;case"V":_=V[1];break;case"M":R=V[V.length-2],Q=V[V.length-1];break;default:it=V[V.length-2],_=V[V.length-1]}}return ct},c=function(J,ct,it,_){return[J,ct,it,_,it,_]},S=function(J,ct,it,_,R,Q){var k=1/3,g=2/3;return[k*J+g*it,k*ct+g*_,k*R+g*it,k*Q+g*_,R,Q]},I=function wt(J,ct,it,_,R,Q,k,g,O,F){it===_&&(it+=1);var V=Math.PI*120/180,rt=Math.PI/180*(+R||0),ot=[],st,Mt,yt,xt,Ot,jt=function(ii,mi,Pi){var sa=ii*Math.cos(Pi)-mi*Math.sin(Pi),Pa=ii*Math.sin(Pi)+mi*Math.cos(Pi);return{x:sa,y:Pa}};if(F)Mt=F[0],yt=F[1],xt=F[2],Ot=F[3];else{st=jt(J,ct,-rt),J=st.x,ct=st.y,st=jt(g,O,-rt),g=st.x,O=st.y,J===g&&ct===O&&(g+=1,O+=1);var Dt=(J-g)/2,zt=(ct-O)/2,Tt=Dt*Dt/(it*it)+zt*zt/(_*_);Tt>1&&(Tt=Math.sqrt(Tt),it=Tt*it,_=Tt*_);var Wt=it*it,Ht=_*_,re=(Q===k?-1:1)*Math.sqrt(Math.abs((Wt*Ht-Wt*zt*zt-Ht*Dt*Dt)/(Wt*zt*zt+Ht*Dt*Dt)));xt=re*it*zt/_+(J+g)/2,Ot=re*-_*Dt/it+(ct+O)/2,Mt=Math.asin(((ct-Ot)/_).toFixed(9)),yt=Math.asin(((O-Ot)/_).toFixed(9)),Mt=J<xt?Math.PI-Mt:Mt,yt=g<xt?Math.PI-yt:yt,Mt<0&&(Mt=Math.PI*2+Mt),yt<0&&(yt=Math.PI*2+yt),k&&Mt>yt&&(Mt=Mt-Math.PI*2),!k&&yt>Mt&&(yt=yt-Math.PI*2)}var pe=yt-Mt;if(Math.abs(pe)>V){var me=yt,Se=g,Le=O;yt=Mt+V*(k&&yt>Mt?1:-1),g=xt+it*Math.cos(yt),O=Ot+_*Math.sin(yt),ot=wt(g,O,it,_,R,0,k,Se,Le,[yt,me,xt,Ot])}pe=yt-Mt;var Je=Math.cos(Mt),On=Math.sin(Mt),gn=Math.cos(yt),Wn=Math.sin(yt),kn=Math.tan(pe/4),Vn=4/3*it*kn,Dn=4/3*_*kn,Nn=[J,ct],Qn=[J+Vn*On,ct-Dn*Je],ir=[g+Vn*Wn,O-Dn*gn],hr=[g,O];if(Qn[0]=2*Nn[0]-Qn[0],Qn[1]=2*Nn[1]-Qn[1],F)return[Qn,ir,hr].concat(ot);ot=[Qn,ir,hr].concat(ot).join().split(",");for(var Sr=[],mr=0,dr=ot.length;mr<dr;mr++)Sr[mr]=mr%2?jt(ot[mr-1],ot[mr],rt).y:jt(ot[mr],ot[mr+1],rt).x;return Sr},m=function(J,ct){var it=b(J),_=ct&&b(ct),R={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Q={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k=[],g=[],O="",F="",V,rt=function(zt,Tt,Wt){var Ht,re;if(!zt)return["C",Tt.x,Tt.y,Tt.x,Tt.y,Tt.x,Tt.y];switch(!(zt[0]in{T:1,Q:1})&&(Tt.qx=Tt.qy=null),zt[0]){case"M":Tt.X=zt[1],Tt.Y=zt[2];break;case"A":zt=["C"].concat(I.apply(0,[Tt.x,Tt.y].concat(zt.slice(1))));break;case"S":Wt==="C"||Wt==="S"?(Ht=Tt.x*2-Tt.bx,re=Tt.y*2-Tt.by):(Ht=Tt.x,re=Tt.y),zt=["C",Ht,re].concat(zt.slice(1));break;case"T":Wt==="Q"||Wt==="T"?(Tt.qx=Tt.x*2-Tt.qx,Tt.qy=Tt.y*2-Tt.qy):(Tt.qx=Tt.x,Tt.qy=Tt.y),zt=["C"].concat(S(Tt.x,Tt.y,Tt.qx,Tt.qy,zt[1],zt[2]));break;case"Q":Tt.qx=zt[1],Tt.qy=zt[2],zt=["C"].concat(S(Tt.x,Tt.y,zt[1],zt[2],zt[3],zt[4]));break;case"L":zt=["C"].concat(c(Tt.x,Tt.y,zt[1],zt[2]));break;case"H":zt=["C"].concat(c(Tt.x,Tt.y,zt[1],Tt.y));break;case"V":zt=["C"].concat(c(Tt.x,Tt.y,Tt.x,zt[1]));break;case"Z":zt=["C"].concat(c(Tt.x,Tt.y,Tt.X,Tt.Y));break;default:break}return zt},ot=function(zt,Tt){if(zt[Tt].length>7){zt[Tt].shift();for(var Wt=zt[Tt];Wt.length;)k[Tt]="A",_&&(g[Tt]="A"),zt.splice(Tt++,0,["C"].concat(Wt.splice(0,6)));zt.splice(Tt,1),V=Math.max(it.length,_&&_.length||0)}},st=function(zt,Tt,Wt,Ht,re){zt&&Tt&&zt[re][0]==="M"&&Tt[re][0]!=="M"&&(Tt.splice(re,0,["M",Ht.x,Ht.y]),Wt.bx=0,Wt.by=0,Wt.x=zt[re][1],Wt.y=zt[re][2],V=Math.max(it.length,_&&_.length||0))};V=Math.max(it.length,_&&_.length||0);for(var Mt=0;Mt<V;Mt++){it[Mt]&&(O=it[Mt][0]),O!=="C"&&(k[Mt]=O,Mt&&(F=k[Mt-1])),it[Mt]=rt(it[Mt],R,F),k[Mt]!=="A"&&O==="C"&&(k[Mt]="C"),ot(it,Mt),_&&(_[Mt]&&(O=_[Mt][0]),O!=="C"&&(g[Mt]=O,Mt&&(F=g[Mt-1])),_[Mt]=rt(_[Mt],Q,F),g[Mt]!=="A"&&O==="C"&&(g[Mt]="C"),ot(_,Mt)),st(it,_,R,Q,Mt),st(_,it,Q,R,Mt);var yt=it[Mt],xt=_&&_[Mt],Ot=yt.length,jt=_&&xt.length;R.x=yt[Ot-2],R.y=yt[Ot-1],R.bx=parseFloat(yt[Ot-4])||R.x,R.by=parseFloat(yt[Ot-3])||R.y,Q.bx=_&&(parseFloat(xt[jt-4])||Q.x),Q.by=_&&(parseFloat(xt[jt-3])||Q.y),Q.x=_&&xt[jt-2],Q.y=_&&xt[jt-1]}return _?[it,_]:it},r=/,?([a-z]),?/gi,s=function(J){return J.join(",").replace(r,"$1")},d=function(J,ct,it,_,R){var Q=-3*ct+9*it-9*_+3*R,k=J*Q+6*ct-12*it+6*_;return J*k-3*ct+3*it},C=function(J,ct,it,_,R,Q,k,g,O){O===null&&(O=1),O=O>1?1:O<0?0:O;for(var F=O/2,V=12,rt=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],ot=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],st=0,Mt=0;Mt<V;Mt++){var yt=F*rt[Mt]+F,xt=d(yt,J,it,R,k),Ot=d(yt,ct,_,Q,g),jt=xt*xt+Ot*Ot;st+=ot[Mt]*Math.sqrt(jt)}return F*st},E=function(J,ct,it,_,R,Q,k,g){for(var O=[],F=[[],[]],V,rt,ot,st,Mt=0;Mt<2;++Mt){if(Mt===0?(rt=6*J-12*it+6*R,V=-3*J+9*it-9*R+3*k,ot=3*it-3*J):(rt=6*ct-12*_+6*Q,V=-3*ct+9*_-9*Q+3*g,ot=3*_-3*ct),Math.abs(V)<1e-12){if(Math.abs(rt)<1e-12)continue;st=-ot/rt,st>0&&st<1&&O.push(st);continue}var yt=rt*rt-4*ot*V,xt=Math.sqrt(yt);if(!(yt<0)){var Ot=(-rt+xt)/(2*V);Ot>0&&Ot<1&&O.push(Ot);var jt=(-rt-xt)/(2*V);jt>0&&jt<1&&O.push(jt)}}for(var Dt=O.length,zt=Dt,Tt;Dt--;)st=O[Dt],Tt=1-st,F[0][Dt]=Tt*Tt*Tt*J+3*Tt*Tt*st*it+3*Tt*st*st*R+st*st*st*k,F[1][Dt]=Tt*Tt*Tt*ct+3*Tt*Tt*st*_+3*Tt*st*st*Q+st*st*st*g;return F[0][zt]=J,F[1][zt]=ct,F[0][zt+1]=k,F[1][zt+1]=g,F[0].length=F[1].length=zt+2,{min:{x:Math.min.apply(0,F[0]),y:Math.min.apply(0,F[1])},max:{x:Math.max.apply(0,F[0]),y:Math.max.apply(0,F[1])}}},A=function(J,ct,it,_,R,Q,k,g){if(!(Math.max(J,it)<Math.min(R,k)||Math.min(J,it)>Math.max(R,k)||Math.max(ct,_)<Math.min(Q,g)||Math.min(ct,_)>Math.max(Q,g))){var O=(J*_-ct*it)*(R-k)-(J-it)*(R*g-Q*k),F=(J*_-ct*it)*(Q-g)-(ct-_)*(R*g-Q*k),V=(J-it)*(Q-g)-(ct-_)*(R-k);if(!!V){var rt=O/V,ot=F/V,st=+rt.toFixed(2),Mt=+ot.toFixed(2);if(!(st<+Math.min(J,it).toFixed(2)||st>+Math.max(J,it).toFixed(2)||st<+Math.min(R,k).toFixed(2)||st>+Math.max(R,k).toFixed(2)||Mt<+Math.min(ct,_).toFixed(2)||Mt>+Math.max(ct,_).toFixed(2)||Mt<+Math.min(Q,g).toFixed(2)||Mt>+Math.max(Q,g).toFixed(2)))return{x:rt,y:ot}}}},f=function(J,ct,it){return ct>=J.x&&ct<=J.x+J.width&&it>=J.y&&it<=J.y+J.height},x=function(J,ct,it,_,R){if(R)return[["M",+J+ +R,ct],["l",it-R*2,0],["a",R,R,0,0,1,R,R],["l",0,_-R*2],["a",R,R,0,0,1,-R,R],["l",R*2-it,0],["a",R,R,0,0,1,-R,-R],["l",0,R*2-_],["a",R,R,0,0,1,R,-R],["z"]];var Q=[["M",J,ct],["l",it,0],["l",0,_],["l",-it,0],["z"]];return Q.parsePathArray=s,Q},j=function(J,ct,it,_){return J===null&&(J=ct=it=_=0),ct===null&&(ct=J.y,it=J.width,_=J.height,J=J.x),{x:J,y:ct,width:it,w:it,height:_,h:_,x2:J+it,y2:ct+_,cx:J+it/2,cy:ct+_/2,r1:Math.min(it,_)/2,r2:Math.max(it,_)/2,r0:Math.sqrt(it*it+_*_)/2,path:x(J,ct,it,_),vb:[J,ct,it,_].join(" ")}},P=function(J,ct){return J=j(J),ct=j(ct),f(ct,J.x,J.y)||f(ct,J.x2,J.y)||f(ct,J.x,J.y2)||f(ct,J.x2,J.y2)||f(J,ct.x,ct.y)||f(J,ct.x2,ct.y)||f(J,ct.x,ct.y2)||f(J,ct.x2,ct.y2)||(J.x<ct.x2&&J.x>ct.x||ct.x<J.x2&&ct.x>J.x)&&(J.y<ct.y2&&J.y>ct.y||ct.y<J.y2&&ct.y>J.y)},W=function(J,ct,it,_,R,Q,k,g){Object(H.isArray)(J)||(J=[J,ct,it,_,R,Q,k,g]);var O=E.apply(null,J);return j(O.min.x,O.min.y,O.max.x-O.min.x,O.max.y-O.min.y)},X=function(J,ct,it,_,R,Q,k,g,O){var F=1-O,V=Math.pow(F,3),rt=Math.pow(F,2),ot=O*O,st=ot*O,Mt=V*J+rt*3*O*it+F*3*O*O*R+st*k,yt=V*ct+rt*3*O*_+F*3*O*O*Q+st*g,xt=J+2*O*(it-J)+ot*(R-2*it+J),Ot=ct+2*O*(_-ct)+ot*(Q-2*_+ct),jt=it+2*O*(R-it)+ot*(k-2*R+it),Dt=_+2*O*(Q-_)+ot*(g-2*Q+_),zt=F*J+O*it,Tt=F*ct+O*_,Wt=F*R+O*k,Ht=F*Q+O*g,re=90-Math.atan2(xt-jt,Ot-Dt)*180/Math.PI;return{x:Mt,y:yt,m:{x:xt,y:Ot},n:{x:jt,y:Dt},start:{x:zt,y:Tt},end:{x:Wt,y:Ht},alpha:re}},$=function(J,ct,it){var _=W(J),R=W(ct);if(!P(_,R))return it?0:[];for(var Q=C.apply(0,J),k=C.apply(0,ct),g=~~(Q/8),O=~~(k/8),F=[],V=[],rt={},ot=it?0:[],st=0;st<g+1;st++){var Mt=X.apply(0,J.concat(st/g));F.push({x:Mt.x,y:Mt.y,t:st/g})}for(var st=0;st<O+1;st++){var Mt=X.apply(0,ct.concat(st/O));V.push({x:Mt.x,y:Mt.y,t:st/O})}for(var st=0;st<g;st++)for(var yt=0;yt<O;yt++){var xt=F[st],Ot=F[st+1],jt=V[yt],Dt=V[yt+1],zt=Math.abs(Ot.x-xt.x)<.001?"y":"x",Tt=Math.abs(Dt.x-jt.x)<.001?"y":"x",Wt=A(xt.x,xt.y,Ot.x,Ot.y,jt.x,jt.y,Dt.x,Dt.y);if(Wt){if(rt[Wt.x.toFixed(4)]===Wt.y.toFixed(4))continue;rt[Wt.x.toFixed(4)]=Wt.y.toFixed(4);var Ht=xt.t+Math.abs((Wt[zt]-xt[zt])/(Ot[zt]-xt[zt]))*(Ot.t-xt.t),re=jt.t+Math.abs((Wt[Tt]-jt[Tt])/(Dt[Tt]-jt[Tt]))*(Dt.t-jt.t);Ht>=0&&Ht<=1&&re>=0&&re<=1&&(it?ot+=1:ot.push({x:Wt.x,y:Wt.y,t1:Ht,t2:re}))}}return ot},ft=function(J,ct,it){J=m(J),ct=m(ct);for(var _,R,Q,k,g,O,F,V,rt,ot,st=it?0:[],Mt=0,yt=J.length;Mt<yt;Mt++){var xt=J[Mt];if(xt[0]==="M")_=g=xt[1],R=O=xt[2];else{xt[0]==="C"?(rt=[_,R].concat(xt.slice(1)),_=rt[6],R=rt[7]):(rt=[_,R,_,R,g,O,g,O],_=g,R=O);for(var Ot=0,jt=ct.length;Ot<jt;Ot++){var Dt=ct[Ot];if(Dt[0]==="M")Q=F=Dt[1],k=V=Dt[2];else{Dt[0]==="C"?(ot=[Q,k].concat(Dt.slice(1)),Q=ot[6],k=ot[7]):(ot=[Q,k,Q,k,F,V,F,V],Q=F,k=V);var zt=$(rt,ot,it);if(it)st+=zt;else{for(var Tt=0,Wt=zt.length;Tt<Wt;Tt++)zt[Tt].segment1=Mt,zt[Tt].segment2=Ot,zt[Tt].bez1=rt,zt[Tt].bez2=ot;st=st.concat(zt)}}}}}return st},Z=function(J,ct){return ft(J,ct)};function lt(wt,J){var ct=[],it=[];function _(R,Q){if(R.length===1)ct.push(R[0]),it.push(R[0]);else{for(var k=[],g=0;g<R.length-1;g++)g===0&&ct.push(R[0]),g===R.length-2&&it.push(R[g+1]),k[g]=[(1-Q)*R[g][0]+Q*R[g+1][0],(1-Q)*R[g][1]+Q*R[g+1][1]];_(k,Q)}}return wt.length&&_(wt,J),{left:ct,right:it.reverse()}}function pt(wt,J,ct){var it=[[wt[1],wt[2]]];ct=ct||2;var _=[];J[0]==="A"?(it.push(J[6]),it.push(J[7])):J[0]==="C"?(it.push([J[1],J[2]]),it.push([J[3],J[4]]),it.push([J[5],J[6]])):J[0]==="S"||J[0]==="Q"?(it.push([J[1],J[2]]),it.push([J[3],J[4]])):it.push([J[1],J[2]]);for(var R=it,Q=1/ct,k=0;k<ct-1;k++){var g=Q/(1-Q*k),O=lt(R,g);_.push(O.left),R=O.right}_.push(R);var F=_.map(function(V){var rt=[];return V.length===4&&(rt.push("C"),rt=rt.concat(V[2])),V.length>=3&&(V.length===3&&rt.push("Q"),rt=rt.concat(V[1])),V.length===2&&rt.push("L"),rt=rt.concat(V[V.length-1]),rt});return F}var gt=function(J,ct,it){if(it===1)return[[].concat(J)];var _=[];if(ct[0]==="L"||ct[0]==="C"||ct[0]==="Q")_=_.concat(pt(J,ct,it));else{var R=[].concat(J);R[0]==="M"&&(R[0]="L");for(var Q=0;Q<=it-1;Q++)_.push(R)}return _},ut=function(J,ct){if(J.length===1)return J;var it=J.length-1,_=ct.length-1,R=it/_,Q=[];if(J.length===1&&J[0][0]==="M"){for(var k=0;k<_-it;k++)J.push(J[0]);return J}for(var k=0;k<_;k++){var g=Math.floor(R*k);Q[g]=(Q[g]||0)+1}var O=Q.reduce(function(F,V,rt){return rt===it?F.concat(J[it]):F.concat(gt(J[rt],J[rt+1],V))},[]);return O.unshift(J[0]),(ct[_]==="Z"||ct[_]==="z")&&O.push("Z"),O},Bt=function(J,ct){if(J.length!==ct.length)return!1;var it=!0;return Object(H.each)(J,function(_,R){if(_!==ct[R])return it=!1,!1}),it};function Lt(wt,J,ct){var it=null,_=ct;return J<_&&(_=J,it="add"),wt<_&&(_=wt,it="del"),{type:it,min:_}}var St=function(J,ct){var it=J.length,_=ct.length,R,Q,k=0;if(it===0||_===0)return null;for(var g=[],O=0;O<=it;O++)g[O]=[],g[O][0]={min:O};for(var F=0;F<=_;F++)g[0][F]={min:F};for(var O=1;O<=it;O++){R=J[O-1];for(var F=1;F<=_;F++){Q=ct[F-1],Bt(R,Q)?k=0:k=1;var V=g[O-1][F].min+1,rt=g[O][F-1].min+1,ot=g[O-1][F-1].min+k;g[O][F]=Lt(V,rt,ot)}}return g},K=function(J,ct){var it=St(J,ct),_=J.length,R=ct.length,Q=[],k=1,g=1;if(it[_][R].min!==_){for(var O=1;O<=_;O++){var F=it[O][O].min;g=O;for(var V=k;V<=R;V++)it[O][V].min<F&&(F=it[O][V].min,g=V);k=g,it[O][k].type&&Q.push({index:O-1,type:it[O][k].type})}for(var O=Q.length-1;O>=0;O--)k=Q[O].index,Q[O].type==="add"?J.splice(k,0,[].concat(J[k])):J.splice(k,1)}_=J.length;var rt=R-_;if(_<R)for(var O=0;O<rt;O++)J[_-1][0]==="z"||J[_-1][0]==="Z"?J.splice(_-2,0,J[_-2]):J.push(J[_-1]),_+=1;return J};function dt(wt,J,ct){for(var it=[].concat(wt),_,R=1/(ct+1),Q=mt(J)[0],k=1;k<=ct;k++)R*=k,_=Math.floor(wt.length*R),_===0?it.unshift([Q[0]*R+wt[_][0]*(1-R),Q[1]*R+wt[_][1]*(1-R)]):it.splice(_,0,[Q[0]*R+wt[_][0]*(1-R),Q[1]*R+wt[_][1]*(1-R)]);return it}function mt(wt){var J=[];switch(wt[0]){case"M":J.push([wt[1],wt[2]]);break;case"L":J.push([wt[1],wt[2]]);break;case"A":J.push([wt[6],wt[7]]);break;case"Q":J.push([wt[3],wt[4]]),J.push([wt[1],wt[2]]);break;case"T":J.push([wt[1],wt[2]]);break;case"C":J.push([wt[5],wt[6]]),J.push([wt[1],wt[2]]),J.push([wt[3],wt[4]]);break;case"S":J.push([wt[3],wt[4]]),J.push([wt[1],wt[2]]);break;case"H":J.push([wt[1],wt[1]]);break;case"V":J.push([wt[1],wt[1]]);break;default:}return J}var bt=function(J,ct){if(J.length<=1)return J;for(var it,_=0;_<ct.length;_++)if(J[_][0]!==ct[_][0])switch(it=mt(J[_]),ct[_][0]){case"M":J[_]=["M"].concat(it[0]);break;case"L":J[_]=["L"].concat(it[0]);break;case"A":J[_]=[].concat(ct[_]),J[_][6]=it[0][0],J[_][7]=it[0][1];break;case"Q":if(it.length<2)if(_>0)it=dt(it,J[_-1],1);else{J[_]=ct[_];break}J[_]=["Q"].concat(it.reduce(function(R,Q){return R.concat(Q)},[]));break;case"T":J[_]=["T"].concat(it[0]);break;case"C":if(it.length<3)if(_>0)it=dt(it,J[_-1],2);else{J[_]=ct[_];break}J[_]=["C"].concat(it.reduce(function(R,Q){return R.concat(Q)},[]));break;case"S":if(it.length<2)if(_>0)it=dt(it,J[_-1],1);else{J[_]=ct[_];break}J[_]=["S"].concat(it.reduce(function(R,Q){return R.concat(Q)},[]));break;default:J[_]=ct[_]}return J}},u3os:function(qe,Pt,w){"use strict";Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.ver=Pt.clear=Pt.bind=void 0;var H=w("P4Qj"),i=function(u,p){var b=(0,H.getSensor)(u);return b.bind(p),function(){b.unbind(p)}};Pt.bind=i;var y=function(u){var p=(0,H.getSensor)(u);(0,H.removeSensor)(p)};Pt.clear=y;var t="1.0.1";Pt.ver=t},u60a:function(qe,Pt,w){"use strict";w.r(Pt),w.d(Pt,"CONTAINER_CLASS",function(){return H}),w.d(Pt,"TITLE_CLASS",function(){return i}),w.d(Pt,"LIST_CLASS",function(){return y}),w.d(Pt,"LIST_ITEM_CLASS",function(){return t}),w.d(Pt,"MARKER_CLASS",function(){return n}),w.d(Pt,"VALUE_CLASS",function(){return u}),w.d(Pt,"NAME_CLASS",function(){return p}),w.d(Pt,"CROSSHAIR_X",function(){return b}),w.d(Pt,"CROSSHAIR_Y",function(){return c});var H="g2-tooltip",i="g2-tooltip-title",y="g2-tooltip-list",t="g2-tooltip-list-item",n="g2-tooltip-marker",u="g2-tooltip-value",p="g2-tooltip-name",b="g2-tooltip-crosshair-x",c="g2-tooltip-crosshair-y"},u8Dt:function(qe,Pt,w){var H=w("YESw"),i="__lodash_hash_undefined__",y=Object.prototype,t=y.hasOwnProperty;function n(u){var p=this.__data__;if(H){var b=p[u];return b===i?void 0:b}return t.call(p,u)?p[u]:void 0}qe.exports=n},"u9/z":function(qe,Pt,w){"use strict";w.d(Pt,"b",function(){return p}),w.d(Pt,"a",function(){return c});var H=w("iTfj"),i=w("YuPD"),y=w("w02o"),t=w("tKoa"),n=w("SZbK"),u=w("B3DA");function p(S){var I=S.chart,m=S.options,r=m.percent,s=m.progressStyle,d=m.color,C=m.barWidthRatio;I.data(Object(u.a)(r));var E=Object(i.b)({},S,{options:{xField:"1",yField:"percent",seriesField:"type",isStack:!0,widthRatio:C,interval:{style:s,color:Object(H.isString)(d)?[d,n.a[1]]:d}}});return Object(t.c)(E),I.tooltip(!1),I.axis(!1),I.legend(!1),S}function b(S){var I=S.chart;return I.coordinate("rect").transpose(),S}function c(S){return Object(i.e)(p,Object(y.f)({}),b,y.a,y.j,Object(y.b)())(S)}},u9VJ:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return u});var H=w("mrSG"),i=w("zJSt"),y=w("YuPD"),t=w("sqD9"),n=w("DMQx"),u=function(p){Object(H.b)(b,p);function b(){var c=p!==null&&p.apply(this,arguments)||this;return c.type="column",c}return b.prototype.changeData=function(c){this.updateOption({data:c});var S=this.options,I=S.yField,m=S.xField,r=S.isPercent;this.chart.changeData(Object(t.a)(c,I,m,I,r))},b.prototype.getDefaultOptions=function(){return Object(y.b)({},p.prototype.getDefaultOptions.call(this),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},interactions:[{type:"active-region"}]})},b.prototype.getSchemaAdaptor=function(){return n.a},b}(i.a)},uCX8:function(qe,Pt,w){"use strict";w.r(Pt),w.d(Pt,"Line",function(){return S}),w.d(Pt,"Text",function(){return m}),w.d(Pt,"Arc",function(){return s}),w.d(Pt,"Region",function(){return C}),w.d(Pt,"Image",function(){return A}),w.d(Pt,"DataMarker",function(){return x}),w.d(Pt,"DataRegion",function(){return P}),w.d(Pt,"RegionFilter",function(){return X}),w.d(Pt,"Shape",function(){return ft}),w.d(Pt,"Html",function(){return gt});var H=w("mrSG"),i=w("iTfj"),y=w("MeYt"),t=w("BgvD"),n=w("jqgP"),u=w("5UbV");function p(ut,Bt){var Lt=Bt.x,St=Bt.y,K=Bt.content,dt=Bt.style,mt=Bt.id,bt=Bt.name,wt=Bt.rotate,J=Bt.maxLength,ct=Bt.autoEllipsis,it=Bt.isVertical,_=Bt.ellipsisPosition,R=Bt.background,Q=ut.addGroup({id:mt+"-group",name:bt+"-group",attrs:{x:Lt,y:St}}),k=Q.addShape({type:"text",id:mt,name:bt,attrs:Object(H.a)({x:0,y:0,text:K},dt)}),g=Object(u.c)(Object(i.get)(R,"padding",0));if(J&&ct){var O=J-(g[1]+g[3]);Object(t.a)(!it,k,O,_)}if(R){var F=Object(i.get)(R,"style",{}),V=k.getCanvasBBox(),rt=V.minX,ot=V.minY,st=V.width,Mt=V.height,yt=Q.addShape("rect",{id:mt+"-bg",name:mt+"-bg",attrs:Object(H.a)({x:rt-g[3],y:ot-g[0],width:st+g[1]+g[3],height:Mt+g[0]+g[2]},F)});yt.toBack()}Object(n.c)(Q,Lt,St),Object(n.b)(Q,wt,Lt,St)}var b=w("L16w"),c=function(ut){Object(H.b)(Bt,ut);function Bt(){return ut!==null&&ut.apply(this,arguments)||this}return Bt.prototype.getDefaultCfg=function(){var Lt=ut.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},Lt),{name:"annotation",type:"line",locationType:"region",start:null,end:null,style:{},text:null,defaultCfg:{style:{fill:b.a.textColor,fontSize:12,textAlign:"center",textBaseline:"bottom",fontFamily:b.a.fontFamily},text:{position:"center",autoRotate:!0,content:null,offsetX:0,offsetY:0,style:{stroke:b.a.lineColor,lineWidth:1}}}})},Bt.prototype.renderInner=function(Lt){this.renderLine(Lt),this.get("text")&&this.renderLabel(Lt)},Bt.prototype.renderLine=function(Lt){var St=this.get("start"),K=this.get("end"),dt=this.get("style");this.addShape(Lt,{type:"line",id:this.getElementId("line"),name:"annotation-line",attrs:Object(H.a)({x1:St.x,y1:St.y,x2:K.x,y2:K.y},dt)})},Bt.prototype.getLabelPoint=function(Lt,St,K){var dt;return K==="start"?dt=0:K==="center"?dt=.5:Object(i.isString)(K)&&K.indexOf("%")!==-1?dt=parseInt(K,10)/100:Object(i.isNumber)(K)?dt=K:dt=1,(dt>1||dt<0)&&(dt=1),{x:Object(u.g)(Lt.x,St.x,dt),y:Object(u.g)(Lt.y,St.y,dt)}},Bt.prototype.renderLabel=function(Lt){var St=this.get("text"),K=this.get("start"),dt=this.get("end"),mt=St.position,bt=St.content,wt=St.style,J=St.offsetX,ct=St.offsetY,it=St.autoRotate,_=St.maxLength,R=St.autoEllipsis,Q=St.ellipsisPosition,k=St.background,g=St.isVertical,O=g===void 0?!1:g,F=this.getLabelPoint(K,dt,mt),V=F.x+J,rt=F.y+ct,ot={id:this.getElementId("line-text"),name:"annotation-line-text",x:V,y:rt,content:bt,style:wt,maxLength:_,autoEllipsis:R,ellipsisPosition:Q,background:k,isVertical:O};if(it){var st=[dt.x-K.x,dt.y-K.y];ot.rotate=Math.atan2(st[1],st[0])}p(Lt,ot)},Bt}(y.a),S=c,I=function(ut){Object(H.b)(Bt,ut);function Bt(){return ut!==null&&ut.apply(this,arguments)||this}return Bt.prototype.getDefaultCfg=function(){var Lt=ut.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},Lt),{name:"annotation",type:"text",locationType:"point",x:0,y:0,content:"",rotate:null,style:{},background:null,maxLength:null,autoEllipsis:!0,isVertical:!1,ellipsisPosition:"tail",defaultCfg:{style:{fill:b.a.textColor,fontSize:12,textAlign:"center",textBaseline:"middle",fontFamily:b.a.fontFamily}}})},Bt.prototype.setLocation=function(Lt){this.set("x",Lt.x),this.set("y",Lt.y),this.resetLocation()},Bt.prototype.renderInner=function(Lt){var St=this.getLocation(),K=St.x,dt=St.y,mt=this.get("content"),bt=this.get("style"),wt=this.getElementId("text"),J=this.get("name")+"-text",ct=this.get("maxLength"),it=this.get("autoEllipsis"),_=this.get("isVertical"),R=this.get("ellipsisPosition"),Q=this.get("background"),k=this.get("rotate"),g={id:wt,name:J,x:K,y:dt,content:mt,style:bt,maxLength:ct,autoEllipsis:it,isVertical:_,ellipsisPosition:R,background:Q,rotate:k};p(Lt,g)},Bt.prototype.resetLocation=function(){var Lt=this.getElementByLocalId("text-group");if(Lt){var St=this.getLocation(),K=St.x,dt=St.y,mt=this.get("rotate");Object(n.c)(Lt,K,dt),Object(n.b)(Lt,mt,K,dt)}},Bt}(y.a),m=I,r=function(ut){Object(H.b)(Bt,ut);function Bt(){return ut!==null&&ut.apply(this,arguments)||this}return Bt.prototype.getDefaultCfg=function(){var Lt=ut.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},Lt),{name:"annotation",type:"arc",locationType:"circle",center:null,radius:100,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,style:{stroke:"#999",lineWidth:1}})},Bt.prototype.renderInner=function(Lt){this.renderArc(Lt)},Bt.prototype.getArcPath=function(){var Lt=this.getLocation(),St=Lt.center,K=Lt.radius,dt=Lt.startAngle,mt=Lt.endAngle,bt=Object(u.e)(St,K,dt),wt=Object(u.e)(St,K,mt),J=mt-dt>Math.PI?1:0,ct=[["M",bt.x,bt.y]];if(mt-dt==Math.PI*2){var it=Object(u.e)(St,K,dt+Math.PI);ct.push(["A",K,K,0,J,1,it.x,it.y]),ct.push(["A",K,K,0,J,1,wt.x,wt.y])}else ct.push(["A",K,K,0,J,1,wt.x,wt.y]);return ct},Bt.prototype.renderArc=function(Lt){var St=this.getArcPath(),K=this.get("style");this.addShape(Lt,{type:"path",id:this.getElementId("arc"),name:"annotation-arc",attrs:Object(H.a)({path:St},K)})},Bt}(y.a),s=r,d=function(ut){Object(H.b)(Bt,ut);function Bt(){return ut!==null&&ut.apply(this,arguments)||this}return Bt.prototype.getDefaultCfg=function(){var Lt=ut.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},Lt),{name:"annotation",type:"region",locationType:"region",start:null,end:null,style:{},defaultCfg:{style:{lineWidth:0,fill:b.a.regionColor,opacity:.4}}})},Bt.prototype.renderInner=function(Lt){this.renderRegion(Lt)},Bt.prototype.renderRegion=function(Lt){var St=this.get("start"),K=this.get("end"),dt=this.get("style"),mt=Object(u.k)({start:St,end:K});this.addShape(Lt,{type:"rect",id:this.getElementId("region"),name:"annotation-region",attrs:Object(H.a)({x:mt.x,y:mt.y,width:mt.width,height:mt.height},dt)})},Bt}(y.a),C=d,E=function(ut){Object(H.b)(Bt,ut);function Bt(){return ut!==null&&ut.apply(this,arguments)||this}return Bt.prototype.getDefaultCfg=function(){var Lt=ut.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},Lt),{name:"annotation",type:"image",locationType:"region",start:null,end:null,src:null,style:{}})},Bt.prototype.renderInner=function(Lt){this.renderImage(Lt)},Bt.prototype.getImageAttrs=function(){var Lt=this.get("start"),St=this.get("end"),K=this.get("style"),dt=Object(u.k)({start:Lt,end:St}),mt=this.get("src");return Object(H.a)({x:dt.x,y:dt.y,img:mt,width:dt.width,height:dt.height},K)},Bt.prototype.renderImage=function(Lt){this.addShape(Lt,{type:"image",id:this.getElementId("image"),name:"annotation-image",attrs:this.getImageAttrs()})},Bt}(y.a),A=E,f=function(ut){Object(H.b)(Bt,ut);function Bt(){return ut!==null&&ut.apply(this,arguments)||this}return Bt.prototype.getDefaultCfg=function(){var Lt=ut.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},Lt),{name:"annotation",type:"dataMarker",locationType:"point",x:0,y:0,point:{},line:{},text:{},direction:"upward",autoAdjust:!0,coordinateBBox:null,defaultCfg:{point:{display:!0,style:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2}},line:{display:!0,length:20,style:{stroke:b.a.lineColor,lineWidth:1}},text:{content:"",display:!0,style:{fill:b.a.textColor,opacity:.65,fontSize:12,textAlign:"start",fontFamily:b.a.fontFamily}}}})},Bt.prototype.renderInner=function(Lt){Object(i.get)(this.get("line"),"display")&&this.renderLine(Lt),Object(i.get)(this.get("text"),"display")&&this.renderText(Lt),Object(i.get)(this.get("point"),"display")&&this.renderPoint(Lt),this.get("autoAdjust")&&this.autoAdjust(Lt)},Bt.prototype.applyOffset=function(){this.moveElementTo(this.get("group"),{x:this.get("x")+this.get("offsetX"),y:this.get("y")+this.get("offsetY")})},Bt.prototype.renderPoint=function(Lt){var St=this.getShapeAttrs().point;this.addShape(Lt,{type:"circle",id:this.getElementId("point"),name:"annotation-point",attrs:St})},Bt.prototype.renderLine=function(Lt){var St=this.getShapeAttrs().line;this.addShape(Lt,{type:"path",id:this.getElementId("line"),name:"annotation-line",attrs:St})},Bt.prototype.renderText=function(Lt){var St=this.getShapeAttrs().text,K=St.x,dt=St.y,mt=St.text,bt=Object(H.c)(St,["x","y","text"]),wt=this.get("text"),J=wt.background,ct=wt.maxLength,it=wt.autoEllipsis,_=wt.isVertival,R=wt.ellipsisPosition,Q={x:K,y:dt,id:this.getElementId("text"),name:"annotation-text",content:mt,style:bt,background:J,maxLength:ct,autoEllipsis:it,isVertival:_,ellipsisPosition:R};p(Lt,Q)},Bt.prototype.autoAdjust=function(Lt){var St=this.get("direction"),K=this.get("x"),dt=this.get("y"),mt=Object(i.get)(this.get("line"),"length",0),bt=this.get("coordinateBBox"),wt=Lt.getBBox(),J=wt.minX,ct=wt.maxX,it=wt.minY,_=wt.maxY,R=Lt.findById(this.getElementId("text-group")),Q=Lt.findById(this.getElementId("text")),k=Lt.findById(this.getElementId("line"));if(!!bt){if(R){if(K+J<=bt.minX){var g=bt.minX-(K+J);Object(n.c)(R,R.attr("x")+g,R.attr("y"))}if(K+ct>=bt.maxX){var g=K+ct-bt.maxX;Object(n.c)(R,R.attr("x")-g,R.attr("y"))}}if(St==="upward"&&dt+it<=bt.minY||St!=="upward"&&dt+_>=bt.maxY){var O=void 0,F=void 0;St==="upward"&&dt+it<=bt.minY?(O="top",F=1):(O="bottom",F=-1),Q.attr("textBaseline",O),k&&k.attr("path",[["M",0,0],["L",0,mt*F]]),Object(n.c)(R,R.attr("x"),(mt+2)*F)}}},Bt.prototype.getShapeAttrs=function(){var Lt=Object(i.get)(this.get("line"),"display"),St=Object(i.get)(this.get("point"),"style",{}),K=Object(i.get)(this.get("line"),"style",{}),dt=Object(i.get)(this.get("text"),"style",{}),mt=this.get("direction"),bt=Lt?Object(i.get)(this.get("line"),"length",0):0,wt=mt==="upward"?-1:1;return{point:Object(H.a)({x:0,y:0},St),line:Object(H.a)({path:[["M",0,0],["L",0,bt*wt]]},K),text:Object(H.a)({x:0,y:(bt+2)*wt,text:Object(i.get)(this.get("text"),"content",""),textBaseline:mt==="upward"?"bottom":"top"},dt)}},Bt}(y.a),x=f,j=function(ut){Object(H.b)(Bt,ut);function Bt(){return ut!==null&&ut.apply(this,arguments)||this}return Bt.prototype.getDefaultCfg=function(){var Lt=ut.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},Lt),{name:"annotation",type:"dataRegion",locationType:"points",points:[],lineLength:0,region:{},text:{},defaultCfg:{region:{style:{lineWidth:0,fill:b.a.regionColor,opacity:.4}},text:{content:"",style:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:b.a.textColor,fontFamily:b.a.fontFamily}}}})},Bt.prototype.renderInner=function(Lt){var St=Object(i.get)(this.get("region"),"style",{}),K=Object(i.get)(this.get("text"),"style",{}),dt=this.get("lineLength")||0,mt=this.get("points");if(!!mt.length){var bt=Object(u.j)(mt),wt=[];wt.push(["M",mt[0].x,bt.minY-dt]),mt.forEach(function(ct){wt.push(["L",ct.x,ct.y])}),wt.push(["L",mt[mt.length-1].x,mt[mt.length-1].y-dt]),this.addShape(Lt,{type:"path",id:this.getElementId("region"),name:"annotation-region",attrs:Object(H.a)({path:wt},St)});var J=Object(H.a)({id:this.getElementId("text"),name:"annotation-text",x:(bt.minX+bt.maxX)/2,y:bt.minY-dt},this.get("text"));p(Lt,J)}},Bt}(y.a),P=j,W=function(ut){Object(H.b)(Bt,ut);function Bt(){return ut!==null&&ut.apply(this,arguments)||this}return Bt.prototype.getDefaultCfg=function(){var Lt=ut.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},Lt),{name:"annotation",type:"regionFilter",locationType:"region",start:null,end:null,color:null,shape:[]})},Bt.prototype.renderInner=function(Lt){var St=this,K=this.get("start"),dt=this.get("end"),mt=this.addGroup(Lt,{id:this.getElementId("region-filter"),capture:!1});Object(i.each)(this.get("shapes"),function(wt,J){var ct=wt.get("type"),it=Object(i.clone)(wt.attr());St.adjustShapeAttrs(it),St.addShape(mt,{id:St.getElementId("shape-"+ct+"-"+J),capture:!1,type:ct,attrs:it})});var bt=Object(u.k)({start:K,end:dt});mt.setClip({type:"rect",attrs:{x:bt.minX,y:bt.minY,width:bt.width,height:bt.height}})},Bt.prototype.adjustShapeAttrs=function(Lt){var St=this.get("color");Lt.fill&&(Lt.fill=Lt.fillStyle=St),Lt.stroke=Lt.strokeStyle=St},Bt}(y.a),X=W,$=function(ut){Object(H.b)(Bt,ut);function Bt(){return ut!==null&&ut.apply(this,arguments)||this}return Bt.prototype.getDefaultCfg=function(){var Lt=ut.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},Lt),{name:"annotation",type:"shape",draw:i.noop})},Bt.prototype.renderInner=function(Lt){var St=this.get("render");Object(i.isFunction)(St)&&St(Lt)},Bt}(y.a),ft=$,Z=w("fIp6"),lt=w("de35"),pt=function(ut){Object(H.b)(Bt,ut);function Bt(){return ut!==null&&ut.apply(this,arguments)||this}return Bt.prototype.getDefaultCfg=function(){var Lt=ut.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},Lt),{name:"annotation",type:"html",locationType:"point",x:0,y:0,containerTpl:'<div class="g2-html-annotation"></div>',alignX:"left",alignY:"top",html:"",zIndex:7})},Bt.prototype.render=function(){var Lt=this.getContainer(),St=this.get("html");Object(u.a)(Lt);var K=Object(i.isFunction)(St)?St(Lt):St;Object(i.isElement)(K)?Lt.appendChild(K):Object(i.isString)(K)&&Lt.appendChild(Object(Z.b)(K)),this.resetPosition()},Bt.prototype.resetPosition=function(){var Lt=this.getContainer(),St=this.getLocation(),K=St.x,dt=St.y,mt=this.get("alignX"),bt=this.get("alignY"),wt=this.get("offsetX"),J=this.get("offsetY"),ct=Object(Z.d)(Lt),it=Object(Z.c)(Lt),_={x:K,y:dt};mt==="middle"?_.x-=Math.round(ct/2):mt==="right"&&(_.x-=Math.round(ct)),bt==="middle"?_.y-=Math.round(it/2):bt==="bottom"&&(_.y-=Math.round(it)),wt&&(_.x+=wt),J&&(_.y+=J),Object(Z.e)(Lt,{position:"absolute",left:_.x+"px",top:_.y+"px",zIndex:this.get("zIndex")})},Bt}(lt.a),gt=pt},uFwe:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return i});var H=w("BsWD");function i(y,t){var n;if(typeof Symbol=="undefined"||y[Symbol.iterator]==null){if(Array.isArray(y)||(n=Object(H.a)(y))||t&&y&&typeof y.length=="number"){n&&(y=n);var u=0,p=function(){};return{s:p,n:function(){return u>=y.length?{done:!0}:{done:!1,value:y[u++]}},e:function(m){throw m},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var b=!0,c=!1,S;return{s:function(){n=y[Symbol.iterator]()},n:function(){var m=n.next();return b=m.done,m},e:function(m){c=!0,S=m},f:function(){try{!b&&n.return!=null&&n.return()}finally{if(c)throw S}}}}},"uw/B":function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return r});var H=w("mrSG"),i=w("zJSt"),y=w("YuPD"),t=w("sqD9"),n=w("iTfj"),u=w("w02o"),p=w("tKoa"),b=w("hJqF");function c(s){var d=s.chart,C=s.options,E=C.data,A=C.areaStyle,f=C.color,x=C.point,j=C.line,P=C.isPercent,W=C.xField,X=C.yField,$=C.tooltip,ft=C.seriesField,Z=Object(t.a)(E,X,W,X,P);d.data(Z);var lt=P?Object(H.a)({formatter:function(Bt){return{name:Bt[ft]||Bt[W],value:(Number(Bt[X])*100).toFixed(2)+"%"}}},$):$,pt=Object(y.b)({},s,{options:{area:{color:f,style:A},line:j&&Object(H.a)({color:f},j),point:x&&Object(H.a)({color:f},x),tooltip:lt,label:void 0}}),gt=Object(y.b)({},pt,{options:{tooltip:!1}});return Object(p.a)(pt),Object(p.d)(gt),Object(p.e)(gt),s}function S(s){var d=s.chart,C=s.options,E=C.label,A=C.yField,f=Object(y.c)(d,"area");if(!E)f.label(!1);else{var x=E.callback,j=Object(H.c)(E,["callback"]);f.label({fields:[A],callback:x,cfg:Object(H.a)({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},Object(y.o)(j))})}return s}function I(s){var d=s.chart,C=s.options,E=C.isStack,A=C.isPercent;return(A||E)&&Object(n.each)(d.geometries,function(f){f.adjust("stack")}),s}function m(s){return Object(y.e)(c,b.d,I,u.j,b.b,b.c,u.k,S,u.h,Object(u.b)(),u.c,u.a,u.e)(s)}var r=function(s){Object(H.b)(d,s);function d(){var C=s!==null&&s.apply(this,arguments)||this;return C.type="area",C}return d.prototype.getDefaultOptions=function(){return Object(y.b)({},s.prototype.getDefaultOptions.call(this),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left"}})},d.prototype.changeData=function(C){this.updateOption({data:C});var E=this.options,A=E.isPercent,f=E.xField,x=E.yField;this.chart.changeData(Object(t.a)(C,x,f,x,A))},d.prototype.getSchemaAdaptor=function(){return m},d}(i.a)},uzHj:function(qe,Pt){},v7Ed:function(qe,Pt,w){"use strict";w.r(Pt),w.d(Pt,"version",function(){return u});var H=w("aN7R");w.d(Pt,"Shape",function(){return H});var i=w("aFU3");for(var y in i)["default","Canvas","Group","Shape","version"].indexOf(y)<0&&function(p){w.d(Pt,p,function(){return i[p]})}(y);var t=w("wClo");w.d(Pt,"Canvas",function(){return t.a});var n=w("5z4m");w.d(Pt,"Group",function(){return n.a});var u="0.5.6"},vIgC:function(qe,Pt,w){"use strict";w.d(Pt,"b",function(){return y}),w.d(Pt,"c",function(){return n}),w.d(Pt,"a",function(){return u});var H=w("sstZ"),i=w("lt7v");function y(p,b,c){var S=1;if(Object(H.h)(p)&&(S=p.split(`
`).length),S>1){var I=t(b,c);return b*S+I*(S-1)}return b}function t(p,b){return b?b-p:p*.14}function n(p,b){var c=Object(i.a)(),S=0;if(Object(H.e)(p)||p==="")return S;if(c.save(),c.font=b,Object(H.h)(p)&&p.includes(`
`)){var I=p.split(`
`);Object(H.a)(I,function(m){var r=c.measureText(m).width;S<r&&(S=r)})}else S=c.measureText(p).width;return c.restore(),S}function u(p){var b=p.fontSize,c=p.fontFamily,S=p.fontWeight,I=p.fontStyle,m=p.fontVariant;return[I,m,S,b+"px",c].join(" ").trim()}},vk7d:function(qe,Pt){},w02o:function(qe,Pt,w){"use strict";w.d(Pt,"d",function(){return n}),w.d(Pt,"k",function(){return u}),w.d(Pt,"c",function(){return p}),w.d(Pt,"a",function(){return b}),w.d(Pt,"j",function(){return c}),w.d(Pt,"i",function(){return S}),w.d(Pt,"h",function(){return I}),w.d(Pt,"g",function(){return m}),w.d(Pt,"f",function(){return r}),w.d(Pt,"b",function(){return s}),w.d(Pt,"e",function(){return d});var H=w("mrSG"),i=w("iTfj"),y=w("n/J0"),t=w("YuPD");function n(C){var E=C.chart,A=C.options,f=A.legend,x=A.colorField,j=A.seriesField;return f===!1?E.legend(!1):(x||j)&&E.legend(x||j,f),C}function u(C){var E=C.chart,A=C.options,f=A.tooltip;return f!==void 0&&E.tooltip(f),C}function p(C){var E=C.chart,A=C.options,f=A.interactions;return Object(i.each)(f,function(x){x.enable===!1?E.removeInteraction(x.type):E.interaction(x.type,x.cfg||{})}),C}function b(C){var E=C.chart,A=C.options,f=A.animation;return typeof f=="boolean"?E.animate(f):E.animate(!0),Object(i.each)(E.geometries,function(x){x.animate(f)}),C}function c(C){var E=C.chart,A=C.options,f=A.theme;return f&&E.theme(f),C}function S(C){var E=C.chart,A=C.options,f=A.state;return f&&Object(i.each)(E.geometries,function(x){x.state(f)}),C}function I(C){var E=C.chart,A=C.options,f=A.slider;return E.option("slider",f),C}function m(C){var E=C.chart,A=C.options,f=A.scrollbar;return E.option("scrollbar",f),C}function r(C,E){return function(A){var f=A.chart,x=A.options,j={};return Object(i.each)(C,function(P,W){j[W]=Object(t.k)(P,y.a)}),j=Object(t.b)({},E,x.meta,j),f.scale(j),A}}function s(C){return function(E){var A=E.chart,f=E.options,x=A.getController("annotation");return Object(i.each)(Object(H.d)(f.annotations||[],C||[]),function(j){x.annotation(j)}),E}}function d(C){var E=C.chart,A=C.options,f=A.yAxis,x=A.limitInPlot,j=x;return Object(i.isObject)(f)&&Object(i.isNil)(x)&&(Object.values(Object(t.k)(f,["min","max","minLimit","maxLimit"])).some(function(P){return!Object(i.isNil)(P)})?j=!0:j=!1),E.limitInPlot=j,C}},wCAj:function(qe,Pt,w){"use strict";var H=w("U8pU"),i=w("rePB"),y=w("ODXe"),t=w("wx14"),n=w("q1tI"),u=w.n(n),p=w("TSYQ"),b=w.n(p),c=w("bT9E"),S=w("VTBJ"),I=w("KQm4"),m=w("x/xZ"),r=w("Gytx"),s=w.n(r),d=w("Kwbf"),C=w("t23M"),E=w("qx4F");function A(De){return null}var f=A;function x(De){return null}var j=x,P=w("Ff2n"),W=w("c+Xe"),X="RC_TABLE_KEY";function $(De){return De==null?[]:Array.isArray(De)?De:[De]}function ft(De,an){if(!an&&typeof an!="number")return De;for(var Mn=$(an),xn=De,bn=0;bn<Mn.length;bn+=1){if(!xn)return null;var Yn=Mn[bn];xn=xn[Yn]}return xn}function Z(De){var an=[],Mn={};return De.forEach(function(xn){for(var bn=xn||{},Yn=bn.key,Jn=bn.dataIndex,$n=Yn||$(Jn).join("-")||X;Mn[$n];)$n="".concat($n,"_next");Mn[$n]=!0,an.push($n)}),an}function lt(){var De={};function an(Yn,Jn){Jn&&Object.keys(Jn).forEach(function($n){var _n=Jn[$n];_n&&Object(H.a)(_n)==="object"?(Yn[$n]=Yn[$n]||{},an(Yn[$n],_n)):Yn[$n]=_n})}for(var Mn=arguments.length,xn=new Array(Mn),bn=0;bn<Mn;bn++)xn[bn]=arguments[bn];return xn.forEach(function(Yn){an(De,Yn)}),De}function pt(De){return De!=null}function gt(De){return De&&Object(H.a)(De)==="object"&&!Array.isArray(De)&&!n.isValidElement(De)}function ut(De){return typeof De=="string"?!0:Object(W.c)(De)}function Bt(De,an){var Mn,xn=De.prefixCls,bn=De.className,Yn=De.record,Jn=De.index,$n=De.dataIndex,_n=De.render,fr=De.children,sr=De.component,vr=sr===void 0?"td":sr,pr=De.colSpan,Vr=De.rowSpan,Ur=De.fixLeft,Ii=De.fixRight,br=De.firstFixLeft,hi=De.lastFixLeft,Wr=De.firstFixRight,ji=De.lastFixRight,zi=De.appendNode,Ui=De.additionalProps,ra=Ui===void 0?{}:Ui,da=De.ellipsis,Di=De.align,kr=De.rowType,er=De.isSticky,Wi="".concat(xn,"-cell"),_a,Ei;if(fr)Ei=fr;else{var Yi=ft(Yn,$n);if(Ei=Yi,_n){var ea=_n(Yi,Yn,Jn);gt(ea)?(Ei=ea.children,_a=ea.props):Ei=ea}}Object(H.a)(Ei)==="object"&&!Array.isArray(Ei)&&!n.isValidElement(Ei)&&(Ei=null),da&&(hi||Wr)&&(Ei=n.createElement("span",{className:"".concat(Wi,"-content")},Ei));var no=_a||{},$i=no.colSpan,Wa=no.rowSpan,Ta=no.style,bo=no.className,Na=Object(P.a)(no,["colSpan","rowSpan","style","className"]),Fa=$i!==void 0?$i:pr,ro=Wa!==void 0?Wa:Vr;if(Fa===0||ro===0)return null;var Ea={},Eo=typeof Ur=="number",Ua=typeof Ii=="number";Eo&&(Ea.position="sticky",Ea.left=Ur),Ua&&(Ea.position="sticky",Ea.right=Ii);var Va={};Di&&(Va.textAlign=Di);var ja,to=da===!0?{showTitle:!0}:da;to&&(to.showTitle||kr==="header")&&(typeof Ei=="string"||typeof Ei=="number"?ja=Ei.toString():n.isValidElement(Ei)&&typeof Ei.props.children=="string"&&(ja=Ei.props.children));var fo=Object(S.a)(Object(S.a)(Object(S.a)({title:ja},Na),ra),{},{colSpan:Fa&&Fa!==1?Fa:null,rowSpan:ro&&ro!==1?ro:null,className:b()(Wi,bn,(Mn={},Object(i.a)(Mn,"".concat(Wi,"-fix-left"),Eo),Object(i.a)(Mn,"".concat(Wi,"-fix-left-first"),br),Object(i.a)(Mn,"".concat(Wi,"-fix-left-last"),hi),Object(i.a)(Mn,"".concat(Wi,"-fix-right"),Ua),Object(i.a)(Mn,"".concat(Wi,"-fix-right-first"),Wr),Object(i.a)(Mn,"".concat(Wi,"-fix-right-last"),ji),Object(i.a)(Mn,"".concat(Wi,"-ellipsis"),da),Object(i.a)(Mn,"".concat(Wi,"-with-append"),zi),Object(i.a)(Mn,"".concat(Wi,"-fix-sticky"),(Eo||Ua)&&er),Mn),ra.className,bo),style:Object(S.a)(Object(S.a)(Object(S.a)(Object(S.a)({},ra.style),Va),Ea),Ta),ref:ut(vr)?an:null});return n.createElement(vr,fo,zi,Ei)}var Lt=n.forwardRef(Bt);Lt.displayName="Cell";var St=n.memo(Lt,function(De,an){return an.shouldCellUpdate?!an.shouldCellUpdate(an.record,De.record):!1}),K=St,dt=n.createContext(null),mt=dt;function bt(De,an,Mn,xn,bn){var Yn=Mn[De]||{},Jn=Mn[an]||{},$n,_n;Yn.fixed==="left"?$n=xn.left[De]:Jn.fixed==="right"&&(_n=xn.right[an]);var fr=!1,sr=!1,vr=!1,pr=!1,Vr=Mn[an+1],Ur=Mn[De-1];if(bn==="rtl"){if($n!==void 0){var Ii=Ur&&Ur.fixed==="left";pr=!Ii}else if(_n!==void 0){var br=Vr&&Vr.fixed==="right";vr=!br}}else if($n!==void 0){var hi=Vr&&Vr.fixed==="left";fr=!hi}else if(_n!==void 0){var Wr=Ur&&Ur.fixed==="right";sr=!Wr}return{fixLeft:$n,fixRight:_n,lastFixLeft:fr,firstFixRight:sr,lastFixRight:vr,firstFixLeft:pr,isSticky:xn.isSticky}}function wt(De){var an=De.cells,Mn=De.stickyOffsets,xn=De.flattenColumns,bn=De.rowComponent,Yn=De.cellComponent,Jn=De.onHeaderRow,$n=De.index,_n=n.useContext(mt),fr=_n.prefixCls,sr=_n.direction,vr;Jn&&(vr=Jn(an.map(function(Vr){return Vr.column}),$n));var pr=Z(an.map(function(Vr){return Vr.column}));return n.createElement(bn,vr,an.map(function(Vr,Ur){var Ii=Vr.column,br=bt(Vr.colStart,Vr.colEnd,xn,Mn,sr),hi;return Ii&&Ii.onHeaderCell&&(hi=Vr.column.onHeaderCell(Ii)),n.createElement(K,Object(t.a)({},Vr,{ellipsis:Ii.ellipsis,align:Ii.align,component:Yn,prefixCls:fr,key:pr[Ur]},br,{additionalProps:hi,rowType:"header"}))}))}wt.displayName="HeaderRow";var J=wt;function ct(De){var an=[];function Mn(Jn,$n){var _n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;an[_n]=an[_n]||[];var fr=$n,sr=Jn.filter(Boolean).map(function(vr){var pr={key:vr.key,className:vr.className||"",children:vr.title,column:vr,colStart:fr},Vr=1,Ur=vr.children;return Ur&&Ur.length>0&&(Vr=Mn(Ur,fr,_n+1).reduce(function(Ii,br){return Ii+br},0),pr.hasSubColumns=!0),"colSpan"in vr&&(Vr=vr.colSpan),"rowSpan"in vr&&(pr.rowSpan=vr.rowSpan),pr.colSpan=Vr,pr.colEnd=pr.colStart+Vr-1,an[_n].push(pr),fr+=Vr,Vr});return sr}Mn(De,0);for(var xn=an.length,bn=function($n){an[$n].forEach(function(_n){!("rowSpan"in _n)&&!_n.hasSubColumns&&(_n.rowSpan=xn-$n)})},Yn=0;Yn<xn;Yn+=1)bn(Yn);return an}function it(De){var an=De.stickyOffsets,Mn=De.columns,xn=De.flattenColumns,bn=De.onHeaderRow,Yn=n.useContext(mt),Jn=Yn.prefixCls,$n=Yn.getComponent,_n=n.useMemo(function(){return ct(Mn)},[Mn]),fr=$n(["header","wrapper"],"thead"),sr=$n(["header","row"],"tr"),vr=$n(["header","cell"],"th");return n.createElement(fr,{className:"".concat(Jn,"-thead")},_n.map(function(pr,Vr){var Ur=n.createElement(J,{key:Vr,flattenColumns:xn,cells:pr,stickyOffsets:an,rowComponent:sr,cellComponent:vr,onHeaderRow:bn,index:Vr});return Ur}))}var _=it,R="RC_TABLE_INTERNAL_COL_DEFINE";function Q(De){var an=De.expandable,Mn=Object(P.a)(De,["expandable"]);return"expandable"in De?Object(S.a)(Object(S.a)({},Mn),an):Mn}function k(De){return Object.keys(De).reduce(function(an,Mn){return(Mn.substr(0,5)==="data-"||Mn.substr(0,5)==="aria-")&&(an[Mn]=De[Mn]),an},{})}function g(De){for(var an=De.colWidths,Mn=De.columns,xn=De.columCount,bn=[],Yn=xn||Mn.length,Jn=!1,$n=Yn-1;$n>=0;$n-=1){var _n=an[$n],fr=Mn&&Mn[$n],sr=fr&&fr[R];(_n||sr||Jn)&&(bn.unshift(n.createElement("col",Object(t.a)({key:$n,style:{width:_n,minWidth:_n}},sr))),Jn=!0)}return n.createElement("colgroup",null,bn)}var O=g;function F(De,an){return Object(n.useMemo)(function(){for(var Mn=[],xn=0;xn<an;xn+=1){var bn=De[xn];if(bn!==void 0)Mn[xn]=bn;else return null}return Mn},[De.join("_"),an])}var V=n.forwardRef(function(De,an){var Mn=De.noData,xn=De.columns,bn=De.flattenColumns,Yn=De.colWidths,Jn=De.columCount,$n=De.stickyOffsets,_n=De.direction,fr=De.fixHeader,sr=De.offsetHeader,vr=De.stickyClassName,pr=De.onScroll,Vr=Object(P.a)(De,["noData","columns","flattenColumns","colWidths","columCount","stickyOffsets","direction","fixHeader","offsetHeader","stickyClassName","onScroll"]),Ur=n.useContext(mt),Ii=Ur.prefixCls,br=Ur.scrollbarSize,hi=Ur.isSticky,Wr=hi&&!fr?0:br,ji=n.useRef(null),zi=n.useCallback(function(Wi){Object(W.b)(an,Wi),Object(W.b)(ji,Wi)},[]);n.useEffect(function(){var Wi;function _a(Ei){var Yi=Ei.currentTarget,ea=Ei.deltaX;ea&&(pr({currentTarget:Yi,scrollLeft:Yi.scrollLeft+ea}),Ei.preventDefault())}return(Wi=ji.current)===null||Wi===void 0||Wi.addEventListener("wheel",_a),function(){var Ei;(Ei=ji.current)===null||Ei===void 0||Ei.removeEventListener("wheel",_a)}},[]);var Ui=bn[bn.length-1],ra={fixed:Ui?Ui.fixed:null,onHeaderCell:function(){return{className:"".concat(Ii,"-cell-scrollbar")}}},da=Object(n.useMemo)(function(){return Wr?[].concat(Object(I.a)(xn),[ra]):xn},[Wr,xn]),Di=Object(n.useMemo)(function(){return Wr?[].concat(Object(I.a)(bn),[ra]):bn},[Wr,bn]),kr=Object(n.useMemo)(function(){var Wi=$n.right,_a=$n.left;return Object(S.a)(Object(S.a)({},$n),{},{left:_n==="rtl"?[].concat(Object(I.a)(_a.map(function(Ei){return Ei+Wr})),[0]):_a,right:_n==="rtl"?Wi:[].concat(Object(I.a)(Wi.map(function(Ei){return Ei+Wr})),[0]),isSticky:hi})},[Wr,$n,hi]),er=F(Yn,Jn);return n.createElement("div",{style:Object(S.a)({overflow:"hidden"},hi?{top:sr}:{}),ref:zi,className:b()("".concat(Ii,"-header"),Object(i.a)({},vr,!!vr))},n.createElement("table",{style:{tableLayout:"fixed",visibility:Mn||er?null:"hidden"}},n.createElement(O,{colWidths:er?[].concat(Object(I.a)(er),[Wr]):[],columCount:Jn+1,columns:Di}),n.createElement(_,Object(t.a)({},Vr,{stickyOffsets:kr,columns:da,flattenColumns:Di}))))});V.displayName="FixedHeader";var rt=V,ot=n.createContext(null),st=ot;function Mt(De){var an=De.prefixCls,Mn=De.children,xn=De.component,bn=De.cellComponent,Yn=De.fixHeader,Jn=De.fixColumn,$n=De.horizonScroll,_n=De.className,fr=De.expanded,sr=De.componentWidth,vr=De.colSpan,pr=n.useContext(mt),Vr=pr.scrollbarSize;return n.useMemo(function(){var Ur=Mn;return Jn&&(Ur=n.createElement("div",{style:{width:sr-(Yn?Vr:0),position:"sticky",left:0,overflow:"hidden"},className:"".concat(an,"-expanded-row-fixed")},Ur)),n.createElement(xn,{className:_n,style:{display:fr?null:"none"}},n.createElement(K,{component:bn,prefixCls:an,colSpan:vr},Ur))},[Mn,xn,Yn,$n,_n,fr,sr,vr,Vr])}var yt=Mt;function xt(De){var an=De.className,Mn=De.style,xn=De.record,bn=De.index,Yn=De.rowKey,Jn=De.getRowKey,$n=De.rowExpandable,_n=De.expandedKeys,fr=De.onRow,sr=De.indent,vr=sr===void 0?0:sr,pr=De.rowComponent,Vr=De.cellComponent,Ur=De.childrenColumnName,Ii=n.useContext(mt),br=Ii.prefixCls,hi=Ii.fixedInfoList,Wr=n.useContext(st),ji=Wr.fixHeader,zi=Wr.fixColumn,Ui=Wr.horizonScroll,ra=Wr.componentWidth,da=Wr.flattenColumns,Di=Wr.expandableType,kr=Wr.expandRowByClick,er=Wr.onTriggerExpand,Wi=Wr.rowClassName,_a=Wr.expandedRowClassName,Ei=Wr.indentSize,Yi=Wr.expandIcon,ea=Wr.expandedRowRender,no=Wr.expandIconColumnIndex,$i=n.useState(!1),Wa=Object(y.a)($i,2),Ta=Wa[0],bo=Wa[1],Na=_n&&_n.has(De.recordKey);n.useEffect(function(){Na&&bo(!0)},[Na]);var Fa=Di==="row"&&(!$n||$n(xn)),ro=Di==="nest",Ea=Ur&&xn&&xn[Ur],Eo=Fa||ro,Ua;fr&&(Ua=fr(xn,bn));var Va=function(So){if(kr&&Eo&&er(xn,So),Ua&&Ua.onClick){for(var No,Gn=arguments.length,se=new Array(Gn>1?Gn-1:0),Ia=1;Ia<Gn;Ia++)se[Ia-1]=arguments[Ia];(No=Ua).onClick.apply(No,[So].concat(se))}},ja;typeof Wi=="string"?ja=Wi:typeof Wi=="function"&&(ja=Wi(xn,bn,vr));var to=Z(da),fo=n.createElement(pr,Object(t.a)({},Ua,{"data-row-key":Yn,className:b()(an,"".concat(br,"-row"),"".concat(br,"-row-level-").concat(vr),ja,Ua&&Ua.className),style:Object(S.a)(Object(S.a)({},Mn),Ua?Ua.style:null),onClick:Va}),da.map(function(Ya,So){var No=Ya.render,Gn=Ya.dataIndex,se=Ya.className,Ia=to[So],ho=hi[So],Xa;So===(no||0)&&ro&&(Xa=n.createElement(n.Fragment,null,n.createElement("span",{style:{paddingLeft:"".concat(Ei*vr,"px")},className:"".concat(br,"-row-indent indent-level-").concat(vr)}),Yi({prefixCls:br,expanded:Na,expandable:Ea,record:xn,onExpand:er})));var so;return Ya.onCell&&(so=Ya.onCell(xn,bn)),n.createElement(K,Object(t.a)({className:se,ellipsis:Ya.ellipsis,align:Ya.align,component:Vr,prefixCls:br,key:Ia,record:xn,index:bn,dataIndex:Gn,render:No,shouldCellUpdate:Ya.shouldCellUpdate},ho,{appendNode:Xa,additionalProps:so}))})),wa;if(Fa&&(Ta||Na)){var gr=ea(xn,bn,vr+1,Na),Xo=_a&&_a(xn,bn,vr);wa=n.createElement(yt,{expanded:Na,className:b()("".concat(br,"-expanded-row"),"".concat(br,"-expanded-row-level-").concat(vr+1),Xo),prefixCls:br,fixHeader:ji,fixColumn:zi,horizonScroll:Ui,component:pr,componentWidth:ra,cellComponent:Vr,colSpan:da.length},gr)}var va;return Ea&&Na&&(va=(xn[Ur]||[]).map(function(Ya,So){var No=Jn(Ya,So);return n.createElement(xt,Object(t.a)({},De,{key:No,rowKey:No,record:Ya,recordKey:No,index:So,indent:vr+1}))})),n.createElement(n.Fragment,null,fo,wa,va)}xt.displayName="BodyRow";var Ot=xt,jt=n.createContext(null),Dt=jt;function zt(De){var an=De.columnKey,Mn=De.onColumnResize,xn=n.useRef();return n.useEffect(function(){xn.current&&Mn(an,xn.current.offsetWidth)},[]),n.createElement(C.a,{onResize:function(Yn){var Jn=Yn.offsetWidth;Mn(an,Jn)}},n.createElement("td",{ref:xn,style:{padding:0,border:0,height:0}},n.createElement("div",{style:{height:0,overflow:"hidden"}},"\xA0")))}function Tt(De){var an=De.data,Mn=De.getRowKey,xn=De.measureColumnWidth,bn=De.expandedKeys,Yn=De.onRow,Jn=De.rowExpandable,$n=De.emptyNode,_n=De.childrenColumnName,fr=n.useContext(Dt),sr=fr.onColumnResize,vr=n.useContext(mt),pr=vr.prefixCls,Vr=vr.getComponent,Ur=n.useContext(st),Ii=Ur.fixHeader,br=Ur.horizonScroll,hi=Ur.flattenColumns,Wr=Ur.componentWidth;return n.useMemo(function(){var ji=Vr(["body","wrapper"],"tbody"),zi=Vr(["body","row"],"tr"),Ui=Vr(["body","cell"],"td"),ra;an.length?ra=an.map(function(Di,kr){var er=Mn(Di,kr);return n.createElement(Ot,{key:er,rowKey:er,record:Di,recordKey:er,index:kr,rowComponent:zi,cellComponent:Ui,expandedKeys:bn,onRow:Yn,getRowKey:Mn,rowExpandable:Jn,childrenColumnName:_n})}):ra=n.createElement(yt,{expanded:!0,className:"".concat(pr,"-placeholder"),prefixCls:pr,fixHeader:Ii,fixColumn:br,horizonScroll:br,component:zi,componentWidth:Wr,cellComponent:Ui,colSpan:hi.length},$n);var da=Z(hi);return n.createElement(ji,{className:"".concat(pr,"-tbody")},xn&&n.createElement("tr",{"aria-hidden":"true",className:"".concat(pr,"-measure-row"),style:{height:0,fontSize:0}},da.map(function(Di){return n.createElement(zt,{key:Di,columnKey:Di,onColumnResize:sr})})),ra)},[an,pr,Yn,xn,bn,Mn,Vr,Wr,$n,hi])}var Wt=n.memo(Tt);Wt.displayName="Body";var Ht=Wt,re=w("Zm9Q");function pe(De){return Object(re.a)(De).filter(function(an){return n.isValidElement(an)}).map(function(an){var Mn=an.key,xn=an.props,bn=xn.children,Yn=Object(P.a)(xn,["children"]),Jn=Object(S.a)({key:Mn},Yn);return bn&&(Jn.children=pe(bn)),Jn})}function me(De){return De.reduce(function(an,Mn){var xn=Mn.fixed,bn=xn===!0?"left":xn,Yn=Mn.children;return Yn&&Yn.length>0?[].concat(Object(I.a)(an),Object(I.a)(me(Yn).map(function(Jn){return Object(S.a)({fixed:bn},Jn)}))):[].concat(Object(I.a)(an),[Object(S.a)(Object(S.a)({},Mn),{},{fixed:bn})])},[])}function Se(De){for(var an=!0,Mn=0;Mn<De.length;Mn+=1){var xn=De[Mn];if(an&&xn.fixed!=="left")an=!1;else if(!an&&xn.fixed==="left"){Object(d.a)(!1,"Index ".concat(Mn-1," of `columns` missing `fixed='left'` prop."));break}}for(var bn=!0,Yn=De.length-1;Yn>=0;Yn-=1){var Jn=De[Yn];if(bn&&Jn.fixed!=="right")bn=!1;else if(!bn&&Jn.fixed==="right"){Object(d.a)(!1,"Index ".concat(Yn+1," of `columns` missing `fixed='right'` prop."));break}}}function Le(De){return De.map(function(an){var Mn=an.fixed,xn=Object(P.a)(an,["fixed"]),bn=Mn;return Mn==="left"?bn="right":Mn==="right"&&(bn="left"),Object(S.a)({fixed:bn},xn)})}function Je(De,an){var Mn=De.prefixCls,xn=De.columns,bn=De.children,Yn=De.expandable,Jn=De.expandedKeys,$n=De.getRowKey,_n=De.onTriggerExpand,fr=De.expandIcon,sr=De.rowExpandable,vr=De.expandIconColumnIndex,pr=De.direction,Vr=De.expandRowByClick,Ur=De.columnWidth,Ii=n.useMemo(function(){return xn||pe(bn)},[xn,bn]),br=n.useMemo(function(){if(Yn){var ji,zi=vr||0,Ui=Ii[zi],ra=(ji={},Object(i.a)(ji,R,{className:"".concat(Mn,"-expand-icon-col")}),Object(i.a)(ji,"title",""),Object(i.a)(ji,"fixed",Ui?Ui.fixed:null),Object(i.a)(ji,"className","".concat(Mn,"-row-expand-icon-cell")),Object(i.a)(ji,"width",Ur),Object(i.a)(ji,"render",function(kr,er,Wi){var _a=$n(er,Wi),Ei=Jn.has(_a),Yi=sr?sr(er):!0,ea=fr({prefixCls:Mn,expanded:Ei,expandable:Yi,record:er,onExpand:_n});return Vr?n.createElement("span",{onClick:function($i){return $i.stopPropagation()}},ea):ea}),ji),da=Ii.slice();return zi>=0&&da.splice(zi,0,ra),da}return Ii},[Yn,Ii,$n,Jn,fr,pr]),hi=n.useMemo(function(){var ji=br;return an&&(ji=an(ji)),ji.length||(ji=[{render:function(){return null}}]),ji},[an,br,pr]),Wr=n.useMemo(function(){return pr==="rtl"?Le(me(hi)):me(hi)},[hi,pr]);return[hi,Wr]}var On=Je;function gn(De){var an=Object(n.useRef)(De),Mn=Object(n.useState)({}),xn=Object(y.a)(Mn,2),bn=xn[1],Yn=Object(n.useRef)(null),Jn=Object(n.useRef)([]);function $n(_n){Jn.current.push(_n);var fr=Promise.resolve();Yn.current=fr,fr.then(function(){if(Yn.current===fr){var sr=Jn.current,vr=an.current;Jn.current=[],sr.forEach(function(pr){an.current=pr(an.current)}),Yn.current=null,vr!==an.current&&bn({})}})}return Object(n.useEffect)(function(){return function(){Yn.current=null}},[]),[an.current,$n]}function Wn(De){var an=Object(n.useRef)(De||null),Mn=Object(n.useRef)();function xn(){window.clearTimeout(Mn.current)}function bn(Jn){an.current=Jn,xn(),Mn.current=window.setTimeout(function(){an.current=null,Mn.current=void 0},100)}function Yn(){return an.current}return Object(n.useEffect)(function(){return xn},[]),[bn,Yn]}function kn(De,an,Mn){var xn=Object(n.useMemo)(function(){for(var bn=[],Yn=[],Jn=0,$n=0,_n=0;_n<an;_n+=1)if(Mn==="rtl"){Yn[_n]=$n,$n+=De[_n]||0;var fr=an-_n-1;bn[fr]=Jn,Jn+=De[fr]||0}else{bn[_n]=Jn,Jn+=De[_n]||0;var sr=an-_n-1;Yn[sr]=$n,$n+=De[sr]||0}return{left:bn,right:Yn}},[De,an,Mn]);return xn}var Vn=kn;function Dn(De){var an=De.className,Mn=De.children;return n.createElement("div",{className:an},Mn)}var Nn=Dn;function Qn(De){var an=De.className,Mn=De.index,xn=De.children,bn=De.colSpan,Yn=De.rowSpan,Jn=De.align,$n=n.useContext(mt),_n=$n.prefixCls,fr=$n.fixedInfoList,sr=fr[Mn];return n.createElement(K,Object(t.a)({className:an,index:Mn,component:"td",prefixCls:_n,record:null,dataIndex:null,align:Jn,render:function(){return{children:xn,props:{colSpan:bn,rowSpan:Yn}}}},sr))}function ir(De){return n.createElement("tr",De)}function hr(De){var an=De.children,Mn=n.useContext(mt),xn=Mn.prefixCls;return n.createElement("tfoot",{className:"".concat(xn,"-summary")},an)}var Sr=hr,mr={Cell:Qn,Row:ir};function dr(De){var an,Mn=De.prefixCls,xn=De.record,bn=De.onExpand,Yn=De.expanded,Jn=De.expandable,$n="".concat(Mn,"-row-expand-icon");if(!Jn)return n.createElement("span",{className:b()($n,"".concat(Mn,"-row-spaced"))});var _n=function(sr){bn(xn,sr),sr.stopPropagation()};return n.createElement("span",{className:b()($n,(an={},Object(i.a)(an,"".concat(Mn,"-row-expanded"),Yn),Object(i.a)(an,"".concat(Mn,"-row-collapsed"),!Yn),an)),onClick:_n})}function Br(De,an,Mn){var xn=[];function bn(Yn){(Yn||[]).forEach(function(Jn,$n){xn.push(an(Jn,$n)),bn(Jn[Mn])})}return bn(De),xn}var ii=w("zT1h"),mi=w("y0+3"),Pi=function(an,Mn){var xn,bn,Yn=an.scrollBodyRef,Jn=an.onScroll,$n=an.offsetScroll,_n=an.container,fr=n.useContext(mt),sr=fr.prefixCls,vr=((xn=Yn.current)===null||xn===void 0?void 0:xn.scrollWidth)||0,pr=((bn=Yn.current)===null||bn===void 0?void 0:bn.clientWidth)||0,Vr=vr&&pr*(pr/vr),Ur=n.useRef(),Ii=gn({scrollLeft:0,isHiddenScrollBar:!1}),br=Object(y.a)(Ii,2),hi=br[0],Wr=br[1],ji=n.useRef({delta:0,x:0}),zi=n.useState(!1),Ui=Object(y.a)(zi,2),ra=Ui[0],da=Ui[1],Di=function(){da(!1)},kr=function(Yi){Yi.persist(),ji.current.delta=Yi.pageX-hi.scrollLeft,ji.current.x=0,da(!0),Yi.preventDefault()},er=function(Yi){var ea,no=Yi||((ea=window)===null||ea===void 0?void 0:ea.event),$i=no.buttons;if(!ra||$i===0){ra&&da(!1);return}var Wa=ji.current.x+Yi.pageX-ji.current.x-ji.current.delta;Wa<=0&&(Wa=0),Wa+Vr>=pr&&(Wa=pr-Vr),Jn({scrollLeft:Wa/pr*(vr+2)}),ji.current.x=Yi.pageX},Wi=function(){var Yi=Object(mi.b)(Yn.current).top,ea=Yi+Yn.current.offsetHeight,no=_n===window?document.documentElement.scrollTop+window.innerHeight:Object(mi.b)(_n).top+_n.clientHeight;ea-Object(E.a)()<=no||Yi>=no-$n?Wr(function($i){return Object(S.a)(Object(S.a)({},$i),{},{isHiddenScrollBar:!0})}):Wr(function($i){return Object(S.a)(Object(S.a)({},$i),{},{isHiddenScrollBar:!1})})},_a=function(Yi){Wr(function(ea){return Object(S.a)(Object(S.a)({},ea),{},{scrollLeft:Yi/vr*pr||0})})};return n.useImperativeHandle(Mn,function(){return{setScrollLeft:_a}}),n.useEffect(function(){var Ei=Object(ii.a)(document.body,"mouseup",Di,!1),Yi=Object(ii.a)(document.body,"mousemove",er,!1);return Wi(),function(){Ei.remove(),Yi.remove()}},[Vr,ra]),n.useEffect(function(){var Ei=Object(ii.a)(_n,"scroll",Wi,!1),Yi=Object(ii.a)(window,"resize",Wi,!1);return function(){Ei.remove(),Yi.remove()}},[_n]),n.useEffect(function(){hi.isHiddenScrollBar||Wr(function(Ei){var Yi,ea;return Object(S.a)(Object(S.a)({},Ei),{},{scrollLeft:Yn.current.scrollLeft/((Yi=Yn.current)===null||Yi===void 0?void 0:Yi.scrollWidth)*((ea=Yn.current)===null||ea===void 0?void 0:ea.clientWidth)})})},[hi.isHiddenScrollBar]),vr<=pr||!Vr||hi.isHiddenScrollBar?null:n.createElement("div",{style:{height:Object(E.a)(),width:pr,bottom:$n},className:"".concat(sr,"-sticky-scroll")},n.createElement("div",{onMouseDown:kr,ref:Ur,className:b()("".concat(sr,"-sticky-scroll-bar"),Object(i.a)({},"".concat(sr,"-sticky-scroll-bar-active"),ra)),style:{width:"".concat(Vr,"px"),transform:"translate3d(".concat(hi.scrollLeft,"px, 0, 0)")}}))},sa=n.forwardRef(Pi),Pa=w("MNnm"),Mi=Object(Pa.a)()?window:null;function Ki(De,an){var Mn=Object(H.a)(De)==="object"?De:{},xn=Mn.offsetHeader,bn=xn===void 0?0:xn,Yn=Mn.offsetScroll,Jn=Yn===void 0?0:Yn,$n=Mn.getContainer,_n=$n===void 0?function(){return Mi}:$n,fr=_n()||Mi;return n.useMemo(function(){var sr=!!De;return{isSticky:sr,stickyClassName:sr?"".concat(an,"-sticky-header"):"",offsetHeader:bn,offsetScroll:Jn,container:fr}},[Jn,bn,an,fr])}var fa=[],oa={},pa="rc-table-internal-hook",La=n.memo(function(De){var an=De.children;return an},function(De,an){return s()(De.props,an.props)?De.pingLeft!==an.pingLeft||De.pingRight!==an.pingRight:!1});function Yr(De){var an,Mn=De.prefixCls,xn=De.className,bn=De.rowClassName,Yn=De.style,Jn=De.data,$n=De.rowKey,_n=De.scroll,fr=De.tableLayout,sr=De.direction,vr=De.title,pr=De.footer,Vr=De.summary,Ur=De.id,Ii=De.showHeader,br=De.components,hi=De.emptyText,Wr=De.onRow,ji=De.onHeaderRow,zi=De.internalHooks,Ui=De.transformColumns,ra=De.internalRefs,da=De.sticky,Di=Jn||fa,kr=!!Di.length,er=n.useState(0),Wi=Object(y.a)(er,2),_a=Wi[0],Ei=Wi[1];n.useEffect(function(){Ei(Object(E.a)())});var Yi=n.useMemo(function(){return lt(br,{})},[br]),ea=n.useCallback(function(ba,qa){return ft(Yi,ba)||qa},[Yi]),no=n.useMemo(function(){return typeof $n=="function"?$n:function(ba){var qa=ba&&ba[$n];return qa}},[$n]),$i=Q(De),Wa=$i.expandIcon,Ta=$i.expandedRowKeys,bo=$i.defaultExpandedRowKeys,Na=$i.defaultExpandAllRows,Fa=$i.expandedRowRender,ro=$i.onExpand,Ea=$i.onExpandedRowsChange,Eo=$i.expandRowByClick,Ua=$i.rowExpandable,Va=$i.expandIconColumnIndex,ja=$i.expandedRowClassName,to=$i.childrenColumnName,fo=$i.indentSize,wa=Wa||dr,gr=to||"children",Xo=n.useMemo(function(){return Fa?"row":De.expandable&&zi===pa&&De.expandable.__PARENT_RENDER_ICON__||Di.some(function(ba){return ba&&Object(H.a)(ba)==="object"&&ba[gr]})?"nest":!1},[!!Fa,Di]),va=n.useState(function(){return bo||(Na?Br(Di,no,gr):[])}),Ya=Object(y.a)(va,2),So=Ya[0],No=Ya[1],Gn=n.useMemo(function(){return new Set(Ta||So||[])},[Ta,So]),se=n.useCallback(function(ba){var qa=no(ba,Di.indexOf(ba)),Po,Qo=Gn.has(qa);Qo?(Gn.delete(qa),Po=Object(I.a)(Gn)):Po=[].concat(Object(I.a)(Gn),[qa]),No(Po),ro&&ro(!Qo,ba),Ea&&Ea(Po)},[no,Gn,Di,ro,Ea]),Ia=n.useState(0),ho=Object(y.a)(Ia,2),Xa=ho[0],so=ho[1],Lo=On(Object(S.a)(Object(S.a)(Object(S.a)({},De),$i),{},{expandable:!!Fa,expandedKeys:Gn,getRowKey:no,onTriggerExpand:se,expandIcon:wa,expandIconColumnIndex:Va,direction:sr}),zi===pa?Ui:null),zo=Object(y.a)(Lo,2),Jo=zo[0],uo=zo[1],Rn=n.useMemo(function(){return{columns:Jo,flattenColumns:uo}},[Jo,uo]),qo=n.useRef(),wo=n.useRef(),Ho=n.useRef(),ss=n.useState(!1),ts=Object(y.a)(ss,2),mo=ts[0],ia=ts[1],Bo=n.useState(!1),Io=Object(y.a)(Bo,2),Qa=Io[0],yo=Io[1],Co=gn(new Map),Do=Object(y.a)(Co,2),Da=Do[0],_o=Do[1],Ko=Z(uo),is=Ko.map(function(ba){return Da.get(ba)}),kt=n.useMemo(function(){return is},[is.join("_")]),v=Vn(kt,uo.length,sr),l=_n&&pt(_n.y),D=_n&&pt(_n.x),Y=D&&uo.some(function(ba){var qa=ba.fixed;return qa}),ht=n.useRef(),At=Ki(da,Mn),Ut=At.isSticky,Yt=At.offsetHeader,qt=At.offsetScroll,oe=At.stickyClassName,Te=At.container,Ge,Ue,We;l&&(Ue={overflowY:"scroll",maxHeight:_n.y}),D&&(Ge={overflowX:"auto"},l||(Ue={overflowY:"hidden"}),We={width:_n.x===!0?"auto":_n.x,minWidth:"100%"});var vn=n.useCallback(function(ba,qa){Object(m.a)(qo.current)&&_o(function(Po){if(Po.get(ba)!==qa){var Qo=new Map(Po);return Qo.set(ba,qa),Qo}return Po})},[]),Tn=Wn(null),Ln=Object(y.a)(Tn,2),Un=Ln[0],Hn=Ln[1];function xr(ba,qa){!qa||(typeof qa=="function"?qa(ba):qa.scrollLeft!==ba&&(qa.scrollLeft=ba))}var Or=function(qa){var Po=qa.currentTarget,Qo=qa.scrollLeft,Nu=sr==="rtl",ds=typeof Qo=="number"?Qo:Po.scrollLeft,Lu=Po||oa;if(!Hn()||Hn()===Lu){var $s;Un(Lu),xr(ds,wo.current),xr(ds,Ho.current),xr(ds,($s=ht.current)===null||$s===void 0?void 0:$s.setScrollLeft)}if(Po){var _s=Po.scrollWidth,hu=Po.clientWidth;Nu?(ia(-ds<_s-hu),yo(-ds>0)):(ia(ds>0),yo(ds<_s-hu))}},Rr=function(){Ho.current&&Or({currentTarget:Ho.current})},yi=function(qa){var Po=qa.width;Rr(),so(qo.current?qo.current.offsetWidth:Po)};n.useEffect(function(){return Rr},[]),n.useEffect(function(){D&&Rr()},[D]),n.useEffect(function(){zi===pa&&ra&&(ra.body.current=Ho.current)});var Xi=ea(["table"],"table"),Zr=n.useMemo(function(){return fr||(Y?_n.x==="max-content"?"auto":"fixed":l||Ut||uo.some(function(ba){var qa=ba.ellipsis;return qa})?"fixed":"auto")},[l,Y,uo,fr,Ut]),ki,Ba={colWidths:kt,columCount:uo.length,stickyOffsets:v,onHeaderRow:ji,fixHeader:l},Ha=n.useMemo(function(){return kr?null:typeof hi=="function"?hi():hi},[kr,hi]),Ka=n.createElement(Ht,{data:Di,measureColumnWidth:l||D||Ut,expandedKeys:Gn,rowExpandable:Ua,getRowKey:no,onRow:Wr,emptyNode:Ha,childrenColumnName:gr}),Ja=n.createElement(O,{colWidths:uo.map(function(ba){var qa=ba.width;return qa}),columns:uo}),ya=Vr&&n.createElement(Sr,null,Vr(Di)),Mo=ea(["body"]);if(l||Ut){var jo;typeof Mo=="function"?(jo=Mo(Di,{scrollbarSize:_a,ref:Ho,onScroll:Or}),Ba.colWidths=uo.map(function(ba,qa){var Po=ba.width,Qo=qa===Jo.length-1?Po-_a:Po;return typeof Qo=="number"&&!Number.isNaN(Qo)?Qo:(Object(d.a)(!1,"When use `components.body` with render props. Each column should have a fixed `width` value."),0)})):jo=n.createElement("div",{style:Object(S.a)(Object(S.a)({},Ge),Ue),onScroll:Or,ref:Ho,className:b()("".concat(Mn,"-body"))},n.createElement(Xi,{style:Object(S.a)(Object(S.a)({},We),{},{tableLayout:Zr})},Ja,Ka,ya)),ki=n.createElement(n.Fragment,null,Ii!==!1&&n.createElement(rt,Object(t.a)({noData:!Di.length},Ba,Rn,{direction:sr,offsetHeader:Yt,stickyClassName:oe,ref:wo,onScroll:Or})),jo,Ut&&n.createElement(sa,{ref:ht,offsetScroll:qt,scrollBodyRef:Ho,onScroll:Or,container:Te}))}else ki=n.createElement("div",{style:Object(S.a)(Object(S.a)({},Ge),Ue),className:b()("".concat(Mn,"-content")),onScroll:Or,ref:Ho},n.createElement(Xi,{style:Object(S.a)(Object(S.a)({},We),{},{tableLayout:Zr})},Ja,Ii!==!1&&n.createElement(_,Object(t.a)({},Ba,Rn)),Ka,ya));var Ro=k(De),Za=n.createElement("div",Object(t.a)({className:b()(Mn,xn,(an={},Object(i.a)(an,"".concat(Mn,"-rtl"),sr==="rtl"),Object(i.a)(an,"".concat(Mn,"-ping-left"),mo),Object(i.a)(an,"".concat(Mn,"-ping-right"),Qa),Object(i.a)(an,"".concat(Mn,"-layout-fixed"),fr==="fixed"),Object(i.a)(an,"".concat(Mn,"-fixed-header"),l),Object(i.a)(an,"".concat(Mn,"-fixed-column"),Y),Object(i.a)(an,"".concat(Mn,"-scroll-horizontal"),D),Object(i.a)(an,"".concat(Mn,"-has-fix-left"),uo[0]&&uo[0].fixed),Object(i.a)(an,"".concat(Mn,"-has-fix-right"),uo[uo.length-1]&&uo[uo.length-1].fixed==="right"),an)),style:Yn,id:Ur,ref:qo},Ro),n.createElement(La,{pingLeft:mo,pingRight:Qa,props:Object(S.a)(Object(S.a)({},De),{},{stickyOffsets:v,mergedExpandedKeys:Gn})},vr&&n.createElement(Nn,{className:"".concat(Mn,"-title")},vr(Di)),n.createElement("div",{className:"".concat(Mn,"-container")},ki),pr&&n.createElement(Nn,{className:"".concat(Mn,"-footer")},pr(Di))));D&&(Za=n.createElement(C.a,{onResize:yi},Za));var Ao=n.useMemo(function(){return{prefixCls:Mn,getComponent:ea,scrollbarSize:_a,direction:sr,fixedInfoList:uo.map(function(ba,qa){return bt(qa,qa,uo,v,sr)}),isSticky:Ut}},[Mn,ea,_a,sr,uo,v,sr,Ut]),$a=n.useMemo(function(){return Object(S.a)(Object(S.a)({},Rn),{},{tableLayout:Zr,rowClassName:bn,expandedRowClassName:ja,componentWidth:Xa,fixHeader:l,fixColumn:Y,horizonScroll:D,expandIcon:wa,expandableType:Xo,expandRowByClick:Eo,expandedRowRender:Fa,onTriggerExpand:se,expandIconColumnIndex:Va,indentSize:fo})},[Rn,Zr,bn,ja,Xa,l,Y,D,wa,Xo,Eo,Fa,se,Va,fo]),ns=n.useMemo(function(){return{onColumnResize:vn}},[vn]);return n.createElement(mt.Provider,{value:Ao},n.createElement(st.Provider,{value:$a},n.createElement(Dt.Provider,{value:ns},Za)))}Yr.Column=j,Yr.ColumnGroup=f,Yr.Summary=mr,Yr.defaultProps={rowKey:"key",prefixCls:"rc-table",emptyText:function(){return"No Data"}};var Sa=Yr,Pr=Sa,si=w("W9HT"),ti=w("1OyB"),$r=w("vuIU"),ui=w("Ji7U"),li=w("LK+K"),xi=function(an){var Mn,xn="".concat(an.rootPrefixCls,"-item"),bn=b()(xn,"".concat(xn,"-").concat(an.page),(Mn={},Object(i.a)(Mn,"".concat(xn,"-active"),an.active),Object(i.a)(Mn,an.className,!!an.className),Object(i.a)(Mn,"".concat(xn,"-disabled"),!an.page),Mn)),Yn=function(){an.onClick(an.page)},Jn=function(_n){an.onKeyPress(_n,an.onClick,an.page)};return u.a.createElement("li",{title:an.showTitle?an.page:null,className:bn,onClick:Yn,onKeyPress:Jn,tabIndex:"0"},an.itemRender(an.page,"page",u.a.createElement("a",{rel:"nofollow"},an.page)))},Ci=xi,di={ZERO:48,NINE:57,NUMPAD_ZERO:96,NUMPAD_NINE:105,BACKSPACE:8,DELETE:46,ENTER:13,ARROW_UP:38,ARROW_DOWN:40},Ti=function(De){Object(ui.a)(Mn,De);var an=Object(li.a)(Mn);function Mn(){var xn;Object(ti.a)(this,Mn);for(var bn=arguments.length,Yn=new Array(bn),Jn=0;Jn<bn;Jn++)Yn[Jn]=arguments[Jn];return xn=an.call.apply(an,[this].concat(Yn)),xn.state={goInputText:""},xn.buildOptionText=function($n){return"".concat($n," ").concat(xn.props.locale.items_per_page)},xn.changeSize=function($n){xn.props.changeSize(Number($n))},xn.handleChange=function($n){xn.setState({goInputText:$n.target.value})},xn.handleBlur=function($n){var _n=xn.props,fr=_n.goButton,sr=_n.quickGo,vr=_n.rootPrefixCls,pr=xn.state.goInputText;fr||pr===""||$n.relatedTarget&&($n.relatedTarget.className.indexOf("".concat(vr,"-prev"))>=0||$n.relatedTarget.className.indexOf("".concat(vr,"-next"))>=0)||(xn.setState({goInputText:""}),sr(xn.getValidValue()))},xn.go=function($n){var _n=xn.state.goInputText;_n!==""&&($n.keyCode===di.ENTER||$n.type==="click")&&(xn.setState({goInputText:""}),xn.props.quickGo(xn.getValidValue()))},xn}return Object($r.a)(Mn,[{key:"getValidValue",value:function(){var bn=this.state.goInputText;return!bn||isNaN(bn)?void 0:Number(bn)}},{key:"getPageSizeOptions",value:function(){var bn=this.props,Yn=bn.pageSize,Jn=bn.pageSizeOptions;return Jn.some(function($n){return $n.toString()===Yn.toString()})?Jn:Jn.concat([Yn.toString()]).sort(function($n,_n){var fr=isNaN(Number($n))?0:Number($n),sr=isNaN(Number(_n))?0:Number(_n);return fr-sr})}},{key:"render",value:function(){var bn=this,Yn=this.props,Jn=Yn.pageSize,$n=Yn.locale,_n=Yn.rootPrefixCls,fr=Yn.changeSize,sr=Yn.quickGo,vr=Yn.goButton,pr=Yn.selectComponentClass,Vr=Yn.buildOptionText,Ur=Yn.selectPrefixCls,Ii=Yn.disabled,br=this.state.goInputText,hi="".concat(_n,"-options"),Wr=pr,ji=null,zi=null,Ui=null;if(!fr&&!sr)return null;var ra=this.getPageSizeOptions();if(fr&&Wr){var da=ra.map(function(Di,kr){return u.a.createElement(Wr.Option,{key:kr,value:Di.toString()},(Vr||bn.buildOptionText)(Di))});ji=u.a.createElement(Wr,{disabled:Ii,prefixCls:Ur,showSearch:!1,className:"".concat(hi,"-size-changer"),optionLabelProp:"children",dropdownMatchSelectWidth:!1,value:(Jn||ra[0]).toString(),onChange:this.changeSize,getPopupContainer:function(kr){return kr.parentNode}},da)}return sr&&(vr&&(Ui=typeof vr=="boolean"?u.a.createElement("button",{type:"button",onClick:this.go,onKeyUp:this.go,disabled:Ii,className:"".concat(hi,"-quick-jumper-button")},$n.jump_to_confirm):u.a.createElement("span",{onClick:this.go,onKeyUp:this.go},vr)),zi=u.a.createElement("div",{className:"".concat(hi,"-quick-jumper")},$n.jump_to,u.a.createElement("input",{disabled:Ii,type:"text",value:br,onChange:this.handleChange,onKeyUp:this.go,onBlur:this.handleBlur}),$n.page,Ui)),u.a.createElement("li",{className:"".concat(hi)},ji,zi)}}]),Mn}(u.a.Component);Ti.defaultProps={pageSizeOptions:["10","20","50","100"]};var pi=Ti,Ni=w("N2Kk");function Bi(){}function Fi(De){return typeof De=="number"&&isFinite(De)&&Math.floor(De)===De}function ma(De,an,Mn){return Mn}function ua(De,an,Mn){var xn=typeof De=="undefined"?an.pageSize:De;return Math.floor((Mn.total-1)/xn)+1}var Ra=function(De){Object(ui.a)(Mn,De);var an=Object(li.a)(Mn);function Mn(xn){var bn;Object(ti.a)(this,Mn),bn=an.call(this,xn),bn.getJumpPrevPage=function(){return Math.max(1,bn.state.current-(bn.props.showLessItems?3:5))},bn.getJumpNextPage=function(){return Math.min(ua(void 0,bn.state,bn.props),bn.state.current+(bn.props.showLessItems?3:5))},bn.getItemIcon=function(fr,sr){var vr=bn.props.prefixCls,pr=fr||u.a.createElement("button",{type:"button","aria-label":sr,className:"".concat(vr,"-item-link")});return typeof fr=="function"&&(pr=u.a.createElement(fr,Object(S.a)({},bn.props))),pr},bn.savePaginationNode=function(fr){bn.paginationNode=fr},bn.isValid=function(fr){return Fi(fr)&&fr!==bn.state.current},bn.shouldDisplayQuickJumper=function(){var fr=bn.props,sr=fr.showQuickJumper,vr=fr.pageSize,pr=fr.total;return pr<=vr?!1:sr},bn.handleKeyDown=function(fr){(fr.keyCode===di.ARROW_UP||fr.keyCode===di.ARROW_DOWN)&&fr.preventDefault()},bn.handleKeyUp=function(fr){var sr=bn.getValidValue(fr),vr=bn.state.currentInputValue;sr!==vr&&bn.setState({currentInputValue:sr}),fr.keyCode===di.ENTER?bn.handleChange(sr):fr.keyCode===di.ARROW_UP?bn.handleChange(sr-1):fr.keyCode===di.ARROW_DOWN&&bn.handleChange(sr+1)},bn.changePageSize=function(fr){var sr=bn.state.current,vr=ua(fr,bn.state,bn.props);sr=sr>vr?vr:sr,vr===0&&(sr=bn.state.current),typeof fr=="number"&&("pageSize"in bn.props||bn.setState({pageSize:fr}),"current"in bn.props||bn.setState({current:sr,currentInputValue:sr})),bn.props.onShowSizeChange(sr,fr),"onChange"in bn.props&&bn.props.onChange&&bn.props.onChange(sr,fr)},bn.handleChange=function(fr){var sr=bn.props.disabled,vr=fr;if(bn.isValid(vr)&&!sr){var pr=ua(void 0,bn.state,bn.props);vr>pr?vr=pr:vr<1&&(vr=1),"current"in bn.props||bn.setState({current:vr,currentInputValue:vr});var Vr=bn.state.pageSize;return bn.props.onChange(vr,Vr),vr}return bn.state.current},bn.prev=function(){bn.hasPrev()&&bn.handleChange(bn.state.current-1)},bn.next=function(){bn.hasNext()&&bn.handleChange(bn.state.current+1)},bn.jumpPrev=function(){bn.handleChange(bn.getJumpPrevPage())},bn.jumpNext=function(){bn.handleChange(bn.getJumpNextPage())},bn.hasPrev=function(){return bn.state.current>1},bn.hasNext=function(){return bn.state.current<ua(void 0,bn.state,bn.props)},bn.runIfEnter=function(fr,sr){if(fr.key==="Enter"||fr.charCode===13){for(var vr=arguments.length,pr=new Array(vr>2?vr-2:0),Vr=2;Vr<vr;Vr++)pr[Vr-2]=arguments[Vr];sr.apply(void 0,pr)}},bn.runIfEnterPrev=function(fr){bn.runIfEnter(fr,bn.prev)},bn.runIfEnterNext=function(fr){bn.runIfEnter(fr,bn.next)},bn.runIfEnterJumpPrev=function(fr){bn.runIfEnter(fr,bn.jumpPrev)},bn.runIfEnterJumpNext=function(fr){bn.runIfEnter(fr,bn.jumpNext)},bn.handleGoTO=function(fr){(fr.keyCode===di.ENTER||fr.type==="click")&&bn.handleChange(bn.state.currentInputValue)};var Yn=xn.onChange!==Bi,Jn="current"in xn;Jn&&!Yn&&console.warn("Warning: You provided a `current` prop to a Pagination component without an `onChange` handler. This will render a read-only component.");var $n=xn.defaultCurrent;"current"in xn&&($n=xn.current);var _n=xn.defaultPageSize;return"pageSize"in xn&&(_n=xn.pageSize),$n=Math.min($n,ua(_n,void 0,xn)),bn.state={current:$n,currentInputValue:$n,pageSize:_n},bn}return Object($r.a)(Mn,[{key:"componentDidUpdate",value:function(bn,Yn){var Jn=this.props.prefixCls;if(Yn.current!==this.state.current&&this.paginationNode){var $n=this.paginationNode.querySelector(".".concat(Jn,"-item-").concat(Yn.current));$n&&document.activeElement===$n&&$n.blur()}}},{key:"getValidValue",value:function(bn){var Yn=bn.target.value,Jn=ua(void 0,this.state,this.props),$n=this.state.currentInputValue,_n;return Yn===""?_n=Yn:isNaN(Number(Yn))?_n=$n:Yn>=Jn?_n=Jn:_n=Number(Yn),_n}},{key:"getShowSizeChanger",value:function(){var bn=this.props,Yn=bn.showSizeChanger,Jn=bn.total,$n=bn.totalBoundaryShowSizeChanger;return typeof Yn!="undefined"?Yn:Jn>$n}},{key:"renderPrev",value:function(bn){var Yn=this.props,Jn=Yn.prevIcon,$n=Yn.itemRender,_n=$n(bn,"prev",this.getItemIcon(Jn,"prev page")),fr=!this.hasPrev();return Object(n.isValidElement)(_n)?Object(n.cloneElement)(_n,{disabled:fr}):_n}},{key:"renderNext",value:function(bn){var Yn=this.props,Jn=Yn.nextIcon,$n=Yn.itemRender,_n=$n(bn,"next",this.getItemIcon(Jn,"next page")),fr=!this.hasNext();return Object(n.isValidElement)(_n)?Object(n.cloneElement)(_n,{disabled:fr}):_n}},{key:"render",value:function(){var bn=this,Yn=this.props,Jn=Yn.prefixCls,$n=Yn.className,_n=Yn.style,fr=Yn.disabled,sr=Yn.hideOnSinglePage,vr=Yn.total,pr=Yn.locale,Vr=Yn.showQuickJumper,Ur=Yn.showLessItems,Ii=Yn.showTitle,br=Yn.showTotal,hi=Yn.simple,Wr=Yn.itemRender,ji=Yn.showPrevNextJumpers,zi=Yn.jumpPrevIcon,Ui=Yn.jumpNextIcon,ra=Yn.selectComponentClass,da=Yn.selectPrefixCls,Di=Yn.pageSizeOptions,kr=this.state,er=kr.current,Wi=kr.pageSize,_a=kr.currentInputValue;if(sr===!0&&vr<=Wi)return null;var Ei=ua(void 0,this.state,this.props),Yi=[],ea=null,no=null,$i=null,Wa=null,Ta=null,bo=Vr&&Vr.goButton,Na=Ur?1:2,Fa=er-1>0?er-1:0,ro=er+1<Ei?er+1:Ei,Ea=Object.keys(this.props).reduce(function(No,Gn){return(Gn.substr(0,5)==="data-"||Gn.substr(0,5)==="aria-"||Gn==="role")&&(No[Gn]=bn.props[Gn]),No},{});if(hi)return bo&&(typeof bo=="boolean"?Ta=u.a.createElement("button",{type:"button",onClick:this.handleGoTO,onKeyUp:this.handleGoTO},pr.jump_to_confirm):Ta=u.a.createElement("span",{onClick:this.handleGoTO,onKeyUp:this.handleGoTO},bo),Ta=u.a.createElement("li",{title:Ii?"".concat(pr.jump_to).concat(er,"/").concat(Ei):null,className:"".concat(Jn,"-simple-pager")},Ta)),u.a.createElement("ul",Object(t.a)({className:b()(Jn,"".concat(Jn,"-simple"),Object(i.a)({},"".concat(Jn,"-disabled"),fr),$n),style:_n,ref:this.savePaginationNode},Ea),u.a.createElement("li",{title:Ii?pr.prev_page:null,onClick:this.prev,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterPrev,className:b()("".concat(Jn,"-prev"),Object(i.a)({},"".concat(Jn,"-disabled"),!this.hasPrev())),"aria-disabled":!this.hasPrev()},this.renderPrev(Fa)),u.a.createElement("li",{title:Ii?"".concat(er,"/").concat(Ei):null,className:"".concat(Jn,"-simple-pager")},u.a.createElement("input",{type:"text",value:_a,disabled:fr,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onChange:this.handleKeyUp,size:"3"}),u.a.createElement("span",{className:"".concat(Jn,"-slash")},"/"),Ei),u.a.createElement("li",{title:Ii?pr.next_page:null,onClick:this.next,tabIndex:this.hasPrev()?0:null,onKeyPress:this.runIfEnterNext,className:b()("".concat(Jn,"-next"),Object(i.a)({},"".concat(Jn,"-disabled"),!this.hasNext())),"aria-disabled":!this.hasNext()},this.renderNext(ro)),Ta);if(Ei<=3+Na*2){var Eo={locale:pr,rootPrefixCls:Jn,onClick:this.handleChange,onKeyPress:this.runIfEnter,showTitle:Ii,itemRender:Wr};Ei||Yi.push(u.a.createElement(Ci,Object(t.a)({},Eo,{key:"noPager",page:Ei,className:"".concat(Jn,"-disabled")})));for(var Ua=1;Ua<=Ei;Ua+=1){var Va=er===Ua;Yi.push(u.a.createElement(Ci,Object(t.a)({},Eo,{key:Ua,page:Ua,active:Va})))}}else{var ja=Ur?pr.prev_3:pr.prev_5,to=Ur?pr.next_3:pr.next_5;ji&&(ea=u.a.createElement("li",{title:Ii?ja:null,key:"prev",onClick:this.jumpPrev,tabIndex:"0",onKeyPress:this.runIfEnterJumpPrev,className:b()("".concat(Jn,"-jump-prev"),Object(i.a)({},"".concat(Jn,"-jump-prev-custom-icon"),!!zi))},Wr(this.getJumpPrevPage(),"jump-prev",this.getItemIcon(zi,"prev page"))),no=u.a.createElement("li",{title:Ii?to:null,key:"next",tabIndex:"0",onClick:this.jumpNext,onKeyPress:this.runIfEnterJumpNext,className:b()("".concat(Jn,"-jump-next"),Object(i.a)({},"".concat(Jn,"-jump-next-custom-icon"),!!Ui))},Wr(this.getJumpNextPage(),"jump-next",this.getItemIcon(Ui,"next page")))),Wa=u.a.createElement(Ci,{locale:pr,last:!0,rootPrefixCls:Jn,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:Ei,page:Ei,active:!1,showTitle:Ii,itemRender:Wr}),$i=u.a.createElement(Ci,{locale:pr,rootPrefixCls:Jn,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:1,page:1,active:!1,showTitle:Ii,itemRender:Wr});var fo=Math.max(1,er-Na),wa=Math.min(er+Na,Ei);er-1<=Na&&(wa=1+Na*2),Ei-er<=Na&&(fo=Ei-Na*2);for(var gr=fo;gr<=wa;gr+=1){var Xo=er===gr;Yi.push(u.a.createElement(Ci,{locale:pr,rootPrefixCls:Jn,onClick:this.handleChange,onKeyPress:this.runIfEnter,key:gr,page:gr,active:Xo,showTitle:Ii,itemRender:Wr}))}er-1>=Na*2&&er!==1+2&&(Yi[0]=Object(n.cloneElement)(Yi[0],{className:"".concat(Jn,"-item-after-jump-prev")}),Yi.unshift(ea)),Ei-er>=Na*2&&er!==Ei-2&&(Yi[Yi.length-1]=Object(n.cloneElement)(Yi[Yi.length-1],{className:"".concat(Jn,"-item-before-jump-next")}),Yi.push(no)),fo!==1&&Yi.unshift($i),wa!==Ei&&Yi.push(Wa)}var va=null;br&&(va=u.a.createElement("li",{className:"".concat(Jn,"-total-text")},br(vr,[vr===0?0:(er-1)*Wi+1,er*Wi>vr?vr:er*Wi])));var Ya=!this.hasPrev()||!Ei,So=!this.hasNext()||!Ei;return u.a.createElement("ul",Object(t.a)({className:b()(Jn,$n,Object(i.a)({},"".concat(Jn,"-disabled"),fr)),style:_n,unselectable:"unselectable",ref:this.savePaginationNode},Ea),va,u.a.createElement("li",{title:Ii?pr.prev_page:null,onClick:this.prev,tabIndex:Ya?null:0,onKeyPress:this.runIfEnterPrev,className:b()("".concat(Jn,"-prev"),Object(i.a)({},"".concat(Jn,"-disabled"),Ya)),"aria-disabled":Ya},this.renderPrev(Fa)),Yi,u.a.createElement("li",{title:Ii?pr.next_page:null,onClick:this.next,tabIndex:So?null:0,onKeyPress:this.runIfEnterNext,className:b()("".concat(Jn,"-next"),Object(i.a)({},"".concat(Jn,"-disabled"),So)),"aria-disabled":So},this.renderNext(ro)),u.a.createElement(pi,{disabled:fr,locale:pr,rootPrefixCls:Jn,selectComponentClass:ra,selectPrefixCls:da,changeSize:this.getShowSizeChanger()?this.changePageSize:null,current:er,pageSize:Wi,pageSizeOptions:Di,quickGo:this.shouldDisplayQuickJumper()?this.handleChange:null,goButton:bo}))}}],[{key:"getDerivedStateFromProps",value:function(bn,Yn){var Jn={};if("current"in bn&&(Jn.current=bn.current,bn.current!==Yn.current&&(Jn.currentInputValue=Jn.current)),"pageSize"in bn&&bn.pageSize!==Yn.pageSize){var $n=Yn.current,_n=ua(bn.pageSize,Yn,bn);$n=$n>_n?_n:$n,"current"in bn||(Jn.current=$n,Jn.currentInputValue=$n),Jn.pageSize=bn.pageSize}return Jn}}]),Mn}(u.a.Component);Ra.defaultProps={defaultCurrent:1,total:0,defaultPageSize:10,onChange:Bi,className:"",selectPrefixCls:"rc-select",prefixCls:"rc-pagination",selectComponentClass:null,hideOnSinglePage:!1,showPrevNextJumpers:!0,showQuickJumper:!1,showLessItems:!1,showTitle:!0,onShowSizeChange:Bi,locale:Ni.a,style:{},itemRender:ma,totalBoundaryShowSizeChanger:50};var xa=Ra,Ma=w("H4fg"),Qi=w("5bA4"),ka=w("UESt"),vo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"},za=vo,Ga=w("6VBw"),eo=function(an,Mn){return n.createElement(Ga.a,Object.assign({},an,{ref:Mn,icon:za}))};eo.displayName="DoubleLeftOutlined";var ae=n.forwardRef(eo),Kt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"},te=Kt,Oe=function(an,Mn){return n.createElement(Ga.a,Object.assign({},an,{ref:Mn,icon:te}))};Oe.displayName="DoubleRightOutlined";var Ze=n.forwardRef(Oe),An=w("2fM7"),qn=function(an){return n.createElement(An.a,Object(t.a)({size:"small"},an))};qn.Option=An.a.Option;var rr=qn,tn=w("YMnH"),sn=w("H84U"),un=w("5OYt"),ur=function(De,an){var Mn={};for(var xn in De)Object.prototype.hasOwnProperty.call(De,xn)&&an.indexOf(xn)<0&&(Mn[xn]=De[xn]);if(De!=null&&typeof Object.getOwnPropertySymbols=="function")for(var bn=0,xn=Object.getOwnPropertySymbols(De);bn<xn.length;bn++)an.indexOf(xn[bn])<0&&Object.prototype.propertyIsEnumerable.call(De,xn[bn])&&(Mn[xn[bn]]=De[xn[bn]]);return Mn},jr=function(an){var Mn=an.prefixCls,xn=an.selectPrefixCls,bn=an.className,Yn=an.size,Jn=an.locale,$n=ur(an,["prefixCls","selectPrefixCls","className","size","locale"]),_n=Object(un.a)(),fr=_n.xs,sr=n.useContext(sn.b),vr=sr.getPrefixCls,pr=sr.direction,Vr=vr("pagination",Mn),Ur=function(){var hi=n.createElement("span",{className:"".concat(Vr,"-item-ellipsis")},"\u2022\u2022\u2022"),Wr=n.createElement("button",{className:"".concat(Vr,"-item-link"),type:"button",tabIndex:-1},n.createElement(Qi.a,null)),ji=n.createElement("button",{className:"".concat(Vr,"-item-link"),type:"button",tabIndex:-1},n.createElement(ka.a,null)),zi=n.createElement("a",{className:"".concat(Vr,"-item-link")},n.createElement("div",{className:"".concat(Vr,"-item-container")},n.createElement(ae,{className:"".concat(Vr,"-item-link-icon")}),hi)),Ui=n.createElement("a",{className:"".concat(Vr,"-item-link")},n.createElement("div",{className:"".concat(Vr,"-item-container")},n.createElement(Ze,{className:"".concat(Vr,"-item-link-icon")}),hi));if(pr==="rtl"){var ra=[ji,Wr];Wr=ra[0],ji=ra[1];var da=[Ui,zi];zi=da[0],Ui=da[1]}return{prevIcon:Wr,nextIcon:ji,jumpPrevIcon:zi,jumpNextIcon:Ui}},Ii=function(hi){var Wr=Object(t.a)(Object(t.a)({},hi),Jn),ji=Yn==="small"||!!(fr&&!Yn&&$n.responsive),zi=vr("select",xn),Ui=b()(Object(i.a)({mini:ji},"".concat(Vr,"-rtl"),pr==="rtl"),bn);return n.createElement(xa,Object(t.a)({},$n,{prefixCls:Vr,selectPrefixCls:zi},Ur(),{className:Ui,selectComponentClass:ji?rr:An.a,locale:Wr}))};return n.createElement(tn.a,{componentName:"Pagination",defaultLocale:Ma.a},Ii)},wr=jr,yr=wr,ni=function(De,an){var Mn={};for(var xn in De)Object.prototype.hasOwnProperty.call(De,xn)&&an.indexOf(xn)<0&&(Mn[xn]=De[xn]);if(De!=null&&typeof Object.getOwnPropertySymbols=="function")for(var bn=0,xn=Object.getOwnPropertySymbols(De);bn<xn.length;bn++)an.indexOf(xn[bn])<0&&Object.prototype.propertyIsEnumerable.call(De,xn[bn])&&(Mn[xn[bn]]=De[xn[bn]]);return Mn},_r=10;function Fr(De,an){var Mn={current:an.current,pageSize:an.pageSize},xn=De&&Object(H.a)(De)==="object"?De:{};return Object.keys(xn).forEach(function(bn){var Yn=an[bn];typeof Yn!="function"&&(Mn[bn]=Yn)}),Mn}function Lr(){for(var De={},an=arguments.length,Mn=new Array(an),xn=0;xn<an;xn++)Mn[xn]=arguments[xn];return Mn.forEach(function(bn){bn&&Object.keys(bn).forEach(function(Yn){var Jn=bn[Yn];Jn!==void 0&&(De[Yn]=Jn)})}),De}function Gr(De,an,Mn){var xn=an&&Object(H.a)(an)==="object"?an:{},bn=xn.total,Yn=bn===void 0?0:bn,Jn=ni(xn,["total"]),$n=Object(n.useState)(function(){return{current:"defaultCurrent"in Jn?Jn.defaultCurrent:1,pageSize:"defaultPageSize"in Jn?Jn.defaultPageSize:_r}}),_n=Object(y.a)($n,2),fr=_n[0],sr=_n[1],vr=Lr(fr,Jn,{total:Yn>0?Yn:De});if(!Yn){var pr=Math.ceil(De/vr.pageSize);pr<vr.current&&(vr.current=1)}var Vr=function(){var br=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,hi=arguments.length>1?arguments[1]:void 0;sr({current:br,pageSize:hi||vr.pageSize})},Ur=function(br,hi){var Wr=vr==null?void 0:vr.pageSize;hi&&hi!==Wr&&(br=1),an&&an.onChange&&an.onChange(br,hi),Vr(br,hi),Mn(br,hi||Wr)};return an===!1?[{},function(){}]:[Object(t.a)(Object(t.a)({},vr),{onChange:Ur}),Vr]}function Hr(De,an,Mn){var xn=n.useRef({});function bn(Yn){if(!xn.current||xn.current.data!==De||xn.current.childrenColumnName!==an||xn.current.getRowKey!==Mn){var Jn=function _n(fr){fr.forEach(function(sr,vr){var pr=Mn(sr,vr);$n.set(pr,sr),sr&&Object(H.a)(sr)==="object"&&an in sr&&_n(sr[an]||[])})},$n=new Map;Jn(De),xn.current={data:De,childrenColumnName:an,kvMap:$n,getRowKey:Mn}}return xn.current.kvMap.get(Yn)}return[bn]}var ei=w("T5bk"),Kr=w("8Skl"),Qr=w("815F"),Oi=w("NvD2"),Ri=w("OZM5"),Si=w("6cGi"),Gi=w("kaz8"),ca=w("jsC+"),ha=w("BvKs"),na=w("9yH6"),Zi=w("uaoM"),ve="SELECT_ALL",U="SELECT_INVERT",G="SELECT_NONE";function nt(De){return De&&De.fixed}function vt(De,an){var Mn=[];return(De||[]).forEach(function(xn){Mn.push(xn),xn&&Object(H.a)(xn)==="object"&&an in xn&&(Mn=[].concat(Object(I.a)(Mn),Object(I.a)(vt(xn[an],an))))}),Mn}function Gt(De,an){var Mn=De||{},xn=Mn.preserveSelectedRowKeys,bn=Mn.selectedRowKeys,Yn=Mn.getCheckboxProps,Jn=Mn.onChange,$n=Mn.onSelect,_n=Mn.onSelectAll,fr=Mn.onSelectInvert,sr=Mn.onSelectNone,vr=Mn.onSelectMultiple,pr=Mn.columnWidth,Vr=Mn.type,Ur=Mn.selections,Ii=Mn.fixed,br=Mn.renderCell,hi=Mn.hideSelectAll,Wr=Mn.checkStrictly,ji=Wr===void 0?!0:Wr,zi=an.prefixCls,Ui=an.data,ra=an.pageData,da=an.getRecordByKey,Di=an.getRowKey,kr=an.expandType,er=an.childrenColumnName,Wi=an.locale,_a=an.expandIconColumnIndex,Ei=an.getPopupContainer,Yi=n.useRef(new Map),ea=Object(Si.a)(bn||[],{value:bn}),no=Object(y.a)(ea,2),$i=no[0],Wa=no[1],Ta=Object(n.useMemo)(function(){return ji?{keyEntities:null}:Object(Qr.a)(Ui,{externalGetKey:Di,childrenPropName:er})},[Ui,Di,ji,er]),bo=Ta.keyEntities,Na=Object(n.useMemo)(function(){return vt(ra,er)},[ra,er]),Fa=Object(n.useMemo)(function(){var Gn=new Map;return Na.forEach(function(se,Ia){var ho=Di(se,Ia),Xa=(Yn?Yn(se):null)||{};Gn.set(ho,Xa)}),Gn},[Na,Di,Yn]),ro=Object(n.useCallback)(function(Gn){var se;return!!((se=Fa.get(Di(Gn)))===null||se===void 0?void 0:se.disabled)},[Fa,Di]),Ea=Object(n.useMemo)(function(){if(ji)return[$i||[],[]];var Gn=Object(Oi.a)($i,!0,bo,ro),se=Gn.checkedKeys,Ia=Gn.halfCheckedKeys;return[se||[],Ia]},[$i,ji,bo,ro]),Eo=Object(y.a)(Ea,2),Ua=Eo[0],Va=Eo[1],ja=Object(n.useMemo)(function(){var Gn=Vr==="radio"?Ua.slice(0,1):Ua;return new Set(Gn)},[Ua,Vr]),to=Object(n.useMemo)(function(){return Vr==="radio"?new Set:new Set(Va)},[Va,Vr]),fo=Object(n.useState)(null),wa=Object(y.a)(fo,2),gr=wa[0],Xo=wa[1];n.useEffect(function(){De||Wa([])},[!!De]);var va=Object(n.useCallback)(function(Gn){var se,Ia;if(xn){var ho=new Map;se=Gn,Ia=Gn.map(function(Xa){var so=da(Xa);return!so&&Yi.current.has(Xa)&&(so=Yi.current.get(Xa)),ho.set(Xa,so),so}),Yi.current=ho}else se=[],Ia=[],Gn.forEach(function(Xa){var so=da(Xa);so!==void 0&&(se.push(Xa),Ia.push(so))});Wa(se),Jn&&Jn(se,Ia)},[Wa,da,Jn,xn]),Ya=Object(n.useCallback)(function(Gn,se,Ia,ho){if($n){var Xa=Ia.map(function(so){return da(so)});$n(da(Gn),se,Xa,ho)}va(Ia)},[$n,da,va]),So=Object(n.useMemo)(function(){if(!Ur||hi)return null;var Gn=Ur===!0?[ve,U,G]:Ur;return Gn.map(function(se){return se===ve?{key:"all",text:Wi.selectionAll,onSelect:function(){va(Ui.map(function(ho,Xa){return Di(ho,Xa)}))}}:se===U?{key:"invert",text:Wi.selectInvert,onSelect:function(){var ho=new Set(ja);ra.forEach(function(so,Lo){var zo=Di(so,Lo);ho.has(zo)?ho.delete(zo):ho.add(zo)});var Xa=Array.from(ho);va(Xa),fr&&(Object(Zi.a)(!1,"Table","`onSelectInvert` will be removed in future. Please use `onChange` instead."),fr(Xa))}}:se===G?{key:"none",text:Wi.selectNone,onSelect:function(){va([]),sr&&sr()}}:se})},[Ur,ja,ra,Di,fr,va]),No=Object(n.useCallback)(function(Gn){if(!De)return Gn;var se=new Set(ja),Ia=Na.map(Di).filter(function(ia){return!Fa.get(ia).disabled}),ho=Ia.every(function(ia){return se.has(ia)}),Xa=Ia.some(function(ia){return se.has(ia)}),so=function(){var Bo=[];ho?Ia.forEach(function(Qa){se.delete(Qa),Bo.push(Qa)}):Ia.forEach(function(Qa){se.has(Qa)||(se.add(Qa),Bo.push(Qa))});var Io=Array.from(se);va(Io),_n&&_n(!ho,Io.map(function(Qa){return da(Qa)}),Bo.map(function(Qa){return da(Qa)}))},Lo;if(Vr!=="radio"){var zo;if(So){var Jo=n.createElement(ha.a,{getPopupContainer:Ei},So.map(function(ia,Bo){var Io=ia.key,Qa=ia.text,yo=ia.onSelect;return n.createElement(ha.a.Item,{key:Io||Bo,onClick:function(){yo&&yo(Ia)}},Qa)}));zo=n.createElement("div",{className:"".concat(zi,"-selection-extra")},n.createElement(ca.a,{overlay:Jo,getPopupContainer:Ei},n.createElement("span",null,n.createElement(Kr.a,null))))}var uo=Na.every(function(ia,Bo){var Io=Di(ia,Bo),Qa=Fa.get(Io)||{};return Qa.disabled});Lo=!hi&&n.createElement("div",{className:"".concat(zi,"-selection")},n.createElement(Gi.a,{checked:!uo&&!!Na.length&&ho,indeterminate:!ho&&Xa,onChange:so,disabled:Na.length===0||uo,skipGroup:!0}),zo)}var Rn;Vr==="radio"?Rn=function(Bo,Io,Qa){var yo=Di(Io,Qa),Co=se.has(yo);return{node:n.createElement(na.a,Object(t.a)({},Fa.get(yo),{checked:Co,onClick:function(Da){return Da.stopPropagation()},onChange:function(Da){se.has(yo)||Ya(yo,!0,[yo],Da.nativeEvent)}})),checked:Co}}:Rn=function(Bo,Io,Qa){var yo,Co=Di(Io,Qa),Do=se.has(Co),Da=to.has(Co),_o=Fa.get(Co),Ko;return kr==="nest"?(Ko=Da,Object(Zi.a)(typeof(_o==null?void 0:_o.indeterminate)!="boolean","Table","set `indeterminate` using `rowSelection.getCheckboxProps` is not allowed with tree structured dataSource.")):Ko=(yo=_o==null?void 0:_o.indeterminate)!==null&&yo!==void 0?yo:Da,{node:n.createElement(Gi.a,Object(t.a)({},_o,{indeterminate:Ko,checked:Do,skipGroup:!0,onClick:function(kt){return kt.stopPropagation()},onChange:function(kt){var v=kt.nativeEvent,l=v.shiftKey,D=-1,Y=-1;if(l&&ji){var ht=new Set([gr,Co]);Ia.some(function(Tn,Ln){if(ht.has(Tn))if(D===-1)D=Ln;else return Y=Ln,!0;return!1})}if(Y!==-1&&D!==Y&&ji){var At=Ia.slice(D,Y+1),Ut=[];Do?At.forEach(function(Tn){se.has(Tn)&&(Ut.push(Tn),se.delete(Tn))}):At.forEach(function(Tn){se.has(Tn)||(Ut.push(Tn),se.add(Tn))});var Yt=Array.from(se);va(Yt),vr&&vr(!Do,Yt.map(function(Tn){return da(Tn)}),Ut.map(function(Tn){return da(Tn)}))}else{var qt=Ua;if(ji){var oe=Do?Object(Ri.b)(qt,Co):Object(Ri.a)(qt,Co);Ya(Co,!Do,oe,v)}else{var Te=Object(Oi.a)([].concat(Object(I.a)(qt),[Co]),!0,bo,ro),Ge=Te.checkedKeys,Ue=Te.halfCheckedKeys,We=Ge;if(Do){var vn=new Set(Ge);vn.delete(Co),We=Object(Oi.a)(Array.from(vn),{checked:!1,halfCheckedKeys:Ue},bo,ro).checkedKeys}Ya(Co,!Do,We,v)}}Xo(Co)}})),checked:Do}};var qo=function(Bo,Io,Qa){var yo=Rn(Bo,Io,Qa),Co=yo.node,Do=yo.checked;return br?br(Do,Io,Qa,Co):Co},wo=Object(i.a)({width:pr,className:"".concat(zi,"-selection-column"),title:De.columnTitle||Lo,render:qo},R,{className:"".concat(zi,"-selection-col")});if(kr==="row"&&Gn.length&&!_a){var Ho=Object(ei.a)(Gn),ss=Ho[0],ts=Ho.slice(1),mo=Ii||nt(ts[0]);return mo&&(ss.fixed=mo),[ss,Object(t.a)(Object(t.a)({},wo),{fixed:mo})].concat(Object(I.a)(ts))}return[Object(t.a)(Object(t.a)({},wo),{fixed:Ii||nt(Gn[0])})].concat(Object(I.a)(Gn))},[Di,Na,De,Ua,ja,to,pr,So,kr,gr,Fa,vr,Ya,ro]);return[No,ja]}var Jt=w("0NbB"),ie=w("ek7X"),ue=w("3S7+");function Ce(De,an){return"key"in De&&De.key!==void 0&&De.key!==null?De.key:De.dataIndex?Array.isArray(De.dataIndex)?De.dataIndex.join("."):De.dataIndex:an}function we(De,an){return an?"".concat(an,"-").concat(De):"".concat(De)}function cn(De,an){return typeof De=="function"?De(an):De}var Cn="ascend",_t="descend";function Xt(De){return Object(H.a)(De.sorter)==="object"&&typeof De.sorter.multiple=="number"?De.sorter.multiple:!1}function Ee(De){return typeof De=="function"?De:De&&Object(H.a)(De)==="object"&&De.compare?De.compare:!1}function Vt(De,an){return an?De[De.indexOf(an)+1]:De[0]}function ce(De,an,Mn){var xn=[];function bn(Yn,Jn){xn.push({column:Yn,key:Ce(Yn,Jn),multiplePriority:Xt(Yn),sortOrder:Yn.sortOrder})}return(De||[]).forEach(function(Yn,Jn){var $n=we(Jn,Mn);Yn.children?("sortOrder"in Yn&&bn(Yn,$n),xn=[].concat(Object(I.a)(xn),Object(I.a)(ce(Yn.children,an,$n)))):Yn.sorter&&("sortOrder"in Yn?bn(Yn,$n):an&&Yn.defaultSortOrder&&xn.push({column:Yn,key:Ce(Yn,$n),multiplePriority:Xt(Yn),sortOrder:Yn.defaultSortOrder}))}),xn}function yn(De,an,Mn,xn,bn,Yn,Jn,$n){return(an||[]).map(function(_n,fr){var sr=we(fr,$n),vr=_n;if(vr.sorter){var pr=vr.sortDirections||bn,Vr=vr.showSorterTooltip===void 0?Jn:vr.showSorterTooltip,Ur=Ce(vr,sr),Ii=Mn.find(function(kr){var er=kr.key;return er===Ur}),br=Ii?Ii.sortOrder:null,hi=Vt(pr,br),Wr=pr.includes(Cn)&&n.createElement(ie.a,{className:b()("".concat(De,"-column-sorter-up"),{active:br===Cn})}),ji=pr.includes(_t)&&n.createElement(Jt.a,{className:b()("".concat(De,"-column-sorter-down"),{active:br===_t})}),zi=Yn||{},Ui=zi.cancelSort,ra=zi.triggerAsc,da=zi.triggerDesc,Di=Ui;hi===_t?Di=da:hi===Cn&&(Di=ra),vr=Object(t.a)(Object(t.a)({},vr),{className:b()(vr.className,Object(i.a)({},"".concat(De,"-column-sort"),br)),title:function(er){var Wi=n.createElement("div",{className:"".concat(De,"-column-sorters")},n.createElement("span",null,cn(_n.title,er)),n.createElement("span",{className:b()("".concat(De,"-column-sorter"),Object(i.a)({},"".concat(De,"-column-sorter-full"),Wr&&ji))},n.createElement("span",{className:"".concat(De,"-column-sorter-inner")},Wr,ji)));return Vr?n.createElement(ue.a,{title:Di},n.createElement("div",{className:"".concat(De,"-column-sorters-with-tooltip")},Wi)):Wi},onHeaderCell:function(er){var Wi=_n.onHeaderCell&&_n.onHeaderCell(er)||{},_a=Wi.onClick;return Wi.onClick=function(Ei){xn({column:_n,key:Ur,sortOrder:hi,multiplePriority:Xt(_n)}),_a&&_a(Ei)},Wi.className=b()(Wi.className,"".concat(De,"-column-has-sorters")),Wi}})}return"children"in vr&&(vr=Object(t.a)(Object(t.a)({},vr),{children:yn(De,vr.children,Mn,xn,bn,Yn,Jn,sr)})),vr})}function Bn(De){var an=De.column,Mn=De.sortOrder;return{column:an,order:Mn,field:an.dataIndex,columnKey:an.key}}function Zn(De){var an=De.filter(function(Mn){var xn=Mn.sortOrder;return xn}).map(Bn);return an.length===0&&De.length?Object(t.a)(Object(t.a)({},Bn(De[De.length-1])),{column:void 0}):an.length<=1?an[0]||{}:an}function Kn(De,an,Mn){var xn=an.slice().sort(function(Jn,$n){return $n.multiplePriority-Jn.multiplePriority}),bn=De.slice(),Yn=xn.filter(function(Jn){var $n=Jn.column.sorter,_n=Jn.sortOrder;return Ee($n)&&_n});return Yn.length?bn.sort(function(Jn,$n){for(var _n=0;_n<Yn.length;_n+=1){var fr=Yn[_n],sr=fr.column.sorter,vr=fr.sortOrder,pr=Ee(sr);if(pr&&vr){var Vr=pr(Jn,$n,vr);if(Vr!==0)return vr===Cn?Vr:-Vr}}return 0}).map(function(Jn){var $n=Jn[Mn];return $n?Object(t.a)(Object(t.a)({},Jn),Object(i.a)({},Mn,Kn($n,an,Mn))):Jn}):bn}function $e(De){var an=De.prefixCls,Mn=De.mergedColumns,xn=De.onSorterChange,bn=De.sortDirections,Yn=De.tableLocale,Jn=De.showSorterTooltip,$n=n.useState(ce(Mn,!0)),_n=Object(y.a)($n,2),fr=_n[0],sr=_n[1],vr=n.useMemo(function(){var br=!0,hi=ce(Mn,!1);if(!hi.length)return fr;var Wr=[];function ji(Ui){br?Wr.push(Ui):Wr.push(Object(t.a)(Object(t.a)({},Ui),{sortOrder:null}))}var zi=null;return hi.forEach(function(Ui){zi===null?(ji(Ui),Ui.sortOrder&&(Ui.multiplePriority===!1?br=!1:zi=!0)):(zi&&Ui.multiplePriority!==!1||(br=!1),ji(Ui))}),Wr},[Mn,fr]),pr=n.useMemo(function(){var br=vr.map(function(hi){var Wr=hi.column,ji=hi.sortOrder;return{column:Wr,order:ji}});return{sortColumns:br,sortColumn:br[0]&&br[0].column,sortOrder:br[0]&&br[0].order}},[vr]);function Vr(br){var hi;br.multiplePriority===!1||!vr.length||vr[0].multiplePriority===!1?hi=[br]:hi=[].concat(Object(I.a)(vr.filter(function(Wr){var ji=Wr.key;return ji!==br.key})),[br]),sr(hi),xn(Zn(hi),hi)}var Ur=function(hi){return yn(an,hi,vr,Vr,bn,Yn,Jn)},Ii=function(){return Zn(vr)};return[Ur,vr,pr,Ii]}var je=w("Y+p1"),L=w.n(je),Et={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M349 838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V642H349v196zm531.1-684H143.9c-24.5 0-39.8 26.7-27.5 48l221.3 376h348.8l221.3-376c12.1-21.3-3.2-48-27.7-48z"}}]},name:"filter",theme:"filled"},$t=Et,ye=function(an,Mn){return n.createElement(Ga.a,Object.assign({},an,{ref:Mn,icon:$t}))};ye.displayName="FilterFilled";var Zt=n.forwardRef(ye),de=w("2/Rp"),he=w("ECub"),le=function(an){return n.createElement("div",{className:an.className,onClick:function(xn){return xn.stopPropagation()}},an.children)},Me=le,Ve=w("hkKa");function Ye(De){var an=n.useRef(De),Mn=Object(Ve.a)();return[function(){return an.current},function(xn){an.current=xn,Mn()}]}var ke=ha.a.SubMenu,nn=ha.a.Item;function Re(De){return De.some(function(an){var Mn=an.children;return Mn})}function hn(De){var an=De.filters,Mn=De.prefixCls,xn=De.filteredKeys,bn=De.filterMultiple,Yn=De.locale;return an.length===0?n.createElement("div",{style:{margin:"16px 0"}},n.createElement(he.a,{image:he.a.PRESENTED_IMAGE_SIMPLE,description:Yn.filterEmptyText,imageStyle:{height:24}})):an.map(function(Jn,$n){var _n=String(Jn.value);if(Jn.children)return n.createElement(ke,{key:_n||$n,title:Jn.text,popupClassName:"".concat(Mn,"-dropdown-submenu")},hn({filters:Jn.children,prefixCls:Mn,filteredKeys:xn,filterMultiple:bn,locale:Yn}));var fr=bn?Gi.a:na.a;return n.createElement(nn,{key:Jn.value!==void 0?_n:$n},n.createElement(fr,{checked:xn.includes(_n)}),n.createElement("span",null,Jn.text))})}function pn(De){var an,Mn=De.prefixCls,xn=De.column,bn=De.dropdownPrefixCls,Yn=De.columnKey,Jn=De.filterMultiple,$n=De.filterState,_n=De.triggerFilter,fr=De.locale,sr=De.children,vr=De.getPopupContainer,pr=xn.filterDropdownVisible,Vr=xn.onFilterDropdownVisibleChange,Ur=n.useState(!1),Ii=Object(y.a)(Ur,2),br=Ii[0],hi=Ii[1],Wr=!!($n&&(((an=$n.filteredKeys)===null||an===void 0?void 0:an.length)||$n.forceFiltered)),ji=function(wa){hi(wa),Vr&&Vr(wa)},zi=typeof pr=="boolean"?pr:br,Ui=$n&&$n.filteredKeys,ra=Ye(Ui||[]),da=Object(y.a)(ra,2),Di=da[0],kr=da[1],er=function(wa){var gr=wa.selectedKeys;kr(gr)};n.useEffect(function(){er({selectedKeys:Ui||[]})},[Ui]);var Wi=n.useState([]),_a=Object(y.a)(Wi,2),Ei=_a[0],Yi=_a[1],ea=n.useRef(),no=function(wa){ea.current=window.setTimeout(function(){Yi(wa)})},$i=function(){window.clearTimeout(ea.current)};n.useEffect(function(){return function(){window.clearTimeout(ea.current)}},[]);var Wa=function(wa){var gr=wa&&wa.length?wa:null;if(gr===null&&(!$n||!$n.filteredKeys)||L()(gr,$n==null?void 0:$n.filteredKeys))return null;_n({column:xn,key:Yn,filteredKeys:gr})},Ta=function(){ji(!1),Wa(Di())},bo=function(){kr([]),ji(!1),Wa([])},Na=function(){var wa=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{closeDropdown:!0};ji(!wa.closeDropdown),Wa(Di())},Fa=function(wa){wa&&Ui!==void 0&&kr(Ui||[]),ji(wa),!wa&&!xn.filterDropdown&&Ta()},ro=b()(Object(i.a)({},"".concat(bn,"-menu-without-submenu"),!Re(xn.filters||[]))),Ea;if(typeof xn.filterDropdown=="function")Ea=xn.filterDropdown({prefixCls:"".concat(bn,"-custom"),setSelectedKeys:function(wa){return er({selectedKeys:wa})},selectedKeys:Di(),confirm:Na,clearFilters:bo,filters:xn.filters,visible:zi});else if(xn.filterDropdown)Ea=xn.filterDropdown;else{var Eo=Di()||[];Ea=n.createElement(n.Fragment,null,n.createElement(ha.a,{multiple:Jn,prefixCls:"".concat(bn,"-menu"),className:ro,onClick:$i,onSelect:er,onDeselect:er,selectedKeys:Eo,getPopupContainer:vr,openKeys:Ei,onOpenChange:no},hn({filters:xn.filters||[],prefixCls:Mn,filteredKeys:Di(),filterMultiple:Jn,locale:fr})),n.createElement("div",{className:"".concat(Mn,"-dropdown-btns")},n.createElement(de.a,{type:"link",size:"small",disabled:Eo.length===0,onClick:bo},fr.filterReset),n.createElement(de.a,{type:"primary",size:"small",onClick:Ta},fr.filterConfirm)))}var Ua=n.createElement(Me,{className:"".concat(Mn,"-dropdown")},Ea),Va;typeof xn.filterIcon=="function"?Va=xn.filterIcon(Wr):xn.filterIcon?Va=xn.filterIcon:Va=n.createElement(Zt,null);var ja=n.useContext(sn.b),to=ja.direction;return n.createElement("div",{className:b()("".concat(Mn,"-column"))},n.createElement("span",{className:"".concat(Mn,"-column-title")},sr),n.createElement("span",{className:b()("".concat(Mn,"-trigger-container"),Object(i.a)({},"".concat(Mn,"-trigger-container-open"),zi)),onClick:function(wa){wa.stopPropagation()}},n.createElement(ca.a,{overlay:Ua,trigger:["click"],visible:zi,onVisibleChange:Fa,getPopupContainer:vr,placement:to==="rtl"?"bottomLeft":"bottomRight"},n.createElement("span",{role:"button",tabIndex:-1,className:b()("".concat(Mn,"-trigger"),{active:Wr})},Va))))}var on=pn;function mn(De,an,Mn){var xn=[];return(De||[]).forEach(function(bn,Yn){var Jn,$n=we(Yn,Mn);if("children"in bn)xn=[].concat(Object(I.a)(xn),Object(I.a)(mn(bn.children,an,$n)));else if(bn.filters||"filterDropdown"in bn||"onFilter"in bn)if("filteredValue"in bn){var _n=bn.filteredValue;"filterDropdown"in bn||(_n=(Jn=_n==null?void 0:_n.map(String))!==null&&Jn!==void 0?Jn:_n),xn.push({column:bn,key:Ce(bn,$n),filteredKeys:_n,forceFiltered:bn.filtered})}else xn.push({column:bn,key:Ce(bn,$n),filteredKeys:an&&bn.defaultFilteredValue?bn.defaultFilteredValue:void 0,forceFiltered:bn.filtered})}),xn}function jn(De,an,Mn,xn,bn,Yn,Jn,$n){return Mn.map(function(_n,fr){var sr=we(fr,$n),vr=_n.filterMultiple,pr=vr===void 0?!0:vr,Vr=_n;if(Vr.filters||Vr.filterDropdown){var Ur=Ce(Vr,sr),Ii=xn.find(function(br){var hi=br.key;return Ur===hi});Vr=Object(t.a)(Object(t.a)({},Vr),{title:function(hi){return n.createElement(on,{prefixCls:"".concat(De,"-filter"),dropdownPrefixCls:an,column:Vr,columnKey:Ur,filterState:Ii,filterMultiple:pr,triggerFilter:bn,locale:Jn,getPopupContainer:Yn},cn(_n.title,hi))}})}return"children"in Vr&&(Vr=Object(t.a)(Object(t.a)({},Vr),{children:jn(De,an,Vr.children,xn,bn,Yn,Jn,sr)})),Vr})}function Ie(De){var an=[];return(De||[]).forEach(function(Mn){var xn=Mn.value,bn=Mn.children;an.push(xn),bn&&(an=[].concat(Object(I.a)(an),Object(I.a)(Ie(bn))))}),an}function fe(De){var an={};return De.forEach(function(Mn){var xn=Mn.key,bn=Mn.filteredKeys,Yn=Mn.column,Jn=Yn.filters,$n=Yn.filterDropdown;if($n)an[xn]=bn||null;else if(Array.isArray(bn)){var _n=Ie(Jn);an[xn]=_n.filter(function(fr){return bn.includes(String(fr))})}else an[xn]=null}),an}function Ne(De,an){return an.reduce(function(Mn,xn){var bn=xn.column,Yn=bn.onFilter,Jn=bn.filters,$n=xn.filteredKeys;return Yn&&$n&&$n.length?Mn.filter(function(_n){return $n.some(function(fr){var sr=Ie(Jn),vr=sr.findIndex(function(Vr){return String(Vr)===String(fr)}),pr=vr!==-1?sr[vr]:fr;return Yn(pr,_n)})}):Mn},De)}function Fe(De){var an=De.prefixCls,Mn=De.dropdownPrefixCls,xn=De.mergedColumns,bn=De.onFilterChange,Yn=De.getPopupContainer,Jn=De.locale,$n=n.useState(mn(xn,!0)),_n=Object(y.a)($n,2),fr=_n[0],sr=_n[1],vr=n.useMemo(function(){var Ii=mn(xn,!1);return Ii.every(function(br){var hi=br.filteredKeys;return hi===void 0})?fr:Ii},[xn,fr]),pr=n.useCallback(function(){return fe(vr)},[vr]),Vr=function(br){var hi=vr.filter(function(Wr){var ji=Wr.key;return ji!==br.key});hi.push(br),sr(hi),bn(fe(hi),hi)},Ur=function(br){return jn(an,Mn,br,vr,Vr,Yn,Jn)};return[Ur,vr,pr]}var rn=Fe;function ln(De,an){return De.map(function(Mn){var xn=Object(t.a)({},Mn);return xn.title=cn(Mn.title,an),"children"in xn&&(xn.children=ln(xn.children,an)),xn})}function _e(De){var an=n.useCallback(function(Mn){return ln(Mn,De)},[De]);return[an]}function dn(De){return function(Mn){var xn,bn=Mn.prefixCls,Yn=Mn.onExpand,Jn=Mn.record,$n=Mn.expanded,_n=Mn.expandable,fr="".concat(bn,"-row-expand-icon");return n.createElement("button",{type:"button",onClick:function(vr){Yn(Jn,vr),vr.stopPropagation()},className:b()(fr,(xn={},Object(i.a)(xn,"".concat(fr,"-spaced"),!_n),Object(i.a)(xn,"".concat(fr,"-expanded"),_n&&$n),Object(i.a)(xn,"".concat(fr,"-collapsed"),_n&&!$n),xn)),"aria-label":$n?De.collapse:De.expand})}}var Sn=dn,tr=w("wgJM");function Pn(De){return De!=null&&De===De.window}function Fn(De,an){if(typeof window=="undefined")return 0;var Mn=an?"scrollTop":"scrollLeft",xn=0;return Pn(De)?xn=De[an?"pageYOffset":"pageXOffset"]:De instanceof Document?xn=De.documentElement[Mn]:De&&(xn=De[Mn]),De&&!Pn(De)&&typeof xn!="number"&&(xn=(De.ownerDocument||De).documentElement[Mn]),xn}function Cr(De,an,Mn,xn){var bn=Mn-an;return De/=xn/2,De<1?bn/2*De*De*De+an:bn/2*((De-=2)*De*De+2)+an}function fi(De){var an=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Mn=an.getContainer,xn=Mn===void 0?function(){return window}:Mn,bn=an.callback,Yn=an.duration,Jn=Yn===void 0?450:Yn,$n=xn(),_n=Fn($n,!0),fr=Date.now(),sr=function vr(){var pr=Date.now(),Vr=pr-fr,Ur=Cr(Vr>Jn?Jn:Vr,_n,De,Jn);Pn($n)?$n.scrollTo(window.pageXOffset,Ur):$n instanceof HTMLDocument||$n.constructor.name==="HTMLDocument"?$n.documentElement.scrollTop=Ur:$n.scrollTop=Ur,Vr<Jn?Object(tr.a)(vr):typeof bn=="function"&&bn()};Object(tr.a)(sr)}var ri=w("D7Yy"),zr=w("3Nzz");function wi(De){return null}var Ai=wi;function gi(De){return null}var Oa=gi,Aa=[];function Oo(De){var an,Mn=De.prefixCls,xn=De.className,bn=De.style,Yn=De.size,Jn=De.bordered,$n=De.dropdownPrefixCls,_n=De.dataSource,fr=De.pagination,sr=De.rowSelection,vr=De.rowKey,pr=De.rowClassName,Vr=De.columns,Ur=De.children,Ii=De.childrenColumnName,br=De.onChange,hi=De.getPopupContainer,Wr=De.loading,ji=De.expandIcon,zi=De.expandable,Ui=De.expandedRowRender,ra=De.expandIconColumnIndex,da=De.indentSize,Di=De.scroll,kr=De.sortDirections,er=De.locale,Wi=De.showSorterTooltip,_a=Wi===void 0?!0:Wi;Object(Zi.a)(!(typeof vr=="function"&&vr.length>1),"Table","`index` parameter of `rowKey` function is deprecated. There is no guarantee that it will work as expected.");var Ei=Object(un.a)(),Yi=n.useMemo(function(){var We=new Set(Object.keys(Ei).filter(function(vn){return Ei[vn]}));return(Vr||pe(Ur)).filter(function(vn){return!vn.responsive||vn.responsive.some(function(Tn){return We.has(Tn)})})},[Ur,Vr,Ei]),ea=Object(c.a)(De,["className","style","columns"]),no=n.useContext(zr.b),$i=n.useContext(sn.b),Wa=$i.locale,Ta=Wa===void 0?ri.default:Wa,bo=$i.renderEmpty,Na=$i.direction,Fa=Yn||no,ro=Object(t.a)(Object(t.a)({},Ta.Table),er),Ea=_n||Aa,Eo=n.useContext(sn.b),Ua=Eo.getPrefixCls,Va=Ua("table",Mn),ja=Ua("dropdown",$n),to=Object(t.a)({childrenColumnName:Ii,expandIconColumnIndex:ra},zi),fo=to.childrenColumnName,wa=fo===void 0?"children":fo,gr=n.useMemo(function(){return Ea.some(function(We){var vn;return(vn=We)===null||vn===void 0?void 0:vn[wa]})?"nest":Ui||zi&&zi.expandedRowRender?"row":null},[Ea]),Xo={body:n.useRef()},va=n.useMemo(function(){return typeof vr=="function"?vr:function(We){var vn;return(vn=We)===null||vn===void 0?void 0:vn[vr]}},[vr]),Ya=Hr(Ea,wa,va),So=Object(y.a)(Ya,1),No=So[0],Gn={},se=function(vn,Tn){var Ln=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Un=Object(t.a)(Object(t.a)({},Gn),vn);Ln&&(Gn.resetPagination(),Un.pagination.current&&(Un.pagination.current=1),fr&&fr.onChange&&fr.onChange(1,Un.pagination.pageSize)),Di&&Di.scrollToFirstRowOnChange!==!1&&Xo.body.current&&fi(0,{getContainer:function(){return Xo.body.current}}),br&&br(Un.pagination,Un.filters,Un.sorter,{currentDataSource:Ne(Kn(Ea,Un.sorterStates,wa),Un.filterStates),action:Tn})},Ia=function(vn,Tn){se({sorter:vn,sorterStates:Tn},"sort",!1)},ho=$e({prefixCls:Va,mergedColumns:Yi,onSorterChange:Ia,sortDirections:kr||["ascend","descend"],tableLocale:ro,showSorterTooltip:_a}),Xa=Object(y.a)(ho,4),so=Xa[0],Lo=Xa[1],zo=Xa[2],Jo=Xa[3],uo=n.useMemo(function(){return Kn(Ea,Lo,wa)},[Ea,Lo]);Gn.sorter=Jo(),Gn.sorterStates=Lo;var Rn=function(vn,Tn){se({filters:vn,filterStates:Tn},"filter",!0)},qo=rn({prefixCls:Va,locale:ro,dropdownPrefixCls:ja,mergedColumns:Yi,onFilterChange:Rn,getPopupContainer:hi}),wo=Object(y.a)(qo,3),Ho=wo[0],ss=wo[1],ts=wo[2],mo=Ne(uo,ss);Gn.filters=ts(),Gn.filterStates=ss;var ia=n.useMemo(function(){return Object(t.a)({},zo)},[zo]),Bo=_e(ia),Io=Object(y.a)(Bo,1),Qa=Io[0],yo=function(vn,Tn){se({pagination:Object(t.a)(Object(t.a)({},Gn.pagination),{current:vn,pageSize:Tn})},"paginate")},Co=Gr(mo.length,fr,yo),Do=Object(y.a)(Co,2),Da=Do[0],_o=Do[1];Gn.pagination=fr===!1?{}:Fr(fr,Da),Gn.resetPagination=_o;var Ko=n.useMemo(function(){if(fr===!1||!Da.pageSize)return mo;var We=Da.current,vn=We===void 0?1:We,Tn=Da.total,Ln=Da.pageSize,Un=Ln===void 0?_r:Ln;return mo.length<Tn?mo.length>Un?(Object(Zi.a)(!1,"Table","`dataSource` length is less than `pagination.total` but large than `pagination.pageSize`. Please make sure your config correct data with async mode."),mo.slice((vn-1)*Un,vn*Un)):mo:mo.slice((vn-1)*Un,vn*Un)},[!!fr,mo,Da&&Da.current,Da&&Da.pageSize,Da&&Da.total]),is=Gt(sr,{prefixCls:Va,data:mo,pageData:Ko,getRowKey:va,getRecordByKey:No,expandType:gr,childrenColumnName:wa,locale:ro,expandIconColumnIndex:to.expandIconColumnIndex,getPopupContainer:hi}),kt=Object(y.a)(is,2),v=kt[0],l=kt[1],D=function(vn,Tn,Ln){var Un;return typeof pr=="function"?Un=b()(pr(vn,Tn,Ln)):Un=b()(pr),b()(Object(i.a)({},"".concat(Va,"-row-selected"),l.has(va(vn,Tn))),Un)};to.__PARENT_RENDER_ICON__=to.expandIcon,to.expandIcon=to.expandIcon||ji||Sn(ro),gr==="nest"&&to.expandIconColumnIndex===void 0?to.expandIconColumnIndex=sr?1:0:to.expandIconColumnIndex>0&&sr&&(to.expandIconColumnIndex-=1),typeof to.indentSize!="number"&&(to.indentSize=typeof da=="number"?da:15);var Y=n.useCallback(function(We){return Qa(v(Ho(so(We))))},[so,Ho,v]),ht,At;if(fr!==!1&&(Da==null?void 0:Da.total)){var Ut;Da.size?Ut=Da.size:Ut=Fa==="small"||Fa==="middle"?"small":void 0;var Yt=function(vn){return n.createElement(yr,Object(t.a)({className:"".concat(Va,"-pagination ").concat(Va,"-pagination-").concat(vn)},Da,{size:Ut}))},qt=Na==="rtl"?"left":"right";if(Da.position!==null&&Array.isArray(Da.position)){var oe=Da.position.find(function(We){return We.indexOf("top")!==-1}),Te=Da.position.find(function(We){return We.indexOf("bottom")!==-1});!oe&&!Te?At=Yt(qt):(oe&&(ht=Yt(oe.toLowerCase().replace("top",""))),Te&&(At=Yt(Te.toLowerCase().replace("bottom",""))))}else At=Yt(qt)}var Ge;typeof Wr=="boolean"?Ge={spinning:Wr}:Object(H.a)(Wr)==="object"&&(Ge=Object(t.a)({spinning:!0},Wr));var Ue=b()("".concat(Va,"-wrapper"),Object(i.a)({},"".concat(Va,"-wrapper-rtl"),Na==="rtl"),xn);return n.createElement("div",{className:Ue,style:bn},n.createElement(si.a,Object(t.a)({spinning:!1},Ge),ht,n.createElement(Pr,Object(t.a)({},ea,{columns:Yi,direction:Na,expandable:to,prefixCls:Va,className:b()((an={},Object(i.a)(an,"".concat(Va,"-middle"),Fa==="middle"),Object(i.a)(an,"".concat(Va,"-small"),Fa==="small"),Object(i.a)(an,"".concat(Va,"-bordered"),Jn),Object(i.a)(an,"".concat(Va,"-empty"),Ea.length===0),an)),data:Ko,rowKey:va,rowClassName:D,emptyText:er&&er.emptyText||bo("Table"),internalHooks:pa,internalRefs:Xo,transformColumns:Y})),At))}Oo.defaultProps={rowKey:"key"},Oo.SELECTION_ALL=ve,Oo.SELECTION_INVERT=U,Oo.SELECTION_NONE=G,Oo.Column=Ai,Oo.ColumnGroup=Oa,Oo.Summary=mr;var Fo=Oo,Yo=Pt.a=Fo},wClo:function(qe,Pt,w){"use strict";var H=w("mrSG"),i=w("aFU3"),y=w("IvmH"),t=w("c0lT"),n=w("APlK"),u=w("c+wO"),p=w("aN7R"),b=w("5z4m"),c=w("iTfj"),S=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,I=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,m=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function r(Lt){var St=Lt.match(m);if(!St)return"";var K="";return St.sort(function(dt,mt){return dt=dt.split(":"),mt=mt.split(":"),Number(dt[0])-Number(mt[0])}),Object(c.each)(St,function(dt){dt=dt.split(":"),K+='<stop offset="'+dt[0]+'" stop-color="'+dt[1]+'"></stop>'}),K}function s(Lt,St){var K=S.exec(Lt),dt=Object(c.mod)(Object(c.toRadian)(parseFloat(K[1])),Math.PI*2),mt=K[2],bt,wt;dt>=0&&dt<.5*Math.PI?(bt={x:0,y:0},wt={x:1,y:1}):.5*Math.PI<=dt&&dt<Math.PI?(bt={x:1,y:0},wt={x:0,y:1}):Math.PI<=dt&&dt<1.5*Math.PI?(bt={x:1,y:1},wt={x:0,y:0}):(bt={x:0,y:1},wt={x:1,y:0});var J=Math.tan(dt),ct=J*J,it=(wt.x-bt.x+J*(wt.y-bt.y))/(ct+1)+bt.x,_=J*(wt.x-bt.x+J*(wt.y-bt.y))/(ct+1)+bt.y;St.setAttribute("x1",bt.x),St.setAttribute("y1",bt.y),St.setAttribute("x2",it),St.setAttribute("y2",_),St.innerHTML=r(mt)}function d(Lt,St){var K=I.exec(Lt),dt=parseFloat(K[1]),mt=parseFloat(K[2]),bt=parseFloat(K[3]),wt=K[4];St.setAttribute("cx",dt),St.setAttribute("cy",mt),St.setAttribute("r",bt),St.innerHTML=r(wt)}var C=function(){function Lt(St){this.cfg={};var K=null,dt=Object(c.uniqueId)("gradient_");return St.toLowerCase()[0]==="l"?(K=Object(u.b)("linearGradient"),s(St,K)):(K=Object(u.b)("radialGradient"),d(St,K)),K.setAttribute("id",dt),this.el=K,this.id=dt,this.cfg=St,this}return Lt.prototype.match=function(St,K){return this.cfg===K},Lt}(),E=C,A={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},f={x:"-40%",y:"-40%",width:"200%",height:"200%"},x=function(){function Lt(St){this.type="filter",this.cfg={},this.type="filter";var K=Object(u.b)("filter");return Object(c.each)(f,function(dt,mt){K.setAttribute(mt,dt)}),this.el=K,this.id=Object(c.uniqueId)("filter_"),this.el.id=this.id,this.cfg=St,this._parseShadow(St,K),this}return Lt.prototype.match=function(St,K){if(this.type!==St)return!1;var dt=!0,mt=this.cfg;return Object(c.each)(Object.keys(mt),function(bt){if(mt[bt]!==K[bt])return dt=!1,!1}),dt},Lt.prototype.update=function(St,K){var dt=this.cfg;return dt[A[St]]=K,this._parseShadow(dt,this.el),this},Lt.prototype._parseShadow=function(St,K){var dt=`<feDropShadow
      dx="`+(St.dx||0)+`"
      dy="`+(St.dy||0)+`"
      stdDeviation="`+(St.blur?St.blur/10:0)+`"
      flood-color="`+(St.color?St.color:"#000")+`"
      flood-opacity="`+(St.opacity?St.opacity:1)+`"
      />`;K.innerHTML=dt},Lt}(),j=x,P=function(){function Lt(St,K){this.cfg={};var dt=Object(u.b)("marker"),mt=Object(c.uniqueId)("marker_");dt.setAttribute("id",mt);var bt=Object(u.b)("path");bt.setAttribute("stroke",St.stroke||"none"),bt.setAttribute("fill",St.fill||"none"),dt.appendChild(bt),dt.setAttribute("overflow","visible"),dt.setAttribute("orient","auto-start-reverse"),this.el=dt,this.child=bt,this.id=mt;var wt=St[K==="marker-start"?"startArrow":"endArrow"];return this.stroke=St.stroke||"#000",wt===!0?this._setDefaultPath(K,bt):(this.cfg=wt,this._setMarker(St.lineWidth,bt)),this}return Lt.prototype.match=function(){return!1},Lt.prototype._setDefaultPath=function(St,K){var dt=this.el;K.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),dt.setAttribute("refX",""+10*Math.cos(Math.PI/6)),dt.setAttribute("refY",""+5)},Lt.prototype._setMarker=function(St,K){var dt=this.el,mt=this.cfg.path,bt=this.cfg.d;Object(c.isArray)(mt)&&(mt=mt.map(function(wt){return wt.join(" ")}).join("")),K.setAttribute("d",mt),dt.appendChild(K),bt&&dt.setAttribute("refX",""+bt/St)},Lt.prototype.update=function(St){var K=this.child;K.attr?K.attr("fill",St):K.setAttribute("fill",St)},Lt}(),W=P,X=function(){function Lt(St){this.type="clip",this.cfg={};var K=Object(u.b)("clipPath");this.el=K,this.id=Object(c.uniqueId)("clip_"),K.id=this.id;var dt=St.cfg.el;return K.appendChild(dt),this.cfg=St,this}return Lt.prototype.match=function(){return!1},Lt.prototype.remove=function(){var St=this.el;St.parentNode.removeChild(St)},Lt}(),$=X,ft=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Z=function(){function Lt(St){this.cfg={};var K=Object(u.b)("pattern");K.setAttribute("patternUnits","userSpaceOnUse");var dt=Object(u.b)("image");K.appendChild(dt);var mt=Object(c.uniqueId)("pattern_");K.id=mt,this.el=K,this.id=mt,this.cfg=St;var bt=ft.exec(St),wt=bt[2];dt.setAttribute("href",wt);var J=new Image;wt.match(/^data:/i)||(J.crossOrigin="Anonymous"),J.src=wt;function ct(){K.setAttribute("width",""+J.width),K.setAttribute("height",""+J.height)}return J.complete?ct():(J.onload=ct,J.src=J.src),this}return Lt.prototype.match=function(St,K){return this.cfg===K},Lt}(),lt=Z,pt=function(){function Lt(St){var K=Object(u.b)("defs"),dt=Object(c.uniqueId)("defs_");K.id=dt,St.appendChild(K),this.children=[],this.defaultArrow={},this.el=K,this.canvas=St}return Lt.prototype.find=function(St,K){for(var dt=this.children,mt=null,bt=0;bt<dt.length;bt++)if(dt[bt].match(St,K)){mt=dt[bt].id;break}return mt},Lt.prototype.findById=function(St){for(var K=this.children,dt=null,mt=0;mt<K.length;mt++)if(K[mt].id===St){dt=K[mt];break}return dt},Lt.prototype.add=function(St){this.children.push(St),St.canvas=this.canvas,St.parent=this},Lt.prototype.getDefaultArrow=function(St,K){var dt=St.stroke||St.strokeStyle;if(this.defaultArrow[dt])return this.defaultArrow[dt].id;var mt=new W(St,K);return this.defaultArrow[dt]=mt,this.el.appendChild(mt.el),this.add(mt),mt.id},Lt.prototype.addGradient=function(St){var K=new E(St);return this.el.appendChild(K.el),this.add(K),K.id},Lt.prototype.addArrow=function(St,K){var dt=new W(St,K);return this.el.appendChild(dt.el),this.add(dt),dt.id},Lt.prototype.addShadow=function(St){var K=new j(St);return this.el.appendChild(K.el),this.add(K),K.id},Lt.prototype.addPattern=function(St){var K=new lt(St);return this.el.appendChild(K.el),this.add(K),K.id},Lt.prototype.addClip=function(St){var K=new $(St);return this.el.appendChild(K.el),this.add(K),K.id},Lt}(),gt=pt,ut=function(Lt){Object(H.b)(St,Lt);function St(K){return Lt.call(this,Object(H.a)(Object(H.a)({},K),{autoDraw:!0,renderer:"svg"}))||this}return St.prototype.getShapeBase=function(){return p},St.prototype.getGroupBase=function(){return b.a},St.prototype.getShape=function(K,dt,mt){var bt=mt.target||mt.srcElement;if(!y.a[bt.tagName]){for(var wt=bt.parentNode;wt&&!y.a[wt.tagName];)wt=wt.parentNode;bt=wt}return this.find(function(J){return J.get("el")===bt})},St.prototype.createDom=function(){var K=Object(u.b)("svg"),dt=new gt(K);return K.setAttribute("width",""+this.get("width")),K.setAttribute("height",""+this.get("height")),this.set("context",dt),K},St.prototype.onCanvasChange=function(K){var dt=this.get("context"),mt=this.get("el");if(K==="sort"){var bt=this.get("children");bt&&bt.length&&Object(u.d)(this,function(J,ct){return bt.indexOf(J)-bt.indexOf(ct)?1:0})}else if(K==="clear"){if(mt){mt.innerHTML="";var wt=dt.el;wt.innerHTML="",mt.appendChild(wt)}}else K==="matrix"?Object(n.c)(this):K==="clip"?Object(n.a)(this,dt):K==="changeSize"&&(mt.setAttribute("width",""+this.get("width")),mt.setAttribute("height",""+this.get("height")))},St.prototype.draw=function(){var K=this.get("context"),dt=this.getChildren();Object(n.a)(this,K),dt.length&&Object(t.a)(K,dt)},St}(i.AbstractCanvas),Bt=Pt.a=ut},"wF/u":function(qe,Pt,w){var H=w("e5cp"),i=w("ExA7");function y(t,n,u,p,b){return t===n?!0:t==null||n==null||!i(t)&&!i(n)?t!==t&&n!==n:H(t,n,u,p,y,b)}qe.exports=y},wJg7:function(qe,Pt){var w=9007199254740991,H=/^(?:0|[1-9]\d*)$/;function i(y,t){var n=typeof y;return t=t==null?w:t,!!t&&(n=="number"||n!="symbol"&&H.test(y))&&y>-1&&y%1==0&&y<t}qe.exports=i},wq2r:function(qe,Pt,w){"use strict";var H=w("mrSG"),i=w("aFU3"),y=w("R5nb"),t=w("9eUa"),n=w("iTfj"),u=w("cyZq"),p=function(b){Object(H.b)(c,b);function c(){return b!==null&&b.apply(this,arguments)||this}return c.prototype.onCanvasChange=function(S){Object(t.h)(this,S)},c.prototype.getShapeBase=function(){return y},c.prototype.getGroupBase=function(){return c},c.prototype._applyClip=function(S,I){I&&(S.save(),Object(t.a)(S,I),I.createPath(S),S.restore(),S.clip(),I._afterDraw())},c.prototype.cacheCanvasBBox=function(){var S=this.cfg.children,I=[],m=[];Object(n.each)(S,function(x){var j=x.cfg.cacheCanvasBBox;j&&x.cfg.isInView&&(I.push(j.minX,j.maxX),m.push(j.minY,j.maxY))});var r=null;if(I.length){var s=Math.min.apply(null,I),d=Math.max.apply(null,I),C=Math.min.apply(null,m),E=Math.max.apply(null,m);r={minX:s,minY:C,x:s,y:C,maxX:d,maxY:E,width:d-s,height:E-C};var A=this.cfg.canvas;if(A){var f=A.getViewRange();this.set("isInView",Object(u.f)(r,f))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",r)},c.prototype.draw=function(S,I){var m=this.cfg.children,r=I?this.cfg.refresh:!0;m.length&&r&&(S.save(),Object(t.a)(S,this),this._applyClip(S,this.getClip()),Object(t.d)(S,m,I),S.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},c.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},c}(i.AbstractGroup);Pt.a=p},wy8a:function(qe,Pt,w){var H=w("KxBF");function i(y,t,n){var u=y.length;return n=n===void 0?u:n,!t&&n>=u?y:H(y,t,n)}qe.exports=i},x1Ya:function(qe,Pt,w){"use strict";var H=w("wx14"),i=w("rePB"),y=w("Ff2n"),t=w("VTBJ"),n=w("1OyB"),u=w("vuIU"),p=w("Ji7U"),b=w("LK+K"),c=w("q1tI"),S=w.n(c),I=w("TSYQ"),m=w.n(I),r=function(s){Object(p.a)(C,s);var d=Object(b.a)(C);function C(E){var A;Object(n.a)(this,C),A=d.call(this,E),A.handleChange=function(x){var j=A.props,P=j.disabled,W=j.onChange;P||("checked"in A.props||A.setState({checked:x.target.checked}),W&&W({target:Object(t.a)(Object(t.a)({},A.props),{},{checked:x.target.checked}),stopPropagation:function(){x.stopPropagation()},preventDefault:function(){x.preventDefault()},nativeEvent:x.nativeEvent}))},A.saveInput=function(x){A.input=x};var f="checked"in E?E.checked:E.defaultChecked;return A.state={checked:f},A}return Object(u.a)(C,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var A,f=this.props,x=f.prefixCls,j=f.className,P=f.style,W=f.name,X=f.id,$=f.type,ft=f.disabled,Z=f.readOnly,lt=f.tabIndex,pt=f.onClick,gt=f.onFocus,ut=f.onBlur,Bt=f.onKeyDown,Lt=f.onKeyPress,St=f.onKeyUp,K=f.autoFocus,dt=f.value,mt=f.required,bt=Object(y.a)(f,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),wt=Object.keys(bt).reduce(function(it,_){return(_.substr(0,5)==="aria-"||_.substr(0,5)==="data-"||_==="role")&&(it[_]=bt[_]),it},{}),J=this.state.checked,ct=m()(x,j,(A={},Object(i.a)(A,"".concat(x,"-checked"),J),Object(i.a)(A,"".concat(x,"-disabled"),ft),A));return S.a.createElement("span",{className:ct,style:P},S.a.createElement("input",Object(H.a)({name:W,id:X,type:$,required:mt,readOnly:Z,disabled:ft,tabIndex:lt,className:"".concat(x,"-input"),checked:!!J,onClick:pt,onFocus:gt,onBlur:ut,onKeyUp:St,onKeyDown:Bt,onKeyPress:Lt,onChange:this.handleChange,autoFocus:K,ref:this.saveInput,value:dt},wt)),S.a.createElement("span",{className:"".concat(x,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(A,f){return"checked"in A?Object(t.a)(Object(t.a)({},f),{},{checked:A.checked}):null}}]),C}(c.Component);r.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}},Pt.a=r},x3EW:function(qe,Pt,w){"use strict";w.r(Pt),w.d(Pt,"Base",function(){return u}),w.d(Pt,"Circle",function(){return c}),w.d(Pt,"Line",function(){return I});var H=w("mrSG"),i=w("iTfj"),y=w("MeYt"),t=w("L16w"),n=function(m){Object(H.b)(r,m);function r(){return m!==null&&m.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var s=m.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},s),{name:"grid",line:{},alternateColor:null,capture:!1,items:[],closed:!1,defaultCfg:{line:{type:"line",style:{lineWidth:1,stroke:t.a.lineColor}}}})},r.prototype.getLineType=function(){var s=this.get("line")||this.get("defaultCfg").line;return s.type},r.prototype.renderInner=function(s){this.drawGrid(s)},r.prototype.getAlternatePath=function(s,d){var C=this.getGridPath(s),E=d.slice(0).reverse(),A=this.getGridPath(E,!0),f=this.get("closed");return f?C=C.concat(A):(A[0][0]="L",C=C.concat(A),C.push(["Z"])),C},r.prototype.getPathStyle=function(){return this.get("line").style},r.prototype.drawGrid=function(s){var d=this,C=this.get("line"),E=this.get("items"),A=this.get("alternateColor"),f=null;Object(i.each)(E,function(x,j){var P=x.id||j;if(C){var W=d.getPathStyle();W=Object(i.isFunction)(W)?W(x,j,E):W;var X=d.getElementId("line-"+P),$=d.getGridPath(x.points);d.addShape(s,{type:"path",name:"grid-line",id:X,attrs:Object(i.mix)({path:$},W)})}if(A&&j>0){var ft=d.getElementId("region-"+P),Z=j%2==0;if(Object(i.isString)(A))Z&&d.drawAlternateRegion(ft,s,f.points,x.points,A);else{var lt=Z?A[1]:A[0];d.drawAlternateRegion(ft,s,f.points,x.points,lt)}}f=x})},r.prototype.drawAlternateRegion=function(s,d,C,E,A){var f=this.getAlternatePath(C,E);this.addShape(d,{type:"path",id:s,name:"grid-region",attrs:{path:f,fill:A}})},r}(y.a),u=n;function p(m,r,s,d){var C=s-m,E=d-r;return Math.sqrt(C*C+E*E)}var b=function(m){Object(H.b)(r,m);function r(){return m!==null&&m.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var s=m.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},s),{type:"circle",center:null,closed:!0})},r.prototype.getGridPath=function(s,d){var C=this.getLineType(),E=this.get("closed"),A=[];if(s.length)if(C==="circle"){var f=this.get("center"),x=s[0],j=p(f.x,f.y,x.x,x.y),P=d?0:1;E?(A.push(["M",f.x,f.y-j]),A.push(["A",j,j,0,0,P,f.x,f.y+j]),A.push(["A",j,j,0,0,P,f.x,f.y-j]),A.push(["Z"])):Object(i.each)(s,function(W,X){X===0?A.push(["M",W.x,W.y]):A.push(["A",j,j,0,0,P,W.x,W.y])})}else Object(i.each)(s,function(W,X){X===0?A.push(["M",W.x,W.y]):A.push(["L",W.x,W.y])}),E&&A.push(["Z"]);return A},r}(u),c=b,S=function(m){Object(H.b)(r,m);function r(){return m!==null&&m.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var s=m.prototype.getDefaultCfg.call(this);return Object(H.a)(Object(H.a)({},s),{type:"line"})},r.prototype.getGridPath=function(s){var d=[];return Object(i.each)(s,function(C,E){E===0?d.push(["M",C.x,C.y]):d.push(["L",C.x,C.y])}),d},r}(u),I=S},xYSL:function(qe,Pt){function w(H,i){return H.has(i)}qe.exports=w},"y0+3":function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return I}),w.d(Pt,"b",function(){return r});var H=/margin|padding|width|height|max|min|offset/,i={left:!0,top:!0},y={cssFloat:1,styleFloat:1,float:1};function t(s){return s.nodeType===1?s.ownerDocument.defaultView.getComputedStyle(s,null):{}}function n(s,d,C){if(d=d.toLowerCase(),C==="auto"){if(d==="height")return s.offsetHeight;if(d==="width")return s.offsetWidth}return d in i||(i[d]=H.test(d)),i[d]?parseFloat(C)||0:C}function u(s,d){var C=arguments.length,E=t(s);return d=y[d]?"cssFloat"in s.style?"cssFloat":"styleFloat":d,C===1?E:n(s,d,E[d]||s.style[d])}function p(s,d,C){var E=arguments.length;if(d=y[d]?"cssFloat"in s.style?"cssFloat":"styleFloat":d,E===3)return typeof C=="number"&&H.test(d)&&(C="".concat(C,"px")),s.style[d]=C,C;for(var A in d)d.hasOwnProperty(A)&&p(s,A,d[A]);return t(s)}function b(s){return s===document.body?document.documentElement.clientWidth:s.offsetWidth}function c(s){return s===document.body?window.innerHeight||document.documentElement.clientHeight:s.offsetHeight}function S(){var s=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),d=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);return{width:s,height:d}}function I(){var s=document.documentElement.clientWidth,d=window.innerHeight||document.documentElement.clientHeight;return{width:s,height:d}}function m(){return{scrollLeft:Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),scrollTop:Math.max(document.documentElement.scrollTop,document.body.scrollTop)}}function r(s){var d=s.getBoundingClientRect(),C=document.documentElement;return{left:d.left+(window.pageXOffset||C.scrollLeft)-(C.clientLeft||document.body.clientLeft||0),top:d.top+(window.pageYOffset||C.scrollTop)-(C.clientTop||document.body.clientTop||0)}}},y1pI:function(qe,Pt,w){var H=w("ljhN");function i(y,t){for(var n=y.length;n--;)if(H(y[n][0],t))return n;return-1}qe.exports=i},y753:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return C});var H=w("mrSG"),i=w("zJSt"),y=w("YuPD"),t=w("w02o"),n=w("tKoa");function u(E){var A=E.chart,f=E.options,x=f.data,j=f.lineStyle,P=f.color,W=f.point,X=f.area;A.data(x);var $=Object(y.b)({},E,{options:{line:{style:j,color:P},point:W&&Object(H.a)({color:P},W),area:X&&Object(H.a)({color:P},X),label:void 0}}),ft=Object(y.b)({},$,{options:{tooltip:!1}});return Object(n.d)($),Object(n.e)(ft),Object(n.a)(ft),E}function p(E){var A,f=E.options,x=f.xAxis,j=f.yAxis,P=f.xField,W=f.yField;return Object(y.e)(Object(t.f)((A={},A[P]=x,A[W]=j,A)))(E)}function b(E){var A=E.chart,f=E.options,x=f.radius;return A.coordinate("polar",{radius:x}),E}function c(E){var A=E.chart,f=E.options,x=f.xField,j=f.xAxis,P=f.yField,W=f.yAxis;return A.axis(x,j),A.axis(P,W),E}function S(E){var A=E.chart,f=E.options,x=f.label,j=f.yField,P=Object(y.c)(A,"line");if(!x)P.label(!1);else{var W=x.callback,X=Object(H.c)(x,["callback"]);P.label({fields:[j],callback:W,cfg:Object(y.o)(X)})}return E}function I(E){return Object(y.e)(u,p,t.j,b,c,t.d,t.k,S,t.c,t.a,Object(t.b)())(E)}var m=w("Ihc8"),r=w("iTfj"),s=function(E){Object(H.b)(A,E);function A(){return E!==null&&E.apply(this,arguments)||this}return Object.defineProperty(A.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),A.prototype.getTooltipItems=function(f){var x=this.getTooltipCfg(),j=x.shared,P=x.title,W=E.prototype.getTooltipItems.call(this,f);if(W.length>0){var X=this.view.geometries[0],$=X.dataArray,ft=W[0].name,Z=[];return $.forEach(function(lt){lt.forEach(function(pt){var gt=m.Util.getTooltipItems(pt,X),ut=gt[0];if(!j&&ut&&ut.name===ft){var Bt=Object(r.isNil)(P)?ft:P;Z.push(Object(H.a)(Object(H.a)({},ut),{name:ut.title,title:Bt}))}else if(j&&ut){var Bt=Object(r.isNil)(P)?ut.name||ft:P;Z.push(Object(H.a)(Object(H.a)({},ut),{name:ut.title,title:Bt}))}})}),Z}return[]},A}(m.TooltipController);Object(m.registerComponentController)("radar-tooltip",s);var d=function(E){Object(H.b)(A,E);function A(){return E!==null&&E.apply(this,arguments)||this}return A.prototype.init=function(){var f=this.context.view;f.removeInteraction("tooltip")},A.prototype.show=function(){var f=this.context.event,x=this.getTooltipController();x.showTooltip({x:f.x,y:f.y})},A.prototype.hide=function(){var f=this.getTooltipController();f.hideTooltip()},A.prototype.getTooltipController=function(){var f=this.context.view;return f.getController("radar-tooltip")},A}(m.Action);Object(m.registerAction)("radar-tooltip",d),Object(m.registerInteraction)("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]});var C=function(E){Object(H.b)(A,E);function A(){var f=E!==null&&E.apply(this,arguments)||this;return f.type="radar",f}return A.prototype.changeData=function(f){this.updateOption({data:f}),this.chart.changeData(f)},A.prototype.getDefaultOptions=function(){return Object(y.b)({},E.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},A.prototype.getSchemaAdaptor=function(){return I},A}(i.a)},yGk4:function(qe,Pt,w){var H=w("Cwc5"),i=w("Kz5y"),y=H(i,"Set");qe.exports=y},yU0y:function(qe,Pt,w){"use strict";w.d(Pt,"b",function(){return H}),w.d(Pt,"a",function(){return i}),w.d(Pt,"c",function(){return y});var H=1e-6,i=typeof Float32Array!="undefined"?Float32Array:Array,y=Math.random;function t(b){i=b}var n=Math.PI/180;function u(b){return b*n}function p(b,c){return Math.abs(b-c)<=H*Math.max(1,Math.abs(b),Math.abs(c))}Math.hypot||(Math.hypot=function(){for(var b=0,c=arguments.length;c--;)b+=arguments[c]*arguments[c];return Math.sqrt(b)})},yUfG:function(qe,Pt,w){"use strict";w.r(Pt),w.d(Pt,"cluster",function(){return b}),w.d(Pt,"hierarchy",function(){return c.c}),w.d(Pt,"pack",function(){return gt}),w.d(Pt,"packSiblings",function(){return ft}),w.d(Pt,"packEnclose",function(){return m}),w.d(Pt,"partition",function(){return St.a}),w.d(Pt,"stratify",function(){return wt}),w.d(Pt,"tree",function(){return O}),w.d(Pt,"treemap",function(){return F.a}),w.d(Pt,"treemapBinary",function(){return V}),w.d(Pt,"treemapDice",function(){return rt.a}),w.d(Pt,"treemapSlice",function(){return ot.a}),w.d(Pt,"treemapSliceDice",function(){return st}),w.d(Pt,"treemapSquarify",function(){return Mt.a}),w.d(Pt,"treemapResquarify",function(){return yt});function H(xt,Ot){return xt.parent===Ot.parent?1:2}function i(xt){return xt.reduce(y,0)/xt.length}function y(xt,Ot){return xt+Ot.x}function t(xt){return 1+xt.reduce(n,0)}function n(xt,Ot){return Math.max(xt,Ot.y)}function u(xt){for(var Ot;Ot=xt.children;)xt=Ot[0];return xt}function p(xt){for(var Ot;Ot=xt.children;)xt=Ot[Ot.length-1];return xt}var b=function(){var xt=H,Ot=1,jt=1,Dt=!1;function zt(Tt){var Wt,Ht=0;Tt.eachAfter(function(Le){var Je=Le.children;Je?(Le.x=i(Je),Le.y=t(Je)):(Le.x=Wt?Ht+=xt(Le,Wt):0,Le.y=0,Wt=Le)});var re=u(Tt),pe=p(Tt),me=re.x-xt(re,pe)/2,Se=pe.x+xt(pe,re)/2;return Tt.eachAfter(Dt?function(Le){Le.x=(Le.x-Tt.x)*Ot,Le.y=(Tt.y-Le.y)*jt}:function(Le){Le.x=(Le.x-me)/(Se-me)*Ot,Le.y=(1-(Tt.y?Le.y/Tt.y:1))*jt})}return zt.separation=function(Tt){return arguments.length?(xt=Tt,zt):xt},zt.size=function(Tt){return arguments.length?(Dt=!1,Ot=+Tt[0],jt=+Tt[1],zt):Dt?null:[Ot,jt]},zt.nodeSize=function(Tt){return arguments.length?(Dt=!0,Ot=+Tt[0],jt=+Tt[1],zt):Dt?[Ot,jt]:null},zt},c=w("a8tM"),S=function(xt){return typeof xt=="object"&&"length"in xt?xt:Array.from(xt)};function I(xt){for(var Ot=xt.length,jt,Dt;Ot;)Dt=Math.random()*Ot--|0,jt=xt[Ot],xt[Ot]=xt[Dt],xt[Dt]=jt;return xt}var m=function(xt){for(var Ot=0,jt=(xt=I(Array.from(xt))).length,Dt=[],zt,Tt;Ot<jt;)zt=xt[Ot],Tt&&d(Tt,zt)?++Ot:(Tt=E(Dt=r(Dt,zt)),Ot=0);return Tt};function r(xt,Ot){var jt,Dt;if(C(Ot,xt))return[Ot];for(jt=0;jt<xt.length;++jt)if(s(Ot,xt[jt])&&C(f(xt[jt],Ot),xt))return[xt[jt],Ot];for(jt=0;jt<xt.length-1;++jt)for(Dt=jt+1;Dt<xt.length;++Dt)if(s(f(xt[jt],xt[Dt]),Ot)&&s(f(xt[jt],Ot),xt[Dt])&&s(f(xt[Dt],Ot),xt[jt])&&C(x(xt[jt],xt[Dt],Ot),xt))return[xt[jt],xt[Dt],Ot];throw new Error}function s(xt,Ot){var jt=xt.r-Ot.r,Dt=Ot.x-xt.x,zt=Ot.y-xt.y;return jt<0||jt*jt<Dt*Dt+zt*zt}function d(xt,Ot){var jt=xt.r-Ot.r+Math.max(xt.r,Ot.r,1)*1e-9,Dt=Ot.x-xt.x,zt=Ot.y-xt.y;return jt>0&&jt*jt>Dt*Dt+zt*zt}function C(xt,Ot){for(var jt=0;jt<Ot.length;++jt)if(!d(xt,Ot[jt]))return!1;return!0}function E(xt){switch(xt.length){case 1:return A(xt[0]);case 2:return f(xt[0],xt[1]);case 3:return x(xt[0],xt[1],xt[2])}}function A(xt){return{x:xt.x,y:xt.y,r:xt.r}}function f(xt,Ot){var jt=xt.x,Dt=xt.y,zt=xt.r,Tt=Ot.x,Wt=Ot.y,Ht=Ot.r,re=Tt-jt,pe=Wt-Dt,me=Ht-zt,Se=Math.sqrt(re*re+pe*pe);return{x:(jt+Tt+re/Se*me)/2,y:(Dt+Wt+pe/Se*me)/2,r:(Se+zt+Ht)/2}}function x(xt,Ot,jt){var Dt=xt.x,zt=xt.y,Tt=xt.r,Wt=Ot.x,Ht=Ot.y,re=Ot.r,pe=jt.x,me=jt.y,Se=jt.r,Le=Dt-Wt,Je=Dt-pe,On=zt-Ht,gn=zt-me,Wn=re-Tt,kn=Se-Tt,Vn=Dt*Dt+zt*zt-Tt*Tt,Dn=Vn-Wt*Wt-Ht*Ht+re*re,Nn=Vn-pe*pe-me*me+Se*Se,Qn=Je*On-Le*gn,ir=(On*Nn-gn*Dn)/(Qn*2)-Dt,hr=(gn*Wn-On*kn)/Qn,Sr=(Je*Dn-Le*Nn)/(Qn*2)-zt,mr=(Le*kn-Je*Wn)/Qn,dr=hr*hr+mr*mr-1,Br=2*(Tt+ir*hr+Sr*mr),ii=ir*ir+Sr*Sr-Tt*Tt,mi=-(dr?(Br+Math.sqrt(Br*Br-4*dr*ii))/(2*dr):ii/Br);return{x:Dt+ir+hr*mi,y:zt+Sr+mr*mi,r:mi}}function j(xt,Ot,jt){var Dt=xt.x-Ot.x,zt,Tt,Wt=xt.y-Ot.y,Ht,re,pe=Dt*Dt+Wt*Wt;pe?(Tt=Ot.r+jt.r,Tt*=Tt,re=xt.r+jt.r,re*=re,Tt>re?(zt=(pe+re-Tt)/(2*pe),Ht=Math.sqrt(Math.max(0,re/pe-zt*zt)),jt.x=xt.x-zt*Dt-Ht*Wt,jt.y=xt.y-zt*Wt+Ht*Dt):(zt=(pe+Tt-re)/(2*pe),Ht=Math.sqrt(Math.max(0,Tt/pe-zt*zt)),jt.x=Ot.x+zt*Dt-Ht*Wt,jt.y=Ot.y+zt*Wt+Ht*Dt)):(jt.x=Ot.x+jt.r,jt.y=Ot.y)}function P(xt,Ot){var jt=xt.r+Ot.r-1e-6,Dt=Ot.x-xt.x,zt=Ot.y-xt.y;return jt>0&&jt*jt>Dt*Dt+zt*zt}function W(xt){var Ot=xt._,jt=xt.next._,Dt=Ot.r+jt.r,zt=(Ot.x*jt.r+jt.x*Ot.r)/Dt,Tt=(Ot.y*jt.r+jt.y*Ot.r)/Dt;return zt*zt+Tt*Tt}function X(xt){this._=xt,this.next=null,this.previous=null}function $(xt){if(!(zt=(xt=S(xt)).length))return 0;var Ot,jt,Dt,zt,Tt,Wt,Ht,re,pe,me,Se;if(Ot=xt[0],Ot.x=0,Ot.y=0,!(zt>1))return Ot.r;if(jt=xt[1],Ot.x=-jt.r,jt.x=Ot.r,jt.y=0,!(zt>2))return Ot.r+jt.r;j(jt,Ot,Dt=xt[2]),Ot=new X(Ot),jt=new X(jt),Dt=new X(Dt),Ot.next=Dt.previous=jt,jt.next=Ot.previous=Dt,Dt.next=jt.previous=Ot;t:for(Ht=3;Ht<zt;++Ht){j(Ot._,jt._,Dt=xt[Ht]),Dt=new X(Dt),re=jt.next,pe=Ot.previous,me=jt._.r,Se=Ot._.r;do if(me<=Se){if(P(re._,Dt._)){jt=re,Ot.next=jt,jt.previous=Ot,--Ht;continue t}me+=re._.r,re=re.next}else{if(P(pe._,Dt._)){Ot=pe,Ot.next=jt,jt.previous=Ot,--Ht;continue t}Se+=pe._.r,pe=pe.previous}while(re!==pe.next);for(Dt.previous=Ot,Dt.next=jt,Ot.next=jt.previous=jt=Dt,Tt=W(Ot);(Dt=Dt.next)!==jt;)(Wt=W(Dt))<Tt&&(Ot=Dt,Tt=Wt);jt=Ot.next}for(Ot=[jt._],Dt=jt;(Dt=Dt.next)!==jt;)Ot.push(Dt._);for(Dt=m(Ot),Ht=0;Ht<zt;++Ht)Ot=xt[Ht],Ot.x-=Dt.x,Ot.y-=Dt.y;return Dt.r}var ft=function(xt){return $(xt),xt},Z=w("IeU1"),lt=w("CSvP");function pt(xt){return Math.sqrt(xt.value)}var gt=function(){var xt=null,Ot=1,jt=1,Dt=lt.a;function zt(Tt){return Tt.x=Ot/2,Tt.y=jt/2,xt?Tt.eachBefore(ut(xt)).eachAfter(Bt(Dt,.5)).eachBefore(Lt(1)):Tt.eachBefore(ut(pt)).eachAfter(Bt(lt.a,1)).eachAfter(Bt(Dt,Tt.r/Math.min(Ot,jt))).eachBefore(Lt(Math.min(Ot,jt)/(2*Tt.r))),Tt}return zt.radius=function(Tt){return arguments.length?(xt=Object(Z.a)(Tt),zt):xt},zt.size=function(Tt){return arguments.length?(Ot=+Tt[0],jt=+Tt[1],zt):[Ot,jt]},zt.padding=function(Tt){return arguments.length?(Dt=typeof Tt=="function"?Tt:Object(lt.b)(+Tt),zt):Dt},zt};function ut(xt){return function(Ot){Ot.children||(Ot.r=Math.max(0,+xt(Ot)||0))}}function Bt(xt,Ot){return function(jt){if(Dt=jt.children){var Dt,zt,Tt=Dt.length,Wt=xt(jt)*Ot||0,Ht;if(Wt)for(zt=0;zt<Tt;++zt)Dt[zt].r+=Wt;if(Ht=$(Dt),Wt)for(zt=0;zt<Tt;++zt)Dt[zt].r-=Wt;jt.r=Ht+Wt}}}function Lt(xt){return function(Ot){var jt=Ot.parent;Ot.r*=xt,jt&&(Ot.x=jt.x+xt*Ot.x,Ot.y=jt.y+xt*Ot.y)}}var St=w("+Nd1"),K={depth:-1},dt={};function mt(xt){return xt.id}function bt(xt){return xt.parentId}var wt=function(){var xt=mt,Ot=bt;function jt(Dt){var zt=Array.from(Dt),Tt=zt.length,Wt,Ht,re,pe,me,Se,Le,Je=new Map;for(Ht=0;Ht<Tt;++Ht)Wt=zt[Ht],me=zt[Ht]=new c.a(Wt),(Se=xt(Wt,Ht,Dt))!=null&&(Se+="")&&(Le=me.id=Se,Je.set(Le,Je.has(Le)?dt:me)),(Se=Ot(Wt,Ht,Dt))!=null&&(Se+="")&&(me.parent=Se);for(Ht=0;Ht<Tt;++Ht)if(me=zt[Ht],Se=me.parent){if(pe=Je.get(Se),!pe)throw new Error("missing: "+Se);if(pe===dt)throw new Error("ambiguous: "+Se);pe.children?pe.children.push(me):pe.children=[me],me.parent=pe}else{if(re)throw new Error("multiple roots");re=me}if(!re)throw new Error("no root");if(re.parent=K,re.eachBefore(function(On){On.depth=On.parent.depth+1,--Tt}).eachBefore(c.b),re.parent=null,Tt>0)throw new Error("cycle");return re}return jt.id=function(Dt){return arguments.length?(xt=Object(Z.b)(Dt),jt):xt},jt.parentId=function(Dt){return arguments.length?(Ot=Object(Z.b)(Dt),jt):Ot},jt};function J(xt,Ot){return xt.parent===Ot.parent?1:2}function ct(xt){var Ot=xt.children;return Ot?Ot[0]:xt.t}function it(xt){var Ot=xt.children;return Ot?Ot[Ot.length-1]:xt.t}function _(xt,Ot,jt){var Dt=jt/(Ot.i-xt.i);Ot.c-=Dt,Ot.s+=jt,xt.c+=Dt,Ot.z+=jt,Ot.m+=jt}function R(xt){for(var Ot=0,jt=0,Dt=xt.children,zt=Dt.length,Tt;--zt>=0;)Tt=Dt[zt],Tt.z+=Ot,Tt.m+=Ot,Ot+=Tt.s+(jt+=Tt.c)}function Q(xt,Ot,jt){return xt.a.parent===Ot.parent?xt.a:jt}function k(xt,Ot){this._=xt,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Ot}k.prototype=Object.create(c.a.prototype);function g(xt){for(var Ot=new k(xt,0),jt,Dt=[Ot],zt,Tt,Wt,Ht;jt=Dt.pop();)if(Tt=jt._.children)for(jt.children=new Array(Ht=Tt.length),Wt=Ht-1;Wt>=0;--Wt)Dt.push(zt=jt.children[Wt]=new k(Tt[Wt],Wt)),zt.parent=jt;return(Ot.parent=new k(null,0)).children=[Ot],Ot}var O=function(){var xt=J,Ot=1,jt=1,Dt=null;function zt(pe){var me=g(pe);if(me.eachAfter(Tt),me.parent.m=-me.z,me.eachBefore(Wt),Dt)pe.eachBefore(re);else{var Se=pe,Le=pe,Je=pe;pe.eachBefore(function(Vn){Vn.x<Se.x&&(Se=Vn),Vn.x>Le.x&&(Le=Vn),Vn.depth>Je.depth&&(Je=Vn)});var On=Se===Le?1:xt(Se,Le)/2,gn=On-Se.x,Wn=Ot/(Le.x+On+gn),kn=jt/(Je.depth||1);pe.eachBefore(function(Vn){Vn.x=(Vn.x+gn)*Wn,Vn.y=Vn.depth*kn})}return pe}function Tt(pe){var me=pe.children,Se=pe.parent.children,Le=pe.i?Se[pe.i-1]:null;if(me){R(pe);var Je=(me[0].z+me[me.length-1].z)/2;Le?(pe.z=Le.z+xt(pe._,Le._),pe.m=pe.z-Je):pe.z=Je}else Le&&(pe.z=Le.z+xt(pe._,Le._));pe.parent.A=Ht(pe,Le,pe.parent.A||Se[0])}function Wt(pe){pe._.x=pe.z+pe.parent.m,pe.m+=pe.parent.m}function Ht(pe,me,Se){if(me){for(var Le=pe,Je=pe,On=me,gn=Le.parent.children[0],Wn=Le.m,kn=Je.m,Vn=On.m,Dn=gn.m,Nn;On=it(On),Le=ct(Le),On&&Le;)gn=ct(gn),Je=it(Je),Je.a=pe,Nn=On.z+Vn-Le.z-Wn+xt(On._,Le._),Nn>0&&(_(Q(On,pe,Se),pe,Nn),Wn+=Nn,kn+=Nn),Vn+=On.m,Wn+=Le.m,Dn+=gn.m,kn+=Je.m;On&&!it(Je)&&(Je.t=On,Je.m+=Vn-kn),Le&&!ct(gn)&&(gn.t=Le,gn.m+=Wn-Dn,Se=pe)}return Se}function re(pe){pe.x*=Ot,pe.y=pe.depth*jt}return zt.separation=function(pe){return arguments.length?(xt=pe,zt):xt},zt.size=function(pe){return arguments.length?(Dt=!1,Ot=+pe[0],jt=+pe[1],zt):Dt?null:[Ot,jt]},zt.nodeSize=function(pe){return arguments.length?(Dt=!0,Ot=+pe[0],jt=+pe[1],zt):Dt?[Ot,jt]:null},zt},F=w("tvR+"),V=function(xt,Ot,jt,Dt,zt){var Tt=xt.children,Wt,Ht=Tt.length,re,pe=new Array(Ht+1);for(pe[0]=re=Wt=0;Wt<Ht;++Wt)pe[Wt+1]=re+=Tt[Wt].value;me(0,Ht,xt.value,Ot,jt,Dt,zt);function me(Se,Le,Je,On,gn,Wn,kn){if(Se>=Le-1){var Vn=Tt[Se];Vn.x0=On,Vn.y0=gn,Vn.x1=Wn,Vn.y1=kn;return}for(var Dn=pe[Se],Nn=Je/2+Dn,Qn=Se+1,ir=Le-1;Qn<ir;){var hr=Qn+ir>>>1;pe[hr]<Nn?Qn=hr+1:ir=hr}Nn-pe[Qn-1]<pe[Qn]-Nn&&Se+1<Qn&&--Qn;var Sr=pe[Qn]-Dn,mr=Je-Sr;if(Wn-On>kn-gn){var dr=Je?(On*mr+Wn*Sr)/Je:Wn;me(Se,Qn,Sr,On,gn,dr,kn),me(Qn,Le,mr,dr,gn,Wn,kn)}else{var Br=Je?(gn*mr+kn*Sr)/Je:kn;me(Se,Qn,Sr,On,gn,Wn,Br),me(Qn,Le,mr,On,Br,Wn,kn)}}},rt=w("FPPI"),ot=w("7IPS"),st=function(xt,Ot,jt,Dt,zt){(xt.depth&1?ot.a:rt.a)(xt,Ot,jt,Dt,zt)},Mt=w("I4jL"),yt=function xt(Ot){function jt(Dt,zt,Tt,Wt,Ht){if((re=Dt._squarify)&&re.ratio===Ot)for(var re,pe,me,Se,Le=-1,Je,On=re.length,gn=Dt.value;++Le<On;){for(pe=re[Le],me=pe.children,Se=pe.value=0,Je=me.length;Se<Je;++Se)pe.value+=me[Se].value;pe.dice?Object(rt.a)(pe,zt,Tt,Wt,gn?Tt+=(Ht-Tt)*pe.value/gn:Ht):Object(ot.a)(pe,zt,Tt,gn?zt+=(Wt-zt)*pe.value/gn:Wt,Ht),gn-=pe.value}else Dt._squarify=re=Object(Mt.c)(Ot,Dt,zt,Tt,Wt,Ht),re.ratio=Ot}return jt.ratio=function(Dt){return xt((Dt=+Dt)>1?Dt:1)},jt}(Mt.b)},ycre:function(qe,Pt,w){var H=w("711d"),i=H("length");qe.exports=i},yqCL:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return dt});var H=w("mrSG"),i=w("zJSt"),y=w("YuPD"),t=w("iTfj"),n=w("w02o"),u=w("sqD9"),p=w("4Olw"),b;(function(mt){mt.Left="Left",mt.Right="Right"})(b||(b={}));var c;(function(mt){mt.Line="line",mt.Column="column"})(c||(c={}));var S="left-axes-view",I="right-axes-view",m={nice:!0,label:{autoHide:!0,autoRotate:!1}},r=Object(H.a)(Object(H.a)({},m),{position:"left"}),s=Object(H.a)(Object(H.a)({},m),{position:"right",grid:null});function d(mt){return Object(t.get)(mt,"geometry")===c.Line}function C(mt){return Object(t.get)(mt,"geometry")===c.Column}function E(mt,bt,wt){return C(wt)?Object(y.b)({},{geometry:c.Column,label:wt.label&&wt.isRange?{content:function(ct){var it;return(it=ct[bt])===null||it===void 0?void 0:it.join("-")}}:void 0},wt):Object(H.a)({geometry:c.Line},wt)}function A(mt,bt){var wt=mt[0],J=mt[1];if(Object(t.isArray)(bt)){var ct=bt[0],it=bt[1];return[ct,it]}var _=Object(t.get)(bt,wt),R=Object(t.get)(bt,J);return[_,R]}function f(mt,bt){return bt===b.Left?mt===!1?!1:Object(y.b)({},r,mt):bt===b.Right?mt===!1?!1:Object(y.b)({},s,mt):mt}var x=w("Ihc8");function j(mt){var bt=mt.view,wt=mt.geometryOption,J=mt.yField,ct=mt.legend,it=Object(t.get)(ct,"marker"),_=Object(y.c)(bt,d(wt)?"line":"interval");if(!wt.seriesField){var R=_.getAttribute("color"),Q=R.values[0],k=it||(d(wt)?{symbol:function(F,V,rt){return[["M",F-rt,V],["L",F+rt,V]]},style:{lineWidth:2,r:6,stroke:Q}}:{symbol:"square",style:{fill:Q}});return[{value:J,name:Object(t.get)(bt,"options.scales."+J+".alias")||J,marker:k,isGeometry:!0,viewId:bt.id}]}var g=_.getGroupAttributes();return Object(t.reduce)(g,function(O,F){var V=x.Util.getLegendItems(bt,_,F,bt.getTheme(),it);return O.concat(V)},[])}var P=w("tKoa");function W(mt){var bt=mt.options,wt=mt.chart,J=bt.geometryOption,ct=J.isStack,it=J.color,_=J.seriesField,R=J.groupField,Q=J.isGroup,k=["xField","yField"];if(d(J)){Object(P.d)(Object(y.b)({},mt,{options:Object(H.a)(Object(H.a)(Object(H.a)({},Object(y.k)(bt,k)),J),{line:{color:J.color,style:J.lineStyle}})})),Object(P.e)(Object(y.b)({},mt,{options:Object(H.a)(Object(H.a)(Object(H.a)({},Object(y.k)(bt,k)),J),{point:J.point&&Object(H.a)({color:it,shape:"circle"},J.point)})}));var g=[];Q&&g.push({type:"dodge",dodgeBy:R||_,customOffset:0}),ct&&g.push({type:"stack"}),g.length&&Object(t.each)(wt.geometries,function(O){O.adjust(g)})}return C(J)&&Object(P.c)(Object(y.b)({},mt,{options:Object(H.a)(Object(H.a)(Object(H.a)({},Object(y.k)(bt,k)),J),{widthRatio:J.columnWidthRatio,interval:Object(H.a)(Object(H.a)({},Object(y.k)(J,["color"])),{style:J.columnStyle})})})),mt}function X(mt){var bt,wt=mt.options,J=wt.geometryOptions,ct=J===void 0?[]:J,it=wt.xField,_=wt.yField,R=Object(t.every)(ct,function(Q){var k=Q.geometry;return k===c.Line||k===void 0});return Object(y.b)({},{options:{geometryOptions:[],meta:(bt={},bt[it]={type:"cat",sync:!0,range:R?[0,1]:void 0},bt),tooltip:{showMarkers:R,showCrosshairs:R,shared:!0,crosshairs:{type:"x"}},interactions:R?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},mt,{options:{yAxis:A(_,wt.yAxis),geometryOptions:[E(it,_[0],ct[0]),E(it,_[1],ct[1])],annotations:A(_,wt.annotations)}})}function $(mt){var bt=mt.chart,wt=mt.options,J=wt.xField,ct=wt.yField,it=wt.geometryOptions,_=wt.data,R=wt.tooltip,Q={line:0,column:1},k=[Object(H.a)(Object(H.a)({},it[0]),{id:S,data:_[0],yField:ct[0]}),Object(H.a)(Object(H.a)({},it[1]),{id:I,data:_[1],yField:ct[1]})];return k.sort(function(g,O){return-Q[g.geometry]+Q[O.geometry]}).forEach(function(g){var O=g.id,F=g.data,V=g.yField,rt=C(g)&&g.isPercent,ot=rt?Object(u.b)(F,V,J,V):F,st=bt.createView({id:O}).data(ot),Mt=rt?Object(H.a)({formatter:function(xt){return{name:xt[g.seriesField]||V,value:(Number(xt[V])*100).toFixed(2)+"%"}}},R):R;W({chart:st,options:{xField:J,yField:V,tooltip:Mt,geometryOption:g}})}),mt}function ft(mt){var bt,wt=mt.chart,J=mt.options,ct=J.geometryOptions,it=((bt=wt.getTheme())===null||bt===void 0?void 0:bt.colors10)||[],_=0;return wt.once("beforepaint",function(){Object(t.each)(ct,function(R,Q){var k=Object(p.a)(wt,Q===0?S:I);if(!R.color){var g=k.getGroupScales(),O=Object(t.get)(g,[0,"values","length"],1),F=it.slice(_,_+O).concat(Q===0?[]:it);k.geometries.forEach(function(V){R.seriesField?V.color(R.seriesField,F):V.color(F[0])}),_+=O}}),wt.render(!0)}),mt}function Z(mt){var bt,wt,J=mt.chart,ct=mt.options,it=ct.xAxis,_=ct.yAxis,R=ct.xField,Q=ct.yField;return Object(n.f)((bt={},bt[R]=it,bt[Q[0]]=_[0],bt))(Object(y.b)({},mt,{chart:Object(p.a)(J,S)})),Object(n.f)((wt={},wt[R]=it,wt[Q[1]]=_[1],wt))(Object(y.b)({},mt,{chart:Object(p.a)(J,I)})),mt}function lt(mt){var bt=mt.chart,wt=mt.options,J=Object(p.a)(bt,S),ct=Object(p.a)(bt,I),it=wt.xField,_=wt.yField,R=wt.xAxis,Q=wt.yAxis;return bt.axis(it,!1),bt.axis(_[0],!1),bt.axis(_[1],!1),J.axis(it,R),J.axis(_[0],f(Q[0],b.Left)),ct.axis(it,!1),ct.axis(_[1],f(Q[1],b.Right)),mt}function pt(mt){var bt=mt.chart,wt=mt.options,J=wt.tooltip,ct=Object(p.a)(bt,S),it=Object(p.a)(bt,I);return bt.tooltip(J),ct.tooltip({shared:!0}),it.tooltip({shared:!0}),mt}function gt(mt){var bt=mt.chart;return Object(n.c)(Object(y.b)({},mt,{chart:Object(p.a)(bt,S)})),Object(n.c)(Object(y.b)({},mt,{chart:Object(p.a)(bt,I)})),mt}function ut(mt){var bt=mt.chart,wt=mt.options,J=wt.annotations,ct=Object(t.get)(J,[0]),it=Object(t.get)(J,[1]);return Object(n.b)(ct)(Object(y.b)({},mt,{chart:Object(p.a)(bt,S),options:{annotations:ct}})),Object(n.b)(it)(Object(y.b)({},mt,{chart:Object(p.a)(bt,I),options:{annotations:it}})),mt}function Bt(mt){var bt=mt.chart;return Object(n.a)(Object(y.b)({},mt,{chart:Object(p.a)(bt,S)})),Object(n.a)(Object(y.b)({},mt,{chart:Object(p.a)(bt,I)})),mt}function Lt(mt){var bt=mt.chart,wt=mt.options,J=wt.yAxis;return Object(n.e)(Object(y.b)({},mt,{chart:Object(p.a)(bt,S),options:{yAxis:J[0]}})),Object(n.e)(Object(y.b)({},mt,{chart:Object(p.a)(bt,I),options:{yAxis:J[1]}})),mt}function St(mt){var bt=mt.chart,wt=mt.options,J=wt.legend,ct=wt.geometryOptions,it=wt.yField,_=wt.data,R=Object(p.a)(bt,S),Q=Object(p.a)(bt,I);return J===!1?bt.legend(!1):Object(t.isObject)(J)&&J.custom===!0?bt.legend(J):(bt.once("beforepaint",function(){var k=_[0].length?j({view:R,geometryOption:ct[0],yField:it[0],legend:J}):[],g=_[1].length?j({view:Q,geometryOption:ct[1],yField:it[1],legend:J}):[];bt.legend(Object(y.b)({},J,{custom:!0,items:k.concat(g)}))}),bt.on("legend-item:click",function(k){var g=Object(t.get)(k,"gEvent.delegateObject",{});if(g&&g.item){var O=g.item,F=O.value,V=O.isGeometry,rt=O.viewId;if(V){var ot=Object(t.findIndex)(it,function(yt){return yt===F});if(ot>-1){var st=Object(t.get)(Object(p.a)(bt,rt),"geometries");Object(t.each)(st,function(yt){yt.changeVisible(!g.item.unchecked)})}}else{var Mt=Object(t.get)(bt.getController("legend"),"option.items",[]);Object(t.each)(bt.views,function(yt){var xt=yt.getGroupScales();Object(t.each)(xt,function(Ot){Ot.values&&Ot.values.indexOf(F)>-1&&yt.filter(Ot.field,function(jt){var Dt=Object(t.find)(Mt,function(zt){return zt.value===jt});return!Dt.unchecked})}),bt.render(!0)})}}})),mt}function K(mt){return Object(y.e)(X,$,Z,lt,Lt,pt,gt,ut,n.j,Bt,ft,St)(mt)}var dt=function(mt){Object(H.b)(bt,mt);function bt(){var wt=mt!==null&&mt.apply(this,arguments)||this;return wt.type="dual-axes",wt}return bt.prototype.getDefaultOptions=function(){return Object(y.b)({},mt.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},bt.prototype.getSchemaAdaptor=function(){return K},bt}(i.a)},z4Vf:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return s});var H=w("mrSG"),i=w("zJSt"),y=w("YuPD"),t=w("iTfj"),n=w("w02o"),u=w("tKoa");function p(d){var C=d.chart,E=d.options,A=E.data,f=E.sectorStyle,x=E.color;return C.data(A),Object(y.e)(u.c)(Object(y.b)({},d,{options:{marginRatio:1,interval:{style:f,color:x}}})),d}function b(d){var C=d.chart,E=d.options,A=E.label,f=E.xField,x=Object(y.c)(C,"interval");if(A===!1)x.label(!1);else if(Object(t.isObject)(A)){var j=A.callback,P=A.fields,W=Object(H.c)(A,["callback","fields"]),X=W.offset,$=W.layout;(X===void 0||X>=0)&&($=$?Object(t.isArray)($)?$:[$]:[],W.layout=Object(t.filter)($,function(ft){return ft.type!=="limit-in-shape"}),W.layout.length||delete W.layout),x.label({fields:P||[f],callback:j,cfg:Object(y.o)(W)})}else Object(y.j)(y.a.WARN,A===null,"the label option must be an Object."),x.label({fields:[f]});return d}function c(d){var C=d.chart,E=d.options,A=E.legend,f=E.seriesField;return A===!1?C.legend(!1):f&&C.legend(f,A),d}function S(d){var C=d.chart,E=d.options,A=E.radius,f=E.innerRadius;return C.coordinate({type:"polar",cfg:{radius:A,innerRadius:f}}),d}function I(d){var C,E=d.options,A=E.xAxis,f=E.yAxis,x=E.xField,j=E.yField;return Object(y.e)(Object(n.f)((C={},C[x]=A,C[j]=f,C)))(d)}function m(d){var C=d.chart,E=d.options,A=E.xAxis,f=E.yAxis,x=E.xField,j=E.yField;return A?C.axis(x,A):C.axis(x,!1),f?C.axis(j,f):C.axis(j,!1),d}function r(d){Object(y.e)(p,I,b,S,m,c,n.k,n.c,n.a,n.j,Object(n.b)(),n.i)(d)}var s=function(d){Object(H.b)(C,d);function C(){var E=d!==null&&d.apply(this,arguments)||this;return E.type="rose",E}return C.prototype.changeData=function(E){this.updateOption({data:E}),this.chart.changeData(E)},C.prototype.getDefaultOptions=function(){return Object(y.b)({},d.prototype.getDefaultOptions.call(this),{xAxis:!1,yAxis:!1,legend:{position:"right",offsetX:-10},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]})},C.prototype.getSchemaAdaptor=function(){return r},C}(i.a)},zJSt:function(qe,Pt,w){"use strict";w.d(Pt,"a",function(){return c});var H=w("mrSG"),i=w("Ihc8"),y=w("iTfj"),t=w("f6Jy"),n=w("u3os"),u=w.n(n),p=w("YuPD"),b="data-chart-source-type",c=function(S){Object(H.b)(I,S);function I(m,r){var s=S.call(this)||this;return s.type="base",s.container=typeof m=="string"?document.getElementById(m):m,s.options=Object(p.b)({},s.getDefaultOptions(),r),s.createG2(),s.bindEvents(),s}return I.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},I.prototype.createG2=function(){var m=this.options,r=m.width,s=m.height,d=m.padding,C=m.appendPadding,E=m.renderer,A=m.pixelRatio,f=m.syncViewPadding,x=m.supportCSSTransform,j=m.limitInPlot;this.chart=new i.Chart(Object(H.a)(Object(H.a)({container:this.container,autoFit:!1},this.getChartSize(r,s)),{padding:d,appendPadding:C,renderer:E,pixelRatio:A,localRefresh:!1,syncViewPadding:f,supportCSSTransform:x,limitInPlot:j})),this.container.setAttribute(b,"G2Plot")},I.prototype.getChartSize=function(m,r){var s=Object(p.g)(this.container);return{width:m||s.width||400,height:r||s.height||400}},I.prototype.bindEvents=function(){var m=this;this.chart&&this.chart.on("*",function(r){(r==null?void 0:r.type)&&m.emit(r.type,r)})},I.prototype.getDefaultOptions=function(){return I.getDefaultOptions()},I.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},I.prototype.update=function(m){this.updateOption(m),this.render()},I.prototype.updateOption=function(m){this.options=Object(p.b)({},this.options,m)},I.prototype.setState=function(m,r,s){s===void 0&&(s=!0);var d=Object(p.f)(this.chart);Object(y.each)(d,function(C){r(C.getData())&&C.setState(m,s)})},I.prototype.getStates=function(){var m=Object(p.f)(this.chart),r=[];return Object(y.each)(m,function(s){var d=s.getData(),C=s.getStates();Object(y.each)(C,function(E){r.push({data:d,state:E,geometry:s.geometry,element:s})})}),r},I.prototype.changeData=function(m){this.update({data:m})},I.prototype.changeSize=function(m,r){this.chart.changeSize(m,r)},I.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute(b)},I.prototype.execAdaptor=function(){var m=this.getSchemaAdaptor(),r=this.options,s=r.padding,d=r.appendPadding;this.chart.padding=s,this.chart.appendPadding=d,m({chart:this.chart,options:this.options})},I.prototype.triggerResize=function(){this.chart.forceFit()},I.prototype.bindSizeSensor=function(){var m=this;if(!this.unbind){var r=this.options.autoFit,s=r===void 0?!0:r;s&&(this.unbind=Object(n.bind)(this.container,function(){var d=Object(p.g)(m.container),C=d.width,E=d.height;(C!==m.chart.width||E!==m.chart.height)&&m.triggerResize()}))}},I.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},I}(t.a)},zK8m:function(qe,Pt,w){"use strict";var H=w("mrSG"),i=w("iTfj"),y=w("6JdA"),t=w("sstZ"),n=w("aSjE"),u=w("LmB6"),p=y.a.transform,b="matrix",c=["zIndex","capture","visible","type"],S=["repeat"],I=":",m="*";function r(A){for(var f=[],x=0;x<A.length;x++)Object(i.isArray)(A[x])?f.push([].concat(A[x])):f.push(A[x]);return f}function s(A,f){var x={},j=f.attrs;for(var P in A)x[P]=j[P];return x}function d(A,f){var x={},j=f.attr();return Object(i.each)(A,function(P,W){S.indexOf(W)===-1&&!Object(i.isEqual)(j[W],P)&&(x[W]=P)}),x}function C(A,f){if(f.onFrame)return A;var x=f.startTime,j=f.delay,P=f.duration,W=Object.prototype.hasOwnProperty;return Object(i.each)(A,function(X){x+j<X.startTime+X.delay+X.duration&&P>X.delay&&Object(i.each)(f.toAttrs,function($,ft){W.call(X.toAttrs,ft)&&(delete X.toAttrs[ft],delete X.fromAttrs[ft])})}),A}var E=function(A){Object(H.b)(f,A);function f(x){var j=A.call(this,x)||this;j.attrs={};var P=j.getDefaultAttrs();return Object(i.mix)(P,x.attrs),j.attrs=P,j.initAttrs(P),j.initAnimate(),j}return f.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},f.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},f.prototype.onCanvasChange=function(x){},f.prototype.initAttrs=function(x){},f.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},f.prototype.isGroup=function(){return!1},f.prototype.getParent=function(){return this.get("parent")},f.prototype.getCanvas=function(){return this.get("canvas")},f.prototype.attr=function(){for(var x,j=[],P=0;P<arguments.length;P++)j[P]=arguments[P];var W=j[0],X=j[1];if(!W)return this.attrs;if(Object(i.isObject)(W)){for(var $ in W)this.setAttr($,W[$]);return this.afterAttrsChange(W),this}return j.length===2?(this.setAttr(W,X),this.afterAttrsChange((x={},x[W]=X,x)),this):this.attrs[W]},f.prototype.isClipped=function(x,j){var P=this.getClip();return P&&!P.isHit(x,j)},f.prototype.setAttr=function(x,j){var P=this.attrs[x];P!==j&&(this.attrs[x]=j,this.onAttrChange(x,j,P))},f.prototype.onAttrChange=function(x,j,P){x==="matrix"&&this.set("totalMatrix",null)},f.prototype.afterAttrsChange=function(x){if(this.cfg.isClipShape){var j=this.cfg.applyTo;j&&j.onCanvasChange("clip")}else this.onCanvasChange("attr")},f.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},f.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},f.prototype.setZIndex=function(x){this.set("zIndex",x);var j=this.getParent();return j&&j.sort(),this},f.prototype.toFront=function(){var x=this.getParent();if(!!x){var j=x.getChildren(),P=this.get("el"),W=j.indexOf(this);j.splice(W,1),j.push(this),this.onCanvasChange("zIndex")}},f.prototype.toBack=function(){var x=this.getParent();if(!!x){var j=x.getChildren(),P=this.get("el"),W=j.indexOf(this);j.splice(W,1),j.unshift(this),this.onCanvasChange("zIndex")}},f.prototype.remove=function(x){x===void 0&&(x=!0);var j=this.getParent();j?(Object(t.j)(j.getChildren(),this),j.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),x&&this.destroy()},f.prototype.resetMatrix=function(){this.attr(b,this.getDefaultMatrix()),this.onCanvasChange("matrix")},f.prototype.getMatrix=function(){return this.attr(b)},f.prototype.setMatrix=function(x){this.attr(b,x),this.onCanvasChange("matrix")},f.prototype.getTotalMatrix=function(){var x=this.cfg.totalMatrix;if(!x){var j=this.attr("matrix"),P=this.cfg.parentMatrix;P&&j?x=Object(n.b)(P,j):x=j||P,this.set("totalMatrix",x)}return x},f.prototype.applyMatrix=function(x){var j=this.attr("matrix"),P=null;x&&j?P=Object(n.b)(x,j):P=j||x,this.set("totalMatrix",P),this.set("parentMatrix",x)},f.prototype.getDefaultMatrix=function(){return null},f.prototype.applyToMatrix=function(x){var j=this.attr("matrix");return j?Object(n.c)(j,x):x},f.prototype.invertFromMatrix=function(x){var j=this.attr("matrix");if(j){var P=Object(n.a)(j);if(P)return Object(n.c)(P,x)}return x},f.prototype.setClip=function(x){var j=this.getCanvas(),P=null;if(x){var W=this.getShapeBase(),X=Object(i.upperFirst)(x.type),$=W[X];$&&(P=new $({type:x.type,isClipShape:!0,applyTo:this,attrs:x.attrs,canvas:j}))}return this.set("clipShape",P),this.onCanvasChange("clip"),P},f.prototype.getClip=function(){var x=this.cfg.clipShape;return x||null},f.prototype.clone=function(){var x=this,j=this.attrs,P={};Object(i.each)(j,function($,ft){Object(i.isArray)(j[ft])?P[ft]=r(j[ft]):P[ft]=j[ft]});var W=this.constructor,X=new W({attrs:P});return Object(i.each)(c,function($){X.set($,x.get($))}),X},f.prototype.destroy=function(){var x=this.destroyed;x||(this.attrs={},A.prototype.destroy.call(this))},f.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},f.prototype.animate=function(){for(var x=[],j=0;j<arguments.length;j++)x[j]=arguments[j];var P=this.isCanvas&&this.isCanvas();if(!(!P&&!this.get("canvas"))){this.set("animating",!0);var W=this.get("timeline");W||(W=this.get("canvas").get("timeline"),this.set("timeline",W));var X=this.get("animations")||[];W.timer||W.initTimer();var $=x[0],ft=x[1],Z=x[2],lt=Z===void 0?"easeLinear":Z,pt=x[3],gt=pt===void 0?i.noop:pt,ut=x[4],Bt=ut===void 0?0:ut,Lt,St,K,dt,mt;Object(i.isFunction)($)?(Lt=$,$={}):Object(i.isObject)($)&&$.onFrame&&(Lt=$.onFrame,St=$.repeat),Object(i.isObject)(ft)?(mt=ft,ft=mt.duration,lt=mt.easing||"easeLinear",Bt=mt.delay||0,St=mt.repeat||St||!1,gt=mt.callback||i.noop,K=mt.pauseCallback||i.noop,dt=mt.resumeCallback||i.noop):(Object(i.isNumber)(gt)&&(Bt=gt,gt=null),Object(i.isFunction)(lt)?(gt=lt,lt="easeLinear"):lt=lt||"easeLinear");var bt=d($,this),wt={fromAttrs:s(bt,this),toAttrs:bt,duration:ft,easing:lt,repeat:St,callback:gt,pauseCallback:K,resumeCallback:dt,delay:Bt,startTime:W.getTime(),id:Object(i.uniqueId)(),onFrame:Lt,pathFormatted:!1};X.length>0?X=C(X,wt):W.addAnimator(this),X.push(wt),this.set("animations",X),this.set("_pause",{isPaused:!1})}},f.prototype.stopAnimate=function(x){var j=this;x===void 0&&(x=!0);var P=this.get("animations");Object(i.each)(P,function(W){x&&(W.onFrame?j.attr(W.onFrame(1)):j.attr(W.toAttrs)),W.callback&&W.callback()}),this.set("animating",!1),this.set("animations",[])},f.prototype.pauseAnimate=function(){var x=this.get("timeline"),j=this.get("animations"),P=x.getTime();return Object(i.each)(j,function(W){W._paused=!0,W._pauseTime=P,W.pauseCallback&&W.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:P}),this},f.prototype.resumeAnimate=function(){var x=this.get("timeline"),j=x.getTime(),P=this.get("animations"),W=this.get("_pause").pauseTime;return Object(i.each)(P,function(X){X.startTime=X.startTime+(j-W),X._paused=!1,X._pauseTime=null,X.resumeCallback&&X.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",P),this},f.prototype.emitDelegation=function(x,j){var P=this,W=j.propagationPath,X=this.getEvents(),$;x==="mouseenter"?$=j.fromShape:x==="mouseleave"&&($=j.toShape);for(var ft=function(ut){var Bt=W[ut],Lt=Bt.get("name");if(Lt){if((Bt.isGroup()||Bt.isCanvas&&Bt.isCanvas())&&$&&Object(t.g)(Bt,$))return"break";Object(i.isArray)(Lt)?Object(i.each)(Lt,function(St){P.emitDelegateEvent(Bt,St,j)}):Z.emitDelegateEvent(Bt,Lt,j)}},Z=this,lt=0;lt<W.length;lt++){var pt=ft(lt);if(pt==="break")break}},f.prototype.emitDelegateEvent=function(x,j,P){var W=this.getEvents(),X=j+I+P.type;(W[X]||W[m])&&(P.name=X,P.currentTarget=x,P.delegateTarget=this,P.delegateObject=x.get("delegateObject"),this.emit(X,P))},f.prototype.translate=function(x,j){x===void 0&&(x=0),j===void 0&&(j=0);var P=this.getMatrix(),W=p(P,[["t",x,j]]);return this.setMatrix(W),this},f.prototype.move=function(x,j){var P=this.attr("x")||0,W=this.attr("y")||0;return this.translate(x-P,j-W),this},f.prototype.moveTo=function(x,j){return this.move(x,j)},f.prototype.scale=function(x,j){var P=this.getMatrix(),W=p(P,[["s",x,j||x]]);return this.setMatrix(W),this},f.prototype.rotate=function(x){var j=this.getMatrix(),P=p(j,[["r",x]]);return this.setMatrix(P),this},f.prototype.rotateAtStart=function(x){var j=this.attr(),P=j.x,W=j.y,X=this.getMatrix(),$=p(X,[["t",-P,-W],["r",x],["t",P,W]]);return this.setMatrix($),this},f.prototype.rotateAtPoint=function(x,j,P){var W=this.getMatrix(),X=p(W,[["t",-x,-j],["r",P],["t",x,j]]);return this.setMatrix(X),this},f}(u.a);Pt.a=E},zoYe:function(qe,Pt,w){var H=w("nmnc"),i=w("eUgh"),y=w("Z0cm"),t=w("/9aa"),n=1/0,u=H?H.prototype:void 0,p=u?u.toString:void 0;function b(c){if(typeof c=="string")return c;if(y(c))return i(c,b)+"";if(t(c))return p?p.call(c):"";var S=c+"";return S=="0"&&1/c==-n?"-0":S}qe.exports=b}}]);
